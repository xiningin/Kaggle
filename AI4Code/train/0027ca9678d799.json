{"cell_type":{"0e418139":"code","48b60cc1":"code","b7c24c68":"code","b380a18e":"code","181eef33":"code","72c1a700":"code","f0549e34":"code","0c6dc921":"markdown","7392c960":"markdown","f7ad2795":"markdown","72f54ad0":"markdown"},"source":{"0e418139":"import keras\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport os\nimport seaborn as sns\n%matplotlib inline\nimport vtk\nfrom vtk.util import numpy_support\nimport os\nimport numpy\nfrom matplotlib import cm\n%pylab inline","48b60cc1":"train_dir = os.path.join('\/kaggle\/input\/rsna-miccai-brain-tumor-radiogenomic-classification\/train')\ntest_dir = os.path.join('\/kaggle\/input\/rsna-miccai-brain-tumor-radiogenomic-classification\/test')\ntrain_label=os.path.join('\/kaggle\/input\/rsna-miccai-brain-tumor-radiogenomic-classification\/train_labels.csv')\nprint('total training cases:', len(os.listdir(train_dir)))\nprint('total test cases:', len(os.listdir(test_dir)))\n\n","b7c24c68":"def dcm_to_npy(path_dir=train_dir,case_number='00000',mode='FLAIR'):\n    PathDicom = f\"{path_dir}\"+\"\/\"+f\"{case_number}\"+\"\/\"+f\"{mode}\"\n    reader = vtk.vtkDICOMImageReader()\n    reader.SetDirectoryName(PathDicom)\n    reader.Update()\n    _extent = reader.GetDataExtent()\n    ConstPixelDims = [_extent[1]-_extent[0]+1, _extent[3]-_extent[2]+1, _extent[5]-_extent[4]+1]\n    ConstPixelSpacing = reader.GetPixelSpacing()\n    x = numpy.arange(0.0, (ConstPixelDims[0]+1)*ConstPixelSpacing[0], ConstPixelSpacing[0])\n    y = numpy.arange(0.0, (ConstPixelDims[1]+1)*ConstPixelSpacing[1], ConstPixelSpacing[1])\n    z = numpy.arange(0.0, (ConstPixelDims[2]+1)*ConstPixelSpacing[2], ConstPixelSpacing[2])\n    imageData = reader.GetOutput()\n    pointData = imageData.GetPointData()\n    assert (pointData.GetNumberOfArrays()==1)\n    arrayData = pointData.GetArray(0)\n\n    ArrayDicom = numpy_support.vtk_to_numpy(arrayData)\n    ArrayDicom = ArrayDicom.reshape(ConstPixelDims, order='F')\n    return ArrayDicom\n    ","b380a18e":"Case_100_T1w=dcm_to_npy(path_dir=train_dir,case_number='00100',mode='T1w')\nCase_100_T1w.shape","181eef33":"def visualize(path_dir=train_dir,case_number='00000',mode='FLAIR',slice_index=0):\n    ArrayDicom=dcm_to_npy(path_dir,case_number,mode)\n    plt.figure(figsize=(5, 5))\n    pyplot.set_cmap(pyplot.gray())\n    plt.imshow(numpy.rot90(ArrayDicom[:, :, slice_index]))\n    plt.show()","72c1a700":"visualize(path_dir=train_dir,case_number='00100',mode='T1w',slice_index=10)","f0549e34":"visualize(path_dir=train_dir,case_number='00100',mode='FLAIR',slice_index=10)","0c6dc921":"## Example ","7392c960":"## Converting Function","f7ad2795":"## Visualization","72f54ad0":"# A helpful function for converting DICOM to NUMPY by VTK"}}