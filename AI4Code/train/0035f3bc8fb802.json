{"cell_type":{"fc8ffa6e":"code","49d93734":"code","a484cda0":"code","7f05c2b0":"code","1d634830":"code","f5903d4b":"code","6bd1d1cc":"code","14c17261":"code","6987efc7":"code","b3608f21":"code","48b43a4e":"code","b5757b75":"code","5de0e639":"code","3ebad243":"code","5d68b9e0":"code","22bf6b13":"code","98b0b9e3":"code","22428bde":"code","e2e1c4b6":"code","7c0ebe13":"code","e27767a2":"code","f1b4e75f":"code","61d9ffcb":"code","9d8e52cd":"code","a2584f86":"code","0a721b6c":"code","25ffc6eb":"code","55574e7b":"code","1356eba5":"code","6e152cb5":"code","74ed4b10":"code","1e163d93":"code","3108045c":"code","ddc0a871":"code","51afb3ab":"code","fcdd06d9":"code","a7537a47":"markdown","a1c022e6":"markdown","cdbc8025":"markdown","b75f9e79":"markdown","fe57881f":"markdown","e3663eba":"markdown","495a4d1c":"markdown","f7488a83":"markdown","12ac29a4":"markdown","e95ce529":"markdown","003e360e":"markdown","a5080cfc":"markdown","d7eeed6e":"markdown","e08b4767":"markdown","7bfd1e63":"markdown","ac9cce05":"markdown","eaeeda2d":"markdown","018e19dd":"markdown","890593bf":"markdown","72bd4e81":"markdown","448aba84":"markdown","883e257b":"markdown","7f96d883":"markdown","5bfdba00":"markdown","a82fadac":"markdown","339245ac":"markdown","38c05c82":"markdown","266a41ed":"markdown","b86717c2":"markdown","eb8f230a":"markdown","f40f0f31":"markdown","622678bc":"markdown","51694445":"markdown","4e51a1f1":"markdown","5f8c4e92":"markdown"},"source":{"fc8ffa6e":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as msno\nfrom sklearn import preprocessing\nfrom sklearn.linear_model import LinearRegression\nimport random\nimport os\nprint(os.listdir(\"..\/input\"))\n","49d93734":"DataTrain = pd.read_csv(\"..\/input\/train.csv\")\nDataTest = pd.read_csv(\"..\/input\/test.csv\")","a484cda0":"Y = DataTrain[\"SalePrice\"].copy()\nQuantTrain = DataTrain.select_dtypes(include=['float','integer']).copy()\nQuantTrain.drop(\"SalePrice\", inplace=True, axis=1)\nQualTrain = DataTrain.select_dtypes(include=['object']).copy()\n\nQuantTest = DataTest.select_dtypes(include=['float','integer']).copy()\nQualTest = DataTest.select_dtypes(include=['object']).copy()","7f05c2b0":"msno.matrix(df= QuantTrain, figsize=(20,14), color=(0.5,0,0))","1d634830":"QuantTrain = QuantTrain.fillna({\"LotFrontage\": QuantTrain['LotFrontage'].median()})\nQuantTrain = QuantTrain.fillna({\"GarageYrBlt\": 0})\nQuantTrain = QuantTrain.fillna({\"MasVnrArea\": QuantTrain['MasVnrArea'].median()})","f5903d4b":"QuantTrain.isnull().values.any()","6bd1d1cc":"msno.matrix(df= QuantTest, figsize=(20,14), color=(0.5,0,0))","14c17261":"QuantTest = QuantTest.fillna({\"LotFrontage\": QuantTest['LotFrontage'].median()})\nQuantTest = QuantTest.fillna({\"MasVnrArea\": QuantTest['MasVnrArea'].median()})\nQuantTest = QuantTest.fillna({\"GarageYrBlt\": 0})\nQuantTest = QuantTest.fillna({\"BsmtFinSF1\": QuantTest['BsmtFinSF1'].median()})\nQuantTest = QuantTest.fillna({\"BsmtFinSF2\": QuantTest['BsmtFinSF2'].median()})\nQuantTest = QuantTest.fillna({\"BsmtUnfSF\": QuantTest['BsmtUnfSF'].median()})\nQuantTest = QuantTest.fillna({\"TotalBsmtSF\": QuantTest['TotalBsmtSF'].median()})\nQuantTest = QuantTest.fillna({\"BsmtFullBath\": QuantTest['BsmtFullBath'].median()})\nQuantTest = QuantTest.fillna({\"BsmtHalfBath\": QuantTest['BsmtHalfBath'].median()})\nQuantTest = QuantTest.fillna({\"GarageCars\": QuantTest['GarageCars'].median()})\nQuantTest = QuantTest.fillna({\"GarageArea\": QuantTest['GarageArea'].median()})","6987efc7":"QuantTest.isnull().values.any()","b3608f21":"msno.matrix(df= QualTrain, figsize=(20,14), color=(0.5,0,0))","48b43a4e":"ToDrop=[\"PoolQC\",\"Alley\"]\nQualTrain.drop(ToDrop, inplace=True, axis=1)\nQualTest.drop(ToDrop, inplace=True, axis=1)","b5757b75":"QualTrain = QualTrain.fillna({\"BsmtQual\": \"NoB\"})\nQualTrain = QualTrain.fillna({\"BsmtCond\": \"NoB\"})\nQualTrain = QualTrain.fillna({\"BsmtExposure\": \"NoB\"})\nQualTrain = QualTrain.fillna({\"BsmtFinType1\": \"NoB\"})\nQualTrain = QualTrain.fillna({\"BsmtFinType2\": \"NoB\"})\n\nQualTrain = QualTrain.fillna({\"FireplaceQu\": \"NoF\"})\n\nQualTrain = QualTrain.fillna({\"GarageType\": \"NoG\"})\nQualTrain = QualTrain.fillna({\"GarageFinish\": \"NoG\"})\nQualTrain = QualTrain.fillna({\"GarageQual\": \"NoG\"})\nQualTrain = QualTrain.fillna({\"GarageCond\": \"NoG\"})\n\nQualTrain = QualTrain.fillna({\"MiscFeature\": \"NoGMisc\"})\n\nQualTrain = QualTrain.fillna({\"Fence\": \"NoF\"})\n\nQualTrain = QualTrain.fillna({\"Electrical\": QualTrain['Electrical'].value_counts().idxmax()})","5de0e639":"nan_rows = QualTrain[QualTrain.isnull().T.any().T]\nnan_rows","3ebad243":"for i in [234,529,650,936,973,977,1243,1278]:\n    print(QuantTrain.loc[i,\"MasVnrArea\"])","5d68b9e0":"QualTrain = QualTrain.fillna({\"MasVnrType\": \"None\"})","22bf6b13":"QualTrain.isnull().values.any()","98b0b9e3":"msno.matrix(df= QualTest, figsize=(20,14), color=(0.5,0,0))","22428bde":"QualTest = QualTest.fillna({\"BsmtQual\": \"NoB\"})\nQualTest = QualTest.fillna({\"BsmtCond\": \"NoB\"})\nQualTest = QualTest.fillna({\"BsmtExposure\": \"NoB\"})\nQualTest = QualTest.fillna({\"BsmtFinType1\": \"NoB\"})\nQualTest = QualTest.fillna({\"BsmtFinType2\": \"NoB\"})\n\nQualTest = QualTest.fillna({\"FireplaceQu\": \"NoF\"})\n\nQualTest = QualTest.fillna({\"GarageType\": \"NoG\"})\nQualTest = QualTest.fillna({\"GarageFinish\": \"NoG\"})\nQualTest = QualTest.fillna({\"GarageQual\": \"NoG\"})\nQualTest = QualTest.fillna({\"GarageCond\": \"NoG\"})\n\nQualTest = QualTest.fillna({\"MiscFeature\": \"NoGMisc\"})\n\nQualTest = QualTest.fillna({\"Fence\": \"NoF\"})","e2e1c4b6":"QualTest[QualTest[\"MasVnrType\"].isnull()]","7c0ebe13":"for i in [231,246,422,532,544,581,851,865,880,889,908,1132,1150,1197,1226,1402]:\n    print(QuantTest.loc[i,\"MasVnrArea\"])","e27767a2":"QualTest['MasVnrType'].value_counts().idxmax()","f1b4e75f":"QualTest = QualTest.fillna({\"MasVnrType\": QualTest['MasVnrType'].value_counts().idxmax()})\n#or QualTest = QualTest.fillna({\"MasVnrType\": \"None\"})","61d9ffcb":"QualTest = QualTest.fillna({\"KitchenQual\": QualTest['KitchenQual'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"MSZoning\": QualTest['MSZoning'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"Exterior1st\": QualTest['Exterior1st'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"Functional\": QualTest['Functional'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"Utilities\": QualTest['Utilities'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"SaleType\": QualTest['SaleType'].value_counts().idxmax()})\nQualTest = QualTest.fillna({\"Exterior2nd\": QualTest['Exterior2nd'].value_counts().idxmax()})","9d8e52cd":"nan_rows = QualTest[QualTest.isnull().T.any().T]\nnan_rows","a2584f86":"QualTest.isnull().values.any()","0a721b6c":"QualTrain = pd.get_dummies(QualTrain)\nQualTest = pd.get_dummies(QualTest)","25ffc6eb":"cols_to_scale = ['MSSubClass','LotFrontage','LotArea', 'OverallQual',\n       'OverallCond', 'YearBuilt', 'YearRemodAdd', 'MasVnrArea', 'BsmtFinSF1',\n       'BsmtFinSF2', 'BsmtUnfSF', 'TotalBsmtSF', '1stFlrSF', '2ndFlrSF',\n       'LowQualFinSF', 'GrLivArea', 'BsmtFullBath', 'BsmtHalfBath', 'FullBath',\n       'HalfBath', 'BedroomAbvGr', 'KitchenAbvGr', 'TotRmsAbvGrd',\n       'Fireplaces', 'GarageYrBlt', 'GarageCars', 'GarageArea', 'WoodDeckSF',\n       'OpenPorchSF', 'EnclosedPorch', '3SsnPorch', 'ScreenPorch', 'PoolArea',\n       'MiscVal', 'MoSold', 'YrSold']\nscaler = preprocessing.StandardScaler()\nfor col in cols_to_scale:\n    QuantTrain[col] = pd.DataFrame(scaler.fit_transform(pd.DataFrame(QuantTrain[col])),columns=[col])\n    QuantTest[col] = pd.DataFrame(scaler.fit_transform(pd.DataFrame(QuantTest[col])),columns=[col])","55574e7b":"Xtrain = pd.concat([QuantTrain,QualTrain,Y], axis=1, sort=False)\nXtest = pd.concat([QuantTest,QualTest], axis=1, sort=False)","1356eba5":"corrmat = Xtrain.corr()\ncorrmat['SalePrice'].sort_values(ascending = False)[:100]","6e152cb5":"corr = [\"OverallQual\",\"GrLivArea\",\"GarageCars\",\"GarageArea\",\"TotalBsmtSF\",\"1stFlrSF\",\"FullBath\",\"BsmtQual_Ex\",\n        \"TotRmsAbvGrd\",\"YearBuilt\",\"YearRemodAdd\",\"KitchenQual_Ex\",\"Foundation_PConc\",\"MasVnrArea\",\"Fireplaces\",\n        \"ExterQual_Gd\",\"ExterQual_Ex\",\"BsmtFinType1_GLQ\",\"HeatingQC_Ex\",\"GarageFinish_Fin\",\"Neighborhood_NridgHt\",\n        \"BsmtFinSF1\",\"SaleType_New\",\"SaleCondition_Partial\",\"FireplaceQu_Gd\",\"GarageType_Attchd\",\n        \"LotFrontage\",\"MasVnrType_Stone\",\"Neighborhood_NoRidge\",\"WoodDeckSF\",\"KitchenQual_Gd\",\"2ndFlrSF\",\n        \"OpenPorchSF\",\"BsmtExposure_Gd\",\"Exterior2nd_VinylSd\",\"Exterior1st_VinylSd\",\"HalfBath\",\"GarageCond_TA\",\n        \"LotArea\",\"GarageYrBlt\",\"FireplaceQu_Ex\",\"CentralAir_Y\",\"GarageQual_TA\",\"MSZoning_RL\",\"HouseStyle_2Story\",\n        \"Electrical_SBrkr\",\"RoofStyle_Hip\",\"GarageType_BuiltIn\",\"BsmtQual_Gd\",\"PavedDrive_Y\",\"BsmtFullBath\",\n        \"LotShape_IR1\",\"Neighborhood_StoneBr\",\"BsmtUnfSF\",\"MasVnrType_BrkFace\",\"Fence_NoF\",\"GarageFinish_RFn\",\n        \"RoofMatl_WdShngl\",\"BedroomAbvGr\",\"FireplaceQu_TA\",\"LotConfig_CulDSac\",\"Neighborhood_Somerst\",\n        \"BldgType_1Fam\",\"BsmtExposure_Av\",\"Exterior1st_CemntBd\",\"Exterior2nd_CmentBd\",\"Neighborhood_Timber\",\n        \"LotShape_IR2\",\"LandContour_HLS\",\"BsmtFinType2_Unf\",\"Functional_Typ\",\"Condition1_Norm\",\"ScreenPorch\",\n        \"ExterCond_TA\",\"BsmtCond_TA\",\"Heating_GasA\",\"PoolArea\",\"MSZoning_FV\",\"BsmtCond_Gd\",\"Exterior2nd_ImStucc\",\n        \"Neighborhood_CollgCr\",\"MiscFeature_NoGMisc\",\"Neighborhood_Crawfor\",\"Neighborhood_Veenker\",\n        \"Neighborhood_ClearCr\"]\n       \nXTrain = Xtrain[corr]\nXTest = Xtest[corr]","74ed4b10":"corr1 = [\"OverallQual\",\"GrLivArea\",\"GarageCars\",\"GarageArea\",\"TotalBsmtSF\",\"1stFlrSF\",\"FullBath\",\"BsmtQual_Ex\",\n        \"TotRmsAbvGrd\",\"YearBuilt\",\"YearRemodAdd\",\"KitchenQual_Ex\",\"Foundation_PConc\",\"MasVnrArea\",\"Fireplaces\",\n        \"ExterQual_Gd\",\"ExterQual_Ex\",\"BsmtFinType1_GLQ\",\"HeatingQC_Ex\",\"GarageFinish_Fin\",\"Neighborhood_NridgHt\",\n         \"GarageYrBlt\",\"SalePrice\"]\nVisualisation = Xtrain[corr1]\nplt.figure(figsize =(15,8))\nsns.heatmap(Visualisation.corr(),annot=True,cmap='coolwarm')\nplt.show()","1e163d93":"#ToDrop = [\"GarageArea\"]\n#XTrain.drop(ToDrop, inplace=True, axis=1)\n#XTest.drop(ToDrop, inplace=True, axis=1)","3108045c":"fig, axes = plt.subplots(ncols=3, nrows=2, figsize=(16, 10))\naxes = np.ravel(axes)\ncol_name = [\"OverallQual\",\"GrLivArea\",\"GarageCars\",\"TotalBsmtSF\",\"1stFlrSF\",\"FullBath\"]\nfor i, c in zip(range(6), col_name):\n    Visualisation.plot.scatter(ax=axes[i], x=c, y='SalePrice', sharey=True, colorbar=False, c='orange')","ddc0a871":"index= [(Visualisation[Visualisation['GrLivArea'] > 5]).index & (Visualisation[Visualisation['SalePrice'] < 300000]).index ,\n         (Visualisation[Visualisation['TotalBsmtSF'] > 10]).index & (Visualisation[Visualisation['SalePrice'] < 300000]).index ,\n         (Visualisation[Visualisation['1stFlrSF'] > 8]).index & (Visualisation[Visualisation['SalePrice'] < 300000]).index]\nindex","51afb3ab":"# Create linear regression object\nLM = LinearRegression()\n# Train the model using the training DataDrame\nLM.fit(XTrain,Y)\n#Prediction of the Sale Prices from the testing DataDrame\npredictions = LM.predict(XTest)","fcdd06d9":"submit = pd.DataFrame({'Id': Xtest.loc[:,\"Id\"], 'SalePrice': predictions})\nsubmit.to_csv('submission.csv', index=False)","a7537a47":"**Now we scale the numerical values so they will be in the same interval**","a1c022e6":"**=> Fill all the NaN boxes by \"None\"**","cdbc8025":"**Search the indexes of the NaN values in the feature \"MasVnrType\"**","b75f9e79":"**\"GarageCars\" and \"GarageArea\" are so correlated together and boh of them give us the same information so we can get rid of one of them. But when I let both of them the prediction error has gone down so I preferred to not drop one of them**","fe57881f":"**Fill the other missing values by the most frequent one because we have a lack of information**","e3663eba":"**Verify what these NaN values in \"MasVnrArea\" column mean by using the QuantTrain DataFrame**","495a4d1c":"**Fill the empty boxes in the QualTest DataFrame with significant strings because NaN means that there is no that equipement**","f7488a83":"**Here we drow the \"SalePrice\" in terms of the best 6 features (most correlated) to see if there are some outliers that we can eliminate**","12ac29a4":"**All of them are 0 => There is no  Masonry veneer area => we replace the NaN values by \"None\"**","e95ce529":"**Visualize the QualTrain DataFrame to see the empty boxes**","003e360e":"**Fill the all the NaN boxes with the median in the QuantTest DataFrame except the the NaN boxes in \"GarageYrBlt\" with 0 because there is no garage**","a5080cfc":"**Fill the empty boxes in the QualTrain DataFrame with significant strings because NaN means that there is no that equipement except for the feature \"Electrical\", we fill them by the most frequent value because there is a lack of information **","d7eeed6e":"**Verify what these NaN values in \"MasVnrArea\" column mean by using the QuantTest DataFrame**","e08b4767":"**Separation of the DataTrain and the DataTest into two Data Frame each, one with numerical values (QuantTrain & QuantTest) and one with categorical values (QualTrain & QualTest)**","7bfd1e63":"**We take the features that are correlated with the \"SalePrice\" with a coefficient above than 0.05**","ac9cce05":"**Drop the \"Alley\" and \"PoolQc\" columns beacause they are almost empty. Besides, for the \"PoolQc\", we have an other feature which is \"PoolArea\" in the Quantitative DataFrame that can replace it.**","eaeeda2d":"**=> Find the indexes of the outliers**","018e19dd":"**Submission**","890593bf":"**Visualize the QualTest DataFrame to see the empty boxes**","72bd4e81":"**Visualize the QuantTest DataFrame to see the empty boxes**","448aba84":"**=> Both of Qualitative Data are well defined**","883e257b":"**Reassembly of the Data Frames**","7f96d883":"**All of them refer that there is no  Masonry veneer area so we have to fill them by \"None\", except one boxe so we fill by the most frequent value**","5bfdba00":"**Fill the NaN boxes in the \"LotFrontage\" & \"MasVnrArea\" columns with the median and the NaN boxes in \"GarageYrBlt\" with 0 because there is no garage**","a82fadac":"**=> See the most frequent value**","339245ac":"**Now we create Dummy variables (Binary variables) for categorical features so that we can use them in our linear model**","38c05c82":"**In fact we will not delete them because when I deleted them the model didn't get improved**","266a41ed":"**=> all the values in the Quantitative DataFrames are defined**","b86717c2":"**=> All the QualtTrain's boxes are full now**","eb8f230a":"**Linear Regression Model**","f40f0f31":"**Drow the correlation Matrix between the most correlated features with the \"SalePrice\", to see if there is a correlation between 2 features so we might eliminate one of them**","622678bc":"**Find the correlation between all the features and the \"SalePrice\" so we can choose the most correlated features and use them then in our model**","51694445":"**See if there are other empty boxes in the DataFrame**","4e51a1f1":"**=> All the QuantTrain's boxes are full now**","5f8c4e92":"**Visualize the QuantTrain DataFrame to see the empty boxes**"}}