{"cell_type":{"01ec1629":"code","5c8bd3dc":"code","e2c7455b":"code","cfa8bc38":"code","2438f3a1":"code","d583bad5":"code","07720fd6":"code","397061d3":"code","a12c32b0":"code","fe4e32bf":"code","ca397425":"code","46097add":"code","bb23670a":"code","6b8e615c":"code","4c7ca6a6":"code","b86ad9a1":"code","83f1baf2":"code","aec1f084":"code","52b050a9":"code","e5d3890c":"code","72d64093":"code","fc35693a":"code","e635b540":"code","0c432401":"code","25ba3042":"code","88bd5b15":"code","f771e50c":"code","22ee2e83":"code","5f37b518":"code","bf64695a":"code","549ba733":"code","4f1215bc":"code","2eae924d":"code","85c96dd4":"code","eeaa0807":"code","3bfd9e64":"code","500ee2d2":"code","10119988":"code","1e2a505d":"code","8f9cf9d4":"code","9df9586f":"code","aead990b":"code","5103b05d":"code","dbaa9ba1":"code","3e0c9ec7":"code","3dc74519":"code","e077cb66":"markdown","b321667f":"markdown","ea4f8166":"markdown","2b0f1719":"markdown","c737714f":"markdown","87f1e093":"markdown","e0b38e1d":"markdown","5e0885e3":"markdown","b72139cb":"markdown","afc694b4":"markdown","83949254":"markdown","e1400bd5":"markdown","8ccc2b70":"markdown","4e362381":"markdown","9d0793dd":"markdown","29004c42":"markdown","5a1ef143":"markdown","9ae0d936":"markdown","389d217c":"markdown","da850988":"markdown","f160c787":"markdown","bfa90703":"markdown","647f2b8a":"markdown","69bafabf":"markdown","9630d871":"markdown","fa337acd":"markdown","fbe31138":"markdown","96f6ebea":"markdown","1c920603":"markdown","c1b09a64":"markdown","09211fe5":"markdown","0da35c43":"markdown","cc8c46d9":"markdown","dcabbd82":"markdown","a34e2171":"markdown","168b06c2":"markdown","f1834474":"markdown","bde1939b":"markdown","f9ccd898":"markdown","c6a1d519":"markdown","6df6f32e":"markdown","f8241967":"markdown","97db9c93":"markdown","0a93b4c2":"markdown","7ee00685":"markdown","75e30554":"markdown","121d00fe":"markdown","eb641355":"markdown","f526f62b":"markdown"},"source":{"01ec1629":"%%html\n<style>\n.rendered_html tr, .rendered_html th, .rendered_html td    {\n    text-align: left\n    }\n<\/style>","5c8bd3dc":"!pip install swifter","e2c7455b":"import requests, zipfile, io\nimport pandas as pd\nimport numpy as np\nimport glob\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport swifter\nfrom IPython.display import display\n\n%matplotlib inline\n\nsns.set(style=\"whitegrid\")\npd.set_option('float_format', '{:f}'.format)","cfa8bc38":"df = pd.read_csv('..\/input\/ford-gobike-data-wrangling\/all_tripdata_cleaned.csv',dtype={\"start_station_id\": \"str\", \"end_station_id\": \"str\", \"bike_id\" : \"str\"}, parse_dates = [\"start_time\", \"end_time\"], low_memory=False)","2438f3a1":"columns = ['duration_sec',\n           'start_time','start_station_city','start_station_id','start_station_name','start_station_latitude','start_station_longitude',\n           'end_time'  ,'end_station_city','end_station_id'  ,'end_station_name'  ,'end_station_latitude'  ,'end_station_longitude'  ,\n           'bike_id','user_type','member_birth_year','member_age_group','member_gender','bike_share_for_all_trip','rental_access_method'\n          ]\ndf = df[columns]","d583bad5":"display(df.info())\ndisplay(df.describe())","07720fd6":"df[\"within_city_trip\"] = np.nan\ndf.loc[(df[\"start_station_city\"] == \"SAN FRANSISCO\") & (df[\"end_station_city\"] == \"SAN FRANSISCO\"),\"within_city_trip\"] = \"SAN FRANSISCO\"\ndf.loc[(df[\"start_station_city\"] == \"OAKLAND\"      ) & (df[\"end_station_city\"] == \"OAKLAND\"      ),\"within_city_trip\"] = \"OAKLAND\"\ndf.loc[(df[\"start_station_city\"] == \"SAN JOSE\"     ) & (df[\"end_station_city\"] == \"SAN JOSE\"     ),\"within_city_trip\"] = \"SAN JOSE\"\ndf.loc[(df[\"start_station_city\"] != df[\"end_station_city\"]                                       ),\"within_city_trip\"] = \"OTHERS\"","397061d3":"df_trips_within_city = df.query('within_city_trip != \"OTHERS\"')\nplt.figure(figsize = [12, 7])\nplt.subplot(1, 2, 1)\nplt.suptitle('Number of Within-City Trips',fontsize=16);\ngraph = sns.countplot(data = df_trips_within_city, x = \"within_city_trip\",order = df_trips_within_city.within_city_trip.value_counts().index);\ngraph.set_xlabel('Cities')\ngraph.set_ylabel('Number of Bike Trips')\n\ntrips_per_city = df_trips_within_city.groupby('within_city_trip')[['within_city_trip']].count()\ntrips_per_city[\"within_city_trip_prop\"] = trips_per_city[\"within_city_trip\"] \/ trips_per_city[\"within_city_trip\"].sum()\ntrips_per_city.sort_values(by=\"within_city_trip_prop\",inplace=True,ascending=False)\n\nplt.subplot(1, 2, 2)\nplt.pie(trips_per_city.within_city_trip_prop.tolist(), explode = (0,0,0),labels = trips_per_city.index.tolist(), autopct='%1.1f%%', startangle=90, textprops={'color':'white', \"fontsize\":16})\nplt.show()","a12c32b0":"city_start_stations = df_trips_within_city.groupby([\"within_city_trip\",\"start_station_id\"])[\"start_station_id\"].count().reset_index(name=\"start_station_id_count\")\ncity_end_stations = df_trips_within_city.groupby([\"within_city_trip\",\"end_station_id\"])[\"end_station_id\"].count().reset_index(name=\"end_station_id_count\")\ncity_start_stations = city_start_stations.rename(columns={\"start_station_id\":\"station_id\"})[[\"within_city_trip\",\"station_id\"]]\ncity_end_stations = city_end_stations.rename(columns={\"end_station_id\":\"station_id\"})[[\"within_city_trip\",\"station_id\"]]\ncity_stations = pd.concat([city_start_stations, city_end_stations], axis=0, ignore_index=True, sort=True)\ncity_stations = city_stations.drop_duplicates()","fe4e32bf":"plt.figure(figsize = [12, 7])\nplt.subplot(1, 2, 1)\nplt.suptitle('Number of Stations per City',fontsize=16);\ngraph = sns.countplot(data = city_stations, x = \"within_city_trip\",order = city_stations.within_city_trip.value_counts().index);\ngraph.set_xlabel('Cities')\ngraph.set_ylabel('Number of Stations')\n\nstations_per_city= city_stations.groupby('within_city_trip')[[\"station_id\"]].count()\nstations_per_city[\"stations_prop\"] = stations_per_city[\"station_id\"] \/ stations_per_city[\"station_id\"].sum()\nstations_per_city.sort_values(by=\"stations_prop\",inplace=True,ascending=False)\n\nplt.subplot(1, 2, 2)\nplt.pie(stations_per_city.stations_prop.tolist(), explode = (0,0,0),labels = stations_per_city.index.tolist(), autopct='%1.1f%%', startangle=90, textprops={'color':'white',\"fontsize\":16})\nplt.show()","ca397425":"plt.figure(figsize = [12, 7])\nplt.subplot(1, 2, 1)\nplt.suptitle('Number of Bikes per City',fontsize=16);\ngraph = sns.countplot(data = df_trips_within_city, x = \"within_city_trip\",order = df_trips_within_city.within_city_trip.value_counts().index);\ngraph.set_xlabel('Cities')\ngraph.set_ylabel('Number of Bikes')\n\ncity_bikes = df_trips_within_city.groupby([\"within_city_trip\",\"bike_id\"])[\"bike_id\"].count().reset_index(name=\"bike_id_count\")\ncity_bikes = city_bikes[[\"within_city_trip\",\"bike_id\"]].groupby(\"within_city_trip\")[[\"bike_id\"]].count()\ncity_bikes[\"bike_prop\"] = city_bikes[\"bike_id\"] \/ city_bikes[\"bike_id\"].sum()\ncity_bikes.sort_values(by=\"bike_prop\",inplace=True,ascending=False)\n\nplt.subplot(1, 2, 2)\nplt.pie(city_bikes.bike_prop.tolist(), explode = (0,0,0),labels = city_bikes.index.tolist(), autopct='%1.1f%%', startangle=90, textprops={'color':'white',\"fontsize\":16})\nplt.show()","46097add":"trips_per_gender = df.groupby('member_gender')[['member_gender']].count().rename(columns={\"member_gender\":\"member_gender_count\"}).sort_values(\"member_gender_count\",ascending=False)\ntrips_per_gender.plot.bar()\nplt.show()","bb23670a":"plt.figure(figsize = [12, 7])\nplt.suptitle('Trips Rate per Gender',fontsize=16);\nplt.pie(trips_per_gender.member_gender_count, explode = (0,0,0),labels = trips_per_gender.index.tolist(), autopct='%1.1f%%', startangle=90, textprops={'color':'white',\"fontsize\":16})\nplt.legend(loc=\"upper right\")\nplt.show()","6b8e615c":"df[\"duration_min\"] = df[\"duration_sec\"]\/60","4c7ca6a6":"sns.violinplot(data = df, x = 'member_gender', y = 'duration_min',order=df.member_gender.value_counts().index)","b86ad9a1":"sns.violinplot(data = df.query(\"duration_min < 200\"), x = 'member_gender', y = 'duration_min',order=df.member_gender.value_counts().index)","83f1baf2":"plt.figure(figsize = [15, 7])\nplt.suptitle('Trip Duration (Minutes) Vs Gender',fontsize=16);\n\nplt.subplot(1, 3, 1)\ngraph1 = sns.violinplot(data = df.query(\"duration_min <= 60\"), x = 'member_gender', y = 'duration_min',order=df.member_gender.value_counts().index)\ngraph1.set_xlabel('Gender')\ngraph1.set_ylabel('Trip Duration (Minutes)')\nplt.subplot(1, 3, 2)\ngraph2 = sns.violinplot(data = df.query(\"duration_min > 60 and duration_min <= 200\"), x = 'member_gender', y = 'duration_min',order=df.member_gender.value_counts().index)\ngraph2.set_xlabel('Gender')\ngraph2.set_ylabel('Trip Duration (Minutes)')\nplt.subplot(1, 3, 3)\ngraph3 = sns.violinplot(data = df.query(\"duration_min > 200\"), x = 'member_gender', y = 'duration_min',order=df.member_gender.value_counts().index)\ngraph3.set_xlabel('Gender')\ngraph3.set_ylabel('Trip Duration (Minutes)')\nplt.tight_layout()\nplt.show()","aec1f084":"plt.figure(figsize=(20, 10), dpi=80)\nplt.scatter(df.duration_min,(2019 - df.member_birth_year))","52b050a9":"df.loc[(df[\"member_birth_year\"] <= 2001) & (df[\"member_birth_year\"] > 1992), \"member_age_group\"] = \"18-26\"\ndf.loc[(df[\"member_birth_year\"] <= 1992) & (df[\"member_birth_year\"] > 1979), \"member_age_group\"] = \"27-39\"\ndf.loc[(df[\"member_birth_year\"] <= 1979) & (df[\"member_birth_year\"] > 1962), \"member_age_group\"] = \"40-57\"\ndf.loc[(df[\"member_birth_year\"] <= 1962), \"member_age_group\"] = \"older than 57\"","e5d3890c":"plt.figure(figsize = [15, 7])\nplt.suptitle('Trip Duration (Minutes) Vs Biker Age',fontsize=16);\n\nplt.subplot(1, 3, 1)\ngraph1 = sns.violinplot(data = df.query(\"duration_min <= 60\"), x = 'member_age_group', y = 'duration_min',order=[\"18-26\", \"27-39\",\"40-57\",\"older than 57\"])\ngraph1.set_xlabel('Biker Age')\ngraph1.set_ylabel('Trip Duration (Minutes)')\nplt.subplot(1, 3, 2)\ngraph2 = sns.violinplot(data = df.query(\"duration_min > 60 and duration_min <= 200\"), x = 'member_age_group', y = 'duration_min',order=[\"18-26\", \"27-39\",\"40-57\",\"older than 57\"])\ngraph2.set_xlabel('Biker Age')\ngraph2.set_ylabel('Trip Duration (Minutes)')\nplt.subplot(1, 3, 3)\ngraph3 = sns.violinplot(data = df.query(\"duration_min > 200\"), x = 'member_age_group', y = 'duration_min',order=[\"18-26\", \"27-39\",\"40-57\",\"older than 57\"])\ngraph3.set_xlabel('Biker Age')\ngraph3.set_ylabel('Trip Duration (Minutes)')\nplt.tight_layout()\nplt.show()","72d64093":"plt.figure(figsize = [12, 7])\nplt.subplot(1, 2, 1)\nplt.suptitle('Subscribers vs Customers',fontsize=16);\ngraph = sns.countplot(data = df, x = \"user_type\",order = df.user_type.value_counts().index);\ngraph.set_xlabel('User Types')\ngraph.set_ylabel('Number of Trips')\n\nuser_types_trips= df.groupby('user_type')[[\"user_type\"]].count().rename(columns={\"user_type\":\"user_type_count\"})\nuser_types_trips[\"user_type_prop\"] = user_types_trips[\"user_type_count\"] \/ user_types_trips[\"user_type_count\"].sum()\nuser_types_trips.sort_values(by=\"user_type_prop\",inplace=True,ascending=False)\n\nplt.subplot(1, 2, 2)\nplt.pie(user_types_trips.user_type_prop.tolist(), explode = (0,0),labels = user_types_trips.index.tolist(), autopct='%1.1f%%', startangle=90, textprops={'color':'white',\"fontsize\":16})\nplt.show()","fc35693a":"user_types_per_gender_trips= df.groupby(['user_type', 'member_gender'])[[\"user_type\"]].count().rename(columns={\"user_type\":\"user_type_count\"})\nuser_types_per_gender_trips[\"user_type_prop\"] = user_types_per_gender_trips[[\"user_type_count\"]] \/ user_types_per_gender_trips.groupby(\"user_type\").sum()","e635b540":"user_types_per_gender_trips.unstack().user_type_prop.plot.bar(stacked=True,figsize = (15, 7))\nplt.suptitle('User Type VS Gender',fontsize=16);\nplt.legend(loc=\"upper right\")\nplt.show()","0c432401":"df_month_year = df.copy()\ndf_month_year[\"start_month\"] = df.start_time.dt.month\ndf_month_year[\"start_year\"] = df.start_time.dt.year\ndf_month_year_grouped = df_month_year.groupby(['start_year','start_month'])[['start_year']].count()\ndf_month_year_grouped.plot.line(figsize=(20,10))\nplt.xticks(np.arange(len(df_month_year_grouped.index)), df_month_year_grouped.index.tolist(),rotation=90)\nplt.legend().remove()\nplt.suptitle('Number of Trips per Month - Between June 2017 and October 2019',fontsize=16);\nplt.xlabel('(Year, Month)')\nplt.ylabel('Number of Trips')\nplt.show()","25ba3042":"df_month_year_per_city = df_month_year.query('within_city_trip != \"OTHERS\"').groupby(['within_city_trip','start_year','start_month'])[['bike_id']].count().rename(columns={\"bike_id\":\"trips_count\"})\ndf_month_year_san_fransisco = df_month_year_per_city.query('within_city_trip == \"SAN FRANSISCO\"').groupby(['start_year','start_month'])[[\"trips_count\"]].sum()\ndf_month_year_san_jose = df_month_year_per_city.query('within_city_trip == \"SAN JOSE\"').groupby(['start_year','start_month'])[[\"trips_count\"]].sum()\ndf_month_year_oakland = df_month_year_per_city.query('within_city_trip == \"OAKLAND\"').groupby(['start_year','start_month'])[[\"trips_count\"]].sum()","88bd5b15":"ax = df_month_year_san_fransisco.plot.line(figsize=(20,10))\ndf_month_year_san_jose.plot.line(ax=ax,figsize=(20,10))\ndf_month_year_oakland.plot.line(ax=ax,figsize=(20,10))\nplt.legend([\"SAN FRANSISCO\",\"SAN JOSE\",\"OAKLAND\"])\nplt.xticks(np.arange(len(df_month_year_grouped.index)), df_month_year_grouped.index.tolist(),rotation=90)\nplt.suptitle('Number of Trips per Month per City - Between June 2017 and October 2019',fontsize=16);\nplt.xlabel('(Year, Month)')\nplt.ylabel('Number of Trips')\nplt.show()","f771e50c":"df_week_day = df.copy()\ndf_week_day[\"weekday\"] = df.start_time.dt.weekday\ndf_weekday_grouped = df_week_day.groupby(['weekday'])[['weekday']].count()\ndf_weekday_grouped.plot.bar(figsize=(10,5))\nplt.xticks(df_weekday_grouped.index,[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"])\nplt.suptitle('Number of Trips',fontsize=16);\nplt.legend().remove()\n","22ee2e83":"df_trip_per_hour = df.copy()\ndf_trip_per_hour[\"start_hour\"] = df_trip_per_hour.start_time.dt.hour\ndf_trip_per_hour_grouped = df_trip_per_hour.groupby(['start_hour'])[[\"duration_sec\",\"duration_min\"]].agg({\"duration_sec\":\"count\", \"duration_min\":\"mean\"}).reset_index()\npal = sns.color_palette(\"Greens_d\", 5)\ndf_trip_per_hour_grouped.describe()","5f37b518":"def duration_min_paletter_classifier(duration_min):\n    if(duration_min >10 and duration_min <= 13):\n        return pal[4]\n    elif(duration_min >13 and duration_min <= 15):\n        return pal[3]\n    elif(duration_min >15 and duration_min <= 17):\n        return pal[2]\n    elif(duration_min >17 and duration_min <= 20):\n        return pal[1]\n    else:\n        return pal[0]\ndf_trip_per_hour_grouped[\"duration_min_palette\"] = df_trip_per_hour_grouped.duration_min.swifter.apply(duration_min_paletter_classifier)","bf64695a":"import matplotlib.patches as mpatches\nlegend_patches = [None,None,None,None,None]\nlegend_text = [\"10-14 min\",\"14-18 min\",\"18-22 min\",\"22-26 min\",\"over 26 min\"]\nfor i in range(5):\n    legend_patches[i] = mpatches.Patch(color=pal[i], label=legend_text[4-i])","549ba733":"plt.figure(figsize = [12, 7])\ngraph = sns.barplot(data=df_trip_per_hour_grouped,x=\"start_hour\", y=\"duration_sec\",palette=df_trip_per_hour_grouped.duration_min_palette)\nplt.suptitle('Number of Trips',fontsize=16);\nplt.xlabel('Day Hour')\nplt.ylabel('Number of Trips')\nplt.legend(handles=legend_patches,title=\"Duration (min)\")\nplt.show()","4f1215bc":"df.query('within_city_trip == \"OTHERS\"').shape[0]","2eae924d":"trips_outside_city = df.query('within_city_trip == \"OTHERS\"').groupby([\"start_station_city\", \"end_station_city\"])[\"duration_sec\"].count().reset_index(name=\"trip_count\")","85c96dd4":"trips_outside_city[\"from_to\"] = \"( \" + trips_outside_city[\"start_station_city\"] +\",\"+ trips_outside_city[\"end_station_city\"]+\")\"\nfig, ax = plt.subplots()\nbarlist = ax.barh(y=\"from_to\",width=\"trip_count\", data=trips_outside_city.sort_values(by=\"trip_count\"))\nplt.suptitle('Number of Outside-City Trips',fontsize=16);\nplt.ylabel('(From City, To City)')\nplt.legend().remove()\nbarlist[-1].set_color('r')\nbarlist[-2].set_color('r')\nplt.show()","eeaa0807":"df_start_stations_per_city = df.groupby([\"within_city_trip\", \"start_station_name\", \"start_station_latitude\", \"start_station_longitude\"])[\"start_station_name\"].count().reset_index(name=\"trip_count\").sort_values(\"trip_count\")\ndf_top10_start_stations_per_city = df_start_stations_per_city.groupby([\"within_city_trip\"]).tail(10).set_index('start_station_name')\ndf_end_stations_per_city = df.groupby([\"within_city_trip\", \"end_station_name\",\"end_station_latitude\", \"end_station_longitude\"])[\"end_station_name\"].count().reset_index(name=\"trip_count\").sort_values(\"trip_count\")\ndf_top10_end_stations_per_city = df_end_stations_per_city.groupby([\"within_city_trip\"]).tail(10).set_index('end_station_name')","3bfd9e64":"main_map_edges = (-122.5,-121.8,37.2,37.9)\nsanfransisco_map_edges = (-122.4650,-122.3846,37.7470,37.8109)\nsanjose_map_edges = (-121.94,-121.86,37.3, 37.36)\noakland_map_edges = (-122.32,-122.23,37.78,37.88)\n\n\n\ndef plot_city_trips_map(df1_long, df1_lat, df1_size, df1_color,\n                        df2_long, df2_lat, df2_size, df2_color,\n                        city_image, city_edges):\n    map_image = plt.imread(city_image)\n    fig, ax = plt.subplots(figsize = (15,10))\n    ax.scatter(df1_long,df1_lat, zorder=1, alpha= 0.8, c=df1_color, s=df1_size)\n    ax.scatter(df2_long,df2_lat, zorder=2, alpha= 0.8, c=df2_color, s=df2_size)\n    ax.set_xlim(city_edges[0],city_edges[1])\n    ax.set_ylim(city_edges[2],city_edges[3])\n    ax.imshow(map_image, zorder=0, extent = city_edges, aspect= 'equal')\ndef plot_city_trips_map_extend(df1_long, df1_lat, df1_size, df1_color,\n                        df2_long, df2_lat, df2_size, df2_color,\n                        city_image, city_edges,title_map):\n    map_image = plt.imread(city_image)\n    ax = plt.subplot(1, 1, 1,title=title_map)\n    ax.scatter(df1_long,df1_lat, zorder=1, alpha= 0.8, c=df1_color, s=df1_size)\n    ax.scatter(df2_long,df2_lat, zorder=2, alpha= 0.8, c=df2_color, s=df2_size)\n    ax.set_xlim(city_edges[0],city_edges[1])\n    ax.set_ylim(city_edges[2],city_edges[3])\n    ax.legend([\"Start Station\", \"End Station\"])\n    ax.imshow(map_image, zorder=0, extent = city_edges, aspect= 'equal')","500ee2d2":"df_top10_sanfransisco_start_stations = df_top10_start_stations_per_city.query('within_city_trip == \"SAN FRANSISCO\"')\ndf_top10_sanfransisco_end_stations = df_top10_end_stations_per_city.query('within_city_trip == \"SAN FRANSISCO\"')\n\ndf_top10_sanfransisco_start_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.suptitle('Top 10 Stations in San Fransisco',fontsize=16);\nplt.ylabel('Start Stations')\nplt.legend().remove()\ndf_top10_sanfransisco_end_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.ylabel('End Stations')\nplt.legend().remove()","10119988":"sanfransisco_trips_start_stations = df_start_stations_per_city.query('within_city_trip == \"SAN FRANSISCO\"')\nplot_city_trips_map(sanfransisco_trips_start_stations.start_station_longitude,\n                    sanfransisco_trips_start_stations.start_station_latitude,\n                   sanfransisco_trips_start_stations.trip_count\/300,\n                   'b',\n                    df_top10_sanfransisco_start_stations.start_station_longitude,\n                    df_top10_sanfransisco_start_stations.start_station_latitude,\n                   df_top10_sanfransisco_start_stations.trip_count\/300,\n                   'r',\n                    \"..\/input\/map-images\/sanfransisco.png\",sanfransisco_map_edges)\nsanfransisco_trips_end_stations = df_end_stations_per_city.query('within_city_trip == \"SAN FRANSISCO\"')\nplot_city_trips_map(sanfransisco_trips_end_stations.end_station_longitude,\n                    sanfransisco_trips_end_stations.end_station_latitude,\n                   sanfransisco_trips_end_stations.trip_count\/300,\n                   'b',\n                    df_top10_sanfransisco_end_stations.end_station_longitude,\n                    df_top10_sanfransisco_end_stations.end_station_latitude,\n                   df_top10_sanfransisco_end_stations.trip_count\/300,\n                   'r',\n                    \"..\/input\/map-images\/sanfransisco.png\",sanfransisco_map_edges)\n","1e2a505d":"fig, ax = plt.subplots(figsize = (15,10))\nplot_city_trips_map_extend(df_top10_sanfransisco_start_stations.start_station_longitude,\n                    df_top10_sanfransisco_start_stations.start_station_latitude,\n                   400,\n                   'b',\n                    df_top10_sanfransisco_end_stations.end_station_longitude,\n                    df_top10_sanfransisco_end_stations.end_station_latitude,\n                   100,\n                   'g',\n                    \"..\/input\/map-images\/sanfransisco.png\",sanfransisco_map_edges,\"Top 10 Stations in San Fransisco\")","8f9cf9d4":"df_top10_oakland_start_stations = df_top10_start_stations_per_city.query('within_city_trip == \"OAKLAND\"')\ndf_top10_oakland_end_stations = df_top10_end_stations_per_city.query('within_city_trip == \"OAKLAND\"')\ndf_top10_oakland_start_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.suptitle('Top 10 Stations in Oakland',fontsize=16);\nplt.ylabel('Start Stations')\nplt.legend().remove()\ndf_top10_oakland_end_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.ylabel('End Stations')\nplt.legend().remove()","9df9586f":"oakland_trips_start_stations = df_start_stations_per_city.query('within_city_trip == \"OAKLAND\"')\nplot_city_trips_map(oakland_trips_start_stations.start_station_longitude,\n                    oakland_trips_start_stations.start_station_latitude,\n                   oakland_trips_start_stations.trip_count\/200,\n                   'b',\n                    df_top10_oakland_start_stations.start_station_longitude,\n                    df_top10_oakland_start_stations.start_station_latitude,\n                   df_top10_oakland_start_stations.trip_count\/200,\n                   'r',\n                    \"..\/input\/map-images\/oakland.png\",oakland_map_edges)\noakland_trips_end_stations = df_end_stations_per_city.query('within_city_trip == \"OAKLAND\"')\nplot_city_trips_map(oakland_trips_end_stations.end_station_longitude,\n                    oakland_trips_end_stations.end_station_latitude,\n                   oakland_trips_end_stations.trip_count\/200,\n                   'b',\n                    df_top10_oakland_end_stations.end_station_longitude,\n                    df_top10_oakland_end_stations.end_station_latitude,\n                   df_top10_oakland_end_stations.trip_count\/200,\n                   'r',\n                    \"..\/input\/map-images\/oakland.png\",oakland_map_edges)","aead990b":"fig, ax = plt.subplots(figsize = (15,10))\nplot_city_trips_map_extend(df_top10_oakland_start_stations.start_station_longitude,\n                    df_top10_oakland_start_stations.start_station_latitude,\n                   400,\n                   'b',\n                    df_top10_oakland_end_stations.end_station_longitude,\n                    df_top10_oakland_end_stations.end_station_latitude,\n                   100,\n                   'g',\n                    \"..\/input\/map-images\/oakland.png\",oakland_map_edges,\"Top 10 Stations in Oakland\")\n","5103b05d":"df_top10_sanjose_start_stations = df_top10_start_stations_per_city.query('within_city_trip == \"SAN JOSE\"')\ndf_top10_sanjose_end_stations = df_top10_end_stations_per_city.query('within_city_trip == \"SAN JOSE\"')\ndf_top10_sanjose_start_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.suptitle('Top 10 Stations in San Jose',fontsize=16);\nplt.ylabel('Start Stations')\nplt.legend().remove()\ndf_top10_sanjose_end_stations[[\"trip_count\"]].plot.barh(figsize=(15,5))\nplt.ylabel('End Stations')\nplt.legend().remove()","dbaa9ba1":"sanjose_trips_start_stations = df_start_stations_per_city.query('within_city_trip == \"SAN JOSE\"')\nplot_city_trips_map(sanjose_trips_start_stations.start_station_longitude,\n                    sanjose_trips_start_stations.start_station_latitude,\n                   sanjose_trips_start_stations.trip_count\/100,\n                   'b',\n                    df_top10_sanjose_start_stations.start_station_longitude,\n                    df_top10_sanjose_start_stations.start_station_latitude,\n                   df_top10_sanjose_start_stations.trip_count\/100,\n                   'r',\n                    \"..\/input\/map-images\/sanjose.png\",sanjose_map_edges)\nsanjose_trips_end_stations = df_end_stations_per_city.query('within_city_trip == \"SAN JOSE\"')\nplot_city_trips_map(sanjose_trips_end_stations.end_station_longitude,\n                    sanjose_trips_end_stations.end_station_latitude,\n                   sanjose_trips_end_stations.trip_count\/100,\n                   'b',\n                    df_top10_sanjose_end_stations.end_station_longitude,\n                    df_top10_sanjose_end_stations.end_station_latitude,\n                   df_top10_sanjose_end_stations.trip_count\/100,\n                   'r',\n                    \"..\/input\/map-images\/sanjose.png\",sanjose_map_edges)","3e0c9ec7":"fig, ax = plt.subplots(figsize = (15,10))\nplot_city_trips_map_extend(df_top10_sanjose_start_stations.start_station_longitude,\n                    df_top10_sanjose_start_stations.start_station_latitude,\n                   400,\n                   'b',\n                    df_top10_sanjose_end_stations.end_station_longitude,\n                    df_top10_sanjose_end_stations.end_station_latitude,\n                   100,\n                   'g',\n                    \"..\/input\/map-images\/sanjose.png\",sanjose_map_edges,\"Top 10 Stations in San Jose\")","3dc74519":"from subprocess import call\ncall(['python', '-m', 'nbconvert', 'Project5-Data Visualization _ Exploration.ipynb'])","e077cb66":"Let us go deeper and check Number of bikes available in every city","b321667f":"Let us compare the increase of trips over the months per city","ea4f8166":"***Observations***\n```\nSan fransisco has most number of trips compared to Oakland and San Jose. San Fransisco has more than 3 Millions (around 75%) of trips during 2017 to 2019. Oakland has almost third amount of trips as San Fransisco, it is almost 1 Million (20.9%) trips during the same period. San Jose has the least number of trips, it only has less than 5% of the trips.\n```","2b0f1719":"***Observations***\n```\nOakland top 10 staions as trip starting point are mostly the same as trip ending point. But they are distributed a cross the city.\n```","c737714f":"***Observations***\n```\nFrom previous three graphs, It shows that number of stations and number of bikes could be a reason behind number of trips varies in every city. You can see that San fransisco has the most frequent rate of trips and that might be because of it has the most number of stations (around 50%) and the most number of bikes (around 56%). In the opposite San Jose has the least number of trips and that also might be because of San Jose has the lowest number of stations and bikes (19% and 27%).\n```","87f1e093":"the graph above was not very helpful, I will be zooming for the trips below 200 minutes","e0b38e1d":"<span id=\"exploration1\"><\/span>\n***Exploration 1:*** Which city has more trips? is there any reason for that?","5e0885e3":"I am going to explore the data on three intervals of trip durations:\n* first interval : below or equal to 60 minutes\n* second interval: between 60 and 200 minutes\n* third interval: more than 200 minutes","b72139cb":"***Observations***\n```\nAll bikers age groups have duration of trips to be less than 10 minutes. All age groups are some how equivelent for long duration trips. \n```","afc694b4":"<span id=\"exploration7\"><\/span>\n***Exploration 7:*** What are 10 top stations considered to be a starting point for trips? what about the ending point?","83949254":"Let us see if there is any relation between age and trip duration","e1400bd5":"***Observations***\n```\nActually that supports our finding previously, the trips usually happens on workday peek hours. The usage are either    between 7 and 9 o'clock in the morning, or between 4 and 6 o'clock in the afternoon. Also, you can clearly notice that on those hours the trip duration are the lowest, it is between 10 to 18 minutes. In the Other times trips duration increases between the peek hours between 10 AM and 3 PM to reach a duration of 22 to 26 minutes. the trips reaches more than 26 minutes in time between 1 to 4 AM.\n```","8ccc2b70":"#### Introduction:\n\nFord GoBike has shared puplic bikes rips in main 3 cities in Florida. the data is between the period of June 2017 to October 2019. The exploration will be applied on a data frame which went through wrangling process and it is ready to be explored. the data is more than 4 Million records of trip observations. A bike Trip is happenning between starting point and end point, each starting and ending point is a station. Each trip has starting time and ending time. each station has longitude and latitude represents the starting location and ending location on a map. each group of stations are located in a city, some trips can be outside the city. The trip has bike ID which represents the bike was used in the trip. Also the data contains some information about the user as gender, age. below you can find list of features of every observation.\n","4e362381":"Thank You <br\/>\nAnalysis Prepared By ***Nadeem Tabbaa*** <br\/>\nLinkedin: <a href=\"https:\/\/www.linkedin.com\/in\/msytnadeem\/\">@msytnadeem<\/a>","9d0793dd":"#### Conclusion:\n\n* Male riders represent 67% of the riders, where female riders covers only around 22% of overall trips.\n* Subscribed riders covers 83% of the trips.\n* San Fransisco has the most bike trips compared to San Jose and Oakland, it covers around 75% of the trips, and the might be because it has the most number of stations and bikes and that could be a reason.\n* San Fransisco has the highest number of increase in number of trips in compare to San Jose and Oakland.\n* Riders usually use the bikes as a transportaion to work, they use it on weekdays and on peek hours the most to avoid traffic.\n* The trips that occures outside the city, mostly happens between Oakland and San Fransisco as there is only a bridge between the two cities.","29004c42":"# Project 5 - (Data Visualization)\n## Ford GoBike\n### Phase 2: Data Exploration\n\n<a href=\"#Introduction:\">Introduction<\/a><br\/>\n<a href=\"#Importing-Data\">Importing Data<\/a><br\/>\n<a href=\"#Data-Exploration:\">Data Exploration<\/a><br\/>\n<a href=\"#Conclusion:\">Conclusion<\/a><br\/>\n<a href=\"#Recommendations:\">Recommendations<\/a><br\/>","5a1ef143":"***Observations***\n```\nSan Fransisco top 10 stations as trip starting point are the same for trip ending point. Most of the top stations located on Market Street.\n```","9ae0d936":"<span id=\"exploration2\"><\/span>\n***Exploration 2:*** Is there any relations between genders and trip duration? what about age groups and trip duration?","389d217c":"For a better representation i am going to view trips rate per each gender. ","da850988":"***Observations***\n```\nMore than 83% of the trips done by subscribed riders. and only around 16% who are casual customers. \n```","f160c787":"To achieve this I have to extract Hours from `start_time` feature.","bfa90703":"<table>\n    <tr>\n        <th>\n            Trip Starting Details\n        <\/th>\n        <th>\n            Trip Ending Details\n        <\/th>\n        <th>\n            Trip Member & Other Information\n        <\/th>\n    <\/tr>\n    <tr>\n        <td>start_time<\/td>\n        <td>end_time<\/td>\n        <td>duration_sec<\/td>\n    <\/tr>\n        <tr>\n        <td>start_station_city<\/td>\n        <td>end_station_city<\/td>\n        <td>bike_id<\/td>\n    <\/tr>\n        <tr>\n        <td>start_station_id<\/td>\n        <td>end_station_id<\/td>\n        <td>user_type<\/td>\n    <\/tr>\n        <tr>\n        <td>start_station_name<\/td>\n        <td>end_station_name<\/td>\n        <td>member_birth_year<\/td>\n    <\/tr>\n            <tr>\n        <td>start_station_latitude<\/td>\n        <td>end_station_latitude<\/td>\n        <td>member_age_group<\/td>\n    <\/tr>\n        <tr>\n        <td>start_station_longitude<\/td>\n        <td>end_station_longitude<\/td>\n        <td>member_gender<\/td>\n    <\/tr>\n    <tr>\n        <td>\n        <\/td>\n        <td>\n        <\/td>\n        <td>\n            bike_share_for_all_trip\n        <\/td>\n    <\/tr>\n<\/table>","647f2b8a":"I am going to explore number of trips per gender.","69bafabf":"***Observations***\n```\nOverall, Number of trips are getting increases every month. there is a drop in number of trips in November and December of 2018 abd again it happened May and June 2019. The maximum number of trips happened twice, in March and July 2019. \n```","9630d871":"***Observations***\n```\nNumber of outside trips its very low compared to within-city trips, during almost 3 years, only 272 trips occured. Most of these trips was between San Fransisco and Oakland.\n```","fa337acd":"<span id=\"exploration4\"><\/span>\n***Exploration 4:*** Is number of trips increasing monthly? Which cities has more increase in number of trips?","fbe31138":"By excluding trips that occured outside the city by filtering out feature `within_city_trip` that equals to `OTHERS`","96f6ebea":"<span id=\"exploration3\"><\/span>\n***Exploration 3:*** Who uses the bikes more Casual Customers or Subscribed Members?","1c920603":"<span id=\"exploration5\"><\/span>\n***Exploration 5:*** Which day of the week has more number of trips? which day hour has more number of trips?","c1b09a64":"***Observations***\n```\nWeekdays has more number of trips than weekends, as it drop around 40% on weekends. Usually this means subscribers are using the bike as a transportation to work.\n```","09211fe5":"Importing date from `all_tripdata_cleaned.csv`and setup some type converstions for features.","0da35c43":"#### Recommendations:\n* I recommend the service provider to provide special offers for Female riders.\n* Increase in number of bikes and stations in San Jose. as it shows no satisfing increase during the 3 years.\n* Provide huge discounts during late night hours between 1 AM and 4 AM as mostly the bikes are idle during these hours\n* Support the outside trips between Oakland and San Fransisco by starting a competitions.","cc8c46d9":"#### Importing Data","dcabbd82":"Confirm features data types and breif descriptions of it.","a34e2171":"#### Data Exploration:\n\nIn my exploration, I am trying to find answers to the following questions:\n\n* <a href=\"#exploration1\" style=\"color:black\">Which city has more trips? is there any reason for that?<\/a>\n* <a href=\"#exploration2\" style=\"color:black\">Is there any relations between age groups and trip duration? what about genders and trip duration?<\/a>\n* <a href=\"#exploration3\" style=\"color:black\">Who uses the bikes more Casual Customers or Subscribed Members?<\/a>\n* <a href=\"#exploration4\" style=\"color:black\">Is number of trips increasing monthly? Which cities has more increase in number of trips?<\/a>\n* <a href=\"#exploration5\" style=\"color:black\">Which day of the week has more number of trips? which day hour has more number of trips?<\/a>\n* <a href=\"#exploration6\" style=\"color:black\">Do bikers usually use the bikes within the city? or outside the city?<\/a>\n* <a href=\"#exploration7\" style=\"color:black\">What are 10 top stations considered to be a starting point for trips? what about the ending point?<\/a>","168b06c2":"To support our finding above, let us view at what hours the trips happens.","f1834474":"***Observations***\n```\nClearly, Gender is not affecting the trip duration. most of the trips are usually below the 10 minutes regardless of the gender type\n```","bde1939b":"***Observations***\n```\nTop 10 Stations in San Jose for trip starting point are exactly the ones for the trip ending point. Also they are distributed a cross the city.\n```","f9ccd898":"To achieve this, I would like to introduce a new features called `within_city_trip`, this feature will hold the city name in case the start and end stations cities are the same. Otherwise, it will hold a value of `OTHERS` which means that starting city of the trip is not the same city where it ended. ","c6a1d519":"INTRESTING !!, there might be some relation between age and duration. as the younger the biker the more chance to have longer trips","6df6f32e":"***Observations***\n```\nWe can observe that around 70% of the subscribers are male, and Females only represent around 22%. For casual customers, they usually dont reveal their gender with a percentage close to 45%. Men also represent more propotion than female customers. \n```","f8241967":"***Observations***\n```\nWe can clearly see that San Fransisco has the most increase in number of trip, where San Jose almost no change during the months. there is a slight increase for oakland. Also, we can observe the drop down in number of trips between October and December 2018 , and April to June in 2019. San Fransisco possesses the higher percentage in this drop follows it by Oakland. It is good if we can find a reason for that.\n```","97db9c93":"To achieve this, I have to create a new feature which represents the day of the week","0a93b4c2":"To achieve this, i had to add new two features (`start_month` and `start_year`)  extraxted from `start_time`.","7ee00685":"Now I am going check if there are any relation between gender and trip duration, as i have the duration in seconds, i will make a new feature taht holds duration in minutes","75e30554":"***Observations***\n```\nMost of bike riders are males they represent around 67% of the riders. Females are only 22% of the ride bikers. and around 11% are unknown.\n```","121d00fe":"Let us go further and check number of unique stations in every city.","eb641355":"to better understand the above findings, let us see what genders are more subscribed to our services and who from them are usually a casual customer. ","f526f62b":"<span id=\"exploration6\"><\/span>\n***Exploration 6:*** Do bikers usually use the bikes within the city? or outside the city?"}}