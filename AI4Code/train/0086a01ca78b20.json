{"cell_type":{"e1fa938e":"code","851ced95":"code","0f234037":"code","f3830e18":"code","fb3e92af":"code","b99baa11":"code","117cb7ac":"code","3f4cf6a9":"code","78050519":"code","035b0374":"code","8a1b8bdc":"code","9fe0155e":"code","661f7c67":"code","c9d1784b":"code","9bf277f8":"markdown","8f4b3fc5":"markdown","3574e56f":"markdown","3b7baf82":"markdown"},"source":{"e1fa938e":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport seaborn as sns\n\nimport datetime as datetime\nimport matplotlib.dates as dates\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\nfrom contextlib import contextmanager\nfrom time import time\nfrom tqdm import tqdm\nimport lightgbm as lgbm\n\nfrom sklearn.metrics import classification_report, log_loss, accuracy_score\nfrom sklearn.metrics import mean_squared_error\nfrom sklearn.model_selection import KFold","851ced95":"data = pd.read_csv(\"..\/input\/stocknews\/upload_DJIA_table.csv\")\ndata","0f234037":"data['Date']=pd.to_datetime(data['Date'])\ndata=data.sort_values('Date').reset_index(drop=True)\ndata","f3830e18":"data0=data[['Date','Open']]\ndata0['Open 7-day']=data0['Open'].rolling(window=7).mean()","fb3e92af":"fig=make_subplots(specs=[[{\"secondary_y\":False}]])\nfig.add_trace(go.Scatter(x=data0['Date'],y=data0['Open 7-day'],name='Open mean 7-day'),secondary_y=False,)\nfig.update_layout(autosize=False,width=700,height=500,title_text=\"DJIA Stocks Open mean 7-day\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Price\",secondary_y=False)\nfig.show()","b99baa11":"col0=data0.columns.to_list()\ncol1=col0+['O7d 7d-before','slope']\ndata1=pd.DataFrame(columns=col1)\ndata1[col0]=data0\ndata1","117cb7ac":"n=len(data0)\nfor  i in range(n):    \n    pmi=data1['Open 7-day'][i]\n    data1.loc[i+7,'O7d 7d-before']=pmi\ndata1","3f4cf6a9":"data1['slope']=(data1['Open 7-day']-data1['O7d 7d-before'])\/7\ndata2=data1[['Date','Open 7-day','O7d 7d-before','slope']]\ndata3=data2[14:-7]\n\ndata3","78050519":"fig=make_subplots(specs=[[{\"secondary_y\":True}]])\nfig.add_trace(go.Scatter(x=data3['Date'],y=data3['slope'],name='slope'),secondary_y=False,)\nfig.update_layout(autosize=False,width=700,height=500,title_text=\"DJIA Stocks Slope change\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Slope\",secondary_y=False)\nfig.update_yaxes(title_text=\"Slope change\",secondary_y=True)\nfig.show()","035b0374":"news=pd.read_csv('..\/input\/stocknews\/RedditNews.csv')\nnews['Date']=pd.to_datetime(news['Date'])\nnews=news.sort_values('Date').reset_index(drop=True)\nnews","8a1b8bdc":"data3[data3['slope']<-120]","9fe0155e":"news1=news[news['Date']=='2008-10-08']['News'].tolist()\nfor i in range(len(news1)):\n    print(news1[i][1:])\n    print()","661f7c67":"news1=news[news['Date']=='2008-10-09']['News'].tolist()\nfor i in range(len(news1)):\n    print(news1[i][1:])\n    print()","c9d1784b":"news1=news[news['Date']=='2008-10-10']['News'].tolist()\nfor i in range(len(news1)):\n    print(news1[i][1:])\n    print()","9bf277f8":"* 2008-10-10 -- 2008-10-21\n * https:\/\/en.wikipedia.org\/wiki\/Global_financial_crisis_in_October_2008\n* 2011-08-09 -- 2011-08-31\n * https:\/\/en.wikipedia.org\/wiki\/August_2011_stock_markets_fall\n* 2015-08-27 -- 2015-09-02\n * https:\/\/en.wikipedia.org\/wiki\/2015%E2%80%932016_stock_market_selloff\n* 2016-01-14 -- 2016-01-20\n * https:\/\/en.wikipedia.org\/wiki\/2015%E2%80%932016_stock_market_selloff","8f4b3fc5":"# News data","3574e56f":"# News on Stock Clash in '2008-10'\n* 'World economic crisis deepens: Nikkei sinks 9%, Russian exchange was shut down after a huge decline at the open, U.K. bailing out banks' '2008-10-08'\n* 'Congressional leaders Harry Reid and Nancy Pelosi urged President Bush Thursday to call an emergency meeting with the G8 to address international financial instability.' '2008-10-10'\n* 'Iceland has gone bankrupt. They are likely going to ask the International Monetary Fund for help and ditch the krona.' '2008-10-10'","3b7baf82":"## Days of Stock Clash"}}