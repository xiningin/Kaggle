{"cell_type":{"78bb17b8":"code","6dc1a55d":"code","75441998":"code","cf37c224":"code","320770ff":"code","87ff8877":"code","019737ab":"code","6f4e03f1":"code","0854de54":"code","dc3e692f":"code","c6a76dd3":"code","b4e39511":"code","aaae7a5a":"code","86cabedd":"code","41522c85":"code","b35bf345":"code","2a3b9dbe":"code","7849cde7":"code","8e6d843e":"code","f25b617f":"code","4908d851":"code","d71f7ebb":"code","301ddea5":"code","3b5955db":"code","3a9e2a33":"code","e6dddc76":"code","d5bee9bc":"code","3baeffec":"code","84190b27":"code","29868c4e":"code","96f6a09a":"code","b2196442":"code","9fdd2776":"code","acaba759":"code","d28ccadc":"code","9a23294d":"code","d2377cf7":"code","bcbe30ed":"code","6f199630":"code","101ba913":"code","faced210":"code","0f226eae":"code","6f6348e9":"code","2ce5efc5":"code","3bfcee92":"code","5b33e65f":"code","479daa6b":"code","246b1032":"code","a6bdf0d0":"code","1e6c5b28":"code","266d45ee":"code","dd0c3a35":"code","1197246d":"code","6b776e5a":"code","c9956f57":"code","4513ed73":"code","8a0e94a9":"code","92672b8d":"code","545e711e":"code","80a37d8e":"code","e3ea885b":"code","4b5f5294":"code","cbc60373":"code","9ce8e634":"code","de184699":"code","ef9cd141":"code","e6638ad8":"code","e505b473":"code","6ccc2bda":"code","c479ae6e":"code","51632a88":"code","ebc20a05":"code","b294a5a2":"code","9f1d9c78":"code","9f415957":"code","923532af":"code","53280ca2":"code","68fe4d2e":"markdown","a22ca150":"markdown","1affaeff":"markdown","9d8104d9":"markdown","1652cd05":"markdown","cae38f9e":"markdown","0750624f":"markdown","666f3aff":"markdown","0e39c8b0":"markdown","f1c497b3":"markdown","fe5cdace":"markdown","b3043aff":"markdown","805b1d91":"markdown","1f160379":"markdown","e7cbb08c":"markdown","19f7b1b2":"markdown","d709194c":"markdown","84065f9f":"markdown","7022f139":"markdown","4378483c":"markdown","7e8027b7":"markdown","797d73a3":"markdown","1e294960":"markdown","259eb461":"markdown","7cda5dd6":"markdown","5e6aef06":"markdown","d763ceb6":"markdown","922bc8a5":"markdown","4a0c26ac":"markdown","ca11363d":"markdown","a01892c7":"markdown","ac2b9b4b":"markdown","179307a5":"markdown","d12f698a":"markdown"},"source":{"78bb17b8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns  # visualization tool\nfrom matplotlib.patches import Polygon\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","6dc1a55d":"df = pd.read_csv('..\/input\/amazon-top-50-bestselling-books-2009-2019\/bestsellers with categories.csv')","75441998":"df.head() #summary of the first 5 rows in the dataset.","cf37c224":"df.info() # info gives data type like dataframe, number of sample or row, number of feature or column, feature types and memory usage","320770ff":"df.columns #There are 7 columns in the dataset.","87ff8877":"df.describe() #statistical summary of the dataset.","019737ab":"df.describe(include='object')","6f4e03f1":"df.columns =['Name', 'Author', 'User_Rating', 'Reviews', 'Price', 'Year', 'Genre']\ndf.columns","0854de54":"df.corr()","dc3e692f":"sns.heatmap(df.corr(), annot=True, linewidths=.5, fmt= '.3f')\nplt.show()","c6a76dd3":"df.Reviews.plot(kind = 'line', grid = True, label = 'Price',linewidth=1,alpha = 0.7 )\nplt.legend(loc = 'best')\nplt.ylabel('Price')\nplt.title('Line Plot') \nplt.show()","b4e39511":"df.plot(kind='scatter', x='Reviews', y='Price',alpha = 0.5,color = 'red')\nplt.xlabel('Reviews')            \nplt.ylabel('Price')\nplt.title('Reviews - Price Scatter Plot') ","aaae7a5a":"df.plot(kind='scatter', x='User_Rating', y='Price',alpha = 0.5,color = 'red')\nplt.xlabel('User_Rating')            \nplt.ylabel('Price')\nplt.title('User_Rating - Price Scatter Plot') ","86cabedd":"df.plot(kind='scatter', x='Reviews', y='User_Rating',alpha = 0.5,color = 'red')\nplt.xlabel('Reviews')            \nplt.ylabel('User_Rating')\nplt.title('Reviews - User_Rating Plot') ","41522c85":"df.Price.plot(kind = 'hist',bins = 50,figsize = (10,10))\nplt.show()","b35bf345":"fiction = df[df.Genre == 'Fiction']\nnon_fiction = df[df.Genre == 'Non Fiction']","2a3b9dbe":"fiction.User_Rating.plot(kind = 'hist', bins = 25,color = 'red', figsize=(8,8), label = 'Ficton')\nnon_fiction.User_Rating.plot(kind = 'hist', bins = 25,color = 'blue', figsize=(8,8), label = 'Non Ficton')\nplt.xlabel('User Rating')\nplt.legend(loc='upper left')\nplt.title('User Rating of Fiction Vs Non Fiction')","7849cde7":"df.hist(column='Reviews', by='Genre', bins=25, grid=False, figsize=(8,8), layout=(3,1), sharex=True, color='#86bf93', zorder=2, rwidth=0.9)\n","8e6d843e":"sns.catplot(x = \"Genre\", y= \"Price\",hue=\"Year\", kind=\"bar\", data=df)","f25b617f":"x = df['Price']> 50 # There are only 6 books which have higher price value than 50\ndf [x]","4908d851":"# 2 - Filtering pandas with logical_and\n# There are only 4 books which have higher Price value than 50 and higher Reviews value than 5000\ndf[np.logical_and(df['Price']>50, df['Reviews']>5000 )]","d71f7ebb":"# For pandas we can achieve index and value\nfor index,value in df[['Author']][0:3].iterrows():\n    print(index,\" : \",value)","301ddea5":"for index,value in df[['Price']][0:3].iterrows():\n    print(index,\" : \",value)","3b5955db":"# lets classify books whether they have high or low price. Our threshold is average speed.\nthreshold = sum(df.Price)\/len(df.Price)\nprint(\"threshold\",threshold)\ndf[\"Price_level\"] = [\"high\" if i > threshold else \"low\" for i in df.Price]\ndf.loc[:15,[\"Price_level\",\"Price\"]] ","3a9e2a33":"# tail shows last 5 rows\ndf.tail()","e6dddc76":"df.head()  # head shows first 5 rows","d5bee9bc":"# shape gives number of rows and columns in a tuble\ndf.shape","3baeffec":"#Frequency of Genre types\n#There are 310 Non fiction books and 240 Fiction in the genre column.\nprint(df.Genre.value_counts(dropna = False))","84190b27":"#Frequency of Price Level types\n# We can see the number of the low and high values in the price value.\nprint(df.Price_level.value_counts(dropna =False ))","29868c4e":"#Frequency of Year types\n#We can observe that number of years in the year column.\nprint(df.Year.value_counts(dropna = False))","96f6a09a":"#Frequency of Author\n#As it can be seen below there are 12 Jeff Kinney Author or 11 Rick Riordan Author.\nprint(df.Author.value_counts(dropna = False))","b2196442":"#We can see that number of User Rating in the User Rating column.\nprint(df.User_Rating.value_counts(dropna = False))","9fdd2776":"df.boxplot(column='Price',by = 'Genre')\n\nplt.show()","acaba759":"fig,axs = plt.subplots(1,2, figsize = (12,6))\nfig.suptitle('Reviews grouped by genre and price threshold')\n\ndf.boxplot(column = 'Reviews', by = 'Genre', ax = axs[0])\n\ndf.boxplot(column = 'Reviews', by = 'Price_level', ax = axs[1])\n\n\nplt.show()","d28ccadc":"# Firstly I create new data from amazon top 50 bestselling data to explain melt nore easily.\ndf_new = df.head()    # I only take 5 rows into new data\ndf_new","9a23294d":"# lets melt\n# id_vars = what we do not wish to melt\n# value_vars = what we want to melt\nmelted = pd.melt(frame=df_new,id_vars = 'Name', value_vars= ['Price','Genre'])\nmelted","d2377cf7":"melted = pd.melt(frame=df_new,id_vars = 'Name', value_vars= ['Reviews','Year'])\nmelted","bcbe30ed":"# I want to make that columns are variable\n# Finally values in columns are value\nmelted.pivot(index = 'Name', columns = 'variable',values='value')","6f199630":"# Firstly lets create 2 data frame\ndata1 = df.head()\ndata2= df.tail()\nconc_data_row = pd.concat([data1,data2],axis =0,ignore_index =True) # axis = 0 : adds dataframes in row\nconc_data_row","101ba913":"data1 = df['Reviews'].head()\ndata2= df['Genre'].head()\nconc_data_col = pd.concat([data1,data2],axis =1) # axis = 1 : adds dataframes in column\nconc_data_col","faced210":"df.dtypes","0f226eae":"# lets convert object(str) to categorical and int to float.\ndf['Author'] = df['Author'].astype('category')\ndf['Price'] = df['Price'].astype('float')","6f6348e9":"# As you can see Author is converted from object to categorical\n# And Price is converted from int to float\ndf.dtypes","2ce5efc5":"# Lets look at does amazon top 50 bestselling books data have nan value\n#There aren't any null object and it is not necessary fill of the null object.\ndf.info()","3bfcee92":"# Plotting all data \ndata1 = df.loc[:,[\"Price\",\"Reviews\",\"User_Rating\"]]\ndata1.plot()\n# it is confusing","5b33e65f":"# subplots\ndata1.plot(subplots = True)\nplt.show()","479daa6b":"# scatter plot  \ndf.plot(kind = \"scatter\",x=\"Price\",y = \"Reviews\")\nplt.show()","246b1032":"# hist plot  \ndf.plot(kind = \"hist\",y = \"Price\",bins = 25,range= (0,50), density=True)","a6bdf0d0":"#Cumulative\ndf.plot(kind = 'hist', y = \"Price\", bins =25, range= (0,50), density = True, cumulative = True)","1e6c5b28":"df.describe()","266d45ee":"dt_object = pd.to_datetime(df.Year,format='%Y')\ndf2 =df\ndf2['date'] = dt_object\ndf2 = df2.set_index(\"date\")\ndf2","dd0c3a35":"df.Year.sort_values()","1197246d":"df2.resample(\"A\").mean() # A is the year","6b776e5a":"df2.resample(\"A\").sum()","c9956f57":"# Lets resample with month\ndf2.resample(\"M\").mean()\n# As you can see there are a lot of nan because df2 does not include all months","4513ed73":"df.head()","8a0e94a9":"df[\"Price\"][1] # indexing using square brackets","92672b8d":"# Selecting only some columns\ndf[[\"Price\",\"Genre\",\"Reviews\"]]","545e711e":"# Difference between selecting columns: series and dataframes\nprint(type(df[\"Price\"]))     # series\nprint(type(df[[\"Price\"]]))   # data frames","80a37d8e":"# Slicing and indexing series\ndf.loc[1:10,\"Author\":\"User_Rating\"]   # 10 and \"User_Rating\" are inclusive","e3ea885b":"df.loc[1:10,\"Author\":\"Price\"]","4b5f5294":"# Reverse slicing \ndf.loc[5:1:-1,\"Author\":\"Reviews\"] ","cbc60373":"#From something to end\ndf.loc[1:10,\"Author\":] ","9ce8e634":"# Creating boolean series\nboolean = df.Price > 55\ndf[boolean]","de184699":"# Combining filters\nfirst_filter = df.Price > 30\nsecond_filter = df.Reviews > 10000\ndf[first_filter & second_filter]","ef9cd141":"# Filtering column based others\ndf.Year[df.User_Rating<4]","e6638ad8":"# Plain python functions\ndef div(n):\n    return n\/2\ndf.Price.apply(div)","e505b473":"# Defining column using other columns\ndf[\"total_power\"] = df.Price + df.User_Rating\ndf.head()","6ccc2bda":"# our index name is this:\nprint(df.index.name)\n# lets change it\ndf.index.name = \"index_name\"\ndf.head()","c479ae6e":"# Overwrite index\n# if we want to modify index we need to change all of them.\ndf.head()\n# first copy of our data to data3 then change index \ndata3 = df.copy()\n# lets make index start from 100. It is not remarkable change but it is just example\ndf.index = range(100,650,1)\ndf.head()","51632a88":"df.set_index([\"Author\",\"Name\"]) # we can see who has written how many books","ebc20a05":"df4 = df.set_index([\"Name\",\"Year\"])\ndf4","b294a5a2":"# change inner and outer level index position\ndf5 = df4.swaplevel(0,1)\ndf5","9f1d9c78":"# according to Year take means of other features\ndf.groupby(\"Year\").mean()   # mean is aggregation \/ reduction method\n# there are other methods like sum, std,max or min","9f415957":"# we can only choose one of the feature\ndf.groupby(\"Year\").Price.max() ","923532af":"# Or we can choose multiple features\ndf.groupby(\"Year\")[[\"Price\",\"Reviews\"]].min() ","53280ca2":"df.info()","68fe4d2e":"# PANDAS FOUNDATION","a22ca150":"# FILTERING DATA FRAMES","1affaeff":"* This graph separated according to the genre variable.\n* In this graph, we can observe that reviews freguency on the genre variable.\n* We can say that, there are fiction books that have 80.000 reviews according to the Non fiction books.","9d8104d9":"# Scatter Plot","1652cd05":"* When we examine the 3 scatter plots below, we do not see a strong correlation.","cae38f9e":"# Indexing pandas time series","0750624f":"# CLEANING DATA","666f3aff":"# TIDY DATA","0e39c8b0":"* According to the summary of the dataset, we can say that there are 550 bestselling books in te dataset and average rate of the user rate is 4.7. When we see the table, also we can say that the data set covers 11 years, including 2009 and 2019. The most expensive book is 105 dollar. Also the most reviewed book has been reviewed 87841 times.","f1c497b3":"# PIVOTING DATA","fe5cdace":"# VISUAL EXPLORATORY DATA ANALYSIS","b3043aff":"# LIST COMPREHENS\u0130ON","805b1d91":"# HIERARCHICAL INDEXING","1f160379":"# EXPLORATORY DATA ANALYSIS","e7cbb08c":"* A special case for the bar plot is when you want to show the number of observations in each category rather than computing a statistic for a second variable. This is similar to a histogram over a categorical, rather than quantitative, variable. \n* For example, in this table, we can observe that, in 2010, Non fiction books more expensive than Fiction books.","19f7b1b2":"# **Correlation Map**","d709194c":"* We can observe that there are 351 unique books names and the book titled \"Publication Manual of the American Psychological Association, 6th Edition\" is at the top level, repeating 10 times on the list. \n* There are 248 unique author names in the datasets and the most repeated author is Jeff Kinney. \n* Also we can say that there 2 different types of genre and Non Fiction was repeated 310 times and became the most repeated genre.\n","84065f9f":"# Line Plot","7022f139":"# DATA TYPES","4378483c":"# INDEXING DATA FRAMES","7e8027b7":"# Cat Plot","797d73a3":"* In this graph, we can see the distribution of user rates on the genre.\n* For example, books with 4.8 user rates are mostly distributed on fiction types.","1e294960":"# CONCATENATING DATA","259eb461":"# SLICING DATA FRAME","7cda5dd6":"There is no clear correlation and there is a weak correlation between the variables.","5e6aef06":"# Histogram","d763ceb6":"* The books mostly changed from 0 to  20 dollars, and the number of books over 100 dollars was very few.","922bc8a5":"# Pandas","4a0c26ac":"# TRANSFORMING DATA","ca11363d":"* For example: compare Price of books by genre\n* Black line at top is max\n* Blue line at top is 75%\n* Green line is median (50%)\n* Blue line at bottom is 25%\n* Black line at bottom is min\n* There are outliers","a01892c7":"# STACKING and UNSTACKING DATAFRAME","ac2b9b4b":"# Resampling pandas time series","179307a5":"# MISSING DATA and TESTING WITH ASSERT","d12f698a":"STATISTICAL EXPLORATORY DATA ANALYSIS"}}