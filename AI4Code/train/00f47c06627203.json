{"cell_type":{"6dd289f2":"code","b1ea0b20":"code","c6d563e6":"code","b95b6d27":"code","f39030a0":"code","c193014b":"code","b6021436":"code","db868087":"code","f1bbf16b":"code","d6f9c36e":"code","6610f4b9":"markdown","1794c225":"markdown","436f5f39":"markdown","c3465d42":"markdown"},"source":{"6dd289f2":"import sys\n!{sys.executable} -m pip install bar_chart_race","b1ea0b20":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","c6d563e6":"data = pd.read_csv('..\/input\/tree-cover-loss-20012020\/TreeCoverLoss_2001-2020_ByRegion.csv')\ndata","b95b6d27":"data.columns","f39030a0":"#data[\"date\"] = data[\"date\"].apply(pd.to_datetime, dayfirst=True)\ndata['Year']=data['Year'].apply(lambda x: str(x))\ndata2=data[['Year','CountryCode','TreeCoverLoss_ha','GrossEmissions_Co2_all_gases_Mg']].copy()\ndata2","c193014b":"# set double indexes\ndata2.set_index(['Year','CountryCode'])","b6021436":"# unstack!!!\ndata3=data2.set_index(['Year','CountryCode']).unstack()['TreeCoverLoss_ha']\ndata3","db868087":"data4 = data3.fillna(0)\ndata4","f1bbf16b":"df = data4\nbcr.bar_chart_race(\n    df=df,\n    filename='TreeCoverLoss_BarChartRace.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=10,\n    fixed_order=False,\n    fixed_max=False,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.95,\n    period_label={'x': .99, 'y': .10, 'ha': 'right', 'va': 'center'},\n    #period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},\n    perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(5, 3),\n    dpi=500,\n    cmap='dark24',\n    title='Tree Cover Loss by Country',\n    title_size=10,\n    bar_label_size=7,\n    tick_label_size=5,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)","d6f9c36e":"Video(\"\/kaggle\/working\/TreeCoverLoss_BarChartRace.mp4\", width=800, height=600, embed=True)","6610f4b9":"# Dataframe for Bar Chart Race","1794c225":"# Bar Chart Race of Tree Cover Loss by Region\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/","436f5f39":"# Data preparation","c3465d42":"# Create Bar Chart Race\n"}}