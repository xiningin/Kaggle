{"cell_type":{"dbb2f7b9":"code","52d01dcc":"code","b908b2b7":"code","f9788e9f":"code","12500576":"code","b12f8be5":"code","0a1744f1":"code","fead2765":"code","a40cc2ef":"code","665dce6f":"code","e4808b00":"code","bc48836c":"code","9b14776b":"code","2640aa1e":"code","668ec559":"code","92015b95":"code","f69e6adc":"code","51d2b787":"code","0344d32f":"code","f9eb549d":"code","32cb803f":"code","38334933":"code","e5e6cc10":"code","6e2c3fb7":"code","fd223ff6":"code","934931bf":"code","f6b3280f":"markdown","87994286":"markdown","ab1cfecb":"markdown","2892fef2":"markdown","893f28c7":"markdown","9a26fd2d":"markdown","65ce24a5":"markdown","13eac9e1":"markdown","071914bd":"markdown","7bb725be":"markdown","0d4df0bb":"markdown","2910833f":"markdown","fea60d7e":"markdown","3f4c0789":"markdown","17b0202a":"markdown","3859ec38":"markdown","10b1e5c0":"markdown","0e0f5b19":"markdown","1502d127":"markdown","0e6ba0b8":"markdown","cf528f86":"markdown","15719376":"markdown","6f2e9fa5":"markdown"},"source":{"dbb2f7b9":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nimport csv\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport statistics","52d01dcc":"# defining directory paths\ntrain_dir = \"..\/input\/train.csv\"","b908b2b7":"df = pd.read_csv(train_dir)\n#checking for missing and na values\nprint(\"Total number of instance : \",len(df))\n\n# code for printing NaN columns.","f9788e9f":"#filling in missing values with -1\ndf[\"Cabin\"].unique()","12500576":"# Drop cabin and ticket column.\ndf.info()\ndf.head(3)","b12f8be5":"# checking class distribution\ndf[\"Survived\"].value_counts()\n# Use this to plot a bar chart.","0a1744f1":"## Plot the heatmap using the sns library\nplt.show()","fead2765":"df_survived = # Select only the survived people\ndf_notsurvived = # Select only the survived people\ngb_pclass_surv = # Group by Pclass survivors\ngb_pclass_notsurv = # Group by Pclass Non survivors\nfig = plt.figure(figsize = (10,4))\n\n## Add plots for both survivors and non survivors.","a40cc2ef":"# Replace passenger ID","665dce6f":"print(\"SibSp unqiue value counts :\\n\" + str(df[\"SibSp\"].value_counts()))\n\nfig = plt.figure(figsize = (15,5))\nf1 = fig.add_subplot(1, 3, 1)\nf1.set_ylim([0,700])\nf2 = fig.add_subplot(1,3,2)\nf2.set_ylim([0,700])\nf3 = fig.add_subplot(1,3, 3)\nf3.set_ylim([0,700])\ndf[\"SibSp\"].value_counts().plot(kind= \"bar\", title = \"(SibSp) Total\", ax = f1)\ndf_survived[\"SibSp\"].value_counts().plot(kind= \"bar\", title = \"(SibSp) Survived\", ax = f2)\ndf_notsurvived[\"SibSp\"].value_counts().plot(kind= \"bar\", title =  \"(SibSp) Not Survived\", ax = f3)\nplt.show()","e4808b00":"print(\"Parch unique value counts : \\n\" + str(df[\"Parch\"].value_counts()))\n\nfig = plt.figure(figsize = (15,5))\nf1 = fig.add_subplot(1, 3, 1)\nf1.set_ylim([0,700])\nf2 = fig.add_subplot(1,3,2)\nf2.set_ylim([0,700])\nf3 = fig.add_subplot(1,3, 3)\nf3.set_ylim([0,700])\ndf[\"Parch\"].value_counts().plot(kind= \"bar\", title = \"(Parch) Total\", ax = f1)\ndf_survived[\"Parch\"].value_counts().plot(kind= \"bar\", title = \"(Parch) Survived\", ax = f2)\ndf_notsurvived[\"Parch\"].value_counts().plot(kind= \"bar\", title =  \"(Parch) Not Survived\", ax = f3)\nplt.show()","bc48836c":"# Code for replacing Sex and Embarked to codes.","9b14776b":"df[\"n_fam_mem\"] = df[\"SibSp\"] + df[\"Parch\"]\ndf_survived[\"n_fam_mem\"] = df_survived[\"SibSp\"] + df_survived[\"Parch\"]\ndf_notsurvived[\"n_fam_mem\"] = df_notsurvived[\"SibSp\"] + df_notsurvived[\"Parch\"]\n\nfig = plt.figure(figsize = (15,5))\nf1 = fig.add_subplot(1, 3, 1)\nf1.set_ylim([0,600])\nf2 = fig.add_subplot(1,3,2)\nf2.set_ylim([0,600])\nf3 = fig.add_subplot(1,3, 3)\nf3.set_ylim([0,600])\n\ndf[\"n_fam_mem\"].value_counts().plot(kind = \"bar\", title = \"all\", ax = f1)\ndf_survived[\"n_fam_mem\"].value_counts().plot(kind = \"bar\", title = \"Survived\", ax = f2)\ndf_notsurvived[\"n_fam_mem\"].value_counts().plot(kind = \"bar\", ax = f3, title = \"Not Survived\")","2640aa1e":"def create_family_ranges(df):\n    familysize = []\n    for members in df[\"n_fam_mem\"]:\n        if members == 0:\n            familysize.append(0)\n        elif members > 0 and members <=4:\n            familysize.append(1)\n        elif members > 4:\n            familysize.append(2)\n    return familysize\n\nfamsize = #code for creating the family size\ndf[\"familysize\"] = famsize\n","668ec559":"# Code for finding the average age of the passengers","92015b95":"def age_to_int(df):\n    agelist = df[\"Age\"].values.tolist()\n    for i in range(len(agelist)):\n        if agelist[i] < 18 and agelist[i] >= 0:\n            agelist[i] = 0\n        elif agelist[i] >= 18 and agelist[i] < 60:\n            agelist[i] = 1\n        elif agelist[i]>=60 and agelist[i]<200:\n            agelist[i] = 2\n        else:\n            agelist[i] = -1\n    ageint = pd.DataFrame(agelist)\n    return ageint","f69e6adc":"# Code for converting age to categories and dropping age column","51d2b787":"df[\"actual_fare\"] = df[\"Fare\"]\/(df[\"n_fam_mem\"]+1)\n\ndf[\"actual_fare\"].plot()\ndf[\"actual_fare\"].describe()","0344d32f":"def conv_fare_ranges(df): \n    fare_ranges = []\n    for fare in df.actual_fare:\n        if fare < 7:\n            fare_ranges.append(0)\n        elif fare >=7 and fare < 14:\n            fare_ranges.append(1)\n        elif fare >=14 and fare < 30:\n            fare_ranges.append(2)\n        elif fare >=30 and fare < 50:\n            fare_ranges.append(3)\n        elif fare >=50:\n            fare_ranges.append(4)\n    return fare_ranges\n        \nfare_ranges = conv_fare_ranges(df)\ndf[\"fare_ranges\"] = fare_ranges\n","f9eb549d":"df_nonsurv_fare = df[df[\"Survived\"]==0]\ndf_surv_fare = df[df[\"Survived\"]==1]\n\nfig = plt.figure(figsize = (15,5))\nf1 = fig.add_subplot(1, 3, 1)\nf1.set_ylim([0,500])\nf2 = fig.add_subplot(1,3,2)\nf2.set_ylim([0,500])\nf3 = fig.add_subplot(1,3, 3)\nf3.set_ylim([0,500])\n\ndf[\"fare_ranges\"].value_counts().plot(kind=\"bar\", title = \"Fare Ranges all\", ax = f1)\ndf_surv_fare[\"fare_ranges\"].value_counts().plot(kind=\"bar\", title =  \"Survived\", ax = f2)\ndf_nonsurv_fare[\"fare_ranges\"].value_counts().plot(kind=\"bar\", title = \"Not Survived\", ax = f3)","32cb803f":"def name_to_int(df):\n    name = df[\"Name\"].values.tolist()\n    namelist = []\n    for i in name:\n        index = 1\n        inew = i.split()\n        if inew[0].endswith(\",\"):\n            index = 1\n        elif inew[1].endswith(\",\"):\n            index = 2\n        elif inew[2].endswith(\",\"):\n            index = 3\n        namelist.append(inew[index])\n    print(set(namelist))\n    \n    titlelist = []\n    \n    for i in range(len(namelist)): \n        if namelist[i] == \"Lady.\":\n            titlelist.append(\"Lady.\")\n        elif namelist[i] == \"Ms.\":\n            titlelist.append(\"Ms.\")\n        elif namelist[i] == \"Miss.\":\n            titlelist.append(\"Miss.\")\n        elif namelist[i] == \"Dr.\":\n            titlelist.append(\"Dr.\")\n        elif namelist[i] == \"Mr.\":\n            titlelist.append(\"Mr.\")\n        elif namelist[i] == \"Jonkheer.\":\n            titlelist.append(\"Jonkheer.\")\n        elif namelist[i] == \"Col.\":\n            titlelist.append(\"Col.\")\n        elif namelist[i] == \"Mrs.\":\n            titlelist.append(\"Mrs\")\n        elif namelist[i] == \"Sir.\":\n            titlelist.append(\"Sir.\")\n        elif namelist[i] == \"Mlle.\":\n            titlelist.append(\"Mlle.\")\n        elif namelist[i] == \"Capt.\":\n            titlelist.append(\"Capt.\")\n        elif namelist[i] == \"the\":\n            titlelist.append(\"the\")\n        elif namelist[i] == \"Don.\":\n            titlelist.append(\"Don.\")\n        elif namelist[i] == \"Master.\":\n            titlelist.append(\"Master.\")\n        elif namelist[i] == \"Rev.\":\n            titlelist.append(\"Rev.\")\n        elif namelist[i] == \"Mme.\":\n            titlelist.append(\"Mme.\")\n        elif namelist[i] == \"Major.\":\n            titlelist.append(\"Major.\")\n        else:\n            titlelist.append(\"sometitle\")\n    print(set(namelist))\n    return titlelist","38334933":"titlelist = name_to_int(df)\ndf[\"titles\"] = titlelist\ndf[\"titles\"].value_counts()\n","e5e6cc10":"df[\"titles\"].replace([\"Ms.\",\"Jonkheer.\",\"the\",\"Don.\",\"Capt.\",\"Sir.\",\"Lady.\",\"Mme.\",\"Col.\",\"Major.\"],\"sometitle\", inplace = True)\n\ndf[\"titles\"].replace(\"Mlle.\",\"Miss.\", inplace = True)","6e2c3fb7":"df[\"titles\"].replace([\"Mr.\", \"Miss.\", \"Mrs\", \"Master.\", \"Dr.\", \"Rev.\", \"sometitle\"],[0,1,2,3,4,5,6], inplace = True)\ndf[\"titles\"].astype(\"int64\")\n\n\ndf.drop([\"Name\"], axis = 1, inplace = True)","fd223ff6":"df.drop([\"SibSp\",\"Parch\",\"Fare\",\"n_fam_mem\",\"actual_fare\"], axis = 1, inplace = True)","934931bf":"df.info()\nf,ax = plt.subplots(figsize=(6, 5))\nsns.heatmap(df.corr(), annot=True,cmap = \"Blues\", linewidths=.5, fmt= '.2f',ax = ax)\nplt.show()","f6b3280f":"Below is a dictionary that maps to the title of a person to a label, this includes all the title present in the dataframe.","87994286":"Checking data in sibsp (sibling\/spouse) and parch(parent\/children), basically these columns gives information about how many family members the person is travelling with.","ab1cfecb":"There is no object type data left. You can check this by df.info()","2892fef2":"Now checking class distribution of **pclass**, i.e., how many people from each class survived.","893f28c7":"### Importing the necessary libraries and setting up various paths.","9a26fd2d":"**Correlation map :**","65ce24a5":"The above figure shows that most of the people from class 3 did'nt survive while nearly equal no. of people from the 2nd class did and did not survive, while more people of the 1st class survived as compared to non survival rate, thus pclass is an important data for training the classifier.","13eac9e1":"As we can see a lot of titles occur only one thus we will replace this by \"sometitle\"","071914bd":"Now, the columns **Sex** and **Embarked** are object type columns, thus we need to change them to numeric type.","7bb725be":"Next step is to dividing data into Training data and training labels, where labels is \"Survived\" column, and then splitting training data into train and test sets.","0d4df0bb":"**Fare Ranges = less than 7 , 7-14 , 14-30 , 30-50 , more than 50 **","2910833f":"Now the data in **Fare** seems like it is the total of what the passenger paid including the fare of the other family members, so we create a new column named actual_fare i.e., the fare divided by n_fam_mem + 1.","fea60d7e":"The column **Age** contains continuous data, thus dividing it into particular ranges.","3f4c0789":"Now the **name** column has unique data item in every row, but each name has a title with it. We can use the title and check if it relates to something.","17b0202a":"Now we will divide the n_fam_mem into specific ranges or type, say single person (0), small family (1) or big family (2), ","3859ec38":"Also, the PassengerId column only tells about the id of the passenger travelling on the ship thus it is useless for training purpose thus dropping PassengerId. ","10b1e5c0":"### Preview of data.\nGet the preview of the data by reading the csv file, printing the length of the csv file and finding the number of NaN in data.","0e0f5b19":"## Hands-on Kaggle","1502d127":"We have cleaned and processed the data, we only need to get rid of a few original columns which we used to derive new columns. we need to drop :\n(Fare, n_fam_mem, actual_fare)","0e6ba0b8":"Dividing the actual fare into 5 different ranges.","cf528f86":"The data contains a lot of missing values in columns **Age** and **Cabin**.\nto fill missing values we will fill those missing values in **Age** column with \"-1\".\n\n**Cabin** Column contains 687 missing values out of a total of 891 values, we'll check what type of values cabin col has.","15719376":"Using the **parch** and **sibsp** column we can make a new column named no. of family members onboard **(n_fam_mem)**. \nAnd visualizing results.","6f2e9fa5":"**Cabin** column has a lot of unique values, we can still use the alphabetical cabin type but it wont improve our model much thus dropping it would be the best."}}