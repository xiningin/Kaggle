{"cell_type":{"0c0da320":"code","e43e073e":"code","7febc6c9":"code","efe7adae":"code","5bb11274":"code","ffe3963f":"code","9c138a93":"code","2f9b276a":"code","b9e5d018":"code","0b7f863f":"code","843586ff":"code","967cf193":"code","e0d37215":"code","4350897f":"code","a39ea6b4":"code","d75c50e5":"code","8542fb0a":"code","7aa771c5":"code","6d87dd7d":"code","9e4da66e":"code","6a2fa5d5":"markdown","365c8836":"markdown"},"source":{"0c0da320":"#import matplotlib.pyplot as pt\nimport numpy as np\nimport pandas as pd\n#from sklearn import linear_model\n#import seaborn as sns\nimport plotly.express as px\nfrom plotly import graph_objects as go","e43e073e":"# ## This part is the code I used to create the table I used to analyse the data\n\n\n\n# df_confirmed = pd.read_csv(\"time_series_covid19_confirmed_US.csv\")\n# df_death = pd.read_csv(\"US_daily_death.csv\")\n\n#  df = df.iloc[:,6:]\n# df = pd.melt(df, id_vars=['Province_State', 'Country_Region',\"Lat\",\"Long_\",\"Combined_Key\"],\n#         var_name='Date', value_name='Confirmed_cases')\n\n# df_death = df.iloc[:,6:]\n# df_death = pd.melt(df_death, id_vars=['Province_State', 'Country_Region',\"Lat\",\"Long_\",\"Combined_Key\"],\n#         var_name='Date', value_name='Confirmed_cases')\n\n\n# conf_key = df_confirmed[\"Combined_Key\"].unique()\n# for i in conf_key:\n#     in_list = df_confirmed[(df_confirmed[\"Combined_Key\"] == i)].index\n#     df_confirmed.loc[in_list[0],\"Daily\"] = 0\n#     for k in range( 1, len(in_list)):\n#         df_confirmed.loc[in_list[k],\"Daily\"]= ( df_confirmed.loc[in_list[k], \"Confirmed_cases\"] - \n#                                                   df_confirmed.loc[ in_list[k-1], \"Confirmed_cases\"] ) \n        \n        \n        \n# ## getting ride of negetives due to wrong data in the excel file\n# for i in df_confirmed.index:\n#     if df_confirmed.loc[i,\"Daily\"] < 0:\n#         df_confirmed.loc[i,\"Daily\"] = 0\n\n        \n        \n\n        \n# ## create one table with daily death and confirmed cases\n# conf_key = df_confirmed[\"Combined_Key\"].unique()\n# #dates = df_death[\"Date\"].unique()\n# for i in conf_key:\n#     in_list = df_death[(df_death[\"Combined_Key\"] == i)].index\n#     in_list2 = df_confirmed[(df_confirmed[\"Combined_Key\"] == i)].index\n#     for k in range( 0, len(in_list)):\n#         df_death.loc[in_list[k],\"Daily_cases\"]= df_confirmed.loc[in_list2[k],\"Daily\"]\n        \n        \n        \n# df_death.to_csv(\"US_death2.csv\", index = False)","7febc6c9":"all_data = pd.read_csv(\"\/kaggle\/input\/fulldata1\/US_daily_death2.csv\")","efe7adae":"all_data.dtypes","5bb11274":"all_data.columns","ffe3963f":"all_data[\"Date\"] = pd.to_datetime(all_data[\"Date\"])","9c138a93":"all_data","2f9b276a":"fig = px.pie(all_data, \n             values='Daily_cases', names='Province_State',\n             title='U.S Total Cases Per State')\n\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.update_layout(height=700, uniformtext_mode='hide')\nfig.show()","b9e5d018":"fig = px.pie(all_data, \n             values='Daily_death', names='Province_State',\n             title='U.S Total Death Per State')\n\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.update_layout(height=700, uniformtext_mode='hide')\nfig.show()","0b7f863f":"(px.scatter( x = all_data[\"Date\"], y = all_data[\"Daily_death\"]\n            , color=all_data[\"Province_State\"],\n            title=\"US Daily Deaths by State\")\n .update_layout(title_font_size=29)\n .update_xaxes(showgrid=False)\n .update_traces(\n     line=dict(dash=\"dot\", width=4),\n     selector=dict(type=\"scatter\", mode=\"lines\"))\n).show()\n","843586ff":"(px.scatter( x = all_data[\"Date\"], y = all_data[\"Daily_cases\"]\n            , color=all_data[\"Province_State\"],\n            title=\"US Daily Cases by State\")\n .update_layout(title_font_size=29)\n .update_xaxes(showgrid=False)\n .update_traces(\n     line=dict(dash=\"dot\", width=4),\n     selector=dict(type=\"scatter\", mode=\"lines\"))\n).show()\n","967cf193":"group_cases = all_data.groupby([\"Province_State\", \"Date\" ]).sum()[\"Daily_cases\"]\ngroup_cases = group_cases.reset_index()","e0d37215":"(px.scatter( x = group_cases[\"Date\"], y = group_cases[\"Daily_cases\"]\n            , color=group_cases[\"Province_State\"],\n            title=\"US Daily Cases by State\")\n .update_layout(title_font_size=29)\n .update_xaxes(showgrid=False)\n .update_traces(\n     \n     selector=dict(type=\"scatter\", mode=\"lines\"))\n).show()","4350897f":"top_five = group_cases[group_cases[\"Date\"] == \"2020-06-6\"].sort_values(\"Daily_cases\",ascending = False).head(5)\ntop_five= top_five.reset_index()\n\ntemp = group_cases[(group_cases[\"Province_State\"] == top_five[\"Province_State\"][0]) | \n          (group_cases[\"Province_State\"] == top_five[\"Province_State\"][1]) |\n             (group_cases[\"Province_State\"] == top_five[\"Province_State\"][2]) | \n          (group_cases[\"Province_State\"] == top_five[\"Province_State\"][3]) |\n         (group_cases[\"Province_State\"] == top_five[\"Province_State\"][4])]\n\n(px.scatter(temp, x=\"Date\", y=\"Daily_cases\", color=\"Province_State\",\n            facet_col=\"Province_State\",\n           title = \"Top Five States with the highest cases\", hover_name =\"Province_State\",\n           facet_col_wrap=1\n            )\n .update_layout(title_font_size=20)\n .update_xaxes(showgrid=False)\n .update_traces(\n     line=dict(dash=\"dot\", width=4),\n     selector=dict(type=\"scatter\", mode=\"lines\"))\n).show()","a39ea6b4":"temp_case = all_data.groupby([\"Province_State\"]).sum()[\"Daily_cases\"]\nstates = np.sort(all_data[\"Province_State\"].unique())\n\nfig = px.bar(y=temp_case, x=states, text = temp_case)\nfig.update_traces(texttemplate='%{text:.8s}', textposition='inside')\nfig.update_layout(uniformtext_minsize=4, height=500, uniformtext_mode='hide',\n                 xaxis_tickangle=-45,font=dict(\n        size=8,\n    )\n                 )\nfig.show()","d75c50e5":"temp_death = all_data.groupby([\"Province_State\"]).sum()[\"Daily_death\"]\nstates = np.sort(all_data[\"Province_State\"].unique())\n\nfig = px.bar(y=temp_death, x=states, text = temp_death)\nfig.update_traces(texttemplate='%{text:.8s}', textposition='inside')\nfig.update_layout(uniformtext_minsize=4, height=500, uniformtext_mode='hide',\n                 xaxis_tickangle=-45,font=dict(\n        size=8,\n    )\n                 )\nfig.show()","8542fb0a":"fig = go.Figure()\nfig.add_trace(go.Bar(\n    x=states,\n    y=temp_case,\n    name = \"Confirmed Cases\",\n    marker_color='Red'))\nfig.add_trace(go.Bar(\n    x=states,\n    y=temp_death,\n    name = \"Death cases\",\n    marker_color='Black'))\nfig.update_layout(barmode='group', xaxis_tickangle=-45,\n                 font=dict(\n        size=8,\n    ))\nfig.show()","7aa771c5":"date_death = all_data.groupby([\"Date\"]).sum()[\"Daily_death\"]\n#temp = temp.sort_values()\nstates = all_data[\"Date\"].unique()\n\nfig = px.bar(top_five, y=date_death, x=states, text = date_death)\nfig.update_traces(texttemplate='%{text:.8s}', textposition='inside')\nfig.update_layout(uniformtext_minsize=4, height=500, uniformtext_mode='hide',\n                 xaxis_tickangle=-45,font=dict(\n        size=8), yaxis=dict(\n        title='Death per Date',\n        titlefont_size=16,\n        tickfont_size=9,\n    )\n                 )\nfig.show()","6d87dd7d":"temp_case_ratio = (all_data.groupby(\"Province_State\").sum()[\"Daily_cases\"] \/ all_data.groupby(\"Province_State\").sum()[\"Population\"]) * 100000\n\nstates = np.sort(all_data[\"Province_State\"].unique())\nfig = px.bar(y=temp_case_ratio, x=states, title='Case per 100000 population')\nfig.update_traces(texttemplate='%{text:.8s}', textposition='inside')\nfig.update_layout(uniformtext_minsize=4, title_font_size=30, height=500, uniformtext_mode='hide',\n                 xaxis_tickangle=-45,font=dict(\n        size=8,\n    ), yaxis=dict(\n                    title = \"\",\n        titlefont_size=16,\n        tickfont_size=9,\n                 ) )\nfig.show()","9e4da66e":"temp_death_ratio = (all_data.groupby(\"Province_State\").sum()[\"Daily_death\"] \/\n                    all_data.groupby(\"Province_State\").sum()[\"Population\"]) * 100000\nstates = np.sort(all_data[\"Province_State\"].unique())\n\nfig = px.bar(y=temp_death_ratio, x=states, title='Death per 100000 population')\nfig.update_traces(texttemplate='%{text:.8s}', textposition='inside')\nfig.update_layout(uniformtext_minsize=4, title_font_size=30, height=500, uniformtext_mode='hide',\n                 xaxis_tickangle=-45,font=dict(\n        size=8,\n    ), yaxis=dict(\n                    title = \"\",\n        titlefont_size=16,\n        tickfont_size=9,\n                 ) )\nfig.show()","6a2fa5d5":"It is possible to unselect states and then select states that you are looking for","365c8836":"**This is a short analysis I have done on the cov data until June 6. You could follow the below process to create the excel for a recent data and \nthen do all the analysis just by replaceing the data**"}}