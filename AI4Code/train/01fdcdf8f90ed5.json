{"cell_type":{"f7d397ac":"code","410a4668":"code","a56dc8a3":"code","8cc701f3":"code","074edd1e":"code","7d4b3e58":"code","870429b6":"code","a030dabd":"code","9f33bc16":"code","f21f14e6":"code","41f3aabc":"code","dfdcf630":"code","a1510126":"code","1d9b7dae":"code","6ed217f1":"code","2c0a1bd8":"code","407304a3":"code","a94eeb7e":"code","976e051b":"code","b743b42c":"code","fd818777":"code","e3d2c4b8":"code","f7db80f9":"code","a98eca30":"code","d1bd9fcf":"code","a2f3fa7f":"code","709e305a":"code","ed93d29b":"code","dea5a9dd":"code","6792ad73":"code","43eafe76":"code","f2e8ba77":"code","fa48df4e":"code","2ff67d23":"code","4abdf257":"code","f64fa2e6":"code","3e4b045e":"code","5e1763df":"code","699d19de":"code","f630c83e":"code","affed4de":"code","feeb3fb9":"code","298939ed":"code","8ef3b44b":"code","b1d7bd8e":"code","bf9658a4":"code","a2f4be63":"code","62bb0c99":"code","cecb807c":"code","111f9a83":"code","687e5a1b":"markdown","b8774ed5":"markdown","16e9841b":"markdown","eb757b3f":"markdown","ba6c185b":"markdown","fcd17f92":"markdown","834e110c":"markdown","1ab31353":"markdown","f145d6b6":"markdown","06338eeb":"markdown","bdd3f725":"markdown","f9532729":"markdown","43ed4424":"markdown","49a3484f":"markdown","90c385cd":"markdown","73050409":"markdown","a9e9e799":"markdown","1cdbc000":"markdown","e7b03c0c":"markdown","2777984e":"markdown","b7deb54f":"markdown","c7c01b6f":"markdown","29367244":"markdown","8e0ee923":"markdown","fa4733f3":"markdown","1c4597dc":"markdown","831700b1":"markdown","81b539aa":"markdown","d51208f9":"markdown","24e6a64a":"markdown","98fabafd":"markdown","01d5bea6":"markdown","d932b448":"markdown","2c9a06e6":"markdown","de3c05e4":"markdown","4f7904ce":"markdown","5911f5bd":"markdown","22ab23fd":"markdown","4a356d6e":"markdown","7b0ce894":"markdown","e609292b":"markdown","7ac78816":"markdown","cac5277d":"markdown","c8f6f279":"markdown","f490f148":"markdown","8f24176a":"markdown"},"source":{"f7d397ac":"!pip install dataprep\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom dataprep.eda import plot,plot_correlation,plot_missing,plot_diff,create_report\nimport os\nimport json","410a4668":"pd.set_option('display.max_columns',500)\nwith open('..\/input\/pakistans-largest-pakwheels-automobiles-listings\/usedCars.json') as f:\n    DICT = json.load(f)\n\n\n\ndata = pd.json_normalize(DICT['usedCars'])\ndata.head()","a56dc8a3":"data.shape","8cc701f3":"data.info()","074edd1e":"plot(data)","7d4b3e58":"remove1=['@type','description','itemCondition','name','image','brand.@type','brand.name','keywords','adLastUpdated',\n                'priceCurrency','vehicleEngine.@type','vehicleEngine.engineDisplacement']\nnot_remove=['extraFeatures.Assembly','extraFeatures.RegisteredIn','extraFeatures.EngineCapacity']\n\nremove2=[col for col in data.columns if col not in not_remove and 'extraFeatures' in col]\ndrop_columns=remove1+remove2\ndata.drop(drop_columns,axis=1,inplace=True)\n                ","870429b6":"data.columns","a030dabd":"data['extraFeatures.EngineCapacity']","9f33bc16":"data['extraFeatures.EngineCapacity']=data['extraFeatures.EngineCapacity'].str.replace('cc','').str.strip()\ndata.dropna(subset=['extraFeatures.EngineCapacity'],inplace=True)\ndata['extraFeatures.EngineCapacity']=data['extraFeatures.EngineCapacity'].astype('int64')","f21f14e6":"data['extraFeatures.EngineCapacity']","41f3aabc":"data.mileageFromOdometer","dfdcf630":"data['mileageFromOdometer']=data['mileageFromOdometer'].str.replace(',','')\ndata['mileageFromOdometer']=data['mileageFromOdometer'].str[:-2].str.strip()\ndata['mileageFromOdometer']=data['mileageFromOdometer'].astype('int64')","a1510126":"data['mileageFromOdometer']","1d9b7dae":"data.sellerLocation","6ed217f1":"data['seller_city']=(data['sellerLocation'].str.split().str[-2:]).str.join(' ')\ndata['seller_city']","2c0a1bd8":"data.drop('sellerLocation',axis=1,inplace=True)","407304a3":"columns=[col for col in data.columns ]\nfor column in columns:\n    print(f'\\t\\t\\t\\t {column}')\n    plot(data,column).show()\n    print('------------------------------------------------------------------------------------------------------------------')\n   ","a94eeb7e":"plot_missing(data)","976e051b":"plot_correlation(data)","b743b42c":"plot_correlation(data,'modelDate','price')","fd818777":"plot_correlation(data,'mileageFromOdometer','price')","e3d2c4b8":"plot_correlation(data,'extraFeatures.EngineCapacity','price')","f7db80f9":"plot_correlation(data,'modelDate','price')","a98eca30":"plot(data,'model','price')","d1bd9fcf":"data.groupby('model')['price'].median().nlargest(10).plot.bar()\n","a2f3fa7f":"data[data['model']=='G Class']","709e305a":"df1=data[data['model'].map(data['model'].value_counts())>100]","ed93d29b":"df1.groupby('model')['price'].median().nlargest(10).plot.bar()","dea5a9dd":"plot(data,'manufacturer','price')","6792ad73":"data.groupby('manufacturer')['price'].median().nlargest(10).plot.bar()\n","43eafe76":"data[data['manufacturer']=='Bentley']","f2e8ba77":"df1=data[data['manufacturer'].map(data['manufacturer'].value_counts())>100]","fa48df4e":"df1.groupby('manufacturer')['price'].median().nlargest(10).plot.bar()\n","2ff67d23":"plot(data,'bodyType','price')","4abdf257":"data.groupby('bodyType')['price'].median().nlargest(10).plot.bar()\n","f64fa2e6":"df1=data[data['bodyType'].map(data['bodyType'].value_counts())>50] ","3e4b045e":"df1.groupby('bodyType')['price'].median().nlargest(10).plot.bar()\n","5e1763df":"plot(data,'fuelType','price')","699d19de":"data.groupby('fuelType')['price'].median().nlargest(10).plot.bar()\n","f630c83e":"plot(data,'seller_city','price')","affed4de":"data.groupby('seller_city')['price'].mean().nlargest(10) .plot.bar()","feeb3fb9":"data['seller_city'].value_counts(ascending=True).nsmallest(10)","298939ed":"df1=data[data['seller_city'].map(data['seller_city'].value_counts())>100]","8ef3b44b":"df1.groupby('seller_city')['price'].mean().nlargest(10).plot.bar()","b1d7bd8e":"plot(data,'extraFeatures.RegisteredIn','price')","bf9658a4":"data.groupby('extraFeatures.RegisteredIn')['price'].mean().nlargest(10).plot.bar()","a2f4be63":"data[data['extraFeatures.RegisteredIn']=='Carbon']","62bb0c99":"df2=data[data['extraFeatures.RegisteredIn'].map(data['extraFeatures.RegisteredIn'].value_counts())>100]\ndf2.groupby('extraFeatures.RegisteredIn')['price'].median().nlargest(10).plot.bar()","cecb807c":"plot(data,'extraFeatures.Assembly','price')","111f9a83":"data.groupby('extraFeatures.Assembly')['price'].median().nlargest(10).plot.bar()","687e5a1b":"Nows its time to check the correlations between price and other features column.","b8774ed5":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Conclusion <\/h1><a id=0><\/a>\n","16e9841b":"Imported cars are more expensive than local cars.","eb757b3f":"COMPACT SUV seems to have highest median price. lets confirm this.","ba6c185b":"1- Majority of the cars are from big cities. Imported Cars are most expensive.\n\n2- The more latest model of the car is, more expensive it is.\n\n3- The more engine capacity the car has, more expensive it is.\n\n4- The more mileage the car has, cheaper the car gets.\n\n5- Audi manufactures the most expensive car.\n\n6- Compact SUV body type cars are more expensive.\n\n7- Diesel cars are more expensive than others.\n","fcd17f92":"Now its clean. \n\nNext turn is of mileageFrom Odometer. We will do same tasks. But this time we will remove 'km' from every sample and then convert them to integer datatype.","834e110c":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Univariate Analysis <\/h1><a id=0><\/a>\n","1ab31353":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Correlations with Price <\/h1><a id=0><\/a>\n","f145d6b6":"We have successfully cleaned it and stored them in a new feature named as 'seller_city'.\n","06338eeb":"This feature is very important as it tells us the location of the seller\/where the car is.\n\nAs you can see that it contains exact address in city. This way there would be far too many values to look at. So we will just extract the city name and the province from the location. ","bdd3f725":"extraFeatures.Capacity is most positvely correlated with price according to pearson correlation of 0.63.\n\nmodelDate also has positive pearson correlation of 0.28 with price.\n\nmileage featurs has negative perason correlation of -0.17 with price.\n\nThe following plots elaborate this.","f9532729":"**If this helped you, please do upvote.**\n\n**I will keep on making it better. Thanks.**","43ed4424":"Here we tried to have an idea that which car model is most expensive and contrary to my expectations g class is ranked on top. that is because it only has 2 rows and so its median ranks highest.","49a3484f":"We will have a look at each feature of data to have an idea about it. We are going to use autoEDA framework DataPrep for it.","90c385cd":"Here prado seems to have the highest median price.\nLets plot a bar graph to confirm this.\n","73050409":"The plot shows that manufacturer called Bentley is most expensive. But I dont think so. \n\nLets confirm this by looking at its sample.","a9e9e799":"Through these visualizations we know the following characterstics of each feature.\n\n**model:** Corolla is the most sold car in this data. The largest value (Corolla) is over 1.9 times larger than the second largest value (Civic). It takes 18.3% of car models.\n\n**modelDate:** It is the model year of car. It has 1888 outliers and is left skewed. 12.49% of the car model years range from (2014-2016).\n\n**manufacturer:** Toyota,Suzuki and Honda are leading manufacturers respectively. They represent 84% of the total manufacturers.\n\n**fuelType:** Petrol is the leading fuel type in all cars. The largest value (Petrol) is over 21.78 times larger than the second largest value (Diesel).\n\n**vehicleTransmission:** Approximately 53% of cars are automatic and 57% of cars are manual.\n\n**colors:** White, silver, black and grey are leading colors. They together correspond to 80.7% of colors. The largest value (White) is over 2.58 times larger than the second largest value (Silver).\n\n**bodyType:** Sedan and batchback are leading body types. They represent 71% of total body types. It also contains 12.5% of missing data.\n\n**mileageFromOdometer:** It is right skewed with 17.36% of it ranges from 80000km to 100000km.\n\n**price:** It is right skewed with approx 56% ranges from PKR 98000 to PKR 1900000.\n\n**extraFeatures.RegisteredIn:** Many cars have registeration from Lahore,Islamabad and Karachi representing 71% of the registeration cities.\n\n**extraFeatures.Assembly:** 2\/3 rd of cars are locally manufactured.\n\n**extraFeatures.EngineCapacity:** It is also right skewed with approx 21% ranges from 1280cc to 1400cc.\n\n**seller_city:** Majority of cars are location in Lahore, Karachi, Islamabad and Rawalpindi.","1cdbc000":"In this section we will compare some features with price feature to have a better understanding of them.\n","e7b03c0c":"Imported cars have lots of outliers.","2777984e":"Lets have a look at features now. \n","b7deb54f":"Hybrid cars have highest median price.","c7c01b6f":"Through DataPrep library, it took us few seconds to visualize all features of the data.\nThe plot() function explores the distributions and statistics of the dataset. It generates a variety of visualizations and statistics which enables us to achieve a comprehensive understanding of the column distributions and their relationships.","29367244":"<div style=\"width:100%;text-align: center;\"> <img align=middle src=\"https:\/\/static.pakwheels.com\/2018\/01\/car-premium.jpg\" alt=\"Heat beating\" style=\"height:500px;margin-top:3rem;\"> <\/div>\n","8e0ee923":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Bit of Feature Engineering <\/h1><a id=0><\/a>\n","fa4733f3":"Compact SUV has highest median price.","1c4597dc":"Lets find relation between bodytype and price features.","831700b1":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  First Visualization Using AutoEDA <\/h1><a id=0><\/a>\n","81b539aa":"As we saw from the plot() function that are many columns which are not going to help us visualize and extract insights from data very well. So we are going to drop those columns.\n\n**Reason for dropping these columns:**\n\n1. Some of them have constant values such as @type feature. We should remove all these kind of features to reduce memory as they are not going to help us extract useful insights from data.\n\n2. Many of the columns contain same data,specially those columns which start with 'extraFeatures'. For example extraFeatures.color. We already have a column name as Color. So we dont need it.\n\n3. Many of the columns starting with 'extraFeatures' contain 99% missing values. So its better to remove them and make our data tidy.\n","d51208f9":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\"> Importing Libraries <\/h1><a id=0><\/a>\n","24e6a64a":"So it contains only one sample thats why the plot showed that it was most expensive manufacturer. \n\nLets make it clear by what we did with models.","98fabafd":"# **Context**\n\nPakWheels is the largest online marketplace for car shoppers and sellers in Pakistan. It aggregates thousands of new, used, and certified second-hand cars from thousands of dealers and private sellers. The site also provides users with automotive reviews, shopping advice, and comparison tools for car financing and insurance information. It serves as an online community of automobile enthusiasts, with over 250,000 registered members on its online forum.\n\n# **Content**\nWhat's inside is more than just rows and columns.\n\n**@type:** Vehicle type\n\n**model:** Vehicle model\n\n**description:** Ad\/vehicle description\n\n**itemCondition:** vehicle condition\n\n**modelDate:** vehicle model release date\n\n**manufacturer:** vehicle manufacturer\n\nfuelType vehicle fuel type\n\n**name:** Ad title\n\n**image:** ad\/vehicle cover image\n\n**vehicleTransmission:** vehicle transmission type(manual, automatic)\n\n**color:** vehicle color\n\n**bodyType:** vehicle body type\n\n**mileageFromOdometer:** km's the vehicle has driven\n\n**sellerLocation:** seller location\n\n**postedFrom:** platform ad posted from\n\n**keywords:** ad search keywords\n\n**features:** list of features available in the car. e.g: AC, Power windows, etc.\n\n**adLastUpdated:** Ad last updated date\n\n**price:** Asking price\n\n**priceCurrency:** Currency. e.g: PKR, USD.\n\n**brand:{**\n\n**@type:**\n\n**name:** vehicle brand name\n}\n\n**vehicleEngine:**{\n\n**@type:**\n\n**engineDisplacement:** km's the vehicle has driven\n\n}\n\n**extraFeatures:** {\n\n**RegisteredIn:** city the vehicle is registered in.\n\n**Color:** vehicle color\n\n**Assembly:** vehicle assembly location(local, imported\n\n**EngineCapacity:** engine capacity in cubic centimeters(cc)\n\n**BodyType:** vehicle body type\n\n**LastUpdated:** Ad last updated\n\n**AdRef#:** Ad reference number\n\n**AuctionGrade:** a detailed explanation on auction grade\n\n**ChassisNo.:**\n\n**ImportDate:** vehicle import date\n\n**BatteryCapacity:** vehicle battery capacity\n\n**Warranty:** warranty in combination of time duration and distance traveled\n\n}\n","01d5bea6":"Only three features are having integer datatype.\n\nLater in this notebook we are going to convert mileageFromodometer and Engine Capacity to integer datatype.\n\nThis will help us understand the relationship between price and these features.","d932b448":"Lets use DataPrep to have visualizations for missing data.","2c9a06e6":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Bivariate Analysis <\/h1><a id=0><\/a>\n","de3c05e4":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  Missing Data <\/h1><a id=0><\/a>\n","4f7904ce":"Finally, audi seems to be most expensive manufacturer.","5911f5bd":"It looks good.\n\nNow its time for sellerLocation feature. Lets first have a look at some of its values.","22ab23fd":"Finally, our plot ssuggests that land cruisers and prado have highest median price.\n\n\nNow lets compare manufacturer and price features.","4a356d6e":"Now it looks more better and cleaner. We have removed redundant features from our dataset.\n\nNext we will convert EngineCapacity and MileagefromOdometer to integer datatypes. They are going to help us relate with price column","7b0ce894":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\">  First Look at Data <\/h1><a id=0><\/a>\n","e609292b":"<h1 style=\"background-color:#FFA500\n;font-family:newtimeroman;font-size:250%;text-align:center;border-radius: 15px 50px;\"> AutoEDA + Feature Engineering <\/h1><a id=0><\/a>\n","7ac78816":"We will remove 'cc' from every sample and then convert them into integer datatype.","cac5277d":"Only bodytype has missing data totalling to 12.48%","c8f6f279":"To have a better understanding of data, in next cell i will create a new dataframe where i will filter rows on the basis of each models value count. if a model's value count is greater than 100, then we will consider it, else it will be filtered out. this way we will get better plot and analyze it well.","f490f148":"There seem to have many outliers in some manufacturers.\n\nLets get an idea of the most expensive manufacturer.","8f24176a":"**The data has 55675 rows and 37 columns**"}}