{"cell_type":{"833c2c10":"code","5e379fa4":"code","38288780":"code","f4015c70":"code","8b86e639":"markdown","25d2e645":"markdown","63ba7718":"markdown"},"source":{"833c2c10":"from pandas                import DataFrame, read_csv\nfrom os                    import walk\nfrom os.path               import join\nfrom spacy                 import explain, load\n\nnlp = load(\"en_core_web_sm\")","5e379fa4":"train_data = None\ntest_data  = None\n\nfor dirname, _, filenames in walk('\/kaggle\/input'):\n    for filename in filenames:\n        path_name = join(dirname, filename)\n        if filename.startswith('train'):\n            train_data = read_csv(path_name)\n        if filename.startswith('test'):\n            test_data = read_csv(path_name)","38288780":"# countSyllables\n#\n# Code by Tersosauros, snarfed from https:\/\/stackoverflow.com\/questions\/405161\/detecting-syllables-in-a-word\ndef countSyllables(word): \n    vowels       = \"aeiouy\"\n    numVowels    = 0\n    lastWasVowel = False\n    for wc in word:\n        foundVowel = False\n        for v in vowels:\n            if v == wc:\n                if not lastWasVowel: numVowels+=1   #don't count diphthongs\n                foundVowel = lastWasVowel = True\n                break\n        if not foundVowel:  #If full cycle and no vowel found, set lastWasVowel to false\n            lastWasVowel = False\n    if len(word) > 2 and word[-2:] == \"es\": #Remove es - it's \"usually\" silent (?)\n        numVowels-=1\n    elif len(word) > 1 and word[-1:] == \"e\":    #remove silent e\n        numVowels-=1\n    return numVowels\n\n","f4015c70":"Failures = []\nfor index,row in train_data.iterrows():\n    doc = nlp(row['excerpt'])\n    for token in doc:\n        if token.pos_ != 'PUNCT' and countSyllables(str(token).lower())<1:\n            Failures.append((token.pos_,token.tag_,str(token),token.lemma_,explain(token.pos_),explain(token.tag_)))\n\ndf = DataFrame(Failures, \n               columns=['Pos', 'Tag', 'Token','Lemma','ExplainPos','ExplainTag'])\ndf = df.sort_values(['Pos', 'Tag', 'Lemma'])\ndf.drop_duplicates(subset  = ['Lemma'],\n                   inplace = True)\ndf.to_csv('syllable-count-failures.csv', index = False)","8b86e639":"# Load data\n\n## Data Dictionary\n\n|Train|Test|Description|\n|--------------|--------------|----------------------------------------------------|\n|id|id|unique ID for excerpt|\n|url_legal|url_legal| URL of source (Omitted from some records in the test set)|\n|license|license |license of source material (Omitted from some records in the test set)|\n|excerpt|excerpt|text for predicting readability|\n|target|-|readability|\n|standard_error|-|Measure of spread of scores among multiple raters for each excerpt|","25d2e645":"# Show a list of words whose syllable count is computed to be zero\n\n## Purpose\n\nI am using a syllable counter \"countSyllables\" (below), and some tokens come up with a count of zero. The purpose of this notebook is to find out why this is happening, and to find a way of handling the tokens.","63ba7718":"# Build list of failures and save it"}}