{"cell_type":{"1be26de4":"code","f1b50f81":"code","21f405ac":"code","65673e40":"code","abc1a7eb":"code","56264254":"code","48757a20":"code","a83bce1b":"code","86118290":"code","b2db1a12":"code","4dcb7380":"code","988e61c4":"code","fca11d6a":"code","e643383f":"code","4bed2b5d":"code","14ac7932":"code","9d885c94":"code","b7a22050":"code","1778d10d":"code","c923c034":"code","fee674ac":"code","fd671cb7":"code","6deb606c":"code","9fd2d73b":"code","a3f1560f":"code","5bf49b13":"code","5d10916f":"code","2c581a9d":"code","105344f4":"code","faafd233":"code","70632cd7":"code","4dc9b0f8":"code","33d2f52f":"code","f1257209":"code","e6267d8d":"code","bc0efc97":"code","498cec7b":"code","b4eee4ba":"code","d2de0578":"code","09918a0b":"code","08d3496c":"code","90f3777a":"code","d5c886ba":"code","4407c947":"markdown","dae480fd":"markdown","a90000d8":"markdown","5efa54b3":"markdown","1a521a0c":"markdown","aa7c6f88":"markdown","26605466":"markdown","be2f72bc":"markdown","681251f7":"markdown","8a611e0c":"markdown","fab2676c":"markdown","750d6710":"markdown","22d7709d":"markdown","a9931dcb":"markdown","a428a054":"markdown","370ee642":"markdown","45d9ff09":"markdown","b938d4ca":"markdown","d751d158":"markdown","7db89c50":"markdown","c5f43151":"markdown","55925bce":"markdown","41e18635":"markdown","ce61925b":"markdown","a5e8350b":"markdown","ddf12b83":"markdown"},"source":{"1be26de4":"import numpy as np \nimport pandas as pd \nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","f1b50f81":"suicides=pd.read_csv('..\/input\/suicide-rates-overview-1985-to-2016\/master.csv')","21f405ac":"suicides.head()","65673e40":"suicides.generation.unique() # For finding how many generations there are","abc1a7eb":"suicides.columns","56264254":"suicides.shape ","48757a20":"suicides.info()","a83bce1b":"suicides[' gdp_for_year ($) ']=suicides[' gdp_for_year ($) '].str.replace(',','').astype(int) \n# Because I can't convert the string with the commas in it, I need to remove them and then converting the string.\n","86118290":"suicides.head()","b2db1a12":"suicides.isnull().any() # Verifying if there are any null values.","4dcb7380":"suicides.isnull().sum() # Counting all the null entries, adding 1 tot the sum everytime it's true that the value is null.","988e61c4":"del suicides['HDI for year']","fca11d6a":"suicides.columns # It was successfully deleted.","e643383f":"len(suicides.country.unique()) \n# 101 countries.","4bed2b5d":"suicides.rename(columns={'suicides\/100k pop':'suicides\/100k',' gdp_for_year ($) ':'gdp\/year','gdp_per_capita ($)':'gdp\/capita'},inplace=True)\n# We already know that the currency is $.","14ac7932":"suicides.drop('year',axis=1).describe()","9d885c94":"suicides.groupby('country').suicides_no.sum().sort_values(ascending=False)\n# The country with the most suicides is Russia, followed by USA and Japan\n# The last 2 countries have 0 suicides, so we don't need them in our analysis about the number of suicides ","b7a22050":"suicides=suicides[(suicides.country!='Saint Kitts and Nevis') & (suicides.country!='Dominica')]","1778d10d":"total_suicides=pd.DataFrame(suicides.groupby('country').suicides_no.sum().sort_values(ascending=False))\n# I'm gonna save the results to a DataFrame so I can plot them","c923c034":"total_suicides=total_suicides.reset_index()\n# I don't want countries as index","fee674ac":"total_suicides.head()","fd671cb7":"plt.figure(figsize=(10,20))\nsns.barplot(y='country',x='suicides_no',data=total_suicides)\nplt.title('Number of suicides aprox. 1985-2016') # It's aprox because the years for each country aren't quite the same\nplt.ylabel('Countries')\nplt.xlabel('Number of suicides')","6deb606c":"plt.figure(figsize=(10,20))\nsns.barplot(y=total_suicides[total_suicides.suicides_no<7000].country,\n            x=total_suicides[total_suicides.suicides_no<7000].suicides_no,data=total_suicides)\nplt.title('Number of suicides aprox. 1985-2016')\nplt.ylabel('Countries')\nplt.xlabel('Number of suicides')\n\n# I chosed the suicides_no < 7000 just by looking at the figure and trying multiple times another values,\n# finding this number appropiate.","9fd2d73b":"from bokeh.io import output_notebook, output_file, show\nfrom bokeh.plotting import figure\noutput_notebook()\n\nsuicides_globally=suicides.groupby('year').sum().suicides_no.values\nyears=suicides.year.sort_values(ascending=True).unique()\nyears\n\np1 = figure(plot_height=400, plot_width=900, title='Evolution of suicides over the world per year', tools='pan,box_zoom')\n\np1.line(x=years, y=suicides_globally, line_width=2, color='aquamarine')\np1.circle(x=years, y=suicides_globally, size=5, color='green')\nshow(p1)\n    ","a3f1560f":"len(suicides[suicides.year==2016].country.unique())\n#There are only 16 countries studied this year, so we don't need the value in our analysis.","5bf49b13":"suicides_globally=suicides[suicides.year!=2016].groupby('year').sum().suicides_no.values\nyears=suicides[suicides.year!=2016].year.sort_values(ascending=True).unique()\np1 = figure(plot_height=400, plot_width=900, title='Evolution of suicides over the world per year', tools='pan,box_zoom')\n\np1.line(x=years, y=suicides_globally, line_width=2, color='aquamarine')\np1.circle(x=years, y=suicides_globally, size=5, color='green')\nshow(p1)","5d10916f":"suicides_gender=pd.DataFrame(suicides.groupby(['country','sex']).suicides_no.sum())\nsuicides_gender=suicides_gender.reset_index()\nsuicides_gender.head()","2c581a9d":"plt.figure(figsize=(10,25))\nsns.barplot(x=suicides_gender[suicides_gender.suicides_no > 7000].suicides_no,\n            y=suicides_gender[suicides_gender.suicides_no > 7000].country,data=suicides_gender,hue='sex')\n\n","105344f4":"plt.figure(figsize=(10,25))\nsns.barplot(x=suicides_gender[suicides_gender.suicides_no < 7000].suicides_no,\n            y=suicides_gender[suicides_gender.suicides_no < 7000].country,data=suicides_gender,hue='sex')","faafd233":"suicides.groupby('sex').suicides_no.sum()","70632cd7":"suicides.groupby('sex').suicides_no.sum().male\/suicides.groupby('sex').suicides_no.sum().female * 100","4dc9b0f8":"genders=suicides.groupby(['year','sex']).sum().suicides_no\nfemale=genders.loc[:2015,'female'].values\nmale=genders.loc[:2015,'male'].values\n\n\np2=figure(plot_height=500,plot_width=900,title='Evolution of number of suicides by gender globally',tools='pan, box_zoom')\np2.circle(x=years,y=male,color='purple',size=5)\np2.line(x=years,y=male,color='purple',legend='male',line_width=2)\np2.circle(x=years,y=female,color='orange',size=5)\np2.line(x=years,y=female,color='orange',legend='female',line_width=2)\nshow(p2)\n","33d2f52f":"suicides.groupby('age').sum().suicides_no","f1257209":"plt.figure(figsize=(10,5))\nsuicides_age=suicides.groupby('age').sum().suicides_no.values\nage=suicides.groupby('age').sum().reset_index().age.values\nsns.barplot(x=age,y=suicides_age)\nplt.title('Number of suicides by age')","e6267d8d":"suicides_age=suicides.groupby(['year','age']).sum().suicides_no\nsuicides_age","bc0efc97":"age15_24=suicides_age.loc[:2015,'15-24 years'].values\nage25_34=suicides_age.loc[:2015,'25-34 years'].values\nage35_54=suicides_age.loc[:2015,'35-54 years'].values\nage5_14=suicides_age.loc[:2015,'5-14 years'].values\nage_above75=suicides_age.loc[:2015,'75+ years'].values","498cec7b":"p3=figure(plot_height=500,plot_width=1000,title='Evolution of number of suicides by age globally',tools='pan,box_zoom')\np3.circle(x=years,y=age35_54,color='darkorchid',size=5)\np3.circle(x=years,y=age25_34,color='turquoise',size=5)\np3.circle(x=years,y=age15_24,color='limegreen',size=5)\np3.circle(x=years,y=age5_14,color='tomato',size=5)\np3.circle(x=years,y=age_above75,color='blue',size=5)\np3.line(x=years,y=age35_54,color='darkorchid',line_width=2,legend='35-54 years')\np3.line(x=years,y=age25_34,color='turquoise',line_width=2,legend='25-34 years')\np3.line(x=years,y=age15_24,color='limegreen',line_width=2,legend='15-24 years')\np3.line(x=years,y=age5_14,color='tomato',line_width=2,legend='5-14 years')\np3.line(x=years,y=age_above75,color='blue',line_width=2,legend='75+ years')\nshow(p3)","b4eee4ba":"suicides.groupby('generation').sum().suicides_no","d2de0578":"plt.figure(figsize=(10,5))\ngenerations=suicides.groupby('generation').sum().suicides_no.reset_index().generation\nsuicides_gen=suicides.groupby('generation').sum().suicides_no.values\nsns.barplot(x=generations,y=suicides_gen)\nplt.xlabel('Generation')\nplt.title('Number of suicides by generation')","09918a0b":"plt.figure(figsize=(10,8))\nsns.heatmap(suicides.corr(),annot=True,cmap=\"BuPu\")","08d3496c":"sns.pairplot(suicides.drop('year',axis=1),hue='sex',palette='bright')","90f3777a":"gdp_year=suicides[suicides.year==2015]['gdp\/year'].drop_duplicates().values\npop=suicides[suicides.year==2015].groupby('country').sum().population.values\nno_suicides=suicides[suicides.year==2015].groupby('country').sum().suicides_no.values\nctry=suicides[suicides.year==2015].groupby('country').sum().reset_index().country.values\n\ns=pd.DataFrame()\ns['country']=ctry\ns['pop']=pop\ns['no_suicides']=no_suicides\ns['gdp_year']=gdp_year\n\ns.head()","d5c886ba":"from bokeh.models import HoverTool\nfrom bokeh.models import ColumnDataSource\nsource=ColumnDataSource(s)\np4=figure(plot_height=500,plot_width=900,title='Identifying countries by population, number of suicides and GDP in 2015',tools='pan,box_zoom,wheel_zoom,reset')\np4.diamond(x='pop',y='no_suicides',size=10,color='green',source=source)\np4.add_tools(HoverTool(tooltips=[('population','@pop'),('number suicides','@no_suicides'),('country','@country'),('GDP','@gdp_year')]))\np4.xaxis.axis_label='Population'\np4.yaxis.axis_label='Number of suicides'\np4.xaxis.axis_label_standoff = 30 # Distance of the xaxis label from the xaxis \nshow(p4)","4407c947":"# 3.Understanding the data","dae480fd":"**Number of suicides per country **","a90000d8":"**Number of suicides by gender**","5efa54b3":"We can also get some economic conclusions from our data.\nThe correlations that we are interested in are :\n1. gdp\/year - population: it's logical that if there are more people in a country GDP will be bigger; 0.71 it's a high positive correlation\n2. suicides_no - population: more people => more suicides\n3. gdp\/year - suicides: big salaries => more people => more suicides","1a521a0c":"**Number of suicides by age**","aa7c6f88":"People with age between 35-54 year comitted suicide the most.","26605466":"How many countries are studied in this dataset?","be2f72bc":"**Identifying countries by population and number of suicides in 2015 with Bokeh**","681251f7":"I will sectionate the figure because the countries with a small number of suicides aren't visible.","8a611e0c":"**Evolution of number of suicides by gender globally**","fab2676c":"The Boomers comitted suicide the most.","750d6710":"Men are 3 times more likely to committ suicide than women.","22d7709d":"**Number of suicides by generation**","a9931dcb":"There is a very big increasing of the number of suicides from the year 1988; the peak is in the 1998-2003, then there is a slow decreasing.","a428a054":"# 1.Loading the libraries","370ee642":"# 5.Vizualising the data","45d9ff09":"I'm gonna change some names of columns for an easier work when I'm gonna use them.","b938d4ca":"# 2.Importing the data","d751d158":"# 4.Cleaning the data","7db89c50":"So the columns are:\n1. country \n2. year\n3. sex \n4. age \n5. suicides_no = the number of males\/ females with age in an interval that committed suicide in the specified year & country. For example, the first row says that 21 males between 15- 24 years from Albania committed suicide in 1987.\n6. population = total males \/ females with age in an interval in the specified year & country. For example, the first row says that in Albania in 1987 there were 312900 of males with age between 15-24 years.\n7. suicides\/100k pop= the number of suicides reported to 100,000 people. The formula is : suicides_no * 100,000\/population\n8. country-year\n9. HDI for year (Human Development Index)= statistic composite index of life expectancy, education, and per capita income indicators, which are used to rank countries into four tiers of human development. A country scores a higher HDI when the lifespan is higher, the education level is higher, and the gross national income (GNI) per capita is higher.\n10. gdp_for_year (Gross Domestic Product)= measures the value of economic activity within a country. Strictly defined, GDP is the sum of the market values, or prices, of all final goods and services produced in an economy during a period of time (in this case, one year).\n11. gdp_per_capita= it's a measure of a country's economic output that accounts for its number of people. It divides the country's gross domestic product by its total population. That makes it the best measurement of a country's standard of living. It tells you how prosperous a country is.\n12. generation: There are 6 generations in our data (I will write the periods for each generation):\n      1. G.I. Generation (or Greatest Generation): 1910-1924 \n      2. Silent: 1925-1945\n      3. Boomers: 1946-1964 \n      4. Generation X:  1965-1979\n      5. Millenials: 1980-1994\n      6. Generation Z: 1995-2012\n           \n ","c5f43151":"Now let's check the correlation between values.","55925bce":"So there are 27820 entries and 12 features. \nThe type of GDP\/year should be int, not string.","41e18635":"There are way too many null values for HDI, and also it's not a very important feature for our future analysis. So we're gonna eliminate it.","ce61925b":"**Evolution of number of suicides by age globally**","a5e8350b":"We observe that in 2016 the number of suicides is very low, so let's check the number of countries studied  this year.","ddf12b83":"**The evolution of number of suicides globally**"}}