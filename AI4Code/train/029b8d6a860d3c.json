{"cell_type":{"85893fe9":"code","4cc846dc":"code","84d29ffa":"code","a470ca9f":"code","a0bab254":"code","6f7b253b":"code","5ed2afec":"code","bf50aa4d":"code","4eb97a53":"code","ffec9bac":"code","9f507078":"code","a1fee4c8":"code","0eac89a6":"code","92580351":"code","fb8806ce":"code","3f50f6e4":"code","2314c5bb":"code","27db2a7c":"code","4db88439":"code","bb5c3687":"code","4077e170":"code","ef8726dc":"code","c31c983d":"code","7678924c":"code","a7a12774":"code","02972aca":"code","6d230589":"code","a5eca366":"code","1721783d":"code","74aaed5e":"code","8a789f9e":"code","42067eee":"code","8ecfcc02":"code","a21800d6":"code","57aa7900":"code","d179e601":"code","9c2ebe82":"code","4ffa305d":"code","79391fb1":"code","6da18157":"code","abc9fd8a":"code","92445141":"code","1d0ce741":"code","301893fd":"code","a59547f9":"code","de8f86b6":"code","a958b9d4":"markdown","9e6e4979":"markdown","12b2bbf9":"markdown","5c520f8b":"markdown","59cce59d":"markdown","6bbccb3a":"markdown","b4047df5":"markdown","aea5c9ef":"markdown","234c8afd":"markdown","f8cd6512":"markdown","6a3e6229":"markdown","32e0c8f1":"markdown","f3f8c5ab":"markdown","04fec330":"markdown"},"source":{"85893fe9":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.offline as py\nimport plotly.express as px\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","4cc846dc":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\npd.options.display.float_format = '{:.2f}'.format\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import roc_auc_score\nfrom sklearn.metrics import plot_roc_curve\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.metrics import classification_report\nfrom sklearn.model_selection import RepeatedStratifiedKFold\nfrom sklearn.metrics import precision_recall_curve","84d29ffa":"df = pd.read_csv('..\/input\/hackathon\/task_2-owid_covid_data-21_June_2020.csv')\ndf.head()","a470ca9f":"guinea = df[(df['location']=='Guinea-Bissau')].reset_index(drop=True)\nguinea.head()","a0bab254":"cases = len(df[df['total_cases'] == 1])\/len(df)*100\nno_cases = len(df[df['total_cases'] == 0])\/len(df)*100\ncases_percentage = [cases,no_cases]","6f7b253b":"fig,ax = plt.subplots(nrows = 1,ncols = 3,figsize = (20,5))\nplt.subplot(1,3,1)\nplt.pie(cases_percentage,labels = ['Cases','No Cases'],autopct='%1.1f%%',startangle = 90,)\nplt.title('Guinea-Bissau Total Cases Percentage')\n\nplt.subplot(1,3,2)\nsns.countplot('total_cases',data = guinea,)\nplt.xticks(rotation=45)\nplt.title('Guinea-Bissau Total Cases')\n\nplt.subplot(1,3,3)\nsns.scatterplot('total_cases_per_million','total_deaths',data = guinea,hue = 'total_cases')\nplt.title('Guinea-Bissau Total Cases Per Million vs Total Deaths w.r.t (with respect to) Total Cases')\nplt.show()","5ed2afec":"sns.heatmap(guinea.corr(),cmap = 'RdBu',cbar = True)","bf50aa4d":"corr = df.corrwith(guinea['total_cases']).sort_values(ascending = False).to_frame()\ncorr.columns = ['Correlations']\nplt.subplots(figsize = (5,25))\nsns.heatmap(corr,annot = True,cmap = 'RdBu',linewidths = 0.4,linecolor = 'black')\nplt.title('Guinea-Bissau Correlation w.r.t Total Cases')","4eb97a53":"sns.heatmap(guinea.isnull(),cmap = 'winter',cbar = False)","ffec9bac":"# Lets first handle numerical features with nan value\nnumerical_nan = [feature for feature in guinea.columns if guinea[feature].isna().sum()>1 and guinea[feature].dtypes!='O']\nnumerical_nan","9f507078":"guinea[numerical_nan].isna().sum()","a1fee4c8":"## Replacing the numerical Missing Values\n\nfor feature in numerical_nan:\n    ## We will replace by using median since there are outliers\n    median_value=df[feature].median()\n    \n    guinea[feature].fillna(median_value,inplace=True)\n    \nguinea[numerical_nan].isnull().sum()","0eac89a6":"# categorical features with missing values\ncategorical_nan = [feature for feature in guinea.columns if guinea[feature].isna().sum()>1 and guinea[feature].dtypes=='O']\nprint(categorical_nan)","92580351":"guinea[categorical_nan].isna().sum()","fb8806ce":"# replacing missing values in categorical features\nfor feature in categorical_nan:\n    guinea[feature] = guinea[feature].fillna('None')","3f50f6e4":"guinea[categorical_nan].isna().sum()","2314c5bb":"guinea = guinea[['total_cases', 'stringency_index','new_cases','new_cases_per_million','total_cases_per_million', 'total_deaths_per_million', 'total_deaths']]\nguinea.head()","27db2a7c":"import imblearn\nfrom collections import Counter\nfrom imblearn.over_sampling import SMOTE\nfrom imblearn.under_sampling import RandomUnderSampler\nfrom imblearn.pipeline import Pipeline\n\nimblearn.__version__","4db88439":"def model(classifier):\n    \n    classifier.fit(x_train,y_train)\n    prediction = classifier.predict(x_test)\n    cv = RepeatedStratifiedKFold(n_splits = 10,n_repeats = 3,random_state = 1)\n    print(\"CROSS VALIDATION SCORE : \",'{0:.2%}'.format(cross_val_score(classifier,x_train,y_train,cv = cv,scoring = 'roc_auc').mean()))\n    print(\"ROC_AUC SCORE : \",'{0:.2%}'.format(roc_auc_score(y_test,prediction)))\n    plot_roc_curve(classifier, x_test,y_test)\n    plt.title('ROC_AUC_PLOT')\n    plt.show()","bb5c3687":"def model_evaluation(classifier):\n    \n    # CONFUSION MATRIX\n    cm = confusion_matrix(y_test,classifier.predict(x_test))\n    names = ['True Neg','False Pos','False Neg','True Pos']\n    counts = [value for value in cm.flatten()]\n    percentages = ['{0:.2%}'.format(value) for value in cm.flatten()\/np.sum(cm)]\n    labels = [f'{v1}\\n{v2}\\n{v3}' for v1, v2, v3 in zip(names,counts,percentages)]\n    labels = np.asarray(labels).reshape(2,2)\n    sns.heatmap(cm,annot = labels,cmap = 'Blues',fmt ='')\n    \n    # CLASSIFICATION REPORT\n    print(classification_report(y_test,classifier.predict(x_test)))","4077e170":"over = SMOTE(sampling_strategy= 0.5)\nunder = RandomUnderSampler(sampling_strategy = 0.1)\nfeatures = guinea.iloc[:,:6].values\ntarget = guinea.iloc[:,6].values","ef8726dc":"steps = [('under', under),('over', over)]\npipeline = Pipeline(steps=steps)\nfeatures, target = pipeline.fit_resample(features, target)\nCounter(target)","c31c983d":"x_train, x_test, y_train, y_test = train_test_split(features, target, test_size = 0.20, random_state = 2)","7678924c":"from sklearn.linear_model import LogisticRegression","a7a12774":"classifier_lr = LogisticRegression(random_state = 0,C=10,penalty= 'l2')","02972aca":"from imblearn.over_sampling import SMOTE\nsmote=SMOTE(\"minority\")\nX,Y=smote.fit_sample(x_train,y_train)","6d230589":"model(classifier_lr)","a5eca366":"model_evaluation(classifier_lr)","1721783d":"X_train = guinea.iloc[:, 2:].values.astype('float64')\ny_train = guinea['total_cases'].values","74aaed5e":"from sklearn.preprocessing import QuantileTransformer\n\ntransformed = pd.DataFrame(QuantileTransformer(output_distribution='normal').fit_transform(X_train))","8a789f9e":"from sklearn.pipeline import make_pipeline\nfrom sklearn.naive_bayes import GaussianNB\n\npipeline = make_pipeline(QuantileTransformer(output_distribution='normal'), GaussianNB())\npipeline.fit(X_train, y_train)","42067eee":"from sklearn.metrics import roc_curve, auc\n\nfpr, tpr, thr = roc_curve(y_train, pipeline.predict_proba(X_train)[:,1])\nplt.plot(fpr, tpr)\nplt.xlabel('False Positive Rate')\nplt.ylabel('True Positive Rate')\nplt.title('Receiver Operating Characteristic Plot', **title_config)\nauc(fpr, tpr)","8ecfcc02":"from sklearn.model_selection import cross_val_score\n\ncross_val_score(pipeline, X_train, y_train, scoring='roc_auc', cv=5).mean()","a21800d6":"#model_evaluation(classifier_svc)","57aa7900":"df1 = pd.read_csv('..\/input\/hackathon\/task_2-Tuberculosis_infection_estimates_for_2018.csv', encoding='utf8')\ndf1.head()","d179e601":"Guinea = df1[(df1['country']=='Guinea-Bissau')].reset_index(drop=True)\nGuinea.head()","9c2ebe82":"sns.countplot(x=\"e_hh_size\",data=Guinea,palette=\"ocean\",edgecolor=\"black\")\nplt.title('Guinea Estimated Household Size', weight='bold')\nplt.xticks(rotation=45)\nplt.yticks(rotation=45)\n# changing the font size\nsns.set(font_scale=1)","4ffa305d":"sns.countplot(x=\"e_prevtx_kids_pct_hi\",data=Guinea,palette=\"autumn\",edgecolor=\"black\")\nplt.title('Guinea Preventive Index Kids under 5y High Bound', weight='bold')\nplt.xticks(rotation=45)\nplt.yticks(rotation=45)\n# changing the font size\nsns.set(font_scale=1)","79391fb1":"df2 = pd.read_csv('..\/input\/hackathon\/task_2-BCG_world_atlas_data-bcg_strain-7July2020.csv', encoding='utf8')\ndf2.head()","6da18157":"guinea_bissau = df2[(df2['country_name']=='Guinea-Bissau')].reset_index(drop=True)\nguinea_bissau.head()","abc9fd8a":"sns.countplot(x=\"vaccination_timing\",data=guinea_bissau,palette=\"flag\",edgecolor=\"black\")\nplt.title('Guinea-Bissau BCG Vacccination Timing', weight='bold')\nplt.xticks(rotation=45)\nplt.yticks(rotation=45)\n# changing the font size\nsns.set(font_scale=1)","92445141":"ls ..\/input\/hackathon\/task_1-google_search_txt_files_v2\/GW\/","1d0ce741":"Guinea_Bissau = '..\/input\/hackathon\/task_1-google_search_txt_files_v2\/GW\/Guinea-Bissau-pt-result-13.txt'","301893fd":"text = open(Guinea_Bissau, 'r',encoding='utf-8',\n                 errors='ignore').read()","a59547f9":"print(text[:2000])","de8f86b6":"#word cloud\nfrom wordcloud import WordCloud, ImageColorGenerator\ntext = \" \".join(str(each) for each in guinea_bissau.country_name)\n# Create and generate a word cloud image:\nwordcloud = WordCloud(max_words=200,colormap='Set3', background_color=\"black\").generate(text)\nplt.figure(figsize=(10,6))\nplt.figure(figsize=(15,10))\n# Display the generated image:\nplt.imshow(wordcloud, interpolation='Bilinear')\nplt.axis(\"off\")\nplt.figure(1,figsize=(12, 12))\nplt.show()","a958b9d4":"#Coronavirus Drugs\u2014To Have and Have Not by Joelle Dountio O.\nAfrica's least developed countries should apply a WTO patent waiver, to import generic versions of future COVID-19 drugs\n\n![](https:\/\/www.thinkglobalhealth.org\/sites\/default\/files\/2020-05\/Joelle.Ofimboudem-CoV-Patents-4.30.20-RTX7EKXB-THREE-TWO.jpg)https:\/\/www.thinkglobalhealth.org\/tag\/guinea-bissau","9e6e4979":"#Feature Selection","12b2bbf9":"#Bissau: Deputies donate 25% of salary to fight Covid-19\n\nThe National People's Assembly of Guinea-Bissau handed over a check for more than 40,000 euros to the High Commission for the Fight against Covid-19 for support in combating the pandemic caused by the new coronavirus.\nGuinean deputies decided to contribute 25 per cent of their salary to help fight Covid-19, donating a total of 27,964,528 cfa francs (about 42,600 euros).\n\n\"I am grateful on behalf of the High Commissioner for the check resulting from the contribution of all the deputies of the Nation to the work of the fight against Covid-19,\" said the high commissioner for the fight against Covid-19, Magda Robalo da Silva.\n\nIn the words of thanks, the former Minister of Health asked the deputies to also contribute to the fight against the pandemic among their constituencies by raising awareness for prevention.\n\n\"Thank you very much on behalf of the Guinean people, whom you represent at the National People's Assembly,\" said Magda Robalo da Silva.\n\nhttps:\/\/translate.google.com.br\/translate?hl=en&sl=pt&u=https:\/\/www.dw.com\/pt-002\/coronav%25C3%25ADrus-na-guin%25C3%25A9-bissau\/t-52892587&prev=search&pto=aue","5c520f8b":"#w.r.t = with respect to","59cce59d":"#There are complaints of lack of conditions in a hospital dedicated to tuberculosis.\n\nIn Bissau, staff and patients at Raoul Follereau Hospital, dedicated to the treatment of tuberculosis, complain about the lack of conditions and protective materials. Hospital administration says that is not so.\n\nOn Monday (20.07), employees boycotted the operation of Raoul Follereau hospital, complaining about the lack of materials and minimum conditions for work, without protective masks and gloves.\n\nThe hospital is the only center specialized in tuberculosis treatment in Guinea-Bissau and is administered by the Italian NGO Aid to Health and Development (AHEAD), which has assumed the guarantee of free consultations, hospitalizations and treatments for patients with tuberculosis, entitled to five meals a day. , all for free.\n\nBut patients admitted to the hospital heard by DW Africa report another reality. They prevented food from leaving home, but they put a liter of lemon in their food from the hospital  and, if they eat it, they feel stomach and chest pain. So, what is the use of preventing food from coming home? prevent us from eating inside, \"says a patient.\n\n\"Not everyone has a mosquito net here, I ordered it at home. What they gave me here is not good. But the breakfast they prepare for us is good and we eat,\" said another patient.\n\n#Government abandons hospitals?\n\nIn Guinea-Bissau, there are several centers specialized in the treatment of different pathologies that are under the tutelage of NGOs or have been abandoned.\n\nDoctor Hedwis Martins asks the Government to assume its responsibilities: \"It is NGOs that help in sustainability, in the administrative functioning and in the functioning of hospital structures\".\n\n\"Government should take over specialized institutions and see them as a source of revenue\u201d, calls on Martins.\n\nThe doctor also defends that \"it is only to organize and equip them, to create conditions so that the analyzes that will be requested are made in the hospital center and the patients can have a decent hospitalization\".https:\/\/translate.google.com.br\/translate?hl=en&sl=pt&u=https:\/\/www.dw.com\/pt-002\/coronav%25C3%25ADrus-na-guin%25C3%25A9-bissau\/t-52892587&prev=search&pto=aue\n","6bbccb3a":"#Handling Missing Values","b4047df5":"#I changed to iloc 6 since there are 7 columns, after feature selection","aea5c9ef":"![](https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn%3AANd9GcTQXRC8iSNx0JbH7N0C_bA-bmOPqbJtVN1gG_3bi0536aQL9LEnM3_5eCRG0r8wOyxo0hMTP4NsQHrM00oac5MNIQ&usqp=CAU&ec=45687378)covid19gb.com","234c8afd":"#Low birth weight infants and Calmette-Gu\u00e9rin bacillus vaccination at birth: community study from Guinea-Bissau\n\nBy Adam Roth , Henrik Jensen, May-Lill Garly, Queba Djana, Ces\u00e1rio Lourenco Martins, Morten Sodemann, Amabelia Rodrigues, Peter Aaby\nPMID: 15194836 DOI: 10.1097\/01.inf.0000129693.81082.a0\n\nIn developing countries, low birth weight (LBW) children are often not vaccinated with Calmette-Gu\u00e9rin bacillus (BCG) at birth. Recent studies have suggested that BCG may have a nonspecific beneficial effect on infant mortality. They evaluated the consequences of not vaccinating LBW (low birth weight) children at birth in Guinea-Bissau.\n\nBetween 1989 and 1999, 7138 children born at the central hospital had a birth weight registered. They assessed BCG coverage until 3 years of age. Data on tuberculin skin test (TST) for 297 children and BCG scar for 1319 children in the study population were reanalyzed for differences between normal birth weight (NBW) children and LBW children. They assessed the effect of early BCG vaccination on mortality to 12 months of age.\n\nAmong LBW children there were 1.5- to 3-fold more unvaccinated individuals than among NBW children up to 4 months of age. There was no overall difference between LBW and NBW children in TST or BCG scarring; LBW children vaccinated early may have had slightly reduced reactions to tuberculin. Among 845 LBW children, 182 had received BCG within the first week of life. Controlling for background factors and censoring at first diphtheria-tetanuspertussis vaccination, measles vaccination or at 6 months of age (whichever came first), the mortality rate ratio for BCG-vaccinated versus -unvaccinated LBW children was 0.17 (95 per cent confidence interval, 0.06-0.49), with an even stronger effect for LBW children vaccinated in the first week of life (mortality rate ratio, 0.07; 95 per cent confidence interval, 0.01-0.62).\n\nThe policy of not vaccinating with BCG at birth had a negative impact on vaccination coverage for LBW children. Early BCG vaccination had no large negative impact on TST and BCG scarring. Mortality was lower for BCG-vaccinated than for unvaccinated LBW children controlling for available background factors. BCG vaccination of LBW children may have a beneficial effect on survival that cannot be explained by protection against tuberculosis. Future studies should examine possible adverse effects from equalizing BCG policy for LBW and NBW children.https:\/\/pubmed.ncbi.nlm.nih.gov\/15194836\/","f8cd6512":"Das War's Kaggle Notebook Runner: Mar\u00edlia Prata   @mpwolke","6a3e6229":"#Covid-19: State of emergency extended until August 24 in Guinea-Bissau\n\nPresident Umaro Sissoco Embal\u00f3 decided to prolong the state of emergency for the seventh time, \"considering the evolution of the epidemiological situation in the country, translated by the increase in the number of confirmed cases\".\n\n\nThe state of emergency ended this Saturday (25.07) at 00:00 local time. The head of state also took into account the fact that the country is in the rainy season, when there is an \"increase in morbidity and mortality in the population\" and when there is \"a significant increase in respiratory infections and malaria\".\n\n\"Although the situation described above deserves special attention, it should be noted that positive results were achieved in the fight against the Covid-19 pandemic thanks to a great and multiple human solidarity. The gains achieved must be maintained, consolidated and increased\", says Umaro Sissoco Embal\u00f3 in the presidential decree released to the press this Saturday.\n\nInternational circulation\n\nThe Guinean President also announced that he decided to lift the suspension of international circulation, taking into account the decision of the Economic Community of West African States (ECOWAS), an organization of which Guinea-Bissau is a part, to open up space for cross-border circulation. .\n\nIn the decree, the head of state maintains the mandatory use of an individual protection mask and respect for physical distance.\n\nUmaro Sissoco Embal\u00f3 declared the state of emergency in the country for the first time in March, after the first cases of infection with the new coronavirus had been confirmed.\n\nGuinea-Bissau, with around two million inhabitants, has almost an accumulated total of 2,000 cases of infections, including 26 fatalities.https:\/\/translate.google.com.br\/translate?hl=en&sl=pt&u=https:\/\/www.dw.com\/pt-002\/coronav%25C3%25ADrus-na-guin%25C3%25A9-bissau\/t-52892587&prev=search&pto=aue","32e0c8f1":"#Multi class classification problem can be solved in different ways:\n\nCreate a binary variable for each class and predict them individually as binary classification after that combine the results but it is not the right choice if we have high number of classes because it takes good processing time. This binary classifier for multiclass can be used with one-vs-all or all-vs-all reduction method. Here you can go with logistic regression, decision tree algorithms.\n\nYou can go with algorithms like Naive Bayes, Neural Networks and SVM to solve multi class problem.\n\nYou can also go with multi layers modeling also, first group classes in different categories and then apply other modeling techniques over it.https:\/\/discuss.analyticsvidhya.com\/t\/which-algorithms-are-good-for-multiclass-classification-problems\/2561\n\nI tried Naive Bayes and SVM and didn't work. I'll have to learn how to deal with binary variables and multilayers.","f3f8c5ab":"#Codes by Tanmay Deshpande https:\/\/www.kaggle.com\/tanmay111999\/handling-imbalanced-datasets-for-high-scores\/comments","04fec330":"#EVALUATION METRICS\n\nFOR IMBALANCED DATASETS, WE CANNOT USE THE TRADITIONAL METRIC LIKE ACCURACY. THIS IS BECAUSE THE DATA IS SKEWED TOWARDS THE MAJORITY CLASS AND THE MODEL WILL FAVOUR ITS PREDICTIONS TOWARDS MAJORITY CLASS. NOW AFTER RESAMPLING, WE HAVE DUPLICATED THE DATA AND ADDED NEW DATA POINTS.THUS USING ACCURACY WOULD BE MISLEADING TO EVALUATE THE MODEL. WE WILL USE THE CONFUSION MATRIX,ROC-AUC GRAPH AND ROC-AUC SCORE TO EVALUATE THE MODEL. ROC-AUC GIVES US THE RELATION ABOUT TRUE POSITIVE & FALSE POSITIVE RATE. WE WILL ALSO USE THE F1 SCORE,RECALL AND PRECISION."}}