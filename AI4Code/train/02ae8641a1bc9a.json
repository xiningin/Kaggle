{"cell_type":{"d03b5b65":"code","5e2bb779":"code","6cfe7ea6":"code","93108eaa":"code","759b66a1":"code","c69c9f71":"code","29f2a05b":"code","a3a81e44":"code","054d5538":"code","4597d65c":"code","88044a93":"code","3fdecb4a":"code","79bee53c":"code","b861cb80":"code","9a3f97bf":"code","06259b26":"code","add524e2":"code","f5297923":"code","72c9b50a":"code","5ec2efb4":"code","d8d8771a":"code","b4687ab8":"code","d2db17d7":"code","2b4d604a":"code","50f84f35":"code","08acaf5a":"markdown","8ce608b4":"markdown"},"source":{"d03b5b65":"import pandas as pd\nimport os","5e2bb779":"!ls ..\/input\/cpe-data","6cfe7ea6":"ACS_variable_descriptions = pd.read_csv(\"..\/input\/cpe-data\/{}.csv\".format(\"ACS_variable_descriptions\"), index_col=0, header=None)","93108eaa":"ACS_variable_descriptions.shape","759b66a1":"ACS_variable_descriptions.head()","c69c9f71":"ACS_variable_descriptions.loc['HC01_VC03']","29f2a05b":"!ls -R ..\/input\/cpe-data\/Dept_11-00091","a3a81e44":"def read_metadata(file):\n    return pd.read_csv(file, index_col=0, header=None)\n    \ndef read_data(file):\n    return pd.read_csv(file, index_col=[0, 1, 2], header=[0,1], na_values=['(X)', '-', '**'])\n\ndef read_prepped(file):\n    return pd.read_csv(file, header=[0,1])\n\ndef ingnore_DS_Store(directory):\n    return filter(lambda f: f != '_DS_Store', os.listdir(directory))\n\ndef collect_info_for_dep (dept_dir):\n    \"\"\"\n    This function collects the '.csv' files into pandas dataframes.\n    The return value is a hash where the keys refer to the original file names.\n    \"\"\"\n    base_dir = \"..\/input\/cpe-data\/{}\".format(dept_dir)\n    data_directories = list(filter(lambda f: f.endswith(\"_data\"), os.listdir(base_dir)))\n    info = {'dept' : dept_dir}\n    assert len(data_directories) == 1, \"found {} data directories\".format(len(data_directories))\n    for dd in data_directories:\n        directory = \"{}\/{}\".format(base_dir, dd)\n        dd_directories = ingnore_DS_Store(directory)\n        #print(dd_directories)\n        for ddd in dd_directories:\n            ddd_directory = \"{}\/{}\".format(directory, ddd)\n            files = list(ingnore_DS_Store(ddd_directory))\n            #print(files)\n            assert len(files) == 2, \"found {} files in {}\".format(len(files), directory)\n            full_file_names = [\"{}\/{}\".format(ddd_directory, file) for file in files]\n            dataframes = [read_metadata(file) if file.endswith('_metadata.csv') else read_data(file) for file in full_file_names]\n            info[ddd] = dict(zip(files, dataframes))\n    prepped_files = list(filter(lambda f: f.endswith(\"_prepped.csv\"), os.listdir(base_dir)))\n    for pf in prepped_files:\n        info[pf] = read_prepped(\"{}\/{}\".format(base_dir, pf))\n    return info","054d5538":"Dept_11_00091_info = collect_info_for_dep('Dept_11-00091')\n\nDept_11_00091_info.keys()","4597d65c":"Dept_11_00091_info['11-00091_ACS_education-attainment'].keys()","88044a93":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_metadata.csv'].info()","3fdecb4a":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_metadata.csv'].head()","79bee53c":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_with_ann.csv'].info()","b861cb80":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_with_ann.csv'].head()","9a3f97bf":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_with_ann.csv'].loc['1400000US25027700100', 'HC01_MOE_VC02']","06259b26":"desc = Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_with_ann.csv'].describe()\ndesc.loc[:, desc.loc['count', :] > 0]","add524e2":"Dept_11_00091_info['11-00091_ACS_education-attainment']['ACS_16_5YR_S1501_with_ann.csv'].shape","f5297923":"# 768 - 606 columns are empty (all values are -NA-)","72c9b50a":"def investigate_dept(dept):\n    print(dept['dept'])\n    print('=' * 20)\n    print(dept.keys())","5ec2efb4":"investigate_dept(Dept_11_00091_info)","d8d8771a":"department_names = [\n    'Dept_11-00091',\n    'Dept_23-00089',\n    'Dept_35-00103',\n    'Dept_37-00027',\n    'Dept_37-00049',\n    'Dept_49-00009',\n]\n\ndepartments = {dep: collect_info_for_dep(dep) for dep in department_names}","b4687ab8":"for dep in departments.keys():\n    investigate_dept(departments[dep])\n    print()","d2db17d7":"!ls -R ..\/input\/cpe-data\/Dept_35-00103","2b4d604a":"departments['Dept_37-00049']['37-00049_UOF-P_2016_prepped.csv']","50f84f35":"departments['Dept_37-00049']['37-00049_UOF-P_2016_prepped.csv'].info()","08acaf5a":"## Thoughts as of this point\n\n* We got demographics of several departments\/districts\/Census Tract.\nFor example, how many educated people live there. Then how many of them are males, and how many are females etc.\nSome numbers were given with confidence margin (e.g. add +\/- 100 to the number).\n* Then we have some maps. Other demonstrated that those geographic resources also contain the location of the stations. Locations are important, I have not touched those yet at all.\n* The 'prepped' files deals with report of arrests \/ violence, and include also geographic location. We did not get 'prepped' files for all departments.\n\n### What's next? Understand locations better to tie the 'prepped' files to the demographic information.... ","8ce608b4":"Fair Accountable and Transparent Policing\n====================="}}