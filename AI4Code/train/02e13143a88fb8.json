{"cell_type":{"df104f4f":"code","b0e7e842":"code","549eeaba":"code","36a2537f":"code","909c7043":"code","dbff0a89":"code","1147c084":"code","a1945afd":"code","d3c2b6e7":"code","6de3ed87":"code","2ce2cbb1":"code","8a9ea538":"code","c37b9431":"code","3b0a966a":"code","09659f39":"code","e9eb92b6":"code","930bd7cd":"code","5d4f4470":"code","6b2bd4cf":"code","542eeac9":"code","0926c204":"code","fc90cf40":"code","370964ac":"code","c30b50f4":"code","f8938a09":"code","bcf6e7bf":"code","903b57a5":"code","bfce932c":"code","b2c29994":"code","a36efccd":"code","4edec26a":"code","d38060f3":"code","5cb042a9":"code","3f512776":"code","5ddf1e33":"code","8480b22c":"code","a2855d17":"code","9a96d6fc":"code","3c10632c":"code","f20606aa":"code","66cb10de":"code","0f1b181d":"code","ea4ce3a3":"code","ae71738a":"code","7cca8c39":"code","9f8d8866":"code","03c7db8c":"code","431f538c":"code","e199fabf":"code","56a494ed":"code","b2d61740":"code","7044d16d":"code","138d57bd":"code","e4201bf5":"code","53c9121f":"code","6a1f31ed":"code","c26668ce":"code","c59456ed":"code","3723fe9a":"code","40899c9e":"code","758f1b05":"code","38ac5b87":"code","5eed86a4":"code","77ce0848":"code","1ee33e7f":"code","83363a67":"code","0e7cf5b6":"code","e7f1f367":"code","a0aaccfc":"code","2abbd2fa":"code","e98489ec":"code","b0181cf4":"code","51840a90":"code","082e07b4":"code","a5fd7759":"code","54fb64b4":"code","4ed8d2ec":"code","c4bcd74f":"code","5ce0ad8d":"code","0a6c85d5":"code","57ff4115":"code","fdaf649d":"code","f0dae75f":"code","020959cd":"code","20d3dc3b":"code","a9e30bce":"code","294524b0":"code","a8d871c6":"code","4faebc51":"code","217054b7":"code","1f6e891a":"code","6f96bbaa":"code","8838ba20":"code","aaa38a88":"code","3a6ca348":"code","7925614b":"code","17f4cc35":"code","824bbde4":"code","80c7b2be":"code","74a1d05a":"code","b88bc8a2":"code","f3ed142a":"code","13b3b926":"code","005f606e":"code","f28add34":"code","82a78768":"code","7e118b95":"code","e1f4ed8a":"code","19958c2b":"code","f06dd5f3":"code","d2da5621":"code","1cb4106e":"code","3aebac91":"code","f53ff5b3":"code","60e61780":"code","645b0ff4":"code","39982c2e":"code","754f2005":"code","0e92cdeb":"code","0106daf1":"code","d8c9c128":"code","1738236f":"code","001ce790":"code","9fd3880c":"code","0559b1bd":"markdown","49ac5fda":"markdown","5fe22b92":"markdown","ac327bf3":"markdown","08fcda0f":"markdown","eb09eddb":"markdown","f11756e6":"markdown","b1f00ea8":"markdown","a54cb44b":"markdown","63ae2458":"markdown","c77b0fd2":"markdown","c9f3f3e9":"markdown","7f800f1f":"markdown","fe3814d2":"markdown","eb8bb6f1":"markdown","8c217b48":"markdown","e2906446":"markdown","63d73a7e":"markdown","9893cba1":"markdown","58f304a8":"markdown","b90f2e73":"markdown","d34168c2":"markdown","be3b11d9":"markdown","ba8b38c7":"markdown","26778db8":"markdown","8585f3bd":"markdown","41f67a7c":"markdown","a666f420":"markdown","0e131d18":"markdown","876416f5":"markdown","d45933b5":"markdown","356baebf":"markdown","68e62d01":"markdown","39712745":"markdown","514e5057":"markdown","d8101657":"markdown","e4b95ac2":"markdown","96bd8769":"markdown","b50a0380":"markdown","3ca1491f":"markdown","b5d477ed":"markdown","ac8bd2f8":"markdown","1b35630f":"markdown","17d97abc":"markdown","2e92b7aa":"markdown","0f68798c":"markdown","8662cd7e":"markdown","b910e6bb":"markdown","61286943":"markdown","68c74d0e":"markdown","6890e800":"markdown","f7b67580":"markdown","7c4cdca7":"markdown","b35cd7f9":"markdown","d671a1c7":"markdown","65915ca7":"markdown","0ddb7444":"markdown","181cb3e9":"markdown","4d70a38d":"markdown","22b0650d":"markdown","20e19900":"markdown","dfaa86c1":"markdown","ed6e4399":"markdown","79b881d0":"markdown","4e404693":"markdown","32964f2b":"markdown","cdaf7346":"markdown","d5f19e20":"markdown","cd9c8e4a":"markdown","dbc383f8":"markdown","7446aa03":"markdown","838cd151":"markdown","b4e021e2":"markdown","5efa15a4":"markdown","2f93bed3":"markdown","a7aedf64":"markdown","b661ea00":"markdown","54aa6135":"markdown","1e9fd304":"markdown","e2e06d16":"markdown","9844ca6b":"markdown","7c02377d":"markdown","f4210e8d":"markdown","e776b599":"markdown","493ca38b":"markdown","f04694bf":"markdown","9d62344b":"markdown","4c4b6342":"markdown","a092978d":"markdown","fa2cc549":"markdown","072dfada":"markdown","dd675ae4":"markdown","9c3b7ba4":"markdown","5bee1acc":"markdown","11dfd945":"markdown","b9a17fba":"markdown","ed66b50c":"markdown","407f18f2":"markdown","367dbd14":"markdown","88425fda":"markdown","7a5b85bc":"markdown","b761c873":"markdown","e5586db2":"markdown"},"source":{"df104f4f":"# Filtering out the warnings\n\nimport warnings\nwarnings.filterwarnings('ignore')","b0e7e842":"# Importing the required libraries\n\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","549eeaba":"# Reading the csv file using 'read_csv'\ninp0 = pd.read_csv('..\/input\/credit-loan-eda-dataset\/Credit_Loan_EDA_Dataset\/application_data.csv')","36a2537f":"# Check the number of rows and columns in the dataframe\ninp0.shape","909c7043":"# Check the column-wise info of the dataframe\ninp0.info(verbose=True,null_counts=True)","dbff0a89":"# Check the summary for the numeric columns \npd.set_option('display.max_columns',200)\ninp0.describe()","1147c084":"#check for missing values\npd.set_option('display.max_rows',None)\ninp0.isnull().sum()","a1945afd":"#did not get good information for null values so check for percentage null values\ninp0.isnull().sum()*100\/len(inp0)","d3c2b6e7":"# Dropping the columns which are having null value percentage more than 50\ninp0= inp0.loc[:,inp0.isnull().mean()*100<=50]","6de3ed87":"# checking the shape after dropping columns\ninp0.shape","2ce2cbb1":"# checking the null value percentage  in each cloumns after dropping columns\nnull_values = inp0.isnull().mean()*100\nnull_values.sort_values(ascending = False).head(30)","8a9ea538":"# There are many unwanted columns in the data which are of no use during this analysis. So deleting it.\n#deleted unwanted columns\nunwanted_cols = ['FLAG_EMP_PHONE', 'FLAG_WORK_PHONE', 'FLAG_CONT_MOBILE', 'FLAG_PHONE',\n          'REGION_RATING_CLIENT_W_CITY', 'DAYS_LAST_PHONE_CHANGE',\n          'FLAG_DOCUMENT_2','REG_REGION_NOT_LIVE_REGION','REG_REGION_NOT_WORK_REGION',\n          'LIVE_REGION_NOT_WORK_REGION','FLAG_DOCUMENT_3', 'FLAG_DOCUMENT_4','FLAG_DOCUMENT_5',\n          'FLAG_DOCUMENT_6','FLAG_DOCUMENT_7','FLAG_DOCUMENT_8','FLAG_DOCUMENT_9','FLAG_DOCUMENT_10',\n          'FLAG_DOCUMENT_11','FLAG_DOCUMENT_12','FLAG_DOCUMENT_13', 'FLAG_DOCUMENT_14',\n         'FLAG_DOCUMENT_15','FLAG_DOCUMENT_16','FLAG_DOCUMENT_17','FLAG_DOCUMENT_18',\n          'FLAG_DOCUMENT_19', 'FLAG_DOCUMENT_20', 'FLAG_DOCUMENT_21']\n\ninp0.drop(columns=unwanted_cols, inplace=True)","c37b9431":"# checking the shape after dropping columns\ninp0.shape","3b0a966a":"# Impute the missing values for the column 'OCCUPATION_TYPE' with mode as it may effect our analysis as the missing percentage is 31%\ninp0.OCCUPATION_TYPE.value_counts()","09659f39":"# Imputing with the mode which is Laborers\ninp0['OCCUPATION_TYPE'] = inp0['OCCUPATION_TYPE'].fillna(inp0['OCCUPATION_TYPE'].mode()[0])","e9eb92b6":"# Checking if there still exist null values in OCCUPATION_TYPE column\ninp0.OCCUPATION_TYPE.isnull().sum()","930bd7cd":"#describe the CNT_CHILDREN variable in inp0.\ninp0.CNT_CHILDREN.describe()","5d4f4470":"#Plotting the box plot for 'CNT_CHILDREN'\nplt.figure(figsize = [8,5])\nsns.boxplot(inp0['CNT_CHILDREN'],color=\"red\")\nplt.show()","6b2bd4cf":"# Removing the children which are greater than 6 which are outiler and it is effecting overall avg\ninp0 = inp0[inp0['CNT_CHILDREN']<=6]","542eeac9":"# Check for the change in variable 'CNT_CHILDREN'\ninp0['CNT_CHILDREN'].value_counts().plot.bar(color='blue')\nplt.show()","0926c204":"#describe the AMT_ANNUITY variable in inp0.\ninp0.AMT_ANNUITY.describe()","fc90cf40":"#Plotting the box plot for 'AMT_ANNUITY'\nplt.figure(figsize = [8,5])\nsns.boxplot(inp0['AMT_ANNUITY'],color=\"red\")\nplt.show()","370964ac":"#describe the 'AMT_INCOME_TOTAL' variable in inp0.\ninp0.AMT_INCOME_TOTAL.describe()","c30b50f4":"#Plotting the box plot for 'AMT_INCOME_TOTAL'\nplt.figure(figsize = [8,5])\nsns.boxplot(inp0['AMT_INCOME_TOTAL'],color=\"red\")\nplt.show()","f8938a09":"#describe the 'AMT_CREDIT' variable in inp0.\ninp0.AMT_CREDIT.describe()","bcf6e7bf":"#Plotting the box plot for 'AMT_CREDIT'\nsns.boxplot(inp0['AMT_CREDIT'],color=\"red\")\nplt.show()","903b57a5":"#describe the 'DAYS_EMPLOYED' variable in inp0.\ninp0.DAYS_EMPLOYED.describe()","bfce932c":"#Plotting the box plot for 'DAYS_EMPLOYED'\nplt.figure(figsize = [8,5])\nsns.boxplot(inp0['DAYS_EMPLOYED'],color=\"red\")\nplt.show()","b2c29994":"#inp1['DAYS_ID_PUBLISH'] = inp1['DAYS_ID_PUBLISH'].abs()\/365\ninp0[['DAYS_BIRTH' ,'DAYS_EMPLOYED' ,'DAYS_REGISTRATION' ,'DAYS_ID_PUBLISH']].describe()","a36efccd":"# we will now convert negative values to positve values using abs() and then convert days into years for better understanding\ndays_cols = ['DAYS_BIRTH' ,'DAYS_EMPLOYED' ,'DAYS_REGISTRATION' ,'DAYS_ID_PUBLISH']\ninp0[days_cols] = inp0[days_cols].abs()\ninp0[days_cols] = inp0[days_cols]\/365\ninp0[days_cols].describe()","4edec26a":"inp0['CODE_GENDER'].value_counts()","d38060f3":"# Routine check for data shape\ninp0.shape","5cb042a9":"#creating the buckets of from 'AMT_INCOME_TOTAL' column.\n\ninp0['income_group']=pd.cut(inp0['AMT_INCOME_TOTAL'],[0,50000,75000,100000,250000,500000,750000,1000000,5000000,90000000000000000000],labels=['< 50K','50k-75k','75k-1Lakh','1Lakh-2.5Lakh','2.5Lakh-5Lakh','5Lakh-7.5Lakh','7.5Lakh-10Lakh','10Lakh-50Lakh','50Lakh+'])","3f512776":"# checking the value percentage\ninp0['income_group'].value_counts(normalize=True)*100","5ddf1e33":"#creating the buckets of from 'DAYS_BIRTH' column.\n\ninp0['age_group'] = pd.cut(inp0['DAYS_BIRTH'],bins=6,labels=['20-30','30-40','40-50','50-60','60-70','70-80'])","8480b22c":"# checking the value percentage\ninp0['age_group'].value_counts(normalize=True)*100","a2855d17":"# Describing the imbalance percentage of 'TARGET' variable\ninp0['TARGET'].value_counts(normalize=True)*100","9a96d6fc":"# Analyzing the 'TARGET' variable\nplt.pie(inp0.TARGET.value_counts(normalize=True)*100,textprops={'size': 'x-large','color':'black'},wedgeprops={'linewidth': 3.0, 'edgecolor': 'white'},\n        labels=['NON-DEFAULTER(TARGET=0)','DEFAULTER(TARGET=1)'],explode=(0,0.10),autopct='%1.f%%')\nplt.title(\"Distribution of TARGET Variable\",fontsize=20)\nplt.show()","3c10632c":"# Dividing the original dataset into two different datasets depending upon the target value\n#For target = 0\nnon_defaulters = inp0[inp0['TARGET']==0]\nnon_defaulters.head()","f20606aa":"# Analyzing the shape\nnon_defaulters.shape","66cb10de":"#For target = 1\ndefaulters = inp0[inp0['TARGET']==1]\ndefaulters.head()","0f1b181d":"# Analyzing the shape\ndefaulters.shape","ea4ce3a3":"# to get the ratio of non_defaulters : defaulters\nratio = non_defaulters.shape[0]\/defaulters.shape[0]\nratio","ae71738a":"corr1 = non_defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY','DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2','EXT_SOURCE_3']].corr()","7cca8c39":"corr1","9f8d8866":"corr2 = defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY','DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2','EXT_SOURCE_3']].corr()","03c7db8c":"corr2","431f538c":"plt.figure(figsize=[19,7])\nplt.subplot(1,2,1)\nsns.heatmap(non_defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY','DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2','EXT_SOURCE_3']].corr(), annot=True,cmap='RdYlGn')\nplt.title('Correlation for Non-Defaulters',fontsize=22)\n\nplt.subplot(1,2,2)\nsns.heatmap(defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY','DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2','EXT_SOURCE_3']].corr(), annot=True,cmap='RdYlGn')\nplt.title('Correlation for Defaulters',fontsize=22)\nplt.show()","e199fabf":"# now we need to find top 10 correlations for non_defaulters\ncorr = non_defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY',\n                  'DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2',\n                  'EXT_SOURCE_3']].corr(method = 'pearson')\ncorr=corr.where(np.triu(np.ones(corr.shape),k=1).astype(np.bool))\ncorr_df=corr.unstack().reset_index()\ncorr_df.columns = ['VAR1','VAR2','CORRELATION']\ncorr_df.dropna(subset=['CORRELATION'],inplace=True)\ncorr_df['CORR_ABS']=corr_df['CORRELATION'].abs()\ncorr_df.sort_values('CORR_ABS', ascending=False).head(10)","56a494ed":"# now we need to find top 10 correlations for defaulters\n# now we need to find top 10 correlations for non_defaulters\ncorr = defaulters[['AMT_GOODS_PRICE','AMT_CREDIT','AMT_INCOME_TOTAL','AMT_ANNUITY',\n                  'DAYS_BIRTH','DAYS_EMPLOYED','DAYS_REGISTRATION','DAYS_ID_PUBLISH','EXT_SOURCE_2',\n                  'EXT_SOURCE_3']].corr(method = 'pearson')\ncorr=corr.where(np.triu(np.ones(corr.shape),k=1).astype(np.bool))\ncorr_df=corr.unstack().reset_index()\ncorr_df.columns = ['VAR1','VAR2','CORRELATION']\ncorr_df.dropna(subset=['CORRELATION'],inplace=True)\ncorr_df['CORR_ABS']=corr_df['CORRELATION'].abs()\ncorr_df.sort_values('CORR_ABS', ascending=False).head(10)","b2d61740":"# We have created the functions so as to make the analysis short rather than writing code for every plot.","7044d16d":"# For Bar Plots\ndef Uni_plot_1(var):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[12,5])\n    plt.subplot(1,2,1)\n    non_defaulters[{var}].value_counts(normalize=True).plot.bar(color = 'limegreen',width = 0.6)\n    plt.xticks(rotation=90)\n    plt.title('Non-Defaulters for '+ var)\n    \n    plt.subplot(1,2,2)\n    defaulters[{var}].value_counts(normalize=True).plot.bar(color='firebrick',width = 0.6)\n    plt.xticks(rotation=90)\n    plt.title('Defaulters for '+ var )\n    plt.show()","138d57bd":"Uni_plot_1('CODE_GENDER')","e4201bf5":"Uni_plot_1('NAME_CONTRACT_TYPE')","53c9121f":"Uni_plot_1('NAME_TYPE_SUITE')","6a1f31ed":"Uni_plot_1('NAME_EDUCATION_TYPE')","c26668ce":"Uni_plot_1('FLAG_OWN_REALTY')","c59456ed":"Uni_plot_1('NAME_FAMILY_STATUS')","3723fe9a":"Uni_plot_1('NAME_HOUSING_TYPE')","40899c9e":"Uni_plot_1('FLAG_OWN_CAR')","758f1b05":"Uni_plot_1('NAME_INCOME_TYPE')","38ac5b87":"# Countplot for 'OCCUPATION_TYPE'\nplt.figure(figsize=(14,5)) \n\nplt.subplot(1,2,1)\nax = sns.countplot(non_defaulters['OCCUPATION_TYPE'])\nplt.title('Non_defaulters for OCCUPATION_TYPE')\nplt.xticks(rotation=90)\n\nplt.subplot(1,2,2)\nax = sns.countplot(defaulters['OCCUPATION_TYPE'])\nplt.title('Defaulters for OCCUPATION_TYPE')\nplt.xticks(rotation=90)\nplt.show()","5eed86a4":"Uni_plot_1('age_group')","77ce0848":"Uni_plot_1('income_group')","1ee33e7f":"Uni_plot_1('CNT_FAM_MEMBERS')","83363a67":"Uni_plot_1('CNT_CHILDREN')","0e7cf5b6":"# Using DISTPLOT\ndef Uni_plot_2(var):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[12,5])\n    plt.subplot(1,2,1)\n    sns.distplot(non_defaulters[{var}],color='darkmagenta')\n    plt.xticks(rotation=90)\n    plt.title('Non-Defaulters for '+ var)\n    \n    plt.subplot(1,2,2)\n    sns.distplot(defaulters[{var}],color='crimson')\n    plt.xticks(rotation=90)\n    plt.title('Defaulters '+ var )\n    plt.show()","e7f1f367":"Uni_plot_2('AMT_CREDIT')","a0aaccfc":"Uni_plot_2('DAYS_EMPLOYED') \n","2abbd2fa":"Uni_plot_2('REGION_POPULATION_RELATIVE')","e98489ec":"# Using BOXPLOT\nplt.figure(figsize=(15,5)) \n\nplt.subplot(1,2,1)\nax = sns.boxplot(non_defaulters['AMT_ANNUITY'],color='green')\nplt.title('Non_defaulters for AMT_ANNUITY')\n\nplt.subplot(1,2,2)\nax = sns.boxplot(defaulters['AMT_ANNUITY'],color='red')\nplt.title('Defaulters for AMT_ANNUITY')\nplt.show()","b0181cf4":"# Using BOXPLOT\nplt.figure(figsize=(15,5)) \n\nplt.subplot(1,2,1)\nax = sns.boxplot(non_defaulters['AMT_GOODS_PRICE'],color='green')\nplt.title('Non_defaulters for AMT_GOODS_PRICE')\n\nplt.subplot(1,2,2)\nax = sns.boxplot(defaulters['AMT_GOODS_PRICE'],color='red')\nplt.title('Defaulters for AMT_GOODS_PRICE')\nplt.show()","51840a90":"def Bi_plot_1(var1,var2):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[15,5])\n    plt.subplot(1,2,1)\n    \n    sns.countplot(data=non_defaulters, x=var1,hue=var2)\n    plt.xticks(rotation=40, ha=\"right\")\n    plt.legend(loc='upper right')\n    plt.title('Client without payment difficulties',fontsize=20)\n    \n    plt.subplot(1,2,2)\n    sns.countplot(data=defaulters, x=var1,hue=var2)\n    plt.xticks(rotation=40, ha=\"right\")\n    plt.legend(loc='upper right')\n    plt.title('Client with payment difficulties',fontsize=20)\n    plt.show()","082e07b4":"Bi_plot_1('CODE_GENDER','income_group')","a5fd7759":"Bi_plot_1('NAME_INCOME_TYPE','income_group')","54fb64b4":"Bi_plot_1('FLAG_OWN_CAR','FLAG_OWN_REALTY')","4ed8d2ec":"Bi_plot_1('NAME_EDUCATION_TYPE','NAME_HOUSING_TYPE')","c4bcd74f":"Bi_plot_1('NAME_EDUCATION_TYPE','NAME_FAMILY_STATUS')","5ce0ad8d":"Bi_plot_1('NAME_CONTRACT_TYPE','NAME_HOUSING_TYPE')","0a6c85d5":"def Bi_plot_2(var1,var2):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[12,5])\n    plt.subplot(1,2,1)\n    sns.barplot(data=non_defaulters, x=var1,y=var2)\n    plt.xticks(rotation=40, ha=\"right\")\n    plt.title('Client without payment difficulties')\n    \n    plt.subplot(1,2,2)\n    sns.barplot(data=defaulters, x=var1,y=var2)  \n    plt.xticks(rotation=40, ha=\"right\")\n    plt.title('Client with payment difficulties')\n    plt.show()","57ff4115":"Bi_plot_2('NAME_HOUSING_TYPE','REGION_POPULATION_RELATIVE')","fdaf649d":"Bi_plot_2('NAME_FAMILY_STATUS','REGION_POPULATION_RELATIVE')","f0dae75f":"Bi_plot_2('CNT_FAM_MEMBERS','REGION_POPULATION_RELATIVE')","020959cd":"def Bi_plot_3(var1,var2):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[12,5])\n    plt.subplot(1,2,1)\n    sns.scatterplot(data=non_defaulters, x=var1,y=var2)\n    plt.title('Client without payment difficulties')\n    \n    plt.subplot(1,2,2)\n    sns.scatterplot(data=defaulters, x=var1,y=var2)  \n    plt.title('Client with payment difficulties')\n    plt.show()","20d3dc3b":"Bi_plot_3('AMT_ANNUITY','AMT_CREDIT')","a9e30bce":"Bi_plot_3('AMT_CREDIT','AMT_GOODS_PRICE')","294524b0":"#importing the previous_application data\ninp1 = pd.read_csv('..\/input\/credit-loan-eda-dataset\/Credit_Loan_EDA_Dataset\/previous_application.csv')\ninp1.head()","a8d871c6":"# Check the number of rows and columns in the dataframe\ninp1.shape","4faebc51":"# Check the column-wise info of the dataframe\ninp1.info()","217054b7":"# Check the summary for the numeric columns \npd.set_option('display.max_columns',100)\ninp1.describe()","1f6e891a":"#check for null\/missing values\ninp1.isnull().sum()*100\/len(inp1)","6f96bbaa":"# Removing all the columns with more than 40% of null values\ninp1 = inp1.loc[:,inp1.isnull().mean()<=0.4]\ninp1.shape","8838ba20":"# For 'NAME_CONTRACT_STATUS' variable\nsns.countplot(inp1['NAME_CONTRACT_STATUS'])\nplt.show()","aaa38a88":"# For 'NAME_CLIENT_TYPE' variable\nsns.countplot(inp1['NAME_CLIENT_TYPE'])\nplt.show()","3a6ca348":"# For 'NAME_CONTRACT_TYPE' variable\nsns.countplot(inp1['NAME_CONTRACT_TYPE'])\nplt.show()","7925614b":"# For 'NAME_PAYMENT_TYPE' variable\nplt.figure(figsize=[13,5])\nsns.countplot(inp1['NAME_PAYMENT_TYPE'])\nplt.xticks(rotation=0)\nplt.show()","17f4cc35":"# For 'NAME_PORTFOLIO' variable\nsns.countplot(inp1['NAME_PORTFOLIO'])\nplt.show()","824bbde4":"# For 'NAME_GOODS_CATEGORY' variable\nplt.figure(figsize=[15,5])\ninp1['NAME_GOODS_CATEGORY'].value_counts(normalize=True).plot.bar(color = 'purple',width = 0.8)","80c7b2be":"inp1.AMT_CREDIT.describe()","74a1d05a":"# For 'AMT_CREDIT' variable\nsns.boxplot(inp1['AMT_CREDIT'])\nplt.show()","b88bc8a2":"# For 'AMT_GOODS_PRICE' variable\nsns.boxplot(inp1['AMT_GOODS_PRICE'])\nplt.show()","f3ed142a":"# For 'AMT_ANNUITY' variable\nsns.boxplot(inp1['AMT_ANNUITY'])\nplt.show()","13b3b926":"#merging the data\nmerged_data = pd.merge(inp0, inp1, how='left', on=['SK_ID_CURR'])","005f606e":"pd.set_option('display.max_columns',200)\nmerged_data.head()","f28add34":"# checking the number of rows and columns\nmerged_data.shape","82a78768":"# Looking for numerical variables\npd.set_option('display.max_columns',200)\nmerged_data.describe()","7e118b95":"def Bi_pre_plot1(var):\n    plt.figure(figsize=[12,5])\n    sns.countplot(x=var, data=merged_data,hue='NAME_CONTRACT_STATUS')\n    plt.legend(loc='upper right')\n    plt.title('Distribution of ' + var  + ' with NAME_CONTRACT_STATUS',fontsize=14)\n    plt.show()","e1f4ed8a":"Bi_pre_plot1('TARGET')","19958c2b":"Bi_pre_plot1('NAME_EDUCATION_TYPE')","f06dd5f3":"Bi_pre_plot1('NAME_INCOME_TYPE')","d2da5621":"Bi_pre_plot1('NAME_PAYMENT_TYPE')","1cb4106e":"Bi_pre_plot1('NAME_CLIENT_TYPE')","3aebac91":"Bi_pre_plot1('NAME_PORTFOLIO')","f53ff5b3":"Bi_pre_plot1('NAME_FAMILY_STATUS')","60e61780":"Bi_pre_plot1('NAME_EDUCATION_TYPE')","645b0ff4":"Bi_pre_plot1('CODE_GENDER')","39982c2e":"Bi_pre_plot1('FLAG_OWN_CAR')","754f2005":"Bi_pre_plot1('FLAG_OWN_REALTY')","0e92cdeb":"def Bi_pre_plot2(var1,var2):\n    sns.set_style('darkgrid')\n    plt.figure(figsize=[12,5])\n    sns.countplot(data=merged_data, x=var1,hue=var2)\n    plt.xticks(ha=\"right\")\n    plt.legend(loc='upper right')\n    plt.title('Distribution of ' + var1 + ' with ' + var2 )\n    plt.show()","0106daf1":"Bi_pre_plot2('NAME_CONTRACT_TYPE_x','NAME_CLIENT_TYPE')","d8c9c128":"plt.figure(figsize=[15,5])\nsns.boxplot(y='AMT_GOODS_PRICE_x', data=merged_data, x='NAME_GOODS_CATEGORY')\nplt.xticks(rotation = 90)\nplt.show()","1738236f":"plt.figure(figsize=[12,5])\nsns.barplot(y='AMT_CREDIT', data=inp1,x='NAME_CONTRACT_STATUS')\nplt.show()","001ce790":"plt.figure(figsize=[12,5])\nsns.scatterplot(y='AMT_ANNUITY_x', data=merged_data, x='AMT_CREDIT_x')\nplt.show()","9fd3880c":"plt.figure(figsize=[12,5])\nsns.scatterplot(y='AMT_GOODS_PRICE_x', data=merged_data, x='AMT_ANNUITY_x')\nplt.show()","0559b1bd":"Repeater Clients applied more loans in Previous application data","49ac5fda":"**Problem Statement:-\n    The loan providing companies find it hard to give loans to the people due to their insufficient or non-existent credit history. Because of that, some consumers use it as their advantage by becoming a defaulter. Suppose you work for a consumer finance company which specialises in lending various types of loans to urban customers. You have to use EDA to analyse the patterns present in the data. \n    This will ensure that the applicants capable of repaying the loan are not rejected.**","5fe22b92":"Clients with high credit default less","ac327bf3":"POS catgeory has most approved applications. While Cash loans are the most refused ones.","08fcda0f":"Observation: Clients with secondary sepcial are taking more loans and alsohaving payment difficulties.","eb09eddb":"Clients who are staying in House \/ apartment with any contract type  default less","f11756e6":"For Numerical Variables","b1f00ea8":"# Imbalance Percentage","a54cb44b":"Observation: We can observe that AMT_ANNUITY_x is stringly co-related with AMT_GOODS_PRICE_x whereas as the AMT_ANNUITY_x increases the goods price can be also seen increasing with less number of goods of clients applying.","63ae2458":"Approved status percentage is more compared to other status","c77b0fd2":"4) AMT_CREDIT","c9f3f3e9":"Clients with married and  having Higer education or secondary\/ secondary special  default less.Clients who are married or civil marriage and secondary\/ secondary default more.","7f800f1f":"3) AMT_INCOME_TOTAL","fe3814d2":"Inference: 'AMT_CREDIT' has outliers as there is a huge difference between the 75% and max value.Also we can see it through the boxplot.","eb8bb6f1":"Clients with contract type 'Cash loans ' applied more loans  in previous application data","8c217b48":"Here Repeater clients are more likely to be approved . but also have refuse and cancel percenatge more. but if we observe that approved percentage also more in new clients and refuse and approved percenatge also less only, so we have concencentrate on new clients .","e2906446":"Female with income group 1lakh-2.5 lakh are less ikely to default. While Males with income group 1lakh-2.5 are more likely to default.","63d73a7e":"The above dataframe shows top 10 correlation for clients with payment difficulties i.e DEFAULTERS","9893cba1":"# 2) For Numerical Variables","58f304a8":"# 2) For Numerical-Numerical Variables","b90f2e73":"We will divide the application dataset into two different dataframes based on target variable's value.  We can see there is a huge difference between the defaulters and non-defaulters.","d34168c2":"Repeater Client with payement type 'Cash loans' are more in number","be3b11d9":"# Handling Negative Values","ba8b38c7":"#we notice that \"DAYS_BIRTH\" , 'DAYS_EMPLOYED', 'DAYS_REGISTRATION' ,'DAYS_ID_PUBLISH' columns have negative values,which is not possible.\nSo we will try to correct this","26778db8":"Inference: 'DAYS_EMPLOYED' are the days before the application the person started current employment.Here a value is observed above 350000 which is an outlier.","8585f3bd":"# Reading the PREVIOUS_APPLICATION Data","41f67a7c":"# Checking the Data frame for outlier values and analyzing them","a666f420":"Most of the loans are approved whose payment type is Cash through the bank and also refused percentage also more in Cash through the bank.","0e131d18":"# Reading the APPLICATION data","876416f5":"Observation: We can notice that the students don't default. The reason could be they are not required to pay during the time they are students.\nWe can also see that the BusinessMen never default.\nMost of the loans are distributed to working class people\nWe also see that working class people contribute 51% to non defaulters while they contribute to 61% of the defaulters. Clearly, the chances of defaulting are more in their case.","d45933b5":"Clients with municipal apartment and staying in more populated region are less default. Clients with office apartment.co-op apartments and staying in less populated region are more default","356baebf":"1) CNT_CHILDREN \n2) AMT_ANNUITY \n3) DAYS_EMPLOYED \n4) AMT_INCOME_TOTAL","68e62d01":"Observation: We can see that clients take more credit than the annuity they have.Also The number of clients decreses with amount annuity and credit increasing.","39712745":"Observation: Number of non-defaulters female are double the count of male clients.In defaulters male have a higher chance of not returning their loans as compared to females.","514e5057":"# 1) For Categorical Variables","d8101657":"Observation: We observed that person with more number of children have more chances of defaulting the loan amount. May be because of the income and number of dependents ratio in the house.Also, A large majority of applicants did not had children when they applied for loan.\n","e4b95ac2":"we can see that goods price is positively correlated with credit amount","96bd8769":"# UNIVARIATE ANALYSIS","b50a0380":" Clients who are having POS Portfolio  applied more loans  in previous application data","3ca1491f":"We can see that the people who were approved for a loan earlier, defaulted less often where as people who were refused a loan earlier have higher chances of defaulting.","b5d477ed":"Here we can observe that there are many outliers in amount credit.","ac8bd2f8":"2) AMT_ANNUITY","1b35630f":"Observation: Most of clients are married, followed by Single\/not married and civil marriage.Married defaulters are more.\n    we can also observe that single \/ not married clients having more percentage for defaulters when compared to non-defaulters , so thers is  risk assicoated with single \/ not married clients   and also Married clients default less","17d97abc":"Observation: Here clients with House\/ apartment are more likely to apply loan. Clients with parents default more, because defaulters percentage is more compared with Non- defaulters.","2e92b7aa":"Observation: Here we can observe that, majority of the clients who applied loan are having 2 family members. Defaulters and Non- Defaulters percentage is same in both.","0f68798c":"# Check for missing values","8662cd7e":"Observation: Majority of clients who applied are having their own House . Defaulters and Non- Defaulters percentage is same in both.","b910e6bb":"Observation: Clients whose contract type is Cash loans are more likely to apply for loan. Cients with Revolving loans can be seen to default less","61286943":"1) CNT_CHILDREN","68c74d0e":"# Binning the values for 'AMT_INCOME_TOTAL' and 'DAYS_BIRTH'","6890e800":"For 'TARGET' variable","f7b67580":"Clients with payment type \u2018Cash through loans\u2018 applied more loans  in previous application data","7c4cdca7":"2) For Numerical-Categorical Variables","b35cd7f9":"Here clients who are staying in House\/ apartment with Higher education or secondary\/secondary special are less likely to default less.","d671a1c7":"1) AMT_INCOME_TOTAL","65915ca7":"# Finding the correlation between different variables for both dataframes with target=1(defaulters) and target=0(non_defaulters)","0ddb7444":"# MERGING DATA of application_data and previous_application_Data","181cb3e9":"Inference: 'AMT_ANNUITY' tells about the loan annuity. Here we observe a value which is greater that 258000 which is surely an outlier.","4d70a38d":"# BIVARIATE ANALYSIS","22b0650d":"Clients with No own car are approved more.","20e19900":"Objectives:-                  \n    This case study aims to identify patterns which indicate if a client has difficulty paying their installments which may be used for taking actions such as denying the loan, reducing the amount of loan, lending (to risky applicants) at a higher interest rate, etc.                    \n    This will ensure that the consumers capable of repaying the loan are not rejected. \n    Identification of such applicants using EDA is the aim of this case study.                      \n    In other words, the company wants to understand the driving factors (or driver variables) behind loan default, i.e. the variables which are strong indicators of default.                 \n    The company can utilise this knowledge for its portfolio and risk assessment.","dfaa86c1":"1) For Categorical Variables","ed6e4399":"Observation: We can observe that customer without payment difficulties having year in between 34 to 54 years , And coustomer with payment difficulties have days employed in between 31 to 50 years.","79b881d0":"Now we have dealt with the >=50% null values, we will now take care of null values which are in less than <=50%. ","4e404693":"Clients who are staying near more populated region with any number of family members have less default.","32964f2b":"Observation: The clients that owns a car are almost a half of the ones that doesn't own one.Majority of clients who applied who don't have car are mostly non-defaulters while same goes with defaulters also.Clients who don't have car are more likely to default.","cdaf7346":"5) DAYS_EMPLOYED","d5f19e20":"Student,Businessmen are less likely to default. While working clients with income 75k-1lakh are slightly more to default.","cd9c8e4a":"Inference: 'AMT_INCOME_TOTAL' tells us about the income of the client. We can observe a value of 117M which is surely an outlier.","dbc383f8":"# BI-VARIATE ANALYSIS","7446aa03":"In Married all status Percentage is more because clients with Married are applying more","838cd151":"# 1) For Categorical-Categorical Variables","b4e021e2":"Clients who tend to have credit amount more tends to get refused for loans.\nBanks should focus less on income type \u2018Working\u2019 as they are having most number of unsuccessful payments.\nClients from housing type \u2018With parents\u2019 are having least number of unsuccessful payments.","5efa15a4":"Working people have their loans approved most following the Commercial associates.","2f93bed3":"# Handling the missing values <=1","a7aedf64":"If Education type is Secondary\/ secondary Special then approved percentage is more .Also Rejection ,Cancelled, Unused offer percentage is also more in Secondary\/ secondary Special because clients with this education type clients are applying more.","b661ea00":"1) AMT_GOODS_PRICE (integer)\n--Since it is a numeric variable, we can impute the values with mean or median.  \n2) EXT_SOURCE_2(integer)\n--Since it is a numeric variable, we can impute the values with mean or median.  \n3) AMT_ANNUITY(float64)\n--Since it is a numeric variable, we can impute the values with mean or median.  \n4) CNT_FAM_MEMBERS(float64)\n--Since it is a numeric variable, we can impute the values with mean or median.  \n3) NAME_TYPE_SUITE(Object)\n--Since 'NAME_TYPE_SUITE' is a categorical variable, we can find mode which is 'Unaccompanied' here, and impute the null values with it.","54aa6135":"3) For Numerical Variables","1e9fd304":"Observation: Clients who are staying near more populated region have less chances of defaulting.","e2e06d16":"Observation: We can observe that the customer without payment difficulties lies in between 0.3 to 0.7 and the customer with payment difficulties lies in between the same as of the without payment 0.3 to 0.7. And also both are having the mid value about 0.5.","9844ca6b":"Observation: The age group 40-50 are more likely to take loans and also the defaulters rate for age group 30-40 is more.We see that 20-30 age group tend to default more often. So they are the riskiest people to loan to.\nWith increasing age group, people tend to default less starting from the age 40. One of the reasons could be they get employed around that age and with increasing age, their salary also increases.","7c02377d":"The above dataframe shows top 10 correlation for clients with non-payment difficulties i.e NON_DEFAULTERS","f4210e8d":"For object variable 'CODE_GENDER', we get XNA values which is not defined. so we can replace XNA with F based on mode value.","e776b599":"# Inferences:","493ca38b":"Analyzing 'NAME_CONTRACT_STATUS' with Different Variables","f04694bf":"Clients with any family status and staying near the more populated region are less default","9d62344b":"The proportion of defaulters is around 8.7%  \nBanks should focus more on income type of \u2018Student\u2019 ,\u2019pensioner\u2019 and \u2018Businessman\u2019 with housing type other than Co-op apartment for successful payments.\nThe bank lends more to females.   \nClients with higher education and older people default less.   \nWe can see that the people who were approved for a loan earlier, defaulted less often where as people who were refused a loan earlier have higher chances of defaulting.   \nClients with age group 20-40 tend to default more.\nClients with income greaer than 7lakh are less to default.\nClients with Higher Education are default less.\nClients who stays in House\/ apartment are default less.\nClients who are staying near more populated region are less default.\nClients with single will default more and married Clients Default less.\n","4c4b6342":"2) DAYS_BIRTH","a092978d":"Observation: Non-defaulters have loan annuity amount nearly between 0 to 650000 while for defaulters it is around 10000 to 35000.","fa2cc549":"Observation: We can see that laborers, Sales Staff and Core staff has highest number of loan applications. Also laborers are having more difficulties in repaying the loan and also the core staff and the sales staff.","072dfada":"Clients with  own house have more number of approved applications.","dd675ae4":"For Categorical Variables","9c3b7ba4":"Observation: For CNT_CHILDREN the 75% value is 1 and the max value is 19. So practically 19 children are nearly impossible. So here we can detect it us an outlier.","5bee1acc":"We can observe that Secondary education clients have the most approved loan and also the count of refused is higher in them as compared to others.","11dfd945":"Inference: Code gender doesn't have any effect on application approval or rejection. The approved chances are more for Female rather than Male and also the refused count for female is greater than Male.\nBut we saw earlier that female have lesser chances of default compared to males. The bank can add more weightage to female while approving a loan amount.","b9a17fba":"# UNIVARIATE ANALYSIS","ed66b50c":"Observation: We can observe that clients with income range 1lakh to 2.5 lakh are applying more for loan.While teh defaulting rate is also more for them. and for the range 75k-1 lkh the defaulters rate is slightly more than non-defaulters.The Very High income group tend to default less often.","407f18f2":"People without payment difficuties take more credit for the annuity that they have.","367dbd14":"Observation: Clients mostly come unaccompanied while applying for loans.","88425fda":"Here Clients with own house and no own car  are more likely to apply loan . Clients with own car are less default","7a5b85bc":"So the ratio of 0:1 is 11.3871\nThis indiactes that for every 1 there are almost 11 number of 0's. This is a higlhy imbalanced data set","b761c873":"# CREDIT EDA CASE STUDY","e5586db2":"Applications are Refused when credit amount is more."}}