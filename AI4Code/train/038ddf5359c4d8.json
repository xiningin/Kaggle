{"cell_type":{"118038a6":"code","5dabd0a6":"code","3f0084f5":"code","b58d9707":"code","99ea2a98":"code","96cf2122":"code","ab4f56ee":"code","287e8e5a":"code","b2efcb9c":"code","3e55bae7":"code","40256a59":"code","e9402830":"code","ef1c8e87":"markdown","a712adb6":"markdown"},"source":{"118038a6":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport seaborn as sns\n\nimport datetime as datetime\nimport matplotlib.dates as dates\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\nfrom contextlib import contextmanager\nfrom time import time\nfrom tqdm import tqdm\nimport lightgbm as lgbm\n\nfrom sklearn.metrics import classification_report, log_loss, accuracy_score\nfrom sklearn.metrics import mean_squared_error\nfrom sklearn.model_selection import KFold","5dabd0a6":"data0 = pd.read_csv(\"..\/input\/covid19-indonesia\/covid_19_indonesia_time_series_all.csv\")\ndata0[-5:]","3f0084f5":"data0['Location'].unique()","b58d9707":"import datetime\nfrom datetime import date\ndate2=[]\nfor item in data0['Date']:\n    item2=item.split('\/')\n    month=int(item2[0])\n    day=int(item2[1])\n    year=int(item2[2])\n    date2+=[datetime.date(year,month,day)]\ndata0['Date2']=date2\ndata0","99ea2a98":"data1=data0.groupby('Date2',as_index=False).sum()\ndata1","96cf2122":"data2=data1[['Date2','New Cases']]\ndata2","ab4f56ee":"data2['positives mean 7-day']=data2['New Cases'].rolling(window=7).mean()\ndata2['positives max 7-day']=data2['New Cases'].rolling(window=7).max()\ndata2['positives min 7-day']=data2['New Cases'].rolling(window=7).min()\ndata2[-5:]","287e8e5a":"fig=make_subplots(specs=[[{\"secondary_y\":False}]])\nfig.add_trace(go.Scatter(x=data2['Date2'],y=data2['positives mean 7-day'],name='positives mean 7-day'),secondary_y=False,)\nfig.add_trace(go.Scatter(x=data2['Date2'],y=data2['positives max 7-day'],name='positives max 7-day'),secondary_y=False,)\nfig.add_trace(go.Scatter(x=data2['Date2'],y=data2['positives min 7-day'],name='positives min 7-day'),secondary_y=False,)\nfig.update_layout(autosize=False,width=700,height=500,title_text=\"New Cases (rolling 7-day) in Indonesia\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Cases\",secondary_y=False)\nfig.show()","b2efcb9c":"col0=data2.columns.to_list()\ncol1=col0+['pm-7','slope']\ndata3=pd.DataFrame(columns=col1)\ndata3[col0]=data2\ndata3","3e55bae7":"n=len(data2)\nfor  i in range(n):    \n    pmi=data3['positives mean 7-day'][i]\n    data3.loc[i+7,'pm-7']=pmi","40256a59":"### Slope value is defined as the following formula. \n# 'pm-7' means 'positives mean 7-day' value 7 days before.\n\ndata3['slope']=(data3['positives mean 7-day']-data3['pm-7'])\/7\ndata4=data3[['Date2','New Cases','positives mean 7-day','pm-7','slope']]\ndata5=data4[510:-7]\n\nprint(data5[['Date2','slope']][0:14])\nprint()\nprint(data5[['Date2','slope']][-14:])","e9402830":"fig=make_subplots(specs=[[{\"secondary_y\":True}]])\nfig.add_trace(go.Scatter(x=data5['Date2'],y=data5['slope'],name='slope'),secondary_y=False,)\nfig.add_trace(go.Scatter(x=data5['Date2'],y=data5['positives mean 7-day'],name='New Cases'),secondary_y='positives mean 7-day')\nfig.update_layout(autosize=False,width=700,height=500,title_text=\"Slope (mean daily increase) of New Cases in Indonesia\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Slope\",secondary_y=False)\nfig.update_yaxes(title_text=\"New Cases\",secondary_y=True)\nfig.show()","ef1c8e87":"### A slope value is a sensitive benchmark for an occurence of infectious explosion in the near future.","a712adb6":"# New Cases rolling 7 days"}}