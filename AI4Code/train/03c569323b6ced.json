{"cell_type":{"3a70d4f1":"code","3761f277":"code","7068c335":"code","e2bd8c9b":"code","527af709":"code","5131e25f":"code","6a3120b9":"code","ed6f2682":"code","8ffa2693":"code","247712a3":"code","753cf889":"code","f909ee05":"code","6f63105a":"code","ab6a9f0d":"code","3e7cb8ca":"code","ef24c7c2":"code","bc4882db":"code","08fc78b7":"code","cfa3caf2":"code","4599ad2f":"code","5ba8a50c":"code","6ed54746":"code","e582b777":"code","a6ef2927":"code","522bd577":"code","201c6c6a":"code","7d15cf1d":"code","eeef4842":"code","f26c842a":"code","e401017d":"code","654cfc95":"code","31778c81":"markdown","a6c3ca43":"markdown","9c8ab3ce":"markdown","dffd01ff":"markdown","f7843cee":"markdown","5cee86da":"markdown","c727a5d5":"markdown","d9e2444e":"markdown","298177b7":"markdown","5123bf1b":"markdown","b4871b29":"markdown","800ce97d":"markdown","12494dbb":"markdown","a6981215":"markdown","0eabdfeb":"markdown","d3e54836":"markdown","a642de32":"markdown","e79e99fc":"markdown"},"source":{"3a70d4f1":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.style as style\n%matplotlib inline\nimport seaborn as sns\n\nstyle.use('seaborn-poster')\nstyle.use(\"fivethirtyeight\")\nplt.rcParams['font.family'] = 'serif'\n\nimport warnings\nwarnings.filterwarnings('ignore')","3761f277":"full_data = pd.read_csv(\"..\/input\/ibm-hr-analytics-attrition-dataset\/WA_Fn-UseC_-HR-Employee-Attrition.csv\")","7068c335":"full_data.head()","e2bd8c9b":"full_data.isnull().sum()","527af709":"full_data.Age.describe()","5131e25f":"full_data.Education.replace({1 : \"Below College\",\n                       2 : \"College\",\n                       3 : \"Bachelors\", \n                       4 : \"Masters\", \n                       5 : \"PhD\"}, inplace = True)","6a3120b9":"for col in full_data.columns:\n    print(col)","ed6f2682":"employee_data = full_data[[\"Age\",\n                        \"Attrition\",\n                        \"BusinessTravel\",\n                        \"Department\",\n                        \"DistanceFromHome\",\n                        \"Education\",\n                        \"EducationField\",\n                        \"OverTime\",\n                        \"Gender\",\n                        \"JobInvolvement\",\n                        \"JobRole\",\n                        \"JobSatisfaction\",\n                        \"MonthlyIncome\",\n                        \"PerformanceRating\",\n                        \"YearsAtCompany\",\n                        \"YearsInCurrentRole\",\n                        \"YearsSinceLastPromotion\"]]","8ffa2693":"employee_data.head()","247712a3":"names = [\"JobInvolvement\", \"JobSatisfaction\", \"PerformanceRating\"]\n\nfor name in names:\n    employee_data[name].replace({1 : \"Low\",\n                                    2 : \"Medium\",\n                                    3 : \"High\",\n                                    4 : \"Very High\"}, inplace = True)\n","753cf889":"for col in employee_data:\n    cardinality = len(pd.Index(employee_data[col]).value_counts())\n    print(employee_data[col].name + \": \" + str(cardinality))","f909ee05":"ax = sns.boxplot(data = employee_data,\n           y = \"Gender\",\n           x = \"MonthlyIncome\",\n           palette = \"muted\")\n\nax.set_xlabel(\"Monthly Income [$ USD]\", labelpad = 25)\nax.set_ylabel(None)\nax.set_title(\"Monthly Income by Gender\", pad = 35)","6f63105a":"ax = sns.histplot(data = employee_data,\n            x = \"Age\",\n            hue = \"Attrition\",\n            palette = \"muted\")\n\nax.set_title(\"Age of Employees\", pad = 45)\nax.set_ylabel(None)\nax.set_xlabel(\"Age in Years\", labelpad = 25)\n\nplt.text(x = 45, y = 110, s =  \"Average age is 37 years\", fontweight = 'semibold')\n","ab6a9f0d":"ax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"No\"].YearsSinceLastPromotion, label = \"Still Employed\", color = \"steelblue\")\nax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"Yes\"].YearsSinceLastPromotion, label = \"Left Company\", color = \"red\")\nax.set_title(\"Years since Last Promotion\", pad = 35)\nax.set_xlabel(\"Years\")\nax.legend()","3e7cb8ca":"ax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"No\"].YearsAtCompany, label = \"Still Employed\", color = \"steelblue\")\nax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"Yes\"].YearsAtCompany, label = \"Left Company\", color = \"red\")\nax.set_title(\"Years at Company\", pad = 35)\nax.set_xlabel(\"Years\")\nax.legend()","ef24c7c2":"ax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"No\"].DistanceFromHome, label = \"Still Employed\", color = \"steelblue\")\nax = sns.kdeplot(x = employee_data.loc[employee_data.Attrition == \"Yes\"].DistanceFromHome, label = \"Left Company\", color = \"red\")\nax.set_title(\"Distance From Home\", pad = 35)\nax.set_xlabel(\"Distance\", labelpad = 25)\nax.legend()","bc4882db":"def plot_stats(column, title, label):\n    \n    fig, ax = plt.subplots(1,2, figsize = (20, 9))\n\n    sns.countplot(ax = ax[0], \n                 data = employee_data.loc[employee_data.Attrition == \"Yes\"],\n                 x = column,\n                 order = ['Low', 'Medium', 'High', 'Very High'])\n\n    sns.countplot(ax = ax[1], \n                 data = employee_data.loc[employee_data.Attrition == \"No\"],\n                 x = column,\n                 order = ['Low', 'Medium', 'High', 'Very High'])\n\n    fig.suptitle(title, fontsize = 25, y = 1.05)\n    ax[0].set_title(\"Left Company\", pad = 35)\n    ax[1].set_title(\"Still Employed\", pad = 35)\n\n    for i in [0,1]:\n        ax[i].set_ylabel(None)\n        ax[i].set_xlabel(label, labelpad = 20)","08fc78b7":"plot_stats(\"JobSatisfaction\", \"Job Satisfaction by Attrition\", \"Job Satisfaction\")","cfa3caf2":"plot_stats(\"JobInvolvement\", \"Job Involvement by Attrition\", \"Job Involvement\")","4599ad2f":"plot_stats(\"PerformanceRating\", \"Performance Rating by Attrition\", \"Performance Rating\")","5ba8a50c":"ax = sns.countplot(data = employee_data,\n                  x = \"Department\",\n                  hue = \"Attrition\",\n                  palette = \"muted\")\n\n\nax.set_title(\"Attrition by Department\", fontsize = 25, pad = 35)\nax.set_xlabel(None)\nax.set_ylabel(None)\n\ndef percent_attrition(column, label):\n    column_df = employee_data.loc[employee_data[column] == label]\n    index  = column_df.index\n    att_df = column_df.loc[column_df.Attrition == \"Yes\"]\n    att_index = att_df.index\n    return (len(att_index) \/ len(index)) * 100\n    \nsales_str = np.str(np.round(percent_attrition(\"Department\",\"Sales\"),2)) + '% Attrition'\nplt.text(x = -0.25 , y = 375, s = sales_str, fontweight = 'semibold')\n\nRD_str = np.str(np.round(percent_attrition(\"Department\", \"Research & Development\"),2)) + '% Attrition'\nplt.text(x = 0.75 , y = 860, s = RD_str, fontweight = 'semibold')\n\nHR_str = np.str(np.round(percent_attrition(\"Department\", \"Human Resources\"),2)) + '% Attrition'\nplt.text(x = 1.78 , y = 100, s = HR_str, fontweight = 'semibold')","6ed54746":"ax = sns.countplot(data = employee_data,\n             x = \"Gender\",\n             hue = \"Attrition\",\n             palette = \"muted\")\n\nax.set_title(\"Attrition by Gender\", fontsize = 25, pad = 35)\nax.set_ylabel(None)\n\nfemale_str = np.str(np.round(percent_attrition(\"Gender\",\"Female\"))) + \"% Attrition\"\nplt.text(x = -0.15, y = 545, s = female_str, fontweight = \"semibold\")\n\nmale_str = np.str(np.round(percent_attrition(\"Gender\",\"Male\"))) + \"% Attrition\"\nplt.text(x = .85 , y = 760, s = male_str, fontweight = \"semibold\")","e582b777":"employee_data.loc[employee_data.Department == \"Res\"].JobRole.unique()","a6ef2927":"fig, ax = plt.subplots(1,1, figsize = (12, 20))\n\nsns.countplot(data = employee_data,\n            y = \"JobRole\",\n            hue = \"Attrition\",\n            palette = \"muted\")\n\nax.set_title(\"Attrition by Job Role\", pad = 35, fontsize = 25)\nax.set_ylabel(None)\n\ndef plot_per(column, label, x, y):\n    string = np.str(np.round(percent_attrition(column, label),2)) + \"% Attrition\"\n    plt.text(x = x, y = y, s = string, fontweight = \"semibold\")\n    \nplot_per(\"JobRole\", \"Sales Executive\", 100, -0.19)\nplot_per(\"JobRole\", \"Research Scientist\", 100, .82)\nplot_per(\"JobRole\", \"Laboratory Technician\", 100, 1.85)\n\nplot_per(\"JobRole\", \"Sales Representative\", 55, 5.85)","522bd577":"salesrep_df = employee_data.loc[employee_data.JobRole == \"Sales Representative\"]\nlab_df = employee_data.loc[employee_data.JobRole == \"Laboratory Technician\"]\nsalesex_df = employee_data.loc[employee_data.JobRole == \"Sales Executive\"]\nresearch_df = employee_data.loc[employee_data.JobRole == \"Research Scientist\"]","201c6c6a":"fig, ax = plt.subplots(2,2, figsize = (30,30))\n\nsns.kdeplot(ax = ax[0,0], data = salesrep_df.loc[salesrep_df.Attrition == \"Yes\"],\n                 x = \"Age\",\n                label = \"Left Company\",\n                color = \"red\")\nsns.kdeplot(ax = ax[0,0], data = salesrep_df.loc[salesrep_df.Attrition == \"No\"],\n                 x = \"Age\",\n                label = \"Still Employed\",\n                color = \"steelblue\")\n\nax[0,0].legend()\nax[0,0].set_title(\"Age of Sales Representatives\", fontsize = 25, pad = 35)\n\nsns.kdeplot(ax = ax[0,1], data = lab_df.loc[lab_df.Attrition == \"Yes\"],\n                 x = \"Age\",\n                label = \"Left Company\",\n                color = \"red\")\nsns.kdeplot(ax = ax[0,1], data = lab_df.loc[lab_df.Attrition == \"No\"],\n                 x = \"Age\",\n                label = \"Still Employed\",\n                color = \"steelblue\")\n\nax[0,1].legend()\nax[0,1].set_title(\"Age of Lab Tecnicians\", fontsize = 25, pad = 35)\n\nsns.kdeplot(ax = ax[1,0], data = salesex_df.loc[salesex_df.Attrition == \"Yes\"],\n                 x = \"Age\",\n                label = \"Left Company\",\n                color = \"red\")\nsns.kdeplot(ax = ax[1,0], data = salesex_df.loc[salesex_df.Attrition == \"No\"],\n                 x = \"Age\",\n                label = \"Still Employed\",\n                color = \"steelblue\")\n\nax[1,0].legend()\nax[1,0].set_title(\"Age of Sales Executive\", fontsize = 25, pad = 35)\n\nsns.kdeplot(ax = ax[1,1], data = research_df.loc[research_df.Attrition == \"Yes\"],\n                 x = \"Age\",\n                label = \"Left Company\",\n                color = \"red\")\nsns.kdeplot(ax = ax[1,1], data = research_df.loc[research_df.Attrition == \"No\"],\n                 x = \"Age\",\n                label = \"Still Employed\",\n                color = \"steelblue\")\n\nax[1,1].legend()\nax[1,1].set_title(\"Age of Research Scientists\", fontsize = 25, pad = 35)","7d15cf1d":"print(\"Total number of Sales Executives that contribute to attrition: \", salesex_df.loc[salesex_df.Attrition == \"Yes\"].index.size)","eeef4842":"def Demographics(df, title):\n    \n    fig, ax = plt.subplots(2,2, figsize = (20,25))\n    sns.histplot(ax = ax[0,0], data = df.loc[df.Attrition == \"Yes\"],\n                     x = \"YearsSinceLastPromotion\",\n                     color = \"steelblue\")\n    sns.countplot(ax = ax[0,1], data = df.loc[df.Attrition == \"Yes\"],\n                 x = \"JobSatisfaction\",\n                 order = [\"Low\", \"Medium\", \"High\", \"Very High\"],\n                 palette = \"muted\")\n    sns.scatterplot(ax = ax[1,0], data = df,\n               y = \"MonthlyIncome\",\n               x = \"YearsAtCompany\",\n               hue = \"Attrition\",\n               hue_order = [\"Yes\", \"No\"],\n               palette = \"muted\")\n    sns.countplot(ax = ax[1,1], data = df.loc[df.Attrition == \"Yes\"],\n                     x = \"OverTime\",\n                     order = [\"Yes\", \"No\"],\n                     color = \"seagreen\")\n\n    fig.suptitle(title, fontsize = 25, y = 0.95)\n\n    def axis_titles(ax, title, x, y):\n        ax.set_title(title, fontsize = 25, pad = 30)\n        ax.set_xlabel(x, fontsize = 20, labelpad = 20)\n        ax.set_ylabel(y, fontsize = 20, labelpad = 20)\n        \n    axis_titles(ax[0,0], \"Years Since Last Promotion\", \"Years\", None)\n    axis_titles(ax[0,1], \"Job Satisfaction\", None, None)\n    axis_titles(ax[1,0], \"Monthly Income vs. Years at Company\", \"Years at Company\", \"Monthly Income [$USD]\")\n    axis_titles(ax[1,1], \"Over Time\", None, None)\n\nDemographics(salesex_df, \"Sales Executives Attrition Demographic Breakdown\")","f26c842a":"Demographics(salesrep_df, \"Sales Representitives Attrition Demographic Breakdown\")","e401017d":"Demographics(lab_df, \"Lab Technitian Attrition Demographic Breakdown\")","654cfc95":"Demographics(research_df, \"Research Scientists Attrition Demographic Breakdown\")","31778c81":"As expected most of the employees who leave the company are young in comparison to those who are still employed. The only exception is in the Sales Excecutive category where we see a large density of 50-60 year olds leaving the company.","a6c3ca43":"For sales representatives many report medium job satisfaction and have spent less than 6 years with the company. ","9c8ab3ce":"For research scientists it is very apparent that many who leave the company have worked over time. We can also observe that many have gone between 3-5 years without a promotion. Both of these could be factors into attrition. ","dffd01ff":"Interestingly, employees who commute a longer distance to work seem to contribute a large amount to attrition. This is a likely reason for attrition.","f7843cee":"We can see that the job roles with the most attrition include Sales Representitive, Laboratory Technition, Sales Executive, and Research Scientist. ","5cee86da":"The first thing I will look for is any disparities between pay by gender.","c727a5d5":"Employees who leave the company dont seem to spend a long time with the company.","d9e2444e":"# Introduction\n\nThis notebook serves as a case study into IBM HR employee attrition data. The main project task for this dataset is to better understand what employee demographics contribute the most to attrition and better understand employee attrition behavior.\n\nPlease provide any suggestions or questions about this notebook in the comments below :)","298177b7":"# Conclusions\n\nFrom my analysis I have determined four job roles within the company that have the highest percentages of attrition. The factors that may have attributed to attrition have been detailed above. \n\nA few courses of action for this company to take include\n* Focus on employees within the Sales department working over time and those with low job satisfaction ratings\n* Focus on employees with a longer distance from home, they might be susceptible to attrition\n* Many sales executives that leave the company are older (~50 years), focus on this group and their role within the company\n* Many Research Scientists that leave the company work overtime, focus on those working over time to make sure they are not burning out","5123bf1b":"As expected, employees who report low Job satisfaction contribute to attrition. However we see the most amount of attrition from employees who report a high level of Job satisfaction.","b4871b29":"This dataset is relatively clean, so little data cleaning will be required.","800ce97d":"Seems as if the majority of employees who leave the company are less than 40 years old.","12494dbb":"Attrition is relatively even between genders.","a6981215":"We can see that one possibility for attrition from Sales Executives is low job satisfaction. There doesn't seem to be a correlation between attrition and low pay and long tenure. Many of the sales executives who leave the company have only gone a few years without promotion so that doesn't seem to be a likely reason. Interestingly, a majority of sales executives who leave the company work over time. This could also be a reason for attrition.","0eabdfeb":"I won't need to use all the columns in this dataset. Here I will create a new dataframe to hold only the data I wish to analyze.","d3e54836":"The Sales department has the largest percentage of attrition. ","a642de32":"Lets explore the demographics of each of thes job roles.","e79e99fc":"Factors for attrition here are difficult to determine. We do see a large amount of low job satisfaction ratings, however that is expected of all employees who leave the company. Further analysis into this group may be required."}}