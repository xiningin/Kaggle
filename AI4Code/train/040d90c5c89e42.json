{"cell_type":{"2f1b8159":"code","ea760de3":"code","01edc4dd":"code","0624769a":"code","01a81cc8":"code","922c5419":"markdown"},"source":{"2f1b8159":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport pydicom\nfrom tqdm import tqdm\n\nimport os","ea760de3":"BASE_PATH = '\/kaggle\/input\/rsna-intracranial-hemorrhage-detection\/'\nTRAIN_DIR = 'stage_1_train_images\/'\nTEST_DIR = 'stage_1_test_images\/'","01edc4dd":"def generate_df(base, files):\n    train_di = {}\n\n    for filename in tqdm(files):\n        path = base + filename\n        dcm = pydicom.dcmread(path)\n        all_keywords = dcm.dir()\n        ignored = ['Rows', 'Columns', 'PixelData']\n\n        for name in all_keywords:\n            if name in ignored:\n                continue\n\n            if name not in train_di:\n                train_di[name] = []\n\n            train_di[name].append(dcm[name].value)\n\n    df = pd.DataFrame(train_di)\n    \n    return df","0624769a":"train_files = os.listdir(BASE_PATH + TRAIN_DIR)\ntrain_df = generate_df(BASE_PATH + TRAIN_DIR, train_files)\n\ntest_files = os.listdir(BASE_PATH + TEST_DIR)\ntest_df = generate_df(BASE_PATH + TEST_DIR, test_files)","01a81cc8":"train_df.to_csv('train_metadata.csv')\ntest_df.to_csv('test_metadata.csv')","922c5419":"# About this kernel\n\nThis kernel generates the metadata of the files (i.e., the information from the DICOM files), so you can perform analysis by directly using this kernel as an input.\n\nNote: \"SOP Instance UID\" matches the file names."}}