{"cell_type":{"0790f6e2":"code","2dc8ab48":"code","b98a9ebd":"code","ce183ce8":"code","a9b2a9ef":"code","0967b3a8":"code","c41b2ca0":"code","e5934958":"code","91104920":"code","dc22df31":"code","d1fc835f":"code","f8ad6b4b":"code","43c329d2":"code","cc352518":"code","c097a30e":"code","ff6062e4":"code","9250b800":"code","93d6e345":"code","e5503780":"code","5a01d812":"code","9295bf66":"code","bd067f8f":"code","8d0b1224":"code","330f5673":"code","79c4b6e8":"code","b1df36e0":"code","0c626c1d":"code","2b3b0065":"code","99b727d5":"code","9f244fc6":"code","711a7ecf":"code","c78a1067":"code","7edddf2e":"code","7df78c89":"code","5c80e5bf":"code","add71953":"code","358a565b":"code","fc03bd90":"code","dca33bfc":"code","5fa50ac7":"code","fef73417":"code","1044d797":"code","dbdc9af3":"code","f5b499dc":"code","cf59f00f":"code","6e0678f6":"code","d121085a":"code","5efb0284":"code","cc84632f":"code","0d60fd99":"code","18c20ccf":"code","00f43a48":"code","51e52352":"code","10a1ca0c":"code","04779771":"code","da521d7a":"code","7d039af8":"code","4f00d0eb":"code","bef2f22f":"code","4ecb8135":"code","07adbf36":"code","e8423a11":"code","0d12d85e":"code","7a3b2631":"code","3859f8e6":"code","e7b25183":"code","9995eb37":"code","14a1eb60":"code","5380863b":"code","5098b66a":"code","07acd6ae":"code","f4e33d8b":"code","3080dc68":"code","491c1da0":"code","4a571c15":"markdown","676054c6":"markdown","d550144c":"markdown","522213de":"markdown","4f552c21":"markdown","4ecb6c2f":"markdown","9047c6b4":"markdown","fef3f549":"markdown","2889ad4a":"markdown","bba64e9d":"markdown","386a75de":"markdown","5b33faff":"markdown","a807d90b":"markdown","cef17d9a":"markdown","ebf61d72":"markdown","c59c5d41":"markdown","12ab8bdf":"markdown","d6d608ab":"markdown","0f08c193":"markdown","6083e7ec":"markdown","5e80891a":"markdown","101c6570":"markdown","e846c3dd":"markdown","08ef1a13":"markdown","9d1e1fec":"markdown","ff345917":"markdown","d5f789e8":"markdown","e61fafc0":"markdown","30be79a0":"markdown","96faa514":"markdown","5465cfb9":"markdown","e6f094c6":"markdown","be12698d":"markdown","3246ec0d":"markdown","1972a9e6":"markdown","952c25bc":"markdown","256df4b0":"markdown","f8a4a2bb":"markdown","a2b9cad0":"markdown","ccbebaaa":"markdown","01754d84":"markdown","4cecf591":"markdown","c2c03484":"markdown","61cb6711":"markdown","a8f80f4f":"markdown","99610282":"markdown","95a7163c":"markdown","bb3849a5":"markdown","328c161a":"markdown","17e0e311":"markdown","d5b35ee9":"markdown","9490e211":"markdown","823b5185":"markdown","25554c87":"markdown","42cec1a3":"markdown","a84d2b7d":"markdown","dc92059f":"markdown","c308d1d8":"markdown","f1ec7a62":"markdown","129cfd70":"markdown","21f32ab5":"markdown","9226e18b":"markdown","7249cb4d":"markdown","720ce08c":"markdown","a2a4fc66":"markdown","7c71ff3e":"markdown","8bf0729f":"markdown","5240ce34":"markdown","7ae1cdf0":"markdown","989532b1":"markdown","b7429bed":"markdown","c112a945":"markdown","f1b264b8":"markdown"},"source":{"0790f6e2":"# Import necessary libraries and packages\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","2dc8ab48":"# load dataset to a pandas dataframe\ndf = pd.read_csv('..\/input\/noshowappointments\/KaggleV2-May-2016.csv')","b98a9ebd":"# view top of dataset\ndf.head()","ce183ce8":"df.sample(5)","a9b2a9ef":"# view number of rows and columns\nprint(f'Dataset has {df.shape[0]} rows and {df.shape[1]} columns')","0967b3a8":"df.describe()","c41b2ca0":"# basic stats of the data\ndf.describe()","e5934958":"# general info\ndf.info()","91104920":"# view column data types\ndf.dtypes","dc22df31":"# Check for duplicate rows\ndf.duplicated().sum()","d1fc835f":"df.PatientId.duplicated().sum()","f8ad6b4b":"df.AppointmentID.duplicated().sum()","43c329d2":"df.query('Age < 0')","cc352518":"# view number of unique entries per column\ndf.nunique()","c097a30e":"# # Let's see what these unique values in each column look like.\n\nfor col in df.iloc[:, np.r_[2,5,7:14]].columns:\n    print(f\"{col}   ===>  \", sorted(df[f'{col}'].unique()), '\\n')","ff6062e4":"\nlabels = ['patient_id', 'appointment_id', 'gender', 'scheduled_day', 'appointment_day','age',\n          'neighbourhood', 'scholarship', 'hypertension','diabetes', 'alcoholism',\n          'handicap', 'sms_received', 'status']\ndf.columns = labels","9250b800":"df.columns","93d6e345":"df.scheduled_day = pd.to_datetime(df.scheduled_day)\ndf.appointment_day = pd.to_datetime(df.appointment_day)","e5503780":"df['patient_id'] = df['patient_id'].astype('int64')\ndf['patient_id'] = df['patient_id'].astype('str')","5a01d812":"df['gender'] = df['gender'].astype('category')\ndf['sms_received'] = df['sms_received'].astype('category')\ndf['hypertension'] = df['hypertension'].astype('category')\ndf['status'] = df.status.astype('category')","9295bf66":"df.status.cat.rename_categories({'No':'Show','Yes':'No Show'}, inplace = True)\n\n#similarly\ndf.gender.cat.rename_categories({'F':'Female','M':'Male'}, inplace = True)\ndf.hypertension.cat.rename_categories({0:'Not Hypertensive', 1:'Hypertensive'}, inplace = True)\ndf.sms_received.cat.rename_categories({0:'Not Received', 1:'Received'}, inplace = True)","bd067f8f":"df.dtypes","8d0b1224":"df.drop(df.query('age == -1').index, axis=0, inplace=True)","330f5673":"## To confirm that worked\ndf.query('age == -1')","79c4b6e8":"df['waiting_days'] = (df.appointment_day - df.scheduled_day).abs().dt.days\ndf.waiting_days.head(8)","b1df36e0":"df['age_range'] = pd.cut(df.age, labels = ['0 - 4','5 - 14','15 - 24', '25 - 44',\n                            '45 - 64', '65 - 115'], bins = [-1,5,15,25,45,65,116])\n\ndf['wait_category'] = pd.cut(df.waiting_days, bins=[-1,0,7,30,90,180], include_lowest=True,\n                         labels=['no_wait','1_week','1_month','3_months','6_months'])\n","0c626c1d":"df_copy = df.copy()\ndf_copy.head()","2b3b0065":"for i,j in enumerate(df.columns):\n    print(i,j, end='\\t')","99b727d5":"df = df.iloc[:, np.r_[0,2:6,8,12:17]]\ndf.head()","9f244fc6":"def feature_rel_plot(data, kind, var1=None, var2=None, var3=None, var4=None, var5=None, col=0):\n    '''\n    Creates a plot that shows relationship between features in a dataframe\n\n    Inputs:\n\n    data:-          dataframe\n    kind:-          str; the kind of plot being made (\"count\",\u201cpoint\u201d, \u201cbar\u201d, \u201cstrip\u201d, \u201cswarm\u201d,\n                    \u201cbox\u201d, \u201cviolin\u201d, or \u201cboxen\u201d, etc)\n    var1,var2,...   :-  the columns\/variables to be plotted\n\n    '''\n    f = plt.figure(figsize=(15,15));\n    sns.set_style(\"darkgrid\");\n\n    if kind == 'count':\n        [x,hue,col,row] = [var1,var2,var3,var4]\n        ax = sns.catplot(data=data, kind=kind, x=x, y=None, hue=hue, col=col, row=row, height=6, aspect=1.3);\n        ax.set(ylabel='Number of appointments');\n\n    else:\n        [x,y,hue,col,row] = [var1,var2,var3,var4,var5]\n        ax = sns.catplot(data=data, kind=kind, x=x, y=y, hue=hue, col=col, row=row, height=6, aspect=1.3);\n\n    features = list(filter(lambda x: x is not None, [var1,var2,var3,var4,var5]))\n    ax.fig.subplots_adjust(top=0.9);\n    ax.fig.suptitle((f\"Relationship Between Number of Appointments and ({', '.join(features)})\").upper(), fontsize=16);\n\n    return","711a7ecf":"df.groupby('gender').gender.count()","c78a1067":"# it would be nice to see the above numbers visually\nfeature_rel_plot(df, 'count', 'gender')","7edddf2e":"gender_percent = df.groupby('gender').gender.count()*100\/df.gender.count()\nprint(f'Women amount to {gender_percent.Female:.0f}% while men amount to {gender_percent.Male:.0f}%')","7df78c89":"pat_by_gender = df.groupby(['patient_id', 'gender']).count().age","5c80e5bf":"pat_by_gender = pat_by_gender.reset_index()","add71953":"pat_by_gender.dropna(inplace=True)\npat_by_gender = pat_by_gender.groupby('gender').age.count()\npat_by_gender","358a565b":"pat_by_gender.sum() == df.patient_id.nunique()","fc03bd90":"percent = pat_by_gender\/pat_by_gender.sum()\nprint(f' The dataset contains {percent.Male:.0%} male patients and {percent.Female:.0%} female patients.')","dca33bfc":"# To visualise this with a bar chart\npat_by_gender.plot(kind='bar')\nplt.ylabel('Number of patients')\nplt.title('Number of patients by gender')","5fa50ac7":"# visualise with pie chart\npat_by_gender.plot(kind='pie', figsize=(6,7))\nplt.title('Number of patients by gender')\nplt.ylabel(None);","fef73417":"gs_counts = df.groupby(['status', 'gender']).status.count()\ngs_counts","1044d797":"# Let's visualise this\nfeature_rel_plot(df, 'count', 'status', 'gender')","dbdc9af3":"total_gender = df.groupby('gender').count().iloc[:, 0]\nproportions = gs_counts\/total_gender\nproportions = proportions.reset_index().rename({0:'proportions'}, axis=1)\nproportions","f5b499dc":"# Let's visualise the proportions\nfeature_rel_plot(proportions.reset_index(), 'bar', 'status', 'proportions', 'gender')","cf59f00f":"df.waiting_days.describe()","6e0678f6":"df.groupby('wait_category').count().iloc[:,0]","d121085a":"feature_rel_plot(df, 'count', 'wait_category')","5efb0284":"# Show and No Show counts for each wait_category grouping\ndf.groupby(['wait_category']).status.value_counts()","cc84632f":"# Plot\nfeature_rel_plot(df, 'count', 'wait_category', 'status')","0d60fd99":"# I'll switch up the axes to get a better view of the trend\ndf.groupby(['status']).wait_category.value_counts()","18c20ccf":"# Plot the above\nfeature_rel_plot(df, 'count', 'status', 'wait_category')","00f43a48":"df.groupby(['wait_category','status']).gender.value_counts()","51e52352":"feature_rel_plot(df, 'count', 'wait_category', 'status', 'gender')","10a1ca0c":"# I'll switch up the axes again as before to get a better view\nfeature_rel_plot(df, 'count', 'status', 'wait_category', 'gender')","04779771":"df.groupby(['wait_category']).age.mean()","da521d7a":"feature_rel_plot(df, 'bar', 'wait_category', 'age')","7d039af8":"# histogram showing the age distribution with respect to status(show or no show).\ndf.groupby('status').age.hist(label=['Show', 'No Show'])\nplt.title('Distribution of Patients by Age ')\nplt.ylabel('Number of appointments')\nplt.xlabel('Age')\nplt.legend()","4f00d0eb":"# Overall age distribution with a countplot comparing the Show and No Show trends\nfeature_rel_plot(df, 'count', 'age', 'status')","bef2f22f":"feature_rel_plot(df, 'box', 'age')","4ecb8135":"feature_rel_plot(df, 'count', 'age_range')","07adbf36":"# Here are the actual values from the value counts in the bar chart above\ndf.age_range.value_counts()","e8423a11":"df.groupby('gender').age.mean()","0d12d85e":"feature_rel_plot(df, 'bar', 'gender', 'age')","7a3b2631":"df.groupby('status').age_range.value_counts()","3859f8e6":"feature_rel_plot(df, 'count', 'age_range', 'status')","e7b25183":"df.sms_received.value_counts()","9995eb37":"# visualise the numbers above\nfeature_rel_plot(df, 'count', 'sms_received')","14a1eb60":"# Here are the actual numbers\ndf.groupby('status').sms_received.value_counts()","5380863b":"# visualisation of the above numbers\nfeature_rel_plot(df, 'count', 'status', 'sms_received')","5098b66a":"# number of hypertensive and non-hypertensive patients for both show and no show categories\ndf.groupby('status').hypertension.value_counts()","07acd6ae":"# plot to visualise the numbers above\nfeature_rel_plot(df, 'count', 'hypertension')","f4e33d8b":"df.groupby('hypertension').age.mean()","3080dc68":"# visualise the mean ages\nfeature_rel_plot(df, 'bar', 'hypertension', 'age')","491c1da0":"feature_rel_plot(df, 'count', 'hypertension', 'status')","4a571c15":"<a id='wrangling'><\/a>\n## Data Wrangling  <br>\n\nIn this section, I'll proceed to clean the data, trim where necessary, as well as deal with missing values or weird values.\n","676054c6":"From the two charts above, the overall pattern of values remains the same for both genders.\nWe can conclude that gender does not really influence the relationship between _status_ and _wait_category_. The Values for females are generally higher, most likely because there are much more females than males in the dataset.\n\nI also want to see how the waiting time relates to the age of the patient. I'll group the appointments by _wait_category_ and get the average for each group, and visualise this on a bar chart.","d550144c":"On average the female patients are considerably older than the male patients.\n\nI will now proceed to analyse the relationship between _**age**_ and _**status**_ (show\/no show). I'll use the _**age_category**_ variable to investigate this relationship.\nFirst, I'll group the appointments by _Show_ and _No Show,_ then get the value counts for each age interval.","522213de":"The **age** and **waiting_days** features have a relatively wide range of values, so it would make sense to split the columns into intervals, and store the corresponding intervals into two new columns: **age_range** and **wait_category**. The choice of the **age** intervals is arbitrary, while the **waiting_days** categories are divided into no_wait(i.e. they were attended to on the same day), 1_week, 1_month, 3_months, and 6_months.","4f552c21":"## Table of Contents<br>\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n    <li style=\"margin-left:3%\"><a href=\"#initial\">Initial observations<\/a><\/li>\n    <li style=\"margin-left:3%\"><a href=\"#quest\">Questions<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<li><a href=\"#disclaimer\">Disclaimer<\/a><\/li>\n<li><a href=\"#limit\">Limitations<\/a><\/li>\n<li><a href=\"#ref\">References<\/a><\/li>\n<\/ul>","4ecb6c2f":"I will now calculate the waiting time for each appointment by subtracting _scheduled_day_ from _appointment_day,_ and then create a new column to store the values. Converting the data types to datetime made this calculation much easier.","9047c6b4":"First, I'll rename the columns to a more readable and consistent format","fef3f549":"### Research Question 5 -   What is the relationship between hypertension and the tendency to not show for an appointment?","2889ad4a":"* I first group the data by patient_id, which gives the grouping of rows for each unique id.\n* Then group again by gender (into male and female sub-groups). A count is done and a random column is selected since they all have the same count","bba64e9d":"From above, we see that on average, hypertensive patients tend to be older patients.\n\nNow I'll compare the  number of patients for those who show and those who do not show up for their appointments.","386a75de":"### Data Cleaning","5b33faff":"## Research Question 2 - What is the relationship between longer waiting times (time between the scheduling date and the actual appointment) and the likelihood of showing or not showing for an appointment?","a807d90b":"From the plot above, it is clear that there are much more females making appointments than males.<br>\nFor better context, I want to know the percentages","cef17d9a":"Now to select the desired columns","ebf61d72":"* Then I reset the index of the new dataset so that we can reference the patient_id and gender columns","c59c5d41":"### General Properties\/Assessment\n<br>\nHere, I want to get a brief overview of the dataset characteristics\/properties, and also try to identify any faults or inconsistencies in the data quality and overall structure. I will be looking out for data types, missing values, duplicates, errant\/outlier values, etc.\n","12ab8bdf":"From above, we see that most of the values are concentrated between patients with ages around `18` and `56` years. Also, it appears there are some outliers; most likely the patients with an age around `115`.\n\nFor better insight I'll be using the _age_range_ variable instead. Here is a plot showing the various age categories and their counts.","d6d608ab":"* And finally drop the NaN rows and count the value after grouping by gender (male and female)","0f08c193":"Now, I want to see how 'gender' relates to a patient's 'status' (show\/no show)\nHere I'm getting the row counts (number of appointments) after grouping by 'gender' and 'status'","6083e7ec":"**NB:** The above comparison between genders relates to the number of **appointments** and not the number of patients. To know the number of **patients** by gender (with the assumption that each patient has a unique patient_id), we do the following:","5e80891a":"First I want to look at some stats about the waiting_days column","101c6570":"My initial assumption is that patients who received an sms should be more likely to show up for their appointments. Let's see what the numbers actually say.\nFirst, I would like to see the number of patients who received and did not receive a reminder sms before the actual appointment date.","e846c3dd":"Next, I'll change the data type for the scheduled_day and appointment_day to datetime. This will make it easier to manipulate the dates and perform operations on them.","08ef1a13":"We see that most of the appointments took place the same day they were scheduled.\n\nNow let's visualise this.\nI am going to look at the number of appointments for each of the _waiting_days_ categories created in the Data Wrangling section. I'll use our **_feature_rel_plot()_** function.","9d1e1fec":"That seems to have worked fine. <br>\nNow, in percentages, the number of patients by gender is:","ff345917":"To further check out the negative age value observed in the initial observations. Are there other negative values?","d5f789e8":"\n| Feature | Description |\n| --- | --- |\n| PatientId | Unique identification number for a patient\n| AppointmentID | Unique identification number for each appointment scheduled\n| Gender | Patient gender (Male or Female)\n| ScheduledDay | The day a medical appointment was scheduled\n| AppointmentDay | The day of the actual meet with the doctor\n| Age | How old the patient is (in years)\n| Neighbourhood | Where the appointment takes place\n| Scholarship |\tWhether or not a patient is enrolled in the Brasilian _Bolsa Fam\u00edlia_ welfare program (True of False). More info <a href='https:\/\/en.wikipedia.org\/wiki\/Bolsa_Fam%C3%ADlia'>here<\/a>\n| Hipertension | Whether a patient is hypertensive or not (True or False)\n| Diabetes | Whether a patient is diabetic or not (True or False)\n| Alcoholism | Whether a patient drinks alcohol or not (True or False)\n| Handcap | Whether a patient has a handicap or not (True or False)\n| SMS_received | 1 or more messages sent to the patient (True or False)\n| No-show | Whether a patient showed for their appointment (_No:_ showed up, _Yes:_ didn't show up)\n","e61fafc0":"<a id='ref'><\/a>\n## References <br>\n* https:\/\/medium.com\/ibm-data-science-experience\/markdown-for-jupyter-notebooks-cheatsheet-386c05aeebed\n* https:\/\/mkaz.blog\/code\/python-string-format-cookbook\/\n* https:\/\/seaborn.pydata.org\/tutorial\/aesthetics.html\n* https:\/\/pandas.pydata.org\/pandas-docs\/version\/0.23.4\/generated\/pandas.cut.html\n* https:\/\/stackoverflow.com\/questions\/48655801\/tables-in-markdown-in-jupyter\n* https:\/\/www.kaggle.com\/joniarroba\/noshowappointments","30be79a0":"<a id='quest'><\/a>\n### Questions <br>\n\nFrom the dataset documentation and preliminary observations above, here are some questions I hope to explore in this project.\n\n> * My primary question would be to ascertain whether the features I have chosen to explore directly influence a patient's likelihood to miss or show up for their appointment. This question will be answered in the conclusion, after the other research questions have been answered.\n> * What gender tends to show up more, and how does gender influence whether a patient shows or doesn't show for an appointment?\n> * What is the relationship between longer waiting times (number of days between the scheduling date and the actual appointment date) and the likelihood of missing an appointment?\n> * How does the age of a patient affect their likelihood to show or not show up for their appointment?\n> * Do the patients who received an SMS tend to show\/not show up for their appointment(s)?\n> * What is the relationship between hypertension and the tendency to not show for an appointment? ","96faa514":"On the surface, we see that young children (patients between 0 and 1 year) have the highest number of appointments. Also, the trend tends to decline for the very old patients.\nThe trends are quite similar (for show and no show), both showing a decline in number of appointments for the much older patients.<br><br>\nBelow is a box plot to get a better feel of the concentration of the age values.","5465cfb9":"### Research Question 4 -  Do the patients who received an SMS tend to show\/not show up for their appointment(s)?","e6f094c6":"#### Observations\/Summary\nWe observe that:\n> * Non-hypertensive patients tend to show up for their appointments much more than hypertensive patients.\n> * Hypertensive patients have a much smaller no show rate than non-hypertensive patients. Hence, being hypertensive seems to decrease the likelihood to not show up for an appointment. That said, there could be many other important factors to consider, but this is what the provided data appears to infer.","be12698d":"<br>\nI am now going to explore and answer the research questions posed at the beginning of the project. <br>\nHere's another look at the questions to be answered.\n\n> * My primary question would be to ascertain whether the features I have chosen to explore directly influence a patient's likelihood to miss or show up for their appointment. This question will be answered in the conclusion, after the other research questions have been answered.\n> * Which gender is more likely to show or not show up for an appointment, and how much of this is due to that gender's prevalence in the dataset (using proportions)?\n> * What is the relationship between longer waiting times (number of days between the scheduling date and the actual appointment date) and the likelihood of missing an appointment?\n> * How does the age of a patient affect their likelihood to show or not show up for their appointment?\n> * Do the patients who received an SMS tend to show up for their appointment(s)?\n> * What is the relationship between hypertension and the tendency to not show for an appointment? \n","3246ec0d":"First off, I will define a function that will be useful for making some plots in order to visualise trends and relationships between variables.","1972a9e6":"<br>\nHere are the columns that were selected:\n\n> * patient_id\n> * gender\n> * scheduled_day\n> * appointment_day\n> * age\n> * hypertension\n> * sms_received\n> * status\n> * waiting_days\n> * age_range\n> * wait_category\n\nNow the dataset is cleaned and ready to be used for analysis. Time to explore!\n<br><br>","952c25bc":"* For patients who showed, there is a consistent decrease in the number of appointments as the waiting time increases\n* Of the patients who did not show for their appointment, there appears to be a substantive increment in the number of appointments as the wait time increases, up until the _'1_month'_ category, after which there is a drop in the counts.\n\nNext, I would like to see how the above distribution relates to the gender of the patient. I'll make a similar plot as above but include the _gender_ variable.","256df4b0":"We can't really make sense of these numbers. A plot will be much more helpful.","f8a4a2bb":"We observe that the longest waiting times (between 3 and 6 months) were scheduled by much older patients (patients with an average age of 58 years). The other waiting time categories were scheduled by patients whose ages have an average between 35 and 40 years.","a2b9cad0":"#### Import libraries and load dataset","ccbebaaa":"#### Observations\/Summary\nFrom the above chart, we observe that:\n> * Of the patients who showed up for their appointments, the number of patients that did not receive an sms is by far higher than than those who did receive an sms. This implies that receiving an sms does not imply a higher chance of showing up for an appointment as one would expect, rather the opposite seems to be the case here.\n> * Of those who did not show up for their appointments, the number of patients who received an sms is lower than those who did not receivean sms. In other words, having received an sms may slightly decrease the chances of a patient not showing up for an appointment, but this likelihood doesn't appear to be substantive. \n> * In sum, I would conclude that the _**sms_received**_ variable is not sufficiently relevant to make any plausible assumptions.","01754d84":"#### Observations\/Summary\n> * There are much more women than men in the dataset. `65%` of the appointments were scheduled by women, while the remaining `35%` were scheduled by men.<br><br>\n> * It is quite likely that one of the reasons why the majority of the appointments are made by females is the fact that most of the patients are also female. We assume this based on the fact that most of the patients are female (`64%` female, `34%` male). There are definitely other reasons.\n> * There are `57245` females and `30962` males who showed and `14594` females and `7725` males who did not show up for their appointments.\nHence, of the patients who showed up for their appointments, the majority were females. The same is the case for patients who missed their appointments.\n> * We also observe that the proportion of males and females who showed and didn't show for their appointments is very identical. Approximately `80%` of both genders showed for their appointments, while about `20%` of both genders didn't show up for their medical appointments.\nFrom the analysis, since the proportions of patients who showed and didn't show for their appointments is identical for both genders, it appears that gender does not significantly influence the likelihood of a patient missing their appointment.","4cecf591":"From above, we see that the gender distribution for appointments and patients is basically identical","c2c03484":"Now, I'm going to select only the columns I will be using for this analysis.<br>\nFirst I'll store a copy of the entire cleaned dataset in another variable in case we might need to get another column later on. Who knows?","61cb6711":"It appears a large portion of the patients were attended to on the same day since the _min_ and _25%_ values are _0.00_. Also, there is at least one appointment with a waiting time of up to 6 months (from the 178 _max_ value).\nI'll group the dataframe by _wait_category_ to see the counts for each category.","a8f80f4f":"As usual, I'll use a chart to make sense of these numbers.","99610282":"It is clear that the `[25-44]` and `[45-64]` categories have the highest number of appointments; the rest have roughly similar numbers.\n\nI'll like to see how age relates to gender. I'll get the average age of both female and male patients in the dataset, and visualise it with a bar chart.","95a7163c":"# Project: Exploratory Analysis of Medical Appointment No-shows Dataset","bb3849a5":"#### Observations\/Summary\nFrom the chart above, we observe that:\n>* For the patients who showed up for their appointments, those with ages within the `[25-44]` and `[45-65]` categories have the highest number of appointments.\n>* For those who didn't show up, the same categories mentioned above seem to also have the highest numbers as well. This means that patients within these two categories (`[25-44]` and `[45-65]`) are more likely to miss their appointments.\n>* The oldest patients (`[65-115]`) are the least likely to miss their appointments.\n>* Young children also have a low tendecy to miss their medical appointments as well.","328c161a":"<a id='initial'><\/a>\n### Intial observations\n> * The dataset contains over 110k observations and 14 features.\n> * The naming of the columns is inconsistent and should be modified.\n> * The __\"No-show\"__ feature appears to be the only dependent variable, mostly likely having 'Yes' and 'No' entries (where 'Yes' implies the patient did not show up for the appointment while 'No' indicates that they did show up.\n> * We observe the minimum age is a negative value of -1, which does not make sense. This would require further looking into.\n> * The **PatientID** and **Appointment** do not appear to be helpful to this analysis. It isn't obvious whether the dataset accounts for multiple appointment bookings for the same patient.\n\n#### Key Note:\n* Worthy of note is the fact that the analysis in this prroject is strictly descriptive and hence, possesses no predictive power.\n* In this analysis, I will focus on the **status (formerly no-show), age, hypertension, sms_received, gender, scheduled_day,** and **appointment_day** variables.","17e0e311":"<a id='intro'><\/a>\n## Introduction\n<br>\n**Friendly note: If you find this notebook helpful, kindly give an upvote so others can see it. Thanks!**\n\n\nIn this project, I have decided to analyse the \"No-show appointments\" dataset. The dataset contains information from over 100,000 medical appointments from various neighborhoods in Brazil and focuses on the question of whether or not patients show up for their appointment(s), as well as how the attributes I choose to investigte may influence this likelihood\/probability. A brief description of the attributes is given below.\n","d5b35ee9":"The greater majority of appointments were scheduled by non hypertensive patients. Perhaps this is because hypertension is related to age, and the majority of patients range from young babies to middle-aged adults; the much older patients (who are more likely to be hypertensive) account for a relatively small portion of the patient population.\nLet's confirm this theory. Let's look at the average age of both hypertensive and non-hypertensive patients.","9490e211":"I'll also convert patient_id to int then to string. The variable is categorical, so keeping it as a string would keep me from erroneously performing numerical operations on it.","823b5185":"## Research Question 1 - What gender tends to show up more, and how does gender influence whether a patient shows or doesn't show for an appointment?","25554c87":"I'll now remove the singular row with a negative value for the 'age' column","42cec1a3":"From above:\n* It is clear that the previous assumption was accurate: most of the appointments have 0 waiting days (i.e. the appointments wwer scheduled and held on the same day).\n* The number of appointments within one week and those within a month are about the same.\n* There is a drastic drop in appointment counts for waiting times up to 3 months.\n* There is a small number of appointments that are between 3 and 6 months compared to the other categories.\n\nNow I am going to see how the waiting time relates to patients who showed and didn't show up for their appointments. I'll make a count plot relating _wait_category_ with _status_.\nFirst I'll use groupby() to view the _status_ value counts (Show and No Show) for each waiting time category. Then I'll use a bar chart to visualise the counts.","a84d2b7d":"I'll initially look at the overall distribution of patient ages, then I'll also look at the age trend by _Show_ and _No Show_.","dc92059f":"#### Observations\/Summary\n> * The majority of appointments were scheduled to take place on the very day of scheduling (i.e. where waiting_days = 0).\n> * From the analysis, we can conclude that the number of waiting days influences the tendency to show up or not show up for an appointment. Patients with lower waiting times tend to show up more for their appointments, this is seen by the continuous decline in number of patients as the waiting time increases. Also, patients with lower waiting periods tend to miss their appointments much less than those with higher waiting times. This trend continues up until after the _1_month_ category, where there is a fall in no shows even for longer waiting periods. \n> * Gender does not influence the relationship between the _wait_category_ and _status_, since the plot structure remains mostly identical for both genders.\n> * We may conclude that older patients appear to schedule their appointments for longer waiting periods.","c308d1d8":"#### Summary\/observation\n> * There are no missing values in the dataset\n> * The data types for **scheduled_day** and **appointment_day** are not convenient. They should be changed to _datetime_.\n> * The data type for **No-show** is not appropriate; the **Boolean** type would be better.\n> * There are no duplicate rows in the dataset.\n> * We also need to change the data type of categorical variables to _categorical_ to make things easier.\n> * There are duplicates in the PatientId column, hence, a patient can have more than one appointment. This means the column is useful afterall.\n> * The AppointmentID variable appears to be unique for each fixed appointment.\n> * There is only one entry with a negative value for **Age** and is probably a random error. It should be dropped.","f1ec7a62":"<a id='conclusions'><\/a>\n## Conclusion\n### Answer to Primary Question: Do any of the selected features explored above directly influence a patient's likelihood to miss or show up for their appointment.\n","129cfd70":"<a id='disclaimer'><\/a>\n## Disclaimer\n<br>\n\nThe above analysis does not in any way portend to provide definitive or conclusive inferences  or any basis of finality vis-a-vis patient behavior and the reasons for those behavior. This project falls strictly within the confines of descriptive statistics, and does not claim to possess any predictive power.","21f32ab5":"Now I'm going to check whether the same patient can schedule more than one appointment.","9226e18b":"Now I am going to modify the category values of the above for easier manipulation. This will help, for example, to avoid the confusion with 'Yes' and 'No' not meaning what we would expect, as mentioned in the initial observations section.","7249cb4d":"> * From the analysis on the **_age_** variable, we may deduce that the age feature does not significantly influence the likelihood fo a patient showing or not showing for their appointments. This is because the proportion of males and females who showed and didn't show for their appointments is very identical. So it isn't obvious that gender directly affects the dependent variable (_status_).\n> * The _**waiting_days**_ and _**wait_category**_ variables on the other hand tend to influence whether a patient shows or does not show up for an appointment based on the analysis, since patients with lower waiting periods tend to show up more for their appointments as well as miss their appointments less.\n> * For the _age_ variable, it appears that older patients tend to miss their appointments much less than younger patients. So age does affect the **_status_**(show or no show) of a patient.\n> * From the analysis, we may infer that the _**sms_received**_ variable does not significantly influence the dependent variable (_status_), because, of the patients who showed up for their appointments, the number of patients that did not receive an sms is by far higher than those who did receive an sms, hence, receiving an sms does not increase the chances of showing for an appointment.\n> * In the analysis of the _**hypertension**_ variable, we see that being hypertensive seems to decrease the likelihood to not show up for an appointment, and non-hypertensive patients tend to show up for their appointments much more than hypertensive patients. Hence, this feature seems to directly influence whether a patient shows up for their appointment or not.","720ce08c":"### Research Question 3 -  How does the age of a patient affect their likelihood to show or not show up for their appointment?","a2a4fc66":"<a id='eda'><\/a>\n## Exploratory Data Analysis","7c71ff3e":"<a id='limit'><\/a>\n## Limitations\n> * My use of categories in the _age_ and _waiting_days_ variables is understandable given the wide range of values in both of these variables. However, this approach jettisons some of the nuanced details we would have gotten if the analysis was based on all the individual values each of the afore mentioned features and not on some arbitrary grouping.\n> * Owing to the fact that the data is gathered from various neighborhoods, it most probably is the case that there are several other factors to be considered with regards to a patient's health that aren't identical across neighborhoods. This might yield missleading results, especially since there isn't sufficient supportive information to adequately explore the _neighborhood_ variable.\n> * The predominance of female patients in the dataset may skew the results of any analysis to be carried out on the _gender_ feature. I compensated for this by using proportions to come to a much more plausible descriptive assumption.\n","8bf0729f":"There are by far more females showing up for appointments than males. Also, more females tend to miss their appointments than males. <br>\nTo be sure the above result is not simply due to the fact that there are much more females who scheduled an appointment, I'll make a plot with the proportions instead.","5240ce34":"I'll also want to change the type for the categorical features we'll be using to 'categorical'","7ae1cdf0":"Let's first look at the count for each gender","989532b1":"Then I'll use a for loop to view all the column positions to use in the selection of needed columns.","b7429bed":"To be sure the above worked, the sum of the male and female patients must equal the number of unique patient_id's.","c112a945":"I'll compare the number of appointments for patients who are hypertensive and those who aren't. Then I'll compare those number both for patients who showed and didn't show up for their appointments.\n\nSince hypertension tends to be related to age, I'll also look at the relationship between _**age**_ and _**hypertension**_.","f1b264b8":"It is clear that there are by far more patients who did not receive an sms.\n\nI'll now proveed to see how receiving an sms affects the likelihood of missing or showing up for an appointment. First, I'll get the actual numbers, then go on to visualise them."}}