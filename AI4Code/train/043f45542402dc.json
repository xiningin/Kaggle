{"cell_type":{"1d774c17":"code","d0eb0683":"code","906736d3":"code","4c2c4d9a":"code","4d37164d":"code","e52b1a84":"code","6babf8e8":"code","83bf175f":"code","dde80d60":"code","6c2f415f":"code","82f67eb8":"code","e98e2c74":"code","315225de":"code","4c51803c":"code","6ab1c09c":"code","c14e1082":"code","e342391c":"code","b6e0c928":"code","7ff2cbd2":"code","924bd31a":"code","675b57f7":"code","2286ad80":"code","aae2150c":"code","8a97b02f":"code","66b7421a":"code","fd9c997c":"code","cbe65144":"code","f16fb3dd":"code","89c3a5e9":"code","c0a1248a":"code","00e27362":"code","88418de8":"code","ac40581a":"code","aabafd48":"code","7ef416f6":"code","002302cb":"code","83a8b5d6":"code","60ec9103":"code","2cb4902e":"code","b2a29ca9":"code","20a5ccfd":"markdown","546d1e2a":"markdown","37944410":"markdown","c3c514af":"markdown","e71cd75d":"markdown","15c562e7":"markdown","a81014eb":"markdown"},"source":{"1d774c17":"import numpy as np\nimport pandas as pd\nfrom statsmodels.tsa.filters.hp_filter import hpfilter\nfrom statsmodels.tsa.seasonal import seasonal_decompose\nimport matplotlib.pyplot as plt\nplt.style.use('seaborn')\nfrom datetime import datetime\nimport seaborn as sns\nplt.rcParams[\"figure.figsize\"] = (15,15)\nimport seaborn as sns","d0eb0683":"df = pd.read_csv('..\/input\/daily-total-female-births-in-california-1959\/daily-total-female-births-CA.csv', \n                 index_col=0, header=0, parse_dates=True, squeeze=True)\ndf.head()","906736d3":"df.describe()","4c2c4d9a":"#plt.figure(figsize=(10,10))\nsns.countplot(x=df)\n#plt.xticks(rotation=90)","4d37164d":"df['1959-01']","e52b1a84":"melbourne = pd.read_csv('..\/input\/daily-minimum-temperatures-in-melbourne\/daily-minimum-temperatures-in-me.csv',\n                        header=0, index_col=0, squeeze=True, parse_dates=True, on_bad_lines='warn')","6babf8e8":"melbourne.head()","83bf175f":"melbourne = melbourne.apply(lambda x:x.replace('?', ''))\nmelbourne = melbourne.astype(float)","dde80d60":"df = pd.DataFrame()\ndf['Month'] = [melbourne.index[i].month for i in range(len(melbourne))]\ndf['Day'] = [melbourne.index[i].day for i in range(len(melbourne))]\ndf['Temp'] = [melbourne[i] for i in range(len(melbourne))]\ndf.head()","6c2f415f":"df.isnull().sum()","82f67eb8":"#plt.figure(figsize=(15,15))\nplt.plot(df.Temp[:100])\nplt.tight_layout()","e98e2c74":"df.drop(['Month','Day'], inplace=True, axis=1)\ndf","315225de":"df = pd.concat([df.shift(1),df], axis=1)\ndf.columns=['t', 't+1']\ndf\n","4c51803c":"df = pd.concat([df['t+1'].shift(3), df['t+1'].shift(2), df], axis=1)\ndf","6ab1c09c":"df.columns = ['t-2', 't-1', 't', 't+1']","c14e1082":"df","e342391c":"df.iloc[566]\n","b6e0c928":"means = df['t+1'].rolling(2).mean()","7ff2cbd2":"df = pd.concat([df, means], axis=1)","924bd31a":"df.columns = ['t-2', 't-1', 't', 't+1', 'Mean(t-1,t)']\ndf","675b57f7":"temps = df['t+1']\nwidth = 2\nwindow = temps.rolling(width)\ndf = pd.concat([df, window.max(), window.min()], axis=1)\n","2286ad80":"df.columns = ['t-2', 't-1', 't', 't+1', 'Mean(t-1,t)', 'Max', 'Min']","aae2150c":"df","8a97b02f":"temps = pd.DataFrame(melbourne.values)\nwindow = temps.expanding()\ndataframe = pd.concat([window.min(), window.mean(), window.max(), temps.shift(-1)], axis=1)\ndataframe.columns = [ ' min ' , ' mean ' , ' max ' , ' t+1 ' ]","66b7421a":"dataframe","fd9c997c":"def parser(x):\n    datetime.strptime('190' + x, \"%Y-%m\")\n    \nbidi4 = pd.read_csv('..\/input\/bidi4-banco-inter-2015-2021\/BIDI4 Dados Histricos(1).csv', \n                      parse_dates=True, header=0, index_col=0) \nbidi4.columns = ['Close', 'Open', 'Max', 'Min', 'Volume', 'Var%']\nfor c in bidi4.columns:\n    bidi4[c] = bidi4[c].apply(lambda x:x.replace(',','.'))\nbidi4.drop(columns=['Volume', 'Var%'], inplace=True)\n","cbe65144":"bidi4 = bidi4.astype(float)","f16fb3dd":"bidi4.info()","89c3a5e9":"bidi4.Close.plot()","c0a1248a":"bidi4.describe()","00e27362":"cycle, trend = hpfilter(bidi4.Close, lamb=6.25*240**4) # 5 day market is open so 5 * 4 weeks * 12 month = 240\ntrend.plot()","88418de8":"trend.head(), bidi4.Close.head()","ac40581a":"detrend = bidi4.Close.diff()\ndetrend.plot()","aabafd48":"hpdetrend = bidi4.Close - trend\nhpdetrend.plot()","7ef416f6":"bidi4","002302cb":"bidi4['Month'] = [datetime.strftime(x, '%b') for x in bidi4.index]\nbidi4","83a8b5d6":"sns.boxplot(x='Month', y='Close', data=bidi4)","60ec9103":"pd.plotting.autocorrelation_plot(bidi4.Close)","2cb4902e":"cycle.plot()","b2a29ca9":"bidi4.sort_values(['Close', 'Open'][::-1])","20a5ccfd":"There is nice article on hpfilter lambda paramenter, https:\/\/stats.stackexchange.com\/questions\/34646\/determining-smoothing-parameter-in-hp-filter-for-hourly-data","546d1e2a":"# HP Filter to Detrend","37944410":"No missing values in a dataframe.","c3c514af":"My first step towards time series. \nThanks to **Jason Brownlee** for wonderful explanation.","e71cd75d":"There are some values, e.g '?0.2' which could not be converted to float. So we shall process the data next.","15c562e7":"# Cyclical variation","a81014eb":"# Detreding "}}