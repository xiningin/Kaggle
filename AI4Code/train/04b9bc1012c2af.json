{"cell_type":{"1b24de07":"code","a5d1e19c":"code","99ad29c3":"code","f7d4afa6":"code","ed2a8016":"code","e6bc4676":"code","80aef0d5":"code","e284f822":"code","6061cb66":"code","6db4555c":"code","4fb92b67":"code","1c9b05b9":"code","07dea692":"code","59772b4d":"code","97911d2c":"code","805d3ee1":"code","430f1fbd":"code","d26e9cd4":"code","1b3a5323":"code","defed329":"code","e7b2cc10":"code","c69eeac6":"code","b3a330e5":"code","0a73ea8e":"code","d50fcc74":"code","ac9ed0b5":"code","2dfdb3ab":"code","9c8f86fe":"code","9d2cce75":"code","c0d3daa6":"code","1f2d43bd":"code","26add0d2":"code","2d24e71a":"code","21e7b488":"code","1885e0da":"code","cbdf7c3c":"code","4a83dcd5":"code","31569675":"code","b29596a9":"code","88899ae4":"code","69b05b82":"code","36cfc426":"code","138fea64":"markdown","996872bd":"markdown","8db6763f":"markdown","52a5da3a":"markdown","1eb5c95c":"markdown","c1da99d6":"markdown","87e217a0":"markdown","abd660e7":"markdown","7bb49a9a":"markdown","5cae93a3":"markdown","9e40b297":"markdown","ffed6329":"markdown","299e7599":"markdown","280cc8cd":"markdown","f5b77fb8":"markdown","2119576e":"markdown","ede913f1":"markdown","903721c4":"markdown","e793d74e":"markdown","a24f2464":"markdown"},"source":{"1b24de07":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","a5d1e19c":"dataset = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data.csv')","99ad29c3":"dataset.head()","f7d4afa6":"dataset.shape","ed2a8016":"dataset.info()","e6bc4676":"dataset.describe(include = 'all')","80aef0d5":"dataset.isnull().sum()","e284f822":"plt.figure(figsize = (30, 10))\nplt.subplot(231)\nsns.distplot(dataset['danceability'])\nplt.subplot(232)\nsns.distplot(dataset['duration_ms'])\nplt.subplot(233)\nsns.distplot(dataset['energy'])\nplt.subplot(234)\nsns.distplot(dataset['instrumentalness'])\nplt.subplot(235)\nsns.distplot(dataset['liveness'])\nplt.subplot(236)\nsns.distplot(dataset['loudness'])\nplt.show()","6061cb66":"plt.figure(figsize = (40, 20))\nplt.subplot(331)\nsns.boxplot(dataset['danceability'])\nplt.subplot(332)\nsns.boxplot(dataset['duration_ms'])\nplt.subplot(333)\nsns.boxplot(dataset['energy'])\nplt.subplot(334)\nsns.boxplot(dataset['liveness'])\nplt.subplot(335)\nsns.boxplot(dataset['loudness'])\nplt.subplot(336)\nsns.boxplot(dataset['instrumentalness'])\nplt.show()","6db4555c":"plt.figure(figsize = (10, 7))\nsns.distplot(dataset.popularity)\nplt.title(\"Dist plot of Popularity\", fontdict = {'fontsize' : 15})\nplt.xlabel('Popularity')\nplt.show()\nplt.show()","4fb92b67":"l = []\nfor i in dataset.artists:\n    a=i[2:-2]\n    l.append(a)\nl = list(set(l))\nlst = []\nfor i in l:\n    res = i.strip('][').split(', ')\n    lst.append(res)\nd=[]\nfor i in lst:\n    for j in i:\n        d.append(j)\ndff=pd.DataFrame(d)\ndff = dff[0].value_counts()\n\ndff = dff[:20, ]\nplt.figure(figsize = (12, 8))\nsns.barplot(dff.values, dff.index, alpha = 0.8)\nplt.title(\"Top 20 Artists\", fontdict = {'fontsize' : 15})\nplt.ylabel(\"Artists\")\nplt.xlabel(\"Count\")\nplt.show()","1c9b05b9":"def year(df):\n    if df>1920 and df<=1945:\n        return \"Post-Great War\"\n    if df>1945 and df<=1970:\n        return \"Retro\"\n    if df>1970 and df<=1995:\n        return \"Modern\"\n    else:\n        return \"Post-Modern\"\ndataset['era'] = dataset['year'].apply(year)\npx.pie(data_frame = dataset, names = 'era', hole = 0.2, title = 'Eras of Music')","07dea692":"def func(df):\n    if df == 1:\n        return 'Yes'\n    else:\n        return 'No'\ndataset['isExplicit'] = dataset['explicit'].apply(func)\npx.pie(data_frame = dataset, names = 'isExplicit', hole = 0.2, title = 'Explicit')","59772b4d":"def loud(row):\n    m=dataset['loudness'].median()\n    sd=dataset['loudness'].std()\n    if row['loudness']>=m+(1.5*sd):\n        return \"Extreme\"\n    elif row['loudness']>=m+(sd):\n        return \"Very Loud\"\n    elif row['loudness']>=m+(0.5*sd):\n        return \"Loud\"\n    elif row['loudness']>=m-(0.5*sd):\n        return \"Soft\"\n    elif row['loudness']>=m-(sd):\n        return \"Very Soft\"\n    else:\n        return \"Mellow\"\ndataset['is_loud']=dataset.apply(lambda row: loud(row), axis=1)\npx.pie(data_frame = dataset, names = 'is_loud', hole = 0.2, title = 'IS LOUD')","97911d2c":"def energy(row):\n    if row['energy']>=dataset['energy'].mean():\n        return \"High\"\n    else:\n        return \"Low\"\ndataset['en_type']=dataset.apply(lambda row: energy(row),axis=1)\npx.pie(names=dataset['en_type'],hole=0.2)","805d3ee1":"def func(df):\n    if df > 75:\n        return 'Very Popular'\n    elif df > 50 and df < 76:\n        return 'Popular'\n    elif df > 25 and df < 51:\n        return 'Average'\n    else:\n        return 'Not popular'\ndataset['isPopular'] = dataset['popularity'].apply(func)\npx.pie(data_frame = dataset, names = 'isPopular', hole = 0.2, title = 'Popularity')","430f1fbd":"fig = px.scatter(dataset, x=\"loudness\", y=\"danceability\", size=\"liveness\", \n                 color=\"isExplicit\", log_x=True,size_max=30)\nfig.show()","d26e9cd4":"fig = px.scatter(dataset, x=\"loudness\", y=\"danceability\", size=\"popularity\", \n                 color=\"isExplicit\", log_x=True,size_max=30)\nfig.show()","1b3a5323":"art=dataset\nn=[]\ng=[]\nfor name, group in art.groupby(['artists'])['popularity']:\n    n.append(name)\n    g.append(group.mean())\nartist_pop=pd.DataFrame(n,g)","defed329":"artist_pop.columns=['Name']","e7b2cc10":"artist_pop['popularity']=artist_pop.index","c69eeac6":"artist_pop.sort_values(by='popularity',ascending=False,inplace=True)","b3a330e5":"px.bar(x=artist_pop['Name'].head(10),y=artist_pop['popularity'].head(10)).update_layout(yaxis_title_text='Popularity')","0a73ea8e":"dataset.sort_values(by='popularity',ascending=False,inplace=True)\ndff=dataset.head(10)\npx.histogram(x=dff.name,y=dff.popularity,color=dff.isExplicit,labels={'x':'Top 10 songs','y':'Popularity'})","d50fcc74":"dff=dataset.head(20)\npx.scatter_3d(x=dff.name,y=dff.is_loud,z=dff.danceability,color=dff.popularity,labels={'x':'name','y':'type','z':'danceability','color':'popularity'})","ac9ed0b5":"dff=dataset.head(20)\npx.scatter_3d(x=dff.name,y=dff.en_type,z=dff.danceability,color=dff.popularity,labels={'x':'name','y':'type','z':'danceability','color':'popularity'})","2dfdb3ab":"fig = px.scatter(dataset, x = \"popularity\", y = \"danceability\", animation_frame = dataset['year'].sort_values(), animation_group = \"isPopular\",\n           size = \"key\", color = \"isExplicit\", hover_name = \"isPopular\",\n           log_x=True, size_max=45, range_x=[1,101], range_y=[0,1])\nfig.show()","9c8f86fe":"isPopular= pd.get_dummies(dataset['isPopular'], drop_first=True)\nisExplicit= pd.get_dummies(dataset['isExplicit'], drop_first=True)\nisLoud= pd.get_dummies(dataset['is_loud'], drop_first=True)\ndataset = pd.concat([dataset, isPopular, isExplicit, isLoud], axis = 1)\ndataset.head()","9d2cce75":"dataset.head()","c0d3daa6":"dataset.drop(['isPopular', 'isExplicit', 'is_loud', 'era', 'id', 'name','en_type', 'artists', 'release_date', 'duration_ms'], \n             axis = 1, inplace = True)","1f2d43bd":"dataset.columns","26add0d2":"plt.figure(figsize=(20,15))\nsns.heatmap(dataset.corr(),linecolor='white',linewidths=1,cmap='coolwarm',annot=True)\nplt.show()","2d24e71a":"X= dataset.loc[:,dataset.columns!='popularity']\ny= dataset.loc[:,dataset.columns=='popularity']","21e7b488":"from sklearn.preprocessing import StandardScaler\nsc_X= StandardScaler()\nsc_y= StandardScaler()\nX=sc_X.fit_transform(X)\ny=sc_y.fit_transform(y)","1885e0da":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.25, random_state=0)","cbdf7c3c":"from sklearn.linear_model import LinearRegression\nregressor_lin=LinearRegression()\nregressor_lin.fit(X_train,y_train)","4a83dcd5":"y_pred_lin = regressor_lin.predict(X_test)","31569675":"from sklearn.metrics import r2_score, mean_squared_error, mean_absolute_error","b29596a9":"print(\"Training Score of Linear Regression is: {}\\n\".format(regressor_lin.score(X_train, y_train)))\nprint(\"R2 Score of Linear Regression is: {}\\n\".format(r2_score(y_test, y_pred_lin)))\nprint(\"Mean Squared Error of Linear Regression is: {}\\n\".format(mean_squared_error(y_test, y_pred_lin)))\nprint(\"Mean Absolute Error of Linear Regression is: {}\\n\".format(mean_absolute_error(y_test, y_pred_lin)))","88899ae4":"from sklearn.tree import DecisionTreeRegressor\nregressor_dt= DecisionTreeRegressor(random_state=0)\nregressor_dt.fit(X_train,y_train)\n\ny_pred_dt= regressor_dt.predict(X_test)\n\nprint(\"Training Score of Decision Tree Regressor is: {}\\n\".format(regressor_dt.score(X_train, y_train)))\nprint(\"R2 Score of Decision Tree Regressor is: {}\\n\".format(r2_score(y_test, y_pred_dt)))\nprint(\"Mean Squared Error of Decision Tree Regressor is: {}\\n\".format(mean_squared_error(y_test, y_pred_dt)))\nprint(\"Mean Absolute Error of Decision Tree Regressor is: {}\\n\".format(mean_absolute_error(y_test, y_pred_dt)))","69b05b82":"from sklearn.ensemble import RandomForestRegressor\nregressor_rf=RandomForestRegressor(n_estimators=300, random_state=0)\nregressor_rf.fit(X_train,y_train)\n\ny_pred_rf=regressor_rf.predict(X_test)\n\nprint(\"Training Score of Random Forest Regression is: {}\\n\".format(regressor_rf.score(X_train, y_train)))\nprint(\"R2 Score of Random Forest Regression is: {}\\n\".format(r2_score(y_test, y_pred_rf)))\nprint(\"Mean Squared Error of Random Forest Regression is: {}\\n\".format(mean_squared_error(y_test, y_pred_rf)))\nprint(\"Mean Absolute Error of Random Forest Regression is: {}\\n\".format(mean_absolute_error(y_test, y_pred_rf)))","36cfc426":"fig, ax = plt.subplots()\n#ax.scatter(y_test, y_pred_lin)\nax.plot([y.min(), y.max()], [y.min(), y.max()], 'k--', lw=4)\nax.set_xlabel('Actual')\nax.set_ylabel('Predicted')\n#regression line\ny_test, y_predicted = y_test.reshape(-1,1), y_pred_lin.reshape(-1,1)\nax.plot(y_test, LinearRegression().fit(y_test, y_pred_lin).predict(y_test))\nax.set_title('R2: ' + str(r2_score(y_test, y_predicted)))\nplt.show()","138fea64":"# Top 20 artists by song count","996872bd":"### Linear Regression","8db6763f":"### Linear Regression R2 score plotting","52a5da3a":"### Decision Tree Regressor","1eb5c95c":"### Using various metrics to check the results","c1da99d6":"# Visualizing the basic statistics related to every column","87e217a0":"## Binning 'energy' to classify songs by high\/low energy","abd660e7":"## Encoding categorical variables","7bb49a9a":"### Train test split","5cae93a3":"### Random Forest","9e40b297":"## Exploratory Data Analysis","ffed6329":"## Binning 'explicit' to classify songs as explicit or not","299e7599":"# Importing Necessary Libraries","280cc8cd":"# Plotting various columns of Dataset","f5b77fb8":"# Data Wrangling","2119576e":"## Binning 'popularity' to classify songs on the basis of their popularity","ede913f1":"### Predicting the values","903721c4":"### Applying Regression","e793d74e":"## Binning 'loudness' to classfiy songs by how loud they are","a24f2464":"### Feature Scaling"}}