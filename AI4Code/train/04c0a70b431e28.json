{"cell_type":{"e793b626":"code","f36897da":"code","9f7bfea9":"code","ac446145":"code","1057b183":"code","8ce1b1b3":"code","6f785a9e":"code","65c781cc":"code","7db6fd4e":"code","c3df5e7f":"code","839bfdf3":"code","7d5fbc51":"code","fe0dbf87":"code","ade8ab56":"code","6c913431":"code","606ceb57":"code","e710becc":"code","6d931dcf":"code","eb0bac6a":"code","74b69a82":"code","683c3634":"code","7a945d7e":"markdown","0f4df9b8":"markdown","6d1af8ff":"markdown","61880bfa":"markdown","e071e4a6":"markdown","d85e60e0":"markdown","67d0b9fe":"markdown","0fec1ce4":"markdown","de8c8563":"markdown"},"source":{"e793b626":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\nimport numpy as np \nimport pandas as pd \nimport seaborn as sns \nimport matplotlib.pyplot as plt  \nimport warnings            \nwarnings.filterwarnings(\"ignore\") ","f36897da":"pd.set_option('display.max_rows', None)\npd.set_option('display.max_columns', None)\noku_2015=pd.read_csv(\"\/kaggle\/input\/world-happiness\/2015.csv\")\noku_2016=pd.read_csv(\"\/kaggle\/input\/world-happiness\/2016.csv\")\noku_2017=pd.read_csv(\"\/kaggle\/input\/world-happiness\/2017.csv\")\noku_2018=pd.read_csv(\"\/kaggle\/input\/world-happiness\/2018.csv\")\noku_2019=pd.read_csv(\"\/kaggle\/input\/world-happiness\/2019.csv\")\ndisplay(oku_2015.head(3))\ndisplay(oku_2016.head(3))\ndisplay(oku_2017.head(3))\ndisplay(oku_2018.head(3))\ndisplay(oku_2019.head(3))","9f7bfea9":"oku_2015.rename(columns={\"Happiness Rank\": \"Rank\",\"Happiness Score\":\"Score\",\"Economy (GDP per Capita)\":\"GDP\",\"Family\":\"Social support\",\"Health (Life Expectancy)\":\"Healthy\",\"Trust (Government Corruption)\":\"Trust\"},inplace=True)  \noku_2016.rename(columns={\"Happiness Rank\": \"Rank\",\"Happiness Score\":\"Score\",\"Economy (GDP per Capita)\":\"GDP\",\"Family\":\"Social support\",\"Health (Life Expectancy)\":\"Healthy\",\"Trust (Government Corruption)\":\"Trust\"},inplace=True)  \noku_2017.rename(columns={\"Happiness.Rank\": \"Rank\",\"Happiness.Score\":\"Score\",\"Economy..GDP.per.Capita.\":\"GDP\",\"Family\":\"Social support\",\"Health..Life.Expectancy.\":\"Healthy\",\"Trust..Government.Corruption.\":\"Trust\"},inplace=True)  \noku_2018.rename(columns={\"Country or region\": \"Country\", \"Overall rank\": \"Rank\",\"Score\":\"Score\",\"GDP per capita\":\"GDP\",\"Healthy life expectancy\":\"Healthy\",\"Freedom to make life choices\":\"Freedom\",\"Perceptions of corruption\":\"Trust\"},inplace=True) \noku_2019.rename(columns={\"Country or region\": \"Country\", \"Overall rank\": \"Rank\",\"GDP per capita\":\"GDP\",\"Healthy life expectancy\":\"Healthy\",\"Freedom to make life choices\":\"Freedom\",\"Perceptions of corruption\":\"Trust\"},inplace=True)  ","ac446145":"display(oku_2015.info())\ndisplay(oku_2016.info())\ndisplay(oku_2017.info())\ndisplay(oku_2018.info())\ndisplay(oku_2019.info())","1057b183":"display(oku_2015.head(3))\ndisplay(oku_2016.head(3))\ndisplay(oku_2017.head(3))\ndisplay(oku_2018.head(3))\ndisplay(oku_2019.head(3))","8ce1b1b3":"def dropit(liste,liste2,liste3,liste4,liste5):\n    s=[liste2,liste3,liste4,liste5]\n    for i in s:\n        for land in liste.index:\n\n            if liste.loc[land].Country not in list(i[\"Country\"]):                  \n                    liste.drop(land,inplace=True) \n    \n    return liste\n\noku_2015=dropit(oku_2015,oku_2016,oku_2017,oku_2018,oku_2019)\noku_2015.reset_index(drop=True,inplace=True)\n\noku_2016=dropit(oku_2016,oku_2015,oku_2017,oku_2018,oku_2019)\noku_2016.reset_index(drop=True,inplace=True)\n\noku_2017=dropit(oku_2017,oku_2015,oku_2016,oku_2018,oku_2019)\noku_2017.reset_index(drop=True,inplace=True)\n\noku_2018=dropit(oku_2018,oku_2015,oku_2016,oku_2017,oku_2019)\noku_2018.reset_index(drop=True,inplace=True)\n\noku_2019=dropit(oku_2019,oku_2016,oku_2017,oku_2018,oku_2015)\noku_2019.reset_index(drop=True,inplace=True)\n\ndisplay(oku_2015.info())\ndisplay(oku_2016.info())\ndisplay(oku_2017.info())\ndisplay(oku_2018.info())\ndisplay(oku_2019.info())\n\n","6f785a9e":"def regi_on(stacks):\n    stacks.sort_values(by=\"Country\",inplace=True)\n    oku_2015.sort_values(by=\"Country\",inplace=True)\n    stacks[\"Region\"]=list(oku_2015[\"Region\"])\n    stacks=stacks[[\"Country\",\"Region\",\"Rank\",\"Score\",\"GDP\",\"Social support\",\"Healthy\",\"Freedom\",\"Trust\",\"Generosity\"]]\n    stacks.sort_values(by=\"Rank\",inplace=True)\n    oku_2015.sort_values(by=\"Rank\",inplace=True)\n    return stacks\n \noku_2016=regi_on(oku_2016)\noku_2017=regi_on(oku_2017)\noku_2018=regi_on(oku_2018)\noku_2019=regi_on(oku_2019)\noku_2015=regi_on(oku_2015)   \n","65c781cc":"display(oku_2015.head())\ndisplay(oku_2016.head())\ndisplay(oku_2017.head())\ndisplay(oku_2018.head())\ndisplay(oku_2019.head())","7db6fd4e":"display(oku_2015.isnull().sum())\ndisplay(oku_2016.isnull().sum())\ndisplay(oku_2017.isnull().sum())\ndisplay(oku_2018.isnull().sum())\ndisplay(oku_2019.isnull().sum())","c3df5e7f":"oku_2018.Trust.fillna(oku_2018.Trust.mean(),inplace=True)\ndisplay(oku_2018.isnull().sum())","839bfdf3":"def data_region(stacks):\n    score=[i for i in stacks.groupby(\"Region\")[\"Score\"].mean()]\n    region=sorted(stacks[\"Region\"].unique())\n    dt=pd.DataFrame({\"Region\":region,\"Score\":score})\n    dt.sort_values(by=\"Score\",inplace=True)\n    return dt","7d5fbc51":"plt.subplots(1,1)\nsns.barplot(x=\"Score\",y=\"Region\",data=data_region(oku_2015),palette=\"rocket\")\nplt.xlabel(\"Happiness Score\", fontsize=18)\nplt.ylabel(\"Region\", fontsize=18)\nplt.title(\"Happiness Score by Region in 2015\", fontsize=15)\n\n\nplt.subplots(1,1)\nsns.barplot(x=\"Score\",y=\"Region\",data=data_region(oku_2016),palette=\"rocket\")\nplt.xlabel(\"Happiness Score\", fontsize=18)\nplt.ylabel(\"Region\", fontsize=18)\nplt.title(\"Happiness Score by Region in 2016\", fontsize=15)\n\n\nplt.subplots(1,1)\nsns.barplot(x=\"Score\",y=\"Region\",data=data_region(oku_2017),palette=\"rocket\")\nplt.xlabel(\"Happiness Score\", fontsize=18)\nplt.ylabel(\"Region\", fontsize=18)\nplt.title(\"Happiness Score by Region in 2017\", fontsize=15)\n\nplt.subplots(1,1)\nsns.barplot(x=\"Score\",y=\"Region\",data=data_region(oku_2018),palette=\"rocket\")\nplt.xlabel(\"Happiness Score\", fontsize=18)\nplt.ylabel(\"Region\", fontsize=18)\nplt.title(\"Happiness Score by Region in 2018\", fontsize=15)\n\nplt.subplots(1,1)\nsns.barplot(x=\"Score\",y=\"Region\",data=data_region(oku_2019),palette=\"rocket\")\nplt.xlabel(\"Happiness Score\", fontsize=18)\nplt.ylabel(\"Region\", fontsize=18)\nplt.title(\"Happiness Score by Region in 2019\", fontsize=15)\n\n\nplt.show()","fe0dbf87":"oku_2015.head(3)","ade8ab56":"plt.figure(figsize = (10,5))\nsns.barplot(x =[i for i in oku_2015.groupby(\"Region\")[\"GDP\"].mean()], \n            y = sorted(oku_2015[\"Region\"].unique()), color = \"pink\", label = \"Economy\")\nsns.barplot(x = [i for i in oku_2015.groupby(\"Region\")[\"Social support\"].mean()],\n            y =sorted(oku_2015[\"Region\"].unique()) , color = \"red\", label = \"Family\")\nsns.barplot(x = [i for i in oku_2015.groupby(\"Region\")[\"Healthy\"].mean()], \n            y =sorted(oku_2015[\"Region\"].unique()) , color = \"blue\", label = \"Health\")\nsns.barplot(x = [i for i in oku_2015.groupby(\"Region\")[\"Freedom\"].mean()],\n            y = sorted(oku_2015[\"Region\"].unique()), color = \"orange\", label = \"Freedom\")\nsns.barplot(x = [i for i in oku_2015.groupby(\"Region\")[\"Trust\"].mean()],\n            y = sorted(oku_2015[\"Region\"].unique()), color = \"purple\", label = \"Trust\")\nplt.legend()\nplt.show()","6c913431":"f,ax1 = plt.subplots(figsize =(20,10))\nsns.pointplot(x=sorted(oku_2015[\"Region\"].unique()),y=[i for i in oku_2015.groupby(\"Region\")[\"Score\"].mean()],color='lime',alpha=0.8)\nsns.pointplot(x=sorted(oku_2015[\"Region\"].unique()),y=[i*6 for i in oku_2015.groupby(\"Region\")[\"GDP\"].mean()],color='red',alpha=0.8)\nsns.pointplot(x=sorted(oku_2015[\"Region\"].unique()),y=[i for i in oku_2015.groupby(\"Region\")[\"GDP\"].mean()],color='black',alpha=0.8)\n\nplt.text(7.55,0.60,'happiness score ratio',color='red',fontsize = 17,style = 'italic')\nplt.text(7.55,0.90,'economy ratio',color='lime',fontsize = 18,style = 'italic')\nplt.text(7.55,0.30,'real happiness score ratio',color='black',fontsize = 18,style = 'italic')\nplt.xticks(rotation=45)\nplt.xlabel('Region',fontsize = 15,color='blue')\nplt.ylabel('Values',fontsize = 15,color='blue')\nplt.title('Happiness Score  VS  Economy Rate',fontsize = 20,color='blue')\nplt.grid()\nplt.show()\n","606ceb57":"\nf,ax = plt.subplots(figsize=(15, 15))\nplt.subplot(5,1,1)\nsns.heatmap(oku_2015.corr(), annot=True, linewidths=0.5,linecolor=\"red\", fmt= '.2f')\nplt.title(\"world happines report-2015 correlation\")\nplt.xticks(rotation= 30)\nprint(\"\/n\")\nplt.subplot(5,1,2)\nsns.heatmap(oku_2016.corr(), annot=True, linewidths=0.5,linecolor=\"blue\", fmt= '.2f')\nplt.title(\"world happines report-2016 correlation\")\nplt.xticks(rotation= 30)","e710becc":"from plotly.offline import init_notebook_mode,iplot,plot\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\n\n\nnew_d_2015 = oku_2015.loc[:,[\"GDP\",\"Freedom\", \"Trust\"]]\n# new_d_2015\nnew_d_2015[\"index\"] = np.arange(1,len(new_d_2015)+1)\nfig = ff.create_scatterplotmatrix(new_d_2015, diag='box', index='index',colormap='Viridis',\n                                  colormap_type='cat',\n                                  height=700, width=700,title=\"2015 Trust,Freedom and Economy\")\niplot(fig)\n\nnew_d_2016 = oku_2016.loc[:,[\"GDP\",\"Freedom\", \"Trust\"]]\nnew_d_2016[\"index\"] = np.arange(1,len(new_d_2016)+1)\nfig = ff.create_scatterplotmatrix(new_d_2016, diag='box', index='index',colormap='Viridis',\n                                  colormap_type='cat',\n                                  height=700, width=700,title=\"2016 Trust,Freedom and Economy\")\niplot(fig)","6d931dcf":"trace1 = go.Histogram(\n    x=oku_2015.Score,\n    opacity=0.75,\n    name = \"2015\",\n    marker=dict(color='rgba(171, 50, 96, 0.6)'))\ntrace2 = go.Histogram(\n    x=oku_2016.Score,\n    opacity=0.75,\n    name = \"2016\",\n    marker=dict(color='rgba(12, 50, 196, 0.6)'))\ntrace3 = go.Histogram(\n    x=oku_2017.Score,\n    opacity=0.75,\n    name = \"2017\",\n    marker=dict(color='rgba(0, 50, 106, 0.6)'))\n\ntrace4 = go.Histogram(\n    x=oku_2018.Score,\n    opacity=0.75,\n    name = \"2018\",\n    marker=dict(color='rgba(0, 50, 106, 0.6)'))\n\ntrace5 = go.Histogram(\n    x=oku_2019.Score,\n    opacity=0.75,\n    name = \"2019\",\n    marker=dict(color='rgba(0, 50, 106, 0.6)'))\n\ndata = [trace1, trace2,trace3,trace4,trace5]\nlayout = go.Layout(barmode='overlay',\n                   title='Hapiness Score in 2015,2016,2017,2018 and 2019',\n                   xaxis=dict(title='Hapiness Score'),\n                   yaxis=dict( title='Count'),\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","eb0bac6a":"#for 2019\ntrace1 = go.Scatter3d(\n    x=oku_2019.Score,\n    y=oku_2019.GDP,\n    z=oku_2019.Healthy,\n    mode='markers',\n    marker=dict(\n        color=oku_2019.Score,# set color to an array\/list of desired values\n        colorscale='Portland',             # choose a colorscale\n        opacity=0.9,\n        size=12,                # set color to an array\/list of desired values  \n        \n    )\n)\n\ndata = [trace1]\nlayout = go.Layout(title=\"2019\",\n    margin=dict(\n        l=0,\n        r=0,\n        b=0,\n        t=0  \n    )\n    \n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","74b69a82":"import plotly.express as px\n\nfig = px.scatter(oku_2019.query(\"Score>6\"), x=\"GDP\", y=\"Healthy\",\n         size=\"Score\", color=\"Region\",\n                 hover_name=\"Country\", log_x=True, size_max=60, title=\"Economy, Health and Happiness_Score of Countries which has Happiness Score grather than 5 at 2019 \")\nfig.show()","683c3634":"pie1 = oku_2019.iloc[:10,:]['GDP']\nlabels = oku_2019.iloc[:10,:]['Country']\n# figure\nfig = {\n  \"data\": [\n    {\n      \"values\": pie1,\n      \"labels\": labels,\n      \"domain\": {\"x\": [0, .5]},\n      \"name\": \"Economy rates of some Countries\",\n      \"hoverinfo\":\"label+percent\",\n      \"hole\": .3,\n      \"type\": \"pie\"\n    },],\n  \"layout\": {\n        \"title\":\"Economy rates of first 10 Countries-2019\",\n        \"annotations\": [\n            { \"font\": { \"size\": 20},\n              \"showarrow\": False,\n              \"text\": \"Economy Level\",\n                \"x\": 0.17,\n                \"y\": 1.1\n            },\n        ]\n    }\n}\niplot(fig)\n","7a945d7e":"**2-8)what are the Economy, Health and Happiness Scores of Countries with Happiness Points greater than 5 in years**","0f4df9b8":"**2-5) Trust-Freedom-Economy relationship ? (with Scatter Matrix)**","6d1af8ff":"# 2-4) features correlation (with Heatmap)#","61880bfa":"**2-9)What are the Economy rates of first 10 Countries-2015,2016,2017,2018,2019(with piecharts)**","e071e4a6":"# 2)Data Visualization#\n \n 2-1)Happiness score for each region (with BAR PLOT)","d85e60e0":"# 2-3)happiness score and the rate of economy relationship (with Point Plot#","67d0b9fe":"**2-6)Happiness Score(with Histogram)**","0fec1ce4":"# 2-2)Which feature most affect to happiness score by region?#","de8c8563":"**2-7)GDP-Healthy-Happiness relationship(with 3d scatter)**"}}