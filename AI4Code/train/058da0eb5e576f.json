{"cell_type":{"378ac0ab":"code","ead22901":"code","55910e30":"code","5fd31b9a":"code","f2a3fa33":"code","c98b979a":"code","d75d8972":"code","7c38c6ae":"code","bfcfe2ee":"code","acd93927":"code","54a5ab34":"code","dd5948b9":"code","742f6942":"code","ede27c22":"code","1fa96850":"code","2cf857cc":"code","99cbca04":"code","a6302e0d":"code","319e7a9e":"code","9c1a1820":"markdown","9cc2fdf6":"markdown","ba85d8dd":"markdown","9280cb2c":"markdown","752c6283":"markdown","6dc89e3c":"markdown","8e322eff":"markdown","c4f9c0bc":"markdown","a8071a71":"markdown","523c906b":"markdown","a1a01115":"markdown","81491141":"markdown","f72e5f3c":"markdown","ab349314":"markdown"},"source":{"378ac0ab":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport random","ead22901":"df = pd.read_csv('\/kaggle\/input\/motor-insurance-market\/training (1).csv')","55910e30":"df.head()","5fd31b9a":"df.id_policy.value_counts()","f2a3fa33":"df.info()","c98b979a":"sns.heatmap(df.corr())","d75d8972":"sns.distplot(df['claim_amount'], kde=False)","7c38c6ae":"sns.distplot(df[(df['claim_amount'] > 0) & (df['claim_amount'] < 10000)]['claim_amount'], kde=False)","bfcfe2ee":"sns.boxplot(df['claim_amount'])","acd93927":"df['Damage'] = np.where(df['claim_amount'], 1, 0)\nsns.countplot(df['Damage'])","54a5ab34":"sns.countplot('pol_coverage', data=df, hue = 'Damage')","dd5948b9":"sns.countplot('pol_pay_freq', data=df, hue ='Damage')","742f6942":"sns.countplot('pol_usage', data=df, hue='Damage')","ede27c22":"sns.countplot('drv_sex1', data=df, hue='Damage')","1fa96850":"sns.countplot('vh_fuel',data=df, hue='Damage')","2cf857cc":"sns.countplot('vh_type',data=df, hue='Damage')","99cbca04":"count_damage_per_user = df.groupby('id_policy')['Damage'].sum()\ncount_damage_per_user.value_counts()","a6302e0d":"no_change, change = [], []\nfor column in df.columns:\n    constant_cells = (df.groupby(['id_policy'])[column].value_counts() == 4).all()\n    if constant_cells:\n        no_change.append(column)\n    else:\n        change.append(column)","319e7a9e":"change","9c1a1820":"# Understanding data\n\nThe training set presents policy data for the last 4 years for each user. Let's check it out.","9cc2fdf6":"## Crashes\n\nFind out how many users have not received damage for 4 years, as well as the rest who have received damage.","ba85d8dd":"## Missing data","9280cb2c":"## Categorical features","752c6283":"## Correlations","6dc89e3c":"Let's see what the distribution of the target variable looks like. Expectedly, there are many zeros, which means that the person was not hurt. There is also a long right tail.","8e322eff":"Now let's look at the ratio of those who have suffered and not.","c4f9c0bc":"Note that there is a lot of missing data associated with the second driver. This is most likely due to the fact that there is no second driver. These missing values may need to be categorized into new categories.","a8071a71":"Unfortunately, there are very few dependencies on the target variable. Getting good predictions won't be easy.)","523c906b":"# Data analysis","a1a01115":"## Target","81491141":"Let's explore which data depends and changes over time. For some users, they received that their gender was changed. I think we need to investigate this in more detail.","f72e5f3c":"## Let's get acquainted with ordinal, categorical and binary features:\n\n**Ordinal:**\n\n* pol_coverage: *Min, Med1, Med2, Max, in this order.*\n\n**Categorical:**\n\n* pol_pay_freq: *the price of the insurance coverage can be paid anually, bi-anually, quarterly or monthly.*\n* pol_usage: *WorkPrivate, Retired, Professional, AllTrips.*\n* drv_sex1: *H or F.*\n* drv_sex2: *H or F*.\n* vh_make_model: *hashes representing car models, such as Honda Civic or Fiat Uno.*\n* vh_fuel: *Diesel, Gasoline or Hybrid.*\n* vh_type: *Tourism or Commercial.*\n\n**Boolean:**\n\n* pol_payd: *Pay As You Drive. Indicates whether a client subscribed a mileaged-base policy or not.*\n* drv_drv2: *Indicates the presence of a secondary driver in the contract.*","ab349314":"![](https:\/\/f-origin.hypotheses.org\/wp-content\/blogs.dir\/253\/files\/2020\/12\/AICROWD.png)\n\nThis notebook will examine the competition data in more detail! Ideal for new members."}}