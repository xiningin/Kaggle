{"cell_type":{"185a13e8":"code","d70e7b44":"markdown","19ed97d2":"markdown"},"source":{"185a13e8":"# USE MODE 1, 2, or 3\nMODE = 1\n\n# LOAD SUBMISSION\nimport pandas as pd, numpy as np\nFUDGE = 2.0\nFILE = '..\/input\/rfcx-minimal\/submission.csv'\ndf = pd.read_csv(FILE)\nfor k in range(24):\n    df.iloc[:,1+k] -= df.iloc[:,1+k].min()\n    df.iloc[:,1+k] \/= df.iloc[:,1+k].max()\n\n# CONVERT PROBS TO ODDS, APPLY MULTIPLIER, CONVERT BACK TO PROBS\ndef scale(probs, factor):\n    probs = probs.copy()\n    idx = np.where(probs!=1)[0]\n    odds = factor * probs[idx] \/ (1-probs[idx])\n    probs[idx] =  odds\/(1+odds)\n    return probs\n\n# TRAIN AND TEST MEANS\nd1 = df.iloc[:,1:].mean().values\nd2 = np.array([113,204,44,923,53,41,3,213,44,23,26,149,255,14,123,222,46,6,474,4,17,18,23,72])\/1000.\n\nfor k in range(24):\n    if MODE==1: d = FUDGE\n    if MODE==2: d = d1[k]\/(1-d1[k])\n    if MODE==3: s = d2[k] \/ d1[k]\n    else: s = (d2[k]\/(1-d2[k]))\/d\n    df.iloc[:,k+1] = scale(df.iloc[:,k+1].values,s)\n    \ndf.to_csv('submission_with_pp.csv',index=False)","d70e7b44":"# Rainforest Post Process - Private LB 0.974!\nIn this notebook we demonstrate a post process for rainforest comp. We will use the output from the following notebook:\nhttps:\/\/www.kaggle.com\/meaninglesslives\/rfcx-minimal\nWe will increase it's private LB score from 0.964 to 0.974!\n\nTo learn more about this post process, read the discussion [here][1]\n\n[1]: https:\/\/www.kaggle.com\/c\/rfcx-species-audio-detection\/discussion\/220389","19ed97d2":"# Post Process Parameters\nTo use the following post process, load your `submission.csv` file and first try `MODE=1`. Next try `MODE=2`. Next try `MODE=3`. If those three don't increase your LB, then try `MODE=1` with different `FUDGE` values. Try values 0.5, 1, and 3."}}