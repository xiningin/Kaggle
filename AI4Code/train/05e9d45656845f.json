{"cell_type":{"8708975f":"code","b0796ec0":"code","e01b1bdd":"code","bcea8900":"code","e4620e34":"code","f41179ca":"code","6d746e57":"code","a905c12f":"code","93b36d0a":"code","d30f39bf":"code","ec379ef2":"code","dd405c76":"code","d8c0d239":"code","9eb61ee8":"code","3c829f05":"code","d29eb433":"code","2d68f763":"code","3a49a9c1":"code","a00c818a":"code","ed5f7d1b":"code","df7e4ba3":"code","09b015e9":"code","a2513f56":"code","cbaea93c":"code","0570be1f":"code","b1c5aab9":"code","fe1525f2":"code","8b8d3f2b":"code","06e7e6c7":"code","613b0299":"code","3cd3945c":"code","57de4a4c":"code","5f8504b0":"code","400165e0":"code","0593382c":"code","d404208c":"code","5e393793":"code","3554354d":"code","84028f06":"code","db9a00f2":"code","4bc8576f":"code","9276b65a":"code","61d23c48":"code","089b04c4":"code","c392a4a6":"code","25804ba4":"code","0888b923":"code","bac53838":"code","d90e4d2c":"code","14549592":"code","30abe5d3":"code","a36ecfd6":"code","e7e8b3c3":"code","2f4c7e97":"code","af212eea":"code","2c007229":"code","b2565bfe":"code","aa1caaf6":"code","02abac85":"code","d59cea7a":"code","b7321ad8":"code","328bc8db":"code","2547b74b":"code","377a8bed":"code","3a195e8c":"code","95997573":"code","145dc935":"code","e4c16b09":"code","28341550":"code","35adc60f":"code","c3c423f8":"code","edc2a3f7":"code","53b5ec27":"code","f6a8d865":"code","3b73516f":"code","5fbdaba7":"markdown","aae27458":"markdown","373d99db":"markdown","9f6a2384":"markdown","5d28de1b":"markdown","734867ac":"markdown"},"source":{"8708975f":"\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","b0796ec0":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")","e01b1bdd":"df_mat_pre=pd.read_csv('..\/input\/ipl-2020-player-performance\/Matches IPL 2008-2019.csv')\ndf_mat_20=pd.read_csv('..\/input\/ipl-2020-player-performance\/Matches IPL 2020.csv')\ndf_train=pd.read_csv('..\/input\/ipl-2020-player-performance\/Training.csv')","bcea8900":"df_sub=pd.read_csv('..\/input\/ipl-2020-player-performance\/sample_submission.csv')","e4620e34":"df_sub.head()","f41179ca":"df_sub.shape","6d746e57":"df_squads=pd.read_csv('..\/input\/ipl-2020-player-performance\/IPL 2020 Squads.csv',encoding='unicode_escape')\n","a905c12f":"df_train.head()\ndf_train.shape","93b36d0a":"df_mat_20.head()","d30f39bf":"df_mat_pre.tail()","ec379ef2":"df_squads.head()\n","dd405c76":"df_train.head()","d8c0d239":"plt.figure(figsize=(15,15))\ndf_train[['Runs', 'Boundaries', 'Six', 'Fifty', 'Hundred', 'Duck', 'Batting_Points','Wickets','4W_Haul','5W_Haul','Maidens','Bowling_Points','Total Points']].boxplot(vert=0)","9eb61ee8":"plt.figure(figsize=(5,5))\nsns.boxplot(x=df_train['Runs'])","3c829f05":"plt.figure(figsize=(5,5))\nsns.boxplot(x=df_train['Batting_Points'])","d29eb433":"df_train.isnull().sum()","2d68f763":"df_mat_pre.head()","3a49a9c1":"df_mat_pre.shape","a00c818a":"df_mat_pre.isnull().sum()","ed5f7d1b":"df_mat_20.head()","df7e4ba3":"df_train.head()","09b015e9":"df_train.describe(include=\"all\")","a2513f56":"for column in df_train.columns:\n    if df_train[column].dtype == 'object':\n        print(column.upper(),': ',df_train[column].nunique())\n        print(df_train[column].value_counts().sort_values())\n        print('\\n')","cbaea93c":"dups = df_train.duplicated()\nprint('Number of duplicate rows = %d' % (dups.sum()))\n#df[dups]","0570be1f":"df_train['player'] = df_train['Id']\ndf_train['number'] =  df_train['Id']\nfor i in range(0, len( df_train)):\n    df_train['player'][i] =  df_train['Id'][i].split(\"_\")[-1]\n    df_train['number'][i] = int( df_train['Id'][i].split('_')[:1][0])\n","b1c5aab9":"    df_train.number = df_train.number.astype(int)\n","fe1525f2":"df_train.head()","8b8d3f2b":"plt.figure(figsize = (20,6))\nsns.countplot(df_mat_pre['season']);\n\nplt.show()","06e7e6c7":"plt.figure(figsize=(12,6),dpi = 200)\nplt.xticks(rotation=90)\nsns.countplot(df_mat_pre['winner'])","613b0299":"df_train['player'].value_counts()\n","3cd3945c":"plt.figure(figsize = (15,10))\nsns.scatterplot(x ='Batting_Points', y = 'Bowling_Points', data=df_train)","57de4a4c":"plt.figure(figsize=(12,7))\nsns.heatmap(df_train.corr(), annot=True,cmap='rainbow',mask=np.triu(df_train.corr(),+1));","5f8504b0":"Best_player = df_train.nlargest(20, ['Total Points'])\n\nplt.figure(figsize=(10,6))\nplt.bar(Best_player['player'], Best_player['Total Points'])\nplt.xlabel('Player names')  \nplt.ylabel('Points')\nplt.xticks(rotation=90)\nplt.title('Players scored maximum points')\n\nplt.show()","400165e0":"# computing top players who scored most number of batting points\nBatting_Points= df_train.groupby('player').Batting_Points.sum().nlargest(n=20)\nBatting_Points.plot(kind = 'bar',figsize = (10,5))\nplt.xlabel('Player Name')\nplt.ylabel('Total Batting_points')\nplt.title('Batsman scored maximum points')\nplt.show()","0593382c":"Bowling_Points= df_train.groupby('player').Bowling_Points.sum().nlargest(n=20)\nBowling_Points.plot(kind = 'bar',figsize = (10,5))\nplt.xlabel('Player Name')\nplt.ylabel('Total Bowling_Points')\nplt.title('Bowlers scored maximum points')\nplt.show()","d404208c":"df_train.shape","5e393793":"df_new = pd.DataFrame()\ndf_new['match_number'] = df_train['number']\ndf_new['player'] = df_train['player']\ndf_new['total_score'] = df_train['Total Points']\ndf_new['Id']= df_train['Id']","3554354d":"df_new.head()","84028f06":"df_new.groupby(['player','match_number']).sum()\n","db9a00f2":"df_new.shape","4bc8576f":"df_new = df_new.drop(['player'],axis=1)\ndf_new = df_new.iloc[:1283]\ndf_new.shape","9276b65a":"df_new.match_number=  df_new.match_number.astype(int)\n","61d23c48":"df_train.head()","089b04c4":"pi_p = df_train[['player','number','Total Points']]\npi_p = pi_p.groupby(['player','number']).sum().reset_index()\npi_p","c392a4a6":"pi_l = df_train[['number','player','Total Points']]\npi_l = pi_l.groupby(['number','player']).sum().reset_index()\npi_l","25804ba4":"pi_p = df_train.groupby(['Id','player'])['Total Points'].sum().reset_index()\npi_p =pi_p.sort_values(by = 'Total Points',ascending = False)\npi_p['Id'] = pi_p['Id'].astype('str')\npi_p[\"Id\"] = pi_p['Id'] +'_'+ pi_p['player']\npi_p","0888b923":"#pi_l = df_train[['Id','player','Total Points']]\n#pi_l","bac53838":"#rmse","d90e4d2c":"cat_col=[col for col in df_new.columns if df_new[col].dtype=='O']\ncat_col","14549592":"categorical = df_new[cat_col]\ncategorical.head()","30abe5d3":"Id=pd.get_dummies(categorical['Id'],drop_first=True)\nId.head()","a36ecfd6":"cont_col=[col for col in df_new.columns if df_new[col].dtype!='O']\ncont_col","e7e8b3c3":"df_new= pd.concat([Id,df_new[cont_col]],axis = 1)\ndf_new.head()","2f4c7e97":"df_new.shape","af212eea":"df_train1= pd.read_csv(\"..\/input\/ipl-2020-player-performance\/Training.csv\")","2c007229":"X = np.array(df_train1.iloc[:,1:-1])\ny = np.array(df_train1.iloc[:,-1])","b2565bfe":"X","aa1caaf6":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2 , random_state=0)","02abac85":"from sklearn.preprocessing import StandardScaler\n\nscaler = StandardScaler()\nscaler.fit(X_train)","d59cea7a":"X_train = scaler.transform(X_train)\nX_train.shape","b7321ad8":"X_test = scaler.transform(X_test)\nX_test.shape","328bc8db":"from sklearn.linear_model import LinearRegression\nfrom sklearn import metrics\n\nregression_model = LinearRegression()\nregression_model.fit(X_train, y_train)","2547b74b":"regression_model.score(X_test, y_test)","377a8bed":"predicted_train_lr=regression_model.fit(X_train, y_train).predict(X_train)\nnp.sqrt(metrics.mean_squared_error(y_train,predicted_train_lr))\n","3a195e8c":"from math import sqrt \nfrom sklearn.metrics import mean_squared_error\npredicted_test_lr = regression_model.predict(X_test)\nrmse = np.sqrt(mean_squared_error(y_test,predicted_test_lr))\nrmse","95997573":"predicted_test_lr = np.round(predicted_test_lr)\npredicted_test_lr","145dc935":"df_sub.head()","e4c16b09":"df_sub[['match_id', 'Player_name']] = df_sub['Id'].str.split(\"_\", expand = True)\ndf_sub","28341550":"players = df_sub['Player_name'].unique().tolist()\ndf = pi_p[pi_p['player'].isin(players)]\ndf","35adc60f":"#from sklearn import metrics\npredicted_test_lr=regression_model.predict(X_test)\nprint(\"Predictions are:{}\".format(predicted_test_lr))\nprint(\"\\n \")","c3c423f8":"df1 = pd.DataFrame()\ndf1['match_id'] = df_sub['match_id']\ndf1['Player_name'] = df_sub['Player_name']\ndf1['Total Points'] = pi_l[\"Total Points\"]\ndf1['Id'] = df1['match_id']+'_'+df1['Player_name']\ndf1","edc2a3f7":"df_sub1=pd.DataFrame\ndf_sub1=pd.DataFrame()\ndf_sub1['Id'] = df1['Id']\ndf_sub1['Total Points'] = df1['Total Points'] \ndf_sub1","53b5ec27":"df_sub1.to_csv('score.csv', index=False)\n","f6a8d865":"df_score=pd.read_csv(\".\/score.csv\")","3b73516f":"df_score.head()","5fbdaba7":"### values predected by LR model.","aae27458":"### EDA on train dataset.","373d99db":"### Uploading the submission file.","9f6a2384":"from math import sqrt \nfrom sklearn.metrics import mean_squared_error\n\n#calculate RMSE \nrmse = sqrt(mean_squared_error(pi_l['Total Points'], pi_p['Total Points'] ))","5d28de1b":"**** There are few null values in some of the features.****","734867ac":"### Final predicted score for IPL 2020  "}}