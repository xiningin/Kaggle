{"cell_type":{"258b6a94":"code","36f9d7b8":"code","3fd81286":"code","1d629998":"code","ebc5c05a":"code","067e647d":"code","b8e9cb1f":"code","ac3f3e00":"code","f546268e":"code","62176ae2":"code","a5660c3d":"code","a1e5b173":"code","c257c20c":"code","73cba1f3":"code","416a0e29":"code","3e526705":"code","0b6f0d48":"code","0f1dd79a":"markdown"},"source":{"258b6a94":"from selenium import webdriver as wd\nimport requests as rq\nfrom bs4 import BeautifulSoup as bs\nimport time","36f9d7b8":"headers = {\n    'User-Agent': 'Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/63.0.3239.132 Safari\/537.36'}","3fd81286":"url = 'https:\/\/www.toutiao.com\/'","1d629998":"# 1. \u9996\u5148\u4f7f\u7528requests\u722c\u7f51\u9875\nresponse = rq.get(url, headers=headers)\nresult = response.text\nsp = bs(result, 'html.parser')\nprint(sp.prettify())  # \u6ca1\u6709\u52a8\u6001\u751f\u6210\u7684\u5185\u5bb9","ebc5c05a":"# 2. \u53bbchrome\u6d4f\u89c8\u5668\u767btoutiao.com\n#   \u6f14\u793a\u540e\u53f0\u7684ajax\u52a8\u6001\u751f\u6210feed\u7684\u673a\u5236\n#   \u89e3\u91caURL\u96be\u4ee5\u786e\u5b9a\uff0c\u6240\u4ee5\u96be\u4ee5\u7528requests\u6293\u53d6","067e647d":"# 3. \u7528selenium\u6765\u6a21\u62df\u6d4f\u89c8\u5668\u767b\u9646\ndriver = wd.Chrome(executable_path='.\/chromedriver')\nres = driver.get(url)\ntime.sleep(5)\ntext = driver.page_source\nprint(text)","b8e9cb1f":"# \u6293\u53d6 \u65b0\u9c9c\u4e8b \u5217\u8868\nfeeds = driver.find_elements_by_class_name('feed-card-wrapper')\nprint(len(feeds))","ac3f3e00":"# \u67e5\u770b\u7b2c\u4e00\u4e2a \u65b0\u9c9c\u4e8b \u7684\u6807\u9898\nfeed_1 = feeds[1]\ninfo = feed_1.find_element_by_class_name('feed-card-article-l')\ntitle = info.find_element_by_tag_name('a').text\nprint(title)","f546268e":"# \u94fe\u63a5\nurl = info.find_element_by_tag_name('a').get_attribute('href')\nprint(url)","62176ae2":"# \u4f5c\u8005\u4fe1\u606f\nauthor_info = info.find_element_by_class_name('feed-card-footer-cmp').find_element_by_class_name(\n    'left-tools').find_element_by_class_name('feed-card-footer-cmp-author')\nauthor_name = author_info.find_element_by_tag_name('a').text\nprint(author_name)\n","a5660c3d":"# \u4f5c\u8005\u94fe\u63a5\nauthor_url = author_info.find_element_by_tag_name('a').get_attribute('href')\nprint(author_url)","a1e5b173":"# \u8ba9\u6d4f\u89c8\u5668\u5411\u4e0b\u6eda\u52a8\u5230\u5e95\u90e8\ndriver.execute_script(\"window.scrollTo(0,document.body.scrollHeight)\")\ntime.sleep(5)\nprint(len(driver.find_elements_by_class_name('feed-card-wrapper')))","c257c20c":"driver.execute_script(\"window.scrollTo(0,document.body.scrollHeight)\")\ntime.sleep(5)\nprint(len(driver.find_elements_by_class_name('feed-card-wrapper')))","73cba1f3":"driver.execute_script(\"window.scrollTo(0,document.body.scrollHeight)\")\ntime.sleep(5)\nprint(len(driver.find_elements_by_class_name('feed-card-wrapper')))","416a0e29":"# \u6293\u53d6\u65b0\u9c9c\u4e8b\u4fe1\u606f\uff0c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6709\u7684\u6ca1\u6709\u4f5c\u8005\nfor feed_1 in driver.find_elements_by_class_name('feed-card-wrapper'):\n    info = feed_1.find_element_by_class_name('feed-card-article-l')\n    title = info.find_element_by_tag_name('a').text\n    url = info.find_element_by_tag_name('a').get_attribute('href')\n    author_info = info.find_element_by_class_name('feed-card-footer-cmp').find_element_by_class_name(\n        'left-tools').find_element_by_class_name('feed-card-footer-cmp-author')\n    author_name = author_info.find_element_by_tag_name('a').text\n    author_url = author_info.find_element_by_tag_name('a').get_attribute('href')\n    print(\"\u6807\u9898:\\t%s\\t\\t\u4f5c\u8005:\\t%s\" % (title, author_name))","3e526705":"# \u4fee\u6539\u4ee3\u7801\uff0c\u8fd8\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6709\u7684\u662f\u89c6\u9891\uff0c\u683c\u5f0f\u4e0d\u5bf9\nfor feed_1 in driver.find_elements_by_class_name('feed-card-wrapper'):\n    info = feed_1.find_element_by_class_name('feed-card-article-l')\n    title = info.find_element_by_tag_name('a').text\n    url = info.find_element_by_tag_name('a').get_attribute('href')\n    author_info = info.find_element_by_class_name('feed-card-footer-cmp').find_element_by_class_name(\n        'left-tools').find_element_by_class_name('feed-card-footer-cmp-author')\n    author_name = author_info.find_element_by_tag_name('a').text if len(\n        author_info.find_elements_by_tag_name('a')) > 0 else \"\"\n    author_url = author_info.find_element_by_tag_name('a').get_attribute('href') if len(\n        author_info.find_elements_by_tag_name('a')) > 0 else \"\"\n    print(\"\u6807\u9898:\\t%s\\t\\t\u4f5c\u8005:\\t%s\" % (title, author_name))","0b6f0d48":"# \u518d\u6b21\u4fee\u6539\u4ee3\u7801\uff0c\u53ea\u8003\u8651\u65b0\u95fb\u7c7b\u65b0\u9c9c\u4e8b\nfor feed_1 in driver.find_elements_by_class_name('feed-card-article-wrapper'):\n    info = feed_1.find_element_by_class_name('feed-card-article-l')\n    title = info.find_element_by_tag_name('a').text\n    url = info.find_element_by_tag_name('a').get_attribute('href')\n    author_info = info.find_element_by_class_name('feed-card-footer-cmp').find_element_by_class_name(\n        'left-tools').find_element_by_class_name('feed-card-footer-cmp-author')\n    author_name = author_info.find_element_by_tag_name('a').text if len(\n        author_info.find_elements_by_tag_name('a')) > 0 else \"\"\n    author_url = author_info.find_element_by_tag_name('a').get_attribute('href') if len(\n        author_info.find_elements_by_tag_name('a')) > 0 else \"\"\n    print(\"\u6807\u9898:\\t%s\\t\\t\u4f5c\u8005:\\t%s\" % (title, author_name))","0f1dd79a":"########################################\n# \u53bb \u4eca\u65e5\u5934\u6761 \u4e3b\u9875\u6293\u65b0\u9c9c\u4e8b\n########################################"}}