{"cell_type":{"296c686a":"code","7c8ba335":"code","fca4bb7f":"code","06da8fc0":"code","d5cf85d1":"code","55e350f9":"code","b14ef045":"code","0f0ab83a":"code","9b3938d1":"code","e98c2f21":"code","9ede88b4":"code","1b207267":"markdown","d8d20163":"markdown","d9f5849d":"markdown","f5d77723":"markdown","63e3caa6":"markdown","0cc69f3c":"markdown","e8fcdc46":"markdown","0530cdad":"markdown"},"source":{"296c686a":"import numpy  as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('fivethirtyeight')\nplt.rcParams.update({'font.size': 16})\nplt.rcParams[\"figure.figsize\"] = (10, 5)","7c8ba335":"train    = pd.read_csv(\"..\/input\/tabular-playground-series-jan-2022\/train.csv\", parse_dates=['date'],index_col=\"row_id\")\nGDP_data = pd.read_csv(\"..\/input\/gdp-20152019-finland-norway-and-sweden\/GDP_data_2015_to_2019_Finland_Norway_Sweden.csv\",index_col=\"year\")","fca4bb7f":"GDP_data","06da8fc0":"GDP_data[\"GDP_Finland\"].plot(kind='bar').legend(loc='center left',bbox_to_anchor=(1.0, 0.5));","d5cf85d1":"GDP_data[\"GDP_Norway\"].plot(kind='bar').legend(loc='center left',bbox_to_anchor=(1.0, 0.5));","55e350f9":"GDP_data[\"GDP_Sweden\"].plot(kind='bar').legend(loc='center left',bbox_to_anchor=(1.0, 0.5));","b14ef045":"train['year'] = train['date'].dt.year\npivot_table = pd.pivot_table(train, index=['year'], values=['num_sold'], aggfunc=sum)\npivot_table.plot(kind='bar').legend(loc='center left',bbox_to_anchor=(1.0, 0.5));","0f0ab83a":"yearly_total_sales_data = train.groupby(['country','year'])['num_sold'].sum().reset_index()\nyearly_total_sales_data.style.hide_index()","9b3938d1":"from scipy import stats\n# Finland\npearson, p_value = stats.pearsonr( GDP_data.iloc[0:4,0] , yearly_total_sales_data.iloc[0:4,2])\nprint(\"Finland correlation \" + str(round(pearson, 3)) + \" p-value \" + str(round(p_value, 3)))\n# Norway\npearson, p_value = stats.pearsonr( GDP_data.iloc[0:4,1] , yearly_total_sales_data.iloc[4:8,2])\nprint(\"Norway correlation  \" + str(round(pearson, 3)) + \" p-value \" + str(round(p_value, 3)))\n# Sweden\npearson, p_value = stats.pearsonr( GDP_data.iloc[0:4,2] , yearly_total_sales_data.iloc[8:12,2])\nprint(\"Sweden correlation  \" + str(round(pearson, 3)) + \" p-value \" + str(round(p_value, 3)))","e98c2f21":"# rename the columns in GDP dataframe \nGDP_data.columns = ['Finland', 'Norway', 'Sweden']\n# create a dictionary\nGDP_dictionary = GDP_data.unstack().to_dict()\n# now create a new `GDP_value` column\ntrain[\"GDP_value\"] = train.set_index(['country','year']).index.map(GDP_dictionary.get)","9ede88b4":"train","1b207267":"### Pearson correlation coefficients (2015-2018)\nWe shall now calculate the [Pearson correlation coefficients and the p-values](https:\/\/docs.scipy.org\/doc\/scipy\/reference\/generated\/scipy.stats.pearsonr.html) between the total yearly `num_sold` for each country, and the GDP for each country for the years 2015 to 2018 inclusive:","d8d20163":"### GDP Finland ","d9f5849d":"take a quick look","f5d77723":"### Plot of the GDP of Finland, Norway, and Sweden (2015-2019)\nThis notebook plots the data for the [gross domestic product](https:\/\/en.wikipedia.org\/wiki\/Gross_domestic_product) (in billion US$) for the countries Finland, Norway, and Sweden for the years 2015-2019 from the dataset [\"GDP 2015-2019: Finland, Norway, and Sweden\"](https:\/\/www.kaggle.com\/carlmcbrideellis\/gdp-20152019-finland-norway-and-sweden), along with the the yearly total of `num_sold` for the [Tabular Playground Series - Jan 2022](https:\/\/www.kaggle.com\/c\/tabular-playground-series-jan-2022) competition.\n\nWe can see that, for all three countries, there is a noticeable drop in the GDP in the year 2019 with respect to 2018.","63e3caa6":"#### Hypothesis: There could be a drop in the yearly total sales in 2019 for each country, corresponding to the drop in the GDP in the year 2019 for each country.\n\n### Addendum: How to add the GDP data to the competition `train.csv` file to make a new feature","0cc69f3c":"### GDP Norway","e8fcdc46":"### Kaggle merchandise sales (2015-2018)\nHere is a plot of the yearly total of `num_sold` for the [Tabular Playground Series - Jan 2022](https:\/\/www.kaggle.com\/c\/tabular-playground-series-jan-2022) competition data:","0530cdad":"### GDP Sweden"}}