{"cell_type":{"2deb3c95":"code","dd26a893":"code","57c978fe":"code","fe12be59":"code","1adffc93":"code","7a67e362":"code","e9b057f6":"code","33110ea1":"code","4574f78e":"code","db3e810c":"code","5d813938":"code","0076e84f":"code","d4014b87":"code","f1431d96":"code","a46ed426":"code","ccc8f393":"code","22565d27":"code","bdfbfbeb":"code","6c42e7f9":"code","bd4cc473":"code","a55fc239":"code","f5d08244":"code","8621b4cb":"code","7d84ee04":"code","302c2d81":"code","da6de1d3":"code","c25b4cfb":"code","6cf5ac28":"code","a7d66fec":"code","30db37f1":"code","8c065728":"code","75a20bd3":"code","e40d1a89":"code","7712fdc5":"code","4a5b6b0f":"code","67eab726":"code","7cf53a28":"markdown","f576f863":"markdown","ae3934fb":"markdown","9118486a":"markdown","09933418":"markdown","997e12e3":"markdown","38270fa9":"markdown","3b8d4f63":"markdown","e35dd7d3":"markdown","4a4b0a07":"markdown","7d044ce9":"markdown","f824abf5":"markdown","e727b5a1":"markdown","cd5e179d":"markdown","4fc8a7dd":"markdown","580ae43c":"markdown","1e1494ea":"markdown","d4f29069":"markdown","48bb409d":"markdown","d559d93f":"markdown","13403a2d":"markdown"},"source":{"2deb3c95":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","dd26a893":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')","57c978fe":"data=pd.read_csv(\"\/kaggle\/input\/insurance\/insurance.csv\")","fe12be59":"data.head()","1adffc93":"data.isnull().sum()\/len(data)","7a67e362":"data.describe().T","e9b057f6":"corr=data.corr()\nsns.heatmap(corr)","33110ea1":"sns.pairplot(data,hue=\"smoker\")","4574f78e":"sns.scatterplot(x=data.bmi,y=data.charges,hue=data.smoker)","db3e810c":"a=0\nbmi_grup=[]\n\nwhile a<1339:\n    \n    if (data.bmi[a]<=18.5):\n        bmi_grup.append(\"under_weight\")\n    elif (data.bmi[a]>18.5 and data.bmi[a]<=25):\n        bmi_grup.append(\"normal\")\n    elif (data.bmi[a]>25 and data.bmi[a]<=30):\n        bmi_grup.append(\"over_weight\")\n    elif (data.bmi[a]>30 and data.bmi[a]<=35):\n        bmi_grup.append(\"moderately_obese\")\n    elif (data.bmi[a]>35 and data.bmi[a]<=40):\n        bmi_grup.append(\"several_obese\")\n    else:\n        bmi_grup.append(\"very_obese\")\n        \n    a+=1\n    \n","5d813938":"bmi_grup=pd.DataFrame(bmi_grup,columns=[\"bmi_grup\"])\n","0076e84f":"data[\"bmi_grup\"]=bmi_grup","d4014b87":"data.head()","f1431d96":"sns.scatterplot(x=data.bmi_grup,y=data.charges,hue=data.smoker)","a46ed426":"i=0\nobese_smoker=[]\n\nwhile i<1339:\n    \n    if(data.bmi_grup[i]==\"very_obese\" or data.bmi_grup[i]==\"several_obese\" or data.bmi_grup[i]==\"moderately_obese\") and (data.smoker[i]==\"yes\"):\n        obese_smoker.append(1)\n    else:\n        obese_smoker.append(0)\n    \n    i+=1","ccc8f393":"obese_smoker=pd.DataFrame(obese_smoker,columns=[\"obese_smoker?\"])\ndata[\"obese_smoker?\"]=obese_smoker","22565d27":"data.head()","bdfbfbeb":"sns.scatterplot(x=data.charges,y=data[\"obese_smoker?\"])","6c42e7f9":"u=0\nage_segment=[]\n\nwhile u<1339:\n    \n    if(data.age[u]<=20):\n        age_segment.append(\"young\")\n    elif(data.age[u]>20 and data.age[u]<=30):\n        age_segment.append(\"young_adult\")\n    elif(data.age[u]>30 and data.age[u]<=40):\n        age_segment.append(\"adult\")\n    elif(data.age[u]>40 and data.age[u]<=50):\n        age_segment.append(\"old\")\n    else:\n        age_segment.append(\"very_old\")\n        \n    u+=1","bd4cc473":"age_segment=pd.DataFrame(age_segment,columns=[\"age_segment\"])\ndata[\"age_segment\"]=age_segment\ndata.head()","a55fc239":"sns.countplot(data.age_segment)","f5d08244":"sns.scatterplot(x=data.bmi,y=data.charges,hue=data.smoker)\n","8621b4cb":"sns.scatterplot(x=data.bmi,y=data.charges,hue=data.age_segment)","7d84ee04":"p=0\nobese_smoker_oldies=[]\n\nwhile p<1339:\n    \n    if(data.bmi_grup[p]==\"moderately_obese\" or data.bmi_grup[p]==\"several_obese\" or data.bmi_grup[p]==\"very_obese\") and (data.smoker[p]==\"yes\") and (data.age_segment[p]==\"old\" or data.age_segment[p]==\"very_old\"):\n        obese_smoker_oldies.append(1)\n    else:\n        obese_smoker_oldies.append(0)\n    \n    p+=1","302c2d81":"obese_smoker_oldies=pd.DataFrame(obese_smoker_oldies,columns=[\"obese_smoker_oldies\"])","da6de1d3":"data[\"obese_smoker_oldies\"]=obese_smoker_oldies\ndata.head()","c25b4cfb":"sns.scatterplot(x=data.obese_smoker_oldies,y=data.charges)","6cf5ac28":"data.dtypes","a7d66fec":"cols=[\"sex\",\"smoker\",\"region\",\"bmi_grup\",\"age_segment\"]\n\nfrom sklearn.preprocessing import LabelEncoder\n\nle=LabelEncoder()\n\nfor i in cols:\n    \n    data[i]=le.fit_transform(data[i])\n    \ndata.head()","30db37f1":"x=data.iloc[:,0:6]\nx1=data.iloc[:,7:11]\nx=pd.concat([x,x1],axis=1)\ny=data.iloc[:,6:7]\nx.head()\n","8c065728":"from sklearn.model_selection import train_test_split\n\nx_train,x_test,y_train,y_test=train_test_split(x,y,test_size=0.33,random_state=0)\n\n\n","75a20bd3":"from xgboost import XGBRegressor\n\nxgb=XGBRegressor()\nxgb.fit(x_train,y_train)\nxgb_tahmin=xgb.predict(x_test)","e40d1a89":"from sklearn.metrics import mean_squared_error, r2_score\n\n\nprint(\"R^2 skoru\",r2_score(y_test,xgb_tahmin),\n     \"Hata Kareler Ortalamas\u0131\", np.sqrt(mean_squared_error(y_test,xgb_tahmin)))","7712fdc5":"data.describe()","4a5b6b0f":"from sklearn.model_selection import GridSearchCV\n\nxgb_params={\n    \n    \"colsample_bytree\": np.arange(0.2,1,0.1),\n    \"max_depth\": np.arange(3,10,1),\n    \"learning_rate\": np.arange(0.1,1,0.1)\n    \n}\n\n\nxgb_tune=XGBRegressor()\nxgb_cv=GridSearchCV(xgb_tune,xgb_params,cv=10,n_jobs=-1,verbose=2)\n\nxgb_cv.fit(x_train,y_train)","67eab726":"xgb_cv.best_params_","7cf53a28":"\nMedical Cost Personnel data consists of various information about individuals and corresponding downloads. Our goal on this data is to be able to estimate the loads with the information given.\n\n\nThroughout the study, we will first load the data and make rough checks. We will then examine the variables, look at the links between them and the target variable, and then strive to find various effective variables","f576f863":"\nI hope my first example in Kaggle has been useful for you.\n\nSee you again.\n\nAlper Temel.","ae3934fb":"We have added our groups, now let's look at the graphic.","9118486a":"For example, people with moderately_obese value have a net wage difference compared to smoking. The same comment can be made in severa_obese and very_obese.\n\nNow, I want to distinguish smokers and non-smokers in these three groups. For this, I will use a structure similar to the above.\n","09933418":"In the graph above, the target variable seems to have a close relationship with age, bmi and smoking. For example, it becomes clear that smokers pay more. Or it is quite clear that smokers pay higher wages for people with the same bmi value.","997e12e3":"Now let's divide the variable of age just as we divide the bmi values. So again, let's try to find out if there are those who are the same age but different bmi groups or pay a difference according to smoking.\n\n* 18-20 aras\u0131 young\n* 20-30 aras\u0131 young adult\n* 30-40 aras\u0131 adult\n* 40-50 aras\u0131 old\n* 50 \u00fczeri very old\n\n\nI guess we did a little bit of injustice to people over 50\u00a0 \u00af\\_(\u30c4)_\/\u00af","38270fa9":"1. General Information About Data","3b8d4f63":"4. **XGBOOST**","e35dd7d3":"Even if some situations overlap between 3000 and 4000, we still have separated those who pay high wages and those who do not.","4a4b0a07":"Okay, we didn't divide ages too disproportionately.","7d044ce9":"Adding New Variables","f824abf5":"Let's try the tune operation now.","e727b5a1":"There is something like this between the two graphs above: When the BMI value rises above 30, suddenly high differences start to occur between age groups (2nd chart) The part with these high wages corresponds to the smokers in the first graph, so we can create a new variable from here.\n\nI want to make this new variable by taking bmi_groups whose bmi value is greater than 30, smokers and old \/ very_old ones. By the way, there will not be many examples that fit this situation, but I think it would be useful to add.","cd5e179d":"2. First Look at Data","4fc8a7dd":"We have said body mass index for BM. If we break down this variable into categorical data, we can look at and interpret, for example, people who smoke sigra with a normal bmi value, non-smokers with a normal bmi value, or more.","580ae43c":"Thanks !","1e1494ea":"To learn more about the data, it is very useful to look at the correlation of variables with each other, and a simple method for this is the heatmap in a nice graph.","d4f29069":"It seems that age is a little more descriptive than other variables. Let's draw various graphs to understand it a little more.","48bb409d":"Hello, I am sharing a new solution example on Medical Cost Personnel Dataset in this worksheet. Your comments on the subject are important to me.\n\nSome parts may be lack of opinion or indirectly, I am open to all new suggestions, I hope this case study will be useful for you.\n","d559d93f":"\nI will divide the bmi values \u200b\u200bby the values \u200b\u200bI found from the bmi table. These,\n\n* 18.5 ve alt\u0131 underweight\n* 18.5 ve 25 aras\u0131 normal\n* 25 ve 30 aras\u0131 overweight\n* 30 ve 35 aras\u0131 moderately obese\n* 35 ve 40 aras\u0131 several obese\n* 40 ve \u00fczeri very several obese\n","13403a2d":"You can support the study by giving an upvote :)"}}