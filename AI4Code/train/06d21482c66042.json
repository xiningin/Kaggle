{"cell_type":{"47468039":"code","e740351c":"code","8841e290":"code","056565ac":"code","4dcaffca":"code","e1bb36ca":"code","cf2ebd1e":"code","e2677b9b":"code","779b08f0":"code","a6d59b55":"code","6ec7cff8":"code","03ee97aa":"code","9f438ec9":"code","c2853a56":"code","e5dc9aed":"code","91bcf80b":"markdown","784f30dc":"markdown","0e1a6854":"markdown","d827367b":"markdown"},"source":{"47468039":"import sys\n!{sys.executable} -m pip install bar_chart_race","e740351c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","8841e290":"data_dir='..\/input\/premier-league-standing-all-season-19922020'","056565ac":"order=[]\npaths=[]\nfor item in os.listdir(data_dir):\n    if item[0:2]=='Pr':\n        if item[-6]=='9':\n            order+=[1900+int(item[-6:-4])]\n            paths+=[os.path.join(data_dir,item)]\n        else:\n            order+=[2000+int(item[-6:-4])]\n            paths+=[os.path.join(data_dir,item)]","4dcaffca":"datalist=pd.DataFrame(order)\ndatalist[1]=paths\ndatalist.columns=['order','path']\ndatalist2=datalist.sort_values('order').reset_index(drop=True)\ndatalist2","e1bb36ca":"data=pd.read_csv(datalist2.loc[0,'path'])\ndata","cf2ebd1e":"data0=data[['Position','Club','season','Points']]\ndata0.loc[:,'order']=1993\ndata0","e2677b9b":"data0.columns","779b08f0":"pd.read_csv(datalist2.loc[14,'path'])","a6d59b55":"#len(datalist2\nfor i in range(1,len(datalist2)):\n    if i!=14:\n        data1=pd.read_csv(datalist2.loc[i,'path'])\n        data1.loc[:,'order']=(1993+i)\n        data1p=data1[['Position','Club','season','Points','order']]\n        data0=pd.concat([data0,data1p])\n    elif i==14:\n        data1=pd.read_csv(datalist2.loc[i,'path'])\n        data1.loc[:,'order']=(1993+i)\n        data1.rename(columns={'PointsForm':'Points',}, inplace=True)\n        data1p=data1[['Position','Club','season','Points','order']]\n        data0=pd.concat([data0,data1p])        \ndata0","6ec7cff8":"# set double indexes\ndata1=data0.copy()\ndata2=data1.set_index(['season','Club'])\ndata2","03ee97aa":"# unsack!!!\ndata3=data1.set_index(['season','Club']).unstack()['Points']\ndata3","9f438ec9":"data4=data3.fillna(0)","c2853a56":"df = data4\nbcr.bar_chart_race(\n    df=df,\n    filename='PremierLeague_BarChartRace.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=20,\n    fixed_order=False,\n    fixed_max=False,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.95,\n    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n    #period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},\n    #perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(5, 3),\n    dpi=500,\n    cmap='dark24',\n    title='Premier League Standings 1992-2020',\n    title_size=15,\n    bar_label_size=7,\n    tick_label_size=5,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)","e5dc9aed":"Video(\"\/kaggle\/working\/PremierLeague_BarChartRace.mp4\", width=800, height=600, embed=True)","91bcf80b":"# Data preparation","784f30dc":"# Bar Chart Race of Premier League Standings 1992-2020\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/","0e1a6854":"# Bar Chart Race\n","d827367b":"# Dataframe for Bar Chart Race"}}