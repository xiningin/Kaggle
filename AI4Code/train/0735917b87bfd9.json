{"cell_type":{"e4a6c723":"code","546b926e":"code","1898b0d3":"code","5d9aaa2b":"code","be0ce288":"code","4d890a69":"code","2492d16a":"code","73619ec3":"code","de98c1e9":"code","4d749fb0":"code","861d7bf1":"code","13652735":"code","cdd3bf5f":"code","4a13c06d":"code","98955d8d":"code","5d94b875":"code","90965c55":"code","f4cb317a":"code","42686b41":"code","f82581d4":"code","7011c540":"code","0962288e":"code","43b696b8":"code","4919fe77":"code","78a5840d":"markdown","0b168635":"markdown","96b88598":"markdown","b6f7655f":"markdown","573d8af5":"markdown","f3aa6637":"markdown","11dc7691":"markdown"},"source":{"e4a6c723":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","546b926e":"import plotly\nfrom datetime import datetime\nimport plotly.graph_objects as go\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom statsmodels.tsa.arima_model import ARIMA\nfrom sklearn.metrics import mean_squared_error\nimport plotly.express as px","1898b0d3":"sales_train = pd.read_csv(\"\/kaggle\/input\/competitive-data-science-predict-future-sales\/sales_train.csv\")\nsales_train.head()","5d9aaa2b":"df_test = pd.read_csv(\"..\/input\/competitive-data-science-predict-future-sales\/test.csv\",nrows = 10)","be0ce288":"sales_train.shape","4d890a69":"sales_train.columns","2492d16a":"sales_train_columns = sales_train.columns.tolist()\nsales_train[sales_train_columns].isnull().sum()","73619ec3":"sales_train.dtypes","de98c1e9":"sales_train['date'] =  pd.to_datetime(sales_train['date'],\n                              format='%d.%m.%Y')","4d749fb0":"sales_train.describe()","861d7bf1":"shop_id_list = list(set(sales_train.shop_id.tolist()))\nitem_id_list = list(set(sales_train.item_id.tolist()))","13652735":"fig = go.Figure(go.Indicator(\n    mode = \"number\",\n    value = len(sales_train[\"shop_id\"].value_counts()),\n    title = {'text': \"How many shops in the dataset ?\"},\n    domain = {'x': [0, 1], 'y': [0, 1]}\n))\nfig.show()","cdd3bf5f":"fig = go.Figure(go.Indicator(\n    mode = \"number\",\n    value = len(sales_train[\"item_id\"].value_counts()),\n    title = {'text': \"How many total unique item in the dataset ?\"},\n    domain = {'x': [0, 1], 'y': [0, 1]}\n))\nfig.show()","4a13c06d":"top_10_tranding_shop =  sales_train[\"item_cnt_day\"].groupby(sales_train.shop_id).sum().sort_values(ascending=False)[:10]\nfig = go.Figure(go.Bar(y=top_10_tranding_shop.index, x=top_10_tranding_shop.values, \n                      orientation=\"h\")) \nfig.update_layout(title_text='top 10 tranding shop',xaxis_title=\"Count\",yaxis_title=\"Shop ID\")\nfig.update_yaxes(type=\"category\")\nfig.show()","98955d8d":"print(\"top 10 tranding Item\")\ntop_10_tranding_item =  sales_train[\"item_cnt_day\"].groupby(sales_train.item_id).sum().sort_values(ascending=False)[:10]\nfig = go.Figure(go.Bar(y=top_10_tranding_item.index, x=top_10_tranding_item.values, \n                      orientation=\"h\")) \nfig.update_layout(title_text='top 10 tranding Item',xaxis_title=\"Count\",yaxis_title=\"Item ID\")\nfig.update_yaxes(type=\"category\")\nfig.show()\n","5d94b875":"total_count_sell_on_date_block_num = sales_train[\"item_cnt_day\"].groupby(sales_train.date_block_num).sum()\n\nfig = go.Figure(data=go.Scatter(x = total_count_sell_on_date_block_num.index,\n                                y = total_count_sell_on_date_block_num.values,\n                                mode = 'lines')) # hover text goes here\nfig.update_layout(title = 'Total count sale on Date block numer ',xaxis_title = \"Date block numer\",yaxis_title = \"Number of total count sales\")\nfig.show()","90965c55":"\"\"\"\"print(\"Select shop ID\")\nloop_condition= True\nwhile(loop_condition == True):\n    shop_id_number = int(input())\n    if shop_id_number in shop_id_list:\n        loop_condition = False\n        print(\" shop_id : \",shop_id_number)\n    else:\n        print(\" please enter valid shop_id\")\"\"\"\n\n#select 31 shop_id you can choose any shop_id with uper code \n\nshop_id_number = 31\nshop_id_data = sales_train.loc[sales_train[\"shop_id\"] == shop_id_number]\ntop_five_item = shop_id_data[\"item_cnt_day\"].groupby(shop_id_data.item_id).sum().sort_values(ascending=False)[:5]\nfig = go.Figure(go.Bar(y=top_five_item.index, x=top_five_item.values, \n                      orientation=\"h\")) \nfig.update_layout(title_text='Top 5 selling item in particular shop',xaxis_title=\"Count\",yaxis_title=\"Item ID\")\nfig.update_yaxes(type=\"category\")\nfig.show()","f4cb317a":"def data_collector(id_shop,id_item):\n    data = sales_train[(sales_train[\"shop_id\"]==id_shop) & (sales_train[\"item_id\"]==id_item)]\n    data = data.drop([\"date_block_num\",\"shop_id\",\"item_id\",\"item_price\"],axis= 1)\n    data=data.groupby(data['date']).sum()\n    first = {'item_cnt_day':0}\n    last = {'item_cnt_day':0}\n    df_first = pd.DataFrame(first, index =['2013-01-01'])\n    df_last = pd.DataFrame(last, index =['2015-10-31'])\n    data = pd.concat([df_first,data,df_last])\n    data = data.asfreq('d')\n    data = data.fillna(0)\n    return data","42686b41":"sales = []\ndef Hypertunning_parameter_ARIMA_model(data):\n    dict_for = {}\n    #data = data.set_index(\"date\")\n    train, test = train_test_split(data, test_size=0.1)\n    p_value = range(0,3)\n    d_value = range(0,3)\n    q_value = range(0,4)\n    for p in p_value:\n        for d in d_value:\n            for q in q_value:\n                try:\n                    order = (p,d,q)\n                    df_model = ARIMA(train,order)\n                    df_model_fit= df_model.fit()\n                    df_predict = df_model_fit.forecast(steps=len(test))[0]\n                    error = mean_squared_error(test.item_cnt_day,df_predict)\n                    dict_for.update( {order : error} )\n                except:\n                    pass\n    for i , j in dict_for.items(): \n        if j == min(dict_for.values()):\n            final_order = i\n    df_model_final = ARIMA(train,order=final_order)\n    df_model_fit= df_model_final.fit()\n    df_predict = df_model_fit.forecast(steps=len(test)+30)[0]\n    df_predict_next_month_sale = df_predict[-30:].sum()\n    sales.append(df_predict_next_month_sale)","f82581d4":"print(\"Select shop ID for prediction of nov 2015 sale\")\n\"\"\"loop_condition= True\nwhile(loop_condition == True):\n    a= int(input())\n    if a in shop_id_list:\n        loop_condition = False\n        print(\" shop_id : \",a)\n    else:\n        print(\" please enter valid shop_id\")\"\"\"\na = 31","7011c540":"print(\"Select Item ID for prediction of nov 2015 sale\")\n\"\"\"loop_condition= True\nwhile(loop_condition == True):\n    b= int(input())\n    if b in item_id_list:\n        loop_condition = False\n        print(\" item_id : \",b)\n    else:\n        print(\" please enter valid item_id\")\"\"\"\nb = 20949","0962288e":"def predict_main_model():\n        data = data_collector(a,b)\n        Hypertunning_parameter_ARIMA_model(data)\n\n            ","43b696b8":"predict_main_model()","4919fe77":"fig = go.Figure(go.Indicator(\n    mode = \"number\",\n    value = int(sales[0]),\n    title = {'text': \"Nov 2015 total sales count\"},\n    domain = {'x': [0, 1], 'y': [0, 1]}\n))\nfig.show()","78a5840d":"# Predict Future Sales\n\n<a id=\"top\"><\/a>\n\n<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n<h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\"  role=\"tab\" aria-controls=\"home\">navigation<\/h3>\n\n* [1. Library](#1)\n* [2. Data reading](#2)\n* [3. Visualization](#3)\n* [4. Data collection](#4)\n* [5. Hypertunning ARIMA model](#5)\n* [6. Predicted total sale on Nov 2015](#6)\n","0b168635":"<a id=\"6\"><\/a>\n\n# Predicted total sale on Nov 2015 ","96b88598":"<a id=\"4\"><\/a>\n\n# Data collection","b6f7655f":"<a id=\"3\"><\/a>\n\n# Visualization","573d8af5":"<a id=\"5\"><\/a>\n\n# Hypertunning ARIMA model","f3aa6637":"<a id=\"2\"><\/a>\n\n# Data reading","11dc7691":"<a id=\"1\"><\/a>\n\n# Library"}}