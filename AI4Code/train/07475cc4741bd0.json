{"cell_type":{"747f6fb6":"code","8980a79a":"code","1b58b0ce":"code","e6f64f45":"code","e88a9796":"code","041abf57":"code","f9cd0a39":"code","4970c092":"code","b9504cc0":"code","5f1a8a78":"code","d63f84d8":"code","feda0a8c":"code","04ee0510":"code","d29abcbf":"code","2e2d07ae":"code","0b58849a":"code","2e6c8e3c":"code","8c221015":"code","49b9cd6c":"code","234d851d":"code","115819dd":"code","3a523b51":"code","682228fe":"code","63c36450":"code","5e1426a9":"code","0aedaab9":"code","ff87387e":"code","6821f55c":"markdown","d2fa0311":"markdown","f8e82474":"markdown","e1a6096c":"markdown","fb8a2771":"markdown","f39eaf4c":"markdown","38fe48ad":"markdown","27437cc5":"markdown","2602a41e":"markdown","7d2d4bc7":"markdown","1e318765":"markdown","fef6bafa":"markdown","2d462ff8":"markdown","d9854b9c":"markdown","470ff36d":"markdown","3a50a021":"markdown","5abe1d42":"markdown","d42ddd3d":"markdown","d2a90549":"markdown","3a016bbe":"markdown","0e8830b9":"markdown","78a2a1b0":"markdown"},"source":{"747f6fb6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\n # linear algebra\n# data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","8980a79a":"import pandas as pd\nimport numpy as np\nimport seaborn as sb\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom IPython.display import Image\nimport os\n!ls ..\/input\/monkeylearn-pfizer-sentiment-analysis-images","1b58b0ce":"pfizerTweets_df = pd.read_csv('\/kaggle\/input\/pfizer-vaccine-tweets\/vaccination_tweets.csv')","e6f64f45":"pfizerTweets_df.head()","e88a9796":"pfizerTweets_df['is_retweet'].value_counts()","041abf57":"There are no retweets.","f9cd0a39":"pfizerTweets_df.info()","4970c092":"pfizerTweets_df = pfizerTweets_df.drop(['user_name',\n 'user_description',\n 'user_created',\n 'user_followers',\n 'user_friends',\n 'user_favourites',\n 'user_verified',\n 'hashtags',\n 'retweets',\n 'favorites',\n 'is_retweet'],1)","b9504cc0":"list(pfizerTweets_df)","5f1a8a78":"sum(pfizerTweets_df['id'].duplicated())","d63f84d8":"sum(pfizerTweets_df['text'].duplicated())","feda0a8c":"pfizerTweets_df[\"source\"] = pfizerTweets_df[\"source\"].str.replace(r'<(?:a\\b[^>]*>|\/a>)', '')\npfizerTweets_df[\"text\"] = pfizerTweets_df[\"text\"].str.replace(r'<(?:a\\b[^>]*>|\/a>)', '')","04ee0510":"pfizerTweets_df['date'].dtypes","d29abcbf":"pfizerTweets_df['date'] = pd.to_datetime(pfizerTweets_df['date'])","2e2d07ae":"pfizerTweets_df.info()","0b58849a":"da_df = pfizerTweets_df.id.groupby([pfizerTweets_df[\"date\"].rename('Year').dt.year, pfizerTweets_df[\"date\"].rename('Month').dt.month]).count()\nda_df.plot(kind = 'bar', figsize=(20,10), grid = True, fontsize = 18 , x = 'date', title = 'Tweet mentions of Pfizer Vaccine').set_ylabel('Number of tweets')\nax = plt.gca()\nplt.show();","2e6c8e3c":"pfizerTweets_df.to_csv('cleaned_pfizer_vaccine_tweets.csv', index = False, encoding = 'utf-8')","8c221015":"Image(\"..\/input\/monkeylearn-pfizer-sentiment-analysis-images\/Overall.png\")","49b9cd6c":"Image(\"..\/input\/monkeylearn-pfizer-sentiment-analysis-images\/Negative.png\")","234d851d":"Image(\"..\/input\/monkeylearn-pfizer-sentiment-analysis-images\/Neutral.png\")","115819dd":"Image(\"..\/input\/monkeylearn-pfizer-sentiment-analysis-images\/Positive.png\")","3a523b51":"sentiment_df = pd.read_csv('..\/input\/monkeylearn-pfizer-vaccine-300-tweets\/processed_batch 300 tweets.csv')","682228fe":"no_tweets =  len(sentiment_df.query('Classification == \"Negative\"')) + len(sentiment_df.query('Classification == \"Neutral\"')) + len(sentiment_df.query('Classification == \"Positive\"'))\nno_tweets","63c36450":"labels = 'Negative', 'Neutral','Positive'\nsizes = [(len(sentiment_df.query('Classification == \"Negative\"'))\/no_tweets),(len(sentiment_df.query('Classification == \"Neutral\"'))\/no_tweets),(len(sentiment_df.query('Classification == \"Positive\"'))\/no_tweets)]\nplt.suptitle('Percentage of tweets', fontsize=24)\nexplode = (0, 0, 0)\n\nfig1, ax1 = plt.subplots()\nax1.pie(sizes, explode=explode, labels=labels, autopct='%1.1f%%',\n        shadow=True, startangle=90)\nax1.axis('equal')  # Equal aspect ratio ensures that pie is drawn as a circle.\n\nplt.show()","5e1426a9":"sentiment_df.user_location = sentiment_df.user_location.str.replace('^[a-z]+','None')\nsentiment_df ['user_location'] = sentiment_df ['user_location'].astype(str)\nsentiment_relation[\"user_location\"] = sentiment_relation[\"user_location\"].str.replace(r'<(?:a\\b[^>]*>|\/a>)', '')\nsentiment_df.info()","0aedaab9":"sentiment_relation = sentiment_df.groupby(['user_location', 'Classification'], as_index=False).count()\nsentiment_relation = sentiment_relation[['user_location', 'Classification']]\nplt.figure(figsize=[30,3])\nplt.suptitle('Relationship between user location and sentiment ', fontsize=24)\nplt.xlabel('User Location', fontsize=18)\nplt.xticks(rotation=90)\nplt.ylabel('Sentiment', fontsize=18)\nplt.scatter(sentiment_relation.user_location, sentiment_relation.Classification);","ff87387e":"def sentiment_confidence(x):\n    confidence_max, confidence_min = 1, 0\n    if(x>confidence_max): \n        x=confidence_max\n    elif(x<confidence_min):\n        x=confidence_min\n    return x\nsentiment_df.Confidence = sentiment_df.Confidence.apply(sentiment_confidence)\nplt.figure(figsize=[40,3])\nplt.suptitle('Relationship between user location and sentiment with confidence level of sentiment', fontsize=24)\nplt.xlabel('User Location', fontsize=18)\nplt.xticks(rotation=90)\nplt.ylabel('Sentiment', fontsize=18)\nplt.scatter(x=sentiment_df.user_location, y=sentiment_df.Classification, alpha=.9, c=sentiment_df.Confidence)\ncolorBar = plt.colorbar();\ncolorBar.set_label(\"Confidence\",fontsize=18, labelpad=+2)\nplt.show()","6821f55c":"# A Sentiment Analysis of Pfizer Vaccine via Tweets\n\n1. Introduction\n2. Data analysis;\n3. Method for sentiment analysis;\n4. Results;\n5. Comments and conclusions.\n\n","d2fa0311":"This is the Negative Confidence level of the model.","f8e82474":"This graph shows the sentiment of the tweets including the confidence level of each sentiment.","e1a6096c":"## The Sentiment analysis was done using MonkeyLearn.\n82 texts have been used to train the model.\n\nThe result can be found in the ..\/input\/monkeylearn-pfizer-vaccine-300-tweets\/processed_batch 300 tweets.csv","fb8a2771":"\n# 5. Comments and conclusions.","f39eaf4c":"This is the Neutral Confidence level of the model.","38fe48ad":"# 2. Data analysis;\n","27437cc5":"now we will export this dataframe.","2602a41e":"# 1. Introduction\nHere we will perform a sentiment analysis on the Pfizer vaccine tweets.","7d2d4bc7":"From this graph we can see that the data contains tweets from December 2020 and January 2021.","1e318765":"Check for duplicate tweets","fef6bafa":"# 4. Results;\nThese are the results.","2d462ff8":"Change the column text and source to text format","d9854b9c":"# 3. Method for sentiment analysis;\n\nFor the sentiment analysis I used MonkeyLearn. https:\/\/monkeylearn.com\/","470ff36d":"Most of the tweets analyzed were neutral as they were reporting facts and have neither a positive or negative sentiment.\nThe sentiment analysis was done for only 300 tweets as it is a limit by my acount at MonkeyLearn.","3a50a021":"This is the Positive Confidence level of the model.","5abe1d42":"I will remove columns that I don't need for the sentiment analysis such as:\n1. user_description\n2. user_created\n3. user_followers\n4. user_friends\n5. user_favourites\n6. user_verified\n7. hashtags\n8. retweets\n9. favorites\n10. is_retweet","d42ddd3d":"This is the overall Confidence level of the model.","d2a90549":"The date column was converted to datetime64 format instead of an object","3a016bbe":"As shown from the pie chart most of the tweets were neutral at 62.3%.\nPositive at 29.3% and Negative at 8.3%","0e8830b9":"Here the relationship between the user location and sentiment is displayed.","78a2a1b0":"monkeylearn-pfizer-sentiment-analysis-images"}}