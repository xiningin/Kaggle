{"cell_type":{"e6ab061c":"code","ea658572":"code","895a969e":"code","8a6ff7f5":"code","c769a5fe":"code","66deaaa8":"code","4b0b1048":"code","0618b03e":"code","950ca484":"code","ed6ecdfe":"code","7069821c":"code","cd6e44cc":"code","00c81477":"code","227298e2":"code","7ffe53c5":"markdown","2e32a2f4":"markdown","3549a188":"markdown","f4e63205":"markdown","1ede4fd8":"markdown","f4ed376e":"markdown","c1764621":"markdown","55d228b4":"markdown","8397b4be":"markdown","83490ad1":"markdown","71379660":"markdown","df6c1910":"markdown","c43bf41e":"markdown","2558cec8":"markdown","ad54fa13":"markdown","b05dff8d":"markdown","f605ee36":"markdown","a7a1e936":"markdown","63255c71":"markdown","472e4df2":"markdown"},"source":{"e6ab061c":"import numpy as np\nimport pandas as pd\n\n# For Visualizations\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport matplotlib.gridspec as gridspec\nimport matplotlib.patches as mpatches\nimport matplotlib.cm as cm\nimport matplotlib.lines as mlines\nimport matplotlib.ticker as ticker\nfrom pylab import rcParams\ndef style(sty):\n    plt.style.use(sty)\nstyle('seaborn')\ndef figure(b,l):\n    rcParams['figure.figsize']=(b,l)\n\n# Other Modules\nimport os\nimport re\nfrom tqdm import tqdm_notebook\nimport warnings\nwarnings.filterwarnings('ignore')","ea658572":"# Loading Data\ndata=pd.read_csv('\/kaggle\/input\/120-years-of-olympic-history-athletes-and-results\/athlete_events.csv')\nnoc_data=pd.read_csv('\/kaggle\/input\/120-years-of-olympic-history-athletes-and-results\/noc_regions.csv')\n\n# Preprocessing Data\ngender_map={'M':0,'F':1}\ndata['IsFemale']=data['Sex'].map(gender_map)\n#data.drop('Sex',axis=1,inplace=True)\n\ndef extract_year(val):\n    year=val[:val.index(' ')]\n    year=int(year)\n    return year\n\ndef extract_season(val):\n    season=val[val.index(' ')+1:]\n    return season\n\ndata['Year']=data['Games'].apply(extract_year)\ndata['Season']=data['Games'].apply(extract_season)\ndata.drop('Games',axis=1,inplace=True)\n\ndata['Medal']=data['Medal'].fillna('None')\nmedal_dummies=pd.get_dummies(data['Medal'],prefix='Medal')\ndata=pd.concat([data,medal_dummies],axis=1)\ndata=data.drop('Medal',axis=1)\n\n#for col in ['Age','Height','Weight']:\n#    data[col]=data[col].fillna('NA')\n\nevent_data=[]\nfor ind,row in data.iterrows():\n    event_data.append(re.sub(row['Sport'],'',row['Event'],count=1)[1:])\ndata['Event']=pd.Series(event_data,index=data.index)\n\nprint(\"Data Sample\")\ndata.head()","895a969e":"season_year_data=data.groupby(['Year','Season'])['ID'].aggregate('count').reset_index()\n\nsummer_years=season_year_data[season_year_data['Season']=='Summer'][['Year','ID']]\nwinter_years=season_year_data[season_year_data['Season']=='Winter'][['Year','ID']]\n\nmin_year=min(season_year_data['Year'])\nmax_year=max(season_year_data['Year'])\nyears=np.arange(min_year,max_year+1)\nsome_years=[x for x in enumerate(years) if x[1]%10==0]\n\nsummer_cnt=np.zeros(len(years));summer_countries=np.zeros(len(years))\nwinter_cnt=np.zeros(len(years));winter_countries=np.zeros(len(years))\nfor ind,yr in enumerate(years):\n    if(yr in summer_years['Year'].values):\n        summer_cnt[ind]=summer_years[summer_years['Year']==yr]['ID']\n        summer_countries[ind]=data[(data['Year']==yr)&(data['Season']=='Summer')]['NOC'].nunique()\n    if(yr in winter_years['Year'].values):\n        winter_cnt[ind]=winter_years[winter_years['Year']==yr]['ID']\n        winter_countries[ind]=data[(data['Year']==yr)&(data['Season']=='Winter')]['NOC'].nunique()\n\nsummer_cnt_per_country=np.zeros(len(years))\nwinter_cnt_per_country=np.zeros(len(years))\nfor ind,yr in enumerate(years):\n    if(summer_countries[ind]!=0):\n        summer_cnt_per_country[ind]=summer_cnt[ind]\/summer_countries[ind]\n    else:\n        summer_cnt_per_country[ind]=0\n    if(winter_countries[ind]!=0):\n        winter_cnt_per_country[ind]=winter_cnt[ind]\/winter_countries[ind]\n    else:\n        winter_cnt_per_country[ind]=0\n\nfigure(12,6)\nfig,ax=plt.subplots(3,1,sharex=True,constrained_layout=True)\nfig.suptitle(\"Olympics Timeline\",fontsize=20)\nx_axis=np.arange(len(years))\n\nax[0].bar(x_axis,summer_cnt,label='Summer',color='red')\nax[0].bar(x_axis,winter_cnt,bottom=summer_cnt,label='Winter',color='blue')\nax[0].legend(loc='upper left',fontsize='large')\nax[0].set_ylabel(\"No. of Participants\")\nax[0].yaxis.set_label_position('right')\nax[0].set_xticks([])\nax[0].spines['top'].set_visible(False)\nax[0].spines['right'].set_visible(False)\nax[0].tick_params(bottom=False,left=False)\n\nax[1].bar(x_axis,summer_countries,color='red')\nax[1].bar(x_axis,winter_countries,bottom=summer_countries,color='blue')\nax[1].set_ylabel(\"No. of Countries\")\nax[1].yaxis.set_label_position('right')\nax[1].spines['top'].set_visible(False)\nax[1].spines['right'].set_visible(False)\nax[1].tick_params(bottom=False,left=False)\n\nax[2].bar(x_axis,summer_cnt_per_country,color='red')\nax[2].bar(x_axis,winter_cnt_per_country,bottom=summer_cnt_per_country,color='blue')\nax[2].set_ylabel(\"Participant per Country\")\nax[2].yaxis.set_label_position('right')\nax[2].set_xticks([x[0] for x in some_years])\nax[2].set_xticklabels([x[1] for x in some_years],rotation=45)\nax[2].spines['top'].set_visible(False)\nax[2].spines['right'].set_visible(False)\nax[2].tick_params(bottom=False,left=False)\n\nplt.show()","8a6ff7f5":"def extract_male_female_count(data):\n    gender_data=list(data.groupby(['ID','IsFemale'])['Name'].aggregate('count').reset_index()['IsFemale'].values)\n    males=gender_data.count(0)\n    females=gender_data.count(1)\n    return males,females\n\nmales,females=extract_male_female_count(data)\nsummer_data=data[data['Season']=='Summer']\nwinter_data=data[data['Season']=='Winter']\nsummer_males,summer_females=extract_male_female_count(summer_data)\nwinter_males,winter_females=extract_male_female_count(winter_data)\n\nsummer_women_repr=[]\nsummer_years=[]\nwinter_women_repr=[]\nwinter_years=[]\nfor ind,yr in enumerate(years):\n    summer_year_data=summer_data[summer_data['Year']==yr]\n    if(summer_year_data.shape[0]!=0):\n        summer_yearly_gender_males,summer_yearly_gender_females=extract_male_female_count(summer_year_data)\n        summer_women_repr.append(summer_yearly_gender_females\/summer_yearly_gender_males)\n        summer_years.append(yr)\n    winter_year_data=winter_data[winter_data['Year']==yr]\n    if(winter_year_data.shape[0]!=0):\n        winter_yearly_gender_males,winter_yearly_gender_females=extract_male_female_count(winter_year_data)\n        winter_women_repr.append(winter_yearly_gender_females\/winter_yearly_gender_males)\n        winter_years.append(yr)\n        \nfigure(12,8)\nfig=plt.figure(constrained_layout=True)\ngs=fig.add_gridspec(2,2)\nax=[0,0,0]\nax[0]=fig.add_subplot(gs[0,0])\nax[1]=fig.add_subplot(gs[0,1])\nax[2]=fig.add_subplot(gs[1,:])\n\ncircle=plt.Circle((0,0),radius=0.5,color='white')\nax[0].pie([males,females],startangle=90,colors=['red','darkblue'],counterclock=False)\nax[0].set_title(\"Male vs. Female Representation\\nin Olympics\",fontsize=15)\nax[0].legend(['Male','Female'],loc=(0.05,0.25),facecolor='w',edgecolor='black',framealpha=1,frameon=True,fontsize=13)\nax[0].add_artist(circle)\n\nblue=['darkblue','dodgerblue']\nblue_labels=['Winter - Male','Winter - Female']\nred=['red','orange']\nred_labels=['Summer - Male','Summer - Female']\nblue_handles=[mpatches.Patch(color=blue[i],label=blue_labels[i]) for i in [0,1]]\nred_handles=[mpatches.Patch(color=red[i],label=red_labels[i]) for i in [0,1]]\ncircle=plt.Circle((0,0),radius=0.4,color='white')\nax[1].pie([summer_males,summer_females],radius=1,counterclock=False,colors=red,startangle=90)\nax[1].pie([winter_males,winter_females],radius=0.68,counterclock=False,colors=blue,startangle=90)\nax[1].set_title(\"Male vs. Female Representation\\nin Summer and Winter Games\",fontsize=15)\nlegend1=ax[1].legend(handles=red_handles,loc=(0.7,0.7),facecolor='w',framealpha=1,edgecolor='black',frameon=True)\nlegend2=ax[1].legend(handles=blue_handles,loc=(0,0.25),facecolor='w',framealpha=1,edgecolor='black',frameon=True)\nax[1].add_artist(legend1)\nax[1].add_artist(legend2)\nax[1].add_artist(circle)\n\nsns.lineplot(summer_years,summer_women_repr,ax=ax[2],color='red')\nsns.lineplot(winter_years,winter_women_repr,ax=ax[2],color='blue')\nax[2].set_title(\"Woman to Man Ratio over the Years\",fontsize=15)\nax[2].set_ylabel(\"Woman to Man Ratio\")\nax[2].legend(['Summer Games','Winter Games'],loc=(0.05,0.8))\nax[2].spines['top'].set_visible(False)\nax[2].spines['right'].set_visible(False)\nax[2].tick_params(bottom=False,left=False)\n\nplt.show()","c769a5fe":"gender_sport_cnt={};gender_sport_female_repr={}\nsports=data['Sport'].unique()\nfor sport in sports:\n    sport_data=data[data['Sport']==sport]\n    sport_male_cnt,sport_female_cnt=extract_male_female_count(sport_data)\n    gender_sport_cnt[sport]=sport_female_cnt+sport_male_cnt\n    if(sport_male_cnt!=0):\n        gender_sport_female_repr[sport]=sport_female_cnt\/sport_male_cnt\n    else:\n        gender_sport_female_repr[sport]=1000\n\nsports_cnt=pd.Series(list(gender_sport_cnt.values()))\nthreshold=np.round(np.percentile(sports_cnt,25))\nprint(\"Not Considering Sports with less than {thr} Participants...\".format(thr=int(threshold)))\nfor sport in sports:\n    if(gender_sport_cnt[sport]<threshold):\n        gender_sport_cnt.pop(sport)\n        gender_sport_female_repr.pop(sport)\n        \npopular_sports=list(sorted(gender_sport_cnt.items(),key=lambda x:x[1],reverse=True)[:10])\npopular_sports_stats=[]\nfor sport in popular_sports:\n    popular_sports_stats.append((sport[0],sport[1],gender_sport_female_repr[sport[0]]))\n    \npopular_sports_data=pd.DataFrame.from_dict(popular_sports_stats)\npopular_sports_data.columns=['Sport','Total Participant Count','Woman to Man Ratio']\ng=sns.PairGrid(popular_sports_data,x_vars=['Total Participant Count','Woman to Man Ratio'],\n               y_vars=['Sport'],height=6,aspect=1)\ng.fig.suptitle(\"Gender Representation in Popular Sports\",fontsize=17,va='bottom')\ng.map(sns.stripplot,size=13,orient=\"h\",color='mediumblue')\ng.set(ylabel='')\nfor ax in g.axes.flat:\n    ax.xaxis.grid(False)\n    ax.yaxis.grid(True)\n    ax.tick_params(left=False,axis='both',labelsize=13)\nsns.despine(bottom=True,left=True)\nplt.show()","66deaaa8":"def extract_avg_biometrics(data):\n    biometric_data=data.groupby(['ID','Age','Weight','Height'])['Name'].aggregate('count').reset_index().drop('Name',axis=1)\n    biometric_data=biometric_data.dropna()\n    avg_age=biometric_data['Age'].mean()\n    avg_weight=biometric_data['Weight'].mean()\n    avg_height=biometric_data['Height'].mean()\n    return avg_age,avg_weight,avg_height\n\npopular_sports=[x[0] for x in popular_sports[:9]]\npi=np.pi\n\nstyle('default')\nfigure(15,12)\nfig,ax=plt.subplots(3,3,subplot_kw=dict(polar=True))\nfig.suptitle(\"Relative Biometrics for Popular Sports\",fontsize=20,va='top')\nplt.subplots_adjust(hspace=0.4,wspace=0.1)\navg_age_min=20;avg_age_max=33\navg_weight_min=65;avg_weight_max=80\navg_height_min=172;avg_height_max=185\nfor ind,sport in enumerate(popular_sports):\n    sport_data=data[data['Sport']==sport]\n    avg_age,avg_weight,avg_height=extract_avg_biometrics(sport_data)\n    row=int(ind\/3);col=int(ind%3)\n    avg_age=(avg_age-avg_age_min)\/(avg_age_max-avg_age_min)\n    avg_weight=(avg_weight-avg_weight_min)\/(avg_weight_max-avg_weight_min)\n    avg_height=(avg_height-avg_height_min)\/(avg_height_max-avg_height_min)\n    plots=[avg_age,avg_weight,avg_height,avg_age]\n    angles=[0,2*pi\/3,4*pi\/3,0]\n    ax[row][col].plot(angles,plots)\n    ax[row][col].fill(angles,plots,'blue',alpha=0.2)\n    ax[row][col].set_rticks([])\n    ax[row][col].set_rmax(1)\n    ax[row][col].set_xticks(angles[:-1])\n    ax[row][col].set_xticklabels(['Age','Weight','Height'])\n    ax[row][col].set_yticks([0.25,0.5,0.75,1])\n    ax[row][col].set_yticklabels([])\n    ax[row][col].grid(True,axis='y')\n    ax[row][col].set_title(sport,fontsize=15)\nplt.show()\nstyle('seaborn')","4b0b1048":"age_data_temp=data.groupby(['Sport','Sex','Age','Weight','Height'])['Name'].aggregate('count').reset_index().drop('Name',axis=1)\nage_data=pd.DataFrame()\nfor sport in popular_sports:\n    popular_sport_data=age_data_temp[age_data_temp['Sport']==sport]\n    age_data=pd.concat([age_data,popular_sport_data])\n\nfigure(12,9)\nfig,ax=plt.subplots(3,1,constrained_layout=True,sharex=True)\nfig.suptitle(\"Gender & Biometric Analysis\",fontsize=20,va='bottom')\n\nsns.violinplot(x='Sport',y='Age',hue='Sex',data=age_data,split=True,ax=ax[0])\nax[0].grid(True,axis='x')\nax[0].grid(False,axis='y')\nax[0].legend(frameon=True,facecolor='w',title='Gender',loc='upper left')\nax[0].set_xlabel('')\n\nsns.violinplot(x='Sport',y='Weight',hue='Sex',data=age_data,split=True,ax=ax[1])\nax[1].grid(True,axis='x')\nax[1].grid(False,axis='y')\nax[1].get_legend().remove()\nax[1].set_xlabel('')\n\nsns.violinplot(x='Sport',y='Height',hue='Sex',data=age_data,split=True,ax=ax[2])\nax[2].grid(True,axis='x')\nax[2].grid(False,axis='y')\nax[2].get_legend().remove()\nax[2].set_xlabel('')\nplt.show()","0618b03e":"city_map={\n(1896,'Athina'):'GRE',\n(1900,'Paris'):'FRA',\n(1904,'St. Louis'):'USA',\n(1906,'Athina'):'GRE',\n(1908,'London'):'GBR',\n(1912,'Stockholm'):'SWE',\n(1920,'Antwerpen'):'BEL',\n(1924,'Chamonix'):'FRA',\n(1924,'Paris'):'FRA',\n(1928,'Amsterdam'):'NED',\n(1928,'Sankt Moritz'):'SUI',\n(1932,'Lake Placid'):'USA',\n(1932,'Los Angeles'):'USA',\n(1936,'Berlin'):'GER',\n(1936,'Garmisch-Partenkirchen'):'GER',\n(1948,'London'):'GBR',\n(1948,'Sankt Moritz'):'SUI',\n(1952,'Helsinki'):'FIN',\n(1952,'Oslo'):'NOR',\n(1956,\"Cortina d'Ampezzo\"):'ITA',\n(1956,'Melbourne'):'AUS',\n(1956,'Stockholm'):'SWE',\n(1960,'Roma'):'ITA',\n(1960,'Squaw Valley'):'USA',\n(1964,'Innsbruck'):'AUT',\n(1964,'Tokyo'):'JPN',\n(1968,'Grenoble'):'FRA',\n(1968,'Mexico City'):'MEX',\n(1972,'Munich'):'FRG',\n(1972,'Sapporo'):'JPN',\n(1976,'Innsbruck'):'AUT',\n(1976,'Montreal'):'CAN',\n(1980,'Lake Placid'):'USA',\n(1980,'Moskva'):'URS',\n(1984,'Los Angeles'):'USA',\n(1984,'Sarajevo'):'YUG',\n(1988,'Calgary'):'CAN',\n(1988,'Seoul'):'KOR',\n(1992,'Albertville'):'FRA',\n(1992,'Barcelona'):'ESP',\n(1994,'Lillehammer'):'NOR',\n(1996,'Atlanta'):'USA',\n(1998,'Nagano'):'JPN',\n(2000,'Sydney'):'AUS',\n(2002,'Salt Lake City'):'USA',\n(2004,'Athina'):'GRE',\n(2006,'Torino'):'ITA',\n(2008,'Beijing'):'CHN',\n(2010,'Vancouver'):'CAN',\n(2012,'London'):'GBR',\n(2014,'Sochi'):'RUS',\n(2016,'Rio de Janeiro'):'BRA'\n}\n\nhost_years=[];host_city=[];host_NOC=[]\nfor key in city_map:\n    host_years.append(key[0])\n    host_city.append(key[1])\n    host_NOC.append(city_map[key])\nhost_NOC=pd.DataFrame.from_dict({'Year':host_years,'City':host_city,'Host_NOC':host_NOC})\ndata=data.join(host_NOC.set_index(['Year','City']),on=['Year','City'])\ndata['Is_Host']=pd.Series(data['NOC']==data['Host_NOC'],index=data.index)\ndata['Is_Host']=data['Is_Host'].map({True:1,False:0})\n\ndef extract_medal_tally(data):\n    medal_data=data.groupby(['Year','City','Host_NOC','NOC'])[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\n    total_data=medal_data.groupby(['Year'])[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\n    host_data=medal_data[medal_data['Host_NOC']==medal_data['NOC']]\n    host_data=host_data.groupby(['Year'])[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\n    host_data['Total_Medals']=host_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1)\n    total_data['Total_Medals']=total_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1)\n    return total_data,host_data\n\nsummer_data=data[data['Season']=='Summer'].reset_index(drop=True)\nsummer_total_data,summer_host_data=extract_medal_tally(summer_data)\n\nwinter_data=data[data['Season']=='Winter'].reset_index(drop=True)\nwinter_total_data,winter_host_data=extract_medal_tally(winter_data)\n\nfigure(12,7)\nfig,ax=plt.subplots(2,2,constrained_layout=True,sharex=True)\nfig.suptitle(\"Host Nation - Medal Share\",fontsize=20,va='bottom')\n\ndatas=[\n    (summer_total_data['Total_Medals'],summer_host_data['Total_Medals']),\n    (summer_total_data['Medal_Gold'],summer_host_data['Medal_Gold']),\n    (winter_total_data['Total_Medals'],winter_host_data['Total_Medals']),\n    (winter_total_data['Medal_Gold'],winter_host_data['Medal_Gold'])\n]\n\ntitles=[\n    'Total Medals - Summer Games',\n    'Gold Medals - Summer Games',\n    'Total Medals - Winter Games',\n    'Gold Medals - Winter Games'\n]\n\nticks=[2000,700,600,200]\n\nsummer_years=summer_total_data['Year']\nwinter_years=winter_total_data['Year']\nyears=[summer_years,summer_years,winter_years,winter_years]\n\nfor index in np.arange(4):\n    row=int(index\/2);col=int(index%2)\n    ax[row,col].plot(years[index],datas[index][0],color='red',label='Total Medals')\n    ax[row,col].plot(years[index],datas[index][1],color='blue',label=\"Host Nation's Medals\")\n    perc=np.divide(datas[index][1],datas[index][0])*100\n    perc=np.mean(perc)\n    ax[row,col].fill_between(x=years[index],y1=datas[index][0],color='red',alpha=0.5)\n    ax[row,col].fill_between(x=years[index],y1=datas[index][1],color='blue',alpha=0.5)\n    ax[row,col].spines['top'].set_visible(False)\n    ax[row,col].spines['right'].set_visible(False)\n    ax[row,col].tick_params(bottom=False,left=False)\n    ax[row,col].set_title(titles[index]+\"\\nShare - {perc:.2f}%\".format(perc=perc),fontsize=13)\n    ax[row,col].yaxis.set_major_locator(ticker.MultipleLocator(ticks[index]))\n    ax[row,col].yaxis.grid(False)\n    if(index==0):\n        ax[row,col].legend(loc='best')\n\nplt.show()","950ca484":"def extract_performance(data,country,thresh=20):\n    country_data=data.groupby(['Year','Host_NOC','NOC'])[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\n    country_data=country_data[country_data['NOC']==country]\n    if(country_data.shape[0]<thresh):\n        return []\n    \n    home_data=country_data[country_data['Host_NOC']==country]\n    home_data=home_data.assign(Total_Medals=home_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1))\n    other_data=country_data[country_data['Host_NOC']!=country]\n    other_data=other_data.assign(Total_Medals=other_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1))\n    \n    home_stats=home_data['Total_Medals'].mean()\n    other_stats=other_data['Total_Medals'].values.tolist()\n    return list(zip([country]*len(other_stats),[home_stats]*len(other_stats),other_stats))\n\ndef extract_country_performance(data,season,thresh=20):\n    host_countries=data.groupby(['Host_NOC','Season'])['Name'].aggregate('count').reset_index().drop('Name',axis=1)\n    season_data=data[data['Season']==season]\n    host_country_stats=[]\n    for index,row in host_countries.iterrows():\n        if(row['Season']==season):\n            host_country_stats.extend(extract_performance(season_data,row['Host_NOC'],thresh))\n    return host_country_stats\n\nhost_nation_summer=extract_country_performance(data,'Summer',25)\nhost_nation_summer=pd.DataFrame(host_nation_summer,columns=['Host_NOC','Home_Stat','Other_Stats'])\n\nhost_nation_winter=extract_country_performance(data,'Winter',15)\nhost_nation_winter=pd.DataFrame(host_nation_winter,columns=['Host_NOC','Home_Stat','Other_Stats'])\n\nhost_nation_summer_performance=host_nation_summer.groupby(['Host_NOC','Home_Stat'])['Other_Stats'].aggregate('count').reset_index().drop('Other_Stats',axis=1)\nhost_nation_winter_performance=host_nation_winter.groupby(['Host_NOC','Home_Stat'])['Other_Stats'].aggregate('count').reset_index().drop('Other_Stats',axis=1)\n\nfig,ax=plt.subplots(2,1,constrained_layout=True, figsize = (12, 10))\nfig.suptitle(\"Home Performance vs. Away Performance\",fontsize=20,va='bottom')\n\nsns.pointplot(x='Home_Stat',y='Host_NOC',data=host_nation_summer_performance,color='red',markers='o',fontsize=10,join=False,ax=ax[0])\nsns.boxplot(x='Other_Stats',y='Host_NOC',color='lightcoral',data=host_nation_summer,showfliers=False,orient='h',ax=ax[0])\nax[0].spines['top'].set_visible(False)\nax[0].spines['right'].set_visible(False)\nax[0].spines['left'].set_visible(False)\nax[0].spines['bottom'].set_visible(False)\nax[0].tick_params(bottom=False,left=False)\nax[0].set_ylabel('')\nax[0].set_xlabel('')\nax[0].set_title(\"Summer Olympics\",fontsize=15)\nax[0].yaxis.grid(True)\nax[0].xaxis.grid(False)\ncatplot_patch=mpatches.Patch(color='lightcoral',label='Away Performances')\npoint_patch=mlines.Line2D([],[],color='red',marker='o',label='Home Performances',linestyle='None')\nax[0].legend(handles=[catplot_patch,point_patch],loc='best')\n\nsns.boxplot(x='Other_Stats',y='Host_NOC',color='mediumslateblue',data=host_nation_winter,showfliers=False,orient='h',ax=ax[1])\nsns.pointplot(x='Home_Stat',y='Host_NOC',data=host_nation_winter_performance,color='blue',markers='o',fontsize=10,join=False,ax=ax[1])\nax[1].spines['top'].set_visible(False)\nax[1].spines['right'].set_visible(False)\nax[1].spines['left'].set_visible(False)\nax[1].spines['bottom'].set_visible(False)\nax[1].tick_params(bottom=False,left=False)\nax[1].set_ylabel('')\nax[1].set_xlabel('')\nax[1].set_title(\"Winter Olympics\",fontsize=15)\nax[1].yaxis.grid(True)\nax[1].xaxis.grid(False)\ncatplot_patch=mpatches.Patch(color='mediumslateblue',label='Away Performances')\npoint_patch=mlines.Line2D([],[],color='blue',marker='o',label='Home Performances',linestyle='None')\nax[1].legend(handles=[catplot_patch,point_patch],loc='best')\n\n\nplt.close(3)\nplt.close(2)\nplt.show()","ed6ecdfe":"def extract_sport_dominance(sports_data,sport):\n    sport_data=sports_data[sports_data['Sport']==sport].sort_values(by='Total_Medals',ascending=False)\n    #print(sport_data.head(10))\n    sport_stats=sport_data['Total_Medals'].values.tolist()\n    sport_total=sum(sport_stats)\n    sport_noncum_perc=np.array(sport_stats)\/sport_total\n    sport_perc=np.cumsum(sport_noncum_perc)\n    half_perc=np.ones(sport_perc.shape[0])*0.4\n    half_perc_index=list(np.greater_equal(sport_perc,half_perc)).index(True)+1\n    bins=np.arange(0.01,1.01,0.01)\n    indices=np.digitize(bins,sport_perc,right=False)\n    sport_perc=np.append([0],sport_perc)\n    sport_perc=np.append(sport_perc,[1])\n    vals=np.flip(np.array([sport_perc[x+1]-sport_perc[x] for x in indices]))\n    vals=vals.reshape((10,10))\n    imp_sports=sport_data['NOC'].values.tolist()[:half_perc_index]\n    imp_perc=sport_noncum_perc[:half_perc_index]\n    return vals,imp_sports,imp_perc\n\nsports_data=data.groupby(['Sport','NOC'])[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\nsports_data['Total_Medals']=sports_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1)\n\ndominated=sports_data.groupby('Sport')['Total_Medals'].aggregate(['std','count']).reset_index()\ndominated=dominated.dropna()\ndominated=dominated[dominated['count']>25]\ndominated_sports=dominated.sort_values(by='std',ascending=False)['Sport'].head(6).values.tolist()\n\nfigure(12,7)\nfig,ax=plt.subplots(2,3,constrained_layout=True)\nfig.suptitle(\"Dominance in Sports - Medal Share Analysis\",fontsize=20,va='bottom')\ncmap=cm.get_cmap('Blues')\nfor index,sport in enumerate(dominated_sports):\n    row=int(index\/3);col=int(index%3)\n    sport_dominance,imp_sports,imp_perc=extract_sport_dominance(sports_data,sport)\n    sns.heatmap(sport_dominance,cmap=cmap,square=True,xticklabels=[],yticklabels=[],ax=ax[row,col],linewidth=0.1)\n    imp_cnt=len(imp_perc)\n    handles=[]\n    for i in range(imp_cnt):\n        handles.append(mpatches.Patch(color=cmap(imp_perc[i]\/imp_perc[0]),label=imp_sports[i]))\n    ax[row,col].set_title(sport,fontsize=15)\n    ax[row,col].legend(handles=handles,frameon=True,loc='best')\nplt.show()","7069821c":"events=data.groupby(['Season','Sport','Event'])['Name'].aggregate('count').reset_index()\nevents=events[events['Name']>=300]\n\ndef shorten_name(name):\n    words=name.split(' ')\n    if(len(words)<=3):\n        return name\n    else:\n        return ' '.join(words[:3])\n\ndef merge_name_event_sport(name,event,sport):\n    return name+'\\n'+event+' ('+sport+')'\n\ndominant_players=[]\nfor ind,row in events.iterrows():\n    event_data=data[(data['Season']==row['Season'])&(data['Sport']==row['Sport'])&(data['Event']==row['Event'])]\n    total_years=event_data['Year'].nunique()\n    event_data=event_data[event_data['Medal_None']==0]\n    if(event_data.shape[0]==0):\n        continue\n    event_data['Total_Medals']=event_data.apply(lambda x:x['Medal_Gold']+x['Medal_Silver']+x['Medal_Bronze'],axis=1)\n    event_players_data=event_data.groupby('Name')['Total_Medals'].aggregate('sum').reset_index()\n    event_players_data=event_players_data[event_players_data['Total_Medals']>0]\n    event_players_data=event_players_data.sort_values(by='Total_Medals',ascending=False)\n    event_players_data=event_players_data[event_players_data['Total_Medals']>=5]\n    players_row=[]\n    for ind2,row2 in event_players_data.iterrows():\n        players_row.append([row['Season'],row['Sport'],row['Event'],row2['Name'],row2['Total_Medals'],total_years])\n    dominant_players.extend(players_row)\n    \nsummer_player_plots={}\nwinter_player_plots={}\nfor player in dominant_players:\n    player_data=data[(data[\"Name\"]==player[3])&(data['Season']==player[0])&(data['Sport']==player[1])&(data['Event']==player[2])]\n    player_data=player_data[player_data['Medal_None']==0]\n    colors=[];years=[]\n    for ind2,row2 in player_data.iterrows():\n        if(row2['Medal_Gold']==1):\n            colors.append('Gold')\n        elif(row2['Medal_Silver']==1):\n            colors.append('Silver')\n        else:\n            colors.append('Bronze')\n    years=player_data['Year'].values.tolist()\n    if(player[0]=='Summer'):\n        summer_player_plots[merge_name_event_sport(shorten_name(player[3]),player[2],player[1])]={\n            'Colors':colors,\n            'Years':years}\n    else:\n        winter_player_plots[merge_name_event_sport(shorten_name(player[3]),player[2],player[1])]={\n            'Colors':colors,\n            'Years':years}\n\ntotal_summer_player_data=pd.DataFrame(columns=['Years','Name','Color'])\nfor index,plot in enumerate(summer_player_plots):\n    x=summer_player_plots[plot]['Years']\n    num_pts=len(x)\n    y=[plot]*num_pts\n    colors=summer_player_plots[plot]['Colors']\n    player_data=pd.DataFrame(list(zip(x,y,colors)),columns=['Years','Name','Color'])\n    total_summer_player_data=pd.concat([total_summer_player_data,player_data])\n    \ntotal_winter_player_data=pd.DataFrame(columns=['Years','Name','Color'])\nfor index,plot in enumerate(winter_player_plots):\n    x=winter_player_plots[plot]['Years']\n    num_pts=len(x)\n    y=[plot]*num_pts\n    colors=winter_player_plots[plot]['Colors']\n    player_data=pd.DataFrame(list(zip(x,y,colors)),columns=['Years','Name','Color'])\n    total_winter_player_data=pd.concat([total_winter_player_data,player_data])\n    \nfigure(12,13)\nfig=plt.figure(constrained_layout=True)\ngs=fig.add_gridspec(6,1)\nax=[0,0]\nax[0]=fig.add_subplot(gs[0:4])\nax[1]=fig.add_subplot(gs[4:6])\nfig.suptitle(\"Most Successful Participants in Events\",fontsize=20,va='bottom')\n\nsns.scatterplot(\n    x='Years',\n    y='Name',\n    hue='Color',\n    palette={'Gold':'gold','Silver':'silver','Bronze':'peru'},\n    data=total_summer_player_data,\n    ax=ax[0])\nax[0].legend(loc=(0.05,0.85),frameon=True,facecolor='w')\nax[0].xaxis.grid(False)\nax[0].set_title(\"Summer Games\",fontsize=15)\nax[0].set_ylabel('')\nax[0].set_xlabel('')\n\nsns.scatterplot(\n    x='Years',\n    y='Name',\n    hue='Color',\n    palette={'Gold':'gold','Silver':'silver','Bronze':'peru'},\n    data=total_winter_player_data,\n    ax=ax[1])\nax[1].legend(frameon=True,loc=(0.05,0.5),facecolor='w')\nax[1].xaxis.grid(False)\nax[1].set_title(\"Winter Games\",fontsize=15)\nax[1].set_ylabel('')\nax[1].set_xlabel('')\n\nplt.show()","cd6e44cc":"print(\"One-Olympic Sports -\\n\")\nindex=1\nfor sport in data['Sport'].unique():\n    sport_data=data[data['Sport']==sport]\n    if(sport_data['Year'].nunique()==1):\n        print(\"{index}. {name} ({year})\".format(index=index,name=sport,year=sport_data['Year'].unique()[0]))\n        index+=1","00c81477":"print(\"Newest Nations -\\n\")\nindex=1\nfor noc in data['NOC'].unique():\n    noc_data=data[data['NOC']==noc]\n    if(noc_data['Year'].min()>=2000):\n        print(\"{index}. {name} ({year})\".format(index=index,name=noc,year=noc_data['Year'].unique()[0]))\n        index+=1","227298e2":"non_gold=data.groupby('Name')[['Medal_Gold','Medal_Silver','Medal_Bronze']].aggregate('sum').reset_index()\nnon_gold=non_gold[non_gold['Medal_Gold']==0]\nnon_gold['Total_Medals']=non_gold.apply(lambda x:x['Medal_Silver']+x['Medal_Bronze'],axis=1)\nnon_gold=non_gold.sort_values(by='Total_Medals',ascending=False).head(5)\nnon_gold=non_gold.drop('Medal_Gold',axis=1).reset_index(drop=True)\nprint(\"5 Most Decorated Athletes without a Gold\\n\")\nfor ind,row in non_gold.iterrows():\n    player_data=data[data['Name']==row['Name']]\n    min_year=player_data['Year'].min()\n    max_year=player_data['Year'].max()\n    sport=player_data['Sport'].unique()[0]\n    if(max_year!=2016):\n        career=str(min_year)+'-'+str(max_year)\n    else:\n        career=str(min_year)+'-?'\n    print(\"{index}. {name} - {sport} ({career})\\nTotal Medals - {tot} : {silver} Silver & {bronze} Bronze\\n\".format(\n        index=ind+1,\n        name=row['Name'],\n        sport=sport,\n        career=career,\n        tot=row['Total_Medals'],\n        silver=row['Medal_Silver'],\n        bronze=row['Medal_Bronze']))","7ffe53c5":"**NOTE**: Events with more than 300 participants only considered\n\nWe look at participants that have won 5 or more medals in a particular sporting event. We can safely assume that an event occurs only once in a given Olympic competition. Thus, a person who has won 5 or more medals in an event has consistently been performing at the highest level for around 15-20 years. Also, if the given player has consistently won Gold in an Event, it is justified to say he has dominated the Event.\n\nThere are around 25 players who have dominated Events in the Summer & Winter Olympics. Out of these, around 4 have always won Gold in their Event. Incredibly, Aladr Gerevich has won six Golds in the Team Event of Men's Sabre in the sport of Fencing. What is more incredible is that these Gold Medals were won over a span of around 40 years, on either side of the World War II!\n\nIt might surprise to see a particular statistic about Aldo Montano. It seems he won a Silver in the 1948 Games and returned in 2004 with a Silver! However, upon some research, it is revealed that Aldo Montana actually has a grandfather, by the same, who won the medals of the 1940s. Thus, due to the same name, the plot wrongly indicates Aldo Montano making a comeback after 56 years!\n\nThis plot might be missing the names of quite a few expected Olympic Superstars like Usain Bolt, Michael Phelps, etc. However, it is worth knowing that Usain Bolt won medals in only three Olympics while Michael Phelps won medals in four Olympics. This justifies their exclusion from this plot, however it does not signify they are not world-class athletes in their respective events.","2e32a2f4":"# Olympics: The Pinnacle of Sports\n## - By Sakshat Rao\n\n### Olypmic Games are arguably the biggest Sporting Event in the world. Inspired by the ancient Olympic Games of the Greek, they provide an extremely competitive platform for nations to showcase their sporting talents. Using the data provided, we will try to extract some interesting facts...","3549a188":"### We will try to analyze the following aspects:\n\n* [Olympics Timeline](#1)\n* [Gender & Biometric Analysis](#2)\n* [Host Nation Performance](#3)\n* [Dominance in Sports](#4)\n* [Miscellaneous Facts](#5)\n\n#### Scroll through the various visualizations and enjoy the beauty of the Olypmics!","f4e63205":"There are 10 Olympic Sports which have featured in just one Olympic Game. Rugby Sevens is the newest Game in Olympics and thus, can be expected to feature in future Olympic Games. Cricket, being one of the most popular sports in the world, has only featured in the 1900 Olympics. It is also interesting to find Aeronautics as an Olympic sport!","1ede4fd8":"**NOTE**: For the above two plots, we have considered the countries which have participated in atleast 25 Summer Games and 15 Winter Games respectively\n\nThe following boxplots give us a very good idea of a host nation's performance in the following way -\n* If the dot is within the corresponding box, then the home performances are comparable to the away performances\n* If the dot is outside the box but within the whiskers, then the home performances are slightly better than the away performances\n* If the dot is outside the whiskers, then the home performances are much better than the away performances\n\nThus, we realize that in case of the Summer Games, there are a few nations which have performed incredibly well at home like Belgium, France, Sweden & Great Britain while Canada seems to have no difference in their home & away performances.\n\nOn the other hand, there seems to be lesser improvement in performances for nations hosting the Winter Games, with only Japan having benefitted well. However, one important aspect that is common for both Summer & Winter Games is that almost all hosting countries have improved their performances in their respective hosted competitions.","f4ed376e":"# Olympics Timeline <a id=\"1\"><\/a>","c1764621":"# Host Nation Performance <a id=\"3\"><\/a>","55d228b4":"**NOTE**: Sports with more than 25 participating countries considered only\n\nHere, we are trying to analyze which sports have been dominated by a handful of countries. One way of doing this is by using standard deviation of the medals won by countries. Sports where a few countries have won most of the medals while others have returned empty-handed can be expected to have a higher standard deviation than those sports where medals have been uniformly won by many countries. Thus, we have a look at the top six sports with highest standard deviation in medal distribution.\n\nIce Hockey is the sport dominated the most by a few countries, namely Canada & USA, with these two countries winning nearly 40% of all medals. USA alone has won nearly 35% of all Swimming medals, nearly 25% of all Athletics medals and nearly 10% of all Rowing medals. Similarly, Netherlands & Italy have dominated Hockey & Fencing respectively.","8397b4be":"We see two very distinct patterns in the timeline - the blue bars (representing the Winter Games) are stacked upon the red bars (representing the Summer Games) till around 1990 after which they are placed between two adjacent red bars. This represents a major change in the format of the Olympics. Till 1992, the Winter Games were held in the same year as the Summer Games. After 1992, the Winter Games started being held two years after the Summer Games. This is what is shown in the Olympic Timeline.\n\nOver the years, the number of participants and countries participating has gradually increased, including a slight increase and subsequent dip between the 1960s and 1980s. Also there were no Olympics in the 1940s, because of World War II occuring during this period. Similarly, we can assume that World War I was responsible for no Olympics during the later part of the 1910s.\n\nAlso, though the number of participants and countries for Winter Games is much lesser than that of the Summer Games, the average number of participants per country slowly becomes comparable for both Games. This is encouraging for the Winter Games, indicating lesser countries but fairer representation of each country than the Summer Games.","83490ad1":"**NOTE**: These are **relative** biometric observations that have been plotted\n\nWe see some interesting aspects about these nine Olympic sports, like -\n\n* Shooting & Sailing participants seem to have relatively older participants\n* Rowing participants have much greater relative height and weight\n* Boxing participants seem to have lesser relative age, height and weight","71379660":"Nations hosting the Winter Olympics seem to have a much lesser medal share than those hosting the Summer Games. Also in these graphs, the vertical distance between the red and blue lineplots indicates the host nation's medal share. More the distance, lesser the host nation's medal share. Therefore, we can also conclude that the medal share of the host nation has steadily been decreasing over the years.","df6c1910":"Let us now analyze the biometrics for males and females in various popular sports. We can list down some nice observations here -\n* There doesn't seem to be a lot of difference in ages of males and females in these sports\n* In almost all of these sports, the average weight and height of males tends to be more than that of females\n* For Boxing, weight and height of male and female participants seems comparable","c43bf41e":"We end the analysis with a nice statistic - the most decorated athletes in Olympics who have never won a Gold Medal. We realize that this distinction goes to Franziska van Almsick who has won an incredible 10 Olympic Medals, without any of them being Golden in color.","2558cec8":"We can see that Athletics has an incredibly high number of participants, maybe because of the various events that occur under it. We also realize that Athletics has decent gender representation, with the female to male ratio being around 0.4. Other popular sports with extremely poor gender equality include Boxing & Wrestling. On the other hand, Gymnastics & Swimming have better gender representation than the other sports.","ad54fa13":"# Dominance in Sporting Events <a id=\"4\"><\/a>","b05dff8d":"# Conclusion\n\n## Hope you enjoyed the analysis!","f605ee36":"# Miscellaneous Facts <a id=\"5\"><\/a>","a7a1e936":"There have been eleven new nations participating in the Olympics since the 2000s. In order, these are Eritrea, Palau, East Timor, Refugee Olympic Team, Federated States of Micronesia, Montenegro, Marshall Islands, Kiribati, Tuvalu, Kosovo and South Sudan.","63255c71":"Men have largely dominated the Olympics, with about 75% participants being male. However, the female representation is slightly better in the Winter Olympics than in the Summer Olympics.\n\nIf we look at the female representation over the years, we realize that it has always stayed below 50%. But the encouraging statistic is that it is gradually increasing. Currently, for every 100 men, there are about 80 women in the Summer Games and about 60 women in the Winter Games.\n\nAlso there existed a period around the 1960s when Winter Games had an unusually high woman to man ratio. Upon some research, we realize that the 1960 Winter Games was, in fact, a very important event. It was the first to feature female speed skating events, first to have a dedicated Athlete's Village and first to tabulate results using a computer. Also the 1956 Winter Games were televised for the first time. These events might have led to a lot of publicity for the 1960 Winter Games, possibly resulting in this abnormal increase in female representation.","472e4df2":"# Gender & Biometric Analysis <a id=\"2\"><\/a>"}}