{"cell_type":{"1699137b":"code","01db8c92":"code","f0773ba3":"code","6af21180":"code","1889720a":"code","064f18ca":"code","7d823577":"code","fc9c5126":"code","cd2be2d3":"code","4838738b":"code","e6830e4e":"markdown","a49bf947":"markdown","856d0efe":"markdown","752cb242":"markdown","96443bd0":"markdown","839e45c7":"markdown"},"source":{"1699137b":"\nimport numpy as np\nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport geopandas as gpd\nfrom geopy.geocoders import Nominatim\nimport folium\nfrom folium import plugins\nfrom folium.plugins import HeatMap\nimport os\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\nplt.style.use('fivethirtyeight')","01db8c92":"df = pd.read_csv('..\/input\/indias-air-quality-index\/Air_Quality.csv')\ndf.head()","f0773ba3":"df.info()","6af21180":"df.isna().mean().round(4) * 100","1889720a":"plt.figure(figsize=(10, 6))\n\n\ng=df.groupby(['city'])['pollutant_avg'].mean().nlargest(10).reset_index()\nclrs = ['grey' if (x < max(g.pollutant_avg)) else 'red' for x in g.pollutant_avg.values]\nax=sns.barplot(data=g,x='city',y='pollutant_avg',palette='magma',linewidth=10)\nfor p in ax.patches:\n    ax.annotate(format((p.get_height()), '.2f'),\n                   (p.get_x() + p.get_width() \/ 2., p.get_height()),\n                   ha='center', va='top',\n                   size=12,\n                   xytext=(0, 13),\n                   textcoords='offset points')\nplt.tick_params(left = False,labelleft = False)\nplt.xticks(rotation=315)\nplt.title('Top 10 Cities with highest pollution')\nplt.show()","064f18ca":"plt.figure(figsize=(10, 6))\npalette = sns.light_palette(\"seagreen\", as_cmap=True)\ng=df.groupby(['city'])['pollutant_avg'].mean().nsmallest(10).reset_index()\nax=sns.barplot(data=g,x='city',y='pollutant_avg',palette='YlGn')\nfor p in ax.patches:\n    ax.annotate(format((p.get_height()), '.2f'),\n                   (p.get_x() + p.get_width() \/ 2., p.get_height()),\n                   ha='center', va='top',\n                   size=12,\n                   xytext=(0, 13),\n                   textcoords='offset points')\nplt.tick_params(left = False,labelleft = False)\nplt.xticks(rotation=315)\nplt.title('Top 10 Cities with lowest pollution')\nplt.show()","7d823577":"geolocator = Nominatim(timeout=1, user_agent = \"myGeolocator\")\ngrouped_city = df.groupby(['city'])['pollutant_avg'].mean().reset_index()\ndef geocode_my_address(addr):\n#     print('geocoding:', addr)\n    try:\n        x = geolocator.geocode(addr)\n        lon_lat = x.longitude, x.latitude\n        return lon_lat\n    except:\n#         print(\"problem with address:\", addr)\n        lon_lat = None, None\n        return lon_lat\n\ngrouped_city['lon'], grouped_city['lat'] = zip(*grouped_city['city'].apply(lambda x: geocode_my_address(x)))","fc9c5126":"city_map = folium.Map(location=[19.667417,76.827826], \n                       tiles = \"Stamen Toner\",\n                      zoom_start = 5)\n\ndata_heatmap = grouped_city[['lat','lon']]\ndata_heatmap = grouped_city.dropna(axis=0, subset=['lat','lon'])\ndata_heatmap = [[row['lat'],row['lon']] for index, row in data_heatmap.iterrows()]\nHeatMap(data_heatmap, radius=15).add_to(city_map)\n\ncity_map","cd2be2d3":"plt.figure(figsize=(10, 6))\n\n\ng=df.groupby(['state'])['pollutant_avg'].mean().nlargest(5).reset_index()\nclrs = ['grey' if (x < max(g.pollutant_avg)) else 'red' for x in g.pollutant_avg.values]\nax=sns.barplot(data=g,x='state',y='pollutant_avg',palette='magma',linewidth=10)\nfor p in ax.patches:\n    ax.annotate(format((p.get_height()), '.2f'),\n                   (p.get_x() + p.get_width() \/ 2., p.get_height()),\n                   ha='center', va='top',\n                   size=12,\n                   xytext=(0, 13),\n                   textcoords='offset points')\nplt.tick_params(left = False,labelleft = False)\nplt.xticks(rotation=315)\nplt.title('Top 5 States with highest pollution')\nplt.show()","4838738b":"plt.figure(figsize=(10, 6))\npalette = sns.light_palette(\"seagreen\", as_cmap=True)\ng=df.groupby(['state'])['pollutant_avg'].mean().nsmallest(5).reset_index()\nax=sns.barplot(data=g,x='state',y='pollutant_avg',palette='YlGn')\nfor p in ax.patches:\n    ax.annotate(format((p.get_height()), '.2f'),\n                   (p.get_x() + p.get_width() \/ 2., p.get_height()),\n                   ha='center', va='top',\n                   size=12,\n                   xytext=(0, 13),\n                   textcoords='offset points')\nplt.tick_params(left = False,labelleft = False)\nplt.xticks(rotation=315)\nplt.title('Top 5 States with lowest pollution')\nplt.show()","e6830e4e":"### Percent of missing values","a49bf947":"<h1 id =\"libraries\" style=\"color:#2FDD92;\">Get Latitude and Longitude using City Name <\/h1>\n","856d0efe":"<h1 id =\"libraries\" style=\"color:#2FDD92;\">Libraries<\/h1>","752cb242":"\n<h1 id =\"libraries\" style=\"color:#34BE82;\">AQI Highest in Delhi followed by Mumbai & Bangalore <\/h1>\n\n#### **Reason ?** \n\n##### Stubble burning in neighbouring states\n>  On  05 Nov 2021 , Government air quality forecast agency SAFAR said during the day that stubble burning accounted for 36% of Delhi's PM2.5 pollution on Friday, the highest this season so far.","96443bd0":"<h1 id =\"libraries\" style=\"color:#2FDD92;\">Load Data<\/h1>","839e45c7":"<h1 style=\"color : #34BE82;\n           position:center\"> More EDA Plots Coming soon!<\/h1>"}}