{"cell_type":{"20b59467":"code","5d578a7b":"code","8b583855":"code","dde66535":"code","1fcc6043":"code","3ae5d0e7":"code","3e2e61a8":"code","f869beea":"code","15e8e99f":"code","fb9c35e3":"code","c8ad0d6e":"code","3530846b":"code","76d3fb84":"code","36bc7ad5":"code","023167e7":"code","a402507b":"code","18122134":"code","de0c892b":"code","e5bd9256":"code","1d8c073a":"code","9afeea70":"code","4a426a75":"code","af29c329":"code","3b13cecb":"code","1cd332de":"code","7b2676bb":"code","7560e0ed":"code","24b18406":"code","fd8c5c75":"code","b2545d2a":"code","a3f7999d":"code","504a0e76":"code","c6aa17b1":"code","9dcfdfa9":"code","d43e0d12":"code","184cdb58":"code","9bfd2139":"code","06f50a19":"code","2ca1edeb":"code","b55d232d":"markdown","a5237a3b":"markdown","aa008bae":"markdown","dea0089c":"markdown","92951163":"markdown","969e431b":"markdown","4927ef4e":"markdown","d532393e":"markdown","4621a686":"markdown","59c9ed33":"markdown","6fc86f74":"markdown","1aee271e":"markdown","c3fd2045":"markdown","b88d3aa7":"markdown","d0af129c":"markdown","5b60554b":"markdown","c6d64df2":"markdown","f9f075b0":"markdown","8f8e11b0":"markdown","1c5fbc75":"markdown","4c351f8d":"markdown","f850e136":"markdown","2af2aafc":"markdown","71fca82a":"markdown","9f0ec8d5":"markdown","7aeb103f":"markdown","da112c45":"markdown","2a5db43f":"markdown","3d8c4f5e":"markdown","149dc922":"markdown","8b176542":"markdown","1c03cec3":"markdown"},"source":{"20b59467":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","5d578a7b":"data = pd.read_csv('..\/input\/supermarket-sales\/supermarket_sales - Sheet1.csv')\ndata.head()","8b583855":"data.shape","dde66535":"sns.heatmap(data.isnull())","1fcc6043":"data['Date'] = pd.to_datetime(data.Date)","3ae5d0e7":"data['Hour'] = pd.to_datetime(data['Time']).dt.hour","3e2e61a8":"data.insert(1, 'Month', data.Date.dt.month)\ndata['Month'] = data['Month'].astype(str)","f869beea":"data.head(5)","15e8e99f":"data = data.drop(['gross margin percentage', 'gross income'], axis ='columns')\ndata.head()","fb9c35e3":"data.rename(columns={'cogs': 'Net_Total','Total': 'Gross_Total'}, inplace = True)\ndata.columns","c8ad0d6e":"data = data[['Invoice ID'\t,'Month','Date','Hour','Branch',\t'City'\t,'Customer type',\t'Gender'\t,'Product line',\t'Unit price',\t'Quantity',\t'Net_Total','Tax 5%',\t'Gross_Total',\t'Payment'\t,'Rating',\t'Time',]]\ndata.dtypes","3530846b":"print('There are in total '+ str(data.Branch.nunique())+ ' branches.')\na = data.City.unique()\nprint('These '+ str(data.Branch.nunique())+ ' branches are loacted in following cities.') \nprint(*a, sep =\", \")","76d3fb84":"data.groupby('Branch').Net_Total.sum().reset_index()","36bc7ad5":"table0 = pd.pivot_table(data, values='Net_Total', index='Product line', columns='City', aggfunc='sum').reset_index()\ntable0.set_index(['Product line'], drop=True, append=True, inplace=True, verify_integrity=False)\ntable0","023167e7":"cols0 = table0.columns.values.tolist()\ncols0\nfig, ax = plt.subplots(figsize=(15,6))\nkeys = [pair for pair, df in table0.groupby(['Product line'])]\nplt.plot(keys, table0.groupby(['Product line']).sum(),'--',linewidth=3.0 )\nplt.xticks(keys)\nplt.xlabel('\\n Product Line', fontweight = 'bold', fontsize =10)\nplt.ylabel('Sales', fontweight = 'bold', fontsize =10)\nplt.title('Sales across Branches', fontweight = 'bold', fontsize =15)\nplt.legend(cols0)\nplt.savefig(\"Sales across Branches.png\")\nplt.show()","a402507b":"table = data.groupby('Product line').Net_Total.sum().reset_index().sort_values(by = 'Net_Total', ascending = False)\nfig, ax = plt.subplots(figsize=(7,4))\nsns.barplot(data = table, x='Product line', y='Net_Total', palette = 'rocket')\nax.set(facecolor = 'grey')\nplt.xlabel('\\n Product Line', fontweight = 'bold', fontsize = 10)\nplt.ylabel('Total Sales', fontweight = 'bold', fontsize = 10)\nplt.xticks(rotation =90)\nplt.title('Sales across Product Lines', fontweight = 'bold', fontsize = 15)\nplt.savefig(\"Sales across Product Lines.png\")\nplt.show()","18122134":"table1 = data.groupby('Product line')['Quantity'].sum().reset_index().sort_values(by='Quantity', ascending = False)\nfig, ax = plt.subplots(figsize=(7,4))\nsns.barplot(data = table1, x='Product line', y='Quantity', palette='rocket')\nax.set(facecolor = 'grey')\nplt.xlabel('\\n Product Line', fontweight = 'bold', fontsize = 10)\nplt.ylabel('Quantities', fontweight = 'bold', fontsize = 10)\nplt.xticks(rotation =90)\nplt.title('Quantities across Product Lines', fontweight = 'bold', fontsize = 15)\nplt.savefig(\"Quantities across Product Lines.png\")\nplt.show()","de0c892b":"print('Different payment methods used are as follows.')\nprint(*data.Payment.unique(), sep =',')","e5bd9256":"fig, ax = plt.subplots(figsize=(10,5))\nsns.countplot(data = data, x='Payment',hue='Branch' ,palette='rocket')\nax.set(facecolor = 'grey')\nplt.xlabel('\\n Payment', fontweight = 'bold', fontsize = 10)\nplt.ylabel('Count of Payments', fontweight = 'bold', fontsize = 10)\nplt.title('Payment', fontweight = 'bold', fontsize = 15)\nplt.savefig(\"Payment.png\")\nplt.show()","1d8c073a":"keys = [pair for pair, df in data.groupby(['Hour'])]\nax.set(facecolor = 'grey')\nplt.plot(keys, data.groupby(['Hour']).sum()['Net_Total'])\nplt.xticks(keys)\nplt.xlabel('Hour of the Day', fontweight = 'bold', fontsize =10)\nplt.ylabel('Invoices', fontweight = 'bold', fontsize =10)\nplt.title('Sales over the Day', fontweight = 'bold', fontsize =15)\nplt.savefig(\"Sales over the Day.png\")\nplt.show()","9afeea70":"table2 = pd.pivot_table(data, values='Net_Total', index='Hour', columns='Product line', aggfunc='sum').reset_index()\ntable2","4a426a75":"table2.set_index(['Hour'], drop=True, append=True, inplace=True, verify_integrity=False)\ntable2","af29c329":"cols = table2.columns.values.tolist()\ncols","3b13cecb":"fig1, ax = plt.subplots(figsize=(15,6))\nkeys = [pair for pair, df in table2.groupby(['Hour'])]\nplt.plot(keys, table2.groupby(['Hour']).sum(),'--',linewidth=3.0 )\nplt.grid(True)\nplt.xticks(keys)\nplt.xlabel('\\n Hour of the Day', fontweight = 'bold', fontsize =10)\nplt.ylabel('Sales', fontweight = 'bold', fontsize =10)\nplt.title('Sales over the Day', fontweight = 'bold', fontsize =15)\nplt.legend(cols)\nplt.savefig(\"Sales over the Day-Product Line.png\")\nplt.show()","1cd332de":"fig, ax = plt.subplots(figsize=(15,5))\nax.set(facecolor = 'grey')\nsns.stripplot(x='Product line', y='Unit price', data = data, palette='rocket')\nplt.xlabel(\" \\n Product Line\", fontsize=10, fontweight='bold')\nplt.ylabel('Unit Price', fontsize = 10, fontweight='bold')\nplt.title('Product Line vs Price', fontsize=15, fontweight = 'bold')\nplt.savefig(\"Product Line vs Price.png\")\nplt.show()","7b2676bb":"fig, ax = plt.subplots(figsize=(15,5))\nsns.barplot(x='Product line',y='Net_Total',data = data, estimator=sum,hue = data['Gender'], palette = 'rocket', ci = None)\nax.set(facecolor = 'grey')\nplt.xticks(rotation=90)\nplt.xlabel('\\n Product Line', fontweight = 'bold', fontsize =10)\nplt.ylabel('Sales', fontweight = 'bold', fontsize =10)\nplt.title('Sales by Gender', fontweight = 'bold', fontsize =15)\nplt.savefig(\"Sales by Gender.png\")\nplt.show()","7560e0ed":"Male_HnB = data[(data.Gender=='Male') & (data['Product line'] == 'Health and beauty')]\nMale_HnB.describe()","24b18406":"Male_HnB[(Male_HnB.Net_Total==905)]","fd8c5c75":"Male_HnB['Quantity'].value_counts().plot(kind='bar')","b2545d2a":"df = Male_HnB\nsns.set(style=\"darkgrid\")\nfig, axs = plt.subplots(2, 2, figsize=(15, 9))\n\nsns.histplot(data=df, x=\"Rating\", kde=True, color=\"skyblue\", ax=axs[0, 0])\nsns.histplot(data=df, x=\"Quantity\", kde=True, color=\"olive\", ax=axs[0, 1])\nsns.histplot(data=df, x=\"Net_Total\", kde=True, color=\"gold\", ax=axs[1, 0])\nsns.histplot(data=df, x=\"Hour\", kde=True, color=\"teal\", ax=axs[1, 1])\nplt.savefig(\"Male Health & Beauty Sales.png\")","a3f7999d":"fig, ax = plt.subplots(figsize=(5,5))\nsns.barplot(x='Customer type',y='Net_Total',data = data, estimator=sum, palette = 'rocket', ci = None)\nax.set(facecolor = 'grey')\nplt.xticks(rotation=90)\nplt.xlabel('Product Line', fontweight = 'bold', fontsize =10)\nplt.ylabel('Sales', fontweight = 'bold', fontsize =10)\nplt.title('Sales by Customer Type', fontweight = 'bold', fontsize =15)\nplt.savefig(\"Sales by Customer Type.png\")\nplt.show()","504a0e76":"fig, ax = plt.subplots(figsize=(5,5))\nsns.barplot(x='Customer type',y='Quantity',data = data, estimator=sum, palette = 'rocket', ci = None)\nax.set(facecolor = 'grey')\nplt.xticks(rotation=90)\nplt.xlabel('Product Line', fontweight = 'bold', fontsize =10)\nplt.ylabel('Quantities', fontweight = 'bold', fontsize =10)\nplt.title('Quantities by Customer Type', fontweight = 'bold', fontsize =15)\nplt.savefig(\"Quantities by Customer Type.png\")\nplt.show()","c6aa17b1":"fig, ax = plt.subplots(figsize=(7,5))\nsns.barplot(data = data, y='Net_Total', x='Product line', hue='Customer type', palette='rocket',estimator=sum,ci=None)\nax.set(facecolor = 'grey')\nplt.xlabel('Sales', fontweight = 'bold', fontsize =10)\nplt.ylabel('Product line', fontweight = 'bold', fontsize =10)\nplt.title('Customers Spend across Product Line', fontweight = 'bold', fontsize =15)\nplt.legend(loc=10)\nplt.xticks(rotation = 90)\nplt.savefig(\"Customers Spend across Product Line.png\")\nplt.show()","9dcfdfa9":"table3 = data.groupby('Product line').Rating.mean().reset_index()\ntable3.sort_values(by='Rating', ascending = False, inplace = True)\ntable3","d43e0d12":"table4 = pd.pivot_table(data, values='Rating', index='Product line', columns='City', aggfunc='mean').reset_index()\ntable4['Product Line Average'] = table4.mean(numeric_only=True, axis=1)\ntable4.loc['City Average'] = table4.mean()\ntable4.fillna('City Average', inplace=True)\ntable4","184cdb58":"fig, ax = plt.subplots(figsize=(15,5))\nsns.barplot(y='City',x='Net_Total',data = data, estimator=sum,hue = data['Month'], palette = 'rocket', ci = None)\nax.set(facecolor = 'grey')\nplt.xlabel('Sales', fontweight = 'bold', fontsize =10)\nplt.ylabel('City', fontweight = 'bold', fontsize =10)\nplt.title('Branch Sales Across Months', fontweight = 'bold', fontsize =15)\nplt.savefig(\"Branch Sales Across Months.png\")\nplt.show()","9bfd2139":"table5 = pd.pivot_table(data, values='Net_Total', columns='Month', index='Product line', aggfunc='sum').reset_index()\ntable5.set_index(['Product line'], drop=True, append=True, inplace=True, verify_integrity=False)\ntable5","06f50a19":"table6 = pd.pivot_table(data, values=('Quantity'), columns='Month', index='Product line', aggfunc='sum').reset_index()\ntable6.set_index(['Product line'], drop=True, append=True, inplace=True, verify_integrity=False)\ntable6","2ca1edeb":"keys = [pair for pair, df in table5.groupby(['Product line'])]\nfig, (ax1, ax2) = plt.subplots(2, 1, figsize=(15,5))\n\nfig.suptitle('Qty & Sale Over Months', fontweight = 'bold', fontsize=15)\n\nax1.plot(keys, table5.groupby(['Product line']).sum(), 'o-')\nax1.set_xticks([])\nplt.xticks(rotation =90)\nax1.set_ylabel('Sales', fontweight = 'bold', fontsize=10)\nax1.set_xlabel('Product Line', fontweight = 'bold', fontsize=10)\nax2.plot(keys, table6.groupby(['Product line']).sum(), '.-')\nax2.set_ylabel('Quantities', fontweight = 'bold', fontsize=10)\nleg= ('Month 1','Month 2','Month 3')\nplt.legend(leg, loc='best')\nplt.savefig(\"Qty & Sale Over Months.png\")\nplt.show()","b55d232d":"##2-M).How is sales split between different customer types?","a5237a3b":"##2-R).How did branches performed across different months?","aa008bae":"##1-A) Deal with null values","dea0089c":"##2-C).How much sales did each city do across different product lines?","92951163":"##2-B).How much sale did respective branch do?","969e431b":"##2-S).How did each product line perform across months \u2013 sales as well as quantities wise?","4927ef4e":"##2-F).Plot a bar graph of quantities sold across product lines.","d532393e":"#1.\tData Cleaning Tasks\n    a.\tDeal with null values\n    b.\tDeal with data types of columns such as int, float, datetime.\n    c.\tAdd a column with Hour and Month\n    d.\tDrop unnecessary columns\n    e.\tRename columns to meaningful names\n    f.\tSet dataframe in an easy to use order\n\n#2.\tEDA Tasks\n    a.\tHow many unique branches are there, and where are they located?\n    b.\tHow much sale did respective branch do?\n    c.\tHow much sales did each city do across different product lines?\n    d.\tPlot a line graph of branch wise sales across product lines.\n    e.\tPlot a bar graph of sales across product lines.\n    f.\tPlot a bar graph of quantities sold across product lines.\n    g.\tWhat are different payment methods used?\n    h.\tWhich branch accepted how many of each payment methods?\n    i.\tWhich was the best hour for overall sales?\n    j.\tWhich was the best hour for sales of each product line?\n    k.\tHow is each item on every product line priced?\n    l.\tIs there any relation between sales of a certain product line and the gender of the customer purchasing it?\n    m.\tHow is sales split between different customer types?\n    n.\tWhich type of customers bought more quantities?\n    o.\tIs there a huge difference between spend of different customer type on different product lines?\n    p.\tWhat is mean rating of each product line?\n    q.\tWhat is mean rating of each product line in each city?\n    r.\tHow did branches performed across different months?\n    s.\tHow did each product line perform across months \u2013 sales as well as quantities wise?","4621a686":"##1-D) Drop unnecessary columns","59c9ed33":"##1-F) Set dataframe in an easy to use order","6fc86f74":"##2-A).How many unique branches are there, and where are they located?","1aee271e":"    Mode of each quantity is also normal.","c3fd2045":"##2-D).Plot a line graph of branch wise sales across product lines.","b88d3aa7":"##2-K).How is each item on every product line priced?","d0af129c":"##2-O).Is there a huge difference between spend of different customer type on different product lines?","5b60554b":"##2-P).What is mean rating of each product line?","c6d64df2":"##Insights:\n    Male were the highest buyers of health and beauty product line. We will examine it fruther to check for any outliers leading to this conclusion. ","f9f075b0":"    Plotting this histogram, all aspects seem to have a bell distribution curve. ","8f8e11b0":"##2-L).Is there any relation between sales of a certain product line and the gender of the customer purchasing it?","1c5fbc75":"##1-C) Add a column with Hour and Month","4c351f8d":"##2-H).Which branch accepted how many of each payment methods?","f850e136":"##2-N).Which type of customers bought more quantities?","2af2aafc":"##2-E).Plot a bar graph of sales across product lines.","71fca82a":"##2-G).What are different payment methods used?","9f0ec8d5":"#2. EDA Tasks.","7aeb103f":"    There was only one purchase at the highest amount, no outlier there.","da112c45":"##2-Q).What is mean rating of each product line in each city?","2a5db43f":"##1-B) Deal with data types of columns such as int, float, datetime.","3d8c4f5e":"##2-J).Which was the best hour for sales of each product line?","149dc922":"#1. Data Cleainng Tasks.","8b176542":"##2-I).Which was the best hour for overall sales?","1c03cec3":"##1-E) Rename columns to meaningful names"}}