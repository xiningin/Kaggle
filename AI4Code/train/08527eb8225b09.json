{"cell_type":{"2e2821aa":"code","5b2ed2e9":"code","ce377d8d":"code","b6596412":"code","d212e25d":"code","f52f3b04":"code","9abde54b":"code","37836cf9":"code","ad497e10":"code","0c4074cb":"code","c76cc1fa":"code","f973942b":"code","39e45fee":"code","9df2eb4c":"code","0e4bec00":"code","8c747a24":"code","bae31063":"code","5a860795":"code","348de6cc":"code","379838dc":"code","db09e4f4":"code","86c04eb6":"code","54e81080":"code","9717d63e":"code","f6801e5a":"code","fc4d9d12":"code","85bb1246":"code","c59b2061":"code","8c25f522":"code","953eb650":"code","f2fda47c":"code","a5d4289f":"code","2c7f9109":"code","2d4a4750":"code","915737f4":"code","7f3cfef8":"code","5f6c3523":"code","f4adc6f4":"code","2a195db0":"code","7b792ecd":"code","b933382a":"code","dcf55b65":"code","5ef99335":"code","850b6bba":"code","9845ac4e":"code","b08f7290":"code","906580fa":"code","43dcdd02":"code","2a12ddc6":"code","eb1d75f6":"code","4ba9cd32":"code","de38c0cb":"code","4051e321":"code","f7b73f73":"code","c051ebe4":"markdown","93a02af3":"markdown","ed7dff7b":"markdown","016363bc":"markdown","49800f03":"markdown","7e854343":"markdown","97c65530":"markdown","bac35d72":"markdown","2c693979":"markdown","a4585152":"markdown","f2025cc9":"markdown","3b22f542":"markdown","b0a446bc":"markdown","b8eccca9":"markdown","8f725b5c":"markdown","7eeefabb":"markdown","d69027d0":"markdown","ce835ca8":"markdown","95b48dfd":"markdown","dfd87e49":"markdown","a23a805a":"markdown","82c43d2a":"markdown","21f7ece4":"markdown","cd0fcab9":"markdown","39269aec":"markdown","37d4998f":"markdown"},"source":{"2e2821aa":"import warnings\nwarnings.filterwarnings(\"ignore\")\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\n\n%matplotlib inline","5b2ed2e9":"df = pd.read_csv(\"\/kaggle\/input\/used-cars-price-prediction\/train-data.csv\")","ce377d8d":"df.head()","b6596412":"df.rename(columns={'Unnamed: 0':'ID'},inplace=True)\ndf.head()","d212e25d":"df['Engine']=df['Engine'].str.replace('CC','')\ndf['Mileage']=df['Mileage'].str.replace('kmpl','')\ndf['Mileage']=df['Mileage'].str.replace('km\/kg','')\ndf['Power']=df['Power'].str.replace('bhp','')\ndf.head()","f52f3b04":"df.describe(include='all')","9abde54b":"df.isnull().sum()","37836cf9":"(df.isnull().sum() \/ len(df)) * 100\n","ad497e10":"df.groupby('Seats')['ID'].nunique()","0c4074cb":"df['Seats'].mode()","c76cc1fa":"df[\"Seats\"].fillna(value = 5.0, inplace=True)\ndf.Seats[df.Seats == 0.0] = 5.0\ndf['Seats'].isna().sum()","f973942b":"df.groupby('Mileage')['ID'].nunique()","39e45fee":"df.Mileage[df.Mileage == '0.0'] = np.nan\ndf['Mileage'] = df['Mileage'].astype(float)\ndf['Mileage'].mode()","9df2eb4c":"\ndf.Mileage.isnull().sum()","0e4bec00":"df.Mileage.describe()","8c747a24":"df.Mileage=df.Mileage[df.Mileage>4]\nsns.distplot(df.Mileage)","bae31063":"df['Mileage'].fillna(value = 17.0, inplace = True)\ndf.Mileage.isnull().sum()","5a860795":"df.groupby('Engine')['ID'].nunique()","348de6cc":"df.Engine = df.Engine.astype(float)","379838dc":"sns.distplot(df.Engine)","db09e4f4":"df.Engine.describe()","86c04eb6":"q=df.Engine.quantile(0.99) # 99 percentile of Engine value\ndf.Engine=df.Engine[df.Engine<q]\nsns.distplot(df.Engine)","54e81080":"df.Engine.mode()","9717d63e":"df.Engine.fillna(value =1197 , inplace = True)\ndf.Engine.isnull().sum()","f6801e5a":"df['Power'] = df['Power'].str.split(' ').str[0]\n# including nan rows there is data in this column of 'null' value\ndf.Power[df.Power == 'null'] = np.NaN\ndf['Power'].isnull().sum()","fc4d9d12":"df['Power'] = df['Power'].astype(float)","85bb1246":"sns.distplot(df.Power)","c59b2061":"q=df.Power.quantile(0.99)\ndf.Power=df.Power[df.Power<q]\nsns.distplot(df.Power)","8c25f522":"df.Power.mode()","953eb650":"df['Power'].fillna(value = 74, inplace = True)\ndf.Power.isnull().sum()","f2fda47c":"df['Name'] = df['Name'].str.split(' ').str[0]\ndf.groupby('Name')['ID'].nunique()","a5d4289f":"df.Name[df.Name == 'ISUZU'] = 'Isuzu'","2c7f9109":"sns.pairplot(data=df,y_vars='Price',x_vars=['Kilometers_Driven','Mileage','Engine','Power'])","2d4a4750":"df['Price_log']=np.log(df.Price)\ndel df['Price']","915737f4":"del df['New_Price']\ndel df['Location']","7f3cfef8":"df.describe(include='all')","5f6c3523":"del df['ID']","f4adc6f4":"df.dtypes","2a195db0":"df.Year=df.Year.astype(float)\ndf.Kilometers_Driven=df.Kilometers_Driven.astype(float)\ndf.dtypes","7b792ecd":"df_dummies=pd.get_dummies(df,drop_first=True)\ndf_dummies.head()","b933382a":"df_dummies.columns","dcf55b65":"col=['Year', 'Kilometers_Driven', 'Mileage', 'Engine', 'Power', 'Seats',\n       'Name_Audi', 'Name_BMW', 'Name_Bentley', 'Name_Chevrolet',\n       'Name_Datsun', 'Name_Fiat', 'Name_Force', 'Name_Ford', 'Name_Honda',\n       'Name_Hyundai', 'Name_Isuzu', 'Name_Jaguar', 'Name_Jeep',\n       'Name_Lamborghini', 'Name_Land', 'Name_Mahindra', 'Name_Maruti',\n       'Name_Mercedes-Benz', 'Name_Mini', 'Name_Mitsubishi', 'Name_Nissan',\n       'Name_Porsche', 'Name_Renault', 'Name_Skoda', 'Name_Smart', 'Name_Tata',\n       'Name_Toyota', 'Name_Volkswagen', 'Name_Volvo', 'Fuel_Type_Diesel',\n       'Fuel_Type_Electric', 'Fuel_Type_LPG', 'Fuel_Type_Petrol',\n       'Transmission_Manual', 'Owner_Type_Fourth & Above', 'Owner_Type_Second',\n       'Owner_Type_Third']","5ef99335":"target=df_dummies['Price_log']\ninputs=df_dummies[col]","850b6bba":"from sklearn.model_selection import train_test_split\nx_train,x_test,y_train,y_test=train_test_split(inputs,target,test_size=0.2,random_state=365)","9845ac4e":"from sklearn.linear_model import LinearRegression\nreg=LinearRegression()\nreg.fit(x_train,y_train)","b08f7290":"y_hat=reg.predict(x_train)","906580fa":"plt.scatter(y_train,y_hat)","43dcdd02":"sns.distplot(y_train-y_hat)\nplt.title('Residuals')","2a12ddc6":"reg.score(x_train,y_train)","eb1d75f6":"reg.intercept_","4ba9cd32":"reg.coef_","de38c0cb":"reg_summary=pd.DataFrame(inputs.columns.values,columns=['Features'])\nreg_summary['Weights']=reg.coef_.round(5)\nreg_summary","4051e321":"y_hat_test=reg.predict(x_test)","f7b73f73":"plt.scatter(y_test,y_hat_test,alpha=0.4)\nplt.xlabel('Targets(y_test)')\nplt.ylabel('Prediction(y_hat_test)')\nplt.show()","c051ebe4":"Weights of different features","93a02af3":"# **IMPORTING DATASET**","ed7dff7b":"### Price Column","016363bc":"**TESTING**","49800f03":"#### Train test split","7e854343":"# **IMPORTING LIBS**","97c65530":"*As seen in the graph there are some outliers it is advicible to remove them *","bac35d72":"\n#### * Taking mode and will replace emply rows with mode* ","2c693979":"### Name Column","a4585152":"# MODEL FOR PREDICTING USED CAR \nBY https:\/\/www.kaggle.com\/sagargupta323\/","f2025cc9":"#### declaring target and inputs","3b22f542":"# **CLEANING DATASET & MISSING VALUES**","b0a446bc":"### Engine Column","b8eccca9":"*from the plots it is clear price do not follow a linear relation with parameters. One of the ways to solve it is to take log of price *","8f725b5c":"#### Converting datatypes from int to float","7eeefabb":"### Power Column","d69027d0":"*minimum value of mileage cannot be negative or 0, hence removing rows with mileage<5*","ce835ca8":"### Regression model","95b48dfd":"# **Dealing with categorical data**","dfd87e49":"#### The model ","a23a805a":"### Seats Column","82c43d2a":"#### Deleting new price column because of lots of missing values are there in it\n#### Deleting Location Column assuming price used car is same irrespective of location","21f7ece4":"### Mileage Column","cd0fcab9":"#### Number of null row in columns","39269aec":"#### Percentage of data missing","37d4998f":"The model is 89.5% accurate"}}