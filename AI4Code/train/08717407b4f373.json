{"cell_type":{"526beb13":"code","82c9c21c":"code","5e2337a2":"code","4e2965a8":"markdown","4495bf3f":"markdown","fb87fed1":"markdown","4b5577f2":"markdown"},"source":{"526beb13":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n        \nimport plotly.graph_objects as pgo\nimport plotly.subplots as pgo_ss\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","82c9c21c":"df = pd.read_csv('\/kaggle\/input\/euroleague-alltime-players\/euroleague_alltime.csv')\n\ndf['birthdate'] = df['birthdate'].replace('1753-01-01', np.nan)\ndf = df.dropna(subset=['birthdate'])\n\n# clean some incorrect dates by people born on 1st Jan\ndf.loc[105, 'birthdate'] = '1984-06-22'\ndf.loc[298, 'birthdate'] = '1976-07-12'\ndf.loc[478, 'birthdate'] = '1995-10-22'\ndf.loc[508, 'birthdate'] = '1991-02-15'\ndf.loc[531, 'birthdate'] = '1987-07-01'\ndf.loc[832, 'birthdate'] = '1979-11-20'\ndf.loc[1214, 'birthdate'] = '1975-05-04'\ndf.loc[1228, 'birthdate'] = '1975-07-18'\ndf.loc[1956, 'birthdate'] = '1969-04-18'\ndf.loc[2129, 'birthdate'] = '1971-07-13'\ndf.loc[1938, 'birthdate'] = np.nan\ndf.loc[2780, 'birthdate'] = np.nan\ndf.loc[2948, 'birthdate'] = np.nan\ndf.loc[3135, 'birthdate'] = np.nan","5e2337a2":"start_year = 1997\n\n_df = (\n    df\n    #[lambda df: df['last_season'].ge(2019)]\n    [lambda df: df['birthdate'].str[:4] >= str(start_year)]\n)\n\n_srs = (\n    _df\n    ['birthdate']\n    .str[5:7]\n    .value_counts()\n    .rename(index=int)\n    .reindex(range(1, 13))\n    .fillna(0)\n)\n\n_srs4 = (\n    _srs\n    .groupby((_srs.index - 1) \/\/ 3)\n    .sum()\n)\n\nfig = pgo_ss.make_subplots(rows=2, row_heights=[1,5], vertical_spacing=0.01)\n\nfig.add_trace(\n    pgo.Bar(\n        xaxis='x1', yaxis='y1',\n        x=_srs4.index,\n        y=_srs4.values,\n        width=.975,\n        marker_color='black',\n        showlegend=False\n    )\n)\n\nfor m, v in _srs4.iteritems():\n    fig.add_annotation(\n        xref='x1', yref='y1',\n        showarrow=False,\n        x=m,\n        y=v+7.5,\n        text=f'{v} ({v\/_srs4.sum():.1%})',\n        font_size=11,\n        font_color='#555555'\n    )\n\nfig.add_trace(\n    pgo.Bar(\n        xaxis='x2', yaxis='y2',\n        x=_srs.index,\n        y=_srs.values,\n        width=.975,\n        marker_color='black',\n        showlegend=False\n    )\n)\n\nfor m, m_srs in _df.groupby(_df['birthdate'].str[5:7])['full_name']:\n    m = int(m)\n    \n    for i, (x, name) in enumerate(m_srs.iloc[::-1].iteritems(), 1):\n        \n        surname, name = name.split(', ')\n        names = name.strip().split(' ')\n        text = surname + ', ' + ' '.join([f'{n[0]}.' for n in names])\n        font_size = 9 if len(text) <= 14 else 7\n        font_color = '#a5a5a5'\n        \n        if text in ['KLAVZAR, U.', 'VUKCEVIC, T.', 'MILLER, B.', 'GARUBA, S.']:\n            text = f'<b>{text}<\/b>'\n            font_color = '#ef5101'\n            font_size = 11\n            \n        elif _df.loc[x, 'team'] == 'Real Madrid':\n            font_color = '#fd9c01'\n        \n        fig.add_annotation(\n            xref='x2', yref='y2',\n            x=m,\n            y=i-.5,\n            text=text,\n            showarrow=False,\n            font_size=font_size,\n            font_color=font_color\n            \n        )\n        \n    fig.add_annotation(\n        xref='x2', yref='y2',\n        x=m,\n        y=_srs.loc[m]+.5,\n        text=f'{_srs.loc[m]} ({_srs.loc[m] \/ _srs.sum():.1%})',\n        showarrow=False,\n        font_color='#555555',\n        font_size=9\n    )\n\nfig.add_annotation(\n    xref='x2', yref='y2',\n    x=12.5, y=45,\n    align='right',\n    xanchor='right',\n    yanchor='top',\n    text='Real Madrid players',\n    font_color='#fd9c01',\n    font_size=9,\n    showarrow=False\n)\nfig.add_annotation(\n    xref='x2', yref='y2',\n    x=12.5, y=44,\n    align='right',\n    xanchor='right',\n    yanchor='top',\n    text='<b>playing against CSKA<\/b>',\n    font_color='#ef5101',\n    font_size=9,\n    showarrow=False\n)\n    \n    \nfig.update_layout(\n    height=1000,\n    xaxis1=dict(\n        tickmode='array',\n        tickvals=list(range(4)),\n        ticktext=['Jan-Feb-Mar', 'Apr-May-Jun', 'Jul-Aug-Sep', 'Oct-Nov-Dec'],\n        title_font_color='black'\n    ),\n    yaxis1=dict(\n        title='<b># Players<\/b>',\n        title_font_color='black',\n    ),\n    xaxis2=dict(\n        title='<b>Month of Birth<\/b>',\n        tickmode='array',\n        tickvals=list(range(1, 13)),\n        ticktext=['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        title_font_color='black'\n    ),\n    yaxis2=dict(\n        title='<b># Players<b>',\n        gridcolor='#dddddd',\n        title_font_color='black'\n    ),\n    title=(\n        '<b>Number of Players* in <i>Euroleague<\/i> by Month of Birth<\/b><br>'\n        f'<sup>* Players born in {start_year} or later<\/sup>'),\n    title_font_color='black',\n    paper_bgcolor='white',\n    plot_bgcolor='rgba(0,0,0,0)'\n)\n\nfig","4e2965a8":"# Analysis","4495bf3f":"#### Rationale\nSince reading 'Outliers' by Malcolm Gladwell I've always wanted to see if that pattern he mentioned still holds to these day.\n\n#### What is it?\nBasically, in his book Gladwell tells about a pattern someone first noticed at a hockey game. Most of the players were born between January and March, and almost nobody was born in the last months of the year. He later found out this is true for many sports and for many countries around the world. \n\n#### Why?\nApparently, the main reason of this \"pattern\" comes from the fact that the vast majority of youth sport associations divide players by year of birth, so that a kid born in December gets \u201cunfairly\u201d paired with one kid born in January who is 12 months ahead in his growth and development (the younger the age, the more it shows). Therefore, older, stronger kids overshadow the greener ones and get more playing time, go higher in the ranks and ultimately get more and better chances.\n\n\n#### The Scenario at Hand\nIn this notebook I explore data about players from the top-tier European basketball league: the Euroleague. All of this gravitates around a specific match between Real Madrid and CSKA Moscow I watched right before Christmas. Due to a massive spread of Covid among the Real Madrid players right before the match, 7 players plus the coach had to be quarantined and Real Madrid had to call 4 players from its young team to join the main one for the match. 3 of them were actually at their debut with the main team.\n\n\n#### My Focus\nWhile commentators focused on their year of birth (\u201903, \u201904, \u201904, \u201904), I couldn\u2019t help but notice the months: Mar, Feb, Feb, May. So I scraped data about all Euroleague players and I had a look into it. This notebook is to present what I found. I focussed on the month of births of all the young players (aged 24 or less) who got to the pinnacle of this sport. On top of that I highlighted players from Real Madrid, which is the team I personally support.","fb87fed1":"#### Findings\n\nSome things we found out:\n- Indeed, the pattern presented by Gladwell still holds pretty well in today's European basketball\n- Around 40% of the young players are born in the first 3 months (Jan-Mar), vs 10% of players who were born in last 3 months (Oct-Dec)\n- In general there is a decreasing trend if we look at births by trimesters\n- All Real Madrid young players but one (Carlos Alocen) are born in the first semester","4b5577f2":"# Introduction"}}