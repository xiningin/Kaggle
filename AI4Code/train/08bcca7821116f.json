{"cell_type":{"206f5ac0":"code","3115f4eb":"code","632010c4":"code","8797a920":"code","d67e7c05":"code","b3fa522d":"code","a049f7af":"code","0b577495":"code","89d6d43f":"code","23001d70":"code","853eac82":"code","5a66e6c7":"code","30dd14af":"code","74db7ee5":"code","50de1396":"code","46b981e9":"code","3718b82b":"code","ecf82031":"code","d3abb3b9":"code","457f7af6":"code","438a4967":"code","a0c61eb3":"code","897f5950":"code","d08359f5":"code","5c662940":"code","dcb4e5f5":"code","690b067d":"code","c1eba845":"code","4ac136de":"code","b55476d1":"code","f8ff6580":"code","f968907b":"code","74784a2b":"code","347d4cae":"code","42c07dcc":"code","66ed490a":"code","65ef1016":"code","e4559b47":"code","37532d35":"code","c603ba2b":"code","fdade7b4":"code","6dd2ccf1":"code","d749f23d":"code","12d7fb0b":"code","4179bda7":"code","4eb2b84a":"code","21dba9c2":"code","ea8a2f0a":"code","66ae5706":"code","2439aea4":"markdown","6a9253fc":"markdown","d24a5ad5":"markdown","d40d8a7f":"markdown","245f3e68":"markdown","6168bcb7":"markdown","46a04a62":"markdown","f9643e8d":"markdown","1938184d":"markdown","be31a3dd":"markdown","5454195f":"markdown","59c16f31":"markdown","49479d24":"markdown","20a7cd61":"markdown","a7041a51":"markdown","9359a873":"markdown","0fbfc9b7":"markdown","43e6d372":"markdown","50cf458b":"markdown","906b68fe":"markdown","b199877d":"markdown","0f50dafb":"markdown","9ef906f4":"markdown","d18b6524":"markdown","cf384dba":"markdown","ff45b658":"markdown"},"source":{"206f5ac0":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom pandas.plotting import register_matplotlib_converters\nfrom pylab import rcParams\nsns.set_style(\"darkgrid\")\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","3115f4eb":"df = pd.read_csv(\"..\/input\/london-bike-sharing-dataset\/london_merged.csv\")","632010c4":"df.head()","8797a920":"df.duplicated().value_counts()","d67e7c05":"df.isnull().sum()","b3fa522d":"# Not a single missing value! PERFECT!","a049f7af":"sns.countplot(x=\"season\", data=df)","0b577495":"df.season.value_counts()","89d6d43f":"sns.countplot(x=\"is_holiday\", data=df)","23001d70":"sns.countplot(x=\"is_weekend\", data=df)","853eac82":"sns.countplot(x=\"weather_code\", data=df)","5a66e6c7":"df[\"timestamp\"] = pd.to_datetime(df[\"timestamp\"])","30dd14af":"df = df.set_index(\"timestamp\")","74db7ee5":"df.head()","50de1396":"# We can use strftime() function to get year, month, day, weekday and hour of the index.\n\ndf[\"year_month\"] = df.index.strftime('%Y-%m')\ndf[\"year\"] = df.index.year\ndf[\"month\"] = df.index.month\ndf[\"day_of_month\"] = df.index.day\ndf[\"day_of_week\"] = df.index.weekday\ndf[\"hour\"] = df.index.hour\ndf.head()","46b981e9":"plt.figure(figsize=(12,8), dpi=150)\nsns.heatmap(df.corr(),annot=True)","3718b82b":"plt.figure(figsize=(2,4), dpi=150)\nsns.heatmap(df.corr()[[\"cnt\"]].sort_values(by=\"cnt\", ascending=False)[1:],annot=True)","ecf82031":"plt.figure(figsize=(12,8), dpi=150)\ndf.corr()[[\"cnt\"]].sort_values(by=\"cnt\").plot(kind=\"barh\", legend=False);","d3abb3b9":"plt.figure(figsize=(12,4), dpi=100)\nsns.lineplot(x=df.index,y=\"cnt\", data=df)","457f7af6":"# There are days with unusually high count of a new bike shares. Let's find out which days are they.","438a4967":"df[df[\"cnt\"]>7000]","a0c61eb3":"# In 2015-07-09 and 2015-08-06 count of a new bike shares increases. There must be something about those days.\n# This is a great example of getting information great insights by visualization.","897f5950":"year_month = df.groupby(\"year_month\").sum().reset_index()","d08359f5":"plt.figure(figsize=(16,4), dpi=150)\nsns.lineplot(x=\"year_month\", y=\"cnt\", data=year_month)\nplt.xticks(rotation=90);","5c662940":"# As expected, in summer bike shares is increasing. Let's see this relation better by different plot.","dcb4e5f5":"plt.figure(figsize=(12,4), dpi=150)\nsns.pointplot(x=\"month\", y=\"cnt\", data=df);","690b067d":"plt.figure(figsize=(8,4), dpi=100)\nsns.barplot(x=\"month\", y=\"cnt\", data=df);","c1eba845":"# In those two plots, we can clearly see the bike share difference by months. Bike share leans to increase in summer.","4ac136de":"plt.figure(figsize=(12,4), dpi=100)\nsns.lineplot(data=df, x=\"hour\", y=\"cnt\", hue=\"is_holiday\")","b55476d1":"# We can clearly see that when it is not holiday, bike shares tends to increase 8AM and 7PM.\n# This means people use bikes when going to work. ","f8ff6580":"plt.figure(figsize=(12,4), dpi=100)\nsns.lineplot(data=df, x=\"hour\", y=\"cnt\", hue=\"season\")","f968907b":"# Also difference by seasons plot confirms our conclusion. People tends to use bikes more when it is spring.","74784a2b":"fig, axs = plt.subplots(nrows=4,ncols=1,figsize=(12,10), dpi=100)\nsns.pointplot(data=df, x=\"hour\", y=\"cnt\", ax=axs[0])\nsns.pointplot(data=df, x=\"hour\", y=\"cnt\", ax=axs[1], hue=\"is_holiday\")\nsns.pointplot(data=df, x=\"hour\", y=\"cnt\", ax=axs[2], hue=\"is_weekend\")\nsns.pointplot(data=df, x=\"hour\", y=\"cnt\", ax=axs[3], hue=\"season\")\nplt.tight_layout()","347d4cae":"plt.figure(figsize=(6,4), dpi=100)\nsns.barplot(x=\"day_of_week\", y=\"cnt\", data=df, hue=\"is_weekend\")","42c07dcc":"# People use bike in weekdays more than weekends.","66ed490a":"fig, axs = plt.subplots(nrows=2,ncols=1,figsize=(12,6), dpi=100)\nsns.pointplot(data=df, x=\"day_of_week\", y=\"cnt\", ax=axs[0])\nsns.pointplot(data=df, x=\"day_of_week\", y=\"cnt\", ax=axs[1], hue=\"season\")\nplt.tight_layout()","65ef1016":"day_of_month = df.groupby(\"day_of_month\").mean()[[\"cnt\"]].astype(\"int\")","e4559b47":"plt.figure(figsize=(16,4), dpi=150)\nsns.lineplot(data=day_of_month, x=day_of_month.index, y=day_of_month.cnt)","37532d35":"plt.figure(dpi=150)\nsns.barplot(x=\"year\", y=\"cnt\", data=df)","c603ba2b":"# It does seem like in 2017 bike share dropped heavily. But that is not true. Because our data does not contain\n# all information about 2017. This plot may dislead us.","fdade7b4":"plt.figure(dpi=150)\nsns.barplot(x=\"season\", y=\"cnt\", data=df)","6dd2ccf1":"# We can clearly see from this plot that people use bike most in summer.","d749f23d":"plt.figure(dpi=150)\ndf.is_weekend.value_counts().plot(kind=\"pie\")","12d7fb0b":"plt.figure(figsize=(8,4))\ngraph = sns.countplot(x='is_weekend',data = df)\nfor p in graph.patches:\n        graph.annotate(f\"%{round(p.get_height() \/ len(df.is_weekend) * 100,1)} - {p.get_height()}\", (p.get_x()+0.4, p.get_height()),\n                    ha='center', va='bottom',\n                    color= 'black',\n                      fontsize=12)","4179bda7":"# People use bikes in weekdays more than in weekends. Before we saw that in 7AM and also in 5PM bike usage increase.\n# This addresses that people use bike when going to work and also when coming back to their home.","4eb2b84a":"plt.figure(figsize=(8,4))\nsns.countplot(data=df, x=\"weather_code\")","21dba9c2":"sns.catplot(data=df,x=\"weather_code\", col=\"season\", kind=\"count\")","ea8a2f0a":"fig, ax = plt.subplots(nrows=2, ncols=2,figsize=(12,8), dpi=200)\n\nsns.histplot(x=df[\"t1\"], ax=ax[0][0], bins=10, color=\"orange\")\nax[0][0].set_title(\"t1\")\nax[0][0].set_xlabel(\"\")\n\nsns.histplot(x=df[\"t2\"], ax=ax[0][1], bins=10)\nax[0][1].set_title(\"t2\")\nax[0][1].set_xlabel(\"\")\n\n\n\nsns.histplot(x=df[\"wind_speed\"], ax=ax[1][0], bins=10, color=\"green\")\nax[1][0].set_title(\"Wind Speed\")\nax[1][0].set_xlabel(\"\")\n\n\nsns.histplot(x=df[\"hum\"], ax=ax[1][1], bins=10, color=\"black\")\nax[1][1].set_title(\"Humidity\")\nax[1][1].set_xlabel(\"\")\n\n\n\nplt.tight_layout()","66ae5706":"fig,ax = plt.subplots(nrows=2, ncols=1 ,figsize=(20,10), dpi=200)\nax[0].scatter(x=df[\"t1\"], y=df[\"hum\"],c=df[\"season\"])\nax[1].scatter(x=df[\"t1\"], y=df[\"wind_speed\"],c=df[\"season\"])\nplt.tight_layout();","2439aea4":"### Plotting the distribution of weather code by seasons","6a9253fc":"### Everything seems perfect. Now, let's visualize the correlation with a heatmap.","d24a5ad5":"### Now let's check *`is_holiday`* column.","d40d8a7f":"### It is time to plot bike shares by year and by seasons.","245f3e68":"### Now, look at *`weather_code`* column.","6168bcb7":"### Now let's see all this plots in a single figure.","46a04a62":"### For better understanding, let's see the correlation between our target variable which is *`cnt`* and the others.","f9643e8d":"### As expected highly 'not a holiday' distribution. Most likely *`is_weekend`* column is also in the same situation. Let's check.","1938184d":"### Let's see the difference by seasons.","be31a3dd":"### Values almost equal as expected.","5454195f":"### Visualize all the continuous variables with histogram and scatterplot","59c16f31":"## Now, Let's plot the distribution of various discrete features such as season, holiday, weekend and weathercode.","49479d24":"# Let's start with importing essential libraries.","20a7cd61":"### Seems like season column distributed normally. Let's check value counts of this column for more clear info.","a7041a51":"### Now, let's visualize the distribution of bike shares by weekday\/weekend with piechart and barplot","9359a873":"# Now, let's dive into our data.","0fbfc9b7":"### Now it is time to make feature engineering. Let's extract new columns (day of the week, day of the month, hour, month, season, year etc.) by using new index.","43e6d372":"#### We understand that the count of a new bike shares(*`cnt`*) column has a positive correlation with *`t1`*, *`t2`* and *`hour`* columns. Also *`hum`* column, which gives information about humidity in percentage, has a fairly high negative correlation with *`cnt`*.","50cf458b":"### Now it is time to plot bike shares over time with lineplot.","906b68fe":"### Let's plot bike shares by day of week to understand better.","b199877d":"### For more clear understanding, let's visualize the correlation of the target variable and the other features with barplot","0f50dafb":"### What about correlation between bike shares and hours? It would be great to see the difference when it is a holiday too right! Let's plot  bike shares by hours.","9ef906f4":"### Plot bike shares by day of month","d18b6524":"### Let's transform `timestamp` column to `datetime` in type, and set it as index.","cf384dba":"## See if there are any dublicated or NaN values","ff45b658":"### It is time to plot bike shares by months and year_of_month to understand the correlation between bike shares and months."}}