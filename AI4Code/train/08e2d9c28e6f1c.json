{"cell_type":{"1d68b614":"code","4f1bd9f8":"code","0415a82d":"code","704bf45f":"code","53316b55":"code","a8a0ea20":"code","d5597793":"code","1477899e":"code","6380fcd4":"code","2b884e01":"code","eea5bcdd":"code","d0b7edd1":"code","b3a83aa6":"markdown","5401167f":"markdown","764d9416":"markdown","aaafc86a":"markdown","d9488d82":"markdown","4a3c21c1":"markdown","33ab298f":"markdown","28d332a3":"markdown","6f9e3ab4":"markdown","3033e5ec":"markdown","fa5ac826":"markdown","b6236a24":"markdown","9d6a82c3":"markdown","b6a93a4f":"markdown","566eeef7":"markdown","9ae49f2e":"markdown","cfadfac9":"markdown"},"source":{"1d68b614":"import pandas as pd\nimport numpy as np\n\ntrain = pd.read_csv(\"..\/input\/tabular-playground-series-apr-2021\/train.csv\")\ntest = pd.read_csv(\"..\/input\/tabular-playground-series-apr-2021\/test.csv\")\n\ndef cat_column_info(column):\n    num_categories = train[column].nunique()\n    print(\"------> {} <------\".format(column))\n    print(\"--: train - type {}\".format(train[column].dtype))\n    print(\"--: test  - type {}\".format(test[column].dtype))\n    print(\"--: train - # categories {}\".format(train[column].nunique()))\n    print(\"--: test  - # categories {}\".format(test[column].nunique()))\n    if num_categories < 10:\n        if train[column].dtype == \"int64\":\n            print(\"--: train - values {}\".format(np.sort(train[column].unique())))\n            print(\"--: test  - values {}\".format(np.sort(test[column].unique())))\n        else:\n            print(\"--: train - values {}\".format(train[column].unique()))\n            print(\"--: test  - values {}\".format(test[column].unique()))\n    print(\"--: train - NaN count {}\".format(train[column].isnull().values.sum()))\n    print(\"--: test  - NaN count {}\".format(test[column].isnull().values.sum()))\n    print(\"\")\n\ndef cont_column_info(column):\n    print(\"------> {} <------\".format(column))\n    print(\"--: train - type {}\".format(train[column].dtype))\n    print(\"--: test  - type {}\".format(test[column].dtype))\n    print(\"--: train - min {}\".format(train[column].min()))\n    print(\"--: test  - min {}\".format(test[column].min()))\n    print(\"--: train - max {}\".format(train[column].max()))\n    print(\"--: test  - max {}\".format(test[column].max()))    \n    print(\"--: train - NaN count {}\".format(train[column].isnull().values.sum()))\n    print(\"--: test  - NaN count {}\".format(test[column].isnull().values.sum()))\n    print(\"\")\n    \nprint(\": Train shape {}\".format(train.shape))\nprint(\": Test shape {}\".format(test.shape))\nprint(\"\")\ncat_column_info(\"Pclass\")\ncat_column_info(\"Name\")\ncat_column_info(\"Sex\")\ncat_column_info(\"SibSp\")\ncat_column_info(\"Parch\")\ncat_column_info(\"Ticket\")\ncat_column_info(\"Cabin\")\ncat_column_info(\"Embarked\")\ncont_column_info(\"Age\")\ncont_column_info(\"Fare\")","4f1bd9f8":"import matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.set_style('whitegrid')\nsns_params = {\"palette\": \"BuPu_r\"}\n\ncounts = pd.DataFrame(train[\"Survived\"].value_counts())\ncounts.rename(index={0: \"Died (0)\", 1: \"Survived (1)\"}, inplace=True)\nax = sns.barplot(x=counts.index, y=counts.Survived, **sns_params)\nfor p in ax.patches:\n    height = p.get_height()\n    ax.text(\n        x=p.get_x()+(p.get_width()\/2),\n        y=height,\n        s=round(height),\n        ha=\"center\"\n    )","0415a82d":"from math import ceil\n\ndef plot_grid(df, columns, ptype, target=None, addl_params=None):\n    num_rows = int(ceil(len(columns) \/ 3))\n    grid = (num_rows, 3)\n    fig = plt.figure(figsize=(16, num_rows * 6))\n    addl_params = sns_params.copy() if not addl_params else addl_params\n    for index, column in enumerate(columns):\n        fig.add_subplot(grid[0], grid[1], index+1)\n        if ptype == \"hist\":\n            addl_params[\"stat\"] = \"count\" if \"stat\" not in addl_params else addl_params[\"stat\"]\n            _ = sns.histplot(df[column], kde=True, **addl_params)\n        elif ptype == \"box\":\n            _ = sns.boxplot(x=df[column], **addl_params)\n        elif ptype == \"count\":\n            plot = sns.countplot(x=df[column], hue=df[target], **addl_params)\n            plot.legend(loc=\"upper right\", title=df[target].name)\n    plt.tight_layout()\n    \ndef countplot(df, columns, target, addl_params=None):\n    plot_grid(df, columns, ptype=\"count\", target=target, addl_params=addl_params)\n    \ndef histplot(df, columns, addl_params=None):\n    plot_grid(df, columns, ptype=\"hist\", addl_params=addl_params)\n    \ndef boxplot(df, columns, addl_params=None):\n    plot_grid(df, columns, ptype=\"box\", addl_params=addl_params)\n    \ndef displot(df, x, y, target, addl_params=None):\n    addl_params = sns_params.copy() if not addl_params else addl_params\n    plot = sns.displot(df, x=x, y=y, hue=target, kind=\"kde\", **addl_params)","704bf45f":"histplot(train, [\"Age\", \"Fare\"])","53316b55":"histplot(test, [\"Age\", \"Fare\"], addl_params={\"color\": \"purple\"})","a8a0ea20":"histplot(train, [\"SibSp\", \"Pclass\", \"Parch\"])","d5597793":"histplot(test, [\"SibSp\", \"Pclass\", \"Parch\"], addl_params={\"color\": \"purple\"})","1477899e":"countplot(train, [\"Pclass\", \"SibSp\", \"Parch\"], \"Survived\")","6380fcd4":"train[\"BinnedAge\"] = pd.cut(train[\"Age\"], [x for x in range(0, 90, 10)])\ncountplot(train, [\"Sex\", \"BinnedAge\"], \"Survived\")","2b884e01":"countplot(train[(train[\"Sex\"] == \"male\")], [\"BinnedAge\"], \"Survived\")","eea5bcdd":"displot(train, \"Age\", \"Fare\", \"Survived\")","d0b7edd1":"countplot(train[(train[\"Sex\"] == \"female\")], [\"BinnedAge\"], \"Survived\")","b3a83aa6":"# 1 - General Overview\n\n## 1.1 - Column Descriptions\n\nBelow are some generalized properties that can be observed from the datasets.\n\n* `train` dataset contains 100,000 rows, 12 columns\n* `test` dataset contains 100,000 rows, 11 columns\n* Target column:\n  * `Survived` -> whether the passenger survived -> type `int64` -> values `[0, 1]`\n* Categorical columns:\n  * `Pclass` - passenger class -> type `int64` -> values `[1, 2, 3]`\n  * `Name` - passenger name -> type `str` -> format `lastname, firstname`\n  * `Sex` - passenger sex -> type `str` -> values `[male, female]`\n  * `SibSp` - # siblings \/ spouses on ship -> type `int64` -> values `[0, 1, 2, 3, 4, 5, 8]`\n  * `Parch` - # parents \/ children on ship -> type `int64` -> values `[0, 1, 2, 3, 4, 5, 6, 9]`\n  * `Ticket` - passenger ticket number -> type `object` -> format `[a-zA-Z\\.0-9]*`\n      * `train` has 4,623 missing values\n      * `test` has 5,181 missing values\n  * `Cabin` - passenger cabin -> type `object` -> format `[A-G][0-9]+`\n      * `train` has 67,866 missing values\n      * `test` has 70,831 missing values\n  * `Embarked` - the port the passenger left from -> type `object` -> values `[S, C, Q]`\n      * `train` has 250 missing values\n      * `test` has 277 missing values\n* Continuous columns:\n  * `Age` - passgenger age -> type `float64`\n      * `train` has `0.08` min, `87.0` max (3,292 missing)\n      * `test` has `0.08` min, `81.0` max (3,487 missing)\n  * `Fare` - passgenger fare amount -> type `float64`\n      * `train` has `0.68` min, `744.66` max (134 missing)\n      * `test` has `0.05` min, `680.70` max (133 missing)","5401167f":"* Differences exist between `Pclass` distributions with respect to `train` and `test`:\n    * A higher proportion of passengers in `Pclass` 3 exist in `test` when compared to `train`.\n    * A lower proportion of passengers in `Pclass` 2 exist in `test` when compared to `train`.","764d9416":"### 1.3.6 Female, Age -> Relation to Survived","aaafc86a":"### 1.3.3 Pclass, SibSp, Parch -> Relation to Survived","d9488d82":"### 1.3.1 Age, Fare -> Train vs Test","4a3c21c1":"* Survival of any group of females is high, aside from those ages 0-10. ","33ab298f":"# Introduction\n\nThis simple EDA looks at the makeup of the Synthanic dataset for this month's competition. \n\n## Credits\n\n* A large portion of the graphical analysis was taken and modified from the excellent EDA of the Titanic competition at [Top 4% Approach with RandomForest](https:\/\/www.kaggle.com\/aipi12\/top-4-approach-with-randomforest) by @aipi12","28d332a3":"* People in 1st and 2nd class are more likely to survive (`Pclass` = `1` or `2`)\n* People with 1 parent or child are more likely to survive (`Parch` = `1`)","6f9e3ab4":"* Age group distribution differences between `train` and `test` presents challenges: \n    * The `train` dataset has large spikes in various age groups.\n    * The `test` dataset has missing or low value numbers for various age groups.\n* Need to be careful of overfitting `Age` on the `train` dataset, as it will not generalize well to `test`.","3033e5ec":"# 1.3 - Feature Deep Dive","fa5ac826":"* Males of any age category have a high likelihood of dying.","b6236a24":"## 1.2 - Class Balance","9d6a82c3":"### 1.3.5 Male, Age -> Relation to Survived","b6a93a4f":"* Females were much more likely to survive (could be due to the maxim **women and children first**).","566eeef7":"### More to come...","9ae49f2e":"### 1.3.4 Sex, Age -> Relation to Survived","cfadfac9":"### 1.3.2 SibSp, Pclass, Parch -> Train vs Test"}}