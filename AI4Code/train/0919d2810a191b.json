{"cell_type":{"c2935cd8":"code","9758c202":"code","1f9df6b6":"code","6cf19e1e":"code","0d9cf5ef":"code","cb0d2d2b":"code","47a8e749":"code","5a9d8502":"code","59c99537":"code","e7c444b2":"code","e9ebedff":"code","8bfadce6":"code","feec92c7":"code","7721aaec":"code","63046842":"code","00e50874":"code","11bb6002":"code","e725685f":"code","e2827db1":"code","ee5023a9":"code","eec5d755":"code","8e6c93ae":"code","60584070":"code","a2897ee6":"markdown","d646c68b":"markdown","929d5769":"markdown","3548b1c1":"markdown","94cd5947":"markdown","535583fb":"markdown","562d0552":"markdown","359c6146":"markdown","6a6b30a2":"markdown","a8597057":"markdown","f01603ff":"markdown","97316749":"markdown","3e73ebc2":"markdown","86d3879c":"markdown","a410e5d4":"markdown","c4848232":"markdown","4c464927":"markdown","871d2a36":"markdown","395901e2":"markdown","613b51ee":"markdown","6c0ad747":"markdown","28332cae":"markdown","e7408234":"markdown","6de53510":"markdown","b42fa990":"markdown","1eba1658":"markdown","4e823e43":"markdown"},"source":{"c2935cd8":"import numpy as np \nimport pandas as pd \nimport math \nimport glob\nimport os\nimport plotly.express as px\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as msno\n# import wandb \n\nimport folium\nfrom geopy.geocoders import Nominatim\nfrom folium import Choropleth, Circle, Marker\nfrom folium.plugins import HeatMap, MarkerCluster","9758c202":"products_link = '\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv'\nread_link = '\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/README.md'\ndistricts_link = '\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv'\ndir_link = '\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/'","1f9df6b6":"data_products = pd.read_csv(products_link)\ndata_districts = pd.read_csv(districts_link)\ndata_products.head().style.set_caption('Product data')","6cf19e1e":"data_districts.head().style.set_caption('District data')","0d9cf5ef":"all_files = glob.glob(dir_link + \"*.csv\")\n\nlist_df = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[5].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    list_df.append(df)\n    \ndata_engagement = pd.concat(list_df)\ndata_engagement = data_engagement.reset_index(drop=True)\ndata_engagement.head().style.set_caption('Engagement data')","cb0d2d2b":"msno.bar(data_products,color='blue', sort=\"ascending\", figsize=(6,3), fontsize=12)\nplt.title('Product data (count non-null)')\nplt.show()\nmsno.bar(data_districts,color='brown', sort=\"ascending\", figsize=(6,3), fontsize=12)\nplt.title('District data (count non-null)')\nplt.show()\nmsno.bar(data_engagement,color='grey', sort=\"ascending\", figsize=(6,3), fontsize=12)\nplt.title('Engagement data (count non-null)')\nplt.show()","47a8e749":"def get_hist_unique(table, text):\n    buf = table.nunique()\n    ax = buf.plot(kind='barh', color='orange', figsize=(11,4))\n    \n    ax.set_title(\"The number of unique elements in the columns of the table \" + text)\n    ax.set_xlabel(\"Number of unique\")\n    ax.set_ylabel(\"Columns\")\n    \n    rects = ax.patches\n    \n    for rect, label in zip(rects, buf.values):\n        width = rect.get_width()\n        ax.text(\n            width, rect.get_y(), label, ha=\"left\", va=\"bottom\", rotation=45\n        )\n    plt.show()\n    \n    \nget_hist_unique(data_products, '\\\"Products data\\\"')\nget_hist_unique(data_districts, '\\\"Districts data\\\"')\nget_hist_unique(data_engagement, '\\\"Engagement data\\\"')","5a9d8502":"primary_essential_main = []\nprimary_essential_sub = []\nfor s in data_products[\"Primary Essential Function\"]:\n    if(not pd.isnull(s)):\n        s1 = s.split(\"-\",1)[0].strip()\n        primary_essential_main.append(s1)\n    else:\n        primary_essential_main.append(np.nan)\n    \n    if(not pd.isnull(s)):\n        s2 = s.split(\"-\",1)[1].strip()\n        primary_essential_sub.append(s2)\n    else:\n        primary_essential_sub.append(np.nan)\n\ndata_products[\"Primary_essential_main\"] = primary_essential_main\ndata_products[\"Primary_essential_sub\"] = primary_essential_sub","59c99537":"changed_nan_data_districts = data_districts[['state', 'locale', 'pct_black\/hispanic',\n    'pct_free\/reduced', 'county_connections_ratio', 'pp_total_raw']].fillna(\"No data\")\nchanged_nan_data_products =data_products[['URL', 'Product Name', 'Provider\/Company Name', \n   'Sector(s)', 'Primary_essential_main', 'Primary_essential_sub']].fillna(\"No data\")\nchanged_nan_data_engagement = data_engagement[['engagement_index','lp_id', 'pct_access', \n                 'engagement_index']].fillna(\"No data\")","e7c444b2":"data_products.head().style.set_caption('Products data')","e9ebedff":"def make_pie(data, column, figsize, form):\n    data[column].value_counts().plot(\n        kind = 'pie', autopct=form, figsize=figsize,\n        startangle=0, label='',title='\\\"'+column+'\\\"').legend();\n    plt.show()\n\nmake_pie(changed_nan_data_products, \"Sector(s)\", (8,8), '%1.1f%%')\nmake_pie(changed_nan_data_products, \"Primary_essential_main\", (8,8), '%1.f%%')","8bfadce6":"def make_part_pie(data, column, pct, figsize, form):\n    buf = data[column].value_counts()\n    buf[:int(buf.shape[0] * pct)].plot(kind = 'pie', autopct=form, figsize=figsize,\n                                       startangle=0, label='',title='\\\"'+column+'\\\"').legend();\n    plt.show()\n    \nmake_part_pie(data_products, 'Provider\/Company Name', 0.03, (15,8), '%1.1f%%')\nmake_part_pie(data_products, 'Primary_essential_sub', 0.28, (15,10), '%1.1f%%')","feec92c7":"data_districts.head().style.set_caption('District data')","7721aaec":"make_pie(changed_nan_data_districts, \"state\", (15,15), '%1.1f%%')\nmake_pie(changed_nan_data_districts, \"locale\", (8,8), '%1.f%%')\nmake_pie(changed_nan_data_districts, \"pct_black\/hispanic\", (8,8), '%1.f%%')\nmake_pie(changed_nan_data_districts, \"pct_free\/reduced\", (8,8), '%1.f%%')\nmake_pie(changed_nan_data_districts, \"county_connections_ratio\", (8,8), '%1.1f%%') \nmake_pie(changed_nan_data_districts, \"pp_total_raw\", (8,8), '%1.1f%%') ","63046842":"data_districts['pct_missing'] = round(data_districts.isna().sum(axis=1) \/ 7.0, 2)\ndata_districts","00e50874":"def get_hist_column(column, text):\n    ax = column.plot(kind='barh', color='orange', figsize=(11,4))\n    \n    ax.set_title(\"Distribution of categories in the column \" + text)\n    ax.set_xlabel(\"Number of values\")\n    ax.set_ylabel(\"Values\")\n    \n    rects = ax.patches\n    \n    for rect, label in zip(rects, column.values):\n        width = rect.get_width()\n        ax.text(\n            width, rect.get_y(), label, ha=\"left\", va=\"bottom\", rotation=45\n        )\n    plt.show()\n\n\nget_hist_column(data_districts['pct_missing'].value_counts(), '\\\"pct_missing\\\"')","11bb6002":"districts_with_zero_data = data_districts.loc[data_districts.pct_missing == 0.86, 'district_id'].values\nprint(\"\\\"district_id\\\" rows with empty description: \", districts_with_zero_data)\ndata_engagement.district_id = data_engagement.district_id.astype('int32')\nprint(\"The number of interactions from areas about which there is no information: \", \n    data_engagement.loc[data_engagement.district_id.isin(districts_with_zero_data), 'engagement_index'].shape[0])\nprint(\"The number of interactions about which there is no information, from areas about which there is no information: \",\n    data_engagement.loc[data_engagement.district_id.isin(districts_with_zero_data), 'engagement_index'].isnull().sum())","e725685f":"data_engagement['pct_missing'] = round(data_engagement.isna().sum(axis=1) \/ 5., 2)\ndata_engagement.head().style.set_caption('Engagement data')","e2827db1":"get_hist_column(data_engagement['pct_missing'].value_counts(), '\\\"pct_missing\\\"')","ee5023a9":"print(\"Count omissions in column \\\"engagement_index\\\": \",\n    data_engagement.engagement_index.isna().sum())\nprint(\"Count omissions in column \\\"time\\\": \",\n    data_engagement.time.isna().sum())","eec5d755":"data_engagement.time = data_engagement.time.astype('datetime64')\ndata_engagement.time.value_counts(sort=False).plot(figsize=(18,10)).set_title(\"Distribution of the number of classes over the entire time period presented in the data\");\nplt.xlabel('Date');\nplt.xlabel('Count');","8e6c93ae":"from geopy.geocoders import Nominatim\nlocations=pd.DataFrame({\"Name\": data_districts['state'].unique()})\n\ngeolocator=Nominatim(user_agent=\"app\")\nlat=[]\nlon=[]\nfor location in locations['Name']:\n    location = geolocator.geocode(location)    \n    if location is None:\n        lat.append(np.nan)\n        lon.append(np.nan)\n    else:\n        lat.append(location.latitude)\n        lon.append(location.longitude)\n        \nlocations['lat']=lat\nlocations['lon']=lon\n\nmap_locations=pd.DataFrame(data_districts['state'].value_counts().reset_index())\nmap_locations.columns = ['Name', 'Count']\nmap_locations\nfinal_loc = map_locations.merge(locations,on='Name',how=\"left\").dropna()\nfinal_loc.head(5).style.set_caption(\"Locations states\")","60584070":"from folium.plugins import HeatMap, MarkerCluster, FastMarkerCluster\ndef generateBaseMap(default_location=[37.0902, -95.7129], default_zoom_start=5):\n    base_map = folium.Map(location=default_location, zoom_start=default_zoom_start)\n    return base_map\n\nbasemap = generateBaseMap()\nHeatMap(final_loc[['lat','lon','Count']],  zoom=20, radius=20).add_to(basemap);\nFastMarkerCluster(data=final_loc[['lat','lon','Count']].values.tolist()).add_to(basemap);\nbasemap","a2897ee6":"**Let's estimate the precedence of each category in categorical features in the table \"Distrincts data\", taking into account the missing values.**","d646c68b":"**We split the feature \"Primary Essential Function\" on two part**","929d5769":"**Let's collect the coordinates of the states.**","3548b1c1":"#### What is the effect of the COVID-19 pandemic on online and distance learning, and how might this also evolve in the future?\n**The impact of the pandemic has primarily on the number of distance learning - it is growing. In the future, it is worth developing the quality of distance education, the start of which occurred at the beginning of the pandemic.**\n","94cd5947":"**Let's select all the row IDs with the highest percentage of occupancy.**","535583fb":"#### What is the picture of digital connectivity and engagement in 2020?\n\n**The question is broad. The main answer will be a time representation of the number of sessions.**","562d0552":"**Let's display districts on the map. Color indicate their density.**","359c6146":"### Districts data\n| Name                   | Description                                                                                                                                                                                                                                                                              |\n|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **district_id**            | The unique identifier of the school district                                                                                                                                                                                                                                             |\n| **state**                  | The state where the district resides in                                                                                                                                                                                                                                                  |\n| **locale**                 | NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural. See Locale Boundaries User's Manual for more information.                                                                                                          |\n| **pct_black\/hispanic**     | Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data                                                                                                                                                                                       |\n| **pct_free\/reduced**       | Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data                                                                                                                                                                              |\n| **county_connections_ratio** | ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version). See FCC data for more information.                                                                         |\n| **pp_total_raw**             | Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district. |","6a6b30a2":"#### How does student engagement with online learning platforms relate to different geography?","a8597057":"**We monitor the number of unique elements in each table.**","f01603ff":"## Detailed overview of products","97316749":"**Let's estimate the precedence of each category in categorical features in the table \"Products data\", taking into account the missing values.**","3e73ebc2":"## Detailed overview of engagement","86d3879c":"**Let 's compare the most numerous signs.**","a410e5d4":"**We upload data about products and districts, we understand the columns.**","c4848232":"## Input and revue data\n","4c464927":"### Products data\n| Name                       | Description                                                                                                                                                                                                                                                                                                                    |\n|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **LP ID**                      | The unique identifier of the product                                                                                                                                                                                                                                                                                           |\n| **URL**                        | Web Link to the specific product                                                                                                                                                                                                                                                                                               |\n| **Product Name**               | Name of the specific product                                                                                                                                                                                                                                                                                                   |\n| **Provider\/Company Name**      | Name of the product provider                                                                                                                                                                                                                                                                                                   |\n| **Sector(s)**                  | Sector of education where the product is used                                                                                                                                                                                                                                                                                  |\n| **Primary Essential Function** | The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled |\n|                            |            ","871d2a36":"**We will also add a column with the percentage of skips of each engagement.**","395901e2":"**Let's look at the number of rows with each percent of occupancy.**\n**We see that in 57 (out of 233) lines only \"district_id\" is filled in.**","613b51ee":"**We can see that the percentage of missing persons makes up most of the charts.**\n**We can calculate the percentage of occupancy of each row and look at it.**","6c0ad747":"**We collect data each district in one table \"Engagement data\"**\n### Engagement data\n\n| Name             | Description                                                                                                    |\n|------------------|----------------------------------------------------------------------------------------------------------------|\n| **time**             | date in \"YYYY-MM-DD\"                                                                                           |\n| **lp_id**            | The unique identifier of the product                                                                           |\n| **pct_access**       | Percentage of students in the district have at least one page-load event of a given product and on a given day |\n| **engagement_index** | Total page-load events per one thousand students of a given product and on a given day                         |\n| **district_id**            | The unique identifier of the school district  ","28332cae":"**In general, there is a tendency to increase the number of online events held by the end of the year.**","e7408234":"**We see that there is engagement information from the district with an empty description. Therefore, we will remove the gaps depending on the task.**","6de53510":"## Detailed overview of districts","b42fa990":"**We change \" NaN \" on \"No data\" to track their number on the charts.**","1eba1658":"### Answers to questions","4e823e43":"**Let's look at the number of omissions in the tables**"}}