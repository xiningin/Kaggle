{"cell_type":{"926bc776":"code","1782447c":"code","3f01cfac":"code","b1c6805e":"code","cadb335a":"code","8ef386cc":"code","4df8acc4":"code","bb00f2d0":"code","22bbea23":"code","0d26e2e2":"code","73752714":"code","e77d97e2":"code","ad8998cd":"code","931ab9f9":"code","a8cdef99":"code","9381e347":"code","9e612c2c":"code","7760cbbd":"code","3e5ff366":"code","4c45ed76":"code","ea0f196e":"code","05cc5cff":"code","993e651d":"code","a2d0e9ea":"code","16c90208":"code","3634c4ee":"code","d3d09ea4":"code","381982c9":"code","a805d6c9":"code","3a86934d":"code","346a2090":"code","01876141":"code","e09c784d":"code","0944f8c2":"markdown","cecf6ec7":"markdown","33818730":"markdown","6272f39d":"markdown","c3f184e5":"markdown","f6ffb12e":"markdown","efee9fd1":"markdown","ee245310":"markdown","f34853e6":"markdown","4415e4db":"markdown"},"source":{"926bc776":"import warnings\nwarnings.filterwarnings('ignore')","1782447c":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","3f01cfac":"shootings_data = pd.read_csv('..\/input\/us-police-shootings\/shootings.csv',parse_dates=True,index_col='date').drop(['id','name'],axis=1)\nshootings_data.head()","b1c6805e":"shootings_data.info()","cadb335a":"shootings_data.arms_category.value_counts()","8ef386cc":"danger_level_dict ={'Danger Level 1': ['Other unusual objects','Unknown','Unarmed'],\n                    'Danger Level 2': ['Electrical devices','Hand tools'],\n                    'Danger Level 3': ['Blunt instruments','Sharp objects','Piercing objects'],\n                    'Danger Level 4': ['Vehicles','Explosives','Multiple','Guns']}","4df8acc4":"for danger_level,arms_cat in danger_level_dict.items():\n  for cat in arms_cat:\n    shootings_data.loc[shootings_data.arms_category == cat,'arms_category'] = danger_level","bb00f2d0":"shootings_data.arms_category.value_counts()","22bbea23":"shootings_data.race.value_counts()","0d26e2e2":"shootings_data.loc['2020'].count()","73752714":"shootings_data = shootings_data.loc['2015':'2019']","e77d97e2":"shootings_data['year'] = shootings_data.index.year\nshootings_data['quarter'] = shootings_data.index.quarter\nshootings_data['month'] = shootings_data.index.month_name()","ad8998cd":"shootings_data.drop('armed',axis=1,inplace=True)","931ab9f9":"shootings_data.head()","a8cdef99":"shootings_data.manner_of_death.value_counts().plot.pie(autopct='%1.1f%%',fontsize=12,shadow=True,explode=[0.4,0.2])\nplt.title(\"Manner of death count\",fontsize=15)\nplt.ylabel('')\nplt.show()","9381e347":"plt.figure(figsize=(15,6))\nax = sns.barplot(x='year',y='age',hue='manner_of_death',data=shootings_data.groupby(['year','manner_of_death'],as_index=False).age.count())\nfor p in ax.patches:\n    ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+10),ha = 'center', va = 'center')\nplt.legend(loc='center right')\nplt.xlabel('year',size=15)\nplt.ylabel('manner of death count',size=15)\nplt.title('Manner of death year wise',size=15)\nplt.show()","9e612c2c":"sns.histplot(shootings_data.age,bins=10,kde=True)\nplt.xticks((range(0,101,5)))\nplt.show()","7760cbbd":"shootings_data.gender.value_counts().plot.pie(autopct='%1.1f%%',fontsize=12,shadow=True,explode=[0.4,0.2])\nplt.title(\"gender distribution\",fontsize=15)\nplt.ylabel('')\nplt.show()","3e5ff366":"plt.figure(figsize=(10,6))\nshootings_data.race.value_counts().plot.pie(autopct='%1.1f%%',fontsize=12,shadow=True,explode=np.linspace(0,0.8,6))\nplt.title(\"Race distribution\",fontsize=15)\nplt.ylabel('')\nplt.show()","4c45ed76":"plt.figure(figsize=(10,6))\nshootings_data.state.value_counts(normalize=True)[:10].plot.pie(autopct='%1.1f%%',fontsize=12,shadow=True,explode=np.linspace(0,0.5,10))\nplt.title(\"Top 10 states with most shootings\",fontsize=15)\nplt.ylabel('')\nplt.show()","ea0f196e":"plt.figure(figsize=(10,6))\nshootings_data.arms_category.value_counts()[:10].plot.pie(autopct='%1.1f%%',fontsize=12,shadow=True,explode=[0,0.4,0,0.8])\nplt.title(\"Danger level distribution\",fontsize=15)\nplt.ylabel('')\nplt.show()","05cc5cff":"plt.figure(figsize=(15,6))\nax = sns.barplot(x='race',y='age',hue='manner_of_death',data=(shootings_data.groupby(['race','manner_of_death'],as_index=False).age.count()))\nfor p in ax.patches:\n    ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+50),ha = 'center', va = 'center')\nplt.legend(loc='upper left')\nplt.xlabel('Race',size=15)\nplt.ylabel('manner of death count',size=15)\nplt.title('Manner of death race wise',size=15)\nplt.show()","993e651d":"plt.figure(figsize=(15,6))\nax = sns.barplot(x='flee',y='age',hue='manner_of_death',data=(shootings_data.groupby(['flee','manner_of_death'],as_index=False).age.count()))\nfor p in ax.patches:\n    ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+50),ha = 'center', va = 'center')\nplt.legend(loc='upper left')\nplt.xlabel('Manner of flee',size=15)\nplt.ylabel('manner of death count',size=15)\nplt.title('Manner of death fleeing wise',size=15)\nplt.show()","a2d0e9ea":"sns.catplot(x=\"manner_of_death\", y=\"age\",hue='gender', kind=\"violin\",data=shootings_data)\nplt.yticks(np.arange(0,100,10))\nplt.show()","16c90208":"plt.figure(figsize=(15,8))\nsns.boxplot(x=\"manner_of_death\", y=\"age\",hue='race',data=shootings_data)\nplt.yticks(np.arange(0,100,10))\nplt.show()","3634c4ee":"sns.barplot(x=\"manner_of_death\", y=\"age\",hue='signs_of_mental_illness',data=shootings_data)\nplt.yticks(np.arange(0,100,10))\nplt.show()","d3d09ea4":"plt.figure(figsize=(15,6))\nax = sns.barplot(x='signs_of_mental_illness',y='age',hue='arms_category',data=(shootings_data.groupby(['signs_of_mental_illness','arms_category'],as_index=False).age.count()))\nfor p in ax.patches:\n    ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+50),ha = 'center', va = 'center')\nplt.xlabel('signs of mental illness',size=15)\nplt.ylabel('Arms category',size=15)\nplt.show()","381982c9":"plt.figure(figsize=(15,6))\nax = sns.barplot(x='signs_of_mental_illness',y='age',hue='threat_level',data=(shootings_data.groupby(['signs_of_mental_illness','threat_level'],as_index=False).age.count()))\nfor p in ax.patches:\n    ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+50),ha = 'center', va = 'center')\nplt.xlabel('signs of mental illness',size=15)\nplt.ylabel('threat level',size=15)\nplt.show()","a805d6c9":"shootings_data.state.groupby(shootings_data['race']).value_counts().groupby(level=0).head(2).unstack(level=0).plot(kind='bar',\n                                                                                                                   subplots=True, layout=(3, 3),sharex=False, figsize=(10,8))\nplt.tight_layout()","3a86934d":"shootings_data.city.groupby(shootings_data['race']).value_counts().groupby(level=0).head(2).unstack(level=0).plot(kind='bar',\n                                                                                                                   subplots=True, layout=(3, 3),sharex=False, figsize=(10,8))\nplt.tight_layout()","346a2090":"shootings_data.city.groupby(shootings_data['arms_category']).value_counts().groupby(level=0).head(2).unstack(level=1).plot.bar()\nplt.show()","01876141":"ax = shootings_data.arms_category.groupby(shootings_data['threat_level']).value_counts().unstack().plot.bar(figsize=(12,5))\nfor p in ax.patches:\n  ax.annotate(p.get_height(), (p.get_x() + p.get_width() \/ 2., p.get_height()+35),ha = 'center', va = 'center')\nplt.xlabel('Threat Level',size=15)\nplt.xticks(rotation=0)\nplt.show()","e09c784d":"shootings_data.groupby(['threat_level','arms_category','signs_of_mental_illness']).age.count().unstack(level=2)","0944f8c2":"People with mental illness were equipped with high danger levels","cecf6ec7":"We will convert arms_category column value in 4 categories depending on their danger level.","33818730":"## Analysis","6272f39d":"20% of shootings were of people with low danger","c3f184e5":"# EDA","f6ffb12e":"People with mental illness mostly attacked the officer than other and undetermined","efee9fd1":"Majority of data lie between age group 27 - 45","ee245310":"50.5% of shootings were of White race","f34853e6":"From above graph we can notice that people with high danger levels attacked officer","4415e4db":"We will be using only data from 2015 to 2019 as 2020 data is not present for entire year and using 2020 data it might effect our analysis"}}