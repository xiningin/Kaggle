{"cell_type":{"01e8a958":"code","c8402263":"code","336f285c":"code","be88e917":"code","4e4aa8c4":"code","8103a2db":"code","e159f918":"code","864b45e1":"code","29fc257c":"code","02db08f7":"code","7362ec21":"code","e7b27f61":"code","4c5f75f4":"code","8f286fb6":"code","e05bdb7c":"code","21ac0631":"markdown"},"source":{"01e8a958":"import requests as rq\nfrom bs4 import BeautifulSoup as bs\nimport json as js","c8402263":"headers = {'User-Agent': 'Mozilla\/5.0 (Windows NT 10.0; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/63.0.3239.132 Safari\/537.36'}","336f285c":"# 1. \u53bb TMDB \u7533\u8bf7\u5f00\u53d1\u8005\u8d26\u53f7\nhomepage = 'https:\/\/www.themoviedb.org\/'\napi_page = 'https:\/\/www.themoviedb.org\/documentation\/api'","be88e917":"# \u7533\u8bf7\u6210\u4e3a\u5f00\u53d1\u8005\nurl1 = 'https:\/\/developers.themoviedb.org\/3\/getting-started\/introduction'","4e4aa8c4":"# \u62ff\u5230 api_key\napi_page = 'https:\/\/www.themoviedb.org\/settings\/api'","8103a2db":"key = 'b4fb2c54c883acf2c924f8302d3ea270'\napi_key = 'api_key=%s' % key","e159f918":"# \u663e\u793a TMDB \u7684\u5f00\u53d1\u6587\u6863\nlink = 'https:\/\/developers.themoviedb.org\/3\/movies'","864b45e1":"# \u6293\u53d6 \u7535\u5f71 \u6211\u4e0d\u662f\u836f\u795e  \u7684\u7535\u5f71\u4fe1\u606f\nmovie_id = 532753","29fc257c":"movie_api_pref = 'https:\/\/api.themoviedb.org\/3\/movie\/'\nmovie_api_url = \"%s%d\" % (movie_api_pref, movie_id)\nparams = {\n    'language': 'zh',\n    'api_key': key,\n}","02db08f7":"response = rq.get(movie_api_url, headers=headers, params=params)\nresult = response.text\nobj = js.loads(result)\n# print(js.dumps(obj, indent=2, ensure_ascii=False))","7362ec21":"# \u63d0\u53d6\u6240\u9700\u4fe1\u606f \u6613\u5982\u53cd\u638c\nprint(obj['original_title'])\nprint(obj['overview'])\nprint(obj['popularity'])","e7b27f61":"# \u6279\u91cf\u6293\u53d6 \u7535\u5f71 \u4fe1\u606f\n# 1. \u5148\u53bb Daily File Exports \u7f51\u9875\u4e0b\u8f7d \u76ee\u524d\u6240\u6709\u7535\u5f71ID\npage = 'https:\/\/developers.themoviedb.org\/3\/getting-started\/daily-file-exports'","4c5f75f4":"# 2. \u4e0b\u8f7d\u597d\u6700\u65b0\u7684json\u6587\u6863\u4e4b\u540e\uff0c\u67e5\u770b\u91cc\u9762\u7684\u7535\u5f71\u5217\u8868\nfile = 'movie_ids_09_28_2021.json'","8f286fb6":"# 3. \u7528api\u6293\u53d65\u90e8\u4e2d\u6587\u7535\u5f71\u7684\u4fe1\u606f\nN = 100","e05bdb7c":"f = open(file, 'r')\n\ni = 0\nfor line in f.readlines():\n    if i == N:\n        break\n    line = line.strip()\n    info = js.loads(line)\n    movie_id = info['id']\n    movie_api_url = \"%s%d\" % (movie_api_pref, movie_id)\n    response = rq.get(movie_api_url, headers=headers, params=params)\n    result = response.text\n    obj = js.loads(result)\n    if obj['original_language'] != 'zh':\n        continue\n    i += 1\n    title = obj['original_title']\n    score = obj['vote_average']\n    description = obj['overview']\n\n    print(\"\u7b2c%d\u90e8\uff1a\\t%s\\t\u8bc4\u5206\uff1a\\t%s\\t\u63cf\u8ff0\uff1a\\t%s\" % (i, title, score, description))\nf.close()","21ac0631":"########################################\n# \u53bb TMDB \u4e3b\u9875 \u6f14\u793a \u7533\u8bf7\u5f00\u53d1\u8005\u8c03\u7528API\u8fc7\u7a0b\n########################################"}}