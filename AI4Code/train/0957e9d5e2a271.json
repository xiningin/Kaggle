{"cell_type":{"4cf155a1":"code","c61372f5":"code","27a3bfbf":"code","1fedd6b9":"code","ca902592":"code","2018a4d4":"code","7014614c":"code","d765e232":"code","ff5c04f8":"code","29374ee5":"code","8fd9e6b3":"code","9bec5786":"code","3a9f7be6":"code","dd9d206b":"code","70a7ee6a":"code","ef3bef7b":"code","8e754d01":"code","9fcdf4bd":"code","1c32debf":"code","9df44adc":"code","dca3cf94":"code","a14a37c0":"code","cac009fc":"code","42d073e0":"code","e35e5509":"code","99d82991":"code","f39f7ffb":"code","12387e22":"code","131d15e7":"code","42c255bc":"code","c9edaa82":"code","746c17f1":"markdown","cb9bec9b":"markdown","777a309f":"markdown","b1a2fb9d":"markdown","cc70fd1a":"markdown","320df18f":"markdown","cce6bf70":"markdown","230a1fd5":"markdown","915c4721":"markdown","edf792b6":"markdown"},"source":{"4cf155a1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","c61372f5":"train=pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv')\ntest=pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_test.csv')","27a3bfbf":"train=train.drop(['enrollee_id'],axis=1)\n# Saving enrollee_id for SUBMISSION FILE \ntest_id=test['enrollee_id']\ntest=test.drop(['enrollee_id'],axis=1)","1fedd6b9":"train.isnull().sum()","ca902592":"for col in train:\n    print(col,len(train[col].unique()))","2018a4d4":"train.city.value_counts().sort_values(ascending=False).head(10)\ntop10=[x for x in train.city.value_counts().sort_values(ascending=False).head(10).index]\nfor label in top10:\n    train[label]=np.where(train['city']==label,1,0)\ntrain[['city']+top10].head(10)","7014614c":"for label in top10:\n    test[label]=np.where(test['city']==label,1,0)\ntest[['city']+top10].head(10)","d765e232":"test=test.drop('city',axis=1)","ff5c04f8":"train=train.drop('city',axis=1)","29374ee5":"test['gender'] = test['gender'].map({'Female':int(0),'Male':int(1) ,'Other':int(-1),'nan':int(-1)})\ntrain['gender'] = train['gender'].map({'Female':int(0),'Male':int(1) ,'Other':int(-1),'nan':int(-1)})","8fd9e6b3":"test['relevent_experience'] = test['relevent_experience'].map({'Has relevent experience':int(2),'No relevent experience':int(0)})\ntrain['relevent_experience'] = train['relevent_experience'].map({'Has relevent experience':int(2),'No relevent experience':int(0)})","9bec5786":"subset_df_1 = train[train[\"target\"] > 0]\ncolumn_count_1 = subset_df_1.enrolled_university.value_counts()\nprint(column_count_1.head())\n\nsubset_df_0 = train[train[\"target\"] < 1]\ncolumn_count_0 = subset_df_0.enrolled_university.value_counts()\nprint(column_count_0.head())\n\nprint(column_count_1['no_enrollment']\/(column_count_0['no_enrollment']+column_count_1['no_enrollment']))\nprint(column_count_1['Full time course']\/(column_count_0['Full time course']+column_count_1['Full time course']))\nprint(column_count_1['Part time course']\/(column_count_0['Part time course']+column_count_1['Part time course']))","3a9f7be6":"test['enrolled_university'] = test['enrolled_university'].map({'no_enrollment':int(0),'Part time course':int(1),'Full time course':int(2)})\ntrain['enrolled_university'] = train['enrolled_university'].map({'no_enrollment':int(0),'Part time course':int(1),'Full time course':int(2)})","dd9d206b":"test['education_level'] = test['education_level'].map({'Primary School':int(-2),'High School':int(-1),'nan':int(0),'Graduate':int(0),'Masters':int(2),'Phd':int(3)})\ntrain['education_level'] = train['education_level'].map({'Primary School':int(-2),'High School':int(-1),'nan':int(0),'Graduate':int(0),'Masters':int(2),'Phd':int(3)})","70a7ee6a":"test['major_discipline'] = test['major_discipline'].map({'STEM':int(-1) ,'Business Degree':int(0), 'Arts':int(1) ,'Humanities':int(2) ,'No Major':int(3) ,'Other':int(4)})\ntrain['major_discipline'] = train['major_discipline'].map({'STEM':int(-1) ,'Business Degree':int(0), 'Arts':int(1) ,'Humanities':int(2) ,'No Major':int(3) ,'Other':int(4)})","ef3bef7b":"test['experience'] = test['experience'].map({'>20':int(20), '15':int(15),  '5':int(5), '<1':int(-1), '11':int(11), \n                                               '13':int(13), '7':int(7), '17':int(17),\n                                               '2':int(7), '16':int(16), '1':int(1), '4':int(4), '10':int(10),\n                                               '14':int(14), '18':int(18),'19':int(19), '12':int(12), '3':int(3), \n                                               '6':int(6), '9':int(9), '8':int(8), '20':int(20)})\n\ntrain['experience'] = train['experience'].map({'>20':int(20), '15':int(15),  '5':int(5), '<1':int(-1), '11':int(11), \n                                               '13':int(13), '7':int(7), '17':int(17),\n                                               '2':int(7), '16':int(16), '1':int(1), '4':int(4), '10':int(10),\n                                               '14':int(14), '18':int(18),'19':int(19), '12':int(12), '3':int(3), \n                                               '6':int(6), '9':int(9), '8':int(8), '20':int(20)})","8e754d01":"test['company_size'] = test['company_size'].map({'50-99':int(0), '<10':int(-1), '10000+':int(1), '5000-9999':int(2), \n                                                   '1000-4999':int(3), '10\/49':int(4), '100-500':int(5),'500-999':int(6)})\n\ntrain['company_size'] = train['company_size'].map({'50-99':int(0), '<10':int(-1), '10000+':int(1), '5000-9999':int(2), \n                                                   '1000-4999':int(3), '10\/49':int(4), '100-500':int(5),'500-999':int(6)})","9fcdf4bd":"test['company_type'] = test['company_type'].map({'Pvt Ltd':int(0), 'Funded Startup':int(-1), 'Early Stage Startup':int(2), 'Other':int(3),'Public Sector':int(4), 'NGO':int(5)})\ntrain['company_type'] = train['company_type'].map({'Pvt Ltd':int(0), 'Funded Startup':int(-1), 'Early Stage Startup':int(2), 'Other':int(3),'Public Sector':int(4), 'NGO':int(5)})","1c32debf":"test['last_new_job'] = test['last_new_job'].map({'1':int(-1), '>4':int(0), 'never':int(1), '4':int(4), '3':int(3), '2':int(2)})\n\ntrain['last_new_job'] = train['last_new_job'].map({'1':int(-1), '>4':int(0), 'never':int(1), '4':int(4), '3':int(3), '2':int(2)})","9df44adc":"\nfrom sklearn.experimental import enable_iterative_imputer\nfrom sklearn.impute import IterativeImputer\n\nmice_imputer = IterativeImputer()","dca3cf94":"train['gender'] = mice_imputer.fit_transform(train[['gender']])\ntrain['gender'] = round(train['gender'])\n\ntrain['education_level'] = mice_imputer.fit_transform(train[['education_level']])\ntrain['education_level'] = round(train['education_level'])\n\ntrain['enrolled_university']= mice_imputer.fit_transform(train[['enrolled_university']])\ntrain['enrolled_university'] = round(train['enrolled_university'])\n\ntrain['experience']= mice_imputer.fit_transform(train[['experience']])\ntrain['experience'] = round(train['experience'])\n\ntrain['company_size']= mice_imputer.fit_transform(train[['company_size']])\ntrain['company_size'] = round(train['company_size'])\n\ntrain['company_type']= mice_imputer.fit_transform(train[['company_type']])\ntrain['company_type'] = round(train['company_type'])\n\ntrain['last_new_job']= mice_imputer.fit_transform(train[['last_new_job']])\ntrain['last_new_job'] = round(train['last_new_job'])\n\ntrain['major_discipline']= mice_imputer.fit_transform(train[['major_discipline']])\ntrain['major_discipline'] = round(train['major_discipline'])","a14a37c0":"train.isnull().sum()","cac009fc":"test['gender'] = mice_imputer.fit_transform(test[['gender']])\ntest['gender'] = round(test['gender'])\n\ntest['education_level'] = mice_imputer.fit_transform(test[['education_level']])\ntest['education_level'] = round(test['education_level'])\n\ntest['enrolled_university']= mice_imputer.fit_transform(test[['enrolled_university']])\ntest['enrolled_university'] = round(test['enrolled_university'])\n\ntest['experience']= mice_imputer.fit_transform(test[['experience']])\ntest['experience'] = round(test['experience'])\n\ntest['company_size']= mice_imputer.fit_transform(test[['company_size']])\ntest['company_size'] = round(test['company_size'])\n\ntest['company_type']= mice_imputer.fit_transform(test[['company_type']])\ntest['company_type'] = round(test['company_type'])\n\ntest['last_new_job']= mice_imputer.fit_transform(test[['last_new_job']])\ntest['last_new_job'] = round(test['last_new_job'])\n\ntest['major_discipline']= mice_imputer.fit_transform(test[['major_discipline']])\ntest['major_discipline'] = round(test['major_discipline'])","42d073e0":"test.isnull().sum()","e35e5509":"y_train=train['target']\nx_train=train.drop('target',axis=1)\nx_test=test","99d82991":"# pipe\nfrom sklearn.pipeline import Pipeline\n\n# ML classifier model Evaluation\nfrom sklearn.metrics import classification_report,confusion_matrix\nfrom sklearn.metrics import roc_auc_score\nfrom sklearn.metrics import roc_curve\n\n# scaling\nfrom sklearn.preprocessing import StandardScaler\n\n\n# ML classifier\nfrom sklearn.tree import DecisionTreeClassifier\nimport sklearn.model_selection as ms\nfrom sklearn.ensemble import RandomForestClassifier","f39f7ffb":"rf_pipe = Pipeline(steps =[ ('std_scale',StandardScaler()), (\"RF\",RandomForestClassifier(random_state=0,max_depth= 10, max_features= 5,min_samples_leaf= 30, min_samples_split= 100, n_estimators= 500))])\nrf_pipe.fit(x_train,y_train)\n\ndt_pipe = Pipeline(steps =[ ('_std_scale',StandardScaler()), (\"DT\",DecisionTreeClassifier(criterion='gini',max_features=10, max_depth=10, min_samples_leaf=15, min_samples_split=100,random_state=0)) ])\ndt_pipe.fit(x_train,y_train)","12387e22":"predict = dt_pipe.predict_proba(x_test)\npredict = predict[:, 1]","131d15e7":"train_predict = dt_pipe.predict_proba(x_train)\ntrain_predict = train_predict[:, 1]\ntrain_predict= np.where(train_predict > 0.5, 1, 0)","42c255bc":"print('Decissoin Tree classification_report on train_set')\nprint(' ')\nprint(classification_report(y_train, train_predict))","c9edaa82":"submission = pd.DataFrame({'enrollee_id':test_id,'target':predict})\nsubmission.to_csv('submission.csv',index=False)","746c17f1":"# Checking for null values.","cb9bec9b":"## Pre-processing for other columns.","777a309f":"## Predict the x_test.","b1a2fb9d":"# Loading the data.","cc70fd1a":"# Submission file.","320df18f":"## Filling NaN values using MICE.","cce6bf70":"## Feature engineering - 'CITY' by one hot encoding - top variables","230a1fd5":"# Testing algos. using pip-line.","915c4721":"## Testing on trainng data.","edf792b6":"# Splitting data into x and y."}}