{"cell_type":{"ff143ee9":"code","5c7c4c6c":"code","675e5f49":"code","92eb190a":"code","d3c2e26f":"code","50f191db":"code","3b49da31":"code","88c15405":"code","5d46ba44":"code","e04717e2":"code","382a89d6":"code","a8e20c73":"code","361977cc":"code","1ea379f6":"code","846260b2":"code","a42a8b52":"code","26d99c36":"code","66f9d83c":"code","aeac977c":"code","506a4724":"code","68ad022f":"code","79c637eb":"code","1b485145":"code","6d84f834":"code","3430a6b1":"code","978b2653":"code","10323c73":"code","9c0d803e":"code","10175a09":"code","dd558bc1":"code","4573970a":"code","b282e786":"code","d11e5bf5":"code","4328fea9":"code","d5599c3e":"code","fc8e26e4":"code","7dbaf8a3":"code","c5e56754":"code","e07a3715":"code","93bd17e4":"code","f4302651":"code","d3242206":"code","d81c0d51":"code","a25380e4":"code","b232e8c1":"code","4bc0fc14":"code","57177948":"code","6bfc8aea":"code","7de32c5e":"code","55841da5":"code","53d250d8":"markdown","52129ee9":"markdown","bd86c146":"markdown","29b0e14e":"markdown","1d727952":"markdown","e66b6614":"markdown","524f3261":"markdown","d2816870":"markdown","8f91523b":"markdown","6c94aafa":"markdown","a45caa53":"markdown","5401e30a":"markdown","5c0d7be1":"markdown","4afe07cf":"markdown","570f611e":"markdown","4cbdacab":"markdown","2b3ea6ff":"markdown","ce8636f9":"markdown","f1009046":"markdown","6d294d5d":"markdown","e9e962d8":"markdown","affbe902":"markdown","ef36bf28":"markdown","2897b393":"markdown","d49e9e24":"markdown","be06a3ad":"markdown","8b86880f":"markdown","69952347":"markdown","8ad02923":"markdown","3e831ae4":"markdown","6f8cc964":"markdown","4535ccab":"markdown","ad1c295d":"markdown","50017fe1":"markdown","c95ca431":"markdown","26d93e8d":"markdown","fd734871":"markdown","5728a4ef":"markdown","b646e2d2":"markdown","5688de7d":"markdown","4df3922e":"markdown","6f753e74":"markdown","fa83bd4b":"markdown","ed9f57cd":"markdown","5152e064":"markdown","c3d36094":"markdown","6c862e0f":"markdown","add2b2c2":"markdown","caf72249":"markdown","532e2c70":"markdown","b9e2700c":"markdown","83834113":"markdown","147511f1":"markdown","b5c1b540":"markdown","40d41b91":"markdown","2dbdf8e9":"markdown","639dc249":"markdown","a1843cb0":"markdown","51623659":"markdown","9c4884fb":"markdown","eadfd2a2":"markdown","8cf6216a":"markdown","2313f614":"markdown","54dcdb1c":"markdown","06321d8f":"markdown"},"source":{"ff143ee9":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns","5c7c4c6c":"train_df = pd.read_csv('\/kaggle\/input\/song-popularity-prediction\/train.csv')","675e5f49":"train_df.head()","92eb190a":"train_df.info()","d3c2e26f":"train_df.isnull().sum()","50f191db":"f,ax=plt.subplots(1,2,figsize=(14,6))\ntrain_df['song_popularity'].value_counts().plot.pie(explode=[0,0.1],autopct='%1.1f%%',ax=ax[0],shadow=True)\nax[0].set_title('Song popularity')\nax[0].set_ylabel('')\nsns.countplot(x='song_popularity',data=train_df,ax=ax[1])\nax[1].set_title('Song popularity')\nplt.show()","3b49da31":"train_df['song_popularity'].value_counts()","88c15405":"train_df.dtypes","5d46ba44":"train_df.drop('id', axis=1).describe()","e04717e2":"# Compute the correlation matrix\ncorr = train_df.drop('id', axis=1).corr()\n\n# Generate a mask for the upper triangle\nmask = np.triu(np.ones_like(corr, dtype=bool))\n\n# Set up the matplotlib figure\nf, ax = plt.subplots(figsize=(11, 9))\n\n# Draw the heatmap with the mask and correct aspect ratio\nsns.heatmap(corr, mask=mask, cmap=\"coolwarm\", vmax=.3, center=0,\n            square=True, linewidths=.5, cbar_kws={\"shrink\": .5})","382a89d6":"song_duration_s = train_df[\"song_duration_ms\"].div(1000*60)\nsong_duration_s.agg(['count', 'min', 'max', 'mean', 'median'])","a8e20c73":"plt.figure(figsize=(12, 5))\ng1 = sns.kdeplot(song_duration_s, shade=True, color='black')\ng1.set_title(\"Song duration (s)\")\ng1.set_xlabel(\"\")\ng1.plot()","361977cc":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"song_duration_ms\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"song_duration_ms\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","1ea379f6":"train_df['acousticness'].agg(['count', 'min', 'max', 'mean', 'median'])","846260b2":"plt.figure(figsize=(12, 5))\ng2 = sns.kdeplot(train_df['acousticness'], shade=True, color = 'green')\ng2.set_title(\"Acousticness\")\ng2.set_xlabel(\"\")\ng2.plot()","a42a8b52":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"acousticness\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"acousticness\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","26d99c36":"train_df['danceability'].agg(['count', 'min', 'max', 'mean', 'median'])","66f9d83c":"plt.figure(figsize=(12, 5))\ng3 = sns.kdeplot(train_df['danceability'], shade=True, color='orange')\ng3.set_title(\"danceability\")\ng3.set_xlabel(\"\")\ng3.plot()","aeac977c":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"danceability\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"danceability\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","506a4724":"train_df['energy'].agg(['count', 'min', 'max', 'mean', 'median'])","68ad022f":"plt.figure(figsize=(12, 5))\ng4 = sns.kdeplot(train_df['energy'], shade=True, color='red')\ng4.set_title(\"energy\")\ng4.set_xlabel(\"\")\ng4.plot()","79c637eb":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"energy\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"energy\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","1b485145":"train_df['instrumentalness'].agg(['count', 'min', 'max', 'mean', 'median'])","6d84f834":"plt.figure(figsize=(12, 5))\ng5 = sns.kdeplot(train_df['instrumentalness'], shade=True, color='green')\ng5.set_title(\"instrumentalness\")\ng5.set_xlabel(\"\")\ng5.plot()","3430a6b1":"plt.figure(figsize=(12, 5))\ng5_log = sns.kdeplot(train_df['instrumentalness'].transform(lambda x: np.log(x)), shade=True, color='green')\ng5_log.set_title(\"instrumentalness (log)\")\ng5_log.set_xlabel(\"\")\ng5_log.plot()","978b2653":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"instrumentalness\"].transform(lambda x: np.log(x)), color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"instrumentalness\"].transform(lambda x: np.log(x)), color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","10323c73":"train_df['key'].agg(['count', 'min', 'max', 'mean', 'median'])","9c0d803e":"plt.figure(figsize=(12, 5))\ng6 = sns.catplot(x=\"key\", kind=\"count\", data=train_df)","10175a09":"plt.figure(figsize=(12, 5))\n\ng = sns.catplot(x=\"key\", hue=\"song_popularity\", kind=\"count\", data=train_df)","dd558bc1":"train_df['liveness'].agg(['count', 'min', 'max', 'mean', 'median'])","4573970a":"plt.figure(figsize=(12, 5))\ng7 = sns.kdeplot(train_df['liveness'], shade=True, color='purple')\ng7.set_title(\"liveness\")\ng7.set_xlabel(\"\")\ng7.plot()","b282e786":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"liveness\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"liveness\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","d11e5bf5":"train_df['loudness'].agg(['count', 'min', 'max', 'mean', 'median'])","4328fea9":"plt.figure(figsize=(12, 5))\ng8 = sns.kdeplot(train_df['loudness'], shade=True, color='orange')\ng8.set_title(\"loudness\")\ng8.set_xlabel(\"\")\ng8.plot()","d5599c3e":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"loudness\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"loudness\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","fc8e26e4":"train_df['audio_mode'].agg(['count', 'min', 'max', 'mean', 'median'])","7dbaf8a3":"plt.figure(figsize=(12, 5))\ng9 = sns.catplot(x=\"audio_mode\", kind=\"count\", data=train_df)","c5e56754":"plt.figure(figsize=(12, 5))\n\ng = sns.catplot(x=\"audio_mode\", hue=\"song_popularity\", kind=\"count\", data=train_df)","e07a3715":"train_df['speechiness'].agg(['count', 'min', 'max', 'mean', 'median'])","93bd17e4":"plt.figure(figsize=(12, 5))\ng10 = sns.kdeplot(train_df['speechiness'], shade=True, color='brown')\ng10.set_title(\"speechiness\")\ng10.set_xlabel(\"\")\ng10.plot()","f4302651":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"speechiness\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"speechiness\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","d3242206":"train_df['tempo'].agg(['count', 'min', 'max', 'mean', 'median'])","d81c0d51":"plt.figure(figsize=(12, 5))\ng11 = sns.kdeplot(train_df['tempo'], shade=True, color='fuchsia')\ng11.set_title(\"tempo\")\ng11.set_xlabel(\"\")\ng11.plot()","a25380e4":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"tempo\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"tempo\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","b232e8c1":"train_df['time_signature'].agg(['count', 'min', 'max', 'mean', 'median'])","4bc0fc14":"plt.figure(figsize=(12, 5))\ng12 = sns.catplot(x=\"time_signature\", kind=\"count\", data=train_df)","57177948":"plt.figure(figsize=(12, 5))\n\ng = sns.catplot(x=\"time_signature\", hue=\"song_popularity\", kind=\"count\", data=train_df)","6bfc8aea":"train_df['audio_valence'].agg(['count', 'min', 'max', 'mean', 'median'])","7de32c5e":"plt.figure(figsize=(12, 5))\ng11 = sns.kdeplot(train_df['audio_valence'], shade=True, color='cyan')\ng11.set_title(\"audio_valence\")\ng11.set_xlabel(\"\")\ng11.plot()","55841da5":"plt.figure(figsize=(12, 5))\n\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==0][\"audio_valence\"], color=\"red\", shade=True)\ng = sns.kdeplot(train_df[train_df[\"song_popularity\"]==1][\"audio_valence\"], color=\"blue\", shade=True)\ng = g.legend([\"Unpopular song\", \"Popular song\"])","53d250d8":"### Song Duration","52129ee9":"There are some differences around (-18, -14), (-11, -9) where there are more popular songs and (-6, -4) where there are more unpopular songs.","bd86c146":"### Audio mode","29b0e14e":"## Missing values","1d727952":"**Name**: instrumentalness  \n**Number of values**: 35974  \n**Number of missing values**: 4026  \n**Range**: [-0.004398, 1.075415]  \n**Type**: Continuous  \n**Details**: This value represents the amount of vocals in the song. The closer it is to 1.0, the more instrumental the song is.  \n**Possible transformations**: Extremely skewed. Transformation is needed.","e66b6614":"Song popularity doesn't have any significative correlation with any of the features, but this doesn't mean that the features are useless. Subpopulations in these features can be correlated with the survival. To determine this, we need to explore in detail these features.","524f3261":"## Class Imbalance","d2816870":"Here I'm plotting the graph of song duration distribution in seconds (omitting missing values).  ","8f91523b":"**Name**: song_duration_ms  \n**Number of values**: 35899  \n**Number of missing values**: 4101  \n**Range**: [25658, 491671]  \n**Type**: Continuous  \n**Details**: The duration of the song in milliseconds  \n**Possible transformations**: No  ","6c94aafa":"## Look at columns","a45caa53":"## Outliers detection","5401e30a":"**Write analysis**","5c0d7be1":"The mean duration of a song is 3m 22s","4afe07cf":"The proportion of popular and unpopular songs for every key looks the same","570f611e":"**Name**: audio_valence  \n**Number of values**: 40000  \n**Number of missing values**: 0  \n**Range**: [0.013398, 1.022558]  \n**Type**: Continuous  \n**Details**: A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry)   \n**Possible transformations**: No","4cbdacab":"**Name**: acoutsticness  \n**Number of values**: 36008  \n**Number of missing values**: 3992  \n**Range**: [-0.013551, 1.065284]  \n**Type**: Continuous  \n**Details**: This value describes how acoustic a song is. A score of 1.0 means the song is most likely to be an acoustic one.  \n**Possible transformations**: Turn it into a categorical feature based on the split <0.2 and >= 0.2","2b3ea6ff":"**Name**: loudness  \n**Number of values**: 36043  \n**Number of missing values**: 3957  \n**Range**: [-32.117911, -0.877346]  \n**Type**: Continuous  \n**Details**: Loudness values are averaged across the entire track. It is the quality of a song. Higher the value, the louder the song.  \n**Possible transformations**: No","ce8636f9":"The dataset is not balanced - there are more unpopular songs than popular ones.","f1009046":"### Liveness","6d294d5d":"**Name**: time_signature  \n**Number of values**: 40000  \n**Number of missing values**: 0  \n**Range**: [2, 5]  \n**Type**: Categorical  \n**Details**: The time signature indicates how many counts are in each measure and which type of note will receive one count. The top number is commonly 2, 3, 4, or 6.  \n**Possible transformations**: No","e9e962d8":"### Acousticness","affbe902":"The evaluation metric for this competition is Area Under the ROC Curve (AUC). And the task is binary classification. ","ef36bf28":"**Name**: key  \n**Number of values**: 35935  \n**Number of missing values**: 4065  \n**Range**: [0, 11]  \n**Type**: Categorical  \n**Details**: Key is the pitch, notes or scale of song that forms the basis of a song. 12 keys are ranging from 0 to 11.  \n**Possible transformations**: No","2897b393":"### Speechiness","d49e9e24":"### Time signature","be06a3ad":"There are some significant difference around the second peak in distributions","8b86880f":"## Plots","69952347":"**Name**: audio_mode  \n**Number of values**: 40000  \n**Number of missing values**: 0  \n**Range**: [0, 1]  \n**Type**: Binary  \n**Details**: Songs can be classified as major and minor. 1.0 represents major mode and 0 represents minor.  \n**Possible transformations**: No","8ad02923":"There are some differences around the peak","3e831ae4":"In this section I'm going to:\n* Look at columns, determine their types\n* Summarize data and show some statistics per feature\n* Conduct analysis for every feature which will include:\n    * Plots\n    * Analysys of the dependency between the feature and the target variable\n    * Interactions of features\n    * Correlation","6f8cc964":"# Reading the data","4535ccab":"Seems like that the approach to recover missing values will matter a lot.  I will come back to this later","ad1c295d":"### Danceability","50017fe1":"The distributions differs around two peaks (~0.6, ~0.9) and at the beginning (0.2)","c95ca431":"As I've said earlier, all the features we have are numerical","26d93e8d":"### Instrumentalness","fd734871":"# Importing needed packages","5728a4ef":"**To be continued**","b646e2d2":"### Energy","5688de7d":"I will come back to this later","4df3922e":"## Feature analysis","6f753e74":"Comparing popular with unpopular songs based on the acousticness we can spot some differences although they are not very distinctive","fa83bd4b":"### ","ed9f57cd":"### Tempo","5152e064":"Seems like that distributions of song duration for popular and unpopular songs look very similar ","c3d36094":"### Key","6c862e0f":"## Metric","add2b2c2":"# Looking at data","caf72249":"The distributions differs a bit","532e2c70":"The differences are not so distinctive","b9e2700c":"### Loudness","83834113":"**Name**: liveness  \n**Number of values**: 35914  \n**Number of missing values**: 4086  \n**Range**: [0.027843, 1.065298]  \n**Type**: Continuous  \n**Details**: This value describes the probability that the song was recorded with a live audience. According to the official documentation \u201ca value above 0.8 provides strong likelihood that the track is live\u201d.  \n**Possible transformations**: No","147511f1":"## Statistics","b5c1b540":"**Name**: energy  \n**Number of values**: 35974  \n**Number of missing values**: 4026  \n**Range**: [-0.001682, 1.039741]  \n**Type**: Continuous  \n**Details**: Energy represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy.  \n**Possible transformations**: No","40d41b91":"# Feature analysis","2dbdf8e9":"There are almost no differences between popular and unpopular song distributions","639dc249":"The feature may not be very distinctive. If we are going to use it, then the transformation of some kind (for example, log) is needed.","a1843cb0":"Based on the statistics and the density plot it is safe to say that more than half of the songs have acousticness that is less than 0.2.  \nSeems like it can be transformed into a categorical feature based on the threshold 0.2.   ","51623659":"**Name**: danceability  \n**Number of values**: 35974  \n**Number of missing values**: 4026  \n**Range**: [0.043961, 0.957131]  \n**Type**: Continuous  \n**Details**: This value describes how acoustic a song is. A score of 1.0 means the song is most likely to be an acoustic one.  \n**Possible transformations**: No","9c4884fb":"**Name**: speechiness  \n**Number of values**: 40000  \n**Number of missing values**: 0  \n**Range**: [0.015065, 0.560748]  \n**Type**: Continuous  \n**Details**: Speechiness detects the presence of spoken words in a track. The more exclusively speech-like the recording (e.g. talk show, audiobook, poetry), the closer to 1.0 the attribute value. Values above 0.66 describe tracks that are probably made entirely of spoken words. Values between 0.33 and 0.66 describe tracks that may contain both music and speech, either in sections or layered, including such cases as rap music. Values below 0.33 most likely represent music and other non-speech-like tracks.  \n**Possible transformations**: No","eadfd2a2":"The differences are not so distinctive","8cf6216a":"**Name**: tempo  \n**Number of values**: 40000  \n**Number of missing values**: 0  \n**Range**: [62.055779, 219.163578]  \n**Type**: Continuous  \n**Details**: The tempo of the song. The overall estimated tempo of a track in beats per minute (BPM). In musical terminology, the tempo is the speed or pace of a given piece and derives directly from the average beat duration.   \n**Possible transformations**: No","2313f614":"# Target variable analysis","54dcdb1c":"### Audio valence","06321d8f":"Based on this information we can make a few conclusions:\n* Overall number of rows is 40 000\n* We have missing values in several columns\n* All columns are numerical - we don't have text data "}}