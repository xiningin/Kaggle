{"cell_type":{"d7dccb8e":"code","d02a3b4c":"code","54c88782":"code","80a573d0":"code","43fda07d":"code","f02ea43b":"code","81326e52":"code","7756cbdd":"code","5291ec57":"code","45f2cc1d":"code","1ff4d24b":"code","da25ac08":"code","986380da":"code","3dd69b71":"code","eb4b4522":"code","dc95c1b9":"code","7872a5af":"code","307cf692":"code","e3b91a6a":"code","56cdb377":"code","301d6b94":"code","5ea6d086":"code","e4572c73":"code","cd36b384":"code","1ac28e47":"code","9cc311ba":"code","fd4931d6":"code","af83f342":"code","d32d7043":"code","e35d4c11":"code","e21bf464":"code","7819079f":"code","950e09f3":"code","ba91dd3d":"code","215fa94a":"code","b2ce7a1d":"code","138c7df9":"code","dbacb202":"code","0ab385d2":"code","3f536138":"code","75611f4d":"code","0f4798f1":"code","00010f56":"code","81ecb683":"code","79fa6fcf":"code","6dc50279":"markdown","99c58900":"markdown","4443a8f3":"markdown","68500cb0":"markdown","1f748703":"markdown","b91af23b":"markdown","96554f56":"markdown","e89e332f":"markdown","aa7cdb9d":"markdown","fe699c4e":"markdown","4e43bf0d":"markdown","ec06f194":"markdown","331069dd":"markdown","c06ca280":"markdown","ef55f2a8":"markdown","b18906be":"markdown","09936f97":"markdown","e75e0406":"markdown","eed002e8":"markdown","66935344":"markdown","55cf6c4f":"markdown","303c6db5":"markdown","bf76cf5a":"markdown","ab8b3815":"markdown","5d384e41":"markdown","dc6692e3":"markdown","406bf7fe":"markdown"},"source":{"d7dccb8e":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go","d02a3b4c":"path = \"..\/input\/police-deadly-force-usage-us\/fatal-police-shootings-data.csv\"\n\ndata = pd.read_csv(path)","54c88782":"data.head()","80a573d0":"data.shape","43fda07d":"data.dtypes","f02ea43b":"data.isna().any()","81326e52":"data[data.isna().any(axis=1)].shape","7756cbdd":"data[[\"armed\", \"gender\", \"race\", \"flee\"]] = data[[\"armed\", \"gender\", \"race\", \"flee\"]].fillna(value=\"not specified\")","5291ec57":"data.isna().any()","45f2cc1d":"data.duplicated().any()","1ff4d24b":"data[\"date\"] = data[\"date\"].apply(pd.to_datetime)","da25ac08":"data[\"race\"].unique()","986380da":"race = data[\"race\"].value_counts()","3dd69b71":"rac = px.pie(race, values=race.values, names=[\"white\", \"black\", \"hispanic\", \"unknown\", \"asian\", \"native american\", \"other\"], title=\"Racial distribution\")\nrac.update_layout(font_size=16)\nrac.update_traces(textfont_size=18, hoverinfo='label+percent')\nrac.show()","eb4b4522":"gender = data[\"gender\"].value_counts()","dc95c1b9":"sex = px.pie(gender, values=gender.values, names=[\"male\", \"female\", \"unknown\"], title=\"Gender distribution\", color_discrete_sequence=[\"blue\", \"orange\", \"yellow\"], hole=0.4)\nsex.update_layout(font_size=16)\nsex.update_traces(textfont_size=18, textposition=\"inside\",hoverinfo='label+percent')\nsex.show()","7872a5af":"manner2 = data.groupby([\"age\", \"manner_of_death\"])[\"name\"].count().reset_index()","307cf692":"man2 = px.bar(manner2, color=\"manner_of_death\", y=\"name\",x=\"age\")\nman2.update_layout(yaxis_title=\"Number of death\")\nman2.show()","e3b91a6a":"armed = data[\"armed\"].value_counts()","56cdb377":"tab = go.Figure(data=[go.Table(\n    header=dict(values=[\"Kind of weapons\", \"Count\"], fill_color=\"lavender\", font=dict(size=14, color='black')),\n    cells=dict(values=[armed.index, armed.values], fill_color=\"#F5F5DC\"))\n    ])\ntab.show()                      ","301d6b94":"(318*100)\/armed.values.sum()","5ea6d086":"arm = px.bar(armed, x=armed.index[:3], y=armed.values[:3], title=\"Top 3 kind of weapons\")\narm.update_layout(xaxis_title=\"Kind of weapons\", yaxis_title=\"Count\")\narm.show()","e4572c73":"flee = data[\"flee\"].value_counts()\nflee","cd36b384":"(3356*100)\/(flee.values.sum() - 250)","1ac28e47":"fle = px.bar(flee, x=flee.index[:3], y=flee.values[:3], title=\"Types of fleeing\")\nfle.update_layout(xaxis_title=\"Type of fleeing\", yaxis_title=\"Count\")\nfle.show()","9cc311ba":"age_id = data.groupby(\"id\").agg({\"age\": pd.Series.mean})\nage_id = age_id.sort_values(\"age\", ascending=False)\nage_id.isna().sum()","fd4931d6":"age_id.dropna()","af83f342":"age_id.describe()","d32d7043":"sns.histplot(data=age_id, x=\"age\", bins=age_id[\"age\"].nunique(), kde=True, alpha=0.4)\nplt.show()","e35d4c11":"age_race = data.groupby([\"race\", \"id\"], as_index=False).agg({\"age\": pd.Series.mean})\nage_race.dropna()","e21bf464":"sns.histplot(data=age_race, x=\"age\", hue=\"race\", multiple=\"stack\")\nplt.show()","7819079f":"mental = data[\"signs_of_mental_illness\"].value_counts()","950e09f3":"men = px.pie(mental, names=[\"Don't have\", \"Have\"], values=mental.values, color_discrete_sequence=[\"#6dcbdb\", \"#ff8777\"], title=\"Percentage of killed people who have mental illness\")\nmen.update_traces(textfont_size=18, hoverinfo='label+percent')\nmen.show()","ba91dd3d":"city = data[\"city\"].value_counts()\ncity = city.sort_values(ascending=False)","215fa94a":"cit = go.Figure(data=[go.Table(\n    header=dict(values=[\"City\", \"Count\"], fill_color=\"lavender\", font=dict(size=14, color='black')),\n    cells=dict(values=[city.index[:30], city.values[:30]], fill_color=\"#F5F5DC\"))\n                     ])\ncit.update_layout(title_text=\"Top 30 cities with the number of death\")\ncit.show()","b2ce7a1d":"ci = px.bar(x=city.index[:10], y=city.values[:10], title=\"Top 10 cities with the highest rate of death\")\nci.update_layout(xaxis_title=\"City\", yaxis_title=\"Number of death\")\nci.show()","138c7df9":"race_city = data.groupby([\"city\", \"race\"])[\"name\"].count().reset_index()\nrace_city = race_city.sort_values(\"name\", ascending=False)\nrace_city.head()","dbacb202":"rc = px.bar(race_city[:20], x=\"city\", y=\"name\", color=\"race\", title=\"Share of each race in the top 20 cities\")\nrc.update_layout(yaxis_title=\"Number of death\")\nrc.show()","0ab385d2":"state = data[\"state\"].value_counts()\n","3f536138":"ma = px.choropleth(locations=state.index, color=state.values, hover_name=state.index, locationmode=\"USA-states\", scope=\"usa\", color_continuous_scale=\"Viridis\", title=\"Map of Police Killings\")\nma.show()","75611f4d":"data[\"year\"] = data[\"date\"].apply(lambda x: x.year)","0f4798f1":"time_c = data.groupby(['year'])['id'].count().reset_index()","00010f56":"tc = px.bar(x=time_c[\"year\"], y=time_c[\"id\"], title=\"Number of killed people over time\")\ntc.update_layout(xaxis_title=\"Year\", yaxis_title=\"Number of death\")\ntc.show()","81ecb683":"time_group = data.groupby([\"year\", \"race\"], as_index=False).agg({\"id\": pd.Series.count})\n","79fa6fcf":"time_g = px.line(x=time_group.year, y=time_group.id, color=time_group.race, title=\"Number of killed people over time with race distribution\")\ntime_g.update_layout(xaxis_title=\"year\", yaxis_title=\"Number of death\")\ntime_g.show()","6dc50279":"<h2>Converting to datatime type<h2>","99c58900":"<h1>Fatal Force<h1>\n<center><img src=https:\/\/i.imgur.com\/sX3K62b.png><\/center>\n\n","4443a8f3":"<h2>Data Exploration<h2>","68500cb0":"<h2>Distribution of Age and Manner of Death<h2>","1f748703":"Mostly the men were killed by police. The women ratio is only 4,38%.","b91af23b":"<h2>Were People Armed? What kind of weapons they used?<h2>","96554f56":"Almost half of the killed people were white americans. However, black and hispanic occupy the second and third place.","e89e332f":"The age distribution fluctuates from 6 to 91. The most popular age range of 30-40. The average is 37 years old with the most killed cases.","aa7cdb9d":"The time distribution shows that the numbers of kills did not decrease over time. The low rate at the 2020 year because there is no data for the whole year. However, we could see some correlation between race over time. The number of white people killed slightly decreases over time, but other rate of race stay unchanged.","fe699c4e":"<h2>Total Number of Deaths of Men and Women<h2>","4e43bf0d":"Database of every fatal shooting in the US by a police officer in the line of duty from 2015.\nThe Washington Post has been tracking more than a dozen details about each killing. This includes the race, age and gender of the deceased, whether the person was armed, and whether the victim was experiencing a mental-health crisis. The Washington Post has gathered this supplemental information from law enforcement websites, local new reports, social media, and by monitoring independent databases such as \"Killed by police\" and \"Fatal Encounters\". The Post has also conducted additional reporting in many cases.","ec06f194":"*Thank you for  looking at my Fatal Force analysis. Please leave some comments or feedback.*","331069dd":"The geo analysis showed that people race strongly depends on the location.The most dangerous state in the USA is California.","c06ca280":"Most of the victims did not have a mental illness.","ef55f2a8":"<h2>Did people fleeing?<h2>","b18906be":"<h2>Number of Police Killings Over Time<h2>","09936f97":"<h2>Age distribution<h2>","e75e0406":"65.95% of people were not fleeing. The others were using cars or were running from the police.","eed002e8":"The most popular kind of weapons that victims had was guns and knives. However, people defended themselves with the most surprising objects that could find. Only 5.95% of the people were unarmed completely.","66935344":"<h2>Mental Illness<h2>","55cf6c4f":"<h2>Race characterisation<h2>","303c6db5":"<h4>Race and age distribution<h4>","bf76cf5a":"Considering the graph the small part of people were tasered. The people at age 25-50 year were more like to be tasered than others. The elderly people were only shot.","ab8b3815":"The 5 columns has the Nan values at the 1115 row in all data.\nReplace all nan values in the columns with object types as \"not specified\". ","5d384e41":"<h1>Geographical distribution<h1>","dc6692e3":"<h2>Data Cleaning - Checking for Missing Values and Duplicates<h2>","406bf7fe":"<h4>Choropleth Map of Police Killings by US State<h4>"}}