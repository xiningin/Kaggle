{"cell_type":{"fca75b0a":"code","de1f9722":"code","1dbd02e5":"code","371aca41":"code","984d67fd":"code","bd2660af":"code","49f6c740":"code","3ac62e03":"code","4626a52c":"code","1f0ea10c":"code","da16fa31":"code","a3031423":"code","4139c27d":"code","0eae5491":"code","0c3bf5c7":"code","6ca0679f":"code","c61ac2ad":"code","dadbed3c":"code","c7d9aad3":"code","cd95a6b8":"code","84de5db6":"code","1d026180":"code","1a48579f":"code","14cfa276":"code","90dd4661":"code","561fc8ac":"code","74ddf5c4":"code","343fe630":"code","faaf52cc":"code","d8f3db55":"code","cca07fe2":"code","a00644d3":"code","6c48106e":"code","b0c317db":"markdown","e6c4427a":"markdown","bf03e64f":"markdown","8a977d8a":"markdown","1c970b78":"markdown","9f034c23":"markdown","96a7085a":"markdown","fece8da7":"markdown","b17d30ba":"markdown","11ed0f7e":"markdown","f8551bc0":"markdown","65682eb5":"markdown","401f00da":"markdown","2b0b9709":"markdown","7ba9c650":"markdown","3feb6fce":"markdown","ab7c981c":"markdown","49a6b6e9":"markdown","794c0efc":"markdown","e9d23da7":"markdown","376e04f4":"markdown","26deba50":"markdown","6f00200f":"markdown","b39f3260":"markdown","cb89a09f":"markdown","31ebcc33":"markdown","bbec110b":"markdown"},"source":{"fca75b0a":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","de1f9722":"data = pd.read_csv(\"..\/input\/vaccination-impact-on-covid19-indicators\/Vaccine consequences on reproductibility.csv\", index_col=\"extract_date\", parse_dates=True, dayfirst=True)\ndf = data.copy()","1dbd02e5":"df.shape","371aca41":"df.head()","984d67fd":"df.info()","bd2660af":"df.isna().value_counts()","49f6c740":"sns.heatmap(df.isna())","3ac62e03":"df = df.dropna(axis=0)","4626a52c":"sns.heatmap(df.isna())","1f0ea10c":"sns.pairplot(df)","da16fa31":"plt.figure(figsize=(12,12))\nsns.heatmap(df.corr(), annot=True)","a3031423":"var_float = df.select_dtypes(\"float64\").columns\nvar_int = df.select_dtypes(\"int64\").columns","4139c27d":"sns.set_theme()\nfor col in var_float:\n    plt.figure()\n    sns.displot(df[col], kind=\"hist\", kde =True)\n    plt.draw()","0eae5491":"sns.set_theme()\nfor col in var_int:\n    plt.figure()\n    sns.displot(df[col], kind=\"hist\", kde =True)\n    plt.draw()","0c3bf5c7":"for col in var_float:\n    plt.figure()\n    df[\"2020\":\"2021\"][col].plot()\n    plt.ylabel(col)\n    plt.draw()","6ca0679f":"for col in var_int:\n    plt.figure()\n    df[\"2020\":\"2021\"][col].plot()\n    plt.ylabel(col)\n    plt.draw()","c61ac2ad":"sns.lmplot(data = df, x = \"tx_pos\", y = \"taux_occupation_sae\")\nsns.lmplot(data = df, x = \"tx_incid\", y = \"taux_occupation_sae\")","dadbed3c":"sns.lmplot(data = df, x = \"n_cum_dose1\", y = \"taux_occupation_sae\")\nsns.lmplot(data = df, x = \"n_cum_complet\", y = \"taux_occupation_sae\")","c7d9aad3":"sns.lmplot(data = df, x = \"R\", y = \"taux_occupation_sae\")","cd95a6b8":"from sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.pipeline import make_pipeline\nfrom sklearn.preprocessing import RobustScaler\nfrom sklearn.linear_model import SGDRegressor\nfrom sklearn.neighbors import KNeighborsRegressor","84de5db6":"X = df.drop(\"taux_occupation_sae\", axis =1)\ny = df[\"taux_occupation_sae\"]\nX_train, X_test, y_train, y_test = train_test_split(X,y, test_size=0.2, random_state=0)","1d026180":"model = make_pipeline(RobustScaler(),\n                     SGDRegressor(random_state=0))","1a48579f":"params = {'robustscaler__with_centering': ['True','False'],\n          'sgdregressor__eta0': [0.001,0.0001,0.01]}","14cfa276":"grid = GridSearchCV(model, params, cv=4)","90dd4661":"grid.fit(X_train,y_train)","561fc8ac":"grid.best_params_","74ddf5c4":"grid.score(X_test,y_test)*100","343fe630":"model = make_pipeline(RobustScaler(),\n                     KNeighborsRegressor())","faaf52cc":"params = {'robustscaler__with_centering': ['True','False'],\n          'kneighborsregressor__n_neighbors': [1,2,3,4,5]}","d8f3db55":"grid = GridSearchCV(model, params, cv=4)","cca07fe2":"grid.fit(X_train,y_train)","a00644d3":"grid.best_params_","6c48106e":"grid.score(X_test,y_test)*100","b0c317db":"### L'anlyse de ce diff\u00e9rents graphiques montre que le taux d'occupation des lits a baiss\u00e9 avec l'augmentation du taux de vaccination. Cette tendance a \u00e9t\u00e9 cass\u00e9e au milieu de l'\u00e9t\u00e9 (\u00e0 partir de juillet) en d\u00e9pit d'une augmentation du taux d'incidence, du nombre de cas positifs d\u00e9t\u00e9ct\u00e9s ainsi que du taux de reproductivit\u00e9 du virus. La poursuite de la dynamique vaccinale tant pour le premi\u00e8re dose que la seconde a fait qu'on observe tr\u00e8s rapidement un plateau sur la courbe des cas positif entre mi-jillet et mi-a\u00f4ut avant une tendance bassi\u00e8re \u00e0 la fin du mois d'ao\u00fbt. Ce constat se confirme dans les graphiques qui suivent, montrant la d\u00e9pendance lin\u00e9aire entre ces diff\u00e9rents indicateurs.","e6c4427a":"#### On constate qu'aucune de ces variables ne suit une distribution normale, ce qui va nous obliger de proc\u00e9der \u00e0 leur normalisation lors du pre-processing.","bf03e64f":"#### On constate que les variables li\u00e9es aux doses de vaccin sont fortement corr\u00e9l\u00e9es entre elles et le leurs valeurs cummul\u00e9es. Dans la suite de l'analyse nous allons pr\u00e9f\u00e9rer mettre en avant les valeurs cummul\u00e9es qui nous donnent une tendance claire de l'\u00e9volution de la vaccination dans ses deux composantes. Notre target \"Taux d'occupation\" est correl\u00e9 n\u00e9gativement avec l'augmentation des doses de vaccination. ","8a977d8a":"#### modification des hyperparam\u00e8tres","1c970b78":"### On constate qu'avec l'aumentation de la vaccination, le taux d'occupation des lit baisse en d\u00e9pit de l'augmentation du taux de reproductivit\u00e9 du virus, c'est dire le nombre de personne qu'un individu malade peut contaminer. Cela s'explique par le fait que plus le nombre de vaccin\u00e9s \u00e0 la premi\u00e8re et \u00e0 la seconde dose augmente, coupl\u00e9 \u00e0 la lev\u00e9e de restrictions, plus les gens se contaminent mais sans qu'il y ait des formes graves n\u00e9cessitant l'hospitalisation.","9f034c23":"#### modification des hyperparam\u00e8tres","96a7085a":"## ANALYSE DES DONNEES","fece8da7":"#### Une fois la dataset nettoy\u00e9e nous pouvons proc\u00e9der \u00e0 l'analyse","b17d30ba":"### Chargement de la dataset depuis Kaggle","11ed0f7e":"### Au terme de cette analyse, il ressort clairement que plus le nombre de personnes vaccin\u00e9es \u00e0 la 1\u00e8re dose, et encore plus, \u00e0 la 2\u00e8me dose augmente, plus le taux d'occupation des lits dans les hopitaux baisse, ce malgr\u00e9 une hausse de taux de reproductivit\u00e9 du virus, c'est \u00e0 dire le nombre de personne que contamine une personne infect\u00e9e, ceci s'explique par le fait que les personnes d\u00e9j\u00e0 vaccin\u00e9es peuvent \u00eatre contamin\u00e9es mais sans faire des formes graves de maladie, n\u00e9c\u00e9ssitant une hospitalisation.\n\n### L'algorithme de pr\u00e9diction KNNeighborsregressor, donne un r\u00e9sultat plus satisfaisant que le SGDregressor.","f8551bc0":"### En utilisant l'algorithme du KNNeighborsregressor, la valeur du target est pr\u00e9dite avec 98,8% de pr\u00e9cision avec un nombre de voisin proche optimal \u00e9gal \u00e0 alpha de 1.","65682eb5":"#### On constate qu'il y a 3 valeurs manquantes, ce que nous pouvons v\u00e9rifier graphiquement avec le heatmap","401f00da":"# ANALYSE DES DONNEES COVID EN FRANCE ET PREDICTION DU TAUX D'OCCUPATION DES LITS\n#### Dans ce notebook, nous analysons la r\u00e9lation entre les variables li\u00e9es \u00e0 la vaccination (1\u00e8re et 2\u00e8me dose), les variables relative \u00e0 la pand\u00e9mie avec le taux d'occupation des lits dans les hopitaux en \u00e9t\u00e9 en France.","2b0b9709":"### En utilisant l'algorithme du SDGregressor, la valeur du target est pr\u00e9dite avec 89,9% de pr\u00e9cision avec un alpha de descente du gradient oprimal \u00e9gal \u00e0 0.01.","7ba9c650":"### Division de la dataset en train_set et Test_set","3feb6fce":"## PREPROCESSING MODELISATION ET PREDICTION","ab7c981c":"### Plus le nombre de vaccin\u00e9s \u00e0 la premi\u00e8re dose et \u00e0 la deuxi\u00e8me dose augmente, plus le taux d'occupation de lits \u00e0 l'hopital baisse. Cette baisse est plus importante lors le nombre de personnes ayant une vaccination compl\u00e8te augmente. Ceci, en depit de l'augmentation du taux de reproductivit\u00e9 du virus, qui montre que les contaminations augmentent, mais n'engendrent pas des formes graves du fait du grand nombre de vaccin\u00e9s.","49a6b6e9":"#### Avant d'approfondir cette analyse de corr\u00e9lation, observons comment ces indicateurs sont distribu\u00e9s et ont \u00e9volu\u00e9s sur la p\u00e9riode.","794c0efc":"#### Voyons \u00e0 pr\u00e9sent commens ces variables ont \u00e9volu\u00e9es sur la p\u00e9riode.","e9d23da7":"## Mod\u00e8le KNNeighborsregressor","376e04f4":"### mod\u00e8le SDGregressor","26deba50":"### Chargement des estimateurs, transformers et mod\u00e8les n\u00e9c\u00e9ssaires","6f00200f":"### Chargement des library n\u00e9c\u00e9ssaires pour l'analyse des donn\u00e9es","b39f3260":"### On constate bien que plus le taux d'incidnce augmente, donc le taux de positivit\u00e9, plus les lits sont occup\u00e9, cette forte pente signifie que ces nouvelles contaminations sont souvent des formes graves de la maladie, du fait que la majorit\u00e9 des malades sont non vaccin\u00e9s et pr\u00e9sentent les formes grave li\u00e9es aux nouveaux variants.","cb89a09f":"## CONCLUSION","31ebcc33":"#### Ce pairplot nous donne un aper\u00e7u des relations entre les diff\u00e9rentes variables, mais une analyse plus pouss\u00e9e est n\u00e9c\u00e9ssaire. Examinons la corr\u00e9lation entre ces diff\u00e9rentes variables.","bbec110b":"#### Comme le nombre de valeurs manquantes n'est pas tr\u00e8s \u00e9lev\u00e9, on peut simplement les supprimer."}}