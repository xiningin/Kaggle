{"cell_type":{"80d589f6":"code","bff3b708":"code","706f783c":"code","d9b05ab9":"code","a3c8e922":"code","31bde050":"code","567f838e":"code","09285b9e":"code","16fcc8bc":"code","a6b34c93":"code","9cf3742c":"code","bc862fdf":"code","b2fb8992":"markdown","63c1cd19":"markdown","6405ffc7":"markdown","991f5b28":"markdown","8e74920e":"markdown","cd160236":"markdown"},"source":{"80d589f6":"!pip install nb-black >> \/dev\/null","bff3b708":"%load_ext lab_black\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport plotly.express as px\nfrom itertools import cycle\n\nplt.style.use(\"fivethirtyeight\")\ncolor_pal = plt.rcParams[\"axes.prop_cycle\"].by_key()[\"color\"]\ncolor_cycle = cycle(plt.rcParams[\"axes.prop_cycle\"].by_key()[\"color\"])","706f783c":"# Read CSV Version\ndf = pd.read_csv(\n    \"..\/input\/forbes-celebrity-100-google-search-trends\/celebrity_google_trends.csv\"\n)\n# Or Parquet\ndf = pd.read_parquet(\n    \"..\/input\/forbes-celebrity-100-google-search-trends\/celebrity_google_trends.parquet\"\n)","d9b05ab9":"ncelebs = len(df.columns)\nprint(f\"This dataset has search trends for {ncelebs} celebrities.\")","a3c8e922":"df[[\"Taylor Swift\", \"Kim Kardashian\"]].plot(\n    figsize=(15, 5), title=\"Taylor Swift vs Kim Kardashian Search Trends\"\n)\nplt.show()","31bde050":"ax = (\n    df.var()\n    .sort_values()\n    .tail(10)\n    .plot(kind=\"barh\", figsize=(8, 5), color=color_pal[0])\n)\nax.set_title(\"Celebrities with the Most Search Trend Variance\")\nplt.show()","567f838e":"top_10_var = df.var().sort_values().tail(5).index\nax = df[top_10_var].plot(figsize=(12, 5))\nax.set_title(\"Celebrities with the highest Variance\")\nplt.legend(bbox_to_anchor=(1, 1), loc=\"upper left\")","09285b9e":"ax = (\n    df.var()\n    .sort_values(ascending=False)\n    .tail(10)\n    .plot(kind=\"barh\", figsize=(8, 5), color=color_pal[1])\n)\nax.set_title(\"Celebrities with the Least Search Trend Variance\")\nplt.show()","16fcc8bc":"least_5_var = df.var().sort_values(ascending=False).tail(5).index\nax = df[least_5_var].plot(figsize=(12, 5))\nax.set_title(\"Celebrities with the lowest Variance\")\nplt.legend(bbox_to_anchor=(1, 1), loc=\"upper left\")\nplt.show()","a6b34c93":"peak_dict = {}\nfor celeb in df.columns:\n    peak = pd.to_datetime(df.loc[df[celeb] == 100].index.values[0])\n    peak_dict[celeb] = peak","9cf3742c":"peak_search_df = (\n    pd.DataFrame(peak_dict, index=[0])\n    .T.sort_values(0)\n    .rename(columns={0: \"Peak Search Date\"})\n)\n\n# Earliest to peak\npeak_search_df.head()","bc862fdf":"# Most recent\npeak_search_df.tail()","b2fb8992":"# Search trend variability\n- Which celebrities have the most and least variation in their search popularity over time?","63c1cd19":"## What is the date of each celebrities peak?","6405ffc7":"## Top variance in search trends\nThese trends tend to be with musicians. Why is that?\n- Imagine Dragons\n- Katy Perry\n- Akon\n- Black Eyed Peas\n- Justin Bieber\n- Hilary Duff\n- Post Malone","991f5b28":"# Starter Notebook - Celebrity Search Trends.\n\nThis is an exploration of a dataset containing search trends for 499 celebrities for 215 months dating back to 2004. Search trends are relative to the celebrities peak all time trend.","8e74920e":"## Celebrities with the lowest variance.\n\nThese are celebrities that have one defining moment of peak search trend. The peak overshadows the rest of their search history causing the overall variance to be low.","cd160236":"# Compare Two Celebrities Search Trends\n\nTaylor Swift vs. Kim Kardashian"}}