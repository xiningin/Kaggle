{"cell_type":{"37b3e3a9":"code","2cb38545":"code","ad600f48":"code","72d4f140":"code","a3510db0":"code","b10ef40f":"code","dbbdc7e5":"code","b1a5afaf":"code","0037a4c4":"code","6665e451":"code","dc61ca96":"code","f90a84b1":"code","6ffab654":"code","ffa779f7":"code","04ec7a78":"code","b7f681e8":"code","01ccc532":"code","8704ac75":"code","c7dd03a2":"code","d62888c8":"code","9ce7fcb1":"code","863e9cf3":"code","23cb95bf":"code","9ed505cf":"code","b82acc40":"code","7f959353":"code","3982b161":"code","6d7b75a2":"code","76a0ffba":"code","f83d646b":"code","b7c02833":"code","b2a210b7":"code","3b531843":"code","1c06f8b7":"code","6a14b7c8":"code","de354fa9":"code","d2f44dbe":"code","c493c62f":"code","ea9e4dfb":"code","7f78b838":"code","20818c60":"code","3ce22cf3":"code","e2ff2ec7":"code","a544e678":"code","425d78b5":"code","e6520826":"code","32c6b282":"code","370e8c10":"markdown","b2516d2f":"markdown","3d68dd5e":"markdown","9bdf0b98":"markdown","440c5319":"markdown","59e93a75":"markdown","49292be3":"markdown","72ede9ed":"markdown","232b54ce":"markdown","37a392b9":"markdown","fcb66b3e":"markdown","c3e4d78f":"markdown","cb27d7a1":"markdown","eda312cd":"markdown","4e1ac716":"markdown","e7464391":"markdown","49789a2b":"markdown","ade5cbfd":"markdown","4eb67b3b":"markdown","978093bd":"markdown","8abba554":"markdown","660ad9c7":"markdown","d53bb00f":"markdown","25d93466":"markdown","dbbe3c56":"markdown","00f54d59":"markdown","34e4907c":"markdown"},"source":{"37b3e3a9":"!pip install prophet","2cb38545":"!pip install xlrd","ad600f48":"!pip install openpyxl","72d4f140":"import logging \nimport glob\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport pandas as pd \nimport numpy as np\n\nimport plotly as py\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport matplotlib.pyplot as plt\nfrom IPython.display import display\n%matplotlib inline\n\nfrom prophet import Prophet\nfrom prophet.plot import plot_plotly, plot_components_plotly\n\nfrom plotly.offline import plot, iplot, init_notebook_mode \ninit_notebook_mode(connected=True)","a3510db0":"districts = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nproducts = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')\nstate_policy = pd.read_excel('..\/input\/us-state-policy\/COVID-19 US state policy database 9_2_2021.xlsx')\neng_path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data'\neng_files = glob.glob(eng_path + \"\/*.csv\")","b10ef40f":"files = []\n\nfor file in eng_files:\n    df = pd.read_csv(file, index_col = None, header = 0)\n    district_id = file.split('\/')[4].split('.')[0]\n    #print(\"D_id\",district_id)\n    df['district_id'] = district_id\n    files.append(df)\n    \nengagement = pd.concat(files)\nengagement = engagement.reset_index(drop = True)\nengagement['time'] = pd.to_datetime(engagement['time'])\n\n\nlogging.info('Loading data sets done.')","dbbdc7e5":"districts.head(3)","b1a5afaf":"districts.info()","0037a4c4":"round(len(districts.query(\"state != state\")) \/ len(districts) * 100, 1)","6665e451":"districts.dropna(inplace = True)","dc61ca96":"for i in ['pct_black\/hispanic', 'pct_free\/reduced']:\n    districts[i] = districts[i].apply(lambda x: float(x.split(',')[0][1:]) + 0.1)\n\ndistricts['pp_total_raw'] = districts['pp_total_raw'].apply(lambda x: int(x.split(',')[0][1:]) + 1000)\n\ndistricts.drop('county_connections_ratio', axis = 1, inplace = True)\n\ndistricts.head(3)","f90a84b1":"products.head(3)","6ffab654":"products.info()","ffa779f7":"products['Basic_category'] = 'x'\nfor i in range(len(products)):\n    if pd.isna(products['Primary Essential Function'][i]) == False:\n        products['Basic_category'][i] = products['Primary Essential Function'][i].split('-')[0][:-1]\n        \nproducts.head(3)","04ec7a78":"engagement.head()","b7f681e8":"engagement.info()","01ccc532":"#This code has bee taken from:\n#https:\/\/www.kaggle.com\/dmitryuarov\/eda-covid-19-impact-on-digital-learning\/notebook\nstate_abb = {\n    'Alabama': 'AL',\n    'Alaska': 'AK',\n    'American Samoa': 'AS',\n    'Arizona': 'AZ',\n    'Arkansas': 'AR',\n    'California': 'CA',\n    'Colorado': 'CO',\n    'Connecticut': 'CT',\n    'Delaware': 'DE',\n    'District Of Columbia': 'DC',\n    'Florida': 'FL',\n    'Georgia': 'GA',\n    'Guam': 'GU',\n    'Hawaii': 'HI',\n    'Idaho': 'ID',\n    'Illinois': 'IL',\n    'Indiana': 'IN',\n    'Iowa': 'IA',\n    'Kansas': 'KS',\n    'Kentucky': 'KY',\n    'Louisiana': 'LA',\n    'Maine': 'ME',\n    'Maryland': 'MD',\n    'Massachusetts': 'MA',\n    'Michigan': 'MI',\n    'Minnesota': 'MN',\n    'Mississippi': 'MS',\n    'Missouri': 'MO',\n    'Montana': 'MT',\n    'Nebraska': 'NE',\n    'Nevada': 'NV',\n    'New Hampshire': 'NH',\n    'New Jersey': 'NJ',\n    'New Mexico': 'NM',\n    'New York': 'NY',\n    'North Carolina': 'NC',\n    'North Dakota': 'ND',\n    'Northern Mariana Islands':'MP',\n    'Ohio': 'OH',\n    'Oklahoma': 'OK',\n    'Oregon': 'OR',\n    'Pennsylvania': 'PA',\n    'Puerto Rico': 'PR',\n    'Rhode Island': 'RI',\n    'South Carolina': 'SC',\n    'South Dakota': 'SD',\n    'Tennessee': 'TN',\n    'Texas': 'TX',\n    'Utah': 'UT',\n    'Vermont': 'VT',\n    'Virgin Islands': 'VI',\n    'Virginia': 'VA',\n    'Washington': 'WA',\n    'West Virginia': 'WV',\n    'Wisconsin': 'WI',\n    'Wyoming': 'WY'\n}\n\ndistricts['state_abb'] = districts['state'].map(state_abb)\n\nfig = go.Figure()\nlayout = dict(\n    title_text = \"Count of districts in the available States\",\n    title_font = dict(\n    #        family = \"monospace\",\n            size = 25,\n    #        color = \"black\"\n            ),\n    geo_scope = 'usa'\n)\n\nfig.add_trace(\n    go.Choropleth(\n        locations = districts['state_abb'].value_counts().to_frame().reset_index()['index'],\n        zmax = 1,\n        z = districts['state_abb'].value_counts().to_frame().reset_index()['state_abb'],\n        locationmode = 'USA-states',\n        marker_line_color = 'white',\n        geo = 'geo',\n        colorscale = \"viridis\", \n    )\n)\n         \nfig.update_layout(layout)   \nfig.show()\n\n\n","8704ac75":"fig = px.bar(districts['state'].value_counts().reset_index(), x = 'index', y = 'state',\n            text= districts['state_abb'].value_counts().to_frame().reset_index()['state_abb'],\n            labels={'state':'# of districts','index':'State'},\n            title=\"Number of Districts in the Available States\")\n#fig.update_traces(marker_color='#90afc5')\nfig.show()","c7dd03a2":"# Temporary Dataframe for Checking the Distribution of Locale in every State\ntemp = pd.crosstab(districts.state, districts.locale)\ntemp[\"summation\"] = temp.sum(axis=1)\ntemp[\"city_percent\"] = temp.City*100\/temp.summation\ntemp[\"rural_percent\"] = temp.Rural*100\/temp.summation\ntemp[\"suburb_percent\"] = temp.Suburb*100\/temp.summation\ntemp[\"town_percent\"] = temp.Town*100\/temp.summation\n\n# State and locale Distribution Plot\nfig = go.Figure()\nfig.add_trace(go.Bar(x=temp.index, y=temp.city_percent, name=\"Percentage City\"))\nfig.add_trace(go.Bar(x=temp.index, y=temp.rural_percent, name=\"Percentage Rural\"))\nfig.add_trace(go.Bar(x=temp.index, y=temp.suburb_percent, name=\"Percentage Suburb\"))\nfig.add_trace(go.Bar(x=temp.index, y=temp.town_percent, name=\"Percentage Town\"))\n\nfig.update_layout(title=dict(text=\"Locale Distribution per State\", font_size=20, x=0.5),\n                  barmode='stack', \n                  legend=dict(orientation=\"h\",\n                              yanchor=\"bottom\",\n                              y=1.02,xanchor=\"right\",\n                              x=1\n                ))\n","d62888c8":"fig = px.bar(districts['locale'].value_counts().reset_index().rename(columns = {'locale': 'count'}),\n             x = 'index', y = 'count',\n            text=districts['locale'].value_counts().to_frame().reset_index()['locale'],\n            title=\"Number of Districts in Each Type of Area\")\n#fig.update_traces(marker_color='#90afc5')\nfig.show()","9ce7fcb1":"fig, axes = plt.subplots(1, 2)\nsns.kdeplot(data=districts, x=\"pct_black\/hispanic\",color='blue' , shade = True, alpha = 0.9, \n            linewidth = 1.5, edgecolor = 'black',ax = axes[0])\nsns.kdeplot(data=districts, x=\"pct_free\/reduced\",color='blue' , shade = True, alpha = 0.9, \n            linewidth = 1.5, edgecolor = 'black',ax = axes[1])\nsns.set(rc={'figure.figsize':(15,9)})\nplt.suptitle(\"Distribution of Characteristics of school districts\")\n","863e9cf3":"fig, axes = plt.subplots(1, 2)\nsns.kdeplot(data=districts, x=\"pp_total_raw\",color='blue' , shade = True, alpha = 0.9, \n            linewidth = 1.5, edgecolor = 'black',ax = axes[0])\n#sns.kdeplot(data=districts, x=\"pct_free\/reduced\",color='#90afc5' , shade = True, alpha = 0.9, \n#            linewidth = 1.5, edgecolor = 'black',ax = axes[1])\nsns.set(rc={'figure.figsize':(15,9)})\nplt.suptitle(\"Distribution of Characteristics of school districts\")\n\n","23cb95bf":"dist_area_group = districts.groupby('locale').agg({'pct_black\/hispanic': 'mean', 'pct_free\/reduced': \n                                                   'mean', 'pp_total_raw': 'mean'}).reset_index()\n\nfor i in ['pct_black\/hispanic','pct_free\/reduced','pp_total_raw']:\n    fig = px.bar(dist_area_group,x='locale',y = i )\n    fig.show()\n\n#dist_area_group","9ed505cf":"fig = px.bar(products['Provider\/Company Name'].value_counts().reset_index().head(10), x = 'Provider\/Company Name', \n             y = 'index',title='Top 10 of learning Providers\/Companys', \n             labels={'index':'Provider\/Company Name','Provider\/Company Name':''},width=700,height = 700)\nfig.show()","b82acc40":"fig = px.bar(products['Sector(s)'].value_counts().reset_index(), x = 'index', y = 'Sector(s)',\n            text= products['Sector(s)'].value_counts().to_frame().reset_index()['Sector(s)'],\n            labels={'Sector(s)':'# of products','index':'Sector(s)'},\n            title=\"Number of Products used in Different Sectors\")\nfig.show()","7f959353":"fig = px.bar(products['Primary Essential Function'].value_counts().reset_index(), y = 'index', \n             x = 'Primary Essential Function',\n             labels={'index':'Primary Essential Function','Primary Essential Function':\n                    'Number of Products'},title=\"Count of Products by Subcategory\")\nfig.show()\n#products['Primary Essential Function'].value_counts().reset_index(),\n#x = 'Primary Essential Function', y = 'index'","3982b161":"fig = px.pie(products.query(\"Basic_category != 'x'\")['Basic_category'].value_counts().\n             reset_index().rename(columns = {'Basic_category': 'count'}), \n             values = 'count', names = 'index', width = 700, height = 700,\n            title=\"Count of Products by Category\")\nfig.show()","6d7b75a2":"merged_data = pd.merge(products, engagement, left_on = 'LP ID', right_on = 'lp_id')\nmerged_data['district_id'] = merged_data['district_id'].astype('int64')\nmerged_data = pd.merge(merged_data, districts, on = 'district_id')\nmerged_data.drop(['URL', 'lp_id', 'state_abb'], axis = 1, inplace = True)\nmerged_data.head(3)","76a0ffba":"st_ac\u0441ess = merged_data.groupby(['state', 'time']).agg({'pct_access': 'mean'}).reset_index()\nst_eng = merged_data.groupby(['state', 'time']).agg({'engagement_index': 'mean'}).reset_index()\nloc_ac\u0441ess = merged_data.groupby(['locale', 'time']).agg({'pct_access': 'mean'}).reset_index()\nloc_eng = merged_data.groupby(['locale', 'time']).agg({'engagement_index': 'mean'}).reset_index()\ncat_ac\u0441ess = merged_data.groupby(['Basic_category', 'time']).agg({'pct_access': 'mean'}).reset_index()\ncat_eng = merged_data.groupby(['Basic_category', 'time']).agg({'engagement_index': 'mean'}).reset_index()\n\nfor i in [st_ac\u0441ess, st_eng, loc_ac\u0441ess, loc_eng, cat_ac\u0441ess, cat_eng]:\n    i['day_of_week'] = i['time'].dt.dayofweek\n    \nst_ac\u0441ess.head(3)","f83d646b":"\n#This code has bee taken from:\n#https:\/\/www.kaggle.com\/dmitryuarov\/eda-covid-19-impact-on-digital-learning\/notebook\nfig = px.line(st_ac\u0441ess, x=\"time\", y=\"pct_access\", color=\"state\", line_group=\"state\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of pct_access of all products by states', \n                  title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2,tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2,tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=2.7,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            family=\"monospace\",\n            size=11,\n            color=\"black\"\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=2.25,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            size=11,\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","b7c02833":"fig = px.line(st_eng, x=\"time\", y=\"engagement_index\", color=\"state\", line_group=\"state\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of engagement index of all products by states', \n                  title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2,tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2,tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=1150,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            size=11\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=900,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            size=11,\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","b2a210b7":"months_map = {1:\"January\",2:\"February\",3:\"March\",4:\"April\",\n              5:\"May\",6:\"June\",7:\"July\",8:\"August\",9:\"September\",\n              10:\"October\",11:\"November\",12:\"December\"}\n\nfor i in [st_ac\u0441ess, st_eng]:\n    i['state_abb'] = i['state'].map(state_abb)\n    i['month'] = i.time.dt.month.map(months_map)\n\n    fig = px.choropleth(data_frame = i.groupby(['state', 'state_abb', 'month']).agg({i.columns[2]: 'mean'}).reset_index(), locations = \"state_abb\", locationmode = \"USA-states\",\n                    color = i.groupby(['state', 'state_abb', 'month']).agg({i.columns[2]: 'mean'}).reset_index()[i.groupby(['state', 'state_abb', 'month']).agg({i.columns[2]: 'mean'}).reset_index().columns[3]], scope = \"usa\",\n                    color_continuous_scale = \"viridis\", animation_frame = \"month\", hover_name = \"state\")\n    \n    fig.update_layout(title_text = f'Monthly dynamics of {i.columns[2]}', title_font = dict(size = 25,color = \"black\")) \n    \n    fig.show()","3b531843":"cov_imp = pd.DataFrame(st_ac\u0441ess['state'].unique().tolist()).rename(columns = {0: 'state'})\n\n# We have no information about Texas during the start of pandemic\ncov_imp = cov_imp.query(\"state != 'Texas'\").reset_index()\ncov_imp.drop('index', axis = 1, inplace = True)\n\nfor i in ['mean_access', '1w_acess_change%', '2w_acess_change%', 'mean_eng', '1w_eng_change%', '2w_eng_change%']:\n    cov_imp[i] = 0.0\n\nstates = cov_imp['state'].unique().tolist()\n\nfor i in states:\n    cov_imp['mean_access'][states.index(i)] = round(st_ac\u0441ess.query(\"time >= '2020-03-09' & time <= '2020-03-13' & state == @i\")['pct_access'].mean(), 2)\n    cov_imp['1w_acess_change%'][states.index(i)] = round((st_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & state == @i\")['pct_access'].mean() \/ cov_imp['mean_access'][states.index(i)] - 1) * 100, 1)\n    cov_imp['2w_acess_change%'][states.index(i)] = round((st_ac\u0441ess.query(\"time >= '2020-03-23' & time <= '2020-03-27' & state == @i\")['pct_access'].mean() \/ st_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & state == @i\")['pct_access'].mean() - 1) * 100, 1)\n    cov_imp['mean_eng'][states.index(i)] = round(st_eng.query(\"time >= '2020-03-09' & time <= '2020-03-13' & state == @i\")['engagement_index'].mean(), 1)\n    cov_imp['1w_eng_change%'][states.index(i)] = round((st_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & state == @i\")['engagement_index'].mean() \/ cov_imp['mean_eng'][states.index(i)] - 1) * 100, 1)\n    cov_imp['2w_eng_change%'][states.index(i)] = round((st_eng.query(\"time >= '2020-03-23' & time <= '2020-03-27' & state == @i\")['engagement_index'].mean() \/ st_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & state == @i\")['engagement_index'].mean() - 1) * 100, 1)\n\ndef color_values(val):\n    color = 'red' if val < 0 else 'green'\n    return 'color: %s' % color\n\nslice_ = ['1w_acess_change%', '2w_acess_change%', '1w_eng_change%', '2w_eng_change%']\nslice_2 = ['mean_access', '1w_acess_change%', '2w_acess_change%']\nslice_3 = ['mean_eng', '1w_eng_change%', '2w_eng_change%']\ncov_imp.style.applymap(color_values, subset = slice_).set_precision(1).set_properties(**{'background-color': '#fafafa'}, subset=slice_2).set_properties(**{'background-color': '#f7f7f7'}, subset=slice_3)","1c06f8b7":"fig = px.line(loc_ac\u0441ess, x=\"time\", y=\"pct_access\", color=\"locale\", line_group=\"locale\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of pct_access of all products by locale', \n                  title_font_color = '#221f1f', title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2, tickfont_family = 'monospace', tickfont_color = '#221f1f', tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2, tickfont_color = '#221f1f', tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=2,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            size=11\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=1.75,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            size=11\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","6a14b7c8":"fig = px.line(loc_eng, x=\"time\", y=\"engagement_index\", color=\"locale\", line_group=\"locale\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of engagement index of all products by locale', \n                  title_font_color = '#221f1f', title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2, tickfont_family = 'monospace', tickfont_color = '#221f1f', tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2, tickfont_color = '#221f1f', tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=700,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            size=11\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=610,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            size=11\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","de354fa9":"cov_imp2 = pd.DataFrame(loc_ac\u0441ess['locale'].unique().tolist()).rename(columns = {0: 'locale'})\n\nfor i in ['mean_access', '1w_acess_change%', '2w_acess_change%', 'mean_eng', '1w_eng_change%', '2w_eng_change%']:\n    cov_imp2[i] = 0.0\n\nlocales = cov_imp2['locale'].unique().tolist()\n\nfor i in locales:\n    cov_imp2['mean_access'][locales.index(i)] = round(loc_ac\u0441ess.query(\"time >= '2020-03-09' & time <= '2020-03-13' & locale == @i\")['pct_access'].mean(), 2)\n    cov_imp2['1w_acess_change%'][locales.index(i)] = round((loc_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & locale == @i\")['pct_access'].mean() \/ cov_imp2['mean_access'][locales.index(i)] - 1) * 100, 1)\n    cov_imp2['2w_acess_change%'][locales.index(i)] = round((loc_ac\u0441ess.query(\"time >= '2020-03-23' & time <= '2020-03-27' & locale == @i\")['pct_access'].mean() \/ loc_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & locale == @i\")['pct_access'].mean() - 1) * 100, 1)\n    cov_imp2['mean_eng'][locales.index(i)] = round(loc_eng.query(\"time >= '2020-03-09' & time <= '2020-03-13' & locale == @i\")['engagement_index'].mean(), 1)\n    cov_imp2['1w_eng_change%'][locales.index(i)] = round((loc_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & locale == @i\")['engagement_index'].mean() \/ cov_imp2['mean_eng'][locales.index(i)] - 1) * 100, 1)\n    cov_imp2['2w_eng_change%'][locales.index(i)] = round((loc_eng.query(\"time >= '2020-03-23' & time <= '2020-03-27' & locale == @i\")['engagement_index'].mean() \/ loc_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & locale == @i\")['engagement_index'].mean() - 1) * 100, 1)\n\ncov_imp2.style.applymap(color_values, subset = slice_).set_precision(1).set_properties(**{'background-color': '#fafafa'}, subset=slice_2).set_properties(**{'background-color': '#f7f7f7'}, subset=slice_3)\n","d2f44dbe":"fig = px.line(cat_ac\u0441ess.query(\"Basic_category != 'x'\"), x=\"time\", y=\"pct_access\", color=\"Basic_category\", line_group=\"Basic_category\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of pct_access of all products by product category', \n                  title_font_color = '#221f1f', title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2, tickfont_family = 'monospace', tickfont_color = '#221f1f', tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2,tickfont_color = '#221f1f', tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=4.5,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            size=11,\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=3.8,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            family=\"monospace\",\n            size=11,\n            color=\"black\"\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","c493c62f":"fig = px.line(cat_eng.query(\"Basic_category != 'x'\"), x=\"time\", y=\"engagement_index\", color=\"Basic_category\", line_group=\"Basic_category\")\n\nfig.update_layout(plot_bgcolor = 'white', title = 'Dynamics of engagement index of all products by product category', \n                  title_font_color = '#221f1f', title_font_size = 20, title_x = 0.5)\nfig.update_xaxes(showline = True, linecolor = '#f5f2f2', linewidth = 2, tickfont_family = 'monospace', tickfont_color = '#221f1f', tickfont_size = 12)\nfig.update_yaxes(showline = True, linecolor = '#f5f2f2', \n                 showgrid = True, gridwidth = 1, gridcolor = '#f5f2f2',\n                 linewidth = 2,tickfont_color = '#221f1f', tickfont_size = 12)\n\nfig.add_vline(x = '2020-03-11', line_width = 3, line_color=\"red\")\n\nfig.add_annotation(\n        x='2020-03-11',\n        y=1900,\n        text=\"WHO has declared Covid-19 a pandemic\",\n        showarrow=True,\n        font=dict(\n            size=11\n            ),\n        arrowhead=2,\n        arrowsize=1,\n        arrowwidth=2,\n        arrowcolor=\"#636363\",\n        ax= 130,\n        ay=1\n        )\n\nfig.add_vrect(x0=\"2020-06-01\", x1=\"2020-08-31\", fillcolor=\"yellow\", opacity=0.25, line_width=0)\n\nfig.add_annotation(\n        x='2020-07-15',\n        y=1600,\n        text=\"Summer holidays\",\n        showarrow=False,\n        font=dict(\n            size=11\n            )\n        )\n\nfig.update_traces(line_width=1)\n\nfig.show()","ea9e4dfb":"cov_imp3 = pd.DataFrame(cat_eng.query(\"Basic_category != 'x'\")['Basic_category'].unique().tolist()).rename(columns = {0: 'Basic_category'})\n\nfor i in ['mean_access', '1w_acess_change%', '2w_acess_change%', 'mean_eng', '1w_eng_change%', '2w_eng_change%']:\n    cov_imp3[i] = 0.0\n\ncategories = cov_imp3['Basic_category'].unique().tolist()\n\nfor i in categories:\n    cov_imp3['mean_access'][categories.index(i)] = round(cat_ac\u0441ess.query(\"time >= '2020-03-09' & time <= '2020-03-13' & Basic_category == @i\")['pct_access'].mean(), 2)\n    cov_imp3['1w_acess_change%'][categories.index(i)] = round((cat_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & Basic_category == @i\")['pct_access'].mean() \/ cov_imp3['mean_access'][categories.index(i)] - 1) * 100, 1)\n    cov_imp3['2w_acess_change%'][categories.index(i)] = round((cat_ac\u0441ess.query(\"time >= '2020-03-23' & time <= '2020-03-27' & Basic_category == @i\")['pct_access'].mean() \/ cat_ac\u0441ess.query(\"time >= '2020-03-16' & time <= '2020-03-20' & Basic_category == @i\")['pct_access'].mean() - 1) * 100, 1)\n    cov_imp3['mean_eng'][categories.index(i)] = round(cat_eng.query(\"time >= '2020-03-09' & time <= '2020-03-13' & Basic_category == @i\")['engagement_index'].mean(), 1)\n    cov_imp3['1w_eng_change%'][categories.index(i)] = round((cat_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & Basic_category == @i\")['engagement_index'].mean() \/ cov_imp3['mean_eng'][categories.index(i)] - 1) * 100, 1)\n    cov_imp3['2w_eng_change%'][categories.index(i)] = round((cat_eng.query(\"time >= '2020-03-23' & time <= '2020-03-27' & Basic_category == @i\")['engagement_index'].mean() \/ cat_eng.query(\"time >= '2020-03-16' & time <= '2020-03-20' & Basic_category == @i\")['engagement_index'].mean() - 1) * 100, 1)\n\ncov_imp3.style.applymap(color_values, subset = slice_).set_precision(1).set_properties(**{'background-color': '#fafafa'}, subset=slice_2).set_properties(**{'background-color': '#f7f7f7'}, subset=slice_3)\n","7f78b838":"\nst_ac\u0441ess.head(3)","20818c60":"#get the pct access  and time frame \npct_access = st_ac\u0441ess[['time','pct_access']]\n\n#rename the columns \npct_access.columns = ['ds','y']\n\n#turn 'ds' to datetime \npd.to_datetime(pct_access['ds'])\n\npct_access","3ce22cf3":"pct_access.dtypes","e2ff2ec7":"m = Prophet()\nm.fit(pct_access)","a544e678":"future = m.make_future_dataframe(periods=365)\nfuture.tail()","425d78b5":"forecast = m.predict(future)\nforecast[['ds', 'yhat', 'yhat_lower', 'yhat_upper']].tail()","e6520826":"plot_plotly(m, forecast)","32c6b282":"plot_components_plotly(m, forecast)","370e8c10":"**Conclusion**\n- 52 Districts have suburb locale.\n- Most of the data that we have is about suburb","b2516d2f":"## Covid19 impact on Digital Learning\n- Current research shows educational outcomes are far from equitable. The imbalance was exacerbated by the COVID-19 pandemic. There's an urgent need to better understand and measure the scope and impact of the pandemic on these inequities.\n\n- Education technology company LearnPlatform was founded in 2014 with a mission to expand equitable access to education technology for all students and teachers.LearnPlatform\u2019s comprehensive edtech effectiveness system is used by districts and states to continuously improve the safety, equity, and effectiveness of their educational technology. LearnPlatform does so by generating an evidence basis for what\u2019s working and enacting it to benefit students, teachers, and budgets.\n\n- In this analytics competition, I\u2019ll work to uncover trends in digital learning. Accomplish this with data analysis about how engagement with digital learning relates to factors like district demographics, broadband access, and state\/national\n\n## Table of Content \n- [Basic Information and Preprocessing](#BasicInformationandPreprocessing)\n     1. [Districts](#Districts)\n     2. [Products](#Products)\n     3. [Engagement](#Engagement)\n- [Products Visuals](#ProductsVisuals)\n- [Students Activity](#StudentActivity)","3d68dd5e":"**Conclusion**\n- Florida,Michigan,Minnesota, New Jersey and Wisconsi are 100% suburb.\n- Most of the data is about suburb locale.","9bdf0b98":"## Impact of covid19 on digital learning on Locale\n\n**Genaral Overview**\n- pct_access and engagement index are the metrics that I am using to measure the student activity on digital learning.\n\n- Based on thr data,students from rural areas were more engaged in digital learning while students from cities were least engaged.\n\n- During the first week adter the declaration of Covid19 as pandemic by the WHO,theh indicators od student activity(pct_access and enagement index) decreased by 74.3% and 60% for the student in cities.\n\n- The pct_access in the first week decreased by 32.4% in rural areas compared to the 74.3% in cities.\n\n- Students in rural areas might be more enaged in digital learning because of very long distances to educational institutions hence the need to settle for digital learning.\n\n- Educational institutions in cities wre closed to limit the spread of the pandemic hence we should see an increase in the indicators of student activity on digital learning but that is not the case with this data. This issue cannot be explained using this dataset alone.\n\n- The graphs below show the effect of the covid19 pandemic on the student activity metrics in each locale.\n\n- To filter the plotly chart,click twice on the 'locale' that you want to see.","440c5319":"## What is the picture of digital connectivity and engagement in 2020?\n- In the year 2020, from January to the beginning of March. The student angagement with digital learning was steady for most of the states.A change can be noticed from 3rd March when Covid19 pandemic was declared as a pandemic. The student engagement with digital learning rose for most of the states.\n\n- The engagemenent with digital learning also took a drop from June to August.This is because most of the schools had closed for summer holidays.This generalizes the time for summer holidays but different schools in the same or different states go for summer holiday at different times.\n\n- The engagement with digital learning rose again after the summer holiday.Covid19 was still an issue acrosss the world and students were still using digital learning platforms.\n\n- New York has the highest digital engagement throught the year. This can because NY was one of the states that took a worst hit of Covid19 and students were forced to use digital learning.\n\n- The plots below provide more detail on how the digital connectivity angagement was in 2020.","59e93a75":"The district file includes information about the characteristics of school districts:\n- **distirict_id**\n- **state**- The state where the district resides in\n- **locale**- NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural. See Locale Boundaries User's Manual for more information.\n- **pct_black\/hispanic**- Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data\n- **pct_free\/reduced**- Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data\n- **county_connections_ratio**- ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version)\n- **pp_total_raw**- Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district.\n","49292be3":"**Conclusion**\n- The average Per-pupil total expenditure (sum of local and federal expenditure) is \\\\$11 204.50\n\n- The most common value is \\\\$10 000","72ede9ed":"## Impact of covid19 on digital learning on States\n- **Florida:** The studet activity was stable during the start of 2020 from January to 3rd March 2020.After 3rd March, there was a sharp drop in the studet engament activity.In March, there was very little student activity.The student activity picked up in the beginnig of April.However, it also started to decrease in the month of May and picked up again in September where it remained stable for the rest of the year with a few drops here and there.\n\n- **Illinois:** The studet activity was stable during the start of 2020 from January to Mid February 2020.It increased in mid February and remained stable for the rest of the year with a drop during the summer holiday season.\n\n- **Michigan:** The studet activity was stable during the start of 2020 from January to  the begining of March.From March to August, there is no or very little student activity.The student activity can be noticed at the beginning of September and remained stable for the rest of the year.\n\n- **Minnesota:** The studet activity was stable during the start of 2020 from January to  the begining of March.However,it took a drop at the end of March.It rose again in April and dropped at the end of April.No student activity can be noticed from then on to the end of the year.\n\n- **Missouri:** The studet activity was stable during the start of 2020 from January to Mid February 2020.It increased in mid February and remained stable for the rest of the year with a drop during the summer holiday season.\n\n- **New Jersey:** The studet activity was stable during the start of the year.It increased after covid19 was declared as a pandemic by WHO and remained stable for the rest of the year with a drop during the summer holiday season.\n\n- **New York:** The studet activity was stable during the start of the year.It increased after covid19 was declared as a pandemic by WHO and remained stable for the rest of the year with a drop during the summer holiday season.It had the highest student activity throught the year.\n\n- **North Calorina:** The studet activity was stable during the start of the year until mid March.Very little student activity can be noticed from mid March to the end of September.From end of September,the student activity remained stable until the end of the year.\n\n- **Texas:** The studet activity was stable during the start of the year until the end of February.There is no data for Texas from March to mid May.However,from mid May the student activity dropped during the summer holiday and after the holiday it remained stable for the rest of the year.\n\n- **Utah:** The studet activity was stable for the year 2020. It only took a drop during the summer holidays and continued to be stable for the rest of the year.\n\n- **Virginia:** The studet activity was stable for start of the year from January to the beginning of March.It started dropping from the beginning of March and it contined to  do so until the summer holidays.It rose afte the summer holiday and remained stable for the rest of the year.\n\n- **Washington:** The studet activity was stable for start of the year from January until mid March.It dropped for mid march and rose from the start of April.In April,it started dropping and it continued even durinf the summer holiday.It rose after the summer holiday and remained stable for th rest of the year.\n\n- **Wisconsin:** The studet activity was stable for the year 2020. It only took a drop during the summer holidays and continued to be stable for the rest of the year.\n\n- The plots below show how the student activity (pct_access and engagement index) were for each state in the year 2020. \n- To filter the plotly chart,click twice on the 'state' that you want to see.","232b54ce":"**Conclusion**\n- Google LLC has the most number of products","37a392b9":"## Engagement","fcb66b3e":"**Conclusion**\n- The average number of students who identified themselves as black or hispanic is 23.2%. Thought the most common value is 10%.\n\n- The average number of students elligible for free or reduced price lunch is 38%. Though the most common values are ~30% and ~60%","c3e4d78f":"- **Conclusion**\n- Most students who identified themselves as black or hispanic reside in cities. A smal percentage reside in the rural or town.\n- In cities and Town 50% of the students are eligible for free food or reduced food price.\n- The highest total expenses per student is in rural area.","cb27d7a1":"## Impact of covid19 on digital learning on Product Category \n\n**Genaral Overview**\n- There is a decline in L & C(Learning and Curriculum) which is aimed at teaching school childreen. The school children might have seen the pandemic as a time to relax hence the decline\n\n- There is an increase in CM (Classroom Management).Adults might have seen digital learning as a opportunity to get additional education. CM had and increase of 8% in the first week ands 12% in the second week.\n\n- The graphs below show the effect of the covid19 pandemic on each product category.\n\n- To filter the plotly chart,click twice on the 'locale' that you want to see.","eda312cd":"## Predicting Student Activity for 2021\n\n- Used Facebook prohet to predict the Student Activity (pct_access and engagement index).","4e1ac716":"The products file includes information about the characteristics of the top 372 products with the most users in 2020:\n- **LP ID**- The unique identifier of the product\n- **URL**- Web Link to the specific product\n- **Product Name**- Name of the specific product\n- **Provider\/Company**- Name of the product provider\n- **Sector(s)**- Sector of education where the product is used\n- **Primary Essential Function**- The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled\n","e7464391":"We have 24.5% of missing information.","49789a2b":"## Products ","ade5cbfd":"## Student Activity","4eb67b3b":"## Basic Information and Preprocessing","978093bd":"## Districts ","8abba554":"## Products Visuals","660ad9c7":"**Conclusion**\n- Utah has the most number of districts from the dataset\n- Minnesota and Florida have the least number of districts","d53bb00f":"**Conclusion**\n- Most of the products primary function is that they are used in 'Digital Learning Platforms'","25d93466":"The engagement data are aggregated at school district level, and each file in the folder `engagement_data` represents data from one school district. The 4-digit file name represents `district_id` which can be used to link to district information in `district_info.csv`. The `lp_id` can be used to link to product information in `product_info.csv`.\n\n- **time**- date in \"YYYY-MM-DD\" \n- **lp_id**- The unique identifier of the product\n- **pct_access**- Percentage of students in the district have at least one page-load event of a given product and on a given day\n- **engagement_index**- Total page-load events per one thousand students of a given product and on a given day |\n","dbbe3c56":"**Conclusion**\n- There are alot of products that are used in Prek-12.\n- Corporate and Higher Ed;Corporate hhave the least number of products.","00f54d59":"## What is the effect of the COVID-19 pandemic on online and distance learning, and how might this also evolve in the future?\n\n- On 3rd March 2020, when Covid19 was declared as a pandemic by the world health organisation.There was a drop in student activity across the states. The 'pct_access'(Percentage of students in the district have at least one page-load event of a given product and on a given day) dropped for every state during thr first week that the WHO declared Covid19 as a pandemic. It stated to rise during the second week in some states.This sudden dropduring the first week can be attributed to panic by the people.\n\n- After 3 weeks,the student activity picked up for most of the states and it remained 'almost' stable for the rest of the year with a drop during the summer holiday.\n\n- Generally, the student activity increased after Covid19 was declared as a pandemic that before it was delcared.\n\n- The plots below show in detail how the pandemic affected online education for each state,locale and products that are used in digital learning.","34e4907c":"## Districts"}}