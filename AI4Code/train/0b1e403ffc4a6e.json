{"cell_type":{"cbc2ab07":"code","daca7ed6":"code","531416d9":"code","47176759":"code","0c753b3f":"code","b5d6bc03":"code","a86f3e77":"code","23f87f94":"code","d80b8b03":"code","2d64fc71":"code","72b13226":"code","163e0af3":"code","2a41fed0":"code","56801e56":"code","cf7f126a":"code","19d2d24b":"code","08a6deff":"code","4a4edcd5":"markdown","06c75fbc":"markdown","ba86f8a6":"markdown","60cfbfc7":"markdown","63b1ad60":"markdown","7dfcb850":"markdown","24f9e6d6":"markdown","60464939":"markdown","caf29f19":"markdown","b894896a":"markdown","e01f0658":"markdown","cf31540f":"markdown","58fd62ca":"markdown","56a8e730":"markdown","30ae4bc7":"markdown","4e1b3ddf":"markdown","5acd704c":"markdown","12ea0928":"markdown","446c1f7c":"markdown","f4ec1823":"markdown","0c823695":"markdown","0ea5c0cf":"markdown","00423423":"markdown"},"source":{"cbc2ab07":"import numpy as np # linear algebra\nimport pandas as pd # data processing\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n# save filepath to variable for easier access\nopioid_filepath = '..\/input\/opioids-vssr-provisional-drug-overdose-statistics\/VSRR_Provisional_Drug_Overdose_Death_Counts.csv'\n\n# read the data and store data in DataFrame \nopioid_data = pd.read_csv(opioid_filepath)","daca7ed6":"opioid_data.head()","531416d9":"opioid_data.tail()","47176759":"opioid_data.dtypes","0c753b3f":"opioid_data.shape","b5d6bc03":"# Selecting columns\nopioid_features = ['State', 'Year', 'Month', 'Indicator', 'Data Value', 'State Name']\n# Creating new dataframe with selected columns\nselected_opioid_data = opioid_data[opioid_features]\n# Reviewing new dataframe\nselected_opioid_data.head()","a86f3e77":"# Changing all data to String\nselected_opioid_data = selected_opioid_data.astype(str)","23f87f94":"# Confirming the \"Year\" column changed to String\nselected_opioid_data.dtypes","d80b8b03":"# Joining the \"Month\" and \"Year\" columns together\nselected_opioid_data[\"Date\"] = selected_opioid_data[\"Month\"] + \" \" + selected_opioid_data[\"Year\"]\n# Taking a look at the new dataframe\nselected_opioid_data.head()","2d64fc71":"# Now we will parse the Date so that the notebook can read it as an actual date\nimport datetime\nselected_opioid_data['Date_parsed'] = pd.to_datetime(selected_opioid_data['Date'], format=\"%B %Y\")\n# Seeing how it looks\nselected_opioid_data['Date_parsed'].head()","72b13226":"selected_opioid_data.head()","163e0af3":"# Setting the Parsed Date (that the notebook can read as a date) to the index column for easier analysis later on\ndate_indexed_opioid_data = selected_opioid_data.set_index('Date_parsed')\n# Taking a look\ndate_indexed_opioid_data.head()","2a41fed0":"# Setting the Indicator to only look at the \"Number of Drug Overdose Deaths\"\nNum_of_deaths_data = date_indexed_opioid_data[date_indexed_opioid_data.Indicator == 'Number of Drug Overdose Deaths']\n# Taking a look\nNum_of_deaths_data.head()","56801e56":"April2015_deaths_data = Num_of_deaths_data[Num_of_deaths_data.Date == 'April 2015']\nApril2015_deaths_data.head(100)","cf7f126a":"# Setting the State to Alaska\nAlaska_deaths_data = Num_of_deaths_data[Num_of_deaths_data.State == 'AK']\n# Taking a look\nAlaska_deaths_data.head()","19d2d24b":"# Setting the State to Alaska\nOhio_deaths_data = Num_of_deaths_data[Num_of_deaths_data.State == 'OH']\n# Taking a look\nOhio_deaths_data.head()","08a6deff":"# Setting the State to Alaska\nWest_Virginia_deaths_data = Num_of_deaths_data[Num_of_deaths_data.State == 'WV']\n# Taking a look\nWest_Virginia_deaths_data.head()","4a4edcd5":"This still leaves us with the need to change the \"Year\" column to a String and to merge the \"Year\" and \"Month\" together into a single Date. We then need to parse the Date together into a format the notebook can recognise as a Date.","06c75fbc":"Looks good","ba86f8a6":"The data includes New York City, which isn't a state, so we'll need to take another look at the full data later.","60cfbfc7":"<font size=\"3\">**Merging \"Year\" and \"Month\" to form a new \"Date\" Column**","63b1ad60":"Please feel free to use this kernel as a starting point for analysis. And please share this resource with anyone interested in the epidemic. Welcome any feedback.","7dfcb850":"<font size=\"3\">**Removing Columns**","24f9e6d6":"Here we can see that the Total deaths for the United States is listed as a State. We can isolate this to create graphs of only the Total deaths in the United States over time. New York City is also listed separately. We can isolate this for graphs of the New York City on its own. But we will need to remove it in order to see perform a visualisation of the different US states.","60464939":"Looks good.","caf29f19":"That looks good. And for the full dataframe:","b894896a":"*West Virginia*","e01f0658":"<font size=\"3\">**Load data**","cf31540f":"Here, \"Year\" is an integer, so we'll need to reformat this later.","58fd62ca":"<font size=\"3\">**Initial look at data**","56a8e730":"*Alaska*","30ae4bc7":"Now we can group data by State to analyse. Let's begin with Alaska, Ohio and West Virginia.","4e1b3ddf":"<font size=\"3\">**Setting the Indicator to only look at the total number of deaths for that period**","5acd704c":"*Ohio*","12ea0928":"<font size=\"5\">**Initial Data Cleaning and Selection**<\/font>","446c1f7c":"Here we can see the characteristics of the data. It is split by State so we will analyse by State and we will need to sum the data by State to obtain the National total. There is a value for Total Deaths per State and, in some cases, it is broken down further into types of drug. We'll just look at Total Deaths per State for the initial analysis. We also see the date split up into \"Year\" and \"Month\" so we'll need to combine those to form a single date to plot against. \n\nThe period for all data is a \"12 month-ending\" period, so this means the seasonality is already smoothed out. Since all the rows are the same we can remove this column for analysis. Likewise the \"Percent Complete\", \"Percent Pending Investigation\", \"Footnote\", \"Footnote Symbol\" and \"Predicted Value\" can also be removed.\n\nWe can also see that the \"Year\" is an integer (int64) so will need to be changed to a string for the purpose of joining the \"Year\" and \"Month\" together.","f4ec1823":"Let's take another look at the full data now that we have the reduced the data to only show the Number of Deaths and we have the \"Date\" column.","0c823695":"**Taking another look at the full data** ","0ea5c0cf":"<font size=\"3\">**Grouping data by State**","00423423":"I uploaded the data from the Centers for Disease Control and Prevention in its original format. I did this for ease of reference back to the original source and to allow for full analysis of the many layers of information in the dataset. However, we will need to clean and rearrange the data in order to analyse it.\n\nNote: I edited this to change the \"Number of Deaths\" column to \"Number of Drug Overdose Deaths\". \"Number of Deaths\" gives the total deaths (for all causes) in the population. It is the \"Number of Drug Overdose Deaths\" that we want."}}