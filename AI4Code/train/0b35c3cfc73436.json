{"cell_type":{"16f21d9b":"code","bb4800c0":"code","8c372c8d":"code","a1990195":"code","e0d7f024":"code","225335a9":"code","6149aab0":"code","a99171e1":"code","2ea3ffca":"code","2fd3d6a4":"code","9683e7d0":"code","f32503d3":"code","e7b12d6d":"code","ffa1accd":"code","b298fe43":"code","b9514b1a":"code","829655b2":"code","16efca9b":"code","683dfe17":"code","a37dd195":"code","794a0877":"code","9c8569c4":"code","3ae22dce":"code","b1d5a1e6":"code","7d291d39":"code","609e56d8":"code","4bb935ac":"code","3e240295":"code","2a7cf6c8":"code","4d62d85d":"code","ef324c5a":"code","f5650c76":"code","f250b9b2":"code","3ce258eb":"code","5ef70495":"code","0f1b8f35":"code","42856718":"code","23e4be52":"code","a4d3f172":"code","2b4f898b":"code","1dedde33":"code","594f82ae":"code","da559eac":"markdown","215ab3b8":"markdown","eb46a2a3":"markdown","b6183748":"markdown","5143d374":"markdown","8864f30a":"markdown","98c499a2":"markdown","88ab1938":"markdown","3a57e584":"markdown","34661dfb":"markdown","8056b80b":"markdown","d099b380":"markdown","d0d09411":"markdown","1a49410e":"markdown","129124a5":"markdown","a0ea0ac7":"markdown","7379552b":"markdown","f7ee59cd":"markdown","79a3d159":"markdown","10366653":"markdown","a5f04c7d":"markdown","56495ae0":"markdown","799ac19d":"markdown","60910d8d":"markdown","5154efce":"markdown","eb0c4be0":"markdown","51d859d6":"markdown","ba8121b5":"markdown","cbe56eb0":"markdown","ceb4a23f":"markdown","fcb6f94d":"markdown","f0624f33":"markdown"},"source":{"16f21d9b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","bb4800c0":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np","8c372c8d":"df = pd.read_csv('..\/input\/iba-ml1-mid-project\/train.csv')\ndftest = pd.read_csv('..\/input\/iba-ml1-mid-project\/test.csv')","a1990195":"df.head()","e0d7f024":"df.info()","225335a9":"df.shape","6149aab0":"#Converting credit_line_utilization to float\ndf['credit_line_utilization'] = (df['credit_line_utilization'].replace(',','.', regex=True)\n                        .astype(float))","a99171e1":"df.describe()","2ea3ffca":"df.loc[df['monthly_income']== 0, 'monthly_income'].count()","2fd3d6a4":"df.loc[df['age']== 103]","9683e7d0":"df.loc[df['ratio_debt_payment_to_income']== 61106.50]","f32503d3":"df.loc[df['number_of_credit_lines']== 57]","e7b12d6d":"df.loc[df['number_of_previous_late_payments_up_to_59_days']== 98]","ffa1accd":"df.isnull().sum()","b298fe43":"sns.displot(df['monthly_income'],bins=10, color='red')\nplt.show()","b9514b1a":"sns.displot(df['monthly_income'], kind='kde', rug = True, color='violet')\nplt.show()","829655b2":"fig, ax = plt.subplots(figsize=(12,7))\nax.ticklabel_format(style='plain', useOffset=False)\nsns.kdeplot(df['monthly_income'], ax=ax, color='blue', bw_adjust=30)\nplt.show()","16efca9b":"fig, ax = plt.subplots(figsize=(12,7))\nsns.scatterplot(x='age', y='monthly_income', data=df)\nplt.show()","683dfe17":"fig, ax = plt.subplots(figsize=(12,7))\nax.ticklabel_format(style='plain', useOffset=False)\nsns.boxplot(data=df, x='monthly_income', ax=ax)\nplt.show()","a37dd195":"fig, ax = plt.subplots(figsize=(12,7))\nax.ticklabel_format(style='plain', useOffset=False)\nsns.boxplot(data=df, x='ratio_debt_payment_to_income', ax=ax)\nplt.show()","794a0877":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', data=df)\nplt.show()","9c8569c4":"defaulted = df.loc[df['defaulted_on_loan']== 1]","3ae22dce":"defaulted.describe()","b1d5a1e6":"fig, ax = plt.subplots(figsize=(12,7))\nax.ticklabel_format(style='plain', useOffset=False)\nsns.boxplot(data=defaulted, x='monthly_income', ax=ax)\nplt.show()","7d291d39":"defaulted.loc[defaulted['monthly_income'] < 10000, 'monthly_income'].count()","609e56d8":"defaulted.loc[defaulted['monthly_income'] < 20000, 'monthly_income'].count()","4bb935ac":"defaulted.loc[defaulted['monthly_income']== 0, 'monthly_income'].count()","3e240295":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_dependent_family_members', data=defaulted, palette = 'bright')\nplt.show()","2a7cf6c8":"defaulted.loc[defaulted['number_of_previous_late_payments_up_to_59_days']== 98,\\\n              'number_of_previous_late_payments_up_to_59_days'].count()","4d62d85d":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_up_to_59_days', data=defaulted, palette = 'cubehelix')\nplt.show()","ef324c5a":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_up_to_89_days', data=defaulted)\nplt.show()","f5650c76":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_90_days_or_more', data=defaulted, palette = 'gnuplot')\nplt.show()","f250b9b2":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='real_estate_loans', data=defaulted, palette = 'muted')\nplt.show()","3ce258eb":"non_defaulted = df.loc[df['defaulted_on_loan']== 0]","5ef70495":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_dependent_family_members', data=non_defaulted, palette ='YlOrRd')\nplt.show()","0f1b8f35":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_up_to_59_days', data=non_defaulted, palette = 'pastel')\nplt.show()","42856718":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_up_to_89_days', data=non_defaulted, palette = 'Set2')\nplt.show()","23e4be52":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='number_of_previous_late_payments_90_days_or_more', data=non_defaulted, palette = 'dark')\nplt.show()","a4d3f172":"fig, ax = plt.subplots(figsize=(12,7))\nsns.countplot(x = 'defaulted_on_loan', hue='real_estate_loans', data=non_defaulted, palette = 'Paired')\nplt.show()","2b4f898b":"dfnew = df[['age', 'number_dependent_family_members', 'monthly_income', 'number_of_credit_lines',\\\n        'real_estate_loans', 'ratio_debt_payment_to_income', 'credit_line_utilization',  \\\n        'number_of_previous_late_payments_up_to_59_days', 'number_of_previous_late_payments_up_to_89_days',\\\n        'number_of_previous_late_payments_90_days_or_more']]","1dedde33":"dfnew.corr()","594f82ae":"fig, ax = plt.subplots(figsize=(12,7))\nsns.heatmap(dfnew.corr(), annot=True)\nplt.show()","da559eac":"It would be interesting how number of dependent_family members play part in default.","215ab3b8":"Surprisingly, there are 90 people who were late in previous payments for 98 times. Some of them defaulted on loan, some of them did not. I will also present info about number of defaulted below.","eb46a2a3":"It would be interesting to look at information about defaulted borrowers separately","b6183748":"One of borrower defaulted on loan, although the defaulted borrower had larger monthly income than the other one.","5143d374":"Let's see graphs on non-defaulted borrowers","8864f30a":"As can be seen from both boxplots above, there are a lot of outliers in monthly income and ratio_debt_payment_to_income columns.","98c499a2":"Quite interestingly, there is a quite reverse relationship. Borrowers with no dependent family members defaulted more than the borrowers who have dependent family members. Further, as number of dependent family members increases, the number of defaulted borrowers decreases.","88ab1938":"Except two columns, all columns have missing values.","3a57e584":"Now let's see how many borrowers with no income defaulted on loan. ","34661dfb":"As can be seen out of 5013 borrowers, 4096 (almost 80%) had monthly income less than 10000. Let's expand a range to 20000.","8056b80b":"If not take into account some outliers, most defaulted borrowers had low monthly income. Let's verify our assumption","d099b380":"Interestingly, borrower's monthly income was just 1, nevertheless the borrower did not default on loan.","d0d09411":"It would be also interesting to look at the impact of previous late payments on default","1a49410e":"Relationship between number of real estate loans and default is also interesting. As it turns out, borrowers who do not have real estate loans defaulted more frequently than borrowers who had some real estate loans.","129124a5":"In total, 5013 borrowers defaulted on loan. Minimum age was 21 and  maximum age 101. Maximum salary of the borrower who defaulted on loan is 234600. ","a0ea0ac7":"Now I will look at correlation between features, but first I select columns without Id and defaulted_on_loan","7379552b":"Interestingly, borrower at the age of 103 did not default on loan.","f7ee59cd":"Majority of the borrowers who did not default on payment had zero or 1 real estate loans","79a3d159":"Dataframe consists of 72161 rows and 12 columns. One columns is in string, 2 columns in integer and 9 columns is in float format.","10366653":"Surprisingly, only 39 borrowers with no monthly income out of 864 (which I showed above) defaulted on loan.","a5f04c7d":"As can be seen from Correlation matrix above, there is a strong correlation between number of previous late payments up to 59, 89 and 90 days and more.","56495ae0":"X axis is represented in scientific notation. I'll make another Kdeplot and increase bandwith so that plot will be smoother.","799ac19d":"It can be said that, monthly income increases gradually from age 20 to 50, then gradually decreased as age rises.","60910d8d":"As it can be seen from the graphic above, target column is highly imbalanced.","5154efce":"Most of the borrowers who did not default on payments had no dependent family members.","eb0c4be0":"As I mentioned above, there were 90 people who were late for 98 times in previous payments. 51 of them defaulted on loan.","51d859d6":"Almost 90% of the defaulted borrowers had monthly income less than 20000.","ba8121b5":"Concluding from above graphs, there is a reverse relationship between number of late payments with default. Borrowers with no late payments were more likely to default on loan than borrowers who were late in their payments.","cbe56eb0":"Histogram above does not represent frequencies well, so I make kdeplot.","ceb4a23f":"Quite interestingly, 864 borrowers with no monthly_income borrowed money from bank. I present information about default of these borrowers below.","fcb6f94d":"Most of the borrowers who did not default on payments had no previous late payments.","f0624f33":"Interesting moments from above table:\nBorrowers with no monthly income managed to borrow money from bank.\nMaximum age of borrower is 103, which may be consdiered too risky to lend money.\nMaximum ratio debt payment to income is 61106.50, which is quite enormous.\nMaximum number of credit lines opened is 57, which is a large number.\nMaximum number of late payments is 98.\nIt would be interesting to examine those borrowers, so I look them up in dataframe."}}