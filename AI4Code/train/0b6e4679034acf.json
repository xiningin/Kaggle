{"cell_type":{"7e60d8e3":"code","adea87c3":"code","7c87acac":"code","2f48c110":"code","3cf90050":"code","f2c48049":"code","8d4ef31e":"code","98b4a071":"code","8fc32616":"code","86054948":"code","7b8f7fdf":"code","05c21ec2":"code","71292234":"code","9e429df2":"markdown","ed723eb1":"markdown","a0c62a1d":"markdown","1b57a88b":"markdown","c86bf496":"markdown","2551fe29":"markdown","a19c453b":"markdown","3ab85de7":"markdown","2128de28":"markdown","84e17e85":"markdown","8a459eef":"markdown"},"source":{"7e60d8e3":"import numpy as np # linear algebra\nimport os # accessing directory structure\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","adea87c3":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","7c87acac":"df1 = pd.read_csv(\"\/kaggle\/input\/ca-oshpd-adveventhospitalizationspsi-county2005-2015q3.csv\", delimiter=',')\ndf1.dataframeName = \"Adverse Hospital Events\"\nnRow, nCol = df1.shape\nprint(f\"There are {nRow} rows and {nCol} columns\")","2f48c110":"for i in range(len(df1.ObsRate)):\n    df1.Count[i] = int(df1.Count[i].replace(',', ''))\n    df1.Population[i] = int(df1.Population[i].replace(',', ''))\n    df1.ObsRate[i] = 100000 * df1.Count[i] \/ df1.Population[i]\n\ndf1 = df1[df1.County != \"STATEWIDE\"]","3cf90050":"geos = {\"Alameda\": (37.640366, -121.880578),\n       \"Alpine\": (38.599504, -119.802560),\n        \"Amador\": (38.453800, -120.660010),\n        \"Butte\": (39.687971, -121.600976),\n        \"Calaveras\": (38.243448, -120.506967),\n        \"Colusa\": (39.191769, -122.207145),\n        \"Contra Costa\": (37.885338, -121.918506),\n        \"Del Norte\": (41.782004, -123.916940),\n        \"El Dorado\": (38.743386, -120.476513),\n        \"Fresno\": (36.736274, -119.789114),\n        \"Glenn\": (39.593418, -122.369708),\n        \"Humboldt\": (40.613720, -123.874477),\n        \"Imperial\": (33.011018, -115.229721),\n        \"Inyo\": (36.459372, -117.263410),\n        \"Kern\": (35.312492, -118.624158),\n        \"Kings\": (36.018154, -119.807741),\n        \"Lake\": (39.045063, -122.723313),\n        \"Lassen\": (40.647286, -120.485798),\n        \"Los Angeles\": (34.260708, -118.159933),\n        \"Madera\": (37.181234, -119.790605),\n        \"Marin\": (38.056252, -122.680623),\n        \"Mariposa\": (37.558958, -119.991418),\n        \"Mendocino\": (39.464229, -123.394887),\n        \"Merced\": (37.201817, -120.669482),\n        \"Modoc\": (41.595553, -120.678051),\n        \"Mono\": (37.870508, -118.844046),\n        \"Monterey\": (36.109402, -121.152795),\n        \"Napa\": (38.489498, -122.312825),\n        \"Nevada\": (39.336061, -120.849519),\n        \"Orange\": (33.688426, -117.744370),\n        \"Placer\": (39.084290, -120.731134),\n        \"Plumas\": (40.004003, -120.771274),\n        \"Riverside\": (33.702231, -115.888371),\n        \"Sacramento\": (38.472165, -121.305147),\n        \"San Benito\": (36.599524, -121.070537),\n        \"San Bernardino\": (34.862832, -116.156556),\n        \"San Diego\": (32.991834, -116.714210),\n        \"San Francisco\": (37.756454, -122.442409),\n        \"San Joaquin\": (37.946840, -121.255427),\n        \"San Luis Obispo\": (35.367193, -120.361390),\n        \"San Mateo\": (37.403316, -122.300386),\n        \"Santa Barbara\": (34.726410, -120.005606),\n        \"Santa Clara\": (37.226030, -121.680308),\n        \"Santa Cruz\": (37.033096, -121.948246),\n        \"Shasta\": (40.751708, -122.028946),\n        \"Sierra\": (39.590462, -120.409292),\n        \"Siskiyou\": (41.615659, -122.404116),\n        \"Solano\": (38.247722, -121.907008),\n        \"Sonoma\": (38.478863, -122.824891),\n        \"Stanislaus\": (37.568779, -120.973042),\n        \"Sutter\": (39.026107, -121.681325),\n        \"Tehama\": (40.122409, -122.160088),\n        \"Trinity\": (40.707422, -123.048124),\n        \"Tulare\": (36.229581, -118.744465),\n        \"Tuolumne\": (38.057249, -119.913258),\n        \"Ventura\": (34.396072, -119.060124),\n        \"Yolo\": (38.691382, -121.856415),\n        \"Yuba\": (39.254952, -121.373879)\n       }","f2c48049":"df1.describe(include=\"all\")","8d4ef31e":"# Use HTML5 to request ^^\nCoor = (33.643244, -117.595689)\n\n# Use dropdown\nPSI = 22","98b4a071":"dists = []\ndist = float(\"inf\")\nfor count in df1.County.unique():\n    d = np.linalg.norm(np.array(Coor)-np.array(geos[count]))\n    dists.append(d)\n    if d < dist:\n        dist = d\n        County = count","8fc32616":"print(f\"County: {County}\\nPSI: {PSI}\")","86054948":"def rate(df, PSI, County):\n    return float(df.loc[(df.Year == max(df.Year)) & (df.PSI == PSI) & (df.County == County)].ObsRate)","7b8f7fdf":"data = df1.loc[(df1.Year == df1.Year.max()) & (df1.PSI == PSI)]\n\ndata[\"Distance\"] = dists","05c21ec2":"best = data.loc[(data.ObsRate == data.ObsRate.min()) & (data.Population == data[(data.ObsRate == data.ObsRate.min())].Population.max())].County.iloc[0]\n\ngood = data.loc[(data.ObsRate < data.ObsRate.quantile(0.25))]\ngood = good.loc[(good.Population > good.Population.quantile(0.50))]\ngood = list(good.loc[(good.Distance < good.Distance.quantile(0.25))].County)","71292234":"print(f\"Go to {best} County\")\nif len(good) > 0:\n    print(\"\\n\\tAdditional:\")\n    for county in good:\n          print(\"\\t\", county)","9e429df2":"### Load dataset","ed723eb1":"There is 1 csv file in the current version of the dataset:\n","a0c62a1d":"#### Determine best counties","1b57a88b":"## Preparation","c86bf496":"#### Find PSI error rate for county","2551fe29":"# Code beginning for competition","a19c453b":"#### Set up dataframe","3ab85de7":"## Location\n\nhttps:\/\/www.w3schools.com\/html\/tryit.asp?filename=tryhtml5_geolocation","2128de28":"## Introduction\n\nThis dataset consists of iatrogenic events across California Counties. The goal is to enable insights in improving the healthcare system by uniquely analyzing this data.","84e17e85":"### Result","8a459eef":"## Conclusion\nThis algorithm will recommend both the best county as well as great nearby counties to go to."}}