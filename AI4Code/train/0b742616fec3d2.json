{"cell_type":{"43f4189f":"code","4ec85a73":"code","b9447d3d":"code","58dfc8f1":"code","902e982e":"code","d86a3658":"code","7d2dff4d":"code","6114a5b6":"code","7d0706d4":"code","985c9c43":"code","50d100cb":"code","e8a04d38":"code","c44a819c":"code","86ac8d85":"code","0ceae792":"code","f50b6ce5":"code","9916f34c":"code","94feb9c0":"code","bfb350b6":"code","f1966f56":"code","cc1842ac":"code","c9e43b30":"code","e2a39324":"code","d5e32fec":"code","77ca4bde":"code","3f7a1213":"code","50976016":"code","5c950795":"code","09826cce":"code","3a040747":"code","2abd88d9":"code","907ca226":"code","b81580c9":"code","06a4ea7c":"code","a8742d76":"code","e3d03749":"code","5bd906e1":"code","bfb1add9":"code","3e511238":"code","735748e3":"code","44949708":"code","2cd0c055":"code","cd5655e8":"code","8b5f3adc":"code","5226a345":"code","aef82322":"code","3629654d":"code","26f9771d":"code","6577adbf":"code","802a9077":"code","244feb87":"code","f518ef68":"code","bdfec7be":"code","61419948":"code","699ed643":"code","42e0bb1e":"code","1fc3fc5e":"code","034ea664":"code","a06a177c":"code","5bab1f57":"code","7f649873":"code","35b67710":"code","bc7ad144":"code","e5b5bd85":"code","2e338bb6":"code","adc25b63":"code","982f3642":"code","ca1032a4":"code","69275573":"code","c25fdeac":"code","7be61508":"code","63fad98e":"code","d62e9a25":"code","9a2f870c":"code","abda8534":"code","abc768b6":"code","566279da":"code","f94c8a19":"code","9d4700f8":"code","8d4542cb":"code","57640ec0":"markdown","06075dd8":"markdown","846f28d3":"markdown","6b19527d":"markdown","898b2a5d":"markdown","b25fceb9":"markdown","d406b1f5":"markdown","84ff5880":"markdown","c753469e":"markdown","4a279378":"markdown","46a2ef3b":"markdown","b367200c":"markdown","40d92f16":"markdown","484089ef":"markdown","5a9a68f5":"markdown","8657807c":"markdown","118b64c2":"markdown","82d34c7f":"markdown","98e14af2":"markdown","5ac86bf8":"markdown","3cb52c7a":"markdown","a2746a47":"markdown","07fb5db8":"markdown","f40eeb0d":"markdown","5e816098":"markdown","48c32f35":"markdown","f86cfee1":"markdown","26c4aae5":"markdown","01b21c03":"markdown","75f8103e":"markdown","7a179fb8":"markdown","44e91bca":"markdown","2c6ab2dc":"markdown","9086709a":"markdown","794b9044":"markdown","98c9780b":"markdown","702e8627":"markdown","6ecaa926":"markdown","e3ac6539":"markdown","4f2a9e65":"markdown","a46ee61d":"markdown","78b4e95c":"markdown","e54bb147":"markdown","4cc1d292":"markdown","ca1da696":"markdown","479f1fec":"markdown","b5bcb179":"markdown","066ab065":"markdown","02c860c3":"markdown","ad9a1d69":"markdown","362fd34a":"markdown","6edab716":"markdown","f3107565":"markdown","32bc9110":"markdown","ce4364f7":"markdown","49306e99":"markdown","441043c9":"markdown","96406121":"markdown","a9fb7167":"markdown","c27d59f0":"markdown","40e2aa17":"markdown","048a4982":"markdown"},"source":{"43f4189f":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\n%matplotlib inline\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","4ec85a73":"data= pd.read_csv('..\/input\/human-resource\/HR_comma_sep.csv')\ndf=data.copy()","b9447d3d":"df.shape","58dfc8f1":"df.head()","902e982e":"df.columns = df.columns.str.replace(\"sales\", \"dept\")\n","d86a3658":"df.dtypes","7d2dff4d":"df.describe()","6114a5b6":"df.isnull().sum()","7d0706d4":"sns.countplot(x='left', data=df);\n#or\n\n#df[df['left']==1]['left'].sum()","985c9c43":"sns.countplot(x='number_project', data=df);","50d100cb":"dfgroup=df.groupby('number_project')['left'].sum().reset_index(name='left')\ndfgroup","e8a04d38":"sns.barplot(x='number_project', y='left', data=dfgroup);","c44a819c":"sns.countplot(x='time_spend_company', data=df);","86ac8d85":"dftemp = df.groupby('number_project')['left'].value_counts(normalize=True).reset_index(name='Perc')\ndftemp[dftemp['left']==1][['number_project','Perc']]","0ceae792":"temp = df.groupby('time_spend_company')['left'].value_counts(normalize=True).reset_index(name='Perc')\n\nsns.barplot(x='time_spend_company', y='Perc', hue='left', data=temp[temp['left']==1]);","f50b6ce5":"# Number of employees involved in work accident\nsns.countplot(x='Work_accident', data=df);","9916f34c":"sns.countplot(x='Work_accident',hue='left', data=df[df['Work_accident']==1]);","94feb9c0":"sns.countplot(x='promotion_last_5years', hue='left', data=df[df['promotion_last_5years']==1]);","bfb350b6":"sns.countplot(data=df,x='salary');","f1966f56":"df_temp = df.groupby('salary')['left'].value_counts(normalize=True).reset_index(name='Perc')\ndf_temp[df_temp['left']==1]","cc1842ac":"sns.barplot(x='salary', y='Perc', data=df_temp[df_temp['left']==1]);","c9e43b30":"plt.figure(figsize=(15,6));\nsns.countplot(x='dept', data=df);","e2a39324":"temp = df.groupby('dept')['left'].value_counts(normalize=True).reset_index(name='Perc')","d5e32fec":"plt.figure(figsize=(15,6));\n\nsns.barplot(x='dept', y='Perc', hue='left', data=temp[temp['left']==1]);","77ca4bde":"sns.kdeplot(df[df['left'] == 0]['satisfaction_level'], shade=True,label=\"not left\");\nsns.kdeplot(df[df['left'] == 1]['satisfaction_level'], shade=True,label=\"left\");","3f7a1213":"df['satisfaction_level_type']=''\ndf.loc[ df['satisfaction_level'] >= 0.5, 'satisfaction_level_type'] = 'High'\ndf.loc[ df['satisfaction_level'] < 0.5, 'satisfaction_level_type'] = 'Low'","50976016":"sns.countplot(x='satisfaction_level_type', hue='left', data=df);","5c950795":"sns.countplot(x='number_project', hue='satisfaction_level_type', data=df);","09826cce":"sns.countplot(x='number_project', data=df[df['satisfaction_level_type']=='Low']);","3a040747":"df['employee_type']=''","2abd88d9":"df.loc[ df['number_project'] == 2, 'employee_type'] = 'unburdened'\ndf.loc[ (df['number_project'] >= 3) & (df['number_project'] <= 5), 'employee_type'] = 'Satisfactory'\ndf.loc[ df['number_project'] >= 6, 'employee_type'] = 'Burdened'","907ca226":"sns.countplot(x='employee_type', hue='left', data=df);","b81580c9":"df.drop(['number_project', 'satisfaction_level'] ,axis=1,inplace=True)\ndf","06a4ea7c":"df.head()","a8742d76":"df_OneHot=pd.get_dummies(df,columns=['dept', 'salary','satisfaction_level_type','employee_type'])\ndf_OneHot.head()\ndfoh = df_OneHot.copy()","e3d03749":"dfoh","5bd906e1":"X=dfoh.drop(['left'], axis=1)\nY=dfoh[['left']]","bfb1add9":"from sklearn.model_selection import train_test_split","3e511238":"xtrain, xtest, ytrain, ytest = train_test_split(X, Y, test_size=0.30, random_state=100, shuffle=True)","735748e3":"print(xtrain.shape, ytrain.shape)\nprint(xtest.shape,ytest.shape)","44949708":"from sklearn.ensemble import RandomForestClassifier","2cd0c055":"clf_rf = RandomForestClassifier(random_state=100)\nclf_rf.fit(xtrain, ytrain)","cd5655e8":"rf_pred=clf_rf.predict(xtest)\nrf_pred_prb = clf_rf.predict_proba(xtest)[:, 1]","8b5f3adc":"from sklearn.metrics import precision_score","5226a345":"rf_precion= precision_score(ytest, rf_pred)\nprint(\"Precision: {}\".format(rf_precion))","aef82322":"from sklearn.metrics import accuracy_score","3629654d":"rf_acc=accuracy_score(ytest, rf_pred)\nprint(\"Accuracy: {}\".format(rf_acc))","26f9771d":"from sklearn.metrics import recall_score","6577adbf":"rf_recall=recall_score(ytest, rf_pred)\nprint(\"Recall: {}\".format(rf_recall))","802a9077":"from sklearn.metrics import f1_score","244feb87":"rf_f1_score=f1_score(ytest, rf_pred)\nprint(\"F1 Score: {}\".format(rf_f1_score))","f518ef68":"from sklearn.metrics import classification_report","bdfec7be":"print(classification_report(ytest, rf_pred))","61419948":"from sklearn.linear_model import LogisticRegression","699ed643":"lr_model = LogisticRegression(random_state=100, solver='liblinear')\nlr_model.fit(xtrain, ytrain)","42e0bb1e":"lr_pred = lr_model.predict(xtest)","1fc3fc5e":"lr_accuracy= accuracy_score(ytest, lr_pred)\nprint(\"Accuracy: {}\".format(lr_accuracy))","034ea664":"lr_precision = precision_score(ytest, lr_pred)\nprint(\"Precision: {}\".format(lr_precision))","a06a177c":"lr_recall= recall_score(ytest, lr_pred)\nprint(\"Accuracy: {}\".format(lr_recall))","5bab1f57":"lr_f1_score=f1_score(ytest, lr_pred)\nprint(\"Accuracy: {}\".format(lr_f1_score))","7f649873":"print(classification_report(ytest, lr_pred))","35b67710":"from sklearn.ensemble import AdaBoostClassifier","bc7ad144":"clf_adb = AdaBoostClassifier(random_state=100)\nclf_adb.fit(xtrain, ytrain)","e5b5bd85":"pred_clf_adb=clf_adb.predict(xtest)","2e338bb6":"ab_accuracy= accuracy_score(ytest, pred_clf_adb)\nprint(\"Accuracy: {}\".format(ab_accuracy))","adc25b63":"ab_precision=precision_score(ytest, pred_clf_adb)\nprint(\"Precision: {}\".format(ab_precision))","982f3642":"ab_recall=recall_score(ytest, pred_clf_adb)\nprint(\"Recall: {}\".format(ab_recall))","ca1032a4":"ab_f1_score=f1_score(ytest, pred_clf_adb)\nprint(\"F1-score: {}\".format(ab_f1_score))","69275573":"print(classification_report(ytest, pred_clf_adb))","c25fdeac":"import xgboost as xgb","7be61508":"clf_xgb = xgb.XGBClassifier(seed=25,nthread=1,random_state=100)\nclf_xgb.fit(xtrain, ytrain)","63fad98e":"pred_clf_xgb= clf_xgb.predict(xtest)","d62e9a25":"xgb_accuracy=accuracy_score(ytest, pred_clf_xgb)\nprint(\"Accuracy: {}\".format(xgb_accuracy))","9a2f870c":"xgb_precision=precision_score(ytest, pred_clf_xgb)\nprint(\"Precision: {}\".format(xgb_precision))","abda8534":"xgb_recall=recall_score(ytest, pred_clf_xgb)\nprint(\"Recall: {}\".format(xgb_recall))","abc768b6":"xgb_f1_score=f1_score(ytest, pred_clf_xgb)\nprint(\"F1-score: {}\".format(xgb_f1_score))","566279da":"print(classification_report(ytest,pred_clf_xgb))","f94c8a19":"comparison_dict={\"Algorithm\":[\"Random Forest\",\"Logistic Regression\",\"XGBoost\",\"Ada Boost\"],\n                 \"Accuracy\":[rf_acc,lr_accuracy,xgb_accuracy,ab_accuracy],\n                 \"Precision\":[rf_precion,lr_precision,xgb_precision,ab_precision],\n                 \"Recall\":[rf_recall,lr_recall,xgb_recall,ab_recall],\n                 \"F1 Score\":[rf_f1_score,lr_f1_score,xgb_f1_score,ab_f1_score]\n                }","9d4700f8":"comparison = pd.DataFrame(comparison_dict)\ncomparison.sort_values(['Recall', 'Accuracy'], ascending=False)","8d4542cb":"from sklearn.model_selection import GridSearchCV\nparam_grid1 = {\"n_estimators\": [9, 18, 27, 36, 45, 54, 63],\n               \"max_depth\": [1, 5, 10, 15, 20, 25, 30],\n               \"min_samples_leaf\": [1, 2, 4, 6, 8, 10]}\n\nRF = RandomForestClassifier(random_state=100)\n\nRF_cv1 = GridSearchCV(RF, param_grid1, cv=5, scoring='accuracy', n_jobs=4)\n\n\nRF_cv1.fit(xtrain, ytrain)\n\nRF_cv1.best_params_, RF_cv1.best_score_","57640ec0":"Previously we saw that employees having high number of projects are leaving. We also saw that some employees with extremely less number of projects are also leaving the company. Let us see how number of projects and satisfaction level are related.<br>\nWe can see this by checking the satisfaction level type and number of projects in according to that specific type. ","06075dd8":"## **Promotions in last 5 years**","846f28d3":"# Feature Engineering","6b19527d":"- satisfacion_level: Showing satisfaction of a particular employee\n- last_evaluation: Showing last evaluation of a particular employee\n- number_project: Showing number of projects handled a particular employee\n- average_montly_hours: Showing the monthly hours that were spent the particular emloyee\n- time_spend_company: Shows the number of years spent by the particular employee in the company.\n- Work_accident: Showing an employee has whether been part of the company or not.\n- left: Tells either and employee has left the company or not. Shows two values 0= not left, 1= left\n- promotion_last_5years: Shows that the whether the employee has got any promotion in the last 5 years or not.\n- dept: Shows the departments\n- salary: Shows the salary type of the employee","898b2a5d":"more than 300 employees got promoted after five years and less than 20 employees left after being promoted.","b25fceb9":"**F1 Score**","d406b1f5":"**Precision**","84ff5880":"**Accuracy**","c753469e":"\"accuracy: 0.9848 > 0.9825, so there is no need for tuning\"","4a279378":"**Precision**","46a2ef3b":"**Classification Report**","b367200c":"Before moving further, we need to apply one-hot encoding on categorical variables i.e. **dept, salary, satisfaction_level_type,** and **employee_type**","40d92f16":"## Random Forest","484089ef":"# Result Comparisons","5a9a68f5":"<center><font size=\"16\">Human Resource Analysis<\/font><\/center>","8657807c":"Before moving ahead, let us check the details of different variables in the data","118b64c2":"## **Satisfaction Level**","82d34c7f":"**Classification Report**","98e14af2":"# Machine Learning","5ac86bf8":"almost 30% of low salaried employees are most likely to leave","3cb52c7a":"HR department has highest percentage of turn-over","a2746a47":"# Wrangling & EDA","07fb5db8":"**Recall**","f40eeb0d":"I don't believe that there is a need for tunning as Random Forrest is giving us the best results so far","5e816098":"**F1-Score**","48c32f35":"Notice that there is are people associated with low satisfaction level, have either too less projects, i.e. number of projects = 2 or high number of projects i.e. 6 or even 7. The over all count for 7 is low but there is a significant raise if we compare its count with higher satisfaction level.","f86cfee1":"**Classification Report**","26c4aae5":"## Logistic Regression","01b21c03":"Now lets check number of projects for low satisfaction level","75f8103e":"**Accuracy**","7a179fb8":"**Recall**","44e91bca":"## **Salary trends**","2c6ab2dc":"Our prediction was true. Employees having high number of projects such as 6 and 7, and employees having extremely less number of projects are leaving the company because of low satisfaction level.","9086709a":"**Precision**","794b9044":"**Precision**","98c9780b":"more than 55% chance to leave the company after five years of service.","702e8627":"# 3. Exploration","6ecaa926":"more than 1500 people left with assigned project number 2\n\nOne of the reason might be that they weren't able to do it or didn't have the skills to.","e3ac6539":"**Recall**","4f2a9e65":"50 to 100 percent of satifaction of those who are employeed. 10% and mostly 40% satisfaction of those employees who left.","a46ee61d":"**F1-Score**","78b4e95c":"For feature engineering we will two new features. Looking at the the satisfcation we can conclude that people who are leaving have a low satisfaction level, most likely below 0.5 are leaving and people having a high satisfaction_level, most likely above 0.5 are likely to stay. ","e54bb147":"**Accuracy**","4cc1d292":"7000+ employees are being paid low and 6000+ are being paid medium salary. less than 1500 are high paid","ca1da696":"more than 2150 employees were engaged in a work accident out of which only less than 200 left the company.\n","479f1fec":"### Remove Redundant Features","b5bcb179":"## XG Boost","066ab065":"## Ada Boost","02c860c3":"out of 14999, 3571 people left","ad9a1d69":"### Column Description","362fd34a":"**Recall**","6edab716":"sales department has maximum number of employees","f3107565":"## **Employees per Department**","32bc9110":"**Accuracy**","ce4364f7":"**F1-Score**","49306e99":"## 2. Loading Data & Basic Analysis","441043c9":"## **Employees engaged in any work accident**","96406121":"**Classification Report**","a9fb7167":"maximum number of time spend by the employees are 3 years","c27d59f0":"Companies want to improve and maintain a healthy relationship and environment for their employees. This can be achieved by recognizing and understanding the important factors that are associated with employee turnover and taking care of them might add into the productivity and growth of the employees. These insights can help managers for grabing the opportunity to take corrective steps to build and preserve their successful business. \n","40e2aa17":"## **Time spent at the company**","048a4982":"more than 4500 employees were assigned 4 projects, around 4000 employees were assigned 3 projects.\nLeast amount of employees were assinged 7 projects"}}