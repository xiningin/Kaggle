{"cell_type":{"060367dd":"code","6198c68d":"code","bc4388aa":"code","103f1400":"code","fdab2144":"code","946f30df":"code","36a02f8e":"code","de02f5c1":"code","31592c6c":"code","6ba60a39":"code","13224d63":"code","5292c0e1":"code","24bb2e05":"code","1a814ea2":"code","962034b1":"code","c7b835cc":"code","0787d33b":"code","838b6fea":"code","14f310e0":"code","b72c07e4":"code","50034e8c":"markdown","d3183704":"markdown","30c0c91b":"markdown","fbae141a":"markdown","a753651f":"markdown","0a3ed192":"markdown","b483e9d1":"markdown","28578303":"markdown","42c5afa3":"markdown","ce285b32":"markdown","a70b564b":"markdown","ecffd900":"markdown","572f4471":"markdown","fdcfb380":"markdown","2f2db6e9":"markdown","c0088eea":"markdown","7315991e":"markdown","802a5cbe":"markdown","93d1efa4":"markdown","335f8519":"markdown","c67a9460":"markdown","47443d29":"markdown","2561d0d3":"markdown","5aaab8e4":"markdown","acaa8f0a":"markdown","5225d516":"markdown"},"source":{"060367dd":"import os\nprint(os.listdir(\"..\/input\"))\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\n","6198c68d":"# Import the campaign dataset from Excel (Sheet 0 = Non Responders, Sheet 1 = Responders)\ncampaign_type = pd.read_excel(\"..\/input\/campaign_response.xlsx\", sheetname = 0)\n\n# Adding a column of value 1 to act as a count for the response instance\ncampaign_response = pd.read_excel(\"..\/input\/campaign_response.xlsx\", sheetname = 1)\ncampaign_response[\"response\"] = 1","bc4388aa":"print (\"Contains campaign size of: \" + str(len(campaign_type)))\ncampaign_type.head(10)","103f1400":"print (\"Contains patient response size of: \" + str(len(campaign_response)))\ncampaign_response.head(10)","fdab2144":"# Merge on the CampaignID columns\nmerge_campaign = pd.merge(campaign_type, campaign_response, on = \"CampaignID\")\nprint (\"\\n The shape of the merged campaign dataset is: \" + str(merge_campaign.shape))\nmerge_campaign.head()","946f30df":"pivot_campaign = merge_campaign.pivot_table(index = [\"Patient\"], columns = [\"CampaignID\"], values = \"response\")\npivot_campaign.head()","36a02f8e":"pivot_campaign = pivot_campaign.fillna(0).reset_index()\npivot_campaign.head()","de02f5c1":"import pylab as pl\nfrom sklearn.cluster import KMeans\nfrom sklearn.decomposition import PCA","31592c6c":"# Create K Clusters of 15\nk = range(1, 15)\n# Instantiate and Fit KMeans of Clusters 1-15\nkmeans = [KMeans(n_clusters=i) for i in k]\nscore = [kmeans[i].fit(pivot_campaign[pivot_campaign.columns[2:]]).score(pivot_campaign[pivot_campaign.columns[2:]]) for i in range(len(kmeans))]\n# Plot the Elbow Method\n#pl.plot(k,score)\n#pl.xlabel('Number of Clusters')\n#pl.ylabel('Score')\n#pl.title('Elbow Curve')\n#pl.show()","6ba60a39":"# Choose Cluster Size of 3\ncluster = KMeans(n_clusters = 3) # At least 7-times times cluster = patients\n# Predict the cluster from first patient down all the rows\npivot_campaign[\"cluster\"] = cluster.fit_predict(pivot_campaign[pivot_campaign.columns[2:]])","13224d63":"pivot_campaign.head()","5292c0e1":"# Principal component separation to create a 2-dimensional picture\npca = PCA(n_components = 2)\npivot_campaign['x'] = pca.fit_transform(pivot_campaign.iloc[:,1:33])[:,0]\npivot_campaign['y'] = pca.fit_transform(pivot_campaign.iloc[:,1:33])[:,1]\npivot_campaign = pivot_campaign.reset_index()","24bb2e05":"pivot_campaign.head()","1a814ea2":"kmeans_colors = ['green' if c == 0 else 'blue' if c == 2 else 'red' for c in cluster.labels_]\nfig = plt.figure(figsize=(10, 6))\nplt.scatter(x=\"x\",y=\"y\", data=pivot_campaign,alpha=0.25,color = kmeans_colors)\nplt.xlabel(\"PC1\")\nplt.ylabel(\"PC2\")\nplt.title(\"KMeans Clusters\")\nplt.show()","962034b1":"# Tidy up our Data\ncampaign_cluster = pivot_campaign[[\"Patient\", \"cluster\", \"x\", \"y\"]]\ncampaign_cluster.head()","c7b835cc":"# Merge back together\nfinal_campaign = pd.merge(campaign_response, campaign_cluster)\nfinal_campaign = pd.merge(campaign_type, final_campaign)\nfinal_campaign.head()","0787d33b":"# e-mails, short-message services, WhatsApp messages, pamphlets, telephone and long letters\nfinal_campaign[\"cluster_1\"] = final_campaign.cluster == 0\nfinal_campaign.groupby(\"cluster_1\").Type.value_counts()","838b6fea":"# e-mails, short-message services, WhatsApp messages, pamphlets, telephone and long letters\nfinal_campaign[\"cluster_2\"] = final_campaign.cluster == 1\nfinal_campaign.groupby(\"cluster_2\").Type.value_counts()","14f310e0":"# e-mails, short-message services, WhatsApp messages, pamphlets, telephone and long letters\nfinal_campaign[\"cluster_3\"] = final_campaign.cluster == 2\nfinal_campaign.groupby(\"cluster_3\").Type.value_counts()","b72c07e4":"# Number of patients in this cluster\nprint(\"Total respondents: \" + str(final_campaign[final_campaign.cluster == 0][\"Patient\"].count()))\n\n# Show all respondents to cluster 1\nfinal_campaign[final_campaign.cluster == 0][\"Patient\"]","50034e8c":"**Cluster 3** \n\nResponded well to:\n\nSMS, Telephone\n\nDidn't respond well to:\n\nWhatsApp, Email","d3183704":"**Cluster 2** \n\nResponded well to:\n\nEmail\n\nDidn't respond well to:\n\nWhatsapp, SMS","30c0c91b":"**What is K-Means Clustering?**\n\nK-Means Clustering is a clustering algorithm and is considered to be an\n**Unsupervised Learning** technique.\nIt is used to divide a **group** of data points into clusters, where each point in the\ncluster is similar to each other. ","fbae141a":"![image.png](attachment:image.png)","a753651f":"**Target Marketing Campaign**\n\nThe dataset contains patient data to what type of campaign they responded to via a company's healthcare data app. They would send out reminders about their healthcare regulations and each patient has been targeted with these campaigns:\nEmails, SMS, Whatsapp, Pamphlets, Telephone, Long Letters.\n\nThe Objective here is to cluster the patients and understand which campaign yielded the best response, rather than sending many campaigns that the patients will ignore.","0a3ed192":"**Final Merge of Datasets**\n","b483e9d1":" **K - Elbow Method**:   \nThe \u201cELBOW\u201d is where the cumulative variance starts to FLATTEN OUT.\nAnd adding in new clusters beyond this point only yields relatively small increase\nin variance. ","28578303":"**Dataset Campaign Response**\n","42c5afa3":"  ** Dataset Campaign Type**","ce285b32":"Since we know that Cluster 1 responds really well to whatsapp and Long letter, the next possible thing we can do is to perform A\/B Testing with these two platforms and narrow down our focus even more.","a70b564b":"**K-means Clustering**","ecffd900":"**Plot Elbow Curve**","572f4471":"**Visualization**","fdcfb380":" **Target Campaign**","2f2db6e9":"**What is K-Means Clustering Used For?**\n\n**Finding Groups**:\n- Types of Customers\n- Types of Complaints\n- Types of Consumer Behaviors\n- And More\n\n**Finding Anomalies**:\n- Fraud\n- Security\n\n**Data Reduction**:\n- Summarization of data\n- Compression (e.g. Image Processing: vector quantization)","c0088eea":"**Sending the targeted campaign**","7315991e":"**Let's Start**","802a5cbe":"**Important Terminologies**\n\n1. **Centroid**: Simple: the center point of a cluster. If K=3 (we want to find 3 clusters, then we would have 3 centroids, or enters, one for each cluster\n\n2. **Distance Measure**:Distance measures how similar two elements are and will influence the shape of the clusters. To achieve accurate clustering, you need to: \n    * Choose the right distance metric\n    * Have good intuition behind your data \n Common Distance Metrics : Manhattan Distance, Euclidean Distance","93d1efa4":"**How to Choose \u201cRight\u201d Amount of Clusters**\n\n*  Heuristic Criteria, Elbow Method, MANY MANY more...\n\nRemember, clustering is very subjective and it also depends on your problem.","335f8519":"**K-Means Breakdown**\n![image.png](attachment:image.png)\n","c67a9460":"**Create Pivot Table of Patients & Campaign Responses**","47443d29":"**Plot the 3 Clusters**","2561d0d3":"**Create 3 Clusters**","5aaab8e4":"**Fill NAN with 0's**","acaa8f0a":"**Basic Steps for Clustering**\n\n\u25cf **Preprocessing** : Normalization\/Standardization\/ Removing outliers\n\n\u25cf **Distance\/Similarity Measure**: Similarity of two feature vectors\n\n\u25cf **Clustering Criterion**: Based on cost function\n\n\u25cf **Clustering Algorithms**: Based on clustering algorithm\n\n\u25cf **Validation\/Interpretation** ","5225d516":"**Cluster 1** \n\nResponded well to:\n\nWhatsapp, Long letter\n\nDidn't respond well to:\n\nEmail, SMS"}}