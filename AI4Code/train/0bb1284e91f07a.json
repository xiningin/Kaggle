{"cell_type":{"8bff5886":"code","d296a1f9":"code","65c41403":"code","fd4c1c6e":"code","02828488":"code","768cccec":"code","a84066dd":"code","3829582d":"code","3d7535bd":"code","b64c5ea9":"code","c4892701":"code","725a2f76":"code","7457bf10":"code","16c6aac0":"code","d152ba07":"code","58a4a4a7":"code","e59d3f91":"code","6c92801b":"code","5c6841ad":"code","1d6b749b":"code","7a6aed3a":"code","0d9a3a8e":"code","bc8ae4a1":"code","16d581a9":"code","38a02430":"code","daa23235":"markdown","e4a829ec":"markdown","dd067243":"markdown","9da00da1":"markdown","e1dbef38":"markdown","0c7671bb":"markdown","b04844b5":"markdown","4db478dd":"markdown","07b82e4a":"markdown","2cfd6742":"markdown","b1523f97":"markdown","c4200711":"markdown","4e5a8724":"markdown","3d214938":"markdown","e44e74ca":"markdown","6a098c4a":"markdown","d0d7dd39":"markdown","5238103c":"markdown","1fc16a33":"markdown","5fc079cd":"markdown"},"source":{"8bff5886":"import requests\nimport shutil\n\nimage_url = \"https:\/\/imgur.com\/sq800iH.png\"\nfilename = image_url.split(\"\/\")[-1]\n\n\nr = requests.get(image_url, stream = True)\n\n\nif r.status_code == 200:\n    r.raw.decode_content = True\n    with open(filename,'wb') as f:\n        shutil.copyfileobj(r.raw, f)\nelse:\n    print('Image Couldn\\'t be retreived')","d296a1f9":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport nltk\nfrom nltk.corpus import stopwords,wordnet\nfrom nltk.tokenize import WordPunctTokenizer\nfrom string import punctuation\nfrom nltk.stem import WordNetLemmatizer\nfrom nltk import ngrams, FreqDist\nfrom PIL import Image\nimport seaborn as sns\nimport numpy as np\nfrom wordcloud import WordCloud, ImageColorGenerator\n\nsns.set_context(rc={\"font.size\":15,\"axes.titlesize\":20,\"axes.labelsize\":20})\nsns.color_palette(\"YlOrBr\", as_cmap=True)","65c41403":"data = pd.read_csv('..\/input\/perseverance-land-on-mars-youtube-live-comments\/Perseverance_Landing.csv')","fd4c1c6e":"data.head()\n\ndata.drop('Unnamed: 0', axis=1, inplace=True)","02828488":"data.head()","768cccec":"data.isna().sum()","a84066dd":"wordnet_lemmatizer = WordNetLemmatizer()\n\nstop = stopwords.words('english')\n\nfor punct in punctuation:\n    stop.append(punct)\n    \ndef get_wordnet_pos(word):\n    tag = nltk.pos_tag([word])[0][1][0].upper()\n    \n    tag_dict = {\"J\": wordnet.ADJ,\n                \"N\": wordnet.NOUN,\n                \"V\": wordnet.VERB,\n                \"R\": wordnet.ADV}\n\n    return tag_dict.get(tag, wordnet.NOUN)\n\ndef filter_text(text, stop_words):\n    word_tokens = WordPunctTokenizer().tokenize(text)\n    filtered_text = [w for w in word_tokens if w.isalpha()]\n    filtered_text = [wordnet_lemmatizer.lemmatize(w, get_wordnet_pos(w)) for w in filtered_text if not w in stop_words] \n    return \" \".join(filtered_text)\n\ndata[\"filtered_text\"] = data.comment.apply(lambda x : filter_text(x, stop)) \n\ndata.head()","3829582d":"time_stamps = ['1:37:22 ','1:39:04 ','1:39:27 ','1:40:17 ','1:40:42 ','1:41:42 ']","3d7535bd":"minutes_of_terror_data = []\nfor i in range(len(time_stamps)-1):\n    index_start = data[data['time'] == time_stamps[i]].index[0]\n    index_end = data[data['time'] == time_stamps[i+1]].index[-1]\n    minutes_of_terror_data.append(data.iloc[index_start:index_end+1])","b64c5ea9":"index_start = data[data['time'] == '1:43:00 '].index[0]\nindex_end = data[data['time'] == '1:45:00 '].index[-1]\nfirst_image_data = data.iloc[index_start:index_end+1]","c4892701":"def random_color_func(word=None, font_size=None, position=None,  orientation=None, font_path=None, random_state=None):\n    h = int(360.0 * 21.0 \/ 255.0)\n    s = int(100.0 * 255.0 \/ 255.0)\n    l = int(100.0 * float(random_state.randint(60, 120)) \/ 255.0)\n\n    return \"hsl({}, {}%, {}%)\".format(h, s, l)\n\ndef make_wordcloud(words,title):\n    cloud = WordCloud(width=1920, height=1080,max_font_size=200, max_words=300, background_color=\"white\", color_func=random_color_func).generate(words)\n    plt.figure(figsize=(15,15))\n    plt.imshow(cloud, interpolation=\"bilinear\")\n    plt.axis(\"off\") \n    plt.title(title, fontsize=20)\n    plt.show()","725a2f76":"make_wordcloud(\" \".join(minutes_of_terror_data[0].filtered_text),'Parachute Deploy')","7457bf10":"make_wordcloud(\" \".join(minutes_of_terror_data[1].filtered_text), 'Terrain Relative Navigation Valid Solution for Landing Spot')","16c6aac0":"make_wordcloud(\" \".join(minutes_of_terror_data[2].filtered_text), 'Back Shell Separation')","d152ba07":"make_wordcloud(\" \".join(minutes_of_terror_data[3].filtered_text), 'Sky Crane Maneuver')","58a4a4a7":"make_wordcloud(\" \".join(minutes_of_terror_data[4].filtered_text), 'Touchdown Confirmed')","e59d3f91":"make_wordcloud(\" \".join(first_image_data.filtered_text), 'First Image Comments')","6c92801b":"all_text = \" \".join(data.filtered_text) \nwords = nltk.tokenize.word_tokenize(all_text)","5c6841ad":"ngrams_data = dict()\nfor size in 2, 3, 4, 5:\n    ngrams_data[size] = FreqDist(ngrams(words, size))","1d6b749b":"ngrams_2 = pd.DataFrame(ngrams_data[2].most_common(15), columns=['words','count'])\nngrams_2['words'] = ngrams_2.words.apply(lambda a: ' '.join(a))\n\nplt.figure(figsize=(10,10))\nax = sns.barplot(x='count',y='words',data=ngrams_2, orient='h', palette=\"YlOrBr\")\nax.set_ylabel('')\nax = ax.set_title('2-Ngrams')","7a6aed3a":"ngrams_3 = pd.DataFrame(ngrams_data[3].most_common(15), columns=['words','count'])\nngrams_3['words'] = ngrams_3.words.apply(lambda a: ' '.join(a))\n\nplt.figure(figsize=(10,10))\nax = sns.barplot(x='count',y='words',data=ngrams_3, orient='h', palette=\"YlOrBr\")\nax.set_ylabel('')\nax = ax.set_title('3-Ngrams')","0d9a3a8e":"ngrams_4 = pd.DataFrame(ngrams_data[4].most_common(15), columns=['words','count'])\nngrams_4['words'] = ngrams_4.words.apply(lambda a: ' '.join(a))\n\nplt.figure(figsize=(10,10))\nax = sns.barplot(x='count',y='words',data=ngrams_4, orient='h', palette=\"YlOrBr\")\nax.set_ylabel('')\nax = ax.set_title('4-Ngrams')","bc8ae4a1":"ngrams_5 = pd.DataFrame(ngrams_data[5].most_common(15), columns=['words','count'])\nngrams_5['words'] = ngrams_5.words.apply(lambda a: ' '.join(a))\n\nplt.figure(figsize=(10,10))\nax = sns.barplot(x='count',y='words',data=ngrams_5, orient='h', palette=\"YlOrBr\")\nax.set_ylabel('')\nax = ax.set_title('5-Ngrams')","16d581a9":"mask = np.array(Image.open('.\/sq800iH.png'))\n\nwc = WordCloud(mask=mask,width=1920, height=1080,\n               max_font_size=100, max_words=3000,background_color=\"white\",contour_width=0.1)\n\nwc.generate(all_text)\n\nimage_colors = ImageColorGenerator(mask)\n\nplt.figure(figsize=(20,20))\nplt.imshow(wc.recolor(color_func=image_colors), interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()","38a02430":"wc.to_file('word.png')","daa23235":"- [Loading the Data](#loading-the-data)\n- [Analysis](#analysis)   \n    - [The 7 Minutes of Terror](#7-minutes)\n        - [Parachute Deploy](#parachute-deploy)\n        - [Terrain Relative Navigation Valid Solution for Landing Spot](#terrain-relative-navigation)\n        - [Back Shell Separation](#back-shell-separation)\n        - [Sky Crane Maneuver](#sky-crane-maneuver)\n        - [Touchdown Confirmed](#touchdown-confirmed)\n    - [First Image Comments](#first-image)\n    - [Full Live Stream Analysis](#full-analysis)\n        - [Ngrams](#ngrams)\n        - [Special Word Cloud](#word-cloud)\n        \n    ","e4a829ec":"<a id=\"touchdown-confirmed\"><\/a>\n### Touchdown Confirmed\n1:40:42\n\n![Mars_Perseverance_NLF_0009_0667755636_926ECM_N0030000NCAM05000_01_295J.png](attachment:Mars_Perseverance_NLF_0009_0667755636_926ECM_N0030000NCAM05000_01_295J.png)","dd067243":"Tokenize and Lemmatize words using NLTK package.","9da00da1":"We have some spamming, but some interesting phrases like 'Let's Rick Roll Nasa'.","e1dbef38":"<a id=\"loading-the-data\"><\/a>\n# Loading the Data\n","0c7671bb":"Clearly a 5 ngram is just spammig at this point!","b04844b5":"<a id=\"full-analysis\"><\/a>\n## Full Live Stream Analysis\n\nLet's see what people were talking during the live stream, using Ngrams and WordCloud!","4db478dd":"<a id=\"back-shell-separation\"><\/a>\n### Back Shell Separation\n1:39:27","07b82e4a":"Thanks for reading through the end! Hope you liked it!","2cfd6742":"<a id=\"sky-crane-maneuver\"><\/a>\n### Sky Crane Maneuver\n1:40:17\n\n![1-PIA24428-High-Resolution_Still_Image_of_Perseverances_Landing%20%281%29.png](attachment:1-PIA24428-High-Resolution_Still_Image_of_Perseverances_Landing%20%281%29.png)","b1523f97":"<a id=\"ngrams\"><\/a>\n### Ngrams\n","c4200711":"Very positive messages, like 'Good luck Nasa', 'Good luck Perseverence' etc...","4e5a8724":"# Mars 2020 Mission - Perseverence Landing\n## YouTube Live Comments Analysis\n\nYou can find the full live video [here!](https:\/\/www.youtube.com\/watch?v=gm0b_ijaYMQ)\n\nThe goal of this notebook is to understand what people were talking during the [\"7 minutes of terror\"](https:\/\/www.youtube.com\/watch?v=rzmd7RouGrM) (you can see the actual footage [here](https:\/\/www.youtube.com\/watch?v=4czjS9h4Fpg)!) and the comments about the [first image](https:\/\/mars.nasa.gov\/mars2020\/multimedia\/raw-images\/FLR_0000_0666952977_663ECM_T0010044AUT_04096_00_2I3J01#.YD2CrMuBnis.link)! ","3d214938":"<a id=\"parachute-deploy\"><\/a>\n### Parachute Deploy\n1:37:22\n![Mars_Perseverance_EAF_0002_0667110416_040ECV_N0010052EDLC00002_0010LUJ01.png](attachment:Mars_Perseverance_EAF_0002_0667110416_040ECV_N0010052EDLC00002_0010LUJ01.png)","e44e74ca":"<a id=\"7-minutes\"><\/a>\n## The 7 Minutes of Terror","6a098c4a":"<a id=\"first-image\"><\/a>\n## First Image Comments\n1:43:00\n\n![Mars_Perseverance_FLR_0000_0666952977_663ECM_T0010044AUT_04096_00_2I3J01.png](attachment:Mars_Perseverance_FLR_0000_0666952977_663ECM_T0010044AUT_04096_00_2I3J01.png)","d0d7dd39":"<a id=\"word-cloud\"><\/a>\n### Word Cloud","5238103c":"I was here and Mark Rober are the top messages! Mark Rober is a famous youtuber that worked at NASA a couple years ago, you can check his channel [here](https:\/\/www.youtube.com\/c\/MarkRober).","1fc16a33":"<a id=\"analysis\"><\/a>\n# Analysis","5fc079cd":"<a id=\"terrain-relative-navigation\"><\/a>\n### Terrain Relative Navigation Valid Solution for Landing Spot\n1:39:04\n\n![Mars_Perseverance_EDF_0002_0667110925_031ECV_N0010052EDLC00002_0010LUJ01.png](attachment:Mars_Perseverance_EDF_0002_0667110925_031ECV_N0010052EDLC00002_0010LUJ01.png)"}}