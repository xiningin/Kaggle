{"cell_type":{"8bf0c095":"code","8c7ec192":"code","7f177368":"code","50a5d28c":"code","540e944b":"code","2278e775":"code","8c13c578":"code","15b62fb8":"code","17abd0ae":"code","aaba3a06":"code","7965b692":"code","39efb171":"code","c8a4e386":"code","4be53c9e":"code","81dc500e":"code","5c87d176":"code","ec688670":"code","96d31523":"code","efb724f1":"code","48668df9":"code","a4119052":"code","83ae8051":"code","deed2215":"code","e23254b1":"code","82d1075a":"markdown"},"source":{"8bf0c095":"pip install yfinance","8c7ec192":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport yfinance as yf\nfrom scipy import stats\nfrom datetime import date","7f177368":"start = pd.to_datetime('2019-10-14')\nend = pd.to_datetime('2021-11-30')","50a5d28c":"sportking = yf.download('sportking.bo', start, end)\nirctc = yf.download('irctc.ns', start, end)\nnifty_etf = yf.download('icicinifty.ns', start, end)","540e944b":"sportking","2278e775":"irctc","8c13c578":"sportking['Adj Close'].plot(label= 'SPORTKING', figsize= (10,8))\nirctc['Adj Close'].plot(label= 'IRCTC')\nplt.legend()","15b62fb8":"sportking.info()","17abd0ae":"irctc.info()","aaba3a06":"nifty_etf","7965b692":"irctc['Cumulative'] = irctc['Adj Close'] \/ irctc['Adj Close'].iloc[0]\nnifty_etf['Cumulative'] = nifty_etf['Adj Close'] \/ nifty_etf['Adj Close'].iloc[0]","39efb171":"irctc['Cumulative'].plot(label = 'IRCTC', figsize= (12,8))\nnifty_etf['Cumulative'].plot(label = 'ICICI NIFTY ETF')\nplt.legend()\n\n#if I put 1 Rupees in stock on day (14-10-2021) the price would have been shown\n# with the difference of the stock if I put wheather in IRCTC and ICICI Exchange Trading Fund","c8a4e386":"irctc['Daily Return'] = irctc['Adj Close'].pct_change(1)\nnifty_etf['Daily Return'] = nifty_etf['Adj Close'].pct_change(1)\nplt.scatter(irctc['Daily Return'],nifty_etf['Daily Return'], alpha= 0.25)","4be53c9e":"beta, alpha, r_value, p_value, std_err= stats.linregress(irctc['Daily Return'].iloc[1:],\n                                                        nifty_etf['Daily Return'].iloc[1:])\n\nprint('Beta:', beta)\nprint('alpha:', alpha)\nprint('r_value:', r_value)\nprint('p_value', p_value)\nprint('std_err', std_err)","81dc500e":"noise = np.random.normal(0,0.001, len(nifty_etf['Daily Return'].iloc[1:]))\nnoise","5c87d176":"img_stock = nifty_etf['Daily Return'].iloc[1:] + noise\nplt.scatter(img_stock, nifty_etf['Daily Return'].iloc[1:], alpha= 0.25)","ec688670":"beta, alpha, r_value, p_value, std_err= stats.linregress(img_stock,\n                                                         nifty_etf['Daily Return'].iloc[1:])\n\nprint('Beta:', beta)\nprint('alpha:', alpha)\nprint('r_value:', r_value)\nprint('p_value', p_value)\nprint('std_err', std_err)","96d31523":"#if you have a stock that aligns with the stock then the value comes as close to 100%\n# that's what happen with our img_stock(imagimary stock) that we try to laigh iwth thr nifty_etf\n# compare to the stock price beta term between irctc and nifty_etf","efb724f1":"sportking['Adj Close'].plot(label= 'SPORTKING', figsize= (10,8))\nirctc['Adj Close'].plot(label= 'IRCTC')\nplt.legend()","48668df9":"#The spread is the gap between the bid and the ask prices of a security or asset, \n#like a stock, bond, or commodity.\n# Here I have choosen the stocks that as an retail investor seen rapid growth\n# with the stock splits by ratio 5:1 these two stocks\n# Sportking and IRCTC\n\nspread = sportking['Adj Close'] - irctc['Adj Close']\nspread.plot(label= 'Spread', figsize= (12,8))\nplt.axhline(spread.mean(), c= 'r')","a4119052":"def zscore(stocks):\n    return (stocks-stocks.mean()) \/ np.std(stocks)","83ae8051":"zscore(spread).plot(figsize= (14,8))\nplt.axhline(zscore(spread).mean(), color= 'black')\nplt.axhline(1.0, c= 'g', ls= '--')\nplt.axhline(-1.0, c= 'r', ls= '--')","deed2215":"spread_navg1 = spread.rolling(1).mean()\n\nspread_navg30 = spread.rolling(30).mean()\n\nstd_30 = spread.rolling(30).std()\n\nzscore_30_1 = (spread_navg1-spread_navg30)\/std_30","e23254b1":"zscore_30_1.plot(figsize= (12,8), label= 'Rolling 30 day Z score')\nplt.axhline(0, color= 'black')\nplt.axhline(1.0, color='red', ls='--')","82d1075a":"Now calculating the beta and alpha terms, the Capital asset pricing model describes the return of the stock x\ncomprises of beta and alpha terms\n\n> beta term imples that the return of a stock is equivalent to th return of the market multiplied by this beta factor plus some residual alpha term\n\n> you can imagine beta = 1 than this stock moves in line with the market; if beta = 2, then this stock moves up and down tiwcw as much as the general market\n\n> with CAPM stating that alpha should be expected to be zero, it basically implies that you cannot beat the general market, CAPM also says that alpha term is random and also cannot be predicted\n\n> we don't need to predict 100% alpha just be able to predict it correctly more than 50% of the time of portfolio\n\n> the main motive here is we want to et across is that there will be some relationship between our portfolio return and overall market return, this is beta term"}}