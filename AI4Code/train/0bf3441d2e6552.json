{"cell_type":{"55616790":"code","72d94473":"code","f76651e9":"code","48b82d16":"code","0300a809":"code","dcc20292":"code","b037eeae":"code","4b5371c6":"code","d91ef56c":"code","81db58bc":"code","fd881730":"code","d6967812":"code","a36acc1d":"code","921785bd":"code","51942fb0":"code","8d4a5be9":"code","5a5e0916":"code","9b53b326":"code","5e6e63ce":"code","e02c8316":"code","e23101f8":"code","7ab7a873":"code","702bd928":"code","04560c8e":"code","36a010a7":"markdown","f78b78e4":"markdown","a1b14da1":"markdown","b1515a16":"markdown","bf1de15f":"markdown","b3754190":"markdown","f81dd328":"markdown","d1a18db4":"markdown","72aeb18a":"markdown","ab92b169":"markdown","1a04b2c6":"markdown","a562eb57":"markdown"},"source":{"55616790":"import datetime as dt\nimport math\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nfrom sklearn import linear_model, metrics","72d94473":"df = pd.read_csv(\"..\/input\/kickstarter-projects\/ks-projects-201801.csv\")\ndf.head()","f76651e9":"# ID\n# \u4ed8\u4e0e\u3059\u308b\u898f\u5247\u304c\u4e0d\u660e\u306a\u305f\u3081\uff0e\ndf = df.drop(\"ID\", axis=1)\n\n# goal, pledged, usd_pledged\n# \u901a\u8ca8\u5358\u4f4d\u3092\u7d71\u4e00\u3057\u305fusd_pledged_real\u3068usd_goal_real\u3067\u8a55\u4fa1\u3059\u308b\uff0e\ndf = df.drop(\"goal\", axis=1)\ndf = df.drop(\"pledged\", axis=1)\ndf = df.drop(\"usd pledged\", axis=1)\n\ndf.head()","48b82d16":"pledge = df[\"usd_pledged_real\"].values\ngoal = df[\"usd_goal_real\"].values\nachiev = pledge \/ goal\n\ndf[\"achievement\"] = achiev\ndf = df.drop(\"usd_pledged_real\", axis=1)\ndf.head()","0300a809":"def show_unique_items(s):\n    items = list(s.unique())\n    items.sort()\n    for index, item in enumerate(items):\n        print(\"{0:6d}: {1}\".format(index, item))\n    return\n\n# category\nshow_unique_items(df[\"category\"])","dcc20292":"# main_category\nshow_unique_items(df[\"main_category\"])","b037eeae":"# currency\nshow_unique_items(df[\"currency\"])","4b5371c6":"# deadline\nshow_unique_items(df[\"deadline\"])","d91ef56c":"# launched\nshow_unique_items(df[\"launched\"])","81db58bc":"# \"1970-01-01 01:00:00\"\u306f\u6b20\u640d\u5024\u6271\u3044\u3067\u524a\u9664\u3059\u308b\ndf = df[df[\"launched\"] != \"1970-01-01 01:00:00\"]","fd881730":"# state\nshow_unique_items(df[\"state\"])","d6967812":"# failed\u3068successful\u3060\u3051\u6b8b\u3059\ndf = df[(df[\"state\"] == \"failed\") | (df[\"state\"] == \"successful\")]","a36acc1d":"# backers\nshow_unique_items(df[\"backers\"])","921785bd":"# country\nshow_unique_items(df[\"country\"])","51942fb0":"# N,0\"\u306f\u524a\u9664\ndf = df[df[\"country\"] != \"N,0\\\"\"]","8d4a5be9":"# usd_goal_real\nshow_unique_items(df[\"usd_goal_real\"])","5a5e0916":"# achievement\nshow_unique_items(df[\"achievement\"])","9b53b326":"# \u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\nfig = plt.figure()\nax = fig.add_subplot(111)\nax.hist(df[\"achievement\"].values, bins=32)\nax.set_xlabel(\"Achievement\")\nplt.show()","5e6e63ce":"eps = 1.0e-2    # log10(0)\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\uff0e\n                # \u9054\u6210\u73871%\u4ee5\u4e0b\u306f\u533a\u5225\u3057\u306a\u3044\uff0e\nfig = plt.figure()\nax = fig.add_subplot(111)\nax.hist(np.log10(df[\"achievement\"].values + eps), bins=32)\nax.set_xlabel(\"log10(Achievement)\")\nplt.show()","e02c8316":"def deadline_str_to_int(array):\n    utv = []\n    for s in array:\n        datetime_obj = dt.datetime.strptime(s, \"%Y-%m-%d\")\n        utv.append(datetime_obj.timestamp())\n    return utv\n\ndef launched_str_to_int(array):\n    utv = []\n    for s in array:\n        datetime_obj = dt.datetime.strptime(s, \"%Y-%m-%d %H:%M:%S\")\n        utv.append(datetime_obj.timestamp())\n    return utv\n\ndf_dummies = pd.get_dummies(df, columns=[\"main_category\", \"country\"])\ndf_dummies[\"deadline_unix\"] = deadline_str_to_int(df[\"deadline\"].values)\ndf_dummies[\"launched_unix\"] = launched_str_to_int(df[\"launched\"].values)\ndf_dummies.columns","e23101f8":"# \u8aac\u660e\u5909\u6570\nexplanatories = [\n    \"main_category_Art\",\n    \"main_category_Comics\",\n    \"main_category_Crafts\",\n    \"main_category_Dance\",\n    \"main_category_Design\",\n    \"main_category_Fashion\",\n    \"main_category_Film & Video\",\n    \"main_category_Food\",\n    \"main_category_Games\",\n    \"main_category_Journalism\",\n    \"main_category_Music\",\n    \"main_category_Photography\",\n    \"main_category_Publishing\",\n    \"main_category_Technology\",\n    \"main_category_Theater\",\n    \"usd_goal_real\",\n    \"deadline_unix\",\n    \"launched_unix\",\n    \"country_AT\",\n    \"country_AU\",\n    \"country_BE\",\n    \"country_CA\",\n    \"country_CH\",\n    \"country_DE\",\n    \"country_DK\",\n    \"country_ES\",\n    \"country_FR\",\n    \"country_GB\",\n    \"country_HK\",\n    \"country_IE\",\n    \"country_IT\",\n    \"country_JP\",\n    \"country_LU\",\n    \"country_MX\",\n    \"country_NL\",\n    \"country_NO\",\n    \"country_NZ\",\n    \"country_SE\",\n    \"country_SG\",\n    \"country_US\",\n] \nX = df_dummies.loc[:, explanatories].values\ny = df_dummies[\"achievement\"].values","7ab7a873":"# \u7dda\u5f62\u56de\u5e30\nLRPred = linear_model.LinearRegression()\nLRPred.fit(X, y)","702bd928":"for exp, coef in zip(explanatories, LRPred.coef_):\n    print(\"{0:26s}: {1:10.3e}\".format(exp, coef))\nprint(\"{0:26s}: {1:10.3e}\".format(\"intercept\", LRPred.intercept_))","04560c8e":"y_pred = LRPred.predict(X)\nMAE = metrics.mean_absolute_error(y, y_pred)\nMSE = metrics.mean_squared_error(y, y_pred)\nprint(\"Mean absolute error:     {0:.2f}\".format(MAE))\nprint(\"Root mean squared error: {0:.2f}\".format(math.sqrt(MSE)))","36a010a7":"## \u8a55\u4fa1\u6307\u6a19\u3092\u8a2d\u5b9a\n\u51fa\u8cc7\u91d1\u984d\uff08usd_pledged_real\uff09\u3092\u9054\u6210\u7387\uff08achievement\uff09\u306b\u7f6e\u304d\u63db\u3048\uff0e\n\nachievement = usd_pledged_real\/usd_goal_real","f78b78e4":"1.0e-7\u30aa\u30fc\u30c0\u30fc\u306e\u975e\u5e38\u306b\u5c0f\u3055\u306a\u6570\u304c\u3042\u308b\u304c\uff0c\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u306a\u6570\u5024\u306f\u7121\u3055\u305d\u3046\uff0e","a1b14da1":"# Kickstarter regression - Day 1\n* (K.Watanabe)[mailto:watanabe.kazuhiro@obayashi.co.jp]\n* \u73fe\u5834\u3067\u4f7f\u3048\u308b\u6a5f\u68b0\u5b66\u7fd2\u30fb\u30c7\u30fc\u30bf\u5206\u6790\u57fa\u790e\u8b1b\u5ea7\uff08DAY1\uff09\u306e\u8ab2\u984c\uff0e","b1515a16":" ## \u56de\u5e30\n \u3010\u65b9\u91dd\u3011\u3072\u3068\u307e\u305a\u3056\u3063\u304f\u308a\u7dda\u5f62\u56de\u5e30\uff0e\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u4f7f\u7528\u3059\u308b\uff0e\n \n * main_category\uff08One-hot-encording\u30670, 1\u306b\u5c55\u958b\uff09\n * goal\uff08\u305d\u306e\u307e\u307e\uff09\n * deadline\uff08Unix\u6642\u9593\u306b\u5909\u63db\uff09\n * launched\uff08Unix\u6642\u9593\u306b\u5909\u63db\uff09\n * country\uff08One-hot-encording\u30670, 1\u306b\u5c55\u958b\uff09","bf1de15f":"## \u30af\u30ea\u30fc\u30cb\u30f3\u30b0\n\u7834\u640d\u3084nan\u304c\u3042\u308c\u3070\u843d\u3068\u3059\uff0e","b3754190":"## \u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f","f81dd328":"\u306a\u3093\u3068\u306a\u304f\u95a2\u4fc2\u6027\u304c\u898b\u3048\u308b\uff0e\n* \u9054\u6210\u73871%\u4ee5\u4e0b\uff08\u307b\u3068\u3093\u3069\u51fa\u8cc7\u3055\u308c\u306a\u304b\u3063\u305f\uff09\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u305f\u304f\u3055\u3093\u3042\u308b\uff0e\n* \u9054\u6210\u7387100%\u3067\u6210\u529f\u3057\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u305f\u304f\u3055\u3093\u3042\u308b\uff0e\n* \u9054\u6210\u7387100%\u4ee5\u4e0b\u306f\uff08\u5bfe\u6570\u7a7a\u9593\u3067\uff09\u4e00\u69d8\u5206\u5e03\u306b\u8fd1\u3044\uff0e\n    * \u9054\u6210\u738790%\u306e\u3088\u3046\u306a\uff0c\u60dc\u3057\u3044\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u5c11\u306a\u3044\uff0e","d1a18db4":"## \u5c11\u3057\u5206\u6790\n\u30c7\u30fc\u30bf\u306e\u5206\u5e03\u3092\u773a\u3081\u308b\uff0e","72aeb18a":"## \u8aa4\u5dee\u8a55\u4fa1","ab92b169":"## \u5206\u6790\u306b\u4f7f\u7528\u3057\u306a\u3044\u30ab\u30e9\u30e0\u3092\u843d\u3068\u3059","1a04b2c6":"\u9054\u6210\u7387\u304c\u7570\u69d8\u306b\u9ad8\u3044\u30b5\u30f3\u30d7\u30eb\u304c\u6df7\u3058\u3063\u3066\u304a\u308a\uff0c\u7d30\u90e8\u306e\u5206\u5e03\u306f\u3088\u304f\u898b\u3048\u306a\u3044\uff0e","a562eb57":"* ID: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eid\u756a\u53f7\n* name: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\n* category: \u5206\u985e\n* main_category: \u30ad\u30e3\u30f3\u30da\u30fc\u30f3\u306e\u5206\u985e\n* currency: \u901a\u8ca8\u5358\u4f4d\n* deadline: \u30af\u30e9\u30a6\u30c9\u30d5\u30a1\u30f3\u30c7\u30a3\u30f3\u30b0\u306e\u7de0\u5207\u65e5\u6642\n* goal: \u76ee\u6a19\u91d1\u984d\n* launched: \u30af\u30e9\u30a6\u30c9\u30d5\u30a1\u30f3\u30c7\u30a3\u30f3\u30b0\u306e\u958b\u59cb\u65e5\u6642\n* pledged: \u51fa\u8cc7\u91d1\u984d\n* state: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\n* backers: \u51fa\u8cc7\u8005\u306e\u6570\n* country: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6240\u5728\u5730\uff1f\uff08\u9055\u3046\u304b\u3082\u3057\u308c\u306a\u3044\uff09\n* usd pledged: \u51fa\u8cc7\u91d1\u984d\uff08USD\u63db\u7b97\uff09\uff08Kickstarter\u306e\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u304f\uff1f\uff09\n* usd_pledged_real: \u51fa\u8cc7\u91d1\u984d\uff08USD\u63db\u7b97\uff09\uff08fixer.io\u306e\u5b9f\u6e2c\u5024\u306b\u57fa\u3065\u304f\uff09\n* usd_goal_real: \u76ee\u6a19\u91d1\u984d\uff08USD\u63db\u7b97\uff09"}}