{"cell_type":{"773a64e9":"code","3fd7f23b":"code","afb0838c":"code","e1743fd1":"code","a5d8a2ad":"code","ac18daaa":"code","4c195736":"code","27bf86e0":"code","ac276a9e":"code","8adaec6e":"markdown","e3e6ae37":"markdown","c5b0c3a4":"markdown","384af9c3":"markdown","ff865827":"markdown","4686e556":"markdown","cff821a8":"markdown"},"source":{"773a64e9":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nfrom sklearn.feature_selection import VarianceThreshold\nimport plotly.express as px\nimport geopandas as gpd\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","3fd7f23b":"dataFrame = pd.read_csv(\"\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations.csv\")\ndataFrame","afb0838c":"vaccine_used = pd.unique(dataFrame['vaccines'])\nprint(vaccine_used)\nvaccine_used.shape","e1743fd1":"dataFrame['daily_vaccinations'] = dataFrame['daily_vaccinations'].replace(np.nan, 0)","a5d8a2ad":"vaccine_manufacturer = dict()\n\ndef get_vac_count(data):\n    # split the data if multiple vaccines used\n    vacs = data['vaccines'].split(\", \")\n    \n    # update the vaccines dictionary\n    for vac in vacs:\n        if vac in vaccine_manufacturer.keys():\n            vaccine_manufacturer[vac] += data['daily_vaccinations']    \n        else:\n            vaccine_manufacturer[vac] = 0\n\ndataFrame[['daily_vaccinations','vaccines']].apply(get_vac_count, axis=1)\n\nsorted_vaccine_popularity = dict(sorted(vaccine_manufacturer.items(), key = lambda item: item[1], reverse=True))\nsorted_vaccine_popularity","ac18daaa":"chart = plt.figure()\nax = chart.add_axes([-0.5,-0.1,2,1])\nax.bar(sorted_vaccine_popularity.keys(), sorted_vaccine_popularity.values())\nplt.xticks(rotation=90)\nchart.suptitle('Popularity of Vaccine Brands based on Daily Vaccinations')\nplt.show()","4c195736":"country_vac_df = dataFrame[['country', 'iso_code','vaccines']]\ntemp_filter_mask = country_vac_df.duplicated()\nfilter_mask = [not index for index in temp_filter_mask]\nunique_country_vac_df = country_vac_df[filter_mask]\nunique_country_vac_df","27bf86e0":"unique_country_vac_list = []\n\ndef transform_vacs_to_vac(data):\n    # If the country uses only one type of vaccine brand, directly insert to new dataframe.\n    # Else split them and insert to new dataframe separately\n    \n    if \",\" in data['vaccines']:\n        vacs = data['vaccines'].split(\", \")\n        \n        for vac in vacs:\n            temp = {'country': data['country'], 'iso_code': data['iso_code'], 'vaccines': vac}\n            unique_country_vac_list.append(temp)\n    else:\n        temp = {'country': data['country'], 'iso_code': data['iso_code'], 'vaccines': data['vaccines']}\n        unique_country_vac_list.append(temp)\n    \nfor index, row in unique_country_vac_df.iterrows():\n    transform_vacs_to_vac(row)\n\nunique_country_vac_df2 = pd.DataFrame(unique_country_vac_list)\nunique_country_vac_df2.tail(10)","ac276a9e":"world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\nvaccines_list = list(unique_country_vac_df2['vaccines'].unique())\n\ndef one_vac_per_country(data, vac_name):\n    for index, row in unique_country_vac_df2.iterrows():\n        if data['iso_a3'] == row['iso_code'] and row['vaccines'] == vac_name:\n            return vac_name\n\nfor i in range(len(vaccines_list)):\n    world_copy = world.copy()\n    world_copy['vaccines'] = world_copy.apply(lambda row: one_vac_per_country(row, vaccines_list[i]), axis=1)\n    world_copy.plot(column='vaccines', legend=True, figsize=(15, 10), missing_kwds={\n    \"color\": \"lightgrey\",\n    \"label\": \"Other Brands\",\n})","8adaec6e":"I want to check the total usage of each vaccines brands based on daily_vaccinations. Therefore, the null values will be replaced by zero. Filling up the missing data can be done by inserting mean\/ min\/ max of daily vaccination, but I have to separate each and every country because the standard deviation is too large.\n![image.png](attachment:image.png)","e3e6ae37":"Let us see what vaccine is the most popular.\nWe can observe that most of the countries uses combination of vaccines for a reason.","c5b0c3a4":"# Visualization with geopandas\n## Vaccine Brand Distribution in The World\n\nWe know from above that some countries uses more than one vaccine brands. I would like to know the distribution of each vaccine brands in the entire world. Theerefore, I have to separate them and plot them one by one.","384af9c3":"Hi. I am the new kaggler. Despite the task that we are required to track the vaccination progress of each countries, I am curious regarding what vaccines brands are using by each countries. There are several brands to choose but what makes the governments to choose those particular brands? Let see the popularity and distribution of each vaccine brands in the world.","ff865827":"Let's get the total count of the vaccine usage.","4686e556":"Let visualize it","cff821a8":"So, my concerns are:\n1. What factors affect the selection of vaccine brands for them (effectiveness and cost tradeoff)?\n2. What are the differences between those vaccines (stability of vaccines, side effects)?\n\nWhat is your opinions? Share with me :)"}}