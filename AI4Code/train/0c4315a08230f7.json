{"cell_type":{"e19c0100":"code","cef772fc":"code","bf80daee":"code","746fa1d7":"code","652a0305":"code","ef8e0ce5":"code","b1e10a17":"code","2e2e5dde":"code","396914b6":"code","d87e73ce":"code","610ffebc":"code","304ad9a6":"code","5b81c0b7":"code","8989258c":"code","e5c83b38":"code","117ffec5":"code","d3888f5a":"code","96dc4f3e":"code","6e3792ce":"code","9142c5b0":"markdown","18b3ee30":"markdown","7d71ab21":"markdown","2ef224a1":"markdown","a8f562de":"markdown","c946c953":"markdown","d431c19c":"markdown","80de5429":"markdown"},"source":{"e19c0100":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_palette(\"cool\")\nimport warnings\nwarnings.filterwarnings('ignore')\nplt.style.use('ggplot')","cef772fc":"# import datasets\ndf = pd.read_csv('..\/input\/fifa-22-complete-player-dataset\/players_fifa22.csv')\ndf.head()","bf80daee":"df.isna().sum().sort_values(ascending=False)[:10]","746fa1d7":"promising_players = df[(df.Growth > 4) & (df.Potential > 84)].sort_values(by='Potential', ascending=False)\nprint(f'Players find: {promising_players.shape[0]}')","652a0305":"promising_players[\n    ['Name', 'Age', 'Overall', 'Potential', 'BestPosition', 'ValueEUR', 'ReleaseClause']\n].head(20).style.background_gradient(cmap='cool')","ef8e0ce5":"promising_players[\n    ['Name', 'Age', 'Overall', 'Potential', 'BestPosition', 'ValueEUR', 'ReleaseClause']\n].corr().style.background_gradient(cmap='cool')","b1e10a17":"plt.figure(figsize=(12,6))\nsns.boxplot(x='BestPosition', \n            y='Potential', \n            data = promising_players, \n            palette='cool'\n           ).set_title('Potential players by position');","2e2e5dde":"populat_nationality = promising_players.Nationality.value_counts()[:10].keys()\nplt.figure(figsize=(12,6))\nsns.boxplot(x='Nationality', \n            y='Potential', \n            data = promising_players[promising_players.Nationality.isin(populat_nationality)], \n            palette='cool'\n           ).set_title('Potential players by nationality');","396914b6":"plt.figure(figsize=(16,6))\nplt.xticks(rotation=340)\nclub_count_players = promising_players.Club.value_counts()[:20]\nsns.barplot(x=club_count_players.index, \n            y=club_count_players.values,\n            palette='Set2'\n           ).set_title('Talents in clubs');","d87e73ce":"from IPython.display import display, HTML\nprinting_cols =['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ValueEUR', 'ReleaseClause']\nfor pos in promising_players.BestPosition.unique():\n    print(f'Best {pos}')\n    display(HTML(promising_players[promising_players.BestPosition == pos][printing_cols].head(5).to_html()))\n    print('\\n\\n')","610ffebc":"print(\"FIFA is far from real football...\")\ndf.iloc[:, -17:].corr().style.background_gradient(cmap='cool')","304ad9a6":"from math import pi\n\ndef make_spider(row, i):\n    # Create Radar chart\n    categories=['PassingTotal', 'ShootingTotal', 'PaceTotal', \n                'PhysicalityTotal',  'DefendingTotal', 'DribblingTotal']\n    if row[1].BestPosition == \"GK\":\n        categories=['Reactions', 'GKDiving', 'GKHandling', \n                    'GKKicking', 'GKPositioning', 'GKReflexes']\n    N = len(categories)\n    angles = [n \/ float(N) * 2 * pi for n in range(N)]\n    angles += angles[:1]\n    ax = plt.subplot(1, 3, i + 1, polar=True)\n    plt.subplots_adjust(wspace=0.6)\n    xticks_names =  [f\"{cat.replace('Total', '')}\\n{row[1][cat]}\" for cat in categories]\n    plt.xticks(angles[:-1], xticks_names, color='grey', size=10)\n \n    ax.set_rlabel_position(0)\n    ax.set_facecolor('xkcd:black')\n    plt.yticks([40, 50, 60, 70, 80, 90], \n               [\"40\", \"50\", \"60\",\"70\",\"80\",\"90\"], \n               color=\"grey\", size=8)\n    plt.ylim(0,100)\n \n\n    values=row[1][categories].values.flatten().tolist()\n    values += values[:1]\n    ax.plot(angles, values, color='cyan', linewidth=3, linestyle='solid')\n    ax.fill(angles, values, color='cyan', alpha=0.6)\n \n    plt.title(row[1].Name, size=14, color='black', y=1.1)\n\npositions = ['ST', 'CF', 'RF', 'LF', 'RW', 'LW', 'LM', 'RM', \n             'CAM', 'CM', 'CDM', 'RB', 'LB', 'CB', 'RWB', 'LWB', 'GK']\nbar_kwargs = dict(x='Name', y='Overall', figsize=(16,4), yticks=list(range(0, 100, 10)), rot=0)\n\nfor pos in positions:\n    print(f'\\n\\nBest in {pos}')\n    plt.figure(figsize=(16,16))\n    for i, row in enumerate(df[df.ClubPosition==pos][:3].iterrows()):\n        make_spider(row, i)\n    plt.show()","5b81c0b7":"df[df.ContractUntil < 2022][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:10].style.background_gradient(cmap='cool')","8989258c":"print('Best under 27')\ndf[(df.ContractUntil < 2022) & (df.Age < 27)][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:20].style.background_gradient(cmap='cool')","e5c83b38":"print('Young and talented')\ndf[(df.ContractUntil < 2022) & (df.Age < 25) & (df.Growth > 4)][\n    ['Name', 'Age', 'Overall', 'Potential', 'Positions', 'ContractUntil', 'WageEUR']\n][:20].style.background_gradient(cmap='cool')","117ffec5":"def highlight_low(s):\n    if s.dtype == 'O':\n        return ['' for v in s]\n    is_low = s <= s.quantile(0.1)\n    return ['background-color: hotpink' if v else '' for v in is_low]\n\n\nrating_columns = ['Name', 'Positions'] + list(df.columns[33:39])","d3888f5a":"df[df.BestPosition == 'CM'][:10][rating_columns].style.apply(highlight_low)","96dc4f3e":"df[df.BestPosition == 'ST'][:10][rating_columns].style.apply(highlight_low)","6e3792ce":"df[df.BestPosition == 'CB'][:10][rating_columns].style.apply(highlight_low)","9142c5b0":"# Anomalies in skill assessment\n\n## Do you remember the speed of Toni Kroos? 41 :)))","18b3ee30":"\n\n\nThank you for watching. Dataset from https:\/\/www.kaggle.com\/cashncarry\/fifa-22-complete-player-dataset","7d71ab21":"## Best by position","2ef224a1":"## The most promising players","a8f562de":"### Missing data","c946c953":"# Hello ~~World~~ FIFA 22\n\nFifa 22 Players Brief\n- the most promising\n- the best by position\n- future free agents","d431c19c":"18,491 players are not on the national team and 70 are free agents","80de5429":"# Who are the best future free agents?"}}