{"cell_type":{"8aa93608":"code","31a7dfc2":"code","bb256a19":"code","d2a5f32d":"code","5c668ae8":"code","be294f18":"code","5a96e990":"code","1c31a492":"code","af5a61bc":"code","09743460":"code","813b7f72":"code","c1980343":"code","03cfbee4":"code","69842e09":"markdown","a9dca53e":"markdown","dca24d1a":"markdown","a933a7e3":"markdown","56f2f5da":"markdown","2d1c952f":"markdown","427b9826":"markdown","040f13d4":"markdown","dd61375c":"markdown","d8931fd1":"markdown","e5beb17f":"markdown"},"source":{"8aa93608":"# general packages\nimport pandas as pd\nimport numpy as np\n\n# plotting tools\nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport seaborn as sns\nimport folium\nfrom folium import plugins\nimport geopandas as gpd\nimport branca\n\n\n# stat tools\nfrom scipy.stats import pearsonr","31a7dfc2":"# loading dataset\nDATAPATH = \"..\/input\/covid-in-african-countries-latest-data\/covid_africa.csv\"\ndf = pd.read_csv(DATAPATH)\ndf['Infection Rate'] = df['Total Cases'] \/df['Total Tests']\ndf['Death Rate'] = df['Total Deaths'] \/ df['Total Cases']\ndf.sort_values('Population', ascending=False).style.bar(color = 'lightgreen', axis = 0)","bb256a19":"df[df.isna().any(axis=1)]","d2a5f32d":"plt.rcParams['figure.dpi'] = 150\nfig, ax = plt.subplots()\nax.scatter(df['Population'], df['Total Cases'], s=5)\nax.set_xscale('log')\nax.set_yscale('log')\nax.set_xlabel('Population')\nax.set_ylabel('Total cases')\nplt.show()\n\nfig, ax = plt.subplots()\nax.scatter(df[df['Infection Rate']<1]['Population'], df[df['Infection Rate']<1]['Infection Rate'], s=5)\nax.scatter(df[df['Infection Rate']>0.8]['Population'], df[df['Infection Rate']>0.8]['Infection Rate'], s=5, c='r')\n\nax.set_xscale('log')\nax.set_yscale('log')\nax.set_xlabel('Population')\nax.set_ylabel('Infection rate')\nplt.show()","5c668ae8":"corr, _ = pearsonr(np.log10(df['Population']), np.log10((df['Total Cases'])))\nprint(\"Pearson R (population against total cases):\", round(corr, 5))\ncorr, _ = pearsonr(np.log10(df[df['Infection Rate'].notna()]['Population']), np.log10(df[df['Infection Rate'].notna()]['Infection Rate']))\nprint(\"Pearson R (population against infection rate):\", round(corr, 5))","be294f18":"fig, ax = plt.subplots()\nax.scatter(df['Population'], df['Tests\/1 mil population'], s=5)\nax.set_xscale('log')\nax.set_yscale('log')\nax.set_xlabel('Population')\nax.set_ylabel('Test number per 1M population')\nplt.show()","5a96e990":"corr, _ = pearsonr(np.log10(df[df['Tests\/1 mil population'].notna()]['Population']), np.log10((df[df['Tests\/1 mil population'].notna()]['Tests\/1 mil population'])))\nprint(\"Pearson R (population against test rate):\", round(corr, 5))","1c31a492":"fig, ax = plt.subplots()\nax.scatter(df['Population'], df['Death Rate'], s=5)\nax.set_xscale('log')\n# ax.set_yscale('log')\nax.set_xlabel('Population')\nax.set_ylabel('Death rate')\nplt.show()","af5a61bc":"corr, _ = pearsonr(np.log10(df['Population']), np.log10((df['Death Rate'])))\nprint(\"Pearson R (population against test rate):\", round(corr, 5))","09743460":"fig = plt.figure()\ngs = gridspec.GridSpec(3, 3)\nax_main = plt.subplot(gs[1:3, :2])\nax_xDist = plt.subplot(gs[0, :2],sharex=ax_main)\nax_yDist = plt.subplot(gs[1:3, 2],sharey=ax_main)\n    \nax_main.scatter(df[df['Infection Rate']<0.8]['Infection Rate'], df[df['Infection Rate']<0.8]['Death Rate'], s=5)\nax_main.set(xlabel=\"Infection rate\", ylabel=\"Death rate\")\n\nax_xDist.hist(df[df['Infection Rate']<0.8]['Infection Rate'], bins=20, align='mid')\nax_xDist.set(ylabel='Infection Rate')\n\nax_yDist.hist(df[df['Infection Rate']<0.8]['Death Rate'], bins=20,orientation='horizontal',align='mid')\nax_yDist.set(xlabel='Death Rate')\n\nplt.setp(ax_xDist.get_xticklabels(), visible=False)\nplt.setp(ax_yDist.get_yticklabels(), visible=False)\n\n\nplt.show()","813b7f72":"corr, _ = pearsonr(df[df['Infection Rate']<0.8]['Infection Rate'], df[df['Infection Rate']<0.8]['Death Rate'])\nprint(\"Pearson R (population against test rate):\", round(corr, 5))","c1980343":"# For geographic plotting\nurl = 'https:\/\/raw.githubusercontent.com\/python-visualization\/folium\/master\/examples\/data'\ncountry_shapes = f'{url}\/world-countries.json'\n\n# For geographic plotting\nglobal_polygons = gpd.read_file(country_shapes)\nglobal_polygons.to_file('global_polygons.geojson', driver = 'GeoJSON')\n\ndf_new = pd.merge(global_polygons, df, left_on='name',right_on='Country')\n","03cfbee4":"col = 'Infection Rate'\nminimum, maximum = df_new[col].min(), df_new[col].max()\nmean = df[col].mean()\n\ncolormap = branca.colormap.LinearColormap(\n    colors=[\"#f2f0f7\", \"#cbc9e2\", \"#9e9ac8\", \"#756bb1\", \"#54278f\"],\n    index=df_new[col].quantile([0.25, 0.5, 0.85, 0.95]),\n    vmin=minimum,\n    vmax=maximum,\n)\n\ncolormap.caption = col\n\nfrom folium.plugins import Search\nfrom folium.plugins import HeatMap\n\nm = folium.Map(location=(50,0),zoom_start=3)\n\ndef style_function(x):\n    return {\n        \"fillColor\": colormap(x[\"properties\"][col]),\n        \"color\": \"black\",\n        \"weight\": 2,\n        \"fillOpacity\": 0.5,\n    }\n\nMap_Layer = folium.GeoJson(\n    df_new,\n    name=col,\n    style_function=style_function,\n    tooltip=folium.GeoJsonTooltip(\n        fields=[\"Country\", \"Population\", \"Total Cases\",\"Total Deaths\",\"Total Tests\",\"Infection Rate\", \"Death Rate\"], aliases=[\"Country\", \"Population\", \"Total Cases\",\"Total Deaths\",\"Total Tests\",\"Infection Rate\", \"Death Rate\"], localize=True\n    ),\n).add_to(m)\n\nplugins.Search(Map_Layer,position='topleft',\n                           search_zoom=5,placeholder=\"Search for a country\",weight=3,\n                           search_label='Country',\n                           geom_type='Polygon').add_to(m)\n\n\nminimap = plugins.MiniMap()\nm.add_child(minimap)\n    \nfolium.LayerControl().add_to(m)\ncolormap.add_to(m)\n\nm","69842e09":"**What can we get?**\n\n*Infection rate against death rate:*\n\nThe **Pearson's correlation** of $0.062\\approx0$. No correlation is found between the infection rate and the death rate. It implies once a person gets covid, the death rate is similar among countries. It matches with the hypothesis of all countries do not know how to cure covid effectively.","a9dca53e":"**What can we get?**\n\n*Population against death rate:*\n\nThe **Pearson's correlation** of 0.293 shows that the $p$-value=$0.03<0.05$. The positive correlation is very weak. It indicates that there is no obvious evidence showing a higher population country would have a lower death rate. There are 2 explanations:\n1. Higher population does not imply a better medical service\n2. All countries do not have idea on how to cure covid effectively.","dca24d1a":"## Data Cleaning\nBefore performing EDA, we should check whether there are a","a933a7e3":"**What can we get?**\n\n*Population against test rate:*\n\nThe **Pearson's correlation** of -0.51 shows that the $p$-value=$1.3\\times10^{-4}$. It indicates that the population and the test rate have an obvious negative correlation in log-log scale. It indicates that countries with higher population typically have a lower test rate. Therefore, the true number of cases are under-estimated.","56f2f5da":"**Question 3:**\n\nMore cases, by chance, should result in more deaths. However, better medical service might also help. Does more cases always result in more deaths?","2d1c952f":"**Question 2:**\n\nFor the countries with high (low) total cases, do they fail (succeed) to prevent from covid or simply because of their high (low) test number\/rate? ","427b9826":"# Introduction\nThis dataset provides the latest information about the **COVID-19** situation in **54 African countries**. The dataframe consists of **10 columns** including (pulled from the content page for the sake of convenience):\n\n1. **Country** - Name of European countries\n2. **Total Cases** - Total number of Covid-19 cases\n3. **Total Deaths** - Total number of Deaths\n4. **Total Recovered** - Total number of recovered cases\n5. **Active Cases** - Total number of Active cases\n6. **Total Cases\/1 mil population** - Total Cases per 1 million of the population\n7. **Death\/1 mil population** - Total Deaths per 1 million of the population\n8. **Total Tests** - Total number of Covid tests done\n9. **Tests\/1 mil population** - Covid tests done per 1 million of the population\n10. **Population** - Population of the country\n\nWith this dataset, I attempt to answer the following questions by performing **EDA**.\n\n## Problem Identification:\n1. We expect that more population should have a higher infection rate, is it true?\n2. For the countries with high (low) total cases, do they fail (succeed) to prevent from covid or simply because of their high (low) test number\/rate? \n3. More cases, by chance, should result in more deaths. However, better medical service might also help. Does more cases always result in more deaths?\n4. People might be easier to travel between nearby countries. Countries located at the similar region might have a similar number of new cases. But is it true?","040f13d4":"**Question 1:**\n\nWe expect that more population should have a higher infection rate, is it true?","dd61375c":"**What can we get?**\n\nThe map shows that the inner countries tend to have a lower infection rate, especially for those closer to the europe. It might be due to the fact that more people can come across the islands.","d8931fd1":"We are lucky that only 2 countries have missing values. I will simply ignore those 2 countries if I need to use the missing columns in the analysis.","e5beb17f":"**What can we get?**\n\n*Population against total cases:*\n\nThe **Pearson's correlation** of 0.52 shows that the $p$-value=$4.6\\times10^{-5}$. It indicates that the population and the total cases have a strong positive correlation in log-log scale. We conclude that higher population could result in more cases. \n\n*Population against infection rate:*\n\nThe **Pearson's correlation** of -0.19 shows that the $p$-value=$0.18<0.05$. Therefore, the correlation is insignificant. It implies that higher population does not imply a higher infection rate. Also, we can see that there is 1 data point with infection rate > 1, which does not make sense. There is another country with a high infection rate of > 0.8, which is unlikely to be true too.\n\n(The $p$-value is obtained by: https:\/\/www.socscistatistics.com\/pvalues\/pearsondistribution.aspx)"}}