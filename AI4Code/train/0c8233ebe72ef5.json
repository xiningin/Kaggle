{"cell_type":{"06cd7a4f":"code","40b97511":"code","be72debd":"code","b3b16a4d":"code","2b8d4769":"code","4b31ad1d":"code","e8d72ddd":"code","3b8c3652":"code","ee85c878":"code","01c39636":"code","54375ad1":"code","f94de0c5":"code","4f742fc5":"code","a5e10d7d":"code","2a5f3f8a":"code","1e58ea63":"code","512f4718":"code","9e005e76":"code","a896f6ca":"code","29ba5ab2":"code","752af6c7":"markdown","9ff0bcf8":"markdown","f88c2132":"markdown","56c20f95":"markdown","c20cfc73":"markdown","a44c2540":"markdown","09458bb9":"markdown","c1aeb280":"markdown","fc373011":"markdown","3faa2a8c":"markdown","7dcb4fdd":"markdown","98498e27":"markdown","d7ed0bfd":"markdown","6256f199":"markdown","8101b8c6":"markdown","b3dd43d4":"markdown","debd793d":"markdown","73975698":"markdown","fea21f72":"markdown","8f3b9bb3":"markdown"},"source":{"06cd7a4f":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n# from mpl_toolkits.basemap import Basemap\nimport plotly.graph_objs as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\nimport cufflinks as cf\ncf.go_offline()\n%matplotlib inline\n\n# import data\nse = pd.read_csv('..\/input\/data-science-for-good\/2016 School Explorer.csv')\nshsat = pd.read_csv('..\/input\/data-science-for-good\/D5 SHSAT Registrations and Testers.csv')\nevict = pd.read_csv('..\/input\/2017-2018-evictions\/Evictions.csv')\nfinance = pd.read_csv('..\/input\/nyc-financial-empowerment-centers\/financial-empowerment-centers.csv')\nemerg = pd.read_csv('..\/input\/ny-emergency-response-incidents\/emergency-response-incidents.csv')\n\n# clean up school income estimate\nse['School Income Estimate'] = se['School Income Estimate'].astype(str).str.replace('$','')\nse['School Income Estimate'] = se['School Income Estimate'].astype(str).str.replace(',','')\nse['School Income Estimate'] = se['School Income Estimate'].astype(str).str.replace(' ','')\nse['School Income Estimate'] = se['School Income Estimate'].apply(lambda x: float(x))\n\n# dropping null values\nnullIncome = se[se['School Income Estimate'].isnull()]\ndf1 = se.drop(nullIncome.index)\nnullNeed = df1[df1['Economic Need Index'].isnull()]\ndf1 = df1.drop(nullNeed.index)\n\n# create borough series\ndf1['Borough'] = df1['City']\nfor i in df1[df1['City'] == 'NEW YORK'].index:\n    df1.at[i, 'Borough'] = 'MANHATTAN'\nfor i in df1[df1['City'] == 'ROOSEVELT ISLAND'].index:\n    df1.at[i, 'Borough'] = 'MANHATTAN'\nfor i in df1[df1['City'] == 'ELMHURST'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'WOODSIDE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'CORONA'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'MIDDLE VILLAGE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'MASPETH'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'RIDGEWOOD'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'GLENDALE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'LONG ISLAND CITY'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'FLUSHING'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'COLLEGE POINT'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'WHITESTONE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'BAYSIDE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'QUEENS VILLAGE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'LITTLE NECK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'DOUGLASTON'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'FLORAL PARK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'BELLEROSE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'JAMAICA'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'ARVERNE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'FAR ROCKAWAY'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'SOUTH OZONE PARK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'BROAD CHANNEL'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'RICHMOND HILL'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'WOODHAVEN'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'SOUTH RICHMOND HILL'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'OZONE PARK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'ROCKAWAY PARK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'HOWARD BEACH'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'ROCKAWAY BEACH'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'KEW GARDENS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'FOREST HILLS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'REGO PARK'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'SPRINGFIELD GARDENS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'HOLLIS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'SAINT ALBANS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'ROSEDALE'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'CAMBRIA HEIGHTS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'JACKSON HEIGHTS'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'ASTORIA'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\nfor i in df1[df1['City'] == 'EAST ELMHURST'].index:\n    df1.at[i, 'Borough'] = 'QUEENS'\n\n# convert percent to float\ndef toFloat(x):\n    fin = int(x.replace('%', ''))\n    return fin\ndf1['Percent Asian'] = df1['Percent Asian'].astype(str).apply(toFloat)\ndf1['Percent Black'] = df1['Percent Black'].astype(str).apply(toFloat)\ndf1['Percent Hispanic'] = df1['Percent Hispanic'].astype(str).apply(toFloat)\ndf1['Percent White'] = df1['Percent White'].astype(str).apply(toFloat)\ndf1['Percent ELL'] = df1['Percent ELL'].astype(str).apply(toFloat)\ndf1['Percent Black \/ Hispanic'] = df1['Percent Black \/ Hispanic'].astype(str).apply(toFloat)\n\n# df1[['Percent Asian', 'Percent Black', 'Percent Hispanic', 'Percent White']].head()\n# (nullIncome[nullIncome['School Income Estimate'].isnull()].shape[0] + nullNeed[nullNeed['Economic Need Index'].isnull()].shape[0])\/se.shape[0]\n\n# convert float\/int to string for labeling\ndf1['incomeString'] = df1['School Income Estimate'].apply(lambda x: str(x))\ndf1['econString'] = df1['Economic Need Index'].apply(lambda x: str(round(x,2)))\ndf1['blackString'] = df1['Percent Black'].apply(lambda x: str(x))\ndf1['hispanicString'] = df1['Percent Hispanic'].apply(lambda x: str(x))\ndf1['asianString'] = df1['Percent Asian'].apply(lambda x: str(x))\ndf1['whiteString'] = df1['Percent White'].apply(lambda x: str(x))\ndf1['ellString'] = df1['Percent ELL'].apply(lambda x: str(x))\ndf1['blackhispanicString'] = df1['Percent Black \/ Hispanic'].apply(lambda x: str(x))\ndf1['Percent White \/ Asian'] = df1['Percent Asian'] + df1['Percent White']\n\n# mean DF\ncityNumbers = pd.DataFrame()\ncityNumbers['Count'] = df1.groupby('Borough')['Percent Black'].count().sort_values(ascending=False)\ncityNumbers['ENI Mean'] = df1.groupby('Borough')['Economic Need Index'].mean()\ncityNumbers['percentBlackMean'] = df1.groupby('Borough')['Percent Black'].mean()\ncityNumbers['percentHispanicMean'] = df1.groupby('Borough')['Percent Hispanic'].mean()\n\n# cleaning up eviction df\nevict['EXECUTED_DATE'] = pd.to_datetime(evict['EXECUTED_DATE'])\nevict.drop(evict[evict['EXECUTED_DATE'] == evict['EXECUTED_DATE'].max()].index, inplace=True)\nevictRes = evict[evict['RESIDENTIAL_COMMERCIAL_IND'] == 'Residential']\nevicted = evictRes.groupby('BOROUGH')['COURT_INDEX_NUMBER'].count().values\n\n\n# financial empowerment centers\nfinProv = finance.groupby('Borough')['Provider'].count().values\n\n# def cleanUpERI():\n# nyc emergency response incidents\nemerg['Creation Date'] = pd.to_datetime(emerg['Creation Date'])\nemerg['Closed Date'] = pd.to_datetime(emerg['Closed Date'])\nemerg['Incident Category'] = emerg['Incident Type'].apply(lambda x: x.split('-')[0])\n# clean up borough names\nfor i in emerg[emerg['Borough'] == 'BRonx'].index:\n     emerg.at[i, 'Borough'] = 'bronx'\nfor i in emerg[emerg['Borough'] == 'BrONX'].index:\n     emerg.at[i, 'Borough'] = 'bronx'\nfor i in emerg[emerg['Borough'] == 'Bronx (NYCHA)'].index:\n     emerg.at[i, 'Borough'] = 'bronx'\nfor i in emerg[emerg['Borough'] == 'Bronx'].index:\n     emerg.at[i, 'Borough'] = 'bronx'\nfor i in emerg[emerg['Borough'] == 'Brooklyn (NYCHA-Brevoort)'].index:\n     emerg.at[i, 'Borough'] = 'brooklyn'\nfor i in emerg[emerg['Borough'] == 'Brooklyn'].index:\n     emerg.at[i, 'Borough'] = 'brooklyn'\nfor i in emerg[emerg['Borough'] == 'Essex'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Mamhattan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manahttan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manahttan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhatan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhattah'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'MANHATTAN'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhattan (Pier 92)'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhattan (Waldorf Astoria)'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhatten'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhhattan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'     \nfor i in emerg[emerg['Borough'] == 'Manhaatan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhattan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Manhttan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Mnahattan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Nassau'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'New York'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'new york'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'New York\/Manhattan'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'  \nfor i in emerg[emerg['Borough'] == 'New Yotk'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'NewYork'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'nyc'].index:\n     emerg.at[i, 'Borough'] = 'manhattan'\nfor i in emerg[emerg['Borough'] == 'Astoria'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'quenns'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'astoria'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Far Rockaway'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'QUEENS'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Jamaice'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Queens'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Flushing'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Hollis'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Jamaica'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'Long Island City'].index:\n     emerg.at[i, 'Borough'] = 'queens'\nfor i in emerg[emerg['Borough'] == 'staten Island'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nfor i in emerg[emerg['Borough'] == 'Richmond\/Staten Island'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nfor i in emerg[emerg['Borough'] == 'SI'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nfor i in emerg[emerg['Borough'] == 'Richmond\/Staten Island'].index:\n     emerg.at[i, 'Borough'] = 'Staten Island (Midland Beach Area)'\nfor i in emerg[emerg['Borough'] == 'Staten ISland'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nfor i in emerg[emerg['Borough'] == 'Staten Island'].index:\n     emerg.at[i, 'Borough'] = 'Staten Island (Midland Beach Area)'\nfor i in emerg[emerg['Borough'] == 'Staten Island (Midland Beach Area)'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nfor i in emerg[emerg['Borough'] == 'Staten island'].index:\n     emerg.at[i, 'Borough'] = 'staten island'\nemerg.drop(emerg[emerg['Borough'] == 'Bergen'].index, inplace=True)\nemerg.drop(emerg[emerg['Borough'] == 'Hoboken'].index, inplace=True)\nemerg.drop(emerg[emerg['Borough'] == 'Citywide'].index, inplace=True)\nfor i in emerg[emerg['Incident Category'] == 'LawEnforcement'].index:\n     emerg.at[i, 'Incident Category'] = 'Law Enforcement'\n\n","40b97511":"# import os\n# os.listdir('..\/input\/ny-emergency-response-incidents\/emergency-response-incidents.csv')","be72debd":"# Looking at the data, there are null values for School Income Estimate and the Economic Need Index which account for 32.63% of the data which leaves us with 857 useable records","b3b16a4d":"data = [\n    {\n        'x': df1['Longitude'],\n        'y': df1['Latitude'],\n        'mode': 'markers',\n        'text': df1['School Name'] + ', ' + df1['Borough'],\n        'marker': {\n            'size': df1['School Income Estimate']\/4500,\n            'color': df1['Economic Need Index'],\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': 'ENI',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= 'New York School Income with Economic Need',\n    xaxis= {\n        'title' : 'Longitude'\n    },\n    yaxis={\n        'title': 'Latitude'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","2b8d4769":"# Lowest school income\ndf1.loc[df1['School Income Estimate'].idxmin()]\n# highest economic need\ndf1.loc[df1['Economic Need Index'].idxmax()]","4b31ad1d":"data = [\n    {\n        'x': df1['Percent White \/ Asian'],\n        'y': df1['Economic Need Index'],\n        'mode': 'markers',\n        'text': df1['blackhispanicString'] + '% Black\/Hispanic, ' + df1['ellString'] + '% ELL',\n        'marker': {\n            'color': df1['School Income Estimate'],\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': 'School Income',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= 'Percentage of White\/Asian Students Vs Economic Need Index',\n    xaxis= {\n        'title' : 'Percentage of White\/Asian Students'\n    },\n    yaxis={\n        'title': 'Economic Need Index'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","e8d72ddd":"data = [\n    {\n        'x': df1['Percent Black \/ Hispanic'],\n        'y': df1['Economic Need Index'],\n        'mode': 'markers',\n        'text': df1['blackhispanicString'] + '% Black\/Hispanic, ' + df1['ellString'] + '% ELL',\n        'marker': {\n            'color': df1['School Income Estimate'],\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': 'School Income',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= 'Percentage of Black\/Hispanic Students Vs Economic Need Index',\n    xaxis= {\n        'title' : 'Percentage of Black\/Hispanic Students'\n    },\n    yaxis={\n        'title': 'Economic Need Index'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","3b8c3652":"\n\ndata = [\n    {\n        'x': df1['Longitude'],\n        'y': df1['Latitude'],\n        'mode': 'markers',\n        'text': df1['Borough'] + ', Economic Need: ' + df1['econString'] + ', Percent Black: ' + df1['blackString'],\n        'marker': {\n            'color': df1['Economic Need Index'],\n            'size': df1['Percent Black']\/3,\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': 'Economic Need',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= '% Black and Economic Need',\n    xaxis= {\n        'title' : 'Longitude'\n    },\n    yaxis={\n        'title': 'Latitude'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","ee85c878":"data = [\n    {\n        'x': df1['Longitude'],\n        'y': df1['Latitude'],\n        'mode': 'markers',\n        'text': df1['Borough'] + ', Economic Need: ' + df1['econString'] + ', Percent Hispanic: ' + df1['hispanicString'],\n        'marker': {\n            'color': df1['Economic Need Index'],\n            'size': df1['Percent Hispanic']\/3,\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': 'Economic Need',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= '% Hispanic and Economic Need',\n    xaxis= {\n        'title' : 'Longitude'\n    },\n    yaxis={\n        'title': 'Latitude'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","01c39636":"\ntrace1 = go.Bar(\n    x= ['Brookyln', 'Queens', 'Bronx','Manhattan', 'Staten Island'],\n    y= [cityNumbers['ENI Mean'][0]*100, cityNumbers['ENI Mean'][1]*100, cityNumbers['ENI Mean'][2]*100, cityNumbers['ENI Mean'][3]*100, cityNumbers['ENI Mean'][4]*100],\n    name = '% ENI Mean')\n\ntrace2 = go.Bar(\n    x= ['Brookyln', 'Queens', 'Bronx','Manhattan', 'Staten Island'],\n    y= [cityNumbers['percentBlackMean'][0], cityNumbers['percentBlackMean'][1], cityNumbers['percentBlackMean'][2], cityNumbers['percentBlackMean'][3], cityNumbers['percentBlackMean'][4]],\n    name = '% Black Mean')\n\ntrace3 = go.Bar(\n    x= ['Brookyln', 'Queens', 'Bronx','Manhattan', 'Staten Island'],\n    y= [cityNumbers['percentHispanicMean'][0], cityNumbers['percentHispanicMean'][1], cityNumbers['percentHispanicMean'][2], cityNumbers['percentHispanicMean'][3], cityNumbers['percentHispanicMean'][4]],\n    name = '% Hispanic Mean')\n\n\n\ndata = [trace1,trace2,trace3]\n\nlayout = go.Layout(\n    barmode='group',\n    title= 'Mean of ENI, Black Students, Hispanic Students by Borough',\n    xaxis= {'title': 'Areas'},\n    yaxis= {'title': 'Percent'}\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","54375ad1":"\ntrace1 = go.Bar(\n    x= ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens'],\n    y= [evicted[0], evicted[1], evicted[2], evicted[4], evicted[3]],\n    name = '% ENI Mean')\n\ndata = [trace1]\n\nlayout = go.Layout(\n    title= 'Number of Residential Evictions by Borough 1\/2017- 7\/2018',\n    xaxis= {'title': 'Boroughs'},\n    yaxis= {'title': 'Number of Evictions'}\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","f94de0c5":"bor = ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens']\nnycPop = ['1,471,160', '2,648,771', '1,664,727', '479,458', '2,358,582']\n\npd.DataFrame(index=bor, data={'Population':nycPop})","4f742fc5":"trace1 = go.Bar(\n    x= ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens'],\n    y= [1471160\/evicted[0], 2648771\/evicted[1], 1664727\/evicted[2], 479458\/evicted[4], 2358582\/evicted[3]],\n    text= ['Population: 1,471,160', 'Population: 2,648,771', 'Population: 1,664,727', 'Population: 479,458', 'Population: 2,358,582', ],\n    name = '% ENI Mean')\n\ndata = [trace1]\n\nlayout = go.Layout(\n    title= 'Number of People per Residential Eviction by Borough 1\/2017- 7\/2018',\n    xaxis= {'title': 'Boroughs'},\n    yaxis= {'title': 'Number of People per Eviction'}\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","a5e10d7d":"finance.groupby('Borough')['Provider'].count()","2a5f3f8a":"trace1 = go.Bar(\n    x= ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens'],\n    y= [42.47\/finProv[0], 69.5\/finProv[1], 22.82\/finProv[2], 58.69\/finProv[4], 108.1\/finProv[3]],\n    textposition = 'auto',\n    name = 'mi^2 per Center')\n\ntrace2 = go.Bar(\n    x= ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens'],\n    y= [147.1160\/finProv[0], 264.8771\/finProv[1], 166.4727\/finProv[2], 47.9458\/finProv[4], 235.8582\/finProv[3]],\n    textposition = 'auto',\n    name = 'people(10k)\/Center')\n\ntrace3 = go.Bar(\n    x= ['Bronx','Brookyln','Manhattan', 'Staten Island', 'Queens'],\n    y= [cityNumbers['ENI Mean'][2]*100, cityNumbers['ENI Mean'][0]*100, cityNumbers['ENI Mean'][3]*100, cityNumbers['ENI Mean'][4]*100, cityNumbers['ENI Mean'][1]*100],\n    textposition = 'auto',\n    name = 'Avg ENI')\n\ndata = [trace1,trace2,trace3]\n\nlayout = go.Layout(\n    barmode= 'group',\n    title= 'Financial Empowerment Centers',\n    xaxis= {'title': 'Boroughs'}\n    # ,yaxis= {'title': 'Number of People per Eviction'}\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","1e58ea63":"\nbor = emerg.groupby(['Incident Category','Borough']).count().index.levels[1].tolist()\nmlGroup = emerg.groupby(['Incident Category','Borough']).count()['Incident Type']\ninCatList = emerg.groupby(['Incident Category','Borough']).count().index.levels[0].tolist()\n\ntrace0 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[0]][0], mlGroup.loc[inCatList[0]][1],mlGroup.loc[inCatList[0]][2], mlGroup.loc[inCatList[0]][3]],\n    name = inCatList[0])\ntrace1 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[1]][0], mlGroup.loc[inCatList[1]][1]],\n    name = inCatList[1])\ntrace2 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[2]][0], mlGroup.loc[inCatList[2]][1],mlGroup.loc[inCatList[2]][2], mlGroup.loc[inCatList[2]][3], mlGroup.loc[inCatList[2]][4]],\n    name = inCatList[2])\ntrace3 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[3]][0], mlGroup.loc[inCatList[3]][1],mlGroup.loc[inCatList[3]][2], mlGroup.loc[inCatList[3]][3], mlGroup.loc[inCatList[3]][4]],\n    name = inCatList[3])\ntrace4 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[4]][0], mlGroup.loc[inCatList[4]][1],mlGroup.loc[inCatList[4]][2], mlGroup.loc[inCatList[4]][3], mlGroup.loc[inCatList[4]][4]],\n    name = inCatList[4])\ntrace5 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[5]][0], mlGroup.loc[inCatList[5]][1],mlGroup.loc[inCatList[5]][2], mlGroup.loc[inCatList[5]][3], mlGroup.loc[inCatList[5]][4]],\n    name = inCatList[5])\ntrace6 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[6]][0], mlGroup.loc[inCatList[6]][1],mlGroup.loc[inCatList[6]][2], mlGroup.loc[inCatList[6]][3],mlGroup.loc[inCatList[6]][4]],\n    name = inCatList[6])\ntrace7 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[7]][0], mlGroup.loc[inCatList[7]][1],mlGroup.loc[inCatList[7]][2], mlGroup.loc[inCatList[7]][3], mlGroup.loc[inCatList[7]][4]],\n    name = inCatList[7])\ntrace8 = go.Bar(\n    x= [bor[4]],\n    y= [mlGroup.loc[inCatList[8]][0]],\n    name = inCatList[8])\ntrace9 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[9]][0], mlGroup.loc[inCatList[9]][1],mlGroup.loc[inCatList[9]][2], mlGroup.loc[inCatList[9]][3], mlGroup.loc[inCatList[9]][4]],\n    name = inCatList[9])\ntrace10 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[10]][0], mlGroup.loc[inCatList[10]][1],mlGroup.loc[inCatList[10]][2], mlGroup.loc[inCatList[10]][3], mlGroup.loc[inCatList[10]][4]],\n    name = inCatList[10])\ntrace11 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[11]][0], mlGroup.loc[inCatList[11]][1],mlGroup.loc[inCatList[11]][2], mlGroup.loc[inCatList[11]][3], mlGroup.loc[inCatList[11]][4]],\n    name = inCatList[11])\ntrace12 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[12]][0], mlGroup.loc[inCatList[12]][1],mlGroup.loc[inCatList[12]][2], mlGroup.loc[inCatList[12]][3], mlGroup.loc[inCatList[12]][4]],\n    name = inCatList[12])\ntrace13 = go.Bar(\n    x= [bor[0],bor[1],bor[2],bor[3],bor[4]],\n    y= [mlGroup.loc[inCatList[13]][0], mlGroup.loc[inCatList[13]][1],mlGroup.loc[inCatList[13]][2], mlGroup.loc[inCatList[13]][3], mlGroup.loc[inCatList[13]][4]],\n    name = inCatList[13])\n\ndata = [trace0,trace1,trace2,trace3,trace4,trace5,trace6,trace7,trace8,trace9,trace10,trace11,trace12,trace13]\n\nlayout = go.Layout(\n    barmode='stack',\n    title= 'Emergency Response Incident Types by Borough',\n    xaxis= {'title': 'Borough'},\n    yaxis= {'title': 'Number of Incidents'}\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","512f4718":"data = [\n    {\n        'x': df1['Percent Black \/ Hispanic'],\n        'y': df1['Percent ELL'],\n        'mode': 'markers',\n        'text': df1['blackhispanicString'] + '% Black\/Hispanic, ' + df1['ellString'] + '% ELL',\n        'marker': {\n            'colorscale': 'Portland'\n            }\n        }\n]\n\nlayout= go.Layout(\n    title= 'Percentage of Black\/Hispanic Students Vs Percentage of ELL students',\n    xaxis= {\n        'title' : 'Percentage of Black\/Hispanic Students'\n    },\n    yaxis={\n        'title': 'Percentage of ELL students'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","9e005e76":"print('Number of schools with over 80% Black\/Hispanic\\n\\tStudents and have ELL students: ' + str(df1[(df1['Percent Black \/ Hispanic'] > 80) & (df1['Percent ELL'] >= 20)].shape[0]))\nprint('Total number of schools: ' + str(df1.shape[0]))\nprint('Percentage of schools with over 80% Black\/Hispanic\\n\\tStudents and have ELL students: ' + str(round((df1[(df1['Percent Black \/ Hispanic'] > 80) & (df1['Percent ELL'] >= 20)].shape[0]\/df1.shape[0])*100, 2)) + '%')","a896f6ca":"ellBH = df1.copy()\nellBH.drop(ellBH[(ellBH['Percent Black \/ Hispanic'] < 80) | (ellBH['Percent ELL'] < 20)].index, inplace=True)\n\ndata = [\n    {\n        'x': ellBH['Longitude'],\n        'y': ellBH['Latitude'],\n        'mode': 'markers',\n        'text': ellBH['Borough'] + ', ' + ellBH['ellString'] + '% ELL' + ', ' + ellBH['blackhispanicString'] + '% Black\/Hispanic',\n        'marker': {\n            'size': ellBH['Percent Black \/ Hispanic']\/4,\n            'color': ellBH['Percent ELL'],\n            'showscale': True,\n            'colorscale': 'Portland',\n            'colorbar': {\n                'title': '% ELL',\n                'ticks': 'outside'\n            }\n        }\n    }\n]\n\nlayout= go.Layout(\n    title= 'Schools with >80% Black\/Hispanic Students Vs Percentage of ELL students',\n    xaxis= {\n        'title' : 'Longitude'\n    },\n    yaxis={\n        'title': 'Latitude'\n    }\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","29ba5ab2":"df1[(df1['Percent Black \/ Hispanic'] > 80) & (df1['Percent ELL'] > 30) & (df1['Borough'] == 'BRONX')][['Borough','School Name', 'Economic Need Index', 'Percent ELL', 'Percent Black', 'Percent Hispanic']].sort_values('Economic Need Index', ascending=False)","752af6c7":"<h1>Introduction<\/h1>\n**The problem**<br>\nNew York City's Specialized High Schools (SHS) have seen a shift toward more homogeneous student body demographics in recent years. In 2018, 4.1% of Black students and 6.3% Hispanic students who took the Specialized High Schools Admissions Test(SHSAT) received an offer. 29.7% of offers were sent out to Asian students and 26.2% to White students who took the SHSAT. ([Christina Veiga, 2018](http:\/\/https:\/\/www.chalkbeat.org\/posts\/ny\/2018\/03\/07\/few-black-and-hispanic-students-receive-admissions-offers-to-new-york-citys-top-high-schools-again\/))\n\n**PASSNYC's Goal**<br>\nTo increase diversity in specialized high schools by focusing efforts to increase the socioeconomic diversity of students taking the SHSAT by quantifying the potential for outreach at a given school. \n\n**How will we reach this goal?**<br>\nIdentify factors that may affect the low SHSAT registration numbers from the Hispanic and Black student population in New York City's school districts.\n\n**What does the Economic Need Index mean?**<br>\nAccording to the [Equity and Excellence for All: Diversity in New York City Public Schools](http:\/\/https:\/\/cdn-blob-prd.azureedge.net\/prd-pws\/docs\/default-source\/default-document-library\/diversity-in-new-york-city-public-schools-english.pdf?sfvrsn=72d7c704_67) brochure from The New York City Department of Education, <br>\n>\"A school\u2019s Economic Need is defined by its Economic Need Index (ENI), which determines the likelihood that students at the school are in poverty.\"\n\nThe higher the ENI (100% or 1.0) the higher the likelyhood the student is in poverty<br>\n\n>\"The ENI is calculated as follows:<br>\n* If the student is HRA-eligible or living in temporary housing, the student\u2019s Economic Need Value is 1.0.<br>\n* For high school students, if the student has a home language other than English and entered the NYC DOE for the first time within the last four years, the student\u2019s ENI value is 1.0.<br>\n* Otherwise, the student\u2019s Economic Need Value Is based on the percentage of families (with school-age children) in the tudent\u2019s census tract whose income is below the poverty level, as estimated by the American Community Survey 5-Year Estimate.\"<br>\n\n> \"The school\u2019s Economic Need Index is the average of its students\u2019 Economic Need Values.\"\n\n<br>**How is the estimated school income determined?**<br>\nSince 2007, NYC has adopted a new way to allocate money for their public schools through the Fair Student Funding formula. According to the [Fair Student Funding & School Budget Resource Guide FY 2018](http:\/\/https:\/\/www.scribd.com\/document\/383737013\/Fair-Student-Funding-School-Budget-Resource-Guide-FY-2018), <br>\n> \"the Fair Student Funding (FSF) formula allocates dollars to schools through five basic categories:<br>\n> 1. Foundation\u2014a fixed sum of &#36;225,000 for all schools<br>\n> 2. Grade weights, based on student grade levels<br>\n> 3. Needs weights, based on student needs<br>\n> 4. Enhanced weights for students in \u201cportfolio\u201d high schools<br>\n> 5. Collective Bargaining related increases for staff funded with FSF\"\n\n","9ff0bcf8":"<h1>Wrapping Things Up<\/h1>\nSo far, these datasets have told us a couple of things:\n* Brooklyn and the Bronx have low school incomes and high economic need\n* Brooklyn has a large population of Black students\n* The Bronx has a large population of Hispanic students\n* Eviction rates from 1\/2017- 7\/2018 is the highest in the Bronx\n* Frequency of Financial Empowerment Centers do not have a correlation with economic need\n* Frequency and types of Emergency Reponse Incidents do not have a correlation with economic need\n* There is no correlation between % of ELL students and % of Black\/Hispanic students in schools\n* There is however a trend for schools with over 80% Black\/Hispanic student population and over 20% ELL student population residing in the Bronx and Upper Manhattan","f88c2132":"From the above graph, ** Brooklyn and the Bronx** contain the primary clusters of schools with the highest economic need and lowest school income which informs that that these areas are very likley in the most need of help. <br>\n* The school with the **lowest school income** is P.S. 150 Christopher in Brooklyn with an *income of &#36;16,901* and an **<span style=\"color:red\">economic need index of 0.948<\/span>** <br>\n* The school with the **highest economic need index** is P.S. 065 Mother Hale Academy in the Bronx with an *income of &#36;22,507* and an **<span style=\"color:red\">economic need index of 0.957<\/span>**","56c20f95":"<h2>NYC Emergency Response Incidents<\/h2>\nFrom the [NY Emergency Response Incidents dataset](https:\/\/www.kaggle.com\/new-york-city\/ny-emergency-response-incidents) which contains incidents from 5\/2011- 6\/2018, I wanted to determine if Brooklyn or the Bronx had a high number of incidents which may tell us if emergency situations may be disadvantaging students in these boroughs more than other boroughs. ","c20cfc73":"From the above graph, we can see that the Bronx has the second lowest amount of total incidents. This tells us that the number of incidents do not appear to be one of the contributing factors to SHSAT registration for Brooklyn and the Bronx.","a44c2540":"<h2>The 5 Buroughs of New York City<\/h2>\nThough I have been to New York City before (only once, but plan on more in the future), I am unfamiliar with the geographical locations and borders of the Boroughs<br>\n![Boroughs of NYC](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/3\/34\/5_Boroughs_Labels_New_York_City_Map.svg)\n![Legend](https:\/\/i.imgur.com\/kscGbYA.png)\nSource: https:\/\/commons.wikimedia.org\/wiki\/File:5_Boroughs_Labels_New_York_City_Map.svg","09458bb9":"<h1>Exploring Possible Factors<\/h1>\nIn order to narrow things down, we'll be taking a look at factors that Black and Hispanic students in Brooklyn and the Bronx may be facing or are affected by to a greater degree than their peers who take the SHSAT.\n\n<h2>Evictions<\/h2>\nEvictions dataset grabbed from [NYC OpenData website](http:\/\/https:\/\/data.cityofnewyork.us\/City-Government\/Evictions\/6z8x-wfk4) which looks at dates from 1\/3\/2017- 7\/11\/2018","c1aeb280":"From the [Current Estimates of New York City's Population for July 2017](https:\/\/www1.nyc.gov\/site\/planning\/data-maps\/nyc-population\/current-future-populations.page), I was able to get the estimated population of each burough. By including population, the 'Number of Residential Evictions per Person by Borough 1\/2017- 7\/2018' graph shows that for **every 129 people in the Bronx, there is an eviction**. Significantly higher than the next highest borough, Brooklyn which has an eviction for every 291 people","fc373011":"Taking a little deeper dive, I have broken things down to focus on areas listed within the 'City' column in the School Explorer that have 30 or more schools which left me with the Bronx, Brooklyn, New York (basically Manhattan), and Staten Island. From there I have taken the mean of the ENI (increased by a factor of 100), mean of the percent of Black students, and mean of the percent of Hispanic students for each of these areas. <br>\n\nThe area with the highest mean of percent of Hispanic students per school is the Bronx with 62% which also has the highest mean ENI at 0.82.<br>\nThe area with the highest mean of percent of Black students per school is Brooklyn with 43% with the second highest mean ENI at 0.71.\n<br><br>\nIt is obvious to us that our areas of focus for these underrepresented students in SHSAT registration reside in Brooklyn and the Bronx. However, these are very large areas with a lot of schools and it would be difficult to help everyone at once with current resources at hand. It would best to first narrow things down.","3faa2a8c":"<h1>Conclusion<\/h1>\nAccording to [Spectrum New NY1](http:\/\/www.ny1.com\/nyc\/all-boroughs\/politics\/2018\/06\/03\/bill-de-blasio-announces-push-to-scrap-specialized-high-school-admissions-test.html), New York City, Mayor Bill de Blasio \"announced plans aimed to change the admissions policies at the city's specialized high schools\" on 6\/3\/2018. While this may scrap PASSNYC's goal of increasing diversity in SHSAT registration, it will not resolve underlying issues that came up in the first place. By targeting the following groups, SHS may very well see an increase in diversity after all.<br>As a starting point, families of students in these schools in the Bronx can benefit from programs supporting ELL as well as rent or housing assistance:","7dcb4fdd":"<h2>English-Language Learners (ELL)<\/h2>\nHaving to learn a second-language as well as keep up with studies in this second-language is quite a difficult feat. We'll be looking at the School Explorer again to see if there is a correlation of high ELL in Brooklyn and the Bronx.","98498e27":"The Bronx immediately grabs my attention there are schools with over 80% Black\/Hispanic students and over 20% ELL students in a cluster together bleeding into parts of Upper Manhattan.","d7ed0bfd":"<h2>Financial Empowerment Centers<\/h2>\nDataset of [Financial Empowerment Centers (FEC)](http:\/\/https:\/\/www.kaggle.com\/new-york-city\/nyc-financial-empowerment-centers) from the Department of Consumer Affairs, Office of Financial Empowerment. FECs help residents address their financial challenges, needs, and plan for their future by offering one on one financial counseling as a free public service.","6256f199":"In the graph above, it shows a couple things:\n* Blue: The square mile for every 1 FEC\n* Orange: The number of people (in 10 thousands) for every 1 FEC\n* Green: The average ENI (based on the School Explorer dataset. Queens was not explicitly listed so it is missing)\n\nThe mean ENI within Brooklyn and the Bronx do not appear to be greatly affected by the frequency of FEC. There are significantly less FEC in Staten Island compared to Brooklyn and the Bronx but the ENI of Staten Island schools are still much lower.<br><br>\nWhen focusing only on Brooklyn and the Bronx, the number of FEC per sq mi is almost the same and there are 73,671 more people per FEC in Brooklyn than the Bronx. Although there are more people per FEC, the ENI of Brooklyn schools is 0.11 lower than those in the Bronx.<br><br>\nWhile I do believe financial education and guidance is important, I do not find a correlation between offering free financial counseling and a school's ENI in New York City.","8101b8c6":"In the 2 graphs above, we do see a correlation between percentage of race and ENI.\n\nIn the Percentage of White\/Asian Students Vs Economic Need Index graph, we can see that as the percentage of White\/Asian students in NYC schools increase, 2 things happen: the ENI decreases and school income increase.<br>\n\nHowever, in the Percentage of Black\/Hispanic Students Vs Economic Need Index graph, we see the the opposite with ENI increasing and school income decreasing as the percentage of Black\/Hispanic students increases.\n\nNext, we'll take a look at the demographics Black and Hispanic students within Brooklyn and the Bronx.","b3dd43d4":"At a glance, we can see that\n* schools in Brooklyn and Queens have the highest precentage of Black students \n* schools in the Bronx have the highest percentage of Hispanic students\n\nAs seen earlier in our first graph, these areas of high percentage of Black and Hispanic students fall consistent with schools that have high economic need.","debd793d":"<h1>Relationship Between ENI and School Income<\/h1>\nTo get a feel for the climate of NYC schools, taking a look at the school income and the ENI are 2 good indicators to start with.\n* Each school is plotted based on its Longitude and Latitude.<br>\n* Schools with **higher average economic need**  will be **<span style=\"color:red\">more red<\/span>**.<br>\n* Schools with **lower estimated income** will be *smaller*","73975698":"When plotting percentage of Black\/Hispanic students and percent of ELL students against each other, we can see that there is no apparent correlation. However, we can see that 13% of NYC schools have over 80% Black\/Hispanic students and over 20% English-language learners.<br><br>\nIt would be great to see where these schools lie geographically","fea21f72":"Here we can see that the number of evictions are highest in the Bronx (11,371 evictions) and Brooklyn (9,077 evictions). While it's nice to see the totals, we can gain a little more insight by including the estiamated population and calculating people per residential evictions by burough.","8f3b9bb3":"<h1>Black and Hispanic Student Breakdown in NYC<\/h1>\n<h2>Relationship Between Ethnicity and ENI<\/h2>\nIn the next 2 graphs, we will be taking a look at the breakdown percentage for Black and Hispanic students compared to the ENI of each school. \n* The higher the ENI, the **<span style=\"color:red\">more red<\/span>** the plot will be\n* The higher the percentage of the racial background in the school, the **<span style=\"font-size:18px\">bigger<\/span>** the size of the plot will be."}}