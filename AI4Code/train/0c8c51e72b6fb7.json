{"cell_type":{"335b5179":"code","a7fc0d1b":"code","6e0fc731":"code","76f5359d":"code","ab207262":"code","433ba72b":"code","d1ed3e39":"markdown","7133833f":"markdown"},"source":{"335b5179":"# import package with helper functions \nimport bq_helper\n\n# create a helper object for this dataset\naccidents = bq_helper.BigQueryHelper(active_project=\"bigquery-public-data\",\n                                   dataset_name=\"nhtsa_traffic_fatalities\")","a7fc0d1b":"# query to find out the number of accidents\nquery = \"\"\"SELECT COUNT(consecutive_number), \n                  EXTRACT(MONTH from timestamp_of_crash) AS MONTH,\n                  EXTRACT(DAY from timestamp_of_crash) AS DAY,\n                  EXTRACT(DAYOFWEEK from timestamp_of_crash) AS WEEKDAY\n            FROM `bigquery-public-data.nhtsa_traffic_fatalities.accident_2015`\n            GROUP BY MONTH, DAY, WEEKDAY\n            ORDER BY COUNT(consecutive_number) DESC\n                \n        \"\"\"","6e0fc731":"# the query_to_pandas_safe method will cancel the query if\n# it would use too much of your quota, with the limit set \n# to 1 GB by default\naccidents_by_day = accidents.query_to_pandas_safe(query)\naccidents_by_day.head()","76f5359d":"# library for plotting\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\n\n# plot by # of accidents each day of the week\nplt.bar(accidents_by_day.WEEKDAY, accidents_by_day.f0_)\nplt.title(\"Number of Accidents by Weekday\")","ab207262":"# in 2015, daylight sacings started on Sunday, March 8 & ended on Sunday, November 1\n# here we get the following mondays\naccidents_by_day[(accidents_by_day[\"MONTH\"] == 3) & \n                 (accidents_by_day[\"DAY\"] == 9)].\\\n    append(accidents_by_day[(accidents_by_day[\"MONTH\"] == 11) &\n                           (accidents_by_day[\"DAY\"] == 2)])","433ba72b":"# now get all mondays (since day of week is important to #\n# of crashes, as we can see above)\nall_mondays = accidents_by_day[accidents_by_day[\"WEEKDAY\"] == 2]\n\n# get the # of accidents for middle 50% of mondays\nall_mondays.quantile([.25, .75])","d1ed3e39":"The older I get the more the time change into & out of daylight savings time messes with me. I was curious if there were more accidents on the mondays following the two time shifts.","7133833f":"So based on this very small analysis, both Mondays following a time shift for daylight savings time had a pretty hight number of accidents; they were more dangerous than > 75% of all mondays. It's not a big sample so we can't capture the varience well, but it patterns with the findings from [this study](https:\/\/www.ncbi.nlm.nih.gov\/pubmed\/11152980) done in 2001. "}}