{"cell_type":{"051a764b":"code","50fb3760":"code","ff6836a0":"code","a8c1d147":"code","7f0f8b29":"code","de3984b3":"code","92492419":"code","6aafc75c":"code","d7bdf375":"code","c89219b5":"code","2f017c39":"code","33e9a64f":"code","5c8b734e":"code","47629d7d":"code","bfbedf7e":"code","1d1b9fea":"code","160c3ba7":"code","3bfd85c3":"code","05137ccf":"code","62a25277":"code","78bcb73e":"code","6784ec6f":"code","53d2e3fd":"code","6dc59234":"code","838f68c9":"code","f7e77608":"code","5e4fce33":"code","7f315665":"code","8dc112eb":"code","6eb7f2b0":"code","b205e186":"code","10259a17":"code","5d2388d5":"code","3bfa1045":"code","a19b93e6":"code","d53d7ead":"code","b516247f":"code","4b9de6aa":"code","08b27a02":"code","505d8ecf":"markdown","41325edb":"markdown","00628424":"markdown","c685291e":"markdown","ad499c95":"markdown","eaabc0ec":"markdown","657959e6":"markdown","0cbf7dea":"markdown","c9ecdc42":"markdown","7ed73242":"markdown","f6b3b9de":"markdown","5e5c901f":"markdown","9b500fc3":"markdown","bb11d8d8":"markdown","b032c2a1":"markdown","79e9ef7d":"markdown","b1a3ef3d":"markdown","2e336309":"markdown","8a4bf956":"markdown","3acabe9d":"markdown","00b16067":"markdown","d898878f":"markdown","f189d9ab":"markdown","7ced1cbc":"markdown","aa274330":"markdown","09354efc":"markdown","78de5031":"markdown","adc47d4e":"markdown","c0ca25bd":"markdown","075afa94":"markdown","f37a2e7e":"markdown","afbdef71":"markdown","6ab87b19":"markdown","d48b1940":"markdown","21551346":"markdown","29a8467b":"markdown","47543aa7":"markdown","fdc2d267":"markdown","5ffa42a2":"markdown","65da896c":"markdown"},"source":{"051a764b":"#this is to access data set stored in google drive to use it uncomment the following lines\n#!pip install pydrive\n#from google.colab import auth\n#auth.authenticate_user()\n\n#from pydrive.drive import GoogleDrive\n#from pydrive.auth import GoogleAuth\n#from oauth2client.client import GoogleCredentials\n#gauth = GoogleAuth()\n#gauth.credentials = GoogleCredentials.get_application_default()\n#drive = GoogleDrive(gauth)\n\n#myfile = drive.CreateFile({'id': 'your_train_dataset_id'})\n#myfile2 = drive.CreateFile({'id': 'your_test_dataset_id'})\n#myfile.GetContentFile('train.csv')\n#myfile2.GetContentFile('test.csv')\n","50fb3760":"# data analysis library\nimport numpy as np\nimport pandas as pd\n\n# Visuvalization library\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n#ignore warnings\nimport warnings \nwarnings.filterwarnings('ignore')\n","ff6836a0":"# import train and test CSV files\ntrain = pd.read_csv('..\/input\/train.csv')\ntest = pd.read_csv('..\/input\/test.csv')\n\n#see the first 3 rows of train\ntrain.head(3)","a8c1d147":"#Look into the training data\ntrain.describe(include='all')","7f0f8b29":"# get a list of features\nprint(train.columns)","de3984b3":"#see a sample of the dataset to get an idea of variables\ntrain.sample(5)","92492419":"# See a summary of traning data\ntrain.describe(include = 'all')","6aafc75c":"# checking of NaN values\nprint(pd.isnull(train).sum())","d7bdf375":"#draw a bar plot of survival by sex\nsns.barplot(x= 'Sex',y='Survived',data=train)\n\n#print % of female vs. male that survived\nprint('Percentage of female who survived:',train['Survived'][train['Sex'] == 'female'].value_counts(normalize = True)[1]*100)\n\nprint('Percentage of male who survived:',train['Survived'][train['Sex'] == 'male'].value_counts(normalize = True)[1]*100)","c89219b5":"#draw a bar plot of survival by Pclass\nsns.barplot(x='Pclass', y='Survived',data=train)\n\n# Percentage of people that survived by Pclass\n#class 1 = Upper\nprint('petcentage of Pclass=1 who survived:', train['Survived'][train['Pclass'] == 1].value_counts(normalize=True)[1]*100)\n\n#class 2 = Middle\nprint('petcentage of Pclass=2 who survived:', train['Survived'][train['Pclass'] == 2].value_counts(normalize=True)[1]*100)\n\n#class 3 = Lower\nprint('petcentage of Pclass=3 who survived:', train['Survived'][train['Pclass'] == 3].value_counts(normalize=True)[1]*100)","2f017c39":"#draw a bar plot for SibSp vs. Survival\nsns.barplot(x='SibSp',y='Survived',data=train)\n\n# The percentage of people survived\nprint(\"Percentage of SibSp = 0 who suvived:\",train['Survived'][train['SibSp']==0].value_counts(normalize=True)[1]*100)\n\nprint(\"Percentage of SibSp = 1 who suvived:\",train['Survived'][train['SibSp']==1].value_counts(normalize=True)[1]*100)\n\nprint(\"Percentage of SibSp = 2 who suvived:\",train['Survived'][train['SibSp']==2].value_counts(normalize=True)[1]*100)\n\nprint(\"Percentage of SibSp = 3 who suvived:\",train['Survived'][train['SibSp']==3].value_counts(normalize=True)[1]*100)\n\nprint(\"Percentage of SibSp = 4 who suvived:\",train['Survived'][train['SibSp']==4].value_counts(normalize=True)[1]*100)","33e9a64f":"#draw a bar plot for parch vs.survival\nsns.barplot(x='Parch',y='Survived',data=train)","5c8b734e":"#sort the ages into logical categories\n#train[\"Age\"] = train[\"Age\"].fillna(-0.5)\n#test[\"Age\"] = test[\"Age\"].fillna(-0.5)\nbins = [-1, 0, 5, 12, 18, 24, 35, 60, np.inf]\nlabels = ['Unknown', 'Baby', 'Child', 'Teenager', 'Student', 'Young adult', 'Adult', 'Elderly']\ntrain['AgeGroup'] = pd.cut(train[\"Age\"], bins, labels = labels)\ntest['AgeGroup'] = pd.cut(test[\"Age\"], bins, labels = labels)\n\n# Draw a bar plot for age vs. survival\nsns.barplot(x='AgeGroup',y='Survived',data=train)","47629d7d":"# to convert the alphanum values to integer for ploting\ntrain['CabinBool'] = train['Cabin'].notnull().astype('int')\ntest['CabinBool'] = test['Cabin'].notnull().astype('int')\n\nsns.barplot(x='CabinBool', y='Survived', data=train )\n\n# Calculate percentage of CabinBool vs. Survived\nprint('percentage of CabinBool = 1 who survived:',train['Survived'][train['CabinBool']==1].value_counts(normalize=True)[1]*100)\n\nprint('percentage of CabinBool = 0 who survived:',train['Survived'][train['CabinBool']==0].value_counts(normalize=True)[1]*100)\n","bfbedf7e":"# Draw a bar plot of port of embarkment vs. survival\nsns.barplot(x='Embarked', y='Survived', data=train )\n\n# Calculate percentage of CabinBool vs. Survived\nprint('percentage of Embarked = S who survived:',train['Survived'][train['Embarked']=='S'].value_counts(normalize=True)[1]*100)\n\n\nprint('percentage of Embarked = C who survived:',train['Survived'][train['Embarked']=='C'].value_counts(normalize=True)[1]*100)\n      \n      \nprint('percentage of Embarked = Q who survived:',train['Survived'][train['Embarked']=='Q'].value_counts(normalize=True)[1]*100)","1d1b9fea":"test.describe(include='all')","160c3ba7":"# we can drop the Ticket feature since it's unlikely to yeild any useful information\ntrain.drop(['Ticket'], axis = 1, inplace=True)\ntest.drop(['Ticket'], axis=1, inplace=True)","3bfd85c3":" #now we need to fill in the missing value in the embarked feature\nprint(\"Number of People embarking in Southampton(S):\")\nsouthampton = train[train['Embarked']== 'S'].shape[0]\nprint(southampton)\n  \nprint(\"Number of People embarking in Cherbourg(C):\")\ncherbourg = train[train['Embarked']== 'C'].shape[0]\nprint(cherbourg)\n        \nprint(\"Number of People embarking in Queenstown(Q):\")\nqueenstown = train[train['Embarked']== 'Q'].shape[0]\nprint(queenstown)","05137ccf":"#replacing the missing values in the embarked feature with s\ntrain = train.fillna({\"Embarked\":\"S\"})","62a25277":"# create a combined group of both dataset\ncombine = [train, test]\n\n#extract a title for each Name in the train and test datasets\nfor dataset in combine:\n  dataset['Title'] = dataset.Name.str.extract('([A-Za-z]+)\\.',expand=False)\npd.crosstab(train['Title'], train['Sex'])","78bcb73e":"# Replace various titles with more common names\nfor dataset in combine:\n  dataset['Title'] = dataset['Title'].replace(['Capt','Col','Don','Dr','Major','Rev','Jonkheer','Dona'],'Rare')\n  dataset['Title'] = dataset['Title'].replace(['Countess','Lady','Sir'],'Royal')\n  dataset['Title'] = dataset['Title'].replace(['Mlle','Ms'],'Miss')\n  dataset['Title'] = dataset['Title'].replace('Mme','Mrs')\n\ntrain[['Title', 'Survived']].groupby(['Title'], as_index=False).mean()  \n  \n  ","6784ec6f":"# Map each title to a numerical number\ntitle_mapping = {'Mr':1, 'Miss':2, 'Mrs':3, 'Master':4, 'Royal':5, 'Rare':6}\nfor dataset in combine:\n  dataset['Title'] = dataset['Title'].map(title_mapping)\n  dataset['Title'] = dataset['Title'].fillna(0)\n\ntrain.head()","53d2e3fd":"# group by Sex, Pclass, and Title\n#combined = train.append(test,ignore_index=True)\ngrouped = train.groupby(['Sex','Pclass', 'Title'])\ngrouped2 = test.groupby(['Sex','Pclass', 'Title'])\n# view the median Age by the grouped features \ngrouped.Age.median()\ngrouped2.Age.median()","6dc59234":"# apply the grouped median value on the Age NaN\ntrain.Age = grouped.Age.apply(lambda x: x.fillna(x.median()))\ntest.Age = grouped2.Age.apply(lambda x: x.fillna(x.median()))","838f68c9":"train.info()\nprint('-'*40)\ntest.info()","f7e77608":"#drop the name feature\ntrain.drop(['Name'], axis = 1, inplace=True)\ntest.drop(['Name'],axis = 1, inplace=True)","5e4fce33":"# map each sex value to anumerical value\nsex_mapping = {\"male\":0,\"female\":1}\ntrain['Sex'] = train['Sex'].map(sex_mapping)\ntest['Sex'] = test['Sex'].map(sex_mapping)\n\ntrain.head()","7f315665":"train.drop('AgeGroup',axis=1,inplace=True)\ntest.drop('AgeGroup',axis=1,inplace=True)","8dc112eb":"train.info()\ntest.info()","6eb7f2b0":"# Map each Embarked value to a numerical value\nembarked_mapping = {'S':1,'C':2,'Q':3}\ntrain['Embarked'] = train['Embarked'].map(embarked_mapping)\ntest['Embarked'] = test['Embarked'].map(embarked_mapping)\n","b205e186":"#Drop the cabin Feature\ntrain.drop('Cabin',axis=1,inplace=True)\ntest.drop('Cabin',axis=1,inplace=True)","10259a17":"#fill in the missing Fare value in Test set based on mean fare for that Pclass\nfor x in range(len(test['Fare'])):\n  if pd.isnull(test['Fare'][x]):\n    pclass = test['Pclass'][x]  #Pclass = 3\n    test['Fare'][x] = round(train[train['Pclass'] == pclass]['Fare'].mean(), 4)\n    \n# maping Fare into Group of numerical values\ntrain['FareBand'] = pd.qcut(train['Fare'], 4, labels = [1, 2, 3, 4])\ntest['FareBand'] = pd.qcut(test['Fare'], 4, labels = [1, 2, 3, 4])\n\n#drop Fare values\ntrain.drop(['Fare'],axis=1,inplace=True)\ntest.drop(['Fare'],axis=1,inplace=True)","5d2388d5":"train.head()","3bfa1045":"test.head()","a19b93e6":"from sklearn.model_selection import train_test_split\n\npredictors = train.drop(['Survived', 'PassengerId'], axis=1)\ntarget = train['Survived']\nx_train, x_val, y_train, y_val = train_test_split(predictors, target, test_size = 0.22, random_state = 0)","d53d7ead":"#SVM model\nfrom sklearn.svm import SVC\nfrom sklearn.metrics import accuracy_score\n\nsvc = SVC()\nsvc.fit(x_train, y_train)\ny_pred = svc.predict(x_val)\nacc_svc = round(accuracy_score(y_pred, y_val) * 100, 2)\nprint(acc_svc)","b516247f":"#set ids as PassengeId and predict survival\nids = test['PassengerId']\npredictions = svc.predict(test.drop('PassengerId', axis=1))\n\n#set the output as a dataframe and convert to csv file named submission.csv\noutput = pd.DataFrame({'PassengerId':ids, 'Survived':predictions})\noutput.to_csv('submission.csv', index=False)","4b9de6aa":"#This give a list of folder and ids in your google drive\nfile_list = drive.ListFile({'q': \"'root' in parents and trashed=false\"}).GetList()\nfor file1 in file_list:\n  print('title: %s, id: %s' % (file1['title'], file1['id']))","08b27a02":"# Copy the id of the folder where you want to save the submission file\nfile = drive.CreateFile({'parents':[{u'id': 'Your_folder_id_here'}]}) \nfile.SetContentFile(\"submission.csv\")\nfile.Upload()","505d8ecf":"Babies are more likely to survive than any other group","41325edb":"##SibSp Feature","00628424":"##Observation:\n-  there is a total of 891 passanger in traing dataset.\n-  The age feature is missing approximately 19.8% of its value.\n-  The Cabin feature is missing approx. 77.1% of its value\n-  The Embarked feature is missing 0.22% of its values","c685291e":"##Embarked Feature","ad499c95":"##Sex Feature","eaabc0ec":"So, Female have a much higher chance of survival than males. The Sex feature is essential in our prediction.","657959e6":"So people who boarded from C = Cherbourg are more likely to survive than people from  Q = Queenstown, S = Southampton.","0cbf7dea":"People with a recorded Cabin number are more likely to survive.","c9ecdc42":"#5) Cleaning Data\nNow we will clean our data to account for missing values.","7ed73242":"##Pclass Feature","f6b3b9de":"So its clear that majority of people embarked from southampton. Let's fill the missing values with S.","5e5c901f":"First we will get the title of passenger from there name. then, we will try to map then into certain age group.","9b500fc3":"\n\n*   We have a total of 418 pasengers.\n*   1 value from the Fare feature is missing.\n*    Around 78..2% of Cabin Feature is missing, we need to fill that in.\n\n","bb11d8d8":"People with less than four parents or children aboard are more likely to survive than those with four or more. Again, people with no parents or children are less likely to survive than those with 1-3 parent or children","b032c2a1":"#6) Choosing the best model\n\n## Spliting the Training Data\nWe will use part of our traing data(22% in this case) to test accuracy of our different models.\n","79e9ef7d":"##Cabin Feature","b1a3ef3d":"##Embarked Feature","2e336309":"##Age Feature\n\nNext we'll fill in the missing values in age feature. Since a higher percemtage of values are missing, it would be illogical to fill all of them with the same value(as we did with embarked). Instead, let's try to find a way to pridict the missing age.","8a4bf956":"In general, those with more siblings or spouses aboard were less likely to survive. However, people with no sibling or spouses were less likely to survive than those with one or two.","3acabe9d":"##Some confusing Feature\n-  **sibsp -** number of siblings\/spouses aboard the titanic\n- **parch -** number of parents\/children aboard the titanic\n- **Embarked -** Port of Embarkation  - - C = Cherbourg, Q = Queenstown, S = Southampton\n- **Pclass -** A proxy of socio-economic status(SES)  --- 1st = Upper, 2nd = Middle, 3rd = Lower ","00b16067":"People with higher socio-economic class had a higher rate of survival. Z","d898878f":"# **1) Import Necessary Library**\nWe will use numpy for numerical calculation, pandas for manupulation of data, matplotlib and seaborn for visualization. %matplotlib inline will make your plot outputs appear and be stored within the notebook","f189d9ab":"##Sex Feature","7ced1cbc":"##Contents:\n\n\n1.   Import Necessary Libraries\n2.   Read and Explore the data\n3.   Data Analysis\n4.   Data Visualization\n5.   Cleaning Data\n6.   Selecting the Model\n7.   Creating Submission File\n\n####I have used google's colab for my program. Any and all feedback is welcome!\n\n","aa274330":"##Looking at the test data\nLet's see how our test data look","09354efc":"#3) Data Analysis\nWe are going to consider features in our dataset and see how complete they are.","78de5031":"##Age Feature","adc47d4e":"##what are the data type for each feature?\n-  Survived: int\n-  Pclass: int\n-  Name: string\n-  Sex: string\n-  Age: float\n-  SibSp: int\n-  Parch: int\n-  Ticket: string\n-  Fare: float\n-  Cabin: string\n-  Embarked: string","c0ca25bd":"##Fare Feature\nWe will seaperate the fare value into logical groups as well as filling in single missing value in the dataset.","075afa94":"-  **Numeical Features:** Age(continuous), Fare(Continuous) SibSp(Discrete), Parch(Discrete)\n-  **Categorical Features:** Survived,Sex,Embarked,Pclass\n-  **Alphanumeric Features:** Tickets,Cabin","f37a2e7e":"#2) Read And Explore Data\nwe will use  pd.read_csv  function to read data from a csv file and store it in a data frame(train).\nView the first 3 entries of the tain using train.head(3) ","afbdef71":"##Ticket Feature","6ab87b19":"#7) Creating Submission File\nit's time to create a submission.csv file to upload to the Kaggle Compettiton!\n","d48b1940":"##Name Feature\n\nwe can drop name feature now as we've extracted the title.","21551346":"##Parch Feature","29a8467b":"#4) Data Visualization\nits time to visualize our data to see which feature affect more on survival rate","47543aa7":"##Model\nHere i will be using Support Vector Machine(SVM) to predict my output.","fdc2d267":"#Titanic Survival Prediction For Beginners\nI am a newbie to machine learning. This project is my first attempt on any dataset (Titanic: Machine Learning from Disaster dataset). I will try my level best to way you through every step. If you find this useful please consider upvoting.","5ffa42a2":"Instead of simply filling in the missing Age values with the mean or median age of the dataset, by grouping the data by a passenger\u2019s sex, class, and title, we can drill down a bit deeper and get a closer approximation of what a passenger\u2019s age might have been. Using the grouped.Age variable, we can fill in the missing values for Age.","65da896c":"##Embarked Feature"}}