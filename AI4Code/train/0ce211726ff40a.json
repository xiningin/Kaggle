{"cell_type":{"ad38dca6":"code","697b40a9":"code","4500ae24":"code","e969b38d":"code","66ccd0d2":"code","ea25146b":"code","895c677b":"code","5f6a4fc3":"code","9f812660":"code","988259fd":"code","96970931":"code","66b9bc2e":"code","f6846f3a":"code","c501031f":"markdown","5aae408b":"markdown","3afb92db":"markdown","7e8e1471":"markdown","aa9fe776":"markdown","b7c61c60":"markdown","66fe59b0":"markdown","b44a4488":"markdown","e72a0a9d":"markdown","65c22931":"markdown","6fc1b044":"markdown","3d71b4ff":"markdown","7cf07585":"markdown"},"source":{"ad38dca6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n# \nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","697b40a9":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# these are the results of all subjects. included in them are those who were classified later on \n# as learner\/responders and non-learners\/non-responders\ndata = pd.read_csv('..\/input\/BCI_input.csv')\n\nprint(data)\nplt.show()","4500ae24":"sns.pairplot(data)\nplt.show()","e969b38d":"t = data[data['HRV_HF-test']>0.001]\nt","66ccd0d2":"data.rename(index=str, columns={'HRV-Vagal-Practice':'Vagal',\n                                'HRV-HF-Practice':'HF',\n                                'Average of NF-BB':'BLpractice',\n                                'Average of NF_GL':'GLpractice',\n                                \"HRV_Vagal-test\": \"Vagaltest\", \n                                \"HRV_HF-test\": \"HFtest\",\n                                \"NF(GL)-Test\": \"GLtest\", \n                                \"NF(BB)-Test\": \"BLtest\"}\n            ,inplace=True)","ea25146b":"nonLearnersLabels = [102,103,104,112,107,108,109,115,121]\n# learnersLabels = [101,105,106,110,111,113,114,116,117,118,119,120,122]\nlearnersLabels = [ x for x in range(101,123) if x not in nonLearnersLabels]\n\n# isin function here helps us filter the participants based on their subject ID\nlearners = data[data.subject.isin(learnersLabels)]\nnonLearners = data[data.subject.isin(nonLearnersLabels)]\n\n# let's show the learners dataframe as an example\nlearners","895c677b":"from scipy.stats import pearsonr\n\nplt.figure(num=None, figsize=(10, 4))\nax = plt.subplot(1,2,1)\nax.set_title(\"Learners\")\nsns.regplot(x=learners.GLpractice,y=learners.GLtest)\nax = plt.subplot(1,2,2)\nax.set_title(\"Non-Learners\")\nsns.regplot(x=nonLearners.GLpractice,y=nonLearners.GLtest)\n\nr1,p1 = pearsonr(learners.GLpractice,learners.GLtest)\nr2,p2 = pearsonr(nonLearners.GLpractice,nonLearners.GLtest)\n# corrLearn = np.corrcoef(learners.GLpractice,learners.GLtest)[1][0]\n# corrNonLearn = np.corrcoef(nonLearners.GLpractice,nonLearners.GLtest)[1][0]\nprint(\"learners: r={}, p-val={}, \\nnon-learners: r={}, p-val={}\".format(r1,p1,r2,p2))\n","5f6a4fc3":"from scipy.stats import pearsonr\n\nplt.figure(num=None, figsize=(10, 4))\nax = plt.subplot(1,2,1)\nax.set_title(\"Learners\")\nsns.regplot(x=learners.BLpractice,y=learners.BLtest)\nax = plt.subplot(1,2,2)\nax.set_title(\"Non-Learners\")\nsns.regplot(x=nonLearners.BLpractice,y=nonLearners.BLtest)\n\nr1,p1 = pearsonr(learners.BLpractice,learners.BLtest)\nr2,p2 = pearsonr(nonLearners.BLpractice,nonLearners.BLtest)\n# corrLearn = np.corrcoef(learners.GLpractice,learners.GLtest)[1][0]\n# corrNonLearn = np.corrcoef(nonLearners.GLpractice,nonLearners.GLtest)[1][0]\nprint(\"learners: r={}, p-val={}, \\nnon-learners: r={}, p-val={}\".format(r1,p1,r2,p2))\n","9f812660":"print(learners[['HF','HFtest']])\nplt.scatter(learners.HF,learners.HFtest)","988259fd":"learners = learners.assign(logHFpractice=np.log(learners.HF))\nlearners = learners.assign(logHFtest=np.log(learners.HFtest))\n\nnonLearners = nonLearners.assign(logHFpractice=np.log(nonLearners.HF))\nnonLearners = nonLearners.assign(logHFtest=np.log(nonLearners.HFtest))\n\n# display the learners to check the data\nlearners","96970931":"print(learners[['logHFpractice','logHFtest']])\nplt.scatter(learners.logHFpractice,learners.logHFtest)","66b9bc2e":"from scipy.stats import pearsonr\n\nplt.figure(num=None, figsize=(10, 4))\nax = plt.subplot(1,2,1)\nax.set_title(\"Learners\")\nsns.regplot(x=learners.logHFpractice,y=learners.logHFtest)\nax = plt.subplot(1,2,2)\nax.set_title(\"Non-Learners\")\nsns.regplot(x=nonLearners.logHFpractice,y=nonLearners.logHFtest)\n\nr1,p1 = pearsonr(learners.logHFpractice,learners.logHFtest)\nr2,p2 = pearsonr(nonLearners.logHFpractice,nonLearners.logHFtest)\n# corrLearn = np.corrcoef(learners.GLpractice,learners.GLtest)[1][0]\n# corrNonLearn = np.corrcoef(nonLearners.GLpractice,nonLearners.GLtest)[1][0]\nprint(\"learners: r={}, p-val={}, \\nnon-learners: r={}, p-val={}\".format(r1,p1,r2,p2))","f6846f3a":"from scipy.stats import pearsonr\n\nplt.figure(num=None, figsize=(10, 4))\nax = plt.subplot(1,2,1)\nax.set_title(\"Learners\")\nsns.regplot(x=learners.Vagal,y=learners.Vagaltest)\nax = plt.subplot(1,2,2)\nax.set_title(\"Non-Learners\")\nsns.regplot(x=nonLearners.Vagal,y=nonLearners.Vagaltest)\n\nr1,p1 = pearsonr(learners.Vagal,learners.Vagaltest)\nr2,p2 = pearsonr(nonLearners.Vagal,nonLearners.Vagaltest)\n# corrLearn = np.corrcoef(learners.GLpractice,learners.GLtest)[1][0]\n# corrNonLearn = np.corrcoef(nonLearners.GLpractice,nonLearners.GLtest)[1][0]\nprint(\"learners: r={}, p-val={}, \\nnon-learners: r={}, p-val={}\".format(r1,p1,r2,p2))","c501031f":"okay, now that our data is more readable and comfortable to work with, we can see how the average HF Heart Rate Variablity across the 5 training trials correlates with the test trail.","5aae408b":"Just by looking at the last row (and the last column) of the pairplot, we can see a potential outlier (let's leave it for now). ","3afb92db":"No significant results for this approach.\n\nNow what about Heart Rate Variablity:","7e8e1471":"okay, let me tell you a bit about our data:\n\n**subjects**: the subject id\n\n**'HRV-Vagal-Practice'** - Heart rate variablity measured through vagus nerve during practice trails.\n\n**'HRV-HF-Practice'** - Heart rate variability based on high frequency bands during practice trails.\n\n**'Average of NF-BB'** - Average NF trails based on Baseline per Block approach.\n\n**'Average of NF_GL'** - Average NF trails based on Global Baseline.\n\n**'HRV_Vagal-test'** - Heart rate variablity measured through vagus nerve during test trail.\n\n**'HRV_HF-test'** - Heart rate variability based on high frequency bands during test trail.\n\n**'NF(GL)-Test'** - NF score for test trail using Global baseline approach.\n\n**'NF(BB)-Test'** - NF score for test trail using Baseline per Block approach.\n\n","aa9fe776":"Let's look at the relationship between NF practice trails and NF test trail for learners and non-learners:","b7c61c60":"It seem like we have significant results (significant results means p-val<0.05) for the non-learners. however, let us not for get that this is unreliable data since we have a very small dataset especially for the non-learners (14 samples for learners, 8 samples for non-learners..)\n\nNow, let's take a lot at the second approach (Baseline Per Block).","66fe59b0":"![https:\/\/imgur.com\/iwoT9aD](http:\/\/)\n[https:\/\/imgur.com\/iwoT9aD](http:\/\/)\n![imgur.com\/iwoT9aD](http:\/\/)\n\n**If you found value in this project then please upvote and support :)\n**\nIntroducing my very own Brain Computer Interface (BCI) Reseach:\n\nWhen doing **Neurofeedback (NF)** research, one of the most important first steps is to start by categorizing  our participants to learners and non-learners. \n\nIn this project we will try out two different approaches of classifying NF learners and non-learners as well as measure their **heart-rate-variability (HRV)** and attempting to make sense of the data, to find correlations, maybe even make predictions based on our data.\n\n**The research design is as follows:**\n\n1) We measure the baseline: 1 recording of brain signals during free thought.\n\n2) 5 training trails: which are averaged and used as practice data\n\n3) Test trail: which is used to measure how well did the participant learn\/ didn't learn.\n\n\n**As mentioned, there are two approaches for classifiying;**\n\n1) Global baseline : measuring the brain signals of the particpant before we start the training trails and using it as a measure from progress.\n\n2) Baseline Per. Block: With each training trail, a new Baseline is calculated.\n\n\n\n**Note: one major downfall of this project is that it has a very small dataset of 22 participants.**","b44a4488":"Let's make the data more comfortable to wrok with (by trnasforming the data using log):","e72a0a9d":"Out of consideration of not diving too deep into this research, i will not code the entire process of classifying the participants to learner and non-learners but i can describe the process for one sample (participant 106) for those who are interested:\n\n![https:\/\/www.deviantart.com\/silverbullet227\/art\/Samp106-769762068](http:\/\/)\n\nThe above data is for the participant 116 using the Baseline Per. Block approach:\n\nTrial number 0 i for measure of th baseline.\n\nThe next 5 trials to follow are the training trails, each has baseline_mean and feedback_mean. subtracting these two values gives us an estimate of the participant's progress for the trail, which is refered to as nf_bl_diff. After that we perform a t-test to classify if the current trial was considered successful or not (in other words whether the participant managed to learn or not, it wasn't mentioned before but each participant is performing a task while doing each trail, in this research the task was to lower the volume of a paino tune playing in the background). \n\nAfter the training we performed, another baseline was measured (without the task) and followed by a test trail (with the task) to see whether the participant was successful with regulating their brain signals. it the participant was successful the success_Ttest would suggest so. classifying the participant as a learner (116 was indeed a learner).\n\nI already did this prcoess in excel, so i'll just list the learners and non learners below:","65c22931":"It seems that we have a very high significant correlation r=0.96 for the non-learners, this might simply mean that those who were classfied as non-learners did not display any difference in HRV during the practice trails and the test trail (in other words, it hand no affect on them what so ever). however, those who were classified as learners did in fact display a change in HRV between the practice trails and the test trails (research tends to support the idea that those who are successful with NF manage to  be in a calm\/meditative state after NF practice with more calm breathing patterns)\n\nNow what about the Vagal HRV (practice vs. test):","6fc1b044":"**Lock And Load!**","3d71b4ff":"Let's rename the columns, it would be easier to work with better name:","7cf07585":"Now let's try again;"}}