{"cell_type":{"dbeaf08c":"code","814952e8":"code","6f10acca":"code","f234d1b0":"code","799908de":"code","7dad2fb3":"code","20bd851a":"code","13e57aae":"code","5ba11458":"code","734091b4":"code","90e0b35c":"code","78e482a7":"code","8498f110":"code","7e651297":"code","b6a8e27b":"code","68e0fc9d":"code","2dba7444":"code","ae1e267d":"code","ee4f68dd":"code","2a1c3277":"code","92f29b84":"code","ed98e819":"code","f886b6b9":"code","c5df3ffc":"code","2c3415cd":"code","17c58142":"code","8505c531":"code","ed3d058f":"code","e8a3b106":"code","9ea1a4e7":"code","6f3a4668":"code","90116cf6":"code","a89721c7":"code","f481ed83":"code","83d71399":"code","9c9af938":"code","93b1a1e5":"code","f73b6b8a":"code","256024aa":"code","6a6289d8":"code","e2ed9819":"code","88d8792e":"code","400cef4e":"code","3d90a3b1":"code","ece1f73c":"code","b5f3e4f4":"code","a468a399":"code","e72d25dc":"code","a63a7ab9":"code","d1910180":"code","df114c33":"code","f0e7df34":"code","edd098f3":"code","b5a3dea1":"code","9dc3aa50":"code","0deed21f":"code","c37c091e":"code","f2bc449e":"code","cf981289":"code","bd18a829":"code","2ccf9e65":"code","37ecaf13":"code","bfd59a99":"code","eb90862b":"code","689b888e":"code","ceb2660f":"markdown","698ed10c":"markdown","05bdd398":"markdown","1294e490":"markdown","03a08f28":"markdown","3f7a706b":"markdown","8bcd4895":"markdown","376acd7d":"markdown","12f77a39":"markdown","72267d8f":"markdown","96d46b43":"markdown","bfac7d0a":"markdown","89d21fa2":"markdown","b2c71588":"markdown","6dadbbe2":"markdown","02aa4556":"markdown","8c6aa6e8":"markdown","7d044c5f":"markdown","faec295b":"markdown","7deb7b8c":"markdown","0f342d9c":"markdown","d6c32b67":"markdown","fab9487b":"markdown"},"source":{"dbeaf08c":"# Import the libraries that will be used\nimport numpy as np\nimport pandas as pd\nfrom pandas import DataFrame\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style(\"whitegrid\")\n%matplotlib inline\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import accuracy_score","814952e8":"# Read the file and put it into a dataframe\ndata = pd.read_csv(\"..\/input\/StudentsPerformance.csv\")","6f10acca":"# Get a general overview of the data\ndata.head()","f234d1b0":"data.info()","799908de":"data.describe()","7dad2fb3":"# Quick box plot of the data\nboxplot = data.boxplot(patch_artist=True)\nplt.title(\"Box plot of scores\")\nplt.ylabel(\"Points\")","20bd851a":"# Histogram of the scores for the three subjects\nplt.hist(\"math score\", data=data, alpha=0.5, bins=25)\nplt.hist(\"reading score\", data=data, alpha=0.5, bins=25)\nplt.hist(\"writing score\", data=data, alpha=0.5, bins=25)\nplt.xlabel(\"Score\")\nplt.ylabel(\"Count\")\nplt.title(\"Score Distributions Among the Three Subjects\")\nplt.legend([\"Math\", \"Reading\", \"Writing\"])","13e57aae":"# Add a column for the cumulative score\ndata[\"Cumulative Score\"] = data[\"math score\"] + data[\"reading score\"] + data[\"writing score\"]\ndata.head()","5ba11458":"# Boxplot of the cumulative score\ndata.boxplot(\"Cumulative Score\", patch_artist=True)\nplt.title(\"Box plot of Cumulative Score\")\nplt.ylabel(\"Points\")","734091b4":"# Find the mean and standard deviation of the cumulative score\nprint(\"Mean: %.2f \\nStd: %.2f\" %(data[\"Cumulative Score\"].mean(), data[\"Cumulative Score\"].std()))","90e0b35c":"# Create a function to quickly group the data by a certain field and returns the mean scores\n# In addition, it plots a histogram of the mean math, reading, writing, and cumulative scores\n# Inputs are the dataframe, the groupby field, and a colorset\ndef group_scores(df, groupby_field, **colors):\n    df = df[[groupby_field, \"math score\", \"reading score\", \"writing score\", \"Cumulative Score\"]].groupby(groupby_field)\n    df = DataFrame(np.transpose(df.mean()))\n    df.index = [\"Math\", \"Reading\", \"Writing\", \"Cumulative\"]\n\n    if colors.get(\"color\"):\n        df.plot(kind=\"bar\", rot=0, color=colors.get(\"color\"))\n    else:\n        df.plot(kind=\"bar\", rot=0, cmap=colors.get(\"color\"))\n\n    plt.title(\"Mean scores based on \" + groupby_field)\n    plt.ylabel(\"Mean Scores\")\n    plt.legend(loc=\"upper center\")\n    return df","78e482a7":"# Making sure that there is enough data for both genders\ndata[\"gender\"].value_counts()","8498f110":"# Create the plot using the function\ngender_scores = group_scores(data, \"gender\", color=[\"magenta\", \"blue\"])","7e651297":"# Print the mean scores for each section\ngender_scores","b6a8e27b":"# Check the counts for the race ot make sure there is a good distribution in the data\ndata[\"race\/ethnicity\"].value_counts()","68e0fc9d":"# Plot\nrace_scores = group_scores(data, \"race\/ethnicity\", cmap=\"set1\")","2dba7444":"# Print the mean scores in table format\nrace_scores","ae1e267d":"# Check the counts\ndata[\"test preparation course\"].value_counts()","ee4f68dd":"# Plot\ntest_prep_scores = group_scores(data, \"test preparation course\", cmap=\"set1\")","2a1c3277":"# Print\ntest_prep_scores","92f29b84":"# Group by race and test prep course\ngroup_race_test_counts = data[[\"race\/ethnicity\", \"test preparation course\"]].groupby([\"race\/ethnicity\", \"test preparation course\"])","ed98e819":"# Get the counts using size() and make it into a dataframe\ngroup_race_test_counts = DataFrame(group_race_test_counts.size().reset_index(name=\"Counts\")).set_index(\"race\/ethnicity\")","f886b6b9":"# Get total number of students in each race that completed test prep\ngroup_race_test_sums = group_race_test_counts.groupby(group_race_test_counts.index).sum()","c5df3ffc":"# Rename column\ngroup_race_test_sums.columns = [\"Total Num\"]","2c3415cd":"# Join the data\ngroup_race_test = pd.concat([group_race_test_counts, group_race_test_sums], axis=1, join=\"inner\")","17c58142":"# Create a new column for the percentage of students\ngroup_race_test[\"Percentage\"] = np.round(group_race_test[\"Counts\"]\/group_race_test[\"Total Num\"], 2)","8505c531":"# Print out the percentages for each group that completed the test prep score\ngroup_race_test[group_race_test[\"test preparation course\"] == \"completed\"]","ed3d058f":"# Counts\ndata[\"parental level of education\"].value_counts()","e8a3b106":"# Plot\nparent_ed_scores = group_scores(data, \"parental level of education\", cmap=\"set1\")","9ea1a4e7":"# Print\nparent_ed_scores","6f3a4668":"# If the parental level of education column contains \"degree\", set the value to yes\ndata[\"Degree\"] = data[\"parental level of education\"].apply(\n    lambda x: \"yes\" if x.find(\"degree\") >= 0 else \"no\")","90116cf6":"# View result\ndata.head()","a89721c7":"# Plot again\nparent_degree_scores = group_scores(data, \"Degree\", color=[\"red\", \"green\"])","f481ed83":"# View the numbers\nparent_degree_scores","83d71399":"# A quick plot to see if children whose parents have a degree complete test preparation courses \nsns.countplot(\"Degree\", data=data, hue=\"test preparation course\")","9c9af938":"# Group relevant data\ngroup_degree_test_counts = data[[\"Degree\", \"test preparation course\"]].groupby([\"Degree\", \"test preparation course\"])","93b1a1e5":"# Get the counts using size() and make it into a dataframe\ngroup_degree_test_counts = DataFrame(group_degree_test_counts.size().reset_index(name=\"Counts\")).set_index(\"Degree\")","f73b6b8a":"# Get total number of students in each degree group\ngroup_degree_test_sums = group_degree_test_counts.groupby(group_degree_test_counts.index).sum()","256024aa":"# Rename column\ngroup_degree_test_sums.columns = [\"Total Num\"]","6a6289d8":"# Join the data\ngroup_degree_test = pd.concat([group_degree_test_counts, group_degree_test_sums], axis=1, join=\"inner\")","e2ed9819":"# View the data\ngroup_degree_test","88d8792e":"# Create a new column for the percentage of students\ngroup_degree_test[\"Percentage\"] = np.round(group_degree_test[\"Counts\"]\/group_degree_test[\"Total Num\"], 2)","400cef4e":"# Print out the percentages\ngroup_degree_test[group_degree_test[\"test preparation course\"] == \"completed\"]","3d90a3b1":"# Checking to see students with free\/reduced lunch complete the test preparation course\nsns.countplot(\"test preparation course\", data=data, hue=\"lunch\")","ece1f73c":"# Plot\nlunch_scores = group_scores(data, \"lunch\", cmap=\"set1\")","b5f3e4f4":"lunch_scores","a468a399":"# Function to convert the binary categorical fields to 1s and 0s\ndef convert_binary_categorical(df, key_val_dict):\n    df = df.copy()\n    for key in key_val_dict:\n        df[key] = df[key].apply(lambda x: 1 if x == key_val_dict[key] else 0)\n    return df","e72d25dc":"# Mapping the gender, test prep, race, degree as 1\nmapping_dict = {\"gender\": \"male\", \"Degree\": \"yes\", \"test preparation course\": \"completed\"}","a63a7ab9":"# Create the dataframe for the binary categorical fields and convert\ndata_binary_x = data[[\"gender\", \"Degree\", \"test preparation course\"]]\ndata_binary_x = convert_binary_categorical(data_binary_x, mapping_dict)","d1910180":"# Check results\ndata_binary_x.head()","df114c33":"# Create dummies for the non binary categorical field\ndata_non_binary_x = pd.get_dummies(data[\"race\/ethnicity\"])","f0e7df34":"# Drop a field to prevent over fitting and view\ndata_non_binary_x.drop(\"group E\", axis=1, inplace=True)\ndata_non_binary_x.head()","edd098f3":"# Combine the binary and nonbinary dataframes to get the X data\ndata_x = pd.concat([data_binary_x, data_non_binary_x], axis=1)","b5a3dea1":"# View\ndata_x.head()","9dc3aa50":"# Generate the Y target\ndata_y_math = data[\"math score\"]\ndata_y_reading = data[\"reading score\"]\ndata_y_writing = data[\"writing score\"]","0deed21f":"# Split the x and y into training and testing datasets\nx_train_math, x_test_math, y_train_math, y_test_math = train_test_split(data_x, data_y_math)\nx_train_reading, x_test_reading, y_train_reading, y_test_reading = train_test_split(data_x, data_y_reading)\nx_train_writing, x_test_writing, y_train_writing, y_test_writing = train_test_split(data_x, data_y_writing)","c37c091e":"# Predict the probability of each score occuring\nclf_math = LogisticRegression()\nclf_math.fit(x_train_math, y_train_math)\ny_pred_math = clf_math.predict_proba(x_test_math)","f2bc449e":"# Probability of each score occuring for each row\ny_pred_math","cf981289":"# Group the math, reading, and writing score into bins to view easier\n# 0, 1, 2, 3, 4, 5 corresponds to [0-20), [20-40), [40-60)...\ndata_y_math = np.floor(data_y_math\/20)\ndata_y_reading = np.floor(data_y_reading\/20)\ndata_y_writing = np.floor(data_y_writing\/20)","bd18a829":"# Checking\n[data_y_math.unique(), data_y_reading.unique(), data_y_writing.unique()]","2ccf9e65":"# Split into training and testing datasets using the new y data\nx_train_math, x_test_math, y_train_math, y_test_math = train_test_split(data_x, data_y_math, random_state=42)\nx_train_reading, x_test_reading, y_train_reading, y_test_reading = train_test_split(data_x, data_y_reading)\nx_train_writing, x_test_writing, y_train_writing, y_test_writing = train_test_split(data_x, data_y_writing)","37ecaf13":"# Predict the bin given the gender, degree, test prep, and group\nclf_math = LogisticRegression()\nclf_math.fit(x_train_math, y_train_math)\ny_pred_math = clf_math.predict(x_test_math)\n\nclf_reading = LogisticRegression()\nclf_reading.fit(x_train_reading, y_train_reading)\ny_pred_reading = clf_reading.predict(x_test_reading)\n\nclf_writing = LogisticRegression()\nclf_writing.fit(x_train_writing, y_train_writing)\ny_pred_writing = clf_writing.predict(x_test_writing)","bfd59a99":"# Check the accuracy\nprint(\"Math: %.5f \\nReading: %.5f \\nWriting: %.5f \" \n      %(accuracy_score(y_test_math, y_pred_math), accuracy_score(y_test_reading, y_pred_reading), accuracy_score(y_test_writing, y_pred_writing)))","eb90862b":"# Function to calculate probability when only choosing 3\ndef calc_percentage(data_array, bin_num):\n    # Count of bin num in the array\/count of all the bins in the array\n    return (data_array == bin_num).sum()\/len(data_array) # data_array == bin_num returns True\/False and sum will sum the trues","689b888e":"# Print accuracy of only guessing 3\nprint(\"Math: %.5f \\nReading: %.5f \\nWriting: %.5f \" \n      %(calc_percentage(y_test_math, 3), calc_percentage(y_test_reading, 3), calc_percentage(y_test_writing, 3)))","ceb2660f":"It seems that students that completed the test preparation course score higher than those that did not. This makes sense since those students are expected to learn more and have more experience in solving related problems. It may also be the case that students that completed the course studied more than those that did not. The data also shows that the test preparation course is working as intended, and may not necessarily be a waste of money.","698ed10c":"A more granular look at the percentages of students that completed the test preparation course shows that roughly the same percentage of students complete the test preparation course regardless of whether or not the parents have a degree or not.\n\nTherefore, it is not the case that those students are scoring better because the parents are making them complete the test preparation course. However, it can still be a case that those parents are helping the students more outside of the classroom and\/or trying to teach their children about the benefits of education.","05bdd398":"From the data, children whose parents have a degree score better across all three subjects resulting in a mean cumulative difference of around 15 points. This may be due to the parents with degrees valuing education higher than those without and are more willing to help their children out. On the other hand, parents without a degree may have some sort of work that do not require an advanced education. From the data, children whose parents have a degree score better across all three subjects resulting in a mean cumulative difference of around 15 points.\n\nThe countplot of children whose parents have a degree attempts to see if children have a higher percentage to complete the test preparation course if their parents have a degree. This information can potentially show that parents with a degree have a higher likelihood to make their children complete the test preparation course if the discrepancy is large enough. The following section will be taking a look at the exact percentages and seeing if this is the case.","1294e490":"## Introduction\n\nThis notebook will attempt to analyze high school student's performance in math, reading, and writing. The dataset comes from http:\/\/roycekimmons.com\/tools\/generated_data\/exams, and contains the performance data of 1000 students from a public school. In addition, it also contains information regarding their background such as gender, race, lunch plan, whether or not they completed a test preparation course, and their parent's level of education.\n\nThe notebook will take a look at each factor to see if they play a significant role in a student's academic success in those subjects. In addition, please note that the data used is fictional, so the findings have no significant meaning.\n\nAdvice and suggestions for improvement would also be greatly appreciated.","03a08f28":"## Machine Learning to Predict Scores","3f7a706b":"## Quick Glance\n\nFrom a quick glance at the data, there are no null values that will need to be accounted for, and students generally score the highest in the reading section with the math section being the lowest. However, all of the subjects score roughly the same at around the 60-80 range, and the score distribution forms a bell curve like shape. When looking at cumulative scores, the standard deviation is much higher and a student's score can range from around 150-250 on average. The mean for the cumulative scores are around 203.31 with a standard deviation of around 42.77.\n\nSome points that would be interesting to see are if this holds true for all genders, races, etc.","8bcd4895":"## Probabily of Guessing Correct Bin if Only Choosing Bin 3","376acd7d":"From the results, males scored better on average than their female counterparts in the math section. However, in the reading and writing section, females scored better than males. Males on average being stronger in math may be one of the reasons why there are typically males in STEM fields.\n\nOverall, females score higher than males by around ~11 points.","12f77a39":"It looks like if the parents have some sort of degree, the student will score higher on average than those whose parents do not have a degree. Surprisingly, children of parents that did not finish high school scored better than the children whose parents actually completed high school. Perhaps this is due to those parents realizing the drawbacks of not having a high school diploma and emphasizing the importance of an education to their children.\n\nTo make the divide between scores from children whose parents have a degree and not, a new yes\/no column will be added to show whether or not the parent has a degree.","72267d8f":"## Factors to look at\n\nFactors and questions that the notebook will be looking at are:\n\n1. Do students on average score significantly better at a certain subject?\n2. Do students with a certain gender typically score better on certain subjects than their counterpart?\n3. Do students of a certain race score better than others?\n4. On average, does completing a test preparation course increase a student's score?\n5. If test prep helps, is the group that has the best score also the group that has the highest test preparation course?\n6. What about whether or not the parents have a degree?\n7. Do low income students (defined by whether or not they are on a lunch plan) score worse?\n8. How many students on a lunch plan complete a test preparation course (assuming that the test preparation course costs money)?\n9. Will it be possible to predict the range of a student's score using Machine Learning?","96d46b43":"When analyzing the races, group E scored the highest in all subjects. In addition, when comparing the students that completed a test preparation course with those that did not, it was shown that test preparation courses helped improve scores on average.\n\nLooking at the percentage of students from each group that completed the test preparation score, group E had the highest percentage of students that completed the course. This may be the one reason why group E scored the highest out of all the groups.\n\nSurprisingly, group D had the lowest percentage of completion yet they scored the second highest out of all the groups in all subjects. This may be due to group D studying a significant amount more than group A, B, and C despite having a lower percentage of students that completed the test preparation course.","bfac7d0a":"It seems that students on a standard lunch plan score higher than students on a reduced lunch plan on average. Surprisingly, there are still students on a reduced lunch that complete the test preparation course, so it may be the case that the test preparation course does not cost money.\n\nAs to why the students on a standard lunch plan score higher, it may be due to those students having more resources to exceed. For example, they may not have worries such as making sure they have enough to eat, taking tests while hungry, etc. In addition, some may even have private tutors or some sort of afterschool class to help them improve their scores. In contrast, students on a free\/reduced lunch plan may not have the funds to access those resources, and may even be in a worse physical condition than those on a standard lunch plan when taking the tests.","89d21fa2":"## Percentage of Students with Parents Having a Degree That Completed a Test Preparation Course\n","b2c71588":"## Analysis Based on Race","6dadbbe2":"## Analysis on Lunch Plan (Income) and Student Scores","02aa4556":"## Analysis Based on Completion of Test Preparation Course","8c6aa6e8":"## Percentage of Students per Group That Completed a Test Preparation Course","7d044c5f":"On average, it seems that group E scores the highest on all three subjects and group A scores the lowest. Perhaps this is because group E has a larger percentage of people that took a test perparation course. \n\nIt will be interesting to see later on if the students that completed the test preparation course have higher scores, and whether or not group E has the highest percentage of students that completed the course.","faec295b":"Using a logistic regression will perform slightly better than if you were to just guess bin 3 for each student. However, it is not too noticeable a difference, and it is likely that regardless of a student's background, they will score roughly within the same 60-80 range.","7deb7b8c":"If you just randomly guess a group, you have a 1\/5 chance of getting it correct, so using Logistic Regression may be beneficial. However, since the majority of students fall in bin 3 (60-80), it is important to take into account what the accuracy of only guessing bin 3 is for each subject.","0f342d9c":"## Analysis on Parent's Educational Background and Student Scores","d6c32b67":"## Summary\nThere are many factors that seem to affect a students performance. For example, on average, a student is expected to do better if they take a test preparation course, if they are on a standard lunch plan, and if their parents have a degree. In addition, the average male performed better than the average female in the math section while the females outperformed the males in the reading and writing sections.\n\nAs for using machine learning to predict scores, the Logistic Regression model was used, and it performed slightly better than just picking the most frequent bin (bin 3). However, bin 3 encompasses a signficant range of scores from D- to almost B- (60-80). Therefore, since the accuracy score only slightly increased, and the score range that the model predicts is significantly wide, the results of the logistic regression model used in this study may not be too useful.","fab9487b":"## Analysis Based on Gender"}}