{"cell_type":{"540d182a":"code","171fc9d8":"code","6690e03f":"code","ab356709":"code","4e454154":"code","39a0c92e":"code","b36764c7":"code","60dc4e28":"code","a51c3287":"code","cb641a54":"code","390ccbc7":"code","c81226bc":"code","279505de":"code","d1c11038":"code","a29cc267":"code","f928f5cc":"code","da94ce82":"code","3b512530":"code","0ed2b95b":"code","b798b802":"code","daff568f":"code","42ed4ad9":"code","d76f7cd7":"code","db05b427":"code","3529c044":"code","e3452149":"code","cca278f6":"markdown","f14b8ce4":"markdown","cd526302":"markdown","e0187c67":"markdown","0183a2e6":"markdown","bbd5cc4e":"markdown","8f817a91":"markdown","77a9ffdd":"markdown","c16f3f4b":"markdown","1234e404":"markdown","c3ad94e1":"markdown","8a9b6890":"markdown","da94f61b":"markdown"},"source":{"540d182a":"import plotly as py\nfrom plotly import graph_objects as go\nfrom plotly import express as px\nfrom matplotlib import pyplot as plt\npy.offline.init_notebook_mode(connected=False)\nimport seaborn as sns\nimport pandas as pd\nimport numpy as np","171fc9d8":"covid_df = pd.read_csv(r\"..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv\")\ngeo_data= pd.read_csv(r\"..\/input\/geo-data\/geo_data.csv\") # for Geographical Analysis","6690e03f":"countries = pd.Series(covid_df.country.unique())\ncountries_missing = ~countries.isin(geo_data.country_name.unique())\ncountries[countries_missing]","ab356709":"UK = [\"Anguilla\",\"Bermuda\", \"Cayman Islands\",\"England\",\"Saint Helena\",\"Saint Lucia\",\"Scotland\",\n      \"Wales\",\"Montserrat\",\"Falkland Islands\",\"Gibraltar\",\"Turks and Caicos Islands\",\"Guernsey\",\n      \"Northern Ireland\",\"Isle of Man\",\"Jersey\"]\nothers = {\"Faeroe Islands\":\"Denmark\",\"Greenland\":\"Denmark\",\n          \"Hong Kong\":\"Hong Kong, China\",\"Northern Cyprus\":\"Cyprus\"}\nval_to_replace = {region:\"United Kingdom\" for region in UK}\nval_to_replace.update(others)","4e454154":"def value_replace(country):\n    if country in val_to_replace.keys():\n        country = val_to_replace[country]\n    return country","39a0c92e":"covid_df[\"country_name\"] = covid_df.country.apply(value_replace)","b36764c7":"vac_df = covid_df.merge(geo_data,left_on=\"country_name\",right_on=\"country_name\")\nvac_df.head(4)","60dc4e28":"vac_df.isna().sum()\/len(vac_df) * 100","a51c3287":"vacn_prcur = vac_df.groupby(\"country_name\")[\"total_vaccinations\"].max().sort_values(ascending=False)\npx.bar(vacn_prcur,title=\"Total Vaccines Procured by country\")","cb641a54":"vac_df.geo = vac_df.geo.str.upper()\nvacn_prcur = vac_df.groupby([\"country_name\",\"geo\"])[\"total_vaccinations\"].max().reset_index()","390ccbc7":"col_scale = px.colors.colorbrewer.Paired_r\nfig = px.choropleth(vacn_prcur,locations=\"geo\",color=\"total_vaccinations\",\n             color_continuous_scale=col_scale,projection='natural earth',hover_name=\"country_name\")\ntext=\"Total Vaccines Procured by country\"\ntitle = dict(text=text,xanchor=\"center\",yanchor=\"top\",y=0.90,x=0.5,font=dict(size=18,color=\"black\"))\nfig.update_layout(title=title)\nfig.update_geos(fitbounds=\"locations\", visible=True)\nfig.show()","c81226bc":"peop_vacn = vac_df.groupby(\"country_name\")[[\"people_vaccinated\",\"people_fully_vaccinated\"]].max(\n            ).sort_values(by=\"people_vaccinated\",ascending=False).reset_index()\ncolor_map={\"people_vaccinated\":\"#6a777d\",\"people_fully_vaccinated\":\"#3936ff\"}\ntitle_1 = \"People vaccinated (first dose) vs People fully vaccinated\"\npx.bar(peop_vacn[:30],x=\"country_name\",y=[\"people_vaccinated\",\"people_fully_vaccinated\"],\n      title=title_1,color_discrete_map=color_map)","279505de":"px.bar?","d1c11038":"group_by = [\"four_regions\",\"country_name\"]\nfour_reg = vac_df.groupby(group_by)[[\"people_vaccinated\",\"people_fully_vaccinated\"]].max(\n            ).sort_values(by=\"people_vaccinated\",ascending=False).reset_index()\ntitle_2 = \"People vaccinated (first dose) vs People fully vaccinated region wise\"\npx.bar(four_reg,x=\"four_regions\",y=[\"people_vaccinated\",\"people_fully_vaccinated\"],\n       title=title_2,width=650,height=400,hover_name=\"country_name\")","a29cc267":"group_by = [\"eight_regions\",\"country_name\"]\neight_reg = vac_df.groupby(group_by)[[\"people_vaccinated\",\"people_fully_vaccinated\"]].max(\n            ).sort_values(by=\"people_vaccinated\",ascending=False).reset_index()\npx.bar(eight_reg,x=\"eight_regions\",y=[\"people_vaccinated\",\"people_fully_vaccinated\"],\n       title=title_2,width=800,height=500,hover_name=\"country_name\",\n      color_continuous_scale=px.colors.colorbrewer.Paired_r)","f928f5cc":"group_by = [\"country_name\",\"income_groups\"]\nincome_wise = vac_df.groupby(group_by)[[\"people_vaccinated\",\"people_fully_vaccinated\"]].max(\n            ).sort_values(by=\"people_vaccinated\",ascending=False).reset_index()\ntitle_3 = \"People vaccinated (first dose) vs People fully vaccinated income groups wise\"\npx.bar(income_wise,x=\"income_groups\",y=[\"people_vaccinated\",\"people_fully_vaccinated\"],\n       title=title_3,width=700,height=400,hover_name=\"country_name\")","da94ce82":"vac_100 = vac_df.groupby([\"country\",\"geo\"])[\"total_vaccinations_per_hundred\"].max().reset_index()\ncol_scale =        px.colors.colorbrewer.Paired_r\nfig = px.choropleth(vac_100,locations=\"geo\",color=\"total_vaccinations_per_hundred\",\n             color_continuous_scale=col_scale,projection='natural earth',hover_name=\"country\",\n                   range_color=[0,50],color_continuous_midpoint=20)\ntext=\"Number of people vaccinated out of 100\"\ntitle = dict(text=text,xanchor=\"center\",yanchor=\"top\",y=0.90,x=0.45,font=dict(size=18,color=\"black\"))\nfig.update_layout(title=title)\nfig.update_geos(fitbounds=\"locations\", visible=True)\nfig.show()","3b512530":"vaccines = vac_df[[\"country\",\"vaccines\"]].drop_duplicates()[\"vaccines\"].value_counts().sort_values(\n           ascending=True)","0ed2b95b":"title_4 = \"Number of Countries using a particular Vaccination Scheme\"\nlabel = dict(value=\"Number of Countries\",index=\"Vaccine Scheme\")\nfig=px.bar(vaccines,orientation=\"h\",title=title_4,height=700,labels=label,width=1000)\ntitle = dict(xanchor=\"center\",yanchor=\"top\",y=0.90,x=0.45,font=dict(size=18,color=\"black\"))\nfig.update_layout(title=title)","b798b802":"columns = [\"country_name\",\"world_bank_regions\",\"income_groups\",\"geo\",\"vaccines\"]\nvaccines = vac_df[columns].drop_duplicates().reset_index(drop=True)\nvac_2 = vaccines.set_index(columns[:4]).vaccines.str.split(\",\",expand=True)\nvac_2 = vac_2.melt(ignore_index=False,value_name=\"Vaccines\").dropna()[\"Vaccines\"].reset_index()\nvac_2.Vaccines = vac_2.Vaccines.str.strip()","daff568f":"print(F\"There are {vac_2.Vaccines.nunique()} Vaccines available\") ","42ed4ad9":"def vaccines_count(df,groupby,sort_col=\"count\",sort_order=False,colname=\"count\"):\n    vac_count = df.groupby(groupby).size().reset_index(name=colname)\n    vac_count = vac_count.sort_values(by=sort_col,ascending=sort_order)\n    return vac_count","d76f7cd7":"country_per_vac = vaccines_count(vac_2,groupby=\"Vaccines\",sort_order=True)\nvac_count_by_country = vaccines_count(vac_2,groupby=\"country_name\")\nregions_wise =  vaccines_count(vac_2,groupby=[\"Vaccines\",\"world_bank_regions\"]) \ninc_wise = vaccines_count(vac_2,groupby=[\"Vaccines\",\"income_groups\"]) ","db05b427":"label=\"No of Countries\"\ntitle = \"Countries count by Vaccines\"\npx.bar(country_per_vac,y=\"Vaccines\",x=\"count\",orientation=\"h\",\n       color_discrete_map={0:\"red\"},labels={\"value\":label},title=title)","3529c044":"plot_title = \"Countries Count by region\"\npx.bar(regions_wise,x=\"world_bank_regions\",y=\"count\",color=\"Vaccines\",barmode=\"relative\",height=450,\n  title=plot_title)","e3452149":"plot_title = \"Countries Count by Income groups\"\npx.bar(inc_wise,x=\"income_groups\",y=\"count\",color=\"Vaccines\",barmode=\"relative\",height=600,\n width=700,title=plot_title)","cca278f6":"# Breaking down analysis by Vaccines","f14b8ce4":"# Seggerating Analysis by Individual vaccine ","cd526302":"### Merging both dataset","e0187c67":"# How many people have been vaccinated at country level? ","0183a2e6":"## Importing Libraries","bbd5cc4e":"# Vaccines Available","8f817a91":"# Numbers Countries per Vaccines","77a9ffdd":"## Loading Dataset","c16f3f4b":"# By Income Level","1234e404":"### Labeling overseas terroties with respective country","c3ad94e1":"# Top countries by Vaccines Procurement","8a9b6890":"# Maping the Vaccination Scorecard","da94f61b":"# Vaccination scorecard Region wise"}}