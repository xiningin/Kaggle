{"cell_type":{"d08689e3":"code","f30828f7":"code","af8dfcea":"code","f592ec6c":"code","024a64d1":"code","3d10a958":"markdown","685a71a3":"markdown","4e39ed2f":"markdown","95cbc9e0":"markdown"},"source":{"d08689e3":"import numpy as np\nimport pandas as pd\nimport plotly.express as px\n\ndef return_avg_result(dataframe, university, department, year, measurement):\n    new_df = pd.DataFrame()\n    dataframe = dataframe[dataframe['Academic Year'].isin([year])]\n    dataframe = dataframe[dataframe['University'].isin([university])]\n    smaller_dataframe = dataframe[dataframe['Department'].isin([department])]\n    new_df.loc[university+' All Departments'+' '+YEAR,'mean'] = dataframe.loc[:,measurement].mean(axis=0)\n    new_df.loc[university+' All Departments'+' '+YEAR,'std'] = dataframe.loc[:,measurement].std(axis=0)\n    new_df.loc[university+' All Departments'+' '+YEAR,'count'] = dataframe.loc[:,measurement].shape[0]\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'mean'] = smaller_dataframe.loc[:,measurement].mean(axis=0)\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'std'] = smaller_dataframe.loc[:,measurement].std(axis=0)\n    new_df.loc[university+' '+department+' Department'+' '+YEAR,'count'] = smaller_dataframe.loc[:,measurement].shape[0]\n    #print(measurement+' at '+university+' in '+year+':\\n')\n    return new_df\n\ndef return_popular_universities(dataframe,number_of_values):\n    popular_universities = pd.DataFrame(dataframe['University'].value_counts()[1:number_of_values])\n    #print('Number of Records Per University (Top '+str(number_of_values)+'):\\n')\n    return popular_universities\n\ndef return_popular_departments(dataframe,university,number_of_values):\n    dataframe = dataframe[dataframe['University'].isin([university])]\n    popular_departments = pd.DataFrame(dataframe['Department'].value_counts()[0:number_of_values])\n    #print('Number of Records Per Department at '+UNIVERSITY+' (Top '+str(number_of_values)+'): \\n')\n    return popular_departments","f30828f7":"PHD_STIPENDS = pd.read_csv('\/kaggle\/input\/phd-stipends\/csv') # load the data\nPHD_STIPENDS['Overall Pay'].replace(regex=True,inplace=True,to_replace=r'\\D',value=r'') # remove $ sign from column\nPHD_STIPENDS['Overall Pay'] = PHD_STIPENDS['Overall Pay'].astype(float).fillna(0) # convert column to float\nPHD_STIPENDS[['University','Department','Overall Pay','LW Ratio']].head(10) # preview the data","af8dfcea":"df = return_popular_universities(PHD_STIPENDS,number_of_values = 10)\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['University','Number of Records']\nfig = px.bar(df, x='University', y=\"Number of Records\",title='Number of Records Per University (Top 10)')\nfig.update(layout=dict(xaxis_title='University',yaxis_title='Number of Records',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,140])\nfig.show()","f592ec6c":"UNIVERSITY = 'University of Oxford'\ndf = return_popular_departments(PHD_STIPENDS, UNIVERSITY,number_of_values = 10)\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['Department','Number of Records']\nfig = px.bar(df, x='Department', y=\"Number of Records\",title='Number of Records Per Department at '+UNIVERSITY+' (Top 10)')\nfig.update(layout=dict(xaxis_title='Department',yaxis_title='Number of Records',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,2])\nfig.show()","024a64d1":"UNIVERSITY = 'University of Oxford'\nYEAR = '2019-2020'\nMEASUREMENT = 'Overall Pay'\nDEPARTMENT = 'Chemistry'\ndf = return_avg_result(PHD_STIPENDS, UNIVERSITY, DEPARTMENT, YEAR, MEASUREMENT)\n\ndf.reset_index(level=0, inplace=True)\ndf.columns=['Cohort','Avg','Std','n']\nfig = px.bar(df, x='Cohort', y=\"Avg\",error_y=\"Std\",title='Average Overall Pay at '+UNIVERSITY)\nfig.update(layout=dict(xaxis_title='Cohort',yaxis_title='Average Overall Pay',legend_orientation=\"h\",showlegend=True))\nfig.update_yaxes(range=[0,25000])\nfig.show()","3d10a958":"*Step 2: Load and preview the data*","685a71a3":"*Step 1: Import Python packages and define helper functions*","4e39ed2f":"# What is the average PhD stipend at Oxford University?","95cbc9e0":"*Step 3: Visualize the data for Oxford University only*"}}