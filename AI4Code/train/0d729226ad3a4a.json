{"cell_type":{"f86351ec":"code","a7943207":"code","0cf9af8c":"code","06dadd46":"code","14faadc5":"code","8ca12bcd":"code","2a5808e6":"code","c4f8a2fa":"code","b8e0413b":"code","848c2c9d":"code","f50689a2":"code","30587193":"code","473d3ba7":"code","399c725b":"code","0844fbab":"code","d9345a14":"code","c76e70c3":"code","eab08e41":"code","cc610f61":"code","764eb188":"code","97b6b090":"code","c173a2e2":"code","380f22fb":"code","bfd198f3":"code","53a13338":"code","75b7ef0e":"code","6b5eb48a":"code","a904ba43":"code","fff33062":"code","fba62dd3":"code","656cfbf3":"code","1a730976":"code","47eed337":"code","f34e3078":"code","3f571aeb":"code","2eb92962":"code","b853ddfe":"code","c5f84dc7":"code","31a4423d":"code","64025b85":"code","f58d2096":"code","1a075b65":"code","8f76e0c3":"markdown","2c6a417a":"markdown","b2081be7":"markdown","e5316758":"markdown","18652328":"markdown","08ec458c":"markdown","4742d231":"markdown","6cf6d5b1":"markdown","f0a387b3":"markdown","b78690eb":"markdown","b187b8ae":"markdown","97adf5d3":"markdown","c29eecee":"markdown","cf0067e4":"markdown","7fc6b40a":"markdown","0f90a5a9":"markdown","3a3cb179":"markdown","84e6fa85":"markdown","caaf6854":"markdown","af44201e":"markdown","941dfdcd":"markdown","1e2d8776":"markdown","812c7fac":"markdown","9c61879c":"markdown","0d345b99":"markdown","abf92b66":"markdown","dd9dc1ea":"markdown","55c1fece":"markdown","f080d0ed":"markdown","3beee424":"markdown","4bfaa244":"markdown","9a4bf2b0":"markdown","2fd2db6e":"markdown","2b83daa9":"markdown","a3998d51":"markdown","7b331a0a":"markdown","0a161239":"markdown","abec9a96":"markdown","e9d5e327":"markdown","378a8d71":"markdown","30aaafdb":"markdown","70498902":"markdown","6944aa48":"markdown"},"source":{"f86351ec":"# Load common libraries:\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport folium\n\n\n# set some display options:\nsns.set(style=\"whitegrid\")\npd.set_option(\"display.max_columns\", 36)","a7943207":"# load data:\nfile_path = \"..\/input\/hotel-booking-demand\/hotel_bookings.csv\"\nfull_data = pd.read_csv(file_path)","0cf9af8c":"full_data.shape","06dadd46":"full_data.head()\n#full_data.tail()","14faadc5":"full_data.info()","8ca12bcd":"full_data.hotel.unique()","2a5808e6":"t = pd.DataFrame([[i,full_data[i].unique()] for i in full_data.columns])\nt.columns = ['name','unique']\nt   ","c4f8a2fa":"full_data.describe(include='all')","b8e0413b":"# check for missing values\nfull_data.isnull().sum()","848c2c9d":"# Replace missing values:\nnan_replacements = {\"children\": 0.0, \"country\": \"Unknown\", \"agent\": 0, \"company\": 0}\nfull_data_cln = full_data.fillna(nan_replacements)\n\n# \"meal\" contains values \"Undefined\", which is equal to SC.\nfull_data_cln[\"meal\"].replace(\"Undefined\", \"SC\", inplace=True)","f50689a2":"# check for missing values\nprint('Remaining Missing Values = ',full_data_cln.isna().sum().sum())","30587193":"zero_guests = list(full_data_cln.loc[full_data_cln[\"adults\"]\n                   + full_data_cln[\"children\"]\n                   + full_data_cln[\"babies\"]==0].index)\nzero_guests","473d3ba7":"full_data_cln.drop(full_data_cln.index[zero_guests], inplace=True)","399c725b":"# How much data is left?\nfull_data_cln.shape","0844fbab":"t = pd.DataFrame([[i,full_data[i].unique()] for i in full_data_cln.columns])\nt.columns = ['name','unique']\nt   ","d9345a14":"full_data_cln[full_data_cln['babies'] > 8]","c76e70c3":"full_data_cln[full_data_cln['children'] > 8]","eab08e41":"full_data_cln[full_data_cln['required_car_parking_spaces'] > 7]","cc610f61":"ax = sns.boxplot(x=full_data_cln['adr'])","764eb188":"# Deleting a record with ADR greater than 5000\nfull_data_cln = full_data_cln[full_data_cln['adr'] < 5000]\nax = sns.boxplot(x=full_data_cln['adr'])","97b6b090":"full_data_cln['hotel'].value_counts()","c173a2e2":"rh = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"Resort Hotel\") & (full_data_cln[\"is_canceled\"] == 0)]\nch = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"City Hotel\") & (full_data_cln[\"is_canceled\"] == 0)]","380f22fb":"# get number of acutal guests by country\ncountry_data = pd.DataFrame(full_data_cln.loc[full_data_cln[\"is_canceled\"] == 0][\"country\"].value_counts())\ncountry_data.index.name = \"country\"\ncountry_data.rename(columns={\"country\": \"Number of Guests\"}, inplace=True)\ntotal_guests = country_data[\"Number of Guests\"].sum()\ncountry_data[\"Guests in %\"] = round(country_data[\"Number of Guests\"] \/ total_guests * 100, 2)\ncountry_data.head()","bfd198f3":"# show on map\nguest_map = px.choropleth(country_data,\n                    locations=country_data.index,\n                    color=country_data[\"Guests in %\"], \n                    hover_name=country_data.index, \n                    color_continuous_scale=px.colors.sequential.Plasma,\n                    title=\"Home country of guests\")\nguest_map.show()","53a13338":"plt.rcParams['figure.figsize'] = 15,6\nplt.hist(full_data_cln['lead_time'], bins=50)\n\nplt.ylabel('Count')\nplt.xlabel('Time (days)')\nplt.title(\"Lead time distribution \", fontdict=None, position= [0.48,1.05])\nplt.show()","75b7ef0e":"rh[\"adr\"].describe()","6b5eb48a":"ch[\"adr\"].describe()","a904ba43":"full_data_guests = full_data_cln.loc[full_data_cln[\"is_canceled\"] == 0] # only actual gusts\nroom_prices = full_data_guests[[\"hotel\", \"reserved_room_type\", \"adr\"]].sort_values(\"reserved_room_type\")\n\n# barplot with standard deviation:\nplt.figure(figsize=(12, 8))\nsns.barplot(x = \"reserved_room_type\", y=\"adr\", hue=\"hotel\", data=room_prices, \n            hue_order = [\"City Hotel\", \"Resort Hotel\"], ci=\"sd\", errwidth=1, capsize=0.2)\nplt.title(\"Price of room types per night\", fontsize=16)\nplt.xlabel(\"Room type\", fontsize=16)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.show()","fff33062":"full_data_guests['total_guests'] = full_data_guests['adults']+ full_data_guests['children']+ full_data_guests['babies']\nplt.figure(figsize=(12,8))\nax = sns.countplot(x=\"total_guests\", data = full_data_guests)\nplt.title('Number of Guests')\nplt.xlabel('total_guests')\nplt.ylabel('Count')\nfor p in ax.patches:\n    ax.annotate((p.get_height()),(p.get_x()+0.1 , p.get_height()+100)) ","fba62dd3":"# normalize price per night (adr):\nfull_data_cln[\"adr_pp\"] = full_data_cln[\"adr\"] \/ (full_data_cln[\"adults\"] + full_data_cln[\"children\"])\nfull_data_guests = full_data_cln.loc[full_data_cln[\"is_canceled\"] == 0] # only actual gusts\nroom_prices = full_data_guests[[\"hotel\", \"reserved_room_type\", \"adr_pp\"]].sort_values(\"reserved_room_type\")\n\n# barplot with standard deviation:\nplt.figure(figsize=(12, 8))\nsns.barplot(x = \"reserved_room_type\", y=\"adr_pp\", hue=\"hotel\", data=room_prices, \n            hue_order = [\"City Hotel\", \"Resort Hotel\"], ci=\"sd\", errwidth=1, capsize=0.2)\nplt.title(\"Price of room types per night and person\", fontsize=16)\nplt.xlabel(\"Room type\", fontsize=16)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.show()","656cfbf3":"# grab data:\nroom_prices_mothly = full_data_guests[[\"hotel\", \"arrival_date_month\", \"adr\"]].sort_values(\"arrival_date_month\")\n\n# order by month:\nordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nroom_prices_mothly[\"arrival_date_month\"] = pd.Categorical(room_prices_mothly[\"arrival_date_month\"], categories=ordered_months, ordered=True)\n\n# barplot with standard deviation:\nplt.figure(figsize=(12, 6))\nsns.lineplot(x = \"arrival_date_month\", y=\"adr\", hue=\"hotel\", data=room_prices_mothly, \n            hue_order = [\"City Hotel\", \"Resort Hotel\"], ci=\"sd\", size=\"hotel\", sizes=(2.5, 2.5))\nplt.title(\"Room price per night over the year\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.xticks(rotation=45)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.show()","1a730976":"# Create a DateFrame with the relevant data:\nresort_guests_monthly = rh.groupby(\"arrival_date_month\")[\"hotel\"].count()\ncity_guests_monthly = ch.groupby(\"arrival_date_month\")[\"hotel\"].count()\n\nresort_guest_data = pd.DataFrame({\"month\": list(resort_guests_monthly.index),\n                    \"hotel\": \"Resort hotel\", \n                    \"guests\": list(resort_guests_monthly.values)})\n\ncity_guest_data = pd.DataFrame({\"month\": list(city_guests_monthly.index),\n                    \"hotel\": \"City hotel\", \n                    \"guests\": list(city_guests_monthly.values)})\nfull_guest_data = pd.concat([resort_guest_data,city_guest_data], ignore_index=True)\n\n# order by month:\nordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nfull_guest_data[\"month\"] = pd.Categorical(full_guest_data[\"month\"], categories=ordered_months, ordered=True)\n\n# Dataset contains July and August date from 3 years, the other months from 2 years. Normalize data:\nfull_guest_data.loc[(full_guest_data[\"month\"] == \"July\") | (full_guest_data[\"month\"] == \"August\"),\n                    \"guests\"] \/= 3\nfull_guest_data.loc[~((full_guest_data[\"month\"] == \"July\") | (full_guest_data[\"month\"] == \"August\")),\n                    \"guests\"] \/= 2\n\n# show figure:\nplt.figure(figsize=(12, 6))\nsns.lineplot(x = \"month\", y=\"guests\", hue=\"hotel\", data=full_guest_data, \n             hue_order = [\"City hotel\", \"Resort hotel\"], size=\"hotel\", sizes=(2.5, 2.5))\nplt.title(\"Average number of hotel guests per month\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.xticks(rotation=45)\nplt.ylabel(\"Number of guests\", fontsize=16)\nplt.show()","47eed337":"from datetime import datetime\n\ndef month_converter(month):\n    months = ['January', 'February', 'March', 'April', 'May', 'June','July', 'August', 'September', 'October', 'November', 'December']\n    return months.index(month) + 1\n\nrh_arr = rh\nrh_arr['arrival_month'] = rh_arr['arrival_date_month'].apply(month_converter)\nrh_arr['arrival_year_month'] = rh_arr['arrival_date_year'].astype(str) + \" _ \" + rh_arr['arrival_month'].astype(str)\nrh_arr['Arrrival Date'] = rh_arr.apply(lambda row: datetime.strptime(f\"{int(row.arrival_date_year)}-{int(row.arrival_month)}-{int(row.arrival_date_day_of_month)}\", '%Y-%m-%d'), axis=1)\nrh_arr['arrival_day_of_week'] = rh_arr['Arrrival Date'].dt.day_name()\nweekdays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"]\nrh_arr['arrival_day_of_week'] = pd.Categorical(rh_arr['arrival_day_of_week'],categories = weekdays)\narrivals = pd.pivot_table(rh_arr,columns = 'arrival_day_of_week',index = 'arrival_month',values = 'reservation_status',aggfunc = 'count')","f34e3078":"fig, ax = plt.subplots(figsize = (16,11))\nax = sns.heatmap(arrivals, annot=True, fmt=\"d\", cmap = 'rocket_r')","3f571aeb":"# Create a DateFrame with the relevant data:\nrh[\"total_nights\"] = rh[\"stays_in_weekend_nights\"] + rh[\"stays_in_week_nights\"]\nch[\"total_nights\"] = ch[\"stays_in_weekend_nights\"] + ch[\"stays_in_week_nights\"]\n\nnum_nights_res = list(rh[\"total_nights\"].value_counts().index)\nnum_bookings_res = list(rh[\"total_nights\"].value_counts())\nrel_bookings_res = rh[\"total_nights\"].value_counts() \/ sum(num_bookings_res) * 100 # convert to percent\n\nnum_nights_cty = list(ch[\"total_nights\"].value_counts().index)\nnum_bookings_cty = list(ch[\"total_nights\"].value_counts())\nrel_bookings_cty = ch[\"total_nights\"].value_counts() \/ sum(num_bookings_cty) * 100 # convert to percent\n\nres_nights = pd.DataFrame({\"hotel\": \"Resort hotel\",\n                           \"num_nights\": num_nights_res,\n                           \"rel_num_bookings\": rel_bookings_res})\n\ncty_nights = pd.DataFrame({\"hotel\": \"City hotel\",\n                           \"num_nights\": num_nights_cty,\n                           \"rel_num_bookings\": rel_bookings_cty})\n\nnights_data = pd.concat([res_nights, cty_nights], ignore_index=True)","2eb92962":"# show figure:\nplt.figure(figsize=(16, 6))\nsns.barplot(x = \"num_nights\", y = \"rel_num_bookings\", hue=\"hotel\", data=nights_data,\n            hue_order = [\"City hotel\", \"Resort hotel\"])\nplt.title(\"Length of stay\", fontsize=16)\nplt.xlabel(\"Number of nights\", fontsize=16)\nplt.ylabel(\"Guests [%]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.show()","b853ddfe":"avg_nights_res = sum(list((res_nights[\"num_nights\"] * (res_nights[\"rel_num_bookings\"]\/100)).values))\navg_nights_cty = sum(list((cty_nights[\"num_nights\"] * (cty_nights[\"rel_num_bookings\"]\/100)).values))\nprint(f\"On average, guests of the City hotel stay {avg_nights_cty:.2f} nights, and {cty_nights['num_nights'].max()} at maximum.\")\nprint(f\"On average, guests of the Resort hotel stay {avg_nights_res:.2f} nights, and {res_nights['num_nights'].max()} at maximum.\")","c5f84dc7":"plt.figure(figsize=(12,6))\nax = sns.countplot(x=\"market_segment\", data=full_data_cln, order = full_data_cln['market_segment'].value_counts().index)\nplt.title('Market Segment')\nplt.xlabel('market_segment')\nplt.ylabel('Count')\nfor p in ax.patches:\n    ax.annotate((p.get_height()),(p.get_x()+0.2 , p.get_height()+100)) ","31a4423d":"plt.figure(figsize=(12,6))\nax = sns.countplot(x=\"distribution_channel\", data=full_data_cln, order = full_data_cln['distribution_channel'].value_counts().index)\nplt.title('Distribution Channel')\nplt.xlabel('distribution_channel')\nplt.ylabel('Count')","64025b85":"plt.figure(figsize=(12,6))\nax = sns.countplot(x=\"is_repeated_guest\", data = full_data_cln)\nplt.title('Is Repeated Guest?')\nplt.xlabel('is_repeated_guest')\nplt.ylabel('Total Count')","f58d2096":"# absolute cancelations:\ntotal_cancelations = full_data_cln[\"is_canceled\"].sum()\nrh_cancelations = full_data_cln.loc[full_data_cln[\"hotel\"] == \"Resort Hotel\"][\"is_canceled\"].sum()\nch_cancelations = full_data_cln.loc[full_data_cln[\"hotel\"] == \"City Hotel\"][\"is_canceled\"].sum()\n\n# as percent:\nrel_cancel = total_cancelations \/ full_data_cln.shape[0] * 100\nrh_rel_cancel = rh_cancelations \/ full_data_cln.loc[full_data_cln[\"hotel\"] == \"Resort Hotel\"].shape[0] * 100\nch_rel_cancel = ch_cancelations \/ full_data_cln.loc[full_data_cln[\"hotel\"] == \"City Hotel\"].shape[0] * 100\n\nprint(f\"Total bookings canceled: {total_cancelations:,} ({rel_cancel:.0f} %)\")\nprint(f\"Resort hotel bookings canceled: {rh_cancelations:,} ({rh_rel_cancel:.0f} %)\")\nprint(f\"City hotel bookings canceled: {ch_cancelations:,} ({ch_rel_cancel:.0f} %)\")","1a075b65":"# Create a DateFrame with the relevant data:\nres_book_per_month = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"Resort Hotel\")].groupby(\"arrival_date_month\")[\"hotel\"].count()\nres_cancel_per_month = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"Resort Hotel\")].groupby(\"arrival_date_month\")[\"is_canceled\"].sum()\n\ncty_book_per_month = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"hotel\"].count()\ncty_cancel_per_month = full_data_cln.loc[(full_data_cln[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"is_canceled\"].sum()\n\nres_cancel_data = pd.DataFrame({\"Hotel\": \"Resort Hotel\",\n                                \"Month\": list(res_book_per_month.index),\n                                \"Bookings\": list(res_book_per_month.values),\n                                \"Cancelations\": list(res_cancel_per_month.values)})\ncty_cancel_data = pd.DataFrame({\"Hotel\": \"City Hotel\",\n                                \"Month\": list(cty_book_per_month.index),\n                                \"Bookings\": list(cty_book_per_month.values),\n                                \"Cancelations\": list(cty_cancel_per_month.values)})\n\nfull_cancel_data = pd.concat([res_cancel_data, cty_cancel_data], ignore_index=True)\nfull_cancel_data[\"cancel_percent\"] = full_cancel_data[\"Cancelations\"] \/ full_cancel_data[\"Bookings\"] * 100\n\n# order by month:\nordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nfull_cancel_data[\"Month\"] = pd.Categorical(full_cancel_data[\"Month\"], categories=ordered_months, ordered=True)\n\n# show figure:\nplt.figure(figsize=(12, 8))\nsns.barplot(x = \"Month\", y = \"cancel_percent\" , hue=\"Hotel\",\n            hue_order = [\"City Hotel\", \"Resort Hotel\"], data=full_cancel_data)\nplt.title(\"Cancelations per month\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.ylabel(\"Cancelations [%]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.show()","8f76e0c3":"This looks better..","2c6a417a":"### Preliminaries..","b2081be7":"### Q8. Do guests come back?","e5316758":"### Load the data","18652328":"The [Hotel booking demand](https:\/\/www.kaggle.com\/jessemostipak\/hotel-booking-demand) dataset has originally been described in [Antonio et al. (2019): Hotel booking demand datasets](https:\/\/doi.org\/10.1016\/j.dib.2018.11.126.). It was cleaned by Thomas Mock and Antoine Bichat for #TidyTuesday during the week of February 11th, 2020.\n\nIt contains booking data (31 variables) on two hotels in Portugal:\n - **H1:** a resort hotel at the Algarve (40,060 observations)\n - **H2:** a city hotel in Lisbon(79,330 observations)\n \nEach observation represents a hotel booking (due to arrive between July 1, 2015 and August 31, 2017), including **bookings that effectively arrived and bookings that were canceled**. \n\nThe data is from real hotel bookings, but all data pertaining to hotel or costumer identification have been deleted.","08ec458c":"These are the first 5 observations.\n\nHmm.. let's look at what columns we have available..","4742d231":"**Hmm.. these seem exceptional and maybe they are accurate, so let's let that slide..**","6cf6d5b1":"##### Occupancy","f0a387b3":"## Exploratory Data Analysis","b78690eb":"### Q4. How does the price per night vary over the year?","b187b8ae":"**So the resort hotel seems to be slightly more expensive, let's take a look at the room categories..**","97adf5d3":"### Check for outliers","c29eecee":"### Q5. Which are the busiest months?","cf0067e4":"## Preprocessing","7fc6b40a":"**Looks like there is data missing for `country`, `agent`, and `company`**\n\nThis is actually quite common and there are a lot of more or less sophisticated strategies of how to deal with missing data such as:\n - dropping the observations that have missing values\n - replace missing values with a specific value (e.g., mean replacement, use mode, i.e., most common value etc.)\n - impute missing values (e.g., carry last observation forward, hot deck methods etc.)\n\n\nWe have to make some assumptions here:\n - `agent` Let's assume that when no agency is given, the booking was made without one.\n - `company`: Same here - if there is none given, it was most likely private\n \n - `children`: replace four missing values with `0`\n - `country`: add a category for `Unknown`\n ","0f90a5a9":"# SDAH MODUL Seminar 3 : Hotel Bookings Part 1 - Exploratory Analysis\n\n\nThis notebook, prepared for a tutorial, is inspired by and partly adapted from:\n - [Factors influencing Hotel Booking - Quick Study](https:\/\/www.kaggle.com\/samiranbera\/factors-influencing-hotel-booking-quick-study) by [SamiranBera](https:\/\/www.kaggle.com\/samiranbera)\n - [EDA of bookings and ML to predict cancelations](https:\/\/www.kaggle.com\/marcuswingen\/eda-of-bookings-and-ml-to-predict-cancelations) by [Marcus Wingen](https:\/\/www.kaggle.com\/marcuswingen)\n - [EDA of Hotel Bookings](https:\/\/www.kaggle.com\/listonlt\/eda-of-hotel-bookings) by [Liston Tellis](https:\/\/www.kaggle.com\/listonlt)\n","3a3cb179":"Let's take a look at the variable descriptions from the paper:\n\n- `hotel`: `Resort Hotel` or `City Hotel` *(Categorical)*\n- `is_canceled` Value indicating if the booking was canceled (`1`) or not (`0`) *categorical*\n\n\n\n- `lead_time` Number of days that elapsed betweenthe entering date of the booking into the PMS and the arrival date\n- `arrival_date_year` Year of arrival date (Integer)\n- `arrival_date_month` Month of arrival date with 12 categories: `January` to `December` *(categorical)*\n- `arrival_date_week_number` Week number of the arrival date *(Integer)*\n- `arrival_date_day_of_month` Day of the month of the arrival date *(Integer)*\n\n\n\n- `stays_in_weekend_nights` Number of weekend nights (Saturday or Sunday) the guest stayed or booked to stay at the hotel *(Integer)*\n- `stays_in_week_nights` Number of week nights (Monday to Fri-day) the guest stayed or booked to stay at the hotel *(Integer)*\n\n\n\n- `adults` Number of adults *(Integer)*\n- `children` Number of children *(Integer)*\n- `babies` Number of Babies *(Integer)*\n- `meal` Type of meal booked. Categories arepresented in standard hospitality meal packages: \n    - `Undefined\/SC` - no meal package; \n    - `BB` \u2013 Bed & Breakfast; \n    - `HB` \u2013 Half board (breakfast and one other meal\u2013usually dinner); \n    - `FB` \u2013 Full board (breakfast, lunch and dinner)\n- `country` Country of origin. Categories are represented in the ISO 3155\u20133:2013 format *(Categorical)*\n\n- `market_segment` Market segment designation \n    - `TA` means TravelAgents and \n    - `TO` means TourOperators *(Categorical)*\n- `distribution_channel` Booking distribution channel \n    - `TA` means TravelAgents and \n    - `TO` means Tour Operators *Categorical)*\n\n\n\n- `is_repeated_guest` Value indicating if the booking namewas from a repeated guest (1) or not (0) *categorical*\n- `previous_cancellations` Number of previous bookings that werecancelled by the customer prior to the current booking *(Integer)*\n- `previous_bookings_not_canceled` Number of previous bookings notcancelled by the customer prior to thecurrent booking *(Integer)*\n\n\n- `reserved_room_type` Code of room type reserved. Code ispresented instead of designation for anonymity reasons\n- `assigned_room_type` Code for the type of room assigned to the booking. Sometimes the assigned roomtype differs from the reserved room typedue to hotel operation reasons (e.g.overbooking) or by customer request. Code is presented instead of designation for anonymity reasons. *(Catgorical)*\n\n\n- `booking_changes` Number of changes\/amendments madeto the booking from the moment thebooking was entered on the PMS untilthe moment of check-in or cancellation *(Integer)*\n- `deposit_type`\n\n\n\n- `agent` ID of the travel agency that made thebooking *(Categorical)*\n- `company` ID of the company\/entity that made thebooking or responsible for paying thebooking. ID is presented instead of des-ignation for anonymity reasons *(Categorical)*\n\n- `days_in_waiting_list` Number of days the booking was in thewaiting list before it was confirmed to the customer *(Integer)*\n- `customer_type` Type of booking, assuming one of four categories: \n    - `Contract` - when the booking has an allotment or other type of contract associated to it; \n    - `Group` \u2013 when the booking is asso-ciated to a group;\n    - `Transient` \u2013 when the booking is notpart of a group or contract, and is not associated to other transient booking;\n    - `Transient-party` \u2013 when the booking istransient, but is associated to at leastother transient booking\n\n- `adr` Average Daily Rate - Calculated by dividing the sum of all lodging transactions by the total number of staying nights *(Numeric)*\n- `required_car_parking_spaces` Number of car parking spaces requiredby the customer *(Integer)*\n- `total_of_special_requests` Number of special requests made by thecustomer (e.g. twin bed or highfloor) *(Integer)*\n- `reservation_status` Reservation last status, assuming one ofthree categories:\n    - `Canceled` - booking was canceled bythe customer;\n    - `Check-Out` - customer has checked inbut already departed;\n    - `No-Show` - customer did not check-in and did inform the hotel of the reason why\n- `reservation_status_date` Date at which the last status was set. This variable can be used in conjunction with the Reservation Status to understand when was the booking canceled or whendid the customer checked-out of the hotel *(Date)*\n\n**Note:** there are some differences between the original data set described in the paper and the dataset here:\n - in the paper, there is a separate data set for each hotel, which have been merged with an added column `hotel`\n - omission of redundant variables (e.g., Categorical and Integer versions of month)\n \n\nLet's see if that matches the data we have..","84e6fa85":"That looks better.. anything else that may not be plausible? Let's check the guests..","caaf6854":"Looks like we have \"ghost bookings\" (bookings for 0 adults, 0 children and 0 babies).. let's get rid of them..","af44201e":"- **For the city hotel there is a clear preference for 1-4 nights.**\n- **For the resort hotel, 1-4 nights are also often booked, but 7 nights also clearly stand out as being very popular.**","941dfdcd":"Looks like an outlier, let's get rid of it...","1e2d8776":"**People from all over the world stay in these two hotels. Most guests are from Portugal and other countries in Europe.**","812c7fac":"#  References\n[Nuno Antonio, Ana de Almeida, Luis Nunes: Hotel booking demand datasets, Data in Brief, Volume 22, 2019, p. 41-49](https:\/\/doi.org\/10.1016\/j.dib.2018.11.126.)","9c61879c":"This figure shows the average price per room, depending on its type and the standard deviation.\nNote that due to data anonymization rooms with the same type letter may not necessarily be the same across hotels.","0d345b99":"### Q10. Which months have the highest number of cancelations?","abf92b66":"### Q6. How long do people stay at the hotels?","dd9dc1ea":"Both hotels have different room types and different meal arrangements. Seasonal factors are also important. So the prices vary a lot.","55c1fece":"### Q7. Which are the most important market segments and booking channels?","f080d0ed":"**This clearly shows that the prices in the Resort hotel are much higher during the summer (no surprise here).**\n\n**The price of the city hotel varies less and is most expensive during spring and autumn.**","3beee424":"### Q1. Where do guests come from?","4bfaa244":"### Q3. How much do they pay for a room per night?","9a4bf2b0":"Let's start by formulating a few simple research questions:\n1. Where do the guests come from?\n1. When do they book?\n1. How much do guests pay for a room per night?\n1. How does the price per night vary over the year?\n1. Which are the busiest months?\n1. How long do people stay at the hotels?\n1. Which are the most important market segments and booking channels?\n1. Do guests come back?\n1. How many bookings were canceled?\n1. Which month have the highest number of cancelations?","2fd2db6e":"### Q9. How many bookings were canceled?","2b83daa9":"### Q2. When do they book?","a3998d51":"**Findings:**\n- The City hotel has more guests during spring and autumn, when the prices are also highest.\nIn July and August there are less visitors, although prices are lower.\n- Guest numbers for the Resort hotel go down slighty from June to September, which is also when the prices are highest.\n- Both hotels have the fewest guests during the winter.","7b331a0a":"### What about the continuous variables?","0a161239":"### Missing values","abec9a96":"To keep things simple, let's use the average ADR, regardless of the room type and meal.","e9d5e327":"- **For the City hotel the relative number of cancelations is around 40 % throughout the year.**\n- **For the Resort hotel it is highest in the summer and lowest during the winter.**","378a8d71":"**Phew, that's a lot of data and there are lot's of things that we can ask about it..**","30aaafdb":"**9\/10 babies; 10 children, 8 parking spaces seems a little excessive..**","70498902":"Let's separate the Resort and City hotel.\n\nFor now, we are interested in the actutal visitor numbers, so only bookings that were not canceled are included. ","6944aa48":"## Dataset description and initial assessment"}}