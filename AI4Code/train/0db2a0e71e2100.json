{"cell_type":{"6cae5b8e":"code","bf47eb48":"code","666d1c7c":"code","cba62346":"code","5b696cc7":"code","bb7febab":"code","8d23f83c":"code","926367df":"code","f8d601ca":"code","d45f7a0b":"code","4fca8969":"code","a0214ef8":"code","a82ad609":"code","7d9dbd36":"code","f8ddbeaf":"code","32b25861":"code","82a06cc8":"code","d2a9b8fd":"code","4122aaa7":"code","1c35d848":"code","7194460a":"code","ffd20e52":"markdown","8e7b7c5b":"markdown","435a2b36":"markdown","5ee32bb6":"markdown","d39bf3d2":"markdown","45e9f90c":"markdown","225b30e7":"markdown","f0d99c99":"markdown","4af5e6de":"markdown","894a2cc7":"markdown","f15f88ef":"markdown","bfd81581":"markdown","29089adc":"markdown","eddaedaa":"markdown","11006513":"markdown","3dfcf8d8":"markdown","86ae69e2":"markdown","f82e61b2":"markdown","1f1fbbdd":"markdown","69cef3e3":"markdown","a33ea0a0":"markdown","90fe38c9":"markdown","3f3307f0":"markdown","d0bc522b":"markdown"},"source":{"6cae5b8e":"import numpy as np\nimport pandas as pd","bf47eb48":"titanic_train = pd.read_csv(\"..\/input\/train.csv\")      # Read the data\n\nchar_cabin = titanic_train[\"Cabin\"].astype(str)    # Convert cabin to str\n\nnew_Cabin = np.array([cabin[0] for cabin in char_cabin]) # Take first letter\n\ntitanic_train[\"Cabin\"] = pd.Categorical(new_Cabin)  # Save the new cabin var","666d1c7c":"my_tab = pd.crosstab(index=titanic_train[\"Survived\"],  # Make a crosstab\n                     columns=\"count\")                  # Name the count column\n\nmy_tab","cba62346":"type(my_tab)             # Confirm that the crosstab is a DataFrame","5b696cc7":"pd.crosstab(index=titanic_train[\"Pclass\"],  # Make a crosstab\n            columns=\"count\")                # Name the count column","bb7febab":"pd.crosstab(index=titanic_train[\"Sex\"],     # Make a crosstab\n                      columns=\"count\")      # Name the count column","8d23f83c":"cabin_tab = pd.crosstab(index=titanic_train[\"Cabin\"],  # Make a crosstab\n                        columns=\"count\")               # Name the count column\n\ncabin_tab ","926367df":"titanic_train.Sex.value_counts()","f8d601ca":"print (cabin_tab.sum(), \"\\n\")   # Sum the counts\n\nprint (cabin_tab.shape, \"\\n\")   # Check number of rows and cols\n\ncabin_tab.iloc[1:7]             # Slice rows 1-6","d45f7a0b":"cabin_tab\/cabin_tab.sum()","4fca8969":"# Table of survival vs. sex\nsurvived_sex = pd.crosstab(index=titanic_train[\"Survived\"], \n                           columns=titanic_train[\"Sex\"])\n\nsurvived_sex.index= [\"died\",\"survived\"]\n\nsurvived_sex","a0214ef8":"# Table of survival vs passenger class\nsurvived_class = pd.crosstab(index=titanic_train[\"Survived\"], \n                            columns=titanic_train[\"Pclass\"])\n\nsurvived_class.columns = [\"class1\",\"class2\",\"class3\"]\nsurvived_class.index= [\"died\",\"survived\"]\n\nsurvived_class","a82ad609":"# Table of survival vs passenger class\nsurvived_class = pd.crosstab(index=titanic_train[\"Survived\"], \n                            columns=titanic_train[\"Pclass\"],\n                             margins=True)   # Include row and column totals\n\nsurvived_class.columns = [\"class1\",\"class2\",\"class3\",\"rowtotal\"]\nsurvived_class.index= [\"died\",\"survived\",\"coltotal\"]\n\nsurvived_class","7d9dbd36":"survived_class\/survived_class.loc[\"coltotal\",\"rowtotal\"]","f8ddbeaf":"survived_class\/survived_class.loc[\"coltotal\"]","32b25861":"survived_class.div(survived_class[\"rowtotal\"],\n                   axis=0)","82a06cc8":"survived_class.T\/survived_class[\"rowtotal\"]","d2a9b8fd":"surv_sex_class = pd.crosstab(index=titanic_train[\"Survived\"], \n                             columns=[titanic_train[\"Pclass\"],\n                                      titanic_train[\"Sex\"]],\n                             margins=True)   # Include row and column totals\n\nsurv_sex_class","4122aaa7":"surv_sex_class[2]        # Get the subtable under Pclass 2","1c35d848":"surv_sex_class[2][\"female\"]   # Get female column within Pclass 2","7194460a":"surv_sex_class\/surv_sex_class.loc[\"All\"]    # Divide by column totals","ffd20e52":"Even these simple one-way tables give us some useful insight: we immediately get a sense of distribution of records across the categories. For instance, we see that males outnumbered females by a significant margin and that there were more third class passengers than first and second class passengers combined.\n\nIf you pass a variable with many unique values to table(), such a numeric variable, it will still produce a table of counts for each unique value, but the counts may not be particularly meaningful.\n\nSince the crosstab function produces DataFrames, the DataFrame operations we've learned work on crosstabs:","8e7b7c5b":"The crosstab() function lets you create tables out of more than two categories. Higher dimensional tables can be a little confusing to look at, but they can also yield finer-grained insight into interactions between multiple variables. Let's create a 3-way table inspecting survival, sex and passenger class:","435a2b36":"# Python for Data 19: Frequency Tables\n[back to index](https:\/\/www.kaggle.com\/hamelg\/python-for-data-analysis-index)","5ee32bb6":"Create frequency tables (also known as crosstabs) in pandas using the pd.crosstab() function. The function takes one or more array-like objects as indexes or columns and then constructs a new DataFrame of variable counts based on the supplied arrays. Let's make a one-way table of the survived variable:","d39bf3d2":"Two-way frequency tables, also called contingency tables, are tables of counts with two dimensions where each dimension is a different variable. Two-way tables can give you insight into the relationship between two variables. To create a two way table, pass two variables to the pd.crosstab() function instead of one:","45e9f90c":"To get the total proportion of counts in each cell, divide the table by the grand total:","225b30e7":"## One-Way Tables","f0d99c99":"## Two-Way Tables","4af5e6de":"To get the proportion of counts along each row divide by the row totals. The division operator functions on a row-by-row basis when used on DataFrames by default. In this case we want to divide each column by the rowtotals column. To get division to work on a column by column basis, use df.div() with the axis set to 0:","894a2cc7":"Let's make a couple more crosstabs to explore other variables:","f15f88ef":"## Next Lesson: [Python for Data 20: Plotting With Pandas](https:\/\/www.kaggle.com\/hamelg\/python-for-data-20-plotting-with-pandas)\n[back to index](https:\/\/www.kaggle.com\/hamelg\/python-for-data-analysis-index)","bfd81581":"Frequency tables are a simple yet effective tool for exploring relationships between variables that take on few unique values. Tables do, however, require you to inspect numerical values and proportions closely and it is not always easy to quickly convey insights drawn from tables to others. Creating plots is a way to visually investigate data, which takes advantage of our innate ability to process and detect patterns in images.","29089adc":"Here we see something quite interesting: over 90% of women in first class and second class survived, but only 50% of women in third class survived. Men in first class also survived at a greater rate than men in lower classes. Passenger class seems to have a significant impact on survival, so it would likely be useful to include as a feature in a predictive model.","eddaedaa":"## Higher Dimensional Tables","11006513":"## Wrap Up","3dfcf8d8":"Alternatively, you can transpose the table with df.T to swap rows and columns and perform row by row division as normal:","86ae69e2":"To get the proportion of counts along each column (in this case, the survival rate within each passenger class) divide by the column totals:","f82e61b2":"Due to the convenient hierarchical structure of the table, we still use one division to get the proportion of survival across each column:","1f1fbbdd":"The secondary column index, Sex, can't be used as a top level index, but it can be used within a given Pclass:","69cef3e3":"You can also use the value_counts() function to on a pandas series (a single column) to check its counts:","a33ea0a0":"You can get the marginal counts (totals for each row and column) by including the argument margins=True:","90fe38c9":"Notice that by passing a second variable to the columns argument, the resulting table has columns categorized by both Pclass and Sex. The outermost index (Pclass) returns sections of the table instead of individual columns:","3f3307f0":"Discovering relationships between variables is the fundamental goal of data analysis. Frequency tables are a basic tool you can use to explore data and get an idea of the relationships between variables. A frequency table is just a data table that shows the counts of one or more categorical variables.\n\nTo explore frequency tables, we'll revisit the Titanic training set. We will start by performing a couple of the same preprocessing steps from lesson 14:","d0bc522b":"One of the most useful aspects of frequency tables is that they allow you to extract the proportion of the data that belongs to each category. With a one-way table, you can do this by dividing each table value by the total number of records in the table:"}}