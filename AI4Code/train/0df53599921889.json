{"cell_type":{"198e1aec":"code","c98d91e9":"code","5a1da0d6":"code","e32d8a8c":"code","1253451a":"code","ed3cbaa3":"code","fb3478ca":"code","108ed76e":"code","a5e66242":"code","5dbd619c":"code","fe2e1411":"code","055ae66a":"code","cd540249":"code","1ee47296":"code","fffcba8d":"code","3afef51d":"code","bbb41693":"markdown","121efbc0":"markdown","c6646243":"markdown","31ecca5a":"markdown","e48e89e4":"markdown","899d1599":"markdown","926998ed":"markdown","45baa601":"markdown","34b2ca56":"markdown"},"source":{"198e1aec":"#Step 1: Load the necessary packages:\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","c98d91e9":"#Step 2: Load the data set:\ntest_df=pd.read_csv(\"..\/input\/californiaddsexpenditures\/californiaDDSDataV2.csv\")","5a1da0d6":"test_df.head()","e32d8a8c":"test_df.describe()","1253451a":"# Step 4: Our problem statement is to determine if there is Ethnic bias in the Expenditures. Let us find the mean of Expenditures per Ethnicity and check if the claim is valid.\n\ntest_df.groupby('Ethnicity').mean().sort_values('Expenditures')","ed3cbaa3":"# Step 5: A box plot for the above data is shown below.\nbplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=test_df.sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","fb3478ca":"#Step 6: Let us begin with grouping the Expenditures data on Gender:\ntest_df.loc[:,['Gender', 'Expenditures']].groupby('Gender').mean().sort_values('Gender')","108ed76e":"#Step 7: Let us consider Age. We will use Age Cohort feature available in the data set.\ntest_df.loc[:,['Age Cohort', 'Expenditures']].groupby('Age Cohort').mean().sort_values('Expenditures')","a5e66242":"df = test_df.loc[:,['Age Cohort', 'Expenditures', 'Ethnicity']]","5dbd619c":"#Step 8: Let us get a perspective of how funds are allocated to different Ethnicities within the Age groups.\nzero_to_5 = df['Age Cohort'] == '0 to 5'\nsix_to_12 = df['Age Cohort'] == '6 to 12'\nthirteen_to_17 = df['Age Cohort'] == '13 to 17'\neighteen_to_21 = df['Age Cohort'] == '18 to 21'\ntwentytwo_to_50 = df['Age Cohort'] == '22 to 50'\nfiftyone_plus = df['Age Cohort'] == '51+'","fe2e1411":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(zero_to_5).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 0 to 5\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","055ae66a":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(six_to_12).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 6 to 12\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","cd540249":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(thirteen_to_17).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 13 to 17\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","1ee47296":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(eighteen_to_21).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 18 to 21\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","fffcba8d":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(twentytwo_to_50).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 22 to 50\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","3afef51d":"bplot=sns.boxplot(y='Ethnicity', x='Expenditures', \n                 data=df.where(fiftyone_plus).dropna().sort_values('Ethnicity'), \n                 width=0.5,\n                 palette=\"colorblind\")\nbplot.axes.set_title(\"Expenditures By Ethnicity, Age: 50+\", fontsize=16) \nbplot.set_xlabel(\"Expenditures\", fontsize=14)\nbplot.set_ylabel(\"Ethnicity\", fontsize=14) \nbplot.tick_params(labelsize=10)","bbb41693":"From the above graph, it looks like there is discrimination towards multiple ethnic groups. Now, let us dive more into data using other features available in data set. ","121efbc0":"The above result provides reasonable insights that the funds allocations were performed basis of Age. ","c6646243":"# Simpson\u2019s Paradox \u2013 Mislead when groups are combined together ","31ecca5a":"## What is Simpson\u2019s Paradox? \nIt is a phenomenon in probability and statistics, in which a trend appears in several different groups of data but disappears or reverses when these groups are combined.\nIn other words, Simpson\u2019s Paradox occurs when groups of data show on a particular trend; however this trend is reversed when the groups are combined together.","e48e89e4":"## Reference:  \n1.\t\u201cA Data Set and Discrimination case study\u201d by Stanley A. Taylor & Amy E. Mickel\n2.\thttps:\/\/en.wikipedia.org\/wiki\/Simpson%27s_paradox#Examples","899d1599":"# #Conclusion:\nThis is a classic case of Simpson\u2019s paradox as when the combined data been plotted has shown the discrimination. But when the data is broken down to different groups, this discrimination claim has been proven wrong.","926998ed":"## Understanding Simpson\u2019s Paradox from a real life example:\nIn 2014, at California State University, Stanley A. Taylor & Amy E. Mickel published a paper as \u201cA Data Set and Discrimination case study\u201d. Below is a gist of the paper and a visualization of the case study in Jupyter - Python Notebook.\nA few years ago, number of years ago, an allegation of discrimination was made and supported by a univariate analysis that examined average annual expenditures on consumers by ethnicity. The analysis revealed that the average annual expenditures on Hispanic consumers was approximately one-third (\u2153) of the average expenditures on White non-Hispanic consumers.\nThis finding was the catalyst for further investigation; subsequently, state legislators and department managers sought consulting services from a statistician (the lead author).\nUnderstanding the concept of specific variation, the statistician looked for other potential sources of variation including age. A bivariate analysis examining ethnicity and age (divided into six age cohorts) revealed that ethnic discrimination did not exist. Moreover, in all but one of the age cohorts, the trend reversed where the average annual expenditures on White non-Hispanic consumers were less than the expenditures on Hispanic consumers\u2014a classic example of Simpson\u2019s paradox!","45baa601":"From the above box plots, it shows there has been no discrimination towards any ethnicity when expenditures have been broken down by age groups.","34b2ca56":"There is no significant difference in Expenditure with respect to Male and Female. This means we can ignore Gender feature in our future analysis."}}