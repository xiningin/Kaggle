{"cell_type":{"9686091e":"code","854c4733":"code","045c9edb":"code","bc8a288b":"code","b7ec4bfb":"code","34edfac4":"code","9ea19c84":"code","e80d51fe":"code","4fa5c7e5":"code","c1977b02":"code","77e379fc":"code","077aa7ff":"code","9790b39d":"code","6400346c":"code","5db82082":"code","c7267360":"code","8059bc47":"code","14885a13":"code","9538c4d3":"code","b31c0a63":"code","097828a3":"code","568ea616":"code","bc8b8860":"code","a3902b55":"code","62c44325":"code","7520f0f8":"code","c6658b15":"code","6805c6b8":"code","b92a8ef6":"code","7d314afb":"code","c9ff3d53":"code","99f9327e":"code","d8d3f813":"code","37a2b99a":"markdown","ec28daff":"markdown","5fb66d9b":"markdown","25e0b537":"markdown","d423a2f0":"markdown","86751e42":"markdown","45fd33b1":"markdown","fe00e3fb":"markdown","b3919a0c":"markdown","4e1146b6":"markdown","f5946243":"markdown","5dc8fb9d":"markdown","6c54934c":"markdown","a5338da1":"markdown","7edf9094":"markdown","734b40d5":"markdown","6b07d8ae":"markdown","98c3bb4b":"markdown","822a01f3":"markdown","6f3e652f":"markdown","d042c482":"markdown","0e014faf":"markdown","f3b172fc":"markdown"},"source":{"9686091e":"# This Python 3 environment comes with many helpful analytics libraries installed\nimport os\nprint(os.listdir(\"..\/input\"))","854c4733":"%matplotlib inline","045c9edb":"import matplotlib.pyplot as plt\nimport pandas as pd","bc8a288b":"df = pd.read_csv(\"..\/input\/WA_Fn-UseC_-Marketing-Campaign-Eff-UseC_-FastF.csv\")","b7ec4bfb":"df.shape","34edfac4":"df.head(15)","9ea19c84":"ax = df.groupby(\n   'Promotion'\n).sum()[\n    'SalesInThousands'\n].plot.pie(\n    figsize=(7, 7),\n    autopct='%1.0f%%'\n)\n\nax.set_ylabel('')\nax.set_title('Sales distributions across different promotions')\n\nplt.show()","e80d51fe":"ax = df.groupby([\n    'Promotion', 'MarketSize'\n]).count()[\n    'MarketID'\n].unstack(\n    'MarketSize'\n).plot(\n    kind='bar',\n    figsize=(12, 10),\n    grid=True\n)\n\nax.set_ylabel('count')\nax.set_title('Breakdowns of market sizes across different promotions')\n\nplt.show()","4fa5c7e5":"# or you can visualize the plot above with a stacked bar chart\n\nax = df.groupby([\n    'Promotion', 'MarketSize'\n]).sum()[\n    'SalesInThousands'\n].unstack(\n    'MarketSize'\n).plot(\n    kind='bar',\n    figsize=(12, 10),\n    grid=True,\n    stacked=True\n)\n\nax.set_ylabel('Sales (in thousands)')\nax.set_title('Breakdowns of market sizes across different promotions')\n\nplt.show()","c1977b02":"ax = df.groupby(\n    'AgeOfStore'\n).count()[\n    'MarketID'\n].plot(\n    kind='bar',\n    color='magenta',\n    figsize=(10, 7),\n    grid=True\n)\n\nax.set_xlabel('age')\nax.set_ylabel('count')\nax.set_title('Overall distributions of age of store')\n\nplt.show()","77e379fc":"ax = df.groupby(\n    ['AgeOfStore', 'Promotion']\n).count()[\n    'MarketID'\n].unstack(\n    'Promotion'\n).iloc[::-1].plot(\n    kind='barh', \n    figsize=(12,15),\n    grid=True\n)\n\nax.set_ylabel('age')\nax.set_xlabel('count')\nax.set_title('Overall distributions of age of store')\n\nplt.show()","077aa7ff":"# Look at the summary statistics of store ages across the three promotion groups\n\ndf.groupby('Promotion').describe()['AgeOfStore']","9790b39d":"df.groupby('Week').count()['MarketID']","6400346c":"df.groupby(['Promotion', 'Week']).count()['MarketID']","5db82082":"df.groupby(['Promotion']).count()['MarketID']","c7267360":"ax1, ax2, ax3 = df.groupby(\n    ['Week', 'Promotion']\n).count()[\n    'MarketID'\n].unstack('Promotion').plot.pie(\n    subplots=True,\n    figsize=(24, 8),\n    autopct='%1.0f%%'\n)\n\nax1.set_ylabel('Promotion #1')\nax2.set_ylabel('Promotion #2')\nax3.set_ylabel('Promotion #3')\n\nax1.set_xlabel('distribution across different weeks')\nax2.set_xlabel('distribution across different weeks')\nax3.set_xlabel('distribution across different weeks')\n\nplt.show()","8059bc47":"import numpy as np\nfrom scipy import stats","14885a13":"means = df.groupby('Promotion').mean()['SalesInThousands']\nmeans","9538c4d3":"stds = df.groupby('Promotion').std()['SalesInThousands']\nstds","b31c0a63":"varis = df.groupby('Promotion').std()['SalesInThousands']**2\nvaris","097828a3":"ns = df.groupby('Promotion').count()['SalesInThousands']\nns","568ea616":"t_1_vs_2 = (\n    means.iloc[0] - means.iloc[1]\n)\/ np.sqrt(\n    (stds.iloc[0]**2\/ns.iloc[0]) + (stds.iloc[1]**2\/ns.iloc[1])\n)","bc8b8860":"numerator_df_1_vs_2 = (varis.iloc[0]\/ns.iloc[0] + varis.iloc[1]\/ns.iloc[1])**2\n\ndenominator_df_1_vs_2 = (varis.iloc[0]**2\/(ns.iloc[0]**2*(ns.iloc[0]-1)))+(varis.iloc[1]**2\/(ns.iloc[1]**2*(ns.iloc[1]-1)))\n\ndf_1_vs_2 = numerator_df_1_vs_2 \/ denominator_df_1_vs_2","a3902b55":"p_1_vs_2 = (1 - stats.t.cdf(t_1_vs_2, df=df_1_vs_2))*2","62c44325":"print(\"The t-value is %0.10f and the p-value is %0.10f.\" % (t_1_vs_2, p_1_vs_2))","7520f0f8":"t, p = stats.ttest_ind(\n    df.loc[df['Promotion'] == 1, 'SalesInThousands'].values,\n    df.loc[df['Promotion'] == 2, 'SalesInThousands'].values,\n    equal_var=False\n)","c6658b15":"print(\"The t-value is %0.10f and the p-value is %0.10f.\" % (t, p))","6805c6b8":"t_1_vs_3 = (\n    means.iloc[0] - means.iloc[2]\n)\/ np.sqrt(\n    (stds.iloc[0]**2\/ns.iloc[0]) + (stds.iloc[2]**2\/ns.iloc[2])\n)","b92a8ef6":"numerator_df_1_vs_3 = (varis.iloc[0]\/ns.iloc[0] + varis.iloc[2]\/ns.iloc[2])**2\n\ndenominator_df_1_vs_3 = (varis.iloc[0]**2\/(ns.iloc[0]**2*(ns.iloc[0]-1)))+(varis.iloc[2]**2\/(ns.iloc[2]**2*(ns.iloc[2]-1)))\n\ndf_1_vs_3 = numerator_df_1_vs_3 \/ denominator_df_1_vs_3","7d314afb":"p_1_vs_3 = (1 - stats.t.cdf(t_1_vs_3, df=df_1_vs_3))*2","c9ff3d53":"print(\"The t-value is %0.10f and the p-value is %0.10f.\" % (t_1_vs_3, p_1_vs_3))","99f9327e":"t, p = stats.ttest_ind(\n    df.loc[df['Promotion'] == 1, 'SalesInThousands'].values,\n    df.loc[df['Promotion'] == 3, 'SalesInThousands'].values,\n    equal_var=False\n)","d8d3f813":"print(\"The t-value is %0.10f and the p-value is %0.10f.\" % (t, p))","37a2b99a":"### - Overall distribution of age of store across all different promotion groups","ec28daff":"![image.png](attachment:image.png)","5fb66d9b":"__A\/B testing__ plays a critical role in decision-making processes across various industries.\n<br>It is essentially a method of comparing and testing the effectiveness and benefits of two different business strategies.\n<br>You can applied it to test emails with two different subject lines, your social media advertisements or your product recommendations on your web site.","25e0b537":"From this output, it is easier to understand the overall store age distributions than with the plot I printed immediately above.\n<br>We can see the following information:\n\n- all three test groups seem to have similar store age profile\n- the average profile for the three groups are 8-9 years\n- the majority of the stores are 10-12 years old or younger","d423a2f0":"### - Using equations","86751e42":"## - Promotion 1 vs. 2","45fd33b1":"Every week, the three promotions are processed numerically equally across the four markets.","fe00e3fb":"### - Computing t-test and p-value using scipy","b3919a0c":"# 1. Load Data","4e1146b6":"### - Composition of different market sizes in each promotion group","f5946243":"### - Computing t-test and p-value using equations","5dc8fb9d":"> ### - Total sales distributions across different promotions","6c54934c":"Looking at _the very tiny p-value_, it seems there is strong evidence against the null hypothesis and that the difference between the two test groups is significant.\n<br>From the \"means\" output, we know that the average sales (in thousands) for promotion group $1$ is about $58.1$, and for promotion group $2$ it's about $47.33$.\n<br>__From the t-test, we have demonstrated that the marketing performances for these two groups are different and that promotion group $1$ outperforms promotion group $2$.__","a5338da1":"This plot shows that a large number of stores are $1$ year old and the majority of stores are $10$ years old or less.","7edf9094":"# 3. Statistical Significance","734b40d5":"We can easily see what follows: \n- promotion group 3 is the largest\n- each promotion group takes roughly about one third of the total sales during the promotion weeks","6b07d8ae":"# 2. Data Analysis","98c3bb4b":"### - Store age distributions across all different promotion groups","822a01f3":"From this bar chart we can notice what follows:\n\n- the medium market size occupies the most among all three promotion groups, while the small market size occupies the least\n- the compositions of different market size are similar among the three promotion groups","6f3e652f":"Now the _p-value is greater than 0.05_, which is generally accepted cutoff level, and this suggests that the marketing performance from promotion group $1$ is not statistically different from the marketing performance from promotion group $3$, even though group 1's average sales number (about $58.1$) is higher than group 3's (about $55.4$).\n\n__In conclusion, promotion groups $1$ and $3$ outperform promotion group $2$, and the difference between them is not statistically significant.__","d042c482":"## - Promotion 1 vs. 3","0e014faf":"### - Promotion distributions across weeks","f3b172fc":"### - Using scipy"}}