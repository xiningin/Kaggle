{"cell_type":{"bf85beac":"code","02c8f128":"code","38e832f9":"code","342f12aa":"code","21cfa44c":"code","ef955726":"code","43c48df5":"code","124a34f8":"code","bf87d1c2":"code","d9c9c6eb":"code","d245663d":"code","5ac26e2d":"code","f0281b35":"code","71cd06c7":"code","acc02d0d":"code","90c54453":"code","847a0fc3":"code","cfba73eb":"markdown","cc1924a6":"markdown","4761c86b":"markdown","63c525de":"markdown","5f96d677":"markdown","5c0ba2ee":"markdown","0e36e88c":"markdown","35136212":"markdown","53fc49a4":"markdown","8bbe39e7":"markdown","28935653":"markdown","811e6dc2":"markdown","838bea5f":"markdown","993e51ac":"markdown","3f80783e":"markdown"},"source":{"bf85beac":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt","02c8f128":"pd.options.display.float_format = \"{:,.2f}\".format\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', None)","38e832f9":"df = pd.read_csv('\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations.csv')\nmanufacturer = pd.read_csv('\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations_by_manufacturer.csv')","342f12aa":"df = df.drop(['total_vaccinations', 'source_website', 'daily_vaccinations_raw', 'source_name'], axis = 1)","21cfa44c":"(df.isnull().sum() \/ df.shape[0]).sort_values(ascending = False)","ef955726":"df.date = pd.to_datetime(df.date)","43c48df5":"countries = pd.DataFrame()\nfor country in df.country.unique():\n    countries.loc[country, 'avgDaily'] = df[(df.country == country) & (~df.daily_vaccinations_per_million.isna())].sort_values('date').iloc[-30:].daily_vaccinations_per_million.mean() \/ 10000\n    countries.loc[country, 'percVac'] = df[(df.country == country) & (~df.people_vaccinated_per_hundred.isna())].sort_values('date').iloc[-1].people_vaccinated_per_hundred\n    countries.loc[country, 'percFullyVac'] = df[(df.country == country) & (~df.people_fully_vaccinated_per_hundred.isna())].sort_values('date').iloc[-1].people_fully_vaccinated_per_hundred\n    countries.loc[country, 'datePercVac'] = df[(df.country == country) & (~df.people_vaccinated_per_hundred.isna())].sort_values('date').iloc[-1].date\n    countries.loc[country, 'population'] = 100 * df[(df.country == country) & (~df.people_vaccinated.isna())].sort_values('date').iloc[-1].people_vaccinated \/ countries.loc[country, 'percVac']","124a34f8":"big_countries = countries[countries.population > 500000][['avgDaily', 'percVac', 'percFullyVac', 'population']]\n\nbig_countries.sort_values('avgDaily').head(n=10)","bf87d1c2":"big_countries.sort_values('avgDaily', ascending = False).head(n=10)","d9c9c6eb":"countries['daysTillOneShot'] = (100 - countries.percVac) \/ countries.avgDaily\ncountries['daysTillTwoShots'] = (200 - countries.percFullyVac - countries.percVac) \/ countries.avgDaily\ncountries['daysTillThreeShots'] = (300 - countries.percFullyVac - countries.percVac) \/ countries.avgDaily","d245663d":"def ceiling_map(x: float):\n    \"\"\"\n    maps all numbers that are bigger than 50'000 to 50'000, else to itself\n    \"\"\"\n    return min(x, 50000)\n\ntemp = countries['daysTillOneShot'].apply(np.ceil).map(ceiling_map).map(lambda x: pd.Timedelta(x, unit='D'))\ntemp2 = countries['daysTillTwoShots'].apply(np.ceil).map(ceiling_map).map(lambda x: pd.Timedelta(x, unit='D'))\ntemp3 = countries['daysTillThreeShots'].apply(np.ceil).map(ceiling_map).map(lambda x: pd.Timedelta(x, unit='D'))\n\ndays = pd.DataFrame()\n\ndays['dateOneShot'] = countries.datePercVac + temp\ndays['dateTwoShot'] = countries.datePercVac + temp2\ndays['dateThreeShot'] = countries.datePercVac + temp3","5ac26e2d":"days['yearOneShot'] = days.dateOneShot.dt.year.fillna(2158).astype(int)\ndays['yearTwoShot'] = days.dateTwoShot.dt.year.fillna(2158).astype(int)\ndays['yearThreeShot'] = days.dateThreeShot.dt.year.astype(int)","f0281b35":"counts = pd.DataFrame()\nyears = days[['yearOneShot', 'yearTwoShot', 'yearThreeShot']]\nfor year in range(2021, 2051):\n    counts[str(year)] = years[years <= year].count() \/ years.shape[0]","71cd06c7":"big_countries = days[countries.population > 500000][['dateOneShot', 'dateTwoShot', 'dateThreeShot']]","acc02d0d":"big_countries.sort_values('dateTwoShot').head(n=10)","90c54453":"big_countries.sort_values('dateTwoShot', ascending = False).head(n=10)","847a0fc3":"counts.T.plot(figsize=(20,10), title = 'The percentadge of countries achieving one\/two\/three shots before the given year');","cfba73eb":"# Goal\n\nThe goal of this notebook is to answer the following questions:\n* Given the current daily vaccinations, how long will it go until all citizens of the various countries have received at least one shot?\n* What about two shots?\n* What about three shots?\n\nWe thereby will assume that every citizen is willing to be vaccinated and the countries distribute their shots optimally.","cc1924a6":"Finally, we extract the year from the newly calculated dates and again define some new key figures in:\n\n* **countOneShot:** This is the number of countries achieving at least one shot per citizen, split into years;\n* **countTwoShots:** This is the number of countries achieving at least two shot per citizen, split into years;\n* **countThreeShots:** This is the number of countries achieving three shot per citizen, split into years.\n\nIf there is no information, we will use the previous cap of 50000 days, which gives ur roughly the year 2158.","4761c86b":"We conclude that, given current trajectories\n\n* By 2023, 85% of countries will have given one shot to all its citizens\n* 90% of the countries will have given their citizens one shot by 2026, two shots by 2030 and three shots by 2036\n* There are a few that will or have already hit one, two or three shots in 2021\n* Conclusively, all the lines are very steep in the beginning and then flaten out quickly\n\nAgain, a reminder that we assume a optimal distribution of the vaccines and that citizens are willing to be vaccinated.","63c525de":"So let's look at the best and worst cases of average daily vaccinations, only considering countries with a population of over 500'000.","5f96d677":"There are many missing values here and unfortunately, we will not be able to analyticaly reconstruct them. The best we could do is make an educated guess based on the daily vaccinations. We will not do this though and rather focus on the parts of the data set that are complete.","5c0ba2ee":"The **date** column will be very important, hence we will convert it into a datetime format.","0e36e88c":"# Creating a countries data set\n\nFirst we extract some key figures in:\n* **avgDaily:** This will be defined as the average daily vaccinations per millions of the last thirty recorded days;\n* **percVac:** This will be defined as the people vaccinated per hundred of the last recorded time;\n* **perFullyVac:** This will be defined as the people fully vaccinated per hundred of the last recorded time;\n* **datePercVac:** This will be defined as the date when **percVac** was last recorded;\n* **population:** This will be calculated as \n$$population = 100 * \\frac{people\\_vaccinated}{people\\_vaccinated\\_per\\_hundred}.$$\n\nNote that we exclude all missing values in the calculations","35136212":"# Data Exploration and Preparation","53fc49a4":"We see that some countries are doing terribly as they barely reach 0.01% or some actually less. Others are vaccinating over or very close to 1% of its population daily, which is really impressive.","8bbe39e7":"# Date and year when everyone will be vaccinated\n\nAgain we define some key figures:\n* **dateOneShot:** This is the date when everyone in the country will have received at least one shot, defined as\n$$datePercVac + daysTillOneShot;$$\n* **dateTwoShot:** This is the date when everyone in the country will have received at least one shot, defined as\n$$datePercVac + daysTillTwoShot;$$\n* **dateThreeShot:** This is the date when everyone in the country will have received at least one shot, defined as\n$$datePercVac + daysTillThreeShot.$$\n\nTo not get an OverflowError, we must cap the amount of days to 50000.","28935653":"We will immediately drop some data points we do not care about.","811e6dc2":"And the 10 countries that will achieve two shots per person last.","838bea5f":"# Days until vaccinated\n\nNext, define some other key figures in:\n* **daysTillOneShot:** This is the amount of days until everyone has received at least one vaccine and is defined as\n$$\\frac{100 - percVac}{avgDaily};$$\n* **daysTillTwoShots:** This is the amount of days until everyone has received at least two vaccine and  is defined as\n$$\\frac{200 - percVac - percFullyVac}{avgDaily};$$\n* **daysTillThreeShots:** This is the amount of days until everyone has received three vaccine and  is defined as\n$$\\frac{300 - percVac - percFullyVac}{avgDaily}.$$\n\nWe thereby assumed that the countries are handing out their doses optimally, like for exmaple in **daysTillOneShot**, we asumme that they are handing out the doses first to the unvaccinated.","993e51ac":"Finally, we display the 10 countries that will achieve at least two shots per person first.","3f80783e":"# Conclusion"}}