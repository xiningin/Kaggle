{"cell_type":{"9eaaa414":"code","fd602630":"code","e2041271":"code","6df189db":"code","880667ff":"code","b9a91669":"code","97d716c5":"code","c4e0e193":"code","e64ba310":"code","8f16f3e5":"code","f483efaa":"code","0f6692bb":"code","c0e0eb21":"code","bbb4bc52":"code","14887df3":"code","fd5c1c3d":"code","c16e7b2c":"code","2da7606d":"code","77f37070":"code","5ef61677":"code","dd8fad99":"code","97fae42b":"code","a965a347":"code","c17f6acd":"code","909137a3":"code","b0cc07ae":"code","1ff4718c":"code","e21dac59":"code","1becc2bb":"code","c3478d23":"markdown","d7bcd212":"markdown","cc39db90":"markdown","3e649711":"markdown","12fc9ec3":"markdown","e8ceb772":"markdown","7e8540b9":"markdown","89ae110a":"markdown","edb17300":"markdown","443a0f34":"markdown","8679f6fa":"markdown","cbbac2e1":"markdown","a5b8e909":"markdown","8089369c":"markdown","86da5e08":"markdown","0db1370e":"markdown","1d9b922b":"markdown","803a110b":"markdown","403545cd":"markdown","37299762":"markdown","9fd95ef3":"markdown","1a94bf40":"markdown","b1ead8bf":"markdown","69574737":"markdown","ef6af01d":"markdown","2be8ac88":"markdown","cde6149c":"markdown","9d0cf93b":"markdown","eba855c5":"markdown","8f255a70":"markdown","bc78fc0a":"markdown","493fb0a2":"markdown","067e53a0":"markdown","62ba29ee":"markdown","57fe7295":"markdown"},"source":{"9eaaa414":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","fd602630":"# Relevant imports\n\nimport numpy as np, pandas as pd\nfrom IPython.display import Image\nimport matplotlib.pyplot as plt, seaborn as sns\nimport scipy\nimport warnings\nimport plotly.express as px\nfrom itertools import product\nimport statsmodels.api as sm\nimport datetime\nfrom tqdm import tqdm\nwarnings.filterwarnings('ignore')","e2041271":"import sympy ","6df189db":"data = pd.read_csv('..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv')","880667ff":"data","b9a91669":"data.shape","97d716c5":"data.isna().sum()","c4e0e193":"data = data.drop(data[data.total_vaccinations.isna()].index)","e64ba310":"data.isna().sum()","8f16f3e5":"plt.subplots(figsize=(8, 8))\nsns.heatmap(data.corr(), annot=True, square=True)\nplt.show()","f483efaa":"people_vaccinated_data = data.drop(data[data.people_vaccinated.isna()].index)\npeople_vaccinated_data.isna().sum()","0f6692bb":"people_vaccinated_data.head()","c0e0eb21":"scipy.stats.mannwhitneyu(people_vaccinated_data.total_vaccinations, people_vaccinated_data.people_vaccinated, alternative='two-sided')","bbb4bc52":"data = data.fillna(0)\ndata.isna().sum()","14887df3":"# select the columns necessary of representing each country\ncolumns = [\"country\", 'total_vaccinations', 'iso_code', 'vaccines', 'total_vaccinations_per_hundred']\n\n# group the columns by country name\nvaccinations_data = data[columns].groupby('country').max().sort_values('total_vaccinations', ascending=False)","fd5c1c3d":"vaccinations_data.head()","c16e7b2c":"vaccinations_data.tail()","2da7606d":"plt.figure(figsize=(30, 10))\nplt.bar(vaccinations_data.index, vaccinations_data.total_vaccinations)\nplt.xticks(rotation = 90)\nplt.ylabel('Number of vaccinated citizens')\nplt.xlabel('Countries')\nplt.show()","77f37070":"fig = px.choropleth(locations=vaccinations_data.iso_code, color=vaccinations_data.total_vaccinations, title='Number of vaccinated citizens', \n                   color_continuous_scale='rainbow')\nfig.show('notebook')","5ef61677":"# we already have the relevant columns grouped by countries in the dataframe. We just need to sort it by total_vaccinations_per_hundred\n\n# sort the dataframe by total_vaccinations_per_hundred\nvaccinations_data = vaccinations_data.sort_values('total_vaccinations_per_hundred', ascending=False)","dd8fad99":"vaccinations_data.head()","97fae42b":"vaccinations_data.tail()","a965a347":"plt.figure(figsize=(30, 10))\nplt.bar(vaccinations_data.index, vaccinations_data.total_vaccinations_per_hundred)\nplt.xticks(rotation = 90)\nplt.ylabel('Number of vaccinated citizens per hundred')\nplt.xlabel('Countries')\nplt.show()","c17f6acd":"fig = px.choropleth(locations=vaccinations_data.iso_code, color=vaccinations_data.total_vaccinations_per_hundred, title='Number of vaccinated citizens per hundred', \n                   color_continuous_scale='rainbow')\nfig.show('notebook')","909137a3":"# we group the vaccinations_data dataframe by vaccine to be able to rank vaccines. Our ranking metric\n# however, is still total_vaccinations. So we effectively rank the vaccines by the total number of \n# vaccinations done with it.\nvaccines_usage = vaccinations_data.groupby('vaccines').sum().sort_values('total_vaccinations', ascending=False)","b0cc07ae":"vaccines_usage.head()","1ff4718c":"vaccines_usage.tail()","e21dac59":"plt.figure(figsize=(10, 5))\nplt.bar(vaccines_usage.index, vaccines_usage.total_vaccinations)\nplt.xticks(rotation = 90)\nplt.ylabel('Number of vaccinated people')\nplt.xlabel('Vaccines')\nplt.show()","1becc2bb":"fig = px.choropleth(locations=vaccinations_data.iso_code, color=vaccinations_data.vaccines, title='Vaccines used in different parts of the world', \n                   color_continuous_scale='rainbow')\nfig.show()","c3478d23":"## Handle Missing data","d7bcd212":"### total_vaccinations_per_hundred","cc39db90":"## Visualization of different metrics","3e649711":"Now, we re-evaluate the statistic of the number of NaN after removing all rows with NaN value for `total_vaccinations`","12fc9ec3":"However, we see that the `p_value` of the Mann-Whitney U Test between `people_vaccinated` and `total_vaccinations` is far lesser\nthan 0.05. Hence we have to reject our hypothesis.","e8ceb772":"As we can see, the highest number of vaccinations are in USA and China, closely followed by India. However, we should also take into consideration the huge population of these\ncountries. The population is a major factor in the number of vaccinations. This is also evident in the countries having the lowest number of vaccinations, where the population is very low.","7e8540b9":"Israel, UAE, Gibraltar have the highest level of vaccinated people per hundred.\n\nHowever, we shouldn't forget that the population of these countries isn't really high. This might be the reason of such high statistic indicators.\n\nUnited Kingdom (along with England, Northern Ireland, Scotland and Wales) also have really high results, as it's population is almost 7 times higher than UAE's and Israels, and what is really incredible, <u>2016<\/u> times higher than Gibraltar's!","89ae110a":"### -> Column: `people_vaccinated`","edb17300":"Listing the most popular and the least popular vaccines.","443a0f34":"As we can observe, USA has been very thorough with the vaccinations as it's total_vaccinations_per_hundred is also very high.\nAt the lowest level we have Russia, Mexico, South America and the Asian countries.","8679f6fa":"Although the number of NaNs have decreased, we still need to remove the remaining NaN values to be able to process the data.\nLet's plot the correlation matrix to check is the NaN values in any column can be derived from other columns.","cbbac2e1":"Complementary bar chart visualizing usage of the vaccines.","a5b8e909":"Read csv file as a pandas dataframe","8089369c":"And a complementary bar chart.","86da5e08":"Again, we visualize this statistic on a map for a more intuitive understanding.","0db1370e":"### total_vaccinations","1d9b922b":"We can observe that `total_vaccinations` and `people_vaccinated` have a very high correlation. Let's remove the rows having NaN\nin `people_vaccinated` and perform the Mann-Whithey U test to see if the columns can be derived from each other.","803a110b":"To get a more intuitive understanding of this ranking, let's visualize this data on a geographical world map.","403545cd":"The countries with the highest number of vaccinations are as follows:","37299762":"We can see that total_vaccinations and people_vaccinated have almost the same values. Let's perform the Mann-Whitney U test to confirm our hypothesis.","9fd95ef3":"The countries with lowest number of vaccinations are as follows:","1a94bf40":"## Vaccines ranked by popularity","b1ead8bf":"Let's rank the different countries on the basis of the number of vaccinations.","69574737":"### -> Column: `total_vaccinations`","ef6af01d":"Let's form a general idea of the different type of data present in different columns fo the dataset, and the shape of the dataset.","2be8ac88":"## Read data and understand the data schema","cde6149c":"Let's get a statistic of the number of NaNs present in the dataset","9d0cf93b":"# Exploratory Data analysis of the progress of vaccinations around the world.","eba855c5":"The Pfizer\/BioNTech vaccine is a arguably the most popular and wide-spread vaccine throughout the world. It is used in all of Europe and North America and Japan.\n\nThe Sputnik V vaccine is used in Russia, and surrounding contries like Kazakhstan, Iran, Ukraine, Mongolia and Belarus along with South American Countries like Argentina.\n\nCovaxin is used in India.\n\n","8f255a70":"Complementary map visualization for better intuition.","bc78fc0a":"Now let's visualize the total number of vaccinations in each country using a Bar Chart.","493fb0a2":"Listing the top and bottom most countries ranked by total_vaccinations_per_hundred.","067e53a0":"Since, the columns having the highest correlation failed the Mann-Whitney U Test, it is highly possible that the columns having lower\ncorrelation will also fail this test. Hence, we fill the NaN values with 0.","62ba29ee":"`total_vaccinations` is the most important column in the dataset. We simply drop rows having NaN in this column\n","57fe7295":"Let's rank the different countries on the basis of the number of vaccinations."}}