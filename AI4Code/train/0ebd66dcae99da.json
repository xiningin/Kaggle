{"cell_type":{"adaa177b":"code","90d0a538":"code","9084f9ad":"code","b5c1ace5":"code","b209901f":"code","a1233a3d":"code","8a851879":"code","4ee9c568":"code","90249b28":"code","c5284864":"code","5892a733":"code","ea74980f":"code","327aa03b":"markdown","9afb8597":"markdown","7074e01e":"markdown","329ca94a":"markdown","e25fecd4":"markdown","ee327cc7":"markdown","b2a05ec2":"markdown","73602433":"markdown","6507d4ff":"markdown","e8a84bc1":"markdown","c7301042":"markdown","b96e049e":"markdown"},"source":{"adaa177b":"# THIS IS A COMMENT IN PYTHON - it is for people to read and Python ignores it\n# Getting Started with Python\n# Why Python? - Why data Science?\n\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom IPython.display import display\n\ndf = pd.read_csv(\"http:\/\/uoweb3.ncl.ac.uk\/api\/v1.1\/sensors\/PER_AIRMON_MONITOR1056100_AIR\/data\/csv\/?data_variable=NO2&last_n_days=1\")\ndisplay(df.head())","90d0a538":"df.columns\n","9084f9ad":"df['Value'].count()","b5c1ace5":"df.Timestamp = pd.to_datetime(df.Timestamp)\ndf = df.set_index(df.Timestamp)\n\nplt.plot(df.index, df.Value)\nplt.hlines(40, df.index.min(), df.index.max())\nplt.show()","b209901f":"df.describe()\n","a1233a3d":"lat = df['Sensor Centroid Latitude']\nlong = df['Sensor Centroid Longitude']\nlat = lat[0]\nlong = long[0]\nprint(long, lat)\n","8a851879":"import folium\nfrom folium import Marker\n\n# Create a map\nm_1 = folium.Map(location=[lat, long], tiles='openstreetmap', zoom_start=10)\n\nMarker((lat,long)).add_to(m_1)\n\n# Display the map\nm_1\n","4ee9c568":"df=pd.read_csv('http:\/\/uoweb3.ncl.ac.uk\/api\/v1.1\/sensors\/data\/csv\/?last_n_days=1&broker=aq_mesh_api&sensor_type=NO2&data_variable=NO2')\ndisplay(df.head())","90249b28":"df['Timestamp'] = pd.to_datetime(df['Timestamp'])\ndf = df.set_index(df['Timestamp'])\n\nlen(df['Sensor Name'].unique())\ndf.info()","c5284864":"res_mean = df.groupby(df['Sensor Name']).resample('48H').mean()\ndisplay(res_mean) \n","5892a733":"m_2 = folium.Map(location=[lat, long], tiles='cartodbpositron', zoom_start=13)\n\n# Add points to the map\nfor idx, row in res_mean.iterrows():\n    Marker([row['Sensor Centroid Latitude'], row['Sensor Centroid Longitude']]).add_to(m_2)\n\n\n# Display the map\nm_2","ea74980f":"\nfrom folium.plugins import HeatMap\nm_5 = folium.Map(location=[lat,long], tiles='stamenwatercolor', zoom_start=12)\n\n# Add a heatmap to the base map\nHeatMap(data=res_mean[['Sensor Centroid Latitude', 'Sensor Centroid Longitude', 'Value']], radius=35).add_to(m_5)\n\n# Display the map\nm_5","327aa03b":"# and get some basic stats on the data","9afb8597":"Don't worry about understanding all of this.  That will become clearer as we go through the course. \nData Science -> Get data, look at it, understand it, manipulate it, plot it, map it, export it.","7074e01e":"# How many values do we have?","329ca94a":"# create a heat map","e25fecd4":"# Grab a bunch of data","ee327cc7":"# resample and aggregating data\n* 48 hours - arithmetic mean","b2a05ec2":"# Checking the data we have accessed - what columns does it have?","73602433":"# How many sensors?","6507d4ff":"# grab locations from data and plot them\n* this is the use of a loop to repeat code on multiple lines","e8a84bc1":"# extract location","c7301042":"# OK Let's plot the data as a time series\n* First we tell PANDAS what the INDEX is (the X axis)\n* And then we plot the VALUES against this index in a plot.  Pandas understands dates and times.","b96e049e":"# plot it spatially\n* note \"import\" statement to bring in \"libraries\""}}