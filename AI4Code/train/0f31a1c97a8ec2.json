{"cell_type":{"a4cdb5ef":"code","1ce4dd2b":"code","70ec2848":"code","241985b8":"code","a113a9f5":"code","2457488e":"code","e4141628":"code","d9fc62ce":"code","29be2854":"code","883cbb49":"code","c158a980":"code","ab4b7ba0":"code","70943752":"code","8d7ee3df":"code","87383aa6":"code","7c997083":"code","ca5f4d4f":"code","465ea19d":"code","a3323469":"code","d187eeaf":"code","89591b96":"code","81bd7df5":"code","d70e283b":"code","ec322ecd":"code","7e317b0a":"code","2ad9d72e":"code","bfd1922c":"code","3122d8a7":"code","319b3a27":"code","efc2adaa":"code","713d8c88":"code","8ec02733":"code","98a3cdd2":"code","f8b2953e":"code","995d79a3":"code","d8369eda":"code","27378f7a":"code","92154bdf":"code","589e6a77":"code","b5eda2b9":"code","4160becc":"markdown","8415e024":"markdown","27f9d637":"markdown","15e7bda2":"markdown","49d15bd1":"markdown","b46bcf49":"markdown","541920aa":"markdown","52aad072":"markdown","9059a5fc":"markdown","eb22bffe":"markdown","96d136dc":"markdown","d332f7fa":"markdown"},"source":{"a4cdb5ef":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.preprocessing import StandardScaler","1ce4dd2b":"est = pd.read_csv('..\/input\/passenger-list-for-the-estonia-ferry-disaster\/estonia-passenger-list.csv')","70ec2848":"est.head()","241985b8":"est.shape","a113a9f5":"est.info()","2457488e":"est.Survived.value_counts()","e4141628":"fig, ax = plt.subplots(figsize=(5,4))\nsns.countplot(x='Survived',data=est, palette='summer', ax=ax)\nax.set_title('Distribution of people deceased\/survived\\n(0=deceased\/1=survived')","d9fc62ce":"est.Country.value_counts()","29be2854":"est.Country.value_counts().plot.barh(title='Countries represented', cmap='summer')","883cbb49":"est.Sex.value_counts()","c158a980":"est.Sex.value_counts().plot.bar(title='Gender Distribution', cmap='summer',legend=True)","ab4b7ba0":"est.Age.mean()","70943752":"fig, ax = plt.subplots(figsize=(5,4))\nsns.distplot(est.Age, color='darkgreen')\nax.set_title('Distribution of Age')\nplt.xlabel('Age')\nplt.ylabel('Frequency')","8d7ee3df":"fig, ax = plt.subplots(figsize=(10,6))\nsns.countplot(x='Age', hue='Survived',data=est, palette='summer',ax=ax)\nax.set_title('Survival Distribution by Age')","87383aa6":"fig, ax = plt.subplots(figsize=(5,4))\nsns.countplot(x='Sex', hue='Survived',data=est,palette='summer', ax=ax)\nax.set_title('Survival Distribution by Gender')","7c997083":"est.Category.value_counts()","ca5f4d4f":"est.groupby('Category')['Survived'].value_counts()","465ea19d":"crew_died = (154\/193) * 100\ncrew_surv = (39\/193) * 100\npass_died = (698\/796) * 100\npass_surv = (98\/796) * 100","a3323469":"crew_died, crew_surv, pass_died, pass_surv","d187eeaf":"labels = ['deceased', 'survived']\ncrew = [crew_died, crew_surv]\ncmap = plt.get_cmap(\"tab20c\")\ncolors = cmap(np.array([9, 10]))\nexplode = (0, 0.1)\nplt.pie(crew, labels=labels,explode=explode, colors=colors,autopct='%1.1f%%', shadow=True, startangle=90)\nplt.title('Crew')","89591b96":"labels = ['deceased', 'survived']\npas = [pass_died, pass_surv]\ncmap = plt.get_cmap(\"tab20c\")\ncolors = cmap(np.array([9, 10]))\nplt.pie(pas, labels=labels, colors=colors, explode=explode, autopct='%1.1f%%', shadow=True, startangle=90)\nplt.title('Passengers')","81bd7df5":"correlation = est.corr()\nsns.heatmap(correlation, annot=True, cmap='summer')","d70e283b":"#map variable Sex to int\nest['Sex'] = est['Sex'].map({'M': 0, 'F': 1})","ec322ecd":"# map column Category to int and make new columns\nest['Crew'] = est['Category'].apply(lambda x: 1 if x =='C' else 0)\nest['Passenger'] = est['Category'].apply(lambda x: 1 if x == 'P' else 0)\nX = est[['Sex', 'Age', 'Crew', 'Passenger']]\ny = est['Survived']","7e317b0a":"#perform train\/test-split\nX_train, X_test, y_train, y_test = train_test_split(X,y, test_size= 0.4)","2ad9d72e":"#scaling\nscaler = StandardScaler()\nX_train = scaler.fit_transform(X_train)\nX_test = scaler.fit_transform(X_test)","bfd1922c":"# Create and train the model\nmodel = LogisticRegression()\nmodel.fit(X_train, y_train)","3122d8a7":"#check accuracy of the train-data\nmodel.score(X_train, y_train)","319b3a27":"model.coef_","efc2adaa":"# predict survival with some new data\na = np.array([0, 70, 0, 1])\nb = np.array([1, 23, 1, 0])\nc = np.array([0, 53, 0, 1])\nd = np.array([1, 21, 0, 1])\ne = np.array([0, 20, 0, 1])\nf = np.array([0, 20, 1, 0])","713d8c88":"new_predictions = np.array([a, b, c, d, e, f])","8ec02733":"new_predictions = scaler.transform(new_predictions)","98a3cdd2":"#probabilities: left p for decease, right p for survival\nmodel.predict(new_predictions)\nmodel.predict_proba(new_predictions)\n   ","f8b2953e":"X = np.array(est[['Sex', 'Age', 'Crew', 'Passenger']])","995d79a3":"X = scaler.transform(X)","d8369eda":"model.predict(X)","27378f7a":"prob = model.predict_proba(X)","92154bdf":"print(prob)","589e6a77":"# List with survial > 50%\nprob_surv = []\nfor i in prob:\n    if i[1] > 0.5:\n        prob_surv.append(i[1])","b5eda2b9":"print(prob_surv)","4160becc":"> Preparation","8415e024":"Exploratory Data Analysis","27f9d637":"Younger people had a greater chance to survive than older people.","15e7bda2":"Among the passengers, people from Sweden and Estonia were the most represented groups.\nWith a total of 894 people, they represent 90% of all passengers.","49d15bd1":"comparison of passengers and crew members","b46bcf49":"Does age or gender affect the chances of survival? More women than men died. At the same time less women then men survived. And, as shown in the gender distribution, \nmen and women are pretty evenly distributed. This means, that women had a higher risk of dying with lower chances of survival than men. ","541920aa":"A comparison of passengers and crew members shows that in the group of crew members the chances of \nsurvival (20.2%) were higher than those of passengers (12.3%).\nCrew members may have worked more often in the service areas near the deck and knew the ship and corridors better.","52aad072":"probablilities for all passengers and chance of survive > 50%","9059a5fc":"From the 989 passengers, 852 died and 137 survived.\nIn percent:\n(852\/989) * 100 = 86 |\n(137\/989) * 100 = 14 |\n86% died, 14% survived","eb22bffe":"Predict Survival with a logistic regression model","96d136dc":"There is a negativ correlation between Age and Survival. This means, that the chance of \nsurvival is higher by younger people. ","d332f7fa":"Correlation between Age and Survival"}}