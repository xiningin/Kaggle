{"cell_type":{"6cbbf53b":"code","3e8fd690":"markdown","4c306b53":"markdown"},"source":{"6cbbf53b":"operators=('+','-','*','\/','(',')')\npriority={'+':1,'-':1,'*':2,'\/':2}\ndef turn_left(operators,postfix):\n    while operators:\n        operator=operators.pop()\n        if operator == '(':\n            break\n        else:\n            postfix.append(operator)\ndef compare(i,postfix,operators):\n    if len(operators)==0:\n        operators.append(i)\n        return\n    while operators:\n        operator=operators.pop()\n        if operator=='(':\n            operators+=['(',i]\n        elif priority[i] > priority[operator]:\n            operators+=[operator,i]\n        else:\n            postfix.append(i)\ndef rest(operators,postfix):\n    while operators:\n        postfix.append(operators.pop())\ndef vaild_infix(infix):\n    pass\ndef number(text):\n    try:\n        return int(text)\n    except:\n        try:\n            return float(text)\n        except:\n            return None\ndef turn_post(infix):\n    infix=infix.split()\n    postfix=[]\n    operators=[]\n    for i in infix:\n        if number(i):\n            postfix.append(i)\n        elif i in operators:\n            if i == '(':\n                operators.append('(')\n            elif i ==')':\n                turn_left(operators,infix)\n            else:\n                compare(i,infix,operators)\n    rest(postfix,operators)\n    return postfix\ndef calculate(postfix):\n    end=[]\n    for i in postfix:\n        if number(i):\n            end.append(i)\n        else:\n            right=end.pop()\n            left=end.pop()\n            end.append(str(eval(left+i+right)))\n    try:\n        return int(end[0])\n    except ValueError:\n        return float(end[0])\ndef reserve_polish():\n    infix=input('\u8bf7\u8f93\u5165\u7b97\u5f0f\uff1a')\n    postfix=turn_post(infix)\n    if postfix is not None:\n        print('\u9006\u6ce2\u5170\u8868\u8fbe\u5f0f\u4e3a:%s' % ' '.join(postfix))\n    else:\n        print('\u7b97\u5f0f\u51fa\u9519')\n    results=calculate(postfix)\n    print('\u8ba1\u7b97\u7ed3\u679c\u4e3a:%s'% results)\nif __name__ == '__main__':\n    reserve_polish()","3e8fd690":"#\u901a\u8fc7Python\u5b9e\u73b0\u9006\u6ce2\u5170\u8ba1\u7b97\u5668\n\u9006\u6ce2\u5170\u8868\u793a\u6cd5\uff08Reverse Polish notation\uff0cRPN\uff0c\u6216\u9006\u6ce2\u5170\u8bb0\u6cd5\uff09\uff0c\u662f\u4e00\u79cd\u662f\u7531\u6ce2\u5170\u6570\u5b66\u5bb6\u626c\u00b7\u6b66\u5361\u8c22\u7ef4\u59471920\u5e74\u5f15\u5165\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u65b9\u5f0f\uff0c\u5728\u9006\u6ce2\u5170\u8bb0\u6cd5\u4e2d\uff0c\u6240\u6709\u64cd\u4f5c\u7b26\u7f6e\u4e8e\u64cd\u4f5c\u6570\u7684\u540e\u9762\uff0c\u56e0\u6b64\u4e5f\u88ab\u79f0\u4e3a\u540e\u7f00\u8868\u793a\u6cd5\u3002\u9006\u6ce2\u5170\u8bb0\u6cd5\u4e0d\u9700\u8981\u62ec\u53f7\u6765\u6807\u8bc6\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u3002\n\u9006\u6ce2\u5170\u8bb0\u6cd5\u4e2d\uff0c\u64cd\u4f5c\u7b26\u7f6e\u4e8e\u64cd\u4f5c\u6570\u7684\u540e\u9762\u3002\u4f8b\u5982\u8868\u8fbe\u201c\u4e09\u52a0\u56db\u201d\u65f6\uff0c\u5199\u4f5c\u201c3 4 + \u201d\uff0c\u800c\u4e0d\u662f\u201c3 + 4\u201d\u3002\u5982\u679c\u6709\u591a\u4e2a\u64cd\u4f5c\u7b26\uff0c\u64cd\u4f5c\u7b26\u7f6e\u4e8e\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u6570\u7684\u540e\u9762\uff0c\u6240\u4ee5\u5e38\u89c4\u4e2d\u7f00\u8bb0\u6cd5\u7684\u201c3 - 4 + 5\u201d\u5728\u9006\u6ce2\u5170\u8bb0\u6cd5\u4e2d\u5199\u4f5c\u201c3 4 - 5 + \u201d\uff1a\u51483\u51cf\u53bb4\uff0c\u518d\u52a0\u4e0a5\u3002\u4f7f\u7528\u9006\u6ce2\u5170\u8bb0\u6cd5\u7684\u4e00\u4e2a\u597d\u5904\u662f\u4e0d\u9700\u8981\u4f7f\u7528\u62ec\u53f7\u3002\u4f8b\u5982\u4e2d\u7f00\u8bb0\u6cd5\u4e2d\u201c3 - 4 * 5\u201d\u4e0e\u201c\uff083 - 4\uff09*5\u201d\u4e0d\u76f8\u540c\uff0c\u4f46\u540e\u7f00\u8bb0\u6cd5\u4e2d\u524d\u8005\u5199\u505a\u201c3 4 5 * - \u201d\uff0c\u65e0\u6b67\u4e49\u5730\u8868\u793a\u201c3 (4 5 *) -\u201d\uff1b\u540e\u8005\u5199\u505a\u201c3 4 - 5 * \u201d\u3002","4c306b53":"eval() \u51fd\u6570\u7528\u6765\u6267\u884c\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u8fbe\u5f0f\uff0c\u5e76\u8fd4\u56de\u8868\u8fbe\u5f0f\u7684\u503c\neval(expression[, globals[, locals]])\neval()\u4e2d\u5fc5\u987b\u662fmust be a string, bytes or code object\n\u5fc5\u987b\u662fstr(\u5b57\u7b26\u4e32\u7684int\uff09\uff08\u5b57\u7b26\u4e32\u7684float\uff09\n\u5982\u679ceval()\u5b57\u7b26\u4e32\u7684\u4e0d\u662fint,float\u4f1a\u62a5\u9519\uff0c(\u6682\u65f6\u8fd9\u4e48\u7406\u89e3\uff0c\u540e\u9762\u5b66\u66f4\u591a\u5728\u6539\u3002\uff09\n"}}