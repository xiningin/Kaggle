{"cell_type":{"2318679e":"code","f86af7ac":"code","3f695703":"code","4eaa3b01":"code","a7c47bf9":"code","d9bb9f8b":"code","2c263c8f":"code","9978ac43":"code","aa1ebf6f":"code","7624e2da":"code","17cef19f":"code","0ec3a8d7":"code","ba30c4c7":"code","ef731e80":"code","94807990":"code","fd245896":"code","ee13e0a9":"code","18a09ccc":"code","0e865a2c":"code","20e2b93c":"code","d4e7d5bc":"code","95dd3698":"code","d24a17d9":"code","b53a6871":"code","051ec85c":"code","0f94eecb":"code","7d3e4734":"code","e33ece42":"code","2ee45372":"code","40a4598e":"code","c4ac35e0":"code","a96fd993":"markdown","e4b72af3":"markdown","b8a5c275":"markdown","c8ce4c76":"markdown","2014246d":"markdown","683de4c6":"markdown","4013a737":"markdown","6d0bd226":"markdown","f801f013":"markdown","f68993e0":"markdown","5bf55c21":"markdown","98250d44":"markdown","225191b7":"markdown","cbdd98ae":"markdown","85705d0d":"markdown","71bc0e89":"markdown","d86a5f7f":"markdown","3c963e54":"markdown","c6740ccb":"markdown","9429dc41":"markdown","941188fe":"markdown","7c3f2933":"markdown","e5d2d365":"markdown","4b019c8a":"markdown","7ad928e3":"markdown","4adc7831":"markdown","3fdf6592":"markdown","a3fa2c1e":"markdown"},"source":{"2318679e":"# Importing libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline\nsns.set_style('darkgrid')","f86af7ac":"# Reading data\ndata_2015 = pd.read_csv('..\/input\/popularity-of-cambridge-university-colleges\/Cam_college_stats\/Cam_stats_2015.csv')\ndata_2016 = pd.read_csv('..\/input\/popularity-of-cambridge-university-colleges\/Cam_college_stats\/Cam_stats_2016.csv')\ndata_2017 = pd.read_csv('..\/input\/popularity-of-cambridge-university-colleges\/Cam_college_stats\/Cam_stats_2017.csv')\ndata_2018 = pd.read_csv('..\/input\/popularity-of-cambridge-university-colleges\/Cam_college_stats\/Cam_stats_2018.csv')\ndata_2019 = pd.read_csv('..\/input\/popularity-of-cambridge-university-colleges\/Cam_college_stats\/Cam_stats_2019.csv')","3f695703":"# Checking the shape of dataframes\nprint(data_2015.shape)\nprint(data_2016.shape)\nprint(data_2017.shape)\nprint(data_2018.shape)\nprint(data_2019.shape)","4eaa3b01":"# Adding year column to each dataframe\ndata_2015['Year'] = 2015\ndata_2016['Year'] = 2016\ndata_2017['Year'] = 2017\ndata_2018['Year'] = 2018\ndata_2019['Year'] = 2019","a7c47bf9":"# Concatenating all dataframes into a single dataframe\ndata = pd.concat([data_2015, data_2016, data_2017, data_2018, data_2019])\n\n# Resetting the index numbers\ndata.reset_index(drop=True, inplace=True)\n\n# Checking the shape of dataframe\nprint(data.shape)","d9bb9f8b":"# Viewing the dataframe\ndata","2c263c8f":"# Generating a quick descriptive statistics of the dataframe\ndata.describe()","9978ac43":"# Generating a quick summary of the DataFrame.\ndata.info()","aa1ebf6f":"# Checking the count of colleges\ndata['College'].value_counts()","7624e2da":"# Checking the number of null values in each series\ndata.isnull().sum()","17cef19f":"# Checking the rows where code is null\ndata.loc[data['Code'].isnull()]","0ec3a8d7":"# Filling null values with 0\ndata.fillna(value=0, inplace=True)","ba30c4c7":"# Replacing 'nul' with 0\ndata['Total admitted'].replace(to_replace='nul', value=0, inplace=True)","ef731e80":"# Converting from object to numeric\ndata['Total admitted'] = pd.to_numeric(data['Total admitted'])\n\n# converting floats to integers\ndata['No of applicants admitted to their 1st choice'] = data['No of applicants admitted to their 1st choice'].astype('int64')\ndata['No of applicants admitted to their 2nd choice'] = data['No of applicants admitted to their 2nd choice'].astype('int64')\ndata['Total admitted'] = data['Total admitted'].astype('int64')\n\n# converting integer to object\ndata['Year'] = data['Year'].astype('str')","94807990":"# Generating a quick summary of the DataFrame.\ndata.info()","fd245896":"print('Total number of applicants: {}'.format(data['1st choice'].sum()))\nprint('Total number of applicants admitted: {}'.format(data['Total admitted'].sum()))\nprint('Percentage of applicants admitted: {}%'.format((data['Total admitted'].sum()\/data['1st choice'].sum()*100).round(1)))","ee13e0a9":"# Grouping by year\nyearly_trend = data.groupby('Year')[['1st choice','Total admitted']].sum().reset_index()\n\n# Renaming columns\nyearly_trend.rename(columns={'1st choice': 'Applicants', 'Total admitted': 'Applicants Admitted'}, inplace=True)\n\n# Viewing the grouped dataframe\nyearly_trend","18a09ccc":"# Melting the grouped dataframe\nyearly_trend_melted = pd.melt(yearly_trend, id_vars=['Year'], value_vars=['Applicants','Applicants Admitted'])\n\n# Plotting the melted dataframe\ng = sns.relplot(data=yearly_trend_melted, x=\"Year\", y=\"value\", col=\"variable\", kind=\"line\", marker='o', facet_kws={'sharey' : False}, height=7, aspect=1)\n\n# Setting the axis labels\ng.set_axis_labels('Year', '')\n\n# Setting the titles\ng.set_titles('{col_name}')\n\n# Setting the layout\ng.tight_layout(w_pad=2)","0e865a2c":"# Creating pivot table\napplicant_pivot = pd.pivot_table(data, values='1st choice', index=['College'], columns=['Year'], aggfunc=np.sum, margins=True, margins_name='Total')\n\n# Sorting rows\napplicant_pivot.sort_values(by='Total', ascending=False, inplace=True)\n\n# Dropping rows\napplicant_pivot.drop(['No preference','Total'], inplace=True)\n\n# Adding total row\napplicant_pivot.loc['Total'] = [applicant_pivot['2015'].sum(), applicant_pivot['2016'].sum(), applicant_pivot['2017'].sum(), applicant_pivot['2018'].sum(), applicant_pivot['2019'].sum(), applicant_pivot['Total'].sum()]\n\n# Viewing the pivot table\napplicant_pivot","20e2b93c":"# Creating pivot table\nadmitted_pivot = pd.pivot_table(data, values='Total admitted', index=['College'], columns=['Year'], aggfunc=np.sum, margins=True, margins_name='Total')\n\n# Sorting rows\nadmitted_pivot.sort_values(by='Total', ascending=False, inplace=True)\n\n# Dropping rows\nadmitted_pivot.drop(['No preference','Total'], inplace=True)\n\n# Adding total row\nadmitted_pivot.loc['Total'] = [admitted_pivot['2015'].sum(), admitted_pivot['2016'].sum(), admitted_pivot['2017'].sum(), admitted_pivot['2018'].sum(), admitted_pivot['2019'].sum(), admitted_pivot['Total'].sum()]\n\n# Viewing the pivot table\nadmitted_pivot","d4e7d5bc":"# Adding preference column using condition\ndata['Preference'] = np.where(data['College']=='No preference','Without Preference','With Preference')","95dd3698":"# Creating a pivot table\npreference_pivot = pd.pivot_table(data, values='1st choice', index=['Preference'], columns=['Year'], aggfunc=np.sum, margins=True, margins_name='Total')\n\n# Dropping row total\npreference_pivot.drop(columns=['Total'], inplace=True)\n\n# Viewing the pivot table\npreference_pivot","d24a17d9":"# Slicing the pivot table to exclude the total row\npreference_pivot_percent = preference_pivot.loc[['With Preference','Without Preference'], :]\n\n# Rewriting the values with it's equivalent percentage value for each year\npreference_pivot_percent['2015'] = (preference_pivot_percent['2015'] \/ preference_pivot_percent['2015'].sum() * 100).round(1)\npreference_pivot_percent['2016'] = (preference_pivot_percent['2016'] \/ preference_pivot_percent['2016'].sum() * 100).round(1)\npreference_pivot_percent['2017'] = (preference_pivot_percent['2017'] \/ preference_pivot_percent['2017'].sum() * 100).round(1)\npreference_pivot_percent['2018'] = (preference_pivot_percent['2018'] \/ preference_pivot_percent['2018'].sum() * 100).round(1)\npreference_pivot_percent['2019'] = (preference_pivot_percent['2019'] \/ preference_pivot_percent['2019'].sum() * 100).round(1)\n\n# Viewing the pivot table in perecentage\npreference_pivot_percent","b53a6871":"# Transposing pivot table for plotting graph\npreference_pivot_percent_t = preference_pivot_percent.transpose()\n\n# Adding a total column\npreference_pivot_percent_t['Total'] = preference_pivot_percent_t['With Preference'] + preference_pivot_percent_t['Without Preference']\n\n# Viewing the transposed pivot table\npreference_pivot_percent_t","051ec85c":"# Initialising the matplotlib figure\nf, ax = plt.subplots(figsize=(7, 7))\n\n# bar chart 1 -> top bars (With Preference group)\nsns.barplot(x=preference_pivot_percent.T.index, y=\"Total\", data=preference_pivot_percent_t, label=\"With Preference\", color='steelblue')\n\n# bar chart 2 -> bottom bars (Without Preference group)\nsns.barplot(x=preference_pivot_percent.T.index, y=\"Without Preference\", data=preference_pivot_percent_t, label=\"Without Preference\", color='midnightblue')\n\n# Setting label locations\nax.set_yticks(np.arange(0, 101, step=10))\n\n# Setting the limit of y-axis\nax.set_ylim(top=100)\n\n# Labelling the axis\nax.set(ylabel=\"Applicants (%)\", xlabel=\"\")\n\n# Adding legend\nax.legend(ncol=2, loc=\"upper right\", frameon=True)\n\n# showing the graph\nplt.show()","0f94eecb":"# Grouping by college after excluding the 'No preference' cohort\ncollege_applicants = data.loc[data['College']!='No preference'].groupby('College').agg({'1st choice': 'sum'}).sort_values(by='1st choice', ascending=False).reset_index()\n\n# Adding a column to show the percentage\ncollege_applicants['Applicants_pct'] = college_applicants[['1st choice']].apply(lambda x:x*100 \/ float(x.sum())).applymap('{:.1f}%'.format)\n\n# Renaming column\ncollege_applicants.rename(columns={'1st choice': 'Applicants'}, inplace=True)\n\n# Viewing the first five rows\ncollege_applicants.head()","7d3e4734":"# Initialising the matplotlib figure\nf, ax = plt.subplots(figsize=(7, 7))\n\n# Plotting the graph\nax = sns.barplot(x=\"College\", y=\"Applicants\", data=college_applicants.head(), palette=\"Blues_r_d\")\n\n# Setting the x-axis tick labels\nax.set_xticklabels(labels=college_applicants['College'].head(), rotation=30)\n\n# Labelling the axis\nax.set(ylabel=\"Applicants\", xlabel=\"\")\n\n# Setting the title\nax.set_title('Colleges with Highest First Choice Preference')\n\n# Setting the bar labels\nax.bar_label(ax.containers[0], labels=college_applicants['Applicants_pct'].head())\n\n# showing the graph\nplt.show()","e33ece42":"# Viewing the last five rows\ncollege_applicants.tail()","2ee45372":"# Initialising the matplotlib figure\nf, ax = plt.subplots(figsize=(7, 7))\n\n# Plotting the graph\nax = sns.barplot(x=\"College\", y=\"Applicants\", data=college_applicants.tail(), palette=\"Blues_r_d\")\n\n# Setting the x-axis tick labels\nax.set_xticklabels(labels=college_applicants['College'].tail(), rotation=30)\n\n# Labelling the axis\nax.set(ylabel=\"Applicants\", xlabel=\"\")\n\n# Setting the title\nax.set_title('Colleges with Highest First Choice Preference')\n\n# Setting the bar labels\nax.bar_label(ax.containers[0], labels=college_applicants['Applicants_pct'].tail())\n\n# showing the graph\nplt.show()","40a4598e":"# Creating column for the number of admittance from no preference pool\ndata['No of applicants admitted from NP'] = data['Total admitted'] - data['No of applicants admitted to their 1st choice'] - data['No of applicants admitted to their 2nd choice']","c4ac35e0":"# Creating pivot table\nnp_admitted_pivot = pd.pivot_table(data, values='No of applicants admitted from NP', index=['College'], columns=['Year'], aggfunc=np.sum, margins=True, margins_name='Total')\n\n# Dropping rows\nnp_admitted_pivot.drop(['No preference', 'Total'], inplace=True)\n\n# Sorting rows\nnp_admitted_pivot.sort_values(by='Total', ascending=False, inplace=True)\n\n# Viewing the pivot table\nnp_admitted_pivot","a96fd993":"### Breakdown of applicant first choice colleges","e4b72af3":"-----------------","b8a5c275":"Findings:\n- The proportion of applicants without a college preference is on a rise since 2016.\n- The biggest jump in proportion of applicants without a college preference was in 2017, with an increase of 15.3% from 2016.","c8ce4c76":"---","2014246d":"### Inspecting null values","683de4c6":"Findings:\n- From those who had a college preference, Murray Edwards College had the lowest number of first choice preference (0.3%) followed by Sidney Sussex College (0.7%), Girton College (0.7%), Robinson College (0.8%), and Lucy Cavendish College (0.9%).\n- Only a combined 3.4% of applicants chose above colleges as their first choice preference, excluding applicants who did not have a college preference.","4013a737":"# Data Exploration","6d0bd226":"Findings:\n- Similar trend in applicants and admittance over the past five years.\n- Number of applicants and admittance has been increasing from 2015 to 2018, with the highest jump of 5219 applicants in 2017.\n- Drop in number of applicants (-259) and admittance (-57) in 2019 compared to 2018.","f801f013":"---","f68993e0":"### What is the trend in applicants and applicants admitted over the years?","5bf55c21":"### Breakdown of applicants admitted by college","98250d44":"---","225191b7":"# Libraries","cbdd98ae":"### Which five colleges had the lowest number of first choice preference?","85705d0d":"Thanks for your time and any feedback that you may have will be appreciated.","71bc0e89":"Findings:\n- Three colleges (Trinity College, King's College, and St John's College) with the highest number of first choice preferences had the lowest number of admittance from the no preference pool.\n- Colleges with the lowest number of first choice preferences are on the top half of the table.","d86a5f7f":"---","3c963e54":"### Total number of applicants and admittance","c6740ccb":"---","9429dc41":"### What is the split of applicants with and without a college preference and how has it changed over the years?","941188fe":"### Breakdown of applicants admitted from the no preference pool by college","7c3f2933":"# Data Analysis","e5d2d365":"----------------------------","4b019c8a":"### Which five colleges had the highest number of first choice preference?","7ad928e3":"------------------------------","4adc7831":"The rows with null values are where there are no college preference, which is expected.<br>\nThe application figures can be integers as they are in headcounts. <br>\nCurrently the data type for two columns are float. NaN needs to be replaced by 0 before converting to integer.<br>\nTotal admitted is of object data type because it contains a text value, nul.","3fdf6592":"Findings:\n- From those who had a college preference, Trinity College had the highest percentage of applicants (18.6%) followed by King's College (9.7%), St John's College (6.9%), Churchill College (4.7%), and Darwin College (4.3%).\n- Top 5 colleges had a combined 44.2% first choice applications, excluding applicants who did not have a college preference.","a3fa2c1e":"--------------------------------------------------------------------------"}}