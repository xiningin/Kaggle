{"cell_type":{"21ddf45f":"code","a3f9e2cf":"code","ce56294f":"code","072f7f3a":"code","c1af7e72":"code","28c1fe70":"code","297b48d6":"code","2374d45d":"code","a6183eca":"code","568c113a":"code","1a7c1e95":"code","6cc950d5":"code","6c74b45f":"code","7fa71495":"code","0629164b":"code","63782788":"code","34d6201b":"code","f414d08d":"code","0fde8562":"code","c400c4db":"markdown","58176785":"markdown","62e00149":"markdown","8e1381f0":"markdown","7f64ec3b":"markdown","66d50475":"markdown","35dab577":"markdown","0af6f25b":"markdown","108656ab":"markdown","fac3bef8":"markdown","baa18e80":"markdown","620f0aee":"markdown","0003d8f2":"markdown","5123a619":"markdown","d9016e69":"markdown","97ed11f9":"markdown","8077ee98":"markdown","968a18b9":"markdown","b30db673":"markdown","64950dc8":"markdown"},"source":{"21ddf45f":"import pandas as pd\nimport math\nimport datetime\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates","a3f9e2cf":"url = \"https:\/\/docs.google.com\/spreadsheets\/d\/e\/2PACX-1vSe-8lf6l_ShJHvd126J-jGti992SUbNLu-kmJfx1IRkvma_r4DHi0bwEW89opArs8ZkSY5G2-Bc1yT\/pub?gid=0&single=true&output=csv\"\ndf = pd.read_csv(url, index_col = 'ADM0_NAME', parse_dates = ['date_epicrv'], dayfirst=True)","ce56294f":"df.info()","072f7f3a":"df_SingleCountry = df.loc['Russian Federation'][['date_epicrv', 'NewCase','CumCase']]","c1af7e72":"df_SingleCountry","28c1fe70":"df_SingleCountry['index'] = range(len(df_SingleCountry))","297b48d6":"df_SingleCountry.info()","2374d45d":"df_SingleCountry.set_index('index', inplace = True)","a6183eca":"df_SingleCountry.info()","568c113a":"df_SingleCountry.drop(len(df_SingleCountry)-1, inplace = True)","1a7c1e95":"fig, ax = plt.subplots(figsize=(15, 7))\nax.set_title(\"Dynamic of new cases\", fontsize=16)\nax.set_xlabel(\"Date\", fontsize=14)\nax.set_ylabel(\"Cases per day\", fontsize=14)\n\nax.plot_date(df_SingleCountry['date_epicrv'], df_SingleCountry['NewCase'], fmt='.-')\nplt.show()","6cc950d5":"t = len(df_SingleCountry)-1\nNo = df_SingleCountry.at[0,'CumCase']\nN = df_SingleCountry.at[t,'CumCase']\nk = math.log(N\/No)\/t\nprint(\"Current illness coefficient is {}\".format(k))","6c74b45f":"df_k = pd.DataFrame()\n\nfor i in range(t):\n    if(i > 0):\n        N = df_SingleCountry.at[i,'CumCase']\n        df_k.at[i, 1] = math.log(N\/No)\/i\n    else:\n        df_k.at[i, 1] = 0\n    df_k.at[i, 0] = df_SingleCountry.at[i, 'date_epicrv']\n","7fa71495":"fig, ax = plt.subplots(figsize=(15, 7))\nax.set_title(\"Dynamic of illness coefficient\", fontsize=16)\nax.set_xlabel(\"Date\", fontsize=14)\nax.set_ylabel(\"Coefficient value\", fontsize=14)\n\nax.plot_date(df_k[0], df_k[1], fmt='.-')\nplt.show()","0629164b":"to_end_July = datetime.date(2020, 7, 31) - datetime.date.today() - datetime.timedelta(days = 1)\n\nif to_end_July.days > 0:\n    Percent = round(math.exp(-k * to_end_July.days) * 100, 1)\n    print(\"Forecast percent of illness people that will be at the end of July is {} %\".format(Percent))\nelse:\n    print('July has gone...')","63782788":"T = round(math.log((N*0.01)\/N)\/-k, 1)\nend_date_to1per = datetime.date.today() + datetime.timedelta(days=T)\nprint(\"Forecast date when only 1% of cases will remain is {}\".format(end_date_to1per.strftime(\"%d.%m.%Y\")))","34d6201b":"T = round(math.log(1\/N)\/-k, 1)\nend_date = datetime.date.today() + datetime.timedelta(days=T)\nprint(\"Forecast date when last case will remain is {}\".format(end_date.strftime(\"%d.%m.%Y\")))","f414d08d":"print(\"This calculation was completed on {}\".format(datetime.date.today().strftime(\"%d.%m.%Y\")))\nprint(\"Current illness coefficient is {}\".format(k))\nif to_end_July.days > 0:\n    print(\"Forecast percent of illness people that will be at the end of July is {} %\".format(Percent))\nprint(\"Forecast date when only 1% of cases will remain is {}\".format(end_date_to1per.strftime(\"%d.%m.%Y\")))\nprint(\"Forecast date when last case will remain is {}\".format(end_date.strftime(\"%d.%m.%Y\")))","0fde8562":"fig, ax1 = plt.subplots(figsize=(15, 5))\n\nax1.set_title(\"Dynamic of new cases\", fontsize=16)\nax1.set_ylabel(\"Cases per day\", fontsize=14)\nax1.plot_date(df_SingleCountry['date_epicrv'], df_SingleCountry['NewCase'], fmt='.-')\nymin = 0\nymax = 12000\nax1.vlines(datetime.date(2020, 5, 1), ymin, ymax, linestyles='dotted', label=\"Start May holidays\", color='r')\nax1.vlines(datetime.date(2020, 5, 22), ymin, ymax, linestyles='dotted', label=\"End of self-isolation in Moscow region\", color='g') \nax1.vlines(datetime.date(2020, 6, 8), ymin, ymax, linestyles='dotted', label=\"End of self-isolation in Moscow\", color='b')\nax1.vlines(datetime.date(2020, 7, 1), ymin, ymax, linestyles='dotted', label=\"Voiting\")\nplt.legend(loc='upper left')\n\n\nfig, ax2 = plt.subplots(figsize=(15, 5))\nax2.set_title(\"Dynamic of illness coefficient\", fontsize=16)\n#ax2.set_xlabel(\"Date\", fontsize=14)\nax2.set_ylabel(\"Coefficient value\", fontsize=14)\nax2.plot_date(df_k[0], df_k[1], fmt='.-')\n\n\n# View period since 01.05.2020\ndf2_k = df_k[df_k[0] >= datetime.date(2020, 5, 1)]\n\nfig, ax3 = plt.subplots(figsize=(15, 5))\nax3.set_title(\"Dynamic of illness coefficient since May\", fontsize=16)\nax3.set_xlabel(\"Date\", fontsize=14)\nax3.set_ylabel(\"Coefficient value\", fontsize=14)\nax3.plot_date(df2_k[0], df2_k[1], fmt='.-')\nymin = 0\nymax = 0.12\nax3.vlines(datetime.date(2020, 5, 1), ymin, ymax, linestyles='dotted', label=\"Start May holidays\", color='r')\nax3.vlines(datetime.date(2020, 5, 22), ymin, ymax, linestyles='dotted', label=\"End of self-isolation in Moscow region\", color='g') \nax3.vlines(datetime.date(2020, 6, 8), ymin, ymax, linestyles='dotted', label=\"End of self-isolation in Moscow\", color='b')\nax3.vlines(datetime.date(2020, 7, 1), ymin, ymax, linestyles='dotted', label=\"Voiting\")\n\nplt.show()","c400c4db":"### Forecast date when only 1% of cases will remain","58176785":"## Summary","62e00149":"### Add and changing index for better useful","8e1381f0":"### Finding the dynamic of illness coefficient","7f64ec3b":"## Processing","66d50475":"### Selecting single country and data for research","35dab577":"### Forecast date when last case will remain","0af6f25b":"Deleting the last row of dataset, because current date is still going.","108656ab":"Visualising illness coefficient on chart","fac3bef8":"## Overview of data information","baa18e80":"## Import libraries and load data","620f0aee":"### Finding the illness coefficient","0003d8f2":"Forecast percent of illness people that will be at the end of July","5123a619":"It decreases at time if pandemic also decreased.","d9016e69":"Read the data of Coronavirus (COVID-19) cases and deaths, prepared by the World Health Organization","97ed11f9":"<h1>Table of Contents<span class=\"tocSkip\"><\/span><\/h1>\n<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#Introduction\" data-toc-modified-id=\"Introduction-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;<\/span>Introduction<\/a><\/span><\/li><li><span><a href=\"#Import-libraries-and-load-data\" data-toc-modified-id=\"Import-libraries-and-load-data-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;<\/span>Import libraries and load data<\/a><\/span><\/li><li><span><a href=\"#Overview-of-data-information\" data-toc-modified-id=\"Overview-of-data-information-3\"><span class=\"toc-item-num\">3&nbsp;&nbsp;<\/span>Overview of data information<\/a><\/span><\/li><li><span><a href=\"#Processing\" data-toc-modified-id=\"Processing-4\"><span class=\"toc-item-num\">4&nbsp;&nbsp;<\/span>Processing<\/a><\/span><ul class=\"toc-item\"><li><span><a href=\"#Selecting-single-country-and-data-for-research\" data-toc-modified-id=\"Selecting-single-country-and-data-for-research-4.1\"><span class=\"toc-item-num\">4.1&nbsp;&nbsp;<\/span>Selecting single country and data for research<\/a><\/span><\/li><li><span><a href=\"#Add-and-changing-index-for-better-useful\" data-toc-modified-id=\"Add-and-changing-index-for-better-useful-4.2\"><span class=\"toc-item-num\">4.2&nbsp;&nbsp;<\/span>Add and changing index for better useful<\/a><\/span><\/li><li><span><a href=\"#Visualising-dynamic-of-new-cases\" data-toc-modified-id=\"Visualising-dynamic-of-new-cases-4.3\"><span class=\"toc-item-num\">4.3&nbsp;&nbsp;<\/span>Visualising dynamic of new cases<\/a><\/span><\/li><li><span><a href=\"#Finding-the-illness-coefficient\" data-toc-modified-id=\"Finding-the-illness-coefficient-4.4\"><span class=\"toc-item-num\">4.4&nbsp;&nbsp;<\/span>Finding the illness coefficient<\/a><\/span><\/li><li><span><a href=\"#Finding-the-dynamic-of-illness-coefficient\" data-toc-modified-id=\"Finding-the-dynamic-of-illness-coefficient-4.5\"><span class=\"toc-item-num\">4.5&nbsp;&nbsp;<\/span>Finding the dynamic of illness coefficient<\/a><\/span><\/li><li><span><a href=\"#Forecast-date-when-only-1%-of-cases-will-remain\" data-toc-modified-id=\"Forecast-date-when-only-1%-of-cases-will-remain-4.6\"><span class=\"toc-item-num\">4.6&nbsp;&nbsp;<\/span>Forecast date when only 1% of cases will remain<\/a><\/span><\/li><li><span><a href=\"#Forecast-date-when-last-case-will-remain\" data-toc-modified-id=\"Forecast-date-when-last-case-will-remain-4.7\"><span class=\"toc-item-num\">4.7&nbsp;&nbsp;<\/span>Forecast date when last case will remain<\/a><\/span><\/li><\/ul><\/li><li><span><a href=\"#Summary\" data-toc-modified-id=\"Summary-5\"><span class=\"toc-item-num\">5&nbsp;&nbsp;<\/span>Summary<\/a><\/span><\/li><\/ul><\/div>","8077ee98":"Calculating illness coefficient for each day","968a18b9":"### Visualising dynamic of new cases","b30db673":"Visualization of the dynamics of new cases on the chart","64950dc8":"## Introduction\n\nThis research focused on forecast the end date of coronavirus pandemic.\nOfficial data, prepared by World Helth Organization (WHO) is used:\n* https:\/\/data.humdata.org\/organization\/c021f6be-3598-418e-8f7f-c7a799194dba,\n* https:\/\/covid19.who.int\/\n\nThe model of bacterial growth is used as mathematical model for finding the growth coefficient of cases and forecast the end date.\n\n$$N = N_0 \\cdot \\exp^{k T},$$\n\nwhere: $N$ - number of cases at the end of period $T$, $N_0$ - number of cases at start of period $T$, $k$ - the growth coefficient of cases"}}