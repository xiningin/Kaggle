{"cell_type":{"efaeb502":"code","c1e345a8":"code","8ce40dbe":"code","03f8a7e8":"code","b85073f2":"code","6c213171":"code","4b5866d9":"code","2e50cd9e":"code","c70b800d":"code","6b874c66":"code","426729ed":"code","56b3a12c":"code","0cc6bedd":"code","dd2f5611":"code","7851eba2":"code","6da4ab59":"code","240d2701":"code","d9a2f803":"code","db06e6c0":"code","9630311a":"code","7225a01d":"code","a3c70f11":"code","31cc0675":"code","b810b3de":"code","fcd19b10":"code","0868a6d4":"code","fc29399e":"code","48d2e6b7":"code","cf3858f5":"code","276ceeae":"code","0b4169ba":"code","1616fd4d":"code","b2ed1b93":"code","6a3c8d48":"code","e01cfb1f":"code","fad849f2":"code","c1df8c0a":"code","2caff326":"code","6698d5d2":"code","3d1e498e":"code","e0aff9ba":"code","6958d41f":"code","30d31bfc":"code","ed72d615":"code","d91d70f4":"code","7148520d":"code","0e7bde75":"code","fd0c530b":"code","70285114":"code","73a8993a":"code","6c2af40a":"code","fde3aa61":"code","e6ab47da":"code","fb84b10b":"code","61f109ea":"code","95aa53fc":"code","c779ebc6":"code","264fb2f7":"code","62da984c":"code","c3b6e773":"code","352797fe":"code","80fb6a84":"code","0b1c06bf":"code","0f884eea":"code","e05f2a89":"code","354e3ea0":"code","aa56c892":"code","c4120331":"code","23a6ce81":"code","60ea14e8":"code","2d4cc710":"code","a7e6cf22":"code","f239ad38":"code","27cd2494":"code","fa534544":"code","cbbbff5a":"code","73a6cd7b":"code","4e47eef9":"code","e9fd87bb":"code","a5d7463e":"code","1acf1c60":"code","d2277da1":"markdown","b38e05e5":"markdown","cc932f4a":"markdown","361dbecc":"markdown","ebd5132e":"markdown","1b5dae6b":"markdown","bfaa3699":"markdown","8b4edc26":"markdown","d7741666":"markdown","38c55ea4":"markdown","edb1375a":"markdown","641833bd":"markdown","3391a1a5":"markdown","8eaabfde":"markdown","cce74352":"markdown"},"source":{"efaeb502":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\nimport seaborn as sns","c1e345a8":"train=pd.read_csv('..\/input\/empoyee-promotion\/train.csv')\ntrain_df=pd.read_csv('..\/input\/empoyee-promotion\/train.csv')","8ce40dbe":"train.head()","03f8a7e8":"train.info()","b85073f2":"print(train['is_promoted'].value_counts())\ntrain['is_promoted'].value_counts().plot(kind='bar',figsize=(5,5))\n","6c213171":"train.nunique()","4b5866d9":"categorical_columns=['department','region','education','gender','recruitment_channel','no_of_trainings','previous_year_rating',\n                   'age','KPIs_met >80%','awards_won?']\n\ncontinuous_column=['avg_training_score']\n\nTarget=['is_promoted']\n","2e50cd9e":"((train.isnull().sum()\/train.shape[0])*100).plot(kind='bar')\nplt.ylabel('Percentage of missing values')\nplt.xlabel('Variables')\nplt.title('Quantifying missing data')","c70b800d":"train_promoted=train[train['is_promoted']==1]\ntrain_not_promoted=train[train['is_promoted']==0]","6b874c66":"((train_promoted.isnull().sum()\/train_promoted.shape[0])*100).plot(kind='bar')\nplt.ylabel('Percentage of missing values')\nplt.xlabel('Variables')\nplt.title('Quantifying missing data')\nprint(train_promoted.isnull().sum())","426729ed":"((train_not_promoted.isnull().sum()\/train_not_promoted.shape[0])*100).plot(kind='bar')\nplt.ylabel('Percentage of missing values')\nplt.xlabel('Variables')\nplt.title('Quantifying missing data')\nprint(train_not_promoted.isnull().sum())","56b3a12c":"train.describe(include=np.number)","0cc6bedd":"train.describe(include=np.object)","dd2f5611":"train[['department','region','education','gender','recruitment_channel']].head()","7851eba2":"## conversion of object type categories to numeric values","6da4ab59":"train['education']=train['education'].bfill()\ntrain['previous_year_rating']=train['previous_year_rating'].ffill()","240d2701":"from sklearn.preprocessing import LabelEncoder\nlbl=LabelEncoder()\nfor col in ['department','region','education','gender','recruitment_channel']:\n    train[col]=lbl.fit_transform(train[col])   ","d9a2f803":"#### Imputation of missing Values","db06e6c0":"from scipy.stats import iqr\nfor col in train.columns:\n    print(\"The standard deviation of\",format(col),train[col].std())\n    print(\"The skewness of\",format(col),train[col].skew())\n    print(\"The Minimum of\",format(col),train[col].min())\n    print(\"The IQR of\",format(col),iqr(train[col]))\n    print(\"The Maximun of\",format(col),train[col].max())\n    print('*'*50)\n    print('*'*50)\n        ","9630311a":"import statsmodels.api as sm\nfrom scipy.stats import norm\nimport pylab\nfrom scipy.stats import kstest, norm\nfrom statsmodels.stats.diagnostic import lilliefors\nfrom scipy.stats import shapiro\nimport scipy.stats as stats\nfrom scipy.stats import normaltest\nfrom scipy.stats import jarque_bera","7225a01d":"##Kolmogorov Smirnov test","a3c70f11":"train=np.reshape(np.array(train),(1,-1))\nks_statistic, p_value = kstest(train,'norm')\nif(p_value>0.05):\n    print(\"Data is Gaussian Distributed\")\nelse:\n    print(\"Data is Not Gaussian distributed\")","31cc0675":"##Shapiro Wilk test","b810b3de":"stat,p_value=shapiro(train)\nif(p_value>0.05):\n    print(\"Data is Gaussian Distributed\")\nelse:\n     print(\"Data is Not Gaussian distributed\")\n    ","fcd19b10":"##D\u2019Agostino\u2019s K-squared test","0868a6d4":"##jarque_bera test","fc29399e":"stat,p_value=jarque_bera(train)\nif(p_value>0.05):\n    print(\"Data is Gaussian Distributed\")\nelse:\n     print(\"Data is Not Gaussian distributed\")\n    ","48d2e6b7":"train_df['education']=train_df['education'].bfill()\ntrain_df['previous_year_rating']=train_df['previous_year_rating'].ffill()","cf3858f5":"from sklearn.preprocessing import LabelEncoder\nlbl=LabelEncoder()\nfor col in ['department','region','education','gender','recruitment_channel']:\n    train_df[col]=lbl.fit_transform(train_df[col]) ","276ceeae":"### Q-Q Plot","0b4169ba":"sm.qqplot(train_df,line='45')\npylab.show()\nprint(\"Data is Not Gaussian distributed \")","1616fd4d":"pd.plotting.hist_frame(train_df, figsize=(15,20))","b2ed1b93":"categorical_columns=['department','region','education','gender','recruitment_channel','no_of_trainings','previous_year_rating',\n                   'age','KPIs_met >80%','awards_won?']\n\ncontinuous_column=['avg_training_score']\n\nTarget=['is_promoted']","6a3c8d48":"## Distribution of varibales in terms of Histogram and Boxplot","e01cfb1f":"for col in ['department','region','education','gender','recruitment_channel','no_of_trainings','previous_year_rating',\n        'age','KPIs_met >80%','awards_won?','avg_training_score','is_promoted']:\n    f,(ax1,ax2)=plt.subplots(1,2)\n    train_df[col].plot(kind='hist', ax=ax1)\n    train_df[col].plot(kind='box', ax=ax2)\n    ax1.set_title('Histogram of '+str(col))\n    ax2.set_title('Boxplot of '+str(col))\n    \n    \n    ","fad849f2":"## ploting of categorical columns","c1df8c0a":"Not_promoted_df=train_df[train_df['is_promoted']==0]\npromoted_df=train_df[train_df['is_promoted']==1]","2caff326":"GroupedData=train_df.groupby(['is_promoted']).mean()\nGroupedData","6698d5d2":"train_df.head()","3d1e498e":"train_df=train_df.rename(columns={'KPIs_met >80%':'KPI','awards_won?':'awards_won'})","e0aff9ba":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df.no_of_trainings,shade=True, color=\"r\",bw=0.5)\nkde_plot = sns.kdeplot(promoted_df.no_of_trainings,shade=True, color=\"b\",bw=0.5)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to no_of_trainings\")","6958d41f":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df.age,shade=True, color=\"r\",bw=0.5)\nkde_plot = sns.kdeplot(promoted_df.age,shade=True, color=\"b\",bw=0.5)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to age\")\n","30d31bfc":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df.previous_year_rating,shade=True, color=\"r\",bw=0.1)\nkde_plot = sns.kdeplot(promoted_df.previous_year_rating,shade=True, color=\"b\",bw=0.1)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to previous_year_rating\")","ed72d615":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df.length_of_service,shade=True, color=\"r\",bw=0.1)\nkde_plot = sns.kdeplot(promoted_df.length_of_service,shade=True, color=\"b\",bw=0.1)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to length_of_service\")","d91d70f4":"Not_promoted_df","7148520d":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df['KPIs_met >80%'],shade=True, color=\"r\",bw=0.2)\nkde_plot = sns.kdeplot(promoted_df['KPIs_met >80%'],shade=True, color=\"b\",bw=0.2)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to KPIs_met >80%\")","0e7bde75":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df['awards_won?'],shade=True, color=\"r\",bw=0.5)\nkde_plot = sns.kdeplot(promoted_df['awards_won?'],shade=True, color=\"b\",bw=0.5)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to awards_won?\")","fd0c530b":"fig,ax=plt.subplots(figsize=(20,6))\nsns.kdeplot(Not_promoted_df.avg_training_score,shade=True, color=\"r\",bw=0.1)\nkde_plot = sns.kdeplot(promoted_df.avg_training_score,shade=True, color=\"b\",bw=0.1)\nkde_plot.legend(labels=['Not_promoted', 'promoted'])\nfig.suptitle(\"Density plot of promoted\/Notpromoted empoyees with respect to avg_training_score\")","70285114":"### Some other Visualisation ","73a8993a":"sns.catplot(x='region',y='avg_training_score',hue='is_promoted',data=train_df,height=15, aspect=3.0)","6c2af40a":"sns.catplot(x='education',y='avg_training_score',hue='is_promoted',data=train_df,height=15, aspect=3.0)","fde3aa61":"sns.catplot(x='gender',y='avg_training_score',hue='is_promoted', data=train_df)","e6ab47da":"##Male employees got more promotion than female employees","fb84b10b":"sns.catplot(x='recruitment_channel',y='avg_training_score',hue='is_promoted', data=train_df)","61f109ea":"##  reffered recruitment channel has least observations , as in other channel recruited employees got promotion","95aa53fc":"sns.catplot(x='no_of_trainings',y='avg_training_score',hue='is_promoted', data=train_df)","c779ebc6":"## promoted employees got no of trainings with in the range of 1,2,3 mostly","264fb2f7":"sns.catplot(x='age',y='avg_training_score',hue='is_promoted', data=train_df,height=15, aspect=3.0)","62da984c":"## Most no of promoted employees are in the range of age between 24 and 42 .promoted employees are less in the range of age between 20 to 22 & 50 to 60","c3b6e773":"sns.catplot(x='KPI',y='avg_training_score',hue='is_promoted', data=train_df,height=6, aspect=3.0)","352797fe":"### Most of promoted employees met kpi and their avg score of training is more","80fb6a84":"sns.catplot(x='awards_won',y='avg_training_score',hue='is_promoted', data=train_df,height=6, aspect=3.0)","0b1c06bf":"### Most of Promoted employees won the award","0f884eea":"categorical_columns=['department','region','education','gender','recruitment_channel','no_of_trainings',\n                   'age','KPIs_met >80%','awards_won?']\n\ncontinuous_column=['avg_training_score','previous_year_rating']\n\nTarget=['is_promoted']","e05f2a89":"sns.catplot(x='gender',y='no_of_trainings',hue='is_promoted', data=train_df,height=6, aspect=3.0)","354e3ea0":"sns.catplot(x='education',y='no_of_trainings',hue='is_promoted', data=train_df,height=6, aspect=3.0)","aa56c892":"sns.catplot(x='recruitment_channel',y='no_of_trainings',hue='is_promoted', data=train_df,height=6, aspect=3.0)","c4120331":"sns.catplot(x='department',y='no_of_trainings',hue='is_promoted', data=train_df,height=6, aspect=3.0)","23a6ce81":"sns.catplot(x='department',y='avg_training_score',hue='is_promoted', data=train_df,height=6, aspect=3.0)","60ea14e8":"sns.catplot(x='department',y='previous_year_rating',hue='is_promoted', data=train_df,height=6, aspect=3.0)","2d4cc710":"##Correlation Matrix of variables","a7e6cf22":"plt.figure(figsize=(12, 8))\n\nhr_corr = train_df.corr()\nsns.heatmap(hr_corr, \n            xticklabels = hr_corr.columns.values,\n            yticklabels = hr_corr.columns.values,\n            annot = True)","f239ad38":"categorical_columns=['department','region','education','gender','recruitment_channel','no_of_trainings','previous_year_rating',\n                   'age','KPIs_met >80%','awards_won?']\n\ncontinuous_column=['avg_training_score']\n\nTarget=['is_promoted']","27cd2494":"## Chi square Test with target varibale and categorical variable","fa534544":"def FunctionChisq(inpData, TargetVariable, CategoricalVariablesList):\n    from scipy.stats import chi2_contingency\n    SelectedPredictors=[]\n    for predictor in CategoricalVariablesList:\n        CrossTabResult=pd.crosstab(index=inpData[TargetVariable], columns=inpData[predictor])\n        ChiSqResult = chi2_contingency(CrossTabResult)\n        \n        # If the ChiSq P-Value is <0.05, that means we reject H0\n        if (ChiSqResult[1] < 0.05):\n            print(predictor, 'is correlated with', TargetVariable, '| P-Value:', ChiSqResult[1])\n            SelectedPredictors.append(predictor)\n        else:\n            print(predictor, 'is NOT correlated with', TargetVariable, '| P-Value:', ChiSqResult[1])        \n            \n    return(SelectedPredictors)","cbbbff5a":"categorical_columns=['department','region','education','gender','recruitment_channel','no_of_trainings','previous_year_rating',\n'age','KPI','awards_won']\nFunctionChisq(inpData=train_df, TargetVariable='is_promoted',CategoricalVariablesList=categorical_columns)","73a6cd7b":"## Annova Test with target varibale and continuous variable","4e47eef9":"def FunctionAnova(inpData, TargetVariable, ContinuousPredictorList):\n    from scipy.stats import f_oneway\n    SelectedPredictors_cont=[]\n    for predictor in ContinuousPredictorList:\n        CategoryGroupLists=inpData.groupby(TargetVariable)[predictor].apply(list)\n        AnovaResults = f_oneway(*CategoryGroupLists)\n        \n        # If the ANOVA P-Value is <0.05, that means we reject H0\n        if (AnovaResults[1] < 0.05):\n            print(predictor, 'is correlated with', TargetVariable, '| P-Value:', AnovaResults[1])\n            SelectedPredictors_cont.append(predictor)\n        else:\n            print(predictor, 'is NOT correlated with', TargetVariable, '| P-Value:', AnovaResults[1])\n    \n    return(SelectedPredictors_cont)","e9fd87bb":"continuous_column=['avg_training_score']\nFunctionAnova(inpData=train_df, TargetVariable='is_promoted', ContinuousPredictorList=continuous_column)","a5d7463e":"GroupedData","1acf1c60":"train_df.boxplot(column='avg_training_score', by='is_promoted', figsize=(10,8), vert=True)","d2277da1":"### Quantifying missing data on promoted train data","b38e05e5":"### Quantifying missing data on full data","cc932f4a":"Note:- Feautre selection and feautre elimination will be done at the basis of Feaure Importance at the time of Model validation\n    \n       For EDA purpose , to impute missing value used bfill\/ffill but later at model preparation \n       will be using Miceimputer,Knnimputer,etc\n    \n        \n       Dataset is imbalanced may be have to use smote\/randomoversampler to create synthetic data\n       \n    \n    \n    \n    ","361dbecc":"in case of outlier treatmentwe can observe the mean score of each category in terms of all varibales in the dataset \nso eventhough the dataset is imbalanced ,the avg score are all close with respect to each category,\nexcept avg_training_score but in the above visualisation boxplot no values can be observed outside the interquartile range,\nhence we have to go with vanilla iteration and then had to decide on outlier treatment or business logic will suffice\n","ebd5132e":"\n1. region 7,2,13,27 has the most score of avg training score of promoted employees region 33 & 21 has low avg training score.region 3 has low nof of observation in terms of avg training score.\n2. Most of Promoted employees won the award.\n3. Most of promoted employees met kpi and their avg score of training is more.\n4. Most no of promoted employees are in the range of age between 24 and 42 .promoted employees are less in the range of age between 20 to 22 & 50 to 60.\n5. promoted employees got no of trainings with in the range of 1,2,3 mostly.\n6. reffered recruitment channel has least observations , as in other channel recruited employees got promotion.\n7. Male employees got more promotion than female employees.\n8. in terms of all category in Education variable ,promoted employees are scoring more though with less samples ,Below secondary category has least no of samples\n\n\n\n\n\n","1b5dae6b":"Statistical measurement of relationship between variables\n\nContinuous Vs Continuous ---- Correlation matrix\n\nCategorical Vs Continuous---- ANOVA test\n\nCategorical Vs Categorical--- Chi-Square test","bfaa3699":"in terms of all category in Education variable ,promoted employees are scoring more though with less samples ,Below secondary category has least no of samples","8b4edc26":"### The Dataset is imbalanced","d7741666":"### Quantifying missing data on not promoted train data","38c55ea4":"1. in terms of no of trainings the Not promoted employess got more no of trainings but keeping in mind the dataset is imbalanced over here.\n2. there is such significant change can be visualised in terms of age in non_promoted or promoted employess.\n3. in terms of previous year rating no of promoted employess got significant rise in rating '5'.\n4. with in the 2 to 5 years of service the no of non promoted employess is more than promoted employess,most number of promoted employess are scattered with in 7 to 33 years.\n   And No promoted employess served after than 35 years.\n5. in terms of KPI there is marginal changes as the mean score of KPI of promoted employess is slightly higher than non promoted employess.\n6. in awards won promoted no of empoyess got slightly more no of awards with respect to non promoted employess.\n7. in avg_training_score between 42 to 60 non promoted employees got maximum no of score still did not got promotion but avg score of training is more for promoted employess than non promoted employess.","edb1375a":"1. The avg of avg_training score is more in terms of promoted employes than not promotes employess also the awards won,KPI_met is high in terms of promoted employess though  dataset is imabalanced.\n\n2. in terms of promoted employess avg of education score\/items is higher than not promoted employess . \n\n3. in terms of Gender male employees are more in not promoted category than promoted.\n\n4. no_of_trainings and age are probably equally distributed and provided eaually to both the category (not_promoted\/promoted)\n\n5. length_of_service avg score is merely high for not prormoted employees than promoted employess but our dataset is imbalanced\n\n6. As we can observe no such biassness from recruitment_channel avg score \n\n7. previous_year_rating avg score is more in terms of Promoted employess and Not prormoted employess\n\n8. in terms of eduction specfic education mattered probably most in terms of promotion.\n\n9. Region wise with education  probably has an slight impact in terms of promotion\n","641833bd":"region 7,2,13,27 has the most score of avg training score of promoted employees region 33 & 21 has low avg training score.region 3 has low nof of observation in terms of avg training score","3391a1a5":"### Density countour plot","8eaabfde":"1. Female employees got less no of trainings.\n2. Most no of training done with bachelor's Educated employees and less no of training recieved by Below Secondary's eductaed employee.\n3. referred employees got least no of trainings and Sourcing employees got more no of trainings.\n4. procurement department empoyees got more no of trainings and also sales&Marketing , but HR, Finance, Analytics & Leagl recieved less no of trainigs.\n5. sales&Marketing,operations &procurement got avg training scoreand also promoted more and Legal,Hr & R&d department got less no of promotions.\n6. previous rating score is distributed over all department sectors","cce74352":"### checking distribution of data with variuos ways"}}