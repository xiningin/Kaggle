{"cell_type":{"97b46785":"code","b48f1056":"code","4aabb23b":"code","ab4b7fee":"code","929ff2e3":"code","1255f707":"code","d3cb42d1":"code","c4c20edf":"code","04321b6e":"code","e7706cf1":"code","e9dde5fc":"code","e2031832":"code","e32cec07":"code","fda16291":"code","9691aa7b":"code","5247f157":"code","06c1ff60":"code","2421b4cd":"code","005edc10":"code","beba045a":"code","349fecfe":"code","3f593e28":"code","ae0a2433":"code","f59d4d6f":"code","3b9ad46c":"code","87bbee7e":"code","df7d12c5":"markdown","619e3dc6":"markdown","ed36949b":"markdown","edbf52c8":"markdown","512f3443":"markdown","593d795d":"markdown","35a54909":"markdown","7864bbb5":"markdown","1fce9957":"markdown","74a50bdf":"markdown","5260b735":"markdown","aa7036af":"markdown","fb1b1c3b":"markdown","e98a0a32":"markdown","41f69bb2":"markdown","2033ba0e":"markdown","6a142a5a":"markdown","45d45148":"markdown","47900c71":"markdown","36b74168":"markdown","b6e009eb":"markdown","e8fe3dc0":"markdown","bd1fab76":"markdown","1b6ca887":"markdown","d84c150a":"markdown","78341db3":"markdown","953a8693":"markdown","26b1d616":"markdown","5c76ebb5":"markdown","c48117ae":"markdown","9ae62e03":"markdown","d2f641c4":"markdown","540f6007":"markdown","0eef95ed":"markdown","acc64ba6":"markdown","54357615":"markdown","0585fd6b":"markdown","c6c56066":"markdown"},"source":{"97b46785":"import pandas as pd\nimport numpy as np\nimport math\nimport cufflinks as cf\nimport plotly\nimport plotly.express as px\nimport plotly.graph_objects as go\n%matplotlib inline\n\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot \ninit_notebook_mode(connected=True)\ncf.go_offline()","b48f1056":"df_vac = pd.read_csv('..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv',\n                 usecols=[\"country\", \"iso_code\", \"date\",\"people_vaccinated\", \"vaccines\"],\n                 parse_dates = ['date'])","4aabb23b":"df_vac.info()","ab4b7fee":"df_vac_na = df_vac[df_vac['iso_code'].isnull()]\n\ndf_vac_na['country'].unique()","929ff2e3":"# This command will also drop the rows that has no value in their people vaccinated column\n# Since this column is cumulative sum, we are going to use max() function to find our value in final data frame\n\ndf_vac = df_vac.dropna()\ndf_vac.info()","1255f707":"df_vac = pd.DataFrame(df_vac.groupby([\"country\",\"iso_code\",'vaccines'])[\"people_vaccinated\"].max())\n\n# Resetting indexes to use the data frame in merge function\n\ndf_vac.reset_index(level=0, inplace=True)\ndf_vac.reset_index(level=0, inplace=True)\ndf_vac.reset_index(level=0, inplace=True)\n\ndf_vac.head()","d3cb42d1":"df_vac.info()","c4c20edf":"df_pop = pd.read_csv('..\/input\/population-by-country-2020\/population_by_country_2020.csv')\n\ndf_pop.rename(columns={'Country (or dependency)': 'country'}, inplace=True)\n\ndf_pop.info()","04321b6e":"df = pd.merge(df_vac, df_pop, how='left', on='country')","e7706cf1":"df.info()","e9dde5fc":"df_na = df[df['Population (2020)'].isnull()]\n\ndf_na['country'].unique()","e2031832":"df_pop['country'].unique()","e32cec07":"df_pop.country = df_pop.country.replace().replace({\n    \"C\u00f4te d'Ivoire\": \"Cote d'Ivoire\", \n    \"Czech Republic (Czechia)\": \"Czechia\", \n    \"Turks and Caicos\": \"Turks and Caicos Islands\"})\n\ndf = pd.merge(df_vac, df_pop, how='left', on='country')\n\ndf_na = df[df['Population (2020)'].isnull()]\n\ndf_na['country'].unique()","fda16291":"df.info()","9691aa7b":"# Before dropping rows, drop the Migrants (net) column since it includes\n# more missing data and dropping NaN values will cause loss of data\n\ndel df['Migrants (net)']\n\n# Delete the Yearly Change, Fert. Rate, Med. Age, Urban Pop %, World Share columnssince they are not relevant\n\ndel df[\"Yearly Change\"]\ndel df[\"Fert. Rate\"]\ndel df[\"Med. Age\"]\ndel df[\"Urban Pop %\"]\ndel df[\"World Share\"]\n\n# Drop NaN columns one more time to remove the rows for Guernsey and Jersey\n\ndf_f = df.dropna()\n\ndf_f.info()","5247f157":"df_f = df_f.reset_index(drop=True)\n\ndf_f.head()","06c1ff60":"df_f['vaccines'].unique()","2421b4cd":"boo1 = df_f['vaccines'].str.contains('Pfizer\/BioNTech')\ndf_boo1 = pd.DataFrame(boo1).reset_index(drop=True)\ndf_boo1.rename(columns={'vaccines': 'Pfizer\/BioNTech'}, inplace=True)\n\nboo2 = df_f['vaccines'].str.contains('Sputnik V')\ndf_boo2 = pd.DataFrame(boo2).reset_index(drop=True)\ndf_boo2.rename(columns={'vaccines': 'Sputnik V'}, inplace=True)\n\nboo3 = df_f['vaccines'].str.contains('Oxford\/AstraZeneca')\ndf_boo3 = pd.DataFrame(boo3).reset_index(drop=True)\ndf_boo3.rename(columns={'vaccines': 'Oxford\/AstraZeneca'}, inplace=True)\n\nboo4 = df_f['vaccines'].str.contains('Sinopharm\/Beijing')\ndf_boo4 = pd.DataFrame(boo4).reset_index(drop=True)\ndf_boo4.rename(columns={'vaccines': 'Sinopharm\/Beijing'}, inplace=True)\n\nboo5 = df_f['vaccines'].str.contains('Moderna')\ndf_boo5 = pd.DataFrame(boo5).reset_index(drop=True)\ndf_boo5.rename(columns={'vaccines': 'Moderna'}, inplace=True)\n\nboo6 = df_f['vaccines'].str.contains('Sinovac')\ndf_boo6 = pd.DataFrame(boo6).reset_index(drop=True)\ndf_boo6.rename(columns={'vaccines': 'Sinovac'}, inplace=True)\n\nboo7 = df_f['vaccines'].str.contains('Covaxin')\ndf_boo7 = pd.DataFrame(boo7).reset_index(drop=True)\ndf_boo7.rename(columns={'vaccines': 'Covaxin'}, inplace=True)\n\nboo8 = df_f['vaccines'].str.contains('EpiVacCorona')\ndf_boo8 = pd.DataFrame(boo8).reset_index(drop=True)\ndf_boo8.rename(columns={'vaccines': 'EpiVacCorona'}, inplace=True)\n\nboo9 = df_f['vaccines'].str.contains('Sinopharm\/Wuhan')\ndf_boo9 = pd.DataFrame(boo9).reset_index(drop=True)\ndf_boo9.rename(columns={'vaccines': 'Sinopharm\/Wuhan'}, inplace=True)\n\nresult = pd.concat([df_boo1, df_boo2, df_boo3, df_boo4, df_boo5, df_boo6, df_boo7, df_boo8, df_boo9], axis=1)\n\nresult = result.astype(int)\n\nresult.head()","005edc10":"df_f = pd.concat([df_f, result], axis=1)\n\ndf_f['Different Vaccines'] = df_f['Pfizer\/BioNTech'] + df_f['Sputnik V']+ df_f['Oxford\/AstraZeneca']+ df_f['Sinopharm\/Beijing']+ df_f['Moderna']+ df_f['Sinovac']+ df_f['Covaxin']+ df_f['EpiVacCorona']+ df_f['Sinopharm\/Wuhan']\n\ndf_f.head()","beba045a":"# Create a data frame to calculate the usage of every individual vaccine in different countries\n\nsumm = df_f.iloc[:,8:17].sum()\ndf_vacc = pd.DataFrame(summ, columns=['Usage'])\ndf_vacc = df_vacc.sort_values('Usage', ascending=False)\ndf_vacc.reset_index(level=0, inplace=True)\n\n# Visualise the vaccine usage\n\nfig = px.bar(df_vacc,\n              x = 'index',\n              y = 'Usage',\n              color='Usage',\n              hover_name = 'index',\n              hover_data = ['Usage'],\n              color_continuous_scale = 'Magenta',\n              labels = {'index':'Vaccine','Usage':'# of Countries Using'},\n              height=500,\n              text = 'Usage')\n\nfig.update_layout(uniformtext_minsize = 15,\n                   xaxis_tickangle = -45,\n                   title = 'Usage of Vaccines by Countries',\n                   title_x = 0.5,\n                   showlegend=False)\n\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside')\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\n\nfig.update(layout_coloraxis_showscale=False)\nfig.update_layout({'plot_bgcolor': 'rgba(0, 0, 0, 0)', 'paper_bgcolor': 'rgba(0, 0, 0, 0)',})\n\nfig.show()","349fecfe":"df_f['Log Scale'] = df_f['people_vaccinated'].apply(lambda x : math.log2(x+1))\n\ndf_f_sorted = df_f.sort_values('Different Vaccines', ascending = False)\n\nfig = px.bar(df_f_sorted,\n              x = 'country',\n              y = 'Different Vaccines',\n              color='Different Vaccines',\n              hover_name = 'country',\n              hover_data = ['vaccines'],\n              color_continuous_scale = 'Blues',\n              labels = {'country':'Country', 'vaccines':'Used Vaccines'},  # changing the labels in to tooltip\n              height=500)\n\nfig.update_layout(uniformtext_minsize = 15,\n                   xaxis_tickangle = -45,\n                   title = 'Total Number of Different Vaccines Used by Countries',\n                   title_x = 0.5)\n\nfig.update_layout({'plot_bgcolor': 'rgba(0, 0, 0, 0)', 'paper_bgcolor': 'rgba(0, 0, 0, 0)',})\n\nfig.update(layout_coloraxis_showscale=False)\n\nfig.show()","3f593e28":"fig = px.choropleth(df_f,\n                    locations=\"country\", \n                    locationmode='country names',\n                    color=\"Different Vaccines\", \n                    hover_name=\"country\", \n                    hover_data=['Different Vaccines','vaccines'],\n                    color_continuous_scale=\"Blues\",\n                    labels={'country':'Country','vaccines':'Used Vaccines'})\n\nfig.update_layout(title=\"Total Number of Different Vaccines Used by Countries\",\n                  title_x=0.5)\n\nfig.update(layout_coloraxis_showscale=False)\n\nfig.show()","ae0a2433":"# Sort data frame by total_vaccinations\ndf_f_sorted = df_f.sort_values('people_vaccinated', ascending = False)\n\n# Select first 10 rows\ndf_f_sorted = df_f_sorted.iloc[0:19,:]\n\n# Plot the bar chart\nfig = px.bar(df_f_sorted,\n              x = 'country',\n              y = 'people_vaccinated',\n              color='Log Scale',\n              hover_name = 'country',\n              hover_data = ['people_vaccinated'],\n              color_continuous_scale = 'mint',\n              labels = {'country':'Country','people_vaccinated':'People Vaccinated'},\n              height=500,\n              text='people_vaccinated')\n\nfig.update_layout(uniformtext_minsize = 15,\n                   xaxis_tickangle = -45,\n                   title = 'Total Vaccinated People by Top 20 Countries',\n                   title_x = 0.5)\n\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside')\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\nfig.update_layout({'plot_bgcolor': 'rgba(0, 0, 0, 0)', 'paper_bgcolor': 'rgba(0, 0, 0, 0)',})\n\nfig.update(layout_coloraxis_showscale=False)\n\nfig.show()","f59d4d6f":"fig = px.choropleth(df_f,\n                    locations=\"country\", \n                    locationmode='country names',\n                    color=\"Log Scale\", \n                    hover_name=\"country\", \n                    hover_data=['people_vaccinated'],\n                    color_continuous_scale=\"mint\",\n                    labels={'country':'Country','people_vaccinated':'People Vaccinated'})\n\nfig.update_layout(title=\"Total Vaccinated People by Country\", title_x=0.5)\n\nfig.update(layout_coloraxis_showscale=False)\n\nfig.show()","3b9ad46c":"df_f['pct_vaccinated'] = df_f['people_vaccinated'] \/ df_f['Population (2020)']\n\n# Sort data frame by pct_vaccinated\ndf_f_sorted = df_f.sort_values('pct_vaccinated', ascending = False)\n\n# Select first 10 rows\ndf_f_sorted = df_f_sorted.iloc[0:19,:]\n\n# Plot the bar chart\nfig = px.bar(df_f_sorted,\n              x = 'country',\n              y = 'pct_vaccinated',\n              color='pct_vaccinated',\n              hover_name = 'country',\n              hover_data = ['pct_vaccinated'],\n              color_continuous_scale = 'Peach',\n              labels = {'country':'Country','pct_vaccinated':'% of Population Vaccinated'},\n              height=500)\n\nfig.update_layout(uniformtext_minsize = 15,\n                   xaxis_tickangle = -45,\n                   title = 'Total Vaccination % of Population by Top 20 Countries',\n                   title_x = 0.5)\n\nfig.update(layout_coloraxis_showscale=False)\nfig.update_layout({'plot_bgcolor': 'rgba(0, 0, 0, 0)', 'paper_bgcolor': 'rgba(0, 0, 0, 0)',})\n\nfig.show()","87bbee7e":"fig = px.choropleth(df_f,\n                    locations=\"country\", \n                    locationmode='country names',\n                    color=\"pct_vaccinated\", \n                    hover_name=\"country\", \n                    hover_data=['pct_vaccinated'],\n                    color_continuous_scale=\"Peach\",\n                    labels={'country':'Country','pct_vaccinated':'% of Population Vaccinated'})\n\nfig.update_layout(title=\"Total Vaccination % of Population by Country\", title_x=0.5)\n\nfig.update(layout_coloraxis_showscale=False)\n\nfig.show()","df7d12c5":"### Create boolean columns for all vaccines and concatenate them in one data frame","619e3dc6":"### What country is vaccinated a larger percent from its population?","ed36949b":"Now we have our final data frame with no missing values, so we can start visualizing the data.","edbf52c8":"## 2. EDA on Vaccine Data Frame","512f3443":"### What country is vaccinated more people?","593d795d":"### Does more money mean more different types of vaccine?\n\nIt looks like UAE and Hungary are the countries who uses 5 of 9 different kind of vaccines. They are followed by Bahrain and Serbia with 4 different kind of vaccines used. Let's have a look at the distribution in the map to understand it better.","35a54909":"The vaccines data frame is ready for merge, now perform EDA on population data frame.","7864bbb5":"### Merge detailed vaccine data frame to the main data frame and delete the vaccines column, then add a column for the total number of different vaccines","1fce9957":"### Since we do not have these countries, we can drop the rows that include them","74a50bdf":"## 6. Conclusion","5260b735":"### Surprise surprise!\n\nLet's be honest, no one is expecting Gibraltar or Seychelles to be the first in the vaccinated people % of the population, yet, here it is...\n\nThe final results shows the top 5 best performing countries in the vaccination process, and they are\n\n- Gibraltar\n- Seychelles\n- Israel\n- Falkland Islands\n- United Arab Emirates\n\n","aa7036af":"## 1. Import necessary libraries","fb1b1c3b":"### Merge two data frames","e98a0a32":"### Create a dataframe that gets the maximum value of total vaccinations and groups by country","41f69bb2":"### Vaccination Race\n\nIt appears that the vaccine developed by Pfizer\/Biontech benefits being first in the market. Although the vaccine developed by Oxford\/AstraZeneca was released some time after the one developed by Pfizer\/Biontech, it is a strong competent in the vaccination race since it is easier to roll out in terms of handling and transportation. Currently These two are the most common COVID-19 vaccines around the world by stepping in more than 60 countries.","2033ba0e":"### Have a look at the final data frame","6a142a5a":"### Investigate the population data frame to see if we can find their equivalents","45d45148":"### Numbers are definitely not wrong, but might be misleading\n\nIt is clear that the countries with high number of population has also high number of people vaccinated. To understand the countries' success in vaccination process better, we should look at the % of the population vaccinated by country.","47900c71":"### See which rows do not have ISO Code","36b74168":"### Relativity is everything\n\nConsidering every single country is responsible for their own people (apart from minority groups such as immigrants), we can understand that the success in vaccination process should not only be assessed with the number of people vaccinated. When we look at the total vaccination % of the population, we see a more accurate indicator of success and understand that the measure of success is quality rather than quantity.","b6e009eb":"## 3. EDA on Population Data Frame","e8fe3dc0":"### More population, more people to vaccinate\n\nUnited States are far above most of the countries with almost 70M people vaccinated. It is followed by India, UK, Brazil and Turkey. Given most of these countries have the highest population in the world, it is not suprising they have higher number of people vaccinated compared to the rest.","bd1fab76":"### Which vaccine is most commonly used around the world?","1b6ca887":"## 5. Data Visualisation","d84c150a":"### Have a look at the vaccines column to see how many unique vaccine groups are present","78341db3":"### Read the population data frame with necessary columns & parsing the date column","953a8693":"## Before closing...","26b1d616":"### If you've made it so far in the notebook, first, congratulations! and second, please let me know about your thoughts!\n\n- LinkedIn: https:\/\/www.linkedin.com\/in\/emrecanokten\/\n- Kaggle:https:\/\/www.kaggle.com\/emrecano\n\n### And do not forget the vote the notebook or like the post (whichever is applicable)!\n\n# Thanks a lot!","5c76ebb5":"### Replace the countries in the population data frame with their corresponding name in the vaccine data frame, and follow the same steps","c48117ae":"## 4. Creating a Detailed Vaccine Data Frame","9ae62e03":"### Read the vaccine data frame with necessary columns & parsing the date column","d2f641c4":"#### This notebook performs exploratory data analysis on multiple datasets and visualises the consolidated data.\n\nThe main objective is to visualise COVID-19 vaccination process globally and monitor its progress.\n\nPlotly is used to visualise the data.\n\n#### Used datasets are:\n\n- COVID-19 World Vaccination Progress\n- Population by Country - 2020\n\n#### Visualisations answer three simple questions:\n\n- What vaccines are used and in which countries?\n- What country is vaccinated more people?\n- What country is vaccinated a larger percent from its population?","540f6007":"## Introduction","0eef95ed":"### Inspect the vaccine data frame","acc64ba6":"### What vaccines are used and in which countries?","54357615":"### We have population missing for six different countries, let's have a look what they are","0585fd6b":"### Drop the rows including the countries above since they are already in the United Kingdom","c6c56066":"# Visualising the Current Status of COVID-19 Vaccination"}}