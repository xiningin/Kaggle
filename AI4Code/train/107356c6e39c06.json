{"cell_type":{"6722c21b":"code","711fcadd":"code","61e06b63":"code","f79bef7e":"code","8b5c5b2d":"code","f52cc9ce":"code","80805f63":"code","16e7f21d":"code","01ebe8e3":"code","b02eded7":"code","decc9ed3":"code","348e486a":"code","ae434362":"code","8afd7d88":"code","1cc87610":"code","5b527f04":"code","7fb062f5":"code","f90a24af":"code","bbab8552":"code","5151e6e5":"code","a060901a":"code","362403bd":"code","f5b3d502":"code","41fcafb4":"code","66ff5e9d":"code","f32862a5":"code","1f9e0586":"code","291d9309":"code","0056e997":"code","f795bd40":"code","b5b6c9e4":"code","edf1b7cd":"code","3b2009a2":"code","631b2244":"code","2f455a33":"code","8dc63d6d":"code","140389c2":"code","b8fc8cfc":"code","e25aa874":"code","4cb3a7a4":"code","47edfa39":"code","d9e89359":"markdown","c8547bc9":"markdown","742720ab":"markdown","2ad8541f":"markdown","0661363c":"markdown","9e1d9c09":"markdown","1022c270":"markdown","544c6ac2":"markdown","19c54b0b":"markdown","d7ac784a":"markdown","2c1de267":"markdown","93d884e7":"markdown","e162685e":"markdown","9ef57b01":"markdown","4d990f48":"markdown","c569660f":"markdown","6f49481e":"markdown","617024e3":"markdown","4c85a7db":"markdown","d49f6c33":"markdown","77132181":"markdown","07e3f661":"markdown","9fd211f2":"markdown","689201b0":"markdown","cb5ead45":"markdown","bbf60537":"markdown","a0e92192":"markdown","7d2ae9b4":"markdown","a2a7da48":"markdown","5a33bf5e":"markdown","942471c7":"markdown","f38752c2":"markdown","40f49541":"markdown","0dc6927f":"markdown","588e0a29":"markdown","1313c0cc":"markdown","2712462b":"markdown","bdd180eb":"markdown","ea831ce9":"markdown","3f42e0e8":"markdown","dacb6928":"markdown","c814727c":"markdown","5f6867bc":"markdown","7d46d129":"markdown","b93242a5":"markdown","26d8082a":"markdown","81cd7511":"markdown","77b73a5a":"markdown","0f0e1ab9":"markdown","9308827d":"markdown","29479795":"markdown","f50f5e63":"markdown","96196e20":"markdown","d2dd488d":"markdown","1607fbce":"markdown","673e5fc8":"markdown","2bedc7b4":"markdown","5470649b":"markdown","870ef334":"markdown","ca969046":"markdown","e5c5c7dd":"markdown"},"source":{"6722c21b":"# Import librabries:\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nfrom scipy.stats import pearsonr ","711fcadd":"# Read the country_vaccinations dataset\nvcn = pd.read_csv(\"..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv\")\n# Read the country_vaccinations_by_manufacturer dataset\nvbm = pd.read_csv(\"..\/input\/covid-world-vaccination-progress\/country_vaccinations_by_manufacturer.csv\")\n# Read the 2021_population dataset\nwp = pd.read_csv(\"..\/input\/world-population\/2021_population.csv\")","61e06b63":"# Call out the first 5 rows of the dataset\nvcn.head()","f79bef7e":"# Dataset information\nvcn.info()","8b5c5b2d":"# Count the number of countries in the dataset\nvcn['country'].nunique()","f52cc9ce":"# Call out the first 5 rows of the dataset\nvbm.head()","80805f63":"# Dataset information\nvbm.info()","16e7f21d":"vbm['location'].nunique()","01ebe8e3":"# Call out the first 5 rows of the dataset\nwp.head()","b02eded7":"# Dataset infomartion\nwp.info()","decc9ed3":"wp['country'].nunique()","348e486a":"wp_sort = wp[['country', '2021_last_updated']] \nwp_sort.sort_values('country') \nvcn_drop = vcn.drop_duplicates('country', keep = \"last\") \nvcn_sort = vcn_drop[['country', 'people_fully_vaccinated']]\ndf_same = pd.concat([wp_sort,vcn_sort]) \ndf_same = df_same[df_same.groupby('country').country.transform(len) > 1] \ndf_same = df_same.drop_duplicates('country', keep = \"last\") \ndf_same_sort = df_same[['country', 'people_fully_vaccinated']] \ndf_same_sort = df_same_sort.rename(columns={'country' : 'country_vaccinations'}) \ndf_same_sort.reset_index(drop=True, inplace=True) \nwp_clean = pd.concat([wp, df_same])\nwp_clean = wp_clean[wp_clean.groupby('country').country.transform(len) > 1]\nwp_clean = wp_clean.drop_duplicates('country', keep = \"first\")\nwp_clean_sort = wp_clean[['country', '2021_last_updated']]\nwp_clean_sort = wp_clean_sort.sort_values('country')\nwp_clean_sort.reset_index(drop = True, inplace=True)\ncbn = pd.concat([wp_clean_sort, df_same_sort], axis=1)\ncbn\n","ae434362":"cbn.isna().sum()","8afd7d88":"cbn = cbn.dropna()\ncbn = cbn.reset_index()\ncbn","1cc87610":"# Check data types\ncbn.info()","5b527f04":"# Reformat data type\ncbn.replace(',','', regex=True, inplace=True)\ncbn['2021_last_updated'] = cbn['2021_last_updated'].map(lambda x: float(x))\ncbn['people_fully_vaccinated'] = cbn['people_fully_vaccinated'].map(lambda x: float(x))\ncbn","7fb062f5":"# Check weird data\ncbn[cbn['2021_last_updated'] < cbn['people_fully_vaccinated']]","f90a24af":"# Remove weird data \ncbn = cbn.drop(index = [61])\n","bbab8552":"#Five Highest Countries\ntotal = vcn.groupby('country')['total_vaccinations'].max().reset_index()\nfhc = total.sort_values('total_vaccinations', ascending=False).head(5)\npd.set_option('display.float_format', lambda x: '%.0f'% x)\nfhc","5151e6e5":"fig = px.bar(fhc, \n             x='country', \n             y='total_vaccinations',\n             labels = {'country' : 'Country', 'total_vaccinations' : 'Total Vaccinations'},\n             title = \"Top 5 Countries With Biggest Vaccinations Progress\"\n            )\nfig.show()","a060901a":"# Top 5 smallest countries with vaccinations progress\nflc = total.sort_values('total_vaccinations', ascending=False).tail(5)\nflc","362403bd":"fig = px.bar(flc, \n             x='country', \n             y='total_vaccinations',\n             labels = {'country' : 'Country', 'total_vaccinations' : 'Total Vaccinations'},\n             title = \"Top 5 Countries With Lowest Vaccinations Progress\"\n            )\nfig.show()","f5b3d502":"# Find the outliers which have far higher total vaccinations than the general status\npd.set_option('display.float_format', lambda x: '%.0f'% x)\ntvc = total.sort_values('total_vaccinations', ascending=False)\nQ1 = tvc['total_vaccinations'].quantile(0.25)\nQ3 = tvc['total_vaccinations'].quantile(0.75)\nIQR = Q3 - Q1\nUpper = Q3 + 1.5*IQR\nLower = Q1 - 1.5*IQR","41fcafb4":"tvc[(Lower > tvc['total_vaccinations']) | (tvc['total_vaccinations'] > Upper)].reset_index()","66ff5e9d":"plt.figure(figsize=(20,10))\nplt.suptitle(\"Distribution of Global Vaccinations Progress\")\nsns.violinplot(data = total,\n            x = 'total_vaccinations',\n              showmedians=True,\n              showmeans=True)\nplt.show()","f32862a5":"# Find the global average total vaccinations by month\nvcn['date'] = pd.to_datetime(vcn['date'])\navg = vcn.groupby(vcn['date'].dt.strftime('%B'))['daily_vaccinations'].mean().sort_values().reset_index()\navg\n","1f9e0586":"avg = avg.reindex([0, 1, 2, 3, 4, 5, 9, 8, 10, 7, 6])\navg","291d9309":"# Lineplot to see the full progress\nfig = px.line(avg, \n             x='date', \n             y='daily_vaccinations',\n             labels = {'daily_vaccinations' : 'Global Monthly Vaccinations', 'date' : 'Month'},\n             title = \"Average Total Vaccinations\"\n            )\nfig.show()","0056e997":"# Call out the number of total vaccines used by country and vaccine types\nvpc = vbm.groupby(['vaccine', 'location'])['total_vaccinations'].max().reset_index()\nvpc\n","f795bd40":"# Rank the popularity of vaccines\nvr = vpc.groupby('vaccine')['total_vaccinations'].sum().reset_index()\nvr = vr.sort_values('total_vaccinations', ascending=False)\nvr","b5b6c9e4":"# Pieplot\nfig = px.pie(vr, values='total_vaccinations', names='vaccine', title='Vaccines Occupancy' )\nfig.show()","edf1b7cd":"# Barplot\nfig = px.bar(vr, \n             y='total_vaccinations', \n             x='vaccine',\n             labels = {'vaccine' : 'Vaccines', 'total_vaccinations' : 'Total Vaccinations'},\n             title = \"Overview of Vaccines\"\n            )\nfig.update_yaxes(type=\"log\")\nfig.show()","3b2009a2":"# Creat pivot table\npvt = pd.pivot_table(data = vbm, index = ['location'], columns = ['vaccine'], values = 'total_vaccinations', aggfunc = 'max')\npvt.fillna(0) # Fill null values by 0 to have a better view of the table","631b2244":"# Find percentage\npd.reset_option('display.float_format') # Re-format to get float values\npd.set_option('display.float_format', lambda x: '%.2f' % x) # Set number of figure after doc\ncbn['percentage'] = ((cbn['people_fully_vaccinated'])\/(cbn['2021_last_updated']))*100 # Set percentage value under % type\ncbn","2f455a33":"(cbn['people_fully_vaccinated'].sum()\/cbn['2021_last_updated'].sum())*100","8dc63d6d":"tfh = cbn.sort_values('percentage', ascending=False).head(5)\ntfh","140389c2":"cbn.sort_values('percentage').head(5)","b8fc8cfc":"# Scatterplot\nfig = px.scatter(cbn, \n                y=\"2021_last_updated\", \n                x=\"percentage\",\n                labels = {'2021_last_updated' : 'Population', 'percentage' : 'Percentage'},\n                title = \"Scatterplot\"\n               )\nfig.show()","e25aa874":"# Find quantile range and select normal values\npd.set_option('display.float_format', lambda x: '%.0f'% x)\ncbn = cbn.sort_values('2021_last_updated', ascending=False)\nqt1 = cbn['2021_last_updated'].quantile(0.25) # Quantile 1\nqt3 = cbn['2021_last_updated'].quantile(0.75) # Quantile 3\nIQR_cbn = qt3 - qt1 # Quantile range\nUpper_cbn = qt3 + 1.5*IQR_cbn # Upper whisker\nLower_cbn = qt1 - 1.5*IQR_cbn # Lower whisker \ncbn_sort = cbn[(Lower_cbn < cbn['2021_last_updated']) & (cbn['2021_last_updated'] < Upper_cbn)].reset_index()","4cb3a7a4":"# Scatter plot for normal values\nfig = px.scatter(cbn_sort, \n                y=\"2021_last_updated\", \n                x=\"percentage\",\n                labels = {'2021_last_updated' : 'Population', 'percentage' : 'Percentage'},\n                title = \"Scatterplot excluding outliers\"\n               )\nfig.show()","47edfa39":"# Pearson correlation test for correlation coefficient\npop = np.array(cbn_sort['2021_last_updated'])\nper = np.array(cbn_sort['percentage'])\npearsonr(pop, per)","d9e89359":"The reason why I used reset_option is that when we divide two column, the values tend to be float. However, the default format may be int so we cannot get our values. So remember when you do something similar, make sure that the format is float.","c8547bc9":"Meanwhile, in the country_vaccinations_by_manufacturers, there are only 35 countries listed","742720ab":"Obviously, from the scatterplot, we can see that there relationship between the population and the rate of vaccinations is null. Based on the test, the correlation coefficient is negative and since its absolute value is only 0.208. We can conclude that the relationship between these two categories is weak which means that low population does not affect the high percentage of vaccinations. ","2ad8541f":"From these two tables, we can see that countries with low population tends to have high rate of vaccinations while countries with high population is oppostite. To test the hypothesis, I used scatterplot to plot the relationship between the two index to see wheter they are correlated or not.","0661363c":"It is obviously that the world is doing good when the line is gradually increasing except that there is a slight drop between June and July, it may be because the appearance Delta mutation at that time so it decelerated the progress. Note that from July to August, there is a sudden climb. It can be explained that there is not enough data for August in the dataset. Therefore,the value of August is not objective.","9e1d9c09":"There are only 33 countries mentioned in the dataset. However, it is enough to figure out that Pfizer\/BioNTech and Moderna are the leaders in this race. While, the two vaccines made by Chinese (CanSino, Sinopharm\/Beijing) look unpopular. ","1022c270":"This table shows us that there are 29 outstanding countries. It can be explained that almost all of the countries in this table have had to face severe pandemic and they are developed countries. Therefore, they are leading in the vaccinnationns progress. However, there is also a hug difference between the top country (China) from the bottom country (Thailand). While China has used more than 1.6 billions doses, the number of Thailand is only 15.9 million doses.","544c6ac2":"As we can see, although the vaccination progress has been ocurring continously, the percentage of fully vaccinated people in the world is only 20%. It means the world has a lot of work to do and the target of community immunity needs more time to be achieved.","19c54b0b":"Thanks to the graph, it is obviously that China is dominating in the number of vaccine used.","d7ac784a":"This dataset is perfect, too!","2c1de267":"To do this, we need to calculate the rate between fully vaccinated people per population first. As I have cleaned the data at the beginning of the notebook. We now just need to divide two columns.","93d884e7":"Here is the scatterplot we are looking for. But, it looks like there is something unclear. Since we are having the outliers, the range is too wide. Therefore, I dropped the outliers to have a clearer view.","e162685e":"**I. Setting environment:**","9ef57b01":"One other important step when cleaning data is to check whether that targeted data is in the right type or not. In further calculation, I worked with values from 2021_last_updated and people_fully_vaccinated. Therefore, I had to make sure that they were in the same type.","4d990f48":"Since one country may uses several types of vaccines. I decided to make a table to look at the total number of vaccines they have used so far.","c569660f":"**3.1.1. What are the top 5 biggest countries with vaccinations progress ?**\n\nHere, I tried to find 5 countries with highest number of vaccinations. Since I saw that in total_vaccinations columns, the values are cummulative. Therefore, instead of using sum function, I used max function to take the lastest value. You can alsop use sum function but in this case, the column you work with is the daily_vaccinations.","6f49481e":"**3.1.2. What are the top 5 smallest countries with vaccinations progress ?**\n\nSimilarly, I try to find the top 5 countries with the least vaccinations progress. In this case, I do not put the asceding command.\n","617024e3":"Since the data in 2021_last_updated column was not in the type I want, so I reformatted it.","4c85a7db":"**Introduction:**\n\nAt the moment, I guess almost everyone in this world has heard at least once about COVID-19. It has been nearly two years since the world recorded the first case of COVID-19. Fortunately, we have produced several types of vaccines against the pandemic. If you regurlarly update daily news, you must see and hear about COVID-19 statistics. In case you are wondering how people work with it, then this notebook is suitable for you. In this notebook, I mainly focus on analyzing information that related to the vaccinations progress. We will go through step by step to reach the final result. This notebook is also suitable for those who are at beginner level or intermediate. Follow this notebook thoroughly, you will get all of the information I provided since I explained everything in detail.\n\nThis project uses Python languague.\n\nMany thanks to Gabriel Preda and Rishav Sharma for providing the two dataframes.","d49f6c33":"**1.2. Reading files:**","77132181":"**2.2. Counttry_vaccinations_by_manufacturers:**","07e3f661":"If you look closely, you will see that July came before June. Therefore, I would reindex these two months.","9fd211f2":"**II. Data Checking and Cleaning:**","689201b0":"**3.5.2. Top 5 countries with highest vaccinations rate per population:**","cb5ead45":"**2.1. Country_vaccinations dataset:**","bbf60537":"Here, you can see that China, known as the first country that the COVID-19 pandemic occurred has the highest number of total vaccinations. Nearly 1.76 billions vaccine doses were used. It is reasonable because China has faced the pandemic for 2 years and they population is the highest in the world. The next 3 positions are for India, United States and Brazil. It is expected because these 3 countries have the highest number of cases.","a0e92192":"Now let's check the progress of vaccinations through months to see wheter the progress is increasing or not. Here, I calculated the mean of the global daily vaccinations under the reference of month to have the overview.","7d2ae9b4":"**3.3. What is the global average vaccinations by month ?**","a2a7da48":"**3.4. What vaccine is most common used and least common used ?**","5a33bf5e":"There are 228 countries listed in this dataset.","942471c7":"To estimate the rate of fully vaccinated people of one country per its population, I needed to concat two dataframes. As we can see, in the world population dataset, there are 228 countries listed while in country vaccinations dataset there are only 219 countries. That means we need to clean and remove countries that are mentioned once.\n\nAs a beginner, I do not have many advanced techniques. Howerver, I am proud to get the below dataset. The idea here is to choose the neccesary columns, concat the chosen dataframes, filter out values that appear more than once in the new dataframes (remove values that appear only in 1 of the 2 dataframes which means that they are redundant data), drop duplicated values (keep last and first in order to keep the neccesary data) and reset their index. Actually, you can also clean the data using Excel but I wanted to challenge myself by using Python, so if you want to do the same thing, you can reference the idea.","f38752c2":"**2.3. World_population dataset:**","40f49541":"**1.1. Import librabries:**","0dc6927f":"There are 219 countries listed in the country_vaccinations dataset","588e0a29":"Well, so I have pretty much done with our dataframes!\n\nLet's get started out EDA!","1313c0cc":"It is weird to see that there is a country with only 83 in total vaccinations. By searching for this country, I figured out that Pitcairn is an islands whose sorvereign state is United Kingdom and in 2021, it is estimated that the population here is only approximately 50 residents.\n","2712462b":"It is totally good now. Let's analyze!","bdd180eb":"This violin releases that there is an uneven distribution and the difference of vaccinations progress among countries are huge. ","ea831ce9":"**3.2. Which countries are outstanding vaccinations progress ?**","3f42e0e8":"Good!","dacb6928":"Firstly, let's analyze the global country vaccinations data progress. Here, we have the following questions to answer:\n1. What are the top 5 biggest and smallest countries with vaccinations progress ?\n2. Which countries are outstanding vaccinations progress ?\n3. What is the global average vaccinations by month ?\n4. What vaccine is most common and least used ?\n5. What are the top 5 countries that are having the highest and lowest of fully vaccinated people per population ?\n","c814727c":"This pie chart illustrates the real domination of Pfizer\/BioNTech. What a vaccine!","5f6867bc":"This dataset looks perfect!","7d46d129":"**2.4. Concatenate two dataframes:**","b93242a5":"Let's explore the popularity of vaccines by summing their total up. In this case, like the total_vaccinations column in the country_vaccinations dataset, the value in the total_vaccinations in country_vaccinations_by_manufacturers are cummulative. Therefore, I used max function to take out the lastest value of each vaccine.","26d8082a":"**Si Nguyen Pham**\n\n**Senior at VNU HCM International University**\n\n**August 7th, 2021**\n\n**Last updated: August 29th, 2021**\n\n# **AN OVERVIEW OF GLOBAL COVID-19 VACCINATIONS PROGRESS**","81cd7511":"**III. Exploratory Data Analysis:**","77b73a5a":"Using violinplot provided a clearer view of the distribution.","0f0e1ab9":"Because I was using two independent datasets. Therefore, the updated data might not match for some country, Gibraltar for example. All I had to do was to remove this country.","9308827d":"**3.5. World vaccinations current state:**\n","29479795":"Seeing the number of vaccinations of top countries compared to bottom countries leads to a question that how many countries are there which are the outliers of the overall. Let's answer this questionn by finding the two types of the outliers.","f50f5e63":"**If you are reading this setence, I guess you are having a clearer view of how vaccinations analysis is made. Thank you for spending your time with me!**","96196e20":"So far, it is quite enough to have a basic view of the current status. Now, let's take a quick look at the popularity of the present vaccines.","d2dd488d":"Great, so bascially, we already had our wanted dataframe which is the combination of the country_vaccinations dataframe and the world_population dataframe with no unwanted country. Let's check once again to see whether the new dataframe is really clean or not.","1607fbce":"Since it looks like that the null values do not affect our calculation seen the values at the total_vaccionations columns are cummulative. Therefore, we did not need to clean our data.","673e5fc8":"It can be seen that Pfizer\/BioNTech is used by all of the listed countries and its biggest consumer is undoubtedly, their origin country, the Uninted States with more than 193.5 millions doses used. While CanSino and Sinopharm\/Beijing are only used by one country, Chile and Hungary respectively.","2bedc7b4":"This code help us find the quantile range. Now let's look for countries with higher vaccinations progress compared to the general status.","5470649b":"So far so good. Then, I had to clean data once again to make sure that there was no weird value or logic. In this case, I would check whether there was any country with the number of fully vaccinated people was higher than the last updated population number.","870ef334":"**3.5.3. Top 5 countries with lowest vaccinations rate per population:**","ca969046":"**3.5.1. Rate of world population that is fully  vaccinated:**","e5c5c7dd":"As we can see, there are 14 null values in the people_fully_vaccinated column. Therefore, I needed to drop all of it."}}