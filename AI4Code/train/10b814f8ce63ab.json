{"cell_type":{"dcbfb4bb":"code","21d50ae8":"code","8b0e1992":"code","7499fee1":"code","b7724d75":"code","5c7b2892":"code","8840510d":"code","690f867b":"code","ffa6b48b":"code","bc748ec6":"code","c3fd610a":"code","bc0e598f":"code","19be6928":"code","5b412794":"code","3ba62d99":"code","d866504a":"code","e4209ebd":"code","13fe2b92":"code","7eb4b112":"code","725d69f0":"code","90dfe1c0":"code","6f27e0b8":"code","451ecbee":"code","a86e5b8d":"code","6f5fa764":"code","5be5bf20":"code","63e422ec":"code","93f1f786":"code","45a9672d":"code","993644f5":"code","ef697399":"code","60931d6c":"code","6bc2ceba":"code","523b631c":"markdown"},"source":{"dcbfb4bb":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport decimal as d\nimport seaborn as sns\nfrom sklearn.preprocessing import LabelEncoder, MinMaxScaler, StandardScaler\nfrom sklearn.cluster import KMeans","21d50ae8":"df = pd.read_csv('..\/input\/customer-personality-analysis\/marketing_campaign.csv', sep= '\\t')\ndf","8b0e1992":"df.info()","7499fee1":"df.Dt_Customer = pd.to_datetime(df.Dt_Customer)\ndf.info()","b7724d75":"df['Age'] = df.Year_Birth.apply(lambda x: 2021-x)\ndf","5c7b2892":"plt.figure(figsize=(15,5))\ndf.isnull().sum().plot(kind='bar')","8840510d":"df.Income.fillna(value = df.Income.mean(), inplace=True)\ndf.isnull().Income.sum()","690f867b":"df['Children'] = df['Kidhome']+df['Teenhome']\ndf['Total_Accepted'] = df['AcceptedCmp1']+df['AcceptedCmp2']+df['AcceptedCmp3']+df['AcceptedCmp4']+df['AcceptedCmp5']\ndf.drop(['ID','Kidhome','Teenhome','Z_CostContact','Z_Revenue','Year_Birth','AcceptedCmp1','AcceptedCmp2','AcceptedCmp3','AcceptedCmp4','AcceptedCmp5'],axis=1, inplace=True)\ndf","ffa6b48b":"features = ['Children', 'Dt_Customer', 'Recency', 'MntWines', 'MntFruits',\n       'MntMeatProducts', 'MntFishProducts', 'MntSweetProducts',\n       'MntGoldProds', 'NumDealsPurchases', 'NumWebPurchases',\n       'NumCatalogPurchases', 'NumStorePurchases', 'NumWebVisitsMonth',\n       'Total_Accepted', 'Complain',\n       'Age','Income']\nplt.figure(figsize=(15,5))\nsns.boxplot(data = df[(features)])\nplt.xticks(rotation=90)\nplt.show()","bc748ec6":"# removing outlier\ndf.loc[(df.Income > 200000),'Income']= df.Income.mode()[0]","c3fd610a":"df.describe()","bc0e598f":"sns.boxplot(df.Age)","19be6928":"df.loc[(df.Age>100)]","5b412794":"df.drop(df[(df.Age>100)].index, axis=0, inplace=True)\ndf.describe()\n ","3ba62d99":"# What's is the education percentage?\neduc_pct = df.groupby('Education').count().Marital_Status\n\nplt.figure(figsize=(10,8))\nplt.pie(educ_pct, labels= ((educ_pct.values\/2240)*100))\nplt.legend(educ_pct.index,loc=4)\nplt.show()","d866504a":"# How education affects consume of Wine?\n\nplt.figure(figsize=(10,5))\nplt.bar(df.groupby('Education').mean().index,\n        df.groupby('Education').mean().MntWines\/\n        df.MntWines.mean(),color='purple')\nplt.title('Efect of Education on Wine consume',fontsize=14)","e4209ebd":"# How education affects consume of Meat?\n\nplt.figure(figsize=(10,5))\nplt.bar(df.groupby('Education').mean().index,\n        df.groupby('Education').mean().MntMeatProducts\/\n        df.MntMeatProducts.mean(),color='red')\nplt.title('Efect of Education on Meat consume',fontsize=14)","13fe2b92":"# How education affects consume of Gold Products?\nplt.figure(figsize=(10,5))\nplt.bar(df.groupby('Education').mean().index,\n        df.groupby('Education').mean().MntGoldProds\/\n        df.MntGoldProds.mean(),color='black')\nplt.title('Efect of Education on Gold products consume',fontsize=14)","7eb4b112":"# How education affects consume of Fish?\nplt.figure(figsize=(10,5))\nplt.bar(df.groupby('Education').mean().index,\n        df.groupby('Education').mean().MntFishProducts\/\n        df.MntFishProducts.mean(),color='blue')\nplt.title('Efect of Education on Fish products consume',fontsize=14)","725d69f0":"# How education affects in customer's income?\n\n#income_anal\n\nplt.figure(figsize=(10,5))\nplt.plot(df.groupby('Education').mean().index, df.groupby('Education').mean().Income\/\n        df.Income.mean(), color='green')\nplt.title('Efect of Education on Costumer\\'s income',fontsize=14)","90dfe1c0":"plt.figure(figsize=(10,5))\nplt.bar(df.groupby('Marital_Status').mean().index, df.groupby('Marital_Status').mean().Income\/\n        df.Income.mean(), color='green')\nplt.title('Efect of Marital status on Costumer\\'s income',fontsize=14)","6f27e0b8":"df.select_dtypes('object')","451ecbee":"df1 = df.copy(deep=True)","a86e5b8d":"le = LabelEncoder()\nle.fit(df.Marital_Status.unique())\nle.classes_\ndf1['Marital_St']=le.transform(df.Marital_Status)\ndf1.drop('Marital_Status',axis=1, inplace=True)\ndf1","6f5fa764":"df1.Education.loc[df['Education']=='Graduation']=3\ndf1.Education.loc[df['Education']=='Basic']=1\ndf1.Education.loc[df['Education']=='2n Cycle']=2\ndf1.Education.loc[df['Education']=='Master']=4\ndf1.Education.loc[df['Education']=='PhD']=5\ndf1","5be5bf20":"df1.info()","63e422ec":"df1['Dt_Customer']= df1['Dt_Customer'].astype('int64')\ndf1['Income'] = df1['Income'].astype('int64')\ndf1.info()","93f1f786":"scaler = MinMaxScaler(feature_range=(0,1))\nscaled = scaler.fit_transform(df1.values)\nscaled.shape\ndf_scaled = pd.DataFrame(scaled, columns= df1.columns)\ndf_scaled","45a9672d":"plt.figure(figsize= (20,20))\nsns.heatmap(df.corr(),annot=True)","993644f5":"sse = []\n\nfor i in range(1,11):\n    kmeans = KMeans(n_clusters= i)\n    kmeans.fit(df_scaled)\n    sse.append(kmeans.inertia_)\n    \nplt.figure(figsize=(15,10))\nplt.plot(range(1,11), sse )\nplt.title('The Elbow Method', fontsize= 20)\nplt.xlabel('Number of clusters',fontsize= 20)\nplt.ylabel('SSE',fontsize= 20)\n    \n    ","ef697399":"kmeans= KMeans(n_clusters = 3)\ncluster = kmeans.fit(df_scaled)\ncluster_pred = cluster.predict(df_scaled)\ncluster_pred","60931d6c":"df['Cluster'] = cluster_pred+1\ndf","6bc2ceba":"for i in df:\n    g = sns.FacetGrid(df, col= 'Cluster', height=5, aspect= 1)\n    g.map(sns.histplot, i)\n    \n    ","523b631c":"# Importing data"}}