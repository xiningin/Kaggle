{"cell_type":{"7ff862b8":"code","7a4958a9":"code","59ed71ca":"code","badfabe1":"code","0761a620":"code","9a9226ff":"code","68d52434":"code","046a26d1":"code","19967c0e":"code","e2152613":"code","d2a6af2d":"code","d3183ca0":"code","865a8be0":"code","255980ce":"code","67f5fcdb":"code","0c01265b":"code","0880f440":"code","112e62e8":"code","a427c6b3":"code","bd344f9f":"code","25bdb711":"code","583063c2":"code","abd76126":"code","1d36230d":"code","f9e49427":"code","52b14661":"code","5ef66036":"code","257e17dc":"code","4f6e6c16":"code","55371d18":"code","a3fe6b4c":"code","f56ad868":"code","ca1278bc":"code","c2bccf23":"code","9a12c45b":"code","be5c5b0c":"code","8df562c8":"code","88a2f492":"code","b850030e":"code","d4f55a5c":"code","54a78b01":"code","0011d4ee":"code","0ba29718":"code","5e7728e6":"code","9aea96c6":"code","73b4c9d7":"code","83f03c03":"code","e7d803d1":"code","c3411be1":"code","0905e088":"code","f855a8b6":"code","8c1ecf3a":"code","1d0f3625":"code","9503f9f0":"code","73436f9e":"code","0691ad0a":"code","7871f5ae":"code","fcf53b35":"markdown","02d74e1e":"markdown","5fba7b59":"markdown","b715ed20":"markdown","d3a88e70":"markdown","85f53cef":"markdown","f3b085f0":"markdown","99e075e0":"markdown","d173cee9":"markdown","101678fe":"markdown","c9a2bfb9":"markdown","dbcc3ab5":"markdown","3855c775":"markdown","fe51f437":"markdown","55d5e9e1":"markdown","e8d81f03":"markdown","2cdfe6c0":"markdown","5173c976":"markdown","eb3523cf":"markdown","19aea4da":"markdown","58ef356c":"markdown","6e63e56e":"markdown","1e48389a":"markdown","2a6b3288":"markdown","0f2735cb":"markdown","328994a2":"markdown","928d2cd2":"markdown","4e6f9757":"markdown","d9ef9c35":"markdown","d65ae0a2":"markdown","6ca79040":"markdown","57b3ac8a":"markdown","66a0eff8":"markdown","0f00fadb":"markdown","c52ebfd7":"markdown","88a63591":"markdown","83da550b":"markdown","c6369f94":"markdown","e0e75ef6":"markdown","b1fe0a6d":"markdown","8242c741":"markdown"},"source":{"7ff862b8":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns # Biblioteca de visualiza\u00e7\u00e3o de dados muito f\u00e1cil de usar!\n\npd.set_option(\"display.max_columns\", None) # Pandas vai mostrar todas as colunas, mesmo que haja muitas!\nplt.style.use(\"fivethirtyeight\")","7a4958a9":"train = pd.read_csv('\/kaggle\/input\/desafio01extensaodatascienceeai\/train.csv')\ntest  = pd.read_csv('\/kaggle\/input\/desafio01extensaodatascienceeai\/test.csv')\nexemplo = pd.read_csv('\/kaggle\/input\/desafio01extensaodatascienceeai\/sample_submission.csv')","59ed71ca":"test.head()","badfabe1":"exemplo.head()","0761a620":"train.head()","9a9226ff":"train.columns","68d52434":"train.info()","046a26d1":"train.describe()","19967c0e":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='gender', hue='churn')\nplt.yticks([*range(0, 2001, 100)])\nplt.show()","e2152613":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='senior_citizen', hue='churn')\nplt.yticks([*range(0, 3501, 200)])\nplt.show()","d2a6af2d":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=train, x='monthly_charges', y='senior_citizen', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","d3183ca0":"# Mediana de pagamento mensal dos seniors:\ntrain[train.senior_citizen == 'Yes'].monthly_charges.median()","865a8be0":"# Mediana de pagamento mensal dos no seniors:\ntrain[train.senior_citizen == 'No'].monthly_charges.median()","255980ce":"85 * 100 \/ 65","67f5fcdb":"senior = train[train.senior_citizen == 'Yes']","0c01265b":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=senior, x='monthly_charges', y='churn', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","0880f440":"no_senior = train[train.senior_citizen == 'No']","112e62e8":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=no_senior, x='monthly_charges', y='churn', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","a427c6b3":"# Mediana de pagamento mensal dos no seniors que deram churn:\nno_senior[no_senior.churn == 1].monthly_charges.median()","bd344f9f":"# Mediana de pagamento mensal dos no seniors que n\u00e3o deram churn:\nno_senior[no_senior.churn == 0].monthly_charges.median()","25bdb711":"78.375 * 100 \/ 59.45","583063c2":"plt.figure(figsize=(10, 6))\nsns.countplot(data=senior, x='payment_method', hue='churn')\nplt.yticks([*range(0, 251, 25)])\nplt.show()","abd76126":"plt.figure(figsize=(10, 6))\nsns.countplot(data=no_senior, x='payment_method', hue='churn')\nplt.yticks([*range(0, 1001, 50)])\nplt.show()","1d36230d":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='internet_service', hue='churn')\nplt.yticks([*range(0, 1501, 100)])\nplt.show()","f9e49427":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=train, x='monthly_charges', y='internet_service', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","52b14661":"# Mediana de pagamento mensal dos clientes que possuem fibra \u00f3ptica:\ntrain[train.internet_service == 'Fiber optic'].monthly_charges.median()","5ef66036":"# Mediana de pagamento mensal dos clientes que possuel DSL:\ntrain[train.internet_service == 'DSL'].monthly_charges.median()","257e17dc":"91.55 * 100 \/ 56.2","4f6e6c16":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='movies_streaming', hue='churn')\nplt.yticks([*range(0, 1601, 100)])\nplt.show()","55371d18":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=train, x='monthly_charges', y='movies_streaming', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","a3fe6b4c":"# Mediana de pagamento mensal dos clientes que possuem movie streaming:\ntrain[train.movies_streaming == 'Yes'].monthly_charges.median()","f56ad868":"# Mediana de pagamento mensal dos clientes que n\u00e3o possuem movie streaming:\ntrain[train.movies_streaming == 'No'].monthly_charges.median()","ca1278bc":"93 * 100 \/ 69.6","c2bccf23":"just_churn = train[train.churn == 1]","9a12c45b":"plt.figure(figsize=(10, 8))\nsns.countplot(data=just_churn, y='churn_reason',\n              order = just_churn['churn_reason'].value_counts().index)\nplt.xticks([*range(0, 161, 10)])\nplt.show()","be5c5b0c":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='contract', hue='churn')\nplt.show()","8df562c8":"churn_pgto_mensal = train[train.contract == \"Month-to-month\"]\nchurn_pgto_mensal.shape","88a2f492":"print(f\"A taxa de churn mensal \u00e9: {(churn_pgto_mensal.churn.sum()\/churn_pgto_mensal.shape[0])*100:.2f} %\")","b850030e":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='payment_method', hue='churn')\nplt.show()","d4f55a5c":"churn_eletronic_check = train[train.payment_method == \"Electronic check\"]\nchurn_eletronic_check.shape","54a78b01":"print(f\"A taxa de churn para Eletronic Check \u00e9 de: {(churn_eletronic_check.churn.sum()\/churn_eletronic_check.shape[0])*100:.2f} %\")","0011d4ee":"plt.figure(figsize=(10, 6))\nsns.countplot(data=train, x='tech_support', hue='churn')\nplt.show()","0ba29718":"churn_tech_support_no = train[train.tech_support == \"No\"]\nchurn_tech_support_yes = train[train.tech_support == \"Yes\"]","5e7728e6":"print(\"Taxa de churn para clientes que n\u00e3o possuem suporte t\u00e9cnico:\")\nprint('{0:.2f}%'.format(churn_tech_support_no.churn.sum()\/churn_tech_support_no.shape[0]*100))","9aea96c6":"print(\"Taxa de churn para clientes que possuem suporte t\u00e9cnico:\")\nprint('{0:.2f}%'.format(churn_tech_support_yes.churn.sum()\/churn_tech_support_yes.shape[0]*100))","73b4c9d7":"plt.figure(figsize=(10, 6))\nsns.boxplot(data=train,  x='monthly_charges',y='tech_support', orient='h')\nplt.xticks([*range(0, 141, 10)])\nplt.show()","83f03c03":"print(\"Mediana da mensalidade para os que possuem suporte:\")\nmediana_yes = train[train.tech_support == \"Yes\"].monthly_charges.median()\nprint(mediana_yes)","e7d803d1":"print(\"Mediana da mensalidade para os que n\u00e3o possuem suporte:\")\nmediana_no = train[train.tech_support == \"No\"].monthly_charges.median()\nprint(mediana_no)","c3411be1":"suporte_preco = mediana_yes - mediana_no\nprint(f\"Pre\u00e7o do suporte: {round(suporte_preco, 2)}\")","0905e088":"suporte_yes = train[train.tech_support == \"Yes\"] # Possuem suporte t\u00e9cnico\nsuporte_no = train[train.tech_support == \"No\"] # N\u00e3o possuem suporte t\u00e9cnico\n\nchurn_yes = suporte_yes[suporte_yes.churn == 1].shape[0] # Churn dos que possuem suporte\nchurn_no = suporte_no[suporte_no.churn == 1].shape[0] # Churn dos que n\u00e3o possuem suporte","f855a8b6":"proporcao_churn_suporte = churn_yes \/ suporte_yes.shape[0]\nprint(f\"Propor\u00e7\u00e3o de churn para os clientes que possuem suporte: {proporcao_churn_suporte * 100:.2f}%\")","8c1ecf3a":"# total de clientes sem suporte:\ntot_sem_suporte = suporte_no.shape[0]\ntot_sem_suporte","1d0f3625":"# Novo total de clientes, subtraindo-se a taxa de churn:\nn_clientes = int(tot_sem_suporte * (1 - proporcao_churn_suporte))\nn_clientes","9503f9f0":"# N\u00famero de clientes que foram convertidos e n\u00e3o deram churn:\nconvertidos = n_clientes - suporte_no[suporte_no.churn == 0].shape[0]\nconvertidos","73436f9e":"faturamento_convertidos = convertidos * mediana_no\nfaturamento_convertidos","0691ad0a":"round(suporte_preco * suporte_yes[suporte_yes.churn == 0].shape[0], 2)","7871f5ae":"4128.0 * 100 \/ 52683.75","fcf53b35":"Agora \u00e9 sua vez! Realize sua EDA com criatividade e sem medo de explorar,ela ser\u00e1 muito importante para o case de neg\u00f3cios!","02d74e1e":"* Atitude do funcion\u00e1rio designado ao suporte \u00e9 principal motivo de churn! Como a\u00e7\u00e3o imediata, oferecer treinamentos e buscar funcion\u00e1rios que capazes de lidar muito bem com os clientes.\n\n\n* H\u00e1 pouco vimos que ter o servi\u00e7o de internet tornava o cliente mais propenso ao churn, aqui vemos que muitos clientes sa\u00edram pois os concorrentes ofereceram uma internet mais r\u00e1pida, mais dados, melhores dispositivos e melhores ofertas! Revisar os planos de internet e verificar a concorr\u00eancia pode reduzir bastante o churn!","5fba7b59":"### No Senior Churn vs No Senior No Churn","b715ed20":"## Tech Support","d3a88e70":"* Incentivar mais as outras formas de pagamento pode contribuir para a redu\u00e7\u00e3o do churn.","85f53cef":"### No Seniors - Payment Method","f3b085f0":"* Pagamento eletr\u00f4nico e por correio parecem contruibuir consideravelmente para churn de idosos;\n* Pagamentos autom\u00e1ticos tendem a reter mais os clientes idosos.","99e075e0":"Veja que o faturamento do servi\u00e7o de suporte t\u00e9cnico representa somente 7.8% do que poderia ser faturado se a taxa de churn dos clientes sem o servi\u00e7o de suporte fosse a mesma dos que assinam o servi\u00e7o.\n\nUma an\u00e1lise melhor poderia ser feita junto ao cliente para determinar, de maneira mais precisa, se oferecer o servi\u00e7o de suporte para todos os clientes, sem custo adicional, pode contribuir para a redu\u00e7\u00e3o do churn e para um aumento substancial de faturamento.","d173cee9":"* Dentre os n\u00e3o idosos, a mediana dos que cancelaram o contrato \u00e9 31.83% maior!","101678fe":"* Dentre os seniors, o valor mensal pago n\u00e3o parece influenciar o churn, visto que as medianas s\u00e3o praticamente as mesmas.","c9a2bfb9":"Esse \u00e9 nosso dataset! Vamos analisar suas features!","dbcc3ab5":"* Poderia atingir a convers\u00e3o de 675 clientes!","3855c775":"* A mediana de pagamentos mensais dos seniors \u00e9 30.77% maior que dos no seniors. Isso pode contribuir bastante para o churn ser maior nos idosos.","fe51f437":"* O g\u00eanero n\u00e3o parece influenciar o churn.","55d5e9e1":"client_id \u00e9 a mesma do test.csv, predict_probability \u00e9 a probabilidade prevista pelo modelo do cliente dar churn, por exemplo, o primeiro tem 0.392994 ou, aproximadamente, 39% de dar churn","e8d81f03":"## Churn Reason","2cdfe6c0":"## Contract","5173c976":"* Percebe-se que os contratos mensais tendem a ter uma propor\u00e7\u00e3o maior de churn. Quase a metade dos contratos mensais s\u00e3o cancelados.","eb3523cf":"* Assinar o suporte t\u00e9cnico contribui para manter o cliente na base! Vamos fazer uma an\u00e1lise das medianas e modelar uma hip\u00f3tese!","19aea4da":"* Verificamos no gr\u00e1fico acima que os clientes adeptos ao \"Eletronic check\" como forma de pagamento, s\u00e3o mais propensas ao churn.","58ef356c":"## Gender","6e63e56e":"### Seniors vs No Seniors","1e48389a":"That's all folks!\n\n-------------------------------------- END --------------------------------------","2a6b3288":"### Seniors - Payment Method","0f2735cb":"## Payment Method","328994a2":"# An\u00e1lise Explorat\u00f3ria de Dados\n\nOl\u00e1! Hoje vamos explorar os dados que ser\u00e3o usados no nosso desafio de churn!\n\nA An\u00e1lise Explorat\u00f3ria de Dados \u00e9 de suma import\u00e2ncia para qualquer projeto que usa dados, pois ela nos permite:\n\n* Conhecer os dados por completo e como est\u00e3o estruturados\n* Entender melhor o problema a ser resolvido\n* Descobrir insights e rela\u00e7\u00f5es que ainda n\u00e3o exploradas\n* Descobrir problemas, tend\u00eancias e padr\u00f5es nos dados\n* Previnir problemas futuros\n* Gerar novas features para os modelos de ML\n* e muito mais...\n\nBasicamente, a cada projeto de ML, ap\u00f3s o tratamento inicial dos dados, n\u00f3s sempre realizamos uma EDA!\n\nLembre-se de criar uma conta no Kaggle caso voc\u00ea ainda n\u00e3o tenha e se inscreva para come\u00e7ar a competir pelo link dispon\u00edvel na nossa sala de aula!\n\nVoc\u00ea encontrar\u00e1 informa\u00e7\u00f5es mais detalhadas sobre o desafio na p\u00e1gina do Kaggle! Caso ainda reste alguma d\u00favida, s\u00f3 mandar um e-mail para o JP! =D\n\nVamos nessa!","928d2cd2":"* Para os clientes que disp\u00f5em de internet, a mediana da mensalidade dos que contrataram movies streaming \u00e9 33.6% maior que dos que n\u00e3o contrataram esse servi\u00e7o.","4e6f9757":"## Seniors + No Seniors ","d9ef9c35":"* A mediana da mensalidade dos clientes que possuem fibra \u00f3ptica 62.9% maior que dos que possuem DSL.","d65ae0a2":"* A propor\u00e7\u00e3o de churn \u00e9 maior para os idosos! Vamos analisar melhor!","6ca79040":"### Senior Churn vs Senior No Churn","57b3ac8a":"Na p\u00e1gina do desafio h\u00e1 3 arquivos .csv:\n\n* train.csv - usado para voc\u00ea treinar e avaliar o modelo, voc\u00ea possui todas as features e o target(o que estamos querendo prever, nesse caso se o cliente deu churn ou n\u00e3o)\n\n* test.csv - usado para voc\u00ea realizar a previs\u00e3o usando o modelo, possui as features e n\u00e3o possui o target(que \u00e9 o que o seu modelo ir\u00e1 prever! Apenas o Kaggle sabe a resposta correta)\n\n* sample_submission.csv - um exemplo de como seu arquivo .csv da previs\u00e3o do target deve estar formatado ao enviar para o Kaggle avaliar!\n\nCaso ainda esteja confuso para voc\u00ea n\u00e3o se preocupe! Na pr\u00f3xima aula vamos ver, passo a passo, como esse processo funciona! =D","66a0eff8":"* A diferen\u00e7a da mediana \u00e9 muito pequena em rela\u00e7\u00e3o de quem assina ou n\u00e3o o suporte t\u00e9cnico. Vamos criar uma hip\u00f3tese baseada nas premissas:\n\n1) A diferen\u00e7a das medianas representa, aproximadamente, o custo do servi\u00e7o de suporte t\u00e9cnico;\n\n2) Se todos os clientes que n\u00e3o possuem suporte t\u00e9cnico passarem a ter, a taxa de churn do grupo que possui o servi\u00e7o se conservar\u00e1.\n\n* Com isso, vamos calcular o faturamento: \n\n1) De convers\u00e3o de clientes que n\u00e3o possuem o servi\u00e7o, mantendo-se constante a taxa de churn(fixa em rela\u00e7\u00e3o aos que possuem suporte t\u00e9cnico);\n\n2) Do servi\u00e7o de suporte t\u00e9cnico.","0f00fadb":"* Pagamento eletr\u00f4nico e pelo correio n\u00e3o afetam tanto os no seniors como afeta os seniors;\n* Pagamentos autom\u00e1ticos tendem a reter mais os clientes de forma geral.\n\n\nIncentivar pagamentos autom\u00e1ticos pode contribuir para a redu\u00e7\u00e3o de churn, tanto para clientes seniors como tamb\u00e9m para os no seniors.","c52ebfd7":"S\u00f3 os clientes convertidos representam um faturamento mensal de 52683.75!","88a63591":"Conclus\u00e3o:\n\n* Internet parece influenciar no churn do cliente, principalmente se o servi\u00e7o contratado for o de Fibra \u00d3ptica.","83da550b":"## Internet Service ","c6369f94":"Vamos agora calcular o faturamento mensal do servi\u00e7o de suporte!","e0e75ef6":"## Movies Streaming","b1fe0a6d":"* client_id: A unique ID that identifies each customer.\n\n* cltv: Customer Lifetime Value. A predicted CLTV is calculated using corporate formulas and existing data. The higher the value, the more valuable the customer. High value customers should be monitored for churn.\n\n* contract: Indicates the customer\u2019s current contract type: Month-to-Month, One Year, Two Year.\n\n* paperless_billing: Indicates if the customer has chosen paperless billing: Yes, No\n\n* payment_method: Indicates how the customer pays their bill: Bank Withdrawal, Credit Card, Mailed Check\n\n* monthly_charges: Indicates the customer\u2019s current total monthly charge for all their services from the company.\n\n* total_charges: Indicates the customer\u2019s total charges, calculated to the end of the quarter specified above.\n\n* tenure_months: Indicates the total amount of months that the customer has been with the company by the end of the quarter specified above.\n\n* tech_support: Indicates if the customer subscribes to an additional technical support plan from the company with reduced wait times: Yes, No\n\n* tv_streaming: Indicates if the customer uses their Internet service to stream television programing from a third party provider: Yes, No. The company does not charge an additional fee for this service.\n\n* phone_service: Indicates if the customer subscribes to home phone service with the company: Yes, No\n\n* multiple_lines: Indicates if the customer subscribes to multiple telephone lines with the company: Yes, No\n\n* online_security: Indicates if the customer subscribes to an additional online security service provided by the company: Yes, No\n\n* online_backup: Indicates if the customer subscribes to an additional online backup service provided by the company: Yes, No\n\n* device_protection: Indicates if the customer subscribes to an additional device protection plan for their Internet equipment provided by the company: Yes, No\n\n* movies_streaming: Indicates if the customer uses their Internet service to stream movies from a third party provider: Yes, No. The company does not charge an additional fee for this service.\n\n* internet_service: Indicates if the customer subscribes to Internet service with the company: No, DSL, Fiber Optic, Cable.\n\n* gender: The customer\u2019s gender: Male, Female\n\n* dependents: Indicates if the customer lives with any dependents: Yes, No. Dependents could be children, parents, grandparents, etc.\n\n* senior_citizen: Indicates if the customer is 65 or older: Yes, No\n\n* partner: Indicate if the customer has a partner: Yes, No\n\n* country: The country of the customer\u2019s primary residence.\n\n* state: The state of the customer\u2019s primary residence.\n\n* city: The city of the customer\u2019s primary residence.\n\n* zip_code: The zip code of the customer\u2019s primary residence.\n\n* lat_long: The combined latitude and longitude of the customer\u2019s primary residence.\n\n* latitude: The latitude of the customer\u2019s primary residence.\n\n* longitude: The longitude of the customer\u2019s primary residence.\n\n* churn_reason: A customer\u2019s specific reason for leaving the company. Directly related to Churn Category.\n\n* churn: 1 = the customer left the company this quarter. 0 = the customer remained with the company.","8242c741":"* Clientes que possuem o servi\u00e7o internet tendem a ter maior a probabilidade de churn;\n* Dos clientes que possuem internet, os contrataram o servi\u00e7o de movies streaming tendem a ser menos propensos ao churn(discretamente)."}}