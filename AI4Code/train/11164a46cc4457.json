{"cell_type":{"52eb3ca4":"code","4bb6220e":"code","40fe42c8":"code","760980b1":"code","6031e4bb":"code","d87e8d2c":"code","81d538d5":"code","46afb507":"code","b861468d":"code","5b7bd96e":"code","844f3938":"code","1709c5c7":"code","e55c20b0":"code","bc02f22e":"code","becc1d2d":"code","703058e9":"code","ee84878a":"code","d8dd697d":"code","d4b349af":"code","836aa5b2":"code","09106f31":"code","e12f1d19":"code","a5c5383b":"code","25e7439d":"code","26d70a34":"code","3608026f":"code","3ef4a5c4":"code","9a0da796":"code","117ec431":"code","710b57ab":"code","0f7194d6":"code","ad390e6a":"code","4e3ae4aa":"code","58e7396d":"code","ac7386c0":"code","87a4d7f7":"code","583fc524":"code","88db2f7e":"code","8ed8fe9e":"code","7b3ee31c":"code","ba5125e0":"code","051d463b":"code","f57beef2":"code","eda2cfdb":"code","b503503d":"code","5b55bee5":"code","f0acff6c":"code","01a857f0":"code","2a3006dd":"code","42f26e5e":"markdown","79c6cf0c":"markdown","96b662a4":"markdown","3970c583":"markdown","805fcdd0":"markdown","198c339b":"markdown","48956216":"markdown","2d5e15e4":"markdown","303e1834":"markdown","101277e7":"markdown","5667f8ed":"markdown","810c2868":"markdown","ddfd5b48":"markdown","39229e3d":"markdown","3416ad88":"markdown","e713e1e6":"markdown","4082606b":"markdown","e2f825d4":"markdown","f09772c3":"markdown","b712b740":"markdown","e9e83838":"markdown","e10ba219":"markdown","c06e0c87":"markdown","2b6c039c":"markdown","629745e2":"markdown","b3b97075":"markdown","d3c1ef8b":"markdown","701900f4":"markdown"},"source":{"52eb3ca4":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","4bb6220e":"# I imported following python libraries to utilize in EDA process.\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy import stats\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly\nimport plotly.graph_objects as go\nimport datetime","40fe42c8":"pathfile1 = '\/kaggle\/input\/cabs-fare-data\/Cab_Data.csv'\nCabData = pd.read_csv(pathfile1)\nmissing_value = 0\nfor column in CabData.columns :\n    missing_value += CabData[column].isna().sum() + CabData[column].isnull().sum()\nprint('CabData dataset has {} entries , {} features and {} missing values'.format(CabData.shape[0] ,CabData.shape[1] ,missing_value))\nprint(\"\\nFeature's datatypes\\n\\n{}\".format(CabData.dtypes))\nCabData.head(10)","760980b1":"pathfile2 = '\/kaggle\/input\/cabs-fare-data\/City.csv'\nCity = pd.read_csv(pathfile2)\nmissing_value = 0\nfor column in City.columns :\n    missing_value += City[column].isna().sum() + City[column].isnull().sum()\nprint('City dataset has {} entries , {} features and {} missing values'.format(City.shape[0] ,City.shape[1] ,missing_value))\nprint(\"\\nFeature's datatypes\\n\\n{}\".format(City.dtypes))\nCity.head(20)","6031e4bb":"pathfile3 = '\/kaggle\/input\/cabs-fare-data\/Customer_ID.csv'\nCustomerID = pd.read_csv(pathfile3)\nmissing_value = 0\nfor column in CustomerID.columns :\n    missing_value += CustomerID[column].isna().sum() + CustomerID[column].isnull().sum()\nprint('CustomerID dataset has {} entries , {} features and {} missing values'.format(CustomerID.shape[0] ,CustomerID.shape[1] ,missing_value))\nprint(\"\\nFeature's datatypes\\n\\n{}\".format(CustomerID.dtypes))\nCustomerID.head(10)","d87e8d2c":"pathfile4 = '\/kaggle\/input\/cabs-fare-data\/Transaction_ID.csv'\nTransactionID = pd.read_csv(pathfile4)\nmissing_value = 0\nfor column in TransactionID.columns :\n    missing_value += TransactionID[column].isna().sum() + TransactionID[column].isnull().sum()\nprint('TransactionID dataset has {} entries , {} features and {} missing values'.format(TransactionID.shape[0] ,TransactionID.shape[1] ,missing_value))\nprint(\"\\nFeature's datatypes\\n\\n{}\".format(TransactionID.dtypes))\nTransactionID.head(10)","81d538d5":"# Here merged all 4 files into one MasterData  to analyze entire dataset.\nMasterData = CabData.merge(TransactionID, on= 'Transaction ID').merge(CustomerID, on ='Customer ID').merge(City, on = 'City')\nmissing_value = 0\nfor column in MasterData.columns :\n    missing_value += MasterData[column].isna().sum() + MasterData[column].isnull().sum()\nprint('MasterData dataset has {} entries , {} features and {} missing values'.format(MasterData.shape[0] ,MasterData.shape[1] ,missing_value))\nprint(\"\\nFeature's datatypes\\n\\n{}\".format(MasterData.dtypes))\nMasterData.head(10)","46afb507":"#removing ',' in population and users column values\n#replacing spaces with '_' in column names \n\nfor column in MasterData.columns:\n    if ' ' in column:\n        MasterData = MasterData.rename(columns={column:column.replace(' ','_')})\n        \nfor column in [\"Population\",\"Users\"] :\n    \n        MasterData[column] = MasterData[column].str.replace(',','')\n        \nMasterData.head(10)","b861468d":"# Converted some columns from object to category or int64 datatypes to work with appropriate ones.\n# Converted Data of Travel column to datetime object.\n\nMasterData['Date_of_Travel'] = pd.to_datetime(MasterData['Date_of_Travel'])\n\nfor column in [\"Company\", \"City\" , \"Payment_Mode\" , \"Gender\" ] :\n    \n        MasterData[column] = MasterData[column].astype('category')\n        \n        \nfor column in [\"Population\", \"Users\" ] :\n    \n        MasterData[column] = MasterData[column].astype('int64')\n        \nprint(\"\\nFeature's datatypes\\n\\n{}\".format(MasterData.dtypes))","5b7bd96e":"# Here I splitted MasterData into two dataset for every Cab Firm to analyze them individually.\nPink_MasterData = MasterData [MasterData['Company'] == 'Pink Cab'] \nYellow_MasterData = MasterData [MasterData['Company'] == 'Yellow Cab']\nselected_columns = ['KM_Travelled','Price_Charged','Cost_of_Trip', 'Age' ,'Income_(USD\/Month)', 'Population' , 'Users']","844f3938":"# Getting the statinfo's of selected columns from MasterData for Pink Cab Firm\nfiltered_Pink_MasterData = Pink_MasterData[selected_columns]\nPink_Cab_StatsInfo = filtered_Pink_MasterData.describe()\nPink_Cab_StatsInfo","1709c5c7":"# Getting the statinfo's of selected columns from MasterData for Pink Cab Firm\nfiltered_Yellow_MasterData = Yellow_MasterData[selected_columns]\nYellow_Cab_StatsInfo = filtered_Yellow_MasterData.describe()\nYellow_Cab_StatsInfo","e55c20b0":"#The KDE curves and distribtion plots of selected variables with respect to Cab Firms drawn below.\nfig,axes = plt.subplots(1, 3 , figsize=(26,8), sharey=True)\nfig.suptitle('Distributions of Variables')\nsns.histplot(ax=axes[0], data=MasterData , x='Cost_of_Trip' , kde = True , hue=\"Company\")\nsns.histplot(ax=axes[1], data=MasterData , x='Price_Charged' , kde = True , hue=\"Company\")\nsns.histplot(ax=axes[2], data=MasterData , x='Income_(USD\/Month)' , kde = True , hue=\"Company\") ","bc02f22e":"#The KDE curves and distribtion plots of selected variables with respect to Cab Firms drawn below.\nfig,axes = plt.subplots(1, 2 ,figsize=(22,9), sharey=True)\nfig.suptitle('Distributions of Variables')\nsns.histplot(ax=axes[0],data=MasterData , x='Age' , kde = True , hue=\"Company\")\nsns.histplot(ax=axes[1], data=MasterData , x='KM_Travelled' , kde = True , hue=\"Company\")","becc1d2d":"#The KDE curves and distribtion plots of selected variables with respect to Cab Firms drawn below.\nfig,axes = plt.subplots(1, 2 , figsize=(22 ,9), sharey=True)\nfig.suptitle('Distributions of Variables')\nsns.histplot(ax=axes[0], data=MasterData , x='Population' , kde = True , hue=\"Company\")\nsns.histplot(ax=axes[1], data=MasterData , x='Users' , kde = True , hue=\"Company\")","703058e9":"#Outlier points and lower-upper limits were analyzed by IQR method by filtering the data from the statistical value table of the desired variables.\ndef showIQRstats(dataFrame_statsinfo,column_name):\n    \n    mean   = dataFrame_statsinfo[column_name][1]\n    median = dataFrame_statsinfo[column_name][5]\n    median_mean_ratio = median\/mean\n    Q1     = dataFrame_statsinfo[column_name][4]\n    Q3     = dataFrame_statsinfo[column_name][6]\n    IQR    = Q3-Q1\n    upper_band = Q3 + 1.5*IQR\n    lower_band = Q1 - 1.5*IQR\n    \n    print('\\n\\n' + \"mean of : \" + str(column_name) + \" is \" + str(mean) +\n          '\\n' + \"median of : \" + str(column_name) + \" is \" + str(median) +\n          '\\n' + \"median\/mean ratio of : \" +  str(column_name) + \" is \" + str(median_mean_ratio) +\n          '\\n' + \"Q1 value of : \"  + str(column_name) + \" is \"  + str(Q1) +\n          '\\n' + \"Q3 value of : \"  + str(column_name) + \" is \"  + str(Q3) + \n          '\\n' + \"IQR value of : \" + str(column_name) + \" is \" + str(IQR) + \n          '\\n' + \"Upper and Lower Limits of \" + str(column_name) + \" is \"  + str((lower_band,upper_band))\n         )\n    \n    return upper_band , lower_band","ee84878a":"print('Statistical infos of Pink Cab Firm :')\nfor column_name in selected_columns :\n    upper_band , lower_band = showIQRstats(Pink_Cab_StatsInfo , column_name)\n    outliers = filtered_Pink_MasterData[(filtered_Pink_MasterData[column_name] < lower_band) | (filtered_Pink_MasterData[column_name] > upper_band)][column_name].values\n    print('\\n' + str(column_name) + \" has \" + str(len(outliers)) + \" outliers : \"    + str(outliers))\n    print('\\n\\n**********************************************************\\n')","d8dd697d":"print('Statistical infos of Yellow Cab Firm :')\nfor column_name in selected_columns :\n    upper_band , lower_band = showIQRstats(Yellow_Cab_StatsInfo , column_name)\n    outliers = filtered_Yellow_MasterData[(filtered_Yellow_MasterData[column_name] < lower_band) | (filtered_Yellow_MasterData[column_name] > upper_band)][column_name].values\n    print('\\n' + str(column_name) + \" has \" + str(len(outliers)) + \" outliers : \"    + str(outliers))\n    print('\\n\\n**********************************************************\\n')","d4b349af":"#Boxplot distributions of the desired variables were drawn.\nfig,axes = plt.subplots(2, 3, figsize=(25, 8), sharey=True)\nfig.suptitle('Boxplot Distributions of the Variables')\n\nsns.boxplot(ax=axes[0,0], x='KM_Travelled' ,        data=filtered_Pink_MasterData ).set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[0,1], x='Price_Charged'   ,     data=filtered_Pink_MasterData  ) .set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[0,2], x='Cost_of_Trip' ,        data=filtered_Pink_MasterData ).set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[1,0], x='KM_Travelled' ,        data=filtered_Yellow_MasterData ).set_ylabel(\"Yellow Cab\")\nsns.boxplot(ax=axes[1,1], x='Price_Charged'   ,     data=filtered_Yellow_MasterData  ) .set_ylabel(\"Yellow Cab\")\nsns.boxplot(ax=axes[1,2], x='Cost_of_Trip' ,        data=filtered_Yellow_MasterData ).set_ylabel(\"Yellow Cab\")\n","836aa5b2":"#Boxplot distributions of the desired variables were drawn.\nfig,axes = plt.subplots(2, 3, figsize=(25, 8), sharey=True)\nfig.suptitle('Boxplot Distributions of the Variables')\nsns.boxplot(ax=axes[0,0], x='Age' ,                 data=filtered_Pink_MasterData ).set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[0,1], x='Income_(USD\/Month)' ,  data=filtered_Pink_MasterData  ) .set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[0,2], x='Population' ,          data=filtered_Pink_MasterData ).set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[1,0], x='Age' ,                 data=filtered_Yellow_MasterData ).set_ylabel(\"Yellow Cab\")\nsns.boxplot(ax=axes[1,1], x='Income_(USD\/Month)' ,  data=filtered_Yellow_MasterData  ) .set_ylabel(\"Yellow Cab\")\nsns.boxplot(ax=axes[1,2], x='Population' ,          data=filtered_Yellow_MasterData ).set_ylabel(\"Yellow Cab\")","09106f31":"#Boxplot distributions of the desired variables were drawn.\nfig,axes = plt.subplots(1, 2, figsize=(25, 8), sharey=True)\nsns.boxplot(ax=axes[0], x='Users' ,    data=filtered_Pink_MasterData ).set_ylabel(\"Pink Cab\")\nsns.boxplot(ax=axes[1], x='Users'   ,  data=filtered_Yellow_MasterData  ) .set_ylabel(\"Yellow Cab\")","e12f1d19":"# Here visualized the correlation of MasterData features by heatmap for Pink Cab Firm.\nPink_Cab_Corr = filtered_Pink_MasterData.corr()\nplt.figure(figsize=(20,10))\nsns.heatmap(Pink_Cab_Corr,annot=True,vmin=-1,vmax=1,cmap='coolwarm')","a5c5383b":"# Here visualized the correlation of MasterData features by heatmap for Pink Cab Firm.\nYellow_Cab_Corr = filtered_Yellow_MasterData.corr()\nplt.figure(figsize=(20,10))\nsns.heatmap(Yellow_Cab_Corr,annot=True,vmin=-1,vmax=1,cmap='coolwarm')","25e7439d":"# Here visualized scatter plots of MasterData features to see correlations between them if exists\nfig,axes = plt.subplots(1, 2, figsize=(25, 8), sharey=True)\nfig.suptitle('Boxplot Distributions')\nsns.scatterplot(ax=axes[0],data=MasterData, x='KM_Travelled', y='Price_Charged' , hue=\"Company\"  ).set_title(\"KM_Travelled  - Price_Charged\")\nsns.scatterplot(ax=axes[1],data=MasterData, x='KM_Travelled', y='Cost_of_Trip' , hue=\"Company\").set_title(\"KM_Travelled  - Cost_of_Trip\")","26d70a34":"# Here visualized scatter plots of MasterData features to see correlations between them if exists\nfig,axes = plt.subplots(figsize=(16, 6), sharey=True)\nfig.suptitle('Boxplot Distributions')\nsns.scatterplot(data=MasterData, x='Price_Charged', y='Cost_of_Trip' , hue=\"Company\").set_title(\"Price_Charged - Cost_of_Trip\")","3608026f":"# Here visualized scatter plots of MasterData features to see correlations between them if exists\nfig,axes = plt.subplots(figsize=(16, 6), sharey=True)\nfig.suptitle('Boxplot Distributions')\nsns.scatterplot(data=MasterData, x='Users', y='Population' , hue=\"Company\"  ).set_title(\"Population  - Users\")","3ef4a5c4":"# Here visualized scatter plots of MasterData features to see correlations between them if exists\nfig,axes = plt.subplots(1, 2, figsize=(25, 8), sharey=True)\nfig.suptitle('Pink Cab Firm Boxplot Distributions')\nsns.scatterplot(ax=axes[0],data=MasterData, x='Population', y='Price_Charged' , hue=\"Company\").set_title(\"Population  - Price_Charged\")\nsns.scatterplot(ax=axes[1],data=MasterData, x='Users', y='Price_Charged' , hue=\"Company\").set_title(\"Users - Price_Charged\")","9a0da796":"# Obtained covariance values for given features.\n\ncov1  = np.cov(MasterData['KM_Travelled'],MasterData['Price_Charged'])[0][1]\ncov2  = np.cov(MasterData['KM_Travelled'],MasterData['Cost_of_Trip'])[0][1]\ncov3  = np.cov(MasterData['Price_Charged'],MasterData['Cost_of_Trip'])[0][1]\ncov4  = np.cov(MasterData['Users'],MasterData['Population'])[0][1]\ncov5  = np.cov(MasterData['Population'],MasterData['Price_Charged'])[0][1]\ncov6  = np.cov(MasterData['Users'],MasterData['Price_Charged'])[0][1]\n\nprint('Covariance for  KM_Travelled - Price_Charged : '+ str(cov1))\nprint('Covariance for  KM_Travelled - Cost_of_Trip : '+ str(cov2))\nprint('Covariance for  Price_Charged - Cost_of_Trip : '+ str(cov3))\nprint('Covariance for  Users - Population : '+ str(cov4))\nprint('Covariance for  Population - Price_Charged : '+ str(cov5))\nprint('Covariance for  Users - Price_Charged : '+ str(cov6))\n","117ec431":"# Obtained pearson correlation coefficients for given features.\n\npcorr_coef1 , _ = stats.pearsonr(MasterData['KM_Travelled'],MasterData['Price_Charged'])\npcorr_coef2 , _ = stats.pearsonr(MasterData['KM_Travelled'],MasterData['Cost_of_Trip'])\npcorr_coef3 , _ = stats.pearsonr(MasterData['Price_Charged'],MasterData['Cost_of_Trip'])\npcorr_coef4 , _ = stats.pearsonr(MasterData['Users'],MasterData['Population'])\npcorr_coef5 , _ = stats.pearsonr(MasterData['Population'],MasterData['Price_Charged'])\npcorr_coef6 , _ = stats.pearsonr(MasterData['Users'],MasterData['Price_Charged'])\n\nprint('pearson correlation coefficient for  KM_Travelled - Price_Charged : '+ str(pcorr_coef1))\nprint('pearson correlation coefficient for  KM_Travelled - Cost_of_Trip : '+ str(pcorr_coef2))\nprint('pearson correlation coefficient for  Price_Charged - Cost_of_Trip : '+ str(pcorr_coef3))\nprint('pearson correlation coefficient for  Users - Population : '+ str(pcorr_coef4))\nprint('pearson correlation coefficient for  Population - Price_Charged : '+ str(pcorr_coef5))\nprint('pearson correlation coefficient for  Users - Price_Charged : '+ str(pcorr_coef6))","710b57ab":"# Obtained spearman rank correlations and p - values for given features. \nspearman_rank_coeff1   = stats.spearmanr(MasterData['KM_Travelled'],MasterData['Price_Charged'])\nspearman_rank_coeff2   = stats.spearmanr(MasterData['KM_Travelled'],MasterData['Cost_of_Trip'])\nspearman_rank_coeff3   = stats.spearmanr(MasterData['Price_Charged'],MasterData['Cost_of_Trip'])\nspearman_rank_coeff4   = stats.spearmanr(MasterData['Users'],MasterData['Population'])\nspearman_rank_coeff5   = stats.spearmanr(MasterData['Population'],MasterData['Price_Charged'])\nspearman_rank_coeff6   = stats.spearmanr(MasterData['Users'],MasterData['Price_Charged'])\n\nprint('spearman rank coefficient coefficient for  KM_Travelled - Price_Charged : '+ str(spearman_rank_coeff1))\nprint('spearman rank coefficient coefficient for  KM_Travelled - Cost_of_Trip : '+ str(spearman_rank_coeff2))\nprint('spearman rank coefficient coefficient for  Price_Charged - Cost_of_Trip : '+ str(spearman_rank_coeff3))\nprint('spearman rank coefficient coefficient for  Users - Population : '+ str(spearman_rank_coeff4))\nprint('spearman rank coefficient coefficient for  Population - Price_Charged : '+ str(spearman_rank_coeff5))\nprint('spearman rank coefficient coefficient for  Users - Price_Charged : '+ str(spearman_rank_coeff6))","0f7194d6":"data0 = MasterData.groupby(\"Company\").count()\n\nfig1 = px.pie(data0,\n                        values=data0.Users,\n                        names=data0.index ,title=\"Pink & Yellow Cab Firm Total Users Overview\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","ad390e6a":"data1_0 = MasterData[MasterData[\"Company\"] == \"Pink Cab\"].groupby(\"City\").count()\ndata1_1 = MasterData[MasterData[\"Company\"] == \"Yellow Cab\"].groupby(\"City\").count()\n\nfig = go.Figure()\nfig.add_trace(go.Bar(\n                    x=data1_0.index,\n                    y=data1_0['Users'],\n                    name='Pink Cab',\n                    marker_color='indianred' \n                    ))            \nfig.add_trace(go.Bar(\n                    x=data1_1.index,\n                    y=data1_1['Users'],\n                    name='Yellow Cab',\n                    marker_color='blue'\n                    ))\nfig.update_layout(\n    yaxis_title=\"Users\",\n    title=\"Pink & Yellow Cab Firm Users Distribution Over City\" )","4e3ae4aa":"data2_0 = MasterData.groupby(\"City\").count()\nfig1 = px.pie(data2_0,\n                        values=data2_0.Users,\n                        names=data2_0.index ,title=\"Total Users Overview by Cities\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","58e7396d":"MasterData[\"User_Pop_Ratio\"] = MasterData[\"Users\"] \/ MasterData[\"Population\"]\nMasterData[\"Profit_of_Trip\"] = MasterData[\"Price_Charged\"] - MasterData[\"Cost_of_Trip\"]\ndata2_1 = MasterData.groupby(\"City\").sum()\nfig1 = px.pie(data2_1,\n                        values=data2_1.Profit_of_Trip,\n                        names=data2_1.index ,title=\"Total Market Profit Share by Cities\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","ac7386c0":"pinkData = MasterData[MasterData['Company'] == 'Pink Cab']\nyellowData = MasterData[MasterData['Company'] == 'Yellow Cab']\n\ndict1 = {\"Pink Cab\" : [pinkData[\"Profit_of_Trip\"].sum()] ,\"Yellow Cab\" : [yellowData[\"Profit_of_Trip\"].sum()] }\n\ndata2_2 = pd.DataFrame(dict1).T\n\nfig1 = px.pie(data2_2,\n                        values=data2_2[0],\n                        names=data2_2.index ,title=\"Total Market Profit Share by Cab Firms\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","87a4d7f7":"data3_0 = MasterData.groupby(\"Gender\").count()\nfig1 = px.pie(data3_0,\n                        values=data3_0.Users,\n                        names=data3_0.index ,title=\"Total Users Overview by Gender\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","583fc524":"data3_1 = MasterData[MasterData[\"Company\"] == \"Pink Cab\"].groupby(\"Gender\").count()\ndata3_2 = MasterData[MasterData[\"Company\"] == \"Yellow Cab\"].groupby(\"Gender\").count()\n\nfig = go.Figure()\nfig.add_trace(go.Bar(\n                    x=data3_1.index,\n                    y=data3_1['Users'],\n                    name='Pink Cab',\n                    marker_color='pink' \n                    ))            \nfig.add_trace(go.Bar(\n                    x=data3_2.index,\n                    y=data3_2['Users'],\n                    name='Yellow Cab',\n                    marker_color='orange'\n                    ))\nfig.update_layout(\n    yaxis_title=\"Users\",\n    title=\"Pink & Yellow Cab Firm Users Distribution Over Gender\" )","88db2f7e":"data3_3 = MasterData.groupby(\"Payment_Mode\").count()\nfig1 = px.pie(data3_3,\n                        values=data3_3.Users,\n                        names=data3_3.index ,title=\"Total Users Overview by Payment Method\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","8ed8fe9e":"ageGroup_Young  = MasterData[(MasterData [\"Age\"] >= 18) & (MasterData [\"Age\"] < 25)].count()\nageGroup_Middle = MasterData[(MasterData [\"Age\"] >= 25) & (MasterData [\"Age\"] < 40)].count()\nageGroup_Old    = MasterData[(MasterData [\"Age\"] >= 40) & (MasterData [\"Age\"] <= 65)].count()\n\ndict = {\"25 > Age >= 18 (YOUNG)\" : ageGroup_Young ,\"40 > Age >= 25 (MIDDLE)\" : ageGroup_Middle , \"65 >= Age >= 40 (OLD)\" : ageGroup_Old }\ndata4_0 = pd.DataFrame(dict).T\n\nfig1 = px.pie(data4_0 ,\n                        values=data4_0.Users,\n                        names=data4_0.index ,title=\"Total Users Overview by Age Groups\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 ) \n\n ","7b3ee31c":"ageGroup_Young_Pink    = MasterData[(MasterData [\"Age\"] >= 18) & (MasterData [\"Age\"] < 25) & (MasterData[\"Company\"] == \"Pink Cab\")] .count()\nageGroup_Middle_Pink   = MasterData[(MasterData [\"Age\"] >= 25) & (MasterData [\"Age\"] < 40) & (MasterData[\"Company\"] == \"Pink Cab\")].count()\nageGroup_Old_Pink      = MasterData[(MasterData [\"Age\"] >= 40) & (MasterData [\"Age\"] <= 65) & (MasterData[\"Company\"] == \"Pink Cab\")].count()\n\nageGroup_Young_Yellow  = MasterData[(MasterData [\"Age\"] >= 18) & (MasterData [\"Age\"] < 25) & (MasterData[\"Company\"] == \"Yellow Cab\")] .count()\nageGroup_Middle_Yellow = MasterData[(MasterData [\"Age\"] >= 25) & (MasterData [\"Age\"] < 40) & (MasterData[\"Company\"] == \"Yellow Cab\")].count()\nageGroup_Old_Yellow    = MasterData[(MasterData [\"Age\"] >= 40) & (MasterData [\"Age\"] <= 65) & (MasterData[\"Company\"] == \"Yellow Cab\")].count()\n\ndict0 = { \"25 > Age >= 18 (YOUNG)\" : ageGroup_Young_Pink ,\"40 > Age >= 25 (MIDDLE)\" : ageGroup_Middle_Pink , \"65 >= Age >= 40 (OLD)\" : ageGroup_Old_Pink }\n\ndict1 = { \"25 > Age >= 18 (YOUNG)\" : ageGroup_Young_Yellow ,\"40 > Age >= 25 (MIDDLE)\" : ageGroup_Middle_Yellow , \"65 >= Age >= 40 (OLD)\" : ageGroup_Old_Yellow }\n\ndata4_1 = pd.DataFrame(dict0).T\ndata4_2 = pd.DataFrame(dict1).T\n\nfig = go.Figure()\nfig.add_trace(go.Bar(\n                    x=data4_1.index,\n                    y=data4_1['Users'],\n                    name='Pink Cab',\n                    marker_color='pink' \n                    ))            \nfig.add_trace(go.Bar(\n                    x=data4_2.index,\n                    y=data4_2['Users'],\n                    name='Yellow Cab',\n                    marker_color='orange'\n                    ))\nfig.update_layout(\n    yaxis_title=\"Users\",\n    title=\"Pink & Yellow Cab Firm Users Distributions by Age Groups\" )","ba5125e0":"data5_0 = MasterData.groupby(\"City\")[\"Income_(USD\/Month)\"].mean()\ndata5_0 = pd.DataFrame(data5_0)\nfig1 = px.pie(data5_0,\n                        values=data5_0[\"Income_(USD\/Month)\"],\n                        names=data5_0.index ,title=\"Average Income by Cities\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )\n","051d463b":"data5_1 = MasterData.groupby(\"Company\")[\"Income_(USD\/Month)\"].mean()\ndata5_1 = pd.DataFrame(data5_1)\nfig1 = px.pie(data5_1,\n                        values=data5_1[\"Income_(USD\/Month)\"],\n                        names=data5_1.index ,title=\"Average Income by Cab Firm\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","f57beef2":"data5_2 = MasterData.groupby(\"City\")[\"KM_Travelled\"].sum()\ndata5_2 = pd.DataFrame(data5_2)\nfig1 = px.pie(data5_2,\n                        values=data5_2[\"KM_Travelled\"],\n                        names=data5_2.index ,title=\"Total KM Travelled by Cities\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","eda2cfdb":"data5_3 = MasterData.groupby(\"Company\")[\"KM_Travelled\"].sum()\ndata5_3 = pd.DataFrame(data5_3)\nfig1 = px.pie(data5_3,\n                        values=data5_3[\"KM_Travelled\"],\n                        names=data5_3.index ,title=\"Total KM Travelled by Cab Firm\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","b503503d":"MasterData[\"Profit_per_KM\"] = MasterData[\"Profit_of_Trip\"].sum() \/ MasterData[\"KM_Travelled\"].sum()\ndata5_4 = MasterData.groupby(\"City\")[\"Profit_per_KM\"].mean()\ndata5_4 = pd.DataFrame(data5_4)\n\nfig1 = px.pie(data5_4,\n                        values=data5_4[\"Profit_per_KM\"],\n                        names=data5_4.index ,title=\"Average Profit per KM Travelled by Cities\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","5b55bee5":"data5_5 = MasterData.groupby(\"Company\")[\"Profit_per_KM\"].mean()\ndata5_5 = pd.DataFrame(data5_5)\n\nfig1 = px.pie(data5_5,\n                        values=data5_5[\"Profit_per_KM\"],\n                        names=data5_5.index ,title=\"Average Profit per KM Travelled by Cab Firm\"\n                        )\nfig1.update_traces(\n                        textposition='inside',\n                        textinfo='percent+label'\n                        )\nfig1.update_layout( width = 1100 , height = 600 )","f0acff6c":"MasterData['Year_of_Travel'] = MasterData['Date_of_Travel'].dt.year\nMasterData['Month_of_Travel'] = MasterData['Date_of_Travel'].dt.month\nMasterData['Day_of_Travel'] = MasterData['Date_of_Travel'].dt.day\n\nMasterData_TimeSeries=MasterData.set_index('Date_of_Travel')\nMasterData_TimeSeries.head(10)","01a857f0":"years_list = [\"2016\",\"2017\",\"2018\"]\n\ndef year_pink():\n    \n    \n    \n    profit_2016 = round ( MasterData[(MasterData['Year_of_Travel'] == 2016) & (MasterData.Company == \"Pink Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    profit_2017 = round ( MasterData[(MasterData['Year_of_Travel'] == 2017) & (MasterData.Company == \"Pink Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    profit_2018 = round ( MasterData[(MasterData['Year_of_Travel'] == 2018) & (MasterData.Company == \"Pink Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    \n    profits = [profit_2016, profit_2017, profit_2018]\n    \n    return profits\n\n   \n\ndef year_yellow():\n    \n    \n    profit_2016 = round ( MasterData[(MasterData['Year_of_Travel'] == 2016) & (MasterData.Company == \"Yellow Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    profit_2017 = round ( MasterData[(MasterData['Year_of_Travel'] == 2017) & (MasterData.Company == \"Yellow Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    profit_2018 = round ( MasterData[(MasterData['Year_of_Travel'] == 2018) & (MasterData.Company == \"Yellow Cab\")][\"Profit_of_Trip\"].sum() ,2)\n    \n    profits = [profit_2016, profit_2017, profit_2018]\n    \n    return profits\n   \n\nyellow = year_yellow()\npink = year_pink()\nzippedy = zip(yellow,years_list)\nzippedp = zip(pink,years_list)\n\ndatap = pd.DataFrame(zippedp,columns=[\"Profit\",\"Year\"])\ndatay = pd.DataFrame(zippedy,columns=[\"Profit\",\"Year\"])\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=datay.Year, y=datay.Profit,\n                    mode='lines+markers',\n                    name='Yellow Cab'\n                    ))\nfig.add_trace(go.Scatter(x=datap.Year, y=datap.Profit,\n                    mode='lines+markers',\n                    name='Pink Cab'\n                     ))\nfig.update_layout(\n    title=\"Total Profit per year by Cab Firm\",\n    xaxis_title=\"Years\",\n    yaxis_title=\"Profits\",\n    legend_title=\"Cab Companies\",\n)\n\nfig.show()\n","2a3006dd":"MasterData.info()","42f26e5e":"\n\n\n\u25feXYZ is a private firm in US. Due to remarkable growth in the Cab Industry in last few years and multiple key players in the market, it is planning for an investment in Cab industry and as per their Go-to-Market(G2M) strategy they want to understand the market before taking final decision.\n\n\u25feXYZ is interested in using your actionable insights to help them identify the right company to make their investment.\n\n#### **Dataset**\nThere have been provided 4 individual data sets. Time period of data is from **31\/01\/2016** to **31\/12\/2018**.\nBelow are the list of datasets which are provided for the analysis:\n\n**Cab_Data.csv** \u2013 this file includes details of transaction for 2 cab companies\n\n**Customer_ID.csv** \u2013 this is a mapping table that contains a unique identifier which links the customer\u2019s demographic details\n\n**Transaction_ID.csv** \u2013 this is a mapping table that contains transaction to customer mapping and payment mode\n\n**City.csv** \u2013 this file contains list of US cities, their population and number of cab users\n\n**Author : Ugur Selim Ozen**\n","79c6cf0c":"#### \u26ab As seen from this Pie Chart; On the basis of **cities**, the **most travelled in KM**  are **New York, Chicago, Los Angeles, Washington and Boston**.","96b662a4":"#### \u26ab As seen from this Pie Chart; **More than half of the total market profit share** on the basis of cities belongs to **New York**.","3970c583":"#### \u26ab As seen from this Bar Chart; Looking at the **age distribution of all users in the basis of companies**, it is seen that both have the **same percentage distribution for every age group** .","805fcdd0":"### \u26ab **Overall Conclusion**\n\nWhen we consider for both Cab Firms in terms of **total market profit share** , **total user share**  , **yearly market profit share** , **total travelled in KM by Users**  ;  we will recommend **Yellow Cab Firm** for investment. \n","198c339b":"#### \u26ab As seen from this Pie Chart; Looking at the **age distribution of all users**, it is seen that **approximately half of them** are between the ages of **18-25**.","48956216":"# **G2M (Go-to-Market strategy) Insight for Cab Investment Firm EDA (Exploratory Data Analysis)**","2d5e15e4":"#### \u26ab As seen from this Pie Chart; The **total travelled in KM** for **Yellow Cab** is **approximately 3 times that of Pink Cab**.","303e1834":"#### \u26ab As seen from this Pie Chart; The **average profit per travelled in KM by cities** is approximately **equal**.","101277e7":"#### \u26ab As seen from this Pie Chart; On the basis of **cities**, the **highest number of total users**  are in **New York, Chicago, Los Angeles, Washington and Boston**.","5667f8ed":"#### \u26ab As seen from this Pie Chart; Considering the payment preferences of all users, the **credit card- cash payment ratio is 3 to 2**.","810c2868":"#### \u26ab As seen from this Pie Chart; The **average profit per travelled in KM by companies** is approximately **equal**.","ddfd5b48":"#### \u26ab As seen from this Pie Chart; In the **distribution of users by gender**, there is an approximate **3 to 2 ratio for men and women**.","39229e3d":"#### \u26ab As seen from this Pie Chart; The **average income of all users by city** is approximately **equal**.","3416ad88":"#### \u26ab As seen from this Bar Chart; For the **Yellow Cab** Company, the highest number of users on a city basis are in **New York, Washington and Chicago**, while for the **Pink Cab** Company, the most are in **Los Angeles, New York and San Diego**.","e713e1e6":"# 0. Problem Definition and Delivery","4082606b":"#### \u26ab As seen from this Pie Chart; The **total market profit share** of **Yellow Cab** is **approximately 9 times that of Pink Cab**.","e2f825d4":"#### \u26ab As seen from this Pie Chart; \nIn 2016 , The **total market profit share** of **Yellow Cab** is **approximately 8.15 times that of Pink Cab**.\nIn 2017 , The **total market profit share** of **Yellow Cab** is **approximately 8.16 times that of Pink Cab**.\nIn 2018 , The **total market profit share** of **Yellow Cab** is **approximately 8.66 times that of Pink Cab**","f09772c3":"#### 5. Time Series Analysis","b712b740":"#### \u26ab As seen from this Bar Chart; When the distribution of users by gender is analyzed on a company basis, while the **male-female ratio is 57.6% - 42.4% in Yellow Cab** Company, the **male-female ratio is 55.9% - 44.1% in Pink Cab** Company.","e9e83838":"# 3. Statistical Overview and Data Analysis\n\n#### In this section , I analyzed statinfos , distributions , outliers , boxplots , correlations , covariance and so on of some columns of entire MasterData.","e10ba219":"# 2. Data Cleaning and Feature Engineering\n\n#### In this section , I transformed some features to appropriate datatypes and formats.","c06e0c87":"#### \u26ab As seen from this Pie Chart; The total number of users of **Yellow Cab** is **approximately 3 times that of Pink Cab**.","2b6c039c":"#### \u26ab As seen from this Pie Chart; The **average income of all users by companies** is approximately **equal**.","629745e2":"#### \u26ab From the statistical data analysis ; We see that there is **strongly positive correlation** between **KM_Travelled - Price_Charged**  , **KM_Travelled - Cost_of_Trip** , **Price_Charged - Cost_of_Trip** , **Users - Population**  and also we prove that correlations by using spearman rank correlation , pearson correlation coefficient statistical tests and zero p-values which are lower than 0.05 value to satisfy the correlation values as statistically. ","b3b97075":"# 4. Inferencial Data Analysis\n\n#### In this section ,  I analyzed MasterData and some meaningful pieces of MasterData which are extracted from it to make a sensable decision which Cab Firm is most valueble for investing in future times by taking insights and inferences from data analysis and visualizations with different aspects.","d3c1ef8b":"# 1. Data Overview\n\n#### In this section , I analyzed dataset's shape(entries,features) , missing values(NA or Null values) , feature's datatypes and looked at head of dataset's.","701900f4":"#### **Merging All Datasets to MasterData** "}}