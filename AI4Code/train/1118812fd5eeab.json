{"cell_type":{"a938c896":"code","9b31d512":"code","f3845642":"code","7aa37758":"code","c300b204":"code","413e3cc5":"code","f8f50876":"code","9e9c3f43":"code","823b5d15":"code","bf29e405":"code","76e499c1":"code","fc726779":"code","b8f3ac25":"code","51ae5c87":"code","aa7b2676":"code","35c4e5bd":"code","8b019c4a":"code","1fc9201a":"code","0ec120ff":"code","c3c54cfc":"code","5b48de65":"code","35770116":"code","f8fd358d":"code","811ee6db":"markdown","70094e2d":"markdown","23965b05":"markdown","996b8a6e":"markdown","f8292ca3":"markdown","77b756c9":"markdown","f2346534":"markdown","682f1a45":"markdown","e52a28e3":"markdown","f1735ca2":"markdown","0c068fca":"markdown","b2d7807f":"markdown","3c18e2b6":"markdown","d8b60683":"markdown","eb681b5c":"markdown","7679ec51":"markdown","9ebcd0f9":"markdown","0dea724d":"markdown","f2332bd9":"markdown","125ddcb2":"markdown","84b804cb":"markdown","3ddda473":"markdown","bd4af75d":"markdown","1e0be414":"markdown","05b74c92":"markdown","e4020a9e":"markdown"},"source":{"a938c896":"!pip install pycountry-convert","9b31d512":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nfrom pandas.api.types import CategoricalDtype\nfrom plotnine import *\nfrom plotnine.data import mpg\nfrom plotnine import options as op\nfrom plotnine import watermark as wm\nimport matplotlib.pyplot as plt\nfrom PIL import Image\nimport missingno as msno\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n%matplotlib inline\nimport pycountry_convert as pc\nimport warnings\nwarnings.filterwarnings('ignore')\nimport collections","f3845642":"vaccination_data = pd.read_csv('\/kaggle\/input\/covid-world-vaccination-progress\/country_vaccinations.csv')\npopulation_data = pd.read_csv('..\/input\/population-by-country-2020\/population_by_country_2020.csv')\nvaccination_data.columns","7aa37758":"from PIL import Image\nimport requests\nimport urllib\nfrom io import StringIO\ndef image_resize(url):\n    img = Image.open(requests.get(url, stream=True).raw)\n    img = img.resize((70,55),Image.ANTIALIAS)\n    img = np.asarray(img)\n    return img","c300b204":"seychelles_vaccination = vaccination_data[(vaccination_data.country == 'Seychelles')]['people_fully_vaccinated'].max()\nseychelles_vaccines = vaccination_data[(vaccination_data.country == 'Seychelles')]['vaccines'].values[0]\nseychelles_population = population_data[(population_data['Country (or dependency)'] == 'Seychelles')]['Population (2020)']\nseychelles_may_2021 = pd.DataFrame(columns=['Fully Vaccianted','Population','Fresh Cases'])\nseychelles_may_2021['Fully Vaccianted'] = [seychelles_vaccination]\nseychelles_may_2021['Population'] = [seychelles_population.values[0]]\nseychelles_may_2021['Fresh Cases'] = [9423]\nseychelles_may_2021 = seychelles_may_2021.T\nseychelles_may_2021 = seychelles_may_2021.reset_index()\nseychelles_may_2021.columns = ['indicator','value']","413e3cc5":"op.figure_size=(9, 4)\np = (ggplot(seychelles_may_2021)         \n + aes(y='value', x='indicator',fill='indicator') \n + geom_text(x=1, y = 59676.0, label='As of May 9th 2021, fresh cases in Seychelles surged to ~10k \\n despite getting most of its adult population vaccinated.',size=10,nudge_y=0.25,nudge_x=0.9,color='white')\n + geom_col(size=3)\n + coord_flip()\n + labs(title = \"Seychelles - Fresh Cases in May 2021\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_position='none',\n    panel_grid = element_line(size = 0.01),\n    legend_text = element_text(color = \"white\"),\n    axis_title_x = None,\n    axis_text_y = element_text(color = \"white\", size = 10),\n    axis_text_x = element_text(color = \"white\", size = 10),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = p.draw()\nsc = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/SC_70x55.png')\nfig.figimage(sc, xo=275, yo=75, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.show()","f8f50876":"rename_country = [\"England\" , \"Wales\" , \"Scotland\" , \"Northern Ireland\"]\n\nfor i in rename_country:\n     vaccination_data[\"country\"] = vaccination_data[\"country\"].str.replace(i , \"United Kingdom\")","9e9c3f43":"def convert_df_with_continent(df):\n    \n    df['continent'] = ['']*df.shape[0]\n    \n    def continent_name_convert(name):\n        if name == 'AF':\n            return 'Africa'\n        elif name == 'EU':\n            return 'Europe'\n        elif name == 'NA':\n            return 'NA'\n        elif name == 'SA':\n            return 'SA'\n        elif name == 'OC':\n            return 'Oceania'\n        elif name == 'AS':\n            return 'Asia'\n\n    for i in range(df.shape[0]):\n        country = df['country'].iloc[i]\n        try:\n            country_code = pc.country_name_to_country_alpha2(country, cn_name_format=\"default\")\n            continent_name = pc.country_alpha2_to_continent_code(country_code)\n            continent_name_full = continent_name_convert(continent_name)\n            df['continent'].iloc[i] = continent_name_full\n    #         print(f'{country} - {continent_name}')\n        except:\n            if country == \"Cote d'Ivoire\":\n                continent_name = 'AF'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Faeroe Islands':\n                continent_name = 'EU'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Kosovo':\n                continent_name = 'EU'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Saint Helena':\n                continent_name = 'AF'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Curacao':\n                continent_name = 'SA'\n                continent_name_full = continent_name_convert(continent_name)  \n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Timor':\n                continent_name = 'AS'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            elif country == 'Democratic Republic of Congo':\n                continent_name = 'AF'\n                continent_name_full = continent_name_convert(continent_name)\n                df['continent'].iloc[i] = continent_name_full\n            else:\n                print(f'{country} mistake detected')\n        continue\n    return df\n\n","823b5d15":"def population_agg(df):\n    df['population'] = ['']*df.shape[0]\n    for i in range(df.shape[0]):\n        country = df['country'].iloc[i]\n        try:\n            population = population_data.loc[population_data['Country (or dependency)'] == country]['Population (2020)'].values[0]\n            df['population'].iloc[i] = population\n        except Exception as e:\n            df['population'].iloc[i] = np.nan\n            continue\n    return df","bf29e405":"def stack_population_df_fully_vaccinated(df):\n    df_new = pd.DataFrame(columns=['country','vaccination_status','total_vaccinations'])\n    df_new['country'] = ['']*2*df.shape[0]\n    df_new['vaccination_status'] = ['']*2*df.shape[0]\n    df_new['total_vaccinations'] = ['']*2*df.shape[0]\n    index = 0\n    for i in range(df.shape[0]):\n        df_new.iloc[index] = [df['country'].iloc[i],'vaccinated',df['people_fully_vaccinated'].iloc[i]]\n        df_new.iloc[index+1] = [df['country'].iloc[i],'not_vaccinated',int(df['population'].iloc[i])-int(df['people_fully_vaccinated'].iloc[i])]\n        index += 2\n    return df_new","76e499c1":"def format_number(number):\n    return (\"{:,}\".format(number))","fc726779":"countries_list = ['United States','United Kingdom','India',\"Israel\",'Brazil']\nherd_immunity = pd.DataFrame()\nfor i in range(vaccination_data.shape[0]):\n    if vaccination_data['country'].iloc[i] in countries_list:\n        herd_immunity = herd_immunity.append(vaccination_data.iloc[i])\n        \nherd_immunity_df = pd.DataFrame(herd_immunity.groupby('country')['people_fully_vaccinated_per_hundred'].max())\nherd_immunity_df['herd_immune_percent'] = ['']*herd_immunity_df.shape[0] \nfor i in range(herd_immunity_df.shape[0]):\n    herd_immunity_df['herd_immune_percent'].iloc[i] = round(70 - herd_immunity_df['people_fully_vaccinated_per_hundred'].iloc[i],2)\nherd_immunity_df = herd_immunity_df.reset_index()\nherd_immunity_df = population_agg(herd_immunity_df)\nfor i in range(herd_immunity_df.shape[0]):\n    herd_immunity_df['population'].iloc[i] = format_number(round(herd_immunity_df['population'].iloc[i] * (herd_immunity_df['herd_immune_percent'].iloc[i]\/100)))","b8f3ac25":"op.figure_size=(7,5)\nax = (ggplot(herd_immunity_df)         \n + aes(x='country', y='herd_immune_percent',fill='country')    \n + geom_col(size=15)\n + geom_label(aes(label = 'population'),color = \"white\",label_padding= 0.25,size=11)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Percent Yet to be Vaccinated to achieve Herd Immunity\")\n + labs(y = \"Percentage\", x = \"Country\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.01),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\", size=13,face='bold'),\n    axis_text_x = element_text(color = \"white\", size = 13,angle=90,face='bold'),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1,face = \"bold\"),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 12, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/16_1.png')\nind = image_resize('https:\/\/raw.githubusercontent.com\/google\/region-flags\/gh-pages\/png\/IN.png')\nbrz = image_resize('https:\/\/raw.githubusercontent.com\/google\/region-flags\/gh-pages\/png\/BR.png')\nisr = image_resize('https:\/\/raw.githubusercontent.com\/google\/region-flags\/gh-pages\/png\/IL.png')\nusa = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/US_70x55.png')\nuk = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/GB_70x55.png')\nfig.figimage(image, xo=0, yo=0, alpha=0.12, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.figimage(ind, xo=220, yo=560, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.figimage(brz, xo=115, yo=485, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.figimage(isr, xo=327, yo=265, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.figimage(uk, xo=429, yo=415, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.figimage(usa, xo=533, yo=340, alpha=1, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=False)\nfig.show()","51ae5c87":"vaccination_data = convert_df_with_continent(vaccination_data)\ndaily_vaccinations = vaccination_data[['country','total_vaccinations','continent']]\ndaily_vaccine_df = pd.DataFrame(daily_vaccinations.groupby('continent')['total_vaccinations'].max().sort_values(ascending = False))\ndaily_vaccine_df = daily_vaccine_df.reset_index()\ndaily_vaccine_df_continent = pd.DataFrame(columns=['country','date','daily_vaccinations'])\nfor i in range(daily_vaccine_df.shape[0]):\n    df = vaccination_data[(vaccination_data.continent==daily_vaccine_df['continent'].iloc[i]) & (vaccination_data.total_vaccinations==daily_vaccine_df['total_vaccinations'].iloc[i])]\n    if df['country'].iloc[0] != 'United Kingdom':\n        daily_vaccine_df_continent = daily_vaccine_df_continent.append(vaccination_data[(vaccination_data.country==df['country'].iloc[0])])\ndaily_vaccine_df_continent = daily_vaccine_df_continent[['country','date','daily_vaccinations']]\ndaily_vaccine_df_continent = daily_vaccine_df_continent.dropna(how='any',axis=0)\ndaily_vaccine_df_continent['date']= pd.to_datetime(daily_vaccine_df_continent['date'])\ndaily_vaccine_df_continent['daily_vaccinations'] = daily_vaccine_df_continent['daily_vaccinations'].astype(int)\nop.figure_size=(12, 12)\np = (ggplot(daily_vaccine_df_continent)         \n + aes(y='daily_vaccinations', x='date',color='country')    \n + geom_line(size=1.5) \n + scale_fill_manual(values = [\"#B21236\",\"#723240\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\"])\n#  + facet_wrap('country')\n + labs(title = \"Daily Vaccination In Top Nations From Each Continent\")\n + labs(y = \"Daily Vaccination\", x = \"Date\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.1),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\"),\n    axis_text_x = element_text(color = \"white\", size = 10,angle=90),\n    axis_text_y = element_text(color = \"white\", size = 10),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = p.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/14_1.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","aa7b2676":"top_20_countries_vaccinated = pd.DataFrame(vaccination_data.groupby(\"country\")[\"total_vaccinations\"].max().sort_values(ascending = False).head(20))\ntop_20_countries_vaccinated.reset_index(level=0,inplace=True)\ntop_20_countries_vaccinated = convert_df_with_continent(top_20_countries_vaccinated)\ntop_20_countries_vaccinated['number_labels'] = ['']*top_20_countries_vaccinated.shape[0]\n\nfor i in range(top_20_countries_vaccinated.shape[0]):\n    top_20_countries_vaccinated['number_labels'].iloc[i] = format_number(top_20_countries_vaccinated['total_vaccinations'].iloc[i])\n    \nop.figure_size=(8,5)\nax = (ggplot(top_20_countries_vaccinated)         \n + aes(x='country', y='total_vaccinations',fill='continent')    \n + geom_col(size=20)\n#  + geom_label(aes(label = 'number_labels'),ha='right',color = \"white\",label_padding= 0.25)\n + coord_flip()\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Top 20 Vaccinated Countries By Total Vaccinations\")\n + labs(y = \"Number of Vaccinations\", x = \"Country\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\"),\n    axis_text_x = element_text(color = \"white\", size = 20),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 20, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/1_enlargev3.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","35c4e5bd":"top_20_countries_people_vaccinated = pd.DataFrame(vaccination_data.groupby(\"country\")[\"people_vaccinated\"].max().sort_values(ascending = False).head(20))\ntop_20_countries_people_vaccinated.reset_index(level=0,inplace=True)\ntop_20_countries_people_vaccinated = convert_df_with_continent(top_20_countries_people_vaccinated)\ntop_20_countries_people_vaccinated['number_labels'] = ['']*top_20_countries_people_vaccinated.shape[0]\n\nfor i in range(top_20_countries_people_vaccinated.shape[0]):\n    top_20_countries_people_vaccinated['number_labels'].iloc[i] = format_number(top_20_countries_people_vaccinated['people_vaccinated'].iloc[i])\n    \nop.figure_size=(8,10)\nax = (ggplot(top_20_countries_people_vaccinated)         \n + aes(x='country', y='people_vaccinated',fill='continent')    \n + geom_col(size=15)\n + geom_label(aes(label = 'number_labels'),ha='right',color = \"white\",label_padding= 0.25,size=11)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Top 20 Vaccinated Countries by People Vaccinated\")\n + labs(y = \"Number of Vaccinations\", x = \"Country\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\", size=13,face='bold'),\n    axis_text_x = element_text(color = \"white\", size = 13,angle=90,face='bold'),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/8_enlargev2.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","8b019c4a":"top_20_countries_people_fully_vaccinated = pd.DataFrame(vaccination_data.groupby(\"country\")[\"people_fully_vaccinated\"].max().sort_values(ascending = False).head(20))\ntop_20_countries_people_fully_vaccinated.reset_index(level=0,inplace=True)\ntop_20_countries_people_fully_vaccinated = convert_df_with_continent(top_20_countries_people_fully_vaccinated)\ntop_20_countries_people_fully_vaccinated = population_agg(top_20_countries_people_fully_vaccinated)\ntop_20_countries_people_fully_vaccinated = stack_population_df_fully_vaccinated(top_20_countries_people_fully_vaccinated)\n\n\nop.figure_size=(8,10)\nax = (ggplot(top_20_countries_people_fully_vaccinated)         \n + aes(x='country', y='total_vaccinations',fill='vaccination_status')    \n + geom_col(size=20)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Top 20 Vaccinated Countries based on People Fully Vaccinated\")\n + labs(y = \"Number of Vaccinations\", x = \"Country\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\",size = 10,face = \"bold\"),\n    axis_text_x = element_text(color = \"white\", size = 13,angle=90,face = \"bold\"),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10},face = \"bold\"),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/11_enlargev1.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","1fc9201a":"top_20_countries_pfvph = pd.DataFrame(vaccination_data.groupby(\"country\")[\"people_fully_vaccinated_per_hundred\"].max().sort_values(ascending = False).head(20))\ntop_20_countries_pfvph.reset_index(level=0,inplace=True)\ntop_20_countries_pfvph = convert_df_with_continent(top_20_countries_pfvph)\n\ntop_20_countries_pfvph['number_labels'] = ['']*top_20_countries_pfvph.shape[0]\n\nfor i in range(top_20_countries_pfvph.shape[0]):\n    top_20_countries_pfvph['number_labels'].iloc[i] = format_number(top_20_countries_pfvph['people_fully_vaccinated_per_hundred'].iloc[i])\nop.figure_size=(5,5)\nax = (ggplot(top_20_countries_pfvph)         \n + aes(x='country', y='people_fully_vaccinated_per_hundred',fill='continent')    \n + geom_col(size=13)\n + geom_label(aes(label = 'number_labels'),ha='right',color = \"white\",label_padding= 0.25)\n + coord_flip()\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Top 20 Vaccinated Countries by People Fully Vaccinated Per Hundred\")\n + labs(y = \"Ratio (in percent)\", x = \"Country\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\",size=11,face='bold'),\n    axis_text_x = element_text(color = \"white\", size = 10),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/12.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.15, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","0ec120ff":"vaccine_manufacture = pd.read_csv('..\/input\/covid-world-vaccination-progress\/country_vaccinations_by_manufacturer.csv')\n\nvaccine_counts = pd.DataFrame(vaccine_manufacture.groupby(\"vaccine\")[\"total_vaccinations\"].max().sort_values(ascending = False))\nvaccine_counts.reset_index(level=0,inplace=True)\n\nvaccine_counts['number_labels'] = ['']*vaccine_counts.shape[0]\n\nfor i in range(vaccine_counts.shape[0]):\n    vaccine_counts['number_labels'].iloc[i] = format_number(vaccine_counts['total_vaccinations'].iloc[i])\n    ","c3c54cfc":"op.figure_size=(8,5)\nax = (ggplot(vaccine_counts)         \n + aes(x='vaccine', y='total_vaccinations')    \n + geom_col(size=15)\n + geom_label(aes(label = 'number_labels'),ha='center',color = \"black\",label_padding= 0.25)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Vaccine Counts\")\n + labs(y = \"Total No. of Vaccinations\", x = \"Vaccine\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"blue\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\"),\n    axis_text_x = element_text(color = \"white\", size = 10),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/4.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","5b48de65":"top_50_countries_people_fully_vaccinated = pd.DataFrame(vaccination_data.groupby(\"country\")[\"people_fully_vaccinated\"].max().sort_values(ascending = False).head(50))\ntop_50_countries_people_fully_vaccinated.reset_index(level=0,inplace=True)\ntop_50_countries_people_fully_vaccinated = convert_df_with_continent(top_50_countries_people_fully_vaccinated)\ntop50_countries_continent_count = pd.DataFrame(top_50_countries_people_fully_vaccinated.groupby('continent')['country'].apply(list))\ntop50_countries_continent_count['country_count'] = ['']*top50_countries_continent_count.shape[0]\ntop50_countries_continent_count.reset_index(level=0,inplace=True)\n\nfor i in range(top50_countries_continent_count.shape[0]):\n    top50_countries_continent_count['country_count'].iloc[i] = len(top50_countries_continent_count['country'].iloc[i])\n    if top50_countries_continent_count['continent'].iloc[i] == 'NA':\n        top50_countries_continent_count['continent'].iloc[i] = 'North America'\n    elif top50_countries_continent_count['continent'].iloc[i] == 'SA':\n        top50_countries_continent_count['continent'].iloc[i] = 'South America'\n\nop.figure_size=(8,5)\nax = (ggplot(top50_countries_continent_count)         \n + aes(x='continent', y='country_count')    \n + geom_col(size=15)\n + geom_label(aes(label = 'country_count'),ha='center',color = \"black\",label_padding= 0.25)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Top 50 Countries Continent wise Count\")\n + labs(y = \"Total No. of countries\", x = \"Continent\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\"),\n    axis_text_x = element_text(color = \"white\", size = 10),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/7.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","35770116":"countries_pfvph = pd.DataFrame(vaccination_data.groupby(\"country\")[\"people_fully_vaccinated_per_hundred\"].max().sort_values(ascending = False))\ncountries_pfvph.reset_index(level=0,inplace=True)\ncountries_pfvph = convert_df_with_continent(countries_pfvph)\n# bottom_20_countries_pfvph.groupby('continent', as_index=False).apply(lambda x: x.loc[x.people_fully_vaccinated_per_hundred.argmin(),])\nbottom_20_countries_pfvph = pd.DataFrame(countries_pfvph.groupby(\"continent\")[\"people_fully_vaccinated_per_hundred\"].min())\nbottom_20_countries_pfvph['country'] = ['']*bottom_20_countries_pfvph.shape[0]\nbottom_20_countries_pfvph.reset_index(level=0,inplace=True)\nfor i in range(bottom_20_countries_pfvph.shape[0]):\n    pvfh = bottom_20_countries_pfvph['people_fully_vaccinated_per_hundred'].iloc[i]\n    continent = bottom_20_countries_pfvph['continent'].iloc[i]\n    bottom_20_countries_pfvph['country'].iloc[i] = countries_pfvph.loc[(countries_pfvph['people_fully_vaccinated_per_hundred']==pvfh) & (countries_pfvph['continent']==continent)]['country'].values[0]\n    if bottom_20_countries_pfvph['continent'].iloc[i] == 'NA':\n        bottom_20_countries_pfvph['continent'].iloc[i] = 'North America'\n    elif bottom_20_countries_pfvph['continent'].iloc[i] == 'SA':\n        bottom_20_countries_pfvph['continent'].iloc[i] = 'South America'","f8fd358d":"op.figure_size=(8,5)\nax = (ggplot(bottom_20_countries_pfvph)         \n + aes(x='continent', y='people_fully_vaccinated_per_hundred')    \n + geom_col(size=15)\n + geom_label(aes(label = 'country'),ha='center',color = \"black\",label_padding= 0.25)\n + scale_fill_manual(values = [\"#B21236\",\"#F03812\",\"#FE8826\",\"#FEB914\",\"#2C9FA2\",\"#002C2B\",\"#F7E1C0\"])\n + labs(title = \"Countries with Least Fully Vaccinated People Per Hundred in a Continent\")\n + labs(y = \"\", x = \"Continent\")\n + theme(\n    panel_background = element_rect(fill = \"black\"),    \n    plot_background = element_rect(fill = \"black\", color = \"black\"),\n    legend_background = element_rect(fill = \"black\"),\n    legend_key = element_blank(),\n   \n    panel_grid = element_line(size = 0.3),\n    panel_grid_minor_y = element_blank(),\n    panel_grid_major_y = element_blank(),\n    \n    legend_text = element_text(color = \"white\"),\n    axis_text_x = element_text(color = \"white\", size = 10),\n    axis_text_y = element_text(color = \"white\", size = 13, hjust = 1, margin={'b': 20, 't':10}),\n    axis_title = element_text(color = \"white\", size = 14, hjust = 1),\n    plot_title = element_text(color = \"white\", face = \"bold\", size = 16, hjust = 4, margin={'b': 20, 't':10}),\n    panel_spacing_x = 1\n  )\n)\n\nfig = ax.draw()\n\nimage = plt.imread('https:\/\/raw.githubusercontent.com\/vineethbabu\/coronavaccine_images\/main\/9.png')\n\nfig.figimage(image, xo=0, yo=0, alpha=0.2, norm=None, cmap=None, vmin=None, vmax=None, origin=None, resize=True)\n\nfig.show()","811ee6db":"# **Total Vaccinations of each Vaccine**","70094e2d":"# **Least Fully Vaccinated People Per Hundred Country in a Continent**","23965b05":"# **Top 20 Vaccinated Countries based on People Fully Vacccinated**","996b8a6e":"<center><b>** Seychelles - Fresh Cases in May 2021 **<\/b><\/center> ","f8292ca3":"# **Daily Vaccination Progress In Top Nations From Each Continent**","77b756c9":"The total number of vaccinations of each vaccine are:\n   * **Pfizer\/BioNTech** - 134.1 M\n   * **Moderna** - 109 M\n   * **Sinovac** - 13 M\n   * **Oxford\/AstraZeneca** - 6 M\n   * **Johnson&Jonson** - 8.6 M ","f2346534":"# **Percentage of Vaccination yet to be done to achieve Herd Immunity**","682f1a45":"Herd Immunity is said to be achieved when **70-75%** of population is vaccinated. Here I wanted to visualise how much percentage of population is yet to be vaccinated to achieve that target and what in absolute value that would mean in terms of population of that country.\n\nI have selected five countries United States, United Kingdom, Brazil, India, Israel\n\n> 1. **India** has to vaccinate **68%** more of its population with **Brazil** closely following India with **63%** more to be vaccinated.\n> 2. **USA** has to vaccinate 37% while **UK** has to vaccinate 44%.\n> 3. **Israel** on the other hand has to vaccinate only around **~11%** more to achieve herd immunity.","e52a28e3":"# **Contents:**\nFollowing plots are shown in this notebook using plotnine python package.\n1. **Percentage yet to be vaccinated to achieve herd immunity in select countries USA, China, Brazil, India, UK.**\n2. **Daily Vaccination progress in top nations from each continent.**\n3. **Top 20 Countries Based on Total Vaccinations**\n4. **Top 20 Countries Based on People Vacccinated**\n5. **Top 20 Countries Based on People Fully Vacccinated - Stacked with Population**\n6. **Top 20 Vaccinated Countries Based on People Fully Vacccinated Per Hundred**\n7. **Total Number of Vaccinations for each Vaccine**\n8. **Continent wise Count of Countries with Top 50 Most People Fully Vacccinated**\n9. **Country with Least Fully Vacccinated People Per Hundred in each Continent**","f1735ca2":"Top 50 countries continent wise count:\n> **22 European**, \n> **17 Asian**, \n> **6 South American**, \n> **4 North America**, \n> **1 African countries**.   ","0c068fca":"Continent wise countries with least fully vaccinated people: \n> * **Namibia** in Africa - **0.05**\n> * **Ukraine** in Europe - **0.00**\n> * **Kyrgyzstan** in Asia - **0.01**\n> * **Guatemala** in North America - **0.01**\n> * **Suriname** in South America - **0.01**","b2d7807f":"# **Fresh Cases in Seychelles:**","3c18e2b6":"<center><h2><b>Thanks For Reading<\/b><\/h2><\/center>\n<center><b>Please give your Suggestion and Comments.<\/b><\/center>","d8b60683":"We can clearly see that all of these counties still have a lot of not vaccinated population.It is clearly evident from this plot specially for heavily populated county like India.\n\n**Israel stands out as the country that has more vaccinated than not vaccinated.**","eb681b5c":"<center><h2><b>Covid19 Vaccination Progress<\/b><\/h2><\/center>","7679ec51":"# **Top 20 Vaccinated Countries by Total Vaccinations**","9ebcd0f9":"As per [reports](https:\/\/www.cnbc.com\/2021\/05\/13\/seychelles-most-vaccinated-nation-on-earth-but-covid-19-has-surged.html) covid-19 has surged in Seychelles, an archipelago of 115 islands in the Indian Ocean. It is vaccinated with Sinopharm and Covishield and nearly 60% of its population is fully vaccinated. It has to be seen as to how it progresses in coming days. ","0dea724d":"# **Top 20 Vaccinated Countries based on People Fully Vacccinated per Hundred**","f2332bd9":"A comparison of daily vaccinations from top nations by total vaccination count from each continent.Here we can see how US and China compare in terms of daily vaccinations.","125ddcb2":"In top countries with people fully vaccinated per hundred we have \n   * **Gibraltar** - Europe\n   * **Israel** - Asia\n   * **Seychelles** - Africa\n   * **Falkland Islands** - South America\n   * **Cayman Islands** - North America","84b804cb":"We can see here the total vaccinated people in top 20 countries. USA again tops the list with nearly 120 million people vaccinated. Followed by India, UK, Brazil.\n\nNow lets see not vaccinated poplutation from each of these countries to get a better picture.","3ddda473":"USA has the most total vaccinations count followed by China, India, UK. Here we have7 Asian, 7 European, 3 North American, 2 South American, 1 Afriacn countries.","bd4af75d":"**Gibraltar** has vaccinated almost all of its adult population. <br>\nMore than half of the population is vaccinated in **Israel**, **Seychelles** and **Falkland Islands**.","1e0be414":"# **My Observations:**\n\n1. In top 20 countries with highest total vaccinations - \n    * **7 Asian**, **7 European**, **3 North American**, **2 South American**, **1 African countries**.\n2. In top 50 countries with highest total vaccinations - \n    * **23 European**, **13 Asian**, **7 South American**, **5 North America**, **2 African countries**.   \n3. In countries with least fully vaccinated people per hundred we have -\n * **Namibia** in Africa - **0.05**\n * **Ukraine** in Europe - **0.00**\n * **Kyrgyzstan** in Asia - **0.01**\n * **Guatemala** in North America - **0.01**\n * **Suriname** in South America - **0.01**\n   ","05b74c92":"# **Top 20 Countries Based on People Vaccinated**","e4020a9e":"# **Top 50 Highest Vaccinated Countries Count in each Continent**"}}