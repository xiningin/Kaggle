{"cell_type":{"344434bf":"code","317ffdb4":"code","081f7412":"code","0a0058be":"code","696bcd55":"code","a92de5e9":"code","8bad6746":"code","308aa7d9":"code","3405a2cd":"code","ff8bd748":"code","951787d5":"code","8d8de937":"code","9cb66af2":"code","a61cf6a4":"code","606666b1":"code","84c39aa5":"code","ca3f4b6e":"code","7d4bae67":"markdown","c2be36f4":"markdown","c37d3de7":"markdown","31fba5ac":"markdown","1c6aad05":"markdown","6e78fd2f":"markdown","1fb36396":"markdown","1e9eb1b0":"markdown","9891e755":"markdown","8d1c5985":"markdown","27ec23fa":"markdown","99cc5224":"markdown","ea740f28":"markdown","ee5178a8":"markdown","4f052c94":"markdown","cb814a0a":"markdown","9de6a236":"markdown"},"source":{"344434bf":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns","317ffdb4":"df_temperature_records = pd.read_csv(\"..\/input\/temperature-timeseries-for-some-brazilian-cities\/station_sao_paulo.csv\", )\n\ndf_temperature_records.head(10)","081f7412":"df_temperature_records.set_index(\"YEAR\", inplace=True)\n\ndf_temperature_records","0a0058be":"df_temperature_records.replace(999.90, np.nan, inplace=True)\n\ndf_temperature_records","696bcd55":"columns_for_mean_records = [\"metANN\"]\ndf_temperature_records_months = df_temperature_records.loc[:, :\"DEC\"]  # slicing up to \"DEC\"\ndf_temperature_records_mean = df_temperature_records[columns_for_mean_records]","a92de5e9":"df_temperature_records_months","8bad6746":"df_temperature_records_mean","308aa7d9":"plt.figure(figsize=(10, 6))\nsns.lineplot(data=df_temperature_records_mean, legend=False)\nplt.ylabel(\"Mean temperature (degC)\")\nplt.show()","3405a2cd":"df_selected_temperature_year = df_temperature_records_months[df_temperature_records_months.index == 2015]\n\ndf_selected_temperature_year","ff8bd748":"df_selected_temperature_year = df_selected_temperature_year.T\n\ndf_selected_temperature_year","951787d5":"plt.figure(figsize=(10, 6))\nsns.lineplot(data=df_selected_temperature_year, legend=False)\nplt.ylabel(\"Temperature (degC)\")\nplt.title(u\"S\u00e3o Paulo temperature records - 2015\")\nplt.show()","8d8de937":"df_selected_temperature_2016 = df_temperature_records_months[df_temperature_records_months.index == 2016]\ndf_selected_temperature_2016 = df_selected_temperature_2016.T\n\ndf_selected_temperature_2016","9cb66af2":"plt.figure(figsize=(10, 6))\nsns.lineplot(data=df_selected_temperature_2016, legend=False)\nplt.ylabel(\"Temperature (degC)\")\nplt.title(u\"S\u00e3o Paulo temperature records - 2016\")\nplt.show()","a61cf6a4":"list_of_df_from_2008_to_2018 = list()\n\nfor year in range(2008, 2019):\n    df_selected_temperature = df_temperature_records_months[df_temperature_records_months.index == year]\n    df_selected_temperature = df_selected_temperature.T\n    list_of_df_from_2008_to_2018.append(df_selected_temperature)\n    \ndf_from_2008_to_2018 = pd.concat(list_of_df_from_2008_to_2018, axis=1)\n\ndf_from_2008_to_2018","606666b1":"plt.figure(figsize=(10, 6))\nsns.lineplot(data=df_from_2008_to_2018, dashes=False)\nplt.ylabel(\"Temperature (degC)\")\nplt.title(u\"S\u00e3o Paulo temperature records from 2008 to 2018\")\nplt.show()","84c39aa5":"months = list()\ntemperature_record = list()\n\nfirst_temperature_record = df_temperature_records_mean.index[0]\nlast_temperature_record = df_temperature_records_mean.index[-1]\nfor year in range(first_temperature_record, last_temperature_record):\n    df_selected_temperature = df_temperature_records_months[df_temperature_records_months.index == year]\n    for month in df_selected_temperature:\n        # This inner loop can be improved, for sure\n        current_date = f\"{month}-{year}\"\n        temperature_record.append(df_selected_temperature.loc[:, month].values[0])\n        months.append(current_date)\n        \nlist_temperature_per_months = list(zip(months, temperature_record))\ndf_temperature_per_months = pd.DataFrame(list_temperature_per_months, columns=[\"Time\", \"Temperature\"])","ca3f4b6e":"plt.figure(figsize=(26, 6))\nsns.lineplot(x=\"Time\", y=\"Temperature\", data=df_temperature_per_months, sort=False)\nplt.ylabel(\"Temperature (degC)\")\nplt.title(u\"S\u00e3o Paulo temperature records from 1946 to 2019\")\nplt.xticks(rotation=90)\nplt.xticks([])\nplt.show()","7d4bae67":"# Exploring Sao Paulo temperature records\n\nLet's have a look in Sao Paulo temperature records. This city expanded a lot, with a highly increase of cars and industry in late 19th Century. Did it get harshly hotter with time? Let's check it out!","c2be36f4":"Not so different at all. Maybe we can check a year range in a unique plot.","c37d3de7":"### Temperature continuous time-series through years\n\nNow, what if we concatenate temperature records for years in a \"continuous\" fashion? Maybe it can provide a more detailed vision when compared with the mean temperature for each year.","31fba5ac":"First thing I noted is that we can use `YEAR` as index in the DataFrame.","1c6aad05":"### Mean temperature","6e78fd2f":"Well, not good for plotting, but the transposed DataFrame would be great.","1fb36396":"Not a beautiful plot, though. Would be 2016 similar to 2015? Let's see.","1e9eb1b0":"## Loading temperature data","9891e755":"## Importing dependencies","8d1c5985":"By looking the plot above, we can observe that seasonal effects are present, the pattern is clear. Moreover, it looks like that Sao Paulo mean temperature increased a little through the given time range.","27ec23fa":"## Data spliting\n\n\nAfter taking a look at the dataset, we see that, for a given year, we have temperature by month and a mean temperature for the whole year. So, we can split it in two datasets:\n\n1. A dataset for temperature records by month for each year;\n\n2. A dataset for mean temperature for each year.\n\nEnough talking, let's do it.","99cc5224":"It looks like that lacking data are identified with `999.90` values. We have to clean it. Let's do a simple workaround by replacing these values.","ea740f28":"## Plotting temperature records","ee5178a8":"Please note that NaN values are just ignored in the plots, so we don't need to handle it **in this case**.","4f052c94":"### Temperature records at a given year\n\nLet's have a look in the temperature for 2015.","cb814a0a":"## Data cleaning","9de6a236":"So it looks like that, as one would expect, a pattern happens according to the season."}}