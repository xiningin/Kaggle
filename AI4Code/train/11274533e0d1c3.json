{"cell_type":{"e8d6d113":"code","41f35a5a":"code","9421170c":"code","7cb710a2":"code","b919f669":"code","197f6c4f":"code","8f1d1b3d":"code","082d124f":"code","ec274f18":"code","5d5143a6":"code","fbb9c8ea":"code","9a010cd7":"code","b4158d3b":"code","41831f78":"code","2cee41b5":"code","bb10f9f5":"code","f0c736c6":"code","54546beb":"code","5a199541":"code","21832ef5":"code","96f7fc84":"code","124c4a89":"code","12368bb5":"code","ad1aa741":"code","518f26d4":"code","06be2ff3":"code","cfec6921":"code","dd5f595b":"code","15aef5b9":"code","cda0f0e2":"code","d6197f4c":"markdown","22f8a153":"markdown","f0ecc991":"markdown","e49036e7":"markdown","e5c3d10a":"markdown","278e249c":"markdown"},"source":{"e8d6d113":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nprint(os.listdir(\"..\/input\"))","41f35a5a":"df_candidatos = pd.read_csv('..\/input\/consulta_cand_2018_DF.csv', encoding='latin1', sep=';')\ndf_votos = pd.read_csv('..\/input\/votacao_candidato_munzona_2018_DF.csv', encoding='latin1', sep=';')\ndf_despesas_contratadas_candidatos = pd.read_csv('..\/input\/despesas_contratadas_candidatos_2018_DF.csv', encoding='latin1', sep=';')\ndf_despesas_pagas_candidatos = pd.read_csv('..\/input\/despesas_pagas_candidatos_2018_DF.csv', encoding='latin1', sep=';')                       ","9421170c":"df_candidatos.info()","7cb710a2":"df_votos.info()","b919f669":"df_despesas_contratadas_candidatos.info()","197f6c4f":"df_despesas_pagas_candidatos.info()","8f1d1b3d":"# Para a an\u00e1lise ser\u00e3o mantidas apenas as colunas consideradas \u00fateis ao estudo. \n\ndf_candidatos.drop(columns=['DT_GERACAO', 'HH_GERACAO', 'CD_TIPO_ELEICAO', 'NM_TIPO_ELEICAO', 'NR_TURNO', 'CD_ELEICAO', \n                        'DS_ELEICAO', 'DT_ELEICAO', 'SG_UE', 'NR_CANDIDATO', 'NM_SOCIAL_CANDIDATO',\n                        'NM_EMAIL', 'SQ_COLIGACAO', \n                        'DS_COMPOSICAO_COLIGACAO', 'SG_UF_NASCIMENTO', 'CD_MUNICIPIO_NASCIMENTO', 'NM_MUNICIPIO_NASCIMENTO', \n                        'DT_NASCIMENTO', 'NR_TITULO_ELEITORAL_CANDIDATO', 'NR_DESPESA_MAX_CAMPANHA', 'ST_DECLARAR_BENS',\n                        'NR_PROTOCOLO_CANDIDATURA', 'NR_PROCESSO', 'ANO_ELEICAO', 'NR_CPF_CANDIDATO'],inplace=True) ","082d124f":"# Na base de dados, candidatos que v\u00e3o para o segundo turno s\u00e3o registrados duas vezes. \u00c9 necess\u00e1rio excluir este registro afim \n# de se evitar duplicidades, inconsist\u00eancias (CD_SIT_TOT_TURNO = 6)\ndf_candidatos = df_candidatos[df_candidatos.CD_SIT_TOT_TURNO != 6]\n\n# Ser\u00e3o mantidos apenas os candidatos com candidatura APTA CD_SITUACAO_CANDIDATURA == 12\ndf_candidatos = df_candidatos[df_candidatos.CD_SITUACAO_CANDIDATURA == 12]\n\n# Setando apenas deputados federais \/ estaduais\n# DISTRITAL CD_CARGO = 8\n# FEDERAL CD_CARGO = 6\n# SENADOR = 5\ndf_candidatos = df_candidatos[(df_candidatos.CD_CARGO == 5) | (df_candidatos.CD_CARGO == 6) | (df_candidatos.CD_CARGO == 8)]","ec274f18":"df_despesas_pagas_candidatos.head()","5d5143a6":"df_despesas_contratadas_candidatos.head()","fbb9c8ea":"# Formata\u00e7\u00e3o dos dados do campo VR_BEM_CANDIDATO. Os dados em formato num\u00e9rico nacional podem apresentar conflitos com o \n# padr\u00e3o americano.\ndf_despesas_pagas_candidatos['VR_PAGTO_DESPESA'] = df_despesas_pagas_candidatos['VR_PAGTO_DESPESA'].str.replace(',','.').astype(float)\ndf_despesas_contratadas_candidatos['VR_DESPESA_CONTRATADA'] = df_despesas_contratadas_candidatos['VR_DESPESA_CONTRATADA'].str.replace(',','.').astype(float)","9a010cd7":"# Somat\u00f3rio das despesas\ndf_despesas_contratadas_candidatos_GROUP = df_despesas_contratadas_candidatos[['SQ_CANDIDATO', 'VR_DESPESA_CONTRATADA']]\ndf_despesas_contratadas_candidatos_GROUP = df_despesas_contratadas_candidatos_GROUP.groupby('SQ_CANDIDATO').sum()","b4158d3b":"# Uni\u00e3o das tabelas\ndf_candidatos = pd.merge(df_candidatos, df_despesas_contratadas_candidatos_GROUP, on='SQ_CANDIDATO', how='left')\ndf_candidatos = pd.merge(df_candidatos, df_votos, on='SQ_CANDIDATO', how='left')","41831f78":"mask = (df_candidatos['DS_ESTADO_CIVIL'] == \"SEPARADO(A) JUDICIALMENTE\") | (df_candidatos['DS_ESTADO_CIVIL'] == \"DIVORCIADO(A)\")\ndf_candidatos['DS_ESTADO_CIVIL'] = df_candidatos['DS_ESTADO_CIVIL'].mask(mask, \"SEPARADO\")\n\nmask = (df_candidatos['DS_GRAU_INSTRUCAO'] == \"ENSINO FUNDAMENTAL INCOMPLETO\") | (df_candidatos['DS_GRAU_INSTRUCAO'] == \"ENSINO FUNDAMENTAL COMPLETO\")| (df_candidatos['DS_GRAU_INSTRUCAO'] == \"ENSINO M\u00c9DIO INCOMPLETO\")\ndf_candidatos['DS_GRAU_INSTRUCAO'] = df_candidatos['DS_GRAU_INSTRUCAO'].mask(mask, \"ENSINO FUNDAMENTAL\")\n\nmask = (df_candidatos['DS_GRAU_INSTRUCAO'] == \"ENSINO M\u00c9DIO COMPLETO\") | (df_candidatos['DS_GRAU_INSTRUCAO'] == \"SUPERIOR INCOMPLETO\")\ndf_candidatos['DS_GRAU_INSTRUCAO'] = df_candidatos['DS_GRAU_INSTRUCAO'].mask(mask, \"ENSINO M\u00c9DIO\")","2cee41b5":"df_candidatos.head()","bb10f9f5":"# Distribui\u00e7\u00e3o dos candidatos por faixa et\u00e1ria\nplt.figure(figsize=(15,5))\n#sns.distplot(cand[cand['DS_CARGO'] == 'DEPUTADO ESTADUAL']['NR_IDADE_DATA_POSSE'].dropna(), color='blue', label='DEPUTADO ESTADUAL')\n#sns.distplot(cand[cand['DS_CARGO'] == 'DEPUTADO FEDERAL']['NR_IDADE_DATA_POSSE'].dropna(), color='green', label='DEPUTADO FEDERAL')\n#sns.distplot(cand[cand['DS_CARGO'] == 'DEPUTADO DISTRITAL']['NR_IDADE_DATA_POSSE'].dropna(), color='red', label='DEPUTADO DISTRITAL')\nsns.distplot(df_candidatos['NR_IDADE_DATA_POSSE'])\nplt.title(\"Distribui\u00e7\u00e3o dos candidatos por faixa et\u00e1ria\",color='black')\nplt.grid(True,color=\"grey\",alpha=.3)\n#plt.legend(title=\"Cargo\")\nplt.xlabel('Idade na data da posse')\nplt.ylabel('Distribui\u00e7\u00e3o')\nplt.show()","f0c736c6":"# Distribui\u00e7\u00e3o dos candidatos por g\u00eanero\nplt.figure(figsize=(15,8))\nsns.countplot(x='DS_CARGO', hue='DS_GENERO', data=df_candidatos)\nplt.grid(True,color=\"grey\",alpha=.3)\nplt.title(\"Quantidade de candidatos por g\u00eanero\",color='black')\nplt.legend(title=\"Sexo\")\nplt.xlabel('Cargo')\nplt.ylabel(\"Quantidade de candidatos\")\nplt.show()\n\n","54546beb":"# Distribui\u00e7\u00e3o dos candidatos por ra\u00e7a\nplt.figure(figsize=(10,5))\nsns.countplot(x='DS_COR_RACA', data=df_candidatos)\nplt.title(\"Quantidade de candidatos por ra\u00e7a\",color='black')\nplt.grid(True,color=\"grey\",alpha=.3)\nplt.xlabel('Ra\u00e7a')\nplt.ylabel(\"Quantidade\")\nplt.show()\n\n","5a199541":"# Eleitos por partido\n# Cria\u00e7\u00e3o da vari\u00e1vel TARGET para an\u00e1lise de dados. CD_SIT_TOT_TURNO = 1 ELEITO, 2 ELEITO POR QP e 3 ELEITO POR M\u00c9DIA\n\nELEITO = []\n\nfor i in df_candidatos['CD_SIT_TOT_TURNO']:\n    if i == 1:\n        ELEITO.append('sim')\n    elif i == 2:\n        ELEITO.append('sim')\n    elif i == 3:\n        ELEITO.append('sim')\n    else:\n        ELEITO.append('nao')\n        \ndf_candidatos['ELEITO'] = ELEITO\n\n#df_eleito = df_candidatos[(df_candidatos.DS_SIT_TOT_TURNO == 'ELEITO POR M\u00c9DIA')\n#                         |(df_candidatos.DS_SIT_TOT_TURNO == 'ELEITO')\n#                         |(df_candidatos.DS_SIT_TOT_TURNO == 'ELEITO POR QP')]\n\n","21832ef5":"df_eleitos = df_candidatos[df_candidatos['ELEITO'] == 'sim']\ndf_eleitos.info()","96f7fc84":"plt.figure(figsize=(15,18))\nsns.countplot(y='NM_PARTIDO', data=df_eleitos, order = df_eleitos['NM_PARTIDO'].value_counts().index)\nplt.title(\"Eleitos por partido\",color='black')\nplt.grid(True,color=\"grey\",alpha=.3)\nplt.xlabel('Quantidade de candidatos eleitos')\nplt.ylabel(\"Partido\")\nplt.show()","124c4a89":"# N\u00famero de votos em rela\u00e7\u00e3o \u00e0 despesa\nplt.figure(figsize=(15,5))\nsns.scatterplot(x=df_candidatos['VR_DESPESA_CONTRATADA']\/10, y=df_candidatos['QT_VOTOS_NOMINAIS'], color=\"magenta\")\nplt.grid(True,color=\"grey\",alpha=.3)\nplt.title(\"Distribui\u00e7\u00e3o dos votos aos gastos em campanha\",color='black')\nplt.xlabel('Valor das despesas em Reais (R$)')\nplt.ylabel(\"Quantidade de votos\")\nplt.show()","12368bb5":"# Custo por voto dos candidatos eleitos\n\neleitos = df_candidatos[df_candidatos['ELEITO'] == 'sim']\neleitos = eleitos[['VR_DESPESA_CONTRATADA', 'QT_VOTOS_NOMINAIS', 'DS_CARGO']]\n\neleitos['CUSTO_VOTO'] = eleitos['VR_DESPESA_CONTRATADA']\/eleitos['QT_VOTOS_NOMINAIS']\n\neleitos = eleitos.groupby(['DS_CARGO']).sum().reset_index()","ad1aa741":"eleitos.head()","518f26d4":"plt.figure(figsize=(15,5))\nsns.barplot(x='DS_CARGO', y='CUSTO_VOTO', data=eleitos, ci=None)\nplt.xlabel('Cargo')\nplt.ylabel(\"Custo por voto em Reias (R$)\")\nplt.title(\"Custo por voto para os eleitos\")\nplt.axhline(y=eleitos['CUSTO_VOTO'].mean())","06be2ff3":"# N\u00famero de votos em rela\u00e7\u00e3o \u00e0 despesa Deputado Distrital\ndf_deputados_distritais = df_candidatos[df_candidatos['CD_CARGO'] == 8]\nplt.figure(figsize=(15,5))\nsns.scatterplot(x=df_deputados_distritais['VR_DESPESA_CONTRATADA']\/10, y=df_deputados_distritais['QT_VOTOS_NOMINAIS'], color=\"magenta\")\nplt.grid(True, color=\"grey\",alpha=.3)\nplt.title(\"Distribui\u00e7\u00e3o dos votos aos gastos em campanha\",color='black')\nplt.xlabel('Valor das despesas em Reais (R$)')\nplt.ylabel(\"Quantidade de votos\")\nplt.show()","cfec6921":"df_deputados_distritais.drop(columns=['SQ_CANDIDATO', 'CD_SITUACAO_CANDIDATURA', 'CD_NACIONALIDADE', 'CD_DETALHE_SITUACAO_CAND', 'CD_CARGO'],inplace=True) \n\nf,ax = plt.subplots(figsize=(15,6))\nsns.heatmap(df_deputados_distritais.corr(), annot=True, fmt='.2f', ax=ax, linecolor='black', lw=4)","dd5f595b":"# Distribui\u00e7\u00e3o dos candidatos por bens declarados (boxplot)\ndf_deputados = df_candidatos[(df_candidatos.CD_CARGO == 6) | (df_candidatos.CD_CARGO == 8)]\nplt.figure(figsize=(15,10))\nsns.boxplot(x='DS_CARGO', y='VR_DESPESA_CONTRATADA', data=df_deputados)\nplt.title(\"Candidatos por faixa et\u00e1ria\",color='black')\nplt.ylabel(\"Idade do candidato\")\nplt.xlabel(\"Cargo\")\nplt.show()","15aef5b9":"# Top 10 candidatos que mais gastaram\ndf_candidatos[['NM_CANDIDATO','DS_CARGO','VR_DESPESA_CONTRATADA']].sort_values(by=['VR_DESPESA_CONTRATADA'], ascending=False).head(10)","cda0f0e2":"# Exporta a sa\u00edda\ndf_candidatos.to_csv('candidatos_DF.csv', sep=';', encoding='latin1', index=False)\n\n# GERA LINK PARA BAIXAR O CSV SEM PRECISAR COMPILAR\nfrom IPython.display import HTML\ndef create_download_link(title = \"Download CSV file\", filename = \"candidatos_DF.csv\"):  \n    html = '<a href={filename}>{title}<\/a>'\n    html = html.format(title=title,filename=filename)\n    return HTML(html)\n\n# create a link to download the dataframe which was saved with .to_csv method\ncreate_download_link(filename='candidatos_DF.csv')","d6197f4c":"## An\u00e1lise\n\nAnalisando o gr\u00e1fico contido na figura XX pode-se identificar o custo por voto dos candidatos eleitos, onde pegou-se o n\u00famero total de votos recebido pelo candidato dividido pelo custo total declarado da campanha eleitoral, agrupados por cargo. \nObserva-se que o custo por voto para o cargo de Senador foi inferior aos demais, possivelmente explicado por haver menos senadores concorrendo, eles recebem uma quantidade nominal de votos maior, diminuindo este valor final. \n","22f8a153":"## An\u00e1lise\n\n\nNa figura XXXXX \u00e9 mostrado a quantidade dos candidatos por ra\u00e7a, e mostra que a ra\u00e7a Parda \u00e9 a mais numerosa, seguido da Branca e Preta. ","f0ecc991":"## An\u00e1lise\n\nObservando a figura XXXXX podemos identificar a distribui\u00e7\u00e3o de candidatos por idade. Pode-se concluir que h\u00e1 uma concentra\u00e7\u00e3o de idade dos candidatos com maior distribui\u00e7\u00e3o entre aproximadamente 42 e 55 anos.","e49036e7":"### An\u00e1lise\n\n\nPode-se perceber analisando a figura XXXXXX onde \u00e9 plotado a distribuui\u00e7\u00e3o de votos por despesa com a campanha do cargo de Deputado Distrital, que h\u00e1 uma correla\u00e7\u00e3o pequena demonstrando ind\u00edcios que os gastos com a campanha influenciam no total de voto recebidos\n","e5c3d10a":"## An\u00e1lise\n\nPodemos identificar analisando a figura XXXX a quantidade de candidatos por sexo agrupado por cargo disputado.\nA maioria em todos os cargos \u00e9 de homens, inclusive mantendo aproximadamente a mesma propor\u00e7\u00e3o em todos os cargos disputados.","278e249c":"## Analise\n\nObserva-se na figura XXXXX a quantidade eleita de candidatos por partido nos cargos de Deputado Federal, Deputado Distrital e Senador. Os partidos que mais elegeram cndidatos foram: Partido Republicano Brasileiro, Partido Socialista Brasileiro e Partido dos Trabalhadores, com 3 eleitos cada."}}