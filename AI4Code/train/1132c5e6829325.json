{"cell_type":{"c82ec9f3":"code","d0ff0c1a":"code","ea237ed0":"code","fdb965de":"code","abbba4f4":"code","0c75158c":"code","39a4681a":"code","1152fbf8":"code","5496c45e":"code","2e3fe19b":"code","94a9c50e":"code","54f7d775":"markdown"},"source":{"c82ec9f3":"import pandas as pd\nimport numpy as np\nimport plotly.express as px","d0ff0c1a":"race_data = pd.read_csv('\/kaggle\/input\/covid-tracking-project-racial-data-tracker\/Race Data Entry - CRDT.csv').fillna('0')\ntodays_date = race_data['Date'].max() # Find the most recent date in the dataset\nrace_data = race_data[race_data.Date.isin([todays_date])] # Limit to latest data only\n\nrace_data_simple = race_data[['Deaths_Total', 'Deaths_White',\n       'Deaths_Black', 'Deaths_LatinX', 'Deaths_Asian', 'Deaths_AIAN',\n       'Deaths_NHPI', 'Deaths_Multiracial', 'Deaths_Other',\n       'Deaths_Unknown', 'Deaths_Ethnicity_Hispanic',\n       'Deaths_Ethnicity_NonHispanic', 'Deaths_Ethnicity_Unknown']].astype(float)\nrace_data_simple = race_data_simple.div(race_data_simple.Deaths_Total,axis=0)*100 # Calculate Percent of Total\nrace_data_simple = race_data_simple.fillna('0')\nrace_data_simple['State']= race_data['State']\nrace_data = race_data_simple\n#race_data.to_csv('\/kaggle\/working\/black_covid_data.csv',index=False)","ea237ed0":"fig = px.choropleth(race_data, \n                    locations=\"State\", \n                    color=\"Deaths_Black\", \n                    locationmode = 'USA-states', \n                    hover_name=\"Deaths_Black\",\n                    range_color=[10,70],\n                    scope=\"usa\",\n                    title='Percentage of Total COVID-19 Deaths by Black Communities')\nfig.show()","fdb965de":"fig = px.bar(race_data.sort_values('State', ascending=True), \n             x=\"State\", \n             y=\"Deaths_Black\",\n             title='Percentage of Total COVID-19 Deaths by Black Communities (alphabetical)')\nfig.show()\n","abbba4f4":"df = pd.read_csv('\/kaggle\/input\/percent-black-population-for-every-state-in-usa\/percent_black_over_time.csv')\ndf = df[1:]\ncols_to_check = ['1790', '1800', '1810', '1820', '1830', '1840',\n       '1850', '1860', '1870', '1880', '1890', '1900', '1910', '1920',\n       '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000',\n       '2010', '2018']\ndf[cols_to_check] = df[cols_to_check].replace({'%':''}, regex=True)\ndf = df.transpose()\nnew_header = df.iloc[0]\ndf = df[1:].fillna(0)\ndf.columns = new_header\ndf = df.astype(float)\ndf = df[-1:]\ndf = df.transpose()\ndf.columns = ['Percent Black']\ndf['State\/Territory'] = df.index\ndf.to_csv('\/kaggle\/working\/percent_black_state_by_state.csv',index=False) # save to notebook output","0c75158c":"plot = px.bar(df, x=df.index, y=\"Percent Black\", hover_name=\"Percent Black\",title='Percentage of Population in USA that Identifies as Black (in 2018)') \nplot","39a4681a":"df = pd.read_csv('\/kaggle\/input\/percent-black-population-for-every-state-in-usa\/percent_black_in_2018.csv')\nfig = px.choropleth(df, \n                    locations=\"State Code\", \n                    color=\"Percent Black\", \n                    locationmode = 'USA-states', \n                    hover_name=\"State\",\n                    range_color=[0,30],scope=\"usa\",\n                    title='Percent of Population that Identifies as Black (2018)')\nfig.show()","1152fbf8":"race_data['Deaths_Black'] = race_data['Deaths_Black'].astype(float)\nfig = px.bar(race_data.sort_values('Deaths_Black',ascending=False), \n             x=\"State\", \n             y=\"Deaths_Black\",\n             title='Percentage of Total COVID-19 Deaths by Black Communities (sorted)')\nfig.show()\n","5496c45e":"race_data['Percent_Black'] = df['Percent Black']\nrace_data_simple = race_data[['Deaths_Black','Percent_Black']].astype(float)\nrelative_to_population = race_data_simple['Deaths_Black'].div(race_data_simple.Percent_Black,axis=0) # Calculate Percent of Total\nrelative_to_population = relative_to_population.fillna('0')\nrace_data['Black Deaths Relative to Population'] = relative_to_population\nrace_data['State Code'] = df['State Code']\nrace_data['State'] = df['State']\nrace_data.to_csv('\/kaggle\/working\/covid_deaths_by_race.csv',index=False) # save to notebook output","2e3fe19b":"race_data['Black Deaths Relative to Population'] = race_data['Black Deaths Relative to Population'].astype(float)\nfig = px.bar(race_data.sort_values('Black Deaths Relative to Population',ascending=False), \n             x=\"State\", \n             y=\"Black Deaths Relative to Population\",\n             title='Percent of COVID-19 Deaths vs Percent of Population (sorted)')\nfig.show()\n","94a9c50e":"fig = px.choropleth(race_data, \n                    locations=\"State Code\", \n                    color=\"Black Deaths Relative to Population\", \n                    locationmode = 'USA-states', \n                    hover_name=\"State\",\n                    range_color=[0,3],scope=\"usa\",\n                    title='Percent of COVID-19 Deaths vs Percent of Population')\nfig.show()","54f7d775":"# COVID-19 Deaths in African-American Communities\n\nUsing data from the [COVID Tracking Project](https:\/\/covidtracking.com\/about-data).\n\nTo see plots for COVID-19 infections instead of plots for COVID-19 fatalities, you can refer to this [companion notebook](https:\/\/www.kaggle.com\/paultimothymooney\/explore-covid-19-deaths-in-african-american-commun). "}}