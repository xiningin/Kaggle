{"cell_type":{"a76337c6":"code","ac8a9212":"code","8a8b2c22":"code","5fcaeec9":"code","8d8ee207":"code","d8f6f6c8":"code","a949daac":"code","9f680dd6":"code","8995bc11":"code","d6da0872":"code","fe64917c":"code","1e12608f":"code","ba95f760":"code","5f2e1cbf":"code","eaacba0e":"code","08ec2917":"code","138c17b6":"code","c3a1f672":"code","39cbe2b9":"code","45869cee":"code","34f1cc8a":"code","98e5a9c1":"code","2ec6497b":"markdown","9785700d":"markdown","b09a4ee3":"markdown","0c52b64c":"markdown","212ac243":"markdown","c8ccf979":"markdown","acf1fde6":"markdown","a26c8e31":"markdown","d076d69f":"markdown","9410c905":"markdown","aaef2678":"markdown","710cef5f":"markdown","d151629c":"markdown","836bd6c4":"markdown","ffac6a3a":"markdown","c71c549d":"markdown","05ac70da":"markdown","868749e3":"markdown","7c280832":"markdown","847f6e17":"markdown","1bf4e059":"markdown","6d2e46d2":"markdown","2e78047f":"markdown","18d9048a":"markdown","47ddfa3d":"markdown","3cf1686a":"markdown","4e7fcffe":"markdown","7473264f":"markdown","f4500d2e":"markdown","bc3a9916":"markdown","9201e6c1":"markdown","67d06f64":"markdown","9f02af20":"markdown","b18912df":"markdown","00073959":"markdown","598fb98e":"markdown","eea59828":"markdown","393e43d4":"markdown"},"source":{"a76337c6":"import os\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n#for displaying images\nfrom IPython.display import Image","ac8a9212":"# Table printing large\nplt.rcParams['figure.figsize'] = (15, 7)\npd.set_option(\"display.max_columns\", 400)\npd.options.display.max_colwidth = 250\npd.set_option(\"display.max_rows\", 100)\n# High defition plots\n%config InlineBackend.figure_format = 'retina'\nsns.set()","8a8b2c22":"df_train = pd.read_csv('..\/input\/career-con-2019\/X_train.csv')\ny_train = pd.read_csv('..\/input\/career-con-2019\/y_train.csv')\n\nprint('X_train.csv shape is {}'.format(df_train.shape))\nprint('y_train.csv shape is {}'.format(y_train.shape))","5fcaeec9":"Image(\"..\/input\/careercon2019\/robot.JPG\",width=400)","8d8ee207":"Image(\"..\/input\/careercon2019\/IMU.png\",width=400)","d8f6f6c8":"Image(\"..\/input\/careercon2019\/vector.jpg\",width=400)","a949daac":"df_train.head()","9f680dd6":"df_train.shape[0]\/y_train.shape[0]","8995bc11":"y_train.shape[0]","d6da0872":"y_train.head(5)","fe64917c":"print('Number of classes: {}'.format(y_train.surface.nunique()))\nprint('Number of group_id: {}'.format(y_train.group_id.nunique()))","1e12608f":"sns.catplot(x='surface',data=y_train,kind='count')\nplt.xticks(rotation=90)\nplt.show()\nprint(y_train.surface.value_counts(normalize=True))","ba95f760":"sns.countplot(x='group_id',data=y_train)\nplt.xticks(rotation=90)\nplt.show()","5f2e1cbf":"y_train.groupby('group_id').surface.nunique().max()","eaacba0e":"#Function to calculate the norm of a three element vector\ndef vector_norm(x,y,z,df):\n    return np.sqrt(df[x]**2 + df[y]**2 + df[z]**2)","08ec2917":"df_train['angular_velocity_norm'] =vector_norm('angular_velocity_X',\n                                                'angular_velocity_Y',\n                                                'angular_velocity_Z',df_train)\n\ndf_train['linear_acceleration_norm'] =vector_norm('linear_acceleration_X',\n                                                'linear_acceleration_Y',\n                                                'linear_acceleration_Z',df_train)","138c17b6":"new_df = df_train.groupby('series_id')['angular_velocity_norm','linear_acceleration_norm'].mean()\nnew_df = pd.DataFrame(new_df).reset_index()\nnew_df.columns = ['serie_id','avg_velocity','avg_acceleration']\nnew_df['surface'] = y_train.surface\nnew_df['group_id'] = y_train.group_id","c3a1f672":"new_df.head(3)","39cbe2b9":"sns.boxplot(x='surface',y='avg_velocity',data=new_df)\nplt.title('avg_velocity vs surface')","45869cee":"surfaces = new_df.surface.unique()\n\nfor surface in surfaces:\n    sns.swarmplot(x=new_df[new_df.surface == surface]['group_id'],\n                  y=new_df[new_df.surface == surface]['avg_velocity'])\n    plt.title('Surface = {}'.format(surface))\n    plt.show()","34f1cc8a":"sns.boxplot(x='surface',y='avg_acceleration',data=new_df)\nplt.title('Avg_acceleration vs Surface')","98e5a9c1":"for surface in surfaces:\n    sns.swarmplot(x=new_df[new_df.surface == surface]['group_id'],\n                  y=new_df[new_df.surface == surface]['avg_acceleration'])\n    plt.title('Surface = {}'.format(surface))\n    plt.show()","2ec6497b":"## 5. Next steps","9785700d":"## Table of contents\n\n1. Libraries and data loading\n2. Understanding the problem\n    - 2.1. IMU sensor and physics\n    - 2.2. Sneak Peek\n3. Univariate Distribution\n4. Bivariate Distribution\n    - 4.1. Average velocity vs target\n    - 4.2. Average acceleration vs target\n5. Next steps\n","b09a4ee3":"We want to check is  average robot angular velocity or linear acceleration depends on the surface or the recording session.<br><br>\nFirst, we have to calculate the norm of velocity and acceleration vector. The norm is the length of the vector.","0c52b64c":"## 1. Libraries and data loading","212ac243":"### 2.2. Sneak Peek","c8ccf979":"Let\u00b4s start with the target variable, **surface**:","acf1fde6":"Let\u00b4s go with average acceleration.","a26c8e31":"We need to create a new dataframe with average velocity and acceleration per recording.","d076d69f":"### 4.1 Average Velocity","9410c905":"It looks there is a slight difference. It is logic as a robot is thought to reach higher speed on wood than on carpet.","aaef2678":"### 4.2. Average Acceleration","710cef5f":"## 4.Bivariate analysis","d151629c":"**Description**: A kernel for understanding the problem and getting some insights about the data.","836bd6c4":"Useful libraries","ffac6a3a":"### 2.1. IMU sensors and physics","c71c549d":"It look some surfaces are a little dependent on the recording session like wood and hard_tiles_large_space. ","05ac70da":"How many recordings do we have?","868749e3":"-Every serie has been recorded in a particular recording session indicated by group_id feature. There are 73 different recording sessions.<br>\n\n-We have nine different surfaces.","7c280832":"We can appreciate the same for average acceleration.","847f6e17":"Hope it was useful. Thanks for reading ;)","1bf4e059":"Let\u00b4s see how the training looks like:","6d2e46d2":"We have been given sensor data from robots driving on different surfaces. I imagine these robots similar to this:","2e78047f":"Robots have a sensor called <a href=\"http:\/\/www.starlino.com\/imu_guide.html\" target=\"_blank\">IMU<\/a> (Inertial Measurement Units) which has two parts: an **accelerometer** and a **gyroscope**:\n\n-**Accelerometers** detects inertial forces and returns acceleration of the robot.<br>\n-**Gyroscopes** measures robot angles rotation and the rate these angles changes.\n\nAn IMU sensor is like this:","18d9048a":"Let\u00b4s check **group_id** feature. ","47ddfa3d":"- Extract features for each recording.\n- Check if train and test come from same distribution.\n- Define a validation strategy (group_id may work here).\n- Train a GBDT model.\n- Try an LSTM model with the raw records.","3cf1686a":"We have 3810 recordings","4e7fcffe":"Let\u00b4s analyze if there are differences between average velocity depending on the surface and on the recording session(group_id","7473264f":"No, in every recording session only was tried a surface type.","f4500d2e":"Three surfaces with differences: wood, carpet and hard_tiles_large_space.","bc3a9916":"## 3. Univariate Distribution","9201e6c1":"Have different surfaces been measured in the same recording session?","67d06f64":"For every row we have 13 features:\n- **row_id**: An identifier for every measurement. \n- **series_id**: An identifier for every recording.\n- **measurement_number**: The position of the measurement in the recording.\n\nBut only last 10 are really useful:\n- **Orientation**: A  <a href=\"https:\/\/en.wikipedia.org\/wiki\/Conversion_between_quaternions_and_Euler_angles\" target=\"_blank\">quaternion<\/a> indicating the angle orientation of the robot. A quaternion, as a vector, is another way of representing a magnitude.\n- **Angular velocity**: A 3-element vector indicating the coordinates of angular velocity vector (Vx,Vy,Vz)\n- **Linear acceleration**: A 3-element vector indicating the coordinates of linear acceleration vector (ax,ay,az)\n\nEvery 128 rows correspond to a unique recording of the robot.","9f02af20":"Let\u00b4s remember some elementary **physics**. \n\nIn physics most magnitudes are not given by a number but by a vector. A vector is an oriented segment in space which has coordinates, something like this:","b18912df":"Configuration visualization","00073959":"# CarrerCon 2019 - Help Navigate Robots","598fb98e":"Vectors will be useful to understand our data.","eea59828":"train and test set data","393e43d4":"## 2. Understanding the problem"}}