{"cell_type":{"6a2a2119":"code","5d2d57ac":"code","d81ae579":"code","f172366a":"code","e56a073a":"code","2062ace3":"code","7c5b0733":"code","bdbd2dab":"code","de271076":"code","3c44c2f5":"code","f7b16a94":"code","ed72cc4d":"code","e42366b5":"markdown","fd69cfcb":"markdown","b375975a":"markdown","84860feb":"markdown","4c7a248c":"markdown","db093d7a":"markdown","da5d68eb":"markdown"},"source":{"6a2a2119":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns \nfrom mpl_toolkits.basemap import Basemap\n%matplotlib inline\n#add\nimport folium \nfrom folium import plugins\nimport json\n\n\nimport os\nfor dirname, _, filenames in os.walk(\"\/kaggle\/input\"):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","5d2d57ac":"dataset_cases_gps = pd.read_csv('\/kaggle\/input\/covid19-dados-brasil\/cases-gps.csv', encoding='utf-8')\ncasos_cidades = dataset_cases_gps[dataset_cases_gps['type'] == '1']\ncasos_cidades[casos_cidades.name.str.contains('\/PI')]","d81ae579":"# Set up plot\ndf_casos_mapa = casos_cidades\nplt.figure(1, figsize=(24,12))\n\n# Mercator of World\nmapa_01 = Basemap(projection='merc',\n             llcrnrlat=-35,\n             urcrnrlat=7,\n             llcrnrlon=-77,\n             urcrnrlon=-32,\n                              lat_ts=0,\n             resolution='c')\n\nmapa_01.fillcontinents(color='#f8f8f8',lake_color='#f8f8f8') # dark grey land, black lakes\nmapa_01.drawmapboundary(fill_color='aqua')                # black background\nmapa_01.drawcountries(linewidth=0.5, color=\"b\")              # thin white line for country borders\nmapa_01.drawstates(linewidth=0.3, color=\"b\")\n# Plot the data\nmapa_01_xy = mapa_01(df_casos_mapa[\"lon\"].tolist(), df_casos_mapa[\"lat\"].tolist())\nmapa_01.scatter(mapa_01_xy[0], mapa_01_xy[1], s=3, c=\"#1292db\", lw=3, alpha=1, zorder=5)\n\nplt.title(\"Pontos de incid\u00eancia de casos confirmados\")\nplt.show()","f172366a":"#coordenadas vis\u00e3o Brasil\nBrasil_lat = -14.235\nBrasil_lon = -51.9253\nmapa_Brasil = folium.Map(location=[Brasil_lat, Brasil_lon], zoom_start=4.5,tiles='cartodbpositron')\n#mapa_Brasil = folium.Map(location=[br_lat, br_lon], zoom_start=4)\n\n#Carrega a malha geogr\u00e1fica do Brasil\ngeo_json_BR = json.load(open('\/kaggle\/input\/covid19dados-webalysson\/malha_geo_br.json'))\nfolium.GeoJson(geo_json_BR).add_to(mapa_Brasil)\n\n\n#Marcadores\nfor index, registro in (casos_cidades.iterrows()):\n    folium.Marker(\n                 location=[registro['lat'], registro['lon']], \n                 popup = (registro['name']+'<br\/> Confirmados: '+str(registro['total'])), \n                 tooltip = registro['name'],\n                 icon=folium.Icon(icon='info-sign')\n                 ).add_to(mapa_Brasil)\n\nmapa_Brasil","e56a073a":"#coordenadas vis\u00e3o Brasil\nBrasil_lat = -14.235\nBrasil_lon = -39.9253\nmapa_NE = folium.Map(location=[Brasil_lat, Brasil_lon], zoom_start=5,tiles='cartodbpositron')\n#mapa_Brasil = folium.Map(location=[br_lat, br_lon], zoom_start=4)\n\n#Carrega a malha geogr\u00e1fica do Brasil\ngeo_json_NE = json.load(open('\/kaggle\/input\/covid19dados-webalysson\/malha_geo_NE.json'))\nfolium.GeoJson(geo_json_BR).add_to(mapa_NE)\n\n#Filtra cidades do NE\nUFs_NE = ['PI','MA','CE','PE','BA','SE','AL','RN','PB']\nUFs_NE = map(( lambda x: '\/' + x), UFs_NE) #add '\/' antes da sigla\ncasos_cidades_NE = casos_cidades[casos_cidades.name.str.contains('|'.join(UFs_NE))] #procura por cidades no NE\n\n#Marcadores\nfor index, registro in (casos_cidades_NE.iterrows()):\n    folium.Marker(\n                 location=[registro['lat'], registro['lon']], \n                 popup = (registro['name']+'<br\/> Confirmados: '+str(registro['total'])), \n                 tooltip = registro['name']\n                 ).add_to(mapa_NE)\n\nmapa_NE","2062ace3":"#coordenadas vis\u00e3o PI\nBrasil_lat = -6.00 \nBrasil_lon = -43.68\nmapa_PI = folium.Map(location=[Brasil_lat, Brasil_lon], zoom_start=7)\n#mapa_Brasil = folium.Map(location=[br_lat, br_lon], zoom_start=4)\n\n#Carrega a malha geogr\u00e1fica do PI\ngeo_json_PI = json.load(open('\/kaggle\/input\/covid19dados-webalysson\/malha_geo_PI_Municipios.json'))\nstyle_function = lambda feature: {\n                                'fillColor': 'green',\n                                'color': 'darkred',\n                                'weight': 0.1,\n                               }\nfolium.GeoJson(geo_json_PI, \n               #style_function = style_function,\n               name='Munic\u00edpios'\n              ).add_to(mapa_PI)\n\n\n#Filtra cidades do PI\ncasos_cidades_PI = casos_cidades[casos_cidades.name.str.contains('PI')]\n#casos_cidades_PI = casos_cidades.query(\"name.str.contains('PI')\", engine='python')\n\n#Marcadores\nfor index, registro in (casos_cidades_PI.iterrows()):\n    folium.Marker(\n                 location=[registro['lat'], registro['lon']], \n                 popup = (registro['name']+'<br\/> Confirmados: '+str(registro['total'])), \n                 tooltip = registro['name']\n                 ).add_to(mapa_PI)\nmapa_PI","7c5b0733":"#Carrega o Dataset das Cidades com casos registrados e IBGEid das mesmas\ncasos_cidades_id = pd.read_csv('\/kaggle\/input\/covid19-dados-brasil\/cases-brazil-cities.csv')\n#Filtra as Cidades do Estado do PI\ncasos_cidades_PI_id = casos_cidades_id[casos_cidades_id.city.str.contains('\/PI')] \n#Renomeia a coluna ibgeID para codarea(atributo para unir com o Json)\ncasos_cidades_PI_area = casos_cidades_PI_id.rename(columns={'ibgeID': 'codarea'})\n#exclui as colunas desceness\u00e1rias\ncasos_cidades_PI_area.drop(['country', 'state', 'city'], axis=1, inplace=True)\n#exibe o dataset\ncasos_cidades_PI_area","bdbd2dab":"#Carrega o Dataset com todas as Cidades do PI e seus respectivos atributos 'codarea' do IBGE\ncidades_PI_IBGE_cod = pd.read_csv('\/kaggle\/input\/covid19dados-webalysson\/cidades_PI_IBGE_Cod.csv')\n#Renomeia a coluna ibgeID para codarea(atributo para unir com o Json)\ncidades_PI_IBGE_cod.rename(columns={'Codigo': 'codarea'}, inplace=True)\ncidades_PI_IBGE_cod.head()","de271076":"#Jun\u00e7\u00e3o dos Datasets\ncasos_cidades_PI_com_area = casos_cidades_PI_area.merge(cidades_PI_IBGE_cod, on='codarea', how='right')\n#Substitue valores nulos por 0\ncasos_cidades_PI_com_area.fillna(0, inplace=True)\n#converte a coluna codarea para string\ncasos_cidades_PI_com_area.codarea = casos_cidades_PI_com_area.codarea.astype(str)\n#converte a coluna totalCases para int\ncasos_cidades_PI_com_area.totalCases = casos_cidades_PI_com_area.totalCases.astype('int64')\n#exibe o Dataset com todas as cidades do PI e seus respectivos c\u00f3digos do IBGE(codarea)\ncasos_cidades_PI_com_area","3c44c2f5":"#coordenadas vis\u00e3o PI\nBrasil_lat = -6.00 \nBrasil_lon = -43.68\nmapa_PI_Municipios_Escala = folium.Map(location=[Brasil_lat, Brasil_lon], zoom_start=7)\n\n#mapa coropl\u00e9tico do Estado do PI\nfolium.Choropleth(\n    geo_data=geo_json_PI,\n    name='Piau\u00ed',\n    data=casos_cidades_PI_com_area,\n    columns=['codarea', 'totalCases'],\n    key_on='feature.properties.codarea',\n    fill_color='OrRd',\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    legend_name='Casos no Piau\u00ed'\n).add_to(mapa_PI_Municipios_Escala)\n    \nfolium.LayerControl(collapsed=False).add_to(mapa_PI_Municipios_Escala)\n\n#mapa_PI_Municipios_Escala.save('Mapa_PI.html')\nmapa_PI_Municipios_Escala","f7b16a94":"#Para destacar municipios com ocorrencia sem considerar a escala de cores\ncasos_cidades_PI_com_area.loc[casos_cidades_PI_com_area.totalCases>0, 'totalCases'] = casos_cidades_PI_com_area.totalCases.max()\ncasos_cidades_PI_com_area","ed72cc4d":"#coordenadas vis\u00e3o PI\nBrasil_lat = -6.00 \nBrasil_lon = -43.68\nmapa_PI_Municipios = folium.Map(location=[Brasil_lat, Brasil_lon], zoom_start=7)\n\n#mapa coropl\u00e9tico\nfolium.Choropleth(\n    geo_data=geo_json_PI,\n    name='Piau\u00ed',\n    data=casos_cidades_PI_com_area,\n    columns=['codarea', 'totalCases'],\n    key_on='feature.properties.codarea',\n    fill_color='OrRd',\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    legend_name='Casos no Piau\u00ed',\n).add_to(mapa_PI_Municipios)\n    \n#folium.LayerControl(collapsed=False).add_to(mapa_PI_Municipios)\n\n#mapa_PI_Municipios.save('Mapa_PI.html')\nmapa_PI_Municipios","e42366b5":"![](https:\/\/encurtador.com.br\/krKL7)\n##  COVID-19 BRASIL\n###  PROCESSAMENTO DE DATASETS PARA VISUALIZA\u00c7\u00c3O DOS LOCAIS DE OCORR\u00caNCIA NO BRASIL, NORDESTE E PIAU\u00cd","fd69cfcb":"* **PIAU\u00cd: REGISTRO DE CASOS POR MUNIC\u00cdPIOS**","b375975a":"* **REGI\u00c3O NORDESTE**","84860feb":"* **BRASIL: TODAS AS **CIDADES COM CASOS REGISTRADOS**","4c7a248c":"* **MUNIC\u00cdPIOS COM OCORR\u00caNCIA (SEM CONSIDERAR A ESCALA)** ","db093d7a":"*  **PONTOS DE INCID\u00caNCIA DOS CASOS CONFIRMADOS NO BRASIL**","da5d68eb":"* **ESTADO DO PIAU\u00cd**"}}