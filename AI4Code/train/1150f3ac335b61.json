{"cell_type":{"1a7889ce":"code","2f999cd6":"code","9719f240":"code","42ad7fc1":"code","5b7013bb":"code","54446c36":"code","6418c923":"code","98c1042d":"code","cd1275a5":"code","a63c203e":"code","091e3599":"code","6f6554e5":"code","22f5c5a8":"code","332fce74":"code","9c8b3da4":"code","b8d63786":"code","7b0764a5":"code","e7e67988":"code","809e642f":"code","b2a0ecdd":"code","3e1dcfef":"code","a0c2daed":"code","5cf14865":"code","efe38991":"code","28bcf8da":"code","a34a4287":"code","918cef89":"code","cc86a5cf":"code","3275d709":"code","2582159c":"code","b2ad4b1a":"code","ff33f728":"code","fc09540e":"code","05f09906":"code","a183994e":"code","f9bcdfd9":"code","37fa12a1":"code","fd719a7c":"code","2515b4e5":"code","c110a4a8":"code","9e5acad0":"code","b9bf2f39":"code","849877e2":"code","4876c3ae":"code","0223682f":"code","8fe2d6cd":"code","ab5f12c3":"code","55e6ee0e":"code","5914929e":"code","d4df2d35":"code","40886ca8":"code","106bf2d7":"code","f25f2fa8":"code","6286b5f9":"code","b7a9f324":"code","4f308dd7":"code","f9192ed5":"code","41187e23":"code","cefb9157":"code","6b63e69e":"code","d2aa63d3":"code","74c0fd40":"code","9e60cd31":"code","a2dd46aa":"code","08668a09":"code","82425ed5":"code","4dfb1d6d":"code","ae3eac82":"code","d9997b9e":"code","5fd27b56":"code","0ffd63e7":"code","fd595f13":"code","091bc7b4":"code","ceff36c3":"code","a8508fcf":"code","4a244d24":"code","02561bff":"code","271bf1d0":"code","a252639f":"code","de539954":"code","8670ca5a":"code","d58b8201":"code","48dc1bdd":"code","ecd37d24":"code","0559db46":"code","cb79436e":"code","d2460fdc":"code","21b70eda":"code","8cf29ee2":"code","d2283e20":"code","969c7a0d":"code","76669a14":"code","f43f1479":"code","816ee40b":"code","6598d1dd":"code","5491eba4":"code","a2aeb703":"code","b9b7c7df":"code","3c81e008":"code","81f13eb1":"code","a382d5e9":"code","4d27ca5c":"code","1906bc8d":"code","da1c492b":"code","ece27d6f":"code","7d5dc986":"code","bfacbbb7":"code","a855bfb0":"code","7b907a33":"code","e3149aa0":"code","a931af9d":"code","045e1917":"code","c7df1411":"code","579421ae":"code","6359166a":"code","2d5fad5c":"code","570cb701":"code","b09843c2":"code","0a363746":"code","219de9ce":"code","8463d79d":"code","268ec060":"code","7b4978c6":"code","01605856":"code","07f22fc0":"code","4d740c31":"code","e4a8a7ca":"code","0d6893c2":"code","77457a3a":"code","b4989684":"code","4ac002af":"code","f8aa7cd1":"code","e9a44bcd":"code","65cd55b2":"code","5f474af3":"code","43fe118f":"code","83a97471":"code","8bbf73b8":"code","110f61de":"code","65b1d60a":"code","7f5260b0":"code","6ad0d493":"code","0bb38ece":"code","bb1d38fc":"code","0bea69b7":"code","795d5826":"code","75f7d3f9":"code","fbf62592":"code","eaff2d4f":"code","96dae7c4":"code","f1aa5c5c":"code","e4aa84bd":"code","609669bc":"code","054b363f":"code","60d90a2e":"code","7c6339a5":"code","9b5e6e3b":"code","04c2ec10":"code","2c7cd64f":"code","6e4017b7":"code","a2b34ae2":"code","b68a8c8c":"code","a628e559":"code","7a120ecb":"code","8ad99939":"code","8b2afd9e":"code","4f410b82":"code","25ccddba":"code","a455c14b":"code","dc914b16":"code","94f36d4d":"code","b39dde06":"code","fc6243fe":"code","47c7a1fb":"code","5dcba4f7":"code","f6c708bd":"code","c2232359":"code","a8be4b58":"code","90bfd366":"code","ac5832fe":"code","4f35a361":"code","2ded8bd5":"code","74bed756":"code","789fdc79":"code","77acdd97":"code","693761dd":"code","08fadfe9":"code","04e92818":"code","49bd2935":"code","b21c9250":"code","ff8b62f5":"code","a1cc125d":"code","ad386447":"code","07152ca7":"code","e485c512":"markdown","a4c0a6e8":"markdown","9449aa1b":"markdown","547c7bd6":"markdown","b0b994a8":"markdown","1ba5eb53":"markdown","f8d85ec4":"markdown","8568c63c":"markdown","d158f0f4":"markdown","7947dcea":"markdown","0783edb3":"markdown","8e831f13":"markdown","74d2be2c":"markdown","0f7800af":"markdown","2fdf8857":"markdown","225fa2b4":"markdown","7f6561ef":"markdown","1e15cf55":"markdown","72e66c44":"markdown","adc574f3":"markdown","016c21c5":"markdown","47865941":"markdown","34144c1d":"markdown","9799ec16":"markdown","2a8f9945":"markdown","f236b3ab":"markdown","f195b87e":"markdown","051b2e83":"markdown","c6624fb3":"markdown","86391a10":"markdown","279a143e":"markdown","51d37863":"markdown","c950f4d8":"markdown","398fcec3":"markdown","6f2f2921":"markdown","5ae4d758":"markdown","91c4c4ea":"markdown","1586a37c":"markdown","8329b1d2":"markdown","0cd5af76":"markdown","39ecba8f":"markdown","614d45c1":"markdown","bedf8a31":"markdown","b928ddaa":"markdown","339d3b2a":"markdown","787113a0":"markdown","9dc6e4ab":"markdown","c38419a2":"markdown","56d74f18":"markdown","bf0efc95":"markdown","6b5788f0":"markdown","64993f25":"markdown","563b638b":"markdown","aa7a68d7":"markdown","612c9a04":"markdown","93a94f9e":"markdown","a2177991":"markdown","92d58ce9":"markdown","554c42b6":"markdown","2ad82bf4":"markdown","5f346b9e":"markdown","50219d42":"markdown","67d29d0d":"markdown","8426bd6b":"markdown","801278a9":"markdown","d4244da9":"markdown","fc6c6a66":"markdown","26fe68af":"markdown","efa5c5fe":"markdown","0e38ccb8":"markdown","e04f2cb5":"markdown","bea7222f":"markdown","1af623cb":"markdown","962806f4":"markdown","769c1326":"markdown","9bd1026b":"markdown","2ef14855":"markdown","241a4d98":"markdown","6108931c":"markdown","e7343230":"markdown","3379f126":"markdown","3909b86d":"markdown","a2371b10":"markdown","b43542ce":"markdown","984dc332":"markdown","7b9ddf4e":"markdown","017d35a0":"markdown","ae4d4dac":"markdown","f3626610":"markdown","e31e286b":"markdown","21621975":"markdown","fabc0d79":"markdown","75bc663c":"markdown","1f571432":"markdown","686d9467":"markdown","795e8311":"markdown","6356a39b":"markdown","7dc850a2":"markdown","ff59bde6":"markdown","7977ce4c":"markdown","535b0152":"markdown","41bfab56":"markdown","203fcbce":"markdown","db6521a2":"markdown","47f9375b":"markdown","7e82a1ee":"markdown","c2d9d48f":"markdown","6468f846":"markdown","7d9c70f5":"markdown","fd3ad8cf":"markdown","e41c2e15":"markdown","a79e7206":"markdown","4ad59f50":"markdown","6a396125":"markdown","25dae76d":"markdown","d0d32863":"markdown","9edb84a5":"markdown","b4e7369e":"markdown","37972e31":"markdown","3aaf434d":"markdown","b12c2045":"markdown","84ff69f8":"markdown","c9506545":"markdown","a60b25b0":"markdown","20ef475b":"markdown","51b7be54":"markdown","0fbfe01f":"markdown","4dbf2c82":"markdown","4b4b89f7":"markdown","cd026e54":"markdown","64a36914":"markdown","f9b54393":"markdown","e20662f2":"markdown","19b30811":"markdown","4bf1c64f":"markdown","60babe81":"markdown","c6cb9afd":"markdown","32291056":"markdown","26ac79c7":"markdown","3b0efd18":"markdown","d3ebae26":"markdown","b9741ee9":"markdown","f5ecef72":"markdown","15f2c308":"markdown","82bcbd4f":"markdown","4a7186fb":"markdown","8a98c6b4":"markdown"},"source":{"1a7889ce":"# Supress Warnings\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Importing libraries\n\nimport pandas as pd, numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom matplotlib.pyplot import xticks\n%matplotlib inline\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import StandardScaler\n\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.feature_selection import RFE\n\nimport statsmodels.api as sm\n\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\n\nfrom sklearn import metrics","2f999cd6":"leads_df = pd.read_csv('..\/input\/leadscore\/Leads.csv')\nleads_df.head()","9719f240":"leads_df.shape","42ad7fc1":"sum(leads_df.duplicated(subset = 'Prospect ID'))","5b7013bb":"sum(leads_df.duplicated(subset = 'Lead Number'))","54446c36":"# looking at summary statistics of numerical columns\nleads_df.describe()","6418c923":"# verifying outliers\nleads_df['Total Time Spent on Website'].quantile([0,0.25,0.5,0.75,0.95,0.99,1])","98c1042d":"leads_df['Page Views Per Visit'].quantile([0,0.25,0.5,0.75,0.95,0.99,1])","cd1275a5":"# data type of variables\nleads_df.info()","a63c203e":"# Null values\nround((leads_df.isnull().sum()\/len(leads_df))*100,1)","091e3599":"# Specialization\nleads_df.Specialization.value_counts()","6f6554e5":"# How did you hear about X Education\nleads_df['How did you hear about X Education'].value_counts()","22f5c5a8":"# Lead Profile\nleads_df['Lead Profile'].value_counts()","332fce74":"# City\nleads_df['City'].value_counts()","9c8b3da4":"leads_df.loc[leads_df['Specialization'].str.lower() == 'select', 'Specialization'] = np.nan\nleads_df.loc[leads_df['How did you hear about X Education'].str.lower() == 'select', 'How did you hear about X Education'] = np.nan\nleads_df.loc[leads_df['Lead Profile'].str.lower() == 'select', 'Lead Profile'] = np.nan\nleads_df.loc[leads_df['City'].str.lower() == 'select', 'City'] = np.nan\n\nleads_df.head()","b8d63786":"leads_df = leads_df.drop(['Tags','Lead Quality','Asymmetrique Activity Index','Asymmetrique Profile Index',\n                          'Asymmetrique Activity Score','Asymmetrique Profile Score','Lead Profile'], axis=1)","7b0764a5":"leads_df.info()","e7e67988":"# Null values\nround((leads_df.isnull().sum()\/len(leads_df))*100,1)","809e642f":"# creating a copy of original dataframe\nleads_df_prep = leads_df","b2a0ecdd":"leads_df_prep = leads_df_prep.drop(leads_df_prep.loc[:,list(round(100*(leads_df_prep.isnull().sum()\/len(leads_df_prep.index)), 2)>45)].columns, 1)","3e1dcfef":"# checking dataframe\nleads_df_prep.head()","a0c2daed":"# Null values\nround((leads_df_prep.isnull().sum()\/len(leads_df_prep))*100,1)","5cf14865":"leads_df_prep['Lead Source'].value_counts()","efe38991":"# replacing nulls with mode\nleads_df_prep.loc[leads_df_prep['Lead Source'].isnull(), 'Lead Source'] = 'Google'\n\n# checking for null values after replacement, which should be zero\nleads_df_prep['Lead Source'].isnull().sum()","28bcf8da":"# rechecking counts\nleads_df_prep['Lead Source'].value_counts()","a34a4287":"# This has to be computed using either mean or median. \n# determining the mean and median values for converted and not not converted leads\n\n# mean\nprint(leads_df_prep.groupby('Converted').TotalVisits.mean())\n\n# median\nprint(leads_df_prep.groupby('Converted').TotalVisits.median())","918cef89":"# replacing nulls with median\nleads_df_prep.loc[leads_df_prep['TotalVisits'].isnull(), 'TotalVisits'] = leads_df_prep['TotalVisits'].median()","cc86a5cf":"# null values should now be zero\nleads_df_prep['TotalVisits'].isnull().sum()","3275d709":"# mean\nprint(leads_df_prep.groupby('Converted').TotalVisits.mean())\n\n# median\nprint(leads_df_prep.groupby('Converted').TotalVisits.median())","2582159c":"# This has to be computed using either mean or median. \n# determining the mean and median values for converted and not not converted leads\n\n# mean\nprint(leads_df_prep.groupby('Converted')['Page Views Per Visit'].mean())\n\n# median\nprint(leads_df_prep.groupby('Converted')['Page Views Per Visit'].median())","b2ad4b1a":"# replacing nulls with median\nleads_df_prep.loc[leads_df_prep['Page Views Per Visit'].isnull(), 'Page Views Per Visit'] = leads_df_prep['Page Views Per Visit'].median()","ff33f728":"# null values should now be zero\nleads_df_prep['Page Views Per Visit'].isnull().sum()","fc09540e":"# mean\nprint(leads_df_prep.groupby('Converted')['Page Views Per Visit'].mean())\n\n# median\nprint(leads_df_prep.groupby('Converted')['Page Views Per Visit'].median())","05f09906":"leads_df_prep['Last Activity'].value_counts()","a183994e":"leads_df_prep.loc[leads_df_prep['Last Activity'].isnull(), 'Last Activity'] = 'Others'","f9bcdfd9":"leads_df_prep['Last Activity'].value_counts()","37fa12a1":"# detrmining leads where Country is missing, however, City is provided\n\nleads_df_prep[leads_df_prep['Country'].isnull() & ~leads_df_prep['City'].isnull()]['City'].value_counts()","fd719a7c":"# determining countries that fall wihtin \"Tier II Cities\"\n\nleads_df_prep[leads_df_prep['City'] == 'Tier II Cities']['Country'].value_counts()","2515b4e5":"# determining overall distribution\n\nleads_df_prep['Country'].value_counts()","c110a4a8":"# replacing missing values\nleads_df_prep.loc[leads_df_prep['Country'].isnull(), 'Country'] = 'India'","9e5acad0":"# verifying results\nleads_df_prep['Country'].value_counts()","b9bf2f39":"leads_df_prep['Specialization'].value_counts(normalize=True) * 100","849877e2":"sns.countplot(y='Specialization',hue='Converted', data=leads_df_prep)\nplt.show()","4876c3ae":"leads_df_prep[leads_df_prep['Specialization'].isnull()]['What is your current occupation'].value_counts(normalize=True)","0223682f":"# replacing missing values with \"Others\"\nleads_df_prep.loc[leads_df_prep['Specialization'].isnull(), 'Specialization'] = 'Others'","8fe2d6cd":"# verifying dataframe\nleads_df_prep['Specialization'].value_counts(normalize=True) * 100","ab5f12c3":"leads_df_prep['What is your current occupation'].value_counts(normalize=True) * 100","55e6ee0e":"leads_df_prep[leads_df_prep['What is your current occupation'].isnull()]['Specialization'].value_counts(normalize=True)","5914929e":"# replacing missing values with \"Others\"\nleads_df_prep.loc[leads_df_prep['What is your current occupation'].isnull(), 'What is your current occupation'] = 'Other'","d4df2d35":"leads_df_prep['What is your current occupation'].value_counts(normalize=True) * 100","40886ca8":"leads_df_prep['What matters most to you in choosing a course'].value_counts(normalize=True) * 100","106bf2d7":"leads_df_prep = leads_df_prep.drop('What matters most to you in choosing a course', axis=1)","f25f2fa8":"leads_df_prep.head()","6286b5f9":"leads_df_prep['City'].value_counts(normalize=True)","b7a9f324":"# replacing with \"Other Cities\"\nleads_df_prep.loc[leads_df_prep['City'].isnull(), 'City'] = 'Other Cities'","4f308dd7":"leads_df_prep['City'].value_counts(normalize=True)","f9192ed5":"leads_df_prep.isnull().sum()\/len(leads_df_prep)","41187e23":"# retained rows and columns\nleads_df_prep.shape","cefb9157":"# determining columns with only one category\n\ncolumns_with_single_category = []\n\nfor col in list(leads_df_prep.columns):\n    if leads_df_prep[col].nunique() == 1:\n        columns_with_single_category.append(col)\n\ncolumns_with_single_category","6b63e69e":"# dropping columns\n\nleads_df_prep = leads_df_prep.drop(columns_with_single_category, axis=1)\n\nleads_df_prep.head()","d2aa63d3":"leads_df_prep['Lead Origin'].value_counts(normalize = True)","74c0fd40":"print(leads_df_prep['Lead Source'].value_counts(normalize = True))\nprint(leads_df_prep['Lead Source'].nunique())","9e60cd31":"# making \"google\" and \"Google\" consistent\n\nleads_df_prep['Lead Source'] = leads_df_prep['Lead Source'].replace('google','Google')","a2dd46aa":"# creating \"Social Media\" as a more generic category\n\nleads_df_prep['Lead Source'] = leads_df_prep['Lead Source'].replace(\n    ['Facebook','bing','Live Chat','blog','youtubechannel','NC_EDM'],'Social Media')","08668a09":"# creating \"Other Educational Sites\" as a more generic category\n\nleads_df_prep['Lead Source'] = leads_df_prep['Lead Source'].replace(\n    ['Welingak Website','WeLearn','welearnblog_Home'],'Other Educational Sites')","82425ed5":"# creating \"Reference and Referral Sites\" as a more generic category\n\nleads_df_prep['Lead Source'] = leads_df_prep['Lead Source'].replace(\n    ['Reference','Referral Sites'],'Reference and Referral Sites')","4dfb1d6d":"# combining categories with low distribution of leads into \"Others\"\n\nleads_df_prep['Lead Source'] = leads_df_prep['Lead Source'].replace(['Click2call','Press_Release',\n                                                     'Pay per Click Ads','testone'] ,'Others')","ae3eac82":"# determing final categories\n\nleads_df_prep['Lead Source'].value_counts(normalize = True)","d9997b9e":"print(leads_df_prep['Last Activity'].value_counts(normalize = True))\nprint(leads_df_prep['Last Activity'].nunique())","5fd27b56":"# creating \"Unreachable\" category\n\nleads_df_prep['Last Activity'] = leads_df_prep['Last Activity'].replace(['Email Bounced','Unsubscribed'],'Unreachable')","0ffd63e7":"# combining categories with low distribution into \"Others\"\nleads_df_prep['Last Activity'] = leads_df_prep['Last Activity'].replace([\n                                                        'Had a Phone Conversation', \n                                                        'Approached upfront',\n                                                        'View in browser link Clicked',       \n                                                        'Email Marked Spam',                  \n                                                        'Email Received','Resubscribed to emails',\n                                                         'Visited Booth in Tradeshow'],'Others')","fd595f13":"print(leads_df_prep['Last Activity'].value_counts(normalize = True))\nprint(leads_df_prep['Last Activity'].nunique())","091bc7b4":"print(leads_df_prep['Country'].value_counts(normalize = True))\nprint(leads_df_prep['Country'].nunique())","ceff36c3":"leads_df_prep = leads_df_prep.drop('Country', axis=1)\n\nleads_df_prep.shape","a8508fcf":"leads_df_prep.Specialization.value_counts(normalize=True)","4a244d24":"# determining distribution against target variable\nsns.countplot(y='Specialization', hue='Converted', data=leads_df_prep)\nplt.show()","02561bff":"#combining Management Specializations because they show similar trends\n\nleads_df_prep['Specialization'] = leads_df_prep['Specialization'].replace(['Finance Management','Human Resource Management',\n                                                           'Marketing Management','Operations Management',\n                                                           'IT Projects Management','Supply Chain Management',\n                                                    'Healthcare Management','Hospitality Management',\n                                                           'Retail Management'] ,'Management_Cross Industry')  ","271bf1d0":"# creating \"E-Commerce\" as a generic segment\n\nleads_df_prep['Specialization'] = leads_df_prep['Specialization'].replace(['E-Business'],'E-COMMERCE')","a252639f":"leads_df_prep['Specialization'] = leads_df_prep['Specialization'].replace(['Others','Rural and Agribusiness'\n                                                                          ,'Services Excellence'],'Other Specializations')","de539954":"# determining distribution against target variable\nleads_df_prep.Specialization.value_counts(normalize=True)","8670ca5a":"leads_df_prep['What is your current occupation'].value_counts(normalize=True)","d58b8201":"leads_df_prep.City.value_counts(normalize=True)","48dc1bdd":"leads_df_prep['City'] = leads_df_prep['City'].replace('Thane & Outskirts','Other Cities of Maharashtra') ","ecd37d24":"leads_df_prep.City.value_counts(normalize=True)","0559db46":"leads_df_prep['Last Notable Activity'].value_counts(normalize = True)","cb79436e":"leads_df_prep = leads_df_prep.drop('Last Notable Activity', axis=1) ","d2460fdc":"leads_df_prep['Search'].value_counts(normalize=True)","21b70eda":"leads_df_prep = leads_df_prep.drop('Search', axis=1)","8cf29ee2":"leads_df_prep['Through Recommendations'].value_counts(normalize=True)","d2283e20":"leads_df_prep = leads_df_prep.drop('Through Recommendations', axis=1)","969c7a0d":"leads_df_prep['Digital Advertisement'].value_counts(normalize=True)","76669a14":"leads_df_prep = leads_df_prep.drop('Digital Advertisement', axis=1)","f43f1479":"print(leads_df_prep['Newspaper Article'].value_counts(normalize=True))\nprint(leads_df_prep['X Education Forums'].value_counts(normalize=True))\nprint(leads_df_prep['X Education Forums'].value_counts(normalize=True))\nprint(leads_df_prep['Do Not Call'].value_counts(normalize=True))","816ee40b":"leads_df_prep = leads_df_prep.drop(['Newspaper Article', 'X Education Forums', 'Newspaper','Do Not Call'], axis=1)","6598d1dd":"leads_df_prep.info()","5491eba4":"leads_df_prep.shape","a2aeb703":"leads_df_prep.describe()","b9b7c7df":"plt.figure(figsize=(14,3))\nplt.subplot(1,3,1)\nsns.boxplot(x='TotalVisits', data=leads_df_prep)\n\nplt.subplot(1,3,2)\nsns.boxplot(x='Total Time Spent on Website', data=leads_df_prep)\n\nplt.subplot(1,3,3)\nsns.boxplot(x='Page Views Per Visit', data=leads_df_prep)","3c81e008":"# checking quantile range\nleads_df_prep['TotalVisits'].quantile([0,0.25,0.5,0.75,0.9,0.90,0.95,0.99,1])","81f13eb1":"# determining 95th quantile\n\nq95 = leads_df_prep['TotalVisits'].quantile(0.95)\n\n# replacing leads with TotalVisits more than the 95th percentile, with 95th percentile\nleads_df_prep['TotalVisits'][leads_df_prep['TotalVisits']>q95] = q95","a382d5e9":"leads_df_prep['Page Views Per Visit'].quantile([0,0.25,0.5,0.75,0.9,0.90,0.95,0.99,1])","4d27ca5c":"# determining 95th quantile\n\nq95 = leads_df_prep['Page Views Per Visit'].quantile(0.95)\n\n# replacing leads with TotalVisits more than the 95th percentile, with 95th percentile\nleads_df_prep['Page Views Per Visit'][leads_df_prep['Page Views Per Visit']>q95] = q95","1906bc8d":"plt.figure(figsize=(14,3))\nplt.subplot(1,3,1)\nsns.boxplot(x='TotalVisits', data=leads_df_prep)\n\nplt.subplot(1,3,2)\nsns.boxplot(x='Total Time Spent on Website', data=leads_df_prep)\n\nplt.subplot(1,3,3)\nsns.boxplot(x='Page Views Per Visit', data=leads_df_prep)","da1c492b":"# Overall Conversion Rate\n\nround((sum(leads_df_prep['Converted'])\/len(leads_df_prep))*100,2)","ece27d6f":"# Lead Origin\n\nplt.figure(figsize=(15,5))\nplt.subplot(1,2,1)\nsns.countplot(y='Lead Origin', hue='Converted', data=leads_df_prep)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('Lead Origin').Converted.sum()\/leads_df_prep.groupby('Lead Origin')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['Lead Origin','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='Lead Origin', x='Conversion Ratio', data=df, color='salmon')\n\nplt.tight_layout()\nplt.show()","7d5dc986":"# Lead Source\n\nplt.figure(figsize=(15,5))\nplt.subplot(1,2,1)\nsns.countplot(y='Lead Source', hue='Converted', data=leads_df_prep, order=leads_df_prep['Lead Source'].value_counts().index)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('Lead Source').Converted.sum()\/leads_df_prep.groupby('Lead Source')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['Lead Source','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='Lead Source', x='Conversion Ratio', data=df, color='salmon', order=leads_df_prep['Lead Source'].value_counts().index)\n\nplt.tight_layout()\nplt.show()","bfacbbb7":"# Do not Email\n\nplt.figure(figsize=(15,5))\n\nplt.subplot(2,2,1)\nsns.countplot(y='Do Not Email', hue='Converted', data=leads_df_prep)\n\nplt.subplot(2,2,2)\ndf = leads_df_prep.groupby('Do Not Email').Converted.sum()\/leads_df_prep.groupby('Do Not Email')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['Do Not Email','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='Do Not Email', x='Conversion Ratio', data=df, color='salmon')","a855bfb0":"# Last Activity\nplt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\nsns.countplot(y='Last Activity', hue='Converted', data=leads_df_prep, order=leads_df_prep['Last Activity'].value_counts().index)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('Last Activity').Converted.sum()\/leads_df_prep.groupby('Last Activity')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['Last Activity','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='Last Activity', x='Conversion Ratio', data=df, color='salmon', order=leads_df_prep['Last Activity'].value_counts().index)\n\nplt.tight_layout()","7b907a33":"# Specialization\nplt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\nsns.countplot(y='Specialization', hue='Converted', data=leads_df_prep, order=leads_df_prep['Specialization'].value_counts().index)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('Specialization').Converted.sum()\/leads_df_prep.groupby('Specialization')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['Specialization','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='Specialization', x='Conversion Ratio', data=df, color='salmon', order=leads_df_prep['Specialization'].value_counts().index)\n\nplt.tight_layout()","e3149aa0":"# What is your current occupation\nplt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\nsns.countplot(y='What is your current occupation', hue='Converted', data=leads_df_prep, order=leads_df_prep['What is your current occupation'].value_counts().index)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('What is your current occupation').Converted.sum()\/leads_df_prep.groupby('What is your current occupation')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['What is your current occupation','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='What is your current occupation', x='Conversion Ratio', data=df, color='salmon', order=leads_df_prep['What is your current occupation'].value_counts().index)\n\nplt.tight_layout()","a931af9d":"# City\nplt.figure(figsize=(15,5))\n\nplt.subplot(1,2,1)\nsns.countplot(y='City', hue='Converted', data=leads_df_prep, order=leads_df_prep['City'].value_counts().index)\n\nplt.subplot(1,2,2)\ndf = leads_df_prep.groupby('City').Converted.sum()\/leads_df_prep.groupby('City')['Lead Number'].count()\ndf = df.reset_index()\ndf.columns = ['City','Conversion Ratio']\n#df = df.sort_values(by = 'Conversion Ratio', ascending=False)\nsns.barplot(y='City', x='Conversion Ratio', data=df, color='salmon', order=leads_df_prep['City'].value_counts().index)\n\nplt.tight_layout()","045e1917":"plt.figure(figsize=(14,5))\nplt.subplot(1,3,1)\nsns.boxplot(y='TotalVisits', x='Converted', data=leads_df_prep)\n\nplt.subplot(1,3,2)\nsns.boxplot(y='Total Time Spent on Website', x='Converted', data=leads_df_prep)\n\nplt.subplot(1,3,3)\nsns.boxplot(y='Page Views Per Visit', x='Converted', data=leads_df_prep)\n\nplt.tight_layout()","c7df1411":"sns.heatmap(leads_df_prep.corr(), annot=True)","579421ae":"var_list = ['Do Not Email', 'A free copy of Mastering The Interview']","6359166a":"# Defining the map function\ndef binary_map(x):\n    return x.map({'Yes': 1, \"No\": 0})\n\n# Capitalize all binary variables\nleads_df_prep['Do Not Email'] = leads_df_prep['Do Not Email'].str.capitalize()\nleads_df_prep['A free copy of Mastering The Interview'] = leads_df_prep['A free copy of Mastering The Interview'].str.capitalize()\n\n# applying the function to the variables\nleads_df_prep[var_list] = leads_df_prep[var_list].apply(binary_map)","2d5fad5c":"leads_df_prep[var_list].head()","570cb701":"dummies_list = ['Lead Origin','Lead Source','Last Activity','Specialization','What is your current occupation','City']","b09843c2":"# creating dummies\ndummy_set = pd.get_dummies(leads_df_prep[dummies_list], drop_first=True)","0a363746":"# concatenating with dataframe\n\nleads_df_prep = pd.concat([leads_df_prep,dummy_set], axis=1)\nleads_df_prep.head()","219de9ce":"# dropping all catagorical variables, since we have already created dummies \nleads_df_prep = leads_df_prep.drop(dummies_list, axis=1)","8463d79d":"leads_df_prep.head()","268ec060":"# Putting feature variable to X\nX = leads_df_prep.drop(['Converted','Prospect ID','Lead Number'], axis=1)\n\nX.head()","7b4978c6":"y = leads_df_prep['Converted']\n\ny.head()","01605856":"# Splitting the data into train and test\nX_train, X_test, y_train, y_test = train_test_split(X, y, train_size=0.7, test_size=0.3, random_state=100)","07f22fc0":"# Standardizing following variables (others are already in Binary form)\nscaler = StandardScaler()\n\nX_train[['TotalVisits','Total Time Spent on Website','Page Views Per Visit']] = scaler.fit_transform(X_train[['TotalVisits','Total Time Spent on Website','Page Views Per Visit']])\n\nX_train.head()","4d740c31":"logreg = LogisticRegression()","e4a8a7ca":"rfe = RFE(logreg, 25) \nrfe = rfe.fit(X_train, y_train)","0d6893c2":"list(zip(X_train.columns, rfe.support_, rfe.ranking_))","77457a3a":"# Selected Columns\ncol = X_train.columns[rfe.support_]\nlen(col)","b4989684":"# excluded columns\nX_train.columns[~rfe.support_]","4ac002af":"# fitting the model using RFE variables\n\nX_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","f8aa7cd1":"X_train['What is your current occupation_Housewife'].value_counts(normalize=True)","e9a44bcd":"X_train['Lead Source_Others'].value_counts(normalize=True)","65cd55b2":"X_train['Lead Origin_Lead Import'].value_counts(normalize=True)","5f474af3":"X_train['Specialization_International Business'].value_counts(normalize=True)","43fe118f":"col = col.drop(['What is your current occupation_Housewife', 'Lead Source_Others','Lead Origin_Lead Import',\n'Specialization_International Business'],1)\nlen(col)","83a97471":"X_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","8bbf73b8":"# Create a dataframe that will contain the names of all the feature variables and their respective VIFs\nvif = pd.DataFrame()\nvif['Features'] = X_train[col].columns\nvif['VIF'] = [variance_inflation_factor(X_train[col].values, i) for i in range(X_train[col].shape[1])]\nvif['VIF'] = round(vif['VIF'], 2)\nvif = vif.sort_values(by = \"VIF\", ascending = False)\nvif","110f61de":"col = col.drop(['What is your current occupation_Unemployed'],1)\ncol","65b1d60a":"# re-checking VIF\nvif = pd.DataFrame()\nvif['Features'] = X_train[col].columns\nvif['VIF'] = [variance_inflation_factor(X_train[col].values, i) for i in range(X_train[col].shape[1])]\nvif['VIF'] = round(vif['VIF'], 2)\nvif = vif.sort_values(by = \"VIF\", ascending = False)\nvif","7f5260b0":"X_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","6ad0d493":"# dropping Column with high p-value\ncol = col.drop(['Last Activity_Olark Chat Conversation'],1)\ncol","0bb38ece":"# re-checking VIF\nvif = pd.DataFrame()\nvif['Features'] = X_train[col].columns\nvif['VIF'] = [variance_inflation_factor(X_train[col].values, i) for i in range(X_train[col].shape[1])]\nvif['VIF'] = round(vif['VIF'], 2)\nvif = vif.sort_values(by = \"VIF\", ascending = False)\nvif","bb1d38fc":"X_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","0bea69b7":"# dropping column with high p-value\ncol = col.drop(['What is your current occupation_Student'],1)\nlen(col)","795d5826":"# re-checking VIF\nvif = pd.DataFrame()\nvif['Features'] = X_train[col].columns\nvif['VIF'] = [variance_inflation_factor(X_train[col].values, i) for i in range(X_train[col].shape[1])]\nvif['VIF'] = round(vif['VIF'], 2)\nvif = vif.sort_values(by = \"VIF\", ascending = False)\nvif","75f7d3f9":"X_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","fbf62592":"# Dropping \"_OTHER\" Categories and \"A free copy of Mastering The Interview\"\ncol = col.drop(['What is your current occupation_Other','Specialization_Other Specializations','Last Activity_Others'\n               ,'A free copy of Mastering The Interview'],1)\ncol","eaff2d4f":"X_train_sm = sm.add_constant(X_train[col])\nlogm2 = sm.GLM(y_train,X_train_sm, family = sm.families.Binomial())\nres = logm2.fit()\nres.summary()","96dae7c4":"# re-checking VIF\nvif = pd.DataFrame()\nvif['Features'] = X_train[col].columns\nvif['VIF'] = [variance_inflation_factor(X_train[col].values, i) for i in range(X_train[col].shape[1])]\nvif['VIF'] = round(vif['VIF'], 2)\nvif = vif.sort_values(by = \"VIF\", ascending = False)\nvif","f1aa5c5c":"y_train_pred = res.predict(X_train_sm).values.reshape(-1)","e4aa84bd":"# verifying first 10 probabilities in the array\ny_train_pred[:10]","609669bc":"y_train_pred_final = pd.DataFrame({'Converted':y_train.values, 'Converting_Probabilities':y_train_pred})\ny_train_pred_final['Lead ID'] = y_train.index\ny_train_pred_final.head()","054b363f":"# Creating columns with different probability cutoffs \nnumbers = [float(x)\/10 for x in range(10)]\nfor i in numbers:\n    y_train_pred_final[i]= y_train_pred_final.Converting_Probabilities.map(lambda x: 1 if x > i else 0)\ny_train_pred_final.head()","60d90a2e":"# Now let's calculate accuracy sensitivity and specificity for various probability cutoffs.\ncutoff_df = pd.DataFrame( columns = ['prob','accuracy','sensi','speci'])\nfrom sklearn.metrics import confusion_matrix\n\n# TP = confusion[1,1] # true positive \n# TN = confusion[0,0] # true negatives\n# FP = confusion[0,1] # false positives\n# FN = confusion[1,0] # false negatives\n\nnum = [0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9]\nfor i in num:\n    cm1 = metrics.confusion_matrix(y_train_pred_final.Converted, y_train_pred_final[i] )\n    total1=sum(sum(cm1))\n    accuracy = (cm1[0,0]+cm1[1,1])\/total1\n    \n    speci = cm1[0,0]\/(cm1[0,0]+cm1[0,1])\n    sensi = cm1[1,1]\/(cm1[1,0]+cm1[1,1])\n    cutoff_df.loc[i] =[i ,accuracy,sensi,speci]\nprint(cutoff_df)","7c6339a5":"# Let's plot accuracy sensitivity and specificity for various probabilities.\ncutoff_df.plot.line(x='prob', y=['accuracy','sensi','speci'])\nplt.show()","9b5e6e3b":"# Predicting Conversion (0\/1) based on the predicted probabilities, using 0.35 as the cut-off.\n\ny_train_pred_final['Conversion_predicted'] = y_train_pred_final.Converting_Probabilities.map(lambda x: 1 if x > 0.35 else 0)\n\ny_train_pred_final.head()","04c2ec10":"confusion = metrics.confusion_matrix(y_train_pred_final.Converted, y_train_pred_final.Conversion_predicted )\nconfusion","2c7cd64f":"TP = confusion[1,1] # true positive \nTN = confusion[0,0] # true negatives\nFP = confusion[0,1] # false positives\nFN = confusion[1,0] # false negatives","6e4017b7":"round(((TP+TN)\/(TP+TN+FP+FN))*100,1)","a2b34ae2":"round((TP \/ float(TP+FN))*100,1)","b68a8c8c":"round((TN \/ float(TN+FP))*100,1)","a628e559":"round((TP \/ float(TP+FP))*100,1)","7a120ecb":"round((TP \/ float(TP+FN))*100,1)","8ad99939":"def draw_roc( actual, probs ):\n    fpr, tpr, thresholds = metrics.roc_curve( actual, probs,\n                                              drop_intermediate = False )\n    auc_score = metrics.roc_auc_score( actual, probs )\n    plt.figure(figsize=(5, 5))\n    plt.plot( fpr, tpr, label='ROC curve (area = %0.2f)' % auc_score )\n    plt.plot([0, 1], [0, 1], 'k--')\n    plt.xlim([0.0, 1.0])\n    plt.ylim([0.0, 1.05])\n    plt.xlabel('False Positive Rate or [1 - True Negative Rate]')\n    plt.ylabel('True Positive Rate')\n    plt.title('Receiver operating characteristic example')\n    plt.legend(loc=\"lower right\")\n    plt.show()\n\n    return None","8b2afd9e":"fpr, tpr, thresholds = metrics.roc_curve(y_train_pred_final.Converted, \n                                         y_train_pred_final.Converting_Probabilities, drop_intermediate = False )","4f410b82":"draw_roc(y_train_pred_final.Converted, y_train_pred_final.Converting_Probabilities)","25ccddba":"from sklearn.metrics import precision_recall_curve","a455c14b":"p, r, thresholds = precision_recall_curve(y_train_pred_final.Converted, y_train_pred_final.Converting_Probabilities)\n\n# plot\nplt.plot(thresholds, p[:-1], \"g-\")\nplt.plot(thresholds, r[:-1], \"r-\")\nplt.show()","dc914b16":"X_test[['TotalVisits','Total Time Spent on Website','Page Views Per Visit']] = scaler.transform(X_test[['TotalVisits','Total Time Spent on Website','Page Views Per Visit']])","94f36d4d":"X_test = X_test[col]\nX_test.head()","b39dde06":"# add constant\nX_test_sm = sm.add_constant(X_test)\n\n# making predictions\ny_test_pred = res.predict(X_test_sm)","fc6243fe":"# creating dataframe with actual and predicted values from test set\ny_test_pred_final = pd.DataFrame({'Converted':y_test.values, 'Converting_Probabilities':y_test_pred})\ny_test_pred_final['Lead ID'] = y_test.index\ny_test_pred_final.head()","47c7a1fb":"y_test_pred_final['Conversion_predicted'] = y_test_pred_final.Converting_Probabilities.map(lambda x: 1 if x > 0.40 else 0)\ny_test_pred_final.head()","5dcba4f7":"confusion_test = metrics.confusion_matrix(y_test_pred_final.Converted, y_test_pred_final.Conversion_predicted )\nconfusion_test","f6c708bd":"TP_test = confusion_test[1,1] # true positive \nTN_test = confusion_test[0,0] # true negatives\nFP_test = confusion_test[0,1] # false positives\nFN_test = confusion_test[1,0] # false negatives","c2232359":"round(((TP_test+TN_test)\/(TP_test+TN_test+FP_test+FN_test))*100,1)","a8be4b58":"round((TP_test \/ float(TP_test+FN_test))*100,1)","90bfd366":"round((TN_test \/ float(TN_test+FP_test))*100,1)","ac5832fe":"y_train_pred_final.head()","4f35a361":"y_train_pred_final['Lead Score'] = y_train_pred_final['Converting_Probabilities']*100\n\ny_train_pred_final['Lead Score'] = y_train_pred_final['Lead Score'].astype(int)","2ded8bd5":"# keeping only relevant variables\ny_train_pred_final = y_train_pred_final[['Converted','Converting_Probabilities','Lead ID','Conversion_predicted','Lead Score']]","74bed756":"y_train_pred_final.head()","789fdc79":"y_test_pred_final.head()","77acdd97":"y_test_pred_final['Lead Score'] = y_test_pred_final['Converting_Probabilities']*100\n\ny_test_pred_final['Lead Score'] = y_test_pred_final['Lead Score'].astype(int)","693761dd":"y_test_pred_final.head()","08fadfe9":"Lead_Score_df = y_train_pred_final.append(y_test_pred_final)\nLead_Score_df.head()","04e92818":"len(Lead_Score_df)","49bd2935":"# Ensuring the LeadIDs are unique for each lead in the finl dataframe\nlen(Lead_Score_df['Lead ID'].unique().tolist())","b21c9250":"# Making Index as the column identifier\nleads_df = leads_df.reset_index()\nleads_df.head()","ff8b62f5":"# renaming \"index\" to \"Lead ID\"\nleads_df = leads_df.rename(columns={\"index\": \"Lead ID\"})\nleads_df.head()","a1cc125d":"leads_df_scored = pd.merge(leads_df,Lead_Score_df[['Lead ID','Lead Score']], on='Lead ID', how='inner')\nleads_df_scored.info()","ad386447":"leads_df_scored = leads_df_scored.drop('Lead ID', axis=1)","07152ca7":"leads_df_scored.head()","e485c512":"##### Handling NULL values in \"Total Visits\"","a4c0a6e8":"## 4. Data Preparation","9449aa1b":"### 5.8 Precision and Recall TradeOff","547c7bd6":"**97%** of the leads are coming from India. Hence this column can be dropped since it would not have significant impact in predition.","b0b994a8":"No significant change in Mean after replacement.","1ba5eb53":"All variables are in the correct format.","f8d85ec4":"### 2.1 Converting columns with \"Select\" as values, to NULL","8568c63c":"##### Lead Origin","d158f0f4":"This column is similar to the information we have in \"Last Activity\" of the individual. Hence this can be dropped.","7947dcea":"**Creating a dataframe with the actual Converted leads and the predicted probabilities**","0783edb3":"### 1.1 Finding Duplicates ","8e831f13":"##### Through Recommendations","74d2be2c":"**RECALL or Sensitivity**","0f7800af":"#### Re-assessing model with remaining variables - Model 3","2fdf8857":"99% of the leads are not based on particular Digital Advertisement. Hence this column can be dropped","225fa2b4":"**Outliers have been handled**","7f6561ef":"### 1.5 Garbage values (\"Select\")","1e15cf55":"### 5.1 Manual Feature Selection","72e66c44":"#### In terms of Lead Generation\n\nCompnay should focus on increasing **Total Visits** to the platform. This can be achieved in many ways:\n* People spend more \"Time on the Website\". Making the website more intutive and relevant to the individual's interest would attract more traffic on the website.\n* Google tends to generate more leads. Launching more **Lead Add Forms** on social media sites, search engines would increase the overall lead count.\n* Content or Ads can be posted on **Educational Websites (such as WeLearn, Welingakr)** to increase number of leads, as this category show a high Conversion Rate.\n* Referrals and Reference Sites have a high Conversion Rate of 80%. Hence steps could be taken to improve traffic on these sources for example by offering some benefits existing students.","adc574f3":"##### Last Activity","016c21c5":"Computing missing values with \"Others\"","47865941":"**Sensitivity** or **True Positive Rate**","34144c1d":"## 5. Modelling","9799ec16":"Dropping these variables since they are highly skewed towards one category and show a high P-value","2a8f9945":"**Confusion Matrix**","f236b3ab":"The closer the curve follows the left-hand border and then the top border of the ROC space, the more accurate the test.","f195b87e":"**Adding Constant and Predicting**","051b2e83":"### 5.4 Finding Optimal Cutoff Point","c6624fb3":"# Lead Scoring","86391a10":"* Creating plots for all numerical variables to identify any outliers","279a143e":"**Inference**\n* Individuals who have checked Emails or have sent and SMS, should be constantly communicated to sustain and probably increase the conversion ratio\n* Next segment to target could be the individuals who have been visiting the website often","51d37863":"These are again highly skewed columns to one category. Hence can be dropped.","c950f4d8":"**Inference**\n* As determined earlier, Total Time Spent on the website has a good correlation with Converted, considering other variables.\n* Total Visits and Page Views Per Visit are highly correlated with each other. We can drop one of them as it will create ambiguity in modelling.","398fcec3":"As seen in the csv, following columns have \"Select\" as their values. Which is equivalant to providing no input. Will be replacing these values with NULL during data cleaning\n\n* \"Specialization\"\n* \"How did you hear about X Education\"\n* \"Lead Profile\"\n* \"City\"","6f2f2921":"We now have features with VIF under 5 and close to Zero p-values. Hence, we will continue with this model.","5ae4d758":"Dealing with 9240 records and 37 attributes","91c4c4ea":"#### Verifying dataset after treatment","1586a37c":"##### Handling NULL values in \"Last Activity\"","8329b1d2":"**Sensitivity**","0cd5af76":"99% of the leads are not based on particular Reccomendations. Hence this column can be dropped","39ecba8f":"##### Country","614d45c1":"There are quite a few variables with NULL values. We would be handling these values in data cleaning step.","bedf8a31":"Majority of the source is from Google. Hence we will replace missing values with \"Google\"","b928ddaa":"## 3. Exploratory Data Analysis","339d3b2a":"We have received an overall Accuracy of 80.8%\n","787113a0":"Sensitivity is 74.7%","9dc6e4ab":"##### Specialization","c38419a2":"#### 3.1.2 Numerical Variables","56d74f18":"**Dropping columns with more than 45% missing values**","bf0efc95":"### 4.4 Feature Scaling","6b5788f0":"**Specificity**","64993f25":"#### 3.1.1 Catagorical Variables","563b638b":"##### TotalVisits","aa7a68d7":"### 5.3 Predicting Probabilities","612c9a04":"##### Handling NULL values in \"Lead Source\"","93a94f9e":"**PRECISION**","a2177991":"##### Handling NULL values in \"City\"","92d58ce9":"### 2.6 Outlier Analysis","554c42b6":"#### Based on User's Profile\n\n* **Working People** have shown deep interest and a high conversion rate. However, since the overall lead counts is low, Company can focus in reaching out people in workforce and educating them about the products.","2ad82bf4":"### 3.1 Univariate Analysis","5f346b9e":"## Problem Statement\n\n#### About company:\n\t- X Education sells online courses to industry professionals\n\t- They typically markets their courses on  Websites, Search engine (such as Google)\n    - At any given day, professionals land on their webstite and browse through courses\n\n#### Leads conversion process:\n\t- General website behaviour:\n\t\t1. Individuals land on website and browse courses and watch videos\n\t\t2. They might end up filling a form\n\t- A LEAD is generated when:\n\t\t1. An individual has provided his\/her phone# or email address\n\t\t2. Past referral is provided\n\t- Sales team action on Leads:\n\t\t1. Make calls\n\t\t2. Writes emails\n\n#### Business Problem scenario:\n\t- Their Typical lead conversion Rate is 30%\n\t- Company wishes to identify and spend time effectively on most potential leads (a.k.a. \"HOT LEADS\"), that are most likely to get converted\n    \n   ##### The CEO, in particular, has given a ballpark of the target lead conversion rate to be around 80%","50219d42":"##### Handling NULL values in \"What is your current occupation\"","67d29d0d":"**Confusion Matrix**","8426bd6b":"### 5.7 ROC Curve","801278a9":"#### Re-assess the model with remaining variables - Model 2","d4244da9":"Data is not highly skewed towards one gategory and has only 5 categories. Hence no change is needed.","fc6c6a66":"## 1. Loading data and Inspecting","26fe68af":"**Overall Accuracy**","efa5c5fe":"**Test Set**","0e38ccb8":"Specificity is 85%","e04f2cb5":"### 4.1 Converting Binary Variables with Yes\/No to 1\/0","bea7222f":"##### Handling NULL values in \"Specialization\"","1af623cb":"Data is unique at Prospect ID and Lead Number, and there are no duplicates","962806f4":"We have received an overall Accuracy of 80.9%\n","769c1326":"## Solution Approach\n\nThe problem can be addressed using a Logistic Regression model, which can predict whether a lead can be classified as a potential lead or not, to help the business in making effective communications.\n\nIn Logistic Regression, the Prediction is made using the Probabilities, that will be assigned to each lead in our case using the most significant variables or features, and use an optimal cut-off or threshold that determine whether the lead can or cannot be classified as Potential. \n\nConclusions and Recommendation will specifiy:\n* Significant features determining potential leads\n* Key areas to focus, in increasing overall Conversion Rate","9bd1026b":"### 4.5 Feature Selection using RFE","2ef14855":"**Append Trainig and Test data sets**","241a4d98":"Sensitivity is 79.4%","6108931c":"**Inference**\n* Google and Direct Traffic despite highest number of leads, show only 30-40% of Conversion Rate\n* Referrals and Reference Sites have a high Conversion Rate of 80%. Hence steps could be taken to improve traffic on these sources for example by offering some benefits existing students.\n* Educational sites such as WeLearn and WeLearn Blog, can be used to put interactive content to increase traffic to Company's website.\n* Social Media doesn't tend to deliver good leads as the conversion rate is also low at ~25%.","e7343230":"**Transforming variables using Standard Scaler**","3379f126":"##### Lead Source","3909b86d":"#### Checking VIF","a2371b10":"#### Re-assessing model with remaining variables - Model 4","b43542ce":"**Inference**\n\nNothing significant can be derived using this variable","984dc332":"99% individuals opt or look for a course to make better career opportunitites within their workplace or getting a new job.\n\nHence we can **drop** this column because it won't be significant in predicting good leads.","7b9ddf4e":"### 5.5 Creating Final prediction using the optimal cut-off","017d35a0":"##### What is your current occupation","ae4d4dac":"##### Digital Advertisement","f3626610":"### 2.5 Determining unique categories and skewness","e31e286b":"We will compute it with Median, since for both cases, Median is the same and would be safe to use.","21621975":"**Restricting test set to the required variables**","fabc0d79":"**Inferences**\n* Majority number of Leads arrive from Landing Page Sumbmissions, however, that has a comparatively low Conversion Rate. It is a significant variable in determining potential leads\n* Although Lead Add Form generated few leads, but the Conversion Rate is over 90%. Hence more importance can be given to this area ","75bc663c":"No cleaning needed as we have required categories","1f571432":"##### City","686d9467":"Both variable show outliers presence.","795e8311":"Re-verifying using boxplots","6356a39b":"* \"Email Bounced\", \"Unreachable\", and \"Unsubscribed\" can be grouped into \"Unreachable\"\n* \"Had a Phone Conversation\", \"Approached upfront\", \"View in browser link Clicked\", \"Email Received\",\"Email Marked Spam\",\"Resubscribed to emails\", \"Visited Booth in Tradeshow\" can be grouped to \"Others\" because of less weightage","7dc850a2":"#### Re-assessing model with remaining variables - Model 6","ff59bde6":"##### Handling NULL values in \"What matters most to you in choosing a course\"","7977ce4c":"### 4.2 Creating Dummy Variables","535b0152":"Specificity is 81.6%","41bfab56":"99% of the leads are not based on any search. Hence this column can be dropped","203fcbce":"### 5.6 Deriving Evaluation Metrics","db6521a2":"Out of all the missing values under Specialization \n   * 93% of belongs to individuals that are \"Unemployed\"\n   * Only 1% are \"Working Professionals\"\n\nHence we cannot impute using existing categories and therefore make a new category \"Others\" for the missing values.","47f9375b":"**Inference**: Specificity has increased from 81.6% in Train Set to 85% in Test set. This clearly states that the model was  able to predict the NON potential leads efficiently.","7e82a1ee":"* Total Visits and Page Views per Visit has Outliers.\n\n* Treating outliers with 95th percentile","c2d9d48f":"### 2.2 Dropping columns that are not relevant for modelling\n\n* These are scoring based columns, which are generated by Sales Team after having an initial discussion with the Customer\/Student.\n* Our goal is to identify potential leads so that the communication can be made more focused, rather than calling everyone. ","6468f846":"We will compute it with Median","7d9c70f5":"##### Search","fd3ad8cf":"**Specificity** or **True Negative Rate**","e41c2e15":"### 2.4 Columns with only one category","a79e7206":"Checking Missing Percentage again","4ad59f50":"Since India is having more counts in each inspection above, and few of the Null values are cities of India, imputing null values with India.","6a396125":"### 1.3 Verifying data types","25dae76d":"##### Handling NULL values in \"Page Views Per Visit\"","d0d32863":"### 5.2 Final model for Prediction - Model 7","9edb84a5":"### 5.9 Making Predictions on Test Set","b4e7369e":"**0.35 looks to be an optimal cutoff value, because we have a balanced Sensitivity and Specificity**","37972e31":"**Inference**\n* Individuals spending time on the website has a good impact on a lead getting converted.\n* Website content can be made intutive in order to have aspiring students spend more time on the website and browse thourgh content that is relavant to them.","3aaf434d":"**Inference**\n* Other Cities in Maharashtra and outside Maharashtra have a good conversion but low traffic. Good marketing strategies in areas other than Mumbai can be applied to generate more leads.","b12c2045":"### 1.4 Checking NULL values","84ff69f8":"**Merge Lead Score Column to the Original Data frame**","c9506545":"**Inferences**\n\n* We see a good overall accuracy.\n\n* However, considering the business scenario - the model should optimally determine whether a lead could be classified as a potential lead, i.e. it should be efficient enough to determine non-potential leads. Therefore, Specificity or the False Positive Rate can been seen as the metric determining the overall predictive power of the model.\n\n* Specificity is good at 81.6%","a60b25b0":"##### Last Notable Activity","20ef475b":"### 4.3 Train-Test Split ","51b7be54":"**Train Set**","0fbfe01f":"As per the problem statement, we see that Conversion Rate stands low at 38%","4dbf2c82":"**Merging Predicted and Original Dataframe to assign \"Lead Score\" to all the leads.**","4b4b89f7":"## 2. Data Cleaning","cd026e54":"**Inferences**\n* Determining why Unemployed category has low conversion, despite individuals in need of Job.\n* Working Professionals have a higher conversion rate, so steps can be taken to increase leads coming from this segment.\n* Other categries does not require much focus, because the overall traffic is very less and instead focus on above segments to bring or generate more leads","64a36914":"**Determinig Mertrics**","f9b54393":"## 6. Conclusions","e20662f2":"**Overall Accuracy**","19b30811":"**We are able to retained 100% of the records and 14 columns**","4bf1c64f":"##### Page Vies Per Visit","60babe81":"### 2.3 Handling NULL values","c6cb9afd":"* Google is redundant with \"google\" and \"Google\". Hence should be combined.\n* \"Facebook\", \"bing\", \"Live Chat\", \"blog\", \"youtubechannel\", and \"NC_EDM\" can be merged into \"Social Media\", since that is a more generic category.\n* \"WeLearn\", \"Welingak Website\", and \"welearnblog_Home\" can be clubbed into a broader category of \"Other Educational Sites\".\n* \"Reference\" and \"Referral Sites\" can also be grouped into \"Reference and Referral Sites\"\n* Categories with low distribution of leads < 0.1% combined to form \"Others\".","32291056":"## 6. Creating Lead Score variable","26ac79c7":"##### Handling NULL values in \"Country\"","3b0efd18":"**Inferences**\n1. Last Activity=Olark Chat and Occupation=Student, show high P-Value\n2. Among the two, as seen in Univariate analysis, Olark Chat has a conversion rate of 10%, however Occupation=Students has close to 40%\n3. We will drop \"Last Activity_Olark Chat Conversation\"","d3ebae26":"We can club \"Thane & Outskirts\" with \"Other Cities of Mumbai\" to have them a better weightage.","b9741ee9":"### 3.2 Correlation Analysis","f5ecef72":"### 1.2 Summary Statistics of Numerical Variables","15f2c308":"#### Based on User's Last Activity\n\n* Individual's with the following recent activities, can turn out to be potential Students:\n    1. SMS Sent\n    2. Email Opened\n    3. Email link clicked\n    4. Page Visited on website","82bcbd4f":"##### 'Newspaper Article', 'X Education Forums', 'Newspaper','Do Not Call'","4a7186fb":"**Inference**\n* Cross Industry Management (such as: Healthcare Mgmt, Finance Mgmt, HR Mgmt, IT Mgmt, etc.) show good leads and conversion ratio. This is the segment to be sustained\n* Efforts can be made to increase traffic on Business Administration and Banking, Investment and Insurance sector.","8a98c6b4":"Dropping first column with highest VIF"}}