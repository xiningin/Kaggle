{"cell_type":{"c174f113":"code","cfc20f0e":"code","5ebed0d1":"code","969b7e0f":"code","1d0d6ca4":"code","1c473150":"code","3c1838b5":"code","7a489d12":"code","38f72993":"code","f77c7fbe":"markdown"},"source":{"c174f113":"import numpy as np\nimport pandas as pd\nfrom sklearn.preprocessing import LabelEncoder, StandardScaler\nfrom sklearn.metrics import roc_auc_score, log_loss\nimport matplotlib.pyplot as plt\n%matplotlib inline","cfc20f0e":"ls ..\/input","5ebed0d1":"def OrdinalConverter(d):\n    a1 = ord(d[:1])-65\n    if(a1>26):\n        a1-=6\n    if(len(d)==1):\n        return a1\n    a2 = ord(d[1:2])-65\n    if(a2>26):\n        a2-=6\n    return a1*52+a2","969b7e0f":"df_train = pd.read_csv('..\/input\/cat-in-the-dat-ii\/train.csv')\n","1d0d6ca4":"df_train.ord_5.unique()","1c473150":"df_train = df_train.set_index('id')\ny_train = df_train.target\ndel df_train['target']","3c1838b5":"ord_0_mapping = {1 : 0, 2 : 1, 3 : 2}\nord_1_mapping = {'Novice' : 0, 'Contributor' : 1, 'Expert' : 2, 'Master': 3, 'Grandmaster': 4}\nord_2_mapping = { 'Freezing': 0, 'Cold': 1, 'Warm' : 2, 'Hot': 3, 'Boiling Hot' : 4, 'Lava Hot' : 5}\ndf_train['real_ord_0'] = df_train.loc[df_train.ord_0.notnull(), 'ord_0'].map(ord_0_mapping)\ndf_train['real_ord_1'] = df_train.loc[df_train.ord_1.notnull(), 'ord_1'].map(ord_1_mapping)\ndf_train['real_ord_2'] = df_train.loc[df_train.ord_2.notnull(), 'ord_2'].map(ord_2_mapping)\notherordinals = ['ord_3','ord_4','ord_5']\n\nfor c in otherordinals:\n    print(c)\n    df_train['real_'+c] = df_train[[c]].apply(lambda a: OrdinalConverter(a[c]) if not pd.isnull(a[c]) else np.nan,axis=1)\n\n\n","7a489d12":"df_train['real_right_'+c] = df_train[[c]].apply(lambda a: OrdinalConverter(a[c][:1]) if not pd.isnull(a[c]) else np.nan,axis=1)\ndf_train['real_left_'+c] = df_train[[c]].apply(lambda a: OrdinalConverter(a[c][1:]) if not pd.isnull(a[c]) else np.nan,axis=1)","38f72993":"realordinals = [c for c in df_train.columns if 'real_' in c]\nfor c in realordinals:\n    print(c)\n    x = pd.DataFrame()\n    x['target'] = y_train[~df_train[c].isnull()]\n    x[c] = df_train[~df_train[c].isnull()][c]\n    y = x.groupby(c).target.mean().reset_index(drop=False)\n\n    plt.scatter(y[c],y.target)\n    plt.show()","f77c7fbe":"Is the second character of ord_5 junk?"}}