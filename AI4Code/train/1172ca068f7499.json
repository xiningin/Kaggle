{"cell_type":{"a150142b":"code","5daa1c7d":"code","7e55412b":"code","57a2d7ce":"code","e8e472cb":"code","53b41bec":"code","f28ea4be":"code","9b9a97f1":"code","f2e496d2":"code","b945cdaa":"code","9631d17a":"code","a2a9e641":"code","d63bc325":"code","cb28687b":"code","48e1df86":"code","545b09c7":"code","9ad3f3b9":"code","47dbee15":"code","ff23792e":"code","6c73cf63":"code","a612941d":"code","431fbfeb":"code","a0c42c30":"code","19dd3722":"code","4d9adfc1":"code","2f6c73dc":"code","afb101cf":"code","6f70862f":"code","c18f352c":"code","0e9e31d0":"code","9346eb46":"code","8e2365dd":"code","5f5b5a0c":"code","9d7d419c":"code","a4bd9c86":"code","00a98765":"code","914e385a":"markdown","749eb057":"markdown","62c646cf":"markdown","d266f57f":"markdown","e33114c0":"markdown","021bed59":"markdown","7a637ed6":"markdown","4cc98abd":"markdown","677f2c90":"markdown","2319e9cc":"markdown","4960234c":"markdown","f5f66d78":"markdown","d26a79ba":"markdown","202987d3":"markdown","90cede81":"markdown","85ee8674":"markdown","482c6752":"markdown","7d84af80":"markdown","1d457f60":"markdown","f487c03d":"markdown","9209f194":"markdown","c81d0429":"markdown","3cab17aa":"markdown","7a25bb2b":"markdown"},"source":{"a150142b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","5daa1c7d":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Settings to produce nice plots in a Jupyter notebook\nplt.style.use('fivethirtyeight')\n%matplotlib inline\n\n# Reading in the data\nstock_data = pd.read_csv('..\/input\/sharpe-ratio-dataset\/stock_data.csv',\n                          parse_dates=['Date'], \n                          index_col=['Date']).dropna()\n\nbenchmark_data = pd.read_csv('..\/input\/sharpe-ratio-dataset\/benchmark_data.csv', \n                             parse_dates=['Date'], \n                             index_col=['Date']).dropna()","7e55412b":"# Display summary for stock_data\nprint('Stocks\\n')\nstock_data.info()\nstock_data.head()\n\n# Display summary for benchmark_data\nprint('\\nBenchmarks\\n')\nbenchmark_data.info()\nbenchmark_data.head()","57a2d7ce":"# visualize the stock_data\nstock_data.plot(subplots=True)\nplt_title = 'Stock Data'\nplt.show()\n\n\n# summarize the stock_data\nstock_data.describe()","e8e472cb":"# plot the benchmark_data\nbenchmark_data.plot()\nplt_title = 'S&P 500'\nplt.show()\n\n\n# summarize the benchmark_data\nbenchmark_data.describe()","53b41bec":"# calculate daily stock_data returns\nstock_returns = stock_data.pct_change()\n\n# plot the daily returns\nstock_returns.plot()\nplt.show()\n\n\n# summarize the daily returns\nstock_returns.describe()\n","f28ea4be":"# calculate daily benchmark_data returns\n# ... YOUR CODE FOR TASK 6 HERE ...\nsp_returns = benchmark_data['S&P 500'].pct_change()\n\n# plot the daily returns\nsp_returns.plot()\nplt.show()\n\n\n# summarize the daily returns\nsp_returns.describe()","9b9a97f1":" # calculate the difference in daily returns\nexcess_returns = stock_returns.sub(sp_returns, axis=0)\n\n# plot the excess_returns\nexcess_returns.plot()\nplt.show()\n\n\n# summarize the excess_returns\nexcess_returns.describe()","f2e496d2":"# calculate the mean of excess_returns \n# ... YOUR CODE FOR TASK 8 HERE ...\navg_excess_return = excess_returns.mean()\n\n# plot avg_excess_returns\navg_excess_return.plot.bar()\nplt_title = 'Mean of the Return Difference'\nplt.show()\n","b945cdaa":"# calculate the standard deviations\nsd_excess_return = excess_returns.std()\n\n# plot the standard deviations\nsd_excess_return.plot()\nplt_title = 'Standard Deviation of the Return Difference'\nplt.show()","9631d17a":"# calculate the daily sharpe ratio\ndaily_sharpe_ratio = avg_excess_return.div(sd_excess_return)\n\n# annualize the sharpe ratio\nannual_factor = np.sqrt(252)\nannual_sharpe_ratio = daily_sharpe_ratio.mul(annual_factor)\n\n# plot the annualized sharpe ratio\nannual_sharpe_ratio.plot()\nplt_title = 'Annualized Sharpe Ratio: Stocks vs S&P 500'\nplt.show()","a2a9e641":"result = pd.merge(stock_data,benchmark_data, on = 'Date',how = 'left')\nresult.info()","d63bc325":"result = result.reset_index()","cb28687b":"result.info()","48e1df86":"result['Date'].min()","545b09c7":"result['Date'].max()","9ad3f3b9":"#Merging both data frames.\nresult = pd.merge(stock_data,benchmark_data, on = 'Date',how = 'left')\nresult","47dbee15":"result.info()\nresult = result.reset_index()","ff23792e":"plt.figure(figsize=(8,4))\nplt.plot(result['Date'],result['Amazon'],label='Amazon')\nplt.plot(result['Date'],result['Facebook'],label='Facebook')\nplt.plot(result['Date'],result['S&P 500'],label='S&P 500')\nplt.legend()\nplt.show()\n","6c73cf63":"plt.scatter(result['S&P 500'],result['Facebook'])\nplt.xlabel('S&P 500')\nplt.ylabel('Facebook')\nplt.show()","a612941d":"plt.scatter(result['S&P 500'],result['Amazon'])\nplt.xlabel('S&P 500')\nplt.ylabel('Amazon')\nplt.show()","431fbfeb":"from sklearn.linear_model import LinearRegression\nmodel_fb = LinearRegression()\nmodel_fb.fit(result[['S&P 500']],result['Facebook'])\n#Sklearn wants x value to be in 2D.","a0c42c30":"plt.scatter(result['S&P 500'],result['Facebook'])\nplt.plot(result[['S&P 500']],model_fb.predict(result[['S&P 500']]),c='r')\nplt.xlabel('S&P 500')\nplt.ylabel('Facebook')\nplt.show()","19dd3722":"from sklearn.linear_model import LinearRegression\nmodel_amazon = LinearRegression()\nmodel_amazon.fit(result[['S&P 500']],result['Amazon'])\n#Sklearn wants x value to be in 2D.","4d9adfc1":"plt.scatter(result['S&P 500'],result['Amazon'])\nplt.plot(result[['S&P 500']],model_amazon.predict(result[['S&P 500']]),c='r')\nplt.xlabel('S&P 500')\nplt.ylabel('Amazon')\nplt.show()","2f6c73dc":"maxValuesobj = stock_data.max()\nminValuesObj = stock_data.min()\n\nmaxValuesobj-minValuesObj","afb101cf":"df_am = result[['Date','Amazon']]\ndf_am","6f70862f":"df_am = df_am.rename(columns={'Date':'ds','Amazon':'y'})\ndf_am","c18f352c":"import fbprophet\nop = fbprophet.Prophet(changepoint_prior_scale=0.50)\nop.fit(df_am)","0e9e31d0":"forecast = op.make_future_dataframe(periods = 30,freq='D')\nforecast = op.predict(forecast)","9346eb46":"op.plot(forecast,xlabel='Date',ylabel='Amazon')\nplt.title('Amazon Stock Prediction');","8e2365dd":"df_fb = result[['Date','Facebook']]\ndf_fb","5f5b5a0c":"df_fb = df_fb.rename(columns={'Date':'ds','Facebook':'y'})\ndf_fb","9d7d419c":"import fbprophet\nop = fbprophet.Prophet(changepoint_prior_scale=0.50)\nop.fit(df_fb)","a4bd9c86":"forecast = op.make_future_dataframe(periods = 30,freq='D')\nforecast = op.predict(forecast)","00a98765":"op.plot(forecast,xlabel='Date',ylabel='Facebook')\nplt.title('Facebook Stock Prediction');","914e385a":"# 21. Forecasting The Share Price of Facebook.","749eb057":"# 13. Plotting Daily Share Prices and the S&P 500 Index for a Comparative View.","62c646cf":"# 1. Introduction\nAn investment may make sense if we expect it to return more money than it costs. But returns are only part of the story because they are risky - there may be a range of possible outcomes. We can compare different investments that may deliver similar results on average, but exhibit different levels of risks by using the Sharpe Ratio.\n\nWe will understand and use the Sharpe ratio to calculate which investment out of the stocks of the two tech giants Facebook and Amazon makes more sense to invest in. As a benchmark, we'll use the S&P 500 that measures the performance of the 500 largest stocks in the US.","d266f57f":"# 16. Using Linear Regression for S&P 500 V\/s Facebook - Best Fit Line.","e33114c0":"# 18. Inferences From Using Linear Regression.\n\nAfter applying linear regression to Facebook and Amazon V\/s S&P 500, we can conclude that the best fit line on the Amazon is steeper than the Best Fit Line of Facebook. This means that there is more comparative higher rise in share price of Amazon as compared to Facebook with the rise in S&P 500 Index. \n\nWe can confirm this result by the fact that Amazon has a weightage of 5% in S&P 500 V\/s Facebook's 2.4%. Amazon plays a larger role in the rise of S&P 500 Index.","021bed59":"# 5. Calculating Daily Stock Returns.\n\nOur data shows the historical value of each investment, not the returns. To calculate the returns, we need to calculate the percentage change in value from one day to the next. We'll also take a look at the summary statistics because these will become our inputs as we calculate the Sharpe Ratio.","7a637ed6":"# 6. Calculating Daily S&P Returns.","4cc98abd":"# 14. Scatter Plot for Comparing Facebook and S&P 500.","677f2c90":"# 9. Calculating Sharpe Ratio; (B) Standard Deviation of the Return Difference.\n\nWe will calculate the standard deviation of the excess_returns. This shows us the amount of risk an investment in the stocks implies, as compared to an investment in the S&P 500.","2319e9cc":"# 10. Calculating Sharpe Ratio; Final Step.\n\nNow we just need to compute the ratio of avg_excess_returns and sd_excess_returns. The result is now finally the Sharpe ratio and indicates how much more (or less) return the investment opportunity under consideration yields per unit of risk.\n\nThe Sharpe Ratio is often annualized by multiplying it by the square root of the number of periods. We have used daily data as input, so we'll use the square root of the number of trading days (5 days, 52 weeks, minus a few holidays): \u221a252","4960234c":"# 15. Scatter Plot for Comaparing Amazon and S&P 500.","f5f66d78":"# 12. Additional Exploration of Data.","d26a79ba":"# 17. Using Linear Regression for S&P 500 V\/s Amazon - Best Fit Line.","202987d3":"# 7. Calculating Excess Returns for Amazon and Facebook V\/s S&P 500.\n\n\nWe need to calculate the relative performance of stocks vs. the S&P 500 benchmark. This is calculated as the difference in returns between stock_returns and sp_returns for each day.","90cede81":"# 2. Overview of Data.\n","85ee8674":"(A) Starting Date of Data","482c6752":"# 8. Calculating Sharpe Ratio; (A) Average Difference in Daily Returns of Stocks V\/s S&P 500\n\n\nWe can now compute the Sharpe Ratio. First we need to calculate the average of the excess_returns. This tells us how much more or less the investment yields per day compared to the benchmark.","7d84af80":"# 11. Conclusion\n\nIn 2016, Amazon had a Sharpe ratio twice as high as Facebook. This means that an investment in Amazon returned twice as much compared to the S&P 500 for each unit of risk an investor would have assumed. In other words, in risk-adjusted terms, the investment in Amazon would have been more attractive.\n\nWhen faced with investment alternatives that offer both different returns and risks, the Sharpe Ratio helps to make a decision by adjusting the returns by the differences in risks and allows an investor to compare investment opportunities on equal terms, that is, on an 'apples-to-apples' basis.","1d457f60":"(B) Ending Date of Data","f487c03d":"# 19. Difference Between Min. and Max. Share Price of Amazon and Facebook from the Data.\n\nPurchasing 1 share of Amazon and Facebook at the lowest value and selling the share at the highest value of the given data will yeild the following net profit.","9209f194":"# 22. Conclusion on Share Price Predictions.\n\nUpon looking at the Share Price Predictions for the next 2 months ahead of 30\/12\/2016 and Looking at actual share prices of that time, we can conclude that the predictions are not close enough. The main reason being that we have not considered the Speculative Activities and Investor's Sentiments in the Market and hence the results are not accurate. ","c81d0429":"# 20. Forecasting The Share Price of Amazon.","3cab17aa":"# 3. Plotting and Summarizing Daily Prices of Amazon & Facebook","7a25bb2b":"# 4. Plotting and Summarizing Daily Values of S&P 500"}}