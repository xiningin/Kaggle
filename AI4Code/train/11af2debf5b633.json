{"cell_type":{"2a45ed38":"code","e32c8f7d":"code","9faf89da":"code","98a57b7b":"code","f8c1fd70":"code","1e759552":"code","5f786ae7":"code","27cdc42c":"code","f8784d3d":"code","58726a67":"code","f335a4e4":"code","7a174964":"code","52b4230a":"markdown","b819f533":"markdown","ff66c4c7":"markdown"},"source":{"2a45ed38":"from google.cloud import bigquery\nimport pandas as pd","e32c8f7d":"# Create a \"Client\" object\nclient = bigquery.Client()","9faf89da":"# Construct a reference to the \"hacker_news\" dataset\ndataset_ref = client.dataset(\"hacker_news\", project=\"bigquery-public-data\")\n\n# API request - fetch the dataset\ndataset = client.get_dataset(dataset_ref)","98a57b7b":"# List all the tables in the \"hacker_news\" dataset\ntables = list(client.list_tables(dataset))\n\n# Print names of all tables in the dataset (there are four!)\nfor table in tables:  \n    print(table.table_id)","f8c1fd70":"# Construct a reference to the \"full\" table\ntable_ref = dataset_ref.table(\"full\")\n\n# API request - fetch the table\ntable = client.get_table(table_ref)","1e759552":"# Print information on all the columns in the \"full\" table in the \"hacker_news\" dataset\ntable.schema\n\n","5f786ae7":"# Preview the first five lines of the \"full\" table\nsample_file=client.list_rows(table, max_results=20).to_dataframe()\nsample_file","27cdc42c":"sample_file.to_csv('twenty_entry.csv',encoding='utf-8', index=False)","f8784d3d":"# Preview the first five entries in the \"by\" column of the \"full\" table\nclient.list_rows(table, selected_fields=table.schema[:1], max_results=20).to_dataframe()","58726a67":"# link to all the BigQuery client commands\n# https:\/\/googleapis.github.io\/google-cloud-python\/latest\/bigquery\/reference.html","f335a4e4":"# Using WHERE reduces the amount of data scanned \/ quota used\nquery = \"\"\"\nSELECT title, time_ts\nFROM `bigquery-public-data.hacker_news.stories`\nWHERE REGEXP_CONTAINS(title, r\"(k|K)aggle\")\nORDER BY time\n\"\"\"\n\nquery_job = client.query(query)\n\niterator = query_job.result(timeout=30)\nrows = list(iterator)\n\n# Transform the rows into a nice pandas dataframe\nheadlines = pd.DataFrame(data=[list(x.values()) for x in rows], columns=list(rows[0].keys()))\n\n# Look at the first 10 headlines\nheadlines.head(10)","7a174964":"import wordcloud\nimport matplotlib.pyplot as plt\n\nwords = ' '.join(headlines.title).lower()\ncloud = wordcloud.WordCloud(background_color='black',\n                            max_font_size=200,\n                            width=1600,\n                            height=800,\n                            max_words=300,\n                            relative_scaling=.5).generate(words)\nplt.figure(figsize=(20,10))\nplt.axis('off')\nplt.savefig('kaggle-hackernews.png')\nplt.imshow(cloud)\nplt.show()","52b4230a":"### Reference : [Mentions of Kaggle on Hacker News](https:\/\/www.kaggle.com\/mrisdal\/mentions-of-kaggle-on-hacker-news)","b819f533":"###  Now let's create a word cloud","ff66c4c7":"### Mentions of Kaggle on Hacker News"}}