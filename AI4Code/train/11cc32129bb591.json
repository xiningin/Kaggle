{"cell_type":{"60bc1fb8":"code","1620d5fc":"code","63167e7b":"code","59f6fa58":"code","454a84b1":"code","68e68e23":"code","dcdba8c4":"code","f670e07b":"code","b9c5908e":"code","d8f1b4b7":"code","fdc888fc":"code","40436d4c":"code","d85e66f9":"code","a40ca4f6":"code","4f80e4cf":"code","60505175":"code","27e61ef2":"code","237a8fb4":"code","1fba37b4":"code","bbfa0d9f":"code","7821525f":"code","a64e71aa":"code","8fc36b47":"code","2ba7f347":"code","036d87eb":"code","5018172f":"code","0b10becc":"code","de6da439":"code","8bf76619":"code","d1fa33c2":"code","052d16c9":"code","6b437c6c":"code","e532a794":"code","914ea2ae":"code","49d67562":"code","dfe4a0cf":"code","4f7e7d58":"code","563e757d":"code","eec1e1d6":"code","a753f48e":"code","7a747381":"code","c8099adc":"code","ab238efe":"code","4432e671":"code","97e0480e":"code","91f8d104":"markdown","0dc8aded":"markdown","f0823695":"markdown","47a709e9":"markdown","9aebf41e":"markdown","913bf12c":"markdown","e7e9ad76":"markdown","35e56cc2":"markdown","f6512581":"markdown","1bb392a9":"markdown","1fc893ec":"markdown","26d4c3e5":"markdown","2f7902bc":"markdown","47d60437":"markdown","b8102eae":"markdown","db8ba78f":"markdown","28ab9c5b":"markdown","fed34841":"markdown","e636596f":"markdown","bc0598ad":"markdown","953a21e6":"markdown","5945a194":"markdown","33439c19":"markdown","a7b7bd7b":"markdown","5cf2a8ca":"markdown","79874b8f":"markdown","a8d8c3cc":"markdown"},"source":{"60bc1fb8":"import os\nimport numpy as np\nimport pandas as pd\nfrom IPython.display import Image\nfrom matplotlib import pyplot as plt","1620d5fc":"%matplotlib inline \npd.options.mode.chained_assignment = None  # default='warn'","63167e7b":"Image('http:\/\/cdn-static.denofgeek.com\/sites\/denofgeek\/files\/pokemon_4.jpg')","59f6fa58":"# prints current working directory full path\nos.getcwd()","454a84b1":"# reads csv file into \npoke = pd.read_csv('..\/input\/Pokemon.csv')","68e68e23":"# shows first  few rows of table\npoke.head()","dcdba8c4":"# data frame\ntype(poke)","f670e07b":"# series\ntype(poke['Name'])","b9c5908e":"# numpy array\ntype(poke['Name'].values)","d8f1b4b7":"# basic python\/numpy data type - str, int, float...\ntype(poke['Name'].values[0])","fdc888fc":"poke['Name'].head()","40436d4c":"len(poke)","d85e66f9":"len(poke) == len(poke['Name'])","a40ca4f6":"# general information about columns\npoke.info()","4f80e4cf":"# summary statistics of numeric columns\npoke.describe()","60505175":"# How many null values are there?\npoke.isnull().sum()","27e61ef2":"# How many legendary and common pokemon are there?\npoke['Legendary'].sum()","237a8fb4":"# boolean filtering\npoke[poke['Name'] == 'Pikachu']","1fba37b4":"# subsetting with .loc and .iloc\npoke[poke.loc[:,'Name'].isin(['Pikachu', 'Bulbasaur', 'Charmander', 'Squirtle'])]","bbfa0d9f":"# creating subset data frame\nimage_poke = poke[poke.loc[:,'Name'].isin(['Pikachu', 'Bulbasaur', 'Charmander', 'Squirtle'])]\nimage_poke","7821525f":"# how to make plot with pandas and what arguments to pass?\nimage_poke.plot??\n# two question marsk show full docstring that is present at documentation webpage for pandas.","a64e71aa":"# this draws it in a cell\n# barplot that compares attack of chosen pokemon \nimage_poke.plot.bar(x='Name', y='Attack', color=['green', 'red', 'blue', 'yellow'], title='Attack Comparison')","8fc36b47":"poke = poke.rename(columns={'#':'Number'})\npoke.columns","2ba7f347":"# Only common means non-legendary :)\nonly_common = poke[~poke['Legendary']]\nonly_common","036d87eb":"# Finish subset of DataFrame using condition so that only pokemon that don't have Mega in their name are selected (hint: ~)\nno_mega = poke[~poke['Name'].str.contains('Mega ')]\nno_mega.head()","5018172f":"# check if there is only 1 pokemon for every number\npoke['Number'].groupby(poke['Number']).count().sort_values(ascending=False)\n# we don't want to show so long output afterwards, so we can just add ';' behind the command not to show the output afterwards.","0b10becc":"# Finish the subset\nnodup_poke =  poke.drop_duplicates('Number', keep='first', inplace=False)\nnodup_poke.head()","de6da439":"# Reindex the dataframe, so the first index is 0 and the last is n-1\nnodup_poke.reset_index(inplace=True, drop=True)\nnodup_poke.head()","8bf76619":"# How many unique pokemon are there in the remaining dataset?\nlen(nodup_poke['Number'].unique())","d1fa33c2":"# Which pokemon type is the strongest and which the weakest on average? (according to total stats)\nstrongest_type_avg = nodup_poke[['Type 1','Total']].groupby(nodup_poke['Type 1']).mean().sort_values(by='Total', ascending=False)\nstrongest_type_avg","052d16c9":"# Find the strongest pokemon in each group based on Type 1 and order them alphabetically from A-Z.\n# Notice, this one has different logic - we do sorting first and only then group by and take the first observation for every group.\nstrongest_type_max = nodup_poke[['Total', 'Name', 'Type 1']].sort_values(\n                                by='Total', ascending=False).groupby('Type 1', as_index=False).first()\nstrongest_type_max ","6b437c6c":"# Which pokemon type is the most frequent?\ntype_frequency = nodup_poke['Type 1'].groupby(nodup_poke['Type 1']).count().sort_values(ascending=False)\n# fill in the rest, sort from largest to smallest\ntype_frequency","e532a794":"# What are the 5 strongest pokemon among the common pokemon?\ntop5_poke = nodup_poke[['Name', 'Total']].sort_values(by='Total', ascending=False)[0:5]\ntop5_poke","914ea2ae":"# Which pokemon generation has the biggest average total stats?\ngeneration_comparison = # generation and total columns. groupby column. aggregation function. sort function by value\ngeneration_comparison","49d67562":"# What type is pikachu?\npikachu_type = nodup_poke['Type 1'][nodup_poke['Name'] == 'Pikachu'].values[0]\npikachu_type","dfe4a0cf":"# How strong is Pikachu among pokemon of the same type? Hint: debugging\npikachu_rank = nodup_poke[nodup_poke['Type 1'] == pikachu_type].sort_values(by='Type 1')\npikachu_rank","4f7e7d58":"# reset index of table to start from 0 to n-1\npikachu_rank.reset_index(inplace=True)\npikachu_rank","563e757d":"# Create a histogram of all common pokemon's total stats\n# fill in missing .plot.hist(bins=15)\npoke['Total'].plot.hist(bins=15)","eec1e1d6":"import matplotlib.cm as cm  # these would normally be at the beginning of the notebook\n\n# colormaps https:\/\/matplotlib.org\/examples\/color\/colormaps_reference.html\ntype_colors = cm.spring(np.linspace(0.05,0.95,len(type_frequency)))\ntype_frequency.plot.bar(color=type_colors)","a753f48e":"# Create a boxplot of average total stats by type. Hint: use tables we created in previous step\nnodup_poke[nodup_poke['Type 1'].isin(['Bug', 'Water', 'Grass', 'Poison'])\n          ].boxplot(column='Total', by='Type 1')","7a747381":"# Create a boxplot of total stats by generation\n# fill in missing .boxplot(column='Total', by='Generation')","c8099adc":"# Create a barplot of total stats by generation\ngeneration_comparison['Generation'] = generation_comparison['Generation'].astype('str')\ngen_colors = cm.summer(np.linspace(0.05,0.95,len(generation_comparison)))\ngeneration_comparison.plot.bar(x='Generation',color=gen_colors, title='Comparison of avg total stats between pokemon generations')","ab238efe":"# Create a barplot of strongest pokemon in each Type 1. One color for all is fine.\n# fill in all :) ","4432e671":"# Show Pikachu's total stats among other pokemon of the same type together with generation of pokemon\npikachu_rank['color'] = 'Grey'\npikachu_rank['size'] = 30\npikachu_rank['color'][pikachu_rank['Name']=='Pikachu']='Yellow'\npikachu_rank['size'][pikachu_rank['Name']=='Pikachu']=100\npika_plot = pikachu_rank.plot.scatter(x='Generation', y='Total', \n                                      c=pikachu_rank['color'], s=pikachu_rank['size'],\n                          title='Pikachu vs other electric pokemon')","97e0480e":"fig = pika_plot.get_figure()\nfig.savefig('pika_plot.png')","91f8d104":"Try the same logic in the upcoming examples:","0dc8aded":"What happened in the previous line of code? Let's look:\n1. Choose a data frame subset based on what values you want to see in result -  **nodup_poke[['Type 1','Total']]**\n2. Choose a column you want the table to be grouped by. To group values means put all rows with the same value of selected column into one row. - **groupby(nodup_poke['Type 1'])**\n3. Now that we have many values in the same row, we need to transform them into one value with aggregation function. Typical examples are *count, average, sum, max* - **mean()**\n4. The last step is sorting the result based on values in descending order - **sort_values(by='Total', ascending=False)**","f0823695":"Renaming columns","47a709e9":"Now that we have desired and clean dataset, let's move to another step.","9aebf41e":"Removing mega wasn't enough. Let's consider all pokemon with same number as duplicates, drop them and keep only the first one.","913bf12c":"**Q: What is a DataFrame in pandas?**\n\nIt's a collection of Series (columns) with the same lenght that are made of numpy arrays.","e7e9ad76":"- Create a histogram of all common pokemon's total stats\n- Create a boxplot of total stats by type\n- Create a boxplot of total stats by generation\n- Create a barplot of total stats by generation\n- Show Pikachu's total stats among other pokemon of the same type together with generation of pokemon","35e56cc2":"## Summary\nThis notebook introduces basic operations that are done in the process of Data Analysis.\nIf you liked the format, look also at my Kickstarter kernel, which has more advanced stuff and more exercises in it :)","f6512581":"#### Slicing and filtering - Is there pikachu and what kind of pokemon is he? ","1bb392a9":"Q: Can you tell me how is the number calculated and if it is correct?","1fc893ec":"*Disclaimer*: This notebook was created as a part of **Data Analysis with pandas**, that I taught in Prague, September 2017.\nMy solutions are in notebook version 3, but try going through it by yourself at first :)","26d4c3e5":"### 5. Results visualization","2f7902bc":"**Group by** operation to aggregate data.","47d60437":"### 3. Clean data","b8102eae":"Save the plot as png file","db8ba78f":"Let's make some simple plot.","28ab9c5b":"What's in the dataset and how does it look like? In data exploration, we try to answer these questions.","fed34841":"### 4. Clean Data Processing","e636596f":"Subset of pokemon that are only common.","bc0598ad":"Can we work with the dataset as it is or do we need to do some adjustments? Filling\/removing null values, creating new columns with calculated values, deleting redundant columns, removing incomplete rows, creating relevant subsets of dataset, converting datatypes, renaming column names... These are all part of data cleaning step that is required before we can further analyze the data.","953a21e6":"In this step, we are ready to answer our questions with our dataset. In case we don't have any specific questions, we are doing just exploratory data analysis - looking what is inside the data.\n\nSo here are some questions:\n- Which pokemon type is the most frequent?\n- Which pokemon type is the strongest and which the weakest? (according to total stats)\n- What are the 5 strongest pokemon among the common pokemon?\n- Which pokemon generation has the biggest average total stats?\n- How strong is Pikachu among pokemon of the same type?","5945a194":"Subset of pokemon that don't contain 'Mega' in their name.","33439c19":"Pok\u00e9mon is a media franchise managed by The Pok\u00e9mon Company, a Japanese consortium between Nintendo, Game Freak, and Creatures. It now spans video games, trading card games, animated television shows and movies, comic books, and toys.","a7b7bd7b":"Given we have data ready on the disk, we can read it into pandas DataFrame, that is stored in python memory. But are we in the same directory? Let's check to be sure...","5cf2a8ca":"### 2. Explore dataset","79874b8f":"### 1. Read data into memory","a8d8c3cc":"# Data analysis with example dataset - fun with Pok\u00e9mon"}}