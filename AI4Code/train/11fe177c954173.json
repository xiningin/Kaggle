{"cell_type":{"9282a3aa":"code","f3809ced":"code","bae6b726":"code","378baa6d":"code","b8a710ed":"code","c9cd4e87":"code","118db0fa":"code","cf099829":"code","157bba6f":"code","33938fa3":"markdown"},"source":{"9282a3aa":"#https:\/\/www.kaggle.com\/gemartin\/load-data-reduce-memory-usage\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport umap\nimport matplotlib.pyplot as plt\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\npd.set_option('display.max_columns', 500)","f3809ced":"df_ratings=pd.read_csv('\/kaggle\/input\/top-personality-dataset\/2018_ratings.csv')\ndf_ratings['userid']=df_ratings['useri']\ndf_ratings.columns=df_ratings.columns.str.lstrip()#columns name contains empty spaces\ndf_ratings.head()","bae6b726":"df_ratings.info()","378baa6d":"df_per=pd.read_csv('\/kaggle\/input\/top-personality-dataset\/2018-personality-data.csv')\ndf_per.columns=df_per.columns.str.lstrip()#column names contains empty space\ndf_per.head()","b8a710ed":"df_per_melted=df_per.melt(id_vars=['userid', 'openness', 'agreeableness', 'emotional_stability',\n       'conscientiousness', 'extraversion', 'assigned metric',\n       'assigned condition', 'predicted_rating_1',\n       'predicted_rating_2', 'predicted_rating_3',\n       'predicted_rating_4', 'predicted_rating_5',\n       'predicted_rating_6',  'predicted_rating_7',\n       'predicted_rating_8', 'predicted_rating_9',\n       'predicted_rating_10', 'predicted_rating_11',\n       'predicted_rating_12', 'is_personalized',\n       'enjoy_watching '], \n        value_vars=['movie_1',  'movie_2', 'movie_3', 'movie_4', 'movie_5','movie_6',\n                 'movie_6', 'movie_7', 'movie_8', 'movie_9', 'movie_10', 'movie_11', 'movie_12'],\n        var_name='movie_id', value_name=\"rates\")\ndf_per_melted['movie_id']=df_per_melted['movie_id'].str.replace('movie_', '')\ndf_per_melted['movie_id']=pd.to_numeric(df_per_melted['movie_id'])\ndf_per_melted.head()","c9cd4e87":"df=pd.merge(df_ratings, df_per_melted, on=['userid', 'movie_id'])\ndf.head()","118db0fa":"df_num = df.select_dtypes(include=[np.float, np.int])\ndf_num","cf099829":"#https:\/\/github.com\/lmcinnes\/umap\/blob\/master\/notebooks\/UMAP%20usage%20and%20parameters.ipynb\ndef draw_umap(n_neighbors=3, min_dist=0.1, n_components=2, metric='euclidean', title=''):\n    fit = umap.UMAP(\n        n_neighbors=n_neighbors,\n        min_dist=min_dist,\n        n_components=n_components,\n        metric=metric\n    )\n    u = fit.fit_transform(df_num);\n    fig = plt.figure()\n    if n_components == 1:\n        ax = fig.add_subplot(111)\n        ax.scatter(u[:,0], range(len(u)), c=u[:,0])\n    if n_components == 2:\n        ax = fig.add_subplot(111)\n        ax.scatter(u[:,0], u[:,1], c=u[:,0])\n    if n_components == 3:\n        ax = fig.add_subplot(111, projection='3d')\n        ax.scatter(u[:,0], u[:,1], u[:,2], c=u[:,0])\n    plt.title(title, fontsize=18)\nfor n in (2, 5, 10, 20, 50, 100, 200):\n    draw_umap(n_neighbors=n, title='n_neighbors = {}'.format(n))","157bba6f":"for d in (0.0, 0.1, 0.25, 0.5, 0.8, 0.99):\n    draw_umap(min_dist=d, title='min_dist = {}'.format(d))","33938fa3":"#clustering experiments for numeric columns with umap."}}