{"cell_type":{"1d881248":"code","37d0b78c":"code","7311ce6f":"code","71c27766":"code","40b3353c":"code","4b2178fb":"code","c42b63c1":"code","aba57871":"code","b5ca0e89":"code","644afffd":"code","de574284":"code","2f043b4b":"code","2ab749ef":"code","5ce6771c":"code","7c6db7dc":"code","93b0b18b":"code","258f2b7b":"code","2369f2f8":"code","ee31f564":"code","c8f20ccb":"code","6d85e79d":"code","cd7e6d0c":"code","159b67b4":"code","f643c319":"code","55dffc11":"code","fe1b2a70":"markdown","83503b6b":"markdown","424be8a5":"markdown","1397d344":"markdown","cac979fb":"markdown","be0c3965":"markdown","7df88eec":"markdown"},"source":{"1d881248":"# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","37d0b78c":"#import required libraries\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport re\nimport string\nimport math\nimport spacy\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom wordcloud import WordCloud\nfrom textwrap import wrap\nfrom textblob import TextBlob\n","7311ce6f":"pip install textstat","71c27766":"import textstat","40b3353c":"# load dataset\n\ntext=pd.read_csv('\/kaggle\/input\/turkishreviews\/hb.csv')\ntext.shape\ntext[\"Rating\"] = -1","4b2178fb":"text.head()","c42b63c1":"#Select required features for analysis from the 4 given columns.\n\ntext.columns","aba57871":"#Select the the 4 key columns, product url, review content, users if they recommend the product\ntextdata = text[['URL','Review','Rating','Rating (Star)']]\ntextdata.head()","b5ca0e89":"#Drop null values\ntextdata.dropna(inplace=True)\ntextdata.isna().sum()","644afffd":"textcopy=textdata.copy()\n","de574284":"#Filter products based on number of reviews\n\ntextdata=textdata.groupby(['URL']).filter(lambda x: len(x)>300).reset_index(drop=True)\nprint('Number of products matching the criteria is ',len(textdata['URL'].unique()))","2f043b4b":"#convert datatype boolean and float to int\ntextdata['Rating']=textdata['Rating (Star)'].astype(int)","2ab749ef":"\n\ntextdata['URL'].unique()\ntextdata['URL']=textdata['URL'].apply(lambda x: x.split(',,,')[0])","5ce6771c":"#Explore and clean the review text\n\nfor text in enumerate(textdata['Review'][20:30]):\n  print('Review:\\n',text)","7c6db7dc":"# While developing NLP models capital and lowercase letters are treated differently so its required to convert all words to lowercase, as few words are in capitals in the review text.\n\ntextdata['Review']=textdata['Review'].apply(lambda x: x.lower())","93b0b18b":"# Eliminate digits in the text using regular expressions\n\ntextdata['Review']=textdata['Review'].apply(lambda x: re.sub('\\w*\\d\\w*','', x))","258f2b7b":"#Eliminate punctuaitons\n\ntextdata['Review']=textdata['Review'].apply(lambda x: re.sub('[%s]' % re.escape(string.punctuation), '', x))","2369f2f8":"product_review_count=textdata.groupby(['Rating']).agg(['mean', 'count'])\nproduct_review_count.head()\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nax.bar(product_review_count[\"Rating (Star)\"][\"mean\"], product_review_count[\"Rating (Star)\"][\"count\"])\nplt.show()","ee31f564":"!python -m spacy download xx_ent_wiki_sm\n!python -m spacy link xx_ent_wiki_sm xx_model","c8f20ccb":"# use spacy module\nfrom spacy.lang.tr import Turkish\nnlp = Turkish()\nnlp.max_length = 199386400\n\nstop_word_list=pd.read_csv('\/kaggle\/input\/stopwords\/stopwords.csv')\nprint(stop_word_list)\n\nspacy_stopwords = spacy.lang.tr.stop_words.STOP_WORDS\n\nfor w in stop_word_list['Words']:\n    spacy_stopwords.add(w)\n  \nprint('Number of stop words: %d' % len(spacy_stopwords))\nprint('First ten stop words: %s' % list(spacy_stopwords)[:10])\n\ntext = \"Pekala, bu nedenle s\u00fcper bir \u00fcr\u00fcn.\"\ndoc = nlp(text)\ntokens = [token.text for token in doc if not token.is_stop]\n\nprint('Original Article: %s' % (text))\nprint()\nprint(tokens)\n#tokens_without_sw= [word for word in text_tokens if not word in all_stopwords]\n\n#print(tokens_without_sw)","6d85e79d":"\n# stopwords removal and lemmatization\ntextdata['Review']=textdata['Review'].apply(lambda x: ' '.join([token.lemma_ for token in list(nlp(x)) if (token.is_stop==False)]))\n\ntextdata=textdata[['Rating (Star)','Review']].groupby(by='Rating (Star)').agg(lambda x:' '.join(x))\ntextdata.head()","cd7e6d0c":"#Generate document term matrix to find most occuring terms in the reviews\n\ncv=CountVectorizer(analyzer='word')\ndata=cv.fit_transform(textdata['Review'])\ntext_dtm = pd.DataFrame(data.toarray(), columns=cv.get_feature_names())\ntext_dtm.index=textdata.index\ntext_dtm.head()","159b67b4":"def wordcloud(data,title):\n  title = str(title)\n  wc = WordCloud(width=600, height=530, max_words=150,colormap=\"Dark2\").generate_from_frequencies(data)\n  plt.figure(figsize=(10,8))\n  plt.imshow(wc, interpolation='bilinear')\n  plt.axis(\"off\")\n  plt.title(('Rating: ' + title),fontsize=13)\n  plt.show()\n  \ntext_dtm=text_dtm.transpose()\n\nfor index,product in enumerate(text_dtm.columns):\n  wordcloud(text_dtm[product].sort_values(ascending=False),product)\n \n","f643c319":"#Polarity in sentiment analysis refers to identifying sentiment orientation (positive, neutral, and negative) in written or spoken language.\n\ntextdata['emotion']=textdata['Review'].apply(lambda x:TextBlob(x).sentiment.polarity)","55dffc11":"product_polarity=pd.DataFrame(textdata.groupby('Rating (Star)')['emotion'].mean().sort_values(ascending=True))\n\nplt.figure(figsize=(16,12))\nplt.xlabel('Emotion')\nplt.ylabel('Products')\nplt.title('Polarity of Product Reviews')\npolarity_graph=plt.barh(np.arange(len(product_polarity.index)),product_polarity['emotion'],color='blue')\n\n\nfor bar,product in zip(polarity_graph,product_polarity.index):\n  plt.text(0.005,bar.get_y()+bar.get_width(),'{}'.format(product),va='center',fontsize=11,color='white')\n\nfor bar,polarity in zip(polarity_graph,product_polarity['emotion']):\n  plt.text(bar.get_width()+0.001,bar.get_y()+bar.get_width(),'%.3f'%polarity,va='center',fontsize=11,color='black')\n  \nplt.yticks([])\nplt.show()","fe1b2a70":"**SpaCy yorumlarda yer alan en \u00e7ok kelimeleri tespit etmek i\u00e7in kullan\u0131lmaktad\u0131r. **","83503b6b":"**Yukar\u0131da g\u00f6rd\u00fc\u011f\u00fcm\u00fcz grafikte y\u00fcksek oy verenlerin daha fazla yorum yapt\u0131\u011f\u0131 g\u00f6zlemlenmi\u015ftir. Hipotez olarak; olumlu oy verenlerin sistem i\u00e7erisinde fazla yorum yapmaya dahil oldu\u011funu s\u00f6yleyebiliriz.**","424be8a5":"# \u00dcr\u00fcnlerin genel olarak olumlu olumsuz tahminlemesini ger\u00e7ekle\u015ftirmeden \u00f6nce, veri seti \u00fczerinde metinsel veri analizinin ger\u00e7ekle\u015ftirilmesini kapsamaktad\u0131r.","1397d344":"**Burada rating olarak 4 ve 3 sahip iyi geri bildirim al\u0131rken, \u00e7ubuk grafikte g\u00f6sterilen son k\u0131s\u0131m (1 ve 2) daha az derecelendirmesine sahip. Bu, kullan\u0131c\u0131 incelemeleri arac\u0131l\u0131\u011f\u0131yla \u00fcr\u00fcnlerin pop\u00fclerli\u011fini anlamaya yard\u0131mc\u0131 olmaktad\u0131r.**","cac979fb":"Veri seti olarak Hepsiburada 'n\u0131n \u00fcr\u00fcn yorum ve de\u011ferlendirme bilgileri kullan\u0131lmaktad\u0131r.","be0c3965":"**Kelime bulutu, incelemelerde en s\u0131k g\u00f6r\u00fclen terimleri h\u0131zl\u0131 bir \u015fekilde anlaman\u0131za ve g\u00f6rselle\u015ftirmenize yard\u0131mc\u0131 olmaktad\u0131r.","7df88eec":"# Veri \u00d6n \u0130\u015fleme"}}