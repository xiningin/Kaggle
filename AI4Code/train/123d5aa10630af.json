{"cell_type":{"8337aa4b":"code","fd132e8a":"code","7decb729":"code","46baa116":"code","5c2e2fe9":"code","ad4ac979":"code","f373dbd6":"code","dc43ccaf":"code","5e5b6b5c":"code","5eccf350":"code","e4256720":"code","c3d14781":"code","bc52f689":"code","a73e7a40":"code","3b851411":"code","71fd242e":"code","cdb4442a":"code","a08e4344":"code","82157315":"code","ffa78410":"code","7372b758":"code","4d75de6f":"code","736143ad":"code","8b890a76":"code","5bfead03":"code","d1c0d892":"code","c210ea6d":"code","cfd7b4e9":"code","bb8f0664":"code","3c878670":"code","5bbe68df":"markdown","27841c73":"markdown","9be30421":"markdown","01cf9bee":"markdown","5c2fc237":"markdown","239f0285":"markdown","dbfc38de":"markdown","f27652b9":"markdown","4c60e9ff":"markdown","13ff3661":"markdown","ee49b657":"markdown","1fc1437a":"markdown","5273d637":"markdown","52a2cb4b":"markdown","2839eea8":"markdown"},"source":{"8337aa4b":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport warnings\nfrom mlxtend.plotting import plot_confusion_matrix\nfrom plotly.offline import plot, iplot, init_notebook_mode\nimport plotly.graph_objs as go\nfrom plotly.subplots import make_subplots\nimport plotly.express as px\ninit_notebook_mode(connected=True)\nwarnings.filterwarnings(\"ignore\")\n%matplotlib inline\nimport datetime as dt","fd132e8a":"df = pd.read_csv('..\/input\/black-friday-sales-prediction\/train_oSwQCTC (1)\/train.csv')\ndf","7decb729":"df.head()","46baa116":"df.shape","5c2e2fe9":"print(\"Info del dataset: \",df.info())","ad4ac979":"df.isnull().sum()","f373dbd6":"df.dtypes","dc43ccaf":"for columna in df.columns.values:\n    print(\"## Analyzing column\", columna)\n    print(df[columna].value_counts())\n    print(\"Nulos:\", df[columna].isnull().sum())\n    print()\n    print()","5e5b6b5c":"df.describe()","5eccf350":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Age'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","e4256720":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Marital_Status'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","c3d14781":"plt.figure(figsize=(10, 6))\nplt.hist(df['City_Category'], stacked=True, bins=40, alpha=0.5)  \nplt.xlabel('$')\nplt.ylabel('Frequency')\nplt.title('Histograma');","bc52f689":"import plotly.express as px\n\nfig = px.sunburst(df,path=['City_Category'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","a73e7a40":"fig = px.sunburst(df,path=['Stay_In_Current_City_Years'],\n                           values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","3b851411":"fig = px.sunburst(df,path=['Stay_In_Current_City_Years', 'City_Category'],\n                           values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","71fd242e":"fig = px.density_heatmap(df, x=\"City_Category\", y=\"Purchase\", nbinsx=20, nbinsy=20, color_continuous_scale=\"Viridis\")\nfig.show()","cdb4442a":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Marital_Status', 'City_Category'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","a08e4344":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Age', 'Gender'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","82157315":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Age','City_Category'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","ffa78410":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Occupation'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","7372b758":"import plotly.express as px\n\nfig = px.sunburst(df,path=['Age', 'Marital_Status'],\n                 values='Purchase',color='Purchase',)\nfig.update_layout(height=1000,title_text='An\u00e1lisis')\nfig.show()","4d75de6f":"pd.DataFrame(df.groupby('Age')['Purchase'].max())","736143ad":"pd.DataFrame(df.groupby('Gender')['Purchase'].max())","8b890a76":"pd.DataFrame(df.groupby('Occupation')['Purchase'].max())","5bfead03":"df_occ_1 = df.loc[(df.Occupation == 1), ['Occupation','Purchase'], ]\ndf_occ_1","d1c0d892":"fig = px.histogram(df_occ_1, x='Purchase')\nfig.show()","c210ea6d":"df_occ_1 = df.loc[(df.Occupation == 1), ['Purchase'], ]\ndf_occ_2 = df.loc[(df.Occupation == 2), ['Purchase'], ]\ndf_occ_3 = df.loc[(df.Occupation == 3), ['Purchase'], ]\ndf_occ_4 = df.loc[(df.Occupation == 4), ['Purchase'], ]\ndf_occ_5 = df.loc[(df.Occupation == 5), ['Purchase'], ]\ndf_occ_6 = df.loc[(df.Occupation == 6), ['Purchase'], ]\ndf_occ_7 = df.loc[(df.Occupation == 7), ['Purchase'], ]\ndf_occ_8 = df.loc[(df.Occupation == 8), ['Purchase'], ]\ndf_occ_9 = df.loc[(df.Occupation == 9), ['Purchase'], ]\ndf_occ_10 = df.loc[(df.Occupation == 10), ['Purchase'], ]\ndf_occ_11 = df.loc[(df.Occupation == 11), ['Purchase'], ]\ndf_occ_12 = df.loc[(df.Occupation == 12), ['Purchase'], ]\ndf_occ_13 = df.loc[(df.Occupation == 13), ['Purchase'], ]\ndf_occ_14 = df.loc[(df.Occupation == 14), ['Purchase'], ]\ndf_occ_15 = df.loc[(df.Occupation == 15), ['Purchase'], ]\ndf_occ_16 = df.loc[(df.Occupation == 16), ['Purchase'], ]\ndf_occ_17 = df.loc[(df.Occupation == 17), ['Purchase'], ]\ndf_occ_18 = df.loc[(df.Occupation == 18), ['Purchase'], ]\ndf_occ_19 = df.loc[(df.Occupation == 19), ['Purchase'], ]\ndf_occ_20 = df.loc[(df.Occupation == 20), ['Purchase'], ]\ndf_occ_1.reset_index(drop=True, inplace=True)\ndf_occ_2.reset_index(drop=True, inplace=True)\ndf_occ_3.reset_index(drop=True, inplace=True)\ndf_occ_4.reset_index(drop=True, inplace=True)\ndf_occ_5.reset_index(drop=True, inplace=True)\ndf_occ_6.reset_index(drop=True, inplace=True)\ndf_occ_7.reset_index(drop=True, inplace=True)\ndf_occ_8.reset_index(drop=True, inplace=True)\ndf_occ_9.reset_index(drop=True, inplace=True)\ndf_occ_10.reset_index(drop=True, inplace=True)\ndf_occ_11.reset_index(drop=True, inplace=True)\ndf_occ_12.reset_index(drop=True, inplace=True)\ndf_occ_13.reset_index(drop=True, inplace=True)\ndf_occ_14.reset_index(drop=True, inplace=True)\ndf_occ_15.reset_index(drop=True, inplace=True)\ndf_occ_16.reset_index(drop=True, inplace=True)\ndf_occ_17.reset_index(drop=True, inplace=True)\ndf_occ_18.reset_index(drop=True, inplace=True)\ndf_occ_19.reset_index(drop=True, inplace=True)\ndf_occ_20.reset_index(drop=True, inplace=True)\ndf_occ_20","cfd7b4e9":"df_occ_1","bb8f0664":"df_occ_2","3c878670":"fig = go.Figure()\nfig.add_trace(go.Histogram(x= df_occ_1['Purchase'], name='Occupation 1'))\nfig.add_trace(go.Histogram(x= df_occ_2['Purchase'], name='Occupation 2'))\nfig.add_trace(go.Histogram(x= df_occ_3['Purchase'], name='Occupation 3'))\nfig.add_trace(go.Histogram(x= df_occ_4['Purchase'], name='Occupation 4'))\nfig.add_trace(go.Histogram(x= df_occ_5['Purchase'], name='Occupation 5'))\nfig.add_trace(go.Histogram(x= df_occ_6['Purchase'], name='Occupation 6'))\nfig.add_trace(go.Histogram(x= df_occ_7['Purchase'], name='Occupation 7'))\nfig.add_trace(go.Histogram(x= df_occ_8['Purchase'], name='Occupation 8'))\nfig.add_trace(go.Histogram(x= df_occ_9['Purchase'], name='Occupation 9'))\nfig.add_trace(go.Histogram(x= df_occ_10['Purchase'], name='Occupation 10'))\nfig.add_trace(go.Histogram(x= df_occ_11['Purchase'], name='Occupation 11'))\nfig.add_trace(go.Histogram(x= df_occ_12['Purchase'], name='Occupation 12'))\nfig.add_trace(go.Histogram(x= df_occ_13['Purchase'], name='Occupation 13', marker_color='#4f3288'))\nfig.add_trace(go.Histogram(x= df_occ_14['Purchase'], name='Occupation 14', marker_color='#869b4e'))\nfig.add_trace(go.Histogram(x= df_occ_15['Purchase'], name='Occupation 15', marker_color='#00a29a'))\nfig.add_trace(go.Histogram(x= df_occ_16['Purchase'], name='Occupation 16', marker_color='#9c6c1c'))\nfig.add_trace(go.Histogram(x= df_occ_17['Purchase'], name='Occupation 17', marker_color='#3ab502'))\nfig.add_trace(go.Histogram(x= df_occ_18['Purchase'], name='Occupation 18', marker_color='#7d1c3a'))\nfig.add_trace(go.Histogram(x= df_occ_19['Purchase'], name='Occupation 19', marker_color='#8d578c'))\nfig.add_trace(go.Histogram(x= df_occ_20['Purchase'], name='Occupation 20', marker_color='#1069a7'))\n\n\nfig.update_layout(\n    title_text='Occupations vs Purchase', # title of plot\n    xaxis_title_text='Purchase', # xaxis label\n    yaxis_title_text='Count', # yaxis label\n    barmode='overlay'\n)\n# Reduce opacity to see both histograms\nfig.update_traces(opacity=0.9)\nfig.show()","5bbe68df":"Despu\u00e9s de hacer un an\u00e1lisis r\u00e1pido de los gastos de acuerdo a la ocupaci\u00f3n de forma m\u00e1s profunda, se encontr\u00f3 que en todas las ocupaciones hay individuos en pr\u00e1cticamente todos los rangos de compra. Lo que var\u00eda son las cantidades en algunos rangos, el volumen y su distribuci\u00f3n.","27841c73":"Los highlights importantes fueron:\n- Si se quiere hacer una estrategia de Marketing, no hay que desechar el alcanzar a la mayor\u00eda de los rangos de edad (solo poniendo a un lado los de 0-17 y +55) ya que hay gente con importante poder adquisitivo distribuidos entre ellos.\n- La city category va totalmente correlacionado con el nivel de gastos de los usuarios siendo \"C\" el m\u00e1s alto y \"A\" el m\u00e1s bajo.\n- La mayor\u00eda de usuarios de la base pertenecen a la categor\u00eda \"B\".\n- Si se quiere hacer una estrategia de Marketing, no hay que desechar el alcanzar a todas las ocupaciones ya que en todos hay gente con importante poder adquisitivo. En especial habr\u00eda que resaltar ciertas ocupaciones donde se concentra mayor nivel de compras: el 17, 12 y 15.\n- El grupo con mayor nivel de gasto son los hombres en el rango de 51-55 a\u00f1os.\n- A partir del rango de edad de 55 a\u00f1os baja bastante las compras por lo que es importante dar seguimiento del porque ese grupo cambia tan repentinamente sus h\u00e1bitos o si es algo generacional.\n- Los usuarios no casados del rango de edad +55 son los que cuentan con mayor n\u00famero de compras mayores superando hasta otros rangos, pero cuando estan casados ese n\u00famero baja dr\u00e1sticamente. En comparaci\u00f3n con el rango 51-55 se ve que tanto casados como no casados tienen un gran n\u00famero de este tipo de compras.\n- La categor\u00eda \"C\" de ciudad es un indicador robusto e independiente en pr\u00e1cticamente todas las comparaciones con las distintas categorias, indicando una fuerta cantidad de compras mayores.","9be30421":"Practicamente en todas las ocupaciones hay individuos que llegan a gastar cantidades cercanas a las m\u00e1ximas dentro del dataframe en general. Lo que notamos es que la frecuencia y gasto varia por ocupaci\u00f3n. Esto es importante para no dejar a fuera a personas en base a su ocupaci\u00f3n para una estrategia de ventas.","01cf9bee":"Vemos que apesar de que anteriormente vimos que el rango de edad 51-55 era el de mayor poder adquisitivo, los rangos de edad tienen usuarios que pertenecen a la categor\u00eda \"C\" de City Category distribuidos entre ellos. Estos usuarios siguen teniendo un importante poder adquisitivo pero sin embargo varian en volumen y en menos medida en la cantidad de gasto.","5c2fc237":"Vemos que el grupo con mayor n\u00famero de compras mayores son los que tienen 2 a\u00f1os pero menos de 3 y 4 a\u00f1os","239f0285":"El rango de edad que tiene el mayor n\u00famero de compras mayores registradas son los de 51-55 a\u00f1os.","dbfc38de":"Vemos que la base tiene bien distribuida las categor\u00edas de ciudades entre las poblaciones existentes por las cantidad de a\u00f1os en la ciudad","f27652b9":"Vemos que la mayor cantidad de usuario pertenecen a la categor\u00eda B de City category.","4c60e9ff":"Los no casados tienen la mayor cantidad de compras mayores.","13ff3661":"Vemos que dependiendo de la categor\u00eda a la que pertenecen los usuarios, el poder adquisitivo cambia significativamente, siento la categor\u00eda \"C\" la que realiz\u00f3 m\u00e1s compras.","ee49b657":"#For this analysis we chosed the training set of the database located in: https:\/\/www.kaggle.com\/cerolacia\/black-friday-sales-prediction #This analysis has an educational purpose and the objective is to try to get the most insights as possible.","1fc1437a":"Notamos un contraste muy llamativo en el grupo de +55 al comparar los que est\u00e1n casados con los que no, denotando que los no casados si alcanzan gastos cercanos al mayor. Otra observaci\u00f3n es que en el grupo de 51-55 siguen muy cercanos al m\u00e1ximo sin afectar mucho si estan casados o no.","5273d637":"El grupo por edad que m\u00e1s gasta son hombres de 51-55. Las mujeres del rango de edad 18-25 son las que menos gastan.","52a2cb4b":"Deducimos que las ocupaciones 17, 12 y 15 son las que m\u00e1s gastan y que en contraste la ocupaci\u00f3n 9 es la \u00fanica en el rangos de los azules.","2839eea8":"Analysis of Black Friday Sales prediction Database"}}