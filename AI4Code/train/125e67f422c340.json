{"cell_type":{"344973d0":"code","26109fac":"code","15e23c54":"code","51c78411":"code","d1779222":"code","c18c82e2":"code","6dda3339":"code","9964bd10":"code","96207287":"code","def8211b":"markdown","21d68099":"markdown","a4215255":"markdown","f5974806":"markdown","a939baa6":"markdown","8322ae5d":"markdown","3bf37b5f":"markdown","a28447e3":"markdown","e01c2c9a":"markdown","ea3d9e9a":"markdown","5ab35de4":"markdown","0b16626f":"markdown","83a2b9b1":"markdown","146210fe":"markdown"},"source":{"344973d0":"#For our Image\nfrom IPython.display import Image\nfrom IPython.core.display import HTML \n\nImage(url= \"https:\/\/media1.s-nbcnews.com\/j\/newscms\/2019_35\/2985041\/190826-amazon-brazil-fire-cs-834a_eef05addd0d4dc77d766710fa90413d8.fit-760w.jpg\", width=950, height=900)","26109fac":"# Loading our packages\nimport pandas as pd\nimport matplotlib.pyplot as plt #For our beautiful plots!\nimport seaborn as sns\nimport matplotlib.dates as mdates\nimport matplotlib.ticker as ticker\nimport warnings\nimport numpy as np","15e23c54":"# Gathering our data\nfires_mo = pd.read_excel('..\/input\/inpe-queimadas\/fires_mo.xlsx')","51c78411":"fires_mo","d1779222":"#Treating the data\n\n#\n#Getting from 1999 to the front\nfires_mo_c = fires_mo.iloc[1:,:13]\n\n#Removing 3 last rows\nfires_mo_c = fires_mo_c.iloc[:21]\n\ntime = fires_mo_c.Ano.loc[0:21]\nmonths = []\n\nfor i in range(fires_mo_c.iloc[:,1:].shape[0]):\n    months += [fires_mo_c.iloc[i,1:]]    \n\n#Concatenating the lists    \nlong_ts = pd.DataFrame(pd.concat(months, axis=0))\n\n\n#Generating the dates again\nlong_ts = long_ts.set_index(pd.date_range('1999-01','2019-12',freq='MS').strftime(\"%Y-%b\"))\nlong_ts.columns = ['Fires']\n\n#Dealing with non-existing values in series\nlong_ts[long_ts.Fires=='-']=0\n\n\n#Turning into numerical    \nlong_ts = long_ts.astype(int)\n\n#Eliminating two last zeros and october because it hasn't ended yet\nlong_ts = long_ts[:-3]\n\n    \n# Building the timeseries\nfig, ax = plt.subplots(figsize=(20, 10))\nax.plot(long_ts.index,\n        long_ts['Fires'],\n        color='purple')\nax.xaxis.set_major_locator(ticker.MultipleLocator(24))\n\n\n","c18c82e2":"\n#Ignore it, please\nwarnings.simplefilter('ignore')\n\n# #Importing some R functions, I didn't find some cool TS treatment ones in python\n# import rpy2.robjects as robjects\n\n# # import rpy2's package module\n# import rpy2.robjects.packages as rpackages\n\n# # R vector of strings\n# from rpy2.robjects.vectors import StrVector\n\n# package_names = ('base', 'seasonal', 'stats')\n# if all(rpackages.isinstalled(x) for x in package_names):\n#     have_package = True\n# else:\n#     have_package = False    \n# if not have_package:    \n#     utils = rpackages.importr('utils')\n#     utils.chooseCRANmirror(ind=1)    \n#     packnames_to_install = [x for x in package_names if not rpackages.isinstalled(x)]\n#     if len(packnames_to_install) > 0:\n#         utils.install_packages(StrVector(packnames_to_install))\n\n# base = rpackages.importr('base')\n# seasonal = rpackages.importr('seasonal')\n# stats = rpackages.importr('stats')\n\n# from rpy2.robjects import pandas2ri\n\n# pandas2ri.activate()\n\n# r_dataframe = pandas2ri.py2ri(long_ts.Fires)\n\n# fires_ts_r = stats.ts(r_dataframe, start=2003, freq=12)\n\n# fires_des_r = seasonal.final(seasonal.seas(fires_ts_r))\n\n# import rpy2.robjects as ro\n\n# fires_des_r_df = ro.DataFrame(base.list(fires_des_r))\n\n# fires_des_pd_df = pandas2ri.ri2py(fires_des_r_df)\n\n# #Plot it in python\n\n# #Making the ts\n# fires_des_ts = pd.concat([fires_des_pd_df,pd.DataFrame(long_ts.index)], axis=1)\n# fires_des_ts.columns = ['des','tim']\n\n\nfires_des_ts = pd.read_excel('..\/input\/treated-inpe-series\/fires_des_ts.xlsx')\n\n\n# Building the timeseries\nfig, ax = plt.subplots(figsize=(20, 10))\nax.plot(fires_des_ts['tim'],\n        fires_des_ts['des'],\n        color='purple')\nax.xaxis.set_major_locator(ticker.MultipleLocator(24))\n","6dda3339":"#Ignore it, please\nwarnings.simplefilter('ignore')\n\n\n#Getting from 1999 to 2019 total fires outbreaks\nfires_mo_tot = pd.DataFrame(fires_mo.Total[1:22])\n\n#Setting the index\nfires_mo_tot = fires_mo_tot.set_index(time)\n\n# Plotting timeseries\nfig, ax = plt.subplots(figsize=(20, 10))\nax.plot(fires_mo_tot.index.astype(int),\n        fires_mo_tot['Total'],\n        color='purple')\nax.xaxis.set_major_locator(ticker.MultipleLocator(2))\n","9964bd10":"\n\n#plotting the max, mean and minimum\n\nfires_stats = np.transpose(fires_mo.iloc[-3:,1:13]).astype('int')\nfires_stats.columns = ['Maximum', 'Mean', 'Minimum']\n\n#Generating timestamps\nfires_stats = fires_stats.set_index(pd.date_range('1999-01','1999-12',freq='MS').strftime(\"%b\"))\n\n\nfig, ax = plt.subplots(figsize=(20, 10))\nax.plot(fires_stats.index,\n        fires_stats['Maximum'],\n        fires_stats.index,\n        fires_stats['Mean'],\n        fires_stats.index,\n        fires_stats['Minimum'], label='sine')\nax.legend(('Maximum','Mean', 'Minimum'))\n\n","96207287":"#How does the 2019 outbreaks are doing compared to the other years?\n\nfires_comps = np.transpose(fires_mo.iloc[2:23,1:11]).astype('int')\nfires_comps.columns = fires_mo.iloc[2:23,0]\n\n\nlist_comps = []\n#Looping to see the compared years with 2019\nfor i in range(fires_comps.shape[1]):\n    list_comps += [round((fires_comps.iloc[:,20]\/fires_comps.iloc[:,i])*100,2)]\n    \ndf_comps = pd.concat(list_comps, axis=1)\ndf_comps.columns = fires_mo.iloc[2:23,0]\n\n#Generating timestamps\ndf_comps = df_comps.set_index(pd.date_range('1999-01','1999-10',freq='MS').strftime(\"%b\")).iloc[:,:-1]\n\ndf_comps","def8211b":"Now it looks better, the increase from 2002 to 2004 is huge! From that high spike on time, it seems that it's going down through time since than.\n\nBut one thing is looking clearer, the 2019 year is being higher than the previous years! Maybe if we take a look at the total values of burning outbreaks this tendency can be easily seen.","21d68099":"It looks that the months between july and october the outbreaks tends to get higher, that's exactly when the news and world leaders start talking about the situation in the forest.","a4215255":"Let's take a fast look at our data and see with what we are dealing","f5974806":"###  **1.1 Analyzing the data**","a939baa6":"# Predicting Amazonic Forest Burning Outbreaks, is it Growing?\n\n### **Brun**\n#### 02\/10\/2019\n\n* **1 Introduction**\n    * 1.1 Analyzing the data\n* **2 Plotting the burnings outbreaks**\n    * 2.1 Comparing other years with 2019\n* **3 Predicting future outbreaks**","8322ae5d":"Great! Pretty much data! We can do many things with it, maybe the first one is to take a look and see if we can find something in some visual data.","3bf37b5f":"## 3 **Predicting future outbreaks**","a28447e3":"## 1 **Introduction**\n\nThese days the discussion about the amazon forest fire turns out in to a big thing, since the last couple of months, many journals and websites published a lot of material and opinions about it, my mains goal here is not to do the same, I'm here to take a look at some data public published in the INPE (Instituto Nacional de Pesquisas Espaciais) [website](http:\/\/queimadas.dgi.inpe.br\/queimadas\/portal-static\/estatisticas_paises\/), and try to see if there's something unusual.\n\nLately the subject about the environment got a huge attention, the president of France Emannuel Macron comunicated to the international comunity to ","e01c2c9a":"## **2 Plotting burning outbreaks**","ea3d9e9a":"What if we try to predict this years output based on the past observations? For that we can analyse different types of time series estimators and see which one can get the closest in our 2019 series, after that predict the next two months output and in some months we can compare the results!","5ab35de4":"### **2.1 Comparing other years with 2019**","0b16626f":"If we compare the months from other years with 2019, does it demonstrate a increase in the fires outbreaks? Let's take a look at it!","83a2b9b1":"Ok, as it seems, from the past years it was way higher than now, but that not an excuse for any fire outbreak, even more because 2019 already is higher than 2018! We still have some months to end this year and my biggest fear is that it turns to be much higher than 2018. Which months does the burning outbreaks occur with more frequency?","146210fe":"The time series look pretty seasonalized, indicating that there are moments in which the number of forest burning grows. It's harder to see with all this data, but it seems that it's concentrated in the middle of each year.\n\nWell, based on this graph, the only thing that it can be seen is that the burnings are higher in the years before 2019, like in the 2003 and 2008 period it was way higher. But, we can't be focusing too much on a seasonalized series, it's harder to find a growth pattern and can lead us to a dubious analysis, let's take a look at a not seasonalized series, maybe it can take us to another look."}}