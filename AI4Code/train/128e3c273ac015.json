{"cell_type":{"95f3eae1":"code","7cb31da9":"code","d561af30":"code","c961ee39":"code","50fcc1b7":"code","a1e7c788":"code","73bcbd37":"code","33e205eb":"code","b2e5140f":"code","2f3df3dc":"markdown","efa2ff12":"markdown","5adfe73c":"markdown","52652ff5":"markdown","67e5d53a":"markdown","0f1d161e":"markdown","2940124a":"markdown","425249ce":"markdown","2614fd79":"markdown","5e222977":"markdown"},"source":{"95f3eae1":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom pandas.plotting import register_matplotlib_converters\nimport math\n\nregister_matplotlib_converters()\nsns.set()\n\nfrom pathlib import Path\ndata_dir = Path('..\/input\/covid19-global-forecasting-week-1')","7cb31da9":"df = pd.read_csv('..\/input\/corona-virus-report\/covid_19_clean_complete.csv', parse_dates=['Date'])\n\n# Renaming, re-ordering and creating a current cases column\ndf = df.rename(columns={'Deaths':'Deceased', 'Province\/State':'Province', 'Country\/Region':'Country'})\ndf['Current'] = df['Confirmed'] - df['Deceased'] - df['Recovered']\ndf = df[['Country','Province', 'Lat', 'Long', 'Date','Confirmed', 'Current', 'Recovered', 'Deceased']]\ndf.head()","d561af30":"# Grouping the data globally\nglobally = df[df.columns.values[-5:]].groupby('Date').sum().reset_index()\n\n# Creating a loop for the various plots\nplt.subplots(nrows=2, ncols=2, figsize=(20,10))\ni = 0\nfor graph in globally.columns.values[1:]:\n    i += 1\n    plt.subplot(2,2,i)\n    plt.plot(globally[graph]\/1e3, label = graph)\n    plt.title('Global ' + graph + ' Cases')\n    plt.xlabel('Days (starting 2020-01-22)')\n    plt.ylabel('Thousand Cases')\n    plt.xlim(globally.index.min(), globally.index.max())\n    plt.legend(loc='best')\n\nprint('As of', globally.Date.dt.date.max(),':')\nprint(int(globally.Confirmed.max()), 'Confirmed cases')\nprint(int(globally.Current.max()), 'Current cases')\nprint(int(globally.Recovered.max()), 'Recovered cases')\nprint(int(globally.Deceased.max()), 'Deceased cases')","c961ee39":"resolved_cases = globally['Recovered'].sum() + globally['Deceased'].sum()\nmortality = round(100 * (globally['Deceased'].sum() \/ resolved_cases), 2)\nprint('Currently the global mortality rate is:', mortality, '%')","50fcc1b7":"latest = df.loc[df['Date'] == df['Date'].max()].groupby('Country').sum().reset_index()\n\nlatest = latest.sort_values(by=['Confirmed'], ascending=False).reset_index(drop=True)\ntop_10 = latest.loc[:9]\ntop_10_bar = top_10.set_index('Country')[top_10.columns[3:]]\ntop_10_names = top_10['Country']\n\n(top_10_bar\/1e3).plot.bar(figsize=(20,5))\nplt.ylabel('Thousand Cases')","a1e7c788":"from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)    #THIS LINE IS MOST IMPORTANT AS THIS WILL DISPLAY PLOT ON \n#NOTEBOOK WHILE KERNEL IS RUNNING\nimport plotly.express as px\n\nfig = px.choropleth(latest, locations=\"Country\", \n                    locationmode='country names', color=\"Confirmed\", \n                    hover_name=\"Confirmed\", range_color=[1,50000], \n                    color_continuous_scale='Reds', \n                    title='Global view of Confirmed Cases')\nfig.show()","73bcbd37":"europe = list(['Austria','Belgium','Bulgaria','Croatia','Cyprus','Czechia','Denmark','Estonia','Finland','France','Germany','Greece','Hungary','Ireland',\n               'Italy', 'Latvia','Luxembourg','Lithuania','Malta','Norway','Netherlands','Poland','Portugal','Romania','Slovakia','Slovenia',\n               'Spain', 'Sweden', 'United Kingdom', 'Iceland', 'Russia', 'Switzerland', 'Serbia', 'Ukraine', 'Belarus',\n               'Albania', 'Bosnia and Herzegovina', 'Kosovo', 'Moldova', 'Montenegro', 'North Macedonia'])\n\neuropean_countries = df[df['Country'].isin(europe)]\nlatest_european = european_countries.loc[european_countries['Date'] == european_countries['Date'].max()].groupby('Country').sum().reset_index()\n\nChina = df.loc[df['Country'] == 'China'].groupby('Date').sum().reset_index()\nIran = df.loc[df['Country'] == 'Iran'].groupby('Date').sum().reset_index()\nUSA = df.loc[df['Country'] == 'US'].groupby('Date').sum().reset_index()\nEU = european_countries.groupby('Date').sum().reset_index()\n\n# Creating a loop for the various plots\nplt.subplots(nrows=2, ncols=2, figsize=(20,10))\n\nplt.subplot(2,2,1)\nplt.plot(China['Current']\/1e3, label='Current', color='green')\nplt.plot(China['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(China['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'China' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(globally.index.min(), globally.index.max())\nplt.legend(loc='best')\n\nplt.subplot(2,2,2)\nplt.plot(EU['Current']\/1e3, label='Current', color='green')\nplt.plot(EU['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(EU['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'EU' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(globally.index.min(), globally.index.max())\nplt.legend(loc='best')\n\nplt.subplot(2,2,3)\nplt.plot(Iran['Current']\/1e3, label='Current', color='green')\nplt.plot(Iran['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(Iran['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'Iran' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(globally.index.min(), globally.index.max())\nplt.legend(loc='best')\n\nplt.subplot(2,2,4)\nplt.plot(USA['Current']\/1e3, label='Current', color='green')\nplt.plot(USA['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(USA['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'USA' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(globally.index.min(), globally.index.max())\nplt.legend(loc='best')","33e205eb":"fig = px.choropleth(latest_european, locations=\"Country\", \n                    locationmode='country names', color=\"Confirmed\", \n                    hover_name=\"Confirmed\", range_color=[1,5000], \n                    color_continuous_scale='Reds', \n                    title='European view of Current Cases', scope='europe')#, height=800, width= 1400)\n# fig.update(layout_coloraxis_showscale=False)\nfig.show()","b2e5140f":"Italy = df.loc[df['Country'] == 'Italy'].groupby('Date').sum().reset_index()\nUK = df.loc[df['Country'] == 'United Kingdom'].groupby('Date').sum().reset_index()\nFrance = df.loc[df['Country'] == 'France'].groupby('Date').sum().reset_index()\nSpain = df.loc[df['Country'] == 'Spain'].groupby('Date').sum().reset_index()\nGermany = df.loc[df['Country'] == 'Germany'].groupby('Date').sum().reset_index()\nSwitzerland = df.loc[df['Country'] == 'Switzerland'].groupby('Date').sum().reset_index()\n\n# Creating a loop for the various plots\nplt.subplots(nrows=3, ncols=2, figsize=(20,10))\n\nplt.subplot(2,3,1)\nplt.plot(Italy['Current']\/1e3, label='Current', color='green')\nplt.plot(Italy['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(Italy['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'Italy' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')\n\nplt.subplot(2,3,2)\nplt.plot(Germany['Current']\/1e3, label='Current', color='green')\nplt.plot(Germany['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(Germany['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'Germany' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')\n\nplt.subplot(2,3,3)\nplt.plot(Spain['Current']\/1e3, label='Current', color='green')\nplt.plot(Spain['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(Spain['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'Spain' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')\n\nplt.subplot(2,3,4)\nplt.plot(France['Current']\/1e3, label='Current', color='green')\nplt.plot(France['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(France['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'France' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')\n\nplt.subplot(2,3,5)\nplt.plot(Switzerland['Current']\/1e3, label='Current', color='green')\nplt.plot(Switzerland['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(Switzerland['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'Switzerland' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')\n\nplt.subplot(2,3,6)\nplt.plot(UK['Current']\/1e3, label='Current', color='green')\nplt.plot(UK['Recovered']\/1e3, label='Recovered', color='orange')\nplt.plot(UK['Deceased']\/1e3, label='Deceased', color='red')\nplt.title('Global ' + 'UK' + ' Cases')\nplt.xlabel('Days (starting 2020-01-22)')\nplt.ylabel('Thousand Cases')\nplt.xlim(30, 60)\nplt.legend(loc='best')","2f3df3dc":"![image.png](attachment:image.png)\n\n# Coronavirus disease (COVID-19)\n\nCoronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.\n\nThe disease was first detected in the city of Wuhan China, in November 2019.\n\nMost people infected with the COVID-19 virus will experience mild to moderate respiratory illness and recover without requiring special treatment.  Older people, and those with underlying medical problems like cardiovascular disease, diabetes, chronic respiratory disease, and cancer are more likely to develop serious illness.\n\nThe COVID-19 virus spreads primarily through droplets of saliva or discharge from the nose when an infected person coughs or sneezes, making it important that people regularly wash their hands and practice respiratory etiquette (for example, by coughing into a flexed elbow).\n\nDatasets used:\n - https:\/\/www.kaggle.com\/vignesh1694\/covid19-coronavirus\n ","efa2ff12":"The mortality rate calculated above is higher than previously estimated, though this is concerning to see a difference and for it to be significantly higher. A possible cause might be that only the more serious cases are now being confirmed due to the number of testing kits available and health care capacities around the globe. \n\nThis limited capability in confirming new cases would result in a reduced number of confirmed and recovered cases being reported. Making the mortality rate disproportionally representative of only more serious cases.\n\n### Top 10 most affected countries\nA look into the top 10 affected countries so far and seeing a break down of how the cases are distributed. In this part China and Italy are of key intreset as the two most affected countries. ","5adfe73c":"It can be seen from the graph that currently the most affected countries are China, USA, Iran and Western and Central European countries. Now to look at how these countries have developed over time in terms of cases.","52652ff5":"The graphs reveal a lot of insight into the way the virus is spreading throughout Europe, current it appears as though all nations are in an exponential growth phase of the virus. In terms of Italy and Spain the mortality rates appear to relatively high, the trends show nearly as many cases are unfortunately resulting in a fatality as a recovery. Again though this could very likely be due to the severity of the cases officially being reported as the health care systems are becoming overloaded and only handling the most severe cases. \n\nThe result of the virus will be difficult to predict, this is highlighted in a comparison of the  Germany and Spain graphs. The two countries have very similar current case trends, however, the majority of the Germany cases haven't yet been concluded making it hard to determine the outcome.","67e5d53a":"### Global mortality rating\nThe mortality has been calculated from the total number of resolved cases and not counting ongoing as they haven't yet concluded. These cases are those that have either ended in recovery $R$ or as a fatality (Deceased) $F$, resolved = Recovery + fatality. \n\n$$ Mortality= \\frac{\\sum F}{\\sum R + F} $$","0f1d161e":"## Packages and data loading","2940124a":"### A visualisation on a country by country level of Eurpoe\nA further look into the most affected countries of Europe. The virus didn't spread to Europe until about 30 days had passed in the dataset, therefore I will start the graphs from there. ","425249ce":"In the graphs, the exponential rate of growth of the virus in Europe is of concern as there are currently twice as many cases as having been reported in China throughout the pandemic. What makes these numbers even more concerning is that the population of Europe is roughly 750 million at present, compared with China's population of 1.44 billion. [1] Despite China's population is roughly twice the size, it seems as though the virus is spreading much more aggressively amongst European countries.\n\n[1] - https:\/\/www.worldometers.info\/world-population\/population-by-country\/\n\n## Looking further into Europe\nGiven that the growth rate in Europe is so high by comparison to China, a further investigation will be made into Europe to look at how the virus is spreading on a country by country level.\n\n### Spread over Europe","2614fd79":"In the bar plot, China has a marginally higher number of confirmed cases than Italy, however, they have drastically less current cases. Looking at how China currently has less deceased cases than Italy, it is slightly concerning given the fact that Italy is further behind in the progression of the virus. The figures suggest that the number of deceased cases is still set to significantly rise in Italy in the coming weeks, even in the case of no further infections.\n\n## Global distribution of cases\nA look into how the cases of COVID-19 are distributed across the globe in terms of current cases by country.","5e222977":"# Exploratory data analysis\n## A global view of the pandemic \nInitial graphing of how the virus has evolved over time, showing the total number of confirmed cases, current cases, recovered cases and deceased cases since the beginning of the outbreak. "}}