{"cell_type":{"78bea87d":"code","963f5e9f":"code","5fdb694d":"code","c5cb598a":"code","305c2587":"code","62950043":"code","e2387f68":"code","1e184151":"code","7a435301":"code","ea8c9079":"code","81e7c211":"code","645bbfd8":"code","193dd64b":"code","0d81e57e":"code","4079f012":"code","df5fb728":"code","a2b16089":"code","8fef6073":"code","dedf02fa":"code","c67876d3":"code","8d40e682":"code","25fa961a":"code","815e325a":"code","9424637f":"code","89031607":"code","f44bf5b8":"code","117a6c53":"code","a75a4307":"code","27f23a9b":"code","882db27f":"code","a74ebd8d":"code","b7d8a837":"code","d260d3a7":"code","1a482b3c":"code","b20ad18a":"code","b3ceeeaa":"code","6e5cd907":"markdown","23dd27eb":"markdown","5fe76a18":"markdown","e2ecb50c":"markdown","2ba34589":"markdown","73015943":"markdown","531124cb":"markdown","84930f02":"markdown","7a68ee9e":"markdown","3ccb5cd1":"markdown","eeddba8b":"markdown","55c13694":"markdown","51604ec4":"markdown","2b92688c":"markdown","8242dc14":"markdown","882d88bc":"markdown","3192adb9":"markdown","ff169ad5":"markdown","e229870a":"markdown","ecd936ec":"markdown"},"source":{"78bea87d":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport warnings\nwarnings.filterwarnings(\"ignore\", category=UserWarning) ","963f5e9f":"#1.6 Display outputs of multiple commands from a cell\nfrom IPython.core.interactiveshell import InteractiveShell\nInteractiveShell.ast_node_interactivity = \"all\"","5fdb694d":"df = pd.read_csv('..\/input\/predicting-churn-for-bank-customers\/Churn_Modelling.csv')","c5cb598a":"df.head()\nprint('------------ Dataset Info -------------')\ndf.info()\nprint('\\n This dataset has {0} rows and {1} columns'.format(df.shape[0],df.shape[1]))\nprint('\\n The Columns in this Dataset are')\nlist(df.columns.values)","305c2587":"df.isnull().sum()","62950043":"df.drop(columns=['RowNumber', 'CustomerId', 'Surname'], inplace = True)\ndf_1 = df","e2387f68":"df.head()","1e184151":"df[['NumOfProducts','HasCrCard','IsActiveMember','Exited']]= df[['NumOfProducts','HasCrCard','IsActiveMember','Exited']].astype('object')","7a435301":"df.dtypes","ea8c9079":"print('The Numerical variables are ')\nlist(df.select_dtypes(include=[np.number]).columns.values)\nnum_col= df.select_dtypes(include=[np.number]).columns.values\nprint('The Categorical variables are ')\nlist(df.select_dtypes(include=[np.object]).columns.values)\ncat_col= df.select_dtypes(include=[np.object]).columns.values\n#print('There are {0} numerical columns and {1} categorical columns'.format())        ","81e7c211":"df.describe().T","645bbfd8":"num_col","193dd64b":"plt.figure(figsize = (15,10))\nfor i in enumerate(num_col):\n    plt.subplot(3,2, i[0]+1)\n    _= sns.histplot(df, x=i[1], hue = 'Exited',multiple=\"dodge\")","0d81e57e":"_= sns.displot(df, x=\"CreditScore\", col=\"Exited\", multiple=\"dodge\")","4079f012":"_= sns.displot(df, x=\"Age\", col=\"Gender\",hue = 'Exited', multiple=\"dodge\")","df5fb728":"plt.figure(figsize= (10,10))\n_= sns.displot(df, x=\"Tenure\", y=\"Balance\", hue=\"Exited\", kind= 'kde')","a2b16089":"#pair plot for numerical columns only\nsns.pairplot(df[num_col])","8fef6073":"_ = sns.jointplot(data = df, x='Balance', y = 'EstimatedSalary')","dedf02fa":"g = sns.jointplot(data = df, x='CreditScore', y = 'Age')\ng.plot_joint(sns.histplot)\n#g.plot_marginals(sns.boxplot)","c67876d3":"fig, ax= plt.subplots(2, 3, figsize=(20,12))\n_=sns.countplot(x='Gender', data = df,hue='Exited', ax= ax[0][0])\n_=sns.countplot(x='Geography', data = df,hue='Exited', ax= ax[0][1])\n_=sns.countplot(x='NumOfProducts', data = df,hue='Exited', ax= ax[0][2])\n_=sns.countplot(x='HasCrCard', data = df,hue='Exited', ax= ax[1][0])\n_=sns.countplot(x='IsActiveMember', data = df,hue='Exited', ax= ax[1][1])\n_=sns.countplot(x='Exited', data = df, ax= ax[1][2])","8d40e682":"df_fr= df[(df['Geography'] == 'France') & (df['Balance'] != 0)]\ndf_sp= df[(df['Geography'] == 'Spain') & (df['Balance'] != 0)]\ndf_Gr= df[(df['Geography'] == 'Germany') & (df['Balance'] != 0)]","25fa961a":"plt.figure(figsize=(15,8))\nplt.subplot(1,3,1)\n_= sns.boxplot(x= 'Gender', y= 'Age', data = df_Gr, hue = 'Exited')\nplt.title('For Germany')\nplt.subplot(1,3,2)\n_= sns.boxplot(x= 'Gender', y= 'Age', data = df_fr, hue = 'Exited')\nplt.title('For France')\nplt.subplot(1,3,3)\n_= sns.boxplot(x= 'Gender', y= 'Age', data = df_sp, hue = 'Exited')\nplt.title('For Spain')","815e325a":"plt.figure(figsize=(10,5))\n_= sns.barplot(x= 'Tenure', y= 'Balance', data = df, hue = 'Exited')","9424637f":"plt.figure(figsize=(10,5))\nplt.subplot(1,2,1)\n_= sns.barplot(x= 'HasCrCard', y= 'EstimatedSalary', data = df, hue = 'Exited')\nplt.subplot(1,2,2)\n_= sns.barplot(x= 'HasCrCard', y= 'CreditScore', data = df, hue = 'Exited')","89031607":"plt.figure(figsize=(10,7))\n_=sns.stripplot(x='NumOfProducts', y='CreditScore', data=df, hue='Exited', dodge=True, palette='viridis')","f44bf5b8":"plt.figure(figsize=(10,7))\nsns.swarmplot(x='Gender', y='CreditScore', data=df, hue='Exited', dodge=True, palette='viridis')","117a6c53":"plt.figure(figsize=(15,7))\nsns.catplot(x=\"Tenure\", y=\"CreditScore\", hue=\"Exited\",\n            col=\"IsActiveMember\", aspect=.7,\n            kind=\"swarm\", data=df)","a75a4307":"sns.catplot(x=\"Geography\", y=\"Balance\", hue=\"Exited\",\n            col=\"NumOfProducts\", aspect=.7,\n            kind=\"bar\", data=df)","27f23a9b":"sns.catplot(x=\"Gender\", y=\"Balance\", hue=\"Exited\",\n            col=\"HasCrCard\", aspect=.7,\n            kind=\"bar\", data=df)","882db27f":"sns.relplot(x = 'Age',y = 'Balance',hue = 'Exited',kind = 'scatter',data = df,cmap = 'winter')","a74ebd8d":"_= sns.relplot(x = 'CreditScore',\n            y = 'Balance',\n            hue = 'Exited',\n            kind = 'scatter',\n            data = df,\n            cmap = 'winter')","b7d8a837":"_= sns.relplot(x = 'CreditScore',\n            y = 'EstimatedSalary',\n            hue = 'Exited',\n            kind = 'scatter',\n            data = df,\n            cmap = 'winter')","d260d3a7":"df_1.drop(columns=['Geography','Gender'], inplace = True, axis =1)","1a482b3c":"_= pd.plotting.parallel_coordinates(\n                                     df_1,\n                                     'Exited',\n                                     colormap='winter'\n                                    )","b20ad18a":"_ = pd.plotting.radviz(\n                        df_1,\n                        class_column ='Exited',\n                        colormap= 'winter'\n                      )","b3ceeeaa":"_=pd.plotting.andrews_curves(\n                              df_1,\n                              'Exited',\n                             colormap = 'winter'\n                            )","6e5cd907":"##### Joint Plot for two numerical Variables","23dd27eb":"### Missing Values\n fortunatly this dataset doesnt have any missing values.","5fe76a18":"Let's do some basic checks of the dataset.","e2ecb50c":"#### Plots for finding the Structure in Data\n\nwe are going to plot below three plots.\n    \n    1.Parallel Coordinates\n    2. Radviz\n    3. Andrews Curves","2ba34589":"Observation from the above histogram\n  1. Balances of the customers are seemed to be symmetrically distributed. Credit Score seems like left skewed.\n  2.There is not much variation in Estimated salary. All the values are lying between 300k to 400k. This variable may not be very helpful in finding out the churn.\n  3. Most of our custmers are between the age of 28 to 40.","73015943":"To be Continued...","531124cb":"## Data Visualization\n Need for Visualization\n   1. Understanding the trends and patterns of data.\n   2. Analyze the frequency and other such characteristics of the data.\n   3. Know the distribution of the variables in the data.\n   4. Visualize the relationship that may exist between different variables","84930f02":"#### Count Plot for Categorical Variables","7a68ee9e":"No conclusive observation from the above plot. Estimated Salary doesnt have any relationship with any other variables.","3ccb5cd1":"Columns like Row Number, Customer ID and Surname are not going to help us in finding the churn pattern as these are mostly unique values to each customers.","eeddba8b":"Let's read the dataset in our panda dataframe.","55c13694":"#### Bar Plot\nBar plots are classic. We get an estimate of central tendency for a numerical variable for each class on the x axis. ","51604ec4":"#### BOx Plot","2b92688c":"The main focus of this notebook is Data Visualization. Here we have a dataset of Banking Customer data. We have various attributes of a customer like Age, Gender, Creditscore to predict the churn. We need to find out hidden patterns of churns.\n\nFirst we need to import the libraries.","8242dc14":"Observation for the above plot\n    Female customers between the age 50 to 60 are more likely to churn.","882d88bc":"##### Categorical Scatter PLot(Strip Plot)","3192adb9":"we can see that columns like NumOfProducts, HasCrCard and IsActiveMember are numerical but these are actually categorical variables.\nLets change these into categorical variables.","ff169ad5":"### Data Distribution Plots\n   Data distribution plots shows the distribution in data like the central tendency,skewedness, any significant outliers.\nLets see some of the distribution plots\n\n   #### Histogram for Numerical Variables","e229870a":"Observation from the ablove plots\n   1. Female customers are leaving the bank more than the male customers. \n   2. In the given data, Germany is having more churn ratio than spain and France. And France is having lowest ration of churn.\n   3. Churn in customers having only 1 product is more. And Customers having more than 2 products are more likly to leave.\n   4. Inactive customers are leaving the bank more than those active customers.\n   5. This is an imbalanced dataset as we have only 2000 customers who exited and 8000 customers who stayed.","ecd936ec":"Lets segregate all the customers according to the geography and balance more than zero. "}}