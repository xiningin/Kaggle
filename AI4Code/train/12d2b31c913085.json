{"cell_type":{"5a386e6e":"code","de724cdb":"code","c8644ef3":"code","a4d4be67":"code","36d86306":"code","f1ed2d0b":"code","a1b4177c":"code","05a7d8dc":"code","a323225c":"code","c5343030":"code","ad4ca44d":"code","13a5a359":"code","6aa23158":"code","5a13db99":"code","9117e2a4":"code","d4bd7335":"code","ad23896a":"code","e62fc298":"code","fe337053":"code","e02a8160":"code","f739af8e":"code","3ad69482":"code","79d763f1":"code","1862b940":"code","339e8bf9":"code","5626d43c":"code","b552662b":"code","d2db3ac5":"code","cbd85f2b":"code","389a5469":"code","883560f9":"markdown","628eede6":"markdown","971724ea":"markdown","3664f503":"markdown","74dccc3a":"markdown","14c04a6a":"markdown","32b4f836":"markdown","cd189ca1":"markdown","8e3e31a1":"markdown","c8028632":"markdown","91c7f435":"markdown","cbaf35b0":"markdown","4d30644f":"markdown"},"source":{"5a386e6e":"import pandas as pd\nimport os\nimport numpy as np\nimport seaborn as sns\nimport plotly.figure_factory as ff\nimport matplotlib.pyplot as plt\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\ndisplay(HTML(\"<style>.output_result { max-width:100% !important; }<\/style>\"))\npd.set_option(\"display.max_rows\", 500)\npd.set_option(\"display.max_columns\", 500)\nplt.style.use('fivethirtyeight')\nos.listdir()\n","de724cdb":"data= pd.read_csv('..\/input\/tmdbmovierating-sample\/tmdb-movies.csv')","c8644ef3":"data.shape","a4d4be67":"(data.isna().sum()>0).index","36d86306":"data.columns","f1ed2d0b":"#Removing features which are not that much necessary\ndata.drop(['id','imdb_id', 'homepage','overview'],axis=1,inplace=True)","a1b4177c":"data['cast'].fillna('missing',inplace=True )\ndata['director'].fillna('missing',inplace=True)\ndata['tagline'].fillna('missing',inplace=True)\ndata['keywords'].fillna('missing',inplace=True)\ndata['genres'].fillna('missing',inplace=True)\ndata['production_companies'].fillna('missing',inplace=True) \ndata['budget'] = data['budget'].replace(0, np.NAN) ","05a7d8dc":"data","a323225c":"# drop the duplicates\ndata.drop_duplicates(inplace=True)     # do not forget inplace = True \n# confirm again \ndata.duplicated().sum()   ","c5343030":"data.hist(figsize=(15,15))","ad4ca44d":"df= data[['popularity','budget']]","13a5a359":"sns.scatterplot(x= df['budget'],y= df['popularity'])","6aa23158":"m =df['budget'].median()\nlow_budget_movies= df[df['budget']<m]\nhigh_budget_movies= df[df['budget']>=m]","5a13db99":"low_budget_movies_popularity_mean=low_budget_movies['popularity'].mean()\nhigh_budget_movies_popularity_mean=high_budget_movies['popularity'].mean()","9117e2a4":"heights= [0,0,low_budget_movies_popularity_mean, high_budget_movies_popularity_mean]\nsns.barplot(x=['','','low','high'],y=heights)\nplt.xticks(ticks=[1,2],labels= ['low','high'])\nplt.xlim(0,4)\nplt.xlabel('Budget')\nplt.ylabel('Popularity')\nplt.title('Popularity as per budget')","d4bd7335":"#Increase Percentage\npercent= (high_budget_movies_popularity_mean- low_budget_movies_popularity_mean) \/high_budget_movies_popularity_mean *100\nprint('We can make this conclusion that, high budget movies make {}% more popularity'.format(np.round(percent)))","ad23896a":"data.columns","e62fc298":"df= data[['runtime','popularity']]\ndf","fe337053":"short= df[df['runtime']<60]\nmedium= df[(df['runtime']<200)]\nlarge= df[df['runtime']>200]\n\ns_mean= short['popularity'].mean()\nm_mean= medium['popularity'].mean()\nl_mean= large['popularity'].mean()\n\nsns.barplot(x=['','short','medium','large'],y= [0,s_mean,m_mean,l_mean])\n\nplt.xlim(0,4)\nplt.xlabel('Runtime')\nplt.ylabel('Popularity')\nplt.title(' Runtime vs Popularity')","e02a8160":"length=[]\n# short:0,medium:1,large:2\nfor r in df['runtime']:\n    if r <100:\n        length.append(0)\n        continue\n        \n    if (r >= 100 and r<= 200):\n        length.append(1)\n        continue\n        \n    if r>200:\n        length.append(2)\n        continue\ndf['length']= length\n        ","f739af8e":"sns.scatterplot(data= df,y='popularity',x='runtime',hue='length',size='popularity')\nplt.legend(labels= ['short','medium','large'])\nplt.title('Average Runtime with respect to popularity')","3ad69482":"df= data[['popularity','budget','revenue']]\nfor col in df.columns:\n    if col in ['budget','revenue']:\n        df[col]= df[col]\/df[col].mean()\n    \ndf['revenue']= df['revenue'].replace(0,np.nan)\ndf.dropna(inplace=True)\ndf['profit']= df['budget']- df['revenue'] #multiply with 10 million\n","79d763f1":"length=[]\nfor p in df['profit']:\n    if p >0:\n        length.append(0)\n    else:\n        length.append(p)\n\ndf['profit']= length\ndf['profit']= -1 * df['profit']\nmed= df['popularity'].median()\nlow_pop= df[df['popularity']<=med].mean()['profit']\nhigh_pop= df[df['popularity']>med].mean()['profit']\n","1862b940":"sns.barplot(x=['','low','high'],y=[0,low_pop,high_pop])\nplt.xlim(0,3)\nplt.ylabel('Profit')\nplt.xlabel('popularity')\nplt.title('Average popularity with respect to profit')","339e8bf9":"genre= data.sort_values(by='revenue',ascending=False)[:10]['genres']\ngenre_list=[]\nd =[[genre_list.append(word) for word in w] for w in [g.split('|') for g in genre]]    \npd.Series(genre_list).value_counts(sort=False).plot(kind='barh')\nplt.title('Features of top 10 movies')\nplt.ylabel('Features')\nplt.xlabel('counts')\nplt.xlim(0,10)","5626d43c":"movie_count = data['release_year'].value_counts()\n# movie_count.plot(xlabel='year',ylabel='number of movies',title='Number of Movies Released Each Year')\nfig = plt.figure()\nplt.plot(movie_count,linewidth=0.6)\nfig.suptitle('Number of Movies Released Each Year',fontsize=20)\nplt.xlabel('year',fontsize=18)\nplt.ylabel('number of movies',fontsize=18)","b552662b":"mc= movie_count.reset_index().sort_values(by='index').reset_index(drop=True)\nprint('Number of movies since 1960 has increased by',\n      int((mc['release_year'][-1:] - mc['release_year'][0])\/mc['release_year'][-1:]*100),'%')","d2db3ac5":"C= data['vote_average'].mean()\n\n# Therefore, to qualify to be considered for the chart, a movie has to have at least 434 votes on TMDB. \n# We also see that the average rating for a movie on TMDB is 5.244 on a scale of 10. 2274 Movies qualify to be on our chart.\nm= data['vote_count'].quantile(0.95)\n\n\ndef weighted_average(x,m=m,c=C):\n    v= x['vote_count']\n    R= x['vote_average']\n    return ((v\/(v+m))*R) + (m\/(v+m))*c\n\nquality_movies= data[data['vote_count']>m]\nquality_movies['score']= quality_movies.apply(weighted_average,axis=1)\nquality_movies= quality_movies.sort_values(by='score',ascending=False)\nquality_movies[['original_title', 'vote_count', 'vote_average', 'score']].head(10) \n#Below are the Best movies of all time. 'Interstellar <3 is also their ;)'","cbd85f2b":"df2= data.copy()\npop= df2.sort_values('popularity', ascending=False)\nplt.figure(figsize=(12,4))\nplt.barh(pop['original_title'].head(6),pop['popularity'].head(6), align='center',\n        color='skyblue')\nplt.gca().invert_yaxis()\nplt.xlabel(\"Popularity\")\nplt.title(\"Most Popular Movies\")","389a5469":"#TO be continued--> next time : Recommender Systems","883560f9":"Q2 : Will the runtime affect popularity?","628eede6":"Science Fiction, Action and Adventure are the most common Genre. Meanwhile, Runtime is also playing a crucial role in the Revenue.","971724ea":"Under the Trending Now tab of these systems we find movies that are very popular and they can just be obtained by sorting the dataset by the popularity column.","3664f503":"Q1: Does higher budget mean higher popularity ? Is there a coefficent relationship ?","74dccc3a":"Q4: What Features are Associate with Top 10 Revenue Movies ?","14c04a6a":"Yes ! there is some corelation but it cannot be clearly seen by the above graph. SO, Let's try it using a slightly different approach","32b4f836":"Combine two plots above, we can not simply say , the longer runtime, the more popular the movies are.\nIf the movies are within 200 minutes,it will be more popular. Once the movies run over 200 minutes, it's hard for them to gain high popularity ","cd189ca1":"In this dataset, A particular Feature\/ score which can represent how well a movie performed by considering all the features is not given. So let's make a feaure with name \"Score\" to represent the movie without any bias.\n\nI said Bias because a movie with rating 8.2 with only votecount of 20 cannot be considered better than the movie with rating 7.2 with 400 votes\nso i will  use IMDB's weighted rating which is given by:\nWeighted Rating (WR) = $(\\frac{v}{v + m} . R) + (\\frac{m}{v + m} . C)$\n\nwhere,\n* *v* is the number of votes for the movie\n* *m* is the minimum votes required to be listed in the chart\n* *R* is the average rating of the movie\n* *C* is the mean vote across the whole report\n\n\nWe already have v(vote_count) and R (vote_average) and C can be calculated as ","8e3e31a1":"These recommender provide a general chart of recommended movies to all the users. They are not sensitive to the interests and tastes of a particular user. This type of filtering is also known as \" demographic recommender \"\n","c8028632":"<b> Introduction: <\/b>\n\nThe First data set I chose is Movie dataset\n\nHere are some notes and comments about this datasets : This data set contains information about 10,000 movies collected from The Movie Database (TMDb), including user ratings and revenue.\n\nCertain columns, like \u2018cast\u2019 and \u2018genres\u2019, contain multiple values separated by pipe (|) characters.\n\nThere are some odd characters in the \u2018cast\u2019 column. Don\u2019t worry about cleaning them. You can leave them as is.\n\nThe final two columns ending with \u201c_adj\u201d show the budget and revenue of the associated movie in terms of 2010 dollars, accounting for inflation over time.\n\nI have found answers to some basic questions about this dataset:\n\n    Does higher budget mean higher popularity ? Is there a coefficent relationship ?\n\n    Will the runtime affect  popularity?\n\n    Higher popularity means higher profits ?\n\n    What Features are Associate with Top 10 Revenue Movies ?\n \n and then made a thorough analysis of the dataset\n   ","91c7f435":"The movies should not be too long or too short. Medium length is better to gain higher popularity. But above bar chart is hard to tell the best length of runtime. Scatter plot may be a better choice.\n","cbaf35b0":"Q3 : Does Higher popularity means higher profits ?","4d30644f":"## Building a Simple recommender based on popularity"}}