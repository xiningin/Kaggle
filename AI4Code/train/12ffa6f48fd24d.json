{"cell_type":{"6584085a":"code","4150c6f1":"code","ff0a1aa8":"code","0748e315":"code","d86ae15a":"code","ceb81fab":"code","ffc38e09":"code","b8b31cda":"code","813278bf":"code","3ba6c332":"code","7660ca71":"code","bf24b9d3":"code","a6442025":"code","807e1bf0":"code","cc9bf3fe":"code","bb8640fd":"code","7b671a7e":"code","899d2b6a":"code","d195a83e":"code","ae6508cf":"code","26a77a25":"code","42a79c2f":"code","61be8c61":"code","48687283":"markdown","ab0d847f":"markdown","ed81d350":"markdown","db7cea8d":"markdown","d82867ea":"markdown","9363ecfc":"markdown","2fc5259f":"markdown","8243de43":"markdown","a212303a":"markdown"},"source":{"6584085a":"!pip install --upgrade plotly-geo\n!pip install --upgrade geopandas\n!pip install --upgrade pyshp\n!pip install --upgrade shapely","4150c6f1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.figure_factory as ff\nimport plotly.express as px\nimport time\nfrom datetime import datetime","ff0a1aa8":"datafile = pd.read_csv('..\/input\/us-election-2020\/president_state.csv')\nstate_codes = pd.read_csv('..\/input\/coordinates\/world_country_and_usa_states_latitude_and_longitude_values.csv')\ndatafile = datafile.merge(state_codes, left_on='state', right_on='usa_state')","0748e315":"fig = px.choropleth(datafile, locations='usa_state_code', color=\"total_votes\",\n                           range_color=(0, 10000000),\n                           locationmode = 'USA-states',  \n                           scope=\"usa\",\n                           title='USA Presidential Votes Counts' \n                          )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","d86ae15a":"#referennce : https:\/\/www.kaggle.com\/paultimothymooney\/2020-usa-election-vote-percentages-by-state\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\ndf_president_county = pd.read_csv('\/kaggle\/input\/us-election-2020\/president_county_candidate.csv')\ndf_president_county = df_president_county[df_president_county.party.isin(['DEM','REP'])]\ndf_president_county = df_president_county.groupby(['state','party'])[\"total_votes\"].sum()\ndf_president_county = df_president_county.reset_index()\n\nstate_codes = pd.read_csv('\/kaggle\/input\/coordinates\/world_country_and_usa_states_latitude_and_longitude_values.csv')\nstate_codes = state_codes[['usa_state','usa_state_code']]\ndf_president_county = df_president_county.merge(state_codes, left_on='state', right_on='usa_state')\ndf_president_county = df_president_county.drop(['usa_state'], axis=1)\ndf_president_county_dummy = pd.get_dummies(df_president_county['party'])\ndf_president_county = df_president_county.join(df_president_county_dummy)\ndf_president_county['DEM_votes'] = df_president_county['DEM'] * df_president_county['total_votes'] \ndf_president_county['REP_votes'] = df_president_county['REP'] * df_president_county['total_votes'] \ndf_president_county = df_president_county.groupby(['state','usa_state_code'])[\"DEM_votes\",\"REP_votes\"].sum()\ndf_president_county = df_president_county.reset_index()\ndf_president_county['percent_democrat'] = df_president_county['DEM_votes']*100\/(df_president_county['REP_votes']+df_president_county['DEM_votes'])","ceb81fab":"fig = px.choropleth(df_president_county, \n                    locations=\"usa_state_code\", \n                    color = \"percent_democrat\",\n                    locationmode = 'USA-states', \n                    hover_name=\"state\",\n                    range_color=[25,75],\n                    color_continuous_scale = 'RdBu',#blues\n                    scope=\"usa\",\n                    title='2020 USA Election: Percent of Population Voting for the Democratic Party')\nfig.show()","ffc38e09":"flips_main = pd.read_csv('..\/input\/flips-for-maps\/Flip_v2.csv')\nflips = flips_main[['State','County Full Name','FIPS Full County']]\nflips.columns = ['state','county','Flips']","b8b31cda":"flips.head(2)","813278bf":"flips.info()","3ba6c332":"gov_county = pd.read_csv('..\/input\/us-election-2020\/governors_county.csv')\ngov_county.head(2)","7660ca71":"Delaware_County = gov_county[gov_county['state'] == 'Delaware']\nDelaware_Flips = flips[flips['state']=='Delaware']","bf24b9d3":"Delaware_County = Delaware_County.merge(Delaware_Flips, on='county', how='left')\nDelaware_County = Delaware_County.drop(['state_y'],axis=1)\nDelaware_County.head(2)","a6442025":"county = Delaware_County['county'].tolist()\nvalues = Delaware_County['current_votes'].tolist()\nfips = Delaware_County['Flips'].tolist()\n\nendpts = list(np.mgrid[min(values):max(values):4j])\n\nfig = ff.create_choropleth(\n    fips=fips, values=values, scope=['Delaware'], show_state_data=True,\n    binning_endpoints=endpts, round_legend_values=True,\n    plot_bgcolor='rgb(229,229,229)',\n    paper_bgcolor='rgb(229,229,229)',\n    legend_title='Total Votes by County',\n    show_hover=True,\n    county_outline={'color': 'rgb(255,255,255)', 'width': 0.5},\n    exponent_format=True,\n    title='Delaware'\n)\nfig.update_layout(height=400, width=750, margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.layout.template = None\nfig.show()","807e1bf0":"Indiana_County = gov_county[gov_county['state'] == 'Indiana']\nIndiana_Flips = flips[flips['state']=='Indiana']","cc9bf3fe":"Indiana_Flips.info()","bb8640fd":"Indiana_County = Indiana_County.merge(Indiana_Flips, on='county', how='left')\nIndiana_County = Indiana_County.drop(['state_y'],axis=1)\nIndiana_County.head(2)","7b671a7e":"county = Indiana_County['county'].tolist()\nvalues = Indiana_County['current_votes'].tolist()\nfips = Indiana_County['Flips'].tolist()\n\nendpts = list(np.mgrid[min(values):max(values):4j])\n\nfig = ff.create_choropleth(\n    fips=fips, values=values, scope=['Indiana'], show_state_data=True,\n    binning_endpoints=endpts, round_legend_values=True,\n    plot_bgcolor='rgb(229,229,229)',\n    paper_bgcolor='rgb(229,229,229)',\n    legend_title='Total Votes by County',\n    show_hover=True,\n    county_outline={'color': 'rgb(255,255,255)', 'width': 0.5},\n    exponent_format=True,\n    title='Indiana'\n)\nfig.update_layout(height=400, width=750, margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.layout.template = None\nfig.show()","899d2b6a":"Missouri_County = gov_county[gov_county['state'] == 'Missouri']\nMissouri_Flips = flips[flips['state']=='Missouri']","d195a83e":"Missouri_County = Missouri_County.merge(Missouri_Flips, on='county', how='left')\nMissouri_County = Missouri_County.drop(['state_y'],axis=1)\nMissouri_County.head(2)","ae6508cf":"county = Missouri_County['county'].tolist()\nvalues = Missouri_County['current_votes'].tolist()\nfips = Missouri_County['Flips'].tolist()\n\nendpts = list(np.mgrid[min(values):max(values):4j])\n\nfig = ff.create_choropleth(\n    fips=fips, values=values, scope=['Missouri'], show_state_data=True,\n    binning_endpoints=endpts, round_legend_values=True,\n    plot_bgcolor='rgb(229,229,229)',\n    paper_bgcolor='rgb(229,229,229)',\n    legend_title='Total Votes by County',\n    show_hover=True,\n    county_outline={'color': 'rgb(255,255,255)', 'width': 0.5},\n    exponent_format=True,\n    title='Missouri'\n)\nfig.update_layout(height=400, width=750, margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.layout.template = None\nfig.show()","26a77a25":"Montana_County = gov_county[gov_county['state'] == 'Montana']\nMontana_Flips = flips[flips['state']=='Montana']","42a79c2f":"Montana_County = Montana_County.merge(Montana_Flips, on='county', how='left')\nMontana_County = Montana_County.drop(['state_y'],axis=1)\nMontana_County.head(2)","61be8c61":"county = Montana_County['county'].tolist()\nvalues = Montana_County['current_votes'].tolist()\nfips = Montana_County['Flips'].tolist()\n\nendpts = list(np.mgrid[min(values):max(values):4j])\n\nfig = ff.create_choropleth(\n    fips=fips, values=values, scope=['Montana','North Dakota'], show_state_data=True,\n    binning_endpoints=endpts, round_legend_values=True,\n    plot_bgcolor='rgb(229,229,229)',\n    paper_bgcolor='rgb(229,229,229)',\n    legend_title='Total Votes by County',\n    show_hover=True,\n    county_outline={'color': 'rgb(255,255,255)', 'width': 0.5},\n    exponent_format=False,\n    title='Montana'\n)\nfig.update_layout(height=400, width=750, margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.layout.template = None\nfig.show()","48687283":"## Come back for more updates!!","ab0d847f":"## Missouri","ed81d350":"## Indiana","db7cea8d":"## US Voting Results","d82867ea":"![https:\/\/www.googleapis.com\/download\/storage\/v1\/b\/kaggle-user-content\/o\/inbox%2F3244747%2Fdf2bd9836c198215ed033d0678a02ef2%2Fheader.png?generation=1604778403014926&alt=media](https:\/\/www.googleapis.com\/download\/storage\/v1\/b\/kaggle-user-content\/o\/inbox%2F3244747%2Fdf2bd9836c198215ed033d0678a02ef2%2Fheader.png?generation=1604778403014926&alt=media)","9363ecfc":"## Governor's County Results","2fc5259f":"## Delaware","8243de43":"## Montana","a212303a":"## 2020 USA Election: Vote Percentages by State"}}