{"cell_type":{"800464fe":"code","fcd49d4b":"code","b050fbb6":"code","f0757806":"code","4b6a8bdd":"code","be0f8e2d":"code","b638ab11":"code","fc5a0bc2":"code","b2880c4b":"code","d7a619f0":"code","dc49599c":"code","a74da420":"code","33f26624":"code","8349f5d2":"code","7835ab0d":"code","73d9d6ab":"code","b598f435":"code","552277a0":"code","81098f0f":"markdown","998eece4":"markdown","02fe6562":"markdown","d5cc7c52":"markdown","47567525":"markdown","9a42432a":"markdown","d75e9df7":"markdown","e106eb30":"markdown","c4141b5c":"markdown","ae903a5c":"markdown","2140342d":"markdown","eae8c077":"markdown","c916144b":"markdown","0d67706c":"markdown","6f619433":"markdown","e5c8505a":"markdown","48850c85":"markdown","56acab53":"markdown","80e26cd9":"markdown"},"source":{"800464fe":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom sklearn.linear_model import LinearRegression\nimport plotly.graph_objects as go\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","fcd49d4b":"df = pd.read_csv('\/kaggle\/input\/cbc-news-coronavirus-articles-march-26\/news.csv', delimiter=',')\ndf.head()","b050fbb6":"df = df.iloc[:, 1:]\ndf.rename(columns={\"publish_date\":\"publish_timestamp\"},inplace=True)\ndf.publish_timestamp = pd.to_datetime(df.publish_timestamp)\ndf[\"title_length\"] = df[\"title\"].apply(lambda x : len(x.strip().split()) )\ndf[\"description_length\"] = df[\"description\"].apply(lambda x : len(x.strip().split()) )\ndf[\"text_length\"] = df[\"text\"].apply(lambda x : len(x.strip().split()) )\ndf[\"publish_date\"] = df.publish_timestamp.dt.date\ndf[\"publish_year\"] = df.publish_timestamp.dt.year\ndf.head()","f0757806":"df.info()","4b6a8bdd":"df.drop_duplicates(inplace=True)\ndf.info()","be0f8e2d":"df.publish_year.value_counts()","b638ab11":"df_2020 = df[df.publish_year == 2020]","fc5a0bc2":"df_2020[[\"title_length\",\"description_length\",\"text_length\"]].describe()","b2880c4b":"df_2020_text_length = df_2020.groupby(\"publish_date\")[\"text_length\"].mean().reset_index()","d7a619f0":"lr = LinearRegression()\nlr.fit(df_2020_text_length.index.values.reshape(-1,1), df_2020_text_length.text_length.values.reshape(-1,1) )\npredictedLine = lr.predict(df_2020_text_length.index.values.reshape(-1,1))","dc49599c":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n                x=df_2020_text_length.publish_date,\n                y=df_2020_text_length.text_length,\n                name=\"text_length\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=df_2020_text_length.publish_date,\n                y=predictedLine.flatten(),\n                name=\"Trend line\",\n                line_color='red',\n                opacity=0.8))\n\n# Use date string to set xaxis range\nfig.update_layout(title_text=\"Trend on the length of the articles\", yaxis_title=\"word_count\")\nfig.show()","a74da420":"from wordcloud import WordCloud, STOPWORDS\nimport matplotlib.pyplot as plt\nimport re\n","33f26624":"usecase_specific_words = [\"good\",\"morning\",\"said\",\"says\",\"news\", \"will\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\",\"sunday\"]\nprint(\"Total extra stopwords : \",len([STOPWORDS.add(word) for word in usecase_specific_words]))\nstopwords = set(STOPWORDS)","8349f5d2":"df_2020[\"text\"] = df_2020.text.apply(lambda x : x.lower())","7835ab0d":"def word_cloud(month_no, month):\n    words_list = df_2020[df_2020.publish_timestamp.dt.month.astype(int) == month_no].text.values.tolist()\n    words = \" \".join([ re.sub(r\"[^a-zA-Z0-9]+\", ' ', word.strip()).strip()  for word in \" \".join(words_list).split(\" \") ]).split(\" \")\n    wordcloud = WordCloud(\n                        background_color='white',\n                        stopwords=stopwords,\n                        max_font_size=40, \n                        random_state=37,\n                        max_words=200\n                     ).generate(\" \".join(words))\n    print(month+\" - Total number of words - \"+str(len(words)))\n    plt.figure(figsize=(14,15))\n    plt.imshow(wordcloud)\n    plt.axis('off')\n    plt.show()\n    ","73d9d6ab":"  word_cloud(1, \"January\")","b598f435":"  word_cloud(2, \"February\")","552277a0":"  word_cloud(3, \"March\")","81098f0f":"# Analysing the trend with word count","998eece4":"The articles in January are primarily discussing around the corona virus origin, symptoms and the first case reported at Toronto.  ","02fe6562":"### February Wordcloud","d5cc7c52":"Articles from March indicates the importance of social distancing, effects of community spread and facilities at hospital\n","47567525":"In order to analyse the trend, we need to understand the timeperiod of these articles","9a42432a":"Eventhough there are some spikes on the article length, general trend looks almost consistent.","d75e9df7":"### January wordcloud","e106eb30":"# Evolution of CBC new articles","c4141b5c":"In February, the highlight of words like \n* quarantine - indicates that the government's action agains corona\n* diamond princess related terms indicate  - the return of 137 Canadians from the Diamon Princess cruise.","ae903a5c":"Let's remove duplicates","2140342d":"Some words might be quite common and straightforward with respect to certain use cases. Let's remove those kind of words in this usecase","eae8c077":"# Conclusion\n* We could see the evolution of importance in news articles over the time period\n* The dataset size got reduced because of duplicates ( 3500 to 2786 )","c916144b":"Looks like we have few articles before 2020. Let's take articles from 2020 alone for our analysis.","0d67706c":"Adding extra features","6f619433":"# Evolution of the articles","e5c8505a":"### March Wordcloud","48850c85":" # Data Cleaning ","56acab53":"## Goal\n\nTo understand how the main focus of CBC news articles has evolved during this COVID -19 affected time period.\n\n## Methods\n\n1. Analysing the trend with word count of the articles\n2. Analysing the keywords of articles every month using wordcloud\n\n## Results\nIt was interesting to observe how the articles has moved from \"*what is coronavirus?*\" to \"*social distancing*\" as solution\n\nWelcome to any feedback!","80e26cd9":"The length of article's *text* has high standard deviation. Let's check the trend with respect to length of the articles"}}