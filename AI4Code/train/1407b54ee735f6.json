{"cell_type":{"e6fd7b1a":"code","a7179aab":"code","0ceb9acb":"code","0522f315":"code","aa95bc3c":"code","ed9ce652":"code","5b59d59c":"code","3f8d8924":"code","6e237f7f":"code","91baeb22":"code","bd938e5e":"code","a43ba08f":"code","02ecf64a":"code","0970272c":"code","be7eb0d4":"code","85786554":"code","11647d8c":"code","ab0fc6e5":"code","31044bd1":"code","3040a33e":"code","e599750b":"code","11c9435d":"code","0f797851":"code","29cc2a38":"code","b7651112":"code","e9776126":"code","52afd74c":"code","d9e320a8":"code","f4ebe42e":"code","8a125eec":"code","8d50f043":"code","dfcd41df":"code","bc307122":"code","b531877e":"code","b23c548f":"code","1018ae67":"code","b31154bd":"code","177385e9":"code","0e66cfa4":"code","996a4407":"code","b6b4a8cd":"code","fb820a4d":"code","b6f69173":"code","edda7d00":"code","3e370195":"markdown","b033b2ad":"markdown","395c76af":"markdown","8ba081fd":"markdown","24933553":"markdown","2caae355":"markdown","a0ccb006":"markdown","1d7fb3f9":"markdown","0d5665ee":"markdown","5a2d1432":"markdown","febce32c":"markdown","45922158":"markdown","5f290ead":"markdown","52dcfa6f":"markdown","de4d7dfc":"markdown","69bae89a":"markdown"},"source":{"e6fd7b1a":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","a7179aab":"import pandas as pd\nimport numpy as np\n\nfrom sklearn import preprocessing\nimport matplotlib.pyplot as plt \nplt.rc(\"font\", size=14)\nimport seaborn as sns\nsns.set(style=\"white\") #white background style for seaborn plots\nsns.set(style=\"whitegrid\", color_codes=True)","0ceb9acb":"# reading csv train data into dataframe\ntrain_df = pd.read_csv(\"..\/input\/train.csv\")\n# preview train data\ntrain_df.head()","0522f315":"train_df.tail()","aa95bc3c":"#reading csv test data into dataframe\ntest_df = pd.read_csv(\"..\/input\/test.csv\")\n# preview test data\ntest_df.head()","ed9ce652":"test_df.tail()","5b59d59c":"# printing the total sample in train data\nprint(\"#of sample in the train data is {}\".format(train_df.shape[0]))","3f8d8924":"# printing the total sample in the test data\nprint(\"#of sample in the test data is {}\".format(test_df.shape[0]))","6e237f7f":"# checking missing values in the train data\ntrain_df.isnull().sum()","91baeb22":"import missingno as msno","bd938e5e":"msno.matrix(train_df)","a43ba08f":"msno.matrix(test_df)","02ecf64a":"msno.heatmap(train_df)","0970272c":"msno.heatmap(test_df)","be7eb0d4":"msno.dendrogram(train_df)","85786554":"##percent of missing values in Train data\n# ~20% of the Age entries are missing for passengers\n# look at what age variable in general","11647d8c":"ax = train_df[\"Age\"].hist(bins=15, density=True, stacked=True, color='blue', alpha=0.6)\ntrain_df[\"Age\"].plot(kind='density', color='brown')\nax.set(xlabel='Age')\nplt.xlim(-10,90)\nplt.show()","ab0fc6e5":"#mean age\nprint(\"the mean of age is %.2f\" %(train_df['Age'].mean(skipna = True)))","31044bd1":"# median of age\nprint('the median of age is %.2f' %(train_df[\"Age\"].median(skipna = True)))","3040a33e":"print('percent of missing \"Cabin\" record is %.2f%%' %((train_df[\"Cabin\"].isnull().sum()\/train_df.shape[0])*100))","e599750b":"print(\"percent of missing 'Embarked' record is %.2f%%\" %((train_df[\"Embarked\"].isnull().sum()\/train_df.shape[0])*100))","11c9435d":"#Dividing the class of passengers in Train Data\nprint(\"Boarded passengers grouped by port of embarkation (C = Cherbourg, Q = Queenstown, S = Southampton):\")\nprint(train_df['Embarked'].value_counts())\nsns.countplot(x='Embarked', data =train_df, palette= 'Set2')\nplt.show()","0f797851":"#Finding the common boarding among the three from train data\nprint('The most common boarding port of embarkation is %s.' %train_df['Embarked'].value_counts().idxmax())","29cc2a38":"# In a given row if Age is the missing value. Then i will impute median of Age\n# If Embarked is the missing value in the row then i will impute as S\n# i will ignore Cabnit bec. there is too much missing values in cabnit\ntrain_data = train_df.copy()\ntrain_data['Age'].fillna(train_df[\"Age\"].median(skipna=True), inplace= True)\ntrain_data[\"Embarked\"].fillna(train_df[\"Embarked\"].value_counts().idxmax(), inplace=True)\ntrain_data.drop(\"Cabin\", axis=1, inplace=True)","b7651112":"# Checking the missing values in Adjusted data\ntrain_data.isnull().sum()","e9776126":"# preview adj train data\ntrain_data.head()","52afd74c":"plt.figure(figsize=(15,5))\nax = train_df['Age'].hist(bins=15, density=True, stacked = True, color = \"green\", alpha=0.6)\ntrain_df[\"Age\"].plot(kind='density', color = \"green\")\nax = train_data[\"Age\"].hist(bins=15, density=True, stacked=True, color='yellow', alpha=0.5)\ntrain_data['Age'].plot(kind='density', color = 'yellow')\nax.legend(['Raw Age', 'Adjusted Age'])\nax.set(xlabel='Age')\nplt.xlim(-10,90)\nplt.show()","d9e320a8":"## Create categorical variable for traveling alone\ntrain_data['TravelAlone']=np.where((train_data[\"SibSp\"]+train_data[\"Parch\"])>0, 0, 1)\ntrain_data.drop('SibSp', axis=1, inplace=True)\ntrain_data.drop('Parch', axis=1, inplace=True)","f4ebe42e":"#we will also create a categorical variable for passenger-(\"pclass\") Gender-\"sex\" and port Embarked = \"Embarked\"\n\n# creating categorical variable and dropping some variables\ntraining=pd.get_dummies(train_data, columns=[\"Pclass\", \"Embarked\", \"Sex\"])\ntraining.drop(\"Sex_female\", axis=1, inplace=True)\ntraining.drop('Name', axis=1, inplace=True)\ntraining.drop(\"Ticket\", axis=1, inplace=True)\ntraining.drop('PassengerId', axis=1, inplace=True)\n\nfinal_train = training\nfinal_train.head()","8a125eec":"test_df.isnull().sum()","8d50f043":"test_data = test_df.copy()\ntest_data[\"Age\"].fillna(train_df[\"Age\"].median(skipna=True), inplace=True)\ntest_data['Fare'].fillna(train_df[\"Fare\"].median(skipna=True), inplace=True)\ntest_data.drop('Cabin', axis=1, inplace=True)","dfcd41df":"test_data['TravelAlone']=np.where((test_data[\"SibSp\"]+test_data[\"Parch\"])>0, 0, 1)\n\ntest_data.drop(\"SibSp\", axis=1, inplace=True)\ntest_data.drop(\"Parch\", axis=1, inplace=True)","bc307122":"testing = pd.get_dummies(test_data, columns=[\"Pclass\",\"Embarked\",\"Sex\"])\ntesting.drop('Sex_female', axis=1, inplace=True)\ntesting.drop('PassengerId', axis=1, inplace=True)\ntesting.drop('Name', axis=1, inplace=True)\ntesting.drop('Ticket', axis=1, inplace=True)\n","b531877e":"final_test = testing\nfinal_test.head()","b23c548f":"# Explanatering & analysing The Data","1018ae67":"#Exploaring the Age Data\nplt.figure(figsize=(16,9))\nax = sns.kdeplot(final_train[\"Age\"][final_train.Survived == 1], color=\"lightgreen\", shade=True)\nsns.kdeplot(final_train[\"Age\"][final_train.Survived == 0], color=\"orange\", shade=True)\nplt.legend(['Survived', 'Died'])\nplt.title('Density Plot of Age for Surviving Population and Deceased Population')\nax.set(xlabel='Age')\nplt.xlim(-10,90)\nplt.show()","b31154bd":"# so The passengers evidently made an attempt to save children by giving them a place on the life rafts.\nplt.figure(figsize=(23,12))\navg_survival_byage = final_train[[\"Age\", \"Survived\"]].groupby([\"Age\"], as_index=False).mean()\ng = sns.barplot(x=\"Age\", y= \"Survived\", data=avg_survival_byage, color = \"Black\")\nplt.show()","177385e9":"# From the Bar plot i'll considering the survival rate of passengers under 17, \n# I'll also include another categorical variable in my dataset: Minor\nfinal_train[\"IsMinor\"]=np.where(final_train[\"Age\"]<=17, 1, 0)\n","0e66cfa4":"#we'll look at test data (it,s my assumption for considering miner = under 17)\nfinal_test[\"IsMinor\"]=np.where(final_test[\"Age\"]<=17, 1, 0)","996a4407":"plt.figure(figsize=(15,8))\nax = sns.kdeplot(final_train[\"Fare\"][final_train.Survived ==1], color= \"darkgreen\", shade = True)\nsns.kdeplot(final_train[\"Fare\"][final_train.Survived ==0], color = \"lightcoral\", shade =True)\nplt.legend([\"Survived\", \"Died\"])\nplt.title('Density Plot of Fare for Surviving Population And Deceased Population')\nax.set(xlabel=\"Fare\")\nplt.xlim(-25,250)\nplt.show()","b6b4a8cd":"# Exploration of Passengers Class\nsns.barplot('Pclass', 'Survived', data= train_df, color=\"yellow\")\nplt.show()","fb820a4d":"##Exploration of Embarked part\n\nsns.barplot('Embarked', 'Survived', data=train_df, color=\"green\")\nplt.show()","b6f69173":"##Exploration with alone and withFamily\nsns.barplot('TravelAlone', 'Survived', data=final_train, color=\"yellow\")\nplt.show()","edda7d00":"##Explonaration of Gender Variable\nsns.barplot('Sex', 'Survived', data=train_df, color=\"aquamarine\")\nplt.show()","3e370195":"   # Cabin\n    # percentage of missing cabin variable","b033b2ad":"**To get better clarity lets visualize null values**","395c76af":"# From the above graphical reprentation it is clearly different for the fares of survivers v\/s unservived\n# passengers who paid low fare appear to have been less likely to survive.\n# This is Strongly co-related with passengers Class, which will look next\n","8ba081fd":" Clerly from the above bar plot being Female increased the chances of survival","24933553":"Passengers who boarded in Cherbourg, France, appear to have the highest survival rate. Passengers who boarded in Southhampton were marginally less likely to survive than those who boarded in Queenstown. This is probably related to passenger class, or maybe even the order of room assignments for instance it may be earlier passengers were more likely to have rooms closer to deck(\"placeses were given in the internet\") It's also worth noting the size of the whiskers in these plots. Because the number of passengers who boarded at Southhampton was highest, the confidence around the survival rate is the highest. \n","2caae355":"                  #Embarked\n# percentage of missing Embarked table","a0ccb006":"# from the kaggle directory both \"SibSp= #of siblings\"and \"Parth #of parents\" relate to traveling with families\n# ('multicollinearity: multiple ind. variables which have highly corrilated') for #simplicity's sake we'll comine the effect of\n# these variables into one categorical predictor\n# finding out whether or not that individual was traveling alone\n","1d7fb3f9":"#From The above Barplot 1st class people are mostly survived****","0d5665ee":"#from the above graph we can look at among all the passengers majority of the survived are children\n#which means Among all the passengers they gave first priority to save children.\n","5a2d1432":"# The passengers who are travelling without family were more likely to die in the disaster than those were with Family\n# It's likely that individal passengers travelling alone were likely male","febce32c":"# Till now we did for train data now we will the same changes for test data\n# I'm apply to same imputation for \"Age\" in the Test data as I did for my Training data(In place of mising , \n# Age(median value)=28) we'll also remove \"Cabin\" variable \n# There were no missing values in the \"Embarked\" port variable.\n#lets add Dummy variable to finalize the test data set.\n# at Final, we'll impute the missing value (with median = 14.45) for \"Fare\"\n","45922158":"**Conclusion :At first we looked at missing values from the both Train & test Data then we find there are missing values in 3 different columns At the Age factor when we  look we found that approx. 20% are there missing values Then in the Cabin column there are mostly 77% of them are missing So we drop that column later we looked at the percentage of missing columns in Embarked we got only 0.22%. \n   After that we did preprocessing & adjusting the data . Then we looked at one more time whether there're any miising values in the Adjusted Data . later we looked at the Passsengers class (i.e.. there're 3 classes S, C, R)\n   Later we looked at relatives of the passengers & the the people came up with their families. and individuls\n   Among the individuls majority of the people are male. Later we got to the conclusion About the which class people are survived mostly \n    Among All the passengers people prefered first save childern & women in the graph it left skewness mostly minor people were survived and the people who paid higher fare were also survived(majority of them) and the majority of the unsurvived are male (individuals).**","5f290ead":"# almost 77% of the cabin records are missing we cannot use this cabin data\n","52dcfa6f":"   **#Exploration for Fare****\n","de4d7dfc":"**One of the most elementary steps to do this is by getting a basic description of your data. A basic description of your data is indeed a very broad term: you can interpret it as a quick and dirty way to get some information on your data, as a way of getting some simple, easy-to-understand information on your data, to get a basic feel for your data. We can use the describe() function to get various summary statistics that exclude NaN values.**","69bae89a":"# Since age is right skewed using mean might get biased results by filling in ages that are older than desired. \n# To deal with this, we'll use the median to impute the missing values.\n\n"}}