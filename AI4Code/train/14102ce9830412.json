{"cell_type":{"e73deeb3":"code","ebf10e14":"code","00464eb4":"code","fc47c4de":"code","d4822f7d":"code","82f34e99":"code","5ac235a2":"code","1f0df9cf":"code","94caf2b2":"code","41aeef32":"code","75fec916":"code","a2441a85":"code","79752aa5":"code","23d77813":"code","2076f9f1":"code","7b16e2ee":"code","0b065d95":"code","64eb589c":"code","ab7e28b0":"code","0a4e4b9a":"code","4668150b":"code","bd7e8706":"code","5af14d64":"code","deb056b5":"code","70ee9a5c":"code","2b187c52":"code","29618a23":"code","7dec4baf":"code","3cf1303d":"code","a8846ab6":"code","15d8035b":"code","da1d8b6b":"code","311670fb":"markdown","a23b7a9b":"markdown","2832d6d7":"markdown","f373ea13":"markdown","f2333a7e":"markdown","c4f36d67":"markdown","ff61c68d":"markdown","96a4f55d":"markdown","bb3a4100":"markdown","0eeb21be":"markdown","1d675dc9":"markdown","d21b3f31":"markdown","51e61223":"markdown","1f7a6c85":"markdown","0880c387":"markdown","cae4f34c":"markdown","f5e6b78d":"markdown","7141ef02":"markdown","71d3f226":"markdown","d8f19df4":"markdown","0cb7b111":"markdown","f534aa42":"markdown","2ea27ace":"markdown","778c3c07":"markdown","97c24743":"markdown","9e2ca6ac":"markdown","86bb904f":"markdown","3cbe50e8":"markdown","34184985":"markdown","66c8c99f":"markdown","26c29979":"markdown","83f682d1":"markdown","a68a6e78":"markdown","a4120331":"markdown","f0d8b9a1":"markdown","e7a3e1a4":"markdown","a948a4c1":"markdown","72315ef5":"markdown","9ebffdf8":"markdown","942fea2e":"markdown","41a4a811":"markdown","f9057a2d":"markdown","7f32a04f":"markdown","fe630881":"markdown","e968a4ad":"markdown","68d92b05":"markdown","0f85202d":"markdown","7bba8523":"markdown","f66dbe6b":"markdown","f5fcd75a":"markdown","814293dc":"markdown","ff2cdd59":"markdown","4d83b0b5":"markdown"},"source":{"e73deeb3":"import math as mt\nimport numpy as np\nimport pandas as pd\nfrom scipy.stats import norm","ebf10e14":"# Place estimators into dictionary \n\nbaseline = {'cookies': 40000,\n            'clicks': 3200,\n            'enrollment': 660,\n            'CTP': 0.08,\n            'Gconversion': 0.20625,\n            'retention': 0.53,\n            'Nconversion': 0.109313}\n\nbaseline","00464eb4":"# Scaling count estimates \n\nbaseline['cookies'] = 5000\n\n# cookies \/ daily number of unique cookies per day \nbaseline['clicks'] = baseline['clicks']*(5000\/40000)\n\nbaseline['enrollment'] = baseline['enrollment']*(5000\/40000)\n\nbaseline","fc47c4de":"# Create p-hat & n \n\nGc = {}\n\nGc['D_min'] = 0.01\n\n# p-hat already given \n    # Alternatively, calc from enrollments \/ clicks \nGc['p'] = baseline['Gconversion']\n\n# Sample \nGc['n'] = baseline['clicks']\n\n# Compute SD, round to 4 decimals\nGc['sd'] = round(mt.sqrt((Gc['p']*(1-Gc['p']))\/Gc['n']), 4)\nGc['sd']","d4822f7d":"R = {}\nR['D_min'] = 0.01\n\nR['p'] = baseline['retention']\n\n# sample size = enrolled users \nR['n'] = baseline['enrollment']\n\nR['sd'] = round(mt.sqrt((R['p']*(1-R['p']))\/R['n']), 4)\nR['sd']","82f34e99":"Nc = {}\nNc['D_min'] = 0.075\n\nNc['p'] = baseline['Nconversion']\n\n# sample size = number of cookies clicked \nNc['n'] = baseline['clicks']\n\nNc['sd'] = round(mt.sqrt((Nc['p']*(1-Nc['p']))\/Nc['n']), 4)\nNc['sd']","5ac235a2":"def get_sd(p,d):\n    sd1 = mt.sqrt(2 * p *(1 - p))\n    sd2 = mt.sqrt(p * (1 - p) + (p + d) * (1-(p + d)\n                                          )\n                 )\n    x = [sd1,sd2]\n    return x","1f0df9cf":"# alpha should already fit required test\n    #Return z-score for alpha \n    \ndef get_z_score(alpha):\n    return norm.ppf(alpha)","94caf2b2":"def get_sd(p,d):\n    sd1 = mt.sqrt(2 * p * (1 - p))\n    sd2 = mt.sqrt(p * (1 - p)+(p + d) * (1 - (p + d)\n                                        )\n                 )\n    sd = [sd1,sd2]\n    return sd\n","41aeef32":"def get_sampSize(sd,alpha,beta,d):\n    n = pow((get_z_score(1 - alpha \/ 2) * sd[0] + get_z_score(1 - beta) * sd[1]),\n            2) \/ pow(d, 2)\n    return n","75fec916":"# Add detectable effect parameter to each metric characteristics for all eval metrics \n\nGc['d'] = 0.01\nR['d'] = 0.01\nNc['d'] = 0.0075","a2441a85":"Gc[\"SamSiz\"]=round(get_sampSize(get_sd(Gc[\"p\"], \n                                          Gc[\"d\"]),\n                                  0.05,0.2,\n                                  Gc[\"d\"])\n                  )\n\nGc[\"SamSiz\"]","79752aa5":"Gc['SamSiz'] = round(Gc['SamSiz'] \/ 0.16*2)\n\nGc['SamSiz']","23d77813":"R['SamSiz'] = round(get_sampSize(get_sd(R['p'],\n                                        R['d']),\n                                        0.05, 0.2,\n                                       R['d']\n                                )\n                   )\n                \n\nR['SamSiz']","2076f9f1":"# 0.08 = CTF\n# 0.20625 = GConversion\n    # 0.20625 = base conversion rate (probability of enrolling, given click)\n    \nR['SamSiz'] = R['SamSiz'] \/ 0.08 \/ 0.20625 * 2\n\nR['SamSiz']","7b16e2ee":"Nc['SamSiz'] = round(get_sampSize(get_sd(Nc['p'], \n                                         Nc['d']), \n                                  0.05, 0.2, \n                                  Nc['d']\n                                 )\n                    )\nNc['SamSiz']","0b065d95":"Nc['SamSiz'] = Nc['SamSiz']\/0.08*2\n\nNc['SamSiz']","64eb589c":"cont = pd.read_csv('..\/input\/control-data\/control_data.csv')\n\nexp = pd.read_csv('..\/input\/experiment-data\/experiment_data.csv')","ab7e28b0":"cont.head()","0a4e4b9a":"pageviews_cont = cont['Pageviews'].sum()\npageviews_exp = exp['Pageviews'].sum()\n\npageviews_total = pageviews_cont + pageviews_exp\n\nprint('number of control pageviews: ', pageviews_cont)\n\nprint('number of experiment pageviews: ', pageviews_exp)","4668150b":"p = 0.5\n\nalpha = 0.05\n\n# Proportion of total \np_hat = round(pageviews_cont \/ (pageviews_total), 4)\n\nsd = mt.sqrt(p * (1 - p) \/ (pageviews_total))\n\nME = round(get_z_score(1 - (alpha \/ 2)) * sd, 4)\n\nprint('Confidence interval is between', p - ME, 'and', p + ME, '; Verify', p_hat, 'is within this range')","bd7e8706":"clicks_cont = cont['Clicks'].sum()\nclicks_exp = exp['Clicks'].sum()\nclicks_total = clicks_cont + clicks_exp\n\np_hat = round(clicks_cont \/ clicks_total, 4)\nsd = mt.sqrt(p * (1 - p) \/ clicks_total)\n\nME = round(get_z_score(1 - (alpha \/ 2)) * sd, 4)\n\nprint('Confidence interval is between', p - ME, 'and', p + ME, '; Verify', p_hat, 'is within this range')","5af14d64":"ctp_cont = clicks_cont \/ pageviews_cont\nctp_exp = clicks_exp \/ pageviews_exp\n\n# Detecable change\nd_hat = round(ctp_exp - ctp_cont, 4)\n\np_pooled = clicks_total \/ pageviews_total\n\nsd_pooled = mt.sqrt(p_pooled * (1 - p_pooled) * (1 \/ pageviews_cont + 1 \/ pageviews_exp))\n\nME = round(get_z_score(1-(alpha \/ 2)) * sd_pooled, 4)\n\nprint('Confidence interval is between', 0-ME, 'and', 0+ME, '; Verify', d_hat, 'is within this range')","deb056b5":"# Count total clicks from complete records \n    # i.e. where rows with pageviews and clicks have corresponding values with enrollments and payments\n    \nclicks_cont = cont['Clicks'].loc[cont['Enrollments'].notnull()].sum()\n\nclicks_exp = exp['Clicks'].loc[exp['Enrollments'].notnull()].sum()\n\nprint(clicks_cont, clicks_exp)","70ee9a5c":"# Gross conversion = P(enrollment | click)\n\nenrol_cont = cont['Enrollments'].sum()\nenrol_exp = exp['Enrollments'].sum()\n\nGC_cont = enrol_cont \/ clicks_cont \nGC_exp = enrol_exp \/ clicks_exp\n\ntotal_enrol = enrol_cont + enrol_exp # xcont + xexp\ntotal_clicks = clicks_cont + clicks_exp\n\n# p_hat pool \nGC_pooled = total_enrol \/ total_clicks \n\nGC_sd_pooled = mt.sqrt(GC_pooled * (1 - GC_pooled) * (1 \/ clicks_cont + 1 \/ clicks_exp))\n\nGC_ME = round(get_z_score(1 - alpha \/ 2) * GC_sd_pooled, 4)\n\nGC_diff = round(GC_exp - GC_cont, 4)\n\nprint('Change due to experiment is', GC_diff * 100, '%')\n\nprint('Confidence interval: [', GC_diff - GC_ME, ',', GC_diff + GC_ME, ']')\n\nprint('Statistically signfiicant if interval does not include 0')\n\nprint('Practically significant if interval does not contain', -Gc['D_min'])","2b187c52":"# Net conversion = number of paying users after 14-day boundary \/ number of clicks on Start Free Trial \n    # P(payment | clicks)\n    \npayments_cont = cont['Payments'].sum()\npayments_exp = exp['Payments'].sum()\n\nNC_cont = payments_cont \/ clicks_cont \nNC_exp = payments_exp \/ clicks_exp \n\ntotal_payments = NC_cont + NC_exp \n\nNC_pooled = total_payments \/ total_clicks \n\nNC_sd_pooled =  mt.sqrt(NC_pooled * (1 - NC_pooled) * (1 \/ clicks_cont + 1 \/ clicks_exp))\n\nNC_ME = round(get_z_score(1 - alpha \/ 2) * GC_sd_pooled, 4)\n\nNC_diff = round(NC_exp - NC_cont, 4)\n\nprint('Change due to experiment is', NC_diff * 100, '%')\nprint('Confidence interval: [', NC_diff - NC_ME, ',', NC_diff + NC_ME, ']')\nprint('Statistically significant if interval does not include 0.')\nprint('Practically significant if interval does not include', Nc['D_min'])","29618a23":"# Merge datasets \n\nmerge = cont.join(other = exp,\n                  how = 'inner',\n                      lsuffix = '_cont',\n                      rsuffix = '_exp')\n\nprint(merge.count())\nmerge.head()","7dec4baf":"# Drop incomplete rows (on any col with 23 observations)\n\nmerge = merge.loc[merge['Payments_exp'].notnull()]\nmerge.count()","3cf1303d":"# Create binary daily col for each metric \n\n    # Return 0 if control > experiment \n        # Return 1 if experiment > control \n\n# GC\nx = merge['Enrollments_cont'] \/ merge['Clicks_cont']\n\ny = merge['Enrollments_exp'] \/ merge['Clicks_exp']\n\nmerge['GC'] = np.where(x > y, 0, 1)\n\n# NC\na = merge['Payments_cont'] \/ merge['Clicks_cont']\n\nb = merge['Payments_exp'] \/ merge['Clicks_exp']\n\nmerge['NC'] = np.where(a > b, 0, 1)\n\nmerge.head()","a8846ab6":"# Experiment > control\nGC_x = merge.GC[merge['GC'] == 1].count()\nNC_x = merge.NC[merge['NC'] == 1].count()\n\nGC_y = merge.GC[merge['GC'] == 0].count()\nNC_y = merge.NC[merge['NC'] == 0].count()\n\nn = merge.NC.count()\n\nprint('Number of cases for GC_x:', GC_x, '\\n',\n      'Number of cases for NC_x:', NC_x, '\\n',\n      'Number of total cases:', n)\n\nprint('Number of cases for GC_y:', GC_y, '\\n',\n      'Number of cases for NC_y:', NC_y, '\\n')","15d8035b":"# Function for calculating probability of x i.e. number of successes \n\ndef get_proba(x, n):\n    p = round(mt.factorial(n) \/ (mt.factorial(x) * mt.factorial(n - x)) * 0.5 ** x * 0.5 ** (n - x), 4)\n    return p \n\n# Function to compute p-val from probabilities of maximum x \n\ndef get_2tail_pval(x, n):\n    p = 0\n    for i in range(0, x + 1):\n        p = p + get_proba(i, n)\n    return 2 * p ","da1d8b6b":"# Significance of obsering extreme values \n\nprint('GC change significant if', get_2tail_pval(GC_x, n), 'is lower than 0.05')\nprint('NC change significant if', get_2tail_pval(NC_x, n), 'is lower than 0.05')","311670fb":"#### At least 39087.0 users enrolled per group \n\n- Convert this val to cookies who clicked & cookies who viewed page\n\n- Multiply both groups by 2 ","a23b7a9b":"### **3. Estimator data**\n\n- Identify baseline values of metrics (how metrics behave before the change)\n\n\n| Item | Description  | Estimator  |\n|:-:|:-:|:-:|\n| Number of cookies | Daily unique cookies to view course overview page  | 40,000  |\n| Number of clicks | Daily unique cookies to click Free Trial button  | 3,200 |\n| Number of enrollments | Free Trial enrollments per day  | 660  |\n| CTP | CTP on Free Trial button  | 0.08  |\n| Gross Conversion | Probability of enrolling, given a click  | 0.20625  |\n| Retention | Probability of payment, given enrollment  | 0.53  |\n| Net Conversion | Probability of payment, given click  | 0.109313 |","2832d6d7":"- 685,325 cookies who viewed the page\n\n- Choose Nc sample size since it is greater than Gross Conversion ","f373ea13":"# **2. Metric choice **\n\n- 2 types: Invariate + evaluation metrics \n\n\n## 2.1 Invar metrics\n\n- Invariate = sanity checks (ensure ways of presenting changes + collecting data is not wrong)\n\n- Invariate metrics should not be affected due to experiment and don't change drastically between control + experiment groups\n\n| Metric Name  | Metric Formula  | $Dmin$  | Notation |\n|:-:|:-:|:-:|:-:|\n| Number of Cookies in Course Overview Page  | # unique daily cookies on page | 3000 cookies  | $C_k$ |\n| Number of Clicks on Free Trial Button  | # unique daily cookies who clicked  | 240 clicks | $C_l$ |\n| Free Trial button Click-Through-Probability  | $\\frac{C_l}{C_k}$ | 0.01  | $CTP$ | ","f2333a7e":"## Eval metrics\n\n#### Gross conversion\n\n- Number of user-ids to complete checkout & enroll in free trial \/ number of unique cookies to click Start Free Trial \n\n- Indicate validity of** H1 **\n\n#### Net conversion \n\n- Number of usder-ids to complete, enroll, and pay \/ number of unique cookies to ckick Start Free Trial \n\n- 14 day boundary applies to net \n\n- Indicate validity of **H2 **","c4f36d67":"### 9.2 H2 validity \n\n- No significant loss in user numbers continuing to free trial, **NO significant reduction","ff61c68d":"### 10.1 Processing ","96a4f55d":"### 6.2 SD1 & SD2 \n\n- Baseline = SD1 - SD \n\n- Expected change = SD2 - SD","bb3a4100":"#### 4.6 Retention\n\n- Baseline proba = P(payment | enrollment)\n\n- Number of paying users enrolled after 14 days \/ number of total enrolled users \n\n- Unit of diversion != unit of analysis \n\n- Cookies = users enrolled \n\n- Analytical estimation of var is insufficient ","0eeb21be":"### **1.1 Experiment description **\n\n- If user clicked free trial, they are given a prompt to indicate how much of their time can be devoted\n\n- If time >= 5 hours \/ week, proceed to checkout \n\n- If t < 5 \/ week, message popup indicating courses generally require higher time commitments\n\n#### Units \n- Unit of diversion = cookie \n\n- Users enrolled on free trials are tracked by user-id \n\n- Same user id cannot enroll free trial twice\n\n#### Tracking method \n\n- Pre-enrollment = cookies \n\n- Post enrollment = user-id \n\n- Non-enrolled = not tracked in experiment, even if they were signed when viewing course overview page ","1d675dc9":"### Click counts","d21b3f31":"### 6.1 ppf method: percent point function or quantile function\n\n- functions return required critical z-score ","51e61223":"### Gross Conversion results \n\n- Negative change in experiment that is both statistically & practically significant \n\n>  -2.06% change = Gross Conversion rate of experiment group decreased as expected by 2% and this change was signfiicant i.e. less users enrolled after the advisory popup \n\n- H1 is valid, significant reduction ","1f7a6c85":"#### > 4 million page views total\n\n- not possible, only 40,000 cookies (pageviews) a day\n\n- Drop metric because results of experiment will be biased, since it is smaller in scale ","0880c387":"#### 4.4 Each metric requires two variables to be plugged:\n\n<br>$\\hat{p}$ - baseline probability of the event to occur <br>\n$ n $ - sample size <br>\n\n- Estimate metric variance for eval. metrics \n","cae4f34c":"## 10. Sign tests double check\n\n- Check if differences are consistent between pairs of observations i.e. decrease \/ increase\n\n- Check if trend of change observed (decreases) is consistently evident in daily observations \n\n- Compute daily metric value \n\n- Compute number of days metric is lower in experiment group\n\n> - Day count = number of successes for binominal variable \n> - where binomial variable = number of successes expected to achive from N experiments, given P(success)","f5e6b78d":"### Pageviews ","7141ef02":"### 7.3 Net conversion sample size calc.","71d3f226":"## 4. Standard deviation estimation\n\n<br>\n<center><font size=\"4\">$SD=\\sqrt{\\frac{\\hat{p}*(1-\\hat{p})}{n}}$<\/font><\/center><br>\n\n- SD necessary for sample size calcs & confidence intervals of results \n\n- Estimate the SD of each eval. metric, given the information of the collected metric estimates. \n\n- Higher variation in metrics = harder to achieve significant result.\n\n- Gconversion & Nconversion are measured as probabilities, expected a norma binomial distribution if sample size is sufficently large \n\n- Assume sample size of 5k cookies \/ day (in each group) for experiment, given the baseline values","d8f19df4":"#### 4.3 Units \n\n- Unit of diversion = element used to differentiate samples, assign them to control & experiment groups\n\n- Unit of analysis = denominator of the formula to calc. Gconversion \n\n- Unit of diversion = Unit of analysis \n\n- Cookies = unique cookies to click (Start free trial)  ","0cb7b111":"## 6. Z-score crit value & SD \n\n- scipy.stats.norm ","f534aa42":"## 10.3 Test\n\n- calc p-val for each metrics using GC_x, NC_x, n, and functions\n\n- $a = 0.05$","2ea27ace":"### 2.2. Metric & Hypothesis \n\n#### Correlation \n\n- Gconversion & Nconversion = correlated \n\n#### H1 expectation\n- If H1 is true, test ***should indicate*** a statistically signfiicant ** reduction in Gross conversion** of experiment group \n\n- i.e. should not be the same \/ higher than control group \n\n#### H2 expectation \n- If H2 is true, test ***should NOT indicate*** a statistically **significant reduction in Net conversion** of experiment group \n\n- i.e. should be the same \/ higher than control group ","778c3c07":"### 8.1.2 Check if difference is random i.e. not significant \n\n- Expectation = number of pageviews in cont is 50% of total pageviews \n\n- Test if observed $\\hat{p}$ is not significantly different from $\\hat{p} = 0.5$\n\n- Calc Margin of Error (ME) at 95% confidence level \n\n<center> <font size=\"4\"> $ ME=Z_{1-\\frac{\\alpha}{2}}SD$ <\/font><\/center>\n\n- Where confidence interval is: \n\n<center> <font size=\"4\"> $ CI=[\\hat{p}-ME,\\hat{p}+ME]$ <\/font><\/center>\n\n- if obsereved $\\hat{p}$ is within CI range, then experiment is fine","97c24743":"### **1.2 Hypothesis **\n\n1) By setting clearer expectations upfront, there is a reduction of frustrated users leaving the free trial \n\n2) No significant reduction in user numbers continuing to the free trial and eventual completion. \n\n3) Overall improvement in user experience","9e2ca6ac":"# 11. Conclusion\n\n- Experiment failed to increase proportion of paying users with time advisory pop-up. \n\n- Experiment negatively changed gross conversion, little change for net conversion. \n\n- Decrease in enrollment not coupled with increase in users staying for 14 days boundary of payment. \n\n- Experiment launch is not recommended.","86bb904f":"### 10.4 Sign test result \n\n- GC change = significant \n\n- NC change = insignificant \n\n> Identical to effect size calculation ","3cbe50e8":"### 8.1.1 Sanity checks for differences between cookie counts \n\n- Check if there is significant quantity difference in the total number of cookie pageviews diverted to each group\n\n- Significant difference implies biased experiment \n\n- Check pageview cookies & click on free trial cookies ","34184985":"### 8.1.4 Check for differences between probabilities\n\n- Verify proportion of clicks is approx. the same in both groups \n\n- CTP is not expected to change due to experiment. \n\n- Calc CTP in each group and calc confidence interval for expected difference between them \n\n- Confirm if $CTP_{exp}-CTP_{cont} = 0$ under an acceptable ME and calculated confidence interval \n\n- CTP is a proportion of the population, similar to how amount of clicks is a proportion of amount of pageviews i.e. amount of events x in population n\n\n- Detectable changes should be calc of standard error i.e. pooled standard error ","66c8c99f":"#### ***Note***: CTP + GConversion = 1","26c29979":"#### Gross conversion sample size required = at least 25,835 cookies who clicked Start Free Trial per group \n\n- For example, 800 'start free trial' clicks out of 5000 page views, 500\/5000 = 0.16\n\n- then Gc['SamSiz]\/0.16 = 161,468.75 pageviews ","83f682d1":"## Invar metrics explained \n\n#### Number of cookies \n- Number of unique cookies to view course overiew \n\n#### Number of clicks \n\n- Number of unique cookies to click start free trial\n\n#### Click through probability \n\n- Number of unique cookies to click start free trial \/ number of cookies to view course overview page ","a68a6e78":"#### 4.7 Nconversion\n\n- Baseline proba = P(payment | a click) \n\n- Number of PAYING users \/ number of unique cookies to click start free trial \n\n- Cookies = number of cookies to click \n\n- Diversion = analysis \n\n- Analytical estimation = sufficient ","a4120331":"#### 4.2 Assumption: metrics are binomially distributed\n\n- Assumption only holds when unit of diversion = unit of analysis\n\n- unit of analysis = denominator of metric formula ","f0d8b9a1":"### 7.1 Gross conversion sample size calc.","e7a3e1a4":"## 9. Effect size computation\n\n- Check changes between control & experiwment groups for EVAL metrics \n\n- Ensure difference exists, is statistically significant & practically significant \n\n- Practical significance = detectable difference is large enough to justify experiment change \n\n\n> * **Signficance:**\nA metric is statistically significant if the confidence interval does not include 0 at lower bound, i.e. confident there is a change. Similarly, practically significant if the confidence interval does not include the practical significance boundary, i.e. confident there is a change that matters to the business.)","a948a4c1":"# **1. Udacity screener **\n- Goal to maximize course completion by user \n\n- Two options: 'start free trial', 'access course materials'","72315ef5":"## 2.3. Eval metrics\n\n- Evaluation = metrics expected to change, relevant to business goals \n\n- Each eval. metric is marked by *Dmin*, a minimum change that is significant to the business e.g. user retention rates. \n\n- What may be statisically significant may not be practically significant to business objectives. \n\n| Metric Name  | Metric Formula  | $Dmin$  | Notation |\n|:-:|:-:|:-:|:-:|\n| Gross Conversion   |  $\\frac{enrolled}{C_l}$  | 0.01  | $Conversion_{Gross}$ |\n| Retention   | $\\frac{paid}{enrolled}$  | 0.01  | $Retention$ |\n| Net Conversion  |  $\\frac{paid}{C_l}$  | 0.0075 | $Conversion_{Net}$ |","9ebffdf8":"#### At least 27,413 cookies who click per group required \n\n- Convert to cookies who clicked through (CTP)","942fea2e":"## 7. Calc sample size per metric \n\n- highest sample size will be the effective size \n\n- Size should account for duration & exposure\n\n- duration & exposure = time to acquire given number of samples in experiment  ","41a4a811":"### Test passes on all INVAR metrics ","f9057a2d":"## 8. Experimental Analysis\n\n- Sanity checks for INVAR metrics ","7f32a04f":"### 9.1 H1 validity \n\n- Less user frustration due to time commitments = less users enrollments after advisory popup \n\n<br> <center><font size=\"5\"> \n$\\hat{p_{pool}}=\\frac{x_{cont}+x_{exp}}{N_{cont}+N_{exp}}$ <\/font><\/center>\n\n<center><font size=\"4\">$SD_{pool}=\\sqrt{\\hat{p_{pool}}(1-\\hat{p_{pool}}(\\frac{1}{N_{cont}}+\\frac{1}{N_{exp}})}$<\/font><\/center>","fe630881":"### 8.1 Sanity Checks\n\n- Verify experiment is conducted as expected \n\n- Confirm other factors did not influence data collected \n\n- Ensure data collection method was correct \n\n### 3 INVAR metrics \n\n1) Number of cookies in course overview \n\n2) Number of clicks on free trial \n\n3) Free Trial CTP\n\n### Check if these observed values behave as expected i.e. if experiment is damaged ","e968a4ad":"#### 2.3 Unused Metrics\n\n- User ID \n\n- (Used) Retention (number of users enrolled past 14-day boundary) ","68d92b05":"### 5.3 min. sample size \n\n<center> <font size=\"5\"> $n = \\frac{(Z_{1-\\frac{\\alpha}{2}}sd_1 + Z_{1-\\beta}sd_2)^2}{d^2}$<\/font>, with: <br><br>\n$sd_1 = \\sqrt{p(1-p)+p(1-p)}$<br><br>\n$sd_2 = \\sqrt{p(1-p)+(p+d)(1-(1-(p+d))}$ <\/center><br>\n\n- $d$ = detectable effect \n\n- $\\hat{p}$ = baseline conversion rate \n\n### 5.4 Simple Hypothesis \n- $H_0 : P_{cont} - P_{exp} = 0$\n\n- $H_1 : P_{cont} - P_{exp} = d$\n\n### 5.5 Necessary inputs & calcs \n\n#### inputs:\n\n- $a,  $1-\\beta$ ,  d, \\hat{p}$\n\n- where $d = D_{min}$\n\n#### calcs:\n\n- $Z$ score for $1-\\frac{\\alpha}{2}$ \n- $Z$ score for $1-\\beta$ \n- SD1 & SD2 for baseline & expected change rate ","0f85202d":"## 10.2 Sign test construction \n\n- Check if number of days where exp > cont is likely to be observed again in new experiment (consistently)\n\n- Assume $P(exp > cont, on a day)$ = 50% \n\n- Use binomial distribution\n> where $p = 0.5$ and number of experiment days to inform of the $P(exp > cont, on a day)$\n\n- Compute probability of $x$ days being a success\n> where success = higher metric experiment value relative to control \n\n- Double the $P(success)$, given this is a two-tailed test\n\n> Doubled value = p-value (proba of observing a more extreme value than or equal to actual observed results | null is true)\n\n- If p-value > $a$, then result is not significant i.e. not consistent \n\n> If 5 extreme days are observed,then p-val for the test is $p-val = P(x <= 2)$\nwhere $P(x < = 5) = P(0) + P(1) + P(2) + P(3) + P(4) + P(5)$","7bba8523":"## 5. Experiment Sizing \n\n- Calc. min. number of samples needed for sufficient statistical power & significant \n\n#### 5.1 Assumptions:\n\n- $a$ = 0.05\n- $B$ = 0.2\n\n#### 5.2 Objective:\n\n- estimate number of total number of page views needed i.e. unique cookies who viewed the product overview page \n\n- divide page views into 2 groups: control & experiment \n","f66dbe6b":"#### 4.1 Data scaling \n\n- All following calculations requires collected count estimates of metrics to be scaled with sample size, specified for var estimation. \n\n- Change 40000 unique cookies to visit page to 5000","f5fcd75a":"### 7.2 Retention sample size calc.","814293dc":"#### 4.5 Gconversion (Gc)\n\n- Baseline proba = P(enrollment | a click) \n\n- number of users to enroll in free trial \/ number of unique cookies to click 'Start Free Trial'\n\n- Unit of diversion = Unit of analysis\n\n- Cookies = number of unique cookies to click \n\n- Sufficient condition for analytical estimation of var\n","ff2cdd59":"#### Total amount of samples per Gross Conversion metric = 322938.0","4d83b0b5":"### Net Conversion results \n\n- Negative change of 0.5% \n\n> Experiment group decreased by 5% after pop-up \n\n- Statistically & practically insignificant \n\n- Within ranges "}}