{"cell_type":{"41c64830":"code","981ffc47":"code","86d02b21":"code","df3e4b27":"code","dd4413f2":"code","3f1b1615":"code","92b58c09":"code","93b0ba4b":"code","796ca7d5":"code","5076e34d":"markdown","5ef5388a":"markdown","fcbd7604":"markdown","f3d54a81":"markdown","330d3c2b":"markdown","85c88756":"markdown","5913596c":"markdown","9d546764":"markdown"},"source":{"41c64830":"\nimport numpy as np \nimport pandas as pd \n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\ndata = pd.read_csv('\/kaggle\/input\/time-series-starter-dataset\/Month_Value_1.csv')\ndata.head()","981ffc47":"print('\\n data types:')\ndata.dtypes","86d02b21":"data[\"Revenue - millions -\"] = data[\"Revenue\"]\/1000000\ndata.head()","df3e4b27":"import matplotlib.dates as mdates\n\nfrom datetime import datetime\n\nfig = plt.figure()\nax = fig.add_subplot(111)\n\nax.xaxis.set_minor_locator(mdates.DayLocator(interval=1))\nax.xaxis.set_major_locator(mdates.DayLocator(interval=5))\nax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))\nx = data['Period']\nts = data['Revenue - millions -'] \n#ax.plot(data['Period'], data['Revenue\/10000'])\nax.plot(x, ts)\nfig.autofmt_xdate()\n\nax.grid(True)\n\nplt.show()","dd4413f2":"fig = plt.figure()\nax = fig.add_subplot(111)\n\nax.xaxis.set_minor_locator(mdates.DayLocator(interval=1))\nax.xaxis.set_major_locator(mdates.DayLocator(interval=5))\nax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))\nx = data['Period']\nts_log = np.log(ts) \n#ax.plot(data['Period'], data['Revenue\/10000'])\nax.plot(x, ts_log)\nfig.autofmt_xdate()\n\nax.grid(True)\n\nplt.show()","3f1b1615":"ts_log_df = pd.DataFrame(ts_log)\nts_log_df['Variance'] = 1\n","92b58c09":"for i in ts_log_df.index:\n    ts_log_df['Variance'].iloc[i] = ts_log_df['Revenue - millions -'].iloc[0:i].var()","93b0ba4b":"ts_log_df.head(20)","796ca7d5":"nb = np.arange(0,96)\nplt.plot(nb,ts_log_df['Variance'])","5076e34d":"So it's true, after a while the variance of the logged series stabilizes.","5ef5388a":" **I have noticed in many situations, especially time series forecast, that it is advised to transform the data using logarithms, especially when dealing with trends; one of the purposes is to stabilize the variance. This notebook compares a series to its logged version and studies variance to observe if, in time, the variance becomes stable.**","fcbd7604":"Ok, so graphically it's noticeable that the series seems more balanced. Let's see if the variance is really stabilising or not. I'm transforming it into a dataframe and then calculating the variance at each new point in the series.","f3d54a81":"Firstly, let's take a look at the data; and the focus will be on the Period and Revenue variables.","330d3c2b":"Now let's graph the variance:","85c88756":"Let's see how the revenue series looks like:","5913596c":"Now let's log it and graph the logged version:","9d546764":"The Revenue variable is expressed in millions, so I'm creating a new variable so it will be easier to follow:"}}