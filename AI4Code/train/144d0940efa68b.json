{"cell_type":{"0951a43c":"code","245a7ac1":"code","93d69b58":"code","02d6cc6b":"code","f4ff3cb8":"code","97e60d8c":"code","9d98d9d4":"code","a03082c0":"code","2d176c0c":"code","133fa6d9":"code","94653f6d":"code","54704d71":"code","c61a36ad":"code","2a612f55":"code","7b293786":"code","4dc5430f":"code","bc27cb28":"code","5d0abaf7":"code","6681eefe":"code","2ccdc193":"code","561239e5":"code","b11fa489":"code","df804f9e":"code","38ddd6e6":"code","07d47e9b":"code","f154f7b9":"code","2ac87097":"code","509f26a7":"code","98204ea9":"code","5f81937e":"code","acaf1a7e":"code","fd754f67":"markdown","48ea1a6a":"markdown","c33e533e":"markdown","7e3bc71e":"markdown","922f93c1":"markdown","80232e2e":"markdown","1411508d":"markdown","6c463a8d":"markdown","531cc1c9":"markdown","9bfb6d55":"markdown","9cd86739":"markdown","2d3e4804":"markdown","6f55d9fe":"markdown","1159122e":"markdown","47567a38":"markdown","1fd7e54b":"markdown","a31f9ea2":"markdown","8a5d6564":"markdown","d734b4ec":"markdown","f6125710":"markdown","4b6dbc29":"markdown","1340eb81":"markdown","c5b577dd":"markdown","aa293238":"markdown","c6d08799":"markdown","a0624858":"markdown","4c04d0b3":"markdown"},"source":{"0951a43c":"# Data Processing\nimport numpy as np\nimport pandas as pd\n\n# Basic Visualization tools\nimport matplotlib\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\nplt.rcParams['figure.dpi'] = 300\nimport seaborn as sns\nsns.set_palette('husl')\n\n\n# Bokeh (interactive visualization)\nimport bokeh\nfrom bokeh.io import show, output_notebook\nfrom bokeh.palettes import Spectral9\nfrom bokeh.plotting import figure\noutput_notebook() # You can use output_file()\n\n# Special Visualization\nimport wordcloud, missingno\nfrom wordcloud import WordCloud # wordcloud\nimport missingno as msno # check missing value\nimport networkx as nx\n\n# Check file list\nimport os\nprint(os.listdir('..\/input\/17k-apple-app-store-strategy-games'))","245a7ac1":"# Version Check!!\nprint(\"matplotlib\", matplotlib.__version__)\nprint(\"seaborn\", sns.__version__)\nprint(\"bokeh\", bokeh.__version__)\nprint(\"missingno\", missingno.__version__)\nprint(\"wordcloud\", wordcloud.__version__)\nprint(\"networkX\", nx.__version__)","93d69b58":"data = pd.read_csv('..\/input\/17k-apple-app-store-strategy-games\/appstore_games.csv')","02d6cc6b":"data.describe() #numeric","f4ff3cb8":"data.describe(include='O') #categorical","97e60d8c":"data = data.drop(['URL', 'ID'], axis=1)","9d98d9d4":"msno.matrix(data)","a03082c0":"print(data.columns)","2d176c0c":"%%time\nfig, ax = plt.subplots(1, 2, figsize=(16,32))\nwordcloud = WordCloud(background_color='white',width=800, height=800).generate(' '.join(data['Name']))\nwordcloud_sub = WordCloud(background_color='white',width=800, height=800).generate(' '.join(data['Subtitle'].dropna().astype(str)) )\nax[0].imshow(wordcloud)\nax[0].axis('off')\nax[0].set_title('Wordcloud(Name)')\nax[1].imshow(wordcloud_sub)\nax[1].axis('off')\nax[1].set_title('Wordcloud(Subtitle)')\nplt.show()","133fa6d9":"%%time\nimport matplotlib.pyplot as plt\nimport requests\nfrom PIL import Image\nfrom io import BytesIO\n\nfig, ax = plt.subplots(10,10, figsize=(12,12))\n\nfor i in range(100):\n    r = requests.get(data['Icon URL'][i])\n    im = Image.open(BytesIO(r.content))\n    ax[i\/\/10][i%10].imshow(im)\n    ax[i\/\/10][i%10].axis('off')\nplt.show()","94653f6d":"aur = data['Average User Rating'].value_counts().sort_index()\np = figure(x_range=list(map(str, aur.index.values)), \n           plot_height=250, title=\"Average User Rating\", \n           toolbar_location=None, \n           tools=\"\")\n\np.vbar(x=list(map(str, aur.index.values)), \n       top=aur.values, \n       width=0.9, \n       color=Spectral9)\n\np.xgrid.grid_line_color = None\np.y_range.start = 0\nshow(p)","54704d71":"fig, ax = plt.subplots(1,2,figsize=(16, 4))\nsns.countplot(data['Average User Rating'],ax=ax[0]) # seaborn\nax[1].bar(aur.index, aur, width=0.4) # matplotlib\nax[1].set_title('Average User Rating')\nplt.show()","c61a36ad":"# price_column = list(map(str, data['Price'].value_counts().sort_index().index))\n# rating_index = list(map(str, data['Average User Rating'].value_counts().sort_index().index))\n# pr_table = pd.DataFrame(columns=price_column, index=rating_index)\n\n# for price in price_column:\n#     for rate in rating_index:\n#         pr_table[price][rate] = len(data[(data['Price']==float(price) )& (data['Average User Rating'] == float(rate))])\n        \n# pr_table","2a612f55":"fig, ax = plt.subplots(1,1, figsize=(12, 7), dpi=72)\nsns.regplot(data=data, x='Price', y='Average User Rating', ax=ax)\nplt.show()","7b293786":"price_list = sorted(data['Price'].dropna().unique())\nrating_stat = pd.DataFrame(columns=['mean', 'std', 'count'], index=price_list)\nfor price in price_list:\n    tmp = data[data['Price']==price]['Average User Rating'].dropna()\n    rating_stat['mean'][price] = tmp.mean()\n    rating_stat['std'][price] = tmp.std()\n    rating_stat['count'][price] = len(tmp)\n\nrating_stat.T.head(len(price_list))","4dc5430f":"genre = data['Primary Genre'].value_counts()\np = figure(x_range=list(map(str, genre.index.values)), \n           plot_height=250, plot_width=1500, title=\"Primary Genre\", \n           toolbar_location=None, \n           tools=\"\")\n\np.vbar(x=list(map(str, genre.index.values)), \n       top=genre.values, \n       width=0.9, \n       color=Spectral9)\n\np.xgrid.grid_line_color = None\np.y_range.start = 0\nshow(p)","bc27cb28":"data['Genres'].head()","5d0abaf7":"data['GenreList'] = data['Genres'].apply(lambda s : s.replace('Games','').replace('&',' ').replace(',', ' ').split()) \ndata['GenreList'].head()","6681eefe":"gameTypes = []\nfor i in data['GenreList']: gameTypes += i\ngameTypes = set(gameTypes)\nprint(\"There are {} types in the Game Dataset\".format(len(set(gameTypes))))","2ccdc193":"from sklearn.preprocessing import MultiLabelBinarizer # Similar to One-Hot Encoding\n\ntest = data['GenreList']\nmlb = MultiLabelBinarizer()\nres = pd.DataFrame(mlb.fit_transform(test), columns=mlb.classes_, index=test.index)","561239e5":"\ncorr = res.corr()\nmask = np.zeros_like(corr, dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\nf, ax = plt.subplots(figsize=(15, 14))\ncmap = sns.diverging_palette(220, 10, as_cmap=True)\nsns.heatmap(corr, mask=mask, cmap=cmap, vmax=.3, center=0,square=True, linewidths=.5, cbar_kws={\"shrink\": .5})","b11fa489":"import networkx as nx\n\nstocks = corr.index.values\ncor_matrix = np.asmatrix(corr)\nG = nx.from_numpy_matrix(cor_matrix)\nG = nx.relabel_nodes(G,lambda x: stocks[x])\nG.edges(data=True)\n\ndef create_corr_network(G, corr_direction, min_correlation):\n    H = G.copy()\n    for stock1, stock2, weight in G.edges(data=True):\n        if corr_direction == \"positive\":\n            if weight[\"weight\"] <0 or weight[\"weight\"] < min_correlation:\n                H.remove_edge(stock1, stock2)\n        else:\n            if weight[\"weight\"] >=0 or weight[\"weight\"] > min_correlation:\n                H.remove_edge(stock1, stock2)\n                \n    edges,weights = zip(*nx.get_edge_attributes(H,'weight').items())\n    weights = tuple([(1+abs(x))**2 for x in weights])\n    d = nx.degree(H)\n    nodelist, node_sizes = zip(*d)\n    positions=nx.circular_layout(H)\n    \n    plt.figure(figsize=(10,10), dpi=72)\n\n    nx.draw_networkx_nodes(H,positions,node_color='#DA70D6',nodelist=nodelist,\n                           node_size=tuple([x**2 for x in node_sizes]),alpha=0.8)\n    \n    nx.draw_networkx_labels(H, positions, font_size=8, \n                            font_family='sans-serif')\n    \n    if corr_direction == \"positive\": edge_colour = plt.cm.GnBu \n    else: edge_colour = plt.cm.PuRd\n        \n    nx.draw_networkx_edges(H, positions, edge_list=edges,style='solid',\n                          width=weights, edge_color = weights, edge_cmap = edge_colour,\n                          edge_vmin = min(weights), edge_vmax=max(weights))\n    plt.axis('off')\n    plt.show() \n    \ncreate_corr_network(G, 'positive', 0.3)\ncreate_corr_network(G, 'positive', -0.3)","df804f9e":"import squarify\ny = res.apply(sum).sort_values(ascending=False)[:20]\n    \nplt.rcParams['figure.figsize'] = (30, 10)\nplt.style.use('fivethirtyeight')\n\nsquarify.plot(sizes = y.values, label = y.index)\nplt.title('Top 30 Main Word', fontsize = 30)\nplt.axis('off')\nplt.show()","38ddd6e6":"!pip install pywaffle\nfrom pywaffle import Waffle","07d47e9b":"# type 2 : Auto-Size\nfig = plt.figure(\n    FigureClass=Waffle, \n    rows=13, \n    columns=21, \n    values=y,\n    labels=[\"{}({})\".format(a, b) for a, b in zip(y.index, y) ],\n    legend={'loc': 'lower left', 'bbox_to_anchor': (0, -0.4), 'ncol': len(y)\/\/3,  'framealpha': 0},\n    font_size=20, \n    figsize=(12, 12),  \n    icon_legend=True\n)\n\nplt.title('Waffle Chart : Genre distribution')\n\nplt.show()","f154f7b9":"data['Original Release Date'] = pd.to_datetime(data['Original Release Date'], format = '%d\/%m\/%Y')\ndate_size = pd.DataFrame({'size':data['Size']})\ndate_size = date_size.set_index(data['Original Release Date'])\ndate_size = date_size.sort_values(by=['Original Release Date'])\ndate_size.head()","2ac87097":"date_size['size'] = date_size['size'].apply(lambda b : b\/\/(2**10)) # B to KB","509f26a7":"fig = figure(x_axis_type='datetime',           \n             plot_height=250, plot_width=750,\n             title='Date vs App Size')\nfig.line(y='size', x='Original Release Date', source=date_size)\nshow(fig)","98204ea9":"monthly_size = date_size.resample('M').mean()\ntmp = date_size.resample('M')\nmonthly_size['min'] = tmp.min()\nmonthly_size['max'] = tmp.max()\nmonthly_size.head()","5f81937e":"fig = figure(x_axis_type='datetime',           \n             plot_height=250, plot_width=750,\n             title='Date vs App Size (Monthly)')\nfig.line(y='size', x='Original Release Date', source=monthly_size, line_width=2, line_color='Green')\nshow(fig)","acaf1a7e":"yearly_size = date_size.resample('Y').mean()\nmonthly_size.head()\nfig = figure(x_axis_type='datetime',           \n             plot_height=250, plot_width=750,\n             title='Date vs App Size (Monthly & Yearly)')\nfig.line(y='size', x='Original Release Date', source=monthly_size, line_width=2, line_color='Green', alpha=0.5)\nfig.line(y='size', x='Original Release Date', source=yearly_size, line_width=2, line_color='Orange', alpha=0.5)\nshow(fig)","fd754f67":"## Import default Library & Check Data \n<a id=\"#1\"><\/a>\n","48ea1a6a":"### heatmap (correlation)\n\nA **heatmap** is a graphical representation of data where the individual values contained in a matrix are represented as colors.\n\nUsually we use corr to calculate the correlation and draw it as a heatmap.\n\nIt is also effective for drawing contours from three-dimensional data.","c33e533e":"You can use this on **seaborn** and **matplotlib** like this","7e3bc71e":"There seems to be no tendency","922f93c1":"## Simple Ideas of Visualization\n<a id=\"#2\"><\/a>\n\n\n**Goal : Create a story with visualization**\n\n### Single Feature\n\nHere's a simple idea about handling a single feature:\n\n| Column Name                  | Type             | Simple Idea                     | Check|\n| ---------------------------- | ---------------- | ------------------------------- | ---- |\n| URL                          | Text(url)        | need to drop                    | O |\n| ID                           | Number(key_id)   | need to drop                    | O |\n| Name                         | Text (Title)     | Word Cloud                      | O |\n| Subtitle                     | Text (Sub_Title) | Word Cloud                      | O |\n| Icon URL                     | Text(url)        | Crawling Image                  | O |\n| Average User Rating          | Float(Score)     | Countplot                       | O |\n| User Rating Count            | Int(Counting)    | Outlier, Pie Chart              |   |\n| Price                        | Float(Price)     | Outlier, Pie Chart              | O |\n| In-app Purchases             | Float(Price)     | preprocessing, minmax graph     |   |\n| Description                  | Text             | need to drop                    |   |\n| Developer                    | Text             | WordCloud?                      |   |\n| Age Rating                   | Int(Ordinal)     | '+' remove                      |   |\n| Language                     | Text             | TreeMap, Countplot              |   |\n| Size                         | Int (Byte)       | Unit Converting, distplot       | O |\n| Primary Genre                | Text             | treemap                         | O |\n| Genres                       | Text             | treemp, network graph           | O |\n| Original Release Date        | Date             | Time Series                     | O |\n| Current Version Release Date | Date             | Time Series                     |   |\n\n\n### Two or More Features\n\nLet's make more stories in Data\n\n- Price & User Rating Count : Could paid apps lead to user reactions?\n- Price & Age Rating : Price by age group\n- Genre & Size: Relationship between Genre and Size (add more features and make simple regression model)\n- Title & Subtitle & Genres : Tendency of titles by genre\n","80232e2e":"### Treemap (counting based)\n\n`squarify` can draw Treemap, but I prefer `plotly`'s treemap. ;)","1411508d":"## Average User Rating (Bokeh : countplot compare)\n<a id=\"#6\"><\/a>","6c463a8d":"Simple Plotting version.","531cc1c9":"**If you like this notebook, please upvote :)**\n\n---\n\n`use` means what i used.\n\n### Static\n\n\n| Name           | Description                                | Documentation                                          | Github                                             | use |\n| -------------- | ------------------------------------------ | ------------------------------------------------------ | -------------------------------------------------- | --- |\n| **matplotlib** | base | [matplotlib](https:\/\/matplotlib.org\/)                  | [github](https:\/\/github.com\/matplotlib\/matplotlib) | O   |\n| **seaborn**    | matplotlib based      | [seaborn](http:\/\/seaborn.pydata.org\/)                  | [github](https:\/\/github.com\/mwaskom\/seaborn)       | O   |\n| **plotnine**   | ggplot2        | [plotnine](https:\/\/plotnine.readthedocs.io\/en\/stable\/) | [github](https:\/\/github.com\/has2k1\/plotnine)       | X   |\n\n\n### Interactive\n\n\n| Name          | Description | Documentation                            | Github                                            | use |\n| ------------- | ----------- | ---------------------------------------- | ------------------------------------------------- | --- |\n| **plotly**    |             | [plotly](https:\/\/plot.ly\/python\/)        | [github](https:\/\/github.com\/plotly\/plotly.py)     | O   |\n| **bokeh**     |             | [bokeh](https:\/\/bokeh.org\/)              | [github](https:\/\/github.com\/bokeh\/bokeh)          | O   |\n| **altair**    |             | [altair](https:\/\/altair-viz.github.io\/)  | [github](https:\/\/github.com\/altair-viz\/altair)    | O   |\n| **pygal**     |             | [pygal](http:\/\/www.pygal.org\/en\/stable\/) | [github](https:\/\/github.com\/Kozea\/pygal)          | X   |\n| **pyecharts** |             | [pyecharts](https:\/\/pyecharts.org\/)      | [github](https:\/\/github.com\/pyecharts\/pyecharts\/) | X   |\n\n### Network\n\n\n| Name              | Description | Documentation                                                | Github                                            | use |\n| ----------------- | ----------- | ------------------------------------------------------------ | ------------------------------------------------- | --- |\n| **networkx**      |             | [networkx](https:\/\/networkx.github.io\/documentation\/stable\/) | [github](https:\/\/github.com\/networkx\/networkx)    | O   |\n| **python-igraph** |             | [python-igraph](https:\/\/igraph.org\/python\/)                  | [github](https:\/\/github.com\/igraph\/python-igraph) | X   |\n\n\n### Geo\n\n\n\n| Name           | Description                      | Documentation                                                                          | Github                                                                                 | use |\n| -------------- | -------------------------------- | -------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- | --- |\n| **folium**     | leaflet.js                       | [folium](https:\/\/python-visualization.github.io\/folium\/)                               | [github](https:\/\/github.com\/python-visualization\/folium)                               | O   |\n| **geopandas**  |                                  | [geopandas](https:\/\/geopandas.readthedocs.io\/en\/latest\/)                               | [github](https:\/\/github.com\/geopandas\/geopandas)                                       | X   |\n| **googlemaps** | google map API                    | [googlemaps](https:\/\/googlemaps.github.io\/google-maps-services-python\/docs\/index.html) | [github](https:\/\/github.com\/googlemaps\/google-maps-services-python)                    | X   |\n| **kepler.gl**  | Jupyter Widget tool(3D) | [kepler.gl](https:\/\/docs.kepler.gl\/docs\/keplergl-jupyter)                              | [github](https:\/\/github.com\/keplergl\/kepler.gl\/tree\/master\/bindings\/kepler.gl-jupyter) | X   |\n\n### ETC\n\n| Name          | Description   | Documentation                                          | Github                                               | use |\n| ------------- | ------------- | ------------------------------------------------------ | ---------------------------------------------------- | --- |\n| **missingno** | missing value        |                                                        | [github](https:\/\/github.com\/ResidentMario\/missingno) | O   |\n| **pywaffle**  | waffle chart     | [pywaffle](https:\/\/pywaffle.readthedocs.io\/en\/latest\/) | [github](https:\/\/github.com\/gyli\/PyWaffle)           | O   |\n| **wordcloud** | wordcloud | [wordcloud](https:\/\/amueller.github.io\/word_cloud\/)    | [github](https:\/\/github.com\/amueller\/word_cloud)     | O   |\n| **squarify**  | treemap        |                                                        | [github](https:\/\/github.com\/laserson\/squarify)       | O   |\n\n\n### Interpretable AI\n\n\n| Name         | Description     | Documentation                                                 | Github                                      | use |\n| ------------ | --------------- | ------------------------------------------------------------- | ------------------------------------------- | --- |\n| **SHAP**     | Shapley + @     | [SHAP](https:\/\/shap.readthedocs.io\/en\/latest\/#)               | [github](https:\/\/github.com\/slundberg\/shap) | O   |\n| **dtreeviz** | decision tree | [dtreeviz](https:\/\/explained.ai\/decision-tree-viz\/index.html) | [github](https:\/\/github.com\/parrt\/dtreeviz) | O   |\n| **LIME**     |                 | [LIME](https:\/\/lime-ml.readthedocs.io\/en\/latest\/lime.html)    | [github](https:\/\/github.com\/marcotcr\/lime)  | X   |\n\n","9bfb6d55":"You can check the simple data information by using `describe` method.","9cd86739":"## Road to Viz Expert!!!\n\n![app store](https:\/\/developer.apple.com\/news\/images\/og\/app-store-og.png)\n\nI would like to record my practice to become an expert in data visualization. \n\n> And I finally become Kaggle Notebook Master!\n\n---\n\n**Table of Contents**\n\n- Import Default Library & Check Data\n- Simple Ideas Of Visualization\n- Check Missing Data (**`Missingno`**)\n- Name & Subtitle (**`Word Cloud`**)\n- Icon URL (**`Requests` & Crawling**)\n- Average User Rating (**`Bokeh`** : Countplot Compare)\n- Price & Rating (**`Seaborn`** : Regplot, Lmplot)\n- Primary Genre & Genres (**`NetworkX`**, Network Graph, seaborn heatmap)\n- Primary Genre & Genres (**`Squarify`**, Treemap)\n- Primary Genre & Genres (**`PyWaffle`**, Waffle Chart)\n- Original Release Date & Size (Time Series with bokeh)\n\n","2d3e4804":"Not surprisingly, Games are the majority.\n\n\n\n","6f55d9fe":"## Name & Subtitle (Word Cloud)\n<a id=\"#4\"><\/a>\n\n\n- Which words are most used\n\nA **tag cloud** (**word cloud**, or weighted list in visual design) is a novelty visual representation of text data, typically used to depict keyword metadata (tags) on websites, or to visualize free form text.\n\nUsing WordCloud package, we can easily make workcloud image.\n\n","1159122e":"As you can see, there seems to be little relationship between price and rating. Most of the ratings are 4 points.\n\nHow about mean and std value?","47567a38":"I want to look at the relationship between price and rating. Use regplot as a simple plot for this","1fd7e54b":"## Price & Rating (seaborn : regplot, lmplot)\n<a id=\"#7\"><\/a>","a31f9ea2":"Bokeh don't have countplot. so we have to implement ad-hoc\n\n1. Use Pandas method : `value_counts()` \n2. Sort this values. Becauses `value_counts()` values are already sort by counting numbers. use `sort_index()`\n3. x_range should be string list. so use `map` to convert index values","8a5d6564":"Let's look at the month for trends.\n\nWe can use `resample` method. \n\nThe criteria for grouping depend on the parameters.\n\n'M' means 'end of month', 'Y' means 'Year'.","d734b4ec":"## Original Release Date & Size (time series with bokeh)\n<a id=\"#9\"><\/a>\n\nWe will look at trends in app size over time.\n\n1. First, Convert `str` to `datetime` type\n2. re-index by using `set_index`","f6125710":"## Check Missing Data (missingno)\n<a id=\"#3\"><\/a>\n\n`missingno` provides a small toolset of flexible and easy-to-use missing data visualizations and utilities that allows you to get a quick visual summary of the completeness (or lack thereof) of your dataset. ","4b6dbc29":"## Primary Genre & Genres (Heatmap + networkx, Network Graph, Treemap)\n<a id=\"#8\"><\/a>","1340eb81":"- **Name**\n    - Game, Free, War, Defense, Puzzle, Block, Chess\n- **Subtitle**\n    - Game, Classic, Battle, Puzzle, Best, Fun","c5b577dd":"### Graph (corr)\n\nNetworkX is a Python package for the creation, manipulation, and study of the structure, dynamics, and functions of complex networks.\n\n**Reference**\n- [Visualising stocks correlations with Networkx](https:\/\/towardsdatascience.com\/visualising-stocks-correlations-with-networkx-88f2ee25362e)","aa293238":"## Icon URL (requests & Crawling)\n<a id=\"#5\"><\/a>\n\nThis data is provided as a URL. In this case, you can get it by crawling. Please check your internet connection.\n\n- single url crawling: 0.5 sec\n- total : 17000 * 0.5 = 8500 s = over 2 hour.. OMG \n\njust testing sample code (100 image)","c6d08799":"How about sub-Genres?","a0624858":"How do you know the correlation between them?\n\n1. heatmap : using `seaborn` heatmap\n2. graph : using `networkx` and `plotly`","4c04d0b3":"### Waffle Chart (counting base)\n\nyou can draw waffle chart by using `pywaffle`."}}