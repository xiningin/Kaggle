{"cell_type":{"d2d67e03":"code","934986d2":"code","0a73edb1":"code","423b4901":"code","fedbbd08":"code","6b4276d0":"code","9da98f6b":"code","4db3fec2":"markdown","49dfeff2":"markdown","f4373f1b":"markdown","da777faf":"markdown","30f3f86d":"markdown","9d119b53":"markdown"},"source":{"d2d67e03":"# libraries\n#%matplotlib notebook\nimport os\nimport pandas as pd\nimport numpy as np\nimport json\n\nimport matplotlib\nimport seaborn\nimport matplotlib.dates as md\nfrom matplotlib import pyplot as plt","934986d2":"data = {}\npath = '..\/input\/nab-github-version\/NAB-master\/data\/'\n\ndef addFolderAndReadAll(f_name):\n    data[f_name] = {}\n    csvs = os.listdir(path + '\/' + f_name)\n    csvs_num = 0\n    for csv in csvs:\n        data[f_name][csv] = pd.read_csv(path + '\/' + f_name + '\/' + csv)\n        csvs_num += 1\n    return csvs_num\n\ncsvs_num = sum([addFolderAndReadAll(f_name) for f_name in os.listdir(path) if os.path.isdir(path + f_name)])","0a73edb1":"data['realKnownCause']['rogue_agent_key_updown.csv']","423b4901":"with open('..\/input\/nab-github-version\/NAB-master\/labels\/combined_windows.json', 'r') as file:\n    labels = json.load(file)","fedbbd08":"for key1 in data:\n    for key2 in data[key1]:\n        one_csv_labels = labels[key1+'\/'+key2]\n        data[key1][key2]['interval'] = np.array(0)\n        num = 0\n        for interval in one_csv_labels:\n            #print(key2, interval, num)\n            index1 = list(data[key1][key2]['timestamp']).index(interval[0][:19])\n            index2 = list(data[key1][key2]['timestamp']).index(interval[1][:19])\n            data[key1][key2]['interval'][num] = slice(index1, index2)\n            num += 1\n            ","6b4276d0":"data['realTweets']['Twitter_volume_GOOG.csv']","9da98f6b":"fig = plt.figure(figsize=(20, 300))\n\nnum = 0\nfor key1 in data:\n    for key2 in data[key1]:\n        num += 1\n        y = data[key1][key2]['value']\n        x = pd.to_datetime(data[key1][key2]['timestamp'])\n        \n        ax = fig.add_subplot(csvs_num,1,num)\n        \n        ax.title.set_text(key1+'\/'+key2)\n        ax.set_xlabel('Time')\n        ax.set_ylabel('Data')\n        plt.setp(ax.get_xticklabels(), size=8)\n        ax.plot(x, y, 'b-', linewidth=2)\n        i = 0\n        while data[key1][key2]['interval'][i] != 0:\n            bold = data[key1][key2]['interval'][i]\n            ax.plot(x[bold], y[bold], 'r-', linewidth=1)\n            i += 1\n        ax.scatter(x, y)\n\nplt.grid()\nplt.show()","4db3fec2":"## 1.2 Visualize data and anomalies ","49dfeff2":"This Notebook contains overview of NAB dataset https:\/\/www.kaggle.com\/boltzmannbrain\/nab.\nBut data from this notebook was downloaded from dataset's github repository as it bigger and also contains labels for anomalies.\nhttps:\/\/github.com\/numenta\/NAB","f4373f1b":"Blue is normal datapoints. Red is anomaly.","da777faf":"# 1 Data\n## 1.1 Extract data\nExtract all the data in one python dictionary","30f3f86d":"Loading anomaly labels and retrieving corresponding indices in the dataset.","9d119b53":"#### Scoreboard (from https:\/\/github.com\/numenta\/NAB)\n\nThe NAB scores are normalized such that the maximum possible is 100.0 (i.e. the perfect detector), and a baseline of 0.0 is determined by the \"null\" detector (which makes no detections).\n\n| Detector      | Standard Profile | Reward Low FP | Reward Low FN |\n|---------------|------------------|---------------|---------------|\n| Perfect       | 100.0            | 100.0         | 100.0         |\n| [Numenta HTM](https:\/\/github.com\/numenta\/nupic)* | 70.5-69.7     | 62.6-61.7     | 75.2-74.2     |\n| [CAD OSE](https:\/\/github.com\/smirmik\/CAD)&dagger; | 69.9          | 67.0          | 73.2          |\n| [earthgecko Skyline](https:\/\/github.com\/earthgecko\/skyline) | 58.2 | 46.2 | 63.9 |\n| [KNN CAD](https:\/\/github.com\/numenta\/NAB\/tree\/master\/nab\/detectors\/knncad)&dagger; | 58.0     | 43.4  | 64.8     |\n| [Relative Entropy](http:\/\/www.hpl.hp.com\/techreports\/2011\/HPL-2011-8.pdf) | 54.6 | 47.6 | 58.8 |\n| [Random Cut Forest](http:\/\/proceedings.mlr.press\/v48\/guha16.pdf) **** | 51.7 | 38.4 | 59.7 |\n| [Twitter ADVec v1.0.0](https:\/\/github.com\/twitter\/AnomalyDetection)| 47.1             | 33.6          | 53.5          |\n| [Windowed Gaussian](https:\/\/github.com\/numenta\/NAB\/blob\/master\/nab\/detectors\/gaussian\/windowedGaussian_detector.py) | 39.6             | 20.9         | 47.4          |\n| [Etsy Skyline](https:\/\/github.com\/etsy\/skyline) | 35.7             | 27.1          | 44.5          |\n| Bayesian Changepoint**          | 17.7              | 3.2           | 32.2           |\n|  [EXPoSE](https:\/\/arxiv.org\/abs\/1601.06602v3)   | 16.4     | 3.2  | 26.9     |\n| Random***       | 11.0             | 1.2          | 19.5          |\n| Null          | 0.0              | 0.0           | 0.0           |"}}