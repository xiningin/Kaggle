{"cell_type":{"47cf0163":"code","4b80a3de":"code","33dd1f84":"code","a05759e5":"code","9989b801":"code","6e77cf46":"code","7147c35d":"markdown","d9573dc3":"markdown","7045a996":"markdown","33a7c704":"markdown","4913ec10":"markdown","56d8a6f9":"markdown","a90f507a":"markdown","fbf2d710":"markdown"},"source":{"47cf0163":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom tqdm import tqdm","4b80a3de":"df = pd.read_csv('..\/input\/east-sea-ocean-current\/data_for_vis.csv')\ndf","33dd1f84":"df['velocity'] = np.sqrt(df['ugs'] ** 2 + df['vgs'] ** 2)\ndf","a05759e5":"year_vgs = df.groupby(['year', 'lat', 'lon'])['vgs'].mean()\nyear_ugs = df.groupby(['year', 'lat', 'lon'])['ugs'].mean()\nyear_vel = df.groupby(['year', 'lat', 'lon'])['velocity'].mean()","9989b801":"def Plot_Quiver(year):\n  year_len = len(df[(df['year'] == year) & (df['month'] == 1) & (df['day'] == 1)])\n  for i in range(len(year_vgs.index)):\n    if (year_vgs.index[i] == (year, 34.125, 127.625)):\n      vgs = year_vgs[year_vgs.index[i:i + year_len]].values\n      ugs = year_ugs[year_ugs.index[i:i + year_len]].values\n      vel = year_vel[year_vel.index[i:i + year_len]].values\n    \n  vel_q_25 = (np.median(vel) + vel.min())\/2\n  vel_q_50 = np.median(vel)\n  vel_q_75 = (np.median(vel) + vel.max())\/2\n\n  q_25_index = []\n  for i in range(len((vel < vel_q_25))):\n    if (vel < vel_q_25)[i]:\n      q_25_index.append(i)\n\n  q_50_index = []\n  for i in range(len(((vel < vel_q_50) & (vel > vel_q_25)))):\n    if ((vel < vel_q_50) & (vel > vel_q_25))[i]:\n      q_50_index.append(i)\n\n  q_75_index = []\n  for i in range(len(((vel < vel_q_75) & (vel > vel_q_50)))):\n    if ((vel < vel_q_75) & (vel > vel_q_50))[i]:\n      q_75_index.append(i)\n\n  q_75_index_over = []\n  for i in range(len((vel < vel_q_75))):\n    if (vel > vel_q_75)[i]:\n      q_75_index_over.append(i)\n  \n  lat = df['lat'][i:i + year_len]\n  lon = df['lon'][i:i + year_len]\n\n  plt.figure(figsize = (10, 10))\n\n  plt.quiver(lon.iloc[q_75_index_over], lat.iloc[q_75_index_over], ugs[q_75_index_over], vgs[q_75_index_over], color = 'red', label = 'Velocity > Q3', scale = 10, width=0.005)\n  plt.quiver(lon.iloc[q_75_index], lat.iloc[q_75_index], ugs[q_75_index], vgs[q_75_index], color = 'orange', label = 'Q2 < Velocity < Q3', scale = 10)\n  plt.quiver(lon.iloc[q_50_index], lat.iloc[q_50_index], ugs[q_50_index], vgs[q_50_index], color = 'yellow', label = 'Q1 < Velocity < Q2', scale = 7)\n  plt.quiver(lon.iloc[q_25_index], lat.iloc[q_25_index], ugs[q_25_index], vgs[q_25_index], color = 'blue', label = 'Velocity < Q1', scale = 5)\n  plt.legend()","6e77cf46":"Plot_Quiver(2016)","7147c35d":"#### **Making Current Velocity Column**\n#### Using velocity column for devide quantile(Q1, Q2, Q3)","d9573dc3":"#### **Using Groupby for average vgs, ugs, velocity from year, lat, lon**","7045a996":"# **Plot!**\n\n### **Use QuiverPlot for plot those vectors**","33a7c704":"# **Feature Engineering**","4913ec10":"<img src=\"http:\/\/imagedata.cafe24.com\/us_hi\/us_hi_57-1.jpg\" width=\"400\" height=\"300\"\/>","56d8a6f9":"### You can use Plot_Quiver function to plot 1993 ~ 2018 East Sea Current","a90f507a":"# **Import Library**","fbf2d710":"# **Load Data**"}}