{"cell_type":{"b5b5e35c":"code","c2c3b4db":"code","15bc0c42":"code","91c206c2":"code","757e290e":"code","ecc034bc":"code","9a76cb47":"code","6eaae7d7":"code","ede4a9f9":"code","dd56449c":"code","ee1ed79d":"code","f298004a":"code","0d372824":"code","9e0920ac":"code","7794733e":"code","aa9d1363":"code","05cf8d14":"code","c2968d38":"code","c5eca25e":"code","d5a77715":"code","c6d6e1e5":"code","e87db617":"code","c4099182":"code","53d6b083":"code","6897b4c0":"markdown","01d6403a":"markdown","d00d77ad":"markdown","c7d6d316":"markdown","c1f6eda9":"markdown","5e4ea5e7":"markdown","92b38836":"markdown","77d0d0cc":"markdown","aeb2fdbf":"markdown","0ff38e10":"markdown","612a30c9":"markdown","9fff080f":"markdown"},"source":{"b5b5e35c":"# Load the libraries\nimport pandas as pd\nimport numpy as np","c2c3b4db":"# Load the dataset\ndf = pd.read_csv(\"..\/input\/usa-weed-price-data\/Weed_Price.csv\")","15bc0c42":"# Shape of the dateset - rows & columns\ndf.shape","91c206c2":"# Check for type of each variable\ndf.dtypes","757e290e":"# Lets load this again with date as date type\ndf = pd.read_csv(\"..\/input\/usa-weed-price-data\/Weed_Price.csv\", parse_dates=[-1])","ecc034bc":"# Now check for type for each row\ndf.dtypes","9a76cb47":"# Get the names of all columns\ndf.columns","6eaae7d7":"# Get the index of all rows\ndf.index","ede4a9f9":"# Can we see some sample rows - the top 5 rows\ndf.head()","dd56449c":"# Can we see some sample rows - the bottom 5 rows\ndf.tail()","ee1ed79d":"# Get specific rows\ndf[20:25]","f298004a":"# Can we access a specific columns\ndf[\"State\"]","0d372824":"# Using the dot notation\ndf.State","9e0920ac":"# Selecting specific column and rows\ndf[0:5][\"State\"]","7794733e":"# Works both ways\ndf[\"State\"][0:5]","aa9d1363":"#Getting unique values of State\npd.unique(df['State'])","05cf8d14":"df.index","c2968d38":"df.loc[0]","c5eca25e":"df.iloc[0,0]","d5a77715":"#Find weighted average price with respective weights of 0.6, 0.4 for HighQ and MedQ","c6d6e1e5":"#Python approach. Loop over all rows. \n#For each row, multiply the respective columns by those weights. \n#Add the output to an array","e87db617":"#It is easy to convert pandas series to numpy array.\nhighq_np = np.array(df.HighQ)\nmedq_np = np.array(df.MedQ)","c4099182":"#Standard pythonic code\n\ndef find_weighted_price():\n    global weighted_price\n    weighted_price = []\n    \n    for i in range(df.shape[0]):\n        weighted_price.append(0.6*highq_np[i]*0.4*highq_np[i])\n\n#print the weighted price\nfind_weighted_price()\nprint(weighted_price)","53d6b083":"#Vectorized Code\nweighted_price_vec = 0.6*highq_np + 0.4*medq_np","6897b4c0":"3) Select the column with the State name in the data frame","01d6403a":"5) Change index to date ","d00d77ad":"**Exercise**: Find the running time of the above program","c7d6d316":"6) Get all the data for 2nd January 2014","c1f6eda9":"# Exercise\n\n1) Load the Demographics_State.csv dataset","5e4ea5e7":"# Thinking in Vectors\n\nDifference between loops and vectors","92b38836":"## 1.6 Viewing the Data","77d0d0cc":"2) Show the five first rows of the dataset","aeb2fdbf":"**Exercise**: Time the above vectorized code. Do you see any improvements?","0ff38e10":"4) Get help","612a30c9":"## 1.7 Slicing columns using pandas","9fff080f":"#  1. Acquire the Data\n\n> \"Data is the new oil\"\n\n**Ways to acquire data** (typical data source)\n\n- Download from an internal system\n- Obtained from client, or other 3rd party\n- Extracted from a web-based API\n- Scraped from a website\n- Extracted from a PDF file\n- Gathered manually and recorded\n\n**Data Formats**\n- Flat files (e.g. csv)\n- Excel files\n- Database (e.g. MySQL)\n- JSON\n- HDFS (Hadoop)\n\nTwo Datasets\n- Price of Weed in US\n- Demographic data by US State \n\n\n## 1.1 - Crowdsource the Price of Weed dataset\n\n![Price of weed website](http:\/\/www.priceofweed.com\/app\/misc\/images\/logo.png)\n\nThe Price of Weed website - http:\/\/www.priceofweed.com\/\n\nCrowdsources the price paid by people on the street to get weed. Self Reported.\n- **Location** is auto detected or can be choosen\n- **Quality** is classified in three categories \n    - High \n    - Medium\n    - Low\n- **Price by weight**\n    - an ounce\n    - a half ounce\n    - a quarter\n    - an eighth\n    - 10 grams\n    - 5 grams\n    - 1 gram\n- **Strain** (though not showed in the dataset)\n\nReported at individual transaction level\n\nHere is a sample data set from United States - http:\/\/www.priceofweed.com\/prices\/United-States.html\n\nSee note - *Averages are corrected for outliers based on standard deviation from the mean.*\n\n\n## 1.2  Scrape the data\n\n[Frank Bi](https:\/\/github.com\/frankbi) from The Verge wrote a script to scrape the data daily. The daily prices are available on github at https:\/\/github.com\/frankbi\/price-of-weed\n\nHere is sample data from one day - 23rd July 2015 - https:\/\/github.com\/frankbi\/price-of-weed\/blob\/master\/data\/weedprices23072015.csv\n\n\n## 1.3  Combine the data\n\nAll the csv files for each day were combined into one large csv. Done by YHAT.\n\nhttp:\/\/blog.yhathq.com\/posts\/7-funny-datasets.html\n\n\n## 1.4 Key Questions \/ Assumptions\n\n> Data is an abstraction of the reality.\n\n- What assumptions have been in this entire data collections process?\n- Are we aware of the assumptions in this process?\n- How to ensure that the data is accurate or representative for the question we are trying to answer? \n\n\n## 1.5 Loading the Data\n"}}