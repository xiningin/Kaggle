{"cell_type":{"44e97f7f":"code","8b536671":"code","2b1d0b97":"code","ed379192":"code","0d1ba666":"code","dee809dc":"code","ebd9cd99":"code","4033874b":"code","51ca56a2":"code","4265b095":"code","3f16656f":"code","54910b05":"code","fa75507b":"code","12ebe123":"code","f2d7215c":"code","5c185012":"code","da80e240":"code","b975f1dc":"code","ee903267":"code","dc3ae472":"markdown","843d2647":"markdown","5a78de12":"markdown","1e22add4":"markdown","bc94f917":"markdown","c6e74ef1":"markdown","f1b32696":"markdown","403a55a5":"markdown","0e861aa1":"markdown","51257f65":"markdown"},"source":{"44e97f7f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib.gridspec import GridSpec\n\nfrom termcolor import colored\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n# Any results you write to the current directory are saved as output.","8b536671":"df = pd.read_csv(\"..\/input\/fifa-world-cup\/WorldCups.csv\")\ndf1 = pd.read_csv(\"..\/input\/fifa-world-cup\/WorldCupMatches.csv\")\ndf2 = pd.read_csv(\"..\/input\/fifa-world-cup\/WorldCupPlayers.csv\")\ncup2018teams = pd.read_csv(\"..\/input\/coparussiajogos\/Cup.Russia.Teams.csv\")\ncup2018matches = pd.read_csv(\"..\/input\/coparussiajogos\/Cup.Russia.Matches.csv\")","2b1d0b97":"#Data Prep - Adding 2018 Worldcup data \ndf[\"Attendance\"]=df[\"Attendance\"].str.replace('.','')\n#list(df)\ndatatemp = {'Year':2018,'Country':'Russia','Winner':'France','Runners-Up':'Croatia','Third':'Belgium',\\\n            'Fourth':'England', 'GoalsScored':169,'QualifiedTeams':32,'MatchesPlayed':64,'Attendance':3031768} \ndf = df.append(datatemp,ignore_index=True)\ndf[\"Winner\"].replace(to_replace=\"Germany FR\", value=\"Germany\",inplace=True)\ndf[\"Runners-Up\"].replace(to_replace=\"Germany FR\", value=\"Germany\",inplace=True)\ndf[\"Third\"].replace(to_replace=\"Germany FR\", value=\"Germany\",inplace=True)\ndf[\"Fourth\"].replace(to_replace=\"Germany FR\", value=\"Germany\",inplace=True)","ed379192":"#FiFa Worldcup Attendances by Year\nsns.set_style(\"darkgrid\")\natt = df.groupby(\"Year\")[\"Attendance\"].sum().reset_index()\natt[\"Year\"] = att[\"Year\"].astype(int)\natt[\"Attendance\"] = att[\"Attendance\"].astype(int)\nplt.figure(figsize=(12,7))\n\nsns.barplot(att[\"Year\"],att[\"Attendance\"],linewidth=1,edgecolor=\"k\"*len(att),palette=\"Blues_d\")\nplt.grid(True)\nplt.title(\"Attendence by year\",color='b')\nplt.show()","0d1ba666":"#preparing winner data\nWinnerdata = {}\nlistingYears = []\nfor i in df[\"Winner\"]:\n    listingYears.append(list(df[df[\"Winner\"]==i][\"Year\"]))\n\nj = 0\nfor k in df[\"Winner\"]:\n    if k not in Winnerdata.keys():\n        Winnerdata[k] = listingYears[j]\n    j = j + 1\n\n\n#getting required Winner data onto list for plot\nnames = list(Winnerdata.keys())\nvalues = list(Winnerdata.values())\n","dee809dc":"#  ++updated with France 2018 worldcup \nfig_size = plt.rcParams[\"figure.figsize\"]\n# Set figure width to 12 and height to 9\nfig_size[0] = 12\nfig_size[1] = 9\nplt.rcParams[\"figure.figsize\"] = fig_size\n\nfor j in range(8):\n    plt.bar(j, len(values[j]),tick_label=names[j],hatch=\"-\")\n    j = j +1\nplt.xticks(range(0,8),names)\nplt.title(\"Countries Winning FIFA WorldCup till 2018\",color='blue')\nplt.xlabel(\"Countries\", color = 'green')\nplt.ylabel(\"Wins\",color = 'green')\n\nx=0 \nfor i in  range(len(names)):\n    y = 0.72\n    for j in range(len(values[i])):\n        plt.text(x, y, \"\"+str(values[i][j]), color='black', va='center', fontweight='bold',horizontalalignment='center')\n        y = y + 0.77\n    x = x+1\n\n\n    \nplt.show()","ebd9cd99":"#All eyes on France\ntotalMatches = (df1[df1[\"Home Team Name\"]==\"France\"][\"Home Team Name\"].value_counts() + df1[df1[\"Away Team Name\"]==\"France\"][\"Away Team Name\"].value_counts())\nGF = (df1[df1[\"Home Team Name\"]==\"France\"][\"Home Team Goals\"].sum() + df1[df1[\"Away Team Name\"]==\"France\"][\"Away Team Goals\"].sum())\nGA = (df1[df1[\"Home Team Name\"]==\"France\"][\"Away Team Goals\"].sum() + df1[df1[\"Away Team Name\"]==\"France\"][\"Home Team Goals\"].sum())\nprint(\"In FiFa WorldCup to time \\nFrance played                  %d Matches\"%(totalMatches))\nprint(\"France Scored                  %d Goals\"%(GF))\nprint(\"Goals conceded Against France  %d\"%(GA))\nprint(\"On an Average France Scored    %.2f Goals\"%(GF\/totalMatches))\nprint(\"France hosted WorldCup twice and won once out of those two instances\")\n\n","4033874b":"print(\"On 4th May, 1980 - Croatia leave Yugoslavia to become the Nation\")\n#All eyes on Croatia\ntotalMatches = (df1[df1[\"Home Team Name\"]==\"Croatia\"][\"Home Team Name\"].value_counts() + df1[df1[\"Away Team Name\"]==\"Croatia\"][\"Away Team Name\"].value_counts())\nGF = (df1[df1[\"Home Team Name\"]==\"Croatia\"][\"Home Team Goals\"].sum() + df1[df1[\"Away Team Name\"]==\"Croatia\"][\"Away Team Goals\"].sum())\nGA = (df1[df1[\"Home Team Name\"]==\"Croatia\"][\"Away Team Goals\"].sum() + df1[df1[\"Away Team Name\"]==\"Croatia\"][\"Home Team Goals\"].sum())\nprint(\"\\nIn FiFa WorldCup to time \\nCroatia played                 %d Matches\"%(totalMatches))\nprint(\"Croatia Scored                 %d Goals\"%(GF))\nprint(\"Goals Conceded Against Croatia %d\"%(GA))\nprint(\"On an Average Croatia Scored   %.2f Goals\"%(GF\/totalMatches))\nprint(\"Croatia never got the opportunity to host the WorldCup. \\nPoint to note in 1998 when France won the WorldCup Croatia was Third on rank!\")","51ca56a2":"#Cleaning data\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace('rn\">United Arab Emirates',\"United Arab Emirates\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace(\"C\ufffdte d'Ivoire\",\"C\u00f4te d\u2019Ivoire\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace('rn\">Republic of Ireland',\"Republic of Ireland\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace('rn\">Bosnia and Herzegovina',\"Bosnia and Herzegovina\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace('rn\">Serbia and Montenegro',\"Serbia and Montenegro\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace('rn\">Trinidad and Tobago',\"Trinidad and Tobago\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace(\"Soviet Union\",\"Russia\")\ndf1[\"Home Team Name\"] = df1[\"Home Team Name\"].str.replace(\"Germany FR\",\"Germany\")\n\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace('rn\">United Arab Emirates',\"United Arab Emirates\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace(\"C\ufffdte d'Ivoire\",\"C\u00f4te d\u2019Ivoire\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace('rn\">Republic of Ireland',\"Republic of Ireland\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace('rn\">Bosnia and Herzegovina',\"Bosnia and Herzegovina\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace('rn\">Serbia and Montenegro',\"Serbia and Montenegro\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace('rn\">Trinidad and Tobago',\"Trinidad and Tobago\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace(\"Germany FR\",\"Germany\")\ndf1[\"Away Team Name\"] = df1[\"Away Team Name\"].str.replace(\"Soviet Union\",\"Russia\")\ndf1 = df1.dropna(how='all')","4265b095":"#Team Encounters\ndef who_won(x,y):\n    wt = df1[df1[\"Away Team Name\"]==y]\n    wt = wt[wt[\"Home Team Name\"]==x]\n    wx = wy = d = j = 0 \n    \n    HTG = np.array(wt[\"Home Team Goals\"].astype(int))\n    ATG = np.array(wt[\"Away Team Goals\"].astype(int))\n    \n    for i in wt[\"Home Team Name\"]:\n        if HTG[j] > ATG[j]:\n            wx = wx + 1 \n        elif HTG[j] < ATG[j]:\n            wy = wy + 1\n        else:\n            d = d + 1\n        j = j + 1\n            \n    return (wx,wy,d)\n\ndef plotingPie(WinX, WinY, D,x,y):\n    plt.figure(figsize=(9,9))\n    the_grid = GridSpec(1, 2)\n    labels = 'Wins', 'Draws', 'Loss'\n    fracs1 = [WinX, D, WinY]\n    fracs2 = [WinY, D, WinX ]\n    explode = (0, 0.05, 0)\n    plt.subplot(the_grid[0, 0], aspect=1)\n    plt.title(\"Matches Outcome for %s\"%(x))\n    plt.pie(fracs1, labels=labels, autopct='%1.0f%%', shadow=True,\n                                           colors  = [\"lawngreen\",\"royalblue\",\"tomato\"],\n                                           wedgeprops={\"linewidth\":2,\"edgecolor\":\"white\"})\n    circ = plt.Circle((0,0),.7,color=\"white\")\n    plt.gca().add_artist(circ)\n    \n    plt.subplot(the_grid[0, 1], aspect=1)\n    plt.title(\"Matches Outcome for %s\"%(y))\n    plt.pie(fracs2, explode=explode, labels=labels, autopct='%1.0f%%', shadow=True,\n                                           colors  = [\"lawngreen\",\"royalblue\",\"tomato\"],\n                                           wedgeprops={\"linewidth\":2,\"edgecolor\":\"white\"})\n    circ = plt.Circle((0,0),.7,color=\"white\")\n    plt.gca().add_artist(circ)\n    plt.show()\n            \ndef teamEncounter(x,y):\n    (wx1,wy1,d1) = who_won(x,y)\n    (wy2,wx2,d2) = who_won(y,x)\n    WinX = wx1 + wx2\n    WinY = wy1 + wy2\n    Draws = d1 + d2\n    n = WinX + WinY + Draws\n    print(\"Of %d Encounter(s) the two team had in WorldCup (till 2014)- \\nTeam %s won %d Matches against %s\"%(n,x,WinX,y))\n    print(\"Team %s won %d Matches against %s\"%(y,WinY,x))\n    print(\"Matches drawn \",Draws) \n    plotingPie(WinX,WinY,Draws,x,y)\n    \n        ","3f16656f":"teamEncounter('France','Croatia')","54910b05":"teamEncounter('Belgium','England')","fa75507b":"print(colored(cup2018teams.groupby(\"Team\")[\"Goals\"].sum().sort_values(ascending=False).head(10),'blue'))","12ebe123":"#Data prep for MaxFinals\ntemp1 = df.groupby(\"Runners-Up\")[\"Runners-Up\"].count()\ntemp2 = df.groupby(\"Winner\")[\"Winner\"].count()\nMaxFinals = list(temp2.index.values)","f2d7215c":"r = {}\nMaxF = 0\nTeam =\"\"\nfor i in MaxFinals:\n    if i not in list(temp1.index.values):\n        temp1[i] = 0\n    r[i] = int(temp2[i]) + int(temp1[i])\n    if MaxF < int(r[i]):\n        MaxF = int(r[i])\n        Team = i\n        \n\nprint(colored(\"Out of All FiFa WorldCup Winners till 2018: \",'blue')+Team+\\\n              \" has played Maximum Finals \"+colored(MaxF,'red') + colored(\" of 21\",'red') )\n    ","5c185012":"HighAttTeam = {}\nfor i in range(64):\n    if cup2018matches[\"Home Team\"][i] not in HighAttTeam.keys():\n        HighAttTeam[cup2018matches[\"Home Team\"][i]] = cup2018matches[\"Attendance\"][i]\n    else:\n        HighAttTeam[cup2018matches[\"Home Team\"][i]] = HighAttTeam[cup2018matches[\"Home Team\"][i]] + cup2018matches[\"Attendance\"][i]\n        \n    if cup2018matches[\"Away Team\"][i] not in HighAttTeam.keys():\n        HighAttTeam[cup2018matches[\"Away Team\"][i]] = cup2018matches[\"Attendance\"][i] \n    else:\n        HighAttTeam[cup2018matches[\"Away Team\"][i]] = HighAttTeam[cup2018matches[\"Away Team\"][i]] + cup2018matches[\"Attendance\"][i]\nimport operator\nsortedHighAttTeam = sorted(HighAttTeam.items(), key=operator.itemgetter(1), reverse = True)","da80e240":"print(\"Team whose Matches witness Maximum Attendance in FIFA WorldCup 2018:\"+colored(sortedHighAttTeam[0],'green'))","b975f1dc":"foulplay = cup2018teams\nfoulplay.fillna(0,inplace=True)\nfoulplay.head(1)","ee903267":"#combination of Fouls, Red-Cards and Yellow-Cards\nfoulplay[\"FoulScore\"] = 1*foulplay[\"Yellow Cards\"] + 2*foulplay[\"Red Cards\"] + 0.1*foulplay[\"Fouls Committed\"]\nfoulplay=foulplay.sort_values(\"FoulScore\",ascending=False).reset_index()\nprint(colored(\"Top 3 Teams with Foul Play in 2018\",'blue'))\nprint(\"1.\",foulplay[\"Team\"][0])\nprint(\"2.\",foulplay[\"Team\"][1])\nprint(\"3.\",foulplay[\"Team\"][2])\n","dc3ae472":"**<font size=\"5\" color=\"#D4AF37\">Who Won The WorldCup - when!<\/font>**","843d2647":"> **<font size=\"5\" color=\"#D4AF37\">When France met Croatia (till 2014)<\/font>**","5a78de12":"***<font size=\"5\" color=\"#D4AF37\">All Eyes on France (till 2014)<\/font>***","1e22add4":"> **<font size=\"5\" color=\"#D4AF37\">When Belgium met England (till 2014)<\/font>**","bc94f917":"***<font size=\"5\" color=\"#D4AF37\">All Eyes on Croatia (till 2014)<\/font>***","c6e74ef1":" **<font size=\"5\" color=\"#D4AF37\">WorldCup Attendance by Year<\/font>**","f1b32696":" **<font size=\"5\" color=\"#D4AF37\">FoulPlay: Who Did it?<\/font>**","403a55a5":" **<font size=\"5\" color=\"#D4AF37\">Whom Did You Cheer For?<\/font>**","0e861aa1":" **<font size=\"5\" color=\"#D4AF37\">Of All Winners; Who Played the Maximum Finals in FIFA?<\/font>**","51257f65":" **<font size=\"5\" color=\"#D4AF37\">Top 10 Goal Scorers in 2018 WorldCup!<\/font>**"}}