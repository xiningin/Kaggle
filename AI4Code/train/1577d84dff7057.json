{"cell_type":{"3edf021d":"code","4595fe3b":"code","e1ad7f82":"code","a2fdbace":"code","7e5cb0d7":"code","e92ca089":"code","3b6b1ac1":"code","36062337":"code","ac11c362":"code","fdcc10c2":"code","6766cf52":"code","64cd8e32":"code","b2cb3278":"code","d912cc18":"code","35234376":"code","a6836e48":"code","bfea4202":"code","b9903cf7":"code","0b3a6d78":"code","e55752ac":"code","a3ad3ad6":"code","9e5ac9f5":"code","91b0b997":"code","2863ad3f":"code","d15cd955":"code","6a5cf368":"code","cbcbc6be":"code","fe34d9f4":"code","2a1f14e5":"code","784960ac":"code","9925e89d":"code","1af51fcd":"code","7c569f91":"code","f5c964a7":"code","d37af557":"code","d2a90156":"code","1b2a8a29":"markdown","55c66e06":"markdown","77c12ff6":"markdown","0c6e43af":"markdown","961956ec":"markdown","63fd3945":"markdown","3689502e":"markdown","79f46560":"markdown","2f1ee900":"markdown","9ad44e04":"markdown","e6a8ec67":"markdown","df6f63b9":"markdown","4ccc82f0":"markdown","a41f2384":"markdown","3c3115d0":"markdown","474600f2":"markdown","dac24c95":"markdown","7b9d69a0":"markdown","d1fec340":"markdown","891ac637":"markdown","41667191":"markdown","3ce71503":"markdown","3b82a2ad":"markdown","15dcfb85":"markdown","bc8b122e":"markdown","41918281":"markdown","9c2b6ec9":"markdown","6abdeda8":"markdown","7f1cebe0":"markdown","feca0291":"markdown","ff207518":"markdown","a1867cc7":"markdown","5ce8ba46":"markdown","c892fc64":"markdown","852f5c7b":"markdown","8e04eb0a":"markdown","49bcbcd9":"markdown","0fa94a63":"markdown","2d5b73f7":"markdown","6d6a22f8":"markdown","13474259":"markdown","a3159372":"markdown","f71a75e9":"markdown","bcc62622":"markdown"},"source":{"3edf021d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","4595fe3b":"import numpy as np  \nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns \nprint('setup complete') ","e1ad7f82":"italy_imm_filepath = '\/kaggle\/input\/italy-immigration-data-by-the-un\/Italy.xlsx'\nitaly_imm_data = pd.read_excel(italy_imm_filepath, \n                              sheet_name='Italy by Citizenship', \n                              skiprows = range(20), \n                              skipfooter = 2)\nitaly_imm_data.sample(40) ","a2fdbace":"italy_imm_data.replace(['..'],0, inplace = True)","7e5cb0d7":"italy_imm_data = italy_imm_data[italy_imm_data.Type == 'Immigrants'] \nitaly_imm_data ","e92ca089":"italy_imm_data.rename(columns={'OdName':'Country'}, inplace=True) ","3b6b1ac1":"italy_imm_data = italy_imm_data[italy_imm_data.Country != 'Italy'] \nitaly_imm_data ","36062337":"italy_imm_data = italy_imm_data.drop(['AREA', 'REG', 'DEV'], axis=1) ","ac11c362":"italy_imm_data['Total'] = italy_imm_data.sum(axis=1) ","fdcc10c2":"italy_imm_data.columns","6766cf52":"df1 = italy_imm_data.groupby([\"Total\"]) ","64cd8e32":"df2= df1.apply(lambda x: x.sort_values(['Country']))","b2cb3278":"df2 ","d912cc18":"plt.figure(figsize=(12,8)) \nsns.set(style=\"white\") \nsns.barplot(x=df2.Total.tail(10), y=df2.Country.tail(10), \n            palette=\"BuGn_r\", edgecolor=\".2\");","35234376":"plt.figure(figsize=(12,8))\nsns.set(style=\"white\") \nsplot = sns.barplot(y=df2.Total.head(5), x=df2.Country.head(5), \n            palette=\"cubehelix\", edgecolor=\".2\");\n\nfor p in splot.patches:\n  splot.annotate(format(p.get_height(), '.2f'), (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'baseline', xytext = (0, 10), textcoords = 'offset points')","a6836e48":"italy_imm_data.set_index('Country', inplace=True) ","bfea4202":"italy_imm_data.head(10) ","b9903cf7":"italy_imm_data.columns = list(map(str, italy_imm_data.columns))\nyears = list(map(str, range(1990, 2014)))","0b3a6d78":"argentina = italy_imm_data.loc['Argentina', years]\nplt.style.use(['fivethirtyeight'])\n\nargentina.index = argentina.index.map(int)\nargentina = argentina.astype(int)\n\nfig = plt.figure(figsize=(13, 8))\nax = fig.add_axes([1,1,1,1])\nargentina.plot(kind='line', ax=ax)\nplt.text(1997.8, 5590, 'What happened at this time?')\n\nax.set_title('Immigration from Argentina')\nax.set_ylabel('Number of Immigrants')\nax.set_xlabel('Years')\n\nplt.show()","e55752ac":"romania_morocco = italy_imm_data.loc[['Romania', 'Morocco'], years]\nromania_morocco.head()","a3ad3ad6":"romania_morocco = romania_morocco.T\nromania_morocco.head()","9e5ac9f5":"romania_morocco.index = romania_morocco.index.map(int)\nromania_morocco = romania_morocco.astype(int)\n\nfig = plt.figure(figsize=(13, 8))\nax = fig.add_axes([1,1,1,1])\nromania_morocco.plot(kind='line', ax=ax)\n\nax.set_title('Immigrants from Romania and Morocco')\nax.set_ylabel('Number of immigrants')\nax.set_xlabel('Years')\n\nplt.show()","91b0b997":"count, bin_edges = np.histogram(italy_imm_data['2013'])\n\nprint(count)\nprint(bin_edges)","2863ad3f":"fig = plt.figure(figsize=(13,8))\nax = fig.add_axes([1,1,1,1])\nitaly_imm_data['2013'].plot(kind='hist', ax=ax)\n\nax.set_title('Histogram of Immigration from 179 Countries to Italy in 2013') \nax.set_ylabel('Number of Countries') \nax.set_xlabel('Number of Immigrants') \n\nplt.show()","d15cd955":"italy_imm_data.loc[['Germany', 'Tunisia', 'Nigeria'], years].T.columns.tolist()","6a5cf368":"italy_imm_data_t = italy_imm_data.loc[['Germany', 'Tunisia', 'Nigeria'], years].T\n\nfig = plt.figure(figsize=(13,8))\nax = fig.add_axes([1,1,1,1])\nitaly_imm_data_t.plot(kind='hist', ax=ax)\n\nax.set_title('Immigration from Germany, Tunisia, and Nigeria from 1990 - 2013')\nax.set_ylabel('Number of Years')\nax.set_xlabel('Number of Immigrants') \n\nplt.show()","cbcbc6be":"egypt = italy_imm_data.loc['Egypt', years]\negypt = egypt.astype(int)\n\nfig = plt.figure(figsize=(13,8))\nax = fig.add_axes([1,1,1,1])\negypt.plot(kind='bar', ax=ax)\n\nax.set_xlabel('Year') \nax.set_ylabel('Number of immigrants') \nax.set_title('Egyptian immigrants to Italy from 1990 to 2013')\n\nplt.show()","fe34d9f4":"continents = italy_imm_data.groupby('AreaName', axis=0).sum()\nprint(type(italy_imm_data.groupby('AreaName', axis=0)))\ncontinents.head()","2a1f14e5":"colors_list = ['green', 'red', 'yellow', 'blue', 'orange', 'black']\nexplode_list = [0.1, 0.1, 0, 0.1, 0.1, 0] \n\ncontinents['Total'].plot(kind='pie',\n                           figsize=(15, 8),\n                           autopct='%1.1f%%', \n                           startangle=90,    \n                           shadow=True,       \n                           labels=None,         \n                           pctdistance=1.14,     \n                           colors=colors_list,  \n                           explode=explode_list \n                           )\n\nplt.title('Immigration to Italy by Continent [1990 - 2013]', y=1.14) \nplt.axis('equal') \n\nplt.legend(labels=continents.index, loc='upper left') \n\nplt.show()","784960ac":"tot = pd.DataFrame(italy_imm_data[years].sum(axis=0))\ntot.index = map(int, tot.index)\ntot.reset_index(inplace = True)\ntot.columns = ['year', 'total']\ntot","9925e89d":"fig = plt.figure(figsize=(13,8))\nax = fig.add_axes([1,1,1,1])\ntot.plot(kind='scatter', x='year', y='total', ax=ax)\n\nax.set_title('Total Immigration to Italy from 1990 - 2013')\nax.set_xlabel('Year')\nax.set_ylabel('Number of Immigrants')\n\nplt.show()","1af51fcd":"x = tot['year']      \ny = tot['total']   \nfit = np.polyfit(x, y, deg=1)\nfit","7c569f91":"fig = plt.figure(figsize=(13,8))\nax = fig.add_axes([1,1,1,1])\ntot.plot(kind='scatter', x='year', y='total', ax=ax)\n\nax.set_title('Total Immigration to Italy from 1990 - 2013')\nax.set_xlabel('Year')\nax.set_ylabel('Number of Immigrants')\n\nax.plot(x, fit[0] * x + fit[1], color='red')","f5c964a7":"italy_imm_data_t = italy_imm_data[years].T\nitaly_imm_data_t.index = map(int, italy_imm_data_t.index)\nitaly_imm_data_t.index.name = 'Year'\nitaly_imm_data_t.reset_index(inplace=True)\nitaly_imm_data_t","d37af557":"from sklearn.preprocessing import MinMaxScaler\n\nscale_bra = MinMaxScaler()\nscale_arg = MinMaxScaler()\nnorm_brazil = scale_bra.fit_transform(italy_imm_data_t['Brazil'].values.reshape(-1, 1))\nnorm_arg = scale_arg.fit_transform(italy_imm_data_t['Argentina'].values.reshape(-1, 1))","d2a90156":"italy_imm_data_t['weight_arg'] = norm_arg\nitaly_imm_data_t['weight_brazil'] = norm_brazil\n\nfig = plt.figure(figsize=(13,9))\nax = fig.add_axes([1,1,1,1])\n\n\nitaly_imm_data_t.plot(kind='scatter', x='Year', y='Brazil',\n            alpha=0.5,                  # transparency\n            s=norm_brazil * 2000 + 10,  # pass in weights \n            ax=ax)\n\n\nitaly_imm_data_t.plot(kind='scatter', x='Year', y='Argentina',\n            alpha=0.5,\n            color=\"blue\",\n            s=norm_arg * 2000 + 10,\n            ax=ax)\n\nax.set_ylabel('Number of Immigrants')\nax.set_title('Immigration from Brazil and Argentina from 1990 - 2013')\nax.legend(['Brazil', 'Argentina'], loc='upper left', fontsize='x-large')\n\nplt.show()","1b2a8a29":"Let's plot it. ","55c66e06":"Massive difference between the two nationalities. Six-times more Romanians than Moroccans have moved to Italy in 2007\/2008.","77c12ff6":"As we can see the dataset contains data on both immigrants and emigrants. Let's only have a look at the immigrants category.","0c6e43af":"**8. Visualizing the frequency distribution of immigrants from Germany, Tunisia, and Nigeria to Italy between 1990 and 2013 using Matplotlib**\n\nLet's repeat the exercise - this time looking at the frequency distribution of German, Tunisian, and Nigerian immigrants to Italy over the period between 1990 and 2013.","961956ec":"Let's look at the dataset again. \n\nThree columns seem to be not useful for our analysis: 'AREA', 'REG', 'DEV'. Furthermore if we try to sum all the numeric values contained in the columns representing the years, we might end up in trouble. \n\nLet's drop them. ","63fd3945":"Let's plot the line. ","3689502e":"Let's check that the new column has been created.","79f46560":"Great! We can plot the data now using Matplotlib.","2f1ee900":"Unsurprisingly, Europe leads the way, followed by Asia and Africa. Oceania is last with only 0.1%.","9ad44e04":"We need to transpose the data or we will not be able to plot properly.","e6a8ec67":"Let's plot this data with a histogram using Matplotlib.","df6f63b9":"Now, let's sort the values.","4ccc82f0":"Let's subsitute the name of the column 'OdName' with what it really represents: 'Country'.","a41f2384":"**Beginner: Italy Migration Data Visualization (Seaborn and Matplotlib)**","3c3115d0":"What happened in 2001? Did someone forget to report the data for that year? ","474600f2":"**7. Visualizing the frequency distribution of immigrants from 179 nationalities to Italy between 1990 and 2013 using Matplotlib**\n\nIf we look at all the countries in our dataset, what is the frequency distribution for the year 2013? \n\nRunning the code below will tell us that, for example, in 2013:\n\n* 179 nationalities have between 0 and 5822.7 immigrants\n* 9 nationalities have between 11645.4 and 17468.1 immigrants, and so forth.. ","dac24c95":"A scatterplot using Matplotlib will help us with this. ","7b9d69a0":"**11. Visualizing the trends of immigration to Italy between 1990 and 2013 using Matplotlib (scatterplots and bubble plots)**\n\nLet's have a look at how immigration to Italy trended between 1990 and 2013.","d1fec340":"**10. Visualizing the percentages of immigrants to Italy from each continent between 1990 and 2013**\n\nWhich continents are the most represented among immigrants to Italy?\n\nLet's have a look.","891ac637":"**Table of Contents**\n\n1. Info on this dataset\n2. Exploring the dataset and cleaning the data\n3. Visualizing the top 10 **most** represented nationalities of immigrants to Italy using Seaborn\n4. Visualizing the top 5 **least** represented nationalities of immigrants to Italy using Seaborn\n5. Visualizing the trend of Argentinian immigration to Italy between 1990 and 2013 using Matplotlib \n6. Visualizing a comparison of the trends of Romanian and Moroccan immigration to Italy between 1990 and 2013 using Matplotlib \n7. Visualizing the frequency distribution of immigrants from 179 nationalities to Italy between 1990 and 2013 using Matplotlib \n8. Visualizing the frequency distribution of immigrants from Germany, Tunisia, and Nigeria to Italy between 1990 and 2013 using Matplotlib \n9. Visualizing the number of Egyptian immigrants to Italy for each year between 1990 and 2013 using Matplotlib\n10. Visualizing the percentages of immigrants to Italy from each continent between 1990 and 2013\n11. Visualizing the trends of immigration to Italy between 1990 and 2013 using Matplotlib \n12. Visualizing Argentinian and Brazilian immigration to Italy between 1990 and 2013 using Matplotlib","41667191":"**4. Visualizing the top 5 least represented nationalities of immigrants to Italy using Seaborn**\n\nWe have seen the top 10 most represented nationalities, but which are the top 5 least represented nationalities?\n\nLet's have a look below using Seaborn.","3ce71503":"**3. Visualizing the top 10 most represented nationalities of immigrants to Italy using Seaborn**\n\nLet's have a look at which are the top 10 most represented nationalities of immigrants to Italy using a Seaborn barplot. \n\nFirst thing first, we need to group the countries by their total.","3b82a2ad":"Let's normalize the weights now by using feature scaling so that all values are between 0 and 1. ","15dcfb85":"Let's plot it using Matplotlib.","bc8b122e":"Here we go. \n\nLet's act accordingly and let's first convert the column names into strings to avoid confusion.\n\nThen let's create the range 'years' (1990 to 2014) which will prove useful for plotting the data using Matplotlib.","41918281":"As we can see, for each country we have the number of immigrants per year from 1980 to 2013. \n\nLet's add a column called 'Total'.","9c2b6ec9":"One thing we can immediately notice by looking at the dataset is that quite a large number of cells are marked with '..' \nIt might either indicate that no data is available for that specific year or that the count is 0. \n\nLet's assume that the count is '0', and therefore transform the dataset accordingly.","6abdeda8":"**12. Visualizing Argentinian and Brazilian immigration to Italy between 1990 and 2013 using Matplotlib**\n\nBy plotting a bubble plot we should be able to see the immigration trends for both coutries during the in scope period. \n\nTo do so, we first need to create a new dataframe with the data for Argentina and Brazil.","7f1cebe0":"If we have a quick look at the dataset again, the first thing we would notice is that there is basically no data available between 1980 and 1990. ","feca0291":"**2. Exploring the Dataset and cleaning the data**\n\nOnce we have imported the necessary libraries, let's read the dataset. \n\nNote that for the purposes of this kernel we will only use the sheet named \"Italy by Citizenship\".","ff207518":"**9. Visualizing the number of Egyptian immigrants to Italy for each year between 1990 and 2013 using Matplotlib**\n\nLet's have a look at how many Egyptians have moved to Italy each year from 1990 to 2013. ","a1867cc7":"Let's have a look at the grouped and sorted values.","5ce8ba46":"As we can see, Romania is by far the most represented nationality among immigrants to Italy between 1980 and 2013.","c892fc64":"There indeed seems to be an upward trend. \n\nLet's perform a linear regression. ","852f5c7b":"Following this trend perhaps we can predict how many people moved to Italy in 2014, 2015, etc.","8e04eb0a":"Citizens of Nauru seems to be not very represented among immigrants to Italy between 1980 to 2013. ","49bcbcd9":"Now we are ready to visualize the data. ","0fa94a63":"How would you interpret this graph? We have already analyzed Argentinian immigration to Italy and tried to explain the spike in the trend by looking at the 1998-2002 crisis. However, what would justify the spike in Brazilian immigration between 2005 and 2010?","2d5b73f7":"What we can immediately notice by visualizing the data is a major spike in Argentinian immigration to Italy around 2003\/2004. This must be consequential to the crisis which has affected Argentina between 1998 and 2002.","6d6a22f8":"If we look at the dataset more closely, we can see that it also contain data on Italian citizens immigrating back to Italy. \nLet's drop it and exclusively look at other nationalities. ","13474259":"The numbers for Germany are quite interesting. ","a3159372":"**1. Introduction to the dataset**\n\nThe dataset contains annual data on the flows of international migrants as recorded by Italy. The data presents both inflows and outflows according to the place of birth, citizenship or place of previous \/ next residence both for foreigners and nationals.\n\nThis dataset is part of a compilation of data on international migration flows which is useful for analytical purposes, but also serves to raise awareness about the problems of comparability among available statistics. Countries collecting and publishing data on the flows of international migrants use different definitions to identify migrants and use different concepts to determine their origin and destination.","f71a75e9":"**6. Visualizing a comparison of the trends of Romanian and Moroccan immigration to Italy between 1990 and 2013 using Matplotlib**\n\nHow does immigration to Italy of two differnent nationalities compare? Let's have a look at the Romanian and Moroccan immigration between 1990 and 2013. ","bcc62622":"**5. Visualizing the trend of Argentinian immigration to Italy between 1990 and 2013 using Matplotlib**\n\nIt's now time to look at the data from a specific country: let's pick Argentina. \n\nTo do this, it will be convenient to set the column 'Country' to index of the dataset. "}}