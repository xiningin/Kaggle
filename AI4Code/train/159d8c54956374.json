{"cell_type":{"a776cc82":"code","42d0701b":"code","0e3b3013":"code","45ebcb5f":"code","5800a341":"code","8d1d9a33":"code","46d84c41":"code","b60a1269":"code","3de7439d":"code","72dab25f":"code","3d742c05":"code","ef12e020":"code","df9bc43f":"code","f0996135":"code","90abaa5b":"code","c7a7c576":"code","7a78df22":"code","ec0c6a1a":"code","145b49dd":"code","d8225c6b":"code","a0d1ecff":"code","a43f45d9":"markdown","367afaea":"markdown","c6049fcb":"markdown","8f0f7814":"markdown","fd7bf5be":"markdown","b07208d6":"markdown","8549ba7e":"markdown","7d1d8a0b":"markdown","f85782e4":"markdown","b91f99f2":"markdown","12c2870e":"markdown","32d4327f":"markdown","e3c0a9f0":"markdown","5ba8094c":"markdown","c00b9951":"markdown","cd08e023":"markdown","96a0c9a4":"markdown","343f1da3":"markdown","a7446c4f":"markdown","b0a670b2":"markdown","e48af1d5":"markdown","99f95eb8":"markdown","1c09c1bc":"markdown","2dbdcfc2":"markdown","095b49be":"markdown","f051facc":"markdown","14bfe12e":"markdown"},"source":{"a776cc82":"# Importing libraries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n# importing data\ndf = pd.read_csv(\"..\/input\/FAO.csv\",  encoding = \"ISO-8859-1\")\npd.options.mode.chained_assignment = None","42d0701b":"df.head()","0e3b3013":"area_list = list(df['Area'].unique())\nyear_list = list(df.iloc[:,10:].columns)\n\nplt.figure(figsize=(24,12))\nfor ar in area_list:\n    yearly_produce = []\n    for yr in year_list:\n        yearly_produce.append(df[yr][df['Area'] == ar].sum())\n    plt.plot(yearly_produce, label=ar)\nplt.xticks(np.arange(53), tuple(year_list), rotation=60)\nplt.legend(bbox_to_anchor=(0., 1.02, 1., .102), loc=3, ncol=8, mode=\"expand\", borderaxespad=0.)\nplt.savefig('p.png')\nplt.show()","45ebcb5f":"sns.factorplot(\"Element\", data=df, kind=\"count\")\nplt.show()","5800a341":"sns.factorplot(\"Area\", data=df[(df['Area'] == \"India\") | (df['Area'] == \"China, mainland\") | (df['Area'] == \"United States of America\")], kind=\"count\", hue=\"Element\", size=8, aspect=.8)","8d1d9a33":"new_df_dict = {}\nfor ar in area_list:\n    yearly_produce = []\n    for yr in year_list:\n        yearly_produce.append(df[yr][df['Area']==ar].sum())\n    new_df_dict[ar] = yearly_produce\nnew_df = pd.DataFrame(new_df_dict)\n\nnew_df.head()","46d84c41":"new_df = pd.DataFrame.transpose(new_df)\nnew_df.columns = year_list\n\nnew_df.head()","b60a1269":"mean_produce = []\nfor i in range(174):\n    mean_produce.append(new_df.iloc[i,:].values.mean())\nnew_df['Mean_Produce'] = mean_produce\n\nnew_df['Rank'] = new_df['Mean_Produce'].rank(ascending=False)\n\nnew_df.head()","3de7439d":"item_list = list(df['Item'].unique())\n\nitem_df = pd.DataFrame()\nitem_df['Item_Name'] = item_list\n\nfor yr in year_list:\n    item_produce = []\n    for it in item_list:\n        item_produce.append(df[yr][df['Item']==it].sum())\n    item_df[yr] = item_produce\n","72dab25f":"item_df.head()","3d742c05":"sum_col = []\nfor i in range(115):\n    sum_col.append(item_df.iloc[i,1:].values.sum())\nitem_df['Sum'] = sum_col\nitem_df['Production_Rank'] = item_df['Sum'].rank(ascending=False)\n\nitem_df.head()","ef12e020":"item_df['Item_Name'][item_df['Production_Rank'] < 11.0].sort_values()","df9bc43f":"sns.factorplot(\"Item\", data=df[(df['Item']=='Wheat and products') | (df['Item']=='Rice (Milled Equivalent)') | (df['Item']=='Maize and products') | (df['Item']=='Potatoes and products') | (df['Item']=='Vegetables, Other') | (df['Item']=='Milk - Excluding Butter') | (df['Item']=='Cereals - Excluding Beer') | (df['Item']=='Starchy Roots') | (df['Item']=='Vegetables') | (df['Item']=='Fruits - Excluding Wine')], kind=\"count\", hue=\"Element\", size=20, aspect=.8)\nplt.show()","f0996135":"year_df = df.iloc[:,10:]\nfig, ax = plt.subplots(figsize=(16,10))\nsns.heatmap(year_df.corr(), ax=ax)","90abaa5b":"f, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, sharex='col', sharey='row', figsize=(10,10))\nax1.set(xlabel='Y1968', ylabel='Y1961')\nax2.set(xlabel='Y1968', ylabel='Y1963')\nax3.set(xlabel='Y1968', ylabel='Y1986')\nax4.set(xlabel='Y1968', ylabel='Y2013')\nsns.jointplot(x=\"Y1968\", y=\"Y1961\", data=df, kind=\"reg\", ax=ax1)\nsns.jointplot(x=\"Y1968\", y=\"Y1963\", data=df, kind=\"reg\", ax=ax2)\nsns.jointplot(x=\"Y1968\", y=\"Y1986\", data=df, kind=\"reg\", ax=ax3)\nsns.jointplot(x=\"Y1968\", y=\"Y2013\", data=df, kind=\"reg\", ax=ax4)\nplt.close(2)\nplt.close(3)\nplt.close(4)\nplt.close(5)","c7a7c576":"new_item_df = item_df.drop([\"Item_Name\",\"Sum\",\"Production_Rank\"], axis = 1)\nfig, ax = plt.subplots(figsize=(12,24))\nsns.heatmap(new_item_df,ax=ax)\nax.set_yticklabels(item_df.Item_Name.values[::-1])\nplt.show()","7a78df22":"new_df.head()","ec0c6a1a":"X = new_df.iloc[:,:-2].values\n\nX = pd.DataFrame(X)\nX = X.convert_objects(convert_numeric=True)\nX.columns = year_list","145b49dd":"from sklearn.cluster import KMeans\nwcss = []\nfor i in range(1,11):\n    kmeans = KMeans(n_clusters=i,init='k-means++',max_iter=300,n_init=10,random_state=0)\n    kmeans.fit(X)\n    wcss.append(kmeans.inertia_)\nplt.plot(range(1,11),wcss)\nplt.title('The Elbow Method')\nplt.xlabel('Number of clusters')\nplt.ylabel('WCSS')\nplt.show()","d8225c6b":"kmeans = KMeans(n_clusters=2,init='k-means++',max_iter=300,n_init=10,random_state=0) \ny_kmeans = kmeans.fit_predict(X)\n\nX = X.as_matrix(columns=None)","a0d1ecff":"plt.scatter(X[y_kmeans == 0, 0], X[y_kmeans == 0,1],s=100,c='red',label='Others')\nplt.scatter(X[y_kmeans == 1, 0], X[y_kmeans == 1,1],s=100,c='blue',label='China(mainland),USA,India')\nplt.scatter(kmeans.cluster_centers_[:,0],kmeans.cluster_centers_[:,1],s=300,c='yellow',label='Centroids')\nplt.title('Clusters of countries by Productivity')\nplt.legend()\nplt.show()","a43f45d9":"Now, we look at clustering.","367afaea":"So, there is a huge difference in food and feed production. Now, we have obvious assumptions about the following plots after looking at this huge difference.\n\n# Food and feed plot for the largest producers(India, USA, China)","c6049fcb":"Now, this is not perfect so we transpose this dataframe and add column names.","8f0f7814":"As the elbow corner coincides with x=2, we will have to form **2 clusters**. Personally, I would have liked to select 3 to 4 clusters. But trust me, only selecting 2 clusters can lead to best results.\nNow, we apply k-means algorithm.","fd7bf5be":"Clearly, China, India and US stand out here. So, these are the countries with most food and feed production.\n\nNow, let's have a close look at their food and feed data\n\n# Food and feed plot for the whole dataset","b07208d6":"# Some more feature engineering\n\nThis time, we will use the new features to get some good conclusions.\n\n# 1. Total amount of item produced from 1961 to 2013\n# 2. Providing a rank to the items to know the most produced item","8549ba7e":"Let's see what the data looks like...","7d1d8a0b":"Though, there is a huge difference between feed and food production, these countries' total production and their ranks depend on feed production.","f85782e4":"Now, we create a dataframe with countries as index and their annual produce as columns from 1961 to 2013.","b91f99f2":"# Today, we will form clusters to classify countries based on productivity scale","12c2870e":"So, cereals, fruits and maize are the most produced items in the last 50 years\n\n# Food and feed plot for most produced items ","32d4327f":"Now, we create another dataframe with items and their total production each year from 1961 to 2013","e3c0a9f0":"Perfect! Now, we will do some feature engineering.\n\n# First, a new column which indicates mean produce of each state over the given years. Second, a ranking column which ranks countries on the basis of mean produce.","5ba8094c":"# Elbow method to select number of clusters\nThis method looks at the percentage of variance explained as a function of the number of clusters: One should choose a number of clusters so that adding another cluster doesn't give much better modeling of the data. More precisely, if one plots the percentage of variance explained by the clusters against the number of clusters, the first clusters will add much information (explain a lot of variance), but at some point the marginal gain will drop, giving an angle in the graph. The number of clusters is chosen at this point, hence the \"elbow criterion\". This \"elbow\" cannot always be unambiguously identified. Percentage of variance explained is the ratio of the between-group variance to the total variance, also known as an F-test. A slight variation of this method plots the curvature of the within group variance.\n# Basically, number of clusters = the x-axis value of the point that is the corner of the \"elbow\"(the plot looks often looks like an elbow)","c00b9951":"# Now, we plot a heatmap of correlation of produce in difference years","cd08e023":"There is considerable growth in production of Palmkernel oil, Meat\/Aquatic animals, ricebran oil, cottonseed, seafood, offals, roots, poultry meat, mutton, bear, cocoa, coffee and soyabean oil.\nThere has been exceptional growth in production of onions, cream, sugar crops, treenuts, butter\/ghee and to some extent starchy roots.","96a0c9a4":"# About the dataset\n\nContext\nOur world population is expected to grow from 7.3 billion today to 9.7 billion in the year 2050. Finding solutions for feeding the growing world population has become a hot topic for food and agriculture organizations, entrepreneurs and philanthropists. These solutions range from changing the way we grow our food to changing the way we eat. To make things harder, the world's climate is changing and it is both affecting and affected by the way we grow our food \u2013 agriculture. This dataset provides an insight on our worldwide food production - focusing on a comparison between food produced for human consumption and feed produced for animals.\n\nContent\nThe Food and Agriculture Organization of the United Nations provides free access to food and agriculture data for over 245 countries and territories, from the year 1961 to the most recent update (depends on the dataset). One dataset from the FAO's database is the Food Balance Sheets. It presents a comprehensive picture of the pattern of a country's food supply during a specified reference period, the last time an update was loaded to the FAO database was in 2013. The food balance sheet shows for each food item the sources of supply and its utilization. This chunk of the dataset is focused on two utilizations of each food item available:\n\nFood - refers to the total amount of the food item available as human food during the reference period.\nFeed - refers to the quantity of the food item available for feeding to the livestock and poultry during the reference period.\nDataset's attributes:\n\nArea code - Country name abbreviation\nArea - County name\nItem - Food item\nElement - Food or Feed\nLatitude - geographic coordinate that specifies the north\u2013south position of a point on the Earth's surface\nLongitude - geographic coordinate that specifies the east-west position of a point on the Earth's surface\nProduction per year - Amount of food item produced in 1000 tonnes\n\nThis is a simple exploratory notebook that heavily expolits pandas and seaborn","343f1da3":"# Heatmap of production of food items over years\n\nThis will detect the items whose production has drastically increased over the years","a7446c4f":"# Plot for annual produce of different countries with quantity in y-axis and years in x-axis","b0a670b2":"# What is clustering?\nCluster analysis or clustering is the task of grouping a set of objects in such a way that objects in the same group (called a cluster) are more similar (in some sense) to each other than to those in other groups (clusters). It is a main task of exploratory data mining, and a common technique for statistical data analysis, used in many fields, including machine learning, pattern recognition, image analysis, information retrieval, bioinformatics, data compression, and computer graphics.","e48af1d5":"So, we gather that a given year's production is more similar to its immediate previous and immediate following years.","99f95eb8":"# Now, we find the most produced food items in the last half-century","1c09c1bc":"For this, we will use k-means clustering algorithm.\n# K-means clustering\n(Source [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/K-means_clustering#Standard_algorithm) )\n![http:\/\/gdurl.com\/5BbP](http:\/\/gdurl.com\/5BbP)","2dbdcfc2":"This is not the end! More is yet to come.","095b49be":"Now, let's visualize the results.","f051facc":"So, the blue cluster represents China(Mainland), USA and India while the red cluster represents all the other countries.\nThis result was highly probable. Just take a look at the plot of cell 3 above. See how China, USA and India stand out. That has been observed here in clustering too.\n\nYou should try this algorithm for 3 or 4 clusters. Looking at the distribution, you will realise why 2 clusters is the best choice for the given data","14bfe12e":"This is the data we will use."}}