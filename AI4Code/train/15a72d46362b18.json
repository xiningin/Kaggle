{"cell_type":{"a36821b8":"code","086b1fdb":"code","49f29378":"code","9211a8f3":"code","8d15eeab":"code","cc9e5258":"code","673f1c75":"markdown","f01d94e6":"markdown","e0191648":"markdown","f20146e3":"markdown"},"source":{"a36821b8":"# Start by importing the bq_helper module and calling on the specific active_project and dataset_name for the BigQuery dataset.\nimport bq_helper\nfrom bq_helper import BigQueryHelper\n# https:\/\/www.kaggle.com\/sohier\/introduction-to-the-bq-helper-package\n\ncpc = bq_helper.BigQueryHelper(active_project=\"patents-public-data\",\n                                   dataset_name=\"cpc\")","086b1fdb":"# View table names under the cpc data table\nbq_assistant = BigQueryHelper(\"patents-public-data\", \"cpc\")\nbq_assistant.list_tables()","49f29378":"# View the first three rows of the definitions data table\nbq_assistant.head(\"definitions\", num_rows=3)","9211a8f3":"# View information on all columns in the definitions data table\nbq_assistant.table_schema(\"definitions\")","8d15eeab":"query1 = \"\"\"\nSELECT DISTINCT\n  level\nFROM\n  `patents-public-data.cpc.definitions`\nLIMIT\n  20;\n        \"\"\"\nresponse1 = cpc.query_to_pandas_safe(query1)\nresponse1.head(20)","cc9e5258":"bq_assistant.estimate_query_size(query1) ","673f1c75":"Interpretting this number, this means my query scanned about ~0.0019 GB (or 1.9 MB) of data in order to return a table of 20 unique levels in the dataset.","f01d94e6":"## Importance of Knowing Your Query Sizes\n\nIt is important to understand how much data is being scanned in each query due to the free 5TB per month quota. For example, if a query is formed that scans all of the data in a particular column, given how large BigQuery datasets are it wouldn't be too surprising if it burns through a large chunk of that monthly quota!\n\nFortunately, the bq_helper module gives us tools to very easily estimate the size of our queries before running a query. Start by drafting up a query using BigQuery's Standard SQL syntax. Next, call the estimate_query_size function which will return the size of the query in GB. That way you can get a sense of how much data is being scanned before actually running your query.","e0191648":"# How to Query Cooperative Patent Classification Data (BigQuery)\n[Click here](https:\/\/www.kaggle.com\/mrisdal\/safely-analyzing-github-projects-popular-licenses) for a detailed notebook demonstrating how to use the bq_helper module and best practises for interacting with BigQuery datasets.","f20146e3":"## Example SQL Query\nWhat kinds of levels are there for describing patent classifications? What is the range?"}}