{"cell_type":{"c529ae3a":"code","b821745c":"code","ebd40afa":"code","db984f7a":"code","4e6489f1":"code","3d7601d4":"code","7fea2830":"code","202f1a45":"code","1fdd470b":"code","cfd40783":"code","f737f401":"code","3bb450dc":"code","e94eb98e":"code","460604f3":"code","85c65e07":"code","5cc7968f":"code","3016acd0":"code","0c400af6":"code","f7d7ebd9":"code","1862a037":"code","346bd556":"code","dbef76cf":"markdown","74a0e405":"markdown","5291ee96":"markdown","ddd25b1e":"markdown"},"source":{"c529ae3a":"#Some preprocessing.\n#Preprocessamento b\u00e1sico.\nimport pandas as pd\ndf = pd.read_csv('..\/input\/diarias\/despesas_diarias.csv')","b821745c":"df.head()","ebd40afa":"\ndf['2018'] = df['2018'].fillna(0)\ndf['2019'] = df['2019'].fillna(0)\ndf['2017'] = df['2017'].fillna(0)","db984f7a":"df","4e6489f1":"for i in df['Credor']:\n    print(i)","3d7601d4":"mean_2018 = df['2018'].mean()\nmean_2019 = df['2019'].mean()\nmean_2017 = df['2017'].mean()","7fea2830":"print(f'M\u00e9dia de gastos di\u00e1rios 2017 {mean_2017}')\nprint(f'M\u00e9dia de gastos di\u00e1rios 2018 {mean_2018}')\nprint(f'M\u00e9dia de gastos di\u00e1rios 2019 {mean_2019}')","202f1a45":"difere\u00e7a_2017_2018 = mean_2018 - mean_2017\ndifere\u00e7a_2017_2019 = mean_2019 - mean_2017\ndifere\u00e7a_2018_2019 = mean_2019 - mean_2018\nprint('Diferen\u00e7as:')\nprint(f' 2018 - 2017 : {difere\u00e7a_2017_2018}; 2019 - 2017 : {difere\u00e7a_2017_2019}; 2019 - 2018 : {difere\u00e7a_2018_2019}')","1fdd470b":"from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfeatures = ['2017', '2018']\ny = df['2019']\nx = df[features]\nx_train, x_test, y_train, y_test = train_test_split(x, y)","cfd40783":"regressor = LinearRegression()\nregressor.fit(x_train, y_train)\ny_pred = regressor.predict(x_test)","f737f401":"from sklearn.metrics import mean_absolute_error\nmae = mean_absolute_error(y_true = y_test, y_pred = y_pred)\nprint (mae.round())","3bb450dc":"data = pd.DataFrame(y_pred, columns = ['predctions'])\ncredor = []\ndf_formated = pd.read_csv('..\/input\/diarias\/diarias-formated.csv')\nfor i in range(len(data)):\n    credor.append(df_formated['credor'][5 - i].capitalize())\ndata.index = credor","e94eb98e":"data.head()","460604f3":"import matplotlib.pyplot as plt\nimport seaborn as sns\nplt.figure(figsize = (10, 6))\nsns.set(style = 'darkgrid')\nplt.title('Previs\u00f5es para 2020 de gastos com diarias')\nplt.xlabel('Credor')\nplt.ylabel('Valor (em R$)')\nsns.scatterplot(data = data)","85c65e07":"m\u00e9dias = [mean_2017, mean_2018, mean_2019]\nano = []\nfor i in range(3):\n    ano.append(2017 + i)\nmedia_ano = pd.DataFrame(m\u00e9dias)\nmedia_ano.index = ano","5cc7968f":"media_ano.head()","3016acd0":"plt.figure(figsize = (10, 6))\nplt.xlabel('Periodo (ano)')\nplt.ylabel('Valor gasto em m\u00e9dia (em R$)')\nplt.title('An\u00e1lise gastos m\u00e9dios de di\u00e1rias por periodo')\nsns.lineplot(data = media_ano)","0c400af6":"df = pd.read_csv('..\/input\/diarias\/diarias-formated.csv')\ndf.head()","f7d7ebd9":"credor = []\nfor i in df['credor']:\n    credor.append(i.capitalize())\ndf.drop('credor', axis = 1)","1862a037":"df.fillna(0)\ndel df['credor']\ndf.head()","346bd556":"df.fillna(0)\nplt.figure(figsize = (20, 6))\ndf.index = credor\nsns.scatterplot(data = df)","dbef76cf":"# Percebemos a grande redu\u00e7\u00e3o de gastos com di\u00e1rias","74a0e405":"# **Pr\u00e9 processamento**","5291ee96":"# ***Trabalhando com valores de facto***","ddd25b1e":"# ***Explorando a rela\u00e7\u00e3o entre o ano do measuramento e os gastos com as di\u00e1rias***"}}