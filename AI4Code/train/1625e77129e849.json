{"cell_type":{"39229361":"code","bd683f7e":"code","40c7e51f":"code","ee0126b6":"code","df3cb5ee":"code","7d88b553":"code","09e058ba":"code","301ffe58":"code","1a86012f":"code","8b119fe3":"code","2fb9feb5":"code","533104fa":"code","e80585e4":"code","07d252ec":"code","bc444a3e":"code","4a99a0df":"code","aeaef78a":"code","16202c4c":"code","aa196133":"code","c0efbc87":"code","0b69116d":"code","f2d505b0":"code","41e51cbf":"code","e19adc56":"code","52538f09":"code","76a0b4b4":"code","110c453f":"code","2a0ada31":"code","fc0e1638":"code","0a2d858b":"code","73701490":"code","2202b6c8":"code","006566e3":"code","13dbe2e9":"code","e6e3319d":"code","543be4b5":"code","5cd46201":"code","8ff22fb7":"code","b6983768":"code","a9635290":"code","23327af8":"code","1f3a48c1":"code","12d4b60d":"code","51400f6f":"markdown","572c0db9":"markdown","a2cf72e5":"markdown","18729b59":"markdown","a10071dd":"markdown","66b45762":"markdown","019b2ec2":"markdown","14285a42":"markdown","37b29003":"markdown","c3d2c910":"markdown","14f95ed1":"markdown","e71069fc":"markdown","3251a00c":"markdown","e8e0691a":"markdown"},"source":{"39229361":"import pandas as pd","bd683f7e":"decathlon = pd.read_csv(\"..\/input\/decathlon.csv\")","40c7e51f":"decathlon.shape","ee0126b6":"decathlon.columns[0]","df3cb5ee":"decathlon.head()","7d88b553":"decathlon.Javeline.head()","09e058ba":"decathlon.Discus.head()","301ffe58":"from bokeh.io import push_notebook, show, output_notebook\nfrom bokeh.layouts import row \nfrom bokeh.plotting import figure\n\noutput_notebook()","1a86012f":"p = figure(title = \"Decathlon: Discus x Javeline\")\np.circle('Discus','Javeline',source=decathlon,fill_alpha=0.2, size=10)","8b119fe3":"show(p)","2fb9feb5":"from bokeh.transform import factor_cmap","533104fa":"decathlon.Competition.unique()","e80585e4":"index_cmap = factor_cmap('Competition', palette=['red', 'blue'], \n                         factors=sorted(decathlon.Competition.unique()))\n\n\n","07d252ec":"p = figure(plot_width=600, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.scatter('Discus','Javeline',source=decathlon,fill_alpha=0.6, fill_color=index_cmap,size=10,legend='Competition')\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'\np.legend.location = \"top_left\"","bc444a3e":"show(p)","4a99a0df":"decathlon['Athlets'].head()","aeaef78a":"p = figure(plot_width=600, plot_height=450, \n           title = \"Decathlon: Discus x Javeline\",\n           toolbar_location=None,\n          tools=\"hover\", \n           tooltips=\"@Athlets: (@Discus,@Javeline)\")\np.scatter('Discus','Javeline',source=decathlon,fill_alpha=0.6, fill_color=index_cmap,size=10,legend='Competition')\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'\np.legend.location = \"top_left\"\nshow(p)","16202c4c":"from bokeh.models import  ColumnDataSource,Range1d, LabelSet, Label\n\ndecath=ColumnDataSource(data=decathlon)","aa196133":"p = figure(plot_width=700, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.scatter('Discus','Javeline',source=decath,fill_alpha=0.6, fill_color=index_cmap,size=10,legend='Competition')\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'\np.legend.location = \"top_left\"\n","c0efbc87":"labels = LabelSet(x='Discus', y='Javeline', text='Athlets', level='glyph',text_font_size='9pt',\n              text_color=index_cmap,x_offset=5, y_offset=5, source=decath, render_mode='canvas')\n\np.add_layout(labels)","0b69116d":"show(p)","f2d505b0":"from bokeh.models import BoxAnnotation\n\np = figure(plot_width=700, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.scatter('Discus','Javeline',source=decath,fill_alpha=0.6, fill_color=index_cmap,size=10,legend='Competition')\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'\np.legend.location = \"top_left\"","41e51cbf":"low_box = BoxAnnotation(top=55, fill_alpha=0.1, fill_color='red')\nmid_box = BoxAnnotation(bottom=55, top=65, fill_alpha=0.1, fill_color='green')\nhigh_box = BoxAnnotation(bottom=65, fill_alpha=0.1, fill_color='red')\n","e19adc56":"p.add_layout(low_box)\np.add_layout(mid_box)\np.add_layout(high_box)\n","52538f09":"p.xgrid[0].grid_line_color=None\np.ygrid[0].grid_line_alpha=0.5\nshow(p)","76a0b4b4":"p = figure(plot_width=600, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.title.text = 'Click on legend entries to hide the corresponding lines'\n","110c453f":"decathlon.loc[(decathlon.Competition=='OlympicG')].head()","2a0ada31":"x=['OlympicG','Decastar']","fc0e1638":"x","0a2d858b":"for i in x:\n    df=decathlon.loc[(decathlon.Competition==i)]\n    p.scatter('Discus','Javeline',source=df,fill_alpha=0.6, fill_color=index_cmap,size=10,legend='Competition')\n\np.legend.location = \"top_left\"\np.legend.click_policy=\"hide\"\nshow(p)\n\n    ","73701490":"from bokeh.models import ColumnDataSource, ColorBar\nfrom bokeh.palettes import Spectral6\nfrom bokeh.transform import linear_cmap\n","2202b6c8":"Spectral6","006566e3":"mapper = linear_cmap(field_name='Points', palette=Spectral6 ,low=min(decathlon['Points']) ,high=max(decathlon['Points']))\n","13dbe2e9":"p = figure(plot_width=700, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.scatter('Discus','Javeline',source=decath,fill_alpha=0.6, line_color=mapper,color=mapper,size=10)\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'","e6e3319d":"color_bar = ColorBar(color_mapper=mapper['transform'], width=8,  location=(0,0),title=\"Points\")\n\np.add_layout(color_bar, 'right')\n","543be4b5":"show(p)\n","5cd46201":"p = figure(plot_width=700, plot_height=450, title = \"Decathlon: Discus x Javeline\")\np.scatter('Discus','Javeline',source=decath,fill_alpha=0.6, line_color=mapper,color=mapper,size='Points')\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'","8ff22fb7":"show(p)","b6983768":"from bokeh.models import LinearInterpolator","a9635290":"decath","23327af8":"size_mapper=LinearInterpolator(\n    x=[decathlon.Points.min(),decathlon.Points.max()],\n    y=[5,50]\n)","1f3a48c1":"p = figure(plot_width=700, plot_height=450, title = \"Decathlon: Discus x Javeline\",\n          toolbar_location=None,\n          tools=\"hover\", tooltips=\"@Athlets: @Points\")\np.scatter('Discus','Javeline',\n          source=decathlon,\n          fill_alpha=0.6, \n          fill_color=index_cmap,\n          size={'field':'Points','transform': size_mapper},\n          legend='Competition'\n         )\np.xaxis.axis_label = 'Discus'\np.yaxis.axis_label = 'Javeline'\np.legend.location = \"top_left\"","12d4b60d":"show(p)","51400f6f":"We can make an interactive legend too ","572c0db9":"We import the necessarly libraries ","a2cf72e5":"I will be adding an Hoover to the bubbles. It means that a pop-up will show off when we click on the bulble. I will make the name of the ","18729b59":"We add then the labels ","a10071dd":"We need then to do this in order to control the size of the bubbles in the scatter plot ","66b45762":"We will now color the circles according to a continuous variable. Let's say we will the `Points` variable\n","019b2ec2":"Adding the legend ","14285a42":"Let's first import the data using Panda Library","37b29003":"I will  now customize the scatter. I  will be coloring the bubbles according to the categorical variable `Competition`. We need to import `factor_cmap`. It will be used to map the  colors according to the levels of `Competition`.   ","c3d2c910":"We will be adding now the names of the Athlets in the graph. We need first to import some functions and transform `decathlon` data to a `ColumnDataSource` object.  ","14f95ed1":"I will showing in this notebook how can you make a scatter plot using Bokeh with Python. I will be using also the `decathlon` dataset that can be found the FactoMineR R package ","e71069fc":"# Scatter Plots  with  Bokeh ","3251a00c":"We draw then the scatter plot ","e8e0691a":"We will be adding Box Annotations from  top to  bottom or left to right "}}