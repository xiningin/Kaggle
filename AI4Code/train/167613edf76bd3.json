{"cell_type":{"30b583d8":"code","24e27bb8":"code","c313eec4":"code","172659da":"code","cf3b40e6":"code","d3da7e4e":"code","d75feed8":"code","ea3df5bb":"code","f505b9fa":"code","05fef941":"code","0417fdf4":"code","35a0dee0":"code","6eecc8f4":"code","d4d2decc":"code","57121dd4":"code","0ffcdb34":"code","bc3a55b3":"code","62746366":"code","31a5ca69":"code","138a3be2":"code","144a3778":"code","e882f903":"code","9ef965eb":"code","ce7698f3":"code","55378710":"code","37d01b1b":"code","bfd34ed2":"code","020090dd":"markdown","63a89e98":"markdown","a3041c3b":"markdown","38627856":"markdown","1939d00f":"markdown","b2c8205a":"markdown","3a866529":"markdown","8340d47a":"markdown","99a239cf":"markdown","ef5afea0":"markdown","46b86da3":"markdown","a5962772":"markdown","0778aff6":"markdown","f8f0a340":"markdown","2895d202":"markdown","fa006ec7":"markdown","e5e6b80e":"markdown","c3dd791d":"markdown","521c3e4f":"markdown","07ae8721":"markdown","f5b1d758":"markdown","a12d19c9":"markdown","efd9e32b":"markdown","3955e6c9":"markdown","f82ba2ba":"markdown","6d87ac7f":"markdown","3f5cebe8":"markdown","accf1af5":"markdown","922321eb":"markdown","a4dad389":"markdown","c892aae6":"markdown","c63dec41":"markdown","38ca5ed4":"markdown","a5e14fd1":"markdown","146bf75b":"markdown","02cab40f":"markdown","a615494b":"markdown"},"source":{"30b583d8":"from IPython.display import Image\nImage(\"..\/input\/images\/Header.jpg\")","24e27bb8":"## Introduction ","c313eec4":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('fivethirtyeight')\nimport re ","172659da":"df = pd.read_csv('..\/input\/scotch-whiskey-reviews-update-2020\/scotch_review2020.csv', index_col='id')\ndisplay(df.head())","cf3b40e6":"df.rename(columns={\"review.point\": \"points\",\"description.1.2247.\":\"description\"},inplace=True)\ndf.head()","d3da7e4e":"dimensions=df.shape\nprint (\"The dataframe has\",dimensions[1],\" columns and \",dimensions[0],\" rows\")","d75feed8":"df.info()","ea3df5bb":"df.currency.unique()","f505b9fa":"df.drop(['currency'], axis=1,inplace=True)\ndf['price'] = df['price'].replace('[\\$,]', '', regex=True)","05fef941":"symbol_idx = pd.to_numeric(df['price'], errors = 'coerce').isnull() # errors = 'coerce' results in NaNs for non-numeric values\ndf[symbol_idx][['name','price']].head(50)","0417fdf4":"df.at[[34, 187,740, 1549, 1815], 'price'] = 15000   # instances with '60,000\/set' which equals 15000 dollars per bottle","35a0dee0":"df.at[[93], 'price']=300\ndf.at[[95,360], 'price']=100 #Note that this is a Clue to check for double\ndf.at[[779], 'price']=200\ndf.at[[1011], 'price']=44*.75\ndf.at[[1281], 'price']=132*1.07\ndf.at[[1826], 'price']=39*.4285\ndf.at[[2028], 'price']=35*.75\ndf.at[[2201], 'price']=18*.4285\n","6eecc8f4":"df['price'] =df['price'].astype(int)","d4d2decc":"dups=df[df.duplicated(subset='name', keep=False)]\ndups.head()","57121dd4":"df.sort_values('points', ascending=False,inplace=True)\ndf.drop_duplicates(subset='name', keep='first',inplace=True)\ndf.head()\n","0ffcdb34":"dups=df[df.duplicated(subset='name', keep=False)]\ndups.head()","bc3a55b3":"# Thanks to Orfanakis Konstantinos' Notebook for this bit of code\n\ndf['age'] = df['name'].str.extract(r'(\\d+) year')[0].astype(float) # extract age and convert to float\n\ndf['name'] = df['name'].str.replace(' ABV ', '')\ndf['alcohol%'] = df['name'].str.extract(r\"([\\(\\,\\,\\'\\\"\\\u2019\\\u201d\\$] ? ?\\d+(\\.\\d+)?%)\")[0]\ndf['alcohol%'] = df['alcohol%'].str.replace(\"[^\\d\\.]\", \"\").astype(float) # keep only numerics and convert to float\n\ndf[['name', 'age', 'alcohol%']].sample(10, random_state = 42)","62746366":"df['price_per_point'] = df['price']\/df['points']\ndf.head()","31a5ca69":"df.describe()","138a3be2":"sns.set_style('whitegrid')\nplt.figure(figsize=(13, 5))\nax=df['points'].plot(kind='hist',xticks=[65,70,75,80,85,90,95,100],figsize = (13, 5),title=\"Frequency of Review Grades\")\nax.set_xlabel(\"Review Points\")\nax.set_ylabel(\"Number of Whiskys Receiving Grade\")","144a3778":"sns.set_style('whitegrid')\nplt.figure(figsize=(10, 5))\nax = sns.boxplot(x=\"category\", y=\"points\", data=df)\n ","e882f903":"sns.set_style('whitegrid')\nplt.figure(figsize=(10, 5))\nax = sns.boxplot(x='category', y='price', data=df,showfliers = False)\nax.set_ylabel('Price (USD)')","9ef965eb":"dr=df[df['price'] <600].copy()\ndr.reset_index(drop=True,inplace=True)\ndr.shape","ce7698f3":"g = sns.lmplot(x=\"age\", y=\"price\",  col=\"category\",hue=\"category\",\n               data=dr, height=6)","55378710":"g = sns.lmplot(x=\"age\", y=\"points\",  col=\"category\",hue=\"category\",\n               data=dr, height=6)","37d01b1b":"d90=df[df['points'] >90].copy()\nd90.reset_index(drop=True,inplace=True)\nd90.sort_values(by=['price_per_point'],ascending=[True],inplace=True)\nd90.head(10)","bfd34ed2":"from IPython.display import Image\nImage(\"..\/input\/images\/black_bottle.jpg\")","020090dd":"We next look at price.  From looking at the summary metrics, we now that prices vary wildly, and that is going to distort graphs.  Again, we use a boxplot to look at the distribution of data with outliers turned off.","63a89e98":"Looking back at the original data source, the default bottle size is 750ml, these bottles represent larger and smaller size containers.  So we can fairly compare, let's normalize these prices to 750ml bottles. Given that there is only a handful and no consistent pattern, we will just brute force the adjustment","a3041c3b":"Look for missing data","38627856":"That title column \"review.points\" with the periods is going to cause heartache; let us just make it \"points\".  Also clean up description","1939d00f":"OK, we have wrangled the data to the point where we can ask some questions","b2c8205a":"Hmmm, for all three classes of whiskey, 75% of the whiskys are in the \"85-89 points\u2014Very good: a whisky with special qualities\" category.  If that is the case, then logically those \"special qualities\" are not that special. I realize that Raymnond Chandler once said  <i>\"There is no bad whiskey. There are only some whiskeys that aren\u2019t as good as others\"<\/i>, but this seems a bit much.  We will continue our analysis, but concern has to be raised as to the objectivity of the reviews.\n\nThat said, we really don't see a marked review superiority between the different classes of whisky, the median for all three is about a score of 89 with Single malt being slightly scored lower.","3a866529":"## Preliminaries ","8340d47a":"From the name column we can get some additional data such as age and percentage alcohol","99a239cf":"From this, we see that a large majority of our Whiskys are under $600, so let us cull our data set down to whisky's under that value.  ","ef5afea0":"I think I will need to conduct some field research to validate my finding ;-)","46b86da3":"Let us take a highlevel view of our data ","a5962772":"## Questions","0778aff6":"Let us look for duplicate entries","f8f0a340":"Import the standared libraries ","2895d202":"We examing the correlation between Price and the Age of the Whisky per Category","fa006ec7":"Let us look at the shape of our data","e5e6b80e":"We see there is a correlation, and it is most pronounced for Single malts","c3dd791d":"We look at the relation of the age of the whisky to review score","521c3e4f":"Let us look at the price column for nonnumeric values","07ae8721":"To find the best value, we select all Whiskys above a 90 Review score and then sort by price per point","f5b1d758":"Finally, lets create a metric of how much we are paying per review point ","a12d19c9":"We lost some date, but this may be a far more practicle exercise (anyone who can spend over \\\\$600 for a bottle of Scotch is likely not concerned with a price analysis)","efd9e32b":"<ol>\n<li> What is the review differences between different categories of Scotch?  Are Single Malts supeior to Blends?\n<li> What is the relation of the Scotch's Age to its final review rating?\n<li> Which Scotch is the best value, where value is defined as the highest review at the lowest price per point.\n<\/ol>","3955e6c9":" Let's be generous. We will sort by points, and then drop the duplicates saving the highest rating when there is a difference","f82ba2ba":"OK, it seems that everything is in dollars, so that column is not providing us much. Let us drop it while renaming \"price\" to \"price (usd)\"","6d87ac7f":"# Using Python and Pandas in Pursuit of a Good Scotch","3f5cebe8":"We have some very generous reviewers or we are to believe there is no bad Scotch Whisky?  According to Whiskey Review, the range of review scores are as follow:\n<ul>\n<li>95-100 points\u2014Classic: a great whisky<\/li>\n<li>90-94 points\u2014Outstanding: a whisky of superior character and style<\/li>\n<li>85-89 points\u2014Very good: a whisky with special qualities<\/li>\n<li>80-84 points\u2014Good: a solid, well-made whisky<\/li>\n<li>75-79\u2014Mediocre: a drinkable whisky that may have minor flaws<\/li>\n<li>50-74\u2014Not recommended<\/li>\n<\/ul>\n\nPer above, we have no mediocre whiskys, which is hard to believe. Let's look at a boxplot of review scores by category of whisky.","accf1af5":"Wow, look at those range of values and standard deviation on price. We will need to factor that in when we do plotting.  A graph ranging from \\\\$1,570,000 to \\\\$7.00 is not going to be pretty","922321eb":"## Load and Process Data","a4dad389":"Let us look at the Distribution of Review Scores","c892aae6":"## So what is the Best Scotch Whisky Value? ","c63dec41":"This notebook was created to as an assignment for the University of California San Diego Course <i>\"Basic Data Processing and Visualization\"<\/i> as part of the University of California San Diego, part of the <i>\"Python Data Products for Predictive Analytics Specialization\"<\/i>.  The assignment was <i>For this project, you will load a real-world dataset of consumer activities (e.g. product reviews) from the web, compute basic statistics about the data, and perform some visualizations of the data.<\/i>\n\nFor my assignment,  I decided to do an analysis of reviews of Scotch Whiskys, using the dataset <a href='https:\/\/www.kaggle.com\/koki25ando\/22000-scotch-whisky-reviews'>2,2k+ Scotch Whisky Reviews<\/a> of Kaggle.  I noticed that the dataset was over 3 years old, but the data scrapping script was still available, so I executed it come up with an up to date listing of reviews as my source.   ","38ca5ed4":"So again a correlation, and with the more definitive correlation for the Single Malts.","a5e14fd1":"## Analysis","146bf75b":"Confirm we got all the duplicates","02cab40f":"The winner is:","a615494b":"Very good, no missing data.  Let's look at the catagoricals, starting with currency"}}