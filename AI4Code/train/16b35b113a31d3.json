{"cell_type":{"8db13fc5":"code","5d47c336":"code","842cefef":"code","d7c86012":"code","045e034f":"code","51692987":"code","f78e4007":"code","c51f4c36":"code","b7762082":"code","2ea21080":"code","0cca6e4b":"code","70db291f":"code","147d40c2":"code","43ed9a81":"code","a94ae799":"markdown","0d3983f2":"markdown","050c016b":"markdown","47a3687c":"markdown","fc23a517":"markdown","8f861b2a":"markdown","4391fa3f":"markdown","780ff960":"markdown","491bab62":"markdown","e1fee16e":"markdown","e75286f4":"markdown","d6100cf4":"markdown","5bbd3315":"markdown","6d9213c1":"markdown","e5cf13a4":"markdown","3be5db0a":"markdown","3ad75f71":"markdown","96e4d4c9":"markdown","c0053a95":"markdown","ad1b562e":"markdown","6955485a":"markdown","fe110620":"markdown"},"source":{"8db13fc5":"# Pandas for managing and using dataframes\nimport pandas as pd\n\n# Matplotlib is a basic plotting library in python\nimport matplotlib.pyplot as plt\n\n# Built over matplotlib, seaborn offers many more features\nimport seaborn as sns\n\nimport scipy\n\nsns.set()\nsns.set_theme('notebook')\nsns.set_style('white')\nsns.despine()\n# sns.set(color_codes=True)\n\ngolden_ratio = scipy.constants.golden\n\nfrom pprint import pprint","5d47c336":"# The name of the data file\ndatafile = '..\/input\/bank-marketing-dataset-bits\/dvi-a2-ps2-data.csv'\n\n# Reading the data file into a dataframe object\ndata = pd.read_csv(datafile)","842cefef":"data.head(5)","d7c86012":"print(f'Number of records in the dataset: {data.shape[0]}')","045e034f":"# Getting unique values for each column as a dictionary\ndef unique_dictionary(data):\n    columns = data.columns\n    unique_dict = dict()\n    for column in columns:\n        unique_dict[column] = '  '.join(data[column].unique().astype('str').tolist())\n    return unique_dict\n\ndef dict_prettyprint(dictionary):\n    for key in dictionary.keys():\n        print('{:<12} : {}'.format(key, dictionary[key]))\n\ndef dataframe_print_unique(data):\n    dict_prettyprint(unique_dictionary(data))\n","51692987":"print('Unique Values before cleaning')\nprint()\ndataframe_print_unique(data[['job','marital','education','default','housing','loan','contact','day_of_week','poutcome','subscription']])","f78e4007":"# Cleaning\n\n# Job type has a value 'admin.'. Changing it into 'admin'\ndata['job'] = data['job'].str.replace('admin.','admin')\n\n# Changing 'nonexistent' in poutcome to 'unknown' to match the syntax of the rest of the data\ndata['poutcome'] = data['poutcome'].str.replace('nonexistent','unknown')","c51f4c36":"print('Unique Values after cleaning')\nprint()\ndataframe_print_unique(data[['job','marital','education','default','housing','loan','contact','day_of_week','poutcome','subscription']])","b7762082":"correlation = data.corr()\nfig, ax = plt.subplots(figsize=(12,10))\nax = sns.heatmap(correlation, annot=True, cmap='RdBu', square=True)\nplt.xticks(rotation=45)\nax.set_xlabel('Features', fontweight='bold', fontsize=14)\nax.set_ylabel('Features', fontweight='bold', fontsize=14)\nfig.suptitle('Feature Heatmap', fontsize=25)\nplt.show()","2ea21080":"height = 10\nfig, ax = plt.subplots(figsize=(golden_ratio*height,height))\n\nax.set_title('Age distribution histogram', fontsize=24)\nN0, bins0, patches0 = ax.hist(data[data['subscription'] == 0]['age'], 20, histtype='bar', label='Not Subscribed', color='#ffdccc')\nN1, bins1, patches1 = ax.hist(x=data[data['subscription'] == 1]['age'], bins=20, label='Subscribed', color='#ccffcc')\n\nax.annotate(text='Most calls made to younger people', xy=(36,6000),xytext=(40,6000),fontsize=14,\n           arrowprops=dict(arrowstyle='<-',edgecolor='black'))\nfor p in patches0:\n    if (p.get_height() >= 5000):\n        p.set_facecolor('tab:orange')\nfor p in patches1:\n    if (p.get_height() >= 600):\n        p.set_facecolor('tab:green')\n\n\nax.set_xlabel('Age', fontweight='bold', fontsize=14)\nax.set_ylabel('Count', fontweight='bold', fontsize=14)\nax.spines['right'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['bottom'].set_visible(False)\nplt.xlim(10,80)\nax.legend(['Not Subscribed','Subscribed'], fontsize=14, title='Subscription').get_title().set_fontsize('14')\n\nplt.show()","0cca6e4b":"data_month_grouped = data.groupby('month').count().reset_index()\ndata_month_grouped[\"Month\"] = pd.to_datetime(data_month_grouped.month, format='%b', errors='coerce').dt.month\ndata_month_grouped = data_month_grouped.sort_values(by=\"Month\").reset_index(drop=True)\n\ncustom_palette = ['lightgrey']*9\ncustom_palette.insert(2,'tab:orange')\n\nfig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(ax = ax, data=data_month_grouped, y='month',x='subscription', palette=custom_palette)\nax.set_title('Contacts made each month', fontsize=24)\nax.set_ylabel('Month', fontweight='bold', fontsize=14)\nax.set_xlabel('Number of Contacts', fontweight='bold', fontsize=14)\nax.spines['right'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['bottom'].set_visible(False)\nax.tick_params(axis='y', which='both', length=0)\n\nplt.show()","70db291f":"data_education_grouped = data.groupby(['education', 'subscription']).count()[['age']].reset_index()\neducation_df = pd.DataFrame({'education': ['illiterate','basic.4y','basic.6y','basic.9y','high.school','professional.course','university.degree','unknown']})\neducation_df = education_df.reset_index().set_index('education')\ndata_education_grouped['education_index'] = data_education_grouped['education'].map(education_df['index'])\ndata_education_grouped = data_education_grouped.sort_values(by='education_index')\n\ncustom_palette = ['lightgrey']*7\ncustom_palette.insert(6, 'tab:orange')\n\nfig, ax = plt.subplots(figsize=(12,8))\nsns.barplot(ax = ax, data=data_education_grouped[data_education_grouped['subscription'] == 1], y='education',x='age', palette = custom_palette)\nax.set_title('Education division vs Subscriptions', fontsize=24)\nax.set_ylabel('Education', fontweight='bold', fontsize=14)\nax.set_xlabel('Subscription count', fontweight='bold', fontsize=14)\nax.spines['right'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['bottom'].set_visible(False)\nax.tick_params(axis='y', which='both', length=0)\n\nplt.show()","147d40c2":"data_subscription_grouped = data.groupby('subscription').count()[['age']].reset_index()\ndata_subscription_grouped['subscription'] = data_subscription_grouped['subscription'].astype('str').str.replace('0','Not Subscribed')\ndata_subscription_grouped['subscription'] = data_subscription_grouped['subscription'].astype('str').str.replace('1','Subscribed')\n\ncustom_palette = ['lightgrey', 'tab:orange']\n\nfig, ax = plt.subplots(figsize=(12,2))\nsns.barplot(ax = ax, data=data_subscription_grouped, y='subscription',x='age', palette = custom_palette)\nax.set_title('Clients Subscribed', fontsize=24)\nax.set_ylabel('', fontweight='bold', fontsize=14)\nax.set_xlabel('Subscription count', fontweight='bold', fontsize=14)\nax.spines['right'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['bottom'].set_visible(False)\nax.tick_params(axis='y', which='both', length=0)\n\nplt.show()","43ed9a81":"data_job_marital_subscription_grouped = data.groupby(by=['job', 'subscription']).count()[['age']].reset_index()\n\n# data_job_marital_subscription_grouped = data_job_marital_subscription_grouped[data_job_marital_subscription_grouped['subscription'] == 1]\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped[data_job_marital_subscription_grouped['job'] != 'unknown']\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped[data_job_marital_subscription_grouped['job'] != 'retired']\n\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped.sort_values(by='age', ascending=False)\n\ncustom_palette = ['#f38a20'] + ['#0d8bf2'] + ['lightgrey']*8\n\nfig, ax = plt.subplots(1,2,figsize=(8*golden_ratio*2,8))\nsns.barplot(ax=ax[0], data=data_job_marital_subscription_grouped, y='job', x='age', ci=None, palette=custom_palette)\nsns.despine(left=True, bottom=True)\nax[0].set_title('Most popular Job', fontsize=24)\nax[0].set_ylabel('', fontweight='bold', fontsize=14)\nax[0].set_xlabel('Count', fontweight='bold', fontsize=14)\n\n\n\ndata_job_marital_subscription_grouped = data.groupby(by=['education', 'job', 'subscription']).count()[['age']].reset_index()\n\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped[(data_job_marital_subscription_grouped['job'] == 'admin') | (data_job_marital_subscription_grouped['job'] == 'blue-collar')]\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped[data_job_marital_subscription_grouped['education'] != 'unknown']\ndata_job_marital_subscription_grouped = data_job_marital_subscription_grouped[data_job_marital_subscription_grouped['education'] != 'illiterate']\n\ncustom_palette=['#fbd9b6', '#b6dcfb']\n\nsns.barplot(ax=ax[1], data=data_job_marital_subscription_grouped, y='education', x='age',hue='job', ci=None, palette=custom_palette)\nsns.despine(left=True, bottom=True)\nax[1].set_title('Job with Education', fontsize=24)\nax[1].set_ylabel('', fontweight='bold', fontsize=14)\nax[1].set_xlabel('Count', fontweight='bold', fontsize=14)\nax[1].legend(['admin','blue-collar'], fontsize=14, title='Job Type').get_title().set_fontsize('14')\n\nax[1].patches[8].set_facecolor('#0d8bf2')\nax[1].patches[5].set_facecolor('#f38a20')\n\nax[1].text(1500,1.8, \n'''Most Blue-collar job holders have\ncompleted only basic 9 year education''', fontsize=14)\n\nax[1].text(2000,4.5, \n'''While University degree holders have\nan admin job''', fontsize=14)","a94ae799":"#### Q. What is the most popular job types that are inquired for a term deposit?\nIn today's world where we are stuck at home due to the pandemic, many have also lost their jobs. They are now reliant on the money they saved and returns on the investments they had made. We have seen above that education is a big criteria in deciding how one is going to invest and subscribe to a term deposit.\n\nWith this question we wanted to investigate what sort of job is the most popular and what level of education is required. Given that this data is collected from the inquiries made by a bank to potential customers we cannot be entirely sure if the data is demographically random. But, we can nonetheless get some interesting insights from it.\n\nTo answer this we used 2 barplots to show the most popular jab among propective customers and the how much education did they receive before landing a job.","0d3983f2":"**1. Findings**\n- Most of the calls made by the bank to prospective customers is getting a negative response. Only about 12% calls are successfull\n\n**2. Reason**\n\nA horizontal bar chart can \n- accomodate the long labels\n- occupy less space, lesser cognitive load\n\n**3. Pre-attentive attributes**\n- Highligting important values\n- Bar length\n\n**4. Gestalt Principles**\n- Closure (there is a virtual bounding box of the figure)\n- Proximity (the lables for each bar is very close to the bar showing what information the bar conveys)","050c016b":"### Question 5\nPlot the chart to show the total number of clients subscribed to the deposit\n\nWrite the python code in the below cell to create the appropriate visual to perform the above task .\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did\n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)","47a3687c":"**1. Findings**\n- We can find some highly positive and negative correlated values\n- `Subscription` has very limited correlation to other independent features\n\n**2. Reason**\n\nWe wanted to obtain a heatmap of all the features so as to find some pattern and dependence of features in the data.\n\n**3. Pre-attentive attributes**\n- Visual heirarchy of information\n- Using a color theme (red and blue)\n\n**4. Gestalt Principles**\n- Closure (there is a virtual bounding box of the figure)\n- Similarity (closely correlated values have similary shades)","fc23a517":"Download the dataset and read it into a dataframe","8f861b2a":"Import the modules needed","4391fa3f":"**1. Findings**\n- It is clear that the organisation is following the right pattern in calling more individuals who are aged between 30 and 35.\n- Looking at the right tail I can see that once over 62 (retirement age) the ratio of unsubscribed\/subscribed has increased\n\n**2. Reason**\n\nWe are looking at how the age of the customers affects their interest in subscribing to a plan from the bank. We chose a histogram approach to show the distribution of age of customers against the number of contacts that were made by that bank to them.\n\n**3. Pre-attentive attributes**\n- Visual heirarchy of information\n- Using a color theme\n- Highligting important values\n\n**4. Gestalt Principles**\n- Closure (there is a virtual bounding box of the figure)\n- Proximity (the histogram bars of same group are very close in value to each other)\n- Focal Point (2 bars in `Subscribed` and `Not Subscribed` are highlighted)","780ff960":"#### Frame 1 (more) question which will help in the EDA(Exploratory Data Analysis) of the given data set and answer the same using the best visual.\n \n 1. Write the question in a markdown cell\n 2. Below the question,in a coding cell,write the python code to create the visual to answer the question  \n\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did\n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)\n  ","491bab62":"### Question 2\nFind age distribution and Plot histogram graph for this. And check which age group is most likely to subscribe the bank.\n\nWrite the python code in the below cell to create the appropriate visual to perform the above task .\n\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did \n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)\n","e1fee16e":"Find out how many entries there are in the dataset.","e75286f4":"### Question 3\nVisualize number of contacts made in each month.\n\nWrite the python code in the below cell to create the appropriate visual to perform the above task .\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did\n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)\n","d6100cf4":"**1. Findings**\n- `admin` and `blue-collar` jobs are the most popular among people\n- `basic 9 year` education can easily get someone a `blue-collar` job while an `university degree` is needed for an `admin` job.\n- This data feels a little skewed as the number of `university degree` holders that were enquired is very high compared to other `education` levels\n\n**2. Reason**\n\nA horizontal bar chart can \n- accomodate the long labels\n- occupy less space, lesser cognitive load\n\n**3. Pre-attentive attributes**\n- Highligting important values\n- Bar length\n\n**4. Gestalt Principles**\n- Proximity (text describing the bars is quite close to the bar)\n- Foreground and Background","5bbd3315":"##  Download and Prep the Data","6d9213c1":"# This Notebook is part of an assignment submission made to BITS Pilani","e5cf13a4":"**1. Findings**\n- Education is necessary to understand the workings of a banking system.\n- People with higher education are more likely to subscribe to a term deposit or insuarance with the bank.\n\n**2. Reason**\n\nA horizontal bar chart can \n- accomodate the long names of educational qualifications \n- occupy less space, lesser cognitive load\nHere the bars are not sorted by value but instead sorted by level of education to show that education is important to understand banking.\n\n**3. Pre-attentive attributes**\n- Highligting important values\n- Bar length\n\n**4. Gestalt Principles**\n- Closure (there is a virtual bounding box of the figure)\n- Focal Point (the bar for `university.degree` is focussed by color)","3be5db0a":"**1. Findings**\n- A month or 2 into the financial year and there is a considerable increase in the number of contacts\n- I cannot assume budgetting to be a reason for rise of calls in may. But, onset of summer could be a correlation, may not be a causation. Here, we would need data from more than an year to make considerable insights\n\n**2. Reason**\n\nA horizontal bar chart can \n- accomodate the names of the months \n- occupy less space, lesser cognitive load\nHere the bars are not sorted by value because we are looking at number of calls made each month\n\n**3. Pre-attentive attributes**\n- Highligting important values\n- Bar length\n\n**4. Gestalt Principles**\n- Closure (there is a virtual bounding box of the figure)\n- Focal Point (the bar for `may` is focussed by color)","3ad75f71":"### Question 1\n#### Find the correlation and plot the heat map for the correlation between features.\n#### Write the python code in the below cell to create appropriate visual to perform the above task.\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did\n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)","96e4d4c9":"<img src = \"https:\/\/www.bits-pilani.ac.in\/Uploads\/Campus\/BITS_university_logo.gif\" style=\"height:50px\">\n\nWork Integrated Learning Programmes Division<br>\nM.Tech (Data Science and Engineering)<br> Data Visualization And Interpretation (DSECL ZG555))<br>\nSecond Semester, 2020-21\n","c0053a95":"First five items in the dataset.","ad1b562e":"### Question 4\nCategorize the data by grouping into education divisions and check which sector is more likely to subscribe.\n\nWrite the python code in the below cell to create the appropriate visual to perform the above task .\n#### Answer in markdown cells below the visual\n1. Summarise your findings from the visual.\n2. The reason for selecting the chart type you did\n3. Mention the pre-attentive attributes used.(atleast 2)\n4. Mention the gestalt principles used.(atleast 2)\n","6955485a":"- Clean up data.\n- Remove unnecessary columns. Mention the reasons.\n- Show the data.","fe110620":"# Visualisation Questions"}}