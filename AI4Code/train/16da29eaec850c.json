{"cell_type":{"932c9aef":"code","161a535a":"code","331f0c73":"code","9fa3edf0":"code","4c7a5ea6":"code","3ed2af45":"code","4feb98a3":"markdown","ad8429a9":"markdown","13a62140":"markdown"},"source":{"932c9aef":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nfrom urllib import request, error\nfrom PIL import Image\nfrom io import BytesIO\nimport csv\nimport tarfile\n\nimport tensorflow as tf\nimport tempfile\nimport urllib\nimport tarfile\n","161a535a":"output_dir_for_tar_files = 'download'\noutput_dir_for_images = 'train_data'","331f0c73":"data_file = []\nfor i in range(500):\n    i_str = str(i)\n    if len(i_str) < 2:\n        i_str = '00'+i_str\n    elif len(i_str) < 3:\n        i_str = '0'+i_str\n    data_file.append('https:\/\/s3.amazonaws.com\/google-landmark\/train\/images_'+i_str+'.tar')","9fa3edf0":"def download(directory, url, filename):\n  \"\"\"Download a tar file from the train dataset if not already done. This permits you to rerun and not download already existing tar files from previous attempts.\"\"\"\n  # if the file is already present we don't want to do anything but ack its presence\n  filepath = directory+'\/'+filename\n  if tf.gfile.Exists(filepath):\n    return filepath\n  if not tf.gfile.Exists(directory):\n    tf.gfile.MakeDirs(directory)\n  print('Downloading %s to %s' % (url, filepath))  \n  urllib.request.urlretrieve(url, filepath)","4c7a5ea6":"def extract(tar_file, path):\n    opened_tar = tarfile.open(tar_file)\n     \n    if tarfile.is_tarfile(tar_file):\n        opened_tar.extractall(path)\n    else:\n        print(\"The tar file you entered is not a tar file\")","3ed2af45":"for row in data_file:\n        amazon_location = row\n        file_name = amazon_location[-14:]\n        print(amazon_location)\n        print(file_name)\n        download(output_dir_for_tar_files, amazon_location, file_name)\n        extract(output_dir_for_tar_files+'\/'+file_name, output_dir_for_images)","4feb98a3":"Note: These Directories *don't*(!!!) have to exist. They had just in an older version with 'os.chdir(path)' to exist! Sorry!\n\n","ad8429a9":"This Notebook just work on a Local Machine. So you have to download this notebook.\n\nHere's a script version: https:\/\/www.kaggle.com\/arteam\/download-and-extract-tar-files-train-data-script\n\nThis a notebook to download and extract the Train Data from the 500 .tar files. It is based on PC Jimmmy's [*Download 500 tar Training dataset*!](https:\/\/www.kaggle.com\/pcjimmmy\/download-500-tar-training-dataset) . Credits and Thanks to PC Jimmmy!!!","13a62140":"It's tested on Ubuntu, but I think it should work on Windows, too."}}