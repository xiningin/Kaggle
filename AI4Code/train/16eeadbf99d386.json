{"cell_type":{"84c59d53":"code","6a5911fb":"code","9b6de330":"code","381fc845":"code","2b633ce8":"code","2b190647":"code","adb87313":"code","9fdda6ce":"code","aebbe62a":"code","e1f1361d":"code","230a7f6c":"code","dd958a3b":"code","f5e5d3d5":"code","dc4726c0":"code","7666a4ea":"code","b63b5ff2":"code","22895e64":"code","4be729e2":"code","bf02982d":"code","4dbd995c":"code","0f7e1e02":"code","c83fa5df":"code","d0b2f4bc":"code","5e2b287b":"code","c29f1927":"code","a63decd4":"code","91c9c217":"code","4f490d92":"code","39850fd5":"code","315b2253":"code","592b7f74":"code","7e1ad551":"code","fcaf2e71":"code","f203ecf4":"code","478363f4":"code","965a7aa9":"code","4127a255":"code","fbe2e1f7":"code","1c671e8c":"code","0f6d91a3":"code","acc0a169":"code","2bca65f4":"code","ee127125":"code","196feef8":"code","01cec38d":"code","0ddd59ed":"code","b80ebc39":"code","c9337ac3":"code","30c80764":"code","bedeccb0":"code","8112b947":"code","6978431d":"code","489f2f7b":"markdown","82f7a4d3":"markdown","9922627f":"markdown","334f8ebc":"markdown","67887f3f":"markdown","eab4997b":"markdown","08b4e8e3":"markdown","19750f4e":"markdown","d71d1c06":"markdown","d6bf04ff":"markdown","961a2f45":"markdown","b95ab336":"markdown","0c09cbc9":"markdown","a9fd476a":"markdown"},"source":{"84c59d53":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as msno\nimport plotly.graph_objects as go\nfrom plotly.offline import init_notebook_mode,iplot\nimport plotly.figure_factory as ff\nimport glob\nimport math\nimport warnings\nwarnings.filterwarnings('ignore')","6a5911fb":"product = pd.read_csv(\"\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\ndistrict = pd.read_csv(\"\/kaggle\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")","9b6de330":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[4].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    li.append(df)\n    \nengagement = pd.concat(li)\nengagement= engagement.reset_index(drop=True)","381fc845":"print('engagement shape : ',engagement.shape)\nprint('product shape : ',product.shape)\nprint('district shape : ',district.shape)","2b633ce8":"engagement.head()","2b190647":"product.head()","adb87313":"district.head()","9fdda6ce":"print('\\033[1m''engagement missing values \\n''\\033[0m',engagement.isna().sum())\nprint('\\033[1m''product missing values \\n''\\033[0m',product.isna().sum())\nprint('\\033[1m''district missing values \\n''\\033[0m',district.isna().sum())","aebbe62a":"msno.matrix(district,figsize=(8,5))","e1f1361d":"msno.matrix(product,figsize=(8,5))","230a7f6c":"msno.bar(engagement,figsize=(8,5))","dd958a3b":"district['state'].nunique()","f5e5d3d5":"sns.countplot(y='state',data=district,order=district['state'].value_counts().index)\nsns.set(rc={'figure.figsize':(12,12)})","dc4726c0":"loc=['Suburb','Rural','City','Town']\ndata = go.Pie(values = district['state'].value_counts(),\n             labels = loc,\n             textinfo='label+value+percent')\nfig = go.Figure(data=data)\nfig.show()","7666a4ea":"# count of pct_black\/hispanic \nsns.countplot(y='pct_black\/hispanic',data=district,\n             order=district['pct_black\/hispanic'].value_counts().index)\nsns.set(rc={'figure.figsize':(12,10)})\nsns.set_style(\"white\")","b63b5ff2":"stat=district['pct_black\/hispanic'].value_counts().index\ndata = go.Pie(values=district['pct_black\/hispanic'].value_counts(),\n              labels=stat,\n              textinfo='label+value+percent'\n             )\nfig=go.Figure(data=data)\nfig.show()","22895e64":"# count of pct_free\/reduced\nsns.countplot(y='pct_free\/reduced',data=district,\n             order=district['pct_free\/reduced'].value_counts().index)\nsns.set(rc={'figure.figsize':(12,12)})\nsns.set_style(\"white\")","4be729e2":"stat=district['pct_free\/reduced'].value_counts().index\ndata = go.Pie(values=district['pct_black\/hispanic'].value_counts(),\n             labels=stat,\n             textinfo='label+value+percent')\nfig = go.Figure(data=data)\nfig.show()","bf02982d":"# count of pp_total_raw\nsns.countplot(y='pp_total_raw',data=district,\n             order=district['pp_total_raw'].value_counts().index)\nsns.set(rc={'figure.figsize':(15,10)})\nsns.set_style(\"white\")","4dbd995c":"def state_dist(df,col1,col2):\n    fig,ax = plt.subplots(figsize=(15,4))\n    plt.xticks(rotation=90)\n    plt.suptitle(f'{col2} distribution in each {col1}')\n    sns.countplot(data=df,x=col1, hue=col2, order=df[col1].value_counts().index,\n                 palette='pastel',orient='v')\n    plt.legend(bbox_to_anchor=(1,0),loc='lower left')","0f7e1e02":"state_dist(district,'state','pct_black\/hispanic')","c83fa5df":"state_dist(district,'locale','pct_black\/hispanic')","d0b2f4bc":"state_dist(district,'state','pct_free\/reduced')","5e2b287b":"state_dist(district,'locale','pct_free\/reduced')","c29f1927":"state_dist(district,'state','pp_total_raw')","a63decd4":"state_dist(district,'locale','pp_total_raw')","91c9c217":"status =  engagement.groupby('time')['pct_access','engagement_index'].mean()\nstatus.plot(figsize=(13,7),title='Monthly engagement mean',subplots=True)","4f490d92":"# top10 of provider\/company name\nsns.countplot(y='Provider\/Company Name',data=product,\n             order=product['Provider\/Company Name'].value_counts().index[:10])\nplt.title('Top10 of Provider\/Company Name',size=25)\nplt.figure(figsize=(8,10))\nplt.show()","39850fd5":"sns.countplot(y='Sector(s)',data=product,\n             order=product['Sector(s)'].value_counts().index)\nsns.set(font_scale=1.5)\nplt.title('Sector(s)',fontsize=25)\nplt.show()","315b2253":"product['Primary Essential Function']","592b7f74":"#reference https:\/\/www.kaggle.com\/ruchi798\/covid-19-impact-on-digital-learning-eda-w-b#Reading-data-files-%F0%9F%91%93\n# count of LC, CM, SDO\nprimary_essential_main=[]\nprimary_essential_sub=[]\nfor s in product['Primary Essential Function']:\n    if(not pd.isnull(s)):\n        m = s.split('-',1)[0].strip()\n        primary_essential_main.append(m)\n        \n        sub = s.split('-',1)[1].strip()\n        primary_essential_sub.append(sub)\n    else:\n        primary_essential_main.append(np.nan)\n        primary_essential_sub.append(np.nan)\n\nproduct['P_E_main']= primary_essential_main\nproduct['P_E_sub']=primary_essential_sub","7e1ad551":"c1=c2=c3=0\n\nfor s in product['P_E_main']:\n    if(not pd.isnull(s)):\n        c1+=s.count('CM')\n        c2+=s.count('LC')\n        c3+=s.count('SDO')\nlabel=['CM','LC','SDO']\ncount=[c1,c2,c3]\n\nfig = plt.figure(figsize=(5,5))\nplt.title('Primary_Essential_Func')\nax=fig.add_subplot()\npie = ax.pie(count,autopct=lambda x: '{:.2f}'.format(x),labels=label)\nplt.show()\n","fcaf2e71":"sns.countplot(y='P_E_sub',data=product, order = product['P_E_sub'].value_counts().index)\nplt.title('Primary_Essential_Sub')\nplt.show()","f203ecf4":"# Merge engagement & district\nengagement['time'] = pd.to_datetime(engagement['time'])\nprint(product['LP ID'].nunique())\nprint(engagement['lp_id'].nunique())","478363f4":"eng_pro = pd.merge(product,engagement,left_on='LP ID',right_on='lp_id')\neng_pro.head()","965a7aa9":"print(district['district_id'].nunique())\nprint(eng_pro['district_id'].nunique())","4127a255":"eng_pro['district_id']=eng_pro['district_id'].astype(str).astype(int)\neng_all = pd.merge(district,eng_pro,left_on='district_id',right_on='district_id')\neng_all.head()","fbe2e1f7":"del(eng_pro)","1c671e8c":"eng_all.isnull().sum()","0f6d91a3":"msno.heatmap(eng_all)","acc0a169":"eng_all=eng_all[eng_all['state'].notnull()]\neng_all.isnull().sum()","2bca65f4":"black_hispanic = eng_all.groupby(['pct_black\/hispanic','time'])['engagement_index'].mean().reset_index()","ee127125":"import plotly.express as px\nlayout= go.Layout(title='engagement of each group')\nfig=go.Figure(layout=layout)\nfig.update_xaxes(showgrid=True,showline=True)\neng_01 = black_hispanic[black_hispanic['pct_black\/hispanic']=='[0, 0.2[']\neng_03 = black_hispanic[black_hispanic['pct_black\/hispanic']=='[0.2, 0.4[']\neng_05 = black_hispanic[black_hispanic['pct_black\/hispanic']=='[0.4, 0.6[']\neng_07 = black_hispanic[black_hispanic['pct_black\/hispanic']=='[0.6, 0.8[']\neng_09 = black_hispanic[black_hispanic['pct_black\/hispanic']=='[0.8, 1[']\n\nfig.add_trace(go.Scatter(\n    x=eng_01['time'],y=eng_01['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='black\/hispanic_10%'))\nfig.add_trace(go.Scatter(\n    x=eng_03['time'],y=eng_03['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='30%'))\nfig.add_trace(go.Scatter(\n    x=eng_05['time'],y=eng_05['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='50%'))\nfig.add_trace(go.Scatter(\n    x=eng_07['time'],y=eng_07['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='70%'))\nfig.add_trace(go.Scatter(\n    x=eng_09['time'],y=eng_09['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='90%'))","196feef8":"eng_all.replace('[0, 0.2[','0,1',inplace=True)","01cec38d":"eng_all.replace('[0.2, 0.4[','0,3',inplace=True)\neng_all.replace('[0.4, 0.6[','0,5',inplace=True)\neng_all.replace('[0.6, 0.8[','0,7',inplace=True)\neng_all.replace('[0.8, 1[','0,9',inplace=True)","0ddd59ed":"eng_all['pct_free\/reduced'].unique()","b80ebc39":"eng_all['pct_black\/hispanic'].unique()","c9337ac3":"fr = eng_all.groupby(['pct_free\/reduced','time'])['engagement_index'].mean().reset_index()","30c80764":"edutech = eng_all.groupby(['Sector(s)','time'])['engagement_index'].mean().reset_index()","bedeccb0":"layout= go.Layout(title='change of the sector over the course of pandemic')\nfig=go.Figure(layout=layout)\nfig.update_xaxes(showgrid=True,showline=True)\n\nPrek = edutech[edutech['Sector(s)']=='PreK-12']\nPrek_H_C = edutech[edutech['Sector(s)']=='PreK-12; Higher Ed; Corporate']\nPrek_H = edutech[edutech['Sector(s)']=='PreK-12; Higher Ed']\nCor = edutech[edutech['Sector(s)']=='Corporate']\nH_C = edutech[edutech['Sector(s)']=='Higher Ed; Corporate']\n\nfig.add_trace(go.Scatter(\n    x=Prek['time'],y=Prek['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Prek-12'))\nfig.add_trace(go.Scatter(\n    x=Prek_H_C['time'],y=Prek_H_C['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Prek12_HigherEd_Corporate'))\nfig.add_trace(go.Scatter(\n    x=Prek_H['time'],y=Prek_H['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Prek12_HigherEd'))\nfig.add_trace(go.Scatter(\n    x=Cor['time'],y=Cor['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Corporate'))\nfig.add_trace(go.Scatter(\n    x=H_C['time'],y=H_C['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='HigherEd_Corporate'))","8112b947":"PEF = eng_all.groupby(['P_E_main','time'])['engagement_index'].mean().reset_index()","6978431d":"layout= go.Layout(title='change of the Primary Essential Function over the course of pandemic')\nfig=go.Figure(layout=layout)\nfig.update_xaxes(showgrid=True,showline=True)\n\nLC = PEF[PEF['P_E_main']=='LC']\nCM = PEF[PEF['P_E_main']=='CM']\nSDO = PEF[PEF['P_E_main']=='SDO']\n\nfig.add_trace(go.Scatter(\n    x=LC['time'],y=LC['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Learning&Curriculum'))\nfig.add_trace(go.Scatter(\n    x=CM['time'],y=CM['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='Classroom Management'))\nfig.add_trace(go.Scatter(\n    x=SDO['time'],y=SDO['engagement_index'].rolling(window=7).mean(),\n    mode=\"lines\",line=go.scatter.Line(),name='School&District Operations'))\n","489f2f7b":"#### There is no conspicuous features with black\/hispanic.It can be seen that the difference between the high-density and low-density groups of black\/hispanic is not large.","82f7a4d3":"## \uc65c\uc548\ub418\ub294\uc9c0 \ubabb\ucc3e\uc74c.","9922627f":"### drop the row if row doesn't have 'state'","334f8ebc":"## EDA","67887f3f":"### district data","eab4997b":"## 'pct_free\/reduced' vs engagement","08b4e8e3":"## How does 'student engagement with online learning platforms' relate to Demographic context?","19750f4e":"### replace 'pct_free\/reduced','pct_black\/hispanic' value into mean","d71d1c06":"### Engagement","d6bf04ff":"## Load Data","961a2f45":"## Check Missing Values","b95ab336":"### Product","0c09cbc9":"## Merge Datasets","a9fd476a":"## Diff types of education tech change over the course of pandemic"}}