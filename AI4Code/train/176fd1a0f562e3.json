{"cell_type":{"39f68d37":"code","762effa3":"code","c9ae9c66":"code","75dd7acd":"code","162b1df3":"code","9ab915a9":"code","f7c256f1":"code","0b63967d":"code","6cc8620c":"code","08249ada":"code","36201773":"code","cd488e51":"code","f08dbc36":"code","5e6914ff":"code","f04f189d":"code","e1d67308":"code","441ffc34":"code","bad95206":"code","7bfafcad":"code","d6c524b1":"code","34c840ee":"code","991b338a":"code","0d463d39":"code","fe3378ca":"code","bd7aa07f":"code","0fdf3171":"code","df059330":"code","232efe45":"code","d0df9902":"code","ee7eba1a":"code","857f1d9a":"code","0901ed21":"code","376f7d26":"code","a6cb238d":"code","5828ee36":"code","1afff550":"code","343b45db":"code","36d63ae2":"code","eefa50c0":"code","d6192aaa":"code","bce30bad":"code","5c1b4eed":"code","89aaea62":"code","42381b3a":"code","5850374a":"markdown","ce9086ba":"markdown","55e5a02d":"markdown","749e66ab":"markdown","4d57e228":"markdown","4f8321f7":"markdown","7d6f31d8":"markdown","2759bba5":"markdown","cf1f1915":"markdown","e2bb6988":"markdown","f6f2e45d":"markdown","2b0b3e2c":"markdown","87098ac1":"markdown","e6ae938e":"markdown","ddb4b1c5":"markdown","7f7e3c3b":"markdown","ce3b5e5b":"markdown","8a8e9334":"markdown","78f580b4":"markdown","b3add568":"markdown","0e2c5409":"markdown","405f9754":"markdown","26a308b7":"markdown","111899c7":"markdown","046c16e3":"markdown","b8b05eef":"markdown","ee4766a3":"markdown","17ce2832":"markdown","96d6114f":"markdown","db4f1460":"markdown","80356850":"markdown","35060561":"markdown","eda4a2f5":"markdown","0f2c101f":"markdown","71388711":"markdown"},"source":{"39f68d37":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nsns.set_style(\"darkgrid\")\nimport warnings\nwarnings.filterwarnings('ignore')","762effa3":"data = pd.read_csv('\/kaggle\/input\/ibm-hr-analytics-attrition-dataset\/WA_Fn-UseC_-HR-Employee-Attrition.csv')\ndata = pd.DataFrame(data)\ndata.head()","c9ae9c66":"data.columns = [i.lower() for i in data.columns]","75dd7acd":"# dropping employeecount,over18,standardhours columns because these columns will not be \n# helpful in our analysis .\nprint(\"Features having only one value for all of it's index \\n\")\nfor i  in data.columns:\n    if(data[i].nunique()==1):\n        print(i)\nprint(\"\\n\")\ndata.drop(['employeecount','over18','standardhours',\"employeenumber\"],axis = 1,inplace = True)\ndata.columns","162b1df3":"data.head()","9ab915a9":"# let's rename columns for improved readablity .\n\ndata.rename(columns = {\n                       \"businesstravel\" :\"travel\",\n                        \"dailyrate\":\"daily_salary\",\n                        \"distancefromhome\":\"dist_from_home\",\n                        \"environmentsatisfaction\" : \"env_satisfaction\",\n                        \"monthlyrate\" : \"monthly_salary\" ,\n                        \"numcompaniesworked\":\"companies_worked\",\n                        \"percentsalaryhike\" : \"hike\",\n                        \"performancerating\" : \"performance\",\n                        \"relationshipsatisfaction\" : \"relationship_satisfaction\" ,\n                        \"totalworkingyears\" : \"experience\",\n                        \"yearsatcompany\" : \"years_in_company\" ,\n                        \"yearsincurrentrole\" : \"years_in_currentrole\",\n                       \"yearssincelastpromotion\" : \"last_promotion\" ,\n                        \"yearswithcurrmanager\" :\"years_with_current_manager \",\n                        \"trainingtimeslastyear\" :\"training\"                                   \n                      },inplace = True )","f7c256f1":"data.head(5)","0b63967d":"data.drop([\"daily_salary\",\"monthlyincome\"],inplace = True,axis = 1)","6cc8620c":"print(\"we don't have missing values in our dataset : \\n\")\ndata.isnull().sum()","08249ada":"catgorical_data = data.select_dtypes(exclude = \"number\")\nprint(\"catgorical columns of dataset : \")\ncatgorical_data.columns","36201773":"numerical_data = data.select_dtypes(include = \"number\")\nprint(\"numerical columns of dataset : \")\nnumerical_data.columns","cd488e51":"# target re-aranging \n# 1 - means person will leave company .\n# 0 - means person will not leave the company .\ndata.attrition =  data.attrition.map({\"Yes\":1,\"No\":0})","f08dbc36":"print(\"Target count : \\n\")\nprint(data['attrition'].value_counts())\nsns.countplot(data['attrition']).set_title(\"Target is not Balanced \")\nplt.show()","5e6914ff":"# For our analysis purpose we are  consider equal number of target labels . (although this is not recommended )\n\nturnover    = data[data[\"attrition\"]==1]  \nno_turnover = data[data[\"attrition\"]==0].sample(len(turnover)) \nprint(turnover.shape)\nprint(no_turnover.shape)","f04f189d":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(12, 4))\npd.crosstab(turnover[\"attrition\"],turnover[\"travel\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s travel ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"travel\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s travel ')\nplt.show()","e1d67308":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(12, 4))\npd.crosstab(turnover[\"attrition\"],turnover[\"department\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s department ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"department\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s department ')\nplt.show()","441ffc34":"lt_10kms = data['dist_from_home'][data['dist_from_home']<=10].count()\ngt_10kms = data['dist_from_home'][data['dist_from_home']>10].count()\nprint(\"Number of employee's whose distance from home to workplace less than or equal to 10kms : \",lt_10kms)\nprint(\"Number of employee's whose distance from home to workplace greater than 10kms   : \",gt_10kms)","bad95206":"sns.kdeplot(turnover['dist_from_home'],shade = False,color = \"r\",legend = False).set(xlim=(0))\nsns.kdeplot(no_turnover['dist_from_home'],shade = False,color = \"g\").set(xlim=(0))\nplt.legend(title='distance ', loc='upper right', labels=['turnover', 'no - turnover'])\nplt.title(\"work home distance \")\nplt.xlabel(\"work home distance in kms \")","7bfafcad":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(16, 5))\npd.crosstab(turnover[\"attrition\"],turnover[\"env_satisfaction\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s env_satisfaction ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"env_satisfaction\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s env_satisfaction ')\nplt.show()","d6c524b1":"plt.rcParams['figure.figsize'] = (6,6)\npx.pie(turnover,turnover[\"gender\"].value_counts().index,turnover[\"gender\"].value_counts(),hole = 0.6)","34c840ee":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(16, 5))\npd.crosstab(turnover[\"attrition\"],turnover[\"jobsatisfaction\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s jobsatisfaction ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"jobsatisfaction\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s jobsatisfaction ')\nplt.show()","991b338a":"turnover[\"job_interest\"] = turnover['jobinvolvement'] + turnover['jobsatisfaction']\nno_turnover[\"job_interest\"] = no_turnover['jobinvolvement'] + no_turnover['jobsatisfaction']","0d463d39":"# create one new feature \ndata[\"job_interest\"] = data['jobinvolvement'] + data['jobsatisfaction']\ndata.drop(['jobinvolvement','jobsatisfaction'],axis = 1,inplace = True)","fe3378ca":"plt.rcParams['figure.figsize'] = (10,6)\nsns.kdeplot(turnover['job_interest'],shade = True,color = \"r\",legend = False).set(xlim=(0))\nsns.kdeplot(no_turnover['job_interest'],shade = False,color = \"green\").set(xlim=(0))\nplt.legend(title='distance ',loc = 'best', labels=['turnover_job-interest', 'no - turnover_job-interest'])\nplt.title(\"overall job_interest \")\nplt.xlabel('jobsatisfaction + jobinvolvement')\nplt.ylabel('frequency')\nplt.show()","bd7aa07f":" data.drop(['stockoptionlevel','years_in_currentrole','years_with_current_manager ','last_promotion','hourlyrate','experience','training','years_in_company'],axis = 1,inplace = True)\ndata.columns","0fdf3171":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(18, 6))\npd.crosstab(turnover[\"attrition\"],turnover[\"relationship_satisfaction\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s relationship_satisfaction ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"relationship_satisfaction\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s relationship_satisfaction ')\nplt.show()","df059330":"turnover[\"life_work_satisfaction\"] = turnover['worklifebalance'] + turnover['relationship_satisfaction']\nno_turnover[\"life_work_satisfaction\"] = no_turnover['worklifebalance'] + no_turnover['relationship_satisfaction']","232efe45":"fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(18, 6))\npd.crosstab(turnover[\"attrition\"],turnover[\"life_work_satisfaction\"]).plot(kind = 'barh',ax = axes[0]).set_title('attrition v\/s life_work_satisfaction ')\npd.crosstab(no_turnover[\"attrition\"],no_turnover[\"life_work_satisfaction\"]).plot(kind = 'barh',ax = axes[1]).set_title('no - attrition v\/s life_work_satisfaction ')\nplt.show()","d0df9902":"data['life_work_satisfaction'] = data['worklifebalance'] + data['relationship_satisfaction']\ndata.drop(['worklifebalance','relationship_satisfaction'],axis = 1,inplace = True)","ee7eba1a":"plt.rcParams['figure.figsize'] = (6,6)\npx.pie(turnover,turnover[\"hike\"].value_counts().index,turnover[\"hike\"].value_counts(),hole = 0.6,title = 'hike v\/s attrition ')","857f1d9a":"plt.rcParams['figure.figsize'] = (10,6)\nsns.heatmap(data.corr(),annot = True)","0901ed21":"# drop either any one of the feature to avoid multicollinearity problem .\n# i am dropping performance blindly !\ndata.drop(['performance'],axis = 1,inplace = True)","376f7d26":"data.info()","a6cb238d":"attrition = data[data['attrition']==1]\nno_attrition = data[data['attrition']==0].sample(len(attrition))\nfinal = pd.concat([attrition,no_attrition],axis = 0)\nprint(\"attrition shape : \",attrition.shape)\nprint(\"no_attrition shape : \",no_attrition.shape)\nprint(\"final df  shape : \",final.shape)\n","5828ee36":"plt.rcParams['figure.figsize'] = (6,3)\nsns.countplot(final['attrition']).set_title(\"Target is Balanced\")","1afff550":"final.info()","343b45db":"final = pd.get_dummies(final,drop_first = True)\nfinal.shape","36d63ae2":"x = final.drop('attrition',axis = 1)\ny = final['attrition']","eefa50c0":"from sklearn.model_selection import train_test_split\nfrom sklearn.metrics import confusion_matrix,classification_report,log_loss\nxtrain,xtest,ytrain,ytest = train_test_split(x,y,test_size = 0.3,random_state = 33)","d6192aaa":"from sklearn.ensemble import RandomForestClassifier\n\nrf = RandomForestClassifier(n_estimators = 150,min_samples_split = 20,min_samples_leaf = 5,random_state = 33)\nrf.fit(xtrain,ytrain)","bce30bad":"ypred = rf.predict(xtest)","5c1b4eed":"print(\"classification - report \")\nprint(classification_report(ytest,ypred))","89aaea62":"print(\"confusion matrix  - report \")\nprint(confusion_matrix(ytest,ypred))","42381b3a":"print(\"cost function \")\nprint(log_loss(ytest,ypred))","5850374a":"# 2. 'attrition v\/s department' \n","ce9086ba":"* insight  :from the below pie chart we can conclude that most of the people who left the company is due to they are getting low hike .","55e5a02d":"* Most of the people who left the company are from the research and development department \n  and most of the people who are working in company are from the research and development department. \n  \n  By this we conclude that which ever the company this dataset belongs has vast employees \n  in R&D Department .","749e66ab":"# Checking for null values . ","4d57e228":"# 10. 'hike v\/s attrition '","4f8321f7":"# Thank You : )","7d6f31d8":"# Let's see weather our target is balanced or not . ","2759bba5":"## What caused employee to leave his or her workplace or company  ?\n\n * Being overworked ! \n * No worklife balance .\n * May be employee hates travelling frequently .\n * May be employee hates his\/her boss .\n * May be employee Dailywage is less for more work .\n * May be employee hates to work in the current Department .\n * May be Distance between home and workplace is more .\n * May be employee not getting promotion for his\/her work .\n * May be Salary is low .\n * May be his\/her Personal problem .\n * May be he\/she got better job with better pacakage .\n * May be employee's are not getting recognaized for his\/her work .\n * May be employee a frequently job changer (who never sticks with one company ).\n * May be Lack of Growth and Progression  .","cf1f1915":"# insights \n  * hike v\/s performance has strong correlation . \n  * joblevel v\/s age has moderate correlation .  ","e2bb6988":"* our data is highly imbalanced ,let's make it balanced before providing it to our model .\n * i'll use undersampling technique just for sake of model building ,\n   * in undersample we make decrease the majority class label up to count of minority class label .","f6f2e45d":"# Let's the correlation among the features ","2b0b3e2c":"* insight : from the below distribution curve ,we can conclude that employee with high job interest are less likely to turnover .","87098ac1":"Employee attrition is defined as the natural process by which employees leave the workforce . ","e6ae938e":"# What caused employee to Stay in his or her workplace or company ?\n\n * worklife balance .\n * work satisfaction .\n * employee loves to work in the current Department .\n * Distance between home and workplace is less .\n * employee  getting promotion for his\/her work .\n * Salary is good .\n * employees are  getting recognaized for his\/her work .\n * Growth and Progression  .","ddb4b1c5":"# 3.  \" Distance from home \"\ninsight : Most of the employee's , distance from home to workplace are in less than 10km . ","7f7e3c3b":"# okay let's think in General using our common sense !","ce3b5e5b":"* insight : employee with relationship satisfaction value are less likely to leave the company .","8a8e9334":"## What caused employee to leave his or her (workplace) company ?","78f580b4":"any kind of constructive suggestions are welcome ,Please upvote this kernel if you find it useful .","b3add568":"# 6. ' jobsatisfaction v\/s attrition '","0e2c5409":"# Random Forest Classifier .","405f9754":"# Data Preprocessing .","26a308b7":"# Model Building  . ","111899c7":"*  insight :  attrition percent is more for male compared to female. ","046c16e3":"# 7 . ' ( jobsatisfaction + jobinvolvement ) v\/s attrition '","b8b05eef":"* insight : env_satisfaction  feature play's an important role ,because the working environment should be good,if it is not employee's tend to leave thier company .\n\n          * from the below chart we conclude that employee with env_satistfcation  = 1\n          (being lowest) are the one who left the comapny most .\n            \n           # and again\n            \n          * from the below chart we conclude that employee with env_satistfcation  = 3 or 4\n          (being  highest) are the one who did not left the comapny  .\n            ","ee4766a3":"# Explantory Data Analysis . ","17ce2832":"# 8. 'relationship_satisfaction v\/s attrition'","96d6114f":"# 9 .  ' life_work_satisfaction v\/s attrition '","db4f1460":"# What is Employee attrition ?","80356850":"# 5. 'gender v\/s attrition'  ","35060561":"env_satisfaction : \n    1 - bieng lowest .\n    4 - being highest .","eda4a2f5":"### 1 .  'attrition v\/s travel '\n here what i found from the below chart is that \n   *  most of the people  who  leave the company are the one who travel Frequently compared to people       who don't   .\n","0f2c101f":"# 4 . \"attrition v\/s env_satisfaction \"","71388711":"* insight : jobsatisfaction  feature play's an important role ,\n    \n         # say for example if you are not satisified with the work you are doing ,then probably you feel demotivated towards in whatever the work your doing . \n\n          * from the below chart we conclude that employee with jobsatisfaction  = 1\n          (being lowest) are the one who left the comapny most .\n            \n           # and again\n            \n          * from the below chart we conclude that employee with env_satistfcation  = 3 or 4\n          (being  highest) are the one who did not left the comapny  .\n            "}}