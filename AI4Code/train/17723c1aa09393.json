{"cell_type":{"9cea0f19":"code","9e96c096":"code","7c92804b":"code","f5a2956c":"code","61baa34b":"code","d1b7003b":"code","1b53ca51":"code","9e5223d0":"code","f72b643f":"code","9508c57d":"code","58634faa":"code","96901e85":"code","585c9ea6":"code","97a5c00a":"code","4fca9f05":"code","36cd12f7":"code","1811eaac":"code","5bbe5da0":"code","9e254fdf":"code","07c704d4":"code","3f4e8ae1":"code","342e4558":"code","4c2c8a71":"code","a76b3484":"code","6ba1d8bc":"code","c761f258":"code","13fcd7cf":"code","1993c573":"code","bb3f1283":"code","c83ccb4e":"code","6ff995db":"code","0a0c5537":"code","66a5ac79":"code","9b91950d":"code","667e9cf8":"code","cf4c784f":"code","4798dc1c":"code","2b68f5ba":"code","de0bd8f1":"code","6f7a4cb8":"code","0692698e":"code","10b5a656":"code","33616b62":"code","7e44cd3e":"code","7b756b37":"code","5c448e12":"code","a8c375c6":"code","38af3f49":"code","4d978f5f":"code","6ecc134a":"code","de50da70":"code","cb85c06e":"code","234accda":"code","a86a3097":"code","0dfb0616":"markdown","fadcbeb3":"markdown","7a7deb30":"markdown","f5a979ca":"markdown","27649902":"markdown","09f8602b":"markdown","cdaa0133":"markdown","5011fa3f":"markdown","ee82e2b0":"markdown","83f84d34":"markdown","7f6cca31":"markdown","36d372c5":"markdown","c3da59a3":"markdown","6e44bd28":"markdown","a339f238":"markdown","643cef9e":"markdown","c6ad72b3":"markdown","2f6d29ea":"markdown","1e14ca39":"markdown","1b8e89b2":"markdown","fd217dc8":"markdown","ea46771a":"markdown","f229c2eb":"markdown","ad90cad2":"markdown","8108e390":"markdown","afdad6a5":"markdown","ff6c2ec3":"markdown","3ff4ec58":"markdown","e5200ae1":"markdown","6446548f":"markdown","dd521953":"markdown","81666a01":"markdown","b522cecb":"markdown","ca73e02c":"markdown","8a1e681c":"markdown","03e8adfe":"markdown","1b955c5b":"markdown","9b32cb96":"markdown"},"source":{"9cea0f19":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","9e96c096":"import pandas as pd\nimport numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom sklearn.model_selection import train_test_split\n\nfrom sklearn.tree import DecisionTreeClassifier\n\nfrom sklearn.metrics import classification_report, confusion_matrix","7c92804b":"df=pd.read_csv('..\/input\/covid19-patient-precondition-dataset\/covid.csv')","f5a2956c":"df.head()","61baa34b":"df.describe()","d1b7003b":"df.shape","1b53ca51":"df.isnull().sum()","9e5223d0":"df.drop(columns={'entry_date','date_died','date_symptoms','id'},axis=1,inplace=True)\ndf.shape","f72b643f":"\ndf[\"sex\"].value_counts().plot.bar()","9508c57d":"df['covid_res'].value_counts().to_frame()","58634faa":"df['covid_res'].replace([1,2,3],[1,0,2],inplace=True)\ndf['covid_res'].value_counts().to_frame()","96901e85":"df['covid_res'].value_counts().sort_index().plot.bar()\nplt.title('Covid Result')","585c9ea6":"df.rename(columns={'covid_res':'Chance'},inplace=True)\ndf.head()","97a5c00a":"df=df[df['Chance']!=2]","4fca9f05":"df['Chance'].value_counts().sort_index().plot.bar()\nplt.title('Chance')","36cd12f7":"lst=df.columns\nfor i in range(19):\n    print(df[lst[i]].value_counts().to_frame())\n    print(\"----------------\")","1811eaac":"df=df[df['intubed']!=97]\ndf['intubed'].value_counts().sort_index().plot.bar()\nplt.title('Intubed')","5bbe5da0":"df=df[df['intubed']!=99]\ndf['intubed'].value_counts().to_frame()","9e254fdf":"df=df[df['pneumonia']!=99]\ndf['pneumonia'].value_counts().sort_index().plot.bar()\nplt.title('pneumonia')\n","07c704d4":"df=df[df['pregnancy']!=97]\ndf=df[df['pregnancy']!=98]\ndf['pregnancy'].value_counts().sort_index().plot.bar()\nplt.title('Pregnancy')","3f4e8ae1":"df=df[df['diabetes']!=98]\ndf['diabetes'].value_counts().sort_index().plot.bar()\nplt.title('Diabetes')","342e4558":"df=df[df['copd']!=98]\ndf['copd'].value_counts().sort_index().plot.bar()\nplt.title('COPD')","4c2c8a71":"df=df[df['asthma']!=98]\ndf['asthma'].value_counts().sort_index().plot.bar()\nplt.title('Asthma')","a76b3484":"df=df[df['inmsupr']!=98]\ndf['inmsupr'].value_counts().sort_index().plot.bar()\nplt.title('Inmsupr')","6ba1d8bc":"df=df[df['hypertension']!=98]\ndf['hypertension'].value_counts().sort_index().plot.bar()\nplt.title('Hypertension')","c761f258":"df=df[df['other_disease']!=98]\ndf['other_disease'].value_counts().sort_index().plot.bar()\nplt.title('Other Disease')","13fcd7cf":"df=df[df['cardiovascular']!=98]\ndf['cardiovascular'].value_counts().sort_index().plot.bar()\nplt.title('Cardiovascular')","1993c573":"df=df[df['obesity']!=98]\ndf['obesity'].value_counts().sort_index().plot.bar()\nplt.title('Obesity')","bb3f1283":"df=df[df['renal_chronic']!=98]\ndf['renal_chronic'].value_counts().sort_index().plot.bar()\nplt.title('Renal Chronic')","c83ccb4e":"df=df[df['tobacco']!=98]\nprint(df['tobacco'].value_counts())\ndf['tobacco'].value_counts().sort_index().plot.bar()\nplt.title('Tobacco')","6ff995db":"df=df[df['contact_other_covid']!=99]\ndf['contact_other_covid'].value_counts().sort_index().plot.bar()\nplt.title('Contact other covid')","0a0c5537":"df=df[df['icu']!=99]\ndf=df[df['icu']!=97]\n\ndf['icu'].value_counts().sort_index().plot.bar()\nplt.title('ICU')","66a5ac79":"df.reset_index(drop=True,inplace=True)\ndf.head(10)","9b91950d":"plt.figure(figsize=(15,15))\nsns.heatmap(df.corr(),cmap='viridis')\nplt.title('Correlation heatmap',size=25)","667e9cf8":"plt.figure(figsize=(7,5))\nsns.catplot('intubed',data=df,kind='count',palette='autumn_d',hue='Chance')\nplt.xticks(size=15,)\nplt.xlabel('Intubation \\n \\n Yes:{}  No:{}'.format(df['intubed'].value_counts()[1] , df['intubed'].value_counts()[2]),size=15)\nplt.ylabel('Count',size=15)","cf4c784f":"features=['sex', 'patient_type', 'intubed', 'pneumonia', 'age', 'pregnancy',\n       'diabetes', 'copd', 'asthma', 'inmsupr', 'hypertension',\n       'other_disease', 'cardiovascular', 'obesity', 'renal_chronic',\n       'tobacco', 'contact_other_covid', 'icu']\nlist(enumerate(features))","4798dc1c":"plt.figure(figsize=(15,15))\nfor i in enumerate(features):\n    plt.subplot(6,3,i[0]+1)\n    sns.countplot(i[1],hue='Chance',data=df)\n    plt.xticks(rotation=45,size=8)\n    plt.tight_layout()               \n                  ","2b68f5ba":"train=df[['sex', 'patient_type', 'intubed', 'pneumonia', 'age', 'pregnancy',\n       'diabetes', 'copd', 'asthma', 'inmsupr', 'hypertension',\n       'other_disease', 'cardiovascular', 'obesity', 'renal_chronic',\n       'tobacco', 'contact_other_covid', 'icu']]","de0bd8f1":"test=df['Chance']\ntrain=train.values\ntest=np.array(test)","6f7a4cb8":"x_train,x_test,y_train,y_test=train_test_split(train,test,test_size=0.2,random_state=42,stratify=test)\nprint(\"Size of X_train is:{}\\nSize of Y_train is:{}\\nSize of X_test is:{}\\nSize of Y_test is:{}\\n\".format(x_train.shape,\n                                      y_train.shape,\n                                      x_test.shape,\n                                      y_test.shape\n                                      ))","0692698e":"acc=[]","10b5a656":"from sklearn.neighbors import KNeighborsClassifier\nfrom sklearn import metrics\n\nfor i in range(1,25):\n    \n    neigh=KNeighborsClassifier(n_neighbors = i).fit(x_train,y_train)\n    yhat = neigh.predict(x_test)\n    KNN_score=metrics.accuracy_score(y_test, yhat)\n    print(\"Train set Accuracy at {} is {}  \".format(i,metrics.accuracy_score(y_train, neigh.predict(x_train))))\n    print(\"Test set Accuracy at {} is {}\".format(i,KNN_score))\n    print(\"\\n\")","33616b62":"acc.append(0.6290)","7e44cd3e":"for i in range(1,25):\n    drugTree = DecisionTreeClassifier(criterion=\"entropy\", max_depth = i)\n    drugTree.fit(x_train,y_train)\n    predTree = drugTree.predict(x_test)\n    decisionTree_score=metrics.accuracy_score(y_test, predTree)\n    print(\"DecisionTrees's Accuracy at {} is {}\\n\".format(i,metrics.accuracy_score(y_test, predTree)))","7b756b37":"acc.append(0.6401)","5c448e12":"from sklearn.linear_model import LogisticRegression\nLR=LogisticRegression(C=0.03, solver='liblinear')\nLR.fit(x_train,y_train)\nyhat = LR.predict(x_test)\nyhat_prob = LR.predict_proba(x_test)\nlogReg_score=metrics.accuracy_score(y_test, yhat)\nprint(\"LogisticRegression's Accuracy:{0}\".format(metrics.accuracy_score(y_test, yhat)))","a8c375c6":"acc.append(logReg_score)","38af3f49":"from sklearn import svm\nclf = svm.SVC(kernel='rbf')\nclf.fit(x_train, y_train) \nyhat = clf.predict(x_test)\nsvm_score=metrics.accuracy_score(y_test, yhat)\nprint(\"SVM's Accuracy:{0}\".format(metrics.accuracy_score(y_test, yhat)))","4d978f5f":"acc.append(svm_score)","6ecc134a":"from sklearn.ensemble import RandomForestClassifier\nRandom_forest = RandomForestClassifier(n_estimators=50)\nRandom_forest.fit(x_train,y_train)\nrandomForest_predict = Random_forest.predict(x_test)\nrandomForest_score = metrics.accuracy_score(y_test, randomForest_predict)\nprint(\"Random Forest Score :\",randomForest_score)","de50da70":"acc.append(randomForest_score)","cb85c06e":"from sklearn.ensemble import GradientBoostingClassifier\n\ngbk = GradientBoostingClassifier(random_state=100, n_estimators=150,min_samples_split=100, max_depth=6)\ngbk.fit(x_train, y_train)\ngbk_predict = gbk.predict(x_test)\ngbk_score = gbk.score(x_test,y_test)\n#print(\"Gradient Boosting Prediction :\",gbk_predict)\nprint(\"Gradient Boosting Score :\",gbk_score)","234accda":"acc.append(gbk_score)\nalgo_name=['KNN','Decision Tree','Logistic Regression','SVM','Random Forest','Gradient Boosting']\nacc=np.array(acc)","a86a3097":"from numpy import median\nplt.figure(figsize=(10,8))\nsns.barplot(y=acc*100,x=algo_name,estimator=median,palette=\"Blues_d\")\nplt.xlabel('Accuracy',size=30)\nplt.xticks(rotation=45)\nplt.ylabel('Algorithm Name',size=30)","0dfb0616":"# Please Upvote if you found my notebook helpful!!\n\n","fadcbeb3":"**OTHER_DISEASE**","7a7deb30":"**As we have removed unwanted rows, now we'll reset index**","f5a979ca":"****TEST RESULT****<br>\n<ol>\n    <li>positive<\/li>\n    <li>negative<\/li>\n    <li>awaitinga<\/li>\n<\/ol>\n\nNow here,we are replacing 1 with 1,2 with 0 and 3 with 2","27649902":"**ICU**","09f8602b":"**C.O.P.D.**","cdaa0133":"**Inmsupr**","5011fa3f":"**Note:** we are getting max test accuracy at max_depth=4 i.e., 64%.","ee82e2b0":"   # Are you in danger of being affected by Corona Virus?\n\n![](https:\/\/api.time.com\/wp-content\/uploads\/2020\/04\/CoronavirusFAQOpener.jpg?quality=85&w=1024&h=512&crop=1)\n<br>\n## What is Covid-19 Virus?\nCoronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.\n<br>\nMost people infected with the COVID-19 virus will experience mild to moderate respiratory illness and recover without requiring special treatment.  Older people, and those with underlying medical problems like cardiovascular disease, diabetes, chronic respiratory disease, and cancer are more likely to develop serious illness.\n<br>\n![](https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn%3AANd9GcT52W_CHOK4IlkWHeqoKGRQExWxMKD4fEPmeg&usqp=CAU)\n<br>\nThe best way to prevent and slow down transmission is to be well informed about the COVID-19 virus, the disease it causes and how it spreads. Protect yourself and others from infection by washing your hands or using an alcohol based rub frequently and not touching your face. \n<br><br>\nThe COVID-19 virusspreads primarily through droplets of saliva or discharge from the nose when an infected person coughs or sneezes, so it\u2019s important that you also practice respiratory etiquette (for example, by coughing into a flexed elbow).\n\n","83f84d34":"## Note:\nThe data obtained is from the Mexican government and hence, the analysis is valid for Mexico or maybe North America. The pandemic stats and behaviours are extremely different for Asian countries when compared to North American or European countries owing to far lower case fatality rate for Asia.\n\n## Data Dictionary:\n<ol>\n    <li>id: The identification number of the patient<\/li>.\n    <li>sex: Identify gender of the patient, 1 as female and 2 as male.<\/li>\n    <li>patient_type: Type of patient, 1 for not hospitalized and 2 for hosptalized.<\/li>\n    <li>entry_date: The date that the patient went to the hospital.<\/li>\n    <li>date_symptoms: The date that the patient started to show symptoms.<\/li>\n    <li>date_died: The date that the patient died, \u201c9999-99-99\u201d stands for recovered.<\/li>\n    <li>intubed: Intubation is a procedure that\u2019s used when you can\u2019t breathe on your own. Your doctor puts a tube down your throat and into your windpipe to make it easier to get air into and out of your lungs. A machine called a ventilator pumps in air with extra oxygen. Then it helps you breathe out air that\u2019s full of carbon dioxide (CO2). \u201c1\u201d denotes that the patient used ventilator and \u201c2\u201d denotes that the patient did not, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>pneumonia: Indicates whether the patient already have air sacs inflammation or not \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>age: Specifies the age of the patient.<\/li>\n    <li>pregnancy: Indicates whether the patient is pregnant or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>diabetes: Indicates whether the patient has diabetes or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>copd: Indicates whether the patient has Chronic obstructive pulmonary disease (COPD) or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>asthma: Indiactes whether the patient has asthma or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>inmsupr: Indicates whether the patient is immunosuppressed or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>hypertension: Indicates whether the patient has hypertension or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>other_disease: Indicates whether the patient has other disease or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>cardiovascular: Indicates whether if the patient has heart or blood vessels realted disease, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>obesity: Indicates whether the patient is obese or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>renal_chronic: Indicates whether the patient has chronic renal disease or not, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>tobacco: Indicates whether if the patient is a tobacco user, \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>contact_other_covid: Indicates whether if the patient has contacted another covid19 patient.<\/li>\n    <li>icu: Indicates whether the if the patient had been admitted to an Intensive Care Unit (ICU), \u201c1\u201d for yes, \u201c2\u201d for no, \u201c97\u201d \u201c98\u201d \u201c99\u201d means not specified.<\/li>\n    <li>covid_res: 1 indicates person is covid +ve,2 indicates person is covide -ve,3 indicates result is in awaiting process<\/li>  \n<\/ol>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","7f6cca31":"**SVM**","36d372c5":"**Random Forest Classifier**","c3da59a3":"**Obesity**","6e44bd28":"**Hypertension**","a339f238":"**KNN**","643cef9e":"**Gradient Boosting**","c6ad72b3":"**Data Visualization**","2f6d29ea":"**INTUBED**","1e14ca39":"**Cardiovascular**","1b8e89b2":"**Splitting the data into train and test**","fd217dc8":"**Logistic Regression**","ea46771a":"**Renal Chronic**","f229c2eb":"**From different algo used, it is pretty clear that nearly 64% prediction is accurate for being known whether you are in danger or not from being affected by covid-19.**","ad90cad2":"## Conclusion","8108e390":"<ol>\n    <li>0-negative<\/li>\n    <li>1-positive<\/li>\n    <li>2-awaiting<\/li>\n<\/ol>","afdad6a5":"**Pregnancy**","ff6c2ec3":"**Contact with Covid Person**","3ff4ec58":"**Diabetes**","e5200ae1":"**PNEUMONIA**","6446548f":"**Tobacco**","dd521953":"**Decision Tree**","81666a01":"# Training the model using different algorithms","b522cecb":"**Splitting further into 8:2 ratio**","ca73e02c":"**Note:** at n_neighbours=11 we are getting max train and test accuracy i.e, 64% and 62% respectively.","8a1e681c":"## Say NO to Corona !\n## Stay Safe.\n\n**THANK YOU!**\n","03e8adfe":"**Since we are focusing on giving the chances of being affected by corona,so our main focus will be on either chance is positive or negative, hence we'll neglect awaiting chances..<br>\nNow here i am dropping all those rows which contains chance is  awaiting i.e.2 value**","1b955c5b":"**ASTHMA**","9b32cb96":"# NOTE:- \nAs we are focusing on prediction of chances of being affected by corona virus,so here I'm dropping all those values which indicates NaN values<br>\nAll those values except 1 and 2 are NaN "}}