{"cell_type":{"5e3a42cf":"code","abdbec73":"code","c9cfec42":"code","16cb6e25":"code","29633928":"code","c9572f43":"code","76460a60":"code","69f2f951":"code","be48d787":"code","af5d8762":"code","21525054":"code","da33f202":"code","381b8f98":"code","583eb3ea":"code","7e9c9413":"code","a5e5f7e9":"code","4b4def24":"code","a63f467b":"code","65f82231":"code","4bf616b1":"code","8cd3aeb5":"code","ee95932c":"code","6d484ba1":"code","0dd49a4b":"code","81650dea":"code","2a6c7157":"code","1ecba153":"code","22db83a4":"code","68aa4f04":"code","471af14a":"code","a41041e4":"code","e0fd55f7":"code","1e33bf59":"code","6a4ec9cf":"code","c344c243":"markdown","8e745fb1":"markdown","62767c37":"markdown","874fe126":"markdown","92d8882b":"markdown","7ed85e30":"markdown"},"source":{"5e3a42cf":"from matplotlib import pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport sys, os, csv","abdbec73":"pd.set_option(\"display.max_columns\", 500)\ndataset = pd.read_csv(\"..\/input\/crimes-in-boston\/crime.csv\", encoding='latin-1')\ndataset.shape","c9cfec42":"dataset.info()","16cb6e25":"dataset.head()","29633928":"dataset.columns","c9572f43":"# Rename columns\nrename = {\n    'INCIDENT_NUMBER': 'incident_num',\n    'OFFENSE_CODE':'code',\n    'OFFENSE_CODE_GROUP':'code_group',\n    'OFFENSE_DESCRIPTION':'description',\n    'DISTRICT':'district',\n    'REPORTING_AREA':'area',\n    'SHOOTING':'shooting',\n    'OCCURRED_ON_DATE':'date',\n    'YEAR':'year',\n    'MONTH':'month',\n    'DAY_OF_WEEK':'day',\n    'HOUR':'hour',\n    'UCR_PART':'ucr_part',\n    'STREET':'street',\n    'Lat':'lat',\n    'Long':'long',\n    'Location':'location',\n}\n\ndataset.rename(columns=rename, inplace=True)","76460a60":"dataset['code_group'].value_counts()","69f2f951":"dataset['ucr_part'].value_counts()","be48d787":"dataset['year'].value_counts()","af5d8762":"dataset['shooting'].isnull().sum()","21525054":"shooting = dataset['shooting'].copy()\nshooting.fillna('N', inplace=True)\ndataset['shooting'] = shooting\n\ndataset['shooting'].head()","da33f202":"ucr_part = dataset['ucr_part'].copy()\nucr_part.replace(to_replace='Other', value='Part Four', inplace=True)\ndataset['ucr_part'] = ucr_part","381b8f98":"dataset['ucr_part'].value_counts()","583eb3ea":"dataset['ucr_part'].isnull().sum()","7e9c9413":"dataset[dataset['ucr_part'].isnull()]['code_group'].value_counts()","a5e5f7e9":"code_group = dataset['code_group'].copy()\ncode_group.replace(to_replace=\"INVESTIGATE PERSON\", value=\"Investigate Person\", inplace=True)\ndataset['code_group'] = code_group","4b4def24":"dataset.loc[(dataset['code_group'] == 'Investigate Person') & (dataset['ucr_part'].isnull()), 'ucr_part']= \"Part Three\"","a63f467b":"dataset['ucr_part'].isnull().sum()","65f82231":"dataset.dropna(subset=['ucr_part'], inplace=True)","4bf616b1":"dataset['code_group'].value_counts().head()","8cd3aeb5":"order = dataset['code_group'].value_counts().head().index\norder","ee95932c":"plt.figure(figsize=(12,8))\nsns.countplot(data=dataset, x='code_group', hue='district', order=order)","6d484ba1":"data2017 = dataset[dataset['year']==2017].groupby(['month','district']).count()\ndata2017.head()","0dd49a4b":"plt.figure(figsize=(12,12))\nsns.lineplot(data=data2017.reset_index(), x='month', y='code', hue='district')","81650dea":"day_num_name = {'Monday':'1','Tuesday':'2','Wednesday':'3','Thursday':'4','Friday':'5','Saturday':'6','Sunday':'7',}\ndataset['day_num'] = dataset['day'].map(day_num_name)","2a6c7157":"data_day_hour = dataset[dataset['year']==2017].groupby(['day_num','hour']).count()['code'].unstack()\nplt.figure(figsize=(8,8))\nsns.heatmap(data=data_day_hour, cmap='viridis', yticklabels=['Monday','Tuesday','Wednesday','Thursday','Friday','S'])","1ecba153":"df_day_hour_part1 = dataset[(dataset['year'] == 2017) & (dataset['code_group'] == 'Larceny')].groupby(['day_num','hour']).count()['code'].unstack()\nplt.figure(figsize=(10,10))\nsns.heatmap(data = df_day_hour_part1, cmap='viridis', yticklabels=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'])","22db83a4":"dfpart1 = dataset[(dataset['year'] == 2017) & (dataset['ucr_part'] == 'Part One')].groupby(['code_group','shooting']).count().reset_index().sort_values('code',ascending=False)\ndfpart2 = dataset[(dataset['year'] == 2017) & (dataset['ucr_part'] == 'Part One') & (dataset['shooting'] == 'Y')].groupby(['code_group','shooting']).count().reset_index().sort_values('code',ascending=False)","68aa4f04":"order1 = dataset[dataset['ucr_part'] == 'Part One']['code_group'].value_counts().head()\norder1","471af14a":"order1 = dataset[dataset['ucr_part'] == 'Part One']['code_group'].value_counts().head(5).index\nplt.figure(figsize=(12,8))\nsns.countplot(data = dataset, x='code_group',hue='district', order = order1)","a41041e4":"order2 = dataset[dataset['ucr_part'] == 'Part Two']['code_group'].value_counts().head()\norder2","e0fd55f7":"order2 = dataset[dataset['ucr_part'] == 'Part Two']['code_group'].value_counts().head(5).index\nplt.figure(figsize=(12,8))\nsns.countplot(data = dataset, x='code_group',hue='district', order = order2)","1e33bf59":"order3 = dataset[dataset['ucr_part'] == 'Part Three']['code_group'].value_counts().head().index\nplt.figure(figsize=(12,8))\nsns.countplot(data = dataset, x='code_group',hue='district', order = order3)\n","6a4ec9cf":"plt.figure(figsize=(16,8))\nplt.tight_layout()\nsns.set_color_codes(\"pastel\")\nax = sns.barplot(y=\"code\", x=\"code_group\", data=dfpart1, hue='shooting')\n\nax.set_xticklabels(ax.get_xticklabels(), rotation=40, ha=\"right\")","c344c243":"### some observation\n* District B2 has worst driver with most accident\n* District D4 has the worst theft","8e745fb1":"* As we can see, theft usually happens in the middle of the day when people are working.\n* The middle of the week seems to hold the highest peak.","62767c37":"#### What types of crimes are most common?\n* Most common incident - Motor Vehicle Response\n* Most common crimes - Larceny and Larceny from Motor Vehicle\n\n#### Where are different types of crimes most likely to occur? \n* UCR 1 (worst crimes) happen mostly in D4","874fe126":"* From `1am-7am` is the lowest incident rate and `4pm-6pm` is the highest.\n* From `3am - 7pm` is the lowest incident rate and doesn't have the same sharp peak at `5pm` like the weekdays.\n* Overall it looks like incidents are more prevalent during the week than during the weekend. ","92d8882b":"### About The Dataset\nCrime incident reports are provided by Boston Police Department (BPD) to document the initial details surrounding an incident to which BPD officers respond. This is a dataset containing records from the new crime incident report system, which includes a reduced set of fields focused on capturing the type of incident as well as when and where it occurred.\n\n### Tasks\n\n* What types of crimes are most common?\n* Where are different types of crimes most likely to occur?\n* Does the frequency of crimes change over the day? Week? Year?\n","7ed85e30":"### Data Cleaning"}}