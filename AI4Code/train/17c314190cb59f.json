{"cell_type":{"dc1b9691":"code","0900613a":"code","6c09ea75":"code","a358fcb9":"code","b6add11b":"code","09c29e7a":"code","cd188839":"code","1c1e9244":"code","2fa45b63":"code","112bc3f7":"code","ce9091d3":"code","e8f69577":"code","1eab4bbe":"code","34cceac3":"code","e8ec1d18":"code","50f13e57":"code","4ea93e21":"code","8f93d367":"code","d9b2838d":"code","9fb91b27":"code","bebad333":"code","4c2e0a26":"code","c73ec8fd":"code","25402e37":"code","573fcc1c":"code","08c0f9f0":"code","10ad5361":"code","fc2004e6":"code","4871711d":"code","e959857a":"code","d74d8587":"code","cb2adabc":"code","23162fca":"code","83d3aafc":"code","51067a16":"code","07176f3a":"markdown","e73e93e0":"markdown","98695430":"markdown","07abaddf":"markdown","638f8f9c":"markdown","9943ff4f":"markdown","7d4178d6":"markdown","47a83721":"markdown","1cf368b6":"markdown","cef28b2b":"markdown","0b5411f1":"markdown","e0f95b7e":"markdown","ce29b64e":"markdown","da1ca9cc":"markdown","69023094":"markdown","1c13be68":"markdown"},"source":{"dc1b9691":"!unzip -oq ..\/input\/predict-west-nile-virus\/spray.csv.zip\n!unzip -oq ..\/input\/predict-west-nile-virus\/train.csv.zip\n!unzip -oq ..\/input\/predict-west-nile-virus\/weather.csv.zip","0900613a":"import os\nimport plotly.express as px\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\n\nMAPBOX_TOKEN = ''","6c09ea75":"for files in os.listdir():\n    print(files) if files.endswith('csv') else None","a358fcb9":"train = pd.read_csv('train.csv')\nspray = pd.read_csv('spray.csv')\nweather = pd.read_csv('weather.csv')","b6add11b":"train.columns","09c29e7a":"train.describe()","cd188839":"train.WnvPresent.value_counts()","1c1e9244":"# If maps are not being displayed, please re-run the cell","2fa45b63":"px.set_mapbox_access_token(MAPBOX_TOKEN)\nfig = px.scatter_mapbox(train, lat = 'Latitude', lon  = 'Longitude',\n                        size_max=15, zoom = 10)\n\nfig.update_layout(title = 'Traps',\n    autosize=False,\n    width=500,\n    height=700,)\n\nfig.show()","112bc3f7":"spray.describe()","ce9091d3":"px.set_mapbox_access_token(MAPBOX_TOKEN)\n\nfig = px.scatter_mapbox(spray, lat = 'Latitude', lon  = 'Longitude',\n                     animation_frame=\"Date\",\n                        size_max=15, zoom = 9)\n\nfig.update_layout(\n    title=\"Spray day-wise\",\n        width=500,\n    height=700,\n)\n\nfig.show()","e8f69577":"mosquito_count = train.groupby(['Address'], as_index = False)[['NumMosquitos']].sum()","1eab4bbe":"areas = train.groupby(['Address'], as_index = False)[['Latitude','Longitude']].median()","34cceac3":"wnv = train.groupby(['Address'], as_index = False)[['WnvPresent']].sum() \n# sum() because it has either 0 or 1 values. adding ones will give us total cases in an area.","e8ec1d18":"mosquito_areas_wnv = pd.concat([mosquito_count,areas, wnv], axis = 1)","50f13e57":"mosquito_areas_wnv.drop('Address', axis = 1, inplace = True)","4ea93e21":"fig = px.scatter_mapbox(mosquito_areas_wnv, lat = 'Latitude', lon  = 'Longitude', color = 'WnvPresent',\n                        size = 'NumMosquitos', color_continuous_scale=px.colors.cyclical.IceFire,\n                        hover_data = ['NumMosquitos', 'WnvPresent'],\n                       zoom = 9)\nfig.show()\n","8f93d367":"fig = px.scatter_mapbox(spray, lat = 'Latitude', lon  = 'Longitude',#animation_frame = 'Date',\n                        size_max=15, zoom = 9,color_discrete_sequence=[\"palegoldenrod\"],  opacity = 0.5)\n\nfig2 = px.scatter_mapbox(mosquito_areas_wnv, lat = 'Latitude', lon  = 'Longitude', color = 'WnvPresent',\n                        size = 'NumMosquitos', color_continuous_scale=px.colors.cyclical.IceFire,\n                        hover_data = ['NumMosquitos', 'WnvPresent'],\n                       zoom = 9)\n\nfig.add_trace(fig2.data[0],)\n\nfig.update_layout( title = 'Spray - West Nile Virus and Mosquito clusters',\n                width=500,\n    height=700,\n)","d9b2838d":"fig2 = px.scatter_mapbox(mosquito_areas_wnv, lat = 'Latitude', lon  = 'Longitude', color = 'WnvPresent',\n                        size = 'NumMosquitos', color_continuous_scale=px.colors.cyclical.IceFire,\n                        hover_data = ['NumMosquitos', 'WnvPresent'],\n                       zoom = 9)\n\nfig3 = px.scatter_mapbox(train, lat = 'Latitude', lon  = 'Longitude',\n                        size_max=15, zoom = 10, color_discrete_sequence = ['lemonchiffon'])\n\n#below is one way to plot multiple graphs on the same plot. \n#print figure object as is to see the elements inside\nfig2.add_trace(fig3.data[0]) \n\nfig2.update_layout(mapbox_style='dark')\n\nfig2.update_layout( title = 'Traps - West Nile Virus and Mosquito clusters',\n                width=500,\n    height=700,)\n","9fb91b27":"species_vs_virus = train[['Species', 'WnvPresent']].groupby('Species', as_index = False).sum()","bebad333":"species_vs_virus","4c2e0a26":"fig = px.bar(species_vs_virus, x = 'Species', y = 'WnvPresent')\nfig.update_layout(\n    title=\"West Nile Virus count vs Species\",\n    xaxis_title=\"Species\",\n    yaxis_title=\"West Nile Virus Present\",)\nfig.show()\n","c73ec8fd":"weather.head()","25402e37":"weather['Tavg'].unique()","573fcc1c":"weather[weather['Tavg']=='M']\n# Only 11 rows, so drop these for now.","08c0f9f0":"weather.drop(weather[weather['Tavg']=='M'].index, axis = 0, inplace = True)","10ad5361":"weather.reset_index(drop = True)","fc2004e6":"weather.columns","4871711d":"weather['Tavg'] = weather['Tavg'].astype(int) ","e959857a":"weather_imp = weather.groupby(['Date'], as_index = False)[['Tavg']].mean()","d74d8587":"weather_imp","cb2adabc":"mosquitos_date_wise = train.groupby(['Date'], as_index = False)[['NumMosquitos']].sum()\nwnv_date_wise = train.groupby(['Date'], as_index = False)[['WnvPresent']].sum()","23162fca":"wnv_mosquitos_dw = pd.merge(mosquitos_date_wise,wnv_date_wise, on = 'Date')\nweather_df = pd.merge(wnv_mosquitos_dw, weather_imp)","83d3aafc":"weather_df","51067a16":"fig = px.scatter(weather_df, x=\"Tavg\", y=\"NumMosquitos\",\n                 size='WnvPresent')\n\nfig.update_layout(\n    title=\"Mosquitos vs Average temperature\",\n    xaxis_title=\"Average Temperature in Fahrenheit\",\n    yaxis_title=\"Number of Mosquitos\",)\nfig.show()","07176f3a":"Mosquitos and West Nile Virus are less prevalent on colder days. Looks like higher temperature suits them. Similar analysis can be done on heat, precipitation etc.","e73e93e0":"But traps were setup, in all places with West Nile Virus. \nEspecially in the big clusters.\nCant say conclusively if Traps are helping.","98695430":"# Plotting the satellite traps on the map","07abaddf":"**Conclusions:** <br><\/br>\nSpraying needs to be done effectively. Not spraying in correct areas caused more West Nile Virus cases <br><\/br>\nThe disease and mosquitos thrive on Hotter days<br><\/br>\nCULEX PIPIENS\/RESTUANS Species of mosquito is the cause for most cases.","638f8f9c":"# Analyzing effectiveness of spray","9943ff4f":"This notebook is an attempt at basic EDA and plotting maps. We were asked to do a causal analysis on this dataset as an assignment. \nLooking at the data, I did not know what interesting plots I could come up with until I saw lattitude and longitude columns","7d4178d6":"# Introduction","47a83721":"# Plotting number of Mosquitos and areas where West Nile Virus is present","1cf368b6":"# Analyzing species","cef28b2b":"# Analyzing impact of weather on mosquitos and disease","0b5411f1":"# Areas where mosquito repellant was sprayed","e0f95b7e":"CULEX PIPIENS cause most west nile virus","ce29b64e":"I am using plotly+mapbox for plotting maps.\nRead more about it [here](https:\/\/plotly.com\/python\/mapbox-layers\/)\n\nTo run this notebook, you will need to register for a free account at https:\/\/mapbox.com\/ and obtain a Mapbox Access token. <br><\/br>\nPaste the access token into the MAPBOX_TOKEN variable below.","da1ca9cc":"This is an Imbalanced Dataset, Most cases have West Nile Virus absent.\nWe will explore areas of the city where West Nile Virus is present","69023094":"Spraying is effective. Areas that were sprayed, have very less virus cases but not spraying in correct areas caused more West Nile Virus cases <br><\/br>","1c13be68":"Two regions are seen black and yellow. Hover on top of them for more details. <br><\/br>\nBlack region: 66 cases <br><\/br>\nYellow region: 41 cases <br><\/br>"}}