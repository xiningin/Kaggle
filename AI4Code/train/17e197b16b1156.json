{"cell_type":{"40b962f1":"code","5e78cf44":"code","bee41519":"code","1a8f86db":"code","c23cb281":"code","48654611":"code","512aa7b2":"code","fa5f6f09":"code","de9f61fd":"code","e6a55934":"code","37c2247c":"code","22ddb232":"code","f0a41cda":"code","b747d814":"code","4c61da97":"code","fdd0c9ba":"code","37340210":"code","cc71305d":"code","6ada0a28":"code","c9002c4c":"markdown","8fc9ff91":"markdown","596e7d3d":"markdown","9d8c00db":"markdown","21f731b1":"markdown","640a914c":"markdown","0fc6ca80":"markdown","747c4da7":"markdown","dd2c9b2f":"markdown","7ef48f6d":"markdown","ea43682b":"markdown","500ca532":"markdown","099ec067":"markdown","92afe785":"markdown","c3bcf411":"markdown","9344a815":"markdown","8e24bb0c":"markdown","f16e3754":"markdown"},"source":{"40b962f1":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_theme(style=\"whitegrid\")","5e78cf44":"df = pd.read_csv('..\/input\/hotel-booking\/hotel_booking.csv')","bee41519":"df.info()","1a8f86db":"df.shape","c23cb281":"counter = 0\ncolumn = ''\nfor i in df:\n    temp = df[i].isnull().sum()\n    if temp > counter:\n        counter = temp\n        column = i\nprint(column, counter)","48654611":"df = df.drop('company', axis = 1)","512aa7b2":"df['country'].value_counts()[:5]","fa5f6f09":"ind = df['adr'].idxmax()\nname = df.iloc[ind]['name']\namount = df.iloc[ind]['adr']\nprint(f'name: {name}\\namount = {amount}')","de9f61fd":"np.around(df['adr'].mean(), 2)","e6a55934":"np.around((df['stays_in_week_nights'] + df['stays_in_weekend_nights']).mean(), 2)","37c2247c":"df[df['total_of_special_requests'] == 5][['name', 'email']]","22ddb232":"df['last name'] = df['name'].apply(lambda x: x[x.index(' ') + 1:])\ndf['last name'].value_counts()[:5]","f0a41cda":"idx = (df['children'] + df['babies']).idxmax()\nmaximum = (df['children'] + df['babies']).iloc[idx]\nprint(f'maximum = {maximum}\\n')\n\nfor i in range(idx, 119390):\n    if (df.iloc[i][\"babies\"] + df.iloc[i][\"children\"]) == maximum:\n        print(f'name: {df.iloc[i][\"name\"]}\\nindex = {i}\\n')","b747d814":"df['phone-number'].apply(lambda x: x[:3]).value_counts()[:3]","4c61da97":"fig = plt.figure(figsize=(10,5))\nax1 = fig.add_axes([0, 0, 1, 1])\nax2 = fig.add_axes([0.75, 0, 1, 1])\n\nsns.countplot(data=df, x='arrival_date_month', ax=ax1, hue='arrival_date_year', order=df['arrival_date_month'].value_counts().index, palette=\"Set1\")\n\nyears = dict(df['arrival_date_year'].value_counts())\nax2.pie(x=list(years.values()), labels=list(years.keys()), explode=[0.03]*3, autopct='%1.1f', shadow=True)\n\nplt.show()","fdd0c9ba":"plt.figure(figsize=(13, 8))\nsns.countplot(data=df, x='country', order=df['country'].value_counts().keys(), palette=\"Set1\").set_xlim(0, 9)\n\nplt.show()","37340210":"plt.figure(figsize=(13, 8))\nsns.countplot(data=df, x='agent', order=df['agent'].value_counts().keys(),  palette=\"Set1\").set_xlim(0, 9)\n\nplt.show()","cc71305d":"plt.figure(figsize=(8,3))\nsns.displot(df['adr'][df['adr'] < 500], bins=30, height=10, color='blue', linewidth=1)\n\nplt.show()","6ada0a28":"#number of repetitions of months in the data set\nmonth = []\nfor j in range(0, 3):\n    month += list(df['arrival_date_month'][df['arrival_date_year'] == 2015 + j].unique())\nfrequency = {i:month.count(i) for i in month}\n\n#calculation the all earned money for each month\ndf['total_number_of_nights'] = df['stays_in_weekend_nights']+df['stays_in_week_nights']\nearned_mony = {}\nfor i in df['arrival_date_month'].unique():\n    earned_mony[i] = 0\nfor i in df['arrival_date_month'].unique():\n    earned_mony[i] += (df['adr'][df['arrival_date_month'] == i]*df['total_number_of_nights'][df['arrival_date_month'] == i]).sum()\n\n#Calculate the average income earned for each month and sort them\nfor i in earned_mony:\n    earned_mony[i]=earned_mony[i]\/frequency[i]\nearned_mony = dict(sorted(earned_mony.items(), key=lambda item: item[1], reverse=True))\n\n#chart\nplt.figure(figsize=(15,8))\nsns.barplot(x=list(earned_mony.keys()), y=list(earned_mony.values()))","c9002c4c":"## Q-11\n## find the most common last name","8fc9ff91":"### top 10 of countries that passengers came from. most of passengers are from 'PRT'.","596e7d3d":"## Q-1","9d8c00db":"## Q-5\n## delete the 'company' column","21f731b1":"### the bar chart below shows the number of bookings per month and divides them into each year (the months in the bar chart are sorted from left to right based on the number of bookings).\n### pie chart shows the percentage of bookings per year.","640a914c":"## Q-4\n## find the column that has most missing value","0fc6ca80":"### In this chart, the average income per month is calculated. to get it, first all the cost per person is calculated based on 'adr' and the 'total number of nights'. and then the average of each month is calculated.","747c4da7":"## Q-9\n## average nights of stay","dd2c9b2f":"## Q-6\n## wich countries do most travelers come from?","7ef48f6d":"## Q-2","ea43682b":"### this histogram chart shows the distribution of 'adr' . as you can see, the average of 'adr' is around 100 with positive skew.","500ca532":"## Q-13\n## the most common area code","099ec067":"### ID of top 10 travel agency that made the booking.","92afe785":"## Q-12\n## who has the msot children and babies?","c3bcf411":"## Q-10\n## name and email of who has 5 special requests","9344a815":"## Q-8\n## average ADR","8e24bb0c":"## Q-3\n## how many rows and columns does the dataset have?","f16e3754":"## Q-7\n## who has the maximum cost?"}}