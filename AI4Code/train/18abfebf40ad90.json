{"cell_type":{"6aea3bef":"code","e5f4486c":"code","8f072a65":"code","a88ffc94":"code","9e8bebd4":"code","63e2194a":"code","cba07678":"code","045ba198":"code","b1fe4e8b":"code","f85b165a":"code","733ae48f":"code","6ca566b2":"code","2c2b6b0c":"code","d9bec6bb":"code","b5ce0d7b":"code","1d4ed425":"code","45f30a6a":"code","4a6ca9a5":"code","4038ab74":"code","f8cea28e":"code","3c1a2818":"code","e51a148f":"code","8df6410b":"code","e89c70c6":"code","b926c5ec":"markdown","5f2debc9":"markdown","73722934":"markdown","74ff952e":"markdown","7e9b0101":"markdown","2692fd1b":"markdown"},"source":{"6aea3bef":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","e5f4486c":"data_df = pd.read_csv('\/kaggle\/input\/800k-covid19-vaccine-tweets\/vaccine_tweets.csv')","8f072a65":"data_df.head(5)","a88ffc94":"data_df.columns","9e8bebd4":"# Clean out columns I won't need for the sentiment analysis\ndata_df.drop(columns=['user_location', 'user_verified', 'user_protected', 'user_followers_count',\n       'user_friends_count', 'user_statuses_count', 'user_favourites_count', 'tweet_id', 'tweet_url', 'tweet_retweet_count',\n       'tweet_quote_count', 'tweet_reply_count', 'tweet_like_count'], inplace=True)","63e2194a":"data_df.head(5)","cba07678":"data_df['tweet_language'].unique()","045ba198":"en_data = data_df[data_df['tweet_language'] == 'en'].copy()\nen_data.dropna(inplace=True)","b1fe4e8b":"from transformers import pipeline\nclassifier = pipeline('sentiment-analysis')","f85b165a":"def sentiment_analysis(row):\n    item = row['tweet_content']\n    output = classifier(item)[0]\n    if output['label'] == 'NEGATIVE':\n        row['sentiment'] = 0\n    else:\n        row['sentiment'] = 1\n    \n    row['score'] = output['score']\n    \n    return row","733ae48f":"random_sample = en_data.sample(1000).copy()\nclassified_df = random_sample.apply(sentiment_analysis, axis=1)","6ca566b2":"classified_df.head()","2c2b6b0c":"classified_df.drop(columns=['user_display_name', 'user_description', 'tweet_language'], inplace=True)\nclassified_df.head()","d9bec6bb":"classified_df['sentiment'].value_counts().plot(kind='bar', title='Positive vs Negative Tweets')","b5ce0d7b":"def clean_dates(row):\n    row['tweet_date'] = row['tweet_date'].date()\n    return row","1d4ed425":"classified_df['tweet_date'] = pd.to_datetime(classified_df['tweet_date'])\nclassified_df = classified_df.apply(clean_dates, axis=1)\ngrouped_df = classified_df.groupby(['tweet_date', 'sentiment']).count().drop(columns=['username', 'score'])\ngrouped_df = grouped_df.reset_index()\ngrouped_df = grouped_df.pivot(columns='sentiment', values='tweet_content', index='tweet_date')\ngrouped_df.plot.line(title='Positive vs Negative tweets by Date', xlabel='Date', ylabel='Count')","45f30a6a":"classified_df[classified_df['sentiment'] == 0]['score'].plot(kind='hist', title='Score Distribution of Negative Tweets')","4a6ca9a5":"classified_df[(classified_df['sentiment'] == 0) & (classified_df['score'] >= 0.8)]['score'].plot(kind='hist', title='Score Distribution of Negative Tweets for Scores >= 0.8')","4038ab74":"classified_df[classified_df['sentiment'] == 1]['score'].plot(kind='hist', title='Score Distribution of Positive Tweets')","f8cea28e":"classified_df[(classified_df['sentiment'] == 1) & (classified_df['score'] >= 0.7)]['score'].plot(kind='hist', title='Score Distribution of Positive Tweets for Scores >= 0.7')","3c1a2818":"classified_df.drop(columns=['tweet_content', 'tweet_date', 'username']).groupby('sentiment').mean().plot(kind='bar', title='Average Score for Positive and Negative Tweets')","e51a148f":"def get_tweet_len(row):\n    row['tweet_len'] = len(row['tweet_content'])\n    return row","8df6410b":"classified_df = classified_df.apply(get_tweet_len, axis=1)\nclassified_df.head(5)","e89c70c6":"classified_df.drop(columns=['tweet_content', 'tweet_date', 'score', 'username']).groupby('sentiment').mean().plot(kind='bar', title='Average Tweet Length for Positive and Negative Tweets')","b926c5ec":"## Sentiment Analysis\n\nHere's where I performa the sentiment analysis using the HuggingFace transformers pipeline. This just shows the power of how easy it is to implement natural language processing using the HuggingFace libraries.","5f2debc9":"Adds a column for the length of the tweet to see if that has an impact on the percieved sentiment.","73722934":"### Drop some columns that are no longer needed","74ff952e":"## Visualization\n\nNow time to start looking at the distribution of positive to negative tweets and their scores. Going forward, 0 will represent the negative tweets and 1 will represent the positive tweet. ","7e9b0101":"# COVID-19 Tweet Sentiment Analysis using HuggingFace Pipelines","2692fd1b":"Just looking at this first chart it looks like there is a 4 to 1 ratio of negative tweets to positive tweets.\n\n\nCurrently the dates are saved as strings within the data set. Converting them to dates make them easier to aggregate bt and manipulate. On some days there were no positive or negative tweets in this dataset, so there are some gaps in the generated line graph."}}