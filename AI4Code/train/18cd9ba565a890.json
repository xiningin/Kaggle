{"cell_type":{"0e89d062":"code","5ce8dce0":"code","20687372":"code","de75680e":"code","197b6744":"code","4c0a235a":"code","47993a22":"code","395d7248":"code","3175311d":"code","3c4e66d3":"code","a5f0a09d":"code","8abf579b":"code","7381fb5e":"code","0163f4b3":"code","091ae4e0":"code","470643e3":"code","e8dd9508":"code","0e815d98":"markdown","3cebca66":"markdown","718b644d":"markdown","b2e812e8":"markdown","75f836da":"markdown","f833901c":"markdown"},"source":{"0e89d062":"!pip -q install transformers","5ce8dce0":"!pip -q install BeautifulSoup4","20687372":"from transformers import pipeline\nfrom bs4 import BeautifulSoup\nimport requests","de75680e":"summarizer = pipeline(\"summarization\")","197b6744":"URL = \"https:\/\/medium.com\/the-ascent\/i-discovered-its-never-too-late-to-invest-in-bitcoin-if-you-understand-it-d0848141144b\"","4c0a235a":"r = requests.get(URL)","47993a22":"soup = BeautifulSoup(r.text, 'html.parser')\nresults = soup.find_all(['h1', 'p'])\ntext = [result.text for result in results]\nARTICLE = ' '.join(text)","395d7248":"ARTICLE","3175311d":"max_chunk = 500","3c4e66d3":"ARTICLE = ARTICLE.replace('.', '.<eos>')\nARTICLE = ARTICLE.replace('?', '?<eos>')\nARTICLE = ARTICLE.replace('!', '!<eos>')","a5f0a09d":"sentences = ARTICLE.split('<eos>')\ncurrent_chunk = 0 \nchunks = []\nfor sentence in sentences:\n    if len(chunks) == current_chunk + 1: \n        if len(chunks[current_chunk]) + len(sentence.split(' ')) <= max_chunk:\n            chunks[current_chunk].extend(sentence.split(' '))\n        else:\n            current_chunk += 1\n            chunks.append(sentence.split(' '))\n    else:\n        print(current_chunk)\n        chunks.append(sentence.split(' '))\n\nfor chunk_id in range(len(chunks)):\n    chunks[chunk_id] = ' '.join(chunks[chunk_id])","8abf579b":"len(chunks)","7381fb5e":"res = summarizer(chunks, max_length=120, min_length=30, do_sample=False)","0163f4b3":"res[0]","091ae4e0":"' '.join([summ['summary_text'] for summ in res])","470643e3":"text = ' '.join([summ['summary_text'] for summ in res])","e8dd9508":"with open('summary.txt', 'w') as f:\n    f.write(text)","0e815d98":"## Load summarisation pipeline","3cebca66":"### Summarize text","718b644d":"### Chunk text","b2e812e8":"# Using hugging face to parse a website and summarize","75f836da":"### Get blog post","f833901c":"### Output to file"}}