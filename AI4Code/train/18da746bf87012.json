{"cell_type":{"4bd1a0ee":"code","ef316451":"code","a64f970f":"code","bf3e13b2":"code","ce2ac389":"code","5272c222":"code","c763d65a":"code","735e37ab":"code","9dcab331":"code","126953b4":"code","ab950cfc":"code","70e90b8b":"code","5b4faa39":"code","53ca2820":"code","7c0d856c":"code","f4b49513":"code","eff4bf74":"code","13b14017":"code","5cc9780c":"code","dc69d0cc":"code","00946376":"code","6ec6e85a":"code","81fe7875":"markdown","654faf70":"markdown","e641c2e9":"markdown"},"source":{"4bd1a0ee":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nfrom textblob import TextBlob\nimport seaborn as sns\nimport itertools\nimport collections\n\nimport nltk\nfrom nltk.corpus import stopwords\nimport re\nimport networkx\nfrom textblob import TextBlob\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","ef316451":"df=pd.read_csv('\/kaggle\/input\/us-election-2020-tweets\/hashtag_joebiden.csv', lineterminator='\\n')\ndf1=pd.read_csv('\/kaggle\/input\/us-election-2020-tweets\/hashtag_donaldtrump.csv', lineterminator='\\n')\ndf['hastag']='joebiden'\ndf1['hastag']='donaldtrump'\n\n# combine file hastag joebiden and donaldtrump\ndf_combined = pd.concat([df,df1]).reset_index()\ndel df_combined['index']\n","a64f970f":"# check isnull data\n#df_combined.isnull().sum()\n","bf3e13b2":"#Trend Tweets\ndf_combined['created_at']=pd.to_datetime(df_combined['created_at'], infer_datetime_format=True,format='%Y\/%m\/%d',utc=False)\ndf_combined['weekday'] = df_combined['created_at'].apply(lambda time: time.dayofweek)\ndays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"]\ndf_combined['day_name']=df_combined['weekday'].apply (lambda x : days[x])\ndf_combined['hour']=df_combined['created_at'].dt.hour\ndf_combined['day']=df_combined['created_at'].dt.day\ndf_combined['date']=df_combined['created_at'].dt.date.astype('datetime64[ns]')\ndf_combined['weekday']=df_combined['weekday'].astype('str')\n","ce2ac389":"#trend tweets per day\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby(by='date')['tweet'].count().sort_values(ascending=False).index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby(by='date')['tweet'].count().sort_values(ascending=False)\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby(by='date')['tweet'].count().sort_values(ascending=False).index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby(by='date')['tweet'].count().sort_values(ascending=False)\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Daily Tweets Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Date')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n\n# Hourly\n#tweets per hour\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('hour').count().tweet.sort_values(ascending=False).index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('hour').count().tweet.sort_values(ascending=False)\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hour').count().tweet.sort_values(ascending=False).index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hour').count().tweet.sort_values(ascending=False)\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Hour Tweets Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Hour')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n\n#tweets per Weekdays\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('weekday')['weekday'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('weekday')['tweet'].count()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('weekday')['weekday'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('weekday')['tweet'].count()\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Weekdays Tweets Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Weekdays')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n","5272c222":"# looking for continent top tweet\n\n#Joe biden\ny = df_combined[df_combined['hastag']=='joebiden'].dropna(subset=['continent']).groupby('continent')['tweet'].count()\n\nx = df_combined[df_combined['hastag']=='joebiden'].dropna(subset=['continent']).groupby('continent')['tweet'].count().sort_values(ascending=False).index\n\n#donal trump\ny2 = df_combined[df_combined['hastag']=='donaldtrump'].dropna(subset=['continent']).groupby('continent')['tweet'].count()\n\nx2 = df_combined[df_combined['hastag']=='donaldtrump'].dropna(subset=['continent']).groupby('continent')['tweet'].count().sort_values(ascending=False).index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x2, y=y2, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Top Continent Joe Biden vs Donald Trump Tweets')\nfig.update_xaxes(title='Continnet')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n\n# change contry name united state of america become United States\ndf_combined['country']=df_combined['country'].apply (lambda x: 'United States' if x=='United States of America' else x)\n\n\n# looking for top 20 country tweet\n#Joe biden\ny = df_combined[df_combined['hastag']=='joebiden'].dropna(subset=['country']).groupby('country')['tweet'].count().sort_values(ascending=False).head(20)\nx = df_combined[df_combined['hastag']=='joebiden'].dropna(subset=['country']).groupby('country')['tweet'].count().sort_values(ascending=False).head(20).index\n\n#donal trump\ny2 = df_combined[df_combined['hastag']=='donaldtrump'].dropna(subset=['country']).groupby('country')['tweet'].count().sort_values(ascending=False).head(20)\nx2 = df_combined[df_combined['hastag']=='donaldtrump'].dropna(subset=['country']).groupby('country')['tweet'].count().sort_values(ascending=False).head(20).index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x2, y=y2, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Top 20 Country Joe Biden vs Donald Trump Tweets')\nfig.update_xaxes(title='Continents')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n\n","c763d65a":"# looking for tweets filter continent\n#filter Asia\ncontinent='Asia'\ndf_combined1=df_combined[df_combined['continent']==continent]\n\n# looking for top 20 country tweet\n#Joe biden\ny = df_combined1[df_combined1['hastag']=='joebiden'].dropna(subset=['country']).groupby(by='country')['tweet'].count()\n\nx = df_combined1[df_combined1['hastag']=='joebiden'].dropna(subset=['country']).groupby(by='country')['tweet'].count().index\n\n#donal trump\ny2 = df_combined1[df_combined1['hastag']=='donaldtrump'].dropna(subset=['country']).groupby(by='country')['tweet'].count()\n\nx2 = df_combined1[df_combined1['hastag']=='donaldtrump'].dropna(subset=['country']).groupby(by='country')['tweet'].count().index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x2, y=y2, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Country Tweets Continent Joe Biden vs Donald Trump '+continent)\nfig.update_xaxes(title='Countries')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()","735e37ab":"# looking for tweets by state\n# filter country\n\ncountry='United States'\n\ndf_combined1=df_combined[df_combined['country']==country]\n\n# looking for top 20 country tweet\n#Joe biden\ny = df_combined1[df_combined1['hastag']=='joebiden'].dropna(subset=['state']).groupby('state')['tweet'].count()\n\nx = df_combined1[df_combined1['hastag']=='joebiden'].dropna(subset=['state']).groupby(by='state')['tweet'].count().index\n\n#donal trump\ny2 = df_combined1[df_combined1['hastag']=='donaldtrump'].dropna(subset=['state']).groupby(by='state')['tweet'].count()\n\nx2 = df_combined1[df_combined1['hastag']=='donaldtrump'].dropna(subset=['state']).groupby(by='state')['tweet'].count().index\n\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x2, y=y2, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Top 20 Country Joe Biden vs Donald Trump Tweets Country '+country)\nfig.update_xaxes(title='Countries')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()","9dcab331":"# Likes Biden vs Trumps\n#Biden\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('date')['likes'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('date')['likes'].sum()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('date')['likes'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('date')['likes'].sum()\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Daily Likes Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Date')\nfig.update_yaxes(title='Count of Likes')\nfig.show()\n\n# total of likes Biden vs Trump\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['likes'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['likes'].sum()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['likes'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['likes'].sum()\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Total Likes Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Date')\nfig.update_yaxes(title='Count of Likes')\nfig.show()\n","126953b4":"# Retweets Biden vs Trumps\n#Biden\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('date')['retweet_count'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('date')['retweet_count'].sum()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('date')['retweet_count'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('date')['retweet_count'].sum()\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Daily Retweets Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Date')\nfig.update_yaxes(title='Count of Retweets')\nfig.show()\n\n# total of tweets Biden vs Trump\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['tweet'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['tweet'].count()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['retweet_count'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['retweet_count'].count()\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Total Tweets Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Candidats')\nfig.update_yaxes(title='Count of Tweets')\nfig.show()\n\n# total of likes Biden vs Trump\n\nx=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['likes'].count().index\ny=df_combined[df_combined['hastag']=='joebiden'].groupby('hastag')['likes'].sum()\n\nx1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['likes'].count().index\ny1=df_combined[df_combined['hastag']=='donaldtrump'].groupby('hastag')['likes'].sum()\nfig = go.Figure([go.Bar(x=x, y=y, name='Joe Biden'),\n                 go.Bar(x=x1, y=y1, name='Donald Trump')])\n\n\nfig.update_layout(title_text='Total Likes Joe Biden vs Donald Trump')\nfig.update_xaxes(title='Candidats')\nfig.update_yaxes(title='Count of Likes')\nfig.show()\n\n","ab950cfc":"import nltk\nfrom nltk.corpus import stopwords\nimport re\nimport networkx\nfrom textblob import TextBlob\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n","70e90b8b":"#cleaning the tweets\ndef clean_tweets(tweet):\n \n    tweet = re.sub(r':', '', str(tweet))\n    tweet = re.sub(r'\u201a\u00c4\u00b6', '', str(tweet))\n    tweet = re.sub('@[A-Za-z0\u20139]+', '', str(tweet))               \n    tweet = re.sub('#', '', str(tweet)) # Removing '#' hash tag\n    tweet = re.sub('https?:\\\/\\\/\\S+', '', str(tweet)) # Removing hyperlink\n    #replace consecutive non-ASCII characters with a space\n    tweet = re.sub(r'[^\\x00-\\x7F]+',' ',str(tweet))\n    tweet = str(tweet).lower()\n    tweet = re.sub('\\[.*?\\]', '', tweet)\n    tweet = re.sub('https?:\/\/\\S+|www\\.\\S+', '', tweet)\n    tweet = re.sub('<.*?>+', '', tweet)\n    tweet = re.sub('\\n', '', tweet)\n    tweet = re.sub('\\w*\\d\\w*', '', tweet)\n    tweet = re.sub(r'#','',tweet)\n    tweet = re.sub(r'RT[\\s]+','',tweet)\n    tweet = re.sub(r'[^\\w]', ' ', tweet)\n    tweet = re.sub('https', '', tweet)\n    tweet = re.sub('https ', '', tweet)\n    tweet = re.sub('co', '', tweet)\n\n    return tweet","5b4faa39":"# biden\nbiden=df_combined[df_combined['hastag']=='joebiden']\ntrump=df_combined[df_combined['hastag']=='donaldtrump']\n","53ca2820":"## Sentiment Analysis JoeBiden\n\ndef getSubjectivity(tweet):\n    try:\n        return TextBlob(tweet).sentiment.subjectivity\n    except:\n        return None\n\n\n# Create a function to get the polarity\ndef getPolarity(tweet):\n    try:\n        return  TextBlob(tweet).sentiment.polarity\n    except:\n        return None\n\ndef sentiment_calc(tweet):\n    try:\n        return TextBlob(tweet).sentiment\n    except:\n        return None\n\ncountry='United States'\nbiden=biden[biden['country']==country]\nbiden['edited_tweet'] = biden['tweet'].apply(clean_tweets)\n# Create two new columns 'Subjectivity' & 'Polarity'\nbiden['subjectivity'] = biden['edited_tweet'].apply(getSubjectivity)\nbiden['polarity'] = biden['edited_tweet'].apply(getPolarity)\nbiden['sentiment'] = biden['edited_tweet'].apply(sentiment_calc)\n\ndef getAnalysis(score):\n    if score < 0:\n      return 'Negative'\n    elif score == 0:\n      return 'Neutral'\n    else:\n      return 'Positive'\n\nbiden['analysis'] = biden['polarity'].apply(getAnalysis)","7c0d856c":"biden.groupby('analysis')['analysis'].count().plot.bar()\nplt.title('Sentiment Analyisis Biden country: '+country)","f4b49513":"x=biden.groupby('analysis')['analysis'].count()\nneutral=biden[biden['analysis']=='Neutral']['edited_tweet'].count()\npositive=biden[biden['analysis']=='Positive']['edited_tweet'].count()\nnegative=biden[biden['analysis']=='Negative']['edited_tweet'].count()\n\nfig = go.Figure(data=[go.Pie(labels=[\"positivity\",\"negativity\",\"neutrality\"], values=[positive,negative,neutral])])\nfig.update_layout(title_text='Sentiment analysis of Biden tweets')\nfig.show()","eff4bf74":"sentiment_df = pd.DataFrame(biden, columns=[\"polarity\", \"edited_tweet\"])\n\nfig, ax = plt.subplots(figsize=(8, 6))\n\n# Plot histogram of the polarity values\nsentiment_df.hist(bins=[-1, -0.75, -0.5, -0.25, 0.25, 0.5, 0.75, 1],\n             ax=ax,\n             color=\"blue\")\n\nplt.title(\"Sentiments from Tweets on Joe Biden\")\nplt.show()","13b14017":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\ndef word_cloud(wd_list):\n    stopwords = set(STOPWORDS)\n    all_words = ' '.join([text for text in wd_list])\n    wordcloud = WordCloud(\n        background_color='white',\n        stopwords=stopwords,\n        width=1600,\n        height=800,\n        random_state=1,\n        colormap='jet',\n        max_words=80,\n        max_font_size=200).generate(all_words)\n    plt.figure(figsize=(12, 10))\n    plt.axis('off')\n    plt.imshow(wordcloud, interpolation=\"bilinear\");\nword_cloud(biden['edited_tweet'][0:1000])","5cc9780c":"## Sentiment Analysis Trump\n\ndef getSubjectivity(tweet):\n    try:\n        return TextBlob(tweet).sentiment.subjectivity\n    except:\n        return None\n\n\n# Create a function to get the polarity\ndef getPolarity(tweet):\n    try:\n        return  TextBlob(tweet).sentiment.polarity\n    except:\n        return None\n\ndef sentiment_calc(tweet):\n    try:\n        return TextBlob(tweet).sentiment\n    except:\n        return None\n\ncountry='United States'\ntrump=trump[trump['country']==country]\ntrump['edited_tweet'] = trump['tweet'].apply(clean_tweets)\n# Create two new columns 'Subjectivity' & 'Polarity'\ntrump['subjectivity'] = trump['edited_tweet'].apply(getSubjectivity)\ntrump['polarity'] = trump['edited_tweet'].apply(getPolarity)\ntrump['sentiment'] = trump['edited_tweet'].apply(sentiment_calc)\n\ndef getAnalysis(score):\n    if score < 0:\n      return 'Negative'\n    elif score == 0:\n      return 'Neutral'\n    else:\n      return 'Positive'\n\ntrump['analysis'] = trump['polarity'].apply(getAnalysis)\ntrump.groupby('analysis')['analysis'].count().plot.bar()\nplt.title('Sentiment Analyisis Donald Trump country: '+country)","dc69d0cc":"x=trump.groupby('analysis')['analysis'].count()\nneutral=trump[trump['analysis']=='Neutral']['edited_tweet'].count()\npositive=trump[trump['analysis']=='Positive']['edited_tweet'].count()\nnegative=trump[trump['analysis']=='Negative']['edited_tweet'].count()\n\nfig = go.Figure(data=[go.Pie(labels=[\"positivity\",\"negativity\",\"neutrality\"], values=[positive,negative,neutral])])\nfig.update_layout(title_text='Sentiment analysis of Trump tweets')\nfig.show()\n","00946376":"sentiment_df = pd.DataFrame(trump, columns=[\"polarity\", \"edited_tweet\"])\n\nfig, ax = plt.subplots(figsize=(8, 6))\n\n# Plot histogram of the polarity values\nsentiment_df.hist(bins=[-1, -0.75, -0.5, -0.25, 0.25, 0.5, 0.75, 1],\n             ax=ax,\n             color=\"blue\")\n\nplt.title(\"Sentiments from Tweets on Trump\")\nplt.show()","6ec6e85a":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\ndef word_cloud(wd_list):\n    stopwords = set(STOPWORDS)\n    all_words = ' '.join([text for text in wd_list])\n    wordcloud = WordCloud(\n        background_color='white',\n        stopwords=stopwords,\n        width=1600,\n        height=800,\n        random_state=1,\n        colormap='jet',\n        max_words=80,\n        max_font_size=200).generate(all_words)\n    plt.figure(figsize=(12, 10))\n    plt.axis('off')\n    plt.imshow(wordcloud, interpolation=\"bilinear\");\nword_cloud(trump['edited_tweet'][0:1000])","81fe7875":"> > ## WordCloud","654faf70":"# SENTIMENT ANALYSIS","e641c2e9":"# Trump"}}