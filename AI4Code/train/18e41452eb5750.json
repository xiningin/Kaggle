{"cell_type":{"02f8b598":"code","69ee1201":"code","eb017fc7":"code","8b97cd22":"code","294cd871":"code","150eceb7":"code","f069a631":"code","950dee61":"code","01c626a2":"code","7d409a84":"code","37802da8":"code","8255badc":"code","626fb4c0":"code","edd81d63":"code","0efb1e65":"code","2678b211":"code","0dba0f77":"code","f2ebf185":"markdown","9916ae2f":"markdown","084584c5":"markdown","a204677c":"markdown","19ca4912":"markdown","279c347b":"markdown","28887e96":"markdown"},"source":{"02f8b598":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nfrom sklearn.model_selection import train_test_split\nimport scipy.stats as stats\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import classification_report\nfrom sklearn import metrics\nimport os\nfrom datetime import date, timedelta\n\nraw_df_time = pd.read_csv('..\/input\/coronavirusdataset\/Time.csv')\nraw_df_time.head","69ee1201":"# \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430 Time.csv\ndef df_time_preprocessing(raw_df_time):\n    date = pd.to_datetime(raw_df_time['date']) \n    date_shifted = date - timedelta(14) \n    date_delta = (date_shifted - date_shifted.min()) \/ np.timedelta64(1,'D') \n    percentage_positive = raw_df_time['confirmed'] \/ raw_df_time['test']  \n    return pd.DataFrame({\"date\": date_shifted,                           \n                         \"delta\": date_delta,                            \n                         \"test\": raw_df_time[\"test\"],                   \n                         \"percentage_positive\": percentage_positive})\n\ndef filter_by_positive_rate(df_time):\n    return df_time[df_time['percentage_positive'] < 0.05]","eb017fc7":"df_time = filter_by_positive_rate(df_time_preprocessing(raw_df_time))\ndf_time.head()","8b97cd22":"# \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0446\u0435\u043d\u0442 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432 \u0441 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f\nsns.regplot(x=\"delta\", y=\"percentage_positive\", data=df_time).set_title(\"percentage confirmed\");","294cd871":"# \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0431\u0449\u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0435\u0441\u0442\u043e\u0432\nsns.regplot(x=\"delta\", y=\"test\", data=df_time).set_title(\"number of tests\");","150eceb7":"sns.displot(data=df_time[\"percentage_positive\"], bins=25, kde=True);\nprint(f\"Normal test p-value: {stats.normaltest(df_time['percentage_positive']).pvalue}\")","f069a631":"sns.displot(data=np.sqrt(df_time['percentage_positive']), bins=25, kde=True)\nprint(f\"Normal test p-value: {stats.normaltest(np.sqrt(df_time['percentage_positive'])).pvalue}\")","950dee61":"# \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438 \u0447\u0442\u043e sqrt \u043f\u043e\u0434\u043e\u0448\u043b\u043e, \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u044b\u0445\ndef normalize_sqrt(df, col_name):\n    new_df = df.copy()\n    new_df[col_name] = np.sqrt(new_df[col_name])\n    return new_df\n\ndf_time_norm = normalize_sqrt(df_time, \"percentage_positive\")","01c626a2":"#\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u0438\u0441\u043a\u0430\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043f\u043e \u0442\u0435\u043c\u0435 \u0437\u0430\u0431\u043e\u043b\u0435\u0432\u0430\u043d\u0438\u0439\nraw_df_search = pd.read_csv('..\/input\/coronavirusdataset\/SearchTrend.csv')  \nraw_df_search.head()","7d409a84":"# \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \"date\" \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 datetime64[ns] \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 df_time_norm\n\ndef datetype(df):\n    newtype_df = df.copy()\n    newtype_df.date = df.date.astype('datetime64[ns]')\n    return newtype_df\n\ndf_search = datetype(raw_df_search)\ndf_search.info() # \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0438\u043c\u0441\u044f \u0432 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0438","37802da8":"df_total = raw_df_search.merge(df_time_norm, on=\"date\") # \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u043c 2 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430 df_time_norm \u0438 raw_df_search \u043f\u043e \u0434\u0430\u0442\u0435\ndf_total.head()","8255badc":"\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0432 \u0432\u0438\u0434\u0435 \u043f\u0430\u0439\u043f\u043b\u0430\u0439\u043d\u043e\u0432","626fb4c0":"from sklearn.preprocessing import FunctionTransformer as FT\nfrom sklearn.pipeline import Pipeline\n\npipe_time = Pipeline([(\"df_time_preprocessing\",FT(df_time_preprocessing)),\n                      (\"filter_by_positive_rate\", FT(filter_by_positive_rate)),\n                      (\"normalize_sqrt\", FT(normalize_sqrt,kw_args={\"col_name\": \"percentage_positive\"}))]) \npipe_search = Pipeline([(\"datetype\", FT(datetype))])\n\nraw_df_time = pd.read_csv('..\/input\/coronavirusdataset\/Time.csv')\nraw_df_search = pd.read_csv('..\/input\/coronavirusdataset\/SearchTrend.csv')  \n\ndf_total = pipe_search.transform(raw_df_search).merge(pipe_time.transform(raw_df_time), on=\"date\")\n\ndf_total.head()","edd81d63":"sns.scatterplot(x=\"date\", y=\"cold\", size=\"percentage_positive\", hue=\"percentage_positive\", \n                data=df_total, sizes=(20, 200)).set_title(\"cold vs percentage positive\");","0efb1e65":"sns.scatterplot(x=\"date\", y=\"flu\", size=\"percentage_positive\", hue=\"percentage_positive\", \n                data=df_total, sizes=(20, 200)).set_title(\"flu vs percentage positive\");","2678b211":"sns.scatterplot(x=\"date\", y=\"pneumonia\", size=\"percentage_positive\", hue=\"percentage_positive\", \n                data=df_total, sizes=(20, 200)).set_title(\"pneumonia vs percentage positive\");","0dba0f77":"sns.scatterplot(x=\"date\", y=\"coronavirus\", size=\"percentage_positive\", hue=\"percentage_positive\", \n                data=df_total, sizes=(20, 200)).set_title(\"coronavirus vs percentage positive\");","f2ebf185":"\u041f\u043d\u0435\u0432\u043c\u043e\u043d\u0438\u044f, \u043a\u0430\u043a \u043e\u0434\u043d\u043e \u0438\u0437 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0445 \u043e\u0441\u043b\u043e\u0436\u043d\u0435\u043d\u0438\u0439 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u0440\u043e\u043d\u0430\u0432\u0438\u0440\u0443\u0441\u0430 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043e\u0432\u0430\u043b\u043e \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u044d\u043f\u0438\u0434\u0435\u043c\u0438\u0438, \u0434\u0430\u043b\u0435\u0435 \u043f\u0438\u043a\u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0441 \u043f\u0438\u043a\u0430\u043c\u0438 \u0437\u0430\u0431\u043e\u043b\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u0438.","9916ae2f":"\u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0430\u0439\u043f\u043b\u0430\u0439\u043d\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0442\u043e\u0442 \u0436\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0434\u0430\u0442\u0430\u0441\u0435\u0442.","084584c5":"\u041d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u0435 \u044f\u0432\u043d\u043e \u0437\u0430\u043c\u0435\u0442\u0435\u043d \u043f\u0438\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0445 \u0441\u043b\u043e\u0432\u043e \"cold\" \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0441\u043f\u043b\u0435\u0441\u043a\u0430 \u0437\u0430\u0431\u043e\u043b\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u0438 \u043a\u043e\u0440\u043e\u043d\u0430\u0432\u0438\u0440\u0443\u0441\u043e\u043c. \u041c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0432 \u043f\u0435\u0440\u0438\u043e\u0434 \u044d\u043f\u0438\u0434\u0435\u043c\u0438\u0438 \u043c\u043d\u043e\u0433\u0438\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u043d\u0435\u0434\u043e\u043c\u043e\u0433\u0430\u043d\u0438\u0435, \u043d\u043e \u043d\u0430\u0434\u0435\u044f\u043b\u0438\u0441\u044c \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u0443\u044e \u043f\u0440\u043e\u0441\u0442\u0443\u0434\u0443. \u041e\u0434\u043d\u0430\u043a\u043e \u0447\u0430\u0441\u0442\u043e\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u043d\u0438\u0436\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u043d\u044c\u0448\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0432\u044b\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0431\u043e\u043b\u0435\u0432\u0430\u043d\u0438\u0439, \u0447\u0442\u043e \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0438\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f.","a204677c":"\u0421\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u044f \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0433\u0440\u0430\u0444\u0438\u043a\u0430\u043c\u0438, \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 - \"\u043a\u043e\u0440\u043e\u043d\u0430\u0432\u0438\u0440\u0443\u0441\" \u044f\u0432\u043b\u044f\u043b\u0441\u044f \u0441\u0430\u043c\u044b\u043c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c, \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \"\u043f\u0440\u043e\u0441\u0442\u0443\u0434\u0430\". ","19ca4912":"**\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0432 \u0434\u0430\u043d\u043d\u044b\u0435, \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u043e \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u0431 \u044d\u043f\u0438\u0434\u0435\u043c\u0438\u0438 \u0438 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0438 \u043a \u044d\u0442\u043e\u043c\u0443 \u0433\u0440\u0430\u0436\u0434\u0430\u043d. \u041c\u043d\u043e\u0433\u0438\u0435 \u043d\u0430\u0434\u0435\u044f\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u0435\u0437\u043e\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0441\u0442\u0443\u0434\u0443 \u0438, \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043c\u0435\u0440\u044b \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438, \u0447\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u043e \u043e\u0442\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0431\u043e\u043b\u0435\u0432\u0430\u043d\u0438\u044f.**","279c347b":"\u041e\u0431\u0438\u043b\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \"flu\" \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u044d\u043f\u0438\u0434\u0435\u043c\u0438\u0438 \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441 \u043d\u043e\u0432\u043e\u0439 \u0431\u043e\u043b\u0435\u0437\u043d\u044c\u044e, \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u044b\u0432\u0430\u043b\u0438 \u0441\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u043a\u043e\u0440\u043e\u043d\u0430\u0432\u0438\u0440\u0443\u0441\u0430 \u043d\u0430 \u0433\u0440\u0438\u043f\u043f. \u041f\u043e \u043c\u0435\u0440\u0435 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0447\u0438\u0441\u043b\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u043d\u0438\u0436\u0430\u0435\u0442\u0441\u044f.","28887e96":"**\u041e\u043a\u0430\u0442\u044c\u0435\u0432\u0430 \u0410.\u0414. \u0414\u0417 \u21163**\n* \u0412\u044b\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0433\u0438\u043f\u043e\u0442\u0435\u0437\u044b\n* \u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u043f\u0430\u0439\u043f\u043b\u0430\u0439\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0433\u0438\u043f\u043e\u0442\u0435\u0437\u044b"}}