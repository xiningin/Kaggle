{"cell_type":{"c9a9f61f":"code","0cf832af":"code","878e9f3b":"code","d6483cd4":"code","aafa5a22":"code","02fb99b9":"markdown","c3ca3bf3":"markdown","9fa1e2a1":"markdown","fd9e73c2":"markdown"},"source":{"c9a9f61f":"import folium\nfrom folium import plugins\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport plotly_express as px\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n%matplotlib inline","0cf832af":"df = pd.read_csv('..\/input\/birdclef-2021\/train_metadata.csv')\ndf.head()","878e9f3b":"print('unique primary label : ', len(df['primary_label'].unique()),'\\n',df['primary_label'].unique())","d6483cd4":"bird_df = df[df['primary_label'] == 'houwre']","aafa5a22":"route_df = bird_df[['primary_label', 'latitude', 'longitude', 'date']]\nroute_df = route_df.sort_values(by='date',ascending=True)\n\n# Filter out rows with wrong format date\nroute_df = route_df[route_df.date.str.split('-').str[2] != '00']\nroute_df = route_df[route_df.date.str.split('-').str[1] != '00']\nroute_df = route_df[route_df.date.str.split('-').str[0].astype(int) > 1000]\n\nroute_df['season'] = pd.to_datetime(route_df['date'], format='%Y-%m-%d').dt.month%12 \/\/ 3 + 1\n\nmapa = folium.Map(height = 500, width = 1000, location=[route_df.iloc[0]['latitude'], route_df.iloc[0]['longitude']],zoom_start=4,tiles=\"cartodbpositron\")\n\nfor grp_name, df_grp in route_df.groupby('primary_label'):\n    feature_group = folium.FeatureGroup(grp_name, show=True)\n    for row in df_grp.itertuples():\n        if row.season == 1:\n            color = 'blue'\n            season = 'winter'\n        elif row.season == 2:\n            color = 'green'\n            season = 'spring'\n        elif row.season == 3:\n            color = 'yellow'\n            season = 'summer'\n        else:\n            color = 'orange'\n            season = 'fall'\n\n        folium.Circle(\n            radius=40000,\n            location=[row.latitude, row.longitude],\n            popup= f\"{row.primary_label}_ \\n {row.date}_ \\n{season}\",\n            color = \"#555\",\n            weight=2,\n            fill_color = color,\n            fill_opacity=1,\n        ).add_to(feature_group)\n        \n    feature_group.add_to(mapa)\n\nfolium.LayerControl().add_to(mapa)\nmapa","02fb99b9":"## Preview Data","c3ca3bf3":"## Bird locoation visualization (season)\n\n* Hover on the top-right button to open label list\n* 4 color corresponding to 4 seasons\n \ud83d\udfe2 Sprint\n \ud83d\udfe1 Summer\n \ud83d\udfe0 Fall\n \ud83d\udd35 Winter\n* Click color circle to check information (primary label\u3001date\u3001season)\n\n## Observation results\n\nAs we can see, most of bird will move to south in winter and move back to north in summer time","9fa1e2a1":"## Check unique primary label","fd9e73c2":"## Import Library"}}