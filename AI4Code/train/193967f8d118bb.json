{"cell_type":{"962a8fa7":"code","28d6b7e6":"code","260434d0":"code","76797b62":"code","df389cb1":"code","7fdc0b07":"code","6cb17436":"code","7c513ce8":"code","a3a1f536":"code","8b35cbb8":"code","e7ece975":"code","e3d58c4b":"code","7e3230fc":"code","479442dc":"code","4872131a":"code","967c1344":"code","68d815ba":"code","98222568":"code","490d920f":"code","d3da8d42":"code","9e20c276":"code","32e49aac":"code","03026a36":"code","c6747d2e":"code","866cfa0e":"code","66a3acfc":"code","e6b88e63":"code","72918882":"code","2769f078":"code","4a37bdd8":"code","dee08008":"code","ca808769":"code","0ea14601":"code","7e983e60":"code","ec2ac6c7":"code","5a6f14e0":"code","95961ad2":"code","c3791c72":"code","0bef63aa":"code","20b12421":"code","4bc8865c":"code","5bcf9814":"code","0a5f0d04":"code","a42f02ab":"code","a2bb0648":"code","2a37ea94":"code","cae342bc":"code","f7a4863c":"code","41cb94c2":"code","2e489703":"code","f59a9265":"code","c993370e":"code","bd896feb":"code","c999e65a":"code","f0591080":"code","b80e6ccc":"code","3eb30bb4":"code","b8d2540d":"code","0af17917":"code","677c7f6a":"code","f989d36a":"code","c643974c":"code","6a9c17ea":"code","89c9fdf8":"code","5a3a62e1":"code","2b129dc8":"code","43b696f5":"code","79c3e951":"code","776c3318":"code","77cb74f8":"code","aec84ac1":"code","58e879c3":"code","d6bb55a3":"code","d78387f8":"code","c2e4558f":"markdown","d02fc38b":"markdown","c01d9cee":"markdown","3476e39d":"markdown","7a408c66":"markdown","2c611ce3":"markdown","52075b0f":"markdown","b705b79c":"markdown","364307ee":"markdown","8e4fa5e7":"markdown","3de8c2c7":"markdown","bcc56416":"markdown","5567dc9e":"markdown","3f921f52":"markdown","fa90ac23":"markdown","a439c62b":"markdown","2d629c33":"markdown","24d90616":"markdown","18446e81":"markdown","0b2db565":"markdown","e1cd4adb":"markdown"},"source":{"962a8fa7":"from IPython.display import Image\nImage(\"D:..\/input\/image.jpg\", height = '200', width = '800')","28d6b7e6":"# Import the required libraries\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport re\n%matplotlib inline","260434d0":"# Display pandas DataFrame of floats using a format string for columns   \n\npd.options.display.float_format = '{:20,.2f}'.format","76797b62":"# Use a function to change the permalink and company permalink into lower-case\n\ndef lowercase(val):\n    return val.lower()\n\n# We will use a method to remove the special character from the data sets\n\ndef remove_spe_chr(val):\n    removeliteral=\"\"\n    for i in re.compile(r'[0-9a-zA-Z-+\/.]').findall(val):\n        removeliteral += str(i)\n    return str(removeliteral)","df389cb1":"# Read the file by using the encoder\n\ncompanies = pd.read_csv('D:..\/input\/companies.txt', sep=\"\\t\", encoding = 'ISO-8859-1')\ncompanies.head(5)","7fdc0b07":"rounds2 = pd.read_csv('D:..\/input\/rounds2.csv',encoding = 'ISO-8859-1')\nrounds2.head(5)","6cb17436":"# Format the fields of a dataframe into lowercase\n\ncompanies[\"permalink\"] = companies[\"permalink\"].apply(lowercase)\nrounds2[\"company_permalink\"] = rounds2[\"company_permalink\"].apply(lowercase)","7c513ce8":"# Format the fields of a dataframe for special characters\n\ncompanies[\"permalink\"] = companies[\"permalink\"].apply(remove_spe_chr)\nrounds2[\"company_permalink\"] = rounds2[\"company_permalink\"].apply(remove_spe_chr)","a3a1f536":"# No. of unique companies are present in rounds2\n\nrounds2.company_permalink.nunique()","8b35cbb8":"# No. of unique companies are present in companies\n\ncompanies.permalink.nunique()","e7ece975":"# Permalink\n\ncompanies['permalink'].head(5)","e3d58c4b":"# Any companies in the rounds2 file which are not present in companies\n\nval1 = pd.DataFrame(rounds2.company_permalink.unique())\nval2 = pd.DataFrame(companies.permalink.unique())\nval2.equals(val1)","7e3230fc":"# Answer yes or no: Y\/N\n\nif val2.equals(val1):\n    print('Y')\nelse:\n    print('N')","479442dc":"# To merge the dataframes we will rename the company column name\n\ncompanies.rename(columns = {'permalink':'company_permalink'}, inplace = True)","4872131a":"# Now we will merge both the dataframes together\n\nmaster_frame = pd.merge(companies, rounds2, how = 'left', on = 'company_permalink')\nmaster_frame.head(8)","967c1344":"# No. of observations which are present in master_fram\n\nobservations = len(master_frame)\nobservations","68d815ba":"# Remove the NaN values from \n\nmaster_frame = master_frame[pd.notnull(master_frame['country_code'])]\nmaster_frame = master_frame[pd.notnull(master_frame['category_list'])]\nmaster_frame = master_frame[pd.notnull(master_frame['raised_amount_usd'])]","98222568":"# For venture funding\n\nventure_funding = master_frame[master_frame[\"funding_round_type\"].isin([\"venture\"])]\nprint(\"Average funding amount of venture type : \"+ str(venture_funding.raised_amount_usd.mean()))","490d920f":"# For seed funding\n\nseed_funding = master_frame[master_frame[\"funding_round_type\"].isin([\"seed\"])]\nprint(\"Average funding amount of seed type : \"+ str(seed_funding.raised_amount_usd.mean()))","d3da8d42":"# For angle funding\n\nangel_funding = master_frame[master_frame[\"funding_round_type\"].isin([\"angel\"])]\nprint(\"Average funding amount of angle type : \"+ str(seed_funding.raised_amount_usd.mean()))","9e20c276":"# For Private Equity\n\nprivate_equity_funding = master_frame[master_frame[\"funding_round_type\"].isin([\"private_equity\"])]\nprint(\"Average Private Equity Funding : \"+ str(private_equity_funding.raised_amount_usd.mean()))","32e49aac":"# Group by the data as per the fund rounding type\n\nfunding_round_type = master_frame.groupby('funding_round_type').raised_amount_usd.mean().reset_index()\nfunding_round_type","03026a36":"# Filter the data so it only contains the chosen investment type\n\nfunding_round_type = funding_round_type.loc[(funding_round_type.raised_amount_usd >= 5000000) & (funding_round_type.raised_amount_usd <= 15000000)]\nfunding_round_type","c6747d2e":"# The top nine countries which have received the highest total funding (across ALL sectors for the chosen investment type)\n\nventure_cc = venture_funding.groupby(\"country_code\").raised_amount_usd.sum().reset_index()\nventure_cc.sort_values(['raised_amount_usd'], axis = 0, ascending = False, inplace = True)\ntop9 = venture_cc.head(9)\ntop9","866cfa0e":"# The top three English-speaking countries in the data frame top9 are\n\nenglish_country_list_codes = ['USA','AUS','CAN','IND','BMU','GBR','NZL','GIB','IRL']\ntop_3 = top9.loc[top9.country_code.isin(english_country_list_codes)].head(3)\ntop_3","66a3acfc":"# Extracting the primary sector of each category list from the category_list column\n\nsectors_seperator = lambda x:x.split('|')[0].title()\nmaster_frame['primary_sector'] = master_frame.category_list.apply(sectors_seperator)","e6b88e63":"# Read the mapping.csv file & replace all the na & 2.na values with 0\n\nmapping = pd.read_csv('D:..\/input\/mapping.csv')\nmapping = mapping[pd.notnull(mapping['category_list'])]\nmapping.category_list = mapping.category_list.replace({'0':'na', '2.na' :'2.0'}, regex=True)\nmapping.head()","72918882":"mapping = pd.melt(mapping, id_vars =['category_list'], value_vars =['Manufacturing','Automotive & Sports','Cleantech \/ Semiconductors','Entertainment','Health','News, Search and Messaging','Others','Social, Finance, Analytics, Advertising']) \nmapping.head(8)","2769f078":"mapping = mapping[~(mapping.value == 0)]\nmapping = mapping.drop('value', axis = 1)\nmapping.head(8)","4a37bdd8":"mapping = mapping.rename(columns = {\"variable\":\"main_sector\"})\nmapping.head()","dee08008":"# Merged data frame with each primary sector mapped to its main sector\n\nmaster_frame_sector = pd.merge(master_frame, mapping, how = 'inner', on = 'category_list')\nmaster_frame_sector.head(8)","ca808769":"# For D1\n\nD1_SA2 = master_frame_sector.loc[(master_frame_sector.country_code == \"USA\") & (master_frame_sector.funding_round_type == \"venture\") & \n                             (master_frame_sector.raised_amount_usd >= 5000000) & (master_frame_sector.raised_amount_usd <= 15000000), :]","0ea14601":"# The total amount invested for each main sector in a separate column\n\nD1_total_sum = D1_SA2.groupby(\"main_sector\").raised_amount_usd.sum().sort_values(ascending = False).to_frame(name='total_sum_invested')","7e983e60":"# The total number (or count) of investments for each main sector in a separate column\n\nD1_total_count = D1_SA2.groupby(\"main_sector\").raised_amount_usd.count().sort_values(ascending = False).to_frame(name='count')","ec2ac6c7":"# Merging frames to created final D1\n\nD1_SA2 = pd.merge(D1_SA2, D1_total_count, how='inner', on='main_sector')\nD1 = pd.merge(D1_SA2, D1_total_sum, how='inner', on='main_sector')\nD1.head(8)","5a6f14e0":"# For D2\n\nD2_SA2 = master_frame_sector.loc[(master_frame_sector.country_code==\"GBR\") & (master_frame_sector.funding_round_type==\"venture\") & \n                             (master_frame_sector.raised_amount_usd >=5000000) & (master_frame_sector.raised_amount_usd <= 15000000), :]","95961ad2":"# The total amount invested for each main sector in a separate column\n\nD2_total_sum = D2_SA2.groupby(\"main_sector\").raised_amount_usd.sum().sort_values(ascending = False).to_frame(name='total_sum_invested')","c3791c72":"# The total number (or count) of investments for each main sector in a separate column\n\nD2_total_count = D2_SA2.groupby(\"main_sector\").raised_amount_usd.count().sort_values(ascending = False).to_frame(name='count')","0bef63aa":"# Merging frames to created final D2\n\nD2_SA2 = pd.merge(D2_SA2, D2_total_count, how='inner', on='main_sector')\nD2 = pd.merge(D2_SA2, D2_total_sum, how='inner', on='main_sector')\nD2.head(8)","20b12421":"# For D3\n\nD3_SA2 = master_frame_sector.loc[(master_frame_sector.country_code == \"IND\") & (master_frame_sector.funding_round_type == \"venture\") & \n                                  (master_frame_sector.raised_amount_usd >= 5000000) & (master_frame_sector.raised_amount_usd <= 15000000), :]","4bc8865c":"# The total amount invested for each main sector in a separate column\n\nD3_total_sum = D3_SA2.groupby(\"main_sector\").raised_amount_usd.sum().sort_values(ascending = False).to_frame(name='total_sum_invested')","5bcf9814":"# The total number (or count) of investments for each main sector in a separate column\n\nD3_total_count = D3_SA2.groupby(\"main_sector\").raised_amount_usd.count().sort_values(ascending = False).to_frame(name='count')","0a5f0d04":"# Merging frames to created final D3\n\nD3_SA2 = pd.merge(D3_SA2, D3_total_count, how='inner', on='main_sector')\nD3 = pd.merge(D3_SA2, D3_total_sum, how='inner', on='main_sector')\nD3.head(8)","a42f02ab":"# 1. Total number of investments (count)\n\nprint(\"Total number of investments for Country1 : \" + str(D1.raised_amount_usd.count()))\nprint(\"Total number of investments for Country2 : \" + str(D2.raised_amount_usd.count()))\nprint(\"Total number of investments for Country3 : \" + str(D3.raised_amount_usd.count()))","a2bb0648":"# 2. Total amount of investment (USD)\n\nprint(\"Total amount of investments for Country1 : \" + str(D1.raised_amount_usd.sum()))\nprint(\"Total amount of investments for Country2 : \" + str(D2.raised_amount_usd.sum()))\nprint(\"Total amount of investments for Country3 : \" + str(D3.raised_amount_usd.sum()))","2a37ea94":"#  3.Top sector (based on count of investments) for all the 3 countries\n\nD1_total_count_investments = D1.groupby(\"main_sector\").total_sum_invested.count().sort_values(ascending = False).to_frame(name = 'total_count')\nprint(\"Top 3 sector for Country1 :\")\nprint(D1_total_count_investments.head(3))\nCountry1 = D1_total_count_investments.sum()\nprint(Country1)","cae342bc":"D2_total_count_investments = D2.groupby(\"main_sector\").total_sum_invested.count().sort_values(ascending = False).to_frame(name = 'total_count')\nprint(\"Top 3 sector for Country2 :\")\nprint(D2_total_count_investments.head(3))\nCountry2 = D2_total_count_investments.sum()\nprint(Country2)","f7a4863c":"D3_total_count_investments = D3.groupby(\"main_sector\").total_sum_invested.count().sort_values(ascending = False).to_frame(name='total_count')\nprint(\"Top 3 sector for Country3 :\")\nprint(D3_total_count_investments.head(3))\nCountry3 = D3_total_count_investments.sum()\nprint(Country3)","41cb94c2":"print(\"Top 3 sector for Country1 :\")\nD1_total_count_investments.head(3)","2e489703":"print(\"Top 3 sector for Country2 :\")\nD2_total_count_investments.head(3)","f59a9265":"print(\"Top 3 sector for Country3 :\")\nD3_total_count_investments.head(3)","c993370e":"#  4. Second-best sector (based on count of investments)\n\nprint(\"Second best sector for Country1 :\")\nD1_total_count_investments.iloc[1:2]","bd896feb":"print(\"Second best sector for Country2 :\")\nD2_total_count_investments.iloc[1:2]","c999e65a":"print(\"Second best sector for Country3 :\")\nD3_total_count_investments.iloc[1:2]","f0591080":"# 5. Third-best sector (based on count of investments)\n\nprint(\"Third best sector for Country1 :\")\nD1_total_count_investments.iloc[2:3]","b80e6ccc":"print(\"Third best sector for Country2 :\")\nD2_total_count_investments.iloc[2:3]","3eb30bb4":"print(\"Third best sector for Country3 :\")\nD3_total_count_investments.iloc[2:3]","b8d2540d":"# 6. Number of investments in the top sector (refer to point 3)\n\nCountry1 = D1_total_count_investments.iloc[:1]\nCountry1","0af17917":"Country2 = D2_total_count_investments.iloc[:1]\nCountry2","677c7f6a":"Country3 = D3_total_count_investments.iloc[:1]\nCountry3","f989d36a":"# 7. Number of investments in the second-best sector (refer to point 4)\n\nCountry1 = D1_total_count_investments.iloc[1:2]\nCountry1","c643974c":"Country2 = D2_total_count_investments.iloc[1:2]\nCountry2","6a9c17ea":"Country3 = D2_total_count_investments.iloc[1:2]\nCountry3","89c9fdf8":"# 8. Number of investments in the third-best sector (refer to point 5)\n\nCountry1 = D3_total_count_investments.iloc[2:3]\nCountry1","5a3a62e1":"Country2 = D2_total_count_investments.iloc[2:3]\nCountry2","2b129dc8":"Country3 = D3_total_count_investments.iloc[2:3]\nCountry3","43b696f5":"# 9. For the top sector count-wise (point 3), which company received the highest investment?\n\nD1_val = D1[D1.main_sector == \"Others\"]\nD1_val = D1_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD1_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd1_top_list = (D1_val.iloc[0:1, 1:3].values.tolist())[0]\n\nD2_val = D2[D2.main_sector == \"Others\"]\nD2_val = D2_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD2_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd2_top_list = (D2_val.iloc[0:1, 1:3].values.tolist())[0]\n\nD3_val = D3[D3.main_sector == \"Others\"]\nD3_val = D3_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD3_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd3_top_list = (D3_val.iloc[0:1, 1:3].values.tolist())[0]\n\nprint(\" '{0}' company recived highest investments for Country1 worth total (sum) $\".format(d1_top_list[0]),d1_top_list[1])\nprint(\" '{0}' company recived highest investments for Country2 worth total (sum) $\".format(d2_top_list[0]),d2_top_list[1])\nprint(\" '{0}' company recived highest investments for Country3 worth total (sum) $\".format(d3_top_list[0]),d3_top_list[1])","79c3e951":"# 10. For the second-best sector count-wise (point 4), which company received the highest investment?\n\nD1_val = D1[D1.main_sector == \"Social, Finance, Analytics, Advertising\"]\nD1_val = D1_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD1_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd1_top_list = (D1_val.iloc[0:1, 1:3].values.tolist())[0]\n\nD2_val = D2[D2.main_sector == \"Social, Finance, Analytics, Advertising\"]\nD2_val = D2_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD2_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd2_top_list = (D2_val.iloc[0:1, 1:3].values.tolist())[0]\n\nD3_val = D3[D3.main_sector == \"Social, Finance, Analytics, Advertising\"]\nD3_val = D3_val.groupby([\"company_permalink\",\"name\"]).raised_amount_usd.sum().reset_index()\nD3_val.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nd3_top_list = (D3_val.iloc[0:1, 1:3].values.tolist())[0]\n\nprint(\" '{0}' company recived highest investments for Country1 worth total (sum) $\".format(d1_top_list[0]),d1_top_list[1])\nprint(\" '{0}' company recived highest investments for Country2 worth total (sum) $\".format(d2_top_list[0]),d2_top_list[1])\nprint(\" '{0}' company recived highest investments for Country3 worth total (sum) $\".format(d3_top_list[0]),d3_top_list[1])","776c3318":"# A plot showing the fraction of total investments (globally) in angel, venture, seed, and private equity, and the average amount of investment in each funding type.\n\nplotting_frame = master_frame_sector[master_frame_sector[\"funding_round_type\"].isin([\"angle\",\"venture\",\"seed\",\"private_equity\"])]\nplotting_frame = plotting_frame.loc[(plotting_frame.raised_amount_usd >=5000000) & (plotting_frame.raised_amount_usd <= 15000000),:]\nsns.violinplot(x = 'funding_round_type', y = 'raised_amount_usd', split = True, inner = \"quart\", data = plotting_frame)\nsns.despine(left = True)\nplt.title('Fraction of total investments')\nplt.yscale('log')\nplt.show()","77cb74f8":"# A plot showing the top 9 countries against the total amount of investments of funding type FT.\n\nplotting = top9.set_index(\"country_code\")\nplotting.plot.bar(logy = True);\nplotting","aec84ac1":"# A plot showing the number of investments in the top 3 sectors of the top 3 countries on one chart (for the chosen investment type FT).\n\nD1_plot = D1\nD1_plot = D1_plot.groupby(\"main_sector\").raised_amount_usd.count().reset_index()\nD1_plot.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nD1_plot = D1_plot.head(3)\n\nD2_plot = D2\nD2_plot = D2_plot.groupby(\"main_sector\").raised_amount_usd.count().reset_index()\nD2_plot.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nD2_plot = D2_plot.head(3)\n\nD3_plot = D3\nD3_plot = D3_plot.groupby(\"main_sector\").raised_amount_usd.count().reset_index()\nD3_plot.sort_values([\"raised_amount_usd\"], axis = 0, ascending = False, inplace = True)\nD3_plot = D3_plot.head(3)","58e879c3":"D12 = pd.merge(D1_plot, D2_plot, how = 'outer', on = 'main_sector')\nD123 = pd.merge(D12, D3_plot, how = 'outer', on = 'main_sector')","d6bb55a3":"D123 = D123.rename(columns = {\"raised_amount_usd_x\": \"USD\", \"raised_amount_usd_y\": \"GBR\" ,\"raised_amount_usd\": \"IND\"})\nD123= D123.set_index(\"main_sector\")\nD123.fillna(0)","d78387f8":"D123.T.plot.bar(logy = True)","c2e4558f":"# CHECKPOINT - 3 : Country Analysis","d02fc38b":"Create the three dataframes D1, D2 and D3","c01d9cee":"# CHECKPOINT - 5 : Sector Analysis 2","3476e39d":"How many unique companies are present in companies ?","7a408c66":"How many unique companies are present in rounds2 ?","2c611ce3":"Average funding amount of Venture , Seed , Angle & Private Equity :","52075b0f":"# CHECKPOINT - 1 : Data Cleaning","b705b79c":"In the companies data frame, the column which can be used as the unique key for each company is","364307ee":"## Business and Data Understanding","8e4fa5e7":"Sector-wise Investment Analysis","3de8c2c7":"Now load the companies and rounds data into two data frames and name them companies and rounds2 respectively.","bcc56416":"Merging Data Frames [How many observations are present in master_frame] ?","5567dc9e":"# CHECKPOINT - 6 : Plots","3f921f52":"# CHECKPOINT - 4 : Sector Analysis 1 ","fa90ac23":"The value of the investment amount for each of the four funding types are","a439c62b":"Spark Funds has two minor constraints for investments:\n\nIt wants to invest between 5 to 15 million USD per round of investment.\nIt wants to invest only in English-speaking countries because of the ease of communication with the companies it would invest in.\nFor our analysis, we have to consider a country to be English speaking only if English is one of the official languages in that country.","2d629c33":"# CHECKPOINT - 2 : Funding Type Analysis","24d90616":"The objective is to identify the best sectors, countries, and a suitable investment type for making investments. The overall strategy is to invest where others are investing, implying that the 'best' sectors and countries are the ones 'where most investors are investing'.","18446e81":"# END","0b2db565":"# Investment Analysis Assignment","e1cd4adb":"Considering that Spark Funds wants to invest between 5 to 15 million USD per investment round, so the investment type which is more suitable for it,"}}