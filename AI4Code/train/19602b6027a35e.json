{"cell_type":{"d48aa341":"code","6c45f145":"code","8b32e240":"code","c54ce806":"code","1bf1dd2e":"code","f26e09e6":"code","0ba5f6a0":"code","bb587622":"code","d0956e7a":"code","ac2d1c45":"code","0110f61c":"code","47b1dec4":"code","4f9c71ea":"code","d1858a1d":"code","ef634bfd":"code","d058da89":"code","2e2948dc":"code","182061f4":"code","8d6259c9":"code","5da8aae0":"code","4423c97b":"code","356e15b7":"code","64405bd7":"code","734148b9":"code","d679376b":"code","958e1998":"code","96b35806":"code","5f408040":"code","7ab606d1":"code","256c78a4":"code","99f054ac":"code","d652d883":"code","3c67b861":"code","2530e0f0":"code","8c9fc48c":"code","25947fc8":"code","7a463f4a":"markdown","73e54d3e":"markdown","cc1f8183":"markdown","d8d7b328":"markdown","6296a6dc":"markdown","abd2a0fe":"markdown","0c1e0720":"markdown","22192732":"markdown","bb335fd9":"markdown","9e280f98":"markdown","14c5f2b7":"markdown","4256aac8":"markdown","d7077f80":"markdown","63868ef1":"markdown","28ca883b":"markdown","173fdc7a":"markdown","67ad15d6":"markdown","b413abfb":"markdown","e8d6b89e":"markdown","bad40410":"markdown","510b605d":"markdown","7b356d1a":"markdown","c31f3495":"markdown","dfaf95bd":"markdown","f0dbff13":"markdown","17a462bc":"markdown","729b39f7":"markdown","642357da":"markdown","4d28bf08":"markdown","17282d75":"markdown","7aac08f9":"markdown","a45c605c":"markdown","5953196d":"markdown","4a829df5":"markdown","c3197097":"markdown"},"source":{"d48aa341":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set(style=\"darkgrid\")\ncolors = [\"amber\", \"windows blue\", \"greyish\", \"faded green\", \"dusty purple\"]\nsns.set_palette(sns.xkcd_palette(colors))","6c45f145":"sns.set_context(\"notebook\", 1.5)\nalpha = 0.7","8b32e240":"df0 = pd.read_csv('..\/input\/master.csv')","c54ce806":"df0.head()","1bf1dd2e":"df0.info()","f26e09e6":"# Number unique countries\ndf0['country'].nunique()","0ba5f6a0":"#Change columns names\ndf0.rename(columns={'suicides_no':'suicides', 'suicides\/100k pop':'suicides\/100k',\\\n                   ' gdp_for_year ($) ':'gdp\/year ', 'gdp_per_capita ($)':'gdp\/capita'}, inplace=True)","bb587622":"df0.head()","d0956e7a":"plt.figure(figsize=(25,13))\n# By sex\nplt.subplot(221)\nsns.countplot(x='sex', data=df0, alpha=alpha, order=['female','male'])\nplt.title('Data by sex', fontsize=20)\n# By age\nplt.subplot(223)\nsns.countplot(x='age', data=df0, alpha=alpha)\nplt.title('Data by age', fontsize=20)\n# By generation\nplt.subplot(224)\nsns.countplot(x='generation', data=df0, alpha=alpha)\nplt.title('Data by generation', fontsize=20)\n\nplt.tight_layout()\nplt.show()","ac2d1c45":"plt.figure(figsize=(10,25))\nsns.countplot(y='country', data=df0, alpha=alpha)\nplt.title('Data by country')\nplt.axvline(x=50, color='k')\nplt.show()","0110f61c":"country_amountData = df0.groupby('country').count()['year'].reset_index()\ncountry_amountData.sort_values(by='year', ascending=True). head(10)","47b1dec4":"country_selectList = country_amountData[country_amountData['year'] > 50]['country'].reset_index()","4f9c71ea":"df1 = pd.merge(df0, country_selectList, how='outer', indicator=True)\ndf1 = df1[df1['_merge']=='both']\ndf1.nunique()","d1858a1d":"plt.figure(figsize=(25,8))\nsns.countplot(x='year', data=df1, alpha=alpha)\nplt.title('Data by year')\nplt.axhline(y=200, color='k')\nplt.show()","ef634bfd":"df2 = df1[df1['year'] != 2016]","d058da89":"plt.figure(figsize=(10,5))\nsns.heatmap(df2.isnull(), yticklabels=False, cbar=False, cmap='viridis')\nplt.show()","2e2948dc":"number_NAN = len(df2) - df2['HDI for year'].count()\nnumber_noNAN = len(df2)\nnumber_NAN * 100 \/ number_noNAN","182061f4":"df = df2.drop('HDI for year', axis=1)\ndf.head()","8d6259c9":"df.drop(['country-year', 'index', '_merge'], axis=1, inplace=True)","5da8aae0":"plt.figure(figsize=(10,5))\nsns.heatmap(df.isnull(), yticklabels=False, cbar=False, cmap='viridis')\nplt.show()","4423c97b":"byCountry = df.groupby('country').mean().sort_values('suicides\/100k', ascending=False).reset_index()","356e15b7":"plt.figure(figsize=(10,25))\nsns.barplot(x='suicides\/100k', y ='country', data=byCountry)\nplt.axvline(x = byCountry['suicides\/100k'].mean(),color = 'red', ls='--', linewidth=2)\nplt.title('Suicides per 100k (by country)')\nplt.show()","64405bd7":"byYear = df.groupby('year').mean().reset_index()","734148b9":"plt.figure(figsize=(15,5))\nsns.lineplot(x='year', y='suicides\/100k', data=byYear, color='navy')\nplt.axhline(byYear['suicides\/100k'].mean(), ls='--', color='red')\nplt.title('Suicides per 100k (by year)')\nplt.xlim(1985,2015)\nplt.show()","d679376b":"bySex     = df.groupby('sex').mean().reset_index()\nbySexYear = df.groupby(['sex','year']).mean().reset_index()\nbySexAge = df.groupby(['sex','age']).mean().sort_values('suicides\/100k', ascending=True).reset_index()\nbySexGeneration = df.groupby(['sex','generation']).mean().sort_values('suicides\/100k', ascending=True).reset_index()","958e1998":"plt.figure(figsize=(20,15))\n# By sex\nplt.subplot(221)\nsns.barplot(x='sex', y='suicides\/100k', data=bySex, alpha=alpha)\nplt.title('Suicides per 100k, by sex')\n# Time veolution by sex\nplt.subplot(222)\nsns.lineplot(x='year', y='suicides\/100k', data=bySexYear, hue='sex')\nplt.xlim(1985,2015)\nplt.title('Evolution suicides per 100k, by sex')\n# By sex and age\nplt.subplot(223)\nsns.barplot(x='sex', y='suicides\/100k', data=bySexAge, hue='age', alpha=alpha)\nplt.title('Suicides per 100k, by sex and age')\n# By sex and generation\nplt.subplot(224)\nsns.barplot(x='sex', y='suicides\/100k', data=bySexGeneration, hue='generation', alpha=alpha)\nplt.title('Suicides per 100k, by sex and generation')\n\nplt.tight_layout()\nplt.show()","96b35806":"byCountrySex = df.groupby(['country','sex']).mean().reset_index()\nbyCountrySex.head()\nplt.figure(figsize=(10,30))\nsns.barplot(y='country', x='suicides\/100k', data=byCountrySex, hue='sex')\nplt.title('Suicides per 100k (by country and by sex)')\nplt.show()","5f408040":"for country in byCountrySex['country']:\n    suicides_female = byCountrySex[(byCountrySex['sex']=='female') & \\\n                                   (byCountrySex['country']==country)]['suicides\/100k']\n    suicides_male   = byCountrySex[(byCountrySex['sex']=='male')   \\\n                                   & (byCountrySex['country']==country)]['suicides\/100k']\n    if suicides_female.iloc[0] > suicides_male.iloc[0]:\n        print(country)","7ab606d1":"byAge     = df.groupby('age').mean().sort_values('suicides\/100k', ascending=True).reset_index()\nbyAgeYear = df.groupby(['age','year']).mean().sort_values('suicides\/100k', ascending=True).reset_index()\nbyAgeSex = df.groupby(['age','sex']).mean().sort_values('suicides\/100k', ascending=True).reset_index()\nbyAgeGen = df.groupby(['age','generation']).mean().sort_values('suicides\/100k', ascending=True).reset_index()","256c78a4":"plt.figure(figsize=(20,15))\n# By age\nplt.subplot(221)\nsns.barplot(x='age', y='suicides\/100k', data=byAge, alpha=alpha)\nplt.title('Suicides per 100k, by age')\n# Time evolution by age\nplt.subplot(222)\nsns.lineplot(x='year', y='suicides\/100k', data=byAgeYear, hue='age')\nplt.xlim(1985,2015)\nplt.title('Evolution suicides per 100k, by age')\n# \nplt.subplot(223)\nsns.barplot(x='age', y='suicides\/100k', data=byAgeSex, hue='sex', alpha=alpha)\nplt.subplot(224)\nsns.barplot(x='age', y='suicides\/100k', data=byAgeGen, hue='generation', alpha=alpha)\n\nplt.tight_layout()\nplt.show()","99f054ac":"g = sns.jointplot(x=\"gdp\/capita\", y=\"suicides\/100k\", data=byCountry, kind='regresion', \\\n              xlim=(-100,80000), ylim=(0,45), color='blue')","d652d883":"spain = df0[df0['country']=='Spain']","3c67b861":"spain_byYear = spain.groupby('year').mean().reset_index()\nspain_bySexYear = spain.groupby(['sex','year']).mean().reset_index()\nspain_byAgeYear = spain.groupby(['age','year']).mean().reset_index()","2530e0f0":"plt.figure(figsize=(20,15))\n\nplt.subplot(211)\nsns.lineplot(x='year', y='suicides\/100k', data=spain_byYear, color='navy')\nplt.axhline(spain_byYear['suicides\/100k'].mean(), ls='--', color='red')\nplt.axvline(x=2008, ls='-', color='black')\nplt.axvline(x=2014, ls='-', color='black')\nplt.title('Suicides per 100k in Spain')\nplt.xlim(1985,2015)\nplt.xlabel('')\n\nplt.subplot(212)\nsns.lineplot(x='year', y='gdp\/capita', data=spain_byYear, color='navy')\nplt.axhline(spain_byYear['gdp\/capita'].mean(), ls='--', color='red')\nplt.title('GDP in Spain')\nplt.xlim(1985,2015)\nplt.axvline(x=2008, ls='-', color='black')\nplt.axvline(x=2014, ls='-', color='black')\n\nplt.tight_layout\nplt.show()","8c9fc48c":"g = sns.jointplot(x=\"gdp\/capita\", y=\"suicides\/100k\", data=spain_byYear, kind='regresion', color='blue')","25947fc8":"plt.figure(figsize=(25,10))\nplt.subplot(121)\nsns.lineplot(x='year', y='suicides\/100k', data=spain_byAgeYear, hue='age')\nplt.axvline(x=2008, ls='-', color='black')\nplt.axvline(x=2014, ls='-', color='black')\nplt.title('Suicides per 100k in Spain, by age')\n\nplt.subplot(122)\nsns.lineplot(x='year', y='suicides\/100k', data=spain_bySexYear, hue='sex')\nplt.xlim(1985,2015)\nplt.axvline(x=2008, ls='-', color='black')\nplt.axvline(x=2014, ls='-', color='black')\nplt.legend(loc='upper right')\nplt.title('Suicides per 100k in Spain, by sex')\n\nplt.show()","7a463f4a":"### Conclusions\n1. Although the number of suicides per 100k between 2008 and 2014 is below the mean over the years, it seems that there is an increment of the number of suicides from 2010 (two years later after the beginning of the crisis) to 2015. \n2. Clearly the GDP of Spain decreased between 2008 and 2015 due to the crisis. From the joinplot we can figure out that in Spain the GDP is related to the number of suicides (if the GDP increases the number of suicides decreases). Therefore, the decreased of the GDP between 2008 and 2014 could explain such increment in the number of suicides. \n3. It seems that in every age group the decreasing trend in the number of suicides changes after 2008.","73e54d3e":"### Conclusions\n1. We have deleted the years and countries which amount of data was almost negligible. \n2. The column HDI for year does not give us information because there is a 69% of nan's values. We have deleted this column.\n3. The amount of data by age and sex is equilibrate, not for generation, country and year.","cc1f8183":"# 3. Spanish case","d8d7b328":"##\u00a03.1. Suicides per 100k and its relation to the GDP","6296a6dc":"Finally we check that we have no missing values in the dataset we will analyze","abd2a0fe":"Because I am from Spain I would like to understand if the financial crisis from 2008 to 2014 (https:\/\/en.wikipedia.org\/wiki\/2008\u20132014_Spanish_financial_crisis) is reflected somehow in the suicides.","0c1e0720":"### Conclusions\n1. Lithuania, Sri Lanka, and Russia are the top 3 countries with more suicides per 100k.\n2. On the other hand, Jamaica, Antigua and Barbuda, and South Africa are the top 3 countries with less suicides per 100k.\n3. The number of suicides per 100k has a decresing trend after the peak in 1995. \n4. From 2004 the number of suicides per 100k is below average.\n5. It would be interesting to find the reason why the number of suicides per 100k increased from 1990 to 1995. ","22192732":"## 1.2. Data by country","bb335fd9":"### Conslusions\n1. Crearly men commit more suicide than women. \n2. The number of male suicides per 100k over the yers is higher than the female suicides. \n3. Nevertheless, the suicides per 100k from 1995 have decreased for both men and women. \n4. There is a correlation between the age and the number of suicides per 100k.\n5. G.I. and Silent generations have more suicides per 100k than the others. One would be able to think that this figure is confused because some generations are older than others; therefore the number of suicides for the older generations must be higher than the younger ones. Nevertheless, we have observed that the amount of data for G.I. Generation is lower than, for example, Millenials. \n5. Only in one country (Maldives) the number of female suicides per 100k is higher than the number of male suicides pero 100k. ","9e280f98":"## 2.1. Suicides by country","14c5f2b7":"## 1.4. Missing data","4256aac8":"## 2.5. Suicides and GPD","d7077f80":"### Conclusions\n1. The number of suicides per 100k increases with the age. \n2. The number of suicides per 100k decreases from 1995 to 2015 in all age groups except 5-14 year, which slightly increases.\n3. The peak of suicides in 1995 is more striking for people with ages +75. \n4. In all age groups there are more male suicides per 100k than female ones. ","63868ef1":"# 2. Global trends","28ca883b":"We can delete the columns we do not need: country-year, index and _merge","173fdc7a":"# 1. Data cleaning","67ad15d6":"The __69% of the values__ in that columns are __Nan's__. Therefore, we delete this column and then we rename the dataframe. ","b413abfb":"Therefore, __we have 93 countries from the original 101 to be considered in our analysis__. Now we move to the amount of data per year, which is plotted in the following figure.  Again, we will delete the year which its data is below the black line. In this case only 2016. ","e8d6b89e":"### Conclusions: \n1. It seems that there is no correlation between the gdp\/capita and the number of suicides per 100k.","bad40410":"## 1.1. Data by sex, age and generation","510b605d":"## 2.2. Suicides by year","7b356d1a":"## 3.2. Number of suicides per 100k and its relation to age and sex","c31f3495":"## 2.4. Suicides by age","dfaf95bd":"# ---------------------------------\n# Suicide Analysis (1985-2016)\n# ---------------------------------\n\n## 0. Load data\n## 1. Data cleaning\n## 2. Global trends\n        2.1. Suicides by counbtry\n        2.2. Suicides by year\n        2.3. Suicides by sex\n        2.4. Suicides by age\n## 3. Spanish case\n        3.1. Suicides per 100k and its relation to the GDP\n        3.2. Suicides per 100k and its relation to age and sex","f0dbff13":"From the last dataset we figure out that the data of __8 countries will be deleted__ (they have less than 50 amount of data).","17a462bc":"We plot the Nan's of the dataset.","729b39f7":"# 0. Load data ","642357da":"I delete the countries which amount of data is below the black line.","4d28bf08":"##\u00a01.3. Data by year","17282d75":"I create a dataframe by country. The columns are the mean of each variable. The red line in the plot gives us the mean over all countries. ","7aac08f9":"## 2.3. Suicides by sex","a45c605c":"#### Countries in which the number of female suicides is higher than the number male suicides","5953196d":"The amount of data by age and by sex is the same; not by generation. ","4a829df5":"In the following plots the red line represents the mean of the 'y variable' and the vertical black lines the years 2008 and 2014.","c3197097":"In the HDI for year column there are too many missing values. We can not figure out these values from the available data. "}}