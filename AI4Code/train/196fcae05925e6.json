{"cell_type":{"45127495":"code","ce57ed8b":"code","e94387d4":"code","05ba3d1b":"code","7b7ed1c9":"code","b060056e":"code","0a21b72f":"code","efaf328b":"code","ebfaedf5":"code","fa7b479f":"code","667a64a0":"code","f6951566":"code","92821313":"code","a7e93274":"markdown"},"source":{"45127495":"import os\nimport pandas as pd\nimport numpy as np\nfrom pathlib import Path\nfrom PIL import Image\nfrom tqdm.notebook import tqdm","ce57ed8b":"data_path = Path('..\/input\/prostate-cancer-grade-assessment\/')\nos.listdir(data_path)","e94387d4":"!cd ..\/input\/prostate-cancer-grade-assessment\/; du -h","05ba3d1b":"os.listdir(data_path\/'train_images')","7b7ed1c9":"import pandas as pd\ntrain_df = pd.read_csv(data_path\/'train.csv')\ntrain_df.head(10)","b060056e":"print('Number of whole-slide images in training set: ', len(train_df))","0a21b72f":"sample_image = train_df.iloc[np.random.choice(len(train_df))].image_id\nprint(sample_image)","efaf328b":"import openslide","ebfaedf5":"openslide_image = openslide.OpenSlide(str(data_path\/'train_images'\/(sample_image+'.tiff')))","fa7b479f":"openslide_image.properties","667a64a0":"img = openslide_image.read_region(location=(0,0),level=0,size=(openslide_image.level_dimensions[0][0],openslide_image.level_dimensions[0][1]))\nimg","f6951566":"Image.fromarray(np.array(img.resize((512,512)))[:,:,:3])","92821313":"for i in tqdm(train_df['image_id'],total=len(train_df)):\n    openslide_image = openslide.OpenSlide(str(data_path\/'train_images'\/(i+'.tiff')))\n    img = openslide_image.read_region(location=(0,0),level=2,size=(openslide_image.level_dimensions[2][0],openslide_image.level_dimensions[2][1]))\n    Image.fromarray(np.array(img.resize((512,512)))[:,:,:3]).save(i+'.jpeg')\n    ","a7e93274":"That's right, the images are a whopping 347 GB! This is expected with thousands of Whole-slide images (WSIs)."}}