{"cell_type":{"bd97ae4b":"code","6f0a784b":"code","1790b66a":"code","ba0738c4":"code","c4fb12bd":"code","217f77fd":"code","2e157eea":"code","50594f9c":"code","d09f0629":"code","5f65ca88":"code","387a0fca":"code","4ef45d51":"code","b5e9785a":"code","31759656":"code","001f185d":"code","801e3750":"code","3ca23e3b":"code","39c2ad7e":"code","515bf34b":"code","053d6c22":"code","57c45915":"code","154cccb0":"markdown","ac343883":"markdown","73da01b6":"markdown","7cd40611":"markdown","33f32708":"markdown","ecf4a888":"markdown","4a812150":"markdown","f53155b5":"markdown","c1367152":"markdown","e9c21b28":"markdown","e1049881":"markdown","8674e01f":"markdown","6b54f631":"markdown","659e7a72":"markdown","6b7d06ff":"markdown","02d56a23":"markdown","ddf997de":"markdown","7eca77c4":"markdown","b955ab4c":"markdown","d1b2ef15":"markdown","fd7a2bfd":"markdown"},"source":{"bd97ae4b":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport plotly\nfrom plotly.offline import iplot\nplotly.offline.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nfrom IPython.display import clear_output\nimport random\nimport time\nimport os\nprint(os.listdir(\"..\/input\"))","6f0a784b":"csv_list = os.listdir(\"..\/input\")\ndata_list = [x[:-4] for x in csv_list]\ndata_str_list = data_list.copy()\nfor i in range(0,len(csv_list)):\n    temp = \"..\/input\/\" + csv_list[i]\n    data_list[i] = pd.read_csv(temp)","1790b66a":"def printer(string):\n    for i in range(0,len(data_list)):\n        if data_str_list[i].count(string) > 0:\n            print(data_str_list[i],\"\\n\",data_list[i].columns,\"\\n\")\n\nprinter(\"dataset\")\nprinter(\"price\")","ba0738c4":"price_datas=[]\nfor i in range(0,len(data_list)):\n    if data_str_list[i].count(\"price\") > 0:\n        data_list[i][\"Name\"] = data_str_list[i][:-6]\n        data_list[i].columns = [col.replace(' ', '_') for col in data_list[i].columns]\n        #data_list[i].Date = pd.to_datetime(price_datas[i].Date, infer_datetime_format=True)\n        price_datas.append(data_list[i])\n\nprice_datas[0].columns","c4fb12bd":"print(\"type of dates:\\t\",type(price_datas[4].Date[0]))\nprice_datas[4].head()","217f77fd":"for i in range(0,len(price_datas)):\n    price_datas[i].Date = pd.to_datetime(price_datas[i].Date, infer_datetime_format=True)","2e157eea":"print(\"type of dates:\\t\",type(price_datas[4].Date[0]))\nprice_datas[4].head()","50594f9c":"price_comp_list = pd.concat(price_datas,ignore_index=True)\nprice_comp_list.head()","d09f0629":"price_comp_list.info()","5f65ca88":"#price_comp_list.Market_Cap.str.replace(\",\",\"\").astype(int)","387a0fca":"ClearData = price_comp_list.copy()\nClearData = ClearData[ClearData.Market_Cap != \"-\"]\nClearData.Market_Cap = ClearData.Market_Cap.str.replace(\",\",\"\").astype(int)\nClearData = ClearData[ClearData.Volume != \"-\"]\nClearData.Volume = ClearData.Volume.str.replace(\",\",\"\").astype(int)\nClearData.head()","4ef45d51":"ClearData.info()","b5e9785a":"pd.options.display.float_format = '{:,.2f}'.format\nMeanValues = ClearData.groupby(\"Name\").mean()\nMeanValues","31759656":"def PlotPieChart(Name,label,value):\n    trace = go.Pie(labels=label, values=value)\n    \n    data = [trace]\n    layout = dict(title = str(Name))\n    fig = dict(data=data, layout=layout)\n    iplot(fig)","001f185d":"PlotPieChart(\"Cryptocurrency MarketCaps\",MeanValues.index,MeanValues.Market_Cap)\nPlotPieChart(\"Cryptocurrency Volumes\",MeanValues.index,MeanValues.Volume)","801e3750":"def traceGraph(CryptocurrencyName):\n    ClearCrypto = ClearData[ClearData.Name == CryptocurrencyName].set_index(\"Date\")\n    \n    trace_high = go.Scatter(x=list(ClearCrypto.index),\n                            y=list(ClearCrypto.High),\n                            name='High',\n                            line=dict(color='#33CFA5'))\n\n    trace_high_avg = go.Scatter(x=list(ClearCrypto.index),\n                                y=[ClearCrypto.High.mean()]*len(ClearCrypto.index),\n                                name='High Average',\n                                visible=False,\n                                line=dict(color='#33CFA5', dash='dash'))\n\n    trace_low = go.Scatter(x=list(ClearCrypto.index),\n                           y=list(ClearCrypto.Low),\n                           name='Low',\n                           line=dict(color='#F06A6A'))\n\n    trace_low_avg = go.Scatter(x=list(ClearCrypto.index),\n                               y=[ClearCrypto.Low.mean()]*len(ClearCrypto.index),\n                               name='Low Average',\n                               visible=False,\n                               line=dict(color='#F06A6A', dash='dot'))\n\n    data = [trace_high, trace_high_avg, trace_low, trace_low_avg]\n\n    high_annotations=[dict(y=ClearCrypto.High.mean(),\n                           text='High Average:<br>'+str(ClearCrypto.High.mean()),\n                           ax=0, ay=-50),\n                      dict(x=ClearCrypto.High.idxmax(),\n                           y=ClearCrypto.High.max(),\n                           text='High Max:<br>'+str(ClearCrypto.High.max()),\n                           ax=0, ay=-50)]\n    low_annotations=[dict(y=ClearCrypto.Low.mean(),\n                          text='Low Average:<br>'+str(ClearCrypto.Low.mean()),\n                          ax=0, ay=50),\n                     dict(x=ClearCrypto.High.idxmin(),\n                          y=ClearCrypto.Low.min(),\n                          text='Low Min:<br>'+str(ClearCrypto.Low.min()),\n                          ax=0, ay=50)]\n\n    updatemenus = list([\n        dict(type=\"buttons\",\n             active=-1,\n             buttons=list([\n                dict(label = 'High',\n                     method = 'update',\n                     args = [{'visible': [True, True, False, False]},\n                             {'title': CryptocurrencyName.capitalize() + ' High',\n                              'annotations': high_annotations}]),\n                dict(label = 'Low',\n                     method = 'update',\n                     args = [{'visible': [False, False, True, True]},\n                             {'title': CryptocurrencyName.capitalize() + ' Low',\n                              'annotations': low_annotations}]),\n                dict(label = 'Both',\n                     method = 'update',\n                     args = [{'visible': [True, True, True, True]},\n                             {'title': CryptocurrencyName.capitalize() + ' Both',\n                              'annotations': high_annotations+low_annotations}]),\n                dict(label = 'Reset',\n                     method = 'update',\n                     args = [{'visible': [True, False, True, False]},\n                             {'title': CryptocurrencyName.capitalize(),\n                              'annotations': []}])\n            ]),\n        )\n    ])\n\n    layout = dict(title=CryptocurrencyName.capitalize(), showlegend=False,\n                  updatemenus=updatemenus)\n\n    fig = dict(data=data, layout=layout)\n    iplot(fig)","3ca23e3b":"traceGraph(\"bitcoin\")","39c2ad7e":"#while True:\n#    traceGraph(MeanValues.index[random.randint(0,len(MeanValues.index))])\n#    time.sleep(10)\n#    clear_output(wait=True)","515bf34b":"def MarketCapGraph(currencyList):\n    gf = ClearData.groupby('Name')\n    data = []\n\n    for currency in currencyList[::-1]:\n        group = gf.get_group(currency)\n        dates = group['Date'].tolist()\n        date_count = len(dates)\n        marketCap = group['Market_Cap'].tolist()\n        zeros = [0] * date_count\n\n        data.append(dict(\n            type='scatter3d',\n            mode='lines',\n            x=dates + dates[::-1] + [dates[0]],  # year loop: in incr. order then in decr. order then years[0]\n            y=[currency] * date_count,\n            z=marketCap + zeros + [marketCap[0]],\n            name=currency,\n            line=dict(\n                width=4\n            ),\n        ))\n\n    layout = dict(\n        title='Cryptocurrencies Market Capitalizations',\n        scene=dict(\n            xaxis=dict(title='Dates'),\n            yaxis=dict(title='Cryptocurrencies'),\n            zaxis=dict(title='Market Capitalizations'),\n            camera=dict(\n                eye=dict(x=-1.7, y=-1.7, z=0.5)\n            )\n        )\n    )\n\n    fig = dict(data=data, layout=layout)\n    iplot(fig)","053d6c22":"MarketCapGraph(MeanValues.sort_values(by=['Market_Cap'],ascending=False).head(5).index)","57c45915":"MarketCapGraph(MeanValues.index)","154cccb0":"I learned that they are all csv(comma seperated values) files. Now I can save this list of file names to **csv_list**. Then cut them untill their last 4 chars which are **.csv** and save them into **data_list** as strings. I planned to point all datas using **data_list** so I am going to copy the **data_list** to **data_str_list** and  keep data names in **data_str_list** list. Otherwise the data names can be hard to reach later. I will create a for loop to read csv and assign **a data_list item** which is actually the file name","ac343883":"the bigger problem makes better performance :D. As we can see, the **Volume** and the **Market_Cap** columns keep **string(object)** values. We should convert them to *integer* or *float* to work with. But before doing this, we have to remove the commas from them. They are only for making reading easier. Otherwise we cant convert it.","73da01b6":"But we can also plot all currencies","7cd40611":"### Let us begin\nAt first, I import all our libraries and print our files in **input** folder.","33f32708":"I wrote my piechart as a function. The Market Capitalizations and the Volumes piechart should be as below","ecf4a888":"Come on, this is  enjoyful. I will show you why I am writing them as functions. If you want to try it, just remove \"**#**\"s. It gives you different random cryptocurrencies graphs every 10 second.","4a812150":"As an another aspect we can see the coin market capitalizations in a 3d graph. Again a function:","f53155b5":"# Hi,\n** in this kernel, I tried to visualize relations between the cryptocurrencies. I hope you like it. Enjoy this kernel and if you have a comment, feel free to do that. **","c1367152":"If I add a column keeps data name, I can able to merge the price datasets. Because they all have same columns and work on one dataframe is noticeably easier.\nSo I will keep price datas in another list(**price_datas**) and add them a name column that includes their data name but I dont need to keep the **_price** string. As above I am going to use same method, I will only give its string untill the last 6 char. I noticed that a column name has **space**, we can reaplace the spaces with **_**. ","e9c21b28":"The above code fails because the data actually contains **NaN** objects but there is a \"**-**\" not a **Null**. Lets give some try for making it more clear. I will copy the data to another dataframe, because I don't want to distrupt my data. We can name it **ClearData** and drop the **NaN** rows on it","e1049881":"When I anlyzed the file names, I saw that they includes **2 special key:[\"dataset\",\"price\"]**. I am going to create a printer function which takes a string as an argument. Searches for items include that string in **data_str_list**. Print the item and *the columns of data at same order in* **data_list** so I can able to see columns of same datasets sequentially.","8674e01f":"it seems OK for now. Lets try to see the mean values of every cryptocurrecy but before doing that, I dont like the *scientific notation* so I will use the format that I can understand.","6b54f631":"We can also the see cryptocurrencies low and high values separately. I will use *plotly* again. Of course as a function.","659e7a72":"Now, we can see that whether we are clear in reality or not","6b7d06ff":"everybody loves piecharts. I love plotly","02d56a23":"lets look its info","ddf997de":"As can be seen from above we fixed Date type.  I think this format is a lot better. Now it is time to concatenate the price datas. We can name it \"**price_comp_list**\".","7eca77c4":"# Thank you for reading, hope to see you again.","b955ab4c":"As we can see, this is a *string* variable and it is hard to work with it because it is hard to classify it by month,by years,by days etc.\nWe can convert it to *timestamp* and working with it can be easier","d1b2ef15":"We could also fix the date type but i wanted to show what i mean by fixing. So I made it comment line. Now lets look at the type of a sample price datas date columns first item (sorry for this annoying long sentence :D)","fd7a2bfd":"Lets see the best 5 currency on market capitalizations graph first\n\n**Note:** Use right click, left click and mouse wheel to walk around"}}