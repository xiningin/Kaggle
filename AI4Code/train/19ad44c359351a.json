{"cell_type":{"57129657":"code","2f843ca7":"code","38023791":"code","3c5cefbb":"code","50ab8c48":"code","96f72102":"code","476b21de":"code","91f0f123":"code","1d40564e":"code","fbbe8de0":"code","21b43d02":"markdown","2c34eda8":"markdown","75e3af27":"markdown","7a07af1a":"markdown","a012fbac":"markdown","d416b976":"markdown","485e9afa":"markdown","4a75df4a":"markdown","7cebcdf8":"markdown","4f5d662b":"markdown","31dbb7a4":"markdown","f5fb6421":"markdown","05036c0a":"markdown","d83223b5":"markdown","9c092fa5":"markdown","bee0df7a":"markdown","74c92140":"markdown","88515858":"markdown","e897640b":"markdown","fd2c5bc9":"markdown"},"source":{"57129657":"import pandas as pd\nimport numpy as np\nimport folium #for plotting maps\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport folium\n ","2f843ca7":"df = pd.read_csv('..\/input\/crimessanfrancisco\/Police_Department_Incidents_SanFrancisco_Year_2016_.csv')\ndf.head()","38023791":"df.describe()","3c5cefbb":"df.columns","50ab8c48":"df['PdDistrict'].head()","96f72102":"df.groupby('PdDistrict').count()","476b21de":"df = df.groupby('PdDistrict').count().iloc[:, [0]]\ndf","91f0f123":"df.reset_index(inplace=True)\ndf","1d40564e":"sf_geo = r'..\/input\/sanfranciscogeojson\/san-francisco.geojson' # geojson file\n\n# San Francisco latitude and longitude values\nlatitude = 37.77\nlongitude = -122.42\n\n# create map \nsanfran_map = folium.Map(location=[latitude, longitude], zoom_start=12)\n\n# display the map of San Francisco\nsanfran_map\n","fbbe8de0":"# Using cartodbpositron (cartodbdark_matter) to make the background white\n# folium.TileLayer('cartodbpositron').add_to(sanfran_map) \nsf_geo = r'..\/input\/sanfranciscogeojson\/san-francisco.geojson' # geojson file\n# generate choropleth map \nsanfran_map.choropleth(\n    geo_data=sf_geo,\n    data=df,\n    columns=['PdDistrict', 'IncidntNum'],\n    key_on='feature.properties.DISTRICT',\n    fill_color='RdPu', \n    fill_opacity=0.7, \n    line_opacity=0.2,\n    legend_name='Crime Rate in San Francisco'\n)\n\n# display map\nsanfran_map","21b43d02":"<a name=\"data\"><\/a>\n\n## Data ","2c34eda8":"### Map Visualization","75e3af27":"## Thank You for Reading!","7a07af1a":"# SanFrancisco Crime Rate Analysis <a name=\"top\"><\/a>\n\n***Amrutanshu Dash***\n\n---","a012fbac":"<a name=\"introduction\"><\/a>\n\n## Introduction\n---","d416b976":"Let's find out which column contains the area information.","485e9afa":"For our purpose, we will use the dataset of crimes, maintained by San Francisco Police Department for the year 2016 which I've downloaded from [here](https:\/\/s3-api.us-geo.objectstorage.softlayer.net\/cf-courses-data\/CognitiveClass\/DV0101EN\/labs\/Data_Files\/Police_Department_Incidents_-_Previous_Year__2016_.csv).\nTo create `Choropleth` map of San Francisco we'll need a `GeoJSON` file that marks the boundaries of the different neighborhoods in San Francisco, which I've downloaded from [here](https:\/\/cocl.us\/sanfran_geojson).\n\nEach row consists of 13 features:\n> 1. **IncidntNum**: Incident Number\n> 2. **Category**: Category of crime or incident\n> 3. **Descript**: Description of the crime or incident\n> 4. **DayOfWeek**: The day of week on which the incident occurred\n> 5. **Date**: The Date on which the incident occurred\n> 6. **Time**: The time of day on which the incident occurred\n> 7. **PdDistrict**: The police department district\n> 8. **Resolution**: The resolution of the crime in terms whether the perpetrator was arrested or not\n> 9. **Address**: The closest address to where the incident took place\n> 10. **X**: The longitude value of the crime location \n> 11. **Y**: The latitude value of the crime location\n> 12. **Location**: A tuple of the latitude and the longitude values\n> 13. **PdId**: The police department ID","4a75df4a":"Looks like the column `PdDistrict` contains the area information. Now let's group the dataframe w.r.t. `PdDistrict` column.","7cebcdf8":"We will use `Folium` to create `Choropleth` maps, for which we will require a `geo jason` file, which I've already downloaded.\n\nLet's first create a simple map of San Francisco","4f5d662b":"Let's take a look at the columns of the DataFrame.","31dbb7a4":"<a name=\"analysis\"><\/a> \n\n## Analysis","f5fb6421":"Looks nice. Let's reset the indexes and make `PdDistrict` a regular column.","05036c0a":"Before we get the data and start exploring it, let's download all the dependencies that we will need.","d83223b5":"In this work, we will visualize the crime rates in San Francisco using `Choropleth` map.\n\nA `Choropleth` map is a thematic map in which areas are shaded or patterned in proportion to the measurement of the statistical variable being displayed on the map, such as population density or per-capita income. The choropleth map provides an easy way to visualize how a measurement varies across a geographic area or it shows the level of variability within a region.","9c092fa5":"## Table of contents\n---\n\n* [Introduction](#introduction)\n* [Data](#data)\n* [Analysis](#analysis)\n* [Results](#results)","bee0df7a":"Let's now create the Choropleth map.","74c92140":"<a name=\"results\"><\/a>\n\n## Results","88515858":"Looks like most crimes occurs in the **Treasure Island** and **Soma** district.","e897640b":"By looking at the above result we can see that the column `IncidntNum` contains the total no. of incidents in the coresponding area. So let's only take the `\nPdDistrict` and `IncidntNum` columns into account.","fd2c5bc9":"Let's read the data using `read_csv` method."}}