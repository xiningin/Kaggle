{"cell_type":{"d4fb1db3":"code","99191dd8":"code","c6f954a7":"code","150f295d":"code","573a8671":"code","cd75e74a":"code","c95061f3":"code","1cdc31d7":"code","e38dfcea":"code","74d38328":"code","ad1fe1ae":"code","acd42578":"code","32e73f5a":"code","a990bd2c":"code","89ad64c8":"code","14980550":"code","e6972825":"code","f36625f3":"code","8f1867b8":"markdown","931386db":"markdown","217cd750":"markdown","e04e74bc":"markdown","347215e0":"markdown","963079fd":"markdown","8f30c25c":"markdown","d486d449":"markdown","19b61560":"markdown","a0fd1fbe":"markdown"},"source":{"d4fb1db3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","99191dd8":"import plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom   plotly.subplots import make_subplots\nfrom   plotly import subplots\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nfrom matplotlib.offsetbox import TextArea,DrawingArea,OffsetImage,AnnotationBbox\nfrom matplotlib.collections import PatchCollection\nfrom matplotlib.patches import PathPatch\nfrom matplotlib.patches import Polygon\nfrom matplotlib import image\nimport seaborn as sns","c6f954a7":"data_df = pd.read_csv('..\/input\/covid-vaccination-dataset\/vaccinations.csv')\ndata_df.head()\n","150f295d":"population_df = pd.read_csv('..\/input\/world-population\/2021_population.csv',thousands=',')\npopulation_df = population_df.sort_values(by='country')\npopulation_df.head()","573a8671":"data_df['month_year'] =pd.to_datetime(data_df['date']).dt.to_period('m')\ndata_df['month_year'] = data_df['month_year'].astype(str)\n","cd75e74a":"iran_df = data_df.loc[data_df['iso_code']=='IRN']\niran_df.head()","c95061f3":"#Get Iran Populatin from population DF\niran_population = population_df.loc[population_df['iso_code']=='IRN']['2021_last_updated']\niran_population = iran_population.iloc[0]","1cdc31d7":"#Get Countries which have +\/- 10 percent population compare with Iran\nsymmetic_countries = population_df.loc[(population_df['2021_last_updated'] < (iran_population * 1.1)) & (population_df['2021_last_updated'] >(iran_population * 0.9))]\nsymmetic_countries","e38dfcea":"neighbours = [\"AFG\",\"SUA\",\"ARE\",\"IRQ\",'AZE',\"TUR\",\"QAT\",\"PAK\",\"ARM\",\"TKM\",\"IRN\"]\nneighbor_countries = population_df.loc[population_df['iso_code'].isin(neighbours)]\nneighbor_countries\nsymmetric= ['COD','DEU',\"IRN\",\"TUR\"]\nsame_population = population_df.loc[population_df[\"iso_code\"].isin(symmetric)]\n","74d38328":"german_df = data_df.loc[data_df['iso_code']=='DEU']\nturkey_df = data_df.loc[data_df['iso_code']=='TUR']\ncongo_df  = data_df.loc[data_df['iso_code']=='COD']\nazer_df = data_df.loc[data_df['iso_code']=='AZE']\nafghan_df = data_df.loc[data_df['iso_code']=='AFG']\niraq_df = data_df.loc[data_df['iso_code']=='IRQ']\npakistan_df = data_df.loc[data_df['iso_code']=='PAK']\nqatar_df = data_df.loc[data_df['iso_code']=='QAT']\nsaudi_df = data_df.loc[data_df['iso_code']=='SUA']\nuae_df = data_df.loc[data_df['iso_code']=='ARE']\narmenia_df = data_df.loc[data_df['iso_code']==\"ARM\"]\nturkaman_df = data_df.loc[data_df['iso_code']==\"TKM\"]\n\nfig,axes = plt.subplots(ncols=2 , nrows =2 ,figsize=(20,10))\n\nsns.lineplot(y= german_df['total_vaccinations'],x=german_df['month_year'],label =\"Germany\",ax=axes[0,0])\nsns.lineplot(y= iran_df['total_vaccinations'],x=iran_df['month_year'],label=\"Iran\",ax=axes[0,0])\nsns.lineplot(y= turkey_df['total_vaccinations'],x=turkey_df['month_year'],label =\"Turkey\",ax=axes[0,0])\nsns.lineplot(y= congo_df['total_vaccinations'],x=congo_df['month_year'],label =\"Congo\",ax=axes[0,0])\naxes[0,0].set_title(\"Countries with 10 percent less or more population 1 Does Vaccinated \")\n\nsns.lineplot(y= german_df['people_fully_vaccinated'],x=german_df['month_year'],label =\"Germany\",ax=axes[0,1])\nsns.lineplot(y= iran_df['people_fully_vaccinated'],x=iran_df['month_year'],label=\"Iran\",ax=axes[0,1])\nsns.lineplot(y= turkey_df['people_fully_vaccinated'],x=turkey_df['month_year'],label =\"Turkey\",ax=axes[0,1])\nsns.lineplot(y= congo_df['people_fully_vaccinated'],x=congo_df['month_year'],label =\"Congo\",ax=axes[0,1])\naxes[0,1].set_title(\"Countries with 10 percent less or more population , Full Vaccinated\")\n\nsns.lineplot(y= azer_df['people_vaccinated_per_hundred'],x=azer_df['month_year'],label =\"Azerbaijan\",ax=axes[1,0])\nsns.lineplot(y= afghan_df['people_vaccinated_per_hundred'],x=afghan_df['month_year'],label =\"Afghanistan\",ax=axes[1,0])\nsns.lineplot(y= iraq_df['people_vaccinated_per_hundred'],x=iraq_df['month_year'],label =\"Iraq\",ax=axes[1,0])\nsns.lineplot(y= pakistan_df['people_vaccinated_per_hundred'],x=pakistan_df['month_year'],label =\"Pakistan\",ax=axes[1,0])\nsns.lineplot(y= qatar_df['people_vaccinated_per_hundred'],x=qatar_df['month_year'],label =\"Qatar\",ax=axes[1,0])\nsns.lineplot(y= saudi_df['people_vaccinated_per_hundred'],x=saudi_df['month_year'],label =\"Saudi Arabia\",ax=axes[1,0])\nsns.lineplot(y= uae_df['people_vaccinated_per_hundred'],x=uae_df['month_year'],label =\"UAE\",ax=axes[1,0])\nsns.lineplot(y= armenia_df['people_vaccinated_per_hundred'],x=armenia_df['month_year'],label =\"Armenia\",ax=axes[1,0])\nsns.lineplot(y= turkaman_df['people_vaccinated_per_hundred'],x=turkaman_df['month_year'],label =\"Turkamanistan\",ax=axes[1,0])\nsns.lineplot(y= iran_df['people_vaccinated_per_hundred'],x=iran_df['month_year'],label=\"Iran\",ax=axes[1,0])\naxes[1,0].set_title(\"People Vaccinated Per 100 people in Neighbors Countries\")\nplt.xlabel(\"Time\")\nplt.ylabel(\"People Vaccinated per 100  person\")\n\nsns.lineplot(y= azer_df['people_fully_vaccinated_per_hundred'],x=azer_df['month_year'],label =\"Azerbaijan\",ax=axes[1,1])\nsns.lineplot(y= afghan_df['people_fully_vaccinated_per_hundred'],x=afghan_df['month_year'],label =\"Afghanistan\",ax=axes[1,1])\nsns.lineplot(y= iraq_df['people_fully_vaccinated_per_hundred'],x=iraq_df['month_year'],label =\"Iraq\",ax=axes[1,1])\nsns.lineplot(y= pakistan_df['people_fully_vaccinated_per_hundred'],x=pakistan_df['month_year'],label =\"Pakistan\",ax=axes[1,1])\nsns.lineplot(y= qatar_df['people_fully_vaccinated_per_hundred'],x=qatar_df['month_year'],label =\"Qatar\",ax=axes[1,1])\nsns.lineplot(y= saudi_df['people_fully_vaccinated_per_hundred'],x=saudi_df['month_year'],label =\"Saudi Arabia\",ax=axes[1,1])\nsns.lineplot(y= uae_df['people_fully_vaccinated_per_hundred'],x=uae_df['month_year'],label =\"UAE\",ax=axes[1,1])\nsns.lineplot(y= armenia_df['people_fully_vaccinated_per_hundred'],x=armenia_df['month_year'],label =\"Armenia\",ax=axes[1,1])\nsns.lineplot(y= turkaman_df['people_fully_vaccinated_per_hundred'],x=turkaman_df['month_year'],label =\"Turkamanistan\",ax=axes[1,1])\nsns.lineplot(y= iran_df['people_fully_vaccinated_per_hundred'],x=iran_df['month_year'],label=\"Iran\",ax=axes[1,1])\naxes[1,1].set_title(\"People  full Vaccinated Per 100 people in Neighbors Countries\")\nplt.xlabel(\"Time\")\nplt.ylabel(\"People Vaccinated per 100  person\")\n\nplt.savefig(\"subplots1.jpg\",bbox_inches='tight',dpi=300,facecolor='w')","ad1fe1ae":"accumulatives = ['iso_code','total_vaccinations','people_vaccinated','people_fully_vaccinated','total_vaccinations_per_hundred','people_vaccinated_per_hundred','month_year']\nacc_df =data_df[accumulatives]\ncountry_breif = [\"iso_code\",\"country\",\"2021_last_updated\"]\ncountry_final = population_df[country_breif]\nacc_df = pd.merge(country_final,acc_df,on=\"iso_code\")\nacc_df.rename(columns={'2021_last_updated':'Population'},inplace=True)\n","acd42578":"last_data = acc_df.groupby('iso_code').max().sort_values(\"total_vaccinations\",ascending=False).dropna(subset=['total_vaccinations'])\nlast_data.head()","32e73f5a":"most_doses_vaccinated = last_data.sort_values(by='people_vaccinated',ascending=False).iloc[0:15]\nmost_fully_vaccinated = last_data.sort_values(by='people_fully_vaccinated',ascending=False).iloc[0:15]\ntotal_vaccination_per_hundred = last_data.sort_values(by='total_vaccinations_per_hundred',ascending=False).iloc[:15]\ntotal_vaccination_per_hundred =  total_vaccination_per_hundred.set_index('country')\npeople_vaccinated_per_hundred = last_data.sort_values(by=\"people_vaccinated_per_hundred\",ascending=False).iloc[:15]\npeople_vaccinated_per_hundred= people_vaccinated_per_hundred.set_index('country')","a990bd2c":"fig ,axes = plt.subplots(ncols=2,nrows=2,figsize=(16,10))\n# most_fully_vaccinated['people_fully_vaccinated'].plot(ax = axes[0,0],kind='bar')\nsns.barplot(data=most_fully_vaccinated,x=\"people_fully_vaccinated\",y=\"country\",ax=axes[0,0])\naxes[0,0].set_title(\"Most full vaccinated Countries\")\nmost_doses_vaccinated['total_vaccinations'].plot(ax=axes[0,1],color=\"grey\")\naxes[0,1].set_title(\"Most doses Injected Countries\")\ntotal_vaccination_per_hundred['total_vaccinations_per_hundred'].plot(ax=axes[1,1],kind=\"bar\",color=\"green\")\naxes[1,1].set_title(\"Full Vaccinated people Per 100 person\")\naxes[1,1].tick_params(labelrotation=45)\npeople_vaccinated_per_hundred['people_vaccinated_per_hundred'].plot(ax=axes[1,0],color ='red')\naxes[1,0].tick_params(labelrotation=45)\naxes[1,0].set_title(\"People Vaccinated Per 100 Person\")\nplt.savefig(\"subplots2.jpeg\",facecolor='w',dpi=300)","89ad64c8":"last_data['vaccinated_percent'] = last_data.people_vaccinated \/ last_data.Population * 100\nlast_data['full_vaccinated_percent'] = last_data.people_fully_vaccinated \/last_data.Population * 100\nneighbor_countries = last_data.loc[last_data.index.isin(neighbours)]\nsame_population = last_data.loc[last_data.index.isin(symmetric)]","14980550":"neighbor_countries =neighbor_countries.sort_values(by=\"vaccinated_percent\",ascending=False)\nsame_population = same_population.sort_values(by=\"vaccinated_percent\",ascending=False)\nlast_data = last_data.sort_values(by=\"vaccinated_percent\",ascending=False)\nlast_data_temp = last_data[:15]\nsame_population.reset_index(inplace=True)\nneighbor_countries.reset_index(inplace=True)\nlast_data.reset_index(inplace=True)\nlast_data_temp.reset_index(inplace=True)","e6972825":"fig,axes =plt.subplots(nrows=3 ,ncols=2,figsize=(20,16))\nbar1 = sns.barplot(data=neighbor_countries,x=\"iso_code\",y='vaccinated_percent',ax=axes[0,0],palette=\"rocket\")\nbar1.set_title(\"Vaccination Percentage in Neighbor Countries\")\nfor index,row  in neighbor_countries.iterrows():\n    bar1.text(row.name,row.vaccinated_percent,round(row.vaccinated_percent,2),color='black', ha=\"center\")\n    \nbar2 = sns.barplot(data=neighbor_countries,x='iso_code',y='full_vaccinated_percent',ax=axes[0,1],palette=\"rocket\")\nbar2.set_title(\"Full Vaccinated People percent in Neighbor countries\")\nfor index,row  in neighbor_countries.iterrows():\n    bar2.text(row.name,row.full_vaccinated_percent,round(row.full_vaccinated_percent,2),color='black', ha=\"center\")\n\nbar3 = sns.barplot(data=same_population,x=\"iso_code\",y='vaccinated_percent',ax=axes[1,0],palette=\"Set3\")\nbar3.set_title('Vaccination Percent countries with +\/- 10% population ')\nfor index,row  in same_population.iterrows():\n    bar3.text(row.name,row.vaccinated_percent,round(row.vaccinated_percent,2),color='black', ha=\"center\")\n    \n    \nbar4 = sns.barplot(data=same_population,x=\"iso_code\",y='full_vaccinated_percent',ax=axes[1,1],palette=\"Set3\")\nbar4.set_title(\"percent of people full vaccinated in countries with +\/- 10% population\")\nfor index,row  in same_population.iterrows():\n    bar4.text(row.name,row.full_vaccinated_percent,round(row.full_vaccinated_percent,2),color='black', ha=\"center\")\n\nbar5 =sns.barplot(data=last_data_temp,x=\"iso_code\",y=\"vaccinated_percent\",ax=axes[2,0],palette='RdPu')\n\nbar5.set_title(\"countries with most vaccination avarage\")\nfor index,row  in last_data_temp.iterrows():\n    bar5.text(row.name,row.vaccinated_percent,round(row.vaccinated_percent,2),color='black', ha=\"center\")\n\n\nbar6 =sns.barplot(data=last_data_temp,x=\"iso_code\",y=\"full_vaccinated_percent\",ax=axes[2,1],palette='RdPu')\nbar6.set_title(\"countries with most avarge in full vacination\")\nfor index,row  in last_data_temp.iterrows():\n    bar6.text(row.name,row.full_vaccinated_percent,round(row.full_vaccinated_percent,2),color='black', ha=\"center\")\n\n\nplt.savefig(\"subplots3.jpeg\",dpi=300,facecolor='w')","f36625f3":"fig=px.choropleth(last_data,locations=\"iso_code\",color=\"vaccinated_percent\",\n                  hover_name=\"country\",color_continuous_scale=\"balance\",\n                  projection=\"natural earth\",range_color=[100,0],\n                  title ='<span style=\"font-size:36px; font-family:Times New Roman\">Percentage of People  Vaccinated<\/span>',)\nfig.show()\nfig.write_html(\"index.html\")\n","8f1867b8":"# Read Population Last Data From Population Data Set","931386db":"# Compare Vaccination Trend","217cd750":"due to huge diifrent in polpulation total vaccination is not good enoughf measure so we wilol compare them with new measurment : people vaccinated for each 100 person ","e04e74bc":"# Fetch Iran Vaccination Data from Vaccination Dataframe","347215e0":"# Read Vaccination Data","963079fd":"# Get Accumulative data & last updated staus","8f30c25c":"Merge both datasets to Create Uniqe dataset on common field = country IS0_Code","d486d449":"# Vaccination Percentage","19b61560":"Parse Month and Data From Vaccination Data","a0fd1fbe":"# Neighbours Countries  & Countries with same Population "}}