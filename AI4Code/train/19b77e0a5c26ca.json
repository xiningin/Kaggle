{"cell_type":{"8d5fed41":"code","3a676dc5":"code","93dff93e":"code","dc805655":"code","01b9f2e1":"code","f2685502":"code","293eb5e7":"code","d479d817":"code","901eee1f":"code","457ec60a":"code","008cf56e":"code","644de42b":"code","58aa9b07":"code","58638957":"code","3d8d69a2":"code","e62c3a2a":"code","77c74ce7":"code","9792fa74":"code","c935abff":"code","0233bd98":"code","3bd8fa0a":"code","52f5d482":"code","a8fbd105":"code","095e09fa":"code","7a1a8afd":"code","11efa12c":"code","f3933a76":"code","972d33e0":"code","5ae59852":"code","2756c13a":"markdown","f4e724e6":"markdown","5c92b993":"markdown","319737d2":"markdown","9f674cc4":"markdown","1a692a11":"markdown","9658275a":"markdown","1b84142a":"markdown","6545221a":"markdown","384f57f5":"markdown","9ac46535":"markdown","209f21c5":"markdown","1cfef793":"markdown","ec9ddaeb":"markdown","90bbb4e2":"markdown","9d336098":"markdown","1f2f17fc":"markdown","c005b453":"markdown","3f9a60ac":"markdown","e6918466":"markdown","ea43c625":"markdown","97c8e908":"markdown","4b5691d1":"markdown","a0359005":"markdown","8ecfb3ee":"markdown","94933e36":"markdown","6082cce2":"markdown","c51d743f":"markdown","36497f8a":"markdown"},"source":{"8d5fed41":"#import the necessary libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","3a676dc5":"#Set up the format and styles for plots globally\nsns.set_style('white')\nplt.rc('axes', titlesize=13)\nplt.rc('axes', labelsize=12)\nplt.rc('xtick', labelsize=11)\nplt.rc('ytick', labelsize=11)\nplt.rc('legend', fontsize=11)\nplt.rc('font', size=10)","93dff93e":"#read the dataset from csv file\npath = '..\/input\/mobile-games-ab-testing\/cookie_cats.csv'\ndf = pd.read_csv(path)","dc805655":"#Display the first five rows of the dataset\ndf.head()","01b9f2e1":"#Display number of columns and rows\ndf.shape","f2685502":"#Check for duplicates\nif df.userid.nunique() == df.shape[0]:\n    print('There are no duplicated user ids in the dataset')\nelse:\n    print('There are some duplicated user ids in the dataset')","293eb5e7":"#Check for null values and types of variables in each column\ndf.info()","d479d817":"#Change type of Pandas Series\ndf.userid = df.userid.astype(str)","901eee1f":"#Check if the change was successful\ndf.userid.dtypes","457ec60a":"#Display descriptive statistics for the numerical values\ndf.describe()","008cf56e":"#Display unique values in the version column\ndf.version.unique()","644de42b":"#Create a separate dataframe for treatment group\ntreatment = df[df['version'] == 'gate_40']","58aa9b07":"#Create a separate dataframe for control group\ncontrol = df[df['version'] == 'gate_30']","58638957":"#Display the number of observations for the treatment group\ntreatment.shape[0]","3d8d69a2":"#Display the number of observations for the control group\ncontrol.shape[0]","e62c3a2a":"#Calculation of Day 1 retention rate for the control group and treatment group\ncontr_d1 = '{0:.2f}%'.format(control.retention_1.mean()*100)\ntrtm_d1 = '{0:.2f}%'.format(treatment.retention_1.mean()*100)\nprint('Day 1 retention rate for the control group is {} and for the treatment group is {}'.format(contr_d1, trtm_d1))","77c74ce7":"#Calculation of Day 7 retention rate for the control group and treatment group\ncontr_d7 = '{0:.2f}%'.format(control.retention_7.mean()*100)\ntrtm_d7 = '{0:.2f}%'.format(treatment.retention_7.mean()*100)\nprint('Day 7 retention rate for the control group is {} and for the treatment group is {}'.format(contr_d7, trtm_d7))","9792fa74":"#Calculation of day 1 retention rate for the control group\nretention_1_30 = control.retention_1.mean()\n#Calculation of day 1 retention rate for the treatment group\nretention_1_40 = treatment.retention_1.mean()\n#Calculation of observed difference between Day 1 Retention between control and treatment group\nobs_diff_1 = retention_1_40 - retention_1_30\n#Display the retention rates and observed difference\nprint('Day 1 Retention rate in the control group is {}'.format(retention_1_30))\nprint('Day 1 Retention rate in the treatment group is {}'.format(retention_1_40))\nprint('The difference in Day 1 Retention rate between control and treatment group is {}'.format(obs_diff_1))","c935abff":"#Create an empty list for the sampling distribution\ndiffs_1= []\n#Simulate the sampling distribution\nfor i in range(10000):\n    boot_sample = df.sample(df.shape[0], replace = True)\n    gate30_df_1 = boot_sample.query('version == \"gate_30\"')['retention_1'].mean()\n    gate40_df_1 = boot_sample.query('version == \"gate_40\"')['retention_1'].mean()\n    diffs_1.append(gate40_df_1 - gate30_df_1)","0233bd98":"#plot the histogram of difference in 1 day retention\nplt.figure(figsize=(16,5), tight_layout=True)\nax = sns.histplot(diffs_1, kde = True, kde_kws = {'bw_method':0.4})\nax.lines[0].set_color('black')\nplt.ylim(0,600);\nplt.title('Sampling Distribution for difference between control group\\'s Day 1 Retention and treatment group\\'s Day 1 Retention')\nplt.ylabel('Frequency')\nplt.xlabel('Difference');","3bd8fa0a":"#Creation of normal distribution centered at zero\nnull_vals_1 = np.random.normal(0, np.std(diffs_1), len(diffs_1))","52f5d482":"#Calculate p-value\np_val_1 = (null_vals_1 > obs_diff_1).mean()\n#Formatting the p-value\np_form_1 = '{0:.2f}%'.format(p_val_1*100)\nprint('P-value is equal to {}'.format(p_form_1))","a8fbd105":"#Plot the simulated distribution under the null hypothesis and p-value\nplt.figure(figsize=(16,5), tight_layout=True)\nax = sns.histplot(null_vals_1, kde = True, kde_kws = {'bw_method':0.4})\nax.lines[0].set_color('black')\nplt.axvline(obs_diff_1, color = 'r')\nplt.text(0.008, 500, \"P-value = {}\".format(p_form_1), color = 'black', size = 15)\nplt.ylim(0, 600)\nplt.title('Simulated Distribution under the Null Hypothesis')\nplt.ylabel('Frequency');","095e09fa":"#Calculation of day 7 retention rate for the control group\nretention_7_30 = control.retention_7.mean()\n#Calculation of day 7 retention rate for the treatment group\nretention_7_40 = treatment.retention_7.mean()\n#Calculation of observed difference between Day 1 Retention between control and treatment group\nobs_diff_7 = retention_7_40 - retention_7_30\n#Display the retention rates and observed difference\nprint('Day 7 Retention rate in the control group is {}'.format(retention_7_30))\nprint('Day 7 Retention rate in the treatment group is {}'.format(retention_7_40))\nprint('The difference between control group\\'s Day 7 Retention rate and treatment group\\'s Day 7 retention is {}'.format(obs_diff_7))","7a1a8afd":"#Create an empty list for the sampling distribution\ndiffs_7= []\n#Simulate the sampling distribution\nfor i in range(10000):\n    boot_sample = df.sample(df.shape[0], replace = True)\n    gate30_df_7 = boot_sample.query('version == \"gate_30\"')['retention_7'].mean()\n    gate40_df_7 = boot_sample.query('version == \"gate_40\"')['retention_7'].mean()\n    diffs_7.append(gate40_df_7 - gate30_df_7)","11efa12c":"#plot the histogram of difference in 7 day retention\nplt.figure(figsize=(16,5), tight_layout=True)\nax = sns.histplot(diffs_7, kde = True, kde_kws = {'bw_method':0.4})\nax.lines[0].set_color('black')\nplt.ylim(0,600);\nplt.title('Sampling Distribution for difference between control group\\'s Day 7 Retention and treatment group\\'s Day 7 Retention')\nplt.ylabel('Frequency')\nplt.xlabel('Difference');","f3933a76":"#Creation of normal distribution centered at zero\nnull_vals_7 = np.random.normal(0, np.std(diffs_7), len(diffs_7))","972d33e0":"#Calculate p-value\np_val_7 = (null_vals_7 > obs_diff_7).mean()\n#Formatting the p-value\np_form_7 = '{0:.2f}%'.format(p_val_7*100)\nprint('P-value is equal to {}'.format(p_form_7))","5ae59852":"#Plot the simulated distribution under the null hypothesis and p-value\nplt.figure(figsize=(16,5), tight_layout=True)\nax = sns.histplot(null_vals_7, kde = True, kde_kws = {'bw_method':0.4})\nax.lines[0].set_color('black')\nplt.axvline(obs_diff_7, color = 'r')\nplt.text(0.007, 500, \"P-value = {}\".format(p_form_7), color = 'black', size = 15)\nplt.ylim(0, 600)\nplt.title('Simulated Distribution under the Null Hypothesis')\nplt.ylabel('Frequency');","2756c13a":"![title](https:\/\/cdnb.artstation.com\/p\/assets\/images\/images\/013\/892\/253\/medium\/stefan-pruss-cats-workfile.jpg?1541540801)  ","f4e724e6":"Further I will calculate a p-value for the statistic, which is observed difference in Day 1 Retention rates of Control and Treatment group. I will do it by simulating the distribution under the Null hypothesis and then find the probability that the statistic came from this distribution. To simulate from the null, I will create a normal distribution centered at zero with the same standard deviation as the sampling distribution.","5c92b993":"Further I will calculate a p-value for the statistic, which is observed difference in Day 7 Retention rates of Control and Treatment group. I will do it by simulating the distribution under the Null hypothesis and then find the probability that the statistic came from this distribution. To simulate from the null, I will create a normal distribution centered at zero with the same standard deviation as the sampling distribution.","319737d2":"Descriptive statistics show that there are outliers in the *sum_gamerounds* column, because the difference between 75 percentile and max values is huge. I am mainly interested in *Day N Retention* columns, so I will not be dealing with outliers in the *sum_gamerounds* column.  \nNext I will observe unique values in the *version* column. There I expect to see *gate_30* and *gate_40* only","9f674cc4":"With a p-value of 96.53% the difference in Day 1 retention for the Control and Treatment group does not appear to be significant and it is likely that the statistic is from the null hypothesis. Therefore, we fail to reject the null hypothesis, i.e. Day 1 Retention rate does not improve after the gates were moved from level 30 to level 40.","1a692a11":"As expected, the variable *version* stores values for gate_40 and gate_30. Since there is a move from gate_30 to gate_40, observations with *gate_30* value fall within a control group whereas observations with *gate_40* value fall within a treatment group.  \nNow, I will create separate dataframes for control and treatment group ","9658275a":"I just calculated the observed difference and now I wanted to see if the difference is significant and not just due to chance. I will bootstrap the sample and simulate the sampling distribution for the difference in Day 1 Retention rates and plot the sampling distribution.","1b84142a":"The provided dataset contains 5 variables:  \n\n| VariableName | Description |\n|:--|:--|\n| userid |This is a unique ID of a player |\n| version | Version of a game for a control group (gate_30) and a treatment group (gate_40)|\n| sum_gamerounds | Quantity of game rounds a user played |\n| retention_1 | Shows whether a user came back on the first day after installation |\n| retention_7 | Shows whether a user came back on the seventh day after installation |","6545221a":"<a id='Table'><\/a>\n## Table of contents\n- [Introduction](#Introduction)  \n- [Data assessment](#Assessment)\n- [Metrics](#Metrics)\n- [Formulation of null and alternative hypothesis](#Hypothesis)\n- [Hypothesis Testing](#Tests)  \n    - [Day One Retention Rate](#Day1)  \n    - [Day Seven Retention Rate](#Day7)  \n- [Conclusions](#Conclusions)","384f57f5":"The metrics that the company wanted to improve are given in the data set. Those are Day 1 retention rate and Day 7 retention rate. In the dataset it is specified who returned on a specified day by boolean values True or False.  \nIn order to calculate the retention rate I will calculate average of those columns and that's it.","9ac46535":"With a p-value of 99.95% the difference in Day 1 retention for the Control and Treatment group does not appear to be significant and it is likely that the statistic is from the null hypothesis. Therefore, we fail to reject the null hypothesis, i.e. Day 7 Retention rate does not improve after the gates were moved from level 30 to level 40. ","209f21c5":"In this section, I will be importing the necessary python libraries, reading the dataset from csv file, and assessing if there are any duplicates or null values in the dataset. In other words, I will get familiar with the data set here.","1cfef793":"First I will refresh actual retention rate calculated from the provided data set for the control and the treatment group. Next, I calculate the difference in Day 1 Retention between control and treatment group. ","ec9ddaeb":"I just calculated the observed difference and now I want to see if the difference is significant and not just due to chance. I will bootstrap the sample and simulate the sampling distribution for the difference in Day 7 Retention rates and plot the sampling distribution.","90bbb4e2":"<a id='Introduction'><\/a>\n## Introduction\n[to the top](#Table)","9d336098":"<a id='Tests'><\/a>\n## Hypothesis Testing\n[to the Table of Contents](#Table)  \n<a id='Day1'><\/a>\n$$Day \\ One \\ Retention$$","1f2f17fc":"In this notebook I wanted to analize the A\/B test results of a mobile game [Cookie Cats](https:\/\/play.google.com\/store\/apps\/details?hl=en&id=dk.tactile.cookiecatspop). Cookie Cats is a popular mobile Match 3 game from [Tactile Games](https:\/\/tactilegames.com\/). In this game, a player should complete levels to move forward. There are gates on a player's way where the player is required either to wait or to make an in-app purchase. Developers of the came moved the first gate from level 30 to level 40 and conducted A\/B test to observe the behavior of users, in particular, they collected data for Day 1 Retention and Day 7 Retention. It is one of the most crucial things for every mobile game company to have as many users as possible and keep track of them. Day N retention rate is one of the main metrics which provides an indication of how the company is doing in retaining its users.","c005b453":"<a id='Day7'><\/a>\n$$Day \\ Seven \\ Retention$$  \n[to the Table of Contents](#Table)  ","3f9a60ac":"<a id='Metrics'><\/a>\n## Metrics\n[to the Table of Contents](#Table)","e6918466":"Next, I will formulate the null and alternative hypothesis","ea43c625":"There are no null values in the DataFrame, however I see that user id is an integer. Since this is a qualitative variable, I will change it to a string","97c8e908":"An alternative hypothesis is what we want to be true, i.e. Day 1 retention rate with gates placed at level 40 (L40) is higher than Day 1 retention rate with gates placed at level 30 (L30) and Day 7 retention rate with gates placed at level 40 is higher than Day 7 retention rate with gates placed at level 30.\n\n\nA null hypothesis is what we assume to be true before analyzing any data, i.e Day 1 retention rate with gates placed at level 40 is lower or equal than Day 1 retention rate with gates placed at level 30 and Day 7 retention rate with gates placed at level 40 is lower or equal than Day 7 retention rate with gates placed at level 30.  \n$$Day\\ 1\\ Retention\\ Rate \\ Null\\ (H_0) \\ and \\ Alternative \\ (H_1) \\ Hypothesis$$  \n\n$$H_0: \\ L40_{d1} - \\ L30_{d1} \\leq 0$$\n\n\n$$H_1: \\ L40_{d1} - \\ L30_{d1} > 0$$  \n\n$$Day\\ 7\\ Retention\\ Rate \\ Null\\ (H_0) \\ and \\ Alternative \\ (H_1) \\ Hypothesis$$  \n\n$$H_0: \\ L40_{d7} - \\ L30_{d7} \\leq 0$$\n\n\n$$H_1: \\ L40_{d7} - \\ L30_{d7} > 0$$","4b5691d1":"<a id='Assessment'><\/a>\n## Data Assessment\n[to the top](#Table)","a0359005":"<a id='Hypothesis'><\/a>\n## Formulation of Null and Alternative Hypothesis\n[to the Table of Contents](#Table)","8ecfb3ee":"The provided dataset is clean. The one thing I modified is I changed userid data type from an integer into a string. The dataset has 90,189 observations with 44,700 and 45,489 observations falling within a control and  a treatment group respectively.  \nFurther, I will discuss and calculate the metrics to be used","94933e36":"<a id='Conclusions'><\/a>\n## Conclusions\n[to the Table of Contents](#Table)","6082cce2":"Same steps as above, but for Day Seven Retention  \nFirst I will refresh actual retention rate calculated from the provided data set for the control and the treatment group. Next, I calculate the difference in Day 7 Retention between control and treatment group. ","c51d743f":"In conclusion, the hypothesis tests proved that the p-value of all proposed variables is high and close to 100%. We can say that we do not have enough evidence to reject the null hypothesis. In other words, we fail to reject the null hypothesis. Based on this, moving the gate from level 30 to level 40 will deteriorate both Day 1 Retention rate and Day 7 Retention rate.","36497f8a":"<center> <h1>Cookie Cats Analyze A\/B Test Results<\/h1> <\/center>"}}