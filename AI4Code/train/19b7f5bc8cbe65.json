{"cell_type":{"87f8a6e7":"code","9440b536":"code","6b996410":"code","aae042cc":"code","29e5ae9d":"code","e0b81d82":"code","80572a58":"code","79e09956":"code","2508c708":"code","2095ff92":"code","d5a9f093":"code","e0fad12a":"code","2ec7fccd":"code","512f2a7c":"code","f3b3422c":"code","965f580b":"code","e452387f":"code","3cb0a162":"code","fb912e6f":"code","c0c9681c":"markdown","9189eccc":"markdown","fd3e636f":"markdown","6f95cc92":"markdown","c84be865":"markdown","aad046ff":"markdown","d6252ebd":"markdown","b2362d2f":"markdown","7d2d7c54":"markdown","58294f24":"markdown","69d0ff76":"markdown","1bf259b7":"markdown","89c30113":"markdown","4dfc0de6":"markdown","f97bd9e9":"markdown","a6e49318":"markdown","59c35e5b":"markdown","8e9d531e":"markdown","c7cce301":"markdown","3854d8ba":"markdown","b62419a3":"markdown","2aee4e19":"markdown","ce686cab":"markdown","63636434":"markdown","fe5c18b3":"markdown","f3b333c4":"markdown"},"source":{"87f8a6e7":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode,iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\n\nfrom plotly import tools\nimport seaborn as sns\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport os\nprint(os.listdir(\"..\/input\"))\nlol=pd.read_csv(\"..\/input\/games.csv\")\n\n# Any results you write to the current directory are saved as output.","9440b536":"data=lol[[\"winner\",\"firstBlood\",\"firstTower\",\"firstInhibitor\",\"firstBaron\",\"firstDragon\",\"firstRiftHerald\",\"t1_towerKills\",\"t1_inhibitorKills\",'t1_baronKills',\n       't1_dragonKills','t2_towerKills','t2_inhibitorKills', 't2_baronKills', 't2_dragonKills'\n       ]]","6b996410":"data.drop([524,839,867,5325,5340,6472,7408,7430,7570,7711,7874,7900,3858,4031,4467,4551,4646,4696,4897,4907,5002,5027,1241,1347,1452,1712,1962,2681,2799,2837,2960,3010,3093,3234,3325,3534,3634,3659,3747,3806,3848],inplace=True)\ndata=data.reset_index()\ndata.drop([\"index\"],axis=1,inplace=True)","aae042cc":"data.head()","29e5ae9d":"import missingno as msno\nmsno.bar(data)\nplt.show()","e0b81d82":"first_team=data[data.winner==1]\nsecond_team=data[data.winner==2]","80572a58":"trace1 = go.Histogram(x=first_team.firstBlood, text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"crimson\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace2 = go.Histogram(x=second_team.firstBlood,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"blue\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace3 = go.Histogram(x=first_team.firstTower,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"grey\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace4 = go.Histogram(x=second_team.firstTower,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"yellow\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace5 = go.Histogram(x=first_team.firstBaron,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"pink\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace6 = go.Histogram(x=second_team.firstBaron,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"green\",line=dict(color='black', width=2)),opacity=0.7)\n\ntrace7 = go.Histogram(x=first_team.firstInhibitor,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"purple\",line=dict(color='black', width=2)),opacity=0.75)\n\ntrace8 = go.Histogram(x=second_team.firstInhibitor,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"slateblue\",line=dict(color='black', width=2)),opacity=0.7)\n\ntrace9 = go.Histogram(x=first_team.firstDragon,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"brown\",line=dict(color='black', width=2)),opacity=0.75)                                \n\ntrace10 = go.Histogram(x=second_team.firstDragon,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"red\",line=dict(color='black', width=2)),opacity=0.7)\n\ntrace11 = go.Histogram(x=first_team.firstRiftHerald,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"orange\",line=dict(color='black', width=2)),opacity=0.75)                                \n\ntrace12 = go.Histogram(x=second_team.firstRiftHerald,text=['0-None', '1- First Team', '2- Second Team'],histnorm='probability',marker=dict(color=\"yellowgreen\",line=dict(color='black', width=2)),opacity=0.7)\n\nfig = tools.make_subplots(rows=6, cols=2,vertical_spacing=0.1,print_grid=False )\n \nfig.append_trace(trace1, 1, 1)\nfig.append_trace(trace2, 1, 2)\nfig.append_trace(trace3, 2, 1)\nfig.append_trace(trace4, 2, 2)\nfig.append_trace(trace5, 3, 1)\nfig.append_trace(trace6, 3, 2)\nfig.append_trace(trace7, 4, 1)\nfig.append_trace(trace8, 4, 2)\nfig.append_trace(trace9, 5, 1)\nfig.append_trace(trace10, 5, 2)\nfig.append_trace(trace11, 6, 1)\nfig.append_trace(trace12, 6, 2)\nfig['layout'].update( annotations=[dict(showarrow=False,text=\"Teams\",x=0.5,y=-0.1,xref=\"paper\",yref=\"paper\",font=dict(size=15)),dict(showarrow=False, text='Probabilites',x=-0.08,y=0.5,xref=\"paper\",yref=\"paper\",textangle=270,font=dict(size=15)),\n                                  dict(showarrow=False,text=\"First Blood When First Team wins\",x=0.13,y=1.03,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Blood When Second Team wins\",x=0.88,y=1.03,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                   dict(showarrow=False,text=\"First Tower When First Team wins\",x=0.13,y=0.85,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Tower When Second Team wins\",x=0.88,y=0.85,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Baron When First Team wins\",x=0.13,y=0.65,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Baron When Second Team wins\",x=0.88,y=0.65,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Inhibitor When First Team wins\",x=0.13,y=0.46,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Inhibitor When Second Team wins\",x=0.88,y=0.46,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Dragon When First Team wins\",x=0.13,y=0.28,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Dragon When Second Team wins\",x=0.88,y=0.28,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Rift Herald When First Team wins\",x=0.13,y=0.10,xref=\"paper\",yref=\"paper\",font=dict(size=10)),\n                                  dict(showarrow=False,text=\"First Rift Herald When Second Team wins\",x=0.90,y=0.10,xref=\"paper\",yref=\"paper\",font=dict(size=10))],                     \n            \n                     height=800,font=dict(family=\"Franklin Gothic\", size=10),showlegend=False, bargap=0.4,title=\"Probabilities of First Blood etc. When a Team Wins\",plot_bgcolor=\"snow\" ,bargroupgap=0.1, paper_bgcolor='rgb(243, 243, 243)')\n\niplot(fig)\n","79e09956":"data_new=data[[\"winner\",\"t1_towerKills\",\"t1_inhibitorKills\",\"t1_baronKills\",\"t1_dragonKills\",\"t2_towerKills\",\"t2_inhibitorKills\",\"t2_baronKills\",\"t2_dragonKills\"]]\ndata_new.groupby(\"winner\").mean()\n","2508c708":"f=data_new.groupby(\"winner\").mean().plot(kind=\"bar\",subplots=True,sharex=False,sharey=False,figsize=(15,10),layout=(2,4),alpha=0.7,title=\"Average Number of Tower etc. kills According to Winners\")\nf= sns.set_style(\"darkgrid\")\nf=sns.set_context(\"paper\")\nplt.show()","2095ff92":"y = data[\"winner\"].values\nx = data.drop([\"winner\"],axis=1)\nfrom sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x,y,test_size = 0.3,random_state=1)\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.model_selection import GridSearchCV","d5a9f093":"criterion=[\"gini\",\"entropy\"]\nmax_depth=range(1,20,2)\nsplitter=[\"best\",\"random\"]\ndt=DecisionTreeClassifier()\ngrid_decision_tree=GridSearchCV(estimator=dt,cv=15,param_grid=dict(criterion=criterion,max_depth=max_depth,splitter=splitter))","e0fad12a":"grid_decision_tree.fit(x_train,y_train)\nprint(\"best score: \", grid_decision_tree.best_score_)\nprint(\"best param: \", grid_decision_tree.best_params_)","2ec7fccd":"dt2=DecisionTreeClassifier(criterion=\"entropy\",max_depth=7, splitter=\"best\")\ndt2.fit(x_train,y_train)\nprint(\"score:\", dt2.score(x_test,y_test))","512f2a7c":"from sklearn import tree\nimport graphviz \ndot_data = tree.export_graphviz(dt2, out_file=None, feature_names=x.columns,class_names=[\"1\",\"2\"], \n                     filled=True, rounded=True, special_characters=True)  \ngraph = graphviz.Source(dot_data)  \ngraph ","f3b3422c":"from sklearn.metrics import confusion_matrix,classification_report\npredicted_values = dt2.predict(x_test)\ncm=confusion_matrix(y_test,predicted_values)\ncr=classification_report(y_test,predicted_values)\nprint('Classification report : \\n',cr)","965f580b":"g1 = sns.heatmap(cm,annot=True,fmt=\".1f\",cmap=\"flag\",cbar=False)\ng1.set_ylabel('y_true')\ng1.set_xlabel('y_head')","e452387f":"scenario={\"feature\":[\"first_blood\",\"first_tower\",\"first_inhibitor\",\"first_Baron\",\"first_Dragon\",\"first_RiftHerald\",\n\"t1_tower\",\"t1_inhibitor\",\"t1_baron\",\"t1_dragon\",\"t2_tower\",\"t2_inhibitor\",\"t2_baron\",\"t2_dragon\"],\n         \"value\":[1,1,2,1,1,1,10,2,1,4,7,2,1,1]}\nscen=pd.DataFrame(scenario)\nscen.T","3cb0a162":"x1=[[1,1,2,1,1,1,10,2,1,4,7,2,1,1]]\nc=dt2.predict_proba(x1).reshape(-1,1)\nprint(\"winner is :\" , dt2.predict(x1) )\nprint(\"first team win probability is % \", list(c[0]*100),\"\\nsecond team win probability is %:\",list(c[1]*100)  )","fb912e6f":"x2=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]\nc=dt2.predict_proba(x2).reshape(-1,1)\nprint(\"winner is :\" , dt2.predict(x2) )\nprint(\"first team win probability is % \", list(c[0]*100),\"\\nsecond team win probability is %:\",list(c[1]*100)  )","c0c9681c":"Following subplots shows probabilities of Different Features when a team wins.\n\nFor example \n\nIn matches with first team win:\n\n- The probability of taking first blood of first team is about %59.\n- The probability of taking first blood of second team is about %39.\n- The probability of taking first blood of any team is about %0.98 (early surrender)\n\nIn matches with second team win:\n\n- The probability of taking first blood of first team is about %41.\n- The probability of taking first blood of second team is about %57.\n- The probability of taking first blood of any team is about %0.1 (early surrender)\n\netc..\n\nand also we see that the most important factor in winning matches is to take the **first inhibitor** or the **first tower**.","9189eccc":"Each team wishes to defend their own structures and destroy the other team's structures. These include:\n\n**Towers \u2013 ** Each lane is guarded by powerful defensive structures called turrets or towers. Every team has 11 towers in total. \n\n**Inhibitor \u2013** Each lane contains one Inhibitor. A lane's Inhibitor can be attacked after a team has destroyed the three turrets guarding its lane.\n\n**Elemental Drakes\/Elder Dragon \u2013** Elemental drakes are powerful monsters located in the bottom half of the river. All members of the team that kills the drake are provided with buffs that last the entire game and accrue cumulatively. The drakes are flavored after the Four Elements, with each drake granting a thematically appropriate buff. A random elemental drake will respawn six minutes after the previous one is killed. The Elder Dragon spawns instead after 35 minutes have passed in-game. When killed, it provides a stronger buff than an individual elemental drake, but is temporary, unlike the earlier drake rewards.\n\n**Rift Herald \u2013** The Rift Herald is a powerful enemy located in the upper side of the River. Killing the Rift Herald allows it to be summoned again as a battering ram to attack enemy towers.\n\n**Baron Nashor \u2013 ** Baron Nashor is the most powerful neutral enemy, located in the upper side of the River. It will spawn after twenty minutes, replacing the Rift Herald.\n\n**Nexus \u2013** Each team has a Nexus that can only be damaged once all the turrets in a lane, that lane's inhibitor and the Nexus turrets are destroyed. Destruction of the enemy team's Nexus ends the game.","fd3e636f":"League of Legends (abbreviated LoL) is a multiplayer online battle arena video game developed and published by Riot Games for Microsoft Windows and macOS. \n\nIn League of Legends, players assume the role of an unseen \"summoner\" that controls a \"champion\" with unique abilities and battle against a team of other players or computer-controlled champions. The goal is usually to destroy the opposing team's \"nexus\", a structure that lies at the heart of a base protected by defensive structures, although other distinct game modes exist as well. \n\nEach League of Legends match is discrete, with all champions starting off fairly weak but increasing in strength by accumulating items and experience over the course of the game.","6f95cc92":"WHAT HAPPENED EARLY SURRENDER SITUATION?","c84be865":"In addition, at the beginning of the LOL game players can give an early surrender as a result of AFK. In this case, if the first blood is not shed, our model predicts the result of the match as 51% - 49%.","aad046ff":"<a id=\"4\"><\/a> <br>\n**LET'S TRY!**","d6252ebd":"Following table shows first 5 entries of dataset.","b2362d2f":"<a id=\"2\"><\/a> <br>\n**DATA ANALYSIS**","7d2d7c54":"#### Contents:\n\n1. [Game](#1)\n2. [Data Analysis](#2)\n3. [Decision Tree with Grid Search Method](#3)\n4. [Prediction](#4)","58294f24":"Now let's check the data set for missing data.","69d0ff76":"As seen in the confusion matrix, our models knew 226 matches which win First team as  Second Team. Also it knew 295 matches which win Second Team as First Team. Now let's implement.","1bf259b7":"Our model is working with about 97% accuracy. Following figure shows decision tree:","89c30113":"<a id=\"3\"><\/a> <br>\n**Decision Tree with Grid Search Method**","4dfc0de6":"To evaluate our model, I used confusion matrix and classification report.","f97bd9e9":"<a id=\"1\"><\/a> <br>\n**GAME**","a6e49318":"Our model says The winner will be First Team with 85% probability.","59c35e5b":"In this kernel ,League of Legends ranked matches were analyzed and a decision tree classification algorithm was developed to predict match scores. To develop this algorithm:\n\n- Winner (1 = team1, 2 = team2)\n\n- First Baron, dragon, tower, blood, inhibitor and Rift Herald (1 = team1, 2 = team2, 0 = none)\n\n- The number of tower, inhibitor, Baron and dragon kills each team has \n\nfeatures were used.\n\n* All information were taken from Wikipedia.","8e9d531e":"To develop best model we searched best parameters. To find that we used Grid Search Method.","c7cce301":"Following table and subplots show average number of tower, inhibitor, Baron and dragon kills each team has.","3854d8ba":"![](https:\/\/cdn.webrazzi.com\/uploads\/2016\/09\/league-of-legends.jpg)","b62419a3":"Let's say:\n\nFirst team took First Blood, First Tower, First Baron, First Dragon and First Rift Herald and Second team only took First Inhibitor. And \n\nTeam1 numbers of tower, inhibitor, Baron and dragon kills are 10,2,1,4 respectively and\n\nTeam2 numbers of tower, inhibitor, Baron and dragon kills are 7,2,1,1 respectively.\n","2aee4e19":"### LEAGUE OF LEGENDS MATCH SCORE PREDICTION","ce686cab":"Figure above shows a simplified representation of Summoner's Rift. The yellow paths are the \"lanes\" where endless waves of troops known as minions march; blue and red dots are the defensive turrets that defend the lanes. Not pictured are the two turrets that flank each Nexus \u2013 the ultimate goal of the game, which are within each team's base in their corner. The dotted black line is the river that divides the sides.","63636434":"Summoner's Rift is the most popular map in League of Legends. \n\nOn this map type, two teams of five players compete to destroy an enemy building called a Nexus, which is guarded by the enemy team and a number of defensive structures called turrets, or towers. \n\nOne nexus is located in each enemy base on opposite sides of the map, in the lower-left and upper-right hand corners. \n\nThese structures continually create weak non-player characters known as minions, which advance toward the enemy base along three paths: top, middle, and bottom lanes. \n\nPlayers compete to advance these waves of minions into the enemy base, which allows them to destroy enemy structures and ultimately win the match. \n\nBetween lanes are neutral areas of the map known as the 'jungle', arrayed in four quadrants. A shallow river divides the map between the teams, but doesn't actually impede movement; all champions can wade through it no differently than dry land.","fe5c18b3":"And we found best parameters : criterion parameter as entropy , max depth is 7 and splitter is best. And then we test our model.","f3b333c4":"![](http:\/\/www.wikizero.biz\/index.php?q=aHR0cDovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iL2QvZGMvTWFwX29mX01PQkEuc3ZnLzI0MHB4LU1hcF9vZl9NT0JBLnN2Zy5wbmc)"}}