{"cell_type":{"142592eb":"code","619e097a":"code","6070f71c":"code","c762b518":"code","ffb1c88e":"code","40903061":"markdown","ec9c71ce":"markdown","70200531":"markdown"},"source":{"142592eb":"import os\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport pandas as pd\nimport seaborn as sns\n# import plotly\nimport plotly.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\n\n%matplotlib inline\n# Any results you write to the current directory are saved as output.","619e097a":"### Function to plot\ndef plot_borough_data(df_input, str_title):\n    \"\"\"\n    Takes a dataframe plots it on a plotly chart.\n    \n    Parameters\n    ----------\n    df_input: pandas.DataFrame\n        A pandas dataframe with dates and numerical data\n    str_title: str\n        Title for the plot\n\n    Returns\n    ----------\n    plotly.plot\n    \n    \"\"\"\n    list_data = []\n    \n    ### loop through and create our list of data\n    for c in df_input.columns:\n        list_data.append(go.Scatter(x=df_data.index, \n                                    y=df_data[c],\n                                    name=c.title()))\n\n    ### specify the layout of our figure\n    layout = dict(title = str_title,\n                  xaxis= dict(title= 'Date',\n                              ticklen= 5,\n                              zeroline= False))\n\n    ### create and show our figure\n    fig = dict(data = list_data, layout = layout)\n    return(iplot(fig))","6070f71c":"### path to the file\npath_colls = '..\/input\/nypd-motor-vehicle-collisions.csv'\n\n### list of columns to read in\nlist_cols = [\"DATE\", \n             \"BOROUGH\", \n             \"NUMBER OF PERSONS INJURED\", \n             \"NUMBER OF PERSONS KILLED\"]\n\n### read in the collision dataset\ndf_colls = pd.read_csv(path_colls,\n                       usecols = list_cols\n                      )\n\n### Convert date to a datetime before we start\ndf_colls[\"DATE\"] = pd.to_datetime(df_colls[\"DATE\"])","c762b518":"### Total injuries by month by borough\ndf_data = pd.pivot_table(data=df_colls, \n                         values=\"NUMBER OF PERSONS INJURED\",\n                         index=df_colls[\"DATE\"].dt.strftime(\"%Y-%m\"),\n                         columns=\"BOROUGH\",\n                         aggfunc=np.sum\n                        )\n\nplot_borough_data(df_data, \"Vehicular Injuries by Borough\")","ffb1c88e":"### Total deaths by month by borough\ndf_data = pd.pivot_table(data=df_colls, \n                         values=\"NUMBER OF PERSONS KILLED\",\n                         index=df_colls[\"DATE\"].dt.strftime(\"%Y-%m\"),\n                         columns=\"BOROUGH\",\n                         aggfunc=np.sum\n                        )\n\nplot_borough_data(df_data, \"Vehicular Deaths by Borough\")","40903061":"# Dashboarding with Notebooks - NYC Monthly Rates of Vehicular Injuries\/Deaths","ec9c71ce":"## Monthly Vehicular Injury Rates by Borough ","70200531":"## Monthly Vehicular Death Rates by Borough"}}