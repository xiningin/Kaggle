{"cell_type":{"d4fd298e":"code","5672c0af":"code","b5b11618":"code","9383238f":"code","79ce2a45":"code","0ed67453":"code","4408f215":"code","15308d17":"code","bc962e77":"code","6e0293bd":"code","010235f4":"code","123bbb54":"code","96800a3c":"code","b7f3782c":"code","23d11105":"code","0b5e2108":"code","bfb09de9":"code","958c82c3":"code","0b61f3b4":"code","3147fc65":"code","543c3e72":"code","b903a317":"code","9074e324":"markdown","766a404a":"markdown","66800efd":"markdown","13315473":"markdown","916ad0f4":"markdown","818c8b35":"markdown","714cb7d0":"markdown","28789f98":"markdown","b2fbedd7":"markdown","b08ed877":"markdown","d7137856":"markdown","2afa4279":"markdown","b34a8a02":"markdown","be6accd3":"markdown","9c1b5f45":"markdown","7c33a733":"markdown","be224fed":"markdown","eb552122":"markdown","d42853ce":"markdown","0c2246b8":"markdown","d12b5207":"markdown","5f3b1112":"markdown","8560c6c0":"markdown"},"source":{"d4fd298e":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set()","5672c0af":"df = pd.read_csv(\"..\/input\/noshowappointments\/KaggleV2-May-2016.csv\")\ndf.head()","b5b11618":"df.info()","9383238f":"sum(df.duplicated())","79ce2a45":"sum(df[\"AppointmentID\"].duplicated())","0ed67453":"df.describe()","4408f215":"df[\"No-show\"].value_counts()","15308d17":"df[\"Gender\"].value_counts()","bc962e77":"df[df[\"Age\"] == -1]","6e0293bd":"df.drop(index=df[df[\"Age\"]==-1].index, inplace=True)\n# Checking if the data is cleaned \ndf.describe()","010235f4":"proportion_no_show = df[\"No-show\"].value_counts() \/ sum(df[\"No-show\"].value_counts())\nprint(\"The percentage of patients that showed up for the appointment is about {}%.\"\n      .format(round(proportion_no_show[\"No\"],4)*100))","123bbb54":"print(\"The percentage of patients that didn't show up for the appointment is about {}%.\"\n      .format(round(proportion_no_show[\"Yes\"],4)*100))","96800a3c":"plt.pie(proportion_no_show, labels=[\"showed up\", \"Didn't show up\"],autopct='%1.1f%%')\nplt.title(\"The percentage of patients that showed up and didn't show up for the appointment.\");","b7f3782c":"def print_stat_plot(column_name, disease_name):\n    \"\"\"\n    print the percentage of showing up in case of having or not having a disease and  visualize these results\n    \n    INPUT:\n    column_name: The name of the column in the dataframe.\n    disease_name: The disease name that will be shown in the title and labels of the plot.\n    \n    \"\"\"\n    \n    # A pandas series that contains the number of patients that showed up and didn't show up \n    #if they don't have the disease\n    no_disease = df.query(' {} == 0'.format(column_name))[\"No-show\"].value_counts()\n    \n    # The percentage of the patients that showed up and don't have the disease\n    no_disease_showup = no_disease[\"No\"] \/ sum(no_disease)\n    \n    # A pandas series that contains the number of patients that showed up and didn't show up \n    #if they have the disease\n    disease = df.query(' {} != 0'.format(column_name))[\"No-show\"].value_counts()\n    \n    # The percentage of the patients that showed up and have the disease\n    disease_showup = disease[\"No\"] \/ sum(disease)\n    \n    # Prinitng the results\n    print(\"The percentage of the patients that don't have {} and showed up is about {}%.\"\n          .format(disease_name,round(no_disease_showup*100,2)))\n    print(\"The percentage of the patients that have {} and showed up is about {}%.\"\n          .format(disease_name,round(disease_showup*100,2)))\n    \n    # Visualizing the results\n    proportion_list = [no_disease_showup, disease_showup]\n    plt.bar([1,2], proportion_list, tick_label=[\"No\", \"Yes\"])\n    plt.xlabel(\"Whether the patient has {} or doesn't have.\".format(disease_name))\n    plt.ylabel(\"Percentage of the patients that showed up.\")\n    plt.title(\"The percentage of patients that showed up by whether they have {} or don't have.\"\n              .format(disease_name), y=1.08)\n    plt.ylim((0.75,0.85))\n    return","23d11105":"# Using the function to analyse the \"Hibertension\" column\nprint_stat_plot(\"Hipertension\", \"hypertension\")","0b5e2108":"# Using the function to analyse the \"Diabetes\" column\nprint_stat_plot(\"Diabetes\", \"diabetes\")","bfb09de9":"# Using the function to analyse the \"Alcoholism\" column\nprint_stat_plot(\"Alcoholism\", \"alcoholism\")","958c82c3":"# Using the function to analyse the \"Handcap\" column\nprint_stat_plot(\"Handcap\", \"handicap\")","0b61f3b4":"def plot_age_histogram(df, alpha=None, label=None):\n    \"\"\"\n    Visualize the relationship between the showing up of the patient and his age using the histogram\n    \n    INPUT:\n    df: The dataframe that we want to analyze\n    alpha: The alpha parameter that will be used while plotting\n    label: The label parameter that will be used while plotting\n    \n    \"\"\"\n    \n    # Creating a numpy array that contains the edges of the age bins that will be used in the histogram\n    # Each bin contains 5 years except the last bin that contains 15 years\n    age_bins=np.append(np.arange(0,105,5),[115])\n    \n    # Calculating the values of the age histogram for the patients that showed up and the patients that didn't show up \n    showup_hist=np.histogram(df[df[\"No-show\"]==\"No\"]['Age'],bins=age_bins,range=(0,115))\n    no_showup_hist=np.histogram(df[df[\"No-show\"]==\"Yes\"]['Age'],bins=age_bins,range=(0,115))\n    \n    # Calculating the percentage values of the age histogram for the patients that showed up\n    showup_rates=showup_hist[0]\/(showup_hist[0]+no_showup_hist[0])\n    \n    # Visualizing the histogram\n    locations = np.append(np.arange(2.5,100,5), [107.5])\n    width = np.append(np.full((20,),5),[15])\n    plt.bar(locations,showup_rates,width = width, alpha=alpha, label=label)\n    plt.xlabel(\"Age\")\n    plt.ylabel(\"Percentage of the patients that showed up.\")\n    plt.title(\"The percentage of patients that showed up and their age.\")\n    plt.ylim((0.6,1))\n    return","3147fc65":"# Plotting the hisotogram of the age\nplot_age_histogram(df)","543c3e72":"# Plotting the histogram of the age for females and males \nplot_age_histogram(df[df[\"Gender\"] == \"F\"], alpha = 0.7, label=\"Female\")\nplot_age_histogram(df[df[\"Gender\"] == \"M\"], alpha = 0.7, label=\"Male\")\nplt.legend();","b903a317":"# Plotting the histogram of the age for the patients that received and didn't receive SMS\nplot_age_histogram(df[df[\"SMS_received\"] == 0], alpha = 0.7, label=\"Not received\")\nplot_age_histogram(df[df[\"SMS_received\"] == 1], alpha = 0.7, label=\"Received\")\nplt.legend();","9074e324":" **Checking the datatype of each column , and checking if there is any missing data.**","766a404a":"<a id='intro'><\/a>\n## Introduction\n\n### Dataset Description \n\nThis dataset consists of information of about 100k medical appointments in Brazil. The main focus of the dataset is whether the patients showed up for their appointments or not. The dataset consists of 14 columns:\n\n1- **PatientId**: The ID of each patient.\n\n2- **AppointmentID**: The ID of each appointment.\n\n3- **Gender**: The gender of each patient.\n\n4- **ScheduledDay**: The day at which the patient set up his appointment.\n\n5- **AppointmentDay**: The day at which the patient should show up for his appointment.\n\n6- **Age**: The age of each patient.\n\n7- **Neighbourhood**: The place at which the appointment takes place.\n\n8- **Scholarship**: It indicates whether the patient is enrolled in Brasilian welfare program or not.\n\n9- **Hipertension**: It indicates whether the patient suffers from Hipertension or not.\n\n10- **Diabetes**: It indicates whether the patient suffers from Diabetes or not.\n\n11- **Alcoholism**: It indicates whether the patient suffers from Alcoholism or not.\n\n12- **Handcap**: The number of handicaps that the patient has.\n\n13- **SMS_received**: It indicates whether the patient received SMS or not.\n\n14- **No-show**: It indicates whether the patient showed up for the appointment or not.\n\n### Question(s) for Analysis\n\n- What percentage of patients show up for their appointments?\n- What factors are important for us to know in order to predict if a patient will show up for their scheduled appointment?\n","66800efd":"**Checking if the range of the values is reasonable.**","13315473":"So, there is no duplicate rows or appointment IDs.","916ad0f4":"<a id='conclusions'><\/a>\n## Conclusions\n\n- The percentage of patients that showed up for the appointment is about 79.81%.\n- The percentage of the patients that have hypertension and showed up is more than the percentage of those who don't    have hypertension and showed up by about 2.6%.\n- The percentage of the patients that have diabetes and showed up is more than the percentage of those who don't    have diabetes and showed up by about 2.3%.\n- The percentage of the patients that have handicap and showed up is more than the percentage of those who don't    have handicap and showed up by about 2%.\n- The percentage of the patients that have alcoholism and showed up is approximately the same as the percentage of those who don't have alcoholism and showed up.\n- The mean of showing up of the patients that are lower than 5 years old or higher than 45 years old and lower than 100 years old is generally greater than the mean of showing up of other ages.\n- The mean of showing up of males is very close to the mean of showing up of females in most ages.\n- The mean of showing up of the patients that didn't receive SMS is greater than the mean of showing up of the patients that received SMS in all ages except for the patients that are higher than 100 years old.\n\n- An additional research can be done on finding the relationship between having more than one disease and the mean of showing up. Finding the relationship between the neighbourhood or the time difference between setting up the appointment and the appointment itself maybe useful too.\n\n\n### Limitations\n\nThis exploration didn't take into account the effect of scholarship, neighbourhood, and the difference time between scheduled day and appointment day at the percentage of showing up of patients for their appointment.\n\n","818c8b35":"So, the range of the data is fine except for \"Age\" column where the minimum age shouldn't be negative so it should be cleaned in the Data Cleaning section.","714cb7d0":"- It's concluded that the percentage of the patients that have alcoholism and showed up is approximately the same as the percentage of those who don't have alcoholism and showed up.","28789f98":"\n# Project: No-show Appointments Dataset Analysis.\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","b2fbedd7":"<a id='wrangling'><\/a>\n## Data Wrangling\n\n### Data Assessing\n\n**Loading the data and viewing the first 5 rows from it.**","b08ed877":"\n\n\n### Data Cleaning\n**To clean \"Age\" column, first let's see how many rows have this problem.**\n ","d7137856":"- It's concluded that the percentage of the patients that have hypertension and showed up is more than the percentage of those who don't have hypertension and showed up by about 2.6%.","2afa4279":"- It's concluded that the mean of showing up of males is very close to the mean of showing up of females in most ages.","b34a8a02":"- It's concluded that the percentage of the patients that have handicap and showed up is more than the percentage of those who don't have handicap and showed up by about 2%.","be6accd3":"- It's concluded that the percentage of patients that showed up for the appointment is about 79.81%.","9c1b5f45":"### What factors are important for us to know in order to predict if a patient will show up for their scheduled appointment?\n\n\nThe relationship between the showing up of the patient and whether this patient  has hypertension, diabetes, handicap, or alcoholism will be analysed. To do this, a function that takes the column name of the disease and the disease name and then prints the percentage of showing up in case of having or not having this disease and lastly visualizing these results will be implemented. \n\n","7c33a733":"- It's concluded that the mean of showing up of the patients that didn't receive SMS is greater than the mean of showing up of the patients that received SMS in all ages except for the patients that are higher than 100 years old.","be224fed":"<a id='eda'><\/a>\n## Exploratory Data Analysis\n\n\n### What percentage of patients show up for their appointments?","eb552122":"The relationship between the showing up of the patient and his age will be analysed. To do this, a function that takes the dataframe that we want to analyse, the alpha and the label paramters and then visualizes this relationsship using the histogram will be implemented. ","d42853ce":"So, it's only one row so we can simply remove it from the dataset.","0c2246b8":"- It's concluded that the mean of showing up of the patients that are lower than 5 years old or higher than 45 years old and lower than 100 years old is generally greater than the mean of showing up of other ages.","d12b5207":"- It's concluded that the percentage of the patients that have diabetes and showed up is more than the percentage of those who don't have diabetes and showed up by about 2.3%.","5f3b1112":"The above datatypes are fine to work with and there is no missing data.","8560c6c0":"**Checking if there is any duplicate rows or appointment IDs.**"}}