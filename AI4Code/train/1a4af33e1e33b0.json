{"cell_type":{"8a7ca37a":"code","2af92c3b":"code","bfbe8c68":"code","c169db48":"code","a9a4b18f":"code","50dfe6a4":"code","9e8ec648":"code","d3522352":"code","a96a94d5":"code","111a486a":"code","449a33b6":"code","0940dd08":"code","a29aa458":"code","15ea1df8":"code","85903d7a":"code","092c6c34":"code","ddbc0023":"code","577f2d16":"code","765a8e5a":"code","6aacf16e":"code","1ad6223b":"code","7ff45114":"code","15012b45":"code","78b3049a":"code","8ee791ba":"code","26a5e8b7":"code","0b34cc7b":"code","65aa306e":"code","3b003032":"code","0dd677db":"code","c1d48317":"code","f1087f1e":"code","455138cd":"code","772d2892":"code","fb82eb8a":"code","c717e36f":"code","4d81114b":"code","047d1cf8":"code","896aecde":"code","b8acef4e":"code","d1c6eca3":"code","672aae1a":"code","82ea902f":"code","a8253d31":"code","4141ed06":"code","94ac66df":"code","07745799":"code","1ee924f8":"code","4be69a81":"code","59e51c64":"code","5e791f60":"code","6a42f69e":"code","1c6a937b":"code","6b95571f":"code","ce7be021":"code","96903986":"code","e4f002f2":"code","86205ab4":"code","f8ec3d9f":"code","a8022ec7":"code","6dd385ec":"code","0ff2b81b":"code","d03a972c":"code","f0add7e9":"code","0bf16afd":"code","01433fca":"code","63e394bb":"code","81cc7a38":"code","4ed82f3f":"code","ba030cb9":"code","5726d46e":"code","945d1f1a":"code","bc521af9":"code","13c44812":"code","f8188417":"code","124d882d":"code","9ffcefcd":"code","0cc83407":"code","c318afbc":"code","a2aaa006":"code","322b872c":"code","9868d02f":"code","1924e4e6":"code","315a4111":"code","5c7abdce":"code","ed57e651":"code","cade2e44":"code","fc75cf0b":"code","b36c7ad0":"code","bf64d50b":"code","50a9ba72":"code","f88a19ed":"code","66ae6207":"code","e30af500":"markdown","20ba994c":"markdown","c19e6902":"markdown","7f0016ff":"markdown","173a61ae":"markdown","7a79bd29":"markdown","4de52273":"markdown","970cd4a8":"markdown","1b6aa234":"markdown","901bba43":"markdown","de7424f1":"markdown","3c937d02":"markdown","3cc4907f":"markdown","550b8229":"markdown","6103fab1":"markdown","691ad8bd":"markdown","0f983221":"markdown","7f3dc97f":"markdown","a6dba423":"markdown","036ccf8e":"markdown","8e81aa4f":"markdown","7871991c":"markdown","fa9c0b1c":"markdown","4c0976a0":"markdown","d99e3fed":"markdown","b7240207":"markdown","1bb09d69":"markdown","a5644bf6":"markdown","09b5d0b2":"markdown","66626543":"markdown","611f786c":"markdown","ad694118":"markdown","aacf6cdc":"markdown","c0d97474":"markdown","05c84ccb":"markdown","a9c28d83":"markdown","4b8152d9":"markdown"},"source":{"8a7ca37a":"#Importing libraries\n\nimport re\nimport numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport random\nfrom wordcloud import WordCloud, STOPWORDS\nimport nltk\nfrom nltk.sentiment.vader import SentimentIntensityAnalyzer \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","2af92c3b":"#reading the data\ndata=pd.read_csv(\"\/kaggle\/input\/tv-shows-on-netflix-prime-video-hulu-and-disney\/tv_shows.csv\")","bfbe8c68":"data.head()","c169db48":"#looking at the data\n\ndata.info()","a9a4b18f":"#Converting the percentages to number\n\ndata['Rotten Tomatoes'] = data['Rotten Tomatoes'].str.rstrip('%').astype('float')","50dfe6a4":"#Removing the \"+\" sign from age rating\n\ndata[\"Age\"] = data[\"Age\"].str.replace(\"+\",\"\")","9e8ec648":"#Conveting it to numeric \n\ndata['Age'] = pd.to_numeric(data['Age'],errors='coerce')","d3522352":"#Final data\n\ndata.head()","a96a94d5":"#Data info\n\ndata.info()","111a486a":"#only the data will complete column values available\n#later use\n\ndf=data.dropna()","449a33b6":"df[\"Age\"].value_counts()","0940dd08":"#Taking the values\n\ntitles=data[\"Title\"].values","a29aa458":"#Joining into a single string\n\ntext=' '.join(titles)","15ea1df8":"len(text)","85903d7a":"#How it looks\n\ntext[1000:1500]","092c6c34":"#Removing the punctuation\n\ntext = re.sub(r'[^\\w\\s]','',text)","ddbc0023":"len(text)","577f2d16":"#Punctuation has been removed\n\ntext[1000:1500]","765a8e5a":"#Creating the tokenizer\ntokenizer = nltk.tokenize.RegexpTokenizer('\\w+')","6aacf16e":"#Tokenizing the text\ntokens = tokenizer.tokenize(text)","1ad6223b":"len(tokens)","7ff45114":"#Now the words have been converted to tokens\n\ntokens[1000:1010]","15012b45":"#now we shall make everything lowercase for uniformity\n#to hold the new lower case words\n\nwords = []\n\n# Looping through the tokens and make them lower case\nfor word in tokens:\n    words.append(word.lower())","78b3049a":"#Stop words are generally the most common words in a language.\n#English stop words from nltk.\n\nstopwords = nltk.corpus.stopwords.words('english')","8ee791ba":"words_new = []\n\n#Now we need to remove the stop words from the words variable\n#Appending to words_new all words that are in words but not in sw\n\nfor word in words:\n    if word not in stopwords:\n        words_new.append(word)","26a5e8b7":"#The frequency distribution of the words\n\nfreq_dist = nltk.FreqDist(words_new)","0b34cc7b":"#Frequency Distribution Plot\nplt.subplots(figsize=(20,12))\nfreq_dist.plot(50)","65aa306e":"#converting into string\n\nres=' '.join([i for i in words_new if not i.isdigit()])","3b003032":"#wordcloud\n\nplt.subplots(figsize=(16,10))\nwordcloud = WordCloud(\n                          stopwords=STOPWORDS,\n                          background_color='black',\n                          max_words=100,\n                          width=1400,\n                          height=1200\n                         ).generate(res)\n\n\nplt.imshow(wordcloud)\nplt.title('TV Show Title WordCloud 100 Words')\nplt.axis('off')\nplt.show()","0dd677db":"#wordcloud\n\nplt.subplots(figsize=(16,10))\nwordcloud = WordCloud(\n                          stopwords=STOPWORDS,\n                          background_color='black',\n                          max_words=500,\n                          width=1400,\n                          height=1200\n                         ).generate(res)\n\n\nplt.imshow(wordcloud)\nplt.title('TV Show Title WordCloud 500 Words')\nplt.axis('off')\nplt.show()","c1d48317":"#Lets compare the both","f1087f1e":"#Raw text\n\nlen(text)","455138cd":"#Text from tokenized words\n\nlen(res)","772d2892":"\nplt.subplots(figsize=(16,10))\nwordcloud = WordCloud(\n                          stopwords=STOPWORDS,\n                          background_color='black',\n                          max_words=100,\n                          width=1400,\n                          height=1200\n                         ).generate(text)\n\n\nplt.imshow(wordcloud)\nplt.title('TV Show Title WordCloud 100 Words')\nplt.axis('off')\nplt.show()","fb82eb8a":"text[1000:1500]","c717e36f":"\nplt.subplots(figsize=(16,10))\nwordcloud = WordCloud(\n                          stopwords=STOPWORDS,\n                          background_color='black',\n                          max_words=500,\n                          width=1400,\n                          height=1200\n                         ).generate(text)\n\n\nplt.imshow(wordcloud)\nplt.title('TV Show Title WordCloud 500 Words')\nplt.axis('off')\nplt.show()","4d81114b":"data.head()","047d1cf8":"data.info()","896aecde":"#overall year of release analysis\n\nplt.subplots(figsize=(8,6))\nsns.distplot(data[\"Year\"],kde=False, color=\"blue\")","b8acef4e":"#overall year of release analysis\n\nplt.subplots(figsize=(8,6))\nsns.distplot(data[\"Age\"],kde=False, color=\"blue\")","d1c6eca3":"print(\"TV Shows with highest IMDb ratings are= \")\nprint((data.sort_values(\"IMDb\",ascending=False).head(20))['Title'])","672aae1a":"#barplot of rating\nplt.subplots(figsize=(8,6))\nsns.barplot(x=\"IMDb\", y=\"Title\" , data= data.sort_values(\"IMDb\",ascending=False).head(20))","82ea902f":"print(\"TV Shows with lowest IMDb ratings are= \")\nprint((data.sort_values(\"IMDb\",ascending=True).head(20))['Title'])","a8253d31":"#barplot of rating\nplt.subplots(figsize=(8,6))\nsns.barplot(x=\"IMDb\", y=\"Title\" , data= data.sort_values(\"IMDb\",ascending=True).head(20))","4141ed06":"#Overall data of IMDb ratings\n\nplt.figure(figsize=(16, 6))\n\nsns.scatterplot(data=data['IMDb'])\nplt.ylabel(\"Rating\")\nplt.xlabel('Movies')\nplt.title(\"IMDb Rating Distribution\")","94ac66df":"print(\"TV Shows with highest Rotten Tomatoes scores are= \")\nprint((data.sort_values(\"Rotten Tomatoes\",ascending=False).head(20))['Title'])","07745799":"#barplot of rating\nplt.subplots(figsize=(8,6))\nsns.barplot(x=\"Rotten Tomatoes\", y=\"Title\" , data= data.sort_values(\"Rotten Tomatoes\",ascending=False).head(20))","1ee924f8":"print(\"TV Shows with lowest Rotten Tomatoes scores are= \")\nprint((data.sort_values(\"Rotten Tomatoes\",ascending=True).head(20))['Title'])","4be69a81":"#barplot of rating\nplt.subplots(figsize=(8,6))\nsns.barplot(x=\"Rotten Tomatoes\", y=\"Title\" , data= data.sort_values(\"Rotten Tomatoes\",ascending=True).head(20))","59e51c64":"#Overall data of Rotten Tomatoes scores\n\nplt.figure(figsize=(16, 6))\nsns.scatterplot(data=data['Rotten Tomatoes'])\nplt.ylabel(\"Rotten Tomatoes score\")\nplt.xlabel('Movies')\nplt.title(\"Rotten Tomatoes Score Distribution\")","5e791f60":"#selecting netflix shows\nnetflix=data[data[\"Netflix\"]==1]","6a42f69e":"print(\"Number of shows on Netflix= \", len(netflix))","1c6a937b":"plt.subplots(figsize=(8,6))\nsns.distplot(netflix[\"Year\"],kde=False, color=\"blue\")","6b95571f":"plt.subplots(figsize=(8,6))\nsns.distplot(netflix[\"Age\"],kde=False, color=\"blue\")","ce7be021":"plt.subplots(figsize=(8,6))\nsns.distplot(netflix[\"IMDb\"],kde=False, color=\"blue\")","96903986":"plt.subplots(figsize=(8,6))\nsns.distplot(netflix[\"Rotten Tomatoes\"],kde=False, color=\"blue\")","e4f002f2":"print(\"Netflix Shows with highest IMDb ratings are= \")\nprint((netflix.sort_values(\"IMDb\",ascending=False).head(10))['Title'])","86205ab4":"print(\"Netflix Shows with lowest IMDb ratings are= \")\nprint((netflix.sort_values(\"IMDb\",ascending=True).head(10))['Title'])","f8ec3d9f":"print(\"Netflix Shows with highest Rotten Tomatoes score are= \")\nprint((netflix.sort_values(\"Rotten Tomatoes\",ascending=False).head(10))['Title'])","a8022ec7":"print(\"Netflix Shows with lowest Rotten Tomatoes score are= \")\nprint((netflix.sort_values(\"Rotten Tomatoes\",ascending=True).head(10))['Title'])","6dd385ec":"#Taking the title and rating data\n\nnetflix1=netflix.sort_values(\"IMDb\",ascending=False).head(100)[['Title',\"IMDb\"]]\nnetflix1.head()","0ff2b81b":"#Converting it into a tuple\n\ntuples_netflix_imdb = [tuple(x) for x in netflix1.values]","d03a972c":"#Looks like this\n\ntuples_netflix_imdb[0:10]","f0add7e9":"#Making a wordcloud\n\nwordcloud_netflix_imdb = WordCloud(width=1400,height=1200).generate_from_frequencies(dict(tuples_netflix_imdb))","0bf16afd":"plt.subplots(figsize=(12,12))\nplt.imshow(wordcloud_netflix_imdb)\nplt.title(\"TV Shows based on IMDb rating(Top 100)\")","01433fca":"#Taking the title value and Rotten Tomatoes Score\n\nnetflix2=netflix.sort_values(\"Rotten Tomatoes\",ascending=False).head(100)[['Title',\"Rotten Tomatoes\"]]\nnetflix2.head()","63e394bb":"#Converting to Tuple\n\ntuples_netflix_tomatoes = [tuple(x) for x in netflix2.values]","81cc7a38":"#Word Cloud generation\n\nwordcloud_netflix_tomatoes = WordCloud(width=1400,height=1200).generate_from_frequencies(dict(tuples_netflix_tomatoes))","4ed82f3f":"plt.subplots(figsize=(12,12))\nplt.imshow(wordcloud_netflix_tomatoes)\n\nplt.title(\"TV Shows based on Rotten Tomatoes Score(Top 100)\")","ba030cb9":"#Taking the relevant data\n\nratings=data[[\"Title\",'IMDb',\"Rotten Tomatoes\"]]\nratings.head()","5726d46e":"len(ratings)","945d1f1a":"ratings.info()","bc521af9":"#Removing the data\n\nratings=ratings.dropna()","13c44812":"ratings[\"IMDb\"]=ratings[\"IMDb\"]*10","f8188417":"#New data\n\nratings.head()","124d882d":"#Input data\n\nX=ratings[[\"IMDb\",\"Rotten Tomatoes\"]]","9ffcefcd":"X.head()","0cc83407":"#Scatterplot of the input data\n\nplt.figure(figsize=(10,6))\nsns.scatterplot(x = 'IMDb',y = 'Rotten Tomatoes',  data = X  ,s = 60 )\nplt.xlabel('IMDb rating (multiplied by 10)')\nplt.ylabel('Rotten Tomatoes') \nplt.title('IMDb rating (multiplied by 10) vs Rotten Tomatoes Score')\nplt.show()","c318afbc":"#Importing KMeans from sklearn\n\nfrom sklearn.cluster import KMeans","a2aaa006":"wcss=[]\n\nfor i in range(1,11):\n    km=KMeans(n_clusters=i)\n    km.fit(X)\n    wcss.append(km.inertia_)","322b872c":"#The elbow curve\n\nplt.figure(figsize=(12,6))\n\nplt.plot(range(1,11),wcss)\n\nplt.plot(range(1,11),wcss, linewidth=2, color=\"red\", marker =\"8\")\n\nplt.xlabel(\"K Value\")\nplt.xticks(np.arange(1,11,1))\nplt.ylabel(\"WCSS\")\n\nplt.show()","9868d02f":"#this is known as the elbow graph , the x axis being the number of clusters\n#the number of clusters is taken at the elbow joint point\n#this point is the point where making clusters is most relevant\n#the numbers of clusters is kept at maximum","1924e4e6":"#Taking 4 clusters\n\nkm=KMeans(n_clusters=4)","315a4111":"#Fitting the input data\n\nkm.fit(X)","5c7abdce":"#predicting the labels of the input data\n\ny=km.predict(X)","ed57e651":"#adding the labels to a column named label\n\nratings[\"label\"] = y","cade2e44":"#The new dataframe with the clustering done\n\nratings.head()","fc75cf0b":"#Scatterplot of the clusters\n\nplt.figure(figsize=(10,6))\nsns.scatterplot(x = 'IMDb',y = 'Rotten Tomatoes',hue=\"label\",  \n                 palette=['green','orange','red',\"blue\"], legend='full',data = ratings  ,s = 60 )\n\nplt.xlabel('IMDb rating(Multiplied by 10)')\nplt.ylabel('Rotten Tomatoes score') \nplt.title('IMDb rating(Multiplied by 10) vs Rotten Tomatoes score')\nplt.show()","b36c7ad0":"print('Number of Cluster 0 TV Shows are=')\nprint(len(ratings[ratings[\"label\"]==0]))\nprint(\"--------------------------------------------\")\nprint('Number of Cluster 1 TV Shows are=')\nprint(len(ratings[ratings[\"label\"]==1]))\nprint(\"--------------------------------------------\")\nprint('Number of Cluster 2 TV Shows are=')\nprint(len(ratings[ratings[\"label\"]==2]))\nprint(\"--------------------------------------------\")\nprint('Number of Cluster 3 TV Shows are=')\nprint(len(ratings[ratings[\"label\"]==3]))\nprint(\"--------------------------------------------\")","bf64d50b":"print('TV Shows in cluster 0')\n\nprint(ratings[ratings[\"label\"]==0][\"Title\"].values)","50a9ba72":"print('TV Shows in cluster 1')\n\nprint(ratings[ratings[\"label\"]==1][\"Title\"].values)","f88a19ed":"print('TV Shows in cluster 2')\n\nprint(ratings[ratings[\"label\"]==2][\"Title\"].values)","66ae6207":"print('TV Shows in cluster 3')\n\nprint(ratings[ratings[\"label\"]==3][\"Title\"].values)","e30af500":"Let us look at the IMDb ratings.","20ba994c":"# Age Analysis","c19e6902":"Mainly new TV Shows, especially after 2010.","7f0016ff":"\nNow we calculate the Within Cluster Sum of Squared Errors (WSS) for different values of k. Next, we choose the k for which WSS first starts to diminish.","173a61ae":" # TV Show Clustering based on ratings","7a79bd29":"# IMDb ratings","4de52273":"# **Using the regenerated text from the Tokenized words**","970cd4a8":"KMeans is one of the simple but popular unsupervised learning algorithm. Here K indicates the number of clusters or classes the algorithm has to divide the data into. The algorithm starts with first group of randomly selected centroids, which are used as the beginning points for every cluster. It performs repetitive calculations to optimize the positions of the centroids.","1b6aa234":"# Key observations-\n\n* Love, world, girl, life, day ,family, secret etc occupy large spaces.\n\n* As they occupy large spaces, this means they have high frequency.\n\n* This shows that large number of tv shows will have some sort of these components.","901bba43":"Now, let's look at the numeric data.","de7424f1":"# Rotten Tomatoes Scores","3c937d02":"Important thing is that IMDB data is on a scale of 0-10, and Rotten Tomatoes data is on a scale of 0-100. But data on different scales might not lead to proper clustering, so we convert the IMDb data into a scale of 0-100, that is, we shall multiply it by 10.","3cc4907f":"# Analysis\n\n* The cluster at the top are surely the best TV Shows, they have high scores by both IMDb and Rotten Tomatoes.\n\n* The middle two are good and average TV Shows. There are outliers, and in some cases, some TV Shows have been rated high by one, but rated low by the other. \n\n* The outliers are mainly caused by the fact that, say IMDb rated them well, but Rotten Tomatoes rated them badly.\n\n* The bottom cluster is usually the TV Shows with bad ratings by both, but there are some outliers.","550b8229":"We will tokenize the words and find out the frequency of each word. This will give us an idea of how many times a word appears in a title, and also give the words which appear maximum in a title.","6103fab1":"* Maximum word is love, so we can say titles do have romantic\/love oriented names.\n\n* Other frequent words are world, life, adventure, wild, family, story etc.\n\n* These are common elements of day to day life and hence they are common in the titles.\n\n* No stopwords as we removed them.","691ad8bd":"We see that there are many data which is missing. But for undergoing the process, we need complete data. So we shall delete the data which has missing values and only work on data that is complete.","0f983221":"# Top Netflix Shows WordCloud based on Rotten Tomatoes score","7f3dc97f":"The empty spaces are missing data points.","a6dba423":"Thank You.","036ccf8e":"This data has various TV Shows and their ratings etc. The % from rotten tomatoes must be removed and the + from age ratings must be removed. The data has to be cleaned properly to do the proper analysis. We will try to do an overall analysis of the TV Shows and understand the trends","8e81aa4f":"# Analysis based on Title Names","7871991c":"**Netflix shows based on their ratings on IMDb and Rotten Tomatoes scores.**","fa9c0b1c":"The TV Show names printed.","4c0976a0":"When we tokenized the words, stop words were removed, words converted to small, and hence many words were reduced.\n\nThis explains why the length of text from tokenized words is much less.","d99e3fed":"# Using the raw text we generated earlier","b7240207":"The empty spaces are missing data points.","1bb09d69":"Now, we shall analyze the ratings based on IMDB and Rotten Tomato. We shall try to undergo an unsupervised Machine Learning method, Clustering. We shall perform KMeans clustering using SKlearn library.","a5644bf6":"# Top Netflix Shows WordCloud based on IMDb rating","09b5d0b2":"A key difference in this case is appearance of The, Is, the, this etc. These are stopwords, in our tokenized words cases, we removed them and they thus didn't appear in the final wordcloud. But in this case, stop words were not removed, hence the problem.","66626543":"So, \n* 18+ =  376 shows\n* 16+ =  359 shows\n* 7+  =  177 shows\n* 13+ =  7 shows","611f786c":"We will analyze the title names of the TV Shows.","ad694118":"# Title Word Frequency","aacf6cdc":"# Final Results.","c0d97474":"# For sake of simplicity we will work with just Netflix TV Shows\n# If necessary, by changing conditions, we can analyze Hulu, Disney and Amazon as well.","05c84ccb":"# Netflix","a9c28d83":"# Analysis on Numeric Data","4b8152d9":"Either ~ 5 and above or 15 and above are main trends."}}