{"cell_type":{"a3d1e480":"code","acf403a0":"code","c0a5f2c7":"code","5d01ed84":"code","a832d91d":"code","b23e0103":"code","4d7dde9d":"code","59fcc86b":"code","5d5d4050":"code","06f6b10f":"code","cd77a6fa":"code","cecd141f":"code","b81da69b":"code","cd0ab432":"code","0e8791ae":"code","e0f91872":"code","5f2ecc4d":"code","83001158":"code","ac9cb479":"code","2c892120":"markdown","b71d9fe5":"markdown","dda83cf9":"markdown","bb5e12c0":"markdown","6f90f9ad":"markdown","c75d4e80":"markdown","62ac1d88":"markdown"},"source":{"a3d1e480":"# Clone the repo; Get in the data\n!cd ..\/; git clone -b master https:\/\/github.com\/Muennighoff\/vilio.git\n    \n# Copy in the data you want to run; To avoid running out of disk space I only move in the data needed for now\n!mv ..\/input\/hmtsvfeats\/hm_vgattr3636.tsv ..\/vilio\/data\/\n!mv ..\/input\/hmtsvfeats\/hm_vgattr5050.tsv ..\/vilio\/data\/\n!mv ..\/input\/hmtsvfeats\/hm_vgattr7272.tsv ..\/vilio\/data\/\n!mv ..\/input\/hmtsvfeats\/hm_vg5050.tsv ..\/vilio\/data\/\n\n# Copy in the hateful memes data from uploading \/ downloading it\n# If you do not have enough disk space split up the training of models!\n# If you downloaded the updated HM data; you just need to copy in everything in the data folder (img, .jsonl's)\n# Replace the hatefulmemes below with the name of your uploaded data\n!cp -r ..\/input\/hatefulmemes\/data\/* ..\/vilio\/data\/","acf403a0":"# Install requirements\n!cd ..\/vilio; pip install -r requirements.txt","c0a5f2c7":"!cd ..\/vilio; bash .\/bash\/inference\/O\/hm_OV50.sh ..\/input\/vilioov50\/LASTtrain.pth ..\/input\/vilioov50\/LASTtraindev.pth","5d01ed84":"!cd ..\/vilio; bash .\/bash\/inference\/O\/hm_O50.sh ..\/input\/vilioo50\/LASTtrain.pth ..\/input\/vilioo50\/LASTtraindev.pth","a832d91d":"!cd ..\/vilio; bash .\/bash\/inference\/O\/hm_O36.sh ..\/input\/vilioo36\/LASTtrain.pth ..\/input\/vilioo36\/LASTtraindev.pth","b23e0103":"!cd ..\/vilio; bash .\/bash\/inference\/O\/hm_OSA.sh","4d7dde9d":"!cd ..\/vilio; bash .\/bash\/inference\/U\/hm_U36.sh ..\/input\/viliou36\/LASTtrain.pth ..\/input\/viliou36\/LASTtraindev.pth","59fcc86b":"!cd ..\/vilio; bash .\/bash\/inference\/U\/hm_U50.sh ..\/input\/viliou50\/LASTtrain.pth ..\/input\/viliou50\/LASTtraindev.pth","5d5d4050":"!cd ..\/vilio; bash .\/bash\/inference\/U\/hm_U72.sh ..\/input\/viliou72\/LASTtrain.pth ..\/input\/viliou72\/LASTtraindev.pth","06f6b10f":"!cd ..\/vilio; bash .\/bash\/inference\/U\/hm_USA.sh","cd77a6fa":"!rm -r ..\/vilio\/data\/*.tsv\n!cp -r ..\/input\/hmfeatureszipfin\/detectron.lmdb ..\/vilio\/data","cecd141f":"!cd ..\/vilio; bash .\/bash\/inference\/V\/hm_VLMDB.sh","b81da69b":"!cd ..\/vilio; bash .\/bash\/inference\/V\/hm_V45.sh ..\/input\/viliov45\/LASTtrain.pth ..\/input\/viliov45\/LASTtraindev.pth","cd0ab432":"!cd ..\/vilio; bash .\/bash\/inference\/V\/hm_V90.sh ..\/input\/viliov90\/LASTtrain.pth ..\/input\/viliov90\/LASTtraindev.pth","0e8791ae":"!cd ..\/vilio; bash .\/bash\/inference\/V\/hm_V135.sh ..\/input\/viliov135\/LASTtrain.pth ..\/input\/viliov135\/LASTtraindev.pth","e0f91872":"!cd ..\/vilio; bash .\/bash\/inference\/V\/hm_VSA.sh","5f2ecc4d":"# Copy the ERNIE input csvs\n# E.g. add them as input data and then copy into ..\/vilio\/data\n!cp -r \/kaggle\/input\/ES*\/*.csv ..\/vilio\/data\n!cp -r \/kaggle\/input\/EL*\/*.csv ..\/vilio\/data\n\n# Copy in the PyTorch Csvs\n!cp -r ..\/vilio\/data\/O*\/*.csv ..\/vilio\/data\n!cp -r ..\/vilio\/data\/U*\/*.csv ..\/vilio\/data\n!cp -r ..\/vilio\/data\/V*\/*.csv ..\/vilio\/data","83001158":"!cd ..\/vilio; bash bash\/hm_ens.sh","ac9cb479":"# Save the output\n!cp -r ..\/vilio\/data\/*.csv .\/","2c892120":"# Models","b71d9fe5":"## O","dda83cf9":"## U","bb5e12c0":"# Data","6f90f9ad":"## V","c75d4e80":"# Combine","62ac1d88":"**This is Inference Part 3\/3, where we run inference for the PyTorch model & ensemble. Make sure you have the csv's from Part 1\/3 & 2\/3 as inputs if you also want to include Ernie-Vil Small & Large in the ensemble (They add about 2-3 absolute % to the ensemble). Note that if you commit the notebook, cuda sometimes fails with initialization errors. If that happens, I recommend to commit \/ manually run it in parts, i.e. model by model & keeping the csvs. Let me know if you have any questions! \ud83e\udd76**"}}