{"cell_type":{"8707109e":"code","3c1a1eb2":"code","110fbf00":"code","73176673":"code","542ea5aa":"code","8a876fc0":"code","ac3064f3":"code","504555e4":"code","892952b0":"code","cbe64775":"code","fcfa1305":"code","3e6dea9f":"code","294440e5":"code","3354fc34":"code","45913115":"code","98c3606b":"code","26cdbcfd":"code","a0d736b0":"code","e42bc603":"code","c00b69a3":"code","6e466adf":"code","7b2111c9":"code","3593c253":"code","3f4c95f7":"code","e121b34c":"code","0a06c249":"code","998e37d4":"code","6eca067f":"code","2e38d08e":"code","3e1ce0f2":"code","6627317b":"code","1170f99c":"markdown","f6f14ccf":"markdown","e817003f":"markdown","9b01df70":"markdown","eee171c6":"markdown"},"source":{"8707109e":"from IPython.core.interactiveshell import InteractiveShell\nInteractiveShell.ast_node_interactivity = 'all'\nfrom datetime import datetime\ndatetime.now().strftime(\"%Y\/%m\/%d %H:%M:%S\")","3c1a1eb2":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom matplotlib import rcParams \nimport seaborn as sns\n\nfrom sklearn.model_selection import train_test_split","110fbf00":"def matplotlib_config():\n    rcParams['font.family'] = 'sans-serif'\n    rcParams['font.sans-serif'] = \\\n            ['Hiragino Maru Gothic Pro', 'Yu Gothic', 'Meirio', 'Takao', 'IPAexGothic', 'IPAPGothic', 'VL PGothic', 'Noto Sans CJK JP']\n    rcParams['figure.figsize'] = 8, 8\n    rcParams[\"font.size\"] = 12\n\nmatplotlib_config()","73176673":"df_train = pd.read_csv('..\/input\/titanic\/train.csv')\ndf_test = pd.read_csv('..\/input\/titanic\/test.csv')\n\ndf_train.head()","542ea5aa":"df = df_train # <= alias","8a876fc0":"df.shape","ac3064f3":"label_types = {column:str(df[column].dtype) for column in df.columns}\nlabel_types","504555e4":"_ = df.hist()","892952b0":"_ = sns.pairplot(df)","cbe64775":"df.describe()","fcfa1305":"_ = sns.jointplot('Survived', 'Age', data=df)","3e6dea9f":"df['Sex'].value_counts()","294440e5":"df_tmp = pd.DataFrame()\ndf_tmp['Survived'] = df['Survived']\ndf_tmp['Sex'] = df['Sex'].map({'male':1, 'female':0})\n_ = sns.jointplot('Survived', 'Sex', data=df_tmp)","3354fc34":"df['Sex'].value_counts()\ndf[df['Survived'] == 1]['Sex'].value_counts()\ndf[df['Survived'] == 0]['Sex'].value_counts()","45913115":"df['Age']","98c3606b":"df['Age'][df['Age'].map(lambda x:not x.is_integer())].dropna() # NaN\u3067\u3082\u306a\u304f\u6574\u6570\u3067\u3082\u306a\u3044\u3082\u306e\u304c\u3069\u308c\u304f\u3089\u3044\u3042\u308b\u304b","26cdbcfd":"df['Pclass'].value_counts()","a0d736b0":"# Parch: \u89aa\/\u5b50\u4f9b\u306e\u6570\ndf['Parch'].value_counts()","e42bc603":"# SibSp: \u5144\u5f1f\/\u914d\u5076\u8005\u306e\u6570\ndf['SibSp'].value_counts()","c00b69a3":"df['Ticket'].value_counts()","6e466adf":"# Embarked: \u51fa\u6e2f\u5730\ndf['Embarked'].value_counts()","7b2111c9":"df.isna().sum()","3593c253":"df.head()\n\n","3f4c95f7":"train, val = train_test_split(df, train_size=0.8)\ntest = df_test","e121b34c":"def preprocess(df):\n    x = df.drop(columns='Name')\n    x = x.drop(columns='PassengerId')\n    if 'Survived' in x:\n        y = x['Survived']\n        x = x.drop(columns='Survived')\n    else:\n        y = None\n    \n    x['Sex'] = x['Sex'].map({'male':1, 'female':0})\n    mid_age = x['Age'].median()\n    x['Age'] = df['Age'].fillna(mid_age)\n    x = x.drop(columns='Ticket')\n    mid_fare = x['Fare'].median()\n    x['Fare'] = x['Fare'].fillna(mid_fare)\n    x = x.drop(columns='Cabin')\n    x = x.drop(columns='Embarked')\n    return x, y\n\ntrain_x, train_y = preprocess(train)\nval_x, val_y = preprocess(val)\ntest_x, _ = preprocess(test)\ndf.head()\ntrain_x.head()\ntrain_y.head()","0a06c249":"from sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import accuracy_score","998e37d4":"clf = RandomForestClassifier()","6eca067f":"%time\n_ = clf.fit(train_x, train_y)\n","2e38d08e":"val_pred = clf.predict(val_x)\naccuracy_score(val_y.values, val_pred)","3e1ce0f2":"test_pred = clf.predict(test_x)\ntest_pred","6627317b":"sub = pd.DataFrame(pd.read_csv('..\/input\/titanic\/test.csv')['PassengerId'])\nsub['Survived'] = list(map(int, test_pred))\nsub.to_csv('submission.csv', index=False)","1170f99c":"### male => 1, female => 0 \u3068map\u3057\u3066\u3088\u3055\u305d\u3046","f6f14ccf":"## Sex\u304cint\u3067\u306a\u304fobject\u3060\u3063\u305f\u306e\u3067\u89b3\u5bdf","e817003f":"# Data Analysis","9b01df70":"# Pre-process","eee171c6":"## Age\u304cint\u3067\u306a\u304ffloat\u3060\u3063\u305f\u306e\u3067\u89b3\u5bdf"}}