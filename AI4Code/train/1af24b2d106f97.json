{"cell_type":{"1b23c686":"code","98b77ed4":"code","1d96823a":"code","96406257":"code","de4fb7f9":"code","f575d71c":"code","487b207e":"code","7da201a0":"code","cfeaf721":"markdown","22b73ae6":"markdown","bbc9d99d":"markdown","8700aaa4":"markdown","00bbeaf3":"markdown","fb339d85":"markdown","a3ed187a":"markdown","65d4731a":"markdown"},"source":{"1b23c686":"import plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport plotly.express as px\nimport numpy as np\nimport pandas as pd\nfrom IPython.display import Image","98b77ed4":"df = pd.read_csv(\"\/kaggle\/input\/stimulated-agriculture-us\/stimulated_agriculture.csv\")\nlen(df)","1d96823a":"df.head(2)","96406257":"df.columns","de4fb7f9":"#Preparing the Data\ndf_total_exports = df[['state', 'total exports']].sort_values('total exports', ascending=False).head(25)\n\n#Total Exports by state - Top 25\nfig = px.bar(df_total_exports, y=\"total exports\", x=\"state\", text = \"total exports\", opacity = 0.8 )\nfig.update_traces(texttemplate='%{text:.1s}', textposition='outside')\nfig.update_layout({\n    'plot_bgcolor':'rgba(0,0,0,0)',\n    'paper_bgcolor':'rgba(0,0,0,0)'\n},uniformtext_minsize=4, uniformtext_mode='hide', title_x = 0.5,title_text='Total Exports by State (Top 25)', yaxis=dict(title='Total Exports'),\n                  xaxis=dict(title='State'))\nfig.add_trace(go.Scatter(x=df_total_exports['state'], y=df_total_exports['total exports'],\n                    mode='lines+markers',opacity = 0.3,showlegend=False,\n                   line = dict(\n        smoothing = 1.2, color = 'blue',\n        shape = \"spline\"\n    )))\nfig.show()","f575d71c":"#Preparing the Data for chart\ndf_total_exports = df[['state', 'total exports']].sort_values('total exports', ascending=False)\ndf_best_worst = pd.concat([df_total_exports.head(5),df_total_exports.tail(5)]).sort_values(by = \"total exports\", ascending=False)\n\n#Bar Chart\ngreen_colors = [\"green\"] * 5\nred_colors = [\"red\"] * 5\n\n\nfig = go.Figure(data=[go.Bar(\n    y=df_best_worst['total exports'],\n    x=df_best_worst['state'],\n    text=df_best_worst['total exports'],\n    \n    marker_color=[*green_colors, *red_colors] # marker color can be a single color value or an iterable\n)])\nfig.update_layout({\n    'plot_bgcolor':'rgba(0,0,0,0)',\n    'paper_bgcolor':'rgba(0,0,0,0)'\n},\n    title='US Total Exports - Best and Worst States',\n    xaxis_tickfont_size=14,\n    xaxis=dict(\n        title='State',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    yaxis=dict(\n        title='Total Exports',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n)\nfig.add_annotation( x='Illinois', y=15000, text=\"Top 5 States\",showarrow=False, font=dict( family=\"Courier New, monospace\", size=16, color=\"#ffffff\" ), align=\"right\", arrowhead=2, arrowsize=1, arrowwidth=2, arrowcolor=\"#636363\", ax=120, ay=0, bordercolor=\"#c7c7c7\", borderwidth=2, borderpad=4, bgcolor=\"green\", opacity=0.4)\nfig.add_annotation( x='New Hampshire', y=15000, text=\"Bottom 5 States\",showarrow=False, font=dict( family=\"Courier New, monospace\", size=16, color=\"#ffffff\" ), align=\"right\", arrowhead=2, arrowsize=1, arrowwidth=2, arrowcolor=\"#636363\", ax=120, ay=0, bordercolor=\"#c7c7c7\", borderwidth=2, borderpad=4, bgcolor=\"red\", opacity=0.4)\n\nfig.update_traces(texttemplate='%{text:.2s}', textposition='outside',marker_line_width=1.5, opacity=0.6)","487b207e":"#Prepare the Data \ndf_cat = df.sort_values('total exports', ascending=False).head(25)\n\nfig = go.Figure()\n\nfor category in df_cat.columns[4:len(df_cat.columns)-1]:\n    fig.add_trace(go.Bar(name=category, y=df_cat[category], x=df_cat[\"state\"]))\n\nfig.update_layout(barmode='stack')\nfig.update_layout({\n    'plot_bgcolor':'rgba(0,0,0,0)',\n    'paper_bgcolor':'rgba(0,0,0,0)'\n},\n    title='US Total Exports per Category by States',\n    xaxis_tickfont_size=14,\n    xaxis=dict(\n        title='State',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    yaxis=dict(\n        title='Total Exports',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=1.0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n)\nfig.show()","7da201a0":"fig = go.Figure(data=go.Choropleth(\n    locations=df['code'],\n    z=df['total exports'].astype(float),\n    locationmode='USA-states',\n    colorscale='greens',\n    autocolorscale=False,\n    text=df['text'],\n    marker_line_color='white', \n))\n\nfig.update_layout(\n    title_text='USA Exports by State',\n    geo = dict(\n        scope='usa',\n        projection=go.layout.geo.Projection(type = 'albers usa'),\n        lakecolor='rgb(255, 255, 255)'),\n)\n\nfig.show()","cfeaf721":"<center><img src=\"https:\/\/images.unsplash.com\/photo-1535379453347-1ffd615e2e08?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=667&q=80\" ><\/center>\n<center><h6>Image Source : @no_one_cares(Unsplash)<\/h6><\/center>","22b73ae6":"<center><h1>USA Agriculture Exports - EDA - Understanding the Data<\/h1><\/center>","bbc9d99d":"**References:**\n1. https:\/\/plotly.com\/python\/choropleth-maps\/\n2. https:\/\/plotly.com\/","8700aaa4":"***\n_Note: Best to view in **Wide Screen** or **Full Screen** Mode_\n***","00bbeaf3":"### **Total USA Exports by states - per each category**","fb339d85":"### **Total Exports - Spatial Representation**","a3ed187a":"### **Best and Worst States in Total Exports**","65d4731a":"### **Top 25 States w.r.t Exports**"}}