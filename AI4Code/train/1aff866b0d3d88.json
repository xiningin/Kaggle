{"cell_type":{"9a82d507":"code","dfc9ca24":"code","dd8735fc":"code","87d640b6":"code","4a75d932":"code","8427ccc8":"code","84c875f1":"code","14b84cdc":"code","6ae281a1":"code","6cbb2985":"code","1dc3ab3d":"code","1bde143d":"code","1313c555":"code","db3ec3cd":"code","4a348cfa":"code","7076d3de":"code","c3baac0a":"code","43b26696":"code","c381abde":"code","67219ab6":"code","df0f2d07":"code","2dff1828":"code","7981aa59":"code","0a854460":"code","ccb3de2d":"code","9ccd8c2c":"code","798f4c7e":"code","cd5f1d6a":"code","359cb72c":"code","97dd5b28":"code","f14ef395":"code","2e7e08c9":"code","6b5ba774":"markdown","923e023d":"markdown","6917cf0a":"markdown","be9735b4":"markdown","ab0d9586":"markdown","0735b124":"markdown","1340e776":"markdown","904cbaba":"markdown"},"source":{"9a82d507":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport datetime\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","dfc9ca24":"#Reading Data\ndf = pd.read_csv(\"..\/input\/running\/data.csv\")\ndf.head()","dd8735fc":"#Checking for possible Data Quality issues\ndf.isna().sum() ","87d640b6":"#Data Types\ndf.dtypes","4a75d932":"#Start Observation period\nprint(\"Start of observation period:\",str(df[\"Date\"].min()))\n#End Observation period\nprint(\"End of observation period:\",str(df[\"Date\"].max()))","8427ccc8":"#Count how many medals (Place 1-3) every country has won\nsum_all = df[df[\"Place\"] <= 3].groupby([\"Country\"],as_index=False).size()\n#filter the top countries (more than 200 medals over the time)\ntop_c = sum_all[sum_all[\"size\"]>=200]","84c875f1":"#Help Function: Check if a country ist the list of top countries\ndef check_top(n):\n    if n in list(top_c[\"Country\"]):\n        return \"Yes\"\n    else:\n        return \"No\"","14b84cdc":"#Group by Countries and Place -- count how many Gold,Silver and Bronze Medals they have won \nsum_by_place = df[[\"Country\",\"Place\"]][df[\"Place\"] <= 3].groupby([\"Country\",\"Place\"],as_index=False).size()","6ae281a1":"#Filter the top countries\nsum_by_place[\"Top\"] = sum_by_place[\"Country\"].apply(check_top)\n\ntop_countries = sum_by_place[sum_by_place[\"Top\"] == \"Yes\"]\n\ntop_countries.head()","6cbb2985":"#Plot the distribution of medals won by the best countries\n\npalette ={1.0: \"#af9500\", 2.0: \"#b4b4b4\", 3.0: \"#6a3805\"}\n\ntop = sns.catplot(\n    data=top_countries, kind=\"bar\",\n    x=\"Country\", y=\"size\", hue=\"Place\",\n    palette=palette, alpha = 0.8\n)\ntop.despine(left=True)\ntop.set_axis_labels(\"Country\", \"Sum Places\")\ntop.fig.suptitle(\"Countries with 200+ Medals\");","1dc3ab3d":"#group by event and filter the same top countries again\ntop_countries_event = df[df[\"Place\"] <= 3][[\"Country\",\"Event\"]].groupby([\"Country\",\"Event\"],as_index=False).size()\ntop_countries_event[\"Top\"] = top_countries_event[\"Country\"].apply(check_top)\n\ntop_countries_event = top_countries_event[top_countries_event[\"Top\"] == \"Yes\"]","1bde143d":"# in which discipline have the countries won their medals?\n\ntop_event = sns.scatterplot(\n    data = top_countries_event, x = \"Country\",\n    y = \"size\", hue = \"Event\"\n)\ntop_event.legend(loc='center left', bbox_to_anchor=(1.0, 0.5), ncol=1)\nplt.title(\"Events for Top Countries\")\nplt.ylabel(\"Medals\");","1313c555":"#get age and the year of event\ndf[\"Age\"] = ((pd.to_datetime(df[\"Date\"]) - pd.to_datetime(df[\"Date of Birth\"])) \/ np.timedelta64(1, 'Y')).round()\ndf[\"Year_Event\"]= pd.DatetimeIndex(pd.to_datetime(df[\"Date\"])).year\n\n#group ages and year together\ndef group_ages(age):\n    if age in range(0,20):\n        return \"0-19\"\n    elif age in range(20,26):\n        return \"20-25\"\n    elif age in range(26,31):\n        return \"26-30\"\n    elif age in range(31,36):\n        return \"31-35\"\n    elif age in range(36,41):\n        return \"36-40\"\n    else:\n        return \"40+\"\n    \n    \ndef group_years(year):\n    if year in range(1960,1970):\n        return \"1960-1969\"\n    elif year in range(1971,1980):\n        return \"1970-1979\"\n    elif year in range(1980,1990):\n        return \"1980-1989\"\n    elif year in range(1990,2000):\n        return \"1990-1999\"\n    elif year in range(2000,2010):\n        return \"2000-2009\"\n    else:\n        return \"2010+\"\n    \n    \n\ndf[\"AgeGroup\"] = df[\"Age\"].apply(group_ages)\ndf[\"YearGroup\"] = df[\"Year_Event\"].apply(group_years)\n\n#keep only the gold medal winners\ntop_runners = df[df[\"Place\"] == 1.0][[\"YearGroup\",\"AgeGroup\"]].groupby([\"YearGroup\",\"AgeGroup\"],as_index=False).size()\n","db3ec3cd":"#Plot the distribution of winners grouped by age classes\ntop_finisher = sns.catplot(\n    data = top_runners, kind = \"bar\",\n    x = \"YearGroup\",y = \"size\", hue = \"AgeGroup\"\n)\nplt.title(\"1st Place Finisher by Age\")\nplt.xlabel(\"Year of Event\")\nplt.ylabel(\"Number of 1st Place Finisher\");","4a348cfa":"#is there a significant correlation between Age and Place?\ndf[[\"Place\",\"Age\"]].corr()","7076d3de":"#Function to convert running time in seconds\ndef timestamp_to_sec(time):\n    try:\n        return (datetime.datetime.strptime(time, \"%H:%M:%S.%f\") - datetime.datetime(1900, 1, 1)).total_seconds()\n    except:\n        return (datetime.datetime.strptime(time, \"%H:%M:%S\") - datetime.datetime(1900, 1, 1)).total_seconds()","c3baac0a":"df[\"TimeSec\"] = df[\"Time\"].apply(timestamp_to_sec)\nevent_ts = df[[\"YearGroup\",\"Event\",\"TimeSec\"]].groupby([\"YearGroup\",\"Event\"],as_index=False).mean()","43b26696":"event_ts.head()","c381abde":"#Plotting Function for time series of running times\ndef plot_time_series(event):\n    sns.lineplot(data=event_ts[event_ts[\"Event\"]==event],x = \"YearGroup\", y = \"TimeSec\",hue = \"Event\")\n    sns.scatterplot(data=event_ts[event_ts[\"Event\"]==event],x = \"YearGroup\", y = \"TimeSec\",hue = \"Event\",legend=False)\n    plt.title(\"Avg. Running Times in History for \" + event)\n    plt.ylabel(\"Avg. Running Time\")\n    plt.xlabel(\"Year of Event\")\n    plt.plot();","67219ab6":"plot_time_series(\"100 m\")","df0f2d07":"plot_time_series(\"200 m\")","2dff1828":"plot_time_series(\"400 m\")","7981aa59":"plot_time_series(\"800 m\")","0a854460":"plot_time_series(\"1500 m\")","ccb3de2d":"plot_time_series(\"5000 m\")","9ccd8c2c":"plot_time_series(\"10,000 m\")","798f4c7e":"plot_time_series(\"Half marathon\");","cd5f1d6a":"plot_time_series(\"Marathon\")","359cb72c":"def top_runner_place(data,place):\n    place_to_medal = {1:\"Gold\",2:\"Silver\",3:\"Bronze\"}\n    runner = sum_by_place = data[[\"Name\",\"Place\"]][data[\"Place\"] == place].groupby([\"Name\",\"Place\"],as_index=False).size()\n    runner.pop('Place')\n    return runner.set_index('Name').rename(columns={\"size\": place_to_medal[place]})","97dd5b28":"top_runners_1st = top_runner_place(df,1)\n\ntop_runners_2nd = top_runner_place(df,2)\n\ntop_runners_3rd = top_runner_place(df,3)","f14ef395":"total_ranks = pd.concat([top_runners_1st,top_runners_2nd,top_runners_3rd],axis=1).fillna(0).sort_values(by=[\"Gold\",\"Silver\",\"Bronze\"],ascending=False)","2e7e08c9":"total_ranks.head()","6b5ba774":"**Plot all time series depending on the event**","923e023d":"# **EDA for historic Running Times Data**\n\nRunning is a popular art of Sports accross the world. Since the beginning of olympic sports diverse running disciplines are part of it.\nBut how has this sport evolved over the time and how do the best athletes look like?\nWhat are the best countries in this area of sports? \n\nThese answers and more are part of this Exploratory Data Analysis of running data...","6917cf0a":"**Best Countries**\n\nIn the following part of this notebook the focus lies on the exploration of the best countries in running sports over the time","be9735b4":"**How have avg. running times evolved during the observation period?**\n\nAre athletes are getting faster with the time?\nhypothesis: training methods and equipment evolved over the time and make athletes faster - can we observate that?","ab0d9586":"**Who are the best athletes?**\n\nAfter we looked on the countries and their success, let's take a look on the individual athletes and their wins","0735b124":"**Impact of age on winning disciplines**\n\nWhich age group is the most succesfull in winning running disciplines over the time?","1340e776":"As we see, the avg. time over the events has the descreased in the past decades. Just a few events show an vice versa evolution in avg. running times.\n\nSometimes we have very low avg. running times in the first decade between 1960-1970.\nMaybe time tracking was not that accurate as it is nowerdays.","904cbaba":"**If you have any approvements or advices please let me know in the comments**"}}