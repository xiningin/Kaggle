{"cell_type":{"6c4289a7":"code","ae59579e":"code","a88e4a76":"code","a57c0f25":"code","28a06c7b":"code","ef8ecb74":"code","ae0129b4":"code","1173907f":"code","44f17890":"code","8833f547":"code","b638494d":"code","3139fbe6":"code","85933865":"code","3380b1d4":"code","64afcdbf":"code","e61b7cbd":"code","79c018c4":"code","cc3b280a":"code","957cf7fc":"code","d3d516b8":"code","c9cca0cd":"code","e743d39a":"code","aa96f8ca":"code","f0848ae7":"markdown","c22ffc16":"markdown","bcfad651":"markdown","659b1b2a":"markdown","9dc41e1a":"markdown","19855707":"markdown","29477bd5":"markdown","a338a070":"markdown","f4caa0f6":"markdown","fe25d736":"markdown","96c5aa2c":"markdown","56a8ef38":"markdown","9a9f2319":"markdown","e08b967d":"markdown","df4db8ef":"markdown","10b93473":"markdown","f5a3d4d1":"markdown","734cdfef":"markdown","ea97cb67":"markdown","3610c854":"markdown","71a2b5ad":"markdown","2d1cb44d":"markdown","82e0f8b2":"markdown","b0d5475b":"markdown","5514f0d0":"markdown","27f83bc7":"markdown","546f0178":"markdown","f4139b82":"markdown","bf14627c":"markdown","79c67e94":"markdown","6d47b159":"markdown","48234c5e":"markdown","ce069f83":"markdown","cf0615e4":"markdown","7a86dc68":"markdown"},"source":{"6c4289a7":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","ae59579e":"df=pd.read_csv('https:\/\/d17h27t6h515a5.cloudfront.net\/topher\/2017\/October\/59dd1c4c_tmdb-movies\/tmdb-movies.csv')\ndf.head(2)","a88e4a76":"df.dtypes","a57c0f25":"df.drop_duplicates(inplace=True)","28a06c7b":"df['main_genre']=df.genres.str.split(pat='|',expand=True)[0]\ndf['leading_actor']=df.cast.str.split(pat='|',expand=True)[0]\ndf['main_director']=df.director.str.split(pat='|',expand=True)[0]\ndf['profit']=df.revenue_adj-df.budget_adj\n#four more columns added, see the description below.\ndf.drop(['id','imdb_id','cast','homepage','tagline','production_companies','overview','keywords','budget','revenue'],axis=1,inplace=True)\n# The unnecessary columns in my analysis are dropped.\n# The revenue and budget columns columns are dropped and the adjusted columns will be used.\ndf.release_date=pd.to_datetime(df.release_date)\ndf.head(2)","ef8ecb74":"print('The shape of the dataframe is' ,df.shape)\ndf.describe()","ae0129b4":"df.isnull().sum()","1173907f":"df.genres.fillna('unspecified genre',inplace=True)\ndf.main_genre.fillna('unspecified main genre',inplace=True)\ndf.director.fillna('unknown director',inplace=True)\ndf.main_director.fillna('unknown director',inplace=True)\ndf.leading_actor.fillna('unknown leading actor',inplace=True)","44f17890":"if df.isnull().sum().sum() == 0:\n    print('TMDB dataframe now has no missing values !')","8833f547":"pd.plotting.scatter_matrix(df,figsize=(18,18));","b638494d":"df_nz=df[df['revenue_adj']!=0]\ndf_nz=df_nz[df_nz['budget_adj']!=0]\n# df_nz is now defined for this section (nz for nonzero)\n# the new dataframe has no zeros in the adjusted budget and revenue columns.\ndf_nz.shape","3139fbe6":"def categorize_quartiles(df,column_label,bin_names):\n    bin_edges=[\n    df[column_label].describe()['min'],\n    df[column_label].describe()['25%'],\n    df[column_label].describe()['50%'],\n    df[column_label].describe()['75%'],\n    df[column_label].describe()['max']]\n    categorized_column_label=\"categorized_\"+column_label\n    df[categorized_column_label]=pd.cut(df[column_label], bin_edges, labels=bin_names)\n    return df","85933865":"bin_names=['Big Loss','Loss','Medium Profit','High Profit']\ndf_nz=categorize_quartiles(df_nz,'profit',bin_names)\ndf_nz.head(3)","3380b1d4":"df_nz.groupby('categorized_profit').agg(lambda x:x.value_counts().index[0])['main_director']","64afcdbf":"df_nz.groupby('categorized_profit').agg(lambda x:x.value_counts().index[0])['main_genre']","e61b7cbd":"df_nz.groupby('categorized_profit').agg(lambda x:x.value_counts().index[0])['release_year'];","79c018c4":"df_nz[df_nz['categorized_profit']=='High Profit']['main_genre'].value_counts().plot.pie(figsize=(15,15));","cc3b280a":"df_nz[df_nz['categorized_profit']=='Big Loss']['main_genre'].value_counts().plot.pie(figsize=(15,15));","957cf7fc":"high_profit_runtime_mean=df_nz[df_nz['categorized_profit']=='High Profit']['runtime'].mean()\nprint('The average runtime of a high profit movie is {} minutes'.format(int(high_profit_runtime_mean)))","d3d516b8":"popularity_bin_names=['Not Popular','Somewhat Popular','Popular','Very Popular']\ndf=categorize_quartiles(df,'popularity',popularity_bin_names)\ndf.head()","c9cca0cd":"df.groupby('categorized_popularity').agg(lambda x:x.value_counts().index[0])['main_director']","e743d39a":"year_vs_pop_mean=df.groupby('release_year')['popularity'].mean()\nsns.set(rc={'figure.figsize':(20,35)})\nsns.barplot(x=year_vs_pop_mean, y=year_vs_pop_mean.index,orient='h', palette=\"bright\").set_title(\"Year vs Popularity Bar Chart\",fontsize='xx-large');","aa96f8ca":"df['month'] = df['release_date'].dt.month\nmonth_pop_mean=df.groupby('month')['popularity'].mean()\nsns.set(rc={'figure.figsize':(20,10)})\nsns.barplot(x=month_pop_mean.index, y=month_pop_mean, palette=\"bright\").set_title(\"Release Month vs Popularity Bar Plot\",fontsize='xx-large');","f0848ae7":"### Dealing with NaN values:","c22ffc16":"Who is the director whose movies are more likely to be very popular ?","bcfad651":"#### Limitations \n - The dataset has many missing values for the budget, revenue and profit.\n - The drama and action genre are very frequent so they appear in the most popular, least popular and different profit categories  of the movies.\n - The charachteristics of the movie does not guarantee the success or the faliure of it.","659b1b2a":"### Droping duplicates","9dc41e1a":"#### What is the month with the most popular movies?","19855707":"<a id='conclusions'><\/a>\n## Conclusions","29477bd5":"#### Here you can find the years of the biggest losses and largest profits:","a338a070":"Note that the majority of high profit movies are action, comedy, drama or adventure.","f4caa0f6":"<a id='intro'><\/a>\n## Introduction\n\n","fe25d736":"<a id='wrangling'><\/a>\n## Data Wrangling\n\n### General Properties","96c5aa2c":"## Data Cleaning","56a8ef38":"# Investigating TMDB Movies Dataset\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","9a9f2319":"### What are the characteristics associated popular movies ?","e08b967d":"#### Which year has the most popular movies?","df4db8ef":"We can see clearly that a high profit movie is more likely to be an action movie.","10b93473":"Steven Spielberg is the director with most movies that made high profit.","f5a3d4d1":"#### Here you can find the most frequent directors in each profit category:","734cdfef":"#### Here you can find the most frequent genre in each profit category:","ea97cb67":"#### Now you can find a piechart of the  main genre of the movie based on its categorized profit.","3610c854":"### Inspecting data type in each column:","71a2b5ad":"### New Columns Descreption:\n`main_genre`: the main genre of the movie (the first genre in the `genres` list). <br>\n`leading_actor`: the leading actor\/actress of the movie (the first name in the `cast` list). <br>\n`main_director`:the main director of the movie (if there are more than one director). <br>\n`profit`:the net profet of the movie (calculated by profit=revenue-budget). <br>","2d1cb44d":"## Setup","82e0f8b2":"<a id='col_des'><\/a>\n### Columns Descreption:\n\n`id`, `imdb_id` : unique id or imdb id for each movie on TMDB (more about the popularity in this [link](https:\/\/developers.themoviedb.org\/3\/getting-started\/popularity). <br>\n`popularity`: a metric used to measure the popularity of the movie. <br>\n`budget`:the total budget of the moviein USD. <br>\n`revenue`:the total revenue of the movie in USD. <br>\n`original_title`: the original title of the movie. <br>\n`cast`:the names of the cast of the movie separated by \"|\". <br>\n`homepage`: the website of the movie (if it existed). <br>\n`director`:name(s) of the director(s) of the movie (separated by \"|\" if there are more than one director). <br>\n`tagline`:a catchphrase describing the movie. <br>\n`keywords`: keywords related to the movie. <br>\n`overview`:summary of the plot of the movie. <br>\n`runtime`:total runtime of the movie in minutes. <br>\n`genres`: genres of the movie separated by \"|\". <br>\n`production_companies`:production compan(y\/ies) of the movie. <br>\n`release_date`:release date of the movie. <br>\n`vote_count`:number of voters of te movie. <br>\n`vote_average`:the average user rating of the movie <br>\n`release_year`:release year of the movie (from 1960 to 2015) <br>\n`budget_adj`:the total budget of the moviein USD in terms of 2010 dollars, accounting for inflation over time.<br>\n`revenue_adj`:the total budget of the movie in USD in terms of 2010 dollars, accounting for inflation over time.<br>","b0d5475b":"After investigating which movies are more likely to have high or low profit we find that: \n - Steven Spielberg is the director with most movies that made high profit.\n - Renny Harlin is the director with most movies that were big losses.\n - The most frequent genre in high profit movies is action while the most fequent genre in losses is drama.\n - The majority of high profit movies are action, comedy, drama or adventure.\n - The average runtime of a high profit movie is 116 minutes.\n","5514f0d0":"The following cell is defining a function that devides the numerical column to four categories based on its four quartiles.","27f83bc7":"Before we analyze the movies with higher profit, we find that that many movies have the value \"0\" in the `revenue_adj` and the `budget_adj` columns (the `profit` is also not accurate as a result). \\\nThese rows will be dropped in this section.","546f0178":"The middle of the year and the end of the year have the most popular movies.","f4139b82":"### Droping unwanted columns from the dataframe and adding new columns:","bf14627c":"After investigating which movies are more likely to be popular we find that: \n - Steven Spielberg is the director with most movies are very popular.\n - 2015 and 2014 are the years with the highest average popularity score respectively\n - 1966 is the year with the least average popularity score .\n - The middle of the year and the end of the year have the most popular movies.","79c67e94":"<a id='eda'><\/a>\n## Exploratory Data Analysis","6d47b159":"The TMDB movies dataset is a big dataset of ~10,000 movies extracted from [https:\/\/www.themoviedb.org\/](https:\/\/www.themoviedb.org\/). The dataset contains movies from 1960 to 2015. The dataset has various columns about the details of the movies (see the <a href=\"#col_des\">column description<\/a> below).Firstly the data is cleaned to be appropriate for the following analysis; the unnecessary columns are dropped. After preparing the data, the charactersitics of movies are investigated with respect to : \n1. The profit\n2. The popularity\n\\\n\nWe find interesting features are associated with these movies.","48234c5e":"Obviously, from the previous plot2015 and 2014 are the years with the most popular movies respectively.","ce069f83":"### What are the characteristics associated with higher profit movies ?","cf0615e4":"#### Firstly, we need to categorize the movies based on the profit column.","7a86dc68":"Firstly we can have a general look on the correlation between each two variables with the scatter matrix."}}