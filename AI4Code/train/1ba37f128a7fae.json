{"cell_type":{"9c729074":"code","b00a9908":"code","be903903":"code","38b84a87":"code","22557037":"code","91e15875":"code","826f5355":"code","33fde9ef":"code","6c19b101":"code","3a205ae4":"code","1c876409":"code","49f420ac":"markdown","2036434e":"markdown","4bab0c7b":"markdown"},"source":{"9c729074":"import warnings\nwarnings.simplefilter('ignore', DeprecationWarning)\n\nimport pandas as pd\npd.options.mode.chained_assignment = None\n\ndf = pd.read_csv('..\/input\/NFL Play by Play 2009-2018 (v5).csv',low_memory=False)","b00a9908":"#let's see what data fields we have\nlist(df.columns.values)","be903903":"#what kinds of plays are in the data\ndf.play_type.unique()","38b84a87":"#when was the most recent game recorded\ndf.sort_values(by='game_date',ascending=False).head()","22557037":"import seaborn as sns\nsns.set_context(\"talk\")\nsns.set(palette='bright') \nsns.set(rc={'figure.figsize':(12,6)})\nsns.countplot(x=\"play_type\", data=df)","91e15875":"#what data type is the date column and how does it look?\ndf['game_date'].head()","826f5355":"#make the date field a datetime object\ndf['date'] =  pd.to_datetime(df['game_date'], format='%Y\/%m\/%d')\ndf['date'].head()","33fde9ef":"import numpy as np\n\n#create year,month and season fields\ndf['year'] = pd.DatetimeIndex(df['date']).year\ndf['month'] = pd.DatetimeIndex(df['date']).month\ndf['season'] = np.where(df['month']<8, df['year']-1,df['year'])\n\n#play types by season\nsns.set(rc={'figure.figsize':(16,4)})\nsns.countplot(x=\"play_type\", hue=\"season\", data=df)","6c19b101":"df['kickoff'] = np.where(df.play_type =='kickoff',1,0)\ndf.kickoff.sum() \/ df.kickoff.count() * 100","3a205ae4":"df_season = df.groupby(by=['season'])\ndf_season.kickoff.sum() \/ df_season.kickoff.count() * 100","1c876409":"#make a dataset with only kickoffs and see how many were returned by season\nkickoffs = df[df.play_type == 'kickoff']\nkickoffs['percent_returned'] = np.where(kickoffs.return_yards >0,1,0)\nkickoffs_season = kickoffs.groupby(by=['season'])\ntemp = kickoffs_season[['percent_returned']].mean()\ntemp = round(temp,2)\nsns.set(rc={'figure.figsize':(8,10)})\nsns.set_context(\"poster\")\nax=sns.heatmap(temp, annot=True, linewidths=.5, cbar=False,square=False,cmap=\"YlGnBu\")","49f420ac":"^ 2018 so far has a higher percentage of kickoffs (barely) than a typical year","2036434e":"^ Per the chart above, nearly 80% of kickoffs prior to the rule change were returned. After the rule change, that dropped to less than 50%. Similar statistics were found by ESPN reported Paul Carr in 2012. http:\/\/www.espn.com\/blog\/statsinfo\/post\/_\/id\/35597\/kickoff-rule-change-has-big-effect-on-nfl.  The percentage of kickoffs landing in the endzone has steadily declined as well.","4bab0c7b":"^ 5.7% of all plays are kickoffs"}}