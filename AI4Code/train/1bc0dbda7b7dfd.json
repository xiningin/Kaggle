{"cell_type":{"fb4ade66":"code","5cfdaabf":"code","c03819d7":"code","5ae80b63":"code","87fc9e29":"code","0635c0ef":"code","042d25ab":"code","f7035946":"markdown","dcd0c367":"markdown","4c560e7d":"markdown","fd40649f":"markdown","0d66322a":"markdown","da783e8b":"markdown","afd0d3ff":"markdown","5b712924":"markdown","73ef1e99":"markdown","03c08bcf":"markdown","dad68833":"markdown","c839721f":"markdown","88ef453e":"markdown","d82a99b4":"markdown","16666722":"markdown","f8d46551":"markdown","57db1e24":"markdown","2044a545":"markdown","8a84e08c":"markdown"},"source":{"fb4ade66":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport sqlite3\nimport matplotlib.pyplot as plt # actually the only useful package in this part\n\n# get one of the csv files\npreview = pd.read_csv('..\/input\/d\/plumpbear\/bikeshare-202006202105\/202006-divvy-tripdata.csv')\n\n# output the top 5 rows in the file\npreview.head()","5cfdaabf":"# firstly, I create a view to union the 10 sheets, which can simplify my processing.\n\n\n'''\nCREATE VIEW `whole_data_202006-202105` AS\n    SELECT *\n    FROM `bike-share project`.`202006-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202007-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202008-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202009-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202010-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202011-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202012-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202101-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202102-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202103-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202104-divvy-tripdata` \n    UNION SELECT *\n    FROM `bike-share project`.`202105-divvy-tripdata`\n'''\n\n# The code are in 3 quotation marks , since it's a Python environment.\n# If you want to apply this, remove the quotation marks.\n# the organizational structure of the data is as same as the prepare process.\n# the output is same as the above string ","c03819d7":"# process the first table I need\n\n'''\nSELECT *\nFROM (SELECT\n\t ride_id,\n     rideable_type,\n     CONVERT(started_at, DATE) AS date,\n     DAYNAME(started_at) AS day_of_week,\n     CONVERT(started_at, TIME) AS start_time,\n     timediff(ended_at, started_at) AS time_duration,\n     POWER(POWER((end_lat - start_lat) * 111, 2) + POWER((end_lng - start_lng) * 82.64, 2) , 0.5) AS distance,\n     member_casual\nFROM `whole_data_202006-202105`) AS cool\nWHERE\n\ttime_duration > 0 AND distance > 0\n'''\n\n# I use subquery cuz mySQL do not support use WHERE to filter the new column I SELECT\n# The attribute,distance, calls for some geographical knowledge to get a rough outcome in Chicago\n# Anyway, the straight distance is rough for the analysis\n\n# the output is like follow, I upload that to the dataset as well\ncasual_member_diff = pd.read_csv('..\/input\/d\/plumpbear\/bikeshare-202006202105\/casual_member_diff_processed.csv')\ncasual_member_diff.head()","5ae80b63":"'''\nSELECT\n\tc.date,\n    casual_count,\n    member_count,\n    casual_count + member_count AS total_count,\n    casual_count \/ member_count AS casual_to_member\nFROM(SELECT\n\tstr_to_date(left(started_at,10),'%Y-%m-%d') AS date,\n    count(*) AS casual_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'casual'\nGROUP BY date) AS c,\n(SELECT\n\tstr_to_date(left(started_at,10),'%Y-%m-%d') AS date,\n    count(*) AS member_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'member'\nGROUP BY date) AS m\nWHERE c.date = m.date\nORDER BY c.date\n'''\ntrend = pd.read_csv('..\/input\/d\/plumpbear\/bikeshare-202006202105\/trend.csv')\ntrend","87fc9e29":"import plotly as py\nimport plotly.graph_objs as pygo\n\npyplt = py.offline.plot\n\nviz_date = trend['date'].tolist() #get the column of date to a list\nviz_total_date = trend['total_count'].tolist()\nviz_member_date = trend['member_count'].tolist()\nviz_casual_date = trend['casual_count'].tolist()\n\nplt.plot(viz_date, viz_total_date, label = 'total')\nplt.plot(viz_date, viz_member_date, label = 'member')\nplt.plot(viz_date, viz_casual_date, label = 'casual')\nplt.legend() # make label applied\nplt.title('Trends')\nplt.xlabel('time')\nplt.ylabel('number of deals')\nplt.show()\n","0635c0ef":"# the 2nd table I need\n'''\nSELECT\n\tc.start_station_id,\n    casual_count,\n    member_count,\n    casual_count \/ member_count AS casual_to_member\nFROM(SELECT\n\tstart_station_id,\n    count(*) AS casual_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'casual'\nGROUP BY start_station_id) AS c,\n(SELECT\n\tstart_station_id,\n    count(*) AS member_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'member'\nGROUP BY start_station_id) AS m\nWHERE c.start_station_id = m.start_station_id\nORDER BY c.start_station_id\n'''\n# I upload it too\n# and check that\nstation_preview = pd.read_csv('..\/input\/d\/plumpbear\/bikeshare-202006202105\/station_diff.csv')\nstation_preview","042d25ab":"'''\nSELECT\n\tc.casual_count\/m.member_count AS deal_ratio\nFROM\n(SELECT\n    count(*) AS casual_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'casual') AS c,\n(SELECT\n    count(*) AS member_count\nFROM `whole_data_202006-202105`\nWHERE member_casual = 'member') AS m\n'''","f7035946":"<div id=\"sce\">\n<\/div>\n\n# Scenario\n\nI am acting as a junior data analyst working for Cyclistic, a bike-share company in Chicago. The director of marketing believes the company\u2019s future success depends on maximizing the number of annual memberships. Therefore, I want to understand how casual riders and annual members use Cyclistic bikes differently. From these insights, I am going to design a new marketing strategy to convert casual riders into annual members.\n\n## Characters and Teams\n\n* **Lily Moreno:** The director of marketing and my manager. Moreno is responsible for the development of campaigns and initiatives to promote the bike-share program. These may include email, social media, and other channels. \n* **Cyclistic marketing analytics team:** A team of data analysts who are responsible for collecting, analyzing, and reporting data that helps guide Cyclistic marketing strategy, which I am in.\n* **Cyclistic executive team:** The notoriously detail-oriented executive team will decide whether to approve the recommended marketing program.\n\n## The Company\n\nIn 2016, Cyclistic launched a successful bike-share o\u2000ering. Since then, the program has grown to a fleet of 5,824 bicycles that are geotracked and locked into a network of 692 stations across Chicago. The bikes can be unlocked from one station and returned to any other station in the system anytime.\n\n## The Marketing strategy\n\nUntil then, Cyclistic\u2019s marketing strategy relied on building general awareness and appealing to broad consumer segments. One approach that helped make these things possible was the flexibility of its pricing plans: single-ride passes, full-day passes, and annual memberships. Customers who purchase single-ride or full-day passes are referred to as **casual riders**. Customers who purchase annual memberships are **Cyclistic members**. (A main attribute: casual riders\/Cyclistic memebers)\n\n## How the target comes\n\nCyclistic\u2019s finance analysts have concluded that annual members are much more profitable than casual riders.*(I don't know how. I may find out later in another project. And I'll attach a link here then.) *\nAlthough the pricing flexibility helps Cyclistic attract more customers, Moreno believes that maximizing the number of annual members will be key to future growth. Rather than creating a marketing campaign that targets all-new customers, Moreno believes there is a very good chance to convert casual riders into members. She notes that casual riders are already aware of the Cyclistic program and have chosen Cyclistic for their mobility needs.\n\n\n## Goal\nDesign marketing strategies aimed at converting casual riders into annual members.","dcd0c367":"### 2. distribution\n\nThe data as above is used to tell the difference of rideable type, weekday, time of the day, duration, and distance.\n\nAnd then I want to know the difference of member type between stations. So the primary key of this table will be station_id.\uff08start station\uff09","4c560e7d":"The output is 0.8552.\n\nThe company can make a viz with the map of Chicago, mark each station as a point, and change the dense of the color of the point to show different ratio. It should tell us the distribution of different stations.\n\nAs the latitude and longitude of each station is different, I average them to get the location of that.\n\nYou can see that [here](https:\/\/public.tableau.com\/app\/profile\/tianyang.zhang\/viz\/mapofrides\/1_1).\n\n**Some findings and recommendations:**\n\n1. the stations at the periphery all have low member ratio.\n2. The distributions of the rides and stations are roughly overlaping.(The more stations, the more rides). It shows that a higher density might leads to high member ratio.\n3. But, the peripheral stations(also the station at low-density area) are much less profitable than the stations in the core area.\n4. We may add more stations to the peripheral areas, but it is not profitable which is not our target.\n5. So I recommend to set more stations in the core area.","fd40649f":"3. **Credibility**\n\nFor all the data is objective, I believe there is no bias. And the data is fisrt-handed, which makes it credible.\n\nFor checking all these stuff, here is a list called 'ROCCC':\n* Reliable\n* Original\n* Comprehensive\n* Current\n* Cited","0d66322a":"We can see that there are 13 coloums:\n* ride_id\n* rideable_type (docked_bike, electric_bike, classic_bike)\n* started_at\n* ended_at\n* start_station_name\n* start_station_id\n* end_station_name\n* end_station_id\n* start_lat\n* start_lng\n* end_lat\n* end_lng\n* member_casual\n\nWe can classify them into different types of imformation:\n1. type of bike(diable or not; which kind of disability)\nrideable_type\n2. time(may tell the time length, day of week, time of day...)\nstarted_at, ended_at\n3. location(distribution, distance)\nstart_station_name, start_station_id, end_station_name, end_station_id, start_lat, start_lng, end_lat, end_lng\n4. customer type\nmember_casual","da783e8b":"<div id = 'pro'>\n<\/div>\n\n# My procedure\n\n## Ask\n\nActually, all things about the business task have been shown above. But as a regular step, we need to ask some questions to the main skateholders and maybe the project manager to clarify the business tasks we need to work out. Besides your may ask something macro-questions to have a in-depth understanding about how your work help the whole business. That can help you do your work better.\n<div id = 'bustask'>\n<\/div>\n\nFor this project, **the business task** is to unearth the difference between casual riders and Cyclistic members and plan to convert the casual riders to Cyclistic members.\n\nAnd my deliverables are listed as follow:\n1. [A clear statement of the business task](#bustask) (This hyperlink may not have any effect, because the business task is shown right above.)\n2. A description of all data sources used \n3. Documentation of any cleaning or manipulation of data \n4. A summary of your analysis \n5. Supporting visualizations and key findings\n6. Your top three recommendations based on your analysis\n\nAll of these will be presented below.","afd0d3ff":"## Process\n\n1. basics\nThen I will deal with the data to make it suitable for analysis.\nAs for the available data, I would like to analyze the difference of bike-type(disability-type if possible), time duration, day of week, time of day, location distribution(may need the Chicago map),and  distance(calculated by lat & lng).\n\nThen I processing these data with mySQL. I'll show the code below, but SQL code are not suitable in this Python environment. I will upload the output of SQL anyway.\n\n","5b712924":"## Time distribution\n\n<div class='tableauPlaceholder' id='viz1625336501682' style='position: relative'><noscript><a href='#'><img alt='\u4eea\u8868\u677f 2 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ri&#47;Ridesofmembertyperbytimeweekday&#47;2_1&#47;1_rss.png' style='border: none' \/><\/a><\/noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' \/> <param name='embed_code_version' value='3' \/> <param name='site_root' value='' \/><param name='name' value='Ridesofmembertyperbytimeweekday&#47;2_1' \/><param name='tabs' value='no' \/><param name='toolbar' value='yes' \/><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ri&#47;Ridesofmembertyperbytimeweekday&#47;2_1&#47;1.png' \/> <param name='animate_transition' value='yes' \/><param name='display_static_image' value='yes' \/><param name='display_spinner' value='yes' \/><param name='display_overlay' value='yes' \/><param name='display_count' value='yes' \/><param name='language' value='en-US' \/><\/object><\/div>                <script type='text\/javascript'>                    var divElement = document.getElementById('viz1625336501682');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.minWidth='420px';vizElement.style.maxWidth='650px';vizElement.style.width='100%';vizElement.style.minHeight='587px';vizElement.style.maxHeight='887px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.minWidth='420px';vizElement.style.maxWidth='650px';vizElement.style.width='100%';vizElement.style.minHeight='587px';vizElement.style.maxHeight='887px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else { vizElement.style.width='100%';vizElement.style.height='727px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https:\/\/public.tableau.com\/javascripts\/api\/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                <\/script>\n\n### Commuters are our main target audience. More rides leads to more members.\n\n","73ef1e99":"I found this case from Google and analyzed it by myself.\n\nThis is going to introduce how I did that and all my results.\n\nFeel free to contact me if there are any problems. [Click to send me an email.](mailto:victorzju@163.com)\n\n*copyright\uff1aTianyang Zhang\n","03c08bcf":"## Map distribution\n\n<div class='tableauPlaceholder' id='viz1625336736710' style='position: relative'><noscript><a href='#'><img alt='\u4eea\u8868\u677f 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;ma&#47;mapofrides&#47;1_1&#47;1_rss.png' style='border: none' \/><\/a><\/noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' \/> <param name='embed_code_version' value='3' \/> <param name='site_root' value='' \/><param name='name' value='mapofrides&#47;1_1' \/><param name='tabs' value='no' \/><param name='toolbar' value='yes' \/><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;ma&#47;mapofrides&#47;1_1&#47;1.png' \/> <param name='animate_transition' value='yes' \/><param name='display_static_image' value='yes' \/><param name='display_spinner' value='yes' \/><param name='display_overlay' value='yes' \/><param name='display_count' value='yes' \/><param name='language' value='en-US' \/><\/object><\/div>                <script type='text\/javascript'>                    var divElement = document.getElementById('viz1625336736710');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.minWidth='420px';vizElement.style.maxWidth='2040px';vizElement.style.width='100%';vizElement.style.minHeight='587px';vizElement.style.maxHeight='1107px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.minWidth='420px';vizElement.style.maxWidth='2040px';vizElement.style.width='100%';vizElement.style.minHeight='587px';vizElement.style.maxHeight='1107px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else { vizElement.style.width='100%';vizElement.style.height='977px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https:\/\/public.tableau.com\/javascripts\/api\/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                <\/script>\n\n### The more adequate bike supply, the higher member rate\n\nThe peripheral area has a higher stations\/rides ratio, where has a lower casual\/members ratio.\n","dad68833":"# Catalogue\n[1.Scenario](#sce) some backgrounds\n\n[2.Procedure](#pro) my conducting procedure including *Ask, Prepare, Process, Analyze & Share*. (It is supposed to contain one more step called *Act*. While, I don't perform that. I present my  recommendations anyway.)\n\n[3.Deliverable](#deli)","c839721f":"## Analyze and Visulization\n\n1. trend\n\nformatting the data order by day\n\ncalculate the deal numbers each day, and get the trend","88ef453e":"## Prepare\n\n1. **Get the data**\n    \n    You can find the data with a long time period [here](https:\/\/divvy-tripdata.s3.amazonaws.com\/index.html), if you want.\n    \n    I select the previous 12 months data, and upload them to Kaggle. You can get them [here] (https:\/\/www.kaggle.com\/plumpbear\/bikeshare-202006202105) directly.\n\n2. **Check the dataset**\n    \n    Add data on the right. Then code as follow to check the structure of the data.","d82a99b4":"You can also see my viz with tableau, which is more clear, [here](https:\/\/public.tableau.com\/app\/profile\/tianyang.zhang\/viz\/bike_share_trends\/1_1).\n\n** Some findings **\n1. Overall, the number of deals is going down.\n2. There are 3 peaks in the line chart, 2020-6-27, 2020-11-7, and 2021-2-27. We may find out why.\n3. Among all 3 peaks, the member deals are a little bit more than the casual deals, which means the aim to convert the casual to member is right.\n4. Before 2020-2-27(one of the peak), the difference between member and casual is tiny at most date. While after 2020-2-27,the deal-number gap between them became more obvious. We may find out why.","16666722":"<div id=\"deli\">\n<\/div>\n\n# Deliverable\n\nI am supposed to make some slides as a deliverable, but It's not so prensentable here at kaggle. So I just use this Markdown to show that to you.\n\n## The trend\n<div class='tableauPlaceholder' id='viz1625336048821' style='position: relative'><noscript><a href='#'><img alt='Trends ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;bi&#47;bike_share_trends&#47;2&#47;1_rss.png' style='border: none' \/><\/a><\/noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' \/> <param name='embed_code_version' value='3' \/> <param name='site_root' value='' \/><param name='name' value='bike_share_trends&#47;2' \/><param name='tabs' value='no' \/><param name='toolbar' value='yes' \/><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;bi&#47;bike_share_trends&#47;2&#47;1.png' \/> <param name='animate_transition' value='yes' \/><param name='display_static_image' value='yes' \/><param name='display_spinner' value='yes' \/><param name='display_overlay' value='yes' \/><param name='display_count' value='yes' \/><param name='language' value='en-US' \/><\/object><\/div>                <script type='text\/javascript'>                    var divElement = document.getElementById('viz1625336048821');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https:\/\/public.tableau.com\/javascripts\/api\/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                <\/script>\n\n\n### Overall, the number of deals is going down. But Feb 2021 may be the turning point.\n### After 2020-2-27,the gap between members and casuals became more obvious.\n\nThe recovery of the Covid-19 leads to more rides and more members. We need to grasp this opportunity to gain more customers.","f8d46551":"Then I calculate the whole deal ratio with SQL. \n\nThe code is as follow:","57db1e24":"## Time duration\n\n<div class='tableauPlaceholder' id='viz1625337067560' style='position: relative'><noscript><a href='#'><img alt='time duration count ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ti&#47;Timedurationcount&#47;8&#47;1_rss.png' style='border: none' \/><\/a><\/noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' \/> <param name='embed_code_version' value='3' \/> <param name='site_root' value='' \/><param name='name' value='Timedurationcount&#47;8' \/><param name='tabs' value='no' \/><param name='toolbar' value='yes' \/><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ti&#47;Timedurationcount&#47;8&#47;1.png' \/> <param name='animate_transition' value='yes' \/><param name='display_static_image' value='yes' \/><param name='display_spinner' value='yes' \/><param name='display_overlay' value='yes' \/><param name='display_count' value='yes' \/><param name='language' value='en-US' \/><\/object><\/div>                <script type='text\/javascript'>                    var divElement = document.getElementById('viz1625337067560');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https:\/\/public.tableau.com\/javascripts\/api\/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                <\/script>\n\n### The casuals have more 1+ hours rides\n\nUsually, the members are limited by 1 hour riding per time.","2044a545":"## Recommendations\n* Target: commuters\n* Plan for better bike supply in core area\n* Design some 1+ hour available membership","8a84e08c":"### 3. Others\n\n1. daytime\n\nWe can see the trend of rides through 24 hours.\n\nFor clearer, I count rides in hours.\n\nYou can see it [here](https:\/\/public.tableau.com\/app\/profile\/tianyang.zhang\/viz\/Ridesofmembertyperbytime\/4).\n\n**Fingdings:**\n\n* 5pm(the off duty time) is the top\n* the more rides, the greater gap between member and casual\n\nFor there is a peak at the off duty time, I am wondering if there is any deffirence of workday and weekend here. So I make another chart to present this. You can see it [here](https:\/\/public.tableau.com\/app\/profile\/tianyang.zhang\/viz\/Ridesofmembertyperbytimeweekday\/2_1).\n\n**Findings:**\n\n* At workday there is another peak(8AM,about the time when going to work). So, the commuters should be our important target audience.\n* At weekend, the peak is 2PM. The time between 10AM and 7PM is the fastigium.\n\n2. duration\n\nThen I want to know the difference of time duration between member and casual.\n\nI count that in minute and create a [line chart](https:\/\/public.tableau.com\/app\/profile\/tianyang.zhang\/viz\/Timedurationcount\/8).\n\n**Findings**\n\n* Most riders ride less than 1 hour.\n* Casuals take more more-than-one-hour ride than members.\n"}}