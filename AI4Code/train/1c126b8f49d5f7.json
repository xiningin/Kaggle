{"cell_type":{"db8c633c":"code","ebebeb40":"code","2e9e374c":"code","65041405":"code","16076d89":"code","cae1246e":"code","2c6876bf":"code","cb6fc9de":"code","73977b7d":"code","656c5fc5":"code","2eee359e":"code","218b2d1c":"code","eee74857":"code","0978bc65":"code","6ffc7f21":"code","24b5fed7":"code","78bc2505":"code","02269612":"markdown","ae3ede7c":"markdown","1d077f33":"markdown","cbcb24a9":"markdown","b4134642":"markdown","b118822d":"markdown","74c75dac":"markdown","8ea21119":"markdown","b274889c":"markdown","a0f296af":"markdown","6e8f7ddb":"markdown","98a21448":"markdown","c510052c":"markdown"},"source":{"db8c633c":"#Let's start with adding libraries I will use\n\nimport numpy as np \nimport pandas as pd \nimport seaborn as sns\n\n# plotly\nimport chart_studio.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot, plot\nimport plotly as py\ninit_notebook_mode(connected=True)\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport plotly.io as pio\npio.templates.default = \"plotly_dark\"\nfrom plotly.subplots import make_subplots\n\n# word cloud library\nfrom wordcloud import WordCloud\n\n# matplotlib\nimport matplotlib.pyplot as plt\n\nfrom collections import Counter\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","ebebeb40":"# Upload Data\nearthquake = pd.read_csv(\"..\/input\/earthquake.csv\")\nearthquake.head()","2e9e374c":"earthquake.info()","65041405":"Richter_mean = earthquake.Richter.mean()\nearthquake[\"Severity_level\"] = [\"Heavy\" if Richter_mean < each else \"Harmless\" for each in earthquake.Richter]\n\nxm_mean = earthquake.xm.mean()\nearthquake[\"Xm_level\"] = [\"High\" if xm_mean < each else \"Low\" for each in earthquake.xm]\n\nDepth_mean = 60\nearthquake[\"Depth_level\"] = [\"Deep\" if Depth_mean < each else \"Shallow\" for each in earthquake.Depth]\n\nprint(Richter_mean)\nprint(xm_mean)\nprint(Depth_mean)\n\nearthquake.head()","16076d89":"# I  want to see how many different Direction we have.\nprint(earthquake.Direction.unique())","cae1246e":"#Heatmap\ndata1 = earthquake[[\"Depth\",\"xm\",\"md\",\"Richter\",\"mw\",\"ms\",\"mb\"]]\n\ndata1.corr()\nf,ax = plt.subplots(figsize=(15,15))\nsns.heatmap(data1.corr(), annot=True, linewidths=.5, fmt=\".1f\",ax=ax)\nplt.show()","2c6876bf":"earthquake.boxplot(column=\"Richter\",by=\"Depth_level\")\nplt.show()","cb6fc9de":"earthquake.boxplot(column=\"mw\",by=\"Depth_level\")\nplt.show()","73977b7d":"# I added new column as Violence and it will show violence level.\nviolence = 5 \nearthquake[\"Violence\"] = [\"Strong\" if violence < each else \"Soft\" for each in earthquake.mw]\nearthquake.head()","656c5fc5":"print(earthquake[\"Violence\"].value_counts(dropna =False))","2eee359e":"earthquake['Date'] =pd.to_datetime(earthquake['Date'])","218b2d1c":"# I will continue with Strong Earthquake (mw>5), so I filtered as Strong_earthquake data.\nstrong_earthquake = earthquake[(earthquake.Violence==\"Strong\")]\nstrong_earthquake.head()\n","eee74857":"# MW vs Richter of each state\n# visualize\nf,ax1 = plt.subplots(figsize =(35,10))\nsns.pointplot(x='City',y='mw',data=earthquake,color='lime',alpha=0.8)\nsns.pointplot(x='City',y='Richter',data=earthquake,color='red',alpha=0.8)\nplt.text(40,0.6,'MW',color='red',fontsize = 17,style = 'italic')\nplt.text(40,0.55,'Richter',color='lime',fontsize = 18,style = 'italic')\nplt.xlabel('City',fontsize = 15,color='blue')\nplt.ylabel('Values',fontsize = 15,color='blue')\nplt.title('MW  VS  Richter',fontsize = 20,color='blue')\nplt.grid()","0978bc65":"g = sns.jointplot(earthquake.mw, earthquake.Richter, kind=\"kde\", size=7)\n\nplt.show()","6ffc7f21":"city = earthquake.City.value_counts()\nplt.figure(figsize=(10,7))\nsns.barplot(x=city[:12].index,y=city[:12].values)\nplt.xticks(rotation=45)\nplt.title('Most dangerous cities',color = 'blue',fontsize=15)\n\n","24b5fed7":"earthquake.head()","78bc2505":"years = [str(each) for each in list(earthquake.Year.unique())]  # str unique years\ntypes = ['Soft', 'Strong']\ncustom_colors = {\n    'Soft': 'rgb(34, 139, 34)',\n    'Strong': 'rgb(167, 34, 0)'\n}\n# make figure\nfigure = {\n    'data': [],\n    'layout': {},\n    'frames': []\n}\n\nfigure['layout']['geo'] = dict(showframe=False, showland=True, showcoastlines=True, showcountries=True,\n               countrywidth=1, \n              landcolor = 'rgb(217, 217, 217)',\n              subunitwidth=1,\n              showlakes = True,\n              lakecolor = 'rgb(255, 255, 255)',\n              countrycolor=\"rgb(5, 5, 5)\")\nfigure['layout']['hovermode'] = 'closest'\nfigure['layout']['sliders'] = {\n    'args': [\n        'transition', {\n            'duration': 400,\n            'easing': 'cubic-in-out'\n        }\n    ],\n    'initialValue': '1910',\n    'plotlycommand': 'animate',\n    'values': years,\n    'visible': True\n}\nfigure['layout']['updatemenus'] = [\n    {\n        'buttons': [\n            {\n                'args': [None, {'frame': {'duration': 500, 'redraw': False},\n                         'fromcurrent': True, 'transition': {'duration': 300, 'easing': 'quadratic-in-out'}}],\n                'label': 'Play',\n                'method': 'animate'\n            },\n            {\n                'args': [[None], {'frame': {'duration': 0, 'redraw': False}, 'mode': 'immediate',\n                'transition': {'duration': 0}}],\n                'label': 'Pause',\n                'method': 'animate'\n            }\n        ],\n        'direction': 'left',\n        'pad': {'r': 10, 't': 87},\n        'showactive': False,\n        'type': 'buttons',\n        'x': 0.1,\n        'xanchor': 'right',\n        'y': 0,\n        'yanchor': 'top'\n    }\n]\n\nsliders_dict = {\n    'active': 0,\n    'yanchor': 'top',\n    'xanchor': 'left',\n    'currentvalue': {\n        'font': {'size': 20},\n        'prefix': 'Year:',\n        'visible': True,\n        'xanchor': 'right'\n    },\n    'transition': {'duration': 300, 'easing': 'cubic-in-out'},\n    'pad': {'b': 10, 't': 50},\n    'len': 0.9,\n    'x': 0.1,\n    'y': 0,\n    'steps': []\n}\n\n# make data\nyear = 1910\nfor ty in types:\n    dataset_by_year = earthquake[earthquake['Year'] == year]\n    dataset_by_year_and_cont = dataset_by_year[dataset_by_year['Violence'] == ty]\n    \n    data_dict = dict(\n    type='scattergeo',\n    lon = earthquake['Long'],\n    lat = earthquake['Lat'],\n    hoverinfo = 'text',\n    text = ty,\n    mode = 'markers',\n    marker=dict(\n        sizemode = 'area',\n        sizeref = 1,\n        size= 10 ,\n        line = dict(width=1,color = \"white\"),\n        color = custom_colors[ty],\n        opacity = 0.7),\n)\n    figure['data'].append(data_dict)\n    \n# make frames\nfor year in years:\n    frame = {'data': [], 'name': str(year)}\n    for ty in types:\n        dataset_by_year = earthquake[earthquake['Year'] == int(year)]\n        dataset_by_year_and_cont = dataset_by_year[dataset_by_year['Violence'] == ty]\n\n        data_dict = dict(\n                type='scattergeo',\n                lon = dataset_by_year_and_cont['Long'],\n                lat = dataset_by_year_and_cont['Lat'],\n                hoverinfo = 'text',\n                text = ty,\n                mode = 'markers',\n                marker=dict(\n                    sizemode = 'area',\n                    sizeref = 1,\n                    size= 10 ,\n                    line = dict(width=1,color = \"white\"),\n                    color = custom_colors[ty],\n                    opacity = 0.7),\n                name = ty\n            )\n        frame['data'].append(data_dict)\n\n    figure['frames'].append(frame)\n    slider_step = {'args': [\n        [year],\n        {'frame': {'duration': 300, 'redraw': False},\n         'mode': 'immediate',\n       'transition': {'duration': 300}}\n     ],\n     'label': year,\n     'method': 'animate'}\n    sliders_dict['steps'].append(slider_step)\n\n\nfigure[\"layout\"][\"autosize\"]= True\nfigure[\"layout\"][\"title\"] = \"Earthquake\"       \n\nfigure['layout']['sliders'] = [sliders_dict]\n\niplot(figure)\n","02269612":"When you zoom in you can see earthquakes in Turkey between 1910-2017.\n\nWhen you click green and red buttons you can change format. If you click red button you will see only Soft earthquakes (lower than 5 mw).\n\nIn the lower of the map you can see time period.","ae3ede7c":"In this project I want to show earthquakes in Turkey between 1910-2017. We can see effects, severity level, some features of earthquakes, type of earthquakes in terms of technical locution. I am gonna explain all of these types of term such as Mw, Md, Ms...","1d077f33":"So we can say there is some relationship as;\n\nDepth has positive relationship with MB(0.3),MS(0.3),MW(0.2),Richter(0.2),XM(0.3) but there is no relation with MD(0).\n\nThe biggset corr in these varies is the between XM and MW (0.8), MS(0.7), MB(0.6).\n","cbcb24a9":"# > Depth Effect\nThe depth of the earthquake is very important. The above effect decreases as the earthquake deepens. Now we can see that with box plot.\n\nEarthquakes with a depth of 0-60 km are considered as shallow earthquakes. Earthquakes with depths of 70-300 km in the ground are medium depths. Deep earthquakes are earthquakes that are more than 300 meters deep. earthquakes in Turkey, which is usually between 0-60 km and depths are shallow earthquakes.","b4134642":"Biggest magnitude value in specified magnitude values (MD, ML, Mw, Ms and Mb).\n\nMagnitude types (MD: Duration, ML: Local, Mw: Moment, Ms: Surface wave, Mb: Body-wave). 0.0 (zero) means no calculation for that type of magnitude.\n\nHigher magnitude (xM).\n\nRichter : The severity of the earthquake\n\nTime Dependent Size (Md)\n\nSurface Wave Size (Ms)\n\nObject Wave Size (Mb)\n\nMoment Size (Mw)\n\nMw size type is the most reliable than others. In the scientific world, if the moment magnitude can be calculated for an earthquake, it is considered that other types of magnitude are not needed. So I will use this type for the comment.\n","b118822d":"> What is the difference between Magnitud and Violence?\n\nA measure of the energy released at the source of the magnitude earthquake; violence is a measure of the effects of the earthquake on buildings and people.\n\n> What is the Magnitude of the Earthquake?\n\nThe magnitude of the earthquake is defined as the logarithm of the amplitude of the earthquake waves on the seismograph recorded over a certain period of time. (Richter-ML, mb, MS, MW)","74c75dac":" # Earthquakes in Turkey between 1910-2017","8ea21119":"# > Now, we can see these earthquakes in map untill now.\n","b274889c":"Then I am gonna search some relationship between these datas. First of all we can see realtionship between all variables with heatmap.\n","a0f296af":"As we can see from the last print,\n\nThere is 22806 Soft Earthquake (MW lower than 5)\n\n1201 Strong Earthquake (MW greater than 5).","6e8f7ddb":"We can say  there is really positive relationship between these two variables. We can use both of them when we are searching about eartquake.\n","98a21448":"# > Types of earthquake intensity\n\nGreat if MW >= 8\n\nMajor if MW between 7 - 7.9\n\nStrong if MW between 6 - 6.9\n\nModerate if MW between 5 - 5.9\n\nLight if MW between 4 - 4.9\n\nMinor if MW between 3 - 3.9\n\nVery Minor <= 3","c510052c":"# > Data Summary"}}