{"cell_type":{"0203c34d":"code","6bfa8b96":"code","008d3a16":"code","c4634632":"code","2373523f":"code","8ba4640e":"code","5f7a436b":"code","09614d71":"code","3c8b581f":"code","765d2b9a":"code","71f0e48b":"code","b0b925e9":"code","eabdcf3f":"code","a1ba272d":"code","b5025301":"code","859183be":"code","3d7f52db":"code","c836a884":"code","076d9690":"code","554ad272":"code","ed6217eb":"code","c39443c5":"code","275e7abb":"code","3df8c235":"code","719a8d6a":"code","b7f22628":"code","5a71a0ba":"code","50141277":"code","b497aaf1":"code","49bbd9db":"code","bdc484d8":"code","b437bf86":"markdown","964ea1cf":"markdown","bc399d64":"markdown","f3ee0eb1":"markdown","4e99f2d1":"markdown","87e00962":"markdown","53ee07e2":"markdown","16631e8e":"markdown","dfa2af77":"markdown","8ce50320":"markdown","b32ea48e":"markdown","5e607c23":"markdown","1bffa12c":"markdown","363b079b":"markdown","64908afc":"markdown","47f5e0b3":"markdown","ca3857d9":"markdown","62c7a571":"markdown","adacaf67":"markdown","1db5906b":"markdown","cf72b58f":"markdown","1975d0bd":"markdown"},"source":{"0203c34d":"\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom warnings import filterwarnings\nfilterwarnings('ignore')\nfrom sklearn.model_selection import train_test_split\nfrom tqdm import tqdm_notebook\nimport xgboost as xgb\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","6bfa8b96":"train = pd.read_csv('..\/input\/covid19-global-forecasting-week-1\/train.csv')\ntest = pd.read_csv(r'..\/input\/covid19-global-forecasting-week-1\/test.csv')\ntrain.head()\n","008d3a16":"test.head()","c4634632":"print(\"shape of train data is {}\".format(train.shape))\nprint(\"shape of test data is {}\".format(test.shape))","2373523f":"# checking basic info for test and train\ntrain.info()","8ba4640e":"# Data missing information for train\ndata_info=pd.DataFrame(train.dtypes).T.rename(index={0:'column type'})\ndata_info=data_info.append(pd.DataFrame(train.isnull().sum()).T.rename(index={0:'null values (nb)'}))\ndata_info=data_info.append(pd.DataFrame(train.isnull().sum()\/train.shape[0]*100).T.\n                         rename(index={0:'null values (%)'}))\ndisplay(data_info)","5f7a436b":"# Data missing information for test\ndata_info=pd.DataFrame(test.dtypes).T.rename(index={0:'column type'})\ndata_info=data_info.append(pd.DataFrame(test.isnull().sum()).T.rename(index={0:'null values (nb)'}))\ndata_info=data_info.append(pd.DataFrame(test.isnull().sum()\/test.shape[0]*100).T.\n                         rename(index={0:'null values (%)'}))\ndisplay(data_info)","09614d71":"train['Date'] = pd.to_datetime(train['Date'])\ntrain['Date'] = train['Date'].dt.date\nconfirmed_case = train.groupby('Date')['ConfirmedCases'].agg('sum')\nFatalities = train.groupby('Date')['Fatalities'].agg('sum')\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(\n                x=train.Date,\n                y=confirmed_case,\n                name=\"Confirmed Case around the World\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=train.Date,\n                y=Fatalities,\n                name=\"Death around around the world\",\n                line_color='red',\n                opacity=0.8))\n\nfig.update_layout(title_text=\"Growth Number of cases of COVID 19 Around the world\",template=\"plotly_dark\")\n\nfig.show()","3c8b581f":"confirmed_case_country =train.groupby('Country\/Region')['ConfirmedCases'].agg('max').sort_values(ascending =False)[:15]\nFatalities_country = train.groupby('Country\/Region')['Fatalities'].agg('max').sort_values(ascending =False)[:15]\nframe = {'Country':confirmed_case_country.index,'Cases': confirmed_case_country }\nCountryWise = pd.DataFrame(frame)\nframe = {'Country':Fatalities_country.index,'Cases':Fatalities_country}\nCountryWise_death = pd.DataFrame(frame)","765d2b9a":"# Confirmed Cases analysis\n\nfig = px.bar(CountryWise, x= 'Country', y='Cases',color='Cases',labels={'Country':'Confirmed Cases'},height=400,template=\"plotly_dark\")\nfig.show()","71f0e48b":"# Death Cases analysis\n\nfig = px.bar(CountryWise_death, x= 'Country', y='Cases',color='Cases',labels={'Country':'Death Cases'},height=400,template=\"plotly_dark\")\nfig.show()","b0b925e9":"china = train.loc[train['Country\/Region']=='China'].groupby('Date').agg('sum')\nItaly = train.loc[train['Country\/Region']=='Italy'].groupby('Date').agg('sum')\nIran = train.loc[train['Country\/Region']=='Iran'].groupby('Date').agg('sum')","eabdcf3f":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n                x=china.index,\n                y=china.ConfirmedCases,\n                name=\"Confirmed Case in China\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=china.index,\n                y=china.Fatalities,\n                name=\"Death case in China\",\n                line_color='red',\n                opacity=0.8))\n\nfig.update_layout(title_text=\"View of china\",template=\"plotly_dark\")\n\nfig.show()","a1ba272d":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n                x=Italy.index,\n                y=Italy.ConfirmedCases,\n                name=\"Confirmed Case in Italy\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=Italy.index,\n                y=Italy.Fatalities,\n                name=\"Death case in Italy\",\n                line_color='red',\n                opacity=0.8))\n\nfig.update_layout(title_text=\"View of Italy\",template=\"plotly_dark\")\n\nfig.show()","b5025301":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n                x=Iran.index,\n                y=Iran.ConfirmedCases,\n                name=\"Confirmed Case in Iran\",\n                line_color='deepskyblue',\n                opacity=0.8))\n\nfig.add_trace(go.Scatter(\n                x=Iran.index,\n                y=Iran.Fatalities,\n                name=\"Death case in Iran\",\n                line_color='red',\n                opacity=0.8))\n\nfig.update_layout(title_text=\"View of Iran\",template=\"plotly_dark\")\n\nfig.show()","859183be":"#train.drop('Proviance\/state',axis=1,inplace = True)\ntrain_country = train.groupby('Country\/Region').agg('max')","3d7f52db":"train_country","c836a884":"fig = px.choropleth(train_country, locations=train_country.index, \n                    locationmode='country names', color=\"ConfirmedCases\", \n                    hover_name=\"ConfirmedCases\", range_color=[1,10000], \n                    color_continuous_scale=\"hot\", \n                    title='Confimed Case around the world')\n\nfig.update_layout(template=\"plotly_dark\")\n\nfig.show()\n\n\n\n","076d9690":"fig = px.choropleth(train_country, locations=train_country.index, \n                    locationmode='country names', color=\"Fatalities\", \n                    hover_name=\"Fatalities\", range_color=[1,2000], \n                    color_continuous_scale=\"hot\", \n                    title='Death Case around the world')\n\nfig.update_layout(template=\"plotly_dark\")\n\nfig.show()","554ad272":"CountryWise['death_case'] = CountryWise_death['Cases'] \nprint(\"Correlation between Confirmed cases and death cases in worst hit countires {:.2f}%\".format(CountryWise.corr()['death_case'][0]*100))","ed6217eb":"# Mean Confirmed Cases and Death Cases in Mainland China\nprint(\"Mean Confirmed Cases in world  {:.1f}\".format(train_country['ConfirmedCases'].mean()))\nprint(\"Mean Confirmed Cases in world  {:.1f}\".format(train_country['Fatalities'].mean()))\nprint(\"Total Death Rate in world is {:.1f}%\".format((train_country['Fatalities'].mean()\/train_country['ConfirmedCases'].mean())*100))","c39443c5":"train_country_exclude_3 = train_country.loc[(train_country.index!='China') & (train_country.index!='Italy') & (train_country.index!= 'Iran')]","275e7abb":"# Mean Confirmed Cases and Death Cases in Mainland China\nprint(\"Mean Confirmed Cases in rest of world  {:.1f}\".format(train_country_exclude_3['ConfirmedCases'].mean()))\nprint(\"Mean Confirmed Cases in rest of world  {:.1f}\".format(train_country_exclude_3['Fatalities'].mean()))\nprint(\"Total Death Rate in rest of world is {:.1f}%\".format((train_country_exclude_3['Fatalities'].mean()\/train_country_exclude_3['ConfirmedCases'].mean())*100))","3df8c235":"train_italy = train.loc[train['Country\/Region']=='Italy']\ntrain_italy = train_italy[['Date','ConfirmedCases']]\ntrain_italy['Date'] = pd.to_datetime(train_italy['Date'])\ntrain_italy.index = train_italy['Date']\ntrain_italy.drop('Date',inplace=True,axis=1)","719a8d6a":"train_italy","b7f22628":"def create_features(df):\n    \"\"\"\n    Creates time series features from datetime index\n    \"\"\"\n    df['Cases'] = df['ConfirmedCases']\n    df['date'] = df.index\n    df['dayofweek'] = df['date'].dt.dayofweek\n    df['quarter'] = df['date'].dt.quarter\n    df['month'] = df['date'].dt.month\n    df['year'] = df['date'].dt.year\n    df['dayofyear'] = df['date'].dt.dayofyear\n    df['dayofmonth'] = df['date'].dt.day\n    df['weekofyear'] = df['date'].dt.weekofyear\n    \n    X = df[['quarter','month','year','dayofyear','dayofmonth','weekofyear','Cases']]\n    return X","5a71a0ba":"train_italy = create_features(train_italy)\ny = train_italy.pop('Cases')\nx = train_italy\nx_train,x_test,y_train,y_test = train_test_split(x, y, test_size=0.2, random_state=0)","50141277":"print(\"shape of x train and y trains is {} {}\".format(x_train.shape, y_train.shape))\nprint(\"shape of x test and y test is {} {}\".format(x_test.shape, y_test.shape))","b497aaf1":"reg = xgb.XGBRegressor(colsample_bytree=0.4,\n                 gamma=0,                 \n                 learning_rate=0.005,\n                 max_depth=10,\n                 min_child_weight=1.5,\n                 n_estimators=10000,                                                                    \n                 reg_alpha=0.75,\n                 reg_lambda=0.45,\n                 subsample=0.6,\n                 seed=42)\n\nreg.fit(x_train, y_train,\n        eval_set=[(x_train, y_train), (x_test, y_test)],\n        early_stopping_rounds=1000, #stop if 50 consequent rounds without decrease of error\n        verbose=False) # Change verbose to True if you want to see it train","49bbd9db":"xgb.plot_importance(reg, height=0.9)","bdc484d8":"## Continue to Work ","b437bf86":"**Province\/state has 54% missing value that we can understand which country provide state-wise information which country not**","964ea1cf":"# Background \nThe 2019\u201320 coronavirus pandemic is an ongoing pandemic of coronavirus disease 2019 (COVID-19), caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2) The outbreak was first identified in Wuhan, Hubei, China, in December 2019, and was recognised as a pandemic by the World Health Organization (WHO) on 11 March 2020.\n\nThe virus is typically spread from one person to another via respiratory droplets produced during coughing Primarily, it spreads when people are in close contact but it may also spread when one touches a contaminated surface and then their eyes, nose or mouth.It is most contagious when people are symptomatic, although spread may be possible before symptoms appear.\n\n\n![download.jpg](attachment:download.jpg)\n\nThe White House Office of Science and Technology Policy (OSTP) pulled together a coalition research groups and companies (including Kaggle) to prepare the COVID-19 Open Research Dataset (CORD-19) to attempt to address key open scientific questions on COVID-19.\n\nThis is one of the two complementary forecasting tasks to predict COVID-19 spread. This task is based on various regions across the world","bc399d64":"## References\nhttps:\/\/www.kaggle.com\/abhinand05\/covid-19-digging-a-bit-deeper#1.-Confirmed-Cases-Over-Time","f3ee0eb1":"**Good News For China !!!!As we can that After Feb 23 Number of Confirm case remain almost constant but parallely we can see increase death number of cases**","4e99f2d1":"## Let's more about Top Three Countries","87e00962":"## Data and Modules","53ee07e2":"# 2020 COVID 19 Pandemic","16631e8e":"# is there any relationship between confirmed cases and death in worst hit countries ?","dfa2af77":"# Question 1 : How is growth in number of cases","8ce50320":"### Yes there is difference !! Still in world we have 2.5% Death rate after removing outlier. But We need to take precaution","b32ea48e":"# Question 2 : Worst hit Countries and how they are doing ?","5e607c23":"**Well !!! Iran Condition is also worse .. we can observe quardatic growth in total register case as well in number of death cases**","1bffa12c":"**White Colored County hit worst like China,Iran,Italy,USA**","363b079b":"**Apart from china where COVID 19 Originated,from Data We can say Europe hit worst in case of both Confirmed and Death cases**\n\n**One More thing to be noted,Mostly Worst hit countires are developed**","64908afc":"# Forecasting Part","47f5e0b3":"**Well !!! Italy Condition is far worse .. we can see exponential growth in total register case as well in number of death cases**","ca3857d9":"# Question we are Addressing\n\n1. How is the growth of Number of cases ?\n2. How is worst hit countires doing ?\n3. is there any relationship between confirmed cases and death in worst hit countries ?\n4. How overall World is doing ?\n5. At last we will try to Forecast cases?\n\n![image_gif.gif](attachment:image_gif.gif)","62c7a571":"**There is 88.02% realtionship between Confirmed cases and death case** ","adacaf67":"# Question 3 : How overall World is doing ?","1db5906b":"### Let's Check is there any Difference in mean after removing outlier such as (china,Italy,Iran)","cf72b58f":"**We can observe that from 8 March Onward Take firm grip around the world as we can see exponetial growth in Confirmed cases**\n\n**But Total number of causlity point of view ,last week onward growth pick pace one major cause country like Italy,Iran etc..**","1975d0bd":"## Let's Do it for only for Italy "}}