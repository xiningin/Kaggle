{"cell_type":{"aaeafb3a":"code","c40d2664":"code","cdd616ef":"code","0d27df73":"code","6c89430f":"code","1bd8a3ad":"code","1bb6c610":"code","9ce90018":"code","e9bbd21d":"code","6c9ca2b3":"code","6dec715b":"code","3374ffac":"code","0a67f2db":"code","69eef442":"code","ee19b058":"code","d6df699a":"code","691b204d":"code","d990a1ea":"code","d7da6fdb":"code","4f93a24f":"code","5bcfc4af":"code","01310695":"code","15d0b69a":"code","76fe4d80":"code","a5202501":"code","7a1e4b59":"code","12992fe6":"code","34285c7b":"code","a6d35bb2":"code","ae9acc92":"code","e46b9ab7":"code","11084a10":"code","5604bc1f":"code","89b19681":"code","7bbf676c":"code","71d2e967":"code","5314f224":"code","08b4f0b0":"code","7269ce45":"code","9c95a5db":"code","cf1f3cbf":"code","c32941c2":"code","bed0e959":"code","916a4d4f":"code","1b78772f":"code","f41b559c":"code","f9ac1c75":"markdown","0464adbd":"markdown","ae909333":"markdown","abd2ca8f":"markdown","0981c95f":"markdown","994ed574":"markdown","abffa11e":"markdown","fee6b51d":"markdown","335cb11f":"markdown","020d08d3":"markdown","a83aa083":"markdown","7fbb984a":"markdown","b60351c1":"markdown","0f6a306e":"markdown","b7999d6a":"markdown","e73433b5":"markdown","7270cf81":"markdown","655210ef":"markdown","e71182f0":"markdown","c725e2d1":"markdown","055429a3":"markdown","33db026a":"markdown","7ae9ae32":"markdown","07dd4c3a":"markdown"},"source":{"aaeafb3a":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np","c40d2664":"df=pd.read_csv('..\/input\/water-potability\/water_potability.csv')\ndf","cdd616ef":"df.info()","0d27df73":"df.describe()","6c89430f":"sns.set_theme(style=\"ticks\")\nf, ax = plt.subplots(figsize=(10,5))\nsns.despine(f)\n\nsns.histplot(df,x=\"ph\", hue=\"Potability\",multiple=\"stack\",palette=\"light:m_r\",edgecolor=\".3\")\n\nplt.xlabel('ph Level')\n","1bd8a3ad":"fig = sns.kdeplot(df['Chloramines'], shade=True, color=\"r\")\nfig = sns.kdeplot(df['Sulfate'], shade=True, color=\"b\")\nfig = sns.kdeplot(df['Organic_carbon'], shade=True, color=\"g\")\nfig = sns.kdeplot(df['Trihalomethanes'], shade=True, color=\"r\")\nplt.show()","1bb6c610":"sns.set_theme(style=\"ticks\")\nf, ax = plt.subplots(figsize=(10,5))\nsns.despine(f)\n\nsns.histplot(df,x=\"Chloramines\", hue=\"Potability\",multiple=\"stack\",palette=\"light:m_r\",edgecolor=\".3\")\n","9ce90018":"sns.set_theme(style=\"ticks\")\nf, ax = plt.subplots(figsize=(10,5))\nsns.despine(f)\n\nsns.histplot(df,x=\"Turbidity\", hue=\"Potability\",multiple=\"stack\",palette=\"flare\",edgecolor=\".3\")\n","e9bbd21d":"df['Hardness'].unique()","6c9ca2b3":"def f(x):\n    if x<17.1:\n        x=\"Soft\"\n    elif 17.1<x<60:\n        x=\"Slightly hard\"\n    elif 60 <x <120:\n        x=\"Moderately hard\"\n    elif 120 <x <180:\n        x=\"Hard\"\n    elif x > 180:\n        x=\"very hard\"\n    return x","6dec715b":"df['Hard'] = df['Hardness'].apply(f)","3374ffac":"sns.set_theme(style=\"ticks\")\nf, ax = plt.subplots(figsize=(10,10))\nsns.despine(f)\n\nsns.histplot(df,x=\"Hardness\", hue=\"Hard\",multiple=\"stack\",palette=\"husl\",edgecolor=\".3\")\n","0a67f2db":"df.head()","69eef442":"sns.set_theme(style=\"ticks\")\nf, ax = plt.subplots(figsize=(10,5))\nsns.despine(f)\n\nsns.histplot(df,x=\"Conductivity\", hue=\"Potability\",multiple=\"stack\",palette=\"ch:s=.25,rot=-.25\",edgecolor=\".3\")\n","ee19b058":"# labels = df['Potability']\n# colors = ['lightskyblue','gold']\ny = df['Potability']\n\nplt.pie(y)\nplt.show() ","d6df699a":"df.describe()","691b204d":"df.isnull().sum()","d990a1ea":"df['Sulfate'] = df['Sulfate'].replace(np.nan,0)\ndf['ph'] = df['ph'].replace(np.nan,0)\ndf['Trihalomethanes'] = df['Trihalomethanes'].replace(np.nan,0)","d7da6fdb":"df[\"ph\"]=df[\"ph\"].fillna(df['ph'].median)\ndf[\"Sulfate\"]=df[\"Sulfate\"].fillna(df['Sulfate'].median)\ndf[\"Trihalomethanes\"]=df[\"Trihalomethanes\"].fillna(df['Trihalomethanes'].median)","4f93a24f":"df.isnull().sum()","5bcfc4af":"df.head()","01310695":"df[\"Hardness\"].shape","15d0b69a":"df.drop('Hard',axis=1,inplace=True)","76fe4d80":"data=df.corr()\nfeatures=data.index\nplt.figure(figsize=(10,10))\n\n#Plotting heatmap with Seaborn\n\ns=sns.heatmap(df[features].corr(),annot=True,cmap='RdYlGn')","a5202501":"plt.boxplot(df[\"ph\"])\nplt.show()","7a1e4b59":"plt.boxplot(df[\"Hardness\"])\nplt.show()","12992fe6":"plt.boxplot(df[\"Solids\"])\nplt.show()","34285c7b":"plt.boxplot(df[\"Chloramines\"])\nplt.show()","a6d35bb2":"plt.boxplot(df[\"Sulfate\"])\nplt.show()","ae9acc92":"plt.boxplot(df[\"Conductivity\"])\nplt.show()","e46b9ab7":"plt.boxplot(df[\"Organic_carbon\"])\nplt.show()","11084a10":"plt.boxplot(df[\"Turbidity\"])\nplt.show()","5604bc1f":"plt.boxplot(df[\"Trihalomethanes\"])\nplt.show()","89b19681":"df.shape","7bbf676c":"def drop_outliers(data,feature):\n    iqr=1.5 * (np.percentile(data[feature],80)-np.percentile(data[feature],10))\n    data.drop(data[data[feature]> (iqr+np.percentile(data[feature],80))].index,inplace=True)\n    data.drop(data[data[feature]< (np.percentile(data[feature],10)-iqr)].index,inplace=True)","71d2e967":"drop_outliers(df,'ph')\ndrop_outliers(df,'Hardness')\ndrop_outliers(df,'Solids')\ndrop_outliers(df,'Chloramines')\ndrop_outliers(df,'Sulfate')\ndrop_outliers(df,'Conductivity')\ndrop_outliers(df,'Organic_carbon')\ndrop_outliers(df,'Trihalomethanes')\ndrop_outliers(df,'Turbidity')","5314f224":"df.shape","08b4f0b0":"x = df.drop('Potability',axis=1).values\ny = df['Potability'].values","7269ce45":"from sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score, confusion_matrix, classification_report","9c95a5db":"x_train,x_test,y_train,y_test=train_test_split(x,y,test_size=.3,random_state=42)","cf1f3cbf":"from sklearn.preprocessing import StandardScaler    \nst_x= StandardScaler()    \nx_train= st_x.fit_transform(x_train)    \nx_test= st_x.transform(x_test)    ","c32941c2":"from sklearn.ensemble import RandomForestClassifier  \nclassifier= RandomForestClassifier(n_estimators= 10, criterion=\"entropy\")  \nclassifier.fit(x_train, y_train)  ","bed0e959":"#Predicting the test set result  \ny_pred= classifier.predict(x_test)  ","916a4d4f":"from sklearn.metrics import confusion_matrix  \ncm= confusion_matrix(y_test, y_pred)  ","1b78772f":"# View accuracy score\naccuracy_score(y_test, y_pred)","f41b559c":"# View the classification report for test data and predictions\nprint(classification_report(y_test, y_pred))","f9ac1c75":"#### Creating confusion matrix","0464adbd":"#### We can see there are so many missing values in ph , Sulfate and Trihalmethanes. The number of missing values is so high so I am going to replace the missing values with median.","ae909333":"## Model selection","abd2ca8f":"### Finding Outliers","0981c95f":"### From the above graph we are able to understand that the quantity of Chloramines is not more or not less is good for drinkable water.","994ed574":"![https:\/\/thumbs.dreamstime.com\/b\/water-hardness-scale-soft-to-very-hard-83373799.jpg](attachment:water_hardness.jpg)","abffa11e":"Turbidity is the measure of relative clarity of a liquid. ... Material that causes water to be turbid include clay, silt, very tiny inorganic and organic matter, algae, dissolved colored organic compounds, and plankton and other microscopic organisms. Turbidity makes water cloudy or opaque.","fee6b51d":"#### High quality deionized water has a conductivity of about 0.05 \u03bcS\/cm at 25 \u00b0C, typical drinking water is in the range of 200\u2013800 \u03bcS\/cm, while sea water is about 50 mS\/cm (or 50,000 \u03bcS\/cm). Conductivity is traditionally determined by connecting the electrolyte in a Wheatstone bridge","335cb11f":"![https:\/\/s25180.pcdn.co\/wp-content\/uploads\/2018\/08\/iStock-692910116_crop.jpg](attachment:water.jpg)","020d08d3":"# Feature Engineering","a83aa083":"![https:\/\/www.google.com\/url?sa=i&url=https%3A%2F%2Fwww.quora.com%2FWhy-is-the-water-of-low-electrical-conductivity-used-in-water-treatment-system-in-boilers-I-know-its-related-to-scaling-but-what-is-the-relationship-between-scale-formation-and-electrical-conductivity&psig=AOvVaw0SzD9C22E83AdyhIvEWStX&ust=1637946283881000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCPjZ08r_s_QCFQAAAAAdAAAAABAU](attachment:conductivity.jpg)","7fbb984a":"### We can see from the above graph is that the density of Chlorimines is high. So this is one of the most important element for water quality. Now we have to see is this is good or bad for water quality.","b60351c1":"#### The best way to find the outliers is to visualize.The data points which fall below Q1 \u2013 1.5 IQR or above Q3 + 1.5 IQR are outliers.where Q1 and Q3 are the 25th and 75th percentile of the dataset respectively, and IQR represents the inter-quartile range and given by Q3 \u2013 Q1","0f6a306e":"### Sample Scaling","b7999d6a":"## Standardizing the data","e73433b5":"#### The term hardness was originally applied to waters that were hard to wash in, referring to the soap wastingproperties of hard water. ... Dissolved calcium and magnesium salts are primarily responsible for most scaling in pipes and water heaters and cause numerous problems in laundry, kitchen, and bath.\n","7270cf81":"#### We can see that the probability of hardness is mostly in this dataset","655210ef":"## Correlation checking","e71182f0":"### Predict the test data","c725e2d1":"### Data Visualization","055429a3":"#### It is the best way to handle missing values as in this way the data is not gone or lose any data","33db026a":"### \tChloramines\tSulfate\tOrganic_carbon\tand Trihalomethanes plays a great role in water quality.The density of these elements measure the quality. So that I visualize the density of these elements.","7ae9ae32":"### Cheking the Null values","07dd4c3a":"###                                                             Conductivity of water"}}