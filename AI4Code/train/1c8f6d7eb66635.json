{"cell_type":{"a3b725bb":"code","23d6ba38":"code","55929fbc":"code","43c456c9":"code","8ff2c52f":"code","f3d35680":"code","4bff3dd0":"code","a87c6fd7":"code","f64817b4":"code","e53e96cd":"code","14cb4eb0":"code","35d1c371":"code","cc0fa278":"code","3440e232":"code","1150209c":"code","4a3fac28":"code","b3c9c8b9":"code","569d7923":"code","6a789e41":"code","56f2b323":"code","a64e54c1":"code","1c7aaea7":"code","d71c30f8":"code","0679486f":"code","63a8a46b":"code","a7af65f7":"code","53d04dad":"code","14a1a521":"code","1686f2ea":"code","36a0d8b0":"code","0a24e2ca":"code","e7b82e45":"code","1967883a":"code","26d05821":"code","0e2caa6a":"code","80f5b78b":"code","88f29247":"code","f286873f":"code","9bdc113e":"code","62592d32":"code","188b50c9":"code","9277154c":"code","2cfc8702":"code","1985b242":"code","cf012feb":"code","e93c6540":"code","72cc8e73":"code","c95b53f8":"code","17bbc5f6":"code","ce802541":"code","4fdb8049":"markdown","a65cce84":"markdown","065afddb":"markdown","e4c8a6c4":"markdown","ca9286ec":"markdown","47a5f57a":"markdown","bd07fe32":"markdown","f7c950c7":"markdown","85044262":"markdown","e73bb65f":"markdown","c68c5caa":"markdown","8630392a":"markdown","49c7b36d":"markdown","a9dd01ef":"markdown","9707c179":"markdown","e346160f":"markdown","8baa0e9e":"markdown","4115a70a":"markdown","4da45403":"markdown","839ea250":"markdown","3a6401d0":"markdown","9ff07b91":"markdown","501b0d5e":"markdown","a4c10e90":"markdown","4585cd61":"markdown","87992cab":"markdown","760826da":"markdown","868c077f":"markdown","91badd4c":"markdown","8d6502a6":"markdown","e4c23437":"markdown","119176f8":"markdown","67b26427":"markdown","b8d148a8":"markdown","93a9e7a0":"markdown","5db1b3e1":"markdown","b9e3e8cc":"markdown","8249a992":"markdown","c86e2071":"markdown","ab388a45":"markdown","a2ca45ca":"markdown","83716caf":"markdown","8cd4f208":"markdown","ff1ca9b8":"markdown","7d218515":"markdown","b073a95e":"markdown","598be6da":"markdown","0167681c":"markdown","f19df1d3":"markdown","66196472":"markdown"},"source":{"a3b725bb":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport scipy.stats as stats\nimport scipy\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom scipy.stats import ttest_1samp, ttest_ind,wilcoxon,mannwhitneyu\nfrom statsmodels.stats.power import ttest_power","23d6ba38":"#Using pandas to read csv file\ndata = pd.read_csv('..\/input\/insurance.csv')","55929fbc":"mydata = pd.DataFrame(data)\nmydata","43c456c9":"mydata.head() \n#displays the top 5 rows of the dataset","8ff2c52f":"mydata.shape","f3d35680":"mydata.info() \n#can also use mydata.dtypes to find datatype of each attribute","4bff3dd0":"mydata.isnull().sum()","a87c6fd7":"#5 point summary will give Xmin, 25th percentile, Median, 75th percentile,Xmax values\nmydata.describe()","f64817b4":"#Additional information of all attributes\nmydata.describe(include = 'all')","e53e96cd":"#Since these columns are continuous variables hence using pairplot\n#Pairplot plots frequency distribution (histogram) & scatter plots\nsns.pairplot(mydata[['bmi','age','charges']])","14cb4eb0":"sns.distplot(data['bmi'])","35d1c371":"sns.distplot(data['age'])","cc0fa278":"sns.distplot(data['charges'])","3440e232":"sns.countplot(data['children'], hue = data['sex'])","1150209c":"#Skewness is a measure of attribute's symmetry.\nmydata.skew(axis = None)","4a3fac28":"#Outliers are exceptions which are undesirable. Boxplots depict outliers as *\nsns.boxplot(data = mydata, orient = 'h')","b3c9c8b9":"sns.boxplot(mydata['bmi'])","569d7923":"sns.boxplot(mydata['age'])","6a789e41":"sns.boxplot(mydata['charges'])","56f2b323":"sns.catplot(x = 'region', y = 'children', data = mydata, hue = 'sex', kind = 'violin', col = 'smoker')","a64e54c1":"sns.pairplot(data = mydata, hue = 'region')","1c7aaea7":"sns.pairplot(data = mydata, hue = 'smoker')","d71c30f8":"sns.pairplot(data = mydata, hue = 'sex')","0679486f":"#Null hypothosis: H0 = Smoking does not affect Insurance Charges\n#Alternate hypothesis: Ha = Smoking does affect Insurance Charges\n\nYes = np.array(mydata[mydata['smoker'] == 'yes']['charges'])\nNo = np. array(mydata[mydata['smoker'] == 'no']['charges'])\nfig = plt.figure(figsize = (10,6))\nsns.distplot(Yes)\nsns.distplot(No)\nfig.legend(labels = [\"Yes\",\"No\"])","63a8a46b":"#Using 2 sided T test for independent samples\n\nt_statistic, p_value = stats.ttest_ind(Yes,No)\nt_statistic, p_value","a7af65f7":"if p_value < 0.05:\n    print(\"Reject Null hypothesis\")\nelse:\n    print(\"Fail to reject Null hypothesis\")","53d04dad":"#Using mannwhitneyu test\nu_statistic, p_value = mannwhitneyu(Yes, No)\nu_statistic, p_value\n#u_statistic, p_value leads us to reject Null hypothesis","14a1a521":"#Calculate Power of test - This is the probability of rejecting the Null hypothesis\n#To show how statistically significant is the mannwhitneyu test\n(np.mean(Yes) - np.mean(No))\/ np.sqrt(((len(Yes) - 1)*np.var(Yes) + (len(No) - 1)*np.var(No))\/ len(Yes) + len(No)-2)","1686f2ea":"print(ttest_power(1.4333, nobs = (len(Yes) + len(No)), alpha = 0.05, alternative = 'two-sided'))","36a0d8b0":"#Null Hypothesis: H0 = Bmi of Males do not differ significantly from that of Females\n#Alternate Hypothesis: Ha = Bmi of Males differs significantly from that of Females\n#2 sided T test for independent samples\nbmi_male = np.array(mydata[mydata['sex'] == 'male']['bmi'])\nbmi_female = np.array(mydata[mydata['sex'] == 'female']['bmi'])\n\nfig = plt.figure(figsize = (10,6))\nsns.distplot(bmi_male)\nsns.distplot(bmi_female)\nfig.legend(labels = [\"BMI_Male\",\"BMI_Female\"])","0a24e2ca":"#Using 2 sided T test for independent samples\nt_statistic,p_value = stats.ttest_ind(bmi_male,bmi_female)\nt_statistic,p_value","e7b82e45":"if p_value < 0.05:\n    print(\"Reject Null hypothesis\")\nelse:\n    print(\"Fail to Reject Null hypothesis\")","1967883a":"#Using mannwhitneyu test\nu_statistic, p_value = mannwhitneyu(bmi_male, bmi_female)\nu_statistic, p_value\n#u_statistic, p_value leads us to Fail to reject Null hypothesis","26d05821":"#Calculate Power of test - This is the probability of rejecting the Null hypothesis\n#To show how statistically significant is the mannwhitneyu test\n(np.mean(bmi_male) - np.mean(bmi_female))\/ np.sqrt(((len(bmi_male) - 1)*np.var(bmi_male) + (len(bmi_female) - 1)*np.var(bmi_female))\/ len(bmi_male) + len(bmi_female)-2)","0e2caa6a":"print(ttest_power(0.020, nobs = (len(bmi_male) + len(bmi_female)), alpha = 0.05, alternative = 'two-sided'))","80f5b78b":"#As Smokers and Gender are categorical variables hence we use Proportions test\n#Null hypothesis: H0 = Proportion of smokers do not differ significantly in different genders\n#Alternate hypothesis: Ha = Proportion of smokers differs significantly in different genders\n\npd.crosstab(mydata['sex'], mydata['smoker'], margins = True)","88f29247":"sns.countplot(mydata['sex'], hue = mydata['smoker'])","f286873f":"#Ex11 = Expected value of Smoker = No & Sex = Female\n#Ex12 = Expected value of Smoker = No & Sex = Male\n#Ex21 = Expected value of Smoker = Yes & Sex = Female\n#Ex22 = Expected value of Smoker = Yes & Sex = Male\nEx11 = (1064 * 662) \/ 1338\nEx12 = (1064 * 676) \/ 1338\nEx21 = (274 * 662) \/ 1338\nEx22 = (274 * 676) \/ 1338","9bdc113e":"from statsmodels.stats.proportion import proportions_ztest\n\nz_stats, p_val = proportions_ztest([115,159], [662,676])\nz_stats, p_val","62592d32":"if p_val < 0.05:\n    print('Reject Null Hypothesis')\nelse:\n    print('Fail to Reject Null Hypothesis')","188b50c9":"#Using Chi square test sum(Obs - Exp)^2\/ Exp\nobserved_values = scipy.array([547,517,115,159])\nn = observed_values.sum()\nexpected_values = scipy.array([Ex11,Ex12,Ex21,Ex22])\nchi_square_stat, p_value = stats.chisquare(observed_values, f_exp=expected_values)\nchi_square_stat, p_value","9277154c":"#Degree of freedom for chi square test = (row - 1)(col -1)\ndof = (2-1)*(2-1)\ndof","2cfc8702":"#Using Chi-square distribution table, we should check if chisquare stat of 7.765 exceeds \n#critical value of chisquare distribution. Critical value of alpha is 0.05 for 95% confidence \n#which is 3.84. As 7.765 > 3.84, we can reject Null Hypothesis\n\nif chi_square_stat > 3.84:\n    print(\"Reject Null Hypothesis\")\nelse:\n    print(\"Fail to Reject Null Hypothesis\")","1985b242":"#Null Hypothesis: H0 = Distribution of BMI for women with 0,1,2 children is same\n#Alternate Hypothesis: Ha = Distribution of BMI for women with 0,1,2 children is not same\n\nbmidata = mydata[(mydata['children'] <= 2) & (mydata['sex'] == 'female')][['sex','bmi', 'children']]\nbmidata.head()","cf012feb":"#Grouping into 3 groups, 0,1,2 children\nzero_ch = np.array(bmidata[bmidata['children'] == 0]['bmi'])\none_ch = np.array(bmidata[bmidata['children'] == 1]['bmi'])\ntwo_ch = np.array(bmidata[bmidata['children'] == 2]['bmi'])","e93c6540":"#Relationship between Bmi and children for women\nbmigraph = sns.jointplot(bmidata['bmi'],bmidata['children'])\nbmigraph = bmigraph.annotate(stats.pearsonr, fontsize=10, loc=(0.2, 0.8))","72cc8e73":"sns.boxplot(x = 'children', y = 'bmi', data = bmidata)","c95b53f8":"#Use One Way ANOVA for 3 sample groups \n#Null Hypothesis: H0: mean(zero_ch) = mean(one_ch) = mean(two_ch)\n#Alternate Hypothesis: Ha: One of the means would differ","17bbc5f6":"import statsmodels.api as sm\nfrom statsmodels.formula.api import ols\n \nmod = ols('bmi ~ children', data = bmidata).fit()\naov_table = sm.stats.anova_lm(mod, typ=2)\nprint(aov_table)","ce802541":"# Here p_value is 0.79376 > 0.05 hence we Fail to Reject Null Hypothesis therefore \n\nif 0.79 > 0.05:\n    print(\"Fail to Reject Null Hypothesis\")\nelse:\n    print(\"Reject Null Hypothesis\")","4fdb8049":"As per the above distribution, smoking does affect Insurance charges. Let's verify this using statistical analysis ","a65cce84":"3). Plot the Distribution of 'charges' column, which is right skewed ","065afddb":"There are outliers in bmi & charges columns. While there are no outliers in age column.","e4c8a6c4":"As per above graph, proportion of smokers seem to be significantly different in different genders. Let's study this further using statistical analysis.","ca9286ec":"4). Plot distribution of 'children' using countplot","47a5f57a":"This clearly states the Power of test is 1.0 which means Null hypothesis will be rejected 10 out of 10 times","bd07fe32":"**3.g). Check presence of outliers in Bmi, age, charges**","f7c950c7":"**Answer: Charges of people who smoke differs significantly from the people who don't smoke**","85044262":"2). Displaying outliers in age data","e73bb65f":"Using Mannwhitneyu Test to further test this statistically","c68c5caa":"# Step 1. Import necessary libraries and read dataset","8630392a":"# Step 3. Perform Statistical Analysis","49c7b36d":"No Null values present","a9dd01ef":"**3.d). 5 point summary of all numerical attributes**","9707c179":"3). Displaying outliers in charges data","e346160f":"**3.h). Distribution of Categorical columns include children**","8baa0e9e":"**4.b).Does bmi of males differ significantly from that of females?**","4115a70a":"t_statistic is 46.66 standard deviations away from the expected value while p_value helps to determine significance of the results. Here p_value is negligible","4da45403":"t_statistic is 1.69 standard deviations away from the expected value while p_value helps to determine significance of the results.","839ea250":"This clearly states the Power of test is 0.1 which means Null hypothesis will be rejected 1 out of 10 times as in Null hypothesis will be accepted 9 out of 10 times","3a6401d0":"Pairplot is useful to show distribution between various columns","9ff07b91":"Mannwhitneyu test gives a large u_statistic and a very insignificant p value, hence we reject Null Hypothesis   ","501b0d5e":"**3.c). Checking presence of missing values**","a4c10e90":"**3.e). Distribution of 'bmi', age and charges columns**","4585cd61":"# Step 2. Perform Basic EDA","87992cab":"As per z_statistics, the proportion differs 2.78 standard deviations below the expected value","760826da":"**3.b). Datatype of each attribute**","868c077f":"when,\n* skewness = 0 : normally distributed\n* skewness > 0 : right skewed\n* skewness < 0 : left skewed","91badd4c":"**Answer: BMI of Males does not differ significantly with that of BMI of Females**","8d6502a6":"From both the above graph we can derive BMI distribution for women with 0,1,2 children are same.\n\nLet's analyze this further using statistical analysis.","e4c23437":"There are 4 categorical columns Age, Sex, Children, Region, Smoker\n\nTo show distribution of Categorical columns, Violinplot can be used to depict scatter of the data","119176f8":"**3.i). Pairplot that includes all of the columns of the data**","67b26427":"**Answer: Proportion of smokers differs significantly with Gender**","b8d148a8":"Gives shape of the data, 1338 rows and 7 columns","93a9e7a0":"**4.c). Is the proportion of smokers significantly different in different genders?**","5db1b3e1":"**2. Read the data as a Dataframe**","b9e3e8cc":"****Answer: Distribution of BMI for women with 0,1,2 children is same****","8249a992":"Mannwhitneyu test gives a large u_statistic while p_value is 0.05, hence we Fail to reject Null hypothesis","c86e2071":"**3.a). Shape of data**","ab388a45":"There's significant count of population who don't have children","a2ca45ca":"As Smoker & Gender are categorical variables hence we use Chi-Square test to further test the relationship between them","83716caf":"**4.d). Is the distribution of bmi across women with no children, one child and two children, the same ?**","8cd4f208":"**4.a).Do charges of people who smoke differ significantly from the people who don't?**","ff1ca9b8":"**Answer: Proportion of smokers differs significantly with Gender**","7d218515":"2). Plot Distribution of 'age' column","b073a95e":"Plotting individual distribution charts for BMI, Age, Charges columns\n\n1). Plot the Distribution of 'bmi' column, it follows Normal distribution","598be6da":"Here we have three groups. Analysis of variance can determine whether the means of three or more groups are different. ANOVA uses F-tests to statistically test the equality of means.","0167681c":"1). Displaying outliers in bmi data","f19df1d3":"As per the above distribution, we can say distribution between BMI of Male and Female does not differ significantly. Let's verify this using statistical analysis ","66196472":"**3.f). Measure of skewness of Bmi, age & charges columns**"}}