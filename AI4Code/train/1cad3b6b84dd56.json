{"cell_type":{"0a5eafbc":"code","2f491865":"code","63939166":"code","fa2a6121":"code","99f8340e":"code","3b55b440":"code","a793d20a":"code","1c0b2d67":"code","a91960aa":"code","b74ae5d9":"code","5cfca88f":"code","ea3bd6fc":"code","901ffbed":"code","20f8606b":"code","13d6eefd":"code","721862ab":"code","9f3c8bfa":"code","f0b37f75":"code","341e2983":"code","522042e4":"code","4afd83aa":"code","a55c0bcd":"code","9aeb4b11":"markdown","ba300c7a":"markdown","106a5b85":"markdown","35fb24be":"markdown"},"source":{"0a5eafbc":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n%matplotlib inline\nplt.style.use('ggplot')\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","2f491865":"# Load datasets\ndata = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data.csv')\ndata_w_genre = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data_w_genres.csv')\ndata_by_artist = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data_by_artist.csv')\ndata_by_genre = pd.read_csv('..\/input\/spotify-dataset-19212020-160k-tracks\/data_by_genres.csv')","63939166":"# Have a quick look on all columns\nprint(data.columns)\nprint(data_w_genre.columns)","fa2a6121":"# What I will focus on\n# - instrumentalness (Ranges from 0 to 1)\n# - key (All keys on octave encoded as values ranging from 0 to 11, starting on C as 0, C# as 1 and so on\u2026)\n# - liveness (Ranges from 0 to 1)\n# - loudness (Float typically ranging from -60 to 0)\n# - mode (0 = Minor, 1 = Major)\n# - name (Name of the song) > this should not be included?\n\nwill_part = ['acousticness','artists','instrumentalness', 'key', 'liveness', 'loudness', 'mode', 'name']\npart2 = data[will_part]\npart2.head()","99f8340e":"# Remove duplicate data\nis_dup_id = data['id'].duplicated()\nduplicate_ids = data[is_dup_id]['id']","3b55b440":"# find the number of unique artist\nartist_set = set()\nfor list_ in data['artists']:\n    artist_add\n","a793d20a":"vals, counts = np.unique(part2['key'], return_counts=True)\nplt.bar(vals, counts)\n# 0-11 as expected","1c0b2d67":"# most songs have low instrument\npart2['instrumentalness'].hist()\npart2['instrumentalness'].sort_values()\n# all within 0-1","a91960aa":"part2['len_name'] = part2['name'].apply(len)\npart2['len_name'].hist(bins=30)","b74ae5d9":"taylor = data[data['artists']==\"['Taylor Swift']\"]","5cfca88f":"taylor.head()","ea3bd6fc":"taylor['pop_10_bucket'] = np.ceil(taylor['popularity']\/10)*10\ntaylor.groupby(['pop_10_bucket','year']).count()['id']\ntaylor.groupby(['year','pop_10_bucket']).count()['id']","901ffbed":"# max popularity of song in each release year\ntaylor.groupby('year').max()['popularity'].plot()\nplt.show()","20f8606b":"# What are her new songs\ntaylor.sort_values('release_date', ascending=False).iloc[:20,12:15]","13d6eefd":"data_w_genre","721862ab":"data","9f3c8bfa":"data","f0b37f75":"data_by_artist.columns\nfil = data_w_genre['artists'] == 'Taylor Swift'\ndata_w_genre[fil]\nvals, counts = np.unique(data_w_genre['genres'].apply(len), return_counts=True)\nplt.bar(vals[1:], counts[1:]) \nplt.title('Distribution of number of genres, excluding 0 genre')\nplt.ylabel('freqency')\nplt.xlabel('number of genres')\nnp.median(data_w_genre['genres'].apply(len))\nprint('Artist with 0 genre:',counts[0])\nprint('number of artist:', sum(counts))\n","341e2983":"fil = data_w_genre['artists'] == 'Taylor Swift'\ndata_w_genre[fil]","522042e4":"data['year'].hist()","4afd83aa":"# import numpy as np\n# import matplotlib.pyplot as plt\n\n# x = np.linspace(0, 10, 500)\n# y = np.sin(x)\n\n\n\n# # Using set_dashes() to modify dashing of an existing line\n# mean, = ax.plot(, label='Using set_dashes()')\n# line1.set_dashes([2, 2, 10, 2])  # 2pt line, 2pt break, 10pt line, 2pt break\n\n# # Using plot(..., dashes=...) to set the dashing when creating a line\n# line2, = ax.plot(x, y - 0.2, dashes=[6, 2], label='Using the dashes parameter')\n\n# ax.legend()\n# plt.show()\n\ngroup_by_year = data.groupby(by=[\"year\"], dropna=False)\n\nfig, ax = plt.subplots()\nline1, = ax.plot(group_by_year.mean()['popularity'], label=\"mean\", lw=5, color='tab:blue')\nline2, = ax.plot(group_by_year.max()['popularity'], label=\"max\", color='tab:grey', dashes=[3, 1])\nline3, = ax.plot(group_by_year.min()['popularity'], label=\"min\", color='tab:grey', dashes=[3, 1])\n\nplt.title('Bound and mean of songs that relesed in each year')\nax.legend()\nplt.show()","a55c0bcd":"def group_year_by_5(year):\n    import math\n    return math.floor(year\/5)*5\nimport math\n# math.floor(2020\/5)*5\n\ngroup_year_by_5(2020)","9aeb4b11":"# Explore data and clean\n","ba300c7a":"## Columns explanation\n\n* **Acousticness:** (float from 0.0-1.0)\n    * *Description*: \n        * Is this song a acoustic song? (0 = not so confidence, 1 = high confidence that it is)\n        * Spotify algorithm generate this confidence level\n    * *How to handle*: \n        * 2 choices\n            * can use directly \n            * or convert to binary (threshold = 0.5, may be)\n    * Concern:\n        * \n\n        \n\n### To exclude from popularity prediction\n* **[some columns]**\n    * Rationale: [some reason]\n    \n### To discuss\n* **artists:** (list of strings)\n    * Rationale:\n        * This shold be very useful\n        * BUT, what if this song is by a new artist!! We cannot predict using this feature\n    * Description: Who are the artists of this songs\n    * How to handle :\n        * Split to multiple columns using **one hot**\n    * Concern:\n        * lots of unique values \n        * Can we have two artists (two column = 1)? (I think this should be OK)\n        ","106a5b85":"# Try to look at an artist","35fb24be":"# Genre by artist"}}