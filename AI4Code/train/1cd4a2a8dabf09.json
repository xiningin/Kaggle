{"cell_type":{"d48db06c":"code","c76b2dd8":"code","a2635de6":"code","f520004c":"code","f8278c78":"code","bbe8d38f":"code","7017b03e":"markdown","bca8347a":"markdown","95efa29d":"markdown","41bab614":"markdown","1894ae80":"markdown","726748ab":"markdown","5056a1c9":"markdown","6deb6f87":"markdown","62c35118":"markdown","548ac458":"markdown","258da201":"markdown","eb49d5d4":"markdown","0eff5932":"markdown","f6ee8c87":"markdown"},"source":{"d48db06c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nctg = pd.read_csv('..\/input\/cardiotocography-dataset\/CTG Dataset1.csv')","c76b2dd8":"print(ctg.info())","a2635de6":"a = ctg[\"NSP\"].value_counts()\nlabel = [\"Normal\", \"Suspect\", \"Pathologic\"]\nplt.pie(a, labels = label, autopct=\"%1.1f%%\")\nplt.legend()\nplt.show()\nsns.countplot(x = \"NSP\", data = ctg)\nplt.show()","f520004c":"ctg.drop([\"Date\", \"b\", \"e\", \"LBE\", \"DR\", \"A\", \"B\", \"C\", \"D\", \"E\", \"AD\", \"DE\", \"LD\", \"FS\", \"SUSP\"], axis = 1, inplace = True)\nctg.columns","f8278c78":"plt.figure(figsize=(16, 12))\nsns.heatmap(ctg.corr(), cmap = \"RdBu_r\", linewidths = .5, annot = True)\nplt.show()","bbe8d38f":"f_name = pd.unique(ctg[\"FileName\"])\n\nfor name in f_name:\n    fig, ax = plt.subplots()\n    ax.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"LB\"], color = \"red\", marker = \"X\", linestyle = \"--\", label = \"FHR\")\n    ax.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"ASTV\"], color = \"blue\", marker = \"o\", linestyle = \"--\", label = \"ASTV\")\n    ax.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"ALTV\"], color = \"magenta\", marker = \"d\", linestyle = \"--\", label = \"ALTV\")\n    ax2 = ax.twinx()\n    ax2.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"AC\"], color = \"black\", marker = \"v\", label = \"AC\")\n    ax2.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"DS\"], color = \"green\",  marker = \"s\", label = \"DS\")\n    ax2.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"DP\"], color = \"cyan\", marker = \"1\", label = \"DP\")\n    ax2.plot(ctg[ctg[\"FileName\"] == name][\"SegFile\"], ctg[ctg[\"FileName\"] == name][\"NSP\"], color = \"purple\", label = \"NSP\")\n    value = []\n    for ind, item in enumerate(ctg[ctg[\"FileName\"] == name][\"SegFile\"]):\n      value.append(ind+1)\n    ax.set_xticklabels(value)\n    ax.set_xlabel(name)\n    ax.legend(loc = 'center left')\n    ax2.legend(loc = 'center right')\n    plt.show()","7017b03e":"Out of 352 plots, some of the significant plots are given below with their \u2018FileName\u2019. The x-axis denotes the various segments of the file.\n![Mjmar_3.txt.png](attachment:ca187cf9-7ff9-430b-a9e7-548b4786cfc7.png)![S0001011.dat.png](attachment:d636891d-10ba-4849-b5d0-038be80e83c0.png)![S0001024.dat.png](attachment:eb7ed3c1-7e23-4f46-bf4a-36e8d2294373.png)![Fmcs_2.txt.png](attachment:2ec42c4f-4e14-4808-8dc4-0aef53defcc2.png)![Mabp_25.txt.png](attachment:0bedc539-a527-47d3-9291-0d562b94c4eb.png)![Mcslrc_4.txt.png](attachment:13105853-9201-4cc0-b54e-3a22714938c9.png)\n\nFrom the above plots, we can see that the attributes \u2018AC\u2019, \u2018DP\u2019, \u2018ASTV\u2019, and \u2018ALTV\u2019 influence the \u2018NSP\u2019 significantly. In the CTGdataset that we have considered for analysis, it is found that the contribution of \u2018LB\u2019 and \u2018DS\u2019 is not as high as the other parameters mentioned above.","bca8347a":"To confirm the attributes and the missing values of the dataset we use the \u2018info\u2019 method on the dataset.","95efa29d":"## **References:**\n[1] https:\/\/archive.ics.uci.edu\/ml\/datasets\/cardiotocography\n\n[2] Ayres de Campos et al. (2000) SisPorto 2.0 A Program for Automated Analysis of Cardiotocograms. J Matern Fetal Med 5:311-318\n","41bab614":"We can see that the data frame has 40 attributes and 2126 instances and no missing values.\n\nSince our primary objective is to determine the pathologic condition of the fetus, let us take a look at the \u2018NSP\u2019 column first.\n","1894ae80":"## **Dataset Description:**\n\tThe dataset is downloaded from [UCI Machine Learning Repository](https:\/\/archive.ics.uci.edu\/)[1]. The dataset consists of measurements of Fetal Heart Rate (FHR) and Uterine Contraction (UC)  obtained from cardiotocography. \n    \n\tThe dataset contains 40 attributes and 2126 instances. No missing values were found in the dataset. The 2126 traces were extracted automatically from the CTGs and the respective diagnostic features were identified. The CTGs were classified by three expert obstetricians and classification labels were assigned to each instance. The classification was both concerning the morphologic patterns (A, B, C. ...) and fetal states (N, S, P). Therefore, the dataset can be used either for 10-class or 3-class classification problems [2]. But in this analysis, we focused on the fetal state and hence we have used the column \u2018NSP\u2019 for the correlation analysis.\n","726748ab":"## **Introduction:**\n\t[Cardiotocography](https:\/\/en.wikipedia.org\/wiki\/Cardiotocography) (CTG) is used widely to perform fetal monitoring during the third trimester of pregnancy. It records the Fetal Heart Rate (FHR) and Uterine Contractions (UC) during pregnancy. It is otherwise called Electronic Fetal Monitor (EFM). Since 1960, it is routinely used by clinicians as a method of assessing fetal distress and thereby determining the overall health of the fetus. \n","5056a1c9":"## Analysis\n\nIn performing the CTG dataset analysis first, we imported the required libraries and the dataset. The code used is","6deb6f87":"From the above-obtained result, it is observed that out of 2126 records, \n* 176 are **pathologic** (8.3%) \u2013 The instances are labeled \u2018pathologic\u2019 when at least one assessment criterion is pathological or when two or more are suspicious. \n* 295 are **suspicious** (13.9%) \u2013 The instances are labeled \u2018suspicious\u2019 when at least one assessment criterion is suspicious and all others are normal.\n* 1655 are **normal** (77.8%) \u2013 The instances are labeled \u2018normal\u2019 when all assessment criteria are normal. ","62c35118":"## **Objective:**\n\tThe objective of this analysis is to find the minimum number of relative (independent) variables in the CTG dataset, which together will contribute to the prediction of the pathologic state of the fetus.\n","548ac458":"From the correlation matrix shown above, we observe the following facts.\n1. \tWhile analyzing the correlation between the \u2018CLASS\u2019 column and other columns, it is found that no other column other than \u2018NSP\u2019 has high correlation. The higher correlation value proves that \u2018CLASS\u2019 and \u2018NSP\u2019 represent the fetal statuses on different scales. \n2. \tWe can find that the features \u2018ASTV\u2019, \u2018ALTV\u2019, and \u2018DP\u2019 are having correlation values 0.47, 0.43 and 0.49 respectively with the \u2018NSP\u2019 column. This shows that they have a higher correlation with NSP when compared to other features. Hence, these features are considered in further analysis. This will be discussed in the forthcoming part of this article.\n\nAn expert obstetrician was consulted in identifying the attributes (variables) that can contribute to the identification of fetus status.  The correlation coefficient of those attributes with \u2018NSP\u2019 is calculated using the linear regression model. The results obtained is shown in the table  given below:\n\n![5.png](attachment:72f5778c-b04b-4962-a793-39de0cb02785.png)\n\nIt was found that the parameters (\u2018LB\u2019, \u2018AC\u2019, \u2018DS\u2019, \u2018DP\u2019 \u2018ASTV\u2019, and \u2018ALTV\u2019) is the optimal choice among all other suggested variables. Since our objective is to find a higher correlation value using the minimum number of parameters the highlighted case (\u2018LB\u2019, \u2018AC\u2019, \u2018DS\u2019, \u2018DP\u2019 \u2018ASTV\u2019, and \u2018ALTV\u2019) is the optimal choice among all combinations. This conclusion is further confirmed using the forthcoming plots.","258da201":"To find the relationship between two variables, we use a heat map of the correlation table obtained using the data frame.","eb49d5d4":"## **Grouping and Plotting**\n\tIf we take a closer look at the data frame the two columns \u2018FileName\u2019 and \u2018SegFile\u2019 are related to each other in a way that, each \u2018FileName\u2019 represents the unique case (patient) and each \u2018SegFile\u2019 in \u2018FileName\u2019 represents different segments of the trace. The CTG traces are divided into consecutive segments of equal length. Files have different numbers of segment files associated with them. The number of segment files varies depending on the total duration of the CTG trace.\n\n\tThe following code is used to plot the relationship between the variables \u2018LB\u2019, \u2018AC\u2019, \u2018DS\u2019, \u2018DP\u2019 \u2018ASTV\u2019, \u2018ALTV\u2019, and the \u2018NSP\u2019. \n","0eff5932":"## **Details about the Attributes[1-2]:**\n\nLB - FHR baseline (beats per minute)\n\nAC - number of accelerations per second\n\nFM - number of fetal movements per second\n\nUC - number of uterine contractions per second\n\nDL - number of light decelerations per second\n\nDS - number of severe decelerations per second\n\nDP - number of prolonged decelerations per second\n\nASTV \u2013 the percentage of time with abnormal short-term variability\n\nMSTV - mean value of short-term variability\n\nALTV \u2013 the percentage of time with abnormal long-term variability\n\nMLTV - mean value of long-term variability\n\nWidth - width of FHR histogram\n\nMin - minimum of FHR histogram\n\nMax - Maximum of FHR histogram\n\nNmax - number of histogram peaks\n\nNzeros - number of histogram zeros\n\nMode - histogram mode\n\nMean - histogram mean\n\nMedian - histogram median\n\nVariance - histogram variance\n\nTendency - histogram tendency\n\nCLASS - FHR pattern class code (1 to 10)\n\nNSP - fetal state class code (N = normal; S = suspect; P = pathologic)\n","f6ee8c87":"## **Conclusion**\n\tFrom the analysis done on the CTG dataset, we can visualise that the optimal attributes that influence the pathologic state of the fetus are \u2018LB\u2019, \u2018AC\u2019, \u2018DS\u2019, \u2018DP\u2019 \u2018ASTV\u2019, and \u2018ALTV\u2019. These parameters when used for modeling the Machine learning algorithms can result in accurate prediction of fetal status.\n"}}