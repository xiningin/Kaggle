{"cell_type":{"04513e43":"code","cf1dc65e":"code","0fa9837f":"code","49b8752e":"code","6ed25349":"code","51ff7f8c":"code","ec9988cf":"code","37264173":"code","a61e9d92":"code","3c609fb3":"code","895d9fb0":"code","dafc1643":"code","01a4c3ce":"code","0c055d09":"code","a2b99964":"code","fe84bbee":"code","6eb4f0b8":"code","39c447fb":"code","2aeebd8d":"code","09860a69":"code","e289d830":"code","2c85a6ec":"code","b47e0edf":"code","2a36c46c":"code","1e8c3e86":"code","cc8c7261":"code","cf088edc":"code","31103165":"code","0d680fbf":"code","d50e9945":"code","74766306":"code","693c34fc":"code","60374494":"code","73bd2284":"code","254778e6":"code","639957a2":"code","0b4172c9":"code","7e44bb92":"code","2d0772a1":"code","976ca119":"code","9adfbf71":"code","e0f3f8be":"code","b0f8d8a3":"code","af051a54":"code","1b9f9807":"code","a91d9ff9":"code","df4d4509":"code","12c87523":"code","8c1db681":"code","11babc6a":"code","cb5868da":"code","a50c3c96":"code","f8113ea8":"code","0eba57d3":"code","7265cfed":"code","9e6d766e":"code","f762d6c8":"code","ac4e3460":"code","bed86e08":"markdown","7ed0d93b":"markdown","3005f342":"markdown","1c7e4f9e":"markdown","871d74d8":"markdown","fcbc63fc":"markdown","3931455b":"markdown","730fb813":"markdown","3e2203f8":"markdown","12ade927":"markdown","f6f06602":"markdown","b23a3b97":"markdown","2366d384":"markdown","48586ea8":"markdown","9be139c7":"markdown","c29f0c6e":"markdown","76cc778b":"markdown","2063f66b":"markdown","dfe38a86":"markdown","87b0b561":"markdown","83acc91b":"markdown","27529ab0":"markdown","9e01b1e4":"markdown","08516d37":"markdown","8780d927":"markdown","878eb174":"markdown","c26ae769":"markdown","76f4923a":"markdown","afbc63c3":"markdown","bd8ec89f":"markdown","d0d49bd8":"markdown","32011bea":"markdown","d7526c66":"markdown","8dc9b430":"markdown","b7e63743":"markdown"},"source":{"04513e43":"file_path = '..\/input\/applemusicstreaming\/Apple Music Play Activity.csv'","cf1dc65e":"# Install plotly express if not already installed\n!pip install plotly_express --quiet","0fa9837f":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly_express as px\n\npd.set_option('display.max_columns', None)","49b8752e":"from matplotlib import rcParams\n# figure size in inches\nrcParams['figure.figsize'] = 12, 8","6ed25349":"music_df = pd.read_csv(file_path)","51ff7f8c":"music_df.head()","ec9988cf":"print(\"Rows x Columns: {}\".format(music_df.shape))","37264173":"# check for available columns\nmusic_df.columns.to_list()","a61e9d92":"music_df.describe()","3c609fb3":"music_df.info()","895d9fb0":"music_df.isnull().sum()","dafc1643":"sns.heatmap(music_df.isnull())\nplt.show()","01a4c3ce":"nans = [col for col in music_df.columns if music_df[col].isnull().all()==True]","0c055d09":"# drop the above columns from the dataframe\nmusic_df.drop(nans, axis=1, inplace=True)","a2b99964":"# check for current shape of df\nmusic_df.shape","fe84bbee":"music_df.isnull().sum()","6eb4f0b8":"to_delete = ['Apple Id Number', 'Build Version', 'Client IP Address', 'Device Identifier', 'Metrics Bucket Id', 'Metrics Client Id', 'UTC Offset In Seconds', 'Store Country Name']\nmusic_df.drop(to_delete, axis=1, inplace=True)","39c447fb":"music_df.isnull().sum()","2aeebd8d":"music_df.shape","09860a69":"music_df['Event End Timestamp'] = pd.to_datetime(music_df['Event End Timestamp'], format='%Y-%m-%dT%H:%M:%S')\nmusic_df['Event Received Timestamp'] = pd.to_datetime(music_df['Event Received Timestamp'], format='%Y-%m-%dT%H:%M:%S')\nmusic_df['Event Start Timestamp'] = pd.to_datetime(music_df['Event Start Timestamp'], format='%Y-%m-%dT%H:%M:%S')","e289d830":"music_df.head()","2c85a6ec":"top_10_artist = music_df['Artist Name'].value_counts()[:10]","b47e0edf":"fig = px.bar(top_10_artist, title=\"Top 10 favourite artists\", labels={\"index\":\"Artists\", 'value':\"No. of times song played\"}, color_discrete_sequence=px.colors.qualitative.Set2)\nfig.show()","2a36c46c":"top_20_songs = music_df['Content Name'].value_counts()[:20]","1e8c3e86":"# (optional)\n# changing the name of longest song name\nas_list = top_20_songs.index.tolist()\nidx = as_list.index(\"I'm the One (feat. Justin Bieber, Quavo, Chance the Rapper & Lil Wayne)\")\nas_list[idx] = 'I am the one (ft. Justin Bieber)'\ntop_20_songs.index = as_list","cc8c7261":"fig = px.bar(top_20_songs, title=\"Top 20 favourite songs\", labels={\"index\":\"Songs\", 'value':\"No. of times song played\"}, color_discrete_sequence=px.colors.qualitative.Bold)\nfig.update_xaxes(tickangle=22)\nfig.show()","cf088edc":"top_10_labels = music_df['Content Provider'].value_counts()[:10]","31103165":"# (optional)\n# changing the name of longest label name\nas_list = top_10_labels.index.tolist()\nidx = as_list.index(\"Super Cassettes Industries Pvt Limited a.k.a. T-Series\")\nas_list[idx] = 'T-Series'\ntop_10_labels.index = as_list","0d680fbf":"fig = px.bar(top_10_labels, title=\"Top 20 favourite labels\", labels={\"index\":\"Music Labels\", 'value':\"No. of times song label played\"}, color_discrete_sequence=px.colors.qualitative.Pastel)\nfig.update_xaxes(tickangle=25)\nfig.show()","d50e9945":"def top_10_song_of_label(label):\n    \"\"\"\n    Function to see what are the top musics played from particular label. \n    \"\"\"\n    # use groupby method and sort ascending\n    label_df = music_df[music_df['Content Provider'] == label]\n    top_10_song = label_df['Content Name'].value_counts()[:10]\n    print(top_10_song)\n    fig = px.bar(top_10_song, labels={\"index\": \"Song Names\", \"value\": \"No. of time song played\", \"variable\":\"Song name\"}, title=f\"Top songs from {label}\")\n    fig.show()","74766306":"top_10_song_of_label('The Warner Music Group')","693c34fc":"top_10_song_of_label('Super Cassettes Industries Pvt Limited a.k.a. T-Series')","60374494":"top_longest_played = music_df.groupby('Content Name')['Play Duration Milliseconds'].sum().sort_values(ascending=False)","73bd2284":"# Converting milliseconds to minutes\ntop_longest_played = top_longest_played \/ 60000","254778e6":"colors = px.colors.qualitative","639957a2":"fig = px.bar(top_longest_played[:10], labels={\"Content Name\": \"Song Names\", \"value\": \"Play Time (in mins)\", \"variable\":\"Duration\"}, color_discrete_sequence=colors.G10_r)\nfig.show()","0b4172c9":"music_df['End Reason Type'].value_counts()","7e44bb92":"fig = px.pie(music_df, names='End Reason Type', color_discrete_sequence=colors.Set3)\nfig.show()","2d0772a1":"top_genre = music_df.Genre.value_counts()[:10]","976ca119":"fig = px.bar(top_genre, color_discrete_sequence=colors.T10_r)\nfig.show()","9adfbf71":"fig = px.pie(music_df, names='Media Type', color_discrete_sequence=colors.Dark2, title=\"Most preferable Media Type (eg. Audio\/Video)\")\nfig.show()","e0f3f8be":"music_df.Offline.value_counts()","b0f8d8a3":"fig = px.pie(music_df, names=\"Offline\", title=\"Do you prefer listening to music Offline?\")\nfig.show()","af051a54":"music_df['Event Start Timestamp']","1b9f9807":"# converting event start timestamp to separate time section\nmusic_df[\"Event Start Time\"] = music_df['Event Start Timestamp'].dt.time\nmusic_df[\"Event Start Time\"].head()","a91d9ff9":"hours = music_df[\"Event Start Time\"].groupby(music_df[\"Event Start Timestamp\"].dt.hour).count()","df4d4509":"fig = px.bar(hours, title=\"Most active hours (24hr)\", labels={\"value\": \"count\", \"Event Start Timestamp\":\"Timings (hours)\"}, color_discrete_sequence=colors.Prism)\nfig.update_xaxes(dtick=1)\nfig.show()","12c87523":"months = music_df[\"Event Start Time\"].groupby(music_df[\"Event Start Timestamp\"].dt.month).count()","8c1db681":"m = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov','Dec']\nfig = px.bar(months, title=\"Most active Months\", text=m, labels={\"value\": \"count\", \"Event Start Timestamp\":\"Months\"}, color_discrete_sequence=colors.Light24)\nfig.update_xaxes(dtick=1)\nfig.show()","11babc6a":"years = music_df[\"Event Start Time\"].groupby(music_df[\"Event Start Timestamp\"].dt.year).count()","cb5868da":"fig = px.bar(years, title=\"Most active years\", labels={\"value\": \"count\", \"Event Start Timestamp\":\"Year\"}, color_discrete_sequence=colors.Prism_r)\nfig.update_xaxes(dtick=1)\nfig.show()","a50c3c96":"total_time = music_df['Play Duration Milliseconds'].sum()","f8113ea8":"total_mins = total_time\/60000\nprint(\"Total minutes spent: {:.2f} mins\".format(total_mins))\ntotal_hours = total_mins\/60\nprint(\"Total hours spent: {:.2f} hours\".format(total_hours))","0eba57d3":"start_time = music_df['Event End Timestamp'].min()\nend_time = music_df['Event End Timestamp'].max()","7265cfed":"total_possible_time = (end_time - start_time).days","9e6d766e":"total_possible_hours = total_possible_time * 24\nprint(\"Total possible time could be spent: {:.2f} hours\".format(total_possible_hours))","f762d6c8":"hours_spent_list = np.array([total_hours, total_possible_hours])\nhours_spent_list_labels = [\" Actual Hours Spent\", \"Possible Hours\"]\n\nfig, ax = plt.subplots(figsize=(12,6))\nax.pie(hours_spent_list, labels= hours_spent_list_labels, autopct='%1.1f%%',  explode=[0.2,0.2], startangle=180, shadow = True);\nplt.title(\"Hours Spent Percentage\");","ac4e3460":"total_songs = music_df.shape[0]\nprint(\"Daily average of songs played: {:.2f} songs\".format(total_songs\/total_possible_time))","bed86e08":"There are more columns like ID's which are not going to contribute much in our analysis. So we will drop these columns as well manually","7ed0d93b":"# \ud83c\udfb5 Apple Music Stream Data Analysis","3005f342":"![Picture title](image-20210605-194900.png)","1c7e4f9e":"<a style='text-decoration:none;line-height:16px;display:flex;color:#5B5B62;padding:10px;justify-content:end;' href='https:\/\/deepnote.com?utm_source=created-in-deepnote-cell&projectId=4597a1b6-de90-4f9a-b59d-60c2ea6c17ad' target=\"_blank\">\n<img alt='Created in deepnote.com' style='display:inline;max-height:16px;margin:0px;margin-right:7.5px;' src='data:image\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Hcm91cCAzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkxhbmRpbmciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMzUuMDAwMDAwLCAtNzkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjM1LjAwMDAwMCwgNzkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yMCIgZmlsbD0iIzAyNjVCNCIgcG9pbnRzPSIyLjM3NjIzNzYyIDgwIDM4LjA0NzY2NjcgODAgNTcuODIxNzgyMiA3My44MDU3NTkyIDU3LjgyMTc4MjIgMzIuNzU5MjczOSAzOS4xNDAyMjc4IDMxLjY4MzE2ODMiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNS4wMDc3MTgsODAgQzQyLjkwNjIwMDcsNzYuNDU0OTM1OCA0Ny41NjQ5MTY3LDcxLjU0MjI2NzEgNDguOTgzODY2LDY1LjI2MTk5MzkgQzUxLjExMjI4OTksNTUuODQxNTg0MiA0MS42NzcxNzk1LDQ5LjIxMjIyODQgMjUuNjIzOTg0Niw0OS4yMTIyMjg0IEMyNS40ODQ5Mjg5LDQ5LjEyNjg0NDggMjkuODI2MTI5Niw0My4yODM4MjQ4IDM4LjY0NzU4NjksMzEuNjgzMTY4MyBMNzIuODcxMjg3MSwzMi41NTQ0MjUgTDY1LjI4MDk3Myw2Ny42NzYzNDIxIEw1MS4xMTIyODk5LDc3LjM3NjE0NCBMMzUuMDA3NzE4LDgwIFoiIGlkPSJQYXRoLTIyIiBmaWxsPSIjMDAyODY4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzNy43MzA0NDA1IEwyNy4xMTQ1MzcsMC4yNTcxMTE0MzYgQzYyLjM3MTUxMjMsLTEuOTkwNzE3MDEgODAsMTAuNTAwMzkyNyA4MCwzNy43MzA0NDA1IEM4MCw2NC45NjA0ODgyIDY0Ljc3NjUwMzgsNzkuMDUwMzQxNCAzNC4zMjk1MTEzLDgwIEM0Ny4wNTUzNDg5LDc3LjU2NzA4MDggNTMuNDE4MjY3Nyw3MC4zMTM2MTAzIDUzLjQxODI2NzcsNTguMjM5NTg4NSBDNTMuNDE4MjY3Nyw0MC4xMjg1NTU3IDM2LjMwMzk1NDQsMzcuNzMwNDQwNSAyNS4yMjc0MTcsMzcuNzMwNDQwNSBDMTcuODQzMDU4NiwzNy43MzA0NDA1IDkuNDMzOTE5NjYsMzcuNzMwNDQwNSAwLDM3LjczMDQ0MDUgWiIgaWQ9IlBhdGgtMTkiIGZpbGw9IiMzNzkzRUYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+' > <\/img>\nCreated in <span style='font-weight:600;margin-left:4px;'>Deepnote<\/span><\/a>","871d74d8":"![Picture title](image-20210605-194813.png)","fcbc63fc":"### 11. Which year have you listened to songs most on Apple Music?","3931455b":"### 7. Which media type do you prefer most on Apple Music?","730fb813":"## Data Analysis","3e2203f8":"### 12. Total time spent listening to&nbsp;music","12ade927":"What are the top songs played from particular label?","f6f06602":"### 3. Which are the top 10 favourite content providers?","b23a3b97":"We can see many things in the dataset like\n\n- List of songs played\n- List of Singers\/Artists\n- Start time and position of songs\n- Music Labels\n\nand much more. \n\nI got this data from Apple's privacy website.","2366d384":"### 2. Which are the top 20 songs played? (favourite songs)","48586ea8":"Our DataFrame many columns which have all the NULL values. Such columns have to be removed from the dataset.  Our goal should be making the above HeatMap as dark as possible (i.e without any white marks)","9be139c7":"### 10. What month have you listened to songs most?","c29f0c6e":"In this project, we are going to explore my personal music streaming data from Apple Music. Apple Music is a music and video streaming service developed by Apple Inc. The dataset used here showcases my personal streaming on the platform. ","76cc778b":"We have reduced our DataFrame columns from 45 cols -&gt; 30 cols","2063f66b":"Yeah!! A Lot. Around 38% of the time, I like listening to songs when I am offline. Most probably, I close my eyes and feel the music. ","dfe38a86":"## Requesting and downloading data\n\nFollow these steps request your personal data from apple\n- Go to privacy.apple.com\n- Log in to your account\n- Click on **Request a copy of your data**\n- Be sure to check mark on **Apple Media Services Information** and click on continue at bottom\n- Choose default size and click on **Complete Request**\n\nCheck the below screenshots for reference","87b0b561":"Check for the no. of missing values in each column","83acc91b":"### 9. What time do you prefer to listen to music?","27529ab0":"Looks like I can hear music at any time from above graph. HAHA!! ","9e01b1e4":"display basic statistics of numerical variables","08516d37":"### 8. Do you prefer listening to music when you are online\/offline?","8780d927":"## Data Preparation and cleaning\n\n\nSteps:-\n\n1. Load the dataset (csv file)\n2. Check for shape and columns of dataframe\n3. Check for missing values\n4. Check the basic statistics of columns\n","878eb174":"### 6. Which are your most loved genre?","c26ae769":"### Daily average songs played","76f4923a":"Questions to ask for data analysis\n\n1. Who are the top 10 favourite artists?\n2. Which are the top 10 songs played?\n3. Who are top 10 favourite content providers or music labels?\n4. Which are the top 10 songs that were listened for longest time?\n5. What is the reason of ending the song most?\n6. Which are your most loved genre?\n7. Which media type do you prefer most on Apple Music?\n8. Do you prefer listening to music when you are online\/offline?\n9. What time do you prefer to listen music?\n10. Which was the most active month?\n11. Which was the most active year?\n12. Total time spent on the platform?","afbc63c3":"### 1. Who are your top 10 favourite artists\/singers\/band?","bd8ec89f":"### 4. Which are the top 10 songs that were listened for longest time? ","d0d49bd8":"### Converting timestamp columns to actual TimeStamp","32011bea":"I don't usually listen to full songs \ud83d\ude02","d7526c66":"### 5.  What is the reason of ending the song most?","8dc9b430":"![Picture title](image-20210605-194845.png)","b7e63743":"Timestamp columns - Event End Timestamp, Event Start Timestamp, Event Received Timestamp are not exactly timestamp but string. We have to convert these columns into actual timestamps"}}