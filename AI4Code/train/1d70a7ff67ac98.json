{"cell_type":{"88f8c187":"code","c2b906d9":"code","056d143b":"code","1bf301f1":"code","bc70fb7f":"code","d3901b9d":"code","fcc19878":"code","5a3e9bce":"code","0f0ed32c":"code","fc032ef1":"code","da89edb5":"code","e7a6c460":"code","5e8d013e":"code","670e59d1":"code","217ddd1f":"code","ff886016":"code","c592ab3e":"code","7d35f35d":"code","abf4735a":"code","aff374c1":"code","51d50bd3":"code","843d1a97":"code","1f7408fe":"code","18908291":"code","135ba57b":"code","0d0cab7b":"code","a618a091":"code","4e02eeee":"code","7883a889":"code","77694df1":"code","b3398baa":"code","87039cbf":"code","2ac85b84":"code","0bcc4149":"markdown","13f26660":"markdown","b9a2bb18":"markdown","95e85308":"markdown","19ff3120":"markdown","6b925951":"markdown","1f6f3e9e":"markdown","86d3a3f3":"markdown","15b6f6e6":"markdown","427add94":"markdown"},"source":{"88f8c187":"import numpy as np \nimport pandas as pd\nimport statsmodels.api as sm\nimport matplotlib.pyplot as plt\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","c2b906d9":"df = pd.read_csv('\/kaggle\/input\/air-passengers\/AirPassengers.csv')\ndf.head()","056d143b":"df.tail()","1bf301f1":"ax = df['#Passengers'].plot(figsize = (12,5))\nax.set(ylabel='Number of Passengers');","bc70fb7f":"df.rename(columns = {'#Passengers' : 'Passengers'}, \n          inplace = True)\ndf['Month'] = pd.to_datetime(df['Month'])\ndf.info()","d3901b9d":"cycle, trend = sm.tsa.filters.hpfilter(df.Passengers, 129600)\ndecomp = df[['Passengers']]\ndecomp[\"cycle\"] = cycle\ndecomp[\"trend\"] = trend\n\nfig, ax = plt.subplots()\ndecomp[[\"Passengers\", \"trend\", \"cycle\"]].plot(ax=ax, figsize=(12, 5))\nplt.show()","fcc19878":"df.dropna(inplace=True)\ndf.set_index('Month', inplace = True)\ndf.head()","5a3e9bce":"from statsmodels.tsa.seasonal import seasonal_decompose\n\nresults = seasonal_decompose(df.Passengers, model='multiplicative')\nresults.plot();","0f0ed32c":"# Simple Moving Average\ndf_sma = df.copy()\ndf_sma['6-month-SMA'] = df['Passengers'].rolling(window=6).mean()\ndf_sma['12-month-SMA'] = df['Passengers'].rolling(window=12).mean()\ndf_sma.plot();","fc032ef1":"# Standard Deviation\ndf_sma_2 = df.copy()\ndf_sma_2['6-month-STD'] = df['Passengers'].rolling(window=6).std()\ndf_sma_2['12-month-STD'] = df['Passengers'].rolling(window=12).std()\ndf_sma_2.plot();","da89edb5":"df_ewma = df.copy()\ndf_ewma['EWMA12'] = df['Passengers'].ewm(span=12,\n                                         adjust=False).mean()\ndf_ewma.plot();","e7a6c460":"df.index.freq = 'MS'\ndf.index","5e8d013e":"df.head()","670e59d1":"from statsmodels.tsa.holtwinters import SimpleExpSmoothing","217ddd1f":"span = 12\nalpha = 2\/(span + 1)","ff886016":"df['EWMA12'] = df['Passengers'].ewm(alpha=alpha,\n                                   adjust=False).mean()\ndf.head()","c592ab3e":"model = SimpleExpSmoothing(df['Passengers'])\nfitted_model = model.fit(smoothing_level = alpha,\n                         optimized = False)\ndf['SES12'] = fitted_model.fittedvalues.shift(-1)\ndf.head()","7d35f35d":"from statsmodels.tsa.holtwinters import ExponentialSmoothing","abf4735a":"model = ExponentialSmoothing(df['Passengers'], trend = 'add')\nfitted_model = model.fit()\ndf['DES_add_12'] = fitted_model.fittedvalues.shift(-1)\ndf.head()","aff374c1":"df.plot(figsize = (12,5))","51d50bd3":"df = pd.read_csv('\/kaggle\/input\/air-passengers\/AirPassengers.csv',\n                index_col = 'Month', parse_dates = True)\ndf.index.freq = 'MS'\ndf.rename(columns = {'#Passengers' : 'Passengers'}, \n          inplace = True)\ndf.head()","843d1a97":"df.info()","1f7408fe":"train_date = df.iloc[:109] # df.loc[:'1940-01-01']\ntest_data = df.iloc[108:]","18908291":"fitted_model = ExponentialSmoothing(train_date['Passengers'],\n                                   trend = 'mul',\n                                   seasonal = 'mul',\n                                   seasonal_periods = 12).fit()","135ba57b":"test_predictions = fitted_model.forecast(36) # 8 years","0d0cab7b":"train_date['Passengers'].plot(legend=True, label = 'Train',\n                             figsize = (12,5))\ntest_data['Passengers'].plot(legend=True, label = 'Test')\ntest_predictions.plot(legend=True, label = 'Prediction')","a618a091":"from sklearn.metrics import mean_squared_error, mean_absolute_error","4e02eeee":"print('MSE: ', mean_squared_error(test_data, test_predictions))\nprint('MAE', mean_absolute_error(test_data, test_predictions))\nprint('RMSE: ', np.sqrt(mean_squared_error(test_data, test_predictions)))","7883a889":"from statsmodels.tsa.statespace.tools import diff","77694df1":"# First Order Difference\ndf['Passengers'] - df['Passengers'].shift(1)","b3398baa":"diff(df['Passengers'], k_diff = 1).plot() ","87039cbf":"test_predictions_8years = fitted_model.forecast(96) # 8 years","2ac85b84":"train_date['Passengers'].plot(legend=True, label = 'Train',\n                             figsize = (12,5))\ntest_data['Passengers'].plot(legend=True, label = 'Test')\ntest_predictions_8years.plot(legend=True, label = 'Prediction')","0bcc4149":"The Test Set should ideally be at least as large as the maximum forecast horizon required, i.e the maximum lenght of the future forecast. Keep in mind the longer the forecast horizon, the more likely your prediction becomes less accurate.","13f26660":"An autocorrelation plot (also known as a Correlogram) shows the correlation of the series with itself, lagged by x time units.\nThe y-axis is the correlation and the x-axis is the number of units of lag.\nFor example, if we compare the standard sales data against the sales data shifted by 1 time step (one day) then we are answering the question, \"how correlated are today's sales to yesterday's sales?\"\nACF describes the autocorrelation between an observation and another observation at a prior time step that included direct and indirect dependence information.\nThe PACF only describes the direct relationship between an observation and its lag.","b9a2bb18":"Importing and displaying the first five rows of the dataset.","95e85308":"Holt-winters seasonal method comprises of the forecast equation and three smoothing equations. level, trend, and seasonal components.\nSingle Exponential Smoothing.\nDouble Exponential Smoothing (Holts-method)\n","19ff3120":"Stationary data does not exhibit trend or seasonality.","6b925951":"The **Hodrick-Prescott Filter** Separates a Time Series into Trend and Cyclical Components.\nLink: https:\/\/www.statsmodels.org\/stable\/generated\/statsmodels.tsa.filters.hp_filter.hpfilter.html#generated-statsmodels-tsa-filters-hp-filter-hpfilter--page-root","1f6f3e9e":"Forecasting Procedure:\n* Choose a Model\n* Split data into train and test sets\n* Fit model on training set\n* Evaluate model on test set\n* Re-fit model on entire dataset\n* Forecast for future data\n\n","86d3a3f3":"**Time Series Decomposition with Error Trend Seasonality Model**\n* Trend Component shows the general growth\/decline pattern.\n* Seasonal Component shows any repetitive cycles in the time series. \n* Residual Component is the error or noise that cannot be represented as Trend or Seaonality.\n\n**Additive Model** is used when the trend is more linear and the Trend and Seasonality Components are increasing\/decreasing at a constant rate over time. \n**Multiplicative Model** is used when the Trend and Seasonality Components are increasing\/decreasing at a non-linear rate over time.","15b6f6e6":"Exponentially Weighted Moving Average Models - EWMA Models\n* More recent data has more weightage.","427add94":"* Seasonality - Repeating trends\n* Cyclical - Trends with no repetition. There is no repetitive cycle.\n* "}}