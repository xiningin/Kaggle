{"cell_type":{"ca12898e":"code","eaaf7d00":"code","7fd11758":"code","626a444a":"code","0f277926":"code","c43fcbdf":"code","5c2763b3":"code","43cf0ca6":"code","d11ce4a2":"code","dafd52de":"code","03d79243":"code","3bd85c61":"code","d10e5026":"code","30ff93df":"code","2f322a71":"code","fc077ec4":"code","3e4351f5":"code","e4f8bd14":"code","3dfabfdc":"code","ebfb2e97":"code","778fb5bf":"code","f05c7c3b":"code","90083eaa":"code","a7f42f72":"code","d8f2b78f":"code","6f9aeaf8":"markdown","14a9e4bb":"markdown","b3ec6042":"markdown","b82ad8e1":"markdown","08e2a5d7":"markdown","6da30626":"markdown","556c30a0":"markdown","4f62d811":"markdown","dd1906e2":"markdown","cbe3b552":"markdown","1e23565f":"markdown"},"source":{"ca12898e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","eaaf7d00":"all_elo = pd.read_csv('\/kaggle\/input\/nfl-elo-ratings-from-538\/nfl_elo.csv')","7fd11758":"all_elo.head(15)","626a444a":"len(all_elo)","0f277926":"#First, remove the NaN values (only in season 2019)\nall_elo = all_elo[~all_elo.score1.isna()==True]\nall_elo ['predicted_tie'] = all_elo.elo1_pre == all_elo.elo2_pre\nall_elo ['actual_tie'] = all_elo.score1 == all_elo.score2","c43fcbdf":"all_elo [all_elo.predicted_tie == True]","5c2763b3":"all_elo [all_elo.actual_tie == True]","43cf0ca6":"import plotly.express as px\nties_by_season = pd.DataFrame(all_elo.groupby(['season'])['actual_tie'].sum())\nties_by_season = ties_by_season.reset_index(drop=False)\nprint(ties_by_season.columns)\n#fig, ax = plt.subplots()\nfig = px.bar(ties_by_season, x='season', y='actual_tie',width = 600,height = 400, orientation = 'v')\nfig.show()\n","d11ce4a2":"non_ties = all_elo[~all_elo.actual_tie == True]\nnon_ties = non_ties[~non_ties.predicted_tie == True]","dafd52de":"non_ties","03d79243":"non_ties ['team1_predicted'] = non_ties.elo1_pre > non_ties.elo2_pre\nnon_ties ['team1_won'] = non_ties.score1 > non_ties.score2","3bd85c61":"\n\nnon_ties['correct_prediction']=non_ties.team1_predicted == non_ties.team1_won","d10e5026":"non_ties[['team1_predicted','team1_won','correct_prediction']]","30ff93df":"non_ties.tail()","2f322a71":"non_ties.correct_prediction.describe().freq\/len(non_ties)","fc077ec4":"non_ties_2019 = non_ties[non_ties.season==2019]\nnon_ties_2019.correct_prediction.describe().freq\/len(non_ties_2019)\n","3e4351f5":"non_ties_2019.correct_prediction.describe()","e4f8bd14":"non_ties['point_spread'] = (non_ties.elo2_pre - non_ties.elo1_pre)\/25.0","3dfabfdc":"non_ties.point_spread.describe()","ebfb2e97":"non_ties[non_ties.point_spread <=-20]","778fb5bf":"non_ties['score1_adj'] = non_ties.score1 + non_ties.point_spread","f05c7c3b":"non_ties['team1_won_adj'] = non_ties.score1_adj > non_ties.score2","90083eaa":"non_ties[non_ties.team1_won != non_ties.team1_won_adj]","a7f42f72":"non_ties['correct_spread_prediction']=non_ties.team1_predicted == non_ties.team1_won_adj","d8f2b78f":"non_ties.correct_spread_prediction.describe().freq\/len(non_ties)","6f9aeaf8":"Based on the mean of the point spread of -0.15, we can assume team1 is the home team, with a slight advantage in point spread.\n","14a9e4bb":"## Quick Look at the Data","b3ec6042":"There are only 7 games with predicted ties. These were all in league start-up seasons when there was no prior history. ","b82ad8e1":"## Background\n\nAn obvious first thing we need is a team identification table. The team identifiers will not be recognized by any modern day NFL fan. The first two seasons were from a professional league called the American Professional Football Association, which became the National Football Leaguge (NFL) in 1922. It grew from the Ohio League and the New Your Pro Football League.\n\nThe very first game between Rock Island Independents (RII) and the St. Paul Ideals (STP) was won by Rock Island 48-0.   \n\nIn the first season, the league title was won by the Akron Pros, who were undefeated (with several ties). \n\nIn the modern NFL, only two teams survive, the Chicago Cardinals (now Arizona Cardinals) and the Decatur Staleys, now the Chicago Bears. The Muncie Flyers had a short season, with a record of 0-1. They did play a few other games that year against local teams; however these games did not count in the APFA standings.","08e2a5d7":"There were over 2000 games where the point spread changed the outcome, i.e. a team beat the spread. How that change the prediction?\n","6da30626":"There have been 315 tie games since the start of the NFL. This has fallen off dramatically in the last 45 years, with the introduction of overtime in 1974. The overtime rules have been tweaked several times in the last 10 years. ","556c30a0":"## The Elo Rating as a Predictor\n\nHow good is Elo as a predictor? We need a few enhancements to the dataset.\n\nFor this analysis, I will discard tie games, unless Elo predicts a tie.\n\n\n\n","4f62d811":"## Check on Prediction\n\nWe first eliminate the tie predictions and actual ties. ","dd1906e2":"For 2019, Elo performs slighly lower with 64.0% correct. That would still place Elo in the top 6 of professional football predictors in the sports media!\n\n## How Does Elo Do Against Point Spread?\n\nThe Elo predictions are design such that the prediction difference divided by 25 is an effective point spread. With this known, we now examine Elo's prediction against its own point spreads.","cbe3b552":"An overall prediction percentage of 64.8% seems quite good. How well does it compare to industry experts?\n\nThis year, Trey Wingo of ESPN has predicted 158 of 240 NFL games so far. This is 65.8%, almost the same as Elo. How did Elo do in 2019?","1e23565f":"The point spread predictions are better than 50% at 52.4%. That is probably not enough to beat the line in Las Vegas, due to the house advantage of 10%. You might make some money in your office pool!"}}