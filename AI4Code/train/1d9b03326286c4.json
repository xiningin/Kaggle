{"cell_type":{"901b7d77":"code","e80d934d":"code","c55a041b":"code","12414918":"code","81acb1f9":"code","6b405e77":"code","2f9b27ad":"code","74dcd7b0":"code","2eaf5a6c":"code","afd6e791":"code","f07e321d":"code","0d75f718":"code","2423ffe5":"code","52f395f4":"code","4388e8d9":"code","ff5816cd":"code","c18c85b9":"code","cb034c63":"markdown","49696d11":"markdown","dd445b34":"markdown","5f50893b":"markdown","9ce3f36f":"markdown","547fc475":"markdown","9595f0ae":"markdown","1c21e72c":"markdown","9880b638":"markdown","cc6d42f5":"markdown","57ba5da0":"markdown","24636cdc":"markdown"},"source":{"901b7d77":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\npd.set_option('display.max_columns', 30)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","e80d934d":"df = pd.read_csv('\/kaggle\/input\/covid19-new-jersey-nj-local-dataset\/Covid-19-NJ-Bergen-Municipality.csv', index_col='Date', parse_dates=['Date'])\ndf","c55a041b":"# Just fixing a bad data issue\/typo\ndf.loc['2020-04-23', 'Elmwood Park'] = 407","12414918":"towns = set(df.columns) - set(['Total Presumptive Positives', 'New Daily cases'])\nprint(\"A few towns :\")\nlist(towns)[:10]","81acb1f9":"highest_towns = df.iloc[-1][towns].nlargest(10).index\n#Also, adding some towns that are of interest to me\nprint(\"Towns with highest number of cases + some towns of interest to me:\")\nhighest_towns = list(highest_towns) + ['Edgewater', 'Fort Lee']\nhighest_towns","6b405e77":"ax = df[highest_towns].plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Number of positive cases')\nax.set_title('Total Positive cases over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(df[highest_towns].index)\nax.set_xticklabels(df[highest_towns].index.strftime('%b-%d'))\nplt.show()","2f9b27ad":"# Skipping initial numbers to focus more on the most recent trends\/numbers\npct_change = df[40:].pct_change().rolling(10, 1).mean() * 100.0\nax = pct_change[highest_towns].plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Percent daily rate of change')\nax.set_title('Percent daily rate of change over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(pct_change.index)\nax.set_xticklabels(pct_change.index.strftime('%b-%d'))\nplt.show()","74dcd7b0":"# We'll look at data since March 20th to avoid the erratic data before.\n# Also, we'll include only 10 towns that have the highest number of cases\nrecent_df = df[df.index > '2020-03-20']\nrecent_pct_change = recent_df.pct_change()\nrecent_pct_change[highest_towns].mean().sort_values()","2eaf5a6c":"# We'll take a Simple Moving Average to smoothen the irregularities with the raw numbers\ndays_to_double = 100.0\/pct_change[15:]\nax = days_to_double[set(highest_towns) - {'Elmwood Park', 'Teaneck'}].rolling(5, 1).mean().plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Number of days for cases to double')\nax.set_title('Number of days for cases to double over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(days_to_double.index)\nax.set_xticklabels(days_to_double.index.strftime('%b-%d'))\nplt.show()","afd6e791":"melted_df = df[highest_towns].reset_index().melt(id_vars='Date', var_name='Town', value_name='Total Cases')\nmelted_df","f07e321d":"melted_df['New Cases'] = melted_df.groupby('Town')['Total Cases'].transform(lambda x: x.diff())\nmelted_df","0d75f718":"melted_df['New Cases'] = melted_df.groupby('Town')['New Cases'].transform(lambda x: x.rolling(8, 1).mean())","2423ffe5":"plt.figure(figsize=(20,20))\ngrid = sns.lineplot(x=\"Total Cases\", y=\"New Cases\", hue=\"Town\", data=melted_df)\ngrid.set(xscale=\"log\", yscale=\"log\")\ngrid.set_title('New cases vs existing cases at log scale', fontweight='bold', fontsize='x-large')\nplt.show()","52f395f4":"towns = ['Cliffside Park', 'Edgewater', 'Englewood', 'Englewood Cliffs', 'Fort Lee', 'Hackensack', 'Leonia', 'Paramus', 'Palisades Park']\nint_df = df[-15:][towns]","4388e8d9":"ax = int_df.plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Number of positive cases')\nax.set_title('Total Positive cases over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(int_df[towns].index)\nax.set_xticklabels(int_df[towns].index.strftime('%b-%d'))\nplt.show()","ff5816cd":"# Skipping initial numbers to focus more on the most recent trends\/numbers\npct_change = int_df.pct_change().rolling(4, 1).mean() * 100.0\nax = pct_change.plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Percent daily rate of change')\nax.set_title('Percent daily rate of change over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(pct_change.index)\nax.set_xticklabels(pct_change.index.strftime('%b-%d'))\nplt.show()","c18c85b9":"# We'll take a Simple Moving Average to smoothen the irregularities with the raw numbers\ndays_to_double = 100.0\/pct_change\nax = days_to_double.rolling(5, 1).mean().plot(figsize=(20, 10), rot=45)\nax.set_ylabel('Number of days for cases to double')\nax.set_title('Number of days for cases to double over time by towns', fontweight='bold', fontsize='x-large')\nax.set_xticks(days_to_double.index)\nax.set_xticklabels(days_to_double.index.strftime('%b-%d'))\nplt.show()","cb034c63":"## Days to double\nHow many days does it take for the number of positive cases to double? For that, the rate of change needs to be 1.","49696d11":"**We'll plot the cases, rate of change & the number of days that it takes to double for some towns that are interesting to me for the last 15 days**. Feel free to fork the notebook & do the same for towns you are interested in.","dd445b34":"## Let's look at the rate of change between the towns","5f50893b":"Most of the towns seem to be on the right trend of an increasing number of days it takes to double the number of cases.\n","9ce3f36f":"Teaneck is definitely the leader in number of positive cases.","547fc475":"The rate of new cases has decreased to <2% for all of these towns, which is great.","9595f0ae":"## Simple trendline of the cumulative positive cases in these towns","1c21e72c":"## Logarithmic plot for New Cases vs Total cases\nWe'll just plot for the towns that have the highest number of cases. Also, we'll take a Simple Moving average to smoothen the curve (remove irregularities).","9880b638":"### Let's find the (interesting) towns that have the highest number of cases","cc6d42f5":"So, all towns with the highest number of cases are increasing at the 45-degree exponential-growth-rate line on this curve initially. But, all these towns are tapering off & their rate of daily cases is consistently decreasing & we can say that the curve for these towns has flattened. For more info, please see my inspiration here :\n\nhttps:\/\/www.youtube.com\/watch?v=54XLXg4fYsc\n\nThanks to minutephysitcs Youtube channel for creating the above video!","57ba5da0":"So, that's the best & worst towns (lower is better) based on the rate of change for positive cases since March 20th","24636cdc":"## Let's see the best & worst towns in terms of Rate of Change"}}