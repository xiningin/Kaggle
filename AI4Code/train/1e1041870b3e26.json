{"cell_type":{"e9547a96":"code","0b73f4fc":"code","39a424e7":"code","224ce99d":"code","315e80de":"code","d641b9f9":"code","92acaed1":"code","165a46c7":"code","ddfd2353":"code","88290e55":"code","fb3a7b83":"code","6c4e2a91":"code","c3c4f2f7":"code","45a28c41":"code","fb6f90ad":"code","66e85d85":"code","324541bf":"code","b75e3b13":"code","7fcb31ba":"code","78e40d4a":"code","efbfc885":"code","228348f2":"code","2e500172":"code","8c73470f":"code","94cabbfd":"code","81eb7530":"code","dd84d0d2":"code","76fda0b5":"markdown","bcdabd7a":"markdown","7e180e8b":"markdown","f610d039":"markdown","d7fe77c2":"markdown","480bbd46":"markdown","9a357986":"markdown","fc304636":"markdown","417ab697":"markdown","4d53a5fd":"markdown"},"source":{"e9547a96":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\n\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container {width:100% !important; }<\/style>\"))\n%matplotlib inline","0b73f4fc":"import pandas as pd\nfrom pandas import Series,DataFrame","39a424e7":"import io\n\nsalary_wiki_twitter_df = pd.read_csv(\"..\/input\/nba_2017_players_with_salary_wiki_twitter.csv\")\nattendance_df = pd.read_csv(\"..\/input\/nba_2017_att_val_elo.csv\")\nteam_valuation_df = pd.read_csv(\"..\/input\/nba_2017_team_valuations.csv\")\n","224ce99d":"salary_wiki_twitter_df.head()","315e80de":"player = salary_wiki_twitter_df[['PLAYER','TEAM','POSITION','POINTS','WINS_RPM','PIE','RPM','SALARY_MILLIONS','PAGEVIEWS','TWITTER_FAVORITE_COUNT','TWITTER_RETWEET_COUNT']]\nplayer.head()","d641b9f9":"attendance_df.head()","92acaed1":"dictionary_map = {\"TEAM\":{\"ATL\":\"Atlanta Hawks\",\n\"BKN\":\"Brooklyn Nets\",\n\"BOS\":\"Boston Celtics\",\n\"CHA\":\"Charlotte Hornets\",\n\"CHI\":\"Chicago Bulls\",\n\"CLE\":\"Cleveland Cavaliers\",\n\"DAL\":\"Dallas Mavericks\",\n\"DEN\":\"Denver Nuggets\",\n\"DET\":\"Detroit Pistons\",\n\"GSW\":\"Golden State Warriors\",\n\"HOU\":\"Houston Rockets\",\n\"IND\":\"Indiana Pacers\",\n\"LAC\":\"Los Angeles Clippers\",\n\"LAL\":\"Los Angeles Lakers\",\n\"MEM\":\"Memphis Grizzlies\",\n\"MIA\":\"Miami Heat\", \n\"MIL\":\"Milwaukee Bucks\",\n\"MIN\":\"Minnesota Timberwolves\",\n\"NOP\":\"New Orleans Pelicans\",\n\"NYK\":\"New York Knicks\",\n\"OKC\":\"Oklahoma City Thunder\",\n\"ORL\":\"Orlando Magic\",\n\"PHI\":\"Philadelphia 76ers\",\n\"PHX\":\"Phoenix Suns\",\n\"POR\":\"Portland Trail Blazers\",\n\"SAC\":\"Sacramento Kings\",\n\"SAS\":\"San Antonio Spurs\",\n\"TOR\":\"Toronto Raptors\",\n\"UTA\":\"Utah Jazz\",\n\"WAS\":\"Washington Wizards\"}}","165a46c7":"player.replace(dictionary_map,inplace = True)\n","ddfd2353":"player.head()","88290e55":"total_data_df = player.merge(attendance_df, how = 'inner', on = 'TEAM')\n\n\ntotal_data_df.head()","fb3a7b83":"attendance_df = attendance_df.rename(columns = {'TOTAL':'TOTALATTENDANCE'})\nattendance_df.head()\n","6c4e2a91":"visualization = attendance_df[['VALUE_MILLIONS','TOTALATTENDANCE', 'AVG','PCT','ELO','CONF']]","c3c4f2f7":"corr_elo = visualization.corr()\nplt.subplots(figsize=(10,8))\nax = plt.axes()\nax.set_title(\"NBA Team Correlation Heatmap:  2016-2017 Season (ELO, AVG Attendance, VALUATION IN MILLIONS)\")\nsns.heatmap(corr_elo, \n            xticklabels=corr_elo.columns.values,\n            yticklabels=corr_elo.columns.values)","45a28c41":"corr_elo","fb6f90ad":"!pip -q install ggplot","66e85d85":"ax = sns.lmplot(x=\"TOTALATTENDANCE\", y=\"VALUE_MILLIONS\", data = visualization, hue=\"CONF\", size=8)\nax.set(xlabel='Total Attendance', ylabel='VALUE_MILLIONS', title=\"NBA Team Valuation in Millions vs Total Attendance:  2016-2017 Season\")","324541bf":"ax = sns.lmplot(x=\"ELO\", y=\"VALUE_MILLIONS\", data = visualization, hue=\"CONF\", size=8)\nax.set(xlabel='ELO Score', ylabel='VALUE_MILLIONS', title=\"NBA Team Valuation in Millions vs ELO Ranking:  2016-2017 Season\")","b75e3b13":"corr_elo1 = player.corr()\nplt.subplots(figsize=(10,8))\nax = plt.axes()\nax.set_title(\"NBA Team Player Information Correlation Heatmap:  2016-2017 Season\")\nsns.heatmap(corr_elo1, \n            xticklabels=corr_elo1.columns.values,\n            yticklabels=corr_elo1.columns.values)","7fcb31ba":"corr_elo1","78e40d4a":"!pip -q install ggplot\n","efbfc885":"from ggplot import *\np = ggplot(player,aes(x=\"WINS_RPM\", y=\"SALARY_MILLIONS\", color=\"POSITION\")) + geom_point(size=100)\np + xlab(\"WINS_RPM\") + ylab(\"SALARY_MILLION\") + ggtitle(\"NBA Players 2016-2017: WINS_RPM, SALARY_MILLIONS and POSITION\")","228348f2":"total_data_df.head()","2e500172":"team_level_data = total_data_df.groupby('TEAM').mean()\nteam_level_data.head()\nteam_level_data.drop(columns = ['Unnamed: 0','GMS'],inplace = True)","8c73470f":"team_level_data.head()","94cabbfd":"corr_elo2 = team_level_data.corr()\nplt.subplots(figsize=(10,8))\nax = plt.axes()\nax.set_title(\"NBA TEAM Correlation Heatmap:  2016-2017 Season\")\nsns.heatmap(corr_elo2, \n            xticklabels=corr_elo2.columns.values,\n            yticklabels=corr_elo2.columns.values)","81eb7530":"results = smf.ols('VALUE_MILLIONS ~ POINTS+WINS_RPM+PIE+RPM+SALARY_MILLIONS+PAGEVIEWS+TWITTER_RETWEET_COUNT+ TOTAL +AVG+PCT +ELO', data=team_level_data).fit()\nprint(results.summary())","dd84d0d2":"\nfrom ggplot import *\np = ggplot(total_data_df,aes(x=\"SALARY_MILLIONS\", y=\"VALUE_MILLIONS\", color=\"TEAM\")) + geom_point(size=100)\np + xlab(\"SALARY_MILLIONS\") + ylab(\"TEAM VALUE MILLIONS\") + ggtitle(\"NBA Players 2016-2017: SALARY MILLIONS, TEAM VALUATION, TEAM\")","76fda0b5":"## Pre-process the Data","bcdabd7a":"Correlation matrix and heatmap gives us a general sense of what variables explain team value. ","7e180e8b":"Two table have two different format for TEAM variables. Change the format before join data. ","f610d039":"##EDA","d7fe77c2":"OK, I am curious about whether team matters in this correlation between salary and performance.\n\n\n\n\n","480bbd46":"This plot indicates that total attendance predicts the valuation of a team with a strong power. However, this correlation does not differ in CONF variables. Whether it is west or east league does not influence a team valuation. ","9a357986":"However, it is interesting that the skills of a team does not correlates with a team valuation. Let's dive into the details regarding team members' performance and see whether it correlates with team valuation. ","fc304636":"##Loading the data ","417ab697":"Alright, let's look at some variables for players. ","4d53a5fd":"## Linear Regression\nconfirm the correlations above and see whether they are significant in a linear regression model."}}