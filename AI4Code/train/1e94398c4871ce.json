{"cell_type":{"890eeeb4":"code","a425ab65":"code","590cd9a8":"code","fd1dbe1d":"code","62ce4721":"code","1046937e":"code","105476d7":"code","bb8e217d":"code","5a64db10":"markdown","5dab3fd4":"markdown","462a555b":"markdown","850b041c":"markdown","235fab13":"markdown","781c2639":"markdown","3b4a4699":"markdown"},"source":{"890eeeb4":"\"\"\"\nAn\u00e1lisis estadistico a dataset de fallas cardiacas\n\nEduardo Mart\u00ednez C\u00f3d. 1004682865\nMar\u00eda Fernanda Nore\u00f1a C\u00f3d. 1004735407\n\nMantenimiento El\u00e9ctrico - Octubre de 2021\nUniversidad Tecnol\u00f3gica de Pereira\n\"\"\"\n\nimport numpy as np \nimport pandas as pd\nfrom scipy.stats import chi2_contingency\n\ndata = pd.read_csv(\"\/kaggle\/input\/heart-failure-prediction\/heart.csv\")\n\ndata.drop(columns=['Oldpeak', 'RestingBP', 'Cholesterol', 'MaxHR', 'ST_Slope', 'RestingECG',\n                  'ChestPainType', 'FastingBS'], inplace=True)\n\nn = len(data)                           # Cantidad de estudios realizados\nf = len(data[data.Sex == 'F'])          # Numero de hombres en el estudio\nm = len(data[data.Sex == 'M'])          # Numero de hombres en el estudio\n# ata = len(data[data.ChestPainType == 'ATA'])       # Personas con dolor de Angina atipica\n# nap = len(data[data.ChestPainType == 'NAP'])       # Personas sin dolor\n# asy = len(data[data.ChestPainType == 'ASY'])       # Personas asintomaticas\n# ta = len(data[data.ChestPainType == 'TA'])         # Personas con dolor de Angina tipica\n# sugar = len(data[data.FastingBS == 1])             # Personas con azucar en la sangre\n# notsugar = len(data[data.FastingBS == 0])          # Personas sin azucar en la sangre\nexpain = len(data[data.ExerciseAngina == 'Y'])     # Personas que experimentan Angina al ejercitarse\nexnopain = len(data[data.ExerciseAngina == 'N'])   # Personas que no experimentan ningun dolor a ejercitarse\nhtds = len(data[data.HeartDisease == 1])           # Personas con enfermedades del corazon\nnohtds = len(data[data.HeartDisease == 0])         # Pesonas sin enfermedades del corazon","a425ab65":"p_e = htds\/n                 # Probabilidad de padecer enfermedades cardiacas\np_ne = nohtds\/n              # Probabilidad de no padecer enfermedades cardiacas\n\n\nane = len(data[(data.ExerciseAngina == 'Y') & (data.HeartDisease == 1)])   # Personas que tiene angina al hacer ejercicio y tienen enfermedades del corazon\nnane = len(data[(data.ExerciseAngina == 'N') & (data.HeartDisease == 1)])  # Personas que no tienen angina al hacer ejercicio y tienen enfermedades del corazon\nanne = len(data[(data.ExerciseAngina == 'Y') & (data.HeartDisease == 0)])  # Personas que tiene angina al hacer ejercicio y no tienen enfermedades del corazon\nnanne = len(data[(data.ExerciseAngina == 'N') & (data.HeartDisease == 0)]) # Personas que no tienen angina al hacer ejercicio y no tienen enfermedades del corazon\n\n# Probabilidades condicionales \n\np_a_e = ane\/htds             # Probabilidad de tener angina al ejercitarse debido a que se sufre del corazon\np_na_e = nane\/htds           # Probabilidad de no tener dolor al ejercitarse debido a que se sufre del corazon\np_a_ne = anne\/nohtds         # Probabilidad de tener angina al ejercitarse debido a que no se sufre del corazon\np_na_ne = nanne\/nohtds       # Probabilidad de no tener dolor al ejercitarse debido a que no se sufre del corazon","590cd9a8":"# Teorema de la multiplicidad\n\npane = p_a_e * p_e          # Probabilidad de tener agnina al ejercitarse y estar enfermo del corazon\npnane = p_na_e * p_e        # Probabilidad de no tener agnina al ejercitarse y estar enfermo del corazon\npanne = p_a_ne * p_ne       # Probabilidad de tener agnina al ejercitarse y no estar enfermo del corazon\npnanne = p_na_ne * p_ne     # Probabilidad de no tener agnina al ejercitarse y no estar enfermo del corazon\n\n# Teorema de probabilidad total\n\npa = pane + panne           # Probabilidad de tener angina al ejercitarse\npna = pnane + pnanne        # Probabilidad de no tener angina al ejercitarse","fd1dbe1d":"fnane = len(data[(data.Sex == 'F') & (data.ExerciseAngina == 'Y') & (data.HeartDisease == 1)])   # Personas que son mujeres, tienen angina al hacer ejercicio y estan enfermas del corazon\nmnane = len(data[(data.Sex == 'M') & (data.ExerciseAngina == 'Y') & (data.HeartDisease == 1)])   # Personas que son hombres, tienen angina al hacer ejercicio y estan enfermas del corazon\nfnnane = len(data[(data.Sex == 'F') & (data.ExerciseAngina == 'N') & (data.HeartDisease == 1)])  # Personas que son mujeres, no tienen angina al hacer ejercicio y estan enfermas del corazon\nmnnane = len(data[(data.Sex == 'M') & (data.ExerciseAngina == 'N') & (data.HeartDisease == 1)])  # Personas que son hombres, no tienen angina al hacer ejercicio y estan enfermas del corazon\nfnanne = len(data[(data.Sex == 'F') & (data.ExerciseAngina == 'Y') & (data.HeartDisease == 0)])  # Personas que son mujeres, tienen angina al hacer ejercicio y no estan enfermas del corazon\nmnanne = len(data[(data.Sex == 'M') & (data.ExerciseAngina == 'Y') & (data.HeartDisease == 0)])  # Personas que son hombres, tienen angina al hacer ejercicio y no estan enfermas del corazon\nfnnanne = len(data[(data.Sex == 'F') & (data.ExerciseAngina == 'N') & (data.HeartDisease == 0)]) # Personas que son mujeres, no tienen angina al hacer ejercicio y no estan enfermas del corazon\nmnnanne = len(data[(data.Sex == 'M') & (data.ExerciseAngina == 'N') & (data.HeartDisease == 0)]) # Personas que son hombres, no tienen angina al hacer ejercicio y no estan enfermas del corazon\n\n# Probabilidades condicionales\n\np_f_ane = fnane\/ane            # Probabilidad de ser mujer debido a que la persona tiene angina al hacer ejercicio y esta enferma del corazon\np_m_ane = mnane\/ane            # Probabilidad de ser hombre debido a que la persona tiene angina al hacer ejercicio y esta enferma del corazon\np_f_nane = fnnane\/nane         # Probabilidad de ser mujer debido a que la persona no tiene angina al hacer ejercicio y esta enferma del corazon\np_m_nane = mnnane\/nane         # Probabilidad de ser hombre debido a que la persona no tiene angina al hacer ejercicio y esta enferma del corazon\np_f_anne = fnanne\/anne         # Probabilidad de ser mujer debido a que la persona tiene angina al hacer ejercicio y no esta enferma del corazon\np_m_anne = mnanne\/anne         # Probabilidad de ser hombre debido a que la persona tiene angina al hacer ejercicio y no esta enferma del corazon\np_f_nanne = fnnanne\/nanne      # Probabilidad de ser mujer debido a que la persona no tiene angina al hacer ejercicio y no esta enferma del corazon\np_m_nanne = mnnanne\/nanne      # Probabilidad de ser hombre debido a que la perosna no tiene angina al hacer ejercicio y no esta enferma del corazon","62ce4721":"# Teorema de multiplicidad\n\npfnane = p_f_ane * pane        # Probabilidad de ser mujer, tener angina al hacer ejercicio y estar enferma del corazon\npmnane = p_m_ane * pane        # Probabilidad de ser hombre, tener angina al hacer ejercicio y estar enfermo del corazon\npfnnane = p_f_nane * pnane     # Probabilidad de ser mujer, no tener angina al hacer ejercicio y estar enferma del corazon\npmnnane = p_m_nane * pnane     # Probabilidad de ser hombre, no tener angina al hacer ejercicio y estar enfermo del corazon\npfnanne = p_f_anne * panne     # Probabilidad de ser mujer, tener angina al hacer ejercicio y no estar enferma del corazon\npmnanne = p_m_anne * panne     # Probabilidad de ser hombre, tener angina al hacer ejercicio y no estar enfermo del corazon\npfnnanne = p_f_nanne * pnanne  # Probabilidad de ser mujer, no tener angina al hacer ejercicio y no estar enferma del corazon\npmnnanne = p_m_nanne * pnanne  # Probabilidad de ser hombre, no tener angina al hacer ejercicio y no estar enfermo del corazon\n\n# Teorema de probabilidad total\n\npfem = pfnane+pfnnane+pfnanne+pfnnanne      # Probabilidad de ser mujer\npmas = pmnane+pmnnane+pmnanne+pmnnanne      # Probabilidad de ser hombre\n\nprint('Probabilidad de ser mujer: ', pfem)\nprint('Probabilidad de ser hombre: ', pmas)","1046937e":"# Teorema de Bayes\n\n# Condicional 1\n\np_a_f = (pfnane+pfnanne)\/pfem        # Probabilidad de tener angina al hacer ejercicio debido a que la persona es mujer.\np_na_f = (pfnnane+pfnnanne)\/pfem     # Probabilidad de no tener angina al hacer ejercicio debido a que la persona es mujer.\np_a_m = (pmnane+pmnanne)\/pmas        # Probabilidad de tener angina al hacer ejercicio debido a que la perona es hombre.\np_na_m = (pmnnane+pmnnanne)\/pmas     # Probabilidad de no tener angina al hacer ejercicio debido a que la persona es mobre.\n\n# Condicional 2\n\np_e_anf = pfnane\/(pfnane+pfnanne)           # Probabilidad de estar enfermo del corazon debido a tener angina al hacer ejercicio y ser mujer.\np_ne_anf = pfnanne\/(pfnane+pfnanne)         # Probabilidad de no estar enfermo del corazon debido a tener angina al hacer ejercicio y ser mujer.\np_e_nanf = pfnnane\/(pfnnane+pfnnanne)       # Probabilidad de estar enfermo del corazon debido a no tener angina al hacer ejercicio y ser mujer.\np_ne_nanf = pfnnanne\/(pfnnane+pfnnanne)     # Probabilidad de no estar enfermo del corazon debido a no tener angina al hacer ejercicio y ser mujer.\np_e_anm = pmnane\/(pmnane+pmnanne)           # Probabilidad estar enfermo del corazon debido a tener angina al hacer ejercicio y ser hombre.\np_ne_anm = pmnanne\/(pmnane+pmnanne)         # Probabilidad de no estar enfermo del corazon debido a tener angina al hacer ejercicio y ser hombre.\np_e_nanm = pmnnane\/(pmnnane+pmnnanne)       # Probabilidad de estar enfermo del corazon debido a no tener angina al hacer ejercicio y ser hombre.\np_ne_nanm = pmnnanne\/(pmnnane+pmnnanne)     # Probabilidad de no estar enfermo del corazon debido a no tener angina al hacer ejercicio y ser hombre.\n\n# Condicional 3\n\np_ane_f = pfnane\/pfem                       # Probabilidad de tener angina al hacer ejercicio y estar enfermo del corazon debido a que se es mujer.\np_nane_f = pfnnane\/pfem                     # Probabilidad de no tener angina al hacer ejercicio y estar enfermo del corazon debido a que se es mujer.\np_anne_f = pfnanne\/pfem                     # Probabilidad de tener angina al hacer ejercicio y no estar enfermo del corazon debido a que se es mujer.\np_nanne_f = pfnnanne\/pfem                   # Probabilidad de no tener angina al hacer ejercicio y no estar enfermo del corazon debido a que se es mujer.\np_ane_m = pmnane\/pmas                       # Probabilidad de tener angina al hacer ejercicio y estar enfermo del corazon debido a que se es hombre.\np_nane_m = pmnnane\/pmas                     # Probabilidad de no tener angina al hacer ejercicio y estar enfermo del corazon debido a que se es hombre.\np_anne_m = pmnanne\/pmas                     # Probabilidad de tener angina al hacer ejercicio y no estar enfermo del corazon debido a que se es hombre.\np_nanne_m = pmnnanne\/pmas                   # Probabilidad de no tener angina al hacer ejercicio y no estar enfermo del corazon debido a que se es hombre.","105476d7":"# Pruebas de independencia\n\na = data.query('Age <= 29')            # Grupo de edad menores de 29 a\u00f1os\nb = data.query('30 <= Age <= 44')      # Grupo de edad entre 30 y 44 a\u00f1os\nc = data.query('45 <= Age <= 59')      # Grupo de edad entre 45 y  59 a\u00f1os\nd = data.query('60 <= Age <= 74')      # Grupo de edad entre 60 y 74 a\u00f1os\ne = data.query('Age >= 75')            # Grupo de edad mayores de 75 a\u00f1os\n\n# Enfermos del corazon mujeres\n\nenff = [[len(a[(a.Sex == 'F') & (a.ExerciseAngina == 'Y') & (a.HeartDisease == 1)]),\n        len(a[(a.Sex == 'F') & (a.ExerciseAngina == 'N') & (a.HeartDisease == 1)])],\n        [len(b[(b.Sex == 'F') & (b.ExerciseAngina == 'Y') & (b.HeartDisease == 1)]),\n        len(b[(b.Sex == 'F') & (b.ExerciseAngina == 'N') & (b.HeartDisease == 1)])],\n        [len(c[(c.Sex == 'F') & (c.ExerciseAngina == 'Y') & (c.HeartDisease == 1)]),\n        len(c[(c.Sex == 'F') & (c.ExerciseAngina == 'N') & (c.HeartDisease == 1)])],\n        [len(d[(d.Sex == 'F') & (d.ExerciseAngina == 'Y') & (d.HeartDisease == 1)]),\n        len(d[(d.Sex == 'F') & (d.ExerciseAngina == 'N') & (d.HeartDisease == 1)])],\n        [len(e[(e.Sex == 'F') & (e.ExerciseAngina == 'Y') & (e.HeartDisease == 1)]),\n        len(e[(e.Sex == 'F') & (e.ExerciseAngina == 'N') & (e.HeartDisease == 1)])]]\n\nenff.pop(0)\nenff.pop(3)\nchi_enff = chi2_contingency(enff)\n\n# Enfermos del corazon hombres\n       \nenfm = [[len(a[(a.Sex == 'M') & (a.ExerciseAngina == 'Y') & (a.HeartDisease == 1)]),\n        len(a[(a.Sex == 'M') & (a.ExerciseAngina == 'N') & (a.HeartDisease == 1)])],\n        [len(b[(b.Sex == 'M') & (b.ExerciseAngina == 'Y') & (b.HeartDisease == 1)]),\n        len(b[(b.Sex == 'M') & (b.ExerciseAngina == 'N') & (b.HeartDisease == 1)])],\n        [len(c[(c.Sex == 'M') & (c.ExerciseAngina == 'Y') & (c.HeartDisease == 1)]),\n        len(c[(c.Sex == 'M') & (c.ExerciseAngina == 'N') & (c.HeartDisease == 1)])],\n        [len(d[(d.Sex == 'M') & (d.ExerciseAngina == 'Y') & (d.HeartDisease == 1)]),\n        len(d[(d.Sex == 'M') & (d.ExerciseAngina == 'N') & (d.HeartDisease == 1)])],\n        [len(e[(e.Sex == 'M') & (e.ExerciseAngina == 'Y') & (e.HeartDisease == 1)]),\n        len(e[(e.Sex == 'M') & (e.ExerciseAngina == 'N') & (e.HeartDisease == 1)])]]\n\nenfm.pop(0)\nchi_enfm = chi2_contingency(enfm)\n\n# No enfermos del corazon mujeres\n\nnoenff = [[len(a[(a.Sex == 'F') & (a.ExerciseAngina == 'Y') & (a.HeartDisease == 0)]),\n        len(a[(a.Sex == 'F') & (a.ExerciseAngina == 'N') & (a.HeartDisease == 0)])],\n        [len(b[(b.Sex == 'F') & (b.ExerciseAngina == 'Y') & (b.HeartDisease == 0)]),\n        len(b[(b.Sex == 'F') & (b.ExerciseAngina == 'N') & (b.HeartDisease == 0)])],\n        [len(c[(c.Sex == 'F') & (c.ExerciseAngina == 'Y') & (c.HeartDisease == 0)]),\n        len(c[(c.Sex == 'F') & (c.ExerciseAngina == 'N') & (c.HeartDisease == 0)])],\n        [len(d[(d.Sex == 'F') & (d.ExerciseAngina == 'Y') & (d.HeartDisease == 0)]),\n        len(d[(d.Sex == 'F') & (d.ExerciseAngina == 'N') & (d.HeartDisease == 0)])],\n        [len(e[(e.Sex == 'F') & (e.ExerciseAngina == 'Y') & (e.HeartDisease == 0)]),\n        len(e[(e.Sex == 'F') & (e.ExerciseAngina == 'N') & (e.HeartDisease == 0)])]]\n\nnoenff.pop(0)\nchi_noenff = chi2_contingency(noenff)\n\n# No enfermos del corazon hombres\n\nnoenfm = [[len(a[(a.Sex == 'M') & (a.ExerciseAngina == 'Y') & (a.HeartDisease == 0)]),\n        len(a[(a.Sex == 'M') & (a.ExerciseAngina == 'N') & (a.HeartDisease == 0)])],\n        [len(b[(b.Sex == 'M') & (b.ExerciseAngina == 'Y') & (b.HeartDisease == 0)]),\n        len(b[(b.Sex == 'M') & (b.ExerciseAngina == 'N') & (b.HeartDisease == 0)])],\n        [len(c[(c.Sex == 'M') & (c.ExerciseAngina == 'Y') & (c.HeartDisease == 0)]),\n        len(c[(c.Sex == 'M') & (c.ExerciseAngina == 'N') & (c.HeartDisease == 0)])],\n        [len(d[(d.Sex == 'M') & (d.ExerciseAngina == 'Y') & (d.HeartDisease == 0)]),\n        len(d[(d.Sex == 'M') & (d.ExerciseAngina == 'N') & (d.HeartDisease == 0)])],\n        [len(e[(e.Sex == 'M') & (e.ExerciseAngina == 'Y') & (e.HeartDisease == 0)]),\n        len(e[(e.Sex == 'M') & (e.ExerciseAngina == 'N') & (e.HeartDisease == 0)])]]\n \nchi_noenfm = chi2_contingency(noenfm)","bb8e217d":"\"\"\"\nFunci\u00f3n para comprobar sumas, no poner atenci\u00f3n\n\"\"\"\n\ndef sumat(list):\n    a = 0 \n    b = 0\n    for i in range(0,5):\n        a = list[i][0] + a\n        b = list[i][1] + b\n    return a + b","5a64db10":"En la siguiente celda se calculan probabilidades multiples a partir de las probabilidades condicionales calculadas anteriormente, y adem\u00e1s se calcula la probabilidad total de ser hombre o mujer a partir de estas probabilidades multiples:","5dab3fd4":"# **An\u00e1lisis de insuficiencia cardiaca**\n\nA continuaci\u00f3n se muestra un an\u00e1lisis de estadistica inferencial el cual pretende examinar la base de datos \"*heart-failure-prediction*\" la cual recoje exactamente 918 estudios realizados a 193 mujeres y 725 hombres, ademas se recopilan diferentes caracter\u00edsticas como por ejemplo: Si la persona estudiada tiene algun tipo de dolor, si tiene azucar en la sangre o si ademas de esto sufre de problemas cardiacos.\n\nEn la siguiente celda se har\u00e1 un conteo de datos para separar a las personas seg\u00fan diferentes caracteristicas:","462a555b":"En la siguiente celda se pretende calcular las probabilidades condicionales comparando el hecho de tener angina o no con el hecho de tener afecciones cardiacas o no:","850b041c":"En la siguiente celda se calculan las pruebas de independencia chi cuadrado, a partir de si la persona tiene enfermedades cardiacas o no:","235fab13":"En la siguiente celda se calculan otras probabilidades condicionales, a partir de los calculos realizados previamente, se desprende otra rama de arbol de probabilidad donde se anexa el hecho de que el genero sea femenino o masculino:","781c2639":"En la siguiente celda se calcula la probabilidad de tener angina o no al mismo tiempo que se tiene una enfermedad cardiaca o no y a su vez se calcula la probabilidad de tener angina o no a partir de las probabilidades multiples:","3b4a4699":"En la siguiente celda se analiza el arbol de probabilidades de manera contraria partiendo esta vez por la probabilidad de tener genero masculino o femenino y finalizando con la probabilidad de estar enfermo del corazon o no:"}}