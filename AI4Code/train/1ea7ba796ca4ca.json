{"cell_type":{"76ec93d9":"code","d4378e70":"code","ecc5673c":"code","dd180f48":"code","a2322409":"code","89c53de4":"code","da9175f0":"code","066b7728":"code","666e9bac":"code","a0592d9f":"code","0d9de4f0":"code","5ae445d0":"code","ed53fe47":"code","43331173":"code","0bd5dbde":"code","15ad5dbb":"code","e99524d8":"code","1eedd15f":"code","1835c965":"code","8d01207f":"code","4f938080":"code","056d2de7":"code","f7f8a477":"code","6009a05c":"code","8d7e30c4":"code","0f65b6c6":"code","025f2e4d":"code","5c3235ce":"code","2e1acc20":"code","a38ee6c0":"code","fa0c70bd":"code","77aca034":"code","3dae2cca":"code","fe4efdc9":"code","bc4d69b6":"code","6089d499":"code","650c2fe6":"markdown","6d3ff965":"markdown","cd038430":"markdown","8bd4d1d2":"markdown","023bb352":"markdown","be92eddf":"markdown","7d5c21f6":"markdown","174aa180":"markdown","3d78881b":"markdown","b867fe1d":"markdown","12927e76":"markdown","122cff08":"markdown","d434b232":"markdown","273ffde4":"markdown","745ade71":"markdown","7a362be7":"markdown","3168a28b":"markdown","e38aa40c":"markdown","ee078767":"markdown","715af883":"markdown","06b28ca6":"markdown","0425233c":"markdown","9401fe4c":"markdown","5eac3c9c":"markdown","426161fc":"markdown","c3814b5f":"markdown","04e7be4f":"markdown","a46ed8b0":"markdown","7a8f2038":"markdown","e345eb9b":"markdown","f6bb7e2d":"markdown","a8e23eef":"markdown","8cbd2732":"markdown","02f68288":"markdown","cd6eaa77":"markdown","24a6a7ff":"markdown","b5a3fa0e":"markdown","312b8970":"markdown","972ed50a":"markdown","4c723be0":"markdown","a206af53":"markdown","35b84c40":"markdown"},"source":{"76ec93d9":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport warnings \nwarnings.filterwarnings('ignore')\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","d4378e70":"df = pd.read_csv('\/kaggle\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')\ndf.head()","ecc5673c":"df.isnull().sum()","dd180f48":"df.info()","a2322409":"df['reviews_per_month'].head(10)","89c53de4":"df['reviews_per_month'].mean()","da9175f0":"df = df.dropna()","066b7728":"df.isnull().sum()","666e9bac":"df.info()","a0592d9f":"df['price'].describe()","0d9de4f0":"Q1 = df['price'].quantile(0.25)\nQ3 = df['price'].quantile(0.75)\nIQR=Q3-Q1\ndf = df[~((df['price']<(Q1-1.5*IQR))|(df['price']>(Q3+1.5-IQR)))]","5ae445d0":"df.info()","ed53fe47":"plt.figure(figsize=(10,7))\nsns.distplot(df.price,color='r')\nplt.xlabel(\"Price\")\nplt.title(\"Distribution of Price of Apartments\")\nplt.show()","43331173":"import scipy.stats as st\nst.shapiro(df.price)","0bd5dbde":"df.room_type.unique()","15ad5dbb":"pvt = df[df['room_type'] == 'Private room']\nshare = df[df['room_type'] == 'Shared room']\napt = df[df['room_type'] == 'Entire home\/apt']","e99524d8":"st.levene(pvt.price, share.price, apt.price)","1eedd15f":"plt.figure(figsize=(10,6))\nsns.boxplot(y='price',x='room_type',data=df)\nplt.show()","1835c965":"st.kruskal(pvt.price,share.price,apt.price)","8d01207f":"ind = ['Private Rooms','Apartments','Shared Rooms']\nx = pd.DataFrame([pvt.price.mean(),apt.price.mean(),share.price.mean()], index=ind)\nx","4f938080":"x.plot.bar(color='g')\nplt.title(\"Barplot of Mean Price Across Different Categories of Rooms\")\nplt.show()","056d2de7":"st.f_oneway(pvt.price,share.price,apt.price)","f7f8a477":"x.plot.bar(color='r')\nplt.title(\"Barplot of Mean Price Across Different Categories of Rooms\")\nplt.show()","6009a05c":"df.neighbourhood_group.unique()","8d7e30c4":"a = df[df['neighbourhood_group'] == 'Brooklyn']['price']\nb = df[df['neighbourhood_group'] == 'Manhattan']['price']\nc = df[df['neighbourhood_group'] == 'Queens']['price']\nd = df[df['neighbourhood_group'] == 'Staten Island']['price']\ne = df[df['neighbourhood_group'] == 'Bronx']['price']\n\nst.kruskal(a,b,c,d,e)","0f65b6c6":"st.f_oneway(a,b,c,d,e)","025f2e4d":"ind = ['Brooklyn','Manhattan','Queens','Staten Island','Bronx']\nx = pd.DataFrame([a.mean(),b.mean(),c.mean(),d.mean(),e.mean()], index=ind)\nx.plot.bar(color='m')\nplt.show()","5c3235ce":"tab = pd.crosstab(df['room_type'],df['neighbourhood_group'])\n","2e1acc20":"st.chi2_contingency(tab)","a38ee6c0":"ct = pd.crosstab(df['room_type'],df['neighbourhood_group'])\nct.plot.bar(stacked=True)\nplt.show()","fa0c70bd":"from statsmodels.formula.api import ols","77aca034":"model = ols(\"price~neighbourhood_group+host_name\",data=df).fit()","3dae2cca":"# model.summary()","fe4efdc9":"from statsmodels.stats.anova import anova_lm\nanova_lm(model,typ=2)","bc4d69b6":"plt.figure(figsize=(12,8))\nsns.heatmap(df.corr(),annot=True,cmap='YlGnBu')\nplt.show()","6089d499":"tab = pd.crosstab(df['neighbourhood'],df['neighbourhood_group'])\nst.chi2_contingency(tab)","650c2fe6":"> #### Since p value (0.0) is less than alpha (5% - assumed), the null hypothesis is rejected. Therefore, the distribution is not normal (as cound be seen from the Distribution Plot above). Since the distribution not normal, theoretically only non-parametric tests can be performed on the data.","6d3ff965":"## Chi-Squared Test\n\n> #### H0: There is no association between neigbourhood and neighbourhood groups.\n> #### H1: There is an association between neighbourhood and neighbourhood groups.","cd038430":"> #### Since the number of null values in columns 'last_review' and 'reviews_per_month' is large (10052), we can either perform forward or backward filling to impute the values or we can drop those rows. The problem with forward or backward fill is that (say for column 'reviews_per_month') if the next value after the null value is large (like 4.64 as shown above) but the actual number of reviews per month for that apartment were close to zero, then we are making a mistake by performing forward fill in that null value. Similar reasoning applies for both the columns. Thus, it makes more sense to drop the rows containing null values since it will not result in the Curse of Dimensionality for the data.","8bd4d1d2":"\n## Two Way ANOVA","023bb352":"### Price vs Neighbourhood Group\n> #### H0: Mean Price (neighbourhood_group 1) = Mean Price (neighbourhood_group 2) = .... = Mean Price (neighbourhood_group n)\n> #### H1: Mean Price (neighbourhood_group 1) != Mean Price (neighbourhood_group 2) != .... != Mean Price (neighbourhood_group n)\n\n### Price vs Host Name\n> #### H0: Mean Price (host_name 1) = Mean Price (host_name 2) = .... = Mean Price (host_name n)\n> #### H1: Mean Price (host_name 1) != Mean Price (host_name 2) != .... != Mean Price (host_name n)","be92eddf":"## Kruskal Wallis Test\n\n> H0 (null hypothesis): mean_price(private_room) = mean_price(shared_room) = mean_price(entire_home\/apt)\n\n> H1 (alternate hypothesis): mean_price(private_room) != mean_price(shared_room) != mean_price(entire_home\/apt)\n[](http:\/\/)","7d5c21f6":"## Concluding Remarks\n* Performed different hypothesis tests on the data.\n* Found the association and dependability of different variables on one-another.\n* Performed both parametric (one way ANOVA, two way ANOVA) and non-parametric (z proportions test, Mann Whitney test, Kruskal Wallis test, Chi-squared test) tests on variables and compared the observations from both types.\n* Visualized and verified the conclusions drawn from the different tests using boxplots, distributions plots, bar graphs and stacked bar charts.\n","174aa180":"#### Therefore, in one way ANOVA also, p value is less than alpha and null hypthesis is rejected implying that the mean prices across different types of rooms are not the same. The barplot is drawn again for reference.","3d78881b":"#### Checking Null Values","b867fe1d":"## Price vs Neighbourhood Group & Host Name","12927e76":"## Chi Squared Test\n\n> #### H0 (null hypothesis): There is no association between Room Type and Neighbourhood Group.\n\n> #### H1 (alternate hypothesis): There is an association between Room Type and Neighbourhood Group.","122cff08":"> #### In the above test result, p value < alpha (0.05). Therefore, null hypothesis is rejected. This implies that the mean price across different types of apartments is not the same. We can confirm that from the barplot of the mean prices shown below.\n","d434b232":"#### The continuous variable Price is to be compared with categorical variables Neighbourhood and Host Name having more than two categories. Thus, two way ANOVA test has to be used.","273ffde4":"#### Since both the variables Room Type and Neighbourhood Group are categorical having more than two categories, we can peform Chi-squared test.","745ade71":"### Levene Test (for testing of variance)\n\n> H0 (null hypothesis): variance(private_room) = variance(shared_room) = variance(entire_home)\n\n> H1 (alternate hypothesis): variance(private_room) != variance(shared_room) != variance(entire_home)","7a362be7":"> #### Since p value is close to zero and less than alpha (0.05), we reject H0. Thus, the mean price across different neighbourhood groups is not the same.\n\n> #### Conclusion: There is an association between price and neighbourhood group, i.e. the price is dependent on the neighbourhood group that the house is available in.","3168a28b":"* > ### Objective: To perform Statistical Analysis on the data set by implementing various stats modules (on New York AirBnb data) such as Hypothesis Testing,  Tests of Mean (Kruskal Wallis Test, ANOVA - one way and two way), Tests of Proportion (z test and chi-squared test) and Tests of Variance (F-test, Levene test), after checking for the three assumptions of (i) Normality of target variable (ii) Randomness of Sampling (iii) Equal variance across categories. The level of significance is assumed to be 5 percent (i.e. alpha = 0.05) If assumptions are satisfied, parametric tests can be performed, else non-parametric tests have to be performed. The results of the tests performed will enable us to find the associativity and dependability of different features on one-another. We shall use data visualization techniques to confirm our findings.","e38aa40c":"## Price vs Room Type","ee078767":"### Testing the assumptions:\n* Randomness of Data\n* Normality Test\n* Variance Test\n\nThe target variable being the price.","715af883":"> #### Since p value is approximately zero (and thus less than alpha = 0.05), we reject H0. Therefore, the variance of the price for different categories of rooms is not the same. This can be confirmed by observing the boxplot below.","06b28ca6":"> #### The variable 'price' contains large outliers. Therefore, to improve the normality of data, we will take the data between 25th percentile and 75th percentile, thereby eliminating the effects of outliers.","0425233c":"#### Both variables are categorical having more than two categories => perform chi-squared test.","9401fe4c":"> #### Observations: The highest correlation exists between host_id and id (0.6) closely followed number_of_reviews and reviews_per_month, while the lowest correlation exits between longitude and price (-.092).","5eac3c9c":"* ### Cleaning the Data:","426161fc":"> #### Conclusion: There is association between Price and Room Type. The price is dependent on the type of room that a person chooses since the mean price across all types is not equal.","c3814b5f":"## One Way ANOVA\n\n> H0 (null hypothesis): mean_price(Brooklyn) = mean_price(Manhattan) = ..... = mean_price(Bronx)\n\n\n> H1 (null hypothesis): mean_price(Brooklyn) != mean_price(Manhattan) != ..... != mean_price(Bronx)","04e7be4f":"## Room Type vs Neighbourhood Group","a46ed8b0":"##  Neighbourhood vs Neighbourhood Group","7a8f2038":"> #### The p values of host name and neighbourhood group are less than alpha (0.05). This implies that the mean price of rooms with different neighbourhood groups and host names are not equal.\n\n> #### Conclusion: The mean price of a room has an association with the name of its host and the neighbourhood group it belongs to. The price for a room with one host name in one neighbourhood group will be different from the price of a room with a different host name in a different neighbourhood group.","e345eb9b":"#### Outlier Treatment","f6bb7e2d":"## Price vs Neighbourhood","a8e23eef":"#### A heatmap can be used to check the correaltion between continuous variables in the dataset.","8cbd2732":"## Kruskal Wallis Test\n\n> H0 (null hypothesis): mean_price(Brooklyn) = mean_price(Manhattan) = ..... = mean_price(Bronx)  (see categories above)\n\n\n> H1 (null hypothesis): mean_price(Brooklyn) != mean_price(Manhattan) != ..... != mean_price(Bronx)\n","02f68288":"> #### Since p value is close to zero and less than alpha (similar to Kruskal test), we reject H0. Thus, the mean price across different neighbourhood groups is not the same. This can be seen in the barplot below.","cd6eaa77":"## Statistical Analysis","24a6a7ff":"### Shapiro Test (for checking Normality)\n\n>H0 (Null Hypothesis) : Distribution is normal\n\n>H1 (Alternate Hypothesis): Distribution is not normal","b5a3fa0e":"#### The 'neighbourhood_group' is a categorical variable having more than two categories, so we can perform either Kruskal Wallis test or One Way ANOVA test.","312b8970":"## One Way ANOVA\n\n\n> H0 (null hypothesis): mean_price(private_room) = mean_price(shared_room) = mean_price(entire_home\/apt)\n\n> H1 (alternate hypothesis): mean_price(private_room) != mean_price(shared_room) != mean_price(entire_home\/apt)","972ed50a":"## Correlation Between Continuous Variables","4c723be0":"#### Since the assumptions of Normality and Variance are violated, theoretically parametric tests cannot be performed but still it can be checked if the parametric test (one way ANOVA) gives the same result in this case.","a206af53":"> #### Conclusion: The null hypothesis is rejected since the p value (0.0) is less than alpha (0.05). Thus, there is association between neighbourhood and neighbourhood group (as can be expected). This simply implies that the neighbourhood group is dependent upon the neighbourhood in which the house is present.","35b84c40":"> #### The p value obtained (2.899e-23) is less than alpha (0.05) and thus the null hypothesis is rejected. \n> #### Conclusion: There is association between Room Type and Neighbourhood Group implying that the proportion of availability of a particular type of room (private, shared, apartment) is dependent on the neighbourhood group in which we are searching. This can be verified from the stacked bar graph drawn below."}}