{"cell_type":{"39eedae8":"code","acbd60f4":"code","010a5872":"code","6d035f9c":"code","97fb0f7d":"code","e44f6845":"code","039d87f4":"markdown","2b68bc7b":"markdown"},"source":{"39eedae8":"import pandas as pd\nimport copy\nimport numpy as np","acbd60f4":"data = pd.read_csv(\"..\/input\/obj2node\/triplets_all.csv\")\ndata","010a5872":"n, N = 878, 385881\nsz = [0] * n\nJ = [[0] * n for i in range(n)]\nfor i in range(N):\n    s1, s2 = data.iloc[i, 0], data.iloc[i, 1]\n    x1, x2 = map(int, s1.split('_'))\n    #print(x1, x2)\n    sz = int(s2)\n    if (x1 >= n or x2 >= n):\n        break\n    J[x1][x2] = sz\n    J[x2][x1] = sz","6d035f9c":"def is_clique(graph, subgraph): # \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u043a\u043b\u0438\u043a\u0443\n    for i in subgraph:\n        for j in subgraph:\n            if (i != j and graph[i][j] == 0):\n                return 0\n    return 1\n\ndef get_clique(graph): # \u043f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u043a\u0438\n    del_vertexs = [0] * n\n    egraph = copy.deepcopy(graph)\n    while (1): # \u043f\u0443\u043d\u043a\u0442 1-3\n        v = -1\n        degs = [0] * n\n        for i in range(n):\n            cnt = 0\n            for j in graph[i]:\n                cnt += j > 0\n            degs[i] = cnt\n        for i in range(n):\n            if (del_vertexs[i] == 0 and (v == -1 or degs[v] > degs[i])):\n                v = i\n        del_vertexs[v] = 1\n        for i in range(n):\n            graph[i][v] = 0\n            graph[v][i] = 0\n        clique = []\n        for i in range(n):\n            if (del_vertexs[i] == 0):\n                clique.append(i)\n        if (is_clique(egraph, clique)):\n            break\n    clique = []\n    for i in range(n):\n        if (del_vertexs[i] == 0):\n            clique.append(i)\n    for i in range(n): # \u043f\u0443\u043d\u043a\u0442 4\n        if (del_vertexs[i] == 1):\n            ok = 1\n            for u in clique:\n                if (egraph[u][i] == 0):\n                    ok = 0\n            if (ok):\n                clique.append(i)\n    return clique\n\ndef greedy(): # \u043d\u0430\u0448 \u0436\u0430\u0434\u043d\u0438\u043a\n    res = [[] for i in range(n)]\n    color = 0\n    while (1):\n        graph = [[0] * n for i in range(n)]\n        cnt_edges = 0\n        for i in range(n):\n            for j in range(n):\n                if (J[i][j] != 0 and i != j):\n                    graph[i][j] = 1 \n                    cnt_edges += 1 \n        cnt_edges \/= 2\n        if (cnt_edges == 0):\n            return res\n        clique = get_clique(graph)\n        for i in clique:\n            res[i].append(color)\n            for j in clique:\n                if (i != j):\n                    J[i][j] -= 1\n        color += 1\n        print(\"C = \", color, \"cnt_edges = \", cnt_edges, \"clique size = \", len(clique))\n    return res","97fb0f7d":"greedy() # \u043d\u0430 \u043f\u0438\u0442\u043e\u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043c\u044f\u0433\u043a\u043e \u0433\u043e\u0432\u043e\u0440\u044f \u043d\u0435 \u0431\u044b\u0441\u0442\u0440\u043e (\u043b\u0443\u0447\u0448\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u044f\u0437\u044b\u043a)","e44f6845":"print(\"N = \", color)","039d87f4":"\u0422.\u043a \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0434\u0435\u0439 \u0436\u0430\u0434\u043d\u043e\u0433\u043e \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430. \u0411\u0443\u0434\u0435\u043c \u0438\u0442\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u043a\u0430 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u043c \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044f, \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0448\u0430\u0433\u0435 \u0431\u0443\u0434\u0435\u043c \u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430 \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0432 \u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432. \n\n\u041f\u0435\u0440\u0434\u0441\u0442\u0430\u0432\u0438\u043c \u043d\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435, \u043a\u0430\u043a \u0433\u0440\u0430\u0444, \u0433\u0434\u0435 \u043a\u0430\u0436\u0434\u0430\u044f \u0432\u0435\u0440\u0448\u0438\u043d\u0430 - \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e. \u0420\u0435\u0431\u0440\u043e \u043c\u0435\u0436\u0434\u0443 \u0432\u0435\u0440\u0448\u0438\u043d\u0430\u043c\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 <=> \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430\u043c\u0438 \u043d\u0435 \u043f\u0443\u0441\u0442\u043e. \u0422\u043e\u0433\u0434\u0430 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0448\u0430\u0433\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u043c \u043a\u043b\u0438\u043a\u0443(\u0441\u0430\u043c\u0443\u044e \u0431\u043e\u043b\u044c\u0448\u0443\u044e, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u0435\u043c) \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0432\u043e \u0432\u0441\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u044d\u0442\u043e\u0439 \u043a\u043b\u0438\u043a\u0435.(\u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0434\u0435\u043b\u0430\u0435\u043c \u044d\u0442\u043e \u043e\u043f\u044f\u0442\u044c \u043f\u043e\u043a\u0430 \u0433\u0440\u0430\u0444 \u043d\u0435 \u0441\u0442\u0430\u043d\u0435\u0442 \u043f\u0443\u0441\u0442\u044b\u043c)","2b68bc7b":"\u041a\u0430\u043a \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u043a\u043b\u0438\u043a\u0443?\n\u042d\u0442\u0430 \u0437\u0430\u0434\u0430\u0447\u0430 NP-\u043f\u043e\u043b\u043d\u0430\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0435\u043d\u043d\u043e.\n\u0415\u0441\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0439 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u043b\u0438\u043a\u0438. \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043e\u0434\u043d\u0443 \u0438\u0437 \u043d\u0438\u0445.\n\n1) \u0412\u044b\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u0435\u0440\u0448\u0438\u043d\u0443 \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0435\u043f\u0435\u043d\u044c\u044e \u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u043c \u0435\u0435 \u0438\u0437 \u0433\u0440\u0430\u0444\u0430. \n\n2) \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043e\u0441\u0442\u0430\u0432\u0448\u0438\u0439\u0441\u044f \u0433\u0440\u0430\u0444 \u043d\u0430 \u043a\u043b\u0438\u043a\u0443.\n\n3) \u0415\u0441\u043b\u0438 \u044d\u0442\u043e\u0442 \u0433\u0440\u0430\u0444 \u043d\u0435 \u043a\u043b\u0438\u043a\u0430 \u0442\u043e \u043e\u043f\u044f\u0442\u044c \u0434\u0435\u043b\u0430\u0435\u043c \u043f\u0443\u043d\u043a\u0442 1.\n\n4) \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u043d\u0430\u0448\u043b\u0438 \u043a\u043b\u0438\u043a\u0443, \u043f\u044b\u0442\u0430\u0435\u043c\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0430\u043c\u0438."}}