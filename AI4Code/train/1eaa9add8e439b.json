{"cell_type":{"6cc79b06":"code","c0505ab4":"code","fb9bca9b":"code","98513af3":"code","3e5aac6b":"code","1d0082e0":"code","0af1e98b":"code","9a76deb2":"code","87a60c25":"code","1b5c56ec":"code","3697ba16":"code","0d45106d":"code","6f6a883f":"code","081dd912":"code","e2775360":"code","89585b79":"code","28dcdc13":"markdown","999ad37e":"markdown","34737d24":"markdown","0ad04a3d":"markdown","cc3fa9e1":"markdown","e1e27170":"markdown"},"source":{"6cc79b06":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib as plt\nimport seaborn as sns\nfrom tqdm import tqdm_notebook as tqdm\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\npd.set_option('display.max_columns', 500)\n%matplotlib inline","c0505ab4":"def load_data(path, num_row=None):\n    df = pd.read_csv(path, nrows=num_row)\n    return df","fb9bca9b":"is_debug = False\nnum_row = 10000 if is_debug else None\n\ntrain_path = \"..\/input\/train_identity.csv\"\ntrain_transaction_path = \"..\/input\/train_transaction.csv\"\ntest_path = \"..\/input\/test_identity.csv\"\ntest_transaction_path = \"..\/input\/test_transaction.csv\"","98513af3":"train = load_data(train_path)\ntrain_transaction = load_data(train_transaction_path)\ntest = load_data(test_path)\ntest_transaction = load_data(test_transaction_path)\n\nprint(train.shape)\nprint(train_transaction.shape)\nprint(test.shape)\nprint(test_transaction.shape)","3e5aac6b":"adjusted_train = pd.merge(train_transaction, train, on=\"TransactionID\", how='left')\nadjusted_test = pd.merge(test_transaction, test, on=\"TransactionID\", how='left')\n\nprint(\"adjusted_train: {}\".format(adjusted_train.shape))\nprint(\"adjusted_test: {}\".format(adjusted_test.shape))","1d0082e0":"adjusted_train.head()","0af1e98b":"num_dict = {}\nunique_list = []\nfor num_1 in tqdm(adjusted_train['V202'].unique()):\n    tmp_list = []\n    if num_1.is_integer():\n        continue\n        \n    for num_2 in adjusted_train['V202'].unique():\n        if num_2.is_integer():\n            continue\n        if num_1 == num_2:\n            continue\n        if num_2%num_1 == 0:\n            tmp_list.append(num_2)\n            num_dict[num_1] = tmp_list\n    if num_1 in num_dict:\n        pass\n    else:\n        unique_list.append(num_1)","9a76deb2":"print(len(num_dict))\nprint(len(unique_list))","87a60c25":"for idx, (k, v) in enumerate(num_dict.items()):\n    if idx >= 10:\n        break\n    print(k, v)","1b5c56ec":"df_list = []\nfor idx, (k, v) in enumerate(num_dict.items()):\n    if idx >= 10:\n        break\n    tmp_all = pd.DataFrame(columns=adjusted_train.columns)\n    for idx_2, v_val in enumerate(v):\n        if idx_2 == 0:\n            tmp = adjusted_train[adjusted_train['V202']==k]\n            tmp_all = pd.concat([tmp_all, tmp], sort=False)            \n            tmp = adjusted_train[adjusted_train['V202']==v_val]\n            tmp_all = pd.concat([tmp_all, tmp], sort=False)\n        else:\n            tmp = adjusted_train[adjusted_train['V202']==v_val]\n            tmp_all = pd.concat([tmp_all, tmp], sort=False)\n    tmp_all = tmp_all.sort_values(by='TransactionDT')\n    df_list.append(tmp_all)","3697ba16":"print(df_list[0]['V202'].values)\ndf_list[0]","0d45106d":"df_list[0][['TransactionID', 'isFraud', 'TransactionDT', 'TransactionAmt', 'V202', 'id_31', 'id_32', 'id_33', 'id_34', 'id_35', 'id_36', 'id_37', 'id_38', 'DeviceType', 'DeviceInfo']]","6f6a883f":"print(df_list[1]['V202'].values)\ndf_list[1]\n# The relationship of TransactionAmt can also be seen from this data set.","081dd912":"df_list[1][['TransactionID', 'isFraud', 'TransactionDT', 'TransactionAmt', 'V202', 'id_31', 'id_32', 'id_33', 'id_34', 'id_35', 'id_36', 'id_37', 'id_38', 'DeviceType', 'DeviceInfo']]","e2775360":"adjusted_train[adjusted_train.index.isin([388104, 388121, 418229])][['TransactionID', 'isFraud', 'TransactionDT', 'TransactionAmt', 'V202','V211', 'V273', 'V306', 'id_31', 'id_32', 'id_33', 'id_34', 'id_35', 'id_36', 'id_37', 'id_38', 'DeviceType', 'DeviceInfo']]","89585b79":"print(143.255798 - 69.301697)\nprint((143.255798 - 69.301697)*8)","28dcdc13":"# Other type\nIt seems that there is also diagonal data. Is it a number assigned by the operation of the system??  \nOr it looks like the user's account steal by fraud user.  ","999ad37e":"Some anonymization features seem to be a constant multiple of a certain number. Extract them about V202.  \nThese trends can be seen in some V features such as ['V202', 'V203', 'V204'] and ['V211', 'V212', 'V213'].  ","34737d24":"# Extract number","0ad04a3d":"# Check Dataset","cc3fa9e1":"# Next Step\n* Are these the same user?  \n* Some V features may be mechanically calculated??\n* TransactionAmt also seems to be continuous. What does this mean?\n* Some features also have a diagonally offset relationship.\n* Find patterns more efficiently.\n\nI think that they represent the same user or contain artificial data. Also, I think that the anonymization feature has already been calculated between features.  \nI look forward to your advice.  ","e1e27170":"# Overview\nThe relationship between several sample and feature can be seen constant multiplication.  \nIn this kernel we will look at some of those data.  "}}