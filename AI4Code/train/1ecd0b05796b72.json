{"cell_type":{"d89592bf":"code","3230acb4":"code","93e80607":"code","d85a6747":"code","8d8673f9":"code","564f3abf":"code","8b5e9d9b":"code","41b6b8c9":"code","0b27568b":"code","ae247db4":"code","8649dd3b":"code","a349fcd0":"code","98d481cc":"markdown","5d314326":"markdown","8ef2c1a3":"markdown","c57a7e16":"markdown","fe9b07e7":"markdown","0752e9f3":"markdown","12032256":"markdown","f0d1b60c":"markdown"},"source":{"d89592bf":"# data manipulation\nimport numpy as np\nimport pandas as pd\n\n# plotting libraries\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objs as go\n\n# color palette\ncnf = '#475586' # confirmed\ndth = '#c54b46' # death \nrec = '#edba62' # recovered\nact = '#22728f' # active case \nosp = '#ff9135' # hospitalized\ntint = '#ee4242' # intensive care  \n","3230acb4":"data=pd.read_csv(\"..\/input\/covid-19-italy-updated-regularly\/national_data.csv\")\n\ndata[\"date\"] = pd.to_datetime(data[\"date\"], errors='coerce').dt.date","93e80607":"temp = data.copy()\ntemp = temp.groupby('date')['total_positive_cases', 'death', 'recovered', 'total_currently_positive'].sum().reset_index()\ntemp = temp[temp['date']==max(temp['date'])].reset_index(drop=True)\ntemp","d85a6747":"temp = data.copy()\ntemp = temp.groupby('date')['total_positive_cases', 'death', 'recovered', 'total_currently_positive'].sum().reset_index()\n\nfig = go.Figure(data=[\n    go.Bar(name='Actual cases', x=temp[\"date\"], y=temp[\"total_currently_positive\"], marker=go.bar.Marker(\n    color=act)),\n    go.Bar(name='Recovered', x=temp[\"date\"], y=temp[\"recovered\"],marker=go.bar.Marker(\n    color=rec)),\n    go.Bar(name='Deceased', x=temp[\"date\"], y=temp[\"death\"],marker=go.bar.Marker(\n    color=dth))\n])\n# Change the bar mode\nfig.update_layout(\n    width = 700,\n    height=500,\n    barmode='stack', \n    title='Total cases',\n    font=dict(size=14, color='#686868'),\n    xaxis_tickangle=-45,\n    yaxis=dict(\n        title='Count'\n        ))\n\nfig.show()","8d8673f9":"temp = data.groupby('date')['hospitalized_with_symptoms', 'intensive_care'].sum().reset_index()\n\n\nfig = go.Figure(data=[\n    go.Bar(name='Hospitalized', x=temp[\"date\"], y=temp[\"hospitalized_with_symptoms\"],marker=go.bar.Marker(\n    color=osp)),\n    go.Bar(name='Intensive Care', x=temp[\"date\"], y=temp[\"intensive_care\"],marker=go.bar.Marker(\n    color=tint))\n])\n# Change the bar mode\nfig.update_layout(\n    width = 700,\n    height = 500,\n    barmode='stack', \n    title='Total Hospitalized',\n    font=dict(size=14, color='#686868'),\n    xaxis_tickangle=-45,\n    yaxis=dict(\n        title='Count'\n        ))\n\nfig.show()","564f3abf":"temp = data.groupby('date')['new_currently_positive', 'total_tests'].sum().reset_index()\n\nfig = go.Figure()\n\nfig.add_trace(go.Scatter(\n    x=temp['total_tests'], y=temp['new_currently_positive'],\n    mode='lines+markers',\n    xaxis='x1'\n))\n\n\nfig.add_trace(go.Scatter(\n    x=temp['date'], y=temp['new_currently_positive'],\n    mode='lines+markers',\n    xaxis='x2',\n    marker=dict(\n        color='#ea4335'\n    )\n))\n\nfig.update_layout(\n    width=600,\n    height=500,\n    font=dict(size=14, color='#686868'),\n    xaxis=dict(\n        title='Tests performed'\n    ),\n    xaxis2=dict(\n        side='top',\n        showgrid=False\n    ),\n    xaxis2_tickangle=-45,\n    yaxis=dict(\n        title='New actual cases'\n    ),\n    showlegend=False,\n    annotations=[\n        dict(\n            x=76000,\n            y=450,\n            xref=\"x\",\n            yref=\"y\",\n            text=\"Incorrect tests\",\n            showarrow=True,\n            arrowhead=2,\n            arrowcolor=\"#636363\",\n            ax=-20,\n            ay=40\n        )\n    ]\n)\n\nfig.show()","8b5e9d9b":"dth_ita = data.groupby('date')['death'].sum().reset_index()\n\nfig = go.Figure(go.Scatter(\n    x=dth_ita['date'], y=dth_ita['death'],\n    mode='lines+markers',\n    marker=dict(\n        color='#4285f4'\n    )\n))\n\nfig.update_layout(\n    width=600,\n    height=500,\n    font=dict(size=14, color='#686868'),\n    xaxis_tickangle=-45,\n    yaxis=dict(\n        title='Deceased'\n        ),\n    yaxis_type='log'\n)\nfig.show()","41b6b8c9":"data= pd.read_csv('..\/input\/covid-19-italy-updated-regularly\/regional_data.csv')\n\ndata[\"date\"] = pd.to_datetime(data['date'], errors='coerce').dt.date\ndata_latest = data[data['date']==data['date'].max()]","0b27568b":"fig = px.bar(data_latest.sort_values('total_positive_cases', ascending=False).head(20).sort_values('total_positive_cases', ascending=True), \n             x=\"total_positive_cases\", y=\"region_denomination\", title='Cases per region', text='total_positive_cases', orientation='h', \n             width=600, height=600, range_x = [0, 4.7])\nfig.update_traces(marker_color=cnf, opacity=0.6, textposition='outside')\nfig.update_layout(\n    template = 'plotly_white',\n    xaxis_title=\"Total Cases\",\n    xaxis_type='log',\n    yaxis_title=\"Region\",\n    font=dict(size=14, color='#686868')\n)\nfig.show()","ae247db4":"data_world = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')\ndata_world = data_world.drop(columns=['ObservationDate'])\ndata_world['Date'] = pd.to_datetime(data_world['Last Update']).dt.date\ndata_world['Actual cases']=data_world['Confirmed']-data_world['Deaths']-data_world['Recovered']\n\ndata_hubei=data_world[data_world['Province\/State']=='Hubei']","8649dd3b":"temp = data_hubei.groupby('Date')['Confirmed', 'Recovered', 'Deaths', 'Actual cases'].sum().reset_index()\n# temp = temp.melt(id_vars=\"Data\", value_vars=['Guariti', 'Deceduti', 'Attualmente Positivi'],\n#                  var_name='Caso', value_name='Count')\n\nfig = go.Figure(data=[\n    go.Bar(name='Actual cases', x=temp['Date'], y=temp[\"Actual cases\"], marker=go.bar.Marker(\n    color=act)),\n    go.Bar(name='Recovered', x=temp['Date'], y=temp[\"Recovered\"], marker=go.bar.Marker(\n    color=rec)),\n    go.Bar(name='Deceased', x=temp['Date'], y=temp[\"Deaths\"], marker=go.bar.Marker(\n    color=dth))\n])\n# Change the bar mode\nfig.update_layout(\n    width=700,\n    height=500,\n    barmode='stack', \n    title='Total cases',\n    font=dict(size=14, color='#686868'),\n    xaxis_tickangle=-45,\n    xaxis=dict(\n        nticks=10\n        ),\n    yaxis=dict(\n        title='Count'\n        ))\n\nfig.show()","a349fcd0":"from plotly.subplots import make_subplots\ntemp = data_hubei.groupby('Date')['Deaths'].sum().reset_index()\n\nfig = make_subplots(rows=1, cols=2)\n\nfig.add_trace(go.Scatter(\n    x=temp['Date'], y=temp['Deaths'], \n    name = 'Hubei deaths',\n    mode='lines+markers',\n    marker=dict(\n        color='#4285f4'\n    )\n),row=1, col=1)\n\nfig.add_trace(go.Scatter(\n    x=temp['Date'], y=dth_ita['death'],\n    name = 'Italy deaths (translated date)',\n    mode='lines+markers',\n        marker=dict(\n        color='#ea4335'\n    )\n), row=1, col=1)\n\nfig.add_trace(go.Scatter(\n    x=temp['Date'], y=temp['Deaths'], \n    mode='lines+markers',\n    showlegend=False,\n    marker=dict(\n        color='#4285f4'\n    )\n),row=1, col=2)\n\nfig.add_trace(go.Scatter(\n    x=temp['Date'], y=dth_ita['death'],\n    mode='lines+markers',\n    showlegend=False,\n    marker=dict(\n        color='#ea4335'\n    )\n), row=1, col=2)\n\nfig.update_layout(\n    width=800,\n    height=500,\n    font=dict(size=14, color='#686868'),\n    yaxis=dict(\n        title='Deceased',\n        range=[0.5, 4]\n        ),\n    yaxis_type='log',\n    legend=dict(x=0.2, y=1.15),\n    legend_orientation = 'h'\n)\n\nfig.update_xaxes(tickangle=-45)\n\nfig.show()","98d481cc":"## Total cases breakdown","5d314326":"## Cases per region","8ef2c1a3":"**Hospitalized situation **\n\n> Tracking the numbers of hospitalized people and in particular of insive care patients is pf particular importance for Italy at the moment, due to the (relative) low number of intensive care beds nationwide.","c57a7e16":"### National trends \n> Load data file, rename and polish columns","fe9b07e7":"# COVID-19 in Italy\n* Data analysis and visualization for COVID-19 cases in Italy.\n* Data available at https:\/\/github.com\/pcm-dpc\/COVID-19 (updates every day at 17.00 - 18.00)","0752e9f3":"## Italy - China (Hubei province) comparison\n\nHubei province, where the virus initially started to spread, has approximately the same population of Italy (~60 million). A comparison between recovered, dead and total cases can be useful to assess the impact of the measures employed to limit the outbreak.","12032256":"**Daily actual cases increment**\n\n> Please note that 'New actual cases' = new positive tests - deaths that day - recovered that day","f0d1b60c":"**Mortality **"}}