{"cell_type":{"e6010c8d":"code","1b516b6a":"code","4fc6d2bf":"code","a0da4ef1":"code","fc30deaf":"code","5086a249":"code","41d047b3":"code","46b487c5":"code","0f99c82c":"code","9f4ea982":"code","1b28f027":"code","f0b99708":"code","82892cbe":"code","73e3f174":"code","d9fec377":"code","ae53c64d":"code","e28ee61b":"code","ad65593f":"code","5acf8d69":"code","489b2725":"code","88d8fbb3":"code","f98903fb":"code","40176dbd":"code","d90df51a":"code","bfaaba35":"code","5fb03ef7":"code","40c3e16e":"code","59ccb8f8":"code","ed0962c7":"code","100b20e5":"code","4c1615ea":"code","76dda06e":"code","3277f57b":"code","72d267ce":"code","119dda78":"code","aa880376":"code","223f246a":"code","4ff8325a":"code","4ac666a7":"code","045b916a":"code","a79a7005":"code","f58be84e":"code","510d6c3b":"code","9de5fdfe":"markdown","0d959c11":"markdown","eb18b957":"markdown","12215ad6":"markdown","fb9d9a0d":"markdown","c1e8855e":"markdown","c9d7e919":"markdown","36bf7f4d":"markdown","8156af63":"markdown","fd37a9e7":"markdown","cfa43cb1":"markdown","36794b9c":"markdown","3244e5c4":"markdown","df06c394":"markdown","0b70067b":"markdown","1c4b4cff":"markdown","4b5db400":"markdown","4a04cd9b":"markdown","71883bdc":"markdown","268b4648":"markdown","095ac695":"markdown","faa73636":"markdown","20da3f79":"markdown","83e12bf7":"markdown","c8aac9c4":"markdown","fd4856d9":"markdown"},"source":{"e6010c8d":"# import necessary libraries\nimport nltk\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nfrom sklearn import metrics\nfrom sklearn import preprocessing\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import train_test_split\nfrom nltk.sentiment.vader import SentimentIntensityAnalyzer","1b516b6a":"# set the color palette\nsns.set_palette(sns.color_palette('deep'))\nsns.set(rc = {'figure.figsize': (9, 5)})\nsns.set_style('whitegrid')","4fc6d2bf":"import warnings\nwarnings.filterwarnings('ignore')","a0da4ef1":"# read the csv file\ndf = pd.read_csv('..\/input\/amazon-top-50-bestselling-books-2009-2019\/bestsellers with categories.csv')","fc30deaf":"# show first few records\ndf.head()","5086a249":"# get the number of records and columns\ndf.shape","41d047b3":"# get concise summary of the dataframe\ndf.info()","46b487c5":"# check missing values\ndf.isnull().sum()","0f99c82c":"# check duplicate values\ndf.duplicated().sum()","9f4ea982":"df.describe()","1b28f027":"# range of prices\nnp.sort(df['Price'].unique())","f0b99708":"df[df['Price'] == 0]","82892cbe":"# ratings distribution\nsns.kdeplot(df['User Rating'], shade = True)\nplt.title('Rating Distribution')\nplt.xlabel('Rating')\nplt.ylabel('Frequency');","73e3f174":"# genre distribution\nplt.pie(df['Genre'].value_counts(), autopct = '%1.2f%%', labels = df['Genre'].value_counts().index)\nplt.title('Genre Distribution');","d9fec377":"# price distribution\nplt.title('Price Distribution')\nsns.histplot(x = 'Price', hue = 'Genre', data = df);","ae53c64d":"# reviews distribution\nplt.title('Reviews Distribution')\nsns.histplot(x = 'Reviews', hue = 'Genre', data = df);","e28ee61b":"# authors with most books\nmost_books = df['Author'].value_counts().head(10)\nmost_books","ad65593f":"# visualise authors with most books\nmost_books.plot(kind = 'pie', autopct = '%1.1f%%', figsize = (7, 7));","5acf8d69":"# number of books per rating?\nsns.barplot(df['User Rating'].value_counts().index, df['User Rating'].value_counts())\nplt.title('Number of Books Each Rating Received')\nplt.xlabel('Ratings')\nplt.ylabel('Counts')\nplt.xticks(rotation = 45);","489b2725":"# year with highest rating\ndf.groupby('Year')['User Rating'].sum().plot(marker = 'o', c = 'g')\nplt.title('Year vs Average Rating')\nplt.xlabel('Year')\nplt.ylabel('No. of Ratings');","88d8fbb3":"# year with highest reviews\ndf.groupby('Year')['Reviews'].sum().plot(marker = 'o', c = 'g')\nplt.title('Year Vs Average Reviews')\nplt.xlabel('Year')\nplt.ylabel('No. of Reviews');","f98903fb":"# price variation over the time\ndf.groupby('Year')['Price'].sum().plot(marker = 'o', c = 'g')\nplt.title('Variation of Price Over the Years')\nplt.xlabel('Year')\nplt.ylabel('Price');","40176dbd":"# top reviewed books\ntop_reviews = df.nlargest(20, ['Reviews'])\nsns.barplot(top_reviews['Reviews'], top_reviews['Name']);","d90df51a":"# lowest reviewed books\nlowest_reviews = df.nsmallest(10, ['Reviews'])\nsns.barplot(lowest_reviews['Reviews'], lowest_reviews['Name']);","bfaaba35":"# worst rated books\nworst = df.sort_values('User Rating').head(10)\nworst","5fb03ef7":"# visualise worst rated books\nplt.title('Worst Rated Books')\nsns.barplot(y = worst['Name'], x = worst['User Rating']);","40c3e16e":"# top expensive books\nplt.title('Expensive books in Amazon bestseller list')\ntop_expensive = df.drop(df[df['Price'] < 1].index).sort_values('Price', ascending = False).head(10)\nsns.barplot(y = top_expensive['Name'], x = top_expensive['Price']);","59ccb8f8":"# cheapest books\nplt.title('Cheapest books in Amazon bestseller list')\ncheapest = df[-df['Price'].isin([0])].sort_values('Price').head(10)\nsns.barplot(y = cheapest['Name'], x = cheapest['Price']);","ed0962c7":"# top free books\ndf.drop(df[df['Price'] > 0].index).sort_values('User Rating', ascending = False).head(10)","100b20e5":"# most popular authors\nauthors = df.groupby('Author').agg({'User Rating':'mean', 'Reviews':'sum', 'Name': 'count'}).rename({'Name': 'Total Books'}, axis = 1)\nauthors.sort_values(['User Rating', 'Reviews'], ascending = (False, False)).head(10)","4c1615ea":"# encode genre and author columns\nle = preprocessing.LabelEncoder()\ndf['Genre'] = le.fit_transform(df['Genre'])\ndf['Author'] = le.fit_transform(df['Author'])","76dda06e":"# sentiment analyse for name column\ndf['Name'] = df['Name'].apply(lambda x: x.lower())\ndf['Name'] = df['Name'].str.replace('[^\\w\\s]','')","3277f57b":"# calculate negative, positive, neutral and compound values\nscore = SentimentIntensityAnalyzer()\ndf['Sentiment'] = df['Name'].apply(lambda x : score.polarity_scores(x))\ndf['Neutral'] = df['Sentiment'].apply(lambda x : x['neu'])\ndf['Positive'] = df['Sentiment'].apply(lambda x : x['pos'])\ndf['Negative'] = df['Sentiment'].apply(lambda x : x['neg'])\ndf['Compound'] = df['Sentiment'].apply(lambda x : x['compound'])\n# df = df.drop(columns = ['Sentiment'])\ndf = df.drop(columns = ['Sentiment', 'Name'])","72d267ce":"# split the dataset into features and target\nX = df.drop('User Rating', 1)\ny = df['User Rating']","119dda78":"# split features and target into train and test sets\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.33, random_state = 42)","aa880376":"# standardise data values into a standard format\nscale = StandardScaler()\nX_train = scale.fit_transform(X_train)\nX_test = scale.transform(X_test)","223f246a":"# instantiate model with 1000 decision trees\nmodel = RandomForestRegressor(n_estimators = 1000, random_state = 42)","4ff8325a":"# train the model on training data\nmodel.fit(X_train, y_train)","4ac666a7":"# use the forest's predict method on the testset\ny_pred = model.predict(X_test)","045b916a":"# show actual values vs predicted values\npredictions = pd.DataFrame({'Actual' : y_test, 'Predicted' : y_pred})\npredictions.head()","a79a7005":"print('Mean Absolute Error (MAE):', metrics.mean_absolute_error(y_test, y_pred))\nprint('Mean Squared Error (MSE):', metrics.mean_squared_error(y_test, y_pred))\nprint('Root Mean Squared Error (RMSE):', np.sqrt(metrics.mean_squared_error(y_test, y_pred)))","f58be84e":"# calculate mean absolute percentage error (MAPE)\nmape = np.mean(np.abs((y_test - y_pred) \/ np.abs(y_test)))\nprint('Mean Absolute Percentage Error (MAPE):', round(mape * 100, 2))","510d6c3b":"# calculate accuracy\nprint('Accuracy:', round(100*(1 - mape), 2), '%')","9de5fdfe":"## Which Category Has a Wider Range and Distribution?","0d959c11":"# Questions to Be Answered with the Dataset\n\n1. What Is the Rating Distribution for the Books?\n1. Which Category Has a Wider Range and Distribution?\n1. What Is Price Distribution? \n1. What Is Reviews Distribution?\n1. Who Has Written the Most Books?\n1. What Is the Number of Books Per Rating?\n1. Which Year Has the Highest User Rating?\n1. Which Year Has the Highest Reviews?\n1. What is the Price Variation Through Time?\n1. What Are the Highest Reviewed Books?\n1. What Are the Lowest Reviewed Books?\n1. What Are the Worst Rated Books?\n1. What Are the Most Expensive Books?\n1. What Are the Cheapest Books?\n1. What Are the Best 10 Free Books?\n1. Who Are the Most Popular Authors?","eb18b957":"## What Is the Number of Books Per Rating?","12215ad6":"# Modelling","fb9d9a0d":"## What Are the Lowest Reviewed Books?","c1e8855e":"## What is the Price Variation Through Time?","c9d7e919":"# Data Visulaistion","36bf7f4d":"## Who Are the Most Popular Authors?","8156af63":"# Data Exploration","fd37a9e7":"Well, zero price would mean that amazon distributed those books for free, lets show these books labeled with zero price.","cfa43cb1":"# Data Preprocessing","36794b9c":"## Which Year Has the Highest User Rating?","3244e5c4":"## What Is Price Distribution? ","df06c394":"## Who Has Written the Most Books?","0b70067b":"## What Are the Most Expensive Books?","1c4b4cff":"## What Are the Best 10 Free Books?","4b5db400":"## What Is Reviews Distribution?","4a04cd9b":"This notebook is about the Amazon Top 50 Bestselling Books 2009 \u2013 2019. The Dataset contains 550 books. Data has been categorized into fiction and non-fiction using Goodreads. The analysis of this Dataset will allow us have a deep understanding of the book market trends over the past decade.\n\n\nThe dataset includes seven categories, such as Name of the Book, Author of the Book, User Rating, Number of Reviews, the Price of the Book. The Year(s) it ranked on the bestseller and whether Fiction or Non-Fiction.","71883bdc":"## What Is the Rating Distribution for the Books?","268b4648":"## What Are the Cheapest Books?","095ac695":"__Content:__\n1. Data Exploration\n1. Data Visulaistion\n1. Data Preprocessing\n1. Building Random Forest Model\n\n__Features:__ <br>\n1. __Name:__ Name of the Book <br>\n1. __Author:__ The Author of the Book <br>\n1. __User Rating:__ Amazon User Rating <br>\n1. __Reviews:__ Number of Reviews on Amazon <br>\n1. __Price:__ The Price of the Book <br>\n1. __Year:__ The Year(s) It Ranked on the Bestseller <br>\n1. __Genre:__ Whether Fiction or Non-fiction <br>","faa73636":"# Into the Woods \ud83d\ude04","20da3f79":"## What Are the Highest Reviewed Books?","83e12bf7":"## Which Year Has the Highest Reviews?","c8aac9c4":"We know the dataset is not yet a scaled value, we gonna do it after splitting to prevent data leakage as the mean and standard deviation used to normalise the data will be based on the full dataset and not the training subset \u2014 therefore leaking information about the testset into the training set.","fd4856d9":"## What Are the Worst Rated Books?"}}