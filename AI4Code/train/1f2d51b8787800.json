{"cell_type":{"878c4f0d":"code","0dabb7f8":"code","632f2ca8":"code","f114fae8":"code","79859b27":"code","967987fd":"code","4dab335d":"code","7b39fd55":"code","d00ac639":"code","6f20acdf":"code","bad4f4d1":"code","78269778":"code","d2af26ed":"code","4dd72f77":"code","883172f1":"code","1a6fcb6e":"code","132b7ce6":"code","3a20a1c5":"code","ba95dee6":"code","b86b6fc0":"code","8385c092":"code","19499b4c":"code","e6abccdf":"code","02d876be":"code","a47ac01c":"code","1d2e59b9":"code","a78e8581":"code","6521ce36":"code","522dc789":"code","bbb67367":"code","56ad0543":"markdown","6fdc6f35":"markdown","c52c6caa":"markdown","7cb04333":"markdown","dbf272c5":"markdown","14429f51":"markdown","ecb5e4f6":"markdown"},"source":{"878c4f0d":"# data analysis\nimport numpy as np \nimport pandas as pd\nimport geopandas as gpd\n\n# visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport folium","0dabb7f8":"# import data\ndf = pd.read_csv('..\/input\/crimeanalysis\/crime_by_state.csv')\ndf.sample(5)","632f2ca8":"# last rows\ndf.tail()","f114fae8":"# shape\ndf.shape","79859b27":"# columns \ndf.columns","967987fd":"# df.dtypes","4dab335d":"# df.info()","7b39fd55":"# df.describe(include='all')","d00ac639":"# missing values\ndf.isna().sum()","6f20acdf":"# unique values\ndf.nunique()","bad4f4d1":"# df['STATE\/UT'].value_counts()\ndf['STATE\/UT'].unique()","78269778":"# df['Year'].value_counts()\ndf['Year'].unique()","d2af26ed":"df['STATE\/UT'] = df['STATE\/UT'].str.title()","4dd72f77":"# numerical cols\ncols = ['Murder', 'Assault on women', 'Kidnapping and Abduction', 'Dacoity', \n        'Robbery', 'Arson', 'Hurt', 'Prevention of atrocities (POA) Act', \n        'Protection of Civil Rights (PCR) Act', 'Other Crimes Against SCs']\n\n# total column\ndf['Total'] = df[cols].sum(axis=1)","883172f1":"# drop columns with aggregate values\npattern = \"Total*\"\nfltr = df['STATE\/UT'].str.contains(pattern)\ndf = df[~fltr]\n# df.tail()","1a6fcb6e":"# df['STATE\/UT'].value_counts()\ndf['STATE\/UT'].unique()","132b7ce6":"plt.figure(figsize=(10, 10))\ndf_pivot = df[['STATE\/UT', 'Year', 'Total']].pivot_table(values='Total', index='STATE\/UT', columns='Year', aggfunc='sum')\nsns.heatmap(df_pivot, annot=True, fmt='.0f', cmap='RdPu')\nplt.suptitle('Total cases over the years in each States')\nplt.xlabel('')\nplt.ylabel('')\nplt.show()","3a20a1c5":"plt.figure(figsize=(40, 15))\ndf_pivot = df.groupby('STATE\/UT')[cols].sum()\nsns.heatmap(df_pivot, annot=True, fmt='.0f', cmap='GnBu')\nplt.suptitle('Number of each cases in each states')\nplt.xlabel('')\nplt.ylabel('')\nplt.show()","ba95dee6":"# plt.figure(figsize=(8, 10))\n# df_pivot = df[['STATE\/UT', 'Year', 'Murder']].pivot_table(values='Murder', index='STATE\/UT', columns='Year', aggfunc='sum')\n# sns.heatmap(df_pivot, annot=True, fmt='.0f', cmap='Greens')\n# plt.suptitle('Murder')\n# plt.xlabel('')\n# plt.ylabel('')\n# plt.show()","b86b6fc0":"for i in cols:\n    plt.figure(figsize=(8, 10))\n    df_pivot = df[['STATE\/UT', 'Year', i]].pivot_table(values=i, index='STATE\/UT', columns='Year', aggfunc='sum')\n    sns.heatmap(df_pivot, annot=True, fmt='.0f', cmap='Greens')\n    plt.suptitle(i)\n    plt.xlabel('')\n    plt.ylabel('')\n    plt.show()","8385c092":"# plt.figure(figsize=(8, 20))\n# sns.barplot(y='STATE\/UT', x='Murder', data=df)\n# plt.show()","19499b4c":"# state_murder = pd.DataFrame(df.groupby(['STATE\/UT','Year'])['Murder'].sum())\n# state_murder = state_murder.sort_values('Murder', ascending=False)\n# state_murder.reset_index(inplace=True)\n# state_murder.head()","e6abccdf":"# plt.figure(figsize=(30, 12))\n# sns.lineplot(x=\"Year\", y=\"Murder\", hue=\"STATE\/UT\", data=state_murder)\n# plt.show()","02d876be":"# import district level shape files\ndist_gdf = gpd.read_file('..\/input\/india-district-wise-shape-files\/output.shp')\n\n# group by state\nstates_gdf = dist_gdf.dissolve(by='statename').reset_index() \n\n# just select statename and geometry column\nstates_gdf = states_gdf[['statename', 'geometry']]","a47ac01c":"# replace state's name\nstates_gdf['statename'] = states_gdf['statename'].replace('Ladakh', 'Jammu & Kashmir')\nstates_gdf['statename'] = states_gdf['statename'].replace('Telangana', 'Andhra Pradesh')\nstates_gdf['statename'] = states_gdf['statename'].replace('Andaman & Nicobar Islands', 'A & N Islands')\nstates_gdf['statename'] = states_gdf['statename'].replace('Chhatisgarh', 'Chhattisgarh')\nstates_gdf['statename'] = states_gdf['statename'].replace('Dadra & Nagar Haveli', 'D & N Haveli')\nstates_gdf['statename'] = states_gdf['statename'].replace('Orissa', 'Odisha')\nstates_gdf['statename'] = states_gdf['statename'].replace('Pondicherry', 'Puducherry')\nstates_gdf['statename'] = states_gdf['statename'].replace('NCT of Delhi', 'Delhi')\n\n# group 10 years of data\nstates_df = df.groupby('STATE\/UT')[cols].sum().reset_index()\nstates_df.head()","1d2e59b9":"# merge shape file with count file\nstates_full = pd.merge(states_gdf, states_df, left_on='statename', right_on='STATE\/UT', how='left')\nstates_full.head()","a78e8581":"fig, axes = plt.subplots(3, 4, figsize=(20, 15))\nfig.suptitle('No. of Hate crimes from 2001-2012', fontsize=16)\ncmap = 'bwr'\n\nstates_full.plot(column='Murder', ax=axes[0,0], cmap=cmap)   \naxes[0,0].set_title('Murder')\naxes[0,0].set_axis_off()                                       \n\nstates_full.plot(column='Assault on women', ax=axes[0,1], cmap=cmap)   \naxes[0,1].set_title('Assault on women')\naxes[0,1].set_axis_off()          \n\nstates_full.plot(column='Kidnapping and Abduction', ax=axes[0,2], cmap=cmap)   \naxes[0,2].set_title('Kidnapping and Abduction')\naxes[0,2].set_axis_off()          \n\nstates_full.plot(column='Dacoity', ax=axes[0, 3], cmap=cmap)   \naxes[0, 3].set_title('Dacoity')\naxes[0, 3].set_axis_off()          \n\nstates_full.plot(column='Robbery', ax=axes[1,0], cmap=cmap)   \naxes[1,0].set_title('Robbery')\naxes[1,0].set_axis_off()          \n\nstates_full.plot(column='Arson', ax=axes[1,1], cmap=cmap)   \naxes[1,1].set_title('Arson')\naxes[1,1].set_axis_off()    \n\nstates_full.plot(column='Hurt', ax=axes[1,2], cmap=cmap)   \naxes[1,2].set_title('Hurt')\naxes[1,2].set_axis_off()          \n\nstates_full.plot(column='Prevention of atrocities (POA) Act', ax=axes[1,3], cmap=cmap)   \naxes[1,3].set_title('Prevention of atrocities (POA) Act')\naxes[1,3].set_axis_off()          \n\nstates_full.plot(column='Protection of Civil Rights (PCR) Act', ax=axes[2,0], cmap=cmap)   \naxes[2,0].set_title('Protection of Civil Rights (PCR) Act')\naxes[2,0].set_axis_off()  \n\nstates_full.plot(column='Other Crimes Against SCs', ax=axes[2,1], cmap=cmap)   \naxes[2,1].set_title('Other Crimes Against SCs')\naxes[2,1].set_axis_off()  \n\naxes[2,2].set_axis_off()  \n\naxes[2,3].set_axis_off()  \n\nplt.show()","6521ce36":"# states_df.head(40)","522dc789":"# ind_dist_map.head(50)","bbb67367":"# m = folium.Map(location=[23, 78.9629], tiles='cartodbpositron',\n#                min_zoom=4, max_zoom=6, zoom_start=4)\n\n# folium.Choropleth(states_full, data=states_full, \n#                   key_on='feature.properties.statename',\n#                   columns=['statename', 'Murder'], \n#                   fill_color='YlGnBu',\n#                   line_weight=0.1,\n#                   line_opacity=0.5,\n#                   legend_name='No. of reported cases').add_to(m)\n\n# folium.LayerControl().add_to(m)\n\n# m","56ad0543":"# Library","6fdc6f35":"# EDA","c52c6caa":"# Data Cleaning","7cb04333":"# Data","dbf272c5":"# Missing and Unique values","14429f51":"# Map","ecb5e4f6":"# Data Properties"}}