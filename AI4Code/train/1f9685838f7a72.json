{"cell_type":{"cd4850ac":"code","5f5dabfe":"code","9bc62e57":"code","71e4f300":"code","8f29be02":"code","cf13b67f":"code","e44a762a":"code","20f029ff":"code","82769361":"markdown","fe29ddc6":"markdown","554f7547":"markdown","7f5ae123":"markdown"},"source":{"cd4850ac":"import pandas as pd\nfrom IPython.display import Markdown","5f5dabfe":"train_df = pd.read_csv(\"..\/input\/chaii-hindi-and-tamil-question-answering\/train.csv\")","9bc62e57":"from google.cloud import translate_v2 as translate","71e4f300":"def translate_text(target, text, translate_client):\n    try:\n        result = translate_client.translate(text, target_language=target)\n        translatedText = result[\"translatedText\"]\n        return translatedText\n    except Exception as e:\n        return ''","8f29be02":"credentials_path = \"..\/input\/my-google-credentials\/sa_credentials.json\"\ntranslate_client = translate.Client.from_service_account_json(credentials_path)\n\nfor text_column in [\"context\", \"question\", \"answer_text\"]:\n    train_df[f\"{text_column}_gtrans\"] = train_df[text_column].apply(lambda x: translate_text(\"en\", x, translate_client))","cf13b67f":"train_df.head()","e44a762a":"sample_train_df = train_df.sample(4, random_state=1) # two of hindi and two of tamil\n\nnew_line = \"\\n\"\nmarkdown = f\"# GOOGLE TRANSLATION  {new_line}  \"\n\nfor idx, example in sample_train_df.iterrows():\n    markdown += f\"{example['context_gtrans']}  {new_line}{new_line}  \"\n    markdown += f\"**Question**: {example['question_gtrans']},  \"  \n    markdown += f\"**Answer**: {example['answer_text_gtrans']},  \"  \n    markdown += f\"**Language**: {example['language']}.  {new_line}{new_line}  \"\n        \nMarkdown(markdown)","20f029ff":"train_df.to_csv(\"train_with_google_translations.csv\")","82769361":"### Simple notebook that translates the texts, questions and answers to English\n\nNote:\n- Uses Google Translate, which can get quite expensive\n- my GCS credentials json file are in a private dataset here","fe29ddc6":"# Looking at results","554f7547":"## Google Translate","7f5ae123":"# Adding Google API translations"}}