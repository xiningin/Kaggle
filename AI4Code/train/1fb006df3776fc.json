{"cell_type":{"cd5e2f0a":"code","3b48859a":"code","33e1a101":"code","3281e5e5":"code","c3b1cd66":"code","c8ea0c80":"code","17f7f8a0":"code","7972020f":"code","447e297f":"code","ebae8ea0":"code","d2a520c4":"code","2eb4e61f":"code","df8f1918":"code","223cb24a":"code","f2fd7076":"code","b5732898":"code","95f60673":"code","51dc0030":"code","fe0bbc77":"code","541d8a9d":"code","3e117b23":"code","bcc55926":"code","83176fa1":"code","8e7980ae":"code","afaa2fd8":"code","aaa12d16":"code","08d9d496":"markdown","ea9334ef":"markdown","b5d26a56":"markdown","251c75f7":"markdown","1eecb27c":"markdown","6e9f6356":"markdown","5f08444d":"markdown","e2a9700b":"markdown","e2e4a5c9":"markdown","67ced6d8":"markdown","30af36ff":"markdown","811c82b2":"markdown","60dfa9df":"markdown","307fe1e6":"markdown","0183f159":"markdown","f1d679cc":"markdown","66db50f8":"markdown","e51b02e0":"markdown","6b8186fc":"markdown","a80f87a4":"markdown","6b31c59c":"markdown","5dddaefb":"markdown","aeff8fe7":"markdown","57463677":"markdown","4c7e17c6":"markdown","67faf383":"markdown","6a7cc33d":"markdown","020b24e3":"markdown"},"source":{"cd5e2f0a":"#!pip install pywaffle\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom pywaffle import Waffle \nimport re\nplt.style.use('fivethirtyeight')","3b48859a":"whs = pd.read_csv('..\/input\/white-house-staff-salaries-20172020\/wh_staff_dataset.csv')\ncpi = pd.read_csv('..\/input\/inflation-data\/cpi_dataset.csv', index_col='year', usecols=['year','average'])","33e1a101":"whs.loc[whs['year'].between(1997,2000),'president'] = 'Clinton'\nwhs.loc[whs['year'].between(2001,2008),'president'] = 'Bush'\nwhs.loc[whs['year'].between(2009,2016),'president'] = 'Obama'\nwhs.loc[whs['year'].between(2017,2020),'president'] = 'Trump'","3281e5e5":"whs['inflation_adjusted_salary'] = ((whs.salary * cpi.loc[2020,'average']) \/ cpi.loc[whs.year,'average'].reset_index(drop=True)).round(2)","c3b1cd66":"whs.sample(5)","c8ea0c80":"whs.groupby('president')[['gender','status','pay_basis']].agg(['describe'])","17f7f8a0":"print(whs.status.unique())\nprint(whs.pay_basis.unique())","7972020f":"pd.concat([whs[whs.status=='Employee (part-time)'], whs[whs.pay_basis=='Per Diem']])","447e297f":"# Make a part-timer an employee\nwhs.loc[whs['status']=='Employee (part-time)','status'] = 'Employee'\n\n# Per_Diem_value * 52 weeks * 5 days\nwhs.loc[whs['pay_basis']=='Per Diem','salary'] = whs[whs['pay_basis']=='Per Diem'].salary*52*5\nwhs.loc[whs['pay_basis']=='Per Diem','pay_basis'] = 'Per Annum'","ebae8ea0":"fig,(ax1,ax2,ax3,ax4) = plt.subplots(4,1, figsize=(12,10))\nwhs.groupby('year').salary.mean().plot.line(color='green', xticks=range(1996,2021), ax=ax1)\nwhs.groupby('year').inflation_adjusted_salary.mean().plot.line(rot=45, color='lightgreen', ax=ax1)\nax1.set(ylabel='mean', yticks=range(50000,150000,20000))\n\nwhs.groupby('year').salary.median().plot.line(color='green', xticks=range(1996,2021), ax=ax2)\nwhs.groupby('year').inflation_adjusted_salary.median().plot.line(rot=45, color='lightgreen', ax=ax2)\nax2.set(ylabel='median', yticks=range(50000,150000,20000))\nax2.legend(['salary','inflation_adjusted_salary'])\n\nwhs.groupby('year').name.count().plot.line(xticks=range(1996,2021), ax=ax3)\nax3.set(ylabel='count')\n\nwhs.groupby('year').salary.sum().plot.line(rot=45, sharex=True, color='red',  xticks=range(1996,2021), ax=ax4)\nwhs.groupby('year').inflation_adjusted_salary.sum().plot.line(rot=45, sharex=True, color='darksalmon', ax=ax4)\nax4.set(ylabel='budget')\nax4.legend(['sum of salaries', 'sum of inflated salaries'])\nplt.show()","d2a520c4":"whs.name.value_counts().value_counts().head(12)","2eb4e61f":"veterans = whs[whs.name.isin(whs.name.value_counts().head(6).index)].reset_index(drop=True)\nveterans.name.unique()","df8f1918":"df = veterans.pivot(index='year', columns='name', values='salary')\ndf.plot.line(figsize=(12,8), xticks=range(1997,2021), rot=45, style='.-', linewidth=2)\nplt.show()","223cb24a":"fig, (ax1,ax2) = plt.subplots(2,1, figsize=(10,12))\ndf = whs.groupby(['year','gender']).salary.count().unstack()\ndf.plot.bar(rot=45, ax=ax1, legend=False)\nax1.set(ylabel='count')\n\ndf = whs.groupby(['year','gender']).salary.median().unstack().reset_index()\ndf.plot.scatter(x='year',y='Female',rot=45, ax=ax2, color='blue', xticks=range(1997,2021), s=30, marker='^')\ndf.plot.scatter(x='year',y='Male',rot=45, ax=ax2, color='red', s=20, marker='s')\nax2.set(ylabel='median salary')\nax2.legend(['Female', 'Male'])\n\n# Basic regression line\nm, b = np.polyfit(df.year,df.Male, 1)\nax2.plot(df.year, m*df.year + b, linewidth=1, color='salmon')\nm, b = np.polyfit(df.year,df.Female, 1)\nax2.plot(df.year, m*df.year + b, linewidth=1, color='lightblue')\n\nplt.show()","f2fd7076":"# Who are the highest paid staffers in each administration?\nwhs.iloc[whs.groupby('president').salary.idxmax()]","b5732898":"# Top 10 highest payed staffers\nwhs.sort_values('salary', ascending=False).head(10)","95f60673":"# Top 10 highest paid staffers, adjusted for inflation\nwhs.sort_values('inflation_adjusted_salary', ascending=False).head(10)","51dc0030":"fig, (ax1,ax2) = plt.subplots(2, 1, figsize=(12, 6))\ndf = whs[whs.inflation_adjusted_salary>150000].groupby(['year','status']).salary.count().unstack()\ndf.plot.bar(rot=45, figsize=(12,8),stacked=True, ax=ax1)\nax1.set(ylabel='count')\nax1.get_legend().remove()\nwhs.groupby(['year','status']).salary.median().unstack().plot.bar(rot=45, figsize=(12,8),stacked=True, ax=ax2)\nax2.set(ylabel='median salary')\nplt.show()","fe0bbc77":"whsx = whs.drop_duplicates(subset=['name','status'], ignore_index=True)\nwhsy = whsx.groupby('name').status.count()\nboth = whsx.set_index('name').loc[whsy[whsy > 1].index,:].reset_index().drop_duplicates(subset=['name'], ignore_index=True)\ndf = both.president.value_counts().reset_index()\n\nplt.figure(\n    FigureClass=Waffle,\n    rows=5,\n    values=df.president,\n    labels=list(df['index']),\n    colors=['royalblue','seagreen','orangered','darkmagenta'],\n    legend={'loc': 'lower left', 'bbox_to_anchor': (0, -0.2), 'framealpha': 0, 'ncol': len(df.president)},\n    figsize=(12, 6)\n)\nplt.show()","541d8a9d":"fbush = whs[whs['year'].between(2001,2004)]\nfobama = whs[whs['year'].between(2009,2012)]\nftrump = whs[whs['year'].between(2017,2020)] \n\nsclinton = whs[whs['year'].between(1997,2000)]\nsbush = whs[whs['year'].between(2005,2008)]\nsobama = whs[whs['year'].between(2013,2016)]\n\nfdf = pd.concat([fbush,fobama,ftrump], ignore_index=True)\nsdf = pd.concat([sclinton,sbush,sobama], ignore_index=True)","3e117b23":"# Basic stats for first terms \nfdf.groupby('president').salary.agg(['mean','median','sum','max','count'])","bcc55926":"# Basic stats for second terms\nsdf.groupby('president').salary.agg(['mean','median','sum','max','count'])","83176fa1":"fig, (ax1,ax2) = plt.subplots(1, 2, figsize=(12, 6))\nmy_pal = {'Clinton':'darkmagenta','Bush':'seagreen','Obama':'royalblue','Trump':'orangered'}\nsns.boxplot(x='president', y='inflation_adjusted_salary', data=fdf, \n            ax=ax1, palette=my_pal, linewidth=2, width=0.4)\nax1.set_title('First Term')\nax1.set_yticks(range(0,330000,30000))\nsns.boxplot(x='president', y='inflation_adjusted_salary', data=sdf, \n            ax=ax2, palette=my_pal, linewidth=2, width=0.4)\nax2.set_title('Second Term')\nax2.set_yticks(range(0,330000,30000))\nplt.show()\n","8e7980ae":"#Full term employees\nfte1 = []\nfor pres in [fbush,fobama,ftrump]:\n    fte1.append(pres.name.value_counts().value_counts().sum() - pres.name.value_counts().value_counts().loc[4])\nfte2 = []\nfor pres in [sclinton,sbush,sobama]:\n    fte2.append(pres.name.value_counts().value_counts().sum() - pres.name.value_counts().value_counts().loc[4])\n\nfig, (ax1,ax2) = plt.subplots(1, 2, figsize=(12, 6), sharey=True)\nsns.pointplot(x=['Bush','Obama','Trump'], y=fte1, ax=ax1)\nsns.pointplot(x=['Clinton','Bush','Obama'], y=fte2, ax=ax2)\nax1.set(yticks=range(700,900,40))\nplt.show()","afaa2fd8":"whs.groupby('year')[['salary','inflation_adjusted_salary']].agg(['sum','count'])","aaa12d16":"fig, (ax1,ax2,ax3) = plt.subplots(3,1, figsize=(12, 16), sharex=True)\n\nax1.set_title('salary distribution')\nwhs.loc[whs['year']==2000,'salary'].plot.hist(bins=25, color='darkmagenta', alpha=0.5, ax=ax1)\nwhs.loc[whs['year']==2001,'salary'].plot.hist(bins=25, color='seagreen', alpha=0.5, ax=ax1)\nax1.legend(['Clinton','Bush'])\n\nwhs.loc[whs['year']==2008,'salary'].plot.hist(bins=25, color='seagreen', alpha=0.5, ax=ax2)\nwhs.loc[whs['year']==2009,'salary'].plot.hist(bins=25, color='royalblue', alpha=0.5, ax=ax2)\nax2.legend(['Bush','Obama'])\n\nwhs.loc[whs['year']==2016,'salary'].plot.hist(bins=25, color='royalblue', alpha=0.5, ax=ax3)\nwhs.loc[whs['year']==2017,'salary'].plot.hist(bins=25, color='orangered', alpha=0.5, ax=ax3)\nplt.xlabel('salary')\nax3.legend(['Obama','Trump'])\nplt.show()","08d9d496":"<a id=\"fst\"><\/a>\n## First & Second Terms","ea9334ef":"<a id=\"t\"><\/a>\n## Transitions\n\n- We will take a look at salaries in two years between transition of power to the next administration.","b5d26a56":"- Most staffers stay less or equal to 1 year, on average 2.\n- We're going to look more closely at people who worked at the WH for the longest (at least 24 years).","251c75f7":"![](https:\/\/i.ytimg.com\/vi\/2BtuIfEAJ5s\/maxresdefault.jpg)","1eecb27c":"- The number of highly paid employees (over \\$150k, adjusted for inflation) has been similar over the years. Lowest point is 2001, and highest in 2002, as well as 2009 and 2010 at the beginning of Obama's term.\n- Ratio between detailee and employee is similar over the years.\n- Detailee get a higher salary than employees. Makes sense since they are usually highly experienced officials from different parts of government.","6e9f6356":"- We get a sample of 5 rows as a reminder of data structure.","5f08444d":"\n- The staff salaries need to be adjusted so they could be better compared. To calculate the inflation values (constant dollars) from nominal (current dollars) values we're using an [average CPI](https:\/\/inflationdata.com\/Inflation\/Consumer_Price_Index\/HistoricalCPI.aspx) for each year:\n\n<p style=\"text-align: center;\">\n$Constant 2020 Salary$$=$$\\frac{2020 CPI}{Historical CPI}$$\\times$$Nominal Historical Salary$\n<\/p>","e2a9700b":"- Trump's median salary is greater than all former administrations, for both terms, even when inflated. \n- Bush had a remarkably frugal 2001, but but it seems that was in preparation of the heavy spending 2002. Number of WH staffers reached a maximum as well during that time.","e2e4a5c9":"# History\n- Version 1: Initial commit.\n- Version 2: TBD\n\nI welcome all and any feedback.","67ced6d8":"<a id=\"intro\"><\/a>\n# 1. Introduction\n\n- The White House Staff dataset is already (mostly) cleaned. Here we're going to load and prepare the data for exploration and analysis.\n- We added a 'president' column for easier filtering, and 'inflation_adjusted_salary' values.","30af36ff":"- It seems like many highly paid employees are detailees. According to [Quora](https:\/\/www.quora.com\/What-is-a-White-House-staff-detailee):\n> A detailee is a civil servant from one agency\/department\/organization who is assigned temporarily (\"on detail\") to another agency\/department\/organization. Their home organization continues to pay their salary and usually retains some administrative responsibility for them throughout the assignment. The assignment has a predetermined length, and when that period ends, the employee returns to their home organization.\n\n- White House employee pay is based on established pay rate tables and congressional mandates, but since detailees are temporarily assigned to a different workstation and work title they would be paid at the pay rate of his or her home agency but would be able to work at the White House. Making a staffer a detailee could be considered a loop-hole promotion.","811c82b2":"- Gender is mostly interpolated from the first name. Names with a similar probability of being male and female have been checked manually. \n\n- Source: National Data on the relative frequency of given names in the population of U.S. births where the individual has a Social Security Number (Tabulated based on Social Security records as of March 3, 2019)","60dfa9df":"<a id=\"sm\"><\/a>\n## Status Matters","307fe1e6":"- The salary of long term civil servants has been steadily increasing over the years. From 2010 to 2015 there is a stagnation that is attributed to the Obama federal salary freeze.\n\n------","0183f159":"- We're going to compare the available data for the first and second terms.","f1d679cc":"----","66db50f8":"- On average the federal salary did increase over the years, even when adjusted for inflation.\n- The number of active staffers was lowest on the beginning of Bush's and Trump's term, while remaining constant during Clinton's and Obama's. \n- The White House budget mostly remained the same, factoring in inflation, and despite the changes in staff. There is a spike in 2002, probably because of Bush's increase in staff and war on terror.\n\n----","e51b02e0":"- Trump's number of staffers is lower the first two years - the documented reason are a lower number of confirmations by Congress, as well as an unorganized transition team. Despite of that, most staffers are in the bracket around $115k, substantially bigger than previous administrations.\n- There is a \\$3-5m budget difference between ending and starting a new administration. Bush and Trump administrations were more frugal that first year - that may be attributed to economical stabiliy while starting their term.\n\n------","6b8186fc":"- All presidents had people who were employees and became detailees, and vice versa.\n- Trump has the biggest number of detailees in one term.","a80f87a4":"- Only Obama has the 'Employee (part-time)' status. We're going to consider them a normal employee.\n- Only Bush was paying some staffers Per Diem. Since it is impossible to know for how long a staffer was employed during one year we're going to interpolate their salary to a Per Annum value.","6b31c59c":"----","5dddaefb":"# Contents\n1. [Introduction](#intro)\n2. [Data Overview](#do)\n3. [Staff Breakdown](#sb)\n - [Tenured Veterans](#tv)\n - [Gender Pay Gap](#gpg)\n - [Status Matters](#sm)\n - [First & Second Terms](#fst)\n - [Transitions](#t)","aeff8fe7":"<a id=\"tv\"><\/a>\n## Tenured Veterans","57463677":"- Trump had the least number employees who stayed the whole term. This data isn't viable for getting a good picture about turnover, but a basic understanding tells us that Bush had most people stay a total of 4 terms.\n\n--------","4c7e17c6":"<a id=\"do\"><\/a>\n# 2. Data Overview","67faf383":"- Even though the number of women in the White House has been overall high, there is an obvious gap in salaries compared to men.\n- Basic regression shows both genders have an upward slope, but it seems the gap is only getting larger.\n\n----","6a7cc33d":"<a id=\"sb\"><\/a>\n# 3. Staff Breakdown","020b24e3":"<a id=\"gpg\"><\/a>\n## Gender Pay Gap"}}