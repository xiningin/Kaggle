{"cell_type":{"1330c5d7":"code","7f77c2c9":"code","8ae51642":"code","52630b27":"code","86742b19":"code","3b2654ed":"code","d439890c":"code","334f67d7":"code","b65b4c11":"code","cb2b28d1":"code","489bfe05":"code","600ba766":"code","20c26d19":"code","2548af67":"code","cb3d7445":"code","8564e1c9":"code","dd1b7cee":"code","0200dbe9":"code","40f6906b":"code","e878df12":"code","c26324ed":"code","e3e39177":"code","d694a652":"code","fe56bd07":"code","6fb07d62":"code","b8ae6b2d":"code","9f945f8f":"code","92aa026b":"code","20876c2e":"code","19dc2f04":"code","26adaeed":"code","1001b6d1":"code","a5dba704":"code","3a1cab17":"code","94225515":"code","35b63882":"code","f41ba423":"code","49ac48d6":"code","b791d67f":"code","0585f49d":"code","9addea23":"code","fa9be16b":"code","9cdfb69b":"markdown","77853637":"markdown","df101101":"markdown","e0899f82":"markdown","893bc7a4":"markdown","849dec65":"markdown","370b1ebb":"markdown","8189be21":"markdown","f84bf928":"markdown","f344051b":"markdown","39741ab9":"markdown","174530f1":"markdown"},"source":{"1330c5d7":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7f77c2c9":"df = pd.read_csv('\/kaggle\/input\/videogamesales\/vgsales.csv')","8ae51642":"# EDA","52630b27":"def eda(dfA, all=False, desc='Exploratory Data Analysis'):\n    print(desc)\n    print(f'\\nShape:\\n{dfA.shape}')\n    print(f'\\nDTypes - Numerics')\n    print(dfA.select_dtypes(include=np.number).columns.tolist())\n    print(f'\\nDTypes - Not Numerics')\n    print(dfA.select_dtypes(include='object').columns.tolist())\n    print(f'\\nIs Null: {dfA.isnull().sum().sum()}')\n    print(f'{dfA.isnull().mean().sort_values(ascending=False)}')\n    dup = dfA.duplicated()\n    print(f'\\nDuplicated: \\n{dfA[dup].shape}\\n')\n    try:\n        print(dfA[dfA.duplicated(keep=False)].sample(4))\n    except:\n        pass\n    if all:  # here you put yours prefered analysis that detail more your dataset\n        \n        print(f'\\nDTypes - Numerics')\n        print(dfA.describe(include=[np.number]))\n        print(f'\\nDTypes - Categoricals')\n        print(dfA.describe(include=['object']))\n","86742b19":"eda(df)","3b2654ed":"df.sort_values(by=['Year'])['Year'].unique()","d439890c":"df[df.Year.isna()]","334f67d7":"df.Publisher.unique()","b65b4c11":"# function Fill NaN values\ndef fillNaN(dfA):\n  for col in dfA:\n    if type(dfA[col]) == 'object':\n        dfA[col] = dfA[col].fillna('Unknown')\n    else:\n        dfA[col] = dfA[col].fillna(0)\n  return dfA","cb2b28d1":"dfNew = fillNaN(df)\neda(dfNew)","489bfe05":"dfNew.describe()","600ba766":"dfNew.info()","20c26d19":"dfNew.select_dtypes(include='object').columns.tolist()","2548af67":"# changing Categoricals to number\ndef catToNumeric(dfA):\n    for x in dfA.select_dtypes(include='object').columns.tolist():\n        ncol = 'id_'+x \n        dfA[x] = pd.Categorical(dfA[x])\n        dfA[ncol] = dfA[x].cat.codes\n    return dfA","cb3d7445":"dfNew = catToNumeric(dfNew)","8564e1c9":"dfNew.select_dtypes(include=np.number).columns.tolist()","dd1b7cee":"import plotly.graph_objects as go","0200dbe9":"# ignoring Year 0 [values filled by function]\nsalesYear = dfNew[((dfNew.Year>0) & (dfNew.Year < 2016))][['Global_Sales', 'Year']].groupby('Year').sum()\n","40f6906b":"fig = go.Figure([go.Bar(x=salesYear.index.tolist(), y=salesYear.values.reshape(-1).tolist())])\nfig.update_layout(template='plotly_white', title=\"Games - Sales History (US$ mi)\")\nfig.show()","e878df12":"salesPlatform = dfNew.query('2016 > Year >=1980')[['Platform', 'Global_Sales']].groupby(['Platform']).sum().sort_values(by='Global_Sales', ascending=False).head(10)\n\nfig = go.Figure([go.Bar(x=salesPlatform.index.tolist(), y=salesPlatform.values.reshape(-1).tolist())])\nfig.update_layout(template='plotly_white', title=\"Games - Top 10 Platforms (US$ mi)\")\nfig.show()","c26324ed":"salesGenre = dfNew.query('2016 > Year >=1980')[['Genre', 'Global_Sales']].groupby(['Genre']).sum().sort_values(by='Global_Sales', ascending=False).head(10)\n\nfig = go.Figure([go.Bar(x=salesGenre.index.tolist(), y=salesGenre.values.reshape(-1).tolist())])\nfig.update_layout(template='plotly_white', title=\"Games - Top 10 Genres (US$ mi)\")\nfig.show()","e3e39177":"salesNames = dfNew.query('2016 > Year >=1980')[['Name', 'Global_Sales']].groupby(['Name']).sum().sort_values(by='Global_Sales', ascending=False).head(20)\n\nx=salesNames.index.tolist()\ny=salesNames.values.reshape(-1).tolist()\nfig = go.Figure([go.Bar(x=x, y=y, marker=dict(color=y, colorscale='sunsetdark'))])\nfig.update_layout(template='plotly_white', title=\"Games - Top 20 (US$ mi)\")\nfig.show()","d694a652":"salesW = dfNew[['NA_Sales','EU_Sales','JP_Sales','Other_Sales']].sum()\nfig = go.Figure(data=[go.Pie(labels=salesW.index, values=salesW.values)])\nfig.update_layout(template='plotly_white', title=\"Games - World (US$ mi)\")\nfig.show()","fe56bd07":"# sentiment analyzer\n!pip install vaderSentiment\nimport vaderSentiment\nfrom vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer\n\n# nlp\nimport spacy\n!pip install -U spacy\nfrom spacy import displacy\nfrom spacy.lang.en.stop_words import STOP_WORDS as stopWordsEn\n\n# dataviz\nfrom IPython.display import SVG, display","6fb07d62":"nlp = spacy.load(\"en_core_web_sm\")","b8ae6b2d":"def showSVG(s):\n  display(SVG(s))","9f945f8f":"ex1 = \"I love playing FreeFire.\"\ndoc = nlp(ex1)\ngraph01 = displacy.render(doc, options={'compact': True, \"bg\": \"#09a3d5\", \"color\": \"white\"})\nshowSVG(graph01)\n","92aa026b":"readSentiment = SentimentIntensityAnalyzer()\nsentiments = ['Negative', 'Positive', 'Neutral']\ndef getSentiment(phrase):\n  s = readSentiment.polarity_scores(phrase)\n  if s['compound'] <= -0.05:\n    sentiment = 0\n  elif s['compound'] >= 0.05:\n    sentiment = 1\n  else:\n    sentiment = 2\n  return sentiment, s","20876c2e":"getSentiment(ex1)","19dc2f04":"f'{sentiments[getSentiment(ex1)[0]]}: {ex1}'","26adaeed":"games = dfNew.Name.unique().tolist()","1001b6d1":"# testing first records\n[f'{sentiments[getSentiment(txt)[0]]}: {txt}'  for txt in games[:5]]    ","a5dba704":"gameSent = []\nfor g in games:\n    gameSent.append(getSentiment(g)[0])","3a1cab17":"values = [gameSent.count(v) for v in range(0,3) ]","94225515":"fig = go.Figure([go.Bar(x=sentiments, y=values, marker=dict(color=y, colorscale='oryel'))])\nfig.update_layout(template='plotly_white', title=\"Games - Title's Sentiment\")\nfig.show()","35b63882":"import string\ndef tokenizeStr(original):\n  txt2 = nlp(original) # cr\u00e9er une liste de mots\n  txt2 = [str(token.lemma_).upper() for token in txt2 if not nlp.vocab[token.text].is_stop]\n  punct = string.punctuation\n  stopwords = list(stopWordsEn)\n  ws = string.whitespace\n  txt2 = [word for word in txt2 if word not in stopwords and word not in punct and word not in ws  if len(word)]\n  return txt2","f41ba423":"import re\ndef cleaningText(original, show=False):\n  txt = original.upper() # uppercase\n  txt = re.sub('@','',txt) # remove @ \n  txt = re.sub('\/',' ',txt) # remove @ \n  txt = re.sub(r'[^a-zA-Z ]+', '', txt) # remove numbers\n  txt = re.sub('\\[.*\\]','',txt) # remove contents between brackets\n  txt = re.sub('<.*?>+','',txt) # remove contents between less and more signs\n  txt = re.sub('https?:\/\/\\S+|www\\.\\S+', '', txt) # remove URLs\n  txt = re.sub(re.escape(string.punctuation), '', txt) # remove punctuation\n  txt = re.sub('\\n', '', txt) # remove line break\n  txt = str(txt).strip()\n  if show:\n    print('ORIGINAL: ', original)\n    print('   TEXT CLEANNED: ', txt)\n  return txt\n","49ac48d6":"wordsT = []\nfor row in games:\n    word = cleaningText(row)\n    wordsT.append(tokenizeStr(word))","b791d67f":"from itertools import chain\nwordsT2=list(chain.from_iterable(wordsT))\nwordlist = pd.value_counts(wordsT2)\ntopW = pd.DataFrame(data={'tag': wordlist.index, 'count':wordlist.values})","0585f49d":"x = topW['tag'][:10].str.upper()\ny = topW['count'][:10]\nfig = go.Figure([go.Bar(x=y, y=x, marker=dict(color=y, colorscale='oryel'), \n                       orientation='h')])\nfig.update_layout(template='plotly_white', title=\"Games - Top 10 tags name\")\nfig.show()","9addea23":"import matplotlib.pyplot as plt\nfrom wordcloud import WordCloud, STOPWORDS as stc\nstopwordsCloud = set(stc)","fa9be16b":"wordcloud = WordCloud(width = 800, height = 600, \n                background_color ='white', \n                stopwords = stopwordsCloud, \n                min_font_size = 10).generate(' '.join(wordsT2)) \n  \n# plot the WordCloud image                        \nplt.figure(figsize = (10, 8), facecolor = None) \nplt.imshow(wordcloud) \nplt.axis(\"off\") \nplt.tight_layout(pad = 0) \nplt.title('Map of Words - Games')\n  \nplt.show() ","9cdfb69b":"dataviz","77853637":"counting sentiment","df101101":"# More about all variables\n\n**IDzation in Categoricals Variables**","e0899f82":"**Using games data**","893bc7a4":"**Words analytics**","849dec65":"get sentiment","370b1ebb":"**Data Statistics - Variables**","8189be21":"**Testing NLP - Dataviz and Sentiment Analyzer**","f84bf928":"# Data","f344051b":"Changing Object Variables to Numeric Variables","39741ab9":"More about NA values","174530f1":"# NLP - Spacy"}}