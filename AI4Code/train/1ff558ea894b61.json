{"cell_type":{"7c167c74":"code","9f931df7":"code","1bccf552":"code","57cf902a":"code","a68c5ac1":"code","311ce8c1":"code","0fd01f66":"code","d1a01f7f":"code","fdb98320":"code","044b14b7":"code","fc8f283b":"code","aeba0d9c":"code","4edd8b03":"code","500f80fa":"code","14c630e2":"code","a0d41637":"markdown"},"source":{"7c167c74":"import gc\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","9f931df7":"train = pd.read_csv('..\/input\/train.csv',usecols=['MachineIdentifier','EngineVersion','AvSigVersion','HasDetections'])","1bccf552":"train.head()","57cf902a":"def MungeVersionInfo(data, c):\n    data[c] = data[c].str.replace(r'[^\\.|0-9]','')#There is a weird value in AvSigVersion\n    mysplit = data[c].str.split('.',expand=True).astype(int)\n    mymax = np.ceil(np.log10(np.maximum(10,mysplit.max())))\n    mysum = mymax.sum()\n    pseudonumber = np.zeros(data.shape[0])\n    placeholder = 0\n    for i in range(mysplit.shape[1]):\n        myfactor = (10**(mysum - mymax[i]-placeholder)).astype(int)\n        pseudonumber += myfactor*mysplit[mysplit.columns[i]].values\n        placeholder += mymax[i]\n    return pseudonumber.astype(int)","a68c5ac1":"for c in ['EngineVersion','AvSigVersion']:\n    train[c] = MungeVersionInfo(train, c)","311ce8c1":"train.head()","0fd01f66":"a = train.groupby('EngineVersion')['HasDetections'].mean().reset_index(drop=False)\nplt.figure(figsize=(15,15))\nplt.plot(a.EngineVersion,a.HasDetections)","d1a01f7f":"a = train.groupby('AvSigVersion')['HasDetections'].mean().reset_index(drop=False)\nplt.figure(figsize=(15,15))\nplt.plot(a[(a.AvSigVersion>0)&(a.AvSigVersion<1.05e9)].AvSigVersion,a[(a.AvSigVersion>0)&(a.AvSigVersion<1.05e9)].HasDetections)","fdb98320":"print(train['EngineVersion'].min())\nprint(train['EngineVersion'].mean())\nprint(train['EngineVersion'].max())","044b14b7":"print(train['AvSigVersion'].min())\nprint(train['AvSigVersion'].mean())\nprint(train['AvSigVersion'].max())","fc8f283b":"del train\ngc.collect()","aeba0d9c":"test = pd.read_csv('..\/input\/test.csv',usecols=['MachineIdentifier','EngineVersion','AvSigVersion'])","4edd8b03":"for c in ['EngineVersion','AvSigVersion']:\n    test[c] = MungeVersionInfo(test, c)","500f80fa":"print(test['EngineVersion'].min())\nprint(test['EngineVersion'].mean())\nprint(test['EngineVersion'].max())","14c630e2":"print(test['AvSigVersion'].min())\nprint(test['AvSigVersion'].mean())\nprint(test['AvSigVersion'].max())","a0d41637":"I am thinking of using versions as numbers - Ias such I looked at the two version columns that Olivier found in his adversarial approach"}}