{"cell_type":{"37fc2f22":"code","85010bb2":"code","aff18cd8":"code","c56d13f1":"code","1d6782f4":"code","3ee07592":"code","8bf81668":"code","0d4e1e5d":"code","a7ceea00":"code","6c390b64":"code","b9c09e90":"code","b7af88ff":"code","f2a5da7b":"code","5778f49a":"code","79990b32":"code","c42bb8e4":"code","21646df0":"code","ee229272":"code","af327f1c":"code","328eed47":"markdown","8c9f8b84":"markdown","39b9a247":"markdown","a7670b82":"markdown","cceb8fdd":"markdown","5e984bd2":"markdown","40fb08ec":"markdown","4b730ed7":"markdown","74c5f9ec":"markdown","d3934c66":"markdown","88acb785":"markdown","324734be":"markdown","a5ca71ed":"markdown","4389a008":"markdown","33a78d2a":"markdown","99702dc8":"markdown"},"source":{"37fc2f22":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nplt.rcParams[\"figure.figsize\"] = \"15, 15\"\n\nimport seaborn as sns\nfrom plotnine import *\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","85010bb2":"# Set theme for plots\ntheme_set(\n        theme_minimal(base_size = 12, base_family = 'sans') \\\n      + theme(axis_text_x = element_text(angle = 0, vjust = 0.5, hjust = 0.5),\\\n          axis_text = element_text(size = 8), \\\n          axis_title = element_text(size = 14), \\\n          panel_grid_major = element_line(color = \"grey\"), \\\n          panel_grid_minor = element_blank(), \\\n          panel_background = element_rect(fill = \"aliceblue\"), \\\n          strip_background = element_rect(fill = \"navy\", color = \"navy\", size = 1), \\\n          strip_text = element_text(face = \"bold\", size = 10, color = \"white\"), \\\n          legend_position = \"right\", \\\n          legend_background = element_blank(), \\\n          panel_border = element_rect(color = \"grey\" , fill = \"NA\", size = 0.5))  \n)","aff18cd8":"# Read input data and concat into a single dataframe\npolio = pd.read_csv(\"..\/input\/polio.csv\")\nmumps = pd.read_csv(\"..\/input\/mumps.csv\")\nmeasles = pd.read_csv(\"..\/input\/measles.csv\")\npertussis = pd.read_csv(\"..\/input\/pertussis.csv\")\nrubella = pd.read_csv(\"..\/input\/rubella.csv\")\nhepatitis = pd.read_csv(\"..\/input\/hepatitis.csv\")\nsmallpox = pd.read_csv(\"..\/input\/smallpox.csv\")\n\npolio.disease = 'Polio'\nmumps.disease = 'Mumps'\nmeasles.disease = 'Measles'\npertussis.disease = 'Pertussis'\nrubella.disease = 'Rubella'\nhepatitis.disease = 'Hepatitis'\nsmallpox.disease = 'Smallpox'\n\ndiseasedf = pd.concat([polio, mumps, measles,pertussis, rubella, hepatitis, smallpox], ignore_index=True)\n\ndiseasedf.rename(columns={'week':'date'}, inplace=True)\ndiseasedf.date = diseasedf.date.astype(str)\ndiseasedf['year'] = diseasedf['date'].str.extract('(\\d\\d\\d\\d)', expand=True)\ndiseasedf['week'] = diseasedf['date'].str.extract('(\\\\d[0-9])$', expand=True)\n\ndiseasedf['cases'] = pd.to_numeric(diseasedf['cases'], errors='coerce')\n\ndiseasedf['year'] = pd.to_numeric(diseasedf['year'])\n\ndiseasedf['week'] = pd.to_numeric(diseasedf['week'])\n\ndiseasedf.info()\n\ndiseasedf.head()","c56d13f1":"# Remove NA rows and rows with number of cases = 0\n((diseasedf.isnull() | diseasedf.isna()).sum() * 100 \/ diseasedf.index.size).round(2)\n\ndiseasedf.dropna(how='any', inplace =True)\n\ndiseasedf = diseasedf.loc[diseasedf['cases'] > 0]\n\n((diseasedf.isnull() | diseasedf.isna()).sum() * 100 \/ diseasedf.index.size).round(2)","1d6782f4":"# Create a dataframe for US population data\nus_pop = {'year': [2011, 2010, 2009, 2008, 2007, 2006, 2005, 2004, 2003, 2002, 2001, 2000, 1999, 1998\n                   , 1997, 1996, 1995, 1994, 1993, 1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985, 1984\n                   , 1983, 1982, 1981, 1990, 1979, 1978, 1977, 1976, 1975, 1974, 1973, 1972, 1971, 1970\n                   , 1969, 1968, 1967, 1966, 1965, 1964, 1963, 1962, 1961, 1960, 1959, 1958, 1957, 1956\n                   , 1955, 1954, 1953, 1952, 1951, 1950, 1949, 1948, 1947, 1946, 1945, 1944, 1943, 1942\n                   , 1941, 1940, 1939, 1938, 1937, 1936, 1935, 1934, 1933, 1932, 1931, 1930, 1929, 1928]\n          , 'population':[310500000, 308110000, 306770000, 304090000, 301230000, 298380000, 295520000, 292810000\n                          , 290110000, 287630000, 284970000, 282160000, 279040000, 275850000, 272650000, 269390000\n                          , 266280000, 263130000, 259920000, 256510000, 252980000, 249620000, 246820000, 244500000\n                          , 242290000, 240130000, 237920000, 235820000, 233790000, 231660000, 229470000, 227220000\n                          , 225060000, 222580000, 220240000, 218040000, 215970000, 213850000, 211910000, 209900000\n                          , 207660000, 205050000, 202680000, 200710000, 198710000, 196560000, 194300000, 191890000\n                          , 189240000, 186540000, 183690000, 180670000, 177830000, 174880000, 171990000, 168900000\n                          , 165930000, 163030000, 160180000, 157550000, 154880000, 152270000, 149190000, 146630000\n                          , 144130000, 141390000, 139930000, 138400000, 136740000, 134860000, 133400000, 132120000\n                          , 130880000, 129820000, 128820000, 128050000, 127250000, 126370000, 125580000, 124840000\n                          , 124040000, 123080000, 121770000, 120510000]}\npopulationdf = pd.DataFrame(us_pop)\npopulationdf.head()","3ee07592":"# Disease outbreak through the years - All Diseases\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf) \\\n      + aes(y='cases', x='year') \\\n      + aes(color='disease') \\\n      + geom_line(aes(color='disease'),size=1) \\\n      + labs(title = \"Disease Outbreak Through The Years\") \\\n      + labs(x = \"Year\") \\\n      + labs(y = \"Number of Cases\") \n)\n","8bf81668":"# Disease outbreak through the years - Facet Grid\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf)\n      + aes(y='cases', x='year')\n      + aes(color='disease')\n      + geom_line(aes(color='disease'),size=1) \n      + facet_wrap('~disease', nrow=3, ncol=3)\n      + labs(title = \"Disease Outbreak Through The Years\")\n      + labs(x = \"Year\") \n      + labs(y = \"Number of Cases\")\n)\n","0d4e1e5d":"# Create new column 'decade': 1920 = all years from 1920 to 1929\nbins = np.array([1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020])\ndiseasedf['decade'] = pd.cut(diseasedf.year, bins\n                             , labels=['1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010']\n                            , right=False)\n\n# Get the mean cases \ndiseasedf['mean_cases_year'] = diseasedf.groupby(['year', 'disease', 'week'])['cases'].transform('mean')","a7ceea00":"# Disease density (by decade)\nlog10cases = np.log10(diseasedf.mean_cases_year)\n\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf)\n      + aes(x=log10cases, fill='disease')\n      + aes(color='disease')\n      + geom_density(alpha = 0.3, size = 1)\n      + geom_rug()\n      + facet_wrap('~decade', nrow=4, ncol=3, scales=\"free_y\")\n      + theme(axis_text_x = element_text(angle = 0, vjust = 0.5, hjust = 0.1),\\\n          axis_text_y = element_text(angle = 0, vjust = 0.5, hjust = 0.1),\\\n          axis_text = element_text(size = 6), \\\n          subplots_adjust={'wspace': 5.8, 'hspace': 0.2})\n      + labs(title = \"Disease Density Through the Decades\")\n      + labs(x = \"Log transformation of the mean number of cases\") \n      + labs(y = \"Density\")\n)","6c390b64":"# Join the disease and population data \n\npopaffdf = pd.merge(diseasedf, populationdf, left_on = 'year', right_on = 'year', how = 'left')\n\npopaffdf['per_pop_aff'] = (popaffdf['mean_cases_year'] \/ popaffdf['population']) * 100\n","b9c09e90":"# Stacked Bar Plot - Population affected by contagious diseases over the years\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=popaffdf) \\\n    + aes(x='year', y='per_pop_aff', color='disease') \\\n    + geom_line(size=1) \\\n    + labs(title = \"Disease Rate vs Entire US Population\") \\\n    + labs(x = \"Years\") \\\n    + labs(y = \"Percentage of Popuation Affected\") \n)","b7af88ff":"# Calculate mean cases per disease, state, decade\ndiseasedf['state_name'] = diseasedf.state_name.str.title()\n\ndiseasedf['mean_cases_state_decade'] = 0\n\ndiseasedf['mean_cases_state_decade'] = diseasedf.groupby(['disease', 'state_name', 'decade'])['cases'].transform('mean')","f2a5da7b":"# Heatmap - Measles over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Measles']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Measles Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","5778f49a":"# Heatmap - Hepatitis over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Hepatitis']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Hepatitis Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","79990b32":"# Heatmap - Polio over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Polio']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Polio Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","c42bb8e4":"# Heatmap - Pertussis over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Pertussis']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Pertussis Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","21646df0":"# Heatmap - Rubella over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Rubella']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Rubella Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","ee229272":"# Heatmap - Smallpox over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Smallpox']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Smallpox Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","af327f1c":"# Heatmap - Mumps over Decades\nimport warnings\nwarnings.filterwarnings('ignore')\n(\n    ggplot(data=diseasedf.loc[diseasedf.disease == 'Mumps']) \\\n    + aes(x='decade', y='state_name') \\\n    + geom_tile(aes(fill='mean_cases_state_decade')) \\\n    + scale_fill_gradientn(colors=['#9ebcda','#8c6bb1','#88419d','#6e016b']) \\\n    + theme(axis_text = element_text(size = 6)) \\\n    + labs(title = \"Mumps Over Decades Heatmap\") \\\n    + labs(x = \"Decades\") \\\n    + labs(y = \"State\") \n)","328eed47":"## Smallpox <a class=\"anchor\" id=\"fourteenth-bullet\"><\/a>\n##### Vaccine introduced as early as 1796, smallpox earadicated in the US by 1952 ","8c9f8b84":"## Measles  <a class=\"anchor\" id=\"ninth-bullet\"><\/a>\n##### Vaccine introduced in 1963","39b9a247":"# Heatmap - across decades <a class=\"anchor\" id=\"eigth-bullet\"><\/a>","a7670b82":"## Disease outbreak through the years - all diseases <a class=\"anchor\" id=\"third-bullet\"><\/a>","cceb8fdd":"Thank you for viewing this kernel. Please upvote if you liked it. If you notice any errors or areas for improvement, feel free to leave a comment.","5e984bd2":"## Disease density - facet grid by decade <a class=\"anchor\" id=\"fifth-bullet\"><\/a>","40fb08ec":"## Disease outbreak through the years - facet grid by disease <a class=\"anchor\" id=\"fourth-bullet\"><\/a>","4b730ed7":"## Hepatitis  <a class=\"anchor\" id=\"tenth-bullet\"><\/a>\n##### Vaccine introduced in 1982\n##### Notice that the most populous states of California, Texas and New York have the highest number of cases","74c5f9ec":"## Polio <a class=\"anchor\" id=\"eleventh-bullet\"><\/a>\n###### Oral Polio Vaccine was introduced in 1961","d3934c66":"## Create a single dataframe for all diseases <a class=\"anchor\" id=\"first-bullet\"><\/a>","88acb785":"## Create a dataframe for US population <a class=\"anchor\" id=\"second-bullet\"><\/a>","324734be":"## Disease outbreak with respect to population <a class=\"anchor\" id=\"seventh-bullet\"><\/a>","a5ca71ed":"# Contagious Diseases - Exploratory Data Analysis using GGplot for Python\n\n## Contents:\n* [Create a single dataframe for all diseases](#first-bullet)\n* [Create a dataframe for US population](#second-bullet)\n* [Disease outbreak through the years - all diseases](#third-bullet)\n* [Disease outbreak through the years - facet grid by disease](#fourth-bullet)\n* [Disease density - facet grid by decade](#fifth-bullet)\n* [Disease outbreak with respect to population](#seventh-bullet)\n* [Heatmap - across decades](#eigth-bullet)\n* * [Measles](#ninth-bullet)\n* * [Hepatitis](#tenth-bullet)\n* * [Polio](#eleventh-bullet)\n* * [Pertussis](#twelfth-bullet)\n* * [Rubella](#thirteenth-bullet)\n* * [Smallpox](#fourteenth-bullet)\n* * [Mumps](#fifteenth-bullet)\n\nInspired by the visualizations in R by Benjamin Lott","4389a008":"## Pertussis <a class=\"anchor\" id=\"twelfth-bullet\"><\/a>\n##### Vaccine introduced in the late 1940's","33a78d2a":"## Mumps <a class=\"anchor\" id=\"fifteenth-bullet\"><\/a>\n##### Vaccine introduced in 1967","99702dc8":"## Rubella <a class=\"anchor\" id=\"thirteenth-bullet\"><\/a>\n##### Vaccine introduced in 1969"}}