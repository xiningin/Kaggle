{"cell_type":{"384c448a":"code","52072f83":"code","0862ff92":"code","7d4e62e6":"code","be8d1923":"code","4c5d5fc5":"code","a3b34fa0":"code","6535f275":"code","0c86db51":"code","aaca9e10":"code","74acff04":"code","9ef562f0":"code","17891e4b":"code","945ed1a5":"code","0713280c":"code","e469bba9":"code","e12f3075":"code","a3c766f7":"code","362d7dd6":"code","bd0a353b":"code","79f3725c":"code","a1da5bd6":"code","cc69f915":"markdown","4a23261b":"markdown","da08238c":"markdown","1542918f":"markdown","f4a73915":"markdown","1122a218":"markdown","aad4fb3a":"markdown","6a52483e":"markdown","42e8c8e4":"markdown","db95156c":"markdown","ff8bd4ad":"markdown","99236dc7":"markdown","32a4c192":"markdown","81ce4627":"markdown","f0040a77":"markdown","fe4e82bd":"markdown","a2a7d9ca":"markdown","eeb20980":"markdown"},"source":{"384c448a":"!pip install yfinance","52072f83":"import yfinance as yf","0862ff92":"SPY = yf.Ticker(\"SPY\")","7d4e62e6":"SPY.info","be8d1923":"# get historical market data\nSPY_histo = SPY.history(start=\"2015-01-01\", end=\"2020-12-31\")","4c5d5fc5":"import matplotlib.pyplot as plt\nimport numpy as np","a3b34fa0":"SPY_histo.index","6535f275":"import datetime\n\nplt.figure(figsize=(10,10))\nplt.plot(SPY_histo.index, SPY_histo['Close'])\nplt.xlabel(\"date\")\nplt.ylabel(\"$ price\")\nplt.title(\"Stock Price\")\n\nstart_date = datetime.datetime(2017,11,1)\nend_date = datetime.datetime(2019,10,31)\nplt.axvspan(start_date, end_date, color='g', alpha=0.5, lw=0)","0c86db51":"plt.figure(figsize=(10,10))\nplt.plot(SPY_histo.index, np.log(SPY_histo['Volume']).rolling(window=20).mean())\nplt.xlabel(\"date\")\nplt.ylabel(\"volume\")\nplt.title(\"Volume\")\n\nstart_date = datetime.datetime(2017,11,1)\nend_date = datetime.datetime(2019,10,31)\nplt.axvspan(start_date, end_date, color='g', alpha=0.5, lw=0)","aaca9e10":"plt.scatter(SPY_histo['Volume'],SPY_histo['Close'].pct_change(1))\nplt.ylabel(\"daily return\")\nplt.xlabel(\"volume\")","74acff04":"#select ticker\nVIX = yf.Ticker(\"^VIX\")\nVIX_histo = VIX.history(start=\"2015-01-01\", end=\"2020-12-31\")\n\n\nplt.figure(figsize=(10,10))\nplt.plot(VIX_histo.index, VIX_histo['Close'])\nplt.xlabel(\"date\")\nplt.ylabel(\"$ price\")\nplt.title(\"VIX Price\")\n\nstart_date = datetime.datetime(2017,11,1)\nend_date = datetime.datetime(2019,10,31)\nplt.axvspan(start_date, end_date, color='g', alpha=0.5, lw=0)","9ef562f0":"#select ticker\nSPX = yf.Ticker(\"^skew\")\nSPX_histo = SPX.history(start=\"2015-01-01\", end=\"2020-12-31\")\n\nplt.figure(figsize=(10,10))\nplt.plot(SPX_histo.index, SPX_histo['Close'])\nplt.xlabel(\"date\")\nplt.ylabel(\"$ price\")\nplt.title(\"skew index Price\")\n\nstart_date = datetime.datetime(2017,11,1)\nend_date = datetime.datetime(2019,10,31)\nplt.axvspan(start_date, end_date, color='g', alpha=0.5, lw=0)","17891e4b":"#select ticker\nSPX = yf.Ticker(\"^TNX\")\nSPX_histo = SPX.history(start=\"2015-01-01\", end=\"2020-12-31\")\n\nplt.figure(figsize=(10,10))\nplt.plot(SPX_histo.index, SPX_histo['Close'])\nplt.xlabel(\"date\")\nplt.ylabel(\"$ price\")\nplt.title(\"TNX Price\")\n\nstart_date = datetime.datetime(2017,11,1)\nend_date = datetime.datetime(2019,10,31)\nplt.axvspan(start_date, end_date, color='g', alpha=0.5, lw=0)","945ed1a5":"SPY = yf.Ticker(\"SPY\")\nSPY.options","0713280c":"opt = SPY.option_chain('2023-12-15')","e469bba9":"opt.calls","e12f3075":"GME = yf.Ticker(\"GME\")\nGME.info","a3c766f7":"#select ticker\nGME_histo = GME.history(start=\"2020-01-01\", end=\"2021-01-30\")\n\n\nplt.figure(figsize=(10,10))\nplt.plot(GME_histo.index, GME_histo['Close'])\nplt.xlabel(\"date\")\nplt.ylabel(\"$ price\")\nplt.title(\"GME Price\")","362d7dd6":"GME.options","bd0a353b":"opt = SPY.option_chain('2021-04-16')","79f3725c":"opt.calls","a1da5bd6":"opt.puts","cc69f915":"Getting data is really easy. Start by selecting a ticker and look a the ticker info. Here we start with a major us index \"SPY\", replicating the performance of the S&P 500. We use major indices for two reason : with goog volume they reflect the underlying and most importantfly for us they are available as ticker trough yahoo finance.","4a23261b":"Percent change \/ volume relation (as asked by @carlmcbrideellis [here](https:\/\/www.kaggle.com\/c\/jane-street-market-prediction\/discussion\/208013))","da08238c":"## Options chains\n\nStandardized derivates are one of the most used tool on the market. You can get data for those trough yfinance. A call to options will give you the available horizons.","1542918f":"Here is a skew index that reflect the tendency to provide skewed return, also an indicator of market turmoil.","f4a73915":"## Other important market indices","1122a218":"Looking more specifically at calls, you can get individual data for given strikes :","aad4fb3a":"I add a green band to plot the suspected train period (see this discussion about [matching pattern of bank holidays with outliers dates](https:\/\/www.kaggle.com\/c\/jane-street-market-prediction\/discussion\/205107#1117838))","6a52483e":"\ud83d\ude02\ud83d\ude02\ud83d\ude02\ud83d\ude02","42e8c8e4":"Get histroical data and plot close price :","db95156c":"TNX is an index that reflect 10Y treasury rate, key benchmark for performance :","ff8bd4ad":"Then you can load the (approximately current) data regarding this expiration date.","99236dc7":"Various informations about the ticker :","32a4c192":"shortRatio : 2.81  \ud83d\ude02","81ce4627":"* Volume is also an important feature (monthly smoothing):","f0040a77":"## GME update\n\nIn their latest shenaningans, a now famous subreddit as managed to push the price of GME (video game retail chain that was almost doomed before the pandemic) to insane levels. We can look at what is happening right now :","fe4e82bd":"For the moment, most of the data being anonymised, it is quite hard to figure out how external data might be usefull and how we would incorporate them in our model. But in case this might be usefull, here is a short notebook on how to get external data from yfinance. \n\nFirst you have to install it.","a2a7d9ca":"## How to get market data","eeb20980":"Vix is a volatility index reflecting volatility of the market, generally reflecting market turmoil :"}}