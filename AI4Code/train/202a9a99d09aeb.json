{"cell_type":{"ae57d32d":"code","bbae26d5":"code","750532d5":"code","b8204fd4":"code","773451a1":"code","933651e6":"code","eaf4e5a9":"code","8e926268":"code","aaa82f43":"code","4f275d55":"code","db4491c0":"markdown","14708b9d":"markdown","b85f730d":"markdown","8e0a7ea5":"markdown","9b61d3d1":"markdown","960b8dbe":"markdown","b0ea2a6d":"markdown"},"source":{"ae57d32d":"!pip install beautifulsoup4\n!pip install extruct","bbae26d5":"import requests\nfrom bs4 import BeautifulSoup\nimport json\nimport extruct","750532d5":"url = \"https:\/\/hebbarskitchen.com\/shahi-paneer-recipe-shahi-paneer-masala\/\"\nres = requests.get(url)\nprint(res.status_code)","b8204fd4":"def get_json_ld(html: str) -> list:\n    \n    soup = BeautifulSoup(html, \"lxml\")   # Can use html.parser, html\n    \n    items = soup.find_all(type=\"application\/ld+json\")\n    \n    data = []\n    for item in items:\n        # Conerting strint to dict or list\n        item = \" \".join(item.string.split())\n        item = json.loads(item)\n\n        if isinstance(item, list):\n            data += item\n        else:\n            data.append(item)\n            \n    return data","773451a1":"data = get_json_ld(res.text)","933651e6":"for i in data:\n    print(i[\"@context\"])\n    if i.get(\"@graph\"):\n        for j in i[\"@graph\"]:\n            print(j[\"@type\"])\n    else:\n        print(i['@type'])   #Schema type","eaf4e5a9":"data[0][\"@graph\"][7]","8e926268":"data = extruct.extract(res.text, syntaxes=['microdata', 'opengraph', \"json-ld\", \"microformat\", \"dublincore\"])","aaa82f43":"print(data.keys())","4f275d55":"for i in data[\"microdata\"]:\n    print(i['type'])","db4491c0":"# Other Encodings","14708b9d":"JSON-LD is recommended by search engines to markup webpages. It is easy to extract.","b85f730d":"You don't need to write code for each encoding. [Extruct](https:\/\/github.com\/scrapinghub\/extruct) is a great package from [Scrapinghub](https:\/\/github.com\/scrapinghub\/) which already does this.","8e0a7ea5":"**If you google \"Sahi Paneer\",  you will see a recipe panel in the results. Each panel has a picture, rating, rating count, time, and ingredients. How did Google extract this data from different sites with different HTML? If you need to collect data from the web for your ML project, this knowledge can be useful.**","9b61d3d1":"# JSON-LD","960b8dbe":"**Most webpages nowadays have structured metadata embedded in HTML in the form of microdata, JSON-LD, or RDFa. Search Engines use it to enhance results with more specific information. [Schema.org](https:\/\/schema.org\/docs\/gs.html) provides the schema for this metadata.**\n\n**You can check what kind of metadata a page contains using https:\/\/search.google.com\/test\/rich-results.**\n\n**Google dataset search is also powered by structured metadata.**","b0ea2a6d":"# Resources\n\n* https:\/\/schema.org\/\n* https:\/\/www.w3.org\/TR\/rdfa-lite\/\n* https:\/\/developers.google.com\/search\/docs\/guides\/intro-structured-data\n"}}