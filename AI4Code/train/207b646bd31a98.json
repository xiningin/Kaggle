{"cell_type":{"c6289416":"code","0be59c4e":"code","1b489d26":"code","5c95657f":"code","bf99e635":"code","8d68280a":"code","1c2efc38":"code","725340bb":"code","ef47639d":"code","12502b4c":"code","c0303928":"code","db343851":"code","a207f180":"code","379d0330":"code","ac13dd76":"code","0f40bb48":"markdown","d49c4816":"markdown","476b53af":"markdown","5f8051aa":"markdown","a5a91acb":"markdown","77cffede":"markdown","b7647190":"markdown","dc4eed69":"markdown","7ead0f08":"markdown"},"source":{"c6289416":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","0be59c4e":"district = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv', index_col=0).dropna(how='all')\ndistrict.head()","1b489d26":"district.shape","5c95657f":"district.loc[district.state== 'New York']","bf99e635":"states = pd.read_csv('..\/input\/us-counties-covid-19-dataset\/us-counties.csv', usecols=['date', 'state', 'cases', 'deaths']).groupby(['state', 'date']).sum().sort_values(by=['state', 'date'], ascending=True)\nstates.loc['New York']","8d68280a":"allstates, _ = zip(*states.index)\nallstates = set(allstates)\nallstates","1c2efc38":"states_dic = {\n    state: states.loc[state]\n    for state in allstates\n}","725340bb":"import warnings\nwarnings.filterwarnings(\"ignore\")","ef47639d":"for state, df in states_dic.items():\n    df[['cases', 'deaths']] -= df[['cases', 'deaths']].shift(1)\n    states_dic[state] = df.dropna().rolling(7, min_periods=1).mean()","12502b4c":"product = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')\nproduct.head()","c0303928":"ny_ids = district.loc[district.state == 'New York'].index","db343851":"ny_engagement = pd.concat([pd.read_csv(f'..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/{id}.csv') for id in ny_ids], axis=0).fillna(0).groupby(['time', 'lp_id']).mean().reset_index().groupby('time').sum().drop(columns=['lp_id']).rolling(7, min_periods=1).mean()\nny_engagement = states_dic['New York'][['deaths']].join(ny_engagement, how='right').fillna(0)\nny_engagement","a207f180":"import matplotlib.pyplot as plt\nfig, ax = plt.subplots(figsize=(20, 10))\nny_engagement['engagement_index'].plot(ax=ax)\nplt.show()","379d0330":"import matplotlib.pyplot as plt\nfig, ax = plt.subplots(figsize=(20, 10))\nny_engagement[['pct_access', 'deaths']].plot(ax=ax)\nplt.show()","ac13dd76":"ny_engagement.corr()","0f40bb48":"The engagement also needs to be smoothed for week-ends.","d49c4816":"You can see that cases and deaths are cumulated, we will need to get the daily, 7-days-smoothed count.","476b53af":"### First Study : New York","5f8051aa":"# Starter Notebook ; New-York Example","a5a91acb":"Now, I'll include information on the COVID situation. As cases were only properly and extensively reported from summer 2020 (tests where not widely available before then), I will focus on deaths as an indicator of the gravity of the COVID situation.","77cffede":"In this starter notebook, I will first only work at the aggregated State level.","b7647190":"Now, we'll also focus on the elearning product at an aggregated level.","dc4eed69":"Obviously, the engagement is highly correlated with the access.","7ead0f08":"The aggregated engagement index is obviously dependent on school holidays, but also we can see the impact of the beginning of the pandemic in March."}}