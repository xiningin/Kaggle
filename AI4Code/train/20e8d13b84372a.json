{"cell_type":{"d7043b36":"code","ae852edb":"code","cb8a4e5e":"code","f13ef69a":"code","26b81d5a":"code","abfd6251":"code","222ea53a":"code","937b7919":"code","c8c5b0db":"code","4ef43118":"code","323adda0":"code","57101ea8":"code","fb02eb6c":"code","84fed85a":"code","0f59d181":"code","e7e9d88b":"code","18a0e11f":"code","d35ef499":"code","56146eb5":"code","b39ea547":"code","b73dec86":"code","f6020369":"code","977af480":"code","69293587":"code","0f35a094":"code","fd0dafe2":"code","16d839d5":"code","4b4adf99":"code","8d40b843":"code","0b54ff33":"code","7cb81169":"code","f1822f3d":"code","1917fd7f":"code","240cd55a":"code","1dd999e7":"code","856d9f30":"code","ae13a9e3":"code","c3e8b967":"code","419044d4":"code","e1d03a5c":"code","0d787472":"code","6fbaa512":"code","f0afd4b1":"code","597d1b1e":"code","0810dc49":"code","43717d29":"code","8b2ef19a":"code","860f4d22":"code","0450b250":"code","07a499cc":"code","189e1e2f":"code","30980b09":"code","3dab0976":"code","7477f012":"code","2ba1c2e4":"code","b9595fc6":"code","1702c0ab":"code","cbf058f9":"code","b4c3e2c8":"code","cbdca832":"code","b34935f8":"code","e3c75e52":"code","bfee4d0b":"code","977666e7":"code","a1d91738":"code","6963f85c":"code","ea5bf9f4":"code","a5c694c6":"code","b0e7b197":"code","b45f8e9f":"code","8c414a62":"code","49cd53fe":"code","e67c5175":"code","c6a204fa":"code","f60eae82":"code","1ff95bcc":"code","fe82e40a":"code","8f32654a":"code","aa39032a":"code","32542177":"code","e0136c3b":"code","c95f2c06":"code","351f1ae5":"code","b6792724":"code","b81d924c":"code","4da13ea2":"code","4ec95a56":"code","d2063442":"code","7398d0b2":"code","8c98c73b":"code","762cedd8":"code","05336e9b":"code","9db8d48d":"code","308e1aa9":"code","b0392aec":"code","a682a04d":"code","45376b64":"code","49bb092e":"code","707235f3":"code","2eb44cf3":"code","64aaeed9":"code","030ff4b4":"code","1544be8c":"code","2ec84e7e":"code","195f2bfb":"code","e7e8eb30":"code","d9cd1a7d":"code","31c7236d":"code","5a1475f2":"code","d9210778":"code","7d23c97f":"code","9ec5d300":"code","277748ee":"code","051a061a":"code","6ba595d7":"code","53b9ffc5":"code","62406cc6":"code","ff5ccece":"code","6b4275a5":"code","57770f6c":"code","ba6f3cfc":"code","fe1738da":"code","d02df9bc":"code","83b1161c":"code","5bdf3c1c":"code","ea3e4765":"code","ea3f714d":"code","c65c7ed3":"code","4a1ab5d3":"code","77214eb5":"code","4abc2c93":"code","87bd915c":"code","938e91cf":"code","70a78234":"code","e0938d09":"code","1f78944a":"code","07c9b631":"code","8aa5ff38":"code","cf8b373c":"code","ba0d50b1":"code","d6fcdd99":"code","29defe20":"code","ab697fcf":"code","862da5cb":"code","de865a67":"code","40f90580":"code","a276cd5e":"code","9da81a8f":"code","ca801cab":"code","48dd7a00":"code","0fd6c5fd":"markdown","70c5fb2f":"markdown","557ba069":"markdown","882978be":"markdown","1bea3509":"markdown","c0d11a31":"markdown","ebf2e492":"markdown","1cf58b7e":"markdown","0e6ecd8f":"markdown","13265c33":"markdown","5bc6ef78":"markdown","947ec7aa":"markdown","b0a6632f":"markdown","17e6e1dd":"markdown","100a2a3a":"markdown","2a57aea6":"markdown","6686b42a":"markdown","1c004d37":"markdown","cf0ee155":"markdown","e0712c07":"markdown","d77d1e9b":"markdown","71d89741":"markdown","a7b9947b":"markdown","95d9115c":"markdown","f76091e7":"markdown","c4c107e2":"markdown","4ad221ba":"markdown","64cb9a6c":"markdown","f0fed6e5":"markdown","1db05601":"markdown","afc83a3a":"markdown","fe1ca5b8":"markdown","f3a83af9":"markdown","2562b620":"markdown","88bf3b12":"markdown","91ab6f15":"markdown","39bf2aba":"markdown","67b25e95":"markdown","062be29b":"markdown","bfa0b1f6":"markdown","a7212a49":"markdown","52e1967a":"markdown","043a77cf":"markdown","4f1eac5c":"markdown","b0230a70":"markdown","3461fd24":"markdown","d2c954ff":"markdown","ced95207":"markdown","c12df386":"markdown","ed769160":"markdown","300da443":"markdown","c8e7ace8":"markdown","ca73c4d1":"markdown","9f4a8604":"markdown","5f2662ff":"markdown"},"source":{"d7043b36":"%config Completer.use_jedi = False","ae852edb":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","cb8a4e5e":"import os\nos.listdir(\"..\/input\/credit-card-customers\")","f13ef69a":"# data = pd.read_csv(\"BankChurners.csv\")\ndata = pd.read_csv(r\"..\/input\/credit-card-customers\/BankChurners.csv\")","26b81d5a":"data.shape","abfd6251":"data.head(2)","222ea53a":"data.columns","937b7919":"data.drop(['Naive_Bayes_Classifier_Attrition_Flag_Card_Category_Contacts_Count_12_mon_Dependent_count_Education_Level_Months_Inactive_12_mon_1',\n       'Naive_Bayes_Classifier_Attrition_Flag_Card_Category_Contacts_Count_12_mon_Dependent_count_Education_Level_Months_Inactive_12_mon_2'],axis = 1, inplace=True)\ndata.columns","c8c5b0db":"data.isnull().sum()","4ef43118":"data.dtypes.value_counts().plot.pie(explode=[0.1,0.1,0.1],autopct='%1.1f%%',shadow=True)\nplt.title('Dtypes of our data');","323adda0":"churn= pd.DataFrame()","57101ea8":"#unique client identifier. We'll drop it \n# churn = churn.drop(['CLIENTNUM'],axis =1)","fb02eb6c":"(data['Attrition_Flag'].value_counts()\/len(data))*100","84fed85a":"churn['Attrition_Flag'] = data['Attrition_Flag']","0f59d181":"target_map = churn['Attrition_Flag'].value_counts().to_dict()\ntarget_map","e7e9d88b":"target_map = {'Existing Customer': 0, 'Attrited Customer': 1}\nchurn['Attrition_Flag'] = churn['Attrition_Flag'].map(target_map)\nchurn['Attrition_Flag'].value_counts()","18a0e11f":"churn['Attrition_Flag'].value_counts().plot(kind = 'bar')","d35ef499":"data['Customer_Age'].describe()","56146eb5":"sns.distplot(data['Customer_Age'])","b39ea547":"churn['Customer_Age'] = data['Customer_Age']","b73dec86":"# bins = [20,30,40,50,60,70,80]\n# labels = ['20-30','30-40','40-50','50-60','60-70','80']","f6020369":"# churn['Customer_Age'] = pd.cut(churn['Customer_Age'], bins=bins, labels=labels)","977af480":"# churn['Customer_Age'].value_counts()","69293587":"# churn['Customer_Age'].value_counts().plot(kind = 'bar')","0f35a094":"(data['Gender'].value_counts()\/len(data))*100","fd0dafe2":"churn['Gender'] = data['Gender']","16d839d5":"genderMap = churn['Gender'].value_counts().to_dict()\ngenderMap","4b4adf99":"genderMap = {'F': 1, 'M': 0}","8d40b843":"churn['Gender']= churn['Gender'].map(genderMap)\nchurn['Gender'].value_counts()","0b54ff33":"churn['Gender'].value_counts().plot(kind = 'bar')","7cb81169":"data['Dependent_count'].describe()","f1822f3d":"(data['Dependent_count'].value_counts()\/len(data))*100","1917fd7f":"((data['Dependent_count'].value_counts().sort_index()\/len(data))*100).plot(kind = 'bar')","240cd55a":"churn['Dependent_count'] = data['Dependent_count']","1dd999e7":"(data['Education_Level'].value_counts()\/len(data))*100","856d9f30":"eduMap = data['Education_Level'].value_counts().to_dict()\neduMap","ae13a9e3":"eduMap = {'Graduate': 4,\n 'High School': 2,\n 'Unknown': 1,\n 'Uneducated': 0,\n 'College': 3,\n 'Post-Graduate': 5,\n 'Doctorate': 6}","c3e8b967":"churn['Education_Level'] = data['Education_Level'].map(eduMap)\nchurn['Education_Level'].value_counts()","419044d4":"(data['Marital_Status'].value_counts()\/len(data))*100","e1d03a5c":"((data['Marital_Status'].value_counts()\/len(data))*100).plot(kind='bar')","0d787472":"maritalMap= data['Marital_Status'].value_counts().to_dict()\nmaritalMap","6fbaa512":"maritalMap = {'Married': 2, 'Single': 1, 'Unknown': 0, 'Divorced':3}\nchurn['Marital_Status'] = data['Marital_Status'].map(maritalMap)\nchurn['Marital_Status'].value_counts()","f0afd4b1":"(data['Income_Category'].value_counts()\/len(data))*100","597d1b1e":"((data['Income_Category'].value_counts()\/len(data))*100).plot(kind ='bar')","0810dc49":"data['Income_Category'].value_counts().to_dict()","43717d29":"incomeMap = {'Less than $40K': 0,\n '$40K - $60K': 1,\n '$80K - $120K': 2,\n '$60K - $80K': 3,\n 'Unknown': 5,\n '$120K +': 4}\nchurn['Income_Category'] = data['Income_Category'].map(incomeMap)\nchurn['Income_Category'].value_counts()","8b2ef19a":"(data['Card_Category'].value_counts()\/len(data))*100","860f4d22":"((data['Card_Category'].value_counts()\/len(data))*100).plot(kind ='bar')","0450b250":"cardMap = data['Card_Category'].value_counts().to_dict()","07a499cc":"cardMap","189e1e2f":"cardMap = {'Blue': 1, 'Silver': 2, 'Gold': 3, 'Platinum': 4}\nchurn['Card_Category'] = data['Card_Category'].map(cardMap)","30980b09":"churn['Card_Category'].value_counts()","3dab0976":"data['Months_on_book'].describe()","7477f012":"plt.figure(figsize = (10,5))\nsns.countplot(data['Months_on_book'])\nplt.show()","2ba1c2e4":"# bins = [10,20,30,40,50,60]\n# labels = ['10-20','20-30','30-40','40-50','50-60']\n# churn['Months_on_book'] = pd.cut(data['Months_on_book'], bins=bins, labels=labels)","b9595fc6":"churn['Months_on_book'] = data['Months_on_book']","1702c0ab":"# churn['Months_on_book'].value_counts().to_dict()","cbf058f9":"# churn['Months_on_book'] = churn['Months_on_book'].map({'30-40': 2, '40-50': 3, '20-30': 1, '50-60': 4, '10-20': 0})\n# churn['Months_on_book'].value_counts()","b4c3e2c8":"(data['Total_Relationship_Count'].value_counts()\/len(data))*100","cbdca832":"((data['Total_Relationship_Count'].value_counts()\/len(data))*100).plot(kind ='bar')","b34935f8":"churn['Total_Relationship_Count'] = data['Total_Relationship_Count']","e3c75e52":"(data['Months_Inactive_12_mon'].value_counts()\/len(data))*100","bfee4d0b":"((data['Months_Inactive_12_mon'].value_counts()\/len(data))*100).plot(kind ='bar')","977666e7":"churn['Months_Inactive_12_mon'] =data['Months_Inactive_12_mon']","a1d91738":"((data['Months_on_book'].value_counts()\/len(data))*100).plot(kind ='bar')","6963f85c":"data['Months_on_book'].describe()","ea5bf9f4":"# bins = [10,20,30,40,50,60]\n# labels = [0,1,2,3,4]\n# churn['Months_on_book'] = pd.cut(data['Months_on_book'], bins=bins, labels= labels)\n# churn['Months_on_book'].value_counts()","a5c694c6":"churn['Months_on_book'] = data['Months_on_book']","b0e7b197":"((data['Contacts_Count_12_mon'].value_counts()\/len(data))*100)","b45f8e9f":"((data['Contacts_Count_12_mon'].value_counts()\/len(data))*100).plot(kind ='bar')","8c414a62":"churn['Contacts_Count_12_mon'] = data['Contacts_Count_12_mon']","49cd53fe":"data['Credit_Limit'].describe()","e67c5175":"sns.distplot(data['Credit_Limit'])","c6a204fa":"# bins = [1000,5000,10000,15000,20000,25000,30000,35000]\n# labels = [0,1,2,3,4,5,6]\n# churn['Credit_Limit'] = pd.cut(data['Credit_Limit'], bins= bins, labels=labels)\n# churn['Credit_Limit'].value_counts()","f60eae82":"churn['Credit_Limit'] = data['Credit_Limit']","1ff95bcc":"data['Total_Revolving_Bal'].describe()","fe82e40a":"sns.distplot(data['Total_Revolving_Bal'])","8f32654a":"# bins =[0,500,1000,1500,2000,2500,3000]\n# labels = [0,1,2,3,4,5]\n# churn['Total_Revolving_Bal'] = pd.cut(data['Total_Revolving_Bal'],bins=bins, labels=labels)\n# churn['Total_Revolving_Bal'].value_counts()","aa39032a":"churn['Total_Revolving_Bal'] = data['Total_Revolving_Bal']","32542177":"data['Avg_Open_To_Buy'].describe()","e0136c3b":"sns.distplot(data['Avg_Open_To_Buy'])","c95f2c06":"# bins = [0,8000,16000,24000,32000,40000]\n# labels = [0,1,2,3,4]\n# churn['Avg_Open_To_Buy'] = pd.cut(data['Avg_Open_To_Buy'], bins= bins, labels=labels)\n# churn['Avg_Open_To_Buy'].value_counts()","351f1ae5":"churn['Avg_Open_To_Buy'] = data['Avg_Open_To_Buy']","b6792724":"data['Total_Amt_Chng_Q4_Q1'].describe()","b81d924c":"sns.distplot(data['Total_Amt_Chng_Q4_Q1'])","4da13ea2":"churn['Total_Amt_Chng_Q4_Q1'] = data['Total_Amt_Chng_Q4_Q1']","4ec95a56":"data['Total_Trans_Amt'].describe()","d2063442":"sns.distplot(data['Total_Trans_Amt'])","7398d0b2":"# bins = [0,5000,10000,15000,20000]\n# labels = [0,1,2,3]\n# churn['Total_Trans_Amt'] = pd.cut(data['Total_Trans_Amt'],bins=bins, labels=labels)\n# churn['Total_Trans_Amt'].value_counts()","8c98c73b":"churn['Total_Trans_Amt'] = data['Total_Trans_Amt']","762cedd8":"data['Total_Trans_Ct'].describe()","05336e9b":"sns.distplot(data['Total_Trans_Ct'])","9db8d48d":"churn['Total_Trans_Ct'] = data['Total_Trans_Ct']","308e1aa9":"data['Total_Ct_Chng_Q4_Q1'].describe()","b0392aec":"sns.distplot(data['Total_Ct_Chng_Q4_Q1'])","a682a04d":"churn['Total_Ct_Chng_Q4_Q1'] = data['Total_Ct_Chng_Q4_Q1']","45376b64":"data['Avg_Utilization_Ratio'].describe()","49bb092e":"sns.distplot(data['Avg_Utilization_Ratio'])","707235f3":"churn['Avg_Utilization_Ratio'] = data['Avg_Utilization_Ratio'] ","2eb44cf3":"churn.head(2)","64aaeed9":"churn.shape","030ff4b4":"churn.columns","1544be8c":"churn.corr().style.background_gradient(cmap='coolwarm').set_precision(2)","2ec84e7e":"from sklearn.ensemble import ExtraTreesClassifier","195f2bfb":"x = churn.drop('Attrition_Flag', axis=1)\ny = churn['Attrition_Flag']\nprint(x.shape)\nprint(y.shape)","e7e8eb30":"model = ExtraTreesClassifier()\nmodel.fit(x,y)","d9cd1a7d":"model.feature_importances_","31c7236d":"# print(model.feature_importances_) \nfeat_importances = pd.Series(model.feature_importances_, index=x.columns)\nfeat_importances.nlargest(15).plot(kind='barh')\nplt.title('the most 10 important feature are')\nplt.show()","5a1475f2":"importantFeatures = list(feat_importances.nlargest(10).index)\nimportantFeatures","d9210778":"X = churn[['Total_Trans_Ct',  'Total_Trans_Amt',\n 'Total_Revolving_Bal',  'Total_Ct_Chng_Q4_Q1',\n 'Total_Relationship_Count',  'Avg_Utilization_Ratio',\n 'Total_Amt_Chng_Q4_Q1',  'Contacts_Count_12_mon',\n 'Months_Inactive_12_mon',  'Credit_Limit']]\nX.columns","7d23c97f":"y.value_counts()","9ec5d300":"from imblearn.over_sampling import SMOTE\nfrom sklearn.model_selection import train_test_split","277748ee":"x_train, x_test, y_train, y_test = train_test_split(X,y,test_size= 0.3, random_state=42, shuffle=True)\nprint(x_train.shape)\nprint(x_test.shape)\nprint(y_train.shape)\nprint(y_test.shape)","051a061a":"from sklearn.pipeline import Pipeline","6ba595d7":"over = SMOTE(sampling_strategy='auto', random_state=42)\n# steps = [('o',over)]\n# pipeline = Pipeline(steps= steps)","53b9ffc5":"x_train_o, y_train_o = over.fit_resample(x_train,y_train)","62406cc6":"print(x_train_o.shape)\nprint(y_train_o.shape)","ff5ccece":"y_train_o.value_counts()","6b4275a5":"from sklearn.linear_model import LogisticRegression, LogisticRegressionCV","57770f6c":"clf = LogisticRegressionCV(cv=5, random_state=0, n_jobs=-1, max_iter=100).fit(x_train_o,y_train_o)","ba6f3cfc":"clf.score(x_train_o,y_train_o)","fe1738da":"from sklearn.metrics import confusion_matrix, accuracy_score","d02df9bc":"y_pred = clf.predict(x_test)","83b1161c":"cm = confusion_matrix(y_test,y_pred)\ncm","5bdf3c1c":"accLogReg = accuracy_score(y_test,y_pred)\naccLogReg","ea3e4765":"TP = cm[0][0]\n# print(TP)\nFN = cm[1][0]\n# print(FN)\nFP = cm[0][1]\nTN = cm[1][1]\n\nrecallLogReg = TP\/(TP + FN)\nprint(\"recallLogReg: \", recallLogReg)\n\nprecisionLogReg = TP\/(TP + FP)\nprint(\"precisionLogReg: \", precisionLogReg)\n\nf1LogReg = (2*recallLogReg*precisionLogReg)\/(recallLogReg + precisionLogReg)\nprint(\"f1LogReg: \", f1LogReg)","ea3f714d":"from sklearn.neighbors import KNeighborsClassifier","c65c7ed3":"accList = []\nfor neighbours in range(1,5):\n    clf = KNeighborsClassifier(n_neighbors=neighbours, n_jobs=-1, metric='minkowski')\n    clf.fit(x_train_o, y_train_o)\n    y_pred = clf.predict(x_test)\n    acc = accuracy_score(y_test, y_pred)\n    accList.append(acc)\n    ","4a1ab5d3":"plt.plot(list(range(1,5)), accList)\nplt.show()","77214eb5":"clf = KNeighborsClassifier(n_neighbors=2, n_jobs=-1, metric='minkowski')\nclf.fit(x_train_o, y_train_o)\ny_pred = clf.predict(x_test)\naccKNN = accuracy_score(y_test, y_pred)\nprint(\"ACC KNN: \",accKNN)","4abc2c93":"cm= confusion_matrix(y_test, y_pred)\nTP = cm[0][0]\n# print(TP)\nFN = cm[1][0]\n# print(FN)\nFP = cm[0][1]\nTN = cm[1][1]\n\nrecallKNN = TP\/(TP + FN)\nprint(\"recallKNN: \", recallKNN)\n\nprecisionKNN = TP\/(TP + FP)\nprint(\"precisionKNN: \", precisionKNN)\n\nf1KNN = (2*recallKNN*precisionKNN)\/(recallKNN + precisionKNN)\nprint(\"f1KNN: \", f1KNN)","87bd915c":"from sklearn.tree import DecisionTreeClassifier","938e91cf":"clf = DecisionTreeClassifier()","70a78234":"clf.fit(x_train_o, y_train_o)","e0938d09":"y_pred = clf.predict(x_test)","1f78944a":"accDT = accuracy_score(y_test, y_pred)\ncm= confusion_matrix(y_test, y_pred)\nTP = cm[0][0]\n# print(TP)\nFN = cm[1][0]\n# print(FN)\nFP = cm[0][1]\nTN = cm[1][1]\n\nrecallDT = TP\/(TP + FN)\nprint(\"recallDT: \", recallDT)\n\nprecisionDT = TP\/(TP + FP)\nprint(\"precisionDT: \", precisionDT)\n\nf1DT = (2*recallDT*precisionDT)\/(recallDT + precisionDT)\nprint(\"f1DT: \", f1DT)\nprint(\"accDT: \", accDT)","07c9b631":"from xgboost import XGBClassifier,XGBRFClassifier","8aa5ff38":"clf = XGBClassifier()","cf8b373c":"clf.fit(x_train_o, y_train_o)","ba0d50b1":"y_pred = clf.predict(x_test)","d6fcdd99":"accXGB = accuracy_score(y_test, y_pred)\ncm= confusion_matrix(y_test, y_pred)\nTP = cm[0][0]\n# print(TP)\nFN = cm[1][0]\n# print(FN)\nFP = cm[0][1]\nTN = cm[1][1]\n\nrecallXGB = TP\/(TP + FN)\nprint(\"recallXGB: \", recallXGB)\n\nprecisionXGB = TP\/(TP + FP)\nprint(\"precisionXGB: \", precisionXGB)\n\nf1XGB = (2*recallXGB*precisionXGB)\/(recallXGB + precisionXGB)\nprint(\"f1XGB: \", f1XGB)\nprint(\"accXGB: \", accXGB)","29defe20":"clf = XGBRFClassifier()","ab697fcf":"clf.fit(x_train_o, y_train_o)","862da5cb":"y_pred = clf.predict(x_test)","de865a67":"accXGBRF = accuracy_score(y_test, y_pred)\ncm= confusion_matrix(y_test, y_pred)\nTP = cm[0][0]\n# print(TP)\nFN = cm[1][0]\n# print(FN)\nFP = cm[0][1]\nTN = cm[1][1]\n\nrecallXGBRF = TP\/(TP + FN)\nprint(\"recallXGBRF: \", recallXGBRF)\n\nprecisionXGBRF = TP\/(TP + FP)\nprint(\"precisionXGBRF: \", precisionXGBRF)\n\nf1XGBRF = (2*recallXGBRF*precisionXGBRF)\/(recallXGBRF + precisionXGBRF)\nprint(\"f1XGBRF: \", f1XGBRF)\nprint(\"accXGBRF: \", accXGBRF)","40f90580":"report= pd.DataFrame()\nreport['Model'] = ['LogReg','KNN','DTree','XGB','XGBRF']\nreport['Accuracy'] = [accLogReg, accKNN, accDT, accXGB, accXGBRF]\nreport['Recall'] = [recallLogReg, recallKNN, recallDT, recallXGB, recallXGBRF]\nreport['Precision'] = [precisionLogReg, precisionKNN, precisionDT, precisionXGB, precisionXGBRF]\nreport['F1'] = [f1LogReg, f1KNN, f1DT, f1XGB, f1XGBRF]\nreport","a276cd5e":"plt.rcParams['figure.figsize']=15,6 \nsns.set_style(\"darkgrid\")\nax = sns.barplot(x=report.Model, y=report.Accuracy, palette = \"rocket\", saturation =1.5)\nplt.xlabel(\"Classifier Models\", fontsize = 20 )\nplt.ylabel(\"% of Accuracy\", fontsize = 20)\nplt.title(\"Accuracy of different Classifier Models\", fontsize = 20)\nplt.xticks(fontsize = 12, horizontalalignment = 'center', rotation = 8)\nplt.yticks(fontsize = 13)\nfor p in ax.patches:\n    width, height = p.get_width(), p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.2%}', (x + width\/2, y + height*1.02), ha='center', fontsize = 'x-large')\nplt.show()","9da81a8f":"plt.rcParams['figure.figsize']=15,6 \nsns.set_style(\"darkgrid\")\nax = sns.barplot(x=report.Model, y=report.Recall, palette = \"rocket\", saturation =1.5)\nplt.xlabel(\"Classifier Models\", fontsize = 20 )\nplt.ylabel(\"% of Recall\", fontsize = 20)\nplt.title(\"Recall of different Classifier Models\", fontsize = 20)\nplt.xticks(fontsize = 12, horizontalalignment = 'center', rotation = 8)\nplt.yticks(fontsize = 13)\nfor p in ax.patches:\n    width, height = p.get_width(), p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.2%}', (x + width\/2, y + height*1.02), ha='center', fontsize = 'x-large')\nplt.show()","ca801cab":"plt.rcParams['figure.figsize']=15,6 \nsns.set_style(\"darkgrid\")\nax = sns.barplot(x=report.Model, y=report.Precision, palette = \"rocket\", saturation =1.5)\nplt.xlabel(\"Classifier Models\", fontsize = 20 )\nplt.ylabel(\"% of Precision\", fontsize = 20)\nplt.title(\"Precision of different Classifier Models\", fontsize = 20)\nplt.xticks(fontsize = 12, horizontalalignment = 'center', rotation = 8)\nplt.yticks(fontsize = 13)\nfor p in ax.patches:\n    width, height = p.get_width(), p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.2%}', (x + width\/2, y + height*1.02), ha='center', fontsize = 'x-large')\nplt.show()","48dd7a00":"plt.rcParams['figure.figsize']=15,6 \nsns.set_style(\"darkgrid\")\nax = sns.barplot(x=report.Model, y=report.F1, palette = \"rocket\", saturation =1.5)\nplt.xlabel(\"Classifier Models\", fontsize = 20 )\nplt.ylabel(\"% of F1\", fontsize = 20)\nplt.title(\"F1 of different Classifier Models\", fontsize = 20)\nplt.xticks(fontsize = 12, horizontalalignment = 'center', rotation = 8)\nplt.yticks(fontsize = 13)\nfor p in ax.patches:\n    width, height = p.get_width(), p.get_height()\n    x, y = p.get_xy() \n    ax.annotate(f'{height:.2%}', (x + width\/2, y + height*1.02), ha='center', fontsize = 'x-large')\nplt.show()","0fd6c5fd":"**Avg_Utilization_Ratio**","70c5fb2f":"## Data Description","557ba069":"Assuming that the cards hierarchy is \n\nPlatinum > Gold > Silver > Blue\n\nPointing that 'Blue' cards are famous among low income groups\n\nWe can put a ordinal label against them \n\n1 : lowest ranking but highest no. of users\nhigh volume, low value\n\n4 : highest ranking but lowest no. of users\nlow volume, high value","882978be":"\n\n- Improve Performance of predicting churned customers.\n\nOur top priority in this business problem is to identify customers who are getting churned. Even if we predict non-churning customers as churned, it won't harm our business. But predicting churning customers as Non-churning will do. So recall (TP\/TP+FN) need to be higher.\n\nTill now, I have managed to get a recall of 62%. Need better.    \n\n- Most Influential Factors\n\nOne thing which is clear to our businessman is that the traditional approach of choosing a credit card for a customer needs to change. He has decided to study all the other features of a user and not just income to help them choose a more suitable card for each user.\n\nThis way it will help both customers and our business\n\nHere, we need your help to determine some of the most influential factors that can lead to a customer's decision of leaving our business.\nExpected Submission\n\nWe are expecting a notebook having in-depth Exploratory Data Analysis that can help us visualize where the difference lies between churning and non-churning customers.\nEvaluation\n\nAn easy to understand approach is what appeals to a client.","1bea3509":"**Total_Trans_Amt**","c0d11a31":"Change in Transaction Count (Q4 over Q1) ","ebf2e492":"## EDA & Feature Engineering","1cf58b7e":"Most of the card holders have at least 1 dependent","0e6ecd8f":"no missing values","13265c33":"## Model Reports","5bc6ef78":"## **Challanges**","947ec7aa":"**Total_Trans_Ct**","b0a6632f":"a large no. of customers are holding at least 1+ services with the account.\nIt could be as : Savings A\/C + Card or Savings A\/C + 0 Cards","17e6e1dd":"## DecisionTree classifier","100a2a3a":"## Feature Selection","2a57aea6":"a large no. of customers remain inactive for 1-3 months in an year.\nNot sure if inactivity is counted on streak or overall basis","6686b42a":"'Unknown' here refers that either the info is missing or not captured","1c004d37":"scope of improvements:\n- replacing categorical variables WOE(weight of evidence)\n- feature scaling (standard scaler)\n- hyperparameter tuning ","cf0ee155":"'Unknown' here refers that either the info is missing or not captured","e0712c07":"## Logistic Regression","d77d1e9b":"**Note**:  PLEASE IGNORE THE LAST 2 COLUMNS (NAIVE BAYES CLAS\u2026). I SUGGEST TO RATHER DELETE IT BEFORE DOING ANYTHING**","71d89741":"**Months_Inactive_12_mon** : No. of months inactive in the last 12 months","a7b9947b":"I guess it holds the number of times the bank contacted the customer and\/or viceversa. There doesn't seem to have any relationship with other fields (e.g. contact clients that left the bank, customers with revolving balance, etc). I guess it has to do with ad campaigns.","95d9115c":"### % distribution of Target variable","f76091e7":"**Total_Ct_Chng_Q4_Q1**","c4c107e2":"**Total_Revolving_Bal**","4ad221ba":"## **Tasks:**","64cb9a6c":"### Contacts_count_12_month","f0fed6e5":"## Features Correlation","1db05601":"Most of the people are utilising a small amount of their available credit line. They are acting conservative.","afc83a3a":"Total Transaction Count (Last 12 months)","fe1ca5b8":"**Avg_Open_To_Buy**","f3a83af9":"### Ordinal Label encoding : Card_Category","2562b620":"## XGBoost","88bf3b12":"dataset is highly imbalanced","91ab6f15":"**Total_Amt_Chng_Q4_Q1**","39bf2aba":"**CLIENTNUM** :Client number. Unique identifier for the customer holding the account\n\n**Attrition_Flag** : Internal event (customer activity) variable - if the account is closed then 1 else 0\n\n**Customer_Age** : Demographic variable - Customer's Age in Years\n\n**Gender** : Demographic variable - M=Male, F=Female\n\n**Dependent_count** :Demographic variable - Number of dependents\n\n**Education_Level** : Demographic variable - Educational Qualification of the account holder (example: high school, college graduate, etc.)\n\n**Marital_Status** : Demographic variable - Married, Single, Divorced, Unknown\n\n**Income_Category** : Demographic variable - Annual Income Category of the account holder (< $40K, $40K - 60K, $60K - $80K, $80K-$120K, > $120K, Unknown)\n\n**Card_Category** : Product Variable - Type of Card (Blue, Silver, Gold, Platinum)\n\n**Months_on_book** : Period of relationship with bank\n\n","67b25e95":"\n\nNow, this dataset consists of 10,000 customers mentioning their age, salary, marital_status, credit card limit, credit card category, etc. There are nearly 18 features.\n\nWe have only 16.07% of customers who have churned. Thus, it's a bit difficult to train our model to predict churning customers. ","062be29b":"## Balancing act","bfa0b1f6":"Total Transaction Amount (Last 12 months)","a7212a49":"Age is a discrete variable with many labels. Need to apply 'age-binning' to reduce dimensionality","52e1967a":"## KNN","043a77cf":"it is impressive that the co. has such long serving customers but the concentration at 36 looks suspicious","4f1eac5c":"a large majority of its customers are banking with them for atleast 20 years","b0230a70":"**Total_Relationship_Count** : total number of products held by the customers (cards, accounts, etc.)","3461fd24":"## XGBRandomForest","d2c954ff":"Change in Transaction Amount (Q4 over Q1)","ced95207":"### Binary Coding for 'Attrition_Flag'","c12df386":"Open to Buy\/extend Credit Line (Average of last 12 months)","ed769160":"### Binary Coded Gender","300da443":"### Environment Setup","c8e7ace8":"### Age Binning ","ca73c4d1":"\nA manager at the bank is disturbed with more and more customers leaving their credit card services. They would really appreciate if one could predict for them who is gonna get churned so they can proactively go to the customer to provide them better services and turn customers' decisions in the opposite direction.","9f4a8604":"Most of the customers lie in the lowest income groups, suggesting that the company has a good reputation among lower income groups","5f2662ff":"## **Problem Statement**"}}