{"cell_type":{"5b07034b":"code","79eb40bb":"code","eb86e5d0":"code","e07f912f":"code","37f33f23":"code","6d933c1a":"code","66f05b7e":"code","9f0c1201":"code","a00a544f":"code","de36bb01":"code","3ef5e020":"code","cff620e2":"code","8f79282a":"code","34d51616":"code","0f678635":"code","5a46bbdb":"code","03037c7a":"code","e1d8c064":"code","8d71cc5c":"code","eabeabe2":"code","441b8897":"code","d091891c":"code","7815e112":"code","6b4b616c":"code","1f575d8a":"code","7417cf97":"code","5036c314":"code","30d27d14":"code","166d5710":"code","9687e5cf":"code","b2299069":"code","b257607c":"code","5a20264b":"code","a19ce9aa":"code","4db0c58b":"code","5aae576b":"code","49f3c75f":"code","e3e0a47b":"code","160219f1":"code","ab876c45":"markdown","f458a738":"markdown","e37abf23":"markdown","63e7dede":"markdown","4ca517ba":"markdown","bc4dc91e":"markdown","2afff98c":"markdown","fb38c962":"markdown","1b0cacff":"markdown","d09a8aba":"markdown","25fe1515":"markdown","66dbb248":"markdown","08e3c65e":"markdown","eafc8a61":"markdown","9099afa6":"markdown","ef9a02db":"markdown","b3886cf5":"markdown","f0c298b7":"markdown","85b4ab5d":"markdown","762cb8d9":"markdown"},"source":{"5b07034b":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom IPython.display import Image\n%matplotlib inline","79eb40bb":"data = pd.read_csv('..\/input\/suicide-data\/master.csv')","eb86e5d0":"data[(data.country == 'Albania')&(data.year==1987)].sort_values('age')","e07f912f":"data.age = data.age.replace('5-14 years','05-14 years')","37f33f23":"data[(data.country == 'Albania')&(data.year==1987)].sort_values('age')","6d933c1a":"Image(\"..\/input\/suicide-table\/weights.png\")","66f05b7e":"data.loc[data['age']=='05-14 years',\"weights\"] = 0.1729\ndata.loc[data['age']=='15-24 years',\"weights\"] = 0.1669\ndata.loc[data['age']=='25-34 years',\"weights\"] = 0.1554\ndata.loc[data['age']=='35-54 years',\"weights\"] = 0.2515\ndata.loc[data['age']=='55-74 years',\"weights\"] = 0.1344\ndata.loc[data['age']=='75+ years',\"weights\"] = 0.03065\ndata.head()","9f0c1201":"data[data['weights'].isnull()]","a00a544f":"data['suicides\/100k pop (adjusted)']=data['suicides\/100k pop']*data['weights']\ndata.head()","de36bb01":"data[(data['country']=='Lithuania')&(data['year']==2016)&(data['sex']=='male')]['suicides\/100k pop (adjusted)'] ","3ef5e020":"data[(data['country']=='Lithuania')&(data['year']==2016)&(data['sex']=='male')]['suicides\/100k pop (adjusted)'].sum()","cff620e2":"data[(data['country']=='Lithuania')&(data['year']==2016)&(data['sex']=='female')]['suicides\/100k pop (adjusted)'].sum()","8f79282a":"data_group = data.groupby(['country', 'year', 'sex'], as_index=False)","34d51616":"data_group","0f678635":"data_group.get_group(('Argentina', 2015, 'male'))","5a46bbdb":"data_agg = data_group.agg({'suicides\/100k pop (adjusted)':'sum'})\ndata_agg.head(10)","03037c7a":"type(data_agg)","e1d8c064":"data_group_1 = data_agg.groupby(['country', 'year'], as_index=False)","8d71cc5c":"data_agg_1 = data_group_1.agg({'suicides\/100k pop (adjusted)': 'sum'})\ndata_agg_1.head(10)","eabeabe2":"year_spec = 2015\n# sex_spec = 'male' \n# sex_spec = 'female' \nsex_spec = 'both male & female'  ","441b8897":"if sex_spec in ('male', 'female'):\n    data_specific = data_agg[(data_agg.year==year_spec)&(data_agg.sex==sex_spec)].sort_values('suicides\/100k pop (adjusted)', ascending=False)    \nelse:\n    data_specific = data_agg_1[data_agg_1.year==year_spec].sort_values('suicides\/100k pop (adjusted)', ascending=False)","d091891c":"data_specific_20 = data_specific.head(20)\ndata_specific_20","7815e112":"plt.figure(figsize=(16,11))\nplt.xticks(rotation=90)\nplt.yticks(np.arange(0,70,5))\nplt.title('Top 20 rank of age standardized '+sex_spec+' suicide rate per 100,000 people in '+str(year_spec))\nsns.barplot(x='country', y='suicides\/100k pop (adjusted)', data=data_specific_20)\nsns.set(font_scale=3)","6b4b616c":"data_group_2 = data.groupby(['country', 'year', 'sex', 'gdp_per_capita ($)'], as_index=False)","1f575d8a":"data_agg_2 = data_group_2.agg({'suicides\/100k pop (adjusted)':'sum'})\ndata_agg_2.head(10)","7417cf97":"data_group_3 = data.groupby(['country', 'year', 'gdp_per_capita ($)'], as_index=False)","5036c314":"data_agg_3 = data_group_3.agg({'suicides\/100k pop (adjusted)':'sum'})\ndata_agg_3.head(10)","30d27d14":"countries =['Lithuania', 'Republic of Korea', 'Russian Federation', 'United States', 'Japan', \n            'Finland', 'Australia','Iceland', 'Austria']\ncountry = countries[0]","166d5710":"# sex_spec = 'Male' \n# sex_spec = 'Female' \nsex_spec = 'Both Male & Female' \n\nif sex_spec in ('Male', 'Female'):\n    data_specific = data_agg_2[(data_agg_2.country==country) & (data_agg_2.sex==sex_spec.lower())]\nelse:\n    data_specific = data_agg_3[data_agg_3.country==country]","9687e5cf":"sns.set(style='white')","b2299069":"sns.lmplot(x='gdp_per_capita ($)', y='suicides\/100k pop (adjusted)', data=data_specific, hue='year',\n           fit_reg=False, palette='icefire', height=6, aspect=9\/6)\nplt.title('Suicide Rate Per 100k Population as a Function of GDP per capita for '\n          +sex_spec+' in '+country)","b257607c":"Image(\"..\/input\/gdppics\/Korea.png\")","5a20264b":"Image(\"..\/input\/gdppics\/Russia.png\")","a19ce9aa":"Image(\"..\/input\/gdppics\/Japan.png\")","4db0c58b":"Image(\"..\/input\/gdppics\/USA.png\")","5aae576b":"Image(\"..\/input\/gdppics\/Finland.png\")","49f3c75f":"Image(\"..\/input\/gdppics\/Australia.png\")","e3e0a47b":"Image(\"..\/input\/gdppics\/Iceland.png\")","160219f1":"Image(\"..\/input\/gdppics\/Austria.png\")","ab876c45":"#### Create 'data_group_1' with type 'DataFrameGroupBy' for summing data from both male and female ","f458a738":"#### Check the same for female","e37abf23":"#### Create 'data_agg' of type 'DataFrame' with sum of 'suicides\/100k pop (adjusted)' from all age groups","63e7dede":"#### Specify a country ","4ca517ba":"#### Now it sorts correctly!\n#### To facilitate comparative analysis the data is standardized using the weights in the table \"WHO World Standard Population Distribution (%), based on world average population between 2000-2025\", which is available in the link https:\/\/www.who.int\/healthinfo\/paper31.pdf and is shown in the Table below.","bc4dc91e":"#### Input year (1985-2016) and gender (male, female, or both male & female) of the plot","2afff98c":"#### Check empty cells in column \"weights\"","fb38c962":"#### It can be seen from above that \"5-14 years\" does not sort correctly, so replace it with \"05-14 years\"","1b0cacff":"#### Create 'data_agg_2' (add 'gdp_per_capita') of type 'DataFrame' with sum of 'suicides\/100k pop (adjusted)' from all age groups","d09a8aba":"#### Add another column \"'suicides\/100k pop (adjusted)\" for age standardized rates","25fe1515":"#### Make the scatter plot ","66dbb248":"#### The plots below show the results of 8 additional countries: Republic of Korea, Russian Federation, United States, Japan, Finland, Australia, Iceland, and Austria in an order of descending suicide rate in 2015. The only countries that do not show a clear sign of declining suicide rate when gdp_per_capta increases are Korea, Japan, and USA. Korea shows a clear suicide rate increase and USA a bathtub curve while the trend of Japan seems unclear.  ","08e3c65e":"### The code below plot age-standardized suicides per 100k pop rate as a function of gdp_per_capita in all year of a country for either male, female, or both","eafc8a61":"#### Specify sex type","9099afa6":"#### Check the male standardized rates for Lithuania in 2016 ","ef9a02db":"#### Make the final plot","b3886cf5":"#### Use DataFrame \"data_agg\" for either male or female and \"data_agg_1\" for both male and female","f0c298b7":"### Provide code to:\n### (1) Plot top 20 rank countries in any year between 1985 to 2016 with age-standardized suicide rate for either male, female, or both.\n### (2) Plot age-standardized suicide rates as a function of gdp_per_capita in all year of a country for either male, female, or both","85b4ab5d":"#### Create 'data_group' with type 'DataFrameGroupBy' for further aggregation ","762cb8d9":"#### Create 'data_agg_3' (remove 'sex') of type 'DataFrame' with sum of 'suicides\/100k pop (adjusted)' from all age groups with both sexes "}}