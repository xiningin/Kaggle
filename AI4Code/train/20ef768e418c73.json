{"cell_type":{"e6d0a55e":"code","780281c9":"code","bf4d0173":"code","5a0de4ea":"code","3f732c06":"code","a381c7d5":"code","e2fa6273":"code","7d477f77":"code","bc5703fc":"code","c7fde494":"code","5e1acc75":"code","d4b9025b":"code","d9a4cb1a":"code","d18b8dcc":"code","5bc4f5d7":"code","11279874":"code","1593cc53":"code","50080adf":"code","134dced6":"code","91e4db6c":"code","a257d38c":"code","99e0f78c":"code","58484fa7":"code","be5cca5d":"code","eeff9a7f":"code","892b306e":"code","4c5d5d5b":"code","d77fdf01":"markdown","370f2408":"markdown","ae83fced":"markdown","7778a640":"markdown","09d528f5":"markdown","22d4f9dc":"markdown","03de8ec8":"markdown","45c495c4":"markdown","124123d8":"markdown","96be8415":"markdown","fee3d4fc":"markdown","b9686789":"markdown","3eb694c6":"markdown","d97f8d87":"markdown","4cc39041":"markdown","ab3ce9bb":"markdown","7dbc6b52":"markdown","53502464":"markdown","334b0075":"markdown","882f65b3":"markdown","90b73fcf":"markdown","d2c51dd3":"markdown","6ed69b52":"markdown","fde46979":"markdown","ce25b1d5":"markdown","ed151c8b":"markdown","5ea621b3":"markdown","fab453e3":"markdown","7787309d":"markdown","b4d325b2":"markdown","e372aa3d":"markdown","7586808f":"markdown","3e76ac4d":"markdown","8f2870c6":"markdown","dba706e3":"markdown","0eb80644":"markdown","a4bde9cb":"markdown","64a3a5e2":"markdown","2f520456":"markdown"},"source":{"e6d0a55e":"# Import Libraries.\n\nfrom datetime import datetime\nimport numpy as np \nimport pandas as pd \nfrom matplotlib import pyplot as plt\n%matplotlib inline\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport seaborn as sns\nplt.style.use('seaborn-poster')\nimport functions as func\nimport warnings\nwarnings.filterwarnings('ignore')","780281c9":"# Load Bitstamp data as a DataFrame df.\n\ndf = pd.read_csv(\"..\/input\/bitcoin-historical-data\/bitstampUSD_1-min_data_2012-01-01_to_2019-08-12.csv\")","bf4d0173":"# Check to see if df loaded properly.\n\nprint(df.shape)\ndf.head()","5a0de4ea":"# Check index dtype and column dtypes, non-null values and memory usage.\n\ndf.info()","3f732c06":"# Drop misprint low price.\n\ndf.drop(df[df['Low'] == df['Low'].min()].index, inplace=True)","a381c7d5":"# Encode the date.\n\ndf['date'] = pd.to_datetime(df['Timestamp'], unit='s').dt.date","e2fa6273":"# Create DataFrames grouped by date and average close price.\n\ndaily_close_12 = df.groupby('date').Close.mean().to_frame()\ndaily_close_26 = df.groupby('date').Close.mean().to_frame()\ndaily_close = df.groupby('date').Close.mean().to_frame()\ndaily_close_50 = df.groupby('date').Close.mean().to_frame()\ndaily_close_200 = df.groupby('date').Close.mean().to_frame()","7d477f77":"# Make exponential moving averages for 12, 26, 50, and 200-day prices. \n\ndaily_close_12['12_EMA'] = daily_close_12.ewm(12).mean()\ndaily_close_26['26_EMA'] = daily_close_26.ewm(26).mean()\ndaily_close_50['50_EMA'] = daily_close_50.ewm(50).mean()\ndaily_close_200['200_EMA'] = daily_close_200.ewm(200).mean()","bc5703fc":"# Reset the index for each DataFrame.\n\ndaily_close.reset_index(inplace=True)\ndaily_close_12.reset_index(inplace=True)\ndaily_close_26.reset_index(inplace=True)\ndaily_close_50.reset_index(inplace=True)\ndaily_close_200.reset_index(inplace=True)","c7fde494":"# Descriptive statistics of df.\n\npd.set_option('float_format', '{:f}'.format)\ndf.describe()","5e1acc75":"# All time low price.\n\nATL_price = df[df['Low'] == df['Low'].min()]\nATL_price","d4b9025b":"# All time high price.\n\nATH_price = df[df['High'] == df['High'].max()]\nATH_price","d9a4cb1a":"# Plot df with date and close price. \n\nplt.figure(figsize=(18, 10))\nplt.plot(df['date'], df['Close'])\nplt.title(\"BTC\/USD Daily Line Chart\")\nplt.xlabel(\"Years\")\nplt.ylabel(\"Price (USD)\")\nplt.grid()\nplt.show()","d18b8dcc":"# Plot the 50-day EMA and 200-day EMA over actual prices.\n\nplt.figure(figsize=(15, 10))\nplt.plot(daily_close['date'], daily_close['Close'])\nplt.plot(daily_close_50['date'], daily_close_50['50_EMA'], \\\n         label='50-Day EMA')\nplt.plot(daily_close_200['date'], daily_close_200['200_EMA'], \\\n         label='200-Day EMA')\nplt.title(\"BTC\/USD 50-Day and 200-Day EMA Chart\")\nplt.xlabel(\"Years\")\nplt.ylabel(\"Price (USD)\")\nplt.grid()\nplt.legend()\nplt.show()","5bc4f5d7":"# Plot the 50-day EMA and 200-day EMA over actual prices.\n\nfig_1 = go.Figure()\nfig_1.add_trace(go.Scatter(\n                x=daily_close['date'],\n                y=daily_close['Close'],\n                name=\"Close\",\n                line_color='blue'))\n\nfig_1.add_trace(go.Scatter(\n                x=daily_close_50['date'],\n                y=daily_close_50['50_EMA'],\n                name=\"50-Day EMA\",\n                line_color='orange'))\n\nfig_1.add_trace(go.Scatter(\n                x=daily_close_200['date'],\n                y=daily_close_200['200_EMA'],\n                name=\"200-Day EMA\",\n                line_color='green'))\n\nfig_1.update_layout(\n    title=go.layout.Title(\n        text=\"BTC\/USD 50-Day and 200-Day EMA Chart\",\n        xref=\"paper\",\n        x=0\n    ),\n    xaxis=go.layout.XAxis(\n        title=go.layout.xaxis.Title(\n            text=\"Time\",\n            font=dict(\n                family=\"Courier New, monospace\",\n                size=18,\n                color=\"#7f7f7f\"\n            )\n        )\n    ),\n    yaxis=go.layout.YAxis(\n        title=go.layout.yaxis.Title(\n            text=\"Price\",\n            font=dict(\n                family=\"Courier New, monospace\",\n                size=18,\n                color=\"#7f7f7f\"\n            )\n        )\n    )\n)\n\nfig_1.update_layout(xaxis_range=['2012-01-01','2019-08-12'])\n\nfig_1.show()","11279874":"# Plot the 12-day EMA and 26-day EMA over actual prices.\n\nfig_2 = go.Figure()\nfig_2.add_trace(go.Scatter(\n                x=daily_close['date'],\n                y=daily_close['Close'],\n                name=\"Close\",\n                line_color='blue'))\n\nfig_2.add_trace(go.Scatter(\n                x=daily_close_12['date'],\n                y=daily_close_12['12_EMA'],\n                name=\"12-Day EMA\",\n                line_color='orange'))\n\nfig_2.add_trace(go.Scatter(\n                x=daily_close_26['date'],\n                y=daily_close_26['26_EMA'],\n                name=\"26-Day EMA\",\n                line_color='green'))\n\nfig_2.update_layout(\n    title=go.layout.Title(\n        text=\"BTC\/USD 12-Day and 26-Day EMA Chart\",\n        xref=\"paper\",\n        x=0\n    ),\n    xaxis=go.layout.XAxis(\n        title=go.layout.xaxis.Title(\n            text=\"Time\",\n            font=dict(\n                family=\"Courier New, monospace\",\n                size=18,\n                color=\"#7f7f7f\"\n            )\n        )\n    ),\n    yaxis=go.layout.YAxis(\n        title=go.layout.yaxis.Title(\n            text=\"Price\",\n            font=dict(\n                family=\"Courier New, monospace\",\n                size=18,\n                color=\"#7f7f7f\"\n            )\n        )\n    )\n)\n\nfig_2.update_layout(xaxis_range=['2012-01-01','2019-08-12'])\n\nfig_2.show()","1593cc53":"# Create a new DataFrame cross to show when 50 day EMA is greater than the 200 \n# day EMA.\n\nlong_term = pd.merge(daily_close_50, daily_close_200, how='left')\nlong_term['golden'] = long_term['50_EMA'] > long_term['200_EMA']\nlong_term['golden'] = long_term.golden.astype('int')\nlong_term.head()","50080adf":"# Long term cross over dates and prices.\n\nfunc.golden_cross_model(long_term)","134dced6":"# Create variables for time of each bull market.\n\nfirst_bull_market_length = func.golden_cross_model(long_term)[1][0] \\\n- func.golden_cross_model(long_term)[0][0]\nsecond_bull_market_length = func.golden_cross_model(long_term)[3][0] \\\n- func.golden_cross_model(long_term)[2][0]\nthird_bull_market_length = func.golden_cross_model(long_term)[5][0] \\\n- func.golden_cross_model(long_term)[4][0]\nfourth_bull_market_start = func.golden_cross_model(long_term)[6][0]","91e4db6c":"# Create variables for USD value gain in each bull market.\n\nfirst_bull_market_profit = func.golden_cross_model(long_term)[1][1] \\\n- func.golden_cross_model(long_term)[0][1]\nsecond_bull_market_profit = func.golden_cross_model(long_term)[3][1] \\\n- func.golden_cross_model(long_term)[2][1]\nthird_bull_market_profit = func.golden_cross_model(long_term)[5][1] \\\n- func.golden_cross_model(long_term)[4][1]\nfourth_bull_market_price = func.golden_cross_model(long_term)[6][1]","a257d38c":"# Print bull market length and USD profits.\n\nprint(f\"First Bull Market Length: {first_bull_market_length}\")\nprint(f\"Start Date: {func.golden_cross_model(long_term)[0][0]}\")\nprint(f\"End Date: {func.golden_cross_model(long_term)[1][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[0][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[1][1])}\")\nprint(f\"Profit: {'${:.2f}'.format(first_bull_market_profit)}\")\nprint(\"--------------------------------------------\")\nprint(f\"Second Bull Market Length: {second_bull_market_length}\")\nprint(f\"Start Date: {func.golden_cross_model(long_term)[2][0]}\")\nprint(f\"End Date: {func.golden_cross_model(long_term)[3][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[2][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[3][1])}\")\nprint(f\"Profit: {'${:.2f}'.format(second_bull_market_profit)}\")\nprint(\"--------------------------------------------\")\nprint(f\"Third Bull Market Length: {third_bull_market_length}\")\nprint(f\"Start Date: {func.golden_cross_model(long_term)[4][0]}\")\nprint(f\"End Date: {func.golden_cross_model(long_term)[5][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[4][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(func.golden_cross_model(long_term)[5][1])}\")\nprint(f\"Profit: {'${:.2f}'.format(third_bull_market_profit)}\")\nprint(\"--------------------------------------------\")\nprint(f\"Fourth Bull Market Start: {fourth_bull_market_start}\")\nprint(f\"Buy Price: {'${:.2f}'.format(fourth_bull_market_price)}\")","99e0f78c":"# Create a new DataFrame cross to show when 12 day EMA is greater than the 26 \n# day EMA.\n\nshort_term = pd.merge(daily_close_12, daily_close_26, how='left')\nshort_term['golden'] = short_term['12_EMA'] > short_term['26_EMA']\nshort_term['golden'] = short_term.golden.astype('int')\nshort_term.head()","58484fa7":"# Short term crossover dates and prices.\n\nfunc.golden_cross_model(short_term)","be5cca5d":"# Create a short term crossover segment. \n\nshort_term_segment = func.golden_cross_model(short_term)[18:]","eeff9a7f":"# Create variables for time of each short term crossover.\n\nfirst_crossover_bullish_length = short_term_segment[1][0] \\\n- short_term_segment[0][0]\nsecond_crossover_bearish_length = short_term_segment[3][0] \\\n- short_term_segment[2][0]\nthird_crossover_bearish_length = short_term_segment[5][0] \\\n- short_term_segment[4][0]\nfourth_crossover_bullish_start = short_term_segment[6][0]","892b306e":"# Create variables for USD value gain or loss in each short term crossover.\n\nfirst_crossover_bullish_pnl = short_term_segment[1][1] \\\n- short_term_segment[0][1]\nsecond_crossover_bearish_pnl = short_term_segment[3][1] \\\n- short_term_segment[2][1]\nthird_crossover_bearish_pnl = short_term_segment[5][1] \\\n- short_term_segment[4][1]\nfourth_crossover_bullish_price = short_term_segment[6][1]","4c5d5d5b":"# Print short term crossover length and USD profits\/losses.\n\nprint(f\"First Short Term Crossover Length: {first_crossover_bullish_length}\")\nprint(f\"Start Date: {short_term_segment[0][0]}\")\nprint(f\"End Date: {short_term_segment[1][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(short_term_segment[0][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(short_term_segment[1][1])}\")\nprint(f\"{func.PNL(first_crossover_bullish_pnl)}: {'${:.2f}'.format(first_crossover_bullish_pnl)}\")\nprint(\"----------------------------------------------------\")\nprint(f\"Second Short Term Crossover Length: {second_crossover_bearish_length}\")\nprint(f\"Start Date: {short_term_segment[2][0]}\")\nprint(f\"End Date: {short_term_segment[3][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(short_term_segment[2][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(short_term_segment[3][1])}\")\nprint(f\"{func.PNL(second_crossover_bearish_pnl)}: {'${:.2f}'.format(second_crossover_bearish_pnl)}\")\nprint(\"---------------------------------------------------\")\nprint(f\"Third Short Term Crossover Length: {third_crossover_bearish_length}\")\nprint(f\"Start Date: {short_term_segment[4][0]}\")\nprint(f\"End Date: {short_term_segment[5][0]}\")\nprint(f\"Buy Price: {'${:.2f}'.format(short_term_segment[4][1])}\")\nprint(f\"Sell Price: {'${:.2f}'.format(short_term_segment[5][1])}\")\nprint(f\"{func.PNL(third_crossover_bearish_pnl)}: {'${:.2f}'.format(third_crossover_bearish_pnl)}\")\nprint(\"---------------------------------------------------\")\nprint(f\"Fourth Short Term Crossover Start: {fourth_crossover_bullish_start}\")\nprint(f\"Buy Price: {'${:.2f}'.format(fourth_crossover_bullish_price)}\")","d77fdf01":"### Profit and Loss Differential Variables","370f2408":"# Bitcoin EMA Crossover Trading Strategy","ae83fced":"### Context","7778a640":"### 50-Day EMA and 200-Day EMA Crossover Dates and Prices","09d528f5":"### 12-Day EMA and 26-Day EMA Crossover Dates and Prices","22d4f9dc":"### Kaggle Link","03de8ec8":"### Inspect Data","45c495c4":"## Model","124123d8":"## Introduction","96be8415":"### Merge 12-Day EMA and 26-Day EMA","fee3d4fc":"### Date Differential Variables","b9686789":"### 12-Day EMA and 26-Day EMA Crossover Dates and Prices Segment","3eb694c6":"### All-Time Highs (ATHs) and All-Time Lows (ATLs)","d97f8d87":"### Profit Differential Variables","4cc39041":"### Execution Strategy","ab3ce9bb":"https:\/\/www.kaggle.com\/mczielinski\/bitcoin-historical-data\/data","7dbc6b52":"### Merge 50-Day EMA and 200-Day EMA","53502464":"### Descriptive Statistics","334b0075":"Blockchain technology, first implemented by Satoshi Nakamoto in 2009 as a core component of Bitcoin, is a distributed, public ledger recording transactions.  Its usage allows secure peer-to-peer communication by linking blocks containing hash pointers to a previous block, a timestamp, and transaction data.  Bitcoin is a decentralized digital currency (cryptocurrency) which leverages the Blockchain to store transactions in a distributed manner in order to mitigate against flaws in the financial industry.  The motivation behind this project is to help those who have an interest in trading Bitcoin but perhaps are detoured by its inherent volatility by providing some predictive analytics using an exponential moving average (EMA) crossover trading strategy.","882f65b3":"### Date Format","90b73fcf":"### Import Libraries","d2c51dd3":"## Explore","6ed69b52":"### Dynamic BTC\/USD 50-Day and 200-Day EMA Chart","fde46979":"### Long Term EMA (Golden Cross) Model","ce25b1d5":"### Short Term EMA Model","ed151c8b":"### Date Differential Variables","5ea621b3":"### Static Historical Daily Price Chart","fab453e3":"### Drop Misprint","7787309d":"### Static BTC\/USD 50-Day and 200-Day EMA Chart","b4d325b2":"### Data Preprocess","e372aa3d":"This data set comes from Kaggle and features Bitstamp, a bitcoin exchange based in Luxembourg.  The time period of this data set is from January 1, 2012 to August 12, 2019, with minute to minute updates of OHLC (Open, High, Low, Close), Volume in BTC and indicated currency, and weighted bitcoin price.  Timestamps are in Unix time.  Timestamps without any trades or activity have their data fields forward filled from the last valid time period.  If a timestamp is missing, or if there are jumps, this may be because the exchange (or its API) was down, the exchange (or its API) did not exist, or some other unforseen technical error in data reporting or gathering.","7586808f":"### Dynamic BTC\/USD 12-Day and 26-Day EMA Chart","3e76ac4d":"### Content","8f2870c6":"## Scrub","dba706e3":"### Execution Strategy","0eb80644":"## Obtain","a4bde9cb":"### Column Information","64a3a5e2":"### Load Data","2f520456":"- Timestamp\n- Open\n- High\n- Low\n- Close\n- Volume_(BTC)\n- Volume_(Currency)\n- Weighted_Price"}}