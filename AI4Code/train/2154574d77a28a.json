{"cell_type":{"c60207b0":"code","71b5924b":"code","12735dba":"code","28b87254":"code","0b3072a7":"code","2e7fccd5":"code","d5a706c2":"code","857f9176":"code","c3724bf5":"code","893370e1":"code","22d24bef":"code","a824f58b":"code","c03a3321":"code","f9a49076":"code","09af2757":"code","a35a2244":"code","654e38c4":"code","53043c34":"code","567af063":"code","b8c1a378":"code","cfac2b3c":"code","8cc591ac":"code","4356bd4d":"code","53e718d3":"code","d4f2c92b":"code","4a871366":"code","91c57711":"code","6b86907c":"code","40b74ce6":"code","06406c36":"code","ee7f7e46":"code","603143b5":"code","487fc703":"code","96265d5c":"code","ee5037eb":"code","919fef2d":"code","868acfe3":"code","c5075512":"code","7097a372":"code","1d566584":"code","58b5c36a":"code","06013dfa":"code","6417793e":"markdown","a7c3e901":"markdown","74939fcd":"markdown","87a6de9e":"markdown","8742aaad":"markdown","26cb901a":"markdown","1b8545a7":"markdown","751b5db9":"markdown","14e98f65":"markdown","3f433f21":"markdown","2e0163fd":"markdown","9d4ec792":"markdown","592210d6":"markdown","40d8eb65":"markdown","97eaac09":"markdown","2ab2472e":"markdown","1d8e9ebe":"markdown","b3ee30a5":"markdown","7b407438":"markdown","a4635996":"markdown","6279b3da":"markdown","d5b577dd":"markdown","26be9c60":"markdown","7485c644":"markdown","6374259f":"markdown","d53ce81f":"markdown","ccad9452":"markdown","3818c303":"markdown","05025d56":"markdown","52e35c75":"markdown","834cbfce":"markdown","52354743":"markdown","0b24d4cd":"markdown","c69119b1":"markdown","3056a509":"markdown","763f46bb":"markdown","1db00c27":"markdown","bb5763d9":"markdown","47892878":"markdown","ccbb8f98":"markdown","77c95a0a":"markdown","8fc84057":"markdown","c6a029fd":"markdown","baaad920":"markdown","582058ef":"markdown","081c33af":"markdown","712de5cc":"markdown","73b9142e":"markdown","4c4bec8a":"markdown","d33db428":"markdown","08072191":"markdown","079e804e":"markdown","464ba4f0":"markdown","c9639a16":"markdown","b7605ed3":"markdown","7d9f40c4":"markdown","f8f25371":"markdown","34c6387c":"markdown","4b91378d":"markdown","512c92bd":"markdown","96cd2135":"markdown","701e0a00":"markdown","9d32fab3":"markdown","c16835e0":"markdown","0c6efea7":"markdown","4ae07f65":"markdown","05357bc0":"markdown","1b2c6026":"markdown","cd4c2319":"markdown","728b9605":"markdown"},"source":{"c60207b0":"import numpy as np\nimport pandas as pd\nimport holoviews as hv\nfrom holoviews import opts\nhv.extension('bokeh')\nfrom matplotlib import pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import StandardScaler, LabelEncoder\nimport os\nfrom fbprophet import Prophet\nfrom fbprophet.plot import add_changepoints_to_plot","71b5924b":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","12735dba":"df = pd.read_csv(\"\/kaggle\/input\/temperature-readings-iot-devices\/IOT-temp.csv\")\nprint(f'IOT-temp.csv : {df.shape}')\ndf.head(3)","28b87254":"df['room_id\/id'].value_counts()","0b3072a7":"df.drop('room_id\/id', axis=1, inplace=True)\ndf.head(3)","2e7fccd5":"df.rename(columns={'noted_date':'date', 'out\/in':'place'}, inplace=True)\ndf.head(3)","d5a706c2":"df['date'] = pd.to_datetime(df['date'], format='%d-%m-%Y %H:%M')\ndf['year'] = df['date'].apply(lambda x : x.year)\ndf['month'] = df['date'].apply(lambda x : x.month)\ndf['day'] = df['date'].apply(lambda x : x.day)\ndf['weekday'] = df['date'].apply(lambda x : x.day_name())\ndf['weekofyear'] = df['date'].apply(lambda x : x.weekofyear)\ndf['hour'] = df['date'].apply(lambda x : x.hour)\ndf['minute'] = df['date'].apply(lambda x : x.minute)\ndf.head(3)","857f9176":"def month2seasons(x):\n    if x in [12, 1, 2]:\n        season = 'Winter'\n    elif x in [3, 4, 5]:\n        season = 'Summer'\n    elif x in [6, 7, 8, 9]:\n        season = 'Monsoon'\n    elif x in [10, 11]:\n        season = 'Post_Monsoon'\n    return season","c3724bf5":"df['season'] = df['month'].apply(month2seasons)\ndf.head(3)","893370e1":"def hours2timing(x):\n    if x in [22,23,0,1,2,3]:\n        timing = 'Night'\n    elif x in range(4, 12):\n        timing = 'Morning'\n    elif x in range(12, 17):\n        timing = 'Afternoon'\n    elif x in range(17, 22):\n        timing = 'Evening'\n    else:\n        timing = 'X'\n    return timing","22d24bef":"df['timing'] = df['hour'].apply(hours2timing)\ndf.head(3)","a824f58b":"df[df.duplicated()]","c03a3321":"df[df['id']=='__export__.temp_log_196108_4a983c7e']","f9a49076":"df.drop_duplicates(inplace=True)\ndf[df.duplicated()]","09af2757":"df.loc[df['date']=='2018-09-12 03:09:00', ].sort_values(by='id').head(5)","a35a2244":"df['id'].apply(lambda x : x.split('_')[6]).nunique() == len(df)","654e38c4":"df['id'] = df['id'].apply(lambda x : int(x.split('_')[6]))\ndf.head(3)","53043c34":"df.loc[df['date'] == '2018-09-12 03:09:00', ].sort_values(by ='id').head(5)","567af063":"df.loc[df['id'].isin(range(4000, 4011))].sort_values(by='id')","b8c1a378":"month_rd = np.round(df['date'].apply(lambda x : x.strftime(\"%Y-%m\")).value_counts(normalize=True).sort_index() * 100,decimals=1)\nmonth_rd_bar = hv.Bars(month_rd).opts(color=\"green\")\nmonth_rd_curve = hv.Curve(month_rd).opts(color=\"red\")\n(month_rd_bar * month_rd_curve).opts(title=\"Monthly Readings Count\", xlabel=\"Month\", ylabel=\"Percentage\", yformatter='%d%%', width=700, height=300,tools=['hover'],show_grid=True)","cfac2b3c":"hv.Distribution(df['temp']).opts(title=\"Temperature Distribution\", color=\"green\", xlabel=\"Temperature\", ylabel=\"Density\")\\\n                            .opts(opts.Distribution(width=700, height=300,tools=['hover'],show_grid=True))","8cc591ac":"pl_cnt = np.round(df['place'].value_counts(normalize=True) * 100)\nhv.Bars(pl_cnt).opts(title=\"Readings Place Count\", color=\"green\", xlabel=\"Places\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True))","4356bd4d":"season_cnt = np.round(df['season'].value_counts(normalize=True) * 100)\nhv.Bars(season_cnt).opts(title=\"Season Count\", color=\"green\", xlabel=\"Season\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True))","53e718d3":"timing_cnt = np.round(df['timing'].value_counts(normalize=True) * 100)\nhv.Bars(timing_cnt).opts(title=\"Timing Count\", color=\"green\", xlabel=\"Timing\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True))","d4f2c92b":"in_month = np.round(df[df['place']=='In']['date'].apply(lambda x : x.strftime(\"%Y-%m\")).value_counts(normalize=True).sort_index() * 100, decimals=1)\nout_month = np.round(df[df['place']=='Out']['date'].apply(lambda x : x.strftime(\"%Y-%m\")).value_counts(normalize=True).sort_index() * 100, decimals=1)\nin_out_month = pd.merge(in_month,out_month,right_index=True,left_index=True).rename(columns={'date_x':'In', 'date_y':'Out'})\nin_out_month = pd.melt(in_out_month.reset_index(), ['index']).rename(columns={'index':'Month', 'variable':'Place'})\nhv.Bars(in_out_month, ['Month', 'Place'], 'value').opts(opts.Bars(title=\"Monthly Readings by Place Count\", width=700, height=400,tools=['hover'],show_grid=True, ylabel=\"Count\"))","4a871366":"(hv.Distribution(df[df['place']=='In']['temp'], label='In') * hv.Distribution(df[df['place']=='Out']['temp'], label='Out'))\\\n                                .opts(title=\"Temperature by Place Distribution\", xlabel=\"Temperature\", ylabel=\"Density\")\\\n                                .opts(opts.Distribution(width=700, height=300,tools=['hover'],show_grid=True))","91c57711":"season_agg = df.groupby('season').agg({'temp': ['min', 'max']})\nseason_maxmin = pd.merge(season_agg['temp']['max'],season_agg['temp']['min'],right_index=True,left_index=True)\nseason_maxmin = pd.melt(season_maxmin.reset_index(), ['season']).rename(columns={'season':'Season', 'variable':'Max\/Min'})\nhv.Bars(season_maxmin, ['Season', 'Max\/Min'], 'value').opts(title=\"Temperature by Season Max\/Min\", ylabel=\"Temperature\")\\\n                                                                    .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True))","6b86907c":"timing_agg = df.groupby('timing').agg({'temp': ['min', 'max']})\ntiming_maxmin = pd.merge(timing_agg['temp']['max'],timing_agg['temp']['min'],right_index=True,left_index=True)\ntiming_maxmin = pd.melt(timing_maxmin.reset_index(), ['timing']).rename(columns={'timing':'Timing', 'variable':'Max\/Min'})\nhv.Bars(timing_maxmin, ['Timing', 'Max\/Min'], 'value').opts(title=\"Temperature by Timing Max\/Min\", ylabel=\"Temperature\")\\\n                                                                    .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True))","40b74ce6":"tsdf = df.drop_duplicates(subset=['date','place']).sort_values('date').reset_index(drop=True)\ntsdf['temp'] = df.groupby(['date','place'])['temp'].mean().values\ntsdf.drop('id', axis=1, inplace=True)\ntsdf.head(3)","06406c36":"in_month = tsdf[tsdf['place']=='In'].groupby('month').agg({'temp':['mean']})\nin_month.columns = [f\"{i[0]}_{i[1]}\" for i in in_month.columns]\nout_month = tsdf[tsdf['place']=='Out'].groupby('month').agg({'temp':['mean']})\nout_month.columns = [f\"{i[0]}_{i[1]}\" for i in out_month.columns]\nhv.Curve(in_month, label='In') * hv.Curve(out_month, label='Out').opts(title=\"Monthly Temperature Mean\", ylabel=\"Temperature\", xlabel='Month')\\\n                                                                    .opts(opts.Curve(width=700, height=300,tools=['hover'],show_grid=True))","ee7f7e46":"tsdf['daily'] = tsdf['date'].apply(lambda x : pd.to_datetime(x.strftime('%Y-%m-%d')))\nin_day = tsdf[tsdf['place']=='In'].groupby(['daily']).agg({'temp':['mean']})\nin_day.columns = [f\"{i[0]}_{i[1]}\" for i in in_day.columns]\nout_day = tsdf[tsdf['place']=='Out'].groupby(['daily']).agg({'temp':['mean']})\nout_day.columns = [f\"{i[0]}_{i[1]}\" for i in out_day.columns]\n(hv.Curve(in_day, label='In') * hv.Curve(out_day, label='Out')).opts(title=\"Daily Temperature Mean\", ylabel=\"Temperature\", xlabel='Day', shared_axes=False)\\\n                                                                    .opts(opts.Curve(width=700, height=300,tools=['hover'],show_grid=True))","603143b5":"in_wd = tsdf[tsdf['place']=='In'].groupby('weekday').agg({'temp':['mean']})\nin_wd.columns = [f\"{i[0]}_{i[1]}\" for i in in_wd.columns]\nin_wd['week_num'] = [['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].index(i) for i in in_wd.index]\nin_wd.sort_values('week_num', inplace=True)\nin_wd.drop('week_num', axis=1, inplace=True)\nout_wd = tsdf[tsdf['place']=='Out'].groupby('weekday').agg({'temp':['mean']})\nout_wd.columns = [f\"{i[0]}_{i[1]}\" for i in out_wd.columns]\nout_wd['week_num'] = [['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].index(i) for i in out_wd.index]\nout_wd.sort_values('week_num', inplace=True)\nout_wd.drop('week_num', axis=1, inplace=True)\nhv.Curve(in_wd, label='In') * hv.Curve(out_wd, label='Out').opts(title=\"Weekday Temperature Mean\", ylabel=\"Temperature\", xlabel='Weekday')\\\n                                                                    .opts(opts.Curve(width=700, height=300,tools=['hover'],show_grid=True))","487fc703":"in_wof = tsdf[tsdf['place']=='In'].groupby('weekofyear').agg({'temp':['mean']})\nin_wof.columns = [f\"{i[0]}_{i[1]}\" for i in in_wof.columns]\nout_wof = tsdf[tsdf['place']=='Out'].groupby('weekofyear').agg({'temp':['mean']})\nout_wof.columns = [f\"{i[0]}_{i[1]}\" for i in out_wof.columns]\nhv.Curve(in_wof, label='In') * hv.Curve(out_wof, label='Out').opts(title=\"WeekofYear Temperature Mean\", ylabel=\"Temperature\", xlabel='WeekofYear')\\\n                                                                    .opts(opts.Curve(width=700, height=300,tools=['hover'],show_grid=True))","96265d5c":"in_tsdf = tsdf[tsdf['place']=='In'].reset_index(drop=True)\nin_tsdf.index = in_tsdf['date']\nin_all = hv.Curve(in_tsdf['temp']).opts(title=\"[In] Temperature All\", ylabel=\"Temperature\", xlabel='Time', color='red')\n\nout_tsdf = tsdf[tsdf['place']=='Out'].reset_index(drop=True)\nout_tsdf.index = out_tsdf['date']\nout_all = hv.Curve(out_tsdf['temp']).opts(title=\"[Out] Temperature All\", ylabel=\"Temperature\", xlabel='Time', color='blue')\n\nin_tsdf_int = in_tsdf['temp'].resample('1min').interpolate(method='nearest')\nin_tsdf_int_all = hv.Curve(in_tsdf_int).opts(title=\"[In] Temperature All Interpolated with 'nearest'\", ylabel=\"Temperature\", xlabel='Time', color='red', fontsize={'title':11})\nout_tsdf_int = out_tsdf['temp'].resample('1min').interpolate(method='nearest')\nout_tsdf_int_all = hv.Curve(out_tsdf_int).opts(title=\"[Out] Temperature All Interpolated with 'nearest'\", ylabel=\"Temperature\", xlabel='Time', color='blue', fontsize={'title':11})\n\n(in_all + in_tsdf_int_all + out_all + out_tsdf_int_all).opts(opts.Curve(width=400, height=300,tools=['hover'],show_grid=True)).opts(shared_axes=False).cols(2)","ee5037eb":"in_d_org = hv.Curve(in_day).opts(title=\"[In] Daily Temperature Mean\", ylabel=\"Temperature\", xlabel='Time', color='red')\nout_d_org = hv.Curve(out_day).opts(title=\"[Out] Daily Temperature Mean\", ylabel=\"Temperature\", xlabel='Time', color='blue')\n\ninp_df = pd.DataFrame()\nin_d_inp = in_day.resample('1D').interpolate('spline', order=5)\nout_d_inp = out_day.resample('1D').interpolate('spline', order=5)\ninp_df['In'] = in_d_inp.temp_mean\ninp_df['Out'] = out_d_inp.temp_mean\n\nin_d_inp_g = hv.Curve(inp_df['In']).opts(title=\"[In] Daily Temperature Mean Interpolated with 'spline'\", ylabel=\"Temperature\", xlabel='Time', color='red', fontsize={'title':10})\nout_d_inp_g = hv.Curve(inp_df['Out']).opts(title=\"[Out] Daily Temperature Mean Interpolated with 'spline'\", ylabel=\"Temperature\", xlabel='Time', color='blue', fontsize={'title':10})\n\n(in_d_org + in_d_inp_g + out_d_org + out_d_inp_g).opts(opts.Curve(width=400, height=300,tools=['hover'],show_grid=True)).opts(shared_axes=False).cols(2)","919fef2d":"org_df = inp_df.reset_index()\norg_df['season'] = org_df['daily'].apply(lambda x : month2seasons(x.month))\norg_df = pd.get_dummies(org_df, columns=['season'])\norg_df.head(3)","868acfe3":"def run_prophet(place, prediction_periods, plot_comp=True):\n    # make dataframe for training\n    prophet_df = pd.DataFrame()\n    prophet_df[\"ds\"] = pd.date_range(start=org_df['daily'][0], end=org_df['daily'][133])\n    prophet_df['y'] = org_df[place]\n    # add seasonal information\n    prophet_df['monsoon'] = org_df['season_Monsoon']\n    prophet_df['post_monsoon'] = org_df['season_Post_Monsoon']\n    prophet_df['winter'] = org_df['season_Winter']\n\n    # train model by Prophet\n    m = Prophet(changepoint_prior_scale=0.1, yearly_seasonality=2, weekly_seasonality=False)\n    # include seasonal periodicity into the model\n    m.add_seasonality(name='season_monsoon', period=124, fourier_order=5, prior_scale=0.1, condition_name='monsoon')\n    m.add_seasonality(name='season_post_monsoon', period=62, fourier_order=5, prior_scale=0.1, condition_name='post_monsoon')\n    m.add_seasonality(name='season_winter', period=93, fourier_order=5, prior_scale=0.1, condition_name='winter')\n    m.fit(prophet_df)\n\n    # make dataframe for prediction\n    future = m.make_future_dataframe(periods=prediction_periods)\n    # add seasonal information\n    future_season = pd.get_dummies(future['ds'].apply(lambda x : month2seasons(x.month)))\n    future['monsoon'] = future_season['Monsoon']\n    future['post_monsoon'] = future_season['Monsoon']\n    future['winter'] = future_season['Winter']\n\n    # predict the future temperature\n    prophe_result = m.predict(future)\n\n    # plot prediction\n    fig1 = m.plot(prophe_result)\n    ax = fig1.gca()\n    ax.set_title(f\"{place} Prediction\", size=25)\n    ax.set_xlabel(\"Time\", size=15)\n    ax.set_ylabel(\"Temperature\", size=15)\n    a = add_changepoints_to_plot(ax, m, prophe_result)\n    fig1.show()\n    # plot decomposed timse-series components\n    if plot_comp:\n        fig2 = m.plot_components(prophe_result)\n        fig2.show()","c5075512":"run_prophet('In',30)","7097a372":"run_prophet('Out',30)","1d566584":"dist = (hv.Distribution(df[df['place']=='In']['temp'], label='In') * hv.Distribution(df[df['place']=='Out']['temp'], label='Out'))\\\n                                .opts(title=\"Temperature by Place Distribution\", xlabel=\"Temperature\", ylabel=\"Density\",tools=['hover'],show_grid=True, fontsize={'title':11})\ntsdf['daily'] = tsdf['date'].apply(lambda x : pd.to_datetime(x.strftime('%Y-%m-%d')))\nin_day = tsdf[tsdf['place']=='In'].groupby(['daily']).agg({'temp':['mean']})\nin_day.columns = [f\"{i[0]}_{i[1]}\" for i in in_day.columns]\nout_day = tsdf[tsdf['place']=='Out'].groupby(['daily']).agg({'temp':['mean']})\nout_day.columns = [f\"{i[0]}_{i[1]}\" for i in out_day.columns]\ncurve = (hv.Curve(in_day, label='In') * hv.Curve(out_day, label='Out')).opts(title=\"Daily Temperature Mean\", ylabel=\"Temperature\", xlabel='Day', shared_axes=False,tools=['hover'],show_grid=True)\n(dist + curve).opts(width=400, height=300)","58b5c36a":"in_var = hv.Violin(org_df['In'].values, vdims='Temperature').opts(title=\"In Temperature Variance\", box_color='red')\nout_var = hv.Violin(org_df['Out'].values, vdims='Temperature').opts(title=\"Out Temperature Variance\", box_color='blue')\n(in_var + out_var).opts(opts.Violin(width=400, height=300,show_grid=True))","06013dfa":"run_prophet('In',30, False)\nrun_prophet('Out',30, False)","6417793e":"## Time Series Analysis","a7c3e901":"### Temperature by Season","74939fcd":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","87a6de9e":"# 2. Import libraries","8742aaad":"## Univariate Analysis","26cb901a":">changing column names to understand easily","1b8545a7":"### Pre-processing for time-series analysis\n>It is easy to try time-series analysis with unique time-index data. So we need to calculate mean values by 'date' column and delete 'id' column.","751b5db9":">The count of numeric parts in 'id' have the same number as the length of the entire data, so the numeric parts indicate uniqueness of each records.","14e98f65":">There are gaps in 'id' column.","3f433f21":"### Uniqueness of id\n><div class=\"alert alert-success\" role=\"alert\">\n>Looking closely at 'id' column, it seemed to have unique values and two decomposable components, numeric and alpha-numeric.<br\/>\n>In the case of 'id' of <b>'__export__.temp_log_101144_ff2f0b97'<\/b>, it can be decomposed into two parts.\n><ul>\n>    <li><b>numeric part<\/b> : 101144<\/li>\n>    <li><b>alpha-numeric part<\/b> : ff2f0b97<\/li>\n><\/ul>\n>Alpha-numeric part looks impossible to understand, but <u>numeric part may indicate <b>uniqueness<\/b> or <b>sortability<\/b> of each records, for example seconds information<\/u>.\n><\/div>","2e0163fd":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","9d4ec792":"# 7. Conclusion\n><div class=\"alert alert-success\" role=\"alert\">\n><ul>\n><li>ID column was not used as useful information, but it was used as a unique identifier for each row.<\/li>\n><li>We got some useful information such as <b>seasonal information or timing information<\/b> for analysis from datetime column.<\/li>\n><li>Inside temperature is composed of a single distribution, <u>while outside temperature is composed of multiple distributions.<\/u><\/li>\n><li>Outside temperature can be <u>more affected by seasonal temperature fluctuations<\/u> than inside temperature.<\/li>\n><li>So many drops in the data made it difficult to build model, so interpolating daily-mean data by 'spline' method worked.<\/li>\n><li>Some outliers made it difficult to build forecasting model, but thanks to Prophet it is thought we built robust model against outliers.<\/li>\n><\/ul>\n><\/div>","592210d6":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","40d8eb65":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","97eaac09":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","2ab2472e":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","1d8e9ebe":">Adding numeric parts in 'id' as new identifier.","b3ee30a5":"### variance of temp for inside - outside room temp ?\n><div class=\"alert alert-info\" role=\"alert\">\n>Answer : \n><ul>\n><li>As shown below, <u>outside temperature has larger variance<\/u> than inside temperature.<\/li>\n><\/ul>\n><\/div>","7b407438":"><div class=\"alert alert-success\" role=\"alert\">\n><ul>\n><li>In order to forecast future temperature, we need to convert data into rough granularity.<\/li>\n><li>Using interpolated daily mean data looks good solution.<\/li>\n><\/ul>\n><\/div>","a4635996":"# 5. EDA","6279b3da":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","d5b577dd":"### Monthly Readings by Place","26be9c60":"## Build Model & Predict Future Temperature","7485c644":"# 4. Pre-processing","6374259f":"## Multivariate Analysis","d53ce81f":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","ccad9452":"### Gaps in id\n><div class=\"alert alert-success\" role=\"alert\">\n>Selecting one unique datetime(<b>2018-09-12 03:09:00<\/b>) and sorting by 'id', it turned out that there were <u>some gaps<\/u> in 'id' column.<br\/>\n>This fact makes it little difficult to understand mapping of 'id' to 'date'.\n><ul>\n>    <li><b>17003 - 17006<\/b> : 17004 and 17005 missing<\/li>\n>    <li><b>17006 - 17009<\/b> : 17007 and 17008 missing<\/li>\n><\/ul>\n>On the other hand, selecting certain range of 'id'(<b>4000-4010<\/b>) and sorting by its number, it turned out that there was <u>a gap in 'date' between 'id' 4004 and the others<\/u>.<br\/>\n>Sorting by 'id', it must have orderliness in 'date'. But <u>in 'id' 4004 'date' have former datetime compared to the previous 'id'<\/u>.\n><ul>\n>    <li><b>4002<\/b> : 2018-09-09 16:<font color='red'>24<\/font>:00<\/li>\n>    <li><b>4004<\/b> : 2018-09-09 16:<font color='red'>23<\/font>:00<\/li>\n><\/ul>\n>So it can be said that <u>'id' column is not related to second information, but it can be used as <b>a unique identifier<\/b> of each records<\/u>.\n><\/div>","3818c303":"# 6. Modelling\n><div class=\"alert alert-success\" role=\"alert\">\n>Building time-series model to predict future temperature inside\/outside room by Prophet.<br\/>\n>I chose Prophet this time for time-series modeling tool based on below reasons.\n><ul>\n><li>Automatic detection of trend and seasonality<\/li>\n><li>Robustness against outliers<\/li>\n><li>Customizable seasonalities<\/li>\n><li>No need for fine parameter tuning<\/li>\n><\/ul>\n><\/div>","05025d56":"### Missing data\n><div class=\"alert alert-success\" role=\"alert\">\n><ul>\n><li>Plotting overall data, it is found that there are some missing data points randomly through whole period.<\/li>\n><li>Interpolating with <b>'nearest'<\/b> method looks better(yet far from best), but there are many gaps in interpolated data yet.<\/li>\n><\/ul>\n><\/div>","52e35c75":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","834cbfce":"## Data Preparation\n>In addition to temperature information, I added season information, which is a time-series factor that affects temperature (especially outside).","52354743":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","0b24d4cd":"# Table of Contents<a id='top'><\/a>\n\n>1. [Overview](#1.-Overview)  \n>   * [Project Detail](#Project-Detail)\n>   * [Goal of this notebook](#Goal-of-this-notebook)\n>1. [Import libraries](#2.-Import-libraries)\n>1. [Load the dataset](#3.-Load-the-dataset)\n>1. [Pre-processing](#4.-Pre-processing)\n>   * [Datetime information](#Datetime-information)\n>   * [Seasonal information](#Seasonal-information)\n>   * [Timing information](#Timing-information)\n>   * [Unique identifier defined by id](#Unique-identifier-defined-by-id)\n>1. [EDA](#5.-EDA)  \n>   * [Univariate Analysis](#Univariate-Analysis)\n>   * [Multivariate Analysis](#Multivariate-Analysis)\n>   * [Time Series Analysis](#Time-Series-Analysis)\n>1. [Modelling](#6.-Modelling)\n>    * [Data Preparation](#Data-Preparation)\n>    * [Build Model & Predict Future Temperature](#Build-Model-&-Predict-Future-Temperature)\n>1. [Conclusion](#7.-Conclusion)\n>    * [Task Submission](#Task-Submission)\n>1. [References](#8.-References)","c69119b1":"### Predict the next scenario?\n><div class=\"alert alert-info\" role=\"alert\">\n>Answer : \n><ul>\n><li>We built the forecasting model by using <b>Prophet<\/b>.<\/li>\n><li>Predicting next 30 points(about a month), it looks that the model generated future points at a certain accuracy.<\/li>\n><\/ul>\n><\/div>","3056a509":"# 1. Overview\n## Project Detail\n><p>In <a href='https:\/\/www.kaggle.com\/atulanandjha\/temperature-readings-iot-devices'>this Dataset<\/a>, we have the temperature readings from IoT devices installed outside and inside of an anonymous room. Because the device was in the testing phase, it was uninstalled or shut off several times during the entire reading period, which caused some outliers and missing-values.<\/p><br\/>\n>Dataset details:\n><ul>\n>    <li><b>id<\/b> : unique IDs for each reading<\/li>\n>    <li><b>room_id\/id<\/b> : room id in which device was installed(currently 'admin room' only for example purpose).<\/li>\n>    <li><b>noted_date<\/b> : date and time of reading<\/li>\n>    <li><b>temp<\/b> : temperature readings<\/li>\n>    <li><b>out\/in<\/b> : whether reading was taken from device installed inside or outside of room<\/li>\n><\/ul>\n>We can enjoy finding out the following:\n><ul>\n>    <li>the relationship of inside and outside temperature<\/li>\n>    <li>trend or seasonality in the data<\/li>\n>    <li>forecasting future temperature by using time-series modeling<\/li>\n>    <li>characteristic tendency through year, month, week or day\/night<\/li>\n>    <li>and so on...<\/li>\n><\/ul>\n\n## Goal of this notebook\n>* Practice data cleansing technique\n>* Practice EDA technique to deal with time-series data\n>    * Series Decomposition into trend\/seasonality\n>* Practice visualising technique\n>* Practice time-series modeling technique\n>    * Prophet","763f46bb":"# 8. References\n>* **Good Pre-processing & EDA notebook**  \n>https:\/\/www.kaggle.com\/satishkundanagar\/temp-reading-iot-devices-eda\n>* **Prophet Document**  \n>https:\/\/facebook.github.io\/prophet\/docs\/quick_start.html\n>* **Prophet Introduction Paper**  \n>https:\/\/peerj.com\/preprints\/3190.pdf","1db00c27":"### Temperature by Timing","bb5763d9":">There is a gap in 'date' column when ordered by 'id'.","47892878":"### Monthly Readings","ccbb8f98":"### Weekday Temperature Mean","77c95a0a":"### Place","8fc84057":">column 'room_id\/id' has only one value(Room Admin), so we don't need this column for analysis.","c6a029fd":"### WeekofYear Temperature Mean","baaad920":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","582058ef":"### Monthly Temperature Mean\n><div class=\"alert alert-success\" role=\"alert\">\n><ul>\n><li>The <b>outside<\/b> temperature has a larger time series change than the <b>inside<\/b> temperature.<\/li>\n><li>It is thought that the inside temperature is adjusted by air conditioner, but <u>the outside temperature is affected by seasonal temperature fluctuations.<\/u><\/li>\n><ul>\n><\/div>","081c33af":"### Timing","712de5cc":"## Datetime information\n>datetime column has a lot of information such as year, month, weekday and so on. To utilize these information in EDA and modeling phase, we need extract them from datetime column.","73b9142e":"## Seasonal information\n><div class=\"alert alert-success\" role=\"alert\">\n>Let's assume this data was collected in India.<br\/>\n>According to <a href='https:\/\/en.wikipedia.org\/wiki\/Climate_of_India#Seasons'>this wiki page<\/a>, India has four climatological seasons as below.\n><ul>\n>    <li><b>Winter<\/b> : December to February<\/li>\n>    <li><b>Summer<\/b> : March to May<\/li>\n>    <li><b>Monsoon<\/b> : June to September<\/li>\n>    <li><b>Post-monsoon<\/b> : October to November<\/li>\n><\/ul>\n>We can create seasonal variable based on month variable.<br\/>\n><u>The idea came from <a href='https:\/\/www.kaggle.com\/satishkundanagar\/temp-reading-iot-devices-eda'>this notebook.<\/a><\/u>\n><\/div>","4c4bec8a":"## Task Submission\n>Through the EDA & Modeling above, we can answer [several tasks](https:\/\/www.kaggle.com\/atulanandjha\/temperature-readings-iot-devices\/tasks).","d33db428":"### Duplication\n>After checking whether any record is duplicated, it turned out that there were duplicate records. So we need to put duplicate records into one unique record.","08072191":"### Season","079e804e":"# 3. Load the dataset","464ba4f0":"### Temperature Distribution by Place\n><div class=\"alert alert-success\" role=\"alert\">\n><ul>\n><li>Inside temperature is composed of a single distribution, while <u>outside temperature is composed of multiple distributions.<\/u><\/li>\n><li>It seems that the temperature inside the room is kept constant by the air conditioner, but <u>the outside temperature is easily affected by time-series factors such as seasons.<\/u><\/li>\n><\/ul>\n><\/div>","c9639a16":">In the same datetime(<b>2018-09-12 03:09:00<\/b>), there are many records and unique ids.","b7605ed3":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","7d9f40c4":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","f8f25371":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","34c6387c":"### How outside temp was related to inside temp ?\n><div class=\"alert alert-info\" role=\"alert\">\n>Answer : \n><ul>\n><li>Outside temperature is composed of <b>multiple distribution<\/b>, while inside temperature has single distribution.<\/li>\n><li>Inside temperature has flat trend, but <u>outside temperature has the trend that is seemed to be affected by time-series factor such as seasonality.<\/u><\/li>\n><\/ul>\n><\/div>","4b91378d":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","512c92bd":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","96cd2135":"### Daily Temperature Mean","701e0a00":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","9d32fab3":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","c16835e0":"<h2 style=\"text-align:center;font-size:200%;;\">IoT Temperature Forecasting<\/h2>\n<h3  style=\"text-align:center;\">Keywords : <span class=\"label label-success\">IoT<\/span> <span class=\"label label-success\">Time Series Analysis<\/span> <span class=\"label label-success\">Pre-processing<\/span> <span class=\"label label-success\">EDA<\/span> <span class=\"label label-success\">Bayesian Modeling<\/span><\/h3>","0c6efea7":"## Unique identifier defined by id\n><div class=\"alert alert-success\" role=\"alert\">\n>Column 'id' seems to have some information related to 'date' column. <br\/>\n>Column 'date' doesn't have seconds information, so 'id' may have seconds information or some uniqueness of when the data was collected.<br\/>\n><u>The idea came from <a href='https:\/\/www.kaggle.com\/satishkundanagar\/temp-reading-iot-devices-eda'>this notebook.<\/a><\/u>\n><\/div>","4ae07f65":">function to convert month variable into seasons","05357bc0":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","1b2c6026":"<a href=\"#top\" class=\"btn btn-success btn-sm active\" role=\"button\" aria-pressed=\"true\" style=\"color:white;\">Table of Contents<\/a>","cd4c2319":"## Timing information\n><div class=\"alert alert-success\" role=\"alert\">\n>Hour variable can be broken into Night, Morning, Afternoon and Evening based on its number.\n><ul>\n>    <li><b>Night<\/b> : 22:00 - 23:59 \/ 00:00 - 03:59<\/li>\n>    <li><b>Morning<\/b> : 04:00 - 11:59<\/li>\n>    <li><b>Afternoon<\/b> : 12:00 - 16:59<\/li>\n>    <li><b>Evening<\/b> : 17:00 - 21:59<\/li>\n><\/ul>\n>We can create timing variable based on hour variable.<br\/>\n><u>The idea came from <a href='https:\/\/www.kaggle.com\/satishkundanagar\/temp-reading-iot-devices-eda'>this notebook.<\/a><\/u>\n><\/div>","728b9605":"### Temperature\n>Temperature clearly consists of multiple distributions."}}