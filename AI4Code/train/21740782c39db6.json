{"cell_type":{"a04f7b5e":"code","43dfcbba":"code","b695ba41":"code","0d38d657":"code","b52c8497":"code","1a303c80":"code","20befa13":"code","50ca8114":"code","04c4f42a":"markdown","a95b2a9b":"markdown","473ce65e":"markdown","c8c42b23":"markdown","4ab22f64":"markdown","2fe40247":"markdown","9bb6dca4":"markdown","d7c30c21":"markdown","93aaee41":"markdown","8ddc4112":"markdown","f39b5080":"markdown","ba4063de":"markdown","eaaccc02":"markdown","1ed23cd9":"markdown","1f4eef4a":"markdown","df7e9880":"markdown","e598ffd7":"markdown"},"source":{"a04f7b5e":"import os\nimport glob\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","43dfcbba":"train_data = pd.read_csv(\"..\/input\/ventilator-pressure-prediction\/train.csv\")\ntrain_data","b695ba41":"test_data = pd.read_csv(\"..\/input\/ventilator-pressure-prediction\/test.csv\")\ntest_data","0d38d657":"sample_data = pd.read_csv(\"..\/input\/ventilator-pressure-prediction\/sample_submission.csv\")\nsample_data","b52c8497":"breath_id_area = 10\ncheck_param_dict = {\n    'R':[-1, 60],\n    'C':[-1, 60],\n    'time_step':[-1, 3],\n    'u_in':[-1, 35],\n    'u_out':[-0.1, 1.1],\n    'pressure':[-1, 40]\n}\nfig = plt.figure(figsize=[50, 15])\n\nfor i_breath_id, breath_id in enumerate(train_data.loc[:, 'breath_id'].unique()[:breath_id_area]):\n    breath_id_df = train_data[train_data.loc[:, 'breath_id']==breath_id]\n    \n    for i_param, (param, param_range) in enumerate(check_param_dict.items()):\n        fig.add_subplot(len(check_param_dict), breath_id_area, i_breath_id+breath_id_area*i_param+1)\n        if param is 'pressure':\n            plt.plot(breath_id_df.loc[:, 'id'], breath_id_df.loc[:, param], c='r')\n        else:\n            plt.plot(breath_id_df.loc[:, 'id'], breath_id_df.loc[:, param], c='b')\n        if i_param is 0: plt.title(f\"breath_id={breath_id}\")\n        plt.ylim(param_range)\n        plt.xlabel('id'); plt.ylabel(param)\n\nplt.show()","1a303c80":"breath_id_area = 10\ncheck_param_dict = {\n    'R':[-1, 60],\n    'C':[-1, 60],\n    'time_step':[-1, 3],\n    'u_in':[-1, 35],\n    'u_out':[-0.1, 1.1],\n}\nfig = plt.figure(figsize=[50, 15])\n\nfor i_breath_id, breath_id in enumerate(test_data.loc[:, 'breath_id'].unique()[:breath_id_area]):\n    breath_id_df = test_data[test_data.loc[:, 'breath_id']==breath_id]\n    \n    for i_param, (param, param_range) in enumerate(check_param_dict.items()):\n        fig.add_subplot(len(check_param_dict), breath_id_area, i_breath_id+breath_id_area*i_param+1)\n        if param is 'pressure':\n            plt.plot(breath_id_df.loc[:, 'id'], breath_id_df.loc[:, param], c='r')\n        else:\n            plt.plot(breath_id_df.loc[:, 'id'], breath_id_df.loc[:, param], c='b')\n        if i_param is 0: plt.title(f\"breath_id={breath_id}\")\n        plt.ylim(param_range)\n        plt.xlabel('id'); plt.ylabel(param)\n\nplt.show()","20befa13":"train_time_diff = (train_data['time_step'] - train_data['time_step'].shift(1))\ntrain_time_diff[train_data['breath_id']!=train_data['breath_id'].shift(1)] = np.average(time_diff)\nplt.hist(train_time_diff, bins=30, range=[0, 0.3])\nax = ax = plt.gca()\nax.set_yscale('log')\nplt.show()","50ca8114":"test_time_diff = (test_data['time_step'] - test_data['time_step'].shift(1))\ntest_time_diff[test_data['breath_id']!=test_data['breath_id'].shift(1)] = np.average(time_diff)\nplt.hist(test_time_diff, bins=30, range=[0, 0.3])\nax = ax = plt.gca()\nax.set_yscale('log')\nplt.show()","04c4f42a":"- **train_data**","a95b2a9b":"## 2. \u30c7\u30fc\u30bf\u306e\u78ba\u8a8d","473ce65e":"- **test_data**","c8c42b23":"## 0. \u30a4\u30f3\u30dd\u30fc\u30c8","4ab22f64":"# Google Brain EDA\n\n- \u76ee\u7684\n  - Google Brain\u306e\u30c7\u30fc\u30bf\u69cb\u6210\u3092\u78ba\u8a8d\u3059\u308b\n  - \u5404\u7279\u5fb4\u91cf\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u78ba\u8a8d\u3059\u308b\n\n- \u53c2\u8003URL\n  - \u30b3\u30f3\u30da\u30c6\u30a3\u30b7\u30e7\u30f3\u30da\u30fc\u30b8: https:\/\/www.kaggle.com\/c\/ventilator-pressure-prediction\/overview\n  - \u30c7\u30fc\u30bf\u30da\u30fc\u30b8: https:\/\/www.kaggle.com\/c\/ventilator-pressure-prediction\/data?select=train.csv\n","2fe40247":"### 2.1. train\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d","9bb6dca4":"[\u611f\u60f3]\n- u_out=0\u306e\u6642\u306fu_in\u306b\u8ffd\u5f93\u3057\u3066pressure\u304c\u4e0a\u6607\u3057\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3002\u307e\u305f\u3001u_out\u304c1\u306b\u306a\u308b\u3068pressure\u304c\u8457\u3057\u304f\u4f4e\u4e0b\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b.\n- C,R\u306e\u5024\u306b\u5fdc\u3058\u3066\u3001pressure\u306e\u8ffd\u5f93\u306e\u4ed5\u65b9\u304c\u5909\u308f\u3063\u3066\u3044\u308b.\n- pressure\u306f\u6642\u7cfb\u5217\u306b\u5bfe\u3057\u3066\u9023\u7d9a\u306e\u5024\u306a\u306e\u3067\u3001\u5b66\u7fd2\u3055\u305b\u308b\u3068\u304d\u306f\u524d\u306e\u6642\u9593\u306epressure\u306e\u5024\u3001\u304a\u3088\u3073\u4e0a\u6607\u7387\u3092\u63a8\u8ad6\u306b\u4f7f\u7528\u3067\u304d\u308b\u3068\u3088\u3055\u305d\u3046.\n- train\u3068test\u3067id\u306f\u91cd\u8907\u3057\u3066\u3044\u306a\u3044.","d7c30c21":"\u4ee5\u4e0a","93aaee41":"### 3.2. time_step\u306e\u9593\u9694\u3092\u78ba\u8a8d\u3059\u308b\n\ntime_step\u306f\u4e3b\u306b0.03[sec]\u3054\u3068\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u69d8\u5b50\u3060\u304c\u3001\u96e2\u6563\u7684\u306a\u5834\u5408\u306f\u6642\u9593\u3054\u3068\u306bu_in\u306e\u5909\u5316\u91cf\u3092\u91cd\u307f\u3065\u3051\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3084\u6700\u5927\u5024\u3001\u6700\u5c0f\u5024\u3092\u78ba\u8a8d\u3057\u3066\u305d\u306e\u3042\u305f\u308a\u3092\u78ba\u8a8d\u3059\u308b.","8ddc4112":"**test_data**","f39b5080":"### 2.3. sample_submission\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d","ba4063de":"- 0.25\u3042\u305f\u308a\u306b\u98db\u3093\u3067\u3044\u308b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\n- 0,03\u53f0\u306e\u30c7\u30fc\u30bf\u304c\u591a\u3044\u304c\u30010.4\u53f0\u306e\u30c7\u30fc\u30bf\u3082\u4e00\u90e8\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\n\n\u2192\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u3068\u3057\u3066\u6271\u3046\u3068\u304d\u306b\u3001time_step\u3092\u8003\u616e\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u306b\u611f\u3058\u308b","eaaccc02":"### 3.1. breath_id\u3054\u3068\u306b\u30c7\u30fc\u30bf\u3092\u5206\u3051\u3066\u30d7\u30ed\u30c3\u30c8\u3092\u4f5c\u6210\n\nbreath_id\u3054\u3068\u306b\u3001C,R\u306e\u5024\u304c\u5909\u308f\u3063\u3066\u304a\u308a\u3001pressure\u306e\u5024\u3082\u30ea\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u306a\u306e\u3067\u3001breath_id\u3054\u3068\u306b\u30c7\u30fc\u30bf\u3092\u5206\u3051\u3066\u6642\u7cfb\u5217\u7684\u306b\u30c7\u30fc\u30bf\u3092\u30d7\u30ed\u30c3\u30c8\u3057\u3066\u307f\u308b.","1ed23cd9":"**train_data**","1f4eef4a":"### 2.2. test\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d","df7e9880":"## 3. \u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316","e598ffd7":"## 1. \u30b3\u30f3\u30da\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u76ee\u7684\u306e\u78ba\u8a8d\n\n[\u539f\u6587]\n\nThe ventilator data used in this competition was produced using a modified open-source ventilator connected to an artificial bellows test lung via a respiratory circuit. The diagram below illustrates the setup, with the two control inputs highlighted in green and the state variable (airway pressure) to predict in blue. The first control input is a continuous variable from 0 to 100 representing the percentage the inspiratory solenoid valve is open to let air into the lung (i.e., 0 is completely closed and no air is let in and 100 is completely open). The second control input is a binary variable representing whether the exploratory valve is open (1) or closed (0) to let air out.\n\nIn this competition, participants are given numerous time series of breaths and will learn to predict the airway pressure in the respiratory circuit during the breath, given the time series of control inputs.\n\n![](https:\/\/raw.githubusercontent.com\/google\/deluca-lung\/main\/assets\/2020-10-02%20Ventilator%20diagram.svg)\n\nEach time series represents an approximately 3-second breath. The files are organized such that each row is a time step in a breath and gives the two control signals, the resulting airway pressure, and relevant attributes of the lung, described below.\n\n- (\u6ce8\u91c8)\n  - ventilator...\u4eba\u5de5\u547c\u5438\u5668\n  - artificial bellows test lung...\u4eba\u5de5\u80ba\n  - bellows...\u3075\u3044\u3054\n \n\u3000\u3000  ![](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/6\/6f\/Bellows.png\/120px-Bellows.png)\n  \n  - inspiratory, expiratory...\u5438\u6c17\u3001in-\u306f\u5438\u5165\u3055\u308c\u308b\u5438\u6c17\u3001ex-\u306f\u6392\u51fa\u3055\u308c\u308b\u5438\u6c17\u306e\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\n  \n[\u6982\u7565]\n\n\u4eba\u5de5\u547c\u5438\u5668\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3059\u308b\u305f\u3081\u306b\u3001\u4eba\u5de5\u80ba(\u547c\u5438\u56de\u8def)\u306b\u63a5\u7d9a\u3057\u3066\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u305f.\u753b\u50cf\u306f\u305d\u306e\u56de\u8def\u3092\u793a\u3057\u3066\u3044\u308b.\u7dd1\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u5024.\u9752\u306f\u72b6\u614b\u5024\u3092\u793a\u3057\u3066\u3044\u308b.\u3053\u306e\u30b3\u30f3\u30da\u30c6\u30a3\u30b7\u30e7\u30f3\u3067\u306f\u3001\u591a\u6570\u306e\u6642\u7cfb\u5217\u306e\u547c\u5438\u3068\u305d\u308c\u306b\u5bfe\u3059\u308b\u5236\u5fa1\u5165\u529b\u304b\u3089\u547c\u5438\u4e2d\u306e\u547c\u5438\u56de\u8def\u306e\u6c17\u9053\u5185\u5727\u3092\u4e88\u6e2c\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3059\u308b.\n\n[\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066]\n\n- \u5404\u7279\u5fb4\u91cf\u306b\u3064\u3044\u3066\n    - **id**: \u5168\u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u6642\u523bID\n    - **breath_id**: \u547c\u5438\u306b\u5bfe\u3059\u308b\u6642\u523bID\n    - **R**: \u6c17\u9053\u304c\u3069\u306e\u7a0b\u5ea6\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u793a\u3059\u30d1\u30e9\u30e1\u30fc\u30bf(cmH2O\/L\/S)  \n      \u98a8\u8239\u30a4\u30e1\u30fc\u30b8-\u30b9\u30c8\u30ed\u30fc\u306e\u76f4\u5f84\u3092\u5909\u3048\u308b\u3053\u3068\u3067R\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304c\u3001R\u304c\u5927\u304d\u3044\u307b\u3069\u7a7a\u6c17\u3092\u5165\u308c\u308b\u6642\u306b\u5fc5\u8981\u306a\u529b\u306f\u5927\u304d\u304f\u306a\u308b.\n    - **C**: \u80ba\u306e\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9(\u8ffd\u5f93\u6027\uff1f)\u3092\u793a\u3059\u30d1\u30e9\u30e1\u30fc\u30bf(mL\/cmH2O)  \n      \u98a8\u8239\u30a4\u30e1\u30fc\u30b8-\u98a8\u8239\u306e\u30b4\u30e0\u306e\u539a\u3055\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067C\u304c\u5909\u308f\u308b\u3002C\u304c\u9ad8\u3044\u307b\u3069\u98a8\u8239\u306f\u8584\u304f\u306a\u308a\u3001\u7a7a\u6c17\u3092\u5165\u308c\u308b\u3068\u304d\u306b\u5fc5\u8981\u306a\u529b\u306f\u5c0f\u3055\u304f\u306a\u308b.\n    - **time_step**: \u5b9f\u969b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7.\n    - **u_in**: \u5438\u6c17\u96fb\u78c1\u5f01\u306e\u5236\u5fa1\u5165\u529b.  \n      \u80ba\u306b\u7a7a\u6c17\u3092\u5165\u308c\u308b\u305f\u3081\u306b\u5438\u6c17\u96fb\u78c1\u5f01\u304c\u958b\u3044\u3066\u3044\u308b\u30d1\u30fc\u30bb\u30f3\u30c6\u30fc\u30b8\u3092\u8868\u30590~100\u307e\u3067\u306e\u9023\u7d9a\u6570.\n    - **u_out**: \u63a2\u7d22\u7684\u96fb\u78c1\u5f01\u306e\u5236\u5fa1\u5165\u529b.  \n      \u7a7a\u6c17\u3092\u8f29\u51fa\u3059\u308b\u305f\u3081\u306b\u63a2\u7d22\u30d0\u30eb\u30d6\u304c\u958b\u3044\u3066\u3044\u308b\u304b\u3092\u8868\u3059\u30d0\u30a4\u30ca\u30ea\u5909\u6570(1)\u9589(2)\u958b.\n      \n      \n- \u76ee\u7684\u5909\u6570\u306b\u3064\u3044\u3066\n    - **pressure**: \u547c\u5438\u56de\u8def\u3067\u6e2c\u5b9a\u3055\u308c\u305f\u6c17\u9053\u5185\u5727=cmH2O."}}