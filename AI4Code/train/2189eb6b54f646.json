{"cell_type":{"e903d530":"code","17ab9c9d":"code","2e275024":"code","6b4738d0":"code","05744402":"code","5beaa994":"code","05137119":"code","7adfca0b":"code","bbacbab9":"code","0af50973":"code","00a2ae1f":"code","d17b885f":"code","45f7c548":"code","84c2cc70":"code","b4b93f83":"code","63fc55d1":"code","5146214c":"code","a3321fc6":"code","09886434":"code","ff2b407e":"code","847da81c":"code","1d226f79":"code","91448d0d":"code","c2ce7b4f":"code","73e60a51":"code","b486184f":"code","b5a49ca9":"code","390fb971":"code","3ac915e1":"markdown","b8a4c3e0":"markdown","ca0ca99f":"markdown","8f12cae7":"markdown","db72fdc5":"markdown","80ef2449":"markdown","845d2bc8":"markdown","98866790":"markdown","438b722b":"markdown","09f77812":"markdown","d22d970b":"markdown","68cf0015":"markdown","3b53c13e":"markdown","ff2aba80":"markdown","68c08c62":"markdown","128d54d2":"markdown","4dce7ce6":"markdown","8828c908":"markdown","ae5c803c":"markdown","6c5b684d":"markdown","6aea0ee5":"markdown","0afcab7b":"markdown"},"source":{"e903d530":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud,STOPWORDS\n\n%matplotlib inline","17ab9c9d":"raw_df=pd.read_csv('..\/input\/zomato-restaurants-data\/zomato.csv',encoding = \"ISO-8859-1\", engine='python')\ncountry=pd.read_excel('..\/input\/zomato-restaurants-data\/Country-Code.xlsx')","2e275024":"df=pd.merge(raw_df,country,on='Country Code',how='left')","6b4738d0":"df.head(2)","05744402":"## Check the statistical measurements of numerical columns\ndf.describe()","5beaa994":"## Check the number of rows, type of columns and if there is any null value in the dataset\ndf.info()","05137119":"## Another way of finding null values and column wise density of null values\nplt.figure(figsize=(5,5))\nsns.heatmap(df.isnull(),cbar=False,yticklabels=False)","7adfca0b":"## Cuisines column deep dive\nsum(df['Cuisines'].isnull()==True)","bbacbab9":"## pair plot to perform the univariate\/bivariate analysis\nsns.pairplot(df)","0af50973":"plt.scatter(df['Rating color'],df['Rating text'])","00a2ae1f":"sns.distplot(df['Aggregate rating'])","d17b885f":"import geopandas as gpd\nfrom shapely.geometry import Point","45f7c548":"india_shp=gpd.read_file('..\/input\/world-map-shape-files\/TM_WORLD_BORDERS-0.3.shp')","84c2cc70":"geometry=[Point(xy) for xy in zip(df['Longitude'],df['Latitude'])]\n\ncrs = {'init': 'epsg:27700'}\n\ngdf=gpd.GeoDataFrame(df['Restaurant ID'],crs=crs,geometry=geometry)\n\nfig,ax=plt.subplots(figsize=(20,10))\nindia_shp.plot(ax=ax,cmap='Pastel2')\ngdf.plot(ax=ax,color='red',markersize=12)","b4b93f83":"df.groupby('Country').agg({'Restaurant ID':np.count_nonzero,\\\n                          'Votes':np.sum,\\\n                          'Aggregate rating':np.mean,\\\n                          'Average Cost for two':np.mean,\\\n                           'Currency':np.max,\\\n                           'Has Online delivery':np.max,\\\n                          }).reset_index().sort_values('Restaurant ID',ascending=False).reset_index(drop=True).rename(columns={'Restaurant ID':'No. of restaurants',\\\n                                                                                                                              'Votes':'Total Votes'})","63fc55d1":"df.groupby(['Cuisines'])['Aggregate rating'].mean().sort_values(ascending=False).head()","5146214c":"df.groupby(['Country','City','Cuisines'])['Aggregate rating'].mean().reset_index().\\\nsort_values(['Country','City','Aggregate rating'],ascending=False).reset_index(drop=True).\\\ngroupby(['Country','City']).head(1).reset_index(drop=True).head()","a3321fc6":"df.groupby(['Country','City','Restaurant Name'])['Aggregate rating'].mean().reset_index().sort_values(['Country','City','Aggregate rating'],ascending=False).reset_index(drop=True).\\\ngroupby(['Country','City']).head(1).reset_index(drop=True).head()","09886434":"df.groupby('Restaurant Name')['Restaurant Name'].count().sort_values(ascending=False).head(10)","ff2b407e":"expanded_df=df.groupby(['Currency','Price range'])['Average Cost for two'].mean().reset_index()\nexpanded_df['Average Cost for two']=expanded_df['Average Cost for two'].apply(lambda x: np.round(x,0))\nexpanded_df.pivot(index='Currency',columns='Price range',values='Average Cost for two').fillna(0)","847da81c":"plt.figure(figsize=(20,10))\ndf.groupby(['Country','City','Restaurant Name'])['Votes'].count().reset_index().\\\nsort_values(['Country','City','Votes'],ascending=False).groupby(['Country','City']).head(1).\\\nsort_values('Votes',ascending=False).reset_index(drop=True).head(10).plot('Restaurant Name','Votes',kind='bar')","1d226f79":"df.groupby(['Country','City'])['Votes'].count().reset_index().sort_values('Votes',ascending=False).reset_index(drop=True).head(10).\\\nplot('City','Votes',kind='bar')","91448d0d":"a=pd.merge(df[(df['Country']=='India')].groupby(['City']).agg({'Restaurant ID':np.count_nonzero}).reset_index(),df[(df['Has Online delivery']=='Yes')&(df['Country']=='India')].groupby(['City']).agg({'Restaurant ID':np.count_nonzero}).reset_index(),on='City',how='inner')                                                    \na.rename(columns={'Restaurant ID_x':'Total_restaurants','Restaurant ID_y':'Online_restaurants'},inplace=True)\na['%age']=a['Online_restaurants']*100\/a['Total_restaurants']\na['%age']=a['%age'].apply(lambda x: np.round(x,2))\na.sort_values('Online_restaurants',ascending=False).reset_index(drop=True)","c2ce7b4f":"stopwords=list(STOPWORDS)","73e60a51":"word_text=WordCloud(background_color='white',\n        stopwords=stopwords,\n        max_words=200,\n        max_font_size=40, \n        scale=5,\n        random_state=1,\n                    relative_scaling=0.5,\n                   height=250,\n                   width=300).generate(str(df[df['Country Code']==1]['Cuisines']))","b486184f":"plt.figure(figsize=(10,10))\nplt.imshow(word_text,interpolation='bilinear')\nplt.axis(\"off\")","b5a49ca9":"word_res=WordCloud(stopwords=stopwords,\n                  height=250,\n                  width=250,\n                  random_state=2,\n                  background_color='white',\n                  max_words=200,\n                  max_font_size=40, \n                   relative_scaling=0.5,\n                  scale=5).generate(str(df[df['Country Code']==1]['Restaurant Name']))","390fb971":"plt.figure(figsize=(10,10))\nplt.imshow(word_res)\nplt.axis('off')","3ac915e1":"> #### WordCloud for most popular Cuisines In India","b8a4c3e0":"#### %age of Restaurants with Online Delivery by City in India","ca0ca99f":"## EDA","8f12cae7":"* ## Top 10 Most popular restaurants (Max no of Votes) **","db72fdc5":"#### Top 10 Restaurants with maximum branches on Zomato","80ef2449":"##### There are 9 null values in the dataset.","845d2bc8":"#### Top Restaurant in each city (First 5 examples)","98866790":"1. Online Delivery is present in two countries: India and UAE\n2. Zomato operates in a total of 15 countries","438b722b":"##### The dataset has 9551 rows and 21 columns. Only Cuisines column seems to have null values","09f77812":"The table shows the average cost for two at different price ranges for different currencies. There is a positive correlation between average cost for two and price range. We can also see Dollar and Pound as the strongest currencies and Indonesian Rupiah to be the weakest.","d22d970b":"1. Max value of  Average Cost for two is 80000 which is possible because the data has values in different currencies.\n2. The variance in  lat and long is low for 75% of the data signifying that most of the restaurants are in one location. The country code which has ~75% of the values is 1 which is most probably India.\n","68cf0015":"#####  Country specific Data","3b53c13e":"#### Top 5 Highest Rated Cuisines","ff2aba80":"1. Data is sparse as it contains a lot of 0 values\n2. Aggregate rating is 0 for most of the restaurants. however >0 rating distribution is similar to normal distribution.\n3. Aggregate rating increases with the number of votes.\n4. Price range column has only 4 discreet values","68c08c62":"##### The scatter plot shows which color corresponds to which rating","128d54d2":"#### WordCloud for most popular Restaurants in India","4dce7ce6":"##### Based on the heatmap there appears to null value in the cuisines column (white bars at the top).","8828c908":"## Top 10 most popular cities (Max number of votes)\n1. The metric can be used as a proxy to sort the cities by popularity on Zomato platform","ae5c803c":"##### Restaurants plotting on World Map","6c5b684d":"##### Based on the map, few latitude nad longitude does not appear to be correct","6aea0ee5":"* > #### Top Cuisine in each City (First 5 Examples)","0afcab7b":"New Delhi is clearly the most popular city out of 141 city Zomato operates in."}}