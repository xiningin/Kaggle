{"cell_type":{"c9069480":"code","1957f1c6":"code","5415f59e":"code","0c5a3ebb":"code","9f8d956e":"code","fb241a15":"code","64a98b9d":"code","a96d1e49":"code","79b72ad6":"markdown","58818c57":"markdown"},"source":{"c9069480":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1957f1c6":"# =============================\n# library\n# =============================\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib_venn import venn2\nimport random\nimport os\nfrom tqdm import tqdm_notebook as tqdm\nimport sys\nfrom sklearn.preprocessing import LabelEncoder\n%matplotlib inline\npd.set_option('display.max_columns', 300)","5415f59e":"# ==================\n# Constant\n# ==================\nTRAIN_PATH = \"\/kaggle\/input\/ml-study-meetup-osaka\/OsakaWinter_train.csv\"\nTEST_PATH = \"\/kaggle\/input\/ml-study-meetup-osaka\/OsakaWinter_test.csv\"","0c5a3ebb":"train = pd.read_csv(TRAIN_PATH)\ntest = pd.read_csv(TEST_PATH)","9f8d956e":"# train\u3068test\u306e\u7d50\u5408\ncols = [\"NearestStation\", 'TotalFloorArea']\ntrain = pd.concat([train[cols],test[cols]]).reset_index(drop=True)","fb241a15":"key = \"NearestStation\"\nvalue = [\"TotalFloorArea\"]\nnew_cols = []\nfor c in value:\n    mean_dict = train[[key,c]].groupby(by=key)[c].mean().to_dict()\n    train[f\"{key}_{c}_mean\"] =  train[key].map(mean_dict)\n    train[f\"{key}_{c}_mean_rate\"] = train[c] \/ train[f\"{key}_{c}_mean\"]\n    new_cols.append(f\"{key}_{c}_mean_rate\")","64a98b9d":"train[new_cols]","a96d1e49":"train[new_cols].to_csv(\"NearestStation_TotalFloorArea_mean_rate.csv\",index=False)","79b72ad6":"### \u6700\u5bc4\u308a\u99c5\u306eTotalFloorArea\u306e\u5e73\u5747\u3068\u306e\u6bd4\u7387\u3092\u8a08\u7b97\u3057\u3001\u76f8\u5bfe\u7684\u306aTotalFlooerArea\u3092\u6c42\u3081\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u571f\u5730\u306e\u4fa1\u5024\u3092\uff08\u5c11\u3057\u306f\uff09\u53cd\u6620\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059","58818c57":"## \u81ea\u5206\u304c\u4f5c\u3063\u305f\u7279\u5fb4\u91cf\u306e\u3046\u3061\u306e\u4e00\u3064\u3067\u3059\u3002\u53c2\u8003\u307e\u3067\u306b\u5171\u6709\u3057\u307e\u3059\n\u4f5c\u6210\u306e\u80cc\u666f\uff1atrain\u3068test\u304c\u90fd\u9053\u5e9c\u770c\u3067\u5206\u3051\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u5730\u540d\u3068\u304b\u6700\u5bc4\u308a\u99c5\u3092\u305d\u306e\u307e\u307e\u7279\u5fb4\u91cf\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305a\u3001\u307e\u305f\u305d\u306e\u571f\u5730\u3092\u8868\u3059\u30c7\u30fc\u30bf\uff08\u8def\u7dda\u4fa1\u3068\u304b\u516c\u793a\u5730\u4fa1\u3068\u304b\uff09\u304c\u3042\u308a\u307e\u305b\u3093\u306e\u3067\u3001\u624b\u5143\u306e\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307e\u4f7f\u3046\u3068\u3001\u672c\u6765\u4fa1\u5024\u304c\u9055\u3046\u3082\u306e\uff08\u4f8b\u3048\u3070\u82a6\u5c4b\u306eTotalFloorArea100\u3068\u4ed6\u306e\u5730\u57df\u306eTotalFloorArea100\uff09\u3092\u5206\u3051\u308b\u3053\u3068\u304c\u96e3\u3057\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u5c11\u3057\u3067\u3082\u4fa1\u5024\u306e\u9055\u3044\u3092\u51fa\u305b\u308b\u3088\u3046\u306b\u7279\u5fb4\u91cf\u3092\u52a0\u5de5\u3057\u307e\u3059\u3002\n"}}