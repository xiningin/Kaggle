{"cell_type":{"5b1801b6":"code","1547e9d1":"code","c3437225":"code","56a87807":"code","4ade0aed":"code","3b9c1e10":"code","5ff3bcc2":"code","390e4cd7":"code","91fd3423":"code","efa8b39f":"code","121cc4bb":"code","a012b6fa":"code","0bc58ad0":"code","a7f28a0d":"code","c18ac0b1":"code","d28ed0c8":"code","4095d38e":"markdown","9904fbab":"markdown","1d12b0b7":"markdown","2eeab33c":"markdown","adfff68d":"markdown","d920be03":"markdown","787f0140":"markdown"},"source":{"5b1801b6":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","1547e9d1":"# load csv file\ndf = pd.read_csv('..\/input\/us-teen-birth-rates-ages-1519-20032018\/NCHS_-_Teen_Birth_Rates_for_Age_Group_15-19_in_the_United_States_by_County.csv')","c3437225":"# first glance\ndf.head(25)","56a87807":"# we have years from 2003..2018 available\ndf.Year.describe()","4ade0aed":"# filter year 2018\ndf_2018 = df[df.Year==2018]","3b9c1e10":"# aggregation by state\ndf_2018_state = df_2018.groupby('State', as_index=False).agg(\n    min_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=min),\n    max_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=max),\n    mean_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=np.mean))\n\ndf_2018_state","5ff3bcc2":"plt.figure(figsize=(14,8))\nsns.barplot(x=df_2018_state.State, y=df_2018_state.mean_birth_rate)\nplt.xticks(rotation=90)\nplt.grid()\nplt.title('Mean Teen Birth Rate 2018')\nplt.show()","390e4cd7":"# first we have to translate the state names to abbreviations\n# we use a dictionary for this (many thanks to https:\/\/gist.github.com\/rogerallen\/1583593 for providing this already!)\nstate_abbreviations = {\n    'Alabama': 'AL',\n    'Alaska': 'AK',\n    'American Samoa': 'AS',\n    'Arizona': 'AZ',\n    'Arkansas': 'AR',\n    'California': 'CA',\n    'Colorado': 'CO',\n    'Connecticut': 'CT',\n    'Delaware': 'DE',\n    'District of Columbia': 'DC',\n    'Florida': 'FL',\n    'Georgia': 'GA',\n    'Guam': 'GU',\n    'Hawaii': 'HI',\n    'Idaho': 'ID',\n    'Illinois': 'IL',\n    'Indiana': 'IN',\n    'Iowa': 'IA',\n    'Kansas': 'KS',\n    'Kentucky': 'KY',\n    'Louisiana': 'LA',\n    'Maine': 'ME',\n    'Maryland': 'MD',\n    'Massachusetts': 'MA',\n    'Michigan': 'MI',\n    'Minnesota': 'MN',\n    'Mississippi': 'MS',\n    'Missouri': 'MO',\n    'Montana': 'MT',\n    'Nebraska': 'NE',\n    'Nevada': 'NV',\n    'New Hampshire': 'NH',\n    'New Jersey': 'NJ',\n    'New Mexico': 'NM',\n    'New York': 'NY',\n    'North Carolina': 'NC',\n    'North Dakota': 'ND',\n    'Northern Mariana Islands':'MP',\n    'Ohio': 'OH',\n    'Oklahoma': 'OK',\n    'Oregon': 'OR',\n    'Pennsylvania': 'PA',\n    'Puerto Rico': 'PR',\n    'Rhode Island': 'RI',\n    'South Carolina': 'SC',\n    'South Dakota': 'SD',\n    'Tennessee': 'TN',\n    'Texas': 'TX',\n    'Utah': 'UT',\n    'Vermont': 'VT',\n    'Virgin Islands': 'VI',\n    'Virginia': 'VA',\n    'Washington': 'WA',\n    'West Virginia': 'WV',\n    'Wisconsin': 'WI',\n    'Wyoming': 'WY'\n}","91fd3423":"df_2018_state['StateCode'] = df_2018_state['State'].map(state_abbreviations)\ndf_2018_state","efa8b39f":"# now we can plot a map\nfig = px.choropleth(df_2018_state,\n                    locationmode='USA-states',\n                    scope='usa',\n                    locations='StateCode',\n                    color='mean_birth_rate',\n                    hover_name='State',\n                    color_continuous_scale=px.colors.sequential.Plasma)\nfig.show()","121cc4bb":"df_by_state = df.groupby(['Year','State'], as_index=False).agg(\n    min_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=min),\n    max_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=max),\n    mean_birth_rate = pd.NamedAgg(column='Birth Rate', aggfunc=np.mean))\n\ndf_by_state","a012b6fa":"# select a specific state\nselect_state='Alabama'\ndf_by_state_sel = df_by_state[df_by_state.State==select_state]\ndf_by_state_sel","0bc58ad0":"plt.figure(figsize=(7,4))\nplt.plot(df_by_state_sel.Year, df_by_state_sel.mean_birth_rate)\nplt.grid()\nplt.title('Mean Birth Rate - Alabama')\nplt.show()","a7f28a0d":"# select another state\nselect_state='New York'\ndf_by_state_sel = df_by_state[df_by_state.State==select_state]\ndf_by_state_sel","c18ac0b1":"plt.figure(figsize=(7,4))\nplt.plot(df_by_state_sel.Year, df_by_state_sel.mean_birth_rate)\nplt.grid()\nplt.title('Mean Birth Rate - New York')\nplt.show()","d28ed0c8":"plt.figure(figsize=(12,8))\nsns.lineplot('Year','mean_birth_rate', hue='State', data=df_by_state)\nplt.grid()\nplt.title('Mean Birth Rate')\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.show()","4095d38e":"# Look at most recent data (Year=2018)","9904fbab":"# Show rates by state on a map","1d12b0b7":"### Estimated teen birth rates for age group 15\u201319 expressed per 1,000 females aged 15\u201319 by county and year.","2eeab33c":"# Explore (estimated) teen birth rates (age 15-19) in the US","adfff68d":"# Development over time (by state)","d920be03":"### Ok, the downward trend is consistent across all states.","787f0140":"## Let's check if all states show this downward trend"}}