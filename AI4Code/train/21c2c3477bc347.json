{"cell_type":{"8b6cc16b":"code","b8606a2e":"code","7997cd81":"code","403dbde6":"code","a38b88fd":"code","d2b4f31c":"code","5202613f":"code","68ee1909":"code","9c955585":"code","26428c2a":"code","6f06d152":"markdown","8de29e78":"markdown","312607c9":"markdown","71b3d237":"markdown","e2ae4c22":"markdown","9f88e6db":"markdown","61476b46":"markdown","1cc9a508":"markdown","2bbbe783":"markdown","25d32d75":"markdown","ece620a2":"markdown","5d85e2d8":"markdown","d1b83c79":"markdown","09a0aad3":"markdown","072dd284":"markdown","755b88c6":"markdown","5d8f705d":"markdown","cf10cede":"markdown","a58ee4d6":"markdown","6a3061b5":"markdown","10154c98":"markdown","b4588e41":"markdown","724dfcd0":"markdown","c134f72e":"markdown","b0103e0a":"markdown","b8593e95":"markdown"},"source":{"8b6cc16b":"#Importing key libraries\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","b8606a2e":"#Reading the dataset\n\nPassing_stats_df = pd.read_excel(\"..\/input\/best-midfielders-in-the-last-decade\/Whoscored_Creative_Mids_Data - Copy.xlsx\",sheet_name=\"Passing Stats since 2009-10\")\nPassing_stats_df = Passing_stats_df.set_index([\"Player\"])","7997cd81":"Passing_stats_df\n\n# Column definitions just below the data output","403dbde6":"# Removing unnecessary columns, URL and Ratings (since ratings are not our focus)\n\nPlayer_Ratings = Passing_stats_df[[\"Rating\"]]\n\nPassing_stats_df = Passing_stats_df.drop([\"URL\",\"Rating\"],axis=1)","a38b88fd":"# Converting all columns to per game. Dropping Apps and Mins, since every stat is now per game\n\nPassing_stats_df[\"Assists\"] = Passing_stats_df[\"Assists\"]\/Passing_stats_df[\"Apps\"] #Assits column is now Assists per game\n\nPassing_stats_apps_mins_df = Passing_stats_df[[\"Apps\",\"Mins\"]]\n\nPassing_stats_df = Passing_stats_df.drop([\"Apps\",\"Mins\"],axis=1)","d2b4f31c":"# All columns bar plot\n\nnumerical_features=[feature for feature in Passing_stats_df.columns if Passing_stats_df[feature].dtype!='O']\n\nplt.rc('ytick', labelsize=15)\nplt.rc('xtick',labelsize=15)\n\nfor feature in numerical_features:\n    plt.figure(figsize=(30,10))\n    \n    data = Passing_stats_df\n    data = data.sort_values(feature,ascending=False)\n    clrs = ['lightblue' if (x !='Xavi') else 'blue' for x in data.index]    \n    \n    plt.ylabel('ylabel', fontsize=25)\n    \n    sns.barplot(x=data.index, y=data[feature],palette=clrs)\n    \n    plt.xlabel('', fontsize=18)\n\n    \n    plt.show()","5202613f":"Successful_passes_df = Passing_stats_df['AvgP']*(Passing_stats_df['PS%']\/100).sort_values(ascending=False)\nSuccessful_passes_df = pd.DataFrame(Successful_passes_df.sort_values(ascending=False),columns=['Successful Passes per match'])\n\n\nprint(Successful_passes_df)\n\nplt.figure(figsize=(30,10))\n\ndata = Successful_passes_df\ndata = data.sort_values(ascending=False,by='Successful Passes per match')\nclrs = ['lightblue' if (x !='Xavi') else 'blue' for x in data.index]    \n\nplt.ylabel('ylabel', fontsize=25)\n\nsns.barplot(x=data.index, y=data['Successful Passes per match'],palette=clrs)\n\nplt.xlabel('', fontsize=18)\n\nplt.show()","68ee1909":"#Standard scaling (Standardize features by removing the mean and scaling to unit variance i.e. Transforming values in every column to a value between 0 to 1)\n#This is mandatory for PCA, as every column has a different scale (E.g. PS% has scale of 0-100, KeyP has scale of 0 to 3 in our data)\n\nfrom sklearn.preprocessing import MinMaxScaler\n\nscaler = MinMaxScaler()\n\nPassing_stats_actuals_df = Passing_stats_df\n\nPassing_stats_df = pd.DataFrame(scaler.fit_transform(Passing_stats_df),columns=Passing_stats_df.columns,index = Passing_stats_df.index )\n","9c955585":"# PCA conversion to plot 7D data succesfully in 2D\n\nfrom sklearn.decomposition import PCA\n\npca = PCA(n_components=2,random_state=42)\nreduced_data = pca.fit_transform(Passing_stats_df)\nresults = pd.DataFrame(reduced_data,columns=['pca1','pca2'])\ncomp_no = 1\n\n# Understanding column importance % for both PCA components\n\nfor component in pca.components_:\n    \n    col_importance_name = 'Feature % of PCA ' + str(comp_no)+' component'\n    \n    Stat_importance_in_PCA = pd.concat([pd.Series(list(Passing_stats_df.columns)).rename('Stat'),pd.Series((list(component*100\/component.sum()))).rename(col_importance_name)],axis=1)\n    \n    Stat_importance_in_PCA[col_importance_name] = [round(x) for x in list(Stat_importance_in_PCA[col_importance_name])]\n    \n    print(Stat_importance_in_PCA.sort_values(col_importance_name,ascending=False))\n    \n    print(\"\\n\")\n    \n    comp_no = comp_no+1","26428c2a":"plt.figure(figsize=(50,20))\n\n#plt.xlabel(\"x\",labelpad=10)\n#plt.xlabel(\"y\",labelpad=10)\n\n\nax = sns.scatterplot(x=\"pca1\", y=\"pca2\", data=results, s=100)\nax.axes.set_title(\"Playmaking\/Passing performance : Final Ball vs Tempo control (per game)\",fontsize=60, pad=60)\nax.set_xlabel(\"Final Ball ability\",fontsize=40,labelpad=50)\nax.set_ylabel(\"Tempo control ability\",fontsize=40,labelpad=50)\nax.tick_params(labelsize=25)\nax.axhline(y=0)\nax.axvline(x=0)\n\nfor line in range(0,Passing_stats_df.shape[0]):\n    \n        \n    if Passing_stats_df.index[line]=='Xavi':\n        ax.scatter(results.pca1[line], results.pca2[line], color='red')\n        ax.text(results.pca1[line], results.pca2[line],Passing_stats_df.index[line],color='Blue',ha='center', va='bottom', fontsize=45)\n        \n    else:\n        ax.text(results.pca1[line], results.pca2[line],Passing_stats_df.index[line],ha='center', va='bottom', fontsize=35)\n        \ndef biplot(score, coeff):\n    for i in range(7):\n            #plot as arrows the variable scores (each variable has a score for PC1 and one for PC2)\n        plt.arrow(0, 0, coeff[i,0]*1.35, coeff[i,1]*1.35, color = 'red', alpha = 0.9,linestyle = '-',linewidth = 0.5, overhang=0,head_width=0.02,head_length=0.02)\n        plt.text(coeff[i,0]*1.55, coeff[i,1]*1.55 , list(Passing_stats_df.columns)[i], color = 'red', ha = 'center', va = 'top',fontsize=25)\n\nbiplot(reduced_data[:,0:2], np.transpose(pca.components_[0:2, :]))\n\n    \nplt.show()","6f06d152":"### Here is the dataset ","8de29e78":"## The bottomline is that Xavi is the best at both generating and completing passes by a landslide while also excelling in through passing across opponent's defensive line. \n\n## While he may not be the best in other metrics, he is better in those aspects than most other players in the list. \n\nFurther, Xavi is only bettered in such other metrics by a few players who either have a natural positional advantage for those metrics such as Assists, which is always higher for an attacking midfielder like De Bruyne or Ozil, or the players' teams played a different style of football that pushed up that metric such as Long Ball, where Alonso and Kroos are ahead because they spent a majority of last deacde at Real Madrid, a club that has played a quick long ball based counterattacking football in that time period. ","312607c9":"For PCA1, Important features are KeyP, Crosses, Assists. \n\nFor PCA2, Important features are ThrB, AvgP, PS%, LongB.\n\n### Hence, PCA1 is an approximate indicator of final passes to attackers. This is of higher importance to attacking midfielders\n \n\n### PCA2 is an approximate indicator of the ability to control the game's tempo. This is of higher importance to central midfielders\n","71b3d237":"2 of those data points belong to Xavi and Iniesta. 14 are other great midifielders of last decade. One of them midfielder is Ivan Rakitic, who is a former Barca player and Xavi's successor. Others are current Barca players tasked with playmaking","e2ae4c22":"With Barcelona, Xavi won eight La Liga titles and four UEFA Champions League titles. Xavi was ranked third in the 2009 FIFA World Player of the Year, followed by third place for its successor award, the FIFA Ballon d'Or, in 2010 and 2011. In 2011, he was runner up to Lionel Messi for the UEFA Best Player in Europe Award. \n\nHe played an integral role in Spain's victory at the 2010 FIFA World Cup, as well as their wins at UEFA Euro 2008 and UEFA Euro 2012. He was named Player of the Tournament at UEFA Euro 2008, and was named in the UEFA Euro Team of the Tournament in 2008 and 2012. With two assists in the UEFA Euro 2012 Final, Xavi became the first player to register assists in two separate European finals, after setting up the only goal in the 2008 final versus Germany four years earlier. ","9f88e6db":"This PCA graph provides quite some insights :\n\n1) Xavi is the best Tempo Controller\/Central Midfielder by a distance\n\n2) Kevin De Bruyne is the best Final Ball provider\/Attacking Midfielder, though not been the best tempo controller\n\n3) Xavi is bettered as a Final Ball provider\/Attacking Midfielder only by De Bruyne, Ozil, Pirlo, and Fabregas. This is great as all of these players except Pirlo are\/were Attacking Midfielders for a long part of their career. In fact, Xavi is better as a final ball provider than some attacking midfielders like David Silva (very marginally), Lampard, Gerrard\n\n4) Ivan Rakitic, Xavi's successor at Barca, was unable to fill in Xavi's massive void, as he lags way behind in terms of both tempo control and final pass ability\n\n5) Thiago Alcantra, one of Xavi's successor at Spain National Team, is good at Tempo Control. However, he is still not as good as Xavi in that regard. Further, he is nowhere near Xavi in terms of Final Ball\n\n6) Cesc Fabregas, another of Xavi's successor at Spain National Team and a fellow teammate at Barca, is somewhat better than Xavi at final pass. However, he is nowhere near Xavi in terms of Tempo Control\n\n7) Barca's present playmakers Riqui Puig and Pjanic have a long way to go if they are to match Xavi's tempo control and pass effectiveness. However, Puig hasn't got enough minutes to build on those stats (since all stats are per match and not per minute)","61476b46":"### This alone shows why Xavi is considered the best. He was the master of passing and controlling the tempo of the match","1cc9a508":"## He is considered one of the midfielders in footballing history and certainly the best midfielder in the last decade. Some quotes on Xavi include :","2bbbe783":"# In this statistical analysis, we look at stats beyond goals and assists which show why Xavi is considered the best midfielder of last decade (and perhaps in history)","25d32d75":"As per whoscored, the column definitions are as follows :\n\n1) Mins: Minutes played\n\n2) Assists: Total assists - A pass that directly leads to a chance scored by a teammate\n\n3) KeyP: Key passes per game - The final pass leading to a shot at goal from a teammate\n\n4) AvgP: Passes per game - Average number of passes attempted (short passes, long balls, through balls, crosses)\n\n5) PS%: Pass success percentage - Percentage of attempted passes that successfully found a teammate\n\n6) Crosses: Crosses per game - An attempted\/accurate pass from a wide position to a central attacking area\n\n7) LongB: Long balls per game - An attempted\/accurate pass of 25 yards or more\n\n8) ThrB: Through balls per game - An attempted\/accurate pass between opposition players in their defensive line to find an onrushing teammate (running through on goal)","ece620a2":"# Playmaking stats Visualization using PCA (to visualize 7D data as 2D graph)","5d85e2d8":"# However, when someone asks for stats to prove Xavi is the best midfielder of the last decade, most of us fall short. This is because in football the stats that are looked at are Goals and Assists.","d1b83c79":"Principal Components Analysis (PCA) is a well-known unsupervised dimensionality reduction technique that constructs relevant features\/variables through linear (linear PCA) combinations of the original variables (features\/columns). The construction of relevant features is achieved by linearly transforming correlated variables into a smaller number of uncorrelated variables.\n\nMore details regarding the math behind PCA can be found at : https:\/\/towardsdatascience.com\/pca-clearly-explained-how-when-why-to-use-it-and-feature-importance-a-guide-in-python-7c274582c37e","09a0aad3":"\u201cHe is the best player in the history of Spanish football.\u201d \u2013 Lionel Messi\n\n\u201cIf Xavi has a bad day then Barcelona do not play half as well. He is the one that sets the rhythm of the game. His play allows the team to function. He\u2019s different.\u201d \u2013 Johan Cruyff\n\n\u201cXavi changed football. He helped us to build, or to see, a new player profile that ended up running through all levels of the national team. He killed off the myth of physicality being above all else and opened people\u2019s eyes to the qualities of small, technical players, proving that you can attack and also defend with the ball. There are lots of players who win things, but few who lay down concepts, ideas, who change the way we think, and Xavi did that.\u201d \u2013 Julen Lopetegui","072dd284":"# Now, let us look at Stat comparisons per game amongst all the players","755b88c6":"Now let us plot the 7D data of passing stats as a 2D scatter plot","5d8f705d":"This graph clearly shows that Xavi's Total Number of Successful Passes is far higher than any other player in the list. \nThe midfielder with 2nd highest successful passes is Marco Verratti. \nHowever, he has approximately 12 less successful passes in a match, which is a significant gap.","cf10cede":"Not only did he have the patience to circulate the ball again and again, he completed so many of these passes successfully. Moreover, he is the embodiment and engine of Barca's tiki-taka style of play, as his stats perfectly sum up tiki-taka's heavy emphasis on passing. Thus, we can say that he was the orchestrator and perhaps the main reason behind Barca's tiki-taka success from 2009-13 (alongside Messi and Iniesta).","a58ee4d6":"## The data we use is from <b>whoscored.com<\/b>. The data contains <b>detailed passing stats<\/b> from whoscored of 18 players <b>since 2009-10 season<\/b>","6a3061b5":"As per barplots of all individual stats, it's clear that Xavi has highest Average Passes and Passing %. This is really brilliant, as it shows that not only did Xavi attempt a lot of passes, a very high number of these were successful. Hence, his total successful passes would be far higher than any other player in this list, something we'll visualize in a bit.\n\nXavi is also the joint highest in through passes alongside Fabregas, which shows that his playmaking vision was excellent.\n\nXavi ranks 5th in assists, with players like De Bruyne, Ozil, Fabregas and David Silva ahead of him. However, all these players have played as attacking midfielders for a large portion of their career, hence the higher assists count.\n\nSimilar is the case with Key Passes (5th rank), where only more attack minded players, with the exception of Pirlo, are ahead of him.\n\nXavi is ranked 6 out of 20 in Crosses, which is very impressive considering he barely occupied a wider position in midfield. (However, he took corners often for Barca and Spain)\n\nIn Long Balls, only Pirlo, Xabi Alonso and Kroos are ahead and that too since they usually occupy a deeper position on the field and have played in more quick transitional, counterattacking teams.","10154c98":"#### Since we want to express 7D data in 2D, we will obtain 2 Principal Components (PCA1 and PCA2)","b4588e41":"### Xavi was undoubtedly the best playmaker of his generation. Rivals, teammates and successors all failed to match his level of tempo control. \n\n#### He was also one of the best final passers to attackers, despite playing in a deeper position than what attacking midfielders usually occupy on the pitch (In terms of final passing, Pirlo's stats are astounding, as even though he played as a deep lying midfielder, he is one of the best at it, beating the likes of David Silva and Steven Gerrard in that regard)\n\n# To sum up the analysis, Xavi has set the bar very high for a playmaker, a level that may or may not be achieved again in football","724dfcd0":"### Now, Let us visualize total successful passes graphically to further show how Xavi was far ahead of his peers in terms of pass success","c134f72e":"# Xavi Hernandez was the primary central midfielder at FC Barcelona from 1998 to 2015 and Spanish National Team from 2000 to 2014\t","b0103e0a":"While goals and assists can be great indicators for a striker, the same can't be said for a central midfielder. It's not a central midfielder's role to score goals for his team. Hence, goals aren't included in this analysis.\n\nWhile assists matter to an extent for a midfielder, they again aren't a true indicator of a central midfielder's performance as central midfielders more often than not don't provide the final ball to the strikers. They are responsible for controlling the flow of the game. Assists do matter for an attacking midfielder, however and hence a column for assists has been considered in the analysis.","b8593e95":"![Image of Xavi](https:\/\/www.fcbarcelona.com\/photo-resources\/2019\/03\/29\/57269c5c-618b-454d-86ed-a3991b737503\/VufwaXpA.jpg?width=1200&height=750)\n"}}