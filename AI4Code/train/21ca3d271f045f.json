{"cell_type":{"dd996b73":"code","5af49546":"code","c2c16851":"code","3b4baa06":"code","c47f2466":"code","8d05769a":"code","487a1d23":"code","ca478522":"code","9f6c44a6":"code","d946469a":"code","2438fda4":"code","cc296d0b":"code","4c46dab1":"code","d8f55b17":"code","1731bdbf":"code","36fbd86f":"code","e5c9c6d7":"code","48c2516a":"code","fb6cc567":"code","516726e2":"code","1572e6ec":"code","23d9252a":"code","15949a95":"markdown","c3bbbe64":"markdown","deef94a3":"markdown","fea77933":"markdown","3d26c4c9":"markdown","7624f95e":"markdown","67cc5142":"markdown","eea0b5e7":"markdown","9c9e066c":"markdown","8578b5e8":"markdown","ac75df92":"markdown","dc2f658b":"markdown","8712a1ce":"markdown","554132d7":"markdown"},"source":{"dd996b73":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","5af49546":"import matplotlib.pyplot as plt\nimport seaborn as sns \nimport scipy.stats as stats\nimport statsmodels.api as sm\nfrom statsmodels.formula.api import ols\nfrom statsmodels.stats.multicomp import pairwise_tukeyhsd\nimport squarify","c2c16851":"df = pd.read_csv('\/kaggle\/input\/fast-food-marketing-campaign-ab-test\/WA_Marketing-Campaign.csv')\ndf.head(5)","3b4baa06":"df.info()","c47f2466":"df.describe()","8d05769a":"df.drop_duplicates()","487a1d23":"# Explore the distribution of promotion\nsns.set_theme()\nplt.figure(figsize=(6,6))\npie_labels = ['Promotion 1', 'Promotion 2', 'Promotion 3']\nplt.pie(df.groupby(['Promotion']).size().to_list(), \n        labels=pie_labels, autopct='%1.1f%%',textprops={'fontsize': 12})\nplt.title('Distribution of Promotions', fontsize=14)\nplt.show()","ca478522":"# Explore the promotion with different market sizes\ndf_bar = df.groupby(['Promotion','MarketSize']).size().to_frame().reset_index()\ndf_bar.rename({0:'NumOfStore'}, axis=1, inplace=True)\n\nsns.set_theme()\nplt.figure(figsize=(6,6))\nax = sns.barplot(x='MarketSize', y='NumOfStore',hue='Promotion', \n                 data=df_bar, hue_order=[1,2,3], palette='tab10', order=['Small', 'Medium','Large'])\n# ax.set(xlabel='Promotion Type', ylabel='Number of Stores', fontsize=18)\nplt.xlabel('Market Size', fontsize=14)\nplt.ylabel('Number of Promotions', fontsize=14)\nplt.legend(title='Promotion')\nplt.title('Number of Promotions by Market Sizes', fontsize=14)\nplt.show()","9f6c44a6":"# Explore the sales with promotion and market sizes\nfig= plt.figure(figsize=(6,6))\n# ax = sns.displot(x=\"SalesInThousands\", data=df, hue='MarketSize',\n#                  col='Promotion', kind='kde', col_order=[1,2,3], hue_order=['Small','Medium','Large'])\n\nax = sns.boxplot(y=\"SalesInThousands\", data=df, x='Promotion', \n                 order =[1,2,3])\nax.set_ylabel('Sales (in thousands)')\nax.set_xlabel('Promotions')\nax.set_title('Revenue of Different Promotions', fontsize=14)\nplt.show()","d946469a":"treemap = df.groupby(['MarketSize','Promotion'])['SalesInThousands'].sum().to_frame().reset_index()\ntreemap['Market-Promotion'] = treemap['MarketSize'].astype(str) + '- P' + treemap['Promotion'].astype(str)\nfig = plt.figure(figsize=(6,6))\nsquarify.plot(sizes=treemap['SalesInThousands'], label=treemap['Market-Promotion'], alpha=.7)\nplt.title(\"Treemap of Sales by Market Sizes and Promotions\", fontsize =14, pad=12)\nplt.show()","2438fda4":"df.groupby('Promotion')['SalesInThousands'].mean()","cc296d0b":"p1_sale = df[df['Promotion'] == 1]['SalesInThousands']\np2_sale = df[df['Promotion'] == 2]['SalesInThousands']\np3_sale = df[df['Promotion'] == 3]['SalesInThousands']","4c46dab1":"stats.f_oneway(p1_sale, p2_sale, p3_sale)","d8f55b17":"tukey = pairwise_tukeyhsd(endog=df['SalesInThousands'],     \n                          groups=df['Promotion'],   \n                          alpha=0.05)          \n\ntukey.plot_simultaneous()    \n# plt.vlines(x=49.57,ymin=-0.5,ymax=4.5, color=\"red\")\nplt.title(\"Tukey post hoc test for three types of promotion in all market sizes\")\ntukey.summary()   ","1731bdbf":"# Data preparation\ndf['market-promotion'] = df['MarketSize'].astype(str) + '-' + df['Promotion'].astype(str)\ndf.head(3)","36fbd86f":"large1 = df.loc[(df['market-promotion']=='Large-1'), 'SalesInThousands']\nlarge2 = df.loc[(df['market-promotion']=='Large-2'), 'SalesInThousands']\nlarge3 = df.loc[(df['market-promotion']=='Large-3'), 'SalesInThousands']\n\nmedium1 = df.loc[(df['market-promotion']=='Medium-1'), 'SalesInThousands']\nmedium2 = df.loc[(df['market-promotion']=='Medium-2'), 'SalesInThousands']\nmedium3 = df.loc[(df['market-promotion']=='Medium-3'), 'SalesInThousands']\n\nsmall1 = df.loc[(df['market-promotion']=='Small-1'), 'SalesInThousands']\nsmall2 = df.loc[(df['market-promotion']=='Small-2'), 'SalesInThousands']\nsmall3 = df.loc[(df['market-promotion']=='Small-3'), 'SalesInThousands']","e5c9c6d7":"stats.f_oneway(small1, small2, small3)  ","48c2516a":"small = df.loc[df['MarketSize'] == 'Small', :]\n\ntukey_small = pairwise_tukeyhsd(endog=small['SalesInThousands'],  \n                          groups=small['Promotion'],   \n                          alpha=0.05)  \n\ntukey_small.plot_simultaneous()    \nplt.title(\"Multiple Comparisons Between All Promotion in Small Market \")\nplt.xlabel(\"Sales In Thousands\")\nplt.ylabel(\"Promotion\")\n# plt.vlines(x=49.57,ymin=-0.5,ymax=4.5, color=\"red\")\n\ntukey_small.summary()","fb6cc567":"stats.f_oneway(medium1, medium2, medium3)  ","516726e2":"medium = df.loc[df['MarketSize'] == 'Medium', :]\ntukey_medium = pairwise_tukeyhsd(endog=medium['SalesInThousands'],  \n                          groups=medium['Promotion'],   \n                          alpha=0.05)  \n\ntukey_medium.plot_simultaneous()    \nplt.title(\"Multiple Comparisons Between All Promotion in Large Market \")\nplt.xlabel(\"Sales In Thousands\")\nplt.ylabel(\"Promotion\")\n# plt.vlines(x=49.57,ymin=-0.5,ymax=4.5, color=\"red\")\n\ntukey_medium.summary()  ","1572e6ec":"stats.f_oneway(large1, large2, large3)  ","23d9252a":"large = df.loc[df['MarketSize'] == 'Large', :]\n\ntukey_large = pairwise_tukeyhsd(endog=large['SalesInThousands'],  \n                          groups=large['Promotion'],   \n                          alpha=0.05)  \n\ntukey_large.plot_simultaneous()    \nplt.title(\"Multiple Comparisons Between All Promotion in Medium Market \")\nplt.xlabel(\"Sales In Thousands\")\nplt.ylabel(\"Promotion\")\n# plt.vlines(x=49.57,ymin=-0.5,ymax=4.5, color=\"red\")\n\ntukey_large.summary() ","15949a95":"### Store Information EDA <a class=\"anchor\" id=\"chapter3\"><\/a>","c3bbbe64":"### Conclusion <a class=\"anchor\" id=\"chapter5\"><\/a>\n\nThe ANOVA and post hoc tests found that promotions 1 and 3 generate a higher mean revenue than promotion 2 in all types of markets. Thus, the company could consider using promotions 1 and 3 in their future market campaign. ","deef94a3":"**Results from tests in small, medium and large market size:**\n\nThe results for promotions on large, medium and small market size yields the same results as the overall one. ","fea77933":"### Small Market <a class=\"anchor\" id=\"section_4_2\"><\/a>","3d26c4c9":"**Results from ANOVA test with all market sizes:**\n\nThe test output yields an F-statistic of 21.95, and the p-value is 6.766*10^-10, indicating a significant promotion effect on sales revenue. The p-value is significant at a 99% confidence level. \n\nNext, we will do a post-hoc test for each pair of promotions.","7624f95e":"### ANOVA and Post Hoc Test <a class=\"anchor\" id=\"chapter4\"><\/a>","67cc5142":"### All Types of Markets <a class=\"anchor\" id=\"section_4_1\"><\/a>","eea0b5e7":"**Results from post-hoc Tukey test with all market sizes:**\n\nThe Tukey post hoc test indicates that there is a significant difference between promotion 2 and others. However, there is no difference between 1 and 3. \n\nNext, we would like to know if there is a specific promotion suitable for each market.\n","9c9e066c":"### Data Cleaning <a class=\"anchor\" id=\"chapter2\"><\/a>","8578b5e8":"### Large Market <a class=\"anchor\" id=\"section_4_4\"><\/a>","ac75df92":"### Table of Contents\n\n* [Introduction](#chapter1)\n* [Data Cleaning](#chapter2)\n* [Store Information EDA](#chapter3)\n* [ANOVA and Post Hoc Test](#chapter4)\n * [All Types of Markets](#section_4_1)\n * [Small Market](#section_4_2)\n * [Medium Market](#section_4_3)\n * [Large Market](#section_4_4)\n* [Conclusion](#chapter5)","dc2f658b":"Luckily we have a very clean dataset","8712a1ce":"### Introduction <a class=\"anchor\" id=\"chapter1\"><\/a>\n\nA fast-food chain is planning to add a new item to their menu, and they are deciding which promotion campaign to promote the latest products. The chain designs three campaigns and tests the effects of each promotion by assigning one type to each store. \n\nIn this project, A\/B testing with ANOVA is used to determine which advertising works the best. \n\nWe find that promotions 1 and 3 work better than the second promotion across all the market sizes. Also, there is no difference in the mean of sales generated by the first and third promotions. Thus we recommend these two to the chain to promote their new products in all types of stores.  ","554132d7":"### Medium Market <a class=\"anchor\" id=\"section_4_3\"><\/a>"}}