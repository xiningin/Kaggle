{"cell_type":{"aced6e75":"code","774a0c97":"code","3c706760":"code","9d5d7b37":"code","4408abdb":"code","ee43d2d8":"code","ac8e9f37":"code","1b647659":"code","e23f4c6e":"code","5e0d0f8b":"code","615860b5":"code","138d9037":"code","ef8666ac":"code","0bbc8365":"code","492f85c0":"code","1c4f05a0":"code","adb758f2":"code","e1521f26":"code","aebe9d94":"code","24b52152":"code","10a08fa6":"code","ed8dfe06":"code","1a89f094":"code","16a6d9a8":"code","55113e5e":"code","5e72f28c":"code","35a03bdb":"code","1d3c4460":"code","125ca7c9":"code","d783a1f8":"code","1f29a68d":"code","d441cb4f":"code","57e307eb":"code","2cd2f6c1":"markdown","5ee86977":"markdown","579c970e":"markdown","5d6ed1b7":"markdown","aa18071d":"markdown","fb5a3ed5":"markdown","436fca5c":"markdown","8df6e37b":"markdown","767b7b2a":"markdown","8c510ae7":"markdown","fe18f1de":"markdown","de1db663":"markdown","330676b4":"markdown","0cba6001":"markdown","d9cdc439":"markdown","4c42a9fe":"markdown","bc7d53dd":"markdown","637ce8ac":"markdown","247603c4":"markdown","f373e58f":"markdown","b5930402":"markdown","f3812055":"markdown","dc6e1d4d":"markdown","f0e57134":"markdown","a307c218":"markdown","d53bfbad":"markdown","2dd6542c":"markdown","30f02254":"markdown","bceb6f22":"markdown","4e551926":"markdown","b7f34b4f":"markdown"},"source":{"aced6e75":"import pandas as pd","774a0c97":"# ToDo: Carregar o conjunto de dados\n# dados_queimadas = pd.read_csv(..., encoding = 'latin')","3c706760":"# ToDo: Listas os 5 primeiros elementos da tabela carregada\n# dados_queimadas.head(n = ...)","9d5d7b37":"dados_queimadas[\"year\"].unique()","4408abdb":"# ToDo: Visualizar os valores \u00fanicos do atributo `state`\n# dados_queimadas[...].unique()","ee43d2d8":"# ToDo: Visualizar os valores \u00fanicos do atributo `month`\n# dados_queimadas[...].unique()","ac8e9f37":"# ToDo: Visualizar os valores \u00fanicos do atributo `date`\n# dados_queimadas[...].unique()","1b647659":"# ToDo: Visualizar os valores \u00fanicos do atributo `number`\n# dados_queimadas[...].unique()","e23f4c6e":"# ToDo: Filtrar os dados utilizando \u00edndice l\u00f3gico\n# dados_queimadas_amazonas = dados_queimadas[dados_queimadas[\"...\"] == ...]","5e0d0f8b":"# ToDo: Liste os 3 primeiros itens\n# dados_queimadas_amazonas.head(n = ...)","615860b5":"# ToDo: Agrupe os dados utilizando o atributo `year`\n# dados_queimadas_amazonas_por_ano = dados_queimadas_amazonas.[ ... ](\"year\")","138d9037":"# ToDo: Aplique uma agrega\u00e7\u00e3o de soma nos dados que foram agrupados pelo atributo `year`\n# dados_queimadas_amazonas_por_ano = dados_queimadas_amazonas_por_ano.[ ... ]","ef8666ac":"# ToDo: Veja o conte\u00fado do atributo `number`\n# dados_queimadas_amazonas_por_ano[\"...\"]","0bbc8365":"from plotnine import *","492f85c0":"# ToDo: Fa\u00e7a o plot da varia\u00e7\u00e3o da identifica\u00e7\u00e3o de fogos no Amazonas utilizando plotnine\n# Lembre-se de que, o atributo `number` (y) representa a quantidade de identifica\u00e7\u00f5es e o \u00edndice do pandas.DataFrame representa os anos\n# assim, h\u00e1 uma rela\u00e7\u00e3o ano -> number no pandas.DataFrame\n\n# (\n#     ggplot(dados_queimadas_amazonas_por_ano, aes(x = \"dados_queimadas_amazonas_por_ano.index\", y = \"...\"))\n#         + geom_line()\n#         + ggtitle(\"Varia\u00e7\u00e3o da identifica\u00e7\u00e3o de fogos na floresta no Amazonas (1998 \u00e0 2017)\")\n#         + xlab(\"Ano\")\n#         + ylab(\"Quantidade de identifica\u00e7\u00f5es\")\n# )","1c4f05a0":"# ToDo: Fa\u00e7a o plot do atributo `number`\n# dados_queimadas_amazonas_por_ano[\"...\"].plot(figsize = (8, 8))","adb758f2":"# ToDo: Aplicar um filtro l\u00f3gico para identificar o ano que possui o valor m\u00e1ximo\n# dados_queimadas_amazonas_por_ano[dados_queimadas_amazonas_por_ano[\"...\"] == dados_queimadas_amazonas_por_ano[\"...\"].max()]","e1521f26":"# ToDo: Com filtro l\u00f3gico, selecione os dados do Amazonas para encontrar as identifica\u00e7\u00f5es de inc\u00eandios no ano de 2002\n# dados_queimadas_amazonas_2002 = dados_queimadas_amazonas[ ... ]\n# dados_queimadas_amazonas_2002","aebe9d94":"# ToDo: Filtre para encontrar o m\u00eas com a maior quantidade de identifica\u00e7\u00f5es em 2002, no Amazonas.\n# dados_queimadas_amazonas_2002[dados_queimadas_amazonas_2002[\"number\"] == dados_queimadas_amazonas_2002[\"number\"].[ ... ]]","24b52152":"# ToDo: Agrupar pelos atributos `year` e `state`\n# dados_queimadas_soma_dos_anos = dados_queimadas.groupby([..., ...])","10a08fa6":"# ToDo: Fa\u00e7a a agrega\u00e7\u00e3o de soma dos dados agrupados \n# dados_queimadas_soma_dos_anos = dados_queimadas_soma_dos_anos.[ ... ]\n# dados_queimadas_soma_dos_anos","ed8dfe06":"# Veja que a tabela acima para entender a diferen\u00e7a com a tabela gerada\ndados_queimadas_soma_dos_anos.reset_index(inplace = True)\ndados_queimadas_soma_dos_anos","1a89f094":"(\n    ggplot(dados_queimadas_soma_dos_anos, aes(x = \"year\", y = \"number\", color = \"factor(state)\"))\n        + geom_line()\n        + facet_wrap(\"~state\")\n        + ggtitle(\"Varia\u00e7\u00e3o temporal das identifica\u00e7\u00f5es de fogo em floresta (1998 \u00e0 2017)\")\n        + xlab(\"Ano\")\n        + ylab(\"Quantidade de identifica\u00e7\u00f5es\")\n        + theme(axis_text_x = element_text(angle = 45))\n)","16a6d9a8":"# ToDo: Encontrar a maior quantidade de identifica\u00e7\u00f5es j\u00e1 feitas\n# dados_queimadas_soma_dos_anos[ ... ]","55113e5e":"def ranking_by_year(dataframe, year):\n    \"\"\"Gera um gr\u00e1fico de barra utilizando a ordem crescente dos dados\n    \n    Args:\n        dataframe (pandas.DataFrame): Conjunto de dados de fogos na floresta\n        year (int): ano que se deseja visualizar\n    Returns:\n        plotnine.ggplot.ggplot: Figura gerada\n    \"\"\"\n    \n    _df = dataframe[dataframe[\"year\"] == year].sort_values(by = \"number\")\n    _df[\"state\"] = pd.Categorical(_df[\"state\"], categories=_df[\"state\"].unique()[::-1])\n    \n    return (\n        ggplot(_df.sort_values(by = \"number\"), aes(x = \"state\", y = \"number\", color = \"state\")) \n            + geom_bar(stat = \"identity\")\n            + ylab(\"Ano\")\n            + xlab(\"Quantidade de identifica\u00e7\u00f5es\")\n            + ggtitle(f\"Ranking das maiores identifica\u00e7\u00f5es ({year})\")\n            + coord_flip()\n    )","5e72f28c":"# ToDo: Visualizar o ranking de identifica\u00e7\u00f5es para os anos de 1999, 2005, 2010 e 2015\n# Dica: Consulte a docstring (Texto abaixo da cria\u00e7\u00e3o da fun\u00e7\u00e3o) para entender seus par\u00e2metros\n# ranking_by_year(dados_queimadas_soma_dos_anos, ...)","35a03bdb":"estados_amazonia_legal = [\n    \"Acre\", \"Amapa\", \"Amazonas\", \"Mato Grosso\", \"Par\u00e1\", \"Rondonia\", \"Roraima\", \"Tocantins\", \"Maranhao\"\n]","1d3c4460":"# ToDo: Filtre os dados para somente aqueles que est\u00e3o dentro dos estados da Amaz\u00f4nia Legal\n# dados_queimadas_amazonia_legal = dados_queimadas[dados_queimadas[ ... ].isin(estados_amazonia_legal)]\n# dados_queimadas_amazonia_legal.head(10)","125ca7c9":"# ToDo: Aplique a agrega\u00e7\u00e3o de soma no atributo `number`\n# dados_queimadas_amazonia_legal_somageral = dados_queimadas_amazonia_legal[\"number\"].[ ... ]\n# dados_queimadas_amazonia_legal_somageral","d783a1f8":"# ToDo: Filtre os dados em que o atributo `state` N\u00c3O pertenca a Amaz\u00f4nia Legal\n# Note o ~ dentro do comando, ele \u00e9 vital para o funcionamento dessa opera\u00e7\u00e3o\n\n# dados_queimadas_naoamazonia_legal = dados_queimadas[~dados_queimadas[ ... ].isin( ... )]\n# dados_queimadas_naoamazonia_legal.head(10)","1f29a68d":"# ToDo: Aplique uma agrega\u00e7\u00e3o de soma\n# dados_queimadas_naoamazonia_legalsomageral = dados_queimadas_naoamazonia_legalsomageral[ ... ].[]\n# dados_queimadas_naoamazonia_legalsomageral","d441cb4f":"# ToDo: Crie um pandas.DataFrame com os atributos `local` e `quantidade`, onde:\n#  - local: Voc\u00ea vai inserir nessa coluna os locais (\"Amaz\u00f4nia legal\", \"Demais estados\")\n#  - quantidade: Voc\u00ea vai inserir nessa coluna as quantidade de identifica\u00e7\u00f5es em cada local (dados_queimadas_amazonia_legal_somageral e dados_queimadas_naoamazonia_legalsomageral)\n\n# diferencas = pd.DataFrame({\n#     ...: ...,\n#     ...: ...\n# })\n# diferencas","57e307eb":"# ToDo: Crie um gr\u00e1fico de barra com o dataframe que voc\u00ea gerou anteriormente\n# ggplot(diferencas, aes(x = \"...\", y = \"...\")) + geom_bar(stat = \"identity\")","2cd2f6c1":"Aqui utilizamos o processo de filtro booleano para fazer essa identifica\u00e7\u00e3o, mas poderiamos utilizar o `pandas.DataFrame.query` tamb\u00e9m!\n\n```python\ndados_queimadas_amazonas_por_ano.query(\"number == number.max()\")\n```\n\n> Nota: Este m\u00e9todo n\u00e3o pode ser utilizado para a solu\u00e7\u00e3o do exerc\u00edcio apresentado imediatamente acima\n","5ee86977":"Olha a quantidade de informa\u00e7\u00e3o que conseguimos obter! Tem bastante coisa que pode ser feita. Deste ponto, t\u00e9cnicas para fazer an\u00e1lises temporais nesses dados poderiam ser aplicadas. Tais t\u00e9cnicas n\u00e3o ser\u00e3o abordadas neste exemplo.\n\nEspero que esta parte da an\u00e1lise tenha dispertado em voc\u00ea uma curiosidade para continuar a \"cavar\" nesses dados. Analisando o gr\u00e1fico \u00e9 poss\u00edvel perceber que Mato Grosso tem uma quantidade enorme de identifica\u00e7\u00f5es. Ser\u00e1 que ele tem a maior quantidade de identifica\u00e7\u00f5es registradas em um \u00fanico ano ? Se sim, qual ser\u00e1 que foi esse ano ?","579c970e":"Com os dados carregados, vamos olhar a estrutura deles.","5d6ed1b7":"Nosso objetivo nessa parte da an\u00e1lise \u00e9 verificar a quantidade de identifica\u00e7\u00f5es dentro e fora da Amaz\u00f4nia Legal e a representatividade desses resultados com o resultado nacional.","aa18071d":"Sabe de uma coisa, acho que saber s\u00f3 o que mais tem fogos em florestas n\u00e3o basta. Vamos criar um *ranking* de quem s\u00e3o aqueles que mais tem identifica\u00e7\u00f5es dentro dessa s\u00e9rie, por ano.\n\nPara isso, foi criada a fun\u00e7\u00e3o auxiliar `ranking_by_year`, essa vai ajudar a criar um gr\u00e1fico de barra que facilita a visualiza\u00e7\u00e3o.\n\n> A fun\u00e7\u00e3o auxiliar utiliza o tipo de dados [pandas.Categorical](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.Categorical.html), este representa um tipo categ\u00f3tico nas estat\u00edsticas, com a diferen\u00e7a de que essa pode ser definida seguindo alguma ordem. O crit\u00e9rio para ordena\u00e7\u00e3o pode ser definido pelos utilizadores desta classe. Para fazer uma compara\u00e7\u00e3o direta, essa classe \u00e9 equivalente ao [factor](https:\/\/www.rdocumentation.org\/packages\/base\/versions\/3.6.2\/topics\/factor) do R.","fb5a3ed5":"Visualmente sabemos que \u00e9 o m\u00eas de Setembro, mas e se essa tabela fosse maior ? O que poderiamos fazer ? `Filtrar`!","436fca5c":"Al\u00e9m do f\u00edltro de \u00edndice l\u00f3gico, a busca poderia ser feita atrav\u00e9s do comando [pandas.DataFrame.query](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.DataFrame.query.html)\n\n```python\ndados_queimadas_amazonas = dados_queimadas_amazonas.query(\"state == 'Amazonas'\")\ndados_queimadas_amazonas.head()\n```\n\n> Nota: Esse comando n\u00e3o pode ser utilizado no `ToDo` apresentado anteriormente\n","8df6e37b":"<img src=\"https:\/\/suspicious-wescoff-e06084.netlify.app\/amazonia-legal.png\" align=\"left\" width=\"180\" \/>\n\n### Amaz\u00f4nia Legal\n\nUma parte que \u00e9 interessante de ser explorada neste conjunto de dados s\u00e3o as caracter\u00edsticas dos estados que fazem parte da Amaz\u00f4nia Legal.\n\n> A regi\u00e3o da Amaz\u00f4nia Legal representa uma divis\u00e3o sociopol\u00edtica, se extendendo completamente pelos estados Acre, Amap\u00e1, Amazonas, Mato Grosso, Par\u00e1, Rond\u00f4nia, Roraima, Tocantins. Cont\u00e9m tamb\u00e9m uma parte do estado do Maranh\u00e3o. Informa\u00e7\u00f5es retiradas do [oeco.org](https:\/\/www.oeco.org.br\/dicionario-ambiental\/28783-o-que-e-a-amazonia-legal\/)","767b7b2a":"Agora, vamos olhar para cada um dos atributos que est\u00e1 dispon\u00edvel nessa tabela, para cada um deles, vamos verificar os valores poss\u00edveis. Essa abordagem pode ser \u00fatil para nos ajudar a come\u00e7ar a fazer perguntas aos dados.\n\n> O m\u00e9todo [pandas.Series.unique](https:\/\/pandas.pydata.org\/pandas-docs\/stable\/reference\/api\/pandas.unique.html) devolve os valores sem nenhuma repeti\u00e7\u00e3o.","8c510ae7":"Certo, identificamos o ano de 2002. Dentro deste ano, qual foi o m\u00eas em que mais ocorreram identifica\u00e7\u00f5es de fogo na floresta ?","fe18f1de":"<img src=\"https:\/\/suspicious-wescoff-e06084.netlify.app\/banner_notebook.png\"\/>\n\n# Exerc\u00edcio de an\u00e1lise de dados com Python\n> *Uma grande jornada come\u00e7a com um pequeno passo*\n\n* Sum\u00e1rio:\n    * [Livro **Introdu\u00e7\u00e3o \u00e0 An\u00e1lise de Dados**](https:\/\/dataat.github.io\/introducao-analise-de-dados\/)\n    * [Exemplo de An\u00e1lise de Dados em R](https:\/\/www.kaggle.com\/oldlipe\/intro-ds-r-worcap2020)\n\nEste documento apresenta uma lista de exerc\u00edcios para a fixa\u00e7\u00e3o dos conceitos introdut\u00f3rios vistos no minicurso de introdu\u00e7\u00e3o \u00e0 Data Science utilizando R e Python. A ideia \u00e9 que voc\u00ea veja como essas ferramentas podem ser utilizadas com conjuntos de dados reais.","de1db663":"O matplotlib, citado anteriormente, poderia ser utilizado atrav\u00e9s do pr\u00f3prio `pandas.DataFrame`.","330676b4":"### Quantidade de identifica\u00e7\u00f5es dentro da Amaz\u00f4nia Legal X Demais estados","0cba6001":"Fa\u00e7amos o mesmo para os dados dos estados que n\u00e3o s\u00e3o da `Amaz\u00f4nia Legal`","d9cdc439":"Agora que temos os dados do `Amazonas` separados, vamos olhar como foi a varia\u00e7\u00e3o da quantidade de identifica\u00e7\u00f5es ao longo do ano.","4c42a9fe":"**Nota**: Os valores do atributo `number`, diferente dos demais, tem uma varia\u00e7\u00e3o cont\u00ednua, o que torna mais dif\u00edcil do m\u00e9todo `pandas.Series.unique` gerar uma lista resumida dos valores, j\u00e1 que \u00e9 mais dif\u00edcil haver repeti\u00e7\u00f5es neste dom\u00ednio de dados.","bc7d53dd":"Acho que a visualiza\u00e7\u00e3o desses dados deixa tudo mais interessante! Agora o [plotnine](https:\/\/plotnine.readthedocs.io\/en\/stable\/) pode nos ajudar!","637ce8ac":"Vamos criar a lista de estados que pertencem \u00e0 Amaz\u00f4nia Legal","247603c4":"Primeiro vamos pegar os valores que est\u00e3o no \u00edndice e passar eles para atributos. Isso vai facilitar o consumo dessas informa\u00e7\u00f5es.","f373e58f":"Olhando essa figura me veio a curiosidade de saber em qual ano, no estado do Amazonas, houveram mais identifica\u00e7\u00f5es. Vamos tentar extrair essa informa\u00e7\u00e3o","b5930402":"Pronto! Isso j\u00e1 nos ajudou a identificar diversos dos valores poss\u00edveis e ainda, enquanto fomos fazendo a visualiza\u00e7\u00e3o dessas informa\u00e7\u00f5es iniciais perguntas para fazer a esses dados forma surgindo. Enquanto estava gerando pensei em diversas coisas, sendo algumas delas:\n\n- Qual ano teve a maior quantidade de identifica\u00e7\u00f5es de fogos em florestas ?\n- Qual dos estados tem mais identifica\u00e7\u00f5es acumulada ao longo dos anos ?\n- Em qual dos meses, de maneira geral, mais ocorrem as identifica\u00e7\u00f5es ?\n- Como foi a varia\u00e7\u00e3o das identifica\u00e7\u00f5es no estado `X` ?\n- Dentro da [Amaz\u00f4nia legal](https:\/\/www.ibge.gov.br\/geociencias\/cartas-e-mapas\/mapas-regionais\/15819-amazonia-legal.html?=&t=o-que-e), qual estado apresenta a maior quantidade de identifica\u00e7\u00f5es ?\n\nAl\u00e9m dessas, v\u00e1rias outras perguntas poderiam ser feitas, acho que aqui o limite \u00e9 realmente a intepreta\u00e7\u00e3o e necessidade de quem est\u00e1 fazendo a an\u00e1lise dos dados. \n\n> Neste exerc\u00edcio, vamos buscar responder algumas dessas perguntas. Se voc\u00ea achar legal, sinta-se livre para fazer as demais an\u00e1lises e at\u00e9 mesmo adicionar outras informa\u00e7\u00f5es e ideias que n\u00e3o foram apresentadas aqui","f3812055":"Vamos gerar a quatidade de identifica\u00e7\u00f5es que foram feitas nesses dados","dc6e1d4d":"Calculamos o somat\u00f3rio e ent\u00e3o vamos gerar uma figura para entendermos a dimens\u00e3o das diferen\u00e7as","f0e57134":"**Fazendo a visualiza\u00e7\u00e3o desses dados com plotnine**","a307c218":"### Como foi a varia\u00e7\u00e3o das identifica\u00e7\u00f5es no estado do Amazonas ?\n\nO que acha de come\u00e7armos a olhar para alguns estados ? Primeiro vamos come\u00e7ar pelo Amazonas.\n\n<ht>","d53bfbad":"## Carregando e entendendo os dados\n\nNesta primeira parte da atividade, o objetivo \u00e9 carregar e entender qual \u00e9 a disposi\u00e7\u00e3o dos atributos dos dados.\n\n<hr>","2dd6542c":"Uma vez que o pandas est\u00e1 carregado, ele pode ser utilizado para carregar os dados no formato `pandas.DataFrame`","30f02254":"### Verificando o contexto geral dos estados\n\nSaindo um pouco de um contexto mais espec\u00edfico, vamos olhar para o contexto geral, considerando todos os estados.\n\n<hr>\n\nNessa parte, vamos come\u00e7ar analisando quais estados mais tem identifica\u00e7\u00f5es desde que elas come\u00e7aram a ser registradas","bceb6f22":"Agora, vamos filtrar os dados com essa lista","4e551926":"## Fogo nas florestas do Brasil\n\nInc\u00eandios florestais representam um grande problema na batalha pela preserva\u00e7\u00e3o das Florestas Tropicais. Assim, compreender os locais em que esses inc\u00eandios, pode ajudar a tomada de decis\u00e3o e cria\u00e7\u00e3o de pol\u00edticas p\u00fablicas que ajudem na preserva\u00e7\u00e3o. O carater temporal deste conjunto de dados o torna especialmente interessante por permitir o acompanhamento da evolu\u00e7\u00e3o deste tipo de ocorr\u00eancia nos estados do Brasil.\n\n> O conjunto de dados foi retirado diretamente do Kaggle, dispon\u00edvel na p\u00e1gina [Forest Fires in Brazil](https:\/\/www.kaggle.com\/gustavomodelli\/forest-fires-in-brazil). No conjunto de dados est\u00e3o presente informa\u00e7\u00f5es sobre o n\u00famero de inc\u00eandios florestais no Brasil dividido por estado. A parte temporal tem uma extens\u00e3o que vai de 1998 \u00e0 2017.\n","b7f34b4f":"Apenas para lembrar, o Python possui diversas bibliotecas para a visualiza\u00e7\u00e3o de dados, aqui estou mostrando o `plotnine`, mas muitas outras poderia ser aplicadas, como o pr\u00f3prio [matplotlib](https:\/\/matplotlib.org\/), al\u00e9m de outras como:\n\n- [HoloViews](http:\/\/holoviews.org\/index.html): Visualiza\u00e7\u00e3o simplificada de dados;\n- [GeoViews](https:\/\/geoviews.org\/): Criada com base na HoloViews, facilita a visualiza\u00e7\u00e3o de dados geoespaciais;\n- [Datashader](https:\/\/datashader.org\/): Biblioteca focada na visualiza\u00e7\u00e3o de grandes conjuntos de dados;\n- [Seaborn](https:\/\/seaborn.pydata.org\/): Criada para simplificar a visualiza\u00e7\u00e3o de dados. Usa como base o matplotlib."}}