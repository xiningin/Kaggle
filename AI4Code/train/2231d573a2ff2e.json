{"cell_type":{"c3f78558":"code","a8994d25":"code","62f1373a":"code","7211b1b5":"code","659c22fb":"code","be4d1b71":"code","1dcf8889":"code","ac32583b":"code","3e152495":"code","d868dd12":"code","c75b44c2":"code","9cbfb42f":"code","f002ca35":"markdown","05a8700f":"markdown","b3261b36":"markdown","d1d6993f":"markdown","6b438405":"markdown","9b338734":"markdown","6ebc632b":"markdown","1b399b02":"markdown"},"source":{"c3f78558":"import pandas as pd\nimport warnings\nimport folium\nimport numpy as np\nimport seaborn as sns\nimport matplotlib\nimport matplotlib.colors as mcolors\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nfrom datetime import datetime\nfrom folium.plugins import HeatMap\nwarnings.filterwarnings('ignore')\n\nyears = mdates.YearLocator()\ndays = mdates.DateLocator()","a8994d25":"data = pd.read_csv(\"\/kaggle\/input\/globalterrorismdb_0718dist.csv\",encoding=\"iso-8859-1\")\nindonesia_terrorism = data[data.country_txt=='Indonesia'].reset_index(drop=True)\nindonesia_terrorism['count']=1\n\ntime = []\nfor i in range(len(indonesia_terrorism)):\n    if indonesia_terrorism['iday'][i] == 0:\n        day = 10\n    else:\n        day = indonesia_terrorism['iday'][i]\n    time.append(datetime.strptime(\"%s-%s-%s\"%(day,\n                                              indonesia_terrorism['imonth'][i],\n                                              indonesia_terrorism['iyear'][i]),'%d-%m-%Y'))\nindonesia_terrorism['time_event'] = time","62f1373a":"df = indonesia_terrorism.groupby(pd.Grouper(key=\"time_event\",freq=\"Y\")).sum()[[\"count\"]]\nlabel = df.reset_index()[\"time_event\"].apply(lambda x:datetime.strftime(x,'%Y'))\nfig,ax=plt.subplots(figsize=(10,5))\ndf.plot(kind='line',ax=ax,marker='o',legend=False)\nax.grid(which='both')\nax.tick_params(axis='x',which=\"minor\",bottom=False)\nfor i in ax.spines:\n    if i!=\"bottom\" and i!='left':\n        ax.spines[i].set_visible(False)\n    else:\n        ax.spines[i].set_color('#9a9898')\nax.set_xlabel('')\nplt.show()","7211b1b5":"print(df.sort_values('count',ascending=False)[:10])","659c22fb":"## Plot Function\ndef barchart(kind):\n    city_terrorism = indonesia_terrorism.groupby('city').sum()[[kind]].reset_index()\n    city_terrorism = city_terrorism[city_terrorism[\"city\"]!='Unknown'].set_index('city')\n\n    cm = matplotlib.cm.get_cmap('winter')\n    colors=[cm(1.*i\/20) for i in range(20)]\n    rvb = mcolors.LinearSegmentedColormap.from_list(\"\", colors)\n    N = 10\n    x = np.arange(N).astype(float)\n    fig,ax=plt.subplots(figsize=(5,5))\n    plt.barh(np.array(city_terrorism.sort_values(kind)[-10:].index),\n             np.array(city_terrorism.sort_values(kind)[-10:][kind]),\n             color=rvb(x\/N))\n    ax.set_ylabel('')\n    for i in ax.spines:\n        ax.spines[i].set_visible(False)\n    ax.set_xticks([])\n    for patch in ax.patches:\n        bl = patch.get_xy()\n        x = patch.get_width()+0.04*max(city_terrorism[kind])\n        y = 0.3 * patch.get_height() + bl[1] \n        ax.text(x,y,\"%d\" %(patch.get_width()),\n                ha='center', weight = 'bold')\n    if kind=='count':\n        ax.set_title('Top 10 City with High Terrorism',fontdict={'fontweight':'bold'})\n    else:\n        ax.set_title('Top 10 City with High Victim',fontdict={'fontweight':'bold'})\n    plt.show()\n    return city_terrorism.sort_values(kind,ascending=False)[:10]\n\ndef line_city(new_df,kind):\n    df = pd.DataFrame({})\n    for i in new_df.index:\n        df = df.append(indonesia_terrorism[indonesia_terrorism['city']==i])\n    df = pd.pivot_table(df,columns='city',index='time_event',values=kind,aggfunc=np.sum,fill_value=0).reset_index()\n    df = df.groupby(pd.Grouper(key=\"time_event\",freq=\"Y\")).sum()\n    label = df.reset_index()[\"time_event\"].apply(lambda x:datetime.strftime(x,'%Y'))\n    fig,ax=plt.subplots(figsize=(10,5))\n    df.plot(kind='line',ax=ax,marker='o')\n    ax.grid(which='both')\n    ax.tick_params(axis='x',which=\"minor\",bottom=False)\n    for i in ax.spines:\n        if i!=\"bottom\" and i!='left':\n            ax.spines[i].set_visible(False)\n        else:\n            ax.spines[i].set_color('#9a9898')\n    ax.set_xlabel('')\n    ax.legend(ncol=5,bbox_to_anchor=(1, -0.1))\n    plt.show()\n\ndef heatmaps(kind):\n    fig,ax=plt.subplots(figsize=(20,15),nrows=2,ncols=2)\n    for i in range(2):\n        for j in range(2):\n            if i==0 and j==0:\n                cities = 'Jakarta'\n            elif i==0 and j==1:\n                cities = \"Banda Aceh\"\n            elif i==1 and j==0:\n                cities = \"Situbondo\"\n            else:\n                cities = \"Dili\"\n            jakarta = indonesia_terrorism[indonesia_terrorism['city']==cities]\n            jakarta = pd.pivot_table(data=jakarta, values=kind,index='targtype1_txt',\n                                    columns='attacktype1_txt',aggfunc=np.sum,fill_value=0)\n            jakarta.columns = [i.replace('\/','\/\\n').replace(' ','\\n') for i in jakarta.columns]\n\n            sns.heatmap(jakarta, annot=True,ax=ax[i,j],cmap=\"Blues\",linewidths=1)\n            ax[i,j].set_xticklabels(ax[i,j].get_xticklabels(), rotation = 30,color='b',fontdict={'fontsize':9})\n            ax[i,j].set_yticklabels(ax[i,j].get_yticklabels(), rotation = 0,color='b')\n            if j!= 1:\n                ax[i,j].set_ylabel(\"Target Attack Type 1\",fontdict={'fontweight':'bold'})\n            else:\n                ax[i,j].set_ylabel(\"\")\n\n            if i==1:\n                ax[i,j].set_xlabel(\"Attack Type 1\",fontdict={'fontweight':'bold'})\n            else:\n                ax[i,j].set_xlabel(\"\")\n            ax[i,j].set_title('Attack Type with Its Target in %s'%cities,fontdict = {'fontweight':'bold'})\n    fig.suptitle('Top 4 City with High Terrorism',y=0.93,fontsize=22,weight='bold')\n    plt.show()","be4d1b71":"new_df = barchart('count')","1dcf8889":"line_city(new_df,'count')","ac32583b":"crime_map = folium.Map(location=[-6.187549,106.823085], \n#                        tiles = \"Indonesia Terrorism\",\n                      zoom_start = 4)\n\n# Add data for heatmp \ndata_heatmap = indonesia_terrorism[['latitude','longitude']]\ndata_heatmap = indonesia_terrorism.dropna(axis=0, subset=['latitude','longitude'])\ndata_heatmap = [[row['latitude'],row['longitude']] for index, row in data_heatmap.iterrows()]\nHeatMap(data_heatmap, radius=10).add_to(crime_map)\n\n# Plot!\ncrime_map","3e152495":"heatmaps('count')","d868dd12":"heatmaps(\"nkill\")","c75b44c2":"other_df = barchart('nkill')","9cbfb42f":"line_city(other_df,'nkill')","f002ca35":"**I am trying to explore Global Terrorism data but it is specific to the country of Indonesia. This is my first time exploring using Kaggle data.**","05a8700f":"The incident in Kuta with the most victims occurred in 2002.","b3261b36":"Jakarta is the city with the highest number of events, there are 84 events.","d1d6993f":"Kuta became the city with the most victims due to various terrorist incidents","6b438405":"\nMost of the incidents in these cities (Jakarta, Banda Aceh, Situbondo, etc.) occurred between 1995-2001. This can be seen from the increasing number of events in those years.","9b338734":"\nThe most terrorist attacks in Indonesia occurred in 2001. There were 105 events that occurred in that year.","6ebc632b":"\nThe heatmap displays the number of events in each type of attack and the target of attacks that occurred in 4 cities with the highest number of events.","1b399b02":"\nThe heatmap displays the number of victims in each type of attack and the target of attacks that occurred in 4 cities with the highest number of incidents."}}