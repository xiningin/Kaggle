{"cell_type":{"bb4b709f":"code","3e68d65f":"code","8233f593":"code","6af45de9":"code","75acd23d":"code","2f165ee6":"code","9cb5d680":"code","6a2e0694":"code","4978cecf":"code","54473df1":"code","f15aa53f":"code","f78f5f30":"code","a2a14d9e":"code","56d73433":"code","81019c9e":"code","e24c5173":"code","a335a3f5":"markdown","d04aac12":"markdown","c4c594e9":"markdown","00ecda09":"markdown","4d2737f2":"markdown","8196e488":"markdown","1ed66875":"markdown","68b1197c":"markdown","af2c41eb":"markdown","52a1ae1d":"markdown","02c6ef0b":"markdown","d5440cea":"markdown","54b8023c":"markdown","76252ac8":"markdown"},"source":{"bb4b709f":"# Useful libraries\nimport pandas as pd\nimport numpy as np \nimport matplotlib.pyplot as plt","3e68d65f":"titanic = pd.read_csv('..\/input\/titanic-data\/titanic3.csv')","8233f593":"titanic.head()","6af45de9":" titanic.age.plot(kind='hist', title='Histogram for Age', \n                  bins=30, color='c')","75acd23d":"titanic.loc[titanic.age > 70]","2f165ee6":" titanic.fare.plot(kind='hist', title='Histogram for Fare', \n                  bins=30, color='c')","9cb5d680":" titanic.fare.plot(kind='box', title='Boxplot for Fare')","6a2e0694":"titanic.loc[titanic.fare == titanic.fare.max()]","4978cecf":"# LOG Transformation\n'''\nAdding 1.0 to accomodate zero fares, because log(0) is not defined\n'''\nLog_fare = np.log(titanic.fare + 1.0)  ","54473df1":"# Let's look at the histogram of the Log transformation\nLog_fare.plot(kind='hist', title='Histogram for Log_Fare', \n                  bins=30, color='c')","f15aa53f":"pd.qcut(titanic.fare, 4)","f78f5f30":"pd.qcut(titanic.fare, 4, \n        labels = ['very_low_fare', 'low_fare', \n                  'high_fare', 'vey_high_fare'])","a2a14d9e":"fare_labels = ['very_low_fare', 'low_fare','high_fare', 'vey_high_fare'] \n\npd.qcut(titanic.fare, 4, labels=fare_labels). \\\n        value_counts().plot(kind='bar', color='c')","56d73433":"titanic['fare_bin'] = pd.qcut(titanic.fare, 4, fare_labels)","81019c9e":"titanic.drop('fare', axis=1, inplace=True)","e24c5173":"titanic.head()","a335a3f5":"We can see that there are few passengers who have paid exceptional high fare (more than 400) than the rest of the others!  \nLet's also create a Boxplot for passenger fare.  ","d04aac12":"We can see that our resultant histogram is less skewed than the original one (before transformation)   ","c4c594e9":"There are 4 passengers who have paid a very high fare of 512, moreover, they have the same ticket number, and were also in the **First class**. This might a family that booked in last moment. Then, all of them survived to the tragedy.   \n\n\n### Transformation of outliers   \nBy looking at the fare histogram, we can see that we have a very right skewed distribution, so we can reduce the skeweness by applying some kind of transformation. As we know that the passenger fare will never be negative, then, we can apply the **Log** transformation technique.  \n\n#### Log transformation","00ecda09":"# Outliers Analysis   \nOutliers could introduce biased analysis, and also our final models. So, it is important to solve this issue using appropriate techniques. In fact, these outliers often carry some interesting insights, so removing them might not the right solution.  \n\nHere we are going to look at the following techniques to solve the  problem for outliers:   \n-  Log transformation  \n- Binning    \nFor demonstration purpose, we are going to do the whole preprocessing for only one feature (**fare**)","4d2737f2":"We can identify many outliers, but there is one (more than 500) which is significantly far from the others.   \nLet's try to find interesting information about those outliers.","8196e488":"We can see the change in the **fare_bin** column","1ed66875":"Here, we can see that pandas has assigned each observation, one label. So, we have created a categorical feature, where each fare value corresponds to a categorical level (ordinal).  \nNow, we can visualize the number of fare value for each category.","68b1197c":"We can see that pandas has created 4 bins, and each observation has been added into one bin. \nThis technique also allows us to specify a name for each bin.  \nTo do so, we are going to create the following ones which are self explanatory: very_low_fare, low_fare, high_fare, vey_high_fare. Such technique is known as **discretization**. ","af2c41eb":"#### Binning   \nThis is also a very useful technique for outliers treatment. We can the **binning** by using the pandas **qcut** function, that performs quantile-based binning. \nHere we are splitting the passenger fare in 4 bins, where each bin contains almost equal number of observations. ","52a1ae1d":"##### Fare ","02c6ef0b":"We have 6 passengers in the results, with 2 survivors (survived=1) and 4 who did not survive (survived=0)","d5440cea":"We can see that we have almost the same number of observations in each bin.  \nNow that we have analysed and preprocessed the fare feature, we can now create a new feature corresponding to that preprocessed value, and remove the old one.  ","54b8023c":"### Use histogram to understand the distributions  \n\n##### Age feature","76252ac8":"We can see that most of the **age** values are in the [20, 30s] and a very few are in [70, 80s]. \nLet's have have a look a those passengers where their age is more than 70. "}}