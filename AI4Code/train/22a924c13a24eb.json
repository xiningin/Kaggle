{"cell_type":{"ad6d0d16":"code","374a78e6":"code","191e1309":"code","6574e65b":"code","09d2d79c":"code","e90e7432":"code","08180a80":"code","d45e7c38":"code","0a9e62d5":"code","8db66038":"code","76c02ad6":"code","f80b0004":"code","4c443d32":"code","6bbd1c57":"code","e6596957":"code","76ffa959":"code","a3954723":"code","c6d2a636":"code","39d64287":"code","a791b67b":"code","f22b14ff":"code","138b2baf":"code","3e92755e":"markdown","29e7261b":"markdown","849dce4e":"markdown","84b39974":"markdown"},"source":{"ad6d0d16":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport folium\nfrom folium import plugins\nimport seaborn as sns\nimport cv2\nimport matplotlib.pyplot as plt\nimport IPython\nimport time\nimport plotly.express as px","374a78e6":"data0=pd.read_csv('..\/input\/earthquake-in-japan\/japan_20190101-20211009_query.csv')\ndata0[1:2]","191e1309":"print(data0.columns.tolist())","6574e65b":"data0=data0.fillna('N')\ndata1=data0[['time','latitude','longitude','depth','mag',]]\ndata1[0:5]","09d2d79c":"data2=pd.DataFrame(columns=data1.columns.tolist())\nfor i,item in enumerate(data1['time']):\n    data2=pd.concat([data2,data1.loc[i:i]])\ndata2=data2.sort_values(['time']).reset_index(drop=True)        ","e90e7432":"from datetime import datetime as dt\ndata2a=data2.copy()\ndate=[]\nfor item in data2['time']:\n    date+=[dt.strptime(item[0:-5],'%Y-%m-%dT%H:%M:%S')]\ndata2a['date']=date\ndata2a","08180a80":"#!rm *","d45e7c38":"# start=dt.strptime('2021-07-01T00:00:00','%Y-%m-%dT%H:%M:%S')\n# end=dt.strptime('2021-08-01T00:00:00','%Y-%m-%dT%H:%M:%S')","0a9e62d5":"data4=data2a[data2a['latitude']>34][data2a['latitude']<37][data2a['longitude']>139][data2a['longitude']<142]\ndata4=data4.reset_index(drop=True)\ndata4","8db66038":"data4.mag.max()","76c02ad6":"import plotly.express as px\nfig=px.scatter(x=data4['date'],y=data4['mag'])\nfig=px.scatter(data4, x=\"date\", y=\"mag\")\nfig.update_layout(title='Magnituide of earthquake around Tokyo in 2019-2021')\nfig.show()","f80b0004":"#!rm *","4c443d32":"data5=data4[['latitude','longitude',]]\nfor i in range(len(data4)):\n    item=data4.loc[i:i,'time'].tolist()[0][0:-5]\n    eq_map = folium.Map(location=[35.3,139.8],tiles='Stamen Terrain',zoom_start=7.0,min_zoom=2.0)\n    eq_map.add_child(plugins.HeatMap(data5.loc[i:i]))\n    eq_map.save(\".\/\"+str(item)+\".html\")","6bbd1c57":"N=list(range(len(data4)))","e6596957":"eq_map = folium.Map(location=[35.3,139.8],tiles='Stamen Terrain',zoom_start=7.0,min_zoom=2.0)\neq_map.add_child(plugins.HeatMap(data5.loc[N]))\neq_map","76ffa959":"# Earthquakes of more than 5.7 of magnitude around Tokyo in 2019-2021\ndata4[data4['mag']>5.7]","a3954723":"paths0=[]\nimport os\nfor dirname, _, filenames in os.walk('.\/'):\n    for filename in filenames:\n        if filename[-5:]=='.html':\n            paths0+=[os.path.join(dirname, filename)]","c6d2a636":"order=[]\nfor item in paths0:\n    order+=[item[:-5].split('\/')[-1]]\npaths1=pd.DataFrame(paths0)\npaths1[1]=order\npaths1.columns=['path','int']\npaths1=paths1.sort_values('int')\npaths2=paths1['path'].tolist()","39d64287":"htmls=[]\nfor item in paths2:\n    htmls+=[\"<iframe width='600' height='400' src='\" +item+ \"' frameborder='0'><\/iframe>\"]\nprint(len(htmls))","a791b67b":"print(data4.iloc[126:127,3:6])\nIPython.display.HTML(htmls[126])","f22b14ff":"print(data4.iloc[146:147,3:6])\nIPython.display.HTML(htmls[146])","138b2baf":"print(data4.iloc[294:295,3:6])\nIPython.display.HTML(htmls[294])","3e92755e":"# Focused Region\n* 34 < **Latitude** < 37\n* 139 < **Longitude** < 142","29e7261b":"### Datasource\n* The data was acquired through [the USGS Earthquake Catalog](https:\/\/earthquake.usgs.gov\/earthquakes\/search\/)","849dce4e":"# **Tokyo jolted by strongest earthquake since 2011 disaster**\n![https:\/\/cdn-japantimes.com\/wp-content\/uploads\/2021\/10\/np_file_116711.jpeg](https:\/\/cdn-japantimes.com\/wp-content\/uploads\/2021\/10\/np_file_116711.jpeg)","84b39974":"Tokyo and surrounding prefectures were jolted by a strong earthquake on Thursday night, leaving more than 20 people injured and bringing the strongest shaking to the capital\u2019s central wards since the Great East Japan Earthquake disaster in 2011. https:\/\/www.japantimes.co.jp\/news\/2021\/10\/08\/national\/tokyo-area-earthquake\/"}}