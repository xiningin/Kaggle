{"cell_type":{"ddf6cba2":"code","7cfe64a0":"code","4eb379ca":"code","e4a7d1f4":"code","e392bf29":"code","0eac43b8":"code","c675903f":"code","f414d54b":"code","786e8563":"code","d85b8c7e":"code","85cec5b7":"code","205ab835":"code","f4744866":"code","d893a69f":"code","39e424c3":"code","bd38339d":"code","af6c80c8":"code","e438d154":"code","0155b312":"code","33e6b75f":"code","29ecda73":"code","870186e3":"code","6ca5b6f4":"code","fa106f7e":"code","a19cd0ba":"code","3764eb16":"code","6e683ece":"code","d9b8aa04":"code","abbf4249":"code","09152d27":"code","1b1f8a27":"code","d696fe65":"code","cd18cc35":"code","3a61b86d":"code","c68a7680":"code","44bf2632":"code","c36524c3":"code","414a373f":"code","d12583d6":"code","09e1c787":"code","eab4a6e6":"code","be43ce11":"code","7c126ab6":"code","2522612f":"code","7bd91e94":"code","42678f53":"code","56f5fcbf":"code","18d9a9fc":"code","b78f11c8":"code","b12b5ad1":"code","f24b2b55":"code","803f94ae":"code","6538180a":"code","11bcf75b":"code","78591bf1":"code","48362f11":"code","076065d3":"code","faefd9a4":"code","2e8b8780":"code","4bc68d46":"code","10fcbd73":"code","81ff53d9":"code","6cb7df65":"code","43e9e193":"code","912d9bd3":"code","42353d1b":"code","e2ab83ec":"code","277c44bc":"code","0102ddcc":"code","edc2040e":"code","3594176c":"code","141984ca":"code","f7aa37cf":"markdown","00dc5b3f":"markdown","e9f1fc99":"markdown","f1e57bd6":"markdown","870e3ecd":"markdown","51e76571":"markdown","37415458":"markdown","325bc1dd":"markdown","e5f0b9b6":"markdown","bd15de9b":"markdown","bf3834a3":"markdown","627c52d5":"markdown","7eb6f7d6":"markdown","224b63e5":"markdown","3320cfe4":"markdown","3c03bc15":"markdown","8b69bc01":"markdown","4307e294":"markdown","dadce89a":"markdown","06ee0ea3":"markdown","3b0628da":"markdown","99b70590":"markdown","73c041ed":"markdown","cdaef532":"markdown","9f034a47":"markdown","78f75851":"markdown","77391fb2":"markdown","15019345":"markdown","2f4aa19d":"markdown","047ce4f6":"markdown","a1d9ad95":"markdown","dd89fd57":"markdown","a88786c6":"markdown","fb59c255":"markdown","107f86a3":"markdown","d6c3ca33":"markdown","d0cd7c5c":"markdown","4261cc3b":"markdown","1dadd2e0":"markdown","547b6449":"markdown","0757517b":"markdown","911b0105":"markdown","336bd0c5":"markdown","f5e4b813":"markdown","483a6058":"markdown","4f451f3c":"markdown","9b8c1f10":"markdown","acaac503":"markdown","c70f360f":"markdown","d64e3eba":"markdown","00535f87":"markdown","50604c9c":"markdown","e185188c":"markdown","67d6c777":"markdown","3d290016":"markdown","891357b9":"markdown","9d629241":"markdown","85e782b0":"markdown","5b17a78f":"markdown","7be56ef9":"markdown","bca3e3d0":"markdown","8395ea25":"markdown","75f094ce":"markdown"},"source":{"ddf6cba2":"#@title Datasets from Kaggle can be downloaded using the opendatsets\n!pip install opendatasets\n\nimport opendatasets as od","7cfe64a0":"#@title Download the datasets\nod.download('https:\/\/www.kaggle.com\/c\/learnplatform-covid19-impact-on-digital-learning\/data')","4eb379ca":"#@title Import the necessary libraries\nimport os\nimport pandas as pd\nimport numpy as np\nimport math\nimport glob\nimport plotly.express as px\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\npal = sns.color_palette()\nimport missingno as msno\n","e4a7d1f4":"#@title Load engagement data:\npath = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/'\nall_files = glob.glob(path + \"\/*.csv\")\n\ndata = [] # pd.concat takes a list of dataframes as an argument\nfor csv in all_files:\n  # read the csv file\n  frame = pd.read_csv(csv)\n  # split filename and extension\n  filename = os.path.splitext(csv)\n  # extract district ID from CSV filename tuple\n  frame['district_id'] = os.path.basename(filename[0])\n  # add new column to new list\n  data.append(frame)\n\nengagement_df = pd.concat(data)\nengagement_df","e392bf29":"engagement_df.info()","0eac43b8":"engagement_df.isnull().sum()","c675903f":"engagement_df.fillna(0, inplace=True)","f414d54b":"# convert district_id from object type to numeric type\nengagement_df['district_id'] = pd.to_numeric(engagement_df['district_id'])","786e8563":"# def split_date(df):\n#   df['time'] = pd.to_datetime(df['time'])\n#   df['Month'] = df.time.dt.month\n#   df['Day'] = df.time.dt.day\n#   df['DayOfWeek'] = df.time.dt.dayofweek\n#   df['WeekOfYear'] = df.time.dt.isocalendar().week\n#   df['DayOfYear'] = df.time.dt.dayofyear","d85b8c7e":"# split_date(engagement_df)","85cec5b7":"districts_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\ndistricts_df ","205ab835":"districts_df.info()","f4744866":"districts_df.fillna('Not disclosed', inplace=True)","d893a69f":"plt.figure(figsize=(16,10))\nplt.title('No. of school districts per State', size=20)\nsns.countplot(y='state', data=districts_df, order=districts_df.state.value_counts(ascending=False).index)\nplt.show();","39e424c3":"plt.title('No. of school districts per State', size=20)\ndistricts_df['state'].value_counts().plot(kind='pie', autopct='%1.1f%%', figsize=(16,10), startangle=0).legend(loc='right', bbox_to_anchor=(1.5, 0.5));","bd38339d":"print(engagement_df.district_id.nunique())\nprint(districts_df.district_id.nunique())","af6c80c8":"dlist = districts_df.district_id.unique().tolist()\nedlist = engagement_df.district_id.unique().tolist()\n\nfor x in dlist:\n  if str(x) in edlist:\n    continue\n  else:\n    print(x)","e438d154":"fig, ax = plt.subplots(figsize=(16, 8))\nfig.suptitle('Locale Distribution', size=20)\nexplode = (0.05, 0.05, 0.05, 0.05, 0.05)\nlabels = list(districts_df.locale.value_counts().index)\nsizes = districts_df.locale.value_counts().values\nax.pie(sizes, explode=explode, startangle=60, labels=labels, autopct='%1.0f%%', pctdistance=0.7)\nax.add_artist(plt.Circle((0,0), 0.4, fc='white'))\nplt.show()\n","0155b312":"sns.countplot(data=districts_df, x='pct_black\/hispanic')\nplt.show()","33e6b75f":"sns.countplot(data=districts_df, x='pct_free\/reduced')\nplt.show()","29ecda73":"#@title High speed connection data\ndistricts_df.county_connections_ratio.value_counts()","870186e3":"custom_sort = np.array(['[4000, 6000[','[6000, 8000[', '[8000, 10000[', '[10000, 12000[' ,'[12000, 14000[', '[14000, 16000[', '[16000, 18000[', '[18000, 20000[', '[20000, 22000[', '[22000, 24000[', '[32000, 34000['])","6ca5b6f4":"plt.figure(figsize=(12,10))\nsns.countplot(districts_df.pp_total_raw, order=custom_sort)\nplt.xticks(rotation=60);","fa106f7e":"#@title Calculate Max pct_access value for each district\n# engagement_df[(engagement_df['district_id']==1000) & (engagement_df['time']=='2020-01-01')].pct_access.max()\n\n# For each district and each day, we take the maximum pct_access value registered on all available products:\ndist_engage_max_pct_access = engagement_df.groupby(['district_id', 'time']).pct_access.max()\n\n# max pct_access for the district no. 1000\n# dist_engage_max_pct_access.loc[1000]\n\n# max pct_access for the district no. 1000, on Jan. 1st\n# dist_engage_max_pct_access.loc[1000, '2020-01-01']\n\n# max pct_access for all the districts on Jan. 1st\n# dist_engage_max_pct_access.loc[:, '2020-01-01']\n\n# max pct_access for each district during 2020:\n# it's a df\n# dist_engage_max_pct_access_df = dist_engage_max_pct_access.unstack()\n# dist_engage_max_pct_access_df\n\n# dist_engage_max_pct_access_df.loc[1000]\n# dist_engage_max_pct_access_df.loc[1000, '2020-01-01']\n# dist_engage_max_pct_access_df.loc[:, '2020-01-01']\n\n# This also works:\n# engagement_df.pivot_table(values='pct_access', index='district_id', columns='time', aggfunc='max')","a19cd0ba":"#@title Calculate cumulative engagement_index for each district\n# For the engagement_index we choose to sum all the values up to get a total number\ndist_engagement_index_sum = engagement_df.groupby(['district_id', 'time']).engagement_index.sum()\n","3764eb16":"#@title Create an unique DataFrame for both pct_access and engagement_index\ndist_pct_access_engagement_df = pd.concat([dist_engage_max_pct_access, dist_engagement_index_sum], axis=1)\ndist_pct_access_engagement_df.columns = ['pct_access_max', 'engagement_index_sum']\ndist_pct_access_engagement_df","6e683ece":"#@title Remove districts with missing data\n\n# pct_access\n# dist_engage_max_pct_access_df = dist_engage_max_pct_access.unstack()\n# to_be_removed = list(dist_engage_max_pct_access_df.isnull().sum(axis=1).sort_values(ascending=False).head(18).index)\n\n# engagement_index\ndist_engagement_index_sum_df = dist_engagement_index_sum.unstack()\nto_be_removed = list(dist_engagement_index_sum_df.isnull().sum(axis=1).sort_values(ascending=False).head(18).index)\n\n# Since they both yield the same list of districts, we can use either one:\nfor index_num in to_be_removed:\n  dist_pct_access_engagement_df.drop(index_num, inplace=True)","d9b8aa04":"#@title Some manuale serach and check code:\n\ndist_pct_access_engagement_df.loc[(1000),('pct_access_max', 'engagement_index_sum')]\n\n# .loc[(what rows do I want), (what columns do I want)]\n# dist_pct_access_engagement_df.loc[(1000, '2020-01-01'), :]\ndist_pct_access_engagement_df.loc[(1000, '2020-01-01'), ('pct_access_max')]\n\ndist_pct_access_engagement_df.loc[([1000, 9927], '2020-01-01'), :]\n\ndist_pct_access_engagement_df.loc[(1000, ['2020-01-01', '2020-01-02']), :]\n\ndist_pct_access_engagement_df.loc[(slice(None), ['2020-01-01', '2020-01-02']), :]\n","abbf4249":"#@title Let's define a general function to plot both pct_access and engagement_index for each district we choose:\n\ndef district_metrics(district_num):\n  # All the engagement data for the selected district, rolling 7 days to smooth out the effect of weekend:\n  district_df = dist_pct_access_engagement_df.loc[district_num].rolling(7, min_periods=1).mean()\n\n  # Create a series of dates for x values:\n  dates = pd.date_range(\"1 1 2020\", periods=366, freq=\"D\")\n\n  # Create chart:\n  fig, axs = plt.subplots(2, 1, figsize=(16,16), sharex=True)\n\n  # Ploting pct_access:\n  axs[0].set_title('School district no. ' + str(district_num) + ' daily pct_access maximum values during 2020', size=16)\n  axs[0].plot(dates, district_df['pct_access_max'])\n\n  # Ploting engagement_index:\n  axs[1].set_title('School district no. ' + str(district_num) + ' daily engagement_index sum values during 2020', size=16)\n  axs[1].plot(dates, district_df['engagement_index_sum'])\n  plt.show();","09152d27":"#@title Insert the district number to get its engagement metrics:\n\ndistrict_number =  1000#@param {type:\"number\"}\n\ndistrict_metrics(district_number)","1b1f8a27":"#@title Define a function for pct_access metric:\n\ndef districts_pa(*args):  # pass a number of districts you want\n  \n  # Create an empty df:\n  tot_df = dist_pct_access_engagement_df[dist_pct_access_engagement_df.index.get_level_values('district_id') == '1000']['pct_access_max'].rolling(7, min_periods=1).mean()\n  tot_df = tot_df.to_frame()\n  tot_df = tot_df.droplevel('district_id', axis=0)\n  tot_df.drop(['pct_access_max'], axis=1, inplace=True)\n\n  for dist in args:\n    # Extract pct_access_max from the original dataframe:\n    pa_df = dist_pct_access_engagement_df[dist_pct_access_engagement_df.index.get_level_values('district_id') == dist]['pct_access_max'].rolling(7, min_periods=1).mean()\n    pa_df = pa_df.to_frame()\n    pa_df = pa_df.droplevel('district_id', axis=0)\n    pa_df.rename(columns={\"pct_access_max\": \"pa\"+str(dist)}, inplace=True)\n\n    # Concat to the tot_df\n    tot_df = pd.concat([tot_df, pa_df], axis=1)\n\n  # Outside the for loop:\n  tot_df.index = pd.to_datetime(tot_df.index)\n\n  # Plot the chart:\n  fig, ax = plt.subplots(figsize=(16,8))\n  sns.lineplot(data=tot_df, palette='tab10', linewidth=2.5)\n  ax.set_title(\"max pct_access trend for selected districts\", size=16)\n  ax.set_ylabel('max pct_access')\n","d696fe65":"districts_pa(1000, 1204, 9927)","cd18cc35":"#@title Define a function for engagement_index metric:\n\ndef districts_ei(*args):  # pass a number of districts you want\n  \n  # Create an empty df:\n  tot_df = dist_pct_access_engagement_df[dist_pct_access_engagement_df.index.get_level_values('district_id') == '1000']['engagement_index_sum'].rolling(7, min_periods=1).mean()\n  tot_df = tot_df.to_frame()\n  tot_df = tot_df.droplevel('district_id', axis=0)\n  tot_df.drop(['engagement_index_sum'], axis=1, inplace=True)\n\n  for dist in args:\n    # Extract engagement_index from the original dataframe:\n    ie_df = dist_pct_access_engagement_df[dist_pct_access_engagement_df.index.get_level_values('district_id') == dist]['engagement_index_sum'].rolling(7, min_periods=1).mean()\n    ie_df = ie_df.to_frame()\n    ie_df = ie_df.droplevel('district_id', axis=0)\n    ie_df.rename(columns={\"engagement_index_sum\": \"ie\"+str(dist)}, inplace=True)\n\n    # Concat to the tot_df\n    tot_df = pd.concat([tot_df, ie_df], axis=1)\n\n  # Outside the for loop, convert index to datetime:\n  tot_df.index = pd.to_datetime(tot_df.index)\n\n  # Plot the chart:\n  fig, ax = plt.subplots(figsize=(16,8))\n  sns.lineplot(data=tot_df, palette='tab10', linewidth=2.5)\n  ax.set_title(\"sum engagement index trend for selected districts\", size=16)\n  ax.set_ylabel('sum engagement_index')\n","3a61b86d":"districts_ei(1000, 1204, 9927)","c68a7680":"#@title Create a new dataframe with annual mean values of the metrics for all districts:\n\n# Create a new empty DataFrame with index districts of dist_pct_access_engagement_df:\ndf_index = dist_pct_access_engagement_df.index.get_level_values(level=0).drop_duplicates()\ndist_pct_engagement_mean_df = pd.DataFrame(index=df_index)\n\n# Store all the annual mean metrics into two lists:\ndist_pct_mean = []\ndist_engagement_index_mean = []\n\nfor district, sub_df in dist_pct_access_engagement_df.groupby(level=0):\n  dist_pct_mean.append(sub_df['pct_access_max'].mean())\n  dist_engagement_index_mean.append(sub_df['engagement_index_sum'].mean())\n\n# Append two lists to the new df:\ndist_pct_engagement_mean_df['pct_access_mean'] = dist_pct_mean\ndist_pct_engagement_mean_df['engagement_index_mean'] = dist_engagement_index_mean\ndist_pct_engagement_mean_df","44bf2632":"#@title Top 10 pct_access districts:\ntop10_pa = dist_pct_engagement_mean_df.pct_access_mean.sort_values(ascending=False).head(10).to_frame()\ntop10_pa","c36524c3":"districts_pa(5890, 9553, 2779, 8815, 3228, 9536, 6577, 6194, 2598, 8702)","414a373f":"#@title Let's link the top 10 districts with some other information to have a more complete picture:\ntop10_pa.index = top10_pa.index.astype(int)\ndistricts_df.district_id = districts_df.district_id.astype(int)\n\ntop10_pa.merge(districts_df, how='left', left_index=True, right_on='district_id').set_index('district_id')","d12583d6":"#@title Top 10 engagement index districts:\npd.options.display.float_format = \"{:,.2f}\".format\n\ntop10_ei = dist_pct_engagement_mean_df.engagement_index_mean.sort_values(ascending=False).head(10).to_frame()\ntop10_ei","09e1c787":"districts_ei(8815, 9536, 2779, 9553, 6194, 5890, 6512, 3314, 9463, 2393)","eab4a6e6":"#@title Let's link the top 10 districts with some other information to have a more complete picture:\ntop10_ei.index = top10_ei.index.astype(int)\n\ntop10_ei.merge(districts_df, how='left', left_index=True, right_on='district_id').set_index('district_id')","be43ce11":"#@title Top performers on both metrics:\n\nlist1 = top10_pa.index.values.tolist()\nlist2 = top10_ei.index.values.tolist()\nset1 = set(list1)\nintersection = list(set1.intersection(list2))\nintersection\n\n\ndist_pct_engagement_mean_df.index = dist_pct_engagement_mean_df.index.astype(int)\ntop10_combined = dist_pct_engagement_mean_df.loc[intersection]\n\ntop10_combined.index = top10_combined.index.astype(int)\ntop10_combined.merge(districts_df, how='left', left_index=True, right_on='district_id').set_index('district_id').sort_values(['pct_access_mean', 'engagement_index_mean'], ascending=[False, False])\n","7c126ab6":"#@title Bottom 10 pct_access districts:\nbottom10_pa = dist_pct_engagement_mean_df.pct_access_mean.sort_values(ascending=True).head(10).to_frame()\nbottom10_pa","2522612f":"b10pa = list(bottom10_pa.index)\ndistricts_pa(*b10pa)","7bd91e94":"#@title Bottom 10 engagement_index districts:\nbottom10_ei = dist_pct_engagement_mean_df.engagement_index_mean.sort_values(ascending=True).head(10).to_frame()\nbottom10_ei","42678f53":"b10ei = list(bottom10_ei.index)\ndistricts_ei(*b10ei)","56f5fcbf":"#@title Bottom performers on both metrics:\n\nlist1 = bottom10_pa.index.values.tolist()\nlist2 = bottom10_ei.index.values.tolist()\nset1 = set(list1)\nintersection = list(set1.intersection(list2))\nintersection\n\n\ndist_pct_engagement_mean_df.index = dist_pct_engagement_mean_df.index.astype(int)\nbottom10_combined = dist_pct_engagement_mean_df.loc[intersection]\n\nbottom10_combined.index = bottom10_combined.index.astype(int)\nbottom10_combined.merge(districts_df, how='left', left_index=True, right_on='district_id').set_index('district_id').sort_values(['pct_access_mean', 'engagement_index_mean'], ascending=[True, True])","18d9a9fc":"# Merge the two datasets:\nengagement_districts_df = pd.merge(engagement_df, districts_df, on=['district_id'])\n# engagement_districts_df.sample(100)","b78f11c8":"#@title We drop the States of Minnesota, Arizona, North Dakota, New Hampshire from our analysis, as they contain too few districts or examples.\n\nengagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'Minnesota'].index, inplace=True)\nengagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'Arizona'].index, inplace=True)\nengagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'North Dakota'].index, inplace=True)\nengagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'New Hampshire'].index, inplace=True)\nengagement_districts_df.drop(engagement_districts_df[engagement_districts_df.state == 'Not disclosed'].index, inplace=True)\n","b12b5ad1":"#@title State level **pct_access** and **engagement_index** ranking:\n\n# states_pct_access_df.loc['California']\n# states_pct_access_df.loc['California'].mean(axis=0).head(20)\n# df = pd.DataFrame(states_pct_access_df.loc['California'].mean(axis=0))\n# df.index = df.index.droplevel()\n# df.transpose()\n\n# Extract pct_access data from the df:\nstates_pct_access_df = engagement_districts_df.groupby(['state', 'district_id', 'time']).pct_access.max().to_frame().unstack()\n\n# Create a new temporary DataFrame with States as index:\nstates_index = states_pct_access_df.index.get_level_values(level=0).drop_duplicates()\nstates_pct_index = pd.DataFrame(index=states_index)\n\nframes = []\n\n# For each State we calculate the mean of pct_access among its districts:\nfor state, sub_df in states_pct_access_df.groupby(level=0):\n  new_df = pd.DataFrame(states_pct_access_df.loc[state].mean(axis=0))\n  new_df.index = new_df.index.droplevel()\n  frames.append(new_df.transpose())\n\nstates_pct_temp = pd.concat(frames)\nstates_pct_mean_df = states_pct_temp.set_index(states_pct_index.index)\n\n# States Ranking for pct_access:\nstates_pa = states_pct_mean_df.mean(axis=1).sort_values(ascending=False).to_frame()\n\n# plt.figure(figsize=(20,10))\n# sns.barplot(x=states_pa.values.flatten().astype('int'), y=states_pa.index)\n# plt.title('States Ranking for pct_access', size=20)\n# plt.ylabel('States')\n# plt.xlabel('Annual mean pct_access');\n\n\n# Extract engagement_index data from the df:\nstates_engagement_index_df = engagement_districts_df.groupby(['state', 'district_id', 'time']).engagement_index.sum().to_frame().unstack()\n\n# Create a new temporary DataFrame with States as index:\nstates_index = states_engagement_index_df.index.get_level_values(level=0).drop_duplicates()\nstates_engagement_index_index = pd.DataFrame(index=states_index)\n\nframes = []\n\nfor state, sub_df in states_engagement_index_df.groupby(level=0):\n  new_df = pd.DataFrame(states_engagement_index_df.loc[state].mean(axis=0))\n  new_df.index = new_df.index.droplevel()\n  frames.append(new_df.transpose())\n\nstates_engagement_temp = pd.concat(frames)\n# engagement_index for each State:\nstates_engagement_mean_df = states_engagement_temp.set_index(states_engagement_index_index.index)\n\n# States Ranking for engagement_index:\nstates_ei = states_engagement_mean_df.mean(axis=1).sort_values(ascending=False).to_frame()\n\n\n# plt.figure(figsize=(20,10))\n# sns.barplot(x=states_ei.values.flatten().astype('int'), y=states_ei.index)\n# plt.title('States Ranking for engagement_index', size=20)\n# plt.ylabel('States')\n# plt.xlabel('Annual mean engagment_index');\n\n#Plot the charts:\nf, (ax0, ax1) = plt.subplots(1, 2, figsize=(18, 10))\n\nsns.barplot(x=states_pa.values.flatten().astype('int'), y=states_pa.index, ax=ax0)\nax0.set_title('States Ranking for pct_access', size=16)\nax0.set_xlabel('Annual mean pct_access')\n\nsns.barplot(x=states_ei.values.flatten().astype('int'), y=states_ei.index, ax=ax1)\nax1.set_title('States Ranking for engagement_index', size=16)\nax1.set_xlabel('Annual mean engagment_index')\n\nplt.show();","f24b2b55":"products_df = pd.read_csv('\/content\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')","803f94ae":"products_df","6538180a":"products_df.columns","11bcf75b":"products_df['func_category']= products_df['Primary Essential Function'].str.split(' - ', 1).str[0]\nproducts_df['primary_function']= products_df['Primary Essential Function'].str.split(' - ', 1).str[1]\nproducts_df","78591bf1":"products_df.info()","48362f11":"print(products_df[\"LP ID\"].nunique())\nprint(engagement_df[\"lp_id\"].nunique())","076065d3":"companies_num_prod = products_df['Provider\/Company Name'].value_counts(ascending=False).head(10)\n\nplt.figure(figsize=(10, 6))\nsns.barplot(x = companies_num_prod.values, y = companies_num_prod.index, alpha=0.8)\nplt.title('Top 10 companies in terms of number of products', size=20)\nplt.ylabel('Companies')\nplt.xlabel('Number of products')\nplt.show();","faefd9a4":"products_df['Sector(s)'].unique()","2e8b8780":"c1=c2=c3=0\nfor s in products_df[\"Sector(s)\"]:\n    if(not pd.isnull(s)):\n        s = s.split(\";\")\n        for i in range(len(s)):\n            sub = s[i].strip()\n            if(sub == 'PreK-12'): c1+=1\n            if(sub == 'Higher Ed'): c2+=1\n            if(sub == 'Corporate'): c3+=1\n\nfig, ax  = plt.subplots(figsize=(16, 8))\nfig.suptitle('Sector Distribution', size = 20)\nexplode = (0.05, 0.05, 0.05)\nlabels = ['PreK-12','Higher Ed','Corporate']\nsizes = [c1,c2, c3]\nax.pie(sizes, explode=explode,startangle=60, labels=labels,autopct='%1.1f%%', pctdistance=0.7, colors=[\"#ff228a\",\"#20b1fd\",\"#ffb703\"])\nax.add_artist(plt.Circle((0,0),0.4,fc='white'))\nplt.show();","4bc68d46":"products_df['func_category'].value_counts()","10fcbd73":"c1=c2=c3=0\n\nfor s in products_df[\"func_category\"]:\n    if(not pd.isnull(s)):\n        c1 += s.count(\"CM\")\n        c2 += s.count(\"LC\")\n        c3 += s.count(\"SDO\")\n\nfig, ax  = plt.subplots(figsize=(16, 8))\nfig.suptitle('Function Categories', size = 20)\nexplode = (0.05, 0.05, 0.05)\nlabels = ['CM','LC','SDO']\nsizes = [c1, c2, c3]\nax.pie(sizes, explode=explode,startangle=60, labels=labels,autopct='%1.1f%%', pctdistance=0.7, colors=[\"#18ff9f\",\"#2cfbff\",\"#ffb703\"])\nax.add_artist(plt.Circle((0,0),0.4,fc='white'))\nplt.show()","81ff53d9":"func_dist = products_df['primary_function'].value_counts(ascending=False)\n\nplt.figure(figsize=(10, 6))\nsns.barplot(x = func_dist.values, y = func_dist.index, alpha=0.8)\nplt.title('Primary Functions Ranking', size=20)\nplt.ylabel('Primary functions')\nplt.xlabel('count')\nplt.show();","6cb7df65":"products_engagement_df = pd.merge(products_df, engagement_df, left_on='LP ID', right_on='lp_id')\nproducts_engagement_df.head()","43e9e193":"products_engagement_df.info()","912d9bd3":"def plot_pct(statename, closedate):\n  pct_access_state = states_pct_mean_df[states_pct_mean_df.index == statename].transpose()\n  pct_access_state = pct_access_state.rolling(7, min_periods=1).mean()\n  pct_access_state.index = pd.to_datetime(pct_access_state.index)\n\n  fig, ax = plt.subplots(figsize=(20, 10))\n  pct_access_state.plot(ax=ax)\n  plt.title('State of {} pct_access 2020'.format(statename), size=20)\n  plt.axvline(pd.to_datetime(closedate), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\n  plt.show();","42353d1b":"plot_pct('Michigan', '2020-03-16')","e2ab83ec":"plot_pct('North Carolina', '2020-03-16')","277c44bc":"def plot_engagement(statename, closedate):\n  engagement_index_state = states_engagement_mean_df[states_engagement_mean_df.index == statename].transpose()\n  engagement_index_state = engagement_index_state.rolling(7, min_periods=1).mean()\n  engagement_index_state.index = pd.to_datetime(engagement_index_state.index)\n\n  fig, ax = plt.subplots(figsize=(20, 10))\n  engagement_index_state.plot(ax=ax)\n  plt.title('State of {} engagement_index 2020'.format(statename), size=20)\n  plt.axvline(pd.to_datetime(closedate), color='red', linestyle='--', label='The date a state closed K-12 public schools statewide.')\n  plt.show();","0102ddcc":"plot_engagement('Illinois', '2020-03-17')","edc2040e":"plot_engagement('Texas', '2020-03-21')","3594176c":"plot_engagement('Michigan', '2020-03-16')","141984ca":"plot_engagement('California', '2020-03-23')","f7aa37cf":"As per instruction, the last column 'Primary Essential Function' actually contains two layers of information. As first thing, we therefore split it as following:","00dc5b3f":"For our bottom 10 districts on engagement index:\n\n- During peak months the metric stays in the **range from 10,000 to 40,000** (vs. 100,000 to 200,000 events of the top10).\n- The overall annual average total page-load events per one thousand students ranges **from 1,500 to 7,500 events** (vs. 71,000 to 100,000 events of the top10).\n\n\nWe are seeing that for engagement_index, top10 are **5-10X on peak values** and **5-13X on annual average values** compared to the bottom10.","e9f1fc99":"### Distribution pct_black\/hispanic ","f1e57bd6":"We have not a uniform dataset here. There are State with a lot of school districts like Connecticut and Utah and States that have very small samples like: Arizona, Florida, North Dakota, Minnesota. We have to pay attention when we compare the engagement average values for different States, as the number might be not representative if the sample size difference is too big.\n\nWe have 42% of the school districts coming from just 4 States: Connecticut, Utah, Masschusetts, Illinois.","870e3ecd":"<a href=\"https:\/\/colab.research.google.com\/github\/MicMiao\/data_visualization\/blob\/master\/COVID_19_Impact_on_Digital_Learning.ipynb\" target=\"_parent\"><img src=\"https:\/\/colab.research.google.com\/assets\/colab-badge.svg\" alt=\"Open In Colab\"\/><\/a>","51e76571":"The majority of spending per pupil is concentrated between 6K to 18K. ","37415458":"Check for any missing values:","325bc1dd":"We noticed 2 suspicious data segments:\n- District no.8815 the first three months data may contain some error, as it reaches 100% as pct_access (which is quite incredible);\n- District no.9536 inversely has very low data points for the first three months. It also can be a data acquisition problem.\n\nWe need to check these points with our client\/colleagues who handle the data acquisition process.\n\n\nWith exception of these two segments, the overal picture is quite clear:\n- Top 10 district for the **pct_access metric** have an average of **50-60%** value during the school calendar peak months and an **overall average annual value in the range of 35-40%**.\n","e5f0b9b6":"Here we load all the csv files into an unique DataFrame. And using the filename as the column 'district_id', we'll need this column to merge with the 'District Info DataFrame' later on. ","bd15de9b":"### Locale Distribution Chart:","bf3834a3":"## Load products_info data into DataFrame\n\n### Product information data\n> The product file ```products_info.csv``` includes information about the characteristics of the top 372 products with most users in 2020. The categories listed in this file are part of LearnPlatform's product taxonomy. \n\n\ud83d\udcdd Some products may not have labels due to being duplicate, lack of accurate url or other reasons.\n\n| Name                       | Description                                                                                                                                                                                                                                                                                                                    |\n|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| LP ID                      | The unique identifier of the product                                                                                                                                                                                                                                                                                           |\n| URL                        | Web Link to the specific product                                                                                                                                                                                                                                                                                               |\n| Product Name               | Name of the specific product                                                                                                                                                                                                                                                                                                   |\n| Provider\/Company Name      | Name of the product provider                                                                                                                                                                                                                                                                                                   |\n| Sector(s)                  | Sector of education where the product is used                                                                                                                                                                                                                                                                                  |\n| Primary Essential Function | The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled |\n|                            |                                                                                                                                                                         ","627c52d5":"Now that we have some idea about our dataset. We proceed with our first series of analysis. In particular, here we would like to investigate our two performance metrics trend among all the available school districts: \n- **pct_access**: Percentage of students in the district have at least one page-load event of a given product and on a given day. \n- **engagement_inde**x: Total page-load events per one thousand students of a given product and on a given day.","7eb6f7d6":"## Load districts_info data into DataFrame & some EDA\n\n### District information data\n\n>The district file ```districts_info.csv``` includes information about the **characteristics of school districts**, including data from \n>- NCES (2018-19), \n>- FCC (Dec 2018), and \n>- Edunomics Lab. \n\nSteps taken to preserve Privacy \ud83d\udd12 \n- Identifiable information about the school districts has been removed. \n- An open source tool ARX (Prasser et al. 2020) was used to transform several data fields and reduce the risks of re-identification. \n\n\ud83d\udcdd For data generalization purposes some data points are released with a range where the actual value falls under. Additionally, there are many missing data marked as 'NaN' indicating that the data was suppressed to maximize anonymization of the dataset.\n\n| Name                   | Description                                                                                                                                                                                                                                                                              |\n|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| district_id            | The unique identifier of the school district                                                                                                                                                                                                                                             |\n| state                  | The state where the district resides in                                                                                                                                                                                                                                                  |\n| locale                 | NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural. See Locale Boundaries User's Manual for more information.                                                                                                          |\n| pct_black\/hispanic     | Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data                                                                                                                                                                                       |\n| pct_free\/reduced       | Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data                                                                                                                                                                              |\n| county_connections_ratio | ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version). See FCC data for more information.                                                                         |\n| pp_total_raw             | Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district. |\n                                                         ","224b63e5":"We have also a 'time' column. For now we don't transform it, we'll consider to do it later if necessary.","3320cfe4":"For Texas, the gap is probably due to missing data\/not enough data in our dataset.","3c03bc15":"### Primary Functions Ranking\n","8b69bc01":"North Carolina is even more strange, notice the gap starting Apr. This might also be not enough data points. ","4307e294":"Inference on Michigan must be taken with a grain of salt, as we have only less than 200K sample data compared to 2.5M of Connecticut. \n\nAlso we have noticed that the second part of the year's trend is that low, just a little lower compared to NY. So the low ranking is mostly due to the first part of the year. With more districts and data, the pct_access might go up.","dadce89a":"### Function Categories Distribution","06ee0ea3":"Analyzing the bottom10, we noticed the following:\n\n- Both pct_access and engagement_index are **around or less than 1\/10** from the best. The differences are very big. Now, there's maybe more than one way to interpret this result. As if a school adopts more in-person teaching, consequently its students will use relatively less digital learning tools. However in a pandemic year like 2020, we would expect the lower engagement metrics more as a negative sign than as a positive one. Especially as we know in the U.S. almost all States have closed schools around the end of March. \n- A curious finding that **district no.5042** is situated in Illinois! We've already seen that quite a lot of top districts are in Illinois. So the fact that one of the worst is also in the same State, we wonder why of this huge difference. Maybe the district no.5042 can learn something from its neighbours.\n- **Lower income districts might have a correlation with lower performance on digital learnings**, 4 out of 6 bottom districts have pretty high percentage of students eligible for free\/reduced-price lunch.\n\nClearly something is not working in these districts, it might be economic reason. But we have seen the district in NY from top10, low income doesn't necessary have to be an obtacle. To better understand the reasons, further research must be done including interviews to the teachers, to the parents etc.\n\n","3b0628da":"With a basic chart we can already ask some very interesting questions on pct_access here:\n\n- Percentage of students in the district no.1000 that have at least one page-load event of a given product and on a given day are higher than district no. 9927 during the first half of 2020. However after the summer break, the second outperforms the first. What happened in the second part of the year? What's the cause of this switching? \n- What is the reason of the underperformance of school district no. 1204? Its pct_access values are less than half of other two.\n\nOn a district level, this type of inquiry can be very interesting. We just need to select districts of our interest, make the comparison and further investigate on any substantial difference.","99b70590":"## Q4: Which are the best States? And Which are the worst?\n\nHere we must not hurry to make comparison. We already know that our datasets are not uniform, and there are 4 States who count for more than 55% of the data.\n\nTherefore, we first need to establish a cut-off threshold to drop the States with too few data points.\n\nWe can see that Florida, Minnesota, Arizona, North Dakota only have 1 school district each. While Minnesota, Arizona, North Dakota, New Hampshire have the fewest data points for both pct_access and engagement_index.\n\nWe'll establish a cut-off at 100K data points for both pct_access and engagement_index, and drop States with less than 100K data points. The goal is allow a certain comparability, as too fewer data will probabily give us a distorted picture of the reality.\n","73c041ed":"First, let's define our metrics for comparison and ranking among States.\n\nWe decide to take the average value amongs all districts in a given State as the State value. So to recap:\n\n- For pct_access, we have the max value from each school district (we don't care which technology product in this case, if on a given day the max pct_access is 10%, we consider 10% for that day). Once we have the daily max pct_access for the whole year for each district in the State, we average them out.\n\n- For the engagement_index, we used the sum instead of max value. So we have the cumulative daily value for the whole year for each district in the State. As above, we avrage them out among all districts to come up with the State level metric.\n\nWe will explain further once we have calculated the metrics and plotted the charts.","cdaef532":"## Have analyzed the top 10, let's have a look at the bottom 10:\n## Q3: Which are the bottom 10 districts?","9f034a47":"\n## The overall take away from analyzing districts data is that:\n- Majority of the school districs in the dataset coming from only 4 States, therefore we have an unbalanced dataset;\n- School districts in the dataset mainly are in suburb and rural locales;\n- Majority of the school districs (~120 over 176) in the dataset have a lower percentage of both Black and Hispanic students 0-20% compared to the national average (31-40% based on data from National Center for Education Statistics link: https:\/\/nces.ed.gov\/programs\/coe\/indicator\/cge#fn4).\n\nTherefore we have to be careful to draw conclusion on whatever insights we will find from this dataset. As it represents only the school districts covered by this LearnPlatform dataset, while the country\/national picture might differ significantly from it.","78f75851":"For our top 10 districts on engagement index:\n- The overall annual average total page-load events per one thousand students ranges from **71,000 to 100,000 events**.\n- During peak months the metric stays **in the range 100,000 and 200,000** with highest peak touching 300,000 events.\n- The trend oscillates a lot during the first half, while remained more stable during the second half of the year. We can think of school disruption and closure during pandemic outbreak in the first 3 months of 2020. As students, teachers and parents get progressively more prepared during the year, the usage of digital learning tools becomes more stable in the last few months of 2020.\n","77391fb2":"### No. of school districts per State:","15019345":"As expected the higher counts are related to functions focused on students learning like: Digital Learning Platforms, Resources & Reference, Content Creation & Curation. \n\nWhile the lower end is populated with school management software, admissions, enrollment, teacher resources etc.","2f4aa19d":"For Michigan we have a very big difference betweeen first part and second part of year. Again we have much less data for this State, so the reason can be partially due to this.","047ce4f6":"## Load engagement data into DataFrame\n\n### Engagement data\n> The engagement data are aggregated at school district level, and each file in the folder ```engagement_data``` represents data from **one school district***. \n\n\ud83d\udcddThe 4-digit file name represents ```district_id``` which can be used to link to district information in ```district_info.csv```. \n\n\ud83d\udcddThe ```lp_id``` can be used to link to product information in ```product_info.csv```.\n\n| Name             | Description                                                                                                    |\n|------------------|----------------------------------------------------------------------------------------------------------------|\n| time             | date in \"YYYY-MM-DD\"                                                                                           |\n| lp_id            | The unique identifier of the product                                                                           |\n| pct_access       | Percentage of students in the district have at least one page-load event of a given product and on a given day |\n| engagement_index | Total page-load events per one thousand students of a given product and on a given day                         |\n| district_id | The unique identifier of the school district   (Custom added from filenames)                     \n","a1d9ad95":"###\u00a0We now do the same analysis for the engagement_index:","dd89fd57":"While downloading the dataset, you will be asked to provide your Kaggle username and credentails, which you can obtain using the \"Create New API Token\" button on your account page on Kaggle. Upload the `kaggle.json` notebook using the files tab or enter the username and key manually when prompted.","a88786c6":"### Top 10 companies in terms of number of products:","fb59c255":"For this data we'll ignore it right now. We will have better data to address this feature. ","107f86a3":"## COVID-19 Impact on Digital Learning\n\n<img src=\"https:\/\/images.unsplash.com\/photo-1597933471507-1ca5765185d8?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=751&q=80\" style=\"width:400px;\"\/>\n\nThis is a notebook for the competition launched on Kaggle (https:\/\/www.kaggle.com\/c\/learnplatform-covid19-impact-on-digital-learning).\n\nWith the dataset at our disposal and other source of information. We will try to **uncover trends in digital learning** and how such trend relates to factors like district demographics, broadband access, and state\/national level policies and events. \n\nIn particular, we will try to answer the following questions:\n\n    - What is the picture of digital learning in 2020 for the school districts included in the dataset? \n    - What is the effect of the COVID-19 pandemic on online and distance learning, and how might this also evolve in the future? \n    - How does student engagement with different types of education technology change over the course of the pandemic? \n    - How does student engagement with online learning platforms relate to different geography? Demographic context (e.g., race\/ethnicity, ESL, learning disability)? Learning context? Socioeconomic status?\n    - Do certain state interventions, practices or policies (e.g., stimulus, reopening, eviction moratorium) correlate with the increase or decrease online engagement?\n","d6c3ca33":"As for engagement_index: we've choose the same three districts as before, and we can see some similaries compared to pct_access:\n- District no.1000 outperforms in the first part of the year, while district no. 9927 overtakes in the second half (here it overtakes in April!);\n- District no.1204 generally underperforms over the year, especially in the second half. ","d0cd7c5c":"For both 'pct_access' and 'engagement_index' we can fill the NaN with zero. As for 'lp_id' we can either delete these 541 rows or fill them also with zero, we choose the later.","4261cc3b":"## Q1: How was the students' engagement during 2020 in each of our districts?\n\nwe'll use the following metrics as proxies:\n- **pct_access.max()**: Why max value you may ask. The reason is there are a lot of available products for the students each day. And if we take the mean, we'll underestimate the engagement level. \n\n>> For example: on Jan. 1st 2020, for the school district 1000 we have 138 different products, each with its pct_access. If we take the mean, which is only 0.145%! Which is obviously wrong, because if we have 5% of students active on only one product, then this 5% should be the reliable estimate for engagement for that day, we can't average it out. In this case the max value is 3.6% on a 'certain' product. We don't care which product at this stage, we just know that 3.6% of the students were active on some technology product that day.\n\n- **engagement_index.sum()**: for engagement_index we choose the sum, as in this way we can have an idea about the total page-load events per one thousand students for all products on a given day for all our school districts.","1dadd2e0":"There are two notable examples that can be indicative of data acquisition problem:\n- District no.5042 around march 2020.\n- District no.8017 which have zero pct_access until december, then the data explodes.\n\nWe have to check with client\/colleagues about these examples and make sure that they are correct. \n\nDespite the above two data examples, the overall picture is still valid. Here for our bottom10, the pct_access metric have **an average of 10-20% value during the school calendar peak months** (vs. 50-60% of the top10) and **an overall average annual value in the range of 3-6%** (vs. 35-40% of the top10).\n\nWe are seeing that for pct_access, **top10 are 3-5X on peak values** and **8-10X on annual average values** compared to the bottom10.","547b6449":"Now that we have completed our top10 analysis on both metrics, we can see that it confirms our previous observations:\n- **The State of Illinois** occupies half of the top10 ranking, its districts have very high performance\/engagement with digital learning technologies. However we have to keep in mind that both Illinois and Connecticut are two of the four States where the bulk of the data (over 55%) is coming from. So we have to be careful here, maybe other States' districts will have higher engagement metrics if we add more data into the analysis. Same reasoning work for the locale, since we have ~60% of the data coming from Suburb, we can't make any hasty conclusion here.\n- In NY City we have district no.9536 with its perculiar characteristics of high percentage of minority ethnicities students and high percentage of students eligible for free and reduced-price lunch among the top 6 in the combined ranking. This is a very encouraging news, as we might infer from this, **harsh economic conditions don't have to be an obstacle to digital learning**.","0757517b":"# **#WIP...**","911b0105":"We split the Primary Essential Function into two separate columns as there are two layers\/levels of specifications here.","336bd0c5":"## Merge products_df with engagement_df","f5e4b813":"![Screenshot at Sep 24 19-48-51.png](attachment:366c5710-06f4-46aa-bfb8-9b02b8086a6c.png)","483a6058":"We have a total of **233** school districts. We have also some missing values, later on we'll fill with a string value 'Not disclosed'. We will also map each of the range value and string value to categories like [1, 2, 3, 4] for our ML modeling.\n","4f451f3c":"We can see for the school district no.1000 the maximum percentage of students using a digital learning product oscillates between **25-40%** on the most active days aka **max pct_access**. We can see the drop during summer vacation time, and subsequent rise in September when school year restarts.\n\nWhile the total page-load events per one thousand students for all digital learning products oscillates wildly during the first part of the year (almost **80k page-load events at peak and less than 10k page-load events at bottom**) and remained more stable in the second half. This could be due to the outbreak of pandemic in the first half of 2020 with schools being closed in march. Further school district level investigation can tell us more about these oscillations.\n\nWhile it is useful to have a picture on each district. It would be more interesting if we can compare them to have more insights as:\n\n- Which are the top 10 districts for both pct_access and engagement_index?\n- And which are the bottom 10?\n- How big is the engagement difference between top 10 and bottom 10?\n- If we choose two or more districts that we're interested. How big is their engagement difference? And what are the underlying causes?  ","9b8c1f10":"There is an interesting survey conducted by AP and Chalkbeat in 2020 from 677 school districs covering 13 million students. The main takeaway is that race is a strong predictor of which public schools are offering in-person instruction and which aren't. \n\nWe will try to seek confirmation of such findings also from our dataset.\n\nlink: https:\/\/www.chalkbeat.org\/2020\/9\/11\/21431146\/hispanic-and-black-students-more-likely-than-white-students-to-start-the-school-year-online","acaac503":" LC = Learning & Curriculum is the overwhelming majority function category, which matches well with our objective.","c70f360f":"### Distribution pct_free\/reduced","d64e3eba":"# Analysis of digitial learning metrics for school districts and States","00535f87":"We have an substantial number of districts which have a lot of missing in both pct_access and engagement_index data. \n\nFor our analysis, we decide to drop all districts with more than 100 days of missing pct_access and engagement_index data (18 of 233 in this case).","50604c9c":"No excuse for California. Despite having quite big and complete sample size, the California's performance on both pct_access and engagement_index only half of those States on the top part of the ranking namely: Illinois and New York.","e185188c":"Also for Locale we don't have a uniform or close to uniform distribution. Our data is heavily skewed towards Suburb and Rural.","67d6c777":"### Per-pupil total expenditure data:","3d290016":"The chart shows the importance of Google for digital learning, although we still have to dig deep on which products are the most used by the students. ","891357b9":"Looks like a big portion of top 10 are the same districts for both pct_access and engagement_index, as it may be expected.","9d629241":"## Q2: Which are the top 10 districts?\n\nWe have 215 school districts in total (233 - 18 that we have removed due to too much missing data). Let's find out which are the best performers.\n\nWe use the annual mean for both pct_access and engagement_index to decide which are the top performers and which are the bottom ones.","85e782b0":"We can see from above that in the products_df we have the top 372 products information, while in our engagement_df we have a lot more products. So when we merge the datasets, we have to be mindful of this.","5b17a78f":"We have checked all 233 distric_id are the same for both dataframes: engagement_df and districts_df.","7be56ef9":"### Sectors Distribution","bca3e3d0":"We know very well that our dataset is not balanced. Therefore any findings are now linked to the data available at the present. If in the future, we can add new data, we very likely will see a different picture. \n\nThat said. As for now, we have some confirmation with our previous analysis on districs:\n\n- Best States consist of: **Illinois, New York, Indiana, Connecticut\/Wisconsin**. \n- While at bottom of the ranking we can find: **Texas, Michigan, North Carolina**. (might partially due to the lower sample size of data. We can't have a confident conclusion unless we have more data on these States.)\n- **California**'s performance are quite bad compared to the best. Both metrics pct_access and engagement_index are only 1\/2 of those at top of the ranking. ","8395ea25":"The majority of products are PreK-12, this matches well with our goal of analysis.","75f094ce":"New findings emerged:\n- Top 4 are all from the **State of Illinois**, half of the top10 are from this State. Even though we don't have a balanced dataset at national level and Illinois are among the top4 States in terms of school districts in our database (see above the chart of No. of school districts per State). However Utah and Massachusetts have no presence in this ranking and Connecticut has only one at the position no.7. The outperformance of Illinois' districts is an interesting point to be further studied.\n- **The district no.9536** from New York has very high percentage of black\/hispanic students and eligible for free\/reduced-price lunch students, both between 80-100%. This is a very encouraging news, as we might infer from this, harsh economic conditions doesn't have to be an obstacle to digital learning. Maybe other districts from poor areas can adopt some of the best practice of this district to increase their students' engagement with digital learning products.\n\nLet's do the same list for engagement_index before we try to come up with other insights."}}