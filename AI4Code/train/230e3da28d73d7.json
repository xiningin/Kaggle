{"cell_type":{"23257013":"code","82b4a733":"code","318f28a9":"code","a6eed822":"code","c8c2a5a7":"code","f64b89c3":"code","bccde649":"code","4df0590c":"code","66a19e3e":"code","11cd9fb8":"code","cc275c95":"code","d95508c2":"code","820e91e0":"code","5c98e25e":"code","45f93b2d":"code","d37ee694":"code","e2588a7d":"code","f2e4b996":"code","56e08c25":"code","71f4b5ed":"code","f701130e":"code","a919e734":"code","91743f54":"code","b113f4d9":"code","8af84716":"code","97c7fcb2":"code","cb387e63":"code","5bea030a":"code","0c05327d":"code","39d762b5":"code","d7bb7f70":"code","e5fffa7c":"code","edc16f8b":"code","d8e40a97":"code","93a0bdbe":"code","69015f83":"code","73e4feb6":"code","7839706f":"code","80ba174b":"code","bd6c7f02":"code","ee0a4da5":"code","cb7c888e":"code","95630c26":"code","e10dabf2":"code","d31dc791":"code","9db0dcf3":"code","b415e0bd":"code","fa7e9043":"code","104912a9":"code","91c53ada":"code","b370d4c4":"code","f909c77c":"code","06581266":"markdown","f3ac3e0f":"markdown","58c92ecc":"markdown","02222c5d":"markdown","17cfefd5":"markdown","af963694":"markdown","f48a240d":"markdown","4c7461ff":"markdown","28e0371b":"markdown","e12a8ea3":"markdown","754ea352":"markdown","304ef3e0":"markdown","edf1a9e7":"markdown","7caf11a0":"markdown","2605ffae":"markdown","3724e569":"markdown","35761db3":"markdown","2a7be536":"markdown","88cef1bd":"markdown","6bb753aa":"markdown","e161bc84":"markdown","2854bfcf":"markdown","45bf6122":"markdown","ffd85ec0":"markdown","55768867":"markdown","f1539a7d":"markdown","284ec3b0":"markdown","fc970731":"markdown","3b9a50ce":"markdown","c70f670c":"markdown","4294376e":"markdown","5c0d5981":"markdown","e673c950":"markdown","a6078f85":"markdown"},"source":{"23257013":"import pandas as pd\nimport numpy as np\nfrom pandas import Series,DataFrame\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","82b4a733":"titanic_df = pd.read_csv('..\/input\/titanic\/train.csv',sep=\",\")\ntitanic_df.head()","318f28a9":"titanic_df.info() ","a6eed822":"#Quickly check gender\nsns.catplot(x='Sex',data = titanic_df,kind='count')","c8c2a5a7":"#Check gender and Pclass\nsns.catplot(x='Pclass',data=titanic_df,kind='count',hue='Sex')","f64b89c3":"def male_female_child(passenger):\n    age,sex = passenger\n\n    if age < 16:\n        return 'child'\n    else:\n        return sex","bccde649":"titanic_df['person'] = titanic_df[['Age','Sex']].apply(male_female_child,axis=1)  ","4df0590c":"#take a quick view\ntitanic_df[0:10]","66a19e3e":"sns.catplot(x=\"Pclass\",data=titanic_df,kind='count',hue='person')","11cd9fb8":"titanic_df['Age'].hist(bins=70) #Konw distribution of passenger","cc275c95":"titanic_df['Age'].mean()","d95508c2":"titanic_df.groupby('person')['Age'].mean()","820e91e0":"# We could also get a quick overall comparison of male,female,child\ntitanic_df['person'].value_counts()","5c98e25e":"# Another way to visualize the data is to use FacetGrid to plot multiple kedplots on one plot\nfig =sns.FacetGrid(titanic_df,hue='Sex',aspect=4)\nfig.map(sns.kdeplot,'Age',shade = True)\n\noldest = titanic_df['Age'].max()\nfig.set(xlim = (0,oldest)) \nfig.add_legend() ","45f93b2d":"# Ages distribution by person(Male,Female,Child)\nfig =sns.FacetGrid(titanic_df,hue='person',aspect=4) #\nfig.map(sns.kdeplot,'Age',shade = True) \n\noldest = titanic_df['Age'].max()\nfig.set(xlim = (0,oldest)) \nfig.add_legend() ","d37ee694":"# Ages distribution by Pclass\nfig =sns.FacetGrid(titanic_df,hue='Pclass',aspect=4)\nfig.map(sns.kdeplot,'Age',shade = True) \n\noldest = titanic_df['Age'].max()\nfig.set(xlim = (0,oldest)) \nfig.add_legend() ","e2588a7d":"titanic_df.head()","f2e4b996":"deck_df = titanic_df[['Cabin','Pclass']].dropna()","56e08c25":"deck_df.reset_index(inplace=True,drop=True)\ndeck_df['levels'] = deck_df['Cabin'].str[:1]\ndeck_df.head()","71f4b5ed":"deck_df.sort_values(by='levels',inplace = True)","f701130e":"sns.catplot(x='levels',data=deck_df,kind='count',hue='Pclass') #pallette\u662f\u984f\u8272\u76e4\uff0c_d\u662f\u8b8adarker\u7684\u610f\u601d","a919e734":"# we will remove T class, since there was no T deck.\ndeck_df = deck_df[deck_df['levels']!='T']\nsns.catplot(x='levels',data=deck_df,kind='count',hue='Pclass')","91743f54":"sns.catplot(x='Embarked',data=titanic_df,kind='count',hue = 'Pclass',order=['C','Q','S']) ","b113f4d9":"titanic_df.head()","8af84716":"titanic_df['Alone'] = titanic_df.SibSp + titanic_df.Parch\n","97c7fcb2":"titanic_df['Alone'].loc[titanic_df['Alone']>0] = \"With Family\"\ntitanic_df['Alone'].loc[titanic_df['Alone']==0] = \"Alone\"","cb387e63":"titanic_df.head()","5bea030a":"sns.catplot(x= 'Pclass',data = titanic_df,palette='Blues',kind = 'count',hue='Alone')","0c05327d":"titanic_df['Survivor'] = titanic_df.Survived.map({0:'no',1:'yes'})\ntitanic_df.head()","39d762b5":"sns.catplot(x='Survivor',data=titanic_df,palette='Set1',kind='count')","d7bb7f70":"sns.catplot(x='Pclass',data=titanic_df,kind ='count',hue='Survivor')","e5fffa7c":"sns.pointplot(x='Pclass',y='Survived',data=titanic_df)","edc16f8b":"sns.pointplot(x='Pclass',y='Survived',data=titanic_df,hue='person')","d8e40a97":"sns.lmplot(x= 'Age',y= 'Survived',data=titanic_df) #\u8d8a\u8001\u6b7b\u8d8a\u5feb","93a0bdbe":"sns.lmplot(x= 'Age',y= 'Survived',data=titanic_df,hue='Pclass') #\u52a0Pclass","69015f83":"generation = [10,20,40,60,80]\nsns.lmplot(x='Age', y= 'Survived',data=titanic_df,hue='Pclass',palette='winter',x_bins=generation) #\u52a0\u5206\u9694\u9ede","73e4feb6":"sns.lmplot(x='Age', y= 'Survived',data=titanic_df,hue='person',palette='winter',x_bins=generation) #\u52a0\u5206\u9694\u9ede","7839706f":"#Recall our dataframe\ntitanic_df.head()","80ba174b":"sns.catplot(x='levels',data=deck_df,kind='count',hue='Pclass')","bd6c7f02":"# Add 1 column to represent 'ABCDEFG' level of deck\ntitanic_df['levels'] = titanic_df.Cabin.str[:1]\n# keep only level, Survived, Pclass columns\ndeck_survival_df = titanic_df[['levels','Survived','Pclass','person']].dropna().sort_values(by='levels')\n# drop level 'T'\ndeck_survival_df = deck_survival_df[deck_survival_df['levels']!='T']","ee0a4da5":"# in order to use lmplot, convert ABCDEFG to 1234567\nlevel_list = {'A':1,'B':2,'C':3,'D':4,'E':5,'F':6,'G':7}\ndeck_survival_df['deck_number'] = deck_survival_df.levels.map(level_list)","cb7c888e":"sns.lmplot(x= 'deck_number',y= 'Survived',data=deck_survival_df) ","95630c26":"deck_survival_df.count()","e10dabf2":"sns.lmplot(x= 'deck_number',y= 'Survived',data=deck_survival_df,hue ='person') ","d31dc791":"sns.catplot(x='Alone',data=titanic_df,kind='count')","9db0dcf3":"sns.lmplot(x='Age',y= 'Survived',data=titanic_df,hue='Alone')","b415e0bd":"titanic_df.head()","fa7e9043":"titanic_df_M = titanic_df[titanic_df['person']=='male']\ntitanic_df_W = titanic_df[titanic_df['person']=='female']\ntitanic_df_K = titanic_df[titanic_df['person']=='child']","104912a9":"titanic_df.person.value_counts()","91c53ada":"Fig_M = sns.lmplot(x='Age',y= 'Survived',data=titanic_df_M,hue='Alone')\nFig_M.set(title='Male Survival rate')","b370d4c4":"Fig_W = sns.lmplot(x='Age',y= 'Survived',data=titanic_df_W,hue='Alone')\nFig_W.set(title='Female Survival rate')","f909c77c":"Fig_K = sns.lmplot(x='Age',y= 'Survived',data=titanic_df_K,hue='Alone')\nFig_K.set(title='Child Survival rate')","06581266":"Wow, quite a few more males in the 3rd class than females, an interesting find. However, it might be useful to know the split between males,females,and children. How can we go about this?","f3ac3e0f":"## 6. Conclusion\n\nNow we have answered all of our quesitons, and there are some interesting findings :\n\n1. Pclass have a strong realtionship with survival rate.\n2. Perhaps Queenstown encomic is much lower than 2 other towns, need more information to check.\n3. Almost more than half male didn't survive, I assume they were helping other people and gave the lifeboat seats to others.\n4. Age doesn't play a key facotr on survival rate but gender does.\n5. Deck inforamtion need more entries to validate again.\n6. Men with family have higher survival rate than single men, however, this is oppsite for female and child.\n\nI think the main factors to be survive this sinking are 2 things..\n1. Gender.(possibly change in nowday, because we promote more equal rights for men and women than the past)\n2. Pclass.\n","58c92ecc":"## 4. Questions to be answered","02222c5d":"### 4.4 Who was alone and who was with family?   ","17cfefd5":"Looks like there is a general trend that the older the passenger was, the less likely they survived. Let's go ahead and use hue to take a look at the effect of class and age.","af963694":"## 5. Homework   \n\nAdd 2 more questions:   \n1. Did the deck have an effect on the passengers survival rate? did the answer match up with you intuition?   \n2. Did having a family member increase the odds of surviving the crash?","f48a240d":"### 4.1. Who were the passengers on the Titanic? (Ages,Gender,Class,..etc)  ","4c7461ff":"Look like survival rates for the 3rd class are substantially lower! But maybe this effect is being caused by the large amount of men in the 3rd class in combination with the women and children first policy. Let's use 'hue' to get a clearer picture on this.","28e0371b":"All good data analysis projects begin with trying to answer questions. Now that we know what column category data we have let's think of some questions or insights we would like to obtain from the data. So here's a list of questions we'll try to answer using our new data analysis skills!\n\nFirst some basic questions:\n\n1.) Who were the passengers on the Titanic? (Ages,Gender,Class,..etc)  \n2.) What deck were the passengers on and how does that relate to their class?  \n3.) Where did the passengers come from?  \n4.) Who was alone and who was with family?  \n\nThen we'll dig deeper, with a broader question:\n\n5.) What factors helped someone survive the sinking?\nSo let's start with the first question: Who were the passengers on the titanic?","e12a8ea3":"Interesting.. Now we know because there are more mens in the passengers, and single men have lower survial rate than family men, which lead us think that wtih family can have higer survival rate.\n\nBut actually... we also found out signle female and child are oppsite result.","754ea352":"Next, let's dig into survival rate and deck.","304ef3e0":"There are 891 entries for most of columns, but only 714 for Age and 204 for Cabin.","edf1a9e7":"Excellent! Now we have seperated the passengers between female,male,and child. This will be important later on beacuse of the famous \"Women and children first policy\"!","7caf11a0":"We can also use the x_bin argument to clean up this figure and grab the data and bin it by age with a std attached!","2605ffae":"We can know almost all of people from Queenstown are Pclass 3, perhaps the encomic at that time is lower than 2 other places.","3724e569":"### 5.1 Did the deck have an effect on the passengers survival rate? did the answer match up with you intuition?  ","35761db3":"It's totally not the same result with my intuition, I didn't expect deck A has lowest survival rate and F has highest..","2a7be536":"Interesting, quite a bit of children in 3rd class and not so many in 1st! How about we create a distribution of the ages to get a more precise picture of the who the passengers were.","88cef1bd":"### 4.3 Where did the passengers come from?  ","6bb753aa":"### 4.5 What factors helped someone survive the sinking?","e161bc84":"Assume my intuition is people who live in lower class of deck have lover survival rate, and we've plot the visualization to show out the relation ship between Pclass & deck. so I assume survival rate of (ABC) deck are higher than (DEF)\n\nLet's recall our Pclass & deck visualization first.","2854bfcf":"I noticed for all ages, with family can increase thier survival rate,\nhowever, I assume kids always have higer survival rate and gender did play a big influnce, so I want to remove this factor, or check only Mens, Womens.","45bf6122":"Yes..becasue most of male didn't survive cause the bias. but we still can find there are more clear trend for female and child.\n","ffd85ec0":"let's recall how many people are Alone","55768867":"We can know clealy about relationship between Pclass and deck.","f1539a7d":"## 1. Background Introdution   \n\nThis is a learning project from an udemy lesson made by Mr. Jose, most of content and codes here follow the lecture's instruction.\nCourse link: https:\/\/www.udemy.com\/course\/learning-python-for-data-analysis-and-visualization\n\nCheck out the Kaggle Titanic Challenge at the following link:   \nhttps:\/\/www.kaggle.com\/c\/titanic-gettingStarted   \nDownload the train.csv file and save it to the same location as your iPython Notebooks.","284ec3b0":"### 5.2 Did having a family member increase the odds of surviving the crash?","fc970731":"From this data it looks like being a male or being in 3rd class were both not favourable for survival. Even regardless of class the result of being a male in any class dramatically decreases your chances of survival.\n\nBut what about age? Did being younger or older have an effect on survival rate?","3b9a50ce":"## 2. Set up environment","c70f670c":"I also think this finding need more data to validate again, since the deck information only has 203 entries. \nHowever we can check again that does gender effect? ","4294376e":"we know the reason casing younger passengers have higher survival rate, is mostly casued from male.\nand we can clearly know age is not the key facotor, but gender is.","5c0d5981":"### 4.2 What deck were the passengers on and how does that relate to their class?","e673c950":"From :https:\/\/www.kaggle.com\/c\/titanic\/data\nwe know: \n\n1. survival  : Survival\t0 = No, 1 = Yes\n2. pclass\t :Ticket class\t1 = 1st, 2 = 2nd, 3 = 3rd\n3. sex\t     :Sex\t\n4. Age\t     :Age in years\t\n5. sibsp\t :# of siblings \/ spouses aboard the Titanic\t\n6. parch\t :# of parents \/ children aboard the Titanic\t\n7. ticket\t :Ticket number\t\n8. fare\t     :Passenger fare\t\n9. cabin\t :Cabin number\t\n10. embarked :Port of Embarkation\tC = Cherbourg, Q = Queenstown, S = Southampton","a6078f85":"## 3. Know the dataset"}}