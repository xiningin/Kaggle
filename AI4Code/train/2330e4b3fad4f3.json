{"cell_type":{"40dc74bc":"code","a926706d":"code","541f4bee":"code","be9a167a":"code","cac1c4d9":"code","bade3af1":"code","f02606e5":"code","f6688c31":"code","891a8e75":"code","f3d1db3c":"code","e7b99b41":"code","58ab715d":"code","855225ce":"code","11cdd16e":"code","611fb27a":"code","40281b1a":"code","9289d3ce":"code","0923bb6d":"code","19b1ebb4":"code","c9cdf92d":"code","7df76fef":"code","7a110d07":"code","0c1e2178":"markdown","0c95b1b4":"markdown","2f9900f4":"markdown","d5033b6a":"markdown","d4f137a5":"markdown","b4211cc2":"markdown","407bd6ea":"markdown","67de7342":"markdown","d5d4bc22":"markdown","fc9028f6":"markdown","e322ada8":"markdown","4143ed95":"markdown","6bf74b4d":"markdown","e636fc73":"markdown","784a53ac":"markdown","5cfb9b77":"markdown","56f96cfa":"markdown","17232376":"markdown","c8469334":"markdown","a3d5b5e5":"markdown","9194568a":"markdown","594eae7a":"markdown","e1b497cb":"markdown","fe8cfc58":"markdown","4c75a0d9":"markdown","f0283db4":"markdown","a675c855":"markdown","21576e19":"markdown","6a87ddc4":"markdown"},"source":{"40dc74bc":"%%javascript\nIPython.OutputArea.prototype._should_scroll = function(lines) {\n    return false;\n}","a926706d":"import numpy as np\nimport pandas as pd\nimport requests\nfrom bs4 import BeautifulSoup\nimport time\nimport re\nimport json\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nfrom geopandas.tools import geocode\nimport folium\nfrom folium import Marker\nfrom folium.plugins import MarkerCluster\n\nfrom IPython.display import display, HTML\n        \nKAGGLE_BASE_URL = \"https:\/\/kaggle.com\/\"\nTOP_N = 10\nREQUEST_DELAY = 2","541f4bee":"# # Datasets\ndatasets = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Datasets.csv', \n                       parse_dates=['CreationDate', 'ReviewDate', 'FeatureDate',\n                                    'LastActivityDate'], infer_datetime_format=True\n                      )\ndataset_versions = pd.read_csv('\/kaggle\/input\/meta-kaggle\/DatasetVersions.csv', \n                               parse_dates=['CreationDate'], \n                               infer_datetime_format=True\n                              )\n# dataset_votes = pd.read_csv('\/kaggle\/input\/meta-kaggle\/DatasetVotes.csv', \n#                             parse_dates=['VoteDate'], infer_datetime_format=True\n#                            )\n# dataset_tags = pd.read_csv('\/kaggle\/input\/meta-kaggle\/DatasetTags.csv')\n# data_sources = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Datasources.csv', \n#                            parse_dates=['CreationDate'], infer_datetime_format=True\n#                           )\n\n# # Kernels\nkernels = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Kernels.csv', \n                      parse_dates=['CreationDate', 'EvaluationDate',\n                                   'MadePublicDate', 'MedalAwardDate'],\n                      infer_datetime_format=True\n                     )\nkernel_versions = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVersions.csv', \n                              parse_dates=['CreationDate', 'EvaluationDate'],\n                              infer_datetime_format=True\n                             )\n# kernel_votes = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVotes.csv', \n#                            parse_dates=['VoteDate'], infer_datetime_format=True\n#                           )\n# kernel_version_comp = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVersionCompetitionSources.csv')\n# kernel_version_out = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVersionOutputFiles.csv')\n# kernel_version_datasets = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVersionDatasetSources.csv')\n# kernel_langs = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelLanguages.csv')\n# kernel_version_kernel_sources = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelVersionKernelSources.csv')\n# kernel_tags = pd.read_csv('\/kaggle\/input\/meta-kaggle\/KernelTags.csv')\n\n# # Forums\nmessages = pd.read_csv('\/kaggle\/input\/meta-kaggle\/ForumMessages.csv', \n                       parse_dates=['PostDate', 'MedalAwardDate'], \n                       infer_datetime_format=True\n                      )\ntopics = pd.read_csv('\/kaggle\/input\/meta-kaggle\/ForumTopics.csv', \n                     parse_dates=['CreationDate', 'LastCommentDate'], \n                     infer_datetime_format=True\n                    )\n# forums = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Forums.csv')\n# forum_votes = pd.read_csv('\/kaggle\/input\/meta-kaggle\/ForumMessageVotes.csv', \n#                           parse_dates=['VoteDate'], infer_datetime_format=True\n#                          )\n\n# # Competitions\n# teams = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Teams.csv', \n#                     parse_dates=['ScoreFirstSubmittedDate', 'LastSubmissionDate',\n#                                  'MedalAwardDate'], \n#                     infer_datetime_format=True\n#                    )\n# comps = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Competitions.csv', \n#                     parse_dates=['EnabledDate', 'DeadlineDate', \n#                                  'ProhibitNewEntrantsDeadlineDate', 'TeamMergerDeadlineDate', \n#                                  'TeamModelDeadlineDate', 'ModelSubmissionDeadlineDate'], \n#                     infer_datetime_format=True\n#                    )\n# comp_tags = pd.read_csv('\/kaggle\/input\/meta-kaggle\/CompetitionTags.csv')\n# team_membership = pd.read_csv('\/kaggle\/input\/meta-kaggle\/TeamMemberships.csv', \n#                               parse_dates=['RequestDate'], \n#                               infer_datetime_format=True\n#                              )\n# submissions = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Submissions.csv', \n#                           parse_dates=['SubmissionDate', 'ScoreDate'], \n#                           infer_datetime_format=True\n#                          )\n\n# # Users\nusers = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Users.csv',\n                    parse_dates=['RegisterDate'], \n                    infer_datetime_format=True\n                   )\nuser_followers = pd.read_csv('\/kaggle\/input\/meta-kaggle\/UserFollowers.csv', \n                             parse_dates=['CreationDate'], \n                             infer_datetime_format=True\n                            )\n# user_orgs = pd.read_csv('\/kaggle\/input\/meta-kaggle\/UserOrganizations.csv', \n#                         parse_dates=['JoinDate'], \n#                         infer_datetime_format=True\n#                        )\n# user_ach = pd.read_csv('\/kaggle\/input\/meta-kaggle\/UserAchievements.csv', \n#                        parse_dates=['TierAchievementDate'], \n#                        infer_datetime_format=True\n#                       )\n\n# # Misc\n# tags = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Tags.csv')\n# orgs = pd.read_csv('\/kaggle\/input\/meta-kaggle\/Organizations.csv', \n#                    parse_dates=['CreationDate'], infer_datetime_format=True\n#                   )","be9a167a":"kaggle_team = (users[users['PerformanceTier'].eq(5)]\n               .copy()\n               .reset_index(drop=True)\n               .drop(columns='PerformanceTier')\n              )","cac1c4d9":"string = f\"There are currently {kaggle_team.shape[0]} employees on the Kaggle team.\"\ndisplay(HTML(string))","bade3af1":"def display_html(df, cols=None, num_rows=0):\n    \"\"\"Display columns cols and num_rows rows of the data \n    frame df in HTML.\n    \"\"\"\n    \n    if num_rows != 0:\n        df_to_display = df.head(num_rows)\n    else:\n        df_to_display = df\n    \n    df_html = df_to_display.to_html(columns=cols, index=False, na_rep='',\n                              escape=False, render_links=True)\n    display(HTML(df_html))","f02606e5":"for index in kaggle_team.index:\n    time.sleep(REQUEST_DELAY)\n    row = kaggle_team.iloc[index]\n    \n    username = row.UserName\n    profile_url = f'{KAGGLE_BASE_URL}{username}'\n    displayname = row.DisplayName\n    \n    result = requests.get(profile_url)\n    src = result.text\n    soup = BeautifulSoup(src, 'html.parser').find_all(\"div\", id=\"site-body\")[0].find(\"script\")\n    \n    user_info = re.search('Kaggle.State.push\\(({.*})', str(soup)).group(1)\n    user_dict = json.loads(user_info)\n\n    city = user_dict['city']\n    region = user_dict['region']\n    country = user_dict['country']\n    avatar_url = user_dict['userAvatarUrl']\n    occupation = user_dict['occupation']\n    organization = user_dict['organization']\n    num_followers = user_dict['followers']['count']\n    num_following = user_dict['following']['count']\n    num_posts = user_dict['discussionsSummary']['totalResults']\n    num_datasets = user_dict['datasetsSummary']['totalResults']\n    num_kernels = user_dict['scriptsSummary']['totalResults']\n    num_comps = user_dict['competitionsSummary']['totalResults']\n    \n    \n    kaggle_team.loc[index, 'Image'] = f'<a href=\"{profile_url}\" target=\"_blank\" title=\"{displayname}\"><img src=\"{avatar_url}\" width=\"100\" height=\"100\"><\/a>'\n    \n    if city and region and country:\n        kaggle_team.loc[index, 'Location'] = f'{city}, {region}, {country}'\n        \n    if occupation and organization:\n        kaggle_team.loc[index, 'Occupation'] = f'{occupation} at {organization}'\n    elif organization:\n        kaggle_team.loc[index, 'Occupation'] = organization\n    elif occupation:\n        kaggle_team.loc[index, 'Occupation'] = occupation\n    \n    kaggle_team.loc[index, 'NumFollowers'] = num_followers\n    kaggle_team.loc[index, 'NumFollowing'] = num_following\n    kaggle_team.loc[index, 'NumPosts'] = num_posts\n    kaggle_team.loc[index, 'NumDatasets'] = num_datasets\n    kaggle_team.loc[index, 'NumKernels'] = num_kernels\n    kaggle_team.loc[index, 'NumCompetitions'] = num_comps\n\nkaggle_team = kaggle_team.convert_dtypes()\ndisplay_html(kaggle_team, cols=['UserName', 'DisplayName', 'RegisterDate',\n                                'Image', 'Location', 'Occupation'])","f6688c31":"m = folium.Map(location=[0, 30], tiles='OpenStreetMap', zoom_start=1)\nmc = MarkerCluster()\nlocations = {}\nfor index in kaggle_team[kaggle_team.Location.notna()].index:\n    time.sleep(REQUEST_DELAY)\n    row = kaggle_team.iloc[index]\n    displayname = row.DisplayName\n    location = row.Location\n    popup = f'{displayname}; {location}'\n    tooltip = f'{displayname}; {location}'\n    \n    if location in locations:\n        lat, long = locations[location]\n    else:\n        point = geocode(location, provider='nominatim').geometry.iloc[0]\n        lat, long = point.y, point.x\n        locations[location] = [lat, long]\n    \n    mc.add_child(Marker([lat, long], popup=popup, tooltip=tooltip))\n    \nm.add_child(mc)","891a8e75":"followers = kaggle_team.nlargest(TOP_N, 'NumFollowers').copy()\ndisplay_html(followers, cols=['UserName', 'DisplayName', 'Image',\n                              'Occupation', 'NumFollowers', 'NumFollowing'])","f3d1db3c":"following = kaggle_team.nlargest(TOP_N, 'NumFollowing').copy()\ndisplay_html(following, cols=['UserName', 'DisplayName', 'Image',\n                              'Occupation', 'NumFollowing', 'NumFollowers'])","e7b99b41":"kaggle_following_tier = (pd.merge(user_followers[['UserId', 'FollowingUserId']], kaggle_team['Id'], left_on='UserId', right_on='Id')\n                         .drop(columns='Id')\n                         .merge(users, left_on='FollowingUserId', right_on='Id')[['Id', 'UserName', 'DisplayName', 'PerformanceTier']]\n                         .drop_duplicates('Id')\n                         .groupby('PerformanceTier')\n                         .size()\n                        )\nplt.figure(figsize=(8, 5))\nplt.title('Number of users followed by at least one Kaggle team member, by performance tier')\nax = sns.barplot(kaggle_following_tier.index, kaggle_following_tier.values, color='steelblue')","58ab715d":"tier_counts = users['PerformanceTier'].value_counts()\ntier_counts","855225ce":"kaggle_following_tier_prop = kaggle_following_tier \/ tier_counts\nplt.figure(figsize=(8, 5))\nplt.title('Proportion of users followed by at least one Kaggle team member, by performance tier')\nax = sns.barplot(kaggle_following_tier_prop.index, kaggle_following_tier_prop.values, color='steelblue')","11cdd16e":"kaggle_followers_tier = (pd.merge(user_followers[['UserId', 'FollowingUserId']], kaggle_team['Id'], left_on='FollowingUserId', right_on='Id')\n                         .drop(columns='Id')\n                         .merge(users, left_on='UserId', right_on='Id')[['Id', 'UserName', 'DisplayName', 'PerformanceTier']]\n                         .drop_duplicates('Id')\n                         .groupby('PerformanceTier')\n                         .size()\n                        )\nplt.figure(figsize=(8, 5))\nplt.title('Number of users that follow at least one Kaggle team member, by performance tier')\nax = sns.barplot(kaggle_followers_tier.index, kaggle_followers_tier.values, color='seagreen')","611fb27a":"kaggle_followers_tier_prop = kaggle_followers_tier \/ tier_counts\nplt.figure(figsize=(8, 5))\nplt.title('Proportion of users that follow at least one Kaggle team member, by performance tier')\nax = sns.barplot(kaggle_followers_tier_prop.index, kaggle_followers_tier_prop.values, color='seagreen')","40281b1a":"kaggle_team_posts = kaggle_team[['UserName', 'DisplayName', 'Image', 'Occupation', 'NumPosts']].nlargest(TOP_N, 'NumPosts').copy()\ndisplay_html(kaggle_team_posts)","9289d3ce":"forum_topics = (topics[topics.KernelId.isna()]\n                .merge(messages[['Id', 'PostUserId']], left_on='FirstForumMessageId', right_on='Id')\n                .loc[:, ['Title', 'Score', 'TotalMessages', 'TotalReplies', 'PostUserId']]\n                .merge(kaggle_team, left_on='PostUserId', right_on='Id')\n                .nlargest(TOP_N, 'Score')\n               )\n\ndisplay_html(forum_topics,\n             cols=['UserName', 'DisplayName', 'Image', 'Occupation', 'Score', 'Title']\n            )","0923bb6d":"kaggle_team_comps = kaggle_team[['UserName', 'DisplayName', 'Image', 'Occupation', 'NumCompetitions']].nlargest(TOP_N, 'NumCompetitions').copy()\ndisplay_html(kaggle_team_comps)","19b1ebb4":"kaggle_team_kernels = kaggle_team[['UserName', 'DisplayName', 'Image', 'Occupation', 'NumKernels']].nlargest(TOP_N, 'NumKernels').copy()\ndisplay_html(kaggle_team_kernels)","c9cdf92d":"kaggle_team_kernels = (pd.merge(kaggle_team[['Id', 'UserName', 'DisplayName', 'Image']], \n                               kernels[['Id', 'AuthorUserId', 'CurrentKernelVersionId', 'TotalVotes', 'CurrentUrlSlug']], \n                               left_on='Id', right_on='AuthorUserId')\n                       .nlargest(TOP_N, 'TotalVotes')\n                       .merge(kernel_versions[['Title', 'Id']], left_on='CurrentKernelVersionId', right_on='Id')\n                      )\nkaggle_team_kernels['url'] = KAGGLE_BASE_URL + kaggle_team_kernels.UserName + '\/' + kaggle_team_kernels.CurrentUrlSlug\ndisplay_html(kaggle_team_kernels, cols=['UserName', 'DisplayName', 'Image', 'TotalVotes', 'Title', 'url'])","7df76fef":"kaggle_team_data = kaggle_team[['UserName', 'DisplayName', 'Image', 'Occupation', 'NumDatasets']].nlargest(TOP_N, 'NumDatasets').copy()\ndisplay_html(kaggle_team_data)","7a110d07":"kaggle_team_datasets = (datasets[datasets.OwnerUserId.notna() & datasets.OwnerUserId.eq(datasets.CreatorUserId)]\n                        .loc[:, ['Id', 'CreatorUserId', 'TotalVotes', 'CurrentDatasetVersionId']]\n                        .merge(kaggle_team[['Id', 'UserName', 'DisplayName', 'Image']], left_on='CreatorUserId', right_on='Id')\n                        .nlargest(TOP_N, 'TotalVotes')\n                        .merge(dataset_versions[['Id', 'Title', 'Slug']], left_on='CurrentDatasetVersionId', right_on='Id')                        \n                       )\nkaggle_team_datasets['url'] = KAGGLE_BASE_URL + kaggle_team_datasets.UserName + '\/' + kaggle_team_datasets.Slug\ndisplay_html(kaggle_team_datasets, cols=['UserName', 'DisplayName', 'Image', 'TotalVotes', 'Title', 'url'])","0c1e2178":"# Meet The Kaggle Team","0c95b1b4":"<a id=\"discussions\"><\/a>\n[Return to table of contents](#table-of-contents)","2f9900f4":"<a id=\"location\"><\/a>\n[Return to table of contents](#table-of-contents)","d5033b6a":"### Who follows the Kaggle team?","d4f137a5":"# The Kaggle Team\nThe images in the table below link to the Kaggle team member's profile. A missing location or occupation in the table indicates that the Kaggle team member has not filled in this information in their profile.","b4211cc2":"For the most part, the higher a user's tier, the more likely they are to follow at least one Kaggle team member.","407bd6ea":"# Competitions\n### Number of competitions","67de7342":"<a id=\"table-of-contents\"><\/a>","d5d4bc22":"### Popular topics by the Kaggle team","fc9028f6":"# Where are Kaggle team members located?\nThe [Geospatial Analysis](https:\/\/kaggle.com\/learn\/geospatial-analysis) course on Kaggle was one of my favourites. We'll put that knowledge to use here to geocode the locations from the table above.","e322ada8":"As expected, most users that follow the Kaggle team are novices. Just as we did above, we'll visualize the proportion of users that follow at least one Kaggle team member, by performance tier.","4143ed95":"## Table of contents\n1. [The Kaggle team](#the-kaggle-team)\n1. [Where are Kaggle team members located?](#location)\n1. [Followers](#followers)\n1. [Discussions](#discussions)\n1. [Competitions](#comps)\n1. [Kernels](#kernels)\n1. [Datasets](#datasets)","6bf74b4d":"<a id=\"the-kaggle-team\"><\/a>\n[Return to table of contents](#table-of-contents)","e636fc73":"<a id=\"datasets\"><\/a>\n[Return to table of contents](#table-of-contents)","784a53ac":"Almost every Kaggle team member is followed by another Kaggle team member. Also, about 40% of grandmasters are followed by at least one Kaggle team member.","5cfb9b77":"# Discussions\n### Number of posts by the Kaggle team\n","56f96cfa":"[Meta Kaggle](https:\/\/kaggle.com\/kaggle\/meta-kaggle) is \"Kaggle's public data on competitions, users, submission scores, and kernels\". There is actually a \"Meet Our Team\" page on Kaggle already: https:\/\/kaggle.com\/about\/team. However, not every Kaggle team member is listed. Also, the Meta Kaggle dataset allows us to go into a bit more detail.","17232376":"Next, we will break down followers and follows by tiers.\n### Who does the Kaggle team follow?","c8469334":"# Datasets\n### Number of datasets","a3d5b5e5":"<a id=\"kernels\"><\/a>\n[Return to table of contents](#table-of-contents)","9194568a":"As expected, most Kaggle team members are in the United States.","594eae7a":"### Who follows other users the most?\nPaul follows more than twice as many users as anyone else on the Kaggle team!","e1b497cb":"<a id=\"comps\"><\/a>\n[Return to table of contents](#table-of-contents)","fe8cfc58":"# Kernels\n### Number of kernels\nOf course, Kaggle Kerneler is at the top.","4c75a0d9":"### Popular datasets by the Kaggle team","f0283db4":"### Popular kernels by the Kaggle team","a675c855":"<a id=\"followers\"><\/a>\n[Return to table of contents](#table-of-contents)","21576e19":"Of all users that are followed by Kaggle team members, most are novices. If we look at the number of users on the platform by performance tier, we see that most users are novices. We'll divide the counts by the number of users in that tier and visualize the proportion of users in a tier that are followed by at least one Kaggle team member.","6a87ddc4":"# Followers\n\n### Who has the most followers?\nMeg has more than twice as many followers as anyone else on the Kaggle team!"}}