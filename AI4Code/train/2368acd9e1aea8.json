{"cell_type":{"048883ae":"code","62ad5c4d":"code","2cd532b3":"code","2f558ce2":"code","6ef79408":"code","4a4f767e":"code","a592daa3":"code","3a98f53d":"code","8e958569":"code","14b8f260":"code","9af638cf":"code","972da530":"code","2f852350":"code","898be713":"code","37c0302b":"code","c4028ce9":"code","36a0e569":"code","5b28c342":"code","dfcf7dd4":"code","ca2bdd01":"code","e7fbc533":"code","6636f364":"code","76b47ad7":"code","89484da3":"code","38edfb50":"code","689d4cae":"code","d3f790b7":"code","142af88c":"code","9bb86ab6":"code","db58eadd":"code","ec692868":"code","8f00740c":"code","2b3aefc9":"code","1a47c9ed":"code","beee995f":"code","52ed1573":"code","2a941cdf":"code","683e0c63":"code","b15fa657":"code","3ebe885d":"code","9ea2e033":"code","0c53801a":"code","7f3c0eac":"code","5f39032f":"code","d360da14":"code","c8895ce8":"code","2d1e2ff3":"code","0b6db04d":"markdown","04ddc024":"markdown","4c7595be":"markdown","149ab444":"markdown","c53f2627":"markdown","e5b75873":"markdown","fefe597e":"markdown","e9daf98a":"markdown","21d2a832":"markdown","b94d9937":"markdown","592e2b5e":"markdown","e4ede401":"markdown","7dd6bc70":"markdown","50dde6fa":"markdown","4e062f39":"markdown","6d6793d1":"markdown","40e15a6f":"markdown","06bc511e":"markdown","ce9be092":"markdown","881947e1":"markdown","0cb862c4":"markdown","6f63af23":"markdown","1893b295":"markdown","f8c6b70c":"markdown","6a936b1e":"markdown","506318e1":"markdown","d01949e7":"markdown","5b9ce7b3":"markdown","8298fce1":"markdown","6978320d":"markdown"},"source":{"048883ae":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","62ad5c4d":"!pip install plotly","2cd532b3":"import plotly.graph_objs as go\nimport plotly.express as px","2f558ce2":"df = pd.read_csv('..\/input\/covid19-timeline-analysis\/owid-covid-data.csv')\ndf.head()","6ef79408":"df.shape","4a4f767e":"len(df.iso_code.unique())","a592daa3":"df.info()","3a98f53d":"df.isna().sum()","8e958569":"df.describe()","14b8f260":"df.date.min(), df.date.max()","9af638cf":"df.columns","972da530":"cols_to_drop = ['continent', 'reproduction_rate', 'icu_patients', 'icu_patients_per_million', 'hosp_patients', 'hosp_patients_per_million',\n               'weekly_icu_admissions_per_million', 'tests_units', 'extreme_poverty', 'cardiovasc_death_rate',\n               'diabetes_prevalence', 'handwashing_facilities', 'life_expectancy', 'human_development_index', 'excess_mortality']","2f852350":"df.drop(columns=cols_to_drop, inplace=True)\ndf.columns","898be713":"df.info()","37c0302b":"total_cases = df.groupby('iso_code')['total_cases'].last().sum()\ntotal_cases","c4028ce9":"total_tests = df.groupby('iso_code')['total_tests'].last().sum()\ntotal_tests","36a0e569":"total_vac = df.groupby('iso_code')['total_vaccinations'].last().sum()\ntotal_vac","5b28c342":"df.groupby('iso_code')['population_density'].first()","dfcf7dd4":"df.loc[df.iso_code == 'ABW',['population_density']].head()","ca2bdd01":"density_df = df.groupby('iso_code')[['population_density', 'location']].first().reset_index()\ndensity_df.head()","e7fbc533":"density_df.population_density.min(), density_df.population_density.max()","6636f364":"df.population_density.describe()","76b47ad7":"fig = px.choropleth(density_df, locations='iso_code', color='population_density',\n                   hover_name='location', projection='natural earth',\n                   title='Population Density',\n                   range_color=(0,500),\n                   color_continuous_scale='greens'\n                   )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","89484da3":"age_df = df.groupby('iso_code')[['location', 'median_age']].first().reset_index()\nage_df.head()","38edfb50":"age_df.describe()","689d4cae":"fig = px.choropleth(age_df, locations='iso_code', color='median_age',\n                   hover_name='location', projection='orthographic',\n                   title='Population Density',\n                   range_color=(15,49),\n                   color_continuous_scale='greens'\n                   )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","d3f790b7":"df.sort_values('date', inplace=True)","142af88c":"fig = px.choropleth(df.loc[:,['iso_code', 'total_cases', 'date']], locations='iso_code',\n                    color='total_cases',\n                    animation_frame='date', \n                    title='Total Cases of Covid19',\n                    height=750,\n                    color_continuous_scale='greens'\n)\n\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","9bb86ab6":"fig = px.choropleth(df.loc[:,['iso_code', 'new_cases_smoothed', 'date']], locations='iso_code',\n                    color='new_cases_smoothed',\n                    animation_frame='date', \n                    title='New Cases of Covid19',\n                    height=750,\n                    color_continuous_scale='greens'\n)\n\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","db58eadd":"fig = px.choropleth(df.loc[:,['iso_code', 'total_deaths', 'date']], locations='iso_code',\n                    color='total_deaths',\n                    animation_frame='date', \n                    title='Total Deaths of Covid19',\n                    height=750,\n                    color_continuous_scale='greens'\n)\n\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","ec692868":"fig = px.choropleth(df.loc[:,['iso_code', 'new_deaths_smoothed', 'date']], locations='iso_code',\n                    color='new_deaths_smoothed',\n                    animation_frame='date', \n                    title='New Deaths of Covid19',\n                    height=750,\n                    color_continuous_scale='greens'\n)\n\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","8f00740c":"fig = px.choropleth(df.loc[:,['iso_code', 'new_tests', 'date']], locations='iso_code',\n                    color='new_tests',\n                    animation_frame='date', \n                    title='New Tests of Covid19',\n                    height=750,\n                    color_continuous_scale='greens'\n)\n\n#fig.update(layout_coloraxis_showscale=False)\nfig.show()","2b3aefc9":"df.sort_index(inplace=True)\ndf.head()","1a47c9ed":"df.columns","beee995f":"ds = df.loc[(df.iso_code == 'JPN') | (df.iso_code == 'USA') | (df.iso_code == 'LTU'), ['date', 'iso_code', 'tests_per_case']]","52ed1573":"fig = px.line(ds, x='date', y='tests_per_case', color='iso_code')\n\nfig.update_xaxes(\n    dtick=\"M1\",\n    tickformat='%b\\n%Y'\n)\n\nfig.show()","2a941cdf":"vac = df.groupby('date')['new_vaccinations'].agg(['sum'])\nvac.reset_index(inplace=True)\n\nvac.rename(columns={'sum':'Vaccines'}, inplace=True)\nvac = vac[vac.Vaccines != 0]\nvac.head()","683e0c63":"fig = px.line(vac, x='date', y='Vaccines')\n\nfig.update_xaxes(\n    dtick=\"M1\",\n    tickformat='%b\\n%Y'\n)\n\nfig.show()","b15fa657":"fig = px.choropleth(df.loc[:,['iso_code', 'stringency_index', 'date', 'location']], locations='iso_code', color='stringency_index',\n                   hover_name='location', projection='natural earth',\n                   title='Stringency Index',\n                   range_color=(0,100),\n                   color_continuous_scale='greens'\n                   )\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","3ebe885d":"df.columns","9ea2e033":"smokers = df.groupby('iso_code')[['female_smokers', 'male_smokers', 'total_cases_per_million']].last()","0c53801a":"smokers = smokers.dropna().sort_values('total_cases_per_million')","7f3c0eac":"smokers['total_smokers'] = smokers['female_smokers'] + smokers['male_smokers']","5f39032f":"smokers.loc[:,['total_cases_per_million', 'total_smokers']].corr()","d360da14":"smokers.head(10), smokers.tail(10)","c8895ce8":"gdp_age = df.groupby('iso_code')[['gdp_per_capita', 'median_age', 'total_cases_per_million']].last()\ngdp_age = gdp_age.dropna().sort_values('total_cases_per_million')\ngdp_age.head(10), gdp_age.tail(10)","2d1e2ff3":"gdp_age.corr()","0b6db04d":"### Observations\n\nLooking at correlation between total_smokers and total_cases_per_million we can se weak correlation, which implies that there could be some small proff that countries that have more people that smoke has a greater risk having a more covid cases. That being said correlation is not a perfect way to determen causality and looking at top 10 and bottom 10 countries by covid cases per million people we can see that percentage of people that smoke varies a little, but are very similar.","04ddc024":"## Basic information about the structure of dataset","4c7595be":"### Observations\n\nWe have 60 features and 103143 entries from 231 countries. We have a lot of missing data in columns that will need further attention in working with it. We also have some negative values at columns new_cases, new_deaths, new_cases_per_million, I'll have to keep that in mind and investigate the cause of it; There are plenty of columns that has no use for us so I propobly should drop it to make working with data more efective. Finally we are working with data from 2020-01-01 -> 2021-07-17 and it also should be converted to datetime.\n\n#### Stringency index\n\nThe nine metrics used to calculate the Stringency Index are: school closures; workplace closures; cancellation of public events; restrictions on public gatherings; closures of public transport; stay-at-home requirements; public information campaigns; restrictions on internal movements; and international travel controls.\n\nA higher score indicates a stricter response (i.e. 100 = strictest response). If policies vary at the subnational level, the index is shown as the response level of the strictest sub-region.\n\nIt\u2019s important to note that this index simply records the strictness of government policies. It does not measure or imply the appropriateness or effectiveness of a country\u2019s response. A higher score does not necessarily mean that a country\u2019s response is \u2018better\u2019 than others lower on the index.","149ab444":"### Observations\n\nThere are few countries that has a massive population density. But those countries are independent regions in other countries in example Monaco and Makau. Plotly by default are not including those regions in map.\n\n***TO DO:*** find a better GeoJSON ","c53f2627":"## 3. How covid progressed by total cases, new cases, total deaths, new deaths?","e5b75873":"# Answering Questions","fefe597e":"# Before I Start\n\nThis time I will be working with ***plotly*** instead of ***seaborn***\n\n## Assumptions\n\n- There should be two waves of Covid outburst one around april of 2020. The second one at the end of 2020\/ beginning of 2021.\n- Testing numbers should be increasing because of introduction of green pass and restrictions not having it.\n- Vaccination should be ramping up at the start of it and got lower around summer because of holiday season.\n- Countries with better gdp per capita and younger median age should be suffering less from covid\n\n## Questions I Want to Answer\n\n0. What is total number of Covid cases, tests made and vaccinated people?\n1. How dense population is in every country?\n2. What is Median age in every country and how does it look compared to others?\n3. How covid progressed by total cases, new cases, total deaths, new deaths?\n4. How testing rate changed during the pandemic?\n5. How test per case changed in Lithuania, Japan and USA.\n6. Vaccination progess, how it change?\n7. How strictly goverments responded with restrictions?\n8. Does countries that have more smoking people suffer more from covid?\n9. How gdp_per_capita and meadian age correlates with total cases?\n","e9daf98a":"## 7. How strictly goverments responded with restrictions?","21d2a832":"## Loading Data","b94d9937":"### Covid Progression by Total Cases","592e2b5e":"# Basic Insights on Data","e4ede401":"### Covid Progression by New Deaths","7dd6bc70":"### Total number of covid cases","50dde6fa":"### Sanity check","4e062f39":"### Total number of vaccinated people","6d6793d1":"## 6. Vaccination progess, how it change?","40e15a6f":"# Cleaning up dataset","06bc511e":"## 2. What is Median age in every country and how does it look compared to others?","ce9be092":"### Observations\n\nBy Spearman correlation we can see that medium to strong positive dependancy between median age and total cases per million and weaker positive dependency between gdp per capita and total cases per million. Once again correlation is not a perfect way to determen causality but lookit at 10 best (least cases) and worst(most cases) we can see tendencies that yourger median age results in smaller number of cases.  ","881947e1":"## 4. How testing rate changed during the pandemic?","0cb862c4":"### Total number of tests made","6f63af23":"## 5. How tests per case changed in Lithuania, Japan and USA.","1893b295":"## 8. Does countries that have more smoking people suffer more from covid?","f8c6b70c":"## 9. How gdp_per_capita and meadian age correlates with total cases?","6a936b1e":"## 1. How dense population is in every country?","506318e1":"# Final Toughts","d01949e7":"### Covid Progression by New Cases","5b9ce7b3":"To begin with I want to say thank you for [Alexa](https:\/\/www.kaggle.com\/saumya5679), who provided this wonderful [dataset](https:\/\/www.kaggle.com\/saumya5679\/covid19-timeline-analysis) and who allowed me to practise EDA and data visualisation with Plotly.\n\n1. As expected there is a rise of cases till summer of 2020 then cases starts to drop till it reaches plateu for few months and around Autunm (or Fall if you are American) total cases stats to increase again.\n2. New tests amount increases at the middle of covid and starts to drop in 2021 because people is finishing vaccinations and gaining immunity resulting in no tests needed.\n3. Vaccinations ramping up tremendously at the start and then plateus with regular spikes as people are getting there vaccines. The total vacines should drop later on because most people will have there vaccines and less population will remain unvaccinated.\n4. As expected younger median age countries has lower total cases per million people with correlation 0.6, gdp has lower correlation with around 0.45. Which implies that this assumption was correct.\n","8298fce1":"## 0. What is total number of Covid cases, tests made and vaccinated people?","6978320d":"### Covid Progression by Total Deaths"}}