{"cell_type":{"c4ea0454":"code","98fc27d0":"code","a7ddf5a2":"code","726b74ab":"code","303cd3cf":"code","8a2e046b":"code","d22a0917":"code","739b2144":"code","3acb33ea":"code","242970dd":"code","7b614805":"code","4e8fba5a":"code","a16f484d":"code","83d77ed1":"code","89d30e8d":"code","5e94a0bd":"code","00683725":"code","9f5365fd":"code","6f85baea":"markdown","1906f7f2":"markdown","1f9fc4fe":"markdown","ab6cbdc6":"markdown","769e72e4":"markdown","2af402b9":"markdown"},"source":{"c4ea0454":"%matplotlib notebook\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt","98fc27d0":"#load data\ndf = pd.read_csv(\"..\/input\/videogamesales\/vgsales.csv\")","a7ddf5a2":"df.describe(include = 'all')","726b74ab":"df.isna().sum()","303cd3cf":"#drop na rows\ndf.dropna(inplace=True)","8a2e046b":"#select 10 games published as threashold\n\npublisher_counts = df.Publisher.value_counts().reset_index()\n\npublisher_threashold = []\n\nfor x in range(1,20):\n    indx = publisher_counts.Publisher < x\n\n    publisher_threashold.append([x,sum(indx)])\n\npublisher_df = pd.DataFrame(publisher_threashold,columns=['n_games','n_publisher'])\n\n\nfig, axs = plt.subplots(1,2)\n\naxs[0].plot(publisher_df['n_publisher'],publisher_df['n_games'])\naxs[0].set_xlabel(\"n_publisher\")\naxs[0].set_ylabel(\"n_games\")\naxs[0].set_title(\"N\u00b0 games \/ Publisher\")\n\naxs[1].hist(df.Publisher.value_counts(),bins=20)\naxs[1].set_xlabel(\"n publisher\")\naxs[1].set_ylabel(\"n games\")\naxs[1].set_title(\"N\u00b0 games \/ Publisher\")\n\nplt.show()\n\n#we set the 10 games published as threas\n","d22a0917":"df_platform_sales = df.groupby('Platform').agg(['sum','count'])['Global_Sales'].sort_values(by=['sum']).reset_index()\n\nfig, axs = plt.subplots()\naxs.bar(df_platform_sales.Platform,df_platform_sales['sum'])\n\nplt.xticks(rotation=90)\n\nplt.show()","739b2144":"df_platform_sales = df.groupby('Platform').agg(['sum','count'])['Global_Sales'].sort_values(by=['sum']).reset_index()\n\n#column revenues_platform\ndf_platform_sales.loc[df_platform_sales[\"sum\"]<=150,\"revenues_platform\"] = \"low\"\ndf_platform_sales.loc[(df_platform_sales[\"sum\"]>150) & (df_platform_sales[\"sum\"]<500),\"revenues_platform\"] = \"medium\"\ndf_platform_sales.loc[df_platform_sales[\"sum\"]>500,\"revenues_platform\"] = \"high\"\n\n#column mean_game_revenue\ndf_platform_sales[\"mean_game_revenue\"] = df_platform_sales[\"sum\"] \/ df_platform_sales[\"count\"]\n\ndf = df.merge(df_platform_sales[[\"Platform\",\"revenues_platform\",\"mean_game_revenue\"]],how='inner',left_on=\"Platform\",right_on=\"Platform\")","3acb33ea":"# column published games\n\npublisher_df = df.groupby(\"Publisher\").count()[\"Rank\"].reset_index()\npublisher_df[\"published_games\"] = publisher_df[\"Rank\"]\n\ndf = df.merge(publisher_df[[\"Publisher\",\"published_games\"]],how=\"inner\",left_on=\"Publisher\",right_on=\"Publisher\")","242970dd":"#drop unnecesary columns\ndf.drop([\"Rank\",\"Name\",\"Platform\",\"Publisher\",\"NA_Sales\",'EU_Sales',\"JP_Sales\",\"Other_Sales\"],axis=1,inplace=True)","7b614805":"#one hot encoding\ngenre_one_hot = pd.get_dummies(df[\"Genre\"],prefix=\"Genre\")\nrevenues_platform_one_hot = pd.get_dummies(df[\"revenues_platform\"],prefix=\"revenues_platform\")\n\ndf = pd.concat([df,genre_one_hot,revenues_platform_one_hot],axis=1)\n\n#drop columns\ndf.drop([\"Genre\",\"revenues_platform\"],axis=1,inplace=True)","4e8fba5a":"#the final look of the dataset\ndf.head()","a16f484d":"from sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error, r2_score\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import cross_val_score\n\nresults = []\n\nX = df.drop(\"Global_Sales\",axis=1)\ny = df[\"Global_Sales\"]\n\nX = StandardScaler().fit_transform(X)\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=42)\n","83d77ed1":"#simple multiple linear regresion\nfrom sklearn.linear_model import LinearRegression\n\nregressor = LinearRegression()\n\nscores = cross_val_score(regressor,X,y,cv=15,scoring='neg_mean_squared_error')\n\nresults.append(['Linear Regression',scores.mean()])","89d30e8d":"#polinomial regresion\nfrom sklearn.preprocessing import PolynomialFeatures\n\nquadratic_featurizer = PolynomialFeatures(degree=2)\nX_quadratic = quadratic_featurizer.fit_transform(X)\n\nregressor_quadratic = LinearRegression()\n\nscores = cross_val_score(regressor_quadratic,X_quadratic,y,cv=15,scoring='neg_mean_squared_error')\n\nresults.append(['Polinomial Regression (^2)',scores.mean()])","5e94a0bd":"#stochastic gradient decent\nfrom sklearn.linear_model import SGDRegressor\n\n\nregressor = SGDRegressor(loss='squared_loss')\nscores = cross_val_score(regressor,X,y,cv=15,scoring='neg_mean_squared_error')\n\nresults.append(['SGD',scores.mean()])","00683725":"#neural network\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nfrom keras.wrappers.scikit_learn import KerasRegressor\n\ndef base_model():\n    model = Sequential()\n    model.add(Dense(18,input_dim=18,activation='relu'))\n    model.add(Dense(1))\n    model.compile(loss='mean_squared_error',optimizer='adam')\n    return model\n\nestimator = KerasRegressor(build_fn=base_model,epochs=50,batch_size=1,verbose=0)\n\nscores = cross_val_score(estimator,X,y,cv=3)\n\nresults.append(['Neural Network',scores.mean()])","9f5365fd":"print(pd.DataFrame(results,columns=['Estimator','Neg Mean Squared Error']).sort_values(by=['Neg Mean Squared Error'],ascending=False))","6f85baea":"# Feature transformation\n\nNew columns:\n* published games (low , high)\n* Mean revenues by game\n* Revenues by platform (low, medium, high)","1906f7f2":"#  **Data exploration**\n\nThe first data preprocesing task that we'll do is to find outliers, cause we don't have any previous knolowge of this particular data set, we make this revision using our six sense =D","1f9fc4fe":"Simple linear regresion","ab6cbdc6":"# Results","769e72e4":"# Video Game Money Recaudation\n\nThe objetive of this work is to make a predictive model that allow us to know the Global Recaudation of a particular video game.\n\nTo acomplish this, we follow the next steps:\n* Data Exploration\n* Variable Selection \/ Variable Transformation\n* Apply and Test Regresion(s) Model(s)\n* Evaluate Results\n","2af402b9":"# Regresion Models"}}