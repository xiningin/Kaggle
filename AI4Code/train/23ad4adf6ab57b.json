{"cell_type":{"3d95209b":"code","cacd8a05":"code","21569d4b":"code","5e5f0a0a":"code","0c80b4b5":"code","522c4c47":"code","5a6e26c0":"code","7856362e":"code","7a518001":"code","b753f0ef":"code","497d864b":"code","4dc6e8ca":"code","592e8f47":"code","cb52c552":"code","18faa23a":"code","a1f6b137":"code","82c16374":"code","d60c8ada":"code","628e8899":"code","1eab92e3":"code","0a0cf4fb":"code","996ec4a8":"code","64bebe6f":"code","0acff7d8":"code","5be54763":"code","9da790ee":"code","ccef3f24":"code","93bd19fd":"code","238b768e":"code","5565da89":"code","7a63dc40":"code","ee36664d":"code","c7d905b7":"code","f1c0325a":"code","4a18da47":"code","eea68330":"code","44f99523":"code","4fca12c5":"code","798b5eea":"code","a173f5a9":"code","905a3088":"markdown","565aab16":"markdown","cb196b69":"markdown","951de8be":"markdown","d6483970":"markdown","3c91452b":"markdown","873350cc":"markdown","b170ff5a":"markdown","81623c7b":"markdown","dc4340d1":"markdown","18382dbe":"markdown","824be0e2":"markdown","b6f24a63":"markdown","2724d4dd":"markdown","812b3600":"markdown","740fcc39":"markdown","5971bc98":"markdown","2a66514c":"markdown","4063e388":"markdown","7c1d6ae9":"markdown","3c4020ad":"markdown","127dea20":"markdown","21e072b8":"markdown","fc09485c":"markdown","4a90204b":"markdown","9555ecd5":"markdown"},"source":{"3d95209b":"'''Import basic modules.'''\nimport pandas as pd\nimport numpy as np\n\n\n'''Customize visualization\nSeaborn and matplotlib visualization.'''\nimport altair as alt\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style(\"whitegrid\")\n%matplotlib inline\nimport folium \nfrom IPython.core.display import HTML\nimport urllib.request\nfrom PIL import Image\nfrom wordcloud import WordCloud ,STOPWORDS\n\n\n'''Plotly visualization .'''\nimport plotly.express as px\nimport plotly.offline as py\nfrom plotly.offline import iplot, init_notebook_mode\nimport plotly.graph_objs as go\npy.init_notebook_mode(connected = True) # Required to use plotly offline in jupyter notebook\n\n'''Display markdown formatted output like bold, italic bold etc.'''\nfrom IPython.display import Markdown\ndef bold(string):\n    display(Markdown(string))\n\nimport warnings\nwarnings.filterwarnings('ignore')","cacd8a05":"complete = pd.read_csv('\/kaggle\/input\/corona-virus-report\/covid_19_clean_complete.csv', \n                         parse_dates=['Date'])\ncomplete.head()","21569d4b":"indonesia = complete[complete['Country\/Region'] == 'Indonesia']\ndisplay(indonesia.head(3))\ndisplay(indonesia.tail(3))\ndisplay(indonesia.shape)","5e5f0a0a":"# Defining COVID-19 cases as per classifications \ncases = ['Confirmed', 'Deaths', 'Recovered', 'Active']\n\n# Defining Active Case: Active Case = confirmed - deaths - recovered\ncomplete['Active'] = complete['Confirmed'] - complete['Deaths'] - complete['Recovered']\n\n# latest\nfull_latest = complete[complete['Date'] == max(complete['Date'])].reset_index()\n\n# latest condensed\nfull_latest_grouped = full_latest.groupby('Country\/Region')['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\n\ntemp = complete.groupby('Date')['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\ntemp.head()","0c80b4b5":"confirmed = full_latest_grouped.sum().Confirmed\ndeaths =  full_latest_grouped.sum().Deaths\nrecovered =  full_latest_grouped.sum().Recovered\nactive =  full_latest_grouped.sum().Active\nrow = [temp.iloc[-1,].Date,confirmed,deaths,recovered,active]\nlatest = pd.DataFrame([row], columns = full_latest_grouped.columns)\nlatest.style.background_gradient(cmap='Blues')","522c4c47":"temp_f = full_latest_grouped.sort_values(by='Confirmed', ascending=False)\ntemp_f = temp_f.reset_index(drop=True)\ntemp_f = temp_f.iloc[:50]\ntemp_f.head().style.background_gradient(cmap='Blues')","5a6e26c0":"print('The most cases are confirmed:',temp_f.Confirmed.max())\nprint('The fewest cases are confirmed:',temp_f.Confirmed.min())","7856362e":"ratio_r = list()\nratio_d = list()\nfor i in range(len(temp_f)):\n    ratio_r.append(temp_f.iloc[i,3]\/temp_f.iloc[i,1])\n    ratio_d.append(temp_f.iloc[i,2]\/temp_f.iloc[i,1])\ntemp_f['Ratio_Recovered'] = ratio_r\ntemp_f['Ratio_Deaths'] = ratio_d\n\ntemp_ff = temp_f.sort_values(by='Ratio_Deaths', ascending=False)\ntemp_bb = temp_f.sort_values(by='Ratio_Recovered', ascending=False)\ndisplay(temp_ff.iloc[:10,].style.background_gradient(cmap='Blues'))\ndisplay(temp_bb.iloc[:10,].style.background_gradient(cmap='Blues'))\n","7a518001":"fig = px.bar(temp_f.sort_values('Ratio_Deaths', ascending=False).head(15), \n             y=\"Ratio_Deaths\", x=\"Country\/Region\", color= \"Country\/Region\",\n             title='Top 15 Ratio_Deaths', \n             orientation='v',\n             color_discrete_sequence = px.colors.cyclical.IceFire,\n             width=700, height=600)\nfig.update_traces(opacity=0.8)\n\nfig.update_layout(template = 'plotly_white')\nfig.show()","b753f0ef":"fig = px.bar(temp_f.sort_values('Ratio_Recovered', ascending=False).head(15), \n             y=\"Ratio_Recovered\", x=\"Country\/Region\", color= \"Country\/Region\",\n             title='Top 15 Ratio_Recovered', \n             orientation='v',\n             color_discrete_sequence = px.colors.cyclical.IceFire,\n             width=700, height=600)\nfig.update_traces(opacity=0.8)\n\nfig.update_layout(template = 'plotly_white')\nfig.show()","497d864b":"temp_f['Best_Ratio'] = temp_f['Ratio_Recovered'] - temp_f['Ratio_Deaths']","4dc6e8ca":"fig,axes = plt.subplots(1,1, figsize=(12,8))\n\nsns.barplot(x='Best_Ratio', y='Country\/Region', data=temp_f.sort_values(by='Best_Ratio'), palette='winter_r',ax=axes)\nfor i,p in enumerate(axes.patches):\n    if i == 8:\n        height = p.get_height()\n        axes.annotate('Indonesia has {:.2f}% Best_Ratio '.format(p.get_width()),xy = (p.get_width(),p.get_xy()[1]),xytext = (p.get_x()+ p.get_width()+0.05, height+4),\n                      arrowprops = dict(facecolor='black',shrink=0.05))\n        \n        \nplt.title('Top 50 most cases Confirmed Best_Ratio', fontsize=20)\nplt.show()","592e8f47":"world_temp_2020 = pd.read_csv('\/kaggle\/input\/world-average-temperature\/Avg_World_Temp_2020.csv')\nContinent = world_temp_2020.Continent\n\nworld_temp_2020 = world_temp_2020.iloc[:,:-9].drop('Unnamed: 0', axis=1)\nworld_temp_2020.drop('City',axis=1,inplace=True)\n\nworld_temp_2020['Avg_temp'] = world_temp_2020.groupby('Country').transform(lambda x: x.mean()).mean(axis=1)\nworld_temp_2020['Continent'] = Continent\n\nCountry = full_latest_grouped[full_latest_grouped['Country\/Region'].isin(world_temp_2020['Country'])]\nCountry['Country'] = Country['Country\/Region']\n\nfull = pd.merge(Country, world_temp_2020, on='Country', how='left')\nfull.drop(columns = ['Country\/Region','Jan','Feb','Mar','Apr','May'],inplace=True)","cb52c552":"display(world_temp_2020.head())\ndisplay(full.head())","18faa23a":"africa_temp = full[full['Continent'] == 'Africa']\nasia_temp = full[full['Continent'] == 'Asia']\neurope_temp = full[full['Continent'] == 'Europe']\nna_temp = full[full['Continent'] == 'North America']\nocenia_temp = full[full['Continent'] == 'Oceania']\nsa_temp = full[full['Continent'] == 'South America']","a1f6b137":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(asia_temp['Avg_temp'], asia_temp['Confirmed'], marker='v')\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('Asia Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(asia_temp.index,asia_temp.Country):\n    ax.annotate(txt, (asia_temp['Avg_temp'][i], asia_temp['Confirmed'][i]),fontsize=13)","82c16374":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(africa_temp['Avg_temp'], africa_temp['Confirmed'], marker='v')\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('Africa Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(africa_temp.index,africa_temp.Country):\n    ax.annotate(txt, (africa_temp['Avg_temp'][i], africa_temp['Confirmed'][i]),fontsize=13)","d60c8ada":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(europe_temp['Avg_temp'], europe_temp['Confirmed'], marker='v')\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('Europe Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(europe_temp.index,europe_temp.Country):\n    ax.annotate(txt, (europe_temp['Avg_temp'][i], europe_temp['Confirmed'][i]),fontsize=13)","628e8899":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(na_temp['Avg_temp'], na_temp['Confirmed'], marker='v')\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('North America Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(na_temp.index,na_temp.Country):\n    ax.annotate(txt, (na_temp['Avg_temp'][i], na_temp['Confirmed'][i]),fontsize=13)","1eab92e3":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(ocenia_temp['Avg_temp'], ocenia_temp['Confirmed'], marker='v')\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('Oceania Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(ocenia_temp.index,ocenia_temp.Country):\n    ax.annotate(txt, (ocenia_temp['Avg_temp'][i], ocenia_temp['Confirmed'][i]),fontsize=13)","0a0cf4fb":"fig, ax = plt.subplots(figsize = (18,8))\nax.scatter(sa_temp['Avg_temp'], sa_temp['Confirmed'], marker='v' )\nplt.xlabel('Average Temperature')\nplt.ylabel('Confirmed Cases')\nplt.title('South America Temperature vs Confirmed Cases', fontsize=15)\nfor i, txt in zip(sa_temp.index,sa_temp.Country):\n    ax.annotate(txt, (sa_temp['Avg_temp'][i], sa_temp['Confirmed'][i]),fontsize=13)","996ec4a8":"import plotly.offline as py\nfrom plotly.offline import init_notebook_mode, iplot\n\ninit_notebook_mode(connected = True)\nimport plotly.graph_objs as go","64bebe6f":"trace2 = [go.Choropleth(\n            colorscale = 'Blues',\n            locationmode = 'country names',\n            locations = full['Country'],\n            text = full['Country'],\n            z = full['Avg_temp'],colorbar= dict(title='Temperature')\n)]\n\nlayout = go.Layout(title = 'Country vs Temperature')\n\nfig = go.Figure(data = trace2, layout = layout)\npy.iplot(fig)\n\n\ntrace = [go.Choropleth(\n            colorscale = 'Blues',\n            locationmode = 'country names',\n            locations = full['Country'],\n            text = full['Country'],\n            z = full['Confirmed'],colorbar = dict(title='Confirmed Cases')\n)]\n\nlayout = go.Layout(title = 'Country vs Confirmed')\n\nfig = go.Figure(data = trace, layout = layout)\npy.iplot(fig)","0acff7d8":"indonesia = complete[complete['Country\/Region'] == 'Indonesia']\nindonesia.head()","5be54763":"world_temp_2020[world_temp_2020['Country'] == 'Indonesia']","9da790ee":"# plot daily cases\ncolors = ['#FFA500']*85\ncolors[-5] = 'crimson'\nfig = px.bar(indonesia, \n             x=\"Date\", y=\"Confirmed\", \n             title='<b>New Confirm Cases Per Day In Indonesia<\/b>', \n             orientation='v', \n             width=700, height=600)\nfig.update_traces(marker_color=colors, opacity=0.8)\n\nfig.add_annotation( # add a text callout with arrow\n    text=\"Social Distancing\", x='2020-04-10', y=indonesia.Confirmed.max(), arrowhead=1, showarrow=True\n)\n\nfig.add_annotation( # add a text callout with arrow\n    text=\"Extended Social Distancing\", x='2020-04-29', y=indonesia.Confirmed.max()-1000, arrowhead=1, showarrow=True\n)\nfig.add_shape(\n        # Line Vertical\n        dict(\n            type=\"line\",\n            x0='2020-04-10',\n            y0=0,\n            x1='2020-04-10',\n            y1=indonesia.Confirmed.max(),\n            line=dict(\n                color=\"RoyalBlue\",\n                width=1,\n                dash=\"dashdot\"\n            )))\n\nfig.add_shape(\n        # Line Vertical\n        dict(\n            type=\"line\",\n            x0='2020-04-29',\n            y0=0,\n            x1='2020-04-29',\n            y1=indonesia.Confirmed.max()-1000,\n            line=dict(\n                color=\"RoyalBlue\",\n                width=1,\n                dash=\"dashdot\"\n            )))\n\nfig.update_layout(template = 'plotly_white',font=dict(family=\"Arial, Balto, Courier New, Droid Sans\",color='black'))\nfig.show()","ccef3f24":"indonesia_00 = indonesia[indonesia['Date'] == '2020-03-27']\nindonesia_0 = indonesia[indonesia['Date'] == '2020-04-10']\nindonesia_1 = indonesia[indonesia['Date'] == '2020-04-24']\nindonesia_2 = indonesia[indonesia['Date'] == '2020-05-7']\nindonesia_3 = indonesia[indonesia['Date'] == '2020-05-21']\n","93bd19fd":"Confirmed_0 = indonesia_0.Confirmed.iloc[0] - indonesia_00.Confirmed.iloc[0]\nConfirmed_1 = indonesia_1.Confirmed.iloc[0] - indonesia_0.Confirmed.iloc[0]\nConfirmed_2 = indonesia_2.Confirmed.iloc[0] - indonesia_1.Confirmed.iloc[0]\nConfirmed_3 = indonesia_3.Confirmed.iloc[0] - indonesia_2.Confirmed.iloc[0]\n\nconfirmed = [Confirmed_0,Confirmed_1, Confirmed_2, Confirmed_3]\ndate = ['27 Mar - 10 Apr','10 Apr - 24 Apr', '24 Apr - 7 Mei', '7 Mei - 21 Mei']\nsocial_distancing = ['Before','Before','After','After']\n\ndf = pd.DataFrame()\ndf['confirmed'] = confirmed\ndf['date'] = date\ndf['Social_Distancing'] = social_distancing","238b768e":"plt.figure(figsize=(10,7))\nax = sns.barplot(x = 'date', y= 'confirmed', hue='Social_Distancing', data=df);\n\nfor p in ax.patches:\n    \n            try:\n                height = p.get_height()\n                ax.text(p.get_x() + p.get_width() \/ 2.,\n                    height + 10,\n                    '{} Cases'.format(int(height)),\n                    ha=\"center\", fontsize=10)\n            except:\n                pass\nplt.xlabel('14 Days', fontsize= 15)\nplt.ylabel('Confirmed Cases during 14 Days', fontsize=15)\nplt.show()","5565da89":"gdp = pd.read_csv('\/kaggle\/input\/covid19-different-mitigate-scenarios\/GDP_Country.csv')\nsuppression = pd.read_csv('\/kaggle\/input\/covid19-different-mitigate-scenarios\/Suppression.csv')\nmitigate = pd.read_csv(\"\/kaggle\/input\/covid19-different-mitigate-scenarios\/Mitigation_Type.csv\")","7a63dc40":"mitigate[mitigate['Country'] == 'Indonesia']","ee36664d":"train = mitigate.drop('Social_distance',axis=1)\ny = mitigate.Social_distance\n\ntotal_infected = indonesia.iloc[-1,:].Confirmed\ntotal_deaths = indonesia.iloc[-1,:].Deaths\ntotal_critical = indonesia.iloc[-1,:].Active # In here I tried to change the total critical values into total Active\ntotal_hospital = 2831\ntotal_pop = 273277935\nstrategy = 'Social distancing whole population'\nR0 = 2.5\nrow = ['Indonesia',R0,strategy,total_pop,total_infected, total_deaths,total_hospital,total_critical]\ntest = pd.DataFrame([row], columns= train.columns)\ntest.head()","c7d905b7":"train.Strategy.unique()","f1c0325a":"merged = pd.concat([train,test])","4a18da47":"from sklearn.preprocessing import LabelEncoder\nencoder = LabelEncoder()\nmerged['Strategy'] = merged.Strategy.map({'Enhanced social distancing of elderly': 1,'Social distancing whole population':2, 'Unmitigated':0})","eea68330":"merged.head()","44f99523":"train = merged.iloc[:len(train),]\ntest = merged.iloc[len(train):,]","4fca12c5":"from sklearn.tree import DecisionTreeRegressor\nregressor = DecisionTreeRegressor(random_state=0)\n\nX = train.drop('Country',axis=1)\n\ntarget = list()\nfor i in y.str.split('%'):\n    target.append(int(i[0]))\n    \ny = pd.Series(target)","798b5eea":"from sklearn.model_selection import KFold\nkf = KFold(n_splits = 2, random_state = 1, shuffle = True)\nnp.random.seed(1)\nfrom sklearn.metrics import mean_squared_error\n\nmean = 0\nfor i,(train_index, test_index) in enumerate(kf.split(X)):\n    X_train, X_test = X.iloc[train_index], X.iloc[test_index]\n    y_train, y_test = y.iloc[train_index], y.iloc[test_index]\n    regressor.fit(X_train,y_train)\n    y_pred = regressor.predict(X_test)\n    mean += np.sqrt(mean_squared_error(y_train, y_pred))\n    \nprint(mean\/2)","a173f5a9":"test.drop('Country', axis=1,inplace=True)\nregressor.fit(X,target)\nregressor.predict(test)","905a3088":"You can see, first Social distancing has decreased slightly, but again increased exponentially.","565aab16":"### Indonesian Sample data","cb196b69":"## Europe","951de8be":"Total population in Indonesia is 273,277,935 based on https:\/\/www.worldometers.info\/world-population\/indonesia-population\/\n<t> Total hospital in Indonesia is 2,831 based on https:\/\/id.m.wikipedia.org\/wiki\/Daftar_rumah_sakit_di_Indonesia\n<t> Indonesia R0 number is 2.5 based on https:\/\/katadata.co.id\/berita\/2020\/05\/28\/rumus-r0-dan-rt-yang-jadi-acuan-jokowi-untuk-masuki-fase-new-normal","d6483970":"## Oceania","3c91452b":"## References\n- [COVID-19 - Temperature, Air Travel & Transmission ](https:\/\/www.kaggle.com\/sixteenpython\/covid-19-temperature-air-travel-transmission)\n- [COVID-19 India: Analysis, Visualization, And Comparison](https:\/\/www.kaggle.com\/vikassingh1996\/indiafightscorona-covid-19-comprehensive-study)","873350cc":"## South America","b170ff5a":"### Predict Effectiveness distancing method in Indonesia based on Imperial College Journal","81623c7b":"### Load Data","dc4340d1":"## Spatial Visualization","18382dbe":"## Asia","824be0e2":"## Temperature\nThis dataset I collected from [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/List_of_cities_by_average_temperature) using beautiful soup. If you want to see my notebook, you can check [here](https:\/\/www.kaggle.com\/efradgamer\/temperature-scrapping-from-wikipedia-2020).","b6f24a63":"Even the Social Distancing applied, the new confirmed cases still increase exponentially. We have to look deeper if want to know social distancing are effective or not","2724d4dd":"You can see among the five scatter plot, most of countries have the lowest confirmed cases as temperatures get higher.","812b3600":"### Latest Record","740fcc39":"## Africa","5971bc98":"## North America","2a66514c":"### Ratios Deaths and Recovered","4063e388":"There are 3 countries that have a negative ratio, namely United Kingdom (-0.13%), Netherlands (-0.12%), Canada (-0.07). This means that the number of deaths in these 3 countries is greater than the number who are recovered.\n\nAnd the most Best_Ratio are Switzerland (0.85%), Austria (0.87%), and South Korea (0.89%). This means that these 3 countries almost full recovered!","7c1d6ae9":"## Effectiveness Social Distancing\nI still didn't know this is true or not if I doing this properly. But still I want to try it.\n\n<t> Here I used mitigate.csv, a synthesis data based on China profile, to predict Social Distancing effectiveness in Indonesia.","3c4020ad":"### Top 50 Confirmed Cases (Max and Min)","127dea20":"### Load Packages","21e072b8":"### Define the dataset","fc09485c":"## Social Distancing for Indonesia","4a90204b":"### Best Ratio","9555ecd5":"### Top 5 Most Confirmed Cases"}}