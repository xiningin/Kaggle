{"cell_type":{"9c7bb173":"code","bbec5c17":"code","4ed7ada9":"code","ca9941d6":"code","ae867daf":"code","67d3b946":"code","8be1fbf1":"code","cbee163e":"code","3fd8ba64":"code","c58ec026":"code","b7310f14":"code","f778b94a":"code","2902005a":"code","33863a17":"code","b647e125":"code","dd1ddfb0":"code","84d6709a":"code","140f364b":"code","c144c70d":"code","20aa18a7":"code","210caddc":"code","b7f39a5e":"code","821fc508":"code","c98bb652":"code","6899284a":"code","cce1b186":"markdown","da0633fc":"markdown","fee7cd64":"markdown","4fe2c2b1":"markdown","9574716c":"markdown","23d0b79d":"markdown","53e46e01":"markdown","90e74dd3":"markdown","e7b13b8b":"markdown","e6bd8c96":"markdown","39adb43d":"markdown","bf9a0722":"markdown","199cb600":"markdown","418926be":"markdown","e2c74ac4":"markdown","267faff0":"markdown"},"source":{"9c7bb173":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt \n\n#plotly\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nimport plotly.graph_objs as py\n\n#for word cloud\nfrom subprocess import check_output\nfrom wordcloud import WordCloud, STOPWORDS\nstopwords = set(STOPWORDS)\n\nimport re\nimport os\nprint(os.listdir(\"..\/input\"))\nfrom IPython.display import HTML\nfrom IPython.display import display\n\nfrom PIL import Image\nfrom termcolor import colored\n\nfrom nltk.corpus import stopwords\nstop = set(stopwords.words('english'))\nstop.update(['.', ',', '\"', \"'\", '?', '!', ':', ';', '(', ')', '[', ']', '{', '}','']) # remove it if you need punctuation \n\nfrom nltk.stem import WordNetLemmatizer\n\nimport seaborn as sns\n\n#to supress Warnings \nimport warnings\nwarnings.filterwarnings(\"ignore\")","bbec5c17":"df = pd.read_csv(\"..\/input\/zomato-restaurants-data\/zomato.csv\",encoding='latin-1') #Main restaurants data\nri = pd.read_json(\"..\/input\/recipe-ingredients-dataset\/train.json\")          #Cuisines recipe ingredients\nfc = pd.read_csv(\"..\/input\/food-choices\/food_coded.csv\")                     #Food Choice data of college students\nsl = pd.read_csv(\"..\/input\/store-locations\/directory.csv\")                   #starbucks data\n#df.tail(10)","4ed7ada9":"TopRatings=df.groupby(['Aggregate rating'],as_index = False)['Restaurant ID'].count()\n\nTopRatings.columns = ['Rating','Counts']\nTop = TopRatings.sort_values(by='Counts',ascending=False).head(11).reset_index(drop=True)\nTop = Top.iloc[1:,:]\nplt.figure(figsize=(15,9))\nsns.barplot(Top['Rating'],Top['Counts'])\nplt.title(\"Top 10 Ratings with count\")\nplt.show()","ca9941d6":"cuisines_data = df.groupby(['Cuisines'],as_index = False)['Restaurant ID'].count()\n\n#now time to get most popular cusinies on board, we know North Indian gonna hit the list\ncuisines_data.columns = ['Popular Cusinies','Number of Restaurants']\ncuisines_data.reindex(axis=\"index\")\ncuisines_data.sort_values(by='Number of Restaurants',ascending=False).head(20).reset_index(drop=True)\n","ae867daf":"data1 = [dict(\n    type='scattergeo',\n    lon = df['Longitude'],\n    lat = df['Latitude'],\n    text = df['Restaurant Name'],\n    mode = 'markers',\n    marker = dict(\n    cmin = 0,\n    color = df['Aggregate rating'],\n    cmax = df['Aggregate rating'].max(),\n    colorbar=dict(\n                title=\"Ratings\"\n            )\n    )\n    \n)]\nlayout = dict(\n    title = 'Where are the Resturants',\n    hovermode='closest',\n    geo = dict(showframe=False, countrywidth=1, showcountries=True,\n               showcoastlines=True, showocean = True, projection=dict(type='Mercator'))\n)\nfig = py.Figure(data=data1, layout=layout)\niplot(fig)","67d3b946":"#Data Prep for below visual\na = []\nfor i in ri[\"ingredients\"]:\n    for j in i:\n        a.append(j)\ncommonIng = pd.DataFrame()\ncommonIng[\"common\"] = pd.Series(a)\n#commonIng","8be1fbf1":"#main functions to get the comfort food sorted from the day as per the reason\n\"\"\"\n1 \u2013 stress\n2 \u2013 boredom\n3 \u2013 depression\/sadness\n4 \u2013 hunger\n5 \u2013 laziness\n6 \u2013 cold weather\n7 \u2013 happiness \n8- watching tv\n\"\"\"\n\ndef searchComfy(mood):\n    lemmatizer = WordNetLemmatizer()\n    foodcount = {}\n    for i in range(124):\n        temp = [temps.strip().replace('.','').replace(',','').lower() for temps in str(fc[\"comfort_food_reasons\"][i]).split(' ') if temps.strip() not in stop ]\n        if mood in temp:\n            foodtemp = [lemmatizer.lemmatize(temps.strip().replace('.','').replace(',','').lower()) for temps in str(fc[\"comfort_food\"][i]).split(',') if temps.strip() not in stop ]\n            for a in foodtemp:\n                if a not in foodcount.keys():\n                    foodcount[a] = 1 \n                else:\n                    foodcount[a] += 1\n    sorted_food = []\n    #print(sorted([(value,key) for (key,value) in foodcount.items()])) : for test\n    sorted_food = sorted(foodcount, key=foodcount.get, reverse=True)\n    return sorted_food\n\n\ndef findmycomfortfood(mood):\n    topn = []\n    topn = searchComfy(mood) #function create dictionary only for particular mood\n    print(colored(\"3 Popular Comfort Foods in %s are:\"%(mood),'blue'))\n    print(colored(topn[0],'green'))\n    print(colored(topn[1],'green'))\n    print(colored(topn[2],'green'))","cbee163e":"findmycomfortfood('stress')","3fd8ba64":"#GPA Data Prep\ndfc = fc\ndfc = dfc.drop(dfc.index[15])\ndfc = dfc.drop(dfc.index[60])\ndfc = dfc.drop(dfc.index[100])\ndfc = dfc.drop(dfc.index[101])\ndfc.reset_index(inplace=True)\ndfc[\"GPA\"][71]= str(dfc[\"GPA\"][71]).replace(' bitch','')\ndfc[\"GPA\"] = pd.to_numeric(dfc[\"GPA\"])","c58ec026":"#main function to plot definition\n#coffee: 1-Creamy Frappuccino & 2-Espresso; breakfast: 1-cereal option & 2 \u2013 donut option; \n#soup: 1 \u2013 veggie soup and 2 \u2013 creamy soup; drink: 1 \u2013 orange juice and 2 \u2013 soda \nfrom itertools import cycle\ncycol = cycle('kbgc')\n\ndef barGPA(category,label1, label2):\n    barGPA = {} \n    barGPA[label1] = dfc[dfc[category]==1][\"GPA\"].mean() \n    barGPA[label2] = dfc[dfc[category]==2][\"GPA\"].mean()\n    D = barGPA\n    plt.bar(range(len(D)), list(D.values()), align='center',color=next(cycol))\n    plt.xticks(range(len(D)), list(D.keys()))\n    plt.ylim(ymin=2) \n    plt.yticks(np.arange(2, 3.6, 0.1))\n    plt.ylabel(\"GPA\")\n    plt.title(category.upper()+\" vs GPA\")\n    plt.grid()","b7310f14":"#What can effect your GPA, comparing Average GPA against the choices Students made when asked->\nfig = plt.figure(figsize=(12,9))\n\nplt.subplot(2, 2, 1)\nbarGPA('coffee','Frappuccino','Espresso')\n\nplt.subplot(2, 2, 2)\nbarGPA('drink','Orange Juice','Soda')\n\n\nplt.subplot(2, 2, 3)\nbarGPA('breakfast','Cereal','Donut')\n\nplt.subplot(2, 2, 4)\nbarGPA('soup','Veggie Soup','Creamy Soup')\n\nplt.show()","f778b94a":"#Data prep encoding price range!\ndfcopy = df\ndfcopy[\"Price range\"] = dfcopy[\"Price range\"].astype(str)\ndfcopy[\"Price range\"] = dfcopy[\"Price range\"].str.replace('1', '\u20b9').replace('2', '\u20b9\u20b9').replace('3', '\u20b9\u20b9\u20b9').replace('4', '\u20b9\u20b9\u20b9\u20b9')","2902005a":"plt.figure(figsize=(15,9))\nplt.title(\"Distribution of Price Ranges\")\n#plt.bar(x=[1,2,3,4],height=[2,4,8,16],hatch='x',edgecolor=['black']*6)\nsns.countplot(dfcopy[\"Price range\"],order=['\u20b9','\u20b9\u20b9','\u20b9\u20b9\u20b9','\u20b9\u20b9\u20b9\u20b9'],hatch='x')\nplt.xlabel(\"Price Range (low to high)\",color='green')\nplt.ylabel(\"No. of Restaurants\",color='green')\nplt.show()","33863a17":"#plotting\ng = sns.jointplot(x='Aggregate rating', y ='Votes' , data = df,kind='scatter',color='blue')\n_ = g.ax_marg_x.hist(df['Aggregate rating'], color=\"g\", alpha=.6)\n_ = g.ax_marg_y.hist(df['Votes'], color=\"y\",alpha=.6,\n              orientation=\"horizontal\")","b647e125":"#data prep\n\"\"\"\n1 -Single \n2 - In a relationship \n3 - Cohabiting \n4 - Married \n5 - Divorced \n6 - Widowed\n\"\"\"\ndfc = fc\ndfc = dfc.dropna(subset=['marital_status','eating_out'])\ndfc['marital_status']=dfc['marital_status'].astype(str)\ndfc['marital_status'] = dfc['marital_status'].str.replace('1.0','Single')\\\n    .replace('2.0','In a relationship').replace('4.0','Married')  #since only 3 kind of Marital status available in data\nAvgEatOut = dfc.groupby('marital_status')['eating_out'].mean()\n\n#plotting\nplt.figure(figsize=(15,9))\nplt.bar(x=AvgEatOut.index, height =AvgEatOut.values , color='white',edgecolor=['red']*3,hatch='*')\nplt.xlabel('Marital Status of Students (as per Data)',color='green')\nplt.ylabel('Freq. of Eating Out (Average)',color='green')\nplt.title(\"Eating Out Frequency as per Marital Status of Students\",color='grey')\nplt.show()","dd1ddfb0":"data1 = [dict(\n    type='scattergeo',\n    lon = sl['Longitude'],\n    lat = sl['Latitude'],\n    text = sl['Store Name'],\n    mode = 'markers',\n    marker = dict(\n    color = '#6f4e37',\n    )          \n    \n)]\nlayout = dict(\n    title = 'Where is that Starbucks?',titlefont=dict(color='green'), \n    hovermode='closest',\n    geo = dict(showframe=False, countrywidth=1, showcountries=True,showocean=True,showland=True,countrycolor='green', \n               showcoastlines=True, projection=dict(type='natural earth')),\n    \n)\nfig = py.Figure(data=data1, layout=layout)\niplot(fig)","84d6709a":"#Checking the Country Code: Indian Country Code is 1\nCountryInfo = pd.read_excel('..\/input\/zomato-restaurants-data\/Country-Code.xlsx')\n#CountryInfo.head()","140f364b":"#taking out Indian Data into new Data frame, which can be reused later\ndf_india = df[df['Country Code']==1]\n\nTopCities = df_india.groupby(['City'],as_index = False)['Restaurant ID'].count()\nTopCities.columns = ['Cities','Number of Restaurants']\nTop10 = TopCities.sort_values(by='Number of Restaurants',ascending=False).head(10)\n\n","c144c70d":"plt.figure(figsize=(20,10))\nplt.bar(Top10['Cities'],Top10['Number of Restaurants'], color ='green')\nplt.xlabel('Cities')\nplt.ylabel('Number of Restaurants')\nplt.title('Indian Cities with Maximum Restaurants', fontweight=\"bold\")\nplt.show()","20aa18a7":"#lets see which restaurant got the most shout-out \n#Grey color function\ndef grey_color_func(word, font_size, position, orientation, random_state=None,\n                    **kwargs):\n    return \"hsl(0, 0%%, %d%%)\" % np.random.randint(60, 100)\n\n#Main WordCloud Code\nwc = (WordCloud(width=1440, height=1080, relative_scaling=0.5, stopwords=stopwords).generate_from_frequencies(df_india['Restaurant Name'].value_counts()))\n\nfig = plt.figure(1,figsize=(15, 15))\nplt.imshow(wc.recolor(color_func=grey_color_func, random_state=3),\n           interpolation=\"bilinear\")\nplt.axis('off')\nplt.show()","210caddc":"df[\"Rating color\"].value_counts()\nColor_represents = df_india.groupby(['Rating color'],as_index = False)['Aggregate rating'].mean()\nColor_represents.columns = ['Rating Color','Average Rating']\nColor_represents =Color_represents.sort_values(by='Average Rating',ascending=False)\nColor_represents = Color_represents[0:5]\nColor_represents['Ratings']  = ['1.Excellent','2.Very Good','3.Good','4.Okay','5.Poor']\n#Color_represents","b7f39a5e":"#Plotting\nplt.figure(figsize=(10,5))\na = ['#006400','green','yellow','Orange','Red']\ne = ['blue']*5\n\nplt.barh(Color_represents['Ratings'],Color_represents['Average Rating'], align='center', color =a, edgecolor = e, linewidth = 3)\nplt.gca().invert_yaxis()\nplt.xlabel('Average Rating')\nplt.ylabel('Rating Types')\nplt.title('Rating Color and the Average Rating they represent', fontweight=\"bold\")\nplt.show()","821fc508":"pd.set_option('display.max_columns', None)   #to display data fully without truncating some columns\ndf.head(1)\n#df['Votes'].mean()\n#df['Average Cost for two'].mean()","c98bb652":"# Q. Okay I need some cheap Restaurants, say I have 500 rupees, but i need Restaurant with good Aggregate rating >=4.0 and Average votes (156), I would like to eat some North Indian food; I am in New Delhi, India\ntempDF = df_india[(df_india['Votes']>=156) & (df_india['Aggregate rating'] >= 4.0) & (df_india['Average Cost for two'] <= 500 ) & (df_india['City'] == 'New Delhi') & (df_india['Cuisines']==\"North Indian\")]\nrn = str(tempDF['Restaurant Name'].values[0])\nra = str(tempDF['Address'].values[0])\nprint(colored(\"Ans1. \",'green')+colored(rn,'blue')+\", Address: \"+ra)\n#Ans. There you go my pal, Lets hit Jai Vaishno Rasoi","6899284a":"#Okay Dude, I live in Pune, India. I want to have Chinese Cuisine and I prefer locality to be Viman Nagar, I can spend approax 1000 for two, I wanted Restaurant rated >= 4.0\ntempDF = df_india[((df_india['Locality']=='Koregaon Park') & (df_india['Aggregate rating'] >= 4.0) & (df_india['Average Cost for two'] <= 1000 ) & (df_india['City'] == 'Pune'))]\nrn = str(tempDF['Restaurant Name'].values[0])\nra = str(tempDF['Address'].values[0])\nprint(colored(\"Ans2. \",'green')+colored(rn,'blue')+\", Address: \"+ra)\n#Ans. Is that what you need, if not try-again!","cce1b186":"<br\/>\n**<A name=\"section2.3\"><font color='green'>3. How are the Rating types ('Excellent', 'Poor' etc) represented as per the Average Ratings (in India)?<\/font><\/A>**","da0633fc":"<br\/>\n**<A name=\"section2.1\"><font color='green'>1. What are the Top 10 Indian Cities with Maximum Restaurants?<\/font><\/A>**","fee7cd64":"<br\/>\n**<A name=\"section1.4\"><font color='green'>What are the Top20 Cuisines?<\/font> <\/A>**","4fe2c2b1":"<br\/>\n**<A name=\"section1.13\"><font color='green'>13. Where are the Starbucks Stores Located (around the globe)? <\/font><\/A>**","9574716c":"<br\/>\n**<A name=\"section1.2\"><font color='green'>What are the Top10 Popular Ratings as per the Counts?<\/font><\/A>**","23d0b79d":"**<font size=5 color=\"aa7700\">Welcome to Food and Restaurants<\/font>**<br\/><br\/><br\/>\n<span style=\"color:#D4AF37\">\n***<font size=3><u>Sections of Restaurants'<\/u><\/font>***\n<br\/>\n\n<A href=\"#section1\"><font color='blue' size=4>Global<\/font><\/A>\n<A href=\"#section1.1\"> What are the some Cities around the globe with Maximum Restaurants?<\/A><br\/>\n<A href=\"#section1.2\"> What are the Top10 Popular Ratings as per the Counts?<\/A><br\/>\n<A href=\"#section1.3\"> Word Cloud Visualization: for the Cuisines (as per its frequencies)<\/A><br\/>\n<A href=\"#section1.4\"> What are the Top20 Cuisines?<\/A><br\/>\n<A href=\"#section1.5\"> Where are the Restaurants hiding & what's their Ratings?<\/A><br\/>\n<A href=\"#section1.6\"> Most Common Ingredients used in Cuisines Worldwide!<\/A><br\/>\n<A href=\"#section1.7\"> Top Comfort Foods<\/A><br\/>\n<A href=\"#section1.8\"> Popular Comfort Food choices when you are Stressed out!<\/A><br\/>\n<A href=\"#section1.9\"> Is there a relation between Average GPA and Food Choices?<\/A><br\/>\n<A href=\"#section1.10\"> How Expensive are the Restaurants?<\/A><br\/>\n<A href=\"#section1.11\"> How does vote effect Aggregate Ratings?<\/A><br\/>\n<A href=\"#section1.12\">  Eating Out Frequency as per Marital Status<\/A><br\/>\n<A href=\"#section1.13\"> Where are the Starbucks Stores Located ?<\/A><br\/>\n\n<A href=\"#section2\"><font color='blue' size=4>Indian<\/font><\/A>\n<A href=\"#section2.1\">What are the Top10 Indian Cities with Maximum Restaurants?<\/A><br\/>\n<A href=\"#section2.2\"> Word Cloud: for the Restaurant Name (What are some popular Indian Restaurant Names)?<\/A><br\/>\n<A href=\"#section2.3\"> How are the Rating types ('Excellent', 'Poor' etc) represented as per the Average Ratings (in India)?<\/A><br\/>\n<A href=\"#section2.4\"> Playing with data - asking Questions (just for fun)<\/A><br\/><br\/><br\/>\n\n<span style=\"color:#D4AF37\">\n***<font size=4>Datasets used <font size=4 color='blue'> (multiple sources)<\/font>***","53e46e01":"<br\/>\n**<A name=\"section1.5\"> Map:-<font color='green'> Where are the Restaurants hiding & what's their Ratings?<\/font><\/A>**","90e74dd3":"<br\/>\n**<A name=\"section1.10\"><font color='green'>10. How Expensive are the Restaurants? <\/font><\/A>**","e7b13b8b":"<br\/>\n**<A name=\"section1.8\"><font color='green'>8. Popular Comfort Food choices when you are Stressed out!<\/font><\/A>**","e6bd8c96":"<br\/>\n**<A name=\"section1.9\"><font color='green'>9. Is there a relation between Average GPA and Food Choices? <\/font><\/A>**","39adb43d":"**<A name=\"section1\">GLOBAL<\/A>**\n\n\n![](https:\/\/www.fwdlife.in\/wp-content\/uploads\/2018\/05\/restaurants.jpg)","bf9a0722":"<br\/><br\/>\n**<A name=\"section2\">INDIAN<\/A>**\n\n\n![](http:\/\/pluspng.com\/img-png\/india-png-india-1501.png)","199cb600":"<br\/>\n**<A name=\"section2.2\"><font color='green'>2. Word Cloud: for the Restaurant Name (What are some popular Indian Restaurant Names)?<\/font><\/A> **","418926be":"<br\/>\n**<A name=\"section2.4\"><font size='3' color='green'>asking Questions<\/font><\/A> \n<br\/>\n<font color='green'>Q1.<\/font> Okay I need some cheap Restaurants, say I have 500 rupees, but i need Restaurant with good Aggregate rating >=4.0 and Average votes (156), I would like to eat some North Indian food; I am in New Delhi, India<br\/>\n<font color='green'>Q2.<\/font> I live in Pune, India. I want to have Chinese Cuisine and I prefer locality to be Viman Nagar, I can spend approax 1000 for two, I wanted Restaurant rated >= 4.0<br\/>\n","e2c74ac4":"<br\/>\n**<A name=\"section1.11\"><font color='green'>11. How does vote effect Aggregate Ratings?<\/font>(seaborn jointplot)<\/A>**","267faff0":"<br\/>\n**<A name=\"section1.12\"><font color='green'>12.  Eating Out Frequency as per Marital Status <\/font><\/A>**"}}