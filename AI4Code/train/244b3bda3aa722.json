{"cell_type":{"fabcb29a":"code","01cdc7a9":"code","9b9efaf1":"code","7810780c":"code","27d32fc6":"code","70324c85":"code","af473af0":"code","7e2fc9d7":"code","f38a7b78":"code","47e3170d":"code","030f9791":"code","e8107336":"code","16742986":"code","95307826":"code","0d874181":"code","12c22ffe":"code","39519233":"code","aed6b285":"code","b44f80fc":"markdown","10f97edb":"markdown","9270ee09":"markdown","3b18d022":"markdown","7b56faa4":"markdown","b42d1f34":"markdown","c8b554f0":"markdown","e351f6b0":"markdown","0957883e":"markdown","9c9b72bd":"markdown","886a3ccc":"markdown","cd882dd9":"markdown","cdd993c8":"markdown","e42dce25":"markdown","a772f706":"markdown","be4188f3":"markdown","4c8c6980":"markdown","4abbc746":"markdown"},"source":{"fabcb29a":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy import stats\n\nsns.set_context(\"paper\")\nsns.set_palette(sns.color_palette(\"mako\"))","01cdc7a9":"df = pd.read_csv('..\/input\/housesalesprediction\/kc_house_data.csv')\ndf.head()","9b9efaf1":"plt.rcParams['figure.figsize'] = [15, 17]\n\nfig, _ = plt.subplots(4,2)\n\nsns.countplot(x='bedrooms',\n              data=df,\n              ax=_[0][0],\n              palette='mako')\n\nsns.countplot(x='bathrooms',\n              data=df,\n              ax=_[0][1],\n              palette='mako')\n\n_[0][1].tick_params('x', labelrotation=90)\n\nsns.countplot(x='floors',\n              data=df,\n              ax=_[1][0],\n              palette='mako')\n\nsns.countplot(x='condition',\n              data=df,\n              ax=_[1][1],\n              palette='mako')\n\nsns.countplot(x='waterfront',\n              data=df,\n              ax=_[2][0],\n              palette='mako')\n\nsns.countplot(x='view',\n              data=df,\n              ax=_[2][1],\n              palette='mako')\n\nsns.countplot(x='grade',\n              data=df,\n              ax=_[3][0],\n              palette='mako')\n\n_[3][1].set_visible(False)\n\nplt.show()","7810780c":"print(f'There are {len(df.zipcode.unique())} zipcodes!')","27d32fc6":"mean_price_by_zip = df.groupby('zipcode').price.mean().sort_values(ascending=False).reset_index()\nmean_price_by_zip.columns = ['zipcode', 'mean_price']","70324c85":"most_expensive_zips = mean_price_by_zip[:5]['zipcode'].astype('str').unique()","af473af0":"plt.rcParams['figure.figsize'] = [15, 9]\n\n_ = sns.barplot(x='zipcode',\n                y='mean_price',\n                data=mean_price_by_zip,\n                order=mean_price_by_zip.zipcode,\n                palette='mako')\n\nplt.xticks(rotation=90)\n\nfor tick in _.get_xticklabels():\n    if tick.get_text() in most_expensive_zips: tick.set_color('red')\n\nplt.title('In which locations the average house price is higher?',\n          fontdict={'fontsize':13},\n          pad=20)\n\nplt.show()","7e2fc9d7":"df_most_expensive = df[df.zipcode.isin(most_expensive_zips.astype('int'))]","f38a7b78":"plt.rcParams['figure.figsize'] = [15, 10]\n\nsns.scatterplot(x='long',\n                y='lat',\n                data=df,\n                alpha=0.3)\n\nsns.scatterplot(x='long',\n                y='lat',\n                hue='zipcode',\n                hue_order=most_expensive_zips.astype(int),\n                data=df_most_expensive,\n                alpha=0.3,\n                palette=\"muted\")\n\nplt.title('In which locations the average house price is higher?',\n          fontdict={'fontsize':13},\n          pad=20)\n\nplt.show()","47e3170d":"most_cheap_zips = mean_price_by_zip[-5:]['zipcode'].astype('str').unique()","030f9791":"plt.rcParams['figure.figsize'] = [15, 9]\n\n_ = sns.barplot(x='zipcode',\n                y='mean_price',\n                data=mean_price_by_zip,\n                order=mean_price_by_zip.zipcode,\n                palette='mako')\n\nplt.xticks(rotation=90)\n\nfor tick in _.get_xticklabels():\n    if tick.get_text() in most_cheap_zips: tick.set_color('red')\n\nplt.title('In which locations the average house price is lower?',\n          fontdict={'fontsize':13},\n          pad=20)\n\nplt.show()","e8107336":"df_most_cheap = df[df.zipcode.isin(most_cheap_zips.astype(int))]","16742986":"plt.rcParams['figure.figsize'] = [15, 10]\n\nsns.scatterplot(x='long',\n                y='lat',\n                data=df,\n                alpha=0.3)\n\nsns.scatterplot(x='long',\n                y='lat',\n                hue='zipcode',\n                hue_order=most_cheap_zips.astype(int),\n                data=df_most_cheap,\n                alpha=0.3,\n                palette=\"muted\")\n\nplt.title('In which locations the average house price is cheaper?',\n          fontdict={'fontsize':13},\n          pad=20)\n\nplt.show()","95307826":"plt.rcParams['figure.figsize'] = [8, 8]\n\n_ = sns.heatmap(df.corr()[['price']]\n                .sort_values(by='price', ascending=False),\n                vmin=0,\n                vmax=1,\n                annot=True,\n                cmap='mako');\n\n_.set_title('What features most affect the price of the houses?',\n            fontdict={'fontsize':12},\n            pad=20);\n\nplt.show()","0d874181":"plt.rcParams['figure.figsize'] = [15, 15]\n\nfig, _ = plt.subplots(2,2)\n\nsns.scatterplot(x='sqft_living',\n                y='price',\n                data=df,\n                alpha=0.5,\n                ax=_[0][0])\n\nsns.boxplot(x='grade',\n            y='price',\n            data=df,\n            ax=_[0][1],\n            palette='mako')\n\nsns.scatterplot(x='sqft_above',\n                y='price',\n                data=df,\n                alpha=0.5,\n                ax=_[1][0])\n\nsns.lineplot(x='bathrooms',\n             y='price',\n             data=df,\n             ax=_[1][1],\n             palette='mako')\n\nplt.show()","12c22ffe":"fig, _ = plt.subplots(2,2)\n\nsns.regplot(x='sqft_living',\n            y='price',\n            data=df,\n            ax=_[0][0])\n\nsns.regplot(x='grade',\n            y='price',\n            data=df,\n            ax=_[0][1])\n\nsns.regplot(x='sqft_above',\n            y='price',\n            data=df,\n            ax=_[1][0])\n\nsns.regplot(x='bathrooms',\n            y='price',\n            data=df,\n            ax=_[1][1])\n\nplt.show()","39519233":"fig, _ = plt.subplots(2,2)\n\nsns.scatterplot(x='sqft_living',\n                y='price',\n                data=df_most_expensive,\n                alpha=0.5,\n                ax=_[0][0])\n\nsns.boxplot(x='grade',\n            y='price',\n            data=df_most_expensive,\n            ax=_[0][1],\n            palette='mako')\n\nsns.scatterplot(x='sqft_above',\n                y='price',\n                data=df_most_expensive,\n                alpha=0.5,\n                ax=_[1][0])\n\nsns.lineplot(x='bathrooms',\n             y='price',\n             data=df_most_expensive,\n             ax=_[1][1],\n             palette='mako')\n\nplt.show()","aed6b285":"fig, _ = plt.subplots(2,2)\n\nsns.scatterplot(x='sqft_living',\n                y='price',\n                hue='grade',\n                data=df_most_expensive,\n                ax=_[0][0])\n\nsns.scatterplot(x='grade',\n                y='price',\n                hue='bathrooms',\n                data=df_most_expensive,\n                ax=_[0][1],\n                palette='mako')\n\nsns.scatterplot(x='sqft_above',\n                y='price',\n                hue='grade',\n                data=df_most_expensive,\n                ax=_[1][0])\n\nsns.lineplot(x='bathrooms',\n             y='price',\n             hue='grade',\n             data=df_most_expensive,\n             ax=_[1][1],\n             palette='mako')\n\nplt.show()","b44f80fc":"Agora vamos plotar uma correla\u00e7\u00e3o utilizando como base o Pre\u00e7o. O motivo de fazer isso \u00e9 encontrar as caracter\u00edsticas que mais afetam o pre\u00e7o final de uma casa.","10f97edb":"<ul>\n    <li> Most houses have about 3 to 4 bedrooms. <\/li>\n    <li> Most houses have 1 or 2.5 bathrooms. <\/li>\n    <li> Most houses have 1 floor. <\/li>\n    <li> Condition 3 homes are prevalent. <\/li>\n    <li> Most houses don't have a waterfront. <\/li>\n    <li> Most houses have a 7-8 grade. <\/li>\n<\/ul>","9270ee09":"Features that most affect:\n<ul>\n    <li> sqft_living <\/li>\n    <li> grade <\/li>\n    <li> sqft_above <\/li>\n    <li> bathrooms <\/li>\n<\/ul>","3b18d022":"YES! They usually have greater values in the variables. Lets plot this relations more! ","7b56faa4":"#### Starting analysis!","b42d1f34":"#### In which locations the average house price is lower?","c8b554f0":"#### Loading Libraries...","e351f6b0":"The columns containing values referring to location are: <b> zipcode, lat (latitude) and long (longitude).<\/b> Let's use zipcode to find the answer.","0957883e":"<ul>\n    <li> Higher-rated homes have larger sqft_living, larger sqft_above, and more bathrooms. <\/li>\n    <li> The inverse is the same! Houses with more bathrooms usually have higher grades. <\/li>\n<\/ul>","9c9b72bd":"I believe that the best way to do this is through linear regressions with the variables that most affect the final price of the house. Let's make plots of each variable for the price!","886a3ccc":"#### Do houses located in the most expensive zipcodes generally have the features that make houses more expensive?","cd882dd9":"#### What characteristics do the most expensive houses usually have?","cdd993c8":"As the value of these variables increases, the final value of the house also increases. Thus, we can conclude that the final value of the house is defined by multiple variables together.\n\nMore expensive houses generally have:\n<ul>\n    <li> greater sqft_living <\/li>\n    <li> big grade <\/li>\n    <li> big sqft_above <\/li>\n    <li> more bathrooms <\/li>\n<\/ul>","e42dce25":"#### In which locations the average house price is higher?","a772f706":"# House Sales in King County, USA (Correlation Analysis)\n\nGood morning, Good afternoon or Good night! This notebook aims to discover possible correlations between variables and to investigate what else can affect the final price of any house in the database. Any tip, or suggestion I am open to receive. Thanks!","be4188f3":"First, let's view the database columns. Which columns could we use to find the answer?","4c8c6980":"#### Let's make some variable counts.","4abbc746":"#### What features most affect the price of the houses?"}}