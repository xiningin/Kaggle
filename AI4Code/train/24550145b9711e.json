{"cell_type":{"d47e12e0":"code","0b5ccf01":"code","18651b79":"code","fe93ea7b":"code","20a9d821":"code","986125b5":"code","62c78dca":"code","06907bdd":"markdown","bcc4a01b":"markdown","67f9248b":"markdown","14de789f":"markdown"},"source":{"d47e12e0":"import json\nimport pandas as pd\nfrom pandas.io.json import json_normalize\nfrom pprint import pprint","0b5ccf01":"# verify files are present\n# !ls ..\/input\n\n# path to dev dataset file\ndatapath = \"..\/input\/dev-v2.0.json\"\n\n# path to train dataset file\n# datapath = \"..\/input\/train-v2.0.json\"\n\n# load data (json)\nwith open(datapath) as file:\n    json_dict = json.load(file)\npprint(json_dict)","18651b79":"# Inspect Nested Keys\nprint('top-level-keys: {}'.format(list(json_dict.keys())))\nprint('data keys: {}'.format(list(json_dict['data'][0].keys())))\nprint('paragraphs keys: {}'.format(list(json_dict['data'][0]['paragraphs'][0].keys())))\nprint('qas keys: {}'.format(list(json_dict['data'][0]['paragraphs'][0]['qas'][0].keys())))\nprint('answers keys: {}'.format(list(json_dict['data'][0]['paragraphs'][0]['qas'][0]['answers'][0].keys())))","fe93ea7b":"# Count Corpora\nprint('Nbr Corpora: {}'.format(len(json_dict['data'])))","20a9d821":"# Print Corpora Titles\nprint(list(json_normalize(json_dict,'data')['title']))","986125b5":"def convert_squad_to_tidy_df(json_dict, corpus):\n    \"\"\"This function converts the SQuAD JSON data to a Tidy Data Pandas Dataframe.\n    \n    :param obj json_dict: squad json data\n    :param str corpus: name of squad corpora to select subset from json object\n    \n    :returns: converted json data\n    :rtype: pandas dataframe\n    \n    \"\"\"\n    data = [c for c in json_dict['data'] if c['title']==corpus][0]\n    df = pd.DataFrame()\n    data_paragraphs = data['paragraphs']\n    for article_dict in data_paragraphs:\n        row = []\n        for answers_dict in article_dict['qas']:\n            for answer in answers_dict['answers']:\n                row.append((article_dict['context'], \n                            answers_dict['question'], \n                            answers_dict['id'],\n                            answer['answer_start'],\n                            answer['text']\n                           ))\n        df = pd.concat([df, pd.DataFrame.from_records(row, columns=['context', 'question', 'id', 'answer_start', 'text'])], axis=0, ignore_index=True)\n        df.drop_duplicates(inplace=True)\n    return df","62c78dca":"corpus = 'Normans' # only in dev dataset\n# corpus = 'Culture' # only in train dataset\n\ndf = convert_squad_to_tidy_df(json_dict, corpus)\ndf.head()","06907bdd":"# Converting from JSON to Tidy Data Pandas Dataframe\n\nIn this notebook I share a script to convert the [Stanford Question Answering Dataset (SQuAD)](https:\/\/rajpurkar.github.io\/SQuAD-explorer\/) dataset from JSON format to a [Tidy Data](https:\/\/vita.had.co.nz\/papers\/tidy-data.pdf) Pandas Dataframe.\n\n**About the SQuAD dataset**\n\nThe dataset is used in natural language processing (NLP) research in the field of machine learning and reading comprehension. The datset consists of questions posed by crowdworkers on a set of Wikipedia articles, where the answer to every question is a segment of text, or span, from the corresponding reading passage, or the question might be unanswerable. \n","bcc4a01b":"### Explore JSON file","67f9248b":"### Convert to Tidy DF","14de789f":"### Load data"}}