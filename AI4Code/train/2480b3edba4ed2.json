{"cell_type":{"643379aa":"code","cc8acf64":"code","3b5621ed":"code","0e00802e":"code","552d5ddc":"code","9f9e4ec5":"code","a7a8025d":"code","2ea432d5":"code","6537c667":"code","249b95bc":"code","21339306":"code","cd9366ad":"code","0438016c":"code","8ab13dbb":"code","b5b0f0ed":"code","37d1c838":"code","1342ebb7":"code","0c4d440b":"code","92ed64ae":"code","9d5412ca":"code","dfaae762":"code","cd30b35e":"code","db343461":"code","95c0c288":"code","ef1ed2f3":"code","b833c7ef":"code","5c4c5828":"code","6f95c74a":"code","ee0c06de":"code","94fc41ed":"code","57ff10fa":"code","d4b5fe06":"code","60650551":"code","32e85cf4":"code","443f49d6":"code","5979cefb":"code","175777f1":"code","fc74d0a1":"code","d0b02273":"code","58fde38c":"code","c8522a96":"code","800d5349":"code","3eb4f212":"code","4229e393":"code","bc7929a4":"code","6ebc146c":"code","d0388956":"code","40b03ad6":"code","6212760c":"code","c1237fbc":"code","4c439820":"code","44bcdb38":"code","22d226b6":"markdown","e8c664f4":"markdown","0314e4b0":"markdown","fd2c9ed7":"markdown","88904bdd":"markdown","a4048541":"markdown","5c238ebd":"markdown","9e396f7e":"markdown","2e60ad95":"markdown","1d32d783":"markdown","74d80507":"markdown","c6693a5a":"markdown","2152aea9":"markdown","9c474c75":"markdown","766ff282":"markdown"},"source":{"643379aa":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np","cc8acf64":"df = pd.read_csv(\"..\/input\/crop-production-in-india\/crop_production.csv\")\ndf[:5]","3b5621ed":"df.isnull().sum()","0e00802e":"# Droping Nan Values\ndata = df.dropna()\nprint(data.shape)\ntest = df[~df[\"Production\"].notna()].drop(\"Production\",axis=1)\nprint(test.shape)","552d5ddc":"for i in data.columns:\n    print(\"column name :\",i)\n    print(\"No. of column :\",len(data[i].unique()))\n    print(data[i].unique())","9f9e4ec5":"sum_maxp = data[\"Production\"].sum()\ndata[\"percent_of_production\"] = data[\"Production\"].map(lambda x:(x\/sum_maxp)*100)","a7a8025d":"data[:5]","2ea432d5":"sns.lineplot(data[\"Crop_Year\"],data[\"Production\"])","6537c667":"plt.figure(figsize=(25,10))\nsns.barplot(data[\"State_Name\"],data[\"Production\"])\nplt.xticks(rotation=90)","249b95bc":"sns.jointplot(data[\"Area\"],data[\"Production\"],kind='reg')","21339306":"sns.barplot(data[\"Season\"],data[\"Production\"])","cd9366ad":"data.groupby(\"Season\",axis=0).agg({\"Production\":np.sum})","0438016c":"data[\"Crop\"].value_counts()[:5]","8ab13dbb":"top_crop_pro = data.groupby(\"Crop\")[\"Production\"].sum().reset_index().sort_values(by='Production',ascending=False)\ntop_crop_pro[:5]","b5b0f0ed":"rice_df = data[data[\"Crop\"]==\"Rice\"]\nprint(rice_df.shape)\nrice_df[:3]","37d1c838":"sns.barplot(\"Season\",\"Production\",data=rice_df)","1342ebb7":"plt.figure(figsize=(13,10))\nsns.barplot(\"State_Name\",\"Production\",data=rice_df)\nplt.xticks(rotation=90)\nplt.show()","0c4d440b":"top_rice_pro_dis = rice_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_rice_pro_dis[:5]\nsum_max = top_rice_pro_dis[\"Production\"].sum()\ntop_rice_pro_dis[\"precent_of_pro\"] = top_rice_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_rice_pro_dis[:5]","92ed64ae":"plt.figure(figsize=(18,12))\nsns.barplot(\"District_Name\",\"Production\",data=top_rice_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","9d5412ca":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=rice_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","dfaae762":"sns.jointplot(\"Area\",\"Production\",data=rice_df,kind=\"reg\")","cd30b35e":"coc_df = data[data[\"Crop\"]==\"Coconut \"]\nprint(coc_df.shape)\ncoc_df[:3]","db343461":"sns.barplot(\"Season\",\"Production\",data=coc_df)","95c0c288":"plt.figure(figsize=(13,10))\nsns.barplot(\"State_Name\",\"Production\",data=coc_df)\nplt.xticks(rotation=90)\nplt.show()","ef1ed2f3":"top_coc_pro_dis = coc_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_coc_pro_dis[:5]\nsum_max = top_coc_pro_dis[\"Production\"].sum()\ntop_coc_pro_dis[\"precent_of_pro\"] = top_coc_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_coc_pro_dis[:5]","b833c7ef":"plt.figure(figsize=(18,12))\nsns.barplot(\"District_Name\",\"Production\",data=top_coc_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","5c4c5828":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=coc_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","6f95c74a":"sns.jointplot(\"Area\",\"Production\",data=coc_df,kind=\"reg\")","ee0c06de":"sug_df = data[data[\"Crop\"]==\"Sugarcane\"]\nprint(sug_df.shape)\nsug_df[:3]","94fc41ed":"sns.barplot(\"Season\",\"Production\",data=sug_df)","57ff10fa":"plt.figure(figsize=(13,8))\nsns.barplot(\"State_Name\",\"Production\",data=sug_df)\nplt.xticks(rotation=90)\nplt.show()","d4b5fe06":"top_sug_pro_dis = sug_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_sug_pro_dis[:5]\nsum_max = top_sug_pro_dis[\"Production\"].sum()\ntop_sug_pro_dis[\"precent_of_pro\"] = top_sug_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_sug_pro_dis[:5]","60650551":"plt.figure(figsize=(18,8))\nsns.barplot(\"District_Name\",\"Production\",data=top_sug_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","32e85cf4":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=sug_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","443f49d6":"sns.jointplot(\"Area\",\"Production\",data=sug_df,kind=\"reg\")","5979cefb":"data1 = data.drop([\"District_Name\",\"Crop_Year\"],axis=1)","175777f1":"data_dum = pd.get_dummies(data1)\ndata_dum[:5]","fc74d0a1":"x = data_dum.drop(\"Production\",axis=1)\ny = data_dum[[\"Production\"]]\nfrom sklearn.model_selection import train_test_split\nx_train,x_test,y_train,y_test = train_test_split(x,y,test_size=0.33, random_state=42)\nprint(\"x_train :\",x_train.shape)\nprint(\"x_test :\",x_test.shape)\nprint(\"y_train :\",y_train.shape)\nprint(\"y_test :\",y_test.shape)\n","d0b02273":"x_train[:5]","58fde38c":"from sklearn.ensemble import RandomForestRegressor\nmodel = RandomForestRegressor()\nmodel.fit(x_train,y_train)\npreds = model.predict(x_test)","c8522a96":"from sklearn.metrics import r2_score\nr = r2_score(y_test,preds)\nprint(\"R2score when we predict using Randomn forest is \",r)","800d5349":"from sklearn.linear_model import LinearRegression\nmodel = LinearRegression()\nmodel.fit(x_train,y_train)","3eb4f212":"preds = model.predict(x_test)","4229e393":"from sklearn.metrics import mean_squared_error, r2_score\nmean_squared_error(y_test,preds)\nr2_score(y_test,preds)","bc7929a4":"tst = test.drop([\"District_Name\",\"Crop_Year\"],axis=1)\ntst_dum = pd.get_dummies(tst)\ntst_dum[:5]","6ebc146c":"y_test = tst_dum.copy()\nprint(x_train.shape)\nprint(y_test.shape)","d0388956":"def common_member(x_train,x_test): \n    a_set =  set(x_train.columns.tolist())\n    b_set =  set(x_test.columns.tolist())\n    if (a_set & b_set): \n        return list(a_set & b_set) ","40b03ad6":"com_fea = common_member(x_train,tst_dum)\nlen(com_fea)","6212760c":"from sklearn.ensemble import RandomForestRegressor\nmodel = RandomForestRegressor()\nmodel.fit(x_train[com_fea],y_train)\npreds = model.predict(y_test[com_fea])","c1237fbc":"preds","4c439820":"test[\"production\"] = preds","44bcdb38":"test[:10]","22d226b6":"## Each type of crops required various area & various season. so, I'm going to pic top crop from this data","e8c664f4":"# Model -1: Random Forest","0314e4b0":"# 3. Sugarcane","fd2c9ed7":"# Insighits:\n* Sugarecane production is directly proportional to area\n* And the production is high in some state only.","88904bdd":"# Data Exploration","a4048541":"### 1.Rice","5c238ebd":"# Model -2 : Linear Regression","9e396f7e":"# Test Train Split","2e60ad95":"# Feature Selection","1d32d783":"# 2. Coconut","74d80507":"# Insight from Cocunut Production","c6693a5a":"* cocunut production is directly proportional to area\n* its production is also gradually increasing over a time of period\n* production is highin kerala state\n* it does not depends on season","2152aea9":"# Data Visulization","9c474c75":"# Insights:\nFrom Data Visualization:\nRice production is mostly depends on Season, Area, State(place).","766ff282":"# Prediction\nModel 1: Randomn forest has high r2score when compare to other model"}}