{"cell_type":{"4f7276bd":"code","ae74d40e":"code","a46ab3b3":"code","173fea6e":"code","13dd3058":"code","4d9b0cff":"code","8dd3c4dd":"code","bab5a4c0":"code","1bd2ff32":"code","74b5c6f6":"code","dbc5a475":"code","c102b044":"code","32234f99":"code","a5e29a19":"code","f083107d":"code","832fa4d1":"code","ac160ac7":"code","0b969126":"code","68fa6cbd":"code","a073fef6":"code","32eeef1a":"code","e3b5269e":"code","6c1524ec":"code","26ec2c71":"code","d7d3db74":"code","d1a2715d":"code","42de8a12":"code","4884ef8a":"code","f4273f9d":"code","cef9f335":"code","e1390018":"code","e5b08ac7":"code","274c2f17":"code","41b926ff":"code","ce458e89":"code","b0e761c2":"code","efba9e54":"markdown","81974a96":"markdown","4278c73d":"markdown","f8b05e77":"markdown","0d0344d4":"markdown","d60b77b4":"markdown","ce42aeac":"markdown","3567bc64":"markdown","379b91e3":"markdown","dd810d7b":"markdown","21d2b9b8":"markdown","2728959a":"markdown","b0d0f69a":"markdown","f84bb55e":"markdown","ec3ed5e9":"markdown","4358103d":"markdown","730b7a8f":"markdown","a353910e":"markdown","25de3aba":"markdown","f2556371":"markdown","2ba0673b":"markdown","b9f1024d":"markdown","32acaeda":"markdown","737d9174":"markdown","33527cbd":"markdown","1050cfd3":"markdown","ec14d287":"markdown"},"source":{"4f7276bd":"import pandas as pd \nimport numpy as np\nimport matplotlib as plt\n%matplotlib inline \nimport math","ae74d40e":"# load data\ndf=pd.read_csv(\"..\/input\/noshowappointments\/KaggleV2-May-2016.csv\")\ndf.head()","a46ab3b3":"df.info()","173fea6e":"df.describe()","13dd3058":"#rename columns name \ndf.rename(columns={\"No-show\":\"no_show\"},inplace=True)\ndf.columns=df.columns.str.lower()\n\n#select only ages more than 0\ndf=df[df[\"age\"]>0.0]","4d9b0cff":"def to_date(data):\n    # take a date as a string and returns apython datetime object\n    data=pd.to_datetime(data).dt.strftime('%Y-%m-%d')\n    return pd.to_datetime(data)","8dd3c4dd":"#change scheduledday, appointmentday columns value to datetime rather than string \ndf['scheduledday']=to_date(df['scheduledday'])\ndf['appointmentday']=to_date(df['appointmentday'])","bab5a4c0":"#check if any rows dublicated\ndf.duplicated().sum()","1bd2ff32":"df.info()","74b5c6f6":"### what percentage of patients did not show up for their appointment ","dbc5a475":"df.groupby(\"no_show\")[\"no_show\"].count().plot(figsize=(5,5),kind=\"pie\",autopct='%.2f');","c102b044":"### Is the gender affect on patients showing up?","32234f99":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"gender\"]==\"M\"].groupby(\"no_show\")[\"gender\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"Male\");\ndf[df[\"gender\"]==\"F\"].groupby(\"no_show\")[\"gender\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"Female\");","a5e29a19":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"scholarship\"]==1].groupby(\"no_show\")[\"scholarship\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"have scholarship\");\ndf[df[\"scholarship\"]==0].groupby(\"no_show\")[\"scholarship\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"have not scholarship\");","f083107d":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"diabetes\"]==1].groupby(\"no_show\")[\"diabetes\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"have diabetes\");\ndf[df[\"diabetes\"]==0].groupby(\"no_show\")[\"diabetes\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"have not diabetes\");","832fa4d1":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"alcoholism\"]==1].groupby(\"no_show\")[\"alcoholism\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"drink alcohol\");\ndf[df[\"alcoholism\"]==0].groupby(\"no_show\")[\"alcoholism\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"not drinking alcohol\");","ac160ac7":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"hipertension\"]==1].groupby(\"no_show\")[\"hipertension\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"have hipertension\");\ndf[df[\"hipertension\"]==0].groupby(\"no_show\")[\"hipertension\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"hav not hipertension\");","0b969126":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"sms_received\"]==1].groupby(\"no_show\")[\"sms_received\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"received sms\");\ndf[df[\"sms_received\"]==0].groupby(\"no_show\")[\"sms_received\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"did not receive sms\");","68fa6cbd":"df[\"age\"].describe()","a073fef6":"fig, axs = plt.pyplot.subplots(1,4)\ndf[df[\"age\"]<20].groupby(\"no_show\")[\"age\"].count().plot(figsize=(16,16),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"age betweem: 0,19\");\ndf[(df[\"age\"]>19) & (df[\"age\"]<39)].groupby(\"no_show\")[\"age\"].count().plot(figsize=(16,16),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"age betweem: 20,38\");\ndf[(df[\"age\"]>38) & (df[\"age\"]<57)].groupby(\"no_show\")[\"age\"].count().plot(figsize=(16,16),kind=\"pie\",autopct='%.2f',ax=axs[2],title=\"age betweem: 39,56\");\ndf[df[\"age\"]>56].groupby(\"no_show\")[\"age\"].count().plot(figsize=(16,16),kind=\"pie\",autopct='%.2f',ax=axs[3],title=\"age betweem: 57,115\");","32eeef1a":"fig, axs = plt.pyplot.subplots(1,2)\ndf[df[\"age\"]<39].groupby(\"no_show\")[\"age\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"age betweem: 0,38\");\ndf[df[\"age\"]>38].groupby(\"no_show\")[\"age\"].count().plot(figsize=(10,10),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"age betweem: 39,115\");","e3b5269e":"fig, axs = plt.pyplot.subplots(1,4)\ndf[(df[\"age\"]<51) & ((df[\"diabetes\"]==1) | (df[\"hipertension\"]==1) | (df[\"alcoholism\"]==1) )].groupby(\"no_show\")[\"age\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"age betweem: 0,50 \\n and have at least 1 disease\");\ndf[(df[\"age\"]>50) & ((df[\"diabetes\"]==1) | (df[\"hipertension\"]==1) | (df[\"alcoholism\"]==1) )].groupby(\"no_show\")[\"age\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"age betweem: 51,115 \\n and have at least 1 disease\");\n\ndf[(df[\"age\"]<51) & ((df[\"diabetes\"]==0) | (df[\"hipertension\"]==0) | (df[\"alcoholism\"]==0) )].groupby(\"no_show\")[\"age\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[2],title=\"age betweem: 0,50 \\n and have not any disease\");\ndf[(df[\"age\"]>50) & ((df[\"diabetes\"]==0) | (df[\"hipertension\"]==0) | (df[\"alcoholism\"]==0) )].groupby(\"no_show\")[\"age\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[3],title=\"age betweem: 51,115 \\nand have not any disease\");","6c1524ec":"df[\"waiting_days\"]=(df['appointmentday'] - df['scheduledday']).dt.days\ndf.waiting_days.describe()\n","26ec2c71":"df[df.waiting_days < 0]","d7d3db74":"# Dropping the rows of negative value, cause that does not make sense\ndf=df[df.waiting_days >= 0]","d1a2715d":"fig, axs = plt.pyplot.subplots(1,4)\ndf[df[\"waiting_days\"]<=1].groupby(\"no_show\")[\"waiting_days\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"waiting_days less than 1 day\");\ndf[(df[\"waiting_days\"]>1) & (df[\"waiting_days\"]<4)].groupby(\"no_show\")[\"waiting_days\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"waiting_days betweem: 1,3 days\");\n\ndf[((df[\"waiting_days\"]<=4)&(df[\"waiting_days\"]<11))].groupby(\"no_show\")[\"waiting_days\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[2],title=\"waiting_days betweem: 4,10 days\");\ndf[df[\"waiting_days\"]>=11].groupby(\"no_show\")[\"waiting_days\"].count().plot(figsize=(18,18),kind=\"pie\",autopct='%.2f',ax=axs[3],title=\"waiting_days more than 10 days\");","42de8a12":"## Is the month of scheduled day, effect on patients showing up?","4884ef8a":"df.scheduledday.dt.month.unique()","f4273f9d":"fig, axs = plt.pyplot.subplots(1,8)\ndf[df.scheduledday.dt.month == 1].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"month 1\");\ndf[df.scheduledday.dt.month == 2].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"month 2\");\ndf[df.scheduledday.dt.month == 3].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[2],title=\"month 3\");\ndf[df.scheduledday.dt.month == 4].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[3],title=\"month 4\");\ndf[df.scheduledday.dt.month == 5].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[4],title=\"month 5\");\ndf[df.scheduledday.dt.month == 6].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[5],title=\"month 6\");\ndf[df.scheduledday.dt.month == 11].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[6],title=\"month 11\");\ndf[df.scheduledday.dt.month == 12].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[7],title=\"month 12\");","cef9f335":"df.scheduledday.dt.strftime(\"%a\").unique()","e1390018":"fig, axs = plt.pyplot.subplots(1,6)\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Sat\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[0],title=\"Saturday \");\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Mon\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[1],title=\"Monday\");\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Tue\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[2],title=\"Tuesday\");\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Wed\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[3],title=\"Wednesday\");\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Thu\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[4],title=\"Thursday\");\ndf[df.scheduledday.dt.strftime(\"%a\") == \"Fri\"].groupby(\"no_show\")[\"scheduledday\"].count().plot(figsize=(20,20),kind=\"pie\",autopct='%.2f',ax=axs[5],title=\"Friday\");","e5b08ac7":"temp=df.groupby([\"neighbourhood\",\"no_show\"])[\"no_show\"].count()\ntemp","274c2f17":"neighbourhood_index=[]\nneighbourhood_value=[]\nfor i in range(0,len(temp),2):\n    neighbourhood_index.append(temp.index[i][0])\n    neighbourhood_value.append(temp[i+1] \/ (temp[i]+temp[i+1]))","41b926ff":"\nneighbourhood_percent_df=pd.DataFrame(list(np.around(np.array(neighbourhood_value),3)),columns=[\"no_show_percentage\"])\nneighbourhood_percent_df.index=neighbourhood_index\nneighbourhood_percent_df.sort_values(\"no_show_percentage\",ascending=False).plot(kind=\"bar\",figsize=(18,6),title=\"neighbourhood\")\nplt.pyplot.ylabel(\"percentage\")\nplt.pyplot.xlabel(\"neighbourhoods\");","ce458e89":"neighbourhood_percent_df[neighbourhood_percent_df[\"no_show_percentage\"]<.10]","b0e761c2":"neighbourhood_percent_df[neighbourhood_percent_df[\"no_show_percentage\"]>.5]","efba9e54":">Patients whose scheduled day are in Saturday have a higher rate of showing up at their appointments compared to other patients whose scheduled day are in different days.","81974a96":">neighbourhoods of high percentage of showing up","4278c73d":"> the gender did not affect on showing up. the percentage look like the same in both gender","f8b05e77":"## Are the days of the week of the scheduled day, effect patients showing up?","0d0344d4":"### If patients have a scholarship, is that effect patients showing up?","d60b77b4":"> drinking alcohol did not affect on showing up. ","ce42aeac":"# Investigate a NO Show Appointments Dataset\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","3567bc64":">in this figure we found the neighbourhoods of high and less percentage of showing up","379b91e3":"### If patients received SMS, is that effect patients showing up?","dd810d7b":"> having scholarship did not affect on showing up. the percentage look like the same in both cases","21d2b9b8":"### If patients have a hipertension, is that effect patients showing up?","2728959a":"## Is the age effect on patients showing up?","b0d0f69a":"> haveing diabetes did not affect on showing up. ","f84bb55e":"> it seems when waiting days less than 1 day patients more likly to show up ","ec3ed5e9":"### IS the age and having diseases, effect on patients showing up?","4358103d":"## Are the neighbourhoods, effect patients showing up?","730b7a8f":"> haveing hipertension did not affect on showing up. ","a353910e":"> the patients were recieved SMS their percentage of showing up less than who did not recieved SMS","25de3aba":"<a id='conclusions'><\/a>\n## Conclusions\n### results\n\n>There are no clear factors to determine whether the patient will show up or not at the scheduled time and all percentage of no show almost the same in the other factors\n\n>However, there are some factors that may be relied upon but not to a large extent such as\n \n>1) 28 % of patients who received SMS did not show up while 17 % of patients who did not receive SMS did not show up\n\n>2) Waiting days between appointment and scheduled day when being less than 1 day the patients more likely showing  up at their appointments\n\n>3) Patients whose scheduled day are in months 6 and 11 have a higher rate of showing up at their appointments compared to other patients whose scheduled day are in different months.\n\n>4) Patients whose scheduled day are in Saturday have a higher rate of showing up at their appointments compared to other patients whose scheduled day are in different days.\n\n>5) in that neighbourhoods ( ILHAS OCE\u00c2NICAS DE TRINDADE, INHANGUET\u00c1, ITARAR\u00c9, JABOUR, JARDIM CAMBURI, JARDIM DA PENHA, JESUS DE NAZARETH, JOANA D\u00b4ARC, JUCUTUQUARA, MARIA ORTIZ, MARU\u00cdPE, MATA DA PRAIA, MORADA DE CAMBURI, M\u00c1RIO CYPRESTE, NAZARETH ) Patients have a high rate of no-show to their appointments \n\n> and in that neighbourhoods ( ILHA DO BOI, NOVA PALESTINA ) Patients have a high rate of show to their appointments \n\n### limitations\n\n> can not show strong correlations between factors since most of our data is categorical\n\n>The Handcap and SMS_received columns weren't explained clearly on the dataset page\n\n>I assumed age of 0 relates to newborns and not data entry error\n\n","f2556371":"### data cleaning\n>Make all header lower case and rename columns for better representation.\n\n>Drop records with age < 0\n\n>Convert Scheduled and Appointment columns to date time.\n\n>There were no missing values in the dataset.\n\n>The dataset has no duplicates rows.","2ba0673b":"<a id='wrangling'><\/a>\n## Data Wrangling","b9f1024d":"### If patients drinking alcohol, is that effect patients showing up?","32acaeda":">Patients whose scheduled day are in months 6 and 11 have a higher rate of showing up at their appointments compared to other patients whose scheduled day are in different months.","737d9174":"<a id='eda'><\/a>\n## Exploratory Data Analysis","33527cbd":"Introduction\nIn this project, I selected the No Show Appointments dataset to work throw it and try to find What factors are important for us to know in order to predict if a patient will show up for their scheduled appointment?\n\nand we tring to answer this questions by exploring the dataset and also the connections among variables.\n\nthe questions\nIs the gender effect on patients showing up?\n\nIf patients have a scholarship, is that affect patients showing up?\n\nIf patients have a diabetes, is that affect patients showing up?\n\nIf patients drinking alcohol, is that affect patients showing up?\n\nIf patients have a hypertension, is that affect patients showing up?\n\nIf patients received SMS, is that affect patients showing up?\n\nIs the age effect on patients showing up?\n\nAre the age and having diseases, effect on patients showing up?\n\nAre the waiting days, effect on patients showing up?\n\nIs the month of scheduled day, effect on patients showing up?\n\nAre the days of the week of the scheduled day, affect patients showing up?\n\nAre the neighborhoods, affect patients showing up?","1050cfd3":"## Are the waiting days, effect on patients showing up?","ec14d287":"### If patients have a diabetes, is that effect patients showing up?"}}