{"cell_type":{"db085214":"code","3776e700":"code","36821bfb":"code","97bfc339":"code","9ad47ebf":"code","eef19294":"code","4463f7e3":"code","54375e78":"code","c35a1481":"code","950c9b19":"code","64aabcf1":"code","67a81191":"code","ced29a9a":"code","f4c2283d":"code","3e656d46":"code","f938f3fd":"markdown","a6f1a3c2":"markdown","98d63241":"markdown","fd3be914":"markdown","af55d29a":"markdown","2f7d85ea":"markdown","1c0a8a8f":"markdown","7d7d1dae":"markdown","956014a1":"markdown","45f9a945":"markdown","01c3beee":"markdown","387a2550":"markdown","f0754235":"markdown","c69a5f9d":"markdown","9e5461cd":"markdown"},"source":{"db085214":"!pip install sadedegel\nimport torch\nimport numpy as np\nimport pandas as pd\nfrom sadedegel.bblock import Doc\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.model_selection import train_test_split\nfrom scipy.sparse import vstack, csr_matrix # dealing with sparse matrices in  tfidf embeddings\nfrom sklearn.preprocessing import normalize\nimport altair as alt\nfrom tqdm import tqdm\nfrom sklearn.feature_extraction.text import TfidfVectorizer\n\n","3776e700":"df = pd.read_csv(\"..\/input\/duygu-analizi-icin-urun-yorumlari\/magaza_yorumlari_duygu_analizi.csv\", encoding=\"utf-16\")\ndf","36821bfb":"df.isna().value_counts()","97bfc339":"df = df.dropna()\ndf","9ad47ebf":"# let's take 5 examples\n\ntext = df.iloc[:5]['G\u00f6r\u00fc\u015f'].tolist()\nprint(text)","eef19294":"# create the transform\nvectorizer = TfidfVectorizer()\n# tokenize and build vocab\nvectorizer.fit(text)\n# vocab\nprint(vectorizer.vocabulary_)","4463f7e3":"# transforming text to tf-idf values\ntransformed_text=vectorizer.transform(text)\n# converting array to dataframe\ntransformed_text=pd.DataFrame.sparse.from_spmatrix(transformed_text)\ntransformed_text\n# renaming vocab columns\nmapped_text=transformed_text.rename(columns={v: k for k, v in vectorizer.vocabulary_.items()})\nmapped_text","54375e78":"mapped_text['ald\u0131m']","c35a1481":"# Step 1\ndoc_0 = Doc(df.iloc[0][\"G\u00f6r\u00fc\u015f\"])\ndoc_0","950c9b19":"# Step 2\ntfidf_embedding_0 = doc_0.tfidf\ntfidf_embedding_0.shape","64aabcf1":"\nX_str = df[\"G\u00f6r\u00fc\u015f\"]\nX = []\n\nfor txt in tqdm(X_str):\n    d = Doc(txt)\n    X.append(d.tfidf)\n\n\nX = np.stack(X, axis=0)\nprint(\"Shape of embeddings matrix: \", X.shape)","67a81191":"y = df[\"Durum\"]\nX_train, X_val, y_train, y_val = train_test_split(X,y, stratify=df[\"Durum\"], test_size=0.2)","ced29a9a":"clf = RandomForestClassifier().fit(X_train, y_train) # train","f4c2283d":"y_pred = clf.predict(X_val)\ny_pred","3e656d46":"from sklearn.metrics import  accuracy_score\n\nprint(\"Accuracy:\", accuracy_score(y_val, y_pred, normalize=True))","f938f3fd":"---\n\n### Train and validate","a6f1a3c2":"## Preprocessing","98d63241":"### Sklearn","fd3be914":"\u015eimdi s\u0131ra modellemede. E\u011fitimi h\u0131zl\u0131 olsun diye en basit s\u0131n\u0131fland\u0131rma metodunu, LogisticRegression'\u0131 kullanaca\u011f\u0131z.","af55d29a":"## Sadedegel","2f7d85ea":"S\u0131n\u0131fland\u0131rma modelimiz haz\u0131r!\nTest datas\u0131n\u0131n \u00fcst\u00fcnde deneme vakti.","1c0a8a8f":"Geriye kalan tek \u015fey s\u0131n\u0131fland\u0131r\u0131c\u0131y\u0131 e\u011fitmek i\u00e7in bir matris olu\u015fturmak.","7d7d1dae":"Datam\u0131z\u0131 haz\u0131rlaman\u0131n son ad\u0131m\u0131 train ve test b\u00f6l\u00fcmlerine b\u00f6lmek:","956014a1":"\n<br>\nDatam\u0131z\u0131 y\u00fckledikten sonra ham metni TF-IDF embedding matrisine \u00e7evirece\u011fiz.\n\n- \u00d6nce birka\u00e7 \u00f6rnek metin alaca\u011f\u0131z,\n- Bu metinlerin vocabulary olarak g\u00f6sterimi,\n- TF-IDF de\u011ferleri\n","45f9a945":"### Data","01c3beee":"Datasette **Olumsuz**, **Tarafs\u0131z** ve **Olumlu** diye ayr\u0131lan 11428 tane \u00fcr\u00fcn yorumu bulunmaktad\u0131r.","387a2550":"## \u00dcr\u00fcn yorumlar\u0131ndan duygu analizi\n### with Sadedegel and Sklearn\n#### by Global Maksimum DS Team","f0754235":"Her bir dok\u00fcman (bizim durumda her bir yorum) i\u00e7in a\u015fa\u011f\u0131daki ad\u0131mlar uygulanacakt\u0131r:\n<ol>\n    <li style=\"font-weight:bold\"><span style=\"font-weight:normal\">Yorum, Sadedegel Doc objesine \u00e7evrilir.<\/span><\/li>\n    <li style=\"font-weight:bold\"><span style=\"font-weight:normal\">Doc objesinin .tfidf attribute'undan V boyutunda bir vekt\u00f6r al\u0131n\u0131r (N: Dok\u00fcmandaki c\u00fcmle say\u0131s\u0131, V: Vocabulary boyutu)<\/span><\/li>\n    <li style=\"font-weight:bold\"><span style=\"font-weight:normal\">Olu\u015fan V boyutunda vekt\u00f6r s\u0131n\u0131fland\u0131r\u0131cya verilir.<\/span><\/li>\n<\/ol>\n\n1 dok\u00fcman (yorum) \u00fcst\u00fcnde t\u00fcm preprocessing ad\u0131mlar\u0131:","c69a5f9d":"Modelimizin performans\u0131n\u0131 \u00f6l\u00e7mek i\u00e7in accuracy metri\u011fini kullanaca\u011f\u0131z.","9e5461cd":"![logo-2.png](attachment:logo-2.png)"}}