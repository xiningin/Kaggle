{"cell_type":{"bb6bb871":"code","53d158a0":"code","aace6ef6":"code","dcda5eb8":"code","981881b4":"code","ae438bb7":"code","9b839524":"code","9562e011":"code","8bbff287":"code","ce281561":"code","deaa9476":"code","587fb544":"code","93dd8797":"code","386a7abf":"markdown","6d91b40b":"markdown","3af280e2":"markdown","83fc0382":"markdown","f0e2020e":"markdown"},"source":{"bb6bb871":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","53d158a0":"df = pd.read_csv(\"\/kaggle\/input\/nifty50-stock-market-data\/HDFCBANK.csv\")\ndf.head()","aace6ef6":"df.tail()","dcda5eb8":"df.shape","981881b4":"price = df[['Date','Close']]\nprice.head(10)","ae438bb7":"price.info()","9b839524":"price.Date = pd.to_datetime(price.Date, format=\"%Y-%m-%d\")\nprice = price[(price['Date'] > pd.Timestamp(2019,1,1))]\nprice.head()","9562e011":"price.tail()","8bbff287":"plt.plot(price.Date, price.Close)\nplt.figure(figsize=(14,12))\nplt.gcf().autofmt_xdate() \nplt.show()","ce281561":"#price.Close = price.Close.mask( price.Date >='2011-07-14', price.Close*5)\nprice.Close = price.Close.mask( price.Date >='2019-09-19', price.Close*2)\n\nplt.plot(price.Date, price.Close)\nplt.figure(figsize=(60,120))","deaa9476":"#price.sort_values(by='Date', ascending=False, inplace=True)\nprice.head()","587fb544":"price['lowest_cumulative_price']=price.Close.cummin()\nprice['highest_profit']=price.Close-price['lowest_cumulative_price']\nprice.highest_profit.max()","93dd8797":"price['highest_cumulative_price']=price.Close.cummax()\nprice['highest_loss']=price.Close-price['highest_cumulative_price']\nprice.highest_loss.min()","386a7abf":"* Biggest Loss that could have been made","6d91b40b":"[Largest Profit or Loss Problem without For loop](https:\/\/ryxcommar.com\/2019\/08\/05\/a-cool-sql-problem-avoiding-for-loops\/)\n\n**Problem:**\n> You have a table of **trading days** (with no gaps) and **close prices** for a stock.\n> Find the **highest and lowest profits (or losses)** you could have made if you bought the stock at one close price and sold it at another close price, i.e. a total of exactly two transactions.\n> You cannot sell a stock before it has been purchased. \n>Avoid For loop","3af280e2":"Stock splits happened in 2011-07-14(1:5 ratio) and 2019-09-19(1:2 ratio). So, normalizing the time series.\n","83fc0382":"* Highest Profit that could have been made","f0e2020e":"###  HDFC Bank stock data: Finding the highest profit and loss in 2019"}}