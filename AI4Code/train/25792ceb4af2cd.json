{"cell_type":{"bb11fc54":"code","e28e183f":"code","b085136f":"code","1fe26de0":"code","713165b4":"code","00c9f646":"code","b1a18131":"code","cd12e9b6":"code","d65feca0":"code","4ab1f1d8":"code","e23b5aa5":"code","faf3fedc":"code","00cc449b":"code","7e8373e2":"code","bdbb29f9":"code","f518bbf2":"code","129892dc":"code","c3d40d4f":"code","40b653f3":"code","775c1a81":"code","ee1ba5f5":"markdown","43901f67":"markdown","9e6306e5":"markdown","1dafb52c":"markdown","5705fe27":"markdown","7f8aa4ff":"markdown","cf36bcfa":"markdown","9f435289":"markdown","a4c9a2bb":"markdown"},"source":{"bb11fc54":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport statsmodels.graphics.tsaplots as sgt\nimport statsmodels.tsa.stattools as sts\nfrom statsmodels.tsa.arima_model import ARIMA\nfrom scipy.stats.distributions import chi2 \nfrom math import sqrt\nimport seaborn as sns\nsns.set()","e28e183f":"raw_csv_data = pd.read_csv(\"..\/input\/Index2018.csv\") \ndf_comp=raw_csv_data.copy()\ndf_comp.date = pd.to_datetime(df_comp.date, dayfirst = True)\ndf_comp.set_index(\"date\", inplace=True)\ndf_comp=df_comp.asfreq('b')\ndf_comp=df_comp.fillna(method='ffill')","b085136f":"df_comp['market_value']=df_comp.ftse","1fe26de0":"del df_comp['spx']\ndel df_comp['dax']\ndel df_comp['ftse']\ndel df_comp['nikkei']\nsize = int(len(df_comp)*0.8)\ndf, df_test = df_comp.iloc[:size], df_comp.iloc[size:]","713165b4":"import warnings\nwarnings.filterwarnings(\"ignore\")","00c9f646":"def LLR_test(mod_1, mod_2, DF = 1):\n    L1 = mod_1.fit(start_ar_lags = 11).llf\n    L2 = mod_2.fit(start_ar_lags = 11).llf\n    LR = (2*(L2-L1))    \n    p = chi2.sf(LR, DF).round(3)\n    return p","b1a18131":"df['returns'] = df.market_value.pct_change(1)*100","cd12e9b6":"df['sq_returns'] = df.returns.mul(df.returns)","d65feca0":"df.returns.plot(figsize=(20,5))\nplt.title(\"Returns\", size = 24)\nplt.show()","4ab1f1d8":"df.sq_returns.plot(figsize=(20,5))\nplt.title(\"Volatility\", size = 24)\nplt.show()","e23b5aa5":"sgt.plot_pacf(df.returns[1:], lags = 40, alpha = 0.05, zero = False , method = ('ols'))\nplt.title(\"PACF of Returns\", size = 20)\nplt.show()","faf3fedc":"sgt.plot_pacf(df.sq_returns[1:], lags = 40, alpha = 0.05, zero = False , method = ('ols'))\nplt.title(\"PACF of Squared Returns\", size = 20)\nplt.show()","00cc449b":"!pip3 install arch","7e8373e2":"from arch import arch_model","bdbb29f9":"model_arch_1 = arch_model(df.returns[1:])\nresults_arch_1 = model_arch_1.fit(update_freq = 5)\nresults_arch_1.summary()","f518bbf2":"model_arch_1 = arch_model(df.returns[1:], mean = \"Constant\", vol = \"ARCH\", p = 1)\nresults_arch_1 = model_arch_1.fit(update_freq = 5)\nresults_arch_1.summary()","129892dc":"model_arch_1 = arch_model(df.returns[1:], mean = \"AR\", lags = [2, 3, 6], vol = \"ARCH\", p = 1, dist = \"ged\")\nresults_arch_1 = model_arch_1.fit(update_freq = 5)\nresults_arch_1.summary()","c3d40d4f":"model_arch_2 = arch_model(df.returns[1:], mean = \"Constant\", vol = \"ARCH\", p = 2)\nresults_arch_2 = model_arch_2.fit(update_freq = 5)\nresults_arch_2.summary()","40b653f3":"model_arch_3 = arch_model(df.returns[1:], mean = \"Constant\", vol = \"ARCH\", p = 3)\nresults_arch_3 = model_arch_3.fit(update_freq = 5)\nresults_arch_3.summary()","775c1a81":"model_arch_13 = arch_model(df.returns[1:], mean = \"Constant\", vol = \"ARCH\", p = 13)\nresults_arch_13 = model_arch_13.fit(update_freq = 5)\nresults_arch_13.summary()","ee1ba5f5":"## Creating Squared Returns","43901f67":"## The arch_model() Method","9e6306e5":"## Importing the Data and Pre-processing ","1dafb52c":"## Importing the relevant packages","5705fe27":"## Creating Returns","7f8aa4ff":"## Returns vs Squared Returns","cf36bcfa":"## The LLR Test","9f435289":"## Higher-Lag ARCH Models","a4c9a2bb":"## The Simple ARCH(1) "}}