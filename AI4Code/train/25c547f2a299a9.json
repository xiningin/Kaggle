{"cell_type":{"84ce496a":"code","f3303467":"code","712ea4c3":"code","46dff788":"code","cd3c0d63":"code","db48da17":"code","68ea787d":"code","2697a587":"code","4b066cd5":"code","79db31ed":"code","86efd2d3":"code","c5e069e2":"markdown","0310788a":"markdown","fa6c1d36":"markdown","965b3d9f":"markdown","3c6eaa48":"markdown","eabbeb78":"markdown","f5f1db71":"markdown","91235db4":"markdown","64b9586d":"markdown","e01d71eb":"markdown"},"source":{"84ce496a":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nfrom matplotlib import pyplot as plt\n\n%matplotlib inline","f3303467":"dtypes = {\n        'MachineIdentifier':                                    'category',\n        'ProductName':                                          'category',\n        'EngineVersion':                                        'category',\n        'AppVersion':                                           'category',\n        'AvSigVersion':                                         'category',\n        'IsBeta':                                               'int8',\n        'RtpStateBitfield':                                     'float16',\n        'IsSxsPassiveMode':                                     'int8',\n        'DefaultBrowsersIdentifier':                            'float16',\n        'AVProductStatesIdentifier':                            'float32',\n        'AVProductsInstalled':                                  'float16',\n        'AVProductsEnabled':                                    'float16',\n        'HasTpm':                                               'int8',\n        'CountryIdentifier':                                    'int16',\n        'CityIdentifier':                                       'float32',\n        'OrganizationIdentifier':                               'float16',\n        'GeoNameIdentifier':                                    'float16',\n        'LocaleEnglishNameIdentifier':                          'int8',\n        'Platform':                                             'category',\n        'Processor':                                            'category',\n        'OsVer':                                                'category',\n        'OsBuild':                                              'int16',\n        'OsSuite':                                              'int16',\n        'OsPlatformSubRelease':                                 'category',\n        'OsBuildLab':                                           'category',\n        'SkuEdition':                                           'category',\n        'IsProtected':                                          'float16',\n        'AutoSampleOptIn':                                      'int8',\n        'PuaMode':                                              'category',\n        'SMode':                                                'float16',\n        'IeVerIdentifier':                                      'float16',\n        'SmartScreen':                                          'category',\n        'Firewall':                                             'float16',\n        'UacLuaenable':                                         'float32',\n        'Census_MDC2FormFactor':                                'category',\n        'Census_DeviceFamily':                                  'category',\n        'Census_OEMNameIdentifier':                             'float16',\n        'Census_OEMModelIdentifier':                            'float32',\n        'Census_ProcessorCoreCount':                            'float16',\n        'Census_ProcessorManufacturerIdentifier':               'float16',\n        'Census_ProcessorModelIdentifier':                      'float16',\n        'Census_ProcessorClass':                                'category',\n        'Census_PrimaryDiskTotalCapacity':                      'float32',\n        'Census_PrimaryDiskTypeName':                           'category',\n        'Census_SystemVolumeTotalCapacity':                     'float32',\n        'Census_HasOpticalDiskDrive':                           'int8',\n        'Census_TotalPhysicalRAM':                              'float32',\n        'Census_ChassisTypeName':                               'category',\n        'Census_InternalPrimaryDiagonalDisplaySizeInInches':    'float16',\n        'Census_InternalPrimaryDisplayResolutionHorizontal':    'float16',\n        'Census_InternalPrimaryDisplayResolutionVertical':      'float16',\n        'Census_PowerPlatformRoleName':                         'category',\n        'Census_InternalBatteryType':                           'category',\n        'Census_InternalBatteryNumberOfCharges':                'float32',\n        'Census_OSVersion':                                     'category',\n        'Census_OSArchitecture':                                'category',\n        'Census_OSBranch':                                      'category',\n        'Census_OSBuildNumber':                                 'int16',\n        'Census_OSBuildRevision':                               'int32',\n        'Census_OSEdition':                                     'category',\n        'Census_OSSkuName':                                     'category',\n        'Census_OSInstallTypeName':                             'category',\n        'Census_OSInstallLanguageIdentifier':                   'float16',\n        'Census_OSUILocaleIdentifier':                          'int16',\n        'Census_OSWUAutoUpdateOptionsName':                     'category',\n        'Census_IsPortableOperatingSystem':                     'int8',\n        'Census_GenuineStateName':                              'category',\n        'Census_ActivationChannel':                             'category',\n        'Census_IsFlightingInternal':                           'float16',\n        'Census_IsFlightsDisabled':                             'float16',\n        'Census_FlightRing':                                    'category',\n        'Census_ThresholdOptIn':                                'float16',\n        'Census_FirmwareManufacturerIdentifier':                'float16',\n        'Census_FirmwareVersionIdentifier':                     'float32',\n        'Census_IsSecureBootEnabled':                           'int8',\n        'Census_IsWIMBootEnabled':                              'float16',\n        'Census_IsVirtualDevice':                               'float16',\n        'Census_IsTouchEnabled':                                'int8',\n        'Census_IsPenCapable':                                  'int8',\n        'Census_IsAlwaysOnAlwaysConnectedCapable':              'float16',\n        'Wdft_IsGamer':                                         'float16',\n        'Wdft_RegionIdentifier':                                'float16',\n        'HasDetections':                                        'int8'\n        }","712ea4c3":"TARGET = 'HasDetections'\nID     = 'MachineIdentifier'\n\nTRAIN_FILE = \"..\/input\/train.csv\"","46dff788":"train = pd.read_csv(TRAIN_FILE, dtype=dtypes)","cd3c0d63":"sns.countplot(train['HasDetections']);","db48da17":"train['MachineIdentifier'].nunique() == train.shape[0]","68ea787d":"nunique_values = train.nunique(axis=0)\ncat_cols = nunique_values[nunique_values < 30].index","2697a587":"from math import floor\n\ndef plot_slice_of_cols(start, end, cols_dict, train_df):\n    switcher = 1\n    fig, axes = plt.subplots(8, 2, figsize=(15,30))\n    plt.subplots_adjust(wspace=0.4, hspace=0.5)\n    for i, col in enumerate(cols_dict[start:end]):\n        switcher ^= 1\n        spl = sns.countplot(col, hue='HasDetections', data=train_df, ax=axes[floor(i\/2)][switcher])\n        spl.set_xticklabels(spl.get_xticklabels(),rotation=30)","4b066cd5":"plot_slice_of_cols(0, 15, cat_cols, train)","79db31ed":"plot_slice_of_cols(15, 30, cat_cols, train)","86efd2d3":"plot_slice_of_cols(30, 45, cat_cols, train)","c5e069e2":"Now i'd like to choose some integer value as a threshold to decouple categorical features, which we can analyze from others I guess **30 unique values** might be reasonable","0310788a":"And finally, let's plot bar charts to understand some correlations and distributions.\n\nI'll do that **with respect to target** metric (which is '**HasDetections**')","fa6c1d36":"Here *SmartScreen* may be worth to dig...","965b3d9f":"So the first look:\n\n* *ProductName*, *IsBeta*, *IsSxsPassiveMode*, *HasTpm*, *Platform*, *AutoSampleOptIn*: **Rubbish** Could be **dropped** as for me. Target metric distributed mostly equally\n* Other features seem to be weak.\n* It may be worth to consider features like: *AvProductsInstalled*, *AvProductsEnabled* (but it's obvious ;))\n\nWhat is also interesting. I'm quite confused about a feature '*IsProtected*'... Can somebody who use windows help me to understand what's that ? Thank you in advance!","3c6eaa48":"Reduced to 7.8G from 19G memory usage thank's to the explicit data types.\nAnd to be more concrete, thank's [Theo Viel](https:\/\/www.kaggle.com\/theoviel) for that! ([original kaggle kernel](https:\/\/www.kaggle.com\/theoviel\/load-the-totality-of-the-data))\n\nFirst of all, let's take a look at the target distribution","eabbeb78":"\n![](http:\/\/www.portofquincy.org\/wp-content\/uploads\/2015\/08\/Microsoft_logo_2012_modified.svg_.png)\n","f5f1db71":"****Do we have something interesting in the dataset?\n\nWhat i've done:\n\n1. Loaded a dataset with explicit types\n2. Target and ID columns demistifyied :)\n3. Categorical columns. Quick look\n\nPlan to do next:\n\n4. Manage columns with versions Either:\n    - separate out major, minor, fixes to the new features\n    - cast them to integer and look if the order makes sense\n    \n5. Checkout a test set distribution\n\n6. Other types of columns. Quick look\n\n7. Downcast float and int types more when reading a train file (see attachment)","91235db4":"As we can see, it's distributed nearly perfect 50\/50\n\nMoving forward\n\nI'd like to be sure that we have one row per ID in this dataset.\n\nLet's leave this assumption here and take a look at the category variables","64b9586d":"As a conclusion about this categorical features, i may say that we don't have a very strong features among them.\n\nHowever, it's interesting to dive deeper into some other features (45\/~80 only seen for now)\n\n**TO BE CONTINUED**","e01d71eb":"**Attachment**: Columns may be downcasted more (not tested yet, so not reported to Theo Vial)\n2 problems could be present: None values among integers, and test set distribution \n\n* RtpStateBitfield      :float16 --> int8\n* AVProductsInstalled   :float16 --> int8\n* AVProductsEnabled     :float16 --> int8\n* Wdft_RegionIdentifier :float16 --> int8"}}