{"cell_type":{"f4df4ad3":"code","3b18fb64":"code","bc040187":"code","2c1e2bc4":"code","7716674b":"code","bac17d82":"code","3422dfec":"code","9aad8905":"markdown","7132924f":"markdown","229f2105":"markdown","6b0ac09e":"markdown","0511a164":"markdown","a248567f":"markdown","57c1befb":"markdown"},"source":{"f4df4ad3":"!pip install transformers==4.1.1","3b18fb64":"import transformers","bc040187":"import sys\nsys.modules['tokenizers'].__version__","2c1e2bc4":"import sys\nsys.modules['pkg_resources'].get_distribution('tokenizers').version","7716674b":"import importlib\nimportlib.reload(sys.modules['pkg_resources'])\n\nsys.modules['pkg_resources'].get_distribution('tokenizers').version","bac17d82":"import transformers\ntransformers.__version__","3422dfec":"# run this command right after restarting\nimport sys\n'tokenizers' in sys.modules","9aad8905":"After checking the source code of `transformers`,\nI found that `VersionConflict` is raised by `pkg_resources`.\n\nBut the thing is `pkg_resources` **has been loaded right after the Kaggle's notebook starting**.\nSo it cannot get the correct version of `tokenizers` without reloading it.\n\nYou can also check that by `sys.modules`","7132924f":"So, the solution is straightforward:\njust reload `pkg_resources`.","229f2105":"You should encounter some outputs like\n```\n  Attempting uninstall: tokenizers\n    Found existing installation: tokenizers 0.9.3\n    Uninstalling tokenizers-0.9.3:\n      Successfully uninstalled tokenizers-0.9.3\n  Attempting uninstall: transformers\n    Found existing installation: transformers 3.5.1\n    Uninstalling transformers-3.5.1:\n      Successfully uninstalled transformers-3.5.1\n```\nThat means we have uninstalled the older versions.\n\nBut, if you run following `import` command,","6b0ac09e":"Well, a strange error occurs:\n```\nVersionConflict: tokenizers==0.9.4 is required for a normal functioning of this module, but found tokenizers==0.9.3.\n```\nSomething stranger is, in fact, \nthe `0.9.4` version of `tokenizsers` has been successfully loaded!\n\nYou can check it with `sys.modules`","0511a164":"By the way, at the time of writing, `tokenizers` isn't in the list of preloading modules of Kaggle.\nIt's imported when we first try importing `transformers`.\n\nYou can restart the session and check the `sys.modules` ","a248567f":"**NOTE**: \nIf you encountered different outputs from mine,\nthe reason could be:\n\n1. Kaggle has updated the notebook environment.\n2. You execute some cell more than once. In this case, you need restart the session and execute sequentially. \n\nFirst, install the latest version of `transformers`","57c1befb":"If everything's going right, you should get `0.9.4` and now we can import `transformers` properly."}}