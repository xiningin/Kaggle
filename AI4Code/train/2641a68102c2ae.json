{"cell_type":{"ee991016":"code","a7bae264":"code","63403f37":"code","8fda3edd":"code","be6021bb":"code","3f343953":"code","13368d34":"code","bf8a9ee1":"code","e8f7a006":"code","350efef7":"code","b6183623":"code","549986c5":"code","031b0ce5":"code","f9abe312":"code","3b19a2f2":"code","a743b22d":"code","4491b7b9":"code","92a3a7ef":"code","aa061d55":"code","ee34493a":"code","55909d27":"code","81e8a40e":"code","b165b232":"code","46325744":"code","c11cc8c3":"code","eb89075c":"code","d00d7aa0":"code","02b29f66":"code","9899dc2c":"code","5fc53dd7":"code","e95a17fc":"code","cbb563d8":"code","cb130b0e":"code","957de7d0":"code","30b619e1":"code","9e611c96":"code","45b412fc":"code","a33c984f":"code","a14a46a8":"code","373b2eb0":"code","d8f0259d":"code","7f6f584d":"code","31314fc2":"code","bbacd565":"code","6e67afca":"code","1d9aff91":"code","66204145":"code","b59be42a":"code","b0095d75":"code","c663828d":"code","9538b0f5":"code","a4dae62f":"code","de36bcfc":"code","67add793":"code","c9a02157":"code","7517167f":"code","e264b273":"code","a88b21af":"code","d43ca21e":"code","2e39b15e":"code","5fc8c482":"code","af0fce57":"code","3cfbca88":"code","535a9a8a":"code","96803901":"code","7ce12777":"code","dd4a6aad":"code","3b51d8f0":"code","0ef24ea2":"code","aecd4433":"code","24bbb960":"markdown","d1aa764f":"markdown","c9b7eb4a":"markdown","bf66df1b":"markdown","bf8b07ac":"markdown","63a3ee14":"markdown","7575fe19":"markdown","06cb933a":"markdown","4a6eb8df":"markdown","f4a98fb6":"markdown","a638d673":"markdown","f34a3c0c":"markdown","e7f8646b":"markdown","55520615":"markdown","5e20a342":"markdown","0c63cf85":"markdown","7d37330a":"markdown","24140ea1":"markdown","7d2fd4af":"markdown","6e2bbc34":"markdown","917e4d28":"markdown","0402aa9d":"markdown","41c05879":"markdown","e76222ee":"markdown","877120aa":"markdown","7244f7b5":"markdown","b7675ff4":"markdown","7479db3d":"markdown","abde8e19":"markdown","47170a56":"markdown","d06c7b10":"markdown","74c8c675":"markdown","623d858d":"markdown","77ecb21f":"markdown","c482149e":"markdown","5e7c0a84":"markdown","af60b8ee":"markdown","98d7bde4":"markdown","ff1e2766":"markdown","5890d823":"markdown","6b23ea6c":"markdown","122768e5":"markdown"},"source":{"ee991016":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","a7bae264":"#from chart_studio.plotly import __version__\nimport cufflinks as cf","63403f37":"from plotly.offline import download_plotlyjs,init_notebook_mode,plot, iplot\n\ninit_notebook_mode(connected=True)\n\ncf.go_offline()","8fda3edd":"df=pd.read_csv('..\/input\/tsf-datasets\/SampleSuperstore.csv')","be6021bb":"df.head()","3f343953":"df.tail()","13368d34":"df.info()","bf8a9ee1":"#checking shape of the whole dataset\ndf.shape","e8f7a006":"#displaying column names\ndf.columns","350efef7":"#chceking null values\ndf.isnull().sum()","b6183623":"#displaying datatype of columns\ndf.dtypes","549986c5":"#checking if any duplicate row is present in the dataset\nprint(\"There are {0} duplicated rows in the data!\".format(df.duplicated().sum()))","031b0ce5":"#removing the 17 duplicated rows to avoid errors in further calculations\ndf.drop_duplicates(inplace =  True)","f9abe312":"#chceking shape again after removing those 17 duplicated rows\ndf.shape","3b19a2f2":"df['Country'].nunique()","a743b22d":"df['Postal Code']","4491b7b9":"#removing the unimportant columns\ndf = df.drop(['Country', 'Postal Code'], axis =1)","92a3a7ef":"#checking for correlation between the columns visually\nplt.subplots(figsize = (12, 8))\nsns.heatmap(df.corr(), annot = True, cmap = 'magma', lw = 8, linecolor = 'white')\nplt.plot()","aa061d55":"df_num = df.select_dtypes(include = [np.number])","ee34493a":"#BoxPlot\n\nplt.figure(figsize = [12, 8])\nsns.set(style = 'whitegrid')\nsns.boxplot(x = 'variable', y = 'value', data = pd.melt(df_num), width = 1)\nplt.show()","55909d27":"df_num.iplot(kind='box')","81e8a40e":"#Removal of Outliers\ndef remove_outlier(dataset, k= 3.33):\n    for col in dataset.columns:\n        if (dataset[col].dtype == 'int64' or dataset[col].dtype == 'float64'):\n            mean = dataset[col].mean()\n            global ds\n            std = dataset[col].std()\n            outlier = [i for i in dataset[col] if (i > mean - k * std)]\n            outlier = [i for i in outlier if (i < mean + k * std)]\n            ds = dataset.loc[dataset[col].isin(outlier)]","b165b232":"remove_outlier(df, k = 3.33)","46325744":"ds_num = ds.select_dtypes(include = [np.number])","c11cc8c3":"#lets check if the outliers are removed or not\n#BoxPlot(After removing outliers)\n\nplt.figure(figsize = [12, 8])\nsns.set(style = 'whitegrid')\nsns.boxplot(x = 'variable', y = 'value', data = pd.melt(ds_num), width = 1)\nplt.show()","eb89075c":"ds_num.iplot(kind='box')","d00d7aa0":"ds.shape","02b29f66":"ds.head()","9899dc2c":"#display basic information\nds.info()","5fc53dd7":"ds.describe()","e95a17fc":"#display number of uniquq entries in the Categorical Columns\nfor col in ds.columns:\n    if ds[col].dtype == 'object':\n        print(\"Number of unique entries in\", col + \" are\", ds[col].nunique())\n        print(\"================================================\")","cbb563d8":"ds.iplot(x = 'Region', y = 'Sales', kind = 'bar', title = 'Region vs Sales', xTitle = 'Region', yTitle = 'Sales')","cb130b0e":"#Category wise sales in each region\nplt.figure(figsize = [12, 8])\nax = sns.barplot(x = \"Region\", y = \"Sales\", hue = \"Category\", data = ds, palette = 'Greens')","957de7d0":"#Segment wise count of the ship modes\nax = sns.catplot(x = 'Ship Mode', hue = \"Segment\", data = ds, kind = 'count', aspect = 1.5, palette = \"Set1\")","30b619e1":"#Segment wise sales in each region\nplt.figure(figsize = [12, 8])\nax = sns.barplot(x = 'Region', y = 'Sales', hue = \"Segment\", data = ds, palette = \"Set1\")","9e611c96":"#Sub-Category vs Sales\nds.iplot(x = 'Sub-Category', y = 'Sales', kind = 'bar', colors = 'pink', title = 'Sub-Category VS Sales', xTitle = 'Sub-Category', yTitle = 'Sales')","45b412fc":"#Aggregated views from pairplot\nsns.set_palette('dark')\nax = sns.pairplot(ds)","a33c984f":"#Based on Cities\ngrouped = ds.groupby('City')","a14a46a8":"#aggregated sale per city\nagg_sales = grouped['Sales'].agg(np.sum).sort_values(ascending = False).reset_index()","373b2eb0":"#Cities with highest total sales\nagg_sales.head()","d8f0259d":"#aggregated Profit per city\nagg_profit = grouped['Profit'].agg(np.sum).sort_values(ascending = False).reset_index()","7f6f584d":"#Cities with Highest total Profit\nagg_profit.head()","31314fc2":"#Aggregate Discount per city\nagg_dist = grouped['Discount'].agg(np.sum).sort_values(ascending = False).reset_index()","bbacd565":"#Cities with highest aggregated Discount\nagg_dist.head()","6e67afca":"#Average Sales per city\navg_sales = grouped['Sales'].agg(np.mean).sort_values(ascending = False).reset_index()","1d9aff91":"#Cities with highest Average sales\navg_sales.head()","66204145":"#Cities with lowest Average sales\navg_sales.tail()","b59be42a":"#Average Profit per city\navg_profit=grouped['Profit'].agg(np.mean).sort_values(ascending=False).reset_index()","b0095d75":"#Cities with highest Average profit\navg_profit.head()","c663828d":"#Cities with lowest Average profit\navg_profit.tail()","9538b0f5":"#Average Discount per city\navg_dist=grouped['Discount'].agg(np.mean).sort_values(ascending=False).reset_index()","a4dae62f":"#Cities with highest Average discount\navg_dist.head()","de36bcfc":"#Cities with lowest Average Discount\navg_dist.tail()","67add793":"#Cities having High Average Discounts\nhigh_dist = avg_dist[avg_dist['Discount'] >= 0.7]\n\n#Cities having Low Average Discounts\nlow_dist = avg_dist[avg_dist['Discount'] == 0]\n\n#Cities having High Average Sales\nhigh_sales = avg_sales[avg_sales['Sales'] > 500]\n\n#Cities having low Average Sales\nlow_sales = avg_sales[avg_sales['Sales'] < 50]\n\n#Cities having High Average Profit\nhigh_profit = avg_profit[avg_profit['Profit'] > 100]\n\n#Cities having low Average profit\nlow_profit = avg_profit[avg_profit['Profit'] < 0]\n\n#Cities with High-Average-Discounts but Low-Average-Sales\nmerged = pd.merge(high_dist, low_sales, on = ['City'], how = 'inner')\nmerged\n","c9a02157":"#Cities with high Average Sales as well as Average Profit\nmerged2 = pd.merge(high_sales, high_profit, on = ['City'], how = 'inner')\nmerged2","7517167f":"#Cities where Average Discount is less but Average Sales is High\nmerged3 = pd.merge(low_dist, high_sales, on = 'City', how = 'inner')\nmerged3","e264b273":"#Cities with high Average sales but low Average profit\nmerged4 = pd.merge(high_sales, low_profit, on = 'City', how = 'inner')\nmerged4","a88b21af":"#Cities with high Average discount but low Average profit\nmerged5 = pd.merge(high_dist, low_profit, on = 'City', how = 'inner')\nmerged5","d43ca21e":"#Cities with low Average discount but High Average profit\nmerged6 = pd.merge(low_dist, high_profit, on  = 'City', how =  'inner')\nmerged6","2e39b15e":"#State-wise Profit\nplt.figure(figsize = [24, 15])\nax = sns.barplot(x = 'State', y = 'Profit', data  = ds, palette = 'Set1')\nplt.xticks(rotation = 90, fontsize = 16)\nplt.yticks(fontsize = 16)\nplt.title(\"State VS Profit\", fontsize = 24)\nplt.xlabel(\"States\", fontsize = 20)\nplt.ylabel(\"Profit\", fontsize = 20)\nplt.tight_layout()","5fc8c482":"#Category Wise profit in the whole country\nds.iplot(kind = 'bar', x = \"Category\", y = \"Profit\", title = \"Category VS Profit\", xTitle = \"Category\", yTitle = 'Profit', colors = 'magenta')","af0fce57":"#Category Wise profit in the whole country\nplt.figure(figsize = [12,8])\nax = sns.barplot(x = \"Category\", y = \"Profit\", data = ds, palette = \"Set2\")","3cfbca88":"#Category wise Profit in Each Region\nplt.figure(figsize = [12,8])\nax = sns.barplot(x = \"Region\", y = \"Profit\", hue = \"Category\", data = ds, palette = \"Set2\")","535a9a8a":"#Subcategory wise profit\nplt.figure(figsize = [10, 8])\nax = sns.barplot(x = \"Sub-Category\", y = \"Profit\", data = ds, palette = 'magma')\nplt.xlabel(\"SubCategory\", fontsize = 15)\nplt.ylabel(\"Profit\", fontsize = 15)\nplt.xticks(rotation = 90)\nplt.show()","96803901":"#Entries with Category=Technology\nds_tech = ds[(ds['Category'] == \"Technology\")]","7ce12777":"ds_tech.head()","dd4a6aad":"#lets get the Sales of each Sub-Category under Technology\nplt.figure(figsize = [12, 8])\nax = sns.barplot(x = \"Sub-Category\", y = \"Sales\", data = ds_tech, palette = 'magma')\nplt.xlabel(\"SubCategory\", fontsize = 15)\nplt.ylabel(\"Sales\", fontsize = 15)\nplt.show()","3b51d8f0":"#lets get the Profit of each Sub-Category under Technology\nplt.figure(figsize = [12,8])\nax = sns.barplot(x = \"Sub-Category\", y = \"Profit\", data = ds_tech, palette = 'viridis')\nplt.xlabel(\"SubCategory\")\nplt.ylabel(\"Profit\")\nplt.show()","0ef24ea2":"#lets get the Profit of each SubCategory under Technology for each Region\n#lets get the Profit of each Sub-Category inder Technology\nplt.figure(figsize = [12,8])\nax = sns.barplot(x = \"Sub-Category\", y = \"Profit\", hue = \"Region\", data = ds_tech, palette = 'viridis')\nplt.xlabel(\"SubCategory\")\nplt.ylabel(\"Profit\")\nplt.show()","aecd4433":"#Profit of each SubCategory as per the Ship-mode\nplt.figure(figsize = [12, 8])\nax = sns.barplot(x = \"Sub-Category\", y = \"Profit\", hue = \"Ship Mode\", data = ds_tech, palette = 'viridis')\nplt.xlabel(\"SubCategory\", fontsize = 15)\nplt.ylabel(\"Profit\", fontsize = 15)\nplt.show()","24bbb960":"## Observation : The West region is leading the sales followed by the East, Central and South.","d1aa764f":"## Important Insight #1 : Here we can see 7 Cities where the Company is giving high discounts but Sales very very low. As already Discounts are high, no question of increasing discount further. Hence here our investment is not fruitful.","c9b7eb4a":"# Author : Akash Kothare","bf66df1b":"## Some visuals with profit :","bf8b07ac":"## Observation : In category 'Technology', sub-category 'Copiers' is having the highest sales, where 'Accessories' is having lowest amount of sales. 'Machines' sub-category is also performing good.","63a3ee14":"## Task 3: Exploratory Data Analysis - Retail\n","7575fe19":"## Important Insight #2 : The stats above are very pleasing. In all these 15 Cities the sales as well as profit is quite good. Hence if we can invest in these cities (in terms of Discount and other aspects), business can increase more. These can be termed as the Hot-Spots.","06cb933a":"## Important Insight #3 : These 10 cities are generating high average sales in spite of '0' discount! Hence if our investments can be increased in these cities, then huge sales as well as huge profits can be driven from these Cities. These can be termed as the Dark-Horses.","4a6eb8df":"From the above BoxPlot, it is visible that most of the outliers are removed and thus we will use this dataset for EDA.","f4a98fb6":"## Exploratory Data Analysis","a638d673":"## Observation : In case of sales not much difference is seen based on the Segments for any region. Overall 'Corporate' is leading a bit.","f34a3c0c":"## Observation : The plot shows, 'District of Columbia', 'Vermont', 'Wyoming' states are generating highest profits. And States like 'Texas', 'Pennsylvania', 'Illinois', 'Arizona', 'Oregon', 'Colorado', 'Ohio' are generating losses. Hence focus has to be given in such States.","e7f8646b":"## Observation : In each and every region, sales for 'Office Supplies' are very poor. Furniture and Technology are well ahead.","55520615":"From the above plot, the outliers in Sale and Profit are clearly visible. As it is a large dataset, we can remove those rows containing outliers in order to improve our results.","5e20a342":"## Importing Libraries","0c63cf85":"## Observation : No such strong relations are found here between columns of the dataset.","7d37330a":"## Observations : Here also, same picture can be seen. 'Copiers' is well ahead of others, while 'Machines' is not at all performing well, especially in the 'Second Class', where Consumers are large in Count, as seen earlier. So, further steps are to be taken accordingly!","24140ea1":"Data Science & Business Analytics Intern (Batch - Dec'20)","7d2fd4af":"## Interesting Insights using Stats","6e2bbc34":"## Important insight #6 : Here are the 18 cities, where the company is not at all providing any discount, yet these cities are genetating good amount of profit. Hence more and more care is to be taken and investments are to be made in these kinds of Hot-Spots!","917e4d28":"## Observation : Similarly most profit is earned from New York City followed by Los Angeles and Seattle.","0402aa9d":"## Loading the Dataset","41c05879":"## Data Visualization","e76222ee":"## Important insight #4 : In Richardson city, good amount of sales are there but the company is going with loss here. Hence focus can be shifted from here or the reasons are to be found!","877120aa":"## Observation : Simply 'Technology' generates highest profit in every region. And 'Furniture' is lagging in all the regions except South region. Most importantly, at Central region, 'Furniture' is experiencing loss. These points are to be noted and taken care of.","7244f7b5":"## Observation : Interestingly highest total discount is for Philadelphia followed by Houston and Chicago. Shouldn't they lead the Sales and Profit table as well!","b7675ff4":"### Overall scenario shows large cities, like New York, Los Angeles, Seatle, San Francisco are generating highest amount of Sales as well as Profit. And in case of Categories, Technology is always leading in terms of Sales and Profit. Some useful insights are shown like, some cities are there, where company is giving huge discounts but very less sales and profit is generating. Also there are cities, where discounts are totaly '0', but they are generating high profits. Hence great focus are to be given in those cases. If above mentioned points are taken care of, surely some improvements can be done in order to improve the efficiency of the business.","7479db3d":"As we saw, the Profit is maximum in case of Category = Technology, So we should explore that more!","abde8e19":"## Observation : Highest profit is generated from Category='Technology'. 'Furniture' is lagging the list.","47170a56":"# Conclusion :","d06c7b10":"In this EDA task, we have to clean the data and visualize the same using different methods in order to derive meaningful insights beneficial for the business.","74c8c675":"# ## Important Insight #5 : The 8 cities above gets highest average Discount, but here the business is generating loss! Either strong focus is to be given in these cities to find out the faults or Discounts are to withdrawn to make up the loss.","623d858d":"=================================================================================================================","77ecb21f":"## Observation : Something new, in all these average calculations, the Cities which topped the total Sales, total Profit or total Discount, are not leading here. But the overall scenario can be obtained from these average values.","c482149e":"## Observation : In case of Profit, 'Copiers' is ahead always in each of the regions. 'Machines' is going with approx. loss in all regions except West. Other two subcategories are doing average in each region.","5e7c0a84":"## Observation : No much surprises here. Consumer count is highest in each case and they generally prefer 'Standard Class'.","af60b8ee":"There is only one country in the whole dataset, so dropping it won't affect the further analysis, besides Postal Codes are of no use as well so it would be better to drop this column along with Country column.","98d7bde4":"## Observation : No such strong co-relations found!","ff1e2766":"## Observation : As we can see, 'Copiers' are gaining huge profit. 'Accessories' are also doing good. But 'Tables' and 'Bookcases' are going with loss. Respective steps are to be taken to improve the business in these SubCategories.","5890d823":"## Observation : Sales of Sub Categories such as Chairs and Phones are much higher than any other item.","6b23ea6c":"## Observation : It's clear from the picture that 'Copiers' is generating the highest profit as mentioned earlier, but 'Machines' are lagging in this case in spite of generating good amount of sales, as shown previously.","122768e5":"## Observation : New York City has the most amount of sales followed by Los Angeles and San Fracisco."}}