{"cell_type":{"c6b298bf":"code","407136fa":"code","7e76900f":"code","defb19dd":"code","db93e4e9":"code","703fa3ae":"code","745c798c":"code","fad82062":"markdown","76e995fd":"markdown","c1b81c81":"markdown","26529a17":"markdown","8292a18b":"markdown","c2413e3c":"markdown","71db97b0":"markdown"},"source":{"c6b298bf":"!pip install yfinance","407136fa":"import warnings\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom datetime import datetime\nfrom matplotlib.lines import Line2D\nfrom matplotlib.patches import Rectangle\nfrom matplotlib.dates import num2date, date2num\nwarnings.simplefilter(\"ignore\")\n%matplotlib inline","7e76900f":"import yfinance as yf\nticker='BAJFINANCE.NS'\ntickerData = yf.Ticker(ticker)\ndf = tickerData.history(period='1d', start='2011-1-1')","defb19dd":"def rsi(df, window=14):\n    close = df['Close']\n    \n    # Price increase or decrease over previous day\n    dif = close.diff()\n    dif = dif[1:] \n    \n    # pos_m identifies stock price going up\n    # neg_m udentifies stock price going down\n    pos_m, neg_m = dif.copy(), dif.copy()\n    pos_m[pos_m < 0] = 0\n    neg_m[neg_m > 0] = 0\n    \n    # Positive Rolling Mean Exponential\n    prme = pos_m.ewm(span=window).mean()\n    # Negative Rolling Mean Exponential\n    nrme = neg_m.abs().ewm(span=window).mean()\n    \n    # Ratio of magnitude of up move to down move\n    RSE = prme \/ nrme\n    RSIE = 100.0 - (100.0 \/ (1.0 + RSE))\n    df['rsie'] = RSIE\n    \n    # Positive Rolling Mean Simple\n    prms = pos_m.rolling(window).mean()\n    # Negative Rolling Mean Simple\n    nrms = neg_m.abs().rolling(window).mean()\n\n    RSS = prms \/ nrms\n    RSIS = 100.0 - (100.0 \/ (1.0 + RSS))\n    \n    df['rsis'] = RSIS\n    return df\ndf = rsi(df)","db93e4e9":"df['Date'] = df.index\ndf['DateY'] = df['Date'].apply(lambda x: date2num(datetime.strptime(str(x), \"%Y-%m-%d %H:%M:%S\")))","703fa3ae":"def candlestick(ax, quotes, width=0.2, colorup='g', colordown='r', alpha=1.0):\n    OFFSET = width \/ 2.0\n\n    lines = []\n    patches = []\n    for q in quotes:\n        t, open, close, high, low = q[:5]\n\n        if close >= open:\n            color = colorup\n            lower = open\n            height = close - open\n        else:\n            color = colordown\n            lower = close\n            height = open - close\n\n        vline = Line2D(\n            xdata=(t, t), ydata=(low, high),\n            color=color,\n            linewidth=0.5,\n            antialiased=True,\n        )\n\n        rect = Rectangle(\n            xy=(t - OFFSET, lower),\n            width=width,\n            height=height,\n            facecolor=color,\n            edgecolor=color,\n        )\n        rect.set_alpha(alpha)\n\n        lines.append(vline)\n        patches.append(rect)\n        ax.add_line(vline)\n        ax.add_patch(rect)\n    ax.autoscale_view()\n\n    return lines, patches","745c798c":"def plot_rsi(df, start_date='2020-05-01', end_date='2020-09-30'):\n    plt.rcParams['figure.figsize'] = [20, 10]\n    fig = plt.figure()\n    df = df[(df.index>=start_date) & (df.index<=end_date)]\n    ax1 = plt.subplot2grid((5,4), (0,0), rowspan=4, colspan=4)\n    \n    candlestick(ax1, np.array(df[['DateY', 'Open', 'Close', 'High', 'Low']]))\n    plt.title(\"BAJAJ FINANCE LTD: Price\/RSI chart\")\n    plt.ylabel(\"Price\")\n    ax1.grid(True)\n    \n    ax2 = plt.subplot2grid((5,4), (4,0), rowspan=1, colspan=4, sharex=ax1)\n    ax2.fill_between(num2date(df['DateY']), 30, 70, color = '#eeeee4')\n    ax2.plot(num2date(df['DateY']), df['rsie'])\n    plt.ylabel(\"RSI\")\n    ax2.grid(True)\n    \n    plt.setp(ax1.get_xticklabels(), visible=False)\n    plt.subplots_adjust(hspace=0)\n\nplot_rsi(df)","fad82062":"### Get stock data from Yahoo Finance\nI have chosen Bajaj Finance as an example. It is a high beta stocks and thus provides opportunites for short term (less than 365 days) trading.\nEach entry represents 1 day staring from 1 Jan 2011","76e995fd":"Thanks for reading!","c1b81c81":"### Import all necessary libraries","26529a17":"Below is the function to complete RSI usinf EMA and SMA.","8292a18b":"See: [Bollinger Bands Notebook](https:\/\/www.kaggle.com\/ankitmalik\/algotrading-part-1-bollinger-bands)","c2413e3c":"Here I have plotted RSI computed using Exponential Moving Average. We can also use Simple Moving Average instead.","71db97b0":"### Relative Strength Index (RSI)\nThe relative strength index (RSI) is a momentum indicator used in technical analysis that measures the magnitude of recent price changes to find overbought or oversold scenarios in stock, currency or commodity prices. The RSI is an oscillator (a line chart that moves between two extremes) and can have a value between 0 and 100. The indicator was originally introduced in the seminal 1978 book, \"New Concepts in Technical Trading Systems\" written by J. Welles Wilder Jr.\n\nTraditional interpretation of the RSI is that values of 70 or above indicate that a security is becoming overvalued or overbought and may be due for a trend reversal or correction in price. An RSI value of 30 or below indicates an undervalued or oversold scenario."}}