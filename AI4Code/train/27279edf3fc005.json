{"cell_type":{"2bbf213d":"code","1a4810c9":"code","7ec06142":"code","574480be":"code","9527c2ab":"code","63a31914":"code","91fe4571":"code","76436af0":"code","32baf40d":"code","b7d63783":"code","efe2ea58":"code","15ff8207":"code","df67017d":"code","ef5f9f48":"code","ff6dac24":"code","a4c16f1a":"code","19f0a4aa":"code","6f196452":"code","85aaafbb":"code","2d755402":"code","26fd7b90":"code","7cbee947":"code","1abc1371":"code","08818dc0":"code","8982b73c":"code","ae6b9a71":"code","c3c02bf7":"code","10554f99":"code","d8c2b58c":"code","71726140":"code","d814eccb":"code","9d3f0c0f":"code","324afa76":"code","13023684":"code","7955819f":"code","9a566bb5":"code","8a5b0784":"code","fe26a5a6":"code","4a17f01a":"code","f6c39281":"code","2c76c28b":"code","52c3a81a":"code","6f6e3815":"code","085aefdb":"markdown","a333eacf":"markdown","37955273":"markdown","ac70057a":"markdown","4619e15a":"markdown","a490cd6b":"markdown","b75d18af":"markdown","abd1a4f3":"markdown","8d03be2e":"markdown","dadc0949":"markdown","45add291":"markdown","18673421":"markdown","32f478b7":"markdown","6b490063":"markdown","3db5850a":"markdown","77f682b9":"markdown","38f934dd":"markdown","a49747c7":"markdown","4340a848":"markdown","ba831115":"markdown","5cb2e6d2":"markdown","2353a9ed":"markdown","09ab508f":"markdown","d6720de5":"markdown","df8fe4fb":"markdown","96dbeaa9":"markdown","0ffe4815":"markdown","f3e94b05":"markdown","3ec2541b":"markdown","81ee728d":"markdown","048055f1":"markdown","a1dfd77c":"markdown","4230f609":"markdown","e03a240d":"markdown","6599f15a":"markdown","8cb5ddca":"markdown","df5ad5fc":"markdown"},"source":{"2bbf213d":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","1a4810c9":"df = pd.read_csv('..\/input\/telecom_churn.csv')\ndf.head()","7ec06142":"print(df.shape)","574480be":"print(df.columns)","9527c2ab":"df.info()","63a31914":"### Let us change the 'Churn' feature to 'int64'\ndf['churn'] = df['churn'].astype('int64')\ndf.head()","91fe4571":"df.describe()","76436af0":"df.describe(include=['object','bool'])","32baf40d":"df['churn'].value_counts()","b7d63783":"df['churn'].value_counts(normalize = 'True')","efe2ea58":"df.sort_values(by='total day charge', ascending=False).head()","15ff8207":"df.sort_values(by=['churn','total day charge'], ascending=[True, False]).head()","df67017d":"df['churn'].mean()","ef5f9f48":"df[df['churn'] == 1].mean()","ff6dac24":"df[df['churn'] == 1]['total day minutes'].mean()","a4c16f1a":"df[(df['churn'] == 0) & (df['international plan'] == 'no')]['total intl minutes'].max()","19f0a4aa":"df.loc[0:5, 'state':'area code']","6f196452":"df.iloc[0:5, 0:3]","85aaafbb":"df[:1]","2d755402":"df[-1:]","26fd7b90":"df.apply(np.max)","7cbee947":"df[df['state'].apply(lambda x : x[0] == 'W')].head()","1abc1371":"d = {'yes' : True, 'no' : False}\ndf['international plan'] = df['international plan'].map(d)\ndf.head()","08818dc0":"df = df.replace({'voice mail plan' : d})\ndf.head()","8982b73c":"columns_to_show = ['total day minutes', 'total eve minutes', 'total night minutes']\ndf.groupby(['churn'])[columns_to_show].describe(percentiles=[])","ae6b9a71":"df.head()","c3c02bf7":"pd.crosstab(df['churn'], df['international plan'])","10554f99":"pd.crosstab(df['churn'], df['international plan'], normalize = True)","d8c2b58c":"pd.crosstab(df['churn'],df['voice mail plan'], normalize = True)","71726140":"df.pivot_table(['total day calls', 'total eve calls', 'total night calls'],\n              ['area code'],\n              aggfunc = 'mean')","d814eccb":"total_calls = df['total day calls'] + df['total eve calls'] + \\\n                df['total night calls'] + df['total intl calls']\ndf.insert(loc=len(df.columns), column = 'total calls', value = total_calls)\ndf.head()","9d3f0c0f":"df['total charge'] = df['total day charge'] + df['total eve charge'] + \\\n                     df['total night charge'] + df['total intl charge']\ndf.head()","324afa76":"df.drop(['total charge', 'total calls'], axis=1, inplace=True)\ndf.head()","13023684":"df.drop([1,2]).head()","7955819f":"pd.crosstab(df['churn'], df['international plan'], margins = True, normalize = True)","9a566bb5":"sns.countplot(x='international plan', hue='churn', data=df);","8a5b0784":"pd.crosstab(df['churn'], df['customer service calls'], margins = True)","fe26a5a6":"sns.countplot(x = df['customer service calls'], hue = 'churn', data = df);","4a17f01a":"df['many service calls'] = (df['customer service calls'] > 3).astype('int')\ndf.head()","f6c39281":"pd.crosstab(df['many service calls'], df['churn'], margins = True)","2c76c28b":"sns.countplot(x = df['many service calls'], hue = df['churn'], data = df);","52c3a81a":"pd.crosstab(df['many service calls'] & df['international plan'], df['churn'])","6f6e3815":"pd.crosstab(df['many service calls'] & df['international plan'], df['churn'], normalize = True)","085aefdb":"#### Create a new feature 'total calls' and insert as a last column","a333eacf":"#### What is the maximum length of international calls among loyal users who do not have an international plan ?","37955273":"#### From above two tables, we can notice that most of the users are loyal and do not use additional services like 'international plan' or 'voice mail'","ac70057a":"### Applying Functions to cells, columns and rows","4619e15a":"#### find the maximum of each column","a490cd6b":"##### proportion of churned users in our data","b75d18af":"### sorting","abd1a4f3":"### Let us check relation between the customer service calls and churn ","8d03be2e":"#### iloc() is used for indexing by number","dadc0949":"#### loc method is used for indexing by name","45add291":"# Let us predict the churn","18673421":"#### From the above  table & plot it is clear that churn rate increased a lot if the customer calls are more than 4.\n#### now we will add a new binary feature ( customer service calls > 3 ) and then we will check the churn","32f478b7":"#### Let us first line of the data frame","6b490063":"#### Let us find the average values of numerical features for churned users","3db5850a":"#### drop method is used to delete the rows or columns\n#### we need to pass the required indexes and the axis parameter ( 1 to delete columns, and nothing or 0 to delete rows )\n#### The inplace argument tells whether to change the original DataFrame.\n#### with inplace = False, the drop method doesn't change the existing DataFrame and returns a new one with dropped rows or columns\n#### with inplace = True, it alteres the DataFrame","77f682b9":"### Pivot Tables\n#### pivot_table method takes the following parameters:\n##### values : a list of variables to calculate statistics for,\n##### index : a list of variables to group data by,\n##### aggfunc : what statisitcs we need to calculate for groups, ex. sum, mean, maximum, minimum or something else\n#### Find the averages for total day calls, total eve calls, total night calls for each area (area code)  ","38f934dd":"#### What is the relation between the churn and international plan ?","a49747c7":"#### Select all states starting with W ( use a lambda function )","4340a848":"#### From the above plot, we can notice that churn rate is much higher with the international plan. This indicates that customers with international plan are not happy with this telecom operator","ba831115":"## Conclusion\n#### we found a relation i.e\n### \"international plan = True & customer service calls > 3 => churn = 1, else churn = 0\"\n#### The accuracy with above relation is 85.80% ( i.e 85.23 + 00.57) and error is 14.19% ( 13.92+0.27)\n#### this is a good starting point for further studies","5cb2e6d2":"#### Delete those two features we created earlier ","2353a9ed":"#### How much time(on average) do churned users spend on phone during daytime ?","09ab508f":"### Indexing and retrieving data","d6720de5":"#### we can add a column without creating an intermediate series instance:","df8fe4fb":"#### we can also use the 'replace' method. \n#### replace the 'yes' & 'no' of 'voice mail plan' to 'true' & 'false'","96dbeaa9":"### Grouping\n#### Syntax : df.groupby(by=grouping_columns)[columns_to_show].function()\n#### 1. First, the groupby method divides the grouping_columns by their values. They become a new index in the resulting dataframe.\n#### 2. Then, columns of interest are selected (columns_to_show). If columns_to_show is not included, all non groupby clauses will be included.\n#### 3 Finally, one or several functions are applied to the obtained groups per selected columns.\n#### Example : we group the data according to the values of the 'churn' variable and display statistics of three columns in each group:","0ffe4815":"## Telecom churn - Exploratory data analysis","f3e94b05":"#### It's time to see the relation between the international plan and 'many intenational calls'","3ec2541b":"#### The apply method can be used to apply a function to each row. To do this, specify axis=1. Lambda functions are very convenient in such scenarios.","81ee728d":"#### printing the last line of data frame ","048055f1":"#### How to replace values in a column ? \n#### This can be done by using map method ( by passing a dictionary of the form {old_value : new_value} as its argument","a1dfd77c":"### Summary Tables\n#### By using the 'crosstab' method we can build a contingency table\n#### For example : we will see how the observations in our sample are distributed in the contex of two variables ( 'churn' & 'international plan')","4230f609":"### DataFrame Transformations","e03a240d":"#### Let us see the relation between 'churn' & 'voice mail plan'","6599f15a":"#### Let us replace 'yes' & 'no' status of 'international plan' with 'True' & 'False'","8cb5ddca":"#### Let us drop the some rows","df5ad5fc":"#### Boolean Indexing"}}