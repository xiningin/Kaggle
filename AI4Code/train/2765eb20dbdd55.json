{"cell_type":{"30e2313c":"code","50a5794c":"code","62bc9512":"code","b8537cc9":"code","d4ea3d92":"code","2fa197b6":"code","08a077a4":"code","d5e1b16b":"code","7eb07188":"code","836de1e6":"code","2f135a72":"code","121ca5e3":"code","a995e123":"code","f22b8fcd":"code","c1176d0a":"code","95711172":"markdown","56140fc9":"markdown","5de7d0a1":"markdown","d3ae527b":"markdown","d0bbed89":"markdown","7749b42c":"markdown","77c0e50e":"markdown","be996d4b":"markdown","c5e8c0b5":"markdown","5edfbd64":"markdown","51c84f96":"markdown"},"source":{"30e2313c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport os\nprint(os.listdir(\"..\/input\"))","50a5794c":"df=pd.read_csv('..\/input\/iba-ml2-mid-project\/train.csv', index_col='Id')","62bc9512":"df.head()","b8537cc9":"print('Number of observations: '+ str(df.shape[0]))\nprint('Number of features: ' + str(df.shape[1]))","d4ea3d92":"df.isnull().sum()\/df.shape[0]*100 #shows how many percentage of observations are null data","2fa197b6":"fig, axes=plt.subplots(figsize=(10,8))\nsns.heatmap(df.isnull(), yticklabels=False, cbar=False, cmap='viridis')","08a077a4":"fig ,ax= plt.subplots(figsize=(7,7))\n# create data\nnames=['No', 'Yes']\nsize=[df['defaulted_on_loan'].value_counts()[0],df['defaulted_on_loan'].value_counts()[1]]\n\ncolor_list = ['mediumvioletred','navy']\ntotal_observations=len(df['defaulted_on_loan'])\n\ntext = f'Total\\n{total_observations}'\n# Create a pieplot\nax.pie(size, labels=names, colors=color_list,wedgeprops = { 'linewidth' : 8, 'edgecolor' : 'white' },\n       autopct='%1.1f%%')\n# add a circle at the center to transform it in a donut chart\nmy_circle=plt.Circle( (0,0), 0.75, color='white')\nkwargs = dict(size=20, fontweight='bold', va='center')\nax.text(0, 0, text, ha='center', **kwargs)\nax.set_title('Target Default on Loan', size=16, color='dimgrey')\nax.add_artist(my_circle)\nplt.show()","d5e1b16b":"df.info()","7eb07188":"df['credit_line_utilization']=pd.to_numeric(df['credit_line_utilization'], errors='coerce') #converting \/\n# credit_line_utilization column from object to numeric.","836de1e6":"df.describe()","2f135a72":"sns.displot(df['age'], kde=True, color='g')","121ca5e3":"#This part of the code shows if there are correlations between columns. High correlated columns\n#are dropped for better estimations\nfig, ax = plt.subplots(figsize=(20, 10))\ncmap = sns.diverging_palette(230, 20, as_cmap=True)\nsns.heatmap(df.corr(), square=True, cmap=cmap)","a995e123":"fig, axes=plt.subplots(1,2,figsize=(12,5))\n\nsns.countplot(x=\"number_dependent_family_members\", data=df,hue='defaulted_on_loan', palette='plasma', ax=axes[0])\nsns.countplot(x=\"number_of_previous_late_payments_up_to_59_days\", data=df,hue='defaulted_on_loan', palette='plasma',ax=axes[1])\n","f22b8fcd":"Numerical_cols=['age', 'number_dependent_family_members', 'monthly_income', 'number_of_credit_lines',\n            'ratio_debt_payment_to_income', 'credit_line_utilization', \n               'number_of_previous_late_payments_up_to_59_days', 'number_of_previous_late_payments_up_to_89_days',\n               'number_of_previous_late_payments_90_days_or_more', 'real_estate_loans']","c1176d0a":"fig, axes=plt.subplots(1,3,figsize=(15,5))\n\nsns.countplot(x=\"number_of_previous_late_payments_up_to_59_days\", data=df, palette='plasma', ax=axes[0])\nsns.countplot(x=\"number_of_previous_late_payments_up_to_89_days\", data=df, palette='plasma',ax=axes[1])\nsns.countplot(x=\"number_of_previous_late_payments_90_days_or_more\", data=df, palette='plasma',ax=axes[2])\n","95711172":"From the analysis of defaulted_on_loan data, we can see that data has not been evenly distributed. So, to use either KFold or StratifiedKFlod cross-validation techniques are important to have better fit model.","56140fc9":"I have set  **'Id'** column as an index column, as it will not add any value to the model and does not influence the final outcome.","5de7d0a1":"# <center> IBA ML2 Mid-project","d3ae527b":"From the overall describtion of features and the following figures, we can see that the average applicant income is 6624$; the minimum is zero and maximum is 1.5million dollars which is amazing=). \n\nThe age distribution follows Gaussian distribution with mean age of 51.4 reaching to 3500 applicants.\n","d0bbed89":"From the the isnull().sum() and heatmap, we can observe that except the 'defaulted_on_loan' column, all columns contain null values from 5% up to 10% of total data. Therefore, these values should be imputed with the selected stratagy ","7749b42c":"From the following figures, we can see that most of the applicants for the loan is people without children and more than 90% of them are rejected. As a percentage wise, people with 2 kids are more likely to obtain the loan from the bank. \n\nFrom the graph in the right, we can observe that very small percentage of the perope who has late payments exceeding 3 can obtain loan from the bank. However, 1 or 2 late payments do not decrease the loan probability significantly.","77c0e50e":"There are certain very high correlations (as expected to me) among **number_of_previous_late_payments_up_to_59_days** and **number_of_previous_late_payments_up_to_89_days** and **number_of_previous_late_payments_90_days_or_more**. It means that only one of them can be used in modelling the defaul_on_loan values.\n\nAnother correlation appears between **real_estate_loans** and **number_of_credit_lines**. This is also expected result, as real estate loan is probably subset of credit lines. But for now, I will keep both columns in the analysis","be996d4b":"From these figures, we can clearly see that there are some outliers in **number_of_previous_late_payments_up_to_59_days**, **number_of_previous_late_payments_up_to_89_days** and  **number_of_previous_late_payments_90_days_or_more** columns which should be dropped to eliminate any discrepancy in the model.","c5e8c0b5":"From the data info, we can clearly observa that most of the features are numberical features being fload and integer. \nAlthough **Credit_line_utilization** column is numberical column, it has been given as object. Therefore, we should make it numerical with the following code.\n\nBesides, it is possible to consider real_estate_loans, number_of_previous_late_payments_up_to_59_days, number_of_previous_late_payments_up_to_89_days and number_of_previous_late_payments_90_days_or_more columns as categorical columns as there values are discrete. However, after cheking possibility to consider these columns as categorical variables, I observed that the model accuracy has dropped slightly. So, I decided to kept them as categorical values.","5edfbd64":"It can be seen that there are more than 72000 observations in the dataset. \nThere are also 10 feature - categories and one target features which is called **'defaulted_on_loan'**.","51c84f96":"# Exploratory Data Analysis"}}