{"cell_type":{"81616c62":"code","51210c88":"code","dface169":"code","c639b54e":"code","8cc36f31":"code","a93c59d5":"code","34aa173d":"code","38bfef03":"code","3d87c046":"code","2dd8959b":"code","895d38ff":"code","199e41ef":"code","159ac731":"code","5be4eede":"code","76227625":"code","9feb3460":"code","07a4a1d4":"code","4e6dbe17":"code","69245a67":"code","4be41f6c":"code","34374eeb":"code","5376784a":"code","189a406e":"code","2a579a24":"code","a366440e":"code","2b03e2a8":"code","1a5ae73b":"code","0b3d41f4":"code","002cb3f6":"code","31b669c5":"code","259b0878":"code","e0c609ef":"code","73fc7e20":"code","5eb0dea0":"code","e4dc7bd4":"code","5b77d1db":"code","b3223d9e":"code","ef65ce2e":"markdown","d97c1548":"markdown","43431af3":"markdown","fd257014":"markdown","42a75080":"markdown","346e80a8":"markdown","6c7c58b8":"markdown","1e7e38fc":"markdown","a2eec864":"markdown","7355a735":"markdown","6a5109fb":"markdown","90be45de":"markdown","45e0c094":"markdown","fa26a5a4":"markdown","10ff41f6":"markdown"},"source":{"81616c62":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","51210c88":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go","dface169":"url='..\/input\/cristiano-ronald-vs-lionel-messi-weekly-updated\/cristiano_vs_messi.csv'\ndf=pd.read_csv(url)","c639b54e":"df.info()","8cc36f31":"df.head(30)","a93c59d5":"df.columns","34aa173d":"df['comp']=df['comp'].ffill()\ndf['date']=df['date'].ffill()\ndf['round']=df['round'].ffill()\ndf['venue']=df['venue'].ffill()\ndf['opp']=df['opp'].ffill()\ndf.info()","38bfef03":"df['min']=df['min'].apply(lambda x:x.replace(\"'\",''))\ndf['min']=df['min'].apply(lambda x:x.replace(\"+\",''))\ndf['min'].unique()","3d87c046":"df.info()","2dd8959b":"df['min']=pd.to_numeric(df['min'])\ndf['time_class']=df['min'].apply(lambda x:'first_half' if x<=45 else ( 'secound_half' if 45<x<=90 else 'extra_time'))\ndf.head(10)","895d38ff":"df['assist']=df['assisted'].fillna(0)\ndf['solo']=df['assist'].apply(lambda x:'solo' if x==0 else 'assisted')\ndf.head()","199e41ef":"from datetime import date\ndf['date']=pd.to_datetime(df['date'])\n#== \nL = ['year', 'month', 'day', 'dayofweek', 'dayofyear', 'weekofyear', 'quarter']\ndf = df.join(pd.concat((getattr(df['date'].dt, i).rename(i) for i in L), axis=1))","159ac731":"df['dayofweek']=pd.to_numeric(df['dayofweek'])\ndf['dayofweek']=df['dayofweek'].apply(lambda x:x+1)\ndf['dayofweek'].unique()\ndf['goal']=df['goal']=1","5be4eede":"df.head()","76227625":"df['player'].value_counts()","9feb3460":"\ndf_ronaldo=df.loc[df['player']=='ronaldo']\ndf_messi=df.loc[df['player']=='messi']\n#===== \nronaldo_solo=df_ronaldo[df_ronaldo['solo']=='solo'] \nronaldo_assisted=df_ronaldo[df_ronaldo['solo']=='assisted'] \nslices=[len(ronaldo_solo),len(ronaldo_assisted)]\nlabels=['solo','assisted']\n#==== \nmessi_solo=df_messi[df_messi['solo']=='solo'] \nmessi_assisted=df_messi[df_messi['solo']=='assisted'] \nslices1=[len(messi_solo),len(messi_assisted)]\nlabels1=['solo','assisted']\n#===\nfig, axes = plt.subplots(1, 2, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi\/Solo&assisted')\naxes[0].pie(slices,labels=labels,startangle=90,shadow=1,explode=(0,0.4),autopct='%1.2f%%',colors=['#808080','#F2EBED']);\naxes[0].set_title('Cristiano Ronaldo')\naxes[1].pie(slices1,labels=labels1,startangle=90,shadow=1,explode=(0,0.4),autopct='%1.2f%%',colors=['#7868DF','#DF6870']);\naxes[1].set_title('Lionel Messi');","07a4a1d4":"r_goal=pd.DataFrame(df_ronaldo['date'].value_counts().sort_values(ascending=False))\nr_goal['nick']=r_goal['date'].apply(lambda x:'hatrick' if x==3 else ('haul' if x==4 else ('glut' if x==5 else ('brace' if x ==2 else 'single goal'))))\nr_goal.head()","4e6dbe17":"m_goal=pd.DataFrame(df_messi['date'].value_counts().sort_values(ascending=False))\nm_goal['nick']=m_goal['date'].apply(lambda x:'hatrick' if x==3 else ('haul' if x==4 else ('glut' if x==5 else ('brace' if x ==2 else 'single goal'))))\nr_goal['player']='ronaldo'\nm_goal['player']='messi'\n#=== \nall_goal = r_goal.append(m_goal).reset_index()\nall_goal.rename(columns={'date':'goal_count'},inplace=True)","69245a67":"fig = px.box(all_goal, x=\"player\", y='goal_count')\nfig.show()","4be41f6c":"plt.figure(figsize=(10,7))\nsns.countplot(data=all_goal,x='nick',hue='player',palette='magma').set_title('Cristano Vs Messi (Goals in one Match)');","34374eeb":"plt.figure(figsize=(10,7))\nsns.countplot(data=df,x='player',hue='venue',palette=\"Paired\").set_title('Cristano Vs Messi (Home & Away)');","5376784a":"plt.figure(figsize=(25,7))\nsns.countplot(data=df,x='type',hue='player',palette=\"hls\").set_title('Cristano Vs Messi (Goal Type)');","189a406e":"plt.figure(figsize=(25,7))\nsns.countplot(data=df,x='pos',hue='player',palette=\"cubehelix\").set_title('Cristano Vs Messi (Goalposition)');","2a579a24":"r_assist =df_ronaldo['assisted'].value_counts()\nr_assist = r_assist[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nr_assist_vis = sns.barplot(r_assist.index, r_assist.values, alpha=0.8,palette='winter');\nplt.title('Most Player assisted to cristiano',fontsize=15);\nplt.ylabel('assists', fontsize=12);\nplt.xlabel('player name', fontsize=12);\nr_assist_vis.set_xticklabels(rotation=30,labels=r_assist.index,fontsize=15);\nplt.show();","a366440e":"m_assist =df_messi['assisted'].value_counts()\nm_assist = m_assist[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nm_assist_vis = sns.barplot(m_assist.index, m_assist.values, alpha=0.8,palette=\"coolwarm\");\nplt.title('Most Player assisted to messi',fontsize=15);\nplt.ylabel('assists', fontsize=12);\nplt.xlabel('player name', fontsize=12);\nm_assist_vis.set_xticklabels(rotation=30,labels=m_assist.index,fontsize=15);\nplt.show();","2b03e2a8":"r_op =df_ronaldo['opp'].value_counts()\nr_op = r_op[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nr_op_vis = sns.barplot(r_op.index, r_op.values, alpha=0.8,palette=\"dark\");\nplt.title('cristiano favourite opponents',fontsize=15);\nplt.ylabel('Goals', fontsize=12);\nplt.xlabel('opponet', fontsize=12);\nr_op_vis.set_xticklabels(rotation=30,labels=r_op.index,fontsize=15);\nplt.show();","1a5ae73b":"m_op =df_messi['opp'].value_counts()\nm_op = m_op[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nm_op_vis = sns.barplot(m_op.index, m_op.values, alpha=0.8,palette=\"Spectral\");\nplt.title('messi favourite opponents',fontsize=15);\nplt.ylabel('Goals', fontsize=12);\nplt.xlabel('opponet', fontsize=12);\nm_op_vis.set_xticklabels(rotation=30,labels=m_op.index,fontsize=15);\nplt.show();","0b3d41f4":"min_ronaldo1=df_ronaldo.groupby(['min']).size().to_frame('count').reset_index()\nmin_ronaldo=min_ronaldo1.sort_values(by='count', ascending=False)[:10]\nmin_ronaldo=min_ronaldo.reset_index()\nmin_ronaldo=min_ronaldo.rename(columns={'min':('Ronald_min')})\nmin_ronaldo=min_ronaldo.drop(columns=['index'])\n#=====\n#=====\nmin_messi=df_messi.groupby(['min']).size().to_frame('count').reset_index()\nmin_messi=min_messi.sort_values(by='count', ascending=False)[:10]\nmin_messi=min_messi.reset_index()\nmin_messi=min_messi.rename(columns={'min':('messi_min')})\nmin_messi=min_messi.drop(columns='index')\n#==== \nmin_ronaldo","002cb3f6":"min_messi","31b669c5":"min_cr7=df_ronaldo[df_ronaldo['min']<90]\nmin_values=min_cr7['min'].values\n#========\nmin_messi=df_messi[df_messi['min']<90]\nmin_values_messi=min_messi['min'].values\nmin_values_messi\n#=== \n#figure,axes = plt.subplots(1,2,figsize=(10,5))\nplt.figure(figsize=(15,5))\nplt.hist(min_values,histtype='bar',bins=45,density=True,label='Ronaldo',alpha=0.5);\nplt.hist(min_values_messi,bins=45,histtype='bar',density=True,label='Messi',alpha=0.5);\nplt.legend(loc='upper left')","259b0878":"plt.figure(figsize=(14,7))\nsns.kdeplot(min_values, shade = True)\nsns.kdeplot(min_values_messi, shade = True)\nplt.legend(['Cristiano','Messi'])\nplt.xlabel('Home Factor')","e0c609ef":"df_stack = pd.pivot_table(df, values='goal', index=['player'],\n                    columns=['time_class'], aggfunc=np.sum).reset_index()\ndf_stack","73fc7e20":"sns.set_style(\"darkgrid\")\nfig, axes = plt.subplots(1, 3, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi\/TimeClass')\n\nsns.barplot(ax=axes[0], x=df_stack.player, y=df_stack.first_half,palette='icefire')\naxes[0].set_title('First Half')\nsns.barplot(ax=axes[1], x=df_stack.player, y=df_stack.secound_half,palette='icefire')\naxes[1].set_title('Secound Half')\nsns.barplot(ax=axes[2], x=df_stack.player, y=df_stack.extra_time,palette='icefire')\naxes[2].set_title('Extra Time')","5eb0dea0":"df['comp'].unique()","e4dc7bd4":"df_champ=df.loc[df['comp']=='Champions League']\n#==== \ndf_champ['player'].value_counts()","5b77d1db":"from IPython.core.display import HTML\nHTML('''<div class=\"flourish-embed flourish-bar-chart-race\" data-src=\"visualisation\/4882308\" data-url=\"https:\/\/flo.uri.sh\/visualisation\/4882308\/embed\"><script src=\"https:\/\/public.flourish.studio\/resources\/embed.js\"><\/script><\/div>''')","b3223d9e":"fig, axes = plt.subplots(1, 2, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi')\n\nsns.countplot(ax=axes[0],data=df,x='dayofweek',hue='player',palette=\"hls\")\naxes[0].set_title('DayofWeek')\nsns.countplot(ax=axes[1],data=df,x='quarter',hue='player',palette=\"hls\")\naxes[1].set_title('quarter')\n","ef65ce2e":"![](https:\/\/cdn.kickoff.com\/cms2\/image_manager\/uploads\/News\/683736\/7\/default.jpg)","d97c1548":"# Conclusion \n\n* Ronaldo Score more goals than Messi \n* Ronaldo solo goal percentage is 3% higher than Messi\n* Ronaldo score single goals more than Messi but Messi score more brace and hatricks\n* Cristiano scored more in away matches but Messi scored more in home\n* Cristiano Ronaldo Score more headers, long-distance, counter-attack goal and penalties more than Messi \n* Lionel Messi Scored many goals in many positions in the squad contrary to Cristiano\n* Ronaldo Scored more in UEFA\n* Messi and Cristiano Scored more against the same team which is Sevilla \n* Messi Scored more in the last minutes and extra times \n* Messi started the season better than Ronaldo but Ronaldo end it better ","43431af3":"## Best Friends to Cristiano and Messi ","fd257014":"# Scoring time","42a75080":"# UEFA","346e80a8":"# Home & Away goals","6c7c58b8":"# fill nan goals values \n### if player score more than one goal on game only min and type filled ","1e7e38fc":"# import","a2eec864":"## Goal Type","7355a735":"# Manipulate","6a5109fb":"## favourite opponent","90be45de":"# Goals Race for each season - 2020","45e0c094":"## Goals in one Match","fa26a5a4":"# Goals","10ff41f6":"![](https:\/\/e00-marca.uecdn.es\/assets\/multimedia\/imagenes\/2019\/12\/08\/15758326013710.jpg)"}}