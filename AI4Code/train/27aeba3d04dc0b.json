{"cell_type":{"d986cebe":"code","f531873a":"code","4097b775":"code","b903d1c7":"markdown","fcd703c0":"markdown","6acef213":"markdown","ee09bb82":"markdown"},"source":{"d986cebe":"import networkx as nx\nimport pandas as pd\nimport numpy as np \nfrom matplotlib.lines import Line2D\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n","f531873a":"korea_south=pd.read_csv('\/kaggle\/input\/coronavirusdataset\/PatientInfo.csv',dtype=str)\nregion_ks=pd.read_csv('\/kaggle\/input\/coronavirusdataset\/Region.csv')\n\nkorea_south_region=pd.merge(korea_south,region_ks,on=['province','city'],how='inner')\nkorea_south_region['city_top_5']=np.where(korea_south_region.city.isin(['Cheonan-si','Bucheon-si',\n                                                                            'Seongnam-si','Gyeongju-si',\n                                                                            'Gunpo-si']),korea_south_region.city,'other_city')\nkorea_south_region['elementary_school_agg']=(korea_south_region['elementary_school_count']\/20).apply(int)*20\nkorea_south_region['kindergarten_agg']=(korea_south_region['kindergarten_count']\/20).apply(int)*20\nkorea_south_region['nursing_home_agg']=(korea_south_region['nursing_home_count']\/500).apply(int)*500\n\nkorea_south_region_2=korea_south_region[korea_south_region['infected_by'].isin(korea_south_region['patient_id'])]\nkorea_south_region_2=korea_south_region_2[korea_south_region_2['infected_by']!='2000000205']\nkorea_south_region_2.shape\n","4097b775":"\ndef create_network(korea_south_region_2,variable):\n    #sns.palplot(current_palette)\n    df=korea_south_region_2[~korea_south_region_2[variable].isnull()]\n    #df.color.value_counts()\n    G = nx.from_pandas_edgelist(df,'patient_id', 'infected_by',create_using=nx.Graph())#, edge_attr='age')\n    #G.add_nodes_from(nodes_for_adding=df.patient_id.tolist())\n    a=pd.DataFrame(G.nodes())\n    a.columns=['patient_id']\n\n    c=pd.merge(a,korea_south_region,on='patient_id',how='left')\n\n    b=pd.DataFrame(c[variable].value_counts()).reset_index()\n    b.columns=[variable,'freq']\n    b=b.sort_values(variable)\n    current_palette = sns.color_palette(\"bright\",len(b))\n    b['color']=current_palette\n\n    #print(b)\n\n    c=pd.merge(c,b,on=variable,how='left')\n\n    c['color']=c['color'].fillna('grey')\n\n    # Thus, we cannot give directly the 'myvalue' column to netowrkX, we need to arrange the order!\n\n    # Here is the tricky part: I need to reorder carac, to assign the good color to each node\n    # Plot it, providing a continuous color scale with cmap:\n    custom_lines =[]\n    text_legend=[]\n    for i in range(len(b)):\n        custom_lines.append(Line2D([0], [0], color=b['color'].iloc[i], lw=2))\n        text_legend.append(b[variable].iloc[i])\n\n    fig, ax = plt.subplots()\n\n    ax.legend(custom_lines, text_legend,fontsize=6)\n\n    #nx.draw_networkx_labels(G,pos,labels,font_size=16)\n    nx.draw(G, with_labels=False, node_color=c.color, node_size=4)#,alpha=0.8)\n    #write_dot(G, 'file.dot')\n\n    #optinonal for see it bigger \n    #plt.savefig(variable+\"_south_korea.png\",dpi=1200)\ncreate_network(korea_south_region_2,'sex')\ncreate_network(korea_south_region_2,'age')\ncreate_network(korea_south_region_2,'city_top_5')\ncreate_network(korea_south_region_2,'elementary_school_agg')\ncreate_network(korea_south_region_2,'kindergarten_agg')\ncreate_network(korea_south_region_2,'university_count')\ncreate_network(korea_south_region_2,'nursing_home_agg')","b903d1c7":"Aknowledge to Data Science for COVID-19 (DS4C)\n\n**Abstract**\n\n- In this linkage analysis of South Korea data it can be seen that women create larger clusters of virus spread than men. \n- In this South Korea data having the possibility of nurses assisting homes creates fewer spreading segments.","fcd703c0":"Plot a link network","6acef213":"https:\/\/www.linkedin.com\/in\/abel-buritic%C3%A1-4b04553b\/","ee09bb82":"Create DataSet"}}