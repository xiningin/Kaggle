{"cell_type":{"1f2501c8":"code","bea594ea":"code","582877ee":"code","dab9ea61":"code","42eecf9c":"code","21389925":"code","e302b584":"code","8d7fe7c7":"code","ae77e298":"code","7c5b7821":"code","ce7d4dd8":"code","bbc69d9b":"code","93f94762":"code","09d62542":"code","61bbae9d":"code","5681a4f6":"code","611beade":"code","e3959b65":"code","a93abc1e":"code","925c92ae":"code","8071d901":"code","0d1a3577":"code","9da7cd98":"code","bd6dd346":"code","ae12756e":"code","1048734e":"code","4605368c":"code","d41a21fd":"code","a2ada075":"code","e782f398":"code","ef8ea6bd":"code","e28dec3d":"code","8f983669":"code","0625f0cc":"code","8dcdf62a":"code","0f122400":"code","244089fd":"markdown","326dfa27":"markdown","a4de3b86":"markdown","8a0a8885":"markdown","9e30508e":"markdown","fbfd638d":"markdown","d6b0cfe9":"markdown","78b0bc00":"markdown","c49fe027":"markdown","50ddbd0b":"markdown","a2c96a97":"markdown","081c1453":"markdown","8f0a7e83":"markdown","6f221bf8":"markdown","175bc375":"markdown"},"source":{"1f2501c8":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly\nimport plotly.graph_objects as go\nimport plotly.express as px\n# import os\n# for dirname, _, filenames in os.walk('\/kaggle\/input'):\n#     for filename in filenames:\n#         print(os.path.join(dirname, filename))\n\ndef plot_hist(df:pd.DataFrame, column:str, color:str)->None:\n    plt.figure(figsize=(8, 6))\n    sns.displot(data=df, x=column, color=color, height=7, aspect=2)\n    plt.title(f'Distribution of {column}', size=22, fontweight='bold')\n    plt.show()\ndef mode_fill(df, column):\n    mode = df[column].mode()[0]\n    df[column] = df[column].fillna(mode)\n    return df","bea594ea":"#load data\ndistricts_info=pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nproducts_info=pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')\nPATH='..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data'","582877ee":"districts_info.head(3)","dab9ea61":"districts_info.info()","42eecf9c":"# Null values \nprint(\"Percentage of Nulls per column\\n\", districts_info.isnull().sum()*100\/districts_info.shape[0])","21389925":"districts_info[districts_info.state.isnull()].head(8)","e302b584":"districts_info=districts_info[districts_info['state'].notna()]","8d7fe7c7":"plot_hist(districts_info,'locale', 'blue')","ae77e298":"plt.figure(figsize=(13,8))\nplt.title('Distribution of state')\nsns.countplot(y ='state', data = districts_info, order = districts_info['state'].value_counts().index)","7c5b7821":"plot_hist(districts_info,'pct_black\/hispanic', 'green')","ce7d4dd8":"districts_info=mode_fill(districts_info,'pct_free\/reduced')\nplot_hist(districts_info,'pct_free\/reduced', 'blue')","bbc69d9b":"districts_info=mode_fill(districts_info,'pp_total_raw')\nplot_hist(districts_info,'pp_total_raw', 'blue')","93f94762":"# districts_info=mode_fill(districts_info,'county_connections_ratio')\n# plot_hist(districts_info,'county_connections_ratio', 'blue')\ndistricts_info['county_connections_ratio'].value_counts()","09d62542":"products_info.head()","61bbae9d":"products_info.info()","5681a4f6":"print('percentage of null values per column\\n',products_info.isnull().sum()\/products_info.shape[0])","611beade":"products_info.dropna(inplace=True)","e3959b65":"# plot_hist(products_info, 'Sector(s)','green')\nplt.figure(figsize=(10, 6))\nproducts_info['Sector(s)'].value_counts().plot(kind='pie', autopct='%.2f%%')","a93abc1e":"#Group by Provider\/Company Name\n\ndf = products_info[['Provider\/Company Name','LP ID']].groupby('Provider\/Company Name').count().sort_values(by='LP ID',ascending=False)\ndf = df.iloc[:10]\n_= sns.barplot(x=df['LP ID'],y=df.index)\nplt.xlabel('count')","925c92ae":"# load all files in engagement_data folder\nall_files=[]\nfor district in districts_info.district_id.unique():\n    df=pd.read_csv(f'{PATH}\/{district}.csv')\n    df[\"district_id\"]=district\n    all_files.append(df)\nengagement = pd.concat(all_files)\nengagement = engagement.reset_index(drop=True)","8071d901":"engagement.head()","0d1a3577":"engagement.info()","9da7cd98":"#change time column to datetime type\nengagement.time = pd.to_datetime(engagement.time)","bd6dd346":"engagement=engagement[engagement.engagement_index.notna()]","ae12756e":"engagement.isnull().sum()","1048734e":"all_data=engagement.merge(districts_info,how='inner')\n","4605368c":"products_info['LP ID']=products_info['LP ID'].astype('float')\nproducts_info.rename({'LP ID': 'lp_id'}, axis=1, inplace=True)\nall_data=all_data.merge(products_info, how='inner')","d41a21fd":"all_data.to_csv('all_data.csv',index=False)","a2ada075":"all_data.head()","e782f398":"def find_agg(df:pd.DataFrame,agg_column:str, wanted_col:str,agg_metric:str, col_name:str, order=False )->pd.DataFrame:\n    \"\"\" This function calculates aggregate of column \"\"\"\n    new_df = df.groupby(agg_column)[wanted_col].agg(agg_metric).reset_index(name=col_name).\\\n    sort_values(by=col_name, ascending=order)\n    return new_df","ef8ea6bd":"Avg_engagement_index=find_agg(all_data,\"state\",\"engagement_index\" ,\"sum\", \"Avg_engagement_index\",order=False )","e28dec3d":"def plot_bar(data,x,y,title):\n    plt.figure(figsize=(16,8))\n    sns.barplot(data=data,x=x,y=y)\n    plt.xticks(rotation=90, size=14)\n    plt.xlabel(None)\n    plt.title(title, size=20)\n    plt.show()\nplot_bar(Avg_engagement_index, 'state','Avg_engagement_index',\"Total page-load events per one thousand students in 2020\")","8f983669":"Avg_pct_access=find_agg(all_data,\"state\",\"pct_access\" ,\"sum\", \"Avg_pct_access\",order=False )","0625f0cc":"plot_bar(Avg_pct_access, 'state','Avg_pct_access',\"Total percentage of students in state have at least one page-load in 2020 \")","8dcdf62a":"all_data.time= pd.to_datetime(all_data.time, format = '%Y-%m-%d')","0f122400":"eng = all_data.groupby('time').agg({'engagement_index':'mean','pct_access':'mean'}).reset_index()\neng.set_index('time',inplace=True)\neng['engagement_index'].plot(linestyle='solid',title='Engagement index 2020',figsize=(10,8),sharey=False,legend=False)\nplt.show()","244089fd":"# Engagement data","326dfa27":"# Data Overview\n#### The following three basic sets of files are provided for this competition :\n\n* The engagement_ data folder is based on LearnPlatform\u2019s Student Chrome Extension. The extension collects page load events of over 10K education technology products in our product library, including websites, apps, web apps, software programs, extensions, ebooks, hardwares, and services used in educational institutions. The engagement data have been aggregated at school district level, and each file represents data from one school district.\n* The products_info.csv file includes information about the characteristics of the top 372 products with most users in 2020.\n* The districts_info.csv file includes information about the characteristics of school districts, including data from NCES and FCC.\n* But it's also encouraged to use publicly available data\n[COVID-19 US State Policy database](https:\/\/www.openicpsr.org\/openicpsr\/project\/119446\/version\/V75\/view;jsessionid=851ECB80E6CB42252D396C29564184DC), [KIDS Count](https:\/\/www.aecf.org\/resources\/2020-kids-count-data-book\/?gclid=CjwKCAiAudD_BRBXEiwAudakXyXtNK90IAicHQ5T3kT12l4TdJYfAQsYsHlMPNJLZnETp0XgshKE4xoC2UcQAvD_BwE), [KFF](https:\/\/www.kff.org\/coronavirus-covid-19\/issue-brief\/state-covid-19-data-and-policy-actions\/) and others.","a4de3b86":"# Products_info","8a0a8885":"Most of the school districts belong to Suburb lacale classification","9e30508e":"packages and helper functions","fbfd638d":"# Top 10 products with most users","d6b0cfe9":"All Null values in the engagement_index have 0 values. So these rows will not provide insights about user engagement.","78b0bc00":"#### The first American covid-19 case was reported on January 20, and President Donald Trump declared the US outbreak a public health emergency on January 31.We can see that the engagement to digital learning increasing around the end of January, decreased at June, July and Augest( summer time) and increased again after the summer time.","c49fe027":"#### Merge all data to get deep information","50ddbd0b":"## Objective","a2c96a97":"<h1 align='center'> Impact of COVID-19 on Digital Learning<\/h1>\n<img align='center' src=\"https:\/\/i0.wp.com\/oecd-development-matters.org\/wp-content\/uploads\/2021\/05\/Africa-covid-19-education-DevMatters.jpg?resize=458%2C305&ssl=1\" >","081c1453":"## districts_info data","8f0a7e83":"The purpose is to explore\n* the state of digital learning in 2020 and \n* how the engagement of digital learning relates to factors such as district demographics, broadband access, and state\/national level policies and events.","6f221bf8":"[](https:\/\/www.google.com\/url?sa=i&url=https%3A%2F%2Fwww.cepal.org%2Fen%2Fpublications%2F45905-education-time-covid-19&psig=AOvVaw2fAUeb-QoWXElsE-7TkyjF&ust=1630819272584000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCNCB-K_J5PICFQAAAAAdAAAAABAD)","175bc375":"As we can see below, rows which have null values in the state column are also null in the other columns. Since we can't extract insights from these rows,we can drop them. "}}