{"cell_type":{"65d55240":"code","f4714627":"code","c67d8ae5":"code","8d3a598c":"code","57ef90f9":"code","e7ab636f":"code","9031b869":"code","601c8a7f":"code","be097505":"code","3fbcd7e9":"code","06165200":"code","838d2d17":"code","02f5aa2e":"code","1d2f22de":"code","bfa52588":"code","bc2a4e41":"code","d0d0a2e2":"code","7c9dd3b2":"code","79749027":"code","9c33131f":"code","5df00b23":"code","554d117c":"code","9b591f66":"code","4111f6df":"code","92fde35c":"code","85a972bb":"code","926cb18a":"code","03576c9d":"code","9d45fa6a":"code","6daa9c88":"code","16affc2c":"code","b7d75af1":"code","d5439f97":"code","1792ae05":"code","af643b6d":"code","af312b0d":"code","faf84cb9":"code","bf4e8ae5":"code","6c7d4d60":"code","bd0e1543":"code","37729d67":"code","c1904f72":"code","a3da87a6":"code","20bb1123":"code","86cd2dd4":"code","c8cbee1d":"code","e0708aa8":"code","222d13ee":"code","cf4ca76b":"code","f860f5b4":"code","130d6204":"code","f3987e0e":"code","d0097dfd":"code","b7c40529":"code","a22fbd84":"code","acb3716d":"code","04db7114":"code","4b6ff579":"code","1b048f4d":"code","0efd6ddf":"markdown","81938cf8":"markdown","2685479b":"markdown","9b41517c":"markdown","049833be":"markdown","ebddf9ef":"markdown","be915fed":"markdown","e6d717a3":"markdown","fe1f42ea":"markdown","46e9ac8f":"markdown","5ecfa2a2":"markdown","aef3e6fe":"markdown","5b8bcdab":"markdown","d52b7f17":"markdown","fd0be174":"markdown"},"source":{"65d55240":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom wordcloud import WordCloud\nimport matplotlib.ticker as ticker\n\nfrom shapely.geometry import Point\nimport geopandas as gpd\nfrom geopandas import GeoDataFrame\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","f4714627":"#Reading the data\n\ndata = pd.read_csv(\"\/kaggle\/input\/anz-banking-data\/ANZ.csv\")","c67d8ae5":"data.head()","8d3a598c":"#Checking the number of unique values\ndata[\"account\"].nunique()","57ef90f9":"#number of date values\ndata[\"date\"].value_counts()","e7ab636f":"#the number of values for customer id\ndata[\"customer_id\"].value_counts()","9031b869":"len(data)","601c8a7f":"#Values of the columns\n\ndata.columns.values","be097505":"#Taking the sum of all transactions over the dates\n\ndate_group = data.groupby('date')[\"amount\"].sum().reset_index()","3fbcd7e9":"date_group.head()","06165200":"#Lineplot of the entire data\n\nplt.figure(figsize=(16, 6))\n\nax=sns.lineplot(y=\"amount\",x=\"date\",data=date_group)\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","838d2d17":"#Transaction volume over the dates by gender\n\ngender_vol = data[[\"date\",\"amount\",\"gender\"]]\ngender_vol.head()","02f5aa2e":"gender_data = gender_vol.groupby(['date',\"gender\"])[\"amount\"].sum().reset_index()\ngender_data","1d2f22de":"#Lineplot\n\nplt.figure(figsize=(16, 6))\nax=sns.lineplot(y=\"amount\",x=\"date\",hue=\"gender\",data=gender_data)\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","bfa52588":"#Mean transaction over the dates by Gender\n\ngender_mean = data.groupby([\"date\",\"gender\"])[\"amount\"].mean().reset_index()\ngender_mean.head()","bc2a4e41":"#Lineplot for the data\n\nplt.figure(figsize=(16, 6))\nax=sns.lineplot(y=\"amount\",x=\"date\",hue=\"gender\", data=gender_mean)\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","d0d0a2e2":"#Transaction volume sorted by states\n\nmerchant_state = data.groupby([\"date\",\"merchant_state\"])[\"amount\"].sum().reset_index()\nmerchant_state.head()","7c9dd3b2":"#Lineplot for the data\n\nplt.figure(figsize=(16, 10))\nax=sns.lineplot(y=\"amount\",x=\"date\",hue=\"merchant_state\", data=merchant_state)\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","79749027":"#mean account balance of all customers\n\nacc_bal_mean= data.groupby([\"date\",'gender'])[\"balance\"].mean().reset_index()\nacc_bal_mean.head(5)","9c33131f":"plt.figure(figsize=(16, 6))\nax=sns.lineplot(y=\"balance\",x=\"date\",data=acc_bal_mean)\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","5df00b23":"plt.figure(figsize=(16, 6))\nax=sns.lineplot(y=\"balance\",x=\"date\",hue=\"gender\",data=acc_bal_mean)\nplt.ylabel(\"Balance [By gender]\")\nax.xaxis.set_major_locator(ticker.LinearLocator(10))","554d117c":"#Mean account balance over the states\n\nacc_bal_state= data.groupby(['merchant_state',\"gender\"])[\"balance\"].mean().reset_index()\nacc_bal_state.head","9b591f66":"#Barplot for the data\n\nplt.figure(figsize=(16, 6))\nsns.barplot(x=\"balance\", y=\"merchant_state\",  data=acc_bal_state)","4111f6df":"#Barplot sorted by gender\n\nplt.figure(figsize=(16, 6))\nsns.barplot(x=\"balance\", y=\"merchant_state\",hue=\"gender\",  data=acc_bal_state)","92fde35c":"#Sum of all transactions sorted by age\n\nage_amount_sum= data.groupby(['age',\"gender\"])[\"amount\"].sum().reset_index()\nage_amount_sum.head()","85a972bb":"#Barplot for the data\n\nplt.figure(figsize=(16, 6))\nsns.barplot(y=\"amount\", x=\"age\",  data=age_amount_sum)","926cb18a":"#Barplot with hue parameter for gender\n\nplt.figure(figsize=(16, 6))\nsns.barplot(y=\"amount\", x=\"age\", hue=\"gender\" ,data=age_amount_sum)","03576c9d":"#Mean of transaction values by age\n\nage_amount_mean= data.groupby(['age',\"gender\"])[\"amount\"].mean().reset_index()\nage_amount_mean.head()","9d45fa6a":"#Barplot for that data\n\nplt.figure(figsize=(16, 6))\nsns.barplot(y=\"amount\", x=\"age\",  data=age_amount_mean)\n","6daa9c88":"#Barplot with Gender as a Hue\n\nplt.figure(figsize=(16, 6))\nsns.barplot(y=\"amount\", x=\"age\", hue=\"gender\", data=age_amount_mean)","16affc2c":"#Analysis of debit\/credit\n\ndebit_credit= data.groupby([\"movement\",\"gender\"])[\"amount\"].mean().reset_index()\ndebit_credit","b7d75af1":"plt.figure(figsize=(8, 6))\nsns.barplot(y=\"amount\", x=\"movement\", hue=\"gender\", data=debit_credit)","d5439f97":"#By age\n\ndc_age_total= data.groupby([\"movement\",\"age\"])[\"amount\"].sum().reset_index()\ndc_age_total.head()","1792ae05":"#Barplot according to age\n\nplt.figure(figsize=(12, 10))\nsns.barplot(y=\"amount\", x=\"movement\", hue=\"age\", data=dc_age_total)","af643b6d":"#Mean transaction analysis by age\n\ndc_age_mean= data.groupby([\"movement\",\"age\"])[\"amount\"].mean().reset_index()\ndc_age_mean.head()","af312b0d":"plt.figure(figsize=(12, 10))\nsns.barplot(y=\"amount\", x=\"movement\", hue=\"age\", data=dc_age_mean)","faf84cb9":"#taking relevant data\n\ndf=data[[\"amount\",'merchant_long_lat',\"merchant_suburb\",\"movement\",\"gender\"]]","bf4e8ae5":"df=df.dropna()","6c7d4d60":"df = df.reindex(columns = df.columns.tolist() + ['long','lat'])","bd0e1543":"df.info()","37729d67":"#Extracting the latitude and longitude data\n\nlongitude=[]\nlatitude=[]\n\nfor row in df['merchant_long_lat']:\n    \n    longitude.append(row.split(' ')[0])\n    latitude.append(row.split(' ')[1])\n    \ndf[\"long\"]=longitude\ndf[\"lat\"]=latitude","c1904f72":"#Making the values numeric\n\ndf[[\"long\", \"lat\"]] = df[[\"long\", \"lat\"]].apply(pd.to_numeric)","a3da87a6":"#The maximum ranges in longitude and latitude\n\nranges = ((df.long.min(),   df.long.max(),      \n         df.lat.min(), df.lat.max()))\nprint(ranges)","20bb1123":"#Plotting the transactions over the map of australia\n\ngeometry = [Point(xy) for xy in zip(df['long'], df['lat'])]\ngdf = GeoDataFrame(df, geometry=geometry)   \n\n#selecting australia\nworld = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\n\naus =  world[world.name == \"Australia\"]\n\n\ngdf.plot(ax=aus.plot(figsize=(12, 12)), marker='o', color='black', markersize=20)","86cd2dd4":"gdf.head()","c8cbee1d":"data_cust=data[[\"customer_id\",\"first_name\",\"age\",\"balance\",'amount']]","e0708aa8":"customer=data_cust.groupby([\"customer_id\",\"age\",\"first_name\"])[\"balance\",\"amount\"].mean().reset_index()","222d13ee":"customer","cf4ca76b":"plt.figure(figsize=(16, 10))\nsns.scatterplot(y=\"balance\", x=\"amount\",hue=\"age\", palette=\"Set1\", size=\"age\",sizes=(50,500), data=customer)","f860f5b4":"#KMeans clustering\n\nfrom sklearn.cluster import KMeans","130d6204":"X=customer[[\"balance\",\"amount\"]].values\nX.shape","f3987e0e":"wcss=[]\n\nfor i in range(1,11):\n    km=KMeans(n_clusters=i)\n    km.fit(X)\n    wcss.append(km.inertia_)","d0097dfd":"plt.figure(figsize=(12,6))\nplt.plot(range(1,11),wcss)\nplt.grid()\nplt.plot(range(1,11),wcss, linewidth=2, color=\"red\", marker =\"8\")\nplt.xlabel(\"K Value\")\nplt.xticks(np.arange(1,11,1))\nplt.ylabel(\"WCSS\")\nplt.show()","b7c40529":"#this is known as the elbow graph , the x axis being the number of clusters\n#the number of clusters is taken at the elbow joint point\n#this point is the point where making clusters is most relevant\n#the numbers of clusters is kept at maximum","a22fbd84":"km1=KMeans(n_clusters=3)","acb3716d":"km1.fit(X)","04db7114":"y=km1.predict(X)","4b6ff579":"plt.figure(figsize=(16, 5))\nplt.scatter(X[y==0,1],X[y==0,0],color='red')\nplt.scatter(X[y==1,1],X[y==1,0],color='green')\nplt.scatter(X[y==2,1],X[y==2,0],color='blue')","1b048f4d":"#There seems to be 3 clusters, the large cluster of maximum people with normal financial resources\n#The next cluster with better financial resources\n#The top cluster has only 2 customers with highest financial resources","0efd6ddf":"# Transaction Volume By Gender","81938cf8":"# Account Balance (mean of all customers) for various states (all days average)","2685479b":"# Transaction Volume by merchant state","9b41517c":"# Grouping customers by their Mean Balance and Transaction Amount","049833be":"# Customer Segmentation- 2D","ebddf9ef":"The dataset contains 12043 transactions for 100 customers who have one bank account each. Trasactional period is from 01\/08\/2018 - 31\/10\/2018 (92 days duration). The data entries are unique and have consistent formats for analysis. For each record\/row, information is complete for majority of columns. Some columns contain missing data (blank or NA cells), which is likely due to the nature of transaction. (i.e. merchants are not involved for InterBank transfers or Salary payments) It is also noticed that there is only 91 unique dates in the dataset, suggesting the transaction records for one day are missing (turned out to be 2018-08-16).","be915fed":"# Account Balance (mean of all customers) over the dates","e6d717a3":"# Debit-Credit Transaction Mean analysis By Age","fe1f42ea":"# Mean Transaction by Age\n","46e9ac8f":"# Mean Transaction by Gender","5ecfa2a2":"# Total Transaction by Age","aef3e6fe":"# Debit-Credit Transaction Mean analysis By Gender","5b8bcdab":"# Taking out the map coordinates","d52b7f17":"# Debit-Credit Transaction Sum analysis By Age","fd0be174":"# Transaction Volume over the dates."}}