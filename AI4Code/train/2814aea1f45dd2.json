{"cell_type":{"f9aef4e8":"code","f18cfb81":"code","4f418457":"code","fd9520ec":"code","ce03cd9a":"code","3b462765":"code","19338a40":"code","5b8dbda8":"code","25e2c18f":"code","d4993324":"code","89c4f8ed":"code","07cbdf98":"code","06c0a8eb":"code","cfdf33a3":"code","081fac45":"code","8fe125ee":"code","f342095c":"code","243206ff":"code","07bb6ee8":"code","fd801a87":"code","c1371c6e":"code","2d11be85":"code","509daf0e":"code","da79b03e":"code","b17422c1":"code","b18cd13a":"code","5096ee58":"code","5ee33f03":"code","f5855781":"code","171f51b0":"code","5efd86fa":"code","ea54cec7":"code","d42337ed":"code","edde3e32":"code","70795071":"code","f995dd20":"code","36031256":"code","22cb4320":"code","8b1874b7":"code","47ce889f":"code","7d11f420":"code","11a1f640":"code","b4020fe2":"code","e27cf875":"code","bb295fa2":"code","64b33130":"code","53666946":"code","89379125":"code","a87961df":"code","3f6ed933":"code","dc182803":"code","84432047":"code","e78ea1ed":"code","def1087a":"code","2d67eb28":"code","98ea3a73":"code","9ed07bc5":"code","8cb25866":"code","5c26931a":"code","e61bab86":"code","1b479d73":"code","be99edb6":"code","5a3f2e1a":"code","a281671b":"code","30be3ac3":"markdown","f4e29bb9":"markdown","0bed626b":"markdown","ee7042db":"markdown","e2231cd7":"markdown","bf5d487a":"markdown","ec008e2b":"markdown","91ce3359":"markdown","ff3b6307":"markdown","cc0c545a":"markdown","801dc8c0":"markdown","2468ce29":"markdown","3e60096c":"markdown","6c21de65":"markdown","2a1f8689":"markdown","e69a176b":"markdown","563a0a81":"markdown","5c49be60":"markdown","5f0885ed":"markdown","08d1d7d9":"markdown","376a33a9":"markdown","b1731885":"markdown","e4231d1b":"markdown","fddb6369":"markdown","b7a35673":"markdown"},"source":{"f9aef4e8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","f18cfb81":"# import package\nimport matplotlib.pyplot as plt\nimport seaborn as sns \nimport statsmodels as sm\nimport folium as fl\nfrom pathlib import Path\nfrom sklearn.impute import SimpleImputer\nimport geopandas as gpd\nimport mapclassify as mpc\nimport warnings\nfrom fbprophet import Prophet\nfrom fbprophet.diagnostics import cross_validation\nfrom fbprophet.diagnostics import performance_metrics\nfrom statsmodels.tsa.stattools import grangercausalitytests\nfrom statsmodels.tsa.vector_ar.vecm import coint_johansen\nfrom statsmodels.tsa.vector_ar.var_model import VAR\nimport plotly.offline as py\nimport plotly.express as px\nimport cufflinks as cf","4f418457":"%matplotlib inline\npd.options.plotting.backend\n#pd.plotting.register_matplotlib_converters()\ngpd.plotting.plot_linestring_collection\nsns.set()\nwarnings.filterwarnings('ignore')","fd9520ec":"covidfile = '\/kaggle\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv'","ce03cd9a":"covid19 = pd.read_csv(covidfile, parse_dates=True)","3b462765":"covid19.head(3)","19338a40":"covid19.isnull().sum()[covid19.isnull().sum()>0]","5b8dbda8":"covid19.info()","25e2c18f":"covid19['ObservationDate'] = pd.DataFrame(covid19['ObservationDate'])\ncovid19['currentCase'] = covid19['Confirmed'] - covid19['Recovered'] - covid19['Deaths']","d4993324":"replace = ['Dem. Rep. Congo', \"C\u00f4te d'Ivoire\", 'Congo', 'United Kingdom', 'China','Central African Rep.',\n          'Eq. Guinea','eSwatini','Bosnia and Herz.', 'S. Sudan', 'Dominican Rep.', 'W. Sahara',\n          'United States of America']\n\nname = ['Congo (Kinshasa)', 'Ivory Coast', 'Congo (Brazzaville)', 'UK', 'Mainland China', \n        'Central African Republic', 'Equatorial Guinea', 'Eswatini', 'Bosnia and Herzegovina', 'South Sudan',\n       'Dominica', 'Western Sahara','US']","89c4f8ed":"covid_data = covid19.drop(columns=['Province\/State'])\ncovid_data = covid_data.replace(to_replace=name, value=replace)\n# END Cleaning","07cbdf98":"covid_data.head()","06c0a8eb":"gb_covid = covid_data.groupby('ObservationDate')[['Confirmed', 'Deaths', 'Recovered', 'currentCase']].agg('sum')\nend_date = gb_covid.index.max()","cfdf33a3":"print('========= COVID-19 Worldwide ==============================')\nprint(\"======== Report to date {} ===============\\n\".format(gb_covid.index.max()))\nprint('1- The number of country that are affected by COVID-19: {}'.format(len(covid_data['Country\/Region'].unique())))\nprint('2- Total Confirmed: {}'.format(gb_covid['Confirmed'][gb_covid.index == gb_covid.index.max()].values[-1]))\nprint('3- Total Deaths: {}'.format(gb_covid['Deaths'][gb_covid.index==gb_covid.index.max()].values[-1]))\nprint('4- Total Recovered: {}'.format(gb_covid['Recovered'][gb_covid.index ==gb_covid.index.max()].values[-1]))\nprint('5- Total CurrentCase: {}'.format(gb_covid['currentCase'][gb_covid.index ==gb_covid.index.max()].values[-1]))\nprint('============================================================')","081fac45":"#plot the worldwide covid19\nworld_path_file = gpd.datasets.get_path('naturalearth_lowres') # upload natural data map\nworld = gpd.read_file(world_path_file)\nworld.head(3)","8fe125ee":"geo_merged = world.merge(covid_data[['ObservationDate','Country\/Region','Confirmed','Deaths','Recovered','currentCase']] , \n                     left_on='name', right_on='Country\/Region')","f342095c":"geo_merged.head(3)","243206ff":"geo_merged.info()","07bb6ee8":"geo_merged['ObservationDate'] = pd.DataFrame(geo_merged['ObservationDate'])","fd801a87":"geo_merged.plot(cmap='cividis_r', column='Confirmed', legend=True, figsize=(15,9), scheme='quantiles', k=6)\nplt.title('SARS-Cov 2 in the worldwide')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","c1371c6e":"worldwide = geo_merged.groupby(['ObservationDate','continent'])[['Confirmed','Deaths','Recovered','currentCase']].agg('sum').reset_index()","2d11be85":"worldwide.head(3)","509daf0e":"for c in worldwide.continent.unique():\n    surface = worldwide[worldwide.continent==c]\n    surface = surface.drop(columns='continent')\n    surface.plot(x='ObservationDate',\n    title='SARS Cov 2 confirmed, currentcase, recovered, deaths in {} continent over time'.format(c),\n               figsize=(15,5))\n    plt.ylabel('cummulative')","da79b03e":"daily_case = geo_merged.loc[geo_merged.ObservationDate.isin([end_date])]","b17422c1":"pop_size = daily_case.groupby('continent')['pop_est'].agg('sum')","b18cd13a":"case_size = daily_case.groupby('continent')['Confirmed'].agg('sum')","5096ee58":"print('The number of positive case per population size in each continent at date: {} is:\\n {}'.\\\n      format(end_date, case_size\/pop_size))","5ee33f03":"def determinate_beta_gamma_delta(data=None):\n    '''\n        this function compute transmission rate, recovered rate and fatalities rate over time\n        params: data\n        return: beta, gamma, delta\n    '''\n    \n    beta = []\n    gamma = []\n    delta = []\n    \n    for t in range(len(data.ObservationDate.values)):\n        \n        x = data.Confirmed.iloc[t]\n        y = data.Deaths.iloc[t]\n        z = data.Recovered.iloc[t]\n        w = data.currentCase.iloc[t]\n        \n        if x == 0.0:\n            beta.append(0)\n            gamma.append(0)\n            delta.append(0)\n        else:\n            beta_t = w\/x\n            gamma_t = z\/x\n            delta_t = y\/x\n            \n            beta.append(beta_t)\n            gamma.append(gamma_t)\n            delta.append(delta_t)\n            \n    return np.array(beta), np.array(gamma), np.array(delta)        ","f5855781":"geospatial = geo_merged.groupby(['ObservationDate','name','continent'])['Confirmed','Deaths','Recovered','currentCase'].agg('sum')","171f51b0":"geospa = geospatial.reset_index()","5efd86fa":"geospa.head()","ea54cec7":"transmission, recovery, fatality = determinate_beta_gamma_delta(data=geospa)","d42337ed":"geospa['beta'] = transmission\ngeospa['gamma'] = recovery\ngeospa['delta'] = fatality","edde3e32":"geospa.head()","70795071":"rate_map = geospa.groupby(['ObservationDate','continent'])[['beta','gamma','delta']].agg('mean').reset_index()","f995dd20":"rate_map.head()","36031256":"for c in rate_map.continent.unique():\n    surface = rate_map[rate_map.continent==c]\n    surface = surface.drop(columns='continent')\n    surface.plot(x='ObservationDate',\n    title='SARS Cov 2 transmission rate, recovery rate, delta rate in {} continent over time'.format(c),\n                 figsize=(15,5))\n    plt.ylabel('means rate')","22cb4320":"worldwide[worldwide.continent=='Oceania'].plot(x='ObservationDate',  figsize=(15,5),\n    title='SARS Cov 2 control in {} continent over time'.format('Oceania'),\n                                              )\nplt.ylabel('cummulative')","8b1874b7":"rate_map[rate_map.continent=='Oceania'].plot(x='ObservationDate', \ntitle='SARS Cov 2 transmission rate, recovery rate, delta rate in {} continent over time'.format('Oceania'),\n                                                                        figsize=(15,5))\nplt.ylabel('means rate')","47ce889f":"oceania =  rate_map[rate_map.continent=='Oceania']","7d11f420":"oceania['R0'] = oceania.beta.values\/(oceania.gamma.values + oceania.delta.values)","11a1f640":"oceania.plot(x='ObservationDate', y='R0',\n             title='ratio reproduction number over time in Oceania',\n              figsize=(15,5))\nplt.ylabel('ratio')","b4020fe2":"africa = rate_map[rate_map.continent=='Africa']","e27cf875":"africa ['R0'] = africa.beta.values\/(africa.gamma.values + africa.delta.values)","bb295fa2":"africa.plot(x='ObservationDate', y='R0', \n             title='ratio reproduction number over time in Africa',\n             figsize=(15,5))\nplt.ylabel('ratio')","64b33130":"def find_R0(data=None):\n    return data.beta.values\/(data.gamma.values + data.delta.values)","53666946":"china = geospa[geospa.name=='China']","89379125":"china.head()","a87961df":"china[['ObservationDate','Confirmed','Deaths','Recovered','currentCase']].plot(x='ObservationDate', \n        title='SARS Cov 2 in China', figsize=(15,5))\nplt.ylabel('Cummulative')","3f6ed933":"china[['ObservationDate','beta','gamma','delta']].plot(x='ObservationDate', \n                                                       title='SARS Cov 2 important parameters',\n                                             figsize=(15,5))\nplt.ylabel('rate')","dc182803":"# find R0\nchina['R0'] = find_R0(data=china)","84432047":"china.plot(x='ObservationDate', y = 'R0', title='ratio reproductive number in China',\n            figsize=(15,5))\nplt.ylabel('ratio')","e78ea1ed":"australia = geospa[geospa.name=='Australia']","def1087a":"australia.head()","2d67eb28":"australia[['ObservationDate','Confirmed','Deaths','Recovered','currentCase']].plot(x='ObservationDate', \n        title='SARS Cov 2 in Australia',  figsize=(15,5))\nplt.ylabel('Cummulative')","98ea3a73":"australia[['ObservationDate','beta','gamma','delta']].plot(x='ObservationDate', \n                                                       title='SARS Cov 2 important parameters',\n                                                        figsize=(15,5))\nplt.ylabel('rate')","9ed07bc5":"#compute R0\naustralia['R0'] = find_R0(data=australia)","8cb25866":"australia.plot(x='ObservationDate', y = 'R0', title='ratio reproductive number in Australia',\n                figsize=(15,5))\nplt.ylabel('ratio')","5c26931a":"cameroon = geospa[geospa.name=='Cameroon']","e61bab86":"cameroon.head()","1b479d73":"cameroon[['ObservationDate','Confirmed','Deaths','Recovered','currentCase']].plot(x='ObservationDate', \n        title='SARS Cov 2 in Cameroon', figsize=(15,5))\nplt.ylabel('Cummulative')","be99edb6":"cameroon[['ObservationDate','beta','gamma','delta']].plot(x='ObservationDate', \n                                                       title='SARS Cov 2 important parameters',\n                                                       figsize=(15,5))\nplt.ylabel('rate')","5a3f2e1a":"#Compute R0\ncameroon['R0'] = find_R0(data=cameroon)","a281671b":"cameroon.plot(x='ObservationDate', y = 'R0',  title='ratio reproductive number in Cameroon',\n               figsize=(15,5))\nplt.ylabel('ratio')","30be3ac3":"### Practical:  SIRF approximated\n\nIn the context of sars cov 2 in the world, we need to adapt SIRF model to our data such that we can make some approximation on behavior of disease and define transmission rate and others. If we consider **(N)**  the number of population in some fixed surface ($Km^{2}$) at time t. We know that there will exist some confirmed cases population and non confirmed cases population.\n\n**population size = totalpositivecases + totalnegativecases** and **totalpositivecases = currentpositivecases + (recovered + death)**\n\nhence,\n\n**population size = totalnegativecases + currentpositivecases + recovered + death**  (1)\n\nFrom (1) we can make some identification:\n\n> population size can be a total Population (N).\n\n> totalnegativecases can be a Susceptible (S)\n\n> currentpositivecases can be an Infective (I) \n\n> recovered + death can be a Recovered individuals (R) + Fatalities (F)\n\nWe can write again:\n\n$S = N  - S_c \\rightarrow \\dfrac{S}{N} = 1 - \\dfrac{S_c}{N}$ if $  \\dfrac{S_c}{N} << 1 $ we have $S \\approx N$ and SIRF Model with standard  incidence become:\n\n$\\dfrac{dI}{dt} = (\\beta - \\gamma - \\delta)I$, $\\qquad$ $\\dfrac{dR}{dt} = \\gamma I$ $\\qquad$ $\\dfrac{dF}{dt} = \\delta I$","f4e29bb9":"### COVID-19 Worldwide Map\n\nWe use geospatial to see how covid19 spreads across the world.","0bed626b":"### Upnext!","ee7042db":"**Cleaning data**","e2231cd7":"## Adequate contact rate and incidence\n\n**Contact rate $U(N)$** is the number of individuals contacted by infective per unit of time. Suppose that the probability of infection by each contact is $\\beta_0$, then the **adequate contact rate** is $\\beta_0U(N)$. \n\nThe mean adequate contact rate of an infected individual to a susceptible is $\\beta_0U(N)\\dfrac{S}{N}$. This rate is called an **infection rate**. Then the total new infectives infected by all individuals in the infected compartiment per unit of time, at time t is $(\\beta_0U(N)\\dfrac{S}{N})I$, which is called **incidence** of disease.\n\n- If $U(N) = kN$ that is, the contact rate is proportional to the total population size, the incidence is $\\beta(t)S(t)I(t)$, where $\\beta = \\beta_0k$ is called the transmission coefficient(transmission rate). This type of incidence is called **bilinear incidence**\n- If $U(N) = k^{'}$, that is, the contact rate is a constant in this case, the incidence become $\\beta I\\dfrac{S}{N}$, where $\\beta = \\beta_0k^{'}$, and it is called **standard incidence**.\n\n**Extract from: Zhien Ma, Jia Li - Dynamical Modeling and Anaylsis of Epidemics-World Scientific Publishing Company (2009)**","bf5d487a":"**Our SIRF model approximated can be using**","ec008e2b":"## **Find** $R_0$ **over time** **for Africa**","91ce3359":"### transmission rate , recovery rate, fatalities rate worldwide map","ff3b6307":"### Determinate $\\beta(t), \\gamma(t), \\delta(t)$\n\nBefore  finding $\\beta(t), \\gamma(t), \\delta(t)$, we need to see a ratio between the number confirmed case patients in one continent and population size in that continent at time t.","cc0c545a":"### SIRF Model with standard incidence  adapted\n\n**Can we find the model that explain well the spreading of covid 19 in the world?**\n\nWe know that covid19 have many importants variables but our data, we have four  **ConfirmedCases(TotalpositiveCases), CurrentConfirmedCases(CurrentpositiveCases), Recovered and Deaths**. How can we obtain the dynamics system equation for these variables? To answer this question, we are going to use the SIRF Model with standard incidence:\n\nThe SIRF model with standard incidence  is a classic model in epidemiology, it contain 04 subpopulations, the susceptibles **S**, the infectives **I** and recovered individuals **R**, fatalities **F**:\n\n> Susceptiles \n\n> Infective\n\n> Recovered\n\n> Fatalities\n\nThe susceptible can become infective, and the infectives can become recovered or Fatalities, but no other transitions are considered.\nThe population $N = S + I + R + F$ remains constant. The model describes the movement between the classes by the system of differential equations.\n\n> $\\dfrac{dS}{dt} = -\\beta I\\dfrac{S}{N}$, $\\qquad$ $\\dfrac{dI}{dt} = \\beta I\\dfrac{S}{N} -(\\gamma +\\delta) I$, $\\qquad$ $\\dfrac{dR}{dt} = \\gamma I$ $\\qquad$ $\\dfrac{dF}{dt} = \\delta I$.  Where  $\\beta$ is the transmission rate, $\\gamma$ is the recovery rate, $\\delta$ is fatalities rate and $R_{0}=\\dfrac{\\beta }{\\gamma+\\delta}$","801dc8c0":"### Interpreting a disease control in Oceania continent\n\nSee plotting.","2468ce29":"### Disclaimer\n\n**This notebook does not affirm that all the models are exact it just offers  a track to better understand and give some approximation answers to fight effectively against this pandemic in the world.**","3e60096c":"### Cameroon\n\nI choose this country because it have seriously problems (NOSO crisis, Boko haram crisis, socio-politics crisis ...) where SARS Cov 2 can also create another that this country could not control. That is why it is important to know a behaviour of the spreading of covid 19 in that country and migitigate the transmission.","6c21de65":"### Estimate $\\beta(t), \\gamma(t), \\delta(t)$\n\n> $\\beta(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  currentConfirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n> $\\gamma(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  recovered \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n> $\\delta(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  deaths \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n**Source: Zhien Ma, Jia Li - Dynamical Modeling and Anaylsis of Epidemics-World Scientific Publishing Company (2009)**","2a1f8689":"# SARS Cov 2 transmission rate ($\\beta$), recovered rate ($\\gamma$) and fatalities rate ($\\delta$)\n\nIn this notebook, we seek a behaviour of transmission rate over a time in each continent and also some country.\nOur work is as follows:\n\n- **Short review on adequate contact rate and incidence**\n    - **SIRF Model with standard incidence adapted**\n    - **Practical: SIRF approximated**\n    - **Estimate** $\\beta(t)$, $\\gamma(t)$, $\\delta(t)$\n- **See Worldwide SARS Cov 2**\n  - **Define** $\\beta(t)$, $\\gamma(t)$, $\\delta(t)$ **in each continent**\n  - **Plotting  transmission rate, recovered rate and fatalities rate for each continent**\n  - **Interpreting a control disease in Oceania continent**\n      - **Find** $R_0$ **over time**\n- **Find** $R_0$ **over time** **for Africa**\n- **Case study: China, Australia, Cameroon**\n    - **Transmission rate, recovered rate and fatalities rate forecasting**","e69a176b":"This curve shows the good approximation of SIRF Model and the decreasing of $R_0(t)$ over time.","563a0a81":"### China\n\nI choose China because there is a first country that has controlled disease and mitigate a spreading of covid19.","5c49be60":"## Case study: China, Australia, Cameroon\n    \n  - **Transmission rate, recovered rate and fatalities rate forecasting**","5f0885ed":"## Worldwide SARS Cov 2 ","08d1d7d9":"Now, we see that Oceania is controlling a disease well. That means that transmission rate decrease and recovered rate increase also fatality rate over time.","376a33a9":"$R_0$ decreases over time, no bad.","b1731885":"According to **SIRF approximated** we realize that if $\\beta(t) - (\\gamma(t) + \\delta(t)) < 0 $ the disease is controlled otherwise is outbreak again. So, we compute $R_0(t) = \\dfrac{\\beta(t)}{\\gamma(t) + \\delta(t)}$ to see the control disease in Oceania continent.\n\nFrom control disease  graph. **SIRF approximated** can become **SIRF stochastics approximated** which are:\n\n$\\dfrac{dI_t}{I_t} = (\\beta - \\gamma - \\delta)dt + dB_t$, $\\qquad$ $\\dfrac{dR_t}{I_t} = \\gamma dt + dB_t$ $\\qquad$ $\\dfrac{dF_t}{I_t} = \\delta dt + dB_t$ where $B_t$ is **random walk**.","e4231d1b":"### Austrialia\n\nI choose this country because Oceania continent is the first continent that is controlling disease and mitigate a spreading of SARS Cov 2.","fddb6369":"### Find $R_0$ over time ","b7a35673":"We see that the curve have two behaviours. Before 6 Apr the curve are as exponential shape but after 6 Apr the curve jumps. Something is happening in this graph."}}