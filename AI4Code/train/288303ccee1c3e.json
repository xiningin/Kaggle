{"cell_type":{"040c646b":"code","cca925b9":"code","d44bf06b":"code","be4f2ff1":"code","6dd04834":"code","fc02437e":"code","270288b2":"code","0097ed5e":"code","e32040ea":"code","85f0d76e":"code","00e92eee":"code","4d28635e":"code","a8fe2ad3":"code","3ba04746":"code","c7ed109c":"code","4e9b8299":"code","b0b5b65c":"code","5aac58ec":"code","43f697ac":"code","1bea54c5":"code","2de6a692":"code","4f73c623":"code","ec285c95":"code","3a583657":"code","069c4232":"code","4fa26929":"code","7dc78647":"code","87203121":"code","3dc94cf5":"code","557982e9":"code","86b97be3":"code","3e3123b7":"code","d83a3b02":"code","6086582e":"code","5e021fb3":"code","6ce3de3e":"code","ca158c9e":"code","593a0cb7":"code","7736eddd":"code","422c9e5e":"code","02f9b9c1":"code","d9893bb9":"code","3eef7582":"markdown","2a9aa5e5":"markdown","f58237a1":"markdown","1225b324":"markdown","798c5f87":"markdown","02d1f42f":"markdown","cf771017":"markdown","4da1ad79":"markdown","8820bf65":"markdown","1a1bd8ae":"markdown","7a5d48fb":"markdown","d1185961":"markdown","de441af1":"markdown","df6d7683":"markdown","4d996b69":"markdown"},"source":{"040c646b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport fbprophet\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cca925b9":"## Cell for data loading and pre-processing.\n\n# Step 1 - loading data sets\ndf_pgen1 = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_1_Generation_Data.csv')\ndf_psense1 = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_1_Weather_Sensor_Data.csv')\n\ndf_pgen2 = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_2_Generation_Data.csv')\ndf_psense2 = pd.read_csv('..\/input\/solar-power-generation-data\/Plant_2_Weather_Sensor_Data.csv')\n\n# Step 2 - correcting date_time format\ndf_pgen1['DATE_TIME'] = pd.to_datetime(df_pgen1['DATE_TIME'],format = '%d-%m-%Y %H:%M')\ndf_psense1['DATE_TIME'] = pd.to_datetime(df_psense1['DATE_TIME'],format = '%Y-%m-%d %H:%M')\n\ndf_pgen2['DATE_TIME'] = pd.to_datetime(df_pgen2['DATE_TIME'],format = '%Y-%m-%d %H:%M:%S')\ndf_psense2['DATE_TIME'] = pd.to_datetime(df_psense2['DATE_TIME'],format = '%Y-%m-%d %H:%M:%S')\n\n# Step 3 - splitting date and time\ndf_pgen1['DATE'] = df_pgen1['DATE_TIME'].apply(lambda x:x.date())\ndf_pgen1['TIME'] = df_pgen1['DATE_TIME'].apply(lambda x:x.time())\n\ndf_psense1['DATE'] = df_psense1['DATE_TIME'].apply(lambda x:x.date())\ndf_psense1['TIME'] = df_psense1['DATE_TIME'].apply(lambda x:x.time())\n\ndf_pgen2['DATE'] = df_pgen2['DATE_TIME'].apply(lambda x:x.date())\ndf_pgen2['TIME'] = df_pgen2['DATE_TIME'].apply(lambda x:x.time())\n\ndf_psense2['DATE'] = df_psense2['DATE_TIME'].apply(lambda x:x.date())\ndf_psense2['TIME'] = df_psense2['DATE_TIME'].apply(lambda x:x.time())\n\n\n# Step 4 - correcting data_time format for the DATE column\ndf_pgen1['DATE'] = pd.to_datetime(df_pgen1['DATE'],format = '%Y-%m-%d')\ndf_psense1['DATE'] = pd.to_datetime(df_psense1['DATE'],format = '%Y-%m-%d')\ndf_pgen2['DATE'] = pd.to_datetime(df_pgen2['DATE'],format = '%Y-%m-%d')\ndf_psense2['DATE'] = pd.to_datetime(df_psense2['DATE'],format = '%Y-%m-%d')\n\n# Step 5 - splitting hour and minutes\ndf_pgen1['HOUR'] = pd.to_datetime(df_pgen1['TIME'],format='%H:%M:%S').dt.hour\ndf_pgen1['MINUTES'] = pd.to_datetime(df_pgen1['TIME'],format='%H:%M:%S').dt.minute\n\ndf_psense1['HOUR'] = pd.to_datetime(df_psense1['TIME'],format='%H:%M:%S').dt.hour\ndf_psense1['MINUTES'] = pd.to_datetime(df_psense1['TIME'],format='%H:%M:%S').dt.minute\n\ndf_pgen2['HOUR'] = pd.to_datetime(df_pgen2['TIME'],format='%H:%M:%S').dt.hour\ndf_pgen2['MINUTES'] = pd.to_datetime(df_pgen2['TIME'],format='%H:%M:%S').dt.minute\n\ndf_psense2['HOUR'] = pd.to_datetime(df_psense2['TIME'],format='%H:%M:%S').dt.hour\ndf_psense2['MINUTES'] = pd.to_datetime(df_psense2['TIME'],format='%H:%M:%S').dt.minute\n\n\n#Changing the incorrectly noted DC Power in the first file\nfor i in range(len(df_pgen1.index)) : \n    df_pgen1['DC_POWER'].iloc[i] = df_pgen1['DC_POWER'].loc[i]\/10","d44bf06b":"df_pgen1.head(50)","be4f2ff1":"df_psense1.head(50)","6dd04834":"df_pgen2.head(50)","fc02437e":"df_psense2.head(50)","270288b2":"df_pgen1.count()","0097ed5e":"df_pgen1['SOURCE_KEY'].unique()\n","e32040ea":"len(df_pgen1['SOURCE_KEY'].unique())","85f0d76e":"df_pgen1.isnull()","00e92eee":"# Count total NaN at each row in a DataFrame \nmyint = 0\ntype(myint)\nfor i in range(len(df_pgen1.index)) : \n    myint = myint +df_pgen1.iloc[i].isnull().sum()\nprint(\"Count of NAN is :\"+str(myint))","4d28635e":"df_pgen1['SOURCE_KEY'].value_counts()","a8fe2ad3":"df_pgen1['DATE_TIME'].value_counts()","3ba04746":"df_pgen1.info()","c7ed109c":"df_pgen1['DATE'].value_counts()","4e9b8299":"import seaborn as sns #visualisation\nplt.figure(figsize=(20,10))\nc= df_pgen1.corr()\nsns.heatmap(c,cmap='vlag',annot=True)\nc","b0b5b65c":"import seaborn as sns #visualisation\nplt.figure(figsize=(20,10))\nc= df_psense1.corr()\nsns.heatmap(c,cmap='Spectral',annot=True)\nc","5aac58ec":"result_left = pd.merge(df_pgen1,df_psense1, on='DATE_TIME',how='left') \n\nimport seaborn as sns #visualisation\nplt.figure(figsize=(20,10))\nc= result_left.corr()\nsns.heatmap(c,cmap='icefire',annot=True)\nc","43f697ac":"import plotly.express as px\nfig = px.scatter(x=df_psense1['AMBIENT_TEMPERATURE'],y=df_psense1['MODULE_TEMPERATURE'],title='Correlation Between MODULE_TEMPERATURE & AMBIENT_TEMEPRATURE')#, hover_data=['petal_width'] )\n#fig = px.scatter(df, x=\"sepal_width\", y=\"sepal_length\", color=\"species\",\n                # size='petal_length', hover_data=['petal_width'])\nfig.show()","1bea54c5":"import plotly.express as px\nfig = px.scatter(x=df_pgen1['DC_POWER'],y=df_pgen1['AC_POWER'],title='Correlation Between DC Power & AC Power')\nfig.show()","2de6a692":"_, ax = plt.subplots(1, 1, figsize=(24, 10))\n\nax.plot(df_psense1['HOUR'],\n        df_psense1['IRRADIATION'],\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation With Time')\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('Irradiation vs. Time')\nplt.xlabel('Hour')\nplt.ylabel('Irradiation')\nplt.show()\n\n","4f73c623":"df_data = df_psense1[df_psense1['DATE']=='2020-05-23T00:00:00.000000000']\n\n_, ax = plt.subplots(1, 1, figsize=(18, 9))\n\n#df_data = df_psense1[df_psense1['DATE']==date]#[df_psense1['IRRADIATION']>0]\n\ndf_data_irr_1 = df_data[(df_data['IRRADIATION']>0) & (df_data['IRRADIATION']<=0.5)]\ndf_data_irr_2 = df_data[(df_data['IRRADIATION']>0.5) & (df_data['IRRADIATION']<=1)]\ndf_data_irr_3 = df_data[df_data['IRRADIATION']>1]\ndf_data_noirr = df_data[df_data['IRRADIATION']==0]\n\nax.plot(df_data_irr_1.AMBIENT_TEMPERATURE,\n        df_data_irr_1.MODULE_TEMPERATURE,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation_1'\n       )\n\nax.plot(df_data_irr_2.AMBIENT_TEMPERATURE,\n        df_data_irr_2.MODULE_TEMPERATURE,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation_2'\n       )\n\nax.plot(df_data_irr_3.AMBIENT_TEMPERATURE,\n        df_data_irr_3.MODULE_TEMPERATURE,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation_3'\n       )\n\nax.plot(df_data_noirr.AMBIENT_TEMPERATURE,\n        df_data_noirr.MODULE_TEMPERATURE,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='No Irradiation'\n       )\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('Module Tempreture vs. Ambient Tempreture')\nplt.xlabel('Ambient Tempreture')\nplt.ylabel('Module Tempreture')\nplt.show()","ec285c95":"_, ax = plt.subplots(1, 1, figsize=(18, 9))\n\nax.plot(result_left.MODULE_TEMPERATURE,\n        result_left.DC_POWER,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='DC POWER')\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power vs. Module Temperature')\nplt.xlabel('Module Temperature')\nplt.ylabel('DC Power')\nplt.show()","3a583657":"\n    \nimport matplotlib.pyplot as plt\n\n#SS Plotting How DCPower and AC Power changing with time\n_, ax = plt.subplots(1, 1, figsize=(18, 9))\nax.plot(df_pgen1.DATE_TIME,\n        df_pgen1.DC_POWER.rolling(window=20).mean(),\n        label='DC Power'\n       )\n\nax.plot(df_pgen1.DATE_TIME,\n        df_pgen1.AC_POWER.rolling(window=20).mean(),\n        label='AC Power'\n       )\n\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power and AC Power')\nplt.xlabel('Date and Time')\nplt.ylabel('Power')\nplt.show()    ","069c4232":"#SS Plotting How DCPower and AC Power changing with time\n_, ax = plt.subplots(1, 1, figsize=(18, 9))\nax.plot(df_pgen1.HOUR,\n        df_pgen1.DC_POWER.rolling(window=24).mean(),\n        label='DC Power'\n       )\n\nax.plot(df_pgen1.HOUR,\n        df_pgen1.AC_POWER.rolling(window=20).mean(),\n        label='AC Power'\n       )\n\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power and AC Power')\nplt.xlabel('Time of Day')\nplt.ylabel('Power')\nplt.show()","4fa26929":"#SS Plotting How DCPower and AC Power changing with time\n_, ax = plt.subplots(1, 1, figsize=(18, 9))\nax.plot(df_pgen2.HOUR,\n        df_pgen2.DC_POWER.rolling(window=24).mean(),\n        label='DC Power'\n       )\n\nax.plot(df_pgen2.HOUR,\n        df_pgen2.AC_POWER.rolling(window=20).mean(),\n        label='AC Power'\n       )\n\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power and AC Power')\nplt.xlabel('Time of Day')\nplt.ylabel('Power')\nplt.show()","7dc78647":"#SS Irradiation With Time\n_, ax = plt.subplots(1, 1, figsize=(24, 10))\n\nax.plot(df_psense1['HOUR'],\n        df_psense1['IRRADIATION'],\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation With Time')\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('Irradiation vs. Time')\nplt.xlabel('Hour')\nplt.ylabel('Irradiation')\nplt.show()","87203121":"#SS Irradiation With Time\n_, ax = plt.subplots(1, 1, figsize=(24, 10))\n\nax.plot(df_psense1['HOUR'],\n        df_psense1['IRRADIATION'],\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Irradiation With Time')\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('Irradiation vs. Time')\nplt.xlabel('Hour')\nplt.ylabel('Irradiation')\nplt.show()","3dc94cf5":"day_summary = df_psense1.groupby('DATE').agg(TOTAL_IRRADIANCE = ('IRRADIATION', sum),\n                                         DATE = ('DATE',max)\n                                        )","557982e9":"day_summary","86b97be3":"#SS Irradiation With Time\n_, ax = plt.subplots(1, 1, figsize=(24, 10))\n\nax.plot(day_summary['DATE'],\n        day_summary['TOTAL_IRRADIANCE'],\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='Total Irradiation For Date')\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('Irradiation vs. Date')\nplt.xlabel('DATE')\nplt.ylabel('TOTAL_IRRADIANCE')\nplt.show()","3e3123b7":"_, ax = plt.subplots(1, 1, figsize=(18, 9))\n\nax.plot(result_left.IRRADIATION,\n        result_left.DC_POWER,\n        marker='o',\n        linestyle='',\n        alpha=.5,\n        ms=10,\n        label='DC POWER')\n\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power vs. Irradiation')\nplt.xlabel('Irradiation')\nplt.ylabel('DC Power')\nplt.show()","d83a3b02":"dates = result_left['DATE_x'].unique()\ndates","6086582e":"_, ax = plt.subplots(1, 1, figsize=(18, 9))\n\ndate = dates[4]\ninverters = result_left['SOURCE_KEY_x'].unique()\n\nfor inverter in inverters:\n\n    data = result_left[(result_left['DATE_x']==date)&(result_left['SOURCE_KEY_x']==inverter)&(result_left['IRRADIATION']>0.1)]\n\n    ax.plot(data.MODULE_TEMPERATURE,\n                data.DC_POWER,\n                marker='o',\n                linestyle='',\n                alpha=.5,\n                ms=10,\n                label=inverter\n               )\nax.grid()\nax.margins(0.05)\nax.legend()\nplt.title('DC Power vs. Module Temperature')\nplt.xlabel('Module Temperature')\nplt.ylabel('DC Power')\nplt.show()","5e021fb3":"result_left = pd.merge(df_pgen1,df_psense1, on='DATE_TIME',how='left')\nresult_left['IRRADIATION'] = result_left['IRRADIATION'].fillna(0)\nresult_left['AMBIENT_TEMPERATURE'] = result_left['AMBIENT_TEMPERATURE'].fillna(0)\nresult_left['MODULE_TEMPERATURE'] = result_left['MODULE_TEMPERATURE'].fillna(0)","6ce3de3e":"from sklearn.model_selection import train_test_split \nfrom sklearn.linear_model import LinearRegression\n\n# Splitting the dataset into the Training set and Test set\n\n\nX = result_left[['IRRADIATION','MODULE_TEMPERATURE']]\ny = result_left['DC_POWER']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=0)\n\n","ca158c9e":"lin_reg = LinearRegression()\nlin_reg.fit(X_train, y_train)\n\ncoeff_df = pd.DataFrame(lin_reg.coef_,X.columns,columns = ['Coefficients'])\ncoeff_df\n\n\n\n\n\n","593a0cb7":"# Predict!\n\ny_pred = lin_reg.predict(X_test)\n","7736eddd":"# Compare\n\ncompare_df = pd.DataFrame({'Actual': y_test, 'Predicted': y_pred})\ncompare_df.head(10)\n","422c9e5e":"# Validate\n\nfrom sklearn import metrics\nimport numpy as np\n\nprint(\"Train Set Accuracy\")\nprint('Mean Absolute Error:', metrics.mean_absolute_error(y_train, lin_reg.predict(X_train)))\nprint('Mean Squared Error:', metrics.mean_squared_error(y_train, lin_reg.predict(X_train)))  \nprint('Root Mean Squared Error:', np.sqrt(metrics.mean_squared_error(y_train, lin_reg.predict(X_train))))\nprint('---------------------------')\nprint(\"Test Set Accuracy\")\nprint('Mean Absolute Error:', metrics.mean_absolute_error(y_test, y_pred))  \nprint('Mean Squared Error:', metrics.mean_squared_error(y_test, y_pred))  \nprint('Root Mean Squared Error:', np.sqrt(metrics.mean_squared_error(y_test, y_pred)))","02f9b9c1":"from sklearn.model_selection import train_test_split \nfrom sklearn.linear_model import LinearRegression\n\n# Splitting the dataset into the Training set and Test set\n\n\nX = result_left[['IRRADIATION','MODULE_TEMPERATURE','HOUR_x']]\ny = result_left['DC_POWER']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=0)\n\nlin_reg = LinearRegression()\nlin_reg.fit(X_train, y_train)\n\ncoeff_df = pd.DataFrame(lin_reg.coef_,X.columns,columns = ['Coefficients'])\ncoeff_df\n\n# Predict!\n\ny_pred = lin_reg.predict(X_test)\n\n\n\n# Compare\n\ncompare_df = pd.DataFrame({'Actual': y_test, 'Predicted': y_pred})\ncompare_df.head(10)\n\n","d9893bb9":"import plotly.graph_objects as go\n\nfig = go.Figure(data=go.Scatter(\n        x=y_test,\n        y=y_pred,\n        error_x=dict(\n            type='percent',\n            value=10)\n    ))\nfig.show()","3eef7582":"As we can see adding the hour variable as input to our regression model improves its accuracy. If weather data about the plant facility were to be acquired, which may include irradiation and an approximate for the temperature,we can use this to predict the DC Power that will be generated.","2a9aa5e5":"Module temperature and Ambient temperature show strong positive correlation when both are ~<25*C, which are nightime temperatures. During the day time, the solar panels gain heat more rapidly then their surroundings, owing to their metallic structure and positioning to collect the sun rays. Due to this, we see the Module temperature increase very rapidly while the Ambient temperature fluctuates in the day.\nAt temperatures higher than ~25 degree celsius we see a weak, but positive correlation between the two variables.\n\nFor prediction purposes we need to check if both are useful or not.","f58237a1":"Is there equal rows for each Inverter, the count varies from 3104 to 3155","1225b324":"**Evidence of multicollinearity**\n\n\nMulticollinearity is determined if multiple independent variables are related to each other. It is determined using the correlation coefficients between them.  The value of correlation coefficient can range between -1 to +1, where -1 indicate perfect negative correlation and +1 represent perfect positive correlation.Identifying Corrleation among Variables\n","798c5f87":"Understanding Datatypes of objects presentts in DataFrame\ndtypes: datetime64[ns](2), float64(4), int64(3), object(2","02d1f42f":"How many records are present per day\n22 Inverters 4 readings per hour and 24 hours makes it 2112 readings as max per day basis\n34 days data will make it 71808 rows, where as we have 68778 which measn we are missing 3030 rows.","cf771017":"As we had observed during analysis, adding the hour or a time variable in some sense might improve the accuracy of our prediction, which we have attempted to do below.","4da1ad79":"How is Irradiation changing as time goes by?\n","8820bf65":"Checking if there are any null or missing values. We have found that is not the case. Data is present in all 68778 rows","1a1bd8ae":"EDA for Plant1 and Plant2\nPlant1 has 22 Inverters\nPlant 1 have 68778 Rows","7a5d48fb":"**VARIABLES OF iNTEREST ARE **\n**Module Temprature\nAmbient Temprature and\nIrradiation**\n\nLet us understand how they behave \/ show relation on aprtcular day\n","d1185961":"As we can see there are dates which do not have the expected number of readings to be observed (22*24*4 = 2112)","de441af1":"**Model Building**\nMultiple Linear Regression with DC Power as dependent variable and Irradiation, Module_Temperature as independent variable\nUsing Liner Regression and ScikitLearn library\n1. Split the DataSet in Train and Test, here dependent variable is DC_Power \n2. Split Ratio is 70\/30 \n3. We will Build Model on Train DataSet of 70 % and then test is aginst test DataSet by doing Prediction\n\nAs we have seen that Irradiation, [](http:\/\/)Module Temprature drives DC Power. ","df6d7683":"**Executive Summary**\nAtria group is a business establishment, they have diversified power business. One of their power portfolios is renewable energy. They are working on expanding their renewable energy footprint into Rooftop Solar and Industrial and Residential Market. To stay competetive,reduction in cost to produce power is key. Efficient business operations, and optimal use of resources in running the plant is need of hour.\n\nStatistical Modelling and Machine Learning can aid in predicting energy production across plants, which drives all down stream decision for selling power. These models can also help in identifying which factors impact most the production of power.\n\nThe Data used for the project is historical Solar Plant data. Idea is to predict power generation.\n","4d996b69":"DC and AC Power are highly correlated both these variables are driven by other variables, notably: irradiation. For prediction purposes one of this can be dropped."}}