{"cell_type":{"c3499d0b":"code","ea6cf28b":"code","fb1a9d87":"code","ed571cb8":"code","664e670f":"code","ddd92ad7":"code","e9ec9e88":"code","c448ffaa":"code","c7eabf4f":"code","988a8dbf":"code","f81a2b2e":"code","18e343cb":"code","ee90203d":"code","4c095efb":"code","e96820e5":"code","d330fe7c":"code","c66a76c2":"code","5a06b093":"code","c302876b":"code","f9d938e9":"code","b44b25cd":"code","a8945eda":"code","317b542a":"code","90beac2a":"code","84534372":"code","0faf015e":"code","25102a8e":"code","8f50ab6e":"code","22f2ffd7":"code","0e0bfe1d":"code","939c1b2e":"code","5ef33690":"code","e69c51c0":"code","266c8ca7":"code","503416c5":"code","2536e3c9":"code","876744ad":"code","89ef4200":"code","c7faa56f":"code","5f323a98":"code","4a7a7bcc":"code","895f29b7":"code","4acca2cb":"code","65f4f1d7":"markdown","adbc3c6d":"markdown","1513dd2e":"markdown","41789acc":"markdown","c8ac9fb7":"markdown","61c3e092":"markdown","059ea49b":"markdown","6f924171":"markdown","7842f90a":"markdown"},"source":{"c3499d0b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ea6cf28b":"import pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","fb1a9d87":"df_LIB = pd.read_csv(\"\/kaggle\/input\/crystal-system-properties-for-liion-batteries\/lithium-ion batteries.csv\")","ed571cb8":"df_LIB.head()","664e670f":"plt.bar(df_LIB['Crystal System'], df_LIB['E Above Hull (eV)'])","ddd92ad7":"df_stable = df_LIB[df_LIB['E Above Hull (eV)']<0.04]","e9ec9e88":"df_stable","c448ffaa":"df_LIB.info()","c7eabf4f":"df_LIB.describe()","988a8dbf":"!pip install chemparse\nimport chemparse","f81a2b2e":"LIB_dict = df_LIB.Formula.apply(chemparse.parse_formula)\nLIB_dict = pd.json_normalize(LIB_dict)\nLIB_dict = LIB_dict.fillna(0)\ndf_LIB = df_LIB.join(LIB_dict)","18e343cb":"df_LIB.head()","ee90203d":"df_LIB = df_LIB.drop(['Materials Id', 'Formula'], axis =1)","4c095efb":"from scipy import stats","e96820e5":"df= pd.crosstab(index =df_LIB['Has Bandstructure'],columns = df_LIB['Crystal System'])","d330fe7c":"df","c66a76c2":"(chi2, p, dof,_) = stats.chi2_contingency([df.iloc[0].values, df.iloc[1].values])","5a06b093":"print(chi2)","c302876b":"print(p)","f9d938e9":"print(dof)","b44b25cd":"import numpy as np","a8945eda":"cramer_test = np.sqrt(chi2\/df_LIB['Crystal System'].shape[0])","317b542a":"cramer_test","90beac2a":"df_LIB[\"Has Bandstructure\"] = df_LIB[\"Has Bandstructure\"].map({True:1, False:0})\ndf_LIB[\"Crystal System\"] = df_LIB[\"Crystal System\"].map({'monoclinic':1, 'orthorhombic':2, 'triclinic':3})","84534372":"import seaborn as sns","0faf015e":"corr = df_LIB.corr()\nplt.subplots(figsize=(30,30))\nsns.heatmap(corr, annot = True)","25102a8e":"!pip install autoviz\n!pip install xlrd\n#importing Autoviz class\nfrom autoviz.AutoViz_Class import AutoViz_Class","8f50ab6e":"av = AutoViz_Class()\ndf_autoviz = av.AutoViz(\"\/kaggle\/input\/crystal-system-properties-for-liion-batteries\/lithium-ion batteries.csv\")","22f2ffd7":"from pandas_profiling import ProfileReport\nprofile = ProfileReport(df_LIB, title=\"Pandas Profiling Report\", explorative=True)\nprofile.to_notebook_iframe()","0e0bfe1d":"!pip install pycaret[full]\nfrom pycaret.regression import *","939c1b2e":"df_LIB.Spacegroup = df_LIB.Spacegroup.rank(method=\"dense\").astype(float)\ndf_LIB['Has Bandstructure'] = df_LIB['Has Bandstructure'].astype(float)\ndf_LIB['Crystal System'] = df_LIB['Crystal System'].astype(float)\ndf_LIB['Nsites'] = df_LIB['Nsites'].astype(float)","5ef33690":"from sklearn.impute import SimpleImputer","e69c51c0":"reg_experiment = setup(df_LIB, \n                       target = 'Crystal System', \n                       session_id=123, \n                       log_experiment=True, \n                       experiment_name='pred_CS', remove_multicollinearity = True,\n                      multicollinearity_threshold = 0.8, ignore_low_variance = True,\n                      feature_selection=True, feature_interaction=True)","266c8ca7":"get_config('X')","503416c5":"top3 = compare_models(n_select = 3)","2536e3c9":"gbr = create_model('gbr', cross_validation=True, fold = 10)","876744ad":"plot_model(gbr, plot='error')","89ef4200":"plot_model(gbr, plot='feature')","c7faa56f":"X = df_LIB.drop(['Crystal System'], axis = 1)\nY = df_LIB['Crystal System']","5f323a98":"from sklearn.model_selection import train_test_split\nX_train,X_test,Y_train,Y_test = train_test_split(X,Y,test_size=0.3)","4a7a7bcc":"final_gbr = finalize_model(gbr)","895f29b7":"new_predictions = predict_model(gbr, data=X_test)\nnew_predictions.head()","4acca2cb":"df_LIB.loc[df_LIB['Formation Energy (eV)'] == -2.875]","65f4f1d7":"The prediction error is very less and we can see from the data that the crystal system with formation energy of -2.875 eV is predicted correct by the gbr model.","adbc3c6d":"We have to ignore the outliers in E above hull and density as it seems that they are genuine values corresponding to specific space groups, formation energy.Zero values in E above hull and band gap is also possible. Infact zero values for E above hull means stable crystal.","1513dd2e":"Orthorhombic crystal has higher E above hull values. #Thermodynamic stable molecules generally has Energy above hull value = 0 meV. Stability decrease with increase in positive values.Let assume that the stable compounds have Ehull values less that 40 meV or 0.04 eV","41789acc":"It seems around 93 compounds are thermodynamically stable.","c8ac9fb7":"It seems data is normalized as mean is almost equal to median in all variables. However, there is some variation in the values of Nsites and Volume.","61c3e092":"#Since value is <0.4, means low correlation strength between the two variables.","059ea49b":"There is not much correlation between the crystal system and other variables","6f924171":"#since p >0.05 thus, as per null hypothesis there is relationship between the two categorical variables. Now confirm this using Cramers test.","7842f90a":"# Spacegroup feature is the most import for the prediction of crystal system."}}