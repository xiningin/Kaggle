{"cell_type":{"519a8e0b":"code","343ae5dd":"code","268dacc7":"code","1a0b1d08":"code","0540636e":"code","54ab8748":"code","4afe50b1":"code","5048648f":"code","1af96048":"code","7affcf07":"code","3253de1e":"code","881c4a78":"code","f615c7da":"code","f097d845":"code","87adf003":"code","e08dcb65":"code","421f1ba8":"code","d7441335":"code","bd752d54":"code","2fd01edd":"code","a9e8c5ca":"code","1fa4b316":"code","18e29623":"code","b07c2a74":"code","c6098b05":"code","192094e8":"code","382f898e":"code","bbf79fc4":"code","9728f360":"code","a0033807":"code","ff098f81":"code","d556a5b0":"code","9c163cf6":"code","7d99b69b":"code","c3472d03":"code","586b5b75":"code","d8632354":"code","98bd451e":"code","e67e8b2b":"code","00e7b4e5":"code","477e3b7e":"code","ce710280":"code","ed7da5c7":"code","52564bb3":"code","577a3d48":"code","bbc09af0":"code","818cb0b6":"code","ea8e62f6":"code","c46899de":"code","db0924cd":"code","0a284c51":"code","1ac628db":"code","76ad01f9":"code","bb19894f":"code","388cf1cf":"code","387c324f":"code","ea720c47":"code","7cbd1246":"code","3659a04a":"code","e94b7a10":"code","51ff6a45":"code","f5321980":"code","42d6b125":"code","c53819c4":"code","80577b25":"code","946bfc44":"code","8cc8b8cd":"code","f6904123":"code","3935aaa9":"code","3495ae58":"code","a27dcae7":"code","5e2fe1e5":"code","e0dd57f6":"code","59ca0bf7":"code","4239dd12":"code","f8cd51a8":"code","a39dea11":"markdown","d2ec935d":"markdown","3b865243":"markdown","57fec4d0":"markdown","70152e5b":"markdown","b4f9d07e":"markdown","3c8f0e87":"markdown","84eb1251":"markdown","ae7953dd":"markdown","88664a0c":"markdown","1cdfe33f":"markdown","ee9fadf1":"markdown","b9e37442":"markdown","2929f182":"markdown","621c4e8d":"markdown","2f98f4e5":"markdown","71cf0886":"markdown","220a32d7":"markdown","3aea91be":"markdown","d2c77770":"markdown","fcb6dbe6":"markdown","98918a4b":"markdown","1663873a":"markdown","7cd7004d":"markdown","d82204a7":"markdown","81e71da8":"markdown","626858ca":"markdown","87d4e1ca":"markdown","ed6f604a":"markdown","63c0ced2":"markdown","8e0fab5f":"markdown","fa1079af":"markdown","eded545b":"markdown","d26da641":"markdown","3519f0a1":"markdown","167496b3":"markdown","d757a40c":"markdown","48030987":"markdown","788ed925":"markdown","2f357e2c":"markdown","cb82c51c":"markdown","b3482d4b":"markdown","8791eaa6":"markdown","1820a078":"markdown","7eed24c9":"markdown","13bc7dc9":"markdown","cc63d6f6":"markdown","e86eed8c":"markdown","97a88e87":"markdown","0522ad1a":"markdown","8732e36d":"markdown","8bf05053":"markdown","c1410722":"markdown","afe4d167":"markdown","2ae2b48d":"markdown","2f136786":"markdown","e6d79228":"markdown","b4162dbe":"markdown","047bd47f":"markdown","fe150540":"markdown","e08163ab":"markdown","14845285":"markdown","505e5141":"markdown","df839301":"markdown","d8d5988b":"markdown","21daf10b":"markdown"},"source":{"519a8e0b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\n#Basic Packages\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt # Data Visualization\nimport seaborn as sns # Advance Data Visualization\n%matplotlib inline\n\n#OS packages\nimport os\n\n#Encoding Packages\nimport pandas as pd\nfrom sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\n\n#Scaling Packages\nfrom sklearn import preprocessing\nmm_scaler = preprocessing.MinMaxScaler()\n\n#Multicolinearity VIF\nimport statsmodels.api as sm\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\n\n#Data Modelling Packages\nfrom sklearn.model_selection import train_test_split\n\nfrom imblearn.over_sampling import RandomOverSampler\nsm = RandomOverSampler(random_state=294,sampling_strategy='not majority')\n\nimport sklearn.metrics\nfrom sklearn.model_selection import train_test_split\n\n#Model Packages\nimport lightgbm as lgb","343ae5dd":"# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session\n\ndf_Train = pd.read_csv('..\/input\/av-janatahack-healthcare-hackathon-ii\/Data\/train.csv')\ndf_Test = pd.read_csv('..\/input\/av-janatahack-healthcare-hackathon-ii\/Data\/test.csv')","268dacc7":"# Checking Percentage(%) of Common Case ID's  between train and test data using Unique train values :\n\nprint(np.intersect1d(df_Train['case_id'], df_Test['case_id']).shape[0]\/df_Train['case_id'].nunique())\ncommon_ids = len(set(df_Test['case_id'].unique()).intersection(set(df_Train['case_id'].unique())))\n\nprint(\"Common IDs : \",common_ids)\n\n# No - Data Leak between Train and Test !\n\nprint(\"Unique IDs : \",df_Test.shape[0] - common_ids)","1a0b1d08":"# Checking Percentage(%) of Common ID's  between train and test data using Unique train values :\n\nprint(np.intersect1d(df_Train['patientid'], df_Test['patientid']).shape[0]\/df_Train['patientid'].nunique())\ncommon_ids = len(set(df_Test['patientid'].unique()).intersection(set(df_Train['patientid'].unique())))\n\nprint(\"Common IDs : \",common_ids)\n\n# No - Data Leak between Train and Test !\n\nprint(\"Unique IDs : \",df_Test.shape[0] - common_ids)","0540636e":"#To find the head of the Data\ndf_Train.head()","54ab8748":"#Information of the Dataset Datatype\ndf_Train.info()","4afe50b1":"#Information of the Dataset Continuous Values\ndf_Train.describe()","5048648f":"#Columns List\ndf_Train.columns","1af96048":"#Shape of the Train and Test Data\nprint('Shape of Train Data: ', df_Train.shape)\nprint('Shape of Test Data: ', df_Test.shape)","7affcf07":"#Null values in the Train Dataset\nprint('Null values in Train Data: \\n', df_Train.isnull().sum())","3253de1e":"#Null Values in the Test Dataset\nprint('Null Values in Test Data: \\n', df_Test.isnull().sum())","881c4a78":"print('Total Count of the Prediction Output Column Stay Variable: \\n', df_Train['Stay'].value_counts())","f615c7da":"#Counting Hospital Stay\ndf_Train['Stay'].value_counts()","f097d845":"#Counting Hospital Stay\nsns.countplot(x='Stay',data=df_Train)\nplt.xlabel(\"Stay\")\nplt.ylabel(\"Count\")\nplt.title(\"Stay Duration\")\nplt.show()","87adf003":"#Counting Hospital Code\ndf_Train['Hospital_code'].value_counts()","e08dcb65":"#Counting Hospital Code\nsns.countplot(x='Hospital_code',data=df_Train)\nplt.xlabel(\"Hospital Code\")\nplt.ylabel(\"Count\")\nplt.title(\"Hospital Code Count\")\nplt.show()","421f1ba8":"#Counting Hospital Type Code\ndf_Train['Hospital_type_code'].value_counts()","d7441335":"#Counting Hospital Type Code\nsns.countplot(x='Hospital_type_code',data=df_Train)\nplt.xlabel(\"Hospital Type Code\")\nplt.ylabel(\"Count\")\nplt.title(\"Hospital Type Code Count\")\nplt.show()","bd752d54":"#Counting City Code Hospital\ndf_Train['City_Code_Hospital'].value_counts()","2fd01edd":"#Counting Hospital Type Code\nsns.countplot(x='City_Code_Hospital',data=df_Train)\nplt.xlabel(\"City Code Hospital\")\nplt.ylabel(\"Count\")\nplt.title(\"City Code Hospital Count\")\nplt.show()","a9e8c5ca":"#Counting Hospital Region Code\ndf_Train['Hospital_region_code'].value_counts()","1fa4b316":"#Counting Hospital Region Code\nsns.countplot(x='Hospital_region_code',data=df_Train)\nplt.xlabel(\"Hospital Region Code\")\nplt.ylabel(\"Count\")\nplt.title(\"Hospital Region Code Count\")\nplt.show()","18e29623":"#Counting Hospital Region Code\ndf_Train['Available Extra Rooms in Hospital'].value_counts()","b07c2a74":"#Counting Available Extra Rooms in Hospital\nsns.countplot(x='Available Extra Rooms in Hospital',data=df_Train)\nplt.xlabel(\"Available Extra Rooms in Hospital\")\nplt.ylabel(\"Count\")\nplt.title(\"Available Extra Rooms in Hospital Count\")\nplt.show()","c6098b05":"#Counting Department\ndf_Train['Department'].value_counts()","192094e8":"#Counting Department\nsns.countplot(x='Department',data=df_Train)\nplt.xlabel(\"Department\")\nplt.ylabel(\"Count\")\nplt.title(\"Department Count\")\nplt.show()","382f898e":"#Counting Ward Type\ndf_Train['Ward_Type'].value_counts()","bbf79fc4":"#Counting Ward Type\nsns.countplot(x='Ward_Type',data=df_Train)\nplt.xlabel(\"Ward Type\")\nplt.ylabel(\"Count\")\nplt.title(\"Ward Type Count\")\nplt.show()","9728f360":"#Counting Ward Facility Code\ndf_Train['Ward_Facility_Code'].value_counts()","a0033807":"#Counting Ward Facility Code\nsns.countplot(x='Ward_Facility_Code',data=df_Train)\nplt.xlabel(\"Ward Facility Code\")\nplt.ylabel(\"Count\")\nplt.title(\"Ward Facility Code Count\")\nplt.show()","ff098f81":"#Counting Bed Grade\ndf_Train['Bed Grade'].value_counts()","d556a5b0":"#Counting Bed Grade\nsns.countplot(x='Bed Grade',data=df_Train)\nplt.xlabel(\"Bed Grade\")\nplt.ylabel(\"Count\")\nplt.title(\"Bed Grade Count\")\nplt.show()","9c163cf6":"#Counting patientid\ndf_Train['patientid'].value_counts()","7d99b69b":"#No of Unique Data in the Patient ID Column\ndf_Train['patientid'].nunique()","c3472d03":"#Unique Data in the Patient ID Column\ndf_Train['patientid'].unique()","586b5b75":"#Counting patientid\n#sns.countplot(x='patientid',data=df_Train)\n#plt.xlabel(\"patientid\")\n#plt.ylabel(\"Count\")\n#plt.title(\"patientid Count\")\n#plt.show()","d8632354":"#Counting City Code Patient\ndf_Train['City_Code_Patient'].value_counts()","98bd451e":"#Counting City_Code_Patient\nsns.countplot(x='City_Code_Patient',data=df_Train)\nplt.xlabel(\"City Code Patient\")\nplt.ylabel(\"Count\")\nplt.title(\"City Code Patient Count\")\nplt.show()","e67e8b2b":"#Counting Type of Admission\ndf_Train['Type of Admission'].value_counts()","00e7b4e5":"#Counting Type of Admission\nsns.countplot(x='Type of Admission',data=df_Train)\nplt.xlabel(\"Type of Admission\")\nplt.ylabel(\"Count\")\nplt.title(\"Type of Admission Count\")\nplt.show()","477e3b7e":"#Counting Severity of Illness\ndf_Train['Severity of Illness'].value_counts()","ce710280":"#Counting Severity of Illness\nsns.countplot(x='Severity of Illness',data=df_Train)\nplt.xlabel(\"Severity of Illness\")\nplt.ylabel(\"Count\")\nplt.title(\"Severity of Illness Count\")\nplt.show()","ed7da5c7":"#Counting Visitors with Patient\ndf_Train['Visitors with Patient'].value_counts()","52564bb3":"#Counting Visitors with Patient\nsns.countplot(x='Visitors with Patient',data=df_Train)\nplt.xlabel(\"Visitors with Patient\")\nplt.ylabel(\"Count\")\nplt.title(\"Visitors with Patient Count\")\nplt.show()","577a3d48":"#Counting Age\ndf_Train['Age'].value_counts()","bbc09af0":"#Counting Age\nsns.countplot(x='Age',data=df_Train)\nplt.xlabel(\"Age\")\nplt.ylabel(\"Count\")\nplt.title(\"Age Count\")\nplt.show()","818cb0b6":"#Admission Deposit Price\nsns.boxplot(x=df_Train['Admission_Deposit'])\nplt.xlabel(\"Admission Deposit\")\nplt.title(\"Admission_Deposit\")\nplt.show()","ea8e62f6":"df_Train.drop_duplicates(keep='first', inplace=True)","c46899de":"# We will concat both train and test data set\ndf_Train['is_train'] = 1\ndf_Test['is_train'] = 0\n\n#df_Frames = [df_Train,df_Test]\ndf_Total = pd.concat([df_Train, df_Test])","db0924cd":"#Null values in the Total Dataset\nprint('Null values in Total Data: \\n', df_Total.isnull().sum())","0a284c51":"#using Forward Fill to fill missing Values\ndf_Total['Bed Grade']=df_Total['Bed Grade'].fillna(method=\"ffill\",axis=0)\ndf_Total['City_Code_Patient']=df_Total['City_Code_Patient'].fillna(method=\"ffill\",axis=0)","1ac628db":"df_Total['Bill_per_patient'] = df_Total.groupby('patientid')['Admission_Deposit'].transform('sum')\ndf_Total['Min_Severity_of_Illness'] = df_Total.groupby('patientid')['Severity of Illness'].transform('min')","76ad01f9":"#Bill Per Patient\nsns.boxplot(x=df_Total['Bill_per_patient'])\nplt.xlabel(\"Bill_per_patient\")\nplt.title(\"Bill_per_patient\")\nplt.show()","bb19894f":"df_Total.head()","388cf1cf":"from sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\ndf_Total['Hospital_code'] = le.fit_transform(df_Total['Hospital_code'])\ndf_Total['Hospital_type_code'] = le.fit_transform(df_Total['Hospital_type_code'])\ndf_Total['City_Code_Hospital'] = le.fit_transform(df_Total['City_Code_Hospital'])\ndf_Total['Hospital_region_code'] = le.fit_transform(df_Total['Hospital_region_code'])\ndf_Total['Available Extra Rooms in Hospital'] = le.fit_transform(df_Total['Available Extra Rooms in Hospital'])\ndf_Total['Department'] = le.fit_transform(df_Total['Department'])\ndf_Total['Ward_Type'] = le.fit_transform(df_Total['Ward_Type'])\ndf_Total['Ward_Facility_Code'] = le.fit_transform(df_Total['Ward_Facility_Code'])\ndf_Total['Bed Grade'] = le.fit_transform(df_Total['Bed Grade'])\ndf_Total['patientid'] = le.fit_transform(df_Total['patientid'])\ndf_Total['City_Code_Patient'] = le.fit_transform(df_Total['City_Code_Patient'])\ndf_Total['Type of Admission'] = le.fit_transform(df_Total['Type of Admission'])\ndf_Total['Severity of Illness'] = le.fit_transform(df_Total['Severity of Illness'])\ndf_Total['Visitors with Patient'] = le.fit_transform(df_Total['Visitors with Patient'])\ndf_Total['Age'] = le.fit_transform(df_Total['Age'])\ndf_Total['Min_Severity_of_Illness'] = le.fit_transform(df_Total['Min_Severity_of_Illness'])","387c324f":"from sklearn import preprocessing\nmm_scaler = preprocessing.MinMaxScaler()\ndf_Total[['Admission_Deposit']] = mm_scaler.fit_transform(df_Total[['Admission_Deposit']])\ndf_Total[['Bill_per_patient']] = mm_scaler.fit_transform(df_Total[['Bill_per_patient']])","ea720c47":"df_Total['Admission_Deposit'].describe()","7cbd1246":"#Un-Merge code\ndf_Train_final = df_Total[df_Total['is_train'] == 1]\ndf_Test_final = df_Total[df_Total['is_train'] == 0]","3659a04a":"df_Train_final","e94b7a10":"df_Train_final.columns","51ff6a45":"x = df_Train_final\nx = x.drop(['case_id'], axis=1)\n#x = x.drop(['patientid'], axis=1)\nx = x.drop(['is_train'], axis=1)\nx = x.drop(['Stay'], axis=1)\ny = df_Train_final['Stay']\nx_pred = df_Test_final\nx_pred = x_pred.drop(['case_id'], axis=1)\n#x_pred = x_pred.drop(['patientid'], axis=1)\nx_pred = x_pred.drop(['is_train'], axis=1)\nx_pred = x_pred.drop(['Stay'], axis=1)","f5321980":"#y = le.fit_transform(y) #for Optuna hyperparameter tuning only","42d6b125":"from sklearn.model_selection import train_test_split\nx_train, x_valid, y_train, y_valid = train_test_split(x, y, test_size=0.20)","c53819c4":"import lightgbm as lgb\nimport optuna","80577b25":"def objective(trial):\n    dtrain = lgb.Dataset(x_train, label=np.ravel(y_train))\n\n    param = {\n        #\"objective\": \"multiclass\",\n        #\"metric\": \"multi_logloss\",\n        #\"num_class\": 11,\n        \"verbosity\": -1,\n        \"boosting_type\": \"gbdt\",\n        \"lambda_l1\": trial.suggest_float(\"lambda_l1\", 1e-8, 10.0, log=True),\n        \"lambda_l2\": trial.suggest_float(\"lambda_l2\", 1e-8, 10.0, log=True),\n        \"num_leaves\": trial.suggest_int(\"num_leaves\", 2, 256),\n        \"feature_fraction\": trial.suggest_float(\"feature_fraction\", 0.4, 1.0),\n        \"bagging_fraction\": trial.suggest_float(\"bagging_fraction\", 0.4, 1.0),\n        \"bagging_freq\": trial.suggest_int(\"bagging_freq\", 1, 7),\n        \"min_child_samples\": trial.suggest_int(\"min_child_samples\", 5, 100)\n        #\"n_estimators\":trial.suggest_int(\"n_estimators\", 0, 1000),\n        #\"learning_rate\":trial.suggest_int(\"n_estimators\", 0, 99)\n    }\n\n    gbm = lgb.train(param, dtrain)\n    preds = gbm.predict(x_valid)\n    pred_labels = np.rint(preds)\n    accuracy = sklearn.metrics.accuracy_score(y_valid, pred_labels)\n    return accuracy","946bfc44":"opt_GS = optuna.create_study(direction=\"maximize\")\nopt_GS.optimize(objective, n_trials=300)\n\nprint(\"Number of finished trials: {}\".format(len(opt_GS.trials)))\n\nprint(\"Best trial:\")\ntrial = opt_GS.best_trial\n\nprint(\"Value: {}\".format(trial.value))\n\nprint(\"Params: \")\nfor key, value in trial.params.items():\n    print(\"{}: {}\".format(key, value))","8cc8b8cd":"import lightgbm as lgb\nlgb_cl = lgb.LGBMClassifier(boosting_type='gbdt', learning_rate=0.1, n_estimators=50000, importance_type='gain', objective='multiclass', num_boost_round=100,\n                            min_child_samples=70, num_leaves=246, #max_depth=5, \n                            lambda_l1=9.62, lambda_l2=0.006, feature_fraction=0.73, bagging_fraction=0.82, bagging_freg=6,\n                            #max_bin=60, bagging_faction=0.9, feature_fraction=0.9, subsample_freq=2, scale_pos_weight=2.5, \n                            random_state=294, n_jobs=-1, silent=False) #score accuracy 42.70","f6904123":"#lgb_cl.fit(x_train, y_train, eval_set=[(x_train, y_train),(x_valid, y_valid)], verbose=50, eval_metric='auc', early_stopping_rounds=100)\nlgb_cl.fit(x, np.ravel(y))","3935aaa9":"y_pred = lgb_cl.predict(x_pred)","3495ae58":"y_pred","a27dcae7":"submission_df = pd.DataFrame({'case_id':df_Test['case_id'], 'Stay':y_pred})\nsubmission_df.to_csv('Sample Submission LGB v04.csv', index=False)","5e2fe1e5":"df_Total.columns()","e0dd57f6":"categorical_features = [\"Hospital_code\", \"Hospital_type_code\", \"City_Code_Hospital\", \"Hospital_region_code\", \"Available Extra Rooms in Hospital\",\n                        \"Department\", \"Ward_Type\", \"Ward_Facility_Code\", \"Bed Grade\", \"patientid\", \"City_Code_Patient\", \"Type of Admission\", \n                        \"Visitors with Patient\", \"Severity of Illness\", \"Age\", \"Admission_Deposit\",\"Bill_per_patient\", \"Min_Severity_of_Illness\"]\n\n\nparam_lgb = LGBMClassifier(\n    boosting_type='gbdt'\n    ,learning_rate=0.1\n    ,n_estimators=50000\n    ,min_child_samples=21\n    ,random_state = 294\n    ,n_jobs=-1\n    ,silent=False\n    )\n\n\n# Apply Stratified K-Fold Cross Validation where K=5 or n_splits=5 :\nkf = StratifiedKFold(n_splits=10,shuffle=True)\npreds={}\nacc_score=0\n\n# Pass predictor_train,target_train for Cross Validation :\nfor i,(train_idx,val_idx) in enumerate(kf.split(X)):    \n    X_train, y_train = X.iloc[train_idx,:], y.iloc[train_idx]\n    X_val, y_val = X.iloc[val_idx, :], y.iloc[val_idx]\n    print('\\nFold: {}\\n'.format(i+1))\n    lg=LGBMClassifier(device=\"gpu\", boosting_type='gbdt',learning_rate=0.04,depth=8,objective='multi_class',num_class=11,\n                      n_estimators=50000,\n                     metric='multi_error',colsample_bytree=0.5,reg_alpha=2,reg_lambda=2,random_state=294,n_jobs=-1)    \n    \n    # lg.fit(X_train,y_train)\n    lg.fit(X_train, y_train\n                        # ,categorical_feature = categorical_features\n                        ,eval_metric='multi_error'\n                        ,eval_set=[(X_train, y_train),(X_val, y_val)]\n                        ,early_stopping_rounds=100\n                        ,verbose=50\n                       )\n    \n    print(accuracy_score(y_val,lg.predict(X_val)))\n    acc_score+=accuracy_score(y_val,lg.predict(X_val))\n    preds[i+1]=lg.predict(X_main_test)\n    \nprint('mean accuracy score: {}'.format(acc_score\/10))","59ca0bf7":"# #Permutation Importance of Features using eli5\n# perm = PermutationImportance(lg,random_state=100).fit(X_val, y_val)\n# eli5.show_weights(perm,feature_names=X_val.columns.tolist())","4239dd12":"#Finding the most frequently classified categories\nd = pd.DataFrame()\nfor i in range(1, 10):\n    d = pd.concat([d,pd.DataFrame(preds[i])],axis=1)\nd.columns=['1','2','3','4','5','6','7','8','9']\nre = d.mode(axis=1)[0]","f8cd51a8":"submission_df['Stay']=le.inverse_transform(re.astype(int))\n\nsub_file_name = \"BEST_1_43.27_GPU-LGBM_NO-early_stopping.csv\"\n\nsubmission_df.to_csv(sub_file_name,index=False)\nsubmission_df.head(5)\n\nfrom google.colab import files\nfiles.download(sub_file_name)","a39dea11":"### K-Fold Cross Validation","d2ec935d":"## Feature Engineering","3b865243":"Stay Column is highly Imbalance. Need to use SMOTE to balance it","57fec4d0":"## For Scaling the Columns","70152e5b":"NO Duplicate ROWS","b4f9d07e":"Checking the leakage of Data in Patient ID","3c8f0e87":"## LightGBM Model","84eb1251":"## Hospital Type Code","ae7953dd":"### For Tree Based Algorithm use Label Encoding","88664a0c":"Hospital Type Code is Imbalanced","1cdfe33f":"## Available Extra Rooms in Hospital","ee9fadf1":"Need to remove the outliers or Scale the Values","b9e37442":"# Data Modelling","2929f182":"Need to Balance the Available Extra Rooms as its Skewed Positive","621c4e8d":"## Visitors with Patient Variable","2f98f4e5":"## Target Variable \"Stay\" Count","71cf0886":"## Loading from Kaggle Input Data","220a32d7":"## Department","3aea91be":"## Problem Statement","d2c77770":"Optuna Package that optimizes a classifier Parameter configuration","fcb6dbe6":"Department is Highly Imbalanced","98918a4b":"Cross-validation is a statistical method used to estimate the skill of machine learning models.\n\nIt is commonly used in applied machine learning to compare and select a model for a given predictive modeling problem because it is easy to understand, easy to implement, and results in skill estimates that generally have a lower bias than other methods.","1663873a":"## Type of Admission Variable","7cd7004d":"Ward Type Count is highly imbalanced","d82204a7":"# Load the Datasets","81e71da8":"## Un Merge the Train and Test Data after Feature Engineering","626858ca":"# Data Insight and Visualization","87d4e1ca":"Number of finished trials: 300\n\nBest trial:\n\nValue: 0.3367510363019721\n\nParams: \n\nlambda_l1: 0.004646494045162703\n\nlambda_l2: 4.9034416966810145e-06\n\nnum_leaves: 249\n\nfeature_fraction: 0.9852240055032958\n\nbagging_fraction: 0.7730445719570425\n\nbagging_freq: 3\n\nmin_child_samples: 85","ed6f604a":"City Code Patient is highly imbalance","63c0ced2":"# Janatahack: Healthcare Analytics II","8e0fab5f":"## City Code Patient Vairable","fa1079af":"## Split the Train Dataset to Train and Validation","eded545b":"Hospital Code is Highly Imbalanced and Might affect the model","d26da641":"Column - Description\n\ncase_id - Case_ID registered in Hospital\n\nHospital_code - Unique code for the Hospital\n\nHospital_type_code - Unique code for the type of Hospital\n\nCity_Code_Hospital - City Code of the Hospital\n\nHospital_region_code - Region Code of the Hospital\n\nAvailable Extra Rooms in Hospital - Number of Extra rooms available in the Hospital\n\nDepartment - Department overlooking the case\n\nWard_Type -\tCode for the Ward type\n\nWard_Facility_Code - Code for the Ward Facility\n\nBed Grade -\tCondition of Bed in the Ward\n\npatientid -\tUnique Patient Id\n\nCity_Code_Patient -\tCity Code for the patient\n\nType of Admission -\tAdmission Type registered by the Hospital\n\nSeverity of Illness - Severity of the illness recorded at the time of admission\n\nVisitors with Patient -\tNumber of Visitors with the patient\n\nAge - Age of the patient\n\nAdmission_Deposit -\tDeposit at the Admission Time\n\nStay - Stay Days by the patient","3519f0a1":"## Split the Data to x and y variable","167496b3":"## Ward Type Variable","d757a40c":"## To check for Data Leakage","48030987":"## [Janatahack: Healthcare Analytics II](https:\/\/datahack.analyticsvidhya.com\/contest\/janatahack-healthcare-analytics-ii)","788ed925":"# Exploratory Data Analysis","2f357e2c":"## Remove Duplicate Rows","cb82c51c":"## Encoding of the Columns","b3482d4b":"## Hospital Code Insight","8791eaa6":"### Optuna Girdsearch","1820a078":"## City Code Hospital","7eed24c9":"## Fill missing Values","13bc7dc9":"Target Variable\n\nStay - Highly Imbalanced. Need to use SMOTE to balance it\n\n\nPredictor Variable\n\nHospital Code - Highly Imbalanced and Might affect the model\n\nHospital Type Code - Imbalanced\n\nCity Code Hospital - Imbalanced\n\nAvailable Extra Rooms - Need to Balance the Available Extra Rooms as its Skewed Positive\n\nDepartment - Highly Imbalanced\n\nWard Type Count - highly imbalanced\n\nPatient ID - lot of Unique Values - Might need to drop it\n\nCity Code Patient - highly imbalance\n\nSeverity of Illness Variable - imbalanced\n\nVisitors with Patient - imbalanced\n\nAge - Imbalanced can be binned even more\n\nAdmission Deposit - Continous Need to remove the outliers or Scale the Values","cc63d6f6":"The healthcare sector has long been an early adopter of and benefited greatly from technological advances. These days, machine learning plays a key role in many health-related realms, including the development of new medical procedures, the handling of patient data, staff management & more.\n\nThis weekend we invite you to participate in another Janatahack with the theme of healthcare analytics. Stay tuned for the problem statement and datasets this Friday and get a chance to work on a real healthcare case study along with 250 AV points at stake.","e86eed8c":"## Assumptions of the Predictor Variables","97a88e87":"## Data","0522ad1a":"# Basic Feature Engineering","8732e36d":"## Age Variable","8bf05053":"## Severity of Illness Variable","c1410722":"City Code Hospital is Imbalanced","afe4d167":"# Load the Packages","2ae2b48d":"Public Score of 42.70","2f136786":"## Joining the Train and Test Data for Encoding and Filling the Missing Values","e6d79228":"Checking the leakage of Data in Case ID","b4162dbe":"Recent Covid-19 Pandemic has raised alarms over one of the most overlooked area to focus: Healthcare Management. While healthcare management has various use cases for using data science, patient length of stay is one critical parameter to observe and predict if one wants to improve the efficiency of the healthcare management in a hospital. \n\nThis parameter helps hospitals to identify patients of high LOS risk (patients who will stay longer) at the time of admission. Once identified, patients with high LOS risk can have their treatment plan optimized to miminize LOS and lower the chance of staff\/visitor infection. Also, prior knowledge of LOS can aid in logistics such as room and bed allocation planning.\n\nSuppose you have been hired as Data Scientist of HealthMan \u2013 a not for profit organization dedicated to manage the functioning of Hospitals in a professional and optimal manner.\nThe task is to accurately predict the Length of Stay for each patient on case by case basis so that the Hospitals can use this information for optimal resource allocation and better functioning. The length of stay is divided into 11 different classes ranging from 0-10 days to more than 100 days.","047bd47f":"Missing Values in \"Bed Grade\" and \"City_Code_Patient\" columns.","fe150540":"## Hospital Region Code","e08163ab":"## Admission Deposit Variable","14845285":"## patientid Variable","505e5141":"Evaluation Metric\n\nThe evaluation metric for this hackathon is 100*Accuracy Score.","df839301":"## Ward Facility Code","d8d5988b":"## Bed Grade","21daf10b":"Do share your comments on how to improvise the model"}}