{"cell_type":{"931d5c9c":"code","39a9cf5e":"code","023562b4":"code","92572263":"code","21ed6ddc":"code","f32e4a4f":"code","c6d8aaf0":"code","1ecb0546":"code","1a8694e3":"code","b5c7ddd1":"code","cbef7746":"code","dd19cc16":"code","c748e27e":"code","28476e55":"code","4aa5718b":"code","37760539":"code","bdab4cc5":"code","0c29c030":"code","9fb5e1a2":"code","6d8db476":"code","d89495ba":"code","48bd2d9f":"code","662f0ff0":"code","e1bf9bd0":"code","35db4e58":"code","10c39a72":"code","1c68e013":"code","fa3621a1":"code","2abbffe8":"code","fb0168d7":"markdown","90bb45a1":"markdown","379d51ba":"markdown","f041471a":"markdown","3580ac44":"markdown","faa56f6f":"markdown","f518f07d":"markdown","41694b83":"markdown","730450e4":"markdown","4eb1a443":"markdown","3cc25bbc":"markdown","242fbd5d":"markdown","53cb9886":"markdown","d78a7298":"markdown","45325328":"markdown","2d962444":"markdown","ac09609b":"markdown","e8b02693":"markdown","b182aaf9":"markdown","cc8ee159":"markdown","44819521":"markdown","dfb600d7":"markdown","0ef0417a":"markdown","1855731b":"markdown","8a90ed1c":"markdown","5a46f84e":"markdown","2c93f191":"markdown","5e750b4f":"markdown"},"source":{"931d5c9c":"import plotly.express as px\nimport pandas as pd\nimport unidecode\nimport datetime\nimport numpy as np\nimport seaborn as sn\nimport folium\nimport json\nfrom branca.colormap import linear\nfrom IPython.display import display\nfrom folium.plugins import HeatMapWithTime","39a9cf5e":"df_covid = pd.read_excel(\"..\/input\/road-transport-brazil\/covid-19-05-2020.xlsx\",sep =\";\")\n\ndf_roads = pd.read_csv(\"..\/input\/road-transport-brazil\/road-transport-brazil.csv\",sep =\";\")","023562b4":"print(df_covid.shape)\n\nprint(df_covid.isnull().sum())","92572263":"df_covid.describe()","21ed6ddc":"df_covid.groupby('regiao').count()","f32e4a4f":"df_covid.drop(['Recuperadosnovos', 'emAcompanhamentoNovos'], axis=1)","c6d8aaf0":"df_covid['Ratio_casosAcumulado'] = (df_covid['casosAcumulado'] \/ df_covid['populacaoTCU2019'])*100\n\ndf_covid['Ratio_obitosAcumulado'] = (df_covid['obitosAcumulado'] \/ df_covid['populacaoTCU2019'])*100","1ecb0546":"df_covid = df_covid[df_covid[\"regiao\"] != \"Brasil\"]","1a8694e3":"df_covid_estado = df_covid[df_covid[\"municipio\"].isnull() & df_covid[\"codmun\"].isnull()]","b5c7ddd1":"df_covid_municipio = df_covid[df_covid[\"municipio\"].notnull() & df_covid[\"codmun\"].notnull()]","cbef7746":"df_covid_municipio['data'] = pd.to_datetime(df_covid_municipio['data'])\ndf_covid_municipio = df_covid_municipio[df_covid_municipio.groupby('municipio').data.transform('max') == df_covid_municipio['data']]\n\ndf_covid_estado['data'] = pd.to_datetime(df_covid_estado['data'])\ndf_covid_estado = df_covid_estado[df_covid_estado.groupby('estado').data.transform('max') == df_covid_estado['data']]","dd19cc16":"df_covid_municipio['municipio'] =  df_covid_municipio['municipio'].str.normalize('NFKD')\\\n       .str.encode('ascii', errors='ignore')\\\n       .str.decode('utf-8')","c748e27e":"print(df_roads.shape)\n\nprint(df_roads.isnull().sum())","28476e55":"df_roads.describe()","4aa5718b":"df_roads = df_roads.drop(['codigo_viagem', 'empresa','nu_linha','onibus','tipo_viagem','sentido_linha','in_transbordo','lat','lon'], axis=1)","37760539":"df_roads['data_fim_viagem'] = pd.to_datetime(df_roads['data_fim_viagem'])\n\ndf_roads['data_fim_viagem'] = df_roads['data_fim_viagem'].dt.strftime(\"%d-%m-%Y\")","bdab4cc5":"df_roads = df_roads[(df_roads['data_fim_viagem'] > '01-01-2019' ) & (df_roads['data_fim_viagem'] < '05-05-2019')]","0c29c030":"df_roads = df_roads.drop(['origem', 'origem_uf','pdop','data_viagem_programada','data_inicio_viagem'], axis=1)","9fb5e1a2":"df_roads_municipio = df_roads.drop(['destino_uf','data_fim_viagem'], axis=1)\ndf_roads_municipio = df_roads_municipio.groupby(['destino']).size().reset_index(name='counts')\n\ndf_roads_estado = df_roads.drop(['destino','data_fim_viagem'], axis=1)\ndf_roads_estado = df_roads_estado.groupby(['destino_uf']).size().reset_index(name='counts')","6d8db476":"df_roads_municipio.rename(columns={'destino':'municipio','counts':'viagens'}, inplace=True)\n\ndf_roads_estado.rename(columns={'destino_uf':'estado','counts':'viagens'}, inplace=True)","d89495ba":"df_roads_estado","48bd2d9f":"df_covid_estado['estado'] = df_covid_estado['estado'].str.upper()\ndf_roads_estado['estado'] = df_roads_estado['estado'].str.upper()\n\ndf_covid_municipio['municipio'] = df_covid_municipio['municipio'].astype(str).str.upper().str.strip()\ndf_roads_municipio['municipio'] = df_roads_municipio['municipio'].astype(str).str.upper().str.strip()","662f0ff0":"correlacao_estado = df_roads_estado.merge(df_covid_estado, on='estado', how='left')\ncorrelacao_estado = correlacao_estado[['casosAcumulado','obitosAcumulado','viagens']]\n\ncorrelacao_municipio = df_roads_municipio.merge(df_covid_municipio, on='municipio', how='left')\ncorrelacao_municipio = correlacao_municipio[['casosAcumulado','obitosAcumulado','viagens']]","e1bf9bd0":"corrMatrix_estado = correlacao_estado.corr()\nsn.heatmap(corrMatrix_estado, annot=True)","35db4e58":"corrMatrix_municipio = correlacao_municipio.corr()\nsn.heatmap(corrMatrix_municipio, annot=True)","10c39a72":"br_estados = '..\/input\/brazil-geojson\/brazil_geo.json'\ngeo_json_data = json.load(open(br_estados))\n\ndf_covid_estado_dict = df_covid_estado[df_covid_estado[\"data\"] == \"2020-05-18\"]\ndf_covid_estado_dict = df_covid_estado_dict.set_index('estado')['casosAcumulado']\n\ncolormap = linear.YlOrRd_08.scale(600,64000)\n\nmapa_estados = folium.Map(\n    location=[-15.77972, -47.92972], \n    zoom_start=4,\n    tiles='cartodbpositron'\n)\nfolium.GeoJson(\n    geo_json_data,\n    name='2018',\n    style_function=lambda feature: {\n        'fillColor': colormap(df_covid_estado_dict[feature['id']]),\n        'color': 'black',\n        'weight': 0.6,\n    }\n    \n).add_to(mapa_estados)\n\n\ncolormap.caption = 'Casos Acumulados de COVID 19 por Estados em 18\/05 '\ncolormap.add_to(mapa_estados)\nfolium.LayerControl(collapsed=False).add_to(mapa_estados)\n\nmapa_estados","1c68e013":"br_estados = '..\/input\/brazil-geojson\/brazil_geo.json'\ngeo_json_data = json.load(open(br_estados))\n\ndf_covid_estado_dict = df_covid_estado[df_covid_estado[\"data\"] == \"2020-05-18\"]\ndf_covid_estado_dict = df_covid_estado_dict.set_index('estado')['Ratio_casosAcumulado']\n\ncolormap = linear.YlOrRd_08.scale(0,1)\n\nmapa_estados = folium.Map(\n    location=[-15.77972, -47.92972], \n    zoom_start=4,\n    tiles='cartodbpositron'\n)\nfolium.GeoJson(\n    geo_json_data,\n    name='2018',\n    style_function=lambda feature: {\n        'fillColor': colormap(df_covid_estado_dict[feature['id']]),\n        'color': 'black',\n        'weight': 0.6,\n    }\n    \n).add_to(mapa_estados)\n\n\ncolormap.caption = 'Casos Acumulados de COVID 19 por Estados em 18\/05'\ncolormap.add_to(mapa_estados)\nfolium.LayerControl(collapsed=False).add_to(mapa_estados)\n\nmapa_estados","fa3621a1":"br_estados = '..\/input\/brazil-geojson\/brazil_geo.json'\ngeo_json_data = json.load(open(br_estados))\n\ndf_covid_estado_dict = df_covid_estado[df_covid_estado[\"data\"] == \"2020-05-18\"]\ndf_covid_estado_dict = df_covid_estado_dict.set_index('estado')['obitosAcumulado']\n\ncolormap = linear.YlOrRd_08.scale(0,5000)\n\nmapa_estados = folium.Map(\n    location=[-15.77972, -47.92972], \n    zoom_start=4,\n    tiles='cartodbpositron'\n)\nfolium.GeoJson(\n    geo_json_data,\n    name='2018',\n    style_function=lambda feature: {\n        'fillColor': colormap(df_covid_estado_dict[feature['id']]),\n        'color': 'black',\n        'weight': 0.6,\n    }\n    \n).add_to(mapa_estados)\n\n\ncolormap.caption = 'Obitos de COVID 19 por Estados em 18\/05 '\ncolormap.add_to(mapa_estados)\nfolium.LayerControl(collapsed=False).add_to(mapa_estados)\n\nmapa_estados","2abbffe8":"br_estados = '..\/input\/brazil-geojson\/brazil_geo.json'\ngeo_json_data = json.load(open(br_estados))\n\ndf_covid_estado_dict = df_covid_estado[df_covid_estado[\"data\"] == \"2020-05-18\"]\ndf_covid_estado_dict = df_covid_estado_dict.set_index('estado')['Ratio_obitosAcumulado']\n\ncolormap = linear.YlOrRd_08.scale(0,0.03)\n\nmapa_estados = folium.Map(\n    location=[-15.77972, -47.92972], \n    zoom_start=4,\n    tiles='cartodbpositron'\n)\nfolium.GeoJson(\n    geo_json_data,\n    name='2018',\n    style_function=lambda feature: {\n        'fillColor': colormap(df_covid_estado_dict[feature['id']]),\n        'color': 'black',\n        'weight': 0.6,\n    }\n    \n).add_to(mapa_estados)\n\n\ncolormap.caption = 'Obitos de COVID 19 por Estados em 18\/05'\ncolormap.add_to(mapa_estados)\nfolium.LayerControl(collapsed=False).add_to(mapa_estados)\n\nmapa_estados","fb0168d7":"Criando as bases por estado e municipio com o total de viagens recebidas \/ Creating the bases by estado and municipio with the total of trips received","90bb45a1":"# An\u00e1lise da Base Roads \/ Roads Data Analysis","379d51ba":"Filtrando a base para pegar as viagens que ocorrem at\u00e9 a data de estudo da covid \/ Filtering the base to catch trips that take place until the covid study date","f041471a":"Montando a base somente com Estados \/ Creating a database with States only","3580ac44":"Removendo as colunas n\u00e3o necess\u00e1rias \/ Removing the columns without use","faa56f6f":"Mapa do Brasil Obitos Acumulados (% pop) \/ Brazil Map Acumulated Death (% pop)","f518f07d":"Montando a base somente com Munic\u00edpio \/ Creating a database with Cities only","41694b83":"Detalhes da base \/ Data details","730450e4":"# Resultados \/ Results","4eb1a443":"Mapa do Brasil Casos Acumulados (% pop) \/ Brazil Map Acumulated Cases (% pop)","3cc25bbc":"Formantando as palavras chaves para o merge \/ Forming the keywords for the merge","242fbd5d":"Removendo os acentos dos municipios \/ Removing Accents from municipios","53cb9886":"The purpose of this analysis is to demonstrate the existence of a correlation between travel and the cases of COVID-19 in Brazil. Only the number of trips received in the state \/ municipality in the first months of 2019 was counted. When analyzing the correlation in statistical terms, it is 0.72 for the states and 0.79 for the municipalities, both strong.\nBrazil has not suspended Carnival and party activities, nor has it effectively prevented transportation between cities for a long period of time. It is important to highlight the relative and absolute difference in Accumulated Cases and Accumulated Deaths in each state, as there are significant differences as shown in the maps.","d78a7298":"Criando as colunas ratio \/ Creating ratio columns ","45325328":"Removendo as colunas com altos \u00edndices de missing \/ Removing the column with highlty missing rate","2d962444":"Mapa do Brasil Obitos Acumulados \/ Brazil Map Acumulated Death","ac09609b":"Agrupando a base por munic\u00edpio e estado com a \u00faltima data de publica\u00e7\u00e3o ","e8b02693":"Mapa do Brasil Casos Acumulados \/ Brazil Map Acumulated Cases","b182aaf9":"Detalhes da base \/ Data details","cc8ee159":"# Correla\u00e7\u00f5es \/ Correlations","44819521":"Removendo as colunas n\u00e3o necess\u00e1rias \/ Removing the columns without use","dfb600d7":"Linhas por regi\u00e3o \/ Line by region","0ef0417a":"Removendo a regiao \"Brasil\" \/ Removing the region \"Brasil\"","1855731b":"O objetivo desta an\u00e1lise demonstrar a exist\u00eancia de correla\u00e7\u00e3o entre viagens e os casos de COVID-19 no Brazil. Foi contabilizada apenas a quantidade de viagens recebidas no estado\/munic\u00edpio nos primeiros meses de 2019. Ao analisar a correla\u00e7\u00e3o em termos estat\u00edsticos ela fica em 0,72 para os estados e 0,79 para os munic\u00edpios. Ou seja, ambas fortes.\nO Brasil n\u00e3o suspendeu atividades de Carnaval e festas e tamb\u00e9m n\u00e3o impediu de forma eficaz o transporte entre as cidades por um longo per\u00edodo de tempo. \u00c9 importante destacar a diferen\u00e7a relativa e absoluta de Casos Acumulados e \u00d3bitos Acumulados em cada estado, pois h\u00e1 diferen\u00e7as significativas conforme demonstrado nos mapas.","8a90ed1c":"Unindo as bases para an\u00e1lise da correla\u00e7\u00e3o \/ Joining the bases for correlation analysis","5a46f84e":"# An\u00e1lise da Base Covid  \/ Covid Data Analysis","2c93f191":"Formatando a data_fim_viagem \/ Formatting the data_fim_viagem","5e750b4f":"# Mapas \/ Maps"}}