{"cell_type":{"5b301c0d":"code","21655e5d":"code","ab1f5fbf":"code","8d433a27":"code","c3a1d68e":"code","bca297cd":"code","93f612da":"code","38219df6":"code","76947783":"code","3b1c28e0":"code","e6dd4265":"code","aaba539a":"code","9dbec4f3":"code","d9a00936":"code","b46a29e9":"code","0ddb536b":"code","811e4fab":"markdown","fa168db5":"markdown","e5d15810":"markdown","d922e095":"markdown","92d293b1":"markdown","f763c106":"markdown","747dc5b0":"markdown","fd25c1fe":"markdown","dae7f83c":"markdown","d14e35a7":"markdown","16552217":"markdown","92a3c117":"markdown","052bf0fb":"markdown","0dadd3f9":"markdown"},"source":{"5b301c0d":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","21655e5d":"df = pd.read_csv(\"..\/input\/european-agriculture-indicatorseurostat-2016\/EuropeanAgriculture_FarmStructureIndicators_Eurostat2016.csv\")","ab1f5fbf":"df.head()","8d433a27":"# Dropping the following columns for later on when we draw our correlation heatmap:\n\ndf.drop(['farms_SO_2000-3999', 'farms_SO_less2000', 'farms_SO_4000-7999', 'farms_SO_8000-14999', 'farms_SO_15000-24999',\n         'farms_SO_25000-49999', 'farms_SO_50000-99999', 'farms_SO_100000-249999', \n         'farms_SO_250000-499999', 'farms_SO_500000_orover'], axis=1, inplace=True)","c3a1d68e":"f, ax = plt.subplots(figsize=(10, 10))\ndf.plot(ax=ax, x = \"Country\", y = \"subsistence_semisubsistence_farms\",\n        kind=\"barh\", title = \"Number of >50% Subsistence Farms by Country\")","bca297cd":"df[\"per_farm_subsistence\"] = df.subsistence_semisubsistence_farms \/ df.farms_number\ndf[\"per_farm_subsistence\"].dropna()","93f612da":"f, ax = plt.subplots(figsize=(10, 10))\ndf.plot(ax = ax, x = \"Country\", y = \"per_farm_subsistence\", \n        kind = \"barh\", title = \"Ratio of >50% Subsistence Farms to Total Farms by Country\")","38219df6":"print(\"Standard Deviation Per Farm Subsistence: \", df[\"per_farm_subsistence\"].std())\nprint(\"Mean Per Farm Subsistence: \", df[\"per_farm_subsistence\"].mean())","76947783":"# Import our dataset:\neuro_df = pd.read_csv(\"..\/input\/commodity-trade-statistics-euro-2016\/commodity_trade_statistics_euro_2016.csv\", low_memory= False)","3b1c28e0":"euro_df.head()","e6dd4265":"# Rename the Country column to match our first dataframe\neuro_df.rename(columns = {'country_or_area':'Country'}, inplace = True)\n\n# Drop all entries of re-import and re-export, these could potentially add noise to our sum of the actual trade\neuro_df.drop(euro_df.index[euro_df['flow'] == 'Re-Import'], inplace = True)\neuro_df.drop(euro_df.index[euro_df['flow'] == 'Re-Export'], inplace = True)\n\n# Drop columns\neuro_df.drop(['comm_code', 'year', \"weight_kg\", \"quantity\"], axis=1, inplace=True)\n\n# Sum the trade by country move into a new data frame\nsums_df = euro_df.groupby(['Country']).sum().reset_index()\n","aaba539a":"new_df = pd.merge(sums_df, df)\nnew_df.head()","9dbec4f3":"print(\"Standard Deviation Trade: \", new_df[\"trade_usd\"].std())\nprint(\"Standard Deviation Number of Farms: \", new_df[\"farms_number\"].std())","d9a00936":"new_df[\"per_farm_trade\"] = new_df.trade_usd \/ new_df.farms_number","b46a29e9":"ax1 = new_df.plot(x = \"Country\", y = \"per_farm_subsistence\", \n        kind = \"bar\", title = \"Subsistence and Trade by Country\", color=\"blue\")\n\nax1.set_ylabel('Ratio of >50% Subsistence Farms to Total Farms', color = 'blue')\n\nplt.xticks(rotation=70)\n\nax2 = ax1.twinx()\n\nnew_df.plot(ax = ax2, x=\"Country\", y=\"per_farm_trade\", kind=\"scatter\",\n                   color = \"red\", figsize = (12,10))\n\nax2.set_ylabel('Sum of Trade \/ Number of Farms ($ Million USD)', color = \"red\")\n\nplt.legend([\"total trade \/ n_farms\"], loc=(0.56,0.957))\n\nplt.show()","0ddb536b":"corr = new_df.corr()\n\nf, ax = plt.subplots(figsize=(15, 15))\n\nmask = np.triu(np.ones_like(corr, dtype=bool))\n\ncmap = sns.diverging_palette(230, 20, as_cmap=True)\n\nsns.heatmap(corr, annot=True, mask = mask, cmap=cmap)","811e4fab":"#### For the sake of the analysis and visualization, it may be helpful to look at the trade relative to the countries' total number of farms. Let's transform this data into a new column, \"Per farm trade\"","fa168db5":"#### The metric that interests me the most in this data set is the \"subsistence_semisubsistence_farms\" column. Subsistence Farms are described as farms who consume at least 50% of the food they produce. ","e5d15810":"### Is there any correlation between a countries' number of subsistence farms and their global agricultural trade?\n##### Let's add in a new data set, Global Commodity Trade Statistics from Kaggle. Since this was an enormous data set, I trimmed it in Excel to only Europe, in year 2016. ","d922e095":"#### Combine our trade dataframe with our original European Agriculture Indicators dataframe","92d293b1":"### Let's take a look at a correlation matrix for our combined dataframe:","f763c106":"### Cleaning the new data set:\n##### Since there are several rows per each country, we will need to group them. I am only interested in the sum of their total trade,so we can drop the comm_code, year, weight, and quantity columns","747dc5b0":"## Further Questions:","fd25c1fe":"# European Agriculture Exploratory Analysis # \n\n#### Datasets used: \n#### https:\/\/www.kaggle.com\/unitednations\/global-commodity-trade-statistics\n#### https:\/\/www.kaggle.com\/georgeam\/european-agriculture-indicatorseurostat-2016\n\n#### Feedback and discussion encouraged and appreciated.","dae7f83c":"### Cleaning","d14e35a7":"## Thank you for reading! ","16552217":"#### Clearly Romania has an outstanding number of subsistence farms, but our vizualization is not effective at comparing the rest of the countries. Let's calculate a column that identifies the percentage of a country's farms which are considered subsistence.","92a3c117":"* ##### Belgium stands out in that their per-farm trade was nearly twice that of the other zero-subsistence farm countries, even though their used agricultural area is at most 10% that of Germany or France. Are we missing some data or information here? \n\n* ##### For Belgium and some other high-trade volume & zero-subsistence farm countries, I am curious to see the breakdown of large \"industrial\" farms and smaller farms. What percentage of the global trade is coming from large agriculture companies?","052bf0fb":"* ##### From this heatmap we can see a weak negative correlation (r = -0.45) between the amount of global trade a country participates in to their ratio of subsistence farms. \n\n* ##### Slovakia, Cyprus, Croatia, and Hungary all have more than 50% of their farms consuming 50% of the goods they produce on site, and this is the case for over 80% of the farms in Romania. These 5 countries also saw only about 100,000 USD total trade per farm in 2016.\n\n* ##### Denmark, Luxembourg, and the Netherlands all have close to 0% of their farms consuming 50% of their own produced goods, and see around 500,000 USD in total agriculural trade per farm. Belgium also has close to 0% subsistence farms, and saw just under 1 Million in total agricultural trade in 2016. \n\n##### It is important to note that the \"trade per farm\" metric does not suggest each farm traded that much USD in 2016. It is only a calculated column used to transform the data for analysis. \n\n##### This weak correlation suggests to me that cultural differences, geopolitical issues, and other less-quantitative measures are playing a role in the relationship between subsistence farms and global trade.","0dadd3f9":"## Analysis & Conclusion:"}}