{"cell_type":{"dd0a2f64":"code","0a1176e3":"code","cb7fd3fa":"code","47d29e4f":"code","e2672090":"code","fe4132ef":"code","51a8f54a":"code","95f711cf":"code","04fbaeb2":"code","fb720d45":"code","116a7373":"markdown","83a4470a":"markdown","78a48619":"markdown","8ffb432d":"markdown","a3674a2a":"markdown","9af83a9a":"markdown","be0c942b":"markdown","861d5b62":"markdown","bbf5c57f":"markdown","d572aeef":"markdown"},"source":{"dd0a2f64":"# Install package in the current Jupyter kernel\nimport sys\n!{sys.executable} -m pip install bar_chart_race","0a1176e3":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video","cb7fd3fa":"covid_data_complete = pd.read_csv('..\/input\/covid19-in-india\/covid_19_india.csv', index_col=False)\ncovid_data_complete.head()","47d29e4f":"covid_data_complete.info()","e2672090":"covid_data_complete.isnull().sum()","fe4132ef":"# change datatype of date to a pandas datetime format\ncovid_data_complete['Date'] = pd.to_datetime(covid_data_complete['Date'], dayfirst=True)\n#covid_data_complete[\"Date\"] = covid_data_complete[\"Date\"].apply(pd.to_datetime)\n\n#drop columns other than total_cases\ndrop_cols = ['Sno', 'Time', 'ConfirmedIndianNational', 'ConfirmedForeignNational', 'Cured', 'Deaths']\ncovid_data_complete.drop(covid_data_complete[drop_cols],axis=1,inplace=True)\n\n\ncovid_data_complete = covid_data_complete[covid_data_complete['State\/UnionTerritory'] \n                                          != 'Cases being reassigned to states']\n\n#dropping data before Feb 29 2020 as only Kerala had 3 cases till then in a span of one month\ncovid_data_complete = covid_data_complete[covid_data_complete['Date'] >\n                                          pd.to_datetime(pd.DataFrame({'year': [2020],'month': [2],'day': [28]}))[0]]\n\ncovid_data_complete.head()","51a8f54a":"covid_data = covid_data_complete.copy() #make a copy for analysis\ncovid_data.columns = ['Date', 'States', 'Cases'] #rename columns\ncovid_data.head(10)","95f711cf":"total_countries = covid_data['States'].nunique()\ntotal_countries","04fbaeb2":"# set countries and date as index and find cases\n# transpose the dataframe to have countries as columns and dates as rows\ncovid_data_by_date = covid_data.set_index(['States','Date']).unstack()['Cases'].T.reset_index()\n\ncovid_data_by_date = covid_data_by_date.set_index('Date') #make date as index - desired by barchartrace\n\ncovid_data_by_date = covid_data_by_date.fillna(0) #fill na with 0\n\ncovid_data_by_date","fb720d45":"#make the mp4 file with the BarChartRace and save it\ndf = covid_data_by_date\nbcr.bar_chart_race(\n    df=df,\n    filename='India_Covid19_BarChartRace.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=10,\n    fixed_order=False,\n    fixed_max=False,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.95,\n    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n    period_fmt='%B %d, %Y',\n    period_summary_func=lambda v, r: {'x': .99, 'y': .05,\n                                      's': f'Total cases: {v.nlargest(total_countries).sum():,.0f}\\n\\nDeveloper: Akhil James',\n                                      #'s': '',\n                                      'ha': 'right', 'size': 10, 'family': 'Courier New'},\n    perpendicular_bar_func='median',\n    period_length=1000,\n    figsize=(5, 3),\n    dpi=500,\n    cmap='dark24',\n    title='COVID-19 cases in India',\n    title_size=10,\n    bar_label_size=10,\n    tick_label_size=10,\n    shared_fontdict={'color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)  ","116a7373":"## 5. Arrange the dataframe for creating bar chart race","83a4470a":"## Video file is in the output section.","78a48619":"## 3. Inspect the dataframe","8ffb432d":"### Create a bar chart race for the confirmed COVID19 cases by states in India.","a3674a2a":"## 4. Drop Columns and modify dataframe","9af83a9a":"## Install Bar Chart Race","be0c942b":"## 6. Create the BarChartRace and save file as mp4","861d5b62":"## 1. Import Libraries","bbf5c57f":"## 2. Load Data","d572aeef":"# COVID19 India - Bar Chart Race"}}