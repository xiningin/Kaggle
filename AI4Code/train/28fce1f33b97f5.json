{"cell_type":{"37ae1de7":"code","6c017a15":"code","9ecd1c1b":"code","54c930fd":"code","0b03bdf0":"code","0874c5cd":"code","7bbc68a6":"code","9194e15c":"code","110c87c3":"code","595cdea6":"code","7139a49f":"markdown","10b468f8":"markdown","88d6b46b":"markdown","d48acdf2":"markdown","7430abee":"markdown","bef38231":"markdown","cdb73e2a":"markdown","38e0e071":"markdown","4410ca60":"markdown","daa963bc":"markdown","c13582d5":"markdown"},"source":{"37ae1de7":"# Importing required modules\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Settings to produce nice plots in a Jupyter notebook\nplt.style.use('fivethirtyeight')\n%matplotlib inline\n\n# Reading in the data\nstock_data = pd.read_csv('..\/input\/stock_data.csv', parse_dates=['Date'], index_col='Date')\nbenchmark_data = pd.read_csv('..\/input\/benchmark_data.csv', parse_dates=['Date'], index_col='Date').dropna()","6c017a15":"# Display summary for stock_data\nprint('Stocks\\n')\nprint(stock_data.info())\n# Display summary for benchmark_data\nprint('\\nBenchmarks\\n')\nprint(benchmark_data.info())","9ecd1c1b":"# visualize the stock_data\nstock_data.plot(subplots=True, title='Stock Data')\n\n# summarize the stock_data\nprint(stock_data.describe())\nplt.show()\n","54c930fd":"# plot the benchmark_data\nbenchmark_data.plot(title='S&P 500')\n\n# summarize the benchmark_data\nprint(benchmark_data.describe())\nplt.show()","0b03bdf0":"# calculate daily stock_data returns\nstock_returns = stock_data.pct_change()\n\n# plot the daily returns\nstock_returns.plot()\nplt.show()\n# summarize the daily returns\nstock_returns.describe()","0874c5cd":"# calculate daily benchmark_data returns\nsp_returns = benchmark_data['S&P 500'].pct_change()\n\n# plot the daily returns\nsp_returns.plot(c='green')\nplt.show()\n# summarize the daily returns\n# ... YOUR CODE FOR TASK 6 HERE ...\n","7bbc68a6":"# calculate the difference in daily returns\nexcess_returns = stock_returns.sub(sp_returns, axis=0)\n\n# plot the excess_returns\nexcess_returns.plot()\nplt.show()\n# summarize the excess_returns\nexcess_returns.describe()","9194e15c":"# calculate the mean of excess_returns \navg_excess_return = excess_returns.mean(axis=0, skipna=True)\n\n# plot avg_excess_returns\navg_excess_return.plot.bar(title='Return Difference')\nplt.show()","110c87c3":"# calculate the standard deviations\nsd_excess_return = excess_returns.std(axis=0, skipna=True)\n\n# plot the standard deviations\nsd_excess_return.plot.bar(title='Standard Deviation of the Return')\nplt.show()","595cdea6":"# calculate the daily sharpe ratio\ndaily_sharpe_ratio = avg_excess_return.div(sd_excess_return)\n\n# annualize the sharpe ratio\nannual_factor = np.sqrt(252)\nannual_sharpe_ratio = daily_sharpe_ratio.mul(annual_factor)\n\n# plot the annualized sharpe ratio\nannual_sharpe_ratio.plot.bar(title='Annualized Sharpe Ration: Stocks vs S&P 500')\nplt.show()","7139a49f":"## 7. Calculating Excess Returns for Amazon and Facebook vs. S&P 500\n<p>Next, we need to calculate the relative performance of stocks vs. the S&amp;P 500 benchmark (that is the \"excess returns\"). This is calculated as the difference in returns between <code>stock_returns<\/code> and <code>sp_returns<\/code> for each day.<\/p>","10b468f8":"## 3. Visualization - First insight\n<p>OK as we see there are 252 entries for the companies' stocks (and in Benchmark frame since we droped the NaN values). Before we proceed into further analysis, let's visualize our dataframes so we can get a general idea of the movement of stocks.<\/p>","88d6b46b":"## 11. Conclusion\n<p>Given the two Sharpe ratios, which investment should we go for? In 2016, Amazon had a Sharpe ratio twice as high as Facebook. This means that an investment in Amazon returned twice as much compared to the S&amp;P 500 for each unit of risk an investor would have assumed. In other words, in risk-adjusted terms, the investment in Amazon would have been more attractive.<\/p>\n<p>This difference was mostly driven by differences in return rather than risk between Amazon and Facebook. The risk of choosing Amazon over FB (as measured by the standard deviation) was only slightly higher so that the higher Sharpe ratio for Amazon ends up higher mainly due to the higher average daily returns for Amazon. <\/p>\n<p>When faced with investment alternatives that offer both different returns and risks, the Sharpe Ratio helps to make a decision by adjusting the returns by the differences in risk and allows an investor to compare investment opportunities on equal terms, that is, on an 'apples-to-apples' basis.<\/p>\n<p>**DISCLAIMER:** The analysis been made in this mini-project intends in showcasing the Sharpe Ratio and the capabalities of pandas library and SHOULD NOT be considered  either as an investement guide or an exhortation into financial choices\/strategies. One should study more theories like <em>Portfolio Risk Theory<\/em> and be actively engaged in Financial Exchange, so as always procced at your own risk .","d48acdf2":"## 10. Finally: The Sharpe Ratio itself. Show us those numbers\n<p>Now we just need to compute the ratio of <code>avg_excess_returns<\/code> and <code>sd_excess_returns<\/code>. The result is now finally the <em>Sharpe ratio<\/em>, in a daily basis, and indicates how much more (or less) return the investment opportunity under consideration yields per unit of risk.<\/p>\n<p>The Sharpe Ratio is often <em>annualized<\/em> by multiplying it by the square root of the number of periods. We have used daily data as input, so we'll use the square root of the number of trading days (5 days, 52 weeks, minus a few holidays): \u221a252<\/p>","7430abee":"## 2. A first, exploratory look on data\n<p>First things first, let's have an insight about how many records are there in our datasets.<\/p>","bef38231":"## 4. Visualize & summarize daily values for the S&P 500\n<p>At glimpse, though both stocks have incremental tedency Amazon stocks seem to be way higher than Facebook stocks. Now we are going to do the same proccess in the S&P 500 Benchmark. We should consider the \"Benchmark\" as standard\/a reference point for our evaluation.<\/p>","cdb73e2a":"## 9. Standard Deviation of the Return Difference\n<p>It looks like there was quite a bit of a difference between average daily returns for Amazon and Facebook.<\/p>\n<p>Next, we calculate the standard deviation of the <code>excess_returns<\/code>. This shows us the amount of risk an investment in the stocks implies as compared to an investment in the S&amp;P 500. This is also known as the \"volatility\" of stocks<\/p>","38e0e071":"## 1. Exploring the Sharpe-ratio's usage\n<p>An investment may make sense if we expect it to return more money than it costs. But returns are only part of the story because they are risky, meaning that financial volatility leads to a range of possible outcomes. But how does one compare different investments that may deliver similar results on average, but exhibit different levels of risks?<\/p>\n<p><img style=\"float: left ; margin: 5px 20px 5px 1px;\" width=\"200\" src=\"https:\/\/assets.datacamp.com\/production\/project_66\/img\/sharpe.jpeg\"><\/p>\n<p>This is where William Sharpe enters the fray. He introduced the <a href=\"https:\/\/web.stanford.edu\/~wfsharpe\/art\/sr\/sr.htm\"><em>reward-to-variability ratio<\/em><\/a> in 1966 that soon came to be called the Sharpe Ratio. It looks up at the difference in returns for two investments and compares the average difference to the standard deviation (as a measure of risk) of this difference. A higher Sharpe ratio means that the reward will be higher for a given amount of risk. It is common to compare a specific opportunity against a benchmark that represents an entire category of investments. For more details on William Sharpe and how the Sharpe-ratio works <a href=\"https:\/\/en.wikipedia.org\/wiki\/William_F._Sharpe\"> click here<\/a>.<\/p>\n<p>The Sharpe ratio is usually calculated for a portfolio and uses the risk-free interest rate as benchmark. We will simplify our example and use stocks instead of a portfolio. Here will we usethe stocks of the two tech giants Facebook and Amazon. As benchmark we'll use the S&amp;P 500 that measures the performance of the 500 largest stocks in the US.<\/p>","4410ca60":"## 8. The Average Difference in Daily Returns Stocks vs S&P 500\n<p>Now we can finally start computing the Sharpe Ratio. First we need to calculate the average (expected value) of the <code>excess_returns<\/code>. This tells us how much more or less the investment yields per day compared to the benchmark.<\/p>","daa963bc":"## 6. Daily S&P 500 returns\n<p>The return for both stocks follow a similiar pattern, re-ensuring the rather obvious that there is not an absolute best choice between two similar \"objects\" in comparison. This encompasses the risk of financial choices for the rational individual. Now we do the same for the S&amp;P 500 Benchmarck, calculating daily returns and plotting the output only this time formating them into a pandas.Series. <\/p>","c13582d5":"## 5. Defining Sharpe Ratio: Starting with Daily Stock Returns\n<p>The Sharpe Ratio uses the difference in returns between the two investment opportunities under consideration and is mathematically expressed with the following formula:<\/p>\n<p>$$S=\\frac{Expected\\ Return\\ of\\ Portfolio - Risk\\ Free\\ Rate}{Portofolio\\ Standard\\ Deviation} \\equiv \\frac{{\\bar{R}_p} - {R_f}}{{\\sigma}_p}$$\n<p>However, our data show the historical value of each investment, not the return. To calculate the return, we need to calculate the percentage change in value from one day to the next. We'll also take a look at the summary statistics because these will become our inputs as we calculate the Sharpe Ratio. Can you already guess the result?<\/p>"}}