{"cell_type":{"161a70f8":"code","34fd0552":"code","ce23156f":"code","4f4a198b":"code","fef16577":"code","0431d96d":"code","d05c7c69":"code","6eae2da6":"code","48c57f5e":"code","ed48424a":"code","cd58cd75":"code","7c419563":"code","45a43379":"code","c92ed07d":"code","be18a804":"code","11db7119":"code","a5f3e8bb":"code","b48dddb7":"code","7f9423e4":"code","0c377e2d":"code","a8677015":"code","bf3586a5":"code","f272a1ae":"code","f3fd2e61":"code","dbffc1d3":"code","0c4779ae":"code","2ec17b80":"code","c2c06176":"code","ab57d7ca":"code","85db509f":"code","180eff34":"code","d948eb82":"code","d36a841d":"code","b2ac84b4":"code","e302b733":"code","da87084b":"code","4b7c86f4":"code","227aa3a7":"code","3e9659a2":"code","07f597d9":"code","e2af33ec":"code","d5543f83":"code","af872140":"code","51b80beb":"code","998a193c":"code","8a4677da":"code","5aa36212":"code","4c41a4e1":"code","c72fcd0b":"code","1720abf0":"code","c7b9804a":"code","90f69ab2":"code","c508380a":"code","107c1aba":"code","826ffb96":"code","20e43906":"code","d37c8aa7":"code","fa248660":"code","6ed7af70":"code","4fb1777f":"code","17451727":"code","38d33da6":"code","4a993113":"code","243be0bb":"code","877018db":"code","eb07a193":"code","744eb40e":"code","9323b734":"code","c8f9fa9e":"code","97299fe9":"code","583ca7f0":"code","e309085c":"code","b47784d1":"code","c6c5c5e8":"code","16cb00c1":"code","d1a7ae99":"code","f12e31ab":"markdown","cad8e16b":"markdown","3c4d9124":"markdown","c18b6aab":"markdown","e74ab689":"markdown","14aba591":"markdown","95977b2f":"markdown","b2b5c4ff":"markdown","bbc2cdb2":"markdown","05b85571":"markdown","ba2a5f82":"markdown","8da833f9":"markdown","ddad5423":"markdown","86816d25":"markdown","be6d2649":"markdown","631c165d":"markdown","c404c4f0":"markdown","72f5db89":"markdown","8ea41c6d":"markdown"},"source":{"161a70f8":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","34fd0552":"data=pd.read_csv(\"..\/input\/housing-data\/housing2 (1) (1).csv\")","ce23156f":"data","4f4a198b":"data.info()","fef16577":"data.isnull().sum()","0431d96d":"data.describe()","d05c7c69":"data.describe(include=\"object\")","6eae2da6":"plt.scatter(data = data , x=\"longitude\" , y=\"latitude\" , c =data[\"median_house_value\"]  )\nplt.colorbar ()\nplt.show()","48c57f5e":"(data['gender'].value_counts()\/data.shape[0]).plot.pie(autopct='%1.2f%%')","ed48424a":"sns.barplot(x=\"ocean_proximity\",y=\"median_house_value\",data=data)","cd58cd75":"sns.relplot(x=\"median_income\", y=\"median_house_value\", data=data)","7c419563":"data.hist(bins=120 , figsize=(16,20))\nplt.show()","45a43379":"data.describe()","c92ed07d":"# replace \"no\" to nan:\ndata['households'].replace(\"no\", np.nan , inplace=True)","be18a804":"# \"households\" should be converted into numeric value..\ndata[\"households\"]=data[\"households\"].astype('float64')","11db7119":"sns.relplot(x=\"total_rooms\", y=\"households\", data=data)","a5f3e8bb":"sns.relplot(x=\"total_rooms\", y=\"population\", data=data)","b48dddb7":" # check whether there are another value express nan in  \"ocean_proximity\" or \"gender\"..","7f9423e4":"data[\"ocean_proximity\"].value_counts()","0c377e2d":"data[\"gender\"].value_counts()","a8677015":"# there aren't \"no\" value express nan ..","bf3586a5":"data.info()","f272a1ae":"data.info()","f3fd2e61":"missing = data.isnull().sum()\nmissing","dbffc1d3":"missing = missing[missing>0]\nmissing.sort_values(inplace=True)\nplt.figure(figsize=(20,10))\nmissing.plot.bar()","0c4779ae":"data.isnull().sum()","2ec17b80":"# Now , the num of null values in [\"total_bedrooms\",\"households\",\"median_income\",\"gender\"] are big so we can't drop it \n# we will work to fill it ..","c2c06176":"fill_list = ['female' , \"male\"]\ndata['gender'] = data['gender'].fillna(pd.Series(np.random.choice(fill_list , size = len(data.index))))","ab57d7ca":"# label encoding to \"ocean_proximity\" and \"gender\" features..\nfrom sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\n","85db509f":"data[\"ocean_proximity\"]=le.fit_transform(data[\"ocean_proximity\"])","180eff34":"data[\"ocean_proximity\"].value_counts()","d948eb82":"data[\"gender\"]=le.fit_transform(data[\"gender\"])","d36a841d":"data[\"gender\"].value_counts()","b2ac84b4":"data.info()","e302b733":"data.columns","da87084b":"data = data.ffill().add(data.bfill()).div(2)","4b7c86f4":"data.isnull().sum()","227aa3a7":"#Now, no null value..","3e9659a2":"data.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,4))\nplt.show()","07f597d9":"plt.figure(figsize=(12,10))\ndata.boxplot(rot=45)","e2af33ec":"#Define a function to determine outlier boundaries\n\ndef outlier_limits(col):\n    Q3,Q1=np.nanpercentile(col,[75,25])\n    IQR=Q3-Q1\n    UL=Q3+1.5*IQR\n    LL=Q1-1.5*IQR\n    return UL, LL","d5543f83":"for column in data.columns:\n    if data[column].dtype != 'object':\n        UL, LL = outlier_limits(data[column])\n        data[column] = np.where((data[column] > UL) ,UL , np.where((data[column] < LL),LL, data[column]))\n","af872140":"data.info()","51b80beb":"data.isnull().sum()","998a193c":"# ultirnative dealing with outliers","8a4677da":"#data.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,3))\n#plt.show()","5aa36212":"#sns.boxplot(x = data['total_rooms'])","4c41a4e1":"#fig , ax = plt.subplots(figsize=(12,8))\n#ax.scatter(x= data[\"total_rooms\"],y = data[\"median_house_value\"])\n#ax.set_xlabel(\"total_rooms\")\n#ax.set_ylabel(\"median_house_value\")\n#plt.show()","c72fcd0b":"#t_df = data[data['total_rooms']< 12000]\n#fig , ax = plt.subplots(figsize=(12,6))\n#ax.scatter(x= t_df[\"total_rooms\"],y = t_df[\"median_house_value\"])\n#ax.set_xlabel(\"total_rooms\")\n#ax.set_ylabel(\"median_house_value\")\n#plt.show()","1720abf0":"#from pandas.plotting import scatter_matrix\n#attributes=[\"median_house_value\",\"median_income\",\"total_rooms\",\"housing_median_age\"]\n#scatter_matrix(data[attributes],figsize=(12,8))","c7b9804a":"#data.shape","90f69ab2":"# remove outliers with the help of quantile","c508380a":"#lower_limit=data[\"median_house_value\"].quantile(0.25)\n#lower_limit","107c1aba":"#upper_limit=data[\"median_house_value\"].quantile(0.95)\n#upper_limit","826ffb96":"#data=data[(data[\"median_house_value\"]<upper_limit) ]","20e43906":"#data.shape","d37c8aa7":"#from pandas.plotting import scatter_matrix\n#attributes=[\"median_house_value\",\"median_income\",\"total_rooms\",\"housing_median_age\"]\n#scatter_matrix(data[attributes],figsize=(12,8))\n","fa248660":"plt.figure(figsize=(16,10))\nsns.heatmap(data.corr(), cbar = True , annot=True)","6ed7af70":"#strong corelation between \"households\" , \"population\" , \"total bedrooms\" and \"total rooms\" .\n#strong corelation between \"median_house_value\" , \"median_income\". ","4fb1777f":"data.drop(\"gender\",axis=1,inplace = True)","17451727":"X = data.drop(\"median_house_value\" , axis = 1).values\ny = data['median_house_value'].values","38d33da6":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test = train_test_split(X,y, test_size=0.25 , random_state=42)","4a993113":"from sklearn.preprocessing import StandardScaler\nscale = StandardScaler ()\nX_train = scale.fit_transform(X_train)\nX_test = scale.fit_transform(X_test)","243be0bb":"data.isnull().sum()","877018db":"from sklearn.linear_model import LinearRegression\nlr = LinearRegression()\nlr.fit(X_train,y_train)","eb07a193":"lr.score(X_train,y_train)","744eb40e":"lr.score(X_test,y_test)","9323b734":"from sklearn.linear_model import Ridge\nrid = Ridge()","c8f9fa9e":"rid.fit(X_train,y_train)","97299fe9":"rid.score(X_train,y_train)","583ca7f0":"rid.score(X_test,y_test)","e309085c":"y_pred = lr.predict(X_test)","b47784d1":"y_pred2 = rid.predict(X_test)","c6c5c5e8":"from sklearn.metrics import r2_score\nr2 = r2_score(y_test , y_pred)\nr2","16cb00c1":"data.columns","d1a7ae99":"\"\"\"\"\"\nfigure, ((ax1, ax2), (ax3, ax4), (ax5, ax6), (ax7, ax8), (ax9, ax10)) = plt.subplots(nrows=5, ncols=2)\nfigure.set_size_inches(16,28)\n_ = sns.regplot(data['longitude'], data['median_house_value'], ax=ax1)\n_ = sns.regplot(data['latitude'], data['median_house_value'], ax=ax2)\n_ = sns.regplot(data['housing_median_age'], data['median_house_value'], ax=ax3)\n_ = sns.regplot(data['total_rooms'], data['median_house_value'], ax=ax4)\n_ = sns.regplot(data['total_bedrooms'], data['median_house_value'], ax=ax5)\n_ = sns.regplot(data['population'], data['median_house_value'], ax=ax6)\n_ = sns.regplot(data['households'], data['median_house_value'], ax=ax7)\n_ = sns.regplot(data['median_income'], data['median_house_value'], ax=ax8)\n_ = sns.regplot(data['median_house_value'], data['median_house_value'], ax=ax9)\n_ = sns.regplot(data['ocean_proximity'], data['median_house_value'], ax=ax10)\n\"\"\"\"\"","f12e31ab":"-------------------------------","cad8e16b":"-as median income increase median housing value increase.\n\n-The price of the houses next to ocean is too high compare to all other houses.a","3c4d9124":"#### In households there are \"no\" value ...>>which should be null value","c18b6aab":"# Data Preprocessing","e74ab689":"## Business insights ","14aba591":"# Thank You","95977b2f":"# EDA","b2b5c4ff":"#### 1-Fill missing values","bbc2cdb2":"### there are more females than males.","05b85571":"### as the number of rooms in a building block increase the population and households increase.","ba2a5f82":"----------------------","8da833f9":"### 2-Removing outliers","ddad5423":"-------------------------","86816d25":"###### there are 20640 entries and 11 coloumns ..\n###### there are null values in \"housing_median_age\" , \"total_bedrooms\",\"population\",\"households\",\"median_income\",\"gender\" ","be6d2649":"from histograms:\n- 'housing_median_age' : most of houses is between 10 to 45 years old .. and there are big number of houses above 50 year .\n- 'total_rooms'and 'total_bedrooms' are almost have the same curve..\n- total_rooms' has range between 0 and 10000 rooms in block  with mean= 2500 aproximatly.\n- 'total_bedrooms'has range between 0 and 1000 rooms in block  with mean= 540 aproximatly.\n- 'population', 'households' also have the same curve and the same range as in 'total_rooms'and 'total_bedrooms'.\n- 'median_income' most of people earn between 2.5k and 5k. few people has more than 10K up to 15k , then there are a small increase of income above 15k.\n- 'median_house_value' : its curve looks some how like 'median_income' curve so there are relation between them .\n- 'median_house_value': most of houses values are between 50000 and 350000... there are a huge number of houses values above 500000 .","631c165d":"The price of the houses next to ocean is too high compare to all other houses.","c404c4f0":"### 1.Most houses are aged between 18-37 years.\n### 2.Most building blocks has rooms between 1448-3148 room.\n### 3.Most building blocks has bed rooms between 336-977 room.\n### 4.Most building blocks has population between 787-1725 people.\n### 5.Most building blocks has households between 313-538 people.\n### 6.Most people has income between 2138.050- 4583.300 pounds.\n### 7.Most houses cost between 119600-264725 pounds .","72f5db89":"### Island houses are the most expensive,while Inland houses are the cheapest.\n\n","8ea41c6d":"## Customers with higher income tends to buy more expensive houses."}}