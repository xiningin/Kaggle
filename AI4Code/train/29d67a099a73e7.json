{"cell_type":{"cd39ec11":"code","578c48f1":"code","c3467333":"code","63815042":"code","b4569590":"code","ede5c6ff":"code","133aad84":"code","63e886db":"code","19052119":"code","41732416":"code","86dae091":"code","2891271a":"code","2111b41c":"code","a2b25b85":"code","9cd2f160":"code","7bc1ef98":"code","2309bb19":"markdown","0eac3779":"markdown","d7258690":"markdown","7cd2bef7":"markdown","702639df":"markdown","7e03c060":"markdown","cec329ec":"markdown","2e9f9eb8":"markdown","15d8c6c9":"markdown","f2b2201a":"markdown","7e011ad6":"markdown","98317e48":"markdown","7177c387":"markdown","0eae516c":"markdown","4c51c721":"markdown","13877c56":"markdown","1668269c":"markdown","4a062c50":"markdown","c913abed":"markdown","c4e12ef9":"markdown","7bf022d0":"markdown","85da7244":"markdown","31aa58f0":"markdown","80995807":"markdown","bd9215bc":"markdown","5daa0215":"markdown","1e09d159":"markdown","9068b9ee":"markdown","99aa51d8":"markdown","d394b994":"markdown","59b2b1ad":"markdown","afd5da25":"markdown","80677ee9":"markdown","4ea85fc7":"markdown","70584e95":"markdown","78dcfe23":"markdown","d5bcd355":"markdown","2429baa2":"markdown","8868fa2f":"markdown"},"source":{"cd39ec11":"import pandas as pd  #to read and process the file\n#import numpy as np\nfrom sklearn.cluster import KMeans #package with built-in K-Means algorithm \nimport matplotlib.pyplot as plt  #to build graphs which will help with identification of optimum number of clusters","578c48f1":"data = pd.read_csv(\"..\/input\/Wholesale-customers-data.csv\")","c3467333":"data.head()","63815042":"data.describe()","b4569590":"X = data.drop(columns=[\"Channel\", \"Region\"])","ede5c6ff":"X.head()","133aad84":"print(X.isna().head())\nprint(X.isna().sum())","63e886db":"wcss = []\nfor i in range(1, 10):\n    kmeans = KMeans(n_clusters=i, init='k-means++', max_iter=300, n_init=10, random_state=0)\n\n    kmeans.fit(X)\n    wcss.append(kmeans.inertia_)\nplt.plot(range(1, 10), wcss)\nplt.title('Elbow-Method using WCSS')\nplt.xlabel('Number of Clusters (K)')\nplt.ylabel('Within-Cluster-Sum-of-Squares')\nplt.show()","19052119":"kmeans = KMeans(n_clusters=5, init='k-means++', max_iter=300, n_init=10, random_state=0)\nkmeans.fit(X)","41732416":"clusters = kmeans.predict(X)","86dae091":"Xk = X\nXk['Cluster']=clusters #adding column with cluster number to the dataset","2891271a":"Xk.head()","2111b41c":"Xk['Cluster'].value_counts()","a2b25b85":"Xk.sum(axis=0)","9cd2f160":"Xk.to_csv('Cust_Segmentation_ClusterWise.csv')","7bc1ef98":"%%HTML\n<div class='tableauPlaceholder' id='viz1571411532466' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Cu&#47;CustomerAnalytics_15713293789760&#47;Sheet1&#47;1_rss.png' style='border: none' \/><\/a><\/noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' \/> <param name='embed_code_version' value='3' \/> <param name='site_root' value='' \/><param name='name' value='CustomerAnalytics_15713293789760&#47;Sheet1' \/><param name='tabs' value='no' \/><param name='toolbar' value='yes' \/><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Cu&#47;CustomerAnalytics_15713293789760&#47;Sheet1&#47;1.png' \/> <param name='animate_transition' value='yes' \/><param name='display_static_image' value='yes' \/><param name='display_spinner' value='yes' \/><param name='display_overlay' value='yes' \/><param name='display_count' value='yes' \/><param name='filter' value='publish=yes' \/><\/object><\/div>                <script type='text\/javascript'>                    var divElement = document.getElementById('viz1571411532466');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https:\/\/public.tableau.com\/javascripts\/api\/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                <\/script>","2309bb19":"#### Check for Unfilled cells to ensure they don't influence the outcome","0eac3779":"Everything looks great! Let's dive into building the algorithm now","d7258690":"Let's remove the fields not required for the clustering analysis, i.e. Channel and Region","7cd2bef7":"## What is Clustering?","702639df":"Data visualization is nothing but graphical representation of the data, typically in the form of graphs and charts. This would in turn aid understanding the trends, outliers and patterns in the data.\n\nThere are various tools available in the market, free and paid like Tableau, Qlik Sense, AWS Quiksight, Google DataStudio etc. For this exercise, we are using Tableau Public","7e03c060":"Cluster analysis or Clustering is the process of grouping a set of objects *(or Customers in Marketing parlance)* in such a way that objects in the same group have similar characteritics *(like buying patterns or social\/economic strata, gender etc)* to each other \n\nIn this exercise, we shall be using KMeans Cluster Algorithm.<br>\nThis is part of the Unsupervised Learning family of the Machine Learning. You may refer to my [post here](https:\/\/www.kaggle.com\/nadarsubash\/kmeans-clustering-in-theory-hands-on-python) to learn indepth about KMeans Cluster Analysis","cec329ec":"# Business Analytics","2e9f9eb8":"##### Fresh products seem to be the highest selling category, followed by Grocery","15d8c6c9":"#### Drop in WCSS reduces significantly at 5. Hence we consider optimum k to be 5","f2b2201a":"# Load the packages and Files","7e011ad6":"##### We see that out of 440 transactions, 226 *(almost 50%)* is tagged to cluster **3**","98317e48":"In this exercise, we are aiming to build pattern around customer buying behaviour and then recommend targetted marketing campaign. <br>\nWe are using freely available data for Wholesale customers from UCI Machine Learning Repository <br>\n*You can find the data [here](https:\/\/archive.ics.uci.edu\/ml\/datasets\/wholesale+customers)*","7177c387":"### Now that the visualization is ready, time to put on your Business Analytics hat!","0eae516c":"Let's see how does the cluster segregation looks:","4c51c721":"### Let's see how Analytics (*read Clustering Algorithm*) can help companies build a Targeted Marketing Campaign","13877c56":"# Feature Engineering\n##### Selecting the right columns","1668269c":"##### The within-cluster sum of squares is a measure of the variability of the observations within each cluster. In general, a cluster that has a small sum of squares is more compact than a cluster that has a large sum of squares\n###### @minitab","4a062c50":"##### Below sharing the visualization created on AWS QuickSight\n![](https:\/\/raw.githubusercontent.com\/nadarsubash\/articles\/master\/Cust_Seg_ClusterWise.jpg)","c913abed":"#### Now Load the Dataset","c4e12ef9":"#### First let's import all the Libraries required to build the algorithm","7bf022d0":"# Build Tableau viz","85da7244":"Let's see basic characteristics of the data","31aa58f0":"![image.png](https:\/\/raw.githubusercontent.com\/nadarsubash\/articles\/master\/aim-bullseye-dart-small2.jpg)\n*Photo by Skitterphoto from Pexels*","80995807":"Targeted Marketing Campaing is an exercise of identifying similarly behaving customers who are more likely to react positively to a given event\/campaign than others. This helps in focussed marketing and higher yield per campaign\n\nThis helps companies in general in:<br>\n1) Reducing the cost & efforts of marketing <br>\n2) Being relevant to the customer by not pushing products\/service customer is not likely to buy","bd9215bc":"#### We now export the transaction file which is clustered above, so that we can visualize and subsequently analyse the cluster wise buying trend. Basis this analysis, we shall build marketing recommendation for specific group (cluster)\n*Note: You may use various Visualization tools available in the market or may use Python packages like Matplotlib, Bokeh, Seaborn etc for visualizaing the clusters*","5daa0215":"# How to build a Targeted Marketing Campaign \n### Using Clustering (KMeans) and Visualization tool (Tableau)","1e09d159":"*You may refer to my [post here](https:\/\/www.kaggle.com\/nadarsubash\/kmeans-clustering-in-theory-hands-on-python) to understand WCSS in detail*","9068b9ee":"WCSS is computed as:<br>\n$$WCSS=\\sum_{i=1}^k(\\sum_{j=1}^n (X_{j}-C_{i})^2)$$  <br>\n*where:* <br>\n*$C_{k}$ is centroid for observation $X_{i}$* <br>\n*k is number of centroids* <br>\n*n is number of objects within respective centroid* <br>","99aa51d8":"##### Feel free to share your suggestions on any other observations","d394b994":"#### Steps involved in building Tableau viz for Customer Segmentation:\n1) **Load** the 'Cust_Segmentation_ClusterWise.csv' file in the 'Data Source' tab<br>\n2) Go to **'Sheet 1'**<br>\n3) Add 'Delicassen' to Row. This would automatically create a **Bar chart** with Sum(Delicassen) as row<br>\n4) Now add 'Clusters' field to Columns. This will create view of Delicassen split **clusterwise**<br>\n5) Now add all the other fields, one-by-one, to the Columns in view part of the sheet (and not shelve). This creates **sub-groups** of all the product category, clusterwise. In Tableau terms, Measure Values<br>\n6) Add 'Clusters' to **Color Marks**<br>\n7) Select: Analysis -> **Percentage of** -> Table. This would give % of respective product category across the table. So you would see which gourp is the higest\/lowest spender of specific category<br>\n8) Show **Mark label** will then display the % for each category","59b2b1ad":"From the details above, we see that we may get some buying pattern based on either:<br>\n1) Region <br>\n2) Channel of customer touch point and <br>\n3) various category of products","afd5da25":"##### For this exercise, we shall take the product categories to form buying pattern among the customers","80677ee9":"**Here are some of the findings:**\n\n1) Cluster 0: **Discounts on Fresh and Frozen product to be offered** as there is a low buying in these product categories. <br>\n\n2) Cluster 1 & 4 is a very small sized population (6.6% of total Customers) and hence can be skipped for this marketing campaign<br>\n\n3) Cluster 2: Seems to be antonym of Cluster 0. Highest buying is in Fresh and Frozen category, followed by Delicassen. **Promotions to be offered on Detergent, Milk and Grocery products**<br>\n\n4) Cluster 3: **Loyal Customers**. Highest spendings across the category. Special promotions like early peek to the promotion events, special offers on new launches etc to build premium customer segment","4ea85fc7":"## What is Targeted Marketing Campaign?","70584e95":"### What is Visualization?","78dcfe23":"This brings to the conclution of this article. Any suggestion or advise is most welcome! ","d5bcd355":"##### voila, your visualization is ready!!","2429baa2":"#### We have to now decide what kind of pattern we should look for. Basis that, we select the appropriate fields in the file for further processing","8868fa2f":"# Find the optimal cluster numbers K\n### using WCSS plot"}}