{"cell_type":{"89ecc789":"code","c6d49e51":"code","1ae6c571":"code","d5048714":"code","46b9507d":"code","497f5dcc":"code","8efd616c":"code","1f730094":"code","76affe2e":"code","01a2c6e2":"code","f8538c7a":"code","970d3a80":"code","df952ef3":"code","7a3c3587":"code","06db3396":"code","a23d57e0":"code","92d8ff06":"code","9e768f89":"code","5103fe6e":"code","197001e7":"code","302d47cc":"code","e65d240c":"code","8227ca62":"code","dc75af11":"code","e6a4bc52":"code","f1cc53a7":"code","a916d02b":"code","aa9b2923":"code","6260dcf8":"code","e8776bde":"code","d79e532c":"code","30110999":"code","5f6e51e6":"code","8ff0e54c":"code","cae23b59":"code","54629bda":"code","18c3c311":"code","75509d38":"code","5abe6ec8":"code","b2e629f9":"code","efd6052c":"code","4f6277a2":"code","358d5a1e":"code","af402418":"code","9a560f0b":"code","dc5867a7":"code","5175edd2":"code","b668a20c":"code","69b5f5dd":"code","dfa04087":"code","7790a6fd":"code","05704176":"code","5e01d00c":"markdown","15dd6f60":"markdown","366e6466":"markdown","186ea900":"markdown","2abc4155":"markdown","b16255dc":"markdown","9327527f":"markdown","be33ecda":"markdown","50774340":"markdown","43724762":"markdown","2ccaa1ef":"markdown","62d32d8d":"markdown","6826bedb":"markdown","f2cb3b72":"markdown","ad4e0b9b":"markdown","e7bd6e51":"markdown","44498697":"markdown","a88163ec":"markdown","cacb2259":"markdown","6afa703f":"markdown","74dafcf8":"markdown","e1437843":"markdown","ef42a88b":"markdown","03cd904a":"markdown","8271e1c9":"markdown"},"source":{"89ecc789":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","c6d49e51":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport sklearn","1ae6c571":"df_org = pd.read_csv('\/kaggle\/input\/melbourne-housing-market\/Melbourne_housing_FULL.csv')\ndf = pd.read_csv('\/kaggle\/input\/melbourne-housing-market\/MELBOURNE_HOUSE_PRICES_LESS.csv')","d5048714":"df_org.head(3)","46b9507d":"df.head(3)","497f5dcc":"df_org.columns","8efd616c":"extra_col = []\nfor col in df_org.columns:\n    if col not in df.columns:\n        extra_col.append(col)\nprint(extra_col)","1f730094":"print(df_org.shape)\nprint(df_org.dtypes)\n","76affe2e":"df_org.info()","01a2c6e2":"df_org.describe().T","f8538c7a":"print(df_org.select_dtypes(['object']).columns)","970d3a80":"# convert objects to categorical variables\nobj_cats = ['Suburb', 'Address', 'Type', 'Method', 'SellerG', 'CouncilArea',\n       'Regionname']\nfor col in obj_cats:\n    df_org[col] = df_org[col].astype('category')","df952ef3":"# convert date from object to date format\n# after converting the date to category, it would not change in the datetime\ndf_org['Date'] = pd.to_datetime(df_org['Date'])","7a3c3587":"# converting postcode 'numeric variable' to categorical\ndf_org['Postcode'] = df_org['Postcode'].astype('category')","06db3396":"# examine rooms vs bedroom2\ndf_org['Room v Bedroom2'] = df_org['Rooms'] - df_org['Bedroom2']\ndf_org","a23d57e0":"df_org['Room v Bedroom2'].value_counts()","92d8ff06":"# Drop columns\ndf_org = df_org.drop(['Room v Bedroom2', 'Bedroom2'], axis = 1)","9e768f89":"# Add age variable\ndf_org['Age'] = 2017 - df_org['YearBuilt']\n\n# identify historic homes\ndf_org['Historic'] = np.where(df_org['Age'] >= 50, 'Historic', 'Contemporary')\n\n#convert to category\ndf_org['Historic'] = df_org['Historic'].astype('category')","5103fe6e":"df_org.Historic.value_counts()","197001e7":"# Visualize the missing values\n\nfig, ax = plt.subplots(figsize = (15,7))\nsns.set(font_scale = 1.2)\nsns.heatmap(df_org.isnull(), yticklabels = False, cbar = False, cmap = 'viridis')\n\nplt.show()","302d47cc":"# Count of missing value\ndf_org.isnull().sum()","e65d240c":"# percentage of missing values\ndf_org.isnull().sum()\/len(df_org)*100","8227ca62":"print(df_org.shape)\n# to remove rows missing data in a specific column\n# as the yearbuilt column has some missing value hence it would miscalculate the historic col\ndf_org = df_org[pd.notnull(df_org['YearBuilt'])]\nprint(df_org.shape)","dc75af11":"# drop all rows having null vlaues\ndf_org = df_org.dropna()\nprint(df_org.shape)","e6a4bc52":"plt.figure(figsize = (12, 7))\nsns.heatmap(df_org.isnull(), yticklabels = False, cbar = False, cmap = 'viridis')","f1cc53a7":"df_org.describe().T","a916d02b":"df_org[df_org['Age']>800]","aa9b2923":"df_org[df_org['BuildingArea'] == 0]","6260dcf8":"df_org[df_org['Landsize'] == 0]","e8776bde":"# Confirm removal\ndf_org[df_org['BuildingArea'] == 0]","d79e532c":"df_org.describe().T","30110999":"plt.figure(figsize=(12,5))\nsns.distplot(df_org['Price'], kde = False)","5f6e51e6":"#columns having null values\n#null_col =df_org.columns[df_org.isnull().any()].tolist()\n#null_col","8ff0e54c":"#categorical features\ndf_org.select_dtypes(['category']).columns","cae23b59":"df_org['Regionname'].value_counts()","54629bda":"# Abbreviate Regionname categories\ndf_org['Regionname'] = df_org['Regionname'].map({'Southern Metropolitan' : 'S Metro',\n                                                'Northern Metropolitan' : 'N Metro',\n                                                'Western Metropolitan': 'W Metro', \n                                                'Eastern Metropolitan': 'E Metro', \n                                                'South-Eastern Metropolitan': 'SE Metro',\n                                                'Northern Victoria': 'N Vic',\n                                                'Eastern Victoria': 'E Vic',\n                                                'Western Victoria' : 'W Vic'})","18c3c311":"df_org['Regionname'].value_counts()","75509d38":"# Subplot of categorical features vs price\nsns.set_style('whitegrid')\nf, ax = plt.subplots(2,2, figsize = (15,15))\n\n# plot [0,0]\nsns.boxplot(data = df_org, x = 'Type', y = 'Price', ax= ax[0,0])\nax[0,0].set_xlabel('Type')\nax[0,0].set_ylabel('Price')\nax[0,0].set_title('Type vs Price')\n\n# Plot[0,1]\nsns.boxplot(data = df_org, x = 'Method', y= 'Price', ax = ax[0,1])\nax[0,1].set_xlabel('Method')\nax[0,1].set_title('Method vs Price')\n\n# Plot[1,0]\nsns.boxplot(data = df_org, x = 'Regionname', y= 'Price', ax = ax[1,0])\nax[1,0].set_xlabel('Regionname')\nax[1,0].set_title('Region Name vs Price')\n\n# Plot[1,1]\nsns.boxplot(data = df_org, x = 'Historic', y= 'Price', ax = ax[1,1])\nax[1,1].set_xlabel('Historic')\nax[1,1].set_title('Historic vs Price')\n\nplt.show()","5abe6ec8":"# Identify numeric features\ndf_org.select_dtypes(['float64', 'int64']).columns","b2e629f9":"# subplots of numeric features vs price\nsns.set_style('whitegrid')\nfig, ax = plt.subplots(4,2, figsize =(30,40))\n\n#plot[0,0]\nax[0,0].scatter(x = 'Rooms', y = 'Price', data = df_org, edgecolor = 'b')\nax[0,0].set_xlabel('Rooms')\nax[0,0].set_ylabel('Price')\nax[0,0].set_title('Rooms vs Price')\n\n#Plot [0,1]\nax[0,1].scatter(x = 'Distance', y = 'Price', data = df_org, edgecolor = 'b')\nax[0,1].set_xlabel('Distance')\nax[0,1].set_ylabel('Price')\nax[0,1].set_title('Distance vs Price')\n\n#Plot [1,0]\nax[1,0].scatter(x = 'Bathroom', y = 'Price', data = df_org, edgecolor = 'b')\nax[1,0].set_xlabel('Bathroom')\nax[1,0].set_ylabel('Price')\nax[1,0].set_title('Bathroom vs Price')\n\n#Plot [1,1]\nax[1,1].scatter(x = 'Car', y = 'Price', data = df_org, edgecolor = 'b')\nax[1,1].set_xlabel('Car')\nax[1,1].set_ylabel('Price')\nax[1,1].set_title('Car vs Price')\n\n#Plot [2,0]\nax[2,0].scatter(x = 'Landsize', y = 'Price', data = df_org, edgecolor = 'b')\nax[2,0].set_xlabel('Landsize')\nax[2,0].set_ylabel('Price')\nax[2,0].set_title('Landsize vs Price')\n\n#Plot [2,1]\nax[2,1].scatter(x = 'BuildingArea', y = 'Price', data = df_org, edgecolor = 'b')\nax[2,1].set_xlabel('BuildingArea')\nax[2,1].set_ylabel('Price')\nax[2,1].set_title('BuildingArea vs Price')\n\n#Plot [3,0]\nax[3,0].scatter(x = 'Age', y = 'Price', data = df_org, edgecolor = 'b')\nax[3,0].set_xlabel('Age')\nax[3,0].set_ylabel('Price')\nax[3,0].set_title('Age vs Price')\n\n#Plot [3,1]\nax[3,1].scatter(x = 'Propertycount', y = 'Price', data = df_org, edgecolor = 'b')\nax[3,1].set_xlabel('Propertycount')\nax[3,1].set_ylabel('Price')\nax[3,1].set_title('Propertycount vs Price')\n\nplt.show()\n","efd6052c":"plt.figure(figsize=(12,7))\nsns.boxplot(x= 'Rooms', y = 'Price', data = df_org)","4f6277a2":"plt.figure(figsize = (10,6))\nsns.heatmap(df_org.corr(), cmap = 'coolwarm', linewidth = 1, annot = True, annot_kws = {'size':9})\nplt.title('Variable Correlation')","358d5a1e":"# Identify numeric features\ndf_org.select_dtypes(['float64', 'int64']).columns","af402418":"# Split test and train\nX = df_org[['Rooms', 'Distance', 'Bathroom', 'Car', 'Landsize',\n       'BuildingArea', 'Propertycount','Age']]\ny = df_org['Price']","9a560f0b":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X,y, test_size = .20, random_state= 0)","dc5867a7":"# model fitting and prediction\nfrom sklearn.linear_model import LinearRegression\nlm = LinearRegression()\nlm.fit(X_train, y_train)","5175edd2":"#predictions\ny_pred = lm.predict(X_test)","b668a20c":"from sklearn import metrics\nprint('MAE: ', metrics.mean_absolute_error(y_test, y_pred))\nprint('MSE: ', metrics.mean_squared_error(y_test, y_pred))\nprint('RMSE: ', np.sqrt(metrics.mean_squared_error(y_test, y_pred)))","69b5f5dd":"# Calulate R squared\nprint('R^2 =', metrics.explained_variance_score(y_test, y_pred))","dfa04087":"# Actual vs predictions scatter\nplt.scatter(y_test, y_pred)","7790a6fd":"# Histogram of the distribution of residuals\nsns.distplot((y_test - y_pred))","05704176":"cdf = pd.DataFrame(data = lm.coef_, index = X.columns, columns = ['Coefficients'])\ncdf","5e01d00c":"# Conclusion","15dd6f60":"## Outliers\nThe statistical summary revealed minimum values of zero for landsize and buildingArea that seem odd. Also, there is a max price of $8.4 million in the dataset. These observations will need to be investigate further to determne their validity and whether they should be included in the dataset for analysis.\n","366e6466":"### Missing Data\nBased on a quick look in the info() there are some features having missing values. so lets explore that and deal with them. ","186ea900":"## Insights\n* The majority of homes in the dataset have 4, 5 rooms.\n* The most prominent trend is that there is a negative correlation between distance from Melbourne's Central Business District (CBD) and Price. The most expensive homes (2M or more) tend to be within 20Km of the CBD.\n","2abc4155":"There are a significant amount of missing values in Price, Bathroom, Car, Landsize, Building Area, YearBuilt, Council Area, Lattitude, and Longitude. To allow for a more complete analysis, observations missing any data will be removed from the dataset.","b16255dc":"### Regression Evaluation Metrics\nThree common evaluation metrics for regression problems:\n1. Mean Absolute Error (MAE)\n2. Mean Squared Error (MSE)\n3. Root Mean Squared Error (RMSE)\nAll basic variations on the difference between what you predicted and the true values.\n\nComparing these metrics:\n\n**MAE ** is the easiest to understand, because it's the average error.\n\n**MSE** more popular than MAE, because MSE \"punishes\" larger errors, tends to be useful in the real world.\n\n**RMSE** is even more popular than MSE, because RMSE is interpretable in the \"y\" units (target units) . \nAll of these are loss functions, because we want to minimize them.\n","9327527f":"## Numeric Features\nNow, I visualize the relationships between numeric features in the dataest with price. ","be33ecda":"According to the R-squared, 47.6% of the variance in the dependent variables is explained by the model.","50774340":"After additional research, I determined that a zero land size could be indicative of 'zero-lot-line' homes-residential real estate in which the structure comes up to or very near the edge of the property line. Therefore, these observations are valid and will remain in the dataset.\n\nHowever, the observations with 'zero' BuildingArea will be removed because it is not possible for a home to have a size of zero. Also, this observation is priced ussually high at $8.4 M(the outlier identified earlier), further confirming a possible error in the data point. For these two reasons, this observations will be removed. ","43724762":"lets visualize the target variable","2ccaa1ef":"Every one unit increase in:\n* Rooms is associated with an increase in Price by 136,531.55\n* Distance is associated with a decrease in Price by 32,160.84\n* Bathroom is associated with an increase in Price by 236,639.21\n* Car space is associated with an increase in Price by 59,122.83\n* Landsize is associated with an increase in Price by 35.75\n* BuildingArea is associated with an increase in Price by 26,65.10\n* Propertycount is associated with a decrease in Price by 0.05\n* Age is associated with an increase in Price by 4,729.73","62d32d8d":"## Interpreting the Coefficients","6826bedb":"## Bivariate\n* visualization of categorical Features\n    \n    relationship between target and categorical features(suburb, address, postcode). inspite of using all of these features in the analysis, Regioname would be the best proxy of home location to use for analysis.\n    \n    based on the domain knowledge, home's real estate agent has minimal effect on a price relative to other features and will be excluded from further analysis.","f2cb3b72":"# Correlation\nTo explore the correlation of variables with one another.","ad4e0b9b":"Duplicate variables\n\n'Rooms' and 'Bedroom2' both contain information on the number of rooms of a home, ","e7bd6e51":"# Remove outlier\ndf_org = df_org[df_org['BuildingArea'] != 0]","44498697":"### Feature Engineering\nThe dataset contains the year the home was built. Although this is being measured by the specific year, what this variable is really probing is the age of the home. As such, home age can be expressed in terms of historic(greater than 50 years old) vs non-historic(less than 50 years old) to get the heart of this information in a more condensed way, allowing for better analysis and visualization.","a88163ec":"# Exploratory Data Analysis (EDA)","cacb2259":"# Data Pre-processing\n* import libraries\n* read data\n* data info, shape, describe, head, dtypes\n* convert object to category except date\n* convert date to datetime\n* convert numeric (postcode) to category\n* remove duplicates\n* remove columns not informative","6afa703f":"# Linear Regression","74dafcf8":"RMSE tells us explicitly how much our predictions deviate, on average, from the actual values in the dataset. ","e1437843":"### Weak Positive Correlation\nAge and Price\n### Moderate Positive Correlation\nRooms and Price\nBathrooms and Price\nBuilding Area and Price\n\nThe Rooms, Bathroom and Building Area features are also moderately correlated with one another as they are all measures of home size. ","ef42a88b":"## Analyze the Residuals","03cd904a":"The differences between these variables are minimal so keeping both would only be duplicating information. Thus, the Bedroom2 feature will be removed from the data set altogether to allow for better analysis downstream.","8271e1c9":"## Insights\n* Median price for houses are over 1M, townhomes are 800k- 900k and units are approx  500k. \n* Home prices with different selling methods are relatively the same across the board.\n* Median prices in the Metropolitan Region are higher than that of Victoria Reigon- with Southern metro being the area with the highest median home price (~1.3M).\n* With an average price of 1M, historic homes(older than 50 years old) are valued much higher than newer homes in the area, but have more variation in price. \n"}}