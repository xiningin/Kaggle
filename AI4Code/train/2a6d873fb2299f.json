{"cell_type":{"32395239":"code","4a32091a":"code","37bc390f":"code","e245f871":"code","bd2dd5fc":"code","59a0855b":"code","52da525a":"code","e2d00bf2":"code","475e5bc4":"code","def00199":"code","e8370646":"code","8f31b970":"code","121c4ba4":"code","def833f7":"code","1bd24fc6":"code","c1af1874":"code","084ca85b":"code","423ecf0f":"code","06483186":"code","0d507268":"code","c62da6c1":"code","6223a5bc":"code","159663c2":"code","04fa66e7":"markdown","73789235":"markdown","ba09e414":"markdown","b3ed7106":"markdown","91cab208":"markdown","e6d68f3c":"markdown","4b8ea6f4":"markdown","bb90828e":"markdown","7e68efaa":"markdown","a41ece69":"markdown","d592f0b5":"markdown","fc4d14b7":"markdown","33a4b2f1":"markdown","f6667303":"markdown","3842925a":"markdown","62f4e422":"markdown","34ec72f2":"markdown","809c36db":"markdown","b703f585":"markdown","e8340925":"markdown","e2174140":"markdown","c645fb2a":"markdown","25b0bb23":"markdown","326ec881":"markdown","ac74a857":"markdown","2a62c529":"markdown","aa35953e":"markdown","642ef8d5":"markdown","7654182b":"markdown"},"source":{"32395239":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns # plotting\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","4a32091a":"#Load the data into pandas dataframe\ndf = pd.read_csv('..\/input\/students-performance-in-exams\/StudentsPerformance.csv')","37bc390f":"#Lookup to loaded data (first rows)\ndf.head()","e245f871":"print (\"Count of nulls for each column:\")\nprint (df.isnull().sum())\n\ndf.describe()","bd2dd5fc":"df['avg score'] = (df['math score']+df['reading score']+df['writing score'])\/3\ndf.head()","59a0855b":"corr = df.corr() # correlation matrix from pandas\nheat_map = sns.heatmap(corr, cmap=\"YlGnBu\") # seaborn heatmap with my favourite tones\ncorr","52da525a":"sns.pairplot(df) # seaborn pairplot to observe correlation","e2d00bf2":"sns.displot(df, x=\"math score\", hue=\"gender\", kind=\"kde\", fill =\"true\")\nprint(\"Average: %d\" % df['math score'].median())","475e5bc4":"sns.displot(df, x=\"reading score\", hue=\"gender\", kind=\"kde\", fill =\"true\")\nprint(\"Average: %d\" % df['reading score'].median())","def00199":"sns.displot(df, x=\"writing score\", hue=\"gender\", kind=\"kde\", fill =\"true\")\nprint(\"Average: %d\" % df['writing score'].median())","e8370646":"sns.displot(df, x=\"avg score\", hue=\"race\/ethnicity\", kind=\"kde\", fill =\"true\")","8f31b970":"#to know the unique values of each column is important for the encoding:\nprint(df['gender'].unique())\nprint(df['race\/ethnicity'].unique())\nprint(df['parental level of education'].unique())\nprint(df['lunch'].unique())\nprint(df['test preparation course'].unique())","121c4ba4":"# map the codes for the replacement with dictionaries\n\ngender_codes = {'gender_code': {'female': 1, 'male': 2}}\nethnicity_codes = {'ethnicity_code':{\"group A\":1, \"group B\":2, \"group C\":3, \"group D\":4, \"group E\":5}}\nparental_codes = {'parental_code':{\"some high school\":1, \"high school\":2, \"some college\":3, \"associate's degree\":4, \"bachelor's degree\":5, \"master's degree\":6}}\nlunch_codes = {'lunch_code':{\"free\/reduced\":0, \"standard\":1}}\ntest_codes = {'test_code':{\"none\":0, \"completed\":1}}\n\n# copy the column values to code columns, to keep the original columns\n\ndf['gender_code'] = df['gender']\ndf['ethnicity_code'] = df['race\/ethnicity']\ndf['parental_code'] = df['parental level of education']\ndf['lunch_code'] = df['lunch']\ndf['test_code'] = df['test preparation course']\n\n#now the actual replacement\n\ndf.replace(gender_codes, inplace=True)\ndf.replace(ethnicity_codes, inplace=True)\ndf.replace(parental_codes, inplace=True)\ndf.replace(lunch_codes, inplace=True)\ndf.replace(test_codes, inplace=True)\n\ndf.head()","def833f7":"sns.catplot(x=\"race\/ethnicity\", kind=\"count\", data=df,  order=[\"group A\", \"group B\", \"group C\", \"group D\", \"group E\"], palette=\"Set2\")","1bd24fc6":"sns.catplot(x=\"race\/ethnicity\", y=\"avg score\", kind=\"bar\", data=df, order=[\"group A\", \"group B\", \"group C\", \"group D\", \"group E\"], palette=\"Set2\")","c1af1874":"ax = sns.boxplot(x=\"avg score\", y=\"race\/ethnicity\", hue=\"gender\", \n                 data=df, palette=\"Set2\", order=[\"group A\", \"group B\", \"group C\", \"group D\", \"group E\"])\n","084ca85b":"print(\"Number of people with or without standard lunch:\")\ndf['lunch'].value_counts()","423ecf0f":"ax = sns.boxplot(x=\"avg score\", y=\"lunch\", hue=\"gender\", \n                 data=df, palette=\"Set2\")","06483186":"sns.catplot(x=\"parental level of education\", kind=\"count\", data=df,\n            order=[\"some high school\", \"high school\", \"some college\", \"associate's degree\", \"bachelor's degree\", \"master's degree\"],\n            palette=\"Set2\")","0d507268":"ax = sns.boxplot(x=\"avg score\", y=\"parental level of education\", hue=\"gender\", \n                 data=df, palette=\"Set2\", order=[\"some high school\", \"high school\", \"some college\", \"associate's degree\", \"bachelor's degree\", \"master's degree\"])","c62da6c1":"print(\"Number of people with test preparation course, or not:\")\ndf['test preparation course'].value_counts()","6223a5bc":"ax = sns.boxplot(x=\"avg score\", y=\"test preparation course\", hue=\"gender\", \n                 data=df, palette=\"Set2\")","159663c2":"print(\"Number of people in each group sliced with parental education:\")\npd.pivot_table(df,index=[\"race\/ethnicity\"], values=[\"avg score\"], columns=[\"parental_code\",\"parental level of education\"], aggfunc='count')","04fa66e7":"\n## First, with numerical data:\n\nAs a Heatmap:","73789235":"* Group A is the one with less educated parents.\n* Group B shows a trend towards the lower half of the education ranking.\n* Groups C and D are quite flat in the distribution.\n* Group E parental education is quite centered in the some college\/associate's degree education.\n\n>**CONCLUSIONS:**\n>* Parental education seems to affect scores. Further tests will be required for this *hypothesis* (FI_5).","ba09e414":"Now the proper encoding:","b3ed7106":"Nothing new here, but there are some outliers in females from groups B and C we might want to have a look at.\n\n>**FURTHER INVESTIGATION:**\n>* FI_4: Investigate females from groups B and C with lower marks, might reveal some hidden problems.\n\n#### I want to observe if lunch makes any difference","91cab208":"\n# All right, lets see if we find some correlation in data\n\nDoing this I can understand the data I'm working with","e6d68f3c":"#### I will try to find patterns in ethnicity related to the parental level of education ","4b8ea6f4":"Female also do better at writing.  \n\n>**CONCLUSIONS:**\n>* Male tend to be slightly better at math  \n>* Female tend to be noticeably better at reading and writing\n>* Math marks are slightly worse than language marks\n\n>**FURTHER INVESIGATION:**\n>* FI_1: Is there any other feature of the dataset related to gender affecting the scores? i.e. parents education, lunch or test preparation?","bb90828e":"Eating less does little favor to students, it seems.\n\n>**CONCLUSION:** Not eating before a test is generally not a good idea\n\n#### Parental educational level may impact as well:\n\nThe distribution is as follows:","7e68efaa":"A boxplot, to see if it throws some insight:","a41ece69":"Let's check if the dataset contains nulls and print the general description (to see if the dataset is healthy)","d592f0b5":"Initially, we have a look at what type of data we have, even if we already made it in a spreadsheet software:","fc4d14b7":"Looks like if group A, tends to score lower than group E. Let's dive more in that:\n\n>**FURTHER INVESTIGATIONS:**\n>* FI_2: Is ethnia (mainly groups A and E) related to any other feature?","33a4b2f1":"### \u00bfCould it be ethnicity related?","f6667303":"#### Now with the exam preparation\n","3842925a":"Looks good: no nulls, no max values above 100, acceptable standard deviations and quartiles.\n\nLet's add to the dataset the average score, looks like a nice-to-have figure:","62f4e422":"We see scores are highly correlated, but writing and reading scores show the strongest correlation. Makes sense.\n\nIt also makes sense to see a stronger correlation between average and reading\/writing, since both of them are highly correlated and affect to 2\/3 of the average score.\n\nI can also see right skewed data\n\n> **CONCLUSION:** Writing and reading scores are **highly correlated**.","34ec72f2":"Female are significantly better here.","809c36db":"\n# Intro\n\nIn this notebook, I will explain an example of the process I follow to analyze data.\nIn this case, the dataset is from Kaggle, showing the marks in some math and language tests.","b703f585":"I will enconde the categorical values following this rules:\n* Gender and ethnicity will be encoded randomly with a number (since they can't be put in order of importance)\n* Parental education, lunch and test preparation will be encoded from low to high.\n\nEncoding will help me in case I want to do numerical operations with categorical data.\n\nUnique values for categorical columns are as follow:","e8340925":"# Conclusions:  \n\n* The strongest correlation is observed between writing and reading marks.\n* Male tend to be slightly better at math, while female tend to be noticeably better at writing and reading.\n* Math scores are noticeably lower.\n* There are differences between ethnic groups. Average score order is, from worse to better, A->B->C->D->E.\n* Not eating before a test is generally not a good idea\n* Completing the course is not very useful for having a higher score, but improves your chances to pass.\n* It's easier to fail for those who haven't taken the preparatory course.\n* Parental education seems to affect scores. Further tests will be required for this *hypothesis*.\n\n>**FURTHER INVESTIGATIONS:**\n>* FI_1: Is there any other feature of the dataset related to gender affecting the scores? i.e. parents education, lunch or test preparation?\n>* FI_2: Is ethnia (mainly groups A and E) related to any other feature?\n>* FI_3: Why the ethnical groups get better scores from A -> E?\n>* FI_4: Investigate females from groups B and C with lower marks, might reveal some hidden problems.\n>* FI_5: Parental education seems to affect scores. Further tests will be required for this *hypothesis*.","e2174140":"## Now we can explore categorical trends:","c645fb2a":"### Let's do some correlation with categorical data\n","25b0bb23":"#### Now I will have a look to ethnic groups\n\nLet's look how ethnicity is distributed:","326ec881":"And as a pairplot:","ac74a857":"Male tend do slightly better than female here.","2a62c529":"# Let's load our data and have a look at it","aa35953e":"### Maybe it is gender related...","642ef8d5":"For some reason, the groups are performing significantly different. As the ethnicity distribution shows, it is not related to the number of students in each group.\n\n>**CONCLUSION:** There are differences between ethnic groups. Average score order is, from worse to better, A->B->C->D->E.\n\n>**FURTHER INVESTIGATION:**\n>* FI_3: Why the ethnical groups get better scores from A -> E?","7654182b":"Even if there is no significant difference in the average scores of those who attended the test preparation course (just slightly better), we can observe that the lower tail of the ones who didn't attend is much longer, even under 50.\n\n>**CONCLUSIONS:**\n>* Completing the course is not very useful for having a higher score, but improves your chances to pass.\n>* It's easier to fail for those who haven't taken the course."}}