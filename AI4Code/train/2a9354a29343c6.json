{"cell_type":{"4e99767d":"code","5f54a609":"code","a6bf2d58":"code","56c30894":"code","dcaa7d24":"code","c2574353":"code","df5ceea9":"code","e58c27e1":"code","cc42b55d":"code","ca7e8650":"code","7c10554d":"code","97a2aaea":"code","e592e37a":"code","702c530f":"code","e86ab26e":"code","6be69eef":"code","4cd5feff":"code","f1bd159a":"code","f47853b2":"code","136fd147":"code","e6a15ca2":"code","07d8f021":"code","87cd8fbc":"code","e9fd5417":"code","5e699cee":"code","57a5462f":"code","6d604265":"code","53cb978b":"code","2a5b706f":"code","3cea6dc3":"code","5fdd94fc":"code","df7ad214":"code","5af74776":"code","def02430":"code","dabbe2a8":"code","3030d11a":"code","0172840c":"code","0b29801f":"code","2bab1e32":"code","8835aa15":"code","1b125717":"code","1a130737":"code","08681499":"code","2e723baf":"code","c5baaeda":"code","3d77c2f0":"code","dea18f5e":"code","3620df0a":"code","8a97f608":"code","b52e83f2":"code","3a31aeac":"code","759fa3ec":"code","bcc24da6":"code","950cf676":"code","f924773b":"code","83e4e753":"code","40ac8e84":"code","ccdf1135":"code","0f799613":"code","f61606c4":"code","037e6af5":"code","3493a797":"code","700a71fe":"markdown"},"source":{"4e99767d":"#Load necessary packages\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","5f54a609":"# Reading the dataset\nHousing_MB = pd.read_csv('..\/input\/melbourne-housing-market\/Melbourne_housing_FULL.csv')","a6bf2d58":"Housing_MB.head(5)","56c30894":"# exploring and understanding the dataset\nprint(Housing_MB.shape)\nprint(Housing_MB.describe())","dcaa7d24":"# Identifying the missing values\nHousing_MB.info()","c2574353":"# Understanding variables in Suburb column\nprint(Housing_MB['Suburb'].value_counts())","df5ceea9":"# Understanding variables in Type column\nprint(Housing_MB['Type'].value_counts())\n#Most of the houses sold are house,cottage villa or semi terrace type","e58c27e1":"# Understanding variables in Method column\nprint(Housing_MB['Method'].value_counts())","cc42b55d":"print(Housing_MB['CouncilArea'].value_counts())","ca7e8650":"print(Housing_MB['Regionname'].value_counts())\n#Most of the houses sold are from Southern Metropolitan region","7c10554d":"print(Housing_MB['Suburb'].value_counts())","97a2aaea":"# Total Missing value for each feature\nprint(Housing_MB.isnull().sum())","e592e37a":"# Replacing Missing values in columns where we have less than 30% missing values\nHousing_MB['Bedroom2'].fillna(Housing_MB['Bedroom2'].median(),axis=0,inplace=True)\nHousing_MB['Bathroom'].fillna(Housing_MB['Bathroom'].median(),axis=0,inplace=True)\nHousing_MB['Car'].fillna(Housing_MB['Car'].median(),axis=0,inplace=True)\nHousing_MB['Landsize'].fillna(Housing_MB['Landsize'].median(),axis=0,inplace=True)\nHousing_MB['Lattitude'].fillna(Housing_MB['Lattitude'].median(),axis=0,inplace=True)\nHousing_MB['Longtitude'].fillna(Housing_MB['Longtitude'].median(),axis=0,inplace=True)\nHousing_MB['Regionname'].fillna(Housing_MB['Regionname'].mode(),axis=0,inplace=True)\nHousing_MB['CouncilArea'].fillna(Housing_MB['CouncilArea'].mode(),axis=0,inplace=True)\nHousing_MB['Propertycount'].fillna(Housing_MB['Propertycount'].median(),axis=0,inplace=True)","702c530f":"Housing_MB['Regionname'].fillna('Southern Metropolitan',inplace=True)\nHousing_MB['CouncilArea'].fillna('Boroondara City Council',inplace=True)","e86ab26e":"# Validaing the Missing value after missing value is treated for few feature columns\nprint(Housing_MB.isnull().sum())","6be69eef":"Housing_MB['Date']= pd.to_datetime(Housing_MB['Date'],dayfirst=True)","4cd5feff":"# Grouping the features by Date\nvar = Housing_MB[Housing_MB['Type']=='h'].sort_values('Date',ascending=False).groupby('Date').std()\ncount = Housing_MB[Housing_MB['Type']=='h'].sort_values('Date',ascending=False).groupby('Date').count()\nmean = Housing_MB[Housing_MB['Type']=='h'].sort_values('Date',ascending=False).groupby('Date').mean()","f1bd159a":"var","f47853b2":"mean","136fd147":"# Average Price marked by varaince by comparing with different date or time when the houses were sold\nmean[\"Price\"].plot(yerr=var[\"Price\"],ylim=(400000,1500000))","e6a15ca2":"# Plotting average Landsize marked by variance in price\nmean[\"Landsize\"].plot(yerr=var[\"Price\"])","07d8f021":"#Group all the features by Date for the houses of type h and Distance less than 14 kms from CBD.\nfeature_means = Housing_MB[(Housing_MB['Type']=='h')& (Housing_MB['Distance']<14)].sort_values('Date',ascending=False).groupby('Date').mean()\nfeature_std = Housing_MB[(Housing_MB['Type']=='h') & (Housing_MB['Distance']<14)].sort_values('Date',ascending=False).groupby('Date').std()","87cd8fbc":"#Average no. of Bedroom,Bathroom,Car in Houses sold of h type and which is located within the distance of 14 kms from CBD.\nfeature_means[['Bedroom2','Bathroom','Car']].plot()","e9fd5417":"#Average no.of Bedroom,Bathroom,Car marked by variance in Houses sold of h type and which is located within the distance of 14 kms from CBD.\nfeature_means[['Bedroom2','Bathroom','Car']].plot(yerr=feature_std)","5e699cee":"feature_location=Housing_MB[(Housing_MB['Type']=='h')&(Housing_MB['Distance']<14)].sort_values('Date',ascending=False).dropna().groupby(['Suburb']).mean()","57a5462f":"#Group all the features by Regionname for the houses of type h and Distance less than 14 kms from CBD.\nfeature_region_mean=Housing_MB[(Housing_MB['Type']=='h')&(Housing_MB['Distance']<14)].sort_values('Date',ascending=False).dropna().groupby('Regionname').mean()\nfeature_region_std=Housing_MB[(Housing_MB['Type']=='h')&(Housing_MB['Distance']<14)].sort_values('Date',ascending=False).dropna().groupby('Regionname').std()","6d604265":"# Plotting the avrega eprice of house sold by Regionname\nfeature_region_mean['Price'].plot(kind='bar',figsize =(15,8))","53cb978b":"# Plotting the average no.of Bathroom,Bedroom and Carspots by Regionname\nfeature_region_mean[['Bedroom2','Bathroom','Car']].plot(yerr=feature_region_std,figsize=(15,8))","2a5b706f":"# Looking at the average price range in suburb for houses sold in Southern Metropolitan\nfeature_SouthernM = Housing_MB[(Housing_MB['Regionname']=='Southern Metropolitan')& \n                               (Housing_MB['Type']=='h') & \n                                (Housing_MB['Distance']<=14)].sort_values('Date',ascending=False).groupby('Suburb').mean()","3cea6dc3":"feature_SouthernM['Price'].plot(kind='bar',figsize=(20,10))","5fdd94fc":"#Analyzing Average no. of rooms and Distance for each of the Suburb in Southern Metropolitan Region\nfeature_South_Suburb = Housing_MB[(Housing_MB['Regionname']=='Southern Metropolitan')& \n                               (Housing_MB['Type']=='h') & \n                                (Housing_MB['Distance']<=14)].sort_values('Date',ascending=False).groupby('Suburb').agg({'Rooms':'median','Distance':'mean'})","df7ad214":"feature_South_Suburb","5af74776":"#Analyzing Average no. of rooms and Distance for each of the Suburb in Western Metropolitan Region\nfeature_West_Suburb = Housing_MB[(Housing_MB['Regionname']=='Western Metropolitan')& \n                               (Housing_MB['Type']=='h') & \n                                (Housing_MB['Distance']<=14)].sort_values('Date',ascending=False).groupby('Suburb').agg({'Rooms':'median','Distance':'mean'})","def02430":"feature_West_Suburb","dabbe2a8":"# Looking at the average price range in suburb for houses sold in Western Metropolitan\nfeature_WesternM = Housing_MB[(Housing_MB['Regionname']=='Western Metropolitan')& \n                               (Housing_MB['Type']=='h') & \n                                (Housing_MB['Distance']<=14)].sort_values('Date',ascending=False).groupby('Suburb').mean()","3030d11a":"feature_WesternM['Price'].plot(kind='bar',figsize=(20,10))","0172840c":"# Looking at the average price range in suburb for 2 bedroom houses located in the distance of less than 5 kms from CBD sold in Southern Metropolitan \n# Anlyzing the affordable price in the suburbs.\nSouthern_affordable = Housing_MB[(Housing_MB['Regionname']=='Southern Metropolitan')&\n                                (Housing_MB['Rooms']==2)&\n                                (Housing_MB['Type']=='h')&\n                                (Housing_MB['Distance']<=5)].sort_values('Date',ascending=False).groupby('Suburb').mean()","0b29801f":"Southern_affordable['Price'].plot(kind='bar',figsize=(20,10))","2bab1e32":"# Looking at the average price range in suburb for 2 bedroom houses located in the distance of less than 5 kms from CBD sold in Southern Metropolitan \n# Anlyzing the affordable price in the suburbs.\nWestern_affordable = Housing_MB[(Housing_MB['Regionname']=='Western Metropolitan')&\n                                (Housing_MB['Rooms']==2)&\n                                (Housing_MB['Type']=='h')&\n                                (Housing_MB['Distance']<=6)].sort_values('Date',ascending=False).groupby('Suburb').mean()","8835aa15":"Western_affordable['Price'].plot(kind='bar',figsize=(20,10))","1b125717":"sns.kdeplot(Housing_MB[(Housing_MB['Regionname']=='Southern Metropolitan')\n                       &(Housing_MB['Type']=='h')\n                       &(Housing_MB['Rooms']==2)]\n                       [\"Price\"])","1a130737":"sns.kdeplot(Housing_MB[(Housing_MB['Regionname']=='Western Metropolitan')\n                       &(Housing_MB['Type']=='h')\n                       &(Housing_MB['Rooms']==2)][\"Price\"])","08681499":"# Plotting the pairplot to understand the distribution and relationship between features\nsns.pairplot(Housing_MB.dropna())","2e723baf":"# Plotting the heatmap to understand the features correlation\nfig,ax = plt.subplots(figsize=(15,15))\nsns.heatmap(Housing_MB.corr(),annot=True)","c5baaeda":"# Plotting the heatmap to understand the features correlation for houses sold of type h\nfig,ax = plt.subplots(figsize=(15,15))\nsns.heatmap(Housing_MB[Housing_MB['Type']=='h'].corr(),annot=True)","3d77c2f0":"#Drop Null values from dataframe\ndataframe_Housing = Housing_MB.dropna().sort_values('Date')","dea18f5e":"# Convert the date column to number of days from the date when the house is sold\nfrom datetime import date\ndays_since_start = [(x-dataframe_Housing['Date'].min()).days for x in dataframe_Housing['Date']]\ndataframe_Housing['Days']= days_since_start","3620df0a":"# Dropping columns which has less correlation to target variable(Price)\ndf_Housing=dataframe_Housing.drop(['Date','Address','SellerG','Postcode','Landsize','Propertycount'],axis=1)","8a97f608":"# understanding the dattyoes from the Housing data frame\ndf_Housing.dtypes","b52e83f2":"df_Housing['CouncilArea'].value_counts()","3a31aeac":"# Convertig Object columns to dummies\ndf_dummies = pd.get_dummies(df_Housing[['Type','Method','CouncilArea','Regionname']])","759fa3ec":"df_Housing.columns","bcc24da6":"#Dropping the old columns which have been converted to dummies and creating a new dataframe\ndf_Housing.drop(['Suburb','Type','Method','CouncilArea','Regionname'],axis=1,inplace=True)\ndf_Housing=df_Housing.join(df_dummies)","950cf676":"df_Housing.head(5)","f924773b":"# Splitting indepnedent and dependent features into X and y\nfrom sklearn.model_selection import train_test_split\nX= df_Housing.drop(['Price'],axis=1)\ny= df_Housing['Price']","83e4e753":"# Train test split\nX_train,X_test,y_train,y_test = train_test_split(X,y,test_size=0.30,random_state=10)","40ac8e84":"# Train the model\nfrom sklearn.linear_model import LinearRegression\nlm = LinearRegression()\nlm.fit(X_train,y_train)","ccdf1135":"print(lm.intercept_)","0f799613":"lm.score(X_test, y_test)","f61606c4":"# Arriving at the coeffecient for the features\ncoeff_df = pd.DataFrame(lm.coef_,X.columns,columns=['Coefficient'])\nranked_suburbs = coeff_df.sort_values(\"Coefficient\", ascending = False)\nranked_suburbs","037e6af5":"predictions =lm.predict(X_test)","3493a797":"# Plotting a scatter plot with Predicted and Actual Values based on the trained model\nplt.scatter(y_test,predictions)\nplt.ylim([200000,1000000])\nplt.xlim([200000,1000000])","700a71fe":"# Inferences\n1. There are minimum of 1 room houses and maximum of 16 room houses sold in the market.Most of the houses sold have 4 rooms.\n2.Most of the houses are sold are situated at an average distance of 11 kms from CBD.\n3.Most of the houses sold have an average of 3 bedroom scrapped and which goes up to maximum 30 bedrooms scrapped.\n4.Most of the houses sold have 2 bathrooms,2 car spots and have an average of Land Size 593 meters\n5. Most of the houses sold have an average building area of 160 meters and Land size of 593 meters which can go upto maximum of 433k meters.\n6. Suburbs where most of the houses sold has a average of 7k-10k properties"}}