{"cell_type":{"627be962":"code","7aa0d9e9":"code","03c69b56":"code","90dc817b":"code","d3aa285e":"code","290a8c4f":"code","73f4b280":"code","1f6563fb":"code","82723169":"code","488ee0de":"code","28d59473":"code","259c7452":"code","6cc81a90":"code","7d8c9f1f":"code","c7b8e469":"code","6163b368":"code","5ba84f96":"code","701a5d5a":"code","6cf64660":"code","93d67502":"code","7938c5d1":"code","aaff56e2":"code","87116fce":"code","9df8b176":"code","af7e31ed":"code","a3803eb1":"code","0057ea33":"code","d1c532ee":"code","50b03934":"code","c227cee3":"code","8f68a417":"code","26c51d14":"markdown","983737f5":"markdown","012310f7":"markdown","d9327e1b":"markdown","58cac0cf":"markdown","05ccc153":"markdown","dbcc727c":"markdown","ca82e5e8":"markdown","43aa21ea":"markdown","330c67fa":"markdown","2897ff20":"markdown","1aaedf3f":"markdown","e0c60d65":"markdown","b9826174":"markdown","57c29924":"markdown","fa716fbb":"markdown","7b119940":"markdown","59174875":"markdown","cdabc847":"markdown","31be301e":"markdown","3cdfe262":"markdown","e0952fe4":"markdown","2a89caa6":"markdown","85e549bc":"markdown","c5ca7be6":"markdown","47b35c8d":"markdown","138c1dc6":"markdown","3bcee291":"markdown","ae354210":"markdown","649c4f3b":"markdown","eece5ecb":"markdown","f5879d64":"markdown","69e8a041":"markdown","585537eb":"markdown","1343df7e":"markdown","1d5d403b":"markdown","42fd2b55":"markdown","0cf63343":"markdown","409414c4":"markdown","4e9e2008":"markdown","61912657":"markdown","1f6949c4":"markdown","726ac374":"markdown","822bd8d6":"markdown","a1a35264":"markdown","6022929a":"markdown","0629fa3a":"markdown","2aaf8bb4":"markdown","f1b44639":"markdown","b1ddd117":"markdown","dad47399":"markdown","40487905":"markdown","85b157fd":"markdown","326e680f":"markdown","c60a11e2":"markdown","c58f5a9f":"markdown","099e1a23":"markdown","b8c3a85e":"markdown","73392d82":"markdown","c912e8e4":"markdown","2753ba48":"markdown","057d5623":"markdown","532ac17c":"markdown","6b9c397b":"markdown","9e85c5ba":"markdown","8fdadece":"markdown","926e77e0":"markdown","d1788b0a":"markdown","1094e814":"markdown","23dbb606":"markdown","5c3ca72d":"markdown","0053143a":"markdown","a39ccc90":"markdown","c3f96661":"markdown","95d0394a":"markdown","f4d47d03":"markdown"},"source":{"627be962":"import pandas as pd\nimport matplotlib.pyplot as plt  \nimport math\nfrom math import pi\nimport numpy as np\nimport seaborn as sns\nimport warnings  \nwarnings.filterwarnings('ignore')\nnp.seterr(divide='ignore', invalid='ignore')\n%matplotlib inline ","7aa0d9e9":"# Load data\nloan_df = pd.read_csv('..\/input\/lending-club-loan-data\/loan.csv',header=0,skip_blank_lines=True)\n\n# Get the first 5 rows of the data\nloan_df.head()","03c69b56":"# Print information of the dataframe\nloan_df.info()","90dc817b":"# Drop columns with more than 80% of missing values\nna_thresh = len(loan_df)*80\/100\nloan_df = loan_df.dropna(thresh=na_thresh, axis=1)\n\n# Check the new dimension\nloan_df.shape","d3aa285e":"# Convert 'issue_d' column to datetime format\nloan_df['issue_d'] = pd.to_datetime(loan_df['issue_d'])\nyear_dist = loan_df.groupby(['issue_d']).size()\n\nplt.figure(figsize=(15,6))\nsns.set()\n\nax1 = plt.subplot(1, 2, 1)\nax1 = year_dist.plot()\nax1 = plt.title('Loan Issued Amount By Year')\nax1 = plt.xlabel('Year')\nax1 = plt.ylabel('Frequency')\n\nax2 = plt.subplot(1, 2, 2)\nax2 = sns.distplot(loan_df['loan_amnt'])\nax2 = plt.title('Loan Amount Distribution')\nax2 = plt.xlabel('Loan Amount')","290a8c4f":"# Create a region dictionary from US regions dateset\nregions = pd.read_csv('..\/input\/region\/regions.csv',header=0,skip_blank_lines=True)\nregions_dict = pd.Series(regions['region'].values,index=regions['state']).to_dict()\n\n# Create a new column 'region' by mapping the state value to region from the region dict\nloan_df['region'] = loan_df['addr_state'].map(regions_dict)\n\nregion_dist = loan_df.groupby(['region']).size()\nexplode = (0, 0, 0.1, 0) \ncolors = [\"#efc186\",\"#a6ddb5\",\"#dda19b\",\"#9ebfe2\"]\nplt.figure(figsize=(15,6))\nax1 = plt.subplot(1, 2, 1)\nax1 = plt.pie(region_dist,autopct='%1.1f%%',explode=explode, labels=region_dist.index,colors = colors)\nax1 = plt.title('Loan Distribution By Region')\nax1 = plt.xlabel('Region')\nax1 = plt.axis('equal')  \n\nax2 = plt.subplot(1, 2, 2)\nax2 = sns.countplot(y=loan_df['purpose'],order = loan_df['purpose'].value_counts().index)\nax2 = plt.title('Loan Purpose Distribution')\nax2 = plt.ylabel('Loan Purposes')\nax2 = plt.xlabel('Frequency')\nax2 = plt.tight_layout()","73f4b280":"plt.figure(figsize=(15,6))\nax = sns.countplot(y=loan_df['loan_status'],order = loan_df['loan_status'].value_counts().index)\nax = plt.title('Loan Status Distribution')","1f6563fb":"# Create a new status dictionary\nnew_status_dict = {\n    'Fully Paid': 'Fully Paid',\n    'Charged Off': 'Charged Off',\n    'Current': 'Current',\n    'Default': 'Default',\n    'Late (31-120 days)': 'Late',\n    'In Grace Period': 'Late',\n    'Late (16-30 days)': 'Late',\n    'Does not meet the credit policy. Status:Fully Paid': 'Fully Paid',\n    'Does not meet the credit policy. Status:Charged Off': 'Charged Off',\n    'Issued': 'Issued'\n}\n\nloan_df['new_status'] = loan_df['loan_status'].map(new_status_dict)\npd.Series(pd.unique(loan_df['new_status'])).to_frame()","82723169":"plt.figure(figsize=(15,6))\n\nax = sns.lineplot(x=\"issue_d\", y=\"loan_amnt\",hue=\"new_status\", data=loan_df)\nax = plt.title('Time Series Plot of Loan Amount By Loan Status')\nax = plt.xlabel('Year')\nax = plt.ylabel('Loan Amount')","488ee0de":"plt.figure(figsize=(15,6))\n\nregion_freq = loan_df.groupby(['region','issue_d']).size().unstack().fillna(0)\ndates = np.sort(pd.unique(loan_df['issue_d']))\n\nax = plt.fill_between(dates,region_freq.values[2],label='South')\nax = plt.fill_between(dates,region_freq.values[3],label='West')\nax = plt.fill_between(dates,region_freq.values[1],label='Northeast')\nax = plt.fill_between(dates,region_freq.values[0],label='Midwest')\n\nax = plt.legend(loc='upper left')\nax = plt.xlabel('Year')\nax = plt.ylabel('Frequency')\nax = plt.title('Time Series Plot of Loan Issued By Loan Status')","28d59473":"plt.figure(figsize=(15,7))\n\nax = sns.violinplot(x=\"region\", y=\"loan_amnt\", data=loan_df)\nax = plt.xlabel('Regions')\nax = plt.ylabel('Loan Amount')\nax = plt.title('Violin Plot of Loan Amount Against Region')","259c7452":"plt.figure(figsize=(15,9))\nax = sns.boxplot(y=\"purpose\", x=\"loan_amnt\", data=loan_df)\nax = plt.xlabel('Loan Amount')\nax = plt.ylabel('Loan Purpose')\nax = plt.title('Loan Amount Versus Purpose')","6cc81a90":"plt.figure(figsize=(13,7))\nplot_data = loan_df.groupby(['purpose','region']).size().reset_index()\nplot_data.columns = ['purpose','region','value']\nplot_data = plot_data.pivot('purpose','region','value')\n\nax = sns.heatmap(plot_data,annot=True, fmt=\"d\",cmap=\"GnBu\",linewidths=.2)\nax = plt.xlabel('Region')\nax = plt.ylabel('Loan Purpose')\nax = plt.title('Purpose Versus Region By Frequency')","7d8c9f1f":"# Here we exclude newly issued loan as they don't give any significant insight \nloan_df = loan_df[loan_df['loan_status'] != 'Issued']\n\n# Categorize loan into 'Good' or 'Bad'\n# Create dictionary that map loan status to loan type\nloan_type_dict = {\n    'Fully Paid': 'Good',\n    'Charged Off': 'Bad',\n    'Current': 'Good',\n    'Default': 'Bad',\n    'Late (31-120 days)': 'Bad',\n    'In Grace Period': 'Bad',\n    'Late (16-30 days)': 'Bad',\n    'Does not meet the credit policy. Status:Fully Paid': 'Good',\n    'Does not meet the credit policy. Status:Charged Off': 'Bad'\n}\n\nloan_df['loan_type'] = loan_df['loan_status'].map(loan_type_dict)","c7b8e469":"plt.figure(figsize=(12,6))\nax = sns.countplot(x=\"loan_type\", data=loan_df,palette=\"Set2\")\nax = plt.xlabel('Loan Type')\nax = plt.ylabel('Frequency')\nax = plt.title('Loan Type Distribution')","6163b368":"plt.figure(figsize=(10,6))\n\npal = {\"Good\": \"#6bad97\", \"Bad\": \"#d8617f\"}\n\nax = sns.violinplot(x=\"loan_type\", y=\"loan_amnt\", data=loan_df,palette=pal)\nax = plt.xlabel('Loan Type')\nax = plt.ylabel('Loan Amount')\nax = plt.title('Loan Amount Distribution')","5ba84f96":"plt.figure(figsize=(10,6))\nplot_data = loan_df.groupby(['region','loan_type']).size().unstack().T\nr = range(4)\n\nax = plt.bar(r, plot_data.values[0], color='#f9966b', edgecolor='white',label='Bad')\n\nax = plt.bar(r, plot_data.values[1], bottom=plot_data.values[0], color='#7fd1b8', edgecolor='white',label='Good')\nnames = plot_data.columns\nax = plt.xticks(r, names)\nax = plt.legend(loc='upper left')\nax = plt.xlabel('Region')\nax = plt.ylabel('Frequency')\nax = plt.title('Loan Type Distribution By Region')","701a5d5a":"plt.figure(figsize=(11,6))\n\nax = sns.boxplot(x=\"loan_type\", y=\"annual_inc\",  data=loan_df,showfliers=False,palette=pal)\nax = plt.xlabel('Loan Type')\nax = plt.ylabel('Annual Income')\nax = plt.title('Loan Type Distribution By Annual Income')","6cf64660":"plt.figure(figsize=(15,7))\nplot_data = loan_df.groupby(['emp_length','loan_type']).size().unstack().T\ncols = ['< 1 year','1 year','2 years','3 years','4 years','5 years','6 years','7 years','8 years','9 years','10+ years']\nplot_data = plot_data[cols]\nr = range(11)\n\nax = plt.bar(r, plot_data.values[0], color='#f9966b', edgecolor='white',label='Bad')\n\nax = plt.bar(r, plot_data.values[1], bottom=plot_data.values[0], color='#7fd1b8', edgecolor='white',label='Good')\nnames = plot_data.columns\nax = plt.xticks(r, names)\nax = plt.legend(loc='upper right')\nax = plt.xlabel('Employment Length')\nax = plt.ylabel('Frequency')\nax = plt.title('Loan Type Distribution By Employment Length')","93d67502":"plt.figure(figsize=(20,10))\nplot_data = loan_df.groupby(['loan_type','purpose']).size().reset_index()\nplot_data.columns = ['loan_type','purpose','value']\n\n# Apply logarithm to the frequency value to reduce skewness\nplot_data['value'] = plot_data['value'].apply(math.log)\n\n# Retrieve good loans\ngood_loan = plot_data[plot_data['loan_type'] == 'Good']\n\n# Retrieve bad loans\nbad_loan = plot_data[plot_data['loan_type'] == 'Bad']\n\nN = len(pd.unique(good_loan['purpose']))\ngood_values = good_loan.value.values\ngood_values = np.append(good_values, [good_values[:1]])\n\nbad_values = bad_loan.value.values\nbad_values = np.append(bad_values, [bad_values[:1]])\n\nangles = [n \/ float(N) * 2 * pi for n in range(N)]\nangles += angles[:1]\n\nax = plt.subplot(1,2,1, polar=True)\nax = plt.xticks(angles[:-1], pd.unique(good_loan['purpose']), color='grey', size=8)\nax = plt.plot(angles, good_values, linewidth=1, linestyle='solid',label='Good',color='g')\nax = plt.fill(angles, good_values, 'g', alpha=0.3)\nax = plt.xlabel('Loan Purpose')\n\nax2 = plt.subplot(1, 2, 1,polar=True)\nax2 = plt.xticks(angles[:-1], pd.unique(bad_loan['purpose']), color='grey', size=8)\nax2 = plt.plot(angles, bad_values, linewidth=1, linestyle='solid',label='Bad',color='r')\nax2 = plt.fill(angles, bad_values, 'r', alpha=0.3)\nax2 = plt.xlabel('Loan Purpose')\n\nax = plt.legend(loc='upper left')","7938c5d1":"plot_data1 = loan_df.groupby(['home_ownership','loan_type']).size().unstack().fillna(0)\nplot_data1['total'] = plot_data1['Bad'] + plot_data1['Good']\ncols = ['ANY','MORTGAGE','NONE','OWN','OTHER','RENT']\nplot_data1 = plot_data1.reindex(index=cols)\n\nplot_data2 = loan_df.groupby(['home_ownership','loan_type']).size().reset_index().fillna(0)\nplot_data2.columns = ['home_ownership', 'loan_type','value']\nplot_data2 = plot_data2.reindex([0,1,2,3,4,7,8,5,6,9,10])\nplt.figure(figsize=(8,8))\nax = plt.axis('equal')\n\n# Plot the outer circle\npie, _ = plt.pie(np.array(plot_data1['total']), radius=1.3,labels=plot_data1.index,colors=['#13194c','#f2da32','#2fb74d','#b71d60','#91683a','#545ca8'])\nax = plt.setp(pie, width=0.3, edgecolor='white')\n \n# Plot the inner circle\npie2, _ = plt.pie(plot_data2.value.values, radius=1.3-0.3, labels=plot_data2['loan_type'].values, labeldistance=0.7,\n                   colors = ['#91683a','#f7efc0','#efe294','#b7ba3f','#b7ba3f','#d192c5','#e256a3','#b7ba3f','#b7ba3f','#99e2ff','#75aec6'])\nax = plt.setp(pie2, width=0.4, edgecolor='white')\nax = plt.margins(0,0)\n","aaff56e2":"plt.figure(figsize=(10,6))\nplot_data = loan_df.groupby(['grade','loan_type']).size().unstack().T\nr = range(7)\n\nax = plt.bar(r, plot_data.values[0], color='#f9966b', edgecolor='white',label='Bad')\nax = plt.bar(r, plot_data.values[1], bottom=plot_data.values[0], color='#7fd1b8', edgecolor='white',label='Good')\nnames = plot_data.columns\nax = plt.xticks(r, names)\nax = plt.legend(loc='upper left')\nax = plt.xlabel('Loan Grade')\nax = plt.ylabel('Frequency')\nax = plt.title('Loan Type Distribution By Loan Grade')","87116fce":"plt.figure(figsize=(10,8))\nax = sns.violinplot(y=\"int_rate\", x=\"loan_type\", data=loan_df)\nax = plt.xlabel('Loan Type')\nax = plt.title('Loan Type Distribution By Interest Rate')","9df8b176":"plt.figure(figsize=(15,6))\nax1 = plt.subplot(1, 2, 1)\nplot_data = loan_df\nplot_data['cut'] = pd.cut(plot_data['loan_amnt'],5)\nax = sns.violinplot(x=\"cut\", y=\"int_rate\", hue=\"loan_type\",data=plot_data,split=True)\nax = plt.ylabel('Interest Rate')\nax = plt.xlabel('Loan Amount')\nax = plt.title('Loan Amount Distribution By Loan Type')\n\nax2 = plt.subplot(1, 2, 2)\nplot_data = loan_df.sample(frac=0.005)\nax2 = sns.regplot(x=\"loan_amnt\", y=\"int_rate\", data=plot_data,color='#c96895')\nax2 = plt.tight_layout()\nax = plt.ylabel('Interest Rate')\nax = plt.xlabel('Loan Amount')\nax = plt.title('Interest Rate Versus Loan Amount')","af7e31ed":"plt.figure(figsize=(10,6))\nplot_data = loan_df.groupby('grade')['int_rate'].mean()\nax = sns.barplot(x=plot_data.index,y=plot_data.values,palette='OrRd')\nax = plt.xlabel('Loan Grade')\nax = plt.ylabel('Interest Rate')\nax = plt.title('Interest Rate Versus Loan Grade')","a3803eb1":"plt.figure(figsize=(13,7))\nplot_data = loan_df.groupby('purpose')['int_rate'].mean()\nax = sns.barplot(y=plot_data.index,x=plot_data.values,palette='BuPu')\nax = plt.ylabel('Loan Purpose')\nax = plt.xlabel('Interest Rate')\nax = plt.title('Interest Rate Versus Loan Grade')","0057ea33":"plt.figure(figsize=(13,7))\nplot_data = loan_df.sample(frac=0.005,random_state=1)\nsns.set_style(\"white\")\nax = sns.regplot(x=\"annual_inc\", y=\"int_rate\", data=plot_data,color='#dbdb64')\nax = plt.xlabel('Annual Income')\nax = plt.ylabel('Interest Rate')\nax = plt.title('Interest Rate Versus Annual Income')","d1c532ee":"plt.figure(figsize=(13,7))\n\ncols = ['< 1 year','1 year','2 years','3 years','4 years','5 years','6 years','7 years','8 years','9 years','10+ years']\n\nax = sns.boxplot(x=\"emp_length\", y=\"annual_inc\",  data=loan_df,order=cols,showfliers=False,palette='Spectral')\n\nax = plt.ylabel('Annual Income')\nax = plt.xlabel('Employment Length')\nax = plt.title('Annual Income Versus Employment Length')","50b03934":"# Create a 'target' column based on 'loan type' column\ntarget_dict = {\n    'Good': 0,\n    'Bad' : 1\n}\n\nloan_df['target'] = loan_df['loan_type'].map(target_dict)\n\n# Create dummy variables for catagorical features (encoding)\ndummies_df =pd.get_dummies(loan_df,columns=['term','grade','sub_grade','emp_length','home_ownership','pymnt_plan','purpose','addr_state','initial_list_status','application_type'])\ndummies_df.dropna(inplace=True)\n\n# Get input variables\nX_df = dummies_df.loc[:, ~(dummies_df.columns.isin(pd.Series(loan_df.select_dtypes(['object']).columns)))]\n\n# Get target variable\ny = dummies_df['target'].values\n\nX_df = X_df.loc[:, ~(X_df.columns.isin(['target','id','member_id','cut','issue_d']))]\n\n# Create an input matrix \nX = X_df.values","c227cee3":"from sklearn.datasets import make_classification\nfrom sklearn.ensemble import ExtraTreesClassifier\n\n# Initialize a random forest estimator\nforest = ExtraTreesClassifier(n_estimators=50,random_state=0)\n\n# Fit the input matrix and target values to the classifier\nforest.fit(X, y)\n\n# Retrieve the computed feature importance\nimportances = forest.feature_importances_\n\n# Plot the feature importance\nplot_data = pd.DataFrame({'features' : pd.Series(X_df.columns),'importance' : pd.Series(importances)})\nplt.figure(figsize=(15,10))\nplot_data = plot_data.sort_values('importance',ascending=False)\nplot_data = plot_data[plot_data['importance'] > 0.01]\nax = sns.barplot(x=plot_data['importance'],y=plot_data['features'],)","8f68a417":"plt.figure(figsize=(15,9))\n\n# Calculate correlation between each pair of variable\ncorr_matrix=loan_df.corr()\n\nmask = np.zeros_like(corr_matrix)\nmask[np.triu_indices_from(mask)] = True\n\n# Plot a correlation heatmap\nwith sns.axes_style(\"white\"):\n    ax = sns.heatmap(corr_matrix, mask=mask, square=True)","26c51d14":">A loan is more likely to end up as a bad loan when the interest rate is higher.","983737f5":"Some preprocessing steps have to be done before feeding the data into the classifier.","012310f7":"**Amount of Loan Issued Across The Year By Region**","d9327e1b":"The data file contain complete loan data for all loans issued through the 2007-2015, including the borrower profile, current loan status (Current, Late, Fully Paid, etc.) and latest payment information. The file containing loan data through the \"present\" contains complete loan data for all loans issued through the previous completed calendar quarter. Additional features include credit scores, number of finance inquiries, address including zip codes, and state, and collections among others. The file is a matrix of roughly 890 thousand observations and 75 variables.","58cac0cf":"**Loan Distribution by *Region* and *Purpose***","05ccc153":">Loans are graded based on borrowers' credit scores. The grade with the highest frequency is grade B. However, grade C loans has higher likehood of being a bad loan.","dbcc727c":"Below are the definitions of each loan status:\n1. **Issued**: New loan that has passed all LendingClub reviews, received full funding, and has been issued.\n2. **Current**: Loan is up to date on all outstanding payments. \n3. **In Grace Period**: Loan is past due but within the 15-day grace period. \n4. **Late (16-30)**: Loan has not been current for 16 to 30 days.\n5. **Late (31-120)**: Loan has not been current for 31 to 120 days. \n6. **Fully paid**: Loan has been fully repaid, either at the expiration of the 3- or 5-year year term or as a result of a prepayment.\n7. **Default**: Loan has not been current for an extended period of time. \n8. **Charged Off**: Loan for which there is no longer a reasonable expectation of further payments. Upon Charge Off, the remaining principal balance of the Note is deducted from the account balance. \n\nMore status definition : [LendingClub](https:\/\/help.lendingclub.com\/hc\/en-us\/articles\/215488038-What-do-the-different-Note-statuses-mean-)","ca82e5e8":"**1. What are the distributions of loan?**  \n**2. What are the correlation between the variables?**  \n**3. What are the characteristics of good and bad borrowers?**  \n**5. Which factors influence the loan repayment and default rate?**","43aa21ea":"**Distribution of Loan Amount Across The Year by Loan Status**","330c67fa":"Using EDA we have learned a lot about the data and its underlying structure. We have also identified some of the few features that show evident correlation with the target variable. Next, let's run a feature importance analysis over the dataset to prove our hypothesis. We will train a random forest classifier which is one of the most popular model used for feature engineering to compute the importance score for each feature. We will then rank the features by their importance scores. This step is vital for modeling as it reduces the dimensions without loss of total information by selecting only the most significant features, thus increasing the model's overall performance.\n","2897ff20":"**Loan Type Distribution**","1aaedf3f":">The distribution trends of different regions are very similar.","e0c60d65":"Let's start by looking at the distribution of the loans, e.g. What are the changes of number of loan issued over time? What is the distribution of the loan amount applied by borrowers? The variables that will be included in this section are:\n\n- **issue_d** : The month which the loan was funded.\n- **loan_amnt** : The listed amount of the loan applied for by the borrower.\n- **addr_state** : The state provided by the borrower in the loan application.\n- **purpose** : Reason of the loan request.\n- **loan_status** : Current status of the loan.","b9826174":"There are columns that contain a lot of missing date. We need to remove these columns as they are not putting any significant value to the analysis. Here we drop columns with more than 80% of `NaN` value. ","57c29924":"**Interest Rate Versus Loan Grade**","fa716fbb":"The first thing we'll need to do is to import the required libraries and take a quick look at the data.","7b119940":"> **Purpose Versus Region By Frequency**","59174875":"Best way to see a overall picture of the relationships between features is to use a heatmap.","cdabc847":"**Interest Rate Versus Purposes**","31be301e":"The resultant dataset has 52 columns.","3cdfe262":"## Characteristics of good and bad borrowers","e0952fe4":"**Loan Amount Versus Region**","2a89caa6":"**Loan Distribution by Status**","85e549bc":">Above bar plot shows the top 24 features with the highest importance scores. As expected,  **interest rate**, **loan amount** and **annual income** made it to the list with importance scores above 0.01.","c5ca7be6":">As observed, *Default*, *Late* and *Current* loans have a higher loan amount in average than loans with other statuses from 2011 and 2013. This give us some idea about the relationship between loan amount and loan status. From 2013 onwards, the loan amount applied tends to stabilized at around $15,000. ","47b35c8d":"## To sum it up","138c1dc6":">The dataset is highly imbalanced where the number of good loan is much higher than the bad loan. (This may not seem to be a huge problem now but it will surely lead to performance degradation when it comes to modeling.)","3bcee291":">The top purposes with the highest loan amount are *credit card*, *small business*, *debt consolidation*, *home improvement* and *house*. ","ae354210":">Unsurprisingly, those who works for longer years get paid more annually.","649c4f3b":"Next we'll break the loans down by region and loan purpose to examine their distributions. We can divide up the loans into 4 US regions (Northeast, Midwest, West, South) from the 'addr_state' column which indicates the state where the loan was issued.","eece5ecb":"**Annual Income Versus Employment Length**","f5879d64":">Borrowers who work more than 10 years makes up a large proportion of the borrower population. Despite that, the percentage of them defaulting on a loan is very low as compared to borrowers who work less than 10 years. One possible reason behind this is that people from this group generally earns a higher income.","69e8a041":"**Loan Amount Versus Purpose**","585537eb":"## Any dependencies?","1343df7e":">The distributions of the loan types across different regions are very similar.","1d5d403b":"**Loan Grade**","42fd2b55":">Loans with purposes of *small business*, *house* and *moving* have the highest interest rate.","0cf63343":"**Interest Rate Versus Loan Amount**","409414c4":">Most of the loan are performing well here, but there is also a number of borrowers who have failed to repay by the payment deadline.","4e9e2008":"### Importing the libraries","61912657":">- The time series plot on the left shows a rising popularity of loan lending after 2011. The trend becomes unstable but continue to grow after the year of 2014.\n- The distribution of loan amount is slightly skewed to the right. Most borrowers applied loan of around $10,000.","1f6949c4":">Borrowers who have higher annual income are more likely to pay off the loan on time.","726ac374":">The correlation between annual income and interest rate is not evident. But it looks like those who earn more annually generally enjoy a lower interest rate for loans.","822bd8d6":">The interest rate increases when the loan amount goes up. The increment are small but we can see there is a positive correlation between them.","a1a35264":">Loan with the purpose of *Educational* and *small business* has slightly higher chance of becoming a bad loan than any other purposes.","6022929a":"## Introduction","0629fa3a":"We notice that some statuses are having similar definition which may introduce redundancy to the data. We need to do some standardization on the status label.","2aaf8bb4":"# Lending Club EDA - An Intuitive Approach","f1b44639":"## Loan Distribution ","b1ddd117":"**Interest Rate Versus Annual Income**","dad47399":"**Additional plot: correlation heatmap**","40487905":"**Region**","85b157fd":"**Employment Length**","326e680f":"Now that we have gained some understanding in the dataset, let's go down further to see if we can explore anything else that is insightful. \n\nRemember that all loan comes with risks: default and delinquency. Before granting approval for any loan request, we want to know whether the he\/she will keep his\/her promise and repay the loan on time based on their profile. Note that a past due loan is not equivalent to a default loan, but it is at high risk becoming one. We don't want that to happen either.\n\nTo get some clues on what might be the factors that affect the loan in the future, we need to first study the relationship between the features and loan type (we will catagorize the loan into *Good* and *Bad* category). Below are the additional features that we may want to look at:\n- **annual_inc** : Annual income of borrower.\n- **emp_length** : Employment length in years.\n- **grade** : Loan grade\n- **home_ownership** : Home ownership status of the borrower.\n- **int_rate** : Interest rate on the loan.\n","c60a11e2":"### Feature Importance Analysis","c58f5a9f":"**Interest Rate**","099e1a23":">- *South* region has the highest amount of loan while *midwest* region has the lowest.\n- The most common reason for a loan request is *debt consolidation*, followed by *credit card* and *home improvement*.","b8c3a85e":"### Handling missing values","73392d82":"## Getting Started","c912e8e4":"Throughout this kernel, we have done some data cleaning on the dataset, analysed some features via graphical representations to uncover correlated variables and tested our assumptions through feature analysis. We managed to discover a few factors that might contribute to the default of loan, eventhough there are still so many other features that have yet to be explored. Nevertheless, these are crucial steps and must be taken prior to building a predictive model as it obtains confidence in the data and helps in refining the selection of features for the model.\n","2753ba48":"In this section, we want to gain better understanding of the basic relationship between the features that we have previously seen.","057d5623":"**Loan Amount**","532ac17c":"**Annual Income**","6b9c397b":">Again, there appears a lot of similarity in the probability density of loan amount across different region. So we can infer that thare is hardly any relationship between region and loan amount.","9e85c5ba":"Lending Club is the world's largest peer-to-peer lending platform. They offers lending service by connecting the borrowers with investors through an online marketplace. While this has became a popular source of passive income for investors, there is also risk of default, in which the borrowers fall behind on their repayments. In this kernel, we will perform some explorations and feature analysis on the loan data provided by Lending Club to identify the potential *risk factors* associated with a loan default. The analyses will answer the following questions:","8fdadece":"List of columns and their data types","926e77e0":"## Relationship between variables","d1788b0a":"_**Hope you enjoyed this kernel and have fun exploring!**_","1094e814":"### Understanding the data","23dbb606":"**Loan Distribution by *Year* and *Amount***","5c3ca72d":"**Loan Purposes**","0053143a":">As depicted in the doughnut plot, majority of the borrowers have *mortgage* house, followed by *rent* and *own* house. However, borrowers who rent a house are more likely to delinquent on a loan than those who has a mortgage house.","a39ccc90":">The average interest rate is higher when the grade is lower.","c3f96661":"### Overview","95d0394a":"From the above analysis, we know that **annual income** and **interest rate** could be used to determine the likelihood of a loan becoming a bad loan to a substantial degree. But we may also want to find out whether they will be affected by changes in other variables.\n","f4d47d03":"**Home Ownership**"}}