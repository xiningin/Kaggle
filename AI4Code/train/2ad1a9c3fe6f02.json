{"cell_type":{"63f26dae":"code","43c3a63d":"code","be6ce738":"code","f76c9160":"code","f04c761f":"code","d132fccf":"code","4ac32aea":"code","3c2f0f2c":"code","3ccf1aa9":"code","f48d17a6":"code","3512dac2":"code","0348b3f6":"code","9f1cddaa":"code","8d14f030":"code","07824793":"code","b3ae988f":"code","4519d0aa":"code","37e7a509":"code","0e5dc337":"code","d4d0a4eb":"markdown","c81f7966":"markdown","caaca577":"markdown","d5f2c3f5":"markdown","cbda985d":"markdown","40909c71":"markdown","4d3d6893":"markdown","b529cd13":"markdown","a9af08ce":"markdown","3f04d593":"markdown","df5804d5":"markdown","ebd5d905":"markdown","641fe7a6":"markdown","ab301628":"markdown","43762bbc":"markdown","92913f40":"markdown","9b8d3a3a":"markdown","be775aac":"markdown","c8174ea2":"markdown","aea81978":"markdown","8647ff13":"markdown","3e43adbe":"markdown"},"source":{"63f26dae":"# # loading necessary libraries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport statsmodels.stats.api as sms\nfrom scipy.stats import ttest_1samp, shapiro, levene, ttest_ind, mannwhitneyu, pearsonr, spearmanr, kendalltau, \\\n    f_oneway, kruskal\nfrom statsmodels.stats.proportion import proportions_ztest\n\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', 10)\npd.set_option('display.float_format', lambda x: '%.5f' % x)","43c3a63d":"!pip install openpyxl","be6ce738":"# Reading the data\nControl_df = pd.read_excel(\"..\/input\/ab-testing\/ab_testing.xlsx\", sheet_name=\"Control Group\", usecols=\"A:D\")\nTest_df = pd.read_excel(\"..\/input\/ab-testing\/ab_testing.xlsx\", sheet_name=\"Test Group\", usecols=\"A:D\")","f76c9160":"print(Control_df.head())\nprint(Test_df.head())","f04c761f":"print(Control_df.describe().T)\nprint(Test_df.describe().T)","d132fccf":"#checking for missing values\nControl_df.isnull().sum()\nTest_df.isnull().sum()","4ac32aea":"# Focus purchase averages\ncontrol = pd.DataFrame(Control_df[\"Purchase\"])\ntest = pd.DataFrame(Test_df[\"Purchase\"])","3c2f0f2c":"# Purchases in the control and test group are combined.\nct = pd.concat([control, test], axis=1)\nct.columns = [\"Purchase_c\", \"Purchase_t\"]\nct.head()","3ccf1aa9":"print(ct[\"Purchase_c\"].mean())\n\nprint(ct[\"Purchase_t\"].mean())","f48d17a6":"test_stat, pvalue = shapiro(ct[\"Purchase_c\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","3512dac2":"test_stat, pvalue = shapiro(ct[\"Purchase_t\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","0348b3f6":"test_stat, pvalue = levene(ct[\"Purchase_c\"], ct[\"Purchase_t\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","9f1cddaa":"est_stat, pvalue = ttest_ind(ct[\"Purchase_c\"], ct[\"Purchase_t\"], equal_var=True)\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","8d14f030":"ctr_control = Control_df[\"Click\"].sum() \/ Control_df[\"Impression\"].sum()\nctr_test = Test_df[\"Click\"].sum() \/ Test_df[\"Impression\"].sum()","07824793":"print(ctr_control)\nprint(ctr_test)","b3ae988f":"clicks = np.array([Control_df[\"Click\"].sum(), Test_df[\"Click\"].sum()])\nimpressions = np.array([Control_df[\"Impression\"].sum(), Test_df[\"Impression\"].sum()])\n\ntest_stat, pvalue = proportions_ztest(count=clicks, nobs=impressions, alternative=\"two-sided\")\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","4519d0aa":"cr_control = Control_df[\"Purchase\"].sum() \/ Control_df[\"Impression\"].sum()\ncr_test = Test_df[\"Purchase\"].sum() \/ Test_df[\"Impression\"].sum()","37e7a509":"print(cr_control)\nprint(cr_test)","0e5dc337":"purchase = np.array([Control_df[\"Purchase\"].sum(), Test_df[\"Purchase\"].sum()])\nimpression = np.array([Control_df[\"Impression\"].sum(), Test_df[\"Impression\"].sum()])\n\ntest_stat, pvalue = proportions_ztest(count=purchase, nobs=impression, alternative=\"two-sided\")\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","d4d0a4eb":"# **AB Testing with Python**\n![abtest](https:\/\/www.ideasoft.com.tr\/wp-content\/uploads\/2018\/01\/facebook-ab-testi-1-1024x536.jpg)\n\nImage Source [http:\/\/www.ideasoft.com.tr\/facebook-ab-testi\/](http:\/\/www.ideasoft.com.tr\/facebook-ab-testi\/)\n\nA gaming company has long decided to make changes to the interface of a mobile game on the market.\nAs a result of the change, the user wants to measure their experience. It analyzes the conversion rates of its new interface with A\/B test.\n\nOne of their customers has decided to test this new feature and wants to do an A\/B test to see if new interface converts more than existing.\n\nIn this A\/B test, the client randomly splits its audience into two equally sized groups, e.g. the test and the control group. It is the current interface control group in the analysis. The new interface that has been modified will be the test group.\n\n**Data Understanding**\n\nImpression \u2013 Number of ad views\n\nClick \u2013 Specifies the number of clicks on the ad that appears.\n\nPurchase \u2013 Specifies the number of products purchased after clicked ads.\n\nEarning \u2013 Gain after purchased products\n\n\n","c81f7966":"**Equality of variances**\n\nLevene test is applied for checking the first assumption. \n\nH0: The variances are homogeneous.\n\nH1: The variances are non-homogeneous","caaca577":"Test to Be Applied: Independent 2 Sample Proportion Tests\n\nThe assumption has been made. (n\u2265 30)\n\nH0: There is no statistically significant difference between control and test group CR values.\n\nH1: There is a statistically significant difference between control and test group CR values.","d5f2c3f5":"# **Conclusion**\n\nThere was no significant difference between the control group and the test group product purchase averages.\n\nCompared to the control group and the test group CTR ratios, the situation was found to be in favor of the current situation.\n\nCompared to the control group and test group conversion rates, the situation was found to be in favor of the current situation\n","cbda985d":"At first glance, we see that the conversion rate is in favor of the control group. So when we say how many of the viewers have bought it, the current rate is better.\n\nBut does this make a statistically significant difference? Or was it just a coincidence?","40909c71":"**Customer Recommendations**\n\nAs a result, it doesn\u2019t bring more conversions than existing interface. I recommend to the client to continue with existing.\n\nIn addition, the test can be repeated with more data to be obtained in the future.","4d3d6893":"**Independent Two-Sample T-Test**\n\nH0: The product purchasing averages of the control group and the test group are equal to each other. (\u03bc1=\u03bc2)\n\nH1: The product purchasing averages of the control group and the test group are not equal. (\u03bc1 \u2260 \u03bc2)","b529cd13":"**Normality of data distribution**\n\nShapiro test is applied for checking the first assumption. \n\nH0 : The population from which the sample comes from dissipates normally.\n\nH1 : The population from which the sample comes from does not dissipate normally.","a9af08ce":"**CR (Conversion rate)**\n\nConversion rate is a metric, shown as a percentage that displays how many website or app visitors complete an action out of the total number of visitors.\nTo calculate the Conversion Rate, you\u2019ll divide the total number of visitors to your website or landing page by the number of completed goals.\n\nSimilarly, if I want to calculate how many website visitors convert into paying customers, the conversion rate formula will look like this:\n\n* Number of Actions \/ Total Traffic to Site = Conversion Rate","3f04d593":"p-value > 0.05 \u2192 Fail to Reject H0\nAs a result of Shapiro test, it is seen that the normality assumption has been satisfied.","df5804d5":"Result: p value < 0.05 \u2192 Fail to reject H0\n\nWe reject H0 meaning that there is statistically meaningful difference between two groups values and the difference is in favor of the exisitng method.","ebd5d905":"Control Group has 550 purchases in average and test group has 582 purchases in average, meaning Test group has more purchases in average. However, we need to check if this is a significant difference.","641fe7a6":"As the normality and equal variance of distributions assumptions are satisfied, we can use Independent Two-Sample T-Test for testing the hypothesis.","ab301628":"You can find more resources on the subject on [Veri Bilimi Okulu Pages](http:\/\/www.veribilimiokulu.com\/istatistiksel-a-b-testleri-nasil-yapilir\/)","43762bbc":"Hypothesis Testing\n\nIs there a statistically significant difference between control and test group product purchase averages?\n\nWe have independent and paired sample groups, we can use T-testing for Hypothesis test.\nA t-test is a statistic method used to determine if there is a significant difference between the means of two groups based on a sample of data.\n\nThe common assumptions made when doing a t-test include normality of data distribution and equality of variance in standard deviation.\n\n* Normality of data distribution\n* Equality of variances","92913f40":"When looking at the click rates, the values of the control group are higher than the test group. The click-to-click rate of the current system looks better. It should be tested whether this situation contains statistical signiability.","9b8d3a3a":"As a result, the p-value found smaller than 0.05 meaning that we reject the H0 hypothesis.\nWhen bidding methods are examined, there is a statistically significant difference between CTR rates.\nAnd this difference is in favor of the control group.","be775aac":"**Analyzing Other Metrics by Hypothesis Testing**\n\nCTR (Click through rate)  and Conversion Rate metrics are proportions. Obtained by the other part of one value. In two independent groups, independent 2 sample proportion tests are used when comparing rates.\n\n**CTR**\n\nClick-through rate (CTR) is a metric, shown as a percentage, that measures how many people clicked your ad to visit a website or landing page.\n\nTo calculate the click-through rate on a paid ad, divide the total number of clicks on the ad by the total number of impressions (i.e. the total number of people who saw the ad).\n","c8174ea2":"* Group A: Existing method:   Control Group\n* Group B: New method:   Test Group","aea81978":"p-value > 0.05 \u2192 Fail to Reject H0\n\nResult\n\nThe hypothesis that the averages of the control group and the test group to purchase products are equal cannot be rejected. The initial comment was by chance.\n\nThere is no statistically significant difference between control and test group product purchase averages.","8647ff13":"p-value > 0.05 \u2192 Fail to Reject H0 \n\nThe hypothesis that \"variances are homogeneous\" cannot be rejected. So variances can be considered homogeneous.","3e43adbe":"Test to Be Applied: Independent 2 Sample Proportion Tests \n\nThe assumption has been made. (n\u2265 30)\n\n\nH0: There is no statistically significant difference between control and test group CTR rates.\n\nH1: There is a statistically significant difference between control and test group CTR rates."}}