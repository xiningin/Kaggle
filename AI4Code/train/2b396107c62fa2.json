{"cell_type":{"ca80cd17":"code","59250fd6":"code","98e29ebd":"code","f9d4114c":"code","0cbc78af":"code","6c661b0f":"code","606ba0f4":"code","e95fcf4f":"code","450e0c97":"code","5fd6e572":"code","b044386e":"code","00919787":"code","85d9aa9d":"code","4e90bdc3":"markdown","268630a6":"markdown","ea196f31":"markdown","1656a92a":"markdown","a26cdc94":"markdown","09ff2c94":"markdown","33e3fd4a":"markdown","b0240aae":"markdown","4b2ab084":"markdown","e102a30f":"markdown","3b087058":"markdown","35695db9":"markdown","425803c2":"markdown","f4b44c2e":"markdown","551cb06b":"markdown","d8375b48":"markdown","38d9a821":"markdown","ebd5cc03":"markdown","a2185be3":"markdown","a6782491":"markdown","6dbfa084":"markdown","21594e90":"markdown","400a39ef":"markdown","e41564eb":"markdown","a0cb2cdb":"markdown","90fd83a7":"markdown","900bb632":"markdown"},"source":{"ca80cd17":"import pandas as pd\nimport numpy as np\nimport warnings\nwarnings.filterwarnings('ignore')\nimport plotly.express as px\n\ndf = pd.read_csv('..\/input\/76-16-election-analysis\/76-16_president.csv')\ncols_to_keep = ['year','state','state_po','candidate','party',\n                'writein','candidatevotes','totalvotes']\ndf = df[cols_to_keep]\nelec_votes = pd.read_csv('..\/input\/76-16-election-analysis\/electoral_votes.csv')\ndf.head()","59250fd6":"def election_results(year):\n    print('{} ELECTION ANALYSIS\\n'.format(year))\n    focus_df = df[df['year']==year] #Isolate the election year\n    #Identify Democratic and Republican candidates\n    democrat = focus_df[focus_df['party']=='democrat']['candidate'].unique()[0] \n    republican = focus_df[focus_df['party']=='republican']['candidate'].unique()[0]\n    candidates = [democrat, republican]\n    \n    #Names are stored as (last,first), rearrange for the purposes of printing it out\n    democrat_first = democrat.split(',')[1].strip()\n    democrat_last = democrat.split(',')[0].strip()\n    democrat = democrat_first + ' ' + democrat_last\n    republican_first = republican.split(',')[1].strip()\n    republican_last = republican.split(',')[0].strip()\n    republican = republican_first + ' ' + republican_last\n    #Print the two major candidates of the election\n    print('Candidates: {} (R) & {} (D)'.format(republican, democrat))\n\n    #Divide into DataFrames for each candidate to tally total votes\n    dem_df = focus_df[focus_df['candidate']==candidates[0]]\n    '''Most years had New York listed twice for each candidate\n    (under liberal\/conservative instead of Dem\/Rep)\n    Need to group this data to get the sum of the two entries\n    and drop the duplicate row'''\n    dem_df['votesclean'] = dem_df.groupby(\n        dem_df['state'])['candidatevotes'].transform(sum)\n    dem_df = dem_df.drop_duplicates(subset='state_po')\n    \n    #Do the same for the Republican candidate\n    '''In 2012 in the state of Washington, Mitt Romney was incorrectly listed as \n    'Mitt, Romney' in the data instead of 'Romney, Mitt', so need to fix that \n    issue to make sure all data is counted correctly'''\n    if year==2012:\n        rep_df = focus_df[(focus_df['candidate']==candidates[1])\n                          |(focus_df['candidate']=='Mitt, Romney')]\n    else:\n        rep_df = focus_df[focus_df['candidate']==candidates[1]]\n    rep_df['votesclean'] = rep_df.groupby(\n        rep_df['state'])['candidatevotes'].transform(sum)\n    rep_df = rep_df.drop_duplicates(subset='state_po')\n\n    #Isolate columns that we want to keep for analysis\n    dem_df = dem_df[['year', 'state', 'state_po', 'votesclean', 'totalvotes']]\n    #Change votes in dem_df to votes_d to use in combined DataFrame\n    dem_df.columns = ['year', 'state', 'state_code', 'votes_d', 'total_votes']\n    dem_df.reset_index(inplace=True)\n    rep_df = rep_df[['year', 'state', 'state_po', 'votesclean', 'totalvotes']]\n    #Change votes in rep_df to votes_r to use in combined DataFrame\n    rep_df.columns = ['year', 'state', 'state_code', 'votes_r', 'totalvotes']\n    rep_df.reset_index(inplace=True)\n    \n    #Combine df's by bringing over votes_r\n    dem_df['votes_r'] = rep_df['votes_r']\n    final_df = dem_df\n    #Calculate ind. votes by subtracting d\/r votes from the total votes in each state\n    final_df['votes_i'] = (final_df['total_votes'] - \n                           (final_df[['votes_d', 'votes_r']].sum(axis=1)))\n    final_df = final_df[['year', 'state', 'state_code', 'votes_d', \n       'votes_r', 'votes_i', 'total_votes']]\n    \n    #Load in electoral votes for each state in given year\n    final_df['electoral_votes'] = elec_votes[str(year)]\n    e_votes = final_df['electoral_votes'].sum()\n    print('Total Electoral Votes in {}: '.format(year), e_votes)\n    print('Electoral Votes Needed to Win Presidency: ', \n          ((e_votes\/2).round(0)+1).astype(int), '\\n')\n    \n    #Determine winner of popular vote nationwide\n    vote_count = final_df[['votes_d', 'votes_r', 'votes_i']].sum()\n    vote_count.index = [democrat, republican, 'Independent']\n    vote_count = vote_count.sort_values(ascending=False)\n    pop_winner = vote_count.nlargest(1).index[0]\n    print('Total Votes:', vote_count.to_string(), sep='\\n')\n    print('Winner of the Popular Vote: ', pop_winner)\n    \n    #Calculate proportion-based electoral votes in each state\n    final_df['ev_d'] = (final_df['electoral_votes'] * \n                        (final_df['votes_d']\/final_df['total_votes'])).round(0)\n    final_df['ev_r'] = (final_df['electoral_votes'] * \n                        (final_df['votes_r']\/final_df['total_votes'])).round(0)\n    final_df['ev_i'] = (final_df['electoral_votes'] * \n                        (final_df['votes_i']\/final_df['total_votes'])).round(0)\n\n    #Determine winner of popular vote in each state\n    final_df['state_winner'] = 'Republican'\n    #Change to democrat if they won the state\n    mask = final_df['votes_d'] > final_df['votes_r']\n    final_df.loc[mask,'state_winner'] = 'Democrat'\n    \n    #If electoral votes allocated improperly (due to rounding)\n    for x in (final_df[(final_df['electoral_votes'] != \n                        final_df[['ev_d','ev_r','ev_i']].sum(axis=1))==True].index):\n        #If allocated one too few\n        if (final_df.loc[x,'electoral_votes']-1 == \n            final_df.loc[x,['ev_d','ev_r','ev_i']].sum()):\n            #Award extra vote to winner of popular vote in the state\n            if final_df.loc[x, 'state_winner'] == 'Republican':\n                final_df.loc[x, 'ev_r']+= 1\n            elif final_df.loc[x, 'state_winner'] == 'Democrat':\n                final_df.loc[x, 'ev_d']+= 1\n        #If allocated one too many\n        elif (final_df.loc[x,'electoral_votes']+1 == \n              final_df.loc[x,['ev_d','ev_r','ev_i']].sum()):\n        #If the i. electoral vote count is nonzero, subtract the extra vote from them\n            if final_df.loc[x, 'ev_i'] > 0:\n                final_df.loc[x, 'ev_i']-= 1\n        else:\n            #Identify additional problems after reallocation\n            print(final_df[(final_df['electoral_votes'] != \n                            final_df[['ev_d','ev_r','ev_i']].sum(\n                                axis=1))==True].index)\n\n    #Sum up and print final results\n    final_ev = final_df[['ev_d','ev_r','ev_i']].sum().astype(int)\n    final_ev.index = [democrat, republican, 'Independent']\n    final_ev = final_ev.sort_values(ascending=False)\n    winner = final_ev.nlargest(1).index[0]\n    print('\\nTotal Electoral Votes by Candidate Under Popular-Electoral Method:',\n          final_ev.to_string(), sep='\\n')\n    print('Winner of the {} Popular-Electoral Presidential Election: '.format(year),\n          winner)\n    if final_ev.nlargest(1).values[0] < 270:\n        print('*Winner by Majority, Does Not Meet 270 Vote Threshold*')\n    print('\\nCOMPARE\\n')\n    \n    #Calc elec votes for each candidate under traditional method for comparison\n    #NOT PERFECT, does not account for states that do not use winner take all system,\n    final_df['old_ev_r'] = 0\n    final_df['old_ev_d'] = 0\n    for x in final_df[final_df['state_winner']=='Republican'].index:\n        final_df.loc[x, 'old_ev_r'] = final_df.loc[x, 'electoral_votes']\n    for x in final_df[final_df['state_winner']=='Democrat'].index:\n        final_df.loc[x, 'old_ev_d'] = final_df.loc[x, 'electoral_votes']\n    old_ev = final_df[['old_ev_d', 'old_ev_r']].sum()\n    old_ev.index = [democrat, republican]\n    old_ev = old_ev.sort_values(ascending=False)\n    print('Actual Electoral Votes in the {} Election:'.format(year), \n          old_ev.to_string(), sep='\\n')\n    actual_winner = old_ev.nlargest(1).index[0]\n    print('Winner of the {} Presidential Election: '.format(year), actual_winner)\n    \n    #Calcuate proportion of votes that were Democrat \n    #(need %Dem because color scale is Red->Blue)\n    final_df['% Democrat'] = (final_df['votes_d']\/\n                              (final_df['votes_r']+\n                               final_df['votes_d'])*100).round(2)\n    fig = px.choropleth(final_df,  # Input Pandas DataFrame\n                        locations='state_code',  # DataFrame column with locations\n                        color='% Democrat',  # DataFrame column with color values\n                        hover_name='state', # DataFrame column hover info\n                        locationmode = 'USA-states', # Set to plot as US States\n                        color_continuous_scale = 'rdbu',\n                        range_color=(20,80))\n\n    fig.update_layout(\n        title_text = 'States Based on Voting Margins', # Create a Title\n        geo_scope='usa',  # Plot only the USA instead of globe\n    )\n    fig.show(renderer='notebook_connected')\n    #Print final DataFrame at end of analysis\n    return final_df\n","98e29ebd":"election_results(1976)","f9d4114c":"election_results(1980)","0cbc78af":"election_results(1984)","6c661b0f":"election_results(1988)","606ba0f4":"election_results(1992)","e95fcf4f":"election_results(1996)","450e0c97":"election_results(2000)","5fd6e572":"election_results(2004)","b044386e":"election_results(2008)","00919787":"election_results(2012)","85d9aa9d":"election_results(2016)","4e90bdc3":"# 2004: Bush v Kerry","268630a6":"[Back to Top](#Table-of-Contents)","ea196f31":"### Background and Methodology\n\nThe outcome of the United States Presidential Election is decided by the Electoral College.  Each state and the District of Columbia is assigned a certain number of electoral votes that is equal to number of senators and representatives that the state has.  Each state has two senators and at least one representative in the House, so the minimum number of votes a state can have is three.  Since 1964, there have been a total of 538 total electoral college votes, so in order to guarantee a win in an election, a candidate must get at least 270 votes.  Every state, with the exception of Nebraska and Maine, use a *winner take all* system to determine the recipient of their electoral votes. This means that whichever candidate wins the most votes in each state wins all of that state's electoral votes. Maine and Nebraska have their own system, which is similar, but is not important for the purpose of this analysis so I will not go into it.  \n\nMy idea that I proposed in my last analysis was a hybrid of the electoral college and the popular vote.  Electoral votes would be assigned to candidates based on the percentage of the popular vote that they received in each state.  For example using the 2020 election, California has 55 electoral votes.  Joe Biden carried the state with 64% of the vote, and Donald Trump received 34%, with the other 2% going to Independent candidates.  For simplicity sake in this analysis, I only focused on Democratic\/Republican candidates, and summed up all other votes under an \"Independent\" category.  Under the current system, Joe Biden receives all 55 of California's electoral votes.  But under my propsed system, Joe Biden would receive 35 (35.2 rounded down) votes, Donald Trump would receive 19 (18.7 rounded up) votes, and Independents would receive the final vote.  As a result of my analysis of the 2020 election, Joe Biden won the election with 271 electoral votes to Donald Trump's 266.  This is still preliminary as votes continue to be counted and results are certified, but it looks much different than the actual outcome of the election (306 to 232 in favor of Joe Biden).  \n\nBefore I get into the analysis, I would like to give a brief overview of how this analysis was done.  First of all, the data I used comes from the [MIT Election Lab](https:\/\/electionlab.mit.edu\/data).  I also created my own CSV file containing data on how many electoral votes each state had in a given year.  So the first thing I needed to do was transform the data into a usable form for my analysis.  I started out by writing different code, specific to each election year, but was able to clean things up to a point where I was able to create a formula that takes in the year as input, and runs the analysis on that election.  If you look at the formula down below, I have left comments in the code to explain the steps that I took transforming\/analyzing the data.  But the general step by step guide is as follows:\n* Isolate the given year in the dataset.\n* Identify the Democratic and Repulican candidates.\n* Count the total votes in each state for each candidate.\n* Subtract these votes from the total votes to identify votes for a third party candidate.\n* Load in electoral votes for each state.\n* Calculate electoral votes for each candidate given their proportion of total votes in each state, rounded to the nearest whole number.\n* Identify states that did not allocate all votes or allocated too many, due to rounding issues.\n* For states that didn't allocate all votes, award final vote to the winner of the popular vote in each state.\n* For states that allocated too many, take the extra vote away from the Independent candidate if their total was nonzero (I am not confident that this is the best method, but it was the best I could come up with, if you have any other suggestions let me know).\n* Sum up electoral votes and declare a winner!  \n\nThis project was already lengthy before I even began my write-up, so I will try to let the data speak for itself.  Above, you can use the [table of contents](#Table-of-Contents) to navigate to any year that you would like to see results for, or to the summary section to see how this method changed the outcome of certain elections.  Thank you for taking the time to check out the project!","1656a92a":"# 2000: Bush v Gore","a26cdc94":"# 2008: McCain v Obama","09ff2c94":"# 1992: Bush v Clinton","33e3fd4a":"# Summary and Conclusion\n\n| Year | Traditional Winner | Traditional EC Margin | Pop-EC Winner     | Pop-EC Margin |\n| -----|--------------------|:---------------------:|---------------    |:-------------:|\n| 1976 | Jimmy Carter       |           57          | Jimmy Carter      | 11            |\n| 1980 | Ronald Reagan      |           440         | Ronald Reagan     | 57            |\n| 1984 | Ronald Reagan      |           512         | Ronald Reagan     | 109           |\n| 1988 | George H.W. Bush   |           315         | George H.W. Bush  | 45            |\n| 1992 | Bill Clinton       |           202         | Bill Clinton      | 30            |\n| 1996 | Bill Clinton       |           220         | Bill Clinton      | 42            |\n| 2000 | George W. Bush     |           5           | Al Gore*          | 5             |\n| 2004 | George W. Bush     |           35          | George W. Bush    | 20            |\n| 2008 | Barack Obama       |           192         | Barack Obama      | 40            |\n| 2012 | Barack Obama       |           126         | Barack Obama      | 12            |\n| 2016 | Donald Trump       |           77          | Hillary Clinton*  | 6             |  \n*denotes outcome changed  \n\n\nThe Popular-Electoral method changed the results of the elections by 166 electoral votes, on average.  It also changed the *winner* of the election in two different elections, 2000 and 2016.  Interestingly enough, the \"new\" winners of those elections (Al Gore and Hillary Clinton) actually won the national popular vote, which lends credibility to the idea that a hybrid system might work better than the current system.  \n\nThe most drastic change came in 1984.  In that election, Ronald Reagan won every single state, except Minnesota and Washington DC, over challenger Walter Mondale.  It was the second-most lopsided presidential election in modern US history.  But overall, he only won 58.8% of the total votes.  Does winning 97.6% of the Electoral College make sense whenever he won 58.8% of votes?  Maybe it does because that is what we have grown accustomed to under the Electoral College.  But under the Popular-Electoral system, Reagan would win 60% of electoral votes, which much better reflects the size of his victory in the popular vote.\n\n| Year | Traditional Winner | Popular Vote          | Traditional EC Percent | Pop-EC Percent|\n| -----|--------------------|:---------------------:|:----------------------:|:-------------:|\n| 1976 | Jimmy Carter       |           50.1%       | 55.2%                  | 50.7%         |\n| 1980 | Ronald Reagan      |           50.7%       | 90.9%                  | 51.9%         |\n| 1984 | Ronald Reagan      |           58.8%       | 97.6%                  | 60.0%         |\n| 1988 | George H.W. Bush   |           53.4%       | 79.2%                  | 54.1%         |\n| 1992 | Bill Clinton       |           43.0%       | 68.8%                  | 43.3%         |\n| 1996 | Bill Clinton       |           49.2%       | 70.4%                  | 50.0%         |\n| 2000 | George W. Bush     |           47.9%       | 50.3%                  | 48.3%         |\n| 2004 | George W. Bush     |           50.7%       | 53.2%                  | 51.7%         |\n| 2008 | Barack Obama       |           52.9%       | 67.8%                  | 53.5%         |\n| 2012 | Barack Obama       |           51.5%       | 61.7%                  | 50.9%         |\n| 2016 | Donald Trump       |           41.6%       | 56.5%                  | 47.2%         |\n\n\n\nIn every election since 1976, the winner performed worse, as a percentage of total electoral votes, under the Popular-Electoral method than the traditional method.  Basically, it has made every election a tighter race.  And the data leads me to believe that the Popular-Electoral method might be a better representation of the country as a whole.  In general, the Popular-Electoral method of proportions of electoral votes is within a few percentage points of the actual share of the national popular vote for each candidate.  \n\n\nI devised this method after a friend brought up the question \"why does Hillary Clinton get all the electoral votes in California whenever California had the third most votes for Trump of any state in the country\".  The Popular-Electoral method keeps the general idea of the Electoral College (more populous states get a bigger say in the outcome of an election) while also incorporating the popular vote on a state-by-state basis.  The data I have laid out shows much tighter races in each election since 1976, and even two different outcomes, in 2000 and 2016.  It also could increase the viability of third party campaigns, as you can see in [1992](#1992:-Bush-v-Clinton), Independent candidates as a whole would have won 102 electoral votes.  \n\nThis analysis, of course, did not consider third party candidates individualy because outside of 1992, none were particularly viable.  But this system could lead to the rise of the third party candidate, because you no longer need to win the popular vote in a state to garner electoral votes.  Or, this system could lead to an opposite effect.  This system leads to more emphasis being placed on the value of a single vote.  So a (present day) Democratic voter in Kansas or Repubican voter in California might be more inclined to vote for their candidate, instead of possibly voting third party or abstaining from voting because they think that their vote doesn't count.  I think that is the biggest problem with the Electoral College currently.  If you don't live in Pennsylvania, Michigan, Wisconsin, or another state generally referred to as a \"swing state\", you might feel like the outcome of your state is already decided and that your voice isn't being heard.  \n\nDo I think that the Popular-Electoral method is a viable alternative to the Electoral College.  The short answer is I don't know.  Politics is not my area of expertise, and much more analysis would need to be done to determine its validity.  For me, this was a \"What-If\" scenario that led to a fun analysis and project for me to make.  However, I do think the Popular-Electoral method would lead to significant changes in how campaigning and voting is done.  This analysis is done on the traditional method, using an alternative lens, and would become obsolete if this method were ever actually put into place.  But I still think that it is a unique and interesting way to look at the results of presidential elections since 1976.  \n\nThank you for taking the time to check out my project.  I hope that I made it easy to navigate if you were just here to skim the results.  Feel free to send this to anyone in your network who might find it interesting, and if you have any questions or suggestions, you can reach me at tylerjfi@umich.edu.\n\n[Back to Top](#Table-of-Contents)","b0240aae":"[Back to Top](#Table-of-Contents)","4b2ab084":"[Back to Top](#Table-of-Contents)","e102a30f":"[Back to Top](#Table-of-Contents)","3b087058":"# 1996: Dole v Clinton","35695db9":"[Back to Top](#Table-of-Contents)","425803c2":"[Back to Top](#Table-of-Contents)","f4b44c2e":"# The Code","551cb06b":"# 1976: Ford v Carter","d8375b48":"# 1988: Bush v Dukakis","38d9a821":"[Back to Top](#Table-of-Contents)","ebd5cc03":"# 2016: Trump v Clinton","a2185be3":"### Table of Contents\n\n[Background and Methodology](#Background-and-Methodology)  \n[The Code](#The-Code)  \n[1976 Election: Ford v Carter](#1976:-Ford-v-Carter)  \n[1980 Election: Reagan v Carter](#1980:-Reagan-v-Carter)  \n[1984 Election: Reagan v Mondale](#1984:-Reagan-v-Mondale)  \n[1988 Election: Bush v Dukakis](#1988:-Bush-v-Dukakis)  \n[1992 Election: Bush v Clinton](#1992:-Bush-v-Clinton)  \n[1996 Election: Dole v Clinton](#1996:-Dole-v-Clinton)  \n[2000 Election: Bush v Gore](#2000:-Bush-v-Gore)  \n[2004 Election: Bush v Kerry](#2004:-Bush-v-Kerry)  \n[2008 Election: McCain v Obama](#2008:-McCain-v-Obama)  \n[2012 Election: Romney v Obama](#2012:-Romney-v-Obama)  \n[2016 Election: Trump v Clinton](#2016:-Trump-v-Clinton)  \n[Summary and Conclusion](#Summary-and-Conclusion)","a6782491":"[Back to Top](#Table-of-Contents)","6dbfa084":"[Back to Top](#Table-of-Contents)","21594e90":"# An Alternative Analysis of US Presidential Elections Since 1976\n##### By Tyler Fitzgerald - tylerjfi@umich.edu\n\nA few weeks ago, I released a project that analyzed the 2020 US Presidential Election using an alternative approach, which I called the Popular-Electoral Method.  You can take a look at this project [here](https:\/\/www.kaggle.com\/tylerjfi\/an-alternative-analysis-of-the-2020-election).  In this project, I have expanded on that analysis to include results from presidential elections since 1976.  \n\nI am actively seeking employment in the world of data analytics, so please share with anyone in your network who might find this interesting!","400a39ef":"# 1980: Reagan v Carter","e41564eb":"# 2012: Romney v Obama","a0cb2cdb":"# 1984: Reagan v Mondale","90fd83a7":"[Back to Top](#Table-of-Contents)","900bb632":"[Back to Top](#Table-of-Contents)"}}