{"cell_type":{"a46cf4ec":"code","b98b177c":"code","94c07346":"code","79fc85ba":"code","866b65dd":"code","a89c9053":"code","b3042780":"code","4a2efe89":"code","4b778fe4":"code","10c8ba46":"code","77ee2625":"code","8bd44d84":"code","f6a0705e":"code","545878b3":"code","b0f5b1ec":"code","c2abc0e8":"code","2cdeb30d":"code","0dbeaad5":"code","6b51edc3":"code","2b906eab":"code","fffe333e":"code","c7d084a6":"code","b3aa11bc":"code","96c8c1d1":"code","f1faa767":"code","c8e7b18e":"code","c3e68a16":"code","5c000fe9":"code","b6aa0dfc":"code","7a1e7e25":"code","e874d809":"code","00ca1259":"code","64ccbfb5":"code","afd9b7a8":"code","3ceaa5dd":"code","dbdb9f90":"code","4b3fba05":"markdown","55574cbe":"markdown","ccd064c5":"markdown","f6d7d131":"markdown","3320255d":"markdown","c9d6974a":"markdown","a34e3e78":"markdown","34e3417f":"markdown","99d8f00e":"markdown","f99582d7":"markdown","1ad87301":"markdown","882f7be6":"markdown","a3b336de":"markdown","10fc6189":"markdown","80f0846d":"markdown"},"source":{"a46cf4ec":"!pip install prophet","b98b177c":"import matplotlib.pyplot as plt\nimport numpy as np \nimport pandas as pd\nimport requests\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')  # Hide warnings\n\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime\nfrom dateutil.relativedelta import relativedelta\nfrom platform import python_version\nfrom prophet import Prophet\nfrom prophet.plot import plot_plotly, plot_components_plotly, plot_yearly\nfrom scipy.stats import norm","94c07346":"print(python_version())","79fc85ba":"code = 'INTC'","866b65dd":"df = pd.read_csv('..\/input\/sp500-spx-components-stock-price\/data\/' + code + '.csv')","a89c9053":"df.head()","b3042780":"df.tail()","4a2efe89":"df.describe()","4b778fe4":"df.info()","10c8ba46":"df.isnull().sum()","77ee2625":"df.isna().sum()","8bd44d84":"df.dropna()","f6a0705e":"df['Date'] = pd.to_datetime(df['Date'])","545878b3":"df = df[df['Date'].between(datetime.now() - relativedelta(years=int(20)), datetime.now())]","b0f5b1ec":"df = df[[\"Date\",\"Adj Close\"]]\ndata = df.rename(columns={\"Date\": \"ds\", \"Adj Close\": \"y\"})","c2abc0e8":"url = 'https:\/\/www.macrotrends.net\/stocks\/charts\/' + code + '\/details\/revenue'\nhtml_text = requests.get(url).text\nsoup=BeautifulSoup(html_text, 'html5lib')\nquarterly_revenue = []\n\ntables = soup.find_all('table')\ntable_index = 0\nfor index, table in enumerate(tables):\n    if ('Quarterly Revenue'in str(table)):\n        table_index=index\nfor row in tables[table_index].tbody.find_all(\"tr\"):\n    col = row.find_all(\"td\")\n    if (col != []):\n        date = col[0].text\n        quarterly_revenue.append(date)\nquarterly_revenue","2cdeb30d":"quarterly_revenue = pd.DataFrame({\n  'holiday': 'Quarterly Revenue',\n  'ds': pd.to_datetime(quarterly_revenue),\n  'lower_window': 0,\n  'upper_window': 1,\n})\nholidays = quarterly_revenue","0dbeaad5":"model = Prophet(yearly_seasonality=True, weekly_seasonality=True, daily_seasonality=True, holidays=holidays)\nmodel.add_country_holidays(country_name='US')\nmodel.fit(data)","6b51edc3":"future = model.make_future_dataframe(periods=365)\npredict = model.predict(future)","2b906eab":"model.train_holiday_names","fffe333e":"fig_model_plot = model.plot(predict)","c7d084a6":"fig_model_plot_components = model.plot_components(predict)","b3aa11bc":"fig_model_plot_yearly = plot_yearly(model)","96c8c1d1":"plot_plotly(model, predict)","f1faa767":"plot_components_plotly(model, predict)","c8e7b18e":"data.tail()","c3e68a16":"data_log_transform = data","5c000fe9":"data_log_transform['y'] = np.log(data_log_transform['y'])","b6aa0dfc":"data_log_transform.tail()","7a1e7e25":"model_log_transform = Prophet(yearly_seasonality=True, weekly_seasonality=True, daily_seasonality=True, holidays=holidays)\nmodel_log_transform.add_country_holidays(country_name='US')\nmodel_log_transform.fit(data_log_transform)","e874d809":"future_log_transform = model_log_transform.make_future_dataframe(periods=365)\npredict_log_transform = model_log_transform.predict(future_log_transform)","00ca1259":"fig_model_log_transform_plot = model_log_transform.plot(predict_log_transform)","64ccbfb5":"fig_model_log_transform_plot_components = model_log_transform.plot_components(predict_log_transform)","afd9b7a8":"fig_model_log_transform_plot_yearly = plot_yearly(model_log_transform)","3ceaa5dd":"plot_plotly(model_log_transform, predict_log_transform)","dbdb9f90":"plot_components_plotly(model_log_transform, predict_log_transform)","4b3fba05":"# Getting Extra Quarterly Revenue Data with BratifulSoup","55574cbe":"Thanks you for your watching. Please let me know your though if any.\n\nHope you have a great day!","ccd064c5":"# Data Understanding","f6d7d131":"# Data Preparation","3320255d":"# Load the dataset","c9d6974a":"# Know the setup","a34e3e78":"# Data Transform","34e3417f":"## Define var for furture usage","99d8f00e":"# Drop invalid value","f99582d7":"# Extra: Log transform","1ad87301":"## Convert Date field from object datatype into datetime datatype","882f7be6":"# Data Modelling","a3b336de":"## Select sepecific time range\n\n### Select 20 years data","10fc6189":"# Checking invalid value","80f0846d":"# Data Visualization"}}