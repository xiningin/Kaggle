{"cell_type":{"57608125":"code","f11b9797":"code","19811664":"code","dc5a9ca5":"code","e959a751":"code","7a10a1bf":"code","dc251ab6":"code","9d8410bc":"code","23cc6519":"code","ee056304":"code","d77a6aef":"code","85fcde5b":"code","873019e9":"code","b138e349":"code","d0af255b":"code","d30d41ec":"code","52b3b9d5":"code","a8bb826f":"code","2e764191":"code","f77c1ad3":"code","e7dad28a":"code","4eba9abc":"code","4176ac0a":"code","e2524d42":"code","b9c7d5bb":"code","c0933650":"markdown","d19f7e4d":"markdown","093aa74d":"markdown","6a30cb05":"markdown","d88315df":"markdown","0b9402f6":"markdown","67b626d8":"markdown","2c47e5d7":"markdown"},"source":{"57608125":"import datetime as dt\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\npd.set_option('display.max_columns', None)\n#pd.set_option('display.max_rows', None)\npd.set_option('display.float_format', lambda x: '%.2f' % x)\n\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","f11b9797":"!pip install openpyxl ","19811664":"df = pd.read_excel(\"..\/input\/rfmcltvdata\/data.xlsx\")","dc5a9ca5":"df.head()","e959a751":"df.shape","7a10a1bf":"df.info()","dc251ab6":"df.describe().T[:2]","9d8410bc":"df.isnull().sum().any()","23cc6519":"df.isnull().sum()","ee056304":"df.dropna(inplace=True)\ndf.shape","d77a6aef":"# \u015eirketin E\u015fsiz \u00dcr\u00fcn Say\u0131s\u0131\n\ndf[\"StockCode\"].nunique()","85fcde5b":"df[\"StockCode\"].value_counts()","873019e9":"# En \u00e7ok sat\u0131lan 5 \u00fcr\u00fcn.\ndf.groupby(\"StockCode\", as_index=False).agg({\"Quantity\" : \"sum\"}).sort_values(by= \"Quantity\", ascending=False).head()","b138e349":"df = df[~df[\"Invoice\"].astype(str).str.contains(\"C\", na=False)]","d0af255b":"df[\"TotalPrice\"] = df[\"Quantity\"] * df[\"Price\"]\ndf.head()","d30d41ec":"today_date = dt.datetime(2011, 12, 11)\nrfm = df.groupby(\"Customer ID\").agg({\"InvoiceDate\" : lambda date: (today_date - date.max()).days,\n                                     \"Invoice\": lambda num: num.nunique(),\n                                     \"TotalPrice\": lambda TotalPrice: TotalPrice.sum()})\nrfm.head()","52b3b9d5":"rfm.columns = [\"recency\", \"frequency\", \"monetary\"]","a8bb826f":"rfm.head()","2e764191":"rfm = rfm[rfm[\"monetary\"] > 0]","f77c1ad3":"rfm.describe().T","e7dad28a":"rfm[\"recency_score\"] = pd.qcut(rfm[\"recency\"], 5, labels=[5, 4, 3, 2, 1])\nrfm[\"frequency_score\"] = pd.qcut(rfm[\"frequency\"].rank(method=\"first\"), 5, labels=[1,2,3,4,5])\nrfm[\"monetary_score\"] = pd.qcut(rfm[\"monetary\"], 5, labels=[1, 2, 3, 4, 5])\n\nrfm[\"RFM_SCORE\"] = rfm[\"recency_score\"].astype(str) + rfm[\"frequency_score\"].astype(str)","4eba9abc":"seg_map = {\n    r'[1-2][1-2]': 'hibernating',\n    r'[1-2][3-4]': 'at_Risk',\n    r'[1-2]5': 'cant_loose',\n    r'3[1-2]': 'about_to_sleep',\n    r'33': 'need_attention',\n    r'[3-4][4-5]': 'loyal_customers',\n    r'41': 'promising',\n    r'51': 'new_customers',\n    r'[4-5][2-3]': 'potential_loyalists',\n    r'5[4-5]': 'champions'\n}\n\nrfm['segment'] = rfm['RFM_SCORE'].replace(seg_map, regex=True)  # birle\u015ftirilen skorlar seg_map ile de\u011fi\u015ftirildi\nrfm.head()","4176ac0a":"rfm.sort_values(by=\"RFM_SCORE\",ascending=False)","e2524d42":"rfm['segment'].value_counts().plot(kind='bar', rot=0, title=\"Segment Frekans\")\nplt.show()","b9c7d5bb":"rfm[[\"segment\", \"recency\", \"frequency\", \"monetary\"]].groupby(\"segment\").agg([\"mean\", \"count\"])","c0933650":" # RFM \u0130le M\u00fc\u015fteri Segmentasyonu","d19f7e4d":"<img src= \"https:\/\/guillaume-martin.github.io\/images\/rfm-segments.png\" alt =\"Segment Map\">","093aa74d":"<a id=\"4\"><\/a>\n## 4.M\u00fc\u015fterileri Segmentasyonu","6a30cb05":"### Veri Seti:\nVeri seti \u0130ngiltere merkezli online bir sat\u0131\u015f ma\u011fazas\u0131n\u0131n 01\/12\/2009 09\/12\/2011 tarihleri aras\u0131ndaki sat\u0131\u015flar\u0131n\u0131 i\u00e7ermektedir.Bu \u015firketin \u00fcr\u00fcn katalo\u011funda hediyelik e\u015fyalar yer almaktad\u0131r.\u015eirketin m\u00fc\u015fterilerinin b\u00fcy\u00fck \u00e7o\u011funlu\u011fu kurumsal m\u00fc\u015fterilerdir.","d88315df":"<a id=\"2\"><\/a>\n## Veri Analizi","0b9402f6":"### \u0130\u00e7erik:\n1. [Betimsel \u0130statistikler](#1)\n2. [Veri Analizi](#2) <\/br>\n3. [RFM Skorlar\u0131 Olu\u015fturma](#3)\n4. [M\u00fc\u015fterileri Segmentasyonu](#4)","67b626d8":"<a id=\"3\"><\/a>\n## 3.RFM Skorlar\u0131 Olu\u015fturma","2c47e5d7":"<a id=\"1\"><\/a>\n## Betimsel \u0130statistikler"}}