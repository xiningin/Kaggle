{"cell_type":{"d30dc8db":"code","89fc2647":"code","99d90dca":"code","4b794efe":"code","c1842a3d":"code","dd857d2b":"code","6d3fde20":"code","54125444":"code","5c4fd453":"code","54265439":"code","f52ac073":"code","b2f6ae1b":"code","669bfc18":"code","e1f0fcbf":"code","53fc2de4":"code","49dfe4b9":"code","6df0b4ba":"code","0f0f7449":"code","332d6236":"code","2f4e5ac4":"code","809b9f8b":"code","b4eba476":"markdown","27a5c446":"markdown","6a8b6b13":"markdown"},"source":{"d30dc8db":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport os\nimport matplotlib.pyplot as plt\nplt.style.use('default')\nfrom pandas_profiling import ProfileReport\nfrom IPython.display import display","89fc2647":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","99d90dca":"df=pd.read_csv('\/kaggle\/input\/big-five-european-soccer-leagues\/BIG FIVE 1995-2019.csv')\n\n# data info\nprint(df.info())\n\ndf.head()","4b794efe":"profile = ProfileReport(df, title='Pandas Profiling Report', html={'style':{'full_width':True}})","c1842a3d":"profile.to_widgets()","dd857d2b":"pd.crosstab(df['Year'],df['Country'])","6d3fde20":"df['GGD'].plot.hist(bins=np.linspace(-.25,9.25,20),edgecolor='w',title='Game Goals Difference')","54125444":"pd.crosstab(df['GGD'],df['Country'],normalize='index').style.format(\"{:.2%}\").background_gradient(cmap='viridis')","5c4fd453":"pd.crosstab(df.loc[df['Year']==2018,'GGD'],df.loc[df['Year']==2018,'Country'],normalize='index').style.format(\"{:.2%}\").background_gradient(cmap='viridis')","54265439":"pd.crosstab(df['GGD'],df['Country'],normalize='columns').plot.bar(figsize=(18,6),title='Game Goals Difference',rot=0)","f52ac073":"plt.figure(figsize=(24,20))\n\nfor idx,year in enumerate(df['Year'].unique()[-12:],start=1):\n    plt.subplot(4,3,idx)\n    for country in df['Country'].unique():\n        sns.distplot(df.loc[(df['Country']==country) & (df['Year']==year),'GGD'],label=country,hist=False)\n    plt.title(year)\n    plt.legend()\n    \n#plt.tight_layout()\nplt.show()","b2f6ae1b":"df.columns","669bfc18":"df_rank=df.groupby(['Country','Year','Team_1'],as_index=False)['Team_1_(pts)'].sum().merge(\ndf.groupby(['Country','Year','Team_2'],as_index=False)['Team_2_(pts)'].sum(),right_on=['Country','Year','Team_2'],left_on=['Country','Year','Team_1'])\n#\ndf_rank.head()","e1f0fcbf":"df_rank['Pts']=df_rank[['Team_1_(pts)','Team_2_(pts)']].sum(axis=1)\n\n#\ndf_rank=df_rank[['Country','Year','Team_1','Pts']]\ndf_rank.rename(columns={'Team_1':'Team'},inplace=True)\n\ndf_rank.head()","53fc2de4":"plt.figure(figsize=(18,7))\nsns.violinplot(x=\"Year\", y=\"Pts\", hue=\"Country\",\n               inner=\"quart\",\n               data=df_rank.loc[df_rank.Year.isin(['1995','2000','2005','2010','2019'])])\nsns.despine(left=True)\nplt.show()","49dfe4b9":"\ng = sns.catplot(x=\"Year\", y=\"Pts\", hue=\"Country\", \n                capsize=.2, height=6, aspect=2.5,\n                kind=\"point\", data=df_rank)\ng.despine(left=True)","6df0b4ba":"plt.figure(figsize=(18,7))\n\nsns.boxplot(x=\"Year\", y=\"Pts\",\n            hue=\"Country\",\n            data=df_rank.loc[df_rank.Year.isin(['1995','2000','2005','2010','2019'])])\nsns.despine(offset=10, trim=True)\nplt.show()","0f0f7449":"# Initialize the figure\nf, ax = plt.subplots()\nsns.despine(bottom=True, left=True)\n\n# Show each observation with a scatterplot\nsns.stripplot(x=\"Year\", y=\"Pts\", hue=\"Country\",\n              data=df_rank.loc[df_rank.Year.isin(['1995','2000','2005','2010','2019'])], \n              dodge=True, alpha=.25, zorder=1)\n\n# Show the conditional means\nsns.pointplot(x=\"Year\", y=\"Pts\", hue=\"Country\",\n              data=df_rank.loc[df_rank.Year.isin(['1995','2000','2005','2010','2019'])], \n              dodge=.532, join=False, palette=\"dark\",\n              markers=\"d\", scale=.75, ci=None)\n\n# Improve the legend \nhandles, labels = ax.get_legend_handles_labels()\nax.legend(handles[3:], labels[3:], title=\"Country\",\n          handletextpad=0, columnspacing=1,\n          loc=\"lower right\", ncol=3, frameon=True)","332d6236":"def hexbin(x, y, color, **kwargs):\n    cmap = sns.light_palette(color, as_cmap=True)\n    plt.hexbin(x, y, gridsize=15, cmap=cmap, **kwargs)\n\nwith sns.axes_style(\"dark\"):\n    g = sns.FacetGrid(df_rank, hue=\"Country\", col=\"Country\", height=3)\ng.map(hexbin, \"Year\", \"Pts\");","2f4e5ac4":"df_rank['Pts'].plot.hist(bins=100,edgecolor='w',title='Pts')","809b9f8b":"grid = sns.FacetGrid(df_rank, col=\"Country\", margin_titles=True)\ngrid.map(plt.hist,\"Pts\", bins=100,density=True);","b4eba476":"## Team ranking","27a5c446":"## Game Goals Difference","6a8b6b13":"---\n\n# Data\n\n---"}}