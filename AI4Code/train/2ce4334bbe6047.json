{"cell_type":{"34e8d5b4":"code","8d37bf2f":"code","876e87f4":"code","6a3e59f4":"code","8d0736d9":"code","d2eb7750":"code","67c73cdf":"code","61910c46":"code","f62c77cf":"code","4788cacc":"code","2922a82c":"code","a521b858":"code","e42f87fe":"code","d4d38a67":"code","86c8e020":"code","7e024b20":"code","6307a0a0":"code","a6356246":"code","50ba73fd":"code","760e5062":"code","43579c27":"code","1c1c2829":"code","94062aa8":"code","7bc4c2ed":"code","569cdf2c":"code","f1369af9":"code","bf1eedd2":"code","76193e76":"code","59c08f17":"code","bfe0988c":"code","37f98e9b":"code","686b7f56":"code","6db54d5e":"code","c71fb612":"code","284ae9f5":"code","cca662b7":"code","311a3b97":"code","ae98be5c":"code","6a540324":"code","8c20cbd0":"code","481997cb":"code","fcc97a66":"code","c0ecd364":"code","39e0a022":"code","1bf30ff5":"code","a04224f2":"code","592d0257":"code","67ae2156":"code","e2fee717":"code","4fe211b6":"code","32380b04":"code","45f83701":"code","fa87eeb9":"code","015c5d8d":"code","4a64dc63":"code","f105c6fe":"code","6a4b2ea1":"code","cb41d927":"code","fd8ee43c":"code","dd03bf19":"code","dfb61f0e":"markdown","e1c427a1":"markdown","35827ebf":"markdown","a439740f":"markdown","3c1c409a":"markdown","7db35a87":"markdown","5590b4a8":"markdown","7428ef26":"markdown","6f5f26b7":"markdown","2d998cc7":"markdown","4ff9b6d4":"markdown","997d7561":"markdown","d4c94149":"markdown","9b77b01f":"markdown","03fd0ef8":"markdown","f5d57c4d":"markdown","e86d2117":"markdown","729bcd82":"markdown","b2ff0320":"markdown","215305da":"markdown","8c2cf1c1":"markdown","c8f1b144":"markdown","fb2f7317":"markdown","25b058f6":"markdown","1c4542e7":"markdown","03e4e642":"markdown","aab06cdd":"markdown","3874c2d8":"markdown","369d5f1c":"markdown","dda74d86":"markdown","8a741770":"markdown","a91b86c2":"markdown","5ff33985":"markdown","429b6725":"markdown","de8703d1":"markdown","02adda90":"markdown","fbaf10ce":"markdown","3c1333c9":"markdown","ac8815a0":"markdown","aeb58fdd":"markdown","a757924a":"markdown","52895269":"markdown","aa52f989":"markdown","b12e76c5":"markdown","21d61ab6":"markdown","6af4fe0c":"markdown","b1c6a135":"markdown","7c4d7fed":"markdown","f37eb55a":"markdown","ab817629":"markdown","6d62149b":"markdown","81277e34":"markdown","f1bc5361":"markdown","4fa7e2d9":"markdown","bcdbdecd":"markdown","4e0a0625":"markdown","8f82b408":"markdown","d6bc71fb":"markdown","81dd872e":"markdown","e3dfad71":"markdown","5f45985a":"markdown","e5f0abe8":"markdown","dbd687ff":"markdown","6f1e5fe7":"markdown","214bb1dd":"markdown","74160871":"markdown","94886525":"markdown","28d727c0":"markdown","17e733de":"markdown"},"source":{"34e8d5b4":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# from pylab import rcParams\n# rcParams['figure.figsize'] = (25,10)","8d37bf2f":"df_suicide=pd.read_csv('..\/input\/suicide-rates-overview-1985-to-2016\/master.csv')\ndf_suicide.head()","876e87f4":"# dataset resource : https:\/\/www.kaggle.com\/andradaolteanu\/country-mapping-iso-continent-region\n\ndf_continent=pd.read_csv('..\/input\/continents\/continents2.csv')\ndf_continent","6a3e59f4":"def mismatch (series_1, series_2, only_out=True):\n    out_num = 0\n    for i in series_1.unique():\n        if i in series_2.unique():\n#         if any(series_2.unique() == i):  # alternative\n            if not only_out:\n                print(\"in :\",i)\n        else:\n            print(\"out :\",i)\n            out_num += 1\n    print(f\"{out_num} mismatch(es) between those dataframes\".upper())\n    \nmismatch(df_suicide.country, df_continent.name, True)","8d0736d9":"df_continent.loc[df_continent.name.str.contains(\"Bosnia\"),'name']='Bosnia and Herzegovina'\ndf_continent.loc[df_continent.name.str.contains(\"Maca\"),'name']='Macau'\ndf_continent.loc[df_continent.name.str.contains(\"Korea, Republic of\"),'name']='Republic of Korea'\ndf_continent.loc[df_continent.name.str.contains(\"Russia\"),'name']='Russian Federation'\ndf_continent.loc[df_continent.name.str.contains(\"Vincent\"),'name']='Saint Vincent and Grenadines'\nmismatch(df_suicide.country, df_continent.name, True)","d2eb7750":"df = df_suicide.merge(df_continent[['name','region','sub-region','alpha-3']], left_on='country', right_on='name')\ndf","67c73cdf":"df.describe()","61910c46":"def summary(df, pred=None):\n    obs = df.shape[0]\n    Types = df.dtypes\n    Counts = df.apply(lambda x: x.count())\n    Min = df.min()\n    Max = df.max()\n    Uniques = df.apply(lambda x: x.unique().shape[0])\n    Nulls = df.apply(lambda x: x.isnull().sum())\n    print('Data shape:', df.shape)\n\n    if pred is None:\n        cols = ['Types', 'Counts', 'Uniques', 'Nulls', 'Min', 'Max']\n        str = pd.concat([Types, Counts, Uniques, Nulls, Min, Max], axis = 1, sort=True)\n\n    str.columns = cols\n    print('___________________________\\nData Types:')\n    print(str.Types.value_counts())\n    print('___________________________')\n    display(str.sort_values(by='Nulls', ascending=False))\n\nsummary(df)","f62c77cf":"df[\" gdp_for_year ($) \"] = df[\" gdp_for_year ($) \"].apply(lambda x: int(x.replace(',','')))","4788cacc":"df.columns","2922a82c":"df = df.rename(columns={'suicides\/100k pop':'suicides_100k',\n                       'country-year':'country_year',\n                       'HDI for year':'hdi_for_year',\n                       ' gdp_for_year ($) ':'gdp_for_year',\n                       'gdp_per_capita ($)':'gdp_per_capita',\n                       'sub-region':'sub_region',\n                       'alpha-3':'alpha_3'})\ndf.columns","a521b858":"print('Unique Values of Features:\\n')\nfor i in ['country','region','sub_region','age','generation','sex','year']:\n    print(f'{i}:\\n{sorted(df[i].unique())}\\n')","e42f87fe":"df.age = df.age.replace({'5-14 years':'05-14 years'})","d4d38a67":"def null_values(df):\n    \"\"\"a function to show null values with percentage\"\"\"\n    nv=pd.concat([df.isnull().sum(), 100 * df.isnull().sum()\/df.shape[0]],axis=1).rename(columns={0:'Missing_Records', 1:'Percentage (%)'})\n    return nv[nv.Missing_Records>0].sort_values('Missing_Records', ascending=False)","86c8e020":"# check number of null values and visualize it \nplt.figure(figsize=(15,3))\nsns.heatmap(df.isnull(),yticklabels=False,cbar=False,cmap='viridis')\nnull_values(df)","7e024b20":"df.drop('hdi_for_year',axis=1,inplace=True)\ndf.isnull().any().sum()","6307a0a0":"df[['country','year','country_year','name']]","a6356246":"df.drop(['country_year','name'],axis=1,inplace=True)","50ba73fd":"df_USA = pd.pivot_table(df[df.country=='United States'],values= ['suicides_no','population'], \n               index=['year'], aggfunc='sum').reset_index()\ndf_USA['suicides_100k']=df_USA['suicides_no']\/df_USA['population']*100000\ndf_USA['gdp_for_year']=df[df.country=='United States'].groupby('year').gdp_for_year.mean().values\ndf_USA['gdp_for_capita'] = df_USA['gdp_for_year'] \/ df_USA['population']\n# df_USA","760e5062":"plt.subplots(figsize=(8,6))\nsns.heatmap(df_USA.corr(), annot = True);","43579c27":"sns.pairplot(df_USA, corner=True);","1c1c2829":"df_USA =df_USA.set_index('year')\n\nfig, ax = plt.subplots(figsize=(12,6))\ndf_USA['population'].plot(ax=ax,color='b',label='Population',kind='line')\nplt.legend(bbox_to_anchor=(0.0, 0.90), loc=2, borderaxespad=0.)\n\nax2 = ax.twinx()\ndf_USA.gdp_for_capita.plot(ax=ax2,color='r',label='gdp_for_capita', marker='o')\nplt.legend(bbox_to_anchor=(0.0, 0.80), loc=2, borderaxespad=0.)\nax.grid()","94062aa8":"fig, ax = plt.subplots(figsize=(12,6))\ndf_USA['suicides_100k'].plot(ax=ax,color='b',label='suicides_100k',kind='line')\nplt.legend(bbox_to_anchor=(0.0, 0.90), loc=2, borderaxespad=0.)\n\nax2 = ax.twinx()\ndf_USA.gdp_for_capita.plot(ax=ax2,color='r',label='gdp_for_capita', marker='o')\nplt.legend(bbox_to_anchor=(0.0, 0.80), loc=2, borderaxespad=0.)\nax.grid()","7bc4c2ed":"df_all_world = pd.pivot_table(df,values= ['suicides_no','population'], \n               index=['year'], aggfunc='sum').reset_index()\ndf_all_world['suicides_100k']=df_all_world['suicides_no']\/df_all_world['population']*100000\ndf_all_world['gdp_for_year']=df.groupby('year').gdp_for_year.mean().values\ndf_all_world['gdp_for_capita'] = df_all_world['gdp_for_year'] \/ df_all_world['population']\n# df_all_world","569cdf2c":"plt.subplots(figsize=(8,6))\nsns.heatmap(df_all_world[df_all_world.year!=2016].corr(), annot = True);","f1369af9":"sns.pairplot(df_all_world,corner=True);","bf1eedd2":"df_all_world =df_all_world[df_all_world.year!=2016].set_index('year')\n\nfig, ax = plt.subplots(figsize=(12,6))\ndf_all_world['population'].plot(ax=ax,color='b',label='Population',kind='line')\nplt.legend(bbox_to_anchor=(0.0, 0.90), loc=2, borderaxespad=0.)\n\nax2 = ax.twinx()\ndf_all_world.gdp_for_capita.plot(ax=ax2,color='r',label='gdp_for_capita', marker='o')\nplt.legend(bbox_to_anchor=(0.0, 0.80), loc=2, borderaxespad=0.)\nax.grid()","76193e76":"fig, ax = plt.subplots(figsize=(12,6))\ndf_all_world['suicides_100k'].plot(ax=ax,color='b',label='suicides_100k',kind='line')\nplt.legend(bbox_to_anchor=(0.0, 0.90), loc=2, borderaxespad=0.)\n\nax2 = ax.twinx()\ndf_all_world.gdp_for_capita.plot(ax=ax2,color='r',label='gdp_for_capita', marker='o')\nplt.legend(bbox_to_anchor=(0.0, 0.80), loc=2, borderaxespad=0.)\nax.grid()","59c08f17":"def func(pct, allvals):\n    absolute = int(round(pct\/100.*np.sum(allvals)))\n    return \"{:.1f}%\\n( {:.2f}M )\".format(pct,round(absolute\/1000000,2))\n\nsuicide_counts_by_sex = df.groupby('sex').suicides_no.sum()\n\nfig, ax = plt.subplots(figsize=(7,7))\nax.pie(x = suicide_counts_by_sex.values[::-1], \n        labels=suicide_counts_by_sex.index[::-1], \n       explode=(0, 0.1),\n       autopct=lambda pct: func(pct, suicide_counts_by_sex.values[::-1]),\n       startangle=90)\nax.set_title(\"Suicide Counts by Gender\");\nplt.show()","bfe0988c":"plt.subplots(figsize=(15,6))\ndf.groupby('region').suicides_100k.mean().sort_values(ascending=False).plot.bar(rot=0)\nplt.title(\"Suicide Rates by Regions\");","37f98e9b":"def labels(ax, df=df):\n    for p in ax.patches:\n            ax.annotate('{:.1f}'.format(p.get_height()), \n                        (p.get_x()+0.12, p.get_height()+0.3), size=8)\n\nplt.subplots(figsize=(15,6))\ndf_reg = pd.DataFrame(df.groupby(['region','sex']).suicides_100k.mean().sort_values(ascending=False)).reset_index()\nax = sns.barplot(x='region',y='suicides_100k',data=df_reg, hue='sex')\nplt.title(\"Suicide Rates by Regions & Gender\")\nlabels(ax,df_reg)","686b7f56":"plt.subplots(figsize=(15,6))\ndf.groupby('sub_region').suicides_100k.mean().sort_values(ascending=False).plot.bar(rot=90)\nplt.title(\"Suicide Rates by Sub-Regions\");","6db54d5e":"def labels(ax, df=df):\n    for p in ax.patches:\n            ax.annotate('{:.1f}'.format(p.get_height()), \n                        (p.get_x()+0.12, p.get_height()+0.3), size=8)\n\nfig,ax = plt.subplots(figsize=(20,6))\ndf_subreg = pd.DataFrame(df.groupby(['sub_region','sex']).suicides_100k.mean().sort_values(ascending=False)).reset_index()\nax = sns.barplot(x='sub_region',y='suicides_100k',data=df_subreg, hue='sex')\nax.set_title(\"Suicide Rates by Sub Regions & Gender\")\nax.set_xticklabels(df_subreg.sub_region.unique(),rotation=90)\nlabels(ax,df_subreg)","c71fb612":"df_cavg = pd.pivot_table(df,values= ['suicides_100k'], \n               index=['country' ]).sort_values(by=['suicides_100k'],ascending=False)\n\n\nfig, ax = plt.subplots(figsize=(25,10))\nsns.barplot(x=df_cavg.index, y='suicides_100k', data=df_cavg)\nax.set_title(\"Average Suicide Rates by Country from 1985 to 2016\")\nax.axhline(y=df_cavg.mean()[0], color=\"blue\", ls=\"--\",label=f'avg_suicide_rate_by_country:{round(df_cavg.mean()[0],2)}')\nax.set_xticklabels(df_cavg.index, rotation=90)\nax.legend();","284ae9f5":"df_cys = pd.pivot_table(df,values= ['suicides_no'], \n               index=['country', 'year', ], aggfunc='sum').reset_index()\n\n\nfig, ax = plt.subplots(figsize=(25,12))\nsns.barplot(y='country', x='suicides_no', data=df_cys[df_cys.year==2015].sort_values(by='suicides_no', ascending=False))\nax.set_title(\"Suicide Counts by Country in 2015\")\nax.axvline(x=df_cys.mean()[0], color=\"blue\", ls=\"--\",label=f'avg_suicide_rate_by_country:{round(df_cys.mean()[0],2)}')\nax.legend();","cca662b7":"df_cysr = pd.pivot_table(df,values= ['suicides_100k'], \n               index=['country', 'year', ], aggfunc='mean').reset_index()\n\n\nfig, ax = plt.subplots(figsize=(25,12))\nsns.barplot(y='country', x='suicides_100k', data=df_cysr[df_cysr.year==2015].sort_values(by='suicides_100k', ascending=False))\nax.set_title(\"Suicide Rates by Country in 2015\")\nax.axvline(x=df_cysr.suicides_100k.mean(), color=\"blue\", ls=\"--\",label=f'avg_suicide_rate_by_country:{round(df_cysr.suicides_100k.mean(),2)}')\nax.legend();\nplt.show()","311a3b97":"df_gs = pd.pivot_table(df,values= ['suicides_100k'], \n               index=['generation', 'sex', ])\n\n\ndef labels(ax, df=df):\n    for p in ax.patches:\n            ax.annotate('{:.1f}'.format(p.get_height()), \n                        (p.get_x()+0.12, p.get_height()+0.3), size=8)\n\n\nfig, ax = plt.subplots(figsize=(15,6))\nax = sns.barplot(x='generation', y='suicides_100k',hue='sex',\n                 data=df_gs.sort_values(by=['suicides_100k'], ascending=False).reset_index())\nlabels(ax,df_gs.suicides_100k)","ae98be5c":"df_g = pd.pivot_table(df,values= ['suicides_100k'], index=['generation' ],aggfunc='mean')\ndf_s = pd.pivot_table(df,values= ['suicides_no'], index=['generation' ],aggfunc='sum')\ndf_s = df_s.merge(df_g,on='generation').sort_values(by=['suicides_no'],ascending=False)\n\ndef label(ax, df=df):\n    for p in ax.patches:\n            ax.annotate('{:.1f}'.format(p.get_height()), \n                        (p.get_x()+0.25, p.get_height()+0.2),size=10)\n\nfig,ax=plt.subplots(1,2,figsize=(18,8))\ndf_s['suicides_no'].plot.pie(explode=[0.1,0.1,0.1,0.1,0.1,0.1],labels= df_s.index,ax=ax[0],shadow=True,\n                            autopct=lambda pct: func(pct, df_s['suicides_no']))\n# Alternative\n# ax[0].pie(x = df_s['suicides_no'], \n#         labels = df_s.index, \n#        explode=[0.1,0.1,0.1,0.1,0.1,0.1],\n#        autopct=lambda pct: func(pct, df_s['suicides_no']),\n#        startangle=160)\n\nax[0].set_title('Generations Count')\nax[0].set_ylabel('')\n\nsns.barplot(x=df_s.sort_values(by=['suicides_100k'],ascending=False).index,y='suicides_100k',\n            data=df_s.sort_values(by=['suicides_100k'],ascending=False), ax=ax[1]);\nax[1].set_title('suicides_100k rates by Generations')\nlabel(ax[1])\nplt.show()","6a540324":"fig,ax=plt.subplots(figsize=(15,5))\ndf.groupby('age').suicides_100k.mean().sort_values(ascending=False).plot.bar(rot=0, ax=ax)\nax.set_title(\"Suicide Rates by Age Group\")\nlabel(ax)","8c20cbd0":"df_as = pd.pivot_table(df,values= ['suicides_100k'], \n               index=['age', 'sex', ])\n\n\nfig, ax = plt.subplots(figsize=(15,6))\nax = sns.barplot(x='age', y='suicides_100k',hue='sex',\n                 data=df_as.sort_values(by=['suicides_100k'], ascending=False).reset_index())\nlabels(ax,df_gs.suicides_100k)","481997cb":"df_a = pd.pivot_table(df,values= ['suicides_100k'], index=['age' ])\ndf_sa = pd.pivot_table(df,values= ['suicides_no'], index=['age' ],aggfunc='sum')\ndf_sa = pd.concat([df_a, df_sa], axis=1).sort_values(by=['suicides_no'],ascending=False)\ndf_sa","fcc97a66":"fig,ax=plt.subplots(1,2,figsize=(18,8))\ndf_sa['suicides_no'].plot.pie(explode=[0.1,0.1,0.1,0.1,0.1,0.1],labels= df_sa.index,ax=ax[0],shadow=True,\n                              autopct=lambda pct: func(pct, df_s['suicides_no']))\nax[0].set_title('Age Group Count')\nax[0].set_ylabel('')\n\nsns.barplot(x=df_sa.sort_values(by=['suicides_100k'],ascending=False).index,y='suicides_100k',data=df_sa.sort_values(by=['suicides_100k'],ascending=False), ax=ax[1]);\nax[1].set_title('suicides_100k rates by Age Group')\nlabel(ax[1])\nplt.show()","c0ecd364":"avg_suicide_rate_by_year= df.groupby('year').suicides_no.sum() \/ df.groupby('year').population.sum()*100000\n\nfig, ax = plt.subplots(figsize=(15,5))\ndf.groupby('year').suicides_100k.mean().plot.bar(ax=ax)\nax.set_title(\"Suicide Rates by Years\")\nax.axhline(y=avg_suicide_rate_by_year.mean(), color=\"red\", ls=\"--\",\n           label=f'avg_suicide_rate_by_year:{round(avg_suicide_rate_by_year.mean(),2)}')\nax.legend();","39e0a022":"df1 = df.groupby(['year','sex']).suicides_100k.mean()\ndf1 = pd.DataFrame(df1).reset_index()\n\nsns.lmplot(x=\"year\", y=\"suicides_100k\", hue=\"sex\",\n               truncate=True, height=5, aspect=2, data=df1, ci=None);","1bf30ff5":"df2 = pd.pivot_table(df,values= ['suicides_100k','population','gdp_per_capita'], \n                     index=['country','sex','age','year' ]).sort_index(level=[2],ascending=False)\n\n\nplt.figure(figsize=(20,5))\nsns.lineplot(x=\"year\", y=\"suicides_100k\",hue=\"sex\",data=df2);","a04224f2":"plt.figure(figsize=(15,5))\nsns.kdeplot(x='suicides_100k',data=df2.reset_index(), hue='sex', shade=True)\nplt.xlim([-10,50]);","592d0257":"df_ss = pd.pivot_table(df,values= ['suicides_no'], \n                     index=['sex','year'], aggfunc='sum').reset_index()\nfig, ax = plt.subplots(figsize=(20,5))\nfor i in ['male','female']:\n    ax = df_ss[df_ss.sex==i].groupby('year').suicides_no.sum().plot(kind='line',label=i)\nax.legend(loc='upper right', borderaxespad=0.5)\nax.set_ylabel('suicides_no')\nax.set_title('Suicide Count by Age Group in Years')\nplt.show()","67ae2156":"df_gp = pd.pivot_table(df,values= ['population','gdp_per_capita'], \n                     index=['country'], aggfunc='max').sort_values(by=['gdp_per_capita'],ascending=False)\n\n\nfig, ax = plt.subplots(figsize=(25,8))\ndf_gp.gdp_per_capita.plot.bar(ax=ax)\nax.set_title(\"GDP per Capita by Country in Descending Order\")\nax.axhline(y=df_gp.gdp_per_capita.mean(), color=\"red\", ls=\"--\",\n           label=f'avg_gdp_per_capita:{round(df_gp.gdp_per_capita.mean(),2)}')\nax.set_ylabel('GDP')\nax.legend();","e2fee717":"df_yc = pd.pivot_table(df,values= ['suicides_100k','gdp_per_capita'], \n                     index=['country','year']).reset_index()\n\ndf_yc['gdp_per_capita_max']=df_yc.groupby('country').gdp_per_capita.transform(max)\ncountry_order_gdp = df_yc[['country','gdp_per_capita_max']].drop_duplicates().sort_values(by=['gdp_per_capita_max'],ascending=False)['country'].values\n# country_order_gdp","4fe211b6":"fig, ax = plt.subplots(figsize=(20,12))\nfor i in country_order_gdp[:5]:\n    ax = df_yc[df_yc.country==i].groupby('year').suicides_100k.mean().plot(kind='line',label=i)\nax.legend(loc='upper right', borderaxespad=0.5)\nax.set_title('Suicide Rate in Top 5 countries by GDP in Years')\nax.set_ylabel('suicides_100k')\nplt.show()","32380b04":"df_sayg = pd.pivot_table(df,values= ['suicides_100k','gdp_per_capita'], \n                     index=['sex','age','year','generation']).reset_index()\n\n\nfig, ax = plt.subplots(figsize=(20,8))\nfor i in ['G.I. Generation', 'Silent','Boomers','Generation X', 'Millenials','Generation Z']:\n    ax = df_sayg[df_sayg.generation==i].groupby('year').suicides_100k.mean().plot(kind='line',label=i)\nax.legend(loc='upper right', borderaxespad=0.5)\nax.set_ylabel('suicides_100k')\nax.set_title('Suicide Rate by Generations in Years')\nplt.show()","45f83701":"df_sayg = pd.pivot_table(df,values= ['suicides_100k'], \n                     index=['sex','age','year','generation']).sort_index(level=3, ascending=False).reset_index()\n\nfig, ax = plt.subplots(figsize=(20,15))\nfig.suptitle(\"Suicide Rate for Generations by Gender in Years\", fontsize=20).set_y(0.9)\nfig.subplots_adjust(top=0.85)\nfor i,v in enumerate(['G.I. Generation', 'Silent','Boomers','Generation X', 'Millenials','Generation Z']):\n    plt.subplot(3,2,i+1)\n    sns.lineplot(x='year', y='suicides_100k', hue='sex',data=df_sayg[df_sayg.generation==v], ci=None)\n    plt.title(v)\nplt.show()","fa87eeb9":"fig, ax = plt.subplots(figsize=(20,8))\nfor i in ['75+ years', '55-74 years','35-54 years','25-34 years','15-24 years', '05-14 years']:\n    ax = df_sayg[df_sayg.age==i].groupby('year').suicides_100k.mean().plot(kind='line',label=i)\nax.legend(loc='upper right', borderaxespad=0.5)\nax.set_ylabel('suicides_100k')\nax.set_title('Suicide Rate by Age Group in Years')\nplt.show()","015c5d8d":"df_sayg_no = pd.pivot_table(df,values= ['suicides_no'], \n                     index=['sex','age','year','generation'], aggfunc='sum').sort_index(level=3, ascending=False).reset_index()\n\n\nfig, ax = plt.subplots(figsize=(20,8))\nfor i in ['75+ years', '55-74 years','35-54 years','25-34 years','15-24 years', '05-14 years']:\n    ax = df_sayg_no[df_sayg_no.age==i].groupby('year').suicides_no.mean().plot(kind='line',label=i)\nax.legend(loc='upper right', borderaxespad=0.5)\nax.set_ylabel('suicides_no')\nax.set_title('Suicide Count by Age Group in Years')\nplt.show()","4a64dc63":"fig, ax = plt.subplots(figsize=(20,15))\nfig.suptitle(\"Suicide Count by Age Group and Gender in Years\", fontsize=20).set_y(0.9)\nfig.subplots_adjust(top=0.85)\nfor i,v in enumerate(['75+ years', '55-74 years','35-54 years','25-34 years','15-24 years', '05-14 years']):\n    plt.subplot(3,2,i+1)\n    sns.lineplot(x='year', y='suicides_no', hue='sex',data=df_sayg_no[df_sayg_no.age==v])\n    plt.title(v)\nplt.show()","f105c6fe":"df_cy = pd.pivot_table(df,values= ['population','gdp_per_capita', 'suicides_100k'], \n                     index=['country','year']).reset_index()\n\n\ng8 = ['Canada','France','Germany','Italy','Japan','United Kingdom','United States','Russian Federation']\n\nfig, ax = plt.subplots(figsize=(20,8))\nfor i in g8:\n    ax = df_cy[df_cy.country==i].groupby('year').gdp_per_capita.mean().plot(kind='line',label=i)\nax.legend(loc='upper left', borderaxespad=0.5)\nax.set_ylabel('suicides_100k')\nax.set_title('GDP per Capita of G8 Countries in Years')\nplt.show()","6a4b2ea1":"fig, ax = plt.subplots(figsize=(20,8))\nfor i in g8:\n    ax = df_cy[df_cy.country==i].groupby('year').suicides_100k.mean().plot(kind='line',label=i)\nax.legend(loc='upper left', borderaxespad=0.5)\nax.set_ylabel('suicides_100k')\nax.set_title('Suicide Rates of G8 Countries in Years')\nplt.show()","cb41d927":"df_cpgs = pd.pivot_table(df,values= ['population','gdp_per_capita', 'gdp_for_year','suicides_100k'], \n                     index=['region','country'],aggfunc='max').reset_index()\n\nfor j in df_cpgs.region.unique():\n    plt.figure(figsize=(25,7))\n    plt.suptitle(j, fontsize=20)\n    for i,v in enumerate(df_cpgs.columns[2:]):  \n        plt.subplot(1,4,i+1)\n        sns.boxplot(y =v, data=df_cpgs[df_cpgs.region==j])\n    plt.tight_layout\n    plt.show()\n","fd8ee43c":"# list_countries=df.country.unique()\n\n# import pycountry\n# d_country_code = {}  # To hold the country names and their ISO\n# for country in list_countries:\n#     try:\n#         country_data = pycountry.countries.search_fuzzy(country)\n#         # country_data is a list of objects of class pycountry.db.Country\n#         # The first item  ie at index 0 of list is best fit\n#         # object of class Country have an alpha_3 attribute\n#         country_code = country_data[0].alpha_3\n#         d_country_code.update({country: country_code})\n#     except:\n#         print('could not add ISO 3 code for ->', country)\n#         # If could not find country, make ISO code ' '\n#         d_country_code.update({country: ' '})","dd03bf19":"df_map = pd.pivot_table(df,values= ['suicides_100k'], \n                     index=['region','country','alpha_3'],aggfunc='mean').reset_index()\n\nimport plotly.express as px\n\nfig = px.choropleth(data_frame = df_map,\n                    locations= \"alpha_3\",\n                    color= \"suicides_100k\",\n                    hover_name= \"country\",\n                    color_continuous_scale= 'thermal',\n                   )\n\nfig.show()","dfb61f0e":"Suicide rate increases with age","e1c427a1":"- The pie chart shows the distribution of the total number of suicides between 1985 and 2016 by age group. The generation aged 35-54 with the highest number of suicides\n- The bar graph shows the suicide rate among the age groups between 1985 and 2016. Here, over 75 years old has the 'highest suicide rate'. When we multiply the suicide numbers on the pie chart into their populations, we get the suicide rates on the bar graph.","35827ebf":"**Features Correlation of USA**","a439740f":"While the standard deviation is low in female suicide data, it is higher in males.","3c1c409a":"As the population has increased in the USA over the years, the national income per capita has also increased.","7db35a87":"**Suicide Rate by Age Group in Years**","5590b4a8":"When sorted, let's change '5-14 years' to '05-14 years' so that it can sort in the correct hierarchy","7428ef26":"**Suicide Counts by Country in 2015**","6f5f26b7":"It is observed that the suicide rates of G8 countries also tend to decrease over the years. Suicide rates in Russia seem to have increased dramatically after the collapse of the Soviet Union.","2d998cc7":"According to 2015 data, the Republic of Korea and Lithuania are by far the countries with the highest suicide rates in the world.","4ff9b6d4":"While we find that men are more suicidal in male-female suicide, this difference is relatively small in Asia.","997d7561":"## General Analysis of Suicide Rates\nhttps:\/\/www.kaggle.com\/russellyates88\/suicide-rates-overview-1985-to-2016\n\n- **country**:\ncountry of suicide\n- **year**:\nyear of suicide\n- **sex**:\ngender\n- **age**:\nage range of the person who committed suicide\n- **suicides_no**: \nthe raw number of reported suicides\n- **population**:\ncountry population\n- **suicides_100k**:\nsuicides_no * 100k \/ population\n- **gdp_for_year**:\ntotal monetary or market value of all final goods and services produced in a country in a given year\n- **gdp_per_capita**:\nthe ratio of real GDP to the average population of a specific year\n- **generation**:\n![image-3.png](attachment:image-3.png)","d4c94149":"While suicide rates of age groups peaked in 1995, they generally continued to decline in the following years.","9b77b01f":"Since the 2016 data are missing, the 2015 data with full data was focused on. Considering the total number of suicides, the highest number of suicides occurred in the USA-Russia-Japan order. However, this can be misleading. Because these countries are countries with large populations, we cannot say, for example, that USA is the country with the highest suicidal tendency. We have to look at the suicide rate in 100,000.","03fd0ef8":"### Data Visualization in Detail","f5d57c4d":"- As there are only 4 countries from Africa in the dataset (insufficient number of samples), the current dataset does not provide insight into the entire African continent","e86d2117":"**Suicide Count by Age Group in Years**","729bcd82":"**Suicide Rates by Age Group**","b2ff0320":"**Suicide Count by Age Group and Gender in Years**","215305da":"**Suicide Counts by Gender**","8c2cf1c1":"**Suicide Rate in Top 5 countries by GDP in Years**","c8f1b144":"When we look at the suicide numbers of the age groups, the highest rate of suicide is between the ages of 35-54, but the rate is lower because the population of this group is high. Since the data for 2016 is incomplete, that year should not be taken into account.","fb2f7317":"**Average Suicide Rates by Country from 1985 to 2016**","25b058f6":"European society more prone to suicide","1c4542e7":"Let's drop features that hold duplicate information","03e4e642":"Over the years, suicide rates tended to increase for men up to 1995 and then tended to fall, while for women they tended to decline in general.","aab06cdd":"Looking at the average suicide rates for the years 1985-2016 by country, Lithuania is the country with the highest suicide rate.","3874c2d8":"**Suicide Rate by Generations in Years**","369d5f1c":"The total number of women who commit suicide is about 1\/3 of the men who commit suicide","dda74d86":"![image.png](attachment:image.png)","8a741770":"**Check unique values**","a91b86c2":"**Suicide Rates by Country in 2015**","5ff33985":"We merge two datasets over the country names column.","429b6725":"- Since 2016 data is too incomplete, it is not included in the image as it may provide incorrect insight.\n- While the world's per capita income was fluctuating until the beginning of the 2000s, it tended to increase after this date, except for the 2007 financial crisis.\n- Although the population always tends to increase according to the graph, there has been a tendency to decrease after 2010. It should be taken into account that this may be due to the lack of dataset.","de8703d1":"### Dropping Unnecessary Variables","02adda90":"Let's check Missing Values. If the missing value is small, let's make 'filling' and if it is a large number, 'dropping'","fbaf10ce":"### Find Mismatches","3c1333c9":"Before merging the two datasets, we need to detect and fix any mismatches in the country names. Let's write a function for this.","ac8815a0":"**Suicide Rates by Regions**","aeb58fdd":"**Distribution of GDP, Population & Suicide Rate by Region**","a757924a":"If we add the regions and continents of the countries to our dataset, we will have a more detailed analysis opportunity. For this reason, we will use an auxiliary dataset from kaggle that contains country continent information.","52895269":"**Rename Columns**","aa52f989":"**suicides_100k rates by Generations**","b12e76c5":"**Features Correlation of All**","21d61ab6":"**Suicide Counts by Years**","6af4fe0c":"Since there is missing data in 2016, after 2015 should not be taken into account in this chart.","b1c6a135":"Looking at the previous chart in gender detail, it is seen that there are female suicide rates in East Asia that are above the world average.","7c4d7fed":"Let's edit the features names","f37eb55a":"Let's do Descriptive Analysis","ab817629":"**Suicidal Intensity Map by Suicides Rates in 100k**\n- pip install pycountry --user\n- pip install plotly-express --user\n- pip install plotly --user\n- pip install pyclustertend --user","6d62149b":"While `G.I. Generation` born between 1910 and 1924 has the highest suicide rate, this rate gradually decreases in later generations.","81277e34":"The countries with the highest per capita income are Luxembourg, Norway and Qatar, respectively.","f1bc5361":"**GDP per Capita by Country in Descending Order**","4fa7e2d9":"While the gap in the suicide rates of generations on a male-female basis generally tends to increase over the years, there is a tendency to decrease dramatically in generation Z since 2013.","bcdbdecd":"The gap between male and female suicides in 5-14 year-old suicides has tended to decrease since the 2000s.","4e0a0625":"- Since 2016 data is too incomplete, it is not included in the image as it may provide incorrect insight.\n- While suicide rates tended to increase all over the world until 1995, they tended to decrease sharply after 1995.\n- While the world's per capita income was fluctuating until the beginning of the 2000s, it tended to increase after this date, except for the 2007 financial crisis.\n","8f82b408":"On a Sub-Region basis, East Asia has higher suicide rates than Europe, as it has the highest suicide rate in the world.","d6bc71fb":"**Suicide Rates of G8 Countries in Years**","81dd872e":"While the suicide rate in the USA had a high negative correlation with national income until 2000, it had a high positive correlation after 2000. The year 2000 has been the breaking point.","e3dfad71":"### Handling Missing Values","5f45985a":"- The pie chart shows the generational distribution of the total number of suicides between 1985 and 2016. Boomers (born 1946-1964) are the generation with the highest number of suicides\n- The bar graph shows the suicide rate among the generations between 1985 and 2016. Here G.I. Generation(born between 1910-1924) has the highest suicide rate. When we multiply the suicide numbers on the pie chart into their populations, we get the suicide rates on the bar graph.","e5f0abe8":"Let's visualize the Suicide Rate by Generation over the Years in gender detail","dbd687ff":"**Suicide Rates by Sub-Regions**","6f1e5fe7":"**GDP per Capita of G8 Countries in Years**","214bb1dd":"You can see that the suicide rates of the 5 countries with the highest GDP change over time, with the exception of Qatar, the overall suicide rate tends to decrease.","74160871":"![newplot%20%283%29.png](attachment:newplot%20%283%29.png)","94886525":"We see the change in the GDPs of the G8 countries over the years, although there was a decrease in the GDP in the 2001 and 2007 crises, the GDPs tend to increase in general.","28d727c0":"**Suicide Rates by Years**","17e733de":"Let's check if there are any anomalies by checking the Unique values of the features."}}