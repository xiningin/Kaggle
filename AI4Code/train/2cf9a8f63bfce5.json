{"cell_type":{"a2d0de82":"code","f015fb4e":"code","30df186e":"code","4c21bd5f":"code","202deb37":"code","13fa03da":"code","5e39ae83":"code","f975497c":"code","0585e394":"code","6c642b02":"code","cb09a7e5":"code","4e854c6f":"code","d206661a":"code","75e1eb45":"code","2a97bad8":"code","6e717896":"code","455f8c1c":"code","a3354031":"code","ff48b29a":"code","959f980a":"code","3ecabeb9":"code","5d01f155":"code","7d8c0513":"code","1c2e4b1c":"code","9b040aa7":"code","ff23e074":"code","fa824ecb":"code","cdee3ed2":"code","f930c045":"code","060d0f16":"code","895f3364":"markdown","59121e46":"markdown","5cf29c50":"markdown","7c7f9bea":"markdown","0553bcc5":"markdown","f66b4575":"markdown","f0db95f1":"markdown","19f53627":"markdown","73986dea":"markdown","f8569e2c":"markdown","66319e8f":"markdown","ddbd7d73":"markdown","ee7185c0":"markdown","188baeb7":"markdown","54339df0":"markdown","50be9a52":"markdown","044223e8":"markdown","994017c5":"markdown","97c9290a":"markdown","ff824f13":"markdown","255bb93c":"markdown"},"source":{"a2d0de82":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport tensorflow as tf\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nimport io\nfrom tensorflow.keras.preprocessing.text import Tokenizer\nfrom tensorflow.keras.preprocessing.sequence import pad_sequences\nfrom textblob import TextBlob\nfrom nltk.util import ngrams\nfrom nltk.classify import NaiveBayesClassifier\nfrom nltk.corpus import subjectivity\nfrom nltk.sentiment import SentimentAnalyzer\nfrom nltk.sentiment.util import *\nfrom nltk.sentiment.vader import SentimentIntensityAnalyzer\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","f015fb4e":"Trump_dataset = pd.read_csv('\/kaggle\/input\/us-election-2020-tweets\/hashtag_donaldtrump.csv', lineterminator='\\n')\nBiden_dataset = pd.read_csv('..\/input\/us-election-2020-tweets\/hashtag_joebiden.csv',lineterminator='\\n')","30df186e":"Trump_dataset.head()","4c21bd5f":"Biden_dataset.head()","202deb37":"Trump_dataset = Trump_dataset.drop(columns = ['tweet_id','collected_at','user_description','collected_at'])\nBiden_dataset = Biden_dataset.drop(columns = ['tweet_id','collected_at','user_description','collected_at'])","13fa03da":"Trump_dataset.loc[:,'condidat'] = 'Trump'\nBiden_dataset.loc[:,'condidat'] = 'Biden'","5e39ae83":"Data_Mixed = pd.concat([Trump_dataset,Biden_dataset])\nData_Mixed.sort_values(by='created_at')\nData_Mixed.head()","f975497c":"Trump_tweets = Data_Mixed.query('(condidat == \"Trump\")').tweet.sort_values(ascending=False).count()\nBiden_tweets = Data_Mixed.query('(condidat == \"Biden\")').tweet.sort_values(ascending=False).count()\n\nobjects = ('Donald Trump','Joe Biden')\ny_pos = np.arange(len(objects))\nperformance = [Trump_tweets,Biden_tweets]\n\nplt.bar(y_pos, performance, align='center', alpha=0.5)\nplt.xticks(y_pos, objects)\nplt.ylabel('Number of tweets')\nplt.title('Donald vs Biden')\n\nplt.show()","0585e394":"Trump_tweets = Data_Mixed.query('(condidat == \"Trump\")').likes.count()\nBiden_tweets = Data_Mixed.query('(condidat == \"Biden\")').likes.count()\n\nobjects = ('Donald Trump','Joe Biden')\ny_pos = np.arange(len(objects))\nperformance = [Trump_tweets,Biden_tweets]\n\nplt.bar(y_pos, performance, align='center', alpha = 0.5)\nplt.xticks(y_pos, objects)\nplt.ylabel('Number of Likes')\nplt.title('Donald vs Biden')\n\nplt.show()","6c642b02":"def Country_tweets(country,kind):\n    Data=Data_Mixed[Data_Mixed.country == country].groupby('condidat').tweet.count()\n    Data.plot(x = 'condidate',y = \"tweet\",kind = kind, title=\"tweets count in country \" + str(country))\n    \nCountry_tweets('India','pie')","cb09a7e5":"Country_tweets('Brazil','bar')","4e854c6f":"Country_tweets('France','bar')","d206661a":"class Chart_builder:\n    \n    def __init__(self,topic_index,number):\n        super().__init__()\n        self.topic_index = topic_index\n        self.topics_list = ['source','country','state','continent','city']\n        self.number      = number\n        self.index = self.topics_list[self.topic_index]\n        self.Trump_tweets_sources_x = Data_Mixed.query('(condidat == \"Trump\")').groupby(by = self.index).count().tweet.sort_values(ascending = False)[:self.number].index\n        \n        self.Trump_tweets_sources_y = Data_Mixed.query('(condidat == \"Trump\")').groupby(by = self.index).count().tweet.sort_values(ascending = False)[:self.number]\n        \n        self.Biden_tweets_sources_x = Data_Mixed.query('(condidat == \"Biden\")').groupby(by = self.index).count().tweet.sort_values(ascending = False)[:self.number].index\n        \n        self.Biden_tweets_sources_y = Data_Mixed.query('(condidat == \"Biden\")').groupby(by = self.index).count().tweet.sort_values(ascending = False)[:self.number]\n    \n    def Builder(self):\n        fig = go.Figure([go.Bar(x = self.Trump_tweets_sources_x, y = self.Trump_tweets_sources_y, name = 'Trump'),\n                         go.Bar(x = self.Biden_tweets_sources_x, y = self.Biden_tweets_sources_y, name = 'Biden')])\n        # Customize aspect\n        fig.update_layout(title_text = 'top '+ str(self.number) + ' ' + self.index)\n        fig.update_xaxes(title = 'sources')\n        fig.update_yaxes(title = 'tweets count')\n        fig.show()","75e1eb45":"# choose index for topic\ntopic_index = 1 # from class list its country\n\n# number of elements in chart\nnumber = 5 # it;s mean top five\n\nlaunch = Chart_builder(topic_index,number)\nlaunch.Builder()","2a97bad8":"topic_index = 0\nnumber = 10 \nlaunch = Chart_builder(topic_index,number)\nlaunch.Builder()","6e717896":"topic_index = 2\nnumber = 10 \nlaunch = Chart_builder(topic_index,number)\nlaunch.Builder()","455f8c1c":"topic_index = 3\nnumber = 10 \nlaunch = Chart_builder(topic_index,number)\nlaunch.Builder()","a3354031":"topic_index = 4\nnumber = 10 \nlaunch = Chart_builder(topic_index,number)\nlaunch.Builder()","ff48b29a":"def clean(text):\n    '''Make text lowercase, remove text in square brackets,remove links,remove punctuation\n    and remove words containing numbers.'''\n    text = str(text).lower()\n    text = re.sub('\\[.*?\\]', '', text)\n    text = re.sub('https?:\/\/\\S+|www\\.\\S+', '', text)\n    text = re.sub('<.*?>+', '', text)\n    text = re.sub('\\n', '', text)\n    text = re.sub('\\w*\\d\\w*', '', text)\n    text=re.sub(r'@[A-Za-z0-9]+','',text)\n    text=re.sub(r'#','',text)\n    text=re.sub(r'RT[\\s]+','',text)\n    text=re.sub(r'[^\\w]', ' ', text)\n    return text","959f980a":"# create fuction to get the subjectivity and polarity\ndef getSubjectivity(text):\n    return TextBlob(text).sentiment.subjectivity\ndef getPolarity(text):\n    return TextBlob(text).sentiment.polarity\ndef getAnalysis(score):\n    if score < 0:\n        return 'negative'\n    elif score==0:\n        return 'neutral'\n    else:\n        return 'positive'","3ecabeb9":"Trump_Tweets = Data_Mixed.query('(condidat == \"Trump\")').sort_values('user_followers_count',ascending = False).drop_duplicates(['user_name'])[['tweet','country']]\nTrump_Tweets = Trump_Tweets.dropna().loc[Trump_Tweets.country == 'United States of America'][:1000]\n\nTrump_Tweets.reset_index(inplace = True, drop = True)\n\nTrump_Tweets['ClearTweet'] = Trump_Tweets['tweet'].apply(clean)\n\nTrump_Tweets['subjectivity']= Trump_Tweets['ClearTweet'].apply(getSubjectivity)\nTrump_Tweets['polarity']    = Trump_Tweets['ClearTweet'].apply(getPolarity)\nTrump_Tweets['analysis']    = Trump_Tweets['polarity'].apply(getAnalysis)\nTrump_Tweets.head()\n\n\nTrump_Tweets.head()","5d01f155":"%%time\nTrump_Tweets.polarity = Trump_Tweets.polarity.apply(lambda x: getAnalysis(x))","7d8c0513":"from collections import Counter\n\ntarget_cnt = Counter(Trump_Tweets.polarity)\n\nplt.figure(figsize=(16,8))\nplt.bar(target_cnt.keys(), target_cnt.values())\nplt.title(\"Dataset labels distribuition\")","1c2e4b1c":"general  = Trump_Tweets.groupby('analysis').analysis.count()\nneutral  = Trump_Tweets[Trump_Tweets['analysis'] == 'neutral'].ClearTweet.count()\npositive = Trump_Tweets[Trump_Tweets['analysis'] == 'positive'].ClearTweet.count()\nnegative = Trump_Tweets[Trump_Tweets['analysis'] == 'negative'].ClearTweet.count()\n\nfig = go.Figure(data = [go.Funnelarea(labels = [\"positivity\",\"negativity\",\"neutrality\"], values = [positive,negative,neutral])])\nfig.update_layout(title_text ='sentimat analysis tweets Donald Trump')\nfig.show()","9b040aa7":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\ndef word_cloud(wd_list):\n    stopwords = set(STOPWORDS)\n    all_words = ' '.join([text for text in wd_list])\n    wordcloud = WordCloud(\n        background_color='white',\n        stopwords=stopwords,\n        width=1600,\n        height=800,\n        random_state=1,\n        colormap='jet',\n        max_words=80,\n        max_font_size=200).generate(all_words)\n    plt.figure(figsize=(12, 10))\n    plt.axis('off')\n    plt.imshow(wordcloud, interpolation=\"bilinear\");\nword_cloud(Trump_dataset['tweet'][0:1000])","ff23e074":"Biden_Tweets = Data_Mixed.query('(condidat == \"Biden\")').sort_values('user_followers_count',ascending = False).drop_duplicates(['user_name'])[['tweet','country']]\nBiden_Tweets = Biden_Tweets.dropna().loc[Biden_Tweets.country == 'United States of America'][:1000]\n\n\nBiden_Tweets.reset_index(inplace = True, drop = True)\n\nBiden_Tweets['ClearTweet'] = Biden_Tweets['tweet'].apply(clean)\n\n \nBiden_Tweets['subjectivity']= Biden_Tweets['ClearTweet'].apply(getSubjectivity)\nBiden_Tweets['polarity']    = Biden_Tweets['ClearTweet'].apply(getPolarity)\nBiden_Tweets['analysis']    = Biden_Tweets['polarity'].apply(getAnalysis)\nBiden_Tweets.head()\n\n\nBiden_Tweets.head()","fa824ecb":"%%time\nBiden_Tweets.polarity = Biden_Tweets.polarity.apply(lambda x: getAnalysis(x))","cdee3ed2":"target_cnt = Counter(Biden_Tweets.polarity)\n\nplt.figure(figsize=(16,8))\nplt.bar(target_cnt.keys(), target_cnt.values())\nplt.title(\"Dataset labels distribuition\")","f930c045":"general  = Biden_Tweets.groupby('analysis').analysis.count()\nneutral  = Biden_Tweets[Biden_Tweets['analysis'] == 'neutral'].ClearTweet.count()\npositive = Biden_Tweets[Biden_Tweets['analysis'] == 'positive'].ClearTweet.count()\nnegative = Biden_Tweets[Biden_Tweets['analysis'] == 'negative'].ClearTweet.count()\n\nfig = go.Figure(data = [go.Funnelarea(labels = [\"positivity\",\"negativity\",\"neutrality\"], values = [positive,negative,neutral])])\nfig.update_layout(title_text ='sentimat analysis tweets Joe Biden')\nfig.show()","060d0f16":"from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\ndef word_cloud(wd_list):\n    stopwords = set(STOPWORDS)\n    all_words = ' '.join([text for text in wd_list])\n    wordcloud = WordCloud(\n        background_color='white',\n        stopwords=stopwords,\n        width=1600,\n        height=800,\n        random_state=1,\n        colormap='jet',\n        max_words=80,\n        max_font_size=200).generate(all_words)\n    plt.figure(figsize=(12, 10))\n    plt.axis('off')\n    plt.imshow(wordcloud, interpolation=\"bilinear\");\nword_cloud(Biden_dataset['tweet'][0:1000])","895f3364":"# Sentiment Analysis","59121e46":"# Tweets count in countries","5cf29c50":"# Number of tweets","7c7f9bea":"# Import datasets","0553bcc5":"# Top 10 continent","f66b4575":"# Number of likes","f0db95f1":"Create class for chart building","19f53627":"Here we can see according to the sentiment analysis of tweets\n\nDONALD TRUMP got 39.8% positive tweets \n\nJOE BIDEN got 45.5% positive tweets ","73986dea":"tweets count in France","f8569e2c":"Drop useles columns","66319e8f":"# Top 10 sources","ddbd7d73":"# Top 10 states","ee7185c0":"# who won in US president elections 2020? according to tweets","188baeb7":"Tweets count in country India","54339df0":"# Top 10 cities","50be9a52":"So you guys say WHO WON IN US PRESIDENT ELECTIONS 2020 according to tweets! \ud83d\ude04","044223e8":"# Top 5 countries","994017c5":"Functions for Data Manipulation","97c9290a":"# DonaldTrump tweets sentiment analysis","ff824f13":"Tweets count in Brazil","255bb93c":"# JoeBiden tweets sentiment analysis"}}