{"cell_type":{"ee689d80":"code","81e6976f":"code","2430ca4f":"code","f3823d87":"code","f2066f03":"code","f250d1eb":"code","ed33ec82":"code","7713527f":"code","4092e17e":"code","8142edda":"code","4297c915":"code","69da1f89":"code","ca7b4fb6":"code","e8dcf03f":"code","eb2bb71c":"code","10184a74":"code","ae443762":"code","ec5da692":"code","9c892195":"code","9a6aec61":"code","7df1e781":"code","99e155c9":"code","9f1c61d8":"code","a2884e99":"code","90764e84":"code","c151c4c7":"code","8ad6f4f1":"code","70e09bb4":"code","5cba227c":"code","c22b4ea9":"code","b3aaa498":"code","d7b602ba":"code","1d2105e9":"code","0ef48be7":"code","31129afb":"code","9873dc29":"code","fcd1de65":"markdown","bf07f7a1":"markdown","93d7d789":"markdown","edcb822f":"markdown","8d82e90b":"markdown","9a44e3c7":"markdown","4b2416ec":"markdown","2335694f":"markdown","a5060957":"markdown","bb517b1a":"markdown","1babf15f":"markdown","c4cba4ba":"markdown","31b0fc68":"markdown","44f9455b":"markdown","d340317b":"markdown","a3f6ffb0":"markdown","488abd4b":"markdown"},"source":{"ee689d80":"import numpy as np\nimport pandas as pd\nimport os\nfrom IPython.display import display\nimport matplotlib.pyplot as plt\nimport seaborn as sns","81e6976f":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","2430ca4f":"df = pd.read_csv('\/kaggle\/input\/air-quality-belgium\/data.csv',delimiter=';')\ndf.head(10)","f3823d87":"df['Longitude'] = list(map(lambda x: float(x.split(',')[0]), df.Coordinates))\ndf['Latitude'] = list(map(lambda x: float(x.split(',')[1]), df.Coordinates))","f2066f03":"plt.scatter(df.Latitude, df.Longitude)\nplt.grid()\nplt.show()","f250d1eb":"bbox_coords = [df.Longitude.min(), df.Longitude.max(), df.Latitude.min(), df.Latitude.max()]\nbbox_coords","ed33ec82":"from cartopy.io import shapereader\nimport geopandas\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# get country borders\nresolution = '10m'\ncategory = 'cultural'\nname = 'admin_0_countries'\n\nshpfilename = shapereader.natural_earth(resolution, category, name)\n# read the shapefile using geopandas\ndff = geopandas.read_file(shpfilename)\n# read the belgian borders\npoly = dff.loc[dff['ADMIN'] == 'Belgium']['geometry'].values[0]\nshell_coords = list(poly.exterior.coords)","7713527f":"def show_map(pollutant):\n    global shell_coords\n\n    df_pollutant = df[df.Pollutant==pollutant]\n    df.loc[df.Pollutant==pollutant, 'normalized'] = (df_pollutant.Value-df_pollutant.Value.min())\/(df_pollutant.Value.max()-df_pollutant.Value.min())\n    \n    fig, ax = plt.subplots()\n    df[df.Pollutant==pollutant].plot(kind=\"scatter\", x=\"Latitude\", y=\"Longitude\",\n        s=df[df.Pollutant==pollutant]['normalized'] * 250, label=f\"{pollutant} (\u00b5g\/m\u00b3)\", c=\"Value\", \n        cmap=plt.get_cmap(\"jet\"),\n        colorbar=True, alpha=0.4, figsize=(12,8), ax=ax\n    )\n\n    xs, ys = zip(*shell_coords)\n    plt.plot(xs, ys)\n    ax.set_xlabel(\"Longtitude\")\n    \n    plt.legend()\n    plt.show()","4092e17e":"pollutants = df[['Pollutant']].drop_duplicates()\npollutants = pollutants['Pollutant'].values.tolist()\npollutants","8142edda":"pm10_df = df[df['Pollutant'] == 'PM10']['Value']\npm10_df.describe()","4297c915":"print('Distribution of PM10')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(pm10_df.dropna(), ax=ax[0])\nsns.boxplot(pm10_df.dropna(), ax=ax[1])\npm10_skew = pm10_df.skew()\nplt.show()\nprint('Skewness = ', pm10_skew)","69da1f89":"show_map('PM10')","ca7b4fb6":"so2_df = df[df['Pollutant'] == 'SO2']['Value']\nso2_df.describe()","e8dcf03f":"print('Distribution of SO2')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(so2_df.dropna(), ax=ax[0])\nsns.boxplot(so2_df.dropna(), ax=ax[1])\nso2_skew = so2_df.skew()\nplt.show()\nprint('Skewness = ', so2_skew)","eb2bb71c":"show_map('SO2')","10184a74":"no2_df = df[df['Pollutant'] == 'NO2']['Value']\nno2_df.describe()","ae443762":"print('Distribution of NO2')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(no2_df.dropna(), ax=ax[0])\nsns.boxplot(no2_df.dropna(), ax=ax[1])\nno2_skew = no2_df.skew()\nplt.show()\nprint('Skewness = ', no2_skew)","ec5da692":"show_map('NO2')","9c892195":"o3_df = df[df['Pollutant'] == 'O3']['Value']\no3_df.describe()","9a6aec61":"print('Distribution of O3')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(o3_df.dropna(), ax=ax[0])\nsns.boxplot(o3_df.dropna(), ax=ax[1])\no3_skew = o3_df.skew()\nplt.show()\nprint('Skewness = ', o3_skew)","7df1e781":"show_map('O3')","99e155c9":"co_df = df[df['Pollutant'] == 'CO']['Value']\nco_df.describe()","9f1c61d8":"print('Distribution of CO')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(co_df.dropna(), ax=ax[0])\nsns.boxplot(co_df.dropna(), ax=ax[1])\nco_skew = co_df.skew()\nplt.show()\nprint('Skewness = ', co_skew)","a2884e99":"show_map('CO')","90764e84":"pm25_df = df[df['Pollutant'] == 'PM2.5']['Value']\npm25_df.describe()","c151c4c7":"print('Distribution of PM2.5')\nfig,ax = plt.subplots(1,2,figsize=(13,4))\nsns.distplot(pm25_df.dropna(), ax=ax[0])\nsns.boxplot(pm25_df.dropna(), ax=ax[1])\npm25_skew = pm25_df.skew()\nplt.show()\nprint('Skewness = ', pm25_skew)","8ad6f4f1":"show_map('PM2.5')","70e09bb4":"def show_top_locations(pollutant):\n    return df[df['Pollutant'] == pollutant][['Location', 'Value']] \\\n        .groupby(['Location']) \\\n        .agg('mean') \\\n        .sort_values('Value', ascending=False) \\\n        .head(10) \\\n        .style \\\n        .background_gradient(cmap='viridis')","5cba227c":"show_top_locations('PM10')","c22b4ea9":"show_top_locations('SO2')","b3aaa498":"show_top_locations('NO2')","d7b602ba":"show_top_locations('O3')","1d2105e9":"show_top_locations('CO')","0ef48be7":"show_top_locations('PM2.5')","31129afb":"# Flanders and Wallonia are two different parts of Belgium (upper and lower) and not cities. Brussels region is in between.\ncities_df = df[(df.City != 'Flanders') & (df.City != 'Wallonia') & (df.City != 'Brussels-Capital Region')]\n\ng = sns.FacetGrid(cities_df, col='City', col_wrap=6)\ng.map(sns.barplot, \"Pollutant\", \"Value\", estimator=sum)\nplt.show()","9873dc29":"# Flanders and Wallonia are two different parts of Belgium (upper and lower). Brussels region is in between.\nnon_cities_df = df.query('City == \"Flanders\" or City == \"Wallonia\" or City == \"Brussels-Capital Region\"')\n\ng = sns.FacetGrid(non_cities_df, col='City', col_wrap=7)\ng.map(sns.barplot, \"Pollutant\", \"Value\", estimator=sum)\nplt.show()","fcd1de65":"# Belgium's Air Quality EDA","bf07f7a1":"# Locations","93d7d789":"## PM2.5","edcb822f":"- All the locations of the other pollutants are not significantly larger than the rest.","8d82e90b":"- Flanders is more polluted than Wallonia. This is due to Flanders being much more densely populated and that Wallonia is mostly forest. Brussels region is less polluted but is also a lot smaller than Flanders and Wallonia.\n- Brussels and Hainaut are doing really bad on `CO`. Brussels is the capital of Belgium so that explains.\n- Antwerpen is doing bad on all other pollutants, mainly because of the Port Of Antwerp, which is a very big port and thus comes with a lot of industrialization.\n- Gent is a clear outlier if we view the PM10 ('fine dust') pollution. It's almost 3 times the amount than the second most polluted location with PM10! (why? \ud83e\udd14)","9a44e3c7":"- Gent is a clear outlier if we view the PM10 ('fine dust') pollution. It's almost 3 times the amount than the second most polluted location with PM10!","4b2416ec":"## SO2","2335694f":"# Mapping","a5060957":"- Brussels and Hainaut are doing really bad on `CO`. Brussels is the capital of Belgium so that explains.\n- Antwerpen is doing bad on all other pollutants, mainly because of the Port Of Antwerp, which is a very big port and thus comes with a lot of industrialization.","bb517b1a":"- Flanders is more polluted than Wallonia. This is due to Flanders being much more densely populated and that Wallonia is mostly forest. Brussels region is less polluted but is also a lot smaller than Flanders and Wallonia.","1babf15f":"## CO","c4cba4ba":"# Pollutants","31b0fc68":"## PM10","44f9455b":"# Wrap up","d340317b":"## NO2","a3f6ffb0":"## O3","488abd4b":"## Polluted Cities"}}