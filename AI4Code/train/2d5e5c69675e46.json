{"cell_type":{"0420bcdb":"code","0ab77529":"code","98defcd5":"code","2a594ea2":"code","8a8522d9":"code","29007c4e":"code","f4907901":"code","c9cf2545":"code","9023ca3a":"code","7c594c1d":"code","40cf2c5b":"code","6770e106":"code","5bab88db":"code","82cb01b4":"code","1faa3761":"code","1dab4ea3":"code","d2f0d0e2":"code","d8b24589":"code","203e1ce9":"code","8ad55eae":"code","c3a26263":"code","1ba4d49b":"code","eb79af1c":"code","0c307bce":"code","5028b749":"markdown","2f707fe6":"markdown","ee5f5324":"markdown","7e36843b":"markdown","5bfe8a5b":"markdown","69b4f28c":"markdown","b66c4deb":"markdown","15c880fd":"markdown","883c4134":"markdown","be218a37":"markdown","efd3cece":"markdown"},"source":{"0420bcdb":"import numpy as np \nimport pandas as pd\n\nimport librosa\nimport librosa.display\nimport IPython.display as ipd\nimport matplotlib.pyplot as plt\nimport scipy as sp\n\nimport os","0ab77529":"file_1 , sr = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/00204008d.flac')\nprint(type(file_1), type(sr))\nprint(file_1.shape, sr)","98defcd5":"file_2, _ = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/003b04435.flac')\nfile_3, _ = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/003bec244.flac')\nfile_4, _ = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/005f1f9a5.flac')\nfile_5, _ = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/006ab765f.flac')","2a594ea2":"ipd.Audio(file_1, rate=sr)","8a8522d9":"ipd.Audio(file_2, rate=sr)","29007c4e":"ipd.Audio(file_3, rate=sr)","f4907901":"ipd.Audio(file_4, rate=sr)","c9cf2545":"ipd.Audio(file_5, rate=sr)","9023ca3a":"#duration of one sample\nsample_duration = 1\/sr\nprint(f'sample_duration: {sample_duration:.6f} seconds')","7c594c1d":"#getting audio sample length\nduration = sample_duration * len(file_1)\nprint(\"audio file length: {} seconds\".format(duration))","40cf2c5b":"#see five of the audio files\nplt.figure(figsize=(13, 20))\n\nplt.subplot(5,1,1)\nlibrosa.display.waveplot(file_1, alpha = 0.5)\nplt.title('file_1')\nplt.ylim((-1,1))\n\nplt.subplot(5,1,2)\nlibrosa.display.waveplot(file_2, alpha = 0.5)\nplt.title('file_2')\nplt.ylim((-1,1))\n\nplt.subplot(5,1,3)\nlibrosa.display.waveplot(file_3, alpha = 0.5)\nplt.title('file_3')\nplt.ylim((-1,1))\n\nplt.subplot(5,1,4)\nlibrosa.display.waveplot(file_4, alpha = 0.5)\nplt.title('file_4')\nplt.ylim((-1,1))\n\nplt.subplot(5,1,5)\nlibrosa.display.waveplot(file_5, alpha = 0.5)\nplt.title('file_5')\nplt.ylim((-1,1))\n\nplt.subplots_adjust(wspace=None, hspace=0.6)","6770e106":"def amplitude_envelope(signal, frame_size, hop_length):\n    amplitude_envelope = []\n    \n    for i in range(0, len(signal), hop_length):\n        current_frame_amplitude_envelope = max(signal[i:i+frame_size])\n        amplitude_envelope.append(current_frame_amplitude_envelope)\n    \n    return (np.array(amplitude_envelope))","5bab88db":"FRAME_SIZE = 1024\nHOP_LENGTH = 512\n\nae_file_1 = amplitude_envelope(file_1, FRAME_SIZE, HOP_LENGTH)\nae_file_2 = amplitude_envelope(file_2, FRAME_SIZE, HOP_LENGTH)\nae_file_3 = amplitude_envelope(file_3, FRAME_SIZE, HOP_LENGTH)\nae_file_4 = amplitude_envelope(file_4, FRAME_SIZE, HOP_LENGTH)\nae_file_5 = amplitude_envelope(file_5, FRAME_SIZE, HOP_LENGTH)\n\nlen(ae_file_1)","82cb01b4":"#getting time per frame for the audio files\nframes = range(0, len(ae_file_1))\nt = librosa.frames_to_time(frames, hop_length=HOP_LENGTH)","1faa3761":"#getting time per frame for the audio files\nframes = range(0, len(ae_file_1))\nt = librosa.frames_to_time(frames, hop_length=HOP_LENGTH)\n\n#plot the five audio files\nplt.figure(figsize=(13, 20))\n\nplt.subplot(5,1,1)\nlibrosa.display.waveplot(file_1, alpha = 0.5)\nplt.plot(t, ae_file_1, color='r')\nplt.title('file_1')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,2)\nlibrosa.display.waveplot(file_2, alpha = 0.5)\nplt.plot(t, ae_file_2, color='r')\nplt.title('file_2')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,3)\nlibrosa.display.waveplot(file_3, alpha = 0.5)\nplt.plot(t, ae_file_3, color='r')\nplt.title('file_3')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,4)\nlibrosa.display.waveplot(file_4, alpha = 0.5)\nplt.plot(t, ae_file_4, color='r')\nplt.title('file_4')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,5)\nlibrosa.display.waveplot(file_5, alpha = 0.5)\nplt.plot(t, ae_file_5, color='r')\nplt.title('file_5')\nplt.ylim((-0.5,0.5))\n\nplt.subplots_adjust(wspace=None, hspace=0.6)","1dab4ea3":"rmse_file_1 = librosa.feature.rms(file_1, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nrmse_file_2 = librosa.feature.rms(file_2, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nrmse_file_3 = librosa.feature.rms(file_3, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nrmse_file_4 = librosa.feature.rms(file_4, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nrmse_file_5 = librosa.feature.rms(file_5, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\n\n#note the shape is the same as the amplitude envelope because we are using the same frame_size and hop_length\nrmse_file_1.shape","d2f0d0e2":"#getting time per frame for the audio files\nframes = range(0, len(rmse_file_1))\nt = librosa.frames_to_time(frames, hop_length=HOP_LENGTH)\n\n#plot the five audio files\nplt.figure(figsize=(13, 20))\n\nplt.subplot(5,1,1)\nlibrosa.display.waveplot(file_1, alpha = 0.5)\nplt.plot(t, rmse_file_1, color='r')\nplt.title('file_1')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,2)\nlibrosa.display.waveplot(file_2, alpha = 0.5)\nplt.plot(t, rmse_file_2, color='r')\nplt.title('file_2')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,3)\nlibrosa.display.waveplot(file_3, alpha = 0.5)\nplt.plot(t, rmse_file_3, color='r')\nplt.title('file_3')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,4)\nlibrosa.display.waveplot(file_4, alpha = 0.5)\nplt.plot(t, rmse_file_4, color='r')\nplt.title('file_4')\nplt.ylim((-0.5,0.5))\n\nplt.subplot(5,1,5)\nlibrosa.display.waveplot(file_5, alpha = 0.5)\nplt.plot(t, rmse_file_5, color='r')\nplt.title('file_5')\nplt.ylim((-0.5,0.5))\n\nplt.subplots_adjust(wspace=None, hspace=0.6)","d8b24589":"zcr_file_1 = librosa.feature.zero_crossing_rate(file_1, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nzcr_file_2 = librosa.feature.zero_crossing_rate(file_2, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nzcr_file_3 = librosa.feature.zero_crossing_rate(file_3, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nzcr_file_4 = librosa.feature.zero_crossing_rate(file_4, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]\nzcr_file_5 = librosa.feature.zero_crossing_rate(file_5, frame_length = FRAME_SIZE, hop_length = HOP_LENGTH)[0]","203e1ce9":"plt.figure(figsize=(20, 8))\n\nplt.plot(t, zcr_file_1, color='r')\nplt.plot(t, zcr_file_2, color='y')\nplt.plot(t, zcr_file_3, color='b')\nplt.plot(t, zcr_file_4, color='g')\nplt.plot(t, zcr_file_5, color='purple')\nplt.ylim((0,1))\nplt.show()","8ad55eae":"ft = sp.fft.fft(file_1)\nmagnitude = np.absolute(ft)\nfrequency = np.linspace(0, sr, len(magnitude))","c3a26263":"#plotting spectrum\nplt.figure(figsize=[20,8])\nplt.plot(frequency[:5000], magnitude[:5000]) #magnitude spectrum\nplt.xlabel('Frequency in HZ')\nplt.ylabel('Magnitude')","1ba4d49b":"d_50_samples = 100 * sample_duration #defined earlier in notebook\nd_50_samples","eb79af1c":"samples = range(len(file_1))\nt = librosa.samples_to_time(samples, sr=sr)\n\nplt.figure(figsize=[20,8])\nplt.plot(frequency[65000:65050], magnitude[65000:65050])\nplt.xlabel(\"time in seconds\")\nplt.ylabel(\"amplitude\")","0c307bce":"f = 523\nphase = 0\nphase2 = 0.3 #obviously one or zero means sin waves overlap\n\nsin = 0.5 * np.sin(2*np.pi * (f * t - phase))\nsin2 = 0.5 * np.sin(2*np.pi * (f * t - phase2))\n\nplt.figure(figsize=[20,8])\nplt.plot(t[65000:65400], sin[65000:65400], color='g')\nplt.plot(t[65000:65400], sin2[65000:65400], color='r')","5028b749":"visualizing the waveforms","2f707fe6":"visualizing the amplitude envelope for the five audio files","ee5f5324":"### RMSE - root mean squared energy","7e36843b":"### Geting the amplitude_envelope_feature","5bfe8a5b":"creating a sinusoid","69b4f28c":"- returns an audio time series as a numpy array\n- sr == sampling rate (22.05 KHz)","b66c4deb":"visualizing the rmse for all the five audio files","15c880fd":"### Fourier Transform","883c4134":"trying to overlap the sinusoid and the file_1 waveform but havent had much success. Need to figure this out","be218a37":"### Looking at Audio Data","efd3cece":"getting the zero_crossing_rate for the five files"}}