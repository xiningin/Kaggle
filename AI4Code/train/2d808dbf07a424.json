{"cell_type":{"1fdc1fa7":"code","33275d9e":"code","29defdcc":"code","94676c90":"code","191d73df":"code","07dfc237":"code","c4b19e55":"code","f028e6a6":"code","f7bb1cec":"markdown"},"source":{"1fdc1fa7":"import numpy as np\nimport pandas as pd\n\nimport plotly.graph_objects as go\nfrom kaggle_secrets import UserSecretsClient\n\nuser_secrets = UserSecretsClient()\nMAPBOX_TOKEN = user_secrets.get_secret(\"mapbox_token\")\nMAPBOX_STYLE = user_secrets.get_secret(\"mapbox_style\")","33275d9e":"fires = pd.read_csv('..\/input\/fires-from-space-australia-and-new-zeland\/fire_archive_M6_96619.csv')","29defdcc":"def to_hour_str(number):\n    string = '{:04d}'.format(number)\n    string = string[:2] + ':' + string[2:]\n    return string\n\nfires['acq_datestring'] = fires.apply(lambda r: r['acq_date'] + \" \" + to_hour_str(r['acq_time']), axis=1)","94676c90":"fires.head()","191d73df":"times = fires.groupby(['acq_date'])['acq_date'].count().index.tolist()\nframes_data = [fires.loc[fires['acq_date'] == t] for t in times]","07dfc237":"frames= [go.Frame(data=[go.Densitymapbox(lat=f['latitude'], lon=f['longitude'], z=f['brightness'], radius=10)], name=str(f.iloc[0]['acq_date'])) for f in frames_data]","c4b19e55":"buttons=[\n         dict(label=\"Play\",method=\"animate\",args=[None, {'fromcurrent':True, \"transition\": {\"duration\": 30, \"easing\": \"quadratic-in-out\"}}]),\n         dict(label=\"Pause\",method=\"animate\",args=[[None], {\"frame\": {\"duration\": 0, \"redraw\": False},\"mode\": \"immediate\", \"transition\": {\"duration\": 0}}])\n]\n\n\nsliders_dict = {\n    'active':0,\n    'currentvalue': dict(font=dict(size=16), prefix='Time: ', visible=True),\n    \"transition\": {\"duration\": 300, \"easing\": \"cubic-in-out\"},\n    'x': 0,\n    'steps': []\n}\n\nfor i,t in enumerate(times):\n    slider_step = {\"args\": [\n                        [t],\n                        {\"frame\": {\"duration\": 300, \"redraw\": False},\n                         #\"mode\": \"immediate\",\n                         \"transition\": {\"duration\": 30, \"easing\": \"quadratic-in-out\"}}\n                    ],\n            \"label\": t,\n            \"method\": \"animate\",\n            \"value\": t\n    }\n    sliders_dict['steps'].append(slider_step)\n    ","f028e6a6":"fig = go.Figure(data = [go.Densitymapbox(lat=fires['latitude'], lon=fires['longitude'], z=fires['brightness'], radius=1, colorscale='Hot', zmax=400, zmin=0)],\n               layout=go.Layout(updatemenus=[dict(type=\"buttons\", buttons=buttons,showactive=True)] ), \n               frames=frames\n)\n\nfig.update_layout(mapbox_style=MAPBOX_STYLE, \n                  mapbox_accesstoken=MAPBOX_TOKEN,\n                  mapbox_center_lon=135,\n                  mapbox_center_lat=-25.34,\n                  mapbox_zoom=3.5)\n\n\"\"\"fig.update_layout(mapbox_style=\"stamen-terrain\", \n                  mapbox_center_lon=135,\n                  mapbox_center_lat=-25.34,\n                  mapbox_zoom=3.5)\"\"\"\n\n\nfig.update_layout(sliders=[sliders_dict],\n                 title='Australia fires over time')\n\nfig.update_layout(height=850)\nfig.show()","f7bb1cec":"#\u00a0Fire visualization \n\nOne of the worst wildfire crysis in decades have been desolating Australia since July 2019, So I made an animation with Plotly with this dataset to help people appreciate the scale of this catastrophe..."}}