{"cell_type":{"ad316761":"code","20dc7a68":"code","423badfe":"code","3d3d8613":"code","40fa843c":"code","51ee43de":"code","c46d40f5":"code","4ec40677":"code","1a9cffbf":"code","fd0ae27c":"code","cfc7859f":"code","cffa9e27":"code","8438d661":"code","92a6aae9":"code","5e7efa47":"code","febf7652":"markdown","c35373d2":"markdown","a30943e1":"markdown","4f7d990c":"markdown","c202e2f1":"markdown","71bb5528":"markdown","b6060e55":"markdown"},"source":{"ad316761":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport os","20dc7a68":"station = pd.read_csv(\"..\/input\/station.csv\", parse_dates=['installation_date'], index_col='id')\ntrip = pd.read_csv(\"..\/input\/trip.csv\", parse_dates=['start_date', 'end_date'], index_col='start_date')\nweather = pd.read_csv(\"..\/input\/weather.csv\", parse_dates=['date'], index_col = 'date')\nstatus = pd.read_csv(\"..\/input\/status.csv\", parse_dates = ['time'])","423badfe":"pd.merge(station, trip, left_index = True, right_on = 'start_station_id', how='inner').groupby('name')['name'].count().sort_values(ascending=False).head(5)","3d3d8613":"pd.merge(station, status[status.bikes_available==0], left_index=True, right_on='station_id', how = 'inner').groupby('name')['name'].count().sort_values(ascending=False).head(10)","40fa843c":"counts = trip.groupby(['subscription_type'])['id'].count()\n\nplt.pie(counts, explode=(0.1, 0), labels=['Customer', 'Subscriber'], colors=['tab:orange', 'tab:cyan'],\n        autopct='%1.1f%%', \n        shadow = True)\nplt.title('Customer vs Subscribers')\nplt.axis('scaled')\nplt.show()","51ee43de":"pop_routes = trip.groupby(['start_station_id','end_station_id']).count()['id'].sort_values(ascending=False).head(5)\nstart_stations = pop_routes.index.get_level_values(0)\nend_stations = pop_routes.index.get_level_values(1)\nstart_station_names = station.loc[start_stations]['name'].values\nend_station_names = station.loc[end_stations]['name'].values\npd.DataFrame({'start_station': start_station_names, 'end_station': end_station_names, 'total_trips': pop_routes.values})","c46d40f5":"trip['start_hour'] = trip.index.hour\ntrip.plot(y='start_hour', kind='hist', range=[0, 23], bins=24, density=True, ax=plt.gca(), alpha=0.7, figsize=(12,6), title='usage by hour of day')","4ec40677":"trip['day_of_week'] = trip.index.weekday\nplt.figure(figsize=(12,6))\nplt.xticks(np.arange(7), ('Monday', 'Tuesday', 'Wednesday', 'Thrusday', 'Friday', 'Saturday', 'Sunday'))\ntrip.plot(y='day_of_week', kind='hist', range=[0, 6], bins=7, density=True, ax=plt.gca(), alpha=0.7, title='usage by day of week', rot = 90, rwidth=0.9)","1a9cffbf":"trip.index.names","fd0ae27c":"trip['weekend'] = trip.index.weekday\/\/5","cfc7859f":"trip_duration = trip.groupby('weekend')['duration'].mean() \/\/ 60\n\nfig = plt.figure(figsize=(6,6))\ntrip_duration.plot(kind='bar')","cffa9e27":"trip['duration_min'] = trip.duration\/\/60","8438d661":"trip.groupby(['subscription_type']).mean()[['duration','duration_min']]","92a6aae9":"trip.groupby(['subscription_type']).median()[['duration','duration_min']]","5e7efa47":"trip.groupby(['start_station_name','subscription_type']).mean()['duration_min'].unstack().plot(kind='bar',\n                                                                                               legend = True,figsize=(16,8),\n                                                                                              title='Dration from type of subscription')\nplt.ylabel('Duration min')\nplt.show()","febf7652":"# Most popular routes","c35373d2":"# Usage by Hour of Day","a30943e1":"# Avarage Trip duration on Weekdays vs Weekends","4f7d990c":"# Stations most heavily used","c202e2f1":"# Stations with bikes available for the most (net) time","71bb5528":"# Subscribers vs Transient Customers","b6060e55":"# Usage by Day of Week"}}