{"cell_type":{"26998afc":"code","d49f8740":"code","61933a2a":"code","5ca0525e":"code","b9d74893":"code","89d02b91":"code","fdbc4f10":"code","17caf499":"code","03b51f32":"code","a0968d91":"code","ac24259e":"code","faca4233":"code","fe6f5a2b":"code","599c9d43":"code","634878ba":"code","cbbaf8e5":"code","2ce464e6":"code","9ae65da6":"code","4aecd804":"code","983e8c3a":"code","ef31af12":"code","8e2ae950":"code","7d8577bc":"code","87305191":"code","9d0225c0":"code","de1d8d67":"code","c43c9df4":"code","cbdb7ccd":"code","b741a53b":"code","76303045":"code","6b186c39":"code","fa414848":"code","11913531":"code","70fa9670":"code","4efb552f":"code","5f40da07":"code","8af1b762":"code","66f91d60":"markdown","1bd77e0e":"markdown","513a348a":"markdown","16f5e428":"markdown","3dddfa6a":"markdown","84896c82":"markdown","20c875d3":"markdown","d23a02ad":"markdown","1a759065":"markdown","77a3e0a5":"markdown","73618aef":"markdown","4d317177":"markdown","687a894b":"markdown","3e5021ac":"markdown","1b0e431d":"markdown","ee0f149c":"markdown","7cc9f1a4":"markdown","7f29b8da":"markdown","73aad30e":"markdown","cdaee079":"markdown","c7290d46":"markdown","5af36311":"markdown","750948f5":"markdown","df5e3b02":"markdown"},"source":{"26998afc":"\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sb\nimport warnings\nwarnings.filterwarnings('ignore')","d49f8740":"#Reading the Data Set\nhr_data = pd.read_csv('..\/input\/WA_Fn-UseC_-HR-Employee-Attrition.csv')","61933a2a":"#Displaying the Top 5 rows in Data Set\nhr_data.head()","5ca0525e":"#Check if any Column's has NA or Missing Values\nhr_data.isnull().any()","b9d74893":"#Shape of the Data\nhr_data.shape","89d02b91":"#Data Types of Columns\nhr_data.dtypes","fdbc4f10":"#Show how much % of employees left the organization\nhr_data.Attrition.value_counts(normalize=True)","17caf499":"plt.figure(figsize=(8,6))\nAttrition=hr_data.Attrition.value_counts()\nsb.barplot(x=Attrition.index ,y=Attrition.values)\nplt.title('Distribution of Employee Turnover')\nplt.xlabel('Employee Turnover', fontsize=16)\nplt.ylabel('Count', fontsize=16)","03b51f32":"sb.distplot(hr_data['Age'])","a0968d91":"sb.distplot(hr_data['MonthlyIncome'])","ac24259e":"sb.distplot(hr_data['TotalWorkingYears'])","faca4233":"#Method that plot density plots on the columns passed as input\ndef kdePlot(var):\n    fig = plt.figure(figsize=(15,4))\n    ax=sb.kdeplot(hr_data.loc[(hr_data['Attrition'] == 'No'),var] , color='b',shade=True, label='no Attrition') \n    ax=sb.kdeplot(hr_data.loc[(hr_data['Attrition'] == 'Yes'),var] , color='r',shade=True, label='Attrition')\n    plt.title('Employee Attrition with respect to {}'.format(var))\n    ","fe6f5a2b":"numerical_df=hr_data.select_dtypes(include=np.number)\nnumeric_cols_kdeplot=list(numerical_df.columns)\nremove_columns=['Age','DistanceFromHome','Education','EmployeeCount','EmployeeNumber',\n'EnvironmentSatisfaction' ,'HourlyRate','JobInvolvement','JobSatisfaction','MonthlyRate','NumCompaniesWorked',\n'PercentSalaryHike','PerformanceRating','RelationshipSatisfaction','StandardHours','StockOptionLevel','TotalWorkingYears',\n'TrainingTimesLastYear','WorkLifeBalance','YearsSinceLastPromotion']\nfor l in remove_columns:\n    numeric_cols_kdeplot.remove(l)","599c9d43":"#Plotting KDE plots\nfor n in numeric_cols_kdeplot:\n    kdePlot(n)","634878ba":"BarPlot_columns=['Age','DistanceFromHome','EducationField',\n                'JobInvolvement','JobLevel','JobRole','OverTime','TotalWorkingYears','TrainingTimesLastYear',\n                'WorkLifeBalance','YearsInCurrentRole']","cbbaf8e5":"#Method the perform Bar plots\ndef Bar_plots(var):\n    col=pd.crosstab(hr_data[var],hr_data.Attrition)\n    col.div(col.sum(1).astype(float), axis=0).plot(kind=\"bar\", stacked=False, figsize=(8,4))\n    plt.xticks(rotation=90)","2ce464e6":"for col in BarPlot_columns:\n    Bar_plots(col)","9ae65da6":"#Replacing Yes with 1 and No with 0 in Attrition Column\nhr_data['Attrition']=np.where(hr_data['Attrition']=='No', #condition\n                 0, #value if condition is true\n                 1)","4aecd804":"hr_data.describe().iloc[:,:20]","983e8c3a":"hr_data.EmployeeCount.value_counts()","ef31af12":"hr_data.StandardHours.value_counts()","8e2ae950":"len(set(hr_data.EmployeeNumber))","7d8577bc":"hr_data=hr_data.drop(['EmployeeCount', 'StandardHours','EmployeeNumber'], axis=1)","87305191":"hr_data.groupby('Attrition').mean().iloc[:,:20]","9d0225c0":"hr_data.groupby('Attrition').mean().iloc[:,20:26]","de1d8d67":"corr_matrix = hr_data.corr()\nf , ax = plt.subplots(figsize=(20,12))\nsb.heatmap(corr_matrix,vmax=0.8, annot=True)","c43c9df4":"numerical_df=hr_data.select_dtypes(include=np.number)\ncategorical_df=hr_data.select_dtypes(exclude=np.number)\nnumeric_cols=list(numerical_df.columns)\ncategorical_cols=list(categorical_df.columns)","cbdb7ccd":"for n in categorical_cols:\n    print(pd.crosstab(hr_data['Attrition'],hr_data[n],normalize='columns'))","b741a53b":"categorical_df_dummies=pd.get_dummies(hr_data[categorical_cols],drop_first=True)\nfinal_df=pd.concat([categorical_df_dummies,numerical_df],axis=1)","76303045":"final_df.head()","6b186c39":"y=final_df.Attrition\nX=final_df.drop(['Attrition'], axis=1)","fa414848":"#Splitting Data in Train and Test Set\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import classification_report,accuracy_score,roc_auc_score,precision_recall_curve,confusion_matrix,precision_score,confusion_matrix\nX_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.2,random_state=100)","11913531":"#Building base model(Predicting that no employee leaves the company)\nbase=np.zeros(1470)\nprint(accuracy_score(base,hr_data.Attrition))","70fa9670":"#Method that applies model on the data and Predict the attrition\ndef model(mod,model_name,x_tr,y_tr,x_tes,y_te):\n    mod.fit(x_tr,y_tr)\n    pred_dt=mod.predict(x_tes)\n    print(\"     \",model_name,\"      \")\n    print(\"Accuracy \",accuracy_score(pred_dt,y_te))\n    print(\"ROC_AUC  \",roc_auc_score(pred_dt,y_te))\n    cm=confusion_matrix(pred_dt,y_te)\n    print(\"Confusion Matrix  \\n\",cm)\n    print(\"                    Classification Report \\n\",classification_report(pred_dt,y_te))","4efb552f":"from sklearn.linear_model import LogisticRegression\nlr=LogisticRegression()\nmodel(lr,\"Logistic Regression\",X_train,y_train,X_test,y_test)","5f40da07":"from sklearn.tree import DecisionTreeClassifier\ndt=DecisionTreeClassifier(min_samples_leaf=20, max_depth=4)\nmodel(dt,\"Decision Tree\",X_train,y_train,X_test,y_test)","8af1b762":"from sklearn.ensemble import RandomForestClassifier\nrf=RandomForestClassifier(n_estimators=10,max_depth=4)\nmodel(rf,\"Random Forest\",X_train,y_train,X_test,y_test)","66f91d60":"Employees whose monthly income is below $5000 have high attrition.\n","1bd77e0e":"We can clearly see that Dataset in Imbalanced(84% No , 16% Yes)","513a348a":"### Observations","16f5e428":"Attrition is very high with employees having age in between 18 to 22. These might be due to students who are doing intership or small contract jobs","3dddfa6a":"Dropping the columns EmployeeCount,StandardHours,EmployeeNumber as these columns does not help in model building.","84896c82":"Attrition is high with employee's whose job role is in the field of Human Resources, Sales Representative, Laboratory Technician.","20c875d3":"Employees who are in current role for around 0 to 4 years have high attrition.","d23a02ad":"Accuracy is 85% but again Precision and Recall for class 1 is low","1a759065":"Accuracy is 86% but Precision and Recall for class 1 is low","77a3e0a5":"Attrition is more when the distance of office is more from home","73618aef":"Employees who work over time have high attrition than employees who did not do over time","4d317177":"Attrition is high with Employees having joblevel as 1.\n","687a894b":"Total Working Years is also right skewed similar to Age","3e5021ac":"Most the employees have their monthly income around 5000$ and is distribution Rightly Skewed","1b0e431d":"Employees who are working less than 2 years have more attrition","ee0f149c":"### EDA","7cc9f1a4":"Data set has 1470 rows and 35 Columns","7f29b8da":"Base model has 83.8% accuracy. Thus accuracy is not best criteria to check the performance of the model","73aad30e":"Employees who worked in the company around 0 to 1 years have high attrition.\n","cdaee079":"### Observations","c7290d46":" 16 % of the employees left the company. 84% did not leave the company.(Class Imbalance Problem) ","5af36311":"Age is fairly normally distributed with average Age around 35. Most of the employees in the range 25 to 45","750948f5":"Accuracy is 85% but even though recall is better ,Precision  is low for class 1","df5e3b02":"Attrition is high with employee's education in the field of Human Resources, Marketing and Technical Degree that other fields"}}