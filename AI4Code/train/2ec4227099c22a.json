{"cell_type":{"1d3c570f":"code","a7531134":"code","3043d033":"code","2aca3cdb":"code","344b12d9":"code","0e1e21a9":"code","b2043393":"code","e2868761":"code","b5862f05":"code","208309c7":"code","4180ee58":"code","5dd86737":"code","bf002f1e":"code","ba3acfdd":"code","c19e29e9":"code","21ceb046":"code","01f92a4b":"code","4bd4a1ba":"code","753df3db":"code","d360b84a":"code","b21ddaa1":"code","3e71fe06":"code","d554f422":"code","e3625269":"code","f12091ec":"code","80b4770a":"code","81773ae7":"code","6ae739cd":"code","4929146e":"code","271ff9cf":"code","9f702068":"code","4268eb59":"code","81e1885f":"code","c7d85196":"code","aa1af6a4":"code","eb12cc09":"code","c526d224":"code","0c9a9a96":"code","65f06a83":"code","26695582":"code","af6f76dd":"code","47b64b0e":"code","b04a14cd":"code","01450031":"code","3011e016":"code","a6c69fe0":"code","448b71a9":"code","dd4e21ec":"code","c236968d":"code","94eb0c6e":"code","f3b7405a":"code","717e7a31":"code","810e7dd8":"code","d4d4fcc8":"code","391bc546":"code","268b9e59":"markdown","401b6780":"markdown","c58f532c":"markdown","2d4c3b9f":"markdown","d5aeddf6":"markdown","274f6677":"markdown","907c88d0":"markdown","48669588":"markdown","a864ea2a":"markdown","6a6d84b6":"markdown","6cbd6549":"markdown","bec14f39":"markdown","6f4749e1":"markdown","e57cf754":"markdown","8c1b6f7d":"markdown","40434050":"markdown","0f94fff0":"markdown","baabf183":"markdown","872a5bb4":"markdown","cf7e3158":"markdown","b5a1ce12":"markdown","2fe9c9d1":"markdown","c5d2a923":"markdown","18ef8c0d":"markdown","f3fa5d54":"markdown","84fe7175":"markdown"},"source":{"1d3c570f":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nsns.set()\nimport random","a7531134":"data= pd.read_csv(\"..\/input\/train_V2.csv\")","3043d033":"#EXPLORATORY DATA ANALYSIS\n\ndata.head()","2aca3cdb":"#Details of the data type\ndata.info()","344b12d9":"data[\"groupId\"].value_counts()\ndata[\"matchId\"].value_counts()","0e1e21a9":"#Dimension of the data\ndata.shape","b2043393":"df=pd.DataFrame()\ndf[[\"groupId\",\"matchId\", \"winPlacePerc\"]]= pd.DataFrame(data[[\"groupId\",\"matchId\", \"winPlacePerc\"]].copy())\n\n#Converting strings to categorical codes\ndf[\"groupId\"]= df[\"groupId\"].astype('category').cat.codes\ndf[\"matchId\"]= df[\"matchId\"].astype('category').cat.codes\ndf[\"winPlacePerc\"]= df[\"winPlacePerc\"].astype('category').cat.codes\n\n#Check Correlation\ndf.corr()\n\n#The correlation matrix does not show any relation","e2868761":"list(data.columns.values)","b5862f05":"data=data.drop(data[[\"Id\", \"groupId\", \"matchId\"]], axis=1)\ndata.columns.values","208309c7":"data.head()","4180ee58":"cor= data.corr()\ncor.style.background_gradient().set_precision(2)","5dd86737":"data['WinPlaceBucket'] = np.where(data.winPlacePerc >0.75, 'Quartile1', \n                          np.where(data.winPlacePerc>.5, 'Quartile2', \n                                   np.where(data.winPlacePerc>.25, 'Quartile3', 'Quartile4')))\ndata[[\"winPlacePerc\",\"WinPlaceBucket\"]]","bf002f1e":"sns.pairplot(data.sample(100), size = 2.5) #hue=\"WinPlaceBucket\")","ba3acfdd":"data.columns.values","c19e29e9":"col=[\"boosts\", \"damageDealt\", \"kills\", \"killStreaks\", \"walkDistance\", \"weaponsAcquired\",\"winPlacePerc\"]\nsns.pairplot(data[col].sample(100000), size = 2.5, kind=\"reg\", diag_kind=\"kde\")","21ceb046":"sns.catplot(x=\"WinPlaceBucket\", kind=\"count\", palette=\"ch:.25\", data=data.sort_values(\"WinPlaceBucket\"))","01f92a4b":"sns.relplot(x=\"walkDistance\", y=\"kills\", hue=\"WinPlaceBucket\", data=data)\nsns.relplot(x=\"swimDistance\", y=\"kills\", hue=\"WinPlaceBucket\", data=data)\nsns.relplot(x=\"rideDistance\", y=\"kills\", hue=\"WinPlaceBucket\", data=data)","4bd4a1ba":"sns.relplot(x=\"walkDistance\", y=\"weaponsAcquired\", hue=\"WinPlaceBucket\", data=data)\nsns.relplot(x=\"rideDistance\", y=\"weaponsAcquired\", hue=\"WinPlaceBucket\", data=data)","753df3db":"sns.relplot(x=\"DBNOs\", y=\"weaponsAcquired\", hue=\"WinPlaceBucket\", data=data)","d360b84a":"sns.catplot(x=\"WinPlaceBucket\", y=\"kills\", kind=\"boxen\",\n            data=data.sort_values(\"WinPlaceBucket\"))","b21ddaa1":"#data.columns.values\ndata[\"matchType\"].value_counts()","3e71fe06":"data['KillsBucket'] = np.where(data.kills >10, 'Kills:10+', \n                          np.where(data.kills>5, 'Kills:6 to 10', \n                                   np.where(data.kills>=3, 'Kills:3 to 5', \n                                            np.where(data.kills==2, 'Kills:2', \n                                                     np.where(data.kills==1, 'Kill:1', 'Kill:0')))))","d554f422":"data[\"KillsBucket\"].value_counts()","e3625269":"sns.catplot(x=\"winPlacePerc\", y=\"KillsBucket\", kind=\"boxen\",\n            data=data.sort_values(\"KillsBucket\"))","f12091ec":"sns.relplot(x=\"walkDistance\", y=\"KillsBucket\", hue=\"WinPlaceBucket\", data=data)\nsns.relplot(x=\"swimDistance\", y=\"KillsBucket\", hue=\"WinPlaceBucket\", data=data)\nsns.relplot(x=\"rideDistance\", y=\"KillsBucket\", hue=\"WinPlaceBucket\", data=data)","80b4770a":"random.seed(120)\nsns.pointplot(x=\"boosts\", y=\"winPlacePerc\", data=data.sample(1000), color=\"maroon\")\nsns.pointplot(x=\"heals\", y=\"winPlacePerc\", data=data.sample(1000), color=\"purple\")\nplt.text(14,0.5,\"heals\", color=\"purple\")\nplt.text(14,0.4,\"boosts\", color=\"maroon\")\nplt.xlabel(\"Heals\/Boosts\")\nplt.ylabel(\"Win Place %\")","81773ae7":"data['GroupBucket'] = np.where(data.numGroups >50, 'Solo', \n                          np.where(data.numGroups>25 , 'Duo', 'Squad'))\ndata[\"GroupBucket\"].value_counts()","6ae739cd":"sns.relplot(x=\"kills\", y=\"winPlacePerc\", hue=\"GroupBucket\", kind=\"line\", data=data)","4929146e":"sns.relplot(x=\"vehicleDestroys\", y=\"winPlacePerc\", kind=\"line\",ci=\"sd\", data=data)\nsns.relplot(x=\"vehicleDestroys\", y=\"kills\", kind=\"line\",ci=\"sd\", data=data)\nsns.relplot(x=\"vehicleDestroys\", y=\"kills\", kind=\"line\",ci=None, hue=\"WinPlaceBucket\", data=data)","271ff9cf":"data.columns.values","9f702068":"data_v2= data.drop(data[[\"matchDuration\", \"matchType\", \"maxPlace\", \"rankPoints\", \"WinPlaceBucket\",\n                        \"KillsBucket\", \"GroupBucket\"]], axis=1)","4268eb59":"data_v2.columns.values","81e1885f":"data_v2.info()","c7d85196":"from sklearn import linear_model\nfrom sklearn.metrics import mean_squared_error, r2_score\nfrom sklearn.model_selection import train_test_split as split","aa1af6a4":"train, test= split(data_v2, test_size=0.2, random_state=123)","eb12cc09":"train_y= train[\"winPlacePerc\"].copy()\ntest_y= test[\"winPlacePerc\"].copy()","c526d224":"train_x=train.drop(train[[\"winPlacePerc\"]],axis=1)\ntest_x=test.drop(test[[\"winPlacePerc\"]],axis=1)","0c9a9a96":"print(\"train_x: \", np.isnan(train_x).any())\nprint(\"train_y: \",np.isnan(train_y).any())\nprint(\"test_x: \",np.isnan(test_x).any())\nprint(\"test_y: \",np.isnan(test_y).any())","65f06a83":"test_y=test_y.fillna(test_y.mean())","26695582":"#Check again\nprint(\"test_y: \",np.isnan(test_y).any())","af6f76dd":"reg= linear_model.LinearRegression()","47b64b0e":"reg.fit(train_x, train_y)","b04a14cd":"#Predicting the test set\ntest_y_pred= reg.predict(test_x)","01450031":"list(zip(train.columns.values,reg.coef_))","3011e016":"mse= mean_squared_error(test_y_pred,test_y)\nprint(\"Mean Squared Error: \",mse)","a6c69fe0":"r2_score(test_y_pred,test_y)","448b71a9":"test_actual= pd.read_csv(\"..\/input\/test_V2.csv\")","dd4e21ec":"test_actual.head()","c236968d":"test_model= test_actual.drop(test_actual[[\"Id\", \"groupId\", \"matchId\", \"matchDuration\", \"matchType\", \"maxPlace\", \"rankPoints\"]], axis=1)","94eb0c6e":"test_model_predict= reg.predict(test_model)","f3b7405a":"test_model_predict","717e7a31":"op= pd.DataFrame(list(zip(test_actual[\"Id\"], test_model_predict)))","810e7dd8":"op= op.rename(columns={0: 'Id', 1: 'winPlacePerc'})","d4d4fcc8":"op.head()","391bc546":"op.to_csv(\"sample_submission.csv\", encoding='utf-8', index=False)","268b9e59":"#### Check for NAN","401b6780":"##### Check if the matchID and Group ID has any correlation with the Win Place % as people might get into an easy lobby or might be grouped with a ***good*** Squad or in Duo","c58f532c":"### Check Counts of the palyers belonging to each quartile\n\n![flat 550x550 075 f](https:\/\/user-images.githubusercontent.com\/13174586\/48707380-462b7b80-ec25-11e8-96f0-41083b3d7319.jpg)","2d4c3b9f":"### Scatter Plot of all the variables to see their relationships","d5aeddf6":"### Import data","274f6677":"### Regression","907c88d0":"### SOLO v DUO v SQUAD\n![download 4](https:\/\/user-images.githubusercontent.com\/13174586\/48754523-f053e380-ecb7-11e8-9004-c18abe13794f.jpg)\n![download 5](https:\/\/user-images.githubusercontent.com\/13174586\/48754525-f21da700-ecb7-11e8-8155-6b348b613d49.jpg)\n![download 6](https:\/\/user-images.githubusercontent.com\/13174586\/48754526-f3e76a80-ecb7-11e8-8104-c5edd52f5ec9.jpg)\n","48669588":"## Building Predictive Models","a864ea2a":"### Import required libraries","6a6d84b6":"#### Plot1: Mostly the top Quartile players prefer camping and kill. They may travel only to move to the safe zone\n#### Plot2: Most of the players avoid swimming as it makes them the most vulnerable to attacks\n#### Plot3:  Similar to plot 1, the players avoid riding to much as they get easily exposed to enemy fires and even their vecicles can explode. They prefer to travel only when they are far away from the safe zone after being deployed or if they are far away from the safe zone and it starts shrinking\n\n\n### Check the relationship between WalkDistance, and RideDistance with Weapons Acquired based on WinPlace Quartile","6cbd6549":"### Create bucket for Kills:\n![unsunggrizzledhornedviper-size_restricted](https:\/\/user-images.githubusercontent.com\/13174586\/48753002-0bbbf000-ecb2-11e8-9194-05b64565682d.gif)\n#### Kill: 0\n#### Kill: 1\n#### Kills: 2\n#### Kills: 3 to 5\n#### Kills: 6 to 10\n#### Kills: 10+","bec14f39":"#### The players with 10+ Kilss are Pro they most of the time finish with Win Place Percentage of almost 100%. Similarly players with 6 to 10 Kills gives good fight and also mostly end up in the to quartile with median win place as asound 92%. Players with 0 or 1 kills are the one who mostly fight to survive. These are the kind of players who avoids gunfights and keeps of hiding until they are spotted by enemies or end up in  a very small safe zone  ","6f4749e1":"#### Generally Top Quartile Players does not focus much on scavenging too weapons and attachments. They require basic components like, good automatic guns, scopes, grenades, smoke. They mostly travel for changing camping locations and move to safe zones. It's all skills that matter\n\n### Check the relationship between DBNOs with Weapons Acquired based on WinPlace Quartile and kills with WinPlace Quartile","e57cf754":"### We checked the correlation matrix above\n### Using scatter plot for the variables correlated with Winning Percentage to find if there is any linear relationship\n### Note: Correlation is not causation","8c1b6f7d":"### Check the relationship between WalkDistance, SwimDistance, and RideDistance with Kills based on WinPlace Quartile\n![download](https:\/\/user-images.githubusercontent.com\/13174586\/48707564-e5e90980-ec25-11e8-82e3-e3d36c85cbf0.jpg)\n![download 1](https:\/\/user-images.githubusercontent.com\/13174586\/48707565-e5e90980-ec25-11e8-8135-ee1bf7e994c0.jpg)\n![images](https:\/\/user-images.githubusercontent.com\/13174586\/48707568-e681a000-ec25-11e8-8a35-ed3db2a3816e.jpg)\n![images 1](https:\/\/user-images.githubusercontent.com\/13174586\/48707563-e5507300-ec25-11e8-824e-c439f89f482e.jpg)\n","40434050":"#### Mean Squared Error","0f94fff0":"### Check the correlation matrix","baabf183":"#### Dropping \"Id\", \"groupId\", \"matchId\" from the dataframe","872a5bb4":"#### Print Regression Coefficients","cf7e3158":"### Creating Buckets for the players based on **WinPlacePerc** variable\n#### Quartile 1 - Top 25% of the Players - 75-100 %ile\n#### Quartile 2 - 50-75 %ile\n#### Quartile 3 - 25-50 %ile\n#### Quartile 4 - 0-25 %ile - Noobs :-P","b5a1ce12":"### Relation between Heals and Boosts\n![maxresdefault](https:\/\/user-images.githubusercontent.com\/13174586\/48753435-f5af2f00-ecb3-11e8-9c7b-45cd1a9ff9e6.jpg)\n#### Heals\n![download 2](https:\/\/user-images.githubusercontent.com\/13174586\/48753424-ecbe5d80-ecb3-11e8-80f7-1c24b712d60b.jpg)\n#### Boosts\n![download 3](https:\/\/user-images.githubusercontent.com\/13174586\/48753452-0c558600-ecb4-11e8-8af4-ff2c1811a522.jpg)\n#### Boosts are always required for inflicting more damage to opponents and run faster. It mostly helps in attacks\n#### Heals are required to treat the palyer himself when dealt with wounds or too much damage. We can see drop in win percentage with high heal usage. This typically happens when palyers enter in combat or being spotted while entering safe zone at the near end moments","2fe9c9d1":"# PUBG Exploratory Data Analysis\n\n![pubg](https:\/\/user-images.githubusercontent.com\/13174586\/48706353-01eaac00-ec22-11e8-9800-5bd0f645ad9f.jpg)","c5d2a923":"#### Explained Variance- R-Squared","18ef8c0d":"#### Create Regression model object","f3fa5d54":"### Relation between Vehicle Destroys, Kills and Win Place\n![images 2](https:\/\/user-images.githubusercontent.com\/13174586\/48754611-4aed3f80-ecb8-11e8-9499-3b782106f5f6.jpg)","84fe7175":"#### Missing Values in: \n### test_Y\n#### Will impute with mean"}}