{"cell_type":{"2d5de656":"code","9376b5a5":"code","1b2ad2a2":"code","4d8c21b3":"code","b13cd873":"code","4257444c":"code","6ea00316":"code","fca8775b":"code","807c3895":"code","272ba9d5":"code","3ee02bd7":"code","4d0966c7":"code","b2d6fbe1":"markdown","d06ba858":"markdown","4e94140c":"markdown","21baa3e8":"markdown","a1f33c1f":"markdown","88224dea":"markdown","cf6085d3":"markdown"},"source":{"2d5de656":"import numpy as np\nimport torch\nfrom torch.autograd import Variable","9376b5a5":"# \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e requires_grad \u0433\u043e\u0432\u043e\u0440\u0438\u043c pytorch, \u0447\u0442\u043e \u0442\u0430\u043c \u043d\u0443\u0436\u043d\u044b \u0433\u0440\u0430\u0434\u0438\u0435\u043d\u0442\u044b\nx = torch.ones(2, 2, requires_grad=True)\nprint(x)","1b2ad2a2":"# \u0442\u0435\u043f\u0435\u0440\u044c \u0443 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043c\u044b \u0441\u043b\u0435\u0434\u0438\u043c \u0437\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438 \u043e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\ny = x + 2\nprint(y)","4d8c21b3":"# \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u044d\u0442\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0432 \u044f\u0432\u043d\u043e\u043c \u0432\u0438\u0434\u0435\nprint(y.grad_fn)","b13cd873":"# \u043f\u043e\u043b\u0443\u0447\u0438\u043c \u0442\u0435\u043f\u0435\u0440\u044c \u043e\u0434\u043d\u043e \u0447\u0438\u0441\u043b\u043e out, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0431\u0443\u0434\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439 x\nz = y * y * 3\nout = z.mean()\n\nprint(out)\nprint(z)\n","4257444c":"a = torch.randn(2, 2)\na = ((a * 3) \/ (a - 1))\nprint('a.requires_grad:',a.requires_grad)\nb = (a * a).sum()\nprint('b.grad_fn:', b.grad_fn)\nprint()\n# \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0430\u0442\u0440\u0438\u0431\u0443\u0442 requires_grad \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u044b\na.requires_grad_(True)\nprint('a.requires_grad:',a.requires_grad)\nb = (a * a).sum()\nprint('b.grad_fn:', b.grad_fn)\n","6ea00316":"value = 5.\nx = torch.tensor([value], requires_grad=True)\ny = x*x\ny.backward() # Run the calculation of derivates \n\nprint(x.grad) # Returns value of the derivate of y with respect to x at point \"value\" ,i.e. for y=x^2 , returns 2*value\n\nvalue = 2.\nx = torch.tensor([value], requires_grad=True)\ny = x*x*x\ny.backward()\nprint(x.grad) # Returns value of the derivate of y with respect to x at point \"value\" ,i.e. for y=x^3 , returns 3*value*value\n","fca8775b":"x1 = torch.tensor([5.], requires_grad=True)\nx2 = torch.tensor([2.], requires_grad=True)\ny = x1*x1+x2*x2\ny.backward()\nprint(x1.grad)\nprint(x2.grad)","807c3895":"x = torch.tensor([1.], requires_grad=True)\ny = x*x\nw = torch.tensor([10.], dtype=torch.float) # Other point where derivative dy\/dx will be evaluated\ny.backward(w)\nprint(w.grad)\nprint(x.grad) # Returns 20 i.e. 2*x|at point x = w (=10)\nprint(x)\n","272ba9d5":"x = torch.tensor([1.,2,3], requires_grad=True)\ny = torch.sum(x*x)\ny.backward()\nprint(x.grad)\n","3ee02bd7":"x = torch.tensor([1.], requires_grad=True)\ny = x*x\nw = torch.tensor([10.], dtype=torch.float)\ny.backward(w)\nprint(w.grad)\nprint(x.grad)","4d0966c7":"x = torch.tensor([1.], requires_grad=True)\n\nprint(x.requires_grad)\nprint((x ** 2).requires_grad)\n\nwith torch.no_grad():\n    print((x ** 2).requires_grad)","b2d6fbe1":"# Calculation of derivate at the other point (not the initial value of x)\n\nThat is a little messy - the value of x.grad will be evaluated at point \"w\" , but stored to as x.grad, NOT w.grad","d06ba858":"# Autograd","4e94140c":"### Vector example","21baa3e8":"# What is about ?\n\nSome examples to use torch autograd - calculation of derivatives in automatic mode\n","a1f33c1f":"### Scalar example like y=x^2 ","88224dea":"# How to calculate derivatives","cf6085d3":"### Further examples"}}