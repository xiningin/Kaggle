{"cell_type":{"50971a53":"code","23a1fa77":"code","990e7cd7":"code","cdb91ae6":"code","3b4bd2c8":"code","7c28a7a9":"code","fdb0514a":"code","aa8aa698":"code","b1125cf4":"code","1ad17f1b":"code","5f626bcd":"code","70af85da":"code","3e0b9638":"code","bec772de":"code","fe0382bb":"code","4fa5005a":"code","95146bc2":"code","14a1c583":"code","a8f2ebd7":"code","1978f2f8":"code","38d02c6a":"code","29564ca7":"code","47fec641":"code","e692bb57":"code","0991e0d0":"code","09b84c4a":"code","3f4b2319":"code","b73cac75":"code","11ee9caa":"code","fdfda598":"code","8a009a68":"code","0e51d6d0":"code","e8612cd5":"markdown","75f153c5":"markdown","aa33ea11":"markdown","fba87463":"markdown","17a3a3e3":"markdown","6a362d27":"markdown","d74739c5":"markdown","0358b26d":"markdown","842f2398":"markdown","172332df":"markdown","7fa37490":"markdown","2923d74d":"markdown","33d542cf":"markdown","65f76167":"markdown","4d2d412d":"markdown","4ca6e747":"markdown","ff4f1ec5":"markdown","1a7abd9f":"markdown","00c8dbdd":"markdown","a35c38b1":"markdown","3e5f47fc":"markdown","90cf75d5":"markdown"},"source":{"50971a53":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport plotly.express as px\nimport plotly.graph_objects as go\n\nimport datetime","23a1fa77":"path = '..\/input\/netflix-shows\/netflix_titles.csv'\nnetflix_titles = pd.read_csv(path)\nnetflix_titles.head()","990e7cd7":"netflix_titles.info()","cdb91ae6":"netflix_titles['date_added'] = pd.to_datetime(netflix_titles['date_added'])","3b4bd2c8":"netflix_titles['release_year'] = netflix_titles['release_year'].astype(str)\nnetflix_titles['release_year'] = pd.to_datetime(netflix_titles['release_year'])\nnetflix_titles['release_year'].dt.year","7c28a7a9":"netflix_titles['country'] = netflix_titles['country'].fillna('Unknown')\nnetflix_titles['country'] = [countries[0] for countries in netflix_titles['country'].str.split(',')]\nnetflix_titles['country'].unique()","fdb0514a":"netflix_titles['rating'] = netflix_titles['rating'].replace('NR','UR')\nnetflix_titles['rating'] = netflix_titles['rating'].fillna('UR')\nnetflix_titles['rating'].unique()","aa8aa698":"netflix_titles['duration'] = [int(duration[0]) for duration in netflix_titles['duration'].str.split(' ')]\nnetflix_titles['duration']","b1125cf4":"fig = px.pie(values=netflix_titles['type'].value_counts(), \n             names=netflix_titles['type'].value_counts().index, \n             title='Number total of TV-Shows and Movies in Netflix')\nfig.show()","1ad17f1b":"x = netflix_titles['type'].value_counts().index, \ny = netflix_titles['type'].value_counts()\nprint(x)\nprint(y)","5f626bcd":"def visualise_country(country):\n    if (country == ALL):\n        netflix_titles_vis = netflix_titles\n    \n    else:\n        netflix_titles_vis = netflix_titles[netflix_titles.country == country]\n        \n    fig = px.pie(values=netflix_titles_vis['type'].value_counts(), \n             names=netflix_titles_vis['type'].value_counts().index, \n             title=f'Number total of TV-Shows and Movies from {country}.')\n    fig.show()","70af85da":"import ipywidgets as widgets\nfrom ipywidgets.widgets.interaction import show_inline_matplotlib_plots\n\nALL = 'ALL'\ndef unique_sorted_values_plus_ALL(array):\n    unique = array.unique().tolist()\n    unique.sort()\n    unique.insert(0, ALL)\n    return unique\n\ndropdown_contry = widgets.Dropdown(options = unique_sorted_values_plus_ALL(netflix_titles.country))\noutput_country = widgets.Output()\n\ndef dropdown_country_eventhandler(change):\n    output_country.clear_output()\n    with output_country:\n        display(visualise_country(change.new))\n        \ndropdown_contry.observe(dropdown_country_eventhandler, names='value')\ndisplay(dropdown_contry)","3e0b9638":"display(output_country)","bec772de":"netflix_titles['rating'].unique()","fe0382bb":"order_rating = ['TV-Y', 'TV-Y7', 'TV-Y7-FV', 'G', 'TV-G', 'PG', 'TV-PG', 'PG-13', 'TV-14', 'R', 'NC-17', \n               'TV-MA', 'NR']\n\n\nfig = px.bar(y = netflix_titles['rating'].value_counts(), \n             x = netflix_titles['rating'].value_counts().index,\n             labels = dict(x=\"Rating\", y=\"Total Number\"),\n             title = 'Rating of TV-Shows and Movies in Netflix'\n            )\n\nfig.update_xaxes(categoryorder = 'array', categoryarray= order_rating)\n\nfig.show()\n","4fa5005a":"def group_by_rating(rating):\n    if rating in ['TV-Y', 'TV-Y7', 'TV-Y7-FV', 'G', 'TV-G', 'PG', 'TV-PG']:\n        new_ratin_group = 'Kids'\n    elif rating in ['PG-13', 'TV-14']:\n        new_ratin_group = 'Teens'\n    elif rating in ['R', 'NC-17', 'TV-MA']:\n        new_ratin_group = 'Adults'\n    else:\n        new_ratin_group = 'Unrated'\n    return new_ratin_group \n        \n\nnetflix_titles['rating_group'] = netflix_titles.apply(lambda x: group_by_rating(x['rating']), axis=1)\n\norder_rating = ['Kids', 'Teens', 'Adults', 'Unrated']\n\n\nfig = px.bar(y = netflix_titles['rating_group'].value_counts(), \n             x = netflix_titles['rating_group'].value_counts().index,\n             labels = dict(x=\"Rating\", y=\"Total Number\"),\n             title = 'Rating of TV-Shows and Movies in Netflix'\n            )\n\nfig.update_xaxes(categoryorder = 'array', categoryarray= order_rating)\n\nfig.show()\n    ","95146bc2":"netflix_titles['listed_in'] = netflix_titles['listed_in'].str.split(', ')\nnetflix_titles['listed_in']","14a1c583":"netflix_titles[['category1','category2', 'category3']] = pd.DataFrame(netflix_titles.listed_in.tolist(), \n                                                                      index= netflix_titles.index)\nnetflix_titles.head(5)","a8f2ebd7":"netflix_categories_content = netflix_titles[['type', 'category1','category2', 'category3']]\nnetflix_categories_content","1978f2f8":"netflix_categories_group= pd.get_dummies(netflix_categories_content.set_index('type'), prefix='',prefix_sep='').stack().sum(level=[0,1])\nnetflix_categories_group","38d02c6a":"fig = px.bar(y = netflix_categories_group['TV Show'].sort_values(ascending=False).head(10), \n             x = netflix_categories_group['TV Show'].sort_values(ascending=False).head(10).index,\n             labels = dict(x=\"Category\", y=\"Total Number\"),\n             title = 'The most common categories in TV Shows'\n            )\n\n\nfig.show()","29564ca7":"netflix_categories_group['Movie'].sort_values(ascending=False).head(10)","47fec641":"fig = px.bar(y = netflix_categories_group['Movie'].sort_values(ascending=False).head(10), \n             x = netflix_categories_group['Movie'].sort_values(ascending=False).head(10).index,\n             labels = dict(x=\"Category\", y=\"Total Number\"),\n             title = 'The most common categories in Movies'\n            )\n\nfig.show()","e692bb57":"fig = px.bar(x = netflix_titles[netflix_titles['type']=='TV Show']['duration'].value_counts().index, \n             y = netflix_titles[netflix_titles['type']=='TV Show']['duration'].value_counts())\n\nfig.update_layout(\n    title='Duration of TV Shows',\n    xaxis_title=\"Duration (seasons)\",\n    yaxis_title=\"Total number\",\n    xaxis = dict(\n        tickmode = 'linear',\n        tick0 = 1,\n        dtick = 1)\n)\n\nfig.show()","0991e0d0":"fig = px.histogram(netflix_titles[netflix_titles['type']=='Movie'], x=\"duration\")\n\nfig.update_layout(\n    title='Duration of movies',\n    xaxis_title=\"Duration (min)\",\n    yaxis_title=\"Count\",\n    xaxis = dict(\n        tickmode = 'linear',\n        tick0 = 0,\n        dtick = 15),\n)\n\nfig.update_traces(\n    xbins = dict( # bins used for histogram\n        start = 0,\n        end = 315,\n        size = 15)\n    )\nfig.show()\n","09b84c4a":"netflix_titles['director'] = netflix_titles['director'].fillna('Unknown')\nnetflix_titles['director'] = netflix_titles['director'].str.split(', ')","3f4b2319":"netflix_director = pd.DataFrame(netflix_titles.director.tolist())\nnetflix_director['type'] = netflix_titles['type']","b73cac75":"netflix_director_group= pd.get_dummies(netflix_director.set_index('type'), prefix='',prefix_sep='').stack().sum(level= [0, 1])\nnetflix_director_group","11ee9caa":"fig = px.bar(y = netflix_director_group['TV Show'].sort_values(ascending=False).head(11)[1:], \n             x = netflix_director_group['TV Show'].sort_values(ascending=False).head(11)[1:].index,\n             labels = dict(x=\"Director\", y=\"Total Number\"),\n             title = 'The most common directors in TV Shows'\n            )\n\n\nfig.show()","fdfda598":"fig = px.bar(y = netflix_director_group['Movie'].sort_values(ascending=False).head(11)[1:], \n             x = netflix_director_group['Movie'].sort_values(ascending=False).head(11)[1:].index,\n             labels = dict(x=\"Director\", y=\"Total Number\"),\n             title = 'The most common directors in Movies'\n            )\n\n\nfig.show()","8a009a68":"fig = go.Figure()\n\n# Add traces\nfig.add_trace(go.Scatter(x=netflix_titles.date_added.dt.year.value_counts().sort_index().index, \n                    y=netflix_titles.date_added.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='Total'))\nfig.add_trace(go.Scatter(x=netflix_titles[netflix_titles['type']=='Movie'].date_added.dt.year.value_counts().sort_index().index,\n                    y=netflix_titles[netflix_titles['type']=='Movie'].date_added.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='Movies'))\nfig.add_trace(go.Scatter(x=netflix_titles[netflix_titles['type']=='TV Show'].date_added.dt.year.value_counts().sort_index().index,\n                    y=netflix_titles[netflix_titles['type']=='TV Show'].date_added.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='TV Shows'))\n\nfig.update_layout(\n    title='Content added in Netflix',\n    xaxis_title=\"Year\",\n    yaxis_title=\"Total number\",\n    xaxis = dict(\n        tickmode = 'linear',\n        tick0 = 2008,\n        dtick = 1),\n)\n\n\nfig.show()","0e51d6d0":"fig = go.Figure()\n\n# Add traces\nfig.add_trace(go.Scatter(x=netflix_titles.release_year.dt.year.value_counts().sort_index().index, \n                    y=netflix_titles.release_year.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='Total'))\nfig.add_trace(go.Scatter(x=netflix_titles[netflix_titles['type']=='Movie'].release_year.dt.year.value_counts().sort_index().index,\n                    y=netflix_titles[netflix_titles['type']=='Movie'].release_year.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='Movies'))\nfig.add_trace(go.Scatter(x=netflix_titles[netflix_titles['type']=='TV Show'].release_year.dt.year.value_counts().sort_index().index,\n                    y=netflix_titles[netflix_titles['type']=='TV Show'].release_year.dt.year.value_counts().sort_index(),\n                    mode='lines+markers',\n                    name='TV Shows'))\n\nfig.update_layout(\n    title='Release Year of the content in Netflix',\n    xaxis_title=\"Year\",\n    yaxis_title=\"Total number\",\n    xaxis = dict(\n        tickmode = 'linear',\n        tick0 = 1925,\n        dtick = 5),\n)\n\n\nfig.show()","e8612cd5":"There are some missing values. Some of them are consider as *Unknown* data.","75f153c5":"**- Rating**\n\nThe values 'UR' and 'NR' have the same meaning: Unrated and No rated. So, 'NR' values are replaced by 'UR' in order to unify the variable.\n\nIn addition, the nan values are consider as Unrated too.","aa33ea11":"**- Rating**","fba87463":"Most of the movies are between 90 and 105 minutes long.","17a3a3e3":"# 4. Data Wrangling\n\n- **Release year and date_added**\n\nConvert the date columns in datetime type.\n","6a362d27":"**- Categoies \/ Genre**\n\nThis columns contains between 1 to 3 genres and categories for the movie or TV-show. These categories are separately in three columns: 'category1','category2' and 'category3':","d74739c5":"Dropdown widgets are used to select the country, we want to plot.","0358b26d":"It is possible to group by type and categories","842f2398":"**- Duration**\n\nThe duration for TV Shows are in Seasons, but it is in min for Movies. Only the number of each row will selected:","172332df":"**- Duration**","7fa37490":"- Year added","2923d74d":"**- Release year**","33d542cf":"**- Director**\n","65f76167":"<center><h1> Exploratory data analysis of Netflix content <\/h1><\/center>\n<img src=\"https:\/\/www.enigma-mag.com\/wp-content\/uploads\/2019\/05\/netflix-logo-and-screen-1-1.jpg\" width=\"600px\">","4d2d412d":"Most of the content on Netflix is for Mature Audiences (TV-MA), followed by TV-14 (Parents strongly cautioned). \n\nBut by grouping the classification into Kids ('TV-Y', 'TV-Y7', 'TV-Y7-FV', 'G', 'TV-G', 'PG', 'TV-PG'), Teens ('PG-13', 'TV-14'), Adults ('R', 'NC-17', 'TV-MA') and Unclassified ('UR'), it is possible to have a clearer and more understandable plot.","4ca6e747":"Now it is posible to group the netflix content according catergories.","ff4f1ec5":"# 2. Importing required libraries","1a7abd9f":"# 1. Introduction\n\nThis notebook is intended to analyze and visualize Netflix content. \n\nThe data have been preprocessed for better visualization, which has been done with Plotly.\n\nPlease don't forget to UpVote this notebook if you like it.","00c8dbdd":"# 5. Visualisations\n\n\n**- Movies and TV-shows**","a35c38b1":"# 3. Reading CSV Data","3e5f47fc":"- **Country**\n\nThere are films or TV shows with different countries, only the first country is selected. The Nan values are filled with 'Unknown'.","90cf75d5":"It can be concluded that there are more Movies than TV-shows. Now, we want to represent the Movies ans TV-shows by country.\n\n`visualise_country` is a function that represent the number of TV-shows and movies for the selected country."}}