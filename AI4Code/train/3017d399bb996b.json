{"cell_type":{"c6494610":"code","dce0e213":"code","545dc427":"code","2adfd281":"code","ad7df881":"code","97295412":"code","852f7554":"code","4c00539f":"code","a8139584":"code","eeeb8bdc":"code","202f1cfd":"code","69eba9c7":"code","c9369445":"code","eaee5c1d":"code","2fe79422":"code","52b7a2bb":"code","97dc22f8":"code","fbb8451a":"code","46695fef":"code","1aab7c3b":"code","847e5edc":"code","93a68c28":"code","a0a6a189":"code","1853fe84":"code","1b23f828":"code","c7057298":"markdown","c5c9efb6":"markdown","1ea70d42":"markdown","cf04d62e":"markdown","dca563ec":"markdown","6c54e849":"markdown","8d83bd3b":"markdown","a12c93f8":"markdown","206429c8":"markdown","ecaa2bda":"markdown","a8b51e55":"markdown","c74df233":"markdown","4d9f7428":"markdown","5f8e645b":"markdown","75f422e9":"markdown","36d62052":"markdown","e688a2ee":"markdown","32f13f96":"markdown"},"source":{"c6494610":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\npd.set_option('display.max_colwidth', -1)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","dce0e213":"data=pd.read_csv('..\/input\/widsdatathon2021\/TrainingWiDS2021.csv',index_col=0)\ndata.head()","545dc427":"pd.set_option('display.max_rows', 200)\ndf_dict=pd.read_csv('..\/input\/widsdatathon2021\/DataDictionaryWiDS2021.csv')\ndf_dict","2adfd281":"#Checking if all columns in dictionary exist in data\nset(df_dict['Variable Name'].str.lower())-set(data.columns.str.lower())","ad7df881":"#Checking if all columns in data exist in dictionary\nset(data.columns.str.lower())-set(df_dict['Variable Name'].str.lower())","97295412":"df_dict=df_dict[df_dict['Variable Name'].isin(data.columns)]\ndf_dict.shape","852f7554":"data.shape\n#This is aligned now","4c00539f":"\ndf_dict['Data Type'].value_counts()","a8139584":"#Binary variables are interesting. let's see which ones are these\ndf_dict[df_dict['Data Type']=='binary']","eeeb8bdc":"#Let's create a new mapping for columns\ndatatypes_dict={\n'numeric':float,\n'binary':int,\n'string':str,\n'integer':int\n}","202f1cfd":"df_dict['Data Type_edited']=df_dict['Data Type'].map(datatypes_dict)\ndf_dict['Data Type_edited'].value_counts()\n","69eba9c7":"datatype_edited_dict=dict(zip(df_dict['Variable Name'],df_dict['Data Type_edited']))\ndatatype_edited_dict","c9369445":"data=data.fillna(-999).astype(datatype_edited_dict)","eaee5c1d":"!pip install sweetviz\nimport sweetviz as sv\n#analyzing the dataset\ndata_report = sv.analyze(data,target_feat='diabetes_mellitus') # if you dont pass a target feature, its okay.\n#display the report in output folder\n# data_report.show_html('Wids2021')","2fe79422":"#Display the output in notebook\ndata_report.show_notebook()","52b7a2bb":"#defining the target column and setting its dtype as string\ntarget_col='diabetes_mellitus'\ndata[target_col]=data[target_col].astype('str')","97dc22f8":"#importing seaborn and setting some parameters\n# import seaborn as sns\n\n# sns.set(style='whitegrid', palette=\"deep\", font_scale=1.1, rc={\"figure.figsize\": [8, 5]})","fbb8451a":"##`pairplot()` may become very slow with the SVG format\n%config InlineBackend.figure_format = 'png' ","46695fef":"#making a list of all categorical variables and making countplots\ncategorical=set(data.select_dtypes(exclude=['float64','int64']).columns)-set(target_col)","1aab7c3b":"corr = data.corr()\nimport matplotlib.pyplot as plt\n\nkot = corr[corr>=.8]\nplt.figure(figsize=(12,8))\nsns.heatmap(kot, cmap=\"Greens\")","847e5edc":"#Viewing highly correlated columns\ndef corrFilter(x: pd.DataFrame, bound: float):\n    xCorr = x.corr()\n    xFiltered = xCorr[((xCorr >= bound) | (xCorr <= -bound)) & (xCorr !=1.000)]\n    xFlattened = xFiltered.unstack().sort_values().drop_duplicates()\n    return xFlattened\n\ncorrcols=corrFilter(data.drop(columns=target_col), .8)\ncorrcols","93a68c28":"#Spearman Correlation with target\ndata.select_dtypes(include=['float64','int64']).corrwith(data[target_col],method='spearman').sort_values(ascending=False)","a0a6a189":"df_dict[df_dict['Variable Name']=='d1_bun_min'].Description","1853fe84":"glucose_cols=[x for x in data.columns if 'glucose' in x]\n#This is expcted. Diabetes is indicated by high blood sugar\ndata.groupby([target_col])[glucose_cols].describe().T","1b23f828":"pd.set_option('display.max_colwidth', -1)\ndf_dict[df_dict['Variable Name']=='d1_glucose_max'].Description","c7057298":"Hi,\nWhy predict Diabetes at all,you ask? This is the same question as I has,and it was answered by the WiDS Team beautifully:\n\n*A pre-screen is itself a model that predicts the probability of Diabetes. It also depends on the full dataset of patient history. A full patient history is often not a viable option- particularly in the ER. Also trauma patients can be non-communicative but they still need to be rapidly treated (perhaps surgery) in a manner which requires knowledge of diabetic condition.\nDoctors in ER have the difficult challenge of predicting Diabetes based on limited in-care patient data (which is the dataset provided in this year's dataton challenge.) This prediction affects the trajectory of patient care. The consequences of wrong prediction in ER are quite substantial-- people who haven't been exposed to insulin previously shouldn't be unnecessarily exposed.\nThis is a very serious ER problem based on real-world data limitations-- that is one of the key highlights of the WiDS Datathon 2021 challenge.*\n\nI have a family history od Diabetes,and by oservation I can say it affects one's quality of life,wounds heal a lot slower and immunity takes a hit. Hence,patient care becomes even more critical.\n\nAs they say,know thy enemy.\nIt is important to understand the data before attempting to build models on it.Hence, this notebook is a starting point for beginners and veterans alike.\n\n**If you fork it or find this useful, Please upvote the notebook and leave comments**","c5c9efb6":"This looks more workable. Now let's create a dictionary and use it to change datatypes of all columns at once.","1ea70d42":"# DIABETES MELLITUS PREDICTION","cf04d62e":"# Graphical EDA\n\nA picture is worth a thousand words.Let's try slicing and dicing the data some more.","dca563ec":"Correlation is a statistic that measures the degree to which two variables move in relation to each other.It does not imply causation.","6c54e849":"This is messy. Lets fix that","8d83bd3b":"Now I'll use this info to make EDA easier ","a12c93f8":"I will be using AutoML library called SweetViz for Exploratory Data Analysis.\n\n**Sweetviz is an open-source Python library that generates beautiful, high-density visualizations to kickstart EDA (Exploratory Data Analysis) with a single line of code. The output is a fully self-contained HTML application. The system is built around quickly visualizing target values and comparing datasets. Its goal is to help quick analysis of target characteristics, training vs testing data, and other such data characterization tasks.** \n\nRead more about it here:\nhttps:\/\/pypi.org\/project\/sweetviz\/\n\n> *The next block of code takes a while to run so grab some coffee,or water (you need to Hydrate!)*","206429c8":"Notice how the intended Datatype has been given. Let's look at how many variables are there of each type and then typecast accordingly.","ecaa2bda":"# Reading the data Dictionary","a8b51e55":"# References\n1. https:\/\/towardsdatascience.com\/how-to-perform-exploratory-data-analysis-with-seaborn-97e3413e841d\n2. https:\/\/www.kaggle.com\/usharengaraju\/widsdatathon2021-catboost-starter\n3. https:\/\/towardsdatascience.com\/powerful-eda-exploratory-data-analysis-in-just-two-lines-of-code-using-sweetviz-6c943d32f34\n4. https:\/\/www.mathsisfun.com\/data\/correlation.html#:~:text=When%20two%20sets%20of%20data,decreases%20as%20the%20other%20increases\n5. https:\/\/www.kaggle.com\/kashnitsky\/topic-2-part-2-seaborn-and-plotly","c74df233":"# Reading the Data","4d9f7428":"# THANKS!!","5f8e645b":"Same can be done for Blood urea Nitrogen and creatinin.\nIt would be awesome to have ranges ( max-min) in features because That is how we read those reports.","75f422e9":"<H2> Correlation Matrix","36d62052":"# Typecasting variables according to data dictionary","e688a2ee":"I know from reading my family's report that glucose levels are tested. Hence,lets see those.","32f13f96":"This appears to be an extra column. Lets remove it from the dictionary."}}