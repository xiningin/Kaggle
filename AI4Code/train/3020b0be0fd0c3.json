{"cell_type":{"d8b8020c":"code","d7a4db37":"code","83d37366":"code","190630bb":"code","0141dfed":"code","a8f4b4e9":"code","e785b41f":"code","899b9d79":"code","a796c508":"code","297918be":"code","e6b73330":"code","7d78841c":"code","c998740b":"code","549b185c":"code","f305377f":"code","56b89406":"code","db46e1bb":"code","87e4d7f7":"code","4492321a":"code","b0af2ed1":"code","41ae99cb":"code","e5e56e97":"code","2e01116f":"code","d62e974a":"markdown","17017e3c":"markdown","5a427684":"markdown","1986ab97":"markdown","dd68a3c4":"markdown","d8a7f762":"markdown","d50130eb":"markdown"},"source":{"d8b8020c":"import numpy as np\nimport pandas as pd\npd.set_option(\"display.max_columns\", 100)\n\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\n%matplotlib inline\n\nfrom category_encoders import CountEncoder\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.metrics import mean_absolute_error\nfrom sklearn.model_selection import KFold\n\nfrom tqdm.notebook import tqdm\nfrom xgboost import XGBRegressor\nimport cv2\n\nfrom scipy import stats\nfrom scipy.special import boxcox, inv_boxcox\nimport seaborn as sns","d7a4db37":"# \u30e1\u30a4\u30f3\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u898b\u307e\u3059\ndf_train = pd.read_csv('\/kaggle\/input\/data-science-autumn-2021\/train.csv', parse_dates=['latest_saledate'])\ndf_test = pd.read_csv('\/kaggle\/input\/data-science-autumn-2021\/test.csv', parse_dates=['latest_saledate'])","83d37366":"#\u5143\u30c7\u30fc\u30bf\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3001\u6b6a\u5ea6\u3001\u5c16\u5ea6\n\nsns.histplot(df_train['latestPrice'])\nprint(f\"\u6b6a\u5ea6: {round(np.log(df_train['latestPrice']).skew(),4)}\" )\nprint(f\"\u5c16\u5ea6: {round(np.log(df_train['latestPrice']).kurt(),4)}\" )","190630bb":"# \u8aac\u660e\u5909\u6570\u3068\u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u6570\u306b\u5206\u5272\u3057\u3066\u304a\u304d\u307e\u3059\n# \u30c6\u30ad\u30b9\u30c8\u3068\u753b\u50cf\u4e00\u65e6\u9664\u3044\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u3089\u306e\u6271\u3044\u306b\u3064\u3044\u3066\u306f\u672c\u30b3\u30f3\u30da\u3092\u901a\u3058\u3066\u5b66\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u307e\u305f\u3001\u65e5\u4ed8\u3082year\u3068month\u304c\u65e2\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u4e00\u65e6\u4f7f\u308f\u306a\u3044\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\ny_train = np.array(df_train.latestPrice)\nX_train = df_train.drop(['latestPrice', 'description', 'homeImage', 'latest_saledate'], axis=1)\nX_test = df_test.drop(['description', 'homeImage', 'latest_saledate'], axis=1)","0141dfed":"# \u8aac\u660e\u5909\u6570\u3068\u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u6570\u306b\u5206\u5272\u3057\u3066\u304a\u304d\u307e\u3059\n# \u30c6\u30ad\u30b9\u30c8\u3068\u753b\u50cf\u4e00\u65e6\u9664\u3044\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u3089\u306e\u6271\u3044\u306b\u3064\u3044\u3066\u306f\u672c\u30b3\u30f3\u30da\u3092\u901a\u3058\u3066\u5b66\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u307e\u305f\u3001\u65e5\u4ed8\u3082year\u3068month\u304c\u65e2\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u4e00\u65e6\u4f7f\u308f\u306a\u3044\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\nyy_train = np.array(df_train.latestPrice)\nXX_train = df_train.drop(['latestPrice', 'description', 'homeImage', 'latest_saledate'], axis=1)\nXX_test = df_test.drop(['description', 'homeImage', 'latest_saledate'], axis=1)","a8f4b4e9":"#\u3000Box-cox\u5909\u63db\nlamdaChk = stats.boxcox(y_train) #lamda\u306farray\u306e\u6700\u5f8c\u306e\u6570\u5b57\ny_train = stats.boxcox(y_train,-0.09634165661421486)\nprint(lamdaChk)","e785b41f":"X_train = pd.DataFrame(X_train)\nX_test = pd.DataFrame(X_test)\ny_train = pd.Series(y_train)","899b9d79":"# \u7279\u5fb4\u91cf\u306e\u30c7\u30fc\u30bf\u5206\u5e03\ny_train.describe()","a796c508":"#Box-cox\u5909\u63db\u5f8c\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3001\u6b6a\u5ea6\u3001\u5c16\u5ea6\n\nsns.histplot(y_train)\nprint(f\"\u6b6a\u5ea6: {(y_train).skew()}\" )\nprint(f\"\u5c16\u5ea6: {(y_train).kurt()}\" )","297918be":"XX_train = pd.DataFrame(XX_train)\nXX_test = pd.DataFrame(XX_test)\nyy_train = pd.Series(yy_train)","e6b73330":"# \u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u5bfe\u6570\u5909\u63db\n\ny = yy_train.values\nyy_train = np.log(y)","7d78841c":"XX_train = pd.DataFrame(XX_train)\nXX_test = pd.DataFrame(XX_test)\nyy_train = pd.Series(yy_train)","c998740b":"# \u7279\u5fb4\u91cf\u306e\u30c7\u30fc\u30bf\u5206\u5e03\nyy_train.describe()","549b185c":"#\u5bfe\u6570\u5909\u63db\u5f8c\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3001\u6b6a\u5ea6\u3001\u5c16\u5ea6\n\nsns.histplot(yy_train)\nprint(f\"\u6b6a\u5ea6: {(yy_train).skew()}\" )\nprint(f\"\u5c16\u5ea6: {(yy_train).kurt()}\" )","f305377f":"# \u3044\u3088\u3044\u3088\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u4e88\u6e2c\u3057\u307e\u3059\n#y_pred_test = model.predict(X_test)\n#y_pred_test_BC = inv_boxcox(y_pred_test,-0.09634165661421486)\n#y_pred_test_BC","56b89406":"#\u3000\u5916\u308c\u5024\u3092\u524a\u9664\ny_train = y_train.drop(y_train[(y_train > 8.5)].index)\ny_train = y_train.drop(y_train[(y_train < 6.5)].index)","db46e1bb":"#\u3000Box-cox\u5909\u63db\nlamdaChk = stats.boxcox(y_train) #lamda\u306farray\u306e\u6700\u5f8c\u306e\u6570\u5b57\ny_train = stats.boxcox(y_train,-4.466498289106891)\nprint(lamdaChk)","87e4d7f7":"X_train = pd.DataFrame(X_train)\nX_test = pd.DataFrame(X_test)\ny_train = pd.Series(y_train)","4492321a":"#Box-cox\u5909\u63db\u5f8c\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3001\u6b6a\u5ea6\u3001\u5c16\u5ea6\n\nsns.histplot(y_train)\nprint(f\"\u6b6a\u5ea6: {(y_train).skew()}\" )\nprint(f\"\u5c16\u5ea6: {(y_train).kurt()}\" )","b0af2ed1":"#\u3000\u5916\u308c\u5024\u3092\u524a\u9664\nyy_train = yy_train.drop(yy_train[(yy_train > 16.0)].index)\nyy_train = yy_train.drop(yy_train[(yy_train < 11.0)].index)","41ae99cb":"yy_train = pd.Series(yy_train)\n# \u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u5bfe\u6570\u5909\u63db\n\ny = yy_train.values\nyy_train = np.log(y)","e5e56e97":"yy_train = pd.Series(yy_train)","2e01116f":"#\u5bfe\u6570\u5909\u63db\u5f8c\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3001\u6b6a\u5ea6\u3001\u5c16\u5ea6\n\nsns.histplot(yy_train)\nprint(f\"\u6b6a\u5ea6: {(yy_train).skew()}\" )\nprint(f\"\u5c16\u5ea6: {(yy_train).kurt()}\" )","d62e974a":"DataFlame\u578b\u306b\u76f4\u3059","17017e3c":"Box-cox\u5909\u63db\u5f8c\u306e'latestPrice'\u306e\u5206\u5e03\u898b\u308b","5a427684":"\u5bfe\u6570\u5909\u63db\u3092\u5b9f\u884c\u3059\u308b","1986ab97":"\u5909\u63db\u3059\u308b\u5bfe\u8c61\u3092DataFlame\u578b\u306b\u76f4\u3059","dd68a3c4":"\u3010\u53c2\u8003\u3011Boxcox\u578b\u304b\u3089\u5143\u306b\u623b\u3059\u3002\u03bb\u306f\u5909\u63db\u6642\u306b\u7b97\u51fa\u3057\u305f\u5024\u3092\u5165\u529b","d8a7f762":"\u5bfe\u6570\u5909\u63db\u5f8c\u306e'latestPrice'\u306e\u5206\u5e03\u898b\u308b","d50130eb":"Boxcox\u5909\u63db\u3092\u5b9f\u884c\u3059\u308b\uff08\u03bb\u306f\u4e8b\u524d\u306b\u7b97\u51fa\u3057\u3066\u5165\u529b\uff09"}}