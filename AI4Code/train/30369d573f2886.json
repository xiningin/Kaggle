{"cell_type":{"18d961b8":"code","2281db6b":"code","762a1541":"code","21946515":"code","ee7acccf":"code","18f7677e":"code","15ace8c9":"code","fb69ab2b":"code","602f4291":"code","a3e2404f":"code","83684aec":"code","d682aa55":"code","b55af3bb":"code","94c22cc7":"markdown","58f1576e":"markdown","7629addc":"markdown","3cdf6737":"markdown","082a9e58":"markdown","ea8c22f0":"markdown","9e2f5ecc":"markdown","e62b184d":"markdown","06c94d5b":"markdown","6ba4b85e":"markdown"},"source":{"18d961b8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","2281db6b":"df = pd.read_csv(\"\/kaggle\/input\/fifa-21-complete-player-dataset\/fifa21_male2.csv\")\n","762a1541":"positions = [[[\"GK\"],1],[[\"CB\"],2],[[\"LB\",\"LWB\"],1],[[\"RB\",\"RWB\"],1],[[\"LW\"],2],[[\"RW\"],2],[[\"ST\",\"CF\"],2],[[\"LM\",\"RM\",\"CAM\",\"CM\",\"CDM\"],5]]\n","21946515":"def club(club):\n    #df_a = pd.DataFrame()\n    array = []\n    dfPor = df[df[\"Club\"] == club]\n    for dictionary in positions:\n        df_x = dfPor[dfPor.BP.isin(dictionary[0])]\n        df_x = df_x.sort_values(by = [\"OVA\"],ascending = False).iloc[0:dictionary[1],:]\n        array.append(df_x)\n\n    return(pd.concat(array))","ee7acccf":"def superstars(x):\n    if x >= 87:\n        return 1\n    else:\n        return 0\n    \ndef youngsters(x):\n    if x <= 22:\n        return 1\n    else:\n        return 0\ndf[\"Superstars\"] = df.OVA.apply(superstars)\ndf[\"Potential Superstars\"] = df.POT.apply(superstars)","18f7677e":"def cleaning(x):\n    try:\n        x = x.replace(\"\u20ac\",\"\")\n        x = x.replace(\"K\",\"000\")\n        if ((\".\" and \"M\") in x):\n            x = x.replace(\"M\",\"\")\n            x = float(x) * 1000000\n        else:\n            x = x.replace(\"M\",\"000000\")\n        return int(x)\n    except:\n        return x\ndf.Wage = df.Wage.apply(cleaning)\ndf.Value = df.Value.apply(cleaning)\n","15ace8c9":"#england spain germany france italy\n#liv manc manu che\n#real #bar #atm #sev\n#bay #dor #leipzig #mochengladbach\n#psg #marseille #rennes #lille\n#juventus inter atalanta lazio\nclubs = [[\"Liverpool\",\"England\"],[\"Manchester City\",\"England\"],[\"Manchester United\",\"England\"],[\"Chelsea\",\"England\"],\n         [\"Leicester City\",\"England\"],[\"Tottenham Hotspur\",\"England\"],\n         [\"Real Madrid\",\"Spain\"],[\"FC Barcelona\",\"Spain\"],[\"Atl\u00e9tico Madrid\",\"Spain\"],[\"Sevilla FC\",\"Spain\"],\n         [\"Villarreal CF\",\"Spain\"],[\"Real Sociedad\",\"Spain\"],\n        [\"FC Bayern M\u00fcnchen\",\"Germany\"],[\"Borussia Dortmund\",\"Germany\"],[\"RB Leipzig\",\"Germany\"],[\"Borussia M\u00f6nchengladbach\",\"Germany\"],\n         [\"Bayer 04 Leverkusen\",\"Germany\"],[\"TSG 1899 Hoffenheim\",\"Germany\"],\n        [\"Paris Saint-Germain\",\"France\"],[\"Olympique de Marseille\",\"France\"],[\"Stade Rennais FC\",\"France\"],[\"LOSC Lille\",\"France\"],\n         [\"OGC Nice\",\"France\"],[\"Stade de Reims\",\"France\"],\n        [\"Juventus\",\"Italy\"],[\"Inter\",\"Italy\"],[\"Atalanta\",\"Italy\"],[\"Lazio\",\"Italy\"],\n        [\"Roma\",\"Italy\"],[\"Milan\",\"Italy\"]]\na = []\nfor country in clubs:\n    a.append([country[0] , np.mean(club(country[0]).OVA),country[1],np.sum(club(country[0]).Wage),np.sum(club(country[0]).Value),np.mean(club(country[0]).Age)])\ncountry = pd.DataFrame(a).rename(columns = {0:\"Club\",1:\"Average OVA\",2:\"Country\",3:\"WageFirstTeam\",4:\"ValueFirstTeam\",5:\"AgeFirstTeam\"}).sort_values(by = \"Average OVA\",ascending = False).reset_index()\ncountry[[\"Club\",\"Average OVA\",\"Country\",\"WageFirstTeam\",\"ValueFirstTeam\",\"AgeFirstTeam\"]]","fb69ab2b":"budget = df.groupby(\"Club\").agg({\"Wage\":\"mean\",\"OVA\":\"mean\",\"Age\":\"mean\",\"Superstars\":\"sum\",\"Potential Superstars\":\"sum\",\"POT\":\"mean\",\"Value\":\"sum\"})\nbudget[\"Wage per rating\"] = budget[\"Wage\"]\/budget[\"OVA\"]\nbudget = budget.sort_values(by = \"Wage per rating\",ascending = False).reset_index()\nteams = budget.merge(country,how = \"inner\",left_on = \"Club\",right_on = \"Club\")\nteams","602f4291":"import matplotlib.pyplot as plt\nplt.figure(figsize = (18,12))\nplt.style.use(\"seaborn\")\nplt.scatter(teams[\"WageFirstTeam\"],teams[\"Average OVA\"],s = teams[\"Value\"]\/200000,c = teams[\"AgeFirstTeam\"],cmap = \"coolwarm\")\nplt.xlabel(\"Wages in Euros\")\nplt.ylabel(\"Average OVA (First Team)\")\nplt.colorbar().set_label(\"Average Age of team\")\n#plt.plot([72,82], [72,82])\nfor i in range(len(teams)):\n    plt.annotate(teams.iloc[i,0],(teams.WageFirstTeam[i]-50000,teams[\"Average OVA\"][i]),color = \"black\")\n\n#plt.figure()\nfrom math import pi\n\nu=2250000     #x-position of the center\nv = 84.75    #y-position of the center\na=1500000    #radius on the x-axis\nb=1.2    #radius on the y-axis\n#plt.annotate(\"Tier 1\",(2250000+1600000,84.75))\nplt.annotate(\"Tier 1\",(u+a*1.05,v),color = \"red\")\n\n\n\nt = np.linspace(0, 2*pi, 100)\nplt.plot( u+a*np.cos(t) , v+b*np.sin(t) )\n#plt.grid(color='lightgray',linestyle='--')\n\n\nu=1000000     #x-position of the center\nv = 82.25    #y-position of the center\na=880000    #radius on the x-axis\nb=1.65    #radius on the y-axis\nplt.annotate(\"Tier 2\",(u+a*1.05,v),color = \"red\")\nt = np.linspace(0, 2*pi, 100)\nplt.plot( u+a*np.cos(t) , v+b*np.sin(t) )\n#plt.grid(color='lightgray',linestyle='--')\n\n\nu=800000     #x-position of the center\nv = 79.6    #y-position of the center\na=520000    #radius on the x-axis\nb=1.20    #radius on the y-axis\nplt.annotate(\"Tier 3\",(u+a*1.05,v),color = \"red\")\nt = np.linspace(0, 2*pi, 100)\nplt.plot( u+a*np.cos(t) , v+b*np.sin(t) )\n\nu=360000     #x-position of the center\nv = 76.6    #y-position of the center\na=275000    #radius on the x-axis\nb=2.20    #radius on the y-axis\nplt.annotate(\"Tier 4\",(u+a*1.05,v),color = \"red\")\nt = np.linspace(0, 2*pi, 100)\nplt.plot( u+a*np.cos(t) , v+b*np.sin(t) )\n\nplt.title(\"Average Overall Rating of First Team vs Wages\")\nplt.show()\n\n","a3e2404f":"\n\nplt.figure(figsize = (20,6))\nspain = teams[teams[\"Country\"] == \"Spain\"][\"OVA\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"OVA\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"OVA\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"OVA\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"OVA\"]\ndata_a = [spain,england,france,germany,italy]\n\nticks = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"]\n\nplt.subplot(121)\n\n\nbpl = plt.boxplot(data_a,labels = ticks)\nplt.title(\"Average Overall Rating across countries (Present)\")\nplt.annotate(\"PSG\",xytext = (3,78),color = \"blue\",xy = (3,77),arrowprops=dict(color = \"blue\",lw=0.001))\nplt.annotate(\"Bayern\",xytext = (4,80),color = \"blue\",xy = (4,81.4),arrowprops=dict(color = \"blue\",lw=0.001))\nplt.ylabel(\"Rating\")\n\nspain = teams[teams[\"Country\"] == \"Spain\"][\"POT\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"POT\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"POT\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"POT\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"POT\"]\ndata_b = [spain,england,france,germany,italy]\n\nplt.subplot(122)\nbpr = plt.boxplot(data_b,labels = ticks)\nplt.title(\"Average Potential Ratings across countries (Expected in Future)\")\nplt.ylabel(\"Rating\")\n\n\n\n\nplt.show()","83684aec":"plt.figure(figsize = (20,6))\nspain = teams[teams[\"Country\"] == \"Spain\"][\"Wage\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"Wage\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"Wage\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"Wage\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"Wage\"]\narray = [spain,england,france,germany,italy]\n\n\nplt.subplot(121)\nplt.boxplot(array,labels = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"])\nplt.title(\"Wage distribution across countries\")\nplt.ylabel(\"Wages in Euros\")\n\n\nspain = teams[teams[\"Country\"] == \"Spain\"][\"Value\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"Value\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"Value\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"Value\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"Value\"]\narray = [spain,england,france,germany,italy]\n\nplt.subplot(122)\nplt.boxplot(array,labels = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"])\nplt.title(\"Distribution of team value across countries\")\nplt.ylabel(\"Team Value in Euros\")\n\nplt.show()","d682aa55":"plt.figure(figsize = (20,6))\nspain = teams[teams[\"Country\"] == \"Spain\"][\"Superstars\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"Superstars\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"Superstars\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"Superstars\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"Superstars\"]\narray = [spain,england,france,germany,italy]\n\nplt.subplot(121)\nplt.boxplot(array,labels = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"])\nplt.title(\"Superstars across countries\")\nplt.ylabel(\"Superstars\")\n\nspain = teams[teams[\"Country\"] == \"Spain\"][\"Potential Superstars\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"Potential Superstars\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"Potential Superstars\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"Potential Superstars\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"Potential Superstars\"]\narray = [spain,england,france,germany,italy]\n\nplt.subplot(122)\nplt.boxplot(array,labels = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"])\nplt.title(\"Potential Superstars across countries\")\nplt.ylabel(\"Superstars\")\n\nplt.show()","b55af3bb":"plt.figure()\nspain = teams[teams[\"Country\"] == \"Spain\"][\"Age\"]\nengland = teams[teams[\"Country\"] == \"England\"][\"Age\"]\nfrance = teams[teams[\"Country\"] == \"France\"][\"Age\"]\ngermany = teams[teams[\"Country\"] == \"Germany\"][\"Age\"]\nitaly = teams[teams[\"Country\"] == \"Italy\"][\"Age\"]\narray = [spain,england,france,germany,italy]\n\nplt.boxplot(array,labels = [\"Spain\",\"England\",\"France\",\"Germany\",\"Italy\"])\nplt.title(\"Age distribution across countries\")\nplt.ylabel(\"Age in years\")\nplt.show()","94c22cc7":"Above shown boxplots depects that leagues in **France** and **Germany** are clearly dominated by single team as **PSG** and **Bayern** have their OVA well above the third quartile of their counterparts *(Farmer's league again?)*. Difference between 1st and 6th team is least in case of **England** implying Premier League to be **most competitive** among all. As seen in POTENTIAL, five teams excluding Leicester City will be the potential contender for the title owing to decrease in gap between 1st and 5th.Unlike Series A (Italy), La liga (Spain) have uniform distribution of teams towards both sides of the median value. But the gap tends to increase in future in Spanish league. Reason for this is the aggressive appproach of **Barcelona** and **Real Madrid** to bolster the squad. As of today, Italian league doesn't have much difference between 1st and 6th team but **Juventus** has the potential to **dominate** the Italian league in future.","58f1576e":"**Italy** has the highest average age and **France** has the lowest. Spain, England and Germany has average age around 25 years which is considered as the golden age for a Football player. This implies that generally players spend their **peak years** in Spanish, English or German leagues and move on to Italy once they have passed their peak *(Vidal,Padelli,etc)*. French league produces young players.*(Likes of Benzema, Hazard, Mbappe, Camavinga have spent their tender years in French league)*","7629addc":"Analysis is carried out for the First team Squad and not for whole squad.\nFirst team squad is chosen as follows:\n\n* 'GK': 1 \n* 'CB': 2\n*  'LB'\/ 'LWB': 1\n*  'RB'\/ 'RWB': 1\n*  'LW': 2\n*  'RW': 2\n*  'ST'\/ 'CF': 2\n*  'LM'\/ 'RM'\/ 'CAM'\/ 'CM'\/ 'CDM': 5\n\nNote that the tactical changes are made in midfield or attack, that's why back ups are chosen for these positions only and not in defence.","3cdf6737":"**Real Madrid** and **FC Barcelona** are spending the highest upon the **wages** trying their best to beat each other *(Greatest Rivalry)*. Wheras **Liverpool** has the highest rated First Team Squad followed by **Manchester City**.\n**Atletico Madrid** manages a seat in Tier 1 spending the **least amount of money** among Tier 1 clubs. *(Simione still has magic left in him)*.\n**Manchester United, Tottenham Hotspur and Inter** are the most **disappointed** clubs as they are spending equal amount as many Tier 1 clubs but they find themselves stuck in Tier 2. Howevever they do show the **intent** to join Tier 1 unlike Sevilla FC,who spends even less than Tier 3 clubs.\n**Sevilla** manages a squad with equal rating as **Manchester United** but they get the job done spending less than **half the money** compared to Manchester United.\n**Juventus** and **Roma** has the **oldest squad** having team average age of 30 years. **Manchester United** and **RB Leipzig** have the **youngest** squad. **Chelsea** is most likely to jump to Tier 1 as they have relatively young squad with high team value *(Hope Lampard does justice to their active participation in transfer window)*. **PSG** is the only team from **France** not belonging to Tier 4. (*Farmer's league,huh?*)\n\nNote that value of the squad depends upon Overall rating and averge age. Lower the average age higher the value as seen in case of Sevilla and Manchester United *(Both clubs have same OVA but Manchester United has younger squad and thus valued highly)*.","082a9e58":"Based upon the Average Overall Rating teams can be classified in 4 tiers. \n*  **Tier 1:** Liverpool, Manchester City, Real Madrid, FC Barcelona, FC Bayern Munchen, Paris Saint Germain,Atletico Madrid and Juventus\n\n> England: 2  \n> Spain: 3  \n> France: 1  \n> Germany: 1  \n> Italy: 1 \n\n\n* **Tier 2:** Chelsea, Manchester United, Dortmund, Inter Milan, Tottenham Hotspur, Sevilla FC\n> England: 3  \n> Spain: 1  \n> France: 0  \n> Germany: 1  \n> Italy: 1\n\n\n\n* **Tier 3:** Lazio,Leicester City, Real Sociedad, Villareal, Bayer Leverkusen, AC Milan, Mochengladbach, RB Leipzig\n> England: 1  \n> Spain: 2  \n> France: 0  \n> Germany: 3  \n> Italy: 2\n\n* **Tier 4 :** Roma, Lille, Hoffenheim, Marseille, Rennais, Nice, Reims\n> England: 0  \n> Spain: 0  \n> France: 5   \n> Germany: 1  \n> Italy: 1   ","ea8c22f0":"# Comparing Top 6 teams from each of Top 5 leagues\n\n\nFootball, most followed sport in the world is dominated by European Leagues. These leagues are known for financial status,acquiring top talents, fierce rivalries and  nail biting endings.","9e2f5ecc":"Highest difference among wages is seen in **Laliga** (Spain) and least in **Premier League** (England). France and Germany are dominated by single clubs in case of wages and value as well. **England** has highest median wage and median value followed by **Spain**.\nMean wages and value are almost same for **Bundesliga** (Germany) and **Serie A** (Italy).\n\n![image.png](attachment:image.png)","e62b184d":"**Superstars** are defined as the players having **rating equal to or above 87**. PSG is the only club from **France** to have superstar. However other French club has players expected to be superstars in future. **England** has highest number of Superstar and Potential Superstar.","06c94d5b":"Scatterplot below having Wages at X-axis, Overall rating of First Team on Y-axis helps us find out how club are doing with respect to input and output. Wages can be considered as input or efforts put in by the clubs and Average Overall rating can be considered as output.*(Whatever the club gets from the given wages)* \nSize represents the value of the squad and color represents the average age of squad.\n","6ba4b85e":"![image.png](attachment:image.png)\n\nTop six teams of season 2019-20 from each of Premier League **(England)**, Laliga **(Spain)**, Bundesliga **(Germany)**, Ligue 1 **(France)**, Serie A **(Italy)** are chosen to carry out analysis to find out what each league is known for. \n* **Premier League :** Liverpool, Manchester City, Manchester United, Chelsea, Tottenham Hotspurs, Leicester City.\n* **La Liga:** Real Madrid, FC Barcelona, Atletico Madrid, Sevilla FC, Real Sociedad, Villareal\n* **Bundesliga:** FC Bayern Munchen, Dortmund, RB Leipzig, Mochengladbach, Bayer Leverkusen, Hoffeheim\n* **Ligue 1:** Paris Saint-Germain, Marseille, Rennes, Lille, Nice, Reims\n* **Serie A:** Juventus, Inter, Atalanta, Lazio,Roma, Milan"}}