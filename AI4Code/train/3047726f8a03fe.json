{"cell_type":{"d16e8f18":"code","6443ef89":"code","f8dc6eec":"code","3d9beacf":"code","5064103b":"code","6cddee13":"code","e07b25df":"code","54a56025":"code","b9c61279":"code","765f0506":"code","2ec81d56":"code","25730aaa":"code","6fb3f353":"code","9aa8bbad":"code","efe2ba5b":"code","d4800d94":"code","c7233066":"code","6bc466c8":"code","eba45a44":"markdown","8db21a85":"markdown","c45c5c1c":"markdown","3592a580":"markdown","b8b05c6f":"markdown","014510d9":"markdown","5bee30c4":"markdown","7e4d0cae":"markdown","e31133d5":"markdown","6930dcc5":"markdown","3a78ec40":"markdown","866780a0":"markdown","ff56848e":"markdown"},"source":{"d16e8f18":"%matplotlib inline\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn import metrics\nfrom pandas import set_option\nplt.rcParams['figure.figsize'] = (25,18)","6443ef89":"nyc_data = pd.read_csv('..\/input\/nyc-east-river-bicycle-counts.csv',index_col='Date', parse_dates = True)\nnyc_data = nyc_data.head(30)","f8dc6eec":"nyc_data.head()","3d9beacf":"nyc_data =  nyc_data.drop('Day', axis = 1)\nnyc_data =  nyc_data.drop('Unnamed: 0', axis = 1)\nnyc_data = nyc_data.rename(columns={\"High Temp (\u00b0F)\": \"HighTemp\", \"Low Temp (\u00b0F)\": \"LowTemp\", \"Precipitation\t\":\"Precipitation\"})\nnyc_data.head()","5064103b":"nyc_data.dtypes","6cddee13":"prep = nyc_data['Precipitation'].replace(['0.47 (S)'], '0.47')\nprep = prep.replace(['T'], '0')\nprep = prep.astype(float)\nnyc_data['Precipitation'] = prep\nnyc_data.head(4)","e07b25df":"nyc_data.dtypes","54a56025":"nyc_data.describe()","b9c61279":"nyc_data.corr()","765f0506":"sns.heatmap(nyc_data.corr(),annot = True)\nplt.show()","2ec81d56":"sns.set(rc={'figure.figsize':(11.7,8.27)})\nsns.set(style=\"darkgrid\")\nsns.relplot( x=\"Total\", y=\"Precipitation\", data=nyc_data);","25730aaa":"sns.pairplot(nyc_data,x_vars=['HighTemp', 'LowTemp','Precipitation'],y_vars='Total',kind='reg',size=6)\nplt.show()","6fb3f353":"nyc_data.resample('D').sum().plot()","9aa8bbad":"x =nyc_data.drop(['Total','Brooklyn Bridge','Manhattan Bridge','Williamsburg Bridge','Queensboro Bridge'],axis=1)\ny = nyc_data['Total']","efe2ba5b":"xtrain,xtest,ytrain,ytest = train_test_split(x,y,random_state=1)","d4800d94":"linear_model = LinearRegression()\noutput = linear_model.fit(xtrain,ytrain)\nprint(output.intercept_)\noutput.coef_","c7233066":"y_pred = linear_model.predict(xtest)\nnp.sqrt(metrics.mean_squared_error(ytest,y_pred))","6bc466c8":"df = pd.DataFrame({})\ndf = pd.concat([xtest,ytest],axis=1)\ndf['Predicted Total'] = np.round(y_pred,2)\ndf['Error'] = df['Total'] - df['Predicted Total']\ndf","eba45a44":"### Regression\n\nLets go ahead and fit a linear model on the data. Before we do that, let us create data for train and test","8db21a85":"The heatmap shows that the number of rides clearly shows a negative correlation with precipitation. We also see a high positive correlation with HighTemp and rides, indicating a correlation.\nTo validate this, lets plot Total Rides with Precipitation. As seen, the number of rides is the more on days when precipitation is 0. ","c45c5c1c":"Visualizing the correlations:","3592a580":"### Reading Data\n\nThe data has repeated values. Hence, I will be taking the first 30 days of data.","b8b05c6f":"Dropping column 'Day' as 'Date' covers the same data. Also, cleaning up column names.","014510d9":"### Data Cleanup ","5bee30c4":"Looking at the types of columns, we see Precipitation as an object. To use it in our analysis, we need to clean it up","7e4d0cae":"### Importing Relevant Libraries","e31133d5":"### Data Visualization","6930dcc5":"As seen from the chart, the highest number of rides ever recorded in a day is around 22-23k, and the lowest reaching just below 5k rides. ","3a78ec40":"Lets see the rides across the bridges spread for the month. ","866780a0":"This completes this notebook for linear regression","ff56848e":"The head and tail commands show that the data is available for the month of April, i.e. starting from 1st April, 2016. to 30th April, 2016. As seen, we have the High\/Low and Precipitation temperatures for all these days and the number of bikes crossing the 4 bridges. "}}