{"cell_type":{"e9120cea":"code","c23eeaeb":"code","c974ee2d":"code","a22990cf":"code","e1da7adc":"code","f0f5983a":"code","6b7e1a2a":"code","b46cfbf3":"code","f9fc2ef7":"code","39f15add":"code","c8ef4aea":"code","adfbf1ab":"code","541251b2":"code","cf73e763":"code","879bdffb":"code","f342001c":"code","b643c022":"code","bdae3007":"code","d79d2bcc":"code","e5d7888b":"code","526abd58":"code","ee0a4023":"code","8ee0852e":"code","c54ea32e":"code","7a7a374f":"code","5ac7bc44":"code","dcf86323":"markdown","7daa21ac":"markdown","0bec24e2":"markdown","9567a1c9":"markdown","7c968b3c":"markdown","7e5494d4":"markdown","4c7c7f96":"markdown","ca72139a":"markdown","fc4a6aa2":"markdown","925fc80f":"markdown","124fdbac":"markdown","93afea42":"markdown","65b5b224":"markdown","ba39a923":"markdown","d8cdaff2":"markdown"},"source":{"e9120cea":"import pandas as pd\nimport numpy as np\nimport os","c23eeaeb":"df=pd.read_csv(\"..\/input\/bank-marketing-dataset\/bank.csv\")\ndf.tail(10)","c974ee2d":"df.info()","a22990cf":"df['deposit']=(df['deposit']=='yes').astype(int)","e1da7adc":"import seaborn as sns\nimport matplotlib.pyplot as plt","f0f5983a":"plt.figure(figsize=(20,16))\ndf['job'].value_counts().plot.pie(autopct='%1.1f%%')","6b7e1a2a":"sns.set(style=\"darkgrid\")\nplt.figure(figsize=(15,12))\nsns.countplot(df['job'],hue='deposit',data=df)\nplt.show()","b46cfbf3":"sns.set(style=\"darkgrid\")\nplt.figure(figsize=(16,12))\nsns.catplot(x=\"education\", hue=\"marital\", col=\"deposit\",\n                data=df, kind=\"count\",\n                height=10, aspect=.7);\nplt.show()","f9fc2ef7":"df['deposit'].value_counts()\/df.shape[0]","39f15add":"df.describe()","c8ef4aea":"numerical_features=(df.select_dtypes(exclude=['object'])).columns\nnumerical_features=list(numerical_features)\n\n# drop the target variable 'deposit'\nnumerical_features.remove('deposit')","adfbf1ab":"for features in numerical_features:\n    mean=df[features].mean(axis=0)\n    std=df[features].std(axis=0)\n    upper_thres=mean+3*std\n    lower_thres=mean-3*std\n    outliers=0\n    for i in range(df.shape[0]):\n        if df[features].iloc[i]>=upper_thres or  df[features].iloc[i]<=lower_thres:\n            outliers+=1\n    print(\"{features}->>  outliers: {outlier}\".format(features=features,outlier=outliers))","541251b2":"corr=df.corr()\nplt.figure(figsize=(14,8))\nsns.heatmap(corr,annot=True)","cf73e763":"# Day and month columns appear to be uncorrelated.\ndf['month'][df['deposit']==1].value_counts()","879bdffb":"df['month'][df['deposit']==0].value_counts()","f342001c":"import warnings\nwarnings.simplefilter(\"ignore\")\n\n\nsubscribers_w_loan=df[df['loan']=='yes'][df['deposit']==1].shape[0]\nsubscribers_wo_loan=df[df['loan']=='no'][df['deposit']==1].shape[0]\n\nsubscribers=df[df['deposit']==1]\n\nprint(\"subscribers_w_loan ->>\",subscribers_w_loan\/subscribers.shape[0])\nprint(\"\\n\")\nprint(\"subscribers_wo_loan ->>\",subscribers_wo_loan\/subscribers.shape[0])","b643c022":"df['contact'].value_counts()","bdae3007":"# subscribers who are contacted by various modes.\ncellular=0\nunknown=0\ntelephone=0\nfor x in range(df.shape[0]):\n    if df['deposit'].iloc[x]==1:\n        if df['contact'].iloc[x]=='cellular':\n            cellular+=1\n        if df['contact'].iloc[x]=='unknown':\n            unknown+=1\n        if df['contact'].iloc[x]=='telephone':\n            telephone+=1\n\n\nplt.figure(figsize=(15,8))\ncontacts = ['cellular', 'unknown', 'telephone']\nsizes = [cellular,unknown,telephone]\nplt.pie(sizes, labels = contacts,autopct='%1.2f%%')\nplt.show()","d79d2bcc":"plt.figure(figsize=(18,10))\nsns.violinplot(x=\"balance\",y=\"job\",hue='deposit',data=df)\nplt.title(\"Job distribution with Deposit status\",fontsize=16)\nplt.show()","e5d7888b":"df['campaign'].value_counts()","526abd58":"# Duration of the campaign also plays a great role,has a good correlation with deposit subscription.\n\n# this code snippet is forked.\n\nsns.set(rc={'figure.figsize':(11.7,8.27)})\nsns.set_style('whitegrid')\navg_duration = df['duration'].mean()\n\nlst = [df]\ndf[\"duration_status\"] = np.nan\n\nfor col in lst:\n    col.loc[col[\"duration\"] < avg_duration, \"duration_status\"] = \"below_average\"\n    col.loc[col[\"duration\"] > avg_duration, \"duration_status\"] = \"above_average\"\n    \npct_term = pd.crosstab(df['duration_status'], df['deposit']).apply(lambda r: round(r\/r.sum(), 2) * 100, axis=1)\n\n\nax = pct_term.plot(kind='bar', stacked=False, cmap='RdBu')\nplt.title(\"The Impact of Duration \\n in Opening a Term Deposit\", fontsize=18)\nplt.xlabel(\"Duration Status\", fontsize=18);\nplt.ylabel(\"Percentage (%)\", fontsize=18)\n\nfor p in ax.patches:\n    ax.annotate(str(p.get_height()), (p.get_x() * 1.02, p.get_height() * 1.02))\n    \n\nplt.show()","ee0a4023":"df['poutcome'].value_counts()    ","8ee0852e":"# housing with marital status\nplt.figure(figsize=(15,8))\nsns.catplot(x=\"housing\", hue=\"marital\", col=\"deposit\",\n                data=df, kind=\"count\",\n                height=10, aspect=.7);\nplt.show()","c54ea32e":"plt.figure(figsize=(16,20))\nsns.set_style(\"darkgrid\")\nsns.boxplot(x='job',y='balance',data=df,hue='deposit',whis=1.5)\nplt.show()","7a7a374f":"plt.figure(figsize=(15,8))\nsns.set_style(\"darkgrid\")\nsns.boxplot(x='deposit',y='age',data=df,whis=1.5)\nplt.show()","5ac7bc44":"# drop irrelevant features\ndf=df.drop(['day','month','poutcome'],axis=1)\ndf.head()","dcf86323":"**Above average duration has clearly a greater impact than below average(77% over 23%).**","7daa21ac":"*But sadly,this data is not reliable as most of the previous campaign outcomes are unknown.","0bec24e2":"*Let us see the distribution of pdays and previous in the population*","9567a1c9":"**90% subscribers are without loan**.","7c968b3c":"**Most of the people who subscribed were contacted via cellular mode(82.61%).","7e5494d4":"No missing data.","4c7c7f96":"**Blue-collar,Management and Technicians constitutes 60% percent of the population .**","ca72139a":"**Let's detect outliers in the numerical features in the dataset.We will denote that values as outliers which are atleast 3 standard deviations away from mean**","fc4a6aa2":"**A closer look in the output will show that the subscribers having different jobs have more bank balance than the non-subscriber.Just look minutely in the 75 percentile mark in the boxplot of all the jobs.**","925fc80f":"# Has the previous marketing campaign has any impact on this campaign??","124fdbac":"**As it can be seen,the dataset is balanced.**","93afea42":"# Another very crucial aspect is the mode of communication.\n ","65b5b224":"*Visualization of some important aspects within the data.*","ba39a923":"**Most of the population is targeted in the first 10 campaigns.**","d8cdaff2":"**Most of the numerical features except duration are uncorrelated.The target perhaps is much dependent on the categorical features or the relationships are non-linear.**"}}