{"cell_type":{"1f212f1a":"code","7632fcdd":"code","a9f11d5c":"code","c13edc49":"code","7c47df13":"code","18105226":"code","2b8120d6":"code","4c97291a":"code","79c7e0fa":"code","69c66816":"code","c2359445":"code","0b51fe32":"code","c4a48352":"code","1135440e":"code","9531e3fe":"code","c9c91eee":"code","229372a9":"code","66871cec":"code","83143179":"code","e47a1b83":"code","3416439e":"code","6432c5c5":"code","5376d951":"code","27bc8794":"code","2b04f7dc":"code","d1d592d0":"code","de51f2b6":"code","89e57145":"code","ad8d7360":"code","9b7db184":"code","73826d3e":"code","1f7d54d3":"code","97f67cc4":"code","96f977f1":"code","0be8255c":"code","40a8c257":"code","125b29e7":"code","1d81619a":"code","b31a9fda":"code","d2c5e719":"code","e0c55a93":"code","e7f5e5b1":"code","7439593a":"code","20eca4de":"code","1395cd48":"code","b7f18495":"code","a4daa46c":"code","ac4602b4":"code","eeb69ab0":"code","69e577e6":"code","280b0f5b":"code","676c532f":"markdown","c3e3e9ec":"markdown","3b945705":"markdown","dec8ba0e":"markdown","59f2c117":"markdown","3f5e039a":"markdown","bf10fef6":"markdown","aebf69ea":"markdown","33396cef":"markdown","e9d8e35e":"markdown","e8024584":"markdown","cf6021d0":"markdown","a23e822c":"markdown","8fa2852d":"markdown","f8558aaf":"markdown","4e87ada7":"markdown","2e44319f":"markdown","7396231c":"markdown","fb37205c":"markdown","c3bb7d58":"markdown","66fb56ff":"markdown","3de5053e":"markdown","9126fbc4":"markdown","00e846c2":"markdown","6262ab0b":"markdown","0b6d5e35":"markdown","3f39764a":"markdown","ea295429":"markdown","9b1557f1":"markdown","dc6b5507":"markdown","25c50b69":"markdown","635ce9f7":"markdown"},"source":{"1f212f1a":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","7632fcdd":"#importing the data as a Pandas DataFrame\ndataset=pd.read_csv('..\/input\/data.csv',encoding=\"ISO-8859-1\")\ndataset.describe()\n\n","a9f11d5c":"dataset.columns\n#Apart from the major pollutants, there are columns that refer to the respective states, agencies, sampling dates and the type.\n#We will now have a look at what kind of data each of the columns consists of.","c13edc49":"\ndataset.info()\n\n#Now, we can immediatly see that there are quite a few nulls in various columns, which need work and first need a closer inspection.","7c47df13":"dataset.head()","18105226":"\ndataset.drop(['stn_code','agency','sampling_date','location_monitoring_station'],axis=1,inplace=True)\ndataset.info()\ndataset.head()","2b8120d6":"#Fixing the missing values firstly for all the pollutants.\n#We will consider taking mean for all the pollutants columns and make use of the Imputer class\nfrom sklearn.preprocessing import Imputer\nimputer = Imputer(missing_values = 'NaN', strategy = 'mean', axis = 0)\nimputer = imputer.fit(dataset.iloc[:, 3:8].values)\ndataset.iloc[:,3:8] = imputer.transform(dataset.iloc[:, 3:8].values)\ndataset.info()\ndataset.head()","4c97291a":"#Fixing the missing values in the column 'type'\ndataset['type'].describe()\n#With 10 Unique labels, we will fill the null values by the most common type, which is 'Residential, Rural and Other Areas'.\ncommon_value='Residential,Rural and other Areas'\ndataset['type']=dataset['type'].fillna(common_value)\ndataset.info()","79c7e0fa":"#Importing libraries\nimport matplotlib.pyplot as plt\nimport seaborn as sns","69c66816":"#We will start with pairplots to undestand the statistics and get a general idea about the interdependence of pollutants.\nsns.pairplot(dataset[['so2','no2','pm2_5']])\n\n","c2359445":"sns.pairplot(dataset[['so2','no2','spm']])\n","0b51fe32":"sns.pairplot(dataset[['so2','no2','rspm']])\n","c4a48352":"sns.pairplot(dataset[['rspm','spm','pm2_5']])\n","1135440e":"\nfig, axarr = plt.subplots(2, 2, figsize=(12, 8))\nsns.distplot(dataset['no2'],hist=True,kde=True,\n             color='darkblue',\n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth':4},\n             ax=axarr[0][0])\n\nsns.distplot(dataset['so2'],hist=True,kde=True,\n             color='red',\n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth':4},\n             ax=axarr[0][1])\n\nsns.distplot(dataset['rspm'],hist=True,kde=True,\n             color='green',\n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth':4},\n             ax=axarr[1][0])\n\nsns.distplot(dataset['spm'],hist=True,kde=True,\n             color='black',\n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth':4},\n             ax=axarr[1][1])","9531e3fe":"sns.heatmap(\n    dataset.loc[:, ['state','so2', 'no2', 'rspm', 'spm', 'pm2_5']].corr(),\n    annot=True\n)\n","c9c91eee":"\nstatewise_emmissions = dataset.groupby('state').mean()[['so2', 'no2', 'rspm', 'spm', 'pm2_5']]\nstatewise_emmissions.plot.area()\n \n","229372a9":"statewise_emmissions.describe()\n","66871cec":"Top10States_with_highest_No2=statewise_emmissions.sort_values(by='no2',ascending=False).head(10)\nTop10States_with_highest_No2_sorted=Top10States_with_highest_No2.loc[:,['no2']]\nTop10States_with_highest_No2_sorted.head()","83143179":"Top10states_with_highest_So2=statewise_emmissions.sort_values(by='so2',ascending=False).head(10)\nTop10states_with_highest_So2_sorted=Top10states_with_highest_So2.loc[:,['so2']]\nTop10states_with_highest_So2_sorted.head()","e47a1b83":"Top10states_with_highest_rspm=statewise_emmissions.sort_values(by='rspm',ascending=False).head(10)\nTop10states_with_highest_rspm_sorted=Top10states_with_highest_rspm.loc[:,['rspm']]\nTop10states_with_highest_rspm_sorted.head()","3416439e":"Top10states_with_highest_spm=statewise_emmissions.sort_values(by='spm',ascending=False).head(10)\nTop10states_with_highest_spm_sorted=Top10states_with_highest_spm.loc[:,['spm']]\nTop10states_with_highest_spm_sorted.head()","6432c5c5":"Top10states_with_highest_pm2_5=statewise_emmissions.sort_values(by='pm2_5',ascending=False).head(10)\nTop10states_with_highest_pm2_5_sorted=Top10states_with_highest_pm2_5.loc[:,['pm2_5']]\nTop10states_with_highest_pm2_5_sorted.head()","5376d951":"#Getting the statistics citywise for the pollutants\nlocationwise_emmissions=dataset.groupby('location').mean()[['so2','no2','rspm','spm','pm2_5']]","27bc8794":"Top10Cities_with_highest_NO2=locationwise_emmissions.sort_values(by='no2',ascending=False).head(10)\nTop10Cities_with_highest_NO2_sorted=Top10Cities_with_highest_NO2.loc[:,['no2']]\nTop10Cities_with_highest_NO2_sorted.head()\n","2b04f7dc":"\nTop10Cities_with_highest_So2=locationwise_emmissions.sort_values(by='so2',ascending=False).head(10)\nTop10Cities_with_highest_So2_sorted=Top10Cities_with_highest_So2.loc[:,['so2']]\nTop10Cities_with_highest_So2_sorted.head()\n\n","d1d592d0":"Top10Cities_with_highest_rspm=locationwise_emmissions.sort_values(by='rspm',ascending=False).head(10)\nTop10Cities_with_highest_rspm_sorted=Top10Cities_with_highest_rspm.loc[:,['rspm']]\nTop10Cities_with_highest_rspm_sorted.head()","de51f2b6":"Top10Cities_with_highest_spm=locationwise_emmissions.sort_values(by='spm',ascending=False).head(10)\nTop10Cities_with_highest_spm_sorted=Top10Cities_with_highest_spm.loc[:,['spm']]\nTop10Cities_with_highest_spm_sorted.head()","89e57145":"Top10Cities_with_highest_pm2_5=locationwise_emmissions.sort_values(by='pm2_5',ascending=False).head(10)\nTop10Cities_with_highest_pm2_5_sorted=Top10Cities_with_highest_pm2_5.loc[:,['pm2_5']]\nTop10Cities_with_highest_pm2_5_sorted.head()","ad8d7360":"#Visualising the emmissions according to the type and getting the relevant statistics\ntype_emmissions=dataset.groupby('type').mean()[['so2','no2','rspm','spm','pm2_5']]\ntype_emmissions.head()\n","9b7db184":"fig, axes = plt.subplots(nrows=2, ncols=2,figsize=(18,14))\nax = sns.barplot(\"so2\", y=\"type\",\n                 data=dataset,\n                 ax=axes[0,0]\n                )\nax = sns.barplot(\"no2\", y=\"type\",\n                 data=dataset,\n                 ax=axes[0,1]\n                )\nax = sns.barplot(\"rspm\", y=\"type\",\n                 data=dataset,\n                 ax=axes[1,0]\n                )\nax = sns.barplot(\"spm\", y=\"type\",\n                 data=dataset,\n                 ax=axes[1,1]\n                )","73826d3e":"#Understanding the emmissions with time\ndataset['date'].describe()\n","1f7d54d3":"dataset.head()\ncommon_value_date='2015-03-19'\ndataset['date']=dataset['date'].fillna(common_value_date)\ndataset.tail()","97f67cc4":"datewise_emmissions_SO2=dataset.groupby('date').mean()['so2']\ndatewise_emmissions_NO2=dataset.groupby('date').mean()['no2']\ndatewise_emmissions_rspm=dataset.groupby('date').mean()['rspm']\ndatewise_emmissions_spm=dataset.groupby('date').mean()['spm']\n\n\n","96f977f1":"fig, axes = plt.subplots(nrows=2, ncols=2,figsize=(14,10))\ndatewise_emmissions_SO2.plot(style='k.',legend=True,ax=axes[0,0])\ndatewise_emmissions_NO2.plot(style='b.',legend=True,ax=axes[0,1])\ndatewise_emmissions_rspm.plot(style='r.',legend=True,ax=axes[1,0])\ndatewise_emmissions_spm.plot(style='g.', legend=True,ax=axes[1,1])\n","0be8255c":"dataset.groupby('so2').max()[['state','date']].tail(20)\n","40a8c257":"dataset.groupby('no2').max()[['state','date']].tail(20)\n","125b29e7":"dataset.groupby('spm').max()[['state','date']].tail(20)\n","1d81619a":"dataset.groupby('rspm').max()[['state','date']].tail(20)","b31a9fda":"dataset['date'] = pd.to_datetime(dataset.date, format='%Y-%m-%d')\ndataset.info()\n\n#As it can be seen now, the date column is converted into datetime, instead of an object. This method is useful for \n#anlysing trends with time within the dataset.\n","d2c5e719":"#Making the date column as the index of the dataframe to make plotting and visulaisation easier.\ndataset=dataset.set_index('date')\ndataset.head()","e0c55a93":"\nyearly = dataset.resample('Y').mean()\n\nmonthly=dataset.resample('M').mean()\n\nweekly=dataset.resample('W').mean()\n\ndaily=dataset.resample('D').mean()\n","e7f5e5b1":"#All the above dataframes will be grouped together and plotted together in a sinlge frame using subplots.\n\nfig,axes=plt.subplots(nrows=2,ncols=2, figsize=(14,10))\nyearly.plot(style=[':', '--', '-','.','*'],\n            ax=axes[0,0],\n            title='Yearly Emmissions')\n\nmonthly.plot(style=[':', '--', '-','.','*'],\n             ax=axes[0,1],\n             title='Monthly Emmissions')\n\nweekly.plot(style=[':', '--', '-','.','*'],\n            ax=axes[1,0],\n            title='Weekly Emmissions')\n\ndaily.plot(style=[':', '--', '-','.','*'],\n            ax=axes[1,1],\n            title='Daily Emmissions')\n","7439593a":"#Putting together all the emissions data, datewise and visualising the data distributions, outliers and median values\nfig,axes2=plt.subplots(nrows=2,ncols=2, figsize=(14,10))\nyearly.plot.box(\n                ax=axes2[0,0],\n                title='Yearly Emmissions Distribution')\n\nmonthly.plot.box(\n                ax=axes2[0,1],\n                title='Monthly Emmissions Distribution')\n\nweekly.plot.box(\n                ax=axes2[1,0],\n                title='Weekly Emmissions Distribution')\n\ndaily.plot.box(\n                ax=axes2[1,1],\n                title='Daily Emmissions Distribution')","20eca4de":"\nTop5Years_highest_SO2=yearly.sort_values(by='so2', ascending=False).head(5)\nTop5Years_highest_SO2.loc[:,'so2']\n\n\n","1395cd48":"Top5Years_highest_NO2=yearly.sort_values(by='no2', ascending=False).head(5)\nTop5Years_highest_NO2.loc[:,'no2']\n","b7f18495":"\nTop10Years_highest_spm=yearly.sort_values(by='spm', ascending=False).head(10)\nTop10Years_highest_spm.loc[:,'spm']\n","a4daa46c":"Top10Years_highest_rspm=yearly.sort_values(by='rspm', ascending=False).head(10)\nTop10Years_highest_rspm.loc[:,'rspm']","ac4602b4":"#Getting the statistics out of each of the monthly merged datasets\nTop10Months_highest_SO2=monthly.sort_values(by='so2', ascending=False).head(10)\nTop10Months_highest_SO2.loc[:,'so2']\n\n\n\n\n","eeb69ab0":"Top10Months_highest_NO2=monthly.sort_values(by='no2', ascending=False).head(10)\nTop10Months_highest_NO2.loc[:,'no2']","69e577e6":"Top20Months_highest_spm=monthly.sort_values(by='spm', ascending=False).head(20)\nTop20Months_highest_spm.loc[:,'spm']","280b0f5b":"Top20Months_highest_rspm=monthly.sort_values(by='rspm', ascending=False).head(20)\nTop20Months_highest_rspm.loc[:,'rspm']","676c532f":"The dataset consists primarily 5 different types pollutants measured over the years in different states and cities of India.\n\nWhere SO2 and NO2 are harmful gaseous emmissions; rspm, spm and pm2_5 come under susended air pollutants.\n\n> The count clearly shows that there are variable number of Non-null entries for each of the pollutants.\n\n> To understand the dataset further, we will have a look at all the different columns now and store them for future reference.\n\n\n","c3e3e9ec":"1. West Bengal and Delhi show the highest NO2 emmissions over the years.\n1. Questions to ask: Have the Vehicles emmiting NOx and NO2 have been monitored well in these two states?\n1. What type of Industrial waste is being generated in these two states?","3b945705":"*Interestingly a lot of high spm measurements have been reported from the state of Rajasthan. *\n> Are Dust storms the primary reasons for suspended particulates in Rajasthan?","dec8ba0e":"Again, nothing in this plot, that can be singled out here as a defining trend. \n> Either the data is not enough or clearly rspm presence in atmosphere is independent of NO2 or SO2 presence.","59f2c117":"***The highest emmissions are for spm, for each of the states.*","3f5e039a":"We have fixed the missing values now and made the dataset much shorter to focus on the key variables.\n> We should start with some preliminary visualisations, starting foremost with those of the pollutants","bf10fef6":"****So, now we see some trend. spm emmissions do demonstrate some relation with No2 and So2 emmissions. \n* As the emmissions for NO2 increase, the spm emmissions demonstrate a slight increase.\n> The right questions, here, therefore could be: Is there any percentage of No2 that gets converted to spm?\n> It will be useful to get this answer as spm are known to have quite a harmful effect on human health.","aebf69ea":"Getting the statistics for highest emissions,when the date column is parsed and is recorded as a datetime, instead of an object.","33396cef":"* Visualising the Emmissions over the years, by grouping the dataset datewise and creating a new DataFrame for each of the five listed pollutants.","e9d8e35e":"Clearly there are lots of null values, noticeably in stn_code,agency, both of which should therefore be not ncluded further in the analysis.\n\n> Intuitively, these two columns will hardly add much value to analysis.\n\n> Now, focusing on the categorical variables, we are left with location_monitoring_station which consists of considerable nulls (approximately 27000). \n\n****It would have been useful to have those values for an in depth analysis, but for now we will keep it out because of the null values and come back later if needed.\n\n1. Out of the two dates columns, immediate attention goes to sampling date which has different formats within, highlighting some data input issues.\n1. While, it is importnat to have this metric, more useful is to go back to the origin of the dataset and ask relevant questions,as to why are there different formats? Is it a human error or error due to incorporating different formats.For now, we will keep it out and only have the date column.","e8024584":"> Again, the daily emmissions distributions shows a high number of outliers for spm measurements. Is it truely that variable across India or there are still different ways of mensurements OR\n different times of measurments?","cf6021d0":"****The distribution for spm is generally on the higher side, but Delhi and Uttar Pradesh show the highest presence of suspended Particulate matter.\n\n1. Are their specific insustries that contribute higher to the spm concentration in and around Delhi?\n> To be underlined is the non-presence of Southern and North eastern states.","a23e822c":"* So2 emmissions it appears showed a lot of variable readings in the 1990's when the measurements started, but since, the emmissions have been localised within a range and even started showing slight downward trend lately.\n\n* NO2 emmissions it appears shows higher variations in the emmissions readings across India.\n> Are there some particular months or times of the year which shows higher No2 emmissions?\n\n* Largely distributed within a certain range of values over the years, although rspm emmissions should be investigated by the different times of year. Are there any further and localised trends?\n\n* The spm measurements early in the 1990's showed huge spikes, are these real or these are measurement issues?\n> The good part is the gradual reduction in spm presence in India's atmosphere, but missing data recently really doen not help in further investigation.","8fa2852d":"*The 20 highest SO2 emmissions measurements have been recorded in West Bengal, most importantly majority of them in 2011.*\n> What was the significance of these measurements? \n> Are these centred around any coal combustion in 2011 or these reflect a sudden surge in the numbers for resons yet unknown?","f8558aaf":"**Atleast according to the data, all the three different suspended particulates seem to have very less interdependence.\n* Suggestive of different origins for each of them or different methods of sampling them.\n* We always need to be mindful of the fact that pm2_5 has a lot of nulls and a large part of it was computed by taking mean.","4e87ada7":"> The data output can be misleading owing to the missing values of pm2_5 values and subsequent mean.\n> Neverthless, Delhi still shows highest measured value of pm2_5.\n","2e44319f":"> SO2 emmissions demonstrate highest occurence during the winter season in India and that is espeiaaly true for rspm measurements.\n* Most importantly, rspm level increase in the winters needs a cross examination with the prevelant winter activities like crop cutting etc.\n> Other than these defingin trends, much less can be inferred about spm measurements with seasonal changes, indicating other potential sources of pollution.","7396231c":"1. With Uttaranachal and Jharkand right at the top, it would be wise to ask whether the coal mining industry in these two states regulated well, as a substantial amount of SO2 emmission can come from the combustion of coal.\n> Importantly, there are no states from South India.","fb37205c":"* Largely it is the Industrial affluents that contribute highest percentage of all the pollutants in India.","c3bb7d58":"The most identifiable trend here, is that 'rspm' measurements have increased dratically after 2000, while all the other three pollutants were recorded highest in 1980s and 1990s.","66fb56ff":"> Getting the statistics for highest emmissions, when grouped statewise.","3de5053e":"Getting the statistics out of each of the yearly merged datasets. The idea is to get a firsthand understanding of whether the years with highest pollutant emmisions have any relation to the changing evironment policy structures or the growth in the industrial and vehicular presence.","9126fbc4":"Resampling the dataset, \n* yearly \n* monthly \n* weekly\n* daily.\nWe will resample by taking the mean of all the measurements within the resampling timeframe, i.e. 'yearly', 'monthly' etc and \nconsequently store each of the results in separate dataframes.","00e846c2":"****Interesting outcome. From the correlations, spm and rspm show a high value, followed by that of rspm and NO2.\n* It could again highlight some important aspect of qualitative analysis that should be added here. \n> Can we say something about spm and rspm? or rspm and NO2?","6262ab0b":"Understanding the pollutants briefly here.\n\n**NO2**: Nitrogen Dioxide and is emmitted mostly from combustion from power sources or transport.\n\n**SO2**: Sulphur Dioxide and is emmitted mostly from coal burning, oil burning, manufacturing of Sulphuric acid.\n\n**spm**: Suspended particulate matter and are known to be the deadliest form of air pollution. They are microscopic in nature and are found to be suspended in earth's atmosphere.\n\n**rspm**: Respirable suspended particulate matter. A sub form of spm and are respnsible for respiratory diseases.\n\n**pm2_5**: Suspended particulate matter with diameters less than 2.5 micrometres. They tend to remain suspended for longer durations and potentially very harmful.\n\nLet us get back to the data again and see how it is stored.\n","0b6d5e35":"Getting the statistics out of each of the mothly merged datasets, now. The idea is to get a firsthand understanding of whether the moths with highest pollutant emmisions have any relation to the changing of the seasons?","3f39764a":"> The most important thing to note here is the sudden increase in spm emmissions after 2003 (**Daily Emmissions plot**), indicating of some spm emmission mode that increased drastically in India.\n> It would be very useful to check for some resource online that indicates a change in the environment policy around 2003, specifically towards spm measurements. ","ea295429":"1. Uttar Pradesh and West bengal again feature as the states responsible for highest N02 emmissions. \n1. While West Bengal measurements date way back in the 1990s, the more recent ones are in Uttar Pradesh.\n1. The highest measurements are as early as 2014, from Rajasthan.\n> Are these primarily due to vehicular exhaust or the new industries with NO2 exhausts?","9b1557f1":"**The idea is to understand through data, whether NO2 and SO2 have a role in particulate formation or not?\n> Clearly there is some interdependence between SO2 and NO2, but no clear trend can be seen for pm2_5.\n> Although, making fair asumptions would be premature as there were large number of missing values for pm2_5 as seen earlier.","dc6b5507":"****It is good to have all the emmissions athe same place by making use of subplots.\n> Making subplots for emmissions data.","25c50b69":"# Grouping the emmissions by state.\n> Having looked at the pollutants distributions, we now would focus on how these emmissions are stacked across the indian states.\n> We will use groupby on the dataset DataFrame and store it in another DataFrame as statewise_emmissions.","635ce9f7":"* There are exactly seven missing date values and as we can see there are multiple measurements for the same date.\n* While dropping the missing dates might seem easiest, we might loose out on some important information.\n> Therefore, we will fix this by filling in the missing values by the most frequent values."}}