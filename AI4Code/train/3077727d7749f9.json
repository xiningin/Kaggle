{"cell_type":{"52fb3f0a":"code","9ef30c89":"code","9429f4f3":"code","dd8ebd88":"code","0b4aa39e":"code","01ed85a0":"code","cef27070":"code","43033dbf":"code","f8a449af":"markdown","a391baec":"markdown","c17d1c9d":"markdown","31ed00be":"markdown","ed5f8811":"markdown","7e4da210":"markdown","9e72981c":"markdown","ca28bed4":"markdown","d40e9eed":"markdown","bc1507bb":"markdown","4b7f27dd":"markdown","31ac2c1b":"markdown","33d0a45a":"markdown","2b74daa4":"markdown","950a83ad":"markdown","5d819c4d":"markdown","137ac7d9":"markdown","1a7d0b04":"markdown","01e7a68a":"markdown","cfd11d8a":"markdown","c9c2ae2d":"markdown"},"source":{"52fb3f0a":"# Import the libraries\nimport pandas as pd \nimport numpy as np \nimport matplotlib.pyplot as plt \n%matplotlib inline \nimport seaborn as sns \n# to show all the columns\npd.options.display.max_columns=999 \n\n# Import the 2019 dataset \ndf_2019 = pd.read_csv('..\/input\/kaggle-survey-2019\/multiple_choice_responses.csv', low_memory=False)\n# assign the first row as column \ndf_2019.columns = df_2019.iloc[0]\n# Now drop the first row \ndf_2019=df_2019.drop([0])\n\n# Replacing the ambigious countries name with Standard names\ndf_2019['In which country do you currently reside?'].replace(\n                                                   {'United States of America':'United States',\n                                                    'Viet Nam':'Vietnam',\n                                                    \"People 's Republic of China\":'China',\n                                                    \"United Kingdom of Great Britain and Northern Ireland\":'United Kingdom',\n                                                    \"Hong Kong (S.A.R.)\":\"Hong Kong\"},inplace=True)\n\n# create a mapping of the long column names that we are going to \n# use for our analysis\ncol_rename_dict_2019 = {'What is your age (# years)?': 'Age',\n                  'What is your gender? - Selected Choice':'Gender',\n                  'In which country do you currently reside?': 'Country',\n                  'What is the highest level of formal education that you have attained or plan to attain within the next 2 years?':'Highest Education',\n                  'Select the title most similar to your current role (or most recent title if retired): - Selected Choice':'Current Role',\n                  'What is your current yearly compensation (approximate $USD)?': 'Yearly Compensation',\n                  'What is the size of the company where you are employed?': 'Company Size',\n                  'Approximately how many individuals are responsible for data science workloads at your place of business?':'Team Size'}\n\n# Rename the columns \ndf_2019.rename(columns=col_rename_dict_2019, inplace=True)\n\n# create a new column to turn 25 compensation categories to 5 sub-categories\nmapping_dict = {\n    '$0-999':'Very Low Wage',\n        '1,000-1,999':'Very Low Wage',\n        '2,000-2,999':'Very Low Wage',\n        '3,000-3,999': 'Very Low Wage',\n        '4,000-4,999': 'Very Low Wage',\n        '5,000-7,499': 'Low Wage',\n        '7,500-9,999': 'Low Wage',\n        '10,000-14,999':'Low Wage',\n        '15,000-19,999':'Low Wage',\n        '20,000-24,999': 'Low Wage',\n        '25,000-29,999': 'Medium Wage',\n        '30,000-39,999': 'Medium Wage',\n        '40,000-49,999':'Medium Wage',\n        '50,000-59,999':'Medium Wage',\n        '60,000-69,999':'Medium Wage',\n        '70,000-79,999':'High Wage',\n        '80,000-89,999':'High Wage',\n        '90,000-99,999':'High Wage',\n        '100,000-124,999':'High Wage',\n        '125,000-149,999':'High Wage',\n        '150,000-199,999':'Very High Wage',\n        '200,000-249,999':'Very High Wage',\n        '250,000-299,999':'Very High Wage',\n        '300,000-500,000':'Very High Wage',\n        '> $500,000':'Very High Wage'\n}\n\ndf_2019['Yearly Compensation Category'] = df_2019['Yearly Compensation'].map(mapping_dict)\n\n# Mapping Higher Education\nmapping_dict = {\n    'Highest Education':{\n        'Some college\/university study without earning a bachelor\u2019s degree':'Some college\/university',\n        'No formal education past high school':'High School'\n    }\n}\n\ndf_2019 = df_2019.replace(mapping_dict)\n\n\n# Only select the columns that we need for our analysis\ndf_2019_subset = df_2019[['Country','Gender','Age','Highest Education','Current Role','Yearly Compensation',\n                          'Yearly Compensation Category','Company Size','Team Size']]\n\n# select only the rows where gender is Female or Male\nfemale_male_2019 = df_2019_subset[(df_2019_subset['Gender']=='Female')| (df_2019_subset['Gender']=='Male')]\n\n# Create a two way table \ncomp_pivot = female_male_2019.pivot_table(index='Gender',columns='Yearly Compensation Category', aggfunc='size')\n# calculate conditional percentage \ncomp_cond_perc = comp_pivot.apply(lambda x: round(x\/ comp_pivot.sum(axis=1)*100, 2))\n# reset the index\ncomp_cond_perc.reset_index(inplace=True)\n\n# Melt the columns to tidy the data \ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Gender'],var_name='Yearly Compensation Category', value_name='Percentages')\n\n# create a list according to which we want the data to be plotted\norder_list = ['Very Low Wage','Low Wage','Medium Wage','High Wage','Very High Wage']\n\n# create the plot \ng = sns.catplot(x=\"Yearly Compensation Category\", y=\"Percentages\", hue=\"Gender\", data=comp_cond_perc,\n                kind=\"bar\", order=order_list, height=7, aspect=1.2, palette='muted')\nplt.title('Yearly Compensation 2019 By Gender', fontsize=17)\ng.set_axis_labels(y_var=\"Conditional Percentages\");","9ef30c89":"# create a list of top 6 countries\ntop_6_country_list= list(female_male_2019['Country'].value_counts()[:6].index )\n# select only the data for these countries\ntop_6_country_data = female_male_2019[female_male_2019['Country'].isin(top_6_country_list)]\n\n# Create a two way table \ncomp_pivot_country = top_6_country_data.pivot_table(index=['Country','Gender'], \n                                                     columns='Yearly Compensation Category', aggfunc='size').fillna(0)\n\n# calculate conditional percentage \ncomp_cond_perc = comp_pivot_country.apply(lambda x: round(x\/ comp_pivot_country.sum(axis=1)*100, 2))\n# reset the index\ncomp_cond_perc.reset_index(inplace=True)\n# tidy the data \ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Country','Gender'],\n                                     var_name='Yearly Compensation Category', value_name='Percentages')\n\n# Plot the data \ng = sns.catplot(x=\"Yearly Compensation Category\", y=\"Percentages\", hue=\"Gender\", data=comp_cond_perc,\n                kind=\"bar\", order=order_list, col='Country',col_wrap=2,palette='muted',aspect=1.1)\nplt.subplots_adjust(top=0.9)\ng.fig.suptitle('Yearly Compensation 2019 Top 6 Countries', fontsize=17) \ng.set_axis_labels(y_var=\"Conditional Percentages\");","9429f4f3":"comp_pivot = female_male_2019.pivot_table(index=['Gender','Current Role'], \n                                          columns='Yearly Compensation Category', aggfunc='size')\ncomp_cond_perc = comp_pivot.apply(lambda x: round(x\/comp_pivot.sum(axis=1)*100, 2))\ncomp_cond_perc.reset_index(inplace=True)\ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Gender','Current Role'], \n                                     var_name='Yearly Compensation Category', value_name='Percentages')\ng = sns.catplot(x='Yearly Compensation Category', y='Percentages', hue='Gender', data=comp_cond_perc,\n               kind='bar',order=order_list, col='Current Role', col_wrap=2, palette='muted',aspect=1.1)\nplt.subplots_adjust(top=0.9)\ng.fig.suptitle('Yearly Compensation 2019 By Profession', fontsize=17)\ng.set_axis_labels(y_var=\"Conditional Percentages\");","dd8ebd88":"comp_pivot = female_male_2019.pivot_table(index=['Gender','Company Size'], \n                                          columns='Yearly Compensation Category', aggfunc='size')\ncomp_cond_perc = comp_pivot.apply(lambda x: round(x\/comp_pivot.sum(axis=1)*100, 2))\ncomp_cond_perc.reset_index(inplace=True)\ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Gender','Company Size'], \n                                     var_name='Yearly Compensation Category', value_name='Percentages')\n\ng = sns.catplot(x='Yearly Compensation Category', y='Percentages', hue='Gender', data=comp_cond_perc,\n               kind='bar',order=order_list, col='Company Size', col_wrap=2, palette='muted',aspect=1.1)\nplt.subplots_adjust(top=0.9)\ng.fig.suptitle('Yearly Compensation 2019 By Company Size', fontsize=17)\ng.set_axis_labels(y_var=\"Conditional Percentages\");","0b4aa39e":"comp_pivot = female_male_2019.pivot_table(index=['Gender','Age'], \n                                          columns='Yearly Compensation Category', aggfunc='size')\ncomp_cond_perc = comp_pivot.apply(lambda x: round(x\/comp_pivot.sum(axis=1)*100, 2))\ncomp_cond_perc.reset_index(inplace=True)\ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Gender','Age'], \n                                     var_name='Yearly Compensation Category', value_name='Percentages')\n\ng = sns.catplot(x='Yearly Compensation Category', y='Percentages', hue='Gender', data=comp_cond_perc,\n               kind='bar',order=order_list, col='Age', col_wrap=3, palette='muted',aspect=1.1)\n\nplt.subplots_adjust(top=0.9)\ng.fig.suptitle('Yearly Compensation 2019 Based On Age', fontsize=17)\ng.set_axis_labels(y_var=\"Conditional Percentages\");","01ed85a0":"# Female 25-29 in the very high wage category\nfemale_25_29_very_high = female_male_2019[(female_male_2019['Gender']=='Female') & (\n    female_male_2019['Age']=='25-29') & (female_male_2019['Yearly Compensation Category']=='Very High Wage')]\nfemale_25_29_very_high","cef27070":"# Female age between 55-59 and high wage \nfemale_55_59_high_wage = female_male_2019[(female_male_2019['Gender']=='Female') & (\n    female_male_2019['Age']=='55-59') & (female_male_2019['Yearly Compensation Category']=='High Wage')]\nfemale_55_59_high_wage","43033dbf":"comp_pivot = female_male_2019.pivot_table(index=['Gender','Highest Education'], \n                                          columns='Yearly Compensation Category', aggfunc='size')\ncomp_cond_perc = comp_pivot.apply(lambda x: round(x\/comp_pivot.sum(axis=1)*100, 2))\ncomp_cond_perc.reset_index(inplace=True)\ncomp_cond_perc = comp_cond_perc.melt(id_vars=['Gender','Highest Education'], \n                                     var_name='Yearly Compensation Category', value_name='Percentages')\ng = sns.catplot(x='Yearly Compensation Category', y='Percentages', hue='Gender', data=comp_cond_perc,\n               kind='bar',order=order_list, col='Highest Education', col_wrap=2, palette='muted',aspect=1.1)\nplt.subplots_adjust(top=0.9)\ng.fig.suptitle('Yearly Compensation 2019 Based On Education', fontsize=17)\ng.set_axis_labels(y_var=\"Conditional Percentages\");","f8a449af":"Although, we can not say that this sample data is true representative of the population but our results are consistent with what [others have found](https:\/\/www.fawcettsociety.org.uk\/why-women-need-a-right-to-know-shining-a-light-on-pay-discrimination). \n\nFrom our Analysis, the overall results are - \n\n* Yes, Gender Pay Gap exists even in the Fields of Machine Learning And Data Science.\n* All over the world Males tends to earn more than Females.\n* Females are often underrepresented in high paying jobs.\n* And Females are often overrepresented in low-paying jobs.\n* There are some places we find some hope which are in favor of Females. Like Females who are from Japan and USA(only top 6 countries analyzed) particularly females in USA in their twenties who work as a Data Scientists in Bigger companies. And some Females who works as a `DBA\/Database Engineer`,`Data Analyst` (not limited to only top 6 countries). \n\nI hope this analysis shed some lights on the pain that women goes through and inspire us to take it seriously and \nstart a conversation in our own companies to fix it. \n\nThanks for reading the analysis. I am very grateful that you took some time out of your busy schedule to read it. ","a391baec":"Let's dig a little bit to find more insights.","c17d1c9d":"# Question 3. What about Types of Profession? ","31ed00be":"Most of the females are from united states, they are Data scientists and work in bigger companies.","ed5f8811":"# Question 6. Can We At least Expect Fairness in pay based on Education?","7e4da210":"### Reflections - \n* Out of respondents in this survey, Percentages of females here and there are slightly higher than males.\n* But the striking difference is in the category where female age is `25-29` and `55-59`. In the `55-59` category the percentage of much higher in the `High Wage` though not in the `Very High Wage`. But in the `25-29` age category, females leading in both the `High Wage` and `Very High wage` category. In Which Most of the females are from united states, they are Data scientists and work in bigger companies.\n* Otherwise, It is still Male dominated world.","9e72981c":"### Reflections - \n\n* In Countries like `Brazil`, `India`, `Russia`, overall the pattern is same, Maximum percentage of Females in \n  the low wage categories and the upper categories are dominated by Males except some difference in Brazil where we can see the       percentage of females in `Medium wage` category is slightly higher here.\n* In `Japan` And `USA`, there is slight difference. In Japan, we can see that actually the percentage of female in \n  `Very High Wage` is slightly higher than male but the difference is almost negligible and in USA females in `High Wage`category is higher than males. Then again `very High wage` category is dominated by Males.","ca28bed4":"![gender_pay_gap.jpg](attachment:gender_pay_gap.jpg)\nPic Credit - [The Guardian](https:\/\/www.theguardian.com\/)","d40e9eed":"# Question 5. IS there a difference in compensation across different Age?","bc1507bb":"There isn't look like any pattern here. ","4b7f27dd":"# Question 2. Is It also True Across Different Countries? \nLet's first look at the top 6 countries. ","31ac2c1b":"# Conclusion - ","33d0a45a":"# Question 1. Is there is a difference in compensation based on Gender?\nLet's first look at an aggregated level to see if there is a difference in compensation based on Gender.","2b74daa4":"### Reflection - \n\n  * Out of the all the respondents in this survey, we can see that maximum Percentage of Females are in the `Very Low Wage` Category. And in all other categories Males are dominating.","950a83ad":"### Reflection - \n\n* The Results can't get more worse than this. Based on Highest Education, there isn't a single place where females\n    are leading.In every place there are paid less than Males.","5d819c4d":"  # Economic Inequality by Gender - Good, Bad & The Ugly Truths","137ac7d9":"### Reflections - \n\n* There is a little hope in Very Big companies for Women Where the company size is `bigger than 10,000 employees`. Otherwise, results are not in Favor of women here also. ","1a7d0b04":"# Objectives - \nThe study from various organizations in the past has shown that there is an Economic Inequality in Pay based on Gender. But I am Interested to know if it also exist in Machine Learning and Data Science community or not? We will\nask series of questions and keep segmenting the data again and again to find the real truth. I invite you to come along with me to find it out. \n\nLet's begin.","01e7a68a":"### Reflections\n\n* There is some good news for Females in `DBA\/Database Engineer` and `Data Analyst` Profession Where the percentages \n    of females in the `High wage`(fourth category) is higher than Males.\n* Also in `Statistician` where percentages of female in `Very High Wage` category are higher but the worst is also in this profession. The percentage of females in `very low wage` is highest among all the profession.\n* Otherwise, in other Professions the results are same.","cfd11d8a":"We are all aware of `Gender Pay Gap`. It comes up often in [political debates](https:\/\/www.nbcnews.com\/politics\/2020-election\/live-blog\/nov-20-democratic-debate-live-updates-n1087226\/ncrd1088011#liveBlogHeader), [Policy reports](https:\/\/siteresources.worldbank.org\/INTWDR2012\/Resources\/7778105-1299699968583\/7786210-1315936222006\/Complete-Report.pdf) and [everyday News](https:\/\/www.ksl.com\/article\/46681609\/unaffordable-utah-fixing-the-uss-worst-gender-pay-gap).\n\nAccording to New report by [Fawcett Society](https:\/\/www.fawcettsociety.org.uk\/why-women-need-a-right-to-know-shining-a-light-on-pay-discrimination) : -\n> Fifty years on from the Equal Pay Act 1970, women are still fighting to make equal pay a reality. Far from this battle being won, women are routinely unaware of what their colleagues earn, and therefore unable to secure equal pay. From supermarkets and councils to broadcasters and catering companies, men are still being paid more for the same work, work rated as equivalent, or work of equal value.\n","c9c2ae2d":"# Question 4. How Fair are the Big and Small Companies? "}}