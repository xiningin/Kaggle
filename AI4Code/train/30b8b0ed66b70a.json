{"cell_type":{"b287500b":"code","3d01f27b":"code","e14b268c":"code","12d2934d":"code","e33740e8":"code","899a8fc4":"code","3fc49b7d":"code","2d52c58e":"code","3dafa377":"code","a41f5208":"code","e7ea0d2e":"code","999ce31c":"code","de67d4d4":"code","2b61b375":"markdown","dc209f0c":"markdown","f466d502":"markdown","6c2e3c50":"markdown","24dbe0eb":"markdown","2813e98a":"markdown","dc4dae30":"markdown","dc2302fe":"markdown","289346c2":"markdown","fd4cd8fd":"markdown","d483ded1":"markdown","8592b18b":"markdown","3c03b076":"markdown"},"source":{"b287500b":"import numpy as np \nimport pandas as pd \n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\npd.set_option('display.max_columns', None)","3d01f27b":"data = pd.read_csv('..\/input\/loan.csv')\nprint(data.duplicated().sum())\ndata.shape","e14b268c":"# see first rows\ndata.head()","12d2934d":"fig = data.loan_amnt.hist(bins=50)\nfig.set_title('Loan Requested Amount')\nfig.set_xlabel('Loan Amount')\nfig.set_ylabel('Number of loans')","e33740e8":"# parse loan requested date as datetime, to make the below plots\ndata['issue_dt'] = pd.to_datetime(data.issue_d)\ndata['month']= data['issue_dt'].dt.month\ndata['year']= data['issue_dt'].dt.year\ndata[['issue_d', 'issue_dt', 'month', 'year']].head()","899a8fc4":"# plot total loan amount lent in time, segregated by the different risk markets (variable grade)\nfig = data.groupby(['year', 'grade'])['loan_amnt'].sum().unstack().plot()\nfig.set_title('Loan Requested Amount')\nfig.set_ylabel('Loan Amount')\nfig.set_xlabel('Time')","3fc49b7d":"bad_indicators = [\"Charged Off \",\n                    \"Default\",\n                    \"Does not meet the credit policy. Status:Charged Off\",\n                    \"In Grace Period\", \n                    \"Default Receiver\", \n                    \"Late (16-30 days)\",\n                    \"Late (31-120 days)\"]\n\n# define a bad loan\ndata['bad_loan'] = 0\ndata.loc[data.loan_status.isin(bad_indicators), 'bad_loan'] = 1\ndata.bad_loan.mean()","2d52c58e":"dict_risk = data.groupby(['grade'])['bad_loan'].mean().sort_values().to_dict()\ndict_risk","3dafa377":"fig = data.groupby(['grade'])['bad_loan'].mean().sort_values().plot.bar()\nfig.set_ylabel('Percentage of bad debt')","a41f5208":"fig = data.groupby(['grade'])['int_rate'].mean().plot.bar()\nfig.set_ylabel('Interest Rate')","e7ea0d2e":"fig = data.groupby(['grade'])['loan_amnt'].sum().plot.bar()\nfig.set_ylabel('Loan amount disbursed')","999ce31c":"fig = data.groupby(['grade', 'term'])['loan_amnt'].mean().unstack().plot.bar()\nfig.set_ylabel('Mean loan amount disbursed')","de67d4d4":"fig = data.groupby(['grade', 'term'])['bad_loan'].mean().unstack().plot.bar()\nfig.set_ylabel('Percentage of bad debt')","2b61b375":"Lending Club has lent more money from 2013 onwards, suggesting that the company is growing. They lend more money, therefore they have more customers on both the lending and borrowing sides.","dc209f0c":"## Lending Club growth: Increased loan amounts disbursed in time","f466d502":"### Loan Amount\n\n![](http:\/\/)This is the amount of money disbursed (lent) by Lending Club to each borrower.","6c2e3c50":"> ## Load Data","24dbe0eb":"We can see that loans which terms are longer, are usually of bigger sizes. In other words, when the borrowers ask bigger sizes of loans, they usually agree to repay it over a longer period of time.","2813e98a":"We see that lower risk markets (F and G) have higher risk of detault, whereas borrowers placed in A and B grades have the lowest risk of defaulting their loans. \n\nGrade markets are usually estimated based on the credit history of the borrowers. Borrowers with good financial history are usually placed in markets A, and borrowers in a somewhat tighter financial situation, or for whom there is not enough financial history, are placed in markets G and F,  as the company and thus the investors are taking a greater risk when lending them money.","dc4dae30":"We can see that the higher bars correspond to loan sizes of 10000, 15000, 20000, and 35000.\n\nThis indicates that people most likely tend to ask for these loan amounts. Likely, these pre-determined loan amounts are offered as such in the Lending Club website.\n\nThose loan values that are less frequent, could be requested by people who require a specific amount of money for a definite purpose.","dc2302fe":"## Term of loans\n\nTime over which the borrowers agree with Lending Club to repay the loan. Lending club offers 2 different term options, either 3 or 5 years.","289346c2":"## Bad debt: defaulted loans\n\nDefaulted loans are those lent to borrowers that will not be able to pay the money back. Therefore the money is lost. This is the risk any finance company faces when providing credit items.","fd4cd8fd":"Here we see that usually, loans given over shorter periods of time are usually riskier than those given over longer periods of time (as the badt debt percentage is higher). This is not a coincidence. Usually finance companies choose not to lend money for long periods to riskier customers, as this does not help their financial situation. Rather the opposite by generating them more debt.","d483ded1":"Customers placed in riskier markets are charged higher interest rates, as the company and the investors take a greater risk.","8592b18b":"Lending Club lends the majority of their loans to markets B and C. This makes financial sense, as these are borrowers typically in good financial situations, who will be able to repay their loans.","3c03b076":"We see that the overall risk of Lending's Club loan book is 2.5 %. These means that 2.5% of the loans that they give will end up defaulted (unpaid).\n\nWe can go ahead and segregate the risk by risk markets (grade), see below."}}