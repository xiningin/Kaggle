{"cell_type":{"e1779b5d":"code","aa28a94b":"code","f9343f4d":"code","13c8f61c":"code","a3c34af0":"code","80b13595":"code","53ef7670":"code","1f4b161c":"code","ea76fbed":"code","b468fe45":"code","ba6b8917":"code","b7489ec4":"code","2f161373":"code","778d4e7b":"code","a8b833a7":"code","d93c40ca":"code","3d95004f":"code","e48d2aa2":"code","653ac10c":"code","3371737b":"code","a6783684":"code","c1914db4":"code","18508966":"code","8dbed269":"code","976e96f5":"code","fe420670":"code","11f51753":"code","75c31418":"code","29fb82c3":"code","4f35292d":"code","36f991d1":"code","85e43ec4":"code","46486b5a":"code","48ede4fe":"code","4a81cd14":"code","c4ec5ff8":"code","fda6dfec":"code","cf69638d":"code","d632ce7a":"code","3fcadfe7":"code","b54ef891":"code","f2b83c6f":"code","a15a5985":"code","3a665cfb":"code","23eafd52":"code","520c6f47":"code","1c10404c":"code","1f2f3394":"code","15b5a20d":"code","bc34e1b9":"code","a88abe5d":"code","4e599c79":"code","f7f908d6":"code","bf93f338":"code","21962605":"code","1f4d148c":"code","62f121b4":"markdown","da1f3aab":"markdown","8ddca35f":"markdown","1c0a1f29":"markdown","1242a095":"markdown","a3550ffa":"markdown","cfea8171":"markdown","7de8b6e8":"markdown","d1cc68ba":"markdown","6f16c61b":"markdown","66e6d3cb":"markdown","6910e378":"markdown","e393bb35":"markdown"},"source":{"e1779b5d":"from IPython.display import Image\nImage(filename='\/kaggle\/input\/fifaworld\/1_0A8eTfcCEI4vQdErHdrwEQ.jpeg', width=\"800\", height='50')","aa28a94b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport plotly as py\nimport cufflinks as cf\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","f9343f4d":"players = pd.read_csv(\"\/kaggle\/input\/fifa-world-cup\/WorldCupPlayers.csv\")\nmatches = pd.read_csv(\"\/kaggle\/input\/fifa-world-cup\/WorldCupMatches.csv\")\nworld_cup = pd.read_csv(\"\/kaggle\/input\/fifa-world-cup\/WorldCups.csv\")","13c8f61c":"players.head()","a3c34af0":"matches.head()","80b13595":"matches.tail()","53ef7670":"world_cup.head()","1f4b161c":"matches.dropna(subset=['Year'], inplace=True)","ea76fbed":"matches.tail()","b468fe45":"matches['Home Team Name'].value_counts()","ba6b8917":"names = matches[matches['Home Team Name'].str.contains('rn\">')]['Home Team Name'].value_counts()\nnames","b7489ec4":"wrong = list(names.index)\nwrong","2f161373":"correct = [name.split('>')[1] for name in wrong]\ncorrect","778d4e7b":"old_name = ['Germany FR', 'Maracan\ufffd - Est\ufffddio Jornalista M\ufffdrio Filho', 'Estadio do Maracana']\nnew_name = ['Germany', 'Maracan Stadium', 'Maracan Stadium']","a8b833a7":"wrong = wrong + old_name\ncorrect = correct + new_name","d93c40ca":"wrong, correct","3d95004f":"for index, wr in enumerate(wrong):\n    world_cup = world_cup.replace(wrong[index], correct[index])\n    \nfor index, wr in enumerate(wrong):\n    matches = matches.replace(wrong[index], correct[index])\n    \nfor index, wr in enumerate(wrong):\n    players = players.replace(wrong[index], correct[index])","e48d2aa2":"names = matches[matches['Home Team Name'].str.contains('rn\">')]['Home Team Name'].value_counts()\nnames","653ac10c":"winner = world_cup['Winner'].value_counts()\nwinner","3371737b":"runnerup = world_cup['Runners-Up'].value_counts()\nrunnerup","a6783684":"third = world_cup['Third'].value_counts()\nthird","c1914db4":"teams = pd.concat([winner, runnerup, third], axis=1)\nteams.fillna(0, inplace=True)\nteams = teams.astype(int)\nteams","18508966":"from plotly.offline import iplot\npy.offline.init_notebook_mode(connected=True)\ncf.go_offline()","8dbed269":"teams.iplot(kind = 'bar', xTitle='Teams', yTitle='Count', title='FIFA World Cup Winning Count')","976e96f5":"matches.head(2)","fe420670":"home = matches[['Home Team Name', 'Home Team Goals']].dropna()\naway = matches[['Away Team Name', 'Away Team Goals']].dropna()","11f51753":"home.columns = ['Countries', 'Goals']\naway.columns = home.columns","75c31418":"goals = home.append(away, ignore_index = True)","29fb82c3":"goals = goals.groupby('Countries').sum()\ngoals","4f35292d":"goals = goals.sort_values(by = 'Goals', ascending=False)\ngoals","36f991d1":"goals[:20].iplot(kind='bar', xTitle = 'Country Names', yTitle = 'Goals', title = 'Countries Hits Number of Goals')","85e43ec4":"world_cup['Attendance'] = world_cup['Attendance'].str.replace(\".\", \"\")","46486b5a":"world_cup.head()","48ede4fe":"fig, ax = plt.subplots(figsize = (10,5))\nsns.despine(right = True)\ng = sns.barplot(x = 'Year', y = 'Attendance', data = world_cup)\ng.set_xticklabels(g.get_xticklabels(), rotation = 80)\ng.set_title('Attendance Per Year')\n\n#==========================================\n\nfig, ax = plt.subplots(figsize = (10,5))\nsns.despine(right = True)\ng = sns.barplot(x = 'Year', y = 'QualifiedTeams', data = world_cup)\ng.set_xticklabels(g.get_xticklabels(), rotation = 80)\ng.set_title('Qualified Teams Per Year')\n\n#==========================================\n\nfig, ax = plt.subplots(figsize = (10,5))\nsns.despine(right = True)\ng = sns.barplot(x = 'Year', y = 'GoalsScored', data = world_cup)\ng.set_xticklabels(g.get_xticklabels(), rotation = 80)\ng.set_title('Goals Scored by Teams Per Year')\n\n\n#==========================================\n\n\nfig, ax = plt.subplots(figsize = (10,5))\nsns.despine(right = True)\ng = sns.barplot(x = 'Year', y = 'MatchesPlayed', data = world_cup)\ng.set_xticklabels(g.get_xticklabels(), rotation = 80)\ng.set_title('Matches Plyed Scored by Teams Per Year')\n","4a81cd14":"\nmatches.head(2)","c4ec5ff8":"home = matches.groupby(['Year', 'Home Team Name'])['Home Team Goals'].sum()\nhome","fda6dfec":"away = matches.groupby(['Year', 'Away Team Name'])['Away Team Goals'].sum()\naway","cf69638d":"goals = pd.concat([home, away], axis=1)\ngoals.fillna(0, inplace=True)\ngoals['Goals'] = goals['Home Team Goals'] + goals['Away Team Goals']\ngoals = goals.drop(labels = ['Home Team Goals', 'Away Team Goals'], axis = 1)\ngoals","d632ce7a":"goals = goals.reset_index()","3fcadfe7":"goals.columns = ['Year', 'Country', 'Goals']\ngoals = goals.sort_values(by = ['Year', 'Goals'], ascending = [True, False])\ngoals","b54ef891":"top5 = goals.groupby('Year').head()\ntop5.head(10)","f2b83c6f":"import plotly.graph_objects as go","a15a5985":"\nx, y = goals['Year'].values, goals['Goals'].values","3a665cfb":"data = []\nfor team in top5['Country'].drop_duplicates().values:\n    year = top5[top5['Country'] == team]['Year']\n    goal = top5[top5['Country'] == team]['Goals']\n    \n    data.append(go.Bar(x = year, y = goal, name = team))\nlayout = go.Layout(barmode = 'stack', title = 'Top 5 Teams with most Goals', showlegend = False)\n\nfig = go.Figure(data = data, layout = layout)\nfig.show()","23eafd52":"matches['Datetime'] = pd.to_datetime(matches['Datetime'])","520c6f47":"matches['Datetime'] = matches['Datetime'].apply(lambda x: x.strftime('%d %b, %y'))","1c10404c":"top10 = matches.sort_values(by = 'Attendance', ascending = False)[:10]\ntop10['vs'] = top10['Home Team Name'] + \" vs \" + top10['Away Team Name']\n\nplt.figure(figsize = (12,10))\n\nax = sns.barplot(y = top10['vs'], x = top10['Attendance'])\nsns.despine(right = True)\n\nplt.ylabel('Match Teams')\nplt.xlabel('Attendence')\nplt.title('Matches with the highest number of Attendence')\n\nfor i, s in enumerate(\"Stadium: \" + top10['Stadium'] +\", Date: \" + top10['Datetime']):\n    ax.text(2000, i, s, fontsize = 12, color = 'white')\nplt.show()","1f2f3394":"matches['Year'] = matches['Year'].astype(int)\n\nstd = matches.groupby(['Stadium', 'City'])['Attendance'].mean().reset_index().sort_values(by = 'Attendance', ascending =False)\n\ntop10 = std[:10]\n\nplt.figure(figsize = (12,9))\nax = sns.barplot(y = top10['Stadium'], x = top10['Attendance'])\nsns.despine(right = True)\n\nplt.ylabel('Stadium Names')\nplt.xlabel('Attendance')\nplt.title('Stadium with the heighest number of attendance')\nfor i, s in enumerate(\"City: \" + top10['City']):\n        ax.text(2000, i, s, fontsize = 12, color = 'b')\n        \nplt.show()","15b5a20d":"matches['City'].value_counts()[:20].iplot(kind = 'bar')","bc34e1b9":"gold = world_cup[\"Winner\"]\nsilver = world_cup[\"Runners-Up\"]\nbronze = world_cup[\"Third\"]\n\ngold_count = pd.DataFrame.from_dict(gold.value_counts())\nsilver_count = pd.DataFrame.from_dict(silver.value_counts())\nbronze_count = pd.DataFrame.from_dict(bronze.value_counts())\npodium_count = gold_count.join(silver_count, how='outer').join(bronze_count, how='outer')\npodium_count = podium_count.fillna(0)\npodium_count.columns = ['WINNER', 'SECOND', 'THIRD']\npodium_count = podium_count.astype('int64')\npodium_count = podium_count.sort_values(by=['WINNER', 'SECOND', 'THIRD'], ascending=False)\n\npodium_count.plot(y=['WINNER', 'SECOND', 'THIRD'], kind=\"bar\", \n                  color =['gold','silver','brown'], figsize=(15, 6), fontsize=14,\n                 width=0.8, align='center')\nplt.xlabel('Countries')\nplt.ylabel('Number of podium')\nplt.title('Number of podium by country')","a88abe5d":"#world_cups_matches['Win conditions'].value_counts()\nhome = matches[['Home Team Name', 'Home Team Goals']].dropna()\naway = matches[['Away Team Name', 'Away Team Goals']].dropna()\n\ngoal_per_country = pd.DataFrame(columns=['countries', 'goals'])\ngoal_per_country = goal_per_country.append(home.rename(index=str, columns={'Home Team Name': 'countries', 'Home Team Goals': 'goals'}))\ngoal_per_country = goal_per_country.append(away.rename(index=str, columns={'Away Team Name': 'countries', 'Away Team Goals': 'goals'}))\n\ngoal_per_country['goals'] = goal_per_country['goals'].astype('int64')\n\ngoal_per_country = goal_per_country.groupby(['countries'])['goals'].sum().sort_values(ascending=False)\n\ngoal_per_country[:10].plot(x=goal_per_country.index, y=goal_per_country.values, kind=\"bar\", figsize=(12, 6), fontsize=14)\nplt.xlabel('Countries')\nplt.ylabel('Number of goals')\nplt.title('Top 10 of Number of goals by country')","4e599c79":"\ndef get_labels(matches):\n    if matches['Home Team Goals'] > matches['Away Team Goals']:\n        return 'Home Team Win'\n    if matches['Home Team Goals'] < matches['Away Team Goals']:\n        return 'Away Team Win'\n    return 'DRAW'","f7f908d6":"matches['outcome'] = matches.apply(lambda x: get_labels(x), axis=1)","bf93f338":"matches.head()","21962605":"mt = matches['outcome'].value_counts()\nmt","1f4d148c":"plt.figure(figsize = (6,6))\n\nmt.plot.pie(autopct = \"%1.0f%%\", colors = sns.color_palette('winter_r'), shadow = True)\n\nc = plt.Circle((0,0), 0.4, color =  'white')\nplt.gca().add_artist(c)\nplt.title('Match Outcomes by Home and Away Teams')\nplt.show()","62f121b4":"# Attendance, Number of Teams, Goals, and Matches per Cup","da1f3aab":"# Which countries had won the cup ?","8ddca35f":"# Stadium with Highest Average Attendance","1c0a1f29":"## I am working on this dataset so I will keep updating it\n\n### If you like my kernel please consider upvoting it\n\n## Thank you","1242a095":"# Data Cleaning","a3550ffa":"# Number of Goal Per Countary","cfea8171":"# Most Number of World Cup Winning Title","7de8b6e8":"# Content\n\n- Data Cleaning\n- Visualization\n\n    - Most Number of World Cup Winning Title\n    - Number of Goal Per Countary\n    - Attendance, Number of Teams, Goals, and Matches per Cup\n    - Goals Per Team Per World Cup\n    - Matches With Heihest Number Of Attendance\n    - Stadium with Highest Average Attendance\n    - Which countries had won the cup ?\n    - Number of goal per country\n    - Match outcome by home and away temas","d1cc68ba":"# Matches With Heihest Number Of Attendance","6f16c61b":"# Match outcome by home and away temas","66e6d3cb":"# Goals Per Team Per World Cup","6910e378":"# The FIFA World Cup\n\nThe FIFA World Cup, often simply called the World Cup, is an international association football competition contested by the senior men's national teams of the members of the F\u00e9d\u00e9ration Internationale de Football Association (FIFA), the sport's global governing body. The championship has been awarded every four years since the inaugural tournament in 1930, except in 1942 and 1946 when it was not held because of the Second World War. The current champion is Germany, which won its fourth title at the 2014 tournament in Brazil.","e393bb35":"# Number of goal per country"}}