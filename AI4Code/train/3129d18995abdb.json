{"cell_type":{"ccb94146":"code","6b4f6545":"code","d5634a3c":"code","ec56bc4a":"code","53531b60":"code","efd0f4a8":"code","577b41af":"code","78411623":"code","69366a47":"code","bb1e9333":"code","db642556":"code","19156128":"code","a0219e9c":"code","daba4701":"code","7db880e0":"code","bd72dd64":"code","236fd07d":"code","578a0964":"code","8cfa6f9b":"code","f785726a":"code","d67f702e":"code","bb2a59cd":"code","6259efd6":"code","895c6173":"code","e72cb8de":"code","8608cfbf":"markdown","91c19bda":"markdown","a6bc7b2a":"markdown","5c336284":"markdown","0a39ac99":"markdown","778cc05c":"markdown","a7ef2b43":"markdown","e661b259":"markdown","927e2473":"markdown","fb5492c2":"markdown","8d8d48d9":"markdown","fa9bf8dd":"markdown"},"source":{"ccb94146":"import itertools\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport statsmodels.stats.api as sms\nfrom scipy.stats import \\\n    ttest_1samp, \\\n    shapiro, \\\n    levene, \\\n    ttest_ind, \\\n    mannwhitneyu, \\\n    pearsonr, \\\n    spearmanr, \\\n    kendalltau, \\\n    f_oneway, \\\n    kruskal\nfrom statsmodels.stats.proportion import proportions_ztest\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', 10)\npd.set_option('display.float_format', lambda x: '%.5f' % x)","6b4f6545":"!pip install openpyxl","d5634a3c":"data_control = pd.read_excel(\"..\/input\/ab-testing\/ab_testing.xlsx\", sheet_name=\"Control Group\")\ndata_test = pd.read_excel(\"..\/input\/ab-testing\/ab_testing.xlsx\", sheet_name=\"Test Group\")","ec56bc4a":"data_control.head()\ndata_control.describe()\ndata_control.columns","53531b60":"data_control = data_control[['Impression', 'Click', 'Purchase', 'Earning']]\ndata_control.head()","efd0f4a8":"data_test.head()","577b41af":"data_test = data_test[['Impression', 'Click', 'Purchase', 'Earning']]\ndata_test.head()","78411623":"data_control.groupby(\"Click\")['Purchase'].mean() #Before\ndata_test.groupby(\"Click\")['Purchase'].mean() #The next tried method also increased, but did it increase by chance?\ndata_control[\"Purchase\"].mean() #550.894058\ndata_test[\"Purchase\"].mean() #582.106096 an increase is observed","69366a47":"test_stat, pvalue = shapiro(data_control['Purchase'])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.5891\n# test_stat = 0.9773\n# H0 cannot be rejected\n# Normal Distribution","bb1e9333":"test_stat, pvalue = shapiro(data_test['Purchase'])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.1541\n# test_stat = 0.9589\n# H0 cannot be denied\n# Normal Distribution","db642556":"test_stat, pvalue = levene(data_control[\"Purchase\"],data_test[\"Purchase\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.1083\n# test_stat = 2.6393\n# H0 cannot be denied\n# Variances are also homogeneous\n# Independent two-sample t-test (parametric test) if assumptions are met","19156128":"test_stat, pvalue = ttest_ind(data_control[\"Purchase\"],data_test[\"Purchase\"],\n                              equal_var=True)\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.3493\n# test_star = -0.9416\n# H0 cannot be denied\n# There is no statistically significant difference between the two.","a0219e9c":"test_stat, pvalue = levene(data_control.groupby(\"Impression\")['Purchase'].mean()\n                           ,data_test.groupby(\"Impression\")['Purchase'].mean())\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.1083\n# test_stat = 2.6393","daba4701":"test_stat, pvalue = ttest_ind(data_control.groupby(\"Impression\")['Purchase'].mean(),\n                              data_test.groupby(\"Impression\")['Purchase'].mean(),\n                              equal_var=True)\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.3493\n# test_stat = -0.9416\n# H0 There is no irrefutable difference.","7db880e0":"data_control.groupby(\"Impression\")['Purchase'].mean().sum() #Before 22035.762350\ndata_test.groupby(\"Impression\")['Purchase'].mean().sum() #After 23284.243865\n# H0: No difference\n# H1: There is a difference","bd72dd64":"test_stat, pvalue = shapiro(data_control.groupby(\"Impression\")['Purchase'].mean())\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.5891\n# test_stat = 0.9773\n# H0 cannot be rejected\n# Normal distribution","236fd07d":"test_stat, pvalue = shapiro(data_test.groupby(\"Impression\")['Purchase'].mean())\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n# P-Value = 0.1541\n# test_stat = 0.9589\n# H0 cannot be denied\n# Normal distribution","578a0964":"def pvalue_plot(col, equal_var = True):\n    pvalue_plot_list = []\n    for i in range(1, len(data_control[col].values)):\n        test_stat, pvalue = ttest_ind(data_control.loc[:i, col], data_test.loc[:i, col], equal_var=equal_var)\n        pvalue_plot_list.append(pvalue)\n    plt.plot(pvalue_plot_list)\n    plt.ylabel(\"P-Value\")\n    plt.xlabel(\"Count\")\n    plt.show()","8cfa6f9b":"plt.show(block=True) \n#A code I use in pycharm to be able to print graphs on top of each other","f785726a":"pvalue_plot(col=\"Purchase\", equal_var=True)","d67f702e":"pvalue_plot(col=\"Impression\", equal_var=True)","bb2a59cd":"pvalue_plot(col=\"Click\", equal_var=False)","6259efd6":"pvalue_plot(col=\"Earning\", equal_var=True)","895c6173":"def statistics_(dataframe1,dataframe2,transaction1,transaction2):\n    p=0.05\n    test_stat, pvalue1 = shapiro(dataframe1[transaction1])\n    test_stat, pvalue2 = shapiro(dataframe2[transaction2])\n    test_stat, pvalue3 = levene(dataframe1[transaction1], dataframe2[transaction2])\n    if pvalue1>p and pvalue2>p and pvalue3>p:\n        test_stat, pvalue4 = ttest_ind(dataframe1[transaction1], dataframe2[transaction2],equal_var=True)\n        print(f\"P-Value:{pvalue4}\")\n        if pvalue4 > p:\n            print(f\"{pvalue4} This number {p}'is greater than\")\n        else:\n            print(f\"{pvalue4} This number {p}'is greater than\")\n    elif pvalue1>p and pvalue2>p and pvalue3<p:\n        test_stat, pvalue4 = ttest_ind(dataframe1[transaction1], dataframe2[transaction2], equal_var=False)\n        print(f\"P-Value:{pvalue4}\")\n        if pvalue4 > p:\n            print(f\"{pvalue4} This number {p}'is greater than\")\n        else:\n            print(f\"{pvalue4} This number {p}'is less than\")\n    elif (pvalue1>p and pvalue2<p) or (pvalue1<p and pvalue2>p) or (pvalue1<p and pvalue2<p):\n        test_stat, pvalue = mannwhitneyu(dataframe1[transaction1],\n                                         dataframe2[transaction2])\n        print(f\"P-Value:{pvalue}\")\n        if pvalue>p:\n            print(f\"{pvalue} This number {p}'is greater than\")\n        else:\n            print(f\"{pvalue} This number {p}'is less than\")","e72cb8de":"statistics_(data_control, data_test, \"Impression\", \"Impression\")","8608cfbf":"<a id = \"1\"><\/a><br>\n#### 1. Set up the Hypothesis\n\n- There is no statistically significant difference between the return of\n- H0: \"Average bidding\" and the return of \"maximum bidding\"\n- H1: There is a difference","91c19bda":"#### Purchase  \n\n- It is similar to an EU-tested data.\n- After the 30th data, an increase is observed.\n- P-value up to the 30th has a fluctuating graph. \n- We can infer that it may be less than 0.05.\n- There is no statistically significant difference between Maximum Bidding and Average Bidding.","a6bc7b2a":"- P-Value: 4.954754 This number 0.05'is greater than.\n- There is no statistically significant difference between;\n- The \"Maximum Bidding\" campaign control group and the \"Test group\" with the \"Average Bidding\" campaign. \n- Therefore, we recommend that you continue with the campaign that gives the \"Maximum Bidding\" currently used.\n- Still, you can keep trying because ad views are increasing.","5c336284":"#### What is the (equal_var = True) argument?\n- Equal variances assumed\n- Equal variances not assumed","0a39ac99":"#### Impressions \n- plot H0 hypothesis is always rejected, there is a difference","778cc05c":"#### Click \n- After 12, H0 started to reject the hypothesis. There is a difference.","a7ef2b43":" <a id = \"2.1\"><\/a><br>\n #### 2.1. Normality Assumption","e661b259":"<h2 style='background:#11489c; border:0; color:white'><center>A\/B Testing<\/center><\/h2>\n\n* A\/B testing a landing page is a very powerful way to get many more conversions out of already existing campaigns, as the test gives you the data you need to make the most of your budget, which increases your overall returns\n\n* Businesses are happy they are getting traffic, but at the same time, they are unhappy they\u2019re unable to convert that traffic into customers. Every business struggles with unqualified leads, be it B2B, E-commerce, media and publishing, etc.\n\n* These conversion metrics are always affected by some very common problems, such as issues in the conversion funnel, drops-offs on payment pages, or other common issues\n\n* The data from the test lets you know what words, phrases, image, videos and other such elements on the landing page work best. These may be minor changes but they can create a major improvement in the conversion rate\n\n<a href=\"https:\/\/ibb.co\/ZBpR4jN\"><img src=\"https:\/\/i.ibb.co\/6H7c9MN\/AB-Test-Example.png\" alt=\"AB-Test-Example\" border=\"0\"><\/a>\n\n* Comparing Two Group Means (Independent Two-Sample T-Test)\n* Parametric Comparison\n* Nonparametric Comparison\n* Two Group Ratio Comparison (Two Sample Ratio Test)\n* Mean Comparison of More than Two Groups (ANOVA)\n\n\n<h2 style='background:#11489c; border:0; color:white'><center>Sections<\/center><\/h2>\n\n1. [Set up the Hypothesis](#1)\n2. [Assumption Check](#2)\n    * 2.1 [Normality Assumption](#2.1)\n    * 2.2 [Variance Homogeneity](#2.2)\n3. [Implementation of the Hypothesis](#3)\n    * HO red if p-value < 0.05\n    * Independent two-sample t-test (parametric test) if assumptions are met\n    * Mannwhitneyu test if assumptions are not provided (non-parametric test)\n\n\n<h2 style='background:#11489c; border:0; color:white'><center>Note<\/center><\/h2>\n    \n   * Number 2 directly if normality is not achieved. If variance homogeneity is not provided, an argument is entered for number 1\n   * It can be useful to perform outlier analysis and correction before normality analysis\n\n\n<h2 style='background:#11489c; border:0; color:white'><center>About the Dataset<\/center><\/h2>\n\n* Impression \u2013 Ad views\n* Click \u2013 Click\n* Indicates the number of clicks on the displayed ad.\n* Variables\n* Purchase \u2013 Purchase\n* Indicates the number of products purchased after the ads clicked.\n* Earning \u2013 Earning\n* Boiler obtained after purchased products","927e2473":"<a id = \"2\"><\/a><br>\n#### 2. Assumption Check\n    \n- H0: Assumption of normal distribution is provided.\n- H1: not provided.","fb5492c2":" <a id = \"2.2\"><\/a><br>\n #### 2.2 Variance Homogeneity\n \n- H0: Variances are Homogeneous\n- H1: Variances Are Not Homogeneous","8d8d48d9":"#### Task 3\n    \n    - Which test did you use? \n    - Indicate the reasons...\n\n##### I used parametric hypothesis testing since variance homogeneity and normality assumption were provided.\n\n#### Task 4\n    \n    - I recommend maximum bidding as there is no statistically significant difference between them\n    - The old way is better.\n    - Let's try it to be sure","fa9bf8dd":"#### Earning \n- After 3, H0 is rejected. There is difference."}}