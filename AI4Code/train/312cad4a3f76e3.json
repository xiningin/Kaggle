{"cell_type":{"b98ef188":"code","b5be30ad":"code","83296391":"code","d2c376cd":"code","694f353e":"code","0a6c5e0c":"code","60e686d4":"code","b894d577":"code","640fb836":"code","4ee7eaaa":"markdown","c1ed58b7":"markdown","34bf6925":"markdown"},"source":{"b98ef188":"import numpy as np\nimport pandas as pd\nimport os\n","b5be30ad":"submission = pd.read_csv('\/kaggle\/input\/lish-moa\/sample_submission.csv')\n\npublic_ids = list(submission['sig_id'].values)\n\nsubmission.shape","83296391":"test = pd.read_csv('\/kaggle\/input\/lish-moa\/test_features.csv')\n\ntest_ids = list(test['sig_id'].values)\n\nprivate_ids = list(set(test_ids)-set(public_ids))\n\nlen(private_ids)","d2c376cd":"import glob\n\ndef make_filename(idx):\n    return glob.glob('..\/input\/moa-1082020\/' + str(idx) + '.csv')[0]\n\ndef read_predictions(idx):\n    temp = pd.read_csv(make_filename(idx))\n    return temp\n\n\n# predictions = [read_predictions(idx) for idx in range(1,18)]\n# len(predictions)","694f353e":"predictions = []\npredictions.append(pd.read_csv('..\/input\/blendings\/submissionfeats.csv'))\npredictions.append(pd.read_csv('..\/input\/blendings\/submissionorj.csv'))","0a6c5e0c":"len(predictions)","60e686d4":"target_columns = list(submission.columns)\ntarget_columns.remove('sig_id')","b894d577":"y_pred = pd.DataFrame()\ny_pred['sig_id'] = predictions[0]['sig_id']\n\nfor column in target_columns:\n    column_data = []\n    for i in range(len(predictions)):\n        column_data.append(predictions[i][column])\n    y_pred[column] = np.mean(column_data, axis=0)\n\ny_pred.shape","640fb836":"submission = pd.DataFrame(index = public_ids + private_ids, columns=target_columns)\nsubmission.index.name = 'sig_id'\n\nsubmission[:] = 0\n\nsubmission.loc[y_pred.sig_id,:] = y_pred[target_columns].values\n\nsubmission.loc[test[test.cp_type == 'ctl_vehicle'].sig_id] = 0\n\nsubmission.to_csv('submission.csv', index=True)\n","4ee7eaaa":"## Average","c1ed58b7":"### This notebook is an updated version of  [this kaggle kernel](https:\/\/www.kaggle.com\/pavelvpster\/moa-ensemble)","34bf6925":"## Submit predictions"}}