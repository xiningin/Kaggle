{"cell_type":{"42545c7f":"code","77cf77c1":"code","7650d108":"code","f785c44e":"code","4a9c900a":"code","54f30b0d":"code","48ebd535":"code","71afd45f":"code","ada33b19":"code","f9f3281c":"code","2f82dd0c":"code","b5d6a6c1":"code","37b0dc36":"code","a76febe3":"code","60bc65ca":"code","348e4f63":"code","6c1b5a31":"code","eb636692":"code","c38b5992":"code","6833f048":"code","a9a366a6":"code","617f527b":"code","74522849":"code","3d7ca5ad":"code","f7ce0dea":"code","738efcde":"code","94370b94":"code","42298789":"code","7d58dc2f":"code","de357038":"code","c7e0e933":"code","19b840a1":"code","e947f18c":"code","7d4ac638":"code","2e62470d":"code","97b47ae8":"code","d39d18bd":"code","78dfea91":"code","ce6004ff":"code","861bcf18":"code","8b994078":"code","c6458ad1":"code","01e360ae":"code","61ef1ce1":"code","bf36aa65":"markdown","5ac53b54":"markdown","fe7c0676":"markdown","784db446":"markdown","71bb000e":"markdown","853916bf":"markdown","d0a8e364":"markdown","4232fafb":"markdown","a553d51c":"markdown","694ba600":"markdown","1050015e":"markdown","380a68f7":"markdown","59058492":"markdown","aabe182d":"markdown","4a40cd32":"markdown","4595f1ff":"markdown","25285881":"markdown","67dd9a70":"markdown","9a875601":"markdown","df5a80fd":"markdown","4e8913bd":"markdown","6b9d2627":"markdown"},"source":{"42545c7f":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom plotly import __version__\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot;\nimport cufflinks as cf; init_notebook_mode(connected = True); cf.go_offline()\nimport plotly.graph_objs as go\n%matplotlib inline","77cf77c1":"nba_2017_attendance_df = pd.read_csv('..\/input\/nba_2017_attendance.csv')\nnba_2017_elo_df = pd.read_csv('..\/input\/nba_2017_elo.csv')\nnba_2017_team_valuations_df = pd.read_csv('..\/input\/nba_2017_team_valuations.csv')\nprint(nba_2017_attendance_df.columns, nba_2017_elo_df.columns, nba_2017_team_valuations_df.columns)","7650d108":"nba_2017_team_df_one = pd.merge(nba_2017_attendance_df, nba_2017_elo_df, how='inner', on=['TEAM'])\nnba_2017_team_df = nba_2017_team_df_one.merge(nba_2017_team_valuations_df, how='inner', on=['TEAM'])\nnba_2017_team_df.head()","f785c44e":"nba_2017_br_df = pd.read_csv('..\/input\/nba_2017_br.csv')\nprint(nba_2017_br_df.columns)\nnba_2017_pie_df = pd.read_csv('..\/input\/nba_2017_pie.csv')\nprint(nba_2017_pie_df.columns)\nnba_2017_salary_df = pd.read_csv('..\/input\/nba_2017_salary.csv')\nprint(nba_2017_salary_df.columns)\nnba_2017_real_plus_minus_df = pd.read_csv('..\/input\/nba_2017_real_plus_minus.csv')\nprint(nba_2017_real_plus_minus_df.columns)","4a9c900a":"nba_2017_player_wikipedia_df = pd.read_csv('..\/input\/nba_2017_player_wikipedia.csv')\nnba_2017_twitter_players_df = pd.read_csv('..\/input\/nba_2017_twitter_players.csv')\nprint(nba_2017_player_wikipedia_df.columns, nba_2017_twitter_players_df.columns)","54f30b0d":"nba_2017_team_df.head()","48ebd535":"fig = plt.figure(figsize=(12,5))\naxes0 = plt.subplot(1,3,1)\naxes0 = sns.boxplot(x='CONF', y='TOTAL', data=nba_2017_team_df, palette='coolwarm')\naxes0.set_title('Total Attendance')\n\naxes1 = plt.subplot(1,3,2)\naxes1 = sns.stripplot(x='CONF', y='AVG', data=nba_2017_team_df, palette='seismic')\naxes1.set_title('Average Attendance')\n\naxes2 = plt.subplot(1,3,3)\naxes2 = sns.swarmplot(x='CONF', y='PCT', data=nba_2017_team_df, palette='Set1')\naxes2.set_title('Percent Attendance')\n\nplt.tight_layout()","71afd45f":"fig = plt.figure(figsize=(8,6))\nnba_2017_team_df_corr = nba_2017_team_df.corr()\nsns.heatmap(nba_2017_team_df_corr, cmap='cool', linewidth=1, linecolor='white')\n# It seems that values of teams have bigger influence on PCT than ELO","ada33b19":"trace = go.Scatter3d(\n    x=nba_2017_team_df['ELO'],\n    y=nba_2017_team_df['VALUE_MILLIONS'],\n    z=nba_2017_team_df['PCT'],\n    mode='markers',\n    text=nba_2017_team_df['TEAM'],\n    marker=dict(\n        size=12, \n        color=nba_2017_team_df['PCT'],\n        colorscale='Viridis',  \n        opacity=0.8\n    )\n)\n\ndata = [trace]\nlayout = go.Layout(\n    showlegend=False,\n    title='The Relationship Between PCT and ELO\/Value',\n    scene = dict(\n        xaxis = dict(title='X: ELO'),\n        yaxis = dict(title='Y: VALUE_MILLIONS'),\n        zaxis = dict(title='Z: PCT'),\n    ),\n    width=800,\n    height=600,\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","f9f3281c":"fig = plt.figure(figsize=(12,6))\naxes = sns.lmplot(x='ELO', y='PCT', data=nba_2017_team_df , hue = 'CONF', palette = 'coolwarm', markers = ['o', 'v'], scatter_kws = {'s' : 50})","2f82dd0c":"fig = plt.figure(figsize=(12,6))\nsns.lmplot(x='VALUE_MILLIONS', y='PCT', data=nba_2017_team_df, hue='CONF', palette='coolwarm',\n                  markers = ['o', 'v'], scatter_kws = {'s' : 50})","b5d6a6c1":"pct_value_result = smf.ols('PCT~VALUE_MILLIONS', data=nba_2017_team_df).fit()\npct_elo_result = smf.ols('PCT~ELO', data=nba_2017_team_df).fit()\nprint(pct_value_result.summary())\nprint(pct_elo_result.summary())","37b0dc36":"nba_2017_br_df.head()","a76febe3":"nba_2017_pie_df.head()","60bc65ca":"nba_2017_real_plus_minus_df.head()","348e4f63":"nba_2017_salary_df.head()","6c1b5a31":"nba_2017_br_df.rename(columns={'Player':'PLAYER'}, inplace=True)\n\nplayers = []\nfor item in nba_2017_real_plus_minus_df['NAME']:\n    player, position = item.split(',')\n    players.append(player)\nnba_2017_real_plus_minus_df['PLAYER'] = players\nnba_2017_real_plus_minus_df.drop(['NAME'], axis=1, inplace=True)\n\nnba_2017_salary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)","eb636692":"nba_2017_player_one = pd.merge(nba_2017_br_df, nba_2017_pie_df, on='PLAYER', how='inner')\nnba_2017_player_two = nba_2017_player_one.merge(nba_2017_real_plus_minus_df, on='PLAYER', how='inner')\nnba_2017_player = nba_2017_player_two.merge(nba_2017_salary_df, on='PLAYER', how='inner')","c38b5992":"print(nba_2017_player.columns)\nnba_2017_player.head()","6833f048":"nba_2017_player_ability = nba_2017_player[['PLAYER', 'AGE', 'FG', 'FGA', 'FG%', '3P', '3PA',\n                                          '3P%', '2P', '2PA', '2P%', 'eFG%', 'FT', 'FTA', 'FTA',\n                                          'ORB', 'DRB', 'TRB', 'AST', 'STL', 'BLK', 'TOV',\n                                          'PF', 'MPG', 'ORPM', 'DRPM', 'RPM', 'PIE', 'W', 'L']]","a9a366a6":"nba_2017_player_ability['WIN_PERCENTAGE'] = nba_2017_player_ability['W'] \/ (nba_2017_player_ability['W'] + nba_2017_player_ability['L'])\nnba_2017_player_ability.drop(['W', 'L'], axis=1, inplace=True)","617f527b":"nba_2017_player_ability = nba_2017_player_ability.rename(columns={'3P%': 'THREE_PERCENT', '2P%': 'TWO_PERCENT'})","74522849":"nba_2017_player_ability_cor = nba_2017_player_ability.corr()\nfig = plt.figure(figsize=(12,10))\nsns.heatmap(nba_2017_player_ability_cor, cmap='coolwarm', linewidth=1, linecolor='white')","3d7ca5ad":"pie_3p_result = smf.ols('PIE~THREE_PERCENT', data=nba_2017_player_ability).fit()\nprint(pie_3p_result.summary())","f7ce0dea":"pie_2p_result = smf.ols('PIE~TWO_PERCENT', data=nba_2017_player_ability).fit()\nprint(pie_2p_result.summary())","738efcde":"win_3p_result = smf.ols('WIN_PERCENTAGE~THREE_PERCENT', data=nba_2017_player_ability).fit()\nprint(win_3p_result.summary())","94370b94":"win_2p_result = smf.ols('WIN_PERCENTAGE~TWO_PERCENT', data=nba_2017_player_ability).fit()\nprint(win_2p_result.summary())","42298789":"pie_stl_result = smf.ols('PIE~STL', data=nba_2017_player_ability).fit()\nprint(pie_stl_result.summary())","7d58dc2f":"pie_blk_result = smf.ols('PIE~BLK', data=nba_2017_player_ability).fit()\nprint(pie_blk_result.summary())","de357038":"win_stl_result = smf.ols('WIN_PERCENTAGE~STL', data=nba_2017_player_ability).fit()\nprint(win_stl_result.summary())","c7e0e933":"win_blk_result = smf.ols('WIN_PERCENTAGE~BLK', data=nba_2017_player_ability).fit()\nprint(win_blk_result.summary())","19b840a1":"trace = go.Scatter(\n    x=nba_2017_player_ability['ORPM'],\n    y=nba_2017_player_ability['MPG'],\n    mode='markers',\n    text=nba_2017_player_ability['PLAYER'],\n    marker=dict(\n        size=12,               \n        color=nba_2017_player_ability['ORPM'],\n        colorscale='Viridis',  \n        opacity=0.8\n    )\n)\n\ndata = [trace]\nlayout = go.Layout(\n    showlegend=False,\n    title='NBA Players ORPM',\n    scene = dict(\n        xaxis = dict(title='X: ORPM'),\n        yaxis = dict(title='Y: MPG'),\n    ),\n    width=800,\n    height=600,\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","e947f18c":"trace = go.Scatter(\n    x=nba_2017_player_ability['DRPM'],\n    y=nba_2017_player_ability['MPG'],\n    mode='markers',\n    text=nba_2017_player_ability['PLAYER'],\n    marker=dict(\n        size=12,               \n        color=nba_2017_player_ability['DRPM'],\n        colorscale='Viridis',  \n        opacity=0.8\n    )\n)\n\ndata = [trace]\nlayout = go.Layout(\n    showlegend=False,\n    title='NBA Players DRPM',\n    scene = dict(\n        xaxis = dict(title='X: DRPM'),\n        yaxis = dict(title='Y: MPG'),\n    ),\n    width=800,\n    height=600,\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","7d4ac638":"trace = go.Scatter3d(\n    x=nba_2017_player_ability['ORPM'],\n    y=nba_2017_player_ability['DRPM'],\n    z=nba_2017_player_ability['PIE'],\n    mode='markers',\n    text=nba_2017_player_ability['PLAYER'],\n    marker=dict(\n        size=12,               \n        color=nba_2017_player_ability['PIE'],\n        colorscale='Viridis',  \n        opacity=0.8\n    )\n)\n\ndata = [trace]\nlayout = go.Layout(\n    showlegend=False,\n    title='The Relationship Between PIE and ORPM\/DRPM',\n    scene = dict(\n        xaxis = dict(title='X: ORPM'),\n        yaxis = dict(title='Y: DRPM'),\n        zaxis = dict(title='Z: PIE'),\n    ),\n    width=800,\n    height=600,\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","2e62470d":"trace = go.Scatter3d(\n    x=nba_2017_player_ability['ORPM'],\n    y=nba_2017_player_ability['DRPM'],\n    z=nba_2017_player_ability['WIN_PERCENTAGE'],\n    mode='markers',\n    text=nba_2017_player_ability['PLAYER'],\n    marker=dict(\n        size=12,               \n        color=nba_2017_player_ability['WIN_PERCENTAGE'],\n        colorscale='Viridis',  \n        opacity=0.8\n    )\n)\n\ndata = [trace]\nlayout = go.Layout(\n    showlegend=False,\n    title='The Relationship Between WIN_PERCENTAGE and ORPM\/DRPM',\n    scene = dict(\n        xaxis = dict(title='X: ORPM'),\n        yaxis = dict(title='Y: DRPM'),\n        zaxis = dict(title='Z: PIE'),\n    ),\n    width=800,\n    height=600,\n)\nfig = go.Figure(data=data, layout=layout)\niplot(fig)","97b47ae8":"nba_2017_player_wikipedia_df.head()","d39d18bd":"nba_2017_player_wikipedia_df.drop(['Unnamed: 0', 'timestamps', 'wikipedia_handles'], axis=1, inplace=True)\nnba_2017_player_wikipedia_df = nba_2017_player_wikipedia_df.rename(columns={'names':'PLAYER', 'pageviews':'PAGEVIEWS'})\nnba_2017_player_wikipedia_avg_df = nba_2017_player_wikipedia_df.groupby(['PLAYER'], as_index=False).mean()\nnba_2017_player_wikipedia_avg_df.head()","78dfea91":"nba_2017_twitter_players_df.head()","ce6004ff":"nba_2017_player_social = pd.merge(nba_2017_twitter_players_df, nba_2017_player_wikipedia_avg_df,\n                                 on='PLAYER', how='inner')\nnba_2017_player_social_power = nba_2017_player_social.merge(nba_2017_player_ability[['PLAYER','PIE','WIN_PERCENTAGE']],\n                                                           on='PLAYER', how='inner')\nnba_2017_player_social_power.head()","861bcf18":"nba_2017_player_social_power_cor = nba_2017_player_social_power.corr()\nfig = plt.figure(figsize=(12,8))\nsns.heatmap(nba_2017_player_social_power_cor, cmap='coolwarm', linewidth=1, linecolor='white')","8b994078":"sns.jointplot(x='PIE', y='TWITTER_FAVORITE_COUNT', data=nba_2017_player_social_power, kind='reg')","c6458ad1":"sns.jointplot(x='PIE', y='TWITTER_RETWEET_COUNT', data=nba_2017_player_social_power, kind='reg')","01e360ae":"win_twitter_result = smf.ols('WIN_PERCENTAGE~TWITTER_FAVORITE_COUNT', data=nba_2017_player_social_power).fit()\nprint(win_twitter_result.summary())","61ef1ce1":"win_wikipedia_result = smf.ols('WIN_PERCENTAGE~PAGEVIEWS', data=nba_2017_player_social_power).fit()\nprint(win_wikipedia_result.summary())","bf36aa65":"Stephen Curry is actually the best player for ORPM","5ac53b54":"### NBA Team Performance","fe7c0676":"## Exploratory Data Analysis","784db446":"#### Clean Data and Merge Dataframes","71bb000e":"## Prepare Data","853916bf":"#### Merge Different Dataframe","d0a8e364":"These two regression results show that we can use players' social power to predict their winning metrics","4232fafb":"### Players Social Power\nIn this part, I want to explore the players' social power. Also, we can see the relationship between social power and winning metrics","a553d51c":"#### Data Cleaning and Variables Selection","694ba600":"It shows that any players with higher PIE on the court tend to be much more popular and have much more social power","1050015e":"### NBA Team Performance's Deep Learning\nExplore which factor will influence teams' percent attendance","380a68f7":"##### Offense","59058492":"#### Data Exploration","aabe182d":"### NBA Player Performance's Deep Learning\nExplore which kind of ability will influence players' performance and give some insights about how one player should make himself better","4a40cd32":"The results show that steals can increase the possibility of winning the games because one\nteam's steal means another one's erros. The more steals, the more opportunity to turnover.","4595f1ff":"#### Player Social Power and Performance","25285881":"##### Defense","67dd9a70":"### NBA Players' Court Performance","9a875601":"The results show that though value is much more related with PCT, it is not statistically significant. Therefore we should focus on the relationship between ELO and PCT, which means that the team which wants to increase its audience must try their best to get better players.","df5a80fd":"### NBA Players' Social Power","4e8913bd":"Even though the NBA players focus more and more on 3-point, the 2-point is still very important on the court. Therefore, every player should also practics 2-point ","6b9d2627":"##### Player's ORPM and DRPM"}}