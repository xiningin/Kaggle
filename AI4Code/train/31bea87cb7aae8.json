{"cell_type":{"fc459bf6":"code","c351531f":"code","b420d37c":"code","85913906":"code","37e877d9":"code","c68dddf1":"code","b77a81d2":"code","cc60a3d6":"code","6f229cbd":"code","c36bb3b6":"code","a5e92150":"code","c905f631":"code","411262ee":"code","968e2356":"code","0fba32e0":"code","f0d58315":"code","eb34cf47":"code","7ca2ad1a":"code","84ec7292":"code","cf3db0aa":"code","7e30d54d":"code","047faf23":"code","304abe91":"code","36cbf114":"code","8bf2d5bf":"code","1194144e":"code","7a5541cd":"markdown","b828d36e":"markdown","7de52a70":"markdown","4998eee9":"markdown","53239692":"markdown","8da19e0d":"markdown","7ef80618":"markdown","35e39295":"markdown","c63271a0":"markdown","e7817669":"markdown","13bbbf3a":"markdown","755d984b":"markdown","322eb1c4":"markdown"},"source":{"fc459bf6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","c351531f":"#importing libraries\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\n#Analysing datetime\nimport datetime as dt\nfrom datetime import datetime\n#plotting geographical data\nimport folium\nimport rasterio as rio\n#file system mgmt\nimport os\n#supress warnings\nimport warnings\nwarnings.filterwarnings('ignore')","b420d37c":"#Total number of power plants in puerto rico\nglobal_power_plants = pd.read_csv('..\/input\/ds4g-environmental-insights-explorer\/eie_data\/gppd\/gppd_120_pr.csv')\nglobal_power_plants.head().T","85913906":"#number of different power plants\nglobal_power_plants.shape","37e877d9":"#lets check the different kinds of power plants based on primary fuel used\nsns.barplot(x=global_power_plants['primary_fuel'].value_counts().index, \n            y=global_power_plants['primary_fuel'].value_counts())\nplt.ylabel('count')","c68dddf1":"global_power_plants['commissioning_year'].value_counts()","b77a81d2":"#The different sources of data\nfig = plt.gcf()\nfig.set_size_inches(10,6)\ncolors = ['dodgerblue', 'plum', '#F0A30A','#8c564b','orange','green','yellow']\nglobal_power_plants['source'].value_counts(ascending=True).plot(kind='barh',color=colors,linewidth=2,edgecolor='black')","cc60a3d6":"#Who  is the ownner the power plants\n\nfig = plt.gcf()\nfig.set_size_inches(10, 6)\ncolors = ['dodgerblue', 'plum', '#F0A30A','#8c564b','orange','green','yellow'] \nglobal_power_plants['owner'].value_counts(ascending=True).plot(kind='barh',color=colors)\n","6f229cbd":"# Total capacity of all the plants\ntotal_capacity_mw = global_power_plants['capacity_mw'].sum()\nprint('Total Installed Capacity: '+'{:.2f}'.format(total_capacity_mw) + ' MW')","c36bb3b6":"capacity = (global_power_plants.groupby(['primary_fuel'])['capacity_mw'].sum()).to_frame()\ncapacity = capacity.sort_values('capacity_mw',ascending=False)\ncapacity['percentage_of_total'] = (capacity['capacity_mw']\/total_capacity_mw)*100\ncapacity","a5e92150":"fig = plt.gcf()\nfig.set_size_inches(10, 6)\ncolors = ['dodgerblue', 'plum', '#F0A30A','#8c564b','orange','green','yellow'] \ncapacity['percentage_of_total'].plot(kind='bar',color=colors)","c905f631":"# Total generation of all the plants\ntotal_gen_mw = global_power_plants['estimated_generation_gwh'].sum()\nprint('Total Generatation: '+'{:.2f}'.format(total_gen_mw) + ' GW')","411262ee":"generation = (global_power_plants.groupby(['primary_fuel'])['estimated_generation_gwh'].sum()).to_frame()\ngeneration = generation.sort_values('estimated_generation_gwh',ascending=False)\ngeneration['percentage_of_total'] = (generation['estimated_generation_gwh']\/total_gen_mw)*100\ngeneration","968e2356":"# Code source: https:\/\/www.kaggle.com\/paultimothymooney\/overview-of-the-eie-analytics-challenge\nfrom folium import plugins      \ndef plot_points_on_map(dataframe,begin_index,end_index,latitude_column,latitude_value,longitude_column,longitude_value,zoom):\n    df = dataframe[begin_index:end_index]\n    location = [latitude_value,longitude_value]\n    plot = folium.Map(location=location,zoom_start=zoom,tiles = 'Stamen Terrain')\n    \n    for i in range(0,len(df)):\n        popup = folium.Popup(str(df.primary_fuel[i:i+1]))\n        folium.Marker([df[latitude_column].iloc[i],\n                       df[longitude_column].iloc[i]],\n                       popup=popup,icon=folium.Icon(color='white',icon_color='red',icon ='bolt',prefix='fa',)).add_to(plot)\n    return(plot)\n\ndef overlay_image_on_puerto_rico(file_name,band_layer,lat,lon,zoom):\n    band = rio.open(file_name).read(band_layer)\n    m = folium.Map([lat, lon], zoom_start=zoom)\n    folium.raster_layers.ImageOverlay(\n        image=band,\n        bounds = [[18.6,-67.3,],[17.9,-65.2]],\n        colormap=lambda x: (1, 0, 0, x),\n    ).add_to(m)\n    return m\n\ndef split_column_into_new_columns(dataframe,column_to_split,new_column_one,begin_column_one,end_column_one):\n    for i in range(0, len(dataframe)):\n        dataframe.loc[i, new_column_one] = dataframe.loc[i, column_to_split][begin_column_one:end_column_one]\n    return dataframe\n    ","0fba32e0":"global_power_plants = split_column_into_new_columns(global_power_plants,'.geo','latitude',50,66)\nglobal_power_plants = split_column_into_new_columns(global_power_plants,'.geo','longitude',31,48)\nglobal_power_plants['latitude'] = global_power_plants['latitude'].astype(float)\na = np.array(global_power_plants['latitude'].values.tolist()) \nglobal_power_plants['latitude'] = np.where(a < 10, a+10, a).tolist() \n\nlat=18.200178; lon=-66.664513 # Puerto Rico's co-ordinates\nplot_points_on_map(global_power_plants,0,425,'latitude',lat,'longitude',lon,9)","f0d58315":"image = '\/kaggle\/input\/ds4g-environmental-insights-explorer\/eie_data\/s5p_no2\/s5p_no2_20180701T161259_20180707T175356.tif'\n\n# Opening the file\nraster = rio.open(image)\n\n# All Metadata for the whole raster dataset\nraster.meta","eb34cf47":"from rasterio.plot import show\nshow(raster)","7ca2ad1a":"# Plotting the red channel.\nshow((raster, 4), cmap='Reds')","84ec7292":"# Calculating the dimensions of the image on earth in metres\nsat_data = raster\n\nwidth_in_projected_units = sat_data.bounds.right - sat_data.bounds.left\nheight_in_projected_units = sat_data.bounds.top - sat_data.bounds.bottom\nprint(\"Width: {}, Height: {}\".format(width_in_projected_units, height_in_projected_units))\nprint(\"Rows: {}, Columns: {}\".format(sat_data.height, sat_data.width))","cf3db0aa":"# Upper left pixel\nrow_min = 0\ncol_min = 0\n# Lower right pixel.  Rows and columns are zero indexing.\nrow_max = sat_data.height - 1\ncol_max = sat_data.width - 1\n# Transform coordinates with the dataset's affine transformation.\ntopleft = sat_data.transform * (row_min, col_min)\nbotright = sat_data.transform * (row_max, col_max)\nprint(\"Top left corner coordinates: {}\".format(topleft))\nprint(\"Bottom right corner coordinates: {}\".format(botright))","7e30d54d":"print(sat_data.count)\n\n# sequence of band indexes\nprint(sat_data.indexes)","047faf23":"# Load the 12 bands into 2d arrays\nb01, b02, b03, b04,b05,b06,b07,b08, b09,b10, b11, b12 = sat_data.read()","304abe91":"# Displaying the second band.\n\nfig = plt.imshow(b02)\nplt.show()","36cbf114":"fig = plt.imshow(b03)\nfig.set_cmap('gist_earth')\nplt.show()","8bf2d5bf":"fig = plt.imshow(b04)\nfig.set_cmap('inferno')\nplt.colorbar()\nplt.show()","1194144e":"# Displaying the infrared band.\n\nfig = plt.imshow(b08)\nfig.set_cmap('winter')\nplt.colorbar()\nplt.show()","7a5541cd":"A geographical view of the various Power Plants\nWe can use the power plant dataset to visualise the existing locations of the various power plant. We will extract the latitudes and longitudes from the geo column","b828d36e":"* Driver : Data Format\n* dtype : data type\n* width and Height : The dimensions of the image are : 475 X 148\n* count : There are 12 bands in the image\n* crs: Coordinate Reference Systems which refers to the way in which spatial data that represent the earth\u2019s surface.A particular CRS can be referenced by its EPSG code (i.e.,epsg:4121). The EPSG is a structured dataset of CRS and Coordinate Transformations(link]\n* transform : Affine transform (how raster is scaled, rotated, skewed, and\/or translated)","7de52a70":"Before analysing further, let's understand what some of the attributes mean.\n\n* capacity_mw - electrical generating capacity in megawatts\n* commissioning_year - year of plant operation, weighted by unit-capacity when data is available\n* estimated_generation_gwh - estimated annual electricity generation in gigawatt-hours\n* generation_gwh_2013 - electricity generation in gigawatt-hours for the year 2013\n* gppd_idnr - estimated annual electricity generation in gigawatt-hours for the year 2014\n* name - name or title of the power plant\n* primary_fuel - energy source used in primary electricity generation or export\n* wepp_id - a reference to a unique plant identifier in the widely-used PLATTS-WEPP datase\n* year_of_capacity_data -year the capacity information was reported\n* source - entity reporting the data\n* owner - majority shareholder of the power plant","4998eee9":"How old are the plants\n\nPower plants built decades ago tend to pollute more since they donot meet the newer anti-pollution requirements.","53239692":"Bands\nThe satellites cover the full earth on 13 bands with a revisiting every 5 days.\n\n![image.png](attachment:image.png)","8da19e0d":"Well, a lot of powerplants donot have their date of Commission. The plants are as old as 1942 and the latest one belongs to the year 2012","7ef80618":"Total Installed Capacity\nThe Total Installed capacity of a power plant refers to the maximum output of electricity that it can produce under ideal conditions but this won\u2019t necessarily be the actual amount of electricity produced.It is usually expressed in megawatts (MW)","35e39295":"Exploring the Global Power Plant Database for Puerto Rico\nThe given gppd_120_pr.csv consists of all the power plants which belongs to the Puerto Rico, an unincorporated territory of the United States located in the northeast Caribbean Sea.The latitude of Puerto Rico is 18.200178, and the longitude is -66.664513. The island has been chosen for the analysis since there are fewer confounding factors from nearby areas. Puerto Rico also offers a unique fuel mix and distinctive energy system layout that should make it easier to isolate pollution attributable to power generation in the remote sensing data.","c63271a0":"The majority of the data came from CEPR followed by PREPA(Puerto Rico Electric Power Authority)\n","e7817669":"What is the Emission factor?  A lot of activities today results in the release of Green House Gases(GHG) in the atmosphere. There are various activities that contribute to the release of GHG like burning fuel, vehicles, Power Plants, etc. Therefore, in order to estimate GHG emissions per unit of available activity, we need to use a factor called emission factor (EF).[source] For example: how many kgs of GHG are emitted by 1 kWh of natural gas? Thus, an emission factor is a coefficient that converts any activity's data into GHG emissions. This factor attempts to relate the quantity of a pollutant released to the atmosphere with an activity associated with the release of that pollutant.\n![image.png](attachment:image.png)","13bbbf3a":"Oil run plants consitutes about 68% of Puerto Rico\u2019s total installed capacity and natural gas accounted for 18%. Coal continues to fuel 7% of generation, while renewables supplied around 5.5%.","755d984b":"PREPA is a government agency that owns the electricity transmission and distribution systems for the main island, Vieques, and Culebra, as well as 80% of the electricity generating capacit","322eb1c4":"Estimated generation\nElectricity generation, on the other hand, refers to the amount of electricity that is produced over a specific period of time. This is usually measured in kilowatt-hours, megawatt-hours o gigawatt-hours."}}