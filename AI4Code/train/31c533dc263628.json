{"cell_type":{"3be231b5":"code","0d43042c":"code","bc147897":"code","7a935589":"code","1b212db9":"code","9ff82225":"code","5cece02e":"code","c4066366":"code","3ebd5e1b":"code","23907804":"code","f896f427":"code","9c2e51cb":"code","b9c3e377":"code","5869e2a0":"code","db8153d1":"code","6c3c8313":"code","7e57bf13":"code","48cb6e95":"code","60ce9dc7":"code","2ac8ac53":"code","74ef2323":"code","5b8a0a15":"code","75c8d253":"code","5be84885":"code","f3673104":"code","7d64fa53":"code","ac1289fd":"code","92db0c01":"code","67c95073":"code","1f0e9d68":"code","5f2baed0":"code","46b5e486":"code","9b5c297f":"code","2facc530":"markdown","481c76bb":"markdown","2db5e7d8":"markdown","bfce8829":"markdown","a9e4a371":"markdown","a67a1bba":"markdown","c2b08e3c":"markdown","4677e8be":"markdown","fa28b27c":"markdown","a9710d4e":"markdown","fdfec120":"markdown","45113f35":"markdown","16ff6fd3":"markdown","e7188bda":"markdown"},"source":{"3be231b5":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","0d43042c":"data = pd.read_csv('..\/input\/international-football-results-from-1872-to-2017\/results.csv')\ndata.head()","bc147897":"data.info()","7a935589":"data[\"date\"] = pd.to_datetime(data[\"date\"])\ndata[\"date_month\"] = data[\"date\"].dt.month\ndata[\"date_month\"].value_counts().sort_index()","1b212db9":"plt.title(\"Number of game days per month\")\nsns.countplot(data=data,x=\"date_month\" )\nplt.show()","9ff82225":"june = data[data[\"date_month\"]==6]\njune = june[june[\"tournament\"].isin(june[\"tournament\"].value_counts().head(7).index)]\nplt.figure(figsize=(20,5))\nsns.countplot(data=june,x=\"tournament\")\nplt.show()","5cece02e":"def find_win(row):\n    if row[\"home_score\"]> row[\"away_score\"]:\n        return row[\"home_team\"]\n    elif row[\"home_score\"]< row[\"away_score\"]:\n        return row[\"away_team\"]\n    else:\n        return \"draw\"\n\ndef find_homeaway(row):\n    if row[\"home_team\"] == row[\"winning_team\"]:\n        return \"Home\"\n    elif row[\"away_team\"] == row[\"winning_team\"]:\n        return \"Away\"\n    else:\n        return \"Draw\"","c4066366":"data[\"winning_team\"] = data.apply(find_win,axis=1)\ndata[\"winning_team2\"] = data.apply(find_homeaway,axis=1)\ndata.head()","3ebd5e1b":"table = pd.pivot_table(data,index=\"winning_team2\",values=\"tournament\",aggfunc=\"count\").reset_index()\nP = table[\"tournament\"].unique()","23907804":"plt.title(\"Home away winning percentage\")\nplt.pie(P, \n        explode = (0, 0, 0.1),\n        labels=[\"Away\",\"Draw\",\"Home\"],\n        shadow=True,\n        autopct='%1.1f%%',\n         )\nplt.show()","f896f427":"data[\"total_score\"] = data[\"home_score\"] + data[\"away_score\"]\ndata = data[[\"date\",\"home_team\",\"away_team\",\"home_score\",\"away_score\",\"total_score\",\"winning_team\",\"winning_team2\",\n            \"tournament\",\"city\",\"country\",\"neutral\"]]\ndata.head()","9c2e51cb":"home_mean = data[\"home_score\"].mean()\naway_mean = data[\"away_score\"].mean()\nprint(\"The average score on the home team is\",home_mean)\nprint(\"The average score on the away team is\",away_mean)","b9c3e377":"sns.scatterplot(x=\"home_score\", y=\"away_score\", data=data)\nplt.show()","5869e2a0":"away_team = pd.DataFrame(data.groupby('away_team')['away_score'].sum().index)\naway_score = pd.DataFrame(data.groupby('away_team')['away_score'].sum().values,columns=['Score'])\naway_score_team=pd.concat([away_team,away_score],axis=1)\naway_score_team = away_score_team.sort_values(by=\"Score\",ascending = False).head(15)\n","db8153d1":"home_team = pd.DataFrame(data.groupby('home_team')['home_score'].sum().index)\nhome_score = pd.DataFrame(data.groupby('home_team')['home_score'].sum().values,columns=['Score'])\nhome_score_team=pd.concat([home_team,home_score],axis=1)\nhome_score_team = home_score_team.sort_values(by=\"Score\",ascending = False).head(15)","6c3c8313":"figure,((ax1),(ax2)) = plt.subplots(nrows=2,ncols=1)\nfigure.set_size_inches([20,10])\nsns.barplot(data = away_score_team, x=\"away_team\" , y=\"Score\" , ax=ax2)\nsns.barplot(data = home_score_team, x=\"home_team\" , y=\"Score\" , ax=ax1)\nplt.show()","7e57bf13":"away_win = pd.DataFrame(data.groupby('away_team')['away_score'].count().values,columns=['win_count'])\nhome_win = pd.DataFrame(data.groupby('home_team')['home_score'].count().values,columns=['win_count'])\n\naway_win_team=pd.concat([away_team,away_win],axis=1)\nhome_win_team=pd.concat([home_team,home_win],axis=1)\n\naway_win_team = away_win_team.sort_values(by=\"win_count\",ascending = False).head(15)\nhome_win_team = home_win_team.sort_values(by=\"win_count\",ascending = False).head(15)","48cb6e95":"figure,((ax1),(ax2)) = plt.subplots(nrows=2,ncols=1)\nfigure.set_size_inches([20,10])\n\nsns.barplot(data = away_win_team, x=\"away_team\" , y=\"win_count\" , ax=ax2)\nsns.barplot(data = home_win_team, x=\"home_team\" , y=\"win_count\" , ax=ax1)\nplt.show()","60ce9dc7":"worldcup = data[data[\"tournament\"].isin([\"FIFA World Cup\"])]\nprint(worldcup.shape)\nworldcup.head()","2ac8ac53":"home_team = pd.DataFrame(worldcup.groupby('home_team')['home_score'].sum().index)\nhome_score = pd.DataFrame(worldcup.groupby('home_team')['home_score'].sum().values,columns=['score'])\nhome_score_team= pd.concat([home_team,home_score],axis=1)\n\naway_team = pd.DataFrame(worldcup.groupby('away_team')['away_score'].sum().index)\naway_score = pd.DataFrame(worldcup.groupby('away_team')['away_score'].sum().values,columns=['score'])\naway_score_team= pd.concat([away_team,away_score],axis=1)","74ef2323":"home_team = pd.DataFrame(worldcup.groupby('home_team')['winning_team'].count().index)\nhome_win = pd.DataFrame(worldcup.groupby('home_team')['winning_team'].count().values,columns=['win'])\nhome_win_team= pd.concat([home_team,home_win],axis=1)\n\naway_team = pd.DataFrame(worldcup.groupby('away_team')['winning_team'].count().index)\naway_win = pd.DataFrame(worldcup.groupby('away_team')['winning_team'].count().values,columns=['win'])\naway_win_team= pd.concat([away_team,away_win],axis=1)","5b8a0a15":"worldcup_score = home_score_team.merge(away_score_team,left_on=\"home_team\",right_on=\"away_team\").drop(\"away_team\",axis=1)\nworldcup_score[\"total_score\"] = worldcup_score[\"score_x\"] + worldcup_score[\"score_y\"]\nworldcup_score = worldcup_score.sort_values(by=\"total_score\",ascending=False).head(15)\nworldcup_score","75c8d253":"worldcup_win= home_win_team.merge(away_win_team,left_on=\"home_team\",right_on=\"away_team\").drop(\"away_team\",axis=1)\nworldcup_win[\"total_win\"] = worldcup_win[\"win_x\"] + worldcup_win[\"win_y\"]\nworldcup_win = worldcup_win.sort_values(by=\"total_win\",ascending=False).head(15)\nworldcup_win","5be84885":"plt.figure(figsize=(15,5))\nplt.title('Number of scores by country')\nsns.barplot(data = worldcup_score , x=\"home_team\", y=\"total_score\")\nplt.show()","f3673104":"plt.figure(figsize=(15,5))\nplt.title('Number of wins by country')\nsns.barplot(data = worldcup_win , x=\"home_team\", y=\"total_win\")\nplt.show()","7d64fa53":"merged = pd.merge(worldcup_win,worldcup_score)\nmerged = merged[[\"home_team\",\"total_win\",\"total_score\"]]\nmerged.corr()","ac1289fd":"sns.heatmap(merged.corr(),annot=True)\nplt.show()","92db0c01":"tour = pd.DataFrame(data.groupby(\"tournament\")[\"total_score\"].mean()).reset_index().sort_values(by=\"total_score\",ascending=False).head(10)\ntour","67c95073":"plt.figure(figsize=(23,5))\nplt.title(\"Average score by tournament\")\nsns.barplot(data=tour,x=\"tournament\",y=\"total_score\")\nplt.show()","1f0e9d68":"neu = pd.DataFrame(data.groupby(\"neutral\")[\"total_score\"].mean()).reset_index()","5f2baed0":"plt.title(\"Average score by neutral\")\nsns.barplot(data=neu,x=\"neutral\",y=\"total_score\")\nplt.show()","46b5e486":"country = pd.DataFrame(data[\"country\"].value_counts()).head(15).reset_index()\ncountry.columns = [\"country\",\"count\"]","9b5c297f":"plt.figure(figsize=(23,7))\nplt.title(\"Competition Places (National)\")\nsns.barplot(data=country,x=\"country\",y=\"count\")\nplt.show()","2facc530":"### 2. Home & away  analysis","481c76bb":"You can see that there is more game in June than in other months. We compared the June competition to see why there are so many games in June. The results show that the FIFA World Cup qualification and FIFA World Cup are more competitive than other months.","2db5e7d8":"### 1. Number of game days","bfce8829":"---","a9e4a371":"There are 8000 data related to World Cup competitions including regional qualification. Based on this data, I'll analyze it.","a67a1bba":"Next, let's compare the home team's score with the away team. Before we compare, we will create a total score column, and then arrange the column order.","c2b08e3c":"### 3. FIFA World Cup analysis","4677e8be":"Just like winning percentage, you can see that the home team's scoring average is higher than the away team's. Next, we will look at the top scorers and the most wins per home away.","fa28b27c":"We can see a lot of facts. At home, Brazil has the most scores and the most wins. Brazil is the strongest team at home. One noticeable fact is South korea.I guess because South Korea is strong team in Asia, it ranks high in scores and wins.","a9710d4e":"### 4. Other analysis","fdfec120":"----","45113f35":"The home team's winning percentage is definitely more overwhelming than the away team. If you add to the draw, you can see that the home team doesn't lose as much as 70 percent.","16ff6fd3":"The results show that Brazil, Germany, Argentina, Italy, and France scored a lot in the past World Cup. You can see that the number of victories is in a similar order. It's a natural story, but the more points you get, the more wins you get.","e7188bda":"For analysis between the home team and the away team, let's start with the winning team column, and which team won the home team or away team"}}