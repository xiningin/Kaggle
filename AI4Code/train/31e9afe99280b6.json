{"cell_type":{"2d084945":"code","cb00c8a0":"code","d4763e01":"code","225ebe22":"code","7eb640fc":"code","471379ca":"code","3909c133":"code","4a6c06fe":"code","00e4351b":"code","95b52b32":"code","78442512":"code","fc0a235e":"code","a45825f0":"code","5b3aa486":"code","aaedc5ad":"code","7d1668e0":"code","eb5d4961":"code","48ccbb03":"code","af5b884e":"code","ebc624d7":"code","f4df8c70":"code","47d61906":"code","6c01467c":"code","cbc05821":"code","f60f422f":"code","fd581310":"code","e04e521e":"code","d7b4554c":"code","ff392343":"code","1af4e508":"code","c580a6ce":"code","94d0fc11":"code","f34b30f1":"code","c5a95168":"code","8e7d5c89":"code","fa059559":"code","5b4308dc":"markdown","9bc82a21":"markdown","32303be8":"markdown","ad1323f5":"markdown","338807bf":"markdown","9c7fc715":"markdown","b3c31668":"markdown","cd121a67":"markdown","791dfa9d":"markdown","2293e397":"markdown","328e8ac7":"markdown","f3f12a79":"markdown","30f38e7a":"markdown","bf88f84d":"markdown","d1eeb246":"markdown","ab9abbee":"markdown","21c481e8":"markdown","adf03e4e":"markdown","e4776490":"markdown","1495d3df":"markdown","8bf13e60":"markdown","089ba6ad":"markdown","4a217482":"markdown","998b718a":"markdown","55b71dd8":"markdown","db620260":"markdown","6a22bd7e":"markdown","aaa8e186":"markdown","5b405a8a":"markdown","d14b71f7":"markdown","a7c27270":"markdown"},"source":{"2d084945":"# import libraries\nfrom datetime import datetime\nimport lxml\nfrom lxml import html\nimport requests\nimport numpy as np\nimport pandas as pd","cb00c8a0":"# input a stock symbol\nsymbol = 'GOOGL'","d4763e01":"# Yahoo Finance links\nurl_bs = 'https:\/\/finance.yahoo.com\/quote\/' + symbol + '\/balance-sheet?p=' + symbol\nurl_is = 'https:\/\/finance.yahoo.com\/quote\/' + symbol + '\/financials?p=' + symbol\nurl_cf = 'https:\/\/finance.yahoo.com\/quote\/' + symbol + '\/cash-flow?p='+ symbol","225ebe22":"# Set up the request headers that we're going to use, to simulate a request by the Chrome browser. \n# Simulating a request from a browser is generally good practice when building a scraper\nheaders = {\n    'Accept': 'text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8,application\/signed-exchange;v=b3',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Accept-Language': 'en-US,en;q=0.9',\n    'Cache-Control': 'max-age=0',\n    'Pragma': 'no-cache',\n    'Referrer': 'https:\/\/google.com',\n    'User-Agent': 'Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/77.0.3865.120 Safari\/537.36'\n}","7eb640fc":"def get_table(url):\n    # Fetch the page that we're going to parse, using the request headers defined above\n    page = requests.get(url, headers)\n\n    # Parse the page with LXML, so that we can start doing some XPATH queries\n    # to extract the data that we want\n    tree = html.fromstring(page.content)\n\n    # Smoke test that we fetched the page by fetching and displaying the H1 element\n    tree.xpath(\"\/\/h1\/text()\")\n    table_rows = tree.xpath(\"\/\/div[contains(@class, 'D(tbr)')]\")\n\n    # Ensure that some table rows are found; if none are found, then it's possible\n    # that Yahoo Finance has changed their page layout, or have detected\n    # that you're scraping the page.\n    assert len(table_rows) > 0\n\n    parsed_rows = []\n\n    for table_row in table_rows:\n        parsed_row = []\n        el = table_row.xpath(\".\/div\")\n\n        none_count = 0\n\n        for rs in el:\n            try:\n                (text,) = rs.xpath('.\/\/span\/text()[1]')\n                parsed_row.append(text)\n            except ValueError:\n                parsed_row.append(np.NaN)\n                none_count += 1\n\n        if (none_count < 4):\n            parsed_rows.append(parsed_row)\n\n    df = pd.DataFrame(parsed_rows)\n    df_org = df\n    \n    df = pd.DataFrame(parsed_rows)\n    df = df.set_index(0) # Set the index to the first column: 'Period Ending'.\n    df = df.transpose() # Transpose the DataFrame, so that our header contains the account names\n\n    # Rename the \"Breakdown\" column to \"Date\"\n    cols = list(df.columns)\n    cols[0] = 'Date'\n    df = df.set_axis(cols, axis='columns', inplace=False)\n    df_rot = df\n    return df_org, df_rot","471379ca":"# get Balance Sheet \nBS_orginal, BS_transpose = get_table(url_bs)\n\n# get Income Statement \nIS_orginal, IS_transpose = get_table(url_is)\n\n# get Cash Flow\nCF_orginal, CF_transpose = get_table(url_cf)","3909c133":"# Balance Sheet original table\nBS_orginal","4a6c06fe":"# Balance Sheet transpose table\nBS_transpose","00e4351b":"BS_analysis = pd.DataFrame(BS_transpose['Date']) # copy columns of dataframe\nBS_analysis","95b52b32":"current_assets = BS_transpose['Total Current Assets'].str.replace(',', '').astype(int)\ncurrent_liabilities = BS_transpose['Total Current Liabilities'].str.replace(',', '').astype(int)\nworking_capital = current_assets - current_liabilities\nworking_capital\nBS_analysis['Working Capital'] = working_capital # copy columns of dataframe\nBS_analysis","78442512":"current_assets = BS_transpose['Total Current Assets'].str.replace(',', '').astype(int)\ncurrent_liabilities = BS_transpose['Total Current Liabilities'].str.replace(',', '').astype(int)\nworking_capital = current_assets - current_liabilities\nworking_capital\ntotal_sales = IS_transpose['Total Revenue'].str.replace(',', '').astype(int)\nworking_capital_per_dollar_of_sales = working_capital \/ total_sales\nBS_analysis['Working Capital per Dollar of Sales'] = working_capital # copy columns of dataframe\nBS_analysis","fc0a235e":"current_ratio = current_assets \/ current_liabilities\nBS_analysis['Current Ratio'] = current_ratio\nBS_analysis","a45825f0":"inventory = BS_transpose['Inventory'].str.replace(',', '').astype(int)\nquick_current_ratio = (current_assets - inventory) \/ current_liabilities\nBS_analysis['Quick Current Ratio'] = quick_current_ratio\nBS_analysis","5b3aa486":"total_liabilities = BS_transpose['Total Liabilities'].str.replace(',', '').astype(int)\nshareholders_equity = BS_transpose['Total stockholders\\' equity'].str.replace(',', '').astype(int)\ndebt2equity_ratio = total_liabilities \/ shareholders_equity\nBS_analysis['Debt to Equity Ratio'] = debt2equity_ratio\nBS_analysis","aaedc5ad":"net_credit_sales = IS_transpose['Net Income'].str.replace(',', '').astype(int)\naverage_net_receivables_for_the_period = BS_transpose['Net Receivables'].str.replace(',', '').astype(int)\nreceivable_turnover = net_credit_sales \/ average_net_receivables_for_the_period\nBS_analysis['Receivable Turnover'] = receivable_turnover\nBS_analysis","7d1668e0":"number_of_days_in_period = 365\naverage_age_of_receivables = number_of_days_in_period \/ receivable_turnover\nBS_analysis['Average Age of Receivables'] = average_age_of_receivables\nBS_analysis","eb5d4961":"cost_of_goods_sold = IS_transpose['Cost of Revenue'].str.replace(',', '').astype(int)\naverage_inventory_for_the_period = inventory\ninventory_turnover = cost_of_goods_sold \/ average_inventory_for_the_period\nBS_analysis['Inventory Turnover'] = inventory_turnover\nBS_analysis","48ccbb03":"number_of_days_for_inventory_to_turn = number_of_days_in_period \/ inventory_turnover\nBS_analysis['Number of Days for Inventory to Turn'] = number_of_days_for_inventory_to_turn\nBS_analysis","af5b884e":"# Income Statement original table\nIS_orginal","ebc624d7":"# Income Statement transpose table\nIS_transpose","f4df8c70":"IS_analysis = pd.DataFrame(IS_transpose['Date']) # copy columns of dataframe\nIS_analysis","47d61906":"revenue = IS_transpose['Total Revenue'].str.replace(',', '').astype(int)\ncost_of_goods_sold = IS_transpose['Cost of Revenue'].str.replace(',', '').astype(int)\ngross_profit_margin = (revenue - cost_of_goods_sold) \/ revenue\nIS_analysis['Gross Profit Margin'] = gross_profit_margin * 100\nIS_analysis","6c01467c":"RD_expense = IS_transpose['Research Development'].str.replace(',', '').astype(int)\nRD_to_sales = RD_expense \/ revenue\nIS_analysis['RD to sales'] = RD_to_sales\nIS_analysis","cbc05821":"operating_income = IS_transpose['Operating Income or Loss'].str.replace(',', '').astype(int)\noperating_profit_margin = operating_income \/ revenue\nIS_analysis['Operating Profit Margin'] = RD_to_sales\nIS_analysis","f60f422f":"interest_expense = IS_transpose['Interest Expense'].str.replace(',', '').astype(int)\nearnings_before_interest_and_taxes = IS_transpose['Income Before Tax'].str.replace(',', '').astype(int)\ninterest_coverage_ratio = earnings_before_interest_and_taxes \/ interest_expense\nIS_analysis['Interest Coverage Ratio'] = interest_coverage_ratio\nIS_analysis","fd581310":"net_income = IS_transpose['Net Income'].str.replace(',', '').astype(int)\nnet_profit_margin = net_income \/ revenue\nIS_analysis['Net Profit Ratio'] = net_profit_margin\nIS_analysis","e04e521e":"net_profit = IS_transpose['Net Income available to common shareholders'].str.replace(',', '').astype(int)\naverage_shareholde_equity_for_the_period = BS_transpose['Total stockholders\\' equity'].str.replace(',', '').astype(int)\nreturn_on_equity = net_profit \/ average_shareholde_equity_for_the_period\nIS_analysis['Return on Equity'] = return_on_equity\nIS_analysis","d7b4554c":"average_assets_for_the_period = BS_transpose['Total Assets'].str.replace(',', '').astype(int)\nassets_turnover = revenue \/ average_assets_for_the_period\nIS_analysis['Asset Turnover'] = assets_turnover\nIS_analysis","ff392343":"return_on_assets = net_profit_margin \/ assets_turnover\nIS_analysis['Return on Assets'] = return_on_assets\nIS_analysis","1af4e508":"# Cash Flow original table\nCF_orginal","c580a6ce":"# Cash Flow transpose table\nCF_transpose","94d0fc11":"CF_analysis = pd.DataFrame(CF_transpose['Date']) # copy columns of dataframe\nCF_analysis","f34b30f1":"net_cash_provided_from_operating_activites = CF_transpose['Net cash provided by operating activites'].str.replace(',', '').astype(int)\naverage_current_liabilities = BS_transpose['Total Current Liabilities'].str.replace(',', '').astype(int)\ncurrent_liability_coverage_ratio = net_cash_provided_from_operating_activites \/ average_current_liabilities\nCF_analysis['Current Liability Coverage Ratio'] = current_liability_coverage_ratio\nCF_analysis","c5a95168":"share_price = 1428.96\noperating_cash_flow = CF_transpose['Operating Cash Flow'].str.replace(',', '').astype(int)\ncommon_stock = BS_transpose['Common Stock'].str.replace(',', '').astype(int)\noperating_cash_flow_per_share = operating_cash_flow \/ common_stock\nprice_to_cash_flow_ratio = share_price \/  operating_cash_flow_per_share\nCF_analysis['Price to Cash Flow Ratio'] = price_to_cash_flow_ratio\nCF_analysis","8e7d5c89":"cash_flow_margin_ratio = operating_cash_flow \/ net_sales\nCF_analysis['Cash Flow Margin Ratio'] = cash_flow_margin_ratio\nCF_analysis","fa059559":"cash_flow_coverage_ratio = cash_flow_from_operations \/ total_debt\nCF_analysis['Cash Flow Margin Ratio'] = cash_flow_coverage_ratio\nCF_analysis","5b4308dc":"**Asset Turnover = Revenue \u00f7 Average Assets for the period**","9bc82a21":"**Receivable Turnover = Net Credit Sales \u00f7 Average Net Receivables for the Period** <br \/>\n*Net Credit Sales is from Income Statement*","32303be8":"**Quick \/ Acid Test \/ Current Ratio = Current Assets minus inventory (called \"Quick Assets) \u00f7 Current Liabilities**","ad1323f5":"**Current Liability Coverage Ratio = Net Cash from Operating Activities \u00f7 Average Current Liabilities**","338807bf":"**Research and development (R&D) to sales = R&D expense \u00f7 Revenue**","9c7fc715":"**Working Capital Per Dollar of Sales = Working Capital \u00f7 Total Sales** <br \/>\n*Total Sales is from Income Statement*","b3c31668":"**Return on assets = net income \u00f7 total average assets for the period** <br \/>\n**Return on assets = net profit margin x assets turnover** <br \/>","cd121a67":"## Part I. Scrape Yahoo Finance","791dfa9d":"**debt-to-equity ratio = total liabilities \u00f7 shareholders' equity**","2293e397":"**Return on equity (ROE) = net profit \u00f7 average shareholder equity for the period**","328e8ac7":"**Operating Profit Margin = Operating Income \u00f7 revenue**","f3f12a79":"# Financial Statement Analysis","30f38e7a":"**Income Statement**","bf88f84d":"### get financial statments in tables (DataFrame)","d1eeb246":"## Part 2. Financial Statement Analysis","ab9abbee":"**Average Age of Receivables = Number of days in period \u00f7 Receivable Turnover**","21c481e8":"**Number of Days for Inventory to Turn = Number of days in Period \u00f7 Inventory Turnover**","adf03e4e":"**Current Ratio = Current Assets \u00f7 Current Liabilities**","e4776490":"**Gross Profit Margin = (Revenue - Cost of Goods sold) \u00f7 Revenue** <br \/>","1495d3df":"**Cash Flow**","8bf13e60":"### Income statement Analysis ","089ba6ad":"**Cash Flow Margin Ratio = Cash Flow from Operating Cash Flows \u00f7 Net Sales** ","4a217482":"**Price to Cash Flow Ratio = Share Price \u00f7 Operating Cash Flow per Share**","998b718a":"**working capital = current assets - current liabilities**","55b71dd8":"**Inventory Turnover = Cost of Goods Sold \u00f7 Average Inventory for the Period** <br \/>\n*Cost of Goods Sold is from Income Statement*","db620260":"**Interest coverage ratio = earnings before interest and taxes (EBIT) \u00f7 interest expense**","6a22bd7e":"### Balance Sheet Analysis","aaa8e186":"### Cash Flow Analysis","5b405a8a":"**Balance Sheet**","d14b71f7":"**Cash Flow Coverage Ratio = Cash Flow from Operations \u00f7 Total Debt**","a7c27270":"**Net profit margin = net income (after taxes) \u00f7 revenue**"}}