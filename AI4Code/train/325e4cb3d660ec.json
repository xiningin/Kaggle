{"cell_type":{"3b687077":"code","3e649116":"code","ab7857f6":"code","8c233b3f":"code","a988fbcc":"code","124ff9b8":"code","4426417f":"code","b4e3fd45":"code","2832f2e7":"code","f2af36e4":"code","64fe91cf":"code","dac7516c":"code","dfe4409c":"code","160d996a":"code","76c156c7":"code","227f5994":"code","0b28ba6e":"code","b945c1c9":"code","1b509691":"code","41518826":"code","d6cc1228":"code","a6db0dc2":"code","67f85c9f":"code","2e47b42e":"code","af97211e":"code","391152d4":"code","935af7f5":"code","0c9246e3":"code","eeda6e2b":"code","903a88a7":"markdown","4c48bde8":"markdown","29f9ef87":"markdown","865f3275":"markdown","38e4c509":"markdown","b1f9de34":"markdown","ab9566b9":"markdown","74a83dff":"markdown","50635762":"markdown","9b14bfab":"markdown"},"source":{"3b687077":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n%matplotlib inline","3e649116":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","ab7857f6":"df_major = pd.read_csv('..\/input\/indonesia-college-entrance-examination-utbk-2019\/majors.csv')\ndf_universities = pd.read_csv('..\/input\/indonesia-college-entrance-examination-utbk-2019\/universities.csv')\ndf_score_humanities = pd.read_csv('..\/input\/indonesia-college-entrance-examination-utbk-2019\/score_humanities.csv')\ndf_score_science = pd.read_csv('..\/input\/indonesia-college-entrance-examination-utbk-2019\/score_science.csv')","8c233b3f":"df_major.drop(df_major.columns[0], axis=1, inplace = True)\ndf_major.set_index('id_major', inplace = True)","a988fbcc":"df_major.isna().values.sum()","124ff9b8":"df_major[df_major.index.values \/\/ 10000 != df_major.id_university.values].shape","4426417f":"df_universities.drop(df_universities.columns[0], axis=1, inplace = True)\ndf_universities.set_index('id_university', inplace = True)","b4e3fd45":"df_major = df_major.reset_index().merge(df_universities, on='id_university', how=\"left\")\ndf_major.set_index('id_major', inplace = True)","2832f2e7":"#df_major.to_csv(\"majors_fix.csv\") #make a new dataset as majors_fix","f2af36e4":"#set id_user as index\ndf_score_humanities.drop(df_score_humanities.columns[0], axis=1, inplace = True)\ndf_score_humanities.set_index('id_user', inplace = True)","64fe91cf":"#check NaN\ndf_score_humanities.isna().values.sum()","dac7516c":"#Look for invalid id_first_major or id_second_university, normaly its have length of 7\ndf_score_humanities = df_score_humanities[df_score_humanities.id_first_major > 1000000]","dfe4409c":"#Look for unmatched id_first_university with id_first_major or id_second_university with id_second_university\ndf_score_humanities[(df_score_humanities.id_first_major.values \/\/ 10000 != df_score_humanities.id_first_university.values) \n                    |(df_score_humanities.id_second_major.values \/\/ 10000 != df_score_humanities.id_second_university.values)]","160d996a":"#Fixing unmatched id_first_university or id_second_university\ndf_score_humanities.id_first_university = df_score_humanities.id_first_major \/\/ 10000\ndf_score_humanities.id_second_university = df_score_humanities.id_second_major \/\/ 10000","76c156c7":"#checking it again\ndf_score_humanities[(df_score_humanities.id_first_major.values \/\/ 10000 != df_score_humanities.id_first_university.values) \n                    |(df_score_humanities.id_second_major.values \/\/ 10000 != df_score_humanities.id_second_university.values)]","227f5994":"#We also calculate average score and store it as new column\ndf_score_humanities['avg_score'] = df_score_humanities.iloc[:,4:].mean(axis=1)","0b28ba6e":"#After all the cleaning process and adding new column. We store all the data into one new dataset. We adding new column as choice, it reminds us that id_user has two different choice when choosing major, first choice and second choice.\ndf_score_humanities_1 = df_score_humanities[[\"id_first_major\", \"id_first_university\", \"avg_score\"]].copy().reset_index()\ndf_score_humanities_1[\"choice\"] = 1\ndf_score_humanities_1.rename(columns={\"id_first_major\": \"id_major\", \"id_first_university\": \"id_university\"}, inplace=True)\n\ndf_score_humanities_2 = df_score_humanities[[\"id_second_major\", \"id_second_university\", \"avg_score\"]].copy().reset_index()\ndf_score_humanities_2[\"choice\"] = 2\ndf_score_humanities_2.rename(columns={\"id_second_major\": \"id_major\", \"id_second_university\": \"id_university\"}, inplace=True)\n\ndf_score_humanities_all = pd.concat([df_score_humanities_1, df_score_humanities_2])\ndf_score_humanities_all[\"type\"] = \"humanity\"\ndf_score_humanities_all.shape","b945c1c9":"df_score_humanities_all.sample(10)","1b509691":"#df_score_humanities_all.to_csv(\"score_humanities_all.csv\") #make a new dataset as score_humanities_all","41518826":"#set id_user as index\ndf_score_science.drop(df_score_science.columns[0], axis=1, inplace = True)\ndf_score_science.set_index('id_user', inplace = True)","d6cc1228":"#check NaN\ndf_score_science.isna().values.sum()","a6db0dc2":"#Look for invalid id_first_major or id_second_university, normaly its have length of 7\ndf_score_science = df_score_science[df_score_science.id_first_major > 1000000]","67f85c9f":"#Look for unmatched id_first_university with id_first_major or id_second_university with id_second_university\ndf_score_science[(df_score_science.id_first_major.values \/\/ 10000 != df_score_science.id_first_university.values) \n                    |(df_score_science.id_second_major.values \/\/ 10000 != df_score_science.id_second_university.values)]","2e47b42e":"#Fixing unmatched id_first_university or id_second_university\ndf_score_science.id_first_university = df_score_science.id_first_major \/\/ 10000\ndf_score_science.id_second_university = df_score_science.id_second_major \/\/ 10000","af97211e":"#checking it again\ndf_score_science[(df_score_science.id_first_major.values \/\/ 10000 != df_score_science.id_first_university.values) \n                    |(df_score_science.id_second_major.values \/\/ 10000 != df_score_science.id_second_university.values)]","391152d4":"#We also calculate average score and store it as new column\ndf_score_science['avg_score'] = df_score_science.iloc[:,4:].mean(axis=1)","935af7f5":"#After all the cleaning process and adding new column. We store all the data into one new dataset. We adding new column as choice, it reminds us that id_user has two different choice when choosing major, first choice and second choice.\ndf_score_science_1 = df_score_science[[\"id_first_major\", \"id_first_university\", \"avg_score\"]].copy().reset_index()\ndf_score_science_1[\"choice\"] = 1\ndf_score_science_1.rename(columns={\"id_first_major\": \"id_major\", \"id_first_university\": \"id_university\"}, inplace=True)\n\ndf_score_science_2 = df_score_science[[\"id_second_major\", \"id_second_university\", \"avg_score\"]].copy().reset_index()\ndf_score_science_2[\"choice\"] = 1\ndf_score_science_2.rename(columns={\"id_second_major\": \"id_major\", \"id_second_university\": \"id_university\"}, inplace=True)\n\ndf_score_science_all = pd.concat([df_score_science_1, df_score_science_2])\ndf_score_science_all[\"type\"] = \"science\"\ndf_score_science_all.shape","0c9246e3":"df_score_science_all.sample(10)","eeda6e2b":"#df_score_science_all.to_csv(\"score_science_all.csv\") #make a new dataset as score_science_all","903a88a7":"with df_universities we gonna set id_universities as index","4c48bde8":"for easy to use purpose, we merge df_major and df_universities with id_university as a key.\nwe will export it as a new csv file (you can run it if you want)","29f9ef87":"**df_universities**","865f3275":"what we gonna do with df_major are (1) set id_major as index, (2) NaN values, and (3) make sure that id_university digits is equal to three first digit of id_major  [](http:\/\/)","38e4c509":"**df_major** ","b1f9de34":"We need to load the dataset and get an understanding about it.","ab9566b9":"**df_score_humanities**","74a83dff":"What we have done with df_score_humanities. we repeat the process with df_score_science.","50635762":"**df_score_science**","9b14bfab":"For df_score_humanities and df_score_science, we repeat the same process like before and export it as new csv file. We have additional step to look for invalid id_first_major or id_second_university, normaly its have length of 7 and look for unmatched id_first_university with id_first_major or id_second_university with id_second_university."}}