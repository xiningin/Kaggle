{"cell_type":{"51860efe":"code","c92cdc67":"code","09f686f9":"code","8e156014":"code","2e8fa4b8":"code","2a240d8e":"code","00af20a2":"code","cfbb7e8b":"code","6d1fb23f":"code","f2a58ca6":"code","a03e7592":"code","e01ae5a8":"code","b39391dc":"code","d81fc8b3":"code","2c0bfe0a":"code","75f27fd8":"code","5b958cb4":"code","d3be8aa4":"code","fd4086e5":"markdown","a64633fa":"markdown","4960ef65":"markdown","b45b8392":"markdown","8d547b78":"markdown","066b1060":"markdown","af6f2f7f":"markdown","58838ed9":"markdown","f390dd88":"markdown","ba3b04a2":"markdown","e6a1ddc3":"markdown","7cd860a3":"markdown","aa2bd46b":"markdown","54b1af43":"markdown","8f8517f3":"markdown"},"source":{"51860efe":"import os\nprint(os.listdir(\"..\/input\"))\n\nimport pandas as pd # package for high-performance, easy-to-use data structures and data analysis\nimport numpy as np # fundamental package for scientific computing with Python\nimport matplotlib\nimport matplotlib.pyplot as plt # for plotting\nimport seaborn as sns # for making plots with seaborn\ncolor = sns.color_palette()\n# import plotly.offline as py\n# py.init_notebook_mode(connected=True)\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.offline as offline\noffline.init_notebook_mode()\nfrom plotly import tools\nimport warnings\nwarnings.filterwarnings('ignore')\nimport plotly.tools as tls\nimport squarify\nfrom mpl_toolkits.basemap import Basemap\nfrom numpy import array\nfrom matplotlib import cm","c92cdc67":"df=pd.read_csv('..\/input\/who_suicide_statistics.csv')\ndf.head()","09f686f9":"print(\"The data has been given for:\",df['country'].nunique(),'different countries across the world')","8e156014":"print(df.shape)\nprint(df.describe())\nprint(df.info())\nprint(df.isnull().sum())","2e8fa4b8":"df.fillna(df.mean(),inplace=True)\ndf_sui=pd.DataFrame(df.groupby(['country','year'])['suicides_no'].sum().reset_index())\ndf_sui.head()","2a240d8e":"count_max_sui=pd.DataFrame(df_sui.groupby('country')['suicides_no'].sum().reset_index())\n\ncount = [ dict(\n        type = 'choropleth',\n        locations = count_max_sui['country'],\n        locationmode='country names',\n        z = count_max_sui['suicides_no'],\n        text = count_max_sui['country'],\n        colorscale = 'Viridis',\n        autocolorscale = False,\n        reversescale = True,\n        marker = dict(\n            line = dict (\n                color = 'rgb(180,180,180)',\n                width = 0.5\n            ) ),\n        colorbar = dict(\n            autotick =False,\n            title = 'Suicides Country-based'),\n      ) ]\nlayout = dict(\n    title = 'Suicides happening across the Globe',\n    geo = dict(\n        showframe = True,\n        showcoastlines = True,\n        projection = dict(\n            type = 'Mercator'\n        )\n    )\n)\nfig = dict( data=count, layout=layout )\niplot( fig, validate=False, filename='d3-world-map' )","00af20a2":"df_sui_n=pd.DataFrame(df.groupby(['country'])['suicides_no'].sum().reset_index())\ndf_sui_n.sort_values(by=['suicides_no'],ascending=False,inplace=True)","cfbb7e8b":"type_colors = ['#5D6D7E',  # Grass\n                    '#633974',  # Fire\n                    '#E74C3C',  # Water\n                    '#283747',  # Bug\n                    '#F4D03F',  # Normal\n                    '#0B5345',  # Poison\n                    '#154360',  # Electric\n                    '#7B7D7D',  # Ground\n                    '#229954',  # Fairy\n                    '#641E16',  # Fighting\n                   ]\n\n\nfig, ax = plt.subplots()\n\nfig.set_size_inches(13.7, 10.27)\n\nsns.set_context(\"paper\", font_scale=1.5)\nf=sns.barplot(x=df_sui_n[\"country\"].head(10), y=df_sui_n['suicides_no'].head(10), data=df_sui_n,palette=type_colors)\nf.set_xlabel(\"Name of Country\",fontsize=18)\nf.set_ylabel(\"No. of Suicides\",fontsize=18)\nf.set_title('Top 10 Countries having highest no. suicides')\nfor item in f.get_xticklabels():\n    item.set_rotation(90)","6d1fb23f":"fig = {\n  \"data\": [\n    {\n      \"values\": df['sex'].value_counts(),\n      \"labels\": df['sex'].unique(),\n        'marker': {'colors': ['rgb(58, 21, 56)',\n                                  'rgb(33, 180, 150)']},\n      \"name\": \"Gender based suicides\",\n      \"hoverinfo\":\"label+percent+name\",\n      \"hole\": .5,\n      \"type\": \"pie\"\n    }],\n     \"layout\": {\n        \"title\":\"Males or Females, who are more prone to committing suicides?\"\n     }\n}\niplot(fig, filename='donut')","f2a58ca6":"df_sui_ny=pd.DataFrame(df.groupby(['year','sex'])['suicides_no'].sum().reset_index())\ndf_sui_ny=df_sui_ny.round(0)\ndf_sui_ny.sort_values(by=['year'],inplace=True)\ndf_sui_ny=df_sui_ny.ix[df_sui_ny['year']!=2016] #data seems to missing for this year\ndf_sui_nym=df_sui_ny.ix[df_sui_ny['sex']=='male']\ndf_sui_nyf=df_sui_ny.ix[df_sui_ny['sex']=='female']\ntrace_high = go.Scatter(\n                x=df_sui_nym.year,\n                y=df_sui_nym['suicides_no'],\n                name = \"Suicides amongst Males\",\n                line = dict(color = '#ADAF06'),\n                opacity = 0.8)\n\ntrace_low = go.Scatter(\n                x=df_sui_nyf.year,\n                y=df_sui_nyf['suicides_no'],\n                name = \"Suicides amongst Females\",\n                line = dict(color = '#870379'),\n                opacity = 0.8)\n\ndata = [trace_high,trace_low]\n\nlayout = dict(\n    title = \"Suicides amongst Males & Females over the years \",\n)\n\nfig = dict(data=data, layout=layout)\niplot(fig, filename = \"Suicides\")","a03e7592":"df_gen=pd.DataFrame(df.groupby(['country','sex'])['suicides_no'].sum()).reset_index()\ndf_gen=pd.merge(df_gen,pd.DataFrame(df_gen.groupby(['country'])['suicides_no'].sum()).reset_index(),on=['country'])\ndf_gen.rename(columns={'suicides_no_x':'gender_suicides','suicides_no_y':'total_suicides'},inplace=True)\ndf_gen.sort_values(by=['total_suicides'],ascending=False,inplace=True)\ndf_gen.head()","e01ae5a8":"df_gen_m=df_gen.ix[df_gen['sex']==\"male\"]\ndf_gen_fm=df_gen.ix[df_gen['sex']==\"female\"]\ntrace1 = go.Bar(\n    x=df_gen_m['country'].head(10),\n    y=df_gen_m['gender_suicides'].head(10),\n    name='Male Suicides'\n)\ntrace2 = go.Bar(\n    x=df_gen_fm['country'].head(10),\n    y=df_gen_fm['gender_suicides'].head(10),\n    name='Female Suicides'\n)\n\ndata = [trace1, trace2]\nlayout = go.Layout(\n    barmode='group',\n    title='Suicide Distribution amongst the Genders in top 10 countries having max. suicides'\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig, filename='grouped-bar')","b39391dc":"df_sui_ny=pd.DataFrame(df.groupby(['country','sex','year'])['suicides_no'].sum().reset_index())\ndf_sui_ny=df_sui_ny.ix[df_sui_ny['country']==\"Russian Federation\"]\ndf_sui_ny=df_sui_ny.round(0)\ndf_sui_ny.sort_values(by=['year'],inplace=True)\ndf_sui_ny=df_sui_ny.ix[df_sui_ny['year']!=2016] #data seems to missing for this year\ndf_sui_nym=df_sui_ny.ix[df_sui_ny['sex']=='male']\ndf_sui_nyf=df_sui_ny.ix[df_sui_ny['sex']=='female']\ntrace_high = go.Scatter(\n                x=df_sui_nym.year,\n                y=df_sui_nym['suicides_no'],\n                name = \"Suicides amongst Males\",\n                line = dict(color = '#0A0993'),\n                opacity = 0.8)\n\ntrace_low = go.Scatter(\n                x=df_sui_nyf.year,\n                y=df_sui_nyf['suicides_no'],\n                name = \"Suicides amongst Females\",\n                line = dict(color = '#04B77A'),\n                opacity = 0.8)\n\ndata = [trace_high,trace_low]\n\nlayout = dict(\n    title = \"Suicides amongst Males & Females over the years in Russian Federation\",\n)\n\nfig = dict(data=data, layout=layout)\niplot(fig, filename = \"Suicides\")","d81fc8b3":"df_sui_ny=pd.DataFrame(df_sui_ny.groupby(['year','country'])['suicides_no'].sum()).reset_index()\n\ndf_ts=df_sui_ny[['year','suicides_no']]\ndf_ts.index=df_ts['year']\n\n\ndf_ts['suicides_no'].plot(figsize=(15,6), color=\"red\")\nplt.xlabel('Year')\nplt.ylabel('Total no. of suicides')\nplt.title(\"No. of suicides that happened in last 30-35 years in Russian federation\")\nplt.show()","2c0bfe0a":"dateparse = lambda dates: pd.datetime.strptime(dates, '%Y')\ndata=pd.read_csv('..\/input\/who_suicide_statistics.csv', parse_dates=['year'], index_col='year',date_parser=dateparse)\ndata.fillna(data.mean(),inplace=True)\ndata=data.reset_index()\ndata=pd.DataFrame(data.groupby(['country','year'])['suicides_no'].sum()).reset_index()\ndata=data.sort_values(by=['suicides_no'],ascending=False)\ndata.head()","75f27fd8":"data=data.ix[data['country']=='Russian Federation']\ndata.drop('country',axis=1,inplace=True)\ndata = data.set_index('year')\ndata.head()","5b958cb4":"from fbprophet import Prophet\n\ndf_prophet = data.copy()\ndf_prophet.reset_index(drop=False,inplace=True)\ndf_prophet.columns = ['ds','y']\ndf_prophet=df_prophet[21:]\n\nm = Prophet()\nm.fit(df_prophet)\nfuture = m.make_future_dataframe(periods=5,freq='Y')\nforecast = m.predict(future)\nfig = m.plot(forecast)","d3be8aa4":"m.plot_components(forecast);","fd4086e5":"#### Let's find out which country and which year did maximum no. of suicides happen","a64633fa":"### Here is the time-series forecasting till 2020 for Russian Federation","4960ef65":"## Suicide is a major concern across the world. And people who tell, that suicides are committed by weak people they are pretty much wrong. Only the person who is committing suicide knows what he or she is going through.\n\n### This kernel mainly focuses on the analysis of the no. of suicides across different nations, and maybe how we can deal with them. We should be coming up with some tactic to deal with mental patients, because its a very serious issue.\n-------------------------------------------------------------------------------------------------------------------\n\n###   Importing the libraries and the dataset","b45b8392":"How has the no. of suicides, totally varied in the last 30-35 years","8d547b78":"We'll first try to the forecasting for Russian Federation, then we'll look forward to the whole world","066b1060":"I don't know why, one of the most important country, India's data is missing. India is one of the countries having highest no. of suicides almost every year. ","af6f2f7f":" ### Explaratory Data Analysis (EDA)","58838ed9":"Its good to see that it has been decreasing over the years.\n\n### Next we go on to the time series prediction for the country and then we will do for the whole world.","f390dd88":"### Now we'll see how the suicides have happened amongst the genders in the top 10 countries ","ba3b04a2":"We see that there has been a sharp dip around 1983-85, maybe the data is corrupted for those two years, however we see that the suicides are going exponentially down now.","e6a1ddc3":"### Top 10 ountries having the max. suicides over the years","7cd860a3":"Since Russian Federation is the country having highest no. of suicides, we will concentrate on that country for the time-being. ","aa2bd46b":"#### Finding out how the no. of suicides amongst males and females across the world has changed over the years.","54b1af43":"We see that Russian Federation is the country where max. no. of suicides have happened.","8f8517f3":"#### What are the different nations where suicides are happening?"}}