{"cell_type":{"4b912950":"code","cea356c5":"code","64065b76":"code","b9fac9b8":"code","b39b50ef":"code","e065c353":"code","48c9ee77":"code","0e9faa64":"code","871598e7":"code","677509ff":"code","c691f740":"code","50e1f2f1":"code","3f822f41":"code","8bd6b0d5":"code","387734eb":"code","f1fbcc9d":"markdown","87f54229":"markdown","bc9b5b34":"markdown","9eaf0dc0":"markdown","b8f008ff":"markdown","1d6baf99":"markdown","f752834a":"markdown"},"source":{"4b912950":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","cea356c5":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\")\npie_df = pie_df.query('GP>50')\n#Filter for players who have played more than 50 games\npie_df = pie_df.query('MIN>25')\n#Filter for players who average more than 25 minutes a game\npie_df = pie_df.query('PIE>12')\n#Filter players with a significant contribution\/usage rate\npie_df.head()","64065b76":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\")\nplus_minus_df = plus_minus_df.query('GP>50')\n#Filter for players who have played more than 50 games\nplus_minus_df = plus_minus_df.query('MPG>25')\n#Filter for players who average more than 25 minutes a game\nplus_minus_df.head()","b9fac9b8":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\")\nbr_stats_df = br_stats_df.query('G>50')\n#Filter for players who have played more than 50 games\nbr_stats_df = br_stats_df.query('MP>25')\n#Filter for players who average more than 25 minutes a game\nbr_stats_df.head()","b39b50ef":"plus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","e065c353":"nba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', 'TRB': 'REB', \"PS\/G\": \"PPG\"}, inplace=True)\nnba_players_df.drop([\"Rk\",\"G\", \"GS\", \"TEAM\", \"POSITION\", \"AGE\", \"2P\", \"2PA\", \"2P%\",\"3P\", \"3PA\", \"3P%\", \"eFG%\",\"PF\", \"ORB\", \"DRB\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","48c9ee77":"pie_df_subset = pie_df[[\"PLAYER\", \"NETRTG\", \"AST%\", \"AST\/TO\",\"REB%\", \"USG%\", \"TS%\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.drop([\"ORPM\",\"DRPM\" ], inplace=True, axis=1)\nnba_players_df.head()","0e9faa64":"plt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season\")\ncorr = nba_players_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","871598e7":"#Run a scatterplot to visualize this relationship\nsns.lmplot(x=\"NETRTG\", y=\"W\", data=nba_players_df)","677509ff":"#Perform linear regression to confirm this relationship\nresults = smf.ols('W ~NETRTG', data=nba_players_df).fit()\nprint(results.summary())","c691f740":"#Further review top 25 players' value from Net Rating\nnba_players_df.nlargest(25,'NETRTG')","50e1f2f1":"nba_players_df['TEAM'].value_counts()","3f822f41":"nba_players_df.drop_duplicates(subset =\"TEAM\", \n                     keep = False, inplace = True) \n#This new dataset will identify players with more individual contribution to team\nnba_players_df.drop([\"FG\",\"FGA\", \"FG%\", \"FT\", \"FTA\", \"FT%\"], inplace=True, axis=1)\nnba_players_df.nlargest(15,'NETRTG')","8bd6b0d5":"results = smf.ols('W ~NETRTG', data=nba_players_df).fit()\nprint(results.summary())","387734eb":"#Create a cummalative value statistic based on the individual affect on scoring (Net Rating), total amount of contribution (Usage Rate) and overall team performance (Ws)\nnba_players_df['VALUE'] = round(nba_players_df['NETRTG']*nba_players_df['USG%']*nba_players_df['W']*nba_players_df['GP']\/82, 2)\nnba_players_df.nlargest(15,'VALUE')","f1fbcc9d":"To assess for the **Most *Valuable* player,** I will look to gauge their individual *value* to a team. To do so I will remove players on this list from the **same team** since their Net Rating (NETRTG) is affected by teammates on this list","87f54229":"The output list shows a number of **teams with multiple players** who qualified for both a **significant amount of playing time** (Minutes and Game played) and **contribution of possession** (PIE)","bc9b5b34":"***The regression formula showed a positive relationship between players' net rating and wins***","9eaf0dc0":"From the heatmap, we can see that **Net Rating (NETRTG)** is most correlated to **wins**","b8f008ff":"The new dataset containing only **individual standout players** actually produced a **more accurate model (Lower AIC & BIC, Higher Adj. R-squared) ** than the previous model","1d6baf99":"Based on the results calculated, the Most Valuable Player for the 2016-2017 season should be \n**James Harden**\n![](https:\/\/clutchpoints.com\/wp-content\/uploads\/2018\/06\/james-harden-2.jpg)\n...unfortunately, the media voted Russell Westbrook to be the actual winner\n![](https:\/\/cdn-images-1.medium.com\/max\/599\/1*bzOWBk9RN7scZNSUbETrNA.jpeg)","f752834a":"**Identifying the most \"valuable\" player based on advanced statistics and analysis**"}}