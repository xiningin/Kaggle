{"cell_type":{"fb2039da":"code","a3dc9725":"code","a74475ec":"code","384e1688":"code","6ef5165b":"code","b731b46f":"code","c7b7915f":"markdown"},"source":{"fb2039da":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nplt.style.use('seaborn')\n\nimport os\nprint(os.listdir(\"..\/input\"))\ntrain = pd.read_csv(\"..\/input\/PM25_train.csv\")\n\ntrain[\"Date_Time\"] = train[\"Date\"] +\" \"+ train[\"Time\"]\ntrain[\"Date_Time\"] = pd.to_datetime(train[\"Date_Time\"])\n","a3dc9725":"sector =  train.groupby(\"device_id\")\ndict_df_data = {}\nfor key, value in sector.groups.items():\n    dict_df_data[key] = train.iloc[value, :]","a74475ec":"dict_df_data_per_hour = {}\n\nfor key, value in dict_df_data.items():\n        dict_df_data_per_hour[key] = value.groupby(value[\"Date_Time\"].dt.round(\"1h\")).mean()","384e1688":"df_total = pd.DataFrame()\nfor index in dict_df_data_per_hour:\n        one = dict_df_data_per_hour[index][[\"PM2.5\"]]\n        one.columns = [index]\n        df_total = pd.concat([df_total, one], axis=1)","6ef5165b":"df_mean_day = pd.DataFrame()\nfor i in dict_df_data_per_hour:\n        one = df_total[i].values[:24*29].reshape(29,24)\n        df_one = pd.DataFrame(np.nanmean(one,  axis=0), columns = [i])\n        df_mean_day = pd.concat([df_mean_day, df_one], axis=1)\nindex = []\nfor i in range(8, 25):\n        index.append(i)\nfor i in range(1, 8):\n        index.append(i)\ndf_mean_day.index = index","b731b46f":"f, ax = plt.subplots(figsize=(12, 9))\nsns.heatmap(df_mean_day,  vmin=30, vmax=50, cmap=\"YlGnBu\")\nplt.show()","c7b7915f":"<font face=\"\u5fae\u8f6f\u96c5\u9ed1\" color=gray size=72>\u539f\u4f86\u4e0b\u5348\u7684\u7a7a\u6c23\u9019\u9ebc\u5dee<\/font>"}}