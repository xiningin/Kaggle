{"cell_type":{"93aed6a0":"code","306ea32c":"code","8384b36d":"code","cd0e4398":"code","35cac8fd":"code","7dc7d8e6":"code","63789a72":"code","bf4710c1":"code","0b352e13":"code","94357d7a":"code","b61f19c2":"code","d07f86e2":"code","ecb30968":"code","fdddbcc6":"code","23f47e58":"code","968a47d6":"code","2eedfefa":"code","2d8a85da":"code","9cd01336":"code","f78a5570":"code","e24e9471":"markdown","064f162a":"markdown","cd295530":"markdown","6f4ab117":"markdown","f30e6eba":"markdown","c8edf477":"markdown","95668426":"markdown","b0666f07":"markdown","e5ac8bfa":"markdown","e6e3b1c1":"markdown","242f5577":"markdown","29318a67":"markdown","d2f9208f":"markdown","471ef43a":"markdown","b941e9ae":"markdown","8cab4849":"markdown","b2e443f2":"markdown","feca31ba":"markdown","3748fab5":"markdown"},"source":{"93aed6a0":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.express as px\nimport matplotlib.pyplot as plt\nfrom collections import Counter\nfrom wordcloud import WordCloud\nfrom sklearn.svm import LinearSVC\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.decomposition import PCA, TruncatedSVD\nfrom sklearn.model_selection import train_test_split, cross_val_score\nfrom sklearn.feature_extraction.text import CountVectorizer, TfidfTransformer\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","306ea32c":"trump = pd.read_csv('..\/input\/all-trumps-twitter-insults-20152021\/trump_insult_tweets_2014_to_2021.csv')\ntrump = trump.drop('Unnamed: 0', axis=1)","8384b36d":"trump.head()","cd0e4398":"count = Counter(trump['target'])\ncount = pd.Series(count)\ndf1 = pd.DataFrame({'Target':count.keys(), 'Number of insults':count}).sort_values(\n    ascending=False, by='Number of insults')\ndf1 = df1[df1['Number of insults']>50]\n\nfig = px.bar(df1, 'Target', 'Number of insults', color='Number of insults', title='Target of insult')\nfig.show()","35cac8fd":"count = Counter(trump['insult'])\ncount = pd.Series(count)\ndf2 = pd.DataFrame({'Insult':count.keys(), 'Number of insults':count}).sort_values(\n    ascending=False, by='Number of insults')\ndf2 = df2[df2['Number of insults']>18]\n\nfig = px.bar(df2, 'Insult', 'Number of insults', color='Number of insults', title='Type of insult', height=700)\nfig.show()","7dc7d8e6":"for target in df1['Target'].iloc[:5]:\n    count = Counter(trump[trump['target']==target]['insult'])\n    count = pd.Series(count)\n    d = pd.DataFrame({'Insult':count.keys(), 'Number of insults':count}).sort_values(\n        ascending=False, by='Number of insults')\n    d = d[d['Number of insults']>3]\n\n    fig = px.bar(d, 'Insult', 'Number of insults', color='Number of insults', title=target)\n    fig.show()","63789a72":"count = Counter([i[:7] for i in trump['date']])\ndf = pd.DataFrame({'Date of tweet':count.keys(), 'Number of tweets':count.values()})\nfig = px.line(df, 'Date of tweet', 'Number of tweets', title='Tweets per month')\nfig.show()","bf4710c1":"months = []\ndatas = []\ntrump['year'] = [o[:4] for o in trump['date']]\nfor i in trump.groupby('year'):\n    i[1]['month'] = [j[5:7] for j in i[1]['date']]\n    for k in i[1].groupby('month'):\n        months.append(i[0]+'-'+k[0])\n        datas.append(k[1]['tweet'])\n        \nmonth_list = []\nfor i in datas:\n    length = len(list(i))\n    month_count = 0 \n    for j in i:\n        month_count += len(j.split(' '))\n    month_list.append(round(month_count\/length, 2))","0b352e13":"df = pd.DataFrame({'Date of tweet':months, 'Average number of words per tweet':month_list})\nfig = px.line(df, 'Date of tweet', 'Average number of words per tweet', title='Number of words in tweets per month')\nfig.show()","94357d7a":"years = []\nfor target in df1.iloc[:5]['Target']:\n    temp = []\n    for i in trump[trump['target'] == target]['date']:\n        temp.append(i[:7])\n    years.append(temp)\n\nfor target in years:\n    name = df1['Target'].iloc[years.index(target)]\n    count = Counter(target)\n    df = pd.DataFrame({'Date of tweet':count.keys(), 'Number of tweets against '+name:count.values()})\n    fig = px.line(df, 'Date of tweet', 'Number of tweets against '+name, title=name)\n    fig.show()","b61f19c2":"years = []\nfor target in df2.iloc[:5]['Insult']:\n    temp = []\n    for i in trump[trump['insult'] == target]['date']:\n        temp.append(i[:7])\n    years.append(temp)\n\nfor target in years:\n    name = df2['Insult'].iloc[years.index(target)]\n    count = Counter(target)\n    df = pd.DataFrame({'Date of tweet':count.keys(), 'Number of tweets against '+name:count.values()})\n    fig = px.line(df, 'Date of tweet', 'Number of tweets against '+name, title=name)\n    fig.show()","d07f86e2":"count = Counter([int(i[:4]) for i in trump['date']])\ndf = pd.DataFrame({'Year':count.keys(), 'Number of tweets':count.values()})\nfig = px.pie(df, 'Year', 'Number of tweets')\nfig.update_layout(legend_title=dict(text='Years', font=dict(size=18)))\nfig.show()","ecb30968":"months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\ntrump['year'] = [int(i[:4]) for i in trump['date']]\n\nfor year in trump.groupby('year'):\n    count = Counter([int(j[5:7]) for j in year[1]['date']])\n    df = pd.DataFrame({'Month':count.keys(), 'Number of tweets':count.values()})\n\n    month_list = []\n    for i in df['Month']:\n        month_list.append(months[int(i-1)])\n    df['Month'] = month_list\n\n    fig = px.pie(df, 'Month', 'Number of tweets')\n    fig.update_layout(legend_title=dict(text='Months in '+str(year[0]), font=dict(size=18)))\n    fig.show()","fdddbcc6":"for year in trump.groupby('year'):\n    fig, ax = plt.subplots(1, 1, figsize=(10, 10))\n    total = []\n    tweet = year[1]['tweet']\n    for corpus in tweet:\n        for i in corpus.split(' '):\n            total.append(i)\n    count = Counter(total)\n    total = list(count.keys())\n    words = ' '.join(total)\n    wordcloud = WordCloud(background_color='white').generate(words)\n    ax.imshow(wordcloud)\n    ax.set_title(year[0], size=30)\n    ax.axis('off')\n    plt.show()","23f47e58":"trump = pd.merge(trump, pd.get_dummies(trump['insult']), left_index=True, right_index=True)\ntrump = trump.drop('insult', axis=1)\ntrump = trump.fillna('null')\ntrump['target'] = LabelEncoder().fit_transform(trump['target'])","968a47d6":"X = trump['tweet']\ny = trump['target']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)\n\ncv = CountVectorizer()\nX_train = cv.fit_transform(X_train)\nX_test = cv.transform(X_test)\n\ntfidf = TfidfTransformer()\nX_train = tfidf.fit_transform(X_train)\nX_test = tfidf.transform(X_test)\n\nmodel = LinearSVC()\nmodel.fit(X_train, y_train)\nprint('Model score:    ', model.score(X_test, y_test))\nprint('Cross val score:',cross_val_score(model, X_test, y_test).mean())","2eedfefa":"data = pd.read_csv('..\/input\/democratvsrepublicantweets\/ExtractedTweets.csv')\ndata.head()","2d8a85da":"count = Counter(data['Party'])\ndf = pd.DataFrame({'Party': count.keys(), 'Number of tweets': count.values()})\nfig = px.pie(df, 'Party', 'Number of tweets')\nfig.update_layout(legend_title=dict(text='Party', font=dict(size=18)))\nfig.show()","9cd01336":"users = {'Democrat':[], 'Republican':[]}\nfor party in ['Democrat', 'Republican']:\n    r = 0\n    for person in np.unique(data['Handle']):\n        if np.array(data[data['Handle']==person]['Party'])[0]==party:\n            if r == 5:\n                break\n            else:\n                users[party].append(person)\n                tweet = data[data['Handle']==person]['Tweet']\n                fig, ax = plt.subplots(1, 1, figsize=(10, 10))\n                total = []\n                for corpus in tweet:\n                    for i in corpus.split(' '):\n                        total.append(i)\n                count = Counter(total)\n                total = list(count.keys())\n                words = ' '.join(total)\n\n                wordcloud = WordCloud(background_color='white').generate(words)\n                ax.imshow(wordcloud)\n                ax.set_title(person+' '+np.array(data[data['Handle']==person]['Party'])[0], size=30)\n                ax.axis('off')\n                plt.show()\n            r += 1","f78a5570":"party_counts = [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0]]\nfor party in users:\n    for user in users[party]:\n        for tweet in data[data['Handle']==user]['Tweet']:\n            length = len(tweet.split(' '))\n            party_counts[list(users.keys()).index(party)][users[party].index(user)] += length\n            \nfor values in party_counts:\n    party = list(users.keys())[party_counts.index(values)]\n    labels = users[party]\n    \n    df = pd.DataFrame({'User':labels, 'Number of words in tweets':values})\n    fig = px.pie(df, 'User', 'Number of words in tweets')\n    fig.update_layout(legend_title=dict(text=party, font=dict(size=18)))\n    fig.show()","e24e9471":"# Number of tweets per target","064f162a":"# Percentage of insults per months over the years","cd295530":"# Wordclouds for most common words","6f4ab117":"# Number of words in tweets per politician","f30e6eba":"# Number of tweets per party","c8edf477":"# Average number of words per tweet","95668426":"# Insult","b0666f07":"## Thank you for reading this notebook.\n## If you enjoyed this notebook and found it helpful, please give it an upvote and provide feedback, as it would help me make more of these.","e5ac8bfa":"# Percentage of insults over the years","e6e3b1c1":"# Trump's twitter insults\nHello everybody! Today we will be visualising Trump's various insults over the years.","242f5577":"# Insult per target","29318a67":"# Wordcloud for 10 politicians","d2f9208f":"# Democrats and Republicans","471ef43a":"# Predicting target based on tweet","b941e9ae":"# Number of tweets per insult","8cab4849":"# Target","b2e443f2":"# Tweets per month","feca31ba":"### Description of features\n* **date** - day that the tweet was released\n* **target** - subject of ridicule in tweet\n* **insult** - offensive statement\n* **tweet** - corpus of text released by Trump","3748fab5":"### Description of features\n* **Party** - Political party of politician\n* **Handle** - Politican twitter handle\n* **Tweet** - Corpus of tweet"}}