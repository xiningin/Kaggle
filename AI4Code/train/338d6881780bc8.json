{"cell_type":{"bfacc8e0":"code","eaaa2087":"code","35b443f0":"code","af4d9ab0":"code","bcc57f1f":"code","fc764148":"code","4d876253":"code","2ce6e9f0":"code","d05712f9":"code","87fbbd59":"code","1aa742ce":"code","39f6bc3e":"code","8743dc4a":"code","ffba532e":"markdown","d389fb63":"markdown","06aa2a0c":"markdown","0ddcef97":"markdown","fc221d35":"markdown"},"source":{"bfacc8e0":"import pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nfrom tqdm import tqdm","eaaa2087":"one_sub = []\nbootstrap = 1000\nfor b in tqdm(range(bootstrap)):\n    mu, sigma = 0.950, 0.005\n    lucky_ppl_sub1 = np.random.normal(mu, sigma, 1000)\n    mu, sigma = 0.955, 0.005\n    smart_ppl_sub1 = np.random.normal(mu, sigma, 10)\n\n    luckydf = pd.DataFrame([lucky_ppl_sub1]).T\n    smartdf = pd.DataFrame([smart_ppl_sub1]).T\n\n    luckydf['usedPublicKernel'] = True\n    smartdf['usedPublicKernel'] = False\n\n    results = pd.concat([luckydf, smartdf])\n    results['highest_scoring_sub'] = results[[0]].max(axis=1)\n    results['rank'] = results['highest_scoring_sub'].rank(ascending=False)\n    one_sub.append(results)","35b443f0":"pd.concat(one_sub).groupby('usedPublicKernel')['rank'] \\\n    .plot(kind='kde',\n          title='Public Kernel vs Smart - 1 sub 1000x bootstrap',\n          figsize=(10, 5))\nplt.legend()\nplt.show()","af4d9ab0":"pd.concat(one_sub).groupby('usedPublicKernel')['rank'].describe()","bcc57f1f":"two_subs = []\nbootstrap = 1000\nfor b in tqdm(range(bootstrap)):\n    mu, sigma = 0.950, 0.005\n    lucky_ppl_sub1 = np.random.normal(mu, sigma, 1000)\n    lucky_ppl_sub2 = np.random.normal(mu, sigma, 1000)\n    mu, sigma = 0.955, 0.005\n    smart_ppl_sub1 = np.random.normal(mu, sigma, 10)\n    smart_ppl_sub2 = np.random.normal(mu, sigma, 10)\n\n    luckydf = pd.DataFrame([lucky_ppl_sub1, lucky_ppl_sub2]).T\n    smartdf = pd.DataFrame([smart_ppl_sub1, smart_ppl_sub2]).T\n\n    luckydf['usedPublicKernel'] = True\n    smartdf['usedPublicKernel'] = False\n\n    results = pd.concat([luckydf, smartdf])\n    results['highest_scoring_sub'] = results[[0, 1]].max(axis=1)\n    results['rank'] = results['highest_scoring_sub'].rank(ascending=False)\n    two_subs.append(results)","fc764148":"pd.concat(two_subs).groupby('usedPublicKernel')['rank'] \\\n    .plot(kind='kde',\n          title='Public Kernel vs Smart - 2 subs 1000x bootstrap',\n          figsize=(10, 5))\nplt.legend()\nplt.show()","4d876253":"pd.concat(two_subs).groupby('usedPublicKernel')['rank'].describe()","2ce6e9f0":"three_subs = []\nbootstrap = 1000\nfor b in tqdm(range(bootstrap)):\n    mu, sigma = 0.950, 0.005\n    lucky_ppl_sub1 = np.random.normal(mu, sigma, 1000)\n    lucky_ppl_sub2 = np.random.normal(mu, sigma, 1000)\n    lucky_ppl_sub3 = np.random.normal(mu, sigma, 1000)\n    mu, sigma = 0.955, 0.005\n    smart_ppl_sub1 = np.random.normal(mu, sigma, 10)\n    smart_ppl_sub2 = np.random.normal(mu, sigma, 10)\n    smart_ppl_sub3 = np.random.normal(mu, sigma, 10)\n\n    luckydf = pd.DataFrame([lucky_ppl_sub1, lucky_ppl_sub2, lucky_ppl_sub3]).T\n    smartdf = pd.DataFrame([smart_ppl_sub1, smart_ppl_sub2, smart_ppl_sub3]).T\n\n    luckydf['usedPublicKernel'] = True\n    smartdf['usedPublicKernel'] = False\n\n    results = pd.concat([luckydf, smartdf])\n    results['highest_scoring_sub'] = results[[0, 1, 2]].max(axis=1)\n    results['rank'] = results['highest_scoring_sub'].rank(ascending=False)\n    three_subs.append(results)","d05712f9":"pd.concat(three_subs).groupby('usedPublicKernel')['rank'] \\\n    .plot(kind='kde',\n          title='Public Kernel vs Smart - 2 subs 1000x bootstrap',\n          figsize=(10, 5))\nplt.legend()\nplt.show()","87fbbd59":"pd.concat(three_subs).groupby('usedPublicKernel')['rank'].describe()","1aa742ce":"one_s = pd.concat(one_sub)\ntwo_s = pd.concat(two_subs)\nthree_s = pd.concat(three_subs)\none_s['subs'] = 1\ntwo_s['subs'] = 2\nthree_s['subs'] = 3","39f6bc3e":"combined = pd.concat([one_s, two_s, three_s])","8743dc4a":"combined.query('not usedPublicKernel') \\\n    .groupby('subs')['rank'] \\\n    .plot(kind='kde',\n          figsize=(10, 5),\n          title='Distribution of Simulated Rank of Non-Public Kernel Teams by # of Subs Allowed')\nplt.legend()\nplt.show()","ffba532e":"# How many submissions are best?\n\nThis notebook simulates, with some assumptions, the impact of the number of submissions allowed can have on the \"luck\" of the leaderboard.\n\nAssumptions used:\n- Competition with 1010 participants\n- 1000 \"public kernel\" participants with avg score of 0.950, std 0.005\n- 10 \"smart\" participants with avg score 0.955, std 0.005\n- Simulate with 1, 2, and 3 potential submissions\n- Each participants max submission is chosen and given a rank.\n- bootstrap this simulation 1000x for each submission count (1, 2, or 3)","d389fb63":"# Three Final Submissions Allowed","06aa2a0c":"# Two Final Submissions Allowed","0ddcef97":"## One Final Submission Allowed","fc221d35":"# Compare Ranks of Non-Public Kernel People"}}