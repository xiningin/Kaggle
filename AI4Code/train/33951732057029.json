{"cell_type":{"cd0f1ce5":"code","55b7d6c2":"code","b6e47e56":"code","20b0abf2":"code","2c3788e5":"code","62dee1f7":"code","38725649":"code","6e6e1c9a":"code","e71171d1":"code","2f86738d":"code","4b56413a":"code","88f69048":"code","bf436b79":"code","67c0b3e3":"code","77b85faa":"code","b1f8eb2d":"code","7da85576":"code","0436112f":"code","c8fae9e0":"code","d58472dd":"code","be3ffe72":"code","ffa7a6ea":"code","7f9bf6b4":"code","202e8502":"code","2c0ecdfe":"code","3c66d1b4":"markdown","e6e98a88":"markdown","b7b1b471":"markdown","c3562e00":"markdown","ffc473be":"markdown","ae2bf251":"markdown","41d738e7":"markdown","b6cb50c2":"markdown","231fb9a8":"markdown","65d4a8e7":"markdown","0241866f":"markdown","ef6ec93a":"markdown","0177f42a":"markdown","3141821d":"markdown","3bbf29b0":"markdown","27a096de":"markdown"},"source":{"cd0f1ce5":"# Project: Novel Corona Virus 2019 Dataset by Kaggle\n# Program: COVID-19 in Canada\n# Author:  Radina Nikolic\n# Date:    March 20, 2020\n#          April 23, 2020 Added Active Cases and Week\n\n# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport plotly.io as pio\npio.templates.default = \"plotly_dark\"\nfrom plotly.subplots import make_subplots\n\nimport os\n\n# Input data files are available in the \"..\/input\/\" directory.\n\n","55b7d6c2":"df_covid = pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv',parse_dates=['Last Update'])\ndf_covid.rename(columns={'ObservationDate':'Date', 'Country\/Region':'Country', 'Province\/State':'Province' }, inplace=True)\n","b6e47e56":"#Converting date column into correct format\ndf_covid['Date']=pd.to_datetime(df_covid['Date'])\n\nmaxdate=max(df_covid['Date'])\n\nfondate=maxdate.strftime(\"%Y-%m-%d\")\nprint(\"The last observation date is {}\".format(fondate))\nondate = format(fondate)\n","20b0abf2":"#Adding Active cases\ndf_covid['Active'] = df_covid['Confirmed'] - df_covid['Deaths'] - df_covid['Recovered']\nprint(\"Active Cases Column Added Successfully\")\ndf_covid.head()","2c3788e5":"def plot_bar_chart(confirmed, deaths, recovered,active, country, fig=None):\n    if fig is None:\n        fig = go.Figure()\n    fig.add_trace(go.Bar(x=confirmed['Date'],\n                y=confirmed['Confirmed'],\n                name='Confirmed'\n                ))\n    fig.add_trace(go.Bar(x=deaths['Date'],\n                y=deaths['Deaths'],\n                name='Deaths'\n                ))\n    fig.add_trace(go.Bar(x=recovered['Date'],\n                y=recovered['Recovered'],\n                name='Recovered'\n                ))\n    fig.add_trace(go.Bar(x=active['Date'],\n                y=active['Active'],\n                name='Active'\n                ))\n\n    fig.update_layout(\n        title= 'Cumulative Daily Cases of COVID-19 (Confirmed, Deaths, Recovered, Active) - ' + country + ' as of ' + ondate ,\n        xaxis_tickfont_size=12,\n        yaxis=dict(\n            title='Number of Cases',\n            titlefont_size=14,\n            tickfont_size=12,\n        ),\n        legend=dict(\n            x=0,\n            y=1.0,\n            bgcolor='rgba(255, 255, 255, 0)',\n            bordercolor='rgba(255, 255, 255, 0)'\n        ),\n        barmode='group',\n        bargap=0.15, \n        bargroupgap=0.1 \n    )\n    return fig","62dee1f7":"def plot_line_chart(confirmed, deaths, recovered, active, country, fig=None):\n    if fig is None:\n        fig = go.Figure()\n    fig.add_trace(go.Scatter(x=confirmed['Date'], \n                         y=confirmed['Confirmed'],\n                         mode='lines+markers',\n                         name='Confirmed'\n                         ))\n    fig.add_trace(go.Scatter(x=deaths['Date'], \n                         y=deaths['Deaths'],\n                         mode='lines+markers',\n                         name='Deaths'\n                         ))\n    fig.add_trace(go.Scatter(x=recovered['Date'], \n                         y=recovered['Recovered'],\n                         mode='lines+markers',\n                         name='Recovered'\n                        ))\n    fig.add_trace(go.Scatter(x=active['Date'], \n                         y=active['Active'],\n                         mode='lines+markers',\n                         name='Active'\n                        ))\n    fig.update_layout(\n        title= 'Number of COVID-19 Cases Over Time - ' + country + ' as of ' + ondate ,\n        xaxis_tickfont_size=12,\n        yaxis=dict(\n           title='Number of Cases',\n           titlefont_size=14,\n           tickfont_size=12,\n        ),\n        legend=dict(\n           x=0,\n           y=1.0,\n           bgcolor='rgba(255, 255, 255, 0)',\n           bordercolor='rgba(255, 255, 255, 0)'\n        )\n     )\n    return fig","38725649":"confirmed = df_covid.groupby('Date').sum()['Confirmed'].reset_index() \ndeaths = df_covid.groupby('Date').sum()['Deaths'].reset_index() \nrecovered = df_covid.groupby('Date').sum()['Recovered'].reset_index()\nactive = df_covid.groupby('Date').sum()['Active'].reset_index()","6e6e1c9a":"plot_bar_chart(confirmed, deaths, recovered,active, 'Worldwide').show()","e71171d1":"plot_line_chart(confirmed, deaths, recovered,active,'Worldwide').show()","2f86738d":"Canada_df = df_covid[df_covid['Country'] == 'Canada'].copy()\nCanada_df.head() ","4b56413a":"Canada_df.tail()","88f69048":"confirmed = Canada_df.groupby(['Date', 'Province'])['Confirmed'].sum().reset_index()\nprovinces = Canada_df['Province'].unique()\nprovinces","bf436b79":"# Clean Data\nCanada_df = Canada_df.replace(to_replace =[\"Toronto, ON\", \"London, ON\"],  \n                            value =\"Ontario\") \nCanada_df = Canada_df.replace(to_replace =[\"Calgary, Alberta\", \"Edmonton, Alberta\"],  \n                            value =\"Alberta\") \nCanada_df =Canada_df.replace(to_replace =[\" Montreal, QC\"],  \n                            value =\"Quebec\") \n# Here recovered is assumed to be from BC, and Cruise ship data from Ontario\n#Canada_df =Canada_df.replace(to_replace =[\"Recovered\"],  \n#                            value =\"British Columbia\") \nCanada_df =Canada_df.replace(to_replace =[\"Diamond Princess cruise ship\"],  \n                            value =\"Ontario\") ","67c0b3e3":"confirmed = Canada_df.groupby('Date').sum()['Confirmed'].reset_index()\ndeaths = Canada_df.groupby('Date').sum()['Deaths'].reset_index()\nrecovered = Canada_df.groupby('Date').sum()['Recovered'].reset_index()\nactive = Canada_df.groupby('Date').sum()['Active'].reset_index()","77b85faa":"plot_bar_chart(confirmed, deaths, recovered,active, 'Canada').show()","b1f8eb2d":"plot_line_chart(confirmed, deaths, recovered,active,'Canada').show()","7da85576":"provinces = Canada_df['Province'].unique()\nprovinces","0436112f":"confirmed = Canada_df.groupby(['Date', 'Province'])['Confirmed'].sum().reset_index()","c8fae9e0":"fig = go.Figure()\nfor province in provinces:\n \n    fig.add_trace(go.Scatter(\n        x=confirmed[confirmed['Province']==province]['Date'],\n        y=confirmed[confirmed['Province']==province]['Confirmed'],\n        name = province, # Style name\/legend entry with html tags\n        connectgaps=True # override default to connect the gaps\n    ))\nfig.update_layout(title=\"Number of Confirmed COVID-19 Cases Over Time - Canada - By Province\" + ' as of ' + ondate)       \nfig.show()","d58472dd":"grouped_country = Canada_df.groupby([\"Province\"] ,as_index=False)[\"Confirmed\",\"Recovered\",\"Deaths\"].last().sort_values(by=\"Confirmed\",ascending=False)\ngrouped_country","be3ffe72":"fig = go.Figure()\n\nfig.add_trace(go.Bar(\n    \n    y=grouped_country['Province'],\n    x=grouped_country['Confirmed'],\n    orientation='h',\n    text=grouped_country['Confirmed']\n    ))\nfig.update_traces(textposition='outside')\nfig.update_layout(title=\"Cumulative Number of COVID-19 Confirmed Cases - By Province\" + ' as of ' + ondate)    \nfig.show()","ffa7a6ea":"fig = go.Figure()\n\ntrace1 = go.Bar(\n    x=grouped_country['Confirmed'],\n    y=grouped_country['Province'],\n    orientation='h',\n    name='Confirmed'\n)\ntrace2 = go.Bar(\n    x=grouped_country['Deaths'],\n    y=grouped_country['Province'],\n    orientation='h',\n    name='Deaths'\n)\ntrace3 = go.Bar(\n    x=grouped_country['Recovered'],\n    y=grouped_country['Province'],\n    orientation='h',\n    name='Recovered'\n)\n\ndata = [trace1, trace2, trace3]\nlayout = go.Layout(\n    barmode='stack'\n)\n\nfig = go.Figure(data=data, layout=layout)\nfig.update_layout(title=\"Stacked Number of COVID-19 Cases (Confirmed, Deaths, Recoveries) - Canada by Province\" + ' as of ' + ondate)    \nfig.show()","7f9bf6b4":"ts_confirmed = pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_confirmed.csv')\nts_confirmed.rename(columns={'Country\/Region':'Country', 'Province\/State':'Province' }, inplace=True)\nCanada_C_ts = ts_confirmed[ts_confirmed['Country'] == 'Canada'].copy()\nCanada_C_ts\n","202e8502":"ts_diff =Canada_C_ts[Canada_C_ts.columns[4:Canada_C_ts.shape[1]]]\nnew = ts_diff.diff(axis = 1, periods = 1) \nynew=list(new.sum(axis=0))","2c0ecdfe":"fig = go.Figure()\nfig.add_trace(go.Bar(\n    y=ynew,\n    x=ts_diff.columns,\n    text=list(new.sum(axis=0)),\n    ))\nfig.update_traces(textposition='outside')\nfig.update_layout(title=\"Epidemic Curve - Daily Number of COVID-19 Confirmed Cases in Canada \" + ' as of  ' + ondate,\n                 yaxis=dict(title='Number of Cases'))    \nfig.show()","3c66d1b4":"Add Column Active Cases\n","e6e98a88":"# Advanced Data Analysis\n\n<b>Time Series Analysis<\/b>\n\n","b7b1b471":"# Across Canada","c3562e00":"# References\n\n**Data Sources**\n\n1. [Novel Corona Virus 2019 Dataset on Kaggle](https:\/\/www.kaggle.com\/sudalairajkumar\/novel-corona-virus-2019-dataset)\n2. [Novel Coronavirus (COVID-19) Cases, provided by JHU CSSE](https:\/\/github.com\/CSSEGISandData\/COVID-19)","ffc473be":"Check the latest observation date","ae2bf251":"# What is happening Worldwide","41d738e7":"# What is going on in Canada","b6cb50c2":"# Visualization","231fb9a8":"To Do:\n\n* Clustering of Worldwide Cases\n* Forecasting ....\n* More granular analysis - Age...","65d4a8e7":"# Functions for plotting","0241866f":"First Cases","ef6ec93a":"<b>Epidemic Curve<\/b>\n\nAn epidemic curve shows the frequency of new cases over time based on the date of onset of disease. This curve is an important plot in epidemiology. The shape of the curve in relation to the incubation period for a particular disease can give clues about the spread and duration of the epidemy.","0177f42a":"# Exploratory Data Analysis of Covid-19 Cases in Canada\n\nThis is just an attempt to visualize Covid-19 spread in Canada, based on published data . See References for data sources. Notebook will be updated daily, as an updated dataset become available.","3141821d":"The Latest Cases (based on available data)","3bbf29b0":"# Background\n\nTo Do:","27a096de":"# Basic Data Analysis"}}