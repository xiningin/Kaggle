{"cell_type":{"24e59c63":"code","cb999d48":"code","bf022581":"code","a3c79679":"code","7206c139":"code","ff764c6c":"code","f1676c61":"code","e4eb3adf":"code","282adf12":"code","69809f02":"code","7f9ae81a":"code","5222928a":"code","491e86a8":"code","04148b0e":"code","a7ae297b":"code","da3e51b6":"code","225d3ed0":"code","5434a9ab":"code","344082a2":"code","dc12d27f":"code","d083d7a9":"code","2c17a8a3":"code","5743dc34":"code","796a5dbf":"code","d2ea5c48":"code","08f26c96":"code","ec1675a0":"code","5d652e62":"code","408dd1d7":"code","ec96b21e":"code","d5ad26a0":"code","0571e375":"code","28cd57df":"code","f55f0046":"code","d900a138":"code","ea4b090b":"code","d3d65553":"code","1556f662":"markdown","3fc571ab":"markdown","bb617f63":"markdown","f6cb54d6":"markdown","6d8e5d55":"markdown","0f048670":"markdown","1b34bc86":"markdown","53b9696a":"markdown","4e029a88":"markdown","eff5caa3":"markdown","ddec9a0e":"markdown","19030215":"markdown","a7fa56d7":"markdown","22477084":"markdown","36805602":"markdown","c1fc4c87":"markdown","0fb92fda":"markdown","6175672b":"markdown"},"source":{"24e59c63":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\nsns.set()","cb999d48":"df = pd.read_csv(\"\/kaggle\/input\/hr-analytics\/HR_comma_sep.csv\")","bf022581":"df.head(10)","a3c79679":"df.tail(10)","7206c139":"df.info()","ff764c6c":"df.count()","f1676c61":"df.describe()","e4eb3adf":"print(f'Any NaN values? {df.isna().values.any()}')","282adf12":"df[\"Department\"].unique()","69809f02":"df[\"salary\"].unique()","7f9ae81a":"new_df = df.copy()","5222928a":"new_df = pd.get_dummies(new_df, columns=[\"Department\"], drop_first=True)\nnew_df","491e86a8":"new_df[\"salary\"] = new_df[\"salary\"].map({\"low\": 0, \"medium\": 1, \"high\": 2})\nnew_df","04148b0e":"df_preprocessed = new_df.copy()\ndf_preprocessed","a7ae297b":"df_preprocessed.rename(columns={\"time_spend_company\": \"time_spent\", \"left\": \"resigned\"}, inplace=True)\ndf_preprocessed","da3e51b6":"targets = df_preprocessed[\"resigned\"]","225d3ed0":"unscaled_inputs = df_preprocessed.drop([\"resigned\"], axis=1)\nunscaled_inputs","5434a9ab":"from sklearn.base import BaseEstimator, TransformerMixin\nfrom sklearn.preprocessing import StandardScaler\n\nclass CustomScaler(BaseEstimator, TransformerMixin):\n    \n    def __init__(self, columns):\n        self.scaler = StandardScaler()\n        self.columns = columns\n        self.mean_ = None\n        self.var_ = None\n    \n    def fit(self, X, y=None):\n        self.scaler.fit(X[self.columns], y)\n        self.mean_ = np.mean(X[self.columns])\n        self.var_ = np.var(X[self.columns])\n        return self\n    \n    def transform(self, X, y=None, copy=None):\n        init_col_order = X.columns\n        X_scaled = pd.DataFrame(self.scaler.transform(X[self.columns]), columns=self.columns)\n        X_not_scaled = X.loc[:, ~X.columns.isin(self.columns)]\n        return pd.concat([X_not_scaled, X_scaled], axis=1)[init_col_order]","344082a2":"unscaled_inputs.columns.values","dc12d27f":"columns_to_omit = ['Work_accident',\n       'promotion_last_5years', 'salary', 'Department_RandD',\n       'Department_accounting', 'Department_hr', 'Department_management',\n       'Department_marketing', 'Department_product_mng',\n       'Department_sales', 'Department_support', 'Department_technical']","d083d7a9":"columns_to_scale = [col for col in unscaled_inputs.columns.values if col not in columns_to_omit]","2c17a8a3":"scaler = CustomScaler(columns_to_scale)","5743dc34":"scaler.fit(unscaled_inputs)","796a5dbf":"scaled_inputs = scaler.transform(unscaled_inputs)\nscaled_inputs","d2ea5c48":"from sklearn.model_selection import train_test_split","08f26c96":"X_train, X_test, y_train, y_test = train_test_split(scaled_inputs, targets, train_size=0.8, random_state=20)","ec1675a0":"from sklearn.linear_model import LogisticRegression","5d652e62":"reg = LogisticRegression()","408dd1d7":"reg.fit(X_train, y_train)","ec96b21e":"print(f'Regression Training Accuracy: {reg.score(X_train, y_train) * 100}%')","d5ad26a0":"feature_names = unscaled_inputs.columns.values\nreg_summary = pd.DataFrame(columns=[\"Feature name\"], data=feature_names)\nreg_summary[\"Coefficient\"] = np.transpose(reg.coef_)\nreg_summary","0571e375":"reg_summary.index = reg_summary.index + 1\nreg_summary.loc[0] = [\"Intercept\", reg.intercept_[0]]\nreg_summary = reg_summary.sort_index()\nreg_summary","28cd57df":"reg_summary[\"Odds_ratio\"] = np.exp(reg_summary.Coefficient)\nreg_summary","f55f0046":"from sklearn.metrics import accuracy_score","d900a138":"y_pred = reg.predict(X_test)","ea4b090b":"print(f'Regression Accuracy: {accuracy_score(y_test, y_pred)}')","d3d65553":"predicted_proba = pd.DataFrame(reg.predict_proba(X_test), columns=[\"Will not leave\", \"Will leave\"])\npredicted_proba","1556f662":"## Checking for missing values","3fc571ab":"# Training the Model","bb617f63":"## Regression Summary","f6cb54d6":"## Create the targets","6d8e5d55":"## Descriptive Statistics","0f048670":"## Interpreting the coefficients","1b34bc86":"# Model Evaluation and Testing","53b9696a":"Well from the odds ratio we can see the **'time_spent'** feature is somewhat a high predictor of the outcome compared to the others that means the higher the time spent in a company the greater the chance of resigning as well as employees that are in the HR Department are likely to move on with their lives and find another job ","4e029a88":"* **satisfaction_level:** level of satisfaction of the employee.\n* **last_evaluation:** employee's grade on his\/her last evaluation.\n* **time_spent:** time spent in the company in years.\n* **Work_accident:** whether the employee had a work accident or not.","eff5caa3":"# Outline the Model","ddec9a0e":"## Standardize the data","19030215":"# Import relevant libraries","a7fa56d7":"# Load the Data","22477084":"# Preliminary Data Exploration","36805602":"## Predicted Probabilities","c1fc4c87":"# Data Cleaning and Manipulation","0fb92fda":"# Split the Training & Test datasets","6175672b":"## Encoding Categorical data"}}