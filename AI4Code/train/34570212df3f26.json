{"cell_type":{"3d8a1557":"code","6ca70979":"code","eabd104e":"code","50076e90":"code","e33c80be":"code","31211713":"code","2187fa3f":"code","ce14343d":"code","a01c27d5":"code","0f181b3a":"code","8c8f0bf6":"code","c9b8ec01":"code","4f8e3e78":"code","509c9022":"code","aa372535":"code","ab8b66a7":"markdown","d09ccf69":"markdown","5bc31e5f":"markdown","503ce931":"markdown","e348667f":"markdown","e355c181":"markdown","8daecd64":"markdown","697f421b":"markdown","2fe5fdb2":"markdown","488cd47b":"markdown","a62de289":"markdown","3a442ec0":"markdown","a203314b":"markdown","d2c62fa2":"markdown","3e6cb784":"markdown","50d5d8df":"markdown","4ffbbbf4":"markdown","13845b0f":"markdown","ebccde7e":"markdown","9c9fabf1":"markdown"},"source":{"3d8a1557":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Ignoring runtime warnings.\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint('Cell Executed ^_1_^')\n\n# Any results you write to the current directory are saved as output.","6ca70979":"original_df = pd.read_csv('..\/input\/database.csv')\nprint(\"Cell Executed ^_2_^\")\noriginal_df.head()","eabd104e":"original_df = pd.read_csv('..\/input\/database.csv')\n\nrelationship_features = ['Stranger', 'Family', 'Neighbor']\nrelationship_mask = original_df['Relationship'].isin(relationship_features)\n\nweapon_features = ['Handgun', 'Knife', 'Blunt Object', 'Strangulation']\nweapon_mask = original_df['Weapon'].isin(weapon_features)\n\nvictim_sex_features = ['Male', 'Female']\nvictim_sex_mask = original_df['Victim Sex'].isin(victim_sex_features)\n\nperpetrator_features = ['Male', 'Female']\nperpetrator_mask = original_df['Perpetrator Sex'].isin(perpetrator_features)\n\ndf = original_df[relationship_mask & weapon_mask & victim_sex_mask & perpetrator_mask]\ndf = df[['Relationship', 'Weapon', 'Victim Sex' , 'Perpetrator Sex']]\n\ndf.head()","50076e90":"categorize = ['Relationship', 'Weapon', 'Perpetrator Sex', 'Victim Sex']\n\nfor col in categorize : \n    df[col] = df[col].astype('category')\n    df[col] = df[col].astype('category').cat.codes\n\ndf.head()","e33c80be":"df_mask = (df['Perpetrator Sex'] == 1)\ndf_male = df[df_mask]\ndf_female = df[~df_mask]\ndf_male.head(), df_female.head()","31211713":"def get_values_from_array_sorted(arr):\n    '''\n    Return an array containing all the values in the given array arr. The returned array is sorted from lowest to highest.\n    Example: arr=[6,6, 1,1,2,1,3,3,3] will return [1,2,3,6]\n    HINT : Use .sort() to sort your array before returning it. \n    '''\n    \n\ndef test_get_values_from_array():\n    arr = [1,2,3]\n    if get_values_from_array_sorted(arr) != [1,2,3]:\n        print(\"Failed on arr {}\".format(arr))\n        return False\n    \n    arr = [2,1,3]\n    if get_values_from_array_sorted(arr) != [1,2,3]:\n        print(\"Failed on arr {}\".format(arr))\n        print(\"Did you forget to sort?\")\n        return False\n    \n    arr = [1,2,3,3,3,1,1,4,4]\n    if get_values_from_array_sorted(arr) != [1,2,3,4]:\n        print(\"Failed on arr {}\".format(arr))\n        return False\n    \n    return True\n\nif test_get_values_from_array():\n    print(\"test_get_values_from_array passed.\")","2187fa3f":"def count_value_in_array(arr, value):\n    '''\n    Count how many times the given value appear in the given array arr.\n    Example: arr=[1,1,2,2,2,2,6] value=2 will return 4.\n    '''\n\n\ndef test_count_value_in_array():\n    arr = [1,2,3,2,2,2,2,3]\n    if count_value_in_array(arr, 1) != 1:\n        print(\"Failed on arr {}, and value {}\".format(arr, 1))\n        return False\n    \n    if count_value_in_array(arr, 2) != 5:\n        print(\"Failed on arr {}, and value {}\".format(arr, 2))\n        return False\n    \n    if count_value_in_array(arr, 3) != 2:\n        print(\"Failed on arr {}, and value {}\".format(arr, 3))\n        return False\n    \n    if count_value_in_array(arr, 4) != 0:\n        print(\"Failed on arr {}, and value {}\".format(arr, 4))\n        return False\n    \n    return True\n\nif test_count_value_in_array():\n    print(\"test_count_value_in_array passed.\")","ce14343d":"def compute_probabilities(arr):\n    '''\n    For each value in the given array arr compute the probability of getting that value if you\n    sample a value from the array uniformly.\n    Example : arr=[1,1,2,2,3,3,3,3] return =[0.25, 0.25, 0.5]\n    '''\n\n\ndef test_compute_probabilities():\n    arr = [1,1,1,2,2,2]\n    if compute_probabilities(arr) != [0.5, 0.5]:\n        print(\"Failed on arr {}\".format(arr))\n        \n        return False\n    \n    return True\n\nif test_compute_probabilities():\n    print(\"test_compute_probabilites passed\")","a01c27d5":"p_female_relationship = 0\np_female_weapon = 0\np_female_victimsex = 0\nprint('Cell executed ^__^')","0f181b3a":"p_male_relationship = 0\np_male_weapon = 0\np_male_victimsex = 0\nprint('Cell executed ^__^')","8c8f0bf6":"# Display the probabilites which help you support your question.\n","c9b8ec01":"# Display the probailites which help you support your question\n","4f8e3e78":"# Display the probabilites which help you support your question:\n","509c9022":"# Display the probabilites which help you support your question:\n","aa372535":"# Write code to support your answer here:","ab8b66a7":"### Solution 5.a\nFemale likelihood for the events = \n\nmale likelihood for the events = ","d09ccf69":"# Split the dataset into female and male.\nSince we want to compute the probabilites under each class (in our case female and male) <br\/>\nWe are going to split our data set into 2 : one for the male and one for the female","5bc31e5f":"### Question 2:\nIf you know your perpetrator is a man, what is the most likely weapon they used?","503ce931":"### Question 3:\nWhat is more likely that a woman perpetrator had a family relation to her victim\nor that a male perpetartor had a family relation to her victim?","e348667f":"# Preprocess data for analysis\nTo make our life a little bit easier we are going to focus our view on 3 features:\n1. Relationhsip (The relationship between the victim and the perpetrator.\n1. Weapon (The weapon used to commit the murder).\n1. Victim Sex (Speaks for itself).\n","e355c181":"### Question 5.b\nIf all went well you find that the liklihood of the female is much higher that that of a male.<br\/>\nBut still in your case it is more likely the your perpetrator is a male. <\/br>\nExplain why this is?\nHINT : Compute the prior for each class","8daecd64":"### Question 4:\nWhat is more likely that a woman perpetrator had a male victim\nor that a male perpetartor had a male victim?","697f421b":"### Solution 5.b\nWrite your solution here.","2fe5fdb2":"# Computing Probabilites\nWe will now use our compute probabilites function to .. compute probabilites for each class. <br\/>\nThese probabilites will then enable use to preform classification for new data.<br\/>\nYou should call `compute_probabilites(df_class[col_name)` think for each case which df class you need and what is the column name.\n### Female class","488cd47b":"# Ex 2\n*You can hand in the assignment in pairs.* \n\nIn this exercise we will implement the naive base algorithm you've learned in class.<br>\nWe are going to classify to male vs female murderer based on features in the data.\n\nDon't forget to run the cells.\n### Just run the following cell no code needed.","a62de289":"# End of Exercise\nTo submit the exercise, click *File* -> *Download Notebook*.<br>\nAfter your donwloaded change the name of the file to : \nID1_ID2.ipynb if you are submitting in pairs or\nID1.ipynbg if you are submitting alone (and ofcourse replace ID1 with your personal ID)\nSubmit the downloaded file in the moodle under ex2.","3a442ec0":"# Helper Functions","a203314b":"### Solution 2:\nWrite your solution in this cell.","d2c62fa2":"### Solution 3:\nWrite your solution in this cell.","3e6cb784":"### Male Class","50d5d8df":"# Categorize\nTo make our processing life easier we are going to turn our string value into numeric values.\nHere are the codes we are going to use:<br\/>\n\n__Relationship__ : (0 = Family)  | (1 = Neighbor) | 2 = Stranger)\n\n__Weapon__ : (0 = Blunt Object), (1 = Handgun), (2 = Knife), (3 = Strangulation)\n\n__Victim Sex__ : (0 = Female) | (1 = Male) \n\n__Perpetrator_sex__ : (0 =Female) | (1 = Male)","4ffbbbf4":"## Questions\nLet's now ask questions to see how we can use our data.<br\/>\nHere is our mapping between numeric value and string value:\n\n__Relationship__ : (0 = Family)  | (1 = Neighbor) | (2 = Stranger)\n\n__Weapon__ : (0 = Blunt Object), (1 = Handgun), (2 = Knife), (3 = Strangulation)\n\n__Victim Sex__ : (0 = Female) | (1 = Male) \n\n__Perpetrator_sex__ : (0 =Female) | (1 = Male)\n\n### Question 1:\nIf you know your perpetrator is a woman, what is the most likely relatioship bewteen her and the victim?","13845b0f":"### Solution 1:\nWrite your solution in this cell.","ebccde7e":"### Question 5.a\nYou are investegating a crime and you know the following things about your case:\n1. The victim was a female.\n1. The perpetrator had a family relation to their victim\n1. The perpetrator used a knife. <br\/>\nCompute the likelihood under each class (male, female). <br\/>\nRecall the likelihood is :<br\/>\n$$P(x_1, x_2, x_3|C) = p(x_1|C) \\cdot p(x_2|C) \\cdot p(x_3|C)$$","9c9fabf1":"# Load and peek at the data\nThe data we are going to work with is comprised of ~650000 murders the FBI recorded.\n\nFor each murder they recorded many features such as : Year, Month, Victim Sex, Victim Age, Relationship (Victim - perpetrator) and many more.<br\/>\nLet's take a look."}}