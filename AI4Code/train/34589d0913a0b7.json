{"cell_type":{"311a0328":"code","de89d32c":"code","8646d7c9":"code","4be07dc1":"code","7fabfaeb":"code","d755943d":"code","f9acb4c6":"code","09258ca3":"code","622bfb35":"code","c4f95d9a":"code","20c5b3a9":"code","20b06814":"code","f9823395":"code","f90b34fd":"code","4b214aca":"code","49c4c388":"code","de1d63e5":"code","acf72822":"markdown","e4f18fe0":"markdown","c2fa8574":"markdown","3a4167de":"markdown","27ca30fb":"markdown","15865eeb":"markdown","15ccdea4":"markdown","7469da81":"markdown","7617ffe5":"markdown","95dd1478":"markdown","5097561d":"markdown","14cf4928":"markdown","8a7845e9":"markdown","78a48566":"markdown"},"source":{"311a0328":"!pip install bar_chart_race","de89d32c":"import pandas as pd\nfrom IPython.display import HTML\nimport bar_chart_race as bcr","8646d7c9":"data_path = \"\/kaggle\/input\/us-counties-covid-19-dataset\/us-counties.csv\"\n#local: 'data\/us-counties-2020-04-28.csv' \n\ndf = pd.read_csv(data_path, index_col='date')\ndf.head()","4be07dc1":"df.index = pd.to_datetime(df.index)","7fabfaeb":"df.info()","d755943d":"df_cases = df.loc[:, ['state', 'cases']]","f9acb4c6":"df_states = df_cases.groupby(['date','state']).sum().reset_index()\ndf_states","09258ca3":"df_states = df_states.set_index('date')\ndf_states.info()","622bfb35":"df_states.head()","c4f95d9a":"df_pivoted = df_states.pivot(values='cases', columns='state')\ndf_pivoted.tail(2)","20c5b3a9":"df_pivoted.info()","20b06814":"df_pivoted_later = df_pivoted[df_pivoted.index >= \"2020-02-20\"]\ndf_pivoted_later.head(2)","f9823395":"bcr.bar_chart_race(\n    df=df_pivoted_later,\n    filename='covid19_county_state_h_later.mp4',\n    orientation='h',\n    sort='desc',\n    label_bars=True,\n    use_index=True,\n    steps_per_period=10,\n    period_length=300,\n    figsize=(8, 6),\n    cmap='dark24',\n    title='COVID-19 Cases by State',\n    bar_label_size=7,\n    tick_label_size=7,\n    period_label_size=16,\n)","f90b34fd":"bcr_html = bcr.bar_chart_race(df=df_pivoted_later, filename=None, period_length=300, figsize=(8, 6))","4b214aca":"HTML(bcr_html)","49c4c388":"df_pivoted.to_csv('pivoted_covid19_through_apr_27_wf.csv')","de1d63e5":"df_pivoted_later.to_csv('pivoted_covid19_through_feb_20_to_apr_27_wf.csv')","acf72822":"In this notebook I will show how to use Python, pandas, and the bar_chart_race package to make a bar chart race of Covid19 cases over time by state.\n\nCounty level dataset from [New York Times](https:\/\/raw.githubusercontent.com\/nytimes\/covid-19-data\/master\/us-counties.csv)  via [Kaggle](https:\/\/www.kaggle.com\/fireballbyedimyrnmom\/us-counties-covid-19-dataset).","e4f18fe0":"#### Install bar_chart_race package","c2fa8574":"#### Pivot the data to get it in the correct format for the bar chart race.\n\nData needs to be in wide format, so states along the top, dates in the index, either deaths or cases for the values. ","3a4167de":"#### Make a bar chart race for inline notebook viewing.","27ca30fb":"## Future directions:\n\n- Could pull from NYT repo directly so have most updated info.\n- Could aggregate data by week.\n\n### I hope you found this example of how to make a bar chart race after some data munging to be useful! \ud83c\udf89\n\n### Please upvote if you did! \ud83d\ude00\n","15865eeb":"### groupby date and state","15ccdea4":"#### Save cleaned state level data to output files","7469da81":"#### Make the bar chart race and output to a file","7617ffe5":"#### Read data","95dd1478":"#### Set index to datetime ","5097561d":"# Covid19 Cases by State in USA Bar Chart Race \n\n### Apr. 28, 2020\n#### By: Jeff Hale","14cf4928":"#### Explore data","8a7845e9":"#### Make a DataFrame that starts after there are a few data points so X-axis labels look nicer at start.","78a48566":"#### Import packages"}}