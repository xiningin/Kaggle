{"cell_type":{"9837f78e":"code","cd9474a2":"code","48a5d4bc":"code","a0cfcd7d":"code","b3fae1de":"code","7439484a":"code","fad20d03":"code","dc14b372":"code","9974c68b":"code","12834a60":"code","d125e9a6":"markdown","68de7fa4":"markdown","d2f80541":"markdown","467c8cf1":"markdown","79e54c18":"markdown","1db37bab":"markdown","61518f99":"markdown"},"source":{"9837f78e":"#import yfinance as yf   \nimport pandas as pd\nimport matplotlib.pyplot as plt\n#plt.style.use('dark_background')\n\nstocks = ['FB', 'AAPL', 'AMZN', 'GOOG', 'NFLX']\nstocks_returns = ['FB_r', 'AAPL_r', 'AMZN_r', 'GOOG_r', 'NFLX_r']\n\ndata = pd.read_csv('..\/input\/yfinancedata\/yfinancedata.csv')","cd9474a2":"data = data.set_index(data['Date'])\ndata = data.drop(columns = 'Date')\ndata.head()","48a5d4bc":"plt.figure(figsize = (16,8))\nfor st in stocks:\n    plt.plot(data.index, data[st], label = st)\n    plt.legend()","a0cfcd7d":"plt.figure(figsize = (16,8))\nfor st in stocks:\n    plt.plot(data.index, data[st]\/data[st][0], label = st)\n    plt.legend()","b3fae1de":"for st,sr in zip(stocks, stocks_returns) :\n    data[sr] = data[st].pct_change()\ndata.head()","7439484a":"data = data.drop(columns = stocks, axis = 0)\ndata = data.dropna()\n\ndata.head()","fad20d03":"weights = {\n    'FB' : 0.0806,\n    'AAPL' : 0.5087,\n    'AMZN' : 0.3082,\n    'GOOG': 0.0804,\n    'NFLX': 0.08039283355,\n}\n\nrespective_weights = list(weights.values())\n\nplt.figure(figsize = (16,8))\nplt.ylabel(\"Weights\")\nplt.title(\"Free Float\")\nplt.bar(stocks, respective_weights)","dc14b372":"for st,sr in zip(stocks, stocks_returns):\n    data[st] = (data[sr]+1).cumprod()\n    \ndata= data.drop(columns = stocks_returns, axis = 0)\ndata","9974c68b":"indx = pd.DataFrame(index=data.index.copy())\nfor st, w in zip(stocks, respective_weights):\n    indx[st] = data[st]*w\n    \nindx['index'] = indx['FB'] + indx['AAPL'] + indx['AMZN'] + indx['GOOG'] + indx['NFLX']\nindx","12834a60":"plt.figure(figsize = (16,8))\nplt.plot(indx.index, indx['index'],linewidth= 5, alpha = 1, label = 'Index')\nplt.plot(indx.index, data['FB'], alpha = 0.5, label = 'FB')\nplt.plot(indx.index, data['AAPL'], alpha = 0.5, label = 'AAPL')\nplt.plot(indx.index, data['AMZN'], alpha = 0.5, label = 'AMZN')\nplt.plot(indx.index, data['GOOG'], alpha = 0.5, label = 'GOOG')\nplt.plot(indx.index, data['NFLX'], alpha = 0.5, label = 'NFLX')\nplt.legend()","d125e9a6":"# Financial index\n\nAn index is a method to track the performance of some group of assets in a standardized way. Indexes typically measure the performance of a basket of securities intended to replicate a certain area of the market.\nThese may be broad-based to capture the entire market such as the Standard & Poor's 500 (S&P 500) or Dow Jones Industrial Average (DJIA), or more specialized such as indexes that track a particular industry or segment. Indexes are also created to measure other financial or economic data such as interest rates, inflation, or manufacturing output.\n\nOften, indices serve as benchmarks against which to evaluate the performance of a portfolio's returns. One popular investment strategy, known as indexing, is to try to replicate such an index in a passive manner rather than trying to outperform it.","68de7fa4":"## Weights calculations\n\nNot all shares are available to trade,for example most of the share are held by institutions.\nWe must calculate the percentage of available stocks on the market, we can find all those details on yahoo.finance\nFor Facebook stocks we find :\n\n*  0.66% of Shares held by All Insider\n* 79.90% of Shares held by Institutions\n\nIn the Facebook case only 100% - 0.66% - 79.90% = **P = 19.44%** of stocks remains\n\nNext, we can use google finance functions to get the current price and the total number of shares:            \nFor Facebook there are **N = 2,40 billion share** at a \"current price\" of **CP = 261,4 USD** \n\nMultiplying **N** x **P** x **CP** is what we call **public float** or a **free float** refers to the number of a company's outstanding shares owned by public investors, excluding locked-in shares held by company managers and officers, controlling-interest investors, governments and other private parties.\n\nWe do the same process for all the stocks, we find those values and their **weights** from their sum:\n\n* FB     :   122,1763788   :     **8,10  %**\n* AMZN   :   465,8732309   :    **30,90  %**\n* AAPL   :   764,7014188   :    **50,71  %**\n* NFLX   :   34,1252891    :     **2,26  %**\n* GOOG   :   120,9840567   :     **8,02  %**\n\nThese weights will be the contribution of each stock on the index value","d2f80541":"Since the prices are not on the same scale for all those stocks, we can standardise the columns to have a better look to the variation details for each stock, by dividing each column by its first observation.","467c8cf1":"In this notebook, we are going to construct a simple index representing 5 stocks Facebook, Apple, Amazon, Google and Netflix just to simplify the idea behind the theory and try to implement its construction.","79e54c18":"## Calculate daily returns rates\n\nTo calculate daily returns from the 'Adj Cloes' series, we can use the pct_change methode ( percentage change between the current and a prior element ). \n\n$$ReturnRate( today ) = \\frac{Price(Today)}{Price(Yesterday)} - 1$$","1db37bab":"## Importing libraries and data\n\nLet's use Yahoo! Finance market data downloader to import the adjusted close price for every stock.","61518f99":"## Visualize the data"}}