{"cell_type":{"cdceddb2":"code","753eb02a":"code","3894b8d4":"code","1bfe99ac":"code","b8962a4e":"code","847cf0fc":"code","e5beb5c9":"code","349f3f8f":"code","d1504cbd":"code","e54400dd":"code","c3488cd4":"code","29ed9a36":"code","28d9e0a9":"code","b47bd301":"code","2572da71":"code","81862185":"code","9d57ca83":"code","1fcbadf8":"code","1d323425":"code","a0d61d99":"code","b7cd1d90":"code","7330906f":"code","990dae92":"code","664a4f0e":"code","f55a6b03":"code","d057986a":"code","ba8949d2":"code","6229b098":"code","0df783e1":"code","0c260a61":"code","d8c5b5d3":"code","56647984":"code","72fe8b21":"code","4fc48ba6":"code","6fd7f740":"code","577f16a8":"code","9e01d48b":"code","ff67c2b0":"code","fcbe9a41":"code","deb3e7fe":"code","e2635ad1":"code","992b4a4d":"code","97ebee10":"code","33c1c0d3":"code","b25f742d":"markdown","a4c3997c":"markdown","e8dba5ef":"markdown","2893896e":"markdown","dc5ee2b7":"markdown","860d12d4":"markdown","915a0d0d":"markdown","0c3ebef9":"markdown","40bfa2ff":"markdown","490d8537":"markdown","fe4d73f5":"markdown","09f8cae6":"markdown"},"source":{"cdceddb2":"# linear algebra\nimport numpy as np\n# data processing, CSV file I\/O (e.g. pd.read_csv)\nimport pandas as pd\n\n# data visualization\nimport matplotlib.pyplot as plt\nfrom matplotlib import rcParams\nimport seaborn as sb\nimport altair as alt\n\ncolor = '#5e8b7e'\n\nsb.set_style('ticks')\n%matplotlib inline\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","753eb02a":"df_mnf = pd.read_csv(\"..\/input\/covid-world-vaccination-progress\/country_vaccinations_by_manufacturer.csv\")\ndf = pd.read_csv(\"..\/input\/covid-world-vaccination-progress\/country_vaccinations.csv\")","3894b8d4":"df.head(3)","1bfe99ac":"df_mnf.head(10)","b8962a4e":"df_mnf.dtypes","847cf0fc":"df_mnf.location.unique()","e5beb5c9":"df_mnf.vaccine.unique()","349f3f8f":"df_mnf.isnull().sum()","d1504cbd":"df_mnf.vaccine.value_counts()","e54400dd":"# vaccine count per manufacturer\nvaccine_count = df_mnf.groupby('vaccine')['total_vaccinations'].mean().\\\n                to_frame().reset_index()\n\nvaccine_count.sort_values(by=['total_vaccinations'], ascending=False)","c3488cd4":"df_mnf.head(-5)","29ed9a36":"plt.figure(figsize=(10, 7))\nplt.bar(vaccine_count['vaccine'], vaccine_count['total_vaccinations'], color=color)\nplt.title(\"Number of different vaccines used\")\nplt.xticks(rotation=45)\n\nplt.show()","28d9e0a9":"# remember this is showing mean values and not actual values\nalt.Chart(vaccine_count).mark_bar().encode(\n    alt.X('vaccine:N', sort='-y'),\n    alt.Y('total_vaccinations:Q'),\n    alt.Color('vaccine:N'),\n    alt.Tooltip(['vaccine', 'total_vaccinations'])\n).properties(\n    width = 600,\n    height = 450\n)","b47bd301":"df_mnf.head(10)","2572da71":"# vaccinations done in different countries based on manufacturers\ncountry = df_mnf.groupby(['location'])['total_vaccinations'].mean().\\\n            to_frame().reset_index()\n\ncountry.head(8)","81862185":"alt.Chart(country).mark_bar().encode(\n    alt.X('location:N', sort='-y'),\n    alt.Y('total_vaccinations:Q'),\n    alt.Color('location:N', legend=None),\n    alt.Tooltip(['location', 'total_vaccinations'])\n).properties(\n    width=700,\n    height=400\n)","9d57ca83":"# data vaccination usa\nusa = df_mnf[df_mnf['location'] == \"United States\"]\nusa.head()","1fcbadf8":"chart = alt.Chart(usa).mark_bar().encode(\n    alt.X('average(total_vaccinations)'),\n    alt.Y('location:N'),\n    alt.Color('vaccine:N'),\n    alt.Tooltip(['vaccine', 'sum(total_vaccinations)'])\n).properties(\n    width=700,\n    height=50\n)\n\nchart","1d323425":"alt.data_transformers.disable_max_rows()\nchart = alt.Chart(df_mnf).mark_bar().encode(\n    alt.X('vaccine:N'),\n    alt.Y('average(total_vaccinations)'),\n    alt.Column('location'),\n    alt.Tooltip(['location', 'vaccine', 'average(total_vaccinations)'])\n)\n\nchart","a0d61d99":"# Vaccines used in USA\nprint(\"Vaccines used in United States:\\n\")\nvacc_list = list(usa.vaccine.unique())\n\nfor x in range(len(vacc_list)):\n  print(f\"{x+1}) {vacc_list[x]}\")","b7cd1d90":"pfizer_usa = alt.Chart(usa, title='Vaccinations over time in the US').mark_line().encode(\n    alt.X('date:T'),\n    alt.Y('total_vaccinations:Q'),\n    alt.Tooltip(['vaccine', 'total_vaccinations']),\n    alt.Color('vaccine'),\n).properties(\n    width=600,\n    height=500\n)\n\npfizer_usa","7330906f":"fig = plt.figure(figsize=(30, 30))\n\nfor i, v in enumerate(df_mnf['location'].unique()):\n    temp_df = df_mnf[df_mnf['location'] == v]\n    fig.add_subplot(8, 4, i+1)\n    sb.lineplot(data=temp_df, x=temp_df['date'], y=temp_df['total_vaccinations'], hue='vaccine')\n    plt.title(v)\n    if len(temp_df['date'][::20]) > 15:\n        plt.xticks(temp_df['date'][::40], rotation=90)\n    else:\n        plt.xticks(temp_df['date'][::20], rotation=90)\n    \nplt.tight_layout()\nplt.show()","990dae92":"df.head()","664a4f0e":"# all the countries present in dataset\ndf.country.unique()","f55a6b03":"# data for India\ndf_india = df[df['country'] == 'India']\n\ndf_india.head()","d057986a":"# shape of dataset\ndf_india.shape","ba8949d2":"# total null values in each column\ndf_india.isnull().sum()","6229b098":"# drop the null values\ndf_india = df_india.dropna()\ndf_india.isnull().sum()","0df783e1":"df_india.head(3)","0c260a61":"# data types of each column\ndf_india.dtypes","d8c5b5d3":"# changing to datetime\ndf_india.date = pd.to_datetime(df_india.date)\n\ndf_india.date.dtype","56647984":"# total vaccinations in India\ntotal = alt.Chart(df_india).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('total_vaccinations:Q', axis=alt.Axis(title=\"Total Vaccinations\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','total_vaccinations']),\n).properties(\n    title='Total Vaccinations Over Time in India',\n    width = 500,\n    height = 400\n)\n# people fully vaccinated\npeople_fully = alt.Chart(df_india).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('people_fully_vaccinated:Q', axis=alt.Axis(title=\"People Fully Vaccinated\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','people_fully_vaccinated']),\n).properties(\n    title='People Fully Vaccinated Over Time in India',\n    width = 500,\n    height = 400\n)\n# daily vaccinaitons\ndaily = alt.Chart(df_india).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('daily_vaccinations:Q', axis=alt.Axis(title=\"Daily Vaccinations\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','daily_vaccinations']),\n).properties(\n    title='Daily Vaccinations Over Time in India',\n    width = 500,\n    height = 400\n)\n\n# People Fully Vaccinated Per Hundred\nper_hundred = alt.Chart(df_india).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('people_fully_vaccinated_per_hundred:Q', axis=alt.Axis(title=\"People Fully Vaccinated Per Hundred\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','people_fully_vaccinated_per_hundred']),\n).properties(\n    title='People Fully Vaccinated per hundred in India',\n    width = 500,\n    height = 400\n)\n\nchart = total | people_fully\nchart &= daily | per_hundred\n\nchart","72fe8b21":"df_usa = df[df['country'] == 'United States']\n\ndf_usa.head()","4fc48ba6":"# handling missing values\ndf_usa.isnull().sum()","6fd7f740":"# dropping rows with missing values\ndf_usa = df_usa.dropna()\n\ndf_usa.isnull().sum()","577f16a8":"df_usa.date.dtype","9e01d48b":"# converting to datetime\ndf_usa.date = pd.to_datetime(df_usa.date)\n\ndf_usa.date.dtype","ff67c2b0":"df_usa.head(3)","fcbe9a41":"# total vaccinations in United States\ntotal = alt.Chart(df_usa).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('total_vaccinations:Q', axis=alt.Axis(title=\"Total Vaccinations\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','total_vaccinations']),\n).properties(\n    title='Total Vaccinations Over Time in United States',\n    width = 500,\n    height = 400\n)\n# people fully vaccinated\npeople_fully = alt.Chart(df_usa).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('people_fully_vaccinated:Q', axis=alt.Axis(title=\"People Fully Vaccinated\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','people_fully_vaccinated']),\n).properties(\n    title='People Fully Vaccinated Over Time in United States',\n    width = 500,\n    height = 400\n)\n# daily vaccinaitons\ndaily = alt.Chart(df_usa).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('daily_vaccinations:Q', axis=alt.Axis(title=\"Daily Vaccinations\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','daily_vaccinations']),\n).properties(\n    title='Daily Vaccinations Over Time in United States',\n    width = 500,\n    height = 400\n)\n\n# People Fully Vaccinated Per Hundred\nper_hundred = alt.Chart(df_usa).mark_line(size=3, point=True, fill='lightgrey').encode(\n    alt.X('date:T', axis=alt.Axis(title=\"Date\")),\n    alt.Y('people_fully_vaccinated_per_hundred:Q', axis=alt.Axis(title=\"People Fully Vaccinated Per Hundred\")),\n    alt.Color('vaccines:N', legend=alt.Legend(orient='right')),\n    alt.Tooltip(['date','people_fully_vaccinated_per_hundred']),\n).properties(\n    title='People Fully Vaccinated per hundred in United States',\n    width = 500,\n    height = 400\n)\n\nchart = total | people_fully\nchart &= daily | per_hundred\nchart","deb3e7fe":"df_usa","e2635ad1":"# total people vaccinated in usa\n# lets plot a pie plot\ndf_usa.iloc[-1]","992b4a4d":"df_usa.iloc[-1]['people_fully_vaccinated']","97ebee10":"# last value in dataset\nprint(f\"Data till date: {df_usa['date'][25303]}\")\n\npeople_fully_vaccinated = int(df_usa.iloc[-1]['people_fully_vaccinated'])\nremaining_pop_1 = 328000000-people_fully_vaccinated\nprint(f\"people_fully_vaccinated: {people_fully_vaccinated}, \\\n        Remaining Population: {remaining_pop_1}\")\n\npeople_vaccinated = int(df_usa.iloc[-1]['people_vaccinated'])\nremaining_pop_2 = 328000000-people_vaccinated\nprint(f\"people vaccinated: {people_vaccinated}, \\\n        Remaining Population: {remaining_pop_2}\")\n\nprint(f\"Populatoin of USA (approx): {328000000}\")","33c1c0d3":"fig = plt.figure(figsize=(18, 10))\n\n# first pie chart\nfig.add_subplot(1,2,1)\n# data\nx = [people_vaccinated,remaining_pop_2]\n# labels\nlabels = ['People Vaccinated (USA)', 'People yet to be vaccinated']\nexplode = (0.1, 0)\nplt.pie(x, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True, startangle=50)\nplt.title('People Vaccinated in USA (completely or partially)')\n\n# second pie chart\nfig.add_subplot(1,2,2)\n# data\nx = [people_fully_vaccinated,remaining_pop_1]\n# labels\nlabels = ['People Fully Vaccinated (USA)', 'People not vaccinated fully']\nexplode = (0.1, 0)\nplt.pie(x, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True, startangle=50)\nplt.title('People Fully Vaccinated in USA')\n\nplt.show()","b25f742d":"# Data on United States","a4c3997c":"First notice that `altair` is more interactive (*try hovering your mouse pointer over the chart*) and is better looking when compared to `matplotlib`. We will be using altair in our next visualizations.\n\n> From the figure above, we can clearly see that `Pfizer\/BioNTech` is the most used vaccine followed by `Moderna`.","e8dba5ef":"We need to change the data-type of date column from object to datetime.","2893896e":"We can see that this dataset does not have any missing information.","dc5ee2b7":"### Vaccines used of each manufacturer:","860d12d4":"Let's first take a look at the vaccination manufacturer dataset:","915a0d0d":"### Vaccines used in United States:","0c3ebef9":"# Data on India","40bfa2ff":"Plotting the vaccine used of each manufacturer in different countries using Matplotlib:","490d8537":"Now let's plot the same graph using Altair:","fe4d73f5":"### Vaccination done in different countries:","09f8cae6":"## Vaccine Manufacturer Dataset\n\nFirst let's explore and visualize the `vaccine manufacturer dataset`."}}