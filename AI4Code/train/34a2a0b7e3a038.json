{"cell_type":{"36bd3772":"code","029c59ad":"code","e3ec1b38":"code","fd1447e0":"code","6e0c070e":"code","85207c47":"code","60d53413":"code","d943a922":"code","698fa1da":"code","eb84903a":"code","a5c22006":"code","cd2960ac":"code","c8ad4c8a":"code","17e86f36":"code","82386647":"code","66d3e363":"code","7898d128":"code","f012322b":"code","0575caf5":"code","5c7d3f73":"code","e2048bf7":"code","a6eca203":"code","2c3544d4":"code","0eeb4c79":"code","66638983":"code","ffd16baf":"code","a10555b1":"code","a572e37b":"code","7bacd301":"code","8924e1d3":"code","b349ebff":"code","a6473656":"code","a5955055":"code","d78483df":"code","35efe10e":"code","e152c275":"code","325a1cc7":"code","c83d026b":"code","08fb959e":"code","2770f990":"code","30e2f098":"code","969bc6fd":"code","11439bd6":"code","b0ec288e":"code","c555990a":"code","d0440a6b":"code","149b23ac":"code","fa54a8da":"code","e922edae":"code","35a1059a":"code","5f609695":"code","1bde2214":"code","ece0bcce":"code","4b52db92":"code","ca8d7b46":"code","0f2bdf4a":"code","95c775b4":"code","45d8d340":"code","bffd7fa8":"code","ee8fb3a8":"code","c018769f":"code","c2b37cba":"code","eff4b627":"code","a4fcdc8e":"code","737f3849":"code","76f2bdcf":"code","b3c11aa6":"code","3911d59a":"code","b6cac463":"code","48b3911d":"code","2808d923":"code","ee6c45d6":"code","b1c0dfa9":"code","06b11ac6":"code","6c55853e":"code","b692ccd6":"code","b16213a0":"code","72095463":"markdown","679fc094":"markdown","d52f583e":"markdown","01d52119":"markdown","72e65e6a":"markdown","3f587714":"markdown","2ece1740":"markdown","5fe47630":"markdown","761c6c8f":"markdown"},"source":{"36bd3772":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","029c59ad":"\nimport requests\nimport re\nimport pandas as pd\nfrom bs4 import BeautifulSoup\nfrom time import sleep\nfrom selenium import webdriver\nimport numpy as np ","e3ec1b38":"driver = webdriver.Chrome('chromedriver\/chromedriver')\n#request url \ndriver.get('https:\/\/www.goalzz.com\/?region=-7&team=144')\n# give it some time\nsleep(5)\n# retrive , download html page \nhtml = driver.page_source\n# close \ndriver.close()","fd1447e0":"len(html) ","6e0c070e":"soup = BeautifulSoup(html,'lxml')","85207c47":"date = soup.find_all('div',attrs={'class':'matchDate'})","60d53413":"match_dates = []","d943a922":"for i in date:\n    match_dates.append(i.text)","698fa1da":"match_dates","eb84903a":"df = pd.DataFrame()","a5c22006":"df['date'] = match_dates","cd2960ac":"df","c8ad4c8a":"teams = soup.find_all('a',attrs={'class':'tl'})","17e86f36":"27 * 2","82386647":"teamss = []","66d3e363":"for i in teams:\n    teamss.append(i.text)","7898d128":"teamss.insert(2719,'Y20')","f012322b":"home_teams = []\naway_teams = []","0575caf5":"for i in range(0,len(teamss)):\n    if i%2:\n         away_teams.append(teamss[i])\n    else:\n         home_teams.append(teamss[i])\n     ","5c7d3f73":"len(home_teams) , len(away_teams)","e2048bf7":"score = soup.find_all('td',attrs={'class':'sc'})","a6eca203":"scores = []","2c3544d4":"for i in score: \n    scores.append(i.text)","0eeb4c79":"scores","66638983":"sc = pd.DataFrame()","ffd16baf":"sc['scores'] = scores","a10555b1":"sc","a572e37b":"sc.index","7bacd301":"sc.loc[0][0]","8924e1d3":"w = []\nu = []","b349ebff":"len(sc.loc[5][0])","a6473656":"for i in range(0,1426):\n    if len(sc.loc[i][0]) == 10 :\n        u.append(sc.loc[i][0])\n    else:\n        w.append(sc.loc[i][0])\n        \n    ","a5955055":"w.insert(1387,'0 : 0')","d78483df":"df['home_team'] = home_teams","35efe10e":"df['away_team'] = away_teams","e152c275":"df","325a1cc7":"df['scores'] = w","c83d026b":"df","08fb959e":"df.loc[0][1]","2770f990":"win_team = []","30e2f098":"for i in range(0,1386):\n    if df.loc[i][3][0] > df.loc[i][3][4]:\n        win_team.append(df.loc[i][1])\n    elif df.loc[i][3][0] < df.loc[i][3][4]:\n        win_team.append(df.loc[i][2])\n    else :\n        win_team.append('draw')","969bc6fd":"win_team.insert(1387,0)","11439bd6":"df['waining_team'] = win_team","b0ec288e":"df","c555990a":"driver = webdriver.Chrome('chromedriver\/chromedriver')\n#request url \ndriver.get('https:\/\/www.goalzz.com\/?region=-7&team=144')\nxx = []\nfor i in range(0,1386): \n       xx.append(driver.find_elements_by_xpath(f'\/\/*[@id=\"matchesTable\"]\/tr[{i}]\/td[1]\/font\/a'))","d0440a6b":"comp = []","149b23ac":"for i in xx[1:] : \n       comp.append(i[0].text)\n    ","fa54a8da":"comp","e922edae":"df = df[df['date'] != 'N\/A']","35a1059a":"df['competiton'] = comp","5f609695":"df","1bde2214":"df = df.rename(columns={'waining_team' : 'wining_team'})","ece0bcce":"df = df[['home_team' , 'scores' , 'away_team' , 'date' , 'wining_team' , 'competiton']]","4b52db92":"df","ca8d7b46":"stage = soup.find_all('td',attrs={'id':'jm10x5'})","0f2bdf4a":"st = []","95c775b4":"for i in range (1,1387) : \n    stage = soup.find_all('td',attrs={'id':'jm{}x5'.format(i)})\n    st.append(stage[0].text)","45d8d340":"st","bffd7fa8":"df['stage'] = st[:1363]","ee8fb3a8":"df","c018769f":"dff = df ","c2b37cba":"dff.stage[dff['stage'] == ''] = np.nan","eff4b627":"dff.isnull().sum()","a4fcdc8e":"dff","737f3849":"year = [] ","76f2bdcf":"dff.loc[0][3][:4]","b3c11aa6":"for i in range (0,1362) : \n      if len(dff.loc[i][3]) <= 4 : \n            dff.loc[i][3] = '{}\/1\/1'.format(dff.loc[i][3])","3911d59a":"dff","b6cac463":"dff['date'] = pd.to_datetime(dff['date'])","48b3911d":"dff","2808d923":"dff['home_team'] = dff['home_team'].str.replace(' ','_')","ee6c45d6":"dff['home_team']","b1c0dfa9":"dff['away_team'] = dff['away_team'].str.replace('-','')","06b11ac6":"dff['away_team'] = dff['away_team'].str.replace(' ','_')","6c55853e":"dff","b692ccd6":"dff.to_csv('Al_Hilal Scores Archive.csv')","b16213a0":"dff.info()","72095463":" ## extracting the stage of the match with a for loop","679fc094":"## extracting the competition of the match ","d52f583e":"## Libraries upload ","01d52119":"## cleaning \n","72e65e6a":"## extracting teams ","3f587714":"## Getting HTML ","2ece1740":"## for loop to determine the wining team and losing team ","5fe47630":"## the start of screaping starting match dates ","761c6c8f":"## extracting results of the matches "}}