{"cell_type":{"352af4c6":"code","4087f129":"code","134bf5a5":"code","5337c741":"code","51a59b46":"code","d481a854":"code","683d2ef9":"code","31f59297":"code","9dc82037":"code","6c99dd16":"code","095c2a76":"code","4fbc9db5":"code","eafe3a6c":"code","17707249":"code","8608ec72":"code","19f794bb":"code","5744da53":"code","1e8dde6d":"code","46a8cfed":"code","62480c87":"code","193dc657":"code","58fa9359":"code","10a85f60":"code","e34bdfe6":"code","035ea1c2":"code","7b1d314f":"code","b75a6360":"code","4c9b1ff7":"code","f40d7725":"code","5ca330d4":"code","0b7382ee":"code","6b66231f":"code","1575acbf":"code","e0211b2d":"code","8ef4e3a8":"code","17a84847":"code","dce4f68a":"code","036d3ed9":"code","992c9d00":"code","cbeedf0a":"code","85265f00":"code","1de5cae9":"markdown","438e469b":"markdown","df01fdb2":"markdown","6c782b37":"markdown","914f2c2b":"markdown","2573f347":"markdown","5f833dc3":"markdown","f10d2d07":"markdown","d1c0ee74":"markdown","5dbdbc90":"markdown","b89c180b":"markdown","cfda753c":"markdown","02982d5d":"markdown","743b2604":"markdown","8551fc90":"markdown","7e4ed17e":"markdown","51bc2377":"markdown","8b0c810a":"markdown","0bd9aa6a":"markdown","9d290d1e":"markdown","a150884f":"markdown","9abc6d6d":"markdown","1f69124e":"markdown","462afab9":"markdown","bc6b8eab":"markdown","e6f68c0e":"markdown","dc7bafca":"markdown","58221c59":"markdown","821fb473":"markdown","c3c296d4":"markdown","44c70895":"markdown","8f0dc188":"markdown","1c97b8b5":"markdown","cab53418":"markdown","b2d5e741":"markdown","3f6d6a23":"markdown","551a9c45":"markdown","8b9a3048":"markdown","43fd5578":"markdown","1955d8f7":"markdown","a0f4ff88":"markdown","25ae7e35":"markdown","3f70e26e":"markdown","dda2b5a0":"markdown","b6b35647":"markdown","24119e84":"markdown","ecc34a09":"markdown"},"source":{"352af4c6":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","4087f129":"df=pd.read_csv('..\/input\/world-happiness\/2019.csv')\ndf.head()\noriginal=df.copy()\ndef highlight_max(s):    \n    is_max = s == s.max()\n    return ['background-color: limegreen' if v else '' for v in is_max]\n \ndf.style.apply(highlight_max, subset=['Score','GDP per capita','Social support','Healthy life expectancy','Freedom to make life choices','Generosity','Perceptions of corruption'])","134bf5a5":"df.shape","5337c741":"corrmat = df.corr()\nf, ax = plt.subplots()\nsns.heatmap(corrmat, square=True)","51a59b46":"sns.pairplot(df)","d481a854":"\nfig, axes = plt.subplots(nrows=2, ncols=2,constrained_layout=True,figsize=(12,8))\n\nsns.barplot(x='GDP per capita',y='Country or region',data=df.nlargest(10,'GDP per capita'),ax=axes[0,0],palette=\"Blues_d\")\n\nsns.barplot(x='Social support' ,y='Country or region',data=df.nlargest(10,'Social support'),ax=axes[0,1],palette=\"YlGn\")\n\nsns.barplot(x='Healthy life expectancy' ,y='Country or region',data=df.nlargest(10,'Healthy life expectancy'),ax=axes[1,0],palette='OrRd')\n\nsns.barplot(x='Freedom to make life choices' ,y='Country or region',data=df.nlargest(10,'Freedom to make life choices'),ax=axes[1,1],palette='YlOrBr')","683d2ef9":"fig, axes = plt.subplots(nrows=1, ncols=2,constrained_layout=True,figsize=(10,4))\n\nsns.barplot(x='Generosity' ,y='Country or region',data=df.nlargest(10,'Generosity'),ax=axes[0],palette='Spectral')\nsns.barplot(x='Perceptions of corruption' ,y='Country or region',data=df.nlargest(10,'Perceptions of corruption'),ax=axes[1],palette='RdYlGn')","31f59297":"print('max:',df['Score'].max())\nprint('min:',df['Score'].min())\nadd=df['Score'].max()-df['Score'].min()\ngrp=round(add\/3,3)\nprint('range difference:',(grp))","9dc82037":"low=df['Score'].min()+grp\nmid=low+grp\n\nprint('upper bound of Low grp',low)\nprint('upper bound of Mid grp',mid)\nprint('upper bound of High grp','max:',df['Score'].max())","6c99dd16":"df.info()","095c2a76":"cat=[]\nfor i in df.Score:\n    if(i>0 and i<low):\n        cat.append('Low')\n        \n        \n    elif(i>low and i<mid):\n         cat.append('Mid')\n    else:\n         cat.append('High')\n\ndf['Category']=cat  ","4fbc9db5":"\ncolor = (df.Category == 'High' ).map({True: 'background-color: limegreen',False:'background-color: red'})\ndf.style.apply(lambda s: color)\n\n\n","eafe3a6c":"df.loc[df['Country or region']=='India']\n","17707249":"df.loc[df['Country or region']=='United States']","8608ec72":"df.loc[df['Country or region']=='United Kingdom']","19f794bb":"\ndf.loc[df['Country or region']=='Canada']","5744da53":"d= df[(df['Country or region'].isin(['India','Canada','United Kingdom', 'United States']))]\nd","1e8dde6d":"\nax = d.plot(y=\"Social support\", x=\"Country or region\", kind=\"bar\",color='C3')\nd.plot(y=\"GDP per capita\", x=\"Country or region\", kind=\"bar\", ax=ax, color=\"C1\")\nd.plot(y=\"Healthy life expectancy\", x=\"Country or region\", kind=\"bar\", ax=ax, color=\"C2\")\n\nplt.show()\n","46a8cfed":"ax = d.plot(y=\"Freedom to make life choices\", x=\"Country or region\", kind=\"bar\",color='C3')\nd.plot(y=\"Generosity\", x=\"Country or region\", kind=\"bar\", ax=ax, color=\"C1\",)\nd.plot(y=\"Perceptions of corruption\", x=\"Country or region\", kind=\"bar\", ax=ax, color=\"C2\",)\n\nplt.show()","62480c87":"import plotly.graph_objs as go\nfrom plotly.offline import iplot\n\ndata = dict(type = 'choropleth', \n           locations = df['Country or region'],\n           locationmode = 'country names',\n           colorscale='RdYlGn',\n           z = df['Score'], \n           text = df['Country or region'],\n           colorbar = {'title':'Happiness Score'})\n\nlayout = dict(title = 'Geographical Visualization of Happiness Score', \n              geo = dict(showframe = True, projection = {'type': 'azimuthal equal area'}))\n\nchoromap3 = go.Figure(data = [data], layout=layout)\niplot(choromap3)","193dc657":"df15=pd.read_csv('..\/input\/world-happiness\/2015.csv')\ndf16=pd.read_csv('..\/input\/world-happiness\/2016.csv')\ndf17=pd.read_csv('..\/input\/world-happiness\/2017.csv')\ndf18=pd.read_csv('..\/input\/world-happiness\/2018.csv')","58fa9359":"df15.head(2)","10a85f60":"df16.head(2)","e34bdfe6":"df17.head(2)","035ea1c2":"df18.head(2)","7b1d314f":"plt.figure(figsize=(10,5))\nsns.kdeplot(df15['Health (Life Expectancy)'],color='red')\nsns.kdeplot(df16['Health (Life Expectancy)'],color='blue')\nsns.kdeplot(df17['Health..Life.Expectancy.'],color='limegreen')\nsns.kdeplot(df18['Healthy life expectancy'],color='orange')\nsns.kdeplot(df['Healthy life expectancy'],color='pink')\nplt.title('Health over the Years',size=20)\nplt.show()","b75a6360":"plt.figure(figsize=(10,5))\nsns.kdeplot(df15['Economy (GDP per Capita)'],color='red')\nsns.kdeplot(df16['Economy (GDP per Capita)'],color='blue')\nsns.kdeplot(df17['Economy..GDP.per.Capita.'],color='limegreen')\nsns.kdeplot(df18['GDP per capita'],color='orange')\nsns.kdeplot(df['GDP per capita'],color='pink')\nplt.title('Economy over the Years',size=20)\nplt.show()","4c9b1ff7":"plt.figure(figsize=(10,5))\nsns.kdeplot(df15['Family'],color='red')\nsns.kdeplot(df16['Family'],color='blue')\nsns.kdeplot(df17['Family'],color='limegreen')\nsns.kdeplot(df18['Social support'],color='orange')\nsns.kdeplot(df['Social support'],color='pink')\nplt.title('Family over the Years',size=20)\nplt.show()","f40d7725":"fig = plt.figure(figsize=(10,10))\n\nplt.subplot(2, 2, 1)\ndf15[\"Trust (Government Corruption)\"].plot(kind='line', color='blue',label='Trust',linewidth=1,grid=True,linestyle=\"-\")\ndf15[\"Freedom\"].plot(kind=\"line\", color=\"red\", label=\"Freedom\", linewidth=0.5,grid=True,linestyle=\"-\")\nplt.xlabel('Trust (Government Corruption)')\nplt.ylabel('Freedom')\nplt.title('2015')\nplt.legend(loc='upper right')\nplt.show()\n\nfig = plt.figure(figsize=(10,10))\nplt.subplot(2, 2, 2)\ndf16[\"Trust (Government Corruption)\"].plot(kind='line', color='orange',label='Trust',linewidth=1,grid=True,linestyle=\"-\")\ndf16[\"Freedom\"].plot(kind=\"line\", color=\"green\", label=\"Freedom\", linewidth=0.5,grid=True,linestyle=\"-\")\nplt.xlabel('Trust (Government Corruption)')\nplt.ylabel('Freedom')\nplt.title('2016')\nplt.legend(loc='upper right')\nplt.show()\n\nfig = plt.figure(figsize=(10,10))\nplt.subplot(2, 2, 3)\ndf17[\"Trust..Government.Corruption.\"].plot(kind='line', color='purple',label='Trust',linewidth=1,grid=True,linestyle=\"-\")\ndf17[\"Freedom\"].plot(kind=\"line\", color=\"coral\", label=\"Freedom\", linewidth=0.5,grid=True,linestyle=\"-\")\nplt.xlabel('Trust..Government.Corruption.')\nplt.ylabel('Freedom')\nplt.title('2017')\nplt.legend(loc='upper right')\nplt.show()\n\nfig = plt.figure(figsize=(10,10))\nplt.subplot(2, 2, 4)\ndf18[\"Perceptions of corruption\"].plot(kind='line', color='gold',label='Trust',linewidth=0.5,grid=True,linestyle=\"-\")\ndf18[\"Freedom to make life choices\"].plot(kind=\"line\", color=\"limegreen\", label=\"Freedom\", linewidth=0.5,grid=True,linestyle=\"-\")\nplt.xlabel('Perceptions of corruption')\nplt.ylabel('Freedom')\nplt.title('2018')\nplt.legend(loc='upper right')\nplt.show()\n","5ca330d4":"df18['Year']='2018'\ndf['Year']='2019'\ndf15['Year']='2015'\ndf16['Year']='2016'\ndf17['Year']='2017'","0b7382ee":"df.rename(columns={'Country or region':'Country'},inplace=True)\ndata1=df.filter(['Country','GDP per capita','Year'],axis=1)\n\ndf15.rename(columns={'Economy (GDP per Capita)':'GDP per capita'},inplace=True)\ndata2=df15.filter(['Country','GDP per capita',\"Year\"],axis=1)\n\ndf16.rename(columns={'Economy (GDP per Capita)':'GDP per capita'},inplace=True)\ndata3=df16.filter(['Country','GDP per capita',\"Year\"],axis=1)\n\ndf17.rename(columns={'Economy..GDP.per.Capita.':'GDP per capita'},inplace=True)\ndata4=df17.filter(['Country','GDP per capita','Year'],axis=1)\n\ndf18.rename(columns={'Country or region':'Country'},inplace=True)\ndata5=df18.filter(['Country','GDP per capita',\"Year\"],axis=1)\n\ndata2=data2.append([data3,data4,data5,data1])","6b66231f":"plt.figure(figsize=(10,8))\ndf = data2[data2['Country']=='India']\nsns.lineplot(x=\"Year\", y=\"GDP per capita\",data=df,label='India')\n\ndf = data2[data2['Country']=='United States']\nsns.lineplot(x=\"Year\", y=\"GDP per capita\",data=df,label='US')\n\ndf = data2[data2['Country']=='Finland']\nsns.lineplot(x=\"Year\", y=\"GDP per capita\",data=df,label='Finland')\n\ndf = data2[data2['Country']=='United Kingdom']\nsns.lineplot(x=\"Year\", y=\"GDP per capita\",data=df,label=\"UK\")\n\ndf = data2[data2['Country']=='Canada']\nsns.lineplot(x=\"Year\", y=\"GDP per capita\",data=df,label='Canada')\n\nplt.title(\"GDP per capita 2015-2019\")","1575acbf":"plt.figure(figsize=(10, 10))\nh=pd.pivot_table(data2,values='GDP per capita',\nindex=['Country'],\ncolumns='Year')\nh=h.head(10)\nsns.heatmap(h,cmap=\"RdBu\")","e0211b2d":"original=original.drop(['Country or region','Overall rank'],axis=1)","8ef4e3a8":"\nfrom sklearn.preprocessing import normalize\ndata_scaled = normalize(original)\ndata_scaled = pd.DataFrame(data_scaled, columns=original.columns)\ndatasc=data_scaled.copy()\ndata_scaled.head()","17a84847":"\nimport scipy.cluster.hierarchy as shc\nplt.figure(figsize=(10, 8))  \nplt.title(\"Dendrograms\")  \ndend = shc.dendrogram(shc.linkage(data_scaled, method='ward'))","dce4f68a":"plt.figure(figsize=(10, 7))  \nplt.title(\"Dendrograms\")  \ndend = shc.dendrogram(shc.linkage(data_scaled, method='ward'))\nplt.axhline(y=0.5, color='r', linestyle='--')","036d3ed9":"from sklearn.cluster import AgglomerativeClustering\ncluster = AgglomerativeClustering(n_clusters=2, affinity='euclidean', linkage='ward')  \ncluster.fit_predict(data_scaled)","992c9d00":"plt.figure(figsize=(6, 5))  \nplt.scatter(data_scaled['GDP per capita'], data_scaled['Perceptions of corruption'], c=cluster.labels_) \nplt.xlabel('GDP per Capita')\nplt.ylabel('Perceptions of Corruption')\nplt.colorbar()","cbeedf0a":"X = datasc[[\"Social support\",\"Healthy life expectancy\"]]\nplt.scatter(X[\"Social support\"],X[\"Healthy life expectancy\"],c='pink')\nplt.show()","85265f00":"from sklearn.cluster import KMeans\n\nkmeans = KMeans(n_clusters=3).fit(X)\ncentroids = kmeans.cluster_centers_\nprint(centroids)\n\nplt.scatter(X['Social support'], X['Healthy life expectancy'], c= kmeans.labels_.astype(float), alpha=0.5)\nplt.scatter(centroids[:, 0], centroids[:, 1], c='red')\nplt.show()","1de5cae9":"**The rankings of national happiness are based on a Cantril ladder survey. Nationally representative samples of respondents are asked to think of a ladder, with the best possible life for them being a 10, and the worst possible life being a 0. They are then asked to rate their own current lives on that 0 to 10 scale. The report correlates the results with various life factors.\nIn the reports, experts in fields including economics, psychology, survey analysis, and national statistics, describe how measurements of well-being can be used effectively to assess the progress of nations, and other topics. Each report is organized by chapters that delve deeper into issues relating to happiness, including mental illness, the objective benefits of happiness, the importance of ethics, policy implications, and links with the Organisation for Economic Co-operation and Development's (OECD) approach to measuring subjective well-being and other international and national efforts.**","438e469b":"**Now on performing K MEANS CLUSTERING with 3 clusters**","df01fdb2":"**Woahhh India is pretty loww on the list, i thought it would make the Mid category but sadly it belongs to the low Category!Now we shall check out Canada,UK and USA**","6c782b37":"**Appending multiple dataframes for extracting more information.Thus we will be selecting some attributes from ecery dataset and also changing their column names and making them similar to ease out the appending part**","914f2c2b":"**Now since I am from India I would like to see my countries position on the list and also checkout some other countries where people from India usually settle  for economic benifits!So lets check them out**","2573f347":"# **K MEANS CLUSTERING**","5f833dc3":"**So here we can clearly see three well defined clusters with their centroids**","f10d2d07":"# World Happiness Report!\ud83d\ude0a","d1c0ee74":"**Social Support vs GDP per capita vs Healthy life expectancy**","5dbdbc90":"**Geographic Visualization of Happiness Score**","b89c180b":"* **0-belongs to cluster number 1**\n* **1-belongs to cluster number 2**","cfda753c":"**We have two clusters as this line cuts the dendrogram at two points. Let\u2019s now apply hierarchical clustering for 2 clusters**","02982d5d":"**Top 10 countries for each attribute.**","743b2604":"# **HISTORY**[](https:\/\/en.wikipedia.org\/wiki\/World_Happiness_Report)","8551fc90":"**Plotting pairwise relationships in the dataset.**","7e4ed17e":"# **MEANING OF TERMS USED IN THE DATASET**","51bc2377":"**Next in line is the relationship between Freedom and Corruption prevalent in the government.**\n**Corruption is an enormous obstacle to the realization of all human rights \u2013 civil, political, economic, social and cultural, as well as the right to development. Corruption violates the core human rights principles of transparency, accountability, non-discrimination and meaningful participation in every aspect of the life of the community.[src](https:\/\/www.u4.no\/topics\/human-rights\/basics)**","8b0c810a":"**Highlighting the maixmum values of each attribute in the data set**","0bd9aa6a":"The x-axis contains the samples and y-axis represents the distance between these samples.","9d290d1e":"**Finally adding a new column Category to the dataset and distributing the levels High,Low,Mid.**","a150884f":"**Finding out attributes which are highly correlated to each other through heatmap.**","9abc6d6d":"**Now I want to give a category to each country as High,Mid and Low according to their happiness scores.Thus we have to find out the bound in which these categories shall lie in.**","1f69124e":"**So all of them belong to the HIGH category and apparently Canada is pretty high upand has a great happiness score.No wonder people are flocking to these countries.**","462afab9":"**Importing Important Libraries.**","bc6b8eab":"**But before applying Hierarchical Clustering, we have to normalize the data so that the scale of each variable is the same. Why is this important? Well, if the scale of the variables is not the same, the model might become biased towards the variables with a higher magnitude**","e6f68c0e":"* **GDP per capita**:GDP per capita is a measure of a country's economic output that accounts for its number of people.\t\n* **Social support**:Social support means having friends and other people, including family, to turn to in times of need or crisis to give you a broader focus and positive self-image. Social support enhances quality of life and provides a buffer against adverse life events.\n* **Healthy life expectancy**:Healthy Life Expectancy is the average number of years that a newborn can expect to live in \"full health\"\u2014in other words, not hampered by disabling illnesses or injuries.\n* **Freedom to make life choices**:Freedom of choice describes an individual's opportunity and autonomy to perform an action selected from at least two available options, unconstrained by external parties.\n* **Generosity**:the quality of being kind and generous.\n* **Perceptions of corruption**:The Corruption Perceptions Index (CPI) is an index published annually by Transparency International since 1995 which ranks countries \"by their perceived levels of public sector corruption, as determined by expert assessments and opinion surveys.\n\n[src](http:\/\/google.com)","dc7bafca":"**Freedom to make life choices vs Generosity vs Corruption**","58221c59":"**k-means is one of the simplest unsupervised learning algorithms that solve the well known clustering problem. The procedure follows a simple and easy way to classify a given data set through a certain number of clusters (assume k clusters) fixed apriori. The main idea is to define k centers, one for each cluster.**","821fb473":"![](https:\/\/media.giphy.com\/media\/11sBLVxNs7v6WA\/giphy.gif)","c3c296d4":"**Heatmap for first 10 countries(alphabetical order) and their GDP per capita over the years**","44c70895":"**Let\u2019s draw the dendrogram(A dendrogram is a tree-like diagram that records the sequences of merges or splits)to help us decide the number of clusters for the problem**","8f0dc188":"# **METHODS AND PHILOSOPHY**","1c97b8b5":"**Adding new attribute Year**","cab53418":"**Checking out previous happiness reports to see changes in attribute distribution**","b2d5e741":"There are multiple Attributes or practices in this case on which the happiness score depends on \u2013 GDP,Family,Health,Corruption etc. Our aim is to make clusters from this data that can segment similar countries together. We will use Hierarchical Clustering for this problem.","3f6d6a23":"**From this graph we can observe the following:-**\n* Indias economy was at its peak in 2017, dropped in 2018 and was recovering in 2019\n* US has the highest economy\n* UKs economy dipped quite a bit in 2018\n* Finland and UK had similar economy ranges in the year 2016-2017","551a9c45":"Let\u2019s pick these two variables and visualize the data points","8b9a3048":"We have a new dataframe with info of 2015-2019 GDP per capita of every country","43fd5578":"**Checking out the shape of our dataset!**","1955d8f7":"**Lets consider Economy(monetary),Social Support(family) and Health as primary concerns for an individual residing in a country i.e overall wellbeing.Lets see how these distributions are altering over the years or are staying stagnant.**","a0f4ff88":"**Checking out GDP per capita of INDIA,USA,UK,CANADA,FINLAND from 2015-19**","25ae7e35":"# **HIERARCHICAL CLUSTERING(with 2019)**","3f70e26e":"**Lets have a head to head comparison for the above mentioned four countries to understand why they have such a good or a band rank worldwide and get some insight**","dda2b5a0":"In July 2011, the UN General Assembly adopted resolution 65\/309 Happiness: Towards a Holistic Definition of Development inviting member countries to measure the happiness of their people and to use the data to help guide public policy. On April 2, 2012, this was followed by the first UN High Level Meeting called Wellbeing and Happiness: Defining a New Economic Paradigm, which was chaired by UN Secretary General Ban Ki-moon and Prime Minister Jigme Thinley of Bhutan, a nation that adopted gross national happiness instead of gross domestic product as their main development indicator.\n\nThe first World Happiness Report was released on April 1, 2012 as a foundational text for the UN High Level Meeting: Well-being and Happiness: Defining a New Economic Paradigm, drawing international attention. The report outlined the state of world happiness, causes of happiness and misery, and policy implications highlighted by case studies. In 2013, the second World Happiness Report was issued, and since then has been issued on an annual basis with the exception of 2014. The report primarily uses data from the Gallup World Poll. Each annual report is available to the public to download on the World Happiness Report website","b6b35647":"**Also we will be styling the dataset as a green zone and red zone .If the country belongs to the High category then it is under the green zone and if it is under the Mid or Low category it is goinf to be the red zone**","24119e84":"**So here we can clearly see two well defined clusters**","ecc34a09":"**Hierarchical clustering, also known as hierarchical cluster analysis, is an algorithm that groups similar objects into groups called clusters. The endpoint is a set of clusters, where each cluster is distinct from each other cluster, and the objects within each cluster are broadly similar to each other.**[src](https:\/\/www.analyticsvidhya.com\/blog\/2019\/05\/beginners-guide-hierarchical-clustering\/)"}}