{"cell_type":{"05bd1c59":"code","1cc9fd19":"code","871fc2ab":"code","7a7e7de9":"code","46b93db4":"code","4e77d7ec":"code","8e6c88ba":"code","f1466701":"code","24979a36":"code","4102a879":"code","fa76b5fc":"code","0448a89c":"code","57212a2b":"code","a1fb77dc":"code","07366fd9":"code","bedb2a46":"code","657ce3b3":"code","c3122757":"code","c5015cd0":"code","2b35f2e6":"code","84d82681":"code","27d39740":"code","1b7a2e56":"code","1d93b062":"code","e784d0e5":"code","5aa2b37f":"markdown","f2bfccc4":"markdown","dd64f5a5":"markdown","e3dd8126":"markdown","bd14880b":"markdown","334df46d":"markdown","3698952f":"markdown","aa844ca8":"markdown","7ca9c296":"markdown","d67da227":"markdown","a77f9667":"markdown","89ef1b3c":"markdown","0b1a7d01":"markdown","ec99baa6":"markdown","835bdb2a":"markdown","88cec541":"markdown","6347fd31":"markdown","373b1e00":"markdown","0bac6674":"markdown","4b3e39cb":"markdown"},"source":{"05bd1c59":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport sqlite3, datetime\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport seaborn as sns\n\n# Any results you write to the current directory are saved as output.","1cc9fd19":"con = sqlite3.connect('..\/input\/database.sqlite')\n\nartists = pd.read_sql('SELECT * FROM artists', con)\ncontent = pd.read_sql('SELECT * FROM content', con)\ngenres = pd.read_sql('SELECT * FROM genres', con)\nlabels = pd.read_sql('SELECT * FROM labels', con)\nyears = pd.read_sql('SELECT * FROM years', con)\nreviews = pd.read_sql('SELECT * FROM reviews', con)\n\ncon.close()","871fc2ab":"df1 = pd.merge(genres,reviews,on='reviewid')\ndf2 = pd.merge(labels,df1,on='reviewid')\ndf3 = pd.merge(content,df2,on='reviewid')\ndf_final = pd.merge(years,df3,on='reviewid')\ndf_final.head()","7a7e7de9":"# Get rid of what we don't need right now\ndf_final.drop(['url','author_type','pub_date','pub_weekday','pub_day','pub_month'],axis=1,inplace=True)\ndf_final.dropna(inplace=True)\ndf_final['year'] = df_final['year'].astype(int)\ndf_final['pub_year'] = df_final['pub_year'].astype(int)\ndf_final.head()","46b93db4":"df_final.drop_duplicates('reviewid',inplace=True)","4e77d7ec":"df_final.shape","8e6c88ba":"df_final['genre'].value_counts() # 9 different genres, with an overwhelmingly large number of rock reviews","f1466701":"df_final.groupby('genre')['score'].mean().plot(kind='bar',rot=45,color='b',alpha=0.75,\\\n                                                figsize=(10,8),fontsize=14);\nplt.xlabel('Genre',fontsize=16)\nplt.ylabel('Mean score',fontsize=16);","24979a36":"# Do overall score trends change over the years?\ndf_final.groupby('year')['score'].mean().plot(color='b',alpha=0.75,figsize=(10,8))\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Mean score',fontsize=16);","4102a879":"# Do overall score trends change by genre over the years?\ndf_final[df_final['genre']=='rock'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='b',alpha=0.75, label='Rock')\ndf_final[df_final['genre']=='electronic'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='r',alpha=0.75, label='Electronic')\ndf_final[df_final['genre']=='folk\/country'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='g',alpha=0.75, label='Folk\/Country')\ndf_final[df_final['genre']=='pop\/r&b'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='y',alpha=0.75, label='Pop\/RnB')\ndf_final[df_final['genre']=='jazz'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='c',alpha=0.75, label='Jazz')\ndf_final[df_final['genre']=='rap'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='m',alpha=0.75, label='Rap')\ndf_final[df_final['genre']=='experimental'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='k',alpha=0.75, label='Experimental')\ndf_final[df_final['genre']=='metal'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='gold',alpha=0.75, label='Metal')\ndf_final[df_final['genre']=='global'].groupby(['year'])['score'].mean()\\\n.plot(figsize=(15,10),color='plum',alpha=0.75, label='Global')\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Mean score',fontsize=16);\nplt.legend(fontsize=16);","fa76b5fc":"plt.figure(figsize=(12,10))\ndf_final.boxplot(column='score',by='genre',figsize=(12,10))\nplt.xlabel('Genre', fontsize=16)\nplt.suptitle('')\nplt.title('Score');","0448a89c":"df_high = df_final[df_final['score']>9]\ndf_low = df_final[df_final['score']<5]\ndf_high['genre'].value_counts()","57212a2b":"df_low['genre'].value_counts()","a1fb77dc":"df_final[df_final['score']<3]['genre'].value_counts()","07366fd9":"df_final[df_final['score']==10.0]['genre'].value_counts()","bedb2a46":"A = df_final.groupby('genre').size()\nB = df_final[df_final['score']<5].groupby('genre').size()\nC = df_final[df_final['score']>9].groupby('genre').size()","657ce3b3":"pd.concat([A,B],keys=[\"Total albums\",\"Number of negatively reviewed albums (Score < 5)\"],axis=1)\\\n.plot(kind='bar',stacked=True,figsize=(12,10),rot=45)\nplt.xlabel('Genre',fontsize=16);","c3122757":"pd.concat([A,C],keys=[\"Total albums\",\"Number of positively reviewed albums (Score > 9)\"],axis=1,sort=True)\\\n.plot(kind='bar',stacked=True,figsize=(12,10),rot=45)\nplt.xlabel('Genre',fontsize=16);","c5015cd0":"df_final[df_final['genre']=='rock']['score']\\\n.plot(kind='kde',figsize=(10,8),color='b',alpha=0.5, label='Rock')\ndf_final[df_final['genre']=='electronic']['score']\\\n.plot(kind='kde',figsize=(10,8),color='r',alpha=0.5, label='Electronic')\ndf_final[df_final['genre']=='folk\/country']['score']\\\n.plot(kind='kde',figsize=(10,8),color='g',alpha=0.5, label='Folk\/Country')\ndf_final[df_final['genre']=='pop\/r&b']['score']\\\n.plot(kind='kde',figsize=(10,8),color='y',alpha=0.5, label='Pop\/R&B')\ndf_final[df_final['genre']=='jazz']['score']\\\n.plot(kind='kde',figsize=(10,8),color='c',alpha=0.5, label='Jazz')\ndf_final[df_final['genre']=='rap']['score']\\\n.plot(kind='kde',figsize=(10,8),color='m',alpha=0.5, label='Rap')\ndf_final[df_final['genre']=='rap']['score']\\\n.plot(kind='kde',figsize=(10,8),color='m',alpha=0.5, label='Rap')\ndf_final[df_final['genre']=='experimental']['score']\\\n.plot(kind='kde',figsize=(10,8),color='k',alpha=0.5, label='Experimental')\ndf_final[df_final['genre']=='metal']['score']\\\n.plot(kind='kde',figsize=(10,8),color='gold',alpha=0.5, label='Metal')\ndf_final[df_final['genre']=='global']['score']\\\n.plot(kind='kde',figsize=(10,8),color='plum',alpha=0.5, label='Global')\nplt.xlabel('Score',fontsize=16)\nplt.ylabel('Density',fontsize=16);\nplt.legend(fontsize=16);\nplt.ylim(0,)\nplt.xlim(0,12);","2b35f2e6":"# Is the best new music biased towards one genre?\ndf_final[df_final['best_new_music']==1.0]['genre'].value_counts()\n# Could just be a direct correlation to the number of albums reviewd per genre","84d82681":"df_final[df_final['best_new_music']==1.0]['score'].plot(kind='kde',color='b',\\\n                                                        alpha=0.75,figsize=(10,8))\nplt.xlabel('Score, Best New Music',fontsize=16)\nplt.ylabel('Density',fontsize=16);\nplt.ylim(0,);","27d39740":"df_final['best_new_music'].value_counts()","1b7a2e56":"df_final[df_final['best_new_music']==1.0]['pub_year'].plot(kind='hist',color='b',\\\n                                                        alpha=0.75,figsize=(10,8),bins=50);","1d93b062":"df_final.groupby('genre')['best_new_music'].sum().plot(kind='bar',color='b',alpha=0.75,\n                                                      figsize=(10,8))\nplt.xlabel('Genre',fontsize=16)\nplt.ylabel('Number of albums designated \"Best New Music\"',fontsize=16);","e784d0e5":"A = df_final.groupby('genre').size()\nB = df_final[df_final['best_new_music']==1.0].groupby('genre').size()\npd.concat([A,B],keys=[\"Total albums\",\"Number of albums designated 'Best New Music'\"],axis=1,sort=True)\\\n.plot(kind='bar',stacked=True,figsize=(12,10),rot=45);","5aa2b37f":"### No real surprises here, what about just looking at extremely badly rated ($<3$) or perfectly rated ($10\/10$) albums?","f2bfccc4":"### What about the 'best_new_music' albums... ","dd64f5a5":"### So global music, experimental and jazz seem to have the highest average ratings, but is this just Pitchfork being niche or these 3 genres having a low number of reviews? Metal has a low number of reviews as well, but a lower overall score than the aforementioned genres. ","e3dd8126":"### No apparent distinction in the distributions. Check via t-test, KS-test too perhaps? -- Do later","bd14880b":"### So the reviews do seem to get harsher the newer the album release date is.. could be something to do with the fact that recently there have been several retrospective reviews of classic albums... but let's also look at how the years have treated the albums belonging to a particular genre","334df46d":"## In which I start to explore the dataset, and this notebook is essentially a set of 'notes' on possible research questions which can be explored using the awesome Pitchfork reviews dataset\n### Anything marked 'Do later' is a possible angle that I will be tackling sometime in the future","3698952f":"## How do average ratings correlate by genre, year?","aa844ca8":"#### Does it matter when the review was published? Are reviews over time getting more or less stringent? -- Do later","7ca9c296":"### The best new music is predictably highly rated.. would be interesting to see if these vary by genre, or author -- Do later","d67da227":"### Pitchfork really doesn't seem to like Metal, and Rock has a lot of low rated albums, which is again probably just a consequence of the sheer number of Rock album reviews.\n### Let's check the distribution of poorly rated ($<5$) and highly rated albums ($>9$). ","a77f9667":"### Metal has zero highly rated albums, I told you Pitchfork hates metal!!","89ef1b3c":"### This is a very basic first look at the data, so we don't impute missing values etc yet -- Do later","0b1a7d01":"### *But what does it all mean???*\n## Well that's what I mean to explore in the subsequent kernels. Let me know your suggestions and logical deductions in the comments section!","ec99baa6":"### A stacked bar chart would give more insights into this perhaps","835bdb2a":"### The same overall trend holds, but with some strange peaks and troughs. Rap seems to have peaked in 1995-96 (Tupac?) while there seems to have been a resurgence in critically acclaimed Folk\/Country in early 2000, while Experimental completely nosedives around the year 2000. Will need to investigate further before identifying trends with any confidence. \n\n### Let's also look at the boxplot of score trends by genre","88cec541":"### 2009 onwards the number of albums with 'best_new_music' designations seems to be pretty steady; ","6347fd31":"### No trend easily stands out. ","373b1e00":"### Let's look at a ratio of total number of albums reviewed to the low or high rated albums by genre","0bac6674":"### Combine everything into one dataframe","4b3e39cb":"### Rock does, predictably, have a high number of best_new_music designations. Quite a lot for Electronic as well. "}}