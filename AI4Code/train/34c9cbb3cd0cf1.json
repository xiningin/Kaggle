{"cell_type":{"1d5c885f":"code","1ce7f6aa":"code","97004b88":"code","9d54340e":"code","b9c4360d":"code","7e3be2a4":"code","7d6cd4ca":"code","a3b34abd":"code","7f67ffdb":"code","e005dfe9":"code","c8aed43c":"code","61c9a1fb":"code","01c63e8c":"code","d24a002e":"code","76020e4d":"code","7c56bdc2":"code","9cacf4e6":"code","a80c1575":"code","e2bdb307":"code","09a7c57a":"code","10f36dfd":"code","edb50e31":"code","4d9fd0a2":"code","5ba29663":"code","92673b1b":"code","72cd63c0":"code","efd7338c":"markdown","cb5c7d6b":"markdown","5d337631":"markdown","bbcaf95f":"markdown","dcc525df":"markdown","46351900":"markdown","3a9ac2ce":"markdown","521de08a":"markdown","4808c557":"markdown","7b132c07":"markdown","014badb8":"markdown","eeae590c":"markdown","4c3192e9":"markdown","53874fc0":"markdown","5673e5de":"markdown","b3985bf0":"markdown","7845c6dd":"markdown","019d3f1f":"markdown","70c17a88":"markdown","6ae225f6":"markdown","26e333de":"markdown","595a0b0c":"markdown","d241a5a7":"markdown","493b890e":"markdown","4a93a49d":"markdown","ccc50d20":"markdown","21a9dc2e":"markdown","8670db14":"markdown","173ad9b9":"markdown","cdf79027":"markdown","73759b2b":"markdown","0246f62c":"markdown","998d3416":"markdown","d7dae144":"markdown","b1d93940":"markdown","a65c1438":"markdown","fc4fa816":"markdown"},"source":{"1d5c885f":"import pandas as pd\npd.plotting.register_matplotlib_converters()\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nprint(\"Setup Complete\")","1ce7f6aa":"filepath = '..\/input\/wine-reviews\/winemag-data-130k-v2.csv'\ndf = pd.read_csv(filepath, index_col=0)\ndf.head()","97004b88":"def Stars(row):\n    if row.points >= 95:\n        return 3\n    elif row.points >= 85:\n        return 2\n    else:\n        return 1\n    \nstarResults =  df.apply(Stars, axis='columns')","9d54340e":"df['star_rating'] = starResults\ndf.loc[0:4, ['title', 'country', 'variety', 'star_rating']]","b9c4360d":"df.describe()","7e3be2a4":"ratingCounts = df['star_rating'].value_counts()\nratingCounts = ratingCounts.sort_index()\nratingCounts","7d6cd4ca":"plt.figure(figsize=(6,4))\nsns.barplot(x=ratingCounts.index, y=ratingCounts)\nplt.ylabel('Counts')\nplt.title('Star rating')\nsns.set_style('darkgrid')","a3b34abd":"mostCommon = df.groupby('variety').size()\nmostCommon = mostCommon.sort_values(ascending=False)","7f67ffdb":"plt.figure(figsize=(6,3))\nsns.barplot(y=mostCommon.index[0:3], x=mostCommon[0:3])\nplt.ylabel('Variety')\nplt.title('Top 3 wine varieties')\nsns.set_style('darkgrid')","e005dfe9":"plt.figure(figsize=(6,4))\npie, ax = plt.subplots(figsize=[10,6])\nlabels = mostCommon.keys()\nplt.pie(x=mostCommon[:3], autopct=\"%.1f%%\", labels=mostCommon.index[:3], pctdistance=0.5)\nplt.title(\"Top 3 wine varieties\", fontsize=14)","c8aed43c":"bigCountry = df['country'].value_counts()","61c9a1fb":"plt.figure(figsize=(6,4))\npie, ax = plt.subplots(figsize=[10,6])\nlabels = bigCountry.keys()\nplt.pie(x=bigCountry[0:3], autopct=\"%.1f%%\", labels=bigCountry.index[:3], pctdistance=0.5)\nplt.title(\"Top 3 wine producer\", fontsize=14)\nsns.set_style('darkgrid')","01c63e8c":"highestRated = df.loc[df.points == 100]\nhighestRated = highestRated.groupby('country').count()\nhighestRated = highestRated['star_rating'].sort_values(ascending=False)\nhighestRated","d24a002e":"plt.figure(figsize=(7,3))\n\npie, ax = plt.subplots(figsize=[10,6])\nlabels = highestRated.keys()\nplt.pie(x=highestRated, autopct=\"%.1f%%\", labels=highestRated.index, pctdistance=0.5)\nplt.title(\"Countries with top rated wines\", fontsize=14)\nsns.set_style('darkgrid')","76020e4d":"groupedStar = df.groupby(['country']).mean()\ngroupedStar = groupedStar.sort_values(by='star_rating',ascending=False)\ngroupedStar.head()","7c56bdc2":"plt.figure(figsize=(15,3))\nsns.barplot(x=groupedStar.index, y=groupedStar['star_rating'])\nplt.ylabel('Star')\nplt.xlabel('')\nplt.xticks(rotation=90)\nplt.title('Rating average based on country')\nsns.set_style('darkgrid')","9cacf4e6":"groupedPts = groupedStar.sort_values(by='points',ascending=False)\nplt.figure(figsize=(15,3))\nsns.barplot(x=groupedPts.index, y=groupedPts['points'])\nplt.ylabel('')\nplt.xlabel('')\nplt.xticks(rotation=90)\nplt.title('Points average based on country')\nsns.set_style('darkgrid')","a80c1575":"groupedPr = groupedStar.sort_values(by='price',ascending=False)\nplt.figure(figsize=(15,3))\nsns.barplot(x=groupedPr.index, y=groupedPr['price'])\nplt.ylabel('')\nplt.xlabel('')\nplt.xticks(rotation=90)\nplt.title('Price average based on country')\nsns.set_style('darkgrid')","e2bdb307":"groupedVarPrice = df.groupby('variety')['price'].agg([min,max])\ngroupedVarPrice.head()","09a7c57a":"groupedVarPrice = groupedVarPrice.sort_values(by=['max'],ascending=False)\nplt.figure(figsize=(12,6))\nplt.xticks(rotation=90)\nplt.title('Top 10 varieties with the highest price')\nsns.barplot(x=groupedVarPrice.index[0:10], y=groupedVarPrice['max'][0:10])\nplt.ylabel('Max price ($)')\nplt.xlabel('')\nsns.set_style('darkgrid')","10f36dfd":"highestPrice = df.loc[df.price >= 2000]\nhighestPrice = highestPrice.sort_values(by='price', ascending=False)\nprint(highestPrice.iloc[0])","edb50e31":"groupedVarPrice = groupedVarPrice.sort_values(by=['min'],ascending=True)\nplt.figure(figsize=(12,6))\nplt.xticks(rotation=90)\nplt.title('Top 10 varieties with the highest price')\nsns.barplot(x=groupedVarPrice.index[0:10], y=groupedVarPrice['min'][0:10])\nplt.ylabel('Min price ($)')\nplt.xlabel('')\nsns.set_style('darkgrid')","4d9fd0a2":"pinot = df.loc[(df.variety == 'Pinot Noir') & (df.price <= 1000)]\nchardonnay = df.loc[(df.variety == 'Chardonnay') & (df.price <= 1000)]\ncabernet = df.loc[(df.variety == 'Cabernet Sauvignon') & (df.price <= 1000)]","5ba29663":"plt.figure(figsize=(16,6))\nplt.title('Distribution of 3 common wine varieties\\' prices (less than $1000)')\nsns.distplot(a=pinot.price, label='Pinot Noir', kde=False)\nsns.distplot(a=chardonnay.price, label='Chardonnay', kde=False)\nsns.distplot(a=cabernet.price, label='Cabernet Sauvignon', kde=False)\nplt.xlabel('Price ($)')\nplt.ylabel('Counts')\nsns.set_style('whitegrid')\nsns.set_style('darkgrid')\nplt.legend()","92673b1b":"plt.figure(figsize=(16,5))\nsns.regplot(x='price', y='points', data=df)\nplt.title('Regression line of price and points')\nplt.xlabel('Price')\nplt.ylabel('Points')\nsns.set_style('darkgrid')","72cd63c0":"bestWinery = df.groupby('winery')['points'].mean()\nbestWinery = bestWinery.sort_values(ascending=False).head(10)\nplt.figure(figsize=(10,5))\nplt.xticks(rotation=90)\nplt.title('Top 10 wineries')\nsns.barplot(x = bestWinery.index, y=bestWinery)\nsns.set_style('darkgrid')\nplt.xlabel('')\nplt.ylabel('Points')","efd7338c":"## 5.b Highest `star_rating` country","cb5c7d6b":"The line shows positive slope and tells us that\n> The **higher** the `price`, the **higher** the `points`.","5d337631":"## 1.b Basic statistical information","bbcaf95f":"## 5.a Grouping by `country`","dcc525df":"## 5.c Highest `points` country","46351900":"# Q2. What are three most common wine `variety` in this review?","3a9ac2ce":"# Q1. What do the basic information and distribution look like if the wines' `points` are categorized into `Star Rating`?","521de08a":"# Q4. Which `country` has the most top-rated wines?","4808c557":"## 2.c Pie chart","7b132c07":"## 5.d Highest `price` country","014badb8":"## 6.c Top ten `varieties` with the lowest `min` price","eeae590c":"There are a lot of reviewed wines from `US`, followed by `France` and `Italy`.","4c3192e9":"## 3.a Grouping the data based on `country`","53874fc0":"`England` has the highest `points` average, followed by `India` and `Austria`.","5673e5de":"## 4.a Finding the max point wines in this review\n> Max points: 100","b3985bf0":"# Q5. What is the average `points` and `price` if grouped by `country` and sorted by `star_rating`?","7845c6dd":"`2 stars` has the most wines in this review with a total of **115125** wines, compared to **12430** and **2416** (`1 star` and `3 stars` respectively).","019d3f1f":"## 1.c The plotting of wines based on `star_rating`","70c17a88":"## 6.b Top ten `variety` with the highest `max` price","6ae225f6":"## 3.b Plotting the data","26e333de":"# Q9. What is the best `winery` with the highest `points` average?","595a0b0c":"# Q8. Does the `price` affect the `points`?","d241a5a7":"# Q3. What are the three biggest wine `country` in this review?","493b890e":"## 2.b Bar plot","4a93a49d":"# Summary\n\n* There are a total of **129971** wines in this review\n* There are more `2 stars` rating wines compared to `1 star` and `3 stars`\n* Three most common varieties are `Pinot Noir`, `Chardonnay`, and `Cabernet Sauvignon`\n* Three biggest wine producer countries: `US`, `France`, and `Italy`\n* `France` has **8** wines that have maximum `points`\n* The most expensive wine in this review is **Ch\u00e2teau les Ormes Sorbet 2013 M\u00e9doc** from `France` with a price of **3300 USD**\n* `England` has the highest average on `star_rating` and `points`, while `Switzerland` has the highest average on `price`\n* The most expensive wine variety in this review is `Ramisco`\n* Three most common varieties (`Pinot Noir`, `Chardonnay`, and `Cabernet Sauvignon`) distribute mostly arround **0 \u2013 200 USD**\n* The regression line shows positive slope and tells us that the **higher** the `price`, the **higher** the `points`\n* **Araujo** is the best `winery` in this review","ccc50d20":"## 1.a Defining a <font color=#FFA500>Star Rating<\/font> function\n\n**Criteria :**\n* The wine will have 3 stars if: `points` is at least **95** and above\n* The wine will have 2 stars if: `points` is above **85** to **95**\n* The wine will have 1 star if: `points` is less than **85**","21a9dc2e":"Based on the pie chart, these are three most common varieties, and the most common one is\n> `Pinot Noir`","8670db14":"# Q6. What if we group the `variety` and find the `max` and `min` price?","173ad9b9":"`England` has the highest rating average, followed by `Austria` and `Germany`.","cdf79027":"## 6.a `min` and `max` prices grouped by `variety`","73759b2b":"## 2.a Grouping based on `variety`","0246f62c":"# Q7. What is the distribution of the three most common `variety`?","998d3416":"They distribute mostly arround **0 \u2013 200 USD**","d7dae144":"`Bordeaux-style red blend` has a whooping price of **3300 USD**","b1d93940":"# Wine Reviews Analysis\nA project by **<font color=#FFA500>Vallian Sayoga<\/font>**, an Agriculture fresh-graduate who has just started learning Data Analysis with no prior background in Computer Science.\n\n> *A dataset by [zackhtoutt](https:\/\/www.kaggle.com\/zynicide\/wine-reviews) and a tutorial by [Aleksey Bilogur](https:\/\/www.kaggle.com\/learn\/pandas) and [Alexis Cook](https:\/\/www.kaggle.com\/learn\/data-visualization)*","a65c1438":"# Initial step - Data loading & Checking","fc4fa816":"## 4.b Top `country` with max points graph"}}