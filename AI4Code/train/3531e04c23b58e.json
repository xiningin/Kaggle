{"cell_type":{"6d8b8f77":"code","50eabb8c":"code","5c7cad82":"code","0efff224":"code","79ab5dc3":"code","5a2419ff":"code","1ca41bd0":"code","39eb087d":"code","4e5b4b3b":"code","c5a8ac62":"code","a0ecd180":"code","d0c743c5":"code","5fc05a85":"code","bab21457":"code","691077b2":"code","8e413b87":"code","84f61be8":"code","a219a184":"code","49332b43":"code","5aeed71d":"code","0fbe28ae":"code","db8c9216":"code","323dd00c":"code","290867d6":"code","914dba20":"code","dc25dd7f":"code","e3bdbc0b":"code","5d019d15":"code","5c6e69db":"code","8b39af66":"code","3724d5a5":"code","9642e357":"code","a0fec561":"code","a6f686a0":"code","9e23e6fe":"code","adb4f26b":"code","ae46d7cc":"code","64536c92":"code","05b41e4b":"code","cd9c0cac":"code","0bf09ab6":"code","bcb63b6c":"markdown","a3ebbcdc":"markdown","dea753b7":"markdown","b6f99486":"markdown","cd46d66c":"markdown","b171bcb9":"markdown","b074edd7":"markdown","3ea802d9":"markdown","b0f05bcc":"markdown","71c7eb35":"markdown","ace6b234":"markdown","71552fd2":"markdown","c1ea3771":"markdown"},"source":{"6d8b8f77":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')","50eabb8c":"data=pd.read_csv('\/kaggle\/input\/avocado-prices\/avocado.csv')","5c7cad82":"data.head()","0efff224":"data.drop(['Unnamed: 0'],axis=1,inplace=True)","79ab5dc3":"data.head()","5a2419ff":"data= data.rename(index=str, columns={\"4046\" : \"Small Hass\", \"4225\" : \"Large Hass\",\"4770\" : \"XLarge Hass\" })","1ca41bd0":"data['Date'] =pd.to_datetime(data.Date)\ndata.sort_values(by=['Date'], inplace=True, ascending=True)\ndata.head()","39eb087d":"data.isnull().sum()","4e5b4b3b":"sns.heatmap(data.isnull(),yticklabels=False)","c5a8ac62":"sns.jointplot(x='Large Bags',y='Small Bags',color='lime',data=data)\nplt.show()","a0ecd180":"sns.jointplot(x='XLarge Bags',y='Large Bags',data=data,color='cyan')\nplt.show()","d0c743c5":"data.plot(kind = \"scatter\", x = \"Total Volume\", y = \"AveragePrice\",color='red')\nplt.show()","5fc05a85":"plt.figure(figsize=(12,5))\nplt.title(\"Distribution Price\")\nax = sns.distplot(data[\"AveragePrice\"], color = 'lime')\nplt.show()","bab21457":"data.boxplot(by = \"region\", figsize = (12, 12))\nplt.show()","691077b2":"data['Month'] = data['Date'].apply(lambda date:pd.Period(date, freq='M'))","8e413b87":"avg_monthly_sales = data.groupby(data['Month'])['Total Volume'].mean()\navg_monthly_sales","84f61be8":"sns.distplot(avg_monthly_sales,bins=10, kde=False,color='blue')\nplt.show()","a219a184":"plt.figure(figsize=(12,20))\nsns.set_style('whitegrid')\nsns.pointplot(x='AveragePrice', y='region', data=data, hue='type',join=False)\nplt.xticks(np.linspace(1,2,5))\nplt.xlabel('region',{'fontsize' : 'large'})\nplt.ylabel('AveragePrice',{'fontsize':'large'})\nplt.title(\"Type Average Price in Each Region\",{'fontsize':20})","49332b43":"pip install plotly","5aeed71d":"import plotly.offline as py\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode\ninit_notebook_mode(connected=True)\nfrom plotly import tools\n","0fbe28ae":"typeof=data.groupby('type')['Total Volume'].agg('sum')","db8c9216":"values=[typeof['conventional'],typeof['organic']]\nlabels=['conventional','organic']\ntrace=go.Pie(labels=labels,values=values)\npy.iplot([trace])","323dd00c":"sns.FacetGrid(data, hue = \"region\", size = 5) \\\n   .map(plt.scatter, \"Total Volume\", \"AveragePrice\") \\\n   .add_legend()\nplt.show()","290867d6":"sns.FacetGrid(data, hue = \"region\", size = 8) \\\n   .map(sns.kdeplot, \"AveragePrice\") \\\n   .add_legend()\nplt.show()","914dba20":"sns.pairplot(data,hue='region',size=3)","dc25dd7f":"plt.figure(figsize=(12,6))\nsns.heatmap(data.corr(),cmap='Greens',annot=True)","e3bdbc0b":"from sklearn.preprocessing import StandardScaler\nscaler = StandardScaler()\ndata.loc[:,'Small Hass':'XLarge Bags']= scaler.fit_transform(data.loc[:,'Small Hass':'XLarge Bags']) \ndata.head()","5d019d15":"X = data.drop(['AveragePrice'], axis = 1)\ny = data['AveragePrice']\ny=np.log1p(y)","5c6e69db":"X_categorical=pd.get_dummies(X[[\"type\",\"region\"]], drop_first = True)","8b39af66":"X_numerical=X[[\"Small Hass\",\"Large Hass\",\"XLarge Hass\",\"Small Bags\",\"Large Bags\",\"XLarge Bags\"]]","3724d5a5":"X= pd.concat([X_categorical, X_numerical], axis = 1)","9642e357":"from sklearn.model_selection import train_test_split","a0fec561":"X_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.3,random_state=100)","a6f686a0":"from sklearn.linear_model import LinearRegression\nlr = LinearRegression()\nlr.fit(X_train,y_train)\nprint (\"R2 of Linear Regresson:\", lr.score(X_train,y_train) )","9e23e6fe":"from sklearn import metrics","adb4f26b":"from sklearn.metrics import mean_absolute_error","ae46d7cc":"metrics.mean_absolute_error(y_test,lr.predict(X_test))","64536c92":"metrics.mean_squared_error(y_test,lr.predict(X_test))","05b41e4b":"np.sqrt(metrics.mean_squared_error(y_test,lr.predict(X_test)))","cd9c0cac":"import statsmodels.api as sm\nX_train = sm.add_constant(X_train) \nmodel = sm.OLS(y_train, X_train).fit()\nprint(model.summary())","0bf09ab6":"from sklearn import linear_model\nfrom sklearn.model_selection import GridSearchCV\n\nalphas = np.logspace(-5,3,20)\n\nclf = GridSearchCV(estimator=linear_model.Ridge(), param_grid=dict(alpha=alphas), cv=10)\nclf.fit(X_train, y_train)\noptlamGSCV_R = clf.best_estimator_.alpha\nprint('Optimum regularization parameter (Ridge):', optlamGSCV_R)\n\nclf = GridSearchCV(estimator=linear_model.Lasso(), param_grid=dict(alpha=alphas), cv=10)\nclf.fit(X_train, y_train)\noptlamGSCV_L= clf.best_estimator_.alpha\nprint('Optimum regularization parameter (Lasso):', optlamGSCV_L)","bcb63b6c":"**Total Volume vs Average Price**","a3ebbcdc":"**The Hass avocado is a cultivar of avocado with dark green\u2013colored, bumpy skin. It was first grown and sold by Southern \nCalifornia mail carrier and amateur horticulturist Rudolph Hass, who also gave it his name.\nThe Hass avocado is a large-sized fruit weighing 200 to 300 grams. When ripe, the skin becomes a dark purplish-black and\nyields to gentle pressure. When ready to serve, it becomes white-green in the middle part of the inner fruit.\nOwing to its taste, size, shelf-life, high growing yield and in some areas, year-round harvesting, the Hass cultivar is \nthe most commercially popular avocado worldwide. In the United States it accounts for more than 80% of the avocado crop,\n95% of the California crop and is the most widely grown avocado in New Zealand.**","dea753b7":"**Let us remove this unnamed column and proceed.**","b6f99486":"**Null Values:**","cd46d66c":"**Let us rename the columns for better understanding.**","b171bcb9":"**LASSO and RIDGE Regressions**","b074edd7":"**To be continued :)**","3ea802d9":"**Pairplot**","b0f05bcc":"**Average Sales of Avacados by Month**","71c7eb35":"**Converting format of Date column:**\n\n","ace6b234":"**Kde Plot**","71552fd2":"**Let's visualize the features using boxplots:**","c1ea3771":"**Total Volume and Average Price based on Region**"}}