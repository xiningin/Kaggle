{"cell_type":{"5700a870":"code","bbf101ec":"code","2ef4bb85":"code","d9ff7230":"code","7098de2f":"code","9cd5d020":"code","1281ad58":"code","e2335af5":"code","a2b58857":"code","0db3c772":"code","9d6d87ec":"code","d61a69b0":"code","ab01d99c":"code","d02b4edf":"code","b65f720f":"code","75744b13":"markdown","d05cd50e":"markdown","ed6fe344":"markdown","659700e7":"markdown","c1e1e534":"markdown","b1226917":"markdown","552f5aeb":"markdown"},"source":{"5700a870":"### Working with data ###\nimport numpy as np\nimport pandas as pd\n\n### Visualization ###\n# plotly\nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\n\n### Utils ###\nimport datetime\nimport warnings\n\n# File format #\nimport csv\nimport json\nimport xml.etree.ElementTree as ET\nwarnings.filterwarnings(\"ignore\")","bbf101ec":"df = pd.read_csv(\"..\/input\/disease_indicators.csv\", sep=',')","2ef4bb85":"df.shape","d9ff7230":"df.columns","7098de2f":"df['GeoLocation'].head(2)","9cd5d020":"df_location = df[(df['GeoLocation'].notnull())]","1281ad58":"df_location.shape","e2335af5":"df_location['GeoLocation'].head(2)","a2b58857":"df_location.describe().T","0db3c772":"# Convert to float and transform errors in nan\ndf_location['DataValue'] = pd.to_numeric(df_location['DataValue'], errors='coerce')","9d6d87ec":"df_location.shape","d61a69b0":"top_10_cities = (df_location.assign(rank=df_location.groupby(['Topic'])['DataValue']\n                     .rank(method='dense', ascending=False))\n                     .query('rank <= 10')\n                     .sort_values(['Topic', 'rank']))","ab01d99c":"top_10_cities.rename(columns={'LocationDesc':'city'}, inplace=True)","d02b4edf":"to_n_ranks_cities = (\n    top_10_cities\n    .groupby('city')['Topic']\n    .nunique()\n    .to_frame('Number of times in top 10')\n    .reset_index()\n    .sort_values(['Number of times in top 10'], ascending=True) # Since the orientation is horizontal, the sort must be the inverse order of what I want\n)","b65f720f":"data = [go.Bar(\n            y=to_n_ranks_cities['city'],\n            x=to_n_ranks_cities['Number of times in top 10'],\n            orientation = 'h',\n            text=to_n_ranks_cities['Number of times in top 10']\n    )]\n\nlayout = go.Layout(\n    title='Frequency of Cities in top 10 ranking for diseases',\n    titlefont=dict(size=20),\n    width=1000,\n    height=1400,\n    yaxis=go.layout.YAxis(\n        ticktext=to_n_ranks_cities['city'],\n        tickmode='array',\n        automargin=True\n    )\n)\n\nfig = go.Figure(data=data, layout=layout)\n\niplot(fig)","75744b13":"### Prepare Data","d05cd50e":"#### Get top 10 cities by disease","ed6fe344":"### Testing Hypothesis","659700e7":"### Load data and Setup","c1e1e534":"#### Load information","b1226917":"# U.S. Chronic Disease Indicators (CDI)\n\n*\"CDC's Division of Population Health provides cross-cutting set of 124 indicators that were developed by consensus and that allows states and territories and large metropolitan areas to uniformly define, collect, and report chronic disease data that are important to public health practice and available for states, territories and large metropolitan areas. In addition to providing access to state-specific indicator data, the CDI web site serves as a gateway to additional information and data resources.\"* - DATA.GOV\n\n**This notebook aims to validate the hypothesis that the probability of a disease to happen is related to where it happened, the location.**\n\nData source: https:\/\/catalog.data.gov\/dataset\/u-s-chronic-disease-indicators-cdi","552f5aeb":"#### Results\nAs can be seen in the chart above, some cities, specially Arizona, have come up to 10 times in the top 10 ranking cities where a specific disease appeared. Proving our hypothesis that the probability of a disease to happen is correlated to the location."}}