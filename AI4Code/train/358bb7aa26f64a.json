{"cell_type":{"52ea2370":"code","55dbaf8d":"code","0d42f577":"code","8db2d6e6":"code","c47dd574":"code","5c6ce30e":"code","f374aa09":"code","890f0bf0":"code","6d9c0a02":"code","2f26ff3d":"code","217e1eac":"code","746979ed":"code","c1e83c1c":"code","dcff69e5":"code","83c8084f":"code","b5e439df":"code","8f1ee14e":"code","0f4e0297":"code","25dd353c":"code","06bb46df":"code","de7b3877":"code","db5eb7c2":"code","cbad22da":"code","1bd10950":"code","e0ef3dc4":"code","9d6eb298":"code","b2745263":"code","9fa88230":"code","dc30f2e5":"code","0ec37c0f":"code","1a267599":"code","479e5bee":"code","5840d150":"code","b1e32775":"code","ed86fedf":"code","21203840":"code","acb9230c":"code","488410b8":"code","fba17758":"code","ecf76c68":"code","7cbec6b5":"code","9d8c9ca1":"code","db580189":"code","a029988b":"code","ba9a2eca":"code","3c7489aa":"code","424762d1":"code","13b0aa00":"code","07f04530":"code","8dd527e6":"code","fd73c23d":"code","15bf38ec":"code","d2315ef2":"code","f4f378d1":"code","6aab653c":"code","d5590275":"markdown","7277c6c7":"markdown","4402d3f2":"markdown","86770f9d":"markdown","851ae5af":"markdown","ced13edc":"markdown","158131f8":"markdown","cabd0c14":"markdown","69598529":"markdown","591d9e70":"markdown","00b450ad":"markdown","6acd19aa":"markdown","f09136f1":"markdown","61041d44":"markdown","1ff3fd9d":"markdown","b988975e":"markdown","7faeee56":"markdown","457fa18a":"markdown","536ae651":"markdown","bdbea4df":"markdown","5412fdd3":"markdown","247bebf7":"markdown","d8fc1325":"markdown","39074b2a":"markdown","4d089074":"markdown","968d9159":"markdown","bc9c3662":"markdown","f72243e9":"markdown"},"source":{"52ea2370":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","55dbaf8d":"import matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pandas_profiling import ProfileReport","0d42f577":"# Loading the Dataset\ndf = pd.read_csv(\"\/kaggle\/input\/montcoalert\/911.csv\")","8db2d6e6":"# Viewing the head of dataset. How the data looks.\ndf.head()","c47dd574":"# pfr = ProfileReport(df, title=\"911_EDA\")\n# pfr","5c6ce30e":"df.info()","f374aa09":"df.size","890f0bf0":"df.shape","6d9c0a02":"df.describe()","2f26ff3d":"# Null Value check\ndf.isnull().sum()","217e1eac":"#Since e has a constant value , dropping the column\ndf.drop(['e'],axis=1,inplace=True)","746979ed":"# Fill NaN values with zero\ndf.fillna(0 ,inplace=True)\ndf.isnull().sum()","c1e83c1c":"df.head()","dcff69e5":"from datetime import datetime\nimport calendar","83c8084f":"#We can convert a string to datetime using strptime() function\ndf['timeStamp'] = df['timeStamp'].apply(lambda x: datetime.strptime(x, \"%Y-%m-%d %H:%M:%S\"))","b5e439df":"#Converting to Columns\n\ndf['Year'] = df['timeStamp'].apply(lambda t: t.year)\ndf['Month'] = df['timeStamp'].apply(lambda t: calendar.month_name[t.month])\ndf['Day'] = df['timeStamp'].apply(lambda t: t.day)\ndf['day name'] = df['timeStamp'].apply(lambda t: calendar.day_name[t.dayofweek])\ndf['Date'] = df['timeStamp'].apply(lambda t: t.date())","8f1ee14e":"# Since we have different annotations for different time of a day, \n# So to get each part of day from Hours we define a function\ndef partofday(hour):\n    return (\n        \"morning\" if 5 <= hour <= 11\n        else\n        \"afternoon\" if 12 <= hour <= 17\n        else\n        \"evening\" if 18 <= hour <= 22\n        else\n        \"night\"\n    )","0f4e0297":"# Getting the part of day column\ndf[\"part_of_day\"] = df['timeStamp'].apply(lambda t: partofday(t.hour))","25dd353c":"df['Reason'] = df['title'].apply(lambda title: title.split(':')[0])\ndf['Reason_subtype'] = df['title'].apply(lambda title: title.split(':')[1])","06bb46df":"#Since title column is not needed anymore,hence dropping the column\ndf.drop(['title'],axis=1,inplace=True)\n\n#view the data head now after subsequent changes made above\ndf.head()","de7b3877":"# Visualize Which part of day mostly the calls are made\nsns.countplot(x='part_of_day',data=df)","db5eb7c2":"print (df['part_of_day'].value_counts(normalize=True) * 100)\n_, ax = plt.subplots()\nax.set_xlabel(\"Percentage\")\nax.set_ylabel(\"part_of_day\")\nsns.set(rc={'figure.figsize': (9,8)})\n(df['part_of_day'].value_counts(normalize=True) * 100).plot.barh()","cbad22da":"sns.countplot(x='part_of_day',data=df, hue='Reason')","1bd10950":"df['Month'].value_counts().plot(kind='bar',figsize=(12,12))","e0ef3dc4":"plt.figure(figsize=(15,8))\nsns.countplot(data=df, x='Month', order=df.Month.value_counts().index, hue='Reason')","9d6eb298":"df['Year'].value_counts().plot(kind='bar',figsize=(10,10))","b2745263":"# View the locations in map using Folium map\nimport folium\nfrom folium import plugins\nfrom io import StringIO\nimport matplotlib.gridspec as gridspec\n\n#Take any random Town lat and long,for Example 3rd Town from df.head\nlocation = folium.Map([df['lat'][3],df['lng'][3]], zoom_start=15,tiles='OpenStreetMap') \n \n\nlocation","9fa88230":"# We shall find out the maximum calls made for any reason (Top 15)\n\nCalls_made = df['Reason_subtype'].value_counts()[:15]\nplt.figure(figsize=(12, 8))\nx = list(Calls_made.index)\ny = list(Calls_made.values)\nx.reverse()\ny.reverse()\n\nplt.title(\"Most emergency reasons of calls\")\nplt.ylabel(\"Reason\")\nplt.xlabel(\"Number of calls\")\n\nplt.barh(x, y)","dc30f2e5":"Calls_per_daytiming = df.groupby(by=['Reason','part_of_day']).count()['Reason_subtype'].unstack().reset_index()\nCalls_per_daytiming","0ec37c0f":"dayHour = df.groupby(by=['day name','part_of_day']).count()['Reason_subtype'].unstack()\ndayHour.head()","1a267599":"# Visualize through Heatmap\nplt.figure(figsize=(12, 8))\nsns.heatmap(dayHour,cmap='mako')","479e5bee":"plt.figure(figsize=(12, 8))\nsns.clustermap(dayHour, cmap='vlag')","5840d150":"# Filtering the EMS calls and its Reason Types\nfiltered_EMS_calls = df[(df['Reason']!='Fire') & (df['Reason']!='Traffic')]['Reason_subtype']\nfiltered_EMS_calls","b1e32775":"# Visualising the top 30 Reason among EMS category\nprint (filtered_EMS_calls.value_counts(normalize=True) * 100)\n_, ax = plt.subplots()\nax.set_xlabel(\"Percentage\")\nax.set_ylabel(\"Reason Subtypes Under EMS\")\nsns.set(rc={'figure.figsize': (9,8)})\n(filtered_EMS_calls.value_counts(normalize=True) * 100)[:30].plot(kind='barh',figsize=(10,10))","ed86fedf":"#Filtering Traffic calls and its sub categories\nfiltered_traffic = df[(df['Reason']!='EMS') & (df['Reason']!='Fire')]['Reason_subtype']\nfiltered_traffic","21203840":"# Visualising the top reasons among Traffic category\nprint (filtered_traffic.value_counts(normalize=True) * 100)\n_, ax = plt.subplots()\nax.set_xlabel(\"Percentage\")\nax.set_ylabel(\"Reason Subtypes Under Traffic\")\nsns.set(rc={'figure.figsize': (9,8)})\n(filtered_traffic.value_counts(normalize=True) * 100)[:30].plot(kind='barh',figsize=(10,10))","acb9230c":"plt.figure(figsize=(18,7))\ndf[df['Reason']=='EMS'].groupby('day name').count()['twp'].plot()\nplt.title('EMS')\nplt.tight_layout()","488410b8":"plt.figure(figsize=(18,7))\ndf[df['Reason']=='EMS'].groupby('part_of_day').count()['twp'].plot()\nplt.title('EMS')\nplt.tight_layout()","fba17758":"plt.figure(figsize=(18,7))\ndf[df['Reason']=='EMS'].groupby('Date').count()['twp'].plot()\nplt.title('EMS')\nplt.tight_layout()","ecf76c68":"plt.figure(figsize=(18,7))\ndf.groupby('Date').count()['twp'].plot()\nplt.tight_layout()","7cbec6b5":"\nplt.figure(figsize=(18,7))\ndf[df['Reason']=='EMS'].groupby(by=['Reason','part_of_day']).count()['twp'].plot()\nplt.title('EMS')\nplt.tight_layout()","9d8c9ca1":"plt.figure(figsize=(18,7))\ndf[df['Reason']=='EMS'].groupby(by=['Reason_subtype','part_of_day']).count()['twp'].plot()\nplt.title('EMS')\nplt.tight_layout()","db580189":"dayMonth = df.groupby(by=['day name','Month']).count()['Reason'].unstack()\ndayMonth.head()","a029988b":"#Now create a HeatMap using this new DataFrame.\nplt.figure(figsize=(12,6))\nsns.heatmap(dayMonth,cmap='PuBuGn',linewidths=2)","ba9a2eca":"# Finding the Unique Townships in the dataset\ndf[[\"twp\",\"Reason\"]].groupby('twp').count().sort_values(\"Reason\")\n\nUnique_Town = df.twp.unique()\ntownarray = []\ncorresponding_reason = []\nfor town in Unique_Town:\n        town_len =  len(df[df[\"twp\"] == town])    \n        townarray.append(town_len)","3c7489aa":"len(Unique_Town)","424762d1":"# Let us see the visualization for top 30 Towns in a sorted manner (Higer to Lower 911 calls)\ntdf = pd.DataFrame(\n    {'Town': Unique_Town,\n     'Count' : townarray,\n     })\n\ntdf_sort = tdf.sort_values(\"Count\", ascending=False).reset_index(drop=True)\n\nf, ax = plt.subplots(figsize=(10,8)) \nax.set_yticklabels(tdf.Town, rotation='horizontal', fontsize='large')\ng = sns.barplot(y = tdf_sort.Town[:30], x= tdf_sort.Count)\n\nplt.show()\n","13b0aa00":"# Let us see the visualization for top 30 Towns in a sorted manner (Lower to Higher 911 Calls)\ntdf_sort = tdf.sort_values(\"Count\", ascending=True).reset_index(drop=True)\n\nf, ax = plt.subplots(figsize=(10,8)) \nax.set_yticklabels(tdf.Town, rotation='horizontal', fontsize='large')\ng = sns.barplot(y = tdf_sort.Town[:30], x= tdf_sort.Count)\n# g = sns.barplot(y = tdf_sort.Town[:-15], x= tdf_sort.Count)\nplt.show()\n","07f04530":"# Finding out the EMS reason of call made for the unique towns\nfor town in Unique_Town:\n    EMS = df[(df['Reason']!='Fire') & (df['Reason']!='Traffic')][[\"twp\",\"Reason\"]]","8dd527e6":"print (EMS.twp.value_counts()[0:15])\nplt.figure(figsize=(18,7))\nEMS.twp.value_counts().plot.bar()","fd73c23d":"# Finding out the Traffic reason of call made for the unique towns\nfor town in Unique_Town:\n    Traffic = df[(df['Reason']!='Fire') & (df['Reason']!='EMS')][[\"twp\",\"Reason\"]]\n\n    \nprint (Traffic.twp.value_counts()[0:15])\nplt.figure(figsize=(18,7))\nTraffic.twp.value_counts().plot.bar()","15bf38ec":"# Finding out the Fire reason of call made for the unique towns\nfor town in Unique_Town:\n    Fire = df[(df['Reason']!='Traffic') & (df['Reason']!='EMS')][[\"twp\",\"Reason\"]]\n\n    \nprint (Fire.twp.value_counts()[0:15])\nplt.figure(figsize=(18,7))\nFire.twp.value_counts().plot.bar()","d2315ef2":"sns.catplot(x=\"day name\", hue=\"Reason\",\n\n                data=df, kind=\"count\",\n\n                height=12, aspect=1);","f4f378d1":"\ndef color(count): \n    if count in range(0,5000): \n        col = 'green'\n    elif count in range(5001,10000): \n        col = 'blue'\n    elif count in range(10001,20000): \n        col = 'orange'\n    else: \n        col='red'\n    return col ","6aab653c":"#Back to Folium Map, let us view the Towns and Area in map from where most no of calls are made.\nfor lat,lng,twp,area,count in zip(df['lat'], df['lng'],df['twp'],df['addr'],tdf_sort['Count']):\n    folium.Marker(location=[lat,lng],\n                        popup = ('Town: ' + str(twp).capitalize() + '<br>' 'Area: ' +str(area)\n                                + '<br>' 'Calls Made: ' + str(count)),\n                        icon= folium.Icon(color=color(count),  \n                        icon_color='yellow', icon = 'info-sign')\n                        ).add_to(location)\n    \nlocation\n\n#Zoom Out to view the different areas with different colour marks as per no of calls","d5590275":"#### Quick Overview of what key insights we got from the above analysis:\n \n1. Most No of calls were due to EMS Reason followed by Traffic\n2. Lower Merion region received high calls due to Traffic, which tends that it might be an accident prone region\n3. Norristown received the highest no of Emergency calls\n4. Calls were mostly done in weekdays and during morning and afternoon time\n5. On Sunday it was seen that the calls made were least but Weekend night calls were subsequently higher than weekdays nigh calls\n6. In the Month of March and January we observed the most of the calls were received","7277c6c7":"We can notice from above bar chart that Norristown and Lower Merion have received highest no of 911 calls\nAnd Green Lane , Lehigh County and Phila County received the least calls.\n\nNote: These all calls were categorized under EMS reason\n\nLet us see for one more reason , say under Traffic reason which townships receive more calls","4402d3f2":"#### Let's convert dayhours with dddd\/mm\/yy and create new feature with year\n##### Create 6 new columns out of timestamp\n1. Year\n2. Month\n3. Day\n4. Day_name\n5. Date\n6. part_of_day","86770f9d":" ### EDA through pandas-profiling\nInstead of just giving you a single output, pandas-profiling enables its user to quickly generate a very broadly structured HTML file containing most of what you might need to know before diving into a more specific and individual data exploration . We will use the insights we get from the output of Pandas Report\n\n#### Please note: It may take some while to run the Pandas Report. Please be patient !","851ae5af":"![911-number.png](attachment:911-number.png)","ced13edc":"We can notice that Lower Merion has highest no of 911 calls received followed by Abington and Norristown.\nLeast calls were received from Phila County and Lehigh County","158131f8":"As mentioned above,\nMorning and Afternoon time are the highest no of calls made which is clear through the above line plot","cabd0c14":"This is my first project in Kaggle. Tried to do a simple visualizations and get insights on 911 Calls made in Pennsylvania,USA. \n\n\nPlease feel free to comment and upvote if you like my basic analysis on the dataset as a beiginner.\nThank You :-) \n","69598529":"We notice that for Sunday's we have least calls But as compared to Monday to Thursday nights Friday, Saturday ,Sunday night calls are subsequently higher","591d9e70":"## Here we are going to analyze 911 Calls for Pennsylvania, US State\n\n### Let us begin","00b450ad":"##### We can see that title column has reasons for 911 calls mostly headed as three different type (EMS,Fire,Traffic)\n \nSo we will be splitting the title column into Main Reason Column and its subcategories and then drop the title column as it will not be needed further","6acd19aa":"We can clearly note the difference in Calls reason in different Townships.\nFrom the above chart it is clear that Lower Merion received high no of 911 calls for Traffic reason followed by Upper Merion and NORRISTOWN has significantly low no of calls for traffic reason.\nLeast was observed in Lehigh County.\nNow Since Under traffic reason we had maximum calls due to Vehicle Accident, so we can assume that Lower Merion is an Accident prone region , since we observed most of the Traffic calls made from Lower Merion.\n \nAlso let us see the same for Fire reason.","f09136f1":"### We get a handful of insights from this one line pandas profile report code. \n \nMentioning few handy insights from EDA :\n1. There are 5 categorical variables, 3 Numerical variables and 1 Boolean\n2. Column 'e' is rejected as it has only a constant value '1'\n3. timeStamp is considered for applying to pd.todatetime() to get days, hours, week etc\n4. lat,lng are highly skewed\n5. Data has only 72 duplicate rows which is very less compared to size of the data\n6. We have 69 Distinct Townships and 159 datapoints are missing in the Township column\n7. We have 171 distinct zipcodes and 52129 atapoints are missing in the zip column\n8. We have counts for each column in Missing value tab 'Counts'\n \nLet's Proceed with the further analysis on data by visualization using Matplotlib and Seaborn","61041d44":"We can see that most of the calls (i.e Around 67 % of calls)\nare made during Morning and afternoon time between 5 am to 5 pm","1ff3fd9d":"We can see how the data is spreaded from the above line graphs.\nIn Month of March we can see high peaks in no of calls specially in Year 2018","b988975e":"We can also see that Lower Merion has higher frequency of calls Fire reason too followed by Abington.","7faeee56":"So from the above graph its clear that Vehicle Accident calls falls under both EMS and Traffic \nand it comprises of 65% under Traffic category .\nThere is very few calls for reason hazardous Road condition or Vehicle Fire","457fa18a":"From the Above two graphs we came to know that we have less data for year 2015 and more data for year 2016,2017\nAlso in moth of January, October and March there is a slightly more no of calls compared to other months and as expected the EMS and Traffic calls are the most in this time period","536ae651":"We get to know that Most of the Calls are due to Victim Fall, Respiratory Emergency Cardiac Arrest and Vehicle Accident.\n\nThere is drastic fall in no of calls from Fever, dehydration and building fire and so on .\n","bdbea4df":"From the above heatmap it is clear that Month of March has high no of calls and that too Friday records the most no of calls","5412fdd3":"# 911 Calls Debrief\n\n#### 911 is the universal emergency number in North America. Dialing 911 will connect you to the local emergency services (police, fire, ambulance, mountain rescue etc.). It is important to understand when to dial 911, and how the system works. \n\n#### Non-emergency calls to the 911 system can cause delays in handling other very serious emergencies that require immediate attention. Please be sure not to abuse this service. Making a hoax call is a crime in many areas.","247bebf7":"The Above dataframe looks more precise and handy to carry out further visualizaion for better Insights.\n### Let's begin","d8fc1325":"We can notice that most of the calls are on Thursday and Friday Afternoon which is followed by Monday.","39074b2a":"#### Let us define a function to Mark points on Map as per no of call received from an Area in Pennsylvania","4d089074":"Clearly due to Vehicle Accident most of the 911 calls were made followed by Disabled Vehicle and low were for Head Injuries , general weakness etc\nAlso We can notice that since most of the calls were of EMS and Traffic, so Vehicle Accident should fall under both Head reason i.e EMS and Traffic","968d9159":"#### Importing the mandatory libraries","bc9c3662":"From Above graph we can notice that most of the calls are Emergency calss and Traffic calls Apart from EMS calls , Traffic calls are also higher subsequently during Morning and Afternoon.\n","f72243e9":"#### Perform Regular EDA for the dataset"}}