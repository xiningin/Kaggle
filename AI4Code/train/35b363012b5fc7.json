{"cell_type":{"6f0efc0f":"code","54b338b7":"code","28500113":"code","7ae17eb5":"code","24976afd":"code","cb12c87b":"code","a90c64f6":"code","01edad64":"code","31a10a52":"code","4cc03ecb":"code","c0c1074c":"code","8ac15ace":"code","6f115fb0":"code","19b36785":"code","ca2a9430":"code","e599110e":"code","b0f8bdb4":"code","158122f5":"code","eaf6a6f8":"code","dd7c4012":"code","f0f29ce6":"code","7fdebb7f":"code","872418c4":"code","9fcb0e0d":"code","6fb361af":"code","57178a34":"code","231752f7":"code","cc6b32b6":"code","55ac36d2":"code","963ab1c4":"code","6802a883":"code","e81ff891":"code","6dceb58d":"code","726772ab":"code","82f0bf2f":"code","0b2d6263":"code","db39f8c6":"code","874509b7":"code","025bfbee":"code","15403490":"code","389e3ee5":"code","22c0b771":"code","b501eb7d":"code","830a349e":"code","b3ee5133":"code","5465cf23":"code","0f06be5d":"code","95e46c95":"markdown","a41bcb4e":"markdown","f90018d5":"markdown","539cfa48":"markdown","d15adcc3":"markdown","0ebd245f":"markdown","3b9eef29":"markdown","121c1a29":"markdown","d112730b":"markdown","77df82b6":"markdown","c55e51a0":"markdown","06dd90c4":"markdown","889a4c26":"markdown","0fe58d4e":"markdown","b355ba67":"markdown","89eefc3f":"markdown","5497f8f3":"markdown","cc1486b8":"markdown","b9d46fd1":"markdown","ca7a0afe":"markdown"},"source":{"6f0efc0f":"#Importing libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib import rcParams","54b338b7":"#Import dataset\ndf = pd.read_csv('\/kaggle\/input\/pesquisa-data-hackers-2019\/datahackers-survey-2019-anonymous-responses.csv')","28500113":"#let\u00b4s get more info about dataset\ntab_info = pd.DataFrame(df.dtypes).T.rename(index={0:'column Type'}) \ntab_info = tab_info.append(pd.DataFrame(df.isnull().sum()).T.rename(index={0:'null values (nb)'}))\ntab_info = tab_info.append(pd.DataFrame(df.isnull().sum()\/df.shape[0]*100).T.\n                                       rename(index={0: 'null values (%)'}))\ntab_info","7ae17eb5":"df.describe()","24976afd":"#rename the columns that i know for sure I\u00b4m gonna need it a lot\ndf.rename(columns={\"('P1', 'age')\": \"age\", \"('P2', 'gender')\": \"gender\", \"('P8', 'degreee_level')\": \"degree_level\",\n                   \"('P16', 'salary_range')\": \"salary\", \"('P17', 'time_experience_data_science')\": \"time_experience_ds\",\n                   \"('P18', 'time_experience_before')\": \"time_experience_before\", \"('P19', 'is_data_science_professional')\": \"ds_professional\",\n                   \"('P22', 'most_used_proggraming_languages')\": \"language\", \"('P5', 'living_state')\": \"state\",\n                   \"('P10', 'job_situation')\": \"job_situation\", \"('P12', 'workers_number')\": \"workers_number\",\n                   \"('P13', 'manager')\": \"manager\",\"('D3', 'anonymized_degree_area')\": \"degree_area\", \n                   \"('D4', 'anonymized_market_sector')\": \"market_sector\"}, inplace=True)\n\n","cb12c87b":"#what is the relation between age and salary\ndf.groupby([\"salary\"])[\"age\"].mean().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"red\", title= \"relation age & salary\")\n","a90c64f6":"#check the degree level \ndf[\"degree_level\"].value_counts().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"red\", title= \"Degree level\")\n","01edad64":"#count the range salaries \ndf[\"salary\"].value_counts().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"blue\", title= \"couting the salaries\")\n","31a10a52":"#considering the salaries of only those to are data science professionals\ndf[df.ds_professional ==1].salary.value_counts().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"blue\", title= \"ds professional salary\")\n","4cc03ecb":"#for ds professionals, let\u00b4s check the job situation\ndf[df.ds_professional ==1].job_situation.value_counts().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"blue\", title= \"ds professionals job situation\")\n\n","c0c1074c":"#what is the relation between salary and time experience data science\ndf.groupby([\"time_experience_before\"])[\"salary\"].value_counts().sort_values(ascending=False).nlargest(15).plot(kind='bar', figsize=(10,5), color= \"red\", title= \"time experience before ds and salary\")\n","8ac15ace":"#language overview\ndf[\"language\"].value_counts().sort_values(ascending=False).plot(kind='bar', figsize=(10,5), color= \"red\", title= \"most used languages\")\n","6f115fb0":"#data manipulation on salary column\nvariable_split= df[\"salary\"].str.split(\" \")\ndf[\"salario1\"]= variable_split.str.get(2)\ndf[\"salario2\"]= variable_split.str.get(5)\n\n\n\n#slit again\nvariable_split= df[\"salario1\"].str.split(\"\/\")\ndf[\"salario1\"]= variable_split.str.get(0)\n\n\nvariable_split= df[\"salario2\"].str.split(\"\/\")\ndf[\"salario2\"]= variable_split.str.get(0)","19b36785":"\n#replace the R$ per nan\ndf.loc[df['salario1'] == \"R$\",'salario1'] = np.nan\n\n\n\n#in the dataset 3.000 as written as 3000. We have to change this\n\n#replace 3000 by 3.000\ndf[\"salario2\"].replace([\"3000\"], \"3.000\", inplace= True)\n","ca2a9430":"#remove the \".\" to transform it into international form\ndf[\"salario1\"].replace([\"1.001\"], \"1001\", inplace= True)\ndf[\"salario1\"].replace([\"2.001\"], \"2001\", inplace= True)\ndf[\"salario1\"].replace([\"3.001\"], \"3001\", inplace= True)\ndf[\"salario1\"].replace([\"4.001\"], \"4001\", inplace= True)\ndf[\"salario1\"].replace([\"6.001\"], \"6001\", inplace= True)\ndf[\"salario1\"].replace([\"8.001\"], \"8001\", inplace= True)\ndf[\"salario1\"].replace([\"12.001\"], \"12001\", inplace= True)\ndf[\"salario1\"].replace([\"16.001\"], \"16001\", inplace= True)\n\ndf[\"salario2\"].replace([\"2.000\"], \"2009\", inplace= True)\ndf[\"salario2\"].replace([\"3.000\"], \"3000\", inplace= True)\ndf[\"salario2\"].replace([\"4.000\"], \"4000\", inplace= True)\ndf[\"salario2\"].replace([\"6.000\"], \"6000\", inplace= True)\ndf[\"salario2\"].replace([\"8.000\"], \"8000\", inplace= True)\ndf[\"salario2\"].replace([\"12.000\"], \"12000\", inplace= True)\ndf[\"salario2\"].replace([\"20.000\"], \"20000\", inplace= True)\n","e599110e":"#transform the datatype to int\n#CONVERT OBJECT TO FLOAT\ndf[\"salario1\"]= pd.to_numeric(df[\"salario1\"])\n\n\ndf[\"salario2\"]= pd.to_numeric(df[\"salario2\"])       \n\n\n#take the mean of both salaries\ndf[\"salario\"]= (df[\"salario2\"]+df[\"salario1\"])\/2","b0f8bdb4":"f,ax=plt.subplots(1,2,figsize=(12,8))\ndf['ds_professional'].value_counts().plot.pie(explode=[0,0.1],autopct='%1.1f%%',ax=ax[0],shadow=True)\nax[0].set_title('data science professional')\nax[0].set_ylabel('ds professional Count')\nsns.countplot('ds_professional',data=df,ax=ax[1])\nax[1].set_title('ds professional')\nplt.show()","158122f5":"#I wanna take a lot at only data science professioanals\nds_prof= df[df.ds_professional ==1]","eaf6a6f8":"#not ds professional\nnot_ds_prof= df[df.ds_professional ==0]\n","dd7c4012":"##take a look at gender and age related to salary of data science professionals\nsalary_gender_ds= ds_prof.groupby([\"gender\"])[\"salario\", \"age\"].mean()\nprint(salary_gender_ds)","f0f29ce6":"##take a look at gender and age related to salary of non data science professionals\nsalary_gender_notds= not_ds_prof.groupby([\"gender\"])[\"salario\", \"age\"].mean()\nprint(salary_gender_notds)\n","7fdebb7f":"#SALARY DISTRIBUTION PER GENDER FOR DS AND NON DS PROFESSIONALS\n#DISTRIBUTION\nimport seaborn as sns\n#SALARY DISTRIBUTION\nplt.figure(figsize = (8, 6))\nplt.title('Not ds professional & ds professional salary comparision')\nsns.distplot(ds_prof[\"salario\"], label=\"ds professional\")\nsns.distplot(not_ds_prof[\"salario\"], label=\"Not ds professional\")\nplt.legend()\n","872418c4":"#Visualizing the salary and age Distribution\nplt.figure(figsize = (10,10))\nplt.subplot(2,2,1)\n#train['Chance of Admit '].hist()\nsns.distplot(df['salario'],bins=10,color='Violet',  kde_kws={\"color\": \"g\", \"lw\": 5, \"label\": \"KDE\"},hist_kws={\"linewidth\": 5,\"alpha\": 0.8 })\nplt.subplot(2,2,2)\nsns.boxplot(df['age'])","9fcb0e0d":"#salary per gender- non ds professionals\nplt.figure(figsize=(10,10))\nplt.title(\"salary per gender- non-ds professionals\")\nsns.boxplot(x='salario',y='gender',data =not_ds_prof)","6fb361af":"#salary per gender ds professionals\nplt.figure(figsize=(10,10))\nplt.title(\"salary per gender- ds professionals\")\nsns.boxplot(x='salario',y='gender',data =ds_prof)","57178a34":"#salary x manager x age\nplt.figure(figsize=(10,10))\nplt.title(\"salario x age x manager\")\nsns.boxplot(x='salario',y='age',data =df,hue='manager')","231752f7":"#salary per gender and ds and non ds professionals comparision\nindex = np.arange(2)\nbar_width = 0.35\n\nfig, ax = plt.subplots()\nsummer = ax.bar(index, ds_prof.groupby([\"gender\"])[\"salario\"].mean(), bar_width,\n                label=\"ds professionals\")\n\n\nwinter = ax.bar(index+bar_width, not_ds_prof.groupby([\"gender\"])[\"salario\"].mean(),\n                 bar_width, label=\"non-ds professionals\")\n\nax.set_xlabel('gender')\nax.set_ylabel('salary')\nax.set_title('salary per gender: ds & non-ds professional')\nax.set_xticks(index + bar_width \/ 2)\nax.set_xticklabels([\"female\", \"male\"])\nax.legend()\n\nplt.show()\n","cc6b32b6":"#salary x age\ng = sns.boxplot(x='salario', y=\"age\", data=ds_prof, palette=\"Set1\")\ng.set_xticklabels(g.get_xticklabels(),rotation=45)\ng.set_title(\"Salary according to age(ds professionals)\", fontsize=15)\ng.set_xlabel(\"salary\", fontsize=12)\ng.set_ylabel(\"age\", fontsize=12)\nplt.show()\n","55ac36d2":"#ds professionals salary x age\nfrom matplotlib.pyplot import MaxNLocator, FuncFormatter\nplt.figure(figsize = (8, 4))\nplot = sns.lineplot(data = ds_prof, x = 'age', y = 'salario', markers = False)\nplot.xaxis.set_major_locator(plt.MaxNLocator(19))\n\n","963ab1c4":"#degree area for ds professionals\nds_prof[\"degree_area\"].value_counts(ascending= False).plot(kind= \"bar\", figsize=(10,5), title=\"degree for ds professionals\")\n","6802a883":"\n#degree are for ds professionals\nnot_ds_prof[\"degree_area\"].value_counts(ascending= False).plot(kind= \"bar\", figsize=(10,5), title=\"degree for non ds professionals\")\n","e81ff891":"#degree area with higher salaries for ds professionals\nds_prof.groupby([\"degree_area\"])[\"salario\"].mean().plot(kind= \"bar\", figsize=(10,5), title=\"degree area x salary for ds professionals\")\n","6dceb58d":"not_ds_prof.groupby([\"degree_area\"])[\"salario\"].mean().plot(kind= \"bar\", figsize=(10,5), title=\"degree area x salary for non ds professionals\")\n","726772ab":"ds_prof[\"language\"].value_counts().plot(kind= \"bar\", figsize=(10,5), title=\"language x salary\")","82f0bf2f":"#language x salary\nds_prof.groupby([\"language\"])[\"salario\"].mean().plot(kind= \"bar\", figsize=(10,5), title=\"language x salary\")","0b2d6263":"#time experience data science and salary for ds professionals\nds_prof.groupby([\"time_experience_ds\"])[\"salario\"].mean().plot(kind= \"bar\", figsize=(10,5), title=\"time experience x salary for ds professionals\")\n","db39f8c6":"ds_prof.groupby([\"market_sector\"])[\"salario\"].mean().plot(kind= \"bar\", color=\"red\", figsize=(10,5), title=\"degree for ds professionals\")\n","874509b7":"#market sector that hires more ds professionals\nds_prof[\"market_sector\"].value_counts().plot(kind= \"bar\", figsize=(10,5), title=\"degree for ds professionals\")\n","025bfbee":"#workers number \nds_prof[\"workers_number\"].value_counts().plot(kind= \"bar\", figsize=(10,5), title=\"number of workers\")","15403490":"#workers number x salary\nds_prof.groupby([\"workers_number\"])[\"salario\"].mean().plot(kind= \"bar\", figsize=(10,5), title=\"company size x ds professionals salary\")\n","389e3ee5":"ds_prof2= ds_prof.loc[:, [\"('P0', 'id')\", \"age\", \"gender\", \"degree_level\", \"time_experience_ds\",\n               \"time_experience_before\", \"degree_area\", \"salario\"]]\n","22c0b771":"\n#dealing with missing data\nmedian = ds_prof2['age'].median()\nds_prof2['age'].fillna(median, inplace=True)\n\n\n\n#drop missing degree area\nds_prof2= ds_prof2.dropna(subset=[\"degree_area\"], how=\"any\")\n\n\n\nds_prof2['salario'] = ds_prof2['salario'].fillna(df.groupby('degree_area')['salario'].transform('mean'))\n\n\n#drop missing degree area\nds_prof2= ds_prof2.dropna(subset=[\"gender\"], how=\"any\")\n\n","b501eb7d":"# Importing the dataset\nX= ds_prof2.loc[:, [\"age\", \"gender\", \"degree_level\", \"time_experience_ds\",\n               \"time_experience_before\", \"degree_area\"]]\n\nId= ds_prof2.loc[:, \"('P0', 'id')\"]\ny = ds_prof2.loc[:, \"salario\"]","830a349e":"# Encoding categorical data\"\nX = pd.get_dummies(X, columns=[\"gender\", \"degree_level\", \"time_experience_ds\", \"time_experience_before\", \"degree_area\"],\\\n                          prefix=[\"gender\", \"degree\", \"exp_ds\", \"exp_bef\", \"area\"], drop_first=True)\n\n","b3ee5133":"# Splitting the dataset into the Training set and Test set\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2, random_state = 0)\n\n","5465cf23":"# Fitting Decision Tree Regression to the dataset\nfrom sklearn.tree import DecisionTreeRegressor\nregressor = DecisionTreeRegressor(random_state = 0)\nregressor.fit(X, y)\n\n# Predicting a new result\ny_pred = regressor.predict(X_test)","0f06be5d":"#Checking the accuracy of the model\naccu_train= np.sum(regressor.predict(X_train)== y_train)\/float(y_train.size)\naccu_test= np.sum(regressor.predict(X_test)== y_test)\/float(y_test.size)\nprint(\"classification accu on train\", accu_train)\nprint(\"classification accu on train\", accu_test)","95e46c95":"# Let\u00b4s look again to age x salary relation","a41bcb4e":"# Which language expertise pays you the highest salary in Brazil?","f90018d5":"# Now let\u00b4s select the variables we will use to build a machine larning model","539cfa48":"Hello everyone!\n\nI hope to bring some more insights making some data exploratory analysis and trying to apply a machine learning algorithm to predict the salary. \n\nI hope you enjoy it and fell free to leave any comment, any feedback will be very halpfull for me :)\n","d15adcc3":"# Is there any relation to the number of employees and the salary of data science professionals in Brazil?","0ebd245f":"# We can see that the average age is basically the same for ds professionals and non ds professionals.","3b9eef29":"# And which is the market sector thar hires most data science professionals in Brazil?","121c1a29":"# There isn\u00b4t a relation between the number of employees and the salary the company pays for their data science professionals","d112730b":"# Let\u00b4s take a look at the degree area of ds professionals and non ds professionals","77df82b6":"# Even though python is the most popular language in Brazil and in the  world, Brazilian companies seem to not be aware of this powerful tool. The highest salaries are paid for professionals that use Java and SAS\/Stata ","c55e51a0":"# Even thought female salary is lower in both cases( data science and non data science professional), females working in data science field salary gap to male contraparts is way lower than for non-ds female professionals.","06dd90c4":"# Degree area x salary","889a4c26":"# Which market sector pays the highest salaries for data science professionals in Brazil?","0fe58d4e":"# Almost half of the people who answered the survey are not data science professionals yet. Therefore to have a better overview it\u00b4s better to spit the dataset into ds professional and non-ds professionals","b355ba67":"#  To have a better overview over the data science in Brazil we have to make some data manipulation on \"salary\" column.","89eefc3f":"# Companies size according to the number of employees","5497f8f3":"The graph shows us that there is a relation between age and salary. As more experience you have, higher might be the salary","cc1486b8":"# The graph shows a clear correlation between salary and age","b9d46fd1":"# Which language is most used in Brazil by data science professionals? ","ca7a0afe":"# DS professionals salary is higher for both gender. Male ds professionals salary is about 600 higher than non-ds male professionals.However for female ds professionals earm about 1243 more than non-ds female professionals."}}