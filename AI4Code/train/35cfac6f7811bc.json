{"cell_type":{"2bac6efa":"code","c0149b7f":"code","2d7cfa96":"code","179dca78":"code","070f6740":"code","cc31619c":"code","090b51de":"code","017ab293":"code","b6104829":"code","37c2d5e7":"code","d2659f45":"code","8bf70b5a":"code","4a72d0e6":"code","4cf5670f":"code","2320e619":"code","4c414b49":"code","e6c5b211":"code","342edd48":"code","4df4c4f1":"code","e856716b":"code","6c048908":"code","aac9450c":"code","e3d07480":"code","fbda591b":"code","885da29f":"code","2584a2b6":"code","d8d8e819":"code","8a798806":"code","3121d255":"code","69d9dbfc":"code","5cf156cb":"markdown","b19d854d":"markdown","c5845d3c":"markdown","fe970d27":"markdown","62f6c04a":"markdown","fdeca2d0":"markdown","e7cee553":"markdown","65aafacc":"markdown","16c76023":"markdown","c45f1198":"markdown","13fd9276":"markdown","71f392e2":"markdown","c46e0f61":"markdown","32ab2768":"markdown","38bc2c93":"markdown","10b4f69a":"markdown","e8b2e1fa":"markdown","04ca435f":"markdown","e44ba2d4":"markdown","8b29ac34":"markdown","865250b7":"markdown","1696eae0":"markdown","bf46eba1":"markdown","184b5870":"markdown","8f6e1e9a":"markdown","da8fdfbc":"markdown","52c2fa5a":"markdown","9068dd96":"markdown"},"source":{"2bac6efa":"import pandas as pd\n\ntitanic_df = pd.read_csv('\/kaggle\/input\/titanic\/train.csv')\ntitanic_df.head()","c0149b7f":"# Exploring the data using pandas methods : 'shape', 'info', 'describe', 'dtype', 'mean()', ...\nprint(f\"DataFrame shape : {titanic_df.shape}\\n=================================\")\nprint(f\"DataFrame info : {titanic_df.info()}\\n=================================\")\nprint(f\"DataFrame columns : {titanic_df.columns}\\n=================================\")\nprint(f\"The type of each column : {titanic_df.dtypes}\\n=================================\")\nprint(f\"How much missing value in every column : {titanic_df.isna().sum()}\\n=================================\")","2d7cfa96":"import numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set(style=\"ticks\")\nplt.style.use(\"fivethirtyeight\")","179dca78":"# Let's first check gender\n# 'catplot()': Figure-level interface for drawing categorical plots onto a FacetGrid.\nsns.catplot('Sex', data=titanic_df, kind='count')","070f6740":"# Now let separate the gender by classes passing 'Sex' to the 'hue' parameter\nsns.catplot('Pclass', data=titanic_df, hue='Sex', kind='count')","cc31619c":"# Create a new column 'Person' in which every person under 16 is child.\n\ntitanic_df['Person'] = titanic_df.Sex\ntitanic_df.loc[titanic_df['Age'] < 16, 'Person'] = 'Child'","090b51de":"# Checking the distribution\nprint(f\"Person categories : {titanic_df.Person.unique()}\\n=================================\")\nprint(f\"Distribution of person : {titanic_df.Person.value_counts()}\\n=================================\")\nprint(f\"Mean age : {titanic_df.Age.mean()}\\n=================================\")","017ab293":"sns.catplot('Pclass', data=titanic_df, hue='Person', kind='count')","b6104829":"# visualizing age distribution\ntitanic_df.Age.hist(bins=80)","37c2d5e7":"# Another way to visualize the data is to use FacetGrid to plot multiple kedplots on one plot\n\nfig = sns.FacetGrid(titanic_df, hue=\"Sex\", aspect=4)\nfig.map(sns.kdeplot, 'Age', shade=True)\n\noldest = titanic_df['Age'].max()\n\nfig.set(xlim=(0, oldest))\n\nfig.add_legend()","d2659f45":"# We could have done the same thing for the 'person' column to include children:\n\nfig = sns.FacetGrid(titanic_df, hue=\"Person\",aspect=4)\nfig.map(sns.kdeplot, 'Age', shade=True)\n\noldest = titanic_df['Age'].max()\n\nfig.set(xlim=(0, oldest))\n\nfig.add_legend()","8bf70b5a":"# Let's do the same for class by changing the hue argument:\n\nfig = sns.FacetGrid(titanic_df, hue=\"Pclass\",aspect=4)\nfig.map(sns.kdeplot, 'Age', shade=True)\n\noldest = titanic_df['Age'].max()\n\nfig.set(xlim=(0, oldest))\n\nfig.add_legend()","4a72d0e6":"# visualizing the dataset again\ntitanic_df.head()","4cf5670f":"# First we'll drop the NaN values and create a new object, deck\ndeck = titanic_df['Cabin'].dropna()\ndeck","2320e619":"# let's grab that letter for the deck level with a simple for loop\nlevels = []\nfor level in deck:\n    levels.append(level[0])\n\ncabin_df = pd.DataFrame(levels)\ncabin_df.columns = ['Cabin']\ncabin_df.sort_values(by='Cabin', inplace=True)\nsns.catplot('Cabin', data=cabin_df, kind='count', palette='winter_d')","4c414b49":"cabin_df = cabin_df[cabin_df.Cabin != 'T']\nsns.catplot('Cabin', data=cabin_df, kind='count', palette='summer')","e6c5b211":"titanic_df.head()","342edd48":"# Now we can make a quick factorplot to check out the results, note the \n# order argument, used to deal with NaN values\n\nsns.catplot('Embarked', data=titanic_df, hue='Pclass', kind='count', order=['C', 'Q', 'S'])","4df4c4f1":"titanic_df.head()","e856716b":"# Let's start by adding a new column to define alone\n# We'll add the parent\/child column with the sibsp column\n\ntitanic_df['Alone'] = titanic_df.SibSp + titanic_df.Parch\ntitanic_df.Alone","6c048908":"# Look for > 0 or == 0 to set alone status\ntitanic_df.loc[titanic_df['Alone'] > 0, 'Alone'] = 'with Family'\ntitanic_df.loc[titanic_df['Alone'] == 0, 'Alone'] = 'Alone'","aac9450c":"# Let's check to make sure it worked\ntitanic_df.head()","e3d07480":"# Now let's get a simple visualization!\nsns.catplot('Alone', data=titanic_df, kind='count', palette='Blues', \n            order=['Alone', 'with Family'])","fbda591b":"# Let's start by creating a new column for legibility purposes through mapping\ntitanic_df['Survivor'] = titanic_df.Survived.map({0:'No', 1:'Yes'})\n\n# Let's just get a quick overall view of survied vs died. \nsns.catplot('Survivor', data=titanic_df, kind='count')","885da29f":"# Let's use a factor plot again, but now considering class\nsns.catplot('Pclass', 'Survived', data=titanic_df, kind='point')","2584a2b6":"# Let's use a factor plot again, but now considering class and gender\nsns.catplot('Pclass', 'Survived', data=titanic_df, hue='Person', kind='point')","d8d8e819":"# Let's use a linear plot on age versus survival\nsns.lmplot('Age', 'Survived', data=titanic_df)","8a798806":"# Let's use a linear plot on age versus survival using hue for class seperation\nsns.lmplot('Age', 'Survived',hue='Pclass', data=titanic_df)","3121d255":"# Let's use a linear plot on age versus survival using hue for class seperation\ngenerations = [10, 20, 40, 60, 80]\nsns.lmplot('Age', 'Survived', hue='Pclass', data=titanic_df, palette='winter', x_bins=generations)","69d9dbfc":"sns.lmplot('Age', 'Survived', hue='Sex', data=titanic_df, palette='winter', x_bins=generations)","5cf156cb":"Note here that the Embarked column has C, Q, and S values. Reading about the project on Kaggle you'll note that these stand for Cherbourg, Queenstown, Southhampton.","b19d854d":"So quite a few more people died than those who survived. Let's see if the class of the passengers had an effect on their survival rate, since the movie Titanic popularized the notion that the 3rd class passengers did not do as well as their 1st and 2nd class counterparts.","c5845d3c":"Excellent! Now we have seperated the passengers between female, male, and child. This will be important later on beacuse of the famous **\"Women and children first policy\"**!","fe970d27":"Great now that we've analyzed the distribution by decks, let's go ahead and answer our third question.","62f6c04a":"# 5. What factors helped someone survive the sinking?","fdeca2d0":"### Variable Notes\n   - **PassengerId** Unique ID of the passenger\n\n   - **Survived** Survived (1) or died (0)\n\n   - **Pclass** Passenger's class (1st, 2nd, or 3rd)\n\n   - **Name** Passenger's name\n\n   - **Sex** Passenger's sex\n\n   - **Age** Passenger's age\n\n   - **SibSp** Number of siblings\/spouses aboard the Titanic\n\n   - **Parch** Number of parents\/children aboard the Titanic\n\n   - **Ticket** Ticket number\n\n   - **Fare** Fare paid for ticket\n\n   - **Cabin** Cabin number\n\n   - **Embarked** Where the passenger got on the ship (C - Cherbourg, S - Southampton, Q = Queenstown)","e7cee553":"All good data analysis projects begin with trying to answer questions. Now that we know what column category data we have let's think of some questions or insights we would like to obtain from the data. So here's a list of questions we'll try to answer using our data analysis skills!\n\nFirst some basic questions:\n\n    1.) Who were the passengers on the Titanic? (Ages, Gender, Class,..etc)\n    2.) What deck were the passengers on and how does that relate to their class?\n    3.) Where did the passengers come from?\n    4.) Who was alone and who was with family?\n    \nThen we'll dig deeper, with a broader question:\n\n    5.) What factors helped someone survive the sinking?","65aafacc":"An interesting find here is that in Queenstown, almost all the passengers that boarded there were 3rd class. It would be intersting to look at the economics of that town in that time period for further investigation.","16c76023":"So we can see that the Cabin column has information on the deck, but it has several NaN values, so we'll have to drop them.","c45f1198":"Interesting, quite a bit of children in 3rd class and not so many in 1st! How about we create a distribution of the ages to get a more precise picture of the who the passengers were.","13fd9276":"Awesome! we've gotten some really great insights on how gender,age, and class all related to a passengers chance of survival. Now you take control: Answer the following questions using pandas and seaborn:\n\n    1.) Did the deck have an effect on the passengers survival rate? Did this answer match up with your intuition?\n    2.) Did having a family member increase the odds of surviving the crash?","71f392e2":"We've gotten a pretty good picture of who the passengers were based on Sex, Age, and Class. So let's move on to our 2nd question: What deck were the passengers on and how does that relate to their class?","c46e0f61":"# Kaggle Titanic Challenge\n****","32ab2768":"Interesting to note we have a 'T' deck value there which doesn't make sense, we  can drop it out with the following code:","38bc2c93":"Interesting find on the older 1st class passengers! What about if we relate gender and age with the survival set?","10b4f69a":"# 3. Where did the passengers come from?","e8b2e1fa":"# 2. What deck were the passengers on and how does that relate to their class?","04ca435f":"Look like survival rates for the 3rd class are substantially lower! But maybe this effect is being caused by the large amount of men in the 3rd class in combination with the women and children first policy. Let's use 'hue' to get a clearer picture on this.","e44ba2d4":"# 1. Who were the passengers on the titanic?","8b29ac34":"Now we know that if the Alone column is anything but 0, then the passenger had family aboard and wasn't alone. So let's change the column now so that if the value is greater than 0, we know the passenger was with his\/her family, otherwise they were alone.","865250b7":"Notice we only need the first letter of the deck to classify its level (e.g. A, B, C, D, E, F, G)","1696eae0":"Looks like there is a general trend that the older the passenger was, the less likely they survived. Let's go ahead and use hue to take a look at the effect of class and age.","bf46eba1":"## References:\n- [Jose Portilla Udemy Course: Learning Python for Data Analysis and Visualization](https:\/\/www.udemy.com\/course\/learning-python-for-data-analysis-and-visualization\/)","184b5870":"# 4. Who was alone and who was with family?","8f6e1e9a":"From this data it looks like being a male or being in 3rd class were both not favourable for survival. Even regardless of class the result of being a male in any class dramatically decreases your chances of survival.\n\nBut what about age? Did being younger or older have an effect on survival rate?","da8fdfbc":"We can also use the x_bin argument to clean up this figure and grab the data and bin it by age with a std attached!","52c2fa5a":"Wow, quite a few more males in the 3rd class than females, an interesting find. However, it might be useful to know the split between males, females, and children. How can we go about this?","9068dd96":"Great work! Now that we've throughly analyzed the data let's go ahead and take a look at the most interesting (and open-ended) question: *What factors helped someone survive the sinking?*"}}