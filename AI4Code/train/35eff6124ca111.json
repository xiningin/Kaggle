{"cell_type":{"f5f2e441":"code","0a2ea18e":"code","866ed867":"code","3247b540":"code","42b478dc":"code","3e1b78ac":"code","1a57c7ba":"code","d21cea69":"code","dd59763a":"code","7dd98150":"code","acc6be48":"markdown","50f4b1fa":"markdown","c30658d2":"markdown","c229affa":"markdown"},"source":{"f5f2e441":"import pandas as pd\nfrom random import sample, seed\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","0a2ea18e":"# Variables that fully define the A\/B test results\nT = 20 # Total number of subject (A+B)\nA = 10 # Number of subject in group A\nB = 10 # Number of subject in group B\nA_yes = 7 # Yes count in group A\nB_yes = 4 # Yes count in group B\nalpha = 0.05 # Threshold for reject null hypothesis, if p-value >= alpha then retain the null hypothesis","866ed867":"# Compute remaining A\/B test result\nT_yes = A_yes + B_yes\nT_no = T - T_yes\nA_yes_pc = 100 * A_yes \/ A # Yes percentage\nB_yes_pc = 100 * B_yes \/ B # Yes percentage\nAB_yes_pc = A_yes_pc - B_yes_pc # A\/B Test Statistic : Yes Percentage Difference","3247b540":"print(f\"Observed Yes Rate (%): A : {A_yes_pc}, B : {B_yes_pc}, A-B : {AB_yes_pc}\")\nprint(f\"Total counts         : Yes : {T_yes}, No : {T_no}\")","42b478dc":"# S = Step\n# seed(48) # for reproduce result\nbag1 = [1]*T_yes + [0]*T_no    # S1 : All result bag\nbag2 = sample(bag1, len(bag1)) # S2 : Shuffle bag\nA_rs = bag2[:A]                # S3 : Random Sample A\nB_rs = bag2[A:]                # S4 : Random Sample B\n\n# S5 : Compute the test statistic\nA_yes_pc_rs = 100 * sum(A_rs) \/ A\nB_yes_pc_rs = 100 * sum(B_rs) \/ B\nAB_yes_pc_rs = A_yes_pc_rs - B_yes_pc_rs","3e1b78ac":"print(f\"(1) Bag                       : {bag1}\")\nprint(f\"(2) Bag Shuffled              : {bag2}\")\nprint(f\"(3) A resample                : {A_rs}\")\nprint(f\"(4) A resample                : {B_rs}\")\nprint(f\"(5) Resample Yes Rate (%) : A : {A_yes_pc_rs} , B : {B_yes_pc_rs}, A-B : {AB_yes_pc_rs}\")\nprint(f\"(0) Observed Yes Rate (%) : A : {A_yes_pc} , B : {B_yes_pc}, A-B : {AB_yes_pc}\")","1a57c7ba":"# seed(48) # For reproduce result\nbag = [1]*T_yes + [0]*T_no # S1 : All result bag\n\n# S6 : Repeat S2 to S5 in a large number of 'p'\np = 100 # Number of permutation\nperm_res = [0] * p # List for permutation result\nfor i in range(p):\n    bag2 = sample(bag1, len(bag1)) # S2 : Shuffle bag\n    A_rs = bag2[:A]                # S3 : Random Sample A\n    B_rs = bag2[A:]                # S4 : Random Sample B\n    perm_res[i] = (100 * sum(A_rs) \/ A) - (100 * sum(B_rs) \/ B)\n\n# Print result\nn = 15\nfor i in range(0, len(perm_res), n):\n    print(str(perm_res[i:i+n]).replace(\",\",\"\").replace(\".0\",\"\"))","d21cea69":"perm_res_s = pd.Series(perm_res)\nprint(pd.pivot_table(perm_res_s.value_counts().reset_index(), values=0, columns='index').to_string(index=False))\ntes = perm_res_s.value_counts().reset_index(name='count').sort_values('index')\nsns.barplot(data=tes, x='index', y='count')","dd59763a":"# Two-way hypothesis test (Nul : p-value = alpha, Alternative : p-value != alpha)\nextreme_count = sum(perm_res_s.abs() >= abs(AB_yes_pc)) # 6 + 13 + 7 + 7 + 1\n\n# One-way hypothesis test (Null : p-value <= alpha, Alternative : p-value > alpha)\npos_extreme_count = sum(perm_res_s >= AB_yes_pc) # 7 + 7 + 1\n\nprint(f\"Number of permutation             : {p}\")\nprint(f\"Two-way : Extreme Count           : {extreme_count}\")\nprint(f\"Two-way : Extreme Ratio (p-value) : {extreme_count\/p}\")\nprint(f\"One-way : Extreme Count           : {pos_extreme_count}\")\nprint(f\"One-way : Extreme Ratio (p-value) : {pos_extreme_count\/p}\")","7dd98150":"print('Result of Two-way hypothesis :')\nif (extreme_count\/p) == alpha:\n    print('Retain the null hypothesis')\nelse:\n    print('Reject the null hypothesis')\nprint('')\nprint('Result of One-way hypothesis :')\nif (pos_extreme_count\/p) <= alpha:\n    print('Retain the null hypothesis')\nelse:\n    print('Reject the null hypothesis')","acc6be48":"In this Notebook, I wanna try A\/B Testing with Null Hypothesis\n\nThe story is there is an ice cream shop, they want to create a new topping for their ice cream, they don't know whether to choose for topping A or B, so they plan to make A\/B testing with 10 costumers for each topping.\nThe result is 7\/10 customers like topping A, and 4\/10 customers like topping B, and the difference from topping A and B is 3, but they have a null hypothesis which is the difference just happen due to random chance, so they try to find the answer with calculation, they use 5% as a threshold(alpha), if the value from the calculation is >= alpha then the result is like the null hypothesis and if the value < alpha then they can reject the null hypothesis. ","50f4b1fa":"The result : observed difference is real\/significant and not due to random chance","c30658d2":"Source : [Youtube](https:\/\/www.youtube.com\/watch?v=ZdC8dwL0rlI)","c229affa":"Thank You"}}