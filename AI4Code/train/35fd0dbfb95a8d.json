{"cell_type":{"954cb1fd":"code","13557655":"code","8e570cde":"code","e232f36d":"code","2b17eabb":"code","ce092a30":"code","68bb4a67":"code","4bf70f95":"code","e0fff85e":"code","78a194d4":"code","180b770d":"code","606a5aea":"code","b07df1fd":"code","8fb7467a":"code","89688b74":"code","9980b17f":"code","507f48eb":"code","184c284c":"code","663bd9d8":"code","85e5b127":"code","c646da3b":"code","429d84e7":"code","5b45f392":"code","8250d838":"code","a74ee98f":"code","07634fb9":"code","b3a1f2be":"code","180269cb":"code","e24c1bd4":"code","1fa7c6e5":"code","15f026e2":"code","1e886c38":"code","305b7817":"code","64e4a998":"code","d3ed3831":"code","90c2357d":"code","ab4b5b65":"code","08adbe62":"code","b127e6ee":"code","9cfa8c9c":"code","ecc0f0a9":"code","b4317e74":"code","32e676f0":"code","9b38ac97":"code","8f6b3679":"code","21cf78e1":"code","ea0a427a":"code","814bce2f":"code","5a0f5261":"code","a481cae4":"code","5dd34bc1":"markdown","ba173389":"markdown","eb5b88d5":"markdown","8b418e6d":"markdown","53e46166":"markdown","93ae0d80":"markdown","c8235eef":"markdown","36911804":"markdown","c829ac44":"markdown","2231e914":"markdown","6cc13cd0":"markdown","723bbb0a":"markdown","b801dbce":"markdown","d7412e4f":"markdown","479638b0":"markdown","f8667c4f":"markdown","c659c79a":"markdown","4f52a797":"markdown","995a5401":"markdown","da766f69":"markdown","1e9e38a5":"markdown","a6246809":"markdown","78f73a39":"markdown","0c044814":"markdown","75559972":"markdown","21e63fcf":"markdown","fbcf6410":"markdown","2c303814":"markdown","e190c732":"markdown","e393d194":"markdown","9162902a":"markdown","f74b718d":"markdown","cb1beb78":"markdown","f751304f":"markdown","20744fd6":"markdown","51483636":"markdown","a289d83b":"markdown","a931b710":"markdown","d3e18993":"markdown","cc8b8098":"markdown","e94ddaa2":"markdown","8fd18db7":"markdown","82964710":"markdown","b877cd9b":"markdown","9a1da400":"markdown","7647c214":"markdown","b84ed9b6":"markdown","c7a1697d":"markdown","a1c74999":"markdown","b30b184f":"markdown","a2e5bf5d":"markdown","545717c6":"markdown","e481786f":"markdown","dae093cd":"markdown","9a51aa32":"markdown","566a90ee":"markdown","c512997a":"markdown","cca8b10c":"markdown"},"source":{"954cb1fd":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport nltk\nimport string\nfrom nltk.classify import NaiveBayesClassifier","13557655":"data_set = pd.read_csv(\"..\/input\/mbti_1.csv\")\ndata_set.tail()","8e570cde":"data_set.isnull().any()","e232f36d":"data_set.shape","2b17eabb":"data_set.iloc[0,1].split('|||')","ce092a30":"len(data_set.iloc[1,1].split('|||'))","68bb4a67":"types = np.unique(np.array(data_set['type']))\ntypes","4bf70f95":"total = data_set.groupby(['type']).count()*50\ntotal","e0fff85e":"plt.figure(figsize = (12,6))\n\nplt.bar(np.array(total.index), height = total['posts'],)\nplt.xlabel('Personality types', size = 14)\nplt.ylabel('Number of posts available', size = 14)\nplt.title('Total posts for each personality type')","78a194d4":"all_posts= pd.DataFrame()\nfor j in types:\n    temp1 = data_set[data_set['type']==j]['posts']\n    temp2 = []\n    for i in temp1:\n        temp2+=i.split('|||')\n    temp3 = pd.Series(temp2)\n    all_posts[j] = temp3","180b770d":"all_posts.tail()","606a5aea":"useless_words = nltk.corpus.stopwords.words(\"english\") + list(string.punctuation)\ndef build_bag_of_words_features_filtered(words):\n    words = nltk.word_tokenize(words)\n    return {\n        word:1 for word in words \\\n        if not word in useless_words}","b07df1fd":"build_bag_of_words_features_filtered(all_posts['INTJ'].iloc[1])","8fb7467a":"features=[]\nfor j in types:\n    temp1 = all_posts[j]\n    temp1 = temp1.dropna() #not all the personality types have same number of files\n    features += [[(build_bag_of_words_features_filtered(i), j) \\\n    for i in temp1]]","89688b74":"split=[]\nfor i in range(16):\n    split += [len(features[i]) * 0.8]\nsplit = np.array(split,dtype = int)","9980b17f":"split","507f48eb":"train=[]\nfor i in range(16):\n    train += features[i][:split[i]] ","184c284c":"sentiment_classifier = NaiveBayesClassifier.train(train)","663bd9d8":"nltk.classify.util.accuracy(sentiment_classifier, train)*100","85e5b127":"test=[]\nfor i in range(16):\n    test += features[i][split[i]:]","c646da3b":"nltk.classify.util.accuracy(sentiment_classifier, test)*100","429d84e7":"# Features for the bag of words model\nfeatures=[]\nfor j in types:\n    temp1 = all_posts[j]\n    temp1 = temp1.dropna() #not all the personality types have same number of files\n    if('I' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'introvert') \\\n        for i in temp1]]\n    if('E' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'extrovert') \\\n        for i in temp1]]","5b45f392":"train=[]\nfor i in range(16):\n    train += features[i][:split[i]] ","8250d838":"IntroExtro = NaiveBayesClassifier.train(train)","a74ee98f":"nltk.classify.util.accuracy(IntroExtro, train)*100","07634fb9":"test=[]\nfor i in range(16):\n    test += features[i][split[i]:]","b3a1f2be":"nltk.classify.util.accuracy(IntroExtro, test)*100","180269cb":"# Features for the bag of words model\nfeatures=[]\nfor j in types:\n    temp1 = all_posts[j]\n    temp1 = temp1.dropna() #not all the personality types have same number of files\n    if('N' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Intuition') \\\n        for i in temp1]]\n    if('E' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Sensing') \\\n        for i in temp1]]","e24c1bd4":"train=[]\nfor i in range(16):\n    train += features[i][:split[i]] ","1fa7c6e5":"IntuitionSensing = NaiveBayesClassifier.train(train)","15f026e2":"nltk.classify.util.accuracy(IntuitionSensing, train)*100","1e886c38":"test=[]\nfor i in range(16):\n    test += features[i][split[i]:]","305b7817":"nltk.classify.util.accuracy(IntuitionSensing, test)*100","64e4a998":"# Features for the bag of words model\nfeatures=[]\nfor j in types:\n    temp1 = all_posts[j]\n    temp1 = temp1.dropna() #not all the personality types have same number of files\n    if('T' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Thinking') \\\n        for i in temp1]]\n    if('F' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Feeling') \\\n        for i in temp1]]","d3ed3831":"train=[]\nfor i in range(16):\n    train += features[i][:split[i]] ","90c2357d":"ThinkingFeeling = NaiveBayesClassifier.train(train)","ab4b5b65":"nltk.classify.util.accuracy(ThinkingFeeling, train)*100","08adbe62":"test=[]\nfor i in range(16):\n    test += features[i][split[i]:]","b127e6ee":"nltk.classify.util.accuracy(ThinkingFeeling, test)*100","9cfa8c9c":"# Features for the bag of words model\nfeatures=[]\nfor j in types:\n    temp1 = all_posts[j]\n    temp1 = temp1.dropna() #not all the personality types have same number of files\n    if('J' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Judging') \\\n        for i in temp1]]\n    if('P' in j):\n        features += [[(build_bag_of_words_features_filtered(i), 'Percieving') \\\n        for i in temp1]]","ecc0f0a9":"train=[]\nfor i in range(16):\n    train += features[i][:split[i]] ","b4317e74":"JudgingPercieiving = NaiveBayesClassifier.train(train)","32e676f0":"nltk.classify.util.accuracy(JudgingPercieiving, train)*100","9b38ac97":"test=[]\nfor i in range(16):\n    test += features[i][split[i]:]","8f6b3679":"nltk.classify.util.accuracy(JudgingPercieiving, test)*100","21cf78e1":"temp = {'train' : [81.12443979837917,70.14524215640667,80.03456948570128,79.79341109742592], 'test' : [58.20469312585358,54.46262259027357,59.41315234035509,54.40549600629061]}\nresults = pd.DataFrame.from_dict(temp, orient='index', columns=['Introvert - Extrovert', 'Intuition - Sensing', 'Thinking - Feeling', 'Judging - Percieiving'])\nresults","ea0a427a":"plt.figure(figsize = (12,6))\n\nplt.bar(np.array(results.columns), height = results.loc['train'],)\nplt.xlabel('Personality types', size = 14)\nplt.ylabel('Number of posts available', size = 14)\nplt.title('Total posts for each personality type')","814bce2f":"labels = np.array(results.columns)\n\ntraining = results.loc['train']\nind = np.arange(4)\nwidth = 0.4\nfig = plt.figure()\nax = fig.add_subplot(111)\nrects1 = ax.bar(ind, training, width, color='royalblue')\n\ntesting = results.loc['test']\nrects2 = ax.bar(ind+width, testing, width, color='seagreen')\n\nfig.set_size_inches(12, 6)\nfig.savefig('Results.png', dpi=200)\n\nax.set_xlabel('Model Classifying Trait', size = 18)\nax.set_ylabel('Accuracy Percent (%)', size = 18)\nax.set_xticks(ind + width \/ 2)\nax.set_xticklabels(labels)\nax.legend((rects1[0], rects2[0]), ('Tested on a known dataframe', 'Tested on an unknown dataframe'))\nplt.show()","5a0f5261":"def MBTI(input):\n    tokenize = build_bag_of_words_features_filtered(input)\n    ie = IntroExtro.classify(tokenize)\n    Is = IntuitionSensing.classify(tokenize)\n    tf = ThinkingFeeling.classify(tokenize)\n    jp = JudgingPercieiving.classify(tokenize)\n    \n    mbt = ''\n    \n    if(ie == 'introvert'):\n        mbt+='I'\n    if(ie == 'extrovert'):\n        mbt+='E'\n    if(Is == 'Intuition'):\n        mbt+='N'\n    if(Is == 'Sensing'):\n        mbt+='S'\n    if(tf == 'Thinking'):\n        mbt+='T'\n    if(tf == 'Feeling'):\n        mbt+='F'\n    if(jp == 'Judging'):\n        mbt+='J'\n    if(jp == 'Percieving'):\n        mbt+='P'\n    return(mbt)\n    ","a481cae4":"def tellmemyMBTI(input, name, traasits=[]):\n    a = []\n    trait1 = pd.DataFrame([0,0,0,0],['I','N','T','J'],['count'])\n    trait2 = pd.DataFrame([0,0,0,0],['E','S','F','P'],['count'])\n    for i in input:\n        a += [MBTI(i)]\n    for i in a:\n        for j in ['I','N','T','J']:\n            if(j in i):\n                trait1.loc[j]+=1                \n        for j in ['E','S','F','P']:\n            if(j in i):\n                trait2.loc[j]+=1 \n    trait1 = trait1.T\n    trait1 = trait1*100\/len(input)\n    trait2 = trait2.T\n    trait2 = trait2*100\/len(input)\n    \n    \n    #Finding the personality\n    YourTrait = ''\n    for i,j in zip(trait1,trait2):\n        temp = max(trait1[i][0],trait2[j][0])\n        if(trait1[i][0]==temp):\n            YourTrait += i  \n        if(trait2[j][0]==temp):\n            YourTrait += j\n    traasits +=[YourTrait] \n    \n    #Plotting\n    \n    labels = np.array(results.columns)\n\n    intj = trait1.loc['count']\n    ind = np.arange(4)\n    width = 0.4\n    fig = plt.figure()\n    ax = fig.add_subplot(111)\n    rects1 = ax.bar(ind, intj, width, color='royalblue')\n\n    esfp = trait2.loc['count']\n    rects2 = ax.bar(ind+width, esfp, width, color='seagreen')\n\n    fig.set_size_inches(10, 7)\n    \n    \n\n    ax.set_xlabel('Finding the MBTI Trait', size = 18)\n    ax.set_ylabel('Trait Percent (%)', size = 18)\n    ax.set_xticks(ind + width \/ 2)\n    ax.set_xticklabels(labels)\n    ax.set_yticks(np.arange(0,105, step= 10))\n    ax.set_title('Your Personality is '+YourTrait,size = 20)\n    plt.grid(True)\n    \n    \n    fig.savefig(name+'.png', dpi=200)\n    \n    plt.show()\n    return(traasits)\n        ","5dd34bc1":"Testing the model on the test dataset which it has never seen before","ba173389":"Finding the unique vales from type of personality column","eb5b88d5":"Training the model","8b418e6d":"A random check of the function","53e46166":"# The model performs at efficieny of only 10% which is pretty bad.\n\n## Hence, instead of selecting all 16 types of personalitys as a unique feature I explored the dataset further and decided to simplify it.\n\nThe Myers Briggs Type Indicator (or MBTI for short) is a personality type system that divides everyone into 16 distinct personality types across 4 axis:\n\n- Introversion (I) \u2013 Extroversion (E)\n- Intuition (N) \u2013 Sensing (S)\n- Thinking (T) \u2013 Feeling (F)\n- Judging (J) \u2013 Perceiving (P)\n<br><br>\nWe will use this and create 4 classifyers to classify the person ","93ae0d80":"Training the model","c8235eef":"Creating the test data","36911804":"## Creating a classifyer for Judging (J) and Percieving (P)","c829ac44":"1. # MBTI Personality Classifier\n\nThis programme will classify people into mbti personality types based on their past 50 posts on social media using the basic naivebayesclassifier","2231e914":"Seeing that this model has good somewhat good results, I shall repeat the same with the rest of the traits","6cc13cd0":"Testing the model on the dataset it was trained for accuracy","723bbb0a":"Creating the test data","b801dbce":"My_writings = open(\"..\/input\/My Social media status(from quora)\/Myquora.txt\")\nmy_writing = My_writings.readlines()\n#my_writing","d7412e4f":"## Exploring the dataset","479638b0":"## Organising the data to create a bag words model","f8667c4f":"Testing the model on the test dataset which it has never seen before","c659c79a":"Data for training","4f52a797":"Data for training","995a5401":"Because each number of personality types have different number of posts they must be splitted accordingle. Taking 80% for training and 20% for testing","da766f69":"Creating the test data","1e9e38a5":"The total number of posts for each type","a6246809":"Testing the model on the test dataset which it has never seen before","78f73a39":"### Building another functions that takes all of my posts as input and outputs the graph showing percentage of each trait seen in each posts and sums up displaying your personality as the graph title\n\n**Note:** The input should be an array of your posts","0c044814":"### Importing the dataset ","75559972":"### Checking the dataset for missing values","21e63fcf":"Testing the model on the dataset it was trained for accuracy","fbcf6410":"Defining a functions that inputs the writings, tokenizes them and then predicts the output based on our earlier classifiers","2c303814":"Testing the model on the dataset it was trained for accuracy","e190c732":"Segrating all the posts by their personality types and ***creating a new dataframe to store all this in***","e393d194":"Creating the test data","9162902a":"Data for training","f74b718d":"my_posts = my_writing[0].split('|||')\nlen(my_posts)\n#my_posts","cb1beb78":"Testing the model on the test dataset which it has never seen before","f751304f":"# Summarizing the results of the models\n***\n","20744fd6":"Training the model","51483636":"The size of the dataset","a289d83b":"# Using the classifier to predict my personality type","a931b710":"# Concluding note\n\nMy profile according to https:\/\/www.16personalities.com\/ is INTJ.\n\nI am pretty happy that using such a basic model it was pretty close to my real profile, only 1 different. And even that difference was very close, between 10% inaccuary which pretty good.\n\nAlthough, I am not sure how the classifier will perform on all test cases in general. Specially, the data for some profiles was very less.","d3e18993":"Data for training","cc8b8098":"### Creating a function to tokenize the words","e94ddaa2":"# Testing the models to predict my trait my feeding few of my quora writings\n\nlink to my quora answers feed: https:\/\/www.quora.com\/profile\/Divya-Bramhecha","8fd18db7":"# Importing my quora answers from a text file\n\nI copied all my answer from the link i provided before (i broke down the paragraphs as separte posts)","82964710":"## Creating a classifyer for Intuition (N) and Sensing (S)","b877cd9b":"Training the model","9a1da400":"Graphing it for better visualization","7647c214":"Explroing the posts in posts field","b84ed9b6":"trait=tellmemyMBTI(my_posts, 'Divy')\n","c7a1697d":"Finding the number of posts","a1c74999":"## Creating an array of features","b30b184f":"Creating the test data","a2e5bf5d":"Training the model","545717c6":"## Creating a classifyer for Thinking (T) and Feeling (F)","e481786f":"## Creating a classifyer for Introversion (I) and Extroversion (E)\n\n**Note:** The details for the steps over here are same as the ones while creating the model above, hence I will only explain the changes","dae093cd":"Testing the model on the dataset it was trained for accuracy","9a51aa32":"Testing the model on the dataset it was trained for accuracy","566a90ee":"Plotting the results for better appeal","c512997a":"Data for training","cca8b10c":"Testing the model on the test dataset which it has never seen before"}}