{"cell_type":{"36dfd7e7":"code","3df54b46":"code","3194f546":"code","f39ebdbf":"code","3f46fe8c":"code","42300d6f":"code","7b5457a6":"code","4035e549":"code","247255f7":"markdown","4f03ec50":"markdown","9abf6425":"markdown","42ac1daa":"markdown","162b30ec":"markdown","446ffa30":"markdown","bb37f03e":"markdown","652d83f1":"markdown","e2fc5535":"markdown","fd9c9aba":"markdown","a613875d":"markdown"},"source":{"36dfd7e7":"# Import Library.\nimport numpy as np\nimport pydicom\nfrom pydicom.pixel_data_handlers.util import apply_voi_lut\n\nimport matplotlib.pyplot as plt\n%matplotlib inline","3df54b46":"# Let read one Image\ndicom_image = '..\/input\/vinbigdata-chest-xray-abnormalities-detection\/train\/00053190460d56c53cc3e57321387478.dicom'","3194f546":"# Read the file\ndicom = pydicom.read_file(dicom_image)\ndicom","f39ebdbf":"data_voi = apply_voi_lut(dicom.pixel_array, dicom)\ndata_voi","3f46fe8c":"data = dicom.pixel_array\ndata","42300d6f":"dicom.PhotometricInterpretation","7b5457a6":"data_voi = data_voi - np.min(data_voi)\ndata_voi = data_voi \/ np.max(data_voi)\ndata_voi = (data_voi * 255).astype(np.uint8)\ndata_voi","4035e549":"plt.figure(figsize = (12,12))\nplt.imshow(data_voi, 'gray')","247255f7":"# Convert the dicom images to numpy array\n\n* Python has a library called `pydicom` which is is a pure python package for parsing DICOM files. https:\/\/pypi.org\/project\/pydicom\/0.9.7\/ \n","4f03ec50":"# What is a DICOM Image File?\nA DICOM image file is an outcome of the Digital Imaging and Communications in Medicine standard.\n\nA DICOM image file is an outcome of the Digital Imaging and Communications in Medicine standard. Specifically, image files that are compliant with part 10 of the DICOM standard are generally referred to as \u201cDICOM format files\u201d or simply \u201cDICOM files\u201d and are represented as \u201c.dcm.\u201d\n\n> **DICOM differs from other image formats in that it groups information into data sets. A DICOM file consists of a header and image data sets, all packed into a single file.**\n\nThese data are stored as a long series of 0s and 1s, which can be reconstructed as the image by using the information from the header.\n\nThe DICOM medical file of a single patient consists of multiple images, all of which are of high resolution. Therefore, the file size can be quite large (for instance, a single CT scan can run up to 35 MB).","9abf6425":"# How can I Convert DICOM Images into Other File Formats?\nConversion of DICOM images into other formats is most often performed at a diagnostic workstation or at a Web client of a PACS system. Most of these systems have an \u201cexport\u201d function that enables the operator to save the image displayed in the active window as a JPEG or TIFF file. While some applications permit export of a batch of DICOM images into other formats, most require repeated operations, converting one image at a time.\n\nSeveral image management software packages that permit easy screen capture (such as IrfanView and XnView) are available for free download. \n\n","42ac1daa":"Now lets apply the method `apply_voi_lut` available in pydicom package.\n\nApply a VOI lookup table or windowing operation to arr.\n\nhttps:\/\/pydicom.github.io\/pydicom\/dev\/reference\/generated\/pydicom.pixel_data_handlers.apply_voi_lut.html \n\nThere are other method and depending on the dataset type you may need to use `apply_modality_lut()` beforehand (When the dataset requires a modality LUT or rescale operation as part of the Modality LUT module then that must be applied before any windowing operation).","162b30ec":"Happy learning...","446ffa30":"# What is DICOM?\nDICOM stands for **D**igital **I**maging and **Co**mmunications in **M**edicine.\n\nDICOM is a clinical messaging syntax used to exchange medical images between medical equipment and information systems.\n\n# Purpose \nAs per Wikipedia... DICOM is most commonly used for storing and transmitting medical images enabling the integration of medical imaging devices such as scanners, servers, workstations, printers, network hardware, and **P**icture **A**rchiving and **C**ommunication **S**ystems (PACS) from multiple manufacturers.\n\nToday, DICOM is used worldwide to store, exchange and transmit medical images, enabling the integration of medical imaging devices from multiple manufacturers. Patient data and related images are exchanged and stored in a standardized format.\n\n# Is DICOM secure?\nDicom system offers encryption for all outgoing and incoming traffic. Secure DICOM communication according to Supplement 31, based on the Transport Layer Security (TLS) protocol standard.\n\nRefer https:\/\/dcmsys.com\/project\/dicom-encryption-anonymization\/ for ful details.","bb37f03e":"# Other Image file format\n\n![image.png](attachment:image.png)","652d83f1":"## Photometric Interpretation Attribute\nSpecifies the intended interpretation of the pixel data.\n\nhttps:\/\/dicom.innolitics.com\/ciods\/vl-endoscopic-image\/vl-image\/00280004\n\nEnumerated Values:\n\n* MONOCHROME2\n* RGB\n* YBR_FULL_422\n* YBR_PARTIAL_420\n* YBR_RCT\n* YBR_ICT","e2fc5535":"# DICOM\nThis is just a basic understaing on DICOM, as I feel before working on any dataset we should have a basic understanding on the data source, data format and the features. With this atleast one could start digging into more to get better understanding.\n\nDICOM format is a new term for me, so tried getting more and more information. Thus wanted to share the information with you all. Please correct me if I miss any important aspect here.\n\nAgain the notebook is just to explore on DICOM. **We will also see how to convert the dicom to numpy array so that we as a ML Engineer \/ Data Science work on the dataset.**","fd9c9aba":"# Visualize","a613875d":"# References\nhttps:\/\/people.cas.sc.edu\/rorden\/dicom\/index.html\n\nhttps:\/\/dcmsys.com\/project\/dicom-encryption-anonymization\/\n\nhttps:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC3354356\/\n\nhttps:\/\/www.neologica.it\/eng\/tutorial\/tutorialdicom\n\nhttps:\/\/pypi.org\/project\/pydicom\/0.9.7\/\n\nhttps:\/\/stackoverflow.com\/questions\/60219622\/python-convert-dcm-to-png-images-are-too-bright\/60220507#60220507\n\nhttps:\/\/dicom.innolitics.com\/ciods\/vl-endoscopic-image\/vl-image\/00280004\n"}}