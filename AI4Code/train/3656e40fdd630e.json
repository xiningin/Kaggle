{"cell_type":{"24e38f5d":"code","de05230c":"code","23f57006":"code","db7f94dd":"code","84da7a4d":"code","a4638585":"code","c646700d":"code","32991125":"code","9424adeb":"code","429b27ec":"code","8b0f06f5":"code","fd327d8e":"code","8276ce8a":"code","e8fc389b":"code","68778d08":"code","03a0b597":"markdown","795c9fff":"markdown","39affc27":"markdown","b4f62f3c":"markdown","f694e7ac":"markdown","dbdd9e63":"markdown","a8885a4a":"markdown","03be90de":"markdown","ebed9380":"markdown","fce36d8c":"markdown","41c88d48":"markdown","ab9e5732":"markdown","acc9dc47":"markdown","d57c5a6b":"markdown","b4ee155a":"markdown","9830a0ab":"markdown","9eb4bb6c":"markdown","1d45afb6":"markdown","dd7e381a":"markdown","61b099d6":"markdown","3c70bfa5":"markdown","7bc7f314":"markdown","a638ec54":"markdown"},"source":{"24e38f5d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nfrom matplotlib import pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n        \n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","de05230c":"data=pd.read_csv(\"\/kaggle\/input\/omicron-covid19-variant-daily-cases\/covid-variants.csv\")","23f57006":"data.head()","db7f94dd":"data[\"variant\"].unique()","84da7a4d":"data=data[data[\"variant\"]!=\"non_who\"]","a4638585":"selection_zip=list(zip(data['location'],data['date']))\nc=-1\nold=\"\"\nselection_col=[]\nfor x in selection_zip:\n    if (x!=old):\n        old=x\n        c+=1\n    selection_col.append(c)\ndata[\"selection_col\"]=selection_col","c646700d":"omicron=data[data[\"variant\"]==\"Omicron\"]\ndelta=data[data[\"variant\"]==\"Delta\"]\nothers=data[(data[\"variant\"]!=\"Delta\") & (data[\"variant\"]!=\"Omicron\")]","32991125":"omicron_global=omicron.groupby(\"date\").sum()\nomicron_global[\"date\"]=omicron_global.index\nomicron_global=omicron_global[omicron_global[\"num_sequences\"]>0]\n\ndelta_global=delta.groupby(\"date\").sum()\ndelta_global[\"date\"]=delta_global.index\ndelta_global=delta_global[delta_global[\"perc_sequences\"]>0]\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_global[\"date\"],y=omicron_global[\"num_sequences\"],mode='lines',line_width=5,name=\"Omicron num_sequences\"))\nfig.add_trace(go.Scatter(x=delta_global[\"date\"],y=delta_global[\"num_sequences\"],mode='lines',line_width=5,name=\"Delta num_sequences\"))\nfig.update_layout(title='Global log num_sequences for each date')\nfig.show()","9424adeb":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_global['date'],y=np.log1p(omicron_global[\"num_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Omicron num_sequences logaritm\"))\nfig.add_trace(go.Scatter(x=delta_global['date'],y=np.log1p(delta_global[\"num_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Delta num_sequences  logaritm\"))\nfig.update_layout(title='Global num_sequences logarithm for each data')\nfig.show()","429b27ec":"ax=data.groupby(\"date\").sum().plot.bar(y=\"num_sequences_total\",figsize=(25,5), fontsize=15,legend=False)\ntitle=plt.suptitle(\"Global total sequences for each date\",fontsize=20)","8b0f06f5":"#we filter only the countries that did a reasonable number of sequences\nomicron_top=omicron[omicron[\"num_sequences_total\"]>=300]\nfor country in np.unique(omicron_top[\"location\"]):\n    tmp=omicron_top[omicron_top[\"location\"]==country]\n    latest=tmp.iloc[-1]\n    if (latest[\"date\"]>=\"2021-12-27\"):\n        omicron_top=omicron_top.drop((tmp[tmp[\"date\"]<latest[\"date\"]].index))\n        continue\n    omicron_top=omicron_top.drop((tmp.index))\nomicron_top=omicron_top.sort_values(\"perc_sequences\",ascending=True)\n\n\n#now we filter the delta dataset using the columns we inserted before.\nindexes=[delta[delta[\"selection_col\"]==x] for x in omicron_top[\"selection_col\"]]\ndelta_top=pd.DataFrame(np.array(indexes).reshape(omicron_top.shape[0],7),columns=delta.columns)\n\n\ny=np.arange(omicron_top.shape[0])\n\nfig, axes = plt.subplots(ncols=2, sharey=True,figsize=(25, 15))\naxes[0].barh(y, omicron_top[\"perc_sequences\"], align='center', color='mediumturquoise', zorder=10)\naxes[0].set_title('Omicron sequences (%)',fontsize=30)\naxes[1].barh(y, delta_top[\"perc_sequences\"], align='center', color='orange', zorder=10)\naxes[1].set_title('Delta sequences (%)',fontsize=30)\n\n\naxes[0].invert_xaxis()\naxes[0].tick_params(axis=\"both\", labelsize=25)\naxes[0].set(yticks=y, yticklabels=omicron_top[\"location\"])\naxes[1].tick_params(axis=\"both\", labelsize=25)\naxes[0].axvline(0,zorder=10,linewidth=5,color='black')\nfor ax in axes.flat:\n    ax.margins(0.03)\n    ax.grid(True)\n\nfig.tight_layout()\nfig.subplots_adjust(wspace=0)\nplt.show()\n","fd327d8e":"omicron_sa=omicron[omicron[\"location\"]==\"South Africa\"]\nomicron_sa=omicron_sa[omicron_sa['perc_sequences']>0]\n\ndelta_sa=delta[delta[\"location\"]==\"South Africa\"]\nfilter_dates=np.where(delta_sa['perc_sequences']==0)[0]\ndelta_sa=delta_sa[delta_sa['date']>=delta_sa['date'].iloc[filter_dates[-3]]]\n\n\nothers_sa=others[others['location']=='South Africa'].groupby(['date']).sum()\ncomm=np.unique(np.hstack((delta_sa['date'],omicron_sa['date'])))\nothers_sa=others_sa[others_sa.apply(lambda x: x.name in comm, axis=1)]\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_sa['date'],y=omicron_sa[\"perc_sequences\"],mode='lines',line_width=5,name=\"Omicron perc_sequences\"))\nfig.add_trace(go.Scatter(x=delta_sa['date'],y=delta_sa[\"perc_sequences\"],mode='lines',line_width=5,name=\"Delta perc_sequences\"))\nfig.add_trace(go.Scatter(x=others_sa.index,y=others_sa[\"perc_sequences\"],mode='lines',line_width=5,name=\"Other perc_sequences\"))\nfig.update_layout(title=\"South Africa's perc_sequences of variants for each date\")\nfig.show()","8276ce8a":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_sa['date'],y=np.log1p(omicron_sa[\"perc_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Omicron perc_sequences logarithm\"))\nfig.add_trace(go.Scatter(x=delta_sa['date'],y=np.log1p(delta_sa[\"perc_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Delta perc_sequences logarithm\"))\nfig.update_layout(title=\"South Africa's perc_sequences logarithm of variants for each date\")\nfig.show()","e8fc389b":"omicron_in=omicron[omicron[\"location\"]==\"India\"]\nomicron_in=omicron_in[omicron_in['perc_sequences']>0]\n\ndelta_in=delta[delta[\"location\"]==\"India\"]\ndelta_in=delta_in[delta_in['perc_sequences']>0]\n\n\nothers_in=others[others['location']=='India'].groupby(['date']).sum()\ncomm=np.unique(np.hstack((delta_in['date'],omicron_in['date'])))\nothers_in=others_in[others_in.apply(lambda x: x.name in comm, axis=1)]\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_in['date'],y=omicron_in[\"perc_sequences\"],mode='lines',line_width=5,name=\"Omicron perc_sequences\"))\nfig.add_trace(go.Scatter(x=delta_in['date'],y=delta_in[\"perc_sequences\"],mode='lines',line_width=5,name=\"Delta perc_sequences\"))\nfig.add_trace(go.Scatter(x=delta_in['date'],y=others_in[\"perc_sequences\"],mode='lines',line_width=5,name=\"Other perc_sequences\"))\nfig.update_layout(title=\"India's perc_sequences of variants for each date\")\nfig.show()","68778d08":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_in['date'],y=np.log1p(omicron_in[\"perc_sequences\"]),mode='lines+markers'\n                         ,line_width=5,marker_size=10,name=\"Omicron perc_sequences logarithm\"))\nfig.add_trace(go.Scatter(x=delta_in['date'],y=np.log1p(delta_in[\"perc_sequences\"]),mode='lines+markers'\n                         ,line_width=5,marker_size=10,name=\"Delta perc_sequences logarithm\"))\nfig.update_layout(title=\"India's perc_sequences logarithm of variants for each date\")\nfig.show()","03a0b597":"# Are there any differences in the diffusion of the variants in South Africa?","795c9fff":"Let's plot the logarithmic version of the previous plot.","39affc27":"From this plot it's clear that the omicron variant spreads faster than the delta variant: as we can se, the omicron curve is very likely to be exponential.\n\nAt the end of the plot we observe the same behaviour we noticed before.","b4f62f3c":"From the plot we can notice that:\n* The delta variant was being found in the last days of October, then it began slowly to spread.\n* The omega variant was being found one year later, then it began, faster than the delta variant, to spread.\n\nAt the end of the plot (end of 2021\/ begin of 2022) it's possible to observe that for both variants we have very low num_sequences: we will investigate this behaviour later.","f694e7ac":"It's hard to understand the meaning of the variant \"non_who\" so we will ignore it.","dbdd9e63":"In India the Oimcron variant is not spreaded yet but we can notice how is taking the place of the delta variant in the month of december.","a8885a4a":"Now we add a new column that will serve as an unique key for each row: this will be useful for filtering the data.","03be90de":"# Are there any differences in the diffusion of the variants in India?","ebed9380":"Its clear that, if we analyze a random sample it's very likely that we find either the delta or the omicron variant in those countries: howerver, it's still possible to find other variants (as we will see soon).","fce36d8c":"# Introduction\n\nIn this notebook we will analyze the data of the omicron and delta variant to understand the current situation of the countries and to find the differences between these two variants.","41c88d48":"# How many samples have been sequenced every date globally?","ab9e5732":"The omicron variant was first found in South Africa. Let's see some plots.","acc9dc47":"# According to the last trustable data, how much are widely diffused the delta and the omicron variants? ","d57c5a6b":"The last preprocessing step is to obtain the filtered dataset for the variants omicron and delta, while the rest of the variants will be contained in a third dataset.","b4ee155a":"The logarithmic version of the previous plot confirms the fact that the omicron variant is far more contagious than the delta one: the delta variant had a slow and \"unsure\" grow, meanwhile the omicron variant had a very fast and brave grow.","9830a0ab":"The delta variant, from May 2021 and September 2021, became the dominant variant. Instead, the omicron variant was able to be the most diffused variant just more than a month and two weeks!\n\nAt last we can also assert that other variants are still diffused: in the 2021\/12\/27 6.17% of the samples belonged to other variants.","9eb4bb6c":"# Data reading and preprocessing","1d45afb6":"This plot it's very similar to the one of South Africa and the observations we did before are still possible for India.","dd7e381a":"**Thank you for reading this notebook and please upvote if you appreciated the work!**\n\n**Leave a comment if you have any question or if you want to advice me some of your works!**","61b099d6":"<h1 style='background:#b4edcf; border:0; color:black'><center>Omicron vs Delta<\/center><\/h1> ","3c70bfa5":"India is also an interesting country because it's where the delta variant was first found.","7bc7f314":"For each year, we can assert that:\n* In the year 2020 the countries started to analyze the viruses (as the pandemic started in this year), so for each date we have very low sequences.\n* In the year 2021 the countries put more efforts, in fact in the second semester they more than doubled the sequenced for each date they did in respect to the first semester.\n\nHowever, in the date 2021\/12\/27 we can notice that the total number of sequence is half than the usual number the countries were able to reach in the last months, meanwhile the lowest peak, in this plot, is reached at the date 2022\/01\/05.\n\nMy interpretation for this behaviour is that the countries did less analysis because of Christmas holidays and\/or the data is incomplete (for example, most of the countries didn't provide their latest data).","a638ec54":"# How many omicron and delta variants have been sequenced for each date globally?"}}