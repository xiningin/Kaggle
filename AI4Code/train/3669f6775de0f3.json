{"cell_type":{"b9f72441":"code","83cee7a9":"code","a13b514b":"code","76066a6d":"code","a24e8f7d":"code","910d4008":"code","9b9f216d":"code","19da0826":"code","28abacb9":"code","836f9127":"code","6f37f037":"code","4d28ce5a":"code","228375ff":"code","1c9720b0":"code","a5d174e0":"code","64e7d58b":"code","3668dbaf":"code","ee46cb5e":"markdown","717d6a09":"markdown","3d9ef38e":"markdown","cf188065":"markdown","fa5534c6":"markdown","7458b222":"markdown","0fc5820c":"markdown","1cda1c96":"markdown","d7edb5f0":"markdown","3f1a5470":"markdown","932ba711":"markdown","e2e51864":"markdown","c0e0cbfd":"markdown","afc35e53":"markdown","3ac2e80f":"markdown","c8390a53":"markdown","dc4eaf47":"markdown","b2ab28fd":"markdown","d7385a80":"markdown","a4a0558a":"markdown","fb338316":"markdown","4350c640":"markdown","97a6bb8d":"markdown","b7aa2239":"markdown","513ef7bb":"markdown","1fb2f8c5":"markdown"},"source":{"b9f72441":"import numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n!pip install openpyxl\nimport pandas as pd\nfrom datetime import datetime\nfrom sklearn.preprocessing import MinMaxScaler\nimport statsmodels.api as sm\nfrom statsmodels.graphics import tsaplots\nfrom scipy.stats import wilcoxon\n!pip install mplfinance\nimport mplfinance as fplt\nimport plotly.express as px\nfrom sklearn.cluster import DBSCAN\nfrom sklearn.neighbors import NearestNeighbors","83cee7a9":"BTC_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/btcusd.csv')\nETH_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/ethusd.csv')\nUSDT_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/ustusd.csv')\nSOL_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/solusd.csv')\nADA_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/adausd.csv')\nXRP_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/xrpusd.csv')\nLUNA_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/luna-usd.csv')\nDOT_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/dotusd.csv')\nAVAX_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/avax-usd.csv')\nDOGE_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/doge-usd.csv')","a13b514b":"def date(df):\n    df['Date']= pd.to_datetime(df['Date'])\n    return df\n\nBTC_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/BTC-EUR.csv'))\nETH_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/ETH-EUR.csv'))\nUSDT_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/USDT-EUR.csv'))\nUSDC_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/USDC-EUR.csv'))\nADA_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/ADA-EUR.csv'))\nXRP_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/XRP-EUR.csv'))\nBNB_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/BNB-EUR.csv'))\nDOGE_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/DOGE-EUR.csv'))\nTOTAL_simple = date(pd.read_excel('..\/input\/top-8-crypto-currency-data\/TOTAL.xlsx')).set_index('Date')","76066a6d":"scale = MinMaxScaler()\nplt.figure(figsize=(28,12))\nplt.plot( BTC_EUR_simple.Date, scale.fit_transform(BTC_EUR_simple.Open.array.reshape(-1, 1)))\nplt.plot( ETH_EUR_simple.Date, scale.fit_transform(ETH_EUR_simple.Open.array.reshape(-1, 1)))\nplt.title('Figure 1: Bitcoin and Ethereum performance', size=15)\nplt.show()","a24e8f7d":"def returns_list(l):   \n    ret = [((b - a) \/ a)*100 for a, b in zip(l[::1], l[1::1])]\n    return ret\n#sm.tsa.acf(BTC_EUR_simple_returns)","910d4008":"curr_fig, curr_ax = plt.subplots(figsize=(28, 8))\ntsaplots.plot_acf(returns_list(BTC_EUR_simple.Open), lags=100, color='g', ax=curr_ax, zero = False)\nplt.title('Figure 2: Autocorrelation Bitcoin Lag = 100', size=15)\nplt.show()\ncurr_fig, curr_ax = plt.subplots(figsize=(28, 8))\nfig = tsaplots.plot_acf(returns_list(ETH_EUR_simple.Open), lags=100, color='r', ax=curr_ax, zero = False)\nplt.title('Figure 3: Autocorrelation Ethereum Lag = 100', size=15)\nplt.show()","9b9f216d":"print(wilcoxon(returns_list(BTC_EUR_simple.Open), zero_method = 'wilcox',correction = False))\nprint(wilcoxon(returns_list(ETH_EUR_simple.Open), zero_method = 'wilcox',correction = False))","19da0826":"BTC_USD_min_2 = BTC_USD[(BTC_USD['time']\/1000>1435701600) & (BTC_USD['time']\/1000<1451516400)].reset_index(drop = True)\nBTC_USD_min_2['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_2.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_2))]","28abacb9":"plt.figure(figsize=(28,12))\nplt.plot(BTC_USD_min_2.time, scale.fit_transform(BTC_USD_min_2.open.array.reshape(-1, 1)))\nplt.axvline(x = datetime(2015,8,1), color = 'red')\nplt.axvspan(datetime(2015,7,29), datetime(2015,8,4), alpha=0.2, color='red')\nplt.axvline(x = datetime(2015,8,15), color = 'red')\nplt.axvspan(datetime(2015,8,12), datetime(2015,8,18), alpha=0.2, color='red')\nplt.axvline(x = datetime(2015,9,28), color = 'g')\nplt.axvspan(datetime(2015,9,25), datetime(2015,10,1), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,8), color = 'g')\nplt.axvspan(datetime(2015,10,5), datetime(2015,10,11), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,22), color = 'g')\nplt.axvspan(datetime(2015,10,19), datetime(2015,10,25), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,28), datetime(2015,11,3), alpha=0.2, color='g')\nplt.title('Figure 4: Positive and negative news from the second half of 2015.', size=15)\nplt.show()","836f9127":"BTC_USD_min_30_pos = BTC_USD_min_2[(BTC_USD_min_2['time']>datetime(2015,9,30)) & (BTC_USD_min_2['time']<datetime(2015,11,30))].reset_index(drop = True)\nBTC_USD_min_30_neg = BTC_USD_min_2[(BTC_USD_min_2['time']>datetime(2015,7,15)) & (BTC_USD_min_2['time']<datetime(2015,9,15))].reset_index(drop = True)\nBTC_EUR_day_30_pos = BTC_EUR_simple[(BTC_EUR_simple['Date']>datetime(2015,9,30)) & (BTC_EUR_simple['Date']<datetime(2015,11,30))].reset_index(drop = True)\nBTC_EUR_day_30_neg = BTC_EUR_simple[(BTC_EUR_simple['Date']>datetime(2015,7,15)) & (BTC_EUR_simple['Date']<datetime(2015,9,15))].reset_index(drop = True)\n\nplt.figure(figsize=(28,20))\nplt.subplot(321)\nplt.plot(BTC_EUR_day_30_pos.Date, BTC_EUR_day_30_pos.Open, 'ok-', markersize=4)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.title('Figure 5: Market impact of the publication in The Economist.', size=15)\nplt.ylabel('Price')\n\nplt.subplot(322)\nplt.plot(BTC_EUR_day_30_neg.Date, BTC_EUR_day_30_neg.Open, 'ok-', markersize=4)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\nplt.title('Figure 6: Effect of the August Fork on the market.', size=15)\n\nplt.subplot(323)\nplt.plot(BTC_USD_min_30_pos.time, BTC_USD_min_30_pos.open, 'ok', markersize=.1)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.ylabel('Minute Price')\n\nplt.subplot(324)\nplt.plot(BTC_USD_min_30_neg.time, BTC_USD_min_30_neg.open, 'ok', markersize=.1)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\n\nplt.subplot(325)\nplt.plot(BTC_USD_min_30_pos.time, BTC_USD_min_30_pos.volume, 'ok', markersize=.2)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.ylabel('Minute Volume')\n\nplt.subplot(326)\nplt.plot(BTC_USD_min_30_neg.time, BTC_USD_min_30_neg.volume, 'ok', markersize=.2)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\nplt.show()","6f37f037":"BTC_USD_min_FC = BTC_USD[(BTC_USD['time']\/1000>1556661600) & (BTC_USD['time']\/1000<1559167200)].reset_index(drop = True)\nBTC_USD_min_FC['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_FC.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_FC))]\nplt.figure(figsize=(28,12))\nplt.plot(BTC_USD_min_FC.time, BTC_USD_min_FC.open)\nBTC_USD_min_FC = BTC_USD_min_FC.set_index('time')\nplt.axvline(x = datetime(2019,5,4,6,41), color = 'k', alpha=0.2)\nplt.axvspan(datetime(2019,5,3), datetime(2019,5,5), alpha=0.2, color='k')\nplt.title('Figure 7: Bitcoin Performance May 2019', size=15)\nplt.show()","4d28ce5a":"BTC_USD_min_FC = BTC_USD[(BTC_USD['time']\/1000>1557975600) & (BTC_USD['time']\/1000<1557986400)].reset_index(drop = True)\nBTC_USD_min_FC['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_FC.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_FC))]\nBTC_USD_min_FC = BTC_USD_min_FC.set_index('time')\nfplt.plot(\n    BTC_USD_min_FC,\n    type='candle',\n    style='charles',\n    title='Figure 8: BTC Flash Crash, 16 May - 2019',\n    figratio=(28,12),\n    ylabel='Price ($)',\n    volume=True\n            )","228375ff":"from sklearn.decomposition import PCA\nfrom sklearn.preprocessing import StandardScaler\n\nTOTAL_simple_scaled = StandardScaler().fit_transform(TOTAL_simple.dropna())\nPCA = PCA()\npca = PCA.fit(TOTAL_simple_scaled)\nsummary = pd.DataFrame({'Variance' : pca.explained_variance_ratio_,\n                          'VarianceCum' : pca.explained_variance_ratio_.cumsum(),\n                          'Eigenvalue' : pca.explained_variance_,\n                          'PC' : np.arange(1, len(pca.explained_variance_ratio_)+1)})\n\nplt.figure(num = 3, figsize=(20,10))\n\nplt.subplot(211)\nplt.bar(data = summary,\n         height = 'Variance', x = 'PC', color=\"steelblue\")\nsns.lineplot(data = summary,\n         y = 'VarianceCum', x = 'PC', color=\"red\")\nfor i, v in enumerate(round(summary.VarianceCum,3)):\n    plt.text(summary.PC.tolist()[i], v+0.01, str(v), ha='right', \n             fontsize=12, color = 'red')\nplt.title('Figure 9: Variance and Cumulative Variance of each PC', size=15)\n\nplt.subplot(212)\nplt.figure(num = 3, figsize=(20,10))\nplt.bar(data = summary,\n         height = 'Eigenvalue', x = 'PC', color=\"steelblue\")\nfor i, v in enumerate(round(summary.Eigenvalue,1)):\n    plt.text(summary.PC.tolist()[i], v+0.01, str(v), ha='center', \n             fontsize=12, color = 'black')\nplt.title('Figure 10: Eigenvalues of each PC', size=15)\nplt.show()","1c9720b0":"pcs = pca.components_\nnormalized_pcs = list()\n\nfor eigen_vector in pcs:\n  normalized_values = eigen_vector\/eigen_vector.sum()\n  normalized_pcs.append(normalized_values)\n    \ncompA = [(TOTAL_simple[x]*y) for x, y in zip(TOTAL_simple.columns.tolist(), normalized_pcs[0])]\n\ndf = pd.concat(compA, axis=1, keys=[s.name for s in compA])\ndf['PC1']= df.iloc[:,:].sum(axis=1)\n\nplt.figure(figsize=(20,9))\nsns.lineplot(data = df.dropna(), x = df.dropna().index, y = 'PC1')\nplt.title('Figure 11: Market portfolio performance (PC1)', size=15)\nplt.show()","a5d174e0":"plt.figure(figsize=(20,9))\nplt.stackplot(df.index,df.BTC_EUR, df.ETH_EUR,df.USDT_EUR, df.BNB_EUR, df.USDC_EUR, df.ADA_EUR, df.XRP_EUR, df.DOGE_EUR, labels=df.columns.tolist())\nplt.legend(loc='upper left')\nplt.title('Figure 12: Market portfolio composition', size=15)\nplt.show()","64e7d58b":"correlation = df.loc[:, df.columns]\ncorr_matrix_p = correlation.select_dtypes(include = ['int', 'float']).corr(method = 'pearson')\n\nmask_p = np.zeros_like(corr_matrix_p)\nmask_p[np.triu_indices_from(mask_p)]=True\n\nplt.figure(num = 3, figsize=(13,10))\nsns.heatmap(corr_matrix_p, annot=True, annot_kws={\"size\": 10}, mask = mask_p)\nplt.title('Figure 13: Correlation Cryptocurrencies - Market ', size=15)\nplt.show()","3668dbaf":"projected = PCA.fit_transform(TOTAL_simple_scaled.T)\n\nclustering = DBSCAN(eps=15).fit(TOTAL_simple_scaled.T)\ny_pred_x = clustering.fit_predict(TOTAL_simple_scaled.T)\n\nfig = px.scatter_3d(x = projected[:,0], y = projected[:,1], z = projected[:,2], title = 'Figure 14: Cryptocurrency clustering', hover_name = TOTAL_simple.columns.tolist(), color = y_pred_x)\nfig.show()","ee46cb5e":"Como se puede observar en la l\u00ednea de correlaciones de las diferentes criptodivisas con la cartera de mercado o Componente Principal 1, **el Bitcoin tiene una correlaci\u00f3n igual a 1, por lo que el mercado se comporta igual que el Bitcoin o lo que es lo mismo, que el rendimiento del mercado de criptodivisas se basa en el rendimiento del Bitcoin. Por lo tanto, el an\u00e1lisis que hemos hecho en la primera parte de esta publicaci\u00f3n sobre la eficiencia del mercado de Bitcoin puede aplicarse al mercado de criptodivisas en general, ya que su rendimiento es el mismo.**\n\nPor otro lado, **hay un grupo de criptodivisas que est\u00e1n altamente correlacionadas con la cartera del mercado, como Ethereum Binance Cardano o XRP.** Sin embargo, otras criptodivisas, como **USDT o USDC, no tienen una correlaci\u00f3n tan alta con el mercado y, por lo tanto, su rendimiento se puede explicar por razones diferentes a las del rendimiento de Bitcoin (En realidad, estas dos criptomonedas son las unicas de la muestra que est\u00e1n vinculadas al comportamiento del dolar (tambi\u00e9n conocidas como stable coins), lo que explica que su rendimiento se diferencie del de aquellas criptomonedas m\u00e1s \"puras\"). ** DOGE coin queda fuera de este an\u00e1lisis ya que es una criptodivisa cuyo rendimiento es diferente y que est\u00e1 muy expuesta a la manipulaci\u00f3n por parte de los grandes tenedores de criptoactivos o de los foros de Internet.\n\nPara finalizar este an\u00e1lisis, me parece relevante realizar un **an\u00e1lisis de cl\u00fasteres para ver el grado de agrupaci\u00f3n de las criptodivisas, es decir, si los rendimientos de estas monedas pueden determinar si existe un grupo en el que muchas criptodivisas se comportan igual que el mercado y luego otros subgrupos o criptoactivos at\u00edpicos que se comportan de forma diferente utilizando el algoritmo DBSCAN.**","717d6a09":"Como podemos ver, tras realizar el An\u00e1lisis de Componentes Principales, **el primero de los componentes (o lo que es lo mismo, la cartera de mercado) explica el 76,3% de la informaci\u00f3n de nuestra base de datos, por lo que recoge gran parte de la informaci\u00f3n del mercado.** Seg\u00fan la definici\u00f3n del An\u00e1lisis de Componentes Principales, aquellas criptomonedas que mejor representen la evoluci\u00f3n del mercado estar\u00e1n altamente correlacionadas con esta primera componente principal, mientras que aquellos activos m\u00e1s residuales y cuya evoluci\u00f3n no est\u00e9 relacionada con la evoluci\u00f3n del mercado sino con otras variables o motivos, no estar\u00e1n correctamente representados y tendr\u00e1n una menor correlaci\u00f3n en la primera componente principal (aunque s\u00ed estar\u00e1n correctamente representados en la segunda componente principal).","3d9ef38e":"En este caso, **con un nivel de confianza muy superior al 99,99%, podemos rechazar la hip\u00f3tesis nula sobre el rendimiento de Bitcoin, y por tanto, la mediana de los rendimientos es igual a 0, con igual n\u00famero de rendimientos positivos y negativos.** As\u00ed, el mercado se comportar\u00eda como un paseo aleatorio y s\u00f3lo podr\u00eda ser derrotado por informaci\u00f3n p\u00fablica o privilegiada.\n\nEn el caso de Ethereum, podemos llegar a la misma conclusi\u00f3n, pero con un nivel de confianza menor (98,3%), que se explica por la existencia de autocorrelaci\u00f3n entre los rendimientos. Aun as\u00ed, **afirmamos que tiene una eficiencia d\u00e9bil.**","cf188065":"En primer lugar, creo la funci\u00f3n `returns_list()` que calcula los rendimientos de una lista de entrada (diaria o de minutos) y, a continuaci\u00f3n, utilizo la funci\u00f3n `plot_acf()` para obtener los gr\u00e1ficos de autocorrelaci\u00f3n para diferentes rezagos.\n\nPara analizar estos gr\u00e1ficos, debemos entender que **los valores dentro del \u00e1rea azul implican que, con un 95% de confianza, podemos rechazar la hip\u00f3tesis nula de que las dos series temporales (la original y la retrasada X d\u00edas) est\u00e1n correlacionadas**. El planteamiento de Fama (*Fama, 1970*) determina que **la relaci\u00f3n en la que debemos centrarnos es la existente entre la serie temporal de rendimientos y la serie de rendimientos diferidos de un d\u00eda**. (*Sin embargo, he calculado la autocorrelaci\u00f3n para hasta 100 rezagos*)","fa5534c6":"<font size=\"5\"> Andrei Shleifer y Eugene Fama <\/font> \n\nLa investigaci\u00f3n de *Shleifer, Professor of Economics Andrei (2000)* sobre las finanzas conductuales, determin\u00f3 que la **irracionalidad en la toma de decisiones de los inversores hace que el mercado sea ineficiente**. Esta irracionalidad de los inversores puede evidenciarse en hechos como **la creencia en las rachas** o la **baja pr\u00e1ctica de la diversificaci\u00f3n**, as\u00ed como en tratar de **comprender el mercado en su conjunto con s\u00f3lo unos pocos datos**. \n\nPara analizar el grado de eficiencia del mercado del Bitcoin, utilizar\u00e9 el estudio de ***Fama (1970)* sobre la Eficiencia de los Mercados Financieros** . En \u00e9l, Fama determina que **la eficiencia de un mercado viene determinada por el tipo de informaci\u00f3n que recoge el precio de los activos**. Para ello, primero debo dividir los 3 tipos de informaci\u00f3n que intervienen en el an\u00e1lisis de la eficiencia de un mercado: \n\n* **Informaci\u00f3n Hist\u00f3rica:** es aquella que ocurri\u00f3 en el pasado, se encuentra en bases de datos o publicaciones antiguas. \n\n* **Informaci\u00f3n P\u00fablica:** es la que est\u00e1 ocurriendo en este momento. Acaba de ser publicada y se convertir\u00e1 en hist\u00f3rica en poco tiempo.  \n\n* **Informaci\u00f3n Privilegiada:** Es la que est\u00e1 en manos de los gestores de fondos de inversi\u00f3n (en criptoactivos en este caso) y que la ley persigue. \n\nSeg\u00fan la **Hip\u00f3tesis de los Mercados Eficientes**, existen tres tipos de eficiencia en funci\u00f3n del tipo de informaci\u00f3n que recoge el precio de un activo en su actuaci\u00f3n en el mercado:\n\n* **Eficiencia d\u00e9bil:** Decimos que un mercado es d\u00e9bilmente eficiente cuando el precio del activo recoge informaci\u00f3n hist\u00f3rica sobre el rendimiento del mismo. De este modo, el mercado s\u00f3lo puede ser batido con informaci\u00f3n p\u00fablica o privilegiada. \n\n* **Eficiencia media:** Decimos que un mercado es medianamente eficiente cuando el precio del activo recoge informaci\u00f3n p\u00fablica. As\u00ed, el mercado s\u00f3lo puede ser batido con informaci\u00f3n privilegiada. \n\n* **Eficiencia fuerte:** Decimos que un mercado es eficiente fuerte cuando el precio del activo recoge toda la informaci\u00f3n disponible en el mercado. De este modo, el mercado no puede ser batido. \n\n *Cuando decimos que \"el mercado no puede ser batido\" nos referimos a que el mercado se comportar\u00e1 como un paseo aleatorio, y una rentabilidad superior a la media del mercado tiene la misma probabilidad de producirse tanto si se realiza una inversi\u00f3n totalmente supervisada como si se realiza una inversi\u00f3n aleatoria.* \n\n **En esta publicaci\u00f3n, practicar\u00e9 las diferentes pruebas para contrastar la hip\u00f3tesis de eficiencia del mercado de Bitcoin presentada por Fama en su investigaci\u00f3n (*Fama, 1970*). Para ello, se aplican una serie de an\u00e1lisis a diferentes niveles para desarrollar si existe la posibilidad de batir al mercado con informaci\u00f3n hist\u00f3rica, p\u00fablica o privilegiada, al no comportarse como un paseo aleatorio.** ","7458b222":"# <font size=\"6\"> Primer nivel: Eficiencia D\u00e9bil  <\/font> \n\nComo ya he mencionado, **un mercado d\u00e9bilmente eficiente contiene informaci\u00f3n hist\u00f3rica sobre el rendimiento de las acciones, pero puede ser batido con informaci\u00f3n p\u00fablica o privilegiada**. El estudio de Fama (*Fama, 1970*) establece dos formas de analizar la eficiencia d\u00e9bil del mercado:\n\n* **Estudio de la autocorrelaci\u00f3n de los rendimientos:** Podemos decir que un mercado es d\u00e9bilmente eficiente cuando los rendimientos de sus activos tienen una autocorrelaci\u00f3n igual a 0, es decir, **el rendimiento del periodo anterior no determina el rendimiento del periodo siguiente**. Para el an\u00e1lisis de este punto, utilizo el enfoque de *Brockwell y Davis (2013)* presente en el paquete 'statsmodels.graphics'. \n\n* **An\u00e1lisis del signo:** seg\u00fan la hip\u00f3tesis de Fama, **el n\u00famero de retornos positivos y negativos en el precio hist\u00f3rico de las acciones debe ser igual**, teniendo una mediana igual a 0, para que el mercado sea eficiente en promedio. **Para probar la hip\u00f3tesis nula de que la mediana de los rendimientos es igual a 0, utilizo la prueba de Wilcoxon.**","0fc5820c":"Para terminar, me ha parecido interesante analizar **la composici\u00f3n del mercado de criptomonedas bas\u00e1ndome en el enfoque de Avellaneda y Lee** (*Avellaneda & Lee (2008)*), que ya he utilizado en otra <a href=\"https:\/\/www.kaggle.com\/ralarellanolopez\/s-p-500-markowitz-analysis-from-pca#notebook-container\">publicaci\u00f3n<\/a>.\n\nSeg\u00fan Avellaneda y Lee, **se puede generar una cartera de mercado que suponga la mejor representaci\u00f3n posible de los movimientos del sector aplicando un An\u00e1lisis de Componentes Principales a los activos de un mercado**. Una vez aplicado el an\u00e1lisis, nos queda el primer Componente Principal que se comportar\u00e1 igual que la cartera de mercado y, por tanto, su evoluci\u00f3n ser\u00e1 igual a la que sufra el mercado en el periodo de investigaci\u00f3n.","1cda1c96":"Para certificar el grado de eficiencia media de un mercado, hay que **analizar la velocidad con la que asume la informaci\u00f3n que acaba de publicarse en los medios de comunicaci\u00f3n**. Seg\u00fan la teor\u00eda de Fama (*Fama, 1970*) hay que estudiar el efecto de anuncios como splits o subidas de tipos de inter\u00e9s en la evoluci\u00f3n de los activos, sin embargo, en el caso de un activo como el Bitcoin, no hay splits, pero s\u00ed podemos analizar el efecto de las noticias publicadas relacionadas con este activo. Para ello, me voy a centrar en el mercado del Bitcoin y voy a analizar el efecto que han tenido seis noticias en la cotizaci\u00f3n de la moneda.\n\nLas 6 noticias que voy a analizar se producen entre agosto y octubre de 2015. Entre ellas, encontramos noticias positivas y negativas.","d7edb5f0":"***Noticias Negativas:***\n* **August 1, 2015: Mark Karpeles, CEO of now defunct Crypto-Exchange Mt Gox., arrested in Japan in allegations od Financial Fraud available <a href=\"https:\/\/www.france24.com\/en\/20150801-japan-bitcoin-arrest-exchange-theft-allegations-karpeles-france\">here<\/a>**\n\n* **August 15, 2015: New Fork (software update) named Bitcoin XT released available <a href=\"https:\/\/spectrum.ieee.org\/the-bitcoin-for-is-a-coup\">here<\/a>**\n\n***Noticias Positivas:***\n\n* **September 28, 2015: Crypto currencies termed as a commodity by US regulating agency CTFC available <a href=\"https:\/\/www.cftc.gov\/sites\/default\/files\/idc\/groups\/public\/@lrenforcementactions\/documents\/legalpleading\/enfcoinfliprorder09172015.pdf\">here<\/a>**\n\n* **October 8, 2015: New Crypto-exchange Gemini launched, with FIDC insurance available <a href=\"https:\/\/www.coindesk.com\/markets\/2015\/10\/01\/gemini-exchange-moves-toward-launch-with-twin-nydfs-approvals\/\">here<\/a>**\n\n* **October 22, 2015: EU Declares no VAT on Bitcoin available <a href=\"https:\/\/www.cnbc.com\/2015\/10\/22\/bitcoin-now-tax-free-in-europe-after-court-ruling.html\">here<\/a>**\n\n* **October 31, 2015: Bitcoin article displayed en the front page of the \"Economist\" available <a href=\"https:\/\/www.economist.com\/weeklyedition\/2015-10-31\">here<\/a>**\n\nDe todas ellas, me he centrado en la publicaci\u00f3n de Bitcoin en la portada de The Economist como positiva y en el Fork de agosto como negativa, ya que son las dos m\u00e1s relacionadas con la moneda y, por tanto, las que m\u00e1s afectar\u00e1n a su evoluci\u00f3n.","3f1a5470":"Para corroborar que, efectivamente, un mercado es d\u00e9bilmente eficiente, Fama determina que se debe aplicar el test de signos. En este caso, **utilizamos el Test de Rangos con Signos de Wilcoxon que nos permite rechazar, con una confianza determinada, la hip\u00f3tesis nula de que la mediana es diferente de 0, y por tanto, hay tantos n\u00fameros positivos como negativos en los rendimientos de los activos.**","932ba711":"# <font size=\"6\"> Anexo: Composici\u00f3n del mercado de criptomonedas <\/font> ","e2e51864":"Efectivamente, como se puede ver en el gr\u00e1fico, DBSCAN con una correcta selecci\u00f3n de los inputs determina que **hay un grupo de criptodivisas mayoritarias muy relacionadas con el mercado como ya hemos visto en el an\u00e1lisis de correlaci\u00f3n, que incluir\u00eda a Bitcoin, Ethereum, Binance, Cardano y XRP. Sin embargo, el algoritmo deja fuera de este grupo 2 criptodivisas esencialmente USDT y USDC, que eran las menos correlacionadas con la cartera del mercado y cuyos rendimientos no estar\u00e1n correlacionados con Bitcoin ni con el comportamiento del mercado de criptoactivos, sino por otros motivos como la evolucion del USD al ser monedas vinculadas a esta divisa (al ser stable coins). DOGE coin tambi\u00e9n queda fuera de este an\u00e1lisis, ya que su rendimiento no se basa en el an\u00e1lisis real del mercado, sino en las irracionalidades de los inversores provocadas en foros de Internet o por grandes tenedores de criptodivisas.**","c0e0cbfd":"**Existen diferencias sustanciales en los datos de las distintas criptodivisas**, desde la fecha en que comenzaron a estar en el mercado (Bitcoin es una de las m\u00e1s antiguas y otras como Doge son m\u00e1s recientes) hasta su rendimiento. Esta situaci\u00f3n hace que, como veremos a continuaci\u00f3n, **aunque Bitcoin pueda tener un cierto grado de eficiencia, otras criptodivisas no alcanzan ese grado de eficiencia.**\n\n**Sin embargo, Bitcoin y Ethereum son las dos principales criptodivisas por volumen, y su rendimiento es bastante similar como se puede ver en la *Figura 1*.**","afc35e53":"<font size=\"6\"> \u00bfEst\u00e1 manipulado el mercado de las criptomonedas?  <\/font> ","3ac2e80f":"Para las dos noticias mencionadas, **he realizado un gr\u00e1fico que representa la evoluci\u00f3n del precio diario en cada una de las dos ocasiones, otro gr\u00e1fico con el precio por minuto en cada una de las dos noticias y otro gr\u00e1fico con el efecto sobre el volumen de transacciones en cada una de las dos situaciones.**\n\nAntes de comentar las dos situaciones que seg\u00fan la teor\u00eda de las finanzas conductuales expuesta por Andrei Shleifer (*Shleifer, Professor of Economics Andrei, 2000*), **el inversor tarda m\u00e1s en asumir las noticias negativas que las positivas** ya que las noticias positivas generan inmediatamente furor mientras que las negativas son dif\u00edcilmente aceptables por quienes poseen el activo sobre el que se publica la informaci\u00f3n.\n\nAs\u00ed, si observamos la noticia positiva sobre la publicaci\u00f3n del bitcoin en la portada de The Economist, podemos ver como **el mercado tarda un par de d\u00edas en aceptar la informaci\u00f3n y el precio por minuto aumenta considerablemente**, como podemos ver en el segundo gr\u00e1fico aunque hay una correcci\u00f3n al d\u00eda siguiente de la publicaci\u00f3n, **los rendimientos pr\u00e1cticamente se han duplicado respecto a la media de los d\u00edas anteriores**. En el caso del precio por minuto, podemos ver como un par de d\u00edas despu\u00e9s de la publicaci\u00f3n se produce un gran descalabro en el valor por minuto del activo ya que, como se puede ver en el gr\u00e1fico de volumen, **el n\u00famero de transacciones del activo aumenta al hacerse mucho m\u00e1s popular con una publicaci\u00f3n como la portada de The Economist** y por tanto atrae a un mayor n\u00famero de inversores.\n\nSi nos fijamos en las noticias negativas, vemos como **los inversores tardan de 2 a 3 d\u00edas en asimilar la informaci\u00f3n** y a partir de ah\u00ed se produce una gran ca\u00edda de las rentabilidades seguida de una correcci\u00f3n del precio y de nuevo una gran ca\u00edda de las rentabilidades. Si nos fijamos en la evoluci\u00f3n del volumen y del precio por minuto, podemos ver c\u00f3mo **hay una gran perturbaci\u00f3n 3 d\u00edas despu\u00e9s de la publicaci\u00f3n de la noticia de la Bifurcaci\u00f3n y c\u00f3mo el volumen de transacciones aumenta hasta niveles nunca vistos en esta serie temporal reducida.**\n\n**Por tanto, podemos decir que el mercado tarda entre 2 y 3 d\u00edas en asumir la informaci\u00f3n publicada y, por tanto, aunque hay un periodo en ese desfase en el que una persona con informaci\u00f3n m\u00e1s r\u00e1pida puede batir al mercado, el precio asume las noticias que se publican y, por tanto, se comporta como un paseo aleatorio. As\u00ed, seg\u00fan la hip\u00f3tesis de Fama (*Fama, 1970*), s\u00f3lo se puede batir al mercado con informaci\u00f3n privilegiada. Por lo tanto, seg\u00fan la hip\u00f3tesis del mercado eficiente de Fama, podemos afirmar que el mercado de bitcoins asume al menos una eficiencia media.**","c8390a53":"# <font size=\"6\"> Bibliograf\u00eda<\/font> \n\n* *Avellaneda & Lee (2008): Marco Avellaneda & Jeong-Hyun Lee. (2008, Jul). Statistical Arbitrage in the U.S. Equities Market.*\n\n https:\/\/papers.ssrn.com\/sol3\/papers.cfm?abstract_id=1153505\n\n* *Brockwell y Davis (2013): Brockwell, P. J., & Davis, R. A. (2013). Time Series: Theory and Methods. Springer Publishing.*\n\n* *Fama (1970): Fama, E. F. (1970). Efficient Capital Markets: A Review of Theory and Empirical Work. The Journal of Finance, 25(2), 383.*\n\n https:\/\/doi.org\/10.2307\/2325486\n \n\n* *Shleifer, Professor of Economics Andrei (2000): Shleifer, Professor of Economics Andrei. (2000). Inefficient Markets: An Introduction to Behavioral Finance (1.a ed.). Oxford University Press, USA.*","dc4eaf47":"El 16 de mayo de 2019, Bitcoin sufri\u00f3 una serie de Flash Crash alrededor de las 5 am. **Si observamos el rendimiento a largo plazo en los d\u00edas posteriores a este Flash Crash (*Figura 7*) podemos ver c\u00f3mo la tendencia fue al alza mientras que hab\u00eda sido m\u00e1s bien estable o a la baja. As\u00ed, los inversores que se aprovecharon de este Flash Crash, por el volumen de operaciones que realizaron, pudieron aprovechar mejor este extraordinario rendimiento.**\n\nPara analizar el Flash Crash, he realizado un gr\u00e1fico (*Figura 8*) en el que se pueden ver **los candeleros de precios de cada minuto entre las 3 y las 6 de la ma\u00f1ana del 19 de mayo, que es cuando se produjo el Flash Crash.**","b2ab28fd":"# <font size=\"6\"> Segundo nivel: Eficiencia D\u00e9bil <\/font> ","d7385a80":"**La tendencia durante el periodo de estas tres horas es m\u00e1s o menos constante a la baja, pero si analizamos los resultados que se observan en torno a las 4:40, vemos como una serie de velas tienen unas sombras bajistas alargadas relacionadas con incrementos en el volumen de operaciones con p\u00e9rdidas (es decir, volumen en rojo)**.\n\nDe este modo, podemos certificar que, efectivamente, el 16 de mayo de 2019, **el aumento del volumen de ventas en torno a las 4:40 g\u00e9nero que los inversores con alto poder de venta aprovecharon mejor las rentabilidades extraordinarias que vendr\u00edan a partir de esa fecha representadas en la tendencia alcista posterior** (*Figura 7*).\n\nPor lo tanto, siguiendo el razonamiento de Fama (*Fama, 1970*) y relacionando los Flash Crashes con la informaci\u00f3n privilegiada para manipular el mercado, podemos certificar que **existen inversores en el mercado de Bitcoin con capacidad suficiente para manipular los precios moment\u00e1neos de la moneda y poder reducir su precio.** De esta forma, aprovechan mejor que la media del mercado las subidas de los rendimientos del activo en el corto plazo. Sin embargo, **pasan desapercibidos para aquellos inversores que invierten a largo plazo o que s\u00f3lo tienen en cuenta el precio diario o por horas de los activos**, por lo que pueden manipular el mercado moment\u00e1neamente y sin ser vistos.\n\n# <font size=\"6\"> Conclusi\u00f3n del an\u00e1lisis de eficiencia del mercado <\/font> \n\n**Por lo tanto, podemos certificar que, aunque el mercado de bitcoins tiene una eficiencia d\u00e9bil y una eficiencia media, no puede pasar las pruebas del mercado de eficiencia fuerte. Por lo tanto, s\u00f3lo podr\u00edamos probar la hip\u00f3tesis de eficiencia contra un mercado de eficiencia media y no contra un mercado de eficiencia fuerte.**\n\n**Como conclusi\u00f3n de este an\u00e1lisis, podr\u00edamos determinar que el mercado de bitcoin puede ser batido con informaci\u00f3n privilegiada ya que las personas con suficiente capacidad y volumen de inversi\u00f3n pueden alterar el precio del bitcoin y generar rendimientos superiores a la media del mercado, mientras que las personas cuya estrategia de inversi\u00f3n se basa en el an\u00e1lisis de informaci\u00f3n hist\u00f3rica o informaci\u00f3n p\u00fablica no pueden batir al mercado ya que \u00e9ste asume correctamente este tipo de informaci\u00f3n en el precio del activo.**","a4a0558a":"Para realizar este an\u00e1lisis, **me centro en los datos de Bitcoin disponibles en el siguiente <a href=\"https:\/\/www.kaggle.com\/tencars\/392-crypto-currency-pairs-at-minute-resolution\">directorio<\/a>, si bien es cierto que he aplicado estas mismas pruebas en otros criptoactivos para validar el resultado.** \n\nLos datos son del **precio de Bitcoin - D\u00f3lar por minuto**, recogiendo el m\u00e1ximo, el m\u00ednimo, la apertura y el cierre de cada minuto, as\u00ed como el volumen negociado. Gracias a esta profundidad de informaci\u00f3n, podemos aplicar algunas de las pruebas que voy a explicar, sin embargo, para ello he cargado otras bases de datos con informaci\u00f3n s\u00f3lo diaria para cada criptodivisa, lo que puede simplificar mucho algunos de los an\u00e1lisis.\n\n","fb338316":"# <font size=\"6\"> Tercer nivel: Eficiencia Fuerte <\/font> ","4350c640":"Seg\u00fan las investigaciones de Fama (*Fama, 1970*), **para analizar el grado de eficiencia fuerte de un mercado, el rendimiento de la cartera de inversi\u00f3n de un gestor de un fondo de inversi\u00f3n que invierte en activos de mercado deber\u00eda compararse con el rendimiento habitual del mercado.** De esta forma, **se podr\u00eda averiguar si existe informaci\u00f3n privilegiada en el mercado que es aprovechada por los gestores para manipular el rendimiento de los activos.**.\n\nDebido a la naturaleza *descentralizada* de Bitcoin y a que la informaci\u00f3n sobre su rendimiento no est\u00e1 relacionada con las cuentas anuales o los resultados financieros sino con las expectativas de los inversores, me parece relevante analizar un fen\u00f3meno conocido como ***Flash Crash***. Un *Flash Crash* se produce cuando hay un **incremento moment\u00e1neo en el volumen de transacciones de un activo, a la vez que se produce una ca\u00edda muy brusca en el precio de forma moment\u00e1nea y que s\u00f3lo se puede observar analizando los rendimientos al segundo o minuto de las acciones.** Esta situaci\u00f3n se produce gracias al uso de m\u00e1quinas de alta frecuencia para comprar y vender criptodivisas.\n\nAqu\u00ed, como tengo la informaci\u00f3n por minuto del precio del Bitcoin y esto me permite saber cu\u00e1l ha sido el m\u00ednimo y el m\u00e1ximo y la apertura y el cierre de ese minuto, puedo saber si en alguno de los minutos se ha producido **una situaci\u00f3n de fuera de rango en la que se ha pagado un precio muy bajo y correlacionar esto con el volumen que se ha negociado en cada minuto** ya que es una informaci\u00f3n que tengo. \n\nGr\u00e1ficamente, en un gr\u00e1fico de velas como el siguiente, se puede ver un *Flash Crash* como una **vara con una sombra bajista muy larga, seguida de una situaci\u00f3n en la que el volumen negociado aumenta mucho.**\n\n**Una situaci\u00f3n como un *Flash Crash* permite a los grandes tenedores de estos activos vender r\u00e1pidamente una gran cantidad de criptodivisas y comprar autom\u00e1ticamente a un precio mucho m\u00e1s bajo para aprovechar mejor el crecimiento de los rendimientos, es decir, permite a los inversores con un gran volumen de activos y con acceso de alta frecuencia al mercado manipular los rendimientos, generando una situaci\u00f3n similar a la presentada por Fama en los gestores de fondos de inversi\u00f3n.**\n\n**Esta situaci\u00f3n escapa a la comprensi\u00f3n del inversor de largo plazo o que s\u00f3lo mira el precio por d\u00eda o por hora, ya que a largo plazo y como se puede ver en el gr\u00e1fico, el precio se mantiene constante en su tendencia de largo plazo, y no se puede apreciar el efecto que ha tenido este Flash Crash en el rendimiento global del activo.**","97a6bb8d":"Como podemos ver en la *Figura 12*, **Bitcoin explica pr\u00e1cticamente la totalidad del mercado, especialmente en los a\u00f1os anteriores a 2021**. Concretamente, a partir de 2021, monedas como Ethereum o Binance adquieren mayor relevancia. A pesar de ello, su contribuci\u00f3n a la explicaci\u00f3n del mercado sigue siendo marginal frente al gran peso de Bitcoin (*de nuevo, los datos est\u00e1n escalados para que el efecto de las diferentes dimensiones sobre el precio de las monedas no afecte al An\u00e1lisis de Componentes Principales, que se basa en la informaci\u00f3n real contenida en este precio*).\n\nUna vez que he llegado a esta conclusi\u00f3n, me parece interesante hacer un **an\u00e1lisis de correlaci\u00f3n** para ver cu\u00e1les son las criptodivisas que est\u00e1n mejor explicadas por el mercado y cu\u00e1les no lo est\u00e1n correctamente.","b7aa2239":"En los \u00faltimos a\u00f1os, **palabras como blockchain, NFT o criptomoneda est\u00e1n inundando los titulares y noticias de las webs de inversi\u00f3n especializadas** y se est\u00e1n convirtiendo cada vez m\u00e1s en una alternativa de inversi\u00f3n en las carteras de millones de inversores. En gran medida, la complejidad que hay detr\u00e1s de este tipo de activos escapa a la comprensi\u00f3n de gran parte de la poblaci\u00f3n y, por tanto, **su comportamiento en los mercados puede no ser por una serie de razones de punter\u00eda** (como el comportamiento de los activos tradicionales) **sino por movimientos basados en la irracionalidad de los inversores que hacen que el mercado sea ineficiente** (y por tanto, no recoge toda la informaci\u00f3n de la que disponen los inversores, sino que se mueve por el comportamiento irracional o las manipulaciones de estos).","513ef7bb":"Como puede verse en la *Figura 2*, **la autocorrelaci\u00f3n de los rendimientos de bitcoin diferidos a un d\u00eda est\u00e1 por debajo del nivel de significaci\u00f3n, por lo que podemos decir que los rendimientos pasados de bitcoin no explican los rendimientos futuros de bitcoin y, por tanto** (y en ausencia de la prueba de signos) **bitcoin podr\u00eda ser d\u00e9bilmente eficiente.**\n\nSin embargo, si observamos la autocorrelaci\u00f3n de los rendimientos diferidos de un d\u00eda de Ethereum (*Figura 3*), podemos ver c\u00f3mo **no podemos rechazar la hip\u00f3tesis nula de autocorrelaci\u00f3n con suficiente confianza, por lo que podemos afirmar que la criptomoneda Ethereum no es eficiente, ya que lo que determina el precio actual son los rendimientos pasados, y no las expectativas racionales de los inversores.** (*Esta situaci\u00f3n tambi\u00e9n se aplica a las criptomonedas USDT y USDC.*)","1fb2f8c5":"En la *Figura 11*, podemos ver **la evoluci\u00f3n de la cartera de mercado que se ha generado como primer componente principal de un An\u00e1lisis de Componentes Principales aplicado sobre las 8 principales criptodivisas del mercado.** Los datos han sido escalados antes de realizar el An\u00e1lisis de Componentes Principales, por lo que la diferencia en la dimensi\u00f3n del precio entre las distintas criptodivisas no deber\u00eda alterar el rendimiento de esta cartera de mercado, s\u00f3lo va a ser **la informaci\u00f3n del conjunto de rendimientos de las distintas divisas la que genere la cartera de mercado.**.\n\nComo ya hemos visto, **el rendimiento que se puede ver en la *Figura 11* contiene aproximadamente el 80% de la informaci\u00f3n del mercado y es, por tanto, un muy buen indicador de c\u00f3mo se est\u00e1 desarrollando el mercado de criptodivisas.**\n\nEn la *Figura 12*, tratar\u00e9 de representar **la contribuci\u00f3n de cada una de las diferentes criptodivisas a la cartera del mercado.** De esta manera, se podr\u00e1 ver si el mercado se explica en mayor o menor medida por alguna de las criptodivisas."}}