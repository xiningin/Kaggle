{"cell_type":{"01fcb5a1":"code","5c7710ba":"code","9ab5b732":"code","4d8ffac6":"code","6168a028":"markdown","28380318":"markdown","682750ea":"markdown","19a4eb43":"markdown","d794007c":"markdown","c81ac733":"markdown"},"source":{"01fcb5a1":"PROJECT_ID = 'sciwalker-open-data'\nfrom google.cloud import bigquery\nclient = bigquery.Client(project=PROJECT_ID)","5c7710ba":"query = (\n\"select distinct ct.NI_COMPOUND_NAME as compound, ct.NI_CONDITION_NAME as disease, ct.SOURCE as ct_id \"+\n\"from ontologies.chemistry chem \"+\n\"inner join ( \"+\n\" select distinct ocid \"+ \n\" from ontologies.compound_classes \"+\n\" where name='sesquiterpene derivatives' ) cls on cls.ocid=chem.ancestorid \"+\n\"inner join clinical_trials_aact.aact_relations ct on ct.OCID_SUBJECT_COMPOUND=chem.ocid\" )\n\nquery_job = client.query(query, location=\"US\")  \ndf = query_job.to_dataframe()","9ab5b732":"from pandas import crosstab\ntab = crosstab(index=df['disease'], columns=df['compound'])","4d8ffac6":"import matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set(font_scale=1.5) \nfig, (ax) = plt.subplots(1, 1, figsize=(20,15))\nhm = sns.heatmap(tab, ax=ax, cmap=\"YlOrRd\", annot=True, vmin=0, vmax=10, linewidths=.05)","6168a028":"## 3. Create the frequency table","28380318":"## 5. Result","682750ea":"## 4. Plot a heat-map of the frequency table[](http:\/\/)","19a4eb43":"## 1. Connect to SciWalker-Open-Data via Google BigQuery","d794007c":"## 2. Create the query and fetch the results","c81ac733":"# Which compounds from which compound classes are in which clinical Trials ? \n\nA structure - activity relationship (SAR) notebook...\n\nUsing the analyzed version of the ClinicalTrials.gov AACT database, we are annotating chemical compounds in the AACT intervention section. \nThe notebook allows you to search for clinical trials that use the compounds in question as a treatment.\nEven more, using a chemical ontology you may retrieve all compounds that belong to a certain chemical class (e.g. \"sesquiterpene derivatives\") that are in clinical trials. This way you may see which structure types are most used as treatments in specific diseases or even disease classes (e.g. inflammatory diseases)."}}