{"cell_type":{"47dd3189":"code","fdfa2a88":"code","5fff2d3f":"code","895bb439":"code","2a791576":"code","1b95a3bd":"code","bd105bb9":"code","cf1867fc":"code","5e7e070c":"code","27607c89":"code","9d6a7408":"code","15e704c5":"code","4867c143":"code","681e57ec":"code","49a896f7":"code","bbe22664":"code","35d9f3cd":"code","0193fe76":"code","56dcae05":"code","615be1ae":"code","36735767":"code","78f1135b":"code","6c7dc290":"code","34bfac59":"markdown","1d88ce6a":"markdown","5c49a27a":"markdown","ee19a8ff":"markdown","8a161fb1":"markdown","01630e2f":"markdown","cbffde19":"markdown","f45635da":"markdown","95dd5a79":"markdown","cb2e0ea4":"markdown","01d051ff":"markdown"},"source":{"47dd3189":"#Importing the libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport plotly as py\nimport os\nfrom wordcloud import WordCloud\nfrom PIL import Image\nimport matplotlib\nimport matplotlib.colors\npy.offline.init_notebook_mode(connected = True)\nimport datetime as dt\nplt.rcParams['figure.dpi'] = 130","fdfa2a88":"df = pd.read_csv('..\/input\/netflix-shows\/netflix_titles.csv') #loading the dataset\ndf.head(5)","5fff2d3f":"df.info()","895bb439":"#Get the percentage of missing values from each column\nfor i in df.columns:\n    null_percentage = df[i].isna().sum() \/ len(df) * 100\n    if(null_percentage>0) :\n        print(\"{} null percentage: {}%\".format(i,round(null_percentage,2)))","2a791576":"df.drop(['director'],axis = 1,inplace = True) # Remove the \"director\" column\ndf.info()","1b95a3bd":"df['country'].replace(np.nan, 'United States',inplace  = True) # Replacing all the null values with US\ndf['cast'].replace(np.nan,'Not Avail',inplace = True) # Replacing all the null values with Not Avail\ndf.info()","bd105bb9":"df.dropna(inplace=True) #Removing the remaining null values from rating and date_added\ndf.isnull().sum()","cf1867fc":"print(df['date_added'])\ndf[\"date_added\"] = pd.to_datetime(df['date_added'])","5e7e070c":"df['month_added']=df['date_added'].dt.month \ndf['month_name_added']=df['date_added'].dt.month_name()\ndf['year_added'] = df['date_added'].dt.year\ndf.drop('date_added',axis=1,inplace=True)","27607c89":"df['rating'].unique()","9d6a7408":"# Reference from this notebook: https:\/\/www.kaggle.com\/andreshg\/eda-beginner-to-expert-plotly\ntarget_audience = {\n    'TV-PG': 'Older Kids',\n    'TV-MA': 'Adults',\n    'TV-Y7-FV': 'Older Kids',\n    'TV-Y7': 'Older Kids',\n    'TV-14': 'Teens',\n    'R': 'Adults',\n    'TV-Y': 'Kids',\n    'NR': 'Adults',\n    'PG-13': 'Teens',\n    'TV-G': 'Kids',\n    'PG': 'Older Kids',\n    'G': 'Kids',\n    'UR': 'Adults',\n    'NC-17': 'Adults'\n}\ndf['target_audience'] = df['rating'].replace(target_audience)\ndf.drop('rating',inplace = True,axis = 1)\ndf.head()","15e704c5":"#Palette\nnetflix_palette=sns.palplot(['#db0000','#000000','#564d4d','#831010']) #https:\/\/www.color-hex.com\/color-palette\/22942\nplt.title('Netflix Brand Color Palette',loc=\"left\",fontfamily=\"Arial\",fontsize=16,y=1.1)\nplt.show()","4867c143":"#Plot\nfig, ax = plt.subplots(figsize=(4, 4))\nplt.pie(df['type'].value_counts(),labels=df['type'].value_counts().index,explode=[0.05,0],\n        autopct='%1.1f%%',colors=['#db0000','#564d4d'],startangle=90,shadow=True)\n\n#Insights\nfig.text(0.125,0.95,'Netflix Content Distribution', fontfamily='Arial',fontsize=16,fontweight=\"bold\")\nfig.text(0.125,0.9,'Almost 2\/3 of the content is Movies.', fontfamily='Arial',fontsize=8)\nplt.show()\n","681e57ec":"#Firstly reduce the name of countries to their short forms\ndf['country'].replace('United States', 'USA', inplace=True)\ndf['country'].replace('United Kingdom', 'UK',inplace=True)\ndf['country'].replace('South Korea', 'S. Korea',inplace=True)\n\n#Getting the top 10 countries\ncountry = df['country'].value_counts().sort_values(ascending=False)\ntopCountry = country.head(10)","49a896f7":"#Plot\nfig, ax = plt.subplots(figsize=(8, 5))\ncolor_map = ['#564d4d' for _ in range(10)]\ncolor_map[0] = color_map[1] = color_map[2] =  '#db0000' # color highlight\nax.bar(topCountry.index, topCountry, width=0.5, \n       linewidth=0.6,color=color_map)\n\n#annotation\nfor i in topCountry.index:\n    ax.annotate(f\"{topCountry[i]}\", \n                   xy=(i, topCountry[i] + 100),\n                   va = 'center', ha='center',fontweight='light', fontfamily='Arial')\n\n# Remove border from plot\nfor s in ['right','top']:\n    ax.spines[s].set_visible(False)\n    \n# Insights\nfig.text(0.125,0.975,'Top 10 Country on Netflix', fontfamily='Arial',fontsize=16,fontweight=\"bold\")\nfig.text(0.125,0.935,'USA stands out significantly since Netflix is a US-based company.', fontfamily='Arial',fontsize=8)\nfig.text(0.575,0.935,'| India and UK take the 2 and 3 positions respectively.', fontfamily='Arial',fontsize=8)\nplt.show()","bbe22664":"#Disturbution Percentage\ncontentPercentage = df[['type', 'country']].groupby('country')['type'].value_counts().unstack().loc[topCountry.index]\n\n\n#Plot\nfig, ax = plt.subplots(figsize=(8, 6))\nsns.countplot(x=\"country\",hue=\"type\",order=topCountry.index,data=df,palette=['#db0000','#564d4d'])\n\n# Remove border from plot\nfor s in ['right','top']:\n    ax.spines[s].set_visible(False)\n\n# Insights\nfig.text(0.125,0.975,\"Top 10 Country's content distribution\", fontfamily='Arial',fontsize=16,fontweight=\"bold\")\nfig.text(0.125,0.935,f\"- India has very high percentage of movies .i.e {contentPercentage.values[1][0]\/(contentPercentage.values[1].sum())*100:.3}% for Movies and only {contentPercentage.values[1][1]\/(contentPercentage.values[1].sum())*100:.3}% for TV shows\", fontfamily='Arial',fontsize=8)\nfig.text(0.125,0.905,\"- Suprisingly Japan and South Korea have more number of TV shows as compared to Movies.\", fontfamily='Arial',fontsize=8)\nplt.show()","35d9f3cd":"#Disturbution Percentage\nrating = df['target_audience'].value_counts().index\nrating_values = df[['type', 'target_audience']].groupby('target_audience')['type'].value_counts().unstack().loc[rating]\nrating_values['sum'] = rating_values.sum(axis=1)\nratingPercentage = ((rating_values.T\/rating_values['sum']).T[['Movie','TV Show']].sort_values(by='Movie',ascending=True))\n\n#Plot\nfig, ax = plt.subplots(figsize=(12,6),)\n\nax.barh(ratingPercentage.index, ratingPercentage['Movie'], \n        color='#db0000',label='Movie',left=ratingPercentage['TV Show'])\nax.barh(ratingPercentage.index, ratingPercentage['TV Show'], \n        color='#564d4d', label='TV Show')\n\n# Remove border from plot\nfor s in ['right','top','bottom','left']:\n    ax.spines[s].set_visible(False)\n    \n#Setting the labels\nax.set_xticks([])\nax.set_yticklabels(ratingPercentage.index, fontfamily='Arial', fontsize=12)\n\n#Annotation\nfor i in ratingPercentage.index:\n    ax.annotate(f\"{ratingPercentage['TV Show'][i]*100:.4}%\", \n                   xy=(ratingPercentage['TV Show'][i]\/2,i),\n                   va = 'center', ha='center',fontweight='bold', fontfamily='Arial',color=\"White\")\nfor i in ratingPercentage.index:\n    ax.annotate(f\"{ratingPercentage['Movie'][i]*100:.4}%\", \n                   xy=(ratingPercentage['Movie'][i]+ratingPercentage['TV Show'][i]\/3,i),\n                   va = 'center', ha='center',fontweight='bold', fontfamily='Arial',color=\"White\")\n#Insights\nfig.text(0.125,0.975,\"Content distribution based on ratings\", fontfamily='Arial',fontsize=24,fontweight=\"bold\")\nfig.text(0.125,0.915,f\"- Both Adults and Teens have almost identical distribution\", fontfamily='Arial',fontsize=12)\nfig.text(0.125,0.875,\"- While kids have almost an equal distribution between Movies and TV Shows\", fontfamily='Arial',fontsize=12)\nfig.text(0.77,0.875,\"TV Shows |\",fontfamily='Arial',fontsize=8,color=\"#564d4d\",fontweight=\"bold\")\nfig.text(0.83,0.875,\"Movie\",fontfamily='Arial',fontsize=8,color=\"#db0000\",fontweight=\"bold\")\nplt.show()","0193fe76":"#Disturbution\nyearAdded = df.groupby('type')['year_added'].value_counts().unstack().fillna(0).loc[['TV Show','Movie']].cumsum(axis=0).T\n\n#Plot\nfig, ax = plt.subplots(1, 1, figsize=(12, 6))\ncolor = [\"#db0000\", \"#564d4d\"]\n\nfor i, contentSum in enumerate(df['type'].value_counts().index):\n    contentSum = yearAdded[contentSum]\n    ax.fill_between(contentSum.index, 0, contentSum.values, color=color[i], label=contentSum)\n    \n# Remove border from plot\nfor s in ['right','top','bottom','left']:\n    ax.spines[s].set_visible(False)\n    \n#Setting the labels\nax.yaxis.tick_right()\nax.set_xlim(2008,2020) \nplt.xticks(np.arange(2008, 2021, 1)) \nax.tick_params(axis=u'both', which=u'both',length=0)\n\n#Insights\nax.grid(False)\nfig.text(0.13,0.2,\"TV Shows |\",fontfamily='Arial',fontsize=12,color=\"#564d4d\",fontweight=\"bold\")\nfig.text(0.22,0.2,\"Movie\",fontfamily='Arial',fontsize=12,color=\"#db0000\",fontweight=\"bold\")\nfig.text(0.125,0.8,\"Content added over time\", fontfamily='Arial',fontsize=24,fontweight=\"bold\")\nfig.text(0.125,0.72,f\"- There was an exponential rise from 2015 \\n and Netflix had  over 2000+ content added by the year 2019\", fontfamily='Arial',fontsize=12)\nfig.text(0.125,0.68,f\"- It seems Netflix focused more on Movies than TV Shows\", fontfamily='Arial',fontsize=12)\n\nplt.show()","56dcae05":"month_order = ['January','February','March','April','May','June','July','August','September','October','November','December']\n\ndf['month_name_added'] = pd.Categorical(df['month_name_added'], categories=month_order, ordered=True)","615be1ae":"#Distirbution\nmonthAdded = df.groupby('type')['month_name_added'].value_counts().unstack().fillna(0).loc[['TV Show','Movie']].cumsum(axis=0).T\n\n#Plot\nfig, ax = plt.subplots(1, 1, figsize=(14, 6))\ncolor = [\"#db0000\", \"#564d4d\"]\n\nfor i, contentSum in enumerate(df['type'].value_counts().index):\n    contentSum = monthAdded[contentSum]\n    ax.fill_between(contentSum.index, 0, contentSum.values, color=color[i], label=df['month_name_added'])\n    \n#Set Labels\nax.yaxis.tick_right()\nax.set_xticklabels(monthAdded.index, fontfamily='Arial', rotation=0) \nax.tick_params(axis=u'both', which=u'both',length=0)\n\n# Remove border from plot\nfor s in ['right','top','bottom','left']:\n    ax.spines[s].set_visible(False)\n    \n#Insights\nax.grid(False)\nfig.text(0.155,0.825,\"TV Shows |\",fontfamily='Arial',fontsize=12,color=\"#564d4d\",fontweight=\"bold\")\nfig.text(0.2325,0.825,\"Movie\",fontfamily='Arial',fontsize=12,color=\"#db0000\",fontweight=\"bold\")\nfig.text(0.15,1,\"Content added per month\", fontfamily='Arial',fontsize=24,fontweight=\"bold\")\nfig.text(0.15,0.95,f\"- From October to January, Netflix has added most of its content\", fontfamily='Arial',fontsize=12)\nfig.text(0.15,0.91,f\"- There is a dip in the month of February\", fontfamily='Arial',fontsize=12)\nplt.show()","36735767":"#Disturbution\ndf['count'] = 1\ndata = df.groupby('country')[['country','count']].sum().sort_values(by='count',ascending=False).reset_index()[:10]\ndata = data['country']\n\ncountry_rating = df.loc[df['country'].isin(data)]\ncountry_rating = pd.crosstab(country_rating['country'],country_rating['target_audience'],normalize = \"index\").T\n\ncountry_order = ['USA', 'India', 'UK', 'Canada', 'Japan', 'France', 'S. Korea', 'Spain',\n       'Mexico']\n\nage_order = ['Kids','Older Kids','Teens','Adults']\n\n#Plot\ncmap = matplotlib.colors.LinearSegmentedColormap.from_list(\"\", ['#564d4d','#831010','#db0000'])\nfig, ax = plt.subplots(1, 1, figsize=(12, 12))\n\nsns.heatmap(country_rating.loc[age_order,country_order],cmap=cmap,square=True, linewidth=2.5,cbar=False,\n            annot=True,fmt='1.0%',vmax=.6,vmin=0.05,ax=ax,annot_kws={\"fontsize\":12})\n\n#Set Labels\nax.set_ylabel('')    \nax.set_xlabel('')\nax.tick_params(axis=u'both', which=u'both',length=0)\n\n#Insights\nfig.text(0.13,0.75,\"Target Audience distribution based on contents per country\", fontfamily='Arial',fontsize=24,fontweight=\"bold\")\nfig.text(0.13,0.725,f\"- Interestingly most of the content in India is targeted to Teens\", fontfamily='Arial',fontsize=12)\nfig.text(0.13,0.705,f\"- Spain and Mexico are the countries with most of the content for Adults \", fontfamily='Arial',fontsize=12)\nplt.show()","78f1135b":"#Distirbution\ncmap = matplotlib.colors.LinearSegmentedColormap.from_list(\"\", ['#564d4d','#831010','#db0000'])\ntitle = str(list(df['description'])).replace(',', '').replace('[', '').replace(\"'\", '').replace(']', '').replace('.', '')\n\n#Plot\nfig, ax = plt.subplots(1, 1, figsize=(6, 6))\nwordcloud = WordCloud(background_color = 'white', width = 500,  height = 200,colormap=cmap, max_words = 150).generate(title)\nplt.imshow(wordcloud, interpolation = 'bilinear')\nplt.axis('off')\nplt.show()","6c7dc290":"#Coclusion\nfig, ax = plt.subplots(1, 1, figsize=(6, 6))\nfig.text(0.13,0.75,\"Conclusion\", fontfamily='Arial',fontsize=30,fontweight=\"bold\")\nfig.text(0.13,0.65,\"Thanks to Joshua Swords for his wonderful notebook (https:\/\/www.kaggle.com\/joshuaswords\/netflix-data-visualization\/)\", fontfamily='Arial',fontsize=24,fontweight=\"regular\")\nplt.axis('off')\nplt.show()","34bfac59":"## **Cleaning and Pre Processing**","1d88ce6a":"# Netflix Movies and TV Shows - Exploratory Data Analysis","5c49a27a":"# **Analysis** and Visualisation","ee19a8ff":"Since we can observe that \"director\" column has highest number of the missing data , I will drop them.","8a161fb1":"![](https:\/\/help.nflxext.com\/43e0db2f-fea0-4308-bfb9-09f2a88f6ee4_what_is_netflix_1_en.png)","01630e2f":"#### **Netflix** is a subscription-based streaming service that allows our members to watch TV shows and movies without commercials on an internet-connected device.  ","cbffde19":"- Since the date_added is of type object we need to convert to date time.","f45635da":"## ****Loading and Reading the dataset****","95dd5a79":"## Let's import some libraries","cb2e0ea4":"* Since all the movies and tv shows are aired on Netflix US, we can replace all the missing values with the US.\n* And replace the missing cast values would be replaced by None, as the cast column is useful","01d051ff":"* Lastly, we would replace all the rating with more meaningful values"}}