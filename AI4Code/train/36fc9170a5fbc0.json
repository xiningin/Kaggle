{"cell_type":{"b937e2c8":"code","2ebd00fe":"code","62e47d07":"code","cc45c62f":"code","1a46e15e":"code","e9748014":"code","cd07715a":"code","96f0184c":"code","c9f4624c":"code","245ea9df":"code","70a4468f":"markdown","d5673e97":"markdown","2b525f00":"markdown","c4084d24":"markdown","f019ade1":"markdown","ab94d9f8":"markdown","fa3b477d":"markdown","c67f3202":"markdown"},"source":{"b937e2c8":"#https:\/\/www.kaggle.com\/shazadudwadia\/supermarket linkindeki dataseti \"Add Data\" butonu ile notebookuma dahil ettim. Ard\u0131ndan CSV okuma i\u015flemini ger\u00e7ekle\u015ftiriyorum.\n\nimport pandas as pd\ndf = pd.read_csv('..\/input\/supermarket\/GroceryStoreDataSet.csv', names=['products'], header=None)\ndf","2ebd00fe":"#DataFrame i\u00e7erindeki verileri merak ettim, verileri \u00e7ekiyorum.\n\ndf.values","62e47d07":"#Sat\u0131r ve S\u00fctun bilgisini merak ettim, boyut bilgisine eri\u015fiyorum.\n\ndf.shape","cc45c62f":"#Ad\u0131m1 : Veriyi liste format\u0131na d\u00f6n\u00fc\u015ft\u00fcrd\u00fcm. Her bir sat\u0131rdaki objeleri ',' ile ay\u0131rd\u0131m.\n\ndata = list(df[\"products\"].apply(lambda x : x.split(',')))\ndata","1a46e15e":"#Ad\u0131m2 : mlxtend k\u00fct\u00fcphanesinin veriyi True-False dataframe ine d\u00f6n\u00fc\u015ft\u00fcrme metodunu uyguluyaca\u011f\u0131m. \n#\u0130lk \u00f6nce, kurulu olmayanlar i\u00e7in mlxtend k\u00fct\u00fcphanesini install ediyorum.\n\n!pip install mlxtend\n\nfrom mlxtend.preprocessing import TransactionEncoder\nte = TransactionEncoder()\nte_data = te.fit(data).transform(data)\ndf = pd.DataFrame(te_data,columns=te.columns_)\ndf","e9748014":"# Apriori algoritmas\u0131na min_support de\u011feri 0.2 verildi. B\u00f6ylece kombinasyonlardaki 0.2 support de\u011ferinin alt\u0131nda olan \u00fcr\u00fcn birliktelikleri elenmi\u015f oldu.\n# \"verbose\" arg\u00fcman\u0131n\u0131n 1 olmas\u0131 ise toplam ka\u00e7 kombinasyon oldu\u011fu bilgisini bize verecektir. \u00d6rne\u011fimizde 42 kombinasyon olu\u015fmu\u015ftur. \n# En son durumda ise elimizde 16 kombinasyon kalm\u0131\u015ft\u0131r. \n# Demek ki 42-16 = 26 kombinasyonumuz 0.2 support de\u011ferinin alt\u0131nda kalm\u0131\u015f ve yorumlar\u0131m\u0131za katmayaca\u011f\u0131m\u0131z \u00f6nemsiz bir oran olarak ele al\u0131nm\u0131\u015ft\u0131r.\n\nfrom mlxtend.frequent_patterns import apriori\nfreq_items = apriori(df,min_support=0.20,use_colnames = True, verbose = 1)\nfreq_items","cd07715a":"# \"min_threshold = 0.3\" verilerek, \"confidence\" de\u011feri 0.3 alt\u0131nda olan de\u011ferlerin getirilmemesi tercih olarak sa\u011fland\u0131.  \n\nfrom mlxtend.frequent_patterns import association_rules\ndf_res = association_rules(freq_items, metric = \"confidence\", min_threshold = 0.3)\ndf_res","96f0184c":"#En y\u00fcksek confidence de\u011ferini bulal\u0131m. \u00c7\u0131kt\u0131da en y\u00fcksek confidence de\u011ferinin 0.80 oldu\u011fu g\u00f6r\u00fcl\u00fcyor.\n\nconf_max = df_res['confidence'].max()\nconf_max","c9f4624c":"#En d\u00fc\u015f\u00fck confidence de\u011ferini bulal\u0131m. \u00c7\u0131kt\u0131da en d\u00fc\u015f\u00fck confidence de\u011ferinin 0.307 oldu\u011fu g\u00f6r\u00fcl\u00fcyor.\n\nconf_min = df_res[\"confidence\"].min()\nconf_min","245ea9df":"#En d\u00fc\u015f\u00fck, En y\u00fcksek ve 0.5 confidence de\u011ferine sahip olan veriler filtreleniyor. \"confidence\" de\u011ferine g\u00f6re artan s\u0131rada s\u0131ralan\u0131yor.\n\ndf_filt = df_res[ (df_res[\"confidence\"] == conf_min) | (df_res[\"confidence\"] == conf_max) | (df_res[\"confidence\"] == 0.5 )]\ndf_filt.sort_values(\"confidence\", ascending = True)","70a4468f":"# 7). Yorumlar ve Aksiyon \u00d6nerisi\n* **MILK       :** S\u00fct\n* **BREAD      :** Ekmek\n* **COFFEE     :** Kahve\n* **CORNFLAKES :** M\u0131s\u0131r Gevre\u011fi\n* **BISCUIT    :** Bisk\u00fcvi\n\n**Yukar\u0131daki \u00e7\u0131kt\u0131 baz al\u0131nd\u0131\u011f\u0131nda;**\n\n  **1. Sat\u0131r :**<br>\n  **a).** Ekmek ve Bisk\u00fcvinin birlikte al\u0131nma olas\u0131l\u0131\u011f\u0131 **support = 0.2** oldu\u011fu i\u00e7in **%20**'dir.<br> \n  **b).** Ekmek al\u0131nd\u0131\u011f\u0131nda Bisk\u00fcvi al\u0131nma olas\u0131l\u0131\u011f\u0131 **confidence = 0.307692** oldu\u011fu i\u00e7in **%30**'dur.<br>\n  **c).** Bisk\u00fcvinin tek ba\u015f\u0131na al\u0131nma olas\u0131l\u0131\u011f\u0131 **consequent support = 0.35** oldu\u011fu i\u00e7in **%35**'tir.\n  \n  **5. Sat\u0131r :**<br>\n  **a).** Kahve ve M\u0131s\u0131r Gevre\u011finin birlikte al\u0131nma olas\u0131l\u0131\u011f\u0131 **support = 0.2** oldu\u011fu i\u00e7in **%20**'dir.<br> \n  **b).** Kahve al\u0131nd\u0131\u011f\u0131nda M\u0131s\u0131r Gevre\u011fi al\u0131nma olas\u0131l\u0131\u011f\u0131 **confidence = 0.5** oldu\u011fu i\u00e7in **%50**'dir. \n  \n  **7. Sat\u0131r:**<br>\n  **a).** S\u00fct ve Ekme\u011fin birlikte al\u0131nma olas\u0131l\u0131\u011f\u0131 **support = 0.2** oldu\u011fu i\u00e7in **%20**'dir.<br> \n  **b).** S\u00fct al\u0131nd\u0131\u011f\u0131nda Ekmek al\u0131nma olas\u0131l\u0131\u011f\u0131 **confidence = 0.8** oldu\u011fu i\u00e7in **%80**'dir.\n  \n### Yorumlar :\n* Ekmek alan m\u00fc\u015fterilerin %30'u Bisk\u00fcvi de almaktad\u0131r. \n* Kahve al\u0131nan sat\u0131\u015flar\u0131n yar\u0131s\u0131nda M\u0131s\u0131r Gevre\u011fi de al\u0131nm\u0131\u015ft\u0131r.\n* S\u00fct ve Ekmek t\u00fcm al\u0131\u015fveri\u015flerin %20 sinde birlikte al\u0131nm\u0131\u015ft\u0131r.\n\n### Aksiyon \u00d6nerisi :\n\n* S\u00fct alan m\u00fc\u015fterilerin ekmek alma olas\u0131l\u0131\u011f\u0131 olduk\u00e7a y\u00fcksektir(%80). Bu demek oluyor ki; s\u00fct alan m\u00fc\u015fteriler genelde ekmek de almaktad\u0131r ve muhtemelen s\u00fct ald\u0131ktan sonra ekmek reyonunun yolunu tutacakt\u0131r. S\u00fct ve ekmek reyonlar\u0131 market i\u00e7erisinde birbirinden uzak lokasyonlara konumland\u0131r\u0131larak, s\u00fct alan m\u00fc\u015fterinin ekmek reyonuna giderken, pek \u00e7ok reyon ge\u00e7mesi zorunlu k\u0131l\u0131nabilir. B\u00f6ylece m\u00fc\u015fterinin yolculu\u011fu s\u0131ras\u0131nda herhangi bir \u00fcr\u00fcn sat\u0131n alma olas\u0131l\u0131\u011f\u0131 artt\u0131r\u0131labilir.\n\n* Ekmek alan m\u00fc\u015fterilerin Bisk\u00fcvi alma olas\u0131l\u0131\u011f\u0131 biraz d\u00fc\u015f\u00fck g\u00f6r\u00fcn\u00fcyor(%30). Bisk\u00fcvinin tek ba\u015f\u0131na al\u0131nma olas\u0131l\u0131\u011f\u0131 da d\u00fc\u015f\u00fck g\u00f6r\u00fcn\u00fcyor(%35). Bisk\u00fcvi sat\u0131\u015f\u0131n\u0131 artt\u0131rmak i\u00e7in, ekmek raf\u0131n\u0131n hemen yan\u0131na bisk\u00fcvi stand\u0131 konularak ve fiyat\u0131 ucuz olanlar \u00f6n plana yerle\u015ftirilip, fiyat\u0131 koyu etiketle bas\u0131larak m\u00fc\u015fterinin dikkatinin \u00e7ekilmesi sa\u011flanabilir.","d5673e97":"## 6). Veri Filtreleme","2b525f00":"## 2). Veri Haz\u0131rlama\n\nBirliktelik analizinin yap\u0131labilmesi i\u00e7in **Apriori** algoritmas\u0131n\u0131 kullanaca\u011f\u0131m. \n\n**mlxtend** k\u00fct\u00fcphanesinin **apriori** metodu, veri setini **True-False** dataframe olarak kabul etmektedir. \nVeriyi d\u00f6n\u00fc\u015ft\u00fcrmek i\u00e7in yine **mlxtend** k\u00fct\u00fcphanesinin veriyi d\u00f6n\u00fc\u015ft\u00fcrme metodlar\u0131n\u0131 kullanaca\u011f\u0131m. \nBu nedenle elimdeki ham veri setini, bu metodlar\u0131n isteyece\u011fi formata d\u00f6n\u00fc\u015ft\u00fcrece\u011fim.","c4084d24":"##  4). Birliktelik Analizi Uygulama : \n**mlxtend** k\u00fct\u00fcphanesinin **association_rules** metodu ile support de\u011ferleri elimizde olan veri seti kombinasyonuna birliktelik analizi uygulayaca\u011f\u0131m. \nSon \u00e7\u0131kt\u0131m\u0131 \"support\" ve \"confidence\" de\u011ferlerine g\u00f6re yorumlay\u0131p \u00f6rnek bir aksiyon fikri \u00f6nerece\u011fim\n\n**\u00d6rnek Birliktelik Analizi \u00c7\u0131kt\u0131s\u0131 Yorumlama :**\n* BISCUIT ve BREAD in birlikte g\u00f6r\u00fclme olas\u0131l\u0131\u011f\u0131 **support = 0.20** oldu\u011fundan **%20** dir.\n* BISCUIT al\u0131nd\u0131\u011f\u0131nda BREAD al\u0131nma olas\u0131l\u0131\u011f\u0131 ise **confidence = 0.571429** oldu\u011fundan **%57** civar\u0131d\u0131r.","f019ade1":" ## 1).Veri Okuma","ab94d9f8":"## 3). Apriori Algoritmas\u0131n\u0131 Uygulama\n\n* Apriori algoritmas\u0131n\u0131n \u00e7\u0131kt\u0131s\u0131nda, her bir kombinasyonun, t\u00fcm veri setindeki frekanslar\u0131n\u0131 elde etmi\u015f oluruz. \n\u00d6rne\u011fin a\u015fa\u011f\u0131daki \u00e7\u0131kt\u0131da sadece \"BISCUIT\" in t\u00fcm veri setinde g\u00f6r\u00fclme s\u0131kl\u0131\u011f\u0131(frekans) 0.35 iken, \"BISCUIT ve BREAD\" in t\u00fcm veri setinde birlikte g\u00f6r\u00fclme s\u0131kl\u0131\u011f\u0131(frekans) 0.20 dir.\n\n![image.png](attachment:image.png)","fa3b477d":"# Tavsiye Sistemleri\nSizlere **7** ad\u0131mda marketten ayn\u0131 anda al\u0131nan \u00fcr\u00fcnleri i\u00e7eren veri seti \u00fczerinden, Support ve Confidence de\u011ferlerini yorumlayarak basit tavsiye sistemi geli\u015ftirip, aksiyon fikri \u00f6nerece\u011fim.\n\n* **Support (Destek) :**  X ve Y nin birlikte g\u00f6r\u00fclme olas\u0131l\u0131\u011f\u0131\n\n* **Confidence (G\u00fcven):**  X'i alanlar\u0131n y\u00fczde \u015fu kadar\u0131 Y'yi de alacak","c67f3202":"## 5). Veri Filtreleme i\u00e7in Haz\u0131rl\u0131k\n\nBu k\u0131s\u0131mda en d\u00fc\u015f\u00fck, en y\u00fcksek confidence de\u011ferleri al\u0131narak, bu de\u011ferler veri filtrelemede kullan\u0131lacak ve aksiyon fikri \u00f6nerilecektir."}}