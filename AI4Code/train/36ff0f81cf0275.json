{"cell_type":{"196491b0":"code","932f7e59":"code","827999a2":"code","8a05a4c5":"code","22b2fb83":"code","87e7416a":"code","34bb8fb2":"code","9eabb7c1":"code","234f66cc":"code","0ffdcb7e":"code","8a040320":"code","fcec3b48":"code","409f3029":"code","c20d848a":"code","9d250773":"code","703761de":"code","3361ceb4":"code","72692f66":"code","67c7887f":"code","78e44cbe":"code","0f1f0ed9":"code","854e2907":"code","1b10f2b7":"code","c2399306":"code","06d71bd9":"code","4d1d4f21":"code","322bafe5":"code","46cc8649":"code","84e3b2e9":"code","dbe43af8":"code","ae2d08bd":"code","0abc94b7":"code","b65fb4c8":"code","8332f039":"code","3f06178e":"code","95e288a6":"code","7485d611":"code","477a9d49":"code","8621fc39":"code","94ce724c":"code","38efe7aa":"code","778568ac":"code","1e429f98":"code","c472922f":"code","8784d054":"markdown","ffba8ab4":"markdown","514b3ee1":"markdown","faaf66c1":"markdown","0a069a7c":"markdown","a4458389":"markdown","efc12f78":"markdown","fc3e8b19":"markdown","a983765c":"markdown","7d6d8210":"markdown","ca3bd97a":"markdown","4356a0e3":"markdown","626f0a42":"markdown","148b1c8d":"markdown","3e4aca55":"markdown","36aee9b4":"markdown"},"source":{"196491b0":"import pandas as pd\nimport numpy as np\nimport seaborn as sns","932f7e59":"sns.set_style('darkgrid')","827999a2":"times_df = pd.read_csv('\/kaggle\/input\/world-university-rankings\/timesData.csv' , thousands = \",\")","8a05a4c5":"shanghai_df = pd.read_csv('\/kaggle\/input\/world-university-rankings\/shanghaiData.csv')","22b2fb83":"times_df.head()","87e7416a":"times_df.describe()","34bb8fb2":"shanghai_df.head()","9eabb7c1":"shanghai_df.describe()","234f66cc":"def extract_info(input_df,name):\n    df  = input_df.copy()\n    info_df = pd.DataFrame({'nb_rows':df.shape[0], 'nb_columns': df.shape[1], 'name': name}, index = range(1))\n    return info_df","0ffdcb7e":"all_info = pd.concat([times_df.pipe(extract_info,'times'), shanghai_df.pipe(extract_info,'shanghai')])","8a040320":"all_info","fcec3b48":"def clean_world_rank(input_df):\n    df = input_df.copy()\n    df.world_rank = df.world_rank.str.split('-').str[0].str.split('=').str[0]\n    return df","409f3029":"common_col = set(shanghai_df.columns) & set(times_df.columns)","c20d848a":"list(common_col)","9d250773":"def filter_year(input_df,years):\n    df = input_df.copy()\n    return df.query('year in {}'.format(list(years)))","703761de":"common_years = set(times_df.year) & set(shanghai_df.year)","3361ceb4":"clean_times_df = times_df.loc[:,common_col].pipe(filter_year,common_years).pipe(clean_world_rank).assign(name='times')","72692f66":"clean_shanghai_df = shanghai_df.loc[:,common_col].pipe(filter_year,common_years).pipe(clean_world_rank).assign(name='shanghai')","67c7887f":"ranking_df = pd.concat([clean_times_df,clean_shanghai_df])","78e44cbe":"ranking_df","0f1f0ed9":"pd.isnull(ranking_df.total_score).sum()\/len(ranking_df)","854e2907":"ranking_df.drop('total_score', axis = 1, inplace = True)","1b10f2b7":"ranking_df","c2399306":"ranking_df.info()","06d71bd9":"ranking_df.info(memory_usage = 'deep')","4d1d4f21":"# Cast `world_rank` as type `int16`\nranking_df.world_rank = ranking_df.world_rank.astype('int16')\n\n# Cast `unversity_name` as type `category`\nranking_df.university_name = ranking_df.university_name.astype('category')\n\n# Cast `name` as type `category`\nranking_df.name = ranking_df.name.astype('category')","322bafe5":"ranking_df.info(memory_usage='deep')","46cc8649":"print(ranking_df.query(\"university_name == 'Massachusetts Institute of Technology (MIT)'\"))","84e3b2e9":"ranking_df.loc[lambda df: df.university_name == 'Massachusetts Institute of Technology (MIT)', 'university_name'] = 'Massachusetts Institute of Technology'","dbe43af8":"print(ranking_df.query(\"university_name == 'Massachusetts Institute of Technology'\"))","ae2d08bd":"top5_df = ranking_df.loc[lambda df : df.world_rank.isin(range(1,6)) , :]\ntop5_df.head()","0abc94b7":"def compute_set_similarity(df):\n    pivoted = df.pivot(values = 'world_rank', columns = 'name', index = 'university_name').dropna()\n    set_similarity = 100 * len(set(pivoted['shanghai'].index) & set(pivoted['times'].index))\/5\n    return set_similarity","b65fb4c8":"grouped_df = top5_df.groupby('year')","8332f039":"set_similarity_df = pd.DataFrame({'set_similarity' : grouped_df.apply(compute_set_similarity)}).reset_index()","3f06178e":"set_similarity_df","95e288a6":"import matplotlib.pyplot as plt\n%matplotlib inline","7485d611":"shanghai_df.plot.scatter('total_score', 'alumni', c='year', colormap='viridis')\nplt.show()","477a9d49":"times_df.country = times_df.country.replace('United States of America', 'USA').replace('United Kingdom', 'UK')","8621fc39":"count_df = times_df['country'].value_counts()[:10]","94ce724c":"count_df","38efe7aa":"count_df = count_df.reset_index()\ncount_df","778568ac":"count_df.columns = ['country', 'count']","1e429f98":"count_df","c472922f":"sns.barplot(x = 'country', y = 'count', data = count_df)\nsns.despine()\n\nplt.show()","8784d054":"Larger lengths of names are not preffered during visualizations","ffba8ab4":"Grouping yearwise and finding similarity","514b3ee1":"# Visualizing data using Matplotlib","faaf66c1":"# Using Groupby to find top 5 universities (yearwise)","0a069a7c":"A lot of data is missing in total_score so it's better to drop this entry.","a4458389":"###### Further analysis reveals that a lot of entries in 'total_score' are missing so it's better to drop these rows","efc12f78":"This function will help to find similarity between both times_df and shanghai_df","fc3e8b19":"Creating a function to clean data before our analysis","a983765c":"This line will form a df of all those universities that have been in top5 ranking atleast once","7d6d8210":"Finding no of entries from each country","ca3bd97a":"##### Read csv files and display them","4356a0e3":"##### It is observed that same university has two different names in our datasets Massachusetts Institute of Technology (MIT) & Massachusetts Institute of Technology","626f0a42":"Combining both df on the basis of common columns","148b1c8d":"##### Extracting info about both df","3e4aca55":"Rename the columns","36aee9b4":"##### Importing important libraries"}}