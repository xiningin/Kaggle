{"cell_type":{"4a44534f":"code","98483a99":"code","95d2149a":"code","10d924fd":"code","cc030820":"code","2ee402aa":"code","df20b00d":"code","46700e66":"code","b54f4348":"code","656a0bca":"code","e6007933":"code","2f0e9abb":"markdown"},"source":{"4a44534f":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport statistics as stats #for calculating modes\nimport calendar #convert week number and day number to english\nfrom tabulate import tabulate","98483a99":"bikeTrips = pd.read_csv('..\/input\/divvytrips\/bq-results-20210803-120019-ppbroowt6dxs.csv')\nbikeTrips.head()","95d2149a":"#Use the histogram plot to group rides by ride duration \nmemberLengths, memberBins, memberPatches = plt.hist(bikeTrips[bikeTrips['member_casual'] == 'member'][['ride_length']],500,[0,8000]) \ncasualLengths, casualBins, casualPatches = plt.hist(bikeTrips[bikeTrips['member_casual'] == 'casual'][['ride_length']],500,[0,8000])\nplt.close()","10d924fd":"#Plot the distribution of ride lengths. \nplt.plot(memberBins[1:], memberLengths, label = 'Members')\nplt.plot(casualBins[1:], casualLengths, label = 'Casual')\nplt.xlabel('Ride Length (s)')\nplt.ylabel('Count')\nplt.title('Ride Length of Member and Casual Users')\nplt.xlim([50,4000])\nplt.legend()","cc030820":"#Use the calendar class to create my own list that matches BigQuery syntax of Sunday = 0, Sat = 6.\nday_name = calendar.day_name[6:] + calendar.day_name[:6] \nday_abbr = calendar.day_abbr[6:] + calendar.day_abbr[:6]","2ee402aa":"#Calculate a bunch of stuff for people who prefer numbers to distributions.\nmemMean = np.mean(bikeTrips[bikeTrips['member_casual'] == 'member']['ride_length'])\nmemSTD = np.std(bikeTrips[bikeTrips['member_casual'] == 'member']['ride_length'])\nmemModeDay = day_name[stats.mode(bikeTrips[bikeTrips['member_casual'] == 'member']['day_of_week'])-1]\ncasMean = np.mean(bikeTrips[bikeTrips['member_casual'] == 'casual']['ride_length'])\ncasSTD = np.std(bikeTrips[bikeTrips['member_casual'] == 'casual']['ride_length'])\ncasModeDay = day_name[stats.mode(bikeTrips[bikeTrips['member_casual'] == 'casual']['day_of_week'])-1]","df20b00d":"#format and present the data in a table. Tabulate doesn't look great but it fits in this.\nheader = ['','Mean Ride Length', 'Ride Length Deviation','Mode Day']\ntable = [['Member', memMean, memSTD, memModeDay],['Casual', casMean,casSTD,casModeDay]]\nprint(tabulate(table,headers=header))","46700e66":"#Group the columns of interest by day. Loop over the days of the week and calculate the mean\/ride count for each day\nmemLengthByDay = []\ncasLengthByDay = []\nmemRideCountByDay = []\ncasRideCountByDay = []\nfor i in range(0,7):\n    memLengthByDay.append(np.mean(bikeTrips[(bikeTrips['day_of_week'] == i + 1) & (bikeTrips['member_casual'] == 'member')]['ride_length']))\n    casLengthByDay.append(np.mean(bikeTrips[(bikeTrips['day_of_week'] == i + 1) & (bikeTrips['member_casual'] == 'casual')]['ride_length']))\n    memRideCountByDay.append(len(bikeTrips[(bikeTrips['day_of_week'] == i + 1) & (bikeTrips['member_casual'] == 'member')]['ride_length']))\n    casRideCountByDay.append(len(bikeTrips[(bikeTrips['day_of_week'] == i + 1) & (bikeTrips['member_casual'] == 'casual')]['ride_length']))","b54f4348":"#Here I offset the two bar plots by 0.4 to show both ride groups on the same chart\nplt.bar(np.arange(0,7) - 0.2, memLengthByDay, width = 0.4, label = 'Member')\nplt.bar(np.arange(0,7) + 0.2, casLengthByDay, width = 0.4, label = 'Casual')\nplt.xticks(np.arange(0,7), day_abbr)\nplt.legend()\nplt.ylabel('Ride Length (s)')\nplt.title('Mean Ride Duration by Day')","656a0bca":"plt.bar(np.arange(0,7) - 0.2, memRideCountByDay, width = 0.4, label = 'Member')\nplt.bar(np.arange(0,7) + 0.2, casRideCountByDay, width = 0.4, label = 'Casual')\nplt.xticks(np.arange(0,7), day_abbr)\nplt.legend()\nplt.ylabel('Ride Count)')\nplt.title('Ride Count by Day')","e6007933":"#some more questions I might eventually get around to looking at: \n    #How does seasonality affect ridership and how do the effects differ between member and casual riders?\n    #How does the composition of casual and member riders change across the different stations\n    #Where are the riders going?","2f0e9abb":"## "}}