{"cell_type":{"33557247":"code","ccb317bb":"code","b328e4dd":"code","9d511f78":"code","d82aa19f":"code","d9d592be":"code","adc40fd3":"code","447e584b":"code","92771f7b":"code","6a0df6f5":"code","88900e0b":"code","9ed695a3":"code","4a3e594a":"code","079b4b59":"code","65fae232":"code","ec9ebc17":"code","8399c8fd":"code","af7de1c6":"code","049a2a75":"code","3f7c72e0":"code","b73a2904":"code","8f98b0e9":"code","4d251b4c":"code","6f2241a0":"code","342412a6":"code","28718f01":"code","259c3e0a":"code","c54707fe":"code","e7af4480":"code","9de750b1":"code","2dbc772d":"code","42603a52":"code","3ba2329a":"code","92edf5fc":"code","df6cb6aa":"code","2a0b7bc2":"code","eb4bb1f3":"code","6cf10968":"code","9787ff06":"code","6a70c43a":"code","8feb9022":"code","88ba310b":"markdown","e02a9670":"markdown","2d1b10c4":"markdown","a800a845":"markdown","87cb2767":"markdown","2287dd55":"markdown","af895f6e":"markdown","0fd41a9c":"markdown","2824ca76":"markdown","ce7c767b":"markdown"},"source":{"33557247":"import pandas as pd","ccb317bb":"elec_meter_data_all = pd.read_csv(\"..\/input\/buildingdatagenomeproject2\/electricity.csv\", index_col='timestamp', parse_dates=True)","b328e4dd":"elec_meter_data_all.info()","9d511f78":"#list(elec_meter_data_all.columns)","d82aa19f":"site_data_example = elec_meter_data_all.loc[:,(elec_meter_data_all.columns.str.contains(\"Panther\"))&(elec_meter_data_all.columns.str.contains(\"office\"))]\nsite_data_example_2017 = site_data_example.truncate(before='2017-01-01')","d9d592be":"site_data_example_2017.info()","adc40fd3":"site_data_example_2017.plot(figsize=(15,50), subplots=True);","447e584b":"weather_data = pd.read_csv(\"..\/input\/buildingdatagenomeproject2\/weather.csv\", index_col='timestamp', parse_dates=True)","92771f7b":"weather_data.info()","6a0df6f5":"weather_data_site = weather_data[weather_data.site_id == 'Panther']","88900e0b":"weather_data_site.head()","9ed695a3":"weather_data_site[\"airTemperature\"].plot(figsize=(20,4))","4a3e594a":"sample_meter = pd.DataFrame(site_data_example_2017['Panther_office_Lavinia'])","079b4b59":"sample_meter.head()","65fae232":"sample_meter.plot(figsize=(10,4))","ec9ebc17":"sample_meter.truncate(before='02-10-2017', after='02-20-2017').plot(figsize=(10,4))","8399c8fd":"sample_meter_nooutlier = sample_meter[sample_meter > 10]","af7de1c6":"sample_meter_nooutlier.plot(figsize=(10,4))","049a2a75":"sample_meter_nooutlier.truncate(before='02-10-2017', after='02-20-2017').plot(figsize=(10,4))","3f7c72e0":"sample_meter_nooutlier.info()","b73a2904":"sample_meter_nooutlier_nogaps = sample_meter_nooutlier.fillna(method='ffill')","8f98b0e9":"sample_meter_nooutlier_nogaps.info()","4d251b4c":"sample_meter_nooutlier_nogaps.truncate(before='02-10-2017', after='02-20-2017').plot(figsize=(10,4))","6f2241a0":"temp_data = pd.DataFrame(weather_data_site[\"airTemperature\"].truncate(before='01-01-2017'))","342412a6":"temp_data.info()","28718f01":"comparison = pd.concat([temp_data, sample_meter_nooutlier_nogaps], axis=1)","259c3e0a":"comparison.info()","c54707fe":"comparison.head()","e7af4480":"comparison_merged = pd.merge(temp_data, sample_meter_nooutlier_nogaps, left_index=True, right_index=True, how='outer')","9de750b1":"comparison_merged.info()","2dbc772d":"comparison.plot(figsize=(20,10), subplots=True)","42603a52":"comparison.plot(kind='scatter', x='airTemperature', y='Panther_office_Lavinia', figsize=(10,10))","3ba2329a":"comparison.resample(\"D\").mean().plot(kind='scatter', x='airTemperature', y='Panther_office_Lavinia', figsize=(10,10))","92edf5fc":"import seaborn as sns","df6cb6aa":"comparison.info()","2a0b7bc2":"comparison[comparison.airTemperature > 25].info()","eb4bb1f3":"def make_color_division(x):\n  if x < 25:\n    return \"Heating\"\n  else:\n    return \"NoHeating\"","6cf10968":"comparison = comparison.resample(\"D\").mean()","9787ff06":"comparison['HeatingStatus'] = comparison.airTemperature.apply(lambda x: make_color_division(x))","6a70c43a":"comparison.head()","8feb9022":"g = sns.lmplot(x=\"airTemperature\", y=\"Panther_office_Lavinia\", hue=\"HeatingStatus\",\n               truncate=True, data=comparison)\n\ng.set_axis_labels(\"Outdoor Air Temperature\", \"Average Hourly kWH\")","88ba310b":"# Merge Temperature and Electricity Data - Combining Data Sets\n\nOnce again, we need to converge two data sets -- this time we will use both the `.concat()` and the `.merge()` function to show the differences","e02a9670":"## Using the `.merge()` function\n\nthe `.merge()` function is useful in converging data sets that don't fit perfectly together. Merge has several additional attributes that indicate which columns will be merged upon and **how** the merge will occur.\n\nRefer to Pandas cheat sheet for more information: https:\/\/pandas.pydata.org\/Pandas_Cheat_Sheet.pdf","2d1b10c4":"# Load the weather data file - Cleaning Data and Dealing with Missing Data\n\nIn this case, we will use weather data files to supplement the analysis and converge two different datasets\n\nFirst we will have to find the right weather data set (can be found in the `weather.csv` file)","a800a845":"Let's take a look at the data","87cb2767":"# Advanced Visualizations using Seaborn\n\nIt looks there are two linear models with a change point happening in this situation - let's use some more advanced visualization techniques using the Seaborn library to visualize the two regions and draw a regression line between them\n\nhttps:\/\/seaborn.pydata.org\/","2287dd55":"# Finding and removing outliers in the energy data\n\nThis is a common scenario with IoT devices and we can filter those outlier and fill the gaps ","af895f6e":"## Using `.concat()` to combine data sets","0fd41a9c":"# Weather Influence on Energy Consumption of a Building\n\n- Created by Clayton Miller - clayton@nus.edu.sg - miller.clayton@gmail.com\n\nWe learned in the last notebook that the floor area is a good normalizing factor for energy consumption. The question we will look into now is how weather influences energy consumption\n\n","2824ca76":"# Analyze the weather influence on energy consumption\n\nIn order to understand how weather and energy are related -- we will use a `scatterplot` to visualize the comparison","ce7c767b":"## Filling gaps in data\n\nWe can fill the gap left by filtering the outliers by using the `.fillna()` function"}}