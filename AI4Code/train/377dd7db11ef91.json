{"cell_type":{"3a9b30e1":"code","99928de8":"code","76bcdc94":"code","785c7a99":"code","0ff6e69b":"code","71b368a2":"code","0e89254b":"code","220e9551":"code","8684a7cc":"code","1f202780":"code","60359436":"code","9ec160f7":"code","c5e7c93a":"code","13efbb2d":"markdown","78813bf2":"markdown","12f704f9":"markdown","40be6744":"markdown","565b2b9b":"markdown","d4688b95":"markdown","034131f7":"markdown","bf7c65ba":"markdown","f68b89db":"markdown","bd6b81d1":"markdown","284cb239":"markdown"},"source":{"3a9b30e1":"import pandas as pd\npd.set_option(\"display.float_format\", lambda x: \"%.2f\" % x)","99928de8":"purchases = pd.read_csv(\"..\/input\/users-and-purchases\/purchases.csv\")\nusers = pd.read_csv(\"..\/input\/users-and-purchases\/users.csv\")\ndf = purchases.merge(users, how=\"inner\", on=\"uid\")\ndf.head()","76bcdc94":"# Looking how many data we have\ndf.shape","785c7a99":"df.groupby([\"country\", \"device\", \"gender\", \"age\"]).agg({\"price\": \"sum\"})","0ff6e69b":"agg_df = df.groupby([\"country\", \"device\", \"gender\", \"age\"]).agg({\"price\": \"sum\"}).sort_values(\"price\", ascending=False)\nagg_df.head()","71b368a2":"agg_df.reset_index(inplace=True)\nagg_df.head()","0e89254b":"agg_df[\"age_cat\"] = pd.DataFrame(\n    (pd.cut(agg_df[\"age\"], [0, 18, 25, 40,agg_df[\"age\"].max()], \n            labels=[\"0_18\", \"19_25\", \"26_40\", \"40_\"+str(agg_df[\"age\"].max())])))\n\nagg_df.head()","220e9551":"agg_df[\"customers_level_based\"] = [row[0] + \"_\" + row[1].upper() + \"_\" + row[2] + \"_\" + row[5] \n                                   for row in agg_df.values]\nagg_df.index = agg_df[\"customers_level_based\"]\nagg_df.drop([\"country\", \"device\", \"gender\", \"age_cat\", \"customers_level_based\", \"age\"], axis=1, inplace=True)\nagg_df.reset_index(inplace=True)\nagg_df.head()","8684a7cc":"agg_df = agg_df.groupby(\"customers_level_based\").agg({\"price\": \"mean\"})\nagg_df.head()","1f202780":"agg_df = agg_df.reset_index()","60359436":"agg_df[\"segment\"] = pd.qcut(agg_df[\"price\"], 4, labels=[\"D\", \"C\", \"B\", \"A\"])\nagg_df.head()","9ec160f7":"segment_df = agg_df.groupby(\"segment\").agg({\"price\": \"mean\"})\nsegment_df.head()","c5e7c93a":"new_user = \"TUR_IOS_F_40_75\"\nagg_df[agg_df[\"customers_level_based\"] == new_user]","13efbb2d":"Turning variable \"age\" to a categorical variable and adding it to the data with name \"age_cat\"","78813bf2":"We have now a new defined customers based on their countries, age range, devices they use and gender. We can see how much on average every customer level spends.","12f704f9":"Reading datasets and merge them by a common variable which is user id in our case","40be6744":"Sorting variables based on price and defining a new dataframe","565b2b9b":"Description of price segmentation","d4688b95":"What are the total revenue by country, device, gender, age variables ?","034131f7":"PROJECT: LEVEL BASED PERSONA DESCRIPTION, SIMPLE SEGMENTATION AND LEVEL BASED CLASSIFICATION\n\nPurpose of the Project:\n    - Making level based persona description\n    - Separating customer descriptions into segments using qcut function\n    - Classification of a new customer based on the basic segmentation\n","bf7c65ba":"Segmentation of new customers based on price - spending behaviour","f68b89db":"Defining new level based customers and adding to the data set","bd6b81d1":"Turning index names to variable names","284cb239":"Let us find which price segment a woman from Turkey who are 42 years old and uses IOS belongs to"}}