{"cell_type":{"723f5972":"code","42da38ae":"code","8aaafa46":"code","e90c66c6":"code","7dd33ceb":"code","f5d385a9":"code","7ac5d298":"code","4221a154":"code","a11bd9e2":"code","29b871e7":"code","41755119":"code","81478906":"code","f83e8913":"markdown","e886e2be":"markdown","bcbefe3d":"markdown","32cadbd7":"markdown","17b71dae":"markdown"},"source":{"723f5972":"# packages\n\n# standard\nimport numpy as np\nimport pandas as pd\nimport time\n\n# plots\nimport matplotlib.pyplot as plt\nimport matplotlib\nimport plotly.express as px\nimport seaborn as sns\n\n# Maps\nimport folium","42da38ae":"# load data \/ preview\ndf_2018 = pd.read_csv('..\/input\/us-electric-power-generators\/y2018.csv')\ndf_2018.head(10)","8aaafa46":"# type conversions\ndf_2018.Plant_ID = df_2018.Plant_ID.astype(str)\ndf_2018.Nameplate = df_2018.Nameplate.astype(str)","e90c66c6":"# remove duplicates\ndf_2018['ID_2'] = df_2018.Plant_ID + '-' + df_2018.Technology\ndf_2018['ID_3'] = df_2018.Plant_ID + '-' + df_2018.Technology + '-' + df_2018.Nameplate\ndf_2018 = df_2018.drop_duplicates(subset='ID_2', keep='first') # ignoring different nameplates...\ndf_2018 = df_2018.reset_index(drop=True)","7dd33ceb":"# show result w\/o duplicates\ndf_2018.head(10)","f5d385a9":"# structure of data frame\ndf_2018.info()","7ac5d298":"# distribution of technology\ndf_2018.Technology.value_counts().plot(kind='bar')\nplt.title('Technology')\nplt.grid()\nplt.show()","4221a154":"# distribution by state\ndf_2018.State.value_counts().plot(kind='bar', figsize=(14,4))\nplt.title('State')\nplt.grid()\nplt.show()","a11bd9e2":"# add auxiliary column for colour\ndf_2018['COLOR'] = df_2018.Technology.astype('category').cat.codes","29b871e7":"# interactive map\ndf_plot = df_2018\n\nzoom_factor = 4 # inital map zoom\n\nmy_map_1 = folium.Map(location=[40,-95], zoom_start=zoom_factor)\n\nv_min = np.min(df_plot.COLOR)\nv_max = np.max(df_plot.COLOR)\n\nfor i in range(0,df_plot.shape[0]):\n    v = df_2018.iloc[i]['COLOR']\n    v_norm = (v-v_min)\/(v_max-v_min)\n    i_col = int(v_norm*256)\n    current_color = matplotlib.colors.to_hex(matplotlib.cm.rainbow(i_col))\n    folium.CircleMarker(\n       location=[df_plot.iloc[i]['Latitude'], df_plot.iloc[i]['Longitude']],\n       radius=5,\n       popup='Technology: ' + df_plot.iloc[i]['Technology'] + '| Id: ' + df_plot.iloc[i]['Plant_ID'],\n       color='black',\n       weigth=1, # stroke width in pixel\n       opacity=0.5, # stroke opacity\n       fill=True,\n       fill_color=current_color,\n       fill_opacity=0.25\n    ).add_to(my_map_1)\n\nmy_map_1 # display","41755119":"# interactive map - coal plants only\ndf_plot = df_2018[df_2018.Technology=='Coal']\n\nzoom_factor = 4 # inital map zoom\n\nmy_map_1 = folium.Map(location=[40,-95], zoom_start=zoom_factor)\n\nfor i in range(0,df_plot.shape[0]):\n    folium.CircleMarker(\n       location=[df_plot.iloc[i]['Latitude'], df_plot.iloc[i]['Longitude']],\n       radius=5,\n       popup='Technology: ' + df_plot.iloc[i]['Technology'] + ' | Id: ' + df_plot.iloc[i]['Plant_ID'],\n       color='black',\n       weigth=1, # stroke width in pixel\n       opacity=0.5, # stroke opacity\n       fill=True,\n       fill_color='orange',\n       fill_opacity=0.25\n    ).add_to(my_map_1)\n\nmy_map_1 # display","81478906":"# interactive map - hydroelectric plants only\ndf_plot = df_2018[df_2018.Technology=='Hydroelectric']\n\nzoom_factor = 4 # inital map zoom\n\nmy_map_1 = folium.Map(location=[40,-95], zoom_start=zoom_factor)\n\nfor i in range(0,df_plot.shape[0]):\n    folium.CircleMarker(\n       location=[df_plot.iloc[i]['Latitude'], df_plot.iloc[i]['Longitude']],\n       radius=5,\n       popup='Technology: ' + df_plot.iloc[i]['Technology'] + ' | Id: ' + df_plot.iloc[i]['Plant_ID'],\n       color='black',\n       weigth=1, # stroke width in pixel\n       opacity=0.5, # stroke opacity\n       fill=True,\n       fill_color='blue',\n       fill_opacity=0.25\n    ).add_to(my_map_1)\n\nmy_map_1 # display","f83e8913":"<a id='2'><\/a>\n# Map of all Plants","e886e2be":"<a id='4'><\/a>\n# Map of Hydroelectric Plants","bcbefe3d":"<a id='3'><\/a>\n# Map of Coal Plants","32cadbd7":"# Table of Contents\n* [Data Preparation and Basic EDA](#1)\n* [Map of all Plants](#2)\n* [Map of Coal Plants](#3)\n* [Map of Hydroelectric Plants](#4)","17b71dae":"<a id='1'><\/a>\n# Data Preparation and Basic EDA"}}