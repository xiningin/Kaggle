{"cell_type":{"7d4b1c3f":"code","3586004d":"code","7b8b1ab5":"code","883ca747":"code","fe4626ed":"code","0a113418":"markdown","01428b97":"markdown"},"source":{"7d4b1c3f":"import numpy as np \nimport pandas as pd \nimport os\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom datetime import date","3586004d":"#Functions to load the data\ndef get_data_vote_description():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_vote_description.csv')\n    df['year'] = df['date'].astype(str).str[0:4]\n    df['month'] = df['date'].astype(str).str[5:7]\n    df['day'] = df['date'].astype(str).str[8:10]\n    df['datetime'] = pd.to_datetime(df[['year', 'month', 'day']], errors = 'coerce')\n    df['percentage of votes in favor'] = 100*df['pour']\/df['nb votants']\n    df['accepted'] = 'no'\n    df.loc[df['pour'] >= df['requis'], 'accepted'] = 'yes'\n    df = df.drop(columns=['date'])\n    df.columns = df.columns.str.replace('demandeur ', '')\n    return df\n\ndef get_data_political_parties():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_political_parties.csv')\n    df = df.drop(columns=['code'])\n    return df\n\ndef get_data_deputies():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_deputies.csv')\n    #create the value age from the date of birth of the deputies\n    df['age']  = df['date of birth'].astype(str).str[0:4]\n    df['age']  = date.today().year - df['age'].astype(int)\n    df['departement'] = df['dep'].astype(str) + ' ('+ df['num_dep'] + ')'\n    df['full_name'] = df['first name'].astype(str) + ' '+ df['family name']\n    df['title'] = 'Mr.'\n    df.loc[df['sex']=='female', 'title'] = 'Mme.'\n    return df\n\n\ndef get_data_organs():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_organs.csv')\n    return df\n\ndef get_data_deputies_in_organs():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_deputies_missions.csv')\n    return df\n\ndef get_data_votes():\n    df = pd.read_csv('\/kaggle\/input\/french-national-assembly-open-data\/df_votes.csv', \n    dtype={\n        'pour': float,\n        'contre': float,\n        'non votants' : float,\n        'abstentions' : float,\n        'par delegation' : float\n            })\n    df['vote'] = 1\n    df['cause'] = df['cause'].fillna('none')\n    df['cause'] = df['cause'].astype(\"category\")\n    df['deputy code'] = df['deputy code'].astype(\"category\")\n    df['scrutin'] = df['scrutin'].astype(\"category\")\n    return df","7b8b1ab5":"df_deputies = get_data_deputies()\ndf_deputies","883ca747":"df_vote_description = get_data_vote_description()\ndf_political_parties = get_data_political_parties()\ndf_organs = get_data_organs()\ndf_deputies_missions = get_data_deputies_in_organs()\ndf_votes = get_data_votes()","fe4626ed":"df = pd.merge(pd.DataFrame(df_deputies['pol party'].value_counts()), df_political_parties, left_index=True, right_on='abreviated_name')\ncolors = df['color'].tolist()\n\nfig, ax = plt.subplots(figsize=(7, 7))\nax.pie(df_deputies['pol party'].value_counts(), labels=(df_deputies['pol party'].value_counts().index + ' (' + df_deputies['pol party'].value_counts().map(str) + ')'), \n    wedgeprops = { 'linewidth' : 7, 'edgecolor' : 'white' }, colors=colors)\nax.set_title(\"Political parties in the french national assembly\")\np = plt.gcf()\np.gca().add_artist(plt.Circle( (0,0), 0.7, color='white'))\nplt.show()","0a113418":"## Let's do some simple data visualization to start","01428b97":"Seems like the loading function is working. <br>\nLet's load the rest of the data"}}