{"cell_type":{"06b90912":"code","c76c00fe":"code","1d411bf0":"code","d7ed665d":"code","bebf1c41":"code","a29c68a0":"code","5149e7e4":"code","1de9c202":"code","ac32c8ea":"code","025651e0":"code","7b3592ba":"code","7d82f450":"code","961d8872":"code","b7337f89":"code","34f126da":"code","5fbb0d1b":"code","c5942807":"code","89789774":"code","1d50a13a":"code","29e62c8f":"code","c62501ed":"code","649f6a4c":"code","8cbb8b2f":"code","7d309ea3":"code","c9985e08":"code","94691ab3":"code","296ebf56":"code","9104d509":"code","d1e84a8b":"code","f56b43f0":"code","dffae369":"code","e8ff17b9":"code","f9cacfc9":"code","3047b836":"code","1eeffd86":"code","eafc30c3":"code","d8ced07c":"markdown","f10b9fe3":"markdown","fe457415":"markdown","86b76a1d":"markdown","9bd44820":"markdown","6f919502":"markdown","0531d7bf":"markdown","b7ea732a":"markdown","30c10a0e":"markdown","045a047e":"markdown","55c3ba61":"markdown","3c5bc80e":"markdown","8c9466d0":"markdown","0e0064fa":"markdown","3c414814":"markdown","73dd054d":"markdown","fbe570ed":"markdown","a153b038":"markdown","f9c863bd":"markdown","b594bc1c":"markdown"},"source":{"06b90912":"# Import relevant libraraies\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport missingno as msno\n%matplotlib inline\nfrom scipy import stats","c76c00fe":"pwd","1d411bf0":"# Load the data from Part 1\ntrain = pd.read_csv(\"..\/input\/airbnb-recruiting-new-user-bookings\/train_users_2.csv\")\ntrain.head()","d7ed665d":"country_dict = {val:num for num,val in enumerate(set(train.country_destination))}\nprint(country_dict)","bebf1c41":"train.gender.replace('-unknown-', np.nan, inplace=True)","a29c68a0":"plt.figure(figsize=(8,4))\nnum_women = sum(train.gender == 'FEMALE')\nnum_men = sum(train.gender == 'MALE')\n\nm_des = train.loc[train.gender == 'MALE', 'country_destination'].value_counts()\/num_women*100\nf_des = train.loc[train.gender == 'FEMALE', 'country_destination'].value_counts()\/num_men*100\n\nm_des.plot(kind='bar', position=0, label='Male',color = 'red')\nf_des.plot(kind='bar', position=1, label='Female',color='green')\n\nplt.legend()\nplt.xlabel('country')\nplt.ylabel('count')\n\nplt.show()","5149e7e4":"chi_test_1 = train[(train.country_destination != 'NDF') & \n                   (train.country_destination != 'other') & \n                   (train.gender != 'OTHER') & \n                   (train.gender.notnull())]\nchi_test_1 = chi_test_1[['id', 'gender', 'country_destination']]\nchi_test_1.head()","1de9c202":"observed = chi_test_1.pivot_table('id', ['gender'], 'country_destination', aggfunc='count').reset_index()\ndel observed.columns.name\nobserved = observed.set_index('gender')\nobserved","ac32c8ea":"chi2, p, dof, expected = stats.chi2_contingency(observed)","025651e0":"chi2","7b3592ba":"p","7d82f450":"train.loc[train.age < 18, 'age'] = np.nan\ntrain.loc[train.age > 95, 'age'] = np.nan","961d8872":"train.age = train.age.replace(\"NaN\", np.nan)","b7337f89":"plt.figure(figsize=(8,4))\nyoung = sum(train.loc[train.age <= 36, 'country_destination'].value_counts())\nold = sum(train.loc[train.age > 36, 'country_destination'].value_counts())\n\nyounger_des = train.loc[train.age <= 36, 'country_destination'].value_counts()\/young*100\nolder_des = train.loc[train.age > 36, 'country_destination'].value_counts()\/old*100\n\nyounger_des.plot(kind='bar', position=0, label='younger',color = 'orange')\nolder_des.plot(kind='bar', position=1, label='older',color='brown')\n\nplt.legend()\nplt.xlabel('country')\nplt.ylabel('count')\n\nplt.show()","34f126da":"chi_test_2 = train[(train.country_destination != 'NDF') & \n                   (train.country_destination != 'other') & \n                   (train.age.notnull())]\nchi_test_2 = chi_test_2[['id', 'age', 'country_destination']]\nchi_test_2.head()","5fbb0d1b":"# observed2 = chi_test_2.pivot_table('id', ['age'], 'country_destination', aggfunc='count').reset_index()\n# del observed2.columns.name\n# observed = observed2.set_index('age')\n# observed\n\n\n# chi2, p1, dof, expected = stats.chi2_contingency(observed)","c5942807":"train['age_subset'] = pd.cut(train[\"age\"], [0, 30, 60, 90])\nplt.figure(figsize=(16,4))\nsns.countplot(x=\"age_subset\",hue=\"country_destination\", data=train[train['country_destination'] != 'NDF'])","89789774":"# drop age_range\ntrain.drop(['age_subset'], axis=1, inplace=True)","1d50a13a":"train.date_account_created = pd.to_datetime(train.date_account_created)\ntrain.date_first_booking = pd.to_datetime(train.date_first_booking)","29e62c8f":"# First Booking date\nplt.figure(figsize=(16,4))\ntrain.date_first_booking.value_counts().plot(kind='line')","c62501ed":"plt.figure(figsize=(20,4))\ntrain.time_subset = pd.cut(train.date_first_booking, [pd.to_datetime(20120101, format='%Y%m%d'), \n                                                              pd.to_datetime(20120601, format='%Y%m%d'),\n                                                              pd.to_datetime(20130101, format='%Y%m%d'), \n                                                              pd.to_datetime(20130601, format='%Y%m%d'),\n                                                              pd.to_datetime(20140101, format='%Y%m%d'),\n                                                              pd.to_datetime(20140601, format='%Y%m%d')])\nsns.countplot(train.time_subset)","649f6a4c":"# Time Period 2012-13\nplt.figure(figsize=(12,4))\nperiod_12_13 = train[train.date_first_booking >= pd.to_datetime(20120101, format='%Y%m%d')]\nperiod_12_13 = period_12_13[period_12_13.date_first_booking < pd.to_datetime(20130101, format='%Y%m%d')]\nperiod_12_13.date_first_booking.value_counts().plot(kind='line', linewidth=2, color='#FD5C64')\nplt.show()","8cbb8b2f":"# Time Period 2013-14\nplt.figure(figsize=(12,4))\nperiod_13_14 = train[train.date_first_booking >= pd.to_datetime(20130101, format='%Y%m%d')]\nperiod_13_14 = period_13_14[period_13_14.date_first_booking < pd.to_datetime(20140101, format='%Y%m%d')]\nperiod_13_14.date_first_booking.value_counts().plot(kind='line', linewidth=2, color='#FD5C64')\nplt.show()","7d309ea3":"# Time Period 201401-201406\nplt.figure(figsize=(7,4))\nperiod_14_15 = train[train.date_first_booking >= pd.to_datetime(20140101, format='%Y%m%d')]\nperiod_14_15 = period_14_15[period_14_15.date_first_booking <= pd.to_datetime(20140701, format='%Y%m%d')]\nperiod_14_15.date_first_booking.value_counts().plot(kind='line', linewidth=2, color='#FD5C64')\nplt.show()","c9985e08":"train.date_first_booking = pd.to_datetime(train.date_first_booking)","94691ab3":"train.date_first_booking.describe()","296ebf56":"weekdays2 = []\nfor date in train.date_first_booking:\n    weekdays2.append(date.weekday())\nweekdays2 = pd.Series(weekdays2)","9104d509":"plt.figure(figsize=(7,3))\nsns.barplot(x = weekdays2.value_counts().index, y=weekdays2.value_counts().values, order=range(0,7))\nplt.xlabel('Day')","d1e84a8b":"train.date_account_created = pd.to_datetime(train.date_account_created)","f56b43f0":"train.date_account_created.describe()","dffae369":"plt.figure(figsize=(16,4))\ntrain.date_account_created.value_counts().plot(kind='line')","e8ff17b9":"# Time Period 2012-13\nplt.figure(figsize=(12,4))\nperiod_13_14 = train[train.date_account_created >= pd.to_datetime(20130101, format='%Y%m%d')]\nperiod_13_14 = period_13_14[period_13_14.date_account_created < pd.to_datetime(20140101, format='%Y%m%d')]\nperiod_13_14.date_account_created.value_counts().plot(kind='line', linewidth=2, color='#FD5C64')\nplt.show()","f9cacfc9":"weekdays = []\nfor date in train.date_account_created:\n    weekdays.append(date.weekday())\nweekdays = pd.Series(weekdays)","3047b836":"plt.figure(figsize=(7,3))\nsns.barplot(x = weekdays2.value_counts().index, y=weekdays2.value_counts().values, order=range(0,7))\nplt.xlabel('Day')","1eeffd86":"plt.figure(figsize=(12,6))\ntrain[train['country_destination'] != 'NDF']['date_account_created'].value_counts().plot(kind='line', color='blue')\ntrain[train['country_destination'] == 'NDF']['date_account_created'].value_counts().plot(kind='line',color='green')","eafc30c3":"plt.figure(figsize=(20,6))\nsns.barplot(x=train.age, y=train.country_destination, hue=train.gender, data=train)","d8ced07c":"YoY increase in number of accounts created for Airbnb","f10b9fe3":"Number of users have increased, but with those who dont book a destination have as well","fe457415":"At a micro level the major bump seems to be in October, which coincides with the peaks First Bookings.","86b76a1d":"Weekday barplot is also largely similar to the date of first bookings","9bd44820":"###### Date Account Created","6f919502":"1. https:\/\/www.kaggle.com\/pmarcelino\/comprehensive-data-exploration-with-python\n2. https:\/\/www.kaggle.com\/kanncaa1\/data-sciencetutorial-for-beginners\n3. https:\/\/www.kaggle.com\/justk1\/airbnb\n4. https:\/\/www.kaggle.com\/davidgasquez\/user-data-exploration\n5. https:\/\/www.kaggle.com\/kevinwu06\/airbnb-exploratory-analysis\n6. https:\/\/www.kaggle.com\/rounakbanik\/airbnb-new-user-bookings","0531d7bf":"#### Timeseries Analysis","b7ea732a":"**Age**","30c10a0e":"#### References","045a047e":"chi square test results --> Null Hypothesis","55c3ba61":"All 3 time periods show a bump in the months of June-Nov, and a lower booking rate for for 1st half of the year","3c5bc80e":"Hypothesis Testing:\n- Null Hypothesis: No relationship\n- Primary Hypothesis: Relationship Exits\n- Alpha = 5%","8c9466d0":"###### Chi Square Square Significance Test for Gender vs Destination","0e0064fa":"#### Gender","3c414814":"#### Airbnb - Part 2 of 3 (Multivariate Analysis)\n\nAn initial bivariate and multivariate analysis of the features and the interplay between them. I use the data I cleaned in part 1 and build this analyses on top of that. I made use of some great suggestions made in kaggle kernels, the references for which are listed below. This analysis is by no means exhaustive, it is just a n initial eyballing of the data.","73dd054d":"##### - Aditya","fbe570ed":"There dosen't exist a 'major' bifurcaton on the basis of gender in country destinations, but an overall eyeballing a higher % of Females travelling to US compared to Males","a153b038":"Weekedns show a lower number of bookings, and Mon-Wed seem to be hottest period when first bookings were made.","f9c863bd":"Splitting age groups based on the Mean age (~36), we see a minor preference of the young gen to stay in US","b594bc1c":"p-value\/significance less than Alpha, so reject Null Hypothesis --> Relationship b\/w gender and destination exists"}}