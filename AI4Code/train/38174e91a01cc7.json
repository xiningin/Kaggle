{"cell_type":{"e7a607c1":"code","9e21b8b0":"code","22375f5c":"code","0ba7afb8":"code","0bba0038":"code","2c35bd38":"code","e43b6ed6":"code","8199b16c":"code","c3f1e3f7":"code","d84f7981":"code","7d344c9a":"code","87327280":"code","2440ed94":"code","426e7caf":"code","eb6e8439":"code","081647e1":"code","f4baed8e":"code","30dcbe3f":"code","358adf2d":"code","829b91d6":"code","fa2707ad":"code","86bb8196":"code","2a47241e":"code","adcdf09d":"code","e57a8f99":"code","af924024":"code","6546f83d":"code","fabb3546":"code","079b2c35":"code","c1334f31":"code","c282d526":"code","35cde2d1":"code","6a31ab31":"code","82a28ad6":"code","dc34fbac":"code","d9d76f5f":"code","7b5a2c6d":"code","77b2a898":"markdown","1ade9971":"markdown","9ce9a182":"markdown","d5c2016e":"markdown","8e59e1a5":"markdown","fc645d49":"markdown","fe24d044":"markdown","c44d4bf9":"markdown","bff59806":"markdown","3a8d7dba":"markdown","6bc6989e":"markdown","91413fbb":"markdown","2c7bf8a1":"markdown","d5b69225":"markdown","297f3820":"markdown","b9e4f361":"markdown","12e4058f":"markdown","966056bf":"markdown"},"source":{"e7a607c1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","9e21b8b0":"import numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\n\ndf = pd.read_csv('..\/input\/..\/input\/telco-customer-churn\/WA_Fn-UseC_-Telco-Customer-Churn.csv')","22375f5c":"df.info","0ba7afb8":"df.isnull().sum()","0bba0038":"df.head()","2c35bd38":"df['Churn'].value_counts(normalize = True)","e43b6ed6":"filt = df['Churn']=='Yes'\nbins = np.arange(0,75, 5)\n\nplt.hist(df[filt]['tenure'], bins = bins)\nplt.xlabel('Tenure (months)')\nplt.ylabel('Count of churned customers')\nplt.title('Churn based on tenure')","8199b16c":"#To indicate how many services each customer signed up for (Phone, Streaming Tv\/Movies, Internet)\n\nisY = lambda x:int(x == 'Yes' or x=='DSL' or x=='Fiber optic')\ncountFactors = lambda row: isY(row['PhoneService']) + isY(row['StreamingMovies']) + isY(row['InternetService']) + isY(row['StreamingTV'])\n                               \ndf['Services'] = df.apply(countFactors, axis = 1)\ndf[['PhoneService', 'StreamingMovies', 'InternetService','StreamingTV','Churn','Services']].head(10)","c3f1e3f7":"#Looking at number of churn based on services signed up for\nchurn_count = df[['Services','Churn']].value_counts().unstack()\nchurn_count['Churn%'] = churn_count['Yes']\/(churn_count['No'] + churn_count['Yes'])\nchurn_count['Churn%'] = churn_count['Churn%'].round(decimals = 4)\nchurn_count","d84f7981":"bins = np.arange(0,130, 5)\n\nplt.hist(df['MonthlyCharges'], bins = bins)\nplt.xlabel('Monthly Charges')\nplt.ylabel('Count of accounts')\nplt.title('Distribution of Monthly Charges')","7d344c9a":"filt = df['Churn']=='Yes'\nbins = np.arange(0,145, 5)\n\nplt.hist(df[filt]['MonthlyCharges'], bins = bins)\nplt.xlabel('Monthly Charges')\nplt.ylabel('Count of accounts')\nplt.title('Distribution of Monthly Charges for Churned customers')","87327280":"df_phoneservice = df[df['PhoneService']=='Yes']\n\nv = sns.catplot(x = 'PhoneService',kind = 'count', hue = 'Churn', data = df_phoneservice)\nv.set(title = 'Churn for Phone Service', xlabel = None)\n\nax = v.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","2440ed94":"df_is = df[(df['InternetService']=='DSL')|(df['InternetService']=='Fiber optic')]\n\nv2 = sns.catplot(x = 'InternetService',kind = 'count', hue = 'Churn', data = df_is)\nv2.set(title = 'Churn for Internet Service', xlabel = None)\n\nax = v2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","426e7caf":"dfst = df[df['StreamingTV']=='Yes']\n\nv6 = sns.catplot(x = 'StreamingTV',kind = 'count', hue = 'Churn', data = dfst)\nv6.set(title = 'Churn for Streaming TV', xlabel = None)\n\nax = v6.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","eb6e8439":"#To focus on movies first,select only those who subscribed to movie streaming\ndfsm = df[df['StreamingMovies']=='Yes']\n\nv7 = sns.catplot(x = 'StreamingMovies',kind = 'count', hue = 'Churn', data = dfsm)\n\nax = v7.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","081647e1":"#To focus on movies first,select only those who subscribed to movie streaming\ndf_movies = df[df['StreamingMovies']=='Yes']\nplt_movie = sns.catplot(x = 'gender',kind = 'count', hue = 'Churn', data = df_movies)\nplt_movie.set(title = 'Churn based on Gender (Streaming Movies)', xlabel = None)\n\nax = plt_movie.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","f4baed8e":"plt_movie2 = sns.catplot(x = 'PaymentMethod',kind = 'count', hue = 'Churn', data = df_movies, aspect = 2)\nplt_movie2.set(title = 'Churn based on Payment Method (Streaming Movies)', xlabel = None)\n\nax = plt_movie2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')\n    \n#high churn for people who pay via electronic check, mailed check % is next highest","30dcbe3f":"plt_movie3 = sns.catplot(x = 'Contract',kind = 'count', hue = 'Churn', data = df_movies)\nplt_movie3.set(title = 'Churn based on Contract type (Streaming Movies)', xlabel = None)\n\nax = plt_movie3.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","358adf2d":"plt_movie4 = sns.catplot(x = 'TechSupport',kind = 'count', hue = 'Churn', data = df_movies)\nplt_movie4.set(title = 'Churn based on TechSupport (Streaming Movies)', xlabel = None)\n\nax = plt_movie4.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","829b91d6":"#To only select those who subscribed to tv streaming\ndf_tv = df[df['StreamingTV']=='Yes']","fa2707ad":"plt_tv = sns.catplot(x = 'gender',kind = 'count', hue = 'Churn', data = df_tv)\nplt_tv.set(title = 'Churn based on Gender (Streaming TV)', xlabel = None)\n\nax = plt_tv.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","86bb8196":"plt_tv2 = sns.catplot(x = 'PaymentMethod',kind = 'count', hue = 'Churn', data = df_tv, aspect = 2)\nplt_tv2.set(title = 'Churn based on Payment Method (Streaming TV)', xlabel = None)\n\nax = plt_tv2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')\n    \n#same trends as movies, high churn for electronic check, followed by mailed check. Need to get them to shift to more automatic payment modes","2a47241e":"plt_tv3 = sns.catplot(x = 'Contract',kind = 'count', hue = 'Churn', data = df_tv)\nplt_tv3.set(title = 'Churn based on Contract type (Streaming TV)', xlabel = None)\n\nax = plt_tv3.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","adcdf09d":"plt_tv4 = sns.catplot(x = 'TechSupport',kind = 'count', hue = 'Churn', data = df_tv)\nplt_tv4.set(title = 'Churn based on Tech Support (Streaming TV)', xlabel = None)\n\nax = plt_tv4.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","e57a8f99":"#To only select those who subscribed for internet\ndf_internet_FO = df[(df['InternetService']=='Fiber optic')]\ndf_internet_DSL = df[(df['InternetService']=='DSL')]","af924024":"plt_internet_FO = sns.catplot(x = 'gender',kind = 'count', hue = 'Churn', data = df_internet_FO)\nplt_internet_FO.set(title = 'Churn based on Gender (Fiber Optic)', xlabel = None)\n\nax = plt_internet_FO.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","6546f83d":"plt_internet_DSL = sns.catplot(x = 'gender',kind = 'count', hue = 'Churn', data = df_internet_DSL)\nplt_internet_DSL.set(title = 'Churn based on Gender (DSL)', xlabel = None)\n\nax = plt_internet_DSL.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","fabb3546":"plt_internet_FO2 = sns.catplot(x = 'PaymentMethod',kind = 'count', hue = 'Churn', data = df_internet_FO, aspect = 2)\nplt_internet_FO2.set(title = 'Churn based on Payment Method (Fiber)', xlabel = None)\n\nax = plt_internet_FO2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","079b2c35":"plt_internet_DSL2 = sns.catplot(x = 'PaymentMethod',kind = 'count', hue = 'Churn', data = df_internet_DSL, aspect = 2)\nplt_internet_DSL2.set(title = 'Churn based on Payment Method (DSL)', xlabel = None)\n\nax = plt_internet_DSL2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","c1334f31":"plt_internet_FO3 = sns.catplot(x = 'Contract',kind = 'count', hue = 'Churn', data = df_internet_FO)\nplt_internet_FO3.set(title = 'Churn based on Contract Type(Fiber)', xlabel = None)\n\n\nax = plt_internet_FO3.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","c282d526":"plt_internet_DSL3 = sns.catplot(x = 'Contract',kind = 'count', hue = 'Churn', data = df_internet_DSL)\nplt_internet_DSL3.set(title = 'Churn based on Contract Type (DSL)', xlabel = None)\n\n\nax = plt_internet_DSL3.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","35cde2d1":"plt_internet_FO4 = sns.catplot(x = 'TechSupport',kind = 'count', hue = 'Churn', data = df_internet_FO)\nplt_internet_FO4.set(title = 'Churn based on Tech Support (Fiber Optic)', xlabel = None)\n\nax = plt_internet_FO4.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","6a31ab31":"plt_internet_DSL4 = sns.catplot(x = 'TechSupport',kind = 'count', hue = 'Churn', data = df_internet_DSL)\nplt_internet_DSL4.set(title = 'Churn based on Tech Support (DSL)', xlabel = None)\n\nax = plt_internet_DSL4.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","82a28ad6":"#To only select those who subscribed for phone service\ndf_phone = df[df['PhoneService']=='Yes']","dc34fbac":"plt_phone = sns.catplot(x = 'gender',kind = 'count', hue = 'Churn', data = df_phone)\nplt_phone.set(title = 'Churn based on Gender (Phone)', xlabel = None)\n\nax = plt_phone.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","d9d76f5f":"plt_phone2 = sns.catplot(x = 'PaymentMethod',kind = 'count', hue = 'Churn', data = df_phone, aspect = 2)\nplt_phone2.set(title = 'Churn based on Payment Method (Phone)', xlabel = None)\n\nax = plt_phone2.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","7b5a2c6d":"plt_phone3 = sns.catplot(x = 'Contract',kind = 'count', hue = 'Churn', data = df_phone)\nplt_phone3.set(title = 'Churn based on Contract type (Phone)', xlabel = None)\n\nax = plt_phone3.facet_axis(0,0)\nfor p in ax.patches:\n    ax.annotate((p.get_height()), \n                   (p.get_x() + p.get_width() \/ 2., p.get_height()), ha = 'center', va = 'center', \n                   xytext = (0, 9), textcoords = 'offset points')","77b2a898":"## Our Question: Which service has the most churn and what are the trends?","1ade9971":"We see that there are no null values in the dataframe","9ce9a182":"# Exploring the data","d5c2016e":"## **Internet (Fiber & DSL)**","8e59e1a5":"# Comparing Churn %\n* The lowest churn % comes from customers who signed up for 1 service\n* The highest churn comes from customers with 2 services (35%)\n* At least 30% of customers with 2 or more services churned","fc645d49":"## **Phone Service**","fe24d044":"This dataset has the following information:\n\n**Demographics**: Gender, senior citizen, partner, dependents\n\n**Services:** Phone service, multiple lines, internet service, online security, online backup, tech support, streamingtv, streamingmovies\n\n**Account info:** Contract, paperless billing, monthly charges, payment method, total charges, tenure\n\nWe will focus on the following services as these are likely to be the main services customers signed up for.\n1. Phone Service\n2. Internet Service\n3. Streaming TV\n4. Streaming Movies","c44d4bf9":"A large amount of churn comes from customers paying 70 - 105 per month.","bff59806":"Now we will look at the no. of services each customer signed up and if they churn","3a8d7dba":"# **Churn % for services based on:**\n1. Gender\n2. Payment method\n3. Contract type","6bc6989e":"Observations on churn %:\n* Churn is around 25% for phone service\n* Churn is a lot higher for Fiber optic compared to DSL users\n* About 30% of Streaming TV customers churn\n* About 30% of Streaming Movies customers churn","91413fbb":"The most common monthly charges are 15 - 25 and 70 - 90 per month.","2c7bf8a1":"Around 25% of the customers in the dataset are churned customers","d5b69225":"# Looking at the churn for each service - Phone, Internet, Streaming","297f3820":"## **Streaming TV**","b9e4f361":"## **Streaming Movies**","12e4058f":"Overall trends observed across the 4 services\n\n1. Gender does not impact churn rates\n2. Automatic payment methods have low churn rates. Manual payment see a much higher churn % with electronic check having the highest churn %\n3. Customers that also signed up for tech support have a lower churn compared to customers without tech support\n4. The most common churn based on contract type is for month-to-month customers","966056bf":"Looking at churn based on tenure months, we see that the highest churn occurs at customers with a tenure of 0 to 5 months. "}}