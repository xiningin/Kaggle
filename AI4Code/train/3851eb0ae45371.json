{"cell_type":{"772be4a4":"code","1e79b8f7":"code","1e88d93d":"code","9f269f05":"code","f7285094":"code","8ecb92e2":"code","cda9b174":"code","39e474f9":"code","04c7e664":"code","0091186c":"code","2a66148f":"code","cff8fe59":"code","0ab9092e":"code","1e0c1c19":"code","8d2522f9":"code","c30b4174":"code","6991a9c6":"code","8513a869":"markdown","cccee794":"markdown","93bc9280":"markdown","744596c1":"markdown"},"source":{"772be4a4":"import pandas as pd\nimport numpy as np\n%matplotlib inline","1e79b8f7":"df = pd.read_csv('..\/input\/international-airline-passengers\/international-airline-passengers.csv',index_col='Month',parse_dates=True)","1e88d93d":"df.dropna(inplace=True)","9f269f05":"df.columns\n","f7285094":"df.columns=['Thousands of Passengers']","8ecb92e2":"df.index","cda9b174":"df.index.freq = 'MS'\ndf.index","39e474f9":"df.head()","04c7e664":"from statsmodels.tsa.holtwinters import SimpleExpSmoothing\n\nspan = 12\nalpha = 2\/(span+1)\n\ndf['EWMA12'] = df['Thousands of Passengers'].ewm(alpha=alpha,adjust=False).mean()\ndf['SES12']=SimpleExpSmoothing(df['Thousands of Passengers']).fit(smoothing_level=alpha,optimized=False).fittedvalues.shift(-1)\ndf.head()","0091186c":"from statsmodels.tsa.holtwinters import ExponentialSmoothing\n\ndf['DESadd12'] = ExponentialSmoothing(df['Thousands of Passengers'], trend='add').fit().fittedvalues.shift(-1)\ndf.head()","2a66148f":"df[['Thousands of Passengers','EWMA12','DESadd12']].iloc[:24].plot(figsize=(12,6)).autoscale(axis='x',tight=True);","cff8fe59":"df['DESmul12'] = ExponentialSmoothing(df['Thousands of Passengers'], trend='mul').fit().fittedvalues.shift(-1)\ndf.head()","0ab9092e":"df[['Thousands of Passengers','DESadd12','DESmul12']].iloc[:24].plot(figsize=(12,6)).autoscale(axis='x',tight=True);","1e0c1c19":"df['TESadd12'] = ExponentialSmoothing(df['Thousands of Passengers'],trend='add',seasonal='add',seasonal_periods=12).fit().fittedvalues\ndf.head()","8d2522f9":"df['TESmul12'] = ExponentialSmoothing(df['Thousands of Passengers'],trend='mul',seasonal='mul',seasonal_periods=12).fit().fittedvalues\ndf.head()","c30b4174":"df[['Thousands of Passengers','TESadd12','TESmul12']].plot(figsize=(12,6)).autoscale(axis='x',tight=True);","6991a9c6":"df[['Thousands of Passengers','TESadd12','TESmul12']].iloc[:24].plot(figsize=(12,6)).autoscale(axis='x',tight=True);","8513a869":"## Triple Exponential Smoothing","cccee794":"In <strong>Double Exponential Smoothing<\/strong> (aka Holt's Method) we introduce a new smoothing factor $\\beta$ (beta) that addresses trend:\n\n\\begin{split}l_t &= (1 - \\alpha) l_{t-1} + \\alpha x_t, & \\text{    level}\\\\\nb_t &= (1-\\beta)b_{t-1} + \\beta(l_t-l_{t-1}) & \\text{    trend}\\\\\ny_t &= l_t + b_t & \\text{    fitted model}\\\\\n\\hat y_{t+h} &= l_t + hb_t & \\text{    forecasting model (} h = \\text{# periods into the future)}\\end{split}\n\n\nBecause we haven't yet considered seasonal fluctuations, the forecasting model is simply a straight sloped line extending from the most recent data point. We'll see an example of this in upcoming lectures.\n\nWith <strong>Triple Exponential Smoothing<\/strong> (aka the Holt-Winters Method) we introduce a smoothing factor $\\gamma$ (gamma) that addresses seasonality:\n\n\\begin{split}l_t &= (1 - \\alpha) l_{t-1} + \\alpha x_t, & \\text{    level}\\\\\nb_t &= (1-\\beta)b_{t-1} + \\beta(l_t-l_{t-1}) & \\text{    trend}\\\\\nc_t &= (1-\\gamma)c_{t-L} + \\gamma(x_t-l_{t-1}-b_{t-1}) & \\text{    seasonal}\\\\\ny_t &= (l_t + b_t) c_t & \\text{    fitted model}\\\\\n\\hat y_{t+m} &= (l_t + mb_t)c_{t-L+1+(m-1)modL} & \\text{    forecasting model (} m = \\text{# periods into the future)}\\end{split}","93bc9280":"## Double Exponential Smoothing\nWe can also address different types of change (growth\/decay) in the trend. If a time series displays a straight-line sloped trend, you would use an <strong>additive<\/strong> adjustment. If the time series displays an exponential (curved) trend, you would use a <strong>multiplicative<\/strong> adjustment.\n\n","744596c1":"### Setting a DatetimeIndex Frequency\nNote that our DatetimeIndex does not have a frequency. In order to build a Holt-Winters smoothing model, statsmodels needs to know the frequency of the data (whether it's daily, monthly etc.)."}}