{"cell_type":{"dce4ad06":"code","742f0955":"code","d228d459":"code","fa5156c2":"code","b983c8b7":"code","a815f5ec":"code","61243fbf":"code","6d87da6f":"code","9cec115f":"code","e72ada4b":"code","db2abf85":"code","231fe48a":"code","5f4ffbdc":"code","61c8fb7c":"code","b62781c2":"code","85bc9409":"code","f813f723":"code","5eeedcc1":"code","86119d91":"code","1fc7c405":"code","3f3047a7":"code","467c723c":"code","523de0aa":"code","fda761d8":"code","bcf8ad68":"code","e1e4ba3d":"code","9b7eccb8":"code","c219dd03":"code","2f7d7553":"code","93e5f560":"code","be8da702":"code","94bd42aa":"code","20883843":"code","43cc4ae7":"code","84cbaebc":"code","86b27c84":"code","e700fe84":"code","341438d1":"code","9445c802":"code","9417602e":"code","1657afaf":"code","85e2463c":"code","ad0e36b1":"code","e53fd575":"code","cfb43a4d":"code","541f5e2d":"code","29b3a68d":"code","196d1bcb":"code","aa5e358c":"code","03261c5a":"code","84cf06f5":"code","e1b536ae":"code","63f1a67b":"code","c01e96dd":"code","9764a82d":"code","891869de":"code","5c868dfd":"code","4d3af85c":"code","0dc7c85d":"code","acdac7b3":"code","6dc6b7fa":"code","4f12ed44":"code","3760b5dc":"code","91941b6a":"code","92357756":"code","a4b3bf58":"code","c2485ca9":"code","a5760be5":"code","1b008965":"code","5f81b188":"code","924756b4":"code","b7a82f9b":"code","d5ce5c9e":"code","e4400889":"code","0676cdb3":"code","ddd777fa":"code","8b924eb1":"code","16db3a02":"code","edc3fc39":"code","124d3ed6":"code","8f6b62c7":"code","b92b1206":"code","fda19382":"code","be2f7483":"code","f17b7563":"code","4a4b16d8":"code","b9d5c499":"code","df873b01":"code","ee87fa17":"code","0b60a32f":"code","61bf79d5":"markdown","09b7ca64":"markdown","26d9c540":"markdown","8373a703":"markdown","11bb8292":"markdown","fd9d5360":"markdown","cfd5d938":"markdown","4adf5f17":"markdown","eea72f92":"markdown","52c5d71f":"markdown","35dbbd63":"markdown","ad1ce904":"markdown","ba4172ae":"markdown","11e939df":"markdown","6d508a34":"markdown","30972301":"markdown","d636bd89":"markdown","ea34fd1d":"markdown","64e874f2":"markdown","9e421afe":"markdown","db738b07":"markdown","5cc648c7":"markdown","c312d336":"markdown","66142607":"markdown","180bb036":"markdown","08a23f82":"markdown","c37c9cc9":"markdown","d39c1f9e":"markdown","0abf3810":"markdown","0aabdf68":"markdown","3ecfbf86":"markdown","538b2073":"markdown","0d86fe4a":"markdown","260d0cee":"markdown","462b0162":"markdown","e0487366":"markdown","da96c412":"markdown","d4a36bc1":"markdown","4660355a":"markdown","366af62a":"markdown","03e8eeeb":"markdown","7ad00818":"markdown","8cc5de3f":"markdown","9d9f62f3":"markdown","6e990f08":"markdown","a5a6c7c7":"markdown","de2bcab5":"markdown","ff6073bb":"markdown","e93701f6":"markdown","099faeee":"markdown","66ac31dd":"markdown","4f376629":"markdown","63e78921":"markdown","482b7395":"markdown","030878b0":"markdown","736c6af7":"markdown","e23b0240":"markdown","80d72599":"markdown","6470a2af":"markdown","51104470":"markdown","21bdeaf3":"markdown","6f1dea70":"markdown","2de3fdd6":"markdown","69e23245":"markdown","bb305825":"markdown","4a1a28f1":"markdown","4e156338":"markdown","49721086":"markdown","daae15d6":"markdown","228fec75":"markdown","2a42f97b":"markdown","883fb936":"markdown","b4eaf8cd":"markdown"},"source":{"dce4ad06":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set(color_codes = True)","742f0955":"pima = pd.read_csv('..\/input\/diabetes.csv')","d228d459":"pima","fa5156c2":"pima.head()","b983c8b7":"pima.tail()","a815f5ec":"pima.shape","61243fbf":"pima.info()","6d87da6f":"pima.describe()","9cec115f":"pima.describe().T","e72ada4b":"pima['Outcome'].value_counts()","db2abf85":"plt.figure(figsize=(15,6))\nsns.countplot(pima['Outcome'])\nplt.ylabel('Number of People')","231fe48a":"pima[pima['Glucose'] == 0]","5f4ffbdc":"missingGlucose = pima[pima['Glucose'] == 0].shape[0]\nprint (\"Number of zeros in colum Glucose: \", missingGlucose)","61c8fb7c":"missingBP = pima[pima['BloodPressure'] == 0].shape[0]\nprint (\"Number of zeros in colum BloodPressure: \", missingBP)","b62781c2":"missingST = pima[pima['SkinThickness'] == 0].shape[0]\nprint (\"Number of zeros in colum SkinThickness: \", missingST)","85bc9409":"missingInsulin = pima[pima['Insulin'] == 0].shape[0]\nprint (\"Number of zeros in colum Insulin: \", missingInsulin)","f813f723":"missingBMI = pima[pima['BMI'] == 0].shape[0]\nprint (\"Number of zeros in colum BMI: \", missingBMI)","5eeedcc1":"pima_copy = pima.copy(deep = True)","86119d91":"pima_copy[['Glucose','BloodPressure','SkinThickness','Insulin','BMI']] = pima_copy[['Glucose','BloodPressure','SkinThickness','Insulin','BMI']].replace(0,np.NaN)\nprint(pima_copy.isnull().sum())","1fc7c405":"pima.hist(figsize = (20,20))","3f3047a7":"plt.figure(figsize=(15,6))\nsns.distplot(pima['Glucose'], kde = True, rug = True)","467c723c":"plt.figure(figsize=(15,6))\nsns.boxplot(pima['Glucose'])","523de0aa":"plt.figure(figsize=(15,6))\nsns.distplot(pima['BloodPressure'], kde = True, rug = True)","fda761d8":"plt.figure(figsize=(15,6))\nsns.boxplot(pima['BloodPressure'])","bcf8ad68":"plt.figure(figsize=(15,6))\nsns.distplot(pima['SkinThickness'], kde = True, rug = True)","e1e4ba3d":"plt.figure(figsize=(15,6))\nsns.boxplot(pima['SkinThickness'])","9b7eccb8":"plt.figure(figsize=(15,6))\nsns.distplot(pima['Insulin'], kde = True, rug = True)","c219dd03":"plt.figure(figsize=(15,6))\nsns.boxplot(pima['Insulin'])","2f7d7553":"plt.figure(figsize=(15,6))\nsns.distplot(pima['BMI'], kde = True, rug = True)","93e5f560":"plt.figure(figsize=(15,6))\nsns.boxplot(pima['BMI'])","be8da702":"pima_copy['Glucose'].fillna(pima_copy['Glucose'].mean(), inplace = True)","94bd42aa":"pima_copy['BloodPressure'].fillna(pima_copy['BloodPressure'].mean(), inplace = True)","20883843":"pima_copy['SkinThickness'].fillna(pima_copy['SkinThickness'].median(), inplace = True)","43cc4ae7":"pima_copy['Insulin'].fillna(pima_copy['Insulin'].median(), inplace = True)","84cbaebc":"pima_copy['BMI'].fillna(pima_copy['BMI'].median(), inplace = True)","86b27c84":"print(pima_copy.isnull().sum())","e700fe84":"pima_copy.describe().T","341438d1":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['Pregnancies'], bins=20, rug = True)\nplt.ylabel('Number of People')","9445c802":"print(\"Average of children had by Pima woman: \", pima_copy['Pregnancies'].mean())","9417602e":"pima_copy['Pregnancies'].median()","1657afaf":"preg = pima_copy[pima_copy['Pregnancies'] >= 1].shape[0]\nprint('Number of Pima Woman who had children: ', preg)","85e2463c":"notPreg = pima_copy[pima_copy['Pregnancies'] == 0].shape[0]\nprint('Number of Pima woman who did not have children: ', notPreg)","ad0e36b1":"pregPlusDiabetes = pima_copy[(pima_copy['Pregnancies'] >= 1) & (pima_copy['Outcome'] == 1)].shape[0]\nprint('Number of woman who have children and are diabetic: ',pregPlusDiabetes)","e53fd575":"pregPlusNotDiabetes = pima_copy[(pima_copy['Pregnancies'] >= 1) & (pima_copy['Outcome'] == 0)].shape[0]\nprint('Number of woman who have children and are not diabetic: ',pregPlusNotDiabetes)","cfb43a4d":"notPregPlusDiabetes = pima_copy[(pima_copy['Pregnancies'] == 0) & (pima_copy['Outcome'] == 1)].shape[0]\nprint('Number of woman who do not have children and are diabetic: ',notPregPlusDiabetes)","541f5e2d":"notPregPlusNotDiabetes = pima_copy[(pima_copy['Pregnancies'] == 0) & (pima_copy['Outcome'] == 0)].shape[0]\nprint('Number of woman who do not have children and are not diabetic: ',notPregPlusNotDiabetes)","29b3a68d":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['Glucose'], bins=20, rug = True)","196d1bcb":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['BloodPressure'], bins=20, rug = True)","aa5e358c":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['SkinThickness'], bins=20, rug = True)","03261c5a":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['Insulin'], bins = 50)","84cf06f5":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['BMI'], bins = 50)","e1b536ae":"print('Average BMI: ', pima_copy['BMI'].mean())","63f1a67b":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['DiabetesPedigreeFunction'], bins = 50)","c01e96dd":"plt.figure(figsize=(15,6))\nsns.distplot(pima_copy['Age'], bins = 50)","9764a82d":"print(\"Minimum age: \",pima_copy['Age'].min())","891869de":"print(\"Maximum age: \",pima_copy['Age'].max())","5c868dfd":"corr = pima_copy.corr()\ncorr","4d3af85c":"plt.figure(figsize=(15,10))\nsns.heatmap(corr, annot = True, cmap = 'plasma', vmin = -1, vmax = 1)","0dc7c85d":"print('Average Glucose for Pima woman who has diabetes: ', pima_copy[pima_copy['Outcome'] == 1]['Glucose'].mean())","acdac7b3":"print('Average Glucose for Pima woman who does not have diabetes: ', pima_copy[pima_copy['Outcome'] == 0]['Glucose'].mean())","6dc6b7fa":"sns.boxplot(pima['Outcome'],pima['Glucose'])","4f12ed44":"print('Average BMI for Pima woman who has diabetes: ', pima_copy[pima_copy['Outcome'] == 1]['BMI'].mean())","3760b5dc":"print('Average BMI for Pima woman who does not have diabetes: ', pima_copy[pima_copy['Outcome'] == 0]['BMI'].mean())","91941b6a":"plt.figure(figsize=(15,6))\nsns.boxplot(pima_copy['Outcome'],pima_copy['Age'])","92357756":"oneOutcome = pima_copy[pima_copy['Outcome'] == 1]\nprint(\"Minimum age of Pima woman who has Diabetes: \",oneOutcome['Age'].min())","a4b3bf58":"print(\"Maximum age of Pima woman who has Diabetes: \",oneOutcome['Age'].max())","c2485ca9":"zeroOutcome = pima_copy[pima_copy['Outcome'] == 0]\nprint(\"Minimum age of Pima woman who does not have Diabetes: \",zeroOutcome['Age'].min())","a5760be5":"zeroOutcome = pima_copy[pima_copy['Outcome'] == 0]\nprint(\"Maximum age of Pima woman who does not have Diabetes: \",zeroOutcome['Age'].max())","1b008965":"print('Average Age of Pima woman who has diabetes: ',pima_copy[pima_copy['Outcome'] == 1]['Age'].mean())","5f81b188":"print('Average Age of Pima woman who does not have diabetes: ',pima_copy[pima_copy['Outcome'] == 0]['Age'].mean())","924756b4":"plt.figure(figsize=(15,6))\nsns.countplot(x = 'Pregnancies', hue = 'Outcome', data = pima_copy)","b7a82f9b":"print('Average Skin Thickness of Pima woman who has diabetes: ', pima_copy[pima_copy['Outcome'] == 1]['SkinThickness'].mean())","d5ce5c9e":"print('Average Skin Thickness of Pima woman who does not have diabetes: ', pima_copy[pima_copy['Outcome'] == 0]['SkinThickness'].mean())","e4400889":"print('Average Insulin of Pima woman who has diabetes: ', pima_copy[pima_copy['Outcome'] == 1]['Insulin'].mean())","0676cdb3":"print('Average Insulin of Pima woman who does not have diabetes: ', pima_copy[pima_copy['Outcome'] == 0]['Insulin'].mean())","ddd777fa":"sns.pairplot(pima_copy)","8b924eb1":"pima_copy.hist(figsize = (20,20))","16db3a02":"from sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn import metrics","edc3fc39":"x = pima_copy.drop('Outcome', axis  = 1)","124d3ed6":"y = pima_copy['Outcome']","8f6b62c7":"X_train, X_test, y_train, y_test = train_test_split(x, y, test_size = 0.3, random_state = 17)","b92b1206":"mdl = LogisticRegression()","fda19382":"fit = mdl.fit(X_train, y_train)","be2f7483":"pred = mdl.predict(X_test)","f17b7563":"confusion = metrics.confusion_matrix(y_test,pred)\nconfusion","4a4b16d8":"label = [\"No (0)\",\" Yes (1)\"]\nsns.heatmap(confusion, annot=True, xticklabels=label, yticklabels=label)","b9d5c499":"metrics.accuracy_score(y_test,pred)","df873b01":"metrics.precision_score(y_test,pred)","ee87fa17":"x = pima.drop('Outcome', axis  = 1)\ny = pima['Outcome']\nX_train, X_test, y_train, y_test = train_test_split(x, y, test_size = 0.3, random_state = 17)\nmdl = LogisticRegression()\nfit = mdl.fit(X_train, y_train)\npred = mdl.predict(X_test)\npred\nmetrics.accuracy_score(y_test,pred)","0b60a32f":"metrics.precision_score(y_test,pred)","61bf79d5":"'SkinThickness' has 227 zero invalid values that is why lower limit and Q1 (25th) quartile are same","09b7ca64":"Let us check how data is distributed for columns or variables that have an invalid zero value\n\nSee if there are any outliers\n\nSee if data is normally distributed, left skewed or right skewed\n\nWe will use boxplot and distplot(Histogram)","26d9c540":"Accuracy = TP+TN\/TP+FP+FN+TN\n\n= (45 + 132) \/ (45 + 18 + 36 + 132)\n\n= 177 \/ 231\n\n= 0.7662337662337662\n\nSo we can say that our model is 76% accurate","8373a703":"Seems to be a normal distribution","11bb8292":"We will build a model on clean data (pima_copy)","fd9d5360":"*************************************************************","cfd5d938":"A confusion matrix is a table that is often used to describe the performance of a classification model on a set of test data for which the true values are known.","4adf5f17":"I will replace zero (0) values with NaN values and then sum the NaN values in each column to know get count of NaN values","eea72f92":"**Visualization**","52c5d71f":"Precision: Precsion tells us about when model predicts yes, how often is it correct.\n\nPrecision = TP \/ (TP + FP)\n\n= 45 \/ (45 + 18)\n\n= 45 \/ 63\n\n= 0.7142857142857143\n\nSo when our model predict 1 and actual it is 1 then it's precision is 71%","35dbbd63":"**DATA CLEANING**","ad1ce904":"Let us calculate the average of children had by Pima woman","ba4172ae":"**From above heatmap, I can conclude following:**\n\n1. There is no feature variable that has strong correlation with target 'Outcome' as there is no +0.70 which indicates a strong uphill (positive) linear relationship\n\n\n2. Best predictor of target variable 'Outcome' is 'Glucose' --> 0.49 which is near to 0.50 which indicates a moderate uphill (positive) relationship\n\n\n3. Second best predictor of target variable 'Outcome' is 'BMI' --> 0.31 which indicates a weak uphill (positive) linear relationship\n\n\n4. Correlation between 'BMI' and 'SkinThickness' is 0.54 which indicates BMI increases with increase in Skin Thickness\n\n\n5. Correlation between 'Age' and 'Pregnancies' is 0.54 which indicates increase in age increases chances of having a child","11e939df":"**Problem Statement: **","6d508a34":"I checked on Internet for BMI scale and here it is: \n\nUnderweight: BMI is less than 18.5\n\nNormal weight: BMI is 18.5 to 24.9\n\nOverweight: BMI is 25 to 29.9\n\nObese: BMI is 30 or more","30972301":"Build a model so when a new person walks-in with these values of variables we feed it to the model and model tells us what is the probability of 0 or 1","d636bd89":"Since 'SkinThickness' had more than 227 zeros values and we replaced it with Median, data is not so representative.\nBut we can say that more the skin thickness more is the probability of getting diabetes\n","ea34fd1d":"**************************************************************","64e874f2":"**Visualization for understanding the distribution of data for different columns**","9e421afe":"**Count of missing values(zeros) in above mentioned 5 variables or columns**","db738b07":"# Step 3: Build a Model","5cc648c7":"Looks like kind of normal distribution","c312d336":"************************************************************************************","66142607":"We had 227 zero invalid values in 'SkinThickness' column which we replaced by Median","180bb036":"**Show first 5 rows or observations**","08a23f82":"**********************************************************************","c37c9cc9":"Variables 'Glucose' and 'BloodPressure' do not have much outliers and we need to fill little data so we will use mean here\n\nVariables 'SkinThickness', 'Insulin', and 'BMI' have much disparity and we need to fill more data so we will use median here","d39c1f9e":"**Import Data**","0abf3810":"Replace NaN with Median or Mean","0aabdf68":"Can you build a machine learning model to accurately predict whether or not the patients in the dataset have diabetes or not?","3ecfbf86":"******************************************************************************************","538b2073":"Column 'Glucose' has one outlier","0d86fe4a":"**Bivariate Analysis**","260d0cee":"*************************************************************************************","462b0162":"Since this is binary classification, I will use Logistic Regression algorithm to predict 0 or 1","e0487366":"dataset contains 768 rows or observations and 9 columns or variables","da96c412":"There is very less correlation between 'Pregnancies' and 'Outcome' that is they are weakly correlated\n\nPima woman with less number of children have low chance of diabetes","d4a36bc1":"*************************************************************************** ","4660355a":"**Get shape of the DataFrame**","366af62a":"\n**About the data**\n\nNumeric : Pregnancies      : Number of times pregnant\n  \nNumeric : Glucose          : Plasma glucose concentration a 2 hours in an oral glucose tolerance test\n\nNumeric : BloodPressure    : Diastolic blood pressure (mm Hg)\n\nNumeric : SkinThickness    : Triceps skin fold thickness (mm)\n\nNumeric : Insulin          : 2-Hour serum insulin (mu U\/ml)\n\nNumeric : BMI              : Body mass index (weight in kg\/(height in m)^2)\n\nNumeric : DiabetesPedigree : Diabetes pedigree function\n\nNumeric : Age              : Age (years)\n\nNumeric : Outcome          : Class variable (0 or 1)\n\n","03e8eeeb":"Above also shows that 768 entries and 9 columns.\n\nThere are no null values in any of the variable.\n\nBut there are values for some columns which does not make sense; they are marked as a zero (0) value\nFor example; a zero value in BloodPressure variable does not make sense. Person would be dead I guess by now","7ad00818":"'Insulin' has 374 zero invalid values that is why lower limit and Q1 (25th) quartile are same","8cc5de3f":"**Another method to calculate total number of zeros in a column**","9d9f62f3":"It looks like kind of Normal Distribution","6e990f08":"We will build a model on original data (pima)","a5a6c7c7":"*******************************************************************************","de2bcab5":"this tells me following:\n\nFor example; let us take \"Pregnancies\" variable\n1. Count: Total number of entries or rows  = 768 (no missing values)\n2. Mean: Sum of all values of Pregnancies divide by 768 = 3.845052\n3. std: Standard Deviation - it measures how far data values are from their mean = 3.369578\n4. min: Minimum value = 0\n5. 25%: First Quartile (Q1) = 1\n6. 50%: Second Quartile (Q2) = 3\n7. 75%: Third Quartile (Q3) = 6\n8. max: Maximum value = 17\n\nAbove 5 number summary can be better explained using boxplot","ff6073bb":"**Show last 5 rows or observations**","e93701f6":"Columns 'Age', 'DiabetesPedigreeFunction', 'Pregnancies', 'SkinThickness', 'Insulin' are right skewed that is:\n\nMean > Median","099faeee":"********************************************************************","66ac31dd":"# Pima Indians Diabetes Dataset\n\n**Context**\nThis dataset is originally from the National Institute of Diabetes and Digestive and Kidney Diseases. The objective of the dataset is to diagnostically predict whether or not a patient has diabetes, based on certain diagnostic measurements included in the dataset\n","4f376629":"We can see from above plot that:\n\nPeople who do not have diabetes: 500\n\nPeople who have diabetes       : 268 ","63e78921":"Column 'BloodPressure' has very few outliers","482b7395":"**Content**\nThe datasets consists of several medical predictor variables and one target variable 'Class', Outcome. Predictor variables includes the number of pregnancies the patient has had, their BMI, insulin level, age, and so on.\n","030878b0":"The above plote tells me Pregnancies per Person","736c6af7":"**Missing values**","e23b0240":"*******************************************************************","80d72599":"*********************************************************************************","6470a2af":"Let us perform visulaization on clean data (pima_copy)","51104470":"Thus I can say that Pima women are Obese both who has diabetes and who does not have diabetes as their average is more than 30\n\nPima woman who has diabetes have more BMI as comapred to who does not have diabetes","21bdeaf3":"We have to predict whether or not the patients in the dataset have diabetes or not?\n\nSo let us check how many people have diabetes and how many of them do not","6f1dea70":"Pima woman who have diabetes has higher Glucose levels \n\nwhereas\n\nPima woman who does not have diabetes has lower Glucose levels","2de3fdd6":"There are columns or variables that have a minimum value of zero (0). \n\nOn some columns, a value of zero does not make sense and thus indicates missing value.\n\nFollowing columns or variables have an invalid zero value:\n\n1. Glucose\n\n2. BloodPressure\n\n3. SkinThickness\n\n4. Insulin\n\n5. BMI","69e23245":"**Import packages**","bb305825":"Thus all NaN values are replaced with Mean or Median making data clean","4a1a28f1":"**Display DataFrame**","4e156338":"So here:\n\nTN = 132\n\nTP = 45\n\nFN = 36\n\nFP = 18\n\n\nThis is how I interpret the confusion matrix:\n0 = No Diabetes\n1 = Diabetes\n\nTP: Our model predicted 45 as 1 and actual it was 1 (Model was correct here)\n\nTN: Our model predicted 132 as 0 and actual it was 0 (Model was correct here)\n\nFP: Our model predicted 18 as 0 and actual it was 1 (Model was wrong here)\n\nFN: Our model predicted 36 as 1 and actual it was 0 (Model was wrong here)","49721086":"From above I can say that, Pima women who have children have more possibility of being Diabetic","daae15d6":"so as age increases the risk of being diabetes also increases","228fec75":"************************************************************************************","2a42f97b":"# Step 1: Read dataset","883fb936":"Same like 'SkinThickness' we replaced invalid zero minimum value with median so data is not representative. But we can say that higher the insulin higher chances of getting diabetes. \n\nAlso insulin has a moderate correlation with Glucose","b4eaf8cd":"# Step 2: Exploratory Data Analysis (EDA)"}}