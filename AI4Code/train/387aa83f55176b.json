{"cell_type":{"84473f35":"code","dee53e4a":"code","be924260":"code","9dd2b0cc":"code","8cf6b026":"code","6aa3d866":"code","b228954f":"code","0b5be389":"code","1743c57e":"code","8c677238":"code","b770a440":"code","833803c1":"code","7a99ebd1":"code","bb7b6788":"code","2bd9f0fb":"code","ae2de531":"markdown","7853863f":"markdown","18adf858":"markdown","232c0d7b":"markdown","bbefa235":"markdown","337c3bbc":"markdown","441358ac":"markdown","b14615b5":"markdown","d247adb7":"markdown","c342968f":"markdown","158888af":"markdown"},"source":{"84473f35":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport re\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\n","dee53e4a":"#import dataset\ndataset=pd.read_csv('\/kaggle\/input\/results.csv')\ndataset.head(5)","be924260":"countries=[]\n\nfor c1, c2 in zip(dataset['home_team'],dataset['away_team']):\n    if c1 not in countries :\n        countries.append(c1)\n    if c2 not in countries :\n        countries.append(c2)\n\n\n","9dd2b0cc":"team_vict=[]\nfor c1,(j,c2) in zip(dataset['home_team'],enumerate(dataset['away_team'])):\n    if dataset['home_score'][j]>dataset['away_score'][j]:\n        team_vict.append(c1)\n    elif (dataset['home_score'][j]<dataset['away_score'][j]):\n        team_vict.append(c2)\n    else:\n        team_vict.append('draw')\nteam_vict=[i for i in team_vict if i!='draw']","8cf6b026":"from wordcloud import WordCloud, STOPWORDS\nstopwords = set(STOPWORDS)\n\ndef show_wordcloud(data, title = None):\n    wordcloud = WordCloud(\n        background_color='black',\n        stopwords=stopwords,\n        max_words=200,\n        max_font_size=40, \n        scale=3,\n        random_state=0 # chosen at random by flipping a coin; it was heads\n).generate(str(data))\n\n    fig = plt.figure(1, figsize=(15, 15))\n    plt.axis('off')\n    if title: \n        fig.suptitle(title, fontsize=20)\n        fig.subplots_adjust(top=2.3)\n\n    plt.imshow(wordcloud)\n    plt.show()\n\nshow_wordcloud(team_vict)\n","6aa3d866":"matches=[]\nfor c in countries:\n    nb=0\n    for c1, c2 in zip(dataset['home_team'],dataset['away_team']):\n            if c1==c or c2==c:\n                nb=nb+1\n    matches.append(nb)\n        \nvictoires=[]\ndefaites=[]\nnuls=[]\npourcent_vic=[]\nfor c in countries:\n    nb_v=nb_d=nb_n=0\n    for c1 ,(j ,c2) in zip(dataset['home_team'],enumerate(dataset['away_team'])):\n        if c1 == c:\n            if dataset['home_score'][j]>dataset['away_score'][j]:\n                nb_v=nb_v+1\n            elif dataset['home_score'][j]<dataset['away_score'][j]:\n                nb_d=nb_d+1\n            else:\n                nb_n=nb_n+1\n        elif c2 == c:\n            if dataset['away_score'][j]>dataset['home_score'][j]:\n                nb_v=nb_v+1\n            elif dataset['away_score'][j]<dataset['home_score'][j]:\n                nb_d=nb_d+1\n            else:\n                nb_n=nb_n+1\n    victoires.append(nb_v)\n    defaites.append(nb_d)\n    nuls.append(nb_n)\n","b228954f":"statistics=pd.DataFrame(list(zip(countries,matches,victoires,defaites,nuls)),columns=['country','nb_match','nb_vict',\n                                                                                     'nb_defts','nb_draws'])\nstatistics['%vic']=round((statistics['nb_vict']\/statistics['nb_match'])*100)\n","0b5be389":"statistics.head()","1743c57e":"X=statistics.iloc[:,2:-1].values","8c677238":"from sklearn.cluster import KMeans\nwcss = []\nfor i in range(1, 16):\n    kmeans = KMeans(n_clusters = i, init = 'k-means++', random_state = 0)\n    kmeans.fit(X)\n    wcss.append(kmeans.inertia_)\nplt.plot(range(1, 16), wcss)\nplt.title('The Elbow Method')\nplt.xlabel('Number of clusters')\nplt.ylabel('WCSS')\nplt.show()","b770a440":"my_cluster=KMeans(n_clusters = 4 ,init = 'k-means++')\ny_kmeans=my_cluster.fit_predict(X)","833803c1":"def worcloud_clusters(corpus,clusters,n_clusters):\n    for i in range(n_clusters):\n        corps=[]\n        print('cluster num\u00e9ro',i+1)\n        for j in range (len(clusters)):\n            if clusters[j]==i:\n                corps.append(corpus[j])\n        if len(corps)!=0:\n            show_wordcloud(corps)","7a99ebd1":"worcloud_clusters(statistics.country,y_kmeans,4)","bb7b6788":"from mpl_toolkits.mplot3d import Axes3D\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nax.scatter(X[y_kmeans == 0, 0], X[y_kmeans == 0, 1],X[y_kmeans == 0, 2], s = 100, c = 'red', label ='weak teams')\nax.scatter(X[y_kmeans == 1, 0], X[y_kmeans == 1, 1],X[y_kmeans == 1, 2], s = 100, c = 'blue', label = 'standars teams 1')\nax.scatter(X[y_kmeans == 2, 0], X[y_kmeans == 2, 1], X[y_kmeans == 2, 1],s = 100, c = 'green', label = 'standars teams 2')\nax.scatter(X[y_kmeans == 3, 0], X[y_kmeans == 3, 1], X[y_kmeans == 3, 1],s = 100, c = 'cyan', label = 'top teams')\nax.set_title('Clusters of teams')\nax.set_xlabel('victs')\nax.set_xlabel('defts')\nax.set_xlabel('draws')\nplt.legend()\nplt.show()","2bd9f0fb":"plt.scatter(X[y_kmeans == 0, 0], X[y_kmeans == 0, 1], s = 100, c = 'red', label ='weak teams')\nplt.scatter(X[y_kmeans == 1, 0], X[y_kmeans == 1, 1], s = 100, c = 'blue', label = 'standars teams 1')\nplt.scatter(X[y_kmeans == 2, 0], X[y_kmeans == 2, 1], s = 100, c = 'green', label = 'standars teams 2')\nplt.scatter(X[y_kmeans == 3, 0], X[y_kmeans == 3, 1], s = 100, c = 'cyan', label = 'top teams')\nplt.title('Clusters of teams')\nplt.xlabel('nb of vict')\nplt.ylabel('nb of defts')\nplt.legend()\nplt.show()","ae2de531":"We can note that all the countries in the fourth cluster except Korea and Hungary belongs to the top 20 fifa ranking (https:\/\/fr.fifa.com\/fifa-world-ranking\/ranking-table\/men\/)","7853863f":"WordCloud according to the countries' victories","18adf858":"This is my firs kernel, so i'm open to every suggestions, things i can improve, technically or in the form.\nThanks a lot","232c0d7b":"Another list with the victorious countries ","bbefa235":"Let's list countries present in our dataset","337c3bbc":"Actually i use the albow methods to find the optimal number of clusters","441358ac":"For Modelisation we don't need specially columns like country. Also you may note that it is enough to have the number of victories, number of defeats and draw to get all the information in our new target dataset","b14615b5":"Not lets visualize our results. First with wordclouds and with 3d scatter plot\n","d247adb7":"* So i choose 4 as the number of clusters, others may choose  3.","c342968f":"Let's built lists with the number of matchs, number of victories, number of defeats and draws","158888af":"Let's see how our new target dataset look like"}}