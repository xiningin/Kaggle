{"cell_type":{"20fc0581":"code","3d78391b":"code","cff22bad":"code","78665b40":"markdown"},"source":{"20fc0581":"import numpy as np\nfrom matplotlib import pyplot as plt\n\n# dollar amount fluctuation\ndollar_change = 10\n\n# 1 year (252 trading days)\nperiod = 252\n\n# 3-times leveraged ETF\nlev = 3\n\n# direction flip between -1 and 1 every day\ndirection = 1\n\n# both etf and leveraged etf start at 100\netf = 100\nlev_etf = etf","3d78391b":"etf_ret = np.zeros(period)\nlev_ret = np.zeros(period)\n\nfor i in range(period):\n    etf_t1 = etf + direction * dollar_change\n    \n    ret = etf_t1\/etf - 1\n    \n    lev_etf_t1 = lev_etf * (1 + lev * ret)\n    \n    etf_ret[i] = etf_t1\n    lev_ret[i] = lev_etf_t1\n    \n    direction *= -1\n    etf = etf_t1\n    lev_etf = lev_etf_t1","cff22bad":"plt.plot(etf_ret, label='etf')\nplt.plot(lev_ret, label=f'{lev} times etf')\nplt.legend(frameon=False)\nplt.xlabel('Day')\nplt.ylabel('Price')\nplt.grid()","78665b40":"#### Impact of Volatility Decay\nAssume an ETF is priced at 100. On day N it drops 10 dollars. Next day it gains 10 dollars. The cycle repeat. Compare:\n* How the ETF perform\n* How the 3-time leveraged ETF perform"}}