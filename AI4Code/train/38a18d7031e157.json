{"cell_type":{"7c3e493c":"code","68aa5018":"code","450cbcc6":"code","31866e89":"code","783c72f8":"code","704f98b9":"code","42d70a95":"code","be02253d":"code","3009add6":"code","3a7ef7b6":"code","28e5f89b":"code","eb90efcf":"code","fafd5c35":"code","a63201d9":"code","2efa3fcd":"code","7fa66b5c":"code","b017a5bc":"markdown","53702bbd":"markdown","59b6c381":"markdown","552b35cd":"markdown","133c852a":"markdown","17fdf219":"markdown","b49d1829":"markdown","3eeece42":"markdown","35260ebb":"markdown","508a0fab":"markdown","cf4f9432":"markdown","c1d4092e":"markdown"},"source":{"7c3e493c":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport plotly.express as px\n\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","68aa5018":"path_president_candidate = '\/kaggle\/input\/us-election-2020\/president_county_candidate.csv'\n\nusa_election = pd.read_csv(path_president_candidate)\n\nusa_election","450cbcc6":"usa_election.info()","31866e89":"def county_results(county, state):\n    data = usa_election[(usa_election['county']==county) & (usa_election['state']==state)]\n    #ax = sns.barplot(x='candidate', y='total_votes', data=data)\n    fig = px.bar(data, x='candidate', y='total_votes')\n    #fig = go.Figure([go.Bar(x=data['candidate'], y=data['total_votes'])])\n    fig.update_layout(\n        title={\n            'text': f'Election results in {county} ({state})',\n            'y':0.95,\n            'x':0.5,\n            },\n        xaxis_title='Candidates',\n        yaxis_title='Total votes',\n        )\n    fig.show()\n","783c72f8":"county_results('Kent County', 'Delaware')","704f98b9":"county_results('Palm Beach County', 'Florida')","42d70a95":"DEM_election = usa_election[usa_election['party']=='DEM']\nDEM_election = DEM_election.groupby('state').sum()\nDEM_election.rename(columns={\"total_votes\": \"DEM_votes\", \"won\": \"DEM_won_counties\"}, inplace=True)\nDEM_election.head()","be02253d":"REP_election = usa_election[usa_election['party']=='REP']\nREP_election = REP_election.groupby('state').sum()\nREP_election.rename(columns={\"total_votes\": \"REP_votes\", \"won\": \"REP_won_counties\"}, inplace=True)\nREP_election.head()","3009add6":"def most_voted_candidate():\n    total_votes_DEM = DEM_election['DEM_votes'].sum()\n    total_votes_REP = REP_election['REP_votes'].sum()\n    total_votes = usa_election['total_votes'].sum()\n    \n    print (f'Total votes for Joe Biden (DEM): {total_votes_DEM}')\n    print (f'Total votes for Donald Trump (REP): {total_votes_REP}')\n    \n    # Total votes plot\n    fig = px.bar(x=['DEM', 'REP'], y=[total_votes_DEM, total_votes_REP])\n    fig.update_layout(\n        title={\n            'text': f'Total votes for DEM and REP',\n            'y':0.95,\n            'x':0.5,\n            },\n        xaxis_title='Parties',\n        yaxis_title='Total votes',\n        )\n    fig.show()\n    \n    # Percentage of votes plot\n    fig = px.bar(x=['DEM', 'REP'], y=[DEM_election['DEM_votes'].sum()\/usa_election['total_votes'].sum(), REP_election['REP_votes'].sum()\/usa_election['total_votes'].sum()])\n    fig.update_layout(\n        title={\n            'text': f'Percentage of votes for DEM and REP',\n            'y':0.95,\n            'x':0.5,\n            },\n        xaxis_title='Parties',\n        yaxis_title='% of votes',\n        )\n    fig.show()\n    ","3a7ef7b6":"most_voted_candidate()","28e5f89b":"president_election = pd.concat([REP_election, DEM_election], axis=1)\npresident_election.head()","eb90efcf":"president_election['winner'] = np.where(president_election['REP_votes'] > president_election['DEM_votes'], 'Donald Trump', 'Joe Biden')\npresident_election","fafd5c35":"path_states_map = '\/kaggle\/input\/usa-states-latitude-longitude\/statelatlong.csv'\nstates_lat_long = pd.read_csv(path_states_map, index_col='City')\nstates_lat_long","a63201d9":"We insert the columns to our DataFrame.","2efa3fcd":"president_election = pd.concat([president_election,states_lat_long], axis=1) \npresident_election","7fa66b5c":"fig = px.choropleth(president_election, \n                           locations='State', \n                           color=\"winner\",\n                           color_discrete_sequence  = [\"red\", \"blue\"],\n                           locationmode = 'USA-states',  \n                           scope=\"north america\",\n                           title='USA Presidential Votes Counts' \n                          )\n\nfig.show()","b017a5bc":"# 2. Importing required libraries","53702bbd":"# 3. Create a function to visualise the candidates\n\nThis function displays the total number of votes based on the candidates for each county.","59b6c381":"The choropleth plot is used to visualise the map with the election results.","552b35cd":"For the map visualisation, we import a csv with the state code, its latitude and longitude. ","133c852a":"# 4. Joe Biden or Donald Trump\n\nWe select only the two majoritary parties: DEM (Joe Biden) and REP (Donald Trump) and group the votes by states.","17fdf219":"Some examples of the county_results function:","b49d1829":"We can create a function to compare the votes of the two majoritary parties","3eeece42":"<center><h1> USA ELECTION 2020 <\/h1><\/center>\n<img src=\"https:\/\/ichef.bbci.co.uk\/news\/1024\/cpsprodpb\/15B1C\/production\/_114606888_index_promo_simple_guide_976_v7.png\" width=\"600px\">\n\n\n","35260ebb":"Now, we concatenate the two DataFrame to represent the results on a map. We can compare the number of votes in each state and create a new column with the winner.","508a0fab":"# 1. Introduction\n\nThis notebook aims to analyse and visualise the data from the 2020 US elections. Plotly has been used for the data visualisation, as it allows you to create aesthetically pleasing, interactive plots.\n\nPlease don't forget to UpVote this notebook if you like it.","cf4f9432":"# 5. Map visualisation ","c1d4092e":"# 3. Reading CSV Data"}}