{"cell_type":{"f424b6af":"code","36c9fd0a":"code","d28835c8":"code","7014825f":"code","b100374d":"code","71721f9e":"code","d2cd1571":"markdown"},"source":{"f424b6af":"!apt-get update\n!apt -y install imagemagick","36c9fd0a":"from typing import List\nfrom glob import glob\nimport os\nimport pandas as pd\n\nworking_dir: str = \"..\/input\/alaska2-image-steganalysis\/\"\n\n    \ntraining_images: List[str] = list(glob(os.path.join(working_dir, \"*\", \"*.jpg\")))\ndf_train = pd.DataFrame({\"file_path\": training_images})\ndf_train[\"image\"] = df_train[\"file_path\"].apply(lambda x: os.path.basename(x))\ndf_train[\"kind\"] = df_train[\"file_path\"].apply(lambda x: os.path.split(os.path.dirname(x))[-1])\ndf_train","d28835c8":"from typing import Optional\n\ndef func(file_path: str) -> Optional[float]:\n    output = os.popen(f\"identify -format '%Q' {file_path}\").read()\n    return output\n","7014825f":"from multiprocessing import Pool\nwith Pool(4) as p:\n    ret = list(p.map(func, training_images))","b100374d":"df_train[\"quality\"] = ret\ndf_train[\"quality\"] = df_train[\"quality\"].astype(\"float\")\ndf_train.sort_values(\"image\", inplace=True)\ndf_train[[\"image\", \"kind\", \"quality\"]].to_csv(\"image_quality.csv\", index=False, float_format='%.0f')","71721f9e":"df_train[\"quality\"].value_counts(normalize=False)","d2cd1571":"This notebook aims to classify all JPG images by its quality (75, 90, 95) and save it into a csv file.\n"}}