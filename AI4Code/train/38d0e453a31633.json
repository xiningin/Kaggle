{"cell_type":{"c9db5b03":"code","66184106":"code","1523096d":"code","0bc5dc2d":"code","7fb0212c":"code","0208b3ca":"code","639e161d":"code","e1918fa9":"code","feb02ab6":"code","035fef5b":"code","462f065d":"code","f438eace":"code","4819ab9a":"code","e45d6765":"code","9672cff9":"code","861fa1e9":"code","9684d018":"code","e442bf64":"code","68e50712":"code","8dfa85cf":"code","82a6ca2d":"code","959bef5f":"code","392992c9":"code","b4eaeed6":"code","07e5ea01":"code","48c14efc":"code","122aece2":"code","d5d44dc7":"code","d3ef4879":"code","336ef96c":"code","7136f22c":"code","16fda1c8":"code","e93e40f8":"code","aeb30968":"code","61270073":"code","2ccaba6f":"code","50e39b26":"code","75b04fc0":"code","4f7cdde3":"code","90ef89f1":"code","73e52052":"code","bae26c63":"markdown","acbbb09c":"markdown","1ad97cda":"markdown","5a4939b3":"markdown","88603f29":"markdown","3ee131c2":"markdown","6d656734":"markdown","cca74d59":"markdown","d738d5a8":"markdown","3235df2d":"markdown","2a3afcf8":"markdown","d545b33c":"markdown","6d65028e":"markdown","61cb42ac":"markdown","2fa93594":"markdown","1ccc9298":"markdown","4957932e":"markdown","a98a479f":"markdown","86fb975f":"markdown","005dad66":"markdown","1f42455b":"markdown","57656911":"markdown","b9cfaa02":"markdown","05b3a3b8":"markdown","2e443493":"markdown","7be277eb":"markdown","15ac1574":"markdown","d9627f92":"markdown"},"source":{"c9db5b03":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\n%matplotlib inline\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\n\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\ndir = []\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","66184106":"df = pd.read_csv('\/kaggle\/input\/german-credit\/german_credit_data.csv')","1523096d":"df.drop('Unnamed: 0',axis=1,inplace=True)\ndf.head()","0bc5dc2d":"def check_dtypes_1(df):\n    '''\n    Parameters :\n    ------------\n    df : Dataframe name \n\n    Step :\n    ------\n    > 1. Do iteration for each feature to define which one categorical and nummerical feature. \n    > 2. Columns in dataframe will be seperated based on the dtypes\n    > 3. All of the column will be entered to the list that have been created\n\n    result :\n    --------\n    The result will be formed as dataframe\n    '''\n    # Make a list for both of the data type \n    categorical_list = []\n    numerical_list = []\n    \n    #Looping \n    for col in df.columns.tolist():\n        if df[col].dtype=='object':\n            categorical_list.append(col)\n        else:\n            numerical_list.append(col)\n    \n    #make dataframe that have two feature, that is categorical and numerical feature\n    categorical = pd.Series(categorical_list, name='Categorical Feature')\n    numerical = pd.Series(numerical_list, name='Numerical Feature')\n    df_dtypes = pd.concat([categorical,numerical], axis=1)\n    \n    return df_dtypes","7fb0212c":"#1. Input dataframe\ndataframe = df\n#2. Seperated \ncheck_dtypes_1(dataframe)","0208b3ca":"def list_dtypes(df):\n    categorical_list = []\n    numerical_list = []\n    for col in df.columns.tolist():\n        if df[col].dtype=='object':\n            categorical_list.append(col)\n        else:\n            numerical_list.append(col)\n    print('Number of categorical features:', str(len(categorical_list)))\n    print('Number of numerical features:', str(len(numerical_list)))\n\n    return categorical_list, numerical_list","639e161d":"categorical_list, numerical_list = list_dtypes(df)","e1918fa9":"# module Check missing value \ndef missing_value(df):\n    '''\n    Documentation :\n    --------------\n    * df : Dataframe Name\n    '''\n    #count the number of missing value \n    total = df.isnull().sum().sort_values(ascending = False)\n    percent = round(df.isnull().sum()\/len(df)*100,2).sort_values(ascending = False)\n    missing  = pd.concat([total, percent], axis=1, keys=['Total_Missing', 'Percent(%)'])\n    \n    return missing.head(20)","feb02ab6":"#1. input dataframe\ndataframe = df\n\n#2. input dataframe to the module \nmissing_value(dataframe)","035fef5b":"def fill_missing(df, feature_list = None , vartype = None ):\n    '''\n    Documentation :\n    ---------------\n    df              : object, dataframe\n    feature_list    : feature list is the set of numerical or categorical features \n                      that have been seperated before\n    vartype         : variable type : continuos or categorical, default (numerical)\n                        (0) numerical   : variable type continuos\/numerical\n                        (1) categorical : variable type categorical\n    Note :\n    ------\n    > if numerical variable will be filled by median \n    > if categorical variabe will filled by modus\n    > if have been made variebles based on the dtypes list before, \n      insert it into feature list in the function.     \n\n    Example :\n    ---------\n    # 1. Define feature that will be filled in \n      num_feature = numeric_list\n      \n    # 2. Input Dataframe\n      dataframe = df\n      \n    # 3. Vartype\n      var_type = 0\n      \n    # 4. Filling Value\n      Fill_missing(dataframe, num_feature, var_type)\n    '''\n    #default vartype \n    if vartype == None :\n        vartype = 'numerical'\n\n    # filling numerical data with median \n    if vartype == 'numerical' :\n        for col in feature_list:\n            df[col] = df[col].fillna(df[col].median())\n    \n    # filling categorical data with modus  \n    if vartype == 'categorical' :\n        for col in feature_list:\n            df[col] = df[col].fillna(df[col].mode().iloc[0])","462f065d":"# 1. define feature that will be filled in \nnum_feature = numerical_list\n\n# 3. Vartype\nvar_type = 'numerical'\n\n# 4. Filling Value\nfill_missing(df, num_feature, var_type)","f438eace":"# 1. define feature that will be filled in \ncat_feature = categorical_list\n\n# 2. Vartype\nvar_type = 'categorical'\n\n# 3. Filling Value\nfill_missing(df, cat_feature, var_type)","4819ab9a":"# Df Numeric \ndf_num_list = df[numerical_list]\ndf_num_list.drop('Job',axis=1,inplace=True)\ndf_num_list.head()","e45d6765":"# Df categoric \ndf_categ = df[categorical_list]\ndf_categ['Job'] = df['Job']\ndf_categ.head()","9672cff9":"for x in range(len(df)):\n    if df['Job'][x]==0:\n        df['Job'][x]='unskilled and non-resident'\n    if df['Job'][x]==1:\n        df['Job'][x]='unskilled and resident'\n    if df['Job'][x]==2:\n        df['Job'][x]='skilled'\n    if df['Job'][x]==3:\n        df['Job'][x]='highly skilled'","861fa1e9":"df2=df.copy()","9684d018":"df2.head()","e442bf64":"df2=pd.get_dummies(df2,prefix=['Sex','Job','Housing','Saving Account','Checking account','Purpose'], drop_first=True)","68e50712":"def distributions(df):\n    plt.figure(figsize=(10,5))\n    fig, (ax1, ax2, ax3) = plt.subplots(3,1, figsize=(8,8))\n    sns.distplot(df[\"Age\"], ax=ax1)\n    sns.distplot(df[\"Credit amount\"], ax=ax2)\n    sns.distplot(df[\"Duration\"], ax=ax3)\n    plt.tight_layout()","8dfa85cf":"distributions(df2)","82a6ca2d":"df2_log = df2.copy()\ndf2_log['Age'] = np.log(df2_log['Age'])\ndf2_log['Credit amount'] = np.log(df2_log['Credit amount'])\ndf2_log['Duration'] = np.log(df2_log['Duration'])\ndistributions(df2_log)","959bef5f":"from sklearn.preprocessing import MinMaxScaler\nscaler = MinMaxScaler()","392992c9":"df3 = df2_log.copy()\ndf3_num = df3[['Age','Credit amount','Duration']]","b4eaeed6":"df3_num[['Age','Credit amount','Duration']] = scaler.fit_transform(df3[['Age','Credit amount','Duration']])","07e5ea01":"df3[['Age','Job_skilled',\n       'Job_unskilled and non-resident', 'Job_unskilled and resident', 'Credit amount', 'Duration', 'Sex_male', 'Housing_own',\n       'Housing_rent', 'Saving Account_moderate', 'Saving Account_quite rich',\n       'Saving Account_rich', 'Checking account_moderate',\n       'Checking account_rich', 'Purpose_car', 'Purpose_domestic appliances',\n       'Purpose_education', 'Purpose_furniture\/equipment', 'Purpose_radio\/TV',\n       'Purpose_repairs', 'Purpose_vacation\/others']] = scaler.fit_transform(df3[['Age', 'Job_skilled',\n       'Job_unskilled and non-resident', 'Job_unskilled and resident', 'Credit amount', 'Duration', 'Sex_male', 'Housing_own',\n       'Housing_rent', 'Saving Account_moderate', 'Saving Account_quite rich',\n       'Saving Account_rich', 'Checking account_moderate',\n       'Checking account_rich', 'Purpose_car', 'Purpose_domestic appliances',\n       'Purpose_education', 'Purpose_furniture\/equipment', 'Purpose_radio\/TV',\n       'Purpose_repairs', 'Purpose_vacation\/others']])","48c14efc":"import matplotlib.pyplot as plt\nfrom sklearn.cluster import KMeans\nwcss = []\nK = range(1,10)\nfor k in K:\n    km = KMeans(n_clusters=k)\n    km = km.fit(df3_num)\n    wcss.append(km.inertia_)\nplt.plot(K, wcss, 'bx-')\nplt.xlabel('Number of centroids')\nplt.ylabel('')\nplt.title('Elbow Method For Optimal k')\nplt.show()","122aece2":"df_kmeans = df3_num.copy()\nkmeans = KMeans(n_clusters=3)\nkmeans.fit(df_kmeans)","d5d44dc7":"from sklearn.metrics import silhouette_score\nsilhouette_score(df_kmeans, kmeans.labels_)","d3ef4879":"df_kmeans['kluster'] = kmeans.labels_","336ef96c":"from mpl_toolkits import mplot3d","7136f22c":"import seaborn as sns; sns.set()\n\nplt.figure(figsize=(15,10))\nax = plt.axes(projection='3d')\n\nxdata = df['Age']\nydata = df['Credit amount']\nzdata = df['Duration']\n\nax.set_xlabel('Age')\nax.set_ylabel('Credit amount')\nax.set_zlabel('Duration')\n\nax.scatter3D(xdata, ydata, zdata, c=df_kmeans['kluster'], cmap='viridis');","16fda1c8":"plt.figure(figsize=(15,5))\nimport scipy.cluster.hierarchy as sch\n\ndendogram = sch.dendrogram(sch.linkage(df3_num, method='ward'))","e93e40f8":"from sklearn.cluster import DBSCAN","aeb30968":"df_dbscan = df3_num.copy()","61270073":"dbscan = DBSCAN(eps=0.09, min_samples=5)\ndbscan.fit(df_dbscan)","2ccaba6f":"import seaborn as sns; sns.set()\n\nplt.figure(figsize=(15,10))\nax = plt.axes(projection='3d')\n\nxdata = df['Age']\nydata = df['Credit amount']\nzdata = df['Duration']\n\nax.set_xlabel('Age')\nax.set_ylabel('Credit amount')\nax.set_zlabel('Duration')\n\nax.scatter3D(xdata, ydata, zdata, c=dbscan.labels_, cmap='viridis');","50e39b26":"df['k_means_label'] = kmeans.labels_","75b04fc0":"for x in range(len(df)):\n    if df['k_means_label'][x]==0:\n        df['k_means_label'][x]='medium'\n    if df['k_means_label'][x]==1:\n        df['k_means_label'][x]='good'\n    if df['k_means_label'][x]==2:\n        df['k_means_label'][x]='bad'","4f7cdde3":"fig = plt.figure(figsize=(12,6))\nplt.title('Count Plot',fontsize = 20)\nax=sns.countplot(data=df, x='Sex',hue=\"k_means_label\")\nax.set_xlabel('Sex', fontsize = 15)\nax.tick_params(labelsize=12)","90ef89f1":"fig = plt.figure(figsize=(12,6))\nplt.title('Count Plot',fontsize = 20)\nax=sns.countplot(data=df, x='Job',hue=\"k_means_label\")\nax.set_xlabel('Job', fontsize = 15)\nax.tick_params(labelsize=12)","73e52052":"fig = plt.figure(figsize=(12,6))\nplt.title('Count Plot',fontsize = 20)\nax=sns.countplot(data=df, x='Purpose',hue=\"k_means_label\")\nax.set_xlabel('Purpose', fontsize = 15)\nax.tick_params(labelsize=12)\nplt.xticks(rotation=30)","bae26c63":"**Jenis kelamin dengan kluster yang dihasilkan**","acbbb09c":"Dapat dilihat bahwasanya, radio\/TV dan mobil merupakan hal yang menjadi tujuan dari kluster high risk (bad). Dapat terlihat juga bahwasanya mobil, radio\/tv menjadi tujuan dari peminjaman.\nYang menarik adalah vacation\\others masih memiliki nilai yang rendah, ini sebenarnya adalah peluang yang dapat di stimulus agar ditingkatkan.","1ad97cda":"Untuk kelas low risk (good), kebanyakan berada pada kelas yang memiliki kemampuan tinggi (skilled), sedangkan pada medium risk (medium), malah lebih baik dari sisi kemampuan.","5a4939b3":"Change numerical to categorical with rules:\nJob (numeric: 0 - unskilled and non-resident, 1 - unskilled and resident, 2 - skilled, 3 - highly skilled)","88603f29":"### Elbow Method","3ee131c2":"### Load Data","6d656734":"Make variable label get them own column. Using get dummies","cca74d59":"## K-Means","d738d5a8":"## Check Missing Value","3235df2d":"### Silhouette Score","2a3afcf8":"### Visualisasi","d545b33c":"Cluster 0<br>\n    Age: 21-63 (Sedang)<br>\n    Credit amount: 909-18424 (Tinggi)<br>\n    Duration: 12 - 72 (Panjang)<br>\n<br>\nCluster 1<br>\n    Age: 19-35 (Muda)<br>\n    Credit amount: 276 - 14555 (Sedang)<br>\n    Duration: 4 - 30 (Rendah)<br>\n<br>\nCluster 2<br>\n    Age: 36-75 (Tua)<br>\n    Credit: 250 -14896 (Kecil)<br>\n    Duration: 4 - 42 (Sedang)<br>\n    <br>\nDengan melihat data, maka dapat disimpulkan bahwasanya<br>\n    Cluster 0 = Medium<br>\n    Cluster 1 = Good<br>\n    Cluster 2 = Bad<br>","6d65028e":"### Dendogram","61cb42ac":"#### Count plot pada Tujuan dengan label klustering","2fa93594":"Untuk jenis kelamin laki-laki, di dominasi oleh kelas medium risk. Sedangkan untuk perempuan, lebih kecil risknya.","1ccc9298":"Cluster 0 = Medium, karena walaupun secara usia mereka sedang dan creditnya tinggi, tetapi durasinya terlalu panjang.\n<br>\nCluster 1 = Good, karena secara credit memiliki tingkatan sedang dan durasinya rendah. Ditambah usia yang meminjam juga muda.\n<br>\nCluster 2 = Bad, karena usia Tua (berumur) dan memiliki tingakatan kredit yang kecil.","4957932e":"## Fill Missing","a98a479f":"## Insight","86fb975f":"Function to make missing value gone. Using median for numerical and mode for categorical.","005dad66":"#### Count plot pada Job dengan label clustering","1f42455b":"### DBSCAN","57656911":"### List Types","b9cfaa02":"Seperti yang kita lihat, DBSCAN kita tidak cocok dengan data. Maka dari itu, k-means dipilih untuk klustering dan dipilih 3 kluster.","05b3a3b8":"## Normalization","2e443493":"## See The Distribution Data","7be277eb":"## Check Data Types","15ac1574":"## Label Encoder","d9627f92":"Setelah melakukan klustering, kita mau melihat insight dari kluster yang dihasilkan. Dengan dibandingkan oleh variabel, kita harap dapat ditemukan insight yang baru."}}