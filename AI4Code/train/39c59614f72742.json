{"cell_type":{"aba8c6c4":"code","6bf32bd7":"code","7996ee0f":"code","01d145bf":"code","3a290725":"code","6ce5f886":"code","90f8dced":"code","f5ceec7f":"code","93837479":"markdown","b2542dbb":"markdown","d9a3566c":"markdown","d14be65f":"markdown","75ba4df9":"markdown"},"source":{"aba8c6c4":"import warnings; warnings.filterwarnings('ignore')\nimport pandas as pd,pylab as pl \nfp='https:\/\/data.cityofnewyork.us\/resource\/'\nse=pd.read_json(fp+'h7rb-945c.json')\nfl=['graduation_rate','city','council_district']\nse=se[fl].dropna()\nse['graduation_rate_range']=se.shape[0]*['0']\nse['graduation_rate']=se['graduation_rate']\\\n.astype('object').str.replace('N\/A','0').astype('float')\nse['council_district']=se['council_district']\\\n.astype('int').astype('object')\nse.loc[se['graduation_rate']<=.5,\n       'graduation_rate_range']='gr <= 0.5'\nse.loc[(se['graduation_rate']>.5)&(se['graduation_rate']<=.75),\n       'graduation_rate_range']='0.5 < gr <= 0.75'\nse.loc[(se['graduation_rate']>.75)&(se['graduation_rate']<=.9),\n       'graduation_rate_range'] = '0.75 < gr <= 0.9'\nse.loc[se['graduation_rate']>.9,\n       'graduation_rate_range']='gr > 0.9'\ngr_list=['gr <= 0.5','0.5 < gr <= 0.75',\n         '0.75 < gr <= 0.9','gr > 0.9']\nfig,ax=pl.subplots(nrows=2,ncols=1,figsize=(10,10))\ns='Student Graduation Rate by Council Districts and Cities'\nax[0].tick_params('x',rotation=90)\npd.crosstab(se['council_district'],\n            se['graduation_rate_range'])[gr_list]\\\n.plot.bar(ax=ax[0],cmap=pl.cm.bwr)\ncity_list=['New York','Bronx','Brooklyn','Staten Island',\n           'Jamaica','Flushing','Long Island City','Manhattan']\ndata=se.loc[se['city'].isin(city_list)]\npd.crosstab(data['city'],se['graduation_rate_range'])[gr_list]\\\n.plot.barh(ax=ax[1],cmap=pl.cm.bwr)\npl.suptitle(s); pl.tight_layout(); pl.show()","6bf32bd7":"import pylab as pl,numpy as np\ncolumns=['Fresh','Milk','Grocery','Frozen',\n         'Detergents_Paper','Delicatessen']\nrows=['Customer 1','Customer 2','Customer 3']\ncolors = ['#3636ff','#36ff36','#ff3636']\ndata=[[26373,36423,22019,5154,4337,16523],\n      [16165,4230,7595,201,4003,57],\n      [14276,803,3045,485,100,518]]\npl.figure(figsize=(10,7)); pl.ylabel('Value'); pl.xticks([]); \nx=np.arange(len(columns))+.2\ny=np.array([0.0]*len(columns))\nbar_width=.5; cell_text=[]\nfor i in range(len(rows)):\n    pl.bar(x,data[i],bar_width,bottom=y,color=colors[i])\n    y=y+data[i]; cell_text.append(['%1.0f'%(d)for d in data[i]])\npl.table(cellText=cell_text,rowLabels=rows,\n         rowColours=colors,colLabels=columns,loc='bottom')\npl.title('Samples of the Wholesale Customers Dataset')\npl.subplots_adjust(left=.1,bottom=.05);\npl.tight_layout()","7996ee0f":"import numpy as np,pandas as pd\npd.set_option('display.precision',5)\nstyle_dict={'font-size':'120%','text-shadow':'#aaa 3px 3px 3px',\n            'text-align':'right'}\nhead_styler=(('color','slategray'),('font-size','250%'),\n             ('text-shadow','#aaa 3px 3px 3px'),('text-align','center'))\nindex=[chr(i) for i in range(ord('a'),ord('h')+1)]; \ncolumns=['&#x2654;','&#x2655;','&#x2656;',\n         '&#x2657;','&#x2658;','&#x2659;']\ndf=pd.DataFrame(np.random.randn(8,6),index=index,columns=columns)\ndf.style.set_properties(**style_dict)\\\n.background_gradient(cmap='Pastel1')\\\n.set_table_styles([dict(selector='th',props=head_styler)])","01d145bf":"from IPython.core.display import HTML,display\nimport pandas as pd,cufflinks as cf\nfrom plotly.offline import init_notebook_mode\ndef configure_plotly():\n    display(HTML(\"\"\"\n<script src='https:\/\/static\/components\/requirejs\/require.js'>\n<\/script><script>requirejs.config({\npaths:{base:'\/static\/base',\n       plotly:'https:\/\/cdn.plot.ly\/plotly-1.5.1.min.js'}});\n<\/script>\"\"\"))\ncf.go_offline(); configure_plotly()\ninit_notebook_mode(connected=False)\npd.set_option('display.float_format',lambda x:'%.1f'%x)\nurl='https:\/\/raw.githubusercontent.com\/noahgift\/'+\\\n    'real_estate_ml\/master\/data\/'+\\\n    'Zip_Zhvi_SingleFamilyResidence.csv'\nre=pd.read_csv(url).dropna().astype({'RegionID':'int'})\\\n     .astype({'RegionName':'int'}).astype({'SizeRank':'int'})\nre_median=pd.concat([re[re['CountyName']=='Los Angeles'].median(),\n                     re[re['CountyName']=='San Francisco'].median(),\n                     re.median()],axis=1,sort=False).iloc[3:]\nre_median.columns=['Los Angeles','San Francisco','Median USA']\n#layout=go.Layout(width=680,height=500,template='plotly_dark')\nre_median.iplot(title='Median Single Family Home Prices 1996-2017',\n                xTitle='Year',yTitle='Sales Price',shape=(3,1),fill=False,\n                layout={'width':680,'height':380,'template':'plotly_dark'})\nre_median.T.iloc[:,:10].T","3a290725":"from IPython.display import HTML\nhtml_str='''<script src='https:\/\/code.highcharts.com\/highcharts.js'>\n<\/script><div id='container1' style='width:650px; height:350px;'\/>\n<script>\nHighcharts.chart('container1',{\n    xAxis:{categories:['Jan','Feb','Mar','Apr','May','Jun',\n                       'Jul','Aug','Sep','Oct','Nov','Dec']},\n    yAxis:{max:150,title:{text:'Temperature'}},\n    title:{style:{'color':'#3636ff','fontSize':'24px'},\n           text:'Global Station. Temperature'},\n    series:[{name:'2017',color:'#ff3636',\n             data:[113,141,137,115,122,76,108,110,96,115,105,115]},\n            {name:'2018',color:'#ff36ff',\n             data:[103,114,121,120,100,86,106,90,89,111,97,121]}]}, \n    function(chart) {var point=chart.series.data,\n    text=chart.renderer.text(point.plotX+chart.plotLeft+10,\n                             point.plotY+chart.plotTop-10).add(),\n    box=text.getBBox();});\n<\/script>'''\nhtml_file=open('highcharts.html','w')\nhtml_file.write(html_str); html_file.close()\nHTML('''<div id='data1'><iframe src='highcharts.html' \nheight='380' width='680'><\/iframe><\/div>''')","6ce5f886":"from IPython.display import HTML\nhtml_str='''<script src='https:\/\/code.highcharts.com\/maps\/highmaps.js'><\/script>\n<script src='https:\/\/code.highcharts.com\/modules\/exporting.js'><\/script>\n<script src='https:\/\/code.highcharts.com\/modules\/offline-exporting.js'><\/script>\n<script src='https:\/\/code.highcharts.com\/mapdata\/custom\/europe.js'><\/script>\n<div id='container' style='width:650px; height:500px;'\/><script>\nvar s1='Variants for Highlighting:<br>AL,AD,AM,AT,BY,',\n    s2='BE,BA,BG,CH,CY,CZ,DE,DK,EE,ES,FO,FI,FR,GB,GE,GI,GR,',\n    s3='<br>HU,HR,IE,IS,IT,LT,LU,LV,MC,MK,MT,NO,NL,PL,',\n    s4='PT,RO,RU,SE,SI,SK,SM,TR,UA,VA'; \nvar s=s1.concat(s2).concat(s3).concat(s4);\nHighcharts.mapChart('container', {\n    chart:{map:'custom\/europe',borderWidth:1,backgroundColor:'slategray'},\n    title:{style:{'color':'#fff','fontSize':'18px'},\n           text:'Explore Highcharts Parameters with Maps'},\n    subtitle:{style:{'color':'#fff','fontSize':'14px'},text:s},legend:{enabled:false},\n    series:[{name:'Country',color:'#1636ff',borderColor:'steelblue',borderWidth:1.5,\n             data:[['fr',1],['gb',1],['es',1],['de',1],['it',1],['pl',1],['by',1]],\n             dataLabels:{enabled:true,color:'#fff',\n                         formatter:function (){\n                             if (this.point.value){return this.point.name;}}},\n             tooltip:{headerFormat:'',pointFormat:'{point.name}'}}] });\n <\/script>'''\nhtml_file=open('highcharts2.html','w')\nhtml_file.write(html_str); html_file.close()\nHTML('''<iframe src='highcharts2.html' \nheight='550' width='680'><\/iframe>''')","90f8dced":"from IPython.display import HTML\nhtml_str='''<style>\nsvg {background-color:cornflowerblue;}\n.land {fill:#3636ff; stroke:silver;}\n.countries {fill:none; stroke:silver;}\n<\/style>\n<script src='https:\/\/d3js.org\/d3.v3.min.js'><\/script>\n<script src='https:\/\/d3js.org\/topojson.v0.min.js'><\/script>\n<svg width=650 height=320\/><script type='text\/javascript'>\nvar projection=d3.geo.equirectangular().translate([110,205]);\nvar svg=d3.select('svg'),g=svg.append('g');\nvar path=d3.geo.path().projection(projection);\nvar url='https:\/\/raw.githubusercontent.com\/n1n9-jp\/CSIS_map_140514\/master\/data\/'\nd3.json(url.concat('world-50m.json'),\n        function(world){\n            g.attr('class','land').selectAll('land')\n             .data([topojson.object(world,world.objects.land)])\n             .enter().append('path').attr('d',path);\n            svg.attr('class','countries').selectAll('countries')\n               .data([topojson.object(world,world.objects.countries)])\n               .enter().append('path').attr('d',path);});\n<\/script>'''\nhtml_file=open('d3.html','w')\nhtml_file.write(html_str); html_file.close()\nHTML('''<div id='data3'><iframe src='d3.html' \nheight=350 width=680><\/iframe><\/div>''')","f5ceec7f":"from IPython.display import HTML\nhtml_str='''<style>\n@import 'https:\/\/fonts.googleapis.com\/css?family=Sancreek';\ntext {fill:#3636ff; font-family:Sancreek; \n      font-size:90%; text-shadow:3px 3px 3px #aaa;}\nsvg {background-color:lavender;} \n.bar rect {fill:#3636ff; opacity:.5;} .bar text {font-size:80%;}\n<\/style>\n<svg width='650' height='300'><\/svg>\n<script src='https:\/\/d3js.org\/d3.v4.min.js'><\/script><script>\nvar data=d3.range(3000).map(d3.randomBates(5)),formatCount=d3.format(',.0f');\nvar svg=d3.select('svg');\n    m=30,margin={top:m,right:m,bottom:m,left:m}, \n    width=+svg.attr('width')-margin.left-margin.right-2,\n    height=+svg.attr('height')-margin.top-margin.bottom,\n    g=svg.append('g').attr('transform','translate('+margin.left+','+margin.top+')');\nvar x=d3.scaleLinear().rangeRound([0,width]);\nvar bins=d3.histogram().domain(x.domain()).thresholds(x.ticks(30))(data);\nvar y=d3.scaleLinear().domain([0,d3.max(bins,function(d){return d.length;})])\n        .range([height,0]);\nvar bar=g.selectAll('.bar').data(bins).enter().append('g').attr('class','bar')\n         .attr('transform',function(d){\n             return 'translate('+x(d.x0)+','+y(d.length)+')';});\nbar.append(\"rect\").attr('x',1).attr('width',x(bins[0].x1)-x(bins[0].x0)-1)\n                  .attr('height',function(d){return height-y(d.length);});\nbar.append('text').attr('text-anchor','middle')\n   .text(function(d){return formatCount(d.length);})\n   .attr('dy','.55em').attr('y',-10).attr('x',(x(bins[0].x1)-x(bins[0].x0))\/2);\ng.append('g').attr('class','axis axis--x').call(d3.axisBottom(x))\n             .attr('transform','translate(0,' + height + ')'); \ng.append('text').attr('y',5).text('An Example of D3 Histograms');\n<\/script>'''\nhtml_file=open('d3_2.html','w')\nhtml_file.write(html_str); html_file.close()\nHTML('''<div id='data4'><iframe src='d3_2.html' \nheight=350 width=680><\/iframe><\/div>''')","93837479":"## D3 PyJs","b2542dbb":"# [Visualization Notes](https:\/\/visualization-notes.blogspot.com\/)\n## Pandas Py","d9a3566c":"## Table Styling","d14be65f":"## Plotly PyJs ","75ba4df9":"## Highcharts PyJs"}}