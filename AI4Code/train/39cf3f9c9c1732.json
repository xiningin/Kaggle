{"cell_type":{"8c0d01d3":"code","f7391ce9":"code","7b7dc401":"code","37f22c2f":"code","cde98788":"code","a77cb190":"code","cc866845":"code","f3e3a7f6":"code","8e0133f4":"code","7201f20a":"code","dfd7063f":"code","5ce05a05":"code","e1867968":"code","e26a7f79":"code","18a6221d":"code","0391121c":"code","231f32a4":"markdown","7d58eacf":"markdown","9e83f3e1":"markdown","5578a965":"markdown","2a57e143":"markdown","849b2868":"markdown","658def14":"markdown","a1a8d02e":"markdown","94db97fe":"markdown"},"source":{"8c0d01d3":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","f7391ce9":"df = pd.read_csv('..\/input\/master.csv')\ndf.sample(5)","7b7dc401":"df.info()","37f22c2f":"# Strip whitespace since some of the columns would become harder to name.\ndf.columns = df.columns.str.strip()\n\n# Drop unnecessary columns for the analysis objectives.\ndf.drop(columns=['suicides_no', 'country-year', 'HDI for year', 'gdp_for_year ($)', 'generation'], inplace=True)\n\ndf.sample(5)","cde98788":"# Rename columns for easier readability.\ndf.rename(columns={'suicides\/100k pop':'suicides', 'gdp_per_capita ($)':'gpd'}, inplace=True)\n\ndf.head()","a77cb190":"suicides_sex_age = df[['sex', 'age', 'suicides']].groupby(['sex', 'age']).mean()\nsuicides_sex_age","cc866845":"# Reorder age index for visualization.\nsuicides_sex_age.reset_index(inplace=True)\nsuicides_sex_age['age'] = suicides_sex_age['age'].str.replace(' years', '')\n\nage_sort = {'5-14': 0, '15-24': 1, '25-34': 2, '35-54': 3, '55-74': 4, '75+': 5}\nsuicides_sex_age['sort'] = suicides_sex_age['age'].map(age_sort)\nsuicides_sex_age.sort_values(by='sort', inplace=True)\nsuicides_sex_age.drop('sort', axis=1, inplace=True)\n\nsuicides_sex_age","f3e3a7f6":"age_groups = suicides_sex_age['age'].unique()\nmale_suicides = suicides_sex_age[suicides_sex_age['sex'] == 'male']['suicides']\nfemale_suicides = suicides_sex_age[suicides_sex_age['sex'] == 'female']['suicides']\n\nplt.bar(age_groups, male_suicides, label='Male')\nplt.bar(age_groups, female_suicides, label='Female')\n\nplt.title('Average suicides across the world by sex')\nplt.xlabel('Age group')\nplt.ylabel('Suicides per 100k population')\nplt.legend()\nplt.show()","8e0133f4":"suicides_vs_gpd = df[['suicides', 'year', 'gpd']].groupby('year').mean()\nsuicides_vs_gpd.reset_index(inplace=True)\n\nsuicides_vs_gpd.head()","7201f20a":"fig, ax1 = plt.subplots()\n\n# Plot the suicides over the years.\nlns1 = ax1.plot(suicides_vs_gpd['year'], suicides_vs_gpd['suicides'], 'C0', label='Suicides')\n\n# Create a shared axis for plotting on a different scale the GPD.\nax2 = ax1.twinx()\nlns2 = ax2.plot(suicides_vs_gpd['year'], suicides_vs_gpd['gpd'], 'C1', label='GPD')\n\n# Join both legends into the same box.\nlns = lns1 + lns2\nlabs = [l.get_label() for l in lns]\nax1.legend(lns, labs, loc=2)\n\n# Set the labels.\nax1.set_ylabel('Suicides per 100k population')\nax2.set_ylabel('GDP per Capita')\nax1.set_xlabel('Years')\n\nplt.tight_layout()\nplt.show()","dfd7063f":"suicides_poor_rich = df[['year', 'country', 'gpd', 'suicides']]\n\n# Sort the the countries by their average gpd over the years.\n# Then get the list of the countries ordered.\ncountries_by_gpd = suicides_poor_rich.groupby('country').mean().sort_values('gpd', ascending=False).index","5ce05a05":"# Get the top and bottom 5 countries of the list.\ntop_countries = countries_by_gpd[:5]\nbot_countries = countries_by_gpd[-5:]\n\n# Append them for the future filter.\ncountries_to_compare = top_countries.append(bot_countries)\ncountries_to_compare","e1867968":"# Filter the rows that only are one of those countries.\nsuicides_poor_rich = suicides_poor_rich.loc[suicides_poor_rich['country'].isin(countries_to_compare)]\nsuicides_poor_rich.sample(5)","e26a7f79":"# Create a filter for splitting those countries into two groups.\ncountry_filter = {country:'TOP' for country in top_countries}\ncountry_filter.update({country:'BOT' for country in bot_countries})\n\ncountry_filter","18a6221d":"# Apply the filter.\nsuicides_poor_rich['country'] = suicides_poor_rich['country'].map(country_filter)\nsuicides_poor_rich.sample(5)","0391121c":"# Simply, plot the results.\nsns.lineplot(x='year', y='suicides', data=suicides_poor_rich, hue='country', ci=None)\nplt.legend(labels=['BOT', 'TOP'])\n\nplt.title('Comparison between top and bottom economies')\nplt.xlabel('Year')\nplt.ylabel('Suicides per 100k pop')\nplt.show()","231f32a4":"# Data Analysis\nNow that our data is ready, let's perform the analysis previously mentioned.\n\n## Suicides by sex and age","7d58eacf":"## Comparison: Rich vs Poor","9e83f3e1":"As we would expect as the world got richer, the number of suicides went down. Something unexpected happened the year 2016, where the suicides per 100k of population were as higher as in 2002.","5578a965":"As we can see, the poorest countries got even below the richest countries for almost two decades. That can be due to the fact that the life-expectancy is lower on those countries, and, as we saw ealier the huge part of the total suicides are commited at the lastests stages of life.","2a57e143":"# Conclusions\nWe found some interesting insights about how suicides are correlated to age, sex and gpd. Also, we found some anomalies such as the suicides for older age groups, or the dramatic increase in suicides from 2015 to 2016. These last two will be interesnting to analyse in further projects.\n\nI hope you liked the analysis.","849b2868":"## Suicides vs GPD","658def14":"Males commit suicide significantly higher than females, with and average difference of 15 suicides per 100k of population. Interestingly this difference becomes greater at older ages.","a1a8d02e":"# Suicides Dataset\nFor this dataset I will focus on three different points of view.\n- Differences over sex and age of suicides\/100k pop.\n- Relationship between GDP and suicides over the years.\n- Comparison between poorest and richest countries.","94db97fe":"# Data Exploring\nFirst let's examine and clean the data."}}