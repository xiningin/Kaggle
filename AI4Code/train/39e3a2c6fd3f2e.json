{"cell_type":{"6b27081c":"code","ef702725":"code","ecc2102e":"code","ac1920d4":"code","d8de028b":"code","be4ec520":"code","5b25afee":"code","e42b4d74":"code","7e997283":"code","aff05988":"code","7304771b":"code","17a32936":"code","e19d251c":"code","f5a5c36a":"code","f2b6c93d":"code","a4eb249f":"code","e5d3280f":"code","9928783c":"code","eba1bbb7":"code","0fda0099":"code","8b9fbc44":"code","d67094e5":"code","975a6402":"code","841ed76a":"code","4ffe0b13":"code","fc63d4bc":"code","43edf8f2":"code","6c0bb3a8":"code","fdf37899":"code","edd80fad":"code","3c7769f9":"code","e87255ec":"code","21666e6c":"code","0ccf3b31":"code","31a66721":"code","7d711143":"code","a87463bb":"code","901a6a79":"code","f87441eb":"code","8a81af31":"code","b6faef96":"code","0654af73":"code","6b077e65":"code","4bc9b59b":"code","4ba587b0":"code","c8dc8167":"code","dce9db27":"code","9f5ad18a":"code","b0fffba0":"code","8d7f43d3":"code","8afffd34":"code","6692dd5d":"code","1fb9f81c":"markdown","e851c151":"markdown","8eaff135":"markdown","d830e7ab":"markdown","1f090d6d":"markdown","5b6cc249":"markdown","20b058dd":"markdown","e8d4afdd":"markdown"},"source":{"6b27081c":"import numpy as np ##for linear algebra\nimport pandas as pd #data cleaning and wrangling \nimport re ##to extract strings using a parttern \nimport emoji #to acess emoji\nimport matplotlib.pyplot as plt #visualisation\nimport seaborn as sns #visualisation","ef702725":"d=open(r\"C:\\Users\\User\\Downloads\\WhatsApp Chat with Discussing Football\",mode='r', encoding = 'utf-8')\ndata=d.read()","ecc2102e":"data","ac1920d4":"datep=re.compile('\\d+\/\\d+\/\\d+')\ndate=re.findall(datep, data)\ndate","d8de028b":"timep=re.compile('\\d+:\\d+')\ntime=re.findall(timep, data)\ntime","be4ec520":"senderp=re.compile('-.*?:')\nsender1=re.findall(senderp, data)\nsender1","5b25afee":"messdata=re.sub('\\d+\/\\d+\/\\d+,\\s\\d+:\\d+\\s-','',data)","e42b4d74":"messdata","7e997283":"messagep=re.compile('\\d+\/\\d+\/\\d+,\\s\\d+:\\d+\\s-.*:.*')\ndtu=re.findall(messagep, data)\ndtu","aff05988":"date=list(map(lambda t : t.split(\"-\")[0],dtu))\n#split the lines into 2 using the '-' sign","7304771b":"len(date)","17a32936":"date","e19d251c":"time=list(map(lambda x:x.split(',')[1].strip(' '),date))\ntime\n#Seperate the time with the comma and put it in a list ","f5a5c36a":"len(time)","f2b6c93d":"date=list(map(lambda x:x.split(',')[0].strip(' '),date))\ndate","a4eb249f":"sender_message=list(map(lambda t : t.split(\"-\")[1],dtu))\nsender_message\n#getting the names and the messengers ","e5d3280f":"sender=list(map(lambda sm: sm.split(':')[0].lstrip(' '), sender_message))\nsender","9928783c":"message=list(map(lambda sm: sm.split(':')[1].lstrip(' '), sender_message))\nmessage\n#getting the messages ","eba1bbb7":"df=pd.DataFrame({'Date':date, 'Time':time, 'Sender':sender, 'Message':message})\n#creating a dataframe from what was collected ","0fda0099":"df.index+=1\ndf","8b9fbc44":"df[\"Letter_Count\"]=df['Message'].apply(lambda w: len(w.replace(' ','')))","d67094e5":"df[\"Word_Count\"]=df['Message'].apply(lambda w: len(w.split(' ')))","975a6402":"df['Avg_Word_length']=df['Letter_Count']\/\/df[\"Word_Count\"]","841ed76a":"df.to_csv(r\"C:\\Users\\User\\Downloads\\Discussing Football.csv\", encoding='utf-8-sig')","4ffe0b13":"df[df['Word_Count']==df['Word_Count'].max()]","fc63d4bc":"longest_sentences=df.sort_values(by=['Word_Count'],ascending=False).head(5)","43edf8f2":"df.sort_values(by=['Letter_Count'],ascending=False).head(5)","6c0bb3a8":"df.sort_values(by=['Avg_Word_length'],ascending=False).head(5)","fdf37899":"number_of_messages=df.Sender.value_counts()","edd80fad":"Active_members=number_of_messages.head(5)","3c7769f9":"least_activeMembers=number_of_messages.tail(5)","e87255ec":"df.query('Message==\"You deleted this message\"')","21666e6c":"df=df.drop([5078,19199,19200], axis=0)","0ccf3b31":"todrop=df.query('Message==\"This message was deleted\"')","31a66721":"df['Message'].value_counts()[\"This message was deleted\"]","7d711143":"todrop[\"Sender\"].value_counts().head(5)","a87463bb":"df['Hour']=df['Time'].apply(lambda t:t.split(':')[0]).astype('int64')\ndf[\"Hour\"]","901a6a79":"df['Hour'].value_counts().head(10)","f87441eb":"df['Hour'].value_counts().tail(5)","8a81af31":"df['Hour'].dtypes","b6faef96":"nocturnals=df[df['Hour']<6]","0654af73":"nocturn=nocturnals['Sender'].value_counts()","6b077e65":"df.to_csv(r\"C:\\Users\\User\\Downloads\\Discussing Football.csv\", encoding='utf-8-sig',index=False)","4bc9b59b":"\nplt.axes([1,1,1,0.98])\nplt.grid(True)\nnocturn.plot.bar()\nplt.xlabel('Guys That Message at Night')\nplt.ylabel('No. of Messages')\nplt.xticks(rotation=90)\nplt.show()\n%matplotlib inline","4ba587b0":"rush_hours=df['Hour'].value_counts().head(10)\nrush_hours.sort_index().plot.bar()\nplt.xlabel('hours')\nplt.ylabel('No. of Messages')\nplt.xticks(rotation=0)\nplt.show()\n%matplotlib inline","c8dc8167":"rush_hours.sort_index()","dce9db27":"\ndf['Hour'].value_counts().tail(10).sort_index().plot.bar()\nplt.xlabel('hours')\nplt.ylabel('No. of Messages')\nplt.xticks(rotation=0)\nplt.show()\n%matplotlib inline","9f5ad18a":"df.groupby(['Date']).mean().sort_values(by='Date')","b0fffba0":"no_msg_pday=df.groupby(['Date']).count()","8d7f43d3":"no_msg_pday['Message'].mean()","8afffd34":"df['Message'].count()","6692dd5d":"df.to_csv(r\"C:\\Users\\User\\Downloads\\Discussing Football.csv\", encoding='utf8-sig')","1fb9f81c":"<h2>Checking to see the Data<\/h2>","e851c151":"# Extracting the date from the data","8eaff135":"<h2>Importing the needed libraries <\/h2>","d830e7ab":"# Alternatively...\nYou could split each line and remove the date, time, names and messages into lists ","1f090d6d":"# Getting the messages ","5b6cc249":"# Extracting time from the bulk of text","20b058dd":"# Extracting the names of message senders ","e8d4afdd":"<h2>Importing the Data<\/h2>"}}