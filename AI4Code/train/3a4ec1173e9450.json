{"cell_type":{"96a439a6":"code","4bdc779a":"code","1571d938":"code","a776763c":"code","a5dbf772":"code","4832770d":"code","24190e2c":"code","dfdf46c3":"code","a2df183c":"code","1f485595":"code","098607aa":"code","8e6e64d8":"code","cc691c78":"code","ff03130d":"code","3ed54f9b":"code","8e1f6f96":"code","0796838c":"code","72993850":"markdown","5568b68e":"markdown","042cc98d":"markdown","a36d941d":"markdown","14096e35":"markdown","2aa9fab8":"markdown","a71a41fa":"markdown","136d6264":"markdown","2080685f":"markdown","18ef3031":"markdown","eea94d26":"markdown","e103f408":"markdown","1f73e594":"markdown","6bfbbcbc":"markdown","61fd5d8d":"markdown","03d513f4":"markdown","a59323f0":"markdown","74715550":"markdown","59ab9c0e":"markdown","a2ebdd39":"markdown","7d5dc77e":"markdown","93db582d":"markdown","43a76f40":"markdown","d7cd51c2":"markdown","47c57087":"markdown"},"source":{"96a439a6":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nfrom matplotlib.ticker import MaxNLocator\nimport seaborn as sns\nfrom scipy import stats\nimport plotly.express as px\nimport os","4bdc779a":"fig, ax = plt.subplots(figsize=(15,8))\ndeforest_df = pd.read_csv('..\/input\/brazilian-amazon-rainforest-degradation\/def_area_2004_2019.csv')\ndeforest_df.drop(['AMZ LEGAL'], axis=1, inplace=True)\nstates = ['Acre', 'Amazonas', 'Amapa', 'Maranhao', 'Mato Grosso', 'Para', 'Rondonia', 'Roraima', 'Tocantins']\ndeforest_df.plot(x='Ano\/Estados', y=deforest_df.columns[1:10], \n                 label=states , colormap='tab10', linewidth=2, ax=ax)\nax.set_xlabel('Year', fontsize=12)\nax.set_ylabel('Area in $km^2$', fontsize=12)\nax.set_title('Yearly Deforested Amazon Rainforest Area by State from 2004-2019', fontsize=14)\nax.grid(axis='y', color='0.95')","1571d938":"fig, ax = plt.subplots(3, 3, figsize=(15,10))\nplt.subplots_adjust(wspace=0.3, hspace=0.5)\nplt.suptitle('Yearly Deforested Amazon Area in each State from 2004-2019', fontsize=15)\ncol_names = deforest_df.columns[1:10]\nfor i in range(3):\n    for j in range(3):\n        col = col_names[i*3+j]\n        ax[i,j].plot(deforest_df['Ano\/Estados'], deforest_df[col], linewidth=2, color='forestgreen')\n        ax[i,j].set_ylabel('Area in $km^2$', fontsize=12)\n        ax[i,j].set_title(states[i*3+j])\n        ax[i,j].grid(axis='y', color='0.95')\n        ax[i,j].xaxis.set_major_locator(MaxNLocator(integer=True))\n        if (j>0):\n             ax[i,j].set(ylabel='')","a776763c":"fig, ax = plt.subplots(figsize=(15,8))\ndeforest_df['total_area'] = deforest_df['AC'] + deforest_df['AM'] + deforest_df['AP'] + deforest_df['MA'] + deforest_df['MT'] + deforest_df['PA'] + deforest_df['RO'] + deforest_df['RR']+ deforest_df['TO']\ndeforest_df.plot(x='Ano\/Estados', y='total_area',linewidth=2, \n                 legend=False, color='forestgreen', ax=ax)\nax.set_xlabel('Year', fontsize=12)\nax.set_ylabel('Area in $km^2$', fontsize=12)\nax.set_title('Yearly Total Deforested Area in the Amazon from 2004-2019', fontsize=14)\nax.grid(axis='y', color='0.95')","a5dbf772":"fig, ax = plt.subplots(figsize=(15,8))\nstates_def_df = deforest_df.append(deforest_df.sum(numeric_only=True), ignore_index=True)\nstates_def_df.drop(['Ano\/Estados', 'total_area'], axis=1, inplace=True)\nbar_def = states_def_df.iloc[[-1]].squeeze().tolist()\nax.bar(states, bar_def, width=0.6, color='darkolivegreen')\nax.set_ylabel('Area in $km^2$', fontsize=12)\nax.set_title('Total Deforested Area in each State from 2004-2019', fontsize=14)\nplt.show()","4832770d":"fig, ax = plt.subplots(figsize=(15,8))\nclimate_df = pd.read_csv('..\/input\/brazilian-amazon-rainforest-degradation\/el_nino_la_nina_1999_2019.csv')\nheight_map = {'Weak': 1, 'Moderate': 2, 'Strong': 3, 'Very Strong': 4}\nclimate_df['severity_height'] = climate_df['severity'].map(height_map)\nclimate_df.sort_values(by='start year', inplace=True)\ncolors = {'La Nina': 'seagreen', 'El Nino': 'tan'}\nclimate_df.plot.bar(x='start year', y='severity_height', \n                    yticks=range(1,5,1), width = 0.8,  \n                    color=climate_df['phenomenon'].replace(colors), rot=45, ax=ax)\nax.set_xlabel('Year', fontsize=12)\nax.set_ylabel('Severity', fontsize=12)\nax.set_title('Global Climate Phenomena', fontsize=14)\nax.set_yticklabels(height_map.keys())\nlabels = ['La Nina', 'El Nino']\nhandles = [plt.Rectangle((0,0),1,1, color=colors[label]) for label in labels]\nax.legend(handles, labels)\nplt.show()","24190e2c":"fig, ax = plt.subplots(figsize=(15,8))\ndeforest_climate_df = pd.merge(left=climate_df, right=deforest_df, left_on='start year', right_on='Ano\/Estados')\nalpha_map = {'Weak': 0.4, 'Moderate': 0.6, 'Strong': 0.8, 'Very Strong': 1}\ndeforest_climate_df['severity_alpha'] = deforest_climate_df['severity'].map(alpha_map)\n# Plot El Nino and La Nina bars\nax.bar(x=deforest_climate_df['start year'], height=1, width=0.9, color=deforest_climate_df['phenomenon'].replace(colors))\nfor bar, alpha in zip(ax.containers[0], deforest_climate_df['severity_alpha']):\n    bar.set_alpha(alpha)\nax.get_yaxis().set_ticks([])\n# Plot deforestation line \nax2 = ax.twinx()\ndeforest_climate_df.plot(x='Ano\/Estados', y='total_area', \n                 linewidth=2, \n                 legend=False, color='maroon', ax=ax2)\nax.set_xlabel('Year', fontsize=12)\nax2.set_ylabel('Area in $km^2$', fontsize=12)\nax.set_title('Deforested Area in the Amazon and Global Climate Phenomena', fontsize=14)\n# Make a legend\nlegend_labels = ['La Nina', 'El Nino', 'Deforested Area']\nhandles = [plt.Rectangle((0,0),1,1,color=colors[label]) for label in labels]\nline = plt.Line2D([0], [0], color='maroon', linewidth=2, label='Deforested Area')\nhandles.append(line)\nax.legend(handles, legend_labels)\nplt.show()","dfdf46c3":"months_map = {1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr', 5:'May', 6:'Jun', 7:'Jul', 8:'Aug', 9:'Sep',\n             10:'Oct', 11:'Nov', 12:'Dec'}\nfires_df = pd.read_csv('..\/input\/brazilian-amazon-rainforest-degradation\/inpe_brazilian_amazon_fires_1999_2019.csv')\nfires_df.state = [x.capitalize() for x in fires_df.state]\nfires_df['month_str'] = fires_df['month'].map(months_map)\nfig = px.scatter_geo(fires_df, lat='latitude',lon='longitude', color='state', \n                     hover_data=['state', 'year', 'month_str', 'firespots'], width=800, height=500)\nfig.update_layout(title = 'Amazon Fire Outbreaks Map from 1999-2019', title_x=0.5, geo_scope='south america',\n                 legend_title_text='State')\nfig.show()","a2df183c":"fig, ax = plt.subplots(figsize=(12,12))\nfires_piv = pd.pivot_table(fires_df, values='firespots',index=['year'], columns=['state'], \n                     aggfunc=np.sum, fill_value=0)\nax = sns.heatmap(fires_piv, cmap='Oranges')\nax.set_xlabel('State', fontsize=12)\nax.set_ylabel('Year', fontsize=12)\nax.set_title('Total Amazon Fire Outbreaks by State from 1999-2019', fontsize=14)\nplt.setp(ax.yaxis.get_majorticklabels(), rotation=0)\nplt.show()","1f485595":"fig, ax = plt.subplots(3,3, figsize=(15,10))\nplt.subplots_adjust(wspace=0.5, hspace=0.5)\nplt.suptitle('Amazon Fire Outbreaks by State from 1999-2019', fontsize=15)\n# Make a pivot table for fires in each state\nstates_piv = pd.pivot_table(fires_df, values='firespots',index=['year'], columns=['state', 'month'], \n                            aggfunc=np.sum, fill_value=0)\nstates_list = ['Acre', 'Amazonas', 'Amapa', 'Maranhao', 'Mato grosso', 'Para', 'Rondonia', 'Roraima', 'Tocantins']\nmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\nfor i in range(3):\n    for j in range(3):\n        col = states_list[i*3+j]\n        piv_plot = states_piv[[col]]\n        sns.heatmap(piv_plot, cmap='Oranges', xticklabels=months, ax=ax[i,j])\n        ax[i,j].set_xlabel('')\n        ax[i,j].set_ylabel('')\n        ax[i,j].set_title(col)\n        plt.setp(ax[i,j].xaxis.get_majorticklabels(), rotation=75)","098607aa":"fig, ax = plt.subplots(figsize=(15,8))\nmonths_piv = pd.pivot_table(fires_df, values='firespots',index=['month'], aggfunc=np.sum, fill_value=0)\nmonths_piv.plot(xticks=range(1,13,1), linewidth=2, color='orangered', legend=False, ax=ax)\nax.set_ylabel('Firespots', fontsize=12)\nax.set_title('Total Monthly Amazon Fire Outbreaks from 1999-2019', fontsize=14)\nax.set_xticklabels(months_map.values())\nax.grid(axis='y', color='0.95')\nplt.show()","8e6e64d8":"fig, ax = plt.subplots(3,3, figsize=(15,10))\nplt.subplots_adjust(wspace=0.3, hspace=0.5)\nplt.suptitle('Yearly Amazon Fire Outbreaks in each State from 1999-2019', fontsize=15)\nfor i in range(3):\n    for j in range(3):\n        col = states_list[i*3+j]\n        piv_plot = fires_piv[[col]]\n        ax[i,j].plot(piv_plot.index, piv_plot[col], linewidth=2, color='orangered')\n        ax[i,j].set_ylabel('Firespots', fontsize=12)\n        ax[i,j].set_title(states[i*3+j])\n        ax[i,j].grid(axis='y', color='0.95')\n        if (j>0):\n             ax[i,j].set(ylabel='')","cc691c78":"fig, ax = plt.subplots(figsize=(15,8))\ntotal_fires_piv = pd.pivot_table(fires_df, values='firespots',index=['year'], \n                     aggfunc=np.sum, fill_value=0)\ntotal_fires_piv.plot(linewidth=2, color='orangered', legend=False, ax=ax)\nax.xaxis.set_major_locator(MaxNLocator(integer=True))\nax.set_xlabel('Year', fontsize=12)\nax.set_ylabel('Firespots', fontsize=12)\nax.set_title('Yearly Amazon Fire Outbreaks from 1999-2019', fontsize=14)\nax.grid(axis='y', color='0.95')\nplt.show()","ff03130d":"fig, ax = plt.subplots(figsize=(15,8))\nplt.title('Yearly Fires and Deforested Area in the Amazon', fontsize=14)\n# Plot the total deforested area\ndeforest_df['total_area'] = deforest_df['AC'] + deforest_df['AM'] + deforest_df['AP'] + deforest_df['MA'] + deforest_df['MT'] + deforest_df['PA'] + deforest_df['RO'] + deforest_df['RR']+ deforest_df['TO']\ndeforest_df.plot(x='Ano\/Estados', y='total_area', \n                 linewidth=2, legend=False, color='forestgreen', ax=ax)\nax.set_xlabel('Year', fontsize=12)\nax.set_ylabel('Area in $km^2$', fontsize=12)\nax.grid(axis='x', color='0.95')\n# Plot the total number of firespots\nax2 = ax.twinx()\ntotal_fires_piv.plot(linewidth=2, color='orangered', legend=False, ax=ax2)\nax2.xaxis.set_major_locator(MaxNLocator(integer=True))\nax2.set_ylabel('Firespots', fontsize=12)\n# Set the legend labels\nline_labels = ['Deforested Area', 'Firespots']\nhandles = [plt.Line2D([0], [0], color='forestgreen', linewidth=2, label='Deforested Area')]\nline_def = plt.Line2D([0], [0], color='orangered', linewidth=2, label='Deforested Area')\nhandles.append(line_def)\nax.legend(handles, line_labels)\nplt.show()","3ed54f9b":"fig, ax = plt.subplots(figsize=(15,8))\n# Remove fire data prior to 2004 to match with deforestation data\nfires_df_filtered = fires_df[fires_df['year'] >= 2004]\nstate_fires_df = pd.pivot_table(fires_df_filtered, values='firespots',index=['state'], \n                                aggfunc=np.sum, fill_value=0)\nstate_fires_df['deforestation'] = bar_def\n# Plot data on a single X-axis\nax2 = ax.twinx()\nstate_fires_df.deforestation.plot(kind='bar', color='darkolivegreen', ax=ax, width=0.4, rot=0, position=1)\nstate_fires_df.firespots.plot(kind='bar', color='orangered', ax=ax2, width=0.4, rot=0, position=0)\nax.set_title('Total Deforested Area and Total Fires in each State from 2004-2019', fontsize=14)\nax.set_ylabel('Area in $km^2$', fontsize=12)\nax.set_xlabel('')\nax2.set_ylabel('Firespots', fontsize=12)\n# Make a legend\nbar_colors = {'Deforested Area': 'forestgreen', 'Firespots': 'orangered'}\nbar_labels = ['Deforested Area', 'Firespots']\nbar_handles = [plt.Rectangle((0,0),1,1,color=bar_colors[label]) for label in bar_labels]\nax.legend(bar_handles, bar_labels)\nplt.show()","8e1f6f96":"fig, ax = plt.subplots(figsize=(15,8))\nslope, intercept, r_value, p_value, std_err = stats.linregress(state_fires_df.deforestation, state_fires_df.firespots)\nax.plot(state_fires_df.deforestation, state_fires_df.firespots, 'o', color='blue', markersize=8)\nax.plot(state_fires_df.deforestation, intercept + slope*state_fires_df.deforestation, linewidth=2, color='maroon')\nax.set_xlabel('Deforestation Area in $km^2$', fontsize=12)\nax.set_ylabel('Firespots', fontsize=12)\nax.set_title('Statewise Fire Outbreaks vs Deforestation Area', fontsize=14)\nax.grid(axis='both', color='0.95')\nax.text(1, 700000, '$r^2$='+str(round(r_value**2, 2)), fontsize='large')\nplt.show()","0796838c":"fig, ax = plt.subplots(figsize=(15,8),sharey=True)\n# Merge climate and fire data by year\nfires_climate_df = pd.merge(left=total_fires_piv, right=climate_df, how='left', left_on='year', right_on='start year')\n# Plot El Nino and La Nina bars\nax.bar(x=climate_df['start year'], height=1, width=0.9, color=climate_df['phenomenon'].replace(colors))\nfor bar, alpha in zip(ax.containers[0], deforest_climate_df['severity_alpha']):\n    bar.set_alpha(alpha)\nax.get_yaxis().set_ticks([])\n# Plot firespots line \nax2 = ax.twinx()\ntotal_fires_piv.plot(linewidth=2,\n                     color='orangered', legend=False, ax=ax2)\nax2.xaxis.set_major_locator(MaxNLocator(integer=True))\nax2.set_ylabel('Firespots', fontsize=12)\nax2.set_title('Fire Outbreaks in the Amazon and Global Climate Phenomena', fontsize=14)\n# Make a legend\nlegend_labels = ['La Nina', 'El Nino', 'Firespots']\nhandles = [plt.Rectangle((0,0),1,1,color=colors[label]) for label in labels]\nline = plt.Line2D([0], [0], color='orangered', linewidth=2, label='Firespots')\nhandles.append(line)\nax.legend(handles, legend_labels)\nax.xaxis.set_major_locator(MaxNLocator(integer=True))\nplt.show()","72993850":"We can examine the firespots data from all states to see how the month affects the number of fires.","5568b68e":"#### Amazon Fire Outbreaks Data Analysis: \nNext, let's analyze the firespots data for the Amazon states. A map is always helpful to relate to where the data comes from geographically. Below is a map of the fires in each state from 1999-2019. Each dot represents multiple fires at the average latitude and longitude of those fires. ","042cc98d":"When adding up all the deforested areas in the 9 states, we can see that deforestation slowed and increased over the years. 2004-2012 saw an overall downward trend in forest loss, but there has been a consistent increase since then. Can we figure out which state has had the most deforestation since 2004?","a36d941d":"#### El Nino and La Nina: \nNow, let's look at whether the global climate phenomena of El Nino and La Nina have any relation to the deforestation rate in the Brazilian Amazon rainforest. \n\nEl Nino brings dry conditions to South America, leading to more chances of forest fires in the Amazon. Also, fires set by people have more chances to burn out of control. La Nina on the other hand, brings wet conditions to the Amazon, which will reduce the impact of forest fires. Below is a chart showing the years and severity of the two phenomena.","14096e35":"Plotting the deforested area per state along with the total fires per state could also help in seeing if there are any correlations between fires and tree loss. ","2aa9fab8":"Next, let's plot the trend in fires in all nine states from 1999 to 2019.  ","a71a41fa":"Looking at the severities of El Nino and La Nina (indicated by the transparency of the bars), as well as the rate of deforestation, there doesn't appear to be a correlation between the two factors. Deforestation doesn't necessarily increase or decrease after a La Nina or El Nino event. ","136d6264":"Fires increased in years when El Nino was active, as seen above in the years 2002, 2004, 2014 and 2015. But, La Nina also was active during fire peaks, such as in the years 2005, 2007, 2010 and 2017. Perhaps it's not solely climate phenomena that are driving the frequency of fires. Fires could be caused by human activities. ","2080685f":"Next, let's plot trend lines for the fires in each state to see how fire frequency has changed over the years. ","18ef3031":"From the bar chart above we can see that more fires correlate to more deforestation in a state. Amapa and Amazonas however, do not appear to not follow this pattern. A linear regression could help us check for a potential correlation as well. ","eea94d26":"We can see that overwhelmingly larger numbers of fire outbreaks occurred in the second half of the years from 1999-2019. ","e103f408":"Let's overlay the deforestation trend line with the severity of El Nino and La Nina, and see if we can notice any correlations.","1f73e594":"From the graphs above we can see that the states don't follow the same trends in number of fires from 1999-2019. Some states saw more fires from 1999-2009, others saw fewer fires in the same time period. ","6bfbbcbc":"The graph above shows that total deforested area usually increases in the years after the firespots hit a peak. This would make sense because fires increase the rate of deforestation. ","61fd5d8d":"### Brazilian Amazon Rainforest Degradation Analysis (1999-2019):\nLet's analyze the degradation data of the Brazilian Amazon Rainforest. We want to find out what factors could be causing deforestation from the data that is provided. First off, let's look at the deforested area per state over the years. ","03d513f4":"Looking at the graph above, we can see that the number of fires was very high between 2001 and 2004, and reduced after that but with recurring highs. ","a59323f0":"By separating the heatmaps for each state, we can see that different states show higher numbers of fires at different times of the year. Most of the states see more fires in the second half of the year, while Roraima saw more fires in the first half of the year. ","74715550":"When plotted individually, we can see that not all states had a downward trend in deforestation from 2004 to 2012. Amapa, Maranhao and Roraima saw increases in deforestation during that time period. Now, let's look at the trend in total deforested area from 2004 to 2019.  ","59ab9c0e":"Para has had the most deforestation from 2004-2019. Later, we will find out if Para has had a large number of fires that could have contributed to loss in tree cover. ","a2ebdd39":"The high value of the coefficient of determination (r-squared) shows that there is a strong correlation between the number of fire outbreaks in a state, and the area of deforestation. ","7d5dc77e":"Let's examine the fire frequency for all the states. A heatmap would be able to tell us which states have more frequent fires.","93db582d":"There may be a relationship between the number of fires and the loss of tree cover. Let's plot the total firespots and total deforested area over time to examine this possibility. ","43a76f40":"2004 was an especially bad year for deforestation, and while the area that was deforested was on a downward trend until 2012, it rose again after that for most of the states. Plotting the area for each state on a separate graph could give us a clearer picture. ","d7cd51c2":"### Conclusion\nIn conclusion, we can say that Amazon rainforest degradation has been increasing. Factors such as human activity, fire outbreaks, and perhaps El Nino are driving the deforestation, causing great loss to a precious ecosystem.  ","47c57087":"Mato Grosso, Para, and Rondonia have a higher number of fires compared to the other states. Para had an exceptionally high number of fires in 2002. Earlier, we had found that Para also has the highest deforested area out of the nine states. Let's look at each state individually and see if we can spot any trends in the data. "}}