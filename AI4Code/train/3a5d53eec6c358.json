{"cell_type":{"f1708b59":"code","3456e791":"code","c74007ae":"code","386ff02b":"code","c8118877":"code","94397fd7":"code","7fc9a58a":"code","faf594f9":"code","ad7b9650":"code","6bd5775e":"code","d9dfd158":"code","1b5ba0d9":"code","de40df6c":"code","3af0520b":"code","3fef64d7":"code","134a4e10":"code","1bb1f498":"code","ecd138ec":"code","0b5c5534":"code","52a430d0":"code","96899034":"code","8b916faa":"code","664a7638":"code","42b2a799":"code","eb875abb":"code","6a129c8c":"code","1e30e785":"code","f4b1d7e8":"code","1b9d8165":"code","fdb95a85":"code","e5ec47a4":"code","df9eabf0":"code","ecb077f5":"code","cd0a5446":"code","7747e107":"code","de534027":"code","65dd8895":"code","4f8bd1b4":"code","884fc7fe":"code","e1dbb3c6":"code","3c53e8b1":"code","90d110d1":"code","3d360ab5":"code","998c1d50":"code","2192f962":"code","12fb88cf":"code","44ade617":"code","2d30bc4a":"code","802523c5":"code","d2a734b9":"code","1f2d7ccb":"code","6d80db82":"code","ddca008d":"code","ab83d511":"code","54cd7f32":"code","afb7d728":"code","22ebe3ba":"code","8d46564d":"code","153b2713":"code","52932b95":"code","163f7adf":"code","4139b7f5":"code","09daad6d":"code","9321db3a":"code","1c6ae7df":"code","579185ef":"code","3e5fba31":"code","f5f0a731":"code","623f72f2":"code","658d11d3":"code","c6e63485":"markdown","4908f5ae":"markdown","66c2849d":"markdown","91352ead":"markdown","5d97bd89":"markdown","f23632ed":"markdown","44f96a01":"markdown","e3ad6dd5":"markdown","82233322":"markdown","7814a759":"markdown","d3af0d27":"markdown","47d1bfc6":"markdown","cff5d25a":"markdown","08b25ec9":"markdown","4365e02f":"markdown","0e6a52e5":"markdown","bc954f99":"markdown","03d85235":"markdown","3c0ac39e":"markdown","7adb1bc9":"markdown","4f157587":"markdown","51dd2480":"markdown","ac8b10ca":"markdown","b0d22e77":"markdown","046f4568":"markdown","31fb464f":"markdown","1709f7c4":"markdown","ae3baf77":"markdown","3604fa1d":"markdown","c566e5dd":"markdown","343e2c88":"markdown","847c9443":"markdown","957407c6":"markdown","07ec4357":"markdown","dc6ce433":"markdown","0e91c0b6":"markdown","b8dfb1b0":"markdown","55906546":"markdown","1ac76cf9":"markdown","fd93a2a8":"markdown","8543a574":"markdown","58deca7a":"markdown","8db2d629":"markdown"},"source":{"f1708b59":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","3456e791":"df=pd.read_csv(\"..\/input\/telco-customer-churn\/WA_Fn-UseC_-Telco-Customer-Churn.csv\",sep=',',decimal='.')","c74007ae":"df.rename(columns={'customerID':'M\u00fc\u015fteri ID','gender':'Cinsiyet','SeniorCitizen':'Ya\u015fl\u0131','Partner':'Evli',\n                   'Dependents':'Ekonomik Ba\u011f\u0131ml\u0131','tenure':'Abonelik S\u00fcresi','PhoneService':'Telefon Hizmeti',\n                   'MultipleLines':'Birden Fazla Hat','InternetService':'\u0130nternet Servisi',\n                   'OnlineSecurity':'\u00c7evrimi\u00e7i G\u00fcvenlik','OnlineBackup':'\u00c7evrimi\u00e7i Yedekleme',\n                   'DeviceProtection':'Cihaz Koruma','TechSupport':'Teknik Destek','StreamingTV':'Televizyon',\n                   'StreamingMovies':'Film','Contract':'S\u00f6zle\u015fme S\u00fcresi','PaperlessBilling':'\u00c7evrimi\u00e7i Fatura',\n                   'PaymentMethod':'\u00d6deme Y\u00f6ntemi','MonthlyCharges':'Ayl\u0131k \u00d6deme','TotalCharges':'Toplam \u00d6deme',\n                   'Churn':'M\u00fc\u015fteri Kayb\u0131'},inplace=True)","386ff02b":"df.head(8000)","c8118877":"df.drop('M\u00fc\u015fteri ID', axis=1, inplace=True)","94397fd7":"df[\"M\u00fc\u015fteri Kayb\u0131\"]= df[\"M\u00fc\u015fteri Kayb\u0131\"].replace(\"No\",\"M\u00fc\u015fteri Kayb\u0131 Olu\u015fmad\u0131\") \ndf[\"M\u00fc\u015fteri Kayb\u0131\"]= df[\"M\u00fc\u015fteri Kayb\u0131\"].replace(\"Yes\",\"M\u00fc\u015fteri Kayb\u0131 Olu\u015ftu\")","7fc9a58a":"df[\"Ya\u015fl\u0131\"]= df[\"Ya\u015fl\u0131\"].replace(0, \"No\") \ndf[\"Ya\u015fl\u0131\"]= df[\"Ya\u015fl\u0131\"].replace(1, \"Yes\") ","faf594f9":"df.info()","ad7b9650":"df['Toplam \u00d6deme'] = pd.to_numeric(df['Toplam \u00d6deme'], errors='coerce')\ndf['Toplam \u00d6deme'] = df['Toplam \u00d6deme'].fillna(value=0)","6bd5775e":"df['Ya\u015fl\u0131'] = df['Ya\u015fl\u0131'].astype('object')","d9dfd158":"df.describe()","1b5ba0d9":"sns.countplot(x = \"M\u00fc\u015fteri Kayb\u0131\", data = df)\ndf.loc[:, 'M\u00fc\u015fteri Kayb\u0131'].value_counts()","de40df6c":"df.isnull().sum()","3af0520b":"Kategorik = df.select_dtypes(include='object').drop('M\u00fc\u015fteri Kayb\u0131', axis=1).columns.tolist()\nSay\u0131sal = df.select_dtypes(exclude='object').columns.tolist()","3fef64d7":"for c in Kategorik:\n    print('Column {} unique values: {}'.format(c, len(df[c].unique())))","134a4e10":"plt.figure(figsize=(18,18))\nfor i,c in enumerate(Kategorik):\n    plt.subplot(5,4,i+1)\n    sns.countplot(df[c], hue=df['M\u00fc\u015fteri Kayb\u0131'])\n    plt.title(c)\n    plt.xlabel('')","1bb1f498":"plt.figure(figsize=(20,5))\nfor i,c in enumerate(['Abonelik S\u00fcresi', 'Ayl\u0131k \u00d6deme', 'Toplam \u00d6deme']):\n    plt.subplot(1,3,i+1)\n    sns.distplot(df[df['M\u00fc\u015fteri Kayb\u0131'] == 'M\u00fc\u015fteri Kayb\u0131 Olu\u015fmad\u0131'][c], kde=True, color='blue', hist=False, kde_kws=dict(linewidth=2), label='M\u00fc\u015fteri Kayb\u0131 Olu\u015fmad\u0131')\n    sns.distplot(df[df['M\u00fc\u015fteri Kayb\u0131'] == 'M\u00fc\u015fteri Kayb\u0131 Olu\u015ftu'][c], kde=True, color='Orange', hist=False, kde_kws=dict(linewidth=2), label='M\u00fc\u015fteri Kayb\u0131 Olu\u015ftu')\n    plt.title(c)","ecd138ec":"df.head(8000)","0b5c5534":"df.info()","52a430d0":"import seaborn as sns\nsns.boxplot(x=df['Abonelik S\u00fcresi'],y=df['M\u00fc\u015fteri Kayb\u0131'])","96899034":"import seaborn as sns\nsns.boxplot(x=df['Ayl\u0131k \u00d6deme'],y=df['M\u00fc\u015fteri Kayb\u0131'])","8b916faa":"import seaborn as sns\nsns.boxplot(x=df['Toplam \u00d6deme'],y=df['M\u00fc\u015fteri Kayb\u0131'])","664a7638":"from sklearn.preprocessing import LabelEncoder\nencoded = df.apply(lambda x: LabelEncoder().fit_transform(x) if x.dtype == 'object' else x)\nencoded.head(8000)","42b2a799":"M\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131=encoded.loc[encoded['M\u00fc\u015fteri Kayb\u0131'].abs()>0]\nM\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131","eb875abb":"Q1 = M\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131['Toplam \u00d6deme'].quantile(0.25)\nQ3 = M\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131['Toplam \u00d6deme'].quantile(0.75)\nIQR = Q3 - Q1\nIQR","6a129c8c":"Q=Q3+(1.5*IQR)\nQ","1e30e785":"encoded_out = encoded[~((encoded['Toplam \u00d6deme'] < (Q3 + 1.5 * IQR)))&(encoded['M\u00fc\u015fteri Kayb\u0131']>0)]\nencoded_out.head(8000)","f4b1d7e8":"encoded.drop(encoded[~((encoded['Toplam \u00d6deme'] < (Q3 + 1.5 * IQR)))&(encoded['M\u00fc\u015fteri Kayb\u0131']>0)].index, inplace=True)\nencoded.head(8000)","1b9d8165":"Q1_A = M\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131['Abonelik S\u00fcresi'].quantile(0.25)\nQ3_A = M\u00fc\u015fteri_Kayb\u0131_Ya\u015fand\u0131['Abonelik S\u00fcresi'].quantile(0.75)\nIQR_A = Q3_A - Q1_A\nIQR_A","fdb95a85":"Q_A=Q3_A+(1.5*IQR_A)\nQ_A","e5ec47a4":"encoded_A_out = encoded[~((encoded['Abonelik S\u00fcresi'] < (Q3_A + 1.5 * IQR_A)))&(encoded['M\u00fc\u015fteri Kayb\u0131']>0)]\nencoded_A_out.head(8000)","df9eabf0":"encoded.drop(encoded[~((encoded['Abonelik S\u00fcresi'] < (Q3_A + 1.5 * IQR_A)))&(encoded['M\u00fc\u015fteri Kayb\u0131']>0)].index, inplace=True)\nencoded.head(8000)","ecb077f5":"x = df.drop('M\u00fc\u015fteri Kayb\u0131', axis = 1)              \ny = df['M\u00fc\u015fteri Kayb\u0131'] ","cd0a5446":"from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.85, random_state = 400)","7747e107":"x_test.head(8000)","de534027":"x_train.head(8000)","65dd8895":"y_test.head(8000)","4f8bd1b4":"y_train.head(8000)","884fc7fe":"x=encoded['Cinsiyet']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Cinsiyet:', x.corr(y)*100)\nx=encoded['Ya\u015fl\u0131']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Ya\u015fl\u0131:', x.corr(y)*100)\nx=encoded['Evli']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Evli:', x.corr(y)*100)\nx=encoded['Ekonomik Ba\u011f\u0131ml\u0131']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Ekonomik Ba\u011f\u0131ml\u0131:', x.corr(y)*100)\nx=encoded['Abonelik S\u00fcresi']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Abonelik S\u00fcresi:', x.corr(y)*100)\nx=encoded['Telefon Hizmeti']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Telefon Hizmeti:', x.corr(y)*100)\nx=encoded['Birden Fazla Hat']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Birden Fazla Hat:', x.corr(y)*100)\nx=encoded['\u0130nternet Servisi']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('\u0130nternet Servisi:', x.corr(y)*100)\nx=encoded['\u00c7evrimi\u00e7i G\u00fcvenlik']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('\u00c7evrimi\u00e7i G\u00fcvenlik:', x.corr(y)*100)\nx=encoded['\u00c7evrimi\u00e7i Yedekleme']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('\u00c7evrimi\u00e7i Yedekleme:', x.corr(y)*100)\nx=encoded['Cihaz Koruma']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Cihaz Koruma:', x.corr(y)*100)\nx=encoded['Teknik Destek']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Teknik Destek:', x.corr(y)*100)\nx=encoded['Televizyon']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Televizyon:', x.corr(y)*100)\nx=encoded['Film']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Film:', x.corr(y)*100)\nx=encoded['S\u00f6zle\u015fme S\u00fcresi']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('S\u00f6zle\u015fme S\u00fcresi:', x.corr(y)*100)\nx=encoded['\u00c7evrimi\u00e7i Fatura']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('\u00c7evrimi\u00e7i Fatura:', x.corr(y)*100)\nx=encoded['\u00d6deme Y\u00f6ntemi']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('\u00d6deme Y\u00f6ntemi:', x.corr(y)*100)\nx=encoded['Ayl\u0131k \u00d6deme']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Ayl\u0131k \u00d6deme:', x.corr(y)*100)\nx=encoded['Toplam \u00d6deme']\ny=encoded['M\u00fc\u015fteri Kayb\u0131']\nprint('Toplam \u00d6deme:', x.corr(y)*100)","e1dbb3c6":"encoded.drop('Cinsiyet', axis=1, inplace=True)\nencoded.drop('Telefon Hizmeti', axis=1, inplace=True)\nencoded.drop('Birden Fazla Hat', axis=1, inplace=True)\nencoded.drop('\u0130nternet Servisi', axis=1, inplace=True)\nencoded.drop('Televizyon', axis=1, inplace=True)\nencoded.drop('Film', axis=1, inplace=True)","3c53e8b1":"x=encoded.drop('M\u00fc\u015fteri Kayb\u0131',axis=1)\ny=encoded['M\u00fc\u015fteri Kayb\u0131']","90d110d1":"from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x,y, test_size=0.85, random_state=43)","3d360ab5":"from sklearn.preprocessing import MinMaxScaler,StandardScaler","998c1d50":"sc=StandardScaler()","2192f962":"x_train=sc.fit_transform(x_train)\nx_test=sc.fit_transform(x_test)","12fb88cf":"from sklearn.linear_model import LogisticRegression\nfrom sklearn.preprocessing import OneHotEncoder","44ade617":"Logistic_Regression = LogisticRegression(C=0.5,tol=0.1,multi_class='multinomial',solver='newton-cg',penalty='l2',max_iter=100)\nLogistic_Regression.fit(x_train, y_train)","2d30bc4a":"y_pred=Logistic_Regression.predict(x_test)","802523c5":"from sklearn.metrics import confusion_matrix, classification_report\nfrom sklearn.metrics import accuracy_score","d2a734b9":"classification_report(y_true=y_test, y_pred=y_pred)","1f2d7ccb":"accuracy_score(y_test, y_pred)*100","6d80db82":"confusion_matrix(y_test, y_pred)","ddca008d":"from sklearn.naive_bayes import GaussianNB\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import classification_report\nNBG = GaussianNB()\nNBG.fit(x_train, y_train)\ny_tahmin = NBG.predict(x_test)\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.85, random_state=42)\nprint(\"x_train: \", x_train.shape)\nprint(\"x_test: \", x_test.shape)\nprint(\"y_train: \", y_train.shape)\nprint(\"y_test: \", y_test.shape)\nprint(\"Navy Bayes Gaussian Do\u011fruluk Skoru :\",accuracy_score(y_test, y_tahmin))\nprint(\"Kar\u0131\u015f\u0131kl\u0131k Matrisi :\",confusion_matrix(y_test, y_tahmin))\nprint(\"S\u0131n\u0131fland\u0131rma Raporu :\",classification_report(y_test, y_tahmin))","ab83d511":"from sklearn.naive_bayes import MultinomialNB\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import classification_report\nNBM = MultinomialNB()\nNBM.fit(x_train, y_train)\ny_tahmin = NBM.predict(x_test)\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.85, random_state=42)\nprint(\"x_train: \", x_train.shape)\nprint(\"x_test: \", x_test.shape)\nprint(\"y_train: \", y_train.shape)\nprint(\"y_test: \", y_test.shape)\nprint(\"Navy Bayes Multinomial Do\u011fruluk Skoru :\",accuracy_score(y_test, y_tahmin))\nprint(\"Kar\u0131\u015f\u0131kl\u0131k Matrisi :\",confusion_matrix(y_test, y_tahmin))\nprint(\"S\u0131n\u0131fland\u0131rma Raporu :\",classification_report(y_test, y_tahmin))","54cd7f32":"from sklearn.naive_bayes import BernoulliNB\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import classification_report\nNBB = BernoulliNB()\nNBB.fit(x_train, y_train)\ny_tahmin = NBB.predict(x_test)\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.85, random_state=42)\nprint(\"x_train: \", x_train.shape)\nprint(\"x_test: \", x_test.shape)\nprint(\"y_train: \", y_train.shape)\nprint(\"y_test: \", y_test.shape)\nprint(\"Navy Bayes Bernoulli Do\u011fruluk Skoru :\",accuracy_score(y_test, y_tahmin))\nprint(\"Kar\u0131\u015f\u0131kl\u0131k Matrisi :\",confusion_matrix(y_test, y_tahmin))\nprint(\"S\u0131n\u0131fland\u0131rma Raporu :\",classification_report(y_test, y_tahmin))","afb7d728":"from sklearn.preprocessing import KBinsDiscretizer  \nest = KBinsDiscretizer(n_bins=4, encode='ordinal', strategy='quantile')\nencoded['Abonelik S\u00fcresi'] = est.fit_transform(encoded['Abonelik S\u00fcresi'].values.reshape(-1,1))","22ebe3ba":"from sklearn.preprocessing import KBinsDiscretizer  \nest = KBinsDiscretizer(n_bins=4, encode='ordinal', strategy='quantile')\nencoded['Ayl\u0131k \u00d6deme'] = est.fit_transform(encoded['Ayl\u0131k \u00d6deme'].values.reshape(-1,1))","8d46564d":"from sklearn.preprocessing import KBinsDiscretizer  \nest = KBinsDiscretizer(n_bins=4, encode='ordinal', strategy='quantile')\nencoded['Toplam \u00d6deme'] = est.fit_transform(encoded['Toplam \u00d6deme'].values.reshape(-1,1))","153b2713":"from sklearn.model_selection import train_test_split\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.metrics import accuracy_score \nfrom sklearn.metrics import confusion_matrix as Kar\u0131\u015f\u0131kl\u0131kMatrisi\n\nx_train, x_test, y_train, y_test = train_test_split(x,y, test_size=0.85, random_state=42)\nKarar_A\u011fac\u0131 = DecisionTreeClassifier(max_depth = 4, random_state=42)\nKarar_A\u011fac\u0131.fit(x_train, y_train)","52932b95":"predictions = Karar_A\u011fac\u0131.predict(x_test)\nscore = round(accuracy_score(y_test, predictions), 2)\nKar\u0131\u015f\u0131kl\u0131kMatrisi = Kar\u0131\u015f\u0131kl\u0131kMatrisi(y_test, predictions)\nsns.heatmap(Kar\u0131\u015f\u0131kl\u0131kMatrisi, annot=True, fmt=\".0f\")\nplt.xlabel('Tahmin De\u011ferler')\nplt.ylabel('Ger\u00e7ek Veriler')\nplt.title('Do\u011fruluk Skoru: {0}'.format(score), size = 15)\nplt.show()","163f7adf":"from sklearn.metrics import classification_report\nprint(classification_report(y_test, predictions, target_names=['Kay\u0131p Olmayanlar', 'Kay\u0131p Olanlar']))","4139b7f5":"from sklearn import tree\nclf = tree.DecisionTreeClassifier(max_depth = 4, random_state=42,min_weight_fraction_leaf=0.0)\nclf = clf.fit(x, y)","09daad6d":"tree.plot_tree(clf,fontsize=10) ","9321db3a":"plt.figure(figsize=(16, 9))\n\nfrom sklearn import ensemble\n\nKarar_A\u011fac\u01312 = DecisionTreeClassifier(max_depth = 4, random_state=42)\nKarar_A\u011fac\u01312.fit(x_train, y_train)\nranking = Karar_A\u011fac\u01312.feature_importances_\nfeatures = np.argsort(ranking)[::-1][:10]\ncolumns = x.columns\n\nplt.title(\"Modelin \u00d6zniteliklerinin \u00d6nem s\u0131ralamas\u0131n\u0131n Analiz Edilmesi\", y = 1.03, size = 18)\nplt.bar(range(len(features)), ranking[features], color=\"lime\", align=\"center\")\nplt.xticks(range(len(features)), columns[features], rotation=80)\nplt.show()","1c6ae7df":"from sklearn.neighbors import KNeighborsClassifier\nerror = []\n\n# Calculating error for K values between 1 and 40\nfor i in range(1, 40):\n    knn = KNeighborsClassifier(n_neighbors=i)\n    knn.fit(x_train, y_train)\n    pred_i = knn.predict(x_test)\n    error.append(np.mean(pred_i != y_test))","579185ef":"plt.figure(figsize=(12, 6))\nplt.plot(range(1, 40), error, color='red', linestyle='dashed', marker='o',markerfacecolor='blue', markersize=10)\nplt.title('Hata Oran\u0131 K \u0130\u00e7in')\nplt.xlabel('K De\u011feri')\nplt.ylabel('Ortalama Hata')","3e5fba31":"from sklearn.neighbors import KNeighborsClassifier\nKNN = KNeighborsClassifier(n_neighbors=1)\nKNN.fit(x_train, y_train)","f5f0a731":"y_pred = KNN.predict(x_test)","623f72f2":"from sklearn.metrics import classification_report, confusion_matrix\nprint(confusion_matrix(y_test, y_pred))\nprint(classification_report(y_test, y_pred))","658d11d3":"from sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import roc_curve\nfrom sklearn.metrics import roc_auc_score\nfrom matplotlib import pyplot\nfrom sklearn.datasets import make_classification\nx, y = make_classification(n_samples=1000, n_classes=2, random_state=1)\ntrainx, testx, trainy, testy = train_test_split(x, y, test_size=0.85, random_state=42)\nKNN_tahmin = [0 for _ in range(len(testy))]\nNBG_tahmin = [0 for _ in range(len(testy))]\nKarar_A\u011fac\u0131_tahmin = [0 for _ in range(len(testy))]\nLogistic_Regression_tahmin = [0 for _ in range(len(testy))]\n\nmodel = NBG\nmodel.fit(trainx, trainy)\nmodel2 = KNN\nmodel2.fit(trainx, trainy)\nmodel3=Karar_A\u011fac\u0131\nmodel3.fit(trainx, trainy)\nmodel4=Logistic_Regression\nmodel4.fit(trainx, trainy)\n\nNBG_tahmin = model.predict_proba(testx)\nKNN_tahmin = model2.predict_proba(testx)\nKarar_A\u011fac\u0131_tahmin = model3.predict_proba(testx)\nLogistic_Regression_tahmin= model4.predict_proba(testx)\n\nNBG_tahmin = NBG_tahmin[:, 1]\nKNN_tahmin = KNN_tahmin[:, 1]\nKarar_A\u011fac\u0131_tahmin = Karar_A\u011fac\u0131_tahmin[:, 1]\nLogistic_Regression_tahmin = Logistic_Regression_tahmin[:, 1]\n\nKNN_hassasiyet = roc_auc_score(testy, KNN_tahmin)\nNBG_hassasiyet = roc_auc_score(testy, NBG_tahmin)\nKarar_A\u011fac\u0131_hassasiyet = roc_auc_score(testy, Karar_A\u011fac\u0131_tahmin)\nLogistic_Regression_hassasiyet = roc_auc_score(testy, Logistic_Regression_tahmin)\n\nprint('KNN: ROC AUC=%.3f' % (KNN_hassasiyet))\nprint('Navy Bayes Gaussian: ROC AUC=%.3f' % (NBG_hassasiyet))\nprint('Karar A\u011fac\u0131: ROC AUC=%.3f' % (Karar_A\u011fac\u0131_hassasiyet))\nprint('Logistic Regresyon: ROC AUC=%.3f' % (Logistic_Regression_hassasiyet))\n\nKNN_fpr, KNN_tpr, _ = roc_curve(testy, KNN_tahmin)\nNBG_fpr, NBG_tpr, _ = roc_curve(testy, NBG_tahmin)\nKarar_A\u011fac\u0131_fpr, Karar_A\u011fac\u0131_tpr, _ = roc_curve(testy, Karar_A\u011fac\u0131_tahmin)\nLogistic_Regression_fpr, Logistic_Regression_tpr, _ = roc_curve(testy, Logistic_Regression_tahmin)\n\npyplot.plot(KNN_fpr, KNN_tpr, linestyle='--', label='KNN')\npyplot.plot(NBG_fpr, NBG_tpr, marker='.', label='Navy Bayes Gaussian')\npyplot.plot(Karar_A\u011fac\u0131_fpr, Karar_A\u011fac\u0131_tpr, marker='.', label='Karar A\u011fac\u0131')\npyplot.plot(Logistic_Regression_fpr, Logistic_Regression_tpr, marker='.', label='Logistic Regresyon')\n\npyplot.xlabel('Ger\u00e7ek M\u00fc\u015fteri Kayb\u0131 Olu\u015ftu')\npyplot.ylabel('Ger\u00e7ek M\u00fc\u015fteri Kayb\u0131 Olu\u015fmad\u0131')\n\npyplot.legend()\n\npyplot.show()","c6e63485":"# 4. S\u0131n\u0131fland\u0131r\u0131lma Algoritmalar\u0131n\u0131n Uygulanmas\u0131 ve Performans Analizleri\nM\u00fc\u015fteri kay\u0131plar\u0131n\u0131n \u00f6nceden tespitini s\u0131n\u0131fland\u0131rma algoritmalar\u0131yla yapaca\u011f\u0131z.\nUygulamam\u0131zda d\u00f6rt s\u0131n\u0131fland\u0131rma algoritmas\u0131 veriye uygulanacak ve performans \u00e7\u0131kt\u0131lar\u0131 analiz edilecektir.Bu performans \u00e7\u0131kt\u0131lar\u0131 ise 5.b\u00f6l\u00fcmde k\u0131yaslanarak, kullan\u0131lacak olan s\u0131n\u0131fland\u0131ma algoritmas\u0131 belirlenecektir.<br>\nBu d\u00f6rt s\u0131n\u0131fland\u0131rma algoritmas\u0131;<br>\nLojistik Regresyon<br>\nNaive Bayes<br>\nKarar A\u011fac\u0131<br>\nK-NN(En Yak\u0131n Kom\u015fu)<br>","4908f5ae":"Grafik okurken kafa kar\u0131\u015ft\u0131rmamas\u0131 i\u00e7in hedef s\u00fctunumuzdaki verileri t\u00fcrk\u00e7ele\u015ftirelim.","66c2849d":"### 4.2.3. BernoulliNB","91352ead":"Kay\u0131p m\u00fc\u015fterilerin kutu grafi\u011fi olu\u015fturularak kay\u0131p olan ve olmayan m\u00fc\u015fteri say\u0131lar\u0131 g\u00f6rselle\u015ftirildi.","5d97bd89":"S\u0131n\u0131fland\u0131r\u0131lan kategorik de\u011fi\u015fkenlere g\u00f6z gezdirildi.","f23632ed":"Veriler kategorik ve say\u0131sal olarak s\u0131n\u0131fland\u0131r\u0131lm\u0131\u015ft\u0131r.\nHedef de\u011fi\u015fkenimiz olan Kay\u0131p, kategorik alanlara dahil edilmeyecektir.","44f96a01":"### 4.2.2. MultinomialNB \n","e3ad6dd5":"Toplam \u00f6deme k\u0131sm\u0131ndaki ayk\u0131r\u0131 veriler silindi.S\u0131ra Abonelik S\u00fcresinde.","82233322":"## 4.2. Karar A\u011fac\u0131\nS\u0131n\u0131flama, \u00f6zellik ve hedefe g\u00f6re karar d\u00fc\u011f\u00fcmleri ve yaprak d\u00fc\u011f\u00fcmlerinden olu\u015fan a\u011fa\u00e7 yap\u0131s\u0131 formunda model olu\u015fturan bir s\u0131n\u0131fland\u0131rma y\u00f6ntemidir","7814a759":"# \u0130\u00c7\u0130NDEK\u0130LER\n>## 1. Veri Madencili\u011fi Uygulama Yerinin Bulunmas\u0131 ve Veri Setinin Temini\n>## 2. Modelleme\n>>### 2.1. Ara\u015ft\u0131rma Hedefini Belirlenmesi (Problem \/ Ara\u015ft\u0131rma Sorusu)\n>>### 2.2. Analizde Kullan\u0131lacak Verisetinin \u0130ncelenmesi Ve Veri \u00d6ni\u015fleme\n>## 3. Test Ve E\u011fitim Veri Setlerinin Haz\u0131rlanmas\u0131\n>## 4. S\u0131n\u0131fland\u0131r\u0131lma Algoritmalar\u0131n\u0131n Uygulanmas\u0131 ve Performans Analizleri\n>>### 4.1. Logistic Regression\n>>### 4.2. Naive Bayes\n>>>#### 4.2.1. GaussianNB\n>>>#### 4.2.2. MultinomialNB \n>>>#### 4.2.3. BernoulliNB\n>## 5.S\u0131n\u0131fland\u0131rma Algoritmalar\u0131n\u0131n Performanslar\u0131n\u0131n K\u0131yaslanmas\u0131\n>## 6.Sonu\u00e7 Raporu","d3af0d27":"Ya\u015fl\u0131 s\u00fctununun verilerini kategorik hale getirelim.","47d1bfc6":"Abonelik s\u00fcresindeki ayk\u0131r\u0131 veriler getirildi.","cff5d25a":"Eksik verimiz olup olmad\u0131\u011f\u0131na bakm\u0131\u015ft\u0131k \u015fimdi ayk\u0131r\u0131 verileri g\u00f6zlemleyelim.","08b25ec9":"# 1. Veri Madencili\u011fi Uygulama Yerinin Bulunmas\u0131 ve Veri Setinin Temini\nBu projede Veri Madencili\u011fi tahminleyici y\u00f6ntemlerden s\u0131n\u0131fland\u0131rma \u00fczerine bir \u00e7al\u0131\u015fma yap\u0131lacakt\u0131r. Uygulamam\u0131z bir telekom\u00fcnikasyon firmas\u0131n\u0131n \u00fczerinde olacak ve analiz i\u00e7in gerekli veri setinin temini b\u00fcy\u00fck \u00e7apl\u0131 verilerin firmalar taraf\u0131ndan yar\u0131\u015fma usul\u00fcnce kullan\u0131c\u0131lara a\u00e7\u0131ld\u0131\u011f\u0131 kaggle.com adl\u0131 siteden olmu\u015ftur.","4365e02f":"Anlaml\u0131l\u0131k d\u00fczeyi 0,73 \u00e7\u0131kt\u0131.","0e6a52e5":"Genel bir g\u00f6sterim olmas\u0131 amac\u0131yla a\u015fa\u011f\u0131da bir test ve e\u011fitim verilerinin ayr\u0131lmas\u0131 i\u015flemlerini g\u00f6sterece\u011fim.Test algoritmalar\u0131n\u0131 uygulamadan \u00f6nce teste g\u00f6re i\u015flemler yapt\u0131ktan sonra bu ad\u0131mlar uygulanacak.","bc954f99":"## 4.1. Logistic Regression\nLojistik regresyon, \u00e7\u0131kt\u0131 de\u011fi\u015fkeninin kesikli de\u011ferler ald\u0131\u011f\u0131 durumlarda ge\u00e7erlidir.<br>\nVerilerimizin i\u00e7inde ikiden \u00e7ok se\u00e7ene\u011fi olan s\u00fctunlar oldu\u011fu i\u00e7in \u00e7oklu lojistik regresyon kullanaca\u011f\u0131z.","03d85235":"Hedef de\u011fi\u015fkenin di\u011fer de\u011fi\u015fkenlerle olan ili\u015fkisi hakk\u0131nda \u00f6n fikir sahibi olmak i\u00e7in kategorik ve say\u0131sal verileri<br> grafikle\u015ftirelim.","3c0ac39e":"Korelasyon sonucu 10 dan d\u00fc\u015f\u00fck olan s\u00fctunlar\u0131 att\u0131k.Korelasyon sonucunda da s\u00f6zle\u015fme s\u00fcresinin ve abonelik s\u00fcresinin m\u00fc\u015fteri kayb\u0131na etkisini g\u00f6r\u00fcyoruz.","7adb1bc9":"Veri setimiz 7043 sat\u0131r, 21 s\u00fctundan olu\u015fmaktad\u0131r.","4f157587":"Toplam \u00f6demenin m\u00fc\u015fteri kayb\u0131 olu\u015fan k\u0131sm\u0131ndayo\u011fun \u015fekilde ayk\u0131r\u0131 veriler g\u00f6r\u00fcyoruz. Asl\u0131nda bu durum bile bize m\u00fc\u015fteri kay\u0131plar\u0131n\u0131n neden olu\u015ftu\u011funu g\u00f6steriyor fakat yinede daha detayl\u0131 analiz yapal\u0131m.Bunun haricinde abonelik s\u00fcresinde de bir miktar ayk\u0131r\u0131 veri g\u00f6r\u00fcn\u00fcyor. \u015eimdi ayk\u0131r\u0131 verilerimi temizleyelim.\u00d6ncelikle veriler labelencoder ile tamamen say\u0131sal hale getirilecek.","51dd2480":"## 2.1. Ara\u015ft\u0131rma Hedefini Belirlenmesi (Problem \/ Ara\u015ft\u0131rma Sorusu)\nYeni m\u00fc\u015fteri elde etme maliyeti mevcut m\u00fc\u015fteriyi elde tutma maliyetinden daha y\u00fcksektir hal b\u00f6yleyken \u015firketler \u00f6nce mevcut m\u00fc\u015fterilerini korumal\u0131d\u0131r. Bunun i\u00e7in de kaybetme tehlikesi olu\u015fan m\u00fc\u015fteriler i\u00e7in \u00f6nlemler almak gereklidir. Burada devreye insan davran\u0131\u015f fakt\u00f6r\u00fc girdi\u011finden nitelikte yeterli m\u00fc\u015fteri verisine sahip iseniz s\u0131n\u0131fland\u0131rma analiziyle bu potansiyele sahip m\u00fc\u015fterileri \u015firket kay\u0131tlar\u0131ndan \u00f6nceden tespit edebilir buna g\u00f6re \u00f6nlemler alabilirsiniz. \nBu ba\u011flamda ger\u00e7ekle\u015ftirece\u011fimiz projemizde,<br>\nAra\u015ft\u0131rma sorumuz,<br>\n\u2022\t M\u00fc\u015fteri kayb\u0131, olu\u015fmadan tespit edilebilir mi?<br>\n\u0130le bu ara\u015ft\u0131rmam\u0131zda hedefledi\u011fimiz,<br>\n\u2022\tSad\u0131k m\u00fc\u015fteri kitlesinin olu\u015fturulmas\u0131.<br>\n\u015eeklinde olmu\u015ftur.<br>\nAnaliz genel olarak \u015fu \u015fekilde i\u015fleyecek,<br>\nTelcom \u015firketinin elinde yeterli say\u0131da veri bulunmaktad\u0131r, m\u00fc\u015fteriler belirli kriterlere g\u00f6re veri taban\u0131na kay\u0131tl\u0131d\u0131r buradan \u00e7ekilen veri setiyle m\u00fc\u015fteri kayb\u0131 analizi yap\u0131lacakt\u0131r.<br>\nM\u00fc\u015fteri Kayb\u0131 analizi bu tip \u015firketler i\u00e7in \u00e7ok \u00f6nemlidir m\u00fc\u015fterileri ba\u015fka firmalara kaybetmemelidirler. Bu ba\u011flamda yap\u0131lacak analiz genel olarak \u015fu \u015fekilde i\u015fleyecek ay sonu m\u00fc\u015fterilere ait nitelikler ve kay\u0131p olu\u015fup olu\u015fmad\u0131\u011f\u0131 durumu bilgisi \u00fczerinden e\u011fitim verisi olu\u015fturulup test edilecek ve gelecek ay m\u00fc\u015fterilerin nitelik durumlar\u0131na g\u00f6re kay\u0131p olma durumlar\u0131 hemen ayba\u015f\u0131ndan bu e\u011fitilen modelle tespit edilecektir. Tespit edilen potansiyel kay\u0131p m\u00fc\u015fterilerin elden ka\u00e7\u0131r\u0131lmamas\u0131 i\u00e7in \u015firket politikalar\u0131 geli\u015ftirilecektir. B\u00f6ylece m\u00fc\u015fteri kayb\u0131 azalt\u0131lacak bunun yan\u0131nda da rakip firman\u0131n m\u00fc\u015fteri kazanmas\u0131 \u00f6nlenmi\u015f olacakt\u0131r.","ac8b10ca":"# 6.Sonu\u00e7 Raporu\nM\u00fc\u015fteri kayb\u0131n\u0131 \u00e7e\u015fitli analizler kullan\u0131larak \u00f6nceden tahim etmek ve bu sayede i\u015fletmeyi m\u00fc\u015fteri kayb\u0131 olu\u015fmadan uyarmak m\u00fcmk\u00fcnd\u00fcr.<br>\nAnaliz etti\u011fimiz veri taban\u0131 i\u00e7in se\u00e7ilen en uygun algoritma Logistic Regresyondur.<br>\nLojistik regresyon analizimizin sonucunda %81,3 ba\u015far\u0131l\u0131 tahmin skoru elde ettik.<br>\nM\u00fc\u015fteri kayb\u0131na sebep olan temel fakt\u00f6r Toplam \u00f6demelerin y\u00fcksekli\u011fidir.<br>\nToplam \u00f6demeleri abonelik s\u00fcresi ve ayl\u0131k \u00f6demeler takip ediyor.\u00c7evrimi\u00e7i g\u00fcvenlik ve teknik destek hizmeti almayan m\u00fc\u015fterilerinde kay\u0131p oran\u0131n\u0131n daha y\u00fcksek oldu\u011funu s\u00f6yleyebiliriz.\n","b0d22e77":"## 2.2. Analizde Kullan\u0131lacak Verisetinin \u0130ncelenmesi Ve Veri \u00d6ni\u015fleme\nAnazlide kullan\u0131lmak \u00fczere 21 \u00f6znitelikten olu\u015fan bir m\u00fc\u015fteri veri seti temin edilmi\u015ftir, bu \u00f6zniteliklerden hedef de\u011fi\u015fken \u201cM\u00fc\u015fteri Kayb\u0131(Churn)\u201d \u015feklinde tan\u0131mlanm\u0131\u015ft\u0131r.","046f4568":"Analizimiz i\u00e7in se\u00e7ilen algoritma Logistic Regression olmu\u015ftur.","31fb464f":"K de\u011ferini en iyi \u015fekilde atamak i\u00e7in kullan\u0131lan y\u00f6ntem.","1709f7c4":"G\u00f6r\u00fcld\u00fc\u011f\u00fc gibi \"Toplam \u00d6deme\" k\u0131sm\u0131 float olmas\u0131 gerekirken object olarak belirlenmi\u015f.Onu d\u00fczeltelim.","ae3baf77":"# 3. Test ve E\u011fitim Verilerinin Haz\u0131rlanmas\u0131\n\nBu a\u015famada hedef de\u011fi\u015fkeni tan\u0131mlanan ve algoritma \u00f6ncesi son halini alan verinin test ve e\u011fitim olarak ikiye ayr\u0131lma i\u015flemidir. Bu i\u015flem i\u00e7in uygun olan ay\u0131rma e\u015fi\u011fi 85-15 olarak uygun g\u00f6r\u00fclm\u00fc\u015ft\u00fcr.","3604fa1d":"### 4.2.1. GaussianNB","c566e5dd":"G\u00f6r\u00fcld\u00fc\u011f\u00fc \u00fczere integer ve float tipi verileri i\u00e7eren s\u00fctunlarda istatistiksel veriler getirildi.\nCount de\u011ferleri e\u015fit oldu\u011funa g\u00f6re ayk\u0131r\u0131 veri bulunmamaktad\u0131r.","343e2c88":"multinomial lojistik resresyon, solver olarak sadece newton-cg ve lbfgs yi desteklemektedir.Bu durumda penalty=l2 mecburi se\u00e7enektir.","847c9443":"# 2. Modelleme\n","957407c6":"Lojistik regresyona ba\u015flamadan \u00f6nce k\u00fc\u00e7\u00fck bir korelasyon analizi yaparak i\u015fimize yaramayan s\u00fctunlar\u0131 atal\u0131m.","07ec4357":"## 4.3. KNN(En Yak\u0131n Kom\u015fu)\nParametre olarak sonradan belirlenen bir g\u00f6zlem de\u011feri olan k de\u011feri uzakl\u0131klar\u0131n\u0131n ve en k\u00fc\u00e7\u00fck uzakl\u0131\u011fa sahip k say\u0131da g\u00f6zlemin se\u00e7ilmesi esas\u0131na dayanmaktad\u0131r. ","dc6ce433":"Kay\u0131p veri bulunmamaktad\u0131r.","0e91c0b6":"\u015euana kadar i\u015fledi\u011fimiz verileri kontrol edelim.","b8dfb1b0":"## 4.2. Naive Bayes\nAlgoritman\u0131n \u00e7al\u0131\u015fma \u015fekli bir eleman i\u00e7in her durumun olas\u0131l\u0131\u011f\u0131n\u0131 hesaplar ve olas\u0131l\u0131k de\u011feri en y\u00fcksek olana g\u00f6re s\u0131n\u0131fland\u0131r\u0131r.<br>\nNaive Bayes, 3 gruba ayr\u0131l\u0131r;<br>\nGaussianNB<br>\nMultinomialNB<br>\nBernoulliNB<br>","55906546":"# 5.S\u0131n\u0131fland\u0131rma Algoritmalar\u0131n\u0131n Performanslar\u0131n\u0131n K\u0131yaslanmas\u0131\nS\u0131n\u0131fland\u0131rma Modelinin Performans\u0131 Kar\u0131\u015f\u0131kl\u0131k Matrisi (Confusion Matrix) \u00fczerinden detayl\u0131 olarak \u00f6l\u00e7\u00fclebilir.<br>\nAncak biz sadece auc-roc grafi\u011fi kullanaca\u011f\u0131z.\n","1ac76cf9":"Ya\u015fl\u0131 s\u00fctununda yapt\u0131\u011f\u0131m\u0131z de\u011fi\u015fiklikten \u00f6t\u00fcr\u00fc s\u00fctunun data tipi de de\u011fi\u015fmeli.","fd93a2a8":"Ayk\u0131r\u0131 veriler \u00e7a\u011f\u0131r\u0131ld\u0131.Grafikte g\u00f6zlemledi\u011fimiz yo\u011funluktaki ayk\u0131r\u0131 veri say\u0131s\u0131 109'mu\u015f.","8543a574":"CostumerID(M\u00fc\u015fteri ID) k\u0131sm\u0131 gereksiz oldu\u011fu i\u00e7in veri setimizden \u00e7\u0131karal\u0131m.","58deca7a":"Kategorik de\u011fi\u015fkenler kutu grafi\u011fi, say\u0131sal de\u011fi\u015fkenler \u00e7izgi grafi\u011fi olarak g\u00f6rselle\u015ftirildi.","8db2d629":"Ayk\u0131r\u0131 verilerinde tamamen temizlenmesi ile veri \u00f6n i\u015fleme tamamland\u0131. Fakat uygulayaca\u011f\u0131m\u0131z testlere g\u00f6re farkl\u0131 i\u015flemelerde yapaca\u011f\u0131z."}}