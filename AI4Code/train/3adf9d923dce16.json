{"cell_type":{"fca95432":"code","5d55458e":"code","e2e646b7":"code","ee5c30d7":"code","6f2f3b76":"code","693f4d85":"code","6fdb1a07":"code","578c9d12":"code","1cc48e55":"code","91f37b9d":"code","24746942":"markdown","85094060":"markdown"},"source":{"fca95432":"!pip install mlflow","5d55458e":"import mlflow\nfrom pathlib import Path\nimport os\nfrom mlflow.utils.mlflow_tags import MLFLOW_RUN_NAME\nmlflow.__version__","e2e646b7":"experiment_name = 'first'\nexperiment_run_id = '001_lgb'\n\nmlflow.set_experiment(experiment_name)\n","ee5c30d7":"mlflow.set_tag(MLFLOW_RUN_NAME, experiment_run_id)\nmlflow.log_metric('cv', 0.9)\nmlflow.log_param('lgb_params', {'objective': 'regression',\n                                'num_leaves': 128})","6f2f3b76":"ls mlruns\/1","693f4d85":"for i in Path('.\/mlruns\/1\/').glob('*'):\n    if str(i).split('\/')[-1] != 'meta.yaml':\n        run_id = str(i).split('\/')[-1]\nprint(run_id)","6fdb1a07":"mlflow.get_run(run_id)","578c9d12":"# Set your own project id here\nPROJECT_ID = 'mlflow-sample'\n# from google.cloud import bigquery\n# bigquery_client = bigquery.Client(project=PROJECT_ID)\nfrom google.cloud import storage\nstorage_client = storage.Client(project=PROJECT_ID)","1cc48e55":"# \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u308b\nfor f in Path(f'.\/mlruns\/1\/{run_id}').glob('**\/*'):\n    if f.is_file():\n        print(f)","91f37b9d":"EXPERIMENT_ID = 2\nBUCKET_NAME = 'mlflow-sample-curry'\nbucket = storage_client.get_bucket(BUCKET_NAME)\nfor f in Path(f'.\/mlruns\/1\/{run_id}').glob('**\/*'):\n    if f.is_file():\n        filename = str(f)[9:]\n        print(filename)\n        destination_blob_name = f'mlruns\/{EXPERIMENT_ID}\/{filename}'\n        blob = bucket.blob(destination_blob_name)\n        blob.upload_from_filename(str(f))","24746942":"* mlflow\u3067\u3067\u304d\u305f\u30d5\u30a9\u30eb\u30c0\u3092GSC\u306b\u9001\u308a\u307e\u3059\n* \u307e\u3060\u9014\u4e2d\u3067\u3059","85094060":"# mlflow\u306b\u9001\u308b"}}