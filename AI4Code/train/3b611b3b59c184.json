{"cell_type":{"618cc2ca":"code","22cb8320":"code","5b0adac6":"code","2124d32f":"code","2a56ee95":"code","c0e6ba83":"code","625343fd":"code","046d4a8c":"code","fc04f6e2":"code","45bc687f":"code","19f47530":"code","fb37e26b":"code","26da052d":"code","b44792e6":"code","e7398f0a":"code","b65d7fec":"code","1753a5cd":"code","8283f8c1":"code","f253d112":"code","bac7a95b":"code","4b8fdc97":"code","ee3a6226":"code","1b6dda68":"code","a5c33acd":"code","faeb574c":"code","53145129":"code","42d5c0ca":"code","b0e1d124":"code","52682f9d":"code","ad8c0831":"code","cd0cc101":"code","bb5136ac":"code","edfefe20":"code","c37f08b0":"code","e393556d":"code","d3a43d66":"code","5702efaf":"code","78153540":"code","8157d3fa":"code","fa91b456":"code","a4770abb":"code","80567da7":"code","5dbb69c3":"code","25789393":"code","bd4f13e0":"markdown","41eb170f":"markdown"},"source":{"618cc2ca":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np \nfrom sklearn import datasets, linear_model\nfrom sklearn.metrics import mean_squared_error, r2_score\nfrom sklearn.model_selection import train_test_split\nimport seaborn as sns\nimport statsmodels.formula.api as smf\nimport sklearn\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import metrics\nfrom sklearn.metrics import accuracy_score\nfrom sklearn import preprocessing\nfrom sklearn.metrics import precision_recall_fscore_support as score\n\nfrom sklearn.metrics import explained_variance_score\nfrom sklearn.metrics import mean_absolute_error\nfrom sklearn.metrics import r2_score\n\nfrom time import time\n\nfrom sklearn.neighbors import KNeighborsRegressor\nfrom sklearn.linear_model import LinearRegression, RANSACRegressor\nfrom sklearn.gaussian_process import GaussianProcessRegressor\nfrom sklearn.svm import SVR\nfrom sklearn.svm import LinearSVR\nfrom sklearn.linear_model import Lasso, Ridge\n\n\nfrom sklearn.tree import DecisionTreeRegressor\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.svm import SVR\n\n\nimport matplotlib.pyplot as plt\nfrom pylab import rcParams\nimport seaborn as sb\n","22cb8320":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","5b0adac6":"df1 = pd.read_csv(\"..\/input\/human-resources-data-set\/core_dataset.csv\")\n","2124d32f":"df1.head()","2a56ee95":"df1.info()","c0e6ba83":"df1.columns","625343fd":"df1.rename(columns={'Pay Rate': 'Pay'}, inplace=True)","046d4a8c":"df1['State'].value_counts()","fc04f6e2":"df1.groupby(['Sex']).mean().Age.plot(kind='bar')","45bc687f":"df1['Sex'].replace({'male': 'Male'}, inplace=True)","19f47530":"df1.groupby(['Sex']).mean().Age.plot(kind='bar')","fb37e26b":"df1.groupby(['Sex']).mean().Pay.plot(kind='bar')","26da052d":"df1.groupby(['Sex', 'Performance Score']).size().unstack().plot(kind='bar', stacked=True, figsize=(10,10))","b44792e6":"df1['Paymean'] = df1['Pay'].mean()\n\n\nplt.figure(figsize=(15,15))\nsns.countplot(x='Sex', data=df1, hue = 'Performance Score', palette=\"Set1\")\nplt.title('Age vs. Sex')","e7398f0a":"plt.figure(figsize=(12,4))\nsns.heatmap(df1.isnull(),cbar=False,cmap='viridis',yticklabels=False)\nplt.title('Missing value in the dataset')","b65d7fec":"df1['Performance Score'].value_counts()","1753a5cd":"sns.pairplot(df1)","8283f8c1":"df1.corr()","f253d112":"df1.drop(columns=['Date of Termination'], inplace=True)","bac7a95b":"df1.columns","4b8fdc97":"df1.drop(columns=['Employee Name', 'Employee Number', 'Reason For Term' , 'Hispanic\/Latino', 'Zip', 'DOB', 'Date of Hire', 'Manager Name', 'Position', 'State', 'Paymean'], inplace=True)","ee3a6226":"df1.sample(10)","1b6dda68":"df1.columns","a5c33acd":"df1.dropna(inplace=True)","faeb574c":"dfcorr = pd.get_dummies(df1)","53145129":"dfcorr.info()","42d5c0ca":"\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)","b0e1d124":"dfcorr.corr()","52682f9d":"from sklearn import tree\nfrom sklearn import svm\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.tree import DecisionTreeClassifier","ad8c0831":"dfcorr.columns","cd0cc101":"y = df1['Pay']\nX = dfcorr.drop(['Pay'], axis=1)","bb5136ac":"dfcorr","edfefe20":">>> from sklearn.ensemble import RandomForestClassifier\n>>> from sklearn.datasets import make_classification","c37f08b0":"X, y = make_classification(n_samples=1000, n_features=4,\n...                            n_informative=2, n_redundant=0,\n...                            random_state=0, shuffle=False)","e393556d":"dfcorr.columns","d3a43d66":"clf = RandomForestClassifier(n_estimators=100, max_depth=2,\n...                              random_state=0)","5702efaf":"df1['Pay'].unique()","78153540":"feature_cols = ['Age', 'Pay', 'Sex_Female', 'Sex_Male', 'MaritalDesc_Divorced',\n       'MaritalDesc_Married', 'MaritalDesc_Separated', 'MaritalDesc_Single',\n       'MaritalDesc_widowed', \n       'Employment Status_Active', 'Employment Status_Future Start',\n       'Employment Status_Leave of Absence',\n       'Employment Status_Terminated for Cause',\n       'Employment Status_Voluntarily Terminated', 'Department_Admin Offices',\n       'Department_Executive Office', 'Department_IT\/IS',\n       'Department_Production       ', 'Department_Sales',\n       'Department_Software Engineering',\n       'Department_Software Engineering     ', 'Employee Source_Billboard',\n       'Employee Source_Careerbuilder',\n       'Employee Source_Company Intranet - Partner',\n       'Employee Source_Diversity Job Fair',\n       'Employee Source_Employee Referral', 'Employee Source_Glassdoor',\n       'Employee Source_Information Session',\n       'Employee Source_Internet Search', 'Employee Source_MBTA ads',\n       'Employee Source_Monster.com', 'Employee Source_Newspager\/Magazine',\n       'Employee Source_On-campus Recruiting',\n       'Employee Source_On-line Web application', 'Employee Source_Other',\n       'Employee Source_Pay Per Click',\n       'Employee Source_Pay Per Click - Google',\n       'Employee Source_Professional Society',\n       'Employee Source_Search Engine - Google Bing Yahoo',\n       'Employee Source_Social Networks - Facebook Twitter etc',\n       'Employee Source_Vendor Referral', 'Employee Source_Website Banner Ads',\n       'Employee Source_Word of Mouth', 'Performance Score_90-day meets',\n       'Performance Score_Exceptional',\n       'Performance Score_N\/A- too early to review',\n       'Performance Score_Needs Improvement', 'Performance Score_PIP']\nX = dfcorr[feature_cols]\ny = dfcorr['Performance Score_Exceeds']\nX_train, X_test, y_train, y_test=train_test_split(X, y, \n                                                  test_size = 0.25,\n                                                  random_state = 123)","8157d3fa":"clf = RandomForestClassifier(n_estimators=500,criterion = 'entropy', max_depth=5,random_state=123)\nclf.fit(X_train,y_train)","fa91b456":"#Classify the test subset using .predict()\ny_pred = clf.predict(X_test)","a4770abb":"\n#Calculate the accuracy using metrics.accuracy_score(y_test,y_pred)\nprint(\"Accuracy:\", metrics.accuracy_score(y_test,y_pred))","80567da7":"# y_test is a dataframe and to use the function confusion_matrix it is necessary to convert y_test to a list\nfrom sklearn.metrics import confusion_matrix\ny_true = y_test.tolist()\nmat = confusion_matrix(y_true,y_pred)\nsns.heatmap(mat.T, square =True, annot = True, fmt = 'd', cbar= False)\nplt.xlabel('True data')\nplt.ylabel('predicted values')","5dbb69c3":"feature_importances = pd.Series(clf.feature_importances_, index = X.columns)\nfeature_importances = feature_importances.sort_values()\nfeature_importances.plot(kind='barh', figsize = (12,12))","25789393":"from sklearn.externals.six import StringIO  \nfrom IPython.display import Image  \nfrom sklearn.tree import export_graphviz\nimport pydotplus\ndot_data = StringIO()\nestimator = clf.estimators_[90]\nexport_graphviz(estimator, out_file=dot_data,  \n                filled=True, rounded=True,\n                special_characters=True, feature_names=X_train.columns,class_names = ['no', 'yes'])\ngraph = pydotplus.graph_from_dot_data(dot_data.getvalue())  \nImage(graph.create_png())","bd4f13e0":"# Import Files","41eb170f":"# Import Libraries "}}