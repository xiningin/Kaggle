{"cell_type":{"5f0a7138":"code","16c57d30":"code","ce7a2518":"code","1ad24205":"code","b7f59448":"code","77465d8a":"code","fe8d6ae7":"code","b2110379":"code","4825a815":"code","8f62dc75":"code","d57ade6e":"code","1f4ffca4":"code","9cea80ba":"code","b9840bc5":"code","3bc57707":"code","731336a5":"code","49ea66af":"markdown","937d06cf":"markdown","e01fb429":"markdown","df4abba5":"markdown","e5ce9ecc":"markdown","1ff6a44e":"markdown","f2d4f9f4":"markdown","7acc9eb0":"markdown"},"source":{"5f0a7138":"import os\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","16c57d30":"paths = [f for f in os.listdir('..\/input') if f.endswith(\".csv\")]\ndf = pd.read_csv('..\/input\/'+paths[0],encoding='ISO-8859-1',low_memory=False)","ce7a2518":"cols = ['eventid','approxdate','addnotes','motive' ,'guncertain3','property','propextent','propextent_txt','propvalue','propcomment','divert','targsubtype1_txt',\n        'crit1','crit2','crit3','doubtterr',\n        'targsubtype1','target1','guncertain1','weapsubtype1','weapsubtype1_txt','kidhijcountry','ransomamtus','ransompaidus','addnotes','dbsource','scite1','scite2','scite3','INT_LOG','INT_IDEO','INT_MISC','INT_ANY','related']\ndf.drop(cols,axis=1,inplace=True)\ndf.dropna(axis=1,how='all',thresh=160000,inplace=True)\ndf.weaptype1_txt.replace(['Vehicle (not to include vehicle-borne explosives, i.e., car or truck bombs)'],['Vehicle'],inplace=True)","1ad24205":"pd.set_option('display.max_columns', 50)\ndf.head()","b7f59448":"columns = ['nkill','nwound']\ndf[columns].describe()","77465d8a":"plt.subplots(figsize=(16,9))\nsns.countplot('iyear',data=df)\nplt.xticks(rotation=90)\nplt.title(\"Number of terrorist attacks by year, worldwide\")\nplt.xlabel(\"Year\")\nplt.ylabel(\"Number of attacks\")\nplt.show()","fe8d6ae7":"plt.subplots(figsize=(12,6))\nsns.countplot(x='region_txt',data=df,order=df['region_txt'].value_counts().index)\nplt.xticks(rotation=20,ha=\"right\",fontsize=9)\n\nplt.title(\"Number of terrorist attacks by region\")\nplt.xlabel(\"\")\nplt.ylabel(\"Number of attacks\")\nplt.tight_layout()\nplt.show()\n","b2110379":"by_region = pd.crosstab(df.iyear,df.region_txt)\nby_region.plot()\nfig = plt.gcf()\nfig.set_size_inches(16,8)\nplt.title(\"Attacks by region, yearly\")\nplt.show()","4825a815":"n = 49\nplt.subplots(figsize=(22,15))\nsns.countplot(y='country_txt',data=df,order=df['country_txt'].value_counts().iloc[:n].index)\nplt.xticks(rotation=0,ha=\"right\",fontsize=9)\n\nplt.title(\"Top-{0} countries by number of terrorist attacks, desc\".format(n))\nplt.xlabel(\"Number of attacks\")\nplt.ylabel(\"\")\nplt.show()\n","8f62dc75":"by_region2 = pd.crosstab(df.region_txt,df.attacktype1_txt,margins=True)\nby_region2 = by_region2.iloc[:-1,:]\nby_region2.sort_values('All',ascending=True,inplace=True)\nby_region2.iloc[:,:-1].plot.barh(stacked=True,width=1,color=sns.color_palette('tab20',9))\n\nplt.xlabel(\"number of attacks\")\nplt.ylabel(\"\")\nplt.title(\"Terrorist attacks by type and region\")\nfig=plt.gcf()\nfig.set_size_inches(12,8)\nplt.show()\n","d57ade6e":"plt.figure(figsize=(7,5))\nplt.title(\"Suicidal attacks\")\nsns.violinplot(x = df.suicide, y = df.iyear,data=df)\nplt.show()\n\nplt.figure(figsize=(7,5))\nplt.title(\"Attack outcome\")\nsns.violinplot(x = df.success, y = df.iyear,data=df)\n\nplt.show()\n\n\nplt.figure(figsize=(7,5))\nplt.title(\"Individual attacks\")\nsns.violinplot(x = df.individual, y = df.iyear,data=df)\n\n\nplt.subplots_adjust(top=0.92, bottom=0.08, left=0.10, right=0.95, hspace=0.25,\n                    wspace=0.35)\nplt.show()","1f4ffca4":"a = sns.FacetGrid( df, hue = 'success', aspect=3)\na.map(sns.kdeplot, 'iyear', shade= True)\na.set_xlabels(\"Year\")\na.set_ylabels(\"Success rate\")\na.set(xlim=(1969 , df['iyear'].max()))\na.add_legend(title=\"success of an attack\",);\n","9cea80ba":"df.head(3)","b9840bc5":"plt.figure(figsize=(20,12))\nsns.boxplot(x = 'weaptype1_txt', y = 'iyear', hue = 'success', data = df)\nplt.title('Outcome by weapon type')\nplt.xticks(rotation=15)\nplt.xlabel(\"Weapon type\")\nplt.ylabel(\"Y\")\nplt.show()","3bc57707":"plt.figure(figsize=(20,12))\nsns.boxplot(x = 'attacktype1_txt', y = 'iyear', hue = 'success', data = df)\nplt.title('Outcome by attack type')\nplt.xticks(rotation=15)\nplt.xlabel(\"Type of attack\")\nplt.ylabel(\"Y\")\nplt.show()","731336a5":"temp = df.attacktype1_txt.value_counts()\ns = sum(temp[-i] for i in range(1,4))\ntemp = temp[:-3]\ntemp = temp.append(pd.Series(s,index=['Other']))\nplt.pie(temp.values, labels = temp.keys(),autopct='%1.1f%%', shadow=True, startangle=40)\nplt.axis('equal')\nplt.title('Terrorist attacks, by type')\nplt.show()\n\ntemp = df.weaptype1_txt.value_counts()\ns = sum(temp[-i] for i in range(1,9))\ntemp = temp[:-8]\ntemp = temp.append(pd.Series(s,index=['Melee and other']))\nplt.pie(temp.values,labels=temp.keys(),autopct='%1.1f%%',startangle=40)\nplt.axis('equal')\nplt.title('Terrorist weapons, by type')\nplt.show()\n\n","49ea66af":"### Pie-charts","937d06cf":"### Data preprocessing (sort of)","e01fb429":"### Kernel density estimator","df4abba5":"### Box-plots","e5ce9ecc":"### Bar charts","1ff6a44e":"### Graphs","f2d4f9f4":"### Diagrams","7acc9eb0":"### Violin plots"}}