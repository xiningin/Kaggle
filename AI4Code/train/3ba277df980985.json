{"cell_type":{"bfb30d66":"code","223fa7fc":"code","0e757f27":"code","122ea566":"code","2e9af4c9":"code","808969de":"code","1bdc994d":"code","4c3c216f":"code","73dfbb09":"code","d966f177":"code","69208d4b":"code","8ab23dd1":"code","37e0a0d2":"code","96e2824a":"code","2556b138":"code","54ab03c8":"code","b5bc6a80":"code","5b146fd5":"code","22157573":"code","15e21d24":"code","eb9ad279":"code","81ceefdb":"markdown","5421c9cd":"markdown","982976a4":"markdown","2fb39d8a":"markdown","784d3bf1":"markdown","26106acc":"markdown","33c11f72":"markdown","0f05f145":"markdown","d54dff55":"markdown","c4765c09":"markdown","f1392ac9":"markdown","4036fc1c":"markdown","d7b367ae":"markdown","5a3a6264":"markdown","2646f351":"markdown","12d6cc1d":"markdown","83360c40":"markdown","fbf842f9":"markdown","b0c6bb4d":"markdown","e0f6cf62":"markdown"},"source":{"bfb30d66":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\nimport statsmodels.api as sm\nimport scipy.stats as stats\nfrom sklearn.preprocessing import LabelEncoder\nimport copy\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","223fa7fc":"sns.set() #setting the default seaborn style for our plots","0e757f27":"# Read the Dataset\ninsurance_df = pd.read_csv(\"\/kaggle\/input\/insurance\/insurance.csv\")","122ea566":"#Display the first five dataset\n\ninsurance_df.head(10)","2e9af4c9":"#Info about the data\n\ninsurance_df.info()","808969de":"#Check for the null values \n\ninsurance_df.isna().apply(pd.value_counts) ","1bdc994d":"#Five point summary for the dataset\n\ninsurance_df.describe().T","4c3c216f":"#Plots to see the distribution of the continuous features individually\n\nplt.figure(figsize= (20,15))\nplt.subplot(3,3,1)\nplt.hist(insurance_df.bmi, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('bmi')\n\nplt.subplot(3,3,2)\nplt.hist(insurance_df.age, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('age')\n\nplt.subplot(3,3,3)\nplt.hist(insurance_df.charges, color='lightblue', edgecolor = 'black', alpha = 0.7)\nplt.xlabel('charges')\n\nplt.show()","73dfbb09":"Skewness = pd.DataFrame({'Skewness' : [stats.skew(insurance_df.bmi),stats.skew(insurance_df.age),stats.skew(insurance_df.charges)]},\n                        index=['bmi','age','charges'])  # Measure the skeweness of the required columns\nSkewness","d966f177":"#Checking for the outliers\nplt.figure(figsize= (20,15))\nplt.subplot(3,1,1)\nsns.boxplot(x= insurance_df.bmi, color='lightblue')\n\nplt.subplot(3,1,2)\nsns.boxplot(x= insurance_df.age, color='lightblue')\n\nplt.subplot(3,1,3)\nsns.boxplot(x= insurance_df.charges, color='lightblue')\n\nplt.show()","69208d4b":"plt.figure(figsize=(20,25))\n\n\nx = insurance_df.smoker.value_counts().index    #Values for x-axis\ny = [insurance_df['smoker'].value_counts()[i] for i in x]   # Count of each class on y-axis\n\nplt.subplot(4,2,1)\nplt.bar(x,y, align='center',color = 'red',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Smoker?')\nplt.ylabel('Count ')\nplt.title('Smoker distribution')\n\nx1 = insurance_df.sex.value_counts().index    #Values for x-axis\ny1 = [insurance_df['sex'].value_counts()[j] for j in x1]   # Count of each class on y-axis\n\nplt.subplot(4,2,2)\nplt.bar(x1,y1, align='center',color = 'red',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Gender')\nplt.ylabel('Count')\nplt.title('Gender distribution')\n\nx2 = insurance_df.region.value_counts().index    #Values for x-axis\ny2 = [insurance_df['region'].value_counts()[k] for k in x2]   # Count of each class on y-axis\n\nplt.subplot(4,2,3)\nplt.bar(x2,y2, align='center',color = 'red',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('Region')\nplt.ylabel('Count ')\nplt.title(\"Regions' distribution\")\n\nx3 = insurance_df.children.value_counts().index    #Values for x-axis\ny3 = [insurance_df['children'].value_counts()[l] for l in x3]   # Count of each class on y-axis\n\nplt.subplot(4,2,4)\nplt.bar(x3,y3, align='center',color = 'red',edgecolor = 'black',alpha = 0.7)  #plot a bar chart\nplt.xlabel('No. of children')\nplt.ylabel('Count ')\nplt.title(\"Children distribution\")\n\nplt.show()\n","8ab23dd1":"#Label encoding the variables before doing a pairplot because pairplot ignores strings\ninsurance_df_encoded = copy.deepcopy(insurance_df)\ninsurance_df_encoded.loc[:,['sex', 'smoker', 'region']] = insurance_df_encoded.loc[:,['sex', 'smoker', 'region']].apply(LabelEncoder().fit_transform) \n\nsns.pairplot(insurance_df_encoded)  #pairplot\nplt.show()","37e0a0d2":"insurance_df.smoker.value_counts()","96e2824a":"#Scatter plot to look for visual evidence of dependency between attributes smoker and charges accross different ages\nplt.figure(figsize=(8,6))\nsns.scatterplot(insurance_df.age, insurance_df.charges,hue=insurance_df.smoker,palette= ['red','green'] ,alpha=0.6)\nplt.show()","2556b138":"# T-test to check dependency of smoking on charges\nHo = \"Charges of smoker and non-smoker are same\"   # Stating the Null Hypothesis\nHa = \"Charges of smoker and non-smoker are not the same\"   # Stating the Alternate Hypothesis\n\nx = np.array(insurance_df[insurance_df.smoker == 'yes'].charges)  # Selecting charges corresponding to smokers as an array\ny = np.array(insurance_df[insurance_df.smoker == 'no'].charges) # Selecting charges corresponding to non-smokers as an array\n\nt, p_value  = stats.ttest_ind(x,y, axis = 0)  #Performing an Independent t-test\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value}) > 0.05')","54ab03c8":"insurance_df.sex.value_counts()   #Checking the distribution of males and females","b5bc6a80":"plt.figure(figsize=(8,6))\nsns.scatterplot(insurance_df.age, insurance_df.charges,hue=insurance_df.sex,palette= ['pink','lightblue'] )\nplt.show()","5b146fd5":"# T-test to check dependency of bmi on gender\nHo = \"Gender has no effect on bmi\"   # Stating the Null Hypothesis\nHa = \"Gender has an effect on bmi\"   # Stating the Alternate Hypothesis\n\nx = np.array(insurance_df[insurance_df.sex == 'male'].bmi)  # Selecting bmi values corresponding to males as an array\ny = np.array(insurance_df[insurance_df.sex == 'female'].bmi) # Selecting bmi values corresponding to females as an array\n\nt, p_value  = stats.ttest_ind(x,y, axis = 0)  #Performing an Independent t-test\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value.round()}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value.round(3)}) > 0.05')","22157573":"# Chi_square test to check if smoking habits are different for different genders\nHo = \"Gender has no effect on smoking habits\"   # Stating the Null Hypothesis\nHa = \"Gender has an effect on smoking habits\"   # Stating the Alternate Hypothesis\n\ncrosstab = pd.crosstab(insurance_df['sex'],insurance_df['smoker'])  # Contingency table of sex and smoker attributes\n\nchi, p_value, dof, expected =  stats.chi2_contingency(crosstab)\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value.round(3)}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value.round(3)}) > 0.05')\ncrosstab","15e21d24":"# Chi_square test to check if smoking habits are different for people of different regions\nHo = \"Region has no effect on smoking habits\"   # Stating the Null Hypothesis\nHa = \"Region has an effect on smoking habits\"   # Stating the Alternate Hypothesis\n\ncrosstab = pd.crosstab(insurance_df['smoker'], insurance_df['region'])  # Contingency table of sex and smoker attributes\n\nchi, p_value, dof, expected =  stats.chi2_contingency(crosstab)\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value.round(3)}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value.round(3)}) > 0.05')\ncrosstab","eb9ad279":"# Test to see if the distributions of bmi values for females having different number of children, are significantly different\n\nHo = \"No. of children has no effect on bmi\"   # Stating the Null Hypothesis\nHa = \"No. of children has an effect on bmi\"   # Stating the Alternate Hypothesis\n\n\nfemale_df = copy.deepcopy(insurance_df[insurance_df['sex'] == 'female'])\n\nzero = female_df[female_df.children == 0]['bmi']\none = female_df[female_df.children == 1]['bmi']\ntwo = female_df[female_df.children == 2]['bmi']\n\n\nf_stat, p_value = stats.f_oneway(zero,one,two)\n\n\nif p_value < 0.05:  # Setting our significance level at 5%\n    print(f'{Ha} as the p_value ({p_value.round(3)}) < 0.05')\nelse:\n    print(f'{Ho} as the p_value ({p_value.round(3)}) > 0.05')","81ceefdb":" **Visually the difference between charges of smokers and charges of non-smokers is apparent**","5421c9cd":"- bmi has a few extreme values\n- charges as it is highly skewed, there are quiet a lot of extreme values","982976a4":"** Proportion of smokers in males is significantly different from that of the females**","2fb39d8a":"The data has 1338 instances with 7 attributes. 2 integer type, 2 float type and 3 object type(Strings in the column)","784d3bf1":"**No null values in the dataset**","26106acc":"- There are a lot more non-smokers than there are smokers in the data\n- Instances are distributed evenly accross all regions\n- Gender is also distributed evenly\n- Most instances have less than 2 children and very few have 4 or 5 children\nBi-variate distribution of every possible attribute pair","33c11f72":"## Does bmi of males differ significantly from that of females?","0f05f145":"## Is the distribution of bmi across women with no children, one child and two children, the same ?","d54dff55":"- Visually, there is no apparent relation between gender and charges","c4765c09":"- Skew of bmi is very less as seen in the previous step\n- age is uniformly distributed and there's hardly any skew\n- charges are highly skewed","f1392ac9":"##### * Smoking habbits of people of different regions are similar[](http:\/\/)","4036fc1c":"**Smokers seem to claim significantly more money than non-smokers**","d7b367ae":"- bmi looks quiet normally distributed\n- Age seems be be distributed quiet uniformly\u00b6\n- As seen in the previous step, charges are highly skewed","5a3a6264":"#####  bmi of both the genders are identical","2646f351":"**Basic EDA**\n\n1.Find the shape of the data,data type of individual columns\n\n2.Check the presence of missing values\n\n3.Descriptive stats of numerical columns\n\n4.Find the distribution of numerical columns and the asssociated skeweness and presence of outliers\n\n5.Distribution of categorical columns","12d6cc1d":"- The only obvious correlation of 'charges' is with 'smoker'\n- Looks like smokers claimed more money than non-smokers\n- There's an interesting pattern between 'age' and 'charges. Could be because for the same ailment, older people are charged more than the younger ones","83360c40":"##### *BMI is not changed by the number of children a women has","fbf842f9":"## Is the proportion of smokers significantly different in different genders?","b0c6bb4d":"## Do charges of people who smoke differ significantly from the people who don't?","e0f6cf62":"- Data looks legit as all the statistics seem reasonable\n- Looking at the age column, data looks representative of the true age distribution of the adult population\n- Very few people have more than 2 children. 75% of the people have 2 or less children\u00b6\n- The claimed amount is higly skewed as most people would require basic medi-care and only few suffer from diseases which cost more to get rid of"}}