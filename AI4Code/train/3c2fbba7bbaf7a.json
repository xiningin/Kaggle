{"cell_type":{"e8438e7f":"code","9f98b3b6":"code","65ea75bf":"code","4461b8f5":"code","fdd27f73":"code","a6dddf43":"code","151a45b5":"code","10b0b3b9":"code","a8439ca9":"code","63642779":"code","885825d9":"code","89a4dea9":"code","28ce69dd":"code","4c25b3fe":"code","2a6f632f":"code","cd3c7a90":"code","dfeb71cd":"code","1b45a6b3":"code","5bdd402e":"code","20b821fa":"code","5eafc28a":"code","da57cdff":"code","60c9c8c8":"code","ed4b7a1c":"code","cef6a7ee":"code","adfebdcc":"code","0c04c370":"code","0ca43a4b":"code","d05aee87":"code","db420776":"code","59bb109c":"code","e4b45bdf":"code","b1144a77":"code","b7b70c34":"code","32c8bd62":"markdown","02f621bb":"markdown","75399591":"markdown","14dec4e1":"markdown","acdef91f":"markdown","734d1e44":"markdown","a59058d0":"markdown","17229051":"markdown","6bc56470":"markdown","38c9288e":"markdown","f60178e1":"markdown","b380eed6":"markdown","1cd17f20":"markdown","84553eb2":"markdown","2bb09b20":"markdown","8d909fed":"markdown","d55e9f36":"markdown","644c7725":"markdown","f438835d":"markdown","80ae00fa":"markdown","f4598adf":"markdown","8990f7f4":"markdown","c1b73e53":"markdown","e6274d5c":"markdown","adc925be":"markdown","aa042e2c":"markdown","ee53022b":"markdown","23a98986":"markdown","c71d4fdc":"markdown","07766c2d":"markdown","6205513e":"markdown","3a842c4d":"markdown","0931ee83":"markdown","66e2c437":"markdown","76592cc9":"markdown","346e40b4":"markdown","1001a62e":"markdown","31c01bb3":"markdown"},"source":{"e8438e7f":"#Importing the packages needed to perform the analysis\nimport pandas as pd\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\n%matplotlib inline","9f98b3b6":"df = pd.read_csv(\"..\/input\/no-show-appointments\/noshowappointments-kagglev2-may-2016.csv\")\ndf.head()","65ea75bf":"df.duplicated().sum()","4461b8f5":"df.dtypes","fdd27f73":"#Display the number of rows and columns in the dataframe\ndf.shape","a6dddf43":"df.info()","151a45b5":"df.describe()","10b0b3b9":"df[\"Gender\"].value_counts(normalize=True)","a8439ca9":"df[\"Gender\"].value_counts().plot.pie()\nplt.legend()","63642779":"df[\"Diabetes\"].value_counts(normalize=True)","885825d9":"df[\"Handcap\"].value_counts()","89a4dea9":"#We start data cleaning by converting all column names to lowercase to ease future use\ndf_clean = df.query('Handcap == 0 or Handcap == 1')\ndf_clean = df_clean.rename(columns = lambda x: x.lower())\n#Next we fix the typos we found previously\ndf_clean.rename(columns =  {\"hipertension\":\"hypertension\",\"handcap\":\"handicap\"}, inplace=True)\n#We then check the fixes\ndf_clean.shape","28ce69dd":"df_clean[\"no-show\"] = df_clean[\"no-show\"].apply(lambda x:  0 if x == \"No\" else (1 if x == \"Yes\" else x))\ndf_clean.head()","4c25b3fe":"df_clean[\"scheduledday\"] = pd.to_datetime(df_clean[\"scheduledday\"])\ndf_clean[\"appointmentday\"] = pd.to_datetime(df_clean[\"appointmentday\"])\ndf_clean.dtypes","2a6f632f":"df_clean[\"weekday\"] = df_clean[\"appointmentday\"].apply(lambda x: x.to_pydatetime().weekday())\ndf_clean.head()","cd3c7a90":"df_clean['no-show'].value_counts(normalize=True)\nno_show_mean = df_clean['no-show'].value_counts(normalize=True)[1]\nno_show_mean","dfeb71cd":"#This function takes the name of a feature in the df_clean dataset as a string and prints out a plot of the feature\n#against the average rate of no-show\n\ndef plot_feature(feature):\n    \n    #Creating a new dataframe the only has two columns one for the feature and one for no-show\n    data = [df_clean[feature], df_clean[\"no-show\"]]\n    headers = [feature, \"no-show\"]\n    df_feature = pd.concat(data, axis=1, keys=headers)\n    \n    #Grouping the rows with the same value for the feature and getting the mean value of no-show for each value\n    #then plotting a bar chart with these values\n    df_feature.groupby(feature).mean().plot(kind = 'bar')\n    \n    #Adding a line to the chart to represent the average rate of no-show among all appointments\n    plt.plot([-1, 6], [no_show_mean, no_show_mean], color='k', linestyle='-', linewidth=2)\n    return(df_feature.groupby(feature).mean())","1b45a6b3":"plot_feature(\"weekday\")","5bdd402e":"df_clean['weekday'].value_counts()","20b821fa":"df_clean['weekday'].value_counts().plot.pie()\nplt.legend()","5eafc28a":"df_clean[\"handicap\"].value_counts()","da57cdff":"df_clean[\"hypertension\"].value_counts()","60c9c8c8":"df_clean[\"diabetes\"].value_counts()","ed4b7a1c":"df_clean[\"alcoholism\"].value_counts()","cef6a7ee":"plot_feature(\"handicap\")","adfebdcc":"plot_feature(\"hypertension\")","0c04c370":"plot_feature(\"diabetes\")","0ca43a4b":"plot_feature(\"alcoholism\")","d05aee87":"#Create a new column called comorbidity_number with each row having the value 0\ndf_clean[\"comorbidity_number\"] = 0\n\n#Identifying the comorbidities we wish to count\ncomorbidities = ['hypertension','diabetes','alcoholism','handicap']\n\n#For each of the comorbidities identified we check whether the patient has them and add 1 to the number of comorbidities \n#if the patient has them\nfor comorbidity in comorbidities:\n    df_clean.loc[df_clean[comorbidity] == 1, \"comorbidity_number\"] +=1\ndf_clean.head()","db420776":"df_clean.comorbidity_number.value_counts()","59bb109c":"plot_feature(\"comorbidity_number\")","e4b45bdf":"#Count the number of records for each value of scholarship and display them as a percentage of the entire count of records\ndf_clean['scholarship'].value_counts(normalize=True)","b1144a77":"#Count the number of records for each value of scholarship and display them\ndf_clean['scholarship'].value_counts()","b7b70c34":"plot_feature('scholarship')","32c8bd62":"This shows us that the \"Handicap\" column has some extraneous values (namely 2, 3, and 4) as this column should have a 0 if the patient does not have a handicap, and a 1 if they do. Rows with these values will be dropped in order to better reflect that.","02f621bb":"First we need to determine the percentage of patient appointments that ended up with no shows, this will help us determine if a certain characteristic of the dataset affects the outcome.","75399591":"In the above plot, we can see the average of no shows for each day of the week (Where 0 is Monday, 6 would be Sunday but there are no appointments on Sunday). The black line shown above is the average of no shows for all the appointments. This shows that Fridays and Saturdays have a higher average no-show rate than the rest of the weekdays. However, this may be misleading due to the sample size of the appointments, therefore, we check how many rows are available for each weekday.","14dec4e1":"We can then use that function to find out if different days of the week have different no-show rates.","acdef91f":"At first glance, it is noticeable that some of the column names are misspelt, these typos will be fixed in the Data Cleaning section in order to ease manipulation later on. Additionally, we can see there are no duplicate rows so we do not need to handle duplicates. We then check the datatypes present in the dataset to see if any of them are problematic.","734d1e44":"We can then check the value counts for some of the columns in the dataframe.","a59058d0":"This shows that each of these classes have a decent sample size that can allow us to draw conclusions from them. We can then start plotting the feature to see how they measure up to the average of all appointments.","17229051":"First we check the first part of the question which is how many of the patients have a scholarship.","6bc56470":"here Monday is 0 and Sunday is 6","38c9288e":"### Does the number of comorbidities the patient has affect their likelihood of showing up?","f60178e1":"# Investigating the No-Show Appointment Dataset\n\n## Table of Contents\n\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","b380eed6":"One of the questions to be answered needs us to know the weekday the appointment was made for. So we create a new column called \"weekday\" which has the day of the week the appointment was made for this is done using the following code.","1cd17f20":"We can see from the above results that only about 1% of the patients do have a scholarship. This 1% however translates to around 10,000 patients thus the sample size is significant enough to draw conclusions from.","84553eb2":"On further analysis, we can see that only 39 appointments were made on Saturdays which is a relatively small sample size, thus rendering the results for Saturday less significant. It's also noticeable how the proportion of Saturday appointments is so small on the pie chart thus reinforcing our idea that conclusions drawn from it will be less significant.","2bb09b20":"We then convert the no-show column to a numerical datatype to ease analysis","8d909fed":"<a id='intro'><\/a>\n## Introduction\n>Within this notebook, I intend to analyze the \u201cNo-Show Appointments\u201d dataset. This dataset shows whether a patient showed up to their scheduled appointment or not and some information about the appointment and the patients themselves. The information includes the date the patient scheduled their appointment, the date of the appointment itself, whether the patient has some comorbidites (such as diabetes, and hypertension), the age, gender, and address of the patient, and finally whether the patient is enrolled in the Bolsa Fam\u00edlia social welfare program. The purpose of this analysis is to answer the following questions.\n>\n>>Are there specific days of the week where the number of no-shows is greater than average?\n>>\n>>Do patients with certain comorbidites show up more or less frequently to their appointments than those without those symptoms?\n>>\n>>Does the number of comorbidities the patient has affect their likelihood of showing up?\n>>\n>>How many patients have a scholarship? And does having one affect their likelihood of showing up?\n>>\n>The dataset used can be found here: https:\/\/d17h27t6h515a5.cloudfront.net\/topher\/2017\/October\/59dd2e9a_noshowappointments-kagglev2-may-2016\/noshowappointments-kagglev2-may-2016.csv","d55e9f36":"This dataset seems to contain significantly more females than males which may skew the findings.","644c7725":"### Do patients with certain comorbidites show up more or less frequently to their appointments than those without those symptoms?","f438835d":"### Are there specific days of the week where the number of no-shows is greater than average?","80ae00fa":"First we remove the rows with extraneous values in the \"Handicap\" column, we then rename the columns so that they are all in lowercase and fix the typos found earlier.","f4598adf":"This shows that patients without a scholarship are more likely to show up to their appointments, while those with a scholarship are less likely to show up.","8990f7f4":"We can then represent the percentage of each weekday in a pie chart.","c1b73e53":"The above figure shows that as the number of comorbidites increases to 3 the patients increasingly show up more frequently on average. And then at 4 comorbidites the patients become less likely to show up. However, it should be taken into consideration that the sample size for 4 comorbidities is not large enough to draw significant conclusions.","e6274d5c":"### Data Cleaning (Replace this with more specific notes!)","adc925be":"To answer this question we need to create a new column to track the number of comorbidites each patient has this can be done using the following code.","aa042e2c":"This shows that none of the records have null values, thus we do not need to handle null values. We can then check statistics for the different numerical columns present in the dataframe.","ee53022b":"This shows that patients with a disability or those who have hypertension or diabetes show up to their appointments more frequently on average. While patients with alcoholism show up at roughly the same rate of patients without alcoholism.","23a98986":"We then convert the scheduledday and appointmentday columns to a datetime datatype.","c71d4fdc":"### How many patients have a scholarship? And does having one affect their likelihood of showing up?","07766c2d":"We can see here that the sample size is significant for all comorbidity numbers except four, thus any conclusions we get from this number of comorbidities will be less significant.","6205513e":"This shows that the ScheduledDay and AppointmentDay columns hold strings (The above output shows that the datatype is \"object\u201d. This is because pandas stores pointers to strings in dataframes rather than the strings themselves). These columns will be changed to datetimes to ease the steps performed in the analysis step. Additionally, changing No-show to a numerical datatype will also help in analysis. Next up, we check if any of the records have null values.","3a842c4d":"We then check the number of patients as categorized by the number of comorbidities they have. ","0931ee83":"The first question to analyze is \"Are there specific days of the week where the number of no-shows is greater than average?\".\nTo assist us in further analysis the following function is made to plot a feature against the average rate of no-show.","66e2c437":"For the second question, we want to investigate whether having hypertension, diabetes, alcoholism, or being handicapped somehow affects the patient not showing up. First we ensure that the sample size for each is large enough to draw conclusions.","76592cc9":"<a id='wrangling'><\/a>\n## Data Wrangling\n\nIn this section, the dataset will be checked for any features that may be problematic later on. First, we load the dataset and check the first few records to get a general idea about the dataset.","346e40b4":"<a id='conclusions'><\/a>\n## Conclusions\n> An important point of note here is that this method of analysis shows correlation only and not causation. Therefore, all the results shown here do not indicate that a change occuring to any of the datapoints will necessarily cause a change within the outcome of a patient showing up or not.\n>\n> From the questions we posed previously we can draw the following correlations.\n>\n>>Fridays and Saturdays have a higher average no-show rate than the rest of the weekdays. However, this may be misleading due to the sample size of the appointments.\n>>\n>>Patients with a disability or those who have hypertension or diabetes show up to their appointments more frequently on average. While patients with alcoholism show up at roughly the same rate of patients without alcoholism.\n>>\n>>As the number of comorbidites increases to 3 the patients increasingly show up more frequently on average. And then at 4 comorbidites the patients become less likely to show up. However, it should be taken into consideration that the sample size for 4 comorbidities is not large enough to draw significant conclusions.\n>>\n>>Only about 1% of the patients do have a scholarship. Additionally, patients without a scholarship are more likely to show up to their appointments, while those with a scholarship are less likely to show up.","1001a62e":"Next we check for the number of duplicate rows in the dataframe.","31c01bb3":"<a id='eda'><\/a>\n## Exploratory Data Analysis\n\n> In this section we attempt to answer the questions posed previously."}}