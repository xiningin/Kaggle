{"cell_type":{"72a816e3":"code","9300068c":"code","d5c1120d":"code","e4ee116a":"code","7b6f5f03":"code","3a751949":"code","87d79bf3":"code","c3a05488":"code","6a69bd4b":"code","688ad70a":"code","0a48d01a":"code","607e9c87":"code","3a159140":"code","dc0249ef":"code","6a319692":"code","9a7126f5":"code","92f80a87":"code","af8ce960":"code","6fa17a36":"code","add959ff":"code","94caf7ab":"code","f24e7475":"code","b191acb0":"code","7b811f58":"code","3827ad8a":"code","a2262ddd":"code","83ac7258":"code","22e4dc2c":"code","16bf0cbd":"code","f5390d69":"code","9fed396f":"code","f9048247":"code","7e48c762":"code","f3203ab6":"code","ffdc16f9":"code","bc3ab7fb":"code","a8bb7822":"code","4bb9ac11":"code","e65510f6":"code","a5ce20ad":"code","a8525f9d":"markdown","22e3caf4":"markdown","b12df73a":"markdown","f999b4a3":"markdown","ace42f91":"markdown","a78ad2f6":"markdown","0937ff05":"markdown","3bdf2f7e":"markdown","bde096f0":"markdown","69845706":"markdown","69f84cdb":"markdown","acd36bbc":"markdown","c24f182e":"markdown","ff27dd89":"markdown","04c3a1eb":"markdown","bdf91b6f":"markdown","366d8e07":"markdown","9428c872":"markdown","97d438eb":"markdown","247f80e6":"markdown","ff52c10a":"markdown","64e68a9a":"markdown","e0ce7e64":"markdown","04ad3b59":"markdown","4ca3d02c":"markdown","d176ba66":"markdown","508218ae":"markdown","f8cd7e98":"markdown","cc119fd2":"markdown","a9be4520":"markdown","22aead8d":"markdown","b9537563":"markdown","53103088":"markdown","7efce225":"markdown","88b9a781":"markdown","c20a3378":"markdown","d8259541":"markdown","0aac2edd":"markdown","086bc879":"markdown","ec0b4e18":"markdown","087220bc":"markdown","d2a0d3ea":"markdown","9680df2b":"markdown","455354fc":"markdown","e3917d05":"markdown","504581c9":"markdown","9a089ca6":"markdown","3b186a9d":"markdown","94c48949":"markdown","b156421b":"markdown","c46b5dfd":"markdown","5b494235":"markdown","83bcc888":"markdown","d5cd142f":"markdown","abbdca98":"markdown","83798273":"markdown","60f51c16":"markdown","f9d1f78c":"markdown","aa1a0384":"markdown","489e5c9c":"markdown","9b2ca167":"markdown","dd79ab5a":"markdown","4fc60a19":"markdown"},"source":{"72a816e3":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport json\nfrom datetime import datetime","9300068c":"youtube = pd.read_csv(\"..\/input\/youtube-new\/USvideos.csv\")\n\nyoutube['trending_date'] = pd.to_datetime(youtube['trending_date'], format='%y.%d.%m') #parsing\nyoutube['publish_time'] = pd.to_datetime(youtube['publish_time'], format='%Y-%m-%dT%H:%M:%S.%fZ')\nyoutube['category_id'] = youtube['category_id'].astype(str)\n\nyoutube.head()","d5c1120d":"youtube.info()","e4ee116a":"youtube.describe()","7b6f5f03":"id_to_category = {}\n\nwith open('..\/input\/youtube-new\/US_category_id.json' , 'r') as f:\n    data = json.load(f)\n    for category in data['items']:\n        id_to_category[category['id']] = category['snippet']['title']\n        \nyoutube['category'] = youtube['category_id'].map(id_to_category)","3a751949":"youtube[\"ldratio\"] = youtube[\"likes\"] \/ youtube[\"dislikes\"]","87d79bf3":"youtube[\"perc_comment\"] = youtube[\"comment_count\"] \/ youtube[\"views\"]\nyoutube[\"perc_reaction\"] = (youtube[\"likes\"] + youtube[\"dislikes\"]) \/ youtube[\"views\"]","c3a05488":"youtube['publish_date'] = youtube['publish_time'].dt.date\nyoutube['publish_tym'] = youtube['publish_time'].dt.time","6a69bd4b":"youtube.head()","688ad70a":"def distribution_cont(youtube, var):\n    plt.hist(youtube[youtube[\"dislikes\"] != 0][var])\n    plt.xlabel(f\"{var}\")\n    plt.ylabel(\"Count\")\n    plt.title(f\"Distribution of Trending Video {var}\")\n    plt.show()\nfor i in [\"views\", \"likes\", \"dislikes\", \"comment_count\", \"ldratio\", \"perc_reaction\", \"perc_comment\"]:\n    distribution_cont(youtube, i)","0a48d01a":"contvars = youtube[[\"views\", \"likes\", \"dislikes\", \"comment_count\", \"ldratio\", \"perc_comment\", \"perc_reaction\"]]\ncorr = contvars.corr()\n\nmask = np.zeros_like(corr, dtype=np.bool)\nmask[np.triu_indices_from(mask)] = True\n\ncmap = sns.diverging_palette(220, 10, as_cmap=True)\nsns.heatmap(corr, mask=mask, cmap=cmap, vmax=.3, center=0,\n            square=True, linewidths=.5, cbar_kws={\"shrink\": .5})\nplt.show()","607e9c87":"by_channel = youtube.groupby([\"channel_title\"]).size().sort_values(ascending = False).head(10)\nsns.barplot(by_channel.values, by_channel.index.values, palette = \"rocket\")\nplt.title(\"Top 10 Most Frequent Trending Youtube Channels\")\nplt.xlabel(\"Video Count\")\nplt.show()","3a159140":"by_cat = youtube.groupby([\"category\"]).size().sort_values(ascending = False)\nsns.barplot(by_cat.values, by_cat.index.values, palette = \"rocket\")\nplt.title(\"Most Frequent Trending Youtube Categories\")\nplt.xlabel(\"Video Count\")\nplt.show()","dc0249ef":"top_channels2 = youtube.groupby(\"channel_title\").size().sort_values(ascending = False)\ntop_channels2 = list(top_channels2[top_channels2.values >= 20].index.values)\nonly_top2 = youtube\nfor i in list(youtube[\"channel_title\"].unique()):\n    if i not in top_channels2:\n        only_top2 = only_top2[only_top2[\"channel_title\"] != i]\n\nby_views = only_top2.groupby([\"channel_title\"]).mean().sort_values(by = \"views\", ascending = False).head(10)\nsns.barplot(by_views[\"views\"], by_views.index.values, palette = \"rocket\")\nplt.title(\"Top 10 Most Viewed Trending Youtube Channels\")\nplt.xlabel(\"Average Views\")\nplt.show()","6a319692":"by_views_cat = youtube.groupby([\"category\"]).mean().sort_values(by = \"views\", ascending = False)\nsns.barplot(by_views_cat[\"views\"], by_views_cat.index.values, palette = \"rocket\")\nplt.title(\"Top 10 Most Viewed Trending Youtube Channels\")\nplt.xlabel(\"Average Views\")\nplt.show()","9a7126f5":"top_channels = youtube.groupby(\"channel_title\").size().sort_values(ascending = False)\ntop_channels = list(top_channels[top_channels.values >= 20].index.values)\nonly_top = youtube\nfor i in list(youtube[\"channel_title\"].unique()):\n    if i not in top_channels:\n        only_top = only_top[only_top[\"channel_title\"] != i]\n\nlike_channel = only_top[only_top[\"dislikes\"] != 0].groupby([\"channel_title\"]).mean().sort_values(by = \"ldratio\", ascending = False).head(10)\nsns.barplot(like_channel[\"ldratio\"], like_channel.index.values, palette = \"rocket\")\nplt.title(\"Top 10 Most Liked Trending Youtube Channels\")\nplt.xlabel(\"Average Like to Dislike Ratio\")\nplt.show()","92f80a87":"like_category = youtube[youtube[\"dislikes\"] != 0].groupby(\"category\").mean().sort_values(by = \"ldratio\", ascending = False)\nsns.barplot(like_category[\"ldratio\"], like_category.index.values, palette = \"rocket\")\nplt.title(\"Top 10 Most Liked Trending Youtube Categories\")\nplt.xlabel(\"Average Like to Dislike Ratio\")\nplt.show()","af8ce960":"def over_time(youtube, var):\n    averages = youtube[youtube[\"dislikes\"] != 0].groupby(\"trending_date\").mean()\n    plt.plot(averages.index.values, averages[var])\n    plt.xticks(rotation = 90)\n    plt.xlabel(\"Date\")\n    plt.ylabel(f\"Average {var}\")\n    plt.title(f\"Average {var} Over Time (11\/14\/17 - 6\/14\/18)\")\n    plt.show()","6fa17a36":"over_time(youtube, \"views\")","add959ff":"over_time(youtube, \"ldratio\")","94caf7ab":"over_time(youtube, \"perc_reaction\") #Recall perc_reaction is (likes + dislikes) \/ views","f24e7475":"over_time(youtube, \"perc_comment\") #Recall perc_comment is comments \/ views","b191acb0":"youtube[\"hour\"] = youtube['publish_time'].dt.hour\nby_hour = youtube.groupby(\"hour\").mean()\n\nplt.plot(by_hour.index.values, by_hour[\"views\"])\nplt.scatter(by_hour.index.values, by_hour[\"views\"])\nplt.xlabel(\"Hour of Day\")\nplt.ylabel(\"Average Number of Views\")\nplt.title(\"Average Amount of Views on Trending Videos by the Hour\")\nplt.show()","7b811f58":"trump = youtube[youtube[\"title\"].str.contains(\"Trump\")]\ntrump.head()","3827ad8a":"trump.describe()","a2262ddd":"trump.sort_values(by = \"ldratio\").iloc[0]","83ac7258":"trump.sort_values(by = \"ldratio\").iloc[2]","22e4dc2c":"trump.sort_values(by = \"ldratio\").iloc[-1]","16bf0cbd":"def get_top_video(youtube, min_trend_date, max_trend_date, stat, top = True, cat = list(youtube[\"category\"].unique())):\n    \n    min_trend_list = min_trend_date.split(\"-\")\n    max_trend_list = max_trend_date.split(\"-\")\n    min_date = datetime(int(min_trend_list[0]), int(min_trend_list[1]), int(min_trend_list[2]))\n    max_date = datetime(int(max_trend_list[0]), int(max_trend_list[1]), int(max_trend_list[2]))\n    \n    youtube = youtube[(youtube[\"trending_date\"] >= min_date) & (youtube[\"trending_date\"] <= max_date)]\n    \n    if stat == \"ldratio\":\n        youtube = youtube[youtube[\"views\"] >= 100000]\n    \n    for i in list(youtube[\"category\"].unique()): \n        if i not in cat:\n            youtube = youtube[youtube[\"category\"] != i]\n            \n    if top == True:\n        leaders = youtube.loc[youtube[stat].idxmax()][[\"title\", \"channel_title\"]]\n    else:\n        leaders = youtube.loc[youtube[stat].idxmin()][[\"title\", \"channel_title\"]]\n    \n    title_channel = list(leaders)\n    \n    return title_channel[0] + \" by \" + title_channel[1]","f5390d69":"get_top_video(youtube, \"2017-11-14\", \"2018-6-14\", \"views\")","9fed396f":"get_top_video(youtube, \"2017-11-14\", \"2018-6-14\", \"likes\")","f9048247":"get_top_video(youtube, \"2017-11-14\", \"2018-6-14\", \"dislikes\")","7e48c762":"get_top_video(youtube, \"2017-11-14\", \"2018-6-14\", \"ldratio\")","f3203ab6":"get_top_video(youtube, \"2017-11-14\", \"2018-6-14\", \"ldratio\", top = False)","ffdc16f9":"get_top_video(youtube, \"2017-12-25\", \"2017-12-25\", \"views\")","bc3ab7fb":"get_top_video(youtube, \"2018-1-1\", \"2018-6-14\", \"views\", cat = [\"Gaming\"])","a8bb7822":"get_top_video(youtube, \"2018-1-1\", \"2018-6-14\", \"views\", cat = [\"Education\", \"Science & Technology\"])","4bb9ac11":"get_top_video(youtube, \"2018-1-1\", \"2018-6-14\", \"perc_reaction\", cat = [\"Entertainment\"])","e65510f6":"get_top_video(youtube, \"2018-1-1\", \"2018-6-14\", \"perc_comment\", cat = [\"News & Politics\"])","a5ce20ad":"get_top_video(youtube, \"2018-1-1\", \"2018-6-14\", \"ldratio\", top = False, cat = [\"News & Politics\"])","a8525f9d":"Videos published at 4 AM received the most views on average.  This may be due to the fact that US citizens are first waking up after this time and have all day to make the video popular.  9 AM is also a good time to puublish a video when hoping for many views on the trending list.  Trending videos published later in the evening usually aren't as viewed.","22e3caf4":"All of our continuous variables involve the users' interactions with the videos, including views, likes, dislikes, and comments.  We will visualize all of this with a correlation plot.","b12df73a":"#### Most Viewed Gaming Video in 2018","f999b4a3":"We will first load packages and our data and see what we are working with.","ace42f91":"Let's visualize views, like to dislike ratio, and more over time using the trending date.","a78ad2f6":"#### Getting Categories","0937ff05":"### Data Preparation","3bdf2f7e":"#### Most Viewed Trending Channels\n","bde096f0":"Now, we will see how many trending videos contained the US president's last name.  ","69845706":"#### Correlation Between Variables","69f84cdb":"#### Trump's YouTube Stats","acd36bbc":"#### Most Liked Trending Channels\n","c24f182e":"The percent of people who comment on trending videos has been quite volatile, though exhibits similar patterns as our \"perc_reation\" chart (February, 2018 for example).","ff27dd89":"#### Most Active News\/Politics Comment Section in 2018","04c3a1eb":"In this analysis, I will perform EDA on the dataset of trending Youtube videos.  This is my first Python notebook and I am accustomed to performing this type of work in R (check out my other kernels to see those analyses), but I hope to improve my Python skills, as well.  I am a young learning college student  so feel free to leave a like and\/or feedback in the comments! ","bdf91b6f":"#### Most Viewed Science or Education Video in 2018","366d8e07":"This video recieved the lowest like to dislike ratio out of all the Trump videos, and the video's sentiment appears to be negative against him based on the title.  Here's a similar story with second lowest like to dislike ratio and many more views.","9428c872":"These variables record the extent to which people react to the video.","97d438eb":"#### Most Reactive Entertainment Video in 2018","247f80e6":"Views per trending video appeared to skyrocket beginning around April of 2018.","ff52c10a":"#### Worst Overall Like to Dislike Ratio Video","64e68a9a":"Entertainment and music lead by far.","e0ce7e64":"The average like to dislike ratio for videos with Trump's name is 7.2, even lower than the average ratio for all news and politics videos (see previous visualization).  However, we have not stated whether these videos address him positively or negatively.  We will take a look at the videos with the min and max like to dislike ratios.","04ad3b59":"#### Thank you for reading my YouTube analysis! If you liked it or have feedback, feel free to comment and like :)","4ca3d02c":"#### Basic Distributions","d176ba66":"#### Most Viewed Video on Christmas","508218ae":"Lastly, we will create a function that returns the top or bottom youtuber for a given category in a given measure between two given dates.  It will be used for the following questions.","f8cd7e98":"Sports channels (ESPN, NBA) and tv shows, especially late night comedies, are trending most often.","cc119fd2":"* Views, likes, dislikes, and comment counts all have pretty strong positive relationships with one another.\n* Reactive comments sections are likely to be accompanied by reactive likes and dislikes.\n* If YouTube wants to optimize views, they should modify their algorithm to put mostly music videos on trending.  In the data, entertainment videos are more frequently trending than music videos.\n* If YouTube wants to optimize like to dislike ratio, they should modify their algorithm to put mostly pet\/animal videos on trending and less news\/politics.\n* YouTube took an action with their trending videos in April of 2018 that was successful in skyrocketing their views for the immediate months to come.  \n* Like to dislike ratios were extremely volatile in late 2017 and early 2018, but calmed down afterwards.\n* If YouTube wantsa bigger proportion of people to react to their trending videos more often with likes, dislikes, and comments, they should avoid whatever they did in early February of 2018","a9be4520":"#### Packages \/ Import","22aead8d":"### Conclusions \/ Recommendations","b9537563":"#### The Numbers Over Time\n","53103088":"Note: No political opinions associated with analysis :)","7efce225":"#### Worst Like to Dislike Ratio News\/Politics Video in 2018","88b9a781":"#### What Publishing Time Receives the Most Views?","c20a3378":"#### Most Overall Disliked Video","d8259541":"#### Best Overall Like to Dislike Ratio Video ","0aac2edd":"All distributions are skewed to the left due to some outliers.","086bc879":"#### Get the Top Youtubers","ec0b4e18":"The data is clean and ready to be analyzed.","087220bc":"### Other Fun Questions","d2a0d3ea":"There was a large increase in people who liked and disliked trending videos in December of 2017, and a large decrease in February of 2018.","9680df2b":"We will first plot distributions of various individual variables to better understand the data.","455354fc":"## Trending Youtube Videos Analysis","e3917d05":"The channel must have at least 20 trending videos in the dataset to make the list.  BANGTANTV crushes the competition with an average like to dislike ratio of nearly 300 to 1.","504581c9":"The like to dislike ratio is an important measure of the viewers' approval of the video.","9a089ca6":"#### Most Frequent Trending Channels","3b186a9d":"The sentiment towards Trump is unclear from the title, but it falls under the comedy category and was uploaded on Christmas.","94c48949":"#### Most Frequent Trending Categories\n","b156421b":"Lastly, we will get more elements from our publishing time.","c46b5dfd":"The channel must have at least 20 trending videos in the dataset to make the list.  Many vevo (music video) channels make the list.  This is a preview for the results of our next plot:","5b494235":"#### Most Overall Liked Video","83bcc888":"#### Creating New Variables\n","d5cd142f":"Some event caused the average like to dislike ratio on trending videos to decrease dramatically around January of 2018.","abbdca98":"The US President's last name appeared 298 times out of the total of 40909 rows in the dataset for a proportion of 0.7%.  Now, let's see how viewers responded to videos containing his name:","83798273":"#### Most Liked Trending Categories","60f51c16":"we will read in the category_id json file to match appropriate categories with their ids.","f9d1f78c":"Now, for the video with the best like to dislike ratio:","aa1a0384":"News and politics, which can be very divisive, unsurprisingly averages the lowest like to dislike ratio. And of course, everyone loves pets and animals! ","489e5c9c":"#### Most Viewed Trending Categories","9b2ca167":"#### Most Overall Viewed Video","dd79ab5a":"### EDA","4fc60a19":"There exist many moderate correlations here.  One of the most meaningful observations is that comment count has a positive relationship with views, likes, and dislikes.  People who react with a like or dislike are also more likely to comment."}}