{"cell_type":{"0556530e":"code","7e303f8b":"code","f5c93a96":"code","2a92b244":"code","967a4a55":"code","cfa1691d":"code","78ac9731":"code","01d7a847":"code","bebf585c":"code","1328ca28":"code","4c500ad9":"code","db3aa129":"code","41684c74":"code","43d175e6":"code","0f297ef8":"code","4de68801":"code","be70f5e4":"code","1e5ce934":"code","53e83f09":"code","366d8eeb":"code","a585af32":"code","ebeff16b":"code","4d816c6b":"code","d21fdb1f":"code","70cfab22":"code","64ee903c":"code","d6399e01":"code","e35710ad":"code","08159835":"code","6a5a68f8":"code","72387580":"code","67ecdae9":"code","0e3177e5":"code","d7336bd5":"code","a53d18e3":"code","30c8a325":"code","f0c60930":"code","8f27154a":"code","52125b2d":"code","46006169":"code","8aa629b0":"code","7d0d7171":"code","acf6107b":"code","06c93c6a":"code","18286cca":"code","a75bede8":"code","cf4ab9c7":"code","78901ffb":"code","1afcddda":"code","d6a4aa16":"code","e3abea70":"code","33128294":"code","d47c6282":"code","6e147c71":"code","a1f1601a":"code","b0e62334":"code","5c35536f":"code","e17a1594":"code","e353b4b0":"code","3b405bb2":"code","5d365abf":"code","0ed3ca7b":"code","f27bf1da":"code","122daed4":"code","6025cbdb":"code","8a2b4e48":"code","7e4af548":"code","35b2d636":"code","17828ecf":"code","687a3639":"code","6c846e8b":"code","ff35461a":"code","62ad0f23":"code","9b69301e":"code","4c78939f":"code","0f197006":"code","3cf8c92a":"code","f4bc6291":"code","a7701d86":"code","1bc4d73c":"code","fe0e764b":"code","d27a4b20":"code","256b2ed0":"code","cdd33432":"code","06437241":"code","355b4a66":"code","8734b770":"code","7a2eee4b":"code","dcbcea22":"code","0b9eef85":"code","085b81be":"code","95582574":"code","e976ef55":"code","addbd7ae":"code","dbaf6780":"code","c16d53b0":"code","6ec19de3":"code","3688f948":"code","2dbacdfe":"code","f846e449":"code","cbb91724":"markdown","ebf134af":"markdown","7736ace9":"markdown","7f8ddc5a":"markdown","87f0badf":"markdown","910be202":"markdown","ff316169":"markdown","91dfa378":"markdown","ac0af61c":"markdown","bf5ceffa":"markdown","731b7e2b":"markdown","b2914e8f":"markdown","dceffc12":"markdown","499dc598":"markdown","0cb028b8":"markdown","2d915329":"markdown","b6a8e2bc":"markdown","e383cc61":"markdown","da30390c":"markdown","3af01eeb":"markdown","69cfa0d4":"markdown","3e5707a7":"markdown","584e799b":"markdown","bd8be809":"markdown","ef17dfc9":"markdown","efc36df1":"markdown","cf3cbd96":"markdown","40e5086d":"markdown","d9f46363":"markdown","38506421":"markdown","556ca200":"markdown","ac2e9ee8":"markdown","913f39d3":"markdown","4212c91d":"markdown","fcc948a5":"markdown","a5cb484c":"markdown","0614adb3":"markdown","718d42d4":"markdown","91ab4b2b":"markdown","0f7966f3":"markdown","64911fe7":"markdown","834ea41e":"markdown","2d74ea20":"markdown","ae05e200":"markdown","884811ef":"markdown","15000919":"markdown","da0ba6a8":"markdown","d4144066":"markdown","eec9241c":"markdown","3c89818b":"markdown","9fb0364e":"markdown","f8f08afc":"markdown","45c796a5":"markdown","5ecea451":"markdown","c4f54456":"markdown","d63c6b98":"markdown","dac0e6ac":"markdown","d231c83b":"markdown","721448e2":"markdown","4c689905":"markdown","946797cd":"markdown","f0420d8c":"markdown","63a1a698":"markdown","dd62af0a":"markdown","b9a67d37":"markdown","e22ff160":"markdown","d2277671":"markdown","61a4028c":"markdown","55e3d35b":"markdown","eb3d9899":"markdown","a525a14c":"markdown","9e32a141":"markdown","c1440a81":"markdown","330f4cfa":"markdown","1e250f4f":"markdown","6d021510":"markdown","9c2e7e52":"markdown","561e3229":"markdown","18440606":"markdown","3f8b29a6":"markdown","5a6652a4":"markdown","120913c7":"markdown","aa070fec":"markdown","94e298a4":"markdown","ba7f6b51":"markdown","5d07a147":"markdown","9dd5c57e":"markdown","880ccfc5":"markdown","3e9e38b0":"markdown","db7efbcb":"markdown","4deea6ee":"markdown","b5477ad4":"markdown","4c8d3577":"markdown","2880614e":"markdown","8ae4d3de":"markdown","0c1659ef":"markdown","cba44358":"markdown","7a3a63d3":"markdown","f4406a41":"markdown","11f37fc6":"markdown","8070f3ad":"markdown"},"source":{"0556530e":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport warnings","7e303f8b":"df = pd.read_csv('\/kaggle\/input\/brasilian-houses-to-rent\/houses_to_rent_v2.csv')\ndf_backup = df.copy()\nwarnings.filterwarnings(\"ignore\")","f5c93a96":"df.head()","2a92b244":"df.tail()","967a4a55":"df.info()","cfa1691d":"df.rename(columns={'hoa (R$)':'hoa','parking spaces':'parking_spaces', 'floor': 'floors',\n                   'rent amount (R$)' : 'rent_amount',\n                   'property tax (R$)' : 'property_tax',\n                   'fire insurance (R$)' : 'fire_insurance',\n                   'total (R$)' : 'total'}, inplace = True)","78ac9731":"def m_data(data):\n    m_data = df.isnull().sum() #total de null    \n    total = m_data.sort_values(ascending=True) #ordena\u00e7\u00e3o \n    percent = (m_data \/ len(df.index)*100).round(2).sort_values(ascending=True) #c\u00e1lculo percentual\n    m_table = pd.concat([total, percent], axis=1, keys=['Qty DA', '% DA'])\n    return m_table.tail(13)","01d7a847":"m_data(df)","bebf585c":"df.describe().T","1328ca28":"sns.set_style(\"darkgrid\")\nfig = plt.figure(1, figsize=(16,10))\nspec2 = plt.GridSpec(ncols=3, nrows=3, figure=fig)\nax1 = fig.add_subplot(spec2[0, 0])\nax2 = fig.add_subplot(spec2[0, 1:2])\nax3 = fig.add_subplot(spec2[0, 2:])\nax4 = fig.add_subplot(spec2[1, 0])\nax5 = fig.add_subplot(spec2[1, 1:2])\nax6 = fig.add_subplot(spec2[1, 2:])\nax7 = fig.add_subplot(spec2[2, 0])\nax8 = fig.add_subplot(spec2[2, 1:2])\nax9 = fig.add_subplot(spec2[2, 2:])\nvar1 = (df['area'])\nvar2 = (df['rooms'])\nvar3 = (df['bathroom']) \nvar4 = (df['parking_spaces']) \nvar5 = (df['hoa']) \nvar6 = (df['rent_amount'])\nvar7 = (df['property_tax'])\nvar8 = (df['fire_insurance'])\nvar9 = (df['total'])\nax1.boxplot(var1),ax1.set_xlabel(\"area\",fontsize=10),ax1.set_ylabel(\"m\u00b2\",fontsize=10)\nax2.boxplot(var2),ax2.set_xlabel(\"rooms\",fontsize=10),ax2.set_ylabel(\"un\",fontsize=10)\nax3.boxplot(var3),ax3.set_xlabel(\"bathroom\",fontsize=10),ax3.set_ylabel(\"un\",fontsize=10)\nax4.boxplot(var4),ax4.set_xlabel(\"parking_spaces\",fontsize=10),ax4.set_ylabel(\"un\",fontsize=10)\nax5.boxplot(var5),ax5.set_xlabel(\"hoa\",fontsize=10),ax5.set_ylabel(\"R$\",fontsize=10)\nax6.boxplot(var6),ax6.set_xlabel(\"rent_amount\",fontsize=10),ax6.set_ylabel(\"R$\",fontsize=10)\nax7.boxplot(var7),ax7.set_xlabel(\"property_tax\",fontsize=10),ax7.set_ylabel(\"R$\",fontsize=10)\nax8.boxplot(var8),ax8.set_xlabel(\"fire_insurance\",fontsize=10),ax8.set_ylabel(\"R$\",fontsize=10)\nax9.boxplot(var9),ax9.set_xlabel(\"total\",fontsize=10),ax9.set_ylabel(\"R$\",fontsize=10)\nplt.show()","4c500ad9":"df.city.unique()","db3aa129":"sp = df.city.value_counts()['S\u00e3o Paulo']\npa = df.city.value_counts()['Porto Alegre']\nrj = df.city.value_counts()['Rio de Janeiro']\ncp = df.city.value_counts()['Campinas']\nbh = df.city.value_counts()['Belo Horizonte']\ncities = [sp, pa, rj, cp, bh]\nfig = plt.figure() \nfig, ax = plt.subplots(figsize=(8,8))\nax.set_title(\"Properties Distribution by City\",fontsize=20)\nlabels='S\u00e3o Paulo', 'Porto Alegre', 'Rio de Janeiro', 'Campinas','Belo Horizonte'\nax.pie(cities, labels=labels, autopct='%1.1f%%',startangle=90)\nplt.show()","41684c74":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.area)\nplt.subplot(1, 2, 2)\nsns.distplot(df.area)\nplt.show()","43d175e6":"df.area.describe()","0f297ef8":"df.query('area>=10000')","4de68801":"df = df.query('area<10000')\ndf.shape","be70f5e4":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.area,color='red')\nplt.subplot(1, 2, 2)\nsns.distplot(df.area,color='orange')\nplt.show()","1e5ce934":"df.area.describe()","53e83f09":"maior_1000 = df.query('area>1000')\nmaior_1000","366d8eeb":"maior_1000.shape","a585af32":"df = df.query('area<1100')\ndf.shape","ebeff16b":"df.area.describe()","4d816c6b":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.area,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.area,color='green')\nplt.show()","d21fdb1f":"df.rooms.describe()","70cfab22":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.rooms)\nplt.subplot(1, 2, 2)\nsns.distplot(df.rooms,bins = 10)\nplt.show()","64ee903c":"df.query('rooms>4')","d6399e01":"df.rooms.value_counts()","e35710ad":"r1 = df.rooms.value_counts()[1]\nr2 = df.rooms.value_counts()[2]\nr3 = df.rooms.value_counts()[3]\nr4 = df.rooms.value_counts()[4]\nr_5 = df.rooms.value_counts()[5]+[6]+[7]+[8]+[9]+[10]+[13]\nrooms = [r1,r2,r3,r4,r_5]\nfig = plt.figure() \nfig, ax1 = plt.subplots(figsize=(8,8))\nax1.set_title(\"Properties Distribution by Rooms\",fontsize=20)\nlabels='1 Room', '2 Rooms', '3 Rooms','4 Rooms','More than 4 Rooms',\nax1.pie(rooms,labels=labels, autopct='%1.1f%%',startangle=90)\nplt.show()","08159835":"df.bathroom.describe()","6a5a68f8":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.bathroom)\nplt.subplot(1, 2, 2)\nsns.distplot(df.bathroom,bins = 10)\nplt.show()","72387580":"df.query(' bathroom>6')","67ecdae9":"df. bathroom.value_counts()","0e3177e5":"broom1 = df.bathroom.value_counts()[1]\nbroom2 = df.bathroom.value_counts()[2]\nbroom3 = df.bathroom.value_counts()[3]\nbroom4 = df.bathroom.value_counts()[4]\nbroom_5 = df.bathroom.value_counts()[5]+[6]+[7]+[8]+[9]+[10]\nbrooms = [broom1,broom2,broom3,broom4,broom_5]\nfig = plt.figure() \nfig, ax1 = plt.subplots(figsize=(8,8))\nax1.set_title(\"Properties Distribution by Bathrooms\",fontsize=20)\nlabels='1 Bathroom', '2 Bathrooms', '3 Bathrooms','4 Bathrooms','More than 4 Bathrooms'\nax1.pie(brooms,labels=labels, autopct='%1.1f%%',startangle=90)\nplt.show()","d7336bd5":"df['parking_spaces'].describe()","a53d18e3":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.parking_spaces)\nplt.subplot(1, 2, 2)\nsns.distplot(df.parking_spaces,bins = 10)\nplt.show()","30c8a325":"df.query('parking_spaces> 5')","f0c60930":"df.parking_spaces.value_counts()","8f27154a":"ps0 = df.parking_spaces.value_counts()[0]\nps1 = df.parking_spaces.value_counts()[1]\nps2 = df.parking_spaces.value_counts()[2]\nps3 = df.parking_spaces.value_counts()[3]\nps4 = df.parking_spaces.value_counts()[4]\nps_5 = df.parking_spaces.value_counts()[5]+[6]+[7]+[8]+[10]\npspace = [ps0,ps1,ps2,ps3,ps4,ps_5]\nfig = plt.figure() \nfig, ax1 = plt.subplots(figsize=(8,8))\nax1.set_title(\"Properties Distribution by Parking Spaces\",fontsize=20)\nlabels='No Parking Spaces','1 Parking Space', '2 Parking Spaces', '3 Parking Spaces','4 Parking Spaces','More than 4 Parking Spaces',\nax1.pie(pspace,labels=labels, autopct='%1.1f%%',startangle=90)\nplt.show()","52125b2d":"df.floors.unique()","46006169":"df.floors = df.floors.replace('-','0')","8aa629b0":"df.floors.unique()","7d0d7171":"df.floors = df.floors.astype(int)","acf6107b":"df.info()","06c93c6a":"df.floors.describe()","18286cca":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.floors)\nplt.subplot(1, 2, 2)\nsns.distplot(df.floors,bins = 10)\nplt.show()","a75bede8":"df.query('floors>300')","cf4ab9c7":"df.floors = df.floors.replace(301,3)","78901ffb":"df.floors.value_counts()","1afcddda":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.floors,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.floors,bins = 10,color='green')\nplt.show()","d6a4aa16":"len(df)","e3abea70":"house = df.floors.value_counts()[0]\napart = len(df)-house\ntp = [house,apart]\nfig = plt.figure() \nfig, ax1 = plt.subplots(figsize=(8,8))\nax1.set_title(\"Types of Properties Offered\",fontsize=20)\nlabels='Houses','Apartments'\nax1.pie(tp,labels=labels, autopct='%1.1f%%',startangle=90)\nplt.show()","33128294":"df.animal.unique()","d47c6282":"df.furniture.unique()","6e147c71":"df.animal = df.animal.replace('acept','true')\ndf.animal = df.animal.replace('not acept','false')\ndf.animal.unique()","a1f1601a":"df.furniture = df.furniture.replace('furnished','true')\ndf.furniture = df.furniture.replace('not furnished','false')\ndf.furniture.unique()","b0e62334":"df[['hoa','rent_amount','property_tax','fire_insurance']]","5c35536f":"df[['hoa','rent_amount','property_tax','fire_insurance']].describe().T","e17a1594":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.hoa)\nplt.subplot(1, 2, 2)\nsns.distplot(df.hoa)\nplt.show()","e353b4b0":"df.query('hoa>10000')","3b405bb2":"df = df.query('hoa<10000')","5d365abf":"df.shape","0ed3ca7b":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.hoa,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.hoa,color='green')\nplt.show()","f27bf1da":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.rent_amount)\nplt.subplot(1, 2, 2)\nsns.distplot(df.rent_amount)\nplt.show()","122daed4":"df.query('rent_amount>20000')","6025cbdb":"df = df.query('rent_amount<20000')","8a2b4e48":"df.shape","7e4af548":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.rent_amount,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.rent_amount,color='green')\nplt.show()","35b2d636":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.property_tax)\nplt.subplot(1, 2, 2)\nsns.distplot(df.property_tax)\nplt.show()","17828ecf":"df.query('property_tax>300000')","687a3639":"df = df.query('property_tax< 300000')","6c846e8b":"df.shape","ff35461a":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.property_tax)\nplt.subplot(1, 2, 2)\nsns.distplot(df.property_tax)\nplt.show()","62ad0f23":"df.query('property_tax> 20000')","9b69301e":"df = df.query('property_tax< 20000')","4c78939f":"df.shape","0f197006":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.property_tax,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.property_tax,color='green')\nplt.show()","3cf8c92a":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.fire_insurance,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.fire_insurance,color='green')\nplt.show()","f4bc6291":"plt.figure(1, figsize=(15,6))\nplt.subplot(1, 2, 1)\nsns.boxplot(df.total,color='yellow')\nplt.subplot(1, 2, 2)\nsns.distplot(df.total,color='green')\nplt.show()","a7701d86":"plt.figure(figsize=(12,8))\nsns.heatmap(df.corr(), annot=True, cmap=\"Spectral\")\nplt.show()","1bc4d73c":"df.groupby('city')['rent_amount'].mean().sort_values(ascending = False)","fe0e764b":"plt.figure(figsize=(10,4))\nax = sns.barplot(x= df.city, y= df.total, ci= False, estimator= np.median,order=[\"S\u00e3o Paulo\", \"Rio de Janeiro\",\n                                                                                 \"Belo Horizonte\",\"Campinas\",\"Porto Alegre\"])\nplt.xticks(rotation=0)\nax.set_title('Cost to Rent in 5 Brazilian Cities', fontsize=18 )\nax.set_xlabel('City',fontsize = 12)\nax.set_ylabel('Total',fontsize=12)\nfor p in ax.patches:\n  height = p.get_height()\n  ax.text(p.get_x()+p.get_width()\/2,height +3,'{:1.2f}'.format((height)),ha='center')\nplt.show()","d27a4b20":"df['cost_m2'] = (df.rent_amount\/df.area)\ndf","256b2ed0":"df.groupby('city')['cost_m2'].mean().sort_values(ascending = False)","cdd33432":"df = df.explode('cost_m2')\ndf.preco_m2 = df['cost_m2'].astype(int)\nplt.figure(figsize=(10,4))\nax = sns.barplot(x= df.city, y= df.cost_m2, ci= False, \n            estimator= np.mean,order=[\"S\u00e3o Paulo\", \"Rio de Janeiro\",\n                                      \"Porto Alegre\",\"Belo Horizonte\",\"Campinas\"])\nplt.xticks(rotation=0)\nax.set_title('Most expensive m\u00b2 of 5 Brazilian Cities', fontsize=18 )\nax.set_xlabel('City',fontsize = 12)\nax.set_ylabel('R$\\m\u00b2 ',fontsize=12)\nplt.yticks(range(0,40,5))\nplt.ylim((0,40))\nfor p in ax.patches:\n  height = p.get_height()\n  ax.text(p.get_x()+p.get_width()\/2,height,'{:1.2f}'.format((height)),ha='center')\nplt.show()","06437241":"animal = df.groupby('animal')['rent_amount']\ndisplay(animal.agg(['mean', 'median']))","355b4a66":"plt.figure(figsize= (15,5))\nsns.barplot(x= df.city, y= df.rent_amount, hue=df.animal, ci= False, estimator= np.median,\n            order=[\"S\u00e3o Paulo\", \"Rio de Janeiro\",\"Belo Horizonte\",\"Campinas\",\"Porto Alegre\"])\nplt.show()","8734b770":"ax = sns.countplot(df['animal'], hue = df['city'])\nax.figure.set_size_inches(12, 8)\nax.set_xlabel('Accept Animals?', fontsize=13)\nax.set_ylabel('Qty Properties', fontsize=13)\nax.set_xticklabels(['Yes','No'], fontsize=13)\nplt.show()","7a2eee4b":"sns.heatmap(df.groupby(['furniture','animal']).size().unstack(), annot=True, fmt=\"d\", cmap=\"YlGnBu\");\n","dcbcea22":"df1 = df[df['city']=='S\u00e3o Paulo']\ndf2 = df[df['city']=='Rio de Janeiro']\ndf3 = df[df['city']=='Porto Alegre']\ndf4 = df[df['city']=='Campinas']\ndf5 = df[df['city']=='Belo Horizonte']\n\nf, axes = plt.subplots(1, 5,figsize=(15,8))\nsns.despine(left=True)\nsns.regplot(x=df1['hoa'], y=df1['rent_amount'], line_kws={'color': 'r'}, ax=axes[0]).set(title='S\u00e3o Paulo')\nsns.regplot(x=df2['hoa'], y=df2['rent_amount'], line_kws={'color': 'r'}, ax=axes[1]).set(title='Rio de Janeiro')\nsns.regplot(x=df3['hoa'], y=df3['rent_amount'], line_kws={'color': 'r'}, ax=axes[2]).set(title='Porto Alegre')\nsns.regplot(x=df4['hoa'], y=df4['rent_amount'], line_kws={'color': 'r'}, ax=axes[3]).set(title='Campinas')\nsns.regplot(x=df5['hoa'], y=df5['rent_amount'], line_kws={'color': 'r'}, ax=axes[4]).set(title='Belo Horizonte')\nplt.subplots_adjust(top=0.92, bottom=0.08, left=0.10, right=0.95, hspace=0.25, wspace=0.35)\n\nplt.show()","0b9eef85":"df.groupby('furniture')['rent_amount'].mean().sort_values(ascending = False)","085b81be":"plt.figure(figsize=(15,5))\nsns.catplot(x ='city',y ='rent_amount',col = 'furniture',kind= 'bar',ci= False, data = df)\nplt.show()","95582574":"plt.figure(figsize=(10,4))\nsns.barplot(x= 'parking_spaces', y= 'rent_amount', data= df, ci= False)\nplt.show()","e976ef55":"ax = sns.barplot(x='rooms', y='area', data = df, \npalette = 'GnBu_d')\nax.figure.set_size_inches(12, 8)\nax.set_xlabel('Rooms', fontsize=13)\nax.set_ylabel('Area', fontsize=13)\nplt.show()","addbd7ae":"ax = sns.barplot(x='bathroom', y='area', data = df, \npalette = 'GnBu_d')\nax.figure.set_size_inches(12, 8)\nax.set_xlabel('Bathroom', fontsize=13)\nax.set_ylabel('Area', fontsize=13)\nplt.show()","dbaf6780":"dfcor = df[['bathroom','rooms','area']]\nplt.figure(figsize=(6,6))\nsns.set(font_scale=1)\nsns.heatmap(dfcor.corr(), annot=True, cmap=\"flare\")\nplt.show()","c16d53b0":"df['rent_class'] = pd.cut(x=df['rent_amount'], bins=[450, 1530, 2661, 5000, 20000], \n                          labels=['cheap', 'medium', 'expensive', 'very expensive'], include_lowest=True)","6ec19de3":"df.head()","3688f948":"plt.figure(figsize=(12,8))\nax = df['rent_class'].value_counts().sort_values().plot(kind=\"barh\")\ntotals= []\nfor i in ax.patches:\n    totals.append(i.get_width())\ntotal = sum(totals)\nfor i in ax.patches:\n     ax.text(i.get_width()+.3, i.get_y()+.20, \n     str(round((i.get_width()\/total)*100, 2))+'%', \n     fontsize=10, color='black')\nax.grid(axis=\"x\")\nplt.suptitle('Rental Classes', fontsize=20)\nplt.show()","2dbacdfe":"df['5rooms_more'] = (df.rooms)\ndf.loc[df['5rooms_more'] > 4, '5rooms_more'] = 5\nplt.figure(figsize=(15,6))\nax=sns.countplot(x =df['5rooms_more'] , hue = df['city'], data=df)\nplt.xlabel(\"Rooms\", fontsize=12)\nplt.ylabel(\"Properties Qty\", fontsize=12)\nplt.title(\"Properties by Rooms: 1, 2, 3, 4 and above 5 rooms\", fontsize=20)\nplt.show()","f846e449":"dfcor2 = df[['hoa','rent_amount','property_tax','fire_insurance','total']]\nplt.figure(figsize=(10, 10))\nsns.heatmap(dfcor2.corr(), annot=True, cmap=\"Oranges\")\nplt.show()","cbb91724":"The observations are distributed between 1 and 8 floors (evaluating the 2nd and 3rd quartiles), with a maximum value of 301 floors and standard deviation of 6 floors. This maximum value is too high and needs to be better evaluated.","ebf134af":"Based on the bar chart, we can say that S\u00e3o Paulo, Rio de Janeiro and Belo Horizonte are the cities that have the highest cost of renting real estate.","7736ace9":"After ran a new analysis of the data, dispersion dropped to 134 m\u00b2 after took out areas above 10000 m\u00b2. However, there are still outliers above 1000 m\u00b2 that have some distance from the others obervations, causing dispersion yet.","7f8ddc5a":"## 3.5 Bathrooms","87f0badf":"It is noticed that the largest amount of real estate offers is in the city of S\u00e3o Paulo, with 55% of the offers.","910be202":"There is a strong correlation between the number of bathrooms and the size of the area.","ff316169":"According central deviations and dispersion values, we can see that many variables have values to be verified, such as maximum value of the area, fire insurance rate and condominium rate very far from the quartiles. Beside that, there are outliers in others several variables identified from boxplots.\nWe will analyze each variable individually, including the categorical ones.","91dfa378":"After removing the amounts above R$ 10,000, the data distribution was improved.","ac0af61c":"## 3.1 Numerics variables","bf5ceffa":"# 2. Cleaning dataset","731b7e2b":"### 3.9.2 Rent amount","b2914e8f":"## 2.1 Renaming variables","dceffc12":"It is noticed that the largest number of real estate offers are properties with up to 3 bedrooms, with 4 out of 5 properties offered having this amount of bedrooms.","499dc598":"## 3.2 City","0cb028b8":"\n## 0.1 Loading libraries","2d915329":"## 4.3 Which cities have the most expensive m\u00b2?","b6a8e2bc":"After removing the amount above R$ 30,000, we continue with amounts that strongly impacts the distribution of data.","e383cc61":"## 4.13 Contribution values to the total rent price","da30390c":"## 3.3 Area","3af01eeb":"## 3.4 Rooms","69cfa0d4":"We have the majority of offers in apartment type properties (77%).","3e5707a7":"# Exploratory Data Analysis\n## Python Introduction Course \n## Final task group members: Camila Cancio, Erick Garcia & Others\n\n","584e799b":"## 2.2 Handling missing data ","bd8be809":"We have a new dataset with 10684 values.","ef17dfc9":"The distribution was improved after replacing the value 301 but the data are still varying between 0 and a little over 50, but we will remain with these data as they can bring us important insights.","efc36df1":"# 3. Analyzing variables distribution ","cf3cbd96":"The \"area\" variable does not have a good distribution, the observations above 10,000 m\u00b2 are outliers data biasing the average value.","40e5086d":"Carrying out a survey we found 4 data above R$ 20,000. We are going to remove them because they are very far from the others observations causing a big variation of them.","d9f46363":"The dataset has 3 values above 10000 m\u00b2. We will remove these values because they are causing a very large variation in the data.","38506421":"Although we have values above R$ 25,000 away from the others observations, we will remain with them in the dataset, as this variable is a sum of the values of hoa, rent_amount, property_tax and fire_insurance; and these rates have already undergone an analysis and pre-treatment.","556ca200":"Analyzing by city we can say that in Porto Alegre and Rio de Janeiro the presence of animals does not increase the rental price.","ac2e9ee8":"## 4.5 What is the relationship between furnished properties and animals acceptance?","913f39d3":"From the heatmap above, we can identify the following most significant information:\n\n1. The floors variable has very little influence on the other variables;\n2. The variable rent amount and fire insurance are those that have the highest correlation with the total variable, indicating a possible greater contribution;\n3. The value of the fire insurance is almost entirely proportional to the value of the rent amount;\n4. Hoa value has little correlation with the characteristics of the property. \n","4212c91d":"We noted that approximately each rental class represents 1\/4 of the rental class of the entire dataset.","fcc948a5":"In the boxplot we can see values above 4 rooms away from the others observations.","a5cb484c":"Eliminating amounts above R$ 20,000.","0614adb3":"## 4.2 What are the most expensive cities to live in?","718d42d4":"According to the creator of the dataset, it refers to residential properties. Conducting a survey we found that the largest residential building in Brazil is located on the northern coast of Santa Catarina, Camburiu, and has 81 floors. Floor 301 is a property located in Belo Horizonte. We will replace the value 301 by 3 because we believe that the number of the apartment was mistakenly entered instead of the floor.","91ab4b2b":"### 3.9.5 Total","0f7966f3":"Noticed that 60% of the properties are not furnished and accept animals, being an strong indication of the relationship between acceptance of animals and the fact that the property is not furnished.","64911fe7":"We noted values above R$ 10,000 that are impacting the distribution.","834ea41e":"## 4.11 Rental Classes","2d74ea20":"## 4.7 Have furnished properties a higher rent value?","ae05e200":"The variable \"floors\" was defined as qualitative and we transformed it into quantitative to facilitate data analysis.","884811ef":"Let's check observations with values above R$ 20,000.","15000919":"S\u00e3o Paulo followed by Rio de Janeiro have the most expensive m\u00b2 in the regions, continuing to be the most expensive cities. However, analyzing this calculation of the value per square meter, we realize that the cities of Porto Alegre, Belo Horizonte and Campinas changed in positions, showing, for example, that Porto Alegre is more expensive per m\u00b2 than Belo Horizonte for renting a property.","da0ba6a8":"Now let's look at the variables \"hoa\", \"rent_amount\", \"property_tax\" and \"fire_insurance\".","d4144066":"Searching in the dataset we found 102 properties with a number of bathrooms greater than 6. As it is a considerable volume of data, we will remain with them in the dataset.","eec9241c":"The maximum value for this variable is high. Let's take a closer look.","3c89818b":"Using the descriptive statistics of the rent value variable, we will create a new target variable: rental class (rent_class). It categorizes the rent value into cheap, medium, expensive and very expensive.","9fb0364e":"We can see that we have no missing data (DA) in our dataset.","f8f08afc":"It was noted more properties for rent that accept animals in all cities.","45c796a5":"Up to 5 rooms there is an influence on the area, however above 5 rooms there is a tendency of stabilization in the size of the area.","5ecea451":"# 0. Loading libraries and dataset","c4f54456":"## 3.8 Animal & Furniture","d63c6b98":"## 4.8 Does the number of parking spaces impact the rent amount?","dac0e6ac":"## 0.2 Loading dataset","d231c83b":"## 3.7 Floors","721448e2":"We have a maximum value of 46335 m\u00b2, a minimum value of 11 m\u00b2 and a standard deviation of 537 m\u00b2, which shows a very large dispersion of the data.","4c689905":"We noted that the fire insurance variable has a good data distribution.","946797cd":"We realized that the variable \"floors\" has the symbol \"-\", which according to the creator of the dataset are values to designate the house type property. So that, to allow a better analysis on the variable, we will replace the symbol \"-\" with the value 0.","f0420d8c":"\nYes, furnished properties are on average R$ 1,300 more expensive. Evaluating by cities, we noticed in the graph that the pattern is the same: furnished properties are more expensive.","63a1a698":"The scatter graphs with the regression line presented by the model show that Porto Alegre has a greater linearity trend between the increase of the hoa value and the increase of the rent value. However, due to the dispersions, it is clear that there is no linear correlation showing that we can assure that properties with a higher hoa rate have the highest rental value.","dd62af0a":"# 4. BIVARIATE ANALYSIS","b9a67d37":"The variable \"city\" has no missing data, it is nominal qualitative type and the values are typed correctly. Therefore, they do not need any pre-treatment.","e22ff160":"### This dataset is related to five major metropolitan cities in Brazil and contains 10692 properties for rent with 13 different characteristics (variables).\n\n1. city: city where the property is located (categorical)\n2. area: area of the property in m\u00b2 (continuous)\n3. rooms: number of rooms (discrete)\n4. bathroom: number of bathrooms (discrete)\n5. parking spaces: parking spaces (discrete)\n6. floor: floor (discrete)\n7. animals: do you accept animals? (categorical)\n8. furniture: furnished? (categorical)\n9. hoa: condominium fee (continuous)\n10. rent amount: rent amount (continuous)\n11. property tax: property tax (continuous)\n12. fire insurance (R $): fire insurance (continuous)\n13. total: sum of all fees (continuous)","d2277671":"Yes. Properties that accept animals are on average R$ 500.00 more expensive.","61a4028c":"Searching in the dataset we found 319 properties with a parking space greater than 5. As it is a considerable volume of data, we will remain with them in the dataset.","55e3d35b":"Searching in the dataset we found 406 properties with a number of rooms greater than 4. As it is a considerable volume of data, we will remain with them in the dataset.","eb3d9899":"The parking spaces variable shows a very interesting distribution, which requires further analysis with another variable, such as rent amount and city. About 1 in 4 properties do not have a garage, and the largest offer of properties is with 1 parking space followed by properties without a parking space. Properties with more than 1 parking space are less than half of the properties offered.","a525a14c":"After removing the observations above R$ 20,000 the data distribution was improved but we continue with observations that impact the variation, but we will remain with them in the dataset as they can provide us with interesting insights.","9e32a141":"Before we had a standard deviation of 537 m\u00b2, now we have 130 m\u00b2. The data are less dispersed.","c1440a81":"## 4.4 Does having animals impact prices?","330f4cfa":"The maximum value of this variable is very high, far from the average. Let's take a closer look.","1e250f4f":"We found 6 values greater than 1000 m\u00b2 that continue as outliers. We will not remove the value of 1020 m\u00b2 because it is closer to the others observations.","6d021510":"Observed in the code above that the \"floors\" attribute is classified as \"object\", which is a categorical attribute. So we will convert it to numeric values \"dtype = int64\".","9c2e7e52":"The graph shows us that the number of parking spaces over 6 is far from the others observations.","561e3229":"### 3.9.4 Fire insurance","18440606":"The observations are distributed between 1 and 2 (evaluating the median and the 3 quartile), with a maximum value of 10 parking spaces and standard deviation of 1.5 parking spaces.","3f8b29a6":"## 4.1 Correlations","5a6652a4":"The graph shows us that the number of bathrooms above 6 is far from the others observations.","120913c7":"In addition to the rent amount, fire insurance showed a strong correlation with the total amount. This may be due to the fact that the total amount of the rent may be strongly related to the value of the apartment to be insured.","aa070fec":"### 3.9.3 Property tax","94e298a4":"Conducting a survey we found 9 data above R$ 10,000. We are going to remove them as they are very far from the data set causing a great variation of them.","ba7f6b51":"We noted values above R$ 30,000 that are impacting the distribution of data.","5d07a147":"Yes, there is an influence on the rent value up to a limit of 7 parking spaces. However, when we have 8 parking spaces the rent value is a little less than 7 and with 10 parking spaces it is less than 2 parking spaces. That is, from 8 parking spaces the amount of parking spaces no longer interferes with the rent amount.","9dd5c57e":"We noted values above R$ 20,000 that are impacting the data distribution.","880ccfc5":"Carrying out a survey we found 1 data above R$ 30,000. We are going to remove it because it is very far from the others observations causing a big variation of them.","3e9e38b0":"They are two categorical variables. We will make the following substitutions:\n\n1. 'acept' and 'not acept' for true and false, respectively.\n2. 'furnished' and 'not furnished' for true and false, respectively.\n","db7efbcb":"According to bar chart, 1 to 3 bedroom properties are in high demand among people looking to rent property. S\u00e3o Paulo has the majority of the properties.","4deea6ee":"## 4.6 Properties with a higher hoa rate have the highest rent amount?","b5477ad4":"As the same way the number of rooms, it can be seen that the major number of real estate offers are with up to 2 bathrooms, with 7 out of 10 properties offered having this amount of bathrooms.","4c8d3577":"# 1. First approaching","2880614e":"After removing the amounts above R$ 20,000, the data distribution was improved.","8ae4d3de":"## 4.9 What is the influence of the number of rooms on area size?","0c1659ef":"## 4.12 Available properties by number of rooms","cba44358":"## 3.9 Others variables","7a3a63d3":"### 3.9.1 Hoa","f4406a41":"## 4.10 What is the influence of the number of bathrooms on the area?","11f37fc6":"The correlation matrix above proves that the variable \"bathroom\" actually has a little bigger influence on the value of the area than the variable \"rooms\".","8070f3ad":"## 3.6 Parking Spaces"}}