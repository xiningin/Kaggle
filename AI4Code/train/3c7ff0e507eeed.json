{"cell_type":{"8b516e59":"code","2aa564af":"code","b7b85bf3":"code","893de5c5":"code","eb79862b":"code","128e4afc":"code","d90ff456":"code","46d2be5c":"code","fa6b12f0":"code","ce3048eb":"code","a2c4088d":"code","0954fd43":"code","1435f8dd":"code","4c0cefb1":"code","1c4db613":"code","a25be51d":"code","bc6808ed":"code","4dadd53d":"code","ebc9676e":"code","280435e3":"code","4a04b844":"code","6e6ac5f0":"code","36e020a7":"code","7df09af7":"code","0dc5cb86":"markdown","5b98cfda":"markdown","06f0d728":"markdown","70819159":"markdown","aa5ebb69":"markdown","85126996":"markdown","93ad272a":"markdown","136b9a5a":"markdown","b2d598a6":"markdown","47b47ea5":"markdown","c745f4cc":"markdown","b0b347ff":"markdown"},"source":{"8b516e59":"import numpy as np\nimport pandas as pd\nimport datetime\nimport math\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","2aa564af":"# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","b7b85bf3":"dateParser = lambda x: pd.datetime.strptime(x, '%Y-%m-%d')\n\nclima = pd.read_csv('\/kaggle\/input\/climate-change-earth-surface-temperature-data\/GlobalLandTemperaturesByCountry.csv', \n                    parse_dates=['dt'],\n                    date_parser=dateParser,\n                    low_memory=False\n                   )","893de5c5":"clima.head()","eb79862b":"clima.columns = ['fecha', 'temp', 'incertidumbre', 'pais']","128e4afc":"clima.fecha.describe()","d90ff456":"mexico = pd.DataFrame(clima[clima.pais == 'Mexico'])\nmexico.head()","46d2be5c":"mexico['year'] = pd.DatetimeIndex(mexico['fecha']).year\nmexico['mes'] = pd.DatetimeIndex(mexico['fecha']).month","fa6b12f0":"mexico['decada'] = (pd.DatetimeIndex(mexico.fecha).year-1)\/10\nmexico.decada = mexico.decada.apply(lambda x: math.floor(x))*10","ce3048eb":"mexico.head()","a2c4088d":"plt.style.use('fivethirtyeight')","0954fd43":"def temppormes(rango):\n    plt.figure(figsize=(20, 8))\n    for year in rango:\n        ini = datetime.datetime.strptime('{}-01-01'.format(year), '%Y-%m-%d')\n        fin = datetime.datetime.strptime('{}-12-31'.format(year), '%Y-%m-%d')\n\n        rango = mexico[(mexico.fecha >= ini) & (mexico.fecha <= fin)]\n\n        plt.plot(rango.mes, rango.temp, label=year)\n\n\n    # plt.legend(loc='best')\n    plt.title('Comparativa de temperaturas')\n    plt.xlabel('Fecha')\n    plt.ylabel('Temp \u00b0C')\nprint()","1435f8dd":"years = [1835, 1950, 2013]\ntemppormes(years)","4c0cefb1":"temppormes(range(np.min(mexico.year), np.max(mexico.year)))","1c4db613":"meant = mexico.groupby(['year'])['temp'].mean()","a25be51d":"plt.figure(figsize=(20, 8))\nplt.title('Temperatura promedio anual')\n\nx = np.arange(0, len(meant))\nxrange = np.arange(0, len(meant)+10, 10)\n\ncoef = np.polyfit(x, meant, 1)\npoly1d_fn = np.poly1d(coef)\n\nplt.plot(x, meant)\nplt.plot(x, poly1d_fn(x), ls=\":\")\n\nplt.xticks(xrange, np.arange(1835, 2020, 10), rotation=90)\nplt.xlabel('D\u00e9cada')\nplt.ylabel('Temp \u00b0C')\nprint()","bc6808ed":"meant = mexico.groupby(['decada'])['temp'].mean()","4dadd53d":"plt.figure(figsize=(20, 10))\nplt.title('Temperatura promedio anual por d\u00e9cada')\nx = np.array(range(1, int(np.floor((2010-1820)\/10)+1)))\n\ncoef = np.polyfit(x, meant, 1)\npoly1d_fn = np.poly1d(coef)\n\nplt.plot(x, meant, marker='o', mec='darkred', mfc='orange', mew=2)\nplt.plot(x, poly1d_fn(x), ls=\":\")\n\nplt.xticks(x, np.arange(1830, 2020, 10), rotation=90)\nplt.xlabel('D\u00e9cada')\nplt.ylabel('Temp \u00b0C')\nprint()","ebc9676e":"plt.figure(figsize=(20, 10))\ng = sns.boxplot(x='decada', y='temp', data=mexico, color=\"teal\", linewidth=2)\ng.set_xticklabels(g.get_xticklabels(), rotation=90)\n\ng.set_xlabel(\"D\u00e9cada\")\ng.set_ylabel(\"Temp\u00b0C\")\ng.set_title('Rango de Temperaturas por D\u00e9cada')\nprint()","280435e3":"line_color = ['red',    'blue',   'red',    'green', 'goldenrod',     'orange',\n              'orchid', 'indigo', 'brown', 'black', 'cadetblue', 'darkslategrey'\n             ]\nnombre_meses = ['Enero', 'Febrero', 'Marzo',      'Abril',   'Mayo',      'Junio',\n                'Julio', 'Agosto',  'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'\n               ]","4a04b844":"def mesporanos(meses, lw=4):\n    for mes in meses:\n        rango = mexico[mexico.mes == mes]\n        x=np.arange(1, len(rango)+1)\n\n        coef = np.polyfit(x, rango.temp, 1)\n        poly1d_fn = np.poly1d(coef)\n\n        plt.plot(x, rango.temp, c=line_color[mes-1], label=nombre_meses[mes-1], lw=lw)\n        plt.plot(x, poly1d_fn(x), c=line_color[mes-1], ls=\":\", lw=lw)\n\n        plt.xticks(np.arange(1, len(rango)+10, 10), np.arange(1835, 2020, 10), rotation=90)\n\n\n    plt.legend(loc='best')\n    plt.xlabel('A\u00f1o')\n    plt.ylabel('Temp \u00b0C')\n\n    plt.tight_layout(pad=4)\n    plt.suptitle('Comparativa de temperaturas')","6e6ac5f0":"plt.figure(figsize=(20, 12))\nmeses = [7]\n\nmesporanos(meses)","36e020a7":"plt.figure(figsize=(20, 12))\nmeses = [3, 6, 9, 12]\n\nmesporanos(meses)","7df09af7":"plt.figure(figsize=(15, 20))\n\ncharts = [[6, 7, 8],\n          [5, 9],\n          [4, 10],\n          [3, 11],\n          [2, 12]]\n\nfor i in range(len(charts)):\n\n    plt.subplot(321+i)\n    meses = charts[i]\n\n    mesporanos(meses, lw=1)\n\nplt.tight_layout(pad=4)\nplt.suptitle('Comparativa de temperaturas')\nprint()","0dc5cb86":"So looks like there's a difference in temperature from 1930s to 2010s, let's plot all the years ","5b98cfda":"So it clearly shows that in july, there's an uptrend, is it the same on other months?","06f0d728":"Decade was a bit trickier\n\nThis will report decade as 1930's 1980's 2010's an so on\n\nThere's a lot of discussion if a decade or century starts on the 0, or if it starts at year one. In this case, I decided it starts at year one, so the 1980s will be from 1981 to 1990.","70819159":"# Mean temperature per year","aa5ebb69":"# Temperatura range per decade","85126996":"# Temperature per month over the years\n\nI wanted to see how much the temperature has changed compared to the same month over the years, so, lets see first a month alone:","93ad272a":"Playing around with this data, I found something interesting, there's a simmetry along month 7, that is, june(6), july(7) and august(8) have more or less the same temperatures, so may(5) and september(9), april(4) and october(10), march(3) and november(11); and january(1), february(2) and december(12) are quite similar.","136b9a5a":"# Temperature change over the years\n\nTo start, I willl plot a simple chart that compares the average temperature by month for three years, the first year on record, the last year, and something in between","b2d598a6":"So clearly there's a channel of about 6\u00b0C in the coldest months, and ~3\u00b0C on the hottest months","47b47ea5":"Since I live in Mexico, I want to explore how temperatures have changed since 1835 which is the first record for Mexico.","c745f4cc":"We'll be doing some analysis per year, month, and decade, so let's create the columns","b0b347ff":"# Temperature per decade"}}