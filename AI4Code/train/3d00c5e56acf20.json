{"cell_type":{"272879b2":"code","03168306":"code","f76e22c5":"code","f3045cc1":"code","b58b4ef0":"code","18801436":"code","5db644b8":"code","6cd027f9":"code","e8e67e6e":"code","d612b6c5":"code","930c5bbf":"code","92e4da85":"code","f13554a1":"code","c0da5369":"code","6c31d931":"code","b36812d8":"code","ad5a2937":"code","e75953ed":"code","b85a4e4c":"code","bad3e84b":"code","7a16aeb3":"code","fb12dfcd":"code","8955568c":"code","8e47b89e":"code","6128552d":"code","52a80a7f":"code","0375b9fd":"code","03757bfd":"code","c529dec0":"code","b665bf5c":"code","98c3f1e7":"code","c9368560":"code","9eaba23a":"code","466f0d10":"code","6e5056d8":"code","bb700beb":"code","cf8955ab":"code","37d91be8":"code","12462f7d":"code","623a0165":"code","4b140966":"code","8d699cf7":"code","9a26d3a4":"code","1994d81b":"code","deb9f96d":"code","df8948f6":"code","b98e6b0b":"markdown","e24b8497":"markdown","fc3f4631":"markdown","bbb4ec16":"markdown","c30b6df9":"markdown","ee951a9c":"markdown","f9e977c3":"markdown","2f3e9b87":"markdown","c4d9ed83":"markdown","f8e2398e":"markdown","1a398ee4":"markdown","4a58b72c":"markdown","1f9bad2a":"markdown","563c90dd":"markdown","2eaad004":"markdown","604ddafb":"markdown","4fefb034":"markdown","e8be2257":"markdown","324b32d8":"markdown","647a3dd8":"markdown","88825677":"markdown","b155e720":"markdown","fd4b8b32":"markdown","b36d6994":"markdown","149687cb":"markdown","593b219d":"markdown","492dfb31":"markdown","641e773d":"markdown","5dc11b68":"markdown","f6491788":"markdown","2de49109":"markdown","3f4b0e97":"markdown","a9298d7d":"markdown","c1e6edde":"markdown","3f9db4a4":"markdown","1ef52bee":"markdown","5bb81bca":"markdown","cf127efc":"markdown","5a582d57":"markdown","2232bcd5":"markdown","436b9848":"markdown","7c952fba":"markdown","f2428884":"markdown","6aaea81b":"markdown","5fba13bd":"markdown","7dbc02bf":"markdown","b669e2d1":"markdown","285aa2a4":"markdown","782cbdba":"markdown","ada0171b":"markdown","eae2363c":"markdown","b0b51559":"markdown","827742d8":"markdown","c4e8ed29":"markdown","f8ad5fb2":"markdown","e5f73cdd":"markdown"},"source":{"272879b2":"import pandas as pd\nimport numpy as np\n%matplotlib inline\nimport matplotlib.pyplot as plt\nfrom tqdm.notebook import tqdm\nimport seaborn as sns\nfrom scipy import stats as st\nsns.set_style(\"darkgrid\")\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n","03168306":"game_df = pd.read_csv('..\/input\/videogamesales\/vgsales.csv')\ngame_df.head()","f76e22c5":"game_df.info()","f3045cc1":"game_df.describe().T","b58b4ef0":"game_df.columns","18801436":"game_df.columns = game_df.columns.str.lower()\ngame_df.columns","5db644b8":"game_df.duplicated().sum()","6cd027f9":"game_df.isna().mean().sort_values(ascending=False)","e8e67e6e":"game_df.isna().mean().sort_values(ascending=False).plot(\n                                                  kind='bar', figsize=(15,5), \n                                                  grid=True, color='steelblue', \n                                                  edgecolor='black', linewidth=2\n                                                  )\nplt.title('Visualisation of NaNs')\nplt.xlabel('Name of features')\nplt.ylabel('Share of NaN')\nplt.show()","d612b6c5":"plt.figure(figsize=(15, 5))\nplt.hist(game_df.loc[game_df['publisher'].isna(), 'year'], \n         color='steelblue', edgecolor='black', linewidth=2\n        )\nplt.title('Distribution of Nan by Year')\nplt.xlabel('')\nplt.show()","930c5bbf":"len(game_df[game_df['year'].isna()])","92e4da85":"game_df['year'].unique()","f13554a1":"game_df['year'] = game_df['year'].fillna(0)\nprint('NaNs in year - {}'.format(\n                                                   game_df['year'].isna().sum())\n                                                   )","c0da5369":"print('Nan in publisher', len(game_df[game_df['publisher'].isna()]))\n","6c31d931":"game_df[game_df['publisher'].isna()].head()","b36812d8":"game_df['publisher'] = game_df['publisher'].fillna('unknown')","ad5a2937":"game_df.info()","e75953ed":"game_df['year'] = game_df[game_df['year'].notna()]['year'].astype('int64')\ngame_df.info()","b85a4e4c":"game_df ['total_sales'] = (\n                          game_df['na_sales'] + \n                          game_df['eu_sales'] + \n                          game_df['jp_sales'] + \n                          game_df['other_sales']\n)","bad3e84b":"game_df_upd = game_df[game_df['year']!= 0]\ngame_df_upd.head(15)","7a16aeb3":"game_df_upd.info()","fb12dfcd":"\ngame_cross = pd.crosstab(game_df_upd['platform'], \n            game_df_upd['year'], margins=True, \n            margins_name=\"Total\", \n           ).T\ngame_cross","8955568c":"game_df_upd.groupby('year')['name'].count().plot(\n            kind='bar', y='name', figsize=(15,5), edgecolor='black'\n)\nplt.title('Number of games released from 1980 to 2016')\nplt.xticks(rotation=42)\nplt.xlabel('')\nplt.show()\n    ","8e47b89e":"game_df_upd.groupby('platform')['total_sales'].sum().sort_values(ascending=True).plot(\n            kind='barh', y='total_sales', figsize=(15,10), edgecolor='black'\n)\nplt.title('General sales of games on different platforms')\nplt.xticks(rotation=42)\nplt.xlabel('')\nplt.ylabel('')\nplt.show()\n    ","6128552d":"game_df_upd.groupby('platform')['total_sales'].sum().to_frame(\n                                                        'total_sales').sort_values(\n                                                        by='total_sales', ascending=False\n                                                        ).head(10)","52a80a7f":"list_of_platform = ['PS4', 'PC', '3DS', 'XOne']\ngames_not_new = game_df_upd.query('platform not in @list_of_platform').copy()\nborn_year = games_not_new.groupby('platform')['year'].agg(min)\ndeadline = games_not_new.groupby('platform')['year'].agg(max)\nlife_time = deadline - born_year\nlife_time.to_dict()\ngames_not_new['life_time'] = games_not_new['platform'].map(life_time)\ngames_not_new.head()\n","0375b9fd":"q75 = games_not_new['life_time'].quantile([.75])\nq25 = games_not_new['life_time'].quantile([.25])\niqr = q75 - q25\nlow_range = q25 - (1.5 * iqr)\nhigh_range = q75 + (1.5 * iqr)\nplt.figure(figsize=(15, 5))\nsns.boxplot(games_not_new['life_time'], color='steelblue')\nplt.xlim = (low_range, high_range)\nplt.title('The spread of the values \u200b\u200bof the year of life of the gaming platform')\nplt.xlabel('')\nplt.show()\n","03757bfd":"games_pivot = games_not_new.query('5 <= life_time <=15 ').pivot_table(index='platform', \n                         values='life_time').sort_values(\n                         by='life_time', ascending=False\n                        )\ngames_pivot.head(10)","c529dec0":"print('Median life of time: ', games_pivot['life_time'].median(), 'years')\nprint('Mean life of time: {:.1f}'.format(games_pivot['life_time'].mean()), 'years')\n","b665bf5c":"plt.figure(figsize=(15, 5))\nax = plt.gca()\ngames_not_new.groupby('year')['total_sales'].sum().plot(\n                                                                 legend=True, \n                                                                 title='Sales and number of releases by year'\n                                                                 )\ngames_not_new.groupby('year')['name'].count().plot(legend=True, grid=True)\n\nplt.ylabel('Number of games released \/ Sales, mln $')\nax.vlines(x=2012, linestyle='--', color='black', ymin=0, ymax=1600)\nplt.xticks(rotation=42)\nplt.xlabel('')\nplt.show()","98c3f1e7":"games_12_16 = game_df_upd.query('2012 <=year <=2016').reset_index(drop=True)\ngames_12_16.head()","c9368560":"games_12_16.info()","9eaba23a":"pd.crosstab(games_12_16['platform'], \n            games_12_16['year'],\n            margins=True, margins_name=\"total\"\n           ).sort_values(by='total', ascending=False)","466f0d10":"lead_platforms = ['PS4', 'PC', 'XOne', '3DS']\nlead_games = games_12_16.query('platform in @lead_platforms')","6e5056d8":"plt.figure(figsize=(15, 5))\nsns.barplot(y='total_sales', \n            x='year', \n            hue='platform', \n            data = lead_games,\n            hue_order = lead_platforms\n           )\n\nplt.title('Sales of games of potentially profitable platforms, mln $ ')\nplt.xticks(rotation=42)\nplt.xlabel('')\nplt.ylabel('')\nplt.show()","bb700beb":"plt.figure(figsize=(15,10))\n\nsns.boxplot(y='platform', x='total_sales',\n            data = lead_games.query('total_sales < 4')\n            ,order=lead_platforms, orient='h', \n           )\nplt.title('Spread of global sales of potentially profitable platforms, mln $ ')\nplt.xlabel('')\nplt.ylabel('')\nplt.show()","cf8955ab":"games_12_16","37d91be8":"top_games = games_12_16.pivot_table(index='genre', columns='year'\n                        ,values='total_sales',aggfunc='sum', margins=True).copy()\ntop_games.sort_values(by='All', ascending=False)","12462f7d":"games_12_16.head()","623a0165":"def diag_plot (data, column, region):\n    region_data = games_12_16.groupby([column])[region].sum().sort_values(ascending=False).head()\n    data = region_data\n    \n    data.plot(y=column, kind='bar', figsize=(15,5),\n              color=['red', 'steelblue', 'violet', 'lightgreen', 'lightblue'],\n              edgecolor='black'\n             )\n\n    \n    plt.title('Distribution of platforms by revenue')\n    plt.ylabel('')\n    plt.xlabel('')\n    plt.show()","4b140966":"diag_plot(games_12_16, 'platform', 'na_sales')","8d699cf7":"diag_plot(games_12_16, 'genre', 'na_sales')","9a26d3a4":"diag_plot(games_12_16, 'platform', 'eu_sales')","1994d81b":"diag_plot(games_12_16, 'genre', 'eu_sales')","deb9f96d":"diag_plot(games_12_16, 'platform', 'jp_sales')","df8948f6":"diag_plot(games_12_16, 'genre', 'jp_sales')","b98e6b0b":"## Exploratory data analysis","e24b8497":"#### Feature `publisher`","fc3f4631":"\n#### Converting data to other types","bbb4ec16":"#### Conclusion\nWe see that modern game production has been actively developing since 2001, and this affects the revenue. We assume that this is due to the active development of console platforms, an increase in the performance of gaming hardware, which causes an increased demand for video entertainment.\n\nLet's take the period from 2012 to 2016 - from the moment of a sharp drop in sales and the trend of a decrease in the number of games produced - in the year of the appearance of the first consoles [eighth generation](https:\/\/ru.wikipedia.org\/wiki\/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B8%D0%B3%D1%80%D0%BE%D0%B2%D1%8B%D1%85_%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D0%B5%D0%B9#%D0%92%D0%BE%D1%81%D1%8C%D0%BC%D0%BE%D0%B5_%D0%BF%D0%BE%D0%BA%D0%BE%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_(%D1%81_2012))\n\n","c30b6df9":"The leaders are PS2, PS3 and Xbox360. Wii and DS are also not far behind. \nLet us find life of time of each platform","ee951a9c":"271 NaNs in the year column. We could do some research and restore the gaps, but that's 271 lines. Replace with `0`, after processing, create a new dataframe, excluding these lines","f9e977c3":"If we look at the `Total` column, we see that the gaming industry has been actively developing since 1994.  \n\nThe peaks are in 2006 - 2011, then we see a decline and some leveling off since 2012 (from 500 to 652 games per year - close to the level of 2001 - 2006). This may be due to the development of games on mobile devices for Android or iOS - * mobile phones *, which are not in the list of platforms.\n\nTo simplify perception, we present a histogram grouped by name:","2f3e9b87":"#### Feature `year`","c4d9ed83":"## General information about data in operation","f8e2398e":"### Replacing column names.","1a398ee4":"As for genres, the most popular are action and shooter, closes the top three in the sport genre.","4a58b72c":"It is expected that Japanese users prefer RPGs (many famous RPGs originated from Japan, there is a separate subgenre - [jRPG](https:\/\/ru.wikipedia.org\/wiki\/%D0%AF%D0%BF%D0%BE%D0%BD%D1%81%D0%BA%D0%B0%D1%8F_%D1%80%D0%BE%D0%BB%D0%B5%D0%B2%D0%B0%D1%8F_%D0%B8%D0%B3%D1%80%D0%B0)),next comes action.\n\nIf Europe and America are more or less similar in preference, then Japan clearly stands out at their level.\nThe Japanese often work a lot (over [60](https:\/\/rb.ru\/story\/karoshi\/) hours per week) - with this approach - there will be no time for a home stationary console - perhaps that is why portable consoles are in the lead. In addition, Japanese housing is often small in size - choosing a portable platform will save space (there is no need to buy a monitor or TV and the console itself will not take up space)\n\nAs for RPGs, role-playing games offer the user immersion and passion for a long time, unlike shooters or action games, some immersion and juxtaposition of oneself and the character, which helps to distract from fatigue\n","1f9bad2a":"Let's look at the sales of games on various platforms in the period under review.","563c90dd":"### Colnclusion","2eaad004":"Let's convert the column names to lowercase for ease of use","604ddafb":"We see a decrease in the number of games created on the old generation consoles and an increase in production for new consoles: PS4, XOne, WiiU.\n\nAmong the portable consoles, the 3DS can be distinguished.\nPS vita (PSV), PSP - we are seeing a decline","4fefb034":"## Exploring video game users by region","e8be2257":"### Region NA","324b32d8":"![](https:\/\/i.ibb.co\/h2wfnr3\/Games-2000x1125.jpg)\n\nHistorical data on game sales, genres and platforms (for example, **Xbox** or **PlayStation**) are available from open sources. We need to identify the patterns that determine the success of the game. \n","647a3dd8":"Let's see the number of Nan of the `year` column:","88825677":"#### Cumulative sales across all regions","b155e720":"# Determination of patterns that form the success of the game","fd4b8b32":"\n\n**Promising platforms for 2017 + are Playstation 4 and Xbox One**. Nintendo's 3DS should only be considered if targeting the Japanese market. For the domestic market, the results of the European study are applicable. Accordingly, action and shooter will be promising genres - such games will most likely be in demand. Sports games are also popular - they should also be considered for marketing.\n\nPC is less promising than consoles at the moment, which may be due to the development of online services for buying games - that is, the need for physical media is no longer needed.\n\nIn this way,\n\nyou need to focus on the 8th generation PS4 and Xbox One consoles, with the first in priority, and action and shooter games","b36d6994":"\n### Analysis of the number and sales of released games for the entire period","149687cb":"Among European users, PS4 and PS3 are leaders, Microsoft's console is much less successful than in North America","593b219d":"### Analysis of games by genre","492dfb31":"In North America, the most popular platform is the X360 - where it comes from. At the same time, with the release of a new generation of consoles, the leadership goes to PS4. 3DS is the least popular console among the leaders","641e773d":"### Region JP","5dc11b68":"#### Summary\n\nPrepared the data.\n\nColumn names were converted to lower case, data types were replaced, and NaNs and duplicates were examined. The lines were decided not to be deleted, excluded via `query ()`. Added additional column `total_sales` to the dataframe.","f6491788":"#### Colnclusion\n\nPromising platforms are PS4, XOne, 3DS and PC. Despite the fact that we see a general decline - the leaders and the distribution of profits do not change. The PS4 and XOne are developing in about the same way, with the PS4 selling slightly better due to the availability of exclusive games, while Miscrosoft's policy is to play on the PC as well. The 3DS platform is also selling well, the PC is inferior to the console versions, which is associated with the need to update the *hardware* of the computer, which is much more expensive than buying a console\n\nTo eliminate outliers, when selecting values \u200b\u200bfor each platform, we will limit the total sales","2de49109":"I don not like Nan. Let us change it to `Unknown`","3f4b0e97":"## Summary\n\n- at first glance, no anomalies were found\n- in the columns `Year`,` Publisher` - We will study the passes and decide what to do with them.\n- it is necessary to replace the data in the `Year` column -` float` with `int`. `datetime` does not need to be entered\n- for the rest of the columns, additional study is no needed - good types of data","a9298d7d":"Long-lived platforms include DS, Xbox360, PS2 and PS3, Wii. The lifespan of the platform is 9 years based on this estimate. At the same time, it should be understood that this does not mean a period of release of new [generations of consoles](https:\/\/ru.wikipedia.org\/wiki\/%D0%98%D0%B3%D1%80%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D1%80%D0%B8%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0)- it means release time games for these platforms. On average, generations change once every 7 years.\n\nDS wins over with its mobility and possibly plays on the nostalgia of grown-up gamers. When calculating, we excluded PCs and modern consoles such as PS4, Xbox One, 3DS. The PC as a platform exists independently - the only difference is in the system requirements for games.\n\nLet's see how sales have changed in relation to the number of games released.","c1e6edde":"### Colnclusion","3f9db4a4":"### Loading and previewing data","1ef52bee":"No duplicates were found. You need to go to passes and their processing","5bb81bca":"### Counting and Handling NaNs","cf127efc":"### Region EU","5a582d57":"Unfortunately, most of the gaps have been observed since 2000. This cannot be attributed to the absence of internet of other issues.","2232bcd5":"The most popular genres are action and shooter, but puzzle is disappearing completely. Also, the popular genres include RPG, platform and sports. The largest drop in revenue was received by the action genre, shooter and RPG are developing more steadily","436b9848":"We observe NaN in the `Year`,`Publisher` ","7c952fba":"Let's write a charting function for popular genres and platforms by region:","f2428884":"## Conclusion","6aaea81b":"Japanese users prefer consoles from Nintendo and Sony. At the same time, as many as two portable consoles entered the top 5. Japanese users prefer local console makers","5fba13bd":"The gaming industry has been actively developing since 1994. It should be noted that the ESRP rating has been used since 1993. The peaks are in 2006 - 2011, then we see a decline and some leveling off since 2012 (from 500 to 652 games per year - close to the level of 2001 - 2006). This may be due to the development of games on mobile devices for Android or iOs. Over the past years, the rate of development has been falling, and profits have been falling.\n\nThe median lifespan of the platform is 10 years, while the time cycle for the announcement of a new console is approximately 6-7 years\n\n\nPromising platforms are PS4, XOne, 3DS and PC. Despite the fact that we see a general decline - the leaders and the distribution of profits do not change. PS4 and XOne are developing in a similar fashion, with PS4 selling slightly better due to the availability of exclusive games, while Miscrosoft's policy is to play on PC as well. The 3DS platform is also selling well, the PC is inferior to the console versions, which is associated with the need to update the hardware of the computer, which is much more expensive than buying a console\n\nThe biggest drop in revenue was seen in the action genre, shooter and RPG are developing more steadily. At the moment, shooter is among the best sellers, but approximately equal to action. Thus - users are interested in action, RPG and shooter","7dbc02bf":"We will not delete lines. Exclude from analysis via `query ()`","b669e2d1":"\nLet's replace the data types in the `year_of_release` columns with an integer one.","285aa2a4":"### data describing:\n- `Rank` - Ranking of overall sales\n\n- `Name` - The games name\n\n- `Platform` - Platform of the games release (i.e. PC,PS4, etc.)\n\n- `Year` - Year of the game's release\n\n- `Genre` - Genre of the game\n\n- `Publisher` - Publisher of the game\n\n- `NA_Sales` - Sales in North America (in millions)\n\n- `EU_Sales` - Sales in Europe (in millions)\n\n- `JP_Sales` - Sales in Japan (in millions)\n\n- `Other_Sales` - Sales in the rest of the world (in millions)\n\n- `Global_Sales` - Total worldwide sales.\n","782cbdba":"## Data preprocessing","ada0171b":"For convenience, let's highlight the top 10 sales platforms:","eae2363c":"Let's take a look at the general information on released games for different platforms by year of release:","b0b51559":"### Analysis of the number and sales of released games for 2012-2016 (2017 - 2020 have many NaNs...not interesting for us)","827742d8":"In North America, the most popular platform is the X360 - where it comes from. At the same time, with the release of a new generation of consoles, the leadership goes to PS4. 3DS is the least popular console among the leaders.\n\nAmong European users, PS4 and PS3 are the leaders, Microsoft's console is much less successful than in North America, but both regions are similar in that 3ds is the least popular. \n\n\nJapanese users prefer consoles from Nintendo and Sony. At the same time, as many as two portable consoles entered the top 5. Japanese users prefer local console makers\n\n\nIn terms of genres, American and European users preferaction games and shooters, Japanese users prefer 3DS games and RPGs.","c4e8ed29":"\nFor convenience, let's display our dataframe","f8ad5fb2":"### The presence of duplicates in the data\n","e5f73cdd":"Eliminate outliers and look at the mean and median."}}