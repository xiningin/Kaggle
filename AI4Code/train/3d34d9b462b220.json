{"cell_type":{"92d26ba2":"code","2c503c9c":"code","44820f77":"code","84e840bd":"code","64b420ac":"code","ff1531c3":"code","94587314":"code","54d36bbd":"code","04cd1b08":"code","4e7ccc49":"code","401d7922":"code","c6ad8d38":"code","bb55a450":"code","eac79a9f":"code","60879f07":"code","60063661":"code","ff787ae6":"code","8658dc4e":"code","62544ba4":"code","872770a1":"code","d846485c":"code","1a6fa4a6":"code","69b241ac":"code","591dfa83":"code","8b3a0080":"code","e9d90752":"markdown","f7996aa7":"markdown","b4dc7867":"markdown","d50aef20":"markdown","ee954167":"markdown","a2e7e8cc":"markdown","b2e8a7a8":"markdown","b1f55a12":"markdown","d51ab99c":"markdown","7f9dbbb3":"markdown","0a96b21e":"markdown","3e9c0361":"markdown","e6d3de32":"markdown","847a5747":"markdown","45ca420a":"markdown","ebbb6b0e":"markdown","e5f0f253":"markdown","80e5eba6":"markdown","fc1bee86":"markdown","f9b74340":"markdown","293897d3":"markdown","8f55b6a8":"markdown"},"source":{"92d26ba2":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns \nsns.set(rc={'figure.figsize':(11.7,8.27)})\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.colors import n_colors\nfrom plotly.subplots import make_subplots","2c503c9c":"data=pd.read_csv('..\/input\/us-police-shootings\/shootings.csv')","44820f77":"data.head()","84e840bd":"data.describe()","64b420ac":"data.shape","ff1531c3":"df=data['manner_of_death'].value_counts().reset_index().rename(columns={'index':'manner_of_death','manner_of_death':'count'})\n\nfig = go.Figure(go.Bar(\n    x=df['manner_of_death'],y=df['count'],marker_color='purple'\n))\nfig.update_layout(title_text='Frequency of reason of death',xaxis_title=\"manner of death\",yaxis_title=\"count\",height=500,width=500)\nfig.show()","94587314":"df=data['armed'].value_counts().reset_index().rename(columns={'index':'weapons used','armed':'count'})\n\nfig = go.Figure(go.Bar(\n    x=df['weapons used'],y=df['count'],marker_color='#7b6de3'\n))\nfig.update_layout(title_text='Frequency of different weapons used',xaxis_title=\"weapons used\",yaxis_title=\"count\",height=700,width=1000)\nfig.show()","54d36bbd":"fig = go.Figure([go.Pie(labels=df['weapons used'],values=df['count'])])\n\nfig.update_traces(hoverinfo='label+percent', textinfo='value+percent', textfont_size=15,insidetextorientation='radial')\n\nfig.update_layout(title=\"Frequency of different weapons used\",title_x=0.5)\nfig.show()","04cd1b08":"df=data['gender'].value_counts().reset_index().rename(columns={'index':'gender','gender':'count'})\n\nfig = go.Figure(go.Bar(\n    x=df['gender'],y=df['count'],marker_color='#148edb'\n))\nfig.update_layout(title_text='gender ratio',xaxis_title=\"gender\",yaxis_title=\"count\",height=500,width=500)\nfig.show()","4e7ccc49":"df=data.groupby('date')['manner_of_death'].count().reset_index()\ndf['date']=pd.to_datetime(df['date'])\ndf['year-month'] = df['date'].apply(lambda x: str(x.year) + '-' + str(x.month))\ndf_ym=df.groupby('year-month')[['manner_of_death']].sum().reset_index()\ndf_ym['year-month']=pd.to_datetime(df_ym['year-month'])\ndf_ym=df_ym.sort_values('year-month')","401d7922":"df=data['race'].value_counts().reset_index().rename(columns={'index':'race','race':'count'})\n\nfig = go.Figure(go.Bar(\n    x=df['race'],y=df['count'],\n    marker={'color': df['count'], \n    'colorscale': 'Viridis'},  \n))\nfig.update_layout(title_text='frequency of different race',xaxis_title=\"race\",yaxis_title=\"count\",height=500,width=500)\nfig.show()","c6ad8d38":"fig = go.Figure(go.Bar(\n    x=df_ym['year-month'],y=df_ym['manner_of_death'],\n    marker={'color': df_ym['manner_of_death'], \n    'colorscale': 'Viridis'},  \n    text=df_ym['manner_of_death'],\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='No of deaths (2015-2020)',yaxis_title=\"no. of deaths\")\nfig.show()","bb55a450":"fig = go.Figure(go.Box(y=data['age'],name=\"Age\"))\nfig.update_layout(title=\"Distribution of Age\")\nfig.show()","eac79a9f":"sns.distplot(data['age'],kde=True,color='r')","60879f07":"sns.boxplot(x=\"gender\", y=\"age\", palette=[\"b\", \"m\"],data=data,)\nsns.despine(offset=10, trim=True)","60063661":"df_male=data[data['gender']=='M']['age'].values\ndf_female=data[data['gender']=='F']['age'].values\n\nsns.distplot(df_male, hist=False, rug=True)\nsns.distplot(df_female, hist=False, rug=True)","ff787ae6":"sns.boxplot(x=\"race\", y=\"age\",data=data)\nsns.despine(offset=10, trim=True)","8658dc4e":"df=data['state'].value_counts().reset_index().rename(columns={'index':'state','state':'deaths'})\n\nfig = go.Figure(go.Bar(\n    x=df['state'],y=df['deaths'],\n    marker={'color': df['deaths'], \n    'colorscale': 'Viridis'},  \n))\nfig.update_layout(title_text='No of deaths (state-wise)',xaxis_title=\"state\",yaxis_title=\"count\",height=500,width=1000)\nfig.show()","62544ba4":"df=data['signs_of_mental_illness'].value_counts().reset_index().rename(columns={'index':'signs_of_mental_illness','signs_of_mental_illness':'count'})\nfig = go.Figure([go.Pie(labels=df['signs_of_mental_illness'],values=df['count'])])\n\nfig.update_traces(hoverinfo='label+percent', textinfo='value+percent', textfont_size=15,insidetextorientation='radial')\n\nfig.update_layout(title=\"Signs_of_mental_illness\",title_x=0.5)\nfig.show()","872770a1":"df=data['threat_level'].value_counts().reset_index().rename(columns={'index':'threat_level','threat_level':'count'})\nfig = go.Figure([go.Pie(labels=df['threat_level'],values=df['count'])])\n\nfig.update_traces(hoverinfo='label+percent', textinfo='value+percent', textfont_size=15,insidetextorientation='radial')\n\nfig.update_layout(title=\"threat_level\",title_x=0.5)\nfig.show()","d846485c":"df=data.groupby(['date','gender','race'])['manner_of_death'].count().reset_index()\ndf['date']=pd.to_datetime(df['date'])\ndf['year-month'] = df['date'].apply(lambda x: str(x.year))\ndf_ym=df.groupby(['year-month','gender','race'])[['manner_of_death']].sum().reset_index()\ndf_ym['year-month']=pd.to_datetime(df_ym['year-month'])\ndf_ym=df_ym.sort_values('year-month')\ndf_ym['year-month']=df_ym['year-month'].astype('str').apply(lambda x: x.split('-')[0])","1a6fa4a6":"fig = px.sunburst(df_ym, path=['year-month','gender','race'], values='manner_of_death')\nfig.update_layout(title=\"Number of deaths  by Gender,year,race\",title_x=0.5)\nfig.show()","69b241ac":"df=data['city'].value_counts().reset_index().rename(columns={'index':'city','city':'deaths'}).head(20)\n\nsns.barplot(y=\"city\", x=\"deaths\", data=df,\n            label=\"deaths\")\n","591dfa83":"black_state=data[data['race']=='Black']['state'].value_counts().to_frame().reset_index().rename(columns={'index':'state','state':'count'})","8b3a0080":"fig = go.Figure(go.Choropleth(\n    locations=black_state['state'],\n    z=black_state['count'].astype(float),\n    locationmode='USA-states',\n    colorscale='Reds',\n    autocolorscale=False,\n    text=black_state['state'], # hover text\n    marker_line_color='white', # line markers between states\n    colorbar_title=\"Millions USD\",showscale = False,\n))\nfig.update_layout(\n    title_text='US Police shooting cases of black people',\n    title_x=0.5,\n    geo = dict(\n        scope='usa',\n        projection=go.layout.geo.Projection(type = 'albers usa'),\n        showlakes=True, # lakes\n        lakecolor='rgb(255, 255, 255)'))\nfig.update_layout(\n    template=\"plotly_dark\")\nfig.show()","e9d90752":"# <a id='9'> 9. Age distribution  Male Vs Female  <\/a>","f7996aa7":"# <a id='10'> 10. Age distribution of different race  <\/a>","b4dc7867":"# <a id='13'> 13. Threat level <\/a>","d50aef20":"# <a id='7'> 7. Number of deaths (2015-20) <\/a>","ee954167":"# Import dataset","a2e7e8cc":"# <a id='15'> 15. Top 20 cities where most shooting occurred <\/a>","b2e8a7a8":"<font size=\"+2\" color=green ><b>Please Upvote my kernel if you like my work<\/b><\/font>","b1f55a12":"# About Dataset\n\nDataset contains basic data about people like their name, age, gender and race. Along with it, is the shooting\/killing information, like date of event, where it happened? how they were shot? did they attack? Were they holding weapons? Did they show any mental illness? Was the policeman wearing a camera\/was the incident recorded? Did the suspect flee? Apart from that, a category column holds type of weapon used by the suspect","d51ab99c":"![image.png](attachment:image.png)","7f9dbbb3":"# <a id='2'> 2. Exploring data<\/a>","0a96b21e":"# <a id='8'> 8. Age distribution  <\/a>","3e9c0361":"# <a id='4'> 4. What weapons used most frequently? <\/a>","e6d3de32":"# <a id='5'> 5. Gender ratio <\/a>","847a5747":"# <a id='6'> 6. Frequency of different race <\/a>","45ca420a":"# <a id='16'> 16. US Police shooting cases of black people (2015-2020) <\/a>","ebbb6b0e":"## Import libraries","e5f0f253":"# <a id='14'> 14. Number of deaths  by Gender,year,race <\/a>","80e5eba6":"# Table of contents\n\n- <a href='#1'>1. Importing Libraries and Dataset <\/a> \n- <a href='#2'>2. Exploring data<\/a> \n- <a href='#3'>3. How they are killed ? <\/a> \n- <a href='#4'>4. What weapons used most frequently? <\/a> \n- <a href='#5'>5. Gender ratio <\/a>\n- <a href='#6'>6. Frequency of different race <\/a> \n- <a href='#7'>7. Number of deaths (2015-20) <\/a> \n- <a href='#8'>8. Age distribution<\/a>\n- <a href='#9'>9. Age distribution Male vs Female <\/a>\n- <a href='#10'>10. Age distribution of different race <\/a>\n- <a href='#11'>11. No of deaths (state-wise) <\/a>\n- <a href='#12'>12. Signs of Mental illness <\/a>\n- <a href='#13'>13. Threat level <\/a>\n- <a href='#14'>14. Number of deaths by Gender,year,race <\/a>\n- <a href='#15'>15. Top 20 cities where most shooting occurred <\/a>\n- <a href='#16'>16. US Police shooting cases of black people (2015-2020)","fc1bee86":"# <a id='1'> 1. Importing Libraries and Dataset<\/a>","f9b74340":"# <a id='11'> 11. No of deaths (state-wise) <\/a>","293897d3":"# <a id='12'> 12. Signs of Mental illness <\/a>","8f55b6a8":"# <a id='3'> 3. How they are killed ? <\/a>"}}