{"cell_type":{"db22ba71":"code","a77bd563":"code","92be2fb0":"code","7d212a49":"code","489d92b4":"markdown","89309d7c":"markdown","d396c6ef":"markdown","0a8a26bd":"markdown","7fb97152":"markdown","bda4672b":"markdown"},"source":{"db22ba71":"!pip3 install --user --upgrade git+https:\/\/github.com\/twintproject\/twint.git@origin\/master#egg=twint","a77bd563":"import twint\nimport pandas\n#Cities list of Pakistan\nall_cities = [\"Bagh\", \"Bhimber\", \"khuiratta\", \"Kotli\", \"Mangla\", \"Mirpur\", \"Muzaffarabad\", \"Plandri\", \"Rawalakot\", \"Punch\", \"Amir\\u00a0Chah\", \"Bazdar\", \"Bela\", \"Bellpat\", \"Bagh\", \"Burj\", \"Chagai\", \"Chah\\u00a0Sandan\", \"Chakku\", \"Chaman\", \"Chhatr\", \"Dalbandin\", \"Dera Bugti\", \"Dhana Sar\", \"Diwana\", \"Duki\", \"Dushi\", \"Duzab\", \"Gajar\", \"Gandava\", \"Garhi Khairo\", \"Garruck\", \"Ghazluna\", \"Girdan\", \"Gulistan\", \"Gwadar\", \"Gwash\", \"Hab Chauki\", \"Hameedabad\", \"Harnai\", \"Hinglaj\", \"Hoshab\", \"Ispikan\", \"Jhal\", \"Jhal Jhao\", \"Jhatpat\", \"Jiwani\", \"Kalandi\", \"Kalat\", \"Kamararod\", \"Kanak\", \"Kandi\", \"Kanpur\", \"Kapip\", \"Kappar\", \"Karodi\", \"Katuri\", \"Kharan\", \"Khuzdar\", \"Kikki\", \"Kohan\", \"Kohlu\", \"Korak\", \"Lahri\", \"Lasbela\", \"Liari\", \"Loralai\", \"Mach\", \"Mand\", \"Manguchar\", \"Mashki\\u00a0Chah\", \"Maslti\", \"Mastung\", \"Mekhtar\", \"Merui\", \"Mianez\", \"Murgha Kibzai\", \"Musa Khel Bazar\", \"Nagha Kalat\", \"Nal\", \"Naseerabad\", \"Nauroz Kalat\", \"Nur Gamma\", \"Nushki\", \"Nuttal\", \"Ormara\", \"Palantuk\", \"Panjgur\", \"Pasni\", \"Piharak\", \"Pishin\", \"Qamruddin Karez\", \"Qila Abdullah\", \"Qila Ladgasht\", \"Qila Safed\", \"Qila Saifullah\", \"Quetta\", \"Rakhni\", \"Robat Thana\", \"Rodkhan\", \"Saindak\", \"Sanjawi\", \"Saruna\", \"Shabaz Kalat\", \"Shahpur\", \"Sharam Jogizai\", \"Shingar\", \"Shorap\", \"Sibi\", \"Sonmiani\", \"Spezand\", \"Spintangi\", \"Sui\", \"Suntsar\", \"Surab\", \"Thalo\", \"Tump\", \"Turbat\", \"Umarao\", \"pirMahal\", \"Uthal\", \"Vitakri\", \"Wadh\", \"Washap\", \"Wasjuk\", \"Yakmach\", \"Zhob\", \"Astor\", \"Baramula\", \"Hunza\", \"Gilgit\", \"Nagar\", \"Skardu\", \"Shangrila\", \"Shandur\", \"Bajaur\", \"Hangu\", \"Malakand\", \"Miram Shah\", \"Mohmand\", \"Khyber\", \"Kurram\", \"North Waziristan\", \"South Waziristan\", \"Wana\", \"Abbottabad\", \"Ayubia\", \"Adezai\", \"Banda Daud Shah\", \"Bannu\", \"Batagram\", \"Birote\", \"Buner\", \"Chakdara\", \"Charsadda\", \"Chitral\", \"Dargai\", \"Darya Khan\", \"Dera Ismail Khan\", \"Drasan\", \"Drosh\", \"Hangu\", \"Haripur\", \"Kalam\", \"Karak\", \"Khanaspur\", \"Kohat\", \"Kohistan\", \"Lakki Marwat\", \"Latamber\", \"Lower Dir\", \"Madyan\", \"Malakand\", \"Mansehra\", \"Mardan\", \"Mastuj\", \"Mongora\", \"Nowshera\", \"Paharpur\", \"Peshawar\", \"Saidu Sharif\", \"Shangla\", \"Sakesar\", \"Swabi\", \"Swat\", \"Tangi\", \"Tank\", \"Thall\", \"Tordher\", \"Upper Dir\", \"Ahmedpur East\", \"Ahmed Nager Chatha\", \"Ali Pur\", \"Arifwala\", \"Attock\", \"Basti Malook\", \"Bhagalchur\", \"Bhalwal\", \"Bahawalnagar\", \"Bahawalpur\", \"Bhaipheru\", \"Bhakkar\", \"Burewala\", \"Chailianwala\", \"Chakwal\", \"Chichawatni\", \"Chiniot\", \"Chowk Azam\", \"Chowk Sarwar Shaheed\", \"Daska\", \"Darya Khan\", \"Dera Ghazi Khan\", \"Derawar Fort\", \"Dhaular\", \"Dina City\", \"Dinga\", \"Dipalpur\", \"Faisalabad\", \"Fateh Jang\", \"Gadar\", \"Ghakhar Mandi\", \"Gujranwala\", \"Gujrat\", \"Gujar Khan\", \"Hafizabad\", \"Haroonabad\", \"Hasilpur\", \"Haveli Lakha\", \"Jampur\", \"Jhang\", \"Jhelum\", \"Kalabagh\", \"Karor Lal Esan\", \"Kasur\", \"Kamalia\", \"Kamokey\", \"Khanewal\", \"Khanpur\", \"Kharian\", \"Khushab\", \"Kot Addu\", \"Jahania\", \"Jalla Araain\", \"Jauharabad\", \"Laar\", \"Lahore\", \"Lalamusa\", \"Layyah\", \"Lodhran\", \"Mamoori\", \"Mandi Bahauddin\", \"Makhdoom Aali\", \"Mandi Warburton\", \"Mailsi\", \"Mian Channu\", \"Minawala\", \"Mianwali\", \"Multan\", \"Murree\", \"Muridke\", \"Muzaffargarh\", \"Narowal\", \"Okara\", \"Renala Khurd\", \"Rajan Pur\", \"Pak Pattan\", \"Panjgur\", \"Pattoki\", \"Pirmahal\", \"Qila Didar Singh\", \"Rabwah\", \"Raiwind\", \"Rajan Pur\", \"Rahim Yar Khan\", \"Rawalpindi\", \"Rohri\", \"Sadiqabad\", \"Safdar Abad \\u0096 (Dhaban Singh)\", \"Sahiwal\", \"Sangla Hill\", \"Samberial\", \"Sarai Alamgir\", \"Sargodha\", \"Shakargarh\", \"Shafqat Shaheed Chowk\", \"Sheikhupura\", \"Sialkot\", \"Sohawa\", \"Sooianwala\", \"Sundar (city)\", \"Talagang\", \"Tarbela\", \"Takhtbai\", \"Taxila\", \"Toba Tek Singh\", \"Vehari\", \"Wah Cantonment\", \"Wazirabad\", \"Ali Bandar\", \"Baden\", \"Chachro\", \"Dadu\", \"Digri\", \"Diplo\", \"Dokri\", \"Gadra\", \"Ghanian\", \"Ghauspur\", \"Ghotki\", \"Hala\", \"Hyderabad\", \"Islamkot\", \"Jacobabad\", \"Jamesabad\", \"Jamshoro\", \"Janghar\", \"Jati (Mughalbhin)\", \"Jhudo\", \"Jungshahi\", \"Kandiaro\", \"Karachi\", \"Kashmor\", \"Keti Bandar\", \"Khairpur\", \"Khora\", \"Klupro\", \"Khokhropur\", \"Korangi\", \"Kotri\", \"Kot Sarae\", \"Larkana\", \"Lund\", \"Mathi\", \"Matiari\", \"Mehar\", \"Mirpur Batoro\", \"Mirpur Khas\", \"Mirpur Sakro\", \"Mithi\", \"Mithani\", \"Moro\", \"Nagar Parkar\", \"Naushara\", \"Naudero\", \"Noushero Feroz\", \"Nawabshah\", \"Nazimabad\", \"Naokot\", \"Pendoo\", \"Pokran\", \"Qambar\", \"Qazi Ahmad\", \"Ranipur\", \"Ratodero\", \"Rohri\", \"Saidu Sharif\", \"Sakrand\", \"Sanghar\", \"Shadadkhot\", \"Shahbandar\", \"Shahdadpur\", \"Shahpur Chakar\", \"Shikarpur\", \"Sujawal\", \"Sukkur\", \"Tando Adam\", \"Tando Allahyar\", \"Tando Bago\", \"Tar Ahamd Rind\", \"Thatta\", \"Tujal\", \"Umarkot\", \"Veirwaro\", \"Warah\"]\n","92be2fb0":"def scrape_by_city(keywords, since, outfile):\n    unique_cities=set(all_cities) #To get unique cities of country\n    cities = sorted(unique_cities) #Sort & convert datatype to list\n    for city in cities:\n        print(city)\n        c = twint.Config()\n        c.Search = keywords #search keyword\n        c.Since = since\n        c.Store_csv = True\n        c.Output = \".\/\" + outfile\n        c.Near = city\n        c.Hide_output = True\n        c.Count = True\n        c.Stats = True\n        c.Resume = 'resume.txt'\n        twint.run.Search(c)","7d212a49":"# Runn the function\n\n# Uncomment this line to run the function and start scraper\n\n#scrape_by_city('', '2020-08-5 15:55:00', 'Pakistan_Tweets_Dataset.csv')","489d92b4":"Installation","89309d7c":"### **Script**","d396c6ef":"Dataset will be saved in 'Pakistan_Tweets_Dataset.csv' file. dowwnload it or use as you like.\n\nRead detailed article [here](https:\/\/www.kaggle.com\/discussion\/207512).","0a8a26bd":"Now, Let me explain the **\u2018scrape_by_city()\u2019** method.\n\nFirst of all, we have to import twint configuration.\n\n**Keyword:** I have let the keyword empty as in this way it will scrape all the tweets. Otherwise, If you are targeting a specific keyword you can add it there.\n\n**Since:** At this argument, you add the timestamp from when you want to scrape the tweets.\n\n**Store_csv:** Enable to save the tweets in the CSV file.\n\n**Output:** Enter the filename under you want to sav the dataset.\n\n**Near:** Here you have to enter the city name.\n\n**Hide_output:** If you don\u2019t want to see the output in the terminal which I prefer in production because it slows down the performance.\n\n**Count:** To check the status of the number of tweets scraped.\n\n**Resume:** To resume the scraping we have to pass the last id value stored in our CSV or the place where we are storing the data. The script below will help you get the last id.","7fb97152":"# Universal Twitter Scraper using Twint","bda4672b":"# Upvote and Share\n\n# Read More\n\nhttps:\/\/www.kaggle.com\/asimzahid\/eda-chest-x-ray-abnormalities-detection\n"}}