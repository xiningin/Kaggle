{"cell_type":{"3e2c9b0f":"code","0897482e":"code","4ed72d22":"code","e578b145":"code","ded79721":"code","cf08adf9":"code","e21d3d29":"code","a11b72cb":"code","235c997a":"code","2284e150":"code","8efaf854":"code","87a8cd24":"code","c364e9d2":"code","032189b7":"code","7b9e46c5":"code","d0fb8471":"code","4a650e49":"code","d26cf2a5":"code","470f02e2":"code","3e06efbc":"code","320ab781":"code","17c63714":"code","f7ed9be0":"code","0a3c824d":"code","49c47618":"code","b1d63e9a":"code","002827e8":"code","01283cac":"code","87eeebfe":"code","5185670d":"markdown","59cac11f":"markdown","a1ebf88b":"markdown","f52df2a0":"markdown","d255eb88":"markdown","0cf1cdc3":"markdown","19a7a920":"markdown","82a69be5":"markdown","9bf5f9dd":"markdown","204bd264":"markdown","5457caa6":"markdown","21a7c682":"markdown","2a29f0a7":"markdown","cc222b10":"markdown","407e9de9":"markdown","faa4c4ef":"markdown","f9fec03d":"markdown","45837ec9":"markdown","8cb518b9":"markdown","3e6f77a3":"markdown","01414f4b":"markdown","1da4ff0a":"markdown","a27b43e0":"markdown","ecdc1e12":"markdown","dd79cab4":"markdown","59e155d0":"markdown","a9e603ee":"markdown","6ab3f18b":"markdown","8f156a2b":"markdown","65c46003":"markdown","21ca38d3":"markdown","31060e3d":"markdown","55cf1427":"markdown","3e73276f":"markdown","70bb4d3a":"markdown","c4b628e9":"markdown","e5b934f9":"markdown","c9feb5a9":"markdown","6b01a5c3":"markdown","abb3d1d3":"markdown","de149b83":"markdown","f6715bda":"markdown","7930b932":"markdown","34a851d9":"markdown","ad2218c4":"markdown","70aa1f9e":"markdown"},"source":{"3e2c9b0f":"import numpy as np \nimport pandas as pd \nimport os\nimport itertools\n\n#plots\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.colors import n_colors\nfrom plotly.subplots import make_subplots\n\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\nfrom sklearn.feature_extraction.text import CountVectorizer\n\nfrom PIL import Image\nfrom nltk.corpus import stopwords\nstop=set(stopwords.words('english'))\nfrom nltk.util import ngrams\n\n\nimport re\nfrom collections import Counter\n\nimport nltk\nfrom nltk.corpus import stopwords\n\nimport requests\nimport json\n\nimport seaborn as sns\nsns.set(rc={'figure.figsize':(11.7,8.27)})\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","0897482e":"ipl=pd.read_csv('..\/input\/ipl2020-tweets\/IPL2020_Tweets.csv')\nipl.info()","4ed72d22":"ipl.shape","e578b145":"import missingno as mno\nmno.matrix(ipl)","ded79721":"missed = pd.DataFrame()\nmissed['column'] = ipl.columns\n\nmissed['percent'] = [round(100* ipl[col].isnull().sum() \/ len(ipl), 2) for col in ipl.columns]\nmissed = missed.sort_values('percent',ascending=False)\nmissed = missed[missed['percent']>0]\n\nfig = sns.barplot(\n    x=missed['percent'], \n    y=missed[\"column\"], \n    orientation='horizontal'\n).set_title('Missed values percent for every column')","cf08adf9":"ds = ipl['user_name'].value_counts().reset_index()\nds.columns = ['user_name', 'tweets_count']\nds = ds.sort_values(['tweets_count'],ascending=False)\nipl = pd.merge(ipl, ds, on='user_name')\n\nfig = sns.barplot( \n    x=ds.head(20)[\"tweets_count\"], \n    y=ds.head(20)[\"user_name\"], \n    orientation='horizontal'\n).set_title('Top 20 users by number of tweets') \n\n","e21d3d29":"ipl.columns","a11b72cb":"ipl.head()","235c997a":"ipl['user_created'] = pd.to_datetime(ipl['user_created'],infer_datetime_format=True,errors ='coerce')\nipl['year_created'] = ipl['user_created'].dt.year\ndata = ipl.drop_duplicates(subset='user_name', keep=\"first\")\ndata = data[data['year_created']>1970]\ndata = data['year_created'].value_counts().reset_index()\ndata.columns = ['year', 'number']\n\nfig = sns.barplot( \n    x=data[\"year\"], \n    y=data[\"number\"], \n    orientation='vertical'\n    #title='', \n).set_title('User created year by year')","2284e150":"ds = ipl['user_location'].value_counts().reset_index()\nds.columns = ['user_location', 'count']\nds = ds[ds['user_location']!='NA']\nds = ds.sort_values(['count'],ascending=False)\n\nfig = sns.barplot(\n    \n    x=ds.head(20)[\"count\"], \n    y=ds.head(20)[\"user_location\"], \n    orientation='horizontal'\n).set_title('Top 20 user locations by number of tweets')","8efaf854":"from plotly.offline import init_notebook_mode, iplot\ndef pie_count(data, field, percent_limit, title):\n    \n    data[field] = data[field].fillna('NA')\n    data = data[field].value_counts().to_frame()\n\n    total = data[field].sum()\n    data['percentage'] = 100 * data[field]\/total    \n\n    percent_limit = percent_limit\n    otherdata = data[data['percentage'] < percent_limit] \n    others = otherdata['percentage'].sum()  \n    maindata = data[data['percentage'] >= percent_limit]\n\n    data = maindata\n    other_label = \"Others(<\" + str(percent_limit) + \"% each)\"\n    data.loc[other_label] = pd.Series({field:otherdata[field].sum()}) \n    \n    labels = data.index.tolist()   \n    datavals = data[field].tolist()\n    \n    trace=go.Pie(labels=labels,values=datavals)\n    \n    layout = go.Layout(\n        title = title,\n        height=600,\n        width=600\n        )\n    \n    fig = go.Figure(data=[trace], layout=layout)\n    iplot(fig)\n    \npie_count(ipl, 'user_location', 0.5, 'Number of tweets per location')","87a8cd24":"ds = ipl['source'].value_counts().reset_index()\nds.columns = ['source', 'count']\nds = ds.sort_values(['count'],ascending=False)\n\nfig = sns.barplot(\n    x=ds.head(10)[\"count\"], \n    y=ds.head(10)[\"source\"], \n    orientation='horizontal', \n    #title='Top 40 user sources by number of tweets', \n    #width=800, \n    #height=800\n).set_title('Top 10 user sources by number of tweets')","c364e9d2":"ipl['hashtags'] = ipl['hashtags'].fillna('[]')\nipl['hashtags_count'] = ipl['hashtags'].apply(lambda x: len(x.split(',')))\nipl.loc[ipl['hashtags'] == '[]', 'hashtags_count'] = 0\nfig = sns.scatterplot( \n    x=ipl['hashtags_count'], \n    y=ipl['tweets_count']\n).set_title('Total number of tweets for users and number of hashtags in every tweet')","032189b7":"ds = ipl['hashtags_count'].value_counts().reset_index()\nds.columns = ['hashtags_count', 'count']\nds = ds.sort_values(['count'],ascending=False)\nds['hashtags_count'] = ds['hashtags_count'].astype(str) + ' tags'\nfig = sns.barplot( \n    x=ds[\"count\"], \n    y=ds[\"hashtags_count\"], \n    orientation='horizontal'\n).set_title('Distribution of number of hashtags in tweets')","7b9e46c5":"ipl['date'] = pd.to_datetime(ipl['date'],infer_datetime_format=True,errors ='coerce') \ndf = ipl.sort_values(['date'])\ndf['day'] = df['date'].astype(str).str.split(' ', expand=True)[0]\ndf['time'] = df['date'].astype(str).str.split(' ', expand=True)[1]\ndf.head()\n\nds = df.groupby(['day', 'user_name'])['hashtags_count'].count().reset_index()\nds = ds.groupby(['day'])['user_name'].count().reset_index()\nds.columns = ['day', 'number_of_users']\nds['day'] = ds['day'].astype(str)\nfig = sns.barplot( \n    x=ds['day'], \n    y=ds[\"number_of_users\"], \n    orientation='vertical',\n    #title='Number of unique users per day', \n    #width=800, \n    #height=800\n).set_title('Number of unique users per day')\n#fig.show()\nplt.xticks(rotation=90)","d0fb8471":"ds = df['day'].value_counts().reset_index()\nds.columns = ['day', 'count']\nds = ds.sort_values('count',ascending=False)\nds['day'] = ds['day'].astype(str)\nfig = sns.barplot( \n    x=ds['count'], \n    y=ds[\"day\"], \n    orientation='horizontal',\n).set_title('Tweets distribution over days present in dataset')","4a650e49":"ipl['tweet_date']=ipl['date'].dt.date\ntweet_date=ipl['tweet_date'].value_counts().to_frame().reset_index().rename(columns={'index':'date','tweet_date':'count'})\ntweet_date['date']=pd.to_datetime(tweet_date['date'],infer_datetime_format=True,errors ='coerce')\ntweet_date=tweet_date.sort_values('date',ascending=False)\n","d26cf2a5":"fig=go.Figure(go.Scatter(x=tweet_date['date'],\n                                y=tweet_date['count'],\n                               mode='markers+lines',\n                               name=\"Submissions\",\n                               marker_color='dodgerblue'))\n\nipl_dummy=ipl.dropna(subset=['tweet_date'])\n\nfig.update_layout(\n    title_text='Tweets per Day : ({} - {})'.format(ipl_dummy['tweet_date'].sort_values()[0].strftime(\"%d\/%m\/%Y\"),\n                                                       ipl_dummy['tweet_date'].sort_values().iloc[-1].strftime(\"%d\/%m\/%Y\")),template=\"plotly_dark\",\n    title_x=0.5)\n\nfig.show()","470f02e2":"ipl['hour'] = ipl['date'].dt.hour\nds = ipl['hour'].value_counts().reset_index()\nds.columns = ['hour', 'count']\nds['hour'] = 'Hour ' + ds['hour'].astype(str)\nfig = sns.barplot( \n    x=ds[\"hour\"], \n    y=ds[\"count\"], \n    orientation='vertical', \n).set_title('Tweets distribution over hours')\nplt.xticks(rotation='vertical')\n","3e06efbc":"def split_hashtags(x): \n    return str(x).replace('[', '').replace(']', '').split(',')\n\ntweets_df = ipl.copy()\ntweets_df['hashtag'] = tweets_df['hashtags'].apply(lambda row : split_hashtags(row))\ntweets_df = tweets_df.explode('hashtag')\ntweets_df['hashtag'] = tweets_df['hashtag'].astype(str).str.lower().str.replace(\"'\", '').str.replace(\" \", '')\ntweets_df.loc[tweets_df['hashtag']=='', 'hashtag'] = 'NO HASHTAG'\n#tweets_df","320ab781":"\nds = tweets_df['hashtag'].value_counts().reset_index()\nds.columns = ['hashtag', 'count']\nds = ds.sort_values(['count'],ascending=False)\nfig = sns.barplot(\n    x=ds.head(10)[\"count\"], \n    y=ds.head(10)['hashtag'], \n    orientation='horizontal', \n    #title='Top 20 hashtags', \n    #width=800, \n    #height=700\n).set_title('Top 10 hashtags')\n#fig.show()","17c63714":"def build_wordcloud(df, title):\n    wordcloud = WordCloud(\n        background_color='black',colormap=\"Oranges\", \n        stopwords=set(STOPWORDS), \n        max_words=50, \n        max_font_size=40, \n        random_state=666\n    ).generate(str(df))\n\n    fig = plt.figure(1, figsize=(14,14))\n    plt.axis('off')\n    fig.suptitle(title, fontsize=16)\n    fig.subplots_adjust(top=2.3)\n\n    plt.imshow(wordcloud)\n    plt.show()","f7ed9be0":"build_wordcloud(ipl['text'], 'Prevalent words in tweets for all dataset')","0a3c824d":"india_df = ipl.loc[ipl.user_location==\"India\"]\nbuild_wordcloud(india_df['text'], title = 'Prevalent words in tweets from India')","49c47618":"def remove_tag(string):\n    text=re.sub('<.*?>','',string)\n    return text\ndef remove_mention(text):\n    line=re.sub(r'@\\w+','',text)\n    return line\ndef remove_hash(text):\n    line=re.sub(r'#\\w+','',text)\n    return line\n\ndef remove_newline(string):\n    text=re.sub('\\n','',string)\n    return text\ndef remove_url(string): \n    text = re.sub('http[s]?:\/\/(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+','',string)\n    return text\ndef remove_number(text):\n    line=re.sub(r'[0-9]+','',text)\n    return line\ndef remove_punct(text):\n    line = re.sub(r'[!\"\\$%&\\'()*+,\\-.\\\/:;=#@?\\[\\\\\\]^_`{|}~]*','',text)\n    return line\ndef text_strip(string):\n    line=re.sub('\\s{2,}', ' ', string.strip())\n    return line\ndef remove_thi_amp_ha_words(string):\n    line=re.sub(r'\\bamp\\b|\\bthi\\b|\\bha\\b',' ',string)\n    return line","b1d63e9a":"ipl['refine_text']=ipl['text'].str.lower()\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_tag(str(x)))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_mention(str(x)))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_hash(str(x)))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_newline(x))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_url(x))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_number(x))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_punct(x))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:remove_thi_amp_ha_words(x))\nipl['refine_text']=ipl['refine_text'].apply(lambda x:text_strip(x))\n\nipl['text_length']=ipl['refine_text'].str.split().map(lambda x: len(x))","002827e8":"fig = go.Figure(data=go.Violin(y=ipl['text_length'], box_visible=True, line_color='black',\n                               meanline_visible=True, fillcolor='royalblue', opacity=0.6,\n                               x0='Tweet Text Length'))\n\nfig.update_layout(yaxis_zeroline=False,title=\"Distribution of Text length\",template='ggplot2')\nfig.show()","01283cac":"def ngram_df(corpus,nrange,n=None):\n    vec = CountVectorizer(stop_words = 'english',ngram_range=nrange).fit(corpus)\n    bag_of_words = vec.transform(corpus)\n    sum_words = bag_of_words.sum(axis=0) \n    words_freq = [(word, sum_words[0, idx]) for word, idx in vec.vocabulary_.items()]\n    words_freq =sorted(words_freq, key = lambda x: x[1], reverse=True)\n    total_list=words_freq[:n]\n    df=pd.DataFrame(total_list,columns=['text','count'])\n    return df\nunigram_df=ngram_df(ipl['refine_text'],(1,1),20)\nbigram_df=ngram_df(ipl['refine_text'],(2,2),20)\ntrigram_df=ngram_df(ipl['refine_text'],(3,3),20)","87eeebfe":"fig = make_subplots(\n    rows=3, cols=1,subplot_titles=(\"Unigram\",\"Bigram\",'Trigram'),\n    specs=[[{\"type\": \"scatter\"}],\n           [{\"type\": \"scatter\"}],\n           [{\"type\": \"scatter\"}]\n          ])\n\nfig.add_trace(go.Bar(\n    y=unigram_df['text'][::-1],\n    x=unigram_df['count'][::-1],\n    marker={'color': \"blue\"},  \n    text=unigram_df['count'],\n    textposition = \"outside\",\n    orientation=\"h\",\n    name=\"Months\",\n),row=1,col=1)\n\nfig.add_trace(go.Bar(\n    y=bigram_df['text'][::-1],\n    x=bigram_df['count'][::-1],\n    marker={'color': \"blue\"},  \n    text=bigram_df['count'],\n     name=\"Days\",\n    textposition = \"outside\",\n    orientation=\"h\",\n),row=2,col=1)\n\nfig.add_trace(go.Bar(\n    y=trigram_df['text'][::-1],\n    x=trigram_df['count'][::-1],\n    marker={'color': \"blue\"},  \n    text=trigram_df['count'],\n     name=\"Days\",\n    orientation=\"h\",\n    textposition = \"outside\",\n),row=3,col=1)\n\nfig.update_xaxes(showline=True, linewidth=2, linecolor='black', mirror=True)\nfig.update_yaxes(showline=True, linewidth=2, linecolor='black', mirror=True)\nfig.update_layout(title_text='Top N Grams',xaxis_title=\" \",yaxis_title=\" \",\n                  showlegend=False,title_x=0.5,height=1200,template=\"plotly_dark\")\nfig.show()","5185670d":"## Refining the text (Important step)","59cac11f":"#### The dataset consists of 5,72,984 tweets with 13 columns!","a1ebf88b":"* 2020 has the highest number of users followed by the year 2019\n* The amount of users in 2008 is very less!\n* The amount of users in 2011, 2012, 2013, 2014 are very similiar\n* A gradual increase linearly is observed from the year 2011 till 2017 with a sudden dip in the year 2018 and increases significantly in the year 2019 and 2020.","f52df2a0":"* Average length of the ipl2020 tweet: 11.58\n* Median length of the ipl 2020 tweet:11\n* Interquartile lie between : 6 and 16\n* Min: 0\n* Max: 38","d255eb88":"<a id=\"4\"><\/a>\n<h2 style='background:gold; border:0; color:black'><center>Kindly, Upvote if you find this notebook useful! Cheers!<\/center><h2>","0cf1cdc3":"## Tweet distribution - hourly","19a7a920":"## The average length for a IPL2020 Tweet using violin plot","82a69be5":"* Most users use 2 hastag followed by 1 hashtag, where certain population uses no hastag while tweeting\n* Very less amount of people use more than 5 hashtags in their post ","9bf5f9dd":"## Let's visualize some missing values!","204bd264":"* The tweet distribution seems to be very higher on september 27th and 28th, 2020","5457caa6":"* ipl, match are the most used unigrams\n* Mumbai indians,delhi capitals given that they are the finalists of IPL2020 are the most used bigrams in ipl2020 tweets. Suprisingly super kings was the third most used bigram eventhough they ended in the last but before position in the point table!\n* chennai super kings, Kings XI punjab, Kolkata Knight Riders, royal challengers banglore are the most used trigrams!","21a7c682":"## N-GRAM","2a29f0a7":"[Dataset link with around 5.8 lakhs tweets](https:\/\/www.kaggle.com\/kaushiksuresh147\/ipl2020-tweets)","cc222b10":"<a id=\"3\"><\/a>\n<h2 style='background:gold; border:0; color:black'><center>Tweets EDA<\/center><h2>","407e9de9":"* Yahoo Cricket has made the highest number of tweets with the hastag #IPL2020, which is more than 3500 tweets, followed by CricketNDTV and sports tiger!","faa4c4ef":"\n<h2 style='background:gold; border:0; color:black'><center> Mumbai Indians lift the tropy for the 5 time in the IPL history creating a massive record and proving their consistency and form throughout this IPL season!<\/center><h2>\n\n","f9fec03d":"<a id=\"top\"><\/a>\n\n<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n<h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\" style='background:gold; border:0' role=\"tab\" aria-controls=\"home\" color=black><center>Quick navigation<\/center><\/h3>\n\n* [1. Required Libraries](#1)\n* [2. Dataset Quick Overview](#2)\n* [3. Tweets EDA](#3)\n* [4. Tweets text analysis](#4)   \n\n    Kindly, Upvote the notebook!","45837ec9":"## Lets Visualize the top 20 users by number of tweets\n","8cb518b9":"## Top 20 Users location based on the number of tweets","3e6f77a3":"* As the number of tweets increase there is an substantial decrease in the number of hastags\n* Yahoo! cricket which has posted more than 3500 tweets use upto maximum of 10 hastags in their post for wider reach \n* users who post 100 tweets use a range of 0 to a maximum of 13 hastags!","01414f4b":"## Tweets distribution over days present in dataset","1da4ff0a":"![](https:\/\/wallpapercave.com\/wp\/wp4059913.jpg)","a27b43e0":"## Number of unqiue users each day!","ecdc1e12":"## Prevalent words in tweets ","dd79cab4":"## Top 10 user sources by number of tweets","59e155d0":"<h2 style='background:black; border:0; color:gold'><center>Kindly upvote the notebook and the dataset!<\/center><h2>","a9e603ee":"![](https:\/\/english.cdn.zeenews.com\/sites\/default\/files\/2020\/11\/11\/898619-mumbaiindiansipl2020.jpg)","6ab3f18b":"### Top 10 hastags used in the tweet!","8f156a2b":"## Prevalent words in tweets from India","65c46003":"## Let's get some basic information about the data!","21ca38d3":"## Visualizing the number of tweets per location!!","31060e3d":"## Users created - yearwise \n","55cf1427":"* Since IPL2020 has a wider indian audience, it obvious that the most of the tweets origin from india!","3e73276f":"* Most of the tweets with #IPL2020 is found to be tweeted during the evenings, which makes sense as the matches start at 7.30 PM IST","70bb4d3a":"* The trend forms a non-linear pattern! And a sudden increase in the number of tweets once the IPL 2020 season started on 19th spetember, which shows the anticipation among the people!\n* The whole scenario can be split into two parts, post september 19th and before that!","c4b628e9":"* Most of the tweets are tweeted using an android phone than the web app and iphone","e5b934f9":"<a id=\"1\"><\/a>\n<h2 style='background:gold; border:0; color:black'><center>Required Libraries<\/center><h2>","c9feb5a9":"### Resources:\n\n1. https:\/\/www.kaggle.com\/raenish\/covid19-tweets-eda-prediction\/log\n2. https:\/\/www.kaggle.com\/isaienkov\/covid19-eda-animated-geographical-distribution","6b01a5c3":"#### The 13th edition of the IPL was played in UAE (United Arab Emirates). \n\n#### There is a total of 60 T20 matches\n\n#### Below the all 8 IPL 2020 Team squad,\n\n* Chennai Super Kings\n* Royal Challengers Bangalore\n* Delhi Capital\n* Mumbai Indians\n* Kolkata Knight Riders\n* Rajasthan Royals\n* Kings XI Punjab\n* Sunrisers Hyderabad\n","abb3d1d3":"## Number of hashtags used in each tweet","de149b83":"## This notebook analyses the tweets with the trending #ipl2020 hashtag and the # ipl2021auctions made by the fans of cricket! So grab your gloves and let's analyze the impact of IPL 2020 in social media platforms like Twitter ","f6715bda":"<a id=\"2\"><\/a>\n<h2 style='background:gold; border:0; color:black'><center>Dataset Quick Overview<\/center><h2>","7930b932":"## Total number of tweets for users and number of hashtags in every tweet","34a851d9":"## Tweets per day","ad2218c4":"## Listing below the top N-gram sequential words used in IPL2020 tweets","70aa1f9e":"<a id=\"4\"><\/a>\n<h2 style='background:gold; border:0; color:black'><center>Tweets text analysis<\/center><h2>"}}