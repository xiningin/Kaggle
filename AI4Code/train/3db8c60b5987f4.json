{"cell_type":{"38c2bb53":"code","e0d6d8a4":"code","393f83fb":"code","c3ac2df8":"code","eb112116":"code","39d1eab0":"markdown","78a53884":"markdown","b42aaf1f":"markdown","c04f749b":"markdown","ba8d96e2":"markdown","5c406ae0":"markdown","c68537d2":"markdown"},"source":{"38c2bb53":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n%matplotlib inline\n\ntrain = pd.read_csv('\/kaggle\/input\/learn-together\/train.csv')\ntrain.shape","e0d6d8a4":"type_names = ['Spruce\/Fir', 'Lodgepole Pine', 'Ponderosa Pine', 'Cottonwood\/Willow', 'Aspen', 'Douglas-fir', 'Krummholz']\ntype_ids = sorted(train['Cover_Type'].unique())\n\ncurrent_palette = sns.color_palette()\nn = 3\nfig, ax = plt.subplots(3, n, figsize=(25,15))\nfor t in type_ids:\n    x, y = (t-1)\/\/n, (t-1)%n\n    ax[x,y].set_title(str(t) + ': ' + type_names[t-1])\n    data = train['Aspect'][train['Cover_Type']==t]\n    sns.distplot(data, ax=ax[x, y], color=current_palette[t-1]);\n    ","393f83fb":"aspect_names = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N']\ndegree = np.array([22.5, 67.5, 112.5, 157.5, 202.5, 247.5, 292.5, 337.5, 360])\ndef get_aspect_name(aspect):\n    d = degree - aspect\n    indx = np.where(d > 0, d, np.inf).argmin()\n    return aspect_names[indx]\n\ntrain['Aspect_Name'] = train['Aspect'].apply(get_aspect_name).astype('category')\ntrain['Aspect_Name'].cat.set_categories(aspect_names[:-1])","c3ac2df8":"fig, ax = plt.subplots(3, 3, figsize=(25,15))\nfor t in type_ids:\n    x, y = (t-1)\/\/3, (t-1)%3\n    ax[x,y].set_title(str(t) + ': ' + type_names[t-1])\n    data = train['Aspect_Name'][train['Cover_Type']==t]\n    sns.countplot(x=data, ax=ax[x, y], order=aspect_names[:-1]);","eb112116":"fig, ax = plt.subplots(3, 3, figsize=(20,15))\nfor t in type_ids:\n    x, y = (t-1)\/\/3, (t-1)%3\n    ax[x,y].set_title(str(t) + ': ' + type_names[t-1])\n    val = train['Aspect_Name'][train['Cover_Type']==t].value_counts().to_dict()\n    val_sorted = dict(sorted(val.items(), key=lambda x: aspect_names[:-1].index(x[0])))    \n    labels = [key + ' (' + str(val) + ')' for key,val in val_sorted.items()]\n    ax[x, y].pie(val_sorted.values(), labels=labels)\n    hole = plt.Circle((0,0), 0.5, color='white')\n    ax[x, y].add_artist(hole)\n\nplt.show();","39d1eab0":"**Cottonwood\/Willow** is more presented on **East** and **Southeast** (see graph 4).\n\n**Aspen** is more presented on **East** and  **Northeast** (see graph 5).\n\nThe both **Spruce\/Fir** and **Douglas-fir** on graph 1 and 6 are grouped around **Nort** direction.\n\nFor greater clarity, let's draw pie charts.\n","78a53884":"We can notice that some cover types mostly grouped around particuler aspect values.\n\n**Cottonwood\/Willow** is grouped around **120 degrees** on graph 4.\n\n**Aspen** is grouped around **80 degrees** on graph 5.\n\nAlso we can see that some cover types have **splashes** around the edges: graph 1 and 6.","b42aaf1f":"It's seems as if new feature **Aspect_Name** can be useful in prediction model :)","c04f749b":"Pay attention that **North** means range from 337.5 to 22.5, because 360 degrees it's a circle and 0 degrees == 360 degrees[](http:\/\/).","ba8d96e2":"# Feature transformation: Aspect\n![](https:\/\/www.newbedford-ma.gov\/nbcompass\/wp-content\/uploads\/sites\/65\/Compass2-e1557776614257.jpg)\n\nIn physical geology, aspect is the compass direction that a slope faces. For example, a slope on the eastern edge of the Rockies toward the Great Plains is described as having an easterly aspect. [Aspect (geography)](https:\/\/en.wikipedia.org\/wiki\/Aspect_%28geography%29)\n\nLet's see how to **Aspect** feature is distributed by cover types.","5c406ae0":"Now we can plot cover types distributing by compass directions.","c68537d2":"Let's split *Aspect* by bins \n\n| Aspect_Name | min | max |\n| --- | --- | --- |\n| North | 0 | 22.5 |\n| Northeast | 22.5 | 67.5 |\n| East | 67.5 | 112.5 |\n| Southeast | 112.5 | 157.5 |\n| South | 157.5 | 202.5 |\n| Southwest | 202.5 | 247.5 |\n| West | 247.5 | 292.5 |\n| Northwest | 292.5 | 337.5 |\n| North (!) | 337.5 | 360 |"}}