{"cell_type":{"dd198f4d":"code","c0aff571":"code","8eb71d5a":"code","4454b1f1":"code","ea79e9a3":"code","f5412e99":"code","49a56cd7":"code","a53077ab":"code","1e800555":"code","433ee329":"code","f9987787":"code","82ced702":"code","28541769":"code","ab5ad4b4":"code","29605270":"code","4a1ec5ee":"code","707b4c54":"code","d82c6499":"code","5ca5b393":"markdown","18b24175":"markdown","c210016e":"markdown","6434894a":"markdown","4f746277":"markdown","031fdd15":"markdown","26d9479a":"markdown","69a0c1c0":"markdown","49e626a3":"markdown","44462a77":"markdown","2a2c96a4":"markdown","72ce95b0":"markdown","bd80aced":"markdown","3984fd53":"markdown","4841ddeb":"markdown","08a28f5a":"markdown","20653178":"markdown","30c47186":"markdown"},"source":{"dd198f4d":"#imports\nimport numpy as np\nimport pandas as pd\nimport os\n\n%matplotlib inline\nimport matplotlib.pyplot as plt  # Matlab-style plotting\nimport seaborn as sns\ncolor = sns.color_palette()\nsns.set_style('darkgrid')\nimport warnings\ndef ignore_warn(*args, **kwargs):\n    pass\nwarnings.warn = ignore_warn #ignore annoying warning (from sklearn and seaborn)\nimport matplotlib as mpl\n\nmpl.rcParams['xtick.labelsize'] = 18\nmpl.rcParams['ytick.labelsize'] = 18\n\nprint(os.listdir(\"..\/input\"))","c0aff571":"#What do we have here\ndata = pd.read_csv('..\/input\/complete_football_dataset.csv')\n\ndata.head()","8eb71d5a":"data.shape","4454b1f1":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata1 = data.groupby(['Div'])['GS_full'].mean().sort_values(ascending=False).reset_index()\nsns.barplot(\"Div\", y='GS_full', data=data1, ax=ax[0])\nax[0].set_title('Goals Scored Full Time All Seasons', fontsize=20)\nax[0].set_xlabel(\"Division\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['Div'], rotation=90,fontsize=18)\n\ndata2 = data.groupby(['Div'])['GS_half'].mean().sort_values(ascending=False).reset_index()\nsns.barplot(\"Div\", y='GS_half', data=data2, ax=ax[1])\nax[1].set_title('Goals Scored Half Time All Seasons', fontsize=20)\nax[1].set_xlabel(\"Division\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['Div'], rotation=90,fontsize=18)","ea79e9a3":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata1 = data.groupby(['season'])['GS_full'].mean().sort_values(ascending=False).reset_index()\nsns.barplot('season', y='GS_full', data=data1, ax=ax[0])\nax[0].set_title('Goals Scored Full Time All Leagues', fontsize=20)\nax[0].set_xlabel(\"season\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['season'], rotation=90,fontsize=18)\n\ndata2 = data.groupby(['season'])['GS_half'].mean().sort_values(ascending=False).reset_index()\nsns.barplot('season', y='GS_half', data=data2, ax=ax[1])\nax[1].set_title('Goals Scored Half Time All Leagues', fontsize=20)\nax[1].set_xlabel(\"season\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['season'], rotation=90,fontsize=18)","f5412e99":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata1 = data[data.season == 'season-12-13'].groupby(['Div'])['GS_full'].mean().sort_values(ascending=False).reset_index()\nsns.barplot('Div', y='GS_full', data=data1, ax=ax[0])\nax[0].set_title('Goals Scored for season 2012\/2013', fontsize=20)\nax[0].set_xlabel(\"Division\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['Div'], rotation=90,fontsize=18)\n\ndata2 = data[data.season == 'season-11-12'].groupby(['Div'])['GS_full'].mean().sort_values(ascending=False).reset_index()\nsns.barplot('Div', y='GS_full', data=data2, ax=ax[1])\nax[1].set_title('Goals Scored for season 2011\/2012', fontsize=20)\nax[1].set_xlabel(\"Division\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['Div'], rotation=90,fontsize=18)","49a56cd7":"fig, ax = plt.subplots(1, 1, figsize=(12,10))\ndata1 = data[data.season == 'season-17-18'].groupby(['Div'])['GS_full'].mean().sort_values(ascending=False).reset_index()\nsns.barplot('Div', y='GS_full', data=data1, ax=ax)\nax.set_title('Goals Scored for season 2017\/2018', fontsize=20)\nax.set_xlabel(\"Division\",fontsize=18)\nax.set_ylabel(\"Mean\",fontsize=18)\nax.set_xticklabels(data1['Div'], rotation=90,fontsize=18)","a53077ab":"fig, ax = plt.subplots(1, 1, figsize=(12,10))\ndata1 = data[data.Div.isin(['Eredivise', 'Jupiler League', 'Bundesliga 1', 'Bundesliga 2', 'Primera Division'])].groupby(['Div', 'year'])['GS_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y=\"GS_full\", hue=\"Div\", data=data1)\nax.set_title('Goals Scored Full Time In One Season', fontsize=20)\nax.set_xlabel(\"year\",fontsize=18)\nax.set_ylabel(\"Mean\",fontsize=18)\nax.legend(prop={'size': 15})","1e800555":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\npalette = {\"Eredivise\":\"#f7a431\",\"Bundesliga 1\":\"#159e09\",\"Bundesliga 2\":\"#43ff32\", \"Premiership\":\"#006a91\", \"Jupiler League\":'#af0000',\n          \"Primera Division\":\"#ff5959\", \"Portugal 1\":\"#f8fc0a\", \"Championship\":'#49ceff', \"Segunda Division\": \"#ff5b5b\", \n           \"Serie A\": \"#38bc6d\", \"Ligue Un\": \"#e930f7\"}\n\ndata1 = data.groupby(['Div', 'Team'])['GS_full'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(x=\"Team\", y='GS_full', data=data1, hue='Div', dodge=False, palette=palette, ax=ax[0])\nax[0].set_title('Goals Scored Full Time', fontsize=20)\nax[0].set_xlabel(\"Team\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['Team'], rotation=90,fontsize=18)\nax[0].legend(prop={'size': 15})\n\ndata2 = data.groupby(['Div', 'Team'])['GS_half'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(\"Team\", y='GS_half', data=data2, hue='Div', dodge=False, palette=palette, ax=ax[1])\nax[1].set_title('Goals Scored Half Time', fontsize=20)\nax[1].set_xlabel(\"Team\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['Team'], rotation=90,fontsize=18)\nax[1].legend(prop={'size': 15})","433ee329":"#Lost?\nfig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata1 = data.groupby(['Div', 'Team'])['GL_full'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(\"Team\", y='GL_full', data=data1, hue='Div', dodge=False, palette=palette, ax=ax[0])\nax[0].set_title('Goals Lost Full Time', fontsize=20)\nax[0].set_xlabel(\"Team\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['Team'], rotation=90,fontsize=18)\nax[0].legend(prop={'size': 15})\n\ndata2 = data.groupby(['Div', 'Team'])['GL_half'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(\"Team\", y='GL_half', data=data2, hue='Div', dodge=False, palette=palette, ax=ax[1])\nax[1].set_title('Goals Lost Half Time', fontsize=20)\nax[1].set_xlabel(\"Team\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['Team'], rotation=90,fontsize=18)\nax[1].legend(prop={'size': 15})","f9987787":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata1 = data.groupby(['Div', 'Team'])['SL_full'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(\"Team\", y='SL_full', data=data1, hue='Div', dodge=False, palette=palette, ax=ax[0])\nax[0].set_title('Goals Score\/Lost Ratio Full Time', fontsize=20)\nax[0].set_xlabel(\"Team\",fontsize=18)\nax[0].set_ylabel(\"Mean\",fontsize=18)\nax[0].set_xticklabels(data1['Team'], rotation=90,fontsize=18)\nax[0].legend(prop={'size': 15})\n\ndata2 = data.groupby(['Div', 'Team'])['SL_half'].mean().sort_values(ascending=False).reset_index().head(15)\nsns.barplot(\"Team\", y='SL_half', data=data2, hue='Div', dodge=False, palette=palette, ax=ax[1])\nax[1].set_title('Goals Score\/Lost Ratio Half Time', fontsize=20)\nax[1].set_xlabel(\"Team\",fontsize=18)\nax[1].set_ylabel(\"Mean\",fontsize=18)\nax[1].set_xticklabels(data2['Team'], rotation=90,fontsize=18)\nax[1].legend(prop={'size': 15})","82ced702":"fig, ax = plt.subplots(1, 1, figsize=(12,10))\ndata1 = data[data.Team.isin(['PSV Eindhoven', 'Ajax', 'Porto', 'Barcelona', 'Bayern Munich'])].groupby(['Team', 'year'])['SL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y=\"SL_full\", hue=\"Team\", data=data1)\nax.set_title('Goals Scored\/Lost Ratio Full Time', fontsize=20)\nax.set_xlabel(\"year\",fontsize=18)\nax.set_ylabel(\"Mean\",fontsize=18)\nax.legend(prop={'size': 15})","28541769":"fig, ax = plt.subplots(2, 2, figsize=(24,20))\npalette={'Barcelona':'#9803b7', 'Real Madrid':'#050000'}\n\ndata0 = data[data.Team.isin(['Barcelona', 'Real Madrid'])].groupby(['Team', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y=\"PT\", hue=\"Team\", data=data0, palette=palette, ax=ax[0][0])\nax[0][0].set_title('Points for the end of the season', fontsize=20)\nax[0][0].set_xlabel(\"year\",fontsize=18)\nax[0][0].set_ylabel(\"Total\",fontsize=18)\nax[0][0].legend(prop={'size': 15})\n\ndata1 = data[data.Team.isin(['Barcelona', 'Real Madrid'])].groupby(['Team', 'year'])['SL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y=\"SL_full\", hue=\"Team\", data=data1, palette=palette, ax=ax[1][1])\nax[1][1].set_title('Goals Scored\/Lost Ratio Full Time', fontsize=20)\nax[1][1].set_xlabel(\"year\",fontsize=18)\nax[1][1].set_ylabel(\"Mean\",fontsize=18)\nax[1][1].legend(prop={'size': 15})\n\ndata2 = data[data.Team.isin(['Barcelona', 'Real Madrid'])].groupby(['Team', 'year'])['GS_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GS_full', hue='Team', data=data2, palette=palette, ax=ax[0][1])\nax[0][1].set_title('Goals Score Full Time', fontsize=20)\nax[0][1].set_xlabel(\"year\",fontsize=18)\nax[0][1].set_ylabel(\"Mean\",fontsize=18)\nax[0][1].legend(prop={'size': 15})\n\ndata3 = data[data.Team.isin(['Barcelona', 'Real Madrid'])].groupby(['Team', 'year'])['GL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GL_full', hue='Team', data=data3, palette=palette, ax=ax[1][0])\nax[1][0].set_title('Goals Lost Full Time', fontsize=20)\nax[1][0].set_xlabel(\"year\",fontsize=18)\nax[1][0].set_ylabel(\"Mean\",fontsize=18)\nax[1][0].legend(prop={'size': 15})","ab5ad4b4":"fig, ax = plt.subplots(2, 2, figsize=(24,20))\npalette={'Man United':'#b70303', 'Man City':'#0303b7'}\n\ndata0 = data[data.Team.isin(['Man City', 'Man United'])].groupby(['Team', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y=\"PT\", hue=\"Team\", data=data0, palette=palette, ax=ax[0][0])\nax[0][0].set_title('Points for the end of the season', fontsize=20)\nax[0][0].set_xlabel(\"year\",fontsize=18)\nax[0][0].set_ylabel(\"Total\",fontsize=18)\nax[0][0].legend(prop={'size': 15})\n\ndata1 = data[data.Team.isin(['Man City', 'Man United'])].groupby(['Team', 'year'])['SL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y=\"SL_full\", hue=\"Team\", data=data1, palette=palette, ax=ax[1][1])\nax[1][1].set_title('Goals Scored\/Lost Ratio Full Time', fontsize=20)\nax[1][1].set_xlabel(\"year\",fontsize=18)\nax[1][1].set_ylabel(\"Mean\",fontsize=18)\nax[1][1].legend(prop={'size': 15})\n\ndata2 = data[data.Team.isin(['Man City', 'Man United'])].groupby(['Team', 'year'])['GS_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GS_full', hue='Team', data=data2, palette=palette, ax=ax[0][1])\nax[0][1].set_title('Goals Score Full Time', fontsize=20)\nax[0][1].set_xlabel(\"year\",fontsize=18)\nax[0][1].set_ylabel(\"Mean\",fontsize=18)\nax[0][1].legend(prop={'size': 15})\n\ndata3 = data[data.Team.isin(['Man City', 'Man United'])].groupby(['Team', 'year'])['GL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GL_full', hue='Team', data=data3, palette=palette, ax=ax[1][0])\nax[1][0].set_title('Goals Lost Full Time', fontsize=20)\nax[1][0].set_xlabel(\"year\",fontsize=18)\nax[1][0].set_ylabel(\"Mean\",fontsize=18)\nax[1][0].legend(prop={'size': 15})","29605270":"fig, ax = plt.subplots(2, 2, figsize=(24,20))\npalette={'Arsenal': '#f94b0c', 'Chelsea':'#0c4bf9', 'Tottenham':'#17cfd6', 'West Ham':'#5e09a3'}\n\ndata0 = data[data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham'])].groupby(['Team', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y=\"PT\", hue=\"Team\", data=data0, palette=palette, ax=ax[0][0])\nax[0][0].set_title('Points for the end of the season', fontsize=20)\nax[0][0].set_xlabel(\"year\",fontsize=18)\nax[0][0].set_ylabel(\"Total\",fontsize=18)\nax[0][0].legend(prop={'size': 15})\n\ndata1 = data[data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham'])].groupby(['Team', 'year'])['SL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y=\"SL_full\", hue=\"Team\", data=data1, palette=palette, ax=ax[1][1])\nax[1][1].set_title('Goals Scored\/Lost Ratio Full Time', fontsize=20)\nax[1][1].set_xlabel(\"year\",fontsize=18)\nax[1][1].set_ylabel(\"Mean\",fontsize=18)\nax[1][1].legend(prop={'size': 15})\n\ndata2 = data[data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham'])].groupby(['Team', 'year'])['GS_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GS_full', hue='Team', data=data2, palette=palette, ax=ax[0][1])\nax[0][1].set_title('Goals Score Full Time', fontsize=20)\nax[0][1].set_xlabel(\"year\",fontsize=18)\nax[0][1].set_ylabel(\"Mean\",fontsize=18)\nax[0][1].legend(prop={'size': 15})\n\ndata3 = data[data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham'])].groupby(['Team', 'year'])['GL_full'].mean().reset_index()\nsns.lineplot(x=\"year\", y='GL_full', hue='Team', data=data3, palette=palette, ax=ax[1][0])\nax[1][0].set_title('Goals Lost Full Time', fontsize=20)\nax[1][0].set_xlabel(\"year\",fontsize=18)\nax[1][0].set_ylabel(\"Mean\",fontsize=18)\nax[1][0].legend(prop={'size': 15})","4a1ec5ee":"fig, ax = plt.subplots(1, 2, figsize=(24,10))\n\ndata2 = data[(data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham']))  & (data.HA == 'Home')].groupby(['Team', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y='PT', hue='Team', data=data2, palette=palette, ax=ax[0])\nax[0].set_title('Home Points for Each Year', fontsize=20)\nax[0].set_xlabel(\"year\",fontsize=18)\nax[0].set_ylabel(\"Total\",fontsize=18)\nax[0].legend(prop={'size': 15})\n\ndata3 = data[(data.Team.isin(['Chelsea', 'Arsenal', 'Tottenham', 'West Ham']))  & (data.HA == 'Away')].groupby(['Team', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y='PT', hue='Team', data=data3, palette=palette, ax=ax[1])\nax[1].set_title('Away Points for Each Year', fontsize=20)\nax[1].set_xlabel(\"year\",fontsize=18)\nax[1].set_ylabel(\"Total\",fontsize=18)\nax[1].legend(prop={'size': 15})","707b4c54":"fig, ax = plt.subplots(2, 2, figsize=(24,20))\npalette = {'Home':'#0c67f9', 'Away':'#f90c0c'}\n\ndata1 = data[data.Team.isin(['Chelsea'])].groupby(['HA', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y=\"PT\", hue=\"HA\", data=data1, palette=palette, ax=ax[0][0])\nax[0][0].set_title('Chelsea', fontsize=20)\nax[0][0].set_xlabel(\"year\",fontsize=18)\nax[0][0].set_ylabel(\"Total\",fontsize=18)\nax[0][0].legend(prop={'size': 15})\n\ndata2 = data[data.Team.isin(['Arsenal'])].groupby(['HA', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y='PT', hue='HA', data=data2, palette=palette, ax=ax[0][1])\nax[0][1].set_title('Arsenal', fontsize=20)\nax[0][1].set_xlabel(\"year\",fontsize=18)\nax[0][1].set_ylabel(\"Total\",fontsize=18)\nax[0][1].legend(prop={'size': 15})\n\ndata3 = data[data.Team.isin(['Tottenham'])].groupby(['HA', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y='PT', hue='HA', data=data3, palette=palette, ax=ax[1][0])\nax[1][0].set_title('Tottenham', fontsize=20)\nax[1][0].set_xlabel(\"year\",fontsize=18)\nax[1][0].set_ylabel(\"Total\",fontsize=18)\nax[1][0].legend(prop={'size': 15})\n\ndata3 = data[data.Team.isin(['West Ham'])].groupby(['HA', 'year'])['PT'].max().reset_index()\nsns.lineplot(x=\"year\", y='PT', hue='HA', data=data3, palette=palette, ax=ax[1][1])\nax[1][1].set_title('West Ham', fontsize=20)\nax[1][1].set_xlabel(\"year\",fontsize=18)\nax[1][1].set_ylabel(\"Total\",fontsize=18)\nax[1][1].legend(prop={'size': 15})","d82c6499":"sns.jointplot(x='PTBG_difer', y='SL_full', data=data, kind='hex', gridsize=20, xlim=[30, -30], ylim=[5, -5])\n","5ca5b393":"Well, looks like slightly but... Barcelona. Really bad time for Real deffensive: 1998, 2003, 2008. Really bad time for Barcelona defensive: 1997, 2000, but fantastic for 2010 and 2014. I'm courius also about Manchesters...   ","18b24175":"Tottenham play so well last time?! Well I need to update my footbal news... ","c210016e":"Okay, as we are here. It's time to see some correlations between features. What about if we ask about correlation between differences in points before match and it;s impact on differences in score. Check!","6434894a":"Well, as you can see there is a lot to analyse here! I'll leave you here guys, hava a good analysis!","4f746277":"Let's make it more clear for Home and Away  ","031fdd15":"Only Porto looks like improving. Barcelona nd PSV for Half Time have similar ratio. \nWe see so far that PSV scored well but it was the case all time? Let's chcek it with correlation with another heading clubs: Ajax, Porto, Barcelona, Bayern Munich","26d9479a":"It's not! Looks like PSV used to have good Goals Scored\/Lost Ratio in the 1998-2005. We can see also strong improvement of Barcelona and Bayern form 2007. Oh BTW. how it looks if we compare long time rival of Barcelona: Real Madrid?","69a0c1c0":"Change of the lider in 2012! London?","49e626a3":"Okay, let's check first five leagues. for this calcutation I assumed year as as season period eg. year 2005 is season 2005\/2006, year 1997 is season 1997\/1998 ect.","44462a77":"Maybe we want to see also how single teams score","2a2c96a4":"Does anyone expected to see here \"Holstain Kiel\"?! Heading are of course Netherlands teams PSV and Ajax","72ce95b0":"# Football Data Analitics\n\n**Introduction**\n\nThis kernel provide some basic analysis of football dataset for  **11 european leagues from 23 seasons**:\n\n* **Premiership** seasons 1995-2018\n* **Championship** seasons 1997-2018\n* **Bundesliga 1** seasons 1995-2018\n* **Bundesliga 2** seasons 1996-2018\n* **Eredivisie** seasons 1997-2018\n* **Jupiler League** seasons 1995-2018\n* **League Un** seasons 1995-2018\n* **Portugal 1** seasons 1998-2018\n* **Primera Division** seasons 1995-2018\n* **Segunda Division** seasons 1997-2018\n* **Serie A** seasons 1995-2018","bd80aced":"Okay, where to start?\nLet's check in which league we have the biggest chance to see goals?","3984fd53":"Looks like the leading league in goals scoring is Eredivise\nIn which season we had biggest chance to see goals?","4841ddeb":"Season 2012\/2013 leading before season 2011\/2012. Let's check those","08a28f5a":"Ok, time to see teams position in the end of the season. Start from London?","20653178":"Look's like Eredivise is still heading. What about last season 2017\/2018?","30c47186":"Starts to be a little exotic.... Ok, but what abou goals difference ratio? Let's check it also. "}}