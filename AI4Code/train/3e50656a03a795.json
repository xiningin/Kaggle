{"cell_type":{"c12e41b2":"code","fe298a98":"code","1a77fc8c":"code","c152e46d":"code","28396857":"code","826d20a7":"code","532d6534":"code","18f88e8a":"code","806ec39d":"code","2fef155a":"code","123ba65f":"code","01bfbaee":"code","2ce40832":"code","199f2d29":"code","a622b7d3":"code","5446e0d3":"code","b412784f":"code","5c522b0a":"code","afd49363":"code","e57afb74":"code","0a5c3083":"code","7c942eb7":"markdown","e3490ebb":"markdown","e7482dbf":"markdown","6564fb55":"markdown","a7ea5549":"markdown","9071c653":"markdown","65b2a9d2":"markdown"},"source":{"c12e41b2":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.preprocessing import MinMaxScaler\nfrom sklearn.decomposition import PCA\nfrom sklearn.cluster import KMeans","fe298a98":"data=pd.read_csv('..\/input\/multipleChoiceResponses.csv',engine='python')\nmkeys=data.keys()\n#eliminamos las columnas con respuestas personales que no se pueden categorizar\ndata=data.drop([mkeys[2], mkeys[8], mkeys[10], mkeys[44], mkeys[56], mkeys[64], mkeys[83], mkeys[85], mkeys[87], mkeys[107], mkeys[109], mkeys[123],mkeys[125], mkeys[150], mkeys[194], mkeys[223], mkeys[249],mkeys[262], mkeys[264],mkeys[276], mkeys[304],mkeys[306], mkeys[329], mkeys[341], mkeys[371], mkeys[385], mkeys[394]],axis=1)\ndata.drop([data.index[0]],inplace=True)\nmkeys=data.keys()","1a77fc8c":"data=data.fillna(-1)\ndata.head()","c152e46d":"males=data.loc[data['Q1']=='Male']\nfemales=data.loc[data['Q1']=='Female']\nother=data.loc[data['Q1']=='Prefer to self-describe']\nmales=males.drop([mkeys[1]],axis=1)\nfemales=females.drop([mkeys[1]],axis=1)\nother=other.drop([mkeys[1]],axis=1)\ngkeys=other.keys() #llaves para los df de cada genero","28396857":"Co_m=males['Q3'].values\nCo_m_n=males['Q3'].value_counts()\n\nCo_f=females['Q3'].values\nCo_f_n=females['Q3'].value_counts()\n\nCo_o=other['Q3'].values\nCo_o_n=other['Q3'].value_counts()","826d20a7":"Co_f_n[:10].plot.barh(x='Female',legend=False)","532d6534":"Co_o_n[:10].plot.barh()","18f88e8a":"Co_m_n[:10].plot.barh()","806ec39d":"grouped_m=males.groupby(['Q3','Q4']).size()","2fef155a":"plt.figure(figsize=(25,20))\nplt.subplot(5,2,1)\ngrouped_m=grouped_m.rename(index={'Some college\/university study without earning a bachelor\u00e2\u20ac\u2122s degree': 'Unfinished studies'})\ngrouped_m=grouped_m.rename(index={'No formal education past high school': 'High school'})\ngrouped_m=grouped_m.rename(index={'Master\u00e2\u20ac\u2122s degree': 'MSc'})\ngrouped_m=grouped_m.rename(index={'Bachelor\u00e2\u20ac\u2122s degree': 'Bachelor'})\nplt.title('India')\ngrouped_m.loc['India'][1:].plot.barh()\nplt.subplot(5,2,2)\nplt.title('United States of America')\ngrouped_m.loc['United States of America'][1:].plot.barh()\nplt.subplot(5,2,3)\nplt.title('China')\ngrouped_m.loc['China'][1:].plot.barh()\nplt.subplot(5,2,4)\nplt.title('Other')\ngrouped_m.loc['Other'][1:].plot.barh()\nplt.subplot(5,2,5)\nplt.title('Russia')\ngrouped_m.loc['Russia'][1:].plot.barh()\nplt.subplot(5,2,6)\nplt.title('Brazil')\ngrouped_m.loc['Brazil'][1:].plot.barh()","123ba65f":"grouped_f=females.groupby(['Q3','Q4']).size()\n\nplt.figure(figsize=(25,20))\ngrouped_f=grouped_f.rename(index={'Some college\/university study without earning a bachelor\u00e2\u20ac\u2122s degree': 'Unfinished studies'})\ngrouped_f=grouped_f.rename(index={'No formal education past high school': 'High school'})\ngrouped_f=grouped_f.rename(index={'Master\u00e2\u20ac\u2122s degree': 'MSc'})\ngrouped_f=grouped_f.rename(index={'Bachelor\u00e2\u20ac\u2122s degree': 'Bachelor'})\n\nplt.subplot(5,2,1)\nplt.title('United States of America')\ngrouped_f.loc['United States of America'][1:].plot.barh()\nplt.subplot(5,2,2)\nplt.title('India')\ngrouped_f.loc['India'][1:].plot.barh()\nplt.subplot(5,2,3)\nplt.title('China')\ngrouped_f.loc['China'][1:].plot.barh()\nplt.subplot(5,2,4)\nplt.title('Other')\ngrouped_f.loc['Other'][1:].plot.barh()\nplt.subplot(5,2,5)\nplt.title('United Kingdom of Great Britain and Northern Ireland')\ngrouped_f.loc['United Kingdom of Great Britain and Northern Ireland'][1:].plot.barh()\nplt.subplot(5,2,6)\nplt.title('I do not wish to disclose my location')\ngrouped_f.loc['I do not wish to disclose my location'][1:].plot.barh()","01bfbaee":"grouped_o=other.groupby(['Q3','Q4']).size()\n\nplt.figure(figsize=(25,20))\ngrouped_o=grouped_o.rename(index={'Some college\/university study without earning a bachelor\u00e2\u20ac\u2122s degree': 'Unfinished studies'})\ngrouped_o=grouped_o.rename(index={'No formal education past high school': 'High school'})\ngrouped_o=grouped_o.rename(index={'Master\u00e2\u20ac\u2122s degree': 'MSc'})\ngrouped_o=grouped_o.rename(index={'Bachelor\u00e2\u20ac\u2122s degree': 'Bachelor'})\n\nplt.subplot(5,2,1)\nplt.title('United States of America')\ngrouped_o.loc['United States of America'][1:].plot.barh()\nplt.subplot(5,2,2)\nplt.title('Russia')\ngrouped_o.loc['Russia'][1:].plot.barh()\nplt.subplot(5,2,3)\nplt.title('I do not wish to disclose my location')\ngrouped_o.loc['I do not wish to disclose my location'][1:].plot.barh()\n\nplt.subplot(5,2,4)\nplt.title('United Kingdom of Great Britain and Northern Ireland')\ngrouped_o.loc['United Kingdom of Great Britain and Northern Ireland'][1:].plot.barh()\nplt.subplot(5,2,5)\nplt.title('Other')\ngrouped_o.loc['Other'][1:].plot.barh()\nplt.subplot(5,2,6)\nplt.title('India')\ngrouped_o.loc['India'][1:].plot.barh()","2ce40832":"objetos=data.select_dtypes(include=['object']).copy()\nobjetos=objetos.drop(mkeys[0],axis=1)\nobjetos=pd.get_dummies(objetos)","199f2d29":"enc_data=pd.concat([data.iloc[:,0],objetos,data.select_dtypes(exclude=['object']).copy()],axis=1)","a622b7d3":"mkeys=enc_data.keys()\ncol0=enc_data[[mkeys[0]]].values.astype(np.float)\nmms=MinMaxScaler()\ncol_fit=mms.fit_transform(col0)\nenc_data[mkeys[0]] = pd.DataFrame(col_fit).fillna(0)\nenc_data.head()","5446e0d3":"pca=PCA(n_components=10)\nenc_data[mkeys[0]] = enc_data[mkeys[0]].fillna(0)\npca.fit(enc_data)","b412784f":"var_exp=0.0\ni=0\nvar=pca.explained_variance_\nvar_s=sum(var)\nsigma_arr=[]\nwhile (var_exp<0.8):\n    var_exp+=var[i]\/var_s\n    i+=1\nprint ('se llega al 80% de varianza con los primeros '+str(i)+' componentes')","5c522b0a":"pc_=pca.transform(enc_data)","afd49363":"Ks = range(1, 10)\nkm = [KMeans(n_clusters=i) for i in Ks]\nscore = [km[i].fit(pc_).score(pc_) for i in range(len(km))]\ninertia=[km[i].inertia_ for i in range(len(km))]","e57afb74":"fig1, ax=plt.subplots(1,2, figsize=(12,5))\nax[0].scatter(Ks,score,marker='x')\nax[0].plot(Ks,score)\nax[0].scatter(Ks[2],score[2],color='r',marker='o')\nax[0].set_xlabel('$K$')\nax[0].set_ylabel('Score')\n\nax[1].scatter(Ks,inertia,marker='x')\nax[1].plot(Ks,inertia)\nax[1].scatter(Ks[2],inertia[2],color='r',marker='o')\nax[1].set_xlabel('$K$')\nax[1].set_ylabel('Within-cluster variation')","0a5c3083":"K_opt=km[2] #el Kmeans optimo\ncluster_i=K_opt.fit_predict(pc_) #indices de los clusters\nfor i in range(0,3):\n    plt.scatter(np.asarray(pc_)[cluster_i == i, 0], np.asarray(pc_)[cluster_i == i,1], alpha=0.7)\n\nplt.scatter(K_opt.cluster_centers_[:,0], K_opt.cluster_centers_[:,1],marker='x',s=100,c='black')#centroides","7c942eb7":"Unfortunately there are too few answers from kagglers self-identified as a non-binary gender, seeing how there's only contestants from the USA in the bachelor's degree category (but there's a considerable amount of Master's).\n\nA fortunate finding was that women who prefered not to reveal their country of residence have been able to attain a higher-level education, seeing how there's more master and Ph.D recipients than Bachelors in this countries.\n\nLastly we can conclude that most kagglers in the survey are Master's degree recipients","e3490ebb":"Hallar K \u00d3ptimo","e7482dbf":"## Codificar los datos para tenerlos en una estructura One-Hot","6564fb55":"We've divided the dataframe by gender, with the hopes of finding key differences between male and female kagglers, as well as individuals identifying themselves by a different gender to measure the differences between these demographics.","a7ea5549":"We found that both females, and more strongly, people f a different gender identity feel a strong need to keep their nationality private, it is specially upsetting in the case of people of other gender identities to be so concerned about it. it is a worthy objective to further study how kagglers of non-traditional genders might feel oppressed even in this online, anonymous, survey","9071c653":"### Gender and studies","65b2a9d2":"### Gender and country: is the secrecy of non-traditional genders related to social oppression?\nLooking at the geographical distributions by gender we found that male indian kagglers outnumber americans, but overall USA has the top number of kagglers."}}