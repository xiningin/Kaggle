{"cell_type":{"a1677a19":"code","b9c4432c":"code","dafb329a":"code","d74928fa":"code","8190c629":"code","91046527":"code","7987b4a0":"code","6dcb6294":"code","2b13547c":"code","bdf2e711":"code","f9163df2":"code","fd1fec60":"code","3d75322f":"code","6e5f55d4":"code","b3c4bfc0":"code","d31d3ed8":"code","140a233d":"code","43bb1933":"code","14225515":"code","23a48bcb":"code","1766a2d7":"code","c8652a27":"code","5fbf7bf1":"code","dc89af81":"code","6237f923":"markdown","d2c10920":"markdown","ae666dca":"markdown","f480bf0b":"markdown","e62ede3e":"markdown","b884c602":"markdown","cd1c11b1":"markdown","e2aa2e90":"markdown","ec69819e":"markdown","9d603d1e":"markdown","987e9cc1":"markdown","64bd2200":"markdown","c0b31976":"markdown","6ce58e78":"markdown","3d672fc0":"markdown","f8b345d6":"markdown","66dbd9cc":"markdown"},"source":{"a1677a19":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n%matplotlib inline\n\nimport plotly.express as ex\nimport plotly.graph_objects as go\nimport plotly.offline as pyo\nimport plotly\nfrom datetime import datetime\npyo.init_notebook_mode()\nplotly.io.orca.config.save()\nimport os\n\nif not os.path.exists(\"images\"):\n    os.mkdir(\"images\")\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","b9c4432c":"daily = pd.read_csv('..\/input\/covid19-global-dataset\/worldometer_coronavirus_daily_data.csv')\ndaily.info()","dafb329a":"daily['date'] = pd.to_datetime(daily['date'])","d74928fa":"summary = pd.read_csv('..\/input\/covid19-global-dataset\/worldometer_coronavirus_summary_data.csv')\nsummary.info()","8190c629":"df = pd.read_csv(\"..\/input\/d\/gpreda\/covid-world-vaccination-progress\/country_vaccinations.csv\")\n\ndf.info()","91046527":"df['date'] = pd.to_datetime(df['date'])\ndf.drop(columns= ['source_name', 'source_website'])","7987b4a0":"def to_dataframe(df, col):\n    \n    data = df.groupby('country')[col].max()\n    data = pd.DataFrame(data)\n    \n    return data\n\ncolumns_to_join = ['people_vaccinated', \n                   'people_fully_vaccinated',\n                   'total_vaccinations_per_hundred', \n                   'people_vaccinated_per_hundred',\n                   'people_fully_vaccinated_per_hundred',\n                   'vaccines']\n\ndf_country = pd.DataFrame(df.groupby(['country'])['total_vaccinations'].max())\n\nfor col in columns_to_join:\n    df_country = df_country.join(to_dataframe(df, col))\n\ndf_country = df_country.reset_index()\n\ndf_country.loc[df_country['people_vaccinated_per_hundred'] > 100, 'people_vaccinated_per_hundred'] = 100\ndf_country.loc[df_country['people_fully_vaccinated_per_hundred'] > 100, 'people_fully_vaccinated_per_hundred'] = 100","6dcb6294":"#creating a dataframe of vaccines\ndf_vaccines = pd.DataFrame(columns= ['vaccine', 'country']) \n\ni = 0\nfor row in df_country['vaccines']:\n    vaccines = row.split(', ')\n    for v in vaccines:\n        new_row = {'vaccine' : v, 'country' : df_country['country'][i]}\n        df_vaccines = df_vaccines.append(new_row, ignore_index= True)\n        \n    i += 1\n","2b13547c":"df_country.to_csv('Country.csv')\ndf.to_csv('World Vaccination')","bdf2e711":"plt.figure(figsize= (7, 9))\nsns.set_theme()\n\nplt.subplot(2, 1, 1)\nax = sns.barplot(x= summary['country'], \n            y= summary['total_confirmed'],\n            order= summary.sort_values('total_confirmed', ascending= False)['country'][:10],\n            )\nplt.title('TOTAL CONFIRMED CASES PER COUNTRY', size= 17)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\nfor patch in ax.patches:\n    width = patch.get_width() \n    height= patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(x + 0.15, y + height * 1.01, '{}M'.format(int(height\/1000000)), size= 10)\n\nplt.subplot(2, 1, 2)\nax = sns.barplot(x= summary['country'], \n            y= summary['population'],\n            order= summary.sort_values('total_confirmed', ascending= False)['country'][:10], \n            color= 'lightblue')\n\n\nsns.barplot(x= summary['country'], \n            y= summary['total_confirmed'],\n            order= summary.sort_values('total_confirmed', ascending= False)['country'][:10], \n            color= 'gray')\n\nplt.title('TOTAL CONFIRMED X POPULATION', size= 20)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\npopulation_patch = mpatches.Patch(color='lightblue', label='Population')\ncases_patch = mpatches.Patch(color='gray', label='Total Cases')\nplt.legend(handles=[population_patch, cases_patch])\n\nplt.subplots_adjust(hspace=0.5)\n\nplt.show()","f9163df2":"top_countries = daily.loc[daily['country'].isin(summary.sort_values('total_confirmed', ascending= False).reset_index()['country'][:10])]\n\nplt.figure(figsize= (10, 15))\n\ni = 1\nfor country in top_countries['country'].unique():\n    \n    data = top_countries.loc[top_countries['country'] == country]\n    \n    plt.subplot(5, 2, i)\n    sns.lineplot(x = data['date'],\n                y = data['daily_new_cases'],\n                color= 'gray')\n\n\n    sns.lineplot(x = data['date'],\n                y = data['daily_new_deaths'],\n                color= 'black')\n    \n    plt.title(str(country))\n    plt.xticks(['2020', '2021'])\n    plt.ylabel('')\n    plt.xlabel('')\n    \n    i += 1\n\n    cases_patch = mpatches.Patch(color='gray', label='Daily Cases')\n    deaths_patch = mpatches.Patch(color='black', label='Daily Deaths')\n    plt.legend(handles=[cases_patch, deaths_patch])\n    \nplt.tight_layout()\nplt.show()","fd1fec60":"plt.figure(figsize= (7, 9))\n\nplt.subplot(2, 1, 1)\nax = sns.barplot(x= summary['country'], \n            y= summary['total_deaths'],\n            order= summary.sort_values('total_deaths', ascending= False)['country'][:10],\n            )\nplt.title('TOTAL DEATHS PER COUNTRY', size= 22)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\n\nfor patch in ax.patches:\n    width = patch.get_width() \n    height= patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    \n    plt.text(x + 0.15, y + height * 1.01, '{}k'.format(int(height\/1000)), size= 10)\n\nplt.subplot(2, 1, 2)\nsns.barplot(x= summary['country'], \n            y= summary['total_confirmed'],\n            order= summary.sort_values('total_deaths', ascending= False)['country'][:10], \n            color= 'gray')\n   \nsns.barplot(x= summary['country'], \n            y= summary['total_deaths'],\n            order= summary.sort_values('total_deaths', ascending= False)['country'][:10], \n            color= 'black')\n\nplt.title('TOTAL DEATHS X TOTAL CONFIRMED', size= 20)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\n    \ncases_patch = mpatches.Patch(color='gray', label='Total Cases')\ndeaths_patch = mpatches.Patch(color='black', label='Total Deaths')\nplt.legend(handles=[cases_patch, deaths_patch])\nplt.subplots_adjust(hspace=0.5)\n\nplt.show()","3d75322f":"top_countries = daily.loc[daily['country'].isin(summary.sort_values('total_deaths', ascending= False).reset_index()['country'][:10])]\n\nplt.figure(figsize= (10, 15))\n\ni = 1\nfor country in top_countries['country'].unique():\n    \n    data = top_countries.loc[top_countries['country'] == country]\n    \n    plt.subplot(5, 2, i)\n    sns.lineplot(x = data['date'],\n                y = data['daily_new_deaths'],\n                color= 'steelblue')\n    \n    plt.title(str(country))\n    plt.xticks(['2020', '2021'])\n    plt.ylabel('')\n    plt.xlabel('')\n    \n    i += 1\n\n    deaths_patch = mpatches.Patch(color='steelblue', label='Daily Deaths')\n    plt.legend(handles=[deaths_patch])\n    \nplt.tight_layout()\nplt.show()","6e5f55d4":"plt.figure(figsize= (7, 9))\n\nplt.subplot(2, 1, 1)\nax = sns.barplot(x= summary['country'], \n            y= summary['total_recovered'],\n            order= summary.sort_values('total_recovered', ascending= False)['country'][:10],\n            )\nplt.title('TOTAL RECOVERED PER COUNTRY', size= 22)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\nfor patch in ax.patches:\n    width = patch.get_width() \n    height= patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(x + 0.15, y + height * 1.01, '{}M'.format(int(height\/1000000)), size= 10)\n\nplt.subplot(2, 1, 2)\nsns.barplot(x= summary['country'], \n            y= summary['total_confirmed'],\n            order= summary.sort_values('total_recovered', ascending= False)['country'][:10], \n            color= 'gray')\n   \nsns.barplot(x= summary['country'], \n            y= summary['total_recovered'],\n            order= summary.sort_values('total_recovered', ascending= False)['country'][:10], \n            color= 'lightblue')\n\nsns.barplot(x= summary['country'], \n            y= summary['total_deaths'],\n            order= summary.sort_values('total_recovered', ascending= False)['country'][:10], \n            color= 'black')\n\nplt.title('TOTAL RECOVERED X TOTAL CONFIRMED', size= 20)\nplt.xlabel('')\nplt.ylabel('Total Cases', size= 15)\nplt.xticks(rotation= 90, size= 13)\n\n    \ncases_patch = mpatches.Patch(color='gray', label='Total Cases')\nrecovered_patch = mpatches.Patch(color='lightblue', label='Total Recovered')\ndeaths_patch = mpatches.Patch(color='black', label='Total Deaths')\nplt.legend(handles=[cases_patch, recovered_patch, deaths_patch])\nplt.subplots_adjust(hspace=0.5)\n\n    \nplt.show()","b3c4bfc0":"title = 'Percentage of the Vaccinated Population per Country'\nfig = ex.choropleth(df_country, locations=\"country\", \n                    locationmode='country names',\n                    color=\"people_vaccinated_per_hundred\", \n                    hover_name=\"country\", \n                    title='Percentage of the Vaccinated Population',\n                    color_continuous_scale= ex.colors.sequential.RdBu,\n                    width= 800,\n                    height= 400\n                   )\n\nfig.update_layout(title=title, \n                  title_x= 0.5)\nfig.show()","d31d3ed8":"title = 'Used Vaccines Distribuition'\nfig = ex.choropleth(df_vaccines, locations=\"country\", \n                    locationmode='country names',\n                    color=\"vaccine\",\n                    facet_col = 'vaccine',\n                    facet_col_wrap = 4,\n                    facet_col_spacing = 0.002,\n                    title='Used Vaccines Distribuition',\n                    color_continuous_scale= ex.colors.sequential.RdBu,\n                    width= 1200,\n                    height= 800\n                   )\n\nfig.update_layout(title=title, \n                  title_x= 0.5)\n\nfig.show()","140a233d":"sns.set_theme()\nplt.figure(figsize= (8, 5))\nax = sns.countplot(df_vaccines['vaccine'], order= df_vaccines['vaccine'].value_counts().index)\n\nplt.title('Most used Vaccines', size= 20)\nplt.xlabel(None)\nplt.xticks(rotation= 90, size= 14)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(x + 0.1, y + height + 2, '{}'.format(height))\n    \nplt.show()\n","43bb1933":"countries = df.groupby('country')['total_vaccinations'].max().sort_values(ascending= False)[:5].index\n\ntop_countries = pd.DataFrame(columns= df.columns)\nfor country in countries:\n    top_countries = top_countries.append(df.loc[df['country'] == country])\n\n\nplt.figure(figsize= (8, 10))\nsns.set_theme()\nplt.subplot(2, 1, 1)\nsns.lineplot(x= top_countries['date'].dt.strftime('%Y-%m-%d'), y= top_countries['total_vaccinations'], hue= top_countries['country'], ci= False)\n\nplt.title('Total Vaccinations', size= 20)\nplt.xlabel(None)\nplt.ylabel('Total Vaccinations', size= 15)\n\nlocs, labels = plt.xticks()\nplt.xticks(ticks= range(0,len(labels), len(labels)\/\/6))\n\nplt.subplot(2, 1, 2)\nsns.lineplot(top_countries['date'].dt.strftime('%Y-%m-%d'), \n             top_countries['daily_vaccinations_per_million'], \n             hue= top_countries['country'], ci= False)\nplt.title('Daily Vaccinations per Country', size= 20)\nplt.xlabel(None)\nplt.ylabel('Vaccinations', size= 15)\nlocs, labels = plt.xticks()\nplt.xticks(ticks= range(0,len(labels), len(labels)\/\/6))\n\nplt.show()","14225515":"plt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, x= 'total_vaccinations', y= 'country',\n            order= df_country.sort_values('total_vaccinations', ascending= False)['country'][:15],\n            palette= 'GnBu_r')\n\nplt.title('Top 15 Total Vaccinations per Country', size= 18)\nplt.xlabel('Total Vaccinations', size= 15)\nplt.ylabel('Country', size=15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n\n\n    \n    plt.text(width + x, height + y, '{:.1f} M'.format(int(width)\/1000000))\n\n\nplt.show()","23a48bcb":"plt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, x= 'total_vaccinations', y= 'country',\n           order= df_country.sort_values('total_vaccinations')['country'][:15],\n            palette= 'GnBu_r')\n\nplt.title('Minors Vaccinations per Country', size= 20)\nplt.xlabel('Total Vaccinations', size= 15)\nplt.ylabel('Country', size= 15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(width + x, height + y, '{}'.format(int(width)))","1766a2d7":"plt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, y= 'country', x= 'people_vaccinated',\n                order= df_country.sort_values('people_vaccinated', ascending= False)['country'][:15],\n                palette= 'GnBu_r')\n\nplt.title('People Vaccinated per Country', size= 18)\nplt.xlabel('People Vaccinated', size= 15)\nplt.ylabel('Country', size= 15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(width + x, height + y, '{:.1f} M'.format(int(width)\/1000000))","c8652a27":"\nplt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, y= 'country', x= 'people_fully_vaccinated',\n                order= df_country.sort_values('people_fully_vaccinated', ascending= False)['country'][:15],\n                palette= 'GnBu_r')\n\nplt.title('People Fully Vaccinated per Country', size= 17)\nplt.xlabel('People Fully Vaccinated', size= 15)\nplt.ylabel('Country', size= 15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(width + x, height + y, '{:.1f} M'.format(int(width)\/1000000))","5fbf7bf1":"plt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, y= 'country', x= 'total_vaccinations_per_hundred',\n                order= df_country.sort_values('total_vaccinations_per_hundred', ascending= False)['country'][:15],\n                palette= 'GnBu_r')\n\nplt.title('Total Vaccinations \/ Population', size= 20)\nplt.xlabel('Total Vaccinations', size= 15)\nplt.ylabel('Country', size= 15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(width + x, height + y, '{:.1f} %'.format(width))","dc89af81":"plt.figure(figsize= (8, 5))\n\n\nax = sns.barplot(data= df_country, y= 'country', x= 'people_vaccinated_per_hundred',\n                order= df_country.sort_values('people_vaccinated_per_hundred', ascending= False)['country'][:15],\n                palette= 'GnBu_r')\n\nplt.title('Percentage of the Vaccinated Population', size= 17)\nplt.xlabel('People Vaccinated', size= 15)\nplt.ylabel('Country', size= 15)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    height = patch.get_height()\n    x = patch.get_x()\n    y = patch.get_y()\n    \n    plt.text(width + x, height + y, '{:.1f} %'.format(width))","6237f923":"## Imports\n","d2c10920":"## Introduction\n\nWelcome! In this notebook we will analyze the global data of covid 19: confirmed cases, deaths, recoveries, vaccinations etc.\n\nIf you are not interested in seeing the data processing, only the analysis, go straight to [Visualization](#Visualization)\n\n### Menu:\n- [Imports](#Imports)\n- [Data Cleaning](#Data-Cleaning)\n    - [Summary Data](#Summary-Data)\n    - [Vaccines Data](#Vaccines-Data)\n    - [Creating Country DataFrame](#Creating-Country-DataFrame)\n    - [Creating Vaccines DataFrame](#Creating-Vaccines-DataFrame)\n- [Visualization](#Visualization)\n   - [Summary Visualization](#Summary-Visualization)\n   - [Vaccination-Visualization](#Vaccination-Visualization)\n","ae666dca":"- **Insights**\n    - Starting in March, China started a mass vaccination.\n    - From April onwards, the number of daily vaccinations in the United States has steadily declined while China's has increased exponentially.","f480bf0b":"### Vaccines Data","e62ede3e":"### Creating Vaccines DataFrame","b884c602":"## Data Cleaning","cd1c11b1":"## Summary Visualization","e2aa2e90":"# Covid19 Global Analysis\n\n<div align=\"center\">\n<img src= \"https:\/\/setorsaude.com.br\/wp-content\/uploads\/2020\/08\/Vacina-contra-Covid-que-ser%C3%A1-testada-pelo-Hospital-S%C3%A3o-Lucas-da-PUC-RS-chega-nesta-segunda-feira-a-Porto-Alegre.jpg\" width=\"640\" height= \"480\" \/>\n<\/div>","ec69819e":"- **Insights**\n    - Most countries vaccinated less than half the population.\n    - The countries with the greatest progress in vaccination are in North America and Europe.\n    - The least vaccinated countries are in Africa.\n    \n    ","9d603d1e":"### Deaths","987e9cc1":"### Total Cases","64bd2200":"# Visualization","c0b31976":"### Summary Data","6ce58e78":"## Vaccination Visualization","3d672fc0":"### Creating Country DataFrame","f8b345d6":"- **Insights**\n    - The most popular vaccines are AstraZeneca, Pfizer and Moderna.","66dbd9cc":"### Recovered"}}