{"cell_type":{"8059e780":"code","1a336164":"code","b4864e98":"code","6b3d040c":"code","6c03088d":"code","6e107192":"code","1cbb5dd2":"code","b6f73b96":"code","cb4e8ca4":"code","86031b88":"code","693a7723":"code","27e815a3":"code","6fe6ff95":"code","ecc23c54":"code","1306d73d":"code","0db02908":"code","76584cba":"markdown","c1f77003":"markdown"},"source":{"8059e780":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","1a336164":"DATA_PATH = '\/kaggle\/input\/paysim1\/PS_20174392719_1491204439457_log.csv'\ndf = pd.read_csv(DATA_PATH)","b4864e98":"df.sample(10)","6b3d040c":"sns.pairplot(df.sample(10**3));","6c03088d":"plt.figure(figsize=(13, 10))\nsns.heatmap(df.corr(), annot=True);","6e107192":"pd.crosstab(df['isFraud'], df['isFlaggedFraud'])","1cbb5dd2":"pd.crosstab(df['type'], df['isFraud'])","b6f73b96":"df.sample().to_dict()","cb4e8ca4":"plt.figure(figsize=(20, 5))\ndf['step'].value_counts().sort_index().plot();\n# plt.xlim(150, 450);","86031b88":"plt.figure(figsize=(20, 5))\ndf[df['isFraud']==1]['step'].value_counts().sort_index().plot();\n# plt.xlim(150, 450);","693a7723":"plt.figure(figsize=(30, 5))\nsns.heatmap(pd.crosstab(df['isFraud'], df['step']), cmap='Blues');","27e815a3":"plt.figure(figsize=(10, 5))\nsns.boxplot(x='type', y=np.log10(df['amount'] + 1), hue='isFraud', data=df);","6fe6ff95":"plt.figure(figsize=(10, 5))\nsns.violinplot(x='type', y=np.log10(df['amount'] + 1), data=df, hue='isFraud', split=True);","ecc23c54":"df['step'].value_counts().sort_index()","1306d73d":"df['hour'] = df['step'].apply(lambda x: x % 24)\n\nfig, ax = plt.subplots(1, 2, figsize=(10, 5))\ndf['hour'].value_counts().sort_index().plot(kind='bar', ax=ax[0])\ndf[df['isFraud']==1]['hour'].value_counts().sort_index().plot(kind='bar', ax=ax[1])\nax[0].set_title('Non-Fraud Cases')\nax[1].set_title('Fraud Cases');","0db02908":"plt.figure(figsize=(15, 2))\nfraud_channels = df[(df['type']=='CASH_OUT') | (df['type']=='TRANSFER')]\ntype_hour = fraud_channels.pivot_table(index='type', columns='hour', values='isFraud', aggfunc='sum')\nsns.heatmap(type_hour, cmap='Blues', linewidth=1);\ndel fraud_channels\ndel type_hour","76584cba":"Above table suggests that the fraud happens only if the type is 'Cash_out' or 'Transfer'. Perhaps, only selecting those cases might increase the accuracy of the model.","c1f77003":"This number matches the 31 * 24. So, it makes sense that the 'step' variable corresponds to an hour."}}