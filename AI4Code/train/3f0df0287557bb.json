{"cell_type":{"8578a51d":"code","035edbc0":"code","40421ece":"code","7d8d212f":"code","3878c379":"code","4f2e4d18":"code","136a588d":"code","7b7f7497":"code","5c1f9f28":"code","94b2cd3b":"code","381a9ccd":"code","af7fdc1a":"code","e1c921ed":"code","a7c491c3":"code","67306fd4":"code","c20fc196":"code","074fc621":"code","4848b9ab":"code","2a812db3":"code","5c689f87":"code","8e4d85f2":"code","68246519":"code","6d3eb68a":"code","ade5a9f5":"code","8703533f":"code","6b4c4e1a":"code","3edde118":"code","bf6e470d":"code","0bef3eb0":"code","85686dae":"code","9395e2a7":"code","83931c20":"code","d5c757e4":"code","f0012f4c":"code","b35469c7":"markdown","5793c9c3":"markdown","50db49e7":"markdown","7dfe4885":"markdown","376b72f9":"markdown","57d3bffa":"markdown","92fdab67":"markdown","1912be8e":"markdown","5bec36ec":"markdown","108362c7":"markdown","84ec3215":"markdown","25aebb05":"markdown","4a865eac":"markdown","9f7e34b0":"markdown","8a9af765":"markdown","45f4a3cc":"markdown","0f0039b8":"markdown","61e98e08":"markdown","61680053":"markdown","f62e8357":"markdown","c4c6ec35":"markdown","c8400945":"markdown","5f8d2c24":"markdown","1e73987e":"markdown","6bc848fa":"markdown","8d34e1d9":"markdown"},"source":{"8578a51d":"import warnings\nwarnings.filterwarnings('ignore')","035edbc0":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","40421ece":"data = pd.read_csv('..\/input\/new2021\/new (2).csv')","7d8d212f":"data.head(2)","3878c379":"data.columns","4f2e4d18":"data.drop(labels = ['Unnamed: 0'],axis = 1,inplace =True)","136a588d":"data.describe()","7b7f7497":"data['Date']=pd.to_datetime(data['Date']) #Converting date into datetime object","5c1f9f28":"data_new = data.set_index(data['Date']) #Setting the date column as index","94b2cd3b":"data_new1 = data_new.drop(labels =['Date'],axis = 1) #Deleting the data column","381a9ccd":"fig = plt.figure(figsize = (10,5))\ndata_new1['Monthly Mean Total Sunspot Number'].plot(style = 'k.')","af7fdc1a":"data_new1['2019'].resample('M').mean().plot(kind='bar')","e1c921ed":"data_q = data_new1.resample('q').mean()","a7c491c3":"data_q.head()","67306fd4":"#Ho: It is non stationary\n#H1: It is stationary\ndef adfuller_test(data):\n    result = adfuller(data)\n    labels =['ADF Tesr Statistic','p-value','Lags Used','Number of Observations Used']\n    for value,label in zip(result,labels):\n        print(label+\":\"+str(value))\n    if result[1] <= 0.05:\n        print(\"strong evidence against the null hypothesis(Ho), reject the null hypothesis. Data has no unit root and is stationary\")\n    else:\n        print(\"weak evidence against null hypothesis, time series has a unit root, indicating it is non-stationary \")","c20fc196":"adfuller_test(data_q)","074fc621":"data_q.plot()","4848b9ab":"base_data = data_q.copy()","2a812db3":"base_data['Shifted_Monthly Mean Total Sunspot Number'] = base_data['Monthly Mean Total Sunspot Number'].shift(1)","5c689f87":"base_data[['Monthly Mean Total Sunspot Number','Shifted_Monthly Mean Total Sunspot Number']].plot(figsize=(12,8))","8e4d85f2":"base_data[['Monthly Mean Total Sunspot Number','Shifted_Monthly Mean Total Sunspot Number']]['2018':].plot(figsize=(12,8))","68246519":"base_data = base_data.dropna()\nfrom sklearn.metrics import mean_squared_error\nprint('Mean Squared Error: '+str(mean_squared_error(base_data['Monthly Mean Total Sunspot Number'],base_data['Shifted_Monthly Mean Total Sunspot Number'])))","6d3eb68a":"fig = plt.figure(figsize = (10,10))\nfrom pandas.plotting import autocorrelation_plot\nautocorrelation_plot(data_q)\nplt.show()","ade5a9f5":"from statsmodels.graphics.tsaplots import plot_acf,plot_pacf\nimport statsmodels.api as sm","8703533f":"fig = plt.figure(figsize=(12,8))\nax1 = fig.add_subplot(211)\nfig = sm.graphics.tsa.plot_acf(data_q,lags=40,ax=ax1)\nax2 = fig.add_subplot(212)\nfig = sm.graphics.tsa.plot_pacf(data_q,lags=40,ax=ax2)\n","6b4c4e1a":"from statsmodels.tsa.arima_model import ARIMA","3edde118":"model=ARIMA(data_q,order=(2,0,2))\nmodel_fit=model.fit()","bf6e470d":"model_fit.summary()","0bef3eb0":"data_q['forecast']=model_fit.predict(start=1000,end=1500,dynamic=True)\ndata_q[['Monthly Mean Total Sunspot Number','forecast']].plot(figsize=(12,8))","85686dae":"pred = data_q[data_q.forecast.notna()]\npred[['Monthly Mean Total Sunspot Number','forecast']].plot(figsize=(12,8))","9395e2a7":"model=sm.tsa.statespace.SARIMAX(data_q['Monthly Mean Total Sunspot Number'],order=(2, 0, 2),seasonal_order=(2,0,2,6)) #seasonal_order is (p,d,q,seasonal_value) In this case I'm considering it as 6\nresults=model.fit()","83931c20":"results.summary()","d5c757e4":"data_q['forecast']=results.predict(start=1000,end=1084,dynamic=True)\ndata_q[['Monthly Mean Total Sunspot Number','forecast']].plot(figsize=(12,8))","f0012f4c":"pred = data_q[data_q.forecast.notna()]\npred[['Monthly Mean Total Sunspot Number','forecast']].plot(figsize=(12,8))","b35469c7":"<h2 style=\"background-color: steelblue;\">ARIMA Model","5793c9c3":" <h2 style=\"background-color: steelblue;\">Thats all for this notebook....Thanks for your valuable time....If you like the content please upvote it:)","50db49e7":"<h4 style=\"color: #731768;\">\n    \nA time series with a trend is called non-stationary.\n\nAn identified trend can be modeled. Once modeled, it can be removed from the time series dataset. This is called detrending the time series.\n\nIf a dataset does not have a trend or we successfully remove the trend, the dataset is said to be trend stationary.\n    \n<\/h4>","7dfe4885":"<h2 style=\"background-color: steelblue;\">Actual value vs Modelled Value","376b72f9":"<h4 style=\"color: #731768;\">\n    <center>Autocorrelation and Partial Autocorrelation<\/center><br\/><br\/>\n\n\n Identification of an Auto Regression model is often best done with the PACF.\n* For an AR model, the theoretical PACF \u201cshuts off\u201d past the order of the model. The phrase \u201cshuts off\u201d means that in theory the partial autocorrelations are equal to 0 beyond that point. Put another way, the number of non-zero partial autocorrelations gives the order of the AR model. By the \u201corder of the model\u201d we mean the most extreme lag of x that is used as a predictor.<br\/><br\/>\n\n\nIdentification of an MA model is often best done with the ACF rather than the PACF\n\n\n* For an MA model, the theoretical PACF does not shut off, but instead tapers toward 0 in some manner. A clearer pattern for an MA model is in the ACF. The ACF will have non-zero autocorrelations only at lags involved in the model.\n\n<\/h4>","57d3bffa":"<h2 style=\"background-color: steelblue;\">AutoCorrelation Plot","92fdab67":"<h2 style=\"background-color: steelblue;\">Importing the Libraries<\/h2>","1912be8e":"<h4 style=\"color: #731768;\">\n Sunspots are temporary phenomena on the Sun's photosphere that appear as spots darker than the surrounding areas. They are regions of reduced surface temperature caused by concentrations of magnetic field flux that inhibit convection. Sunspots usually appear in pairs of opposite magnetic polarity.heir number varies according to the approximately 11-year solar cycle.<br\/><br\/>\nIndividual sunspots or groups of sunspots may last anywhere from a few days to a few months, but eventually decay. Sunspots expand and contract as they move across the surface of the Sun, with diameters ranging from 16 km (10 mi) to 160,000 km (100,000 mi). Larger sunspots can be visible from Earth without the aid of a telescope. They may travel at relative speeds, or proper motions, of a few hundred meters per second when they first emerge<br\/><br\/>\n \nIn this notebook I will creating a base forecasting model and advanced forecassting models for doing time series analysis\n* Base model use the concept of shifting\n* Advanced model use the concept of ARIMA and SARIMA\n<\/h4>\n\n\n","5bec36ec":"<h2 style=\"background-color: steelblue;\">Function for checking whether the series is stationary or not","108362c7":"<h2 style=\"background-color: steelblue;\">Actual value vs Modelled Value","84ec3215":"<h2 style=\"background-color: steelblue;\">Actual value vs Modelled Value","25aebb05":"<h2 style=\"background-color: steelblue;\">Quater-Wise Resampling the data","4a865eac":"<h2 style=\"background-color: steelblue;\">Visualizing the data","9f7e34b0":"<h2 style=\"background-color: steelblue;\">Statistical Description","8a9af765":"<h4 style=\"color: #731768;\">\nIn statistics and econometrics, and in particular in time series analysis, an autoregressive integrated moving average (ARIMA) model is a generalization of an autoregressive moving average (ARMA) model. Both of these models are fitted to time series data either to better understand the data or to predict future points in the series (forecasting). ARIMA models are applied in some cases where data show evidence of non-stationarity, where an initial differencing step (corresponding to the \"integrated\" part of the model) can be applied one or more times to eliminate the non-stationarity.<br\/><br\/>\n    \n\nThe AR part of ARIMA indicates that the evolving variable of interest is regressed on its own lagged (i.e., prior) values. The MA part indicates that the regression error is actually a linear combination of error terms whose values occurred contemporaneously and at various times in the past.The I (for \"integrated\") indicates that the data values have been replaced with the difference between their values and the previous values (and this differencing process may have been performed more than once). The purpose of each of these features is to make the model fit the data as well as possible.\n\nNon-seasonal ARIMA models are generally denoted ARIMA(p,d,q) where parameters p, d, and q are non-negative integers, p is the order (number of time lags) of the autoregressive model, d is the degree of differencing (the number of times the data have had past values subtracted), and q is the order of the moving-average model. Seasonal ARIMA models are usually denoted ARIMA(p,d,q)(P,D,Q)m, where m refers to the number of periods in each season, and the uppercase P,D,Q refer to the autoregressive, differencing, and moving average terms for the seasonal part of the ARIMA model.\n    <\/h4>","45f4a3cc":"d should be either 0 or 1 or 2. I choose d as 0 (**d=0**)","0f0039b8":"![image.png](attachment:image.png)","61e98e08":"<center><h2 style=\"background-color: steelblue;\">Advanced Models<\/center>","61680053":"In this plot we can see the line enters the dotted region when the lag is lesser than 5 so we can take any value from 0 to 4 for p. I choose p to be 2 (**p=2**)","f62e8357":"In Partial Autocorrelation Graph after the second second vertical line there is sudden cutoff which makes the q to be 2 (**q=2**)","c4c6ec35":"<h2 style=\"background-color: steelblue;\">BASE MODEL","c8400945":"<h2 style=\"background-color: steelblue;\">Seasonal ARIMA Model","5f8d2c24":"<h2 style=\"background-color: steelblue;\">Auto-Correlation and Partial-Correlation Graphs","1e73987e":"<center><h1 style=\"color: Red;background-color:Yellow\">Time Series Forcasting with sunspot data<\/h1><\/center>","6bc848fa":"<h2 style=\"background-color: steelblue;\">Loading the dataset","8d34e1d9":"<h2 style=\"background-color: steelblue;\">Visualizing the sunspot in 2019"}}