{"cell_type":{"1bdba30c":"code","b76f0bf9":"code","187b613c":"code","991325b1":"code","a521988b":"code","4a314a37":"code","72c6a1b1":"code","5de0fd9c":"code","dc5a28d2":"code","100a7938":"code","d4dd720c":"code","9b51fb7e":"code","94e741ae":"code","915daccb":"code","cdcbb9ca":"code","fd532633":"code","4b55c669":"code","fd15117c":"code","829f9e05":"code","46e2b2bd":"code","aa4d3019":"markdown","91d31de7":"markdown","a0d2627d":"markdown","9a1b519c":"markdown","f14f6db4":"markdown","3c2e405b":"markdown","936b8eed":"markdown"},"source":{"1bdba30c":"!  pip install plotly","b76f0bf9":"! pip install cufflinks","187b613c":"from mpl_toolkits.mplot3d import Axes3D\nfrom sklearn.preprocessing import StandardScaler\nimport matplotlib.pyplot as plt # plotting\n%matplotlib inline\nimport numpy as np # linear algebra\nimport os # accessing directory structure\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nfrom matplotlib import ticker \nimport seaborn as sns\nfrom datetime import datetime, timedelta,date\nimport plotly.express as px\n\n\n#from plotly import __version__\n#import cufflinks as cf\nimport plotly.offline as py\nimport plotly.express as px\n#py.initnotebookmode(connected=True)\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nimport plotly as py\ninit_notebook_mode(connected=True)\ninit_notebook_mode(connected=True)\nimport plotly.tools as tls\nimport plotly.graph_objs as gobj\n","991325b1":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","a521988b":"nRowsRead = 1000 # specify 'None' if want to read whole file\n# upload data files: covid19 & province_code\ndf = pd.read_csv('\/kaggle\/input\/covid19_1904.csv',parse_dates = ['date'])\ndf.dataframeName = 'covid19_1904.csv'\ndf1 = pd.read_csv('\/kaggle\/input\/P_code.csv')\ndf1.dataframeName = 'P_code.csv'\nevents= pd.read_csv('\/kaggle\/input\/Canada_events.csv')\nevents.dataframeName = 'Canada_events.csv'\ndf2 = pd.merge(df,\n                df1,\n                on = 'prname',\n                how = 'inner')\n#pd.to_datetime(df2['date'], infer_datetime_format =True)\n#df2 = df2.sort_values(by=\"date\")\ndf2.tail(2)","4a314a37":"events['Death'] = events['Death'].fillna('0')\npd.to_datetime(events['Date'], infer_datetime_format =True)\nevents.drop('Description', axis = 1, inplace = True)\nevents.head()","72c6a1b1":"# plotted the timeline X = date vs Y = confirmed cases based on at the day of event.\n\nfig = px.scatter(events, x='Date', y='Confirmed', size_max = 14, hover_name = 'CA_events', color ='CA_events')\nfig.update_traces(marker=dict(size=8,line=dict(width =2, color ='DarkSlateGrey')),\n                 selector=dict(mode='markers')),\nfig.update_layout(uniformtext_minsize=5,uniformtext_mode='hide',\n        title=\"Timeline of COVID-19 Confirmed Cases in Canada\", \n        width =1200,\n        height=700,\n        xaxis_title =\" Date (since January 31, 2020)\",\n        yaxis_title = \"# of Confirmed Cases\"),\n        #xaxis.set_major_formatter(mdates.DateFormatter('%b %d')\npy.offline.iplot(fig)","5de0fd9c":"df2.info()","dc5a28d2":"df2.columns","100a7938":"# Data cleaning and manipulation\n# Drop columns\ndf2.drop(['pruid','prnameFR','numprob','percentrecover','ratetested','percentoday'],axis =1, inplace =True)\ndf2.head(2)","d4dd720c":"# Replace following column names with: \n#'prname' with 'Province' |'date' with 'Date'|'numconf' with 'Confirmed'|'numdeaths' with 'Deaths'\n# 'numtotal' with 'Total' |  'numtested' with 'Tested' |'numrecover' with 'Recovered'\ndf2.columns = ['Province','Date','Confirmed','Deaths','Total','Tested','Recovered', 'Daily_cases', 'P_code']\ndf2.head(2)","9b51fb7e":"# Drop \"Repatriated travellers\" from Province\ndf3 = df2.set_index('P_code')\ndf3.drop(['RT','CA'], inplace = True)\ndf3['Tested']=df3['Tested'].fillna('0')\ndf3['Recovered']=df3['Recovered'].fillna('0')\ndf3['Daily_cases']=df3['Daily_cases'].fillna('0')\ndf3.head(4)","94e741ae":"df3.isnull().sum()","915daccb":"# Correlation test is performed to understand the relationship between confirmed, deaths and total cases\ndf3.corr()\nplt.figure(figsize=(6,4))\nsns.heatmap(df3.corr(), annot =True)","cdcbb9ca":"fig1 = px.line(df3, x='Date', y='Confirmed', color ='Province')\nfig1.update_layout(uniformtext_minsize=8, uniformtext_mode='hide',\ntitle=\"Fig1: Trajectory of COVID-19 Confirmed Cases - Canada\",              \n        xaxis_title =\" Date\",\n        yaxis_title = \"# of Confirmed Cases\")\n        #yaxis_type =\"log\")\npy.offline.iplot(fig1)","fd532633":"fig2 = px.line(df3, x='Date', y='Deaths',color ='Province')\nfig2.update_layout(uniformtext_minsize=8, uniformtext_mode='hide',\ntitle=\"Fig2: Trajectory of COVID-19 Deaths - Canada\",              \n        xaxis_title =\" # of Confirmed Cases\",\n        yaxis_title = \"# of Deaths\",\n        yaxis_type =\"log\")\npy.offline.iplot(fig2)","4b55c669":"fig3 = px.line(df3, x='Confirmed', y='Deaths',color ='Province')\nfig3.update_layout(uniformtext_minsize=8, uniformtext_mode='hide',\ntitle=\"Fig3: COVID-19 Deaths Growing Exponetially in Canada\",              \n        xaxis_title =\" # of Confirmed Cases\",\n        #xaxis_type =\"log\",\n        yaxis_title = \"# of Deaths\",\n        yaxis_type =\"log\")\npy.offline.iplot(fig3)","fd15117c":"df4 = df2.set_index('P_code')\ndf4.drop(['RT','NWT', 'NU','YT','PE','NB','NS','NL','SK','MB','CA'], inplace = True)\ndf4['Tested']=df4['Tested'].fillna('0')\ndf4['Recovered']=df4['Recovered'].fillna('0')\ndf4['Daily_cases']=df4['Daily_cases'].fillna('0')\ndf4.head(2)","829f9e05":"m =df4.groupby('Date')['Confirmed', 'Deaths', 'Tested','Total','Recovered', 'Daily_cases'].sum()\nm = df4.sort_values('Confirmed', ascending =  False).reset_index()\nm ['mortality_rate'] = (m['Deaths'] \/ m ['Confirmed'])*100.0\nm ['mortality_rate'] = m ['mortality_rate'].fillna('0')\nm.head(12)","46e2b2bd":"fig4 =px.line(m, x = 'Date', y = 'mortality_rate', color = 'Province')\nfig4.update_layout(uniformtext_minsize=8, uniformtext_mode='hide',\ntitle=\" Fig:4: COVID-19 Mortality Rates by Province\",              \n        xaxis_title =\" Dates\",\n        yaxis_title = \"Mortality Rate (%)\")\n        #yaxis_type =\"log\")\npy.offline.iplot(fig4)","aa4d3019":"## Timeline (Events)","91d31de7":"## Exponential Growth - Graphs","a0d2627d":"## Mortality Rate","9a1b519c":"The above figure shows the exponential growth in the number of COVID-19 confirmed and death cases in Canada as of April 18, 2020. This exponential trend is visible for some time despite the government activated public emergency operations on January 15th, 2020, and then followed by the travel ban and severe social distancing actions on March 13th, 2020 onwards.","f14f6db4":"## Introduction\nEven after sixth week into nationwide lockdown, stay home practices, social distancing some provinces in Canada still show a rise in the COVID-19 cases despite measures are taken to slow it down. This exponential trend is anticipated to continue for another few weeks, even if preventive actions are in place today as expected with any epidemiological curve. Canada data source: https:\/\/www.canada.ca\/en\/public-health\/services\/diseases\/2019-novel-coronavirus-infection.html\n\n","3c2e405b":"## Conclusion\n\nIdeally, to fight the pandemic is to completely stop the virus spread. It requires strategic efforts from both government and individuals as a collective society. Canada has passed the low curve stage where virus was spreading slower and few cases are reported in the earlier months and currently leading up to peak or higher curve stage where virus is spreading fast (it might last next few weeks \u2013up to early May 2020) and then as with any epidemiological curve it will drop down at some point in time.\n\nMeanwhile, as a collective society one can take measures such as keeping distance from vulnerable people, maintain social distancing, self-isolation, and good hygiene practices and lastly abide with government \/health procedures to decrease the virus transmission.","936b8eed":"## Exploratory Analysis\n\n## Latest update: April 19, 2020\n\nThe COVID-19 outbreak is currently severe in Quebec (17,521 confirmed \/805 deaths\/ mortality rate 4.6% among confirmed) and Ontario (10,578 confirmed \/553 deaths \/ mortality rate 5.2%), refer to Fig.3 & 4 below. Whereas, initially British Columbia and Alberta had shown an increase in virus infection in early March but somehow both provinces managed to flatten the curve (Fig 3). In fact, Quebec was the first province to impose state\/ public health emergency in relation to the COVID -19 on March 13th, 2020, and then Ontario, Alberta, and British Columbia followed on March 17 and March 18, 2020, respectively.\n\nAs of April 18, 2020, a total of (1561 confirmed \/ 78 deaths \/ mortality rate 4.8% among confirmed) reported by British Columbia and (2397 confirmed \/ 50 deaths \/ mortality rate 2%) by Alberta. It is evident that both BC and AB are flattening the curve (Fig 3). The reason could be due to less influx of COVID-19 super spreaders coming into the province or having a better integrated healthcare system (Fig:Timeline)\n\nWhereas, it is slightly a different story for Ontario and Quebec. On February 9, 2020 nationwide airport screenings and 14- day mandatory quarantine measures were imposed on travelers coming into provinces. At the time Ontario reported only 3 confirmed and Quebec reported none COVID-19 cases. And, not until March 20th, 2020, which was exactly a month later, they have decided to close US- Canada borders for 30 days. At this time, confirmed cases rose to 311 in Ontario and 139 in Quebec respectively (Fig 3).\n\nSince New York city has been one of the worst COVID-19 hit cities in the world and being a neighbor to New York city could be one of the reasons why Ontario and Quebec have been the worst among other Canadian provinces. First case in New York was reported on March 1st, then on March 9, 16 cases were recorded. By the end of March 25, the numbers reported were significantly higher in New York city (17800 cases).\n\nIt is possible that an influx of super spreaders returning into Ontario and Quebec during those peak periods and its aftermath are adding up to an increased number of cases in both provinces. Also, Canada health authorities have been monitoring the transmission of the virus via travel and community exposures, but data not made public at this point for further analysis. An epidemiological curve usually shows the progression of the infectious disease in an outbreak overtime.\n\nAlso, the COVID-19 virus has an incubation period of 14 days. So, there is an inherent delay between the date someone becomes infected and the date it is tested positive by health authorities. There are four possible cases associated with COVID-19 such as infected but not contagious and asymptomatic, infected, contagious but asymptomatic, infected contagious and symptomatic and lastly recovering, shows symptoms but not contagious. It really depends on who becomes exposed to and how the body's immune system responds to the virus."}}