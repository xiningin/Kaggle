{"cell_type":{"f9a74659":"code","be05a92d":"code","1bb1b0f8":"code","b5969f67":"code","34e91d23":"code","a1007cfc":"code","b8036876":"code","57e18239":"code","2d9e26f0":"code","122decba":"code","749e624b":"code","12006430":"code","db87b046":"code","c9c53ffe":"code","106b37ea":"code","6adff1a2":"code","6206ee5f":"code","91af353c":"code","b5a845da":"code","e5c19e76":"code","bc534ab9":"code","3d88aec1":"code","eb8fa606":"code","391511c1":"code","5826fd4f":"code","ebc65812":"code","f67121b9":"code","1d080db2":"code","8c4c3d1c":"code","3193e766":"markdown","4e14801c":"markdown","7c1b9425":"markdown","973b013e":"markdown","4667f878":"markdown","f7afeb98":"markdown","292d2c74":"markdown","2e2127ac":"markdown","4c42e537":"markdown","e005b12f":"markdown","6013999c":"markdown","9d196241":"markdown","7a81b62c":"markdown","e5021a3a":"markdown","9069a96b":"markdown","fb212005":"markdown"},"source":{"f9a74659":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","be05a92d":"import pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\n%matplotlib inline\nfrom matplotlib.pylab import rcParams\nrcParams['figure.figsize']=15,10","1bb1b0f8":"data=pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')\nprint(data.shape)\ndata.head()","b5969f67":"#Dropping the columns Sno and Last Update\ndata.drop(['SNo','Last Update'],axis=1,inplace=True)\n\n#Getting additonal Active cases for better implementation and information\ndata['Active']=data['Confirmed']-data['Deaths']-data['Recovered']\n\ndata.tail()","34e91d23":"print(data.isna().sum())\n\ndata['Province\/State']=data['Province\/State'].fillna('Not Specified')\nprint('\\n\\n',data.isna().sum())","a1007cfc":"print(data.dtypes)\n\ndata['Confirmed']=data['Confirmed'].astype(int)\ndata['Recovered']=data['Recovered'].astype(int)\ndata['Deaths']=data['Deaths'].astype(int)\ndata['Active']=data['Active'].astype(int)\n\nprint('\\n\\n',data.dtypes)","b8036876":"china_cases=data[data['ObservationDate']==max(data['ObservationDate'])].reset_index(drop=True)\nchina_cases=china_cases.groupby('Country\/Region')['Confirmed'].sum()['Mainland China']\nchina_cases","57e18239":"data_nc=data[data['Country\/Region']!='Mainland China']\ndata_nc","2d9e26f0":"#China cases included\ndata_per_day=data.groupby('ObservationDate')[['Confirmed','Deaths','Recovered','Active']].sum()\n#China cases excluded\ndata_per_day_nc=data_nc.groupby('ObservationDate')[['Confirmed','Deaths','Recovered','Active']].sum()","122decba":"data_per_day.plot(kind='line',figsize=(20,8))\nplt.ylabel('Number of Cases',size=20)\nplt.xlabel('Dates',size=20)\nplt.title('Number of cases including China(Initially)',size=20)\nplt.legend(prop={'size':'15'})","749e624b":"#Data for Countries except China\ndata_per_day_nc.plot(kind='line',figsize=(20,8))\nplt.ylabel('Number of Cases',size=20)\nplt.xlabel('Dates',size=20)\nplt.title('Number of cases excluding China(Initially)',size=20)\nplt.legend(prop={'size':'15'})","12006430":"from fbprophet import Prophet\n\np=Prophet()","db87b046":"p.add_seasonality(name='monthly',period=30.5,fourier_order=5)","c9c53ffe":"print(data_per_day.shape)\n\ncases=data_per_day.reset_index()\ncases_nc=data_per_day_nc.reset_index()","106b37ea":"confirmed_cases=cases_nc[['ObservationDate','Confirmed']]\nrecovered_cases=cases_nc[['ObservationDate','Recovered']]\ndeath_cases=cases_nc[['ObservationDate','Deaths']]\nactive_cases=cases_nc[['ObservationDate','Active']]","6adff1a2":"confirmed_cases.rename(columns={'ObservationDate':'ds','Confirmed':'y'},inplace=True)","6206ee5f":"#Fit Model\np.fit(confirmed_cases)","91af353c":"#Future Dates\nfuture_dates=p.make_future_dataframe(periods=30)\nfuture_dates","b5a845da":"#Prediction\nprediction=p.predict(future_dates)","e5c19e76":"#Plot Prediction\np.plot(prediction,figsize=(20,8))\nplt.xlabel('Dates',size=20)\nplt.ylabel('Number of Confirmed cases',size=20)\nplt.title('Predicted Number of Confirmed Cases',size=20)","bc534ab9":"p.plot_components(prediction)","3d88aec1":"#Find Points\/Dates for change\nfrom fbprophet.plot import add_changepoints_to_plot\nfig=p.plot(prediction)\nc=add_changepoints_to_plot(fig.gca(),p,prediction)","eb8fa606":"prediction.tail().T","391511c1":"prediction[['ds', 'yhat', 'yhat_lower', 'yhat_upper']].tail()","5826fd4f":"k=len(prediction)\nfor i in range(confirmed_cases.shape[0],k) :\n  print('Prediction of Confirmed cases for',prediction['ds'][i],'is ',round(prediction['yhat'][i].astype(int))+china_cases)","ebc65812":"data1=data[data['ObservationDate'] == max(data['ObservationDate'])].reset_index(drop=True)\ndf = data1.groupby('Country\/Region')['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\ndf1 = df.sort_values(by='Confirmed', ascending=False).reset_index(drop=True)\ndf1 = df1[['Country\/Region', 'Confirmed', 'Active', 'Deaths', 'Recovered']].reset_index(drop=True)","f67121b9":"from IPython.display import display, HTML\ndisplay(HTML(df1.to_html()))","1d080db2":"ab=prediction[prediction['ds']>=max(data['ObservationDate'])][['ds','yhat']].reset_index(drop=True)\nab.rename(columns={'ds':'date','yhat':'confirmed_val'},inplace=True)\nab","8c4c3d1c":"cd=pd.DataFrame(ab)\ncd.to_csv('covid_19_data.csv',index=False)","3193e766":"# Dropping Serial Number and Last Update columns for now as they wont be of a great value\n# Also creating a new column for Active Cases of Corona Virus","4e14801c":"# We are using fbprophet library for time-series analysis","7c1b9425":"# As the cases in China will not play a significant role in prediciting, we drop those rows.\n# Values with _nc are the values with notchina","973b013e":"# Plot for Predicted values of confirmed cases","4667f878":"# Importing Libraries","f7afeb98":"# Considering a variable consisting cases of Non-China","292d2c74":"# The yhat consists of the values we need, therefore getting those values","2e2127ac":"# Changing the data types","4c42e537":"# Reading Data","e005b12f":"# Plot for No.of cases excluding China","6013999c":"# So code might not give the accurate predictions but are close enough.","9d196241":"# Only Cases in China","7a81b62c":"# Plot for No.of cases including China","e5021a3a":"# Predicted values","9069a96b":"# Below graphs shows the trends at which the cases would rise","fb212005":"# Checking and Handling NA values"}}