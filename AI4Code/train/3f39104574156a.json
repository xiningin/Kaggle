{"cell_type":{"788ae8a3":"code","9a84ef0a":"code","d96ac34c":"code","7ddd25c8":"code","3b3d2101":"code","d76717f8":"code","ba634bf8":"code","902d6034":"code","15c99997":"code","a04bb3bc":"code","b9a24fcc":"markdown","22c8e653":"markdown","1f4c2dfe":"markdown","568cb0e7":"markdown","58db1bd8":"markdown","1a10d512":"markdown","d3b68348":"markdown","393e3cc4":"markdown","4d30676d":"markdown","acecb7f1":"markdown","d47aef8b":"markdown","3e2bba3e":"markdown"},"source":{"788ae8a3":"import pandas as pd \nimport numpy as np\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline \nfrom bubbly.bubbly import bubbleplot \nfrom __future__ import division\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nIS_LOCAL = False\nimport os\nif(IS_LOCAL):\n    PATH=\"..\/input\/earthquake-database\"\nelse:\n    PATH=\"..\/input\"\nprint(os.listdir(PATH))","9a84ef0a":"events_df = pd.read_csv(PATH+\"\/database.csv\")","d96ac34c":"print(\"Earthaquakes data -  rows:\",events_df.shape[0],\" columns:\", events_df.shape[1])","7ddd25c8":"events_df.head(5)","3b3d2101":"events_df['Type'].unique()","d76717f8":"earthquakes = events_df[events_df['Type']=='Earthquake'].copy()","ba634bf8":"earthquakes[\"Year\"] = pd.to_datetime(earthquakes['Date']).dt.year","902d6034":"print(\"Years from:\", min(earthquakes['Year']), \" to:\", max(earthquakes['Year']))\nprint(\"Magnitude from:\", min(earthquakes['Magnitude']), \" to:\", max(earthquakes['Magnitude']))","15c99997":"earthquakes[\"RichterM\"] = np.power(earthquakes[\"Magnitude\"],10)","a04bb3bc":"figure = bubbleplot(dataset=earthquakes, x_column='Longitude', y_column='Latitude', color_column = 'Magnitude',\n    bubble_column = 'Magnitude', time_column='Year', size_column = 'RichterM',\n    x_title='Longitude', y_title='Latitude', \n    title='Earthquakes position (long, lat) and magnitude - from 1965 to 2016', \n    colorscale='Rainbow', colorbar_title='Magnitude', \n    x_range=[-181,181], y_range=[-90,90], scale_bubble=0.5, height=650)\niplot(figure, config={'scrollzoom': True})","b9a24fcc":"The Magnitude scale is logarithmic, i.e. **each whole number increase in magnitude represents a tenfold increase in measured amplitude** <a href='#4'>[5]<\/a>. To represent correctly the relative amplitude of earthquakes of different magnitude we create also a variable (**RichterM**), calculated as following:","22c8e653":"# <a id=\"1\">Earthquakes data<\/a>\n\n## Load the packages","1f4c2dfe":"<h1><center><font size=\\\"6\\\">Earthquakes animation using bubbly<\/font><\/center><\/h1>\n\n# <a id='0'>Content<\/a>\n\n- <a href='#1'>Introduction<\/a>\n- <a href='#2'>Earthquakes data<\/a>\n- <a href='#3'>Timeline using bubbly<\/a>\n- <a href='#4'>References<\/a>","568cb0e7":"Let's confirm the limits (in terms of years and magnitude) of the values our earthquakes dataset. ","58db1bd8":"We will select only the **Earthquake** types for the timeline.  ","1a10d512":"## Load and check the data","d3b68348":"We then extract from the **Date** the **Year**.  The year will be used in the timeline, for each year one animation frame being displayed.","393e3cc4":"# <a id=\"3\">Timeline using bubbly<\/a>\n\nLet's prepare the data. We select only the **Earthquake** type of events. \n\n\n\n","4d30676d":"There are multiple types of events, let's check the types:","acecb7f1":"# <a id=\"1\">Introduction<\/a>\n\nSignificant Earthquakes data <a href='#4'>[1]<\/a> contains date, time and location of all earthquakes with magnitude of 5.5 or higher for the years 1965-2016.  \n\nWe will show this data in an animation using bubbly <a href='#4'>[2]<\/a> <a href='#4'>[3]<\/a>, a python package that extends plotly <a href='#4'>[4]<\/a>.","d47aef8b":"The bubble plot (inspired by the work of Rosling <a href='#4'>[6]<\/a>) is showing the data in (Longitude, Latitude) coordinates, animated, each animation frame showing one year. Each bubble shows a major earthquake.  The size of the bubbles are correlated with the amplitude (calculated from the magnitude). The bubble displays the magnitude (on Richter scale).","3e2bba3e":"# <a id=\"4\">References<\/a>  \n\n\n[1] Significant Earthquakes, 1965-2016, Date, time, and location of all earthquakes with magnitude of 5.5 or higher, https:\/\/www.kaggle.com\/usgs\/earthquake-database    \n[2] Aashita Kesarwani, https:\/\/www.kaggle.com\/aashita\/guide-to-animated-bubble-charts-using-plotly  \n[3] Aashita Kesarwani, https:\/\/github.com\/AashitaK\/bubbly\/blob\/master\/bubbly\/bubbly.py  \n[4] Plotly, https:\/\/community.plot.ly\/    \n[5] Richter magnitude scale, Wikipedia, https:\/\/en.wikipedia.org\/wiki\/Richter_magnitude_scale    \n[6] Hans Rosling, https:\/\/en.wikipedia.org\/wiki\/Hans_Rosling  "}}