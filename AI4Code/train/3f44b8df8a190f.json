{"cell_type":{"0f7b1c08":"code","b80bbfde":"code","81b9cba9":"code","cac9283a":"code","acaec267":"code","f9771f50":"code","eddfaa38":"code","5ae304ef":"code","eb778b24":"code","90b7293f":"code","2065e715":"code","0051b6ac":"code","05cf302a":"code","2a897722":"code","2d0f4356":"code","7332b2fd":"code","aa502939":"code","876c32f9":"code","08342054":"code","7884b982":"code","f208aee7":"code","05fcb3a5":"code","c8bbdda3":"code","f6598d78":"code","79548d63":"code","1ed8cfe5":"code","ddb4fcdf":"code","22e1bce4":"code","4051f150":"code","b8991c90":"code","3548c544":"code","9f7aee70":"code","2c613937":"code","398dced6":"markdown","ed873d22":"markdown","8c637c2d":"markdown","bd706751":"markdown","f0caab83":"markdown","26191ed6":"markdown","f711e5c7":"markdown","9f33b056":"markdown","0e34f46a":"markdown","e36e5829":"markdown","ef1ecd43":"markdown","48f8cfc6":"markdown","0317687d":"markdown","2f0b76ad":"markdown","f2c19bab":"markdown","46d77d89":"markdown","614d03d4":"markdown","977d2afc":"markdown","bcbefaad":"markdown","d14477a8":"markdown","79e9eb0f":"markdown","72d6171d":"markdown","e534d6a2":"markdown","f0c66b10":"markdown","cf3586fb":"markdown","f1b8b34a":"markdown","c27a1b70":"markdown","faf8d63a":"markdown","61c8b73e":"markdown","4ae88bbb":"markdown"},"source":{"0f7b1c08":"import os \nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns\nimport warnings \n\nwarnings.filterwarnings('ignore')","b80bbfde":"os.listdir('..\/input\/ispu-dki-jakarta-januarijuli-2021')","81b9cba9":"df_sample = pd.read_csv('..\/input\/ispu-dki-jakarta-januarijuli-2021\/indeks-standar-pencemar-udara-di-provinsi-dki-jakarta-bulan-maret-tahun-2021.csv')\n\ndf_sample.head()","cac9283a":"df = pd.DataFrame()\n\nfor dataset in os.listdir('..\/input\/ispu-dki-jakarta-januarijuli-2021\/'):\n    temp = pd.read_csv(f'..\/input\/ispu-dki-jakarta-januarijuli-2021\/{dataset}')\n\n    df = pd.concat([df, temp], sort=False)","acaec267":"df = df.sort_values(by='tanggal')","f9771f50":"df.head()","eddfaa38":"df.tail()","5ae304ef":"df.shape","eb778b24":"df.info()","90b7293f":"df.tanggal = pd.to_datetime(df.tanggal)","2065e715":"df[df.duplicated() == True]","0051b6ac":"df.info()","05cf302a":"df['pm25'] = df['pm25'].fillna(df['pm25'].mean()) ","2a897722":"df.critical.unique()","2d0f4356":"df.categori.unique()","7332b2fd":"df = df.rename(columns={'pm25': 'pm2.5', 'categori': 'category'})","aa502939":"df.describe()","876c32f9":"df.location.unique()","08342054":"df[df.critical == 'PM26']","7884b982":"df = df[df.critical != 'PM26']","f208aee7":"df.shape","05fcb3a5":"df.isnull().sum()","c8bbdda3":"plt.figure(figsize=(8,6))\n\nsns.heatmap(df.corr(), annot=True)","f6598d78":"df_resample = (df.set_index('tanggal')).resample('D').mean().reset_index()\n\ndf_resample.plot(x='tanggal', y='pm10', kind='line', color='red')\ndf_resample.plot(x='tanggal', y='pm2.5', kind='line', color='orange')\ndf_resample.plot(x='tanggal', y='so2', kind='line', color='green')\ndf_resample.plot(x='tanggal', y='co', kind='line', color='magenta')\ndf_resample.plot(x='tanggal', y='o3', kind='line', color='black')\ndf_resample.plot(x='tanggal', y='no2', kind='line', color='blue')","79548d63":"plt.figure(figsize=(8,6))\n\nplt.pie(df.category.value_counts(), labels=df.category.value_counts().index, autopct='%.2f%%')\n\nplt.title('Kategori Cemaran udara DKI Jakarta Januari-Juli 2021')\nplt.legend()\nplt.show()","1ed8cfe5":"plt.figure(figsize=(8,6))\n\nplt.pie(df.location.value_counts(), labels=df.location.value_counts().index, autopct='%.4f%%')\nplt.title('Sebaran data DKI Jakarta Januari-Juli 2021')\nplt.legend()\nplt.show()","ddb4fcdf":"plt.figure(figsize=(8,6))\n\nsns.barplot(x=df.critical.value_counts().index, y=df.critical.value_counts())\n\nplt.title('Jumlah critical tiap polutan')\nplt.xlabel('Polutan')\nplt.ylabel('\u00b5g\/m3')\nplt.show()\n","22e1bce4":"df_agg = df.copy()\n\npollutant = ['pm10', 'pm2.5', 'so2', 'co', 'o3', 'no2']\n\ndf_agg = pd.pivot_table(data=df_agg, index=['location'], values=pollutant, aggfunc='mean').round().reset_index()","4051f150":"df_agg['category'] = pd.Series()\n\nfor index, row in enumerate(df_agg.itertuples()):\n    temp_treeshold = 0\n    for cell in row:\n        if type(cell) == int or type(cell) == float:\n            if cell > temp_treeshold:\n                if cell in range(1,50):\n                    df_agg.category.loc[index] = 'BAIK'\n                elif cell in range(51,100):\n                    df_agg.category.loc[index] = 'SEDANG'\n                elif cell in range(101,200):\n                    df_agg.category.loc[index] = 'TIDAK SEHAT'\n                elif cell in range(201,300):\n                    df_agg.category.loc[index] = 'SANGAT TIDAK SEHAT'\n                else:\n                    df_agg.category.loc[index] = 'BERBAHAYA'\n\n                temp_treeshold = cell\n\ndf_agg","b8991c90":"df_temp = df.sort_values(by='max', ascending=False).head(20).sort_values(by='tanggal')\n\ndf_temp['dayweek'] = df_temp.tanggal.dt.dayofweek\n\ndf_temp['weekend'] = [True if x > 5 else False for x in df_temp.dayweek]\n\ndf_temp","3548c544":"df_temp.weekend.value_counts()","9f7aee70":"df_temp = df.sort_values(by='max', ascending=False).tail(20).sort_values(by='tanggal')\n\ndf_temp['dayweek'] = df_temp.tanggal.dt.dayofweek\n\ndf_temp['weekend'] = [True if x > 5 else False for x in df_temp['dayweek']]\n\ndf_temp","2c613937":"df_temp.weekend.value_counts()","398dced6":"From description above we can see that weekend not directly increasing of _critical_ status. From top 20 aggregated data we can find 16 days are not weekend and 4 days weekend","ed873d22":"#### Shape of data","8c637c2d":"#### Checking duplicated rows","bd706751":"#### Spread of data based on regions","f0caab83":"#### Sorting based on date","26191ed6":"As shows above we can see PM25. It should be _typo_ whereas should be PM2.5. We couldn't assumed because no supported information that explains. It can done by dropping row","f711e5c7":"#### Air quality category","9f33b056":"#### Concatenate all datasets","0e34f46a":"#### Top 5 row","e36e5829":"1 row are dropped. So we now have 211 rows","ef1ecd43":"#### Missing value\nSome of column have 212 rows, pm25 just 181 instead. This shows some data are missing. Instead of dropping the column, it should be done with fillng pm25 with mean value","48f8cfc6":"#### Get mean score of pollutant by aggregating data per regions","0317687d":"we can see _max_ column have strong correlation between _pm2.5_ and _pm10_","2f0b76ad":"#### Cheking null values","f2c19bab":"#### Are weekend affecting _category_ of pollutant ?","46d77d89":"#### Unique value on _category_ column","614d03d4":"## Simple Exploratory Data Analysis for Standard Index of Pollutant (ISPU) DKI Jakarta Januari-Juli 2021\nThis notebook will reviewing Standard Index of Pollutant in DKI Jakarta on January-July 2021. Data can be downloaded in site [Jakarta Open Data](https:\/\/data.jakarta.go.id\/dataset\/indeks-standar-pencemaran-udara-ispu-tahun-2021)","977d2afc":"#### Sampling 1 file to reviewing","bcbefaad":"#### Check file inside __Dataset__ folder","d14477a8":"#### Bottom 5 row","79e9eb0f":"#### Re-check changed column","72d6171d":"#### Information\n\nBased on regulation of minister of enviromental and forestry Republic of Indonesia\nP.14\/MENLHK\/SETJEN\/KUM.1\/7\/2020 about 'Standard Index of Pollutant (ISPU)' shows\nthat some parameter as:\n\n<table>\n    <tr>\n        <td>Parameter<\/td>\n        <td>Symbol<\/td>\n    <\/tr>\n    <tr>\n        <td>Particle<\/td>\n        <td>PM<sub>10<\/sub><\/td>\n    <\/tr>\n    <tr>\n        <td>Particle<\/td>\n        <td>PM<sub>2.5<\/sub><\/td>\n    <\/tr>\n    <tr>\n        <td>Karbon Monoksida<\/td>\n        <td>CO<\/td>\n    <\/tr>\n    <tr>\n        <td>Nitrogen Dioksida<\/td>\n        <td>NO<sub>2<\/sub><\/td>\n    <\/tr>\n    <tr>\n        <td>Sulfur Dioksida<\/td>\n        <td>SO<sub>2<\/sub><\/td>\n    <\/tr>\n    <tr>\n        <td>Ozon<\/td>\n        <td>O<sub>3<\/sub><\/td>\n    <\/tr>\n     <tr>\n        <td>Hidrokarbon<\/td>\n        <td>HC<\/td>\n    <\/tr>\n<\/table>\n\nPollutant can be populated in range of number as:\n\n<table>\n    <tr>\n        <th>Category<\/th>\n        <th>Range<\/th>\n    <\/tr>\n    <tr>\n        <td>Baik (Good)<\/td>\n        <td>1-50<\/td>\n    <\/tr>\n    <tr>\n        <td>Sedang (Fair)<\/td>\n        <td>51-100<\/td>\n    <\/tr>\n    <tr>\n        <td>Tidak Sehat (Not healty)<\/td>\n        <td>101-200<\/td>\n    <\/tr>\n    <tr>\n        <td>Sangat Tidak Sehat (Very not healty)<\/td>\n        <td>201-300<\/td>\n    <\/tr>\n    <tr>\n        <td>Berbahaya (Dangerous)<\/td>\n        <td>301 >=<\/td>\n    <\/tr>\n<\/table>\n\nThere are column named _pm25_ should be _pm2.5_, so we can change as _pm2.5_","e534d6a2":"#### Import needed library","f0c66b10":"#### Parse _tanggal_ column into datetime type","cf3586fb":"#### Line Graph","f1b8b34a":"#### Variable Correlations","c27a1b70":"#### Change name of columns pm25","faf8d63a":"#### Spread of pollutant","61c8b73e":"#### Unique value on _critical_ column","4ae88bbb":"#### Unique value on _location_ column"}}