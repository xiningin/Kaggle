{"cell_type":{"c86f956f":"code","664b06b7":"code","54bd497c":"code","2090b20c":"code","c1b5b850":"code","336e2ea6":"code","a28b1798":"code","bc7fcfc5":"code","6d87bfd3":"code","646946bd":"code","10fa86e1":"code","0aab8a67":"code","9ddc9c0b":"code","229ded10":"code","865d2b39":"code","c6b67cf0":"code","5028fee2":"code","3ad39cde":"code","26f6e589":"code","506a8074":"code","04af5626":"code","356f37d6":"code","5dd7b4ae":"code","00bf7254":"code","e0758475":"code","ded5e4b6":"code","14c447b9":"code","03961872":"code","0c5a8964":"code","eb6e9297":"code","10b3549d":"code","7a9ee943":"code","f0c60c04":"code","f5f4061a":"code","0a75f61e":"code","bfc345d7":"code","7c04099c":"code","daea0d11":"code","0a139707":"code","a048acb2":"code","b42a3ee8":"code","320b22ec":"code","f3d35cee":"code","8a507a55":"markdown","04d83d53":"markdown","2c10e1b8":"markdown","4f78bb36":"markdown","a100d5fd":"markdown","4dac408f":"markdown","48c3803e":"markdown","99d6c451":"markdown","6d0bdf17":"markdown","14b63909":"markdown","7e7359d4":"markdown","30f614a9":"markdown","6da66b37":"markdown","0a040e60":"markdown","9e626031":"markdown","302de2a5":"markdown","b38283e3":"markdown","09788d9f":"markdown","ec04c9b6":"markdown","e8438b7e":"markdown","456c263b":"markdown","85125b0b":"markdown","e36352c8":"markdown","d4d79cac":"markdown","6912d769":"markdown","a37489fd":"markdown","7150ac0c":"markdown","5d8dc896":"markdown","e55ea48e":"markdown","b939bee4":"markdown","dfbaf72c":"markdown","92bd87c7":"markdown","cff102db":"markdown","bcca4170":"markdown","40b83fcf":"markdown","271cd54d":"markdown","be656d8f":"markdown","211fc354":"markdown","0a250559":"markdown","db18535e":"markdown","8066bff4":"markdown","3c734bc2":"markdown","9d7d1e05":"markdown","6a9a38f7":"markdown","b4411389":"markdown","b577a59d":"markdown","8d7d054d":"markdown","c14d9935":"markdown","1b1cf334":"markdown","e3f4d387":"markdown","5248793e":"markdown","58b30949":"markdown","c7586e4b":"markdown","425c34c6":"markdown","e19fb079":"markdown","4d99db3c":"markdown","26890acc":"markdown","f02ab260":"markdown","27ae9b07":"markdown","0c9a3be4":"markdown","9f252914":"markdown","8dcaf8cc":"markdown","31ccf99d":"markdown","a5da7c66":"markdown","f4bd95c4":"markdown","44f3c4a9":"markdown","fd5adcd8":"markdown","bed3282e":"markdown","806b3bf6":"markdown","866abca1":"markdown","cda7677b":"markdown"},"source":{"c86f956f":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\nfrom matplotlib.gridspec import GridSpec\nimport seaborn as sns","664b06b7":"train_df = pd.read_csv('..\/input\/walmart-sales-prediction\/train.csv')\ntest_df = pd.read_csv('..\/input\/walmart-sales-prediction\/test.csv')\nfeatures_df=pd.read_csv('..\/input\/walmart-sales-prediction\/features.csv')\nstores_df = pd.read_csv('..\/input\/walmart-sales-prediction\/stores.csv')\n","54bd497c":"train_df.head()","2090b20c":"train_df.info()","c1b5b850":"train_df.describe()","336e2ea6":"train_df.isnull().sum()","a28b1798":"test_df.head()","bc7fcfc5":"test_df.describe()","6d87bfd3":"test_df.isnull().sum()","646946bd":"features_df.head()","10fa86e1":"features_df.info()","0aab8a67":"\nfeatures_df.describe()","9ddc9c0b":"features_df.isnull().sum()","229ded10":"stores_df.head()","865d2b39":"stores_df.describe()","c6b67cf0":"stores_df.isnull().sum()","5028fee2":"dataset_m = features_df.merge(stores_df, how= 'inner', on = 'Store')\ndataset_m.head()","3ad39cde":"dataset_m.info()","26f6e589":"from datetime import datetime\n#converting date to date time object\ndataset_m['Date'] = pd.to_datetime(dataset_m['Date'])\ntrain_df['Date'] = pd.to_datetime(train_df['Date'])\ntest_df['Date'] = pd.to_datetime(test_df['Date'])\n#Extract week and year from the date and make them into new columns.\ndataset_m['week'] = dataset_m.Date.dt.isocalendar().week\ndataset_m['year'] = dataset_m.Date.dt.isocalendar().year","506a8074":"dataset_m.tail()","04af5626":"train_df_1 = train_df.merge(dataset_m, how='inner', on=['Store', 'Date', 'IsHoliday']).sort_values(by=['Store','Dept','Date']).reset_index(drop=True)","356f37d6":"train_df_1.head()","5dd7b4ae":"def scatter(train_df_1, column):\n    #plot the figure\n    plt.figure()\n    #plot the scatter plot with data from the specified column in x axis and weekly sales in y axis\n    plt.scatter(train_df[column], train_df['Weekly_Sales'])\n    #give y label as weekly_sales\n    plt.ylabel('Weekly_Sales')\n    #Give the xlabel as the column specified as parameter in the function\n    plt.xlabel(column)","00bf7254":"#plot a scatter plot using the scatter function a scatter plot of weekly sales with respect to Store\nscatter(train_df_1, 'Store')\n#plot a scatter plot using the scatter function a scatter plot of weekly sales with respect to Department\nscatter(train_df_1, 'Dept')","e0758475":"#Filtering out mean weekly sales for the year 2011\nweekly_sales_2011 = train_df_1[train_df_1['year'] ==  2011]['Weekly_Sales'].groupby(train_df_1['week']).mean()\n#Plot a line plot with week on x axis and sales for that particular week of the filtered year in y axis\nsns.lineplot(weekly_sales_2011.index, weekly_sales_2011.values,color='red')","ded5e4b6":"#Filtering out mean weekly sales for the year 2010\nweekly_sales_2010 = train_df_1[train_df_1['year'] ==  2010]['Weekly_Sales'].groupby(train_df_1['week']).mean()\n#Plot a line plot with week on x axis and sales for that particular week of the filtered year in y axis\nsns.lineplot(weekly_sales_2010.index, weekly_sales_2010.values)\n","14c447b9":"#Filtering out mean weekly sales for the year 2012\nweekly_sales_2012 = train_df_1[train_df_1['year'] ==  2012]['Weekly_Sales'].groupby(train_df_1['week']).mean()\n#Plot a line plot with week on x axis and sales for that particular week of the filtered year in y axis\nsns.lineplot(weekly_sales_2012.index, weekly_sales_2012.values,color='green')","03961872":"#plotting a figure \nplt.figure(figsize= (20, 10))\n#Plotting three line plots for weekly sales for each year\nsns.lineplot(weekly_sales_2010.index, weekly_sales_2010.values)\nsns.lineplot(weekly_sales_2011.index, weekly_sales_2011.values)\nsns.lineplot(weekly_sales_2012.index, weekly_sales_2012.values)\nplt.grid()\n#plot labels and legends\nplt.xticks(np.arange(1,60, step= 1))\nplt.title('Average Weekly Sales Per Year', fontsize = 20)\nplt.xlabel('Week', fontsize = 16)\nplt.ylabel('Sales', fontsize = 16)\nplt.legend(['2010', '2011','2012'], loc = 'best', fontsize = 16)\nplt.show()","0c5a8964":"#concatinating the type and column from store_df together to find the relation between stores falling under each type and size.\ndata = pd.concat([stores_df['Type'], stores_df['Size']], axis=1)\nf, ax = plt.subplots(figsize=(8, 6))\n#Plot a box plot to understand the relation between type and size of stores.\nfig = sns.boxplot(x='Type', y='Size', data=data)","eb6e9297":"weekly_sales_store = train_df['Weekly_Sales'].groupby(train_df['Store']).mean()","10b3549d":"weekly_sales_store.head()","7a9ee943":"weekly_sales_store_df=pd.DataFrame(weekly_sales_store)","f0c60c04":"weekly_sales_store_df.sort_values(\"Weekly_Sales\",ascending=False).style.bar(align='left',width=98,color='#FFD200')","f5f4061a":"weekly_sales_store_df.sort_values(\"Weekly_Sales\").style.bar(align='left',width=98,color='#ff00bf')","0a75f61e":"#Plotting the figure.\nplt.figure(figsize= (25, 12))\n#Creating a barplot with stores in x axis and mean weekly sales for each store as y values.\nsns.barplot(weekly_sales_store.index, weekly_sales_store.values,palette='dark')\n#plot a grid\nplt.grid()\n#Give title,x and y labels for the plot\nplt.title('Average Weekly Sales Per Store', fontsize = 20)\nplt.xlabel('Store Number', fontsize = 16)\nplt.ylabel('Sales Per Store ', fontsize = 16)\nplt.show()","bfc345d7":"weekly_sales_Dept = train_df['Weekly_Sales'].groupby(train_df['Dept']).mean()","7c04099c":"weekly_sales_Dept_df= pd.DataFrame(weekly_sales_Dept)","daea0d11":"weekly_sales_Dept_df","0a139707":"weekly_sales_Dept_df.sort_values(\"Weekly_Sales\",ascending=False).style.bar(align='left',width=98,color='#d65f5f')","a048acb2":"weekly_sales_Dept_df.sort_values(\"Weekly_Sales\").style.bar(align='left',width=98,color='#bfff00')","b42a3ee8":"#Plot a figure\nplt.figure(figsize= (25, 12))\n#Creating a barplot with department in x axis and mean weekly sales for each store as y values.\nsns.barplot(weekly_sales_Dept.index, weekly_sales_Dept.values)\n#plot a grid\nplt.grid()\n#Give title,x and y labels for the plot\nplt.title('Average Weekly Sales Per Department', fontsize = 20)\nplt.xlabel('Department', fontsize = 16)\nplt.ylabel('Sales', fontsize = 16)\nplt.show()","320b22ec":"#Creating a data frame grouped by grouping the train_df on department and date.\ngrouped=train_df.groupby(['Dept','Date']).mean().reset_index()\n\n#Filtering out Department, Date, Weekly sales from the new data frame grouped.\ndata=grouped[['Dept','Date','Weekly_Sales']]\n\n#Finding out unique values in the department column.\ndept=train_df['Dept'].unique()\n#Sort the unique values in the column\ndept.sort()\n#Divide the departments into 4 batches\ndept_1=dept[0:20]\ndept_2=dept[20:40]\ndept_3=dept[40:60]\ndept_4=dept[60:]\n\n#Create subplots with 2 rows and 2 columns and adjusting the spacing between the subplots.\nfig, ax = plt.subplots(2,2,figsize=(20,10))\nfig.subplots_adjust(wspace=0.5, hspace=0.5)\nfig.subplots_adjust(left=0.1, right=0.9, bottom=0.1, top=0.9)\n\n\n#For each batch containg departments and for each department in each batch plot the weekly sales in accordance with date.\nfor i in dept_1 :\n    data_1=data[data['Dept']==i]\n    ax[0,0].plot(data_1['Date'], data_1['Weekly_Sales'],label='Dept_1_mean_sales')\n\nfor i in dept_2 :\n    data_1=data[data['Dept']==i]\n    ax[0,1].plot(data_1['Date'], data_1['Weekly_Sales'],label='Dept_1_mean_sales')\n    \nfor i in dept_3 :\n    data_1=data[data['Dept']==i]\n    ax[1,0].plot(data_1['Date'], data_1['Weekly_Sales'],label='Dept_1_mean_sales')    \n\nfor i in dept_4 :\n    data_1=data[data['Dept']==i]\n    ax[1,1].plot(data_1['Date'], data_1['Weekly_Sales'],label='Dept_1_mean_sales')        \n    \n    \n#Give each subplot a suitable title    \nax[0,0].set_title('Mean sales record by department (0-19)')\nax[0,1].set_title('Mean sales record by department (20-39)')\nax[1,0].set_title('Mean sales record by department (40-59)')\nax[1,1].set_title('Mean sales record by department (60-)')\n\n#Give each Subplot y and x labels\nax[0,0].set_ylabel('Mean sales With Respect To Specified Departments')\nax[0,0].set_xlabel('Date')\nax[0,1].set_ylabel('Mean sales With Respect To Specified Departments')\nax[0,1].set_xlabel('Date')\nax[1,0].set_ylabel('Mean sales With Respect To Specified Departments')\nax[1,0].set_xlabel('Date')\nax[1,1].set_ylabel('Mean sales With Respect To Specified Departments')\nax[1,1].set_xlabel('Date')\n\n\nplt.show()","f3d35cee":"sns.set(style = 'white')\n\n\nfig, ax = plt.subplots(figsize= (25, 15))\nsns.heatmap(train_df_1.corr(), cmap = 'icefire', vmax = 0.3, center = 0, square = True, linewidth= 0.5, cbar_kws = {'shrink': 0.5}, annot = True)","8a507a55":"### We can see that Store number 5 has the least weekly sales (5053.415813)","04d83d53":"### Plotting a heatmap to determine the correlation between columns in the data frame.","2c10e1b8":"# VISUALIZATIONS ","4f78bb36":"-------------------------------------------------------------------------------------------------------------------------------","a100d5fd":"This is the line plot for weekly sales in the year 2010","4dac408f":"#### We can see from the combined line plot that on week 51 of 2010 we have the maximum sale ","48c3803e":"### 9) Series of line plots for mean sales with respect to Departments.","99d6c451":"### We can see that department 47 has a cumulative negative value for weekly sales followed by department 43 which has a very low weekly sale of 1.193333","6d0bdf17":"##### Finding the null values in each column.","14b63909":"This is the line plot for weekly sales in the year 2011","7e7359d4":"### 3) Combined line plots for each year (2010,2011,2012)","30f614a9":"### 1) scatter plot","6da66b37":"-------------------------------------------------------------------------------------------------------------------------------","0a040e60":"## Lets' get a view of train.csv","9e626031":"## Lets' start","302de2a5":"#### Sorting the data frame with respect to weekly sales in Descending order and plotting a var graph on the data frame itself to get a idea about the data.","b38283e3":"We can see scatter plots of weekly sales with respect to stores and department, we can see that departments between 60 and 80 are performing better.","09788d9f":"Line plots between week and weekly sales is a good way to compare sales for each year.","ec04c9b6":"##### Analysing null values in each column.","e8438b7e":"#### Sorting the data frame with respect to weekly sales in Ascending order and plotting a var graph on the data frame itself to get a idea about the data.","456c263b":"#### Importing all the required libraries and packages.","85125b0b":"We can see that weekly sales is highest for department 92.","e36352c8":"##### Convering date to date time object.","d4d79cac":"#### Defining a function scatter to plot the scatter plot with the data of the column specified as the function parameter in x axis and weekly sales as the y values.","6912d769":"### We can see that Department number 92 has the largest weekly sales.","a37489fd":"# walmart-sales-prediction dataset analysis","7150ac0c":"#### Grouping the train_df by Department and computing the mean of weekly_sales for each Department.","5d8dc896":"From the above box plots we can see that Type A plots are the largest, ie has the largest size","e55ea48e":"##### Viewing the Info of each column in the features dataframe.","b939bee4":"-------------------------------------------------------------------------------------------------------------------------------","dfbaf72c":"visualizing the data","92bd87c7":"###### Viewing the test_df","cff102db":"### 10) Heatmap","bcca4170":"This is the line plot for weekly sales in the year 2012","40b83fcf":"-------------------------------------------------------------------------------------------------------------------------------","271cd54d":"##### Creating a new df by merging (inner) the train_df and the new data frame dataset_m on  store, date and IsHoliday columns and sorting the values by Store, department and date.","be656d8f":"#### Plotting the weekly sales for years 2010,2011,2012 on a single plot to compare the sales values with respect to week on each of these specified year for comparing the weekly sales in each year.","211fc354":"-------------------------------------------------------------------------------------------------------------------------------","0a250559":"####  Sorting the data frame with respect to weekly sales in Ascending order and plotting a var graph on the data frame itself to get a idea about the data.","db18535e":"###### Describing the data in the test dataframe.","8066bff4":"-------------------------------------------------------------------------------------------------------------------------------","3c734bc2":"## Plotting a bar graph with store number as x values and mean weekly sales for that store as the y values.","9d7d1e05":"### 5) Bar Chart On Data Frame","6a9a38f7":"---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------","b4411389":"###### Check if there is any null, using .isnull()","b577a59d":"-------------------------------------------------------------------------------------------------------------------------------","8d7d054d":"#### Sorting the data frame with respect to weekly sales in Descending order and plotting a var graph on the data frame itself to get a idea about the data.","c14d9935":"### 4) Box Plot","1b1cf334":"converting it to a pandas dataframe\n","e3f4d387":"#### Converting the data to a pandas dataframe","5248793e":"### 8)Bar graph fpr mean weekly sales for each Department.","58b30949":"### 6) Bar graph for mean weekly sales for each store.","c7586e4b":"#### Reading all the csv files as dataframes using pd.read_csv method.","425c34c6":"### 7) Bar chart on Data Frame.","e19fb079":"##### Finding out about the null values in each column.","4d99db3c":"##### Viewing the stores data frame.","26890acc":"##### Create a new data frame by merging (inner) features data frame to stores data frame  on Store for analysis purpose.","f02ab260":"1)The sales level is different by department \n\n\n2)There is some peaked points around January and May, thus indicating high sales during those times.\n\nWe can see that departments and date are good features to predict the sales.\n","27ae9b07":"-------------------------------------------------------------------------------------------------------------------------------","0c9a3be4":"##### We will analyze  the sales of  walmart with the data given. (eg: anaglysing weekly sales, which store or department sells most etc.)","9f252914":"We can see that there are various column that have very week correlation and thus its always better to drop these columns before modelling since that columns dosent contribute much to the process.\n\n-------------------------------------------------------------------------------------------------------------------------------\n\nAlso,some columns are strongly correlated . One of them must be dropped else they would carry similar information to the model. ","8dcaf8cc":"#### Creating line plots of mean weekly sales for each department in the dataframe.","31ccf99d":"-------------------------------------------------------------------------------------------------------------------------------","a5da7c66":"-------------------------------------------------------------------------------------------------------------------------------","f4bd95c4":"##### Viewing the features dataframe.","44f3c4a9":"1)We can see that this plot is a great way to analyse how each store is performing sales wise.\n\n2)From the plot we can see that store number 20 has the highesst mean weekly sales, followed by store 4 and then store 14.\n\n","fd5adcd8":"##### Gathering info regarding the columns of the new data frame.","bed3282e":"## Plotting a bar graph with Department number as x values and mean weekly sales for that store as the y values.","806b3bf6":"#### Grouping the train_df by store and computing the mean of weekly_sales for each store.","866abca1":"### 2) Analyzing weekly sales for each year using line plots","cda7677b":"### We can see that Store number 20 has the highest weekly sales (20508.301592)"}}