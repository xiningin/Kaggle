{"cell_type":{"86d29597":"code","afa15d6d":"code","5f598e4b":"code","04c22d91":"code","6b5c3410":"code","9ac31f42":"code","f681f15b":"code","c81715c2":"code","f88a7e55":"code","ed9091db":"code","3064c3a0":"code","36e92757":"code","36617293":"code","d080018e":"code","b2aa0c10":"code","ad188016":"code","4eff358c":"code","a287aa1d":"code","ac99d2f4":"code","49fb4577":"code","4f0c9db4":"code","eb03989a":"code","bbca31dc":"code","f1de5447":"code","9d75601a":"code","80b83bf0":"code","c9e508c8":"code","06398886":"code","c00a6e2a":"code","d11dab7e":"code","cf508eae":"code","0d729647":"code","cbe5aac7":"code","55866937":"code","18a21cf1":"markdown","44ca3ed0":"markdown","fac7099c":"markdown","5f57491b":"markdown","83e26ce4":"markdown","e16e2f9e":"markdown","45862da1":"markdown","6dca7ce2":"markdown","ed52c808":"markdown","ebbd66c3":"markdown","23813c0d":"markdown","7f495592":"markdown","85c2656d":"markdown","4d355d28":"markdown","5cfdd226":"markdown","2aba685e":"markdown","cdb008e5":"markdown","6c3d8339":"markdown","525ab14d":"markdown","eb4d505f":"markdown","7a8d6b3f":"markdown","186e57fe":"markdown","e03ac0d2":"markdown","5ca739f5":"markdown","af8f8b24":"markdown","8157c2b7":"markdown","79df1c16":"markdown","776810a0":"markdown","3e5836f2":"markdown","f31db95a":"markdown","87053321":"markdown","a35a4047":"markdown","844144d9":"markdown","75996134":"markdown","21c3fc8a":"markdown","d1ba81e9":"markdown","70c29b5e":"markdown","b0a08ef7":"markdown","3d213eb2":"markdown","b26e357f":"markdown","2c8d7729":"markdown","aed78dce":"markdown","6b8512f0":"markdown","5cf8e2ee":"markdown","5c3cd000":"markdown","dca5fe99":"markdown","479d5839":"markdown","9a65994b":"markdown","e5647042":"markdown","3308add3":"markdown","c6031683":"markdown","b9e6768c":"markdown","cf46a563":"markdown","50bc5153":"markdown","eabdd132":"markdown","3325697b":"markdown","88ec29bf":"markdown","2d067e49":"markdown","b7261f36":"markdown","b7a8c168":"markdown","97e49f08":"markdown","f3d03e5c":"markdown","03128cc7":"markdown","05ffc61e":"markdown","383ab2df":"markdown","c10c76b7":"markdown","b94bd85b":"markdown","4237cfcc":"markdown"},"source":{"86d29597":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport copy\nfrom sklearn.preprocessing import LabelEncoder\n\nfrom scipy.stats import ttest_ind\nfrom statsmodels.stats.proportion import proportions_ztest\nfrom statsmodels.formula.api import ols\n\nimport statsmodels.api as sm","afa15d6d":"# Reading Insurance data\ndf = pd.read_csv(\"..\/input\/health-insurance-dataset\/Health_insurance.csv\")","5f598e4b":"# Get top 10 rows in Insurance data frame\ndf.head(10)","04c22d91":"# Get the shape of Insurance data frame\ndf.shape","6b5c3410":"print(\"Number of rows = {} and number of columns = {} in Insurance data frame\".format(df.shape[0], df.shape[1]))","9ac31f42":"print(\"Data type of each attribute in Insurance data frame\")\n\ndf.dtypes","f681f15b":"print(\"Number of missing values in Insurance data frame\")\n\ndf.isnull().sum()","c81715c2":"print(\"Five point summary of numerical attributes\")\n\ndf.describe().T","f88a7e55":"df_attr = df.iloc[:, [0,2,6]] # Select \u2018age\u2019, \u2018bmi\u2019 and \u2018charges\u2019 columns.\n\nsns.pairplot(df_attr, diag_kind =\"kde\", corner = True); # pairplot","ed9091db":"print(\"Skewness of \u2018age\u2019, \u2018bmi\u2019 and \u2018charges\u2019 columns is follows:\")\n\ndf_attr.skew(axis = 0, skipna = True)","3064c3a0":"plt.figure(figsize= (15,15))\nplt.subplot(3,1,1)\nplt.title(\"BMI distribution\");\nsns.boxplot(x=df['bmi']);\nplt.show();","36e92757":"plt.figure(figsize= (15,15))\nplt.subplot(3,1,1)\nplt.title(\"Age distribution\");\nsns.boxplot(x=df['age']);\nplt.show();","36617293":"plt.figure(figsize= (15,15))\nplt.subplot(3,1,1)\nplt.title(\"Charges distribution\");\nsns.boxplot(x=df['charges']);\nplt.show();","d080018e":"sns.countplot(df['sex']);\nplt.title(\"Gender distribution\");\nplt.show();","b2aa0c10":"sns.countplot(df['children']);\nplt.title(\"Children distribution\");\nplt.show();","ad188016":"sns.countplot(df['smoker']);\nplt.title(\"Smoker distribution\");\nplt.show();","4eff358c":"sns.countplot(df['region']);\nplt.title(\"Region distribution\");\nplt.show();","a287aa1d":"df_encoded = copy.deepcopy(df)\ndf_encoded.loc[:,['sex', 'smoker', 'region']] = df_encoded.loc[:,['sex', 'smoker', 'region']].apply(LabelEncoder().fit_transform) \n\nsns.pairplot(df_encoded, diag_kind =\"kde\", corner = True)\nplt.show()","ac99d2f4":"# Checking howmany smokers and non-smokers in Insurance Data frame\ndf.smoker.value_counts()","49fb4577":"# Check the charges of smokers and non-smokers across different ages\nsns.scatterplot(x = 'age', y = 'charges', hue = 'smoker', data = df);","4f0c9db4":"smoker_charges = df[df['smoker'] == 'yes'].charges\nnon_smoker_charges = df[df['smoker'] == 'no'].charges\n\nt_statistic, p_value = ttest_ind(smoker_charges, non_smoker_charges)\n\n\nprint(\"t_statistic =\",t_statistic)\nprint(\"p_value =\",p_value)","eb03989a":"reject_null = False\nif p_value < 0.05:\n    reject_null = True \nelse: \n    reject_null = False\n    \nprint(\"reject null? : \" + str(reject_null))","bbca31dc":"# Checking howmany male and female customers in Insurance Data frame\ndf.sex.value_counts()","f1de5447":"# Check the bmi of male and female customers accross different ages\nsns.scatterplot(x = 'age', y = 'bmi', hue = 'sex', data = df);","9d75601a":"male_bmi = df[df['sex'] == 'male'].bmi\nfemale_bmi = df[df['sex'] == 'female'].bmi\n\nt_statistic, p_value = ttest_ind(male_bmi, female_bmi)\n\n\nprint(\"t_statistic =\",t_statistic)\nprint(\"p_value =\",p_value)","80b83bf0":"reject_null = False\nif p_value < 0.05:\n    reject_null = True \nelse: \n    reject_null = False\n    \nprint(\"reject null? : \" + str(reject_null))","c9e508c8":"# Check the bmi of male and female customers accross different ages\nsmoker_gender_table = pd.crosstab(index=df[\"sex\"], columns=df[\"smoker\"])\n\nsmoker_gender_table.plot(kind=\"bar\", figsize=(8,8), stacked=True);\nplt.title('Proportion of smokers in genders')\nplt.show()","06398886":"male_smokers = df[df['sex'] == 'male'].smoker.value_counts()[1]\n\nfemale_smokers = df[df['sex'] == 'female'].smoker.value_counts()[1]\n\nn_males = df.sex.value_counts()[0]\n\nn_females = df.sex.value_counts()[1]\n\nprint([female_smokers, male_smokers] , [n_females, n_males])\nprint(f' Proportion of smokers in females, males = {round(115\/662,2)}%, {round(159\/676,2)}% respectively')","c00a6e2a":"stat, p_value = proportions_ztest([female_smokers, male_smokers] , [n_females, n_males])\n\nprint(\"t_statistic =\",t_statistic)\nprint(\"p_value =\",p_value)","d11dab7e":"reject_null = False\nif p_value < 0.05:\n    reject_null = True \nelse: \n    reject_null = False\n    \nprint(\"reject null? : \" + str(reject_null))","cf508eae":"# Check the bmi of women with no children, one child and two children\n\nzero_child = df[df['children'] == 0]\nwomen_zero_child_bmi = zero_child[zero_child['sex'] == 'female'].bmi\n\none_child = df[df['children'] == 1]\nwomen_one_child_bmi = one_child[one_child['sex'] == 'female'].bmi\n\ntwo_child = df[df['children'] == 2]\nwomen_two_child_bmi = two_child[two_child['sex'] == 'female'].bmi\n\nchildren_bmi_df = pd.DataFrame()\n\ndf1            = pd.DataFrame({'children': 'zero', 'bmi':women_zero_child_bmi})\ndf2            = pd.DataFrame({'children': 'one', 'bmi':women_one_child_bmi})\ndf3            = pd.DataFrame({'children': 'two', 'bmi':women_two_child_bmi})\n\nchildren_bmi_df = children_bmi_df.append(df1) \nchildren_bmi_df = children_bmi_df.append(df2) \nchildren_bmi_df = children_bmi_df.append(df3)","0d729647":"sns.boxplot(x = \"children\", y = \"bmi\", data = children_bmi_df);","cbe5aac7":"mod = ols('bmi ~ children', data = children_bmi_df).fit()\naov_table = sm.stats.anova_lm(mod, typ=2)\nprint(aov_table)\n\np_value = aov_table['PR(>F)'][0]","55866937":"reject_null = False\nif p_value < 0.05:\n    reject_null = True \nelse: \n    reject_null = False\n    \nprint(\"reject null? : \" + str(reject_null))","18a21cf1":"<p style = \"font-size:20px; color: #007580 \"><strong> d. Is the distribution of bmi across women with no children, one child and two children, the same? <\/strong><\/p> ","44ca3ed0":"#### 2. Decide the significance level: alpha = 0.05","fac7099c":"* **Above plot shows, there are few points between 47 to 55, these are outliers as there are not included in the box of other observation i.e no where near the quartiles.**","5f57491b":"<a id = '4.2'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 4.2 Bivariate analysis and Hypothesis testing <\/h2> ","83e26ce4":"* **Above plot shows, there are very few customers who have 4 o 5 children and there are most customers who don't have children**","e16e2f9e":"<p style = \"font-size:20px; color: #007580 \"><strong> Distribution of \u2018bmi\u2019, \u2018age\u2019 and \u2018charges\u2019 columns <\/strong><\/p> ","45862da1":"<a id = '3.0'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 3. Data Collection <\/h2> ","6dca7ce2":"<a id = '2.0'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 2. Import the necessary libraries <\/h2> ","ed52c808":"* **Above plot shows, more points between 35000 to 55000, these are outliers as there are not included in the box of other observation i.e no where near the quartiles.**","ebbd66c3":"<p style = \"font-size:20px; color: #007580 \"><strong> c. Is the proportion of smokers significantly different in different genders? <\/strong><\/p> ","23813c0d":"### Objective:\n\nWe want to see if we can dive deep into this data to find some valuable insights.","7f495592":"#### 3. Identify the test-statistic: Z - test of Proportions","85c2656d":"* **Above plot shows, there are no outliers in 'age' column**","4d355d28":"* **Above plot shows, Region distribution is almost equal**","5cfdd226":"#### Hence we fail to reject Null Hypothesis (we have enough (95% and 99%) evidence to prove that women with no children, one child and two children has no effect on bmi)","2aba685e":"#### The boxplots show almost similar shapes, location and spreads for women with 0, 1, and 2 children but few outlier for women with 0 and 1 child.","cdb008e5":"#### By looking into above graph, we can say \"bmi of male and female customers is same\". But is it statistically significant?","6c3d8339":"#### 3. Identify the test-statistic: 2 sample t - test","525ab14d":"<p style = \"font-size:20px; color: #007580 \"><strong> Checking the presence of missing values <\/strong><\/p> ","eb4d505f":"<p style = \"font-size:20px; color: #007580 \"><strong> Pair plot that includes all the columns of the data frame <\/strong><\/p> ","7a8d6b3f":"#### 3. Identify the test-statistic: 2 sample t - test","186e57fe":"#### Hence we reject Null Hypothesis (we have enough (95% and 99%) evidence to prove that there is a difference in charges of smokers and non-smokers)","e03ac0d2":"* **Age column seems to be uniformly distributed as seen in previous step and there is hardly any skewness**\n* **BMI column seems to be normally distributed as seen in previous step and there is very less Skewness**\n* **Charges column -- Right Skewed Distribution --- charges are skewed to higer values**","5ca739f5":"#### By looking into above graph, we can say \"the proportions of smokers in genders are not equal\". But is the difference statistically significant?","af8f8b24":"#### 1. State the H0 and Ha\n\n#### Ho = The proportions of smokers in genders are equal\n#### Ha = The proportions of smokers in genders are not equal","8157c2b7":"### Data Description:\n\nThe data at hand contains medical costs of people characterized by certain attributes.","79df1c16":"#### 4. Calculate P_value using ANOVA table","776810a0":"<p style = \"font-size:20px; color: #007580 \"><strong> a. Do charges of people who smoke differ significantly from the people who don't? <\/strong><\/p> ","3e5836f2":"#### 2. Decide the significance level: alpha = 0.05","f31db95a":"#### By looking into above graph, we can say \"charges of smokers and non-smokers are different\". But is the difference statistically significant?","87053321":"<p style = \"font-size:20px; color: #007580 \"><strong> Distribution of categorical columns (include children) <\/strong><\/p> ","a35a4047":"#### 5. Decide to Reject or Accept Null Hypothesis","844144d9":"Here we have three groups. Analysis of variance can determine whether the means of three or more groups are different. ANOVA uses F-tests to statistically test the equality of means.","75996134":"* **Above plot shows, Gender distribution is eqal**","21c3fc8a":"<a id = '4.0'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 4. EDA (Data Analysis and Preparation) <\/h2> ","d1ba81e9":"<a id = '5.0'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 5. Summary <\/h2> \n<br>\n<br>\n<strong>What happend so far?<\/strong>\n\n<ol>\n<li>Explored dataset stats and missing values of the dataset.<\/li>\n<li>Checked the outliers in dataset, BMI and Charges columns are having outliers.<\/li>\n<li>Difference in charges of smokers and non-smokers.<\/li>\n<li>BMI of male and female customers is same.<\/li>\n<li>Proportions of smokers in genders are not equal.<\/li>\n<li>Women with no children, one child and two children has no effect on bmi.<\/li>\n<\/ol>\n   \n<br>\n   \n<p style = \"font-size:30px; color: #007580 \"><strong> Thanks for reading. Feature engineering and model building need to be done, will update soon... <\/strong><\/p>","70c29b5e":"#### 1. State the H0 and Ha\n\n#### Ho = $\\mu1$ = $\\mu2$ = $\\mu3$  -- Women with no children, one child and two children has no effect on bmi\n#### Ha = At least one $\\mu$ differs -- Women with no children, one child and two children has an effect on bmi","b0a08ef7":"<p style = \"font-size:20px; color: #007580 \"><strong> b. Does bmi of males differ significantly from that of females? <\/strong><\/p> ","3d213eb2":"<p style = \"font-size:20px; color: #007580 \"><strong> Checking the presence of outliers in \u2018bmi\u2019, \u2018age\u2019 and \u2018charges columns <\/strong><\/p> ","b26e357f":"<a id = '4.1'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 4.1 Univariate analysis <\/h2> ","2c8d7729":"* **Age column seems to be uniformly distributed**\n* **BMI column seems to be normally distributed**\n* **Charges colum -- Right Skewed Distribution --- charges are skewed to higer values**","aed78dce":"<p style = \"font-size:30px; color: #007580 ;background-color:  ; text-align: left; border-radius: 5px 5px; padding: 5px\" ><strong> Here are my other notebooks, please have a look and definitely you will find it useful. Happy reading \ud83d\ude42 <\/strong><\/p>\n<ol>\n<li><a href =\"https:\/\/www.kaggle.com\/vinayakshanawad\/industrial-safety-complete-solution\">Industrial Safety - Complete Solution<\/a><\/li>\n<li><a href =\"https:\/\/www.kaggle.com\/vinayakshanawad\/eda-statistical-analysis-hypothesis-testing\">EDA - Statistical Analysis - Hypothesis Testing<\/a><\/li>\n<li><a href =\"https:\/\/www.kaggle.com\/vinayakshanawad\/random-forest-with-bootstrap-sampling-for-beginner\">Random Forest with Bootstrap Sampling for beginner<\/a><\/li>\n<li><a href =\"https:\/\/www.kaggle.com\/vinayakshanawad\/amazon-electronics-eda-recommender-system\">Amazon Electronics - EDA - Recommender System<\/a><\/li>\n<li><a href =\"https:\/\/www.kaggle.com\/vinayakshanawad\/personal-loan-logistic-reg-accuracy-90-41\">Personal Loan - Logistic Reg - Accuracy = 90.41%<\/a><\/li>\n<\/ol>","6b8512f0":"#### Hence we reject Null Hypothesis (we have enough (95%) evidence to prove that ,the proportions of smokers in genders are not equal)","5cf8e2ee":"#### Hence we fail to reject Null Hypothesis (we have enough (95%) evidence to prove that bmi of male and female customers is same)","5c3cd000":"#### 5. Decide to Reject or Accept Null Hypothesis","dca5fe99":"### Context:\n\nLeveraging customer information is paramount for most businesses. In the case of an insurance company, attributes of customers like the ones mentioned below can be crucial in making business decisions. Hence, knowing to explore and generate value out of such data can be an invaluable skill to have.","479d5839":"#### 4. Calculate P_value using test-statistic\/t-score","9a65994b":"#### 3. Identify the test-statistic","e5647042":"#### 1. State the H0 and Ha\n\n* H<sub>0<\/sub>: x&#772;<sub>1<\/sub> = x&#772;<sub>2<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> = 0, **there is no difference in charges of smokers and non-smokers**\n\n* H<sub>A<\/sub>: x&#772;<sub>2<\/sub> &ne; x&#772;<sub>1<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> &ne; 0, **there is a difference in charges of smokers and non-smokers**","3308add3":"* **Above plot shows, there are more non-smokers than smokers in Insurance data frame**","c6031683":"<p style = \"font-size:20px; color: #007580 \"><strong> Shape of the data <\/strong><\/p> ","b9e6768c":"* **Looking at the age column, data is uniformly distributed**\n\n* **Very few people have more than 2 children. 75% of the people have 2 or less children**\n\n* **Charges are skewed to higer values**","cf46a563":"<p style = \"font-size:20px; color: #007580 \"><strong> Data type of each attribute <\/strong><\/p> ","50bc5153":"#### 2. Decide the significance level: alpha = 0.05","eabdd132":"<p style = \"font-size:20px; color: #007580 \"><strong> 5 point summary of numerical attributes <\/strong><\/p> ","3325697b":"<br>\n<h2 style = \"font-size:40px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> Health Insurance: EDA - Statistical Analysis - Hypothesis Testing<\/h2> \n<br>","88ec29bf":"#### 4. Calculate P_value using test-statistic\/t-score","2d067e49":"<a id = '1.0'><\/a>\n<h2 style = \"font-size:35px; font-family:Garamond ; font-weight : normal; background-color: #007580; color :#fed049   ; text-align: center; border-radius: 5px 5px; padding: 5px\"> 1. Overview <\/h2> ","b7261f36":"#### 5. Decide to Reject or Accept Null Hypothesis","b7a8c168":"#### 4. Calculate P_value using test-statistic","97e49f08":"<a id = '0'><\/a>\n<h2 style = \"font-family: garamond; font-size: 40px; font-style: normal; letter-spcaing: 3px; background-color: #007580; color : #fed049; border-radius: 5px 5px; text-align:center; font-weight: bold\" >Table of Contents<\/h2> \n\n1. [Overview](#1.0)\n2. [Import the necessary libraries](#2.0)\n3. [Data Collection](#3.0)\n4. [EDA (Data Analysis and Preparation)](#4.0)\n    - [Univariate Analysis](#4.1)\n    - [Bivariate Analysis and Hypothesis testing](#4.2)\n5. [Summary](#5.0)","f3d03e5c":"<p style = \"font-size:20px; color: #007580 \"><strong> Measure of skewness of \u2018bmi\u2019, \u2018age\u2019 and \u2018charges\u2019 columns <\/strong><\/p> ","03128cc7":"#### By looking into above graph, we can infer below points \n\n* **Smokers claimed more money than non-smokers**\n* **BMI of male and female customers is almost same**\n\n**But statistically we prove it using Hypothesis testing**","05ffc61e":"#### 1. State the H0 and Ha\n\n* H<sub>0<\/sub>: x&#772;<sub>1<\/sub> = x&#772;<sub>2<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> = 0, **bmi of male and female customers is same**\n\n* H<sub>A<\/sub>: x&#772;<sub>2<\/sub> &ne; x&#772;<sub>1<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> &ne; **bmi of male and female customers is different**","383ab2df":"#### 2. Decide the significance level: alpha = 0.05","c10c76b7":"### Domain:\n\nHealthcare","b94bd85b":"#### 5. Decide to Reject or Accept Null Hypothesis","4237cfcc":"### Attribute Information:\n\n**age:** age of primary beneficiary\n\n**sex:** insurance contractor gender, female, male\n\n**bmi:** Body mass index, providing an understanding of body, weights that are relatively high or low relative to height, objective index of body weight (kg \/ m ^ 2) using the ratio of height to weight, ideally 18.5 to 24.9\n\n**children:** Number of children covered by health insurance \/ Number of dependents\n\n**smoker:** Smoking\n\n**region:** the beneficiary's residential area in the US, northeast, southeast, southwest, northwest.\n\n**charges:** Individual medical costs billed by health insurance."}}