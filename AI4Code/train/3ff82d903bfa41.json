{"cell_type":{"5afe5bde":"code","287a2733":"code","1134cb06":"code","83ee7ffd":"code","0bc3787a":"code","4fcb764f":"code","ec0aa7b1":"code","821b6f22":"code","244bbdc2":"code","894f1201":"code","88a0aebc":"code","1b87245c":"code","81a3b806":"code","7af982c8":"code","49baadff":"code","59c7365b":"code","57cb8590":"markdown","95c9b734":"markdown","174116f2":"markdown","9959dd55":"markdown","edb1bab6":"markdown","04800f16":"markdown","e29d1323":"markdown","f582c301":"markdown","38df2a6a":"markdown","2237db3f":"markdown","0dcf670e":"markdown","8614a8a2":"markdown","976d3d49":"markdown","4e42adba":"markdown","12a86612":"markdown","caa8c363":"markdown","35a2f7f7":"markdown","a6c2dfe2":"markdown","9364258f":"markdown","742ca759":"markdown","9b048d73":"markdown","717fb3e5":"markdown","a9871f72":"markdown","bfd9ba06":"markdown","770b6ad5":"markdown","8ef9ea19":"markdown","140cf378":"markdown"},"source":{"5afe5bde":"# Importing packages\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom itertools import cycle\nimport warnings\n\n# Style\npd.set_option('max_columns', 50)\nplt.style.use('bmh')\ncolor_pal = plt.rcParams['axes.prop_cycle'].by_key()['color']\ncolor_cycle = cycle(plt.rcParams['axes.prop_cycle'].by_key()['color'])\n\n# Supressing Warnings\nwarnings.filterwarnings('ignore')","287a2733":"# Reading data\ntrain_df = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/train.csv')\ntest_df = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/test.csv')\nsub_df = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/sample_submission.csv')","1134cb06":"# Getting the number of continuous and categorical variables\ncat_cols = [x for x in train_df.columns if train_df[x].dtype == 'object']\ncont_cols = [x for x in train_df.columns if train_df[x].dtype != 'object']\n\n# Appending categorical columns and removing continous columns\ncat_cols.append(x for x in ['MSSubClass', 'OverallQual', 'OverallCond'])\nfor x in ['MSSubClass', 'OverallQual', 'OverallCond']:\n    cont_cols.remove(x)","83ee7ffd":"# Pairplot for continuous variables\nsns.pairplot(train_df[cont_cols]);","0bc3787a":"# Scatter plot for train for yearbuilt\nplt.figure(figsize=(10, 5))\nplt.title('Distribution of YearBuilt vs Selling Price in Training Data')\nsns.scatterplot(train_df.YearBuilt, train_df.SalePrice, color=color_pal[1]);","4fcb764f":"# LotArea Vs SalePrice\nplt.figure(figsize=(10, 5))\nplt.title('LotArea vs Selling Price')\nsns.scatterplot(train_df.LotArea, train_df.SalePrice, color=color_pal[1]);","ec0aa7b1":"plt.figure(figsize=(10, 5))\nplt.title('Log(LotArea) vs Selling Price')\nsns.scatterplot(np.log1p(train_df.LotArea), train_df.SalePrice, color=color_pal[1]);","821b6f22":"# SalePrice with and without alley\ndf_with_Alley = train_df.loc[((train_df.Alley == 'Grvl') | (train_df.Alley == 'Paved'))]\ndf_without_Alley = train_df.loc[train_df.Alley.isnull()]\n\n# Figure\nfig, axs = plt.subplots(1, 2, figsize=(15,6))\naxs = axs.flatten()\n\naxs[0].set_title('SalePrice distribution with Alley')\nsns.distplot(np.log1p(df_with_Alley.SalePrice), ax=axs[0], color=color_pal[2]);\n\naxs[1].set_title('SalePrice distribution without Alley')\nsns.distplot(np.log1p(df_without_Alley.SalePrice), ax=axs[1], color=color_pal[2]);\n\nprint(f\"Mean SalePrice for houses with Alley : {df_with_Alley.SalePrice.mean()}\")\nprint(f\"Mean SalePrice for houses without Alley : {df_without_Alley.SalePrice.mean()}\")","244bbdc2":"# Houses with regular shape and irregular shape\ndf_regular_LotShape = train_df.loc[(train_df.LotShape == 'Reg')]\ndf_irregular_LotShape = train_df.loc[(train_df.LotShape != 'Reg')]\n\n# Figure\nfig, axs = plt.subplots(1, 2, figsize=(15,6))\naxs = axs.flatten()\n\naxs[0].set_title('SalePrice distribution with regular LotShape')\nsns.distplot(np.log1p(df_regular_LotShape.SalePrice), ax=axs[0], color=color_pal[3]);\n\naxs[1].set_title('SalePrice distribution irregular Lotshape')\nsns.distplot(np.log1p(df_irregular_LotShape.SalePrice), ax=axs[1], color=color_pal[3]);\n\nprint(f\"Mean SalePrice for houses with regular LotShape : {df_regular_LotShape.SalePrice.mean()}\")\nprint(f\"Mean SalePrice for houses with irregular Lotshape : {df_irregular_LotShape.SalePrice.mean()}\")","894f1201":"# Houses with utilities and those with not\ndf_all_utilities = train_df.loc[(train_df.Utilities == 'AllPub')]\ndf_few_utility = train_df.loc[(train_df.Utilities != 'AllPub')]\n\n# Figure\nfig, axs = plt.subplots(1, 2, figsize=(15,6))\naxs = axs.flatten()\n\naxs[0].set_title('SalePrice distribution with all Utilities')\nsns.distplot(df_all_utilities.SalePrice, ax=axs[0], color=color_pal[4]);\n\naxs[1].set_title('SalePrice distribution with few Utilities')\nsns.distplot(df_few_utility.SalePrice, ax=axs[1], color=color_pal[4]);\n\nprint(f\"Mean SalePrice for houses with all Utilities : {df_all_utilities.SalePrice.mean()}\")\nprint(f\"Mean SalePrice for houses with few Utilities : {df_few_utility.SalePrice.mean()}\")","88a0aebc":"# Checking on the testing data. Amount of houses which have NA values in them.\ntest_df.Utilities.isnull().sum()","1b87245c":"# Price Distribution based on each neighbourhood.\nneighborhoods = [x for x in train_df.Neighborhood.unique()]\n\n# Figure\nfig, axs = plt.subplots(len(neighborhoods)\/\/5 + len(neighborhoods)%5, 5, figsize=(30, 15), sharex=True)\naxs = axs.flatten()\n\n# Mean SalePrice\nmean = []\n\nfor i, neighbor in enumerate(neighborhoods):\n    axs[i].set_title(f'SalePrice distribution for {neighbor}')\n    sns.distplot(train_df.loc[train_df.Neighborhood == neighbor]['SalePrice'], ax=axs[i], color=color_pal[5]);\n    mean.append(train_df.loc[train_df.Neighborhood == neighbor]['SalePrice'].mean())\n    print(f\"Mean Sale Price for {neighbor}: {mean[i]}\")\n    \nplt.tight_layout()\nplt.show();\n\nprint(f'Max mean sale price is for neighborhood {neighborhoods[np.argmax(mean)]} : {max(mean)}')\nprint(f'Min mean sale price is for neighborhood {neighborhoods[np.argmin(mean)]} : {min(mean)}')","81a3b806":"# Get only houses with MiscVal greater than 0\ndf_miscVal = train_df.loc[train_df.MiscVal > 0]\n\n# MiscVal vs SalePrice\nplt.title('SalePrice vs MiscVal')\nsns.scatterplot(df_miscVal.SalePrice, df_miscVal.MiscVal, color=color_pal[5]);","7af982c8":"# Creating a column to calculate the total floor area of the house.\ntrain_df['Total_Floor_Area'] = train_df['1stFlrSF'] + train_df['2ndFlrSF']\n\n# Total_Floor_Area vs SalePrice\nplt.figure(figsize=(8,5))\nplt.title('SalePrice vs Total_Floor_Area')\nsns.scatterplot(train_df.SalePrice, train_df.Total_Floor_Area, color=color_pal[6]);","49baadff":"# Using the same df for irregular and regular LotShape\nprint(f\"Mean Area of Regular LotShape Properties : {df_regular_LotShape.LotArea.mean()}\")\nprint(f\"Mean Area of Irregular LotShape Properties : {df_irregular_LotShape.LotArea.mean()}\")","59c7365b":"columns_plot = ['MSZoning', 'MSSubClass', 'Condition1', 'Condition2',\n               'BldgType', 'HouseStyle', 'OverallQual', 'OverallCond',\n               'RoofStyle', 'RoofMatl', 'Exterior1st', 'Exterior2nd',\n               'MasVnrType', 'ExterQual', 'ExterCond', 'Foundation']\n\n# Plotting catplotss for above columns\nfig, ax = plt.subplots(4, 4, figsize=(25,20))\nax = ax.flatten()\n\nfor i, col in enumerate(columns_plot):\n    ax[i].tick_params(axis='x', labelsize=10, rotation=90)\n    ax[i].set_xlabel('label', fontsize=17, position=(.5,20))\n    ax[i].set_ylabel('label', fontsize=17)\n    ax[i] = sns.stripplot(x=col, y=\"SalePrice\", data=train_df, ax=ax[i])\nfig.suptitle('Categorical Features Vs SalePrice Overview', position=(.5,1.1), fontsize=20)\nfig.tight_layout()\n\nfig.show()","57cb8590":"## Hypothesis2: Alley increases the selling price of the house","95c9b734":"## YearBuilt","174116f2":"The quickest way to explore the continuous vs continous variable is to plot a pairplot using seaborn. Pairplot can be computationally very expensive, so this may take sometime.","9959dd55":"So only one observation is present for house not containig all the basic utilities. So this hypothesis cannot be verified as we do not have enough data for it. All the houses provide basic utilities. This column can be dropped as there is not much variance in it and only one observation is different from the train population. ","edb1bab6":"A good linear possitive correlation can be seen in the total floor are size and SalePrice. This indicates that the hypothesis is true and thus cannot be rejected. Hence, floor size increases the Selling Price of the house.","04800f16":"# Objecttive\nThe main objective of this notebook is to perform bivariate analysis and test the hypothesis created in the previous notebook.<br>\nIf you haven't checked the previous notebook I recommend you to go through it to get a basic idea of the dataset and the hypothesis created.<br>\n[Notebook](http:\/\/https:\/\/www.kaggle.com\/errolpereira\/house-prices-problem-definition-and-eda)<br>\n\nAs we will see the impact of features on the target variable we will note down some more hypothesis to test and jot down some ideas to create new features out of the existing one.<br>\nBelow are the hypothesis created in the previous notebook:\n1. Higher LotArea means higher selling price of the house.\n2. Alley increases the selling price of the house.\n3. Irregular shape of the lot does not effect the selling price.\n4. Houses with all the utlities will have higher selling price.\n5. Neighborhood will effect the seeling price of the house.\n6. MiscVal is directly proportional to the selling price.\n7. The Floor areas increases the selling price price of the house.\n\nWe will create and test some more hypothesis along the way.","e29d1323":"# Bivariate Analysis","f582c301":"## Hypothesis7: The Floor areas increases the selling price price of the house","38df2a6a":"## Hypothesis4: Houses with all the utlities will have higher selling price.","2237db3f":"SalePrice is possitively correlated to the following columns:\n1. YearBuilt\n2. YearRemodAdd\n3. BsmtFinSf2\n4. BsmtUnfSF\n5. TotalBsmtSF\n6. 1stFlrSF\n7. 2ndFlrSF\n8. GrLivArea\n9. GarageYrBlt","0dcf670e":"It looks that having an Alley does not increases the size of the property. So we cannot accept this hypothesis.","8614a8a2":"# Categorical vs Continuous Variables","976d3d49":"So the higher mean SalePrice of houses with Irregular LotShape may be because they have comparitively more LotAre. And above we saw that area is correlated to the selling price of the house.","4e42adba":"Most of the values in the LotArea lies betwen 0 to 50000 and thats why the correlation cannot be seen properly. However we can see a linear realtion here.<br>\nWill remove the extreme points to scale the data better.","12a86612":"## Hypothesis6: MiscVal is directly proportional to the selling price.","caa8c363":"The property rate has not increased considerably over the years. Although it has gone a little up.","35a2f7f7":"## Hypothesis5: Neighborhood will effect the seeling price of the house.","a6c2dfe2":"## Continuous and Continuous","9364258f":"MSZoning\n\nRL - Residential Low Density has high salepice compared to others. <br>\nC - Commercial area is not suited for residential houses and thus has less count of houses and less saleprice.<br>\nLow density zones followed by medium density are the ones preferable by customers.\n\nMSSubClass\n\n60\t2-STORY 1946 & NEWER - Has houses with high SalePrice followed by 20 - 1-STORY 1946 & NEWER ALL STYLES<br>\n40 1-STORY W\/FINISHED ATTIC ALL AGES has the least number of houses<br>\n180 PUD - MULTILEVEL - INCL SPLIT LEV\/FOYER has comparitively less SalePrice.\n\nOverallQual\n\nAs the quality increases the saleprice increase. Highly correlated.<br>\nSame pattern cannot be seen in OverallCond.\n","742ca759":"## Hypothesis 1 : Higher LotArea means higher selling price of the house","9b048d73":"After log transforming the feature we can more clearly see the relation of LotArea with SalePrice and it is safe to say that the hypothesis holds true. The SalePrice do increases with the increase in LotArea. It is not a strong possitive correlation but neverthless there is some possitive relation.","717fb3e5":"There is no relationship whatsoever with the SalePrice and MiscVal feature. Rejecting this hypothesis.","a9871f72":"The mean SalePrice for irregular LotShapes is more than that of regular ones. Also in the previous notebook we saw that most of the lots in the dataset are of regular shape only. The hypothesis is thus rejected. The lotshape has some effect on the SalePrice of the houses.<br>\n**Hypithesis : Lot with irregular shape has more LotArea and so more SalePrice.**","bfd9ba06":"In the test data 2 observations for Utilities column is null and rest all are having AllPub as its value. We can drop this variable coz of the same reason above. ","770b6ad5":"Noridge has most of its houses in the range of 200-400K and some in 800K as well along with StoneBr and NridgHT. These 3 are the posh areas where the house avg house price is high. The cheapest neighborhood is the MeadowV with an avg salePrice of 98K.<br>\nThe hypothesis thus cannot be rejected that the SalePrice depends on the Neighborhood where the house is.","8ef9ea19":"## Hypothesis8: Lot with irregular shape has more LotArea and thus more SalePrice","140cf378":"## Hypothesis3: Irregular shape of the lot does not effect the selling price"}}