{"cell_type":{"416147c6":"code","41c0b1a2":"code","ab662911":"code","ed003c2f":"code","9bbbeacf":"code","afc9d224":"code","83533730":"code","589b1478":"code","48c90980":"code","a80d6551":"code","c1331db1":"code","5258633f":"code","45c18161":"code","5b460469":"code","f69070e9":"code","40a5f5c0":"code","9f4711e7":"code","1904ee70":"markdown","a2b3d88a":"markdown","8a8824c3":"markdown","5d09e239":"markdown","33b067d1":"markdown","79d83353":"markdown","22e8b8cd":"markdown","b1d7a3e5":"markdown","5ef73905":"markdown","bb126b75":"markdown","6a8ae144":"markdown","2845280f":"markdown","475cb110":"markdown","9898f0f0":"markdown"},"source":{"416147c6":"import pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport json\nfrom urllib.request import urlopen\nimport seaborn as sns\nimport matplotlib.pyplot as plt","41c0b1a2":"hours_worked = pd.read_csv('..\/input\/time-use-employment-and-gdp-per-country\/Avg_hours_worked_(1950-2017).csv', index_col='Year')\n\n#Read reference table from website to append continent and country names\nurl = \"https:\/\/cloford.com\/resources\/codes\/index.htm\"\ncontinents = pd.read_html(url, attrs={'class':'outlinetable'})[0]\n#Add two missing countries to reference table\ncontinents = continents.append(pd.DataFrame({'Country':['Hong Kong', 'Romania'],'ISO (3)':['HKG','ROU'],'Continent':['Asia', 'Europe']}))\n\n# Merge reference table and hours worked\nhours_worked = hours_worked.reset_index().merge(right=continents[['Continent','Country', 'ISO (3)']], how='left', left_on='RegionCode', right_on='ISO (3)').drop(columns='ISO (3)').set_index('Year')\nhours_worked","ab662911":"#Verify there are no more missing values.\nhours_worked.info()","ed003c2f":"fig = px.line(hours_worked, y='AvgHoursWorked', \n              color='Continent', \n              hover_name = 'RegionCode', \n              line_group = 'Country', \n              template='plotly_white',\n              height=650,\n              title ='<span style=\"color:#012888;font-weight:bold\">Yearly Avg. Working hours per Country<\/span>'+'<br>'+\n                    '<span style=\"font-size: 13px;color:#444444;\">Asian countries have higher working hours. Korea stands out as having a experienced a large decrease since 1970. <br>On the other hand, Europe clearly has the lowest Avg. working hours, with Norway, Denmark and Germany at the bottom. <\/span>'\n             )\n\n#Calculate yearly averages\navg_hours_by_year = hours_worked.groupby('Year').mean()\n\nfig.add_hline(y=hours_worked.AvgHoursWorked.mean(), \n              line_dash=\"dot\", \n              line_color='#000000',\n              annotation_text=\"Avg: \" + str('{:.0f}'.format(hours_worked.AvgHoursWorked.mean()))+\" hrs\", \n              annotation_position=\"right\",\n              annotation_font_size=13,\n              line_width=5,\n              opacity=0.8)\n\nfig.show()","9bbbeacf":"with urlopen('https:\/\/raw.githubusercontent.com\/johan\/world.geo.json\/master\/countries.geo.json') as response:\n    countries = json.load(response)\n\nfig = px.choropleth(hours_worked.reset_index(),geojson=countries, locations='RegionCode', \n                        color='AvgHoursWorked',\n                        color_continuous_scale=\"Reds\",\n                        labels={'RegionCode':'Region Code','AvgHoursWorked':'Avg. Hours worked' },\n                        animation_frame=\"Year\",\n                        title= '<span style=\"color:#012888;font-weight:bold\">Yearly Avg. Working hours per Country<\/span>',\n                        width=1000,\n                        height=650\n                        )\nfig.update_layout(\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    ))\n\n\nfig.update_layout(margin={\"r\":0,\"l\":0,\"b\":0})\nfig.show()","afc9d224":"#Load data and add continent classification for the countries\nrgdpo = pd.read_csv('..\/input\/time-use-employment-and-gdp-per-country\/Yearly_RGDPO_(1950-2017).csv')\nrgdpo = rgdpo.merge(right=continents[['Continent','Country', 'ISO (3)']], how='left', left_on='RegionCode', right_on='ISO (3)').drop(columns='ISO (3)')\nrgdpo.rename(columns={'YearCode':'Year'},inplace=True)\nrgdpo.set_index('Year',inplace=True)\nrgdpo.dropna(axis='index',inplace=True)\nrgdpo","83533730":"fig = px.line(rgdpo, y='rgdpo', \n              color='Continent', \n              hover_name = 'RegionCode', \n              line_group = 'Country', \n              template='plotly_white',\n              height=650,\n              labels= {'rgdpo':'RGDPO (in mil. 2017US$)'},\n              title ='<span style=\"color:#012888;font-weight:bold\">Yearly RGDPO (in mil. 2017US$) per Country<\/span>'\n             )\nfig.show()","589b1478":"with urlopen('https:\/\/raw.githubusercontent.com\/johan\/world.geo.json\/master\/countries.geo.json') as response:\n    countries = json.load(response)\n\nfig = px.choropleth(rgdpo.reset_index(),geojson=countries, locations='RegionCode', \n                        color='rgdpo',\n                        color_continuous_scale=\"Blues\",\n                        labels={'RegionCode':'Region Code','rgdpo':'RGDPO (in mil. 2017US$)' },\n                        animation_frame=\"Year\",\n                        title= '<span style=\"color:#012888;font-weight:bold\">Yearly RGDPO (in mil. 2017US$) per Country<\/span>',\n                        width=1000,\n                        height=650\n                        )\nfig.update_layout(\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    ))\n\n\nfig.update_layout(margin={\"r\":0,\"l\":0,\"b\":0})\nfig.show()","48c90980":"m_rgdpo_work = rgdpo.merge(right=hours_worked, how='inner', left_on=['RegionCode','Year'], right_on=['RegionCode','Year'], suffixes=['','_y'])\nm_rgdpo_work.drop(m_rgdpo_work.filter(regex='_y$').columns.tolist(),axis=1, inplace=True)\nm_rgdpo_work.reset_index(inplace=True)\nm_rgdpo_work=m_rgdpo_work.round(0)","a80d6551":"fig= px.scatter(m_rgdpo_work, y='rgdpo', x='AvgHoursWorked', size='pop', color='Continent',\n                animation_frame='Year',\n                hover_name='Country',\n                width=900,\n                height=600,\n                size_max=130,\n                title='<span style=\"color:#012888;font-weight:bold\">RGDPO vs Avg. Hous Worked<\/span>'+'<br>'+'<span style=\"font-size: 13px;color:#444444;\">There doesnt seem to be a stron relationship between RGDPO and Avg. HW.<br>However, there does seem to be a trend for both variables over time, where RGDPO increases and Avg.WH. decrease.<\/span>'\n               )\n\nx0=m_rgdpo_work['AvgHoursWorked'].min()\nx1=m_rgdpo_work['AvgHoursWorked'].max()\ny0=m_rgdpo_work['rgdpo'].min()\ny1=m_rgdpo_work['rgdpo'].max()\n\nfig.update_xaxes(range=[x0-x0*0.05, x1+x1*0.05])\nfig.update_yaxes(range=[y0-2000000, y1+100000])\n\nfig.show()","c1331db1":"sns.pairplot(m_rgdpo_work, hue='Continent', corner=True, height=2.3)\nplt.show()","5258633f":"time_use = pd.read_csv('..\/input\/time-use-employment-and-gdp-per-country\/Time_use_OECD.csv')\ntime_use","45c18161":"def create_scatter_time_use(time_use_filter, annotation_x, annotation_y, title):\n\n    gender_time_use = pd.pivot_table(time_use, columns= 'Sex', values= 'Minutes_per_day', index= ['Country_Code', 'Country','Description'] ).reset_index().round(0)\n\n    fig = px.scatter(gender_time_use[gender_time_use['Description']==time_use_filter], x= 'Men', y= 'Women', \n                        template= 'plotly_white',\n                        width= 700,\n                        height= 700,\n                        hover_name= 'Country',\n                        title= title,\n                        labels={\n                         \"Men\": \"Men [min]\", \"Women\":\"Women [min]\"\n                        }\n                    )\n\n    y0= min([min(gender_time_use[gender_time_use['Description']==time_use_filter].Women),min(gender_time_use[gender_time_use['Description']==time_use_filter].Men)])-10\n    y1= max([max(gender_time_use[gender_time_use['Description']==time_use_filter].Women),max(gender_time_use[gender_time_use['Description']==time_use_filter].Men)])+10\n    x0= min([min(gender_time_use[gender_time_use['Description']==time_use_filter].Men),y0])\n    x1= max([max(gender_time_use[gender_time_use['Description']==time_use_filter].Men),y1])\n\n    fig.add_shape(type=\"line\",\n        xref=\"x\", yref=\"y\",\n        x0=x0, y0=y0,\n        x1=x1, y1=y1,\n        opacity=0.4,\n        fillcolor=\"grey\",\n        line_color=\"grey\",\n        line=dict(\n            width=3,\n            dash=\"dot\",\n        )\n    )\n\n    fig.add_annotation(\n                x=annotation_x,\n                y=annotation_y,\n                text='Gender parity line',\n                xref=\"x\",\n                yref=\"y\",\n                textangle = -45,\n                showarrow=False,\n                font_size=13,\n                font=dict(\n                color= 'grey'\n                )\n    )\n\n\n    fig.update_xaxes(range=[x0, x1])\n    fig.update_yaxes(range=[y0, y1])\n\n    #fig.show()\n    return fig","5b460469":"title = '<span style=\"color:#012888;font-weight:bold\">Gender gap in Leisure time<\/span>'+'<br>'+'<span style=\"font-size: 13px;color:#444444;\">The data is spread out and slightly biased towards men, being below the parity line. <br>Mexico and Norway stand out as being the lowes and highest with regards to time spent leisurely.<\/span>'\ncreate_scatter_time_use('Leisure',181,189, title).show()","f69070e9":"title = '<span style=\"color:#012888;font-weight:bold\">Gender gap in Paid work\/study time<\/span>'+'<br>'+'<span style=\"font-size: 13px;color:#444444;\">The data is biasaed towards men below the parity line. Indicating that men spend more time working\/studying.<\/span>'\ncreate_scatter_time_use('Paid work or study',175,187, title).show()","40a5f5c0":"title = '<span style=\"color:#012888;font-weight:bold\">Gender gap in Unpaid work time<\/span>'+'<br>'+'<span style=\"font-size: 13px;color:#444444;\">The data is less dispersed and biased towards women. <br>This makes sense, as traditionally, women perform unpaid activities such as house keeping.<\/span>'\ncreate_scatter_time_use('Unpaid work',75,87, title).show()","9f4711e7":"title = '<span style=\"color:#012888;font-weight:bold\">Gender gap in personal care time<\/span>'+'<br>'+'<span style=\"font-size: 13px;color:#444444;\">Time spent in personal care is relatively uniform, being slightly higher in women. <br>France stands out as both men and women spend larger amounts of time.<\/span>'\ncreate_scatter_time_use('Personal care',610,615, title).show()","1904ee70":"<img src=\"https:\/\/ourworldindata.org\/uploads\/2020\/11\/Time-Use-by-Country-OECD-732x550.png\" alt=\"Time use OWID\">","a2b3d88a":"<center> <img src=\"http:\/\/sbpress.com\/wp-content\/uploads\/2019\/09\/fd4a335311d225bdc2e44d780aea9b55.jpg\" alt=\"banner\" width=800> <\/center>","8a8824c3":"## Yearly RGDPO <a class=\"anchor\" id=\"2\"><\/a>","5d09e239":"## TOC:\n* [Avg. Hours Worked](#1)\n* [Yearly RGDPO](#2)\n* [RGDPO vs Avg. Hours Worked](#vs)\n* [Time use](#3)\n    * [How do people spend their time?](#4)\n    * [Gender gap in leisurer time](#5)\n    * [Gender gap in paid work\/study](#6)\n    * [Gender gap in personal care time](#7)","33b067d1":"### Gender gap in leisure time <a class=\"anchor\" id=\"5\"><\/a>","79d83353":"### Gender gap in paid work\/study time <a class=\"anchor\" id=\"6\"><\/a>","22e8b8cd":"Data analysis and visualization on world time use, work hours and GDP global data.\nhttps:\/\/www.kaggle.com\/felipechapa\/time-use-employment-and-gdp-per-country\n\n__Context__\nTime use can vary greatly by country and between genders, be it by it's location, cultural differences, or economic situation. The data provided is by no means exhaustive but contains some interesting information on leisure time by gender, as well as historic data (1950-2017) on Avg. work hours and GDP in different countries and continents.\n\n__Content__\nDatasets were obtained from two sources:\n\nOECD Time use country statistics: Based on a collection of different questionnaires for different countries, it provides a distribution for time spent on different activities for both men and women in different countries.\nPenn World Table (PWT) with information on RGDPO (in mil. 2017US$), work hours and population (in millions) actively working. Covering 183 countries between 1950 and 2019.","b1d7a3e5":"## Avg. Hours Worked <a class=\"anchor\" id=\"1\"><\/a>","5ef73905":"### Gender gap in unpaid work <a class=\"anchor\" id=\"6\"><\/a>","bb126b75":"<a class=\"anchor\" id=\"4\"><\/a>","6a8ae144":"# World Time use, work hours and GDP\n","2845280f":"## Time use <a class=\"anchor\" id=\"3\"><\/a>","475cb110":"## RGDPO vs Avg. Hours Worked <a class=\"anchor\" id=\"vs\"><\/a>","9898f0f0":"### Gender gap in personal care time <a class=\"anchor\" id=\"7\"><\/a>"}}