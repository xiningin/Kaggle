{"cell_type":{"eb2d70df":"code","1d5e8b0d":"code","f0188d5f":"code","3650c517":"code","3b1276db":"code","3889ec20":"code","78b19fc3":"code","41585f17":"code","873f33b9":"code","28c8d737":"code","14ac666c":"code","ed4cda19":"code","04420673":"code","41f7517d":"code","f4513754":"code","0669b02f":"code","792d4058":"code","66c68e4a":"code","4d2e62e2":"code","6a90acc1":"code","8f6e107b":"code","402df431":"code","38c38653":"code","3fa99339":"code","aa1af65e":"code","0a80c656":"markdown","0ace130d":"markdown","4f051e7b":"markdown","61540d5f":"markdown","b5596afe":"markdown","09ee022d":"markdown","ce60f93b":"markdown","6c1507b3":"markdown","bce53698":"markdown","d4698701":"markdown","4425fb64":"markdown","ca41064f":"markdown","a347cd8d":"markdown","75a4ce1a":"markdown","e532e802":"markdown","bef49148":"markdown","35ae1370":"markdown","f0c21f8a":"markdown"},"source":{"eb2d70df":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1d5e8b0d":"import seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","f0188d5f":"SMALL_SIZE = 10\nMEDIUM_SIZE = 12\nBIGGER_SIZE = 14\n\nplt.rc('font', size=SMALL_SIZE)          # controls default text sizes\nplt.rc('axes', titlesize=SMALL_SIZE)     # fontsize of the axes title\nplt.rc('axes', labelsize=MEDIUM_SIZE)    # fontsize of the x and y labels\nplt.rc('xtick', labelsize=SMALL_SIZE)    # fontsize of the tick labels\nplt.rc('ytick', labelsize=SMALL_SIZE)    # fontsize of the tick labels\nplt.rc('legend', fontsize=SMALL_SIZE)    # legend fontsize\nplt.rc('figure', titlesize=BIGGER_SIZE)  # fontsize of the figure title","3650c517":"dataset = pd.read_csv(\"\/kaggle\/input\/vehicle-insurance-data\/VehicleInsuranceData.csv\")","3b1276db":"dataset.head()","3889ec20":"policy=dataset[['Education','EmploymentStatus','Income','Location.Code','Marital.Status','Number.of.Policies','Gender','clv']]","78b19fc3":"plt.figure(figsize=(10,6))\n#plt.title(\"Income(Education)\")\nsns.barplot(data=policy,x='Marital.Status',y='Number.of.Policies',hue='Gender',palette='YlGnBu')\nplt.xlabel('Marital status')\nplt.ylabel('Number of policies');","41585f17":"plt.figure(figsize=(10,6))\n#plt.title(\"Income(Education)\")\nsns.barplot(data=policy,x='EmploymentStatus',y='Number.of.Policies',hue='Gender',palette='YlGnBu')\nplt.xlabel('Employment status')\nplt.ylabel('Number of policies');","873f33b9":"plt.figure(figsize=(10,6))\nplt.title(\"Income(Education)\")\nsns.barplot(data=policy,x='EmploymentStatus',y='Income',hue='Gender',palette='YlGnBu')\nplt.xlabel('Employment status')\nplt.ylabel('Income');","28c8d737":"plt.figure(figsize=(10,6))\n#plt.title(\"Income(Education)\")\nsns.barplot(x=policy['Education'],y=policy['Income'],hue=policy['Gender'],palette='YlGnBu')\nplt.xlabel('Education')\nplt.ylabel('Income ($ \/ year)');","14ac666c":"sns.jointplot(data=policy.loc[policy['EmploymentStatus']=='Employed'],x='clv', y='Income',kind='kde');","ed4cda19":"sns.jointplot(data=policy.loc[policy['EmploymentStatus']=='Retired'],x='clv', y='Income',kind='kde');","04420673":"sns.jointplot(data=policy.loc[policy['EmploymentStatus']=='Medical Leave'],x='clv', y='Income',kind='kde');","41f7517d":"sns.jointplot(data=policy.loc[policy['EmploymentStatus']=='Disabled'],x='clv', y='Income',kind='kde');","f4513754":"sns.jointplot(data=policy,x='clv', y='Income',kind='kde');","0669b02f":"plt.figure(figsize=(18,6))\nplt.rc('xtick', labelsize=15)  \nplt.rc('axes', labelsize=15) \nsns.boxplot(data=policy,x='clv');","792d4058":"IQR=(policy['clv'].quantile(.75)-policy['clv'].quantile(.25))\npolicy.loc[policy['clv']> policy['clv'].quantile(.75)+IQR*1.5].shape[0]","66c68e4a":"med=policy['clv'].median()","4d2e62e2":"residuals = abs(policy['clv']-med)","6a90acc1":"MAD=abs(policy['clv']-med).median()","8f6e107b":"MAD","402df431":"vehicle= dataset[['Vehicle.Size','Vehicle.Class']]","38c38653":"plt.figure(figsize=(10,6))\nplt.title(\"Bar chart of vehicle sizes\")\nunique_sizes=vehicle['Vehicle.Size'].unique()\nsns.barplot(x=unique_sizes,y=vehicle['Vehicle.Size'].value_counts()[unique_sizes])\nplt.xlabel('Vehicle size')\nplt.ylabel('Count (in units)');","3fa99339":"sns.set_style('dark')\nplt.figure(figsize=(10,6))\nplt.title(\"Bar chart of vehicle classes\")\nunique_sizes=vehicle['Vehicle.Class'].unique()\nsns.barplot(x=unique_sizes,y=vehicle['Vehicle.Class'].value_counts()[unique_sizes])\nplt.xlabel('Vehicle Class')\nplt.ylabel('Count (in units)');","aa1af65e":"policy=dataset[[]]","0a80c656":"How policyholder's *EmploymentStatus* and *Marital.Status*  associated with *Number.of.Policies* ?","0ace130d":"# **Summary review**","4f051e7b":"There are at least 418 outlier *cvl* points  according to Tukey's fences estimation","61540d5f":"So we can assume that there are few outliers in *customer lifetime value* feature.  \n Values with *clv* over 15000 look suspicious owing to long thin \"tail\".\n They might be outliers due to low frequency for any *Employment Status* whatsoever. \n  Therefore, we are going to check it ","b5596afe":"Now let's looking at policy information","09ee022d":"### *Policy statistics*","ce60f93b":"## And how *Incomes* feature distributed for all *Employment Status* of policyholders ","6c1507b3":"As you could see, most of all cars are ***Four-Door*** and ***Medsized***.\n\n*Luxury SUV*, *Luxury Car* and  *Sports Car* are not so popular as others sizes. May be it's due to their cost ?","bce53698":"### 1. [Tukey's fences](https:\/\/en.wikipedia.org\/wiki\/Outlier#Tukey's_fences) approach","d4698701":"Let's view how *Income*  variable depends on *Employment Status* in insurance data.","4425fb64":"Wow! That's was suprising. So MAD doesn't work at all for this data owing to long thin tail and skewness of distribution","ca41064f":"Let's begin with general data about policyholders. It's might be interesting","a347cd8d":"How *Income* and *Location* features related with *Education* ? Let's figure it out for both genders","75a4ce1a":"We will try a few different approaches due to be more objective in outliers definition. Because if we marked or dropped these suspectious values we would miss some crutial insights.","e532e802":"### *Vehicle statistics*","bef49148":"### 2. [Median Absolute Deviation](https:\/\/en.wikipedia.org\/wiki\/Median_absolute_deviation) approach","35ae1370":"### *Policyholder statistics*","f0c21f8a":"As you could see, *Income* is not depands from policyholder's *Education* almost at all for each *gender*. Whereas for retired females *Number of policie* is about in 1.5 times less than for retired males"}}