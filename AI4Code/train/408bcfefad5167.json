{"cell_type":{"ad1980cd":"code","9190be40":"code","03b53a83":"code","cfce6998":"code","b300575f":"code","2f5b75bb":"code","257efac0":"code","f3f2badc":"code","deb1187b":"code","a6578c29":"code","59217167":"code","9578e8f2":"code","f7f992ad":"code","bb8a61b6":"code","477de5f9":"code","e585167f":"code","6532801f":"code","5ddbd397":"code","ebd5805c":"code","dbf3ae2b":"code","aca3d438":"code","60ddbf1c":"code","6040de93":"code","afdff9f1":"code","7e5ec610":"code","9875c379":"code","64b7f4cb":"markdown","1743a445":"markdown","9b003d6a":"markdown","45c3fb42":"markdown","293190cc":"markdown","1623eb33":"markdown","994fb874":"markdown","24f0f927":"markdown","406cfa3f":"markdown","8fad6cbf":"markdown","5d91d873":"markdown","e70f557a":"markdown","81bde6ad":"markdown","db7d29b3":"markdown","92e1e1aa":"markdown","16caaf85":"markdown","00a1b644":"markdown","6e640879":"markdown","3f0fe603":"markdown","a7a4fa1d":"markdown","35ce8de9":"markdown","8c6f88e9":"markdown"},"source":{"ad1980cd":"from IPython.display import Image\nfrom IPython.core.display import HTML \nurl = 'https:\/\/5vtj648dfk323byvjb7k1e9w-wpengine.netdna-ssl.com\/wp-content\/uploads\/2018\/05\/shutterstock_170867918-e1525266245642.jpg'\nImage(url= url, width=600, height=600, unconfined=True)","9190be40":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","03b53a83":"# Import files\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport datetime as dt\nimport matplotlib.pyplot as plt\n\n\nfrom plotly.offline import iplot, init_notebook_mode, plot, download_plotlyjs\ninit_notebook_mode()\n\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly import tools\nfrom plotly.subplots import make_subplots\n","cfce6998":"df_usage = pd.read_csv('..\/input\/residential-power-usage-3years-data-timeseries\/power_usage_2016_to_2020.csv')\ndf_weather = pd.read_csv('..\/input\/residential-power-usage-3years-data-timeseries\/weather_2016_2020_daily.csv')","b300575f":"df_usage.head()","2f5b75bb":"df_weather.head()","257efac0":"from IPython.display import Image\nfrom IPython.core.display import HTML \nurl = 'https:\/\/qlabe.com\/wp-content\/uploads\/power-consumption-chart-for-electrical-appliances.png'\nImage(url= url, width=600, height=600, unconfined=True)","f3f2badc":"# Date column update for 'df_usage'\n\nn = df_usage.shape[0]\np1 = pd.Series(range(n), pd.period_range('2016-06-01 00:00:00', freq = '1H', periods = n))\ndf_usage['StartDate'] = p1.to_frame().index\n\n# Date column update for 'df_weather'\nm = df_weather.shape[0]\np2 = pd.Series(range(m), pd.period_range('2016-06-01', freq = '1D', periods = m))\ndf_weather['Date'] = p2.to_frame().index\n\n# convert the period date into timestamp\ndf_usage['StartDate'] = df_usage['StartDate'].apply (lambda x: x.to_timestamp())\ndf_usage['Date'] = pd.DatetimeIndex(df_usage['StartDate']).date\n\n# convert the period date into timestamp\ndf_weather['Date'] = df_weather['Date'].apply (lambda x: x.to_timestamp())","deb1187b":"df_usage_daily = df_usage.groupby('Date').sum()\n\ndf_usage_daily['day_of_week'] = df_usage_daily['day_of_week'].apply(lambda x: x\/24)\n\nnotes_col = df_usage.groupby('Date').first()['notes'].values\ndf_usage_daily['notes'] = notes_col\ndf_usage_daily.head()","a6578c29":"#filter the weather data to match with power usage dataframe. \n\nk = df_usage_daily.shape[0]\ndf_weather[0:k]\n\n\n#copy the value kwh into weather dataframe. \ndf1 = df_usage_daily['Value (kWh)'].values\ncomb_df = df_weather[0:k]\ncomb_df['kWh_usage'] = pd.Series(df1).to_frame()\n\n#comb_df.set_index('Date', drop=True, append=False, inplace=True, verify_integrity=False)","59217167":"# filter data yearly. \n\nx_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Date'])\nx_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['Date'])\nx_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['Date'])\n\n\n# y_axis data for 2017\ny1_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['kWh_usage'])\ny2_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Temp_max'])\ny3_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Temp_min'])\ny4_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Dew_max'])\ny5_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Dew_min'])\ny6_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Precipit'])\ny7_2017 = list(comb_df[(comb_df['Date'] >= '2017-01-01') & (comb_df['Date'] < '2017-12-31')]['Press_max'])\n\n\n\n#y axis for 2018\ny1_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['kWh_usage'])\ny2_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['Temp_max'])\ny3_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['Temp_min'])\ny4_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['Dew_max'])\ny5_2018 = list(comb_df[(comb_df['Date'] >= '2018-01-01') & (comb_df['Date'] < '2018-12-31')]['Dew_min'])\n\n#y axis for 2019\ny1_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['kWh_usage'])\ny2_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['Temp_max'])\ny3_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['Temp_min'])\ny4_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['Dew_max'])\ny5_2019 = list(comb_df[(comb_df['Date'] >= '2019-01-01') & (comb_df['Date'] < '2019-12-31')]['Dew_min'])","9578e8f2":"# POWER CONSUMPTION PER HOUR ON VARIOUS CATEGORIES OF DAYS\n\ndf_usage[df_usage['notes'] == 'weekday']['Value (kWh)'].mean()\n\n\nmean_power_perhour= []\nnotes = list(df_usage['notes'].unique())\nfor n in notes:\n    mean_power_perhour.append(df_usage[df_usage['notes'] == n]['Value (kWh)'].mean())\n# print(notes)\n# print(mean_power_perhour)","f7f992ad":"#average power usage during weekday, weekend, covid and vacation time\ntrace = go.Bar(x = notes, \n              y  = mean_power_perhour,                \n              )\n\ndata = [trace]\nlayout = {'title': 'Power usage per hour', \n         'xaxis':{'title': \"categories\"}, \n         'yaxis': {'title': 'kW'}, \n         'barmode': 'group'}\nfig = go.Figure(data=data, layout = layout)\niplot(fig)","bb8a61b6":"trace = go.Scatter(x = x_2017, \n                  y = y1_2017, \n                  mode = 'markers',\n                  marker = dict(size =12,\n                                color= y2_2017, \n                                colorscale = 'Portland', \n                                showscale = True\n                                ))\ndata =[trace]\n\nlayout = { 'title': 'Correlation btw date and power_usage', \n          'xaxis': {'title': 'Year 2017', 'zeroline': True }, \n          'yaxis': {'title': 'kWh-Power_usage', 'zeroline': True }   \n    \n}\n\niplot({'data': data, 'layout': layout})","477de5f9":"trace = go.Scatter(x = x_2017, \n                  y = y1_2017, \n                  mode = 'markers',\n                  marker = dict(size =12,\n                                color= y2_2017, \n                                colorscale = 'Portland', \n                                showscale = True\n                                ))\n\ntrace1 = go.Scatter(x = x_2018, \n                  y = y1_2018, \n                  mode = 'markers',\n                  marker = dict(size =12,\n                                color= y2_2018, \n                                colorscale = 'Portland', \n                                showscale = False\n                                ))\n\ntrace2 = go.Scatter(x = x_2019, \n                  y = y1_2019, \n                  mode = 'markers',\n                  marker = dict(size =12,\n                                color= y2_2019, \n                                colorscale = 'Portland', \n                                showscale = False\n                                ))\n\n\n\n# fig = tools.make_subplots(rows = 3, \n#                          cols = 1, \n#                          subplot_titles = ('2017','2018','2019'))\n\nfig = make_subplots(rows = 3, \n                         cols = 1, \n                         subplot_titles = ('2017','2018','2019'))\n\n\nfig.append_trace(trace,1,1)\nfig.append_trace(trace1,2,1)\nfig.append_trace(trace2,3,1)\n\n\n# fig.layout['xaxis1'].update(title = 'Year 2017')\n# fig.layout['xaxis2'].update(title = 'Year 2018')\n# fig.layout['xaxis3'].update(title = 'Year 2019')\n\nfig.layout['yaxis1'].update(title = 'kWh')\nfig.layout['yaxis2'].update(title = 'kWh')\nfig.layout['yaxis3'].update(title = 'kWh')\n\n\nfig.layout.update(title = 'Scatter plot for yearwise power usage with respect to max temp')\n\niplot(fig)","e585167f":"trace = go.Histogram(x = y1_2017, nbinsx=50)\ntrace1 = go.Histogram(x = y1_2018, nbinsx=50)\ntrace2 = go.Histogram(x = y1_2019, nbinsx=50)\n\n\n\nfig = make_subplots(rows = 3, \n                         cols = 1, \n                         subplot_titles = ('2017', '2018',\n                                          '2019'))\nfig.append_trace(trace,1,1)\nfig.append_trace(trace1,2,1)\nfig.append_trace(trace2,3,1)\n\nfig.layout['yaxis1'].update(title = 'Frequency')\nfig.layout['yaxis2'].update(title = 'Frequency')\nfig.layout['yaxis3'].update(title = 'Frequency')\n\n\nfig.layout.update(title = 'Histogram of power usage yearwise')\n\niplot(fig)","6532801f":"trace = go.Scatter(x = x_2017, \n                  y = y1_2017, \n                  fill = 'tozerox',\n                  #fillcolor = 'darkblue',\n                  mode = 'lines')\ntrace1 = go.Scatter(x = x_2017, \n                  y = y1_2018, \n                  fill = 'tozerox',\n                  #fillcolor = 'darkblue',\n                  mode = 'lines')\n\ntrace2 = go.Scatter(x = x_2017, \n                  y = y1_2019, \n                  fill = 'tozerox',\n                  #fillcolor = 'darkblue',\n                  mode = 'lines')\n\n\n\ndata = [trace, trace1, trace2]\niplot({'data': data})","5ddbd397":"# power consumption monthly. \n\ncomb_df['year_month'] = comb_df['Date'].dt.to_period('M')\ncomb_df['year'] = comb_df['Date'].dt.to_period('Y')\ncomb_df_month = comb_df.groupby('year_month').sum()\ncomb_df_month = comb_df_month.reset_index()\n\nkwh_usage_monthly = comb_df.groupby('year_month').sum()['kWh_usage'].values\nyear_month = comb_df_month['year_month'].values\n\n\nmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec']\npower_2017 = list(comb_df_month[(comb_df_month['year_month'] >= '2017') & (comb_df_month['year_month'] < '2018')]['kWh_usage'].values)\npower_2018 = list(comb_df_month[(comb_df_month['year_month'] >= '2018') & (comb_df_month['year_month'] < '2019')]['kWh_usage'].values)\npower_2019 = list(comb_df_month[(comb_df_month['year_month'] >= '2019') & (comb_df_month['year_month'] < '2020')]['kWh_usage'].values)\n","ebd5805c":"trace = go.Bar(x = months, \n              y  = power_2017,\n              name = '2017'            \n              )\ntrace1 = go.Bar(x = months, \n              y  = power_2018,\n              name = '2018'            \n              )\ntrace2 = go.Bar(x = months, \n              y  = power_2019,\n              name = '2019'            \n              )\ndata = [trace, trace1, trace2]\nlayout = {'title': 'Power usage per month for 3 years', \n         'xaxis':{'title': \"Months\"}, \n         'yaxis': {'title': 'kWh'}, \n         'barmode': 'group'}\nfig = go.Figure(data=data, layout = layout)\niplot(fig)\n","dbf3ae2b":"trace = go.Bar(x = months, \n              y  = power_2017,\n              name = '2017'            \n              )\ntrace1 = go.Bar(x = months, \n              y  = power_2018,\n              name = '2018'            \n              )\ntrace2 = go.Bar(x = months, \n              y  = power_2019,\n              name = '2019'            \n              )\ndata = [trace, trace1, trace2]\nlayout = {'title': 'Power usage per month for 3 years', \n         'xaxis':{'title': \"Months\"}, \n         'yaxis': {'title': 'kWh'}, \n         'barmode': 'stack'}\nfig = go.Figure(data=data, layout = layout)\niplot(fig)","aca3d438":"comb_df['notes'] = notes_col\ncorr_df = comb_df[['Temp_max', 'Temp_min', 'Dew_max','Dew_min', 'kWh_usage', 'notes']]\n\npower_split = df_usage['Value (kWh)'].values\n\ndata_new = power_split\nsplit_data_power = (list([data_new[x:x+24] for x in range(0, len(data_new), 24)]))\n#print(len(split_data_power)) \n\n#comb_df['power_array'] = pd.Series(split_data).to_frame()\ncomb_df['power_array_nsaled'] = pd.Series(split_data_power).to_frame()","60ddbf1c":"url = 'https:\/\/www.iimafix.com\/images\/electrical-sub-meter-installation-blog\/benefits-of-sub-metering.png'\n\nImage(url= url, width=600, height=600, unconfined=True)","6040de93":"y1_weekday = comb_df['power_array_nsaled'][0]\ny2_weekend = comb_df['power_array_nsaled'][2]\ny3_covid = comb_df['power_array_nsaled'][1493]\ny4_vacation = comb_df['power_array_nsaled'][48]\n\ntime = ['00 HR', '1 HR', '2 HR', '3 HR', '4 HR', '5 HR', '6 HR', \n          '7 HR', '8 HR', '9 HR', '10 HR', '11 HR', '12 HR','13 HR',\n          '14 HR', '15 HR', '16 HR', '17 HR', '18 HR', '19 HR', '20 HR',\n         '21 HR', '22 HR', '23 HR']\n\n\nweekday = go.Scatter(x = time, \n                  y = y1_weekday, \n                  #fill = 'tozerox',\n                  #fillcolor = 'darkblue',\n                  mode = 'lines', \n                  name = 'weekday')\n# weekend = go.Scatter(x = time, \n#                   y = y2_weekend, \n#                   #fill = 'tozerox',\n#                   #fillcolor = 'darkblue',\n#                   mode = 'lines', \n#                   name = 'weekend')\n# covid = go.Scatter(x = time, \n#                   y = y3_covid, \n#                   #fill = 'tozerox',\n#                   #fillcolor = 'darkblue',\n#                   mode = 'lines', \n#                   name = 'covid')\nvacation = go.Scatter(x = time, \n                  y = y4_vacation, \n                  #fill = 'tozerox',\n                  #fillcolor = 'darkblue',\n                  mode = 'lines', \n                  name = 'vacation')\nlayout = {'title': 'Power usage per day', \n         'xaxis':{'title': \"Hours\"}, \n         'yaxis': {'title': 'kW-h'}, \n         }\ndata = [weekday,vacation]\nfig = go.Figure(data=data, layout = layout)\niplot(fig)\n","afdff9f1":"\n# Create traces\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=x_2017, y=y2_2017,\n                    mode='lines',\n                    name='Temp Max'))\nfig.add_trace(go.Scatter(x=x_2017, y=y3_2017,\n                    mode='lines+markers',\n                    name='Temp Min'))\n\nfig.add_trace(go.Scatter(x=x_2017, y=y6_2017,\n                    mode='markers', name='Precipitation'))\n\n\n# fig.add_trace(go.Scatter(x=x_2017, y=y4_2017,\n#                     mode='markers', name='markers'))\n\n\nfig.show()","7e5ec610":"g = sns.PairGrid(corr_df, hue=\"notes\")\ng.map_diag(plt.hist)\ng.map_offdiag(plt.scatter)\ng.add_legend();","9875c379":"sns.heatmap(corr_df.corr(), annot= True )","64b7f4cb":"image source www.iimafix.com, Originally from 'Energy market Authority'","1743a445":"# Temperature distribution throughtout the year!","9b003d6a":"(Clues:- Weekday, weekend, vacation or COVID lockdown period)","45c3fb42":"# Conclusions","293190cc":"# Group data by date","1623eb33":"## When do you consume most power? ","994fb874":"# Is power consumption year over year same?","24f0f927":"# Peak hours for power consumption?","406cfa3f":"\nimage source www.energuide.be","8fad6cbf":"# Is your house efficient?","5d91d873":"During vacation peroid the power consumption is least. The AC power settings were changed to 84F during summer and vacation \nperiod. The weekday, weekend and COVID lockdown power consumption is almost same!","e70f557a":"Power consumption peak hours is between 16hrs to 24hr, it winds down to normal usage during day time. The spike is seen due \nusage of AC, lights and TV's. \nLow usage is seen during day time between 5 Hrs to 16 hrs. \nDuring vacation period, the AC settings are changed to 84F and hence you see less power consumption. ","81bde6ad":"Dew point tempearture and relative humidity are proportional to tempreature, they are colinear. ","db7d29b3":"1. Summer months starts from May to Oct. Power consumption is higher in comparision to remaining months. \n2. Power consumption during vacation period is lowest. There is no clear evidence of variation of power consumption during weekend, weekdays or COVID lockdown days. \n3. Only Temp max, min and Dew point Max & Min have correlation with power usage. ","92e1e1aa":"Image source from:- www.fleetcarma.com","16caaf85":"# Date column update","00a1b644":"Analysis Objectives\n1. When do you consume most power? \n2. How much does temperature effect power consumption?\n3. Is power consumption year over year same?\n4. Peak hours for power consumption?\n5. Weather influence on power consumption?","6e640879":"# How much does temperature effect power consumption?","3f0fe603":"Home size:- ~2700sq foot, 4 persons \n\nThumb rule for average home size:- \n* Average kWh each month for a 1,000 square foot home\/apartment is 880 kWh\n* Average kWh each month for a 2,000 square foot home\/apartment is 1325 kWh\n* Average kWh each month for a 3,000 square foot home\/apartment is 1840 kWh\n* Average kWh each month for a 4,000 square foot home\/apartment is 2200 kWh \n\nSource:- \nhttps:\/\/www.powerwizard.com\/kwh-calculator?utm_medium=ppc&utm_source=goog&utm_campaign=dsa&utm_content=%7Badgroup%7D&utm_term=&gclid=Cj0KCQjw-uH6BRDQARIsAI3I-UeVBZdvVKOPGS8PafApPDxFwrSVJJKqIQJsoHBQtPrWRDquBjxp-oEaAtgUEALw_wcB","a7a4fa1d":"# When do you see high power bill?","35ce8de9":"The power consumption increases during months of May to Nov month, during this period temperature is in the over 70F","8c6f88e9":"# Weather influence on power usage?"}}