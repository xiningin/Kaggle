{"cell_type":{"eb9e1499":"code","7152bca2":"code","403a1ff8":"code","0d93d270":"code","f69acb14":"code","5f73444d":"code","e1ed732e":"code","913f88bf":"code","e7350eaf":"code","eb964e4b":"code","08926765":"code","b0d3de54":"code","f0fdafd7":"code","6bc5ace9":"code","340da049":"code","61efe191":"code","0048ea52":"code","a9961738":"code","d1a866c1":"code","c3a677b1":"code","209541d5":"code","ad0a07c3":"code","8b56af0a":"code","9f098ad0":"code","09bb30e9":"code","1e30021e":"code","d3466ba2":"code","b001a387":"code","acad9bef":"code","c6acbedd":"code","f7cd8bd0":"code","4fca888a":"code","9eda6cbc":"code","21184ee3":"code","2ab1a313":"code","98db8427":"code","40942200":"code","f16a83f8":"code","0e9dc6a6":"code","a2228a82":"code","6d6a93a6":"code","fda760eb":"code","f2daaaf5":"code","ffa60892":"code","d5b207cf":"code","382dc794":"code","56e7a7a1":"code","b7651fe0":"code","590fd4ab":"code","f7474128":"code","cf8f5198":"code","01cd5bf1":"code","92602f0a":"code","aacd03fd":"code","19b60d5e":"code","306cbc29":"code","d94e5e93":"code","4a60fdc7":"code","2f5b17b5":"code","acb9afbd":"code","2a324c5b":"code","b47aa4e1":"code","00cefe51":"code","e0b58b88":"code","a093016b":"code","cedaf06f":"code","021a09bc":"code","6cc05126":"code","63553940":"code","3c7be146":"code","fee569e6":"code","d22fd15d":"code","7ccf4e10":"code","2b40963d":"code","e48ac362":"code","71ccf121":"code","aca2cdeb":"code","e8025708":"code","685a1786":"code","4acbe27d":"code","91f259a6":"code","b47b241a":"code","517c57f4":"code","61b425ca":"code","aeb5a0a0":"code","f4ee8ea3":"code","2e3fea25":"code","d1336aae":"code","08f77d98":"code","d5de3900":"code","81248675":"code","a33db96d":"code","88763107":"code","36bebd1e":"code","260d1da7":"code","8100ad5a":"code","2eef4a04":"code","afcef6e6":"code","663943c3":"code","1e44abc8":"code","301f835c":"code","ebc96d7b":"code","af5e6f5d":"code","c62d996e":"code","0d485809":"code","59300127":"code","2ec0c678":"code","a712092f":"code","e766bcef":"code","79e63e7a":"code","1f948b7e":"code","73e20b1d":"code","793742e2":"code","74053b26":"code","6f124475":"code","f40a3664":"code","09178fda":"code","2e43192f":"code","5d55a0c8":"code","a313a7ec":"code","e1be9858":"code","a6772de7":"code","eac17031":"code","b6f7ff90":"code","489a8fbd":"code","d7d78d8a":"code","2f5e5460":"code","240e1671":"code","d934ac2c":"code","9a0929cc":"code","9ed2674a":"code","a705c994":"code","604c8424":"code","9f00f6b3":"code","294c59ff":"code","d2529631":"code","9c533ac6":"code","18e6de52":"code","5d49f29a":"code","f976c5f6":"code","3885bbcd":"code","99dd209c":"code","d1f7ae09":"code","786386bb":"code","885a9b4b":"code","56a15a21":"code","fa52ce58":"code","78de2ec0":"code","72203e15":"code","95cf0a12":"code","dd1f637b":"code","d2eaaafe":"code","90d053c0":"code","cfe50710":"code","8a14cc5c":"code","ae67a414":"code","adfb28f8":"code","c0ffcc29":"code","35c6ae41":"code","75e455b1":"code","cb12f382":"code","353d372e":"code","d80be7b3":"code","c7ce45d0":"code","cadaeae0":"code","e0a3363b":"code","e5a1f70a":"code","22629a6b":"code","513b769a":"code","e19614dd":"code","3b163f25":"markdown","41ab9e3c":"markdown","dabf6174":"markdown","543e3ae7":"markdown","4a84aa06":"markdown","70c225a7":"markdown","7aea5f65":"markdown","39d0ee13":"markdown","f8ce715a":"markdown","d9269dce":"markdown","5653a80a":"markdown","eaed8209":"markdown","7aacffd9":"markdown","0afd02c3":"markdown","9b7ce839":"markdown","9bbfa3da":"markdown","90df8030":"markdown","0b8059e9":"markdown","b92602cf":"markdown","9ca4583b":"markdown","57c34160":"markdown","e9dc35eb":"markdown","828a7276":"markdown","4bda883d":"markdown","44d7be70":"markdown","5a42d103":"markdown","df871ade":"markdown","ec98f05e":"markdown","55edf7e8":"markdown","f7880294":"markdown","6f9db8a5":"markdown","456b1bba":"markdown","210798e2":"markdown","8c35dd49":"markdown","f2320f97":"markdown","feccab8b":"markdown","a9fe2d04":"markdown","7a166ab8":"markdown","31e0866a":"markdown","a639de17":"markdown","1ad557fa":"markdown","0f8260d0":"markdown","9e63cad5":"markdown","e5adf2ac":"markdown","6a50fdfc":"markdown","e744690d":"markdown","31f55c38":"markdown"},"source":{"eb9e1499":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n# IMPORTING LIBRARIES\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport itertools\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom wordcloud import WordCloud,STOPWORDS\nimport io\nimport base64\nfrom matplotlib import rc,animation\nimport plotly.offline as py\npy.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.tools as tls\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7152bca2":"data1=pd.read_csv(\"\/kaggle\/input\/home-credit-default-risk\/application_train.csv\")\ndf_train=data1.copy()\ndf_train.tail()","403a1ff8":"data2=pd.read_csv(\"\/kaggle\/input\/home-credit-default-risk\/application_test.csv\")\ndf_test=data2.copy()\ndf_test.tail()","0d93d270":"len(df_test.columns)","f69acb14":"len(df_train.columns)","5f73444d":"df_train['data_type'] = 'train'\ndf_test['data_type'] = 'test'\ndf = pd.concat([df_train,df_test])","e1ed732e":"df.tail()","913f88bf":"df[\"TARGET\"].value_counts()","e7350eaf":"df[\"TARGET\"].isnull().sum()  #test datasinin Nan degerleri","eb964e4b":"df_train['TARGET'].astype(int).plot.hist();","08926765":"def missing_data(data):\n    total = data.isnull().sum().sort_values(ascending = False)\n    percent = (data.isnull().sum()\/data.isnull().count()*100).sort_values(ascending = False)\n    return pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])","b0d3de54":"missing_data(df_train).head(20)","f0fdafd7":"missing_data(df_test).head(20)","6bc5ace9":"fig = plt.figure(figsize=(18,6))\nmiss_train = pd.DataFrame((df_train.isnull().sum())*100\/df_train.shape[0]).reset_index()\nmiss_test = pd.DataFrame((df_test.isnull().sum())*100\/df_test.shape[0]).reset_index()\nmiss_train[\"type\"] = \"train\"\nmiss_test[\"type\"]  =  \"test\"\nmissing = pd.concat([miss_train,miss_test],axis=0)\nax = sns.pointplot(\"index\",0,data=missing,hue=\"type\")\nplt.xticks(rotation =90,fontsize =7)\nplt.title(\"Percentage of Missing values in application train and test data\")\nplt.ylabel(\"PERCENTAGE\")\nplt.xlabel(\"COLUMNS\")\nax.set_facecolor(\"k\")\nfig.set_facecolor(\"lightgrey\")","340da049":"import seaborn as sns\nsns.heatmap(df.isnull(), cbar = False);","61efe191":"import missingno as msno\nmsno.matrix(df.sample(500), inline=True, sparkline=True, figsize=(20,10), sort=None, color=(0.25, 0.45, 0.6))","0048ea52":"msno.matrix(df.iloc[0:100, 40:94], inline=True, sparkline=True, figsize=(20,10), sort='ascending', fontsize=12, labels=True, color=(0.25, 0.45, 0.6))","a9961738":"#We can see amount of missing values in bar grafic\nimport missingno as msno\nmsno.bar(df);","d1a866c1":"msno.heatmap(df); ","c3a677b1":"#We can see relation between missing values in dendrogram\nmsno.dendrogram(df)\nplt.show()","209541d5":"df.dtypes.value_counts()","ad0a07c3":"# Number of unique classes in each object column \n#WE USE LEBEL ENCODER FOR 2 VALUES AND ONE-HOT FOR MORE THAN 2.We will use it later\ndf.select_dtypes('object').apply(pd.Series.nunique, axis = 0)","8b56af0a":"cor = df.corr()['TARGET'].sort_values()\nprint('Most Positive Correlations:\\n', cor.tail(15))\nprint('\\nMost Negative Correlations:\\n', cor.head(15))","9f098ad0":"df.columns.values","09bb30e9":"df.describe().T","1e30021e":"df.head()","d3466ba2":"df['PHONE'] = df[['FLAG_MOBIL','FLAG_CONT_MOBILE','FLAG_PHONE','FLAG_EMAIL']].sum(axis = 1)","b001a387":"df.drop(df[['FLAG_MOBIL','FLAG_CONT_MOBILE','FLAG_PHONE','FLAG_EMAIL']],axis=1,inplace=True)","acad9bef":"df['WRONG_ADRESS'] = df[['REG_REGION_NOT_LIVE_REGION','REG_REGION_NOT_WORK_REGION','LIVE_REGION_NOT_WORK_REGION','REG_CITY_NOT_LIVE_CITY','REG_CITY_NOT_WORK_CITY','LIVE_CITY_NOT_WORK_CITY']].sum(axis = 1)","c6acbedd":"df.drop(df[['REG_REGION_NOT_LIVE_REGION','REG_REGION_NOT_WORK_REGION','LIVE_REGION_NOT_WORK_REGION','REG_CITY_NOT_LIVE_CITY','REG_CITY_NOT_WORK_CITY','LIVE_CITY_NOT_WORK_CITY']],axis=1,inplace=True)","f7cd8bd0":"df['WRONG_ADRESS'].corr(df['TARGET'])","4fca888a":"print(df['FLAG_DOCUMENT_2'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_3'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_4'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_5'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_6'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_7'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_8'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_8'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_9'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_10'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_11'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_12'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_13'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_14'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_15'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_16'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_17'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_18'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_19'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_20'].corr(df['TARGET']))\nprint(df['FLAG_DOCUMENT_21'].corr(df['TARGET']))","9eda6cbc":"df['DOCUMENT_SUM_1'] = (df.loc[:,'FLAG_DOCUMENT_4':'FLAG_DOCUMENT_19'].sum(axis = 1))\/(16)\ndf['DOCUMENT_SUM_1'].corr(df['TARGET'])","21184ee3":"df['DOCUMENT_SUM_2'] = (df[['FLAG_DOCUMENT_2','FLAG_DOCUMENT_3','FLAG_DOCUMENT_20','FLAG_DOCUMENT_21']].sum(axis = 1))\/(4)\ndf['DOCUMENT_SUM_2'].corr(df['TARGET'])","2ab1a313":"df.drop(df.loc[:,'FLAG_DOCUMENT_2':'FLAG_DOCUMENT_21'],axis=1,inplace=True)","98db8427":"df.columns","40942200":"df['DOCUMENT_SUM_1'].sample(20)","f16a83f8":"df_train.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE']","0e9dc6a6":"crr=df_train.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].corr() ","a2228a82":"df_train.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].corr()","6d6a93a6":"# Heatmap of correlations\nplt.figure(figsize = (28, 26))\nsns.heatmap(crr, cmap = plt.cm.RdYlBu_r, vmin = -0.25,fmt='.0g', annot = True, vmax = 0.6)\nplt.title('Correlation Heatmap');","fda760eb":"#print(df_train['EMERGENCYSTATE_MODE'].corr(df['TARGET'])#kate\n#print(df_train['WALLSMATERIAL_MODE'].corr(df['TARGET']))#kate          \nprint(df_train['TOTALAREA_MODE'].corr(df['TARGET']))\n#print(df_train['HOUSETYPE_MODE'].corr(df['TARGET']))#kategorik          \n#print(df_train['FONDKAPREMONT_MODE'].corr(df['TARGET']))#kategorik\nprint(\"------------------------------------------------------------------\")\nprint(\"1\",df_train['NONLIVINGAREA_MEDI'].corr(df['TARGET']))          \nprint(\"2\",df_train['NONLIVINGAPARTMENTS_MEDI'].corr(df['TARGET']))\nprint(\"3\",df_train['LIVINGAREA_MEDI'].corr(df['TARGET']))\nprint(\"4\",df_train['LIVINGAPARTMENTS_MEDI'].corr(df['TARGET']))\nprint(\"5\",df_train['LANDAREA_MEDI'].corr(df['TARGET']))\nprint(\"6\",df_train['FLOORSMIN_MEDI'].corr(df['TARGET']))\nprint(\"7\",df_train['FLOORSMAX_MEDI'].corr(df['TARGET']))\nprint(\"8\",df_train['ENTRANCES_MEDI'].corr(df['TARGET']))\nprint(\"9\",df_train['ELEVATORS_MEDI'].corr(df['TARGET']))\nprint(\"10\",df_train['COMMONAREA_MEDI'].corr(df['TARGET']))\nprint(\"11\",df_train['YEARS_BUILD_MEDI'].corr(df['TARGET']))\nprint(\"12\",df_train['YEARS_BEGINEXPLUATATION_MEDI'].corr(df['TARGET']))\nprint(\"13\",df_train['BASEMENTAREA_MEDI'].corr(df['TARGET']))\nprint(\"14\",df_train['APARTMENTS_MEDI'].corr(df['TARGET']))\nprint(\"---------------------------------------------------------\")\nprint(\"1\",df_train['NONLIVINGAREA_MODE'].corr(df['TARGET']))\nprint(\"2\",df_train['NONLIVINGAPARTMENTS_MODE'].corr(df['TARGET']))\nprint(\"3\",df_train['LIVINGAREA_MODE'].corr(df['TARGET']))\nprint(\"4\",df_train['LIVINGAPARTMENTS_MODE'].corr(df['TARGET']))\nprint(\"5\",df_train['LANDAREA_MODE'].corr(df['TARGET']))\nprint(\"6\",df_train['FLOORSMIN_MODE'].corr(df['TARGET']))\nprint(\"7\",df_train['FLOORSMAX_MODE'].corr(df['TARGET']))\nprint(\"8\",df_train['ENTRANCES_MODE'].corr(df['TARGET']))\nprint(\"9\",df_train['ELEVATORS_MODE'].corr(df['TARGET']))\nprint(\"10\",df_train['COMMONAREA_MODE'].corr(df['TARGET']))\nprint(\"11\",df_train['YEARS_BUILD_MODE'].corr(df['TARGET']))\nprint(\"12\",df_train['YEARS_BEGINEXPLUATATION_MODE'].corr(df['TARGET']))\nprint(\"13\",df_train['BASEMENTAREA_MODE'].corr(df['TARGET']))\nprint(\"14\",df_train['APARTMENTS_MODE'].corr(df['TARGET']))\nprint(\"-------------------------------------------------------------------\")\nprint(\"1\",df_train['NONLIVINGAREA_AVG'].corr(df['TARGET']))\nprint(\"2\",df_train['NONLIVINGAPARTMENTS_AVG'].corr(df['TARGET']))\nprint(\"3\",df_train['LIVINGAREA_AVG'].corr(df['TARGET']))\nprint(\"4\",df_train['LIVINGAPARTMENTS_AVG'].corr(df['TARGET']))\nprint(\"5\",df_train['LANDAREA_AVG'].corr(df['TARGET']))\nprint(\"6\",df_train['FLOORSMIN_AVG'].corr(df['TARGET']))\nprint(\"7\",df_train['FLOORSMAX_AVG'].corr(df['TARGET']))\nprint(\"8\",df_train['ENTRANCES_AVG'].corr(df['TARGET']))\nprint(\"9\",df_train['ELEVATORS_AVG'].corr(df['TARGET']))\nprint(\"10\",df_train['COMMONAREA_AVG'].corr(df['TARGET']))\nprint(\"11\",df_train['YEARS_BUILD_AVG'].corr(df['TARGET']))\nprint(\"12\",df_train['YEARS_BEGINEXPLUATATION_AVG'].corr(df['TARGET']))\nprint(\"13\",df_train['BASEMENTAREA_AVG'].corr(df['TARGET']))\nprint(\"14\",df_train['APARTMENTS_AVG'].corr(df['TARGET']))\n","f2daaaf5":"df.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].dtypes.value_counts()","ffa60892":"df.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].columns  # columns number 45 to 91","d5b207cf":"df.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].sample(10)","382dc794":"#1\ndf[\"EMERGENCYSTATE_MODE\"].unique()","56e7a7a1":"df[\"EMERGENCYSTATE_MODE\"].value_counts()","b7651fe0":"df[\"EMERGENCYSTATE_MODE\"].isnull().sum()  #bu nan value ler unknown yapilabilir mi?\/","590fd4ab":"#2\ndf[\"WALLSMATERIAL_MODE\"].unique()   \n#nan lar mod medyan mantiksiz cok nan value var,one-hot yapildiktan sonra makine ile doldurulabilir","f7474128":"df[\"WALLSMATERIAL_MODE\"].value_counts()","cf8f5198":"df[\"WALLSMATERIAL_MODE\"].isnull().sum()","01cd5bf1":"#3\ndf[\"FONDKAPREMONT_MODE\"].unique()","92602f0a":"df[\"FONDKAPREMONT_MODE\"].value_counts()  #nan value cok.One-hot dan sonra makine ile doldurmak mantikli.","aacd03fd":"df[\"FONDKAPREMONT_MODE\"].isnull().sum()","19b60d5e":"#4\ndf[\"HOUSETYPE_MODE\"].unique()","306cbc29":"df[\"HOUSETYPE_MODE\"].value_counts()#mod ile doldurulabilir veya makine ile","d94e5e93":"df[\"HOUSETYPE_MODE\"].isnull().sum()","4a60fdc7":"df.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].dtypes.value_counts()","2f5b17b5":"df.loc[:,'APARTMENTS_AVG':'EMERGENCYSTATE_MODE'].dtypes","acb9afbd":"df['TARGET'].corr(df.loc[:,'APARTMENTS_AVG':'NONLIVINGAREA_MEDI'].sum(axis = 1))","2a324c5b":"for col in df.loc[:,'APARTMENTS_AVG':'NONLIVINGAREA_MEDI'].columns:\n    df[col] = df[col].fillna(df[col].median())","b47aa4e1":"df['TARGET'].corr((df.loc[:,'APARTMENTS_AVG':'NONLIVINGAREA_MEDI'].sum(axis = 1))*(3-df['REGION_RATING_CLIENT_W_CITY']))","00cefe51":"# BUILDING_FEATURES de\u011fi\u015fkeni veriye ekleniyor\ndf['BUILDING_FEATURES'] = (df.loc[:,'APARTMENTS_AVG':'NONLIVINGAREA_AVG'].sum(axis = 1))*(3-df['REGION_RATING_CLIENT_W_CITY'])","e0b58b88":"df.drop(df.loc[:,'APARTMENTS_AVG':'NONLIVINGAREA_MEDI'],axis=1,inplace=True)","a093016b":"list(df.columns)","cedaf06f":"df['CODE_GENDER'].value_counts()","021a09bc":"#df.drop(df[df['CODE_GENDER']=='XNA'].index, inplace=True)","6cc05126":"df['CODE_GENDER'].replace('XNA', 'F',inplace=True)  ","63553940":"df['CODE_GENDER'].value_counts()","3c7be146":"df['DAYS_BIRTH'].sample(20)","fee569e6":"df['DAYS_BIRTH']=df['DAYS_BIRTH']\/ -365","d22fd15d":"df['DAYS_BIRTH'].sample(20)","7ccf4e10":"df.head()","2b40963d":"df.iloc[:,37:].head()","e48ac362":"display(df['FLAG_OWN_CAR'].value_counts())\ndisplay(df['FLAG_OWN_REALTY'].value_counts())\ndisplay(df['NAME_TYPE_SUITE'].value_counts())\ndisplay(df['NAME_INCOME_TYPE'].value_counts())\ndisplay(df['NAME_EDUCATION_TYPE'].value_counts())\ndisplay(df['NAME_FAMILY_STATUS'].value_counts())\ndisplay(df['NAME_HOUSING_TYPE'].value_counts())\ndisplay(df['OCCUPATION_TYPE'].value_counts())\ndisplay(df['WEEKDAY_APPR_PROCESS_START'].value_counts())\ndisplay(df['ORGANIZATION_TYPE'].value_counts())\ndisplay(df['FONDKAPREMONT_MODE'].value_counts())\ndisplay(df['HOUSETYPE_MODE'].value_counts())\ndisplay(df['WALLSMATERIAL_MODE'].value_counts())\ndisplay(df['EMERGENCYSTATE_MODE'].value_counts())\n","71ccf121":"df['DAYS_EMPLOYED'].value_counts()","aca2cdeb":"df['DAYS_EMPLOYED'].describe()","e8025708":"df['DAYS_EMPLOYED'].replace({365243: np.nan}, inplace = True)","685a1786":"df['DAYS_EMPLOYED'].isnull().sum()","4acbe27d":"# Heatmap of correlations\nplt.figure(figsize = (28, 26))\nsns.heatmap(df.corr(), cmap = plt.cm.RdYlBu_r, vmin = -0.25,fmt='.0g', annot = True, vmax = 0.6)\nplt.title('Correlation Heatmap');","91f259a6":"df.loc[:,'AMT_REQ_CREDIT_BUREAU_HOUR':'AMT_REQ_CREDIT_BUREAU_YEAR'].sample(15)","b47b241a":"df.loc[:,'AMT_REQ_CREDIT_BUREAU_HOUR':'AMT_REQ_CREDIT_BUREAU_YEAR'].isnull().sum()","517c57f4":"df['AMT_REQ_CREDIT_BUREAU_YEAR'].value_counts()","61b425ca":"df['AMT_REQ_CREDIT_BUREAU_QRT'].value_counts()","aeb5a0a0":"df['AMT_REQ_CREDIT_BUREAU_MON'].value_counts()","f4ee8ea3":"df['AMT_REQ_CREDIT_BUREAU_WEEK'].value_counts()","2e3fea25":"df['AMT_REQ_CREDIT_BUREAU_DAY'].value_counts()","d1336aae":"df['AMT_REQ_CREDIT_BUREAU_HOUR'].value_counts()","08f77d98":"list(df.columns)","d5de3900":"msno.bar(df);","81248675":"df.info()","a33db96d":"df.isnull().sum()","88763107":"msno.matrix(df.sample(200));","36bebd1e":"msno.matrix(df);","260d1da7":"msno.heatmap(df);","8100ad5a":"df['OWN_CAR_AGE'].isnull().sum()","2eef4a04":"#df['OWN_CAR_AGE'].value_counts()","afcef6e6":"df['FLAG_OWN_CAR'].value_counts()","663943c3":"df['OWN_CAR_AGE'].corr(df['TARGET'])","1e44abc8":"df[df['OWN_CAR_AGE']==0.0].sample(5)","301f835c":"df[['OWN_CAR_AGE','FLAG_OWN_CAR','TARGET']].sample(20)","ebc96d7b":"df[['OCCUPATION_TYPE','NAME_INCOME_TYPE','TARGET']].sample(20)","af5e6f5d":"amt = df[[ 'AMT_INCOME_TOTAL','AMT_CREDIT',\n                         'AMT_ANNUITY', 'AMT_GOODS_PRICE',\"TARGET\"]]\namt = amt[(amt[\"AMT_GOODS_PRICE\"].notnull()) & (amt[\"AMT_ANNUITY\"].notnull())]\nsns.pairplot(amt,hue=\"TARGET\",palette=[\"b\",\"r\"])\nplt.show()","c62d996e":"df.isnull().sum()","0d485809":"df_cat = df.select_dtypes(include = [object])\ndel df_cat['data_type']","59300127":"df_cat.select_dtypes(include = [object]).apply(pd.Series.nunique, axis = 0)","2ec0c678":"for col in list(df_cat.columns):\n    df_cat[col].fillna(method = \"ffill\")","a712092f":"df_cat.isnull().sum()","e766bcef":"print('df_cat shape:',df_cat.shape)","79e63e7a":"from sklearn.preprocessing import LabelEncoder\n\n# Create a label encoder object\nle = LabelEncoder()\nle_count = 0\n\n# Iterate through the columns\nfor col in df_cat:\n    if df_cat[col].dtype == 'object':\n        # If 2 or fewer unique categories\n        if len(list(df_cat[col].unique())) <= 2:\n            # Train on the training data\n            le.fit(df_cat[col])\n            # Transform both training and testing data\n            df_cat[col] = le.transform(df_cat[col])\n                        \n            # Keep track of how many columns were label encoded\n            le_count += 1\n            \nprint('%d columns were label encoded.' % le_count)","1f948b7e":"df_cat.head()","73e20b1d":"df_cat = pd.get_dummies(df_cat)","793742e2":"print('df_cat shape:',df_cat.shape)","74053b26":"df_cat.head()","6f124475":"df_num = df.select_dtypes(include = ['float64','int64'])\ndf_num.drop(['SK_ID_CURR','TARGET'],axis=1,inplace=True)","f40a3664":"IQR = df_num.describe().T\nIQR['lower'] = IQR['25%']-1.5*(IQR['75%']-IQR['25%'])\nIQR['upper'] = IQR['75%']+1.5*(IQR['75%']-IQR['25%'])\nIQR.T","09178fda":"IQR.T.iloc[:,9:]","2e43192f":"IQR.T.iloc[:,18:]","5d55a0c8":"IQR.T.iloc[:,27:]","a313a7ec":"len(df[df['OBS_30_CNT_SOCIAL_CIRCLE']>5.000000])","e1be9858":"len(df[df['TOTALAREA_MODE']>0.259500])","a6772de7":"len(df[df['OWN_CAR_AGE']>30.000000])","eac17031":"len(df[df['AMT_GOODS_PRICE']>1.336500e+06])  ####################There are many outlier ","b6f7ff90":"len(df[df['AMT_CREDIT']> 1.588894e+06])      ","489a8fbd":"len(df[df['AMT_ANNUITY']>62304.750000])","d7d78d8a":"df.loc[df['AMT_GOODS_PRICE'] > 1.336500e+06,'AMT_GOODS_PRICE']=np.nan","2f5e5460":"df['AMT_GOODS_PRICE'].isnull().sum()","240e1671":"df_num = df.select_dtypes(include = ['float64','int64'])\ndf_num.drop(['SK_ID_CURR','TARGET'],axis=1,inplace=True)","d934ac2c":"df_num.isnull().sum()","9a0929cc":"!pip install ycimpute","9ed2674a":"from ycimpute.imputer import EM","a705c994":"var_names = list(df_num) ","604c8424":"var_names","9f00f6b3":"np_df_num =np.array(df_num)","294c59ff":"dff = EM().complete(np_df_num)","d2529631":"dff = pd.DataFrame(dff, columns = var_names)","9c533ac6":"dff.isnull().sum()","18e6de52":"dff.sample(10)","5d49f29a":"dff_corr = dff.corr()\nplt.figure(figsize = (28, 26))\n\n# Heatmap of correlations\nsns.heatmap(dff_corr, cmap = plt.cm.RdYlBu_r, vmin = -0.25,fmt='.0g', annot = True, vmax = 0.6)\nplt.title('Correlation Heatmap')","f976c5f6":"from sklearn.neighbors import LocalOutlierFactor","3885bbcd":"# n_neighbors = 10 kom\u015fuluk say\u0131s\u0131, contamination = 0.1 saydaml\u0131k\nclf = LocalOutlierFactor(n_neighbors = 10, contamination = 0.1)","99dd209c":"clf.fit_predict(dff)","d1f7ae09":"# negatif skorlar \ndff_scores = clf.negative_outlier_factor_","786386bb":"np.sort(dff_scores)[0:1000]","885a9b4b":"esik_deger = np.sort(dff_scores)[7]\nesik_deger","56a15a21":"len(dff[dff_scores<esik_deger])","fa52ce58":"dff[dff_scores==esik_deger]","78de2ec0":"# e\u015fik skora sahip g\u00f6zlem bask\u0131lama verisi olarak belirleniyor\nbask\u0131lama_deg = dff[dff_scores==esik_deger]","72203e15":"# esik skordan daha k\u00fc\u00e7\u00fck skora sahip g\u00f6zlemler i\u00e7in True-False \u015feklinde ARRAY olu\u015fturulyor\noutlier_array = dff_scores<esik_deger\noutlier_array","95cf0a12":"# outlier_array'\u0131n d\u00f6nd\u00fcrd\u00fc\u011f\u00fc True-False de\u011ferler ile filtreleme yap\u0131larak Outlier g\u00f6zlemler ile DATAFRAME olu\u015fturuluyor\noutlier_df = dff[outlier_array]\nlen(outlier_df)","dd1f637b":"outlier_df ","d2eaaafe":"# outlier_df indexlerinden ar\u0131nd\u0131r\u0131larak ARRAY'a d\u00f6n\u00fc\u015ft\u00fcr\u00fcl\u00fcyor.\noutlier_df.to_records(index=False)","90d053c0":"# Bu array res olarak tutuluyor.\nres = outlier_df.to_records(index=False)","cfe50710":"# res'deki t\u00fcm veriler yerine bask\u0131lama dergerleri atan\u0131yor\nres[:] = bask\u0131lama_deg.to_records(index=False)","8a14cc5c":"res","ae67a414":"dff[outlier_array]","adfb28f8":"# Bir array olan res ayk\u0131r\u0131 g\u00f6zlemlerin indexleri kullan\u0131larak DATAFRAME d\u00f6n\u00fc\u015ft\u00fcr\u00fcl\u00fcyor ve dff deki ayk\u0131r\u0131 g\u00f6zlemlerin yerine atanyor\ndff[outlier_array] = pd.DataFrame(res, index = dff[outlier_array].index)","c0ffcc29":"dff[outlier_array]","35c6ae41":"df_app = df[['data_type','SK_ID_CURR','TARGET']]","75e455b1":"print(df_app.shape,dff.shape,df_cat.shape)","cb12f382":"list(dff.columns)","353d372e":"list(df_cat.columns)","d80be7b3":"display(dff.sample(10))\ndisplay(df_cat.sample(10))\ndisplay(df.head())","c7ce45d0":"dff.insert(0,'data_type',df['data_type'].values)#1.kolona ekledik\ndff.insert(1,'SK_ID_CURR',df['SK_ID_CURR'].values)  #2.kolona ekledik\ndff.insert(2,'TARGET',df['TARGET'].values)      #3.kolona ekledik\ndf_cat.insert(0,'SK_ID_CURR',df['SK_ID_CURR'].values)   #kategorik dataya id ekledik merge yapmak icin","cadaeae0":"df_cat.head()","e0a3363b":"df1 = pd.merge( dff, df_cat, on='SK_ID_CURR')  #kategorik ve numerik ler birlestirildi","e5a1f70a":"df1.head()","22629a6b":"df1.isnull().sum()","513b769a":"df1.to_csv (r'C:\\Users\\Dell\\Desktop\\proje\\traintest.csv', index = False, header=True)\n\ndf1.head()","e19614dd":"#df1.to_csv(r'C:\\Users\\Dell\\Desktop\\proje\\traintest.csv', index = False)","3b163f25":"* Document 2,3,20,21 is positive correlation and others are negative correlations.\n* Thus we decided to create 2 different columns DOCUMENT_SUM_1 for negatif correletion and DOCUMENT_SUM_2 for positive correlation. ","41ab9e3c":"* There are total 307,511 rows which contains the information of loans and there are 122 variables.\n\n* The target variable defines if the client had payment difficulties meaning he\/she had late payment more than X days on at least one of the first Y installments of the loan. Such case is marked as 1 while other all other cases as 0.","dabf6174":"### 1 ) lets combine 4 features(23,24,25,26) \n'FLAG_MOBIL', 'FLAG_CONT_MOBILE', 'FLAG_PHONE', 'FLAG_EMAIL'","543e3ae7":"## Percentage of Missing values in application train and test data","4a84aa06":"### 5 ) INFORMATION FEATURES ABOUT BUILDING WHERE THE CLIENT LIVES(45,46,...91)\n* There are numerical and  4 categorical variables.We will examine it separately. ","70c225a7":"## LOOK SUMMARY OUITLIER FROM DESCRIBE STATISTICS","7aea5f65":"* We decided to replace 4 XNA to F. Because F is more than M","39d0ee13":"* 6 feature da ayni anda nan value var muhtemelen soru olmadigini gosteriyor bunlari 0 ile doldurabiliriz...","f8ce715a":"* Correlation 'OBS_30_CNT_SOCIAL_CIRCLE' and 'OBS_60_CNT_SOCIAL_CIRCLE' is strong 100% and same correlation with target\n* 'DEF_30_CNT_SOCIAL_CIRCLE' with 'DEF_60_CNT_SOCIAL_CIRCLE' correlation 90% and target and corelations are the same\n* AMT_ANNUITY, AMT_GOODS_PRICE, AMT_CREDIT correlations are strong\n* REGION_RATING_CLIENT, REGION_RATING_CLIENT_W_CITY correlation strong\n","d9269dce":"### 2 ) lets combine  6 features(35,36,37,38,39,40)\n#### Mismatched information...\nREG_REGION_NOT_LIVE_REGION, REG_REGION_NOT_WORK_REGION,  LIVE_REGION_NOT_WORK_REGION,  REG_CITY_NOT_LIVE_CITY,  REG_CITY_NOT_WORK_CITY, LIVE_CITY_NOT_WORK_CITY\n* We can sum mismatched information and create a new column WRONG_ADRESS ","5653a80a":"* G\u00f6zlemler i\u00e7in uzakl\u0131klar matrisi kullan\u0131larak skorlar elde edilmi\u015ftir.","eaed8209":"* We are looking at some outlier of important variables ","7aacffd9":"## SOME OF ANALYSIS OF MISSINGS VALUES","0afd02c3":"* CONCLUSION : We understand from here that it is filled as Nan, which does not have a car.We can not write a numerical variables for car age.We will predict from machine learning methods.","9b7ce839":"* Uzakl\u0131klar matrisi kullan\u0131larak g\u00f6zlemlenen 7 ayk\u0131r\u0131 g\u00f6zlem bask\u0131lama y\u00f6ntemi ile man\u00fcple edilmi\u015ftir","9bbfa3da":"### 6 ) CODE_GENDER","90df8030":"* we decided to use median for missing values.","0b8059e9":"### 9 ) AMT_REQ_CREDIT_BUREAU_HOUR\/DAY\/WEEK\/MON\/QRT\/YEAR\n* The number of inquiries about the customer one day before the application to the Credit Bureau (except one hour \/ day \/ month \/ 3 months \/ year)\n* They have NaN values at the same time","b92602cf":"### LEBEL ENCODER AND ONE-HOT \n* Making Categorical variables Numeric","9ca4583b":"* The target variable is slightly imbalance with the majority of loans has the target equals to 0 which indicates that individuals did not had any problems in paying installments in given time.","57c34160":"### LETS LOOK AT CORRELATION BETWEEN TARGET AND ALL VARIABLES","e9dc35eb":"* Correlations between target and other features are not strong.","828a7276":"## ANALYSIS OF OTHER CATEGORICALS VARIABLES","4bda883d":"### 5\/a ) LETS LOOK AT CATEGORICAL VARIABLES OF BUILDINGS FEATURES ","44d7be70":"##  READING TRAIN AND TEST DATA","5a42d103":"### 2 ) 'OCCUPATION_TYPE','NAME_INCOME_TYPE' ","df871ade":"* -14.50 e\u015fik de\u011ferinden daha k\u00fc\u00e7\u00fck skora sahip g\u00f6zlemlere bask\u0131lama y\u00f6ntemi uygulanacakt\u0131r.","ec98f05e":"* There are lots of outlier in variable AMT_GOODS_PRICE.Thus we decided to covert nan values.","55edf7e8":"## LETS LOOK AT ALL FEATURES CORRELATIONS","f7880294":"* TARGET value 0 means loan is repayed, value 1 means loan is not repayed.","6f9db8a5":"## Predictive Value Assignment (NaN) Methods\n* Firstly we will look at outlier values then we predict Nan values","456b1bba":"### Lets predict Nan values from machine learning method.","210798e2":"### 5\/b ) LETS LOOK AT NUMERICAL VARIABLES OF BUILDINGS FEATURES","8c35dd49":"### 3 ) 'AMT_INCOME_TOTAL','AMT_CREDIT','AMT_ANNUITY', 'AMT_GOODS_PRICE',\"TARGET\" correlation:","f2320f97":"### 3 ) FLAG DOCUMENTS 2-21","feccab8b":"* If we use variable 'REGION_RATING_CLIENT_W_CITY',correlation increases.\n* We decided to sum all variables and create a new variable 'BUILDING_FEATURES'","a9fe2d04":"* We make 365243 days for about 1000 years, a value that is impossible in reality, and we convert it to Nan value.\n* These data are automatically filled by the system (64648 data), actually NaN data.","7a166ab8":"* When they zoom in on the central pillars, we see that they mostly get information about the building where the customer lives. It appears that there are many applicants who leave the information blank for their residence. We can think of why this might be so or how it could inform our model.\n\n* This time I will sort the data to see the odds better.This time I will sort the data to see the odds better.","31e0866a":"## MANUPULATION OF FEATURES","a639de17":"### WE CONCAT TRAIN AND TEST","1ad557fa":"### 8 ) DAYS_EMPLOYED\n* This variable gives the number of days the loan applicant has worked.","0f8260d0":"# OUTLIER DATA ANALYSIS\n### Confidence Distance Matrix Method","9e63cad5":"### 1 ) OWN_CAR_AGE ,FLAG_OWN_CAR","e5adf2ac":"* CONCLUSION: Missing values of train and test almost same.","6a50fdfc":"### TARGET DISTRIBUTION","e744690d":"## EXPLATORY DATA","31f55c38":"### 7 ) DAYS_BIRTH\n* The age of the customer in days at the time of application. The number of days must be converted to years."}}