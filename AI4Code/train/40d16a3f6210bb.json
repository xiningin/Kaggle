{"cell_type":{"ce872aad":"code","ea91c348":"code","c421ef45":"code","6c2e5211":"code","2eb7e4e4":"code","9923316b":"code","5d80f70f":"code","1ce2ad13":"markdown","a9588b5b":"markdown","071f6c3e":"markdown","19c2e380":"markdown","4cb1040b":"markdown","c828998b":"markdown","1f54fda2":"markdown","c01b2dd6":"markdown","04a3092e":"markdown","c442dccb":"markdown","9375ee87":"markdown","dcab3d6b":"markdown"},"source":{"ce872aad":"import pandas as pd\nimport numpy as np\nfrom mlxtend.frequent_patterns import apriori, association_rules","ea91c348":"df = pd.read_csv('..\/input\/supermarket\/GroceryStoreDataSet.csv', names = ['products'], sep = ',')\ndf.head()","c421ef45":"df.shape","6c2e5211":"data = list(df[\"products\"].apply(lambda x:x.split(\",\") ))\ndata","2eb7e4e4":"#Let's transform the list, with one-hot encoding\nfrom mlxtend.preprocessing import TransactionEncoder\na = TransactionEncoder()\na_data = a.fit(data).transform(data)\ndf = pd.DataFrame(a_data,columns=a.columns_)\ndf = df.replace(False,0)\ndf","9923316b":"#set a threshold value for the support value and calculate the support value.\ndf = apriori(df, min_support = 0.2, use_colnames = True, verbose = 1)\ndf","5d80f70f":"#Let's view our interpretation values using the Associan rule function.\ndf_ar = association_rules(df, metric = \"confidence\", min_threshold = 0.6)\ndf_ar\n","1ce2ad13":"**Import the Libraries and Dataset**\n\nThe first step, as always, is to import the required libraries.    \nIn the script below I import pandas, numpy, and apriori libraries.\n\n","a9588b5b":"# **Apriori Algorithm**\n\nThe Apriori Algorithm, used for the first phase of the Association Rules, is the most popular and classical algorithm in the frequent old parts. These algorithm properties and data are evaluated with Boolean Association Rules. In this algorithm, there are product clusters that pass frequently, and then strong relationships between these products and other products are sought.\n\nThe importance of an Association Rules can be determined by 3 parameters that are used to identify the strength of the algorithm. Namely,\n\n* Support\n* Confidence\n* Lift\n","071f6c3e":"Let's split the products and create a list called by 'data',","19c2e380":"I chose the 60% minimum confidence value.\nIn other words, when product X is purchased, we can say that the purchase of product Y is 60% or more.","4cb1040b":"I have a dataset that I downloaded on https:\/\/www.kaggle.com\/shazadudwadia\/supermarket. Now, I import the dataset with the help of \u2018pandas.read_csv\u2019 and overview how it is structured.  ","c828998b":"Let's examine the shape of the data set,","1f54fda2":"References \n\nhttps:\/\/en.wikipedia.org\/wiki\/Association_rule_learning  \nhttps:\/\/blogs.oracle.com\/datascience\/overview-of-traditional-machine-learning-techniques\nhttps:\/\/stackabuse.com\/association-rule-mining-via-apriori-algorithm-in-python\/  \nhttps:\/\/www.datasciencecentral.com\/profiles\/blogs\/data-mining-association-rules-in-r-diapers-and-beer  \nhttps:\/\/pyshark.com\/market-basket-analysis-using-association-rule-mining-in-python\/  \nhttps:\/\/www.veribilimiokulu.com\/python-ile-birliktelik-kurallari-analizi-association-rules-analysis-with-python\/  \nhttps:\/\/www.mygreatlearning.com\/blog\/apriori-algorithm-explained\/  \nhttps:\/\/machinelearningmastery.com\/how-to-one-hot-encode-sequence-data-in-python\/  \n            \n            ","c01b2dd6":"**Applying Apriori and Resulting**\n\nThe next step is to create the Apriori Model. We can change all the parameters in the Apriori Model in the mlxtend package.   \nI will try to use minimum support parameters for this modeling.    \nFor this, I set a min_support value with a threshold value of 20% and printed them on the screen as well.\n ","04a3092e":"**Apriori Algorithm and One-Hot Encoding**\n \nApriori's algorithm transforms True\/False or 1\/0.  \nUsing TransactionEncoder, we convert the list to a One-Hot Encoded Boolean list.  \nProducts that customers bought or did not buy during shopping will now be represented by values 1 and 0.\n","c442dccb":"Let X and Y represent the products in the market and N represents the total number of products.\n\n\n![image.png](attachment:image.png)\n\n\n**Support**     :  It is the probability of an event to occur.\n\n**Confidence**  :  It is a measure of conditional probability\n\n**Lift**        : It is the probability of all items occurring together divided by the product of antecedent and consequent occurring as if they are independent of each other.\n\n","9375ee87":"![market.JPG](attachment:market.JPG)\n\n# **Association Rules**\n\nAssociation Rules Analysis has become familiar for analysis in the retail industry. It is also called Market Basket Analysis terms. This analysis is also used for advice. Personal recommendations in applications such as Spotify, Netflix, and Youtube can be given as examples. \n[](http:\/\/)\nOne of the biggest examples of Association Rules Analysis is the correlation between beer and diaper. When Walmart, a chain store in the United States, studied the shopping behavior of customers, the study showed that diapers and beers are bought together. Because, as it turns out, fathers are often tasked with shopping while mothers stay with the baby.\n","dcab3d6b":"For example, if we examine our 1st index value;\n* The probability of seeing sugar sales is seen as 30%.\n* Bread intake is seen as 65%.\n* We can say that the support of both of them is measured as 20%.\n* 67% of those who buys sugar, buys bread as well.\n* Users who buy sugar will likely consume 3% more bread than users who don't buy sugar.\n* Their correlation with each other is seen as 1.05.\n \n\nAs a result, if item X and Y are bought together more frequently, then several steps can be taken to increase the profit. For instance:\n \n* \tCross-Selling can be improved by combining products - items\n* \tThe shop layout can be changed so that sales can be improved when certain items are kept together. \n* \tPromotional activities which are an advertising campaign can be carried out to increase the sales of goods that customers do not buy.\n* \tCollective discounts can be offered on these products if the customer buys both of them.\n \n \n \n \n"}}