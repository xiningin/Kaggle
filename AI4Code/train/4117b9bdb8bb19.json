{"cell_type":{"9b4a0c54":"code","d4262a74":"code","9a24fc86":"code","a41faa91":"code","9c7cb950":"code","81ac353f":"code","ab09649a":"code","6f77870f":"code","e455346f":"code","08f46a95":"code","93ac8672":"code","81c7d22a":"code","863f31e2":"code","153dbbfb":"code","40199798":"code","d15ecc08":"code","ece22660":"code","e4f636fb":"code","16c9b475":"code","830e600b":"code","00a2bf68":"code","c969530c":"code","fe034464":"code","dc6d7ddb":"code","c426465f":"code","f13f35a2":"code","b64b07ab":"code","460cff11":"code","4c89ff58":"code","f7362085":"code","4c3b8ffa":"code","deb2b95e":"code","2f933073":"code","0c8a419b":"code","86fca4f3":"code","0162fe0c":"code","6cde75ce":"code","1021b37c":"code","f870d05f":"code","8671510d":"code","0727956e":"code","37d3aba0":"code","69398e8b":"code","1a296c8f":"code","646f41e0":"code","24781420":"code","c23bedc7":"code","8875b935":"code","a9dc7b5c":"code","617b30f3":"code","28686a00":"code","e8422242":"markdown","309daad4":"markdown","d624785b":"markdown","17e0a4d7":"markdown","aad8c323":"markdown","427a4fd7":"markdown","454bd6d0":"markdown","d8df4d82":"markdown","a956c5be":"markdown","a0e3ffaf":"markdown","353063ed":"markdown","82a130af":"markdown","93f13f37":"markdown","3ea8f8e6":"markdown","7050d34e":"markdown","003a479d":"markdown","349b5176":"markdown","5148ecc7":"markdown","709b3a85":"markdown","4f125201":"markdown","acc98138":"markdown","77c57c02":"markdown","afaa7172":"markdown","c47e4309":"markdown","d896bacc":"markdown","e75b38a9":"markdown","f18c60f7":"markdown","cd25c930":"markdown","4889da9b":"markdown","fa8c9ccb":"markdown","31ad8b98":"markdown","d42f06c6":"markdown","56629e8d":"markdown","115ebddb":"markdown","f0255694":"markdown","c216157f":"markdown","a047821f":"markdown","27577e24":"markdown","8442e110":"markdown","d774f806":"markdown","334bb3eb":"markdown","54a359d1":"markdown","4af7ce98":"markdown","d0a72f65":"markdown","4bf0c86f":"markdown","b6ca3564":"markdown","8e6924c1":"markdown","cabec332":"markdown","bc86d9b2":"markdown","d09f6758":"markdown"},"source":{"9b4a0c54":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os\n\nimport plotly.express as px\nimport plotly.graph_objects as go","d4262a74":"path = r'..\/input\/uber-pickups-in-new-york-city'\nfiles = ['uber-raw-data-aug14.csv',\n         'uber-raw-data-apr14.csv',\n         'uber-raw-data-jul14.csv',\n         'uber-raw-data-jun14.csv',\n         'uber-raw-data-may14.csv',\n         'uber-raw-data-sep14.csv']\nfinal = pd.DataFrame()\n\nfor file in files:\n    df = pd.read_csv(path+\"\/\"+file,encoding='utf-8')\n    final = pd.concat([final,df])","9a24fc86":"final.shape","a41faa91":"df = final.copy()\ndf.head(10)","9c7cb950":"df.dtypes","81ac353f":"df['Date\/Time'] = pd.to_datetime(df['Date\/Time'], format='%m\/%d\/%Y %H:%M:%S')\ndf.dtypes","ab09649a":"df['weekday']=df['Date\/Time'].dt.day_name()\ndf['day']=df['Date\/Time'].dt.day\ndf['minute']=df['Date\/Time'].dt.minute\ndf['month']=df['Date\/Time'].dt.month\ndf['hour']=df['Date\/Time'].dt.hour\ndf.head()","6f77870f":"df.dtypes","e455346f":"colors = ['lightslategray',] * 5\ncolors[0] = 'crimson'\n\nfig = go.Figure(data=[go.Bar(\n    x=df['weekday'].value_counts().index,\n    y=df['weekday'].value_counts().values,\n    marker_color=colors # marker color can be a single color value or an iterable\n)])\nfig.update_layout(title_text='Rush Day of Uber Trip')","08f46a95":"colors = ['lightslategray',] * 5\ncolors[0] = 'crimson'\n\nfig = go.Figure(data=[go.Bar(\n    x = df['weekday'].value_counts().index,\n    y = df['weekday'].value_counts(),\n    marker_color=colors # marker color can be a single color value or an iterable\n)])\nfig.update_layout(title_text='High Sales of Uber Trip')\n","93ac8672":"plt.hist(df['hour'])\nplt.ylabel('frequency')\nplt.xlabel('work hour')","81c7d22a":"plt.figure(figsize=(40,20))\nfor i,month in enumerate(df['month'].unique()):\n  plt.subplot(3,2,i+1)\n  df[df['month']==month]['hour'].hist()","863f31e2":"import plotly.graph_objects as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot","153dbbfb":"df.groupby('month')['hour'].count()","40199798":"fig = go.Figure(data=[go.Bar(\n    x = df.groupby('month')['hour'].count().index,\n    y = df.groupby('month')['hour'].count(),\n    #marker_color=colors # marker color can be a single color value or an iterable\n)])\nfig.update_layout(title_text='The Highest Monthly Ride')","d15ecc08":"plt.figure(figsize=(10,8))\nplt.hist(df['day'],bins=30,rwidth=0.8,range=(0.5,30.5))\nplt.xlabel('date of the month')\nplt.ylabel('Total Journeys')\nplt.title('Journeys by Month Day')","ece22660":"plt.figure(figsize=(20,12))\nfor i, month in enumerate(df['month'].unique(),1):\n  plt.subplot(3,2,i)\n  df_out=df[df['month']==month]\n  plt.hist(df_out['day'])\n  plt.xlabel('day in month {}'.format(month))\n  plt.ylabel('total rides')","e4f636fb":"ax=sns.pointplot(x='hour',y='Lat', data=df, hue='weekday')\nax.set_title('hoursoffday vs latitude of passenger')","16c9b475":"base=df.groupby(['Base','month'])['Date\/Time'].count().reset_index()\nbase","830e600b":"plt.figure(figsize=(10,6))\nax = sns.lineplot(x='month',y='Date\/Time', hue='Base',data=base)\nax.set_title('Popular Base Number by Month')","00a2bf68":"#Heatmap by hour and weekday\ndef count_rows(rows):\n  return len(rows)\nby_cross = df.groupby(['weekday','hour']).apply(count_rows)\nby_cross","c969530c":"pivot=by_cross.unstack()\npivot","fe034464":"plt.figure(figsize=(15,8))\nsns.heatmap(pivot)","dc6d7ddb":"#Heatmap by hour and day, month and day, month and weekday\ndef heatmap(col1, col2):\n  by_cross = df.groupby([col1,col2]).apply(count_rows)\n  pivot=by_cross.unstack()\n  plt.figure(figsize=(15,8))\n  return sns.heatmap(pivot)  ","c426465f":"#Heatmap by hour and day\nheatmap('day','hour')","f13f35a2":"#Heatmap by month and day\nheatmap('day','month')","b64b07ab":"#Heatmap by month and weekday\nheatmap('weekday', 'month')","460cff11":"plt.figure(figsize=(12,6))\nplt.plot(df['Lon'],df['Lat'],'r+',ms=0.5)\nplt.xlim(-74.2,-73.7)\nplt.ylim(40.6,41)","4c89ff58":"df_out=df[df['weekday']=='Sunday']\ndf_out","f7362085":"rush=df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()\nrush.columns=['Lat','Lon','no of trips']\nrush","4c3b8ffa":"uber_15=pd.read_csv(r'..\/input\/uber-pickups-in-new-york-city\/uber-raw-data-janjune-15.csv')","deb2b95e":"uber_15.head()","2f933073":"uber_15.dtypes","0c8a419b":"uber_15['Pickup_date']=pd.to_datetime(uber_15['Pickup_date'], format='%Y-%m-%d %H:%M:%S')","86fca4f3":"uber_15.dtypes","0162fe0c":"uber_15['weekday']=uber_15['Pickup_date'].dt.day_name()\nuber_15['day']=uber_15['Pickup_date'].dt.day\nuber_15['minute']=uber_15['Pickup_date'].dt.minute\nuber_15['month']=uber_15['Pickup_date'].dt.month\nuber_15['hour']=uber_15['Pickup_date'].dt.hour","6cde75ce":"uber_15.head()","1021b37c":"px.bar(x=uber_15['month'].value_counts().index,\n       y=uber_15['month'].value_counts())","f870d05f":"plt.figure(figsize=(12,6))\nsns.countplot(uber_15['hour'])\nplt.title(\"Rush in New York City\")","8671510d":"summary=uber_15.groupby(['weekday','hour'])['Pickup_date'].count().reset_index()\nsummary","0727956e":"summary.columns=['weekday','hour','count']\nsummary.head()","37d3aba0":"plt.figure(figsize=(12,8))\nsns.pointplot(x='hour',y='count',hue='weekday',data=summary)","69398e8b":"uber_foil=pd.read_csv(r'..\/input\/uber-pickups-in-new-york-city\/Uber-Jan-Feb-FOIL.csv')","1a296c8f":"uber_foil.head()","646f41e0":"uber_foil.dtypes","24781420":"uber_foil['dispatching_base_number'].unique()","c23bedc7":"plt.figure(figsize=(12,10))\nsns.boxplot(x='dispatching_base_number',y='active_vehicles', data=uber_foil)","8875b935":"plt.figure(figsize=(12,10))\nsns.boxplot(x='dispatching_base_number', y='trips', data=uber_foil)","a9dc7b5c":"#define trips.vehicle\nuber_foil['trips\/vehicle']=uber_foil['trips']\/uber_foil['active_vehicles']","617b30f3":"uber_foil.head()","28686a00":"plt.figure(figsize=(12,6))\nuber_foil.set_index('date').groupby(['dispatching_base_number'])['trips\/vehicle'].plot()\nplt.ylabel('Average trips\/vehicle')\nplt.title('Demand vs Supply Chart')\nplt.legend()","e8422242":"Let's create a pivot table","309daad4":"## Analysing Demand of Ubers","d624785b":"Analysisng rush in New York City in every hour","17e0a4d7":"### Peaks on evening time","aad8c323":"Analysisng in-depth analysis of rush in NYC day and hour wise","427a4fd7":"**Analysing which base number has most active vehicles**","454bd6d0":"So, we just need a distribution of activities with respect to each and every base number. We guys can simply use our boxplot because here we have a multiple base number. Whenever we have multiple was always try to go ahead with box plot. ","d8df4d82":"For the **Date\/Time** collum the data type is object, so we should change the format into datetime using **pd.to_datetime()**","a956c5be":"## Analysing Uber Pickup on Each Month","a0e3ffaf":"Again, this BO2764 is still lead over here. It means it has a maximum number of activities as well as it has a maximum number of trips as well","353063ed":"Very first, we should to import some basic modules that will definetely help us to create a beautiful of our analysis. \n* **pandas**       : For the data frame needed\n* **seaborn**      : Data Visualization\n* **numpy**        : Use for numerical computation\n* **matplotlib**   : Data Visualization","82a130af":"The month has maximum rides is September","93f13f37":"Uber pickups by the month in New York City","3ea8f8e6":"**Analysing which base umber has most trips**","7050d34e":"From the bar chart above we can see that have so much rush in Thursday.","003a479d":"If we can see from the histogram above, we can say that its actually peaks during evening time when people are logging from the work. ","349b5176":"## Performs Spatial Anaysis on Demand of Uber","5148ecc7":"## Analysing Trip of Uber","709b3a85":"Next, the analysis of journey of each day","4f125201":"# 1. Import the library","acc98138":"From the graph above, we can see that every weekday there is always an increase at 5-9, while on weekends it is low.","77c57c02":"# 2. Data Loading and Preparation","afaa7172":"Analysis of location data point","c47e4309":"## Perform in Depth Analysis of Uber Base Number","d896bacc":"The files are separated by month and each has the following columns:\n\n* Date\/Time : The date and time of the Uber pickup\n* Lat       : The latitude of the Uber pickup\n* Lon       : The longitude of the Uber pickup\n* Base      : The TLC base company code affiliated with the Uber pickup\n\nThe globe is split into an imaginary 360 sections from both top to bottom (north to south) and 180 sections from side to side (west to east). The sections running from top to bottom on a globe are called longitude, and the sections running from side to side on a globe are called latitude.\nLatitude is the measurement of distance north or south of the Equator.\nEvery location on earth has a global address. Because the address is in numbers, people can communicate about location no matter what language they might speak. A global address is given as two numbers called coordinates. The two numbers are a location's latitude number and its longitude number (\"Lat\/Long\").","e75b38a9":"From the figure above, we can see the pointplot with respect to each in every weekday.","f18c60f7":"From the visualization above, almost in the couple of last day in each every month we have maximum ride.","cd25c930":"# 3. Exploratory Data and Analysis","4889da9b":"find how many unique base number available in our data","fa8c9ccb":"Perform spatial analysis using heatmap to get clear cut of Rush","31ad8b98":"### Seems to have highest sales on Thursday","d42f06c6":"From the all visual above we can conclude that the rush time is happen on evening time. ","56629e8d":"Perform Cross Analysis\nThrough our exploration we are going to vizualize:\n1. Heatmap by hour and weekday\n2. Heatmap by hour and day\n3. Heatmap by month and day\n4. Heatmap by month and weekday","115ebddb":"Analyse which base number gets popular by month","f0255694":"To analysis of total rides per month we should iterate in every month. ","c216157f":"For analysis purpose we need uber trip data from 2014. There are six files of raw data on Uber pickups in New York City from April to September 2014. We have to concatinate the dataset.","a047821f":"**How average trips\/vehicle inc\/decreases with dates with each of base number**","27577e24":"B02617 is the base popular by month","8442e110":"## Performing Cross Analysis","d774f806":"To make it easy, we can define a function called heatmap.","334bb3eb":"## Analysing Rush in New York City","54a359d1":"We can see with respect to each other based number, we have our own plot for each of the base number. We can definitely see over the orange plot, which is exactly BO2764 and BO2598 have that much demand and supply. It means both these base number they definitely performed better. Whereas in case of blue chart BO2512 it doesn't have that much good attention comparing to all other base number.","4af7ce98":"From the histogram above, we can see at the end of the month the rush of the ride happened.","d0a72f65":"# Uber New York Data Analysis","4bf0c86f":"Now, we were going to add a new collumn to define weekday, day, minute, month, and hour","b6ca3564":"### Analysis by Hour","8e6924c1":"Let's check out data type","cabec332":"## Analysing Monthly Rides","bc86d9b2":"We can see with respect to each and every base number. So from this, we can definitely come up with conclusion that the green color, which is exactly BO2764 has a maximum number of activists.","d09f6758":"**Analysing rush in hour**"}}