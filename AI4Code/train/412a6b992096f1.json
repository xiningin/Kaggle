{"cell_type":{"e3b147f6":"code","41065b4d":"code","e3ca01eb":"code","55fc0bba":"code","9a55e133":"code","caf3d028":"code","48751f6e":"code","a101cb77":"code","a6d54e31":"code","e024d6e7":"code","70609080":"code","1447ed10":"code","9c848751":"code","c150da2f":"code","7e53e575":"code","daaddd6e":"code","ff176976":"code","6e4d0bf1":"code","b88a8e18":"code","a7fa9a1b":"code","89948b32":"code","bdc926a7":"markdown","3733f9b6":"markdown","ffa7e5bf":"markdown","727b9f0f":"markdown","a71e1bda":"markdown","42dd1095":"markdown","a5c9e196":"markdown","a52ae258":"markdown","39505ab2":"markdown","351bfc1f":"markdown","d396d52b":"markdown","b63d67b8":"markdown","c05f382a":"markdown","d96b459f":"markdown","fc135f48":"markdown","7178eafb":"markdown","b0c1e69a":"markdown","3ee9e52d":"markdown","58dabeea":"markdown","5a61d9a4":"markdown"},"source":{"e3b147f6":"import pandas as pd\nimport numpy as np\n\nimport missingno as msno\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\n\nimport warnings \nwarnings.filterwarnings('ignore')\n\npd.set_option('display.max_columns', None) # to see all columns\n# pd.set_option('display.max_rows', None)\npd.set_option('display.max_rows', 200) \npd.set_option('display.max_colwidth',900) # to see full coontent of columns\n\n%matplotlib inline\n","41065b4d":"df=pd.read_csv(\"..\/input\/us-highway-railgrade-crossing-accident\/Highway-Rail_Grade_Crossing_Accident_Data.csv\")","e3ca01eb":"df.head()","55fc0bba":"#get the size of dataframe\nprint (\"Rows     : \" , df.shape[0])  #get number of rows\/observations\nprint (\"Columns  : \" , df.shape[1]) #get number of columns\nprint (\"#\"*30,\"\\n\",\"Features : \\n\", df.columns.tolist()) #get name of columns\/features\n","9a55e133":"df_train_car_accident=df[['Report Key','Railroad Code','Grade Crossing ID','Railroad Name',\n                      'Report Year',\n                      'Incident Month',\n                      'Date', \n                      'Month', 'Day', \n                      'Hour', 'Minute',\n                      'AM\/PM','Nearest Station','Division',\n                      'County Name',\n                      'State Name',\n                      'City Name', 'Highway Name', \n                      'Highway User', \n                      'Estimated Vehicle Speed',\n                      'Vehicle Direction',\n                      'Highway User Position', \n                      'Equipment Involved','Equipment Struck', \n                      'Temperature', \n                       'Visibility', \n                       'Weather Condition',\n                       'Equipment Type',\n                       'Track Type',\n                        'Track Name', \n                        'Track Class', \n                       'Number of Locomotive Units',\n                        'Number of Cars',\n                       'Train Speed', \n                      'Estimated\/Recorded Speed',\n                       'Train Direction',\n                       'Roadway Condition',\n                      'Crossing Illuminated',\n                      'Signaled Crossing Warning',\n                      'User Age', \n                      'User Gender', \n                      'User Struck By Second Train',\n                      'Highway User Action',\n                      'Driver Passed Vehicle', \n                       'View Obstruction',\n                       'Driver Condition',\n                      'Driver In Vehicle', \n                      'Crossing Users Killed For Reporting Railroad',\n                      'Crossing Users Injured For Reporting Railroad', \n                      'Vehicle Damage Cost', \n                      'Number Vehicle Occupants',\n                      'Narrative',\n                      'Employees Killed For Reporting Railroad', \n                      'Employees Injured For Reporting Railroad', \n                      'Number People On Train', \n                      'Passengers Killed For Reporting Railroad',\n                      'Passengers Injured For Reporting Railroad',\n                      'Total Killed Form 57',\n                      'Total Injured Form 57', \n                      'Total Killed Form 55A',\n                      'Total Injured Form 55A', \n                      'District']].copy()","caf3d028":"df_train_car_accident.columns = [col.replace(' ','_') for col in df_train_car_accident.columns]\n","48751f6e":"df_train_car_accident.info()","a101cb77":"df_train_car_accident.isna().sum()","a6d54e31":"df_train_car_accident.describe().T","e024d6e7":"df_train_car_accident.describe(exclude='number').T","70609080":"# Lets look visualize the relationship \nsns.set_palette(sns.color_palette(\"PuRd\", 8))\nplt.figure(figsize=(15,13))\n\nsns.countplot(orient='v',y=df_train_car_accident.Report_Year,data=df_train_car_accident)\n#sns.lineplot(x=df_train_car_accident.Report_Year,data=df_train_car_accident)","1447ed10":"sns.set_palette(sns.color_palette(\"Set2\", 8))\nplt.figure(figsize=(15,13))\n\nsns.distplot(x=df_train_car_accident.Report_Year)","9c848751":"# Lets look visualize the relationship \nsns.set_palette(sns.color_palette(\"PuRd\", 8))\nplt.figure(figsize=(15,13))\norder = df_train_car_accident['State_Name'].value_counts(ascending=False).index \nsns.countplot(orient='v',y=df_train_car_accident['State_Name'],data=df_train_car_accident,order=order)\n","c150da2f":"df_recent_event=df_train_car_accident.loc[df_train_car_accident.Report_Year > 2015]","7e53e575":"df_recent_event.head()\n","daaddd6e":"##trying to use plotly map function\ndf_state=df_recent_event.groupby(['State_Name']).count()['Report_Year'].sort_values(ascending=False).reset_index()\ndf_state.rename(columns={'Report_Year':'Count_of_accident'},inplace=True)\ncode = {'Alabama': 'AL',\n        'Alaska': 'AK',\n        'Arizona': 'AZ',\n        'Arkansas': 'AR',\n        'California': 'CA',\n        'Colorado': 'CO',\n        'Connecticut': 'CT',\n        'Delaware': 'DE',\n        'District of Columbia': 'DC',\n        'Florida': 'FL',\n        'Georgia': 'GA',\n        'Hawaii': 'HI',\n        'Idaho': 'ID',\n        'Illinois': 'IL',\n        'Indiana': 'IN',\n        'Iowa': 'IA',\n        'Kansas': 'KS',\n        'Kentucky': 'KY',\n        'Louisiana': 'LA',\n        'Maine': 'ME',\n        'Maryland': 'MD',\n        'Massachusetts': 'MA',\n        'Michigan': 'MI',\n        'Minnesota': 'MN',\n        'Mississippi': 'MS',\n        'Missouri': 'MO',\n        'Montana': 'MT',\n        'Nebraska': 'NE',\n        'Nevada': 'NV',\n        'New Hampshire': 'NH',\n        'New Jersey': 'NJ',\n        'New Mexico': 'NM',\n        'New York': 'NY',\n        'North Carolina': 'NC',\n        'North Dakota': 'ND',\n        'Ohio': 'OH',\n        'Oklahoma': 'OK',\n        'Oregon': 'OR',\n        'Pennsylvania': 'PA',\n        'Rhode Island': 'RI',\n        'South Carolina': 'SC',\n        'South Dakota': 'SD',\n        'Tennessee': 'TN',\n        'Texas': 'TX',\n        'Utah': 'UT',\n        'Vermont': 'VT',\n        'Virginia': 'VA',\n        'Washington': 'WA',\n        'West Virginia': 'WV',\n        'Wisconsin': 'WI',\n        'Wyoming': 'WY'}\n\ndf_state['State_Name'] =df_state['State_Name'].str.capitalize()\ndf_state['Code']=df_state['State_Name'].map(code)","ff176976":"fig = px.choropleth(data_frame=df_state,locations=df_state['Code'],\n                    locationmode='USA-states' ,\n                    scope=\"usa\",hover_name='State_Name',\n                    color='Count_of_accident', \n                    title='State Wise Incident Report',\n                    color_continuous_scale='sunset'\n                  )\nfig.add_scattergeo(\n    locations=df_state['Code'],\n    locationmode='USA-states',\n    text=df_state['Code'],\n    mode='text')\nfig.show('notebook')","6e4d0bf1":"\nsns.set_palette(sns.color_palette(\"PuRd\", 8))\nplt.figure(figsize=(15,13))\norder = df_recent_event['State_Name'].value_counts(ascending=False).index \nsns.countplot(orient='v',y=df_recent_event['State_Name'],data=df_recent_event,order=order)\n","b88a8e18":"df_county=df_recent_event.groupby(['County_Name','State_Name']).count()['Report_Year'].sort_values(ascending=False).head(10).reset_index()\n\ndf_county['State_Name'] =df_county['State_Name'].str.capitalize()\ndf_county['Code']=df_county['State_Name'].map(code)","a7fa9a1b":"df_county['county_state'] =df_county['County_Name']+\",\"+ df_county['Code']\ndf_county.rename(columns={'Report_Year':'Count_of_accident'},inplace=True)","89948b32":"sns.set_palette(sns.color_palette(\"PuRd\", 8))\nplt.figure(figsize=(15,13))\nsns.barplot(y=df_county.county_state,x=df_county.Count_of_accident ,data=df_county)","bdc926a7":"<h2 style = \"font-size:40px; font-family:Garamond ; font-weight : Strong; color :Red ; text-align: center; border-radius: 5px 5px; padding: 5px\">  State wise accident reported from 2015- 2021<\/h2> \n","3733f9b6":"<h2 style = \"font-size:30px; font-family:Garamond ; font-weight : strong; color :Red ; text-align: center; \n             \"> Explore Data <\/h2> ","ffa7e5bf":"Lets start with importing of  all the required libraries to handle data, analysis and visualization process. \n","727b9f0f":"**Observations**\n- Data is from year 1975 to 2021.\n- Temeparture has max 870 , this seems to be incorrect data\n- Maximum vehicle damage is 1000000\n- Need to analyse number of Number_Vehicle_Occupants ,Number_of_Cars,Number_People_On_Train to understand what kind of incident was this","a71e1bda":"### Question I want to answer ?\n- In which year maximum accidents were reported? \n- Statewise Accident report\n- Statewise Accident report from 2006-2021\n- Top 10 County wise accident report from 2006-2021","42dd1095":"There are lots of missing values in many features.Let see if can still visualize some data","a5c9e196":"<br>\n<h1 style = \"font-size:40px; font-family:Garamond ;  color :Red; font-weight : strong ;text-align: center;\">  Rail Road Crossing Accident<\/h1> \n<br>","a52ae258":"**Observation**\n- Cook County in Illinois has reported maximum number of rail road crossing accidents \n- My county Harris, Texas is on 2nd number followed by Los Angeles,California","39505ab2":"According to the National Transportation Safety Bureau, Nearly every 2 hours, a person or vehicle is hit by a train in the U.S. Rail accidents and\/or incidents include the following scenarios:\n- Train-train collisions\n- Train-car collisions\n- Train-person collisions\n- Each year nearly 1,000 people are killed in train related accidents. \n\nSo lets explore the dataset and see if we can identify any patterns in data.","351bfc1f":"## County  wise accident  reported from 2015-2021","d396d52b":"- Texas still has maximum number of accidents. \n- California which was on number 4 has moved to 2nd in recent years.","b63d67b8":"<div class = 'image'> <img style=\"width:100%\" align=center src = https:\/\/upload.wikimedia.org\/wikipedia\/commons\/0\/07\/Trout_Lake%2C_Michigan_Railroad_crossing.JPG> \n<\/div>","c05f382a":"**Observation**\n- I am from Texas, and this is shocking to see Texas has maximum accident reported.\n- Illinois, Ohio,Indiana,California all have  more than 12000 accidents from 1975-2021","d96b459f":"**Observation**\n- Maximum Rail Road accidents were reported in  year 1978\n- Number of accident have reduced over time.\n","fc135f48":"### **Dataset**\n\n- Railroad Code:\tCode of the railroad\t\n- Railroad Name:\tName of the railroad\t\n- Report Year:\t Year report published\t\n- Incident Number:\tUnique incident number\t\n- Incident Year\t:Year of the incident\t\n- Incident Month:\tMonth of the incident\t\n- Other Railroad Code:\tCode of the other railroad involved\t\n- Other Railroad Name:\tName of the other railroad involved\t\n- Other Incident Number:\tUnique incident number for the other railroad involved\t\n- Other Incident Year:\tYear of the incident\t\n- Other Incident Month:\tMonth of the incident\t\n- Maintenance Incident Railroad Code:\tCode of the maintenance railroad\t\n- Maintenance Railroad Name\t:Name of the maintenance railroad\t\n- Maintainance Incident Number\t:Unique incident number for the maintenance railroad\t\n- Maintenance Incident Year\t:Year of the incident\t\n- Maintenance Incident Month:\tMonth of the incident\t\n- Grade Crossing ID\tUnique: grade crossing identification\t\n- Date\t:Incident date\t\n- Time\t:Incident time\t\n- Month\t:Incident month\t\n- Day\t:Incident day\t\n- Hour\t:Incident hour\t\n- Minute:\tIncident minute\t\n- AM\/PM\t:AM or PM\t\n- Nearest Station:\tNearest railroad station\t\n- Division:\tDivision\t\n- Subdivision:\tSubdivision\t\n- County Code:\tFIPS county code\t\n- County Name:\tName of County\t\n- State Code:\tFIPS state code\t\n- State Name:\tName of state\t\n- City Name:\tName of city if in a city\t\n- Highway Name:\tName or number of highway\t\n- Public\/Private Code:\tHighway public or private code\t\n- Public\/Private:\tHighway public or private\t\n- Highway User Code:\tType of highway user code\t\n- Highway User\t:Type of highway user\t\n- Estimated Vehicle Speed:\tEstimated vehicle speed at impact (mph)\t\n- Vehicle Direction Code:\tDirection of vehicle code\t\n- Vehicle Direction:\tDirection of vehicle\t\n- Highway User Position Code:\tHighway user position code in relation to crossing\t\n- Highway User Position\t:Highway user position in relation to crossing\t\n- Equipment Involved Code:\tRail equipment involved code\t\n- Equipment Involved:\tRail equipment involved\t\n- Railroad Car Unit Position:\tPosition of impact car unit in train\t\n- Equipment Struck Code\t:Rail equipment struck highway user or struck by highway user code\t\n- Equipment Struck\tRail :equipment struck highway user or struck by highway user\t\n- Hazmat Involvement Code:\tHighway user or rail equipment transporting highway materials code\t\n- Hazmat Involvement\t:Highway user or rail equipment transporting hazardous materials\t\n- Hazmat Released by Code:\tHazardous materials released by highway user or rail equipment code\t\n- Hazmat Released by\t:Hazardous materials released by highway user or rail equipment\t\n- Hazmat Released Name\t:Name of hazardous materials released\t\n- Hazmat Released Quantity:\tQuantity of hazardous materials released\t\n- Hazmat Released Measure:\tUnit measure of hazardous materials released quantity\t\n- Temperature:\tTemperature at incident :(degrees Farenheit)\t\n- Visibility Code:\tVisibility during: incident code\t\n- Visibility\t:Visibility during :incident\t\n- Weather Condition Code:\tWeather condition during incident code\t\n- Weather Condition\t:Weather condition during incident\t\n- Equipment Type Code:\tType of equipment consist code\t\n- Equipment Type:\tType of equipment consist\t\n- Track Type Code:\tTrack type used by rail equipment involved code\t\n- Track Type:\tTrack type used by rail equipment involved\t\n- Track Name:\tTrack number or name\t\n- Track Class:\tFRA track class\t\n- Number of Locomotive Units:\tNumber of locomotive units involved\t\n- Number of Cars:\tNumber of railroad cars involved\t\n- Train Speed:\tSpeed of train involved\t\n- Estimated\/Recorded Speed:\tTrain speed was estimated or recorded\t\n- Train Direction Code:\tDirection of train involved code\t\n- Train Direction\t:Direction of train involved\t\n- Crossing Warning Expanded Code 1:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 2:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 3:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 4:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 5:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 6:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 7:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 8:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 9:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 10:\tType of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 11\t:Type of crossing warning code (12 possible)\t\n- Crossing Warning Expanded Code 12\t:Type of crossing warning code (12 possible)\t\n- Crossing Warning Expanded 1\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 2\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 3\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 4\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 5\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 6\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 7\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 8\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 9\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 10\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 11\t:Type of crossing warning (12 possible)\t\n- Crossing Warning Expanded 12\t:Type of crossing warning (12 possible)\t\n- Signaled Crossing Warning Code:\tStatus of warning devices at crossing during incident code\t\n- Signaled Crossing Warning\t:Status of warning devices at crossing during incident\t\n- Crossing Warning Explanation Code:\t\t\n- Crossing Warning Explanation:\t\t\n- Roadway Condition Code\t:Roadway condition at time of incident code\t\n- Roadway Condition\t:Roadway condition at time of incident\t\n- Crossing Warning Location Code:\tLocation of crossing warning code\t\n- Crossing Warning Location:\tLocation of crossing warning\t\n- Warning Connected To Signal:\tWarning was connected to highway signals\t\n- Crossing Illuminated\t:Crossing was illuminated by street lights or special lights\t\n- User Age\t:Highway user's age\t\n- User Gender:\tHighway user's gender\t\n- User Struck By Second Train:\tHighway user went behind or in front of train and was struck or was struck by a second train\t\n- Highway User Action Code:\tHighway user action contributing to incident code\t\n- Highway User Action\t:Highway user action contributing to incident\t\n- Driver Passed Vehicle\t:Driver passed standing highway vehicle\t\n- View Obstruction Code\t:View of track obscured bb code\t\n- View Obstruction\t:View of track obscured by\t\n- Driver Condition Code:\tDriver condition after incident code\t\n- Driver Condition\t:Driver condition after incident\t\n- Driver In Vehicle\t:Driver was in the vehicle\t\n- Crossing Users Killed For Reporting Railroad:\tNumber of highway-rail crossing users killed\t\n- Crossing Users Injured For Reporting Railroad:\tNumber of highway-rail crossing users injured\t\n- Vehicle Damage Cost\t:Highway vehicle property damage cost\t\n- Number Vehicle Occupants\t:Total number of vehicle occupants including driver\t\n- Employees Killed For Reporting Railroad:\tNumber of railroad employees killed\t\n- Employees Injured For Reporting Railroad:\tNumber of railroad employees injured\t\n- Number People On Train:\tTotal number of people on train including passengers and train crew\t\n- Form 54 Filed\t:Was a rail equipment accident\/incident report filed\t\n- Passengers Killed For Reporting Railroad:\tNumber of passengers on train killed\t\n- Passengers Injured For Reporting Railroad:\tNumber of passengers on train injured\t\n- Video Taken:\tVideo of incident was taken\t\n- Video Used:\tVideo of incident was used\t\n- Special Study 1:\t\t\n- Special Study 2:\t\t\n- Narrative\t:Narrative description of incident\t\n- Total Killed Form 57\t:Number killed as reported on Form 57\t\n- Total Injured Form 57\t:Number injured as reported on Form 57\t\n- Railroad Type:\tRailroad Type\t\n- Joint Code:\tJoint Code\t\n- Total Killed Form 55A\t:Number killed as reported on Form 55A\t\n- Total Injured Form 55A:\tNumber injured as reported on Form 55A\t\n- District\t:District\t\n- Whistle Ban Code:\tWhistle ban in effect code\t\n- Whistle Ban\t:Whistle ban in effect\t\n- Report Key\t:Unique identifier for Form 57 report\t\n\n","7178eafb":"#### Column name has spaces in them so let us fix them","b0c1e69a":"**I dont need all the columns for my analysis so creating a new dataframe with required columns**","3ee9e52d":"<h2 style = \"font-size:40px; font-family:Garamond ; font-weight : Strong; color :Red ; text-align: center; border-radius: 5px 5px; padding: 5px\">  In which year maximum accidents were reported? <\/h2> ","58dabeea":"**Let explore observation from recent 5 years .creating a new dataframe where report year is more than 2015**","5a61d9a4":"<h2 style = \"font-size:40px; font-family:Garamond ; font-weight : Strong; color :Red ; text-align: center; border-radius: 5px 5px; padding: 5px\">  State wise accident reported since 1975-2021 <\/h2> \n"}}