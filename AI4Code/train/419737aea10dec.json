{"cell_type":{"b9cebaea":"code","488766b2":"code","e8a998cc":"code","9cd311b2":"code","01bb020d":"code","721c1a6c":"code","2a7e33fa":"code","ddf042fd":"code","1f3d6b0f":"code","8bda63e7":"code","8f69df8c":"code","e2f77561":"code","fe145e43":"code","8237aaf9":"code","3c9005cf":"code","edfdbc32":"code","0f416fe3":"code","e40f6441":"markdown","98e9fe25":"markdown","1bdc2c17":"markdown","2ff24581":"markdown","0b724fb3":"markdown","16b183ea":"markdown","8c29cf04":"markdown"},"source":{"b9cebaea":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('seaborn')\n\ndef heatMap(df):\n    #Create Correlation df\n    corr = df.corr()\n    #Plot figsize\n    fig, ax = plt.subplots(figsize=(10, 10))\n    #Generate Color Map, red & blue\n    colormap = sns.diverging_palette(220, 10, as_cmap=True)\n    #Generate Heat Map, allow annotations and place floats in map\n    sns.heatmap(corr, cmap=colormap, annot=True, fmt=\".2f\")\n    #Apply xticks\n    plt.xticks(range(len(corr.columns)), corr.columns);\n    #Apply yticks\n    plt.yticks(range(len(corr.columns)), corr.columns)\n    #show plot\n    plt.show()","488766b2":"df = pd.read_csv(\"..\/input\/Chicago_Crimes_2012_to_2017.csv\")","e8a998cc":"##find missing values\n##plt.figure(figsize=(8,6))\n##sns.heatmap(df.isnull(), cbar = False)","9cd311b2":"df.dropna(); ## drop rows with missing data","01bb020d":"# convert dates to pandas datetime format\ndf.Date = pd.to_datetime(df.Date, format='%m\/%d\/%Y %I:%M:%S %p')\ndf.index = pd.DatetimeIndex(df.Date)","721c1a6c":"x = df.sample(30000) ##sampling a part of the dataset","2a7e33fa":"heatMap(x) ## correlation between variables","ddf042fd":"x['Primary Type'].value_counts().plot.bar()\nplt.title(\"Crimes\")\nplt.show()","1f3d6b0f":"x_theft = x[x['Primary Type'] == \"THEFT\"]\nx_battery = x[x['Primary Type'] == \"BATTERY\"]\nx_cd = x[x['Primary Type'] == \"CRIMINAL DAMAGE\"]\nx_narc = x[(x['Primary Type'] == \"NARCOTICS\")]","8bda63e7":"x_theft['Description'].value_counts(normalize=True).plot.bar()\nplt.title(\"Theft Types\")\nplt.show()\n\nx_battery['Description'].value_counts(normalize=True).plot.bar()\nplt.title(\"Battery Types\")\nplt.show()\n","8f69df8c":"x_cd['Description'].value_counts(normalize=True).plot.bar()\nplt.title(\"Criminal Damage Types\")\nplt.show()\n\nx_narc['Description'].value_counts(normalize=True).plot.bar()\nplt.title(\"Narcotics Types\")\nplt.show()","e2f77561":"print(\"Heat map over cooridantes of crimes\")\nx.plot.hexbin(x='Longitude', y='Latitude', gridsize=40)\nplt.title(\"Overall crimes\")\nplt.show()\n\nx_theft.plot.hexbin(x='Longitude', y='Latitude', gridsize=40)\nplt.title(\"Theft\")\n\nx_battery.plot.hexbin(x='Longitude', y='Latitude', gridsize=40)\nplt.title(\"Battery\")\n\nx_cd.plot.hexbin(x='Longitude', y='Latitude', gridsize=40)\nplt.title(\"Criminal Damage\")\nplt.show()\n\nx_narc.plot.hexbin(x='Longitude', y='Latitude', gridsize=40)\nplt.title(\"Narcotics\")\nplt.show()","fe145e43":"x['Arrest'].value_counts(normalize=True).plot.bar()\nplt.title(\"Arrests\")\nplt.show()\n\nx[x.Arrest == True]['Year'].value_counts().plot.line()\nplt.title(\"Arrests per year\")\nplt.show()","8237aaf9":"x[x.Arrest == True]['Primary Type'].value_counts(normalize=True).plot.bar()\nplt.title(\"Arrests per crime type\")\nplt.show()","3c9005cf":"\ncolor = (0.2, 0.4, 0.6, 0.6)\n\ndays = ['Monday','Tuesday','Wednesday',  'Thursday', 'Friday', 'Saturday', 'Sunday']\nx.groupby([x.index.dayofweek]).size().plot(kind='barh', color=color)\nplt.ylabel('Day of week')\nplt.yticks(np.arange(7), days)\nplt.xlabel('Number of crimes')\nplt.title('Number of crimes by day of week')\nplt.show()\n\n\nx.groupby([x.index.month]).size().plot(kind='barh', color=color)\nplt.ylabel('Month')\nplt.xlabel('Number of crimes')\nplt.title('Number of crimes by month of year')\nplt.show()\n\n\nx.groupby([x.index.hour]).size().plot(kind='barh', color=color)\nplt.ylabel('Hour')\nplt.xlabel('Number of crimes')\nplt.title('Number of crimes by hour of day')\nplt.show()\n\n","edfdbc32":"color = (0.2, 0.4, 0.6, 0.6)\n\nx[x.index.hour == 0]['Primary Type'].value_counts(normalize=True).plot.bar(color=color)\nplt.title(\"Crimes commited around 24:00\")\nplt.show()\n\nx[x.index.hour == 3]['Primary Type'].value_counts(normalize=True).plot.bar(color=color)\nplt.title(\"Crimes commited around 03:00\")\nplt.show()\n\nx[x.index.hour == 12]['Primary Type'].value_counts(normalize=True).plot.bar(color=color)\nplt.title(\"Crimes commited around 12:00\")\nplt.show()\n\nx[x.index.hour == 19]['Primary Type'].value_counts(normalize=True).plot.bar(color=color)\nplt.title(\"Crimes commited around 19:00\")\nplt.show()","0f416fe3":"color = \"mediumvioletred\"\n\nx[x['Primary Type'] == 'THEFT'].index.hour.value_counts().plot.bar(color=color)\nplt.title(\"Theft crimes by hour\")\nplt.xlabel(\"hour\")\nplt.ylabel(\"Amount\")\nplt.show()\n\nx[x['Primary Type'] == 'BATTERY'].index.hour.value_counts().plot.bar(color=color)\nplt.title(\"Battery crimes by hour\")\nplt.xlabel(\"hour\")\nplt.ylabel(\"Amount\")\nplt.show()\n\nx[x['Primary Type'] == 'CRIMINAL DAMAGE'].index.hour.value_counts().plot.bar(color=color)\nplt.title(\"Ciminal Damage crimes by hour\")\nplt.xlabel(\"hour\")\nplt.ylabel(\"Amount\")\nplt.show()\n\nx[x['Primary Type'] == 'NARCOTICS'].index.hour.value_counts().plot.bar(color=color)\nplt.title(\"Narcotics crimes by hour\")\nplt.xlabel(\"hour\")\nplt.ylabel(\"Amount\")\nplt.show()","e40f6441":"Let's plot the subtypes of the different 'Primary Types'.","98e9fe25":"The diagram shows that 'Theft' is the most common crime type. We choose to focus on the four most common types of crime for now.","1bdc2c17":"We now use a heat map and plot the coordinates for each crime in order to get an overview of where the crimes were generally commited.","2ff24581":"Firstly we want to find out what the most common crime is in Chicago. The 'Primary Type' columns is plotted with their correspending value count.","0b724fb3":"Now let's look at the arrest success rate. ","16b183ea":"We plot the arrest rate for all types of crimes. ","8c29cf04":"We now know which types of crimes are commited and where, now let's find out when."}}