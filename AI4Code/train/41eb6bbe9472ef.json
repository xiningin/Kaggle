{"cell_type":{"7bbafa41":"code","874de9fd":"code","e96d6be2":"code","127b1ee2":"code","a5cac46c":"code","25f3b5d9":"code","43c93487":"code","9c9cdc3e":"code","48486114":"code","bcc4a2e0":"code","b3c6dcc6":"code","a403ebc9":"code","b1db4a90":"code","1a783033":"code","76bdfa61":"code","e5daf026":"code","40e3214f":"code","2d3543f7":"markdown","90298a79":"markdown","02c9f1bc":"markdown","c5f6ad95":"markdown","301e7461":"markdown","cbcae158":"markdown","dca5261c":"markdown","ec4d0e70":"markdown","36598f76":"markdown","e5d662a2":"markdown","0f88f98b":"markdown","502524de":"markdown","17677b31":"markdown","22cf8d02":"markdown","5801c2c3":"markdown","852bd01c":"markdown","54da9aef":"markdown","b0b87065":"markdown","2a3bba0e":"markdown","fb94c4e6":"markdown","c846c3c7":"markdown"},"source":{"7bbafa41":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","874de9fd":"# Using pandas library we load each CSV file separately and assign it a name\n\nSurvey_Discr = pd.read_csv('\/kaggle\/input\/lgbt-survey-discrimination\/LGBT_Survey_Discrimination.csv')\n\nHS_EU = pd.read_csv('\/kaggle\/input\/hs-eu-happiness\/HS_EU (2).csv')\n\nRainbow_Score = pd.read_csv('\/kaggle\/input\/ilga-rainbow-score\/ILGA_Rainbow_Score.csv')\n\nViolence_Harassment = pd.read_csv('\/kaggle\/input\/lgbtviolence-harassment\/LGBT_Survey_ViolenceAndHarassment.csv')\n\nMarriage_Legalization = pd.read_csv('\/kaggle\/input\/marriage-legalization\/Marriage_Legalization.csv')\n\nPopulism_Votes = pd.read_csv('\/kaggle\/input\/populism-vote-share\/Populism_Vote_Share.csv')\n\ndf_lgbtqi = pd.read_csv('\/kaggle\/input\/combined-df-eu\/Combined_DF_EU-Index-LGBTQI (3).csv')\n\ndf_lgbtqi_edit = pd.read_csv('\/kaggle\/input\/combined-df-eu-edit\/Combined_DF_EU-Index-LGBTQI EDITED.csv')\n\ndf_lgbtqi_2012 = pd.read_csv('\/kaggle\/input\/combined-df-eu-ilga-2012\/Combined_DF_EU-Index-LGBTQI ILGA 2012.csv')","e96d6be2":"import geopandas as gpd\nimport scipy.stats as stats \nimport plotly.express as px\nfrom plotly.offline import init_notebook_mode,iplot\n#init_notebook_mode(connected=True)\nimport plotly.offline as pyo\npyo.init_notebook_mode()\ninit_notebook_mode(connected=True)\nimport plotly.graph_objects as go\nfrom sklearn.svm import SVR\nfrom sklearn.metrics import r2_score,mean_squared_error\nfrom mpl_toolkits import mplot3d\nimport numpy as np\nimport matplotlib.pyplot as plt","127b1ee2":"#plot scatter plot GTI vs Happinses Score, add Ordinary Least Square Regression Trendline to see correlation\nfig = px.scatter(df_lgbtqi_edit, x=\"Timbro\", y=\"GTI.Index\", trendline=\"ols\", hover_data=['Country', 'Year'])\nfig.update_layout(title='Gay Travel Index - Far-Right Party (2017 - 2020)')\nfig.show()","a5cac46c":"fig = px.scatter(df_lgbtqi_edit, x=\"Timbro\", y=\"ILGA\", trendline='ols', hover_data=['Country'])\nfig.update_layout(title='ILGA Index - Far-Right (2017-2020)')\nfig.show()","25f3b5d9":"# with px.scatter_3d and go.Surface\n\nmesh_size = .02\nmargin = 0\n\nX = df_lgbtqi_edit[['GTI.Index', 'ILGA']]\ny = df_lgbtqi_edit['Timbro']\n\n# Condition the model on GTI and ILGA index, predict TIMBRO\nmodel = SVR(C=1.)\nmodel.fit(X, y)\n\n# Create a mesh grid on which we will run our model\nx_min, x_max = X['GTI.Index'].min() - margin, X['GTI.Index'].max() + margin\ny_min, y_max = X['ILGA'].min() - margin, X['ILGA'].max() + margin\nxrange = np.arange(x_min, x_max, mesh_size)\nyrange = np.arange(y_min, y_max, mesh_size)\nxx, yy = np.meshgrid(xrange, yrange)\n# Run model\npred = model.predict(np.c_[xx.ravel(), yy.ravel()])\npred = pred.reshape(xx.shape)\n# Generate the plot\nfig = px.scatter_3d(df_lgbtqi_edit, x=df_lgbtqi_edit['GTI.Index'], y=df_lgbtqi_edit['ILGA'], z=df_lgbtqi_edit['Timbro'], hover_data=['Country'])\nfig.update_layout(title='Gay Travel Index - ILGA Score - Far-Right Party (2017-2020')\nfig.update_traces(marker=dict(size=5))\nfig.add_traces(go.Surface(x=xrange, y=yrange, z=pred, name='pred_surface'))\nfig.show()","43c93487":"any_of_the_following = Survey_Discr.loc[Survey_Discr.question_label == 'Have you ever experienced any of the following situations when using or trying to access healthcare services as a L, G, B or T person?']\nfig = px.bar(any_of_the_following, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Have you ever experienced any of the following situations when using or trying to access healthcare services as a L, G, B or T person?\",\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=1000)\nfig.show()","9c9cdc3e":"school = Survey_Discr.loc[Survey_Discr.question_label == 'During your schooling before the age of 18, did you experience negative comments or conduct at school because of you being L, G, B or T?']\nfig = px.bar(school, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"During your schooling before the age of 18, did you experience negative comments or conduct at school because of you being L, G, B or T?\",\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","48486114":"# Group all questions about general discrimination in the last 12 months.\n\nDiscrimination_1 = Survey_Discr.loc[(Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed because of being perceived as Gay?')\n                         |  (Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed because of being perceived as Transgender?')\n                         | (Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed because of being perceived as Lesbian? ')\n                         | (Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed because of being perceived as Bisexual?')]\n\nfig = px.bar(Discrimination_1, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed for being L, G, B or T?\",\n            width=1600, height=600)\nfig.show()","bcc4a2e0":"# Group all questions about general discrimination in the last 12 months.\n\nDiscrimination_2 = Survey_Discr.loc[(Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T at work?')\n                         |  (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T at a shop?')\n                         | (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T by healthcare personnel (eg a receptionist, nurse or doctor)? ')\n                            |  (Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed on the grounds of sexual orientation?')\n                         | (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T at a sport or fitness club? ')\n                            |  (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T when showing your ID or any official document that identifies your sex?')\n                         | (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T by social service personnel?')\n                            |  (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T by school \/ university personnel?')\n                         | (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T at a cafe, restaurant, bar or nightclub?')\n                            |  (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T when looking for a house or apartment to rent or buy? ')\n                         | (Survey_Discr['question_label'] == 'In the last 12 months, in the country where you live, have you personally felt discriminated against or harassed on the grounds of gender?')\n                         | (Survey_Discr['question_label'] == 'During the last 12 months, have you personally felt discriminated against because of being L, G, B or T when looking for a job? *')]\nfig = px.bar(Discrimination_2, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Discrimination at school, work, cafe & restaurant, shop, school & university, when showing ID, when looking for a job\",\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","b3c6dcc6":"Discrimination_employment = Survey_Discr.loc[(Survey_Discr['question_label'] == 'During your employment in the last 5 years, have you experienced unequal treatment with respect to employment conditions or benefits (for example leave, pension, etc) because you have a same-sex partner?')\n                         |  (Survey_Discr['question_label'] == 'During your employment in the last 5 years, have you heard or seen negative comments or conduct because a colleague is perceived to be lesbian, gay, bisexual and\/or transgender?')\n                         | (Survey_Discr['question_label'] == 'During your employment in the last 5 years, have you hidden or disguised that you are L,G,B or T at work?')\n                            |  (Survey_Discr['question_label'] == 'During your employment in the last 5 years, have you experienced a general negative attitude at work against people because they are lesbian, gay, bisexual and\/or transgender?')\n                         | (Survey_Discr['question_label'] == 'During your employment in the last 5 years, have you experienced negative comments or conduct at work because of you being L, G, B or T?')]\nfig = px.bar(Discrimination_employment, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Discrimination at employment\",\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","a403ebc9":"# Group together all data related to Where harrassment take place\n\nViolence_Where = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'LAST incident of harassment in the past 12 months - Where did it happen?')\n                         |  (Violence_Harassment['question_label'] == 'MOST SERIOUS incident of harassment - Where did it happen?')\n                            |  (Violence_Harassment['question_label'] == 'Where did the last incident of physical \/ sexual attack or threat of violence happen?')\n                            |  (Violence_Harassment['question_label'] == 'Where do you avoid being open about yourself as L, G, B or T for fear of being assaulted, threatened or harassed by others?')\n                         | (Violence_Harassment['question_label'] == 'The MOST SERIOUS physical \/ sexual attack or threat of violence - Where did it happen?')]\n\n# Create a WorldCloud (the bigger the fontsize the more the word appears)\n\nfrom wordcloud import WordCloud, ImageColorGenerator\ntext = list(set(Violence_Where['answer']))\nplt.rcParams['figure.figsize'] = (15,15)\nwordcloud = WordCloud(max_font_size=50, \n                      max_words=100,\n                      background_color=\"black\").generate(str(text))\n\nplt.imshow(wordcloud,interpolation=\"bilinear\")\nplt.title('Where most incidents of harassment take place', fontsize=20)\nplt.axis(\"off\")\nplt.show()","b1db4a90":"# group according to What is the Gender of the perpetrator\n\nViolence_Gender = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'MOST SERIOUS incident of harassment - What was the gender of the perpetrator(s)?')\n                            |  (Violence_Harassment['question_label'] == 'LAST incident of harassment in the past 12 months - What was the gender of the perpetrator(s)?')\n                            |  (Violence_Harassment['question_label'] == 'LAST incident of physical \/ sexual attack or threat of violence in the past 12 months - What was the gender of the perpetrator(s)?')                                       \n                            |  (Violence_Harassment['question_label'] == 'MOST SERIOUS physical \/ sexual attack or threat of violence - What was the gender of the perpetrator(s)?')]\n\n# Create a stacked column chart \nfig = px.bar(Violence_Gender, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Gender of Perpetrator - Sexual and physical harassment\",\n             facet_col_spacing = 0,\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","1a783033":"Violence_What = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'Thinking about the MOST SERIOUS incident of harassment, what happened to you? *')\n                            |  (Violence_Harassment['question_label'] == 'Thinking about the LAST incident of harassment, what happened to you: *')\n                            |  (Violence_Harassment['question_label'] == 'Thinking about the MOST SERIOUS physical \/ sexual attack or threat of violence, what happened to you? *')                                       \n                            |  (Violence_Harassment['question_label'] == 'Thinking about the LAST physical \/ sexual attack or threat of violence, what happened to you? *')]\n\n# Create a WorldCloud (the bigger the fontsize the more the word appears)\n\nfrom wordcloud import WordCloud, ImageColorGenerator\ntext = list(set(Violence_What['answer']))\nplt.rcParams['figure.figsize'] = (15,15)\nwordcloud = WordCloud(max_font_size=50, \n                      max_words=100,\n                      background_color=\"black\").generate(str(text))\n\nplt.imshow(wordcloud,interpolation=\"bilinear\")\nplt.title('Harrasment - What happened to you?', fontsize=20)\nplt.axis(\"off\")\nplt.show()","76bdfa61":"# group according to What is the Gender of the perpetrator\n\nViolence_Report = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'LAST incident of harassment in the past 12 months - Did you or anyone else report it to the police?')\n                            |  (Violence_Harassment['question_label'] == 'MOST SERIOUS incident of harassment - Did you or anyone else report it to the police?')                                       \n                            |  (Violence_Harassment['question_label'] == 'MOST SERIOUS physical \/ sexual attack or threat of violence - Did you or anyone else report it to the police?')                            \n                            |  (Violence_Harassment['question_label'] == 'Did you or anyone else report the last incident of physical \/ sexual attack or threat of violence to the police?')]\n\n# Create a stacked column chart \nfig = px.bar(Violence_Report, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Are incidents reported to the police?\",\n             facet_col_spacing = 0,\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","e5daf026":"Violence_Where_Report = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'MOST SERIOUS incident of harassment - Did you or anyone else report it to any of the following organisations \/ institutions? *')\n                            |  (Violence_Harassment['question_label'] == 'MOST SERIOUS physical \/ sexual attack or threat of violence - Did you or anyone else report it to any of the following organisations \/ institutions? *')\n                            |  (Violence_Harassment['question_label'] == 'LAST incident of harassment in the past 12 months - Did you or anyone else report it to any of the following organisations \/ institutions? *')                                       \n                            |  (Violence_Harassment['question_label'] == 'Did you or anyone else report the last incident of physical \/ sexual attack or threat of violence to any of the following organisations \/ institutions? *')]\n# Create a stacked column chart \nfig = px.bar(Violence_Where_Report, x=\"answer\", y=\"percentage\", color=\"CountryCode\", \n             title=\"Where are incidents reported?\",\n             facet_col_spacing = 0,\n             hover_data = ['CountryCode', 'subset'],\n            width=1600, height=600)\nfig.show()","40e3214f":"# group according to Why there were no reports to police\n\nViolence_Why = Violence_Harassment.loc[(Violence_Harassment['question_label'] == 'MOST SERIOUS incident of harassment - Why did you not report it to the police?')\n                         |  (Violence_Harassment['question_label'] == 'MOST SERIOUS physical \/ sexual attack or threat of violence - Why did you not report it to the police?')\n                            |  (Violence_Harassment['question_label'] == 'LAST incident of harassment in the past 12 months - Why did you not report it to the police?')\n                            |  (Violence_Harassment['question_label'] == 'Why did you not report the last incident of physical \/ sexual attack or threat of violence to the police?')]\n\n# Create a WorldCloud (the bigger the fontsize the more the word appears)\n\nfrom wordcloud import WordCloud, ImageColorGenerator\ntext = list(set(Violence_Why['answer']))\nplt.rcParams['figure.figsize'] = (15,15)\nwordcloud = WordCloud(max_font_size=50, \n                      max_words=100,\n                      background_color=\"black\").generate(str(text))\n\nplt.imshow(wordcloud,interpolation=\"bilinear\")\nplt.title('Why incidents are not reported', fontsize=20)\nplt.axis(\"off\")\nplt.show()","2d3543f7":"### The results from discrimination at various places in everyfay life are a bit more encouraging as the 'No' answers are greater than the 'Yes' answers. (Clicking on Countries shows data for each country separately)","90298a79":"### Most incidents seem to take place in public, in clubs and on the streets.","02c9f1bc":"## 3D Regression Surface for ILGA and GTI index vs TIMBRO (Far Right Votes)\n\n\n### We will visualize the decision plane of our model as we have more than one variable in our input data. Here, we will use sklearn.svm.SVR, which is a Support Vector Machine (SVM) model specifically designed for regression.","c5f6ad95":"### Many people don't report sexual incidents and if they do they will prefer to report it to an LGBT organisation.","301e7461":"## Import Libraries","cbcae158":"### Most harassment are of sexual, violent or physical form but also of verbal, indicating that the issue of sexual incidents has to be taken seriously.","dca5261c":"### Most people have replied 'Never' when asked if they have experienced negative comments. Still, the 'Always' answers are many indicating that people are divided on the matter. (Clicking on Countries shows data for each country separately)","ec4d0e70":"### Once again the survey show divided people are on the matter as both 'No' and 'Yes' answers are many. (Clicking on Countries shows data for each country separately)","36598f76":"# Load Data","e5d662a2":"### It seems that Fear, Shame, Family, Embarassment and Not Believing are the major reasons incidents of Sexual Harassment are not reported.","0f88f98b":"### Putting all the data together, ILGA & GTI vs TIMBRO, it can be seen that as ILGA increases TIMBRO decreases; something that can be seen from the Surface entailed through a Support Vector Machine. Also the scatter points indicate that the same is true for the GTI index.","502524de":"## Far-Right vs Gay Travel Index\n\n### We plot a scatter plot of GTI vs Happiness Score and fit an Ordinary Least Square Regression Trendline to see any correlation.","17677b31":"## Lesbian, Gay, Bisexual, Trans and Intersex Association (ILGA) vs Far-Right (TIMBRO)","22cf8d02":"# Populism and Gay Tolerance","5801c2c3":"### The majority of perpatrators in sexual and physical harassment is of Male gender.","852bd01c":"### The Far Right seems to hold the largest shares in parliament in countries that have low Gay Travel indices, for example Hungary.\n### R-Squared = 0.088469\n","54da9aef":"### The results from the 'Discrimination at employemnt' data are inconclusive as most answers are at the same levels. (Clicking on Countries shows data for each country separately)","b0b87065":"### It seems that inappropriate curiosity is by far the most important problem for the LGBT community when trying to access the healthcare system. Also the 'None of the above' incidents indicate that there may be issues that need to be addressed that remain unknown. (Clicking on Countries shows data for each country separately)","2a3bba0e":"### There appears to be a small correlation between ILGA and TIMBRO indices as countries with high ILGA have a lower Far-Right popularity, still this does not apply for all countries as there are cases where low ILGA indices are accompanied with low TIMBRO indices.\n### R-Squared = 0.067413","fb94c4e6":"# Gay Tolerance and Sexual Harassment","c846c3c7":"# LGBT Survey - Populism and Gay Tolerance\n\n\n<b>Tasks:<\/b>\n   <li><b>Exploratory Data Analysis\n   <li><b>Graph and Analyze<\/b>\n<p style=\"text-indent: 5px;\"> \n<p style=\"text-indent: 5px;\"> \n    \n<b>The project has the following DataSets, related to LGBTQI:<\/b>\n   <li><b>Kaggle Set - LGBTQI Violence and Harassment\n   <li><b>ILGA Europe Index<\/b>\n   <li><b>GTI Index<\/b>\n   <li><b>HDI\n   <li><b>Happiness Score<\/b>\n   <li><b>Populism Index in EU<\/b>      \n<p style=\"text-indent: 5px;\"> \n<p style=\"text-indent: 5px;\"> \n    \n<b>Topics to Cover:<\/b>\n   <li><b>T-Test\n   <li><b>Chi-Square \/ Goodness of Fit<\/b>\n   <li><b>ANOVA<\/b>       \n<p style=\"text-indent: 5px;\"> \n<p style=\"text-indent: 5px;\">        \n       \n\n<b>Scope:<\/b>\n   <li><b>Compare the sets against different variables to find correlations.   \n<p style=\"text-indent: 5px;\"> \n<p style=\"text-indent: 5px;\">    \n    \n<b>Hypothesis Definition:<\/b>\n   <li><b>EU Countries with a higher percentage gain of populism vote share have a lower GTI \/ ILGA Score.  \n<p style=\"text-indent: 5px;\"> \n<p style=\"text-indent: 5px;\">       \n    \n       \n<b>CONTENTS:<\/b>\n   <li><b>1. Load Data\n   <li><b>2. Populism and Gay Tolerance<\/b>\n   <li><b>3. Gay Tolerance and Sexual Harassment\n   <li><b>4. \n<p style=\"text-indent: 5px;\">  \n<p style=\"text-indent: 5px;\">\n    \n<\/span>\n"}}