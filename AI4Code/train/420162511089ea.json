{"cell_type":{"ad0ed187":"code","d1d39dea":"code","92551eef":"code","77b5ac69":"code","22a9e314":"code","0beba89a":"code","08abcf91":"code","124d9a23":"code","037e8a08":"code","3a43fc57":"code","bc558840":"code","7c87e02a":"code","8b6fe6a9":"code","4886a843":"code","2438ecfb":"code","712b665b":"code","049dfbb8":"code","664154b6":"code","744b26a4":"code","437a6cc9":"code","766187e2":"code","c1cb634b":"markdown","077e6d10":"markdown","3e9e9ba1":"markdown","46f2e200":"markdown","591d8f7a":"markdown","0ebb0629":"markdown","97100227":"markdown","4ef7e0b4":"markdown","56a0cd81":"markdown","a583daff":"markdown","39944aee":"markdown","badb1b96":"markdown","a1e0b9f1":"markdown","4d81b863":"markdown","dbadb264":"markdown","59fc45d0":"markdown","2da4852b":"markdown","dacb5e1a":"markdown"},"source":{"ad0ed187":"# for basic mathematics operation \nimport numpy as np\nimport pandas as pd\nfrom pandas import plotting\nimport datetime\n\n# for visualizations\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('fivethirtyeight')\nimport datetime as dt\nimport missingno as msno\n\n# for interactive visualizations\nimport plotly.offline as py\nfrom plotly.offline import init_notebook_mode, iplot\nimport plotly.graph_objs as go\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\nfrom plotly import tools\ninit_notebook_mode(connected = True)\nimport plotly.figure_factory as ff\nimport cufflinks as cf\ncf.go_offline()\ncf.set_config_file(offline=False, world_readable=True)\n\n#Word Cloud\nfrom PIL import Image\nimport requests\nfrom io import BytesIO\nfrom wordcloud import WordCloud\nfrom wordcloud import ImageColorGenerator\nfrom textblob import TextBlob\n\n#Map\nimport geopandas as gpd\nimport geopy\nfrom geopy.geocoders import Nominatim\nfrom geopy.extra.rate_limiter import RateLimiter\nimport tqdm\nfrom tqdm import tqdm\nfrom tqdm.notebook import tqdm_notebook\n\n# for path\nimport os\nprint(os.listdir('..\/input\/'))","d1d39dea":"# importing the dataset\ndata = pd.read_csv('..\/input\/us-police-shootings\/shootings.csv')\ndat = ff.create_table(data.head())\n#py.iplot(dat)\ndat.update_layout(autosize=False,height=200, width = 2000)","92551eef":"#removing name and id column\ndata.drop(['id', 'name'], axis = 1, inplace = True)\ndata['date'] = pd.to_datetime(data.date)\ndata['day_sent'] = data['date'].dt.strftime('%a')\ndata['month_sent'] = data['date'].dt.strftime('%b')\ndata['year_sent'] = data['date'].dt.year\ndata['count'] = 1\n\ndat = ff.create_table(data.head())\ndat.update_layout(autosize=False,height=200, width = 2200)","77b5ac69":"#check na's\nmsno.matrix(data) #no missing values in Dataframe","22a9e314":"years = [2015,2016,2017,2018,2019,2020]\narms = data['arms_category'].unique().tolist()\ngrouped_by_year_and_arms = data.groupby(['year_sent',\n                                        'arms_category']).sum().reset_index()[['year_sent', 'arms_category', 'count']]","0beba89a":"fig = make_subplots(rows=3, cols=3, shared_yaxes=True, subplot_titles=(\"2015\", \"2016\", \"2017\", \"\", \"\", \"\" , \"2018\", \"2019\", \"2020\"))\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2015]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2015]['count'].tolist(), \n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2015]['count'].tolist(), coloraxis=\"coloraxis\")), 1,1)\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2016]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2016]['count'].tolist(),\n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2016]['count'].tolist(), coloraxis=\"coloraxis\")), 1,2)\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2017]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2017]['count'].tolist(),\n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2017]['count'].tolist(), coloraxis=\"coloraxis\")), 1,3)\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2018]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2018]['count'].tolist(),\n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2018]['count'].tolist(), coloraxis=\"coloraxis\")), 3,1)\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2019]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2019]['count'].tolist(),\n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2019]['count'].tolist(), coloraxis=\"coloraxis\")), 3,2)\n\nfig.add_trace(go.Bar(x = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2020]['arms_category'].tolist(),\n                     y = grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2020]['count'].tolist(),\n                     marker=dict(color=grouped_by_year_and_arms[grouped_by_year_and_arms['year_sent'] == 2020]['count'].tolist(), coloraxis=\"coloraxis\")), 3,3)\n\nfig.update_layout(coloraxis=dict(colorscale='Bluered_r'), showlegend=False, title_text='Arms Used By Victims (2015-2020):')\nfig.show()","08abcf91":"labels = ['Male', 'Female']\nsize = data['gender'].value_counts()\ncolors = ['seagreen', 'crimson']\nexplode = [0, 0.1]\n\nplt.rcParams['figure.figsize'] = (6, 6)\nplt.pie(size, colors = colors, explode = explode, labels = labels, shadow = True, autopct = '%.2f%%')\nplt.title('Gender', fontsize = 20)\nplt.axis('off')\nplt.legend()\nplt.show()","124d9a23":"#AGE\ndata['age'].iplot(kind = \"hist\",barmode= 'overlay',\n                  xTitle = \"Age\", title='Age Distribution', bins = 50, colors = 'crimson')","037e8a08":"locator = Nominatim(user_agent=\"myGeocoder\", timeout=200)\ngeocode = RateLimiter(locator.geocode, min_delay_seconds=1)\ntemp_data = data[['city','count']]\ntemp_data = temp_data.groupby('city').agg({'count': 'sum'})\ngeocode","3a43fc57":"temp_data.reset_index(inplace = True)\ntqdm.pandas()\ntemp_data['location'] = temp_data['city'].progress_apply(geocode)\ntemp_data['point'] = temp_data['location'].apply(lambda loc: tuple(loc.point) if loc else None)\ntemp_data[['latitude', 'longitude', 'altitude']] = pd.DataFrame(temp_data['point'].tolist(), index=temp_data.index)","bc558840":"#graph total\ndata_graph = go.Scattergeo(lon = temp_data['longitude'], lat = temp_data['latitude'],\n                           text = temp_data[['city', 'count']], mode = 'markers', \n                           marker = dict(symbol = 'star',size = 5,colorscale = 'Blackbody'),\n                           marker_color = temp_data['count'])\n\nlayout = dict(title = 'Plot of suffered cities (Worldwide)')\n\nchoromap = go.Figure(data = [data_graph],layout = layout)\niplot(choromap)","7c87e02a":"#Graph (USA)\ntemp_data['text'] = temp_data['city'] + '<br>Shootings: <\/br>' + (temp_data['count']).astype(str)\n\nlimits = [(0,10),(10,20),(20,40),(40,70),(70,100)]\ncolors = [\"royalblue\", \"lightgrey\", \"orange\", \"seagreen\", \"crimson\"]\ncities = []\nscale = 30\n\nfig = go.Figure()\n\nfor i in range(len(limits)):\n    lim = limits[i]\n    df_sub = temp_data[lim[0]:lim[1]]\n    fig.add_trace(go.Scattergeo(\n        locationmode = 'USA-states',\n        lon = df_sub['longitude'],\n        lat = df_sub['latitude'],\n        text = temp_data['text'],\n        marker = dict(\n            size = df_sub['count'] * scale,\n            color = colors[i],\n            line_color='rgb(40,40,40)',\n            line_width=0.5,\n            sizemode = 'area'\n        ),\n        name = '{0} - {1}'.format(lim[0],lim[1])))\n\nfig.update_layout(\n        title_text = '2015-2020 USA Shootings. <br>(Click legend to toggle traces)<\/br>',\n        showlegend = True,\n        geo = dict(\n            scope = 'usa',\n            landcolor = 'rgb(51, 48, 48)',\n        )\n    )\n\nfig.show()","8b6fe6a9":"race_data=data['race'].value_counts().to_frame().reset_index().rename(columns={'index':'race','race':'count'})","4886a843":"fig = go.Figure(go.Funnel(y = race_data['race'].tolist(),\n                          x = race_data['count'].tolist(), \n                          marker = {\"color\": ['deepskyblue', 'MediumPurple',\n                                              'teal', 'grey', 'lightsalmon',\n                                              'midnightblue'], \n                                    \"line\": {\"color\": [\"wheat\", \"blue\", \"wheat\", \"blue\", \"wheat\"], \n                                    \"width\": [0, 1, 5, 0, 4]}},\n                          textfont = {\"family\": \"Old Standard TT, serif\",\n                                      \"size\": 13, \"color\": \"black\"},\n                          opacity = 0.65))\nfig.update_layout(title = \"All Race People Killed In Every Region\", title_x = 0.5)\nfig.show()","2438ecfb":"#Race distribution by Age\ndata.pivot(columns='race', values='age').iplot(kind='box', yTitle='age', title='Race Distribution by Age')","712b665b":"#manner of death by police\nlabels = ['Shot', 'Shot and Tasered']\nsize = data['manner_of_death'].value_counts()\ncolors = ['salmon', 'MediumPurple']\nexplode = [0, 0.1]\n\nplt.rcParams['figure.figsize'] = (6, 6)\nplt.pie(size, colors = colors, explode = explode, labels = labels, shadow = True, autopct = '%.2f%%')\nplt.title('Manner Of Death', fontsize = 20)\nplt.axis('off')\nplt.legend()\nplt.show()","049dfbb8":"#total deaths\ntotal_shoot = data[data['count']==1].shape[0]\nfig = go.Figure(go.Indicator(mode = \"number\",\n                             value = total_shoot,\n                             title = {\"text\": \"Total No. Of Shootings.\",\n                                      \"font\" : {'color': 'Black', 'size': 50, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'Black', 'size': 100, 'family': 'Raleway'}},\n                             domain = {'x': [0,1], 'y': [0,1]}))\nfig.show()","664154b6":"data2015 = data[data['year_sent'] == 2015].shape[0]\ndata2016 = data[data['year_sent'] == 2016].shape[0]\ndata2017 = data[data['year_sent'] == 2017].shape[0]\ndata2018 = data[data['year_sent'] == 2018].shape[0]\ndata2019 = data[data['year_sent'] == 2019].shape[0]\ndata2020 = data[data['year_sent'] == 2020].shape[0]\n\n#int(data.loc[data['year_sent'] == 2015]['count'])\n\nfig = go.Figure()\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2015,\n                             title = {\"text\": \"2015\",\n                                      \"font\" : {'color': 'rgb(58, 171, 163)', 'size': 25, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(58, 171, 163)', 'size': 25, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 0}))\n\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2016,\n                             title = {\"text\": \"2016\",\n                                      \"font\" : {'color': 'rgb(41, 79, 150)', 'size': 33, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(41, 79, 150)', 'size': 33, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 1}))\n\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2017,\n                             title = {\"text\": \"2017\",\n                                      \"font\" : {'color': 'rgb(52, 150, 41)', 'size': 35, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(52, 150, 41)', 'size': 35, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 2}))\n\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2018,\n                             title = {\"text\": \"2018\",\n                                      \"font\" : {'color': 'rgb(246, 255, 8)', 'size': 47, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(246, 255, 8)', 'size': 50, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 3}))\n\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2019,\n                             title = {\"text\": \"2019\",\n                                      \"font\" : {'color': 'rgb(232, 139, 0)', 'size': 63, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(232, 139, 0)', 'size': 63, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 4}))\n\nfig.add_trace(go.Indicator(mode = \"number\",\n                             value = data2020,\n                             title = {\"text\": \"2020\",\n                                      \"font\" : {'color': 'rgb(0, 0, 0)', 'size': 66, 'family': 'Raleway'}},\n                             number = {'font': {'color': 'rgb(0, 0, 0)', 'size': 70, 'family': 'Raleway'}},\n                             domain = {'row': 0, 'column': 6}))\n\nfig.update_layout(grid = {'rows': 1, 'columns': 7, 'pattern': 'independent'})\nfig.show()","744b26a4":"groupedby_time = data.groupby('date').sum().reset_index()\n\nfig = px.line(groupedby_time, x = 'date', y = 'count', title='Timeline For The Shootings')\n\nfig.update_xaxes(\n    rangeslider_visible=True,\n    rangeselector=dict(\n        buttons=list([\n            dict(count=1, label=\"1m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=6, label=\"6m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=1, label=\"YTD\", step=\"year\", stepmode=\"todate\"),\n            dict(count=1, label=\"1y\", step=\"year\", stepmode=\"backward\"),\n            dict(step=\"all\")\n        ])\n    )\n)\nfig.show()","437a6cc9":"#year and months\nmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\nyears = [2015, 2016, 2017, 2018, 2019, 2020]\n\ngrouped_by_year_and_day = data.groupby(['year_sent',\n                                        'month_sent']).sum().reset_index()[['year_sent', 'month_sent', 'count']]\n\npt = grouped_by_year_and_day.pivot_table(index = 'year_sent',\n                                         columns = 'month_sent',\n                                         values = 'count').reindex(index = years, columns = months)\n\npt.iplot(kind='heatmap',colorscale=\"RdPu\", title=\"Heatmap of Shootings Count As Per Month And Year\")\n","766187e2":"data.rename(columns = {'year_sent': 'Year'}, inplace = True)\nfig = px.parallel_categories(data,dimensions = ['gender', 'race', 'signs_of_mental_illness', 'flee'],\n                             color = 'Year', color_continuous_scale=px.colors.sequential.Inferno,\n                             labels = {'gender': 'Gender', 'race': 'Humankind',\n                                       'signs_of_mental_illness': 'Mental Illness ?',\n                                       'flee': 'Flee ?'})\nfig.show()","c1cb634b":"# The End. \n# <font color='red'>Stay Home, Stay Safe!<\/font>","077e6d10":"# <font color='maroon'>Timeline<\/font>\n**Please feel free to scroll all over the timeline (2015-2020)**","3e9e9ba1":"# Introduction","46f2e200":"* **<font color='red'>July 2015<\/font>** - More people were shot and killed by on-duty police officers in July than in any other month so far in 2015. Of the 103 victims of fatal police shootings, only one was a woman \u2014 44-year-old Tamala Satre, a  white woman who was shot and killed July 23, 2015. [**Link**]('https:\/\/www.washingtonpost.com\/news\/post-nation\/wp\/2015\/08\/03\/police-shot-and-killed-more-people-in-july-than-any-other-month-so-far-this-year\/')\n\n* **<font color='red'>March 2016<\/font>** - Many people were killed by non-military law enforcement officers in the United States in March 2016, whether in the line of duty or not, and regardless of reason or method. [**Link**]('https:\/\/www.theguardian.com\/us-news\/2016\/dec\/29\/police-killed-2016-average')\n\n* **<font color='red'>July 2016<\/font>** - A suspect who was killed by police after snipers shot 12 Dallas officers. \"The suspect stated he wanted to kill white people, especially white officers,\" Brown said. \"The suspect stated that he was not affiliated with any groups and he stated that he did this alone.\" [**Link**]('https:\/\/www.nbcnews.com\/storyline\/dallas-police-ambush\/protests-spawn-cities-across-u-s-over-police-shootings-black-n605686')\n\n* **<font color='red'>Feb 2017<\/font>** - On February 22, at about 3:40, two troopers with the West Virginia State Police responded to a report of a man brandishing a large knife on Meadowfield Lane in Princeton. When the troopers arrived at the scene, they encountered Kyle Copson and in Kansas, 2 Indian engineers are shot dead. [**Link**]('https:\/\/www.nytimes.com\/2017\/02\/24\/world\/asia\/kansas-attack-possible-hate-crime-srinivas-kuchibhotla.html')\n\n* **<font color='red'>July 2017<\/font>** - A woman live-streaming the aftermath of a police shooting of her boyfriend, Philando Castile, and narrating the searing, bloody scene that was unfolding around her. [**Link**]('https:\/\/www.nytimes.com\/2017\/06\/16\/us\/police-shooting-trial-philando-castile.html')\n\n* **<font color='red'>Jan 2018<\/font>** - There was a high school in small-town Kentucky. On Monday, a school cafeteria outside Dallas and a charter school parking lot in New Orleans. And before that, a school bus in Iowa, a college campus in Southern California, a high school in Seattle. Gunfire ringing out in American schools used to be rare, and shocking. [**Link**]('https:\/\/www.nytimes.com\/2018\/01\/23\/us\/kentucky-school-shooting.html')\n\n* **<font color='red'>Mar 2018<\/font>** - Stephon Clark, the unarmed black man who was fatally shot last week by Sacramento police officers, was struck eight times, mostly in his back, according to an independent autopsy released Friday, raising significant questions about the police account that he was a threat to officers when he was hit. [**Link**]('https:\/\/www.nytimes.com\/2018\/03\/30\/us\/stephon-clark-independent-autopsy.html')\n\n* **<font color='red'>Dec 2019<\/font>** - Mission Local\u2019s Julian Mark is on the scene at 23rd and Mission, where, around 8:30 a.m., police shot a man multiple times. The witness says two officers chased the man about the intersection on foot. He said the officers pepper-sprayed the man and may have applied other less-lethal devices as well. [**Link**]('https:\/\/missionlocal.org\/2019\/12\/eyewitness-describes-troubling-police-shooting-at-23rd-and-mission\/')","591d8f7a":"**<font color='maroon'>Data Manipulation<\/font>**","0ebb0629":"# <font color='maroon'>Arms Categories<\/font>","97100227":"# <font color='maroon'>Geo Locations For All Shootings<\/font>","4ef7e0b4":"# <font color='maroon'>Importing Libraries<\/font>","56a0cd81":"**<font color='gold'>Observations<\/font>**","a583daff":"# <font color='maroon'>Total Deaths Till Now<\/font>","39944aee":"# <font color='maroon'>Missing Values<\/font>","badb1b96":"# <font color='maroon'>The Human Race<\/font>","a1e0b9f1":"# <font color='maroon'>HeatMap of Shootings(Month Vs Year)<\/font>","4d81b863":"# <font color='maroon'>Dataset<\/font>","dbadb264":"# <font color='maroon'>Manner Of Death<\/font>","59fc45d0":"# **RACISM**\n**As per Wikipedia, Racism is the belief that groups of humans possess different behavioral traits corresponding to physical appearance and can be divided based on the superiority of one race over another. It may also mean prejudice, discrimination, or antagonism directed against other people because they are of a different race or ethnicity. Modern variants of racism are often based in social perceptions of biological differences between peoples. These views can take the form of social actions, practices or beliefs, or political systems in which different races are ranked as inherently superior or inferior to each other, based on presumed shared inheritable traits, abilities, or qualities.**\n![](https:\/\/media.istockphoto.com\/vectors\/elimination-of-racial-discrimination-stock-illustration-no-to-racism-vector-id1210125694?k=6&m=1210125694&s=612x612&w=0&h=7Pfbwr3NLr4sfHjW1ddwA_EnqzVZc6T876-gZt-hO6Q=)\n\nWe will deep dive into the dataset and find insights. I also provided the news channels links for massive shootings which occured during that period. And yes if you like it, please appreciate me with an <font color='red'><b>Upvote<\/b><\/font>.\n","2da4852b":"# <font color='maroon'>Short And Sweet Summary<\/font>","dacb5e1a":"# <font color='maroon'>Gender Ratio<\/font>"}}