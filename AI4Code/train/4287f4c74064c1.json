{"cell_type":{"5f1d4620":"code","cfac5baf":"code","2b4a7774":"code","e1b8491b":"code","27caf162":"code","43d3f22c":"code","930f9e8a":"code","6094ecb0":"code","db70807c":"code","c78f2b90":"code","9237a205":"code","226837b7":"code","48722728":"code","069a09fc":"code","0d00b4d7":"code","e6abd7c5":"code","a9d10416":"code","73e4e722":"code","9e6d100b":"code","161a3f82":"code","2fdafa7c":"code","7319f7b1":"code","46e54fa3":"code","7ba789e6":"code","74ed38ea":"code","2064b89d":"code","c5904e9f":"markdown","2f111018":"markdown","7578ba47":"markdown","e1aecf17":"markdown","48e12ff7":"markdown","43999b59":"markdown","c726cb05":"markdown","5e197188":"markdown","ad8c54d9":"markdown","d586deb2":"markdown","9110f270":"markdown","c49009f9":"markdown","59c90982":"markdown","f5b6b09c":"markdown","2bccde23":"markdown","414cc5f4":"markdown","5666915d":"markdown","23d13b70":"markdown","7c3f29b1":"markdown","43aaaf6f":"markdown","ecb00dd2":"markdown","bdd84507":"markdown","5cf2ac98":"markdown","228b2673":"markdown","9ca9014f":"markdown","f20762aa":"markdown","ed9a0a0c":"markdown","216a7800":"markdown","bb806de6":"markdown"},"source":{"5f1d4620":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cfac5baf":"!pip install chart_studio","2b4a7774":"!pip install joypy","e1b8491b":"import pandas as pd\nimport pandas.util.testing as tm\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os \nimport folium\nfrom folium import plugins\nimport rasterio as rio\nfrom rasterio.warp import calculate_default_transform, reproject, Resampling\nimport plotly.figure_factory as ff\nimport plotly.tools as tl\nimport chart_studio.plotly as py\nimport chart_studio\nimport os\nimport tarfile\nfrom six.moves import urllib\nfrom bokeh.io import output_file, output_notebook, show\nfrom bokeh.models import (\n  GeoJSONDataSource, GMapOptions, GMapPlot, ColumnDataSource, Circle,CircleX,Hex, Square, Patches, LabelSet, HoverTool,Legend, LegendItem, Plot, LinearAxis, Grid, LogColorMapper, LinearColorMapper, ColorBar, BasicTicker,\n  TapTool,Range1d, PanTool, WheelZoomTool, BoxSelectTool,OpenURL, ZoomInTool, ZoomOutTool, Arrow, OpenHead, NormalHead, VeeHead, LabelSet, Label\n)\nfrom bokeh.models.mappers import ColorMapper, LinearColorMapper\nfrom bokeh.palettes import Viridis5\nimport plotly_express as px","27caf162":"df=pd.read_csv('..\/input\/chicago-airbnb-open-data\/listings.csv')\ndf.head()","43d3f22c":"print('Data shape',df.shape)\ndf.info()","930f9e8a":"df.describe().transpose()","6094ecb0":"df=df.drop(columns=['neighbourhood_group'])\ndf = df.fillna(0)","db70807c":"df.sort_values(by=['price'],ascending=False).head(60)","c78f2b90":"df=df[df['price']<7000]\ndf=df[df['minimum_nights']<30]","9237a205":"df.info()\n#check again","226837b7":"import matplotlib.mlab as mlab \nfrom scipy.stats import norm\n\nplt.figure(figsize=(8,6))\n\n# Mean distribution\nmu = df['price'].mean()\n\n# Std distribution\nsigma = df['price'].std()\nnum_bins = 100\n\nnum_bins = 100\n# the histogram of the data  \nn, bins, patches = plt.hist(df['price'], num_bins, density = True,\n                           edgecolor = 'black', lw = 1, alpha = .40)  \n# add a 'best fit' line'density=1'\ny = norm.pdf(bins, mu, sigma)  \nplt.plot(bins, y, 'r--')  \nplt.xlabel('Price')  \n\n# Tweak spacing to prevent clipping of ylabel  \nplt.subplots_adjust(left=0.15)  \nplt.grid()\nplt.show()\n\ndf.describe()[['price']].transpose()","48722728":"df['log_price'] = np.log(df['price'].values + 1)\nplt.hist(df['price'].values, bins=100)\nplt.xlabel('log(price)')\n#plt.ylabel('number of')\nplt.show()\nsns.distplot(df[\"price\"], bins =100)","069a09fc":"import joypy\n# Draw Plot\nfig, axes = joypy.joyplot(df, column=['price'], by=\"neighbourhood\", ylim='own', figsize=(10,20))\n\n# Decoration\nplt.title('Pirce distribution by neighborhood')\nplt.show()","0d00b4d7":"neigh_list=list(df['neighbourhood'].unique())\naverage_price=[]\n\nfor i in neigh_list:\n    x=df[df.neighbourhood==i]\n    neigh_average=sum(x.price)\/len(x)\n    average_price.append(neigh_average)\n\ndf1=pd.DataFrame({'neigh_list':neigh_list,'average_price':average_price})\nnew_index=df1.average_price.sort_values(ascending=False).index.values\nsorted_data=df1.reindex(new_index)\n\nplt.figure(figsize=(10,20))\nax=sns.barplot(x=sorted_data.average_price,y=sorted_data.neigh_list)","e6abd7c5":"df.loc[df['neighbourhood']=='West Englewood']","a9d10416":"df = df.drop(df[(df.neighbourhood=='West Englewood') & (df.price==1500)].index)\nneigh_list=list(df['neighbourhood'].unique())\naverage_price=[]\n\nfor i in neigh_list:\n    x=df[df.neighbourhood==i]\n    neigh_average=sum(x.price)\/len(x)\n    average_price.append(neigh_average)\n\ndf1=pd.DataFrame({'neigh_list':neigh_list,'average_price':average_price})\nnew_index=df1.average_price.sort_values(ascending=False).index.values\nsorted_data=df1.reindex(new_index)\n\nplt.figure(figsize=(10,20))\nax=sns.barplot(x=sorted_data.average_price,y=sorted_data.neigh_list)","73e4e722":"neigh_list=list(df['neighbourhood'].unique())\nreview=[]\n\nfor i in neigh_list:\n    x=df[df.neighbourhood==i]\n    review_sum=sum(x.number_of_reviews)\n    review.append(review_sum)\n    \ndf2=pd.DataFrame({'neigh_list':neigh_list,'review':review})\nnew_index2=df2.review.sort_values(ascending=False).index.values\nsorted_data2=df2.reindex(new_index2)\n\nplt.figure(figsize=(10,20))\nax2=sns.barplot(x=sorted_data2['review'],y=sorted_data2.neigh_list)\n\nplt.xticks(rotation=90)\nplt.ylabel('Neighborhood')\nplt.xlabel('Review number')\nplt.title('Review numbers of Airbnb in Chicago by Neighborhood')","9e6d100b":"x1=pd.DataFrame(df['neighbourhood'].unique())\nx2=pd.DataFrame(df['number_of_reviews'].groupby(df['neighbourhood']).sum())\nx3=pd.DataFrame(df['price'].groupby(df['neighbourhood']).mean())\nrela_list=pd.concat([x2,x3],axis=1)\n\ndf3=pd.DataFrame({'price':rela_list.price,'review':rela_list.number_of_reviews})\nnew_index3=df3.price.sort_values(ascending=False).index.values\nsorted_data3=df3.reindex(new_index3)\n\nsorted_data3.reset_index(level=0, inplace=True)\nsorted_data3","161a3f82":"import matplotlib.pyplot as plt\nimport numpy as np\n\nfig = plt.figure(figsize=(10,20))\n\nax1 = fig.add_subplot(111)\nax1.plot(sorted_data3.price,sorted_data3.neighbourhood,'b',alpha=0.6)\nax1.set_xlabel('Average price')\n\nax2 = ax1.twiny()  # this is the important function\nax2.plot(sorted_data3.review,sorted_data3.neighbourhood,'r',alpha=0.6)\nax2.set_xlabel('Review Number')\n\nax1.set_ylabel('Neighborhood')\nplt.grid(axis='both',which='major',linestyle='-.')\nplt.xticks(rotation=90)","2fdafa7c":"fig=px.scatter(df, x='price', y='number_of_reviews',\n           color='neighbourhood',size='number_of_reviews',size_max=30)\nfig.update_layout(autosize=False,width=900,height=800)\nfig","7319f7b1":"# Create boxplot\nplt.figure(figsize=(10,20))\nvendor_graph = sns.boxplot(x = 'price', y = 'neighbourhood', data = df,\n                           color = 'lightgrey', linewidth = 2.3)\nplt.setp(vendor_graph.artists, alpha = 0.5)\n\n# Create strip plot\nsns.stripplot(data = df, x = 'price', y = 'neighbourhood', jitter = 1, size = 5,\n              edgecolor = 'black', linewidth = .2, palette = 'gist_rainbow_r',hue = 'room_type')\n\n# Remove the label of the x-axis\nvendor_graph.xaxis.label.set_visible(False)\nvendor_graph.yaxis.label.set_visible(False)\n\n# Statistical summary\ndf.groupby(['neighbourhood','room_type'])['room_type'].count().unstack().fillna(0)","46e54fa3":"# Register for a Plotly account at https:\/\/plot.ly\/feed \u2013 click on \u201csign up.\u201d \n# Generate an API key at https:\/\/plot.ly\/settings\/api \u2013 copy and paste the \u201cAPI Key\u201d and \u201cUsername\u201d fields to the Jupyter Notebook in the appropriate place. \n\nchart_studio.tools.set_credentials_file(username='BONNIEJIN095', api_key='xyfJTwbsthZze1ZNaSkd')\n\nsort=df.sort_values(by=['number_of_reviews'])\nnewdata = sort.iloc[0:200, [0,4,5,6]]\nnewdata=pd.DataFrame(newdata)\n\ntable = ff.create_table(newdata)\npy.iplot(table, filename='Airbnb Location')","7ba789e6":"m = folium.Map(location=[41.9, -87.6],zoom_start=11)\n\nsite_lon=newdata.longitude\nsite_lat=newdata.latitude\nlocations_name=newdata.neighbourhood\n\nfeature_group = folium.FeatureGroup() \n\nfor lat, lng, name in zip(site_lat,site_lon,locations_name): \n    #feature_group.add_child(\n    folium.Marker(\n    location=[lat,lng],\n    popup=name,\n    icon=folium.Icon()\n        ).add_to(m)\n\nm.add_child(feature_group)","74ed38ea":"df.plot(kind=\"scatter\", x=\"longitude\", y=\"latitude\",\n    s=df['number_of_reviews']\/3, label=\"reviews\",\n    c=\"number_of_reviews\", cmap=plt.get_cmap(\"jet\"),\n    colorbar=True, alpha=0.3, figsize=(10,8),\n)\nplt.legend()\nplt.show()","2064b89d":"map_options = GMapOptions(lat=41.9, lng=-87.6, map_type=\"roadmap\", zoom=11)\nplot = GMapPlot(x_range=Range1d(), y_range=Range1d(), map_options=map_options)\n\n# For GMaps to function, Google requires you obtain and enable an API key:\n#https:\/\/developers.google.com\/maps\/documentation\/javascript\/get-api-key\n# Replace the value below with your personal API key:\nplot.api_key = \"AIzaSyBpTpQ_6Lbh5u1zKhwZvAvM_v3VuLlqqUk\"\n\nsource = ColumnDataSource(\n    data=dict(\n        lat=df.latitude.tolist(),\n        lon=df.longitude.tolist(),\n        size=(df['number_of_reviews']\/15).tolist(),\n        color=df.number_of_reviews.tolist()\n    ))\n\ncolor_mapper = LinearColorMapper(palette=Viridis5)\n\ncircle = Circle(x=\"lon\", y=\"lat\", size=\"size\", fill_color={'field': 'color', 'transform': color_mapper}, fill_alpha=0.5, line_color=None)\nplot.add_glyph(source, circle)\n\ncolor_bar = ColorBar(color_mapper=color_mapper, ticker=BasicTicker(),\n                     label_standoff=12, border_line_color=None, location=(0,0))\nplot.add_layout(color_bar, 'right')\n\nplot.add_tools(PanTool(), WheelZoomTool(), BoxSelectTool())\n#output_file(\"gmap_plot.html\")\noutput_notebook()\n\nshow(plot)","c5904e9f":">>\nNow you can check every single stay,\n>>\nThe bigger circle stand for more reviews,\n>>\nDifferent color stand for different areas.","2f111018":">>\n### price\n>>\nAlthough there will be some hotel or house super expensive, but the price over 7000 dollars for a private room still seems abnoraml, so I will remove it. I believer price under 3500 is kinda fair, probably someone has a 6-bedroom ocean view luxury house.\n>>\n### minimun_nights\n>>\nThe minimum higher than 30 nights also looks not reasonable, normally the minmum stay will be 2 nights, there has some possible reason that the landlord only do monthly rent, but more than 30 days is not likely happen, so I will also remove that.","7578ba47":"### References\n\nhttps:\/\/www.kaggle.com\/jinbonnie\/data-visualization-basic-and-not-basic\n\nhttps:\/\/www.kaggle.com\/rishpande\/avocado-prices-data-visualization-beginner\n\nhttp:\/\/liyangbit.com\/pythonvisualization\/matplotlib-top-50-visualizations\/#26-%E7%AE%B1%E5%BD%A2%E5%9B%BE-box-plot\n\nhttps:\/\/www.earthdatascience.org\/courses\/scientists-guide-to-plotting-data-in-python\/plot-spatial-data\/customize-raster-plots\/interactive-maps\/\n\nhttps:\/\/www.sitstars.com\/archives\/84\/\n\nhttps:\/\/www.kaggle.com\/caniban\/bar-chart-race-with-matplotlib\n\nhttps:\/\/www.zhihu.com\/question\/33783546","e1aecf17":">>\nIt pretty reasonable the private room is cheaper than entire home\/apt\n>>\nWe can also see the centre area has more options, \n>>\nmost price is under 500 as we expect, some area has really expensive options","48e12ff7":"### Price and Reviews by Neighborhood\n>>\nWe have discussed the price and reviews by Neighborhood speratelly, what if I put two parameters together?\n>>\nI will put two line on the same plot, to see if they have samiliar trend\n>>\nRed line stand for the review number and blue one the for the average price","43999b59":">>\nChecking the outliers:","c726cb05":"### Review numbers by Neighborhood\n>>\nBy count the review numbers, we can know which neighborhood has be reserved the most\n>>\nWhich can also show which neighborhood is popular in the Chicago","5e197188":"### Price, review and Neighborhood on interactive plot\n>>\nWe can also put all those three features on the same interactive plot\n>>\nWhich allow you to check the situation of every signle stay\n>>\nI'm going to draw a plot based on the review numbers, which also can stand for the popularity","ad8c54d9":"### Check all the stays on the map\n>>\nIf you still want to see how all the stays located on the map:\n>>\nBokeh supports geographic visualization of Google maps and GeoJSON data. The key is dynamic interaction.\n>>\nI'm going to plot the stays on a blank canvas,\n>>\nthen I'll put it on the google map","d586deb2":">>\nYou can basically say it looks like Chicago(well, beacuse you know where we are talking about)\n>>\nLet us make this more clearly, to put it on a map, let everyone know where it is:","9110f270":"### Conclusion\n>>\nHere are some basic data processing and plot for this dataset\n>>\nProbably can give you some advice for your trip to Chicago","c49009f9":">> \nNow it looks better more reasonable, accroding to Wikipedia,the northernmost of the three areas that constitute central Chicago is Near North Side, Loop and the Near South Side.\n>>\nNorth side is one of the best area you can visit in Chicago\uff0cof the downtown community areas, the Near North Side has the second-largest total area after the Near West Side, the second highest number of skyscrapers (after the Loop) and the largest population.\n>>\nLoop is the central business district of the city and is the main section of Downtown Chicago. Home to Chicago's commercial core, it is the second largest commercial business district in North America and contains the headquarters and regional offices of several global and national businesses, retail establishments, restaurants, hotels, and theaters, as well as many of Chicago's most famous attractions.","59c90982":"### Average price by neighborhood\n\n>>\nBased on different area, the price will be different,\n>>\nso which area will have the highest price? Or where is the lowest price area?","f5b6b09c":">>\nWe can also use joyplot to show the price distrobution by neighbourhood","2bccde23":">>\nSome area has wider range and some area is more narrow","414cc5f4":">>\nNow you can see where will be the most popular area in the Chicago on Airbnb!\n>>\nAlso about \"For development purposes only\", apperantly, Google Maps is no longer free. You have to associate a credit card so that you can get billed if your site has requests that exceed the 200 dollars credit they give you monthly for free. That is why I get the watermarked maps.","5666915d":">>\nIt's kinda surprising that the highest price is in west Englewood, \n>>\naccording to the report, is not a popular area to visit, \n>>\nso I'm going to check what happened there:","23d13b70":"### Import Dataset and pre-processing\n>>\nI'm going to\n>>\n* remove NaN column\n* replace NaN data\n* remove outliers","7c3f29b1":">>\nSeems the price is really concetrate on a specific range, about 100-250 dollars\n>>\nthe average price will be 141 dollars per night,\n>>\nwhich is seems a fair price for a big city","43aaaf6f":"### Import libraries","ecb00dd2":">>\nIt's actually make sense that the most expensive place has the most review,\n>>\nbut the places also has fair location with fair price are more popular,\n>>\nespecially there will be more hotels in downtown area, people probably will not choose airbnb\n>>\nSo choose wisely next time you go there haha","bdd84507":">>\nIt seems due to one really high price and really less stays at West Englewood,\n>>\nthe average is really high,\n>>\nSo I'm going to remove this price and plot again","5cf2ac98":"## Chicago Airbnb\n\n*People love traveling(not during this pandemic time thought, please stay safe), and Airbnb can always offer different travel experiences for the travelers. I personally went to Chicago last year and used Airbnb found an amazing apartment to stay. So here are some dataset from Airbnb open data about the reservation in Chicago from 2017-2019\n\n\n**Columns Information**\n* id - The id of the airbnb\n* name - The name of the airbnb\n* host_id - The id of the host\n* host_name - The name of the host\n* neighborhood - Which area is the airbnb belongs to\n* latitude - The latitude of the position\n* longitude - The longitude of the position\n* room_type - Entire home\/apt, Private room or Other\n* price - The price of the apartment(per day)\n* minimum_nights - The least nights you need to book\n* numberofreviews - The total number of the reviews on this dataset\n* last_review - The last review time\n* reviewspermonth - How many reviews the airbnb can receive per month\n* calculatedhostlistings_count - The total listing number of the host\n* availability_365 - The available days\n\nI'm going to do some plots based on the dataset to see questions like:\n* Which neighborhood is the most popular neighborhood on Airbnb?\n* What kind of room type people resevered most?\n* What is the price range of airbnb in different neighborhood?\n\nAlso will include:\n* line, bar plot\n* interactive scatter plot\n* map and interactive map\n* joyplot","228b2673":"### The distribution of the price\n> > \nWhen you travel to somewhere, people will always consider the price of the stays.\n> > \nSo what are the price range in Chicago and what will be the distribution of it?\n>>\nAlso the average price?","9ca9014f":">>\nHere has a whole columns is NaN, I will remove it, \n>>\nAlso replace all the NaN data to 0","f20762aa":"> One of my assignment is to become an expert on Kaggle, so if possible, please give me advices or vote for my datasets\/notebooks, thank you so much:))))","ed9a0a0c":"### The room type\n>>\nAirbnb has different room types, you can have an entire place,\n>>\nbut you can also choose to stay with other people,\n>>\nBy knowing hat kind of room type is the most popluar room type,\n>>\n>you probably also can become a great airbnb host.","216a7800":"### Check some popular stays on the interactive map\n>>\nWe can use map to check where has the highest density.\n>>\nBecasue we have too many data, I'm going to pick top200 by review number\n>>\nI'm going to use Folium to do this:\n>>\nFolium is built on the data application capability of the Python ecosystem and the mapping capability of the.JS library to manipulate the data in Python and then visualize the folium in the map.","bb806de6":">>\nAs we can see, the review number increased with the average price increasing\n>>\nBetter location, higher price, more reservation.\n>>\nBut we can also noticed, the most reservation is around mid-price area,\n>>\nWhich we also discussed before"}}