{"cell_type":{"098732d4":"code","48fd1309":"code","191234ae":"code","36bebba9":"code","dbdb4e82":"code","6a05eb4c":"code","e83467b1":"code","b69b0358":"code","ec855b1e":"code","1fa986c4":"code","6dfda359":"code","91c690e7":"code","b1d738c4":"code","3e680dbd":"code","263fb8b5":"code","d1fe33a5":"code","95b0ded3":"code","9f684ea2":"code","7a062db6":"code","a6a5aeb7":"code","3c78bb5d":"code","93ad4d85":"code","82ae0be8":"code","53a74fdb":"code","c63a4e36":"markdown","54b17004":"markdown","d95b058f":"markdown","0281fde2":"markdown","c8043a96":"markdown","5fa88810":"markdown","a2be448f":"markdown"},"source":{"098732d4":"import pandas as pd\nimport numpy as np","48fd1309":"df = pd.read_csv('..\/input\/hr-analytics\/HR_comma_sep.csv')\ndf.head()","191234ae":"df[df['left']==1].shape[0] # No of employees lost by the company","36bebba9":"df[df['left']==0].shape[0] # No of employees retained by the company","dbdb4e82":"df.groupby('left').mean() ","6a05eb4c":"df2 = df[['left','salary']]\nleft = df2[df['left']==1].salary.value_counts()\nretained = df2[df['left']==0].salary.value_counts()\ncounts = {\"retained\":retained, \"left\":left}\ncounts = pd.DataFrame(counts)","e83467b1":"import matplotlib.pyplot as plt\n%matplotlib inline","b69b0358":"def stacked_chart(df, title):\n    fields = df.columns.tolist()\n    category = df.index.tolist()\n    ypos = np.arange(len(category))\n    colors = ['#1D2F6F', '#8390FA']\n    \n    print(df)\n    \n    # Stacked Bar Chart\n    # figure and axis\n    fig, ax = plt.subplots(1, figsize=(12, 10))\n\n    left = len(df)*[0]\n    for idx, name in enumerate(fields):\n        plt.barh(df.index,df[name],left=left, color=colors[idx])\n        left = left + df[name]\n    \n    # title, legend, labels\n    plt.title('Employee retention by salary', loc='left')\n    plt.legend(fields, bbox_to_anchor=([0.55, 1, 0, 0]), ncol=4, frameon=False)\n    plt.xlabel('No of Employees')\n    \n    # Stacked Percentage Bar Chart\n    \n    df['Total'] = df[fields].sum(axis=1)\n    idx = len(df.columns)\n    # create a column for each salary segment proportion of total\n    for i in fields:\n        df['{}_Percent'.format(i)] = df[i] \/ df['Total']\n\n\n    df_p = df[df.columns.tolist()[idx:]]\n    \n    title = 'Employee retention percentage salary-wise'\n    fields = df_p.columns.tolist() \n    # figure and axis\n    fig, ax = plt.subplots(1, figsize=(12, 10))\n\n    # plot bars\n    left = len(df_p) * [0]\n    for idx, name in enumerate(fields):\n        plt.barh(df_p.index, df_p[name], left = left, color=colors[idx])\n        left = left + df_p[name]\n        \n    # title\n    plt.title(title, loc='left')\n    \n    # format x ticks\n    xticks = np.arange(0,1.1,0.1)\n    xlabels = ['{}%'.format(i) for i in np.arange(0,101,10)]\n    plt.xticks(xticks, xlabels)\n    plt.show()\n","ec855b1e":"stacked_chart(counts,\"Employee retention: Salary-wise\")","1fa986c4":"df3 = df[['left','Department']]","6dfda359":"depts = df3.Department.unique().tolist()","91c690e7":"left = df3[df3['left']==1].Department.value_counts()\nretained = df3[df3['left']==0].Department.value_counts()\ndept_counts = pd.DataFrame({\"retained\":retained, \"left\":left})\ndept_counts","b1d738c4":"stacked_chart(dept_counts,\"Employee retention: department-wise\")","3e680dbd":"df1 = df[['salary','satisfaction_level', 'average_montly_hours', 'promotion_last_5years','left']]","263fb8b5":"df1","d1fe33a5":"dummies = pd.get_dummies(df1.salary)\ndummies","95b0ded3":"df1 = pd.concat([df1,dummies],axis = 'columns')","9f684ea2":"df1 = df1.drop(['salary','medium'],axis='columns')\ndf1","7a062db6":"from sklearn.model_selection import train_test_split","a6a5aeb7":" X_train, X_test, y_train, y_test = train_test_split(df1[['satisfaction_level', 'average_montly_hours', 'promotion_last_5years','high','low']],df1.left, test_size = 0.001,random_state = 1)","3c78bb5d":"X_test","93ad4d85":"from sklearn.linear_model import LogisticRegression\nmodel = LogisticRegression()","82ae0be8":"model.fit(X_train,y_train)","53a74fdb":"model.score(X_test,y_test)","c63a4e36":"### Department-wise employee retention rate","54b17004":"Based on the above observation:\n Parameters- satisfaction_level, average_monthly_hours and promotion_last_5years seem to have the most effect on retention rate","d95b058f":"### Employee retention salary-wise: Stacked Bar Chart","0281fde2":"Dataset is downloaded from Kaggle. Link: https:\/\/www.kaggle.com\/giripujar\/hr-analytics","c8043a96":"### Preliminary data exploration","5fa88810":"The above graph shows that attrition rate is higher in lower salary level.","a2be448f":"### Logistics Regression model"}}