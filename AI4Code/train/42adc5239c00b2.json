{"cell_type":{"0d2c6129":"code","e483143c":"code","ac8caf15":"code","d2cb5792":"code","3a5842fe":"code","b69ba024":"code","ba69ba9a":"code","28a4b466":"code","d1dc2d10":"code","24f2ddf9":"code","1562262e":"code","0692cee9":"code","b1f7ee13":"code","5c61b960":"code","8db9222d":"code","d959db4c":"code","ae793365":"code","a6e03969":"code","a75705e5":"code","95fc7e2b":"code","15c21814":"code","985f1697":"code","b5b2b979":"code","634b9097":"code","9d01044e":"code","30fe621e":"code","d75f858a":"code","166ce28f":"code","2894eeab":"code","89a16e8b":"code","630c803d":"code","4a9eff23":"code","64581f65":"code","f89cd1de":"code","50d473d0":"code","d9dd697d":"code","2dc0658d":"code","68b0aad3":"code","e5a0e085":"code","6d6fe909":"code","ec97844b":"code","b2116b34":"code","08771d62":"code","c800c83a":"code","23e84d58":"code","ac4f0c22":"code","65c9df5d":"code","2ca0d7ff":"code","5be121e7":"markdown","e32a8028":"markdown","b7d0865b":"markdown","9433fb86":"markdown","54b36222":"markdown","d1270e29":"markdown","f6e117f0":"markdown","f3848447":"markdown","d33a5c8e":"markdown","f694ca53":"markdown","b45c7b8e":"markdown","314a1d43":"markdown","75a1d277":"markdown","12d5a2aa":"markdown","c3f73e28":"markdown","aef92b1b":"markdown","2c72f5df":"markdown","4bde6216":"markdown","19f81396":"markdown","105496e7":"markdown","266afb0e":"markdown","9ad9552d":"markdown","74d43ff4":"markdown","16c79852":"markdown","3600df53":"markdown","3ad0c6ae":"markdown","f504fd87":"markdown","a03bb953":"markdown","0b81fa72":"markdown","5c2038b0":"markdown","3084bcc4":"markdown","5bb6f952":"markdown","4c470fdf":"markdown","d5ed4612":"markdown","0cb5d328":"markdown","d34b3f76":"markdown","71743fcd":"markdown","54d272fd":"markdown","f7629d8f":"markdown","0b91f4ad":"markdown","c89291c8":"markdown","48b54e19":"markdown","4f89f6cc":"markdown","f6a608ac":"markdown","5c766c17":"markdown","745ca9f6":"markdown","d260f965":"markdown","e0111903":"markdown","b6215f43":"markdown","ce708ea2":"markdown","46347e68":"markdown","97607b0a":"markdown","98e1263a":"markdown","652ebb19":"markdown","7477ba29":"markdown","1010f259":"markdown","ee5ffaa5":"markdown","c67bbbdc":"markdown","593565aa":"markdown","9c53b1b1":"markdown","3d3c348d":"markdown"},"source":{"0d2c6129":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n%matplotlib inline\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pylab as plt\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","e483143c":"train=pd.read_csv(\"\/kaggle\/input\/time-series-datasets\/Electric_Production.csv\")","ac8caf15":"train.head()","d2cb5792":"train.info()","3a5842fe":"train[\"DATE\"]=pd.to_datetime(train[\"DATE\"],infer_datetime_format=True)","b69ba024":"train=train.set_index(['DATE'])","ba69ba9a":"train.head()","28a4b466":"from matplotlib.pylab import rcParams\nrcParams['figure.figsize']=10,6\ntrain.plot()","d1dc2d10":"\nfrom statsmodels.tsa.seasonal import seasonal_decompose\nres= seasonal_decompose(train, model='multiplicative')\nres.plot()\nplt.show()","24f2ddf9":"train[\"IPG2211A2N\"].iloc[:60]","1562262e":"from statsmodels.tsa.stattools import adfuller","0692cee9":"def stest(x):\n    result = adfuller(x)\n    print(result[1])","b1f7ee13":"stest(train.iloc[:,0].values)","5c61b960":"len(train)\n","8db9222d":"a=[]\na.append(train[\"IPG2211A2N\"].iloc[0])\nfor i in range(396):\n     z=train[\"IPG2211A2N\"].iloc[i+1]-train[\"IPG2211A2N\"].iloc[i]\n     a.append(z)","d959db4c":"a[:5]","ae793365":"plt.plot(a)","a6e03969":"stest(a)","a75705e5":"t=train[\"IPG2211A2N\"].to_dict()\nx={}\nl=0\nfor i,j in t.items():\n       x.update({i:a[l]})\n       l=l+1\n   ","95fc7e2b":"xe=pd.Series(x)","15c21814":"plt.plot(xe)","985f1697":"from statsmodels.graphics.tsaplots import plot_acf,plot_pacf\nplot=plot_pacf(xe,lags=10)","b5b2b979":"acf_plot=plot_acf(xe,lags=10)","634b9097":"len(xe)","9d01044e":"xtrain=xe[0:330]\nxtest=xe[330:397]","30fe621e":"len(xtrain)","d75f858a":"xtrain.head()","166ce28f":"from statsmodels.tsa.arima_model import ARIMA","2894eeab":"xee=ARIMA(xtrain,order=(3,0,3))","89a16e8b":"ttt=xee.fit()","630c803d":"ttt.aic","4a9eff23":"tt=ttt.forecast(steps=67)[0]","64581f65":"tt[:10]","f89cd1de":"xtest.values[:10]","50d473d0":"xtest.size","d9dd697d":"xtest[0]","2dc0658d":"qqq=[]\na=0\nfor i in range(330):\n    a=a+xtrain[i]\n    qqq.append(a)","68b0aad3":"train[\"IPG2211A2N\"].iloc[335]","e5a0e085":"qqq[329]","6d6fe909":"def pv(web):\n        qqq=[]\n        a=101.4\n        for i in range(67):\n            a=a+web[i]\n            qqq.append(a)\n        return qqq","ec97844b":"\nqqqt=pv(xtest)","b2116b34":"qqqt[:10]","08771d62":"qqqf=pv(tt)","c800c83a":"qqqf[:5]","23e84d58":"from sklearn.metrics import mean_squared_error \nimport numpy as np","ac4f0c22":"error=mean_squared_error(qqqt,qqqf)","65c9df5d":"error","2ca0d7ff":"np.sqrt(error)","5be121e7":"Point to remember:Removing trend didnot mean that we should make the value constant for whole interval,it only means that the MEAN should be same for sub-interval in a interval","e32a8028":"# Lets visulize our data(before that we should understand following terms)","b7d0865b":"5-Mathematics curve-its mostly of a sin curve or a distorted sin curve","9433fb86":"3-Number of facebook users is increasing with time,so its a trend","54b36222":"In this problem statement we r only going to solve Electric_Production.csv","d1270e29":"If we subtract each two adjacent digit then our data will be:[2-1,4-3,5-4,6-5,7-6,8-7,9-8]:[1,1,1,1,1,1,1,1...]","f6e117f0":"4-so we can say that as time increasing ice cream sales also increasing because buyers are increasing and in summers it increases more due to seasonality effect","f3848447":"Now we will decompose the above visulization into trend and seasonality for more clear visulization","d33a5c8e":"we will use differencing method for removing trend and seasonality","f694ca53":"2-we can take example of facebook","b45c7b8e":"Our Data is Stationary","314a1d43":"> AR=3(most significant values)","75a1d277":"ARIMA-{AutoRegression}{Integrated}{Moving Average}","12d5a2aa":"2-World population is increasing every year(so its  trend)","c3f73e28":"# If u like this notebook plz UpVote it","aef92b1b":"# STEP3-REMOVE TREND TO MADE DATA STATIONARY","2c72f5df":"PACF=Partial auto correlation value is used to calculate AR value(when line is above blue region we will count those value and total will be our AR value for our ARIMA model)","4bde6216":"we r gonna solve time series problem","19f81396":"Train\/Test Split","105496e7":"Lets do adfuller on our dataset","266afb0e":"qqqt is our test data and qqqf is our forecast data now we are going to check accuracy using root mean squared error","9ad9552d":"3-We all eats ice-cream mostly in summers","74d43ff4":"3-In summers ice creams sells more than winter(its a seasonality)","16c79852":"2-In practical sense electric production is not increasing with time it is constant its does not have any seasonality effect","3600df53":"0.18621>0.05 data is non stationary","3ad0c6ae":"U can  also see that after every year at January the electric production increases","f504fd87":"0.0003875068","a03bb953":"step2:we have to remove the index,and made DATE as index","0b81fa72":"For eg.:\nif our data is like:[1,2,3,4,5,6,7,8,9]","5c2038b0":"In above eg. m(t) is present time and it clearly depends on lag of 1,lag of 3,lag of 4 time instant","3084bcc4":"# ARIMA","5bb6f952":"Lets make it stationary","4c470fdf":"# Trend","d5ed4612":"We clearly see their is a increasing trend","0cb5d328":"Lets compare our forecasted value but before that we have to convert those forecast value to their original format(to remove trend we have subtracted one value from other now we have to reverse that process to get original value back)","d34b3f76":"Great qqq[329]=101.14 we will use this value to find our forecast value and xtest value","71743fcd":"clearly 0.05>0.0003875068","54d272fd":"4-Mathematically-Means should be constant,standard deviation should be constant,auto-correlation should be same","f7629d8f":"Now lets go for adfuller test","0b91f4ad":"# STATIONARITY","c89291c8":"4-Number of people who uses Yahoo as their search engine are deacreasing,its also a trend but a decreasing trend","48b54e19":"3-Why requires?Just like data needs to be normalized,features needs to be scaled before sending to ML algorithms,similarly time series algorithms wants data to be stationary","4f89f6cc":"so we can say that its a yearly seasonality","f6a608ac":"Moving Average=It is calculated using Autocorrelation (when the line goes above blue region we will count them all the total will be our MA)","5c766c17":"Lets see the first 60 value of our data to understand seasonality more visually","745ca9f6":"we are counting most significant line MA=3)","d260f965":"Auto Regression=It simply means values at present time is dependent on which-which previous time instant","e0111903":"Residual means Noise","b6215f43":"# Seasonality","ce708ea2":"4-Therefore the sales of icecreams is increases mostly in summers and then drop down in winter(that what we called seasonality)","46347e68":"2-Lets understand by taking an example of icecream","97607b0a":"m(t)=Am(t-1)+Bm(t-3)+Cm(t-4)+....","98e1263a":"# Trend with seasonality\n","652ebb19":"Great our model is performing good with just a 5% error","7477ba29":"step1:we clearly see dtype of column DATE is object,we have to convert it into DATETIME","1010f259":"5-Mathematical Curve-it can be linear or damped or exponential","ee5ffaa5":"1-Data didnt have any trend and seasonality","c67bbbdc":"5-we r going to check it using adfuller test(p-value will be used as a distinguisher (if p-value>0.05=Non-Stationary,if p-value<0.05=Stationary)","593565aa":"We clearly see that their is an increasing trend and seasonality","9c53b1b1":"1-The increasing or decreasing value in the series","3d3c348d":"1-we can take example of ice cream sales"}}