{"cell_type":{"81c59cb8":"code","7b77911d":"code","683abc79":"markdown"},"source":{"81c59cb8":"# Importing all necessary libraries\nimport cv2\nimport os\n\n#Source of Video\nsrc = '..\/input\/capsicum-video-from-frame-extractor\/capsicum2.MOV'\n\n#Name of Folder in which frames will be stored\nveg = 'capsicum2'\ncap = cv2.VideoCapture(src)\n\n# frame\ncurrentframe = 0\ncount = 0\n\n#Name of Parent Folder\nif not os.path.exists('.\/New_Dataset\/'+ veg):\n    os.makedirs('.\/New_Dataset\/'+ veg)","7b77911d":"#Counts the total frames i.e. total seconds x framerate of video\ntotal_frames = int(cap.get(cv2.CAP_PROP_FRAME_COUNT))\nwhile(True):\n    # cam.set(cv2.CAP_PROP_POS_FRAMES, 29)\n    # reading from frame\n    ret,frame = cap.read()\n\n    if ret and count <= total_frames:\n        # if video is still left continue creating images\n        name = '.\/New_Dataset\/'+ veg + '\/' + veg + '_' + str(currentframe) + '.jpg'\n        print ('Creating...' + name)\n        \n        #Here we are cropping the centre square of each frome\n        #You can comment out this section to get full frame as image\n        width, height = frame.shape[1], frame.shape[0]\n        min1 = int((min(width, height))\/2)\n        mid_x, mid_y = int(width\/2), int(height\/2)\n        crop_frame = frame[mid_y-min1:mid_y+min1, mid_x-min1:mid_x+min1]\n        \n        #Size of Image\n        dim = (512,512)\n  \n        # resize image\n        resized = cv2.resize(crop_frame, dim, interpolation = cv2.INTER_AREA)\n        \n        # writing the extracted images\n        cv2.imwrite(name, resized)\n\n        currentframe += 1\n        \n        # Change it accord to how many frame do you want from the video\n        # In this case from 30 fps, 15 fps video: 30 mean 1 frame per sec, 15 means 2 fromes per sec\n        count +=30\n        cap.set(1, count)\n\n    else:\n        break\n\n# Release all space and windows once done\ncap.release()\ncv2.destroyAllWindows()","683abc79":"This Notebook is used to extract frames from videos\nUse of Notebook can be found in \nhttps:\/\/www.kaggle.com\/raghavrpotdar\/fresh-and-stale-images-of-fruits-and-vegetables"}}