{"cell_type":{"34f516ea":"code","e88fc858":"code","6150d010":"code","5622b8f6":"code","43dafd59":"code","407a6674":"code","ce1dea15":"code","bf2959cf":"code","b19a99b6":"code","dfdf3c60":"code","1b555085":"code","55f930f3":"code","cee6e7d6":"code","95e33ac5":"code","f1ade6db":"code","b4da41d0":"code","ecf53eec":"code","71c3c162":"code","3261fcca":"markdown","03664226":"markdown","22c5ba3b":"markdown","55abf4c7":"markdown","a1550ab0":"markdown","02b3e897":"markdown","9789e220":"markdown","ee0d7156":"markdown","2fe8e3ec":"markdown","965e966e":"markdown","264a2e34":"markdown","dfddd9d3":"markdown","7aaa677f":"markdown","ef1f5b46":"markdown","6531e974":"markdown","b18b825b":"markdown","02c72b8e":"markdown","6d9dd742":"markdown","526bd343":"markdown"},"source":{"34f516ea":"import warnings\nwarnings.filterwarnings('ignore')","e88fc858":"import pandas as pd\noly_evts = pd.read_csv(\"..\/input\/120-years-of-olympic-history-athletes-and-results\/athlete_events.csv\", header = 'infer')\noly_rgn = pd.read_csv(\"..\/input\/120-years-of-olympic-history-athletes-and-results\/noc_regions.csv\", header='infer')","6150d010":"print(oly_evts.shape)\nprint(oly_rgn.shape)\noly_evts.head()","5622b8f6":"#Missing values with respect to each column in the dataset\nimport seaborn as sns\nsns.heatmap(oly_evts.isnull(), cbar=False)","43dafd59":"#Missing value correlation\nimport missingno as msno\nmsno.heatmap(oly_evts)","407a6674":"import numpy as np\nimp_col = ['Age', 'Height', 'Weight']\nfor col in imp_col:\n    oly_evts[col] = oly_evts[col].fillna(np.mean(oly_evts[col]))\n    oly_evts[col] = np.round(oly_evts[col],1)","ce1dea15":"from pandasql import sqldf\nm_vs_fm_120 = \"\"\"select Year, Sex, count(distinct Name) cnt from oly_evts group by Year, Sex\"\"\"\npysqldf = lambda m_vs_fm: sqldf(m_vs_fm, globals())\nmvf_120_df = pysqldf(m_vs_fm_120)\n\nm_120_df = mvf_120_df[mvf_120_df.Sex=='M']\nf_120_df = mvf_120_df[mvf_120_df.Sex=='F']","bf2959cf":"import plotly.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\n\nm_120_t = go.Bar(\n    x=m_120_df.Year,\n    y=m_120_df.cnt,\n    name='Male'\n) \n\nf_120_t = go.Bar(\n    x=f_120_df.Year,\n    y=f_120_df.cnt,\n    name='Female'\n) \n\ndata = [m_120_t, f_120_t]\nlayout = go.Layout(\n    barmode='stack', \n    xaxis=dict(type='category', title='Year'),\n    yaxis=dict(title='Count of Players'),\n    title=\"Male Vs Female Participation in Olympic from the year 1896 - 2016\"\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig, filename='stack-bar')","b19a99b6":"from pandasql import sqldf\nna_120 = \"\"\"select Year, count(distinct NOC) cnt from oly_evts group by Year\"\"\"\npysqldf = lambda m_vs_fm: sqldf(na_120, globals())\nna_120_df = pysqldf(na_120)","dfdf3c60":"import plotly.plotly as py\nimport plotly.graph_objs as go\nimport  colorlover as cl\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\n\nna_120_t = go.Bar(\n    x=na_120_df.Year,\n    y=na_120_df.cnt,\n    marker=dict(\n        color='rgb(163,132,193)',\n        line=dict(\n            color='rgb(239,234,244)',\n            width=2)\n    )\n)\n\ndata = [na_120_t]\nlayout = go.Layout(\n    barmode='stack', \n    xaxis=dict(type='category', title='Year'),\n    yaxis=dict(title='Count of Nations'),\n    title=\"Nations participating in Olympic from the year 1896 - 2016\"\n)\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig, filename='stack-bar')","1b555085":"from pandasql import sqldf\nMedals_120 = \"\"\"select Year, Sex, Medal, count(Medal) cnt from oly_evts group by Year, Sex, Medal\"\"\"\npysqldf = lambda m_vs_fm: sqldf(Medals_120, globals())\nMedals_120_df = pysqldf(Medals_120)\nna_key = Medals_120_df[\"Medal\"].isnull()\nMedals_120_df_final = Medals_120_df.loc[~na_key]","55f930f3":"import plotly.plotly as py\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\n\nmedal_t = ff.create_facet_grid(\n    Medals_120_df_final,\n    x='Year',\n    y='cnt',\n    color_name='Medal',\n    facet_row='Medal',\n    facet_col='Sex',\n    show_boxes=False,\n    colormap={'Gold': 'rgb(218,165,32)', 'Silver': 'rgb(211,211,211)', 'Bronze': 'rgb(128, 64, 0)'}\n)\n\nmedal_t.layout.update({'title': 'Male Vs Female wining medals in Olympic from the year 1896 - 2016'})\n\niplot(medal_t, filename='Male Vs Female wining medals in Olympic from the year 1896 - 2016')","cee6e7d6":"from pandasql import sqldf\nloc_120 = \"\"\"select distinct Year, Season, City, count(distinct Sport) cnt from oly_evts group by Year, Season, City\"\"\"\npysqldf = lambda m_vs_fm: sqldf(loc_120, globals())\nloc_120_df = pysqldf(loc_120)","95e33ac5":"#Summer Olympics\nsum_df = loc_120_df[loc_120_df.Season == 'Summer']\n#Winter Olympics\nwin_df = loc_120_df[loc_120_df.Season == 'Winter']","f1ade6db":"#Location Details of Cities\nloc_det = pd.DataFrame({\n        'City':['Barcelona', 'London', 'Antwerpen', 'Paris', 'Calgary', 'Albertville',\n           'Lillehammer', 'Los Angeles', 'Salt Lake City', 'Helsinki', 'Lake Placid',\n           'Sydney', 'Atlanta', 'Stockholm', 'Sochi', 'Nagano', 'Torino', 'Beijing',\n           'Rio de Janeiro', 'Athina', 'Squaw Valley', 'Innsbruck', 'Sarajevo',\n           'Mexico City', 'Munich', 'Seoul', 'Berlin', 'Oslo', \"Cortina d'Ampezzo\",\n           'Melbourne', 'Roma', 'Amsterdam', 'Montreal', 'Moskva', 'Tokyo', 'Vancouver',\n           'Grenoble', 'Sapporo', 'Chamonix', 'St. Louis', 'Sankt Moritz', 'Garmisch-Partenkirchen'],\n    'lat':[41.38, 51.50, 51.22, 48.85, 51.04, 34.26, 61.115, 34.05, 40.76,\n          60.16, 27.29, -33.86, 33.74, 59.32, 43.58, 36.65, 45.06, 39.90,\n          -22.911, 37.97, 36.72, 47.26, 43.85, 19.43, 48.13, 37.56, 52.52, \n          59.91, 46.53, -37.81, 41.89, 52.37, 45.50, 44.81, 35.65, 49.26,\n          45.18, 43.01, 45.92, 38.63, 46.49, 47.5],\n    'lon':[2.173, -0.12, 4.39, 2.35, -114.07, -86.20, 10.46, -118.24, -111.89,\n          24.93, -81.36, 151.20, -84.38, 18.06, 39.72, 138.18, 7.68, 116.40,\n          -43.2094, 23.73, -119.23, 11.39, 18.41, -99.13, 11.58, 126.97, 13.40,\n          10.75, 12.13, 144.96, 12.48, 4.9, -73.55, 20.46, 139.74, -123.11,\n          5.72, 141.40, 6.86, -90.19, 9.83, 11.08],\n\n})","b4da41d0":"#Merging Summer and Winter dataset with loc_det\nsum_df = pd.merge(sum_df, loc_det, on='City')\nwin_df = pd.merge(win_df, loc_det, on='City')","ecf53eec":"#Locations of Summer Olympics from 1896 to 2016\nfrom mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as plt\nplt.figure(figsize=(25,15))\n\nmap = Basemap()\nmap.drawcoastlines()\nmap.drawcountries()\nmap.fillcontinents()\nmap.drawmapboundary()\n\nmap.drawmapboundary(fill_color='k')\nmap.fillcontinents(color='silver',lake_color='k')\n \nlons = pd.np.array(sum_df['lon'])\nlats = pd.np.array(sum_df['lat'])\n\nx,y = map(lons, lats)\n\n#map.scatter(x, y, marker='D',color='m')\n\nmap.plot(x, y, marker='+', color='m', markersize=6, markeredgewidth=2)\n\nplt.title(\"Locations of Summer Olympics from 1896 to 2016\")\nplt.show()","71c3c162":"#Locations of Winter Olympics from 1896 to 2016\nfrom mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as plt\nplt.figure(figsize=(25,15))\n\nmap = Basemap()\nmap.drawcoastlines()\nmap.drawcountries()\nmap.fillcontinents()\nmap.drawmapboundary()\n\nmap.drawmapboundary(fill_color='k')\nmap.fillcontinents(color='silver',lake_color='k')\n \nlons = pd.np.array(win_df['lon'])\nlats = pd.np.array(win_df['lat'])\n\nx,y = map(lons, lats)\n\n#map.scatter(x, y, marker='D',color='m')\n\nmap.plot(x, y, marker='+', color='m', markersize=6, markeredgewidth=2)\n\nplt.title(\"Locations of Winter Olympics from 1896 to 2016\")\nplt.show()","3261fcca":"![](https:\/\/assets3.thrillist.com\/v1\/image\/2740765\/size\/gn-gift_guide_variable_c_2x.jpg)","03664226":"**0. Global Options**","22c5ba3b":"**6. Nations participating in Olympic from the year 1896 - 2016**","55abf4c7":"From the maps of both winter and summer olympic games its clearly seen that the favourite destination for these sports are mostly preferred across North America, European countries and Japan.","a1550ab0":"**3. Visualizing the Missing data**","02b3e897":"Aside from identifying the proportion of each column that\u2019s missing, we can also use the \u201cheatmap\u201d visualization to understand the relationship of missing values between pairs of columns. By inspecting the nullity correlation of column pairs, we can get a sense of columns whose values are directly or inversely related. For example, if we had a data set of species and one column was number of limbs and another was number of fingers, we\u2019d s~ee a relationship \u2013 species who don\u2019t have limbs also don\u2019t have fingers, so there is some relationship between those two columns.\n\nOne thing to note is that any columns that have no missing values will not show up in the heatmap. The remaining columns will appear with their correlation value between -1 and 1, and if the value rounds down to 0 (>-0.05 or < 0.05) then no value will be displayed. A value of -1 means that in all cases, when the first column is missing then the second column is not missing. A value of 1 means that in all cases, when the first column is missing the second column is missing also. In the shelter animal outcomes dataset, A value of 0 represents no correlation at all.","9789e220":"**7. Male Vs Female wining medals in Olympic from the year 1896 - 2016**","ee0d7156":"**1. Reading the Olympic Dataset**","2fe8e3ec":"Now, its clearly evident from the above bar chart that due to decrease in number of nations participating in olympics from 1992 to every alternate year of olympics event, the number of players participating also showed the same pattern.","965e966e":"**Context**\n\nThis is a historical dataset on the modern Olympic Games, including all the Games from Athens 1896 to Rio 2016. \n\nThe file athlete_events.csv contains 271116 rows and 15 columns. Each row corresponds to an individual athlete competing in an individual Olympic event (athlete-events). The columns are:\n\nID - Unique number for each athlete\nName - Athlete's name\nSex - M or F\nAge - Integer\nHeight - In centimeters\nWeight - In kilograms\nTeam - Team name\nNOC - National Olympic Committee 3-letter code\nGames - Year and season\nYear - Integer\nSeason - Summer or Winter\nCity - Host city\nSport - Sport\nEvent - Event\nMedal - Gold, Silver, Bronze, or NA\n\nNote that the Winter and Summer Games were held in the same year up until 1992. After that, they staggered them such that Winter Games occur on a four year cycle starting with 1994, then Summer in 1996, then Winter in 1998, and so on. A common mistake people make when analyzing this data is to assume that the Summer and Winter Games have always been staggered.\n\n**Acknowledgements**\n\nThe Olympic data on www.sports-reference.com is the result of an incredible amount of research by a group of Olympic history enthusiasts and self-proclaimed 'statistorians'. Check out their blog for more information. All I did was consolidated their decades of work into a convenient format for data analysis.\n\n**Inspiration**\n\nThis dataset provides an opportunity to ask questions about how the Olympics have evolved over time, including questions about the participation and performance of women, different nations, and different sports and events.","264a2e34":"**Overview of the Dataset**","dfddd9d3":"**4. Imputing the missing values for \"Age\", \"Height\" and \"Weight\" columns with its mean value**","7aaa677f":"**2. Viewing the shape of the datasets**","ef1f5b46":"**8. Locations of Olympics from the year 1896 to 2016**","6531e974":"**Note:**  \nKindly upvote the kernel if you find it useful. Suggestions are always welome. Let me know your thoughts in the comment if any.","b18b825b":"**5. Male Vs Female Participation in Olympic from the year 1896 - 2016**","02c72b8e":"From the above plot its clearly evident that \"Age\", \"Height\", \"Weight\" and \"Medal\" are the only columns that have missing values. But, missing values in \"Medal\" column doesn't mean the actual missing values. It might be mostly due to the players who didn't win any medal for the particular even. \nTherefore, while imputing the values its recommended to impute values only to \"Age\", \"Height\" and \"Weight\" columns in the dataset.","6d9dd742":"It's clearly evident from the above stacked barchart that the participation of women players in the olympics has significantly improved over the years. Also, from the year 1992 every alternate olympics game shows that only very few players has paricipated till 2016. Therefore, we need to check the reason is it due to the less number of nations participating in the olympics for the every alternate year from 1992.\nTherefore, we will be plotting the number of nations participating olympics from the year 1896 to 2016.","526bd343":"Both Men and womens shows upward trend in winning medals. But one peculiar pattern is that both sex have same winning pattern for all the categories of medals. Female winning pattern seems like a concave up increasing pattern and Male winning pattern seems like a concave down increasing pattern."}}