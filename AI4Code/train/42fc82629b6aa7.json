{"cell_type":{"a8b1901c":"code","9f97350e":"code","c404da63":"code","7b1cc206":"code","25321051":"code","f46a9312":"code","d44dee37":"code","9fe6c882":"code","60280e0e":"markdown","83ed0670":"markdown","b6a33723":"markdown","3a726d40":"markdown","05d2bfe8":"markdown","d75cc525":"markdown","d43c6150":"markdown","6c3d5779":"markdown","f8f7b172":"markdown","9e008cac":"markdown","7f2cfefb":"markdown","f15cf6e1":"markdown","743d8e88":"markdown","226283de":"markdown","c09ea129":"markdown","84c9c414":"markdown"},"source":{"a8b1901c":"\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom collections import Counter\nimport seaborn as sns\nimport plotly.figure_factory as ff\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.model_selection import train_test_split\nfrom imblearn.over_sampling import SMOTE\nimport warnings\nwarnings.filterwarnings('always')\nwarnings.simplefilter(action='ignore', category=FutureWarning)\nprint(\"\\n \\n \\033[1m Librerie importate! \\033[0m\")","9f97350e":"features = ['age', 'sex', 'cp', 'trtbps', 'chol','thalachh', 'exng','fbs', 'output']\n#columns= ['et\u00e0', 'sesso', 'dolore al petto','pressione sanguigna','colesterolo','elettrocardiogramma','frequenza cardiaca','angina','zuccheri nel sangue','infarto']\ndata=pd.read_csv(\"..\/input\/heart-attack-analysis-prediction-dataset\/heart.csv\", skipinitialspace=True,usecols= features)\ndata","c404da63":"heart=Counter(data['output'])\nclasses=[]\ncount=[]   #list to store no of laels of each class\nfor i in heart.keys():\n    classes.append(i)\n    count.append(heart[i])\ncolors = [\"#6C74F7\", \"#9D00C7\"]\nlabels = ['Persone che hanno \\n avuto un attacco di cuore', 'Persone che non hanno \\n avuto un attacco di cuore']\n\nplt.pie(\n    count,\n    labels = labels,\n    shadow = True,\n    colors = colors,\n    startangle=80,\n    autopct='%1.1f%%'\n)\nplt.axis('equal')\nplt.tight_layout()\nplt.title(\"Percentuale di persone con attacchi di cuore nel dataset\", fontsize=20)\nplt.show()","7b1cc206":"fig=plt.figure(figsize=(16, 16))\nfig = plt.subplot(431)\nsns.kdeplot(data['age'],shade=True,label=' Et\u00e0')\n# plt.title ('Distribuzione dell'et\u00e0')\nplt.xlabel('Et\u00e0')\nplt.legend()\nfig = plt.subplot(432)\ndata['sex'].value_counts().plot(kind='bar',label=' Sesso', color=\"lightpink\")\nplt.xlabel('Sesso')\n# plt.title ('Distribuzione dei sessi')\nplt.legend()\nfig = plt.subplot(433)\ndata['cp'].value_counts().plot(kind='bar',label='pain')\nplt.xlabel('Dolori al petto')\n# plt.title ('Distribuzione del dolore al petto')\nplt.legend()\nfig = plt.subplot(434)\n# sns.kdeplot(data['trtbps'],shade=True,label='blood pressure')\nsns.distplot(data['trtbps'], color=\"red\",  kde= True,label='Pressione del sangue')\nplt.xlabel ('Pressione del sangue')\nplt.legend()\nfig = plt.subplot(435)\nsns.kdeplot(data['chol'],shade=True,label='Colesterolo')\n# plt.title ('Distribuzione del colesterolo')\nplt.xlabel('Colesterolo')\nplt.legend()\nfig = plt.subplot(436)\ndata['fbs'].value_counts().plot(kind='bar',label='Glicemia', color=\"lightblue\")\nplt.xlabel('Glicemia')\n# plt.title ('Distribuzione della glicemia')\nplt.legend()\nfig = plt.subplot(437)\n# sns.kdeplot(data['thalachh'],shade=True,label='Massima frequenza cardiaca')\nsns.distplot(data['thalachh'], color=\"red\",  kde= True,label='Massima frequenza cardiaca')\nplt.xlabel('Massima frequenza cardiaca')\nplt.legend()\nfig = plt.subplot(438)\ndata['exng'].value_counts().plot(kind='bar',label='Angina', color=\"grey\")\nplt.xlabel('Angina')\n# plt.title ('Distribuzione dell'angina (dolore al torace)')\nplt.legend()","25321051":"fig=plt.figure(figsize=(16, 16))\nfig = plt.subplot(331)\ndf=data\nname='sex'\nl = [(100)*df[df[name]==0]['output'].sum()\/len(df[df[name]==0]['output']),\n     (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output'])]\nx=[\"male\",\"female\"]\nplt.bar(x,l,label='Sesso' )\nplt.xlabel(name)\nplt.ylabel('Percentuale di attacchi di cuore')\nplt.legend()\nfig = plt.subplot(332)\ndf=data\nname='cp'\nl = [(100)*df[df[name]==0]['output'].sum()\/len(df[df[name]==0]['output']),\n     (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output']),\n    (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output']),\n    (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output'])]\nx=[\"0\",\"1\",'2','3']\nplt.bar(x,l,label='Dolore al petto' , color=\"pink\")\nplt.xlabel(\"Dolore al petto\")\nplt.ylabel('Percentuale di attacchi di cuore')\nplt.legend()\n\nfig = plt.subplot(333)\nname='fbs'\nl = [(100)*df[df[name]==0]['output'].sum()\/len(df[df[name]==0]['output']),\n     (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output'])]\nx=[\"0\",\"1\"]\nplt.bar(x,l,label='Glicemia', color=\"grey\" )\nplt.xlabel('Glicemia')\nplt.ylabel('Percentuale di attacchi di cuore')\nplt.legend()\nfig = plt.subplot(334)\nname='exng'\nl = [(100)*df[df[name]==0]['output'].sum()\/len(df[df[name]==0]['output']),\n     (100)*df[df[name]==1]['output'].sum()\/len(df[df[name]==1]['output'])]\nx=[\"0\",\"1\"]\nplt.bar(x,l,label='Angina' )\nplt.xlabel('Angina')\nplt.ylabel('Percentuale di attacchi di cuore')\nplt.legend()","f46a9312":"fig=plt.figure(figsize=(14, 6))\nfig = plt.subplot(121)\nsns.distplot(data[data['output'] == 0][\"chol\"], color='green',label='No attacco di cuore') \nsns.distplot(data[data['output'] == 1][\"chol\"], color='red',label='Attacco di cuore') \nplt.title('Correlazione tra attacchi di \\n cuore e colesterolo', fontsize=15)\nplt.legend()\nfig = plt.subplot(122)\nsns.distplot(data[data['output'] == 0][\"trtbps\"], color='grey',label='No attacco di cuore') \nsns.distplot(data[data['output'] == 1][\"trtbps\"], color='blue',label='Attacco di cuore') \nplt.title('Correlazione tra attacchi di cuore \\n e pressione del sangue', fontsize=15)\nplt.legend()\nwarnings.filterwarnings('always')","d44dee37":"\nheart = data[data['output']==1]['age'].fillna(0.0).astype(float)\nheart_no = data[data['output']==0]['age'].fillna(0.0).astype(float)\nfi = ff.create_distplot([heart, heart_no], ['Attacco di cuore','Senza attacco di cuore'], bin_size=0.65, curve_type='normal'\n                        ,colors =  ['#E50914','#221F1F'])\nfi.update_layout(\n    title=\"Correlazione tra attacchi di cuore e all'et\u00e0\",\n    xaxis_title=\"Et\u00e0\",\n)\nfi.show()\nheart = data[data['output']==1]['thalachh'].fillna(0.0).astype(float)\nheart_no = data[data['output']==0]['thalachh'].fillna(0.0).astype(float)\nfi = ff.create_distplot([heart, heart_no], ['Attacco di cuore','Senza attacco di cuore'], bin_size=0.65, curve_type='normal'\n                        ,colors =  ['#E50914','green'])\nfi.update_layout(\n    title=\"Correlazione tra attacchi di cuore e massima frequenza cardiaca\",\n    xaxis_title=\"Massima frequenza cardiaca\",\n)\nfi.show()","9fe6c882":"fig = sns.catplot(x=\"cp\", y=\"thalachh\",hue='output', data=data)\nfig.set_axis_labels('Dolore al petto','Frequenza cardiaca')","60280e0e":"Ancora nel dettaglio guardiamo la correlazione tra attacchi di cuore ed et\u00e0. Le persone che hanno et\u00e0 tra i 40 e i 70 \u00e8 pi\u00f9 probabile che abbiano un infarto.\nEssenzialmente il secondo grafico ci dice che all\u2019aumentare della frequenza cardiaca, aumenta la probabilit\u00e0 di avere un attacco di cuore, in particolare se supera i 140.","83ed0670":"In particolare in questa sezione ci siamo soffermati sul colesterolo e sulla pressione del sangue.\nLe persone che hanno il colesterolo tra 120 e 250 sono pi\u00f9 propense ad avere un infarto. \nSi pu\u00f2 fare lo stesso discorso per la pressione sanguigna, infatti chi ha dei valori tra 110 e 140 \u00e8 pi\u00f9 probabile che soffra di attacchi di cuore.","b6a33723":"# In conclusione","3a726d40":"Ci sono features che condizionano di piu la probablit\u00e0 di avere un infarto, tra cui il dolore al petto, la frequenza cardiaca, il colesterolo, l'et\u00e0 e la pressione del sangue, quindi sono fattori da tenere in considerazione in maniera pi\u00f9 cauta se si vuole evitare un attacco di cuore.","05d2bfe8":"Il grafico a torta mostra che il 54% delle persone nel dataset hanno avuto un infarto, mentre il restante 45% no, quindi i dati sono piuttosto bilanciati.","d75cc525":"Qui in particolare possiamo vedere come all\u2019aumentare del dolore del petto e della frequenza cardiaca, le probabilit\u00e0 di un infarto aumentano sensibilmente.","d43c6150":"I grafici mostrano come sono distribuite le caratteristiche tra le persone nel dataset.","6c3d5779":"# **Bilanciamento dei dati**","f8f7b172":"# **Importare le librerie**","9e008cac":"# Features nel dettaglio ","7f2cfefb":"# Combinazione di features che rafforza la correlazione","f15cf6e1":"Tra queste features \u00e8 importante soffermarsi sul dolore al petto, infatti si pu\u00f3 notare come all'aumentare di questo valore, aumenta la probabilit\u00e0 di avere un attacco di cuore.","743d8e88":"# Correlazione tra alcune features e infarti ","226283de":"* **Age** = Et\u00e0\n* **Sex** = Sesso (0 per il sesso femminile, 1 per il sesso maschile)\n* **Cp** = Chest Pain (dolore al petto, scala che varia da 0 a 3)\n* **Trtbps** = Pressione sanguigna a riposo\n* **Chol** = Colesterolo\n* **Fbs** = Fasting Blood Sugar (livello di zuccheri nel sangue, 0 se non supera i 120 mg\/dl, 1 altrimenti)\n* **Thalachh** = Frequenza cardiaca massima\n* **Exng** = Angina indotta dall'esercizio fisico (dolore al torace)\n* **Output** = Attacco di cuore\n","c09ea129":"# **Lettura dei dati**","84c9c414":"# **Distribuzione delle features**"}}