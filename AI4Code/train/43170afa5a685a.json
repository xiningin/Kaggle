{"cell_type":{"289d897a":"code","718d325a":"code","32bbd7d9":"code","6bd03c6e":"code","15e2e506":"code","769ae9a3":"markdown"},"source":{"289d897a":"import altair as alt\nalt.renderers.enable('kaggle')\n\nimport pandas as pd\npd.set_option('max_colwidth', 300)\npd.set_option('max_columns', None)\n\nimport re","718d325a":"df = pd.read_csv(\"..\/input\/kaggle-survey-2019\/multiple_choice_responses.csv\")\nques = pd.read_csv(\"..\/input\/kaggle-survey-2019\/questions_only.csv\")\nques.T","32bbd7d9":"data = df.drop(df.index[0]).groupby('Q5')['Q5'].size()\n\ndata = pd.DataFrame({\n    'title': data.index,\n    'count': data.values\n})\n\nbars = alt.Chart(data).mark_bar().encode(\n    x=alt.X('count:Q', title='', axis=None),\n    y=alt.Y('title:N', title='', sort=alt.EncodingSortField(field='count', op='sum', order='descending')),\n    color=alt.condition(\n        alt.datum.title=='Data Engineer',\n        alt.value('#b00200'),\n        alt.value('silver')\n    )\n    \n)\n\ntext = alt.Chart(data).mark_text(\n    align='left',\n    baseline='middle',\n    dx=5\n).encode(\n    text='count:Q', \n    x=alt.X('count:Q', axis=None), \n    y=alt.Y('title:N', sort=alt.EncodingSortField(field='count', op='sum', order='descending')),\n    color=alt.condition(\n        alt.datum.title=='Data Engineer',\n        alt.value('#b00200'),\n        alt.value('#FFFFFF')\n    )\n)\n\n(bars+text).properties(\n    title='Data Engineers make up a large number of the least respondants',\n    width=600,\n    height=400\n).configure_title(\n    dy=-10,\n    fontSize=20,\n    anchor='start',\n    color='#b00200'\n).configure_axis(\n    grid=False\n).configure_view(\n    strokeOpacity=0\n)\n","6bd03c6e":"de = df[df['Q5']=='Data Engineer']\ndata = pd.DataFrame({'age': de.Q1})\n\nbase = alt.Chart(data).transform_calculate(\n    age_min='parseInt(split(datum.age, \"-\")[0])',\n    age_max='parseInt(split(datum.age, \"-\")[1]) + 1',\n    age_mid='(datum.age_min + datum.age_max) \/ 2'\n)\n\nbars = base.mark_bar(color='silver').encode(\n    x=alt.X('age_min:Q', title='Age', bin='binned', scale=alt.Scale(domain=(18, 75))),\n    x2='age_max:Q',\n    y=alt.Y('count():Q', title='Responses')\n)\n\nmedian = base.mark_rule(size=5, color='#b00200').encode(\n    x = 'median(age_mid):Q',\n)\n\n(bars+median).properties(\n    title='Most Data Engineers are between the ages of 18 and 70+',\n    width=600,\n    height=400\n).configure_title(\n    dy=-10,\n    fontSize=20,\n    anchor='start',\n    color='#b00200'\n).configure_axis(\n    grid=False\n).configure_view(\n    strokeOpacity=0\n)","15e2e506":"data = pd.DataFrame({'income': de.Q10})\ndata = data.dropna()\norder = pd.DataFrame({'income':data.income.dropna().unique()})\norder['sort'] = order.income.apply(lambda x: int(re.sub('[$>,]', '', x.split('-')[0])))\norder = order.sort_values('sort', ascending=False).reset_index(drop=True)\n\n\nbars = alt.Chart(data).mark_bar().encode(\n    y=alt.Y('income:N', title='Income', sort=list(order.income)),\n    x=alt.X('count():Q', title='', axis=None),\n    color=alt.condition(\n        alt.datum.income=='> $500,000',\n        alt.value('#b00200'),\n        alt.value('silver')\n    )\n)\n\ntext = alt.Chart(data).mark_text(\n    align='center',\n    baseline='middle',\n    dx=10\n).encode(\n    text='count():Q', \n    y=alt.Y('income:O', title='', sort=list(order.income)),\n    x=alt.X('count():Q', title='', axis=None),\n    color=alt.condition(\n        alt.datum.income=='> $500,000',\n        alt.value('#b00200'),\n        alt.value('#FFFFFF')\n    )\n)\n\n\n(bars+text).properties(\n    title='I want to be friends with these Data Engineers',\n    width=400,\n    height=600\n).configure_title(\n    dy=-10,\n    fontSize=20,\n    anchor='start',\n    color='#b00200'\n).configure_axis(\n    grid=False\n).configure_view(\n    strokeOpacity=0\n)\n","769ae9a3":"### Data Engineers - I'm a data engineer too so I know how data engineers do\n\n"}}