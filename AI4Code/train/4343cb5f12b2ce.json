{"cell_type":{"352b6d4c":"code","346326a2":"code","d5d40d83":"code","416d0ab2":"code","f7c5a13d":"code","388e9918":"code","f200c098":"code","e11416bb":"code","47af5c28":"code","3bb8ddbb":"code","2a03b5ed":"code","ac91f2f9":"code","4aa7e63b":"code","2b20b90c":"code","be4793a7":"code","8072ee74":"code","4c4e7b11":"code","92415134":"code","a7e92f36":"code","c2b3a399":"code","ab1f9dc9":"code","c02e58eb":"code","e9e1ed6e":"code","8712b268":"code","a706a6fb":"code","fd2aa5a9":"code","f8c0df39":"code","4cd6dad7":"code","3567d15f":"code","aa227bed":"code","53a0c522":"code","3cb2c0b4":"code","54db9a4a":"markdown","c872acd9":"markdown","17fb7e6f":"markdown","db083bbb":"markdown","3bf1512a":"markdown","c2622312":"markdown","f66d5bda":"markdown","6216b68a":"markdown","dea0359c":"markdown","c09ef472":"markdown","2b5b2226":"markdown","0dfe5369":"markdown","d1c93cb8":"markdown","507e4ae5":"markdown","17abcf71":"markdown","c7564da6":"markdown","11de415e":"markdown","5f3e3552":"markdown"},"source":{"352b6d4c":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport plotly.express as px\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go","346326a2":"train=pd.read_csv(r\"..\/input\/covid19-global-forecasting-week-3\/train.csv\")\ntest=pd.read_csv(r\"..\/input\/covid19-global-forecasting-week-3\/test.csv\")","d5d40d83":"train.sample(6)","416d0ab2":"test.sample(6)","f7c5a13d":"df = train.fillna('NA').groupby(['Country_Region','Province_State','Date'])['ConfirmedCases'].sum() \\\n                          .groupby(['Country_Region','Province_State']).max().sort_values() \\\n                          .groupby(['Country_Region']).sum().sort_values(ascending = False)\n\ntop10 = pd.DataFrame(df).head(10)\ntop10","388e9918":"fig = px.bar(top10, x=top10.index, y='ConfirmedCases', labels={'x':'Country'},\n             color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.Brwnyl)\nfig.update_layout(title_text='Confirmed COVID-19 cases by country')\nfig.show()","f200c098":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'US') &(df_by_date.Date >= '2020-03-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in US')\nfig.show()","e11416bb":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'Italy') &(df_by_date.Date >= '2020-03-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in Italy')\nfig.show()","47af5c28":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'China') &(df_by_date.Date >= '2020-01-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in China')\nfig.show()","3bb8ddbb":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'Spain') &(df_by_date.Date >= '2020-03-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in Spain')\nfig.show()","2a03b5ed":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'Germany') &(df_by_date.Date >= '2020-03-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in Germany')\nfig.show()","ac91f2f9":"df_by_date = pd.DataFrame(train.fillna('NA').groupby(['Country_Region','Date'])['ConfirmedCases'].sum().sort_values().reset_index())\n\nfig = px.bar(df_by_date.loc[(df_by_date['Country_Region'] == 'India') &(df_by_date.Date >= '2020-03-01')].sort_values('ConfirmedCases',ascending = False), \n             x='Date', y='ConfirmedCases', color=\"ConfirmedCases\", color_continuous_scale=px.colors.sequential.BuGn)\nfig.update_layout(title_text='Confirmed COVID-19 cases per day in India')\nfig.show()","4aa7e63b":"top10.plot(figsize=(15,5), color='blue', title='PJM East')\nplt.show()","2b20b90c":"test['Date'] = pd.to_datetime(test['Date'])\ntrain['Date'] = pd.to_datetime(train['Date'])\ntrain = train.set_index(['Date'])\ntest = test.set_index(['Date'])","be4793a7":"\ndef create_features(df,label=None):\n    \"\"\"\n    Creates time series features from datetime index.\n    \"\"\"\n    df = df.copy()\n    df['Date'] = df.index\n    df['hour'] = df['Date'].dt.hour\n    df['dayofweek'] = df['Date'].dt.dayofweek\n    df['quarter'] = df['Date'].dt.quarter\n    df['month'] = df['Date'].dt.month\n    df['year'] = df['Date'].dt.year\n    df['dayofyear'] = df['Date'].dt.dayofyear\n    df['dayofmonth'] = df['Date'].dt.day\n    df['weekofyear'] = df['Date'].dt.weekofyear\n    \n    X = df[['hour','dayofweek','quarter','month','year',\n           'dayofyear','dayofmonth','weekofyear']]\n   \n    return X\n","8072ee74":"train_features=pd.DataFrame(create_features(train))\ntrain_features","4c4e7b11":"test_features=pd.DataFrame(create_features(test))\ntest_features","92415134":"features_and_target_train = pd.concat([train,train_features], axis=1)\nfeatures_and_target_train.sample(6)","a7e92f36":"features_and_target_test = pd.concat([test,test_features], axis=1)\nfeatures_and_target_test.sample(6)","c2b3a399":"from sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\ndef FunLabelEncoder(df):\n    for c in df.columns:\n        if df.dtypes[c] == object:\n            le.fit(df[c].astype(str))\n            df[c] = le.transform(df[c].astype(str))\n    return df","ab1f9dc9":"features_and_target_train= FunLabelEncoder(features_and_target_train)\nfeatures_and_target_train.info()","c02e58eb":"features_and_target_test= FunLabelEncoder(features_and_target_test)\nfeatures_and_target_test.info()","e9e1ed6e":"x_train= features_and_target_train[['Country_Region','month', 'dayofyear', 'dayofmonth' , 'weekofyear']]\ny1 = features_and_target_train[['ConfirmedCases']]\ny2 =features_and_target_train[['Fatalities']]\nx_test = features_and_target_test[['Country_Region', 'month', 'dayofyear', 'dayofmonth' , 'weekofyear']]","8712b268":"from fbprophet import Prophet\nmodel=Prophet()\nmodel.fit(features_and_target_train.reset_index() \\\n              .rename(columns={'Date':'ds',\n                               'ConfirmedCases':'y'}))","a706a6fb":"Covid_test_forecast=model.predict(df=features_and_target_test.reset_index() \\\n                                   .rename(columns={'Date':'ds'}))","fd2aa5a9":"Covid_test_forecast.tail()","f8c0df39":"# Plot the forecast\nf, ax = plt.subplots(1)\nf.set_figheight(5)\nf.set_figwidth(15)\nfig = model.plot(Covid_test_forecast,\n                 ax=ax)\nplt.show()","4cd6dad7":"# Plot the components of the model\nfig = model.plot_components(Covid_test_forecast)","3567d15f":"model_1=Prophet()\nmodel_1.fit(features_and_target_train.reset_index() \\\n              .rename(columns={'Date':'ds',\n                               'Fatalities':'y'}))","aa227bed":"Covid_test_forecast_Fatilities=model.predict(df=features_and_target_test.reset_index() \\\n                                   .rename(columns={'Date':'ds'}))","53a0c522":"# Plot the forecast\nf, ax = plt.subplots(1)\nf.set_figheight(5)\nf.set_figwidth(15)\nfig = model_1.plot(Covid_test_forecast_Fatilities,\n                 ax=ax)\nplt.show()","3cb2c0b4":"fig = model.plot_components(Covid_test_forecast_Fatilities)","54db9a4a":"From the above graph, we can say that US has most Confirmed cases and followed by italy.\nThe virus has began at China but virus is showing a  greater impact on US and Italy than China","c872acd9":"Confirmed COVID-19 cases per day in US","17fb7e6f":"# Introduction","db083bbb":"From this graph we can say that,with in short period of time virus has spread more in US and kept in 1st place","3bf1512a":"Coronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.\n\nMost people infected with the COVID-19 virus will experience mild to moderate respiratory illness and recover without requiring special treatment. Older people, and those with underlying medical problems like cardiovascular disease, diabetes, chronic respiratory disease, and cancer are more likely to develop serious illness.\n\nThe best way to prevent and slow down transmission is be well informed about the COVID-19 virus, the disease it causes and how it spreads. Protect yourself and others from infection by washing your hands or using an alcohol based rub frequently and not touching your face.\n\nThe COVID-19 virus spreads primarily through droplets of saliva or discharge from the nose when an infected person coughs or sneezes, so it\u2019s important that you also practice respiratory etiquette (for example, by coughing into a flexed elbow).\n\nAt this time, there are no specific vaccines or treatments for COVID-19. However, there are many ongoing clinical trials evaluating potential treatments. WHO will continue to provide updated information as soon as clinical findings become available.\n\nStay informed:\n\nProtect yourself: advice for the public Myth busters Questions and answers Situation reports All information on the COVID-19 outbreak","c2622312":"Confirmed COVID-19 Cases by country","f66d5bda":"In italy, Spreading of virus done for a long time and thus effected more people. But in US within short period the spread is more in this way US had a great impact","6216b68a":"Confirmed COVID-19 cases per day in China","dea0359c":"Confirmed COVID-19 cases per day in Spain","c09ef472":"# Importing Necessary Packages","2b5b2226":"From the above graph, we can say that, In china this virus has started and continued to spread. From this region, virus began to spread all parts of the world. In china the confirmed cases are increasing day by day.","0dfe5369":"Confirmed COVID-19 Cases per day in Germany","d1c93cb8":"For day to day track of this COVID-19 Cases, Deaths please refer my another notebook [https:\/\/www.kaggle.com\/eswarchandt\/geospatial-analysis-on-covid-19](http:\/\/)","507e4ae5":"Confirmed COVID-19 cases Per day in India","17abcf71":"# EDA","c7564da6":"![image.png](attachment:image.png)","11de415e":"The confirmed Cases compared to US, China, Italy , Spain and Germany are very less in India. But once it starts spreading it will show a greater impact.","5f3e3552":"The shaded part is the forecasted result"}}