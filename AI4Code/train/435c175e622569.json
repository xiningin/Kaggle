{"cell_type":{"d57da0cc":"code","9f56ddb3":"code","199eb3e0":"code","8f924eb4":"code","fe8df820":"code","68d1834c":"code","e67cd3f3":"code","c0dfc62c":"code","b732ebf4":"code","54d5cc35":"code","2f635ce9":"code","589d8ada":"code","bc4d6afd":"code","81193f6d":"code","9f95c978":"code","3ad9fb09":"code","b67c22a8":"code","99ccea65":"code","c21e7423":"code","c3333ed6":"code","ed892498":"code","260bd18d":"code","18871811":"code","786b2e76":"code","61d8abbc":"code","02c6abf5":"markdown","f001018e":"markdown","0d186382":"markdown","b96bc10a":"markdown","e410085d":"markdown","d4e374ab":"markdown","7326577f":"markdown","fd379b35":"markdown","7e9790bf":"markdown","8348ddcc":"markdown","54f723fa":"markdown","03855237":"markdown","7a06c262":"markdown","9daa2ae5":"markdown","ed6c0ff2":"markdown","6bf651ef":"markdown","6143401f":"markdown","ad5c74b2":"markdown","72148a2b":"markdown","d17c1c66":"markdown","b0fba593":"markdown","218219f2":"markdown"},"source":{"d57da0cc":"\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom plotly.offline  import download_plotlyjs,init_notebook_mode,plot, iplot\nimport cufflinks as cf\ninit_notebook_mode(connected = True)\ncf.go_offline()\n%matplotlib inline\n\nfrom plotly import tools\nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport plotly.offline as offline\n# Squarify for treemaps\nimport squarify\n# Random for well, random stuff\nimport random\n# operator for sorting dictionaries\nimport operator\n# For ignoring warnings\nimport warnings\nwarnings.filterwarnings('ignore')\n\n\n\ndf = pd.read_csv(\"..\/input\/data.csv\")\ndf.head(2)","9f56ddb3":"df.info()","199eb3e0":"df.describe()","8f924eb4":"df.describe(include=\"all\")","fe8df820":"\nprint(\"Number of records : \", df.shape[0])\nprint(\"Number of Blue fighters : \", len(df.B_ID.unique()))\nprint(\"Number of Red fighters : \", len(df.R_ID.unique()))","68d1834c":"df.isnull().sum(axis=0)","e67cd3f3":"\ndf['B_Age'] = df['B_Age'].fillna(np.mean(df['B_Age']))\ndf['B_Height'] = df['B_Height'].fillna(np.mean(df['B_Height']))\ndf['R_Age'] = df['R_Age'].fillna(np.mean(df['R_Age']))\ndf['R_Height'] = df['R_Height'].fillna(np.mean(df['R_Height']))","c0dfc62c":"temp = df[\"winner\"].value_counts()\nfig = {\n  \"data\": [\n    {\n      \"values\": temp.values,\n      \"labels\": temp.index,\n      \"domain\": {\"x\": [0, 1]},\n      \"hole\": .6,\n      \"type\": \"pie\"\n    },\n    \n    ],\n  \"layout\": {\n        \"title\":\"Winner\",\n        \"annotations\": [\n            {\n                \"font\": {\n                    \"size\": 17\n                },\n                \"showarrow\": False,\n                \"text\": \"Whos winning more\",\n                \"x\": 0.5,\n                \"y\": 0.5\n            }\n            \n        ]\n    }\n}\niplot(fig, filename='donut')","b732ebf4":"#fig, ax = plt.subplots(1,2, figsize=(12, 20))\nfig, ax = plt.subplots(1,2, figsize=(15, 5))\nsns.distplot(df.B_Age, ax=ax[0])\nsns.distplot(df.R_Age, ax=ax[1])","54d5cc35":"\nBAge = df.groupby(['B_Age']).count()['winner']\nBlueAge = BAge.sort_values(axis=0, ascending=False)\nBlueAge.head(10)","2f635ce9":"RAge = df.groupby(['R_Age']).count()['winner']\nRedAge = RAge.sort_values(axis=0, ascending=False)\nRedAge.tail(10)","589d8ada":"fig, ax = plt.subplots(1,2, figsize=(15, 5))\nabove35 =['above35' if i >= 35 else 'below35' for i in df.B_Age]\ndf_B = pd.DataFrame({'B_Age':above35})\nsns.countplot(x=df_B.B_Age, ax=ax[0])\nplt.ylabel('Number of fighters')\nplt.title('Age of Blue fighters',color = 'blue',fontsize=15)\n\nabove35 =['above35' if i >= 35 else 'below35' for i in df.R_Age]\ndf_R = pd.DataFrame({'R_Age':above35})\nsns.countplot(x=df_R.R_Age, ax=ax[1])\nplt.ylabel('Number of Red fighters')\nplt.title('Age of Red fighters',color = 'Red',fontsize=15)","bc4d6afd":"df['Age_Difference'] = df.B_Age - df.R_Age\ndf[['Age_Difference', 'winner']].groupby('winner').mean()","81193f6d":"fig, ax = plt.subplots(1,2, figsize=(15, 5))\nsns.distplot(df.B_Height, bins = 20, ax=ax[0]) #Blue \nsns.distplot(df.R_Height, bins = 20, ax=ax[1]) #Red","9f95c978":"fig, ax = plt.subplots(figsize=(14, 6))\nsns.kdeplot(df.B_Height, shade=True, color='indianred', label='Red')\nsns.kdeplot(df.R_Height, shade=True, label='Blue')","3ad9fb09":"df['Height Difference'] = df.B_Height - df.R_Height\ndf[['Height Difference', 'winner']].groupby('winner').mean()","b67c22a8":"temp = df[\"winby\"].value_counts()\nfig = {\n  \"data\": [\n    {\n      \"values\": temp.values,\n      \"labels\": temp.index,\n      \"domain\": {\"x\": [0, 1]},\n      #\"name\": \"Types of Loans\",\n      #\"hoverinfo\":\"label+percent+name\",\n      \"hole\": .6,\n      \"type\": \"pie\"\n    },\n    \n    ],\n  \"layout\": {\n        \"title\":\"How the fighter's are winning?\",\n        \"annotations\": [\n            {\n                \"font\": {\n                    \"size\": 20\n                },\n                \"showarrow\": False,\n                \"text\": \"Win by\",\n                \"x\": 0.50,\n                \"y\": 0.5\n            }\n            \n        ]\n    }\n}\niplot(fig, filename='donut')","99ccea65":"g = sns.FacetGrid(df, col='winby')\ng.map(plt.hist, 'R_Age', bins=20)","c21e7423":"sns.lmplot(x=\"B__Round1_Strikes_Body Significant Strikes_Attempts\", \n               y=\"B__Round1_Strikes_Body Significant Strikes_Landed\", \n               col=\"winner\", hue=\"winner\", data=df, col_wrap=2, size=6)","c3333ed6":"cnt_srs = df['R_Location'].value_counts().head(15)\n\ntrace = go.Bar(\n    x=cnt_srs.index,\n    y=cnt_srs.values,\n    marker=dict(\n        color=cnt_srs.values,\n    ),\n)\n\nlayout = go.Layout(\n    title='Most Popular cities for Red fighters'\n)\n\ndata = [trace]\nfig = go.Figure(data=data, layout=layout)\noffline.iplot(fig, filename=\"Ratio\")","ed892498":"cnt_srs = df['B_Location'].value_counts().head(15)\n\ntrace = go.Bar(\n    x=cnt_srs.index,\n    y=cnt_srs.values,\n    marker=dict(\n        color=cnt_srs.values,\n    ),\n)\n\nlayout = go.Layout(\n    title='Most Popular cities for Blue fighters'\n)\n\ndata = [trace]\nfig = go.Figure(data=data, layout=layout)\noffline.iplot(fig, filename=\"Ratio\")","260bd18d":"r1 = df[['B_Weight', 'B__Round1_Grappling_Reversals_Landed', 'B__Round1_Grappling_Standups_Landed', \n    'B__Round1_Grappling_Takedowns_Landed']].groupby('B_Weight').sum()\n\nr1.plot(kind='line', figsize=(14,6))\nplt.show()\n","18871811":"r5 = df[['B_Weight', 'B__Round5_Grappling_Reversals_Landed', 'B__Round5_Grappling_Standups_Landed', 'B__Round5_Grappling_Takedowns_Landed']].groupby('B_Weight').sum()\n\nr5.plot(kind='line', figsize=(14,6))\nplt.show()","786b2e76":"clin_r1 = df[['B_Weight', 'B__Round1_Strikes_Clinch Head Strikes_Landed', 'B__Round1_Strikes_Clinch Leg Strikes_Landed', 'B__Round1_Strikes_Clinch Body Strikes_Landed']].groupby('B_Weight').sum()\n\nclin_r1.plot(kind='line', figsize=(14,6))\nplt.show()","61d8abbc":"clin_r5= df[['B_Weight', 'B__Round1_Strikes_Clinch Head Strikes_Landed', 'B__Round5_Strikes_Clinch Leg Strikes_Landed', 'B__Round5_Strikes_Clinch Body Strikes_Landed']].groupby('B_Weight').sum()\n\nclin_r5.plot(kind='line', figsize=(14,6))\nplt.show()","02c6abf5":"\nMMA is a complex sport, in a sense it is the only sport where defense and offense could be done in the same movement. Hitting someone is a risk as it leaves you open for your opponent to counter. However, the *bigger the risk, the greater the reward*. More offensive attempts you make should mean more you land on your opponent (and with right skills and power - more chance you have to win the fight). \n\nLet's see if this is true with our data.","f001018e":"Here I will just follow my instinct and play around a bit with what I feel will matter.\n\nLet's talk about Age - a critical factor in any sport. We will start by looking at the distribution of Age from our dataset","0d186382":"By Round 5, fighters (who are now worn-out)  are hardly landing any leg and body strike. They are still landing good amount of Head strikes. This makes sense as the fight is coming to an end and instead of depending on the judges, they want to go for a Knock out. \n\n*More to come! **Stay tuned!***","b96bc10a":"MMA seems to be most prominent in Brazil and USA. Infact, MMA is second most popular sport after Soccer in Brazil. I wonder if it is due to ancient Brazilian Jiu-Jitsu?\n\nNow, let's look at the Grappling reversals, grappling standups and grappling takedowns landed in different weight categories in** Round 1**","e410085d":"# <a id='5'>5. Data Visualization<\/a>\n\nLet's start by looking who's winning more from our dataset:\n\n","d4e374ab":"![](http:\/\/i.imgur.com\/JtmJTKc.png)","7326577f":"\n# <a id='4'>4. Missing Values<\/a>\n\nWe oberserve there are some missing values in our data.  I know Age and Height are important features in any combat sport and they have handful of missing values. \n\nWe will address the missing values in age and height. We can simply delete rows with missing values, but usually we would want to take advantage of as many data points as possible. Replacing missing values with zeros would not be a good idea - as age 0 will have actual meanings and that would change our data.\n\nTherefore a good replacement value would be something that doesn't affect the data too much, such as the median or mean. the \"fillna\" function replaces every NaN (not a number) entry with the given input (the mean of the column in our case). Let's do this for both 'Blue' and 'Red' fighters.","fd379b35":"*Hi there! Thank you for opening my Kernel. I am super excited to share my first Kernel with the Kaggle community. Please be sure to upvote, fork, and comment. Thanks, and may you have \"statistically significant\" luck!*  \n","7e9790bf":"Looks like this is true. It makes me curious about the total number of Red and Blue fighters who are younger than 35.  ","8348ddcc":"Age matters, and youth is a clear advantage. \n\nHeight is also a major advantage in MMA as it means more the height more is the reach, meaning - taller fighter can attack from a distance keeping themselves safe from the hitting zone. Let's start by looking at the distribution of height:","54f723fa":"Fighters prefer to land  more head strikes during round 1, let's compare this with what happens in Round 5:","03855237":"Taller fighter has an advantage and, on average, wins. Of course, unless you are Rocky fighting Drago ;)\n\nNow, let's talk about how the fighters are winning. The three most popular ways to win in an MMA fight are:\n\n**1. DEC:**  Decision (Dec)  is a result of the fight or bout that does not end in a knockout in which the judges' scorecards are consulted to determine the winner; a majority of judges must agree on a result. A fight can either end in a win for an athlete, a draw, or a no decision.\n\n**2. SUB: ** also referred to as a \"tap out\" or \"tapping out\" - is often performed by visibly tapping the floor or the opponent with the hand or in some cases with the foot, to signal the opponent and\/or the referee of the submission\n\n**3. KO\/TKO:**  Knockout (KO) is when a fighter gets knocked out cold. (i.e.. From a standing to not standing position from receiving a strike.). Technical Knockout (TKO) is when a fighter is getting pummeled and is unable to defend him\/herself further. The referee will step in and make a judgement call to end it and prevent the fighter from receiving any more unnecessary or permanent damage, and call it a TKO.","7a06c262":"\n# <a id='1'>1. Introduction<\/a>\n\n**Background**\n\nMixed martial arts (MMA) is a full-contact combat sport that allows striking and grappling, both standing and on the ground, using techniques from other combat sports and martial arts. The Ultimate Fighting Championship (UFC) is an American mixed martial arts organization based in Las Vegas, Nevada and is the largest MMA promotion in the world and features the top-ranked fighters of the sport. Based in the United States, the UFC produces events worldwide that showcase twelve weight divisions and abide by the Unified Rules of Mixed Martial Arts. This is a highly unpredictable sport \n\nFew things we will try to visualize:\n\n* How's Age\/Height related to the outcome?\n* Most popular locations in UFC?\n* Most popular way to win the fight?\n* Comparing techniques used by fighters\n\n****\n# <a id='2'>2. Loading libraries and retrieving data<\/a>\n\nNot all python capabilities are loaded to your working environment by default. We would need to import every library we are going to use. We will choose alias names to our modules for the sake of convenience (e.g. numpy --> np, pandas --> pd)","9daa2ae5":"Age is a big factor in any sport, moresoever in MMA where you must have combination of strength, agility and speed (among other skills). These skills peak at 27-35 and fighter's fighting at this age should have higher likelyhood of winning the fight. Let's validate by grouping age for Blue fighters who have won the fight. ","ed6c0ff2":"Attempts and strikes landed are, as expected, perfectly linear.\n\nNow, let's look at the location and find out most popular countries","6bf651ef":"Clearly, most fights have been won by fighters in their late 20\u2019s through early 30\u2019s as they peak during this time and then lose strength, quickness and cardiovascular capacity\n\nOn the other hand, younger fighters do not develop peak strength till 27-28~ while older fighters are usually slower and more likely to lose. Let's check if this is true in our data. This time we will check for 'Red' fighters. ","6143401f":"Interestingly, most fighters are below 35. MMA is a brutal sport for older guys and can leave them with lifelong injuries. \n\nLastly, let's look at the mean difference\n","ad5c74b2":"There are very few Grappling reversals but high amount of Grappling takedowns that were landed. More specifically weight classes between 70 - 80 prefer takedowns during Round 1. \n\nLet's compare the same for Round 5","72148a2b":"Interestingly, grappling reversals increase for fighters between weight 80-90, while takedowns have decreased in the lighter weight groups.\n\nLets look similar data for Clinch head strikes, Clinch leg strikes and Body strikes for Round 1","d17c1c66":"- <a href='#1'>1. Introduction<\/a>  \n- <a href='#2'>2. Loading libraries and retrieving data<\/a>\n- <a href='#3'>3. Understanding the Data<\/a>\n- <a href='#4'>4. Missing Values<\/a>\n- <a href='#5'>5.  Data Visualization<\/a>","b0fba593":"So most fights are going to the judges. Second most popular way is Knockout and the Technical KO.\n\nLet's check how this is distibuted with respect to Age for 'Red' fighters.","218219f2":"# <a id='3'>3. Understanding the data<\/a>\n\nDataset contains list of all UFC fights since 2013 with summed up entries of each fighter's round by round record preceding that fight. Created in the attempt to predict a UFC fight winner .  Each row represents a single fight - with each fighter's previous records summed up prior to the fight. Blank stats mean its the fighter's first fight since 2013 which is where granular data for UFC fights. \n\nWe have about 895 columns, few important columns to note:\n\n* BPrev: Previous fights by 'Blue' fighter\n* B_Age: Age of 'Blue' fighter\n* B_Height: Height of 'Blue' fighter\n* B_Weight: Weight of 'Blue' fighter\n* B_Location: Location of 'Blue' fighter\n* B_Hometown: Hometown of 'Blue fighter\n* RPrev: Previous fights by 'Red' fighter\n* R_Age: Age of 'Red' fighter\n* R_Height: Height of 'Red' fighter\n* R_Weight: Weight of 'Red' fighter\n* R_Location: Location of 'Red' fighter\n* R_Hometown: Hometown of 'Red fighter\n* Date: Date of the fight\n* winby: How did the fighter win the fight (decision, submission KO etc.)\n* winner: Who was the winner of the fight?\n\nApart from this, dataset contains all the techniques (punch, kicks, takedowns etc.) attempted and landed by the fighters in each round. "}}