{"cell_type":{"d8b8cf1e":"code","3631d2ee":"code","1f959199":"code","b77d92ed":"code","64221551":"code","1c96001f":"code","7cbd5b8e":"code","3d42bd10":"code","72db234a":"code","43b879ce":"code","08774d1e":"code","48406c6e":"code","ab05e6b4":"code","44a8d345":"code","8904ceb9":"code","0077d29b":"code","b0bfbe74":"code","e28bb99b":"code","e17d7e9f":"code","3ae59627":"code","f30f8c02":"code","922b2c46":"code","ae709b58":"code","05221f90":"code","4c3b6ff2":"code","89ba11b5":"code","924b6275":"code","bad2cac9":"code","e63d11b0":"code","47e9c4e8":"code","bcc2360d":"code","3180e2e8":"code","dca9b262":"code","68d82b68":"code","0ba258ca":"code","204fd83c":"code","77f1fd23":"code","691b0382":"code","103a83c6":"code","5864b65b":"code","830b8350":"code","46aed9ac":"code","9095810e":"code","0f067575":"code","f965d490":"code","ead7e51f":"code","8189facb":"code","4ccd8553":"code","79ed9404":"code","9c186b53":"code","15178a56":"code","881ade29":"code","3d19164f":"code","02571ecc":"markdown","d4978b2d":"markdown","4e7a6911":"markdown","30663e98":"markdown","9bfb74bc":"markdown","fe7f793c":"markdown","0f65177b":"markdown","6c257fb0":"markdown","1c8480ab":"markdown","f4b29dde":"markdown","199c69d9":"markdown"},"source":{"d8b8cf1e":"#import packages\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px ","3631d2ee":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","1f959199":"#import database\ndf = pd.read_csv(\"..\/input\/global-shark-attacks\/attacks.csv\", encoding = \"ISO-8859-1\")\ndf.head()","b77d92ed":"df.columns","64221551":"#Removing unnecessary columns \ndf = df.drop(['Unnamed: 22', 'Unnamed: 23', 'Area', 'Case Number', 'Investigator or Source', 'Name', 'Location', 'Injury', 'pdf', 'href formula', 'href', 'Case Number.1', 'Case Number.2', 'original order'], axis = 1)","1c96001f":"df","7cbd5b8e":"df.isna().sum()","3d42bd10":"len(df)","72db234a":"#Every Column of the database contains at least 19400 missing values (75%)\n#Probably those missing values are in the same row.\n#To test that, I will remove the missing lines values of the column 'Date'\n\ndf.dropna(subset=['Date'], inplace = True)","43b879ce":"#We had a lot of columns NaN in this DataSet\ndf.isna().sum()","08774d1e":"df","48406c6e":"#Still have a lot of NaN values in 'Time','Species' and 'Age', so I chose to remove those columns \ndf = df.drop(['Time', 'Species ', 'Age'], axis = 1)","ab05e6b4":"df","44a8d345":"df.isna().sum()","8904ceb9":"print(df.dtypes)\nprint('-'*60)\nprint(df.iloc[0])","0077d29b":"#Converting 'Year' from float to Int\ndf.dropna(subset=['Year'], inplace = True)\ndf.Year = df.Year.astype(int)","b0bfbe74":"df.groupby('Year').count()","e28bb99b":"plt.figure(figsize = (15,5))\nsns.histplot(data=df, x=\"Year\")\nplt.show()","e17d7e9f":"#Removing the data where 'Year' >1960, because thats the period of the study i am interested in\ndf = df.loc[df['Year'] > 1960,:]\ndf = df.loc[df['Year'] < 2018,:]","3ae59627":"table = df.groupby('Year').count()","f30f8c02":"plt.figure(figsize = (15,5))\nsns.lineplot(data=table, x=\"Year\", y = table['Type'])\nplt.show()","922b2c46":"df","ae709b58":"#Remove the 'Date' columns, since I'm interest only in the year of the accident\ndf = df.drop('Date', axis = 1)","05221f90":"df","4c3b6ff2":"print(df['Country'].value_counts())","89ba11b5":"#Function to group small data in the 'Others' category\n\ndef group(column, threshold):\n    table = df[column].value_counts()\n    grouped_columns = [i for i in table.index if table[i] < threshold]\n    for n in grouped_columns:\n        df.loc[df[column] == n, column] = 'Other'\n    print(df[column].value_counts())\n\n#Function to plot histrogram        \n     \ndef histogram(column):\n    plt.figure(figsize=(20,10))\n    grafico = sns.countplot(column,  data = df, order = df[column].value_counts().index)\n    grafico.tick_params(axis='x', rotation = 90)","924b6275":"group('Country', 50)","bad2cac9":"histogram('Country')","e63d11b0":"print(df['Activity'].value_counts())","47e9c4e8":"#Grouping some categories\n\ndf.loc[df['Activity'].str.contains('surf', case=False, na=False), 'Activity'] = 'Surfing'\ndf.loc[df['Activity'].str.contains('boarding', case=False, na=False), 'Activity'] = 'Surfing'\ndf.loc[df['Activity'].str.contains('swim', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('fishing', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('aquarium', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('hunt', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('trap', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('walk', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('wading', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('float', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('Treading water', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('pull', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('pick', case=False, na=False), 'Activity'] = 'Fishing'\ndf.loc[df['Activity'].str.contains('bath', case=False, na=False), 'Activity'] = 'Swimming'\ndf.loc[df['Activity'].str.contains('diving', case=False, na=False), 'Activity'] = 'Diving'\ndf.loc[df['Activity'].str.contains('snorkel', case=False, na=False), 'Activity'] = 'Diving'\ndf.loc[df['Activity'].str.contains('photo', case=False, na=False), 'Activity'] = 'Photo shoot'\ndf.loc[df['Activity'].str.contains('film', case=False, na=False), 'Activity'] = 'Filming'\ndf.loc[df['Activity'].str.contains('float', case=False, na=False), 'Activity'] = 'Floating'\ndf.loc[df['Activity'].str.contains('boarding', case=False, na=False), 'Activity'] = 'Boarding'\ndf.loc[df['Activity'].str.contains('wash', case=False, na=False), 'Activity'] = 'Washing'","bcc2360d":"print(df['Activity'].value_counts())","3180e2e8":"group('Activity', 10)","dca9b262":"histogram('Activity')","68d82b68":"print(df['Sex '].value_counts())","0ba258ca":"df['Sex '].unique()","204fd83c":"df.loc[df['Sex '].str.contains('M ', case=False, na=False), 'Sex '] = 'M'","77f1fd23":"df.drop(df[df['Sex '] == 'lli'].index, inplace=True)","691b0382":"print(df['Sex '].value_counts(normalize = True))","103a83c6":"histogram('Sex ')","5864b65b":"print(df['Type'].value_counts())","830b8350":"df.drop(df[df['Type'] == 'Questionable'].index, inplace=True)","46aed9ac":"df.loc[df['Type'].str.contains('Boat', case=False, na=False), 'Type'] = 'Boat'","9095810e":"print(df['Type'].value_counts())","0f067575":"print(df['Fatal (Y\/N)'].value_counts())","f965d490":"df.drop(df[df['Fatal (Y\/N)'] == 'UNKNOWN'].index, inplace=True)\ndf.drop(df[df['Fatal (Y\/N)'] == 'M'].index, inplace=True)\ndf.drop(df[df['Fatal (Y\/N)'] == '2017'].index, inplace=True)","ead7e51f":"print(df['Fatal (Y\/N)'].value_counts(normalize = True))","8189facb":"histogram('Fatal (Y\/N)')","4ccd8553":"df.isna().sum()","79ed9404":"df['Fatal (Y\/N)'].dropna(inplace = True)","9c186b53":"df['Fatal (Y\/N)'].unique()","15178a56":"df = df[df['Fatal (Y\/N)'].isna() == False]","881ade29":"df","3d19164f":"for column in df:\n    graph = px.histogram(df, x = column, color = 'Fatal (Y\/N)')\n    graph.show()","02571ecc":"**Conclusion**\n\n- Swimming activities tend to be more dangerous than others\n\n- Sea Disaster is a rare type, but very deadly\n\n- The proportion of accidents that resulted in deaths in male and females are very similar, but the absolute number of male accidents are much higher.","d4978b2d":"### Exploratory data analysis","4e7a6911":"## Analysing Fatal (Y\/N) vs the other attributes","30663e98":"### Verify the types in each column","9bfb74bc":"**Sex**","fe7f793c":"**Fatal (Y\/N)**","0f65177b":"**Conclusions**\n\n- The number of shark accidents have a tendency to be higher every year, since the 1980s. This might be because more cases are being reported, or because sharks and humans are living closer than before.\n\n- The majority of cases are in US, Australia and South Africa.\n\n- Most accidents happen in Surfing, Swimming and Fishing activities.\n\n- Accidents with Males correspond to 86% of the total cases.\n\n- 87% of the accidents are not fatal.","6c257fb0":"**Activity**","1c8480ab":"**Type**","f4b29dde":"### Treating missing values","199c69d9":"**'Country'**"}}