{"cell_type":{"2d86fabb":"code","e4c256b7":"code","445cdefd":"code","aa1d7a0c":"code","aa71a035":"code","390ae650":"code","00d76d78":"code","e7f964ed":"code","1b291205":"code","51d4f7e7":"code","a7dd7cfc":"code","d55d5282":"code","259afe7f":"code","76ade374":"code","d40177ae":"code","77a5cf53":"code","26be1738":"code","3c60e68f":"code","31f8a332":"code","d118582d":"markdown","b5b5c0aa":"markdown","1442ea8b":"markdown","1222a509":"markdown","8a9b9dbb":"markdown","ef136166":"markdown"},"source":{"2d86fabb":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimport plotly.graph_objects as go\nfrom fbprophet import Prophet # https:\/\/github.com\/facebook\/prophet","e4c256b7":"#From Kaggle Data\ndf = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv',parse_dates=['Last Update'])\ndf.rename(columns={'ObservationDate':'Date', 'Country\/Region':'Country'}, inplace=True)","445cdefd":"df_japan = df[df[\"Country\"] == \"Japan\"].copy()","aa1d7a0c":"print(df_japan.tail())","aa71a035":"# Only Japan Data\n# From https:\/\/www.mhlw.go.jp\/stf\/covid-19\/open-data.html by the Ministry of Health, Labor and Welfare\ndf2_pcr_tested = pd.read_csv('https:\/\/www.mhlw.go.jp\/content\/pcr_tested_daily.csv')\ndf2_pcr_positive = pd.read_csv('https:\/\/www.mhlw.go.jp\/content\/pcr_positive_daily.csv')\n\n# print(df2_pcr_tested)\n# print(df2_pcr_positive)\n\ndf2 = df2_pcr_tested.merge(df2_pcr_positive,  on='\u65e5\u4ed8')","390ae650":"print(df2.tail())","00d76d78":"pcr_tested_japan = df2\npcr_tested_japan = pcr_tested_japan.rename(columns={'\u65e5\u4ed8': 'Date'})\npcr_tested_japan = pcr_tested_japan.rename(columns={'PCR \u691c\u67fb\u5b9f\u65bd\u4ef6\u6570(\u5358\u65e5)': 'PCR_tested'})\npcr_tested_japan = pcr_tested_japan.rename(columns={'PCR \u691c\u67fb\u967d\u6027\u8005\u6570(\u5358\u65e5)': 'PCR_confirmed'})","e7f964ed":"fig = go.Figure()\nfig.add_trace(go.Bar(x=pcr_tested_japan['Date'],\n                y=pcr_tested_japan['PCR_tested'],\n                name='PCR_tested',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=pcr_tested_japan['Date'],\n                y=pcr_tested_japan['PCR_confirmed'],\n                name='PCR_comfirmed',\n                marker_color='Red'\n                ))\nfig.update_layout(\n    title='Japan Corona Virus Cases - PCR tested, PCR comfirmed(single day basis)',\n    xaxis_tickfont_size=14,\n    yaxis=dict(\n        title='Number of Cases',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","1b291205":"ctrj_num = (pcr_tested_japan['PCR_confirmed'] \/ pcr_tested_japan['PCR_tested']) * 100\ncomfirmed_tested_ratio_japan = pd.DataFrame({'Date': pcr_tested_japan['Date'], 'comfirmed_tested_ratio_japan': ctrj_num})\n# Drop Date:2020\/4\/12\ncomfirmed_tested_ratio_japan = comfirmed_tested_ratio_japan[comfirmed_tested_ratio_japan[\"Date\"] != \"2020\/4\/12\"]\ncomfirmed_tested_ratio_japan","51d4f7e7":"fig = go.Figure()\n\nfig.add_trace(go.Scatter(x=comfirmed_tested_ratio_japan['Date'],\n                y=comfirmed_tested_ratio_japan['comfirmed_tested_ratio_japan'],\n                mode='lines+markers',\n                name='PCR_comfirmed \/ PCR_tested Ratio(%)'\n                ))\nfig.update_layout(\n    title='Japan Corona Virus Cases - PCR_comfirmed \/ PCR_tested Ratio(%)',\n    xaxis_tickfont_size=14,\n    yaxis=dict(\n        title='% of Cases',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","a7dd7cfc":"confirmed_japan = df_japan.groupby('Date').sum()['Confirmed'].reset_index()\ndeaths_japan = df_japan.groupby('Date').sum()['Deaths'].reset_index()\nrecovered_japan = df_japan.groupby('Date').sum()['Recovered'].reset_index()","d55d5282":"ccj_date = confirmed_japan['Date']\nccj_num = confirmed_japan['Confirmed'] - deaths_japan['Deaths'] - recovered_japan['Recovered']\ncurrent_confirmed_japan = pd.DataFrame({'Date': ccj_date, 'Current_Confirmed': ccj_num})\n# print(current_confirmed_japan)","259afe7f":"fig = go.Figure()\nfig.add_trace(go.Bar(x=confirmed_japan['Date'],\n                y=confirmed_japan['Confirmed'],\n                name='Confirmed',\n                marker_color='Blue'\n                ))\nfig.add_trace(go.Bar(x=deaths_japan['Date'],\n                y=deaths_japan['Deaths'],\n                name='Deaths',\n                marker_color='Red'\n                ))\nfig.add_trace(go.Bar(x=recovered_japan['Date'],\n                y=recovered_japan['Recovered'],\n                name='Recovered',\n                marker_color='Green'\n                ))\nfig.add_trace(go.Scatter(x=current_confirmed_japan['Date'],\n                y=current_confirmed_japan['Current_Confirmed'],\n                mode='lines+markers',\n                name='Current Confirmed'\n                ))\nfig.update_layout(\n    title='Japan Corona Virus Cases - Confirmed, Deaths, Recovered, Current Confirmed',\n    xaxis_tickfont_size=14,\n    yaxis=dict(\n        title='Number of Cases',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","76ade374":"fig = go.Figure()\nfig.add_trace(go.Bar(x=deaths_japan['Date'],\n                y=deaths_japan['Deaths'],\n                name='Deaths',\n                marker_color='Red'\n                ))\nfig.update_layout(\n    title='Japan Corona Virus Cases - Deaths',\n    xaxis_tickfont_size=14,\n    yaxis=dict(\n        title='Number of Cases',\n        titlefont_size=16,\n        tickfont_size=14,\n    ),\n    legend=dict(\n        x=0,\n        y=1.0,\n        bgcolor='rgba(255, 255, 255, 0)',\n        bordercolor='rgba(255, 255, 255, 0)'\n    ),\n    barmode='group',\n    bargap=0.15, # gap between bars of adjacent location coordinates.\n    bargroupgap=0.1 # gap between bars of the same location coordinate.\n)\nfig.show()","d40177ae":"confirmed = confirmed_japan\ndeaths = deaths_japan\nrecovered = recovered_japan\ncurrent_confirmed = current_confirmed_japan","77a5cf53":"current_confirmed.columns = ['ds','y']\ncurrent_confirmed['ds'] = pd.to_datetime(current_confirmed['ds'])","26be1738":"m = Prophet(interval_width=0.95)\nm.fit(current_confirmed)\nfuture = m.make_future_dataframe(periods=7)\nfuture.tail()","3c60e68f":"forecast = m.predict(future)\nforecast[['ds', 'yhat', 'yhat_lower', 'yhat_upper']].tail()","31f8a332":"current_confirmed_forecast_plot = m.plot(forecast)","d118582d":"## Forecasting Total Number of Current Confirmed(Confirmed - Deaths - Recovered) in Japan","b5b5c0aa":"### Transforming Data for Forecasting","1442ea8b":"### Summary Plot of Cases of Japan - Confirmed, Deaths, Recovered, Current Confirmed","1222a509":"# COVID-19 Novel Coronavirus: Analysis & Prediction(Japan)","8a9b9dbb":"![](http:\/\/) - (2020\/05\/10) Japanese government corrected miscalculation of \"Recovered\" count.","ef136166":"## Data Import, Preprocessing and EDA"}}