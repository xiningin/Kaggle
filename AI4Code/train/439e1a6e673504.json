{"cell_type":{"dd186319":"code","7a2aa56d":"code","f46eb71c":"code","09f1fe5f":"code","da3e53a5":"code","4943f354":"code","7cc540b3":"code","adb5a8cb":"code","2b32d875":"markdown","093014f2":"markdown","e6ca97cd":"markdown","bf83cff4":"markdown","45cca8ee":"markdown","3c269a8c":"markdown","6f619730":"markdown","04eba376":"markdown"},"source":{"dd186319":"from IPython.display import IFrame\nIFrame(src='https:\/\/www.dashboardom.com\/boxofficemojo', width='100%', height=600)","7a2aa56d":"import advertools as adv\nimport pandas as pd\npd.options.display.max_columns = None","f46eb71c":"boxoffice = pd.read_csv('..\/input\/boxoffice_march_2019.csv')\nboxoffice.head(20).style.format({'lifetime_gross': '{:,}'})","09f1fe5f":"word_freq_1 = adv.word_frequency(text_list=boxoffice['title'], \n                                 num_list=boxoffice['lifetime_gross'], \n                                 phrase_len=1, \n                                 rm_words=list(adv.stopwords['english']) + ['-', '', 'the'])\nword_freq_1.head(20).style.format({'wtd_freq':\"{:,}\", 'rel_value': \"{:,}\"})","da3e53a5":"word_freq_2 = adv.word_frequency(boxoffice['title'], boxoffice['lifetime_gross'], phrase_len=2,\n                                rm_words=['of the', 'and the', 'in the', 'to the'])\nword_freq_2.head(20)","4943f354":"boxoffice[boxoffice['title'].str.contains('(?i)the last')].head(20)","7cc540b3":"boxoffice[boxoffice['title'].str.contains('(?i)the dark')].head(20)","adb5a8cb":"# import re\n# import pandas as pd\n# import requests\n# from bs4 import BeautifulSoup\n\n# final_list = []\n# for i in range(1, 280):\n#     try:\n#         page = 'http:\/\/www.boxofficemojo.com\/alltime\/domestic.htm?page=' + str(i) + '&p=.htm'\n#         resp = requests.get(page)\n#         soup = BeautifulSoup(resp.text, 'lxml')\n#         table_data = [x.text for x in soup.select('tr td')[11:511]]  # trial and error to get the exact positions\n#         temp_list = [table_data[i:i+5] for i in range(0, len(table_data[:-4]), 5)] # put every 5 values in a row\n#         for temp in temp_list:\n#             final_list.append(temp)\n#         if not i%10:\n#             print('getting page:', i)\n#     except Exception as e:\n#         break\n# print('scraped pages:', i)\n        \n# na_year_idx = [i for i, x in enumerate(final_list) if x[4] == 'n\/a']  # get the indexes of the 'n\/a' values\n# new_years = [1998, 1999, 1960, 1973]  # got them by checking online\n\n# print(*[(i, x) for i, x in enumerate(final_list) if i in na_year_idx], sep='\\n')\n# print('new year values:', new_years)\n\n# for na_year, new_year in zip(na_year_idx, new_years):\n#     final_list[na_year][4] = new_year\n#     print(final_list[na_year], new_year)\n    \n\n# regex = '|'.join(['\\$', ',', '\\^'])\n\n# columns = ['rank', 'title', 'studio', 'lifetime_gross', 'year']\n\n# boxoffice_df = pd.DataFrame({\n#     'rank': [int(x[0]) for x in final_list],  # convert ranks to integers\n#     'title': [x[1] for x in final_list],  # get titles as is\n#     'studio': [x[2] for x in final_list],  # get studio names as is\n#     'lifetime_gross': [int(re.sub(regex, '', x[3])) for x in final_list],  # remove special characters and convert to integer\n#     'year': [int(re.sub(regex, '', str(x[4]))) for x in final_list],  # remove special characters and convert to integer\n# })\n# print('rows:', boxoffice_df.shape[0])\n# print('columns:', boxoffice_df.shape[1])\n# print('\\ndata types:')\n# print(boxoffice_df.dtypes)\n# boxoffice_df.to_csv('path\/to\/file.csv', index=False)","2b32d875":"## Movie titles containing \"the last\"","093014f2":"# Interactive Dashboard - Boxoffice Mojo Alltime Revenue Data\n### [Data for 16,542 Hollywood movies](https:\/\/www.boxofficemojo.com\/alltime\/domestic.htm) as of August 3, 2019\n#### Aquick analysis of the words used in movie titles together with how they related to box-office revenue\n\nThis dashboard allows analysis of the different movies and studios to more easily read the data. \nIt is available on https:\/\/www.dashboardom.com\/boxofficemojo","e6ca97cd":"## Most used 2-word phrases in movie titles","bf83cff4":"## Script that generated the data\nThe below script goes through the pages where the movies are listed, and create one big DataFrame that contains all movies. ","45cca8ee":"## More information on the functions used: \n\n* [Datacamp article explaining how the `word_frequency` function is created and how it works](https:\/\/www.datacamp.com\/community\/tutorials\/absolute-weighted-word-frequency)\n* [SEMrush article on text analysis for online marketers](https:\/\/www.semrush.com\/blog\/text-analysis-for-online-marketers\/)\n* [`word_frequency` function documentation](https:\/\/advertools.readthedocs.io\/en\/master\/advertools.html#module-advertools.word_frequency)","3c269a8c":"## Most used words in movie titles\n### `abs_freq`: number of occurrences of the word in movie titles\n### `wtd_freq`: number of occurrences multiplied by the lifetime gross of the movie\n### `rel_value`: value per occurrence in a movie title","6f619730":"## Movie titles containing \"the dark\"","04eba376":"## Top 20 Movies Sorted by Lifetime Gross US$"}}