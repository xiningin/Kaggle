{"cell_type":{"c9161a59":"code","16d9abbf":"code","cdf16dc1":"code","95d5bb89":"code","2ebff283":"code","d0e3147c":"code","2d86c47a":"code","d650e0a9":"code","9ba29b41":"code","46a615a3":"code","9a00e9af":"code","3988bca1":"code","7c230d43":"code","d4e86e1d":"code","69810fe6":"code","c9224342":"code","30c6d89a":"code","51842c22":"code","3ec3097b":"code","13d75af6":"code","c7e7e786":"code","c23f8920":"code","c09e05fd":"code","13ca0ed0":"code","95b538e1":"code","e009cb9e":"code","ffcf4ae0":"code","6ab6ba3b":"code","0573c352":"code","1a2e068b":"code","e5e1c110":"code","ee942cd3":"code","c7facd23":"code","c7665015":"code","2dda85e5":"markdown","8bbf4910":"markdown","100434e2":"markdown","917dbf5b":"markdown","d6498e88":"markdown","cd2007a9":"markdown","c57b05ec":"markdown","fc34fcf4":"markdown","59c73ee7":"markdown","ac0ee366":"markdown","7d4ff1ae":"markdown","f59d08c7":"markdown","dd8b3118":"markdown","109ac60a":"markdown","5ba4af69":"markdown","e4587c2d":"markdown","f5a78194":"markdown","8bf63870":"markdown","0e9aef3c":"markdown","7119a2fd":"markdown","4a8bb806":"markdown","878f6b13":"markdown","65d30476":"markdown","b82115d0":"markdown","15587e96":"markdown","bc279968":"markdown","b3c4e6c4":"markdown","3cc327bb":"markdown","7055a41e":"markdown","a3a9f060":"markdown","14e2a838":"markdown","3826f981":"markdown","953bee8e":"markdown","5a436406":"markdown","9136c7e4":"markdown","180cfaae":"markdown","ab9288cd":"markdown","dfa021d8":"markdown","8df66b8f":"markdown","836f680c":"markdown","fb3403b6":"markdown","3191bacf":"markdown","ea0b4b5e":"markdown","2dec63b3":"markdown","69f80ad3":"markdown","55718052":"markdown","96933366":"markdown","341bbdc3":"markdown"},"source":{"c9161a59":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport seaborn as sns # visualization\nimport matplotlib.pyplot as plt # visualization\nimport missingno as msno # visualizatin for missing values\n\nimport warnings\nwarnings.filterwarnings(\"ignore\") # ignore warnings","16d9abbf":"wine = pd.read_csv(\"..\/input\/wine-reviews\/winemag-data_first150k.csv\")\ndf = wine.copy()","cdf16dc1":"df.head()","95d5bb89":"df.info()","2ebff283":"df.columns","d0e3147c":"df.drop(\"Unnamed: 0\", axis = 1, inplace = True)","2d86c47a":"df.columns","d650e0a9":"round(df.describe(),3) ","9ba29b41":"plt.figure(figsize=(12,5))\nsns.heatmap(df.corr(),annot=True,linewidth=2.5,fmt='.3F',linecolor='black');","46a615a3":"sns.pairplot(df);","9a00e9af":"df.isnull().values.any()","3988bca1":"df.isnull().sum()","7c230d43":"msno.bar(df,color = sns.color_palette('viridis'));","d4e86e1d":"msno.matrix(df, color = (0.2, 0.4, 0.4));","69810fe6":"msno.heatmap(df);","c9224342":"# Missing Value Table\ndef missing_value_table(df):\n    missing_value = df.isna().sum().sort_values(ascending=False)\n    missing_value_percent = 100 * df.isna().sum()\/\/len(df)\n    missing_value_table = pd.concat([missing_value, missing_value_percent], axis=1)\n    missing_value_table_return = missing_value_table.rename(columns = {0 : 'Missing Values', 1 : '% Value'})\n    cm = sns.light_palette(\"red\", as_cmap=True)\n    missing_value_table_return = missing_value_table_return.style.background_gradient(cmap=cm)\n    return missing_value_table_return\n  \nmissing_value_table(df)","30c6d89a":"df.drop(\"region_2\", axis = 1, inplace = True)","51842c22":"df['price'] = df['price'].fillna(df.groupby(['country','province'])['price'].transform('mean'))","3ec3097b":"df.isnull().sum()","13d75af6":"df = df[~(df.price.isnull())]","c7e7e786":"df=df.sort_values(by=[\"country\",\"province\",\"region_1\"],ascending=True)\ndf.head()","c23f8920":"df=df.fillna(method=\"ffill\")","c09e05fd":"plt.subplot(2,1,1)\ndf.points.plot(kind='hist',color='pink',bins=50,figsize=(10,10))\nplt.title(\"Points Variable Histogram Chart\");\n\n\nplt.subplot(2,1,2)\ndf.price.plot(kind='hist',color='pink',bins=50,figsize=(10,10))\nplt.title(\"Price Variable Histogram Chart\");","13ca0ed0":"sns.boxplot(df.points);","95b538e1":"sns.boxplot(df.price);","e009cb9e":"Q1 = df.price.quantile(0.25)\nQ3 = df.price.quantile(0.75)\nIQR = Q3 - Q1","ffcf4ae0":"print(\"Q1:\",Q1)\nprint(\"Q3:\",Q3)\nprint(\"IQR:\",IQR)","6ab6ba3b":"upper_value = Q3 + 1.5*IQR\nlower_value = Q1 - 1.5*IQR","0573c352":"print(\"upper_value:\",upper_value)\nprint(\"lower_value:\",lower_value)","1a2e068b":"outlier_values = (df.price < lower_value) | (df.price > upper_value)","e5e1c110":"df.price[outlier_values].value_counts().sum() ","ee942cd3":"upper_outlier = df.price> upper_value\nupper_outlier.sum()","c7facd23":"df.price[upper_outlier] = upper_value","c7665015":"sns.boxplot(df.price);","2dda85e5":"### Variable Description","8bbf4910":"* Points with Boxplot","100434e2":"* Price with Boxplot","917dbf5b":"* Check, delete successful. Our new number of variables is 10.","d6498e88":"* In order to fill the missing values in the price variable, the average of the price variable is calculated according to the country and province variables.","cd2007a9":"* First 5 records in the Dataset","c57b05ec":"### Filling in the Missing Values","fc34fcf4":"* 28 price values that could not be filled with the average were deleted from the dataset.","59c73ee7":"* Total missing values in the variables.","ac0ee366":"* Although we filled the price variable, the reason for showing 28 missing values \u200b\u200bis that there is no price for the wine in that country and the city.","7d4ff1ae":" 1. **Unnamed: 0**:  A variable with no name and a variable specifying indexes will be deleted below because it is unnecessary.\n 1. **country**:  Variable indicating the countries of wines.\n 1. **description**:  A variable with descriptions about wines.\n 1. **designation**: Wine names.\n 1. **points**:  Scores of wines. (min=80, max=100)\n 1. **price**:  Prices of wines.\n 1. **province**: The variable that indicates the city where the wines are located in the country.\n 1. **region_1**: Region in the province.\n 1. **region_2**: Region in the province.\n 1. **variety**: Grape varieties.\n 1. **winery**: Winery names.","f59d08c7":"<a id=\"7\"><\/a>\n## Outlier Value Detection Using Boxplot and Histogram","dd8b3118":"* Heat maps are used to learn the relationships between variables. The values in this graph range from -1 to 1. If the value is 1 there is a correct relationship between the two variables, if the value is -1 there is a inverse relationship between the two variables. If the value is 0, there is no relationship between the two variables.","109ac60a":"<a id=\"8\"><\/a>\n## Outlier Value Analysis With IQR","5ba4af69":"* Unnecessary variable deletion.","e4587c2d":"* Since there is 59% missing value in region_2 variable, it is decided to delete it.","f5a78194":"* Missing value numbers and percentages.","8bf63870":"* Is there any missing value in the data set?","0e9aef3c":"*Observations that go far beyond the general trend in the data or that are quite different from other observations are called contradictory observations.*","7119a2fd":"* Dataset variable names.","4a8bb806":"**Outliers Value Correction**","878f6b13":"* Load file\n","65d30476":"# Contributors\n\n[Esma Demir](https:\/\/www.kaggle.com\/esmadmrr)\n\n[Serkan Kocairi](https:\/\/www.kaggle.com\/serkankocairi)","b82115d0":"<a id=\"3\"><\/a>\n## Defining and Visualizing Missing Values","15587e96":"<a id=\"0\"><\/a>\n# Load and Check Data","bc279968":"* Using the threshold values, outliers in the data set are detected.","b3c4e6c4":"# Introduction\n\n![](https:\/\/4.bp.blogspot.com\/--VcYZ84eGSM\/UWqKVLEU0SI\/AAAAAAAADNM\/2m6wjEzpjOA\/s1600\/%C5%9EARAP.jpg)\n\n## Context\n\nThis is a wine review data set.\n\nIn this data set, there are information such as country, city, region where the wines are produced, as well as information such as prices and scores of wines.\n\n## Content\n1. [Load and Check Data](#0)\n1. [Dataset Description](#1)\n1. [Missing Value Analysis](#2)\n    * [Defining and Visualizing Missing Values](#3)\n    * [Testing the Randomness of Missing Values](#4)\n    * [Operations on Missing Values](#5)\n1. [Outlier Value Analysis](#6)\n    * [Outlier Value Detection Using Boxplot and Histogram](#7)\n    * [Outlier Value Analysis With IQR](#8) ","3cc327bb":"* After Correction","7055a41e":"* Filling with the previous value.","a3a9f060":"* When filling other variables, it will be filled according to the previous value. The data set for this operation is sorted by country, province and region 1 variable.","14e2a838":"<a id=\"4\"><\/a>\n## Testing the Randomness of Missing Values","3826f981":"*Used when the values in the dataset are missing.\nMissing values are generally NA.*","953bee8e":"IQR is the distance between the first quarter Q1 and the third quarter Q3. Using IQR, upper and lower limit values are calculated as follows.","5a436406":"### Deleting Missing Values","9136c7e4":"* All outliers are upper outliers.","180cfaae":"* The correlation of numerical variables is examined in the dataset. It is determined that there is a moderate relationship between the variables.","ab9288cd":"<a id=\"5\"><\/a>\n## Operations on Missing Values","dfa021d8":"* Statistical information about the dataset.\n    * You can access information such as means, medians, standard deviations, minimum and maximum values of numerical variables with the describe() function.","8df66b8f":"<a id=\"6\"><\/a>\n# Outlier Value Analysis","836f680c":"<a id=\"2\"><\/a>\n# Missing Value Analysis","fb3403b6":"* With the info() function, we can see the total number of variables in the data set, the types of these variables and the number of observations in the variables.\n* Our Dataset consists of 150930 rows and 11 columns.\n* The most missing value is seen in the region_2 column.\n* Variables and types:\n    - float64(1):price\n    - int64(2):Unnamed: 0, points\n    - object(8):country, description, designation, province, region_1, region_2, variety, winery","3191bacf":"<a id=\"1\"><\/a>\n# Dataset Description","ea0b4b5e":"* Looking at the graph, the data at the top shows the missing data in the variables. On the left, it shows the percentages in the dataset. On the right, it shows the number of observations in the dataset. At the bottom of the graph, there are variable names.","2dec63b3":"* For Points:\n    The minimum value is 80, the maximum value is 100. This is actually a variable that is between certain values, so it would be unreasonable to study outliers.","69f80ad3":"**IQR (Interquartile Range)**","55718052":"* When the graphic is examined, there are observation information in the data set on the left part, variable names in the upper part and missing observations on the right part.","96933366":"* The relationship between numerical variables is examined. It cannot be said that there is a linear relationship between price and point variables when the data are examined.","341bbdc3":"* Total outliers."}}