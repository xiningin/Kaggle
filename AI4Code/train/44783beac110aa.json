{"cell_type":{"60c2c81e":"code","c1f9d9a2":"code","6ba51774":"code","52ec3759":"code","9ebb27c2":"code","14dc1c48":"code","7f7035bd":"code","8a1ef347":"code","09b95641":"code","e22fd0d9":"code","81fc7a41":"code","41017d0d":"code","eed0976f":"code","78a1089b":"code","20761104":"code","00690963":"code","66db3c08":"code","91d9f78b":"code","8a0a8b3b":"code","61ef59a8":"code","2b6b94c5":"code","6a61d02c":"code","9949f3ef":"code","ee91fec9":"code","67cf90be":"code","043f3bc7":"code","5fbb3229":"code","fddaac66":"code","babe4a0a":"code","5b937696":"code","2970e7fd":"code","10c4792f":"code","84afb89d":"code","c22f1032":"code","8f6aaff4":"code","6c19c010":"code","bc028a3f":"code","10580857":"code","62545d6d":"code","5ecc14ba":"code","0d8f0301":"code","ba825d84":"code","f543577e":"code","48ed166c":"code","e798e116":"code","f53d2b7a":"code","855f0c7b":"code","fb70966c":"code","101dc912":"code","91ef98ed":"code","14f08044":"code","2f84f753":"code","2255268b":"code","a15123e2":"code","f1aa6f29":"code","cfed71ad":"code","02a52ecb":"code","65495bdf":"code","3ec994d9":"code","97bc42bd":"code","c9fa8d97":"code","9c8f1b2c":"code","a8530495":"code","fd85a82e":"code","a46650c6":"code","125cbcc6":"code","15817353":"code","659b050a":"code","50c69ab2":"code","89f20e31":"code","cd73f2de":"code","af96587d":"code","ad969013":"code","a52d79a8":"code","d425ffd2":"code","e5540ca6":"code","6d9cf715":"code","8d900a60":"code","618a8975":"code","f08df615":"code","2a03a1ec":"code","832f7993":"code","2943c2ef":"code","30d405fe":"code","177aab43":"code","b26e1d28":"code","a2564165":"code","5c0e5b60":"code","a3fce565":"code","a64af51c":"code","7e8bcb9f":"code","ed6d670e":"markdown","cbe5ae5f":"markdown","ffd87c6a":"markdown","616d6a64":"markdown","a3efaf1f":"markdown","ec7ff0d9":"markdown","55f9bc66":"markdown","fcdf2212":"markdown","ed745afb":"markdown","b97cd686":"markdown"},"source":{"60c2c81e":"pip install chart_studio","c1f9d9a2":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom chart_studio import plotly\nimport chart_studio.plotly as py\nimport plotly.graph_objs as go \nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\n%matplotlib inline","6ba51774":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","52ec3759":"sr= pd.read_csv(\"\/kaggle\/input\/mental-health-and-suicide-rates\/Age-standardized suicide rates.csv\")","9ebb27c2":"sr['Sex'].value_counts()","14dc1c48":"sr=sr.astype({'2000':'float','2010':'float','2015':'float','2016':'float'})","7f7035bd":"sr.head()","8a1ef347":"plt.figure(figsize=(12,4))\nplt.ylim(8,13)\nplt.title('Suicide Rate per 100.000 people (Global)')\nsr[['2000','2010','2015','2016']].mean().plot(linestyle='dashed',color='orange',marker='o',markersize=10,markerfacecolor='yellow')","09b95641":"sr['sum']=sr[['2000','2010','2015','2016']].sum(axis=1)","e22fd0d9":"sr.sort_values('sum',ascending=False,inplace=True)\nsr=sr.reset_index().drop(columns='index')","81fc7a41":"sex = pd.get_dummies(sr['Sex'],drop_first=True)\nsr=pd.concat([sr,sex], axis=1)","41017d0d":"sr=sr.drop(columns='Sex')","eed0976f":"sr.head()","78a1089b":"sr.rename({' Male':'male'},axis=1,inplace=True)","20761104":"#Males#\nplt.figure(figsize=(12,4))\nplt.title('10 countries with the highest suicide rate means for 2000 , 2010 , 2015 & 2016 data (Males)')\nplt.ylim(100,270)\nplt.xlabel('Country')\nplt.ylabel('Sum of suicide rates')\nsns.lineplot(x='Country',y='sum',data=sr.head(10),color='orange',linestyle='dashed',marker='o',markersize=10,markerfacecolor='yellow')\n#Females#\nplt.figure(figsize=(12,4))\nplt.title('10 countries with the highest suicide rate means for 2000 , 2010 , 2015 & 2016 data (Females)')\nplt.xlabel('Country')\nplt.ylabel('Sum of suicide rates')\nplt.ylim(20,150)\nsns.lineplot(x='Country',y='sum',data=sr[sr['male']==0].head(10),color='orange',linestyle='dashed',marker='o',markersize=10,markerfacecolor='yellow')","00690963":"sr.drop(' Female',axis=1,inplace=True)","66db3c08":"sr.head()","91d9f78b":"srm=pd.melt(sr,id_vars=['Country','male','sum'],var_name='year',value_name='suicide rate')\nsrm.drop(columns='sum',inplace=True)","8a0a8b3b":"srm.sort_values('suicide rate',ascending=False,inplace= True)","61ef59a8":"srm=srm.reset_index().drop(columns='index')","2b6b94c5":"srm.head()","6a61d02c":"srm['year'].value_counts()","9949f3ef":"from sklearn.model_selection import train_test_split","ee91fec9":"X=srm[['male','year']]\ny=srm['suicide rate']","67cf90be":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.33, random_state=101)","043f3bc7":"from sklearn.linear_model import LinearRegression","5fbb3229":"lr= LinearRegression()","fddaac66":"lr.fit(X_train,y_train)","babe4a0a":"pred=lr.predict(X_test)","5b937696":"lr.coef_","2970e7fd":"from sklearn.metrics import mean_absolute_error,mean_squared_error,r2_score","10c4792f":"MAE= mean_absolute_error(y_test,pred)\nMSE= mean_squared_error(y_test,pred)\nRMSE= np.sqrt(mean_squared_error(y_test,pred))\nr2= r2_score(y_test,pred)\n","84afb89d":"MAE,MSE,RMSE,r2","c22f1032":"coeff= pd.DataFrame(lr.coef_,X.columns,columns=['Coefficient'])","8f6aaff4":"coeff","6c19c010":"srb=pd.read_csv(\"\/kaggle\/input\/mental-health-and-suicide-rates\/Age-standardized suicide rates.csv\")\nsrb.set_index(srb['Sex'],inplace=True)\nsrb.drop(' Male',axis=0,inplace=True)\nsrb.drop(' Female',axis=0,inplace=True)\nsrb.drop('Sex',axis=1,inplace=True)\nsrb.reset_index(inplace=True)","bc028a3f":"srb= srb[['Country','Sex','2000','2010','2015','2016']]","10580857":"srb.head()","62545d6d":"srb2016p=srb.drop(columns=['2015','2010','2000'])\nsrb2016=pd.melt(srb2016p,id_vars=['Country','Sex'],var_name='year',value_name='suicide rate')\n\nsrb2000p=srb.drop(columns=['2016','2015','2010'])\nsrb2000=pd.melt(srb2000p,id_vars=['Country','Sex'],var_name='year',value_name='suicide rate')","5ecc14ba":"cloro= dict(type='choropleth',\n            locations=srb2016['Country'],\n            locationmode='country names',\n            z=srb2016['suicide rate'],\n            text=srb2016['Country'],\n            colorscale='Oranges_r',\n            reversescale=True,\n            colorbar={'title':'suicide rate per 100.000 inhabitants'})","0d8f0301":"layout= dict(title= 'Suicide rate in 2016',\n             geo= dict(showframe=True,\n                       showcoastlines=True,\n                      projection={'type':'miller'}))","ba825d84":"choromap3= go.Figure(data=[cloro],layout=layout)","f543577e":"cloro2= dict(type='choropleth',\n            locations=srb2000['Country'],\n            locationmode='country names',\n            z=srb2000['suicide rate'],\n            text=srb2000['Country'],\n            colorscale='Oranges_r',\n            reversescale=True,\n            autocolorscale=False,\n            colorbar={'title':'suicide rate per 100.000 inhabitants'})","48ed166c":"layout2= dict(title= 'Suicide rate in 2000',\n             geo= dict(showframe=True,\n                       showcoastlines=True,\n                      projection={'type':'miller'}))","e798e116":"choromap4= go.Figure(data=[cloro2],layout=layout2)","f53d2b7a":"iplot(choromap4) ","855f0c7b":"iplot(choromap3)","fb70966c":"fac = pd.read_csv('\/kaggle\/input\/mental-health-and-suicide-rates\/Facilities.csv')\nhhrr= pd.read_csv('\/kaggle\/input\/mental-health-and-suicide-rates\/Human Resources.csv')","101dc912":"fac.head()","91ef98ed":"fac.isnull().sum()","14f08044":"sns.heatmap(fac.isnull(),cmap='Oranges')","2f84f753":"fac.drop(columns=['day _treatment','residential_facilities'],inplace=True)","2255268b":"hhrr.head()","a15123e2":"sns.heatmap(hhrr.isnull(),cmap='Oranges')","f1aa6f29":"res= pd.merge(fac,hhrr,on='Country')","cfed71ad":"res.columns","02a52ecb":"res.drop(columns='Year_y',axis=1,inplace=True)","65495bdf":"res.rename(columns={'Year_x':'year'},inplace=True)","3ec994d9":"sns.heatmap(res.isnull(),cmap='Oranges')","97bc42bd":"res.drop(columns='Social_workers',inplace=True)","c9fa8d97":"res.head()","9c8f1b2c":"tomerge= srb.drop(['2000','2010','2015'],axis=1)","a8530495":"tomerge['Sex'].value_counts()","fd85a82e":"tomerge.drop('Sex',axis=1,inplace=True)","a46650c6":"tomerge.rename({'2016':'suicide_rate'},axis=1,inplace=True)","125cbcc6":"tomerge","15817353":"full= pd.merge(res,tomerge,on='Country')","659b050a":"full.drop('year',axis=1,inplace=True)","50c69ab2":"full","89f20e31":"sns.heatmap(full.corr(),annot=True,cmap='Oranges')","cd73f2de":"sns.regplot(x='Psychiatrists',y='suicide_rate',color='orange', data=full)","af96587d":"full.head()","ad969013":"sns.heatmap(full.isnull(),cmap='Oranges')","a52d79a8":"ml=full.drop('Country',axis= 1)","d425ffd2":"ml=ml.apply(lambda x: x.fillna(x.mean()))","e5540ca6":"sns.heatmap(ml.isnull(),cmap='Oranges')","6d9cf715":"from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_absolute_error,mean_squared_error,r2_score","8d900a60":"X= ml.drop('suicide_rate',axis=1)\ny= ml['suicide_rate']\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=101)","618a8975":"lr= LinearRegression()\nlr.fit(X_train,y_train)\npred= lr.predict(X_test)","f08df615":"def eva(y_test,pred):\n    print('MAE=',(mean_absolute_error(y_test,pred)))\n    print('MSE=',(mean_squared_error(y_test,pred)))\n    print('Determination coeff. =', (r2_score(y_test,pred)))","2a03a1ec":"eva(y_test,pred)","832f7993":"lr.coef_","2943c2ef":"finalcoeff=pd.DataFrame(lr.coef_, X.columns,columns=['Coeff']).sort_values('Coeff',ascending=False)","30d405fe":"finalcoeff","177aab43":"sns.heatmap(finalcoeff,cmap='Oranges')","b26e1d28":"plt.figure(figsize=(12,6))\nplt.ylim(0,0.6)\nsns.regplot(x='suicide_rate',y='Mental _hospitals',color='orange',data=ml)\n","a2564165":"plt.figure(figsize=(12,6))\nplt.ylim(0,20)\nsns.regplot(x='suicide_rate',y='Psychiatrists',color='orange',data=ml)","5c0e5b60":"highest=full.sort_values('suicide_rate',ascending=False)\nhighest.reset_index(inplace=True)\nhighest.drop('index',axis=1,inplace=True)\n\nlowest=full.sort_values('suicide_rate',ascending=True)\nlowest.reset_index(inplace=True)\nlowest.drop('index',axis=1,inplace=True)","a3fce565":"hhrr= highest[['Country','Psychiatrists','Nurses','Psychologists','suicide_rate']]\nfacilities= highest.drop(['Psychiatrists','Nurses','Psychologists'],axis=1)\n\nhhrr2= lowest[['Country','Psychiatrists','Nurses','Psychologists','suicide_rate']]\nfacilities2=lowest.drop(['Psychiatrists','Nurses','Psychologists'],axis=1)\n","a64af51c":"plt.figure(figsize=(12,6))\nplt.title('Facility comparison: Highest suicide rate countries vs lowest')\nfacilities.head(10)[['Mental _hospitals','health_units','outpatient _facilities']].mean().plot(linestyle='dashed',color='blue',marker='o',markersize=10,label='Highest Suicide Rate')\nfacilities2.head(10)[['Mental _hospitals','health_units','outpatient _facilities']].mean().plot(color='orange',marker='o',markersize=10,label='Lowest Suicide Rate')\nplt.legend(loc=\"upper left\")","7e8bcb9f":"plt.figure(figsize=(12,6))\nplt.title('Human resource comparison: Highest suicide rate countries vs lowest')\nhhrr.head(10)[['Psychiatrists', 'Nurses', 'Psychologists']].mean().plot(linestyle='dashed',color='blue',marker='o',markersize=10,label='Highest Suicide Rate')\nhhrr2.head(10)[['Psychiatrists', 'Nurses', 'Psychologists']].mean().plot(color='orange',marker='o',markersize=10,label='Lowest Suicide Rate')\nplt.legend(loc=\"upper left\")","ed6d670e":"# Top 10 highest and lowest scores","cbe5ae5f":"*Geographical location for the top 10 countries with the **highest** suicide rate: **South America**: 1, **Africa**: 4 ,**Eastern Europe**: 3, **Asia**: 2 (1 northern asia, 1 south asia).*","ffd87c6a":"*Geographical location for the top 10 countries with the **lowest** suicide rate: **South America**: 3 (2 Caribbean, 1 mainland), **Middle East**: 4 , **Africa**: 2 , **Central Asia**: 1.*","616d6a64":"## Import new dataset with both sexes to geoplot.","a3efaf1f":"# **Data analysis project: Suicide rates & mental health.**","ec7ff0d9":"***The top countries with a lower suicide rate showed a higher rate of psychologists & outpatient facilities, as well as a fewer amount of psychiatrists, but the final analysis is inconclusive, as our full analysis wasn't capable of explaining the suicide rate variable, some reasons might be: Absence of variables that might've been important (socioeconomic, culture related, etc.), bigger sample size & missing data.*** ","55f9bc66":"***r2 score isnt big enough to extract any solid conclusions, but results indicate the following:***\n\n***Being male increases suicide rate by 7.73 points***\n\n***For every year we go back from this dataset (2016,2015,2010,2000) the suicide rate goes up by .087***","fcdf2212":"##### Having a .12 r2 score means we can't extract any solid conclusions from our data, but our regression analysis suggests that having a higher rate of psychiatrists and mental hospitals MIGHT increase suicide rates ####","ed745afb":"## Import datasets including human resources & facilities. ","b97cd686":"## Regression ##"}}