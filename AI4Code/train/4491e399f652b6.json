{"cell_type":{"81ca41ba":"code","ec11aa82":"code","ae73d902":"code","1499488e":"code","386a4c0e":"code","41a99353":"code","3787565f":"code","4ba6a240":"code","dc8e2967":"code","e4dbd146":"code","604dd773":"code","30d8cf5c":"code","935bfbb0":"code","18500eb2":"code","924c6b73":"code","c6ccc278":"code","ae3b6666":"code","b213627c":"code","e7f6f92f":"code","050cfe4e":"code","2c79ea0e":"code","c1da46e4":"code","eee9c347":"code","224dba7e":"code","fc4e8aee":"code","dbdc837d":"code","578ea02c":"markdown","ec92a85a":"markdown","35694c7e":"markdown","dadc2c1d":"markdown","f2f5116e":"markdown","915f492d":"markdown","2ec0dfd7":"markdown","ff1b2064":"markdown","561dd4b1":"markdown","0b325b67":"markdown","8a9e1c40":"markdown","d8c9da8a":"markdown","9a050032":"markdown","a12be129":"markdown","07d1f5af":"markdown","6a3daa00":"markdown","08c15175":"markdown","e5b9400f":"markdown","16a6b3d8":"markdown","7a87ddcd":"markdown","f0bbd0ca":"markdown","af669c09":"markdown","8d7f523b":"markdown","89cb93ed":"markdown","a14e8cf4":"markdown","1b444af4":"markdown","ffb02778":"markdown","7678dfee":"markdown","006b910b":"markdown","fc0a60ec":"markdown","d11982e7":"markdown","48c484c7":"markdown","108129bb":"markdown","9650fd9c":"markdown","ea0b54d1":"markdown","910d5e6d":"markdown","2e756c13":"markdown","3e3de75a":"markdown","332d37ab":"markdown","140d939d":"markdown"},"source":{"81ca41ba":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom statsmodels.formula.api  import ols","ec11aa82":"cars_ny = pd.read_csv('..\/input\/used-cars-ny-nj\/cars_ny_nj.csv')","ae73d902":"cars_ny.info()\npd.set_option('display.max_columns',500)\npd.set_option('display.max_rows',500)","1499488e":"cars_ny['condition'].unique()\nsalvage_cars = cars_ny[cars_ny['condition']=='salvage']\ncars_ny.drop(salvage_cars.index, inplace=True)","386a4c0e":"cars_ny['type'].unique()\nnot_cars = cars_ny[cars_ny['type'].isin(['other','van','bus'])]\ncars_ny.drop(not_cars.index, inplace=True)","41a99353":"drop_col = ['Unnamed: 0','url', 'region_url','VIN', 'paint_color',\n            'image_url','county','lat','long','posting_date']\ncars_ny = cars_ny.drop(columns=drop_col)","3787565f":"cars_ny.isnull().mean()","4ba6a240":"null_cols = cars_ny.columns[cars_ny.isnull().mean() > 0.3]\ncars_ny = cars_ny.drop(columns = null_cols)","dc8e2967":"cars_ny =cars_ny.dropna()","e4dbd146":"cars_ny = cars_ny.astype({'year':'int'})","604dd773":"cars_ny['id'].nunique() == len(cars_ny)","30d8cf5c":"cars_ny['price'].nunique()","935bfbb0":"zero_price = cars_ny[cars_ny['price'] == 0]\nlen(zero_price)\ncars_ny.drop(zero_price.index, inplace=True)","18500eb2":"under_1k = cars_ny[cars_ny['price'] < 1000]\ncars_ny.drop(under_1k.index, inplace=True)","924c6b73":"cars_ny[['description','price']].sort_values(\n    by='price',ascending=False).head(100)\nover_30k = cars_ny[cars_ny['price'] > 30000]\nlen(over_30k)\ncars_ny.drop(over_30k.index,inplace=True)\n","c6ccc278":"plt.hist(cars_ny['price'], bins =15,color='PowderBlue',edgecolor='Gray')\nplt.title('Price Distribution for Car Listings',\n          fontsize=24, color='MediumSeaGreen')\nplt.xlabel('Price', fontsize=16, color='MediumSeaGreen')\nplt.annotate(text=\n          '''Car prices ranging from\n          3000 USD to 7000 USD are \n          the most commonly occuring.''', xy=(12000,1400),fontsize=10,\n             backgroundcolor='Plum')\nplt.show()","ae3b6666":"len(cars_ny['manufacturer'].unique())\n\nmanu = cars_ny.groupby('manufacturer', as_index=False)['id'].count()\nmanu.rename(columns = {'id':'count'}, inplace=True)\nmanu = manu.sort_values(by='count', ascending=False).head(10)","b213627c":"# # Color palette.\nmy_color_pal = [\n    'MediumSeaGreen',\n    'LightSeaGreen',\n    'MediumAquaMarine',\n    'LightSkyBlue',\n    'LightSteelblue',\n    'PowderBlue',\n    'Plum',\n    'LightSalmon',\n    'LightPink',\n    'Moccasin',\n]","e7f6f92f":"width = manu['count']\ny = manu['manufacturer'].apply(lambda x: x.upper())\nplt.barh(y=y, width=width, color=my_color_pal, edgecolor='Gray')\nplt.title('Top Ten Most Common Manufactureres', fontsize=24,\n          color='MediumSeaGreen')\nplt.show()","050cfe4e":"car_corr = cars_ny[['price','year','odometer']]\ncorr_matrix = car_corr.corr()\nsns.heatmap(corr_matrix, annot=True,cmap=[\n    'Moccasin',\n    'PowderBlue',\n    'LightSalmon',\n    ])\n\nplt.show()\n","2c79ea0e":"car_corr = car_corr[car_corr['year'] >= 2000]\ncorr_matrix = car_corr.corr()\nsns.heatmap(corr_matrix, annot=True,cmap=[\n    'Moccasin',\n    'PowderBlue',\n    'LightSalmon',\n    ])\n\nplt.show()","c1da46e4":"df_year = cars_ny[cars_ny['year'] >= 2000].groupby(\n    'year',as_index=False)['price'].mean()\nx = df_year['year']\ny = df_year['price']\nplt.plot(x,y)\nplt.title('Model Year vs Average Price', fontsize=24,\n          color='MediumSeaGreen')\nplt.show()","eee9c347":"model = ols('price~year', data=df_year).fit()\nmodel.params","224dba7e":"mse = model.mse_resid\nrse = mse ** (1\/2)\n\nprint('R-squared: {r} \\nRSE: {rs}'.format(r=model.rsquared, rs=rse))","fc4e8aee":"years = pd.DataFrame({'year':df_year['year']})\npredict_data = years.assign(price=model.predict(years))","dbdc837d":"fig = plt.figure()\nsns.regplot(\n    x='year',\n    y='price',\n    ci=None,\n    data=df_year,\n    )\nsns.scatterplot(\n    x='year',\n    y='price',\n    data=predict_data,\n    color='red',\n    marker='s',\n    label = 'Model R-squared:0.9121192123740777')\nplt.title('Prediction Model & Observed Data')\nplt.show()","578ea02c":"<p style='font-size:16px;font-family:times new roman'>Let\u2019s consider cars with model years older than 2000. By doing this we work under the assumption that most people purchasing car in 2021 would not buy a car that is more than 20 years old. Excluding older car models results in the correlation coefficient increasing from 0.43 in the previous matrix, to 0.69. The relationship between model year and price is stronger when we only consider cars made in the last 20 years. <\/p>","ec92a85a":"<p style='font-size:16px;font-family:times new roman'>The dataset used in this analysis is publicly available from Kaggle [1]. The data includes relevant information from Craigslist car listings and is scraped by Kaggle user Austin Reese.<\/p>","35694c7e":"<p style='font-size:16px;font-family:times new roman'>Preview dataset.<\/p>","dadc2c1d":"<p style='font-size:16px;font-family:times new roman'>Drop columns that will not be needed.<\/p>","f2f5116e":"<p style='font-size:16px;font-family:times new roman'>The correlation matrix reveals that the strongest correlation exists between price and model year.<\/p>","915f492d":"<p style='font-size:16px;font-family:times new roman'>Remove any non-car listings.<\/p>","2ec0dfd7":"**<p style='font-size:16px;font-family:times new roman'>1. How are the car prices distributed in the dataset?<\/p>**","ff1b2064":"<h2 style='font-family:times new roman'>Conclusison<\/h2>","561dd4b1":"<p style='font-size:16px;font-family:times new roman'>Check percentage of nulls for each column.<\/p>","0b325b67":"<p style='font-size:16px;font-family:times new roman'>Import Packages.<\/p>","8a9e1c40":"<p style='font-size:16px;font-family:times new roman'>Drop listings of cars that are sold for parts.<\/p>","d8c9da8a":"<p style='font-size:16px;font-family:times new roman'>Removing rows with unrealistic low prices. Most likely they are just listings offering financing.<\/p>","9a050032":"<p style='font-size:16px;font-family:times new roman'>Unsurprisingly, Ford, Toyota and Honda are amongst the most common car manufacturers present in the dataset. <\/p>","a12be129":"<h2 style='font-family:times new roman'>Introduction<\/h2>","07d1f5af":"<h2 style='font-family:times new roman'>Tableau Dashboard<\/h2>","6a3daa00":"**<p style='font-size:16px;font-family:times new roman'>2. Which manufacturers are the most common in the dataset?<\/p>**","08c15175":"<h2 style='font-family:times new roman'>Analysis<\/h2>","e5b9400f":"<p style='font-size:16px;font-family:times new roman'>The dataset shows that cars listed at a price of $3,000 to $7,000 are the most frequently occurring in the dataset. <\/p>","16a6b3d8":"<p style='font-size:16px;font-family:times new roman'>When purchasing a car, there are many factors that go into making that decision. It\u2019s important that the car fits into the customer\u2019s budget as well as their lifestyle. While purchasing a pre-owned vehicle is often a more economical option, the buyer may also consider the car\u2019s mileage, condition, manufacturer, etc. Using a dataset containing information about vehicles listed on Craigslist in New York and New Jersey, we can identify interesting trends in the listings. We can also use linear regression to create a model that predicts the price of a car based on its model year.<\/p>","7a87ddcd":"**<p style='font-size:16px;font-family:times new roman'>3. Does a correlation exist between model year and car price?<\/p>**","f0bbd0ca":"<p style='font-size:16px;font-family:times new roman'>Check data types.<\/p>","af669c09":"<h1 style=\"font-family:times new roman;\"> <center>Car Dataset Exploratory Analysis and Price Prediction<\/center> <\/h1>\n\n<p><center style=\"color:#159364; font-family:times new roman; font-size:16px\">Exploratory Analysis of Car Dataset. Price prediction model using linear regression.<\/center><\/p>\n\n***","8d7f523b":"<p style='font-size:16px;font-family:timesnewroman'>The predicted model graphed along with the observed data. The R-squared value, 0.9121, may indicate that model has a good fit for the data. The RSE value, how much the predictions are typically wrong, is 2080. The difference between predicted prices and the observed prices is $2,080.This can easily be considered a big difference if your car budget is closer to $5,000 than $30,000.<\/p>","89cb93ed":"<p style='font-size:16px;font-family:times new roman'>For cars made in the last twenty years, the price of the car, on average, will increase relative to its model year. People often choose older car models in an effort to save money. Although the argument can be made that an older model may require more maintenance and therefore the cost of repairs may be less cost effective over time.<\/p>","a14e8cf4":"<p style='font-size:16px;font-family:times new roman'>Import dataset.<\/p> <p style='font-size:16px;font-family:times new roman'>NOTE: The dataset imported is a subset of <a href='https:\/\/www.kaggle.com\/austinreese\/craigslist-carstrucks-data'>craiglist used car dataset.<\/a> It excludes any car listings outside of New York and New Jersey.<\/p>","1b444af4":"<p style='font-size:16px;font-family:times new roman'>Check for duplicates.<\/p>","ffb02778":"![Screen Shot 2021-07-18 at 8.24.44 PM.png](attachment:3bd98be1-2491-44b0-ae80-3307c2278737.png)","7678dfee":"<p style='font-size:16px;font-family:times new roman'>The R-squared value for the model.<\/p>","006b910b":"<p style='font-size:16px;font-family:times new roman'>Drop any column with more than 30% nulls.<\/p>","fc0a60ec":"<h2 style='font-family:times new roman'>References<\/h2>","d11982e7":"<h2 style='font-family:times new roman'>Data<\/h2>","48c484c7":"<h2 style='font-family:times new roman'>Set Up Enviroment<\/h2>","108129bb":"1.\t[Austin Reese\u2019s Craiglist Cars Dataset on Kaggle.](https:\/\/www.kaggle.com\/austinreese\/craigslist-carstrucks-data)\n2.\t[Tarique Akhtar\u2019s Article on predicting car prices using machine learning.](https:\/\/towardsdatascience.com\/predicting-car-price-using-machine-learning-8d2df3898f16)\n3.\t[Brandon Fotz\u2019s Youtube video on linear regression (pt.1)]( https:\/\/www.youtube.com\/watch?v=kHZBy1uVNnM)\n4.   [Brandon Fotz\u2019s Youtube video on linear regression (pt.2)]( https:\/\/www.youtube.com\/watch?v=Qa2APhWjQPc)\n5.   [Brandon Fotz\u2019s Youtube video on linear regression (pt.3)](https:\/\/www.youtube.com\/watch?v=ZkjP5RJLQF4)\n\n\n\n\n","9650fd9c":"**<p style='font-size:16px;font-family:times new roman'>4. Price model prediction.<\/p>**","ea0b54d1":"<h2 style='font-family:times new roman'>Clean Data<\/h2>","910d5e6d":"<p style='font-size:16px;font-family:times new roman'>Using the OLS method to create a simple, linear regression model.<\/p>","2e756c13":"<p style='font-size:16px;font-family:times new roman'>Removing any cars with a $0 price.<\/p>","3e3de75a":"<p style='font-size:16px;font-family:times new roman'>Removing cars with listing prices over $30,000.<\/p>","332d37ab":"<p style='font-size:16px;font-family:times new roman'>Drop rows with null values.<\/p>","140d939d":"<p style='font-size:16px;font-family:times new roman'>The exploratory analysis of this dataset revealed interesting trends about cars listed in the New York-New Jersey area. If you are looking to purchase a car through Craigslist, cars between $3,000  and  $7,000 are the most frequently listed. It may also be easier to find cars made by either Ford, Chevrolet or Toyota, as they are the most frequently recurring manufacturers in the dataset. Lastly, if purchasing a car on a limited budget, it should be noted that the price difference, on average, between a car with a 2000 model year and one with 2020 is $16,900.<\/p>"}}