{"cell_type":{"a6d129e5":"code","7dd546a7":"code","5f541a98":"code","1b10131c":"code","3b8ab501":"code","ee391199":"code","3bda4b57":"code","a730bebe":"code","ba514b68":"code","2b776518":"code","a72886ff":"code","7bbc47d6":"code","a91b7dbf":"code","1ccdcde6":"code","55ba84df":"code","965efe59":"code","f4b211d7":"code","00423b32":"code","0650c797":"code","cbd34cd2":"code","67bbd900":"code","91308cf8":"code","da66ef75":"code","fa757dee":"code","623296e1":"code","4d9c78d4":"code","ea3e89a7":"code","2a22ed3a":"code","b6ba3d6b":"code","e68edaf8":"code","929a5eb2":"code","5459f2ee":"code","ca996bc1":"code","6f82e114":"code","1aa81d31":"code","4f3acede":"code","b56f8e4a":"code","c1ac53f9":"code","5b713543":"code","95702854":"code","60e763e5":"code","458ee2d3":"code","9fd7ead7":"code","b7d6d246":"code","8ecb62a9":"code","9955ca76":"code","75a3a9a5":"code","d769c3e6":"code","8270bcbd":"code","26cc946a":"code","f5dc7902":"code","fd5a38a3":"code","0ac5bd48":"code","e61af5f5":"code","8d35cf41":"code","969d2c6d":"code","14acc6a1":"code","31d1e68e":"code","fea44b26":"code","bf82ba35":"code","752bdf49":"code","b0ac9288":"code","4e3d8f01":"code","39b03456":"code","51dbc4b0":"code","2d51b094":"code","cd27d324":"code","7f7006e6":"code","d577a687":"code","1db9f189":"code","4135f2d1":"code","638c3a3a":"code","b50a503d":"code","6b8ce415":"code","72787657":"code","84257548":"code","03109336":"code","4568cc03":"code","e8a5af90":"code","259c070f":"code","7b87da6b":"code","d8a893f7":"code","193eb8e6":"code","72edc258":"code","731ef441":"code","ae6c9f47":"code","75a4ef57":"code","54409b93":"code","a217fe98":"code","33c5be14":"code","cc6afced":"code","3e8c5761":"code","63c48e00":"code","d4fb8a22":"code","d1b9a32f":"code","72f4a016":"code","6e693cba":"code","163b2150":"code","135aab14":"code","ab43f53d":"code","f7666040":"code","003dc620":"code","e3a3d695":"code","8dcafc57":"code","f8b36e32":"code","0c46b31a":"markdown","2c890cae":"markdown","1bb87d36":"markdown","5821a441":"markdown","aaecd89b":"markdown","bb862e87":"markdown","ac64eeba":"markdown","8e2ec84e":"markdown","8f020425":"markdown","9b3498df":"markdown","bf8bb3d0":"markdown","b1a26519":"markdown","82f16b9b":"markdown","b95022f0":"markdown","c5820ccf":"markdown","5ada014b":"markdown","51f174b1":"markdown","0b159090":"markdown","d8fedba5":"markdown","0c3abbeb":"markdown","4799c72e":"markdown","3475e52d":"markdown","2c06b3a7":"markdown","21e0f926":"markdown","24826a44":"markdown","b6bdc4ad":"markdown","8a9aff48":"markdown","0b382554":"markdown","2b6be9c3":"markdown","1fe18218":"markdown","ead6cda1":"markdown","dd9ab370":"markdown","366da2be":"markdown","8aca9256":"markdown","3e585d79":"markdown","68794cb9":"markdown","7b950032":"markdown","a03adf53":"markdown","5f5c1497":"markdown","195c6093":"markdown"},"source":{"a6d129e5":"import numpy as np \nimport pandas as pd \nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns \n\nsns.set() # \u4f7f\u7528\u521d\u59cb\u7f51\u683c\u72b6\u7ed8\u56fe\u7eb8\nmyfont = matplotlib.font_manager.FontProperties(fname=\"..\/input\/fontssimhei\/simhei.ttf\")\nplt.rcParams['font.family'] = ['Times New Roman']","7dd546a7":"sales_train = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/sales_train.csv')\nitems = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/items.csv')\nitem_cats = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/item_categories.csv')\nshops = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/shops.csv')\ntest = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/test.csv')\nsubmission = pd.read_csv('..\/input\/competitive-data-science-predict-future-sales\/sample_submission.csv')","5f541a98":"#\u67e5\u770b\u8bad\u7ec3\u96c6\u9500\u552e\u91cf\u7684\u524d5\u4e2a\u548c\u540e5\u4e2a\u6837\u672c\nsales_train.head(5).append(sales_train.tail(5))","1b10131c":"#\u8bad\u7ec3\u96c6\u6570\u636e\u5f62\u72b6\nprint(sales_train.shape)","3b8ab501":"#\u6d4b\u8bd5\u96c6\u6570\u636e\uff08\u5f85\u9884\u6d4b\uff09\u67e5\u770b\ntest.head(5).append(test.tail(5))","ee391199":"fig = plt.figure(figsize=(20,10)) # \u753b\u5e03\u5927\u5c0f\u8bbe\u7f6e\nplt.subplots_adjust(hspace=.4) # \u8c03\u6574\u5b50\u56fe\u7684\u4f4d\u7f6e\u8ddd\u79bb\uff0chspace\uff08\u5782\u76f4\u95f4\u8ddd\uff09= 0.4\n\n#\u67e5\u770bshop_id\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (0,0), rowspan=1, colspan=3)  # \u5efa\u7acb3*3\u7684\u7f51\u683c\u533a\u57df\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a0\u884c0\u5217\uff0c\u884c\u65b9\u5411\u53601\u4e2a\u5355\u4f4d\uff0c\u5217\u65b9\u5411\u5360\u636e3\u4e2a\u5355\u4f4d\nsales_train['shop_id'].value_counts(normalize=True).plot(kind='bar', color='orangered') # \u4f7f\u7528\u67f1\u72b6\u56fe\nplt.title('\u5546\u5e97ID\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe1\uff09',fontproperties=myfont)\nplt.xlabel('\u5546\u5e97ID',fontproperties=myfont)\nplt.ylabel('\u6807\u51c6\u5316\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\n#\u67e5\u770bitem_id\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (1,0), rowspan=1, colspan=1)  # \u5efa\u7acb3*3\u7684\u7f51\u683c\u533a\u57df\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a1\u884c0\u5217\uff0c\u884c\u65b9\u5411\u53601\u4e2a\u5355\u4f4d\uff0c\u5217\u65b9\u5411\u5360\u636e1\u4e2a\u5355\u4f4d\nsales_train['item_id'].plot(kind='hist', color='deepskyblue')  # \u4f7f\u7528\u76f4\u65b9\u56fe\uff0c\u989c\u8272=\u84dd\u8272\nplt.title('\u4ea7\u54c1ID\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe2\uff09',fontproperties=myfont)\nplt.xlabel('\u4ea7\u54c1ID',fontproperties=myfont)\nplt.ylabel('\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\n#\u67e5\u770bitem_price\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (1,1), rowspan=1, colspan=1)  # \u5efa\u7acb3*3\u7684\u7f51\u683c\u533a\u57df\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a1\u884c1\u5217\uff0c\u884c\u65b9\u5411\u53601\u4e2a\u5355\u4f4d\uff0c\u5217\u65b9\u5411\u5360\u636e1\u4e2a\u5355\u4f4d\nsales_train['item_price'].plot(kind='hist', color='darkorange')  # \u4f7f\u7528\u76f4\u65b9\u56fe\nplt.title('\u4ea7\u54c1\u4ef7\u683c\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe3\uff09',fontproperties=myfont)\nplt.xlabel('\u4ea7\u54c1\u4ef7\u683c',fontproperties=myfont)\nplt.ylabel('\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\n#\u67e5\u770bitem_cnt_day\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (1,2), rowspan=1, colspan=1)  # \u5efa\u7acb3*3\u7684\u7f51\u683c\u533a\u57df\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a1\u884c2\u5217\uff0c\u884c\u65b9\u5411\u53601\u4e2a\u5355\u4f4d\uff0c\u5217\u65b9\u5411\u5360\u636e1\u4e2a\u5355\u4f4d\nsales_train['item_cnt_day'].plot(kind='hist', color='cornflowerblue')  # \u4f7f\u7528\u76f4\u65b9\u56fe\nplt.title('\u4ea7\u54c1\u9500\u552e\u91cf\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe4\uff09',fontproperties=myfont)\nplt.xlabel('\u4ea7\u54c1\u9500\u552e\u91cf',fontproperties=myfont)\nplt.ylabel('\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\n#\u67e5\u770bdate_block_num\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (2,0), rowspan=1, colspan=3)  # \u5efa\u7acb3*3\u7684\u7f51\u683c\u533a\u57df\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a2\u884c0\u5217\uff0c\u884c\u65b9\u5411\u53601\u4e2a\u5355\u4f4d\uff0c\u5217\u65b9\u5411\u5360\u636e3\u4e2a\u5355\u4f4d\nsales_train['date_block_num'].value_counts(normalize=True).plot(kind='bar', color='darkseagreen') # \u4f7f\u7528\u67f1\u72b6\u56fe\nplt.title('\u6708\u4efd\u6570\u4e0e\u9500\u552e\u8bb0\u5f55\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe5\uff09',fontproperties=myfont)\nplt.xlabel('\u6708\u4efd\u6570',fontproperties=myfont)\nplt.ylabel('\u6807\u51c6\u5316\u9500\u552e\u8bb0\u5f55\u7684\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\nplt.show()","3bda4b57":"#\u67e5\u770b\u6392\u5e8f\u6700\u5927\u7684\u524d\u4e94\u4e2a\u5546\u54c1\u4ef7\u683c\nsales_train['item_price'].sort_values(ascending=False)[:5]","a730bebe":"#\u8fdb\u4e00\u6b65\u68c0\u67e5\u8be5\u4e09\u5341\u591a\u4e07\u7684\u552e\u4ef7\u5546\u54c1\n#\u5728\u6570\u636e\u4e2d\u627e\u5230\u5bf9\u5e94\u6574\u4f53\u4fe1\u606f\nsales_train[sales_train['item_price'] == 307980]","ba514b68":"#\u5728\u5546\u54c1\u4ecb\u7ecd\u4e2d\u627e\u5230\u5bf9\u5e94\u4fe1\u606f\nitems[items['item_id'] == 6066]","2b776518":"#\u8fd9\u662f\u4e00\u79cd\u4fc4\u7f57\u65af\u7684\u9632\u75c5\u6bd2\u4ea7\u54c1\uff0c\u9500\u552e\u7ed9\u4e86522\u4eba\u3002\u6211\u4eec\u9700\u8981\u8fdb\u4e00\u6b65\u67e5\u770b\u6570\u636e\u96c6\u4e2d\u8fd8\u6709\u65e0\u5173\u4e8e\u6b64\u5546\u54c1\u7684\u8bb0\u5f55\nsales_train[sales_train['item_id'] == 6066]","a72886ff":"#\u663e\u7136\uff0c\u53ea\u6709\u4e00\u6761\u8bb0\u5f55\u662f\u5173\u4e8e\u6b64\u5546\u54c1\u540d\u7684\uff0c\u6545\u53ef\u4ee5\u5f53\u4f5c\u4e00\u4e2a\u5f02\u5e38\u503c\u5220\u9664\nsales_train = sales_train[sales_train['item_price'] < 300000]","7bbc47d6":"#\u68c0\u67e5\u6781\u5c0f\u503c\u7aef\u7684\u5f02\u5e38\u60c5\u51b5\nsales_train['item_price'].sort_values(ascending=True)[:5]","a91b7dbf":"#\u6781\u5c0f\u7aef\u5b58\u5728\u9500\u552e\u4ef7\u4e3a\u8d1f\u7684\u60c5\u51b5\uff0c\u5728\u6570\u636e\u96c6\u4e2d\u8fdb\u4e00\u6b65\u68c0\u67e5\nsales_train[sales_train['item_price'] == -1]","1ccdcde6":"#\u67e5\u770b\u8be5\u5546\u54c1\u7684\u5bf9\u5e94\u4fe1\u606f\nsales_train[sales_train['item_id'] == 2973]","55ba84df":"#\u67e5\u770b\u8be5\u5546\u54c1\u5bf9\u5e94\u7684\u4ef7\u683c\u4fe1\u606f\nprice_info = sales_train[sales_train['item_id'] == 2973]['item_price']\nprice_info.describe()","965efe59":"#\u53ef\u89c1\u6b64\u5546\u54c1\u7684\u8fd9\u4e2a\u4ef7\u683c\u662f\u4e0d\u5408\u7406\u7684\uff0c\u800c\u4e14\u5e73\u5747\u552e\u4ef7\u57282000\u4ee5\u4e0a\uff0c\u6545\u5e94\u8be5\u5220\u53bb\u6216\u586b\u5145\u5176\u4ed6\u503c\n#\u8003\u8651\u5230\u4e0d\u540c\u5546\u5e97\u540c\u4e00\u4e2a\u5546\u54c1\u7684\u552e\u4ef7\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u6b64\u5e94\u8be5\u7528\u5176\u5bf9\u5e94\u768432\u53f7\u5546\u5e97\u4e2d\u6b64\u5546\u54c1\u7684\u4ef7\u683c\u4e2d\u4f4d\u6570\u4ee3\u66ff\nprice_median = sales_train[(sales_train['shop_id'] == 32) & (sales_train['item_id'] == 2973) & (sales_train['date_block_num'] == 4) & (sales_train['item_price'] > 0)].item_price.median()\nsales_train.loc[sales_train['item_price'] < 0, 'item_price'] = price_median","f4b211d7":"#\u67e5\u770b\u6392\u5e8f\u6700\u5927\u7684\u524d\u4e94\u4e2a\u5546\u54c1\u9500\u552e\u6570\u91cf\nsales_train['item_cnt_day'].sort_values(ascending=False)[:5]","00423b32":"#\u627e\u5230\u6700\u5927\u9500\u552e\u91cf2169\u5bf9\u5e94\u7684\u6570\u636e\u4fe1\u606f\nsales_train[sales_train['item_cnt_day'] == 2169]","0650c797":"#10\u6708\u4efd\u7684\u4e00\u5929\u91cc\uff0c11373\u53f7\u4ea7\u54c1\u572812\u53f7\u5e97\u5c31\u5356\u51fa\u4e862169\u6b21\u3002\n#\u68c0\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u5546\u54c1\u7684\u5bf9\u5e94\u4fe1\u606f\u3002\nitems[items['item_id'] == 11373]","cbd34cd2":"#\u501f\u52a9\u7ffb\u8bd1\uff0c\u8fd9\u662f\u4e00\u79cd\u548c\u4fc4\u7f57\u65af\u8fd0\u8f93\u516c\u53f8\u201cBoxberry\u201d\u6709\u5173\u7684\u8d27\u7269\u5546\u54c1\u3002\n#\u7ee7\u7eed\u67e5\u770b\u6b64\u5546\u54c1\u5728\u5176\u4ed6\u5546\u5e97\u7684\u9500\u552e\u60c5\u51b5\nsales_train[sales_train['item_id'] == 11373]","67bbd900":"#\u67e5\u770b\u8be5\u5546\u54c1\u5bf9\u5e94\u7684\u9500\u552e\u91cf\u4fe1\u606f\nsale_num = sales_train[sales_train['item_id'] == 11373]['item_cnt_day']\nsale_num.describe()","91308cf8":"#\u53ef\u89c111373\u8fd9\u4e2a\u5546\u54c1\u901a\u5e38\u5356\u5f97\u5f88\u5c11\uff0c\u9500\u552e\u91cf\u51e0\u4e4e\u5728\u4e2a\u4f4d\u6570\uff0875\uff05=8\u4ef6\uff09\u3002\n#\u56e0\u6b64\u5bf9\u4e8e\u9500\u552e\u6b21\u65702169\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5f02\u5e38\u503c\uff0c\u5e94\u5f53\u53bb\u9664\u3002\nsales_train = sales_train[sales_train['item_cnt_day'] < 2000]","da66ef75":"#\u6b64\u5916\u6ce8\u610f\u5230\u8fd8\u6709\u4e00\u4e2a\u5546\u54c1\u9500\u552e\u6b21\u6570\u8fbe\u52301000\u6b21\uff0c\u4fdd\u9669\u8d77\u89c1\u8fd8\u9700\u8981\u770b\u4e00\u4e0b\u8fd9\u4e2a\u5546\u54c1\n#\u627e\u5230\u9500\u552e\u91cf1000\u5bf9\u5e94\u7684\u6570\u636e\u4fe1\u606f\nsales_train[sales_train['item_cnt_day'] == 1000]","fa757dee":"#\u68c0\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u5546\u54c1\u7684\u5bf9\u5e94\u4fe1\u606f\u3002\nitems[items['item_id'] == 20949]","623296e1":"#\u501f\u52a9\u7ffb\u8bd1\uff0c\u8fd9\u662f\u4e00\u79cd\u8fc8\u514b\u54c1\u724c\u7684\u767d\u8272\u5c0f\u5305\u3002\n#\u7ee7\u7eed\u67e5\u770b\u6b64\u5546\u54c1\u5728\u5176\u4ed6\u5546\u5e97\u7684\u9500\u552e\u60c5\u51b5\nsales_train[sales_train['item_id'] == 20949]","4d9c78d4":"#\u67e5\u770b\u8be5\u5546\u54c1\u5bf9\u5e94\u7684\u9500\u552e\u91cf\u4fe1\u606f\nsale_num = sales_train[sales_train['item_id'] == 20949]['item_cnt_day']\nsale_num.describe()","ea3e89a7":"#\u540c\u6837\u5730\uff0c\u5bf9\u4e8e20949\u8fd9\u4e2a\u5546\u54c1\u901a\u5e38\u5356\u5f97\u5f88\u5c11\uff0c\u9500\u552e\u91cf\u51e0\u4e4e\u5728\u4e2a\u4f4d\u6570\uff0875\uff05=7\u4ef6\uff09\uff0c\u5e76\u4e14\u51fa\u4e4e\u610f\u6599\u5730\u51fa\u73b0\u4e86\u9500\u552e\u91cf\u8d1f\u503c\n#\u6545\u5bf9\u4e8e\u9500\u552e\u6b21\u65701000\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5f02\u5e38\u503c\uff0c\u5e94\u5f53\u53bb\u9664\u3002\nsales_train = sales_train[sales_train['item_cnt_day'] < 1000]","2a22ed3a":"#\u4e0a\u9762\u7684\u4fe1\u606f\u63d0\u9192\u6211\u4eec\u8fd8\u8981\u67e5\u9a8c\u67e5\u770b\u6392\u5e8f\u6700\u5c0f\u7684\u54ea\u4e9b\u5546\u54c1\u9500\u552e\u6570\u91cf\nsales_train['item_cnt_day'].sort_values(ascending=True)[:10]","b6ba3d6b":"#\u4f3c\u4e4e\u8bb8\u591a\u5546\u54c1\u90fd\u5b58\u5728\u9500\u552e\u8d1f\u503c\uff0c\u8fd9\u53ef\u80fd\u4ee3\u8868\u8fd9\u4e9b\u5546\u54c1\u4e0d\u4ec5\u6ca1\u6709\u9500\u552e\u53cd\u800c\u662f\u8fdb\u8d27\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u5904\u7406\u8fd9\u65b9\u9762\u7684\u95ee\u9898\u3002\n#\u5f02\u5e38\u503c\u5904\u7406\u6682\u65f6\u5230\u8fd9\u91cc\u7ed3\u675f\u3002","e68edaf8":"fig = plt.figure(figsize=(20,10))  # \u753b\u5e03\nplt.subplots_adjust(hspace=.4)  # \u5b50\u56fe\u95f4\u8ddd\n\n#\u67e5\u770bshop_id\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (0,0), rowspan=1, colspan=3)\ntest['shop_id'].value_counts(normalize=True).plot(kind='bar', color='darkviolet')\nplt.title('\u6d4b\u8bd5\u96c6\u5546\u5e97ID\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe6\uff09',fontproperties=myfont)\nplt.xlabel('\u5546\u5e97ID',fontproperties=myfont)\nplt.ylabel('\u6807\u51c6\u5316\u5546\u5e97ID\u7684\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\n#\u67e5\u770bitem_id\u7684\u5206\u5e03\nplt.subplot2grid((3,3), (1,0), rowspan=1, colspan=1)\ntest['item_id'].plot(kind='hist', color='sienna')\nplt.title('\u6d4b\u8bd5\u96c6\u5546\u54c1ID\u7684\u5206\u5e03\u72b6\u6001\uff08\u56fe7\uff09',fontproperties=myfont)\nplt.xlabel('\u5546\u54c1ID',fontproperties=myfont)\nplt.ylabel('\u6807\u51c6\u5316\u5546\u54c1ID\u7684\u51fa\u73b0\u6b21\u6570',fontproperties=myfont)\n\nplt.show()","929a5eb2":"#\u8fd4\u56de\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u5e97ID\u552f\u4e00\u503c\u7684\u6570\u76ee\nshops_train = sales_train['shop_id'].nunique()\nshops_test = test['shop_id'].nunique()\nprint('\u8bad\u7ec3\u96c6\u4e2d\u7684\u5546\u5e97ID\u6709 {} \u4e2a '.format(shops_train))\nprint('\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u5e97ID\u6709 {} \u4e2a '.format(shops_test))","5459f2ee":"#\u867d\u7136\u8bad\u7ec3\u96c6\u7684ID\u591a\u4e8e\u6d4b\u8bd5\u96c6\uff0c\u4f46\u8fd9\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u8bad\u7ec3\u96c6\u5305\u542b\u4e86\u51fa\u73b0\u5728\u6d4b\u8bd5\u96c6\u4e2d\u6240\u6709\u7684\u5546\u5e97\u3002\n#\u56e0\u6b64,\u9700\u8981\u68c0\u9a8c\u6d4b\u8bd5\u96c6ID\u662f\u5426\u4e3a\u8bad\u7ec3\u96c6ID\u7684\u4e00\u4e2a\u5b50\u96c6\u3002\ndef is_subset(set0,set1):\n    if set0.issubset(set1):\n        print (\"\u4e8c\u8005\u662f\u5b50\u96c6\u7684\u5305\u542b\u5173\u7cfb\") \n    else:\n        print (\"\u4e8c\u8005\u4e0d\u662f\u5b50\u96c6\u7684\u5305\u542b\u5173\u7cfb\")\n\nshops_train_set = set(sales_train['shop_id'].unique())\nshops_test_set = set(test['shop_id'].unique())\n\nprint('\u5224\u65ad\u7ed3\u679c\u4e3a\uff1a')\nis_subset(shops_test_set,shops_train_set)","ca996bc1":"#\u8fd9\u91cc\u786e\u5b9a\u4e86\u6d4b\u8bd5\u96c6\u4e2d\u7684\u6240\u6709\u5546\u5e97id\u90fd\u5728\u8bad\u7ec3\u96c6\u4e2d\u3002\n#\u4f46\u662f\u5728\u9879\u76ee\u7684\u7ade\u4e89\u8ba8\u8bba\u6709\u4e00\u4e2a\u5173\u4e8e\u91cd\u590d\u5e97\u94fa\u7684\u95ee\u9898\u88ab\u63d0\u5230\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u6211\u4eec\u8fdb\u884c\u5206\u6790\u3002","6f82e114":"#\u5bf9\u5546\u5e97\u540d\u79f0\u548cID\u8fdb\u884c\u6bd4\u8f83\nshops","1aa81d31":"#\u4ee4\u4eba\u610f\u5916\u7684\u662f\u8fd9\u4e9b\u5546\u5e97\u540d\u662f\u4ee5\u57ce\u5e02\u548c\u5730\u533a\u4f5c\u4e3a\u53f0\u5934\u7684\uff0c\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u6f5c\u5728\u7279\u5f81\n#\u800c\u4e14\u4ed4\u7ec6\u5206\u6790\u53ef\u4ee5\u53d1\u73b0ID\u4e3a0\u30011\u7684\u5546\u5e97\u540d\u4e0eID\u4e3a57\u300158\u51e0\u4e4e\u4e00\u81f4\uff0c\u533a\u522b\u5728\u4e8e\u5546\u5e970\u30011\u8fd8\u9644\u52a0\u4e86'\u0444\u0440\u0430\u043d'\uff08\u5f17\u5170\uff09\u4e00\u8bcd\n#\u8fd8\u6709ID\u4e3a10\u7684\u5546\u5e97\u540d\u4e0eID\u4e3a11\u51e0\u4e4e\u4e00\u81f4\uff0c\u90fd\u4e3a\"\u0416\u0443\u043a\u043e\u0432\u0441\u043a\u0438\u0439 \u0443\u043b. \u0427\u043a\u0430\u043b\u043e\u0432\u0430 39\u043c\"\uff08\u8339\u79d1\u592b\u65af\u57fa\u5927\u8857\u00b7\u5951\u5361\u6d1b\u592b39m\uff09\n#\u4e8c\u8005\u552f\u4e00\u533a\u522b\u5728\u4e8e\u6700\u540e\u7684\u89d2\u6807\u5b57\u7b26\u4e0d\u540c\uff0c\u5206\u522b\u662f'\uff1f'\u4e0e'2'","4f3acede":"#\u56e0\u6b64\uff0c\u6211\u8ba4\u4e3a\u8fd9\u4e9b\u51e0\u4e4e\u91cd\u590d\u7684ID\u9879\u5e94\u8be5\u88ab\u5408\u5e76\uff08\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u90fd\u8981\uff09\nsales_train.loc[sales_train['shop_id'] == 0, 'shop_id'] = 57\ntest.loc[test['shop_id'] == 0, 'shop_id'] = 57\n\nsales_train.loc[sales_train['shop_id'] == 1, 'shop_id'] = 58\ntest.loc[test['shop_id'] == 1, 'shop_id'] = 58\n\nsales_train.loc[sales_train['shop_id'] == 10, 'shop_id'] = 11\ntest.loc[test['shop_id'] == 10, 'shop_id'] = 11","b56f8e4a":"#\u518d\u67e5\u770b\u4e00\u4e0b\u5408\u5e76\u540e\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u7684\u5546\u5e97ID\u6570\u76ee\nshops_train = sales_train['shop_id'].nunique()\nshops_test = test['shop_id'].nunique()\nprint('\u8bad\u7ec3\u96c6\u4e2d\u7684\u5546\u5e97ID\u6709 {} \u4e2a '.format(shops_train))\nprint('\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u5e97ID\u6709 {} \u4e2a '.format(shops_test))","c1ac53f9":"#\u67e5\u770b\u524d\u4e94\u4e2aID\u7684\u5546\u5e97\u540d\nshops['shop_name'][:5]","5b713543":"#\u63d0\u53d6\u5546\u5e97\u540d\u4e2d\u7684\u57ce\u5e02\u540d\nshop_cities = shops['shop_name'].str.split(' ').str[0]\nshop_cities.unique()","95702854":"#\u4ed4\u7ec6\u89c2\u5bdf\u540e\u53d1\u73b0\u96c5\u5e93\u8328\u514b\u5e02\u7528\u4e86'!\u042f\u043a\u0443\u0442\u0441\u043a'\u548c'\u042f\u043a\u0443\u0442\u0441\u043a'\u4e24\u79cd\u8868\u793a\u3002\n#\u731c\u6d4b\u5b83\u4eec\u7684\u542b\u4e49\u5e94\u8be5\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u5b83\u4eec\u5c06\u5408\u5e76\u4e3a\u4e00\u7c7b\u3002\u5e76\u4e14\u5c06\u57ce\u5e02\u540d\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7279\u5f81\u653e\u5165shops\u6570\u636e\u91cc\u3002\nshops['city'] = shop_cities\nshops.loc[shops.city == '!\u042f\u043a\u0443\u0442\u0441\u043a', 'city'] = '\u042f\u043a\u0443\u0442\u0441\u043a'","60e763e5":"#\u67e5\u770b\u73b0\u5728\u7684shops\u6570\u636e\nshops","458ee2d3":"#\u5c06city\u7279\u5f81\u8f6c\u6362\u4e3a\u6570\u503c\u6807\u7b7e\uff08\u7b80\u5355\u4f7f\u7528\u6570\u5b57\u7f16\u7801\uff09\nfrom sklearn import preprocessing\nlabel_encoder = preprocessing.LabelEncoder()\nshops['shop_city'] = label_encoder.fit_transform(shops['city'])","9fd7ead7":"#\u73b0\u5728\u6211\u4eec\u4e0d\u518d\u9700\u8981'shop_name'\u548c'city'\u8fd9\u4e24\u4e2a\u53d8\u91cf\u4e86\uff0c\u6240\u4ee5\u5c06\u5176\u5220\u9664\nshops = shops.drop(['shop_name', 'city'], axis = 1)\nshops.head()","b7d6d246":"#\u8fd4\u56de\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u54c1ID\u552f\u4e00\u503c\u7684\u6570\u76ee\nitems_train = sales_train['item_id'].nunique()\nitems_test = test['item_id'].nunique()\nprint('\u8bad\u7ec3\u96c6\u4e2d\u7684\u5546\u54c1ID\u6709 {} \u4e2a '.format(items_train))\nprint('\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u54c1ID\u6709 {} \u4e2a '.format(items_test))","8ecb62a9":"#\u7c7b\u4f3c\u7684\u5305\u542b\u5173\u7cfb\u67e5\u9a8c\nitems_train_set = set(sales_train['item_id'].unique())\nitems_test_set = set(test['item_id'].unique())\n\nprint('\u5224\u65ad\u7ed3\u679c\u4e3a\uff1a')\nis_subset(items_test_set,items_train_set) ","9955ca76":"#\u786e\u8ba4\u8fd9\u4e9b\u975e\u5b50\u96c6\u5546\u54c1ID\u7684\u6570\u91cf\nlen(items_test_set.difference(items_train_set)) ","75a3a9a5":"#\u53ef\u89c1\uff0c\u6d4b\u8bd5\u96c6\u4e2d\u5b58\u5728363\u9879\u662f\u5728\u8bad\u7ec3\u96c6\u4e2d\u6ca1\u6709\u7684\u3002 \n#\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u9488\u5bf9\u8fd9\u4e9b\u5546\u54c1\u7684\u9500\u552e\u9884\u6d4b\u5fc5\u987b\u4e3a\u96f6\u7684\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5c06\u65b0\u5546\u54c1\u6dfb\u52a0\u5230\u8bad\u7ec3\u6570\u636e\u4e2d\uff0c\u4f46\u600e\u4e48\u9884\u6d4b\u5b83\u4eec\u7684\u503c\u662f\u4e00\u4e2a\u96be\u9898\u3002\n#\u5728\u5904\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u4e00\u6b65\u4e86\u89e3\u8fd9\u4e2a\u6d4b\u8bd5\u96c6\u4e2d\u76845100\u4e2a\u5546\u54c1\u3002\u5b83\u4eec\u5177\u4f53\u5c5e\u4e8e\u4ec0\u4e48\u7c7b\u522b\uff0c\u54ea\u4e9b\u7c7b\u522b\u6211\u4eec\u662f\u4e0d\u9700\u8981\u5728\u6d4b\u8bd5\u96c6\u4e2d\u8fdb\u884c\u9884\u6d4b\u7684\u3002\nitem_in_test = items.loc[items['item_id'].isin(sorted(test['item_id'].unique()))]\ncats_in_test = item_in_test.item_category_id.unique()","d769c3e6":"#\u67e5\u770bitem_cats\u7c7b\u522b\u6570\u636e\u4e2d\u7684\u4e0d\u5728test\u91cc\u7684\u7c7b\u522b\u4fe1\u606f\uff08\u8bad\u7ec3\u96c6\u4e2d\u7684\u5e38\u89c1\u7c7b\u522b\uff09\nitem_cats.loc[~item_cats['item_category_id'].isin(cats_in_test)]","8270bcbd":"#\u67e5\u770bitem_cats\u4e2d\u7684\u7c7b\u522b\u6570\u636e\nitem_cats['item_category_name']","26cc946a":"#\u4ee5'-'\u53f7\u5206\u9694\u5b57\u7b26\ncats_ = item_cats['item_category_name'].str.split('-')\n\n#\u63d0\u53d6\u4e3b\u7c7b\u522b\u653e\u5165item_cats\u4e2d\nitem_cats['main_category'] = cats_.map(lambda row: row[0].strip())  # \u63d0\u53d6\u524d\u9762\u7684\u5b57\u7b26\uff0c\u7528strip()\u7528\u4e8e\u5220\u9664\u975e\u5b57\u7b26\u5355\u4f4d\n\n#\u63d0\u53d6\u5b50\u7c7b\u522b\u653e\u5165item_cats\u4e2d\uff08\u82e5\u65e0\u5b50\u7c7b\u522b\uff0c\u5219\u7528\u4e3b\u7c7b\u522b\u4f5c\u4e3a\u5b50\u7c7b\u522b\uff09\nitem_cats['sub_category'] = cats_.map(lambda row: row[1].strip() if len(row) > 1 else row[0].strip())","f5dc7902":"#\u5bf9\u65b0\u7c7b\u8fdb\u884c\u6570\u5b57\u7f16\u7801\nlabel_encoder = preprocessing.LabelEncoder()\n\nitem_cats['main_category_id'] = label_encoder.fit_transform(item_cats['main_category'])\nitem_cats['sub_category_id'] = label_encoder.fit_transform(item_cats['sub_category'])","fd5a38a3":"item_cats.head()","0ac5bd48":"#\u8f6c\u6362\u9500\u552e\u6570\u636e\u4e2d\u7684\u65f6\u95f4\u6bd4\u54ea\u91cc\uff0c\u83b7\u53d6\u6307\u5b9a\u5f62\u5f0f\u7684\u65f6\u95f4\u548c\u65e5\u671f\uff1a'\u65e5\/\u6708\/\u5e74'\nsales_train['date'] = pd.to_datetime(sales_train['date'], format='%d.%m.%Y')  ","e61af5f5":"#\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u751f\u6210\u8868\u793aitem1\uff0citem2\u7b49\u4e2d\u5143\u7d20\u7684\u7b1b\u5361\u5c14\u79ef\u7684\u5143\u7ec4\n#\u8868\u793a\u4ece2013\u5e741\u6708\u5f00\u59cb\u751f\u4ea7\u7684\u7b1b\u5361\u5c14\u4ea7\u54c1\nfrom itertools import product \nshops_in_jan = sales_train.loc[sales_train['date_block_num']==0, 'shop_id'].unique()  # \u53d6\u51fa0\u6708\u4efd\u5f00\u59cb\u7684\u5546\u5e97ID\u6570\nitems_in_jan = sales_train.loc[sales_train['date_block_num']==0, 'item_id'].unique()  # \u53d6\u51fa0\u6708\u4efd\u5f00\u59cb\u7684\u5546\u54c1ID\u6570\njan = list(product(*[shops_in_jan, items_in_jan, [0]]))    # \u751f\u6210\u5546\u5e97ID\u6570\u4e0e\u5546\u54c1ID\u6570\u7684\u7b1b\u5361\u5c14\u79ef\u7684\u5143\u7ec4,\u7136\u540e\u8f6c\u6210\u5217\u8868","8d35cf41":"#\u67e5\u770b\u7b1b\u5361\u5c14\u5143\u7ec4\u7684\u524d\u4e94\u4e2a\u7ed3\u679c\uff0c\u5143\u7956\u5185\u4ece\u5de6\u5230\u53f3\u4f4d\u7f6e\u5206\u522b\u8868\u793a\uff1a\uff08\u5546\u5e97ID\uff0c\u5546\u54c1ID\uff0c\u5f53\u524d\u6708\u4efd\u6570\uff09\nprint(jan[:5])","969d2c6d":"#\u7b1b\u5361\u5c14\u5143\u7ec4\u7684\u603b\u4e2a\u6570\uff08\u8868\u793a0\u6708\u4efd\uff09\nprint(len(jan))","14acc6a1":"#2013\u5e742\u6708\uff08\u7b2c\u4e8c\u4e2a\u6708\uff09\u751f\u4ea7\u7684\u7b1b\u5361\u5c14\u4ea7\u54c1\nshops_in_feb = sales_train.loc[sales_train['date_block_num']==1, 'shop_id'].unique()\nitems_in_feb = sales_train.loc[sales_train['date_block_num']==1, 'item_id'].unique()\nfeb = list(product(*[shops_in_feb, items_in_feb, [1]]))","31d1e68e":"#\u7b2c\u4e8c\u4e2a\u6708\u7684\u7b1b\u5361\u5c14\u5143\u7ec4\nprint(feb[:5])","fea44b26":"#\u7b2c\u4e8c\u4e2a\u6708\u7684\u7b1b\u5361\u5c14\u5143\u7ec4\u4e2a\u6570\nprint(len(feb))","bf82ba35":"#\u4f7f\u7528numpy\u7684'vstack'\u6570\u7ec4\u5806\u53e0\u65b9\u6cd5\u5c06\u524d\u4e24\u4e2a\u6708\u7684\u7b1b\u5361\u5c14\u5143\u7ec4\u6570\u636e\u5408\u5e76\uff0c\u5e76\u521b\u9020\u4e00\u4e2adataframe\u683c\u5f0f\u4fbf\u4e8e\u663e\u793a\u3002\ncartesian_jf = np.vstack((jan, feb))    # vstack\uff08\u5782\u76f4\u65b9\u5411\uff09\u5c06\u6570\u7ec4\u5806\u53e0\u3002\ncartesian_jf_df = pd.DataFrame(cartesian_jf, columns=['shop_id', 'item_id', 'date_block_num'])   # \u521b\u5efadataframe\u5e76\u7ed9\u4e0d\u540c\u5217\u547d\u540d\ncartesian_jf_df.head().append(cartesian_jf_df.tail())","752bdf49":"#\u5c06\u6240\u670933\u4e2a\u6708\u4efd\u8fdb\u884c\u76f8\u540c\u7684\u6570\u636e\u5408\u5e76\u4e0edf\u521b\u5efa\nmonths = sales_train['date_block_num'].unique()\ncartesian = []\nfor month in months:\n    shops_in_month = sales_train.loc[sales_train['date_block_num']==month, 'shop_id'].unique()\n    items_in_month = sales_train.loc[sales_train['date_block_num']==month, 'item_id'].unique()\n    cartesian.append(np.array(list(product(*[shops_in_month, items_in_month, [month]])), dtype='int32'))\n    \ncartesian_df = pd.DataFrame(np.vstack(cartesian), columns = ['shop_id', 'item_id', 'date_block_num'], dtype=np.int32)","b0ac9288":"#\u6240\u6709\u6708\u4efd\u6574\u5408\u540e\u7684\u6570\u636e\u5f62\u72b6\ncartesian_df.shape","4e3d8f01":"cartesian_df.head()","39b03456":"#\u5bf9\u6570\u636e\u96c6\u4f9d\u6b21\u4f7f\u7528shop_id,'item_id' \u548c 'date_block_num' \u7684\u5e8f\u5217\u5bf9\u8c61\u8fdb\u884c\u5206\u7ec4\uff0c\u7136\u540e\u63d0\u53d6\u51fa\u6708\u9500\u552e\u91cf'item_cnt_day'\u7684\u603b\u548c\n#\u5373\u53ef\u4ee5\u83b7\u5f97\u7279\u5b9a\u5546\u5e97\u7684\u7279\u5b9a\u5546\u54c1\u7684\u6708\u9500\u552e\u603b\u91cf\nx = sales_train.groupby(['shop_id', 'item_id', 'date_block_num'])['item_cnt_day'].sum().rename('item_cnt_month').reset_index()\nx.head()","51dbc4b0":"x.shape","2d51b094":"#pd.merge()\u65b9\u6cd5\u8fdb\u884c\u5408\u5e76\u8fde\u63a5\uff0cleft\u8868\u793a\u53ea\u4fdd\u7559\u5de6\u8fb9\u7684\u4e3b\u952e\uff0c\u53ea\u5728\u53f3\u8fb9\u4e3b\u952e\u4e2d\u5b58\u5728\u7684\u884c\u5c31\u4e0d\u53d6\u4e86\nnew_train = pd.merge(cartesian_df, x, on=['shop_id', 'item_id', 'date_block_num'], how='left').fillna(0) ","cd27d324":"#\u4f7f\u7528numpy.clip\u5c06\u6708\u9500\u552e\u91cfitem_cnt_month\u7f29\u653e\u5230[0,20]\u4e4b\u5185\uff0c\u8fd9\u662f\u9879\u76ee\u8bf4\u660e\u4e2d\u63d0\u5230\u7684\nnew_train['item_cnt_month'] = np.clip(new_train['item_cnt_month'], 0, 20)","7f7006e6":"new_train.head()","d577a687":"#\u4f7f\u7528sort_values\u5bf9new_train\u4f9d\u6b21\u6309\u662f\u6309'date_block_num','shop_id','item_id\u5143\u7d20\u5185\u90e8\u6392\u5e8f\u7684\u5148\u540e\u987a\u5e8f\u6765\u91cd\u65b0\u6392\u5217\nnew_train.sort_values(['date_block_num','shop_id','item_id'], inplace = True)  \nnew_train.head()","1db9f189":"#\u5220\u9664\u7cfb\u7edf\u4e2d\u4e0d\u9700\u8981\u7684\u5217\u8868\uff0c\u91ca\u653e\u5185\u5b58\ndel x\ndel cartesian_df\ndel cartesian\ndel cartesian_jf\ndel cartesian_jf_df\ndel feb\ndel jan\ndel items_test_set\ndel items_train_set\ndel sales_train","4135f2d1":"#\u73b0\u5728\u6211\u4eec\u4e3a\u6d4b\u8bd5\u96c6\u63d2\u5165date_block_num\u7684\u5c5e\u6027\uff08\u7b2c34\u4e2a\u6708\uff09\u548c\u9500\u552e\u91cf'item_cnt_month'\u5c5e\u6027\uff08\u6682\u5b9a\u4e3a0\uff09\u3002\n#\u4f7f\u7528pandas\u7684insert\u65b9\u6cd5\u5c06\u6b64\u65b0\u5217\u653e\u7f6e\u5728\u7279\u5b9a\u7d22\u5f15\u5904\u3002\u8fd9\u4fbf\u4e8e\u4e4b\u540e\u5c06\u6d4b\u8bd5\u96c6\u4e8e\u8bad\u7ec3\u96c6\u7684\u76f8\u4e92\u8fde\u63a5\ntest.insert(loc=3, column='date_block_num', value=34)        # \u5728\u6d4b\u8bd5\u96c6\u7b2c\u4e09\u5217\u63d2\u5165\u6708\u4efd\u6570\uff0c\u8d4b\u503c\u4e3a34\ntest['item_cnt_month'] = 0  # \u5728\u6d4b\u8bd5\u96c6\u63d2\u5165\u65b0\u5217'item_cnt_month'\uff0c\u8d4b\u503c\u4e3a0\ntest.head()","638c3a3a":"#\u5220\u9664\u6d4b\u8bd5\u96c6\u76f8\u5bf9new_train\u4e2d\u4e0d\u542b\u7684\u7684ID\u5217\uff0c\u5e76\u4e0e\u539f\u8bad\u7ec3\u96c6\u5411\u4e0b\u8fde\u63a5\u5408\u5e76\nnew_train = new_train.append(test.drop('ID', axis = 1)) \nnew_train.head().append(new_train.tail())","b50a503d":"#\u5408\u5e76\u5546\u5e97\u6570\u636e\uff0c\u4ee5\u83b7\u5f97\u5bf9\u5e94ID\u4e0b\u7f16\u7801\u597d\u7684\u7684\u57ce\u5e02\u7c7b\u522b\nnew_train = pd.merge(new_train, shops, on=['shop_id'], how='left') \nnew_train.head()","6b8ce415":"#\u5408\u5e76\u5546\u54c1\u540d\u79f0\u6570\u636e\uff0c\u4ee5\u83b7\u5f97\u5bf9\u5e94ID\u4e0b\u7f16\u7801\u597d\u7684\u5546\u54c1\u7c7b\u522b\nnew_train = pd.merge(new_train, items.drop('item_name', axis = 1), on=['item_id'], how='left')\nnew_train.head()","72787657":"#\u5408\u5e76\u5546\u54c1\u7c7b\u522b\u6570\u636e\uff0c\u4ee5\u83b7\u5f97\u5bf9\u5e94\u540d\u79f0\u4e0b\u7f16\u7801\u53f7\u7684\u5546\u54c1\u7236\u5b50\u7c7b\u522b\nnew_train = pd.merge(new_train,  item_cats.drop('item_category_name', axis = 1), on=['item_category_id'], how='left')\nnew_train.head()","84257548":"#\u5220\u9664\u975e\u6570\u503c\u7684\u5217\nnew_train.drop(['main_category','sub_category'],axis=1,inplace=True)\nnew_train.head()","03109336":"#\u5220\u9664\u65e0\u7528\u7684\u6570\u636e\uff0c\u91ca\u653e\u5185\u5b58\ndel items\ndel item_cats\ndel shops\ndel test","4568cc03":"#\u5b9a\u4e49\u6ede\u540e\u7279\u5f81\u6dfb\u52a0\u51fd\u6570\ndef generate_lag(train, months, lag_column):\n    for month in months:\n        # \u521b\u5efa\u6ede\u540e\u7279\u5f81\n        train_shift = train[['date_block_num', 'shop_id', 'item_id', lag_column]].copy()\n        train_shift.columns = ['date_block_num', 'shop_id', 'item_id', lag_column+'_lag_'+ str(month)]\n        train_shift['date_block_num'] += month\n        #\u65b0\u5217\u8868\u8fde\u63a5\u5230\u8bad\u7ec3\u96c6\u4e2d\n        train = pd.merge(train, train_shift, on=['date_block_num', 'shop_id', 'item_id'], how='left')\n    return train","e8a5af90":"#\u5b9a\u4e49\u5411\u4e0b\u6570\u636e\u7c7b\u578b\u8f6c\u53d8\u51fd\u6570\uff0c\u4f5c\u7528\u662f\u5c06float64\u7c7b\u578b\u8f6c\u53d8\u6210float16\uff0c\u5c06int64\u8f6c\u53d8\u6210int16\uff08\u7528\u4e8e\u7f29\u51cf\u5185\u5b58\u91cf,\u5426\u5219\u540e\u7eed\u65e0\u6cd5\u8fd0\u884c\uff09\nfrom tqdm import tqdm_notebook   # \u8fdb\u5ea6\u8bfb\u53d6\u6761\u4f7f\u7528\ndef downcast_dtypes(df):   \n    # \u9009\u62e9\u9700\u8981\u5904\u7406\u7684\u5217 \n    float_cols = [c for c in df if df[c].dtype == \"float64\"]\n    int_cols =   [c for c in df if df[c].dtype == \"int64\"]\n    \n    #\u5f00\u59cb\u6570\u636e\u8f6c\u6362\n    df[float_cols] = df[float_cols].astype(np.float16)\n    df[int_cols]   = df[int_cols].astype(np.int16)\n    \n    return df","259c070f":"#\u4f7f\u7528\u53d8\u6362\u51fd\u6570\u6765\u66f4\u6570\u636e\u7c7b\u578b\nnew_train = downcast_dtypes(new_train)  ","7b87da6b":"%%time\n#\u6dfb\u52a0\u76ee\u6807\u53d8\u91cf\uff08\u6708\u9500\u91cf\u5c5e\u6027\uff09\u7684\u6ede\u540e\u7279\u5f81\uff0c\u6dfb\u52a0\u90e8\u5206\u7684\u6708\u9500\u91cf\u6570\u636e\nnew_train = generate_lag(new_train, [1,2,3,4,5,6,12], 'item_cnt_month')","d8a893f7":"%%time\n#\u6dfb\u52a0\u5546\u54c1-\u76ee\u6807\u5747\u503c\u7684\u6ede\u540e\u7279\u5f81\n#\u6309\u6708\u4efd\u548c\u5546\u54c1id\u6392\u5e8f\u5e76\u53d6\u5176\u6708\u9500\u91cf\u7684\u5747\u503c\ngroup = new_train.groupby(['date_block_num', 'item_id'])['item_cnt_month'].mean().rename('item_month_mean').reset_index()\n#\u5c06\u65b0\u8868\u6dfb\u52a0\u5230new_train\u7684\u53f3\u4fa7\uff0c\u5bf9\u5e94'date_block_num', 'item_id'\u5c5e\u6027\nnew_train = pd.merge(new_train, group, on=['date_block_num', 'item_id'], how='left')\n#\u5bf9[1,2,3,6,12]\u6708\u8fdb\u884c\u6708\u9500\u91cf\u6ede\u540e\u6dfb\u52a0\uff08\u5747\u503c\u586b\u5145\uff09\nnew_train = generate_lag(new_train, [1,2,3,6,12], 'item_month_mean')\n#\u5220\u9664\u4e0d\u9700\u8981\u7684'item_month_mean'\u5c5e\u6027\nnew_train.drop(['item_month_mean'], axis=1, inplace=True)","193eb8e6":"%%time\n#\u6dfb\u52a0\u5546\u5e97-\u76ee\u6807\u5747\u503c\u7684\u6ede\u540e\u7279\u5f81\ngroup = new_train.groupby(['date_block_num', 'shop_id'])['item_cnt_month'].mean().rename('shop_month_mean').reset_index()\nnew_train = pd.merge(new_train, group, on=['date_block_num', 'shop_id'], how='left')\nnew_train = generate_lag(new_train, [1,2,3,6,12], 'shop_month_mean')\nnew_train.drop(['shop_month_mean'], axis=1, inplace=True)","72edc258":"%%time\n#\u6dfb\u52a0\u5546\u5e97-\u5546\u54c1\u79cd\u7c7b-\u76ee\u6807\u5747\u503c\u7684\u6ede\u540e\u7279\u5f81\ngroup = new_train.groupby(['date_block_num', 'shop_id', 'item_category_id'])['item_cnt_month'].mean().rename('shop_category_month_mean').reset_index()\nnew_train = pd.merge(new_train, group, on=['date_block_num', 'shop_id', 'item_category_id'], how='left')\nnew_train = generate_lag(new_train, [1, 2], 'shop_category_month_mean')\nnew_train.drop(['shop_category_month_mean'], axis=1, inplace=True)","731ef441":"%%time\n#\u6dfb\u52a0\u5546\u54c1\u7236\u7c7b\u522b-\u76ee\u6807\u5747\u503c\u7684\u6ede\u540e\u7279\u5f81\ngroup = new_train.groupby(['date_block_num', 'main_category_id'])['item_cnt_month'].mean().rename('main_category_month_mean').reset_index()\nnew_train = pd.merge(new_train, group, on=['date_block_num', 'main_category_id'], how='left')\nnew_train = generate_lag(new_train, [1], 'main_category_month_mean')\nnew_train.drop(['main_category_month_mean'], axis=1, inplace=True)","ae6c9f47":"%%time\n#\u6dfb\u52a0\u5546\u54c1\u5b50\u7c7b\u522b-\u76ee\u6807\u5747\u503c\u7684\u6ede\u540e\u7279\u5f81\ngroup = new_train.groupby(['date_block_num', 'sub_category_id'])['item_cnt_month'].mean().rename('sub_category_month_mean').reset_index()\nnew_train = pd.merge(new_train, group, on=['date_block_num', 'sub_category_id'], how='left')\nnew_train = generate_lag(new_train, [1], 'sub_category_month_mean')\nnew_train.drop(['sub_category_month_mean'], axis=1, inplace=True)","75a4ef57":"#\u6ede\u540e\u7279\u5f81\u6dfb\u52a0\u540e\u7684\u6570\u636e\u96c6\u5f62\u8c8c\nnew_train.tail()","54409b93":"#\u6dfb\u52a0\u4e00\u4e2a\u6708\u5c5e\u6027\u7684\u7279\u5f81\nnew_train['month'] = new_train['date_block_num'] % 12","a217fe98":"#\u6dfb\u52a0\u4e00\u4e2a\u6708\u4efd\u4e2d\u4f11\u5047\u65e5\u671f\u7279\u5f81\n#\u6bcf\u4e00\u4e2a\u6708\u4efd\u5bf9\u5e94\u7684\u4f11\u606f\u5929\u6570\u5b57\u5178\nholiday_dict = {0: 6,\n                1: 3,\n                2: 2,\n                3: 8,\n                4: 3,\n                5: 3,\n                6: 2,\n                7: 8,\n                8: 4,\n                9: 8,\n                10: 5,\n                11: 4}\n\nnew_train['holidays_in_month'] = new_train['month'].map(holiday_dict)","33c5be14":"#\u6dfb\u52a0\u5df2\u77e5\u7684\u7b2c\u4e8c\u5e74\u5f00\u59cb\u4fc4\u7f57\u65af\u8bc1\u5238\u4ea4\u6613\u6240\u4ea4\u6613\u6570\u636e(\u4e07\u4ebf)\u7279\u5f81\nmoex = {12: 659, \n        13: 640, \n        14: 1231,\n        15: 881,\n        16: 764, \n        17: 663,\n        18: 743, \n        19: 627, \n        20: 692,\n        21: 736, \n        22: 680, \n        23: 1092,\n        24: 657, \n        25: 863, \n        26: 720,\n        27: 819, \n        28: 574, \n        29: 568,\n        30: 633, \n        31: 658, \n        32: 611,\n        33: 770, \n        34: 723}\n\nnew_train['moex'] = new_train.date_block_num.map(moex)","cc6afced":"#\u518d\u4e00\u6b21\u6570\u636e\u7c7b\u578b\u8f6c\u6362\nnew_train = downcast_dtypes(new_train)\nnew_train.head().append(new_train.tail())","3e8c5761":"#\u56e0\u4e3a\u7b2c\u4e00\u5e74\u6ca1\u6709\u4fc4\u7f57\u65af\u8bc1\u5238\u4ea4\u6613\u7684\u6570\u636e\u7279\u5f81\uff0c\u56e0\u6b64\u4ece\u7b2c\u4e8c\u5e74\u5f00\u59cb\u4f5c\u4e3a\u8f93\u5165\nnew_train = new_train[new_train.date_block_num > 11]","63c48e00":"#\u4f7f\u75280\u6765\u586b\u8865\uff0c\u8868\u793a\u6ca1\u6709\u6570\u636e\u7684\u6837\u672c\ndef fill_nan(df):\n    for col in df.columns:\n        if ('_lag_' in col) & (df[col].isna().any()):\n            df[col].fillna(0, inplace=True)         \n    return df\n\nnew_train =  fill_nan(new_train)","d4fb8a22":"#\u8bad\u7ec3\u6570\u636e\u7684\u7279\u5f81\u63d0\u53d6\ntrain_feature = new_train[new_train.date_block_num < 33].drop(['item_cnt_month'], axis=1)\n#\u8bad\u7ec3\u6570\u636e\u7684\u6807\u7b7e\u63d0\u53d6\ntrain_label = new_train[new_train.date_block_num < 33]['item_cnt_month']","d1b9a32f":"#\u9a8c\u8bc1\u6570\u636e\u7684\u7279\u5f81\u63d0\u53d6\nval_feature = new_train[new_train.date_block_num == 33].drop(['item_cnt_month'], axis=1)\n#\u9a8c\u8bc1\u6570\u636e\u7684\u6807\u7b7e\u63d0\u53d6\nval_label = new_train[new_train.date_block_num == 33]['item_cnt_month']","72f4a016":"test_feature = new_train[new_train.date_block_num == 34].drop(['item_cnt_month'], axis=1)","6e693cba":"train_feature.shape,train_label.shape,val_feature.shape,val_label.shape","163b2150":"train_feature.head()","135aab14":"import gc\ngc.collect()","ab43f53d":"from xgboost import XGBRegressor","f7666040":"#\u8bbe\u5b9a\u6a21\u578b\u53c2\u6570\nmodel = XGBRegressor(n_estimators=3000,\n                     max_depth=10,\n                     colsample_bytree=0.5, \n                     subsample=0.5, \n                     learning_rate = 0.01\n                    )","003dc620":"%%time\n#\u8fdb\u884c\u6a21\u578b\u8bad\u7ec3\uff0c\u5e76\u8bbe\u7f6e\u65e9\u505c\u51fd\u6570(\u5efa\u8bae\u5728kaggle\u7aef\u8fdb\u884c)\nmodel.fit(train_feature.values, train_label.values, \n          eval_metric=\"rmse\", \n          eval_set=[(train_feature.values, train_label.values), (val_feature.values, val_label.values)], \n          verbose=True, \n          early_stopping_rounds = 50)","e3a3d695":"#\u5bfc\u51fa\u9884\u6d4b\u7ed3\u679c\ny_pred = model.predict(test_feature.values)","8dcafc57":"#\u7279\u5f81\u91cd\u8981\u6027\u67e5\u770b\nimportances = pd.DataFrame({'feature':new_train.drop('item_cnt_month', axis = 1).columns,'importance':np.round(model.feature_importances_,3)}) \nimportances = importances.sort_values('importance',ascending=False).set_index('feature') \nimportances = importances[importances['importance'] > 0.01]\n\nimportances.plot(kind='bar',\n                 title = 'Feature Importance',\n                 figsize = (8,6),\n                 grid= 'both')","f8b36e32":"submission['item_cnt_month'] = y_pred\nsubmission.to_csv('future_sales_pred.csv', index=False)","0c46b31a":"\u610f\u5916\u5730\uff0c\u6211\u4eec\u53d1\u73b0\u4e00\u4e9b\u5546\u54c1\u53ea\u5b58\u5728\u4e8e\u6d4b\u8bd5\u96c6\u800c\u4e0d\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0c\u6211\u4eec\u5fc5\u987b\u5bf9\u8fd9\u4e9b\u5546\u54c1\u8fdb\u884c\u7edf\u8ba1\u5206\u6790\u3002","2c890cae":"##### \u4e0d\u540cID\u7684 \u201c\u91cd\u590d\u5546\u5e97\u201d \u5206\u6790","1bb87d36":"\u501f\u52a9\u7ffb\u8bd1\uff0c\u524d\u4e94\u4e2a\u548c\u540e\u4e94\u4e2a\u5546\u5e97\u540d\u5206\u522b\u662f\uff1a\uff08\u6839\u636eID\u5e8f\u53f7\uff09\n\n\uff080\uff09\u96c5\u5e93\u8328\u514b\u00b7\u5965\u5c14\u5fb7\u5947\u5c3c\u57fa\u6cfd\uff0c56\u5f17\u5170\n\n\uff081\uff09\u96c5\u5e93\u8328\u514b\u4e2d\u5fc3\u5f17\u5170\n\n\uff082\uff09\u963f\u5fb7\u76d6\u4e9a\u8d85\u7ea7\u8d2d\u7269\u4e2d\u5fc3\n\n\uff083\uff09\u201c\u5341\u6708\u7535\u5f71\u4e16\u754c\u201d\n\n\uff084\uff09\u6c83\u5c14\u65e5\u65af\u57fa\u8d2d\u7269\u4e2d\u5fc3\u201c\u4f0f\u5c14\u52a0\u8d2d\u7269\u4e2d\u5fc3\u201d\n\n.........\n\n\uff0855\uff09\u6570\u5b57\u4ed3\u5e931C-\u5728\u7ebf\n\n\uff0856\uff09\u5951\u8bc3\u592b\u5609\u5e74\u534e\n\n\uff0857\uff09\u96c5\u5e93\u8328\u514b\u00b7\u5965\u5c14\u5fb7\u5947\u5c3c\u57fa\u6cfd\uff0c56\n\n\uff0858\uff09\u96c5\u5e93\u8328\u514b\u4e2d\u5fc3\n\n\uff0859\uff09\u96c5\u7f57\u65af\u62c9\u592b\u5c14\u7275\u725b\u661f\u8d2d\u7269\u4e2d\u5fc3\n","5821a441":"\u73b0\u5728\u6211\u4eec\u9700\u8981\u5408\u5e76\u8fd9\u4e24\u4e2adf\u6570\u636e\uff0c\u4ee5\u53d1\u73b0\u54ea\u4e9b\u5546\u5e97\u7684\u54ea\u4e9b\u5546\u54c1\u662f\u6709\u9500\u552e\u7684\uff1a\n* \u5bf9\u4e8e\u7b1b\u5361\u5c14\u5143\u7ec4\uff0c\u6211\u4eec\u5c06\u7b80\u5355\u5730\u653e\u5165\u5b58\u5728\u4e8ex\u4e2d\u7684\u503c\u3002\n* \u5bf9\u4e8e\u5176\u4f59\u7684\u884c\uff0c\u6211\u4eec\u5c06\u4e0b\u6807\u4e3a0\u8868\u793a\u6ca1\u6709\u9500\u552e\u3002\n\n--  \u9700\u8981\u6ce8\u610f\u8bb0\u4f4f\uff0c\u8981\u5408\u5e76\u7684\u5217\u662fshop_id\u3001item_id\u548cdate_block_num\u7684\u4ea4\u96c6","aaecd89b":"\u6587\u4ef6\u63cf\u8ff0:\n* sales_train.csv--2013\u5e741\u6708\u81f32015\u5e7410\u6708\u7684\u6bcf\u65e5\u5386\u53f2\u6570\u636e.\n* test.csv--\u6d4b\u8bd5\u96c6\u3002\u60a8\u9700\u8981\u9884\u6d4b\u8fd9\u4e9b\u5546\u5e97\u548c\u4ea7\u54c1\u57282015\u5e7411\u6708\u7684\u9500\u552e\u60c5\u51b5\u3002\n* sample_submission.csv--\u6b63\u786e\u683c\u5f0f\u7684\u793a\u4f8b\u63d0\u4ea4\u6587\u4ef6\u3002\n* items.csv--\u5173\u4e8e\u9879\u76ee\/\u4ea7\u54c1\u7684\u8865\u5145\u4fe1\u606f\u3002\n* item_categories.csv--\u5173\u4e8e\u9879\u76ee\u7c7b\u522b\u7684\u8865\u5145\u4fe1\u606f\u3002\n* shops.csv--\u5173\u4e8e\u5546\u5e97\u7684csv\u8865\u5145\u4fe1\u606f\u3002","bb862e87":"##### \u9a8c\u8bc1\u96c6","ac64eeba":"#### \u5bf9\u4e8e\u5f02\u5e38\u503c\u7684\u5206\u6790\u548c\u5904\u7406","8e2ec84e":"\uff082\uff09\u5904\u7406\u5546\u54c1\u7684\u9500\u552e\u91cf","8f020425":"\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u5bf9\u6d4b\u8bd5\u96c6\u7684\u5206\u5e03\u8fdb\u884c\u67e5\u9a8c\uff0c\u89c2\u5bdf\u4e0e\u8bad\u7ec3\u96c6\u662f\u5426\u6709\u533a\u522b","9b3498df":"#### \u7ed3\u679c\u9884\u6d4b","bf8bb3d0":"#### \u63d0\u4ea4\u7ed3\u679c","b1a26519":"\u5bf9\u5546\u54c1ID\u201citem_ids\u201d\u4e5f\u6267\u884c\u7c7b\u4f3c\u7684\u5206\u6790\u64cd\u4f5c","82f16b9b":"#### \u4f7f\u7528XGBOOST\u6a21\u578b\u8fdb\u884c\u9884\u6d4b","b95022f0":"##### \u6d4b\u8bd5\u96c6\uff08\u5f85\u9884\u6d4b\uff09","c5820ccf":"\u95ee\u9898\u63cf\u8ff0:\n* \u6211\u4eec\u83b7\u5f97\u4e86\u6bcf\u65e5\u7684\u5386\u53f2\u9500\u552e\u6570\u636e\uff08\u65f6\u95f4\u5e8f\u5217\uff09\u3002\n* \u4efb\u52a1\u76ee\u6807\u662f\u9884\u6d4b\u6d4b\u8bd5\u96c6\u7684\u6bcf\u4e2a\u5546\u5e97\u7684\u4ea7\u54c1\u6708\u9500\u552e\u603b\u91cf\u3002\n* \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5546\u5e97\u548c\u4ea7\u54c1\u7684\u5217\u8868\u6bcf\u4e2a\u6708\u90fd\u6709\u8f7b\u5fae\u7684\u53d8\u5316\u3002\u56e0\u6b64\u521b\u5efa\u4e00\u4e2a\u80fd\u591f\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u7684\u5065\u58ee\u6a21\u578b\u662f\u6311\u6218\u4e2d\u7684\u4e00\u90e8\u5206\u3002","5ada014b":"\u4ece\u56fe\u50cf\u5206\u6790\u53ef\u77e5\uff1a\n* \u56fe6\uff1a\u4e0e\u8bad\u7ec3\u96c6\u4e0d\u540c\uff0c\u6d4b\u8bd5\u96c6\u5546\u5e97Id\u662f\u5747\u5300\u5206\u5e03\u7684\u3002\u800c\u4e14\u5206\u5e03\u7684\u7a00\u758f\u6027\u4e5f\u8bf4\u660e\u5728\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u5e97ID\u76f8\u5bf9\u4e8e\u8bad\u7ec3\u96c6\u662f\u7f3a\u5931\u7684\uff0c\u5373\u53ea\u542b\u6709\u90e8\u5206\u7684ID\u3002\n* \u56fe7\uff1a\u76f8\u5bf9\u4e8e\u8bad\u7ec3\u96c6\uff0c\u6d4b\u8bd5\u96c6\u5546\u54c1\u7684ID\u5206\u5e03\u66f4\u4e3a\u5747\u5300\uff0c\u4f46\u51fa\u73b0\u7684\u6b21\u6570\u4f1a\u66f4\u5c11\u3002\n\n\u521d\u6b65\u5224\u65ad\uff0c\u6d4b\u8bd5\u96c6\u4e2d\u6709\u4e00\u4e9bshop_id\u548citem_id\u7684\u503c\u4e22\u5931\u4e86\u3002\u6211\u4eec\u9700\u8981\u5bf9\u4e22\u5931\u7684\u60c5\u51b5\u8fdb\u884c\u7edf\u8ba1\uff0c\u5e76\u4e3a\u8fd9\u4e9b\u4e22\u5931\u503c\u505a\u4e00\u4e9b\u5904\u7406\u3002","51f174b1":"\u7531\u4e0a\u8ff0\u5217\u8868\u53ef\u77e5\uff0c\u5728\u7c7b\u522b\u4e2d\u8fd8\u5b58\u5728\u4e3b\u7c7b\u522b\u548c\u5b50\u7c7b\u522b\u7684\u7ec4\u5408\u3002\u4e8c\u8005\u901a\u8fc7\u8fde\u5b57\u7b26 \u201c-\u201d \u5206\u9694\uff0c\u9700\u8981\u88ab\u6211\u4eec\u63d0\u53d6\u51fa\u6765\u3002","0b159090":"#### \u6570\u636e\u96c6\u5207\u5206","d8fedba5":"##### \u5546\u54c1ID\u6570\u91cf\u5206\u6790","0c3abbeb":"### \u5bf9\u6570\u636e\u8fdb\u884c\u63a2\u7d22\u6027\u5206\u6790","4799c72e":"##### \u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u6bcf\u6708\u751f\u6210 Shop-Item-data \u5143\u7ec4\u5bf9","3475e52d":"#### \u89c2\u5bdf\u6d4b\u8bd5\u96c6\u7684\u6570\u636e\u5206\u5e03","2c06b3a7":"##### \u5546\u5e97ID\u6570\u91cf\u5206\u6790","21e0f926":"##### \u5bf9\u5546\u5e97\u540d\u4e2d\u7684\u57ce\u5e02\u8fdb\u884c\u63d0\u53d6","24826a44":"\u6211\u4eec\u9700\u8981\u9884\u6d4b\u4e0d\u540cID\u5bf9\u5e94\u5546\u54c1\uff08\u4e0d\u540c\u79cd\u7c7b\uff0c\u5b58\u5728\u4e8e\u4e0d\u540c\u5546\u5e97\uff09\u4e0b\u4e2a\u6708\u7684\u9500\u552e\u91cf\u5927\u5c0f","b6bdc4ad":"#### \u67e5\u770b\u9500\u552e\u6570\u636e\u7684\u6570\u636e\u5206\u5e03\u60c5\u51b5","8a9aff48":"#### \u6570\u636e\u52a0\u8f7d","0b382554":"##### \u6c47\u603b\u6bcf\u6708\u7684\u9500\u552e\u6570\u636e\uff0c\u8c03\u6574\u76ee\u6807\u53d8\u91cf","2b6be9c3":"\u53ef\u89c1\uff0c\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5546\u5e97\u5e76\u6ca1\u6709\u51cf\u5c11\uff0c\u800c\u662f\u8bad\u7ec3\u96c6\u4e2d\u591a\u51fa\u7684\u4e09\u4e2a\u5197\u4f59ID\u88ab\u53bb\u9664\u4e86\u3002","1fe18218":"\u5408\u5e76\u5546\u5e97\u3001\u5546\u54c1\u548c\u7c7b\u522b\u6570\u636e\u4ee5\u6dfb\u52a0\u4e4b\u524d\u5904\u7406\u597d\u7684\u57ce\u5e02\u7c7b\u522b\u6807\u7b7e\u3001\u5546\u54c1\u7c7b\u522b\uff08\u4e3b\u7c7b\u522b\u548c\u5b50\u7c7b\u522b\uff09\u5c5e\u6027","ead6cda1":"\uff081\uff09\u5904\u7406\u5546\u54c1\u7684\u9500\u552e\u4ef7\u683c","dd9ab370":"##### \u5bf9\u5e38\u89c1\u7684\u7c7b\u522b\u8fdb\u884c\u5206\u7ec4\u5e76\u63d0\u53d6\u5176\u5b50\u7c7b\u522b","366da2be":"\u4ece\u56fe\u50cf\u5206\u6790\u53ef\u77e5\uff1a\n* \u56fe1\uff1a\u6211\u4eec\u7ea6\u670960\u4e2a\u5546\u5e97ID\uff0c\u4f46\u662f\u5728\u6570\u636e\u96c6\u4e2d\u5b83\u4eec\u7684\u5206\u5e03\u4e0d\u592a\u5747\u5300\u3002\u6700\u591a\u76844\u4e2aID\u5360\u636e\u4e86\u6574\u4e2aID\u91cc\u768425%\u5de6\u53f3\uff0c\u537331\u300125\u300154\u300128\u53f7\u5546\u5e97\u3002\n\n* \u56fe2\uff1a\u5546\u54c1\u7684ID\u5728\u9891\u7387\u4e0a\u6709\u4e9b\u8bb8\u53d8\u5316\uff0c\u67d0\u4e9bID\u7684\u51fa\u73b0\u6b21\u6570\u66f4\u591a\uff0c\u540c\u4e00\u4e2a\u7bb1\u5185\u7684\u5546\u54c1ID\u53ef\u80fd\u4ee3\u8868\u7531\u76f8\u4f3c\u7684\u4ea7\u54c1\u3002\n\n* \u56fe3\/\u56fe4\uff1a\u4ece\u4ea7\u54c1\u4ef7\u683c\u548c\u4ea7\u54c1\u9500\u91cf\u7684\u76f4\u65b9\u56fe\u5206\u5e03\u4e2d\u53ef\u89c1\u5de8\u5927\u7684\u7a7a\u767d\u533a\u57df\uff0c\u8fd9\u8bf4\u660e\u5728\u4e8c\u8005\u5206\u5e03\u4e2d\u5b58\u5728\u7740\u6781\u7aef\u7684\u5f02\u5e38\u503c (\u5982\u4ea7\u54c1\u4ef7\u683c\u6781\u5927\u503c\u4e3a30\u591a\u4e07\uff0c\u800c\u666e\u904d\u5374\u57282.5\u4e07\u4ee5\u5185\uff09\uff0c\u8fd9\u4e9b\u5f02\u5e38\u503c\u80af\u5b9a\u9700\u8981\u5904\u7406\u3002\n\n* \u56fe5\uff1a\u8fd9\u662f\u4ece2013\u5e741\u6708\u52302015\u5e7410\u6708\u7684\u6708\u4efd\u503c\u6570\u636e\uff0c\u53ef\u4ee5\u53d1\u73b0num=11\u65f6\uff082013\u5e7412\u6708\uff09\u6709\u6700\u591a\u7684\u9500\u552e\u8bb0\u5f55\uff0c\u4e14num=23\u65f6\uff082014\u5e7412\u6708\uff09\u6709\u7b2c\u4e8c\u591a\u7684\u9500\u552e\u8bb0\u5f55\uff0c\u53ef\u4ee5\u63a8\u65ad\u6700\u591a\u9500\u552e\u53d1\u751f\u4e8e\u6bcf\u5e74\u7684\u5e74\u672b\uff0c\u8fd9\u5bf9\u6211\u4eec\u9884\u6d4b2015\u5e7411\u6708\u7684\u6570\u636e\u6709\u4e00\u5b9a\u53c2\u8003\u4ef7\u503c\u3002","8aca9256":"\u6570\u636e\u5b57\u6bb5\uff1a\n* ID--\u8868\u793a\u6d4b\u8bd5\u96c6\u4e2d\u7684\u5143\u7ec4(\u5546\u5e97\u3001\u9879\u76ee)\u7684ID\n* shop_id--\u5546\u5e97\u7684\u552f\u4e00\u6807\u8bc6\u7b26\n* item_id--\u4ea7\u54c1\u7684\u552f\u4e00\u6807\u8bc6\u7b26\n* item_category_id--\u9879\u76ee\u7c7b\u522b\u7684\u552f\u4e00\u6807\u8bc6\u7b26\n* item_cnt_day--\u552e\u51fa\u7684\u4ea7\u54c1\u6570\u91cf\u3002\u4f60\u662f\u5728\u9884\u6d4b\u8fd9\u4e2a\u8861\u91cf\u4e2d\u7684\u6bcf\u6708\u6570\u91cf\n* item_price--\u9879\u76ee\u7684\u5f53\u524d\u4ef7\u683c\n* date--\u65e5\u671f\u7684\u683c\u5f0f\u4e3a dd\/mm\/yyyy\n* date_block_num--\u8fde\u7eed\u7684\u6708\u4efd\u53f7\uff0c\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\u30022013\u5e741\u6708\u662f0,2013\u5e742\u6708\u662f1,...,2015\u5e7410\u6708\u662f33\n* item_name--\u9879\u76ee\u7684\u540d\u79f0\n* shop_name--\u5546\u5e97\u540d\u79f0\n* item_category_name--\u9879\u76ee\u7c7b\u522b\u7684\u540d\u79f0","3e585d79":"#### \u5bfc\u5165\u5206\u6790\u9700\u8981\u7684\u5e93\u6a21\u5757","68794cb9":"\u73b0\u5728\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u8bad\u7ec3\u96c6\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u5546\u5e97\u548c\u5546\u54c1\u751f\u6210\u5176\u5bf9\u5e94\u7684\u9500\u552e\u6570\u636e\u3002\n\n\u7531\u4e8e\u6700\u7ec8\u7684\u9884\u6d4b\u662f\u9488\u5bf9\u67d0\u4e00\u7279\u5b9a\u5546\u5e97\u548c\u4ea7\u54c1\u7684\u6708\u5ea6\u9500\u552e\u6570\u76ee\uff0c\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u4ee5\u6708\u4e3a\u5355\u4f4d\u6765\u505a\u8fd9\u4ef6\u4e8b\u3002","7b950032":"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c2013\u5e741\u6708\u6709365175\u4e2a\u5546\u5e97\u548c\u7269\u54c1\u7684\u5143\u7ec4\u3002\n\n\u8fdb\u800c\u6211\u4eec\u9700\u8981\u751f\u6210\u8bad\u7ec3\u96c6\u4e2d\u6240\u670933\u4e2a\u6708\u7684\u7b1b\u5361\u5c14\u4e58\u79ef\u3002\u73b0\u5728\u53ef\u4ee5\u751f\u62102013\u5e742\u6708\u7684\u7b1b\u5361\u5c14\u4e58\u79ef\uff0c\u5e76\u5c06\u5176\u4e0e2013\u5e741\u6708\u8fde\u63a5\uff0c\u5c31\u751f\u6210\u4e00\u4e2adataframe\u4e86\u3002","a03adf53":"##### \u8bad\u7ec3\u96c6","5f5c1497":"### \u6a21\u578b\u642d\u5efa\u4e0e\u4f18\u5316","195c6093":"##### \u751f\u6210\u6ede\u540e\u7684\u7279\u5f81\u548c\u5e73\u5747\u7f16\u7801"}}