{"cell_type":{"60ad5e1a":"code","1aff7cca":"code","2bbabd2c":"code","bfca2548":"code","c4609489":"code","5600b972":"code","cd1ed514":"code","888e8aa4":"code","8b906755":"code","aedc3ae8":"code","ca284b2f":"code","e95df4c8":"code","ed3b66ea":"code","6e91d49f":"code","888fcfed":"code","ea0fe93d":"code","9ed217a9":"code","f45f8334":"code","02661dc5":"code","e1c76116":"code","70f72b80":"code","0bc51e0c":"code","6fb7525e":"code","7ed67da4":"code","b3071869":"code","d7ad3581":"code","e43ae322":"code","e7fc992c":"code","d6d04261":"code","35f4019e":"code","5099fd66":"code","bae0464f":"code","f1231a48":"code","62f3a4ce":"code","a03988af":"code","98848481":"code","98ab6a8d":"code","d9410521":"code","a4c0c5d5":"code","0d0459f5":"code","7cd740d5":"code","79346af7":"code","cce384f5":"code","3aa83b4e":"code","68a9e8fb":"code","a7cd6e6e":"code","0294e029":"code","c54f1382":"code","f3df7dfa":"code","0eaf1b90":"code","f7064a27":"code","fc5ed7ae":"code","3ac67f38":"code","b1298ab1":"code","cfc3436f":"code","ea892d5e":"code","72093cdc":"code","54561bcd":"code","91ebb4b4":"code","0d8acd8f":"code","93d6e0c1":"code","32a49e74":"code","60e8ff13":"code","764a7034":"code","8e28d43f":"code","714eb3fe":"code","0ccd26eb":"code","c556f0bd":"code","457ac4df":"code","a6856102":"code","b5edbaf0":"code","03e98c24":"code","103d76e0":"code","8118e749":"markdown","02422716":"markdown","53983b57":"markdown","1f5c165f":"markdown","804832ad":"markdown","530569ca":"markdown","65e61146":"markdown","26c5b3ce":"markdown","bcefdd12":"markdown","ff3e6b01":"markdown","1e9930be":"markdown","8bde7bae":"markdown","c1b716cb":"markdown","4eb1fcc5":"markdown","312c2389":"markdown","7c54fab8":"markdown","8026af7b":"markdown","7aa5bdec":"markdown","8d59b564":"markdown","77552436":"markdown","4f8c079f":"markdown","3895c1f3":"markdown","0cbcfce4":"markdown","3bdc0189":"markdown","91eaa2c7":"markdown"},"source":{"60ad5e1a":"from PIL import Image\nImage.open('\/kaggle\/input\/attritionpic\/attrition.png')","1aff7cca":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nimport warnings\nwarnings.filterwarnings('ignore')\npd.set_option('display.max_rows',None)\npd.set_option('display.max_column',None)","2bbabd2c":"data=pd.read_csv('\/kaggle\/input\/ibmhrattritionanalysis\/IBM-HR-Employee-Attrition.csv',index_col='EmployeeNumber')\ndata.head()                              # Made EmployeeNumber as the index ","bfca2548":"print('The total number of rows:{} and columns:{}'.format(data.shape[0],data.shape[1]))","c4609489":"data.info()","5600b972":"data.describe()                   # Looking into Numerical Features ","cd1ed514":"data.describe(include='object')  # Looking into the Categorical Features","888e8aa4":"data[['DailyRate','HourlyRate','MonthlyRate','StandardHours']].describe()","8b906755":"data['HourlyRate'].plot(kind='kde') \nprint('Skewness for Hourly Rate is :' ,data['HourlyRate'].skew())\nprint('Kurtosis for Hourly Rate is :' ,data['HourlyRate'].kurt())","aedc3ae8":"data['MonthlyRate'].plot(kind='kde') \nprint('Skewness for Hourly Rate is :' ,data['MonthlyRate'].skew())\nprint('Kurtosis for Hourly Rate is :' ,data['MonthlyRate'].kurt())","ca284b2f":"data['DailyRate'].plot(kind='kde') \nprint('Skewness for Hourly Rate is :' ,data['DailyRate'].skew())\nprint('Kurtosis for Hourly Rate is :' ,data['DailyRate'].kurt())","e95df4c8":"pd.DataFrame({'Count':data.isnull().sum(),'Missing%':data.isnull().mean()*100}).T # No missing values ","ed3b66ea":"data.drop(['EmployeeCount','Over18','StandardHours'],axis=1,inplace=True) # Insignificant Features ","6e91d49f":"data.hist(figsize=(16,12))\nplt.tight_layout()","888fcfed":"for i in data.select_dtypes(exclude='O'):\n    if data[i].skew() > 0.9:\n        print(i,':',data[i].skew())             #These are the numerical columns with high skewness ","ea0fe93d":"for i in data.select_dtypes(exclude='O'):\n    if data[i].skew() > 0.9:\n        data[i]=data[i].transform(lambda x:np.log1p(x))","9ed217a9":"for i in data.select_dtypes(exclude='O'):\n    if data[i].skew() > 0:\n        print(i,':',data[i].skew())\n        ","f45f8334":"# Checking if there is any relation between columns ","02661dc5":"data['Education'].unique()","e1c76116":"data['EducationField'].unique()","70f72b80":"data['JobLevel'].unique()","0bc51e0c":"data['JobRole'].unique()","6fb7525e":"'''for i in data.select_dtypes(include='O'):\n    for j in data.select_dtypes(include='int64'):\n        plt.subplots()\n        sns.boxplot(x=i,y=j,hue='Attrition',data=data)'''   ","7ed67da4":"plt.figure(figsize=(20,8))\nsns.set(style='whitegrid')\ndata['Attrition'].value_counts().plot(kind='pie',explode=[0.1,0.1],autopct='%1.1f%%',shadow=True,colors=['c','r'])\nprint(data['Attrition'].value_counts())","b3071869":"print(round(pd.crosstab(data['Attrition'],data['Gender'],normalize=True)*100,2))\n\nplt.figure(figsize=(22,16))\nsns.set(style=\"darkgrid\")\nplt.subplot(221)\nplt.title('Gender Vs Attrition')\nsns.countplot('Gender',hue='Attrition',data=data,palette='seismic_r')\n\nplt.subplot(222)\nplt.title('Gender Vs MonthlyIncome')\nsns.boxplot(data['Gender'],data['MonthlyIncome'])","d7ad3581":"pd.pivot_table(data=data,index=['Gender'],values=['MonthlyIncome'],aggfunc='mean').style.set_properties(**{'background-color': 'black',\n                                                                                                               'color': 'lawngreen',\n                                                                                                               })","e43ae322":"print (pd.crosstab(data['Attrition'],data['Department']))\n\nplt.figure(figsize=(22,16))\nsns.set(style=\"darkgrid\")\nplt.subplot(221)\nplt.title('Department Vs Attrition')\nsns.countplot(data['Department'],hue=data['Attrition'],palette='prism_r')\n\nplt.subplot(222)\nplt.title('Department Vs MonthlyIncome')\nsns.boxplot(data['Department'],data['MonthlyIncome'])","e7fc992c":"#Average salary b\/w different departments \npd.pivot_table(data=data,index=['Department'],values=['MonthlyIncome'],aggfunc='mean').style.set_properties(**{'background-color': 'black',\n                                                                                                               'color': 'lawngreen',\n                                                                                                               })","d6d04261":"pd.crosstab([data['Attrition']],data['JobRole'],normalize=True)*100","35f4019e":"plt.figure(figsize=(25,14))\nsns.set(style=\"whitegrid\")\n\n\nplt.subplot(211)\nplt.title('JobRole Vs Attrition')\nsns.countplot(data['JobRole'],palette='afmhot_r',hue=data['Attrition'].sort_values(ascending=True))\nplt.title('Attrition amongst different JobRoles',size=15)\n\n\nplt.subplot(212)\nplt.title('JobRole Vs MonthlyIncome')\nsns.boxplot(data['JobRole'],data['MonthlyIncome'])","5099fd66":"pd.pivot_table(data=data,index=['JobRole'],values=['MonthlyIncome'],aggfunc='mean').sort_values(by='MonthlyIncome').style.set_properties(**{'background-color': 'black',\n                                                                                                               'color': 'lawngreen',\n                                                                                                               })","bae0464f":"print(pd.crosstab(data['JobInvolvement'],data['Attrition']))\n\nplt.figure(figsize=(22,16))\nplt.subplot(221)\nplt.title('JobInvolvement Vs Attrition')\nsns.countplot(data['JobInvolvement'],hue=data['Attrition'],palette='rocket')\n\nplt.subplot(222)\nplt.title('JobInvolvement Vs Monthly Income')\nsns.boxplot(data['JobInvolvement'],data['MonthlyIncome'])","f1231a48":"plt.figure(figsize=(22,16))\nplt.subplot(221)\nplt.title('Education Vs Attrition')\nsns.countplot(data['Education'],hue=data['Attrition'],palette='gnuplot2')\n\n\nplt.subplot(222)\nplt.title('Education Vs MonthlyIncome')\nsns.boxplot(data['Education'],data['MonthlyIncome'])","62f3a4ce":"#Average salary b\/w Education levels\npd.pivot_table(data=data,index=['Education'],values=['MonthlyIncome'],aggfunc='mean').style.set_properties(**{'background-color': 'black',\n                                                                                                               'color': 'lawngreen',\n                                                                                                              })  ","a03988af":"print(pd.crosstab(columns=data['Attrition'],index=data['EducationField']))\n\nplt.figure(figsize=(22,16))\nplt.subplot(221)\nplt.title('EducationField Vs Attriton')\nsns.countplot(data['EducationField'],hue=data['Attrition'],palette='RdBu')\n\nplt.subplot(222)\nplt.title('EducationField Vs Monthly Income')\nsns.boxplot(data['EducationField'],data['MonthlyIncome'])","98848481":"agebins=pd.cut(data['Age'],bins=[15,20,25,30,35,40,45,50,55,60]) #Discretisation to understand what age categories to Target","98ab6a8d":"plt.figure(figsize=(15,5))\nplt.title('Distribution of Age',size=15)\nsns.distplot(data['Age'],bins=[15,20,25,30,35,40,45,50,55,60],color='c')\n\nplt.figure(figsize=(15,5))\nplt.title('Age Wise Binning wrt Attrition',size=15)\nsns.countplot(agebins,hue='Attrition',data=data,palette='CMRmap_r')","d9410521":"print(pd.crosstab(data['Attrition'],data['EnvironmentSatisfaction']))\n\nplt.figure(figsize=(22,16))\nplt.subplot(221)\nplt.title('EnvironmentSatisfaction Vs MonthlyIncome')\nsns.countplot(data['EnvironmentSatisfaction'],hue=data['Attrition'],palette='mako')\n\n\nplt.subplot(222)\nplt.title('EnvironmentSatisfaction Vs MonthlyIncome')\nsns.boxplot(data['EnvironmentSatisfaction'],data['MonthlyIncome'])","a4c0c5d5":"data['EnvironmentSatisfaction'].value_counts().sort_values()","0d0459f5":"print(pd.crosstab(data['Attrition'],data['MaritalStatus']))\n\nplt.figure(figsize=(20,14))\nplt.subplot(221)\nplt.title('MaritalStatus Vs MonthlyIncome')\nsns.countplot(data['MaritalStatus'],hue=data['Attrition'],palette='hot')\n\nplt.subplot(222)\nplt.title('MaritalStatus Vs MonthlyIncome')\nsns.boxplot(data['MaritalStatus'],data['MonthlyIncome'])","7cd740d5":"plt.figure(figsize=(20,12))\nplt.subplot(211)\nplt.title('YearsInCurrentRole Vs MonthlyIncome')\nsns.countplot(data['YearsInCurrentRole'],hue=data['Attrition'],palette='mako')\n\n\nplt.subplot(212)\nplt.title('YearsInCurrentRole Vs MonthlyIncome')\nsns.boxplot(data['YearsInCurrentRole'],data['MonthlyIncome'])","79346af7":"len(data.loc[(data['YearsInCurrentRole']==7) | (data['YearsInCurrentRole']==8) | (data['YearsInCurrentRole']==9) & (data['Attrition']=='Yes')])\/data.shape[0]*100","cce384f5":"plt.figure(figsize=(20,12))\nplt.subplot(211)\nplt.title('YearsAtCompany Vs Attrition')\nsns.countplot(data['YearsAtCompany'],hue=data['Attrition'],palette='mako')\n\n\nplt.subplot(212)\nplt.title('YearsAtCompany Vs MonthlyIncome')\nsns.boxplot(data['YearsAtCompany'],data['MonthlyIncome'])","3aa83b4e":"print('The % of Attrition for employees carrying 0-5 years at company respectively: ')\nprint(len(data.loc[(data['YearsAtCompany']==0) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['YearsAtCompany']==1) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['YearsAtCompany']==2) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['YearsAtCompany']==3) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['YearsAtCompany']==4) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['YearsAtCompany']==5) & (data['Attrition']=='Yes')])\/data.shape[0]*100)","68a9e8fb":"plt.figure(figsize=(20,12))\nplt.subplot(211)\nplt.title('TotalWorkingYears Vs Attrition')\nsns.countplot(data['TotalWorkingYears'],hue=data['Attrition'],palette='prism_r')\n\n\nplt.subplot(212)\nplt.title('TotalWorkingYears Vs MonthlyIncome')\nsns.boxplot(data['TotalWorkingYears'],data['MonthlyIncome'])","a7cd6e6e":"plt.figure(figsize=(20,11))\nplt.subplot(212)\nplt.title('NumCompaniesWorked Vs MonthlyIncome')\nsns.boxplot(data['NumCompaniesWorked'],data['MonthlyIncome'],hue=data['Attrition'])\n\n#plt.figure(figsize=(15,12))\nplt.subplot(211)\nplt.title('NumCompaniesWorked Vs Attrition')\nsns.countplot(data['NumCompaniesWorked'],hue=data['Attrition'],palette='prism_r')\n","0294e029":"data.head()","c54f1382":"print('The % of Attrition for employees carrying 0-3 years at company respectively: ')\nprint(len(data.loc[(data['TotalWorkingYears']==0) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['TotalWorkingYears']==1) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['TotalWorkingYears']==2) & (data['Attrition']=='Yes')])\/data.shape[0]*100)\nprint(len(data.loc[(data['TotalWorkingYears']==3) & (data['Attrition']=='Yes')])\/data.shape[0]*100)","f3df7dfa":"pd.pivot_table(data=data,index=['TotalWorkingYears'],values=['MonthlyIncome'],aggfunc='mean').sort_values(by='MonthlyIncome').style.set_properties(**{'background-color': 'black',\n                                                                                                               'color': 'lawngreen',})  ","0eaf1b90":"from scipy.stats import chi2_contingency,chisquare,f_oneway","f7064a27":"cat_cols = data.describe(include = \"O\").columns    # Statistical analysis for categorical data types, Chisquare is performed ","fc5ed7ae":"chi_stat=[]\np_value=[]\nfor i in cat_cols:\n    chi_res=chi2_contingency(np.array(pd.crosstab(data[i],data['Attrition'])))\n    chi_stat.append(chi_res[0])\n    p_value.append(chi_res[1])\nchi_square=pd.DataFrame([chi_stat,p_value])\nchi_square=chi_square.T\ncol=['Chi Square Value','P-Value']\nchi_square.columns=col\nchi_square.index=cat_cols","3ac67f38":"chi_square","b1298ab1":"chi_square[chi_square[\"P-Value\"]<0.05]","cfc3436f":"features_p = list(chi_square[chi_square[\"P-Value\"]<0.05].index)\nprint(\"Significant categorical Features:\\n\\n\",features_p)","ea892d5e":"num_cols = data.describe().columns   # statistical analysis for numerical data dtypes , Therefore performing ANOVA Test","72093cdc":"f_stat=[]\np_val=[]\nfor i in num_cols:\n    atr_0=data[data['Attrition']==\"No\"][i]\n    atr_1=data[data['Attrition']==\"Yes\"][i]\n    a=f_oneway(atr_0,atr_1)\n    f_stat.append(a[0])\n    p_val.append(a[1])\nanova=pd.DataFrame([f_stat,p_val])\nanova=anova.T\ncols=['F-STAT','P-VALUE']\nanova.columns=cols\nanova.index=num_cols","54561bcd":"anova","91ebb4b4":"anova[anova[\"P-VALUE\"]<0.05]","0d8acd8f":"features_p_n = list(anova[anova[\"P-VALUE\"]<0.05].index)\nprint(\"Significant numerical Features:\\n\\n\",features_p_n)","93d6e0c1":"data.info()","32a49e74":"df=data.copy()","60e8ff13":"df['Attrition']=df['Attrition'].replace({'Yes':1,'No':0})\ndf['OverTime']=df['OverTime'].replace({'Yes':1,'No':0})# Repalacing as 0 and 1 for model understanding ","764a7034":"cat_cols=df.select_dtypes('object').columns\ncat_cols","8e28d43f":"for col in cat_cols:\n    freqs = df[col].value_counts()\n    k = freqs.index[freqs>20][:-1]                 # does the work of One Hot Encoding\n    for cat in k:\n        name = col+'_'+cat\n        df[name] = (df[col] == cat).astype(int)\n    del df[col]\n    print(col)","714eb3fe":"df.shape","0ccd26eb":"df.head()","c556f0bd":"corr=df.corr()\ncols=corr.nlargest(15,'Attrition').index\ncm = np.corrcoef(df[cols].values.T)\nplt.figure(figsize=(20,12))\nsns.heatmap(cm,annot=True, yticklabels = cols.values, xticklabels = cols.values, mask = np.triu(cm))","457ac4df":"plt.rcParams['figure.figsize'] = (10, 10.0)\ndf.corr()['Attrition'].sort_values().plot(kind = \"barh\")","a6856102":"df.head()","b5edbaf0":"df.columns","03e98c24":"from sklearn.preprocessing import StandardScaler\nss=StandardScaler()\ncols=list(df.columns)\ncols.remove('Attrition')\nfor col in cols:\n    df[col]=df[col].astype(float)\n    df[[col]]=ss.fit_transform(df[[col]])\ndf['Attrition']=pd.to_numeric(df['Attrition'],downcast='integer')","103d76e0":"df.head()","8118e749":"### Link for Predictive model building: https:\/\/www.kaggle.com\/winterbreeze\/ibm-hr-analysis-part-2-model-building","02422716":"## As the level of education increases , average monthly income increases","53983b57":"### Working with Categorical Features ( Type-Casting )","1f5c165f":"## What is attrition in business?\n\n### Attrition in business describes a gradual but deliberate reduction of staff numbers that occurs as employees retire or resign and are not replaced. The term is also sometimes used to describe the loss of customers or clients as they mature beyond a product or company's target market without being replaced by a younger generation.","804832ad":"## Higher rate of attrition for people who are single and it makes sense as most people with less than 2 years of experience tend to leave","530569ca":"## How attrition affect a company?\n\n#### A major problem in high employee attrition is its cost to an organization. Job postings, hiring processes, paperwork and new hire training are some of the common expenses of losing employees and replacing them. Additionally, regular employee turnover prohibits your organization from increasing its collective knowledge base and experience over time. This is especially concerning if your business is customer facing, as customers often prefer to interact with familiar people. Errors and issues are more likely if you constantly have new workers.","65e61146":"## What is HR analytics?\n\n### Human resource analytics is an area in the field of analytics that refers to applying analytic processes to the human resource department of an organization in the hope of improving employee performance and therefore getting a better return on investment. HR analytics does not just deal with gathering data on employee efficiency. Instead, it aims to provide insight into each process by gathering data and then using it to make relevant decisions about how to improve these processes.","26c5b3ce":"## What are Positive and Negative attrition?\n\n### Positive attrition:\n#### Positive attrition refers to staff turnover that actually benefits the organization. Think of an employee who is a poor performer, makes many errors, has difficulty working with others, delivers low quality customer service and\/or uses sick leave and vacation time as the hours are earned. When the employee quits, the organization benefits because now the supervisor can replace the low performer employee with someone who is better for the organization.\n\n### Negative attrition:\n#### Negative attrition refers to the loss of an employee the organization would like to keep. Qualified and skilled employees leave for a variety of reasons, and it is often challenging to find an equally skilled replacement. Negative attrition, especially in industries with the highest turnover rates, is expensive. The organization must once again recruit, assess, hire and train a new employee, and until the position is filled, team productivity declines.\n\n#### Our Objectives:\n#### \u2022\tStudy the HR employee attrition data to identify the patters and causes of attrition with respect to various parameters.\n#### \u2022\tIdentify the important parameter and generate helpful insights from them.\n#### \u2022\tBuild model to predict if the employee is unsatisfied and will resign or is satisfied and will stay.\n#### \u2022\tCompare the parameters of a satisfied and an unsatisfied employee to come up with idea of what can be improved.\n#### \u2022\tIdentify future attrition early so that proper measures can be taken on time. ","bcefdd12":"# Inferences ..\n* Employees with 7,8 and 9 YearsInCurrentRole contribute to 21.5% of the total attrition rate in the organisation \n* Employee with 6 years in Current Role is earning more than an employee carrying 14 years in Current Role\n* Need to come up with better stock options for people with more than 6+ years in Current Role as attrition seems to increase gradually with a drop in monthly income ","ff3e6b01":"# Exploratory Data Analysis ","1e9930be":"# Important Questions ..\n* What changes can be made to drop the % level for employees carrying 1 year of experience in the organisation ?\n* Why is there a drop in income for Employees having 15 years of Experience in the company?","8bde7bae":"### There are 25 Numerical Variables and 9 Categorical Variables ","c1b716cb":"* H0=Feature = Attrition \n* H1=Feature!= Attrition\n\nto formulate a hypothesis with Gender , \n\n* h0=mu male = mu female\n* h1=mu male!= mu female\n\n\nto formulate a hypothesis with Department , \n\n* h0=mu Sales = mu Research & Development= mu Human Resources\n* h1=mu Sales = mu Research & Development= mu Human Resources","4eb1fcc5":"## Why Sales Representative and Lab Technicians have a high attrition rate?","312c2389":"## Upvote if you find the analysis interesting","7c54fab8":"## Applying Standard Scalar to standardize the data","8026af7b":"## Questions  \n* Is gender influencing attrition?\n* Which job role has a higher signifance in predecting attrition?\n* Is Distance from home an important attribute?","7aa5bdec":"## Attrition rate is high for group1 and it makes sense as this group of employees are dissatisfied with the environment conditions","8d59b564":"## Suggestions :-  \n* JobRole or Department ? (Collinearity is present for these 2 features )\n* Dropping the Department Column would be a wiser choice as JobRole will get a clearer picture on the specific profiles to look into","77552436":"# Key Inferences :- \n* An innovative structure needs to be implemented for employees with 1 year of experience as it is majorly contributing to the attrition % \n* Seems like the organisation has benefits in terms of income for people with 20+ years of experience \n* Why people with 6 years of experience earning the same as employees with 19 years of experience ?\n* Why employees with 21 years of work experience earning as much as an employee with 40 years of experience?","4f8c079f":"# Key Inferences  \n* Males have a higher rate of attrition \n* Females are earning a little higher than males ","3895c1f3":"## Feature Transformation ","0cbcfce4":"# Top 20 Features having a correlation with the Target Variable ","3bdc0189":"## Working with the Age Feature ","91eaa2c7":"# Statistical Analysis "}}