{"cell_type":{"54a2a3fc":"code","5133dcb1":"code","654707d4":"code","993b4b69":"code","d261cd41":"code","9da1d58d":"code","52d945f3":"code","362853c5":"code","c81667fd":"code","6b984e50":"code","459ffbfa":"code","eb032c6a":"code","58181b8c":"code","3d87cd98":"code","0c3e1a23":"code","3960d44c":"code","a30ee694":"code","6feb45d4":"code","6580cddb":"code","835df17d":"markdown","133497a6":"markdown","6c497733":"markdown","da5475a4":"markdown","47cd500a":"markdown","3eeb20c0":"markdown","863cf810":"markdown","b5c41246":"markdown","4ce07b5e":"markdown","6c65c62e":"markdown","8de4cf0e":"markdown","69a2a7c0":"markdown","dc589809":"markdown","827573c8":"markdown","3c505491":"markdown","65353b97":"markdown","649abebd":"markdown","6694ef8a":"markdown","6501fadf":"markdown","6e7b4c7c":"markdown","f8ece133":"markdown","64db1b1f":"markdown","e7de941c":"markdown","7d0d4bb2":"markdown"},"source":{"54a2a3fc":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\npd.plotting.register_matplotlib_converters()\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\n\n# save filepath to variable for easier access\nopioid_filepath = '..\/input\/opioids-vssr-provisional-drug-overdose-statistics\/VSRR_Provisional_Drug_Overdose_Death_Counts.csv'\n\n# read the data and store data in DataFrame \nopioid_data = pd.read_csv(opioid_filepath)","5133dcb1":"opioid_data.dtypes","654707d4":"## Removing columns\n# Selecting columns\nopioid_features = ['State', 'Year', 'Month', 'Indicator', 'Data Value', 'State Name']\n# Creating new dataframe with selected columns\nselected_opioid_data = opioid_data[opioid_features]\n\n## Merging \"Year\" and \"Month\" to form a new \"Date\" Column\n# Changing all data to String\nselected_opioid_data['Year'] = selected_opioid_data['Year'].astype(str)\n","993b4b69":"selected_opioid_data.dtypes","d261cd41":"# Joining the \"Month\" and \"Year\" columns together\nselected_opioid_data[\"Date_Month_Year\"] = selected_opioid_data[\"Month\"] + \" \" + selected_opioid_data[\"Year\"]\n\n# Now we will parse the Date so that the notebook can read it as an actual date\nimport datetime\nselected_opioid_data['Date'] = pd.to_datetime(selected_opioid_data['Date_Month_Year'], format=\"%B %Y\")\n\n##Setting the Indicator to only look at the total number of drug deaths for that period\n# Setting the Indicator to only look at the \"Number of Drug Overdose Deaths\"\nNum_of_drug_deaths_data = selected_opioid_data[selected_opioid_data.Indicator == 'Number of Drug Overdose Deaths']","9da1d58d":"# Setting the 'State' column to be the United States\nUnited_States_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'US']\n# Renaming the \"Data Value\" column as \"Total Deaths\"\nUnited_States_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\n# Narrowing down the columns\nUnited_States_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_United_States_deaths_data = United_States_deaths_data[United_States_deaths_features]\n# Taking a look\npd.set_option('display.max_rows', None)\nselected_United_States_deaths_data.head()","52d945f3":"plt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the United States over the previous 12 months, by month\")\nsns.lineplot(data=selected_United_States_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in the United States\")\nplt.xlabel(\"Date\")\n","362853c5":"# Setting the 'State' column to be the Ohio\nWest_Virginia_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'WV']\n# Taking a look\npd.set_option('display.max_rows', None)\nWest_Virginia_deaths_data.head()","c81667fd":"West_Virginia_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\nWest_Virginia_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_West_Virginia_deaths_data = West_Virginia_deaths_data[West_Virginia_deaths_features]\npd.set_option('display.max_rows', None)\nselected_West_Virginia_deaths_data.head(100)\nplt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the West Virginia over the previous 12 months, by month\")\nsns.lineplot(data=West_Virginia_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in West Virginia\")\nplt.xlabel(\"Date\")","6b984e50":"# Setting the 'State' column to be the New Hampshire\nNew_Hampshire_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'NH']\n# Taking a look\npd.set_option('display.max_rows', None)\nNew_Hampshire_deaths_data.head()","459ffbfa":"New_Hampshire_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\nNew_Hampshire_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_New_Hampshire_deaths_data = New_Hampshire_deaths_data[New_Hampshire_deaths_features]\npd.set_option('display.max_rows', None)\nselected_New_Hampshire_deaths_data.head(100)\nplt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the New Hampshire over the previous 12 months, by month\")\nsns.lineplot(data=New_Hampshire_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in New Hampshire\")\nplt.xlabel(\"Date\")","eb032c6a":"# Setting the 'State' column to be the Ohio\nOhio_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'OH']\n# Taking a look\npd.set_option('display.max_rows', None)\nOhio_deaths_data.head()","58181b8c":"Ohio_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\nOhio_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_Ohio_deaths_data = Ohio_deaths_data[Ohio_deaths_features]\npd.set_option('display.max_rows', None)\nselected_Ohio_deaths_data.head(100)\nplt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the Ohio over the previous 12 months, by month\")\nsns.lineplot(data=Ohio_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in Ohio\")\nplt.xlabel(\"Date\")","3d87cd98":"# Setting the 'State' column to be the Alaska\nAlaska_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'AK']\n# Renaming the \"Data Value\" column as \"Total Deaths\"\nAlaska_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\n# Narrowing down the columns\nAlaska_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_Alaska_deaths_data = Alaska_deaths_data[Alaska_deaths_features]\n# Taking a look\npd.set_option('display.max_rows', None)\nselected_Alaska_deaths_data.head()","0c3e1a23":"plt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the Alaska over the previous 12 months, by month\")\nsns.lineplot(data=Alaska_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in Alaska\")\nplt.xlabel(\"Date\")","3960d44c":"# Setting the 'State' column to be the California\nCalifornia_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'CA']\n# Taking a look\npd.set_option('display.max_rows', None)\nCalifornia_deaths_data.head()","a30ee694":"California_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\nCalifornia_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_California_deaths_data = California_deaths_data[California_deaths_features]\npd.set_option('display.max_rows', None)\nselected_California_deaths_data.head(100)\nplt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the California over the previvous 12 months, by month\")\nsns.lineplot(data=California_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in California\")\nplt.xlabel(\"Date\")","6feb45d4":"# Setting the 'State' column to be the New York City\nNew_York_City_deaths_data = Num_of_drug_deaths_data[Num_of_drug_deaths_data.State == 'YC']\n# Taking a look\npd.set_option('display.max_rows', None)\nNew_York_City_deaths_data.head()","6580cddb":"New_York_City_deaths_data.rename(columns={'Data Value': 'Total_deaths'}, inplace=True)\nNew_York_City_deaths_features = ['Date', 'State', 'Total_deaths', 'State Name']\nselected_New_York_City_deaths_data = New_York_City_deaths_data[New_Hampshire_deaths_features]\npd.set_option('display.max_rows', None)\nselected_New_York_City_deaths_data.head(100)\nplt.figure(figsize=(20,10))\nplt.title(\"Total Deaths from Opioids in the New York City over the previvous 12 months, by month\")\nsns.lineplot(data=New_York_City_deaths_data, x='Date', y='Total_deaths', label=\"Total Deaths from Opioids in New York City\")\nplt.xlabel(\"Date\")","835df17d":"**Ohio**\nNow let's look at the Midwest.","133497a6":"**California**\nLet's turn to a state that was initially relatively less affected.","6c497733":"**New Hampshire**\nLet's look at another initial epicentre. New England was one of the first regions affected by the opioid epidemic, after Apppalchia. ","da5475a4":"We'll select only data for the whole of the United States, we'll simplify the columns, and also make clear in the data frame that the \"Data Value\" refers to Total Deaths.","47cd500a":"**West Virigina**\nAppalachia was the region that was affected the most initially, with West Virginia the most affected within that. First up, let's see how it has fared.","3eeb20c0":"A large increase after the pandemic, and the resulting social isolation, began. California was less scathed than many other states in the initial surges of the opioid epidemic but is getting hit by the most recent wave. Interestingly enough, the rate was largely flat through to mid 2017, then as other states saw some degree of a decrease, in California it was actually increasing through 2018 and 2019, and then after the pandemic it simply accelerated.\n\nOne key characteristics about California is its many large cities, so population density will be a characteristic to investigate for the latest increase.","863cf810":"**Checking data types**\nFirst we need to check the data types, given the first version of the data set had \"Data Value\" as an object, which was causing issues when graphing later.","b5c41246":"That's changed so now we can join the columns together.","4ce07b5e":"Part of Appalachia - the western foothills of the Appalachian Mountains and the Appalachian Plateau - is in Ohio. We see a steep increase till mid 2017 followed by a good decrease to 2019. Since the pandemic started there has been a resumed increase, and the death rate has overtaken the previous peak, although it's still not as dramatic as West Viriginia. Within Ohio we should look at the difference between Appalachian Ohio and the rest of Ohio that is outside of the Appalachias.","6c65c62e":"Deaths from drug overdoses were already at an alarmingly high rate in 2015, which is why the data began to be collected in the first place. Deaths continued to climb through to later 2017. There was hope throughout 2018 and early 2019 that the numbers had plateaued but the arrival of pandemic upended any such hope, with job loss, stress and social isolation taking its toll. https:\/\/www.wsj.com\/articles\/the-opioid-crisis-already-serious-has-intensified-during-coronavirus-pandemic-11599557401\n\nWe need to investigate the different factors in the United States that could be contributing to this. We can begin by comparing trends in different parts of the United States, which we will do in this kernel. Later research will need to introduce different features, to figure out what factors could be influencing the increase in the epidemic. Analyzing the situation in different countries will also be important.\n","8de4cf0e":"![image.png](attachment:b211d40e-2b0b-4d77-ad8a-e7053d23eba9.png)","69a2a7c0":"**Relating to the data**\nThe figures below are too large to really be fathomable. So it helps to relate to celebrities who have gone through the same tragedy. MAR\u00cdLIA PRATA in one of her kernels, 'Opioid Overdose Histograms', has the excellent idea of bringing up celebrity deaths https:\/\/www.kaggle.com\/mpwolke\/opioid-overdose-histograms. The celebrity I'll introduce is Cory Monteith from the hit show Glee.  \n\n![image.png](attachment:c3a3526e-35c4-49ff-900e-9a89d5ef49fd.png)\n\nTo quote an extract from Wikipedia: Monteith had a troubled adolescence involving substance abuse from age 13, and left school at age 16. After an intervention by family and friends, he entered drug rehabilitation at age 19. In a 2011 interview with Parade magazine, he discussed his history of substance abuse as a teen, and in March 2013, he again sought treatment for addiction. On July 13, 2013, he died of a toxic combination of heroin and alcohol in a Vancouver hotel room.https:\/\/en.wikipedia.org\/wiki\/Cory_Monteith\n\nThis is quite typical of a lot of the opioid overdose stories. I think it is helpful to think of Cory's tragedy when thinking about the statistics below.","dc589809":"**Introduction**\nI would like to thank the Kaggle community for their help in generating this code. The dataset requires quite a bit of cleaning and reorganization but I think the data source (The Center for Disease Control and Prevention's Vital Statistics Rapid Release) is the best available when it comes to Opioid data so I've uploaded it in its entirety and will keep working on processing and visualizing the data. This is an ongoing project, so if you are interested in this topic please keep coming back to this dataset. \n\nI updated the dataset to adjust the \"Data Value\", which gives the deaths from Opioids to a float value instead of a string. This has made the data easier to process and graph.\n\nThis kernel follows on from the \"Opioids in the US: Initial Data Cleaning\" kernel I did earlier. We're now ready to begin with some graphs of Opioid usage over time, and they will show why I thought it was important to create a new dataset which encompasses recent Opioid data.","827573c8":"**Loading data**","3c505491":"Let's take a look at different parts of the United States.","65353b97":"West Virginia follows the pattern of the United States as a whole, but to a more extreme degree; they had a sharp increase till mid 2017, which was actually followed by a good decrease till mid 2019, followed by an even sharper increase once the pandemic began.","649abebd":"New Hampshire shows real hope that the tide can turn. The rate continued to rise into early 2018 but then came off considerably, and although there was an increase with the pandemic it wasn't short-lived and the downward trend continued. We need to find out what New Hampshire is doing right.","6694ef8a":"**In Conclusion**\nThis gives us a starting point for further investigation. The graphs above give us some idea of the degree of the most recent increase in the epidemic, the causes, and how different states, regions and localities fared. We next need to look at the different factors that affected the patterns in the different states. One of the other key questions going forward will be how other countries fared. We already see news stories about overdoses from opioids in the Canada and the United Kingdom.\n\nThis is an ongoing project so if you are interested in this topic, please keep coming back to this dataset. I have tried to make the dataset and the kernel as easy to use, understand and fork as possible. I welcome any feedback.","6501fadf":"Alaska avoided the increases we saw across the United States in the middle of the 2010s. It did have a drop in 2018 as the epidemic came to national attention, and there has been a recent sharp increase from early 2020, so the recent rates have moved with national trends.","6e7b4c7c":"**The United States of America**\nLet's first look at the country as a whole.\n","f8ece133":"**Alaska**\nNow let's look at a rural state that was away from the inital epicenters of the epidemic.","64db1b1f":"A sharp increase until 2017, followed by a plateau, and then another sharp increase once the pandemic started.\n\nAlongside the data from California, this would suggest that for the increase in Opioid deaths over the past year, population density is one of the factors to which we should definitely be paying attention.","e7de941c":"The \"Data Value\" column from this data set shows up as a float, which avoids the earlier problems when the data set had the \"Data Value\" as an object. Now we'll select features and change the data type.","7d0d4bb2":"**New York City**\nLet's take a look now at New York City. It's the one city on the list so let's see how its pattern differs from the states."}}