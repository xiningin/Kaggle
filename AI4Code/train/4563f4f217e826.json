{"cell_type":{"97674a3a":"code","bacbc20d":"code","1e07d14c":"code","09be5e35":"code","c082ccd9":"code","bb46c5e2":"code","76bca47c":"code","5c1cfd64":"code","da4dc0b1":"code","861b8fdc":"code","7051e502":"code","e093b978":"code","8c63d6e2":"code","af783acd":"code","80cb9b8d":"code","588789cd":"code","57f38981":"markdown","4676b3bd":"markdown","1b5fbfa9":"markdown","0623a7f7":"markdown","d1e57946":"markdown","abb6a4c0":"markdown","c34516b3":"markdown","082d6751":"markdown","bdf08825":"markdown","2b87c475":"markdown","af2f5413":"markdown","be647f8c":"markdown","0a6c3e55":"markdown","40bf4a0c":"markdown","571f82df":"markdown","d18af4ac":"markdown","aec08f19":"markdown"},"source":{"97674a3a":"! pip install openpyxl\n! pip install mlxtend","bacbc20d":"import pandas as pd\nimport datetime as dt\nfrom mlxtend.frequent_patterns import apriori, association_rules\nimport matplotlib.pyplot as plt","1e07d14c":"df_= pd.read_csv(\"..\/input\/online-retail-ii-uci\/online_retail_II.csv\")\ndf = df_.copy()\ndf.head()","09be5e35":"df.describe().T","c082ccd9":"df.isnull().sum()","bb46c5e2":"df.dropna(inplace=True)","76bca47c":"df[\"Description\"].nunique()","5c1cfd64":"df[\"Description\"].value_counts().head()","da4dc0b1":"df.groupby(\"Description\").agg({\"Quantity\": \"sum\"}).sort_values(\"Quantity\", ascending=False).head(5)","861b8fdc":"df = df[~df[\"Invoice\"].str.contains(\"C\", na=False)]","7051e502":"df[\"TotalPrice\"] = df[\"Quantity\"] * df[\"Price\"]","e093b978":"df.head()\ndf.dtypes","8c63d6e2":"df[\"InvoiceDate\"] = pd.to_datetime(df[\"InvoiceDate\"]) # convert from object to datatime","af783acd":"max_date = df[\"InvoiceDate\"].max()\nmax_date","80cb9b8d":"today_date = dt.datetime(2011, 12, 11)\n\nrfm = df.groupby('Customer ID').agg({'InvoiceDate': lambda InvoiceDate: (today_date - InvoiceDate.max()).days,\n                                     'Invoice': lambda Invoice: Invoice.nunique(),\n                                     'TotalPrice': lambda TotalPrice: TotalPrice.sum()})\n\n\nrfm.columns = ['recency', 'frequency', 'monetary']\n\nrfm.head()","588789cd":"rfm = rfm[rfm[\"monetary\"] > 0]\nrfm.head()","57f38981":"Examine the descriptive statistics of the data set.","4676b3bd":"**What does RFM stand for?**\n\nThe RFM model is a customer segmentation technique. \nRFM stands for Recency, Frequency, and Monetary value, each corresponding to some key customer trait. These RFM metrics are important indicators of a customer\u2019s behavior because frequency and monetary value affects a customer\u2019s lifetime value, and recency affects retention, a measure of engagement.\n\nRFM stands for the 3 behavioral dimensions by which customer are categorized:\n\n**Recency:** How recent did the customer make his last purchase - The time since the customer\u2019s last purchase to date.\n\n**Frequency:** How often did the customer make a purchase - Is the total number of purchases of the customer.\n\n**Monetary Value:** How much in total did the customer spent - It is the total expenditure made by the customer.\n\n","1b5fbfa9":"How many of each product are there?","0623a7f7":"I will use openpyxl for reading excel files and mlxtend for using the apriori algorithm and extracting rules.","d1e57946":"Creation and conversion of RFM scores to a single variable\n\nConvert Recency, Frequency and Monetary metrics to scores between 1-5 with the help of qcut.Record these scores as recency_score, frequency_score and monetary_score.\nExpress the value of 2 different variables as a single variable and save it as RFM_SCORE.\nE.g; Create \"RFM_SCORE\" variable like \"52\",  combining of recency_score (5) and frequency_score (2).","abb6a4c0":"\n\nInvoiceNo \u2013 Invoice Number - If this code starts with C, it means that the operation has been cancelled.\n\nStockCode \u2013 Product code - Unique number for each product.\n\nDescription \u2013 Product name\n\nQuantity \u2013 Number of products - It expresses how many of the products on the invoices have been sold.\n\nInvoiceDate \u2013 Invoice date\n\nUnitPrice \u2013 Invoice price (Sterling)\n\nCustomerID \u2013 Unique customer number\n\nCountry \u2013 Country name","c34516b3":"<h1 style=\"background-color:#a83299;font-family:newtimeroman;font-size:300%;text-align:center;border-radius: 20px 20px;font-family:cursive\">Customer Segmentation Using RFM<\/h1>","082d6751":"Order the 5 most ordered products from most to least.","bdf08825":"<font size=\"3\">**Variables**<\/font>","2b87c475":"Create a variable named 'TotalPrice' that represents the total earnings per invoice.","af2f5413":"Calculation of RFM metrics\n\nMake the definitions of Recency, Frequency and Monetary.\n\nCalculate customer specific Recency, Frequency and Monetary metrics with groupby, agg and lambda.\n\nAssign your calculated metrics to a variable named rfm.\n\nChange the names of the metrics you created to recency, frequency and monetary.\n\nFor recency value, accept today's date as (2011, 12, 11).\n\nAfter creating the RFM dataframe, filter the dataset to \"monetary>0\"","be647f8c":"How many unique items are there? ","0a6c3e55":"<font size=\"3\">Let's say that an e-commerce company wants to segment its customers and determine marketing strategies according to these segments. The company believes that marketing activities specific to customer segments that exhibit common behaviors will increase revenue.\nFor instance, it is desired to organize different campaigns for new customers and different campaigns in order to retain customers that are very profitable for the company.\nI will explain segmentation of customers by the RFM method, by dividing tasks, step-by-step.<\/font>\n","40bf4a0c":"<font size=\"4\"><h4><center>**Hello everyone, I will explain to RFM segmentation in this notebook.**<\/center><\/h4><\/font>","571f82df":"Are there any missing  in the dataset? If yes, how many missing values in each variable?","d18af4ac":"Remove the missing values from the data set. Use the 'inplace=True' parameter for subtraction.\n\n","aec08f19":"The 'C' in the invoices shows the canceled transactions. Remove the canceled transactions from the dataset."}}