{"cell_type":{"547f853b":"code","8a15c570":"code","2101efca":"code","166dcba9":"code","916c5f83":"code","a6cd5122":"code","0a0ee2a6":"code","941a41fe":"code","1ff0216e":"code","7332f575":"code","d4773cc8":"code","e1f8bce3":"code","b7b5d6d8":"code","21c84300":"code","658ba291":"code","765fcabf":"code","872992c7":"code","48355ec5":"code","b448e6b3":"code","8aec42f5":"code","dd95bfbc":"code","4c95fdd8":"code","9bdbb5b7":"code","66ff8db5":"code","7682ec81":"code","64c5c213":"code","0905f80a":"code","6efe8318":"code","8b1690b1":"code","4ace688c":"code","14c5fc44":"code","988a5114":"code","ffafc649":"code","e5c6a36b":"code","18d24d6b":"code","a3efb308":"code","174119b3":"code","3de46101":"code","5265f8d4":"code","31d4e467":"code","da4682e4":"code","b992e0dc":"code","ea8b4ed4":"code","f95ac78f":"code","bede9a54":"code","94271d70":"code","17f76f99":"code","ff750672":"code","214f4c9d":"code","9bea7fc3":"code","280632cf":"code","2210a0fc":"code","6d508e16":"code","553fc7fd":"code","4195ec66":"code","97ad717f":"code","869fe509":"code","30a72a88":"code","75b25a2b":"code","9da35fa0":"code","653acca3":"code","24b7e615":"code","c7a5f284":"code","ebae0286":"code","2b4d23ea":"code","7880e1a5":"code","290a971f":"code","dbb2da1c":"code","36a25139":"code","e5af20e4":"code","4a9eff78":"code","071c5c01":"code","3828dbc7":"code","4d16ae78":"code","0f7bf18d":"code","7545ba88":"code","5b1185fe":"code","8a9d71f1":"code","f62c4b33":"code","a82e6b30":"code","f3955308":"code","5a1ad54a":"code","b6f51177":"code","092b01c7":"code","3f34a57a":"code","47801de3":"code","e7ddd705":"code","9421f8ee":"code","8eebbaf3":"code","76b13652":"code","1a5f3041":"markdown","3e96a9a9":"markdown","841fa847":"markdown","5045ab73":"markdown"},"source":{"547f853b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport plotly.express as px\nimport plotly.graph_objects as go\n\nimport warnings\nwarnings.filterwarnings(\"ignore\", category=DeprecationWarning) \n\nfrom PIL import Image\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","8a15c570":"df = pd.read_csv('\/kaggle\/input\/trip-advisor-hotels-data\/TA hotels scraper.csv')\ndfc = df.copy() #Making a copy of the original dataframe is always a good practice","2101efca":"dfc.head() #Taking a look at the first 5 rows of our dataframe","166dcba9":"#The symbols on the country_name and city_name columns are going to be a problem\n#We need to get rid of these unwanted symbols to proceed with our analysis","916c5f83":"#Getting rid of the symboles\n\nx = 0\nt = 0\n\nfor n in dfc['country_name']:  #The loop has purpose to get rid of the last 2 characters (This works because the characters that we want to get rid of are consistent, and we know exactly where they will be)\n    dfc['country_name'][x] = dfc['country_name'][x][:-2]\n    x += 1\n    \n\nfor n in dfc['city_name']:  #Same loop, different column\n    dfc['city_name'][t] = dfc['city_name'][t][:-2]\n    t += 1","a6cd5122":"#Checking for Nans\ndfc.isna().any().any() #We have null values","0a0ee2a6":"tot = dfc.shape[0]\nround((dfc.isna().sum() \/ tot) * 100, 2)  # 78% of the prices are missing\n                                          # Since the price is a core variable to our analysis, we want it seperated from the main df  ","941a41fe":"# create dfn (a data frame in wich we got rid of price Nans)\n# We will need `this later\n\ndfn = dfc.dropna(subset = ['Price'])\nprint(dfc.shape[0] - dfn.shape[0], 'rows were droped')","1ff0216e":"#Check for duplicates\ndfc.duplicated().any().any()   # No dups","7332f575":"#Checking the data types\ndfc.dtypes  # All good ","d4773cc8":"dfc.describe().T #Descriptive statistics of our data","e1f8bce3":"# We're going to start the analysis by continents\n# We will analyse every continent on our data set and try to get as much info as possible from it","b7b5d6d8":"#First we will create a few functions to help us visualize our data better\n#The functions will highlight the highest and lowest values when plotting \n\n#M_M (maximum and minimum value)\u221a\n#MI (minimum value)\u221a\n#MA (maximum value)\u221a\n\ndef M_M(series, max_color = '#ff8282', min_color = '#d5f4f5' ,other_color = '#dedede'): #Highlights max and min bars\n    max_val = series.max()\n    min_val = series.min()\n    pal = []\n    \n    for item in series:\n        if item == max_val:\n            pal.append(max_color)\n        elif item == min_val:\n            pal.append(min_color)\n        else:\n            pal.append(other_color)\n    return pal\n\n\ndef MI(series, min_color = '#9ed9db' ,other_color = '#dedede'): #Highlight only the min bar\n    min_val = series.min()\n    pal = []\n    \n    for item in series:\n        if item == min_val:\n            pal.append(min_color)\n        else:\n            pal.append(other_color)\n    return pal\n\n\ndef MA(series, max_color = '#ff8282' ,other_color = '#dedede'): #highlights only the max bar\n    max_val = series.max()\n    pal = []\n    \n    for item in series:\n        if item == max_val:\n            pal.append(max_color)\n        else:\n            pal.append(other_color)\n    return pal","21c84300":"#Continents with the most expensive Hotels\n#For this graph we want to use the dfn dataframe\n#We will get the avg Hotel prices for each continent and visualize it \n\nC_prices = dfn.groupby('continent_name').agg({'Price': 'mean'})\n\nplt.figure(figsize = (15, 6))\nsns.barplot(x = C_prices.index, y = 'Price', edgecolor='black',data = C_prices, \n            palette = M_M(C_prices['Price']))\n\nsns.despine(left=True, bottom=False, right=True, top=True)\n\nplt.title('Hotel prices by continent', fontsize = 25)\nplt.xlabel('')\nplt.ylabel('')","658ba291":"print('We can see that Africa has the highest average price per night for Hotels even if it is one of the lowest continents by GDP. \\n \\nThis possibly implies that there is no positive coorelation between how rich a continent is, and the Hotel prices (even a negative relationship is possible).')","765fcabf":"#Let's take a look at the price distribution for all 4 continents \n\nAfrica = dfn[dfn['continent_name'] == 'Africa']\nAsia = dfn[dfn['continent_name'] == 'Asia']\nEurope = dfn[dfn['continent_name'] == 'Europe']\nSouth_Pacific = dfn[dfn['continent_name'] == 'South Pacific']","872992c7":"#We will use a boxplot to have a look at the at the data distribution\n\nfig, axes = plt.subplots(2, 2, figsize = (25, 15))\n\nsns.boxplot(Africa.Price, ax = axes[0, 0], color = '#ff8282')\naxes[0, 0].set(xlabel='', ylabel='')\naxes[0, 0].set_title('Price distibution for Africa', fontsize = 20)\n\nsns.boxplot(Asia.Price, ax = axes[0, 1], color = '#ff8282')\naxes[0, 1].set(xlabel='', ylabel='')\naxes[0, 1].set_title('Price distibution for Asia', fontsize = 20)\n\nsns.boxplot(Europe.Price, ax = axes[1, 0], color = '#ff8282')\naxes[1, 0].set(xlabel='', ylabel='')\naxes[1, 0].set_title('Price distibution for Europe', fontsize = 20)\n\nsns.boxplot(South_Pacific.Price, ax = axes[1, 1], color = '#ff8282')\naxes[1, 1].set(xlabel='', ylabel='')\naxes[1, 1].set_title('Price distibution for South Pacific', fontsize = 20)\n\nfig.suptitle('Price Distribution For All 4 Continents', fontsize = 30)","48355ec5":"print(\"We can see that we're dealing with lots of outliers across the board, this is not \\nsurprising since we're analyzing by continent.\")","b448e6b3":"#Let's use distplot to have a different look at the data distribution\n\nfig, axes = plt.subplots(2, 2, figsize = (25, 15))\n\nsns.distplot(Africa.Price, ax = axes[0, 0], color = '#f2b40a')\naxes[0, 0].set(xlabel='', ylabel='')\naxes[0, 0].set_title('Price distibution for Africa', fontsize = 20)\n\nsns.distplot(Asia.Price, ax = axes[0, 1], color = '#f2b40a')\naxes[0, 1].set(xlabel='', ylabel='')\naxes[0, 1].set_title('Price distibution for Asia', fontsize = 20)\n\nsns.distplot(Europe.Price, ax = axes[1, 0], color = '#f2b40a')\naxes[1, 0].set(xlabel='', ylabel='')\naxes[1, 0].set_title('Price distibution for Europe', fontsize = 20)\n\nsns.distplot(South_Pacific.Price, ax = axes[1, 1], color = '#f2b40a')\naxes[1, 1].set(xlabel='', ylabel='')\naxes[1, 1].set_title('Price distibution for South Pacific', fontsize = 20)\n\nfig.suptitle('Price Distribution For All 4 Continents', fontsize = 30)","8aec42f5":"print(\"Again, we can see that we're dealing with outliers for all 4 continents, the most extreme \\nbeing Asia. \\n\\nIt is normal to spot outliers when it comes to Hotel prices, so there is no need to \\neliminate them.\")","dd95bfbc":"#Reviews by continent","4c95fdd8":"#We will figure out the avg rating score for each continent and compare that to the number of reviews received \n#This will give us an idea on where the best reviewed hotels are situated.","9bdbb5b7":"continent_reviews = dfc.groupby('continent_name').agg({'Rating': 'mean',\n                                                      'reviews count': 'sum'}) #Grouping continents by ratings and reviews\n\nfig, axes = plt.subplots(1, 2, figsize = (20, 6))\n\nsns.barplot(ax = axes[0], y = continent_reviews.index, x = 'Rating', data = continent_reviews, color = '#128a71', orient = 'h',\n           palette = MA(continent_reviews['Rating']), edgecolor='black')\naxes[0].set_title('Ratings by continent', fontsize = 20)\naxes[0].set(xlabel = '', ylabel = '')\naxes[0].spines['right'].set_visible(False)\naxes[0].spines['top'].set_visible(False)\naxes[0].spines['bottom'].set_visible(False)\n\nC = ['#d1d0cb', '#adaaaa', '#ff8282', '#8a8484']\naxes[1].pie(continent_reviews['reviews count'], labels = continent_reviews.index, startangle = 90, colors = C, autopct='%1.1f%%')\naxes[1].set_title('Reviews count for each continent', fontsize = 20)\nmy_circle = plt.Circle( (0,0), 0.7, color='white')\np=plt.gcf()\np.gca().add_artist(my_circle)\n\nplt.show()","66ff8db5":"print(\"\u25d8 We can see that Europe is the best reviewed continent in terms of Hotels, and it's also \\nthe continent that received the most reviews. \\n\\n\u25d8 This indicate that European Hotels get the best customer engagement... But why? \\n\\n\u25d8 A quick Google search shows that Europe has received the highest number of international \\nvisitors in 2019, by 745  million visitors much larger than all other continents.\\n\\n\u25d8 It seems that Europe is the favorite destination for tourists possibly due to quality \\nservices, safety and reasonable prices.\")","7682ec81":"#Let's analyse the countries now","64c5c213":"#Which are the most expensive countries to rent in? and which are the most affordable","0905f80a":"hotels_count = dfc.groupby('country_name').agg({'Hotel name': 'count'}).sort_values(by = 'Hotel name', ascending = False).head(10)\nhotels_count0 = hotels_count.rename(columns={'Hotel name': 'Count'})\n\nHP = dfn.groupby('country_name').agg({'Price': 'mean'})\nHD = dfc.groupby('country_name').count().reset_index()\nHD.drop(HD.columns.difference([\"country_name\", \"Hotel name\"]), 1, inplace=True)\nHD = HD.rename(columns={'Hotel name': 'Count'})\n\niso_alpha = pd.read_html('https:\/\/en.wikipedia.org\/wiki\/List_of_ISO_3166_country_codes')\niso_alpha0 = iso_alpha[0]\niso_alpha0 = pd.DataFrame(iso_alpha0.to_records())\n\niso_alpha0 = iso_alpha0.rename(columns={iso_alpha0.columns[1]: 'Country', \n                                       iso_alpha0.columns[5]: 'Country Code'})\n\niso_alpha0 = iso_alpha0.rename(columns={'Country': 'country_name'})\niso_alpha0.drop(iso_alpha0.columns.difference([\"country_name\", \"Country Code\"]), 1, inplace=True)\n\niso_alpha0['country_name0'] = iso_alpha0['country_name'].str.split('[').str[0]\niso_alpha0['country_name0'] = iso_alpha0['country_name0'].str.replace('Viet Nam', 'Vietnam')\niso_alpha0['country_name0'] = iso_alpha0['country_name0'].str.strip()\n\niso_alpha0.drop('country_name', axis = 1, inplace = True)\niso_alpha0.rename(columns = {'country_name0': 'country_name'}, inplace = True)\n\nmain = pd.merge(HP, iso_alpha0, on=\"country_name\")","6efe8318":"#Geo plotting the most expensive and cheapest countries in terms of mean Hotel prices per night\n\nfig = go.Figure(data=go.Choropleth(\n    locations = main['Country Code'],\n    z = main['Price'],\n    text = main['country_name'],\n    colorscale = 'Blues',\n    autocolorscale=False,\n    reversescale=True,\n    marker_line_color='lightgray',\n    marker_line_width=0.5,\n    colorbar_tickprefix = '$',\n    colorbar_title = 'Price<br>US$',\n))\n\nfig.update_layout(\n    title_text='Hotel prices heatmap',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    ),\n    annotations = [dict(\n        x=0.55,\n        y=0.1,\n        xref='paper',\n        yref='paper',\n        showarrow = False\n    )]\n)\n\nfig.show()","8b1690b1":"#Which are the most expensive countries to rent a hotel in? And which are the cheapest ones?","4ace688c":"T_10_high = dfn.groupby('country_name').agg({'Price': 'mean',\n                                            'reviews count': 'sum',\n                                            'Rating': 'mean'}).sort_values(by = 'Price', ascending = False).head(10)\nT_10_low = dfn.groupby('country_name').agg({'Price': 'mean',\n                                           'reviews count': 'sum',\n                                           'Rating': 'mean'}).sort_values(by = 'Price', ascending = True).head(10)\n\nfig, axes = plt.subplots(1, 2, figsize = (20, 10))\nsns.barplot(ax=axes[0], y = T_10_high.index, x = 'Price', data = T_10_high, orient = 'h', \n            palette = MA(T_10_high['Price']), edgecolor='black')\naxes[0].set(xlabel = '', ylabel = '')\naxes[0].set_title('Top 10 Countries With The Most Expensive Hotels', fontsize = 20)\naxes[0].spines['right'].set_visible(False)\naxes[0].spines['top'].set_visible(False)\naxes[0].spines['bottom'].set_visible(False)\n\nsns.barplot(ax=axes[1], y = T_10_low.index, x = 'Price', data = T_10_low, orient = 'h', palette = MI(T_10_low['Price']), edgecolor='black')\naxes[1].set(xlabel = '', ylabel = '')\naxes[1].set_title('Top 10 Countries With The Cheapest Hotels', fontsize = 20)\naxes[1].spines['right'].set_visible(False)\naxes[1].spines['top'].set_visible(False)\naxes[1].spines['bottom'].set_visible(False)","14c5fc44":"print(\"The country with the most expensive hotels is {}, with an average price of {}$ \\nper night.\\n\".format(T_10_high.reset_index().iloc[0][0], round(T_10_high.reset_index().iloc[0][1], 2)))\nprint(\"The country with the cheapest hotels is {}, with an average price of {}$ per night.\".format(T_10_low.reset_index().iloc[0][0], round(T_10_low.reset_index().iloc[0][1], 2)))","988a5114":"#We will take a look at the customer engagement for the most expensive coutries and the cheapest countries","ffafc649":"#Reviews analysis for countries with the most expensive\/cheapest hotels ","e5c6a36b":"fig, axes = plt.subplots(1, 2, figsize = (20, 7))\n\nsns.barplot(ax = axes[0], x = T_10_high.index, y = 'Rating', data = T_10_high, color = '#128a71', orient = 'v',\n           palette = MA(T_10_high['Rating']), edgecolor='black')\naxes[0].set_title('X', fontsize = 20)\naxes[0].set(xlabel = '', ylabel = '')\naxes[0].set_xticklabels(axes[0].get_xticklabels(),rotation = 45)\naxes[0].spines['right'].set_visible(False)\naxes[0].spines['top'].set_visible(False)\naxes[0].spines['bottom'].set_visible(True)\naxes[0].spines['left'].set_visible(False)\naxes[0].set_title('Rating By Country', fontsize = 20)\n\nC = ['#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#f24e71', '#3996d4', '#3996d4']\n\naxes[1].hlines(T_10_high.index, xmin=0,\n            xmax=T_10_high['reviews count'], color = C)\naxes[1].set_title('Reviews Count For Each Country', fontsize = 20)\naxes[1].spines['right'].set_visible(False)\naxes[1].spines['top'].set_visible(False)\naxes[1].spines['bottom'].set_visible(False)\naxes[1].spines['left'].set_visible(True)\n  \n# drawing the markers (circle)\naxes[1].plot(T_10_high['reviews count'], T_10_high.index, \"o\", color = '#3996d4')\naxes[1].set_xlim(0)\n\nfig.suptitle('Countries With The Most Expensive Hotels', fontsize = 30)\nfig.tight_layout(rect=[0, 0.05, 1, 0.98])\n\nplt.show()","18d24d6b":"print(\"The ratings for the top 10 most expensive countries are consistent with only one country \\nbelow 4.\\n\\nAs for the reviews, we have huge differences between countries. This could be because \\ncertain countries have less visitors, but keep a premium for the hotels.\")","a3efb308":"fig, axes = plt.subplots(1, 2, figsize = (20, 7))\n\nsns.barplot(ax = axes[0], x = T_10_low.index, y = 'Rating', data = T_10_low, color = '#128a71', orient = 'v',\n           palette = MA(T_10_low['Rating']), edgecolor='black')\naxes[0].set_title('X', fontsize = 20)\naxes[0].set(xlabel = '', ylabel = '')\naxes[0].set_xticklabels(axes[0].get_xticklabels(),rotation = 45)\naxes[0].spines['right'].set_visible(False)\naxes[0].spines['top'].set_visible(False)\naxes[0].spines['bottom'].set_visible(True)\naxes[0].spines['left'].set_visible(False)\naxes[0].set_title('Rating By Country', fontsize = 20)\n\nC = ['#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#3996d4', '#f24e71']\n\naxes[1].hlines(T_10_low.index, xmin=0,\n            xmax=T_10_low['reviews count'], color = C)\naxes[1].set_title('Reviews Count For Each Country', fontsize = 20)\naxes[1].spines['right'].set_visible(False)\naxes[1].spines['top'].set_visible(False)\naxes[1].spines['bottom'].set_visible(False)\naxes[1].spines['left'].set_visible(True)\n  \n# drawing the markers (circle)\naxes[1].plot(T_10_low['reviews count'], T_10_low.index, \"o\", color = '#3996d4')\naxes[1].set_xlim(0)\n\nfig.suptitle('Countries With The Cheapest Hotels', fontsize = 30)\nfig.tight_layout(rect=[0, 0.03, 1, 0.95])\n\nplt.show()","174119b3":"print(\"The ratings are not very consistent with certain countries scoring much lower than others \\nwith a similar price point.\\n\\nThe reviews volume is much lower in comparaison to the more expensive countries, indicating that the cheaper countries are dealing with less visitors (there are a few exceptions).\")","3de46101":"print(\"Conclusion:\\n\\nThe countries with the more expensive hotels seem to be more consistent with their ratings \\nand reviews pointing towards a healthier hospitality industry.\")\n\nprint(\"\\nAlso, due to the number of visitors and the ratings value, it seems that the countries with the more expensive hotels are offering better services.\")","5265f8d4":"#Which are the countries with the best and worst hotel ratings","31d4e467":"T_R_high = dfc.groupby('country_name').agg({'Rating': 'mean'}).sort_values(by = 'Rating', ascending = False).head(10).reset_index()\nT_R_low = dfc.groupby('country_name').agg({'Rating': 'mean'}).sort_values(by = 'Rating', ascending = True).head(10).reset_index()\n\nprint(\"The country with the highest Hotel rating is {} with an average rating of {}, \\nand the county with the worst reviewed hotels is {} with an \\naverage rating of {}\".format(T_R_high.iloc[0][0], round(T_R_high.iloc[0][1], 2), T_R_low.iloc[0][0], T_R_low.iloc[0][1],))","da4682e4":"#Since the 1 - 5 rating scale is quite small, we will consider even the smallest deviations to be very impactfull. \n#Every country with a rating below 4 will be considered low-tier \n#Countries with a below 4 rating (aka countries where you might not wanna book a Hotel in)\nl = dfc.groupby('country_name').agg({'Rating': 'mean'})\nl[l.Rating < 4]","b992e0dc":"#Which are the cities with the best and worst hotel ratings","ea8b4ed4":"C_R_high = dfc.groupby('city_name').agg({'Rating': 'mean'}).sort_values(by = 'Rating', ascending = False).head(10).reset_index()\nC_R_low = dfc.groupby('city_name').agg({'Rating': 'mean'}).sort_values(by = 'Rating', ascending = True).head(10).reset_index()\n\nprint(\"The city with the highest Hotel rating is {} with an average rating of {}, and the city with the worst reviewed hotels is {} with an average rating of {}\".format(C_R_high.iloc[0][0], round(C_R_high.iloc[0][1], 2), C_R_low.iloc[0][0], round(C_R_low.iloc[0][1], 2) ))","f95ac78f":"#Which countries has the most hotel listings on TripAdvisor?","bede9a54":"#Let's geo plot Hotels density for every country in our data set\n\nmain0 = pd.merge(HD, iso_alpha0, on=\"country_name\")\n\nfig = go.Figure(data=go.Choropleth(\n    locations = main0['Country Code'],\n    z = main0['Count'],\n    text = main0['country_name'],\n    colorscale = 'Reds',\n    autocolorscale=False,\n    reversescale=False,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_tickprefix = '',\n    colorbar_title = 'Count',\n))\n\nfig.update_layout(\n    title_text='Hotels density',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    ),\n    annotations = [dict(\n        x=0.55,\n        y=0.1,\n        xref='paper',\n        yref='paper',\n        showarrow = False\n    )]\n)\n\nfig.show()","94271d70":"print(\"The country with the most hotel listings is Italy, followed by China and few other \\nEuropian countries\")","17f76f99":"from IPython.display import Image\nimport os\n!ls ..\/input\/images","ff750672":"Image(\"..\/input\/images\/clean img.png\")","214f4c9d":"print(\"A card is the block of info that summarizes what a hotel has to offer without having to \\nclick through\\n\")\nprint(\"We will analyze these cards to figure out things like which amneties are often displayed, \\nhow many of these blocks (the amenities section) are used etc...\\n\")","9bea7fc3":"#Before we get to the analysis we need to understand our data attributes\n#The below image shows where the Info columns came from","280632cf":"Image(\"..\/input\/images\/guide img.png\")","2210a0fc":"#Please note that the block that I skipped and crossed off in red is not included in our analysis\n#At the time when this data was scraped the block that says \"Taking Safety measures\" did not exist, so we will leave it out of our analysis","6d508e16":"#Now, let's create a visual illustration of the most common amenities used in each block\n\nfig, axes = plt.subplots(2, 3, figsize = (20, 15), facecolor = None)\naxes[1][2].set_visible(False)\n\nfor x in range(1, 6): \n    data = dfc['info.' + str(x)].value_counts().to_dict()\n    wc = WordCloud(width = 1000, height = 1000,\n                    background_color ='#e8e8e8',\n                    min_font_size = 25).generate_from_frequencies(data)\n        \n    if x == 1:\n        axes[0, 0].imshow(wc)\n        axes[0, 0].axis('off')\n    if x == 2:\n        axes[0, 1].imshow(wc)\n        axes[0, 1].axis('off')\n        \n    if x == 3:\n        axes[1, 0].imshow(wc)\n        axes[1, 0].axis('off')\n        \n    if x == 4:\n        axes[1, 1].imshow(wc)\n        axes[1, 1].axis('off')\n        \n    if x == 5:\n        axes[0, 2].imshow(wc)\n        axes[0, 2].axis('off')","553fc7fd":"print(\"This illustration gives us an idea on what's going on but we need more details to be \\nable to draw conclusions.\")","4195ec66":"#The info section on the cards has a limit of 5 fields\n#Each field is given to showcase a certain amneties","97ad717f":"#The first field","869fe509":"Image(\"..\/input\/images\/Card1.png\")","30a72a88":"F1 = dfc['info.1'].value_counts().reset_index()\nF1.rename(columns = {'index': 'amenity',\n                   'info.1': 'count'}, inplace = True)\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'amenity', y = 'count', data = F1, palette = MA(F1['count']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Info 1\", fontsize = 30)","75b25a2b":"print(\"The most dislpayed amenity by far is 'free wifi'\\n\")\nprint(\"This shows that customers value internet connection a lot, so free, reliable and fast \\nwifi needs to be on every Hotel's priority list\")","9da35fa0":"#Second field","653acca3":"Image(\"..\/input\/images\/Card1 copy.png\")","24b7e615":"F2 = dfc['info.2'].value_counts().reset_index()\nF2.rename(columns = {'index': 'amenity',\n                   'info.2': 'count'}, inplace = True)\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'amenity', y = 'count', data = F2, palette = MA(F2['count']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Info 2\", fontsize = 30)","c7a5f284":"print(\"Free parking takes the cake as the most listed amenity on the second field\\n\")\nprint(\"Even if most hotels list free parking on the second field, Restaurant and pool were \\nmentioned over 5000 times\")","ebae0286":"#Third field","2b4d23ea":"Image(\"..\/input\/images\/Card1 copy 3.png\")","7880e1a5":"F3 = dfc['info.3'].value_counts().reset_index()\nF3.rename(columns = {'index': 'amenity',\n                   'info.3': 'count'}, inplace = True)\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'amenity', y = 'count', data = F3, palette = MA(F3['count']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Info 3\", fontsize = 30)","290a971f":"print(\"For the third place, 'Special Offer' is used just a bit over 'Visit Hotel Website'\\n\")\nprint(\"Usually 'Visit Hotel Website' is in the last field, and since 'Special Offer' and \\n'visit Hotel Website' are almost neck to neck, it means that the 3rd slot is not often used, therefore it skips to the next one\")","dbb2da1c":"#Forth field","36a25139":"Image(\"..\/input\/images\/Card1 copy 4.png\")","e5af20e4":"F4 = dfc['info.4'].value_counts().reset_index()\nF4.rename(columns = {'index': 'amenity',\n                   'info.4': 'count'}, inplace = True)\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'amenity', y = 'count', data = F4, palette = MA(F4['count']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Info 4\", fontsize = 30)","4a9eff78":"print(\"The forth field mentions 'Visit Hotel Website' almost every single time.\")","071c5c01":"#Fifth field","3828dbc7":"Image(\"..\/input\/images\/card1 copy 5.png\")","4d16ae78":"F5 = dfc['info.5'].value_counts().reset_index()\nF5.rename(columns = {'index': 'amenity',\n                   'info.5': 'count'}, inplace = True)\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'amenity', y = 'count', data = F5, palette = MA(F5['count']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Info 5\", fontsize = 30)","0f7bf18d":"print(\"For the last field on the left side, 'free cancellation' is mentioned the most.\")","7545ba88":"#What is the top amenity showcased on the cards ","5b1185fe":"I1 = dfc.groupby('info.1').count()['Hotel name'].reset_index().rename(columns = {'Hotel name': 'Count', 'info.1': 'info'}).sort_values(by = 'Count', ascending = False).head(1)\nI2 = dfc.groupby('info.2').count()['Hotel name'].reset_index().rename(columns = {'Hotel name': 'Count', 'info.2': 'info'}).sort_values(by = 'Count', ascending = False).head(1)\nI3 = dfc.groupby('info.3').count()['Hotel name'].reset_index().rename(columns = {'Hotel name': 'Count', 'info.3': 'info'}).sort_values(by = 'Count', ascending = False).head(1)\nI4 = dfc.groupby('info.4').count()['Hotel name'].reset_index().rename(columns = {'Hotel name': 'Count', 'info.4': 'info'}).sort_values(by = 'Count', ascending = False).head(1)\n\nmain = I1.append([I2, I3, I4])\n\nplt.figure(figsize = (15, 8))\nsns.barplot(y = 'info', x = 'Count', data = main, color = '#2b658a', orient = 'h')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = False, top = True, bottom = True, right = True)\nplt.title(\"Top amenities\", fontsize = 30)","8a9d71f1":"print(\"By far Wifi is the most important amenity as it has been mentioned on almost every single \\nhotel listing\")","f62c4b33":"print(\"By looking at the above findings, we can have a clear idea on what customers value when \\nlooking to book a hotel \")","a82e6b30":"#How often all the fields given by TA get used?\n#We will figure that out by looking at the Nans as an indicator of non-used fields","f3955308":"#We will construct binary variables to be able to answer our question","5a1ad54a":"info = dfc.copy()\ninfo.drop(columns = ['info.6', 'info.7'], inplace = True)\n\nfor n in range(1, 6):\n    info['info.' + str(n)].replace(np.nan, 0, inplace = True)\n    \nfor i in range(1, 6, 1):\n    y = 0\n    for x in info['info.' + str(i)]:\n        if info['info.' + str(i)][y] != 0:\n            info['info.' + str(i)][y] = '1'\n        y += 1\n\n#The loop has purpose to change nans to 0 and non nulls to 1 \n#This will enable us to figure out how often each slot has been used in order","b6f51177":"info['info.1'] = pd.to_numeric(info['info.1'])\ninfo['info.2'] = pd.to_numeric(info['info.2'])\ninfo['info.3'] = pd.to_numeric(info['info.3'])\ninfo['info.4'] = pd.to_numeric(info['info.4'])\ninfo['info.5'] = pd.to_numeric(info['info.5'])","092b01c7":"info['# of slots used'] = info['info.1'] + info['info.2'] + info['info.3'] + info['info.4']","3f34a57a":"info  #The results","47801de3":"slots_used = info['# of slots used'].value_counts().reset_index().rename(columns = {'index': 'number of slots',\n                                                                      '# of slots used': 'count'})\n\nplt.figure(figsize = (20, 8))\nsns.barplot(x = 'number of slots', y = 'count', data = slots_used, palette = M_M(slots_used['number of slots']), edgecolor='black')\n\nplt.ylabel(\"\")\nplt.xlabel(\"\")\nsns.despine(left = True)\nplt.title(\"Number of fields used\", fontsize = 30)","e7ddd705":"print(\"We can clearly see that 2 fields get used the most and 4 gets used the least. That means \\nthat very few use up all the fields to showecase important amenities and other important info.\")","9421f8ee":"#Top Hotels in Europe","8eebbaf3":"# To determine which are the best hotels we need customer input. In this case we don't have the actual reviews\n# But we do have ratings and how many reviews a hotel got. We can use this to get an estimate of the best hotels in Europe ","76b13652":"top_R = dfc[(dfc['Rating'] == 5) & (dfc['continent_name'] == 'Europe')] \n\ntop_H = top_R.sort_values(by = 'reviews count', ascending = False)\n\nprint(\"\\nTop 5 hotels in Europe\\n\")\ntop_H[['Hotel name', 'Price', 'country_name']].head(5)","1a5f3041":"# Loading the data and reading it","3e96a9a9":"# Card analysis","841fa847":"#  EDA","5045ab73":"# Data cleaning"}}