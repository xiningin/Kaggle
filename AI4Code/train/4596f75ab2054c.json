{"cell_type":{"0fd316cc":"code","8542f82e":"code","5b4c3c8a":"code","23435bb0":"code","b9604970":"code","ef6d5121":"code","5e391773":"code","6325b6be":"code","7d7f5866":"code","d2a4a407":"code","05b35e4c":"code","e9d39be4":"code","e2ff2074":"code","69daf837":"code","323cfc2e":"code","6cf1eefd":"code","f1c590f4":"code","d4a04449":"code","5b4fbf02":"code","85bfb172":"code","1cf3a516":"code","935db633":"code","e25f709a":"code","f92c6547":"code","27db8c0b":"code","b730882c":"code","0b0f2efe":"code","f0037530":"code","32d71835":"code","cf7e177f":"code","69e805e5":"code","ba923c75":"code","557bbe3b":"code","eb8ed851":"code","60ee2f03":"code","13831678":"code","3f48db87":"code","0f81cef5":"code","19fc5083":"code","437887db":"code","f9e1018f":"code","b93bfed8":"code","b9fe811d":"code","66224e12":"markdown","f815ed85":"markdown","d490b2d4":"markdown","a04bd783":"markdown","b2ce89c1":"markdown","f91a0791":"markdown","0c7479b1":"markdown","a4e25b46":"markdown","0aef65fc":"markdown","c5c96514":"markdown","12cad2f4":"markdown","6f76d1d4":"markdown","82c9c343":"markdown","10a5f676":"markdown","5246bee2":"markdown","0ef2a401":"markdown","e4c2059a":"markdown","c599313c":"markdown","43dd7cfa":"markdown","348cf88a":"markdown","033343d8":"markdown","67521f71":"markdown","808be43d":"markdown","2f7092d0":"markdown","4e0b347d":"markdown","cad13779":"markdown","5b53628d":"markdown","1e1222a3":"markdown"},"source":{"0fd316cc":"#working with data\nimport pandas as pd\nimport numpy as np\n\n#visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n#statistics\nimport scipy.stats as stats","8542f82e":"data = pd.read_csv('..\/input\/insurance\/insurance.csv')\ndata.head() #checking top five records","5b4c3c8a":"shape_data=data.shape\nprint('Data set contains \"{x}\" number of rows and \"{y}\" number of columns columns'.format(x=shape_data[0],y=shape_data[1]))","23435bb0":"# b - type of each attributes\ncount = 1\nfor item in data.columns:\n    print('\"{x}\" : \"{y}\", Data Type = \"{z}\" '.format(x=count,y=item,z=type(data[item].iloc[0])))\n    count = count+1","b9604970":"#or we can use another method as well that is .dtypes\ndata.dtypes","ef6d5121":"data.isnull().sum()","5e391773":"sns.heatmap(data.isnull(),yticklabels=False,cbar=False,cmap='viridis')","6325b6be":"data.info()","7d7f5866":"data.describe().iloc[[3,4,5,6,7]]\n#5 point summary include\n\n# MIN\n#Q1-25%\n#Q2-50%\n#Q3-75%\n# MAX","d2a4a407":"#visualization via Box Plot\n\nfig, axes = plt.subplots(2, 2, figsize=(12, 6))\nsns.boxplot(data=data['age'],orient='h',palette=None,ax=axes[0,0])\nsns.boxplot(data=data['bmi'],orient='h',palette='Set2',ax=axes[0,1])\nsns.boxplot(data=data['children'],orient='h',palette='Set3',ax=axes[1,0])\nsns.boxplot(data=data['charges'],orient='h',palette='Set1',ax=axes[1,1])\n\n#--------------------------------------\naxes[0,0].set_title('Age Distribution')\n#5 point summary include\n\n# MIN    =  18\n#Q1-25%  =  27\n#Q2-50%  =  39\n#Q3-75%  =  51\n# MAX    =  64\n\n#--------------------------------------\naxes[0,1].set_title('BMI Distribution')\n#5 point summary include\n\n# MIN    = 15.96\n#Q1-25%  = 26.29\n#Q2-50%  = 30.40\n#Q3-75%  = 34.69\n# MAX    = 53.13\n#we can see presense of outliers\n\n#--------------------------------------\naxes[1,0].set_title('Children Distribution')\n#5 point summary include\n\n# MIN    = 0\n#Q1-25%  = 0\n#Q2-50%  = 1\n#Q3-75%  = 2\n# MAX    = 5\n\n#--------------------------------------\naxes[1,1].set_title('charges Distribution')\n#5 point summary include\n\n# MIN    = 1121.87\n#Q1-25%  = 4740.28\n#Q2-50%  = 9382.03\n#Q3-75%  = 16639.91\n# MAX    = 63770.42\n#we can see presense of outliers","05b35e4c":"#The distplot shows the distribution of a univariate set of observations.\nfig, axes = plt.subplots(1, 3, figsize=(14, 4))\nsns.distplot(data['age'],bins=30,ax=axes[0])\nsns.distplot(data['bmi'],bins=30,ax=axes[1])\nsns.distplot(data['charges'],bins=30,ax=axes[2])\naxes[0].set_title('Age Distribution')\naxes[1].set_title('BMI Distribution')\naxes[2].set_title('charges Distribution')","e9d39be4":"#A Skewness value of 0 in the output denotes a symmetrical distribution\n#A negative Skewness value in the output denotes tail is larger towrds left hand side of data so we can say left skewed\n#A Positive Skewness value in the output denotes tail is larger towrds Right hand side of data so we can say Right skewed\ndata['age bmi charges'.split()].skew()","e2ff2074":"#lets simply do via box plot\n\nfig, axes = plt.subplots(1, 3, figsize=(14, 3))\nsns.boxplot(data=data['age'],orient='h',palette='Set1',ax=axes[0])\nsns.boxplot(data=data['bmi'],orient='h',palette='Set2',ax=axes[1])\nsns.boxplot(data=data['charges'],orient='h',palette='Set3',ax=axes[2])\naxes[0].set_title('Age Distribution')\naxes[1].set_title('BMI Distribution')\naxes[2].set_title('charges Distribution')\n","69daf837":"#lets firstly go for value_counts\ndata['sex'].value_counts()","323cfc2e":"data['children'].value_counts()","6cf1eefd":"data['smoker'].value_counts()","f1c590f4":"data['region'].value_counts()","d4a04449":"#lets visualize via count plot\nfig, axes = plt.subplots(2, 2, figsize=(12, 6))\nsns.countplot(x=data['sex'],ax=axes[0,0])\nsns.countplot(x=data['children'],ax=axes[0,1])\nsns.countplot(x=data['smoker'],ax=axes[1,0])\nsns.countplot(x=data['region'],orient='h',palette='Set1',ax=axes[1,1])\naxes[0,0].set_title('Sex Distribution')\naxes[0,1].set_title('Children Distribution')\naxes[1,0].set_title('smoker Distribution')\naxes[1,1].set_title('region Distribution')\nfig.tight_layout()\n#thus we can conclude following things\n# 1. form Sex distribution we can state that there are almost equal number of males and females \n# 2. from children Distribution states that maximum number of people in data has no children, \n#    and there are quite few to have five childre \n# 3.from smoker Distribution we can state that maximum number of people are non-smoker","5b4fbf02":"#pair plor includes all the colums of data frame and show us the scatter plot or\n# how these coloumns are related to each other\nsns.pairplot(data)","85bfb172":"#let's check out some catagorical data effect on each as well\n#1.How smoker and Non smoker are spread out\nsns.pairplot(data,hue='smoker')","1cf3a516":"#2.How Male and Female are spread out\nsns.pairplot(data,hue='sex')","935db633":"#3. How Regional data is spread out\nsns.pairplot(data,hue='region')\n","e25f709a":"#lets try correlation metrix as well to get more insight of the pairing of all data\n#and visualise it via heatmap\nfig,ax= plt.subplots(figsize=(8, 4))\nsns.heatmap(data.corr(),annot=True)\nfig.tight_layout()\n#thus now we can clearly see the correlation values, highest correlation value is \n# .3 for age and charges \n# followed by .2 for bmi and charges","f92c6547":"#data generation\nsmoker_data = data[data['smoker']=='yes']['charges']\nnon_smoker_data = data[data['smoker']=='no']['charges']","27db8c0b":"#Using the seaborn python library to generate a histogram of our 2 samples outputs the following.\nsns.kdeplot(smoker_data, shade=False)\nsns.kdeplot(non_smoker_data, shade=True)\nplt.title(\"Independent Sample T-Test\")","b730882c":"#check of mean and SD\ndata.groupby('smoker').describe()['charges']","0b0f2efe":"sm_arr = np.array(smoker_data)\nnsm_arr = np.array(non_smoker_data)","f0037530":"#performing an independent T-test\nt,p_value = stats.ttest_ind(sm_arr,nsm_arr,axis =0)\nprint(\"t = \",t, \", p_twosided = \", p_value, \", p_onesided =\", p_value\/2)","32d71835":"#doing Two Tail testing since p_value < (alpha\/2)\nif p_value < (0.05)\/2:\n   print('We Reject the Null Hypothesis!')\nelse:\n    print('We Fail to Reject the Null Hypothesis!')\n    ","cf7e177f":"#data generation\nmale_data = data[data['sex']=='male']['bmi']\nfemale_data = data[data['sex']=='female']['bmi']","69e805e5":"#Using the seaborn python library to generate a histogram of our 2 samples outputs the following.\nsns.kdeplot(male_data, shade=False)\nsns.kdeplot(female_data, shade=True)\nplt.title(\"Independent Sample T-Test\")","ba923c75":"m_arr = np.array(male_data)\nf_arr = np.array(female_data)","557bbe3b":"#performing an independent T-test\nt,p_value = stats.ttest_ind(m_arr,f_arr,axis =0)\nprint(\"t = \",t, \", p_twosided = \", p_value, \", p_onesided =\", p_value\/2)","eb8ed851":"#doing Two Tail testing \nif p_value < (0.05)\/2:\n   print('We Reject the Null Hypothesis!')\nelse:\n    print('We Fail to Reject the Null Hypothesis!')","60ee2f03":"#doing Two Tail testing at confidence interval 90% \nif p_value < (0.10)\/2:\n   print('We Reject the Null Hypothesis!')\nelse:\n    print('We Fail to Reject the Null Hypothesis!')","13831678":"#extracting Data\ncross_table=pd.crosstab(data['smoker'],data['sex'])\n","3f48db87":"#how the data look like\ncross_table\n","0f81cef5":"#performing chi-square test\nstats.chi2_contingency(cross_table)","19fc5083":"#data extraction\nbmi_of_female_with_no_child = data[(data['sex']=='female') & (data['children']==0)]['bmi']\nbmi_of_female_with_one_child = data[(data['sex']=='female') & (data['children']==1)]['bmi']\nbmi_of_female_with_two_child = data[(data['sex']=='female') & (data['children']==2)]['bmi']","437887db":"sns.kdeplot(bmi_of_female_with_no_child, shade=False)\nsns.kdeplot(bmi_of_female_with_one_child, shade=True)\nsns.kdeplot(bmi_of_female_with_two_child, shade=True)\n\nplt.title(\"Independent Sample T-Test\")","f9e1018f":"#The analysis of variance (ANOVA) can be thought of as an extension to the t-test. \n#The independent t-test is used to compare the means of a condition between 2 groups. \n#ANOVA is used when one wants to compare the means of a condition between 2+ groups. \n#ANOVA is an omnibus test, meaning it tests the data as a whole. \n#Another way to say that is this,\n#ANOVA tests if there is a difference in the mean somewhere in the model (testing if there was an overall effect),\n#but it does not tell one where the difference is if the there is one.\n\nF_stats,p_value = stats.f_oneway(bmi_of_female_with_no_child, \n            bmi_of_female_with_one_child,\n             bmi_of_female_with_two_child)","b93bfed8":"print('F-statistic = {x}, p_value = {y}'.format(x=F_stats,y=p_value))","b9fe811d":"if p_value<.05:\n    print('we Reject the Null Hypothesis!')\nelse:\n    print('we fail to Reject Null Hypothesis')","66224e12":"### <u><font color='green'><p>e - Distribution of <b>\u2018bmi\u2019<\/b>, <b>\u2018age\u2019<\/b> and <b>\u2018charges\u2019<\/b> columns<\/p><\/font><\/u>\n<p>we had already showed above the distribution via box plot and found out that <b>\u2018bmi\u2019<\/b> and <b>\u2018charges\u2019<\/b> contains some <u>Right outlier<\/u> while <b>\u2018age\u2019<\/b> does not contain any outliers, now lets do it via dist plot as well to see the curve of distribution <\/p>","f815ed85":"### <font color='red'>Task 2: <\/font> Importing data in data frame","d490b2d4":"### Observations \n1. Chi-Square value = 7.39\n2. p_value = .0065\n3. degree of freedom =1\n#### Expected values and given values\n1. expexted value for Non-Smoker Female = 526.43 , while given value is 547\n2. expexted value for Non-Smoker Male = 537.56 , while given value is 517\n3. expexted value for Smoker Female = 135.56 , while given value is 115\n4. expexted value for Non-Smoker Female = 138.43 , while given value is 159\n\n##### P_value is calculated by looking at chi-square value and degree of freedom\n\n<p> <font color='green'>\"p_value(.0065) <.05 \" <\/font> <\/p>\n    \n#### Thus we can conclude\n<p> <font color='red'>\"we Reject Null Hypothesis\"<\/font><\/p>\n<p>Hence :  <font color='red'>\"there is difference in proportion of smokers in different genders!\"<\/font><\/p>\n","a04bd783":"###  <u><font color='green'><p>c - Checking the presence of missing values<\/p><\/font><\/u>\nWe can use seaborn to create a simple heatmap to see where we are missing data!","b2ce89c1":"Thus we can conclude\n<p> Skew value of Age is 0.05 thus we can say it is<font color='red'>\"very very small right Skewed, almost neglegible\" <\/font><\/p>\n<p> Skew value of BMI is 0.28 thus we can say it is <font color='red'>\"right skewed\"<\/font> <\/p>\n<p> Skew value of Charges is 1.51 thus we can say it is <font color='red'>\"heavily right skewed\"<\/font> <\/p>","f91a0791":"By looking at the heatmap we can see a single colour thus representing that there is no missing value in our dataset,We can also used .info function and we can see out of 1338 entries all columns has 1338 non-null entries.\nor via data.isnull().sum() => 0 for all so\n<p><b>Hence Concluded.<\/b><\/p>\n<p><font color='red'>No Missing Values!<font>","0c7479b1":"## The End","a4e25b46":"### <font color='red'>Task 4: <\/font> statistical evidence\n### <font color='green'><p><u> a-Do charges of people who smoke differ significantly from the people who don't?<\/u><\/p><\/font>","0aef65fc":"### <font color='red'>Task 1: <\/font> Importing Libraries","c5c96514":"#### Thus we can conclude\n<p> <font color='red'>\"we fail to reject Null Hypothesis\"<\/font><\/p>\n<p>Hence :  <font color='red'>\"No difference between means, i.e. x1 = x2 = x3\"<\/font><\/p>\n\n######  so from above we can see that p_value is 0.71 which means that The distribution of bmi across women with no children,one child and two children is same\n","12cad2f4":"### <u><font color='green'><p>d. Is the distribution of bmi across women with no children, one child and two children, the same?<\/p><\/font><\/u>\n### <u>Assumptions<\/u>\n##### x1 = distribution of bmi across women with no children\n##### x2 = distribution of bmi across women with one children\n##### x3 = distribution of bmi across women with two children\n##### Null Hypothesis   (H0) = <b>\"No difference between means, i.e. x1 = x2 = x3\"<\/b> \n##### Alternate hypothesis (H1) = <b>\"Difference between means exist somewhere, i.e. x1 = x2 != x3, or x1 != x2 = x3, or x1 != x2 != x3\"<\/b>\n\n\n##### Performing <b>\"ANOVA (One-Way)\"<\/b>\n* &alpha; = 0.05\n* 95% confidence level\n","6f76d1d4":"#### Thus we can conclude\n<p> <font color='red'>\"we Failed to Reject Null Hypothesis\"<\/font><\/p>\n<p>Hence :  <font color='red'>\"bmi of males does not differ from that of females\"<\/font><\/p>","82c9c343":"### <u><font color='green'>b - Type of each attribute in Data<\/font><\/u>\nwe can either grab each type saperately or we can just use .dtypes","10a5f676":"### <u>Assumptions<\/u>\n##### Null Hypothesis   (H0) = <b>\"smoking has no effect on charges\"<\/b> or we can say <b>\"ud = 0\"<\/b>, which translates to the mean difference between sample 1 and sample 2 is equal to 0.\n\n##### Alternate hypothesis (H1) = <b>\"smoking has effect on charges\"<\/b>  or we can say <b>ud ? 0<\/b>, which translates to the mean difference between sample 1 and sample 2 is not equal to 0.\n\n\n##### Performing <b>\"Two Sample T-test\"<\/b>\n\n* H<sub>0<\/sub>: x&#772;<sub>1<\/sub> = x&#772;<sub>2<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> = 0, that is , there is no difference between the sample means\n* H<sub>A<\/sub>: x&#772;<sub>2<\/sub> != x&#772;<sub>1<\/sub>\n* &alpha; = 0.05\n* 95% confidence level","5246bee2":"### <u><font color='green'><p>f - Measure of Skewness of <b>\u2018bmi\u2019<\/b>, <b>\u2018age\u2019<\/b> and <b>\u2018charges\u2019<\/b> columns<\/p><\/font><\/u>\n\nSkewness can be found out via many ways, like if point lies outside +-1.5*IQR, or if on Normalizing the data, points lies outside +-3 standard deviation.\nor Simply use .skew() method","0ef2a401":"# Statistical Learning Project including EDA\n### <u>Data Description<\/u>\n The data at hand contain medical costs of people characterized by certain attributes.\n\n### <u>Domain<\/u>\n Health Care\n\n### <u>Context:<\/u>\nLeveraging customer information is paramount for most business.In the case of an insurance comany, attributes of customer like the ones metioned below can be crucial in making business decision. hence, knowing to explore and generate value out of such data can be an invaluable skill to have.","e4c2059a":"Thus we can conclude\n<p>only columns that are slightly related or effect each other are<\/p>\n<p> <font color='red'>\"bmi  and charges\" <\/font><\/p>\n<p> <font color='red'>\"age and charges\"<\/font> <\/p>\n","c599313c":"### <font color='red'>Task 3: <\/font> Basic EDA on data :\n","43dd7cfa":"### <u><font color='green'><p>d - 5 point summary of numerical attributes<\/p><\/font><\/u>\n<p>we can use .describe() to get summary of all numerical attributes but the best way to visualize is via box plot <\/p>\n","348cf88a":"### <u>Assumptions<\/u>\n##### Null Hypothesis   (H0) = <b>\"Gender has no effect on bmi\"<\/b> or we can say <b>\"ud = 0\"<\/b>, which translates to the mean difference between sample 1 and sample 2 is equal to 0.\n\n##### Alternate hypothesis (H1) = <b>\"Gender had effect on bmi\"<\/b>  or we can say <b>ud ? 0<\/b>, which translates to the mean difference between sample 1 and sample 2 is not equal to 0.\n\n\n##### Performing <b>\"Two Sample T-test\"<\/b>\n\n* H<sub>0<\/sub>: x&#772;<sub>1<\/sub> = x&#772;<sub>2<\/sub>, or x&#772;<sub>2<\/sub> - x&#772;<sub>1<\/sub> = 0, that is , there is no difference between the sample means\n* H<sub>A<\/sub>: x&#772;<sub>2<\/sub> != x&#772;<sub>1<\/sub>\n* &alpha; = 0.05\n* 95% confidence level","033343d8":"### <u><font color='green'><p>h - Distribution of categorical columns i.e. <b>\u2018sex\u2019<\/b>, <b>\u2018children\u2019<\/b>, <b>\u2018smoker\u2019<\/b> and <b>\u2018region\u2019<\/b> <\/u>\n<p>We can simply visualise it using count plot<\/p>","67521f71":"Thus we can conclude\n<p> Age Distribution <font color='red'>\"Does not have outlier\" <\/font><\/p>\n<p> BMI Distribution <font color='red'>\"contains few outliers at right hand side\"<\/font> <\/p>\n<p> Charges Distribution  <font color='red'>\"contain many outliers at right hand side\"<\/font> <\/p>","808be43d":"### <u><font color='green'><p>c. Is the proportion of smokers significantly different in different genders?<\/p><\/font><\/u>\n### <u>Assumptions<\/u>\n##### Null Hypothesis   (H0) = <b>\"there is no difference in proportion of smokers in different genders\"<\/b> \n\n##### Alternate hypothesis (H1) = <b>\"there is difference in proportion of smokers in different genders\"<\/b>\n\n\n##### Performing <b>\"Chi-Square(\u03c72)-test for homogeneity\"<\/b>\n* &alpha; = 0.05\n* 95% confidence level\n\n#### Conditions for inference\nSometimes you\u2019ll have a \u03c72 problem where someone\u2019s taking a sample of a\npopulation. When sampling occurs, in order for us to be able to use a \u03c72-\ntest, we need to be able to meet typical sampling conditions:\n1. Random: Any sample we\u2019re using needs to be taking randomly.\n2. Large counts: Each expected value (more on \u201cexpected value\u201d\nlater) that we calculate needs to be 5 or greater\n3. Independent: We should be sampling with replacement, but if\nwe\u2019re not, then the sample we take shouldn\u2019t be larger than 10%\nof the total population","2f7092d0":"### <u><font color='green'><p>g - Checking the presence of outliers in <b>\u2018bmi\u2019<\/b>, <b>\u2018age\u2019<\/b> and <b>\u2018charges\u2019<\/b> columns<\/p><\/font><\/u>\nOutliers can be found out via many ways, like if point lies outside +-1.5*(Inter Quartile Range), or if on Normalizing the data, points lies outside +-3 standard deviation.\n","4e0b347d":"### <u><font color='green'><p>i - Pair plot that includes all the columns of the data frame<\/p><\/u>\n<p>We can simply visualise it using pair plot<\/p>","cad13779":"### <u><font color='green'><p>a - Shape of Data<\/p><\/font><\/u>\nwe can simply use .shape","5b53628d":"### <u><font color='green'><p>b. Does bmi of males differ significantly from that of females?<\/p><\/font><\/u>","1e1222a3":"Thus we can conclude\n<p> <font color='red'>\"we Reject Null Hypothesis\"<\/font><\/p>\n<p>Hence :  <font color='red'>\"charges of people who smoke differ significantly from the people who don't!\"<\/font> we can state this statement with 95% surity, since P value is so low we hold our statement even at 99% confidence level <\/p>"}}