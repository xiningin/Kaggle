{"cell_type":{"79e2f8e6":"code","87015a57":"code","0beb512b":"code","f979a0e9":"code","3ea1df73":"code","53e2267d":"code","a5985516":"code","d93d8396":"code","b5b28040":"code","4decda91":"code","5ff8e4ed":"code","e2a23593":"code","80239163":"code","184641b5":"code","c6c71e47":"code","a7ad6bc3":"code","c8f273cc":"code","fa6cf4d9":"code","8552015b":"code","4e476e5c":"code","ae0f4224":"code","f3c6a850":"code","4b49fbe8":"code","5dc72f45":"code","6ae36efc":"code","f23b0679":"code","4c94338c":"code","ffe01c17":"code","3e45c59c":"code","102a6016":"markdown","be33c065":"markdown","34309dd8":"markdown","3ec086c0":"markdown","6c5c5c7b":"markdown","43d5ab2b":"markdown","d447d079":"markdown","8a8c303f":"markdown","14ed6b47":"markdown","67258fe1":"markdown","48fc117c":"markdown","76eb185e":"markdown","eb2387c3":"markdown","07a5bdc8":"markdown","247257d1":"markdown","32a078ec":"markdown","8820c7a5":"markdown","aecd3d14":"markdown","d2029e48":"markdown","2fbde096":"markdown","9b96a080":"markdown","4b2211d6":"markdown","077d5ff6":"markdown","97de5d50":"markdown"},"source":{"79e2f8e6":"import os\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","87015a57":"eg_path = \"..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/\"\npath = \"..\/input\/learnplatform-covid19-impact-on-digital-learning\/\"\nfiles = os.listdir(eg_path)\nx = np.array([[None,None,None,None,None]]) #initial first row\n\nfor file in files:\n    print(file,\" \",end=\"\")\n    _df = pd.read_csv(eg_path +file)\n    a, b = file.split('.')\n    _df['district_id'] = a\n    y = np.array(_df)\n    x = np.append(x,y,axis=0)\nx = np.delete(x,0,axis=0) #delete first row\nnp.save(\"eg.npy\",x)\n\n","0beb512b":"#pct_access         Percentage of students in the district have at least one page-load event of a given product and on a given day\n#engagement_index   Total page-load events per one thousand students of a given product and on a given day\ntmp = np.load(\"eg.npy\",allow_pickle = True)\neg_df = pd.DataFrame(tmp, columns = ['time','lp_id','pct_access','engagement_index','district_id'])\nprint(eg_df.dtypes)\nprint(eg_df.columns)\nprint(eg_df.shape)\neg_df","f979a0e9":"d_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\nprint(d_df.dtypes)\nprint(d_df.columns)\nprint(d_df.shape)\nd_df","3ea1df73":"p_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\nprint(p_df.dtypes)\nprint(p_df.columns)\nprint(p_df.shape)\np_df","53e2267d":"print(eg_df.isnull().sum())\nprint(d_df.isnull().sum())\nprint(p_df.isnull().sum())","a5985516":"print(eg_df.duplicated(subset=['time','lp_id','district_id']).sum())\nprint(d_df.duplicated(subset=['district_id']).sum())\nprint(p_df.duplicated(subset=['LP ID']).sum())","d93d8396":"print(eg_df.shape)\neg_df = eg_df.dropna(axis=0,subset=['engagement_index'])\neg_df = eg_df.dropna(axis=0,subset=['pct_access'])\neg_df = eg_df.dropna(axis=0,subset=['lp_id'])\nprint(eg_df.shape)","b5b28040":"df = eg_df.drop(['time','district_id'],axis = 1)\ntmp = df.groupby(['lp_id']).sum()\ntmp['pct_access'] = tmp['pct_access']\/366  #the year 2020 has 366 days\ntmp['engagement_index'] = tmp['engagement_index']\/366\ntmp.to_csv('lp_id.csv')","4decda91":"lpid_df = pd.read_csv('lp_id.csv') # lp_id, pct_access, engagement_index\nlp = lpid_df.sort_values(by=['pct_access'], ascending=False)[:20]\nprint(lp)\neg = lpid_df.sort_values(by=['engagement_index'], ascending=False)[:20]\nprint(eg)","5ff8e4ed":"columns = [\"LP ID\",\"URL\",\"Product Name\",\"Provider\/Company Name\",\"Sector(s)\",\"Primary Essential Function\"]\nrow = pd.DataFrame([(26488,\"Unknown\",\"Unknown\",\"Unknown\",\"Unknown\",\"Unknown\")],columns = columns)\np_df2 = pd.concat([p_df, row],axis=0)","e2a23593":"lpid_df = pd.read_csv('lp_id.csv')  # lp_id, pct_access, engagement_index\nlpid_df['pct_access'] = lpid_df['pct_access']\/233  # 233 is the number of district\nlpid_df['engagement_index'] = lpid_df['engagement_index']\/233\npc = lpid_df.sort_values(by=['pct_access'], ascending=False)[:20]\neg = lpid_df.sort_values(by=['engagement_index'], ascending=False)[:20]\npct = pd.merge(pc, p_df2, left_on=\"lp_id\", right_on=\"LP ID\").drop('LP ID',axis=1)\nprint(pct.head())\neng = pd.merge(eg, p_df2, left_on=\"lp_id\", right_on=\"LP ID\").drop('LP ID',axis=1)\nprint(eng.head())","80239163":"sns.set_palette(\"bright\")\nplt.figure(figsize=(15,10))\nsns.barplot(pct['pct_access'],pct['Product Name'] )\nplt.xlabel('Average percentage of students have at least one page-load event of a given product and on a day')\nplt.ylabel('Product Name')","184641b5":"sns.set_palette(\"bright\")\nplt.figure(figsize=(15,10))\nsns.barplot(eng['engagement_index'],eng['Product Name'] )\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\nplt.ylabel('Product Name')","c6c71e47":"df = eg_df.drop(['time','lp_id'],axis = 1)\ntmp = df.groupby(['district_id']).sum()\ntmp['pct_access'] = tmp['pct_access']\/366\ntmp['engagement_index'] = tmp['engagement_index']\/366\ntmp.to_csv('district_id.csv')","a7ad6bc3":"dis_df = pd.read_csv('district_id.csv') # district_id, pct_access, engagement_index\npct = pd.merge(dis_df, d_df, left_on=\"district_id\", right_on=\"district_id\").drop('district_id',axis=1)\nprint(pct.isnull().sum())\npct.dropna(subset=['state'],inplace=True)\ndf = pct.drop(['locale','pct_black\/hispanic','pct_free\/reduced','county_connections_ratio','pp_total_raw'],axis = 1)\ndf.groupby(['state']).mean().to_csv('state.csv')  #mean() => divide the number of the district in the state","c8f273cc":"dis_df = pd.read_csv('state.csv') # state, pct_access, engagement_index\nlp = dis_df.sort_values(by=['pct_access'], ascending=False)\nprint(lp)\neg = dis_df.sort_values(by=['engagement_index'], ascending=False)\nprint(eg)","fa6cf4d9":"sns.set_palette(\"bright\")\nplt.figure(figsize=(15,10))\nsns.barplot(lp['pct_access'],lp['state'] )\nplt.xlabel('average percentage of students have at least one page-load event of all product and on a day')\nplt.ylabel('State')","8552015b":"sns.set_palette(\"bright\")\nplt.figure(figsize=(15,10))\nsns.barplot(eg['engagement_index'],eg['state'] )\nplt.ylabel('State')\nplt.xlabel('Average total page-load events per one thousand students of all product and on a day')","4e476e5c":"df = eg_df.drop(['time'],axis = 1)\ntmp = df.groupby(['district_id','lp_id']).sum()\ntmp['pct_access'] = tmp['pct_access']\/366  #the year 2020 has 366 days\ntmp['engagement_index'] = tmp['engagement_index']\/366\ntmp.to_csv('re.csv')","ae0f4224":"re = pd.read_csv('re.csv')  #  district_id, lp_id, pct_access, engagement_index\nprint(re.shape)\nre = pd.merge(re, p_df2, left_on=\"lp_id\", right_on=\"LP ID\").drop('LP ID',axis=1)\nre = re[['district_id','pct_access','engagement_index','Product Name']]\nprint(re.shape)\ndis_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nre = pd.merge(dis_df, re, left_on=\"district_id\", right_on=\"district_id\").drop('district_id',axis=1)\nre = re[['state','pct_access','engagement_index','Product Name']]\nre.groupby(['state','Product Name']).mean().to_csv('re1.csv') #mean() => divide the number of the district in the state","f3c6a850":"re1 = pd.read_csv('re1.csv') #state, Product Name, pct_access, engagement_index\np = re1[re1['state']=='Arizona'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title(\"Arizona\")\nplt.ylabel('Product Name')\nplt.xlabel('Average total page-load events per one thousand students of a given product  and on a day')","4b49fbe8":"re1 = pd.read_csv('re1.csv') #state, Product Name, pct_access, engagement_index\np = re1[re1['state']=='Illinois'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title(\"Illinois\")\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\nplt.ylabel('Product Name')","5dc72f45":"re1 = pd.read_csv('re1.csv') #state, Product Name, pct_access, engagement_index\np = re1[re1['Product Name']=='Google Docs'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['state'] )\nplt.title('Google Docs')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\nplt.ylabel('State')","6ae36efc":"re1 = pd.read_csv('re1.csv') #state, Product Name, pct_access, engagement_index\np = re1[re1['Product Name']=='Google Classroom'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['state'] )\nplt.title('Google Classroom')\nplt.ylabel('State')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')","f23b0679":"dis_df = pd.read_csv('district_id.csv') # district_id, pct_access, engagement_index\nd_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\npct = pd.merge(dis_df, d_df, left_on=\"district_id\", right_on=\"district_id\").drop('district_id',axis=1)\npct.dropna(subset=['locale'],inplace=True)\ndf = pct.drop(['state','pct_black\/hispanic','pct_free\/reduced','county_connections_ratio','pp_total_raw'],axis = 1)\ndf.groupby(['locale']).mean().to_csv('locale.csv') #mean() => divide the number of the district in the same locale","4c94338c":"plt.figure(figsize=(15,5))\nsns.barplot(df['locale'], df['pct_access'])\nplt.figure(figsize=(15,5))\nsns.barplot(df['locale'], df['engagement_index'])","ffe01c17":"re = pd.read_csv('re.csv')  #  district_id, lp_id, pct_access, engagement_index\nre = pd.merge(re, p_df2, left_on=\"lp_id\", right_on=\"LP ID\").drop('LP ID',axis=1)\nre = re[['district_id','pct_access','engagement_index','Product Name']]\ndis_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nre = pd.merge(dis_df, re, left_on=\"district_id\", right_on=\"district_id\").drop('district_id',axis=1)\nre.dropna(subset=['locale'],inplace=True)\nre = re[['locale','pct_access','engagement_index','Product Name']]\nprint(re)\nre.groupby(['locale','Product Name']).sum().to_csv('re2.csv')","3e45c59c":"re2 = pd.read_csv('re2.csv') #locale, Product Name, pct_access, engagement_index\np = re2[re2['locale']=='Suburb'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title('Suburb')\nplt.ylabel('Product Name')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\np = re2[re2['locale']=='Rural'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title('Rural')\nplt.ylabel('Product Name')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\np = re2[re2['locale']=='City'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title('City')\nplt.ylabel('Product Name')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')\np = re2[re2['locale']=='Town'].sort_values(by=['engagement_index'], ascending=False)[:20]\nplt.figure(figsize=(15,10))\nsns.barplot(p['engagement_index'],p['Product Name'] )\nplt.title('Town')\nplt.ylabel('Product Name')\nplt.xlabel('Average total page-load events per one thousand students of a given product and on a day')","102a6016":"## Import districts_info.csv and products_info.csv to DataFrame","be33c065":"## Group by ['lp_id'],and save the result to file lp_id.csv.","34309dd8":"## Find the statistics between the state and product,and save the result to file re1.csv.","3ec086c0":"## In the file products_info.csv ,lp_id 26488 is missing. Append one row for lp_id 26488.","6c5c5c7b":"##  Product in the Arizona","43d5ab2b":"## Check for duplicated","d447d079":"## Group by state name","8a8c303f":"## Relation between state  and engagement_index","14ed6b47":"## ","67258fe1":"## Relation between state  and pct_access","48fc117c":"## Load eg.npy to DataFrame","76eb185e":"## Find the top 20 product","eb2387c3":"## Top 20 product name in the locale","07a5bdc8":"## Check for Nan","247257d1":"## Group by ['district_id'] ,and save the result to file district_id.csv","32a078ec":"## Product in the Illinois","8820c7a5":"## Google Docs ","aecd3d14":"## Read all  csv file in the directory engagement_data and transform into a npy file","d2029e48":"## Group by ['district_id','lp_id'] ,and save the result to file re.csv.","2fbde096":"## Find the statistics between the locale and software usage","9b96a080":"## Drop Nan","4b2211d6":"## find the product name","077d5ff6":"## Top 20 Product","97de5d50":"## Google Classroom"}}