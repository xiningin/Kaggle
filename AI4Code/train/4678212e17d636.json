{"cell_type":{"752811a2":"code","caac50b3":"code","d2389870":"code","0c19d1f4":"code","2c3d4a76":"code","fa07ad3d":"code","afb7d09d":"code","a21117b8":"code","7c0cb802":"code","0ddd891a":"code","3ada72e1":"code","7f61c45a":"code","e323027c":"code","5e30a295":"code","df3a93d0":"code","ee515f34":"code","e595b4c3":"code","7526516c":"code","839186ea":"code","3c344071":"code","ed4901f4":"code","74e9b17d":"code","56f6acc7":"code","8a043c1c":"code","ac8a167d":"code","f51298ef":"code","860fe7ce":"code","edc563e1":"code","625db884":"code","f1540500":"code","15bdeb09":"code","ac54926b":"code","06e76beb":"code","ccb5bf0e":"code","37d85ca0":"code","041c3972":"code","0b426735":"code","d94669f8":"code","9ff9135b":"code","8d22a525":"code","b55e6450":"code","14c79542":"code","18b8ea92":"code","33e46b8f":"code","513d688a":"code","1418e8ac":"code","63c1b803":"code","d9e01018":"code","f66d8dc7":"code","4a98b347":"code","fc945a7f":"code","5193a884":"code","acdc533f":"code","b2272d1f":"code","bfb28f73":"code","96d07b37":"code","cd5f364f":"code","b6587260":"code","1a091a15":"code","a09269e8":"code","2bfa1cab":"code","1f3b5123":"code","429208e4":"code","a6a9f64a":"code","0258688b":"code","b7776183":"code","6120a639":"code","42e6e66d":"code","8455192a":"code","6fd04c19":"code","d0d9ecd9":"code","243594e6":"code","a36eae1f":"code","ef8869b1":"code","c24d5294":"code","578cba14":"code","d25ea484":"code","e0375a0f":"code","207a73f7":"code","e62a845c":"code","e3dd2d19":"code","0b872e3a":"code","2911a967":"code","f4cc3ffe":"code","5c1f3bef":"code","3229861d":"code","0fd9f31c":"code","b1c7a7d6":"code","ed2948a5":"code","5501df5f":"code","8702da60":"code","7a5993d4":"code","91753566":"code","89202db1":"code","3d583764":"code","5a81d28f":"code","d2b1a733":"code","27eebb63":"code","0a8ebc58":"code","71ef5580":"code","bd844b8b":"code","393c8d60":"code","289ccc79":"code","ab8926fd":"code","603daf29":"code","2bf9e51b":"code","fcb54736":"code","cf909c13":"code","952976ca":"code","b03df806":"code","c710a0d2":"code","36b0c0c7":"code","ac922717":"code","43c4865e":"code","d893c74f":"code","53d4d81f":"code","2954de33":"code","8b4af1a1":"code","9b28b226":"code","45aee997":"code","6fa5e5f4":"code","e7b0b46e":"code","32fd53f7":"code","c65c5a41":"code","6abf5040":"code","c553f5d6":"code","65059f5b":"code","0a3e8167":"code","166cf638":"code","1af4222d":"code","9daf626c":"code","de64954e":"code","92057b66":"code","4455ca0a":"code","fd8fcaf3":"code","1bf14214":"code","ca6a3738":"code","a3e60187":"code","e36d7e87":"code","d1fd0ea8":"markdown","4b36bb34":"markdown","ca7bb983":"markdown","51574de9":"markdown","d93e108e":"markdown","2a1bb470":"markdown","57d6aab5":"markdown","88030fb3":"markdown"},"source":{"752811a2":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","caac50b3":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","d2389870":"train_df = pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv')\ntest_df = pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_test.csv')\ndf = pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/sample_submission.csv')","0c19d1f4":"train_df.head(2)","2c3d4a76":"test_df.head(2)","fa07ad3d":"df.head()","afb7d09d":"train_df.shape","a21117b8":"test_df.shape","7c0cb802":"df.head()","0ddd891a":"df = train_df.copy()","3ada72e1":"df.head()","7f61c45a":"df.describe()","e323027c":"len(df['city'].unique())","5e30a295":"len(df['relevent_experience'].unique())","df3a93d0":"df['relevent_experience'].unique()","ee515f34":"df['enrolled_university'].unique()","e595b4c3":"df['education_level'].unique()","7526516c":"df['major_discipline'].unique()","839186ea":"df['experience'].unique()","3c344071":"len(df['experience'].unique())","ed4901f4":"df['company_size'].unique()","74e9b17d":"df['company_type'].unique()","56f6acc7":"df['last_new_job'].unique()","8a043c1c":"df['training_hours'].unique()","ac8a167d":"len(df['training_hours'].unique())","f51298ef":"df.head(3)","860fe7ce":"plt.figure(figsize=(10,8))\nsns.heatmap(df.isna(),cmap='viridis',cbar=False)","edc563e1":"missing_val = [feature for feature in df.columns if df[feature].isna().sum() > 1]","625db884":"for feature in missing_val:\n    print(feature,\" : \",np.round(df[feature].isnull().mean()*100,3),'% missing values')","f1540500":"### Most of the features dtype is object which should be in integer type, Lets Convert them into integer","15bdeb09":"df.head(2)","ac54926b":"df['gender'].unique()","06e76beb":"sns.countplot(x='gender',data=df)","ccb5bf0e":"df['gender']=df['gender'].fillna('Other')","37d85ca0":"df['gender'].unique()","041c3972":"df.head(2)","0b426735":"df['experience'].unique()","d94669f8":"df['experience']=df['experience'].replace('>20','20')","9ff9135b":"df['experience']=df['experience'].replace('<1','1')","8d22a525":"df['experience'].unique()","b55e6450":"best_exp = df.mode()['experience'][0]\nprint(best_exp)","14c79542":"df['experience'] = df['experience'].fillna(best_exp)","18b8ea92":"df['experience'] = df['experience'].astype(float)","33e46b8f":"df.head(2)","513d688a":"df['last_new_job'].unique()","1418e8ac":"df['last_new_job']=df['last_new_job'].replace('never',0)","63c1b803":"frequent = df.mode()['last_new_job'][0]","d9e01018":"df['last_new_job'] = df['last_new_job'].fillna(frequent)","f66d8dc7":"df['last_new_job'] = df['last_new_job'].replace('>4',4)","4a98b347":"df['last_new_job'] = df['last_new_job'].astype(float)","fc945a7f":"df['education_level'].unique()","5193a884":"sns.pairplot(df)","acdc533f":"sns.heatmap(df.isna(),cbar=False,cmap='viridis')","b2272d1f":"df.head(2)","bfb28f73":"sns.countplot('major_discipline',data=df)","96d07b37":"sns.countplot(x='education_level',data=df)","cd5f364f":"plt.figure(figsize=(10,8))\nsns.countplot(x='major_discipline',hue='education_level',data=df)","b6587260":"df['major_discipline'].unique()","1a091a15":"df['education_level'].unique()","a09269e8":"def fill_discpline(cols):\n    discipline = cols[0]\n    education = cols[1]\n    if pd.isnull(discipline):\n        if education == 'Graduate':\n            return 'STEM'\n        elif education == 'Masters':\n            return 'Humanities'\n        elif education == 'Phd':\n            return 'STEM'\n        else:\n            return 'Other'\n    else:\n        return discipline","2bfa1cab":"df['major_discipline'] = df[['major_discipline','education_level']].apply(fill_discpline,axis=1)","1f3b5123":"df['major_discipline'].unique()","429208e4":"df.head(2)","a6a9f64a":"plt.figure(figsize=(10,8))\nsns.countplot(x='company_size',hue='education_level',data=df)","0258688b":"company_type = df.mode()['company_type'][0]\nprint(company_type)","b7776183":"df['company_type'] = df['company_type'].fillna(company_type)","6120a639":"company_size = df.mode()['company_size'][0]\nprint(company_size)","42e6e66d":"df['company_size'] = df['company_size'].fillna(company_size)","8455192a":"sns.heatmap(df.isna(),cbar=False,cmap='viridis')","6fd04c19":"missing_val = [feature for feature in df.columns if df[feature].isna().sum() > 1]","d0d9ecd9":"for feature in missing_val:\n    print(feature,\" : \",np.round(df[feature].isnull().mean()*100,3),'% missing values')","243594e6":"#df.reset_index(inplace=True)","a36eae1f":"df.head(2)","ef8869b1":"from sklearn.preprocessing import LabelEncoder","c24d5294":"le = LabelEncoder()","578cba14":"df['city'] = le.fit_transform(df['city'])","d25ea484":"from sklearn.preprocessing import OneHotEncoder\nohe = OneHotEncoder() ","e0375a0f":"gender = pd.get_dummies(df['gender'])","207a73f7":"df = pd.concat([df,gender],axis=1)","e62a845c":"df = df.drop('gender',axis=1)","e3dd2d19":"df.head(2)","0b872e3a":"df['relevent_experience'].unique()","2911a967":"df['enrolled_university'].unique()","f4cc3ffe":"df['company_type'].unique()","5c1f3bef":"df['company_size'].unique()","3229861d":"experience = pd.get_dummies(df['relevent_experience'],drop_first=True)\nunivercities = pd.get_dummies(df['enrolled_university'],drop_first=True)","0fd9f31c":"df = pd.concat([df,experience,univercities],axis=1)","b1c7a7d6":"df = df.drop(['relevent_experience','enrolled_university'],axis=1)","ed2948a5":"df.head(2)","5501df5f":"df['company_type'] = le.fit_transform(df['company_type'])\ndf['company_size'] = le.fit_transform(df['company_size'])","8702da60":"df.head(2)","7a5993d4":"df['education_level'].unique()","91753566":"most_frequent = df.mode()['education_level'][0]","89202db1":"df['education_level'] = df['education_level'].fillna(most_frequent)","3d583764":"education = {'Graduate':3,'Masters':4,'High School':2,'Primary School':1,'Phd':5}","5a81d28f":"df['education_level'].replace(education,inplace=True)","d2b1a733":"df['major_discipline'].unique()","27eebb63":"df['major_discipline'] = le.fit_transform(df['major_discipline'])","0a8ebc58":"df.head(2)","71ef5580":"df.info()","bd844b8b":"os.listdir()","393c8d60":"df.to_csv('my_train.csv')","289ccc79":"df = pd.read_csv('my_train.csv',index_col=False)","ab8926fd":"df = df.iloc[:,1:]","603daf29":"df.head()","2bf9e51b":"plt.figure(figsize=(10,8))\nsns.heatmap(df.corr(),annot=True,cmap='magma')","fcb54736":"sns.countplot(x='target',data=df)","cf909c13":"X = df.drop('target',axis=1)\ny = df['target']","952976ca":"from imblearn.over_sampling import RandomOverSampler","b03df806":"X.shape","c710a0d2":"y.shape","36b0c0c7":"oversample = RandomOverSampler(sampling_strategy='minority',random_state=0)","ac922717":"X_over,y_over=oversample.fit_resample(X,y)","43c4865e":"X_over.shape","d893c74f":"y_over.shape","53d4d81f":"from sklearn.model_selection import train_test_split","2954de33":"X_train,X_test,y_train,y_test = train_test_split(X_over,y_over)","8b4af1a1":"from sklearn.feature_selection import SelectFromModel\nfrom sklearn.linear_model import Lasso","9b28b226":"feature_selection = SelectFromModel(Lasso(alpha=0.03,random_state=0))\nfeature_selection.fit(X_train,y_train)","45aee997":"feature_selection.get_support()","6fa5e5f4":"X_train = feature_selection.transform(X_train)\nX_test = feature_selection.transform(X_test)","e7b0b46e":"from sklearn.linear_model import LogisticRegression","32fd53f7":"logistic = LogisticRegression()","c65c5a41":"logistic.fit(X_train,y_train)","6abf5040":"from sklearn.metrics import classification_report,confusion_matrix","c553f5d6":"y_pred = logistic.predict(X_test)","65059f5b":"print(classification_report(y_test,y_pred))","0a3e8167":"print(confusion_matrix(y_test,y_pred))","166cf638":"from sklearn.ensemble import RandomForestClassifier\nrf_regressor = RandomForestClassifier()","1af4222d":"n_estimators = [int(x) for x in np.linspace(start=100, stop = 800, num=8)]\nmax_depth = [int(x) for x in np.linspace(5, 30, num=6)]\nmax_features=['auto','sqrt']\nmin_samples_split= [2, 5, 10, 15, 100]\nmin_samples_leaf = [1, 2, 5, 10]","9daf626c":"random_grid = {'n_estimators':n_estimators,\n         'max_depth':max_depth,\n         'max_features':max_features,\n         'min_samples_split':min_samples_split,\n         'min_samples_leaf':min_samples_leaf}\nprint(random_grid)","de64954e":"from sklearn.model_selection import RandomizedSearchCV\nrcv_regressor = RandomizedSearchCV(estimator = rf_regressor, param_distributions = random_grid, n_iter = 100 , scoring = 'neg_mean_squared_error', n_jobs = 1,cv = 5, verbose = 2,random_state = 101)","92057b66":"rcv_regressor.fit(X_train,y_train)","4455ca0a":"rcv_regressor.best_params_","fd8fcaf3":"model = RandomForestClassifier(n_estimators=700,min_samples_split=2,min_samples_leaf=1,max_features='auto',max_depth=25)","1bf14214":"model.fit(X_train,y_train)","ca6a3738":"y_pred = model.predict(X_test)","a3e60187":"print(confusion_matrix(y_test,y_pred))","e36d7e87":"print(classification_report(y_test,y_pred))","d1fd0ea8":"### Lets Label All the missing values with other. Since we didnt have any clear picture about there gender","4b36bb34":"### We have 123 diffrent cities ","ca7bb983":"### Now we have completed Data Pre proccessing and Moing towards Feature Selection","51574de9":"### We have imbalance Dataset","d93e108e":"### We have missing values in (Gender, enrolled_university, education level, major_discpline, experience, company_size, company_type, last_new_job)\n\n### Lets explore how many features have nan values with their percentage.","2a1bb470":"### Now we don't have any missing values in Gender column","57d6aab5":"### Majority of features are categorical features. Lets explore more about our feature one by one","88030fb3":"### Too many experiences lets get the count of Experience"}}