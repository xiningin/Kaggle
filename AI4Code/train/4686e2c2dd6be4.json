{"cell_type":{"429002ca":"code","fe55cf56":"code","5c99a168":"code","a3176bc3":"code","9049fc2f":"code","f9b07031":"code","4093de5e":"code","5e8df91b":"code","7f661e09":"code","2c1002be":"code","9a9f90a6":"code","3cf7fa8e":"code","05044441":"code","246ff00a":"code","9db6b18a":"code","161b35c7":"code","8120a575":"code","953afb76":"code","d5a7c7c2":"code","d436acaa":"code","3c3ca27e":"code","aff50406":"code","b90e1ed8":"code","62dcf91b":"code","6cc225fc":"code","dd6c0ead":"code","4185be88":"code","96c21018":"code","1b69deb5":"code","b9893d61":"code","ec201db4":"code","d0f9c47e":"code","73c1905c":"code","d9bcbb34":"code","2430c1e4":"code","1692a579":"code","a8fa4434":"code","1d7f8a42":"code","59f0ea95":"code","415744e8":"code","7772f956":"code","eb98e42e":"code","9ee4acc8":"markdown","3eed7d96":"markdown","08981175":"markdown","a5cb1a36":"markdown","50987762":"markdown","6e3be7a3":"markdown","c02a0a62":"markdown","db17f0ac":"markdown","7b8d2c43":"markdown","f7e4e670":"markdown","4b7fb84f":"markdown","db06b23d":"markdown","4bd8471e":"markdown","66c603b2":"markdown","43946daf":"markdown","55028a77":"markdown","16aaa8fa":"markdown","213f1ba6":"markdown","33b32415":"markdown","a31baf83":"markdown","707114dc":"markdown","864af343":"markdown","4ff4cfda":"markdown","92075326":"markdown","d9322920":"markdown","f59ec4fe":"markdown","a7a0bca5":"markdown","0d0c734c":"markdown","49d3ee34":"markdown","28d41270":"markdown","1421cf38":"markdown","bae1b425":"markdown","bbe9e9c4":"markdown"},"source":{"429002ca":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","fe55cf56":"import matplotlib.pyplot as plt\nimport seaborn as sns","5c99a168":"df=pd.read_csv(r\"\/kaggle\/input\/aqi-of-manalichennai\/manali.csv\",parse_dates=True)\n\n","a3176bc3":"print(df.columns)\n","9049fc2f":"df.columns=['date','pm25','pm10','o3','no2','so2','co']\nprint(df.columns)\nprint(df.dtypes)","f9b07031":"df[\"o3\"] =pd.to_numeric(df[\"o3\"],errors=\"coerce\")\ndf[\"no2\"] =pd.to_numeric(df[\"no2\"],errors=\"coerce\")\ndf[\"so2\"] =pd.to_numeric(df[\"so2\"],errors=\"coerce\")\ndf['co'] =pd.to_numeric(df[\"co\"],errors=\"coerce\")\ndf['pm25'] =pd.to_numeric(df[\"pm25\"],errors=\"coerce\")\ndf['pm10'] =pd.to_numeric(df[\"pm10\"],errors=\"coerce\")\n\nprint(df.dtypes)","4093de5e":"df.describe()","5e8df91b":"df.isnull().sum()","7f661e09":"print(df.pm10.value_counts())","2c1002be":"import missingno as msno","9a9f90a6":"msno.matrix(df)","3cf7fa8e":"df.set_index(\"date\")","05044441":"df.sort_index(axis = 0,ascending=True,inplace=True)","246ff00a":"msno.bar(df)","9db6b18a":"df.columns","161b35c7":"df.drop(df.columns[[2,3]],axis=1,inplace=True)","8120a575":"df.columns","953afb76":"plt.figure(figsize=(16,8))\nmsno.bar(df)","d5a7c7c2":"df.fillna(method=\"ffill\",inplace=True)","d436acaa":"df.isnull().isnull().sum()","3c3ca27e":"df['date']=pd.to_datetime(df['date'])","aff50406":"df['date'].min()\n","b90e1ed8":"df['date'].max()","62dcf91b":"import seaborn as sns","6cc225fc":"fig, axes = plt.subplots(figsize=(20,6),nrows=4)\ndf.reset_index().plot(x=\"date\",y=\"pm25\",ax=axes[0],color='coral')\ndf.reset_index().plot(x=\"date\",y=\"co\",ax=axes[1],color='goldenrod')\ndf.reset_index().plot (x=\"date\",y=\"no2\",ax=axes[2],color='lightsteelblue')\ndf.reset_index().plot( x=\"date\",y=\"so2\",ax=axes[3],color='yellowgreen')\n","dd6c0ead":"df.dtypes","4185be88":"df.set_index('date',inplace=True)\ndf.index","96c21018":"df['Year'] = df.index.year\ndf['Month'] = df.index.month\ndf['Weekday Name'] =df.index.day_name","1b69deb5":"df[\"Day\"]=df.index.day","b9893d61":"df['Weekday Name'] =df.index.day_name()\ndf['Month Name'] = df.index.month_name()","ec201db4":"df.tail(15)\n","d0f9c47e":"df.loc['2017-11-14']","73c1905c":"cols_plot = ['pm25', 'no2', 'so2','co']\naxes = df[cols_plot].plot(marker='.', alpha=0.5, linestyle='None', figsize=(11, 9), subplots=True)\nfor ax in axes:\n    ax.set_ylabel('AQI Reading')","d9bcbb34":"fig, axes = plt.subplots(figsize=(16,25),nrows=4)\nsns.barplot(x=df[\"Month Name\"],y=df['so2'],ax=axes[0],color='coral')\nsns.barplot(x=df[\"Month Name\"],y=df['pm25'],ax=axes[1],color='yellowgreen').axhline(y=120)\nsns.barplot(x=df[\"Month Name\"],y=df['co'],ax=axes[2],color='lightsteelblue').axhline(y=10)\nsns.barplot(x=df[\"Month Name\"],y=df['no2'],ax=axes[3],color='goldenrod')","2430c1e4":"\npv1 = pd.pivot_table(df, index=df.index, columns=df.index.year,\n                    values='pm25', aggfunc='sum')\n\n\npv1.plot(figsize=(25,3))\n","1692a579":"df.sample(5)","a8fa4434":"df.dtypes\n","1d7f8a42":"d2=df.loc[((df.Month >=4) &( df.Month<=6)),[\"pm25\",\"co\",\"so2\",\"no2\",\"Year\",\"Day\"]]","59f0ea95":"d2.sample(5)","415744e8":"fig, axes = plt.subplots(figsize=(16,25),nrows=4)\nsns.lineplot(x=d2.Day, y=\"co\", hue='Year', data=d2,palette=['green','orange','brown','dodgerblue','red',\"yellowgreen\",\"black\"],ci=None,ax=axes[0])\nsns.lineplot(x=d2.Day, y=\"so2\", hue='Year', data=d2,palette=['green','orange','brown','dodgerblue','red',\"yellowgreen\",\"black\"],ci=None,ax=axes[1])\nsns.lineplot(x=d2.Day, y=\"pm25\", hue='Year', data=d2,palette=['green','orange','brown','dodgerblue','red',\"yellowgreen\",\"black\"],ci=None,ax=axes[2])\nsns.lineplot(x=d2.Day, y=\"no2\", hue='Year', data=d2,palette=['green','orange','brown','dodgerblue','red',\"yellowgreen\",\"black\"],ci=None,ax=axes[3])\n","7772f956":"pvmp = pd.pivot_table(df, index=df.Year, columns=df[\"Month\"],\n                    values='pm25', aggfunc='mean')\nprint(pvmp)\nplt.figure(figsize=(11,9))\nsns.heatmap(data=pvmp,fmt=\".1f\",annot=True,cmap = sns.cm.rocket_r)","eb98e42e":"plt.figure(figsize=(16,8))\nsns.regplot(x=df.index,y=df[\"pm25\"])","9ee4acc8":"The datatypes are supposted to be numerical, and float in this case, as te values are decimal.\nSo I am converting it to the corresponding datatype.","3eed7d96":"I am plotting the concentration of the gaseous elements present in the air, in a time series x axis.","08981175":"The datetime column is to be changed to datetime format for using it efficiently","a5cb1a36":"Now we have only less null values","50987762":"Here I check the variability and uniquness of a specific column to understand the data.","6e3be7a3":"# Effect of Lockdown-2020\nDuring the months of April,May and June, the pollution level has significantly reduced due to shutting down of factories and absence of automobile emmissions.Here we can visualise the decline till may and it starts slowly rising again by last part of may, as the lockdown was lifted step by step.","c02a0a62":"# DATA Visualisation","db17f0ac":"Running a quick statistics on the data we have.","7b8d2c43":"# Heatmap\nIt is the best way to visualise the 2D data.\nFirst I am making a pivot table to understand the changes in AQI with respect to time.","f7e4e670":"# Cleaning the data\n\nLike any data science project the first step is to take a good look at it and clean it.\n","4b7fb84f":"I have made a regression plot to see the seasonal pattern of pm2.5 emmission.\nWe can clearly see a sine-wave pattern here, which suggests a pattern in production of emmissions possibly indicating climatic influences like wind season , rainy season or maybe the production target and schedule of industries making the emmissions.\n","db06b23d":"Though we couldnt say a lot from this, we can see the similarities in pattern of so2 and no2.This can be because of a single source emmission, such as Ammonia fertiliser manufacturing plant in manali.","4bd8471e":"**The blackline is 2020, I have taken the data of march-june and taken the mean value over 30 days and plotted it.**\nWe can easily understand and study the difference in the AQI, made by a lockdown order.\nThis can be further studied as to fight against climate change by understanding the effect of man made emmissions on the AQI.\n\nThe pm25 data for 2014 is not available and hence the imputed value line is plain.\n","66c603b2":"In order to clearly visualise the difference, I am taking the data of March- June of all the years and putting it in a new dataframe to analyse and study it further.","43946daf":"Now we dont have any null values.","55028a77":"The blue line in co and pm25 plot is to mark the safety level, and it can be noticed that in August, co level usually crosses the limits.\nAlso the pm25 reaches its peak on january and slowly settles down in the subsequent months","16aaa8fa":"Plotting the effect of lockdown on the concentration of the four gaseous elements respectively.","213f1ba6":"I am using the method ffill to fill the missing values\nFfill uses the previous known value and fills the next missing value.\nI prefer this method to other imputations because mostly AQI values from one day to the next dont have much difference.","33b32415":"# Visualising missing values\nI am importing this library to understand and analyse the missing values more easily, by visualising it\n","a31baf83":"df.loc is an useful function to locate a specific set of data in a dataframe based on the condtion provided.\nHere I provided te condition that the datetimeindex = 2017-11-14","707114dc":"For having a clear analysis I am breaking down the date into months, days, years respectively.","864af343":"The index is numerical by default, I am changing the numerical index into DateTimeIndex as our data set is time series.","4ff4cfda":"After resetting the index for plotting,Im again setting datetimeindex .Its to be noted that when we have datetime index we cant set x=Column name, We have to use only df.index if the column is index column.","92075326":"Here the column names are havingg an additional space in their name.\nTo avoid errors while using the columns name I am renaming the columns.","d9322920":"Dropping the columns (axis=1) and making the changes in the original dataframe(inplace=True)","f59ec4fe":"Scatterplot is more efficient in studying value based datasets .Here we can see some spikes in 2016 and 2017.At some period like this, due to geographical and industrial reasons the AQI became very poor.","a7a0bca5":"The data used here is downloaded from https:\/\/aqicn.org\/data-platform\/register\/ \nThere are plenty of data on AQI available corresponding to each city.\nI have used the AQI database of Manali which is a town in the outskirts of chennai, where plenty of factories and oil refineries are present.","0d0c734c":"Heres a monthwise analysis.\nThe so2 and no2 are mostly under safe limit.But the pm25 and co has been found in critically risk levels.","49d3ee34":"Sorting the index in ascending order.","28d41270":"Here you can clearly see that during 4,5 (April and May) the pm2.5 emmission has decreased significantly.","1421cf38":"Now coming to the most important part of Data cleaning\n# Handling of missing values\nFirst I will find the number of missing values","bae1b425":"In the column  pm10 and o3 more than 80% of the data is missing.\nWe can try imputing the missing values with possible values, but since we have only less than 20% data available in these columns, its better to drop these columns.","bbe9e9c4":"Visualising the missing data as a graph"}}