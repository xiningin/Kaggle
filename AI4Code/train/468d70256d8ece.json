{"cell_type":{"da05381e":"code","8af395b1":"code","fe081b3b":"code","93496032":"code","41d425a8":"code","ef71cee3":"code","d279e3ab":"code","69050f6b":"code","7dbdff6e":"code","a9e64765":"code","b68c60fa":"code","85b44c78":"code","8b97f37c":"code","ae17e3a0":"code","abe295f2":"code","cf5637d1":"code","ed02dc64":"code","4a4faef1":"code","aef974b7":"code","57f514cb":"code","eb0f9d1a":"code","46a9c383":"code","710ee5df":"code","91f2a596":"code","9d041d82":"code","c72d020c":"code","83e05f7b":"code","5d2059ff":"code","fbe11277":"code","6c60ce13":"code","d859e7fc":"markdown","97cc7c22":"markdown","6a2c77cd":"markdown","309123d1":"markdown","3270f4e9":"markdown","e3d69893":"markdown","f53bdff1":"markdown","5e00d676":"markdown","0abbbd71":"markdown","21ac466c":"markdown","0e21abc0":"markdown","b552325f":"markdown","e8232e54":"markdown","092aa92d":"markdown"},"source":{"da05381e":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nimport seaborn as sns","8af395b1":"city_data=pd.read_csv('..\/input\/city-data\/results.csv')","fe081b3b":"city_data","93496032":"global_data=pd.read_csv('..\/input\/global-data\/results-2.csv')","41d425a8":"global_data","ef71cee3":"new_global_df=pd.DataFrame({'Year':global_data['year'][46:264],'Avg_temp':global_data['avg_temp'][46:264]})","d279e3ab":"new_global_df","69050f6b":"city_data.isnull().sum()","7dbdff6e":"city_data.describe()","a9e64765":"mean=city_data['avg_temp'].mean()\ncity_data['clean_avg_temp']=city_data['avg_temp'].fillna(mean)","b68c60fa":"new_global_df.isnull().sum()","85b44c78":"def moving_average(data1,data2,freq):\n    MA_city=[]\n    MA_global=[]\n    i=0\n    j=0\n    while i!=data1.shape[0]-(freq-1):\n        MA_city.append(np.sum(data1[i:i+freq])\/freq)\n        i+=1\n    while j!=data2.shape[0]-(freq-1):\n        MA_global.append(np.sum(data2[j:j+freq])\/freq)\n        j+=1\n    return MA_city,MA_global","8b97f37c":"MA_city,MA_global=moving_average(city_data['clean_avg_temp'],new_global_df['Avg_temp'],15)","ae17e3a0":"df=pd.DataFrame({'year':np.linspace(1796,2013,len(MA_city)),'MA_city':MA_city})\ndf2=pd.DataFrame({'year':np.linspace(1796,2013,len(MA_global),dtype=int),'MA_global':MA_global})","abe295f2":"df2","cf5637d1":"len(MA_city),len(MA_global)","ed02dc64":"sns.set_style(style='darkgrid')\nplt.figure(figsize=(16,10))\nplt.plot(city_data['year'],city_data['clean_avg_temp'],label='New Delhi average temperature change from 1796-2013')\nplt.xlabel('Year',fontdict={'size':25})\nplt.ylabel('Avg. Temperature',fontdict={'size':25})\nplt.legend(fontsize='xx-large')\nplt.title('Trend before calculating moving average',fontdict={'size':25})\nplt.show()\n","4a4faef1":"sns.set_style('darkgrid')\nplt.figure(figsize=(20,10))\nplt.plot(df['year'],df['MA_city'],color='blue',label='New Delhi average temperature change from 1796-2013',marker='o',linestyle='dashed',markerfacecolor='black',linewidth=2,markersize=6)\nplt.xlabel('Year',fontdict={'size':25})\nplt.ylabel('Moving Avg. Temperature',fontdict={'size':25})\nplt.legend(fontsize='xx-large')\nplt.title('Trend after calculating moving average',fontdict={'size':25})\nplt.show()","aef974b7":"sns.set_style(style='darkgrid')\nplt.figure(figsize=(16,10))\nplt.plot(new_global_df['Year'],new_global_df['Avg_temp'],label='Global average temperature change from 1796-2013')\nplt.xlabel('Year',fontdict={'size':25})\nplt.ylabel('Avg. Temperature',fontdict={'size':25})\nplt.legend(fontsize='xx-large')\nplt.title('Global Trend before calculating moving average',fontdict={'size':25})\nplt.show()","57f514cb":"sns.set_style(style='darkgrid')\nplt.figure(figsize=(16,10))\nplt.plot(df2['year'],df2['MA_global'],label='Global average temperature change from 1796-2013',marker='o',linestyle='dashed',markerfacecolor='black',linewidth=2,markersize=5)\nplt.xlabel('Year',fontdict={'size':25})\nplt.ylabel('Moving Avg. Temperature',fontdict={'size':25})\nplt.legend(fontsize='xx-large')\nplt.title('Global Trend after calculating moving average',fontdict={'size':25})\nplt.show()","eb0f9d1a":"print ('The average temperature of New Delhi is {:.2f}\u00b0C'.format(city_data['clean_avg_temp'].mean()))\n\nprint ('The average global temperature is {:.2f}\u00b0C'.format(new_global_df['Avg_temp'].mean()))","46a9c383":"df3=pd.DataFrame({'MA_city':MA_city,'MA_global':MA_global,'Difference avg temp':np.array(MA_city)-np.array(MA_global),'year':df['year']})","710ee5df":"df3","91f2a596":"plt.figure(figsize=(20,10))\nplt.plot(df3['year'],df3['Difference avg temp'],marker='o',linestyle='dashed',markerfacecolor='black',linewidth=2,markersize=2)\nplt.xlabel('Years',fontdict={'size':25})\nplt.ylabel('Difference between avg. temperature',fontdict={'size':15})\nplt.title('Differences of moving average temperature of New Delhi and Global from 1796 to 2013',fontdict={'size':20})\nplt.show()","9d041d82":"fig=plt.figure()\nplt1=fig.add_subplot(211)\nplt2=fig.add_subplot(212)\nplt1.plot(df['year'],df['MA_city'],color='blue',label='New Delhi average temperature change from 1796-2013')\nplt2.plot(df2['year'],df2['MA_global'],color='r',label='Global average temperature change from 1796-2013')\nplt.xlabel('year',fontdict={'size':15})\nplt1.legend()\nplt2.legend()\n","c72d020c":"sns.lmplot(y='MA_city',x='year',data=df,height=7,scatter_kws={'marker':0,'color':'indianred'},line_kws={'linewidth':1,'color':'blue'},order=2)\nplt.gca().spines['top'].set_visible(False)\nplt.gca().spines['right'].set_visible(False)\nplt.title('Trend Analysis of avg. temperature change in New Delhi',fontsize='xx-large')\nplt.xlabel('Year (1796-2013)',fontdict={'size':20})\nplt.ylabel('Moving Average Temperature',fontdict={'size':20})\nsns.lmplot(y='MA_global',x='year',data=df3,height=7,scatter_kws={'marker':0,'color':'green'},line_kws={'linewidth':1,'color':'blue'},order=2)\nplt.title('Trend Analysis of avg. temperature change Globally',fontsize='xx-large')\nplt.xlabel('Year (1796-2013)',fontdict={'size':20})\nplt.ylabel('Moving Average Temperature',fontdict={'size':20})\nplt.show()","83e05f7b":"plt.figure(figsize=(20,10))\nplt.plot(df3['year'],df3['Difference avg temp'],linestyle='dashed',label='Difference between city and global avg. temperature')\nplt.ylabel('Difference between avg. temperature',fontdict={'size':20})\nplt.xlabel('Year',fontdict={'size':20})\nplt.legend(fontsize='xx-large')\nplt.title('Differences of moving average temperature of New Delhi and Global from 1796 to 2013',fontdict={'size':20})\nplt.show()","5d2059ff":"import matplotlib","fbe11277":"fig=plt.figure(figsize=(20,10))\nax=fig.add_subplot(111)\nax.plot(df3['year'],df3['Difference avg temp'],marker='o',linestyle='dashed',markerfacecolor='black',linewidth=2,markersize=2)\nrect1 = matplotlib.patches.Rectangle((1808, 17.1),10,-0.49, color ='green',alpha=0.3) \nplt.xlabel('Years',fontdict={'size':25})\nax.add_patch(rect1)\nplt.ylabel('Difference between avg. temperature',fontdict={'size':20})\nplt.title('Differences of moving average temperature of New Delhi and Global from 1796 to 2013',fontdict={'size':20})\nplt.show()","6c60ce13":"fig=plt.figure(figsize=(20,10))\nax=fig.add_subplot(111)\nplt.plot(df['year'],df['MA_city'],color='blue',label='New Delhi average temperature change from 1796-2013',marker='o',linestyle='dashed',markerfacecolor='black',linewidth=2,markersize=6)\nrect1 = matplotlib.patches.Rectangle((1993, 25.60),40,0.6, color ='red',alpha=0.3) \nax.add_patch(rect1)\nplt.xlabel('Year',fontdict={'size':25})\nplt.ylabel('Moving Avg. Temperature',fontdict={'size':25})\nplt.legend(fontsize='xx-large')\nplt.title(\"New Delhi's moving average temperature (15 years)\",fontdict={'size':25})\nplt.show()","d859e7fc":"The red box in the above graph shows that the avg. temperature of New Delhi has been increasing more rapidly than ever from last 15-20 years.","97cc7c22":"# 4-How bad is the condition in New Delhi and globally?","6a2c77cd":"1-The overall trend is upward which means average temperature is increasing.<br>\n2-The lowest point reached till now is approx. 7.47\u00b0C (Globally) and approx. 25\u00b0C (New Delhi)<br>\n3-The highest point reached till now is approx. 9.5\u00b0C (Globally) and approx. 27\u00b0C (New Delhi)<br>\n4-The world is definetly not getting cooler infact it is getting hotter at a much faster rate from last 45 years.<br>\n5-The trend has not been consistent over the last few hundred years.","309123d1":"# 1-Is your city hotter or cooler on average compared to the global average? Has the difference been consistent over time?","3270f4e9":"# 2-How do the changes in your city\u2019s temperatures over time compare to the changes in the global average?","e3d69893":"1-The trend in changing of the average temperature of New Delhi is somewhat similar to the trend in changing of the average temperature  globally.<br>\n2-The minimum average temperature of New delhi has been approx. 24.5\u00b0C till now, whereas, the minimum average temperature globally has been approx. 7.4\u00b0C.<br>\n3-The maximum average temperature of New Delhi has been approx. 26.7\u00b0C till now; whereas, the maximum average temperature globally has been 9.5\u00b0C.<br>","f53bdff1":"# Observations","5e00d676":"###                                              Weather Trend Analysis.","0abbbd71":"New Delhi is way more hotter on average than globally!","21ac466c":"# 3-What does the overall trend look like? Is the world getting hotter or cooler? Has the trend been consistent over the last few hundred years?","0e21abc0":"# Calculating Moving average for city and global data","b552325f":"1-The green box shows that between 1800 and 1825, the fall in difference of avg. tempreature was highest in less amount of time.<br>\n2-The abrupt fall in avg. temperature of New Delhi and globally was maximum in less amount of time.<br>\n","e8232e54":"STEP-1 Downloaded the data from a database using SQL query for both city and global.<br>\nSTEP-2 Loaded the csv file.<br>\nSTEP-3 Handled missing values by calculating and filling them with mean (New Delhi data).<br>\nSTEP-4 Removed unwanted data from global data.<br>\nSTEP-5 Calculated the Moving Average (MA) for both city and global data by taking an interval of 15 years. Ran a loop from the 1st example to the last example in dataset. After this, ran another loop to calculate MA by taking the sum of 15 examples (15 years) starting from first example. In other words, took first example, counted 15 examples after it including first and than calculated mean. After This, incremented the example by 1 and started all over again until I was left with final 15 examples.<br>\nSTEP-6 Plotted the graphs and looked for upward or downward trend of the line with x axis. Apart from this, calculated the difference between MA for both New Delhi and global MA data.<br>","092aa92d":"1-The difference between city and global avg. temp has not been consistent over time.<br>\n2-Their is noticeable fluctuation between city and global average temperature from 1796 to 2013.<br>\n3-Maximum difference is approx. 17.2\u00b0C and minimum difference is approx. 16.47\u00b0C"}}