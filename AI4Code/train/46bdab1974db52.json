{"cell_type":{"a2723d8b":"code","9ddc4976":"code","77cf9c03":"code","1ad98867":"code","aed2aca8":"code","275ca8d9":"code","0840c6e8":"markdown","df93f5d4":"markdown","bec571e9":"markdown","d76c914d":"markdown","c68a3697":"markdown","4de72c1d":"markdown","d7d39965":"markdown"},"source":{"a2723d8b":"!pip install --quiet mlflow==1.11.0","9ddc4976":"import mlflow\n\nassert mlflow.__version__ == \"1.11.0\"","77cf9c03":"mlflow.sklearn.autolog()","1ad98867":"import numpy as np\nfrom sklearn.linear_model import LinearRegression\n\n\nX = np.array([[1, 1], [1, 2], [2, 2], [2, 3]])\n# y = 1 * x_0 + 2 * x_1 + 3\ny = np.dot(X, np.array([1, 2])) + 3\n\nwith mlflow.start_run() as run:\n    reg = LinearRegression().fit(X, y)","aed2aca8":"def yield_artifacts(run_id, path=None):\n    \"\"\"Yield all artifacts in the specified run\"\"\"\n    client = mlflow.tracking.MlflowClient()\n    for item in client.list_artifacts(run_id, path):\n        if item.is_dir:\n            yield from yield_artifacts(run_id, item.path)\n        else:\n            yield item.path\n\n\ndef fetch_logged_data(run_id):\n    \"\"\"Fetch params, metrics, tags, and artifacts in the specified run\"\"\"\n    client = mlflow.tracking.MlflowClient()\n    data = client.get_run(run_id).data\n    # Exclude system tags: https:\/\/www.mlflow.org\/docs\/latest\/tracking.html#system-tags\n    tags = {k: v for k, v in data.tags.items() if not k.startswith(\"mlflow.\")}\n    artifacts = list(yield_artifacts(run_id))\n    return {\n        \"params\": data.params,\n        \"metrics\": data.metrics,\n        \"tags\": tags,\n        \"artifacts\": artifacts,\n    }","275ca8d9":"from pprint import pprint\n\n\nfor key, data in fetch_logged_data(run.info.run_id).items():\n    print(\"\\n---------- logged {} ----------\".format(key))\n    pprint(data)","0840c6e8":"## Train model","df93f5d4":"https:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.linear_model.LinearRegression.html\n","bec571e9":"## Install MLflow","d76c914d":"https:\/\/www.mlflow.org\/docs\/latest\/python_api\/mlflow.sklearn.html#mlflow.sklearn.autolog","c68a3697":"# scikit-learn autologging in mlflow","4de72c1d":"## Show logged data","d7d39965":"## Enable autologging"}}