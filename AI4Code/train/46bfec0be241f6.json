{"cell_type":{"4e4df02a":"code","0a00f014":"code","4b41db9e":"code","379184a4":"code","31d99846":"code","5c35cbc6":"code","c5cef472":"code","c03520a5":"code","d595e940":"code","f5c3fbb6":"code","17af576b":"code","b66f7ac8":"code","32d3189f":"code","6eb1a1ec":"code","d378b40e":"code","14b9c2db":"code","8ef51cae":"code","b6762f73":"code","b2acd78b":"code","cd9ba4d8":"code","42b67a32":"code","f56e063d":"code","8407b88e":"code","68db19b4":"code","8f5e95d2":"markdown","c6ac4834":"markdown","f5a5c7f1":"markdown","b85848a7":"markdown"},"source":{"4e4df02a":"%reset -sf","0a00f014":"import os\nimport collections\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\npd.set_option('display.max_colwidth', None)","4b41db9e":"LOC_EN = '\/kaggle\/input\/student-shopee-code-league-product-translation\/train_en.csv'\nLOC_TCN = '\/kaggle\/input\/student-shopee-code-league-product-translation\/train_tcn.csv'\nLOC_TEST = '\/kaggle\/input\/student-shopee-code-league-product-translation\/test.csv'","379184a4":"df_en = pd.read_csv(LOC_EN)\ndf_tcn = pd.read_csv(LOC_TCN)\ndf_test = pd.read_csv(LOC_TEST)","31d99846":"df_en[((df_en[\"product_title\"].str.contains('\\n')) & \n       (df_en[\"product_title\"].str.contains('\\\"')) & \n       (df_en[\"product_title\"].str.contains(',')))].sample(5)","5c35cbc6":"df_tcn[((df_tcn[\"product_title\"].str.contains('\\n')) & \n        (df_tcn[\"product_title\"].str.contains('\\\"')) & \n        (df_tcn[\"product_title\"].str.contains(',')))].sample(2)","c5cef472":"df_en = df_en[~((df_en[\"product_title\"].str.contains('\\n')) & \n                (df_en[\"product_title\"].str.contains('\\\"')) & \n                (df_en[\"product_title\"].str.contains(',')))]\ndf_tcn = df_tcn[~((df_tcn[\"product_title\"].str.contains('\\n')) & \n                  (df_tcn[\"product_title\"].str.contains('\\\"')) & \n                  (df_tcn[\"product_title\"].str.contains(',')))]\ndf_en.shape, df_tcn.shape","c03520a5":"df_en[df_en[\"category\"] == ' Games & Collectibles\"'].sample(5)","d595e940":"df_en.loc[df_en[\"category\"] == ' Games & Collectibles\"',\"product_title\"] = \\\n    df_en.loc[df_en[\"category\"] == ' Games & Collectibles\"',\"product_title\"].str[:-7]\ndf_en.loc[df_en[\"category\"] == ' Games & Collectibles\"',\"category\"] = \"Toys, Games & Collectibles\"\ndf_en.shape, df_tcn.shape","f5c3fbb6":"df_tcn[(df_tcn[\"category\"] != df_tcn[\"category\"])].sample(5)","17af576b":"df_tcn = df_tcn[~(df_tcn[\"category\"] != df_tcn[\"category\"])]\ndf_en.shape, df_tcn.shape","b66f7ac8":"all_categories = set(df_en[\"category\"]) | set(df_tcn[\"category\"]) | set(df_test[\"category\"])\ncounter_en = pd.crosstab(df_en[\"category\"], columns=['en'])\ncounter_tcn = pd.crosstab(df_tcn[\"category\"], columns=['tcn'])\ncounter_test = pd.crosstab(df_test[\"category\"], columns=['test']) * 1000","32d3189f":"print(len(counter_en))\nprint(len(counter_tcn))\nprint(len(counter_test))","6eb1a1ec":"counters = counter_en.join(counter_test, how=\"outer\").join(counter_tcn, how=\"outer\")\ncounters.style.background_gradient(cmap='viridis', low=0.5, high=0.5).highlight_null('white')","d378b40e":"category_map = {\n    \"Game Kingdom\":  \"Gaming\",\n    \"Health & Beauty\": \"Health & Personal Care\",\n    \"Food & Beverages\": \"Groceries\",\n    \"Home Electronic\": \"Home Appliances\",\n    \"Men's Bags& Accessories\": \"Men's Bags & Accessories\",\n    \"Mobile & Gadgets\": \"Mobiles & Gadgets\",\n    \"Mother & Baby\": \"Babies & Kids\",\n    \"Hardware & 3C\": \"Laptops & Computers\", # https:\/\/tw.forumosa.com\/t\/what-is-3c-actually\/62673\/2\n    \"Pets\": \"Pet Care\",\n    \"Life & Entertainment\": \"Toys, Games & Collectibles\",\n    \"Sports & Outdoors\": \"Sports & Travel\",\n    \"Women Bags\": \"Women's Bags\"\n}","14b9c2db":"df_tcn[\"category\"] = df_tcn[\"category\"].replace(category_map)\ncounter_tcn = pd.crosstab(df_tcn[\"category\"], columns=['tcn'])","8ef51cae":"counters = counter_en.join(counter_test, how=\"outer\").join(counter_tcn, how=\"outer\")\ncounters.style.background_gradient(cmap='viridis', low=0.5, high=0.5).highlight_null('white')","b6762f73":"df = df_en\ncategory = \"Cameras\"\ndf[df[\"category\"] == category].sample(10)","b2acd78b":"df = df_tcn\nstring = \"\u76f8\u6a5f\"  # camera\ndf[df[\"product_title\"].str.contains(string)].sample(10)","cd9ba4d8":"df = df_en\ndf[df[\"product_title\"].str.len() > 60].sample(5)","42b67a32":"df = df_tcn\ndf[df[\"product_title\"].str.len() < 10].sample(5)","f56e063d":"# count length\nfig, ax = plt.subplots(3,1, figsize=(14,8))\nax[0].hist(df_en[\"product_title\"].str.len(), bins=range(100))\nax[1].hist(df_tcn[\"product_title\"].str.len(), bins=range(100))\nax[2].hist(df_test[\"product_title\"].str.len(), bins=range(100))\nplt.show()","8407b88e":"# count alphanumeric characters\nfig, ax = plt.subplots(3,1, figsize=(14,8))\nax[0].hist(df_en[\"product_title\"].str.count(r'[a-zA-Z0-9]'), bins=range(100))\nax[1].hist(df_tcn[\"product_title\"].str.count(r'[a-zA-Z0-9]'), bins=range(100))\nax[2].hist(df_test[\"product_title\"].str.count(r'[a-zA-Z0-9]'), bins=range(100))\nplt.show()","68db19b4":"# ratio of alphanumeric characters\nfig, ax = plt.subplots(3,1, figsize=(14,8))\nax[0].hist(df_en[\"product_title\"].str.count(r'[a-zA-Z0-9 ._-]')\/df_en[\"product_title\"].str.len(), bins=np.linspace(0,1,50))\nax[1].hist(df_tcn[\"product_title\"].str.count(r'[a-zA-Z0-9 ._-]')\/df_tcn[\"product_title\"].str.len(), bins=np.linspace(0,1,50))\nax[2].hist(df_test[\"product_title\"].str.count(r'[a-zA-Z0-9 ._-]')\/df_test[\"product_title\"].str.len(), bins=np.linspace(0,1,50))\nplt.show()","8f5e95d2":"# Basic EDA","c6ac4834":"# View sample","f5a5c7f1":"# Clean data","b85848a7":"# Category mapping"}}