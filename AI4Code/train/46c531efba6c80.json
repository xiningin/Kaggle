{"cell_type":{"39663eda":"code","4c6920f9":"code","4cfe645a":"code","e5e02d56":"code","184fe556":"code","f89cc1c7":"code","007cad0d":"code","9715f392":"code","f960b498":"code","71d54604":"code","e5cef1ff":"code","a760a7e2":"code","c1c27e71":"code","79992a15":"markdown","13b50309":"markdown","2f5e60f5":"markdown","f00173ad":"markdown","9731b26f":"markdown"},"source":{"39663eda":"import warnings\nwarnings.filterwarnings(\"ignore\")\n!pip -q install apyori\nfrom termcolor import colored\nimport numpy as np\nimport pandas as pd\nfrom apyori import apriori\n\ndata = pd.read_csv(\"..\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv\",header=1)","4c6920f9":"#Excluding Columns having 'None' and 'Other' as responses. Also excluding questions about social media, courses and future plans.\nproduct_data = data.loc[:, pd.Series(data.columns)[(pd.Series(data.columns).str.contains('- Selected Choice -',regex=False)) & \\\n                                         (pd.Series(data.columns).str.contains('(None$)|(Other$)|activities|courses|(media sources)|(you hope)',regex=True)==False)]].copy()","4cfe645a":"#Identifying questions having same responses\ndupes = pd.DataFrame()\nfor i in product_data.columns:\n    dupes = dupes.append(pd.DataFrame({\"Duplicate\":pd.Series(product_data.loc[:,i].dropna().unique()).apply(lambda x: x.strip()),\"Column Name\":i}))\n    \ndupes[dupes.duplicated(subset=\"Duplicate\")]","e5e02d56":"product_data.columns = range(len(product_data.columns))","184fe556":"dupes = pd.DataFrame()\nfor i in product_data.columns:\n    dupes = dupes.append(pd.DataFrame({\"Duplicate\":pd.Series(product_data.loc[:,i].dropna().unique()).apply(lambda x: x.strip()),\"Column Name\":i}))\n    \ndupes[dupes.duplicated(subset=\"Duplicate\")]","f89cc1c7":"product_data.iloc[:,20] = product_data.iloc[:,20].str.replace(\"MATLAB\",\"MATLAB IDE\",regex=False)\nproduct_data.iloc[:,168] = product_data.iloc[:,168].str.replace(\"Shiny\",\"Shiny (Publicly share)\",regex=False)\nproduct_data.fillna('',inplace=True)","007cad0d":"#first 5 records\nproduct_data.head()","9715f392":"# Converting the data frame of transcations to list of lists of transcations\nproduct_list = list()\nfor t in range(len(product_data)):\n    product_list.append([str(product_data.values[t,c]) for c in range(product_data.shape[1]) if str(product_data.values[t,c])!=''])","f960b498":"len(product_list)","71d54604":"print(product_list[0])","e5cef1ff":"MIN_SUPPORT = 0.02\nMIN_CONFIDENCE = 0.6\nMIN_LIFT = 3\nMAX_LENGTH = 2\n\nrules = apriori(product_list,min_support=MIN_SUPPORT,min_confidence=MIN_CONFIDENCE,min_lift=MIN_LIFT,max_length=MAX_LENGTH)\nrules = list(rules)\n\nrules_df = pd.DataFrame()\nfor i in range(len(rules)):\n    rules_df = rules_df.append(pd.DataFrame({\"Antecedent\": (list(rules[i][2][0][0])[0]).strip(),\n                               \"Consequent\": (list(rules[i][2][0][1])[0]).strip(),\n                               \"Support\": np.round(float(list(rules[i])[1]),3),\n                               \"Confidence\": np.round(float(list(rules[i])[2][0][2]),3),\n                               \"Lift\": np.round(float(list(rules[i])[2][0][3]),3)},index=[i]))\n    \n    \nrules_df = rules_df.loc[(rules_df[\"Consequent\"]!='') & (rules_df[\"Antecedent\"]!='')].sort_values(by=[\"Lift\",\"Confidence\"],ascending=[False,False]).drop_duplicates().reset_index(drop=True).copy()\n\nrules_df.head(10)","a760a7e2":"rules_df.sort_values(by='Confidence',ascending=False,inplace = True)\nn = 1\nfor i in range(len(rules_df)):\n    if (rules_df.iloc[i,3]*100) < 70:\n        break\n    print(f'{n}. {colored(np.round(rules_df.iloc[i,3]*100,1),\"grey\",\"on_cyan\")}{colored(\"%\",\"grey\",\"on_cyan\")} of the respondents who use {colored(rules_df.iloc[i,0],\"grey\",\"on_cyan\")} also use {colored(rules_df.iloc[i,1],\"grey\",\"on_cyan\")}\\n')\n    n += 1","c1c27e71":"prod_arr = pd.Series(product_data.values.flatten())\nprod_arr = prod_arr[prod_arr != ''].copy()\n(prod_arr.value_counts()).iloc[:20].plot(kind='bar',figsize=(15,5),title=\"Top 20 Technologies Used\",color='black');","79992a15":"<h1>Findings with support > 0.02, confidence > 0.7, and lift > 3<\/h1>","13b50309":"<h1>Let's look at the top 20 technologies used by the respondents","2f5e60f5":"MATLAB and Shiny are present in multiple questions","f00173ad":"<h2>There are a few interesting findings like:<\/h2>\n    <h3><ol><li>78.6 % of Respondents having personal blog also use Github (might be to host their code snippets).<\/li>\n    <li>78.2% of Respondents using Kaggle also use Github.<\/li>","9731b26f":"<h1>THIS NOTEBOOKS ATTEMPTS TO FIND ASSOCIATIONS AMONG THE TECHNOLOGIES USED BY THE RESPONDENTS OF THE KAGGLE SURVEY 2020 "}}