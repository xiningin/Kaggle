{"cell_type":{"16d1f03a":"code","4740cb80":"code","d0676789":"code","e335e61f":"code","bcb13429":"code","80c1c16d":"code","661340ee":"code","cc0c789b":"code","0caba275":"code","dc0babdc":"code","fabab08a":"code","70bb15fa":"code","f837c2df":"code","ba8bd8ba":"code","60b6dad0":"code","32452f1f":"code","de5021e2":"code","ad415086":"code","e9cf29ee":"code","7ac94fdc":"code","a46fd97f":"code","ed6f50ba":"code","e1e2cb17":"code","a7f34736":"code","8984c533":"code","6caafb51":"code","7a6b7fc6":"code","455f311a":"code","a76f6526":"code","d989f2bf":"code","7fee15c9":"code","c33d6fc8":"code","2583697d":"code","8e6c63e5":"code","8a4685b9":"code","0ba2e2de":"code","b9491987":"code","6f5ae25c":"code","1b6e6f7d":"code","32928362":"code","cd503b88":"code","12eeda83":"code","21e21a70":"code","234a3324":"code","a6beabe3":"code","f8b1967c":"code","49133892":"code","9783e1a7":"code","b40284b4":"code","93af72bf":"code","ace390a9":"code","552f1978":"code","5b0a0093":"code","8185b4eb":"code","6b0ce922":"code","fbc8beb6":"code","019ed648":"code","98a44d38":"code","ad16406d":"code","8becf496":"code","93054bb8":"code","7ef0085b":"markdown","c16bbb1a":"markdown","8ae1f9a7":"markdown","26976ef4":"markdown","c2d902aa":"markdown","5f979c51":"markdown","47c75409":"markdown","d675afb6":"markdown","d8fb3fd3":"markdown","f29e1321":"markdown","4d7ac484":"markdown","4f6d4be8":"markdown","17d046ab":"markdown","71f4d47c":"markdown","2ad8ee33":"markdown","17197c26":"markdown","2015e27a":"markdown","2f1bc91e":"markdown","7b911994":"markdown","a9c2cd93":"markdown","348dd256":"markdown","133c3633":"markdown","1c14c76f":"markdown","d9b17cae":"markdown","b28cc1bd":"markdown","f532db84":"markdown","d2ab3da1":"markdown","e7fb3e37":"markdown","71324c10":"markdown","cc3107f8":"markdown","2bc844ad":"markdown","c7a6000f":"markdown","c7cbd0ab":"markdown","c0a37a1b":"markdown","0a04c3b5":"markdown","0e1bf32d":"markdown","ece54a42":"markdown"},"source":{"16d1f03a":"import pandas as pd \r\nimport matplotlib.pyplot as plt \r\nimport seaborn as sns \r\nimport numpy as np \r\nimport seaborn as sns ","4740cb80":"df= pd.read_csv('..\/input\/top-250-football-transfers-from-2000-to-2018\/top250-00-19.csv')\r\ndf.head()","d0676789":"df.describe()","e335e61f":"df.info()","bcb13429":"df.isnull().sum()","80c1c16d":"df.duplicated().sum()","661340ee":"df.corr()","cc0c789b":"Defender=['Centre-Back','Right-Back','Left-Back','Defender']\r\nForward = ['Right Winger','Centre-Forward','Left Winger','Forward','Sweeper','Second Striker']\r\nMidfielder = ['Central Midfield', 'Attacking Midfield', 'Defensive Midfield', 'Left Midfield','Right Midfield', 'Midfielder']\r\nconditions = [\r\n    df['Position'].isin(Defender),\r\n    df['Position'].isin(Forward),\r\n    df['Position'].isin(Midfielder),\r\n    df['Position']=='Goalkeeper']\r\n \r\nvalues = ['Defender', 'Forward','Midfielder','Goalkeeper']\r\n\r\ndf['Position'] = np.select(conditions, values)","0caba275":"df.head()","dc0babdc":"top5 = ['Premier League', 'Serie A', 'LaLiga', 'Ligue 1', '1.Bundesliga']\r\ndf_top5 = df.loc[ (df['League_to'].isin(top5))]","fabab08a":"df_top5['Position'].value_counts().sort_values(ascending=False)","70bb15fa":"sns.countplot(x='Position',data=df_top5,order=df_top5['Position'].value_counts().sort_values(ascending=False).index)\r\n#plt.xticks(rotation=90,fontsize='12')\r\nplt.title('The Most Requested Position in Top 5 Leagues',ha='center',fontsize=15,style='oblique')\r\nplt.show()","f837c2df":"df_top5['Position'].value_counts().plot(kind='pie',figsize=(20,10),autopct = '%1.1f%%',shadow = True)\r\nplt.ylabel('')\r\nplt.title('The Positions Requested in Top 5 Leagues ( % ) ',ha='center',fontsize=15,style='oblique')\r\nplt.show()","ba8bd8ba":"sns.countplot(x='Position',hue='League_to',data=df_top5)\r\nplt.title('Players Positions in Top 5 Leagues',fontsize=15,style='oblique')\r\nplt.legend(title='League')\r\nplt.show()","60b6dad0":"df_top5.groupby(['Season'])['Season'].count()","32452f1f":"sns.countplot(x='Season',data=df_top5)\r\nplt.xticks(rotation=90)\r\nplt.title('Transfers For Every Season in Top 5 Leagues (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","de5021e2":"df_top5.groupby(['League_to','Season'])['Season'].count()","ad415086":"sns.countplot(x='Season',hue='League_to',data=df_top5)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xticks(rotation=90)\r\nplt.ylabel('')\r\nplt.xlabel('')\r\nplt.title('Transfers For Every Season in Top 5 Leagues (2000-2018) ',fontsize=15,style='oblique')\r\nplt.legend(title='League', bbox_to_anchor=(1,1), loc='upper left')\r\nplt.show()","e9cf29ee":"League_buy = df_top5.groupby(['League_to'])['Transfer_fee'].sum().sort_values(ascending=False)\r\nLeague_buy","7ac94fdc":"League_buy = df_top5.groupby(['League_to'])['Transfer_fee'].sum().sort_values(ascending=False)\r\nLeague_buy.plot(kind='bar',lw=2,edgecolor='black',width=0.2)\r\nplt.xlabel('League',fontsize=12)\r\nyticks = list(np.arange(0,18000000000,2000000000))\r\nplt.yticks(ticks=yticks, labels =[f\"{round(int(y)\/1000000000)} Billion $ \" if y > 0 else \"0\" for y in yticks] )\r\nplt.title('Which League Pays The Most Money in Transfer Market? ',fontsize=15)\r\nplt.show()","a46fd97f":"League_buy.plot(kind='pie',figsize=(20,10),autopct = '%1.1f%%',shadow = True)\r\nplt.title('Which League Pays The Most Money in Transfer Market? ( % ) ',fontsize=15)\r\nplt.ylabel('')\r\nplt.show()","ed6f50ba":"League_sell = df_top5.groupby(['League_from'])['Transfer_fee'].sum().sort_values(ascending=False)\r\nLeague_sell","e1e2cb17":"League_sell.head().plot(kind='bar',lw=2,edgecolor='black',width=0.2)\r\nyticks = list(np.arange(0,9000000000,1000000000))\r\nplt.xlabel('League')\r\nplt.title('Which League Gains The Most Money From Selling Players? ',fontsize = 15)\r\nplt.yticks(ticks=yticks, labels =[f\"{round(int(y)\/1000000000)} Billion $ \" if y > 0 else \"0\" for y in yticks] )\r\nplt.show()","a7f34736":"profits = League_sell - League_buy\r\nprofits.sort_values(inplace=True)\r\nprofits.head()\/1000000000","8984c533":"sns.barplot(x=profits.head().index,y=profits.head().values,data=profits.head())\r\nplt.xticks(ticks=np.arange(0,5,1),labels=profits.head().index)\r\nplt.title('Do Top 5 leagues make profits or losses from buying and selling players?',style='oblique',fontsize=15)\r\nplt.xlabel('League')\r\nplt.show()","6caafb51":"df_top5['League_to'].value_counts()","7a6b7fc6":"sns.countplot(x='League_to',data=df_top5,order=df_top5['League_to'].value_counts().index)\r\nplt.xticks(rotation=90)\r\nplt.xlabel('League')\r\nplt.title('Which League Had the Most Transfers In?',fontsize=15,style='oblique')\r\nplt.show()","455f311a":"df_top5['League_to'].value_counts().plot(kind='pie',figsize=(12.5,20),autopct = '%1.1f%%',shadow = True)\r\nplt.title('Which League Had The Most Transfers In? ( % )',fontsize=15)\r\nplt.ylabel('')\r\nplt.show()","a76f6526":"df_top5.groupby(['League_to','League_from'])['League_to'].count().sort_values(ascending=False).head()","d989f2bf":"top_buyers=df_top5.groupby(['Team_to','League_to'])['Transfer_fee'].sum().sort_values(ascending=False)\r\ntop_buyers.head(10)","7fee15c9":"(top_buyers.head(10)\/1000000000).plot(kind='bar',lw=2,edgecolor='black')\r\nplt.xlabel(' ')\r\nplt.ylabel('Billion $')\r\nplt.show()","c33d6fc8":"top_sellers= df_top5.groupby(['Team_from','League_from'])['Transfer_fee'].sum().sort_values(ascending=False)\r\ntop_sellers.head(10)","2583697d":"top_sellers= df_top5.groupby(['Team_from','League_from'])['Transfer_fee'].sum().sort_values(ascending=False)\r\ntop_sellers.head(10).plot(kind='bar',lw=2,edgecolor='black')\r\nyticks = list(np.arange(0,1000000000,100000000))\r\nplt.yticks(ticks=yticks, labels =[f\"{round(int(y)\/1000000)} Million $ \" if y > 0 else \"0\" for y in yticks] )\r\nplt.title('Which Team Gained The Most Money From Selling His Players? ',fontsize=15,style='oblique')\r\nplt.xlabel(' ')\r\nplt.show()","8e6c63e5":"df_top5['Team_to'].value_counts()[0:10]","8a4685b9":"sns.countplot(x=\"Team_to\", data=df_top5,order=df_top5['Team_to'].value_counts()[0:75].index)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.title('Which Team Made The Most Number of Transfers In? ',fontsize=15)\r\nplt.show()","0ba2e2de":"v=df.loc[df.League_to=='1.Bundesliga']\r\nsns.countplot(x=\"Team_to\", data=v,order=v['Team_to'].value_counts().index)\r\nplt.xlabel(' ')\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.title('1.Bundesliga Transfers in (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","b9491987":"v=df.loc[df.League_to=='LaLiga']\r\nsns.countplot(x=\"Team_to\", data=v,order=v['Team_to'].value_counts()[0:28].index)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xlabel(' ')\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.title('LaLiga Transfers (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","6f5ae25c":"v=df.loc[df.League_to=='Ligue 1']\r\nsns.countplot(x=\"Team_to\", data=v,order=v['Team_to'].value_counts().index)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xlabel(' ')\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.title('Ligue 1 Transfers (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","1b6e6f7d":"v=df.loc[df.League_to=='Premier League']\r\nsns.color_palette(\"rocket\", as_cmap=True)\r\nsns.countplot(x=\"Team_to\", data=v,order=v['Team_to'].value_counts().index)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xlabel(' ')\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.title('Premier League Transfers (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","32928362":"v=df.loc[df.League_to=='Serie A']\r\nsns.countplot(x=\"Team_to\", data=v,order=v['Team_to'].value_counts().index)\r\nsns.set(rc={'figure.figsize':(20,5)})\r\nplt.xticks(rotation=90,fontsize='12')\r\nplt.xlabel(' ')\r\nplt.title('Serie A Transfers (2000-2018)',fontsize=15,style='oblique')\r\nplt.show()","cd503b88":"sns.countplot(x='Age',data=df_top5)\r\nplt.title('Players Age Distribution',fontsize=15,style='oblique')\r\nplt.show()","12eeda83":"df_top5.groupby(['Age'])['Transfer_fee'].agg(['count','min','max'])","21e21a70":"df_top5.groupby(['League_to'])['Age'].agg(['min','max','mean'])","234a3324":"df_top5.groupby(['Position'])['Age'].agg(['min','max','mean'])","a6beabe3":"df_top5.groupby(['Position'])['Transfer_fee'].agg(['min','max','mean'])","f8b1967c":"df_top5.loc[df_top5['Age'].idxmin()]","49133892":"df_top5.loc[df_top5['Age'].idxmax()]","9783e1a7":"df_top5.loc[df_top5['Transfer_fee'].idxmax()]","b40284b4":"df_top5.loc[df_top5['Market_value'].idxmax()]","93af72bf":"df_top5.sort_values('Transfer_fee',ascending=False)[0:10].reset_index(drop=True)","ace390a9":"df_top5.sort_values('Market_value',ascending=False)[0:10].reset_index(drop=True)","552f1978":"spain = df_top5.loc[df_top5.League_to=='LaLiga'].sort_values('Transfer_fee',ascending=False).reset_index(drop=True)\r\nspain.head(10)","5b0a0093":"spain.head(10)['Team_to'].value_counts()","8185b4eb":"france = df_top5.loc[df_top5.League_to=='Ligue 1'].sort_values('Transfer_fee',ascending=False).reset_index(drop=True)\r\nfrance.head(10)","6b0ce922":"france.head(10)['Team_to'].value_counts()","fbc8beb6":"Germany = df_top5.loc[df_top5.League_to=='1.Bundesliga'].sort_values('Transfer_fee',ascending=False).reset_index(drop=True)\r\nGermany.head(10)","019ed648":"Germany.head(10)['Team_to'].value_counts()","98a44d38":"Italy = df_top5.loc[df_top5.League_to=='Serie A'].sort_values('Transfer_fee',ascending=False).reset_index(drop=True)\r\nItaly.head(10)","ad16406d":"Italy.head(10)['Team_to'].value_counts()","8becf496":"England = df_top5.loc[df_top5.League_to=='Premier League'].sort_values('Transfer_fee',ascending=False).reset_index(drop=True)\r\nEngland.head(10)","93054bb8":"England.head(10)['Team_to'].value_counts()","7ef0085b":"### Players' Age distribution","c16bbb1a":"### Position VS Transfer fee Stats","8ae1f9a7":"### Age VS League Stats","26976ef4":"### Which League Gains The Most Money From Selling Players? ","c2d902aa":"## B. Team Stats","5f979c51":"### Top 5 Leagues - The Youngest Player","47c75409":"### The teams with the largest transfer fee","d675afb6":"### The Most Requested Position in Top 5 Leagues","d8fb3fd3":"### 1.Bundesliga - Top 10 Players (Transfer Fee)","f29e1321":"### Top 5 Leagues - The Highest Transfer fee","4d7ac484":"###  Do Top 5 leagues make profits or losses from buying and selling players?","4f6d4be8":"### Top 5 Leagues - The Highest Market Value","17d046ab":"### The teams with the most gained money","71f4d47c":"### Top 10 Players ( Market Value )","2ad8ee33":"## A. General Stats","17197c26":"### The team with the most transfers in the top 5 Leagues","2015e27a":"### Preimer League - Top 10 Players (Transfer Fee)","2f1bc91e":"### Age VS Position Stats","7b911994":"# Stage 3: Exploratory Data Analysis (EDA)","a9c2cd93":"### The team with the most transfers in LaLiga","348dd256":"# Stage 2: Data Manipulation","133c3633":"### The team with the most transfers in Ligue 1","1c14c76f":"### The team with the most transfers in Premier League","d9b17cae":"### The team with the most transfers in Serie A","b28cc1bd":"### Top 10 Players ( Transfer Fee )","f532db84":"## C. Players stats","d2ab3da1":"### The team with the most transfers in 1.Bundesliga","e7fb3e37":"### Serie A - Top 10 Players (Transfer Fee)","71324c10":"###  Which League made the most transfers in? ","cc3107f8":"### Which League Pays The Most Money in Transfer Market? ","2bc844ad":"### The most number of transfers between leagues","c7a6000f":"### How many transfers are made each season ?","c7cbd0ab":"### LaLiga - Top 10 Players (Transfer Fee)","c0a37a1b":"### Age VS Transfer fee stats","0a04c3b5":"### Top 5 Leagues - The Oldest Player","0e1bf32d":"### Ligue 1 - Top 10 Players (Transfer Fee)","ece54a42":"# Stage 1 : Data Exploration"}}