{"cell_type":{"4e85d214":"code","94687c53":"code","45bca21b":"code","94fd2187":"code","824f995e":"code","0385fb5a":"code","115bb5c9":"code","b3e6d521":"code","c8f98bd0":"code","70249ff6":"code","2b4b65aa":"code","be0a28dc":"code","40b3aba4":"code","59154f6e":"code","412100e0":"code","736917e1":"code","a9408358":"code","eb714a0c":"code","529be76a":"code","39fbbec0":"code","8ba939fd":"code","80221982":"code","9bcd1a5d":"code","714a4802":"code","ef835caf":"code","b26e4027":"code","2e52e6f5":"code","c58d0585":"code","0ed26c4c":"code","dd0bbbea":"code","d80594ba":"code","f6bfed2d":"code","c31a773f":"code","ac6ffc85":"code","92d20cb0":"code","63cfd083":"code","e8b025d9":"code","5aac691f":"code","b6e3cd62":"code","4bbeb665":"code","d02526f3":"code","ab466575":"code","3013c584":"code","79038cf1":"code","62ad97fb":"code","0c7153a4":"code","7cc19456":"code","91bda997":"code","b551239b":"code","8bdb8363":"code","8147574e":"code","c8088713":"code","5cfa6330":"code","7dda61e9":"code","7b01dc9e":"code","c4c75ef9":"code","3b1d60a9":"code","9218c1e9":"code","5ffe886f":"code","c1d68632":"code","66e5c11d":"code","a70983f6":"code","8fabaab0":"code","75427567":"code","95b9ae55":"code","3d92fd87":"code","25c83f87":"code","8e7bae29":"code","4b6e72a9":"code","e3062d39":"code","797a5f39":"code","2f58d14a":"code","dafbc459":"code","bc41ba09":"code","933c0b04":"code","306303a3":"code","149242b5":"code","21c8c84b":"code","a5e3e1ca":"code","75c05243":"code","b00ba6ee":"code","d6e5a580":"code","d70c89f5":"code","dc251c83":"code","2438edaf":"code","01c062b8":"code","5779620e":"markdown","c9b56b82":"markdown","5c7e2007":"markdown","64ea5ce3":"markdown","1433fd4f":"markdown","e38f19fe":"markdown","602cbb6d":"markdown","3dd12a00":"markdown","f1f6288a":"markdown"},"source":{"4e85d214":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go\nimport plotly.express as px\nfrom collections import OrderedDict\nfrom nltk.stem import WordNetLemmatizer \nfrom sklearn.preprocessing import OneHotEncoder\nfrom nltk.corpus import stopwords\nfrom scipy.sparse import hstack,csr_matrix\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.feature_extraction.text import CountVectorizer\nimport re\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import f1_score\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.manifold import TSNE\nfrom sklearn.ensemble import RandomForestClassifier\nimport lightgbm as lgb\nfrom sklearn.model_selection import GridSearchCV\nfrom tqdm import tqdm\nsns.set()","94687c53":"df=pd.read_csv(\"..\/input\/real-or-fake-fake-jobposting-prediction\/fake_job_postings.csv\")","45bca21b":"df.head()","94fd2187":"df.info()","824f995e":"df[\"fraudulent\"].value_counts()","0385fb5a":"df[\"title\"].nunique()","115bb5c9":"split_location=df[\"location\"].apply(lambda x:str(x).strip().split(','))\nsplit_location=split_location.apply(pd.Series)","b3e6d521":"split_location","c8f98bd0":"split_location[~(split_location[4].isnull())]","70249ff6":"df['country']=split_location[0]","2b4b65aa":"df['location_count']=df[\"location\"].apply(lambda x:str(x).split(', '))","be0a28dc":"df['location_count']=df['location_count'].apply(lambda x:max(len(x)-2,0))","40b3aba4":"plt.figure(figsize=(12,5))\nax=sns.countplot(x='location_count',data=df,hue='fraudulent')\nfor p in ax.patches:\n        ax.annotate('{:.0f}'.format(p.get_height()), (p.get_x()+0.1, p.get_height()+50))","59154f6e":"df[((df['telecommuting']==1)&(df['location']!='none'))]['job_id'].count()","412100e0":"df[((df['telecommuting']==0)&(df['location'].isnull()))]['job_id'].count()","736917e1":"df['null_count']=df.isnull().sum(axis=1)","a9408358":"sns.countplot(x='null_count',data=df,hue='fraudulent');","eb714a0c":"# Map alpha 2 to corresponding alpha 3 country code\ncountry_code_mapping = {\"BD\": \"BGD\", \"BE\": \"BEL\", \"BF\": \"BFA\", \"BG\": \"BGR\", \"BA\": \"BIH\", \"BB\": \"BRB\", \"WF\": \"WLF\", \"BL\": \"BLM\", \"BM\": \"BMU\", \"BN\": \"BRN\", \"BO\": \"BOL\", \"BH\": \"BHR\", \"BI\": \"BDI\", \"BJ\": \"BEN\", \"BT\": \"BTN\", \"JM\": \"JAM\", \"BV\": \"BVT\", \"BW\": \"BWA\", \"WS\": \"WSM\", \"BQ\": \"BES\", \"BR\": \"BRA\", \"BS\": \"BHS\", \"JE\": \"JEY\", \"BY\": \"BLR\", \"BZ\": \"BLZ\", \"RU\": \"RUS\", \"RW\": \"RWA\", \"RS\": \"SRB\", \"TL\": \"TLS\", \"RE\": \"REU\", \"TM\": \"TKM\", \"TJ\": \"TJK\", \"RO\": \"ROU\", \"TK\": \"TKL\", \"GW\": \"GNB\", \"GU\": \"GUM\", \"GT\": \"GTM\", \"GS\": \"SGS\", \"GR\": \"GRC\", \"GQ\": \"GNQ\", \"GP\": \"GLP\", \"JP\": \"JPN\", \"GY\": \"GUY\", \"GG\": \"GGY\", \"GF\": \"GUF\", \"GE\": \"GEO\", \"GD\": \"GRD\", \"GB\": \"GBR\", \"GA\": \"GAB\", \"SV\": \"SLV\", \"GN\": \"GIN\", \"GM\": \"GMB\", \"GL\": \"GRL\", \"GI\": \"GIB\", \"GH\": \"GHA\", \"OM\": \"OMN\", \"TN\": \"TUN\", \"JO\": \"JOR\", \"HR\": \"HRV\", \"HT\": \"HTI\", \"HU\": \"HUN\", \"HK\": \"HKG\", \"HN\": \"HND\", \"HM\": \"HMD\", \"VE\": \"VEN\", \"PR\": \"PRI\", \"PS\": \"PSE\", \"PW\": \"PLW\", \"PT\": \"PRT\", \"SJ\": \"SJM\", \"PY\": \"PRY\", \"IQ\": \"IRQ\", \"PA\": \"PAN\", \"PF\": \"PYF\", \"PG\": \"PNG\", \"PE\": \"PER\", \"PK\": \"PAK\", \"PH\": \"PHL\", \"PN\": \"PCN\", \"PL\": \"POL\", \"PM\": \"SPM\", \"ZM\": \"ZMB\", \"EH\": \"ESH\", \"EE\": \"EST\", \"EG\": \"EGY\", \"ZA\": \"ZAF\", \"EC\": \"ECU\", \"IT\": \"ITA\", \"VN\": \"VNM\", \"SB\": \"SLB\", \"ET\": \"ETH\", \"SO\": \"SOM\", \"ZW\": \"ZWE\", \"SA\": \"SAU\", \"ES\": \"ESP\", \"ER\": \"ERI\", \"ME\": \"MNE\", \"MD\": \"MDA\", \"MG\": \"MDG\", \"MF\": \"MAF\", \"MA\": \"MAR\", \"MC\": \"MCO\", \"UZ\": \"UZB\", \"MM\": \"MMR\", \"ML\": \"MLI\", \"MO\": \"MAC\", \"MN\": \"MNG\", \"MH\": \"MHL\", \"MK\": \"MKD\", \"MU\": \"MUS\", \"MT\": \"MLT\", \"MW\": \"MWI\", \"MV\": \"MDV\", \"MQ\": \"MTQ\", \"MP\": \"MNP\", \"MS\": \"MSR\", \"MR\": \"MRT\", \"IM\": \"IMN\", \"UG\": \"UGA\", \"TZ\": \"TZA\", \"MY\": \"MYS\", \"MX\": \"MEX\", \"IL\": \"ISR\", \"FR\": \"FRA\", \"IO\": \"IOT\", \"SH\": \"SHN\", \"FI\": \"FIN\", \"FJ\": \"FJI\", \"FK\": \"FLK\", \"FM\": \"FSM\", \"FO\": \"FRO\", \"NI\": \"NIC\", \"NL\": \"NLD\", \"NO\": \"NOR\", \"NA\": \"NAM\", \"VU\": \"VUT\", \"NC\": \"NCL\", \"NE\": \"NER\", \"NF\": \"NFK\", \"NG\": \"NGA\", \"NZ\": \"NZL\", \"NP\": \"NPL\", \"NR\": \"NRU\", \"NU\": \"NIU\", \"CK\": \"COK\", \"XK\": \"XKX\", \"CI\": \"CIV\", \"CH\": \"CHE\", \"CO\": \"COL\", \"CN\": \"CHN\", \"CM\": \"CMR\", \"CL\": \"CHL\", \"CC\": \"CCK\", \"CA\": \"CAN\", \"CG\": \"COG\", \"CF\": \"CAF\", \"CD\": \"COD\", \"CZ\": \"CZE\", \"CY\": \"CYP\", \"CX\": \"CXR\", \"CR\": \"CRI\", \"CW\": \"CUW\", \"CV\": \"CPV\", \"CU\": \"CUB\", \"SZ\": \"SWZ\", \"SY\": \"SYR\", \"SX\": \"SXM\", \"KG\": \"KGZ\", \"KE\": \"KEN\", \"SS\": \"SSD\", \"SR\": \"SUR\", \"KI\": \"KIR\", \"KH\": \"KHM\", \"KN\": \"KNA\", \"KM\": \"COM\", \"ST\": \"STP\", \"SK\": \"SVK\", \"KR\": \"KOR\", \"SI\": \"SVN\", \"KP\": \"PRK\", \"KW\": \"KWT\", \"SN\": \"SEN\", \"SM\": \"SMR\", \"SL\": \"SLE\", \"SC\": \"SYC\", \"KZ\": \"KAZ\", \"KY\": \"CYM\", \"SG\": \"SGP\", \"SE\": \"SWE\", \"SD\": \"SDN\", \"DO\": \"DOM\", \"DM\": \"DMA\", \"DJ\": \"DJI\", \"DK\": \"DNK\", \"VG\": \"VGB\", \"DE\": \"DEU\", \"YE\": \"YEM\", \"DZ\": \"DZA\", \"US\": \"USA\", \"UY\": \"URY\", \"YT\": \"MYT\", \"UM\": \"UMI\", \"LB\": \"LBN\", \"LC\": \"LCA\", \"LA\": \"LAO\", \"TV\": \"TUV\", \"TW\": \"TWN\", \"TT\": \"TTO\", \"TR\": \"TUR\", \"LK\": \"LKA\", \"LI\": \"LIE\", \"LV\": \"LVA\", \"TO\": \"TON\", \"LT\": \"LTU\", \"LU\": \"LUX\", \"LR\": \"LBR\", \"LS\": \"LSO\", \"TH\": \"THA\", \"TF\": \"ATF\", \"TG\": \"TGO\", \"TD\": \"TCD\", \"TC\": \"TCA\", \"LY\": \"LBY\", \"VA\": \"VAT\", \"VC\": \"VCT\", \"AE\": \"ARE\", \"AD\": \"AND\", \"AG\": \"ATG\", \"AF\": \"AFG\", \"AI\": \"AIA\", \"VI\": \"VIR\", \"IS\": \"ISL\", \"IR\": \"IRN\", \"AM\": \"ARM\", \"AL\": \"ALB\", \"AO\": \"AGO\", \"AQ\": \"ATA\", \"AS\": \"ASM\", \"AR\": \"ARG\", \"AU\": \"AUS\", \"AT\": \"AUT\", \"AW\": \"ABW\", \"IN\": \"IND\", \"AX\": \"ALA\", \"AZ\": \"AZE\", \"IE\": \"IRL\", \"ID\": \"IDN\", \"UA\": \"UKR\", \"QA\": \"QAT\", \"MZ\": \"MOZ\"}","529be76a":"df['country']=df['country'].apply(lambda x:country_code_mapping[x] if x!='nan' else 'nan')","39fbbec0":"fig = go.Figure(data=go.Choropleth(\n    locations = df['country'].value_counts().index,\n    z = df['country'].value_counts().values,\n    text = df['country'].value_counts().index,\n    colorscale = 'Blues',\n    autocolorscale=False,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_title = 'job ads',\n))\n\nfig.update_layout(\n    title_text='Total job ads',\n    geo=dict(\n        showframe=False,\n        showcoastlines=True,\n        projection_type='equirectangular'\n    ),\n\n)\n\nfig.show()","8ba939fd":"fraud_list=df[df['fraudulent']==1]['country'].value_counts().to_dict()\ntotal_count_list=df['country'].value_counts().to_dict()\npercent_fraud_dict={}\nfor country in total_count_list.keys():\n    if country in fraud_list:\n        percent_fraud_dict[country]=fraud_list[country]\/total_count_list[country]*100\n    else:\n        percent_fraud_dict[country]=0\npercent_fraud_dict=OrderedDict(sorted(percent_fraud_dict.items())) ","80221982":"fig = go.Figure(data=go.Choropleth(\n    locations = list(percent_fraud_dict.keys()),\n    z = list(percent_fraud_dict.values()),\n    text =  list(percent_fraud_dict.keys()),\n    colorscale = 'Reds',\n    autocolorscale=False,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_title = 'Job ads percent',\n))\n\nfig.update_layout(\n    title_text='Percentage of fraudulent job ads',\n    geo=dict(\n        showframe=False,\n        showcoastlines=True,\n        projection_type='equirectangular'\n    ),\n\n)\n\nfig.show()","9bcd1a5d":"df['department'].value_counts().head(20)","714a4802":"df['department'].fillna('none',inplace=True)","ef835caf":"sns.countplot(x='department',data=df[((df['department']=='tech')|(df['department']=='Technology'))],hue='fraudulent');","b26e4027":"sns.countplot(x='department',data=df[((df['department']=='IT')|(df['department']=='Information Technology'))],hue='fraudulent');","2e52e6f5":"sns.countplot(x='department',data=df[((df['department']=='Development')|(df['department']=='Product')|(df['department']=='Product Development'))],hue='fraudulent');","c58d0585":"sns.countplot(x='department',data=df[df['department']=='none'],hue='fraudulent');","0ed26c4c":"df['salary_range'].nunique()","dd0bbbea":"df[df['salary_range'].notnull()]['salary_range']","d80594ba":"salary=df['salary_range'].apply(lambda x:str(x).strip().split('-'))\nsalary=salary.apply(pd.Series)","f6bfed2d":"# Function to check fot non integer values\ndef int_check(x):\n    try:\n        int(x)\n    except:\n        if x!='nan':\n            print(x)","c31a773f":"salary[0].apply(int_check)","ac6ffc85":"def int_convert(x):\n    try:\n        return int(x)\n    except:\n        return 0","92d20cb0":"df['salary_lower_bound']=salary[0]\ndf['salary_lower_bound']=df['salary_lower_bound'].apply(int_convert)\ndf['salary_upper_bound']=salary[1]\ndf['salary_upper_bound']=df['salary_upper_bound'].apply(int_convert)","63cfd083":"df['avg_salary']=(df['salary_upper_bound']+df['salary_lower_bound'])\/2","e8b025d9":"px.histogram(data_frame=df[(df['avg_salary']<=100000)&(df['avg_salary']!=0)],x=\"avg_salary\",color='fraudulent',marginal='rug')","5aac691f":"sns.countplot(x='telecommuting',data=df,hue='fraudulent');","b6e3cd62":"sns.barplot(x=\"has_company_logo\", y=\"percentage\", hue=\"fraudulent\", data=df.groupby(['fraudulent'])['has_company_logo']\n                     .value_counts(normalize=True)\n                     .rename('percentage')\n                     .mul(100)\n                     .reset_index()\n                     .sort_values('has_company_logo'));","4bbeb665":"sns.barplot(x=\"has_questions\", y=\"percentage\", hue=\"fraudulent\", data=df.groupby(['fraudulent'])['has_questions']\n                     .value_counts(normalize=True)\n                     .rename('percentage')\n                     .mul(100)\n                     .reset_index()\n                     .sort_values('has_questions'));","d02526f3":"df['employment_type'].unique()","ab466575":"df['employment_type'].fillna(\"none\",inplace=True)","3013c584":"sns.countplot(x='employment_type',data=df);","79038cf1":"df['required_experience'].unique()","62ad97fb":"df[df['required_experience']=='Not Applicable'].head()","0c7153a4":"df[df['required_experience'].isnull()].head()","7cc19456":"df['required_experience'].fillna('Not Applicable',inplace=True)","91bda997":"plt.figure(figsize=(10,5))\nsns.countplot(x='required_experience',data=df);","b551239b":"df['required_education'].unique()","8bdb8363":"df['required_education'].fillna('Unspecified',inplace=True)","8147574e":"plt.figure(figsize=(10,5))\nsns.countplot(y='required_education',data=df,hue='fraudulent');","c8088713":"df['industry'].unique()","5cfa6330":"df['industry'].fillna('not specified',inplace=True)","7dda61e9":"df['function'].unique()","7b01dc9e":"df['function'].fillna('not specified',inplace=True)","c4c75ef9":"df[(df['company_profile'].isnull())&(df['fraudulent']==0)]","3b1d60a9":"abbr_dict={\n    \"what's\":\"what is\",\n    \"what're\":\"what are\",\n    \"who's\":\"who is\",\n    \"who're\":\"who are\",\n    \"where's\":\"where is\",\n    \"where're\":\"where are\",\n    \"when's\":\"when is\",\n    \"when're\":\"when are\",\n    \"how's\":\"how is\",\n    \"how're\":\"how are\",\n\n    \"i'm\":\"i am\",\n    \"we're\":\"we are\",\n    \"you're\":\"you are\",\n    \"they're\":\"they are\",\n    \"it's\":\"it is\",\n    \"he's\":\"he is\",\n    \"she's\":\"she is\",\n    \"that's\":\"that is\",\n    \"there's\":\"there is\",\n    \"there're\":\"there are\",\n\n    \"i've\":\"i have\",\n    \"we've\":\"we have\",\n    \"you've\":\"you have\",\n    \"they've\":\"they have\",\n    \"who've\":\"who have\",\n    \"would've\":\"would have\",\n    \"not've\":\"not have\",\n\n    \"i'll\":\"i will\",\n    \"we'll\":\"we will\",\n    \"you'll\":\"you will\",\n    \"he'll\":\"he will\",\n    \"she'll\":\"she will\",\n    \"it'll\":\"it will\",\n    \"they'll\":\"they will\",\n\n    \"isn't\":\"is not\",\n    \"wasn't\":\"was not\",\n    \"aren't\":\"are not\",\n    \"weren't\":\"were not\",\n    \"can't\":\"can not\",\n    \"couldn't\":\"could not\",\n    \"don't\":\"do not\",\n    \"didn't\":\"did not\",\n    \"shouldn't\":\"should not\",\n    \"wouldn't\":\"would not\",\n    \"doesn't\":\"does not\",\n    \"haven't\":\"have not\",\n    \"hasn't\":\"has not\",\n    \"hadn't\":\"had not\",\n    \"won't\":\"will not\",\n}\n\nstop_words=stopwords.words('english')\nlemmatizer = WordNetLemmatizer() \n\ndef text_preprocess(x):\n    if pd.isnull(x) or x=='nan':\n        return \"not specified\"\n    x=str(x)\n    x=x.lower()\n    #remove url,email,phone number and links\n    x=re.sub(\"(#url_.*#)|(#email.*#)|(#phone.*#)|((http|https):\/\/\\w*)\",' ',x)\n    # remove abbreviations\n    pattern = re.compile(r'\\b(' + '|'.join(abbr_dict.keys()) + r')\\b')\n    x = pattern.sub(lambda x: abbr_dict[x.group()], x)\n    tokens = re.findall(\"[\\w']+\", x)\n    tokens=[word for word in tokens if ((word not in stop_words) and (len(word)>1) and not(word.isdigit()))]\n    lemmatized_tokens=list(map(lemmatizer.lemmatize,tokens))\n    string=\"\"\n    for word in lemmatized_tokens:\n        string+=word+' '\n    return string\n    ","9218c1e9":"df['text']=df[['title', 'company_profile', 'description','requirements','benefits']].fillna('').agg(' '.join, axis=1)","5ffe886f":"df['text_length']=df['text'].apply(lambda x:len(x.split()))","c1d68632":"px.histogram(data_frame=df,x=\"text_length\",color='fraudulent',marginal='rug')","66e5c11d":"df['text']=df['text'].apply(text_preprocess)","a70983f6":"df['company_profile'].apply(lambda x:print(x) if 'see more' in str(x).lower() else False)","8fabaab0":"df[df['company_profile'].apply(lambda x:True if 'see more' in str(x).lower() else False)]['company_profile'].count()","75427567":"x_train,x_test,y_train,y_test=train_test_split(df, df['fraudulent'], test_size=0.2,stratify=df['fraudulent'], random_state=42)","95b9ae55":"numerical_features=['telecommuting','has_company_logo','has_questions','location_count','null_count','text_length']\n\nscaler=StandardScaler()\nnum_train=csr_matrix(scaler.fit_transform(x_train[numerical_features]))\nnum_test=csr_matrix(scaler.transform(x_test[numerical_features]))","3d92fd87":"ohe=OneHotEncoder()\nohe_train=ohe.fit_transform(x_train[['required_education','employment_type','required_experience']])\nohe_test=ohe.transform(x_test[['required_education','employment_type','required_experience']])","25c83f87":"bow=CountVectorizer(ngram_range=(1,2))\ntext_train=bow.fit_transform(x_train['text'])\ntext_test=bow.transform(x_test['text'])","8e7bae29":"combined_train=hstack([num_train,ohe_train])\ncombined_test=hstack([num_test,ohe_test])\ncombined_train=hstack([combined_train,text_train])\ncombined_test=hstack([combined_test,text_test])","4b6e72a9":"params={'C':[1,10,100,1000]}\nclf=LogisticRegression(solver='liblinear',class_weight='balanced')\ngrid=GridSearchCV(clf,params,scoring='f1',n_jobs=-1,cv=5)\ngrid.fit(combined_train,y_train)\nprint(f1_score(y_train,grid.predict(combined_train)))\nprint(f1_score(y_test,grid.predict(combined_test)))\nprint(confusion_matrix(y_train,grid.predict(combined_train)))\nprint(confusion_matrix(y_test,grid.predict(combined_test)))","e3062d39":"tfidf=TfidfVectorizer(ngram_range=(1,2))\ntext_train=tfidf.fit_transform(x_train['text'])\ntext_test=tfidf.transform(x_test['text'])","797a5f39":"combined_train=hstack([num_train,ohe_train])\ncombined_test=hstack([num_test,ohe_test])\ncombined_train=hstack([combined_train,text_train])\ncombined_test=hstack([combined_test,text_test])","2f58d14a":"params={'C':[1,10,100,1000]}\nclf=LogisticRegression(solver='liblinear',class_weight='balanced')\ngrid=GridSearchCV(clf,params,scoring='f1',n_jobs=-1,cv=5)\ngrid.fit(combined_train,y_train)\nprint(f1_score(y_train,grid.predict(combined_train)))\nprint(f1_score(y_test,grid.predict(combined_test)))\nprint(confusion_matrix(y_train,grid.predict(combined_train)))\nprint(confusion_matrix(y_test,grid.predict(combined_test)))","dafbc459":"embeddings_index = {}\nf = open('\/kaggle\/input\/glove6b\/glove.6B.300d.txt','r',encoding='utf-8')\nfor line in tqdm(f):\n    values = line.split(' ')\n    word = values[0]\n    coefs = np.asarray(values[1:], dtype='float32')\n    embeddings_index[word] = coefs\nf.close()\n\nprint('Found %s word vectors.' % len(embeddings_index))","bc41ba09":"# Function to generate TF-IDF weighted glove embedding\ndef glove_embedding(x):\n    embed=[]\n    tfidf_dict=tfidf.vocabulary_\n    x=list(x.split())\n    for word in x:\n        try:\n            embed.append(embeddings_index[word]*tfidf_dict[word])\n        except:\n            continue\n    return np.mean(embed,axis=0)","933c0b04":"text_train=x_train['text'].apply(glove_embedding)\ntext_test=x_test['text'].apply(glove_embedding)\ntext_train=text_train.apply(pd.Series)\ntext_test=text_test.apply(pd.Series)","306303a3":"combined_train=hstack([num_train,ohe_train])\ncombined_test=hstack([num_test,ohe_test])\ncombined_train=hstack([combined_train,text_train])\ncombined_test=hstack([combined_test,text_test])","149242b5":"params={'C':[0.01,0.1,1,10]}\nclf=LogisticRegression(solver='liblinear',class_weight='balanced')\ngrid=GridSearchCV(clf,params,scoring='f1',n_jobs=-1,cv=5)\ngrid.fit(combined_train,y_train)\nprint(f1_score(y_train,grid.predict(combined_train)))\nprint(f1_score(y_test,grid.predict(combined_test)))\nprint(confusion_matrix(y_train,grid.predict(combined_train)))\nprint(confusion_matrix(y_test,grid.predict(combined_test)))","21c8c84b":"clf=RandomForestClassifier(n_estimators=500,oob_score=True,n_jobs=-1,random_state=0)\nclf.fit(text_train,y_train)\nprint(f1_score(y_train,clf.predict(text_train)))\nprint(f1_score(y_test,clf.predict(text_test)))\nprint(confusion_matrix(y_train,clf.predict(text_train)))\nprint(confusion_matrix(y_test,clf.predict(text_test)))","a5e3e1ca":"train_data = lgb.Dataset(combined_train, label=y_train)\ntest_data = lgb.Dataset(combined_test, label=y_test)","75c05243":"params = {}\nparams['learning_rate'] = 0.04\nparams['boosting_type'] = 'gbdt'\nparams['objective'] = 'binary'\nparams['max_depth'] = 5\nparams['lambda_l1'] = 0\nparams['lambda_l2'] = 0\nparams['n_jobs'] = 4\nparams['class_weight']='balanced'\n\nclf = lgb.train( params,train_data, 1000, valid_sets=[test_data])","b00ba6ee":"thresh=0.20\nprint(f1_score(y_train,list(map(lambda x:1 if x>thresh else 0,clf.predict(combined_train)))))\nprint(f1_score(y_test,list(map(lambda x:1 if x>thresh else 0,clf.predict(combined_test)))))\nprint(confusion_matrix(y_train,list(map(lambda x:1 if x>thresh else 0,clf.predict(combined_train)))))\nprint(confusion_matrix(y_test,list(map(lambda x:1 if x>thresh else 0,clf.predict(combined_test)))))","d6e5a580":"# bert_df=df.iloc[:,[23,17]]\n# bert_df.columns=['text','labels']\n# bert_df['text']=bert_df['text'].apply(text_preprocess)\n# train_df,eval_df=train_test_split(bert_df, test_size=0.2,stratify=bert_df['labels'], random_state=42)","d70c89f5":"#!pip install spacy==2.1.9","dc251c83":"#!pip install simpletransformers wandb ","2438edaf":"# from simpletransformers.classification import ClassificationModel\n\n# args={\"learning_rate\": 3e-5,\"save_steps\": 4000,\"manual_seed\": 0,'save_model_every_epoch':False,'sliding_window': True,\n#         'fp16': False, \n#         'train_batch_size': 64, \n#         'do_lower_case': True,\n#         'overwrite_output_dir': True, \n#         'num_train_epochs':2\n#      }\n\n# model = ClassificationModel('roberta', 'roberta-base', num_labels=2,use_cuda=True,args=args)\n# model.train_model(train_df)","01c062b8":"# result, model_outputs, wrong_predictions = model.eval_model(train_df,acc=f1_score)\n# print('[',result['tn'],',',result['fp'],']','\\n[',result['fn'],',',result['tp'],']')\n# print(\"f1_score: \",result['acc'])","5779620e":"<p>Split location in country, state and city columns<\/p>","c9b56b82":"<p>Missing location does not mean work from home<\/p>","5c7e2007":"<p>Missing required_experience value may indicate 'Not Applicable'<\/p>","64ea5ce3":"<p>A lot of genuine job ads haven't specified company profile<\/p>","1433fd4f":"<p>The dataset is highly imbalanced<\/p>","e38f19fe":"<p>As expected, most of the fraudulent job ads don't have a company logo.<\/p>","602cbb6d":"Some jobs offers are available in multiple locations","3dd12a00":"<p>There are a lot of jobs which have the same department but use different terms.Fraudulent ads seem to be biased towards a particular term for a department but this may also be due to fewer fraudulent ads.<\/p>\n<p>Most of the authentic jobs also didn't specify the depatment.<\/p>","f1f6288a":"<p>'See more at #url' may be link to company's website<\/p>\n<p>Most of the companies posting job ad on this platform don't have a website<\/p> "}}