{"cell_type":{"7188932b":"code","86fea10b":"code","10604701":"code","347822e8":"code","b8e03367":"code","19f744b1":"code","b97bfa49":"code","621a32c4":"code","9268ef7f":"code","21d92cbc":"code","113d052a":"code","d27b5d93":"markdown","806048fc":"markdown","01c01db0":"markdown","0d9b3d51":"markdown","9d921b60":"markdown"},"source":{"7188932b":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\nprint (\"ready\")\n","86fea10b":"from google.cloud import bigquery\nfrom bq_helper import BigQueryHelper\nimport pandas as pd\nimport seaborn as sns\nfrom matplotlib import pyplot as plt","10604701":"\n# Create a \"Client\" object\nclient = bigquery.Client()\n\n# Construct a reference to the \"openaq\" dataset\ndataset_ref = client.dataset(\"openaq\", project=\"bigquery-public-data\")\n\n# API request - fetch the dataset\ndataset = client.get_dataset(dataset_ref)\n\n# List all the tables in the \"openaq\" dataset\ntables = list(client.list_tables(dataset))\n\n# Print names of all tables in the dataset (there's only one!)\nfor table in tables:  \n    print(table.table_id)","347822e8":"# Construct a reference to the \"global_air_quality\" table\ntable_ref = dataset_ref.table(\"global_air_quality\")\n\n# API request - fetch the table\ntable = client.get_table(table_ref)\n\n# Preview the first five lines of the \"global_air_quality\" table\nclient.list_rows(table, max_results=5).to_dataframe()","b8e03367":"query = \"\"\"\n        SELECT city\n        FROM `bigquery-public-data.openaq.global_air_quality`\n        WHERE country = 'IT'\n        \"\"\"\nclient = bigquery.Client()\n# Set up the query\nquery_job = client.query(query)\n# API request - run the query, and return a pandas DataFrame\ncities = query_job.to_dataframe()\n# What five cities have the most measurements?\ncities.city.value_counts().head()","19f744b1":"query = \"\"\"\n        SELECT *\n        FROM `bigquery-public-data.openaq.global_air_quality` \n        WHERE \n            timestamp > \"1990-01-01\" \n            AND country = \"US\"\n        \n        \n        \"\"\"","b97bfa49":"# AND country = \"US\"\n# AND pollutant = \"so2\" \n# ORDER BY value DESC\n# LIMIT 10000\n# `bigquery-public-data.openaq.global_air_quality`","621a32c4":"bq_assistant = BigQueryHelper('bigquery-public-data', 'openaq')\n\ndf = bq_assistant.query_to_pandas(query)\ndf.head()","9268ef7f":"plt.figure(figsize=(15,8))\nsns.scatterplot(x = df[\"longitude\"],y = df[\"latitude\"], size = df[\"value\"] , hue = df[\"value\"], sizes=(40, 400))","21d92cbc":"df[\"pollutant\"].unique()","113d052a":"df = df.sort_values(\"timestamp\")\ndf = df.set_index(\"timestamp\")\ndf[\"value\"].plot(figsize = (20,10))","d27b5d93":"# How to get data","806048fc":"* The quick way to execute this query is to use the bq_helper library: https:\/\/github.com\/SohierDane\/BigQuery_Helper","01c01db0":"# Analysis\n\n* only so2\n\nInhaling sulfur dioxide causes irritation to the nose, eyes, throat, and lungs. Typical symptoms include sore throat, runny nose, burning eyes, and cough. Inhaling high levels can cause swollen lungs and difficulty breathing. Skin contact with sulfur dioxide vapor can cause irritation or burns.","0d9b3d51":"## Time series","9d921b60":"* https:\/\/openaq.org\/\n* Country is given with ISO code (i.g. Algery == DZ , Italy == IT)"}}