{"cell_type":{"05796255":"code","77838a62":"code","24803dbc":"code","c3d578f7":"code","5fc2a945":"code","528d63aa":"code","e75d0ac4":"code","4daa23ff":"code","180fa0ee":"code","f636c7db":"code","6c2dedd4":"code","6fa02f25":"code","e63a9e83":"code","a1fe2442":"code","eaa30c2e":"code","eddad0bb":"code","fdb92768":"code","cc80774c":"code","a8951e9d":"code","63983bbe":"code","0ca959a5":"code","f4b0b9fb":"code","75a77e58":"code","89e99397":"markdown","2d06aaa8":"markdown","e44df837":"markdown","3a441c28":"markdown","19386773":"markdown","be103bd5":"markdown","eba0c99d":"markdown","085ee89f":"markdown","cda61a53":"markdown","68509410":"markdown","e2cbb73a":"markdown","eaa1887e":"markdown","d7bbf624":"markdown","a7aa9911":"markdown","71fa1779":"markdown","f23aeadc":"markdown","219f7d7b":"markdown"},"source":{"05796255":"# Imports\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","77838a62":"# Read data\npath = '..\/input\/competitive-data-science-predict-future-sales\/'\ndf_item_categories = pd.read_csv(path + 'item_categories.csv')\ndf_items = pd.read_csv(path + 'items.csv')\ndf_sales_train = pd.read_csv(path + 'sales_train.csv', parse_dates=[0]) # https:\/\/stackoverflow.com\/questions\/16852911\/how-do-i-convert-strings-in-a-pandas-data-frame-to-a-date-data-type\ndf_shops = pd.read_csv(path + 'shops.csv')\ndf_test = pd.read_csv(path + 'test.csv')","24803dbc":"# Data\ndf_item_categories = df_item_categories.set_index('item_category_id') ## setting item_category_id as index\nprint(f\"Total Categories Data: {df_item_categories.shape}\")\nprint(f\"Columns {df_item_categories.columns.tolist()}\")\ndf_item_categories.head()","c3d578f7":"df_item_categories.item_category_name.nunique()","5fc2a945":"# Data\ndf_items = df_items.set_index('item_id') ## setting id as index\nprint(f\"Items data {df_items.shape}\")\nprint(f\"Items columns {df_items.columns.tolist()}\")\ndf_items.head()","528d63aa":"df_items.item_category_id.nunique()","e75d0ac4":"# Distribution of top 5 categories\nitem_category_id_count = df_items.item_category_id.value_counts()[:5]\nplt.barh(df_item_categories.loc[item_category_id_count.index].item_category_name, item_category_id_count.values)\nplt.ylabel(\"Item Category Name\")\nplt.xlabel(\"Count\")\nplt.plot();","4daa23ff":"# Data\ndf_shops = df_shops.set_index('shop_id') # setting shop_id as index\nprint(f\"Shops Data {df_shops.shape}\")\nprint(f\"Shops Columns {df_shops.columns.tolist()}\")\ndf_shops.head()","180fa0ee":"# Data\nprint(f\"Sales data {df_sales_train.shape}\")\nprint(f\"Sales Columns {df_sales_train.columns.tolist()}\")\ndf_sales_train.head()","f636c7db":"# Add columns for year, day of month and month\ndf_sales_train['year'] = df_sales_train.date.dt.year\ndf_sales_train['month'] = df_sales_train.date.dt.month\ndf_sales_train['day'] = df_sales_train.date.dt.day\ndf_sales_train.head()","6c2dedd4":"df_sales_train.year.unique().tolist()","6fa02f25":"df_sales_train.shop_id.nunique()","e63a9e83":"df_top_shops_id = df_sales_train.shop_id.value_counts()[:5]\nplt.barh(df_shops.loc[df_top_shops_id.index].shop_name, df_top_shops_id.values)\nplt.ylabel(\"Shop Name\")\nplt.xlabel(\"Count\")\nplt.plot();","a1fe2442":"df_top_items_id = df_sales_train.item_id.value_counts()[:5]\nplt.barh(df_items.loc[df_top_items_id.index].item_name, df_top_items_id.values)\nplt.ylabel(\"Item Name\")\nplt.xlabel(\"Count\")\nplt.plot();","eaa30c2e":"print(f\"Range of item prices: {df_sales_train.item_price.max()}  {df_sales_train.item_price.min()}\")\ndf_sales_train.item_price.describe()","eddad0bb":"pd.plotting.scatter_matrix(df_sales_train.drop(['date','date_block_num','year','month','day'], axis=1));","fdb92768":"df_sales_train.drop(['date','date_block_num','year','month','day'], axis=1).corr()","cc80774c":"# Lets add shop_name, item_name and item_category to the sales dataframe and then export it as csv\n# df_sales_train['shop_name'] = df_sales_train.shop_id.apply(lambda x: df_shops.loc[x].shop_name)\n# df_sales_train['item_name'] = df_sales_train.item_id.apply(lambda x: df_items.loc[x].item_name)\n# df_sales_train['item_category_id'] = df_sales_train.item_id.apply(lambda x: df_items.loc[x].item_category_id)\n# df_sales_train['item_category_name'] = df_sales_train.item_category_id.apply(lambda x: df_item_categories.loc[x].item_category_name)\ndf_sales_train.head()","a8951e9d":"# df_sales_train.to_csv('predict_sales_data_eda.csv')","63983bbe":"## Check for null values\nprint(f\"Train Data {df_sales_train.shape}\")\ndf_sales_train.isnull().any()","0ca959a5":"print(f\"Test data {df_test.shape}\")\ndf_test.head()","f4b0b9fb":"# null check\ndf_test.isnull().any()","75a77e58":"# check if all shop ids and item ids are present in training data\nprint(f\"All shop IDs present in test are in training data: {df_test.shop_id.isin(df_sales_train.shop_id).astype(int).any()}\")\nprint(f\"All item IDs present in test are in training data: {df_test.item_id.isin(df_sales_train.item_id).astype(int).any()}\")","89e99397":"3 years data is present 13, 14 and 15","2d06aaa8":"None of the sales column seem to be correlated","e44df837":"### How many unique categories do we have ?","3a441c28":"### Test Data","19386773":"# Shops\nsupplemental information about the shops.","be103bd5":"### How many shops do we have ?","eba0c99d":"# Items\n\nsupplemental information about the items\/products.","085ee89f":"### How many years data is present ?","cda61a53":"All 84 categories have items in the store","68509410":"# Sales\nthe training set. Daily historical data from January 2013 to October 2015","e2cbb73a":"### Top 5 trending shops","eaa1887e":"Total 60 shops items we have in dataset","d7bbf624":"### Top 5 trending products","a7aa9911":"# Item Categories\nsupplemental information about the items categories.","71fa1779":"### Which item categories have items in the store","f23aeadc":"### Distribution of item price","219f7d7b":"DVD Category has the highest items\/products in the store, followed by CD then Blu-Ray"}}