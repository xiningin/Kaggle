{"cell_type":{"7c5c30f1":"code","06071932":"code","463c7e2e":"code","c94c2fd4":"code","fecdad24":"code","d0d524f1":"code","969f2776":"code","cd956e4e":"code","eae7d9e7":"code","79f8d661":"code","157f8032":"code","bdfb90e1":"code","2ddfd493":"code","b895409d":"code","7fc36e91":"code","3317a29b":"code","e28f2b28":"code","43928a01":"code","8b72a8e1":"code","5b4dadca":"code","7823bab9":"code","8ac5ee89":"code","a2758f3c":"code","414df454":"code","113a223f":"code","1ddbead5":"code","0ea89aeb":"code","a9386398":"code","dccbb695":"code","316a6450":"code","697c918f":"markdown","38ea664a":"markdown","5edd4406":"markdown","550a8c1e":"markdown","a41856ad":"markdown","dfc36435":"markdown","dcdf825e":"markdown","922ffbb3":"markdown","a59aea7b":"markdown"},"source":{"7c5c30f1":"!pip install astropy\n!pip install specutils","06071932":"#GENERAL\n\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport matplotlib.cm as mtpltcm\nfrom mpl_toolkits.mplot3d import Axes3D\nimport random\nimport time\n\n#PATH PROCESS\n\nimport os\nimport os.path\nfrom pathlib import Path\nimport glob\nfrom scipy.io import loadmat\nimport nibabel as nib\nimport csv\nfrom astropy.visualization import astropy_mpl_style\nfrom astropy.utils.data import get_pkg_data_filename\nfrom astropy.io import fits\nimport astropy\nfrom astropy import units as u \nimport astropy.wcs as fitswcs\nfrom specutils import Spectrum1D, SpectralRegion\nfrom astropy.cosmology import WMAP9 as Cosmology\n\n#IMAGE PROCESS\n\nfrom PIL import Image\nfrom keras.preprocessing import image\nfrom tensorflow.keras.preprocessing.image import ImageDataGenerator\nimport cv2\nfrom keras.applications.vgg16 import preprocess_input, decode_predictions\nfrom keras.preprocessing import image\nfrom skimage.feature import hessian_matrix, hessian_matrix_eigvals\nfrom scipy.ndimage.filters import convolve\nfrom skimage import data, io, filters\nimport skimage.morphology as morph\nimport skimage.exposure as skie\nimport skimage\nfrom skimage.morphology import convex_hull_image, erosion\nfrom IPython import display\nfrom scipy.ndimage import gaussian_filter\nfrom mpl_toolkits.mplot3d.art3d import Poly3DCollection\nimport matplotlib.patches as patches\n\n#SCALER & TRANSFORMATION\n\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.preprocessing import MinMaxScaler\nfrom keras.utils.np_utils import to_categorical\nfrom sklearn.model_selection import train_test_split\nfrom keras import regularizers\nfrom sklearn.preprocessing import LabelEncoder\nimport sklearn\n\nimport pydub\nfrom scipy.io.wavfile import read, write\nimport librosa\nimport librosa.display\nimport IPython\nfrom IPython.display import Audio\nimport scipy\nfrom scipy import signal\nfrom scipy.fft import fftshift\n\n#IGNORING WARNINGS\n\nfrom warnings import filterwarnings\n\nfilterwarnings(\"ignore\",category=DeprecationWarning)\nfilterwarnings(\"ignore\", category=FutureWarning) \nfilterwarnings(\"ignore\", category=UserWarning)\nfilterwarnings(\"ignore\", category=RuntimeWarning)","463c7e2e":"XMM_OM_PATH = \"..\/input\/center-of-all-observable-galaxiesfits-allesa\/GALAXIES_CENTER\/NGC1365\/XMM_OM_Optical\/P0205590401OMX000USIMAGU000.FTZ\"","c94c2fd4":"OPEN_XMM_OM = fits.open(XMM_OM_PATH)","fecdad24":"OM_PRIMARY_IMAGE = OPEN_XMM_OM[0].data\n\nOM_PRIMARY_WIDE_SCALE = OM_PRIMARY_IMAGE[400:970,470:870]\nOM_PRIMARY_CENTER_CIRCLE = OM_PRIMARY_IMAGE[590:830,530:770]\n\nOM_NUCLEUS_CLOSED = OM_PRIMARY_IMAGE[680:735,615:690]\nOM_NUCLEUS_FAR = OM_PRIMARY_IMAGE[640:750,595:720]","d0d524f1":"NEW_MASS_WIDE = OM_PRIMARY_CENTER_CIRCLE[150:250,120:210]\nNEW_MASS_NUCLEUS = OM_PRIMARY_CENTER_CIRCLE[160:220,140:190]","969f2776":"SOBEL_OM_NUCLEUS_CLOSED = filters.sobel(OM_NUCLEUS_CLOSED)\nSOBEL_OM_CENTER_CIRCLE = filters.sobel(OM_PRIMARY_CENTER_CIRCLE)\n\nSATO_OM_NUCLEUS_CLOSED = filters.sato(OM_NUCLEUS_CLOSED)\nSATO_OM_CENTER_CIRCLE = filters.sato(OM_PRIMARY_CENTER_CIRCLE)\n\nNEG_OM_NUCLEUS_CLOSED = filters.roberts_neg_diag(OM_NUCLEUS_CLOSED)\nNEG_OM_CENTER_CIRCLE = filters.roberts_neg_diag(OM_PRIMARY_CENTER_CIRCLE)\n\nWHITE_OM_NUCLEUS_CLOSED = filters.meijering(OM_NUCLEUS_CLOSED,black_ridges=False)\nWHITE_OM_CENTER_CIRCLE = filters.meijering(OM_PRIMARY_CENTER_CIRCLE,black_ridges=False)\n\nMEIJERING_OM_NUCLEUS_CLOSED = filters.meijering(OM_NUCLEUS_CLOSED)\nMEIJERING_OM_CENTER_CIRCLE = filters.meijering(OM_PRIMARY_CENTER_CIRCLE)","cd956e4e":"SOBEL_NEW_MASS_WIDE = filters.sobel(NEW_MASS_WIDE)\nSATO_NEW_MASS_WIDE = filters.sato(NEW_MASS_WIDE)\nNEG_NEW_MASS_WIDE = filters.roberts_neg_diag(NEW_MASS_WIDE)\nMEIJERING_NEW_MASS_WIDE = filters.meijering(NEW_MASS_WIDE)\nWHITE_NEW_MASS_WIDE = filters.meijering(NEW_MASS_WIDE,black_ridges=False)","eae7d9e7":"plt.style.use(\"ggplot\")","79f8d661":"CMAP_LIST = [\"gray\",\"jet\",\"hot\",\"prism\",\"nipy_spectral\",\n             \"gist_ncar\",\"gist_earth\",\"gist_stern\",\"flag\",\"gnuplot2\",\"afmhot\",\n            \"bwr\",'PiYG','PRGn','BrBG','PuOr','RdGy','RdBu','terrain']","157f8032":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(OM_NUCLEUS_CLOSED,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"NUCLEUS - {spec_X}\")\n\n    axis[1].imshow(NEW_MASS_WIDE,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","bdfb90e1":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(SOBEL_OM_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(SOBEL_NEW_MASS_WIDE,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","2ddfd493":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(SATO_OM_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(SATO_NEW_MASS_WIDE,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","b895409d":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(WHITE_OM_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(WHITE_NEW_MASS_WIDE,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","7fc36e91":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(MEIJERING_OM_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(MEIJERING_NEW_MASS_WIDE,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","3317a29b":"figure,axis = plt.subplots(2,2,figsize=(20,8))\n\naxis[0][0].imshow(OM_NUCLEUS_CLOSED,cmap=\"hot\")\naxis[0][0].axis(\"off\")\naxis[0][0].set_title(\"NUCLEUS\")\n\naxis[0][1].plot(OM_NUCLEUS_CLOSED.flatten(),color=\"red\")\naxis[0][1].axis(\"off\")\naxis[0][1].set_title(\"NUCLEUS PLOT\")\n\naxis[1][0].imshow(NEW_MASS_WIDE,cmap=\"hot\")\naxis[1][0].axis(\"off\")\naxis[1][0].set_title(\"NEW MASS\")\n\naxis[1][1].plot(NEW_MASS_WIDE.flatten(),color=\"green\")\naxis[1][1].axis(\"off\")\naxis[1][1].set_title(\"NEW MASS PLOT\")\n\nplt.tight_layout()\nplt.show()","e28f2b28":"figure,axis = plt.subplots(2,2,figsize=(20,8))\n\naxis[0][0].imshow(OM_PRIMARY_CENTER_CIRCLE,cmap=\"hot\")\naxis[0][0].axis(\"off\")\naxis[0][0].set_title(\"CENTER CIRCLE\")\n\naxis[0][1].plot(OM_PRIMARY_CENTER_CIRCLE.flatten(),color=\"red\")\naxis[0][1].axis(\"off\")\naxis[0][1].set_title(\"CENTER CIRCLE PLOT\")\n\naxis[1][0].imshow(NEW_MASS_WIDE,cmap=\"hot\")\naxis[1][0].axis(\"off\")\naxis[1][0].set_title(\"NEW MASS\")\n\naxis[1][1].plot(NEW_MASS_WIDE.flatten(),color=\"green\")\naxis[1][1].axis(\"off\")\naxis[1][1].set_title(\"NEW MASS PLOT\")\n\nplt.tight_layout()\nplt.show()","43928a01":"figure,axis = plt.subplots(2,2,figsize=(20,8))\n\naxis[0][0].imshow(OM_NUCLEUS_FAR,cmap=\"hot\")\naxis[0][0].axis(\"off\")\naxis[0][0].set_title(\"NUCLEUS FAR\")\n\naxis[0][1].plot(OM_NUCLEUS_FAR.flatten(),color=\"red\")\naxis[0][1].axis(\"off\")\naxis[0][1].set_title(\"NUCLEUS FAR PLOT\")\n\naxis[1][0].imshow(NEW_MASS_WIDE,cmap=\"hot\")\naxis[1][0].axis(\"off\")\naxis[1][0].set_title(\"NEW MASS\")\n\naxis[1][1].plot(NEW_MASS_WIDE.flatten(),color=\"green\")\naxis[1][1].axis(\"off\")\naxis[1][1].set_title(\"NEW MASS PLOT\")\n\nplt.tight_layout()\nplt.show()","8b72a8e1":"figure,axis = plt.subplots(2,2,figsize=(20,8))\n\naxis[0][0].imshow(OM_PRIMARY_IMAGE,cmap=\"hot\")\naxis[0][0].axis(\"off\")\naxis[0][0].set_title(\"ORIGINAL\")\n\naxis[0][1].plot(OM_PRIMARY_IMAGE.flatten(),color=\"red\")\naxis[0][1].axis(\"off\")\naxis[0][1].set_title(\"ORIGINAL PLOT\")\n\naxis[1][0].imshow(NEW_MASS_WIDE,cmap=\"hot\")\naxis[1][0].axis(\"off\")\naxis[1][0].set_title(\"NEW MASS\")\n\naxis[1][1].plot(NEW_MASS_WIDE.flatten(),color=\"green\")\naxis[1][1].axis(\"off\")\naxis[1][1].set_title(\"NEW MASS PLOT\")\n\nplt.tight_layout()\nplt.show()","5b4dadca":"CORNER_HARRIS_CENTER_CIRCLE = skimage.feature.corner_harris(OM_PRIMARY_CENTER_CIRCLE,k=70.8,eps=70,sigma=4)\nCORNER_HARRIS_NEW_MASS = skimage.feature.corner_harris(NEW_MASS_WIDE,k=70.8,eps=70,sigma=4)","7823bab9":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(CORNER_HARRIS_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(CORNER_HARRIS_NEW_MASS,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","8ac5ee89":"CORNER_K_HARRIS_CENTER_CIRCLE = skimage.feature.corner_kitchen_rosenfeld(OM_PRIMARY_CENTER_CIRCLE,mode=\"nearest\")\nCORNER_K_HARRIS_NEW_MASS = skimage.feature.corner_kitchen_rosenfeld(NEW_MASS_WIDE,mode=\"nearest\")","a2758f3c":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(1,2,figsize=(20,20))\n\n    axis[0].imshow(CORNER_K_HARRIS_CENTER_CIRCLE,cmap=spec_X)\n    axis[0].axis(\"off\")\n    axis[0].set_title(f\"CENTER CIRCLE - {spec_X}\")\n\n    axis[1].imshow(CORNER_K_HARRIS_NEW_MASS,cmap=spec_X)\n    axis[1].axis(\"off\")\n    axis[1].set_title(f\"NEW MASS - {spec_X}\")\n\n    plt.tight_layout()\n    plt.show()","414df454":"CORNER_FOER_HARRIS_CENTER_CIRCLE = skimage.feature.corner_foerstner(OM_PRIMARY_CENTER_CIRCLE,sigma=3.7)\nCORNER_FOER_HARRIS_NEW_MASS = skimage.feature.corner_foerstner(NEW_MASS_WIDE,sigma=3.7)","113a223f":"for spec_X in CMAP_LIST:\n    \n    figure,axis = plt.subplots(2,2,figsize=(20,8))\n\n    axis[0][0].imshow(CORNER_FOER_HARRIS_CENTER_CIRCLE[0],cmap=spec_X)\n    axis[0][0].axis(\"off\")\n    axis[0][0].set_title(\"CENTER CIRCLE\")\n\n    axis[0][1].imshow(CORNER_FOER_HARRIS_NEW_MASS[0],cmap=spec_X)\n    axis[0][1].axis(\"off\")\n    axis[0][1].set_title(\"NEW MASS\")\n\n    axis[1][0].imshow(CORNER_FOER_HARRIS_CENTER_CIRCLE[1],cmap=spec_X)\n    axis[1][0].axis(\"off\")\n    axis[1][0].set_title(\"CENTER CIRCLE\")\n\n    axis[1][1].imshow(CORNER_FOER_HARRIS_NEW_MASS[1],cmap=spec_X)\n    axis[1][1].axis(\"off\")\n    axis[1][1].set_title(\"NEW MASS\")\n\n    plt.tight_layout()\n    plt.show()","1ddbead5":"for spec_X in CMAP_LIST:\n    \n    plt.figure(figsize=(7,7))\n    plt.imshow(CORNER_FOER_HARRIS_CENTER_CIRCLE[1],cmap=spec_X)\n    plt.axis(\"off\")\n    plt.tight_layout()\n    plt.show()","0ea89aeb":"CANNY_CENTER_CIRCLE = skimage.feature.canny(OM_PRIMARY_CENTER_CIRCLE,sigma=2.9)\nCANNY_NEW_MASS = skimage.feature.canny(NEW_MASS_WIDE,sigma=2.9)","a9386398":"figure,axis = plt.subplots(1,2,figsize=(20,20))\n\naxis[0].imshow(CANNY_CENTER_CIRCLE,cmap=\"gray\")\naxis[0].axis(\"off\")\naxis[0].set_title(\"CENTER CIRCLE\")\n\naxis[1].imshow(CANNY_NEW_MASS,cmap=\"gray\")\naxis[1].axis(\"off\")\naxis[1].set_title(\"NEW MASS\")\n\nplt.tight_layout()\nplt.show()","dccbb695":"X_CENTER_CIRCLE_NEW_MASS = scipy.signal.correlate(OM_PRIMARY_CENTER_CIRCLE,NEW_MASS_WIDE,method='direct')","316a6450":"for spec_X in CMAP_LIST:\n    \n    plt.figure(figsize=(7,7))\n    plt.imshow(X_CENTER_CIRCLE_NEW_MASS,cmap=spec_X)\n    plt.axis(\"off\")\n    plt.tight_layout()\n    plt.show()","697c918f":"#### TRANSFORMATIONS","38ea664a":"### **ATTENTION**\n\n* CHECK PREVIOUS PART:\n\nhttps:\/\/www.kaggle.com\/brsdincer\/ngc1365-galaxy-observation-analysis-process","5edd4406":"# DATA PROCESS","550a8c1e":"# PACKAGES AND LIBRARIES","a41856ad":"#### WAVE PLOT AND OBSERVATIONS","dfc36435":"#### OVERVIEWS","dcdf825e":"#### PATH","922ffbb3":"#### IMAGE DATA","a59aea7b":"#### READING"}}