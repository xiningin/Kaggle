{"cell_type":{"aa456bdb":"code","ca0ecdd0":"code","637fbdf8":"code","63acd27b":"code","839e5347":"code","46a06dbb":"code","bc30a20f":"code","872b5212":"code","733b3800":"code","3acf3068":"code","391b7a1c":"code","a6cc66f1":"code","12b10dd6":"code","2c1b7ba8":"code","6c5f2c34":"code","41f27760":"code","b6125cfe":"code","b99c4d27":"code","10916809":"code","6c68bcdf":"code","d8fea0c2":"code","4d38a350":"code","85b7f3d3":"code","66a5864b":"code","72752e58":"code","fe970c60":"code","89034ae1":"code","3c9f0201":"code","69721588":"code","3179949e":"code","71d7ec1d":"code","32fd2939":"code","3bfdaf45":"code","e0e37f37":"code","1366296b":"code","04097193":"code","681afc1d":"code","e04a70ab":"markdown","35f75811":"markdown","00cd746a":"markdown","5022a0fa":"markdown","48e6cdba":"markdown","c69c0a29":"markdown","8743277e":"markdown","aad79778":"markdown","62eab792":"markdown","b0583703":"markdown","2a05d90c":"markdown","b03175e1":"markdown","65819be1":"markdown","72e9ffba":"markdown","bbe5496d":"markdown"},"source":{"aa456bdb":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ca0ecdd0":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go","637fbdf8":"url='..\/input\/cristiano-ronald-vs-lionel-messi-weekly-updated\/cristiano_vs_messi.csv'\ndf=pd.read_csv(url)","63acd27b":"df.info()","839e5347":"df.head(30)","46a06dbb":"df.columns","bc30a20f":"df['comp']=df['comp'].ffill()\ndf['date']=df['date'].ffill()\ndf['round']=df['round'].ffill()\ndf['venue']=df['venue'].ffill()\ndf['opp']=df['opp'].ffill()\ndf.info()","872b5212":"df['min']=df['min'].apply(lambda x:x.replace(\"'\",''))\ndf['min']=df['min'].apply(lambda x:x.replace(\"+\",''))\ndf['min'].unique()","733b3800":"df.info()","3acf3068":"df['min']=pd.to_numeric(df['min'])\ndf['time_class']=df['min'].apply(lambda x:'first_half' if x<=45 else ( 'secound_half' if 45<x<=90 else 'extra_time'))\ndf.head(10)","391b7a1c":"df['assist']=df['assisted'].fillna(0)\ndf['solo']=df['assist'].apply(lambda x:'solo' if x==0 else 'assisted')\ndf.head()","a6cc66f1":"from datetime import date\ndf['date']=pd.to_datetime(df['date'])\n#== \nL = ['year', 'month', 'day', 'dayofweek', 'dayofyear', 'weekofyear', 'quarter']\ndf = df.join(pd.concat((getattr(df['date'].dt, i).rename(i) for i in L), axis=1))","12b10dd6":"df['dayofweek']=pd.to_numeric(df['dayofweek'])\ndf['dayofweek']=df['dayofweek'].apply(lambda x:x+1)\ndf['dayofweek'].unique()\ndf['goal']=df['goal']=1","2c1b7ba8":"df.head()","6c5f2c34":"df['player'].value_counts()","41f27760":"\ndf_ronaldo=df.loc[df['player']=='ronaldo']\ndf_messi=df.loc[df['player']=='messi']\n#===== \nronaldo_solo=df_ronaldo[df_ronaldo['solo']=='solo'] \nronaldo_assisted=df_ronaldo[df_ronaldo['solo']=='assisted'] \nslices=[len(ronaldo_solo),len(ronaldo_assisted)]\nlabels=['solo','assisted']\n#==== \nmessi_solo=df_messi[df_messi['solo']=='solo'] \nmessi_assisted=df_messi[df_messi['solo']=='assisted'] \nslices1=[len(messi_solo),len(messi_assisted)]\nlabels1=['solo','assisted']\n#===\nfig, axes = plt.subplots(1, 2, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi\/Solo&assisted')\naxes[0].pie(slices,labels=labels,startangle=90,shadow=1,explode=(0,0.4),autopct='%1.2f%%',colors=['#808080','#F2EBED']);\naxes[0].set_title('Cristiano Ronaldo')\naxes[1].pie(slices1,labels=labels1,startangle=90,shadow=1,explode=(0,0.4),autopct='%1.2f%%',colors=['#7868DF','#DF6870']);\naxes[1].set_title('Lionel Messi');","b6125cfe":"r_goal=pd.DataFrame(df_ronaldo['date'].value_counts().sort_values(ascending=False))\nr_goal['nick']=r_goal['date'].apply(lambda x:'hatrick' if x==3 else ('haul' if x==4 else ('glut' if x==5 else ('brace' if x ==2 else 'single goal'))))\nr_goal.head()","b99c4d27":"m_goal=pd.DataFrame(df_messi['date'].value_counts().sort_values(ascending=False))\nm_goal['nick']=m_goal['date'].apply(lambda x:'hatrick' if x==3 else ('haul' if x==4 else ('glut' if x==5 else ('brace' if x ==2 else 'single goal'))))\nr_goal['player']='ronaldo'\nm_goal['player']='messi'\n#=== \nall_goal = r_goal.append(m_goal).reset_index()\nall_goal.rename(columns={'date':'goal_count'},inplace=True)","10916809":"fig = px.box(all_goal, x=\"player\", y='goal_count')\nfig.show()","6c68bcdf":"plt.figure(figsize=(10,7))\nsns.countplot(data=all_goal,x='nick',hue='player',palette='magma').set_title('Cristano Vs Messi (Goals in one Match)');","d8fea0c2":"plt.figure(figsize=(10,7))\nsns.countplot(data=df,x='player',hue='venue',palette=\"Paired\").set_title('Cristano Vs Messi (Home & Away)');","4d38a350":"plt.figure(figsize=(25,7))\nsns.countplot(data=df,x='type',hue='player',palette=\"hls\").set_title('Cristano Vs Messi (Goal Type)');","85b7f3d3":"plt.figure(figsize=(25,7))\nsns.countplot(data=df,x='pos',hue='player',palette=\"cubehelix\").set_title('Cristano Vs Messi (Goalposition)');","66a5864b":"r_assist =df_ronaldo['assisted'].value_counts()\nr_assist = r_assist[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nr_assist_vis = sns.barplot(r_assist.index, r_assist.values, alpha=0.8,palette='winter');\nplt.title('Most Player assisted to cristiano',fontsize=15);\nplt.ylabel('assists', fontsize=12);\nplt.xlabel('player name', fontsize=12);\nr_assist_vis.set_xticklabels(rotation=30,labels=r_assist.index,fontsize=15);\nplt.show();","72752e58":"m_assist =df_messi['assisted'].value_counts()\nm_assist = m_assist[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nm_assist_vis = sns.barplot(m_assist.index, m_assist.values, alpha=0.8,palette=\"coolwarm\");\nplt.title('Most Player assisted to messi',fontsize=15);\nplt.ylabel('assists', fontsize=12);\nplt.xlabel('player name', fontsize=12);\nm_assist_vis.set_xticklabels(rotation=30,labels=m_assist.index,fontsize=15);\nplt.show();","fe970c60":"r_op =df_ronaldo['opp'].value_counts()\nr_op = r_op[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nr_op_vis = sns.barplot(r_op.index, r_op.values, alpha=0.8,palette=\"dark\");\nplt.title('cristiano favourite opponents',fontsize=15);\nplt.ylabel('Goals', fontsize=12);\nplt.xlabel('opponet', fontsize=12);\nr_op_vis.set_xticklabels(rotation=30,labels=r_op.index,fontsize=15);\nplt.show();","89034ae1":"m_op =df_messi['opp'].value_counts()\nm_op = m_op[:10]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(20,6));\nm_op_vis = sns.barplot(m_op.index, m_op.values, alpha=0.8,palette=\"Spectral\");\nplt.title('messi favourite opponents',fontsize=15);\nplt.ylabel('Goals', fontsize=12);\nplt.xlabel('opponet', fontsize=12);\nm_op_vis.set_xticklabels(rotation=30,labels=m_op.index,fontsize=15);\nplt.show();","3c9f0201":"min_ronaldo1=df_ronaldo.groupby(['min']).size().to_frame('count').reset_index()\nmin_ronaldo=min_ronaldo1.sort_values(by='count', ascending=False)[:10]\nmin_ronaldo=min_ronaldo.reset_index()\nmin_ronaldo=min_ronaldo.rename(columns={'min':('Ronald_min')})\nmin_ronaldo=min_ronaldo.drop(columns=['index'])\n#=====\n#=====\nmin_messi=df_messi.groupby(['min']).size().to_frame('count').reset_index()\nmin_messi=min_messi.sort_values(by='count', ascending=False)[:10]\nmin_messi=min_messi.reset_index()\nmin_messi=min_messi.rename(columns={'min':('messi_min')})\nmin_messi=min_messi.drop(columns='index')\n#==== \nmin_ronaldo","69721588":"min_messi","3179949e":"min_cr7=df_ronaldo[df_ronaldo['min']<90]\nmin_values=min_cr7['min'].values\n#========\nmin_messi=df_messi[df_messi['min']<90]\nmin_values_messi=min_messi['min'].values\nmin_values_messi\n#=== \n#figure,axes = plt.subplots(1,2,figsize=(10,5))\nplt.figure(figsize=(15,5))\nplt.hist(min_values,histtype='bar',bins=45,density=True,label='Ronaldo',alpha=0.5);\nplt.hist(min_values_messi,bins=45,histtype='bar',density=True,label='Messi',alpha=0.5);\nplt.legend(loc='upper left')","71d7ec1d":"plt.figure(figsize=(14,7))\nsns.kdeplot(min_values, shade = True)\nsns.kdeplot(min_values_messi, shade = True)\nplt.legend(['Cristiano','Messi'])\nplt.xlabel('Home Factor')","32fd2939":"df_stack = pd.pivot_table(df, values='goal', index=['player'],\n                    columns=['time_class'], aggfunc=np.sum).reset_index()\ndf_stack","3bfdaf45":"sns.set_style(\"darkgrid\")\nfig, axes = plt.subplots(1, 3, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi\/TimeClass')\n\nsns.barplot(ax=axes[0], x=df_stack.player, y=df_stack.first_half,palette='icefire')\naxes[0].set_title('First Half')\nsns.barplot(ax=axes[1], x=df_stack.player, y=df_stack.secound_half,palette='icefire')\naxes[1].set_title('Secound Half')\nsns.barplot(ax=axes[2], x=df_stack.player, y=df_stack.extra_time,palette='icefire')\naxes[2].set_title('Extra Time')","e0e37f37":"df['comp'].unique()","1366296b":"df_champ=df.loc[df['comp']=='Champions League']\n#==== \ndf_champ['player'].value_counts()","04097193":"from IPython.core.display import HTML\nHTML('''<div class=\"flourish-embed flourish-bar-chart-race\" data-src=\"visualisation\/4882308\" data-url=\"https:\/\/flo.uri.sh\/visualisation\/4882308\/embed\"><script src=\"https:\/\/public.flourish.studio\/resources\/embed.js\"><\/script><\/div>''')","681afc1d":"fig, axes = plt.subplots(1, 2, figsize=(15, 5), sharey=False)\nfig.suptitle('Cristiano Vs Messi')\n\nsns.countplot(ax=axes[0],data=df,x='dayofweek',hue='player',palette=\"hls\")\naxes[0].set_title('DayofWeek')\nsns.countplot(ax=axes[1],data=df,x='quarter',hue='player',palette=\"hls\")\naxes[1].set_title('quarter')\n","e04a70ab":"![](https:\/\/cdn.kickoff.com\/cms2\/image_manager\/uploads\/News\/683736\/7\/default.jpg)","35f75811":"## Goal Type","00cd746a":"# UEFA","5022a0fa":"# Conclusion \n\n* Ronaldo Score more goals than Messi \n* Ronaldo solo goal percentage is 3% higher than Messi\n* Ronaldo score single goals more than Messi but Messi score more brace and hatricks\n* Cristiano scored more in away matches but Messi scored more in home\n* Cristiano Ronaldo Score more headers, long-distance, counter-attack goal and penalties more than Messi \n* Lionel Messi Scored many goals in many positions in the squad contrary to Cristiano\n* Ronaldo Scored more in UEFA\n* Messi and Cristiano Scored more against the same team which is Sevilla \n* Messi Scored more in the last minutes and extra times \n* Messi started the season better than Ronaldo but Ronaldo end it better ","48e6cdba":"![](https:\/\/e00-marca.uecdn.es\/assets\/multimedia\/imagenes\/2019\/12\/08\/15758326013710.jpg)","c69c0a29":"# Scoring time","8743277e":"## Best Friends to Cristiano and Messi ","aad79778":"## Goals in one Match","62eab792":"# import","b0583703":"# fill nan goals values \n### if player score more than one goal on game only min and type filled ","2a05d90c":"# Home & Away goals","b03175e1":"# Goals Race for each season - 2020","65819be1":"# Goals","72e9ffba":"# Manipulate","bbe5496d":"## favourite opponent"}}