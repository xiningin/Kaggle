{"cell_type":{"da735cb7":"code","c957bf87":"code","f3da7d94":"code","1ffe9a13":"code","10d7e55b":"code","020e0c3b":"code","5497074e":"code","304b17c3":"code","12538ada":"code","e997b9c2":"code","c727d124":"code","66dfa740":"code","7bf2362f":"code","8a988fbf":"code","41c22441":"code","462a5882":"code","8699ab30":"code","678332f6":"code","723924ca":"code","7e99e47f":"code","a0344fad":"code","bc26bb41":"code","e3751adf":"code","5cbe7843":"code","261c7522":"code","fbf75eb6":"code","c5c0baec":"code","1313e8ca":"code","6b470f20":"code","f314ce68":"code","4e2f1e4c":"code","20a98c94":"code","e49f666c":"code","0f8e4630":"code","201d11e0":"code","65cf25be":"code","14e5398e":"code","8fd6675f":"code","eb35db1f":"code","1b530bfd":"code","76658db4":"code","26320ecd":"code","9222d0ac":"code","0a862ab4":"code","eeaaaa70":"code","4a3e89ba":"code","de9901fd":"code","2ec6d0f1":"code","00ec88f2":"code","ae9a534e":"code","c500787e":"code","68c1b390":"code","e9bbe41f":"code","1aac354b":"code","60877916":"code","3d494e39":"code","1ed72841":"code","844e6c01":"code","e160dfbc":"code","7f264b42":"code","b1774114":"code","127be084":"code","f98709cc":"code","45bafa1e":"code","504863e9":"code","cae7596d":"code","67dc804b":"code","c8615f43":"code","9fa21419":"code","b83c95c7":"code","f2de81fe":"code","ea7c1bbc":"code","6fb47b09":"code","a096917e":"code","bd03d439":"markdown","57c41f5e":"markdown","6d4cbaff":"markdown","5df7cf31":"markdown","3f828166":"markdown","ac454bf9":"markdown","790b1fbc":"markdown","c888ad5b":"markdown","015b0e32":"markdown","fd6b8e03":"markdown","1ccbdeed":"markdown","305da25e":"markdown","ff69f570":"markdown","be94e924":"markdown","dc556884":"markdown","2b28bc39":"markdown","3e670339":"markdown","9f7de246":"markdown","92c9e1f0":"markdown","118d5310":"markdown","4c53e2bc":"markdown","6f8c6be7":"markdown","3a7afe5a":"markdown","fc5f7d7d":"markdown","eb42d3c4":"markdown","3d7717ba":"markdown","35c1aa03":"markdown","52296ea8":"markdown","6b6f2d18":"markdown"},"source":{"da735cb7":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","c957bf87":"X_full = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/train.csv', index_col='Id')\nX_test = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/test.csv', index_col='Id')","f3da7d94":"X_full.head()","1ffe9a13":"X_test.head()","10d7e55b":"# X_full.info()","020e0c3b":"#X_test.info()","5497074e":"X_full.describe()","304b17c3":"X_test.describe()","12538ada":"X_full.describe(exclude=np.number)","e997b9c2":"X_test.describe(exclude=np.number)","c727d124":"import seaborn as sns","66dfa740":"X_full.corr(method='spearman').SalePrice.sort_values(ascending=False)","7bf2362f":"X_full.OverallQual.hist()","8a988fbf":"sns.pairplot(X_full[['SalePrice', 'OverallQual', 'GrLivArea', 'GarageCars', \n                    'YearBuilt', 'GarageArea', 'FullBath','TotalBsmtSF']])","41c22441":"sns.pairplot(X_test[['OverallQual', 'GrLivArea', 'GarageCars', \n                    'YearBuilt', 'GarageArea', 'FullBath','TotalBsmtSF']])","462a5882":"sns.boxplot(x=X_full.SalePrice)","8699ab30":"X_full.SalePrice.describe()","678332f6":"SalePrice_outlier_conditional = X_full.SalePrice < 450000\n\nX_full_without_outliers = X_full[SalePrice_outlier_conditional ]","723924ca":"sns.boxplot(x=X_full_without_outliers.SalePrice)","7e99e47f":"sns.boxplot(x=X_full_without_outliers.OverallQual)","a0344fad":"OverallQual_Q1 = X_full.OverallQual.quantile(0.25)\nOverallQual_Q3 = X_full.OverallQual.quantile(0.75)\nOverallQual_IQR = OverallQual_Q3-OverallQual_Q1\nOverallQual_outlier_conditional =  ((X_full.OverallQual > OverallQual_Q1 - 1.5*OverallQual_IQR) & (X_full.OverallQual < OverallQual_Q3 + 1.5*OverallQual_IQR))","bc26bb41":"X_full_without_outliers = X_full_without_outliers[OverallQual_outlier_conditional]","e3751adf":"sns.boxplot(x=X_full_without_outliers.OverallQual)","5cbe7843":"sns.boxplot(x=X_full.GrLivArea)","261c7522":"sns.boxplot(x=X_full_without_outliers.GrLivArea)","fbf75eb6":"sns.boxplot(x=X_full.GarageCars)","c5c0baec":"sns.boxplot(x=X_full_without_outliers.GarageCars)","1313e8ca":"GarageCars_Q1 = X_full.GarageCars.quantile(0.25)\nGarageCars_Q3 = X_full.GarageCars.quantile(0.75)\nGarageCars_IQR = GarageCars_Q3-GarageCars_Q1\nGarageCars_outlier_conditional =  ((X_full.GarageCars > GarageCars_Q1 - 1.5*GarageCars_IQR) & (X_full.GarageCars < GarageCars_Q3 + 1.5*GarageCars_IQR))","6b470f20":"X_full_without_outliers = X_full_without_outliers[GarageCars_outlier_conditional]","f314ce68":"sns.boxplot(x=X_full_without_outliers.GarageCars)","4e2f1e4c":"sns.boxplot(x=X_full_without_outliers.YearBuilt)","20a98c94":"sns.boxplot(x=X_full_without_outliers.GarageArea)","e49f666c":"sns.boxplot(x=X_full_without_outliers.FullBath)","0f8e4630":"sns.boxplot(x=X_full_without_outliers.TotalBsmtSF)","201d11e0":"sns.histplot(X_full_without_outliers.SalePrice)","65cf25be":"ordinal_features = ['ExterCond', 'BsmtQual','BsmtCond', 'HeatingQC', 'KitchenQual',\n                    'FireplaceQu','GarageQual', 'GarageCond','PoolQC']\nnominal_features= list(set(X_full_without_outliers.select_dtypes(include='object').columns.values) - set(ordinal_features))","14e5398e":"X = X_full_without_outliers.drop(['SalePrice'], axis=1)\nfeature_names = X_full_without_outliers.columns.values\ny = X_full_without_outliers.SalePrice\n\nX_nums = X.select_dtypes(exclude='object')\nX_cats = X.select_dtypes(include='object')\nX_cats_names = X_cats.columns.values\n\nX_test_nums = X_test.select_dtypes(exclude='object')\nX_test_cats = X_test.select_dtypes(include='object')\nX_test_cats_names = X_test_cats.columns.values","8fd6675f":"from sklearn.impute import SimpleImputer","eb35db1f":"imp_mean = SimpleImputer(strategy='median')\nimp_most = SimpleImputer(strategy='most_frequent')","1b530bfd":"X_cats = imp_most.fit_transform(X_cats)\nX_nums = imp_mean.fit_transform(X_nums)\nX_test_cats = imp_most.transform(X_test_cats)\nX_test_nums = imp_mean.transform(X_test_nums)","76658db4":"from sklearn.preprocessing import OneHotEncoder, OrdinalEncoder","26320ecd":"one_hot_enc = OneHotEncoder(handle_unknown='ignore')\nordinal_enc = OrdinalEncoder(handle_unknown='ignore')","9222d0ac":"X_cats_nominal = one_hot_enc.fit_transform(pd.DataFrame(X_cats, columns=[X_cats_names])[nominal_features])\nX_test_cats_nominal = one_hot_enc.transform(pd.DataFrame(X_test_cats, columns=[X_cats_names])[nominal_features])","0a862ab4":"X_cats_ordinal = ordinal_enc.fit_transform(pd.DataFrame(X_cats, columns=[X_cats_names])[ordinal_features])\nX_test_cats_ordinal = ordinal_enc.transform(pd.DataFrame(X_test_cats, columns=[X_cats_names])[ordinal_features])","eeaaaa70":"X_cats_nominal.shape","4a3e89ba":"X_cats_ordinal.shape","de9901fd":"X_nums.shape","2ec6d0f1":"from scipy.sparse import hstack","00ec88f2":"X_transformed = hstack((X_cats_nominal,X_cats_ordinal, X_nums))\nX_test_transformed = hstack((X_test_cats_nominal,X_test_cats_ordinal, X_test_nums))","ae9a534e":"from sklearn.preprocessing import MaxAbsScaler","c500787e":"max_scaler = MaxAbsScaler()","68c1b390":"X_transformed_max = max_scaler.fit_transform(X_transformed)\nX_test_transformed_max = max_scaler.transform(X_test_transformed)","e9bbe41f":"from sklearn import preprocessing","1aac354b":"std_scaler = preprocessing.StandardScaler(with_mean = False)","60877916":"std_scaler.fit(X_transformed_max)\nX_transformed_stand = std_scaler.transform(X_transformed_max)\nX_test_transformed_stand = std_scaler.transform(X_test_transformed_max)","3d494e39":"X_transformed_stand.shape","1ed72841":"from sklearn.model_selection import train_test_split","844e6c01":"X_train, X_val, y_train, y_val = train_test_split(X_transformed_stand, y, train_size=0.8, random_state=3)","e160dfbc":"from xgboost import XGBRegressor","7f264b42":"house_prices_model = XGBRegressor(n_estimators=1000, learning_rate=0.05, n_jobs=4)","b1774114":"house_prices_model.fit(X_train,y_train)","127be084":"val_predictions = house_prices_model.predict(X_val)","f98709cc":"from sklearn.metrics import mean_squared_error, mean_absolute_error","45bafa1e":"mean_squared_error(y_val, val_predictions, squared=False)","504863e9":"mean_absolute_error(y_val, val_predictions)","cae7596d":"pd.DataFrame({'y_val': y_val,\n            'val_pred': val_predictions,\n             'abs_err': abs(val_predictions-y_val)}).describe()","67dc804b":"house_prices_model.feature_importances_","c8615f43":"# feature_importance = pd.DataFrame({'feature_name': feature_names,\n#                       'feature_importance': house_prices_model.feature_importances_})\n","9fa21419":"# feature_importance.sort_values(by='feature_importance', ascending=False)","b83c95c7":"# from sklearn import tree\n# import graphviz\n\n# tree_graph = tree.export_graphviz(house_prices_model, out_file=None)\n# graphviz.Source(tree_graph)","f2de81fe":"test_predictions = house_prices_model.predict(X_test_transformed_stand)","ea7c1bbc":"test_predictions","6fb47b09":"output = pd.DataFrame({'Id': X_test.index,\n                      'SalePrice': test_predictions})\noutput.set_index('Id', inplace=True)\noutput.to_csv('submission.csv')","a096917e":"output.describe()","bd03d439":"# Pr\u00e9-processamento dos Dados\n","57c41f5e":"1. Histograma: \u00e9 uma representa\u00e7\u00e3o da fun\u00e7\u00e3o de distribui\u00e7\u00e3o de probabilidades. (b.h=probabilidade|f(x).x=p(x))\n1. Gr\u00e1fico de frequ\u00eancia absoluta ou relativa: indica a distribui\u00e7\u00e3o das vari\u00e1veis.\n1. Rela\u00e7\u00e3o entre vari\u00e1vies\n\nhttps:\/\/seaborn.pydata.org\/generated\/seaborn.distplot.html\n\nhttps:\/\/seaborn.pydata.org\/tutorial\/distributions.html\n\nhttps:\/\/seaborn.pydata.org\/tutorial\/relational.html\n","6d4cbaff":"## Padroniza\u00e7\u00e3o dos dados\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#standardization-or-mean-removal-and-variance-scaling","5df7cf31":"Quartis e percentis s\u00e3o medidas relativas pois s\u00e3o calculadas em rela\u00e7\u00e3o \u00e0 mediana da amostra. \nP25 = Q1; P50 = Q2; PN=maior que N% dos valores observados.\n\n**Box plots:** s\u00e3o gr\u00e1ficos que apresentam de forma visual as medidas de posi\u00e7\u00e3o relativa.","3f828166":"## An\u00e1lise Explorat\u00f3ria de\u00a0Dados","ac454bf9":"## An\u00e1lise de Correla\u00e7\u00e3o\n\nPermite verificar o grau de rela\u00e7\u00e3o entre vari\u00e1veis.\n\n**Pearson:** indica o grau de rela\u00e7\u00e3o linear entre vari\u00e1veis quantitativas sim\u00e9tricas. >0 indica associa\u00e7\u00e3o positiva, ou seja as duas vari\u00e1veis crescem juntas; <0 indica associa\u00e7\u00e3o negativa, na medida que uma cresca a outra decresce. ~0 indica aus\u00eancia de rela\u00e7\u00e3o linear.\n\n**Spearman:** avalia rela\u00e7\u00f5es monot\u00f4nicas lineares ou n\u00e3o entre vari\u00e1veis cont\u00ednuas ou ordinais. \u00c9 calculada aplicando a medida do coeficiente de Pearson aplicado aos valores da ordem de duas vari\u00e1veis. N\u00e3o \u00e9 sens\u00edvel a assimetrias na distribui\u00e7\u00e3o.\n\nRodrigues, Francisco. An\u00e1lise Explorat\u00f3ria de Dados: Correla\u00e7\u00e3o de Pearson e Spearman. Dispon\u00edvel em: https:\/\/youtu.be\/qqRUsY2Fu0A\n\nhttps:\/\/towardsdatascience.com\/clearly-explained-pearson-v-s-spearman-correlation-coefficient-ada2f473b8","790b1fbc":"Os objetivos dessa descri\u00e7\u00e3o dos dados s\u00e3o:\n1. Investigar o comportamento das vari\u00e1veis\n1. Examinar a rela\u00e7\u00e3o entre vari\u00e1veis\n1. Enfatizar a ordena\u00e7\u00e3o de categorias\n1. Compreender a estrutura de organiza\u00e7\u00e3o das categorias\n1. Explorar a evolu\u00e7\u00e3o cronol\u00f3gica de uma vari\u00e1vel\n1. Revelar padr\u00f5es espaciais nos dados\n1. Descrever a conex\u00e3o entre categorias","c888ad5b":"## An\u00e1lise de Outliers (Medidas de posi\u00e7\u00e3o relativa)","015b0e32":"## Treinando modelo","fd6b8e03":"## Normaliza\u00e7\u00e3o dos dados\nhttps:\/\/scikit-learn.org\/stable\/auto_examples\/preprocessing\/plot_all_scaling.html#","1ccbdeed":"## Substitui\u00e7\u00e3o de valores ausentes\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#imputation-of-missing-values","305da25e":"Baseline: \n\n1. RMSE- 41206.010178103206\n1. MAE- 24401.085616438355","ff69f570":"## Resumo descritivo","be94e924":"Pularemos a etapa de sele\u00e7\u00e3o do modelo nessa aula.","dc556884":"## Validando o modelo","2b28bc39":"Caracter\u00edsticas de uma distribui\u00e7\u00e3o normal\n* M\u00e1dia: 0\n* Vari\u00e2ncia: 1","3e670339":"## Separando dados de treino e valida\u00e7\u00e3o\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.model_selection.train_test_split.html","9f7de246":"## Import\u00e2ncia de vari\u00e1veis\n\nhttps:\/\/towardsdatascience.com\/explaining-feature-importance-by-example-of-a-random-forest-d9166011959e","92c9e1f0":"|![Different parts of a boxplot - Towards Data Science](https:\/\/miro.medium.com\/max\/18000\/1*2c21SkzJMf3frPXPAR_gZA.png)|\n|:--:| \n| *Different parts of a boxplot - [Towards Data Science](https:\/\/towardsdatascience.com\/understanding-boxplots-5e2df7bcbd51)*|","118d5310":"## Generalizando para os dados de teste","4c53e2bc":"1. Exclus\u00e3o ou Substitui\u00e7\u00e3o\n1. One-hot Encoding\n1. Ordinal Encoding\n1. Label Encoding","6f8c6be7":"A an\u00e1lise explorat\u00f3ria de dados nos permite caracterizar os dados por meio da an\u00e1lise de medidas estat\u00edsticas descritivas extra\u00eddas dos dados.\u00a0\n\nEsse \u00e9 um processo importante da modelagem de dados, pois as descobertas feitas a respeito dos dados ir\u00e3o nortear as escolhas sobre os modelos preditivos com os quais iremos trabalhar.","3a7afe5a":"## Criando arquivo de submiss\u00e3o","fc5f7d7d":"## Tratando vari\u00e1veis categ\u00f3ricas\n\nhttps:\/\/scikit-learn.org\/stable\/modules\/preprocessing.html#encoding-categorical-features\n\nhttps:\/\/contrib.scikit-learn.org\/category_encoders\/","eb42d3c4":"1. **Moda:** O valor mais frequente. Normalmente utilizada para vari\u00e1veis nominais.\n1. **M\u00e9dia aritm\u00e9tica simples:** soma dos valores divida pelo n\u00famero de elementos.\n1. **Mediana:** \u00e9 o valor central do conjunto de valores quando ordenados de forma crescente. Em caso de n\u00famero par, ser\u00e1 a m\u00e9dia dos dois valores centrais da amostra.\n1. **Vari\u00e2ncia:** \u00e9 a dist\u00e2ncia quadr\u00e1tica m\u00e9dia em rela\u00e7\u00e3o \u00e0 m\u00e9dia. E[(X-E(X))\u00b2]\n1. **Desvio-padr\u00e3o:** \u00e9 uma medida de dispers\u00e3o em torno da m\u00e9dia da vari\u00e1vel. Medida pela raiz quadrada da vari\u00e2ncia.","3d7717ba":"Queremos eliminar as observa\u00e7\u00f5es que estejam fora dos limites m\u00e1ximo e m\u00ednimo do boxplot, ou seja se o valor \u00e9 menor que (Q1 - 1.5IQR) ou maior que (Q3 + 1.5IQR).","35c1aa03":"**Nota:** existem m\u00f3dulos como sweetviz ou pandas-profiling que podem auxiliar nessa an\u00e1lise.","52296ea8":"O arquivo exportado ser\u00e1 submetido \u00e0 plataforma.","6b6f2d18":"## Carregando os dados"}}