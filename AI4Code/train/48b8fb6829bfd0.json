{"cell_type":{"23a9ae9c":"code","2582622d":"code","7a64a81f":"code","a73ba6b2":"code","484c6a37":"code","addcc5ac":"code","5b7ab58f":"code","146f596b":"code","d9fa231c":"code","377ab26d":"code","66dc154a":"code","cc0c5330":"code","88430aad":"code","fced60dd":"markdown","3fe48273":"markdown","9ef3ca5f":"markdown"},"source":{"23a9ae9c":"import os, sys\nimport pandas as pd, numpy as np\nimport matplotlib.pyplot as plt\nfrom glob import glob","2582622d":"all_files_df=pd.DataFrame({'path': glob('..\/input\/newlaser\/Laser_Data\/*\/laser_data\/*.csv*')})\nall_files_df['date']=pd.to_datetime(all_files_df['path'].map(lambda x: x.split('\/')[-3]), \n                                    yearfirst=True)\nall_files_df['file_id']=all_files_df['path'].map(lambda x: x.split('\/')[-1].split('.')[0])\nall_files_df['timecode']=pd.to_datetime(\n    all_files_df['file_id'].map(lambda x: x.split('_')[1]),\n    format='%Y-%m-%d-%H-%M-%S')\nall_files_df['idx']=all_files_df['file_id'].map(lambda x: int(x.split('_')[-1]))\nall_files_df['size']=all_files_df['path'].map(lambda x: os.stat(x).st_size\/1024)\nall_files_df = all_files_df[all_files_df['size']>50]\nall_files_df.sort_values('timecode', inplace=True)\nall_files_df.head(3)","7a64a81f":"all_files_df['size'].plot.hist(100)","a73ba6b2":"all_files_df.plot(x='timecode', y='idx')","484c6a37":"def read_block(in_paths, as_mat_list=False):\n    df_list = []\n    for c_path in in_paths:\n        in_df = pd.read_csv(c_path,header=None,index_col=0)\n        df_list+=[in_df]\n    if as_mat_list:\n        return [x.values for x in df_list]\n    else:\n        return pd.concat(df_list)","addcc5ac":"first_day_df = all_files_df[all_files_df['date']==all_files_df['date'].iloc[0]]\nprint(first_day_df.shape[0], 'scans')\ntest_df=read_block(first_day_df['path'].values)\nfirst_day_df.head(3)","5b7ab58f":"plt.plot(test_df.index)","146f596b":"fig, ax1 = plt.subplots(1, 1, figsize=(20, 20))\nax1.matshow(test_df.values)\nax1.set_aspect(0.01)","d9fa231c":"first_index_df = all_files_df[all_files_df['idx']==all_files_df['idx'].iloc[0]].copy()\nprint(first_index_df.shape[0], 'scans')\ntest_df=read_block(first_index_df['path'].values)\nfirst_index_df.head(3)","377ab26d":"plt.plot(test_df.index)","66dc154a":"fig, ax1 = plt.subplots(1, 1, figsize=(20, 20))\nax1.matshow(test_df.values)\nax1.set_aspect(0.01)","cc0c5330":"test_mat_list=read_block(first_index_df['path'].values, as_mat_list=True)","88430aad":"from skimage.util.montage import montage2d\nmin_stack_height = np.min([x.shape[0] for x in test_mat_list])\nprint(min_stack_height)\nstack_scans = np.stack([x[:min_stack_height] for x in test_mat_list], 0)\nfig, ax1 = plt.subplots(1, 1, figsize=(20, 20))\nax1.imshow(montage2d(stack_scans))","fced60dd":"# Read scans as stacked array","3fe48273":"# Read the first scan from every time-step","9ef3ca5f":"# Read all scans from one day\n"}}