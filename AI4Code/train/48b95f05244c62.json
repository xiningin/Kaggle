{"cell_type":{"216d5f76":"code","8135182d":"code","1b64962f":"code","5035b46e":"code","fad3b3a4":"code","efa99dce":"code","2e1ef41d":"code","f828a23f":"code","0a71c186":"code","236e9c52":"code","d90442c8":"code","f7f6aff9":"code","f205a39a":"code","638ce2ee":"code","b988a9bf":"code","c1a12f23":"code","33ee209b":"code","fcd7a079":"code","7e342489":"code","82a8b761":"code","3a4df7e3":"code","bbdcaf3b":"code","daaa5540":"code","cc597801":"code","beaee690":"code","d4a2cb95":"code","857d674b":"code","bc296358":"code","c16cb81d":"code","1db23cc2":"code","73aef212":"code","b748da3b":"code","163ce4c1":"code","2183cc5d":"code","fbf17905":"code","2b33493c":"code","af7ad864":"code","52ad0e82":"code","256e713a":"code","a3d49ad1":"code","2f63bb94":"code","556ce362":"code","194b4e23":"code","f3a6d2c9":"code","4dc476bf":"code","053076ef":"code","248165d0":"code","db18908e":"code","218bc833":"code","44e7d668":"code","f5745a4c":"code","96244039":"code","5a64fb84":"code","8af5d901":"code","4d9431f0":"code","cc10a4f7":"code","dd87473b":"code","9752723b":"code","2ba7c4fc":"code","44f6a655":"code","25b49d96":"code","8a0a58bb":"code","fbb77c66":"markdown","eb692d1d":"markdown","43153912":"markdown","7150c99b":"markdown","0f8d4deb":"markdown","19c59bf7":"markdown","750481c4":"markdown","2f9aac41":"markdown","956ef627":"markdown","5fe6893a":"markdown","2fba65ba":"markdown","62667e7f":"markdown","2c2f4a9b":"markdown","e06ee672":"markdown","e24669fc":"markdown","0ef4c7d0":"markdown","8f050c40":"markdown","544aab50":"markdown","b5a9d588":"markdown","791118ae":"markdown","3f136c54":"markdown","a460f1d7":"markdown","1133e7a9":"markdown","b221062f":"markdown","3d5e2ce3":"markdown","f54e2ae0":"markdown","753e9a8d":"markdown","363329ab":"markdown","3d346ba7":"markdown","9660fdba":"markdown","d5acd727":"markdown","8b04c135":"markdown","a746dcfb":"markdown","e1320295":"markdown","5b74fafb":"markdown","e760761f":"markdown","25860a91":"markdown","45230b12":"markdown","d5ceaac2":"markdown","b6874d96":"markdown","63b532a5":"markdown","72b48621":"markdown","37737669":"markdown","7f836c21":"markdown","a772c892":"markdown","2ed05f34":"markdown","19ef00ce":"markdown","b37c9426":"markdown"},"source":{"216d5f76":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go","8135182d":"data = pd.read_csv('..\/input\/retail-analytics\/RETAIL_ANALYTICS.csv', encoding = 'latin1')","1b64962f":"data.columns = ['Month', 'Enquiry_Date', 'Enquiry_Id', 'Allocation_Status', 'Status',\n                   'State', 'City', 'Pincode', 'Type_of_Project', 'No_of_Windows',\n                   'Source', 'Zone', 'Dealer_Name', 'First_Action-Call_made',\n                   'Date_DD\/MM\/YY', 'First-Action-Call-Status',\n                   'Date of Appointment (DD\/MM\/YY)', 'Second Action-Customer Meeting',\n       'Date-DD\/MM\/YY.1', 'Second-Action-Call-Status',\n       'Third-Action-Quote-Given', 'Date-DD\/MM\/YY.2', 'Q-Val.(Rs.Lac)',\n       'Quote-QTY', 'Order-(Recd\\Lost)', 'Date-DD\/MM\/YY.3',\n       'Order-Val.(Rs.Lac)', 'Order_QTY',\n       'Quote_ID(as_per_match_to_CCC_Records)',\n       'Remarks-Brand-and-value-if-lost-to-UPVC',\n       'Second-Action-Call-Status.1', 'Remarks', 'Price_Per_Sft', 'Benefits',\n       'Aesthetics', 'Reduce_Street_Noise', 'Low_Maintenance', 'Monsoon_Proof','Better_Lighting', 'Reduce_AC_Energy_Cost']\n","5035b46e":"print('\\nData\\n')\nprint(data.head())\nprint(\"-------------------------------------------------------------------------------------------------\")\nprint(\"\\nData shape\\n\")\nprint(data.shape)\nprint(\"-------------------------------------------------------------------------------------------------\")\nprint(\"\\nColumns in data\\n\")\nprint(data.columns)\nprint(\"-------------------------------------------------------------------------------------------------\")\nprint(\"\\nDescribing the data\\n\")\nprint(data.describe())\nprint(\"-------------------------------------------------------------------------------------------------\")\nprint(\"\\nInformation about the data\\n\")\nprint(data.info)\nprint(\"-------------------------------------------------------------------------------------------------\")\nprint(\"\\nCorrelation in data\\n\")\nprint(data.corr())","fad3b3a4":"data.select_dtypes(include=('int','float'))","efa99dce":"data.select_dtypes(include='object')","2e1ef41d":"fig = go.Figure(go.Bar(x=data.Month.value_counts().index,y=data.Month.value_counts().values))\nfig.update_layout(\ntitle = 'Month',\nxaxis_title = 'Month',\nyaxis_title = 'Count')\nfig.show()","f828a23f":"fig = go.Figure(go.Bar(x=data['Allocation_Status'].value_counts().index,y=data['Allocation_Status'].value_counts().values))\nfig.update_layout(\ntitle = 'Allocation Status',\nxaxis_title = 'Allocation Status',\nyaxis_title = 'Count')\nfig.show()","0a71c186":"fig = go.Figure(go.Bar(x=data.Status.value_counts().index,y=data.Status.value_counts().values))\nfig.update_layout(\n    title=\"Enquiry Status\",\n    xaxis_title=\"Enquiry Status\",\n    yaxis_title=\"Count\",)\nfig.show()","236e9c52":"fig = go.Figure(go.Bar(x=data.City.value_counts().index,y=data.City.value_counts().values))\nfig.update_layout(\ntitle = 'City',\nxaxis_title = 'City',\nyaxis_title = 'Count')\n# data.City.value_counts().plot(kind='bar')\n# plt.title('Cities dealt by PVC')\n# plt.ylabel('Counts')\n# plt.xlabel('City')","d90442c8":"fig = go.Figure(go.Pie(labels=data['Type_of_Project'].value_counts().index,values=data['Type_of_Project'].value_counts().values))\nfig.update_layout(title=\"Type of Project\")\nfig.show()\n# data['Type_of_Project'].value_counts().plot(kind='pie')\n# plt.title('Type of projects')\n","f7f6aff9":"fig = go.Figure(go.Pie(labels=data['Source'].value_counts().index,values=data['Source'].value_counts().values))\nfig.update_layout(title='Sources of Enquiries')\nfig.show()\n# data['Source'].value_counts().plot(kind='bar')\n# plt.title('Source of enquiry')\n# plt.ylabel('Count of enquiries')\n# plt.xlabel('Source of enquiry')","f205a39a":"fig = go.Figure(go.Bar(x = data['Dealer_Name'].value_counts().index,y=data['Dealer_Name'].value_counts().values))\nfig.update_layout(\ntitle = 'Dealer Name',\nxaxis_title = \"Dealer's Name\",\nyaxis_title = \"Count\")\nfig.show()\n# data['Dealer_Name'].value_counts().plot(kind='bar')\n# plt.ylabel('Count of enquiries')\n# plt.xlabel('Dealers')","638ce2ee":"type(data[data['Dealer_Name']=='pearlson'].Dealer_Name)","b988a9bf":"def dealer_name(x):\n    if x == 'pearlson':\n        return 'Pearlson'\n    else:\n        return x\ndata['Dealer_Name'] = data['Dealer_Name'].apply(dealer_name)","c1a12f23":"data['Dealer_Name'] = data['Dealer_Name'].apply(dealer_name)","33ee209b":"data['Dealer_Name'].value_counts()","fcd7a079":"fig = go.Figure(go.Bar(x = data['Dealer_Name'].value_counts().index,y=data['Dealer_Name'].value_counts().values))\nfig.update_layout(\ntitle = 'Dealer Name',\nxaxis_title = \"Dealer's Name\",\nyaxis_title = \"Count\")\nfig.show()","7e342489":"pd.crosstab(data['Dealer_Name'],data.Zone).iloc[:,0]\n# .plot(kind='bar')\n\n# plt.ylabel('Count of enquiries')\n# plt.xlabel('Dealers')\n# plt.title('Zone wise dealers')","82a8b761":"fig = go.Figure()\nfor i in range(len(pd.crosstab(data['Dealer_Name'],data.Zone).columns)):\n    fig.add_trace(go.Bar(go.Bar(x=pd.crosstab(data['Dealer_Name'],data.Zone).index,y=pd.crosstab(data['Dealer_Name'],data.Zone).iloc[:,i],name=pd.crosstab(data['Dealer_Name'],data.Zone).columns[i])))\nfig.show()","3a4df7e3":"fig = go.Figure(go.Bar(x = data['First-Action-Call-Status'].value_counts().index,y=data['First-Action-Call-Status'].value_counts()))\nfig.update_layout(\ntitle=\"First Action Call Status\",\nxaxis_title = \"Status of the 1st call with customer\",\nyaxis_title= \"Count of enquiries\")\nfig.show()","bbdcaf3b":"# data['Second-Action-Call-Status'].value_counts().plot(kind='bar')\n# plt.title('Status after the Second call')\n# plt.ylabel('Count of enquiries')\n# plt.xlabel('Second discussion status')","daaa5540":"pd.set_option('display.max_rows', None)","cc597801":"data['First-Action-Call-Status'].value_counts()","beaee690":"data['Second-Action-Call-Status'].value_counts()","d4a2cb95":"fig = go.Figure(go.Bar(x=data['Second-Action-Call-Status'].value_counts().index,y=data['Second-Action-Call-Status'].value_counts().values))\nfig.update_layout(\ntitle = \"Second Action call Status\",\nxaxis_title = \"Status of the 2nd call with customer\",\nyaxis_title = \"Count of enquiries\")\nfig.show()","857d674b":"def third_action_quote(x):\n    if x == 'yes':\n        return 'YES'\n    else:\n        return x\n","bc296358":"data['Third-Action-Quote-Given'] = data['Third-Action-Quote-Given'].apply(third_action_quote)","c16cb81d":"fig = go.Figure()\nfor i in range(len(pd.crosstab(data['Third-Action-Quote-Given'],data.Status).columns)):\n    fig.add_trace(go.Bar(go.Bar(x=pd.crosstab(data['Third-Action-Quote-Given'],data.Status).index,y=pd.crosstab(data['Third-Action-Quote-Given'],data.Status).iloc[:,i],name=pd.crosstab(data['Third-Action-Quote-Given'],data.Status).columns[i])))\nfig.show()","1db23cc2":"fig = go.Figure()\nfor i in range(len(pd.crosstab(data[data['Status']=='Lost'].Status.count(),data['Order-(Recd\\Lost)']).columns)):\n    fig.add_trace(go.Bar(go.Bar(x=pd.crosstab(data[data['Status']=='Lost'].Status.count(),data['Order-(Recd\\Lost)']).index,y=pd.crosstab(data[data['Status']=='Lost'].Status.count(),data['Order-(Recd\\Lost)']).iloc[:,i],name=pd.crosstab(data[data['Status']=='Lost'].Status.count(),data['Order-(Recd\\Lost)']).columns[i])))\nfig.update_layout(\ntitle = \"Reasons for Non Conversion rate\",\nxaxis_title = \"Non Conversion rate Segments\",\nyaxis_title = \" Counts\")\nfig.show()","73aef212":"data['Order-(Recd\\Lost)'].value_counts()","b748da3b":"data[data['Status']=='Lost'].Status.count()","163ce4c1":"data.Remarks.value_counts()","2183cc5d":"data.isna().sum()","fbf17905":"#data['Order_QTY'].fillna(0, inplace=True)","2b33493c":"#data.isna().sum()","af7ad864":"#pd.set_option('max_colwidth',200)\n#data['Order_QTY'].sum()","52ad0e82":"\"\"\"\ndata['Order_QTY'].value_counts().plot(kind='bar')\nplt.title('Ordered quantity by lost enquiries')\nplt.xlabel('Quantity ordered')\nplt.ylabel('Count of enquiries')\n\"\"\"\n","256e713a":"#data['Order_QTY'].value_counts()","a3d49ad1":"#data_new = data[data['City'] == 'CHENNAI'] ","2f63bb94":"data_new = data.copy()","556ce362":"data_new.shape","194b4e23":"data_new['Allocation_Status'].value_counts()","f3a6d2c9":"data_new.shape","4dc476bf":"data_new.Status.value_counts()","053076ef":"data_new","248165d0":"data1 = data_new.copy()","db18908e":"data1.shape","218bc833":"\nfor col in data1.columns:\n    if data1[col].isnull().sum():\n        print(\"Missing percentage in \",col,\" is \",round((data1[col].isnull().sum())*100\/data1.shape[0],2))","44e7d668":"NA_col = data1.isnull().sum()\nNA_col = NA_col[NA_col.values >(0.5*len(data1))]\nplt.figure(figsize=(20,4))\nNA_col.plot(kind='bar')\nplt.title('List of Columns & NA counts where NA values are more than 50%')\nplt.show()","f5745a4c":"Observation:\n1. One can see visually missing value's >50% ","96244039":"data_new.drop(['Month','Enquiry_Id','Enquiry_Date','No_of_Windows','State','Pincode','City',\n               'First_Action-Call_made','Date_DD\/MM\/YY','Date of Appointment (DD\/MM\/YY)',\n               'Date-DD\/MM\/YY.2','Quote_ID(as_per_match_to_CCC_Records)','Date-DD\/MM\/YY.3',\n               'Second-Action-Call-Status.1','Aesthetics','Reduce_Street_Noise','Low_Maintenance',\n               'Remarks-Brand-and-value-if-lost-to-UPVC',\n               'Monsoon_Proof','Better_Lighting', 'Reduce_AC_Energy_Cost'],axis ='columns',inplace=True)","5a64fb84":"data_new.describe()","8af5d901":"%matplotlib inline\nsns.boxplot(data_new[\"Q-Val.(Rs.Lac)\"])\nplt.show","4d9431f0":"%matplotlib inline\nsns.boxplot(data_new[\"Order-Val.(Rs.Lac)\"])\nplt.show","cc10a4f7":"%matplotlib inline\nsns.boxplot(data_new[\"Price_Per_Sft\"])\nplt.show","dd87473b":"data_new = data.copy()","9752723b":"data_new.shape","2ba7c4fc":"data_new['Dealer_Name'].value_counts()","44f6a655":"data_new[data_new['Dealer_Name']=='Sunbird']['Status'].value_counts()","25b49d96":"pd.crosstab(data['Dealer_Name'],data.Status)","8a0a58bb":"fig = go.Figure()\nfor i in range(len(pd.crosstab(data['Dealer_Name'],data.Status).columns)):\n    fig.add_trace(go.Bar(go.Bar(x=pd.crosstab(data['Dealer_Name'],data.Status).index,y=pd.crosstab(data['Dealer_Name'],data.Status).iloc[:,i],name=pd.crosstab(data['Dealer_Name'],data.Status).columns[i])))\nfig.update_layout(\ntitle = \"Dealer enquiries Status\",\nxaxis_title = \"Dealer\",\nyaxis_title = \"Count of enquiries materialised and immaterialised\")\nfig.show()","fbb77c66":"## DEALER ANALYSIS","eb692d1d":"### Droping redundant columns\/attributes","43153912":"## Observation:\n### 1. Maximum number of enquiries did not achieve convertion rates because of price issue(103 out of 171), budget constraint(26 out of 171) and design feasibility(23 out of 171)\n","7150c99b":"### Plot 12: Third discussion status","0f8d4deb":"## Observation:\n### 1. As per the plot, PVC manufaturer has 9 dealers. Here Pearlson and pearlson are the same dealer with change in case.  \n### 2. PVC manufacturer has got maximum enquiries through direct contact","19c59bf7":"## Plot 2 - Allocation Status ","750481c4":"## Observation:\n### 1. After the discussion with the customers for the second time, quote has to be given to the interested ones(189 out of 191). One customer requested for further discussion.\n### 2. From the observation, after the first call, there has been 192 customers, whose appointment has been fixed. But, int he current plot\/data we have only 191 records. this is due to missing of data for the status fo Second action call for the enquiry ID \"EC01071653533\"","2f9aac41":"### Listing down the Numerical columns in the Data","956ef627":"Note: \n- Though we can drop missing values > 50% ,one should know whether is it mandatory to drop the column or not, if dropped must explain why?\n- Rather than dropping let's see what actually each column say's .\n- we are not dropping order_qty,order_values they are the prime factor in business there should be valid reason while dropping a column","5fe6893a":"### Changing the dealer name 'pearlson'","2fba65ba":"### Plot 3: Enquiry Status","62667e7f":"## Observations:\n### 1. Dealers have handledd more enquiries than Direct bussinesses.","2c2f4a9b":"### Plot 13: Reasons for non coversion rate","e06ee672":"## Observation:\n### 1. Out of 189 customers who has gone through third discussion, 53 converted to business.","e24669fc":"UNTIL WE UNDERSTAND DATA WE CAN'T IMPUTE MISSING VALUE'S.","0ef4c7d0":"1.\tMean, Median, Mode &  2. Backward Imputation 3. Forward Imputation 4. Subjective Imputation.","8f050c40":"### Plot 9: Dealer | Zonal wise count of enquiries","544aab50":"### Plot: 17 Outlier Analysis for Price per square feet","b5a9d588":"### Plot 10: First action call status","791118ae":"## Plot 1 - Month wise total enquiries","3f136c54":"## Observation:\n### 1. After the first enquiry call few of the enquiries are going for second discussion and others are not willing to go further  due to reasons like budget constraint,feasibility of the design, time frame constraint and some of them are just awareness calls.","a460f1d7":"### Handling null values","1133e7a9":"## Observation:\n### 1. PVC manufacturer is handling two kinds of projects.One is Renovation and the other is New Construction type.\n### 2. Maximum number of enquiries are happened for Renovation.","b221062f":"### Plot 11: Second action call status","3d5e2ce3":"### Plot 5: Type of Projects","f54e2ae0":"DATA['Benefits'].fillna((data['product_code'].mode()), inplace=True)...I.E CATEGORIAL DATA WE DO MODE","753e9a8d":"### Listing down the Categorical columns in the Data","363329ab":"Observation:\nThough we can see oulier's, without predominent knowledge we can't drop them or impute.","3d346ba7":"### Plot 14: Percentage of missing values in a column","9660fdba":"## RETAIL ANALYTICS -  EDA","d5acd727":"## Observation:\n### Conversion rate is not achieved after the third discussion because of the following reasons\n- Delivery time not possible\n- Aluminium\n- Wooden\n- Product issue","8b04c135":"### Various types of imputation","a746dcfb":"### Plot 7: Dealer wise count of enquiries","e1320295":"## Observation:\n### 1. PVC manufacture has dealers in Chennai,Kanchipuram,Vellore,Krishnagiri,Villupuram,Pondicherry,Cuddalore.\n### 2. Among all Chennai recieved maximum enquiries.","5b74fafb":"### Percentage of missing values in a column","e760761f":"## Observations:\n#### 1. Maximum enquiries has happened in the month of July 2016\n#### 2. Minimum enquiries has happened in the month of October 2016","25860a91":"### Plot 6: Source of Enquiry","45230b12":"1. The ID Columns can be removed.\n2. State and First Action call made variables have only one observation in them. They can be removed.\n3. Second Action Call Status column is empty and can be removed\n4. Benefits and its associated Dummies can be removed because it has a lot of missing values(almost 80%).\n5. Pincode is treated as numerical variable here. It should be categorical. It has a lot of pincodes(103). If we convert it into categorial variable it will have 103 categories and 103 dummy columns need to be created which is undesirable. So, Pincode should be dropped.","d5ceaac2":"### Plot: 16 Outlier Analysis for \"Order-Val.(Rs.Lac)\"","b6874d96":"DATA['Q-Val.(Rs.Lac)'].fillna((data['Q-Val.(Rs.Lac)'].median), inplace=True)...I.E numerical  DATA WE DO median which has outlier's","63b532a5":"### Plot: 15 Outlier Analysis for \"Q-Val.(Rs.Lac)\"","72b48621":"## Observation:\n### 1. Internet,Friends,Just dial,Current user are four sources through which the manufacturer got the enquiries.\n### 2. More enquiries are through Internet.\n### 3. Enquiries through Just dial are very low in number.","37737669":"DATA['Q-Val.(Rs.Lac)'].fillna((data['Q-Val.(Rs.Lac)'].mean), inplace=True)...I.E numerical  DATA WE DO mean which ha no outlier's","7f836c21":"### Same dealer wise plot after editting 'pearlson'","a772c892":"## Inference:\n### Only few of the enquiries are materialised.\n#### *Note:*\n#### *The dataset is imbalanced. For machine learning approach, we need to balance the dataset to avoid bias.*","2ed05f34":"## Observation:\n### 1. Direct has most number of enquiries.\n### 2. Dealer ITP has lost all of them.\n### 3. Dealer sunbird is doing a good job in business conversion.\n\n## Inference:\n### 1. Company must analyse the gaps present between the direct and the dealers approach.\n### 2. ITP, Rajtechnis and Winfratech dealers must be closely reviewed and action has to be taken.\n### 3. Further study has to be done in picking the important variables and loss prediction has to be done through machine learning models.","19ef00ce":"### Plot 4: Cities dealt by PVC","b37c9426":"Observation:\nAll the dealeres are dealing with the enquiries and dealer Sunbird is dealing with Chehhai and Kanchipuram zones."}}