{"cell_type":{"298316f7":"code","725ae97e":"code","09d7af5d":"code","c6b865f7":"code","f6072f45":"code","56685ac0":"code","d93487b1":"code","459e14d1":"code","9a9f9055":"code","0b65f41b":"code","5d95ec6c":"code","c2b6afe3":"code","ec50226d":"code","874052e7":"code","ec46c48d":"code","c1a3e780":"code","368cce80":"markdown","03977908":"markdown","8f9018a3":"markdown","f3cb15c6":"markdown","14d768a2":"markdown","4f93479e":"markdown","ffc48292":"markdown","5d8ada79":"markdown","430370dd":"markdown","cb70819b":"markdown","16134178":"markdown"},"source":{"298316f7":"### Primary necessary imports and reading the data.\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\ndf_raw = pd.read_csv(\"..\/input\/cervical-cancer-risk-classification\/kag_risk_factors_cervical_cancer.csv\")","725ae97e":"df_raw.info() ### get info about the data","09d7af5d":"df_nan = df_raw.replace('?', np.nan) ","c6b865f7":"df_nan.isnull().sum() ### check for null values in every column.","f6072f45":"df = df_nan #temporary save","56685ac0":"df1 = df.apply(pd.to_numeric)","d93487b1":"df1.info()","459e14d1":"####filling NaN values with median for continous variables and 0\/1 for discrete variables.\n\ndf['Number of sexual partners'] = df['Number of sexual partners'].fillna(df['Number of sexual partners'].median())\ndf['First sexual intercourse'] = df['First sexual intercourse'].fillna(df['First sexual intercourse'].median())\ndf['Num of pregnancies'] = df['Num of pregnancies'].fillna(df['Num of pregnancies'].median())\ndf['Smokes'] = df['Smokes'].fillna(1)\ndf['Smokes (years)'] = df['Smokes (years)'].fillna(df['Smokes (years)'].median())\ndf['Smokes (packs\/year)'] = df['Smokes (packs\/year)'].fillna(df['Smokes (packs\/year)'].median())\ndf['Hormonal Contraceptives'] = df['Hormonal Contraceptives'].fillna(1)\ndf['Hormonal Contraceptives (years)'] = df['Hormonal Contraceptives (years)'].fillna(df['Hormonal Contraceptives (years)'].median())\ndf['IUD'] = df['IUD'].fillna(0)\ndf['IUD (years)'] = df['IUD (years)'].fillna(0)\ndf['STDs'] = df['STDs'].fillna(1)\ndf['STDs (number)'] = df['STDs (number)'].fillna(df['STDs (number)'].median())\ndf['STDs:condylomatosis'] = df['STDs:condylomatosis'].fillna(df['STDs:condylomatosis'].median())\ndf['STDs:cervical condylomatosis'] = df['STDs:cervical condylomatosis'].fillna(df['STDs:cervical condylomatosis'].median())\ndf['STDs:vaginal condylomatosis'] = df['STDs:vaginal condylomatosis'].fillna(df['STDs:vaginal condylomatosis'].median())\ndf['STDs:vulvo-perineal condylomatosis'] = df['STDs:vulvo-perineal condylomatosis'].fillna(df['STDs:vulvo-perineal condylomatosis'].median())\ndf['STDs:syphilis'] = df['STDs:syphilis'].fillna(df['STDs:syphilis'].median())\ndf['STDs:pelvic inflammatory disease'] = df['STDs:pelvic inflammatory disease'].fillna(df['STDs:pelvic inflammatory disease'].median())\ndf['STDs:genital herpes'] = df['STDs:genital herpes'].fillna(df['STDs:genital herpes'].median())\ndf['STDs:molluscum contagiosum'] = df['STDs:molluscum contagiosum'].fillna(df['STDs:molluscum contagiosum'].median())\ndf['STDs:AIDS'] = df['STDs:AIDS'].fillna(df['STDs:AIDS'].median())\ndf['STDs:HIV'] = df['STDs:HIV'].fillna(df['STDs:HIV'].median())\ndf['STDs:Hepatitis B'] = df['STDs:Hepatitis B'].fillna(df['STDs:Hepatitis B'].median())\ndf['STDs:HPV'] = df['STDs:HPV'].fillna(df['STDs:HPV'].median())\ndf['STDs: Time since first diagnosis'] = df['STDs: Time since first diagnosis'].fillna(df['STDs: Time since first diagnosis'].median())\ndf['STDs: Time since last diagnosis'] = df['STDs: Time since last diagnosis'].fillna(df['STDs: Time since last diagnosis'].median())","9a9f9055":"####filling NaN values with dummy values for categorical variables.\n\ndf = pd.get_dummies(data=df, columns=['Smokes','Hormonal Contraceptives','IUD','STDs',\n                                      'Dx:Cancer','Dx:CIN','Dx:HPV','Dx','Hinselmann','Citology','Schiller'])","0b65f41b":"df.isnull().sum()","5d95ec6c":"df_final = df #temporary save","c2b6afe3":"df.describe()","ec50226d":"from sklearn.preprocessing import StandardScaler\nfrom sklearn.decomposition import PCA\n\nX = df.drop('Biopsy', axis=1)\ny = df[\"Biopsy\"]\n\nX = StandardScaler().fit_transform(X)  # Standardizing the values in X.\n\npca = PCA(0.80)  # Changes in variance percentage can be made here.\nprin_comp = pca.fit_transform(X)\nprincipalDf = pd.DataFrame(data = prin_comp)\n\nprint(principalDf)\n\nprint('\\nEigenvalues \\n%s' %pca.explained_variance_)\nprint('Eigenvectors \\n%s' %pca.components_)","874052e7":"def scree_plot():\n    from matplotlib.pyplot import figure, show\n    from matplotlib.ticker import MaxNLocator\n\n    ax = figure().gca()\n    ax.plot(pca.explained_variance_)\n    ax.xaxis.set_major_locator(MaxNLocator(integer=True))\n    plt.xlabel('Principal Component')\n    plt.ylabel('Eigenvalue')\n    plt.axhline(y=1, linewidth=1, color='r', alpha=0.5)\n    plt.title('Scree Plot of PCA: Component Eigenvalues')\n    show()\n\nscree_plot()","ec46c48d":"finalDf = pd.concat([principalDf, df[[\"Biopsy\"]]], axis = 1)\nfinalDf","c1a3e780":"pca2 = PCA(n_components = 2)  # Changes can be made here.\nprin_comp2 = pca2.fit_transform(X)\nprincipalDf = pd.DataFrame(data = prin_comp2\n             , columns = ['PC 1', 'PC 2'])\n\nfinalDf2 = pd.concat([principalDf2, df[['Biopsy']]], axis = 1)\n\nimport matplotlib.pyplot as plt\n\nfig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 1', fontsize = 15)\nax.set_ylabel('Principal Component 2', fontsize = 15)\nax.set_title('2 component PCA', fontsize = 20)\ntargets = [0, 1]\ncolors = ['r', 'g']\nfor target, color in zip(targets,colors):\n    indicesToKeep = finalDf2['Biopsy'] == target\n    ax.scatter(finalDf2.loc[indicesToKeep, 'PC 1']\n               , finalDf2.loc[indicesToKeep, 'PC 2']\n               , c = color\n               , s = 50)\nax.legend(targets)\nax.grid()","368cce80":"Importing the PCA algorithm to reduce the number of features for the classification. You can play with the variance percentage to get a fair idea of where the Eigen values are going for different variance percentage. After a lot of computation I chose to stay with 0.8 because after that the Eigen values were going below 1 which in our case is useless, so drop the components after this threshold.","03977908":"This notebook will be covering some data cleaning followed by managing missing or deliberately introduced NaN values where the values for some features were missing. Finally the PCA will be implemented to know how many variables can this data be downed to so that minimum loss of variance is observed.","8f9018a3":"Now, we also have categorical type variables in our dataset. So we will be filling them with dummy values.","f3cb15c6":"It's high time that we remove all the NaN values we introduced earlier and add something more robust in place of them. So for the continous variables we will filling in with the median of that particular column and for the discrete variables we will be using either 0 or 1.","14d768a2":"Now concatenate your Prinicipal Component dataframe with the Biopsy (the target variable) column of our original dataset.","4f93479e":"This is where you can plot the PCA components to know where the Eigen values are being mapped to each Principal Component.","ffc48292":"As we can see from the info above, there are few columns which were of 'object' type. So we will convert them to numeric type. Converting doesn't hurt hurt us as long as the columns are integer type or float type.","5d8ada79":"Now check for any null or NaN values. As we can see there are no anomalies with the work done so far so we can move ahead.","430370dd":"This is just a plot to show that it is really not worthy to reduce this dataset to 2 or perhaps 3 variables because there will be a lot of loss of variance and hence the essence of original data would be lost.","cb70819b":"Seems like we are having some missing values which we will replace by Numpy's NaN for now.","16134178":"Check for the info again. Now you will notice all the columns are either integer type or float type unlike previously where we also had object type variables."}}