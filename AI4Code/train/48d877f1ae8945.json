{"cell_type":{"c7f3eadb":"code","a5a2294d":"code","3b160a5e":"code","471f7780":"code","4d013c79":"code","d769b320":"code","425dea3a":"code","80fae8fa":"code","e2869ef3":"code","2e1af2b5":"code","efe90d27":"code","79bf1a0a":"code","00c027b4":"code","da3a40ed":"code","26162ba0":"code","55e3e247":"code","cbef9702":"code","b3fd187d":"code","5bb9f529":"code","92a02fc0":"code","bf2399ad":"code","b6ed27f9":"code","267a5a53":"code","eb86e8f4":"code","14fdef75":"code","bb0fdb37":"code","858d2f9b":"code","23fb87df":"code","0357dd13":"markdown","27a2497a":"markdown","fd32ed96":"markdown","4241e3f8":"markdown","b1fe4bb6":"markdown","78997c84":"markdown","254e7313":"markdown","e61bd0b5":"markdown","ba410014":"markdown","7a9dfcae":"markdown","f7deeb95":"markdown","2ebf4ffd":"markdown","78e2b0d0":"markdown","cd12f22e":"markdown","00326cea":"markdown","61489ae1":"markdown","5f70ea11":"markdown","1de8852c":"markdown","816e9099":"markdown","a3260fd2":"markdown","2796f371":"markdown","019f7b27":"markdown","e2a61c16":"markdown","6803da1a":"markdown","e181ce3c":"markdown","4d1e2642":"markdown"},"source":{"c7f3eadb":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns \n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression,Lasso,Ridge\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import r2_score\n\nimport warnings\nwarnings.filterwarnings('ignore')","a5a2294d":"data = pd.read_csv('..\/input\/used-car-dataset-ford-and-mercedes\/merc.csv')","3b160a5e":"# lets check the shape of data\ndata.shape","471f7780":"# checking first five rows of dataset\ndata.head()","4d013c79":"# checking for missing values \ndata.isnull().sum()","d769b320":"# summary statistics \ndata.describe()","425dea3a":"plt.figure(figsize=(10, 10))\nsns.heatmap(data.corr(), annot=True, cmap='plasma')\nplt.show()","80fae8fa":"sns.set(style=\"whitegrid\")\nplt.figure(figsize=(20,10))\ntotal = float(len(data))\nax = sns.countplot(x=\"model\", data=data)\nplt.xticks(rotation=90)\nplt.title(\"Count Plot For Mercedes Models\", fontsize=20)\nfor p in ax.patches:\n    percentage = '{:.1f}%'.format(100 * p.get_height()\/total)\n    x = p.get_x() + p.get_width() \/ 2.\n    y = p.get_height()\n    ax.annotate(percentage, (x, y),ha='center',va='bottom')\nplt.show()","e2869ef3":"plt.figure(figsize=(20, 10))\nfig = sns.boxplot(x='year', y=\"price\", data=data)\nplt.xticks(rotation=90)\nplt.show()","2e1af2b5":"data[data['year'] == 1970]","efe90d27":"data.drop(12072,axis=0,inplace=True)","79bf1a0a":"# Plot Transmission vs Price\nplt.figure(figsize=(12, 8))\nsns.catplot(y='price',x='transmission',data= data.sort_values('price',ascending=False),kind=\"boxen\",height=6, aspect=3)\nplt.show()","00c027b4":"data[data['transmission'] == 'Other']","da3a40ed":"plt.figure(figsize=(12, 8))\nfig = sns.boxplot(x='fuelType', y=\"price\", data=data.sort_values('price',ascending=False))\nplt.show()","26162ba0":"cols = ['mileage', 'tax', 'mpg','engineSize']\n\nfont = {'family': 'serif',\n        'color':  'darkred',\n        'weight': 'normal',\n        'size': 16,\n        }\nfig,axes = plt.subplots(2,2,figsize=(25,15),sharey=True)\nfig.subplots_adjust(wspace=0.1, hspace=0.3)\nfig.suptitle('Scatter Plot Of Continous Variables vs Price',fontsize = 20, fontdict=font)\nfig.subplots_adjust(top=0.95)\n\naxes = axes.ravel()\n\nfor i,col in enumerate(cols):\n    #using log transformation\n    x = data[col]\n    y = data['price'].apply(np.log)\n    sns.scatterplot(x, y ,ax=axes[i])","55e3e247":"# lets check the distribution of target variable - price\nf,ax = plt.subplots(1, sharex=True,figsize=(15,6))\nmean_price = data['price'].mean()\nmedian_price = data['price'].median()\nmode_price = data['price'].mode().values[0]\n\nsns.distplot(data['price'],ax = ax)\nax.axvline(mean_price, color='r', linestyle='--', label=\"Mean\")\nax.axvline(median_price, color='g', linestyle='-', label=\"Median\")\nax.axvline(mode_price, color='b', linestyle='-', label=\"Mode\")\n\nax.legend()\nplt.xlim()\nplt.show()","cbef9702":"# dropping 1 percent of the data ie. Outlier values.\ndata = data.sort_values('price',ascending = False).iloc[int(len(data) * 0.01):]","b3fd187d":"plt.figure(figsize=(15,6))\nsns.distplot(data['price'])\nplt.show()","5bb9f529":"data.dtypes","92a02fc0":"# Using get_dummies where data are not in any order and LabelEncoder when data is in order.\n\ncategorical_col = ['model','transmission','fuelType']\ndummies = pd.get_dummies(data[categorical_col])\n\n# removing dummy trap variables\ndummies.drop(['model_230','transmission_Other','fuelType_Other'],axis=1,inplace=True)","bf2399ad":"# concat data and dummies df\ndata = pd.concat([data,dummies],axis=1)\n\n# drop the original categorical columns\ndata.drop(categorical_col,axis=1,inplace=True)","b6ed27f9":"# lets create a feature age = current year - year\ncurrent_year = 2021\ndata['Age'] = current_year - data['year']\n# drop year\ndata.drop('year',axis=1,inplace=True)","267a5a53":"data.shape","eb86e8f4":"data.head()","14fdef75":"# Separate Dependent and Independent Variables\nX = data.drop('price',axis=1)\ny = data['price']","bb0fdb37":"# Train-Test Split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2, random_state = 50)","858d2f9b":"# Models\nmodels=[LinearRegression(),RandomForestRegressor(random_state=50)]\nmodel_names=['LinearRegression','RandomForestRegressor']\nscore = []\ndictionary = {}\nfor model in range(len(models)):\n    reg = models[model]\n    reg.fit(X_train,y_train)\n    y_pred = reg.predict(X_test)\n    score.append(r2_score(y_pred,y_test))\n     \ndictionary = {'Model Names':model_names,'r2 Score':score}\n# Put the scores in a data frame.\nscore_df = pd.DataFrame(dictionary)","23fb87df":"score_df","0357dd13":"### **Loading Dataset**","27a2497a":"### **Model Building**","fd32ed96":"##### Random Forest Performed Best.","4241e3f8":"* Majority of cars having price around 15000-30000 pounds.\n* There are very minimum cars having price between 50000 to 160000 pound.\n* We can see that mean price is greater than median of price, also long tail of distribution is longer on right hand side as compared to left hand side which shows that distribution is positively skewed.\n* We can transform it to represent a normal distribution.Lets try to remove some outliers and see if that helps here.","b1fe4bb6":"* model : Model of car\n* year : registration year\n* price : car price in pound\n* Transmission : Type of gear\n* mileage : distance used\n* fuelType : Fuel type\n* tax : tax\n* mpg : Miles per gallon (1 galon = 3,78541178 liters)\n* engine size : Size of engine (liters)","78997c84":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nDistribution of Target variable - Price\n<\/div>","254e7313":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nAnalysis of Price and FuelType\n<\/div>","e61bd0b5":"##### Cleary Mercedes C Class is most common model followed by A Class.","ba410014":"# **Mercedes Price Prediction**","7a9dfcae":"##### In year 1970, mean of price is too high and it only contains one value(outlier) so I am dropping that value from original data.","f7deeb95":"##### So Now, the distribution appears close to normal.","2ebf4ffd":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nCorrelation Analysis\n<\/div>","78e2b0d0":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nAnalysis of Price and Transmission\n<\/div>","cd12f22e":"### **Data Description**","00326cea":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nAnalysis of Price and Year\n<\/div>","61489ae1":"##### Mileage,engineSize and mpg has a strong association with the price.","5f70ea11":"### **Objective-**\n##### Our goal is to build a model that will allow us to predict the price of the Mercedes Car.","1de8852c":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nAnalysis of Models\n<\/div>","816e9099":"### **Exploratory Data Analysis(EDA)**","a3260fd2":"##### Price of newest models is high compared to old models.","2796f371":"<div style=\"color:red;\n           display:fill;\n           font-size:130%;\n           font-family:Argentina;\n           letter-spacing:0.5px\">\nAnalysis of Price and Continuous Variables\n<\/div>","019f7b27":"##### It is clear from the above figure that the Petrol cars are relatively more costly than the rest because it contains some high range values.","e2a61c16":"### **Importing Required Libraries**","6803da1a":"##### We can see that there are no missing values present in data.","e181ce3c":"### **Handling Categorical Features**","4d1e2642":"* Mileage negatively affects price which could be result of caution.\n* Engine size have strong correlation with target.\n* There exists a multicolinearity between mileage and year."}}