{"cell_type":{"5f0b3d74":"code","3548d451":"code","2d9510ea":"code","366b2d7e":"code","3251cfbf":"code","37c3f2f4":"code","22c39e59":"code","0ca09c3f":"code","d5839da9":"code","4537d403":"markdown"},"source":{"5f0b3d74":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport os\nimport textwrap\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","3548d451":"pd.set_option('display.max_columns', None)\ndf = pd.read_csv('..\/input\/brooklyn-food-waste\/brooklyn.csv')\ndf","2d9510ea":"df = df[~df['label_date'].astype(str).str.startswith('x')]\ndf['label_date'] = df['label_date'].str[:10]\ndf.sort_values(by = ['label_date'], ascending = False)\ndf = df.dropna(subset=['label_date'])\ndf['date_collected'] = pd.to_datetime(df['date_collected'],  format = '%Y-%m-%d' )\ndf['label_date'] = pd.to_datetime(df['label_date'],  format = '%Y-%m-%d' )\ndf['Date_Diff'] = df['label_date'] - df['date_collected']\n","366b2d7e":"df['Date_Diff'] = pd.to_numeric(df['Date_Diff'].dt.days, downcast='integer')","3251cfbf":"def APPLYFUN(i):\n    if i >= 0:\n        return 'Early Throw Out Time'\n    else:\n        return 'On Time'\ndf['Date_Diff_Cat'] = df['Date_Diff'].apply(APPLYFUN)\ndf.head()","37c3f2f4":"Retailer = df.groupby(by = ['retailer_type','Date_Diff_Cat'])['approximate_dollar_value'].sum().reset_index()\nRetailer = Retailer.sort_values(by = 'approximate_dollar_value', ascending = False)\nfig, ax = plt.subplots(figsize=(10,10))\nsns.barplot(data = Retailer, x = 'retailer_type', y = 'approximate_dollar_value',hue = 'Date_Diff_Cat', ax=ax)\nplt.xlabel('Retailer Type', weight = 'bold')\nplt.ylabel('Waste(Total Dollar Amount)', weight = 'bold')\nax.text(x=0.5, y=1, s='Total Food Waste according to Retailer Type', fontsize=15, weight='bold', color = 'green', ha='center', va='bottom', transform=ax.transAxes)\nplt.show()","22c39e59":"Type = df.groupby(by = ['food_type','Date_Diff_Cat'])['approximate_dollar_value'].sum().reset_index()\nType = Type.sort_values(by = 'approximate_dollar_value', ascending = False)\nfig, ax = plt.subplots(figsize=(10,10))\nsns.barplot(data = Type, x = 'food_type', y = 'approximate_dollar_value',hue = 'Date_Diff_Cat', ax=ax)\nplt.xlabel('Food Type', weight = 'bold')\nplt.ylabel('Waste(Total Dollar Amount)', weight = 'bold')\nax.text(x=0.5, y=1, s='Total Food Waste according to Food Type', fontsize=15, weight='bold', color = 'green', ha='center', va='bottom', transform=ax.transAxes)\nplt.show()","0ca09c3f":"Detail = df.groupby(by = ['retailer_detail','Date_Diff_Cat'])['approximate_dollar_value'].sum().reset_index()\nDetail = Detail.sort_values(by = 'approximate_dollar_value', ascending = False)\nfig, ax = plt.subplots(figsize=(20,10))\nsns.barplot(data = Detail, x = 'retailer_detail', y = 'approximate_dollar_value',hue = 'Date_Diff_Cat', ax=ax)\nplt.xlabel('Food Detail', weight = 'bold')\nplt.ylabel('Waste(Total Dollar Amount)', weight = 'bold')\nax.text(x=0.5, y=1, s='Total Food Waste according to Food Detail', fontsize=15, weight='bold', color = 'green', ha='center', va='bottom', transform=ax.transAxes)\nax.set_xticklabels([textwrap.fill(e, 30) for e in Detail['retailer_detail'].head()])\nplt.show()","d5839da9":"Food = df.groupby(by = ['food_detail'])['approximate_dollar_value'].sum().reset_index()\nFood = Food.sort_values(by = 'approximate_dollar_value', ascending = False)[:10]\nfig, ax = plt.subplots(figsize=(20,10))\nsns.barplot(data = Food, x = 'food_detail', y = 'approximate_dollar_value',color = 'blue', ax=ax)\nplt.xlabel('Food', weight = 'bold')\nplt.ylabel('Waste(Total Dollar Amount)', weight = 'bold')\nax.text(x=0.5, y=1, s='Total Food Waste according to Food', fontsize=15, weight='bold', color = 'green', ha='center', va='bottom', transform=ax.transAxes)\nax.set_xticklabels([textwrap.fill(e, 15) for e in Food['food_detail']])\nplt.show()","4537d403":"The Time delta that is created below indicates the time between throw out date and found date.  Which indicates a postive value as the food being thrown away to sooner than the indicated date of experiation and a negative value for food found after experation date."}}