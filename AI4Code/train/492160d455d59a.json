{"cell_type":{"f93e4aad":"code","1979e863":"code","fe02abfc":"code","158170f1":"code","7b93293c":"code","c8df7ac0":"code","a7511ebb":"code","6e840018":"code","43486250":"code","d4446302":"code","8185270a":"code","c0661b9e":"code","ee8c09b1":"code","05110cd2":"code","88790034":"code","93018f2d":"code","2a5c1336":"code","74c3fb5c":"code","ae2feaf2":"code","976c591c":"code","8424b399":"code","32b83291":"code","52dc2f83":"code","9a538869":"code","a8e458bc":"code","26710555":"code","26e7e012":"code","f1a20072":"code","126ee684":"code","6e3eb596":"code","ba04dd04":"code","a4d1d5ea":"code","6a7d69db":"code","51ccd9d3":"markdown","1dd29517":"markdown","e9ba725a":"markdown","ff2a7519":"markdown","416d37cd":"markdown","e5c30aab":"markdown","f9a5b033":"markdown","a0271a7f":"markdown","6d4feb09":"markdown"},"source":{"f93e4aad":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nbank_file = \"..\/input\/Churn_Modelling.csv\"\nbank_data = pd.read_csv(bank_file)\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# S\u0131ralama i\u015flemi\nbank_data = bank_data.sort_values(by=['RowNumber', 'CustomerId', 'Surname', 'CreditScore', 'Geography',\n       'Gender', 'Age', 'Tenure', 'Balance', 'NumOfProducts', 'HasCrCard',\n       'IsActiveMember', 'EstimatedSalary', 'Exited'])\n\n# Any results you write to the current directory are saved as output.","1979e863":"bank_data.head() #ilk 5 sat\u0131r","fe02abfc":"bank_data.tail() # son 5 sat\u0131r","158170f1":"bank_data.shape # sat\u0131r ve s\u00fctun say\u0131s\u0131","7b93293c":"bank_data.info() # bellek kullan\u0131m\u0131 ve t\u00fcrleri","c8df7ac0":"bank_data.isnull().any() # null de\u011fer varm\u0131","a7511ebb":"bank_data.describe() # basit bir istatistik","6e840018":"# Histogram G\u00f6sterimi\nnum_bins=10\nbank_data.hist(bins=num_bins, figsize=(20,15))","43486250":"plt.matshow(bank_data.corr()) # Korelasyon grafik","d4446302":"bank_data.corr() # Tablo halinde koralasyon","8185270a":"# seaborn \u0131s\u0131 haritas\u0131\nimport seaborn as sns\ncorr = bank_data.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","c0661b9e":"# Veri \u00f6n i\u015flemeyi burada erken yapt\u0131k, ilerki ad\u0131mlarda kolayl\u0131k olsun\nbank_data.drop('RowNumber', axis=1, inplace = True)\nbank_data.drop('CustomerId', axis=1, inplace = True)","ee8c09b1":"bank_data.corr() # tekrar korelasyon istatistikleri kontrol ediyoruz","05110cd2":"# Plot \u00e7izini olu\u015fturma - 2 y\u00fcksek koralasyon de\u011feri olan \u00f6znitelik se\u00e7tik\nbank_data.plot(x='CreditScore', y='Balance', style='o')  \nplt.title('CreditScore - Balance')  \nplt.xlabel('CreditScore')  \nplt.ylabel('Balance')  \nplt.show() ","88790034":"# Dataset \u00fczerinde bulunan verileri model \u00e7\u0131karmak i\u00e7in d\u00f6n\u00fc\u015ft\u00fcrme i\u015flemi\nfrom sklearn.preprocessing import LabelEncoder\nlb = LabelEncoder() \n\nbank_data['Surname'] = lb.fit_transform(bank_data['Surname'])\nbank_data['Geography'] = lb.fit_transform(bank_data['Geography'])\nbank_data['Gender'] = lb.fit_transform(bank_data['Gender'])\n\n","93018f2d":"bank_data.sample(10) # 10 adet \u00f6rnek g\u00f6sterimi","2a5c1336":"bank_data['Age'].max()","74c3fb5c":"bank_data['CreditScore'].max ()","ae2feaf2":"#Eksik De\u011fer kontrol\u00fc\nbank_data.isnull().any() # null De\u011fer varm\u0131\n","976c591c":"bank_data.isnull().sum() # Null olan \u00f6znitelikler","8424b399":"# Ya\u015f\u0131n ayk\u0131r\u0131 u\u00e7 verilerin tespiti\nimport seaborn as sns\nsns.boxplot(x=bank_data['Age'])\n","32b83291":"# Kredi puan\u0131n\u0131n ayk\u0131r\u0131 u\u00e7 verilerin tespiti\nsns.boxplot(x=bank_data['CreditScore'])","52dc2f83":"# Mevcut \u00f6zniteliklerden yeni bir \u00f6znitelik olu\u015fturma\n# Bu arada burada Kredi Puan\u0131na g\u00f6re ev alma durumunu olu\u015fturmu\u015f olduk\n\ndef KrediPuani(puan):\n    return (puan>550)\n\nbank_data['EvAlma'] = bank_data['CreditScore'].apply(KrediPuani)","9a538869":"bank_data['EvAlma'] = lb.fit_transform(bank_data['EvAlma']) # EvAlma s\u00fctununu convert ettik \nbank_data.sample(10) # sonu\u00e7lar","a8e458bc":"# Balance ve CreditScore s\u00fctununu ald\u0131k \nfrom sklearn import preprocessing\n# Normalize total_bedrooms column\nx_array = np.array(bank_data['Balance'])\ny_array = np.array(bank_data['CreditScore'])\nnormalized_X = preprocessing.normalize([x_array])\nnormalized_Y = preprocessing.normalize([y_array])","26710555":"bank_data.sample(15) # sonu\u00e7lar\u0131 inceleme","26e7e012":"# Verileri e\u011fitim ve test verisi olarak b\u00f6l\u00fcyoruz.\nX = bank_data.iloc[:,0:12] \nY = bank_data.iloc[:,11]","f1a20072":"#E\u011fitim ve do\u011frulama veri k\u00fcmelerinin ayr\u0131\u015ft\u0131r\u0131lmas\u0131\nfrom sklearn.model_selection import train_test_split  \nvalidation_size = 0.20\nseed = 7\nX_train, X_validation, Y_train, Y_validation = train_test_split(X, Y, test_size=validation_size, random_state=seed)","126ee684":"#Naive Bayes modelinin olu\u015fturulmas\u0131 1.model\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.model_selection import cross_val_score\n\nmodel = GaussianNB()","6e3eb596":"#NB modelinin K-katlamal\u0131 \u00e7apraz do\u011frulama ile ACC de\u011ferinin hesaplanmas\u0131\nfrom sklearn.model_selection import KFold\nscoring = 'accuracy'\nkfold = KFold(n_splits=10, random_state=seed)\ncv_results = cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)","ba04dd04":"cv_results # sonu\u00e7","a4d1d5ea":"msg = \"%f (%f)\" % (cv_results.mean(), cv_results.std())\nmsg","6a7d69db":"from sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import classification_report\nfrom sklearn.metrics import confusion_matrix\nX_train, X_test, Y_train, Y_test = train_test_split(X, Y, test_size = 0.2, random_state = 0)\n\nmodel.fit(X_train, Y_train)\n\nY_pred = model.predict(X_test)\n\n# Summary of the predictions made by the classifier\nprint(classification_report(Y_test, Y_pred))\nprint(\"Karma\u015f\u0131kl\u0131k Matrisi \\n\",confusion_matrix(Y_test, Y_pred))\n# Accuracy score\n\nprint(\"Banka m\u00fc\u015fterisinin Exited(Bankadan Ayr\u0131lmama\/Memnuniyet) olma olas\u0131l\u0131\u011f\u0131 (ACC): %%%.2f\" % (accuracy_score(Y_pred,Y_test)*100))","51ccd9d3":"# Veri G\u00f6rselle\u015ftirme","1dd29517":"* Yukar\u0131daki \u0131s\u0131 haritas\u0131nda g\u00f6r\u00fcld\u00fc\u011f\u00fc gibi do\u011frusal bir grafik olu\u015fmaktad\u0131r.","e9ba725a":"# Veri Ke\u015ffi ","ff2a7519":" # Veri \u00d6n i\u015fleme\n** Veri \u00fczerinde ke\u015ffedildikten sonra;**\n* Verileri t\u00fcrleri  int64, float64 ve object oldu\u011fu,\n* Veriler \u00fczerinde null de\u011ferlerin olmad\u0131\u011f\u0131,\n* \"csv\" format\u0131ndaki dataset \u00fczerinde 1000 sat\u0131r ve 14 s\u00fctun oldu\u011fu saptanm\u0131\u015ft\u0131r.","416d37cd":"# Model sonu\u00e7lar\u0131n\u0131n kar\u015f\u0131la\u015ft\u0131r\u0131lmas\u0131 ve yorumlanmas\u0131","e5c30aab":"* \u0130lk olarak ACC oran\u0131n iyi oldu\u011funu g\u00f6rmekteyiz bizim i\u00e7in yeterli sonu\u00e7 genel olarak verilerimiz tutarl\u0131\n* Precision \u00fczerinde False=0 olan 0.81 de\u011ferin ve True=1 olan 0.46 hassasiyet de\u011ferleri g\u00f6r\u00fclmektedir.\n* Recall \u00fczerinde False=0 olan 0.96 de\u011ferin ve True=1 olan 0.12 geri \u00e7a\u011f\u0131rma de\u011ferleri g\u00f6r\u00fclmektedir.\n* Karma\u015f\u0131kl\u0131k matrisinde do\u011fruluk de\u011ferlerinin ger\u00e7ek verilere ve \u00f6ng\u00f6r\u00fclen veriler oran\u0131 bize verir.","f9a5b033":"* \u0130ki veya daha fazla de\u011fi\u015fken aras\u0131ndaki ili\u015fkinin varl\u0131\u011f\u0131,\nbu ili\u015fkinin y\u00f6n\u00fc ve \u015fiddeti korelasyon analizi ile\nbelirlenir.\n* Yukar\u0131daki \u015fekilde koralasyon do\u011fru bir \u015fekilde da\u011f\u0131lm\u0131\u015f ki bize do\u011fru sonucu g\u00f6sterebilir.","a0271a7f":"* Yukar\u0131da g\u00f6r\u00fcld\u00fc\u011f\u00fc gibi eksik de\u011fer olmad\u0131\u011f\u0131ndan ad\u0131mlar devam edildi.","6d4feb09":"# Model E\u011fitimi"}}