{"cell_type":{"a0632156":"code","7a9ee981":"code","487904fc":"code","d54d8c82":"code","b9e09a02":"code","b7249965":"code","b04f163c":"code","a1d33d15":"code","54bbd439":"code","335843ce":"code","2460cc96":"code","c9c057e0":"code","f210ecd0":"code","ae9a5c1f":"code","623797e9":"code","fd4a0e97":"markdown","505d8cbd":"markdown","dab25f6d":"markdown","4301cbf0":"markdown","8c07e9af":"markdown","54cc18da":"markdown","7eaae7a3":"markdown","7b1f0a47":"markdown","9e80d045":"markdown","f978d990":"markdown","c4f94db0":"markdown","27a839e8":"markdown","e1863e42":"markdown","4bbed9b9":"markdown","4af8824e":"markdown","f65bf894":"markdown","6543fd42":"markdown","3666a182":"markdown","ed5df7f2":"markdown","1d9f645e":"markdown","5bb6805c":"markdown","a1b23e5b":"markdown","967e4862":"markdown","82fffe4b":"markdown","933adb3f":"markdown","4ddcfe9b":"markdown","a8ecd651":"markdown","962b8891":"markdown","11de24f8":"markdown","6f419499":"markdown","f8f933ac":"markdown","f41f9d4e":"markdown","77d537b8":"markdown","1e512576":"markdown","7a23079a":"markdown","0a4defee":"markdown","6cc2dbe4":"markdown","a8084465":"markdown","d58aa907":"markdown","9fcb862c":"markdown","1b20b38c":"markdown","0977f355":"markdown","20d512c4":"markdown"},"source":{"a0632156":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport datetime \nimport seaborn as sb\nimport matplotlib.pyplot as plt\nimport folium\nimport scipy as scp\n\nfrom sklearn import feature_selection as fs\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import RobustScaler\nfrom folium.plugins import MarkerCluster\nimport category_encoders as ce\n\nimport keras\nfrom keras.models import Sequential\nfrom keras.layers import Dense,Dropout\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","7a9ee981":"ny_data = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv',index_col = 'host_id')\nny_data.info()","487904fc":"\nprint(ny_data[ny_data['number_of_reviews']==0][['number_of_reviews','last_review','reviews_per_month']]);","d54d8c82":"ny_data['reviews_per_month'].fillna(0,inplace = True)\ntoday = datetime.datetime(2019,7,8)\nny_data['last_review'].fillna(today,inplace = True)\n\nny_data['days_since_last_review'] = (pd.to_datetime(today) - pd.to_datetime(ny_data['last_review']))\/np.timedelta64(1,'D')","b9e09a02":"print(ny_data.info())","b7249965":"ny_data = ny_data.drop(['name','id','host_name','last_review'],axis = 1)\nny_data.head()","b04f163c":"plt.figure(figsize = (18,18));\nplt.subplot(221);\ncounts = ny_data['room_type'].value_counts();\nplt.pie(counts,labels = counts.index,colors=['darkcyan','skyblue','powderblue'],autopct='%1.2f%%');\nplt.title('Distribution of data with respect to room type');\n\nplt.subplot(222);\nsb.countplot(data = ny_data ,x= 'neighbourhood_group',color = 'cadetblue');\nplt.title('Distribution of data with respect to neighbourhood group');\nsb.despine(offset = 10,left = True,bottom = True);\n\nplt.subplot(223);\nplt.hist(ny_data['price'],bins =60,color = 'cadetblue');\nplt.title('Distribution of data with respect to price');\nplt.xlim(0,2500);\nplt.xlabel('price $');\nplt.ylabel('count');\n\nplt.subplot(224);\nplt.hist(ny_data['availability_365'],bins =20,color='cadetblue');\nplt.title('Distribution of data with respect to availabilty');\nplt.xlabel('avaliability');\nplt.ylabel('count');\n\nsb.despine(left=True,bottom=True);","a1d33d15":"brooklyn_data = ny_data.loc[ny_data['neighbourhood_group']=='Brooklyn']\n\nmap_brooklyn=folium.Map(location=[40.638177,-73.964160],tiles=\"stamenterrain\",zoom_start=11)\nmarker_cluster = MarkerCluster().add_to(map_brooklyn)\n\nlocations = brooklyn_data[['latitude', 'longitude']]\nlocationlist = locations.values.tolist()\n\nfor point in range(0, len(locationlist)):\n    folium.Marker(locationlist[point]).add_to(marker_cluster)\n    \nmap_brooklyn","54bbd439":"fig = plt.figure(figsize=(18,12))\nfig.add_subplot(1,2,1)\ng=sb.scatterplot(brooklyn_data.longitude,brooklyn_data.latitude,hue=brooklyn_data.room_type,palette='deep',alpha =0.6)\ng.set_title('Distribution of listings based on room type according to lat-long location points');\nsb.despine(offset = 10,trim=True,ax=g);\nfig.add_subplot(2,2,2)\nx=sb.violinplot(x=brooklyn_data.room_type,y=brooklyn_data.price,palette='deep',inner=\"quartile\");\nplt.ylim(-100,500);\nplt.title('Price distribution according to room type');\nsb.despine(offset = 10,bottom = True,left=True,ax=x);\nfig.add_subplot(2,2,4);\ny=sb.violinplot(x=brooklyn_data.room_type,y=brooklyn_data.availability_365,palette='deep',inner=\"quartile\");\nsb.despine(offset = 10,bottom = True,left=True,ax=y);\nplt.title('avaliability distribution according to room type');","335843ce":"new_data=brooklyn_data[brooklyn_data.columns[4:]] \nnew_data=new_data[new_data['price']<2100]\ny=new_data.columns\ncount=0\nplt.figure(figsize=(18,18));\nfor i in range(2,8):\n    plt.subplot(3,3,count+1);\n    sb.scatterplot(data=new_data,x='price',y=y[i],hue='room_type',palette='deep');\n    count=count+1\nsb.despine(offset = 10,bottom = True,left=True);","2460cc96":"brooklyn_data = ny_data.loc[ny_data['neighbourhood_group']=='Brooklyn']\nplt.figure(figsize = (12,14));\n\nplt.subplot(221);\nnew_data = brooklyn_data.groupby('neighbourhood')['price'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'price':new_data.values}).sort_values(by=['price']).head(10);\nbarlist=plt.barh(new_data['neighbourhood'],new_data['price'],color = 'cadetblue');\nfor i, v in enumerate(new_data['price']):\n    plt.text(v + 1,i-0.3, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.xticks([]);\nbarlist[7].set_color('lightcoral');\nplt.title('Best Places in Brooklyn by average price $');\n\n\nplt.subplot(222);\nnew_data = brooklyn_data.groupby('neighbourhood')['availability_365'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'availability_365':new_data.values}).sort_values(by=['availability_365']).tail(10);\nbarlist=plt.barh(new_data['neighbourhood'],new_data['availability_365'],color = 'cadetblue');\nfor i, v in enumerate(new_data['availability_365']):\n    plt.text(v + 1,i-0.3, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.xticks([]);\nbarlist[4].set_color('lightcoral');\nplt.title('Best Places in Brooklyn by average availability in days');\n\nplt.subplot(212);\nnew_data = brooklyn_data.groupby('neighbourhood')['number_of_reviews'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'number_of_reviews':new_data.values}).sort_values(by=['number_of_reviews']).tail(10);\nbarlist = plt.bar(new_data['neighbourhood'],new_data['number_of_reviews'],color = 'cadetblue');\nfor i, v in enumerate(new_data['number_of_reviews']):\n    plt.text(i-0.3,v + 1, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.yticks([]);\nbarlist[1].set_color('lightcoral');\nplt.title('Best Places in Brooklyn by average no of reviews');\nplt.tight_layout()","c9c057e0":"queens_data = ny_data.loc[ny_data['neighbourhood_group']=='Queens']\n\nmap_queens=folium.Map(location=[40.6582,-73.7949],tiles=\"stamenterrain\",zoom_start=11)\nmarker_cluster = MarkerCluster().add_to(map_queens)\n\nlocations = queens_data[['latitude', 'longitude']]\nlocationlist = locations.values.tolist()\n\nfor point in range(0, len(locationlist)):\n    folium.Marker(locationlist[point]).add_to(marker_cluster)\n    \nmap_queens","f210ecd0":"fig = plt.figure(figsize=(18,12))\nfig.add_subplot(1,2,1)\ng=sb.scatterplot(queens_data.longitude,queens_data.latitude,hue=queens_data.room_type,palette='deep',alpha =0.6)\ng.set_title('Distribution of listings based on room type according to lat-long location points');\nsb.despine(offset = 10,trim=True,ax=g);\nfig.add_subplot(2,2,2)\nx=sb.violinplot(x=queens_data.room_type,y=queens_data.price,palette='deep',inner=\"quartile\");\nplt.ylim(-100,500);\nplt.title('Price distribution according to room type');\nsb.despine(offset = 10,bottom = True,left=True,ax=x);\nfig.add_subplot(2,2,4);\ny=sb.violinplot(x=queens_data.room_type,y=queens_data.availability_365,palette='deep',inner=\"quartile\");\nsb.despine(offset = 10,bottom = True,left=True,ax=y);\nplt.title('avaliability distribution according to room type');","ae9a5c1f":"new_data=queens_data[queens_data.columns[4:]] \nnew_data=new_data[new_data['price']<2100]\ny=new_data.columns\ncount=0\nplt.figure(figsize=(18,18));\nfor i in range(2,8):\n    plt.subplot(3,3,count+1);\n    sb.scatterplot(data=new_data,x='price',y=y[i],hue='room_type',palette='deep');\n    count=count+1\nsb.despine(offset = 10,bottom = True,left=True);","623797e9":"brooklyn_data = ny_data.loc[ny_data['neighbourhood_group']=='Queens']\nplt.figure(figsize = (12,18));\n\nplt.subplot(221);\nnew_data = brooklyn_data.groupby('neighbourhood')['price'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'price':new_data.values}).sort_values(by=['price']).head(10);\nbarlist=plt.barh(new_data['neighbourhood'],new_data['price'],color = 'cadetblue');\nfor i, v in enumerate(new_data['price']):\n    plt.text(v + 1,i-0.3, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.xticks([]);\nbarlist[9].set_color('lightcoral');\nplt.title('Best Places in Queens by average price $');\n\n\nplt.subplot(222);\nnew_data = brooklyn_data.groupby('neighbourhood')['availability_365'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'availability_365':new_data.values}).sort_values(by=['availability_365']).tail(10);\nbarlist=plt.barh(new_data['neighbourhood'],new_data['availability_365'],color = 'cadetblue');\nfor i, v in enumerate(new_data['availability_365']):\n    plt.text(v + 1,i-0.3, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.xticks([]);\nbarlist[5].set_color('lightcoral');\nplt.title('Best Places in Queens by average availability in days');\n\nplt.subplot(212);\nnew_data = brooklyn_data.groupby('neighbourhood')['number_of_reviews'].mean();\nnew_data = pd.DataFrame({'neighbourhood':new_data.index,'number_of_reviews':new_data.values}).sort_values(by=['number_of_reviews']).tail(10);\nbarlist = plt.bar(new_data['neighbourhood'],new_data['number_of_reviews'],color = 'cadetblue');\nfor i, v in enumerate(new_data['number_of_reviews']):\n    plt.text(i-0.3,v + 1, str(round(v,2)), color='grey', fontweight='bold');\nsb.despine(left=True,bottom=True);\nplt.yticks([]);\nbarlist[7].set_color('lightcoral');\nplt.xticks(rotation=15);\nplt.title('Best Places in Queens by average no of reviews');\nplt.tight_layout()","fd4a0e97":"Queens has about 5.6k listings and similar to brooklyn data above few of the listings are high priced so i had to limit the price range to 500$ to get a better visual on the data. The left graph (lat-long graph) contains all the listings unlike the right one where price axis is adjusted. ","505d8cbd":"### **Missing values**","dab25f6d":"The above graphs show the relation between prrice and other parameters in the data. The relation doesn't look linear. Also all the plots are differentiated based on the room type and each type has been given with a color in all the grpahs even in the previous graphs.","4301cbf0":"Brooklyn has about 20.1k listings in which few of them are high priced so i had to limit the price range to 500$ to get a better visual on the data. The left graph (lat-long graph) contains all the listings unlike the right one where price axis is adjusted. ","8c07e9af":"### **Parameters variance with price according to room type**","54cc18da":"> # Columns in the Data","7eaae7a3":"> ### Please Upvote if you like it and provide any sugesstions in the comments section.","7b1f0a47":"<h2><center>Brooklyn<\/center><\/h2>","9e80d045":"### **Listings view with respect to room type**","f978d990":"### **After Removing unnecessary features**","c4f94db0":"### **Parameters variance with price according to room type**","27a839e8":"> # About the data","e1863e42":"### **Initial Understanding**","4bbed9b9":"Here we make sure that dataset is completely ready for analysis without errors. The errors we check for are \n1. Missing values\n2. Duplicate entries \n3. Other minor corrections","4af8824e":"<h2><center>Queens<\/center><\/h2>","f65bf894":"Features **Name**,**HostId**, **Host Name** might not be helpful in analysis and prediction. **No of reviews** and **Reviews per month** are related so one is redundant, but we only have the info of last review the first review data is not provided so both **No of reviews** and **Reviews per month** are required. We will use all the data for analysis except **Name,HostId, Host Name**.","6543fd42":"**Some other important Things to notice**\n1. The dataset has missing values so we need to handle it first.\n2. Last review is a date type but it shows object.\n3. Also should check for duplicate entries.\n\nThese are must steps in any data analysis project before getting into the analysis part. So first clean the dataset and then analyse.","3666a182":"### **Listings view with respect to room type**","ed5df7f2":" ### **Information on data after cleaning the data**","1d9f645e":"Fisrt lets remove all the unnecessary cells from the dataset which are not helpful in analysis **id, name, host name, last review**.","5bb6805c":"Columns are called Features. Each feature is like a dimension if we consider two features and plot a relation it would be a line (might not be a straight). Instead if we consider 3 features their relationship would be a plane. So if the total no of features is N then their relationship would be a N-1 dimension space.","a1b23e5b":"### **Distribution of all listings in brooklyn**\n(select those numbered points to zoom in)","967e4862":"The dataset is about the listings and metrics in NYC from 2008 to 2019.This dataset includes information about hosts, geographical availability, necessary metrics. First we will see what are all the details provided then analyse them and make predictions.","82fffe4b":"Lets look at the data neighbourhood wise and see what it tells us about that area. **But we will be looking at only two neighbourhoods Brooklyn and Queens then we proceed for prediction algorithm.**","933adb3f":"***Summary:***\n\n1. From all the hosts in New York around 98% of them offer either entire home or private room.\n2. Brooklyn and Manhattan has highest listings so high percent of the hosts are from those areas.\n3. Average price of listing can be expected below 500 dollars,70% of the listings are below 200 dollars\n4. Almost 50% of rooms are avaliable only around 20 days in whole year rest 50% avaliability is varing i.e, we only have a 50% chance of getting room whenever we want.\n","4ddcfe9b":"***Summary:***\n1. The median price of entire home\/apt is around 130\\$ which is almost near to the private room and shared room with median prices around 80 and 50\\$ respectively. The average availability of the shared room is around 200 days but unlike brooklyn here the average avaliability of the private room and entire home\/apt is around 100 days.\n2. No of listings of shared room are limited but thier average price is placed less and average avalaiability high around 200 days.\n3. Minimum no of nights to stay reduces with increase in price. From price around 250\\$ minimum nights will not be an issue.\n4. No of reviews and reviews per month are more at less price than higher price as there is less chance of people going for a high priced rooms.\n5. similar to brooklyn spread of availability is high at low prices and at higher price the avaliability is either very less or very high.\n6. At low prices some listings are having high value for days since last review which means every person who rents might not rate the residence. But when combined with no of reviews and reviews per month it tells us how frequently that room is being rated.\n7. South Ozone Park is the location which is in top 10 of all the categories avg price,avg avaliability and avg no of reviews.","a8ecd651":"![](https:\/\/www.macobserver.com\/wp-content\/uploads\/2018\/05\/airbnb-summer-vacation-768x449.png)","962b8891":"> # Analysis","11de24f8":"> # Clean the Dataset","6f419499":"We can see it contains 15 features (or) columns with 48.8k entries (or) rows in total. This makes a total of 733.4k total datapoints. Each feature name is specifed which we will cover in detail in next section. There are 3 different types of data Float,Int,Object (String) and on a total it occupies around 6MB of memory. Features name, host name, last review, reviews per month have missing values.","f8f933ac":"### **Complete Analysis neighbourhood-groupwise**","f41f9d4e":"**Missing values**\n\nFrom the previous section name, host name, last review, reviews per month are having missing values. Name and host name might not be useful in analysis or prediction. So we will handle the missing values in the last review, reviews per month columns.\n\n**How do we handle missing values?**\n\nWe first have to check whether there is a link between columns with missing values and the other columns so we can replace those missing.\nIf we dont find any link and unable to replace missing values the option is to remove those rows from dataset.","77d537b8":"We have similar representation of relationships like brooklyn data but the quantity of data is less comapred to brooklyn. Also the price range is limited till 2000$ and none of the relation is linear. Color reperesntation of the data is same to broolkyn. ","1e512576":"### **Information on the Dataset**","7a23079a":"The interesting part is if you observe no of entries with missing values in both last review, reviews per month is 100052 and the no of entries with number of reviews = 0 is 100052. **The above table tells us that whenever we have number of reviews = 0 last review, reviews per month are not defiend.i.e, NaN.**\n\n\n**What is the solution?**\n1. If the total no of reviews is 0 we can repalce reviews per month with 0.\n2. For missing values in last review what we can do is the last review compared in all the data is on **8th jul 2019**. So we can create a new feature **No of days since last review** which wolud be the differece between 8th jul 2019 and last review. So if last review is NaN we make the value 0 in the new feature which tells us that there was never a review on that listing.","0a4defee":"![](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/6\/69\/Airbnb_Logo_B\u00e9lo.svg\/1920px-Airbnb_Logo_B\u00e9lo.svg.png)","6cc2dbe4":"### **Distribution of all listings in Queens**\n(select those numbered points to zoom in)","a8084465":"***Summary:***\n1. The median price of the entire home\/apt is around 150\\$ which is higher than the private room and shared room in Brooklyn. Whereas according to avaliability the shared room has high availability rate of median around 200 days.\n2. Shared rooms are less priced and are having high availability rate in brooklyn but the no of listings offering shared rooms are also less in quantity.\n3. In all the relationships initially at low prices private\/shared rooms show high y axis value but the entire home\/apt have good features at higher prices.\n4. If we consider no.of reviews and reviews per month they are less at higher prices and it is obvious because only few people can afford for those room types at that price. \n5. Also for high priced rooms the avaliability is either very less like for 2-5 days or very high 300-365 days(most are entire home\/apt).\n6. Intresting thing is at low prices a set of houses are having higher minimum nights around 200 days. There are houses with less minimum nights at low prices but at price greater than 250$ you may not worry about minimum nights to stay.\n7. Days since last review combined with no of reviews and reviews per month tells us how frequently that room is being rated. Also not everybody rates as it is not a compulsion.\n8. East New york is one region which stood in top 10 in all the categories avg price,avg avaliability and avg no of reviews.\n","d58aa907":"When coming to data analysis **PANDAS** is the common library used to load or read the data. The info function of pandas provides all the basic information of the dataset like total no of rows (or) entries, total no of columns (or) features, Data type of each feature.\n \n \n**What Extra information we can get from the dataset?**\n1. Count of non-null data in each feature.\n2. Count of different data types.\n3. Memoy usage of the dataset.","9fcb862c":"After handling the missin values you can check the info and the head in the dataset.","1b20b38c":"The above map gives overview of all the listings present in the brooklyn location. Just select the bubble you want and it will zoom in to inner locations.Its just a graphical location of all the listings for user convenience. ","0977f355":"**Airbnb,Inc.** is an online marketplace for arranging or offering lodging, primarily homestays, or tourism experiences. The company does not own any of the real estate listings, nor does it host events; it acts as a broker, receiving commissions from each booking.\n\nAirbnb provides a platform for hosts to accommodate guests with short-term lodging and tourism-related activities. Guests can search for lodging using filters such as lodging type, dates, location, and price. Hosts provide prices and other details for their rental or event listings, such as the allowed number of guests, home type, rules, and amenities.Pricing is determined by the host, with recommendations from Airbnb.Hosts and guests have the ability to leave reviews about the experience.","20d512c4":"The above map gives overview of all the listings present in the Queens location. Just select the bubble you want and it will zoom in to inner locations.Its just a graphical location of all the listings for user convenience. "}}