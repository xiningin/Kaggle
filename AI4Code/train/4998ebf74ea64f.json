{"cell_type":{"1b945b08":"code","8af4ae59":"code","7ba43726":"code","3e911122":"code","f5ab47b4":"code","c156239a":"code","b89ec11c":"code","5fc86cbf":"code","62530cda":"code","514f24b6":"code","ee9d199f":"code","5049a387":"code","5f6cded8":"code","617efea6":"code","6bbd211d":"code","ab6b6904":"code","48320b3c":"code","84e207cc":"code","732aef96":"code","a2e6e0eb":"code","8e024924":"code","1238b2cf":"code","60055fbb":"code","4fed99be":"code","e25581be":"code","5d9a26ec":"code","26ff0898":"code","ca2353a5":"code","86e3b7fa":"code","fe533a4d":"markdown","e972423f":"markdown","aac55c42":"markdown","0afb9c82":"markdown"},"source":{"1b945b08":"import numpy as np\nimport pandas as pd\n\nfrom textblob import TextBlob\nfrom vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer\n\nimport nltk\nfrom nltk.probability import FreqDist\nfrom nltk.tokenize import word_tokenize\nfrom nltk.corpus import stopwords\n\nimport time\nfrom datetime import datetime as dt, date, time, timedelta\n\nimport plotly.express as px\nimport re\nimport plotly.graph_objects as go\n\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom subprocess import check_output\nfrom wordcloud import WordCloud, STOPWORDS\n\nimport cufflinks as cf\ncf.go_offline()\ncf.set_config_file(offline=False, world_readable=True)","8af4ae59":"df1 = pd.read_csv('..\/input\/us-election-2020-tweets\/hashtag_donaldtrump.csv', lineterminator='\\n')\ndf2 = pd.read_csv('..\/input\/us-election-2020-tweets\/hashtag_joebiden.csv', lineterminator='\\n')\ndf1 = df1.dropna()\ndf2 = df2.dropna()\ndf1 = df1[['created_at', 'tweet', 'user_screen_name', 'user_location', 'source', 'country', 'continent', 'state', 'lat', 'long']]\ndf2 = df2[['created_at', 'tweet', 'user_screen_name', 'user_location', 'source', 'country', 'continent', 'state', 'lat', 'long']]\ndf1.rename(columns={'created_at': 'Timestamp', 'tweet': 'Text', 'user_screen_name': 'Username', 'user_location': 'Location', 'source': 'Device', 'lat': 'Latitude', 'long': 'Longitude'}, inplace=True)\ndf2.rename(columns={'created_at': 'Timestamp', 'tweet': 'Text', 'user_screen_name': 'Username', 'user_location': 'Location', 'source': 'Device', 'lat': 'Latitude', 'long': 'Longitude'}, inplace=True)\ndf1.to_csv(\"tweet_Trump.csv\", index=None)\ndf2.to_csv(\"tweet_Biden.csv\", index=None)","7ba43726":"analysis_Trump = pd.read_csv('tweet_Trump.csv')\nprint(analysis_Trump.shape)\nanalysis_Trump.head()","3e911122":"analysis_Trump['Text'] = analysis_Trump['Text'].astype(str)\nanalysis_Trump.dtypes","f5ab47b4":"Tdesc_blob = [TextBlob(desc) for desc in analysis_Trump['Text']]\n#add the sentiment metrics to the dataframe\nanalysis_Trump['polarity'] = [b.sentiment.polarity for b in Tdesc_blob]\nanalysis_Trump['Subjectivity'] = [b.sentiment.subjectivity for b in Tdesc_blob]\n#show dataframe\nanalysis_Trump","c156239a":"analysis_Trump.loc[analysis_Trump.polarity > 0,'SENTIMENT'] = 'positive'\nanalysis_Trump.loc[analysis_Trump.polarity == 0,'SENTIMENT'] = 'neutral'\nanalysis_Trump.loc[analysis_Trump.polarity < 0,'SENTIMENT'] = 'negative'\nanalysis_Trump","b89ec11c":"analysis_Biden = pd.read_csv('tweet_Biden.csv')\nprint(analysis_Biden.shape)\nanalysis_Biden.head()","5fc86cbf":"analysis_Biden['Text'] = analysis_Biden['Text'].astype(str)\nanalysis_Biden.dtypes","62530cda":"Bdesc_blob = [TextBlob(desc) for desc in analysis_Biden['Text']]\n#add the sentiment metrics to the dataframe\nanalysis_Biden['polarity'] = [b.sentiment.polarity for b in Bdesc_blob]\nanalysis_Biden['Subjectivity'] = [b.sentiment.subjectivity for b in Bdesc_blob]\n#show dataframe\nanalysis_Biden","514f24b6":"analysis_Biden.loc[analysis_Biden.polarity > 0,'SENTIMENT'] = 'positive'\nanalysis_Biden.loc[analysis_Biden.polarity == 0,'SENTIMENT'] = 'neutral'\nanalysis_Biden.loc[analysis_Biden.polarity < 0,'SENTIMENT'] = 'negative'\nanalysis_Biden","ee9d199f":"fig1 = px.scatter(analysis_Trump, x=\"Timestamp\", # date on the x axis\n               y=\"polarity\", # sentiment on the y axis\n               hover_data=[\"Location\", \"Username\"], # data to show on hover\n               color_discrete_sequence=[\"lightseagreen\", \"indianred\", \"mediumpurple\"], # colors to use\n               color=\"SENTIMENT\", # what should the color depend on?\n               size=\"Subjectivity\", # the more votes, the bigger the circle\n               size_max=10, # not too big\n               labels={\"polarity\": \"Tweet positivity\", \"Timestamp\": \"Date Tweet was posted\"}, # axis names\n               title=f\"Trump-Related Tweets Analysis\", # title of figure\n          )\n\nfig1.show()","5049a387":"content_Trump = ' '.join(analysis_Trump[\"Text\"])\ncontent_Trump = re.sub(r\"http\\S+\", \"\", content_Trump)\ncontent_Trump = content_Trump.replace('rt ', ' ').replace('&amp;', 'and')\ncontent_Trump = re.sub('[^A-Za-z0-9]+', ' ', content_Trump)\ncontent_Trump = content_Trump.lower()","5f6cded8":"tokenized_word = word_tokenize(content_Trump)\nstop_words=set(stopwords.words(\"english\"))\nfiltered_sent=[]\n\nfor w in tokenized_word:\n    if w not in stop_words:\n        filtered_sent.append(w)\nfdist = FreqDist(filtered_sent)\nfd = pd.DataFrame(fdist.most_common(10), columns = [\"Word\",\"Frequency\"]).drop([0]).reindex()","617efea6":"fig2 = px.bar(fd, x=\"Word\", y=\"Frequency\")\nfig2.update_traces(marker_color='rgb(240,128,128)', marker_line_color='rgb(8,48,107)', marker_line_width=1.5, opacity=0.8)\nfig2.show()","6bbd211d":"plt.subplots(1,1, figsize=(9,9))\nwc_b = WordCloud(stopwords=STOPWORDS, \n                 background_color=\"white\", max_words=2000,\n                 max_font_size=256, random_state=42,\n                 width=1600, height=1600)\nwc_b.generate(content_Trump)\nplt.imshow(wc_b, interpolation=\"bilinear\")\nplt.axis('off')\nplt.show()","ab6b6904":"analysis_Trump['polarity'].iplot(\n    kind='hist',\n    bins=50,\n    xTitle='polarity',\n    linecolor='black',\n    yTitle='count',\n    title='Sentiment Polarity Distribution')","48320b3c":"def make_dictionary(dataframe,column):\n    dictt = {}\n    for i in list(dataframe[column]):\n        if i in dictt:\n            dictt[i] = dictt.get(i) + 1\n        else:\n            dictt[i] = 1\n    return dictt","84e207cc":"country_Trump = make_dictionary(analysis_Trump,'country')\nstate_Trump = make_dictionary(analysis_Trump,'state')\ncontinent_Trump = make_dictionary(analysis_Trump,'continent')\ncontinent_Trump","732aef96":"labelsT = ['North America', 'Europe', 'Oceania', 'Asia', 'South America', 'Africa']\nvaluesT = ['108279', '54961', '5410', '14153', '4439', '2035']","a2e6e0eb":"figT = go.Figure(data=[go.Pie(labels=labelsT, values=valuesT)])\nfigT.show()","8e024924":"fig1 = px.scatter(analysis_Biden, x=\"Timestamp\", # date on the x axis\n               y=\"polarity\", # sentiment on the y axis\n               hover_data=[\"Location\", \"Username\"], # data to show on hover\n               color_discrete_sequence=[\"lightseagreen\", \"indianred\", \"mediumpurple\"], # colors to use\n               color=\"SENTIMENT\", # what should the color depend on?\n               size=\"Subjectivity\", # the more votes, the bigger the circle\n               size_max=10, # not too big\n               labels={\"polarity\": \"Tweet positivity\", \"Timestamp\": \"Date Tweet was posted\"}, # axis names\n               title=f\"Biden-Related Tweets Analysis\", # title of figure\n          )\n\nfig1.show()","1238b2cf":"content_Biden = ' '.join(analysis_Biden[\"Text\"])\ncontent_Biden = re.sub(r\"http\\S+\", \"\", content_Biden)\ncontent_Biden = content_Biden.replace('rt ', ' ').replace('&amp;', 'and')\ncontent_Biden = re.sub('[^A-Za-z0-9]+', ' ', content_Biden)\ncontent_Biden = content_Biden.lower()","60055fbb":"tokenized_word = word_tokenize(content_Biden)\nstop_words=set(stopwords.words(\"english\"))\nfiltered_sent=[]\n\nfor w in tokenized_word:\n    if w not in stop_words:\n        filtered_sent.append(w)\nfdist1 = FreqDist(filtered_sent)\nfd1 = pd.DataFrame(fdist1.most_common(10), columns = [\"Word\",\"Frequency\"]).drop([0]).reindex()","4fed99be":"fig3 = px.bar(fd1, x=\"Word\", y=\"Frequency\")\nfig3.update_traces(marker_color='rgb(240,128,128)', marker_line_color='rgb(8,48,107)', marker_line_width=1.5, opacity=0.8)\nfig3.show()","e25581be":"plt.subplots(1,1, figsize=(9,9))\nwc_b = WordCloud(stopwords=STOPWORDS, \n                 background_color=\"white\", max_words=2000,\n                 max_font_size=256, random_state=42,\n                 width=1600, height=1600)\nwc_b.generate(content_Biden)\nplt.imshow(wc_b, interpolation=\"bilinear\")\nplt.axis('off')\nplt.show()","5d9a26ec":"analysis_Biden['polarity'].iplot(\n    kind='hist',\n    bins=50,\n    xTitle='polarity',\n    linecolor='black',\n    yTitle='count',\n    title='Sentiment Polarity Distribution')","26ff0898":"country_biden = make_dictionary(analysis_Biden,'country')\nstate_biden = make_dictionary(analysis_Biden,'state')\ncontinent_biden = make_dictionary(analysis_Biden,'continent')\ncontinent_biden","ca2353a5":"labelsB = ['North America', 'Europe', 'Oceania', 'Asia', 'South America', 'Africa']\nvaluesB = ['93087', '38722', '3364', '15270', '3949', '1558']","86e3b7fa":"figB = go.Figure(data=[go.Pie(labels=labelsB, values=valuesB)])\nfigB.show()","fe533a4d":"## Trump Tweets Data-Preprocessing","e972423f":"## Biden Tweets Data-Preprocessing","aac55c42":"## Visualization of Biden Related Tweets","0afb9c82":"## Visualization of Trump-Related Tweets"}}