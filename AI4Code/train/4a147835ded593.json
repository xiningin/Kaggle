{"cell_type":{"f3c75818":"code","e8a9c9d7":"code","333f0adb":"code","c4083b73":"code","b1770453":"code","11b58fc9":"code","e49bca37":"code","20e5a2c0":"code","58411b72":"code","548f1670":"code","3b5daa79":"code","a22fd97a":"code","55e51633":"code","422a8a18":"code","f380cce3":"code","ad5d9a54":"code","bc3ddb2e":"code","4e089485":"code","9cd58b30":"code","2ccb7c57":"code","2dd08ac0":"code","079389c7":"code","afc217c8":"code","eaab0ac6":"code","db6c7f6a":"code","cd56a6d4":"code","ba78a07f":"code","84d2db65":"code","73cc4135":"code","381f85f2":"code","3505348b":"markdown","f74c17e7":"markdown","b8be3258":"markdown","5d152c54":"markdown","f2b352de":"markdown","9215ccf2":"markdown","26e1823f":"markdown","036f741a":"markdown","5f9e037d":"markdown","f0d10c79":"markdown","f608f8aa":"markdown","f95300a8":"markdown","090719f6":"markdown","29db64e2":"markdown","4f2acdcf":"markdown","e925bb9f":"markdown","8eebf8b5":"markdown"},"source":{"f3c75818":"# importing libiraries to be used\nimport pandas as pd\nimport numpy as np \nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","e8a9c9d7":"#Loading data\ndf = pd.read_csv('..\/input\/fifa19\/data.csv')\ndf.head()","333f0adb":"df.columns","c4083b73":"# Checking for duplicated rows and \ndf.duplicated().sum()","b1770453":"df.describe()","11b58fc9":"df.info()","e49bca37":"# making a copy of the original df to clean it\ndf_clean = df.copy()","20e5a2c0":"#useless columns to be removed\ncols = ['ID','Photo', 'Flag','Club Logo','Special','Jersey Number','Loaned From','Contract Valid Until',\n        'Release Clause','GKDiving', 'GKHandling','GKKicking', 'GKPositioning', 'GKReflexes','Reactions',\n        'Balance', 'LS', 'ST', 'RS', 'LW', 'LF','CF', 'RF', 'RW', 'LAM', 'CAM', 'RAM', 'LM', 'LCM', 'CM',\n        'RCM', 'RM', 'LWB', 'LDM','CDM', 'RDM', 'RWB', 'LB', 'LCB', 'CB', 'RCB', 'RB', 'Unnamed: 0']","58411b72":"#drop the useless columns it's better to make a list of the columns and then drop them\ndf_clean.drop(columns=cols,inplace=True)","548f1670":"df_clean.info()","3b5daa79":"#the unit of Wage column is in thousand\n#in this cell i'm cleaning the Wage cool from the signs that indicate currencey and amount \ndf_clean.Wage = df_clean.Wage.apply(lambda x: str(x).replace('\u20ac',''))\ndf_clean.Wage = df_clean.Wage.apply(lambda x: str(x).replace('K',''))\ndf_clean.Wage = df_clean.Wage.astype(float)","a22fd97a":"#the unit of Value column is in million\n#in this cell i'm cleaning the Wage cool from the signs that indicate currencey and amount \ndf_clean.Value = df_clean.Value.apply(lambda x: str(x).replace('\u20ac',''))\ndf_clean.Value = df_clean.Value.apply(lambda x: str(x).replace('K','000'))\ndf_clean.Value = df_clean.Value.apply(lambda x: str(x).replace('M','00000') \\\n                                      if '.' in str(x) else str(x).replace('M','000000') )\ndf_clean.Value = df_clean.Value.apply(lambda x: str(x).replace('.',''))\ndf_clean.Value = df_clean.Value.astype(float)\ndf_clean.Value = df_clean.Value \/ 10**6","55e51633":"#Saving the clean df into csv to use it in the slide deck file to not clean it again there\ndf_clean.to_csv('clean_df.csv',index = False)","422a8a18":"#taking the most important columns to work with them instead of taking 40+ cols and not use them all\ndf_sal = df_clean[['Name', 'Age', 'Overall', 'Potential','Club', 'Value', 'Wage',\n                   'Preferred Foot', 'Position','Stamina','ShotPower','International Reputation']].copy()\ndf_sal.head()","f380cce3":"#dropping na values and checking if there is any left \ndf_sal.dropna(inplace=True)\ndf_sal.isnull().sum()","ad5d9a54":"#in this cell i grouped the the data by Clubs and arranged them by total wage paied to get a top 10 list\n#top clubs that pay wage\nwage = df_sal.groupby(['Club'],as_index=False)['Wage'].sum()\ntop10_w = wage.sort_values(ascending = False,by='Wage')[:10]\ntop10_w['Wage'] = top10_w['Wage']\/10**3\ntop10_w","bc3ddb2e":"#visualizing the outcome\nclubs = list(top10_w.Club)\nbase_color = sns.color_palette()[0]\nplt.title('Wage paid weekly')\nsns.barplot(x=top10_w['Wage'],y= clubs,data = top10_w,color = base_color)\nplt.xlabel('Wage in millions');\nfor i in range(10):\n    weekly_wage = list(top10_w[top10_w.Club.str.startswith(clubs[i])]['Wage'])[0]\n    pct_string = f'{str(weekly_wage)}M'\n    plt.text(weekly_wage, i, pct_string, va='center')","4e089485":"#total value of players in clubs\nvalue = df_sal.groupby(['Club'],as_index=False)['Value'].sum()\ntop10_v = value.sort_values(ascending = False,by='Value')[:10]\ntop10_v['Value'] = top10_v['Value'].round(3)\ntop10_v","9cd58b30":"#visualizing the outcome\nclubs_v = list(top10_v.Club)\nbase_color = sns.color_palette()[0]\nplt.title('Totla Value of the players in each club')\nsns.barplot(x=top10_v.Value, y=clubs_v, data=top10_v, color=base_color)\nplt.xlabel('Value in millions');\nfor i in range(10):\n    total_value = list(top10_v[top10_v.Club.str.startswith(clubs_v[i])]['Value'])[0]\n    pct_string = f'{str(total_value)}M'\n    plt.text(total_value, i, pct_string, va='center')","2ccb7c57":"player = df_sal.groupby(['Name'],as_index=False)['Wage'].sum()\ntop10_p = player.sort_values(ascending = False,by='Wage')[:10]\ntop10_p['Wage'] = top10_p['Wage'].round(3)\ntop10_p","2dd08ac0":"players = list(top10_p.Name)\nplt.title('Top 10 players')\nsns.barplot(x=top10_p.Wage, y=players, data=top10_p, color=base_color)\nplt.xlabel('Wage in thousands');\nfor i in range(10):\n    total_value = list(top10_p[top10_p.Name.str.startswith(players[i])]['Wage'])[0]\n    pct_string = f'{str(total_value)}K'\n    plt.text(total_value, i, pct_string, va='center')","079389c7":"df_sal.Position.value_counts()","afc217c8":"#positions arranged according to how many players are in that position\np = df_sal.Position.value_counts()[:20]\nplt.figure(figsize=[7,5])\nsns.barplot(x=p.keys(),y=p,color=base_color)\nplt.xlabel('Positions')\nplt.title('number of players in each position')\nplt.xticks(rotation=45);","eaab0ac6":"df_clean['International Reputation'].value_counts()","db6c7f6a":"#box plot to show th relation between age and rep\nsns.boxplot(data=df_sal,y='Age',x='International Reputation',color=base_color)\nplt.ylabel('Age')\nplt.xlabel('International Reputation')\nplt.title('relation between age and Reputation');","cd56a6d4":"#scatter plot shows the relation between overall and wage\nplt.scatter(data=df_sal,x='Overall',y='Wage')\nplt.xlabel('players score')\nplt.ylabel('Wage')\nplt.title('relation between Overall points and Wage');","ba78a07f":"#violin plot shows the relation between rep and potential of a player\nsns.violinplot(data=df_sal,y='Potential',x='International Reputation',color=base_color)\nplt.ylabel('Potential')\nplt.xlabel('International Reputation')\nplt.title('relation between Potential and Reputation');","84d2db65":"#scatter plot between overall and wage with rep as a hue\nsns.lmplot(x='Overall',y='Wage', hue='International Reputation', \n           data=df_sal.loc[df_sal['Preferred Foot'].isin(['Left', 'Right'])], \n           fit_reg=False);","73cc4135":"#correlation between('ShotPower', 'Jumping', 'Stamina', 'Strength')\ndf_clean[['ShotPower', 'Jumping', 'Stamina', 'Strength']].corr()","381f85f2":"#heatmap shows the relation between (age,overall,potential,value,wage,stamina,shotpower,international reputation)\nsns.heatmap(df_sal.corr(), annot=True);","3505348b":"# Loading the data\n\nloading the data to be cleaned and then analyzed","f74c17e7":"**As we see in the previous visualization that compares age and reputation of the players and reputation is from 1 to 5 and 5 is the highest majorty of players as we see have one and only few got 5, I also noticed that as the reputation score increses the box plot is not as spread which and it shrinks on both sides wich means that players need to be not only have crazy status but also have experience and looks like ages between 25 to 35 is where players have 4 and 5 rep points because usally this is the prime years of a player**","b8be3258":"# Bivariate exploration\n## Relation between age and International Reputation\n**The reason i made this plot is:**\n\nto see the relation between international reputation of the player and there age and it proves my theory about the age sweet spot the players with high Rep are in their 30's ","5d152c54":"## Assessing data to get more info about it","f2b352de":"## Players positions\nthe purpose of this plot is to see what are the most wanted positions in soccer and looks like they are ST and GK","9215ccf2":"## Cleaning the data and adjusting data types","26e1823f":"## There are 89 columns \nNot all these columns will be used some of them are usless for the purpose of the analysis","036f741a":"# Univariate exploration\n## Which Club is willing to pay above average Wage\n**why i specifically wanted to know the top clubs in paying wage?**\n\nto see if paying more is winning more and it really looks like that having better players that ask for more money results in winning more","5f9e037d":"## Top 10 paid players \n**who are the top paid players and why are they top paid?**\n\nas we see the top paid players are all famous and have great experience in the game but this is not the only reason what they have in common is that all of them are in there 30's which is the sweet spot of being healthy at your peak and also have a lot of experience in what you do ","f0d10c79":"# multivariate exploration\n","f608f8aa":"## Clubs that have the most valuable players\n**What this plot proves?**\n\nthis plot proves that paying more is winning more most of the last top 10 list is here in this plot and there is something in common in between all these clubs that they all are popualr and have a decent chang in winnig big titles","f95300a8":"## The next plot is a heat map that shows the relation between some variabels \n**the purpose of this heat map is:**\n\nto discover relations between some variabelsand as it shows value, potential, overall and wage have a +ve relation with reputation ","090719f6":"## Usless columns\n<li>ID<\/li>\n<li>Photo<\/li>\n<li>Flag <\/li>\n<li>Club Logo <\/li>\n<li>Special<\/li>\n<li>Jersey Number<\/li>\n<li>Loaned From<\/li>\n<li>Contract Valid Until<\/li>\n<li>Release Clause<\/li>\n<li>GKDiving<\/li>\n<li>GKHandling<\/li>\n<li>GKKicking <\/li>\n<li>GKPositioning<\/li>\n<li>GKReflexes<\/li>\n<li>Reactions<\/li>\n<li>Balance<\/li>\n<li>(All position cols)<\/li>","29db64e2":"## Relation between Overall and Wage\n**Why i made this plot?**\n\nto see if the there is a +ve linear relation between wage and overall it's +ve but it's not linear  ","4f2acdcf":"**In the last visualization we see that as the potential of players increase rep shrinks high rep like 4 and 5 is only for palyers in range 80's to 90's and there are not outliers but in the ranks 1 and 2  there is ton of outliers from that visual it seems that rep depends on many things potential is one of them but it's not a main reason because there is a lot of rank 2 players in the range of rank 4 and 5**","e925bb9f":"## Relation between Overall, Wage and International Reputation\n**why i made this plot?** \n\nto check if all players with high rep get paied well and if they have high overall points and they all have high overall but there are  2 players who are underpaid or maybe it's just noise in the data","8eebf8b5":"## Relation between Potential and Rep\n**Why i made this plot?**\n\ni chose violin plot for this to show the distribution of data and see the relation between potential and reputation"}}