{"cell_type":{"fac5c72a":"code","a676ca8c":"code","46a48827":"code","693d9628":"code","abf2b695":"code","6c3a8bac":"code","96ca3155":"code","8c8c1629":"code","666fb51e":"markdown","d2ac59a9":"markdown","f94c9aec":"markdown","2bd18b96":"markdown","532cef5d":"markdown","20d3b79e":"markdown","0d884cad":"markdown"},"source":{"fac5c72a":"!pip install pyshp\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.colors as cm\nimport seaborn as sb\nfrom urllib.request import urlopen\nfrom bs4 import BeautifulSoup as bsoup\nfrom matplotlib.pyplot import figure\n%matplotlib inline","a676ca8c":"# Read in data, \ndata = pd.read_csv(\"..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv\")\ndata.head()","46a48827":"# Show all features\ndata.columns.values\n","693d9628":"# number of unique hosts\nprint(\"Number of unique hosts:\", len(data[\"host_id\"].unique()))\n\n# Number of listings total\nprint(\"Number of listings total:\", len(data))\n\n# Number of features\nprint(\"Number of features:\", len(data.columns.values))\n","abf2b695":"# Plot distribution of listing prices by the type of room it is\n\n# Get unique types of rooms \nprint(data[\"room_type\"].unique())\n\nx1 = data.loc[data.room_type==\"Private room\", \"price\"]\nx2 = data.loc[data.room_type==\"Entire home\/apt\", \"price\"]\nx3 = data.loc[data.room_type==\"Shared room\", \"price\"]\n\n# Bar plot of the frequency counts\nplt.bar(x=[\"Private rooms\", \"entire homes\/apartments\", \"Shared rooms\"], height=[len(x1), len(x2), len(x3)], color=[\"purple\", \"blue\", \"red\"] , edgecolor=\"black\", alpha=0.6)\nplt.title(\"Frequency of different types of rooms\")\nplt.xlabel(\"Type of room\")\nplt.ylabel(\"Frequency\")\nplt.show()\n","6c3a8bac":"# Lets see with neighoburhood group now\nunique_neighbourhoods = list(data[\"neighbourhood_group\"].unique())\nprint(unique_neighbourhoods)\n\n# assign colors for plotting\ndict_col = {\"Brooklyn\": \"turquoise\", \"Queens\": \"red\", \"Staten Island\": \"green\", \"Bronx\": \"gold\", \"Manhattan\": \"blue\"}\ncol_list = [dict_col[neighbourhood] for neighbourhood in data[\"neighbourhood_group\"]]\ncolor_list = [\"turquoise\", \"blue\", \"red\", \"green\", \"gold\"]\n\nlist_ng = list(data[\"neighbourhood_group\"])\n\nlist_counts = [list_ng.count(\"Brooklyn\"), list_ng.count(\"Manhattan\"), list_ng.count(\"Queens\"), list_ng.count(\"Staten Island\"),\n    list_ng.count(\"Bronx\")]\n\n# Plot frequency counts\nplt.bar(x=unique_neighbourhoods, height=list_counts, color=color_list, alpha=0.6)\nplt.xlabel(\"Neighbourhood\")\nplt.ylabel(\"Number of listings\")\nplt.title(\"Number of listings by neighbourhood\")\nplt.show()\n\n\n# PLot showing gdp's of each burough \ngdps = [91.559, 600.244, 93.310, 14.514, 42.695]\nplt.bar(x=unique_neighbourhoods, height=gdps, color=color_list, alpha=0.6)\nplt.title(\"GDP's of each neighbourhood (US$ billions)\")\nplt.xlabel(\"Neighbourhood Group\")\nplt.ylabel(\"GDP (US$ billions)\")\nplt.show()\n\n# Plot showing population density (persons \/ squaremile)\npkmsq = [34137, 72033, 21460, 8112, 34653]\nplt.bar(x=unique_neighbourhoods, height=pkmsq, color=color_list, alpha=0.6)\nplt.title(\"Population density of New York Neighbourhood groups\")\nplt.xlabel(\"Neighbourhood Group\")\nplt.ylabel(\"Population Density (persons\/sq. mi)\")\nplt.show()\n\n# Pie chart showing populations (gathered 10\/12\/2019)\npopulations = [2533000, 1629000, 2359000, 479458, 1471000]\nplt.pie(populations, labels=unique_neighbourhoods, colors=color_list)\nplt.title(\"Populations of New York neighbourhoods\")\nplt.show()\n","96ca3155":"# Average price of prices\ndef get_price_neighbourhood(dataF, neighbourhood):\n    list_price_neighbourhood = [dataF[\"price\"][i] for i in range(len(dataF)) if dataF[\"neighbourhood_group\"][i] == neighbourhood]\n    return list_price_neighbourhood\n    \n    \nbrooklyn_list = get_price_neighbourhood(data, \"Brooklyn\")\nmanhattan_list = get_price_neighbourhood(data, \"Manhattan\")\nqueens_list = get_price_neighbourhood(data, \"Queens\")\nstaten_island_list = get_price_neighbourhood(data, \"Staten Island\")\nbronx_prices_list = get_price_neighbourhood(data, \"Bronx\")\n\naverages_list = [np.average(brooklyn_list), np.average(manhattan_list), np.average(queens_list), np.average(staten_island_list), np.average(bronx_prices_list)]\n\nplt.bar(x=unique_neighbourhoods, height=averages_list, color=color_list, alpha=0.6)\nplt.title(\"Average price of listing by neighbourhood\")\nplt.xlabel(\"Neighbourhood\")\nplt.ylabel(\"Average price\")\nplt.show()\n\n# boxplots showing price distributions\nfigure(figsize=(10,15))\nplt.boxplot(x=[brooklyn_list, manhattan_list, queens_list, staten_island_list, bronx_prices_list], patch_artist=True, labels=unique_neighbourhoods)\nplt.show()\n","8c8c1629":"# Let's drop all with price == 0\ndata = data.drop(data[data.price == 0].index)\n\n# boxplots showing price distributions\nfigure(figsize=(10,10))\nplt.boxplot(x=[brooklyn_list, manhattan_list, queens_list, staten_island_list, bronx_prices_list], patch_artist=True, labels=unique_neighbourhoods, showfliers=False)\nplt.show()\n","666fb51e":"#### Wait....\nHmmm,not very visually pleasing. Boxplots split the data into Quartiles and Flier points. The flier points are represented by the dots on the graph above. This plot is not easily interpretable as the range of the dataset is so large (10,000 to 0).\n\nBut before we do this let's look at the flier points. The outliers give us some insight into where the upper-class listings lie. Unsurprisingly, we see Manhattan has a higher Upper Quartile Limit, and more flier points than any other. Brooklyn seems to have less flier points than Manhattan and those points are less densely populated. We also see that Queens and Bronx have no listings over 3000 and Staten Island has one over 4000 but no other listings over 1000.\n\nLet's process some of this data out. Note that there are listings with 0$ price. Let's remove these listings, as we shall label them as human errors (i don't believe anyone is offering any free place to stay...). We should be able to see the bulk of the data after getting rid of the flier points momentarily. ","d2ac59a9":"### 1. Summary of plots and Business Strategy\n\nOne thing in particular is noticeable from the first figure(top): it is that the Number of listings for Manhattan and Brooklyn are far higher than those of Bronx and Queens (and of course Staten Island). \n\nRemember GDP is a measure of how the total value of final goods and services produced within a countries (or neighbourhood in our case) borders. We can use this as a measure of the \"general wealth\" of the area. We see that Manhattan is FAR superior in terms of their GDP, with Brooklyn far behind in second. Interestingly the GDP of Brooklyn and Queens are very similar whilst the number of listings differ quite a bit. We can link this to population density being 1.5x more in Brooklyn, so if GDP is the same, more people = more listings. We also see that the population density of The Bronx is higher than that of Brooklyn but GDP of 2x that of The Bronx, even though populations are very similar. \n\nWe can conclude that having a high population density in combination to a low GDP can lead to a low number of AirBnb listings. Why is this? Well, it is fair to say that tourists are the main market for airbnb hosts, and tourists generally would settle for \"nicer\" looking place, and nicer looking places tend to be in higher GDP areas. The question would be for The Bronx, and Queens is: would it be worth setting up an AirBnb?   \n\nWhat we can take away from this, is that AirBnb should come up with a strategy that targets Queens, as it is a highly populated area, is close to Manhattan and has a decent GDP indicating the wealth of the area (and potential). The Bronx is known to have a high poverty rate (28%) so targeting this area may not be worth the costs.  \n","f94c9aec":"### Concluding and possibly naive suggestions!\n\nWe can make a few suggestions based on the Analysis above: \n\n- The population density and population of Queens is not too far off from Brookyln, yet the number of listings and the average price is much lower. It is also not too far from Manhattan (Businesss\/Culteral Center), so we why is there a lack of listings in Queens?\n- The answer could be discovered in this interesting report here => https:\/\/www.osc.state.ny.us\/osdc\/rpt1-2019.pdf\n- Summarizing the report, it shows that there has been very recent rapid growth in job gains and Taxable Business Sales, so Queens has seen some overall success recently. You could say it is the perfect moment to really push AirBnb marketing strategies to this growing neighbourhood to make use of it's proximity to Manhattan and it's large population.   ","2bd18b96":"## Goal of analysis:\n\nWe are aiming to get an overview of AirBnb listings in New York City 2019, with the aim of providing improvement suggestions and stragies for AirBnb going forward. It is key that when making suggestions we look at issues at all angles.\n\n#### Notes before we start\n- Pricing is in US Dollars\n- Price is per night\n","532cef5d":"### 2. Let's look at some Pricing Patterns","20d3b79e":"#### Interpretation\nNow the graph is a bit easier to interpret. \nJust a review of how to interpret Boxplots, each \"section\" represents 25% of the data (not including outlier points). So: \n- The bottom whisker represents the bottom 25% which is from the MIN value to the Lower Quartile (LQ - Bottom of the Box). \n- The box represents the middle 50% of the data (Inter-Quartile Range), you should look at the Box as the Bulk of the data, the median is shown by the orange line (25% above and 25% below)\n- The top whisker finally represents the Top 25%, from Upper Quartile (UQ - Top of box) to MAX value. \n\n#### Manhattan high prices\nManhattan is the noticeable neighbourhood here with an UQ that is higher then the MAX values of Queens, Staten Island and Bronx. Manhattan's Median is also just about the same as Brooklyns UQ, showing the real difference between Manhattan and the rest of the Neighbourhoods. Manhattan is known as New York city's economic and administrative center, cultural identifier, and historical birthplace. Airbnb's primary market are of course tourists so it would make sense why the prices in Manhattan are far higher than the other neighbourhood's.  \n\n#### Distributions, spread of the listings price\nWe can look at the skew, by looking at the box part of the plot. If there is a larger top portion of the box the data is right-skewed (more prices higher than median), if there is a larger bottom portion of the box the data is left-skewed (more prices lower than median). \n\n#### Other observations\nSo, we notice the plots of Queens, Staten Island and the Bronx are all quite compact compared to Brooklyn and Manhatten showing that the Range and the IQR are quite a bit smaller. We also see that in those 3 neighbourhoods prices tend to be lower, with medians around 70ish and Max values around 200.\n\n\n\n","0d884cad":"### 1. Let's identify some neighoburhood group patterns\n"}}