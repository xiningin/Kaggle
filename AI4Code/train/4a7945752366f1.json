{"cell_type":{"35d824f2":"code","0f9cc9d8":"code","aee165c2":"markdown","9d67f970":"markdown","9b953edb":"markdown","93c5f3a3":"markdown","2b5ebaf2":"markdown","0e6c34cb":"markdown","cbacd633":"markdown","dc24576e":"markdown","8d1900ad":"markdown","b329bd3d":"markdown","503a1836":"markdown","f5431e4f":"markdown","aa15ea1a":"markdown"},"source":{"35d824f2":"\"\"\"\n#!\/usr\/bin\/env bash\n\nCUR_DIR=$pwd\nDATA_DIR_LOC=dataset\n\nmkdir -p $DATA_DIR_LOC\ncd $DATA_DIR_LOC\n\nif [ \"$(ls -A $(pwd))\" ]\nthen\n    echo \"$(pwd) not empty!\"\nelse\n    echo \"$(pwd) is empty!\"\n    pip install kaggle --upgrade\n    kaggle competitions download -c severstal-steel-defect-detection\n    mkdir train\n    mkdir test\n    unzip train_images.zip -d train\n    unzip test_images.zip -d test\nfi\n\ncd $CUR_DIR\necho $(pwd)\n\"\"\"","0f9cc9d8":"print(\"Thank you\")","aee165c2":"WARNING: Do not forget to stop your instance!!! `sudo shutdown now` \n\nAlso, do not forget to monitor your billing, if you go beyond your credit it will start charging your card","9d67f970":"![image.png](attachment:image.png)","9b953edb":"## 1.0 Setting up\nOnce you connected to your instance you may want to install python, conda, pytorch, cuda... on it. You may use kaggle-docker for it, but it could be too exhaustive for your project.\n\nFor GPU: \n\nYou can install CUDA like here: https:\/\/medium.com\/better-programming\/install-tensorflow-1-13-on-ubuntu-18-04-with-gpu-support-239b36d29070\n\nOr here: https:\/\/medium.com\/datadriveninvestor\/complete-step-by-step-guide-of-keras-transfer-learning-with-gpu-on-google-cloud-platform-ed21e33e0b1d\n\nAlso, when you select system for your VM instance (you go to boot list -- press change and you select the system), some will have CUDA pre-installed, I think Debian will have (please correct meif I am wrong), To use containers you can also select there a container-friendly system with docker, but selecting a system with CUDA is the easiest option.  \nOnce you have a GPU turned on type nvidia-smi; if CUDA is installed, you should see your GPU in the printed table.\n\nNow you are ready to start. \n\nLets take this competition as an example: https:\/\/www.kaggle.com\/c\/severstal-steel-defect-detection","93c5f3a3":"## 0.5 Connect to your instance\nIf you use Putti or MobaXTerm to connect you may want to generate public-private key pair (they have keygens). Go to your instance, press edit and add copy **public** key to metadata. \nThen go to MobaXTerm or Putty and set up and new ssh session, add your instance static IP, go to advanced settings and select \"use private key\" and load your **private** key there","2b5ebaf2":"Many competitions offer google cloud platform (GCP) credits. Here I put together the helper instructions how to actually use them and set everything up. \n\n## Prerequisites:\n\nYou'll need \n\na) a google account \n\nb) a valid credit or debit card\n\n## Starting\n\nLogin to your google account, then go to google cloud console. \n\nAdd your card details in billing section. \n\nFollow the link in your email to get your credit (it should direct you to your console automatically).\nYou can also avail of 300$ credit when you first try GCP. ","0e6c34cb":"## 2.1 Proper way to download the dataset\n\nInstall kaggle API (pip install kaggle). \n\nGet kaggle.json from you profile. Go to Edit profile and press \"Create New API Token\"\n![image.png](attachment:image.png)","cbacd633":"## 0.2 Choose instance set up\n\nWhen choosing the region see what GPUs are avaiable for this particular region, they differ. The list of GPUs available in different regions is here: \nhttps:\/\/cloud.google.com\/compute\/docs\/gpus\/\n![image.png](attachment:image.png)\n\nPre-emtible instances are cheaper, but they can stop suddenly and need to restart every 24 hours. I normally create 4 CPU instance with Ubunta 16.04 and 100G hard drive for the start. Do not add GPU at the start as it would not allow you. We'll make it later. ","dc24576e":"## 0.4 Get static IP\nThe last bit you want is to set a static IP adress for your virtual machine. On your GCP go to VPC Network -- External IP Address -- select your new instance and change IP type to static.","8d1900ad":"## 2.0 Download dataset\nThe worst and the least efficient way to do so is to go on competition dataset page and press download... wait... and then use WinSCP to upload it on your instance... \nThis is the ultimate dump stupid way, because the downloading may fail, then you may restart it, uploading fails and takes long-long-long time, leaving you in frustration and ageing before you get the data.\n\nHow do I know that? That's exactly how I was doing it for the first several months :facepalm: :lol:","b329bd3d":"## 0.0 Create your first project\n\npress 'My first Project' at the top of the console, and then New Project, choose a name and press Create","503a1836":"## 0.3 Request quota increase\nTo be able to add GPU to your instance you need to request a quota increase first. Go to Qoutas and add 1 GPU. It may take a day to get approval and you should receive an email.\n![image.png](attachment:image.png)\n\nOnce you got an approval, get back to your instance, press Edit, add a GPU, then press start. The instance should be running.  \n","f5431e4f":"then create a directory `mkdir .kaggle` and copy kaggle.json to it  \n\nrun `pip install kaggle`\n\nmake a bash script to download and unzip the data, you may give it a dummy name download_data.sh and then simply run:\n\nbash download_data.sh","aa15ea1a":"## 0.1 Create an instance \n![image.png](attachment:image.png)"}}