{"cell_type":{"ffaa2ed3":"code","9b9b7642":"code","98cf5174":"code","2eb1f29b":"code","187028f8":"code","7ada4310":"code","1087f779":"code","3eb96397":"code","3b7f2937":"code","e10ce569":"code","867d83e0":"code","c74e9783":"code","cb8f966f":"code","de0ceff4":"code","771f1950":"code","c5d37b8f":"code","f7ef9b06":"code","48ac921d":"code","e026d184":"code","99f04a2a":"code","2c03a54d":"code","8c98977e":"code","5b933a86":"code","38590a7c":"code","00bf19b7":"code","7190207a":"code","ee40c04c":"code","256923de":"code","e78c6eed":"code","965dd464":"code","831c3215":"code","7a29bb85":"code","0f26367e":"code","36e93268":"code","a39a66b5":"code","c7be7b9f":"code","62ced1d6":"code","7ef8cd6a":"code","95d02beb":"code","309b0e93":"code","9a7b5574":"code","2acd93ef":"code","13e6bb5f":"code","67ae217e":"code","53415669":"code","0583e584":"code","e5c885c7":"code","5bd6db6e":"code","65771bfc":"code","a05d7b32":"code","440abc02":"code","987300e6":"code","70ca432c":"code","9b987544":"code","30a42f82":"code","81ea30a8":"code","427a4ff5":"code","46e47301":"code","e8b065c0":"code","cda6c7e8":"code","c0b62ede":"code","8074def7":"code","36396155":"code","cb131395":"code","602c905d":"code","93e43fe7":"code","3dc967f6":"code","773a67fa":"markdown","06241d5f":"markdown","8fbdd5b5":"markdown","9289c049":"markdown","a96e403a":"markdown","fb44bf09":"markdown","ce54a4ba":"markdown","0ba795c7":"markdown","9a2ab987":"markdown","3fbc5b1c":"markdown","f21afba5":"markdown","27f7d964":"markdown","47afd6a9":"markdown","99067fe6":"markdown","30eda828":"markdown","80d325bb":"markdown","2e924e87":"markdown","fe1ed993":"markdown","3f68787f":"markdown","a8ef1bea":"markdown","19c71f18":"markdown","10f7cc20":"markdown","6019dfdd":"markdown"},"source":{"ffaa2ed3":"import numpy as np, pandas as pd\nimport matplotlib.pyplot as plt, seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')","9b9b7642":"df= pd.read_csv('..\/input\/employee-future-prediction\/Employee.csv')\ndf.head()","98cf5174":"df.info()","2eb1f29b":"df.describe().T","187028f8":"df.isnull().sum()","7ada4310":"df.groupby('LeaveOrNot')['LeaveOrNot'].count()","1087f779":"plt.pie(df.groupby('LeaveOrNot')['LeaveOrNot'].count(),labels=['NO','YES'],autopct='%.2f%%',radius=1.5,explode = (0, 0.1),shadow=True)\nplt.show()","3eb96397":"d1=pd.DataFrame(df.groupby(['Education','LeaveOrNot'])['Education'].count())\nd1","3b7f2937":"prop_df=[]\nfor val in np.sort(df['Education'].unique()):\n    prop=d1['Education'][val][1]\/(d1['Education'][val][1]+d1['Education'][val][0])\n    prop_df.append({\n        'Education':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","e10ce569":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['Education'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('Education')\nplt.show()","867d83e0":"d1=pd.DataFrame(df.groupby(['JoiningYear','LeaveOrNot'])['JoiningYear'].count())\nd1","c74e9783":"prop_df=[]\nfor val in np.sort(df['JoiningYear'].unique()):\n    prop=d1['JoiningYear'][val][1]\/(d1['JoiningYear'][val][1]+d1['JoiningYear'][val][0])\n    prop_df.append({\n        'JoiningYear':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","cb8f966f":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['JoiningYear'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('JoiningYear')\nplt.show()","de0ceff4":"d1=pd.DataFrame(df.groupby(['City','LeaveOrNot'])['City'].count())\nd1","771f1950":"prop_df=[]\nfor val in np.sort(df['City'].unique()):\n    prop=d1['City'][val][1]\/(d1['City'][val][1]+d1['City'][val][0])\n    prop_df.append({\n        'City':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","c5d37b8f":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['City'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('City')\nplt.show()","f7ef9b06":"d1=pd.DataFrame(df.groupby(['PaymentTier','LeaveOrNot'])['PaymentTier'].count())\nd1","48ac921d":"prop_df=[]\nfor val in np.sort(df['PaymentTier'].unique()):\n    prop=d1['PaymentTier'][val][1]\/(d1['PaymentTier'][val][1]+d1['PaymentTier'][val][0])\n    prop_df.append({\n        'PaymentTier':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","e026d184":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['PaymentTier'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('PaymentTier')\nplt.show()","99f04a2a":"sns.distplot(df['Age'])\nplt.show()","2c03a54d":"sns.boxplot(x=df['LeaveOrNot'],y=df['Age'])\nplt.show()","8c98977e":"d1=pd.DataFrame(df.groupby(['Gender','LeaveOrNot'])['Gender'].count())\nd1","5b933a86":"prop_df=[]\nfor val in np.sort(df['Gender'].unique()):\n    prop=d1['Gender'][val][1]\/(d1['Gender'][val][1]+d1['Gender'][val][0])\n    prop_df.append({\n        'Gender':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","38590a7c":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['Gender'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('Gender')\nplt.show()","00bf19b7":"d1=pd.DataFrame(df.groupby(['EverBenched','LeaveOrNot'])['EverBenched'].count())\nd1","7190207a":"prop_df=[]\nfor val in np.sort(df['EverBenched'].unique()):\n    prop=d1['EverBenched'][val][1]\/(d1['EverBenched'][val][1]+d1['EverBenched'][val][0])\n    prop_df.append({\n        'EverBenched':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","ee40c04c":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['EverBenched'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('EverBenched')\nplt.show()","256923de":"d1=pd.DataFrame(df.groupby(['ExperienceInCurrentDomain','LeaveOrNot'])['ExperienceInCurrentDomain'].count())\nd1","e78c6eed":"prop_df=[]\nfor val in np.sort(df['ExperienceInCurrentDomain'].unique()):\n    prop=d1['ExperienceInCurrentDomain'][val][1]\/(d1['ExperienceInCurrentDomain'][val][1]+d1['ExperienceInCurrentDomain'][val][0])\n    prop_df.append({\n        'ExperienceInCurrentDomain':val,\n        'proportion':prop\n    })\n\nprop_df=pd.DataFrame(prop_df)\nprop_df.sort_values('proportion',ascending=False,inplace=True)\nprop_df","965dd464":"plt.figure(figsize=(7,4))\nsns.barplot(x=prop_df['ExperienceInCurrentDomain'],y=prop_df['proportion'])\nplt.title(\"Proportion of employee who leaves the company in next 2 years\")\nplt.xlabel('ExperienceInCurrentDomain')\nplt.show()","831c3215":"df.head()","7a29bb85":"from sklearn.preprocessing import LabelEncoder\nle=LabelEncoder()","0f26367e":"cat_cols=['Education','JoiningYear','City','Gender','EverBenched']","36e93268":"for i in cat_cols:\n    df[i]=le.fit_transform(df[i])","a39a66b5":"df.head()","c7be7b9f":"from sklearn.model_selection import train_test_split","62ced1d6":"y= df.pop('LeaveOrNot')\nX= df","7ef8cd6a":"X_train, X_test, y_train, y_test= train_test_split(X,y,test_size=0.3,random_state=42)","95d02beb":"scores=[]\n\nfrom sklearn.metrics import f1_score","309b0e93":"from sklearn.tree import DecisionTreeClassifier","9a7b5574":"model= DecisionTreeClassifier()\nmodel.fit(X_train,y_train)","2acd93ef":"# Prediction on train\ny_train_pred= model.predict(X_train)","13e6bb5f":"# Prediction on train\ny_test_pred= model.predict(X_test)","67ae217e":"# Performance on test dataset\n## Accuracy\nmodel.score(X_train,y_train)","53415669":"## f1-score\nf1_score(y_train,y_train_pred)","0583e584":"# Performance on test dataset\n## Accuracy\nmodel.score(X_test,y_test)","e5c885c7":"## f1-score\nf1_score(y_test,y_test_pred)","5bd6db6e":"scores.append({\n        'model': 'Decision Tree Classifier',\n        'score': model.score(X_test,y_test),\n        'f1_score' : f1_score(y_test,y_test_pred)\n    })","65771bfc":"from sklearn.ensemble import RandomForestClassifier","a05d7b32":"model= RandomForestClassifier(n_estimators=50, random_state=42)","440abc02":"model.fit(X_train,y_train)","987300e6":"# Prediction on train\ny_train_pred= model.predict(X_train)\n\n# Prediction on test\ny_test_pred= model.predict(X_test)","70ca432c":"# Performance on train dataset\n## Accuracy\nmodel.score(X_train,y_train)","9b987544":"## f1-score\nf1_score(y_train,y_train_pred)","30a42f82":"# Performance on test dataset\n## Accuracy\nmodel.score(X_test,y_test)","81ea30a8":"## f1-score\nf1_score(y_test,y_test_pred)","427a4ff5":"scores.append({\n        'model': 'Random Forest Classifier',\n        'score': model.score(X_test,y_test),\n        'f1_score' : f1_score(y_test,y_test_pred)\n    })","46e47301":"from sklearn.ensemble import GradientBoostingClassifier","e8b065c0":"model=  GradientBoostingClassifier()","cda6c7e8":"model.fit(X_train,y_train)","c0b62ede":"# Prediction on train\ny_train_pred= model.predict(X_train)\n\n# Prediction on test\ny_test_pred= model.predict(X_test)","8074def7":"# Performance on train dataset\n## Accuracy\nmodel.score(X_train,y_train)","36396155":"## f1-score\nf1_score(y_train,y_train_pred)","cb131395":"# Performance on test dataset\n## Accuracy\nmodel.score(X_test,y_test)","602c905d":"## f1-score\nf1_score(y_test,y_test_pred)","93e43fe7":"scores.append({\n        'model': 'Gradient Boosting Classifier',\n        'score': model.score(X_test,y_test),\n        'f1_score' : f1_score(y_test,y_test_pred)\n    })","3dc967f6":"Score = pd.DataFrame(scores,columns=['model','score','f1_score'])\nScore.sort_values('score',ascending=False,inplace=True)\nScore","773a67fa":"**Insight:** Median age of employees leaving is lower","06241d5f":"**Insight:** Due to family obligations, female employees are more likely to depart","8fbdd5b5":"## Model Building","9289c049":"## Gradient Boosting Classifier","a96e403a":"**Let's find proportion of employees leaving on the basis of various factors**","fb44bf09":"## Education","ce54a4ba":"## Age","0ba795c7":"## Decision Tree Classifier","9a2ab987":"**Insight:** New hires are more likely to leave, maybe they are dissatisfied with their positions.","3fbc5b1c":"## Random Forest Classifier ","f21afba5":"## Feature Engineering","27f7d964":"## City","47afd6a9":"## EDA","99067fe6":"**Insight:** Employees with PaymentTier 2 are more inclined to depart, possibly because to increased advancement opportunities","30eda828":"## EverBenched","80d325bb":"**Insight**: Most of the employee who were benched left the company","2e924e87":"**Insight:** Masters degree are most likely to leave the company","fe1ed993":"## Gender","3f68787f":"## ExperienceInCurrentDomain","a8ef1bea":"#### Conclusion: Gradient Boosting Classifier is the best model among all in terms of performance on unseen data (test data)","19c71f18":"## Joining Year","10f7cc20":"## PaymentTier","6019dfdd":"**Insight:** Employees working in Pune are most likely to leave; one possible explanation is the establishment of a new IT cluster in Pune, which would provide new opportunities."}}