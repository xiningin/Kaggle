{"cell_type":{"1a01477f":"code","e7462c70":"code","6a00d7d1":"code","2983c3ec":"code","9cc4f6fd":"code","1c76c1e9":"code","7dc8a4b6":"code","4488bdd8":"code","dd003d7b":"code","42cd12e6":"code","6612753e":"code","64ec0d23":"code","9ebc06b1":"code","3c15549e":"code","a72f9ad6":"code","bc40d898":"code","03fef24f":"code","e4bb9956":"code","5b15bffa":"code","f99d2f87":"code","7403846c":"code","a857305d":"code","ce055505":"code","cdba710f":"code","34eb2e19":"code","703204cb":"code","6447423b":"code","c95ddd8d":"code","9eb9229c":"code","f4b2d14e":"code","344b6522":"code","3b867664":"code","8570930a":"code","a6bcedc6":"code","b8b6d9b0":"code","b34f8ca2":"code","4e05d4f3":"code","402b8cf5":"code","cd516ac2":"markdown","1082e3cd":"markdown","488b9ee3":"markdown","cfbdc358":"markdown","52e6eb3d":"markdown","df334773":"markdown","3662155d":"markdown","780efca1":"markdown","478fa584":"markdown","6900f304":"markdown","91851d49":"markdown","e6aff562":"markdown","e5b3c2aa":"markdown","702dbd83":"markdown","1c83cf16":"markdown","947e32ef":"markdown","cb27c3f3":"markdown","c376c22d":"markdown","f78ce276":"markdown","b65a7033":"markdown","61dbfc3d":"markdown","40a1c89e":"markdown","82821e53":"markdown","119e4c22":"markdown","47d83bfa":"markdown","5d31b051":"markdown","8efaa345":"markdown","89bb350f":"markdown","66399894":"markdown","f520a190":"markdown","39d47e9b":"markdown","4fabbdcd":"markdown","ce5fb3d3":"markdown","061651e1":"markdown","1bcc5c5b":"markdown","c291696b":"markdown","f398d48c":"markdown","19643c1f":"markdown","de39ec8b":"markdown","210fb525":"markdown","13943af3":"markdown","6e1ffdfc":"markdown","684bd1a2":"markdown","b7458b5a":"markdown","f140a5ee":"markdown","56bc76a0":"markdown","ad3caedb":"markdown","363ac566":"markdown"},"source":{"1a01477f":"## Loading the required libraries:\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline\nimport seaborn as sns\n\n\n# for dirname, _, filenames in os.walk('\/kaggle\/input'):\n#     for filename in filenames:\n#         print(os.path.join(dirname, filename))\n","e7462c70":"kaggle=1\n\nif kaggle==1:\n    data=pd.read_csv(\"..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv\")\nelse:\n    data=pd.read_csv(\"..\/data\/AB_NYC_2019.csv\")","6a00d7d1":"## Examining the first 5 rows to understand the type of data:\ndata.head()","2983c3ec":"data.shape","9cc4f6fd":"data.columns","1c76c1e9":"## Check if any of the columns has null value:\ndata.isna().sum()","7dc8a4b6":"## Number of unique listings:\nprint(f'There are {data.id.nunique()} unique listings in the neighbourhood')","4488bdd8":"## Check the location of the listings where maximum listings:\ndata.neighbourhood_group.value_counts()","dd003d7b":"# Check the area where the number of listings are higher:\nneighbourhood_group=data.neighbourhood_group.unique()\nfor n in neighbourhood_group:\n    print(f'Top 5 neighbourhood in neighbourhood group {n}')\n    print(data.loc[data['neighbourhood_group']==n]['neighbourhood'].value_counts()[:5])\n    print()","42cd12e6":"## Room Type % listing:\n(data['room_type'].value_counts()\/data.shape[0])*100","6612753e":"## Check the distribution of price:\nplt.figure(figsize=(8,8))\nsns.distplot(data['price'],bins=50,kde=True)\nplt.title(\"Distribution of price(in USD)\")","64ec0d23":"data['price'].describe()","9ebc06b1":"plt.figure(figsize=(8,8))\nsns.distplot(data[(data['price']>0) & (data['price']<1000)]['price'],bins=50,kde=True)\nplt.title(\"Distribution of price(in USD)\")","3c15549e":"data.loc[data.price==10000]","a72f9ad6":"## Check the average property value for each neighbourhood group:\nplt.figure(figsize=(8,8))\nsns.boxplot(x=data['neighbourhood_group'],y=data['price'],palette=sns.color_palette('Set2'))\nplt.title(\"Boxplot of price for each neighbourhood group\",fontsize=15)\nplt.xlabel(\"Neighbourhood group\",fontsize=12)\nplt.ylabel(\"Price\",fontsize=12)\nplt.show()","bc40d898":"data.groupby('neighbourhood_group')['price'].agg(['median','mean']).sort_values('median',ascending=False)","03fef24f":"## Minimum nights and price:\nplt.figure(figsize=(8,8))\nsns.scatterplot(x='price',y='minimum_nights',data=data[(data.price>0) & (data.minimum_nights>0)])\nplt.title(\"Price Vs Number of Nights\",fontsize=15)\nplt.xlabel(\"Price\",fontsize=12)\nplt.ylabel(\"Number of minimum nights\",fontsize=12)\nplt.show()","e4bb9956":"data.groupby('neighbourhood_group').agg({'price':'median','minimum_nights':'median'}).sort_values(\"price\",ascending=False)","5b15bffa":"## Room Type and Price:\ndata.groupby('room_type')['price'].median()","f99d2f87":"### Price and reviews:\nplt.figure(figsize=(8,8))\nsns.scatterplot(x='price',y='number_of_reviews',data=data[data.price<1000])\nplt.title(\"Relation between price and number of reviews(For properties less than 1000 USD)\",fontsize=15)\nplt.xlabel(\"Price\",fontsize=12)\nplt.ylabel(\"Number of review\",fontsize=12)\nplt.show()","7403846c":"print(f'There are {data.host_id.nunique()} unique hosts in the dataset')","a857305d":"## Host listing count:\nplt.figure(figsize=(8,8))\nsns.distplot(data.calculated_host_listings_count,bins=20,kde=False)\nplt.title(\"Distribution of Number of properties listed by host\",fontsize=15)\nplt.xlabel(\"Number of properties by host\",fontsize=12)\nplt.show()","ce055505":"(data[data.calculated_host_listings_count<50]['host_id'].nunique()\/data.shape[0])*100","cdba710f":"data.calculated_host_listings_count.describe()","34eb2e19":"plt.figure(figsize=(8,8))\nsns.boxplot(x='room_type',y='calculated_host_listings_count',data=data)\nplt.title(\"Boxplot of properties listed by each host with room type\",fontsize=15)\nplt.xlabel(\"Room Type\",fontsize=10)\nplt.ylabel(\"Number of properties listed by each host\",fontsize=10)\nplt.show()","703204cb":"variety=data[data.calculated_host_listings_count>1].groupby('host_id')['room_type'].nunique().reset_index().sort_values('room_type',ascending=False)\nprint(f'Number of hosts with all three room types listed in Airbnb {len(variety[variety.room_type==3].host_id)}')","6447423b":"variety_data=data[data.host_id.isin(variety[variety.room_type==3].host_id)]\nvariety_data.groupby('host_id')['neighbourhood_group'].nunique().sort_values(ascending=False)","c95ddd8d":"set(variety_data[variety_data.host_id==213781715]['neighbourhood_group'])","9eb9229c":"max_host=data[data.calculated_host_listings_count==327]","f4b2d14e":"print(f'Name of host:{list(max_host.host_name.unique())}')\nprint(f'Neighborhood groups listed:{list(max_host.neighbourhood_group.unique())}')\nprint(f'Neighbourhoods listed:{list(max_host.neighbourhood.unique())}')\nprint(f'Room type listed:{list(max_host.room_type.unique())}')\nprint(f'Maximum price listed:{max(max_host.price)} USD Located in neighbourhood {max_host[max_host.price==max(max_host.price)].neighbourhood.unique()}')\nprint(f'Minimum price listed:{min(max_host.price)} USD Located in neighbourhood {max_host[max_host.price==min(max_host.price)].neighbourhood.unique()}')","344b6522":"## Top 5 Host with maximum median price and median nights for those holding more than 1 property:\ndata[data.calculated_host_listings_count>1].groupby('host_id').agg({'price':'median','minimum_nights':'median'}).sort_values('price',ascending=False)[:5]","3b867664":"## Create date columns from last review date:\ndata['last_review']=pd.to_datetime(data['last_review'])\ndata['year']=data['last_review'].dt.year\ndata['month']=data['last_review'].dt.month\ndata['day']=data['last_review'].dt.day\ndata['day_name']=data['last_review'].dt.day_name()","8570930a":"data.head()","a6bcedc6":"multi_host=data[data.calculated_host_listings_count>1]","b8b6d9b0":"multi_host['review_min']=multi_host.groupby('host_id')['number_of_reviews'].min()\nmulti_host['review_max']=multi_host.groupby('host_id')['number_of_reviews'].max()\nmulti_host['review_median']=multi_host.groupby('host_id')['number_of_reviews'].median()\nmulti_host['review_diff']=multi_host.groupby('host_id')['number_of_reviews'].max()-multi_host.groupby('host_id')['number_of_reviews'].min()","b34f8ca2":"multi_host.describe()","4e05d4f3":"def _gen_histogram(df,column):\n    plt.figure(figsize=(8,8))\n    sns.distplot(df[column].dropna(),bins=10)\n    plt.xlabel(r\"{}\".format(column))\n    plt.ylabel(\"Density\")\n    plt.title(r\"Distribution of {}\".format(column))","402b8cf5":"columns=['review_min','review_max','review_median','review_diff']\n\nfor c in columns:\n    _gen_histogram(multi_host,c)","cd516ac2":"The distibution of price is right skewed with the property prices less than 1000 USD.We also have properties with USD 10,000 .Lets check the summary statistics & plot a separate histogram to understand the distribution between price range 0 -1000 USD.","1082e3cd":"* There are 23 hosts with all three room types listed.Lets check whether they have listed in same or in different neighbourhood.","488b9ee3":"## Review Count","cfbdc358":"## Minimum nights and price:","52e6eb3d":"## Area where the number of listings are higher:","df334773":"Since we only have the last review count , we wont be able to do any interesting analytics on it . If we would have had the time stamp of review ,we would have known about the pattern in which certain rooms are getting booked , see whether there were any seasonal pattern in room booking , whether any property is busy only on weekdays \/weekends etc . But here we only have the last review date.Hence we restrict ourselves to check whether the hosts with all the properties have received equal reviews etc.","3662155d":"**Work in progress.If you like my kernel,pls upvote and comment.**","780efca1":"# Host Analysis","478fa584":"Each row represents a unique listing.","6900f304":"## Location of the listings where maximum listings are present:","91851d49":"Manhattan and Brooklyn have properties with higher median price and the median number of minimum nights required to stay are 3 days while the rest of the neighbourhood group the minimum number of nights required are 2 nights.","e6aff562":"* As mentioned earlier,the variable is dominated by outliers.Rooms of type private and entire home has more outliers than Shared rooms.We understood from the previous analysis that there are only 2% of shared room listings.\n* While this analysis provides an overall scenario of the property type,lets check the number of host who have all three property types listed in Airbnb.","e5b3c2aa":"From the above plot it is seen that the number of reviews are higher for those properties in the price range 0-400 USD.The maximum number of reviews is 200 as the price for the property increases.","702dbd83":"## Host with all three room type","1c83cf16":"# Airbnb Open Data Analysis","947e32ef":"The property is hosted at Manhattan and its neighbourhoods.The rooms are either listed as entire home or private room.The maximum property price is listed at Theater District and Financial Disrict whereas the minimum price is listed in Financial district.","cb27c3f3":"## Host listing count","c376c22d":"51 % of the rooms listed are entire home\/apt .The median price of such rooms are relatively higher compared to private rooms.","f78ce276":"While there are 16 rows with missing name , there are 21 rows where host name is missing.There are 10k rows here review is missing.My guess is that these are new listings and hence we dont have a review yet.","b65a7033":"51 % of the rooms listed have rented their entire property whereas 45 % have listed their private room.2% have shared room facility listed in Airbnb.","61dbfc3d":"Couple of observations:\n\n* From all the plots,it is understood that from the host having more than 1 property,it is observed that most of them did no receive any review.\n    \n* The minimum review varies in the range 0-100 with most of the host receiving anywhere between 0-10.There are spikes in between which indicates that some properties have been extremely popular among guests.\n    \n* The maximum review also lies in the similar range 0-20.There is a split in 90-100,200-210 and ~250-260 range.\n    \n* The median review count indicates that the distribution is sligthly right skewed with the mean somewhere between 40-50.This also suggests that most of the hosts receive reviews across their properties anywhere between 0-50 range.\n    ","40a1c89e":"There are three properties in the price of 10000 USD and they are availale in Queens ,Brooklyn and Manhattan.While the property at Queens and Brooklyn are not available for booking ,Manhattan property is available to book for 83 days in a year and the minimum number of nights required to stay is for a month.This property has not got any reviews so far.","82821e53":"The above analysis shows the median price for the property hosted by a person with more than 1 listings.The median price for such host is 3780 USD and the minimum night requirement is 1.For host 16105313,though the price is not too high ,the minimum nights requirement is very high.","119e4c22":"The dataset has 48k rows and 16 columns.","47d83bfa":"# Loading required libraries","5d31b051":"## Average property value for each neighbourhood group","8efaa345":"## Host and Room Type","89bb350f":"* We see that Manhattan has higest median property price followed by Brooklyn.Queens and Staten Island have equal median price value.\n* The average price at Staten Island is third higest whereas its median property value is same as Queens.","66399894":"Ploting boxplot for all the neighbourhood group, we see that there many outliers in each group and there is no clear understanding of price range.Lets groupby neighbourhood group and understand the median price.","f520a190":"## Distribution of price:","39d47e9b":"## Price and reviews","4fabbdcd":"According to [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/Airbnb) , Airbnb, Inc. is an online marketplace for arranging or offering lodging, primarily homestays, or tourism experiences. The company does not own any of the real estate listings, nor does it host events; it acts as a broker, receiving commissions from each booking.\n\nAirbnb's name comes from AirBreadaNdBreakfast after its founders put bed matresses in their living room turning their room into bed and breakfast lodging inorder to offset higher house rent cost at San Franscisco.\n\nWhat started our as a small bed mattresses in a appartment floor now has listings of nearly 6 million worldwide.Atleast 2 million people stay worldwide in Airbnb's properties.\n\nThe dataset includes the Airbnb listing in New York city and includes information like properties found in the neighbourhood,price and the availability to name a few.\n\nLets begin our analysis and uncover some interesting insights.","ce5fb3d3":"# Loading the data","061651e1":"From our earlier analysis , we understood that the maximum number of listing by a single host is 327.Lets check the details for this host.","1bcc5c5b":"## Room Type % listing:","c291696b":"## Owner and Review","f398d48c":"For the upcoming analysis,we consider only the host who have listed more than 1 properties in Airbnb.","19643c1f":"# Reviews","de39ec8b":"Of the 23 hosts,only one host has listed the properties in 3 neighbourhood groups - Brooklyn,Manhattan and Queens whereas the rest of them have listed their property in the same neighbourhood.","210fb525":"## Room Type and Price","13943af3":"## Maximum Listing by host","6e1ffdfc":"There is no clear relationship between the price and the number of minumum nights.There are various options to choose when it comes to number of minimum nights and the price charged.There are properties where the minimum nights requirement is higher but the price is less.","684bd1a2":"* From the summary statistics,we understand that the average value of the property is USD 152 while the median value is USD * 106.The maximum property value is 10,000 USD .How many properties are there in this price? \n* The histogram plot for price between 0-1000 USD is more interpetable and we get to know that the distribution is skewed towars right .We have more properties in the price range 0-200 USD.","b7458b5a":"## Number of unique listings:","f140a5ee":"There are 5 locations and Mahhattan has the highest listings followed closely by Brooklyn.Staten Island has lowest listing.Lets check the top 5 areas in each location which has maximum listing.","56bc76a0":"# Neighbourhood Analysis","ad3caedb":"The distribution is skewed towards right.On an average , each host has listed 7 properties.We see that the data has lot of outliers with a single host having listed 327 properties.Lets check the type of rooms they have listed.","363ac566":"# Price Analysis"}}