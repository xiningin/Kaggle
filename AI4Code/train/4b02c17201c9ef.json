{"cell_type":{"eda77bae":"code","b19e34c8":"code","8a629716":"code","74bf3e32":"code","e36bca54":"code","d1589f6d":"code","6115ace3":"code","d722d714":"code","5b18d626":"code","23e97b44":"code","1639f181":"code","98784fa7":"code","279f8033":"code","0da308a1":"code","160c04b6":"code","8f294e70":"code","067f83eb":"code","8cce48cb":"code","ca0917a6":"code","ebaf33e3":"code","69d7c167":"code","39c92131":"code","fc4902e1":"code","55a5025b":"code","4d6d0f5d":"code","e2e26d61":"code","aeeb7e1b":"code","3aea848d":"code","ccea5f79":"code","3cd3c2e9":"code","56c09c13":"code","ff8c2384":"code","299f0880":"code","f6f01b28":"code","78f1dd93":"code","15af63b5":"code","b72416a5":"code","7c162bb3":"code","8e20c3d2":"code","1a573849":"code","8790c2fb":"code","14cc361b":"code","a7f0bcfe":"markdown","86b19c18":"markdown","f9fcbd73":"markdown","860183e2":"markdown","771f1e28":"markdown","bc71f185":"markdown","7931c3fc":"markdown","6fd0f5da":"markdown","bcc6aa94":"markdown","e4d67ddb":"markdown","ff5ef982":"markdown","e681d28a":"markdown","eb7819c7":"markdown","192b0a3d":"markdown","f9d06930":"markdown","d0c9b7a4":"markdown","8ef392de":"markdown","3bdb279a":"markdown","a5fec4e4":"markdown","ee57488b":"markdown","8bc091f5":"markdown","ddf302c7":"markdown","d3c4d8f8":"markdown","24a532c9":"markdown","795da8bc":"markdown","c6d3a6af":"markdown","a1462456":"markdown","8ae214ae":"markdown","e8affea0":"markdown","87d90914":"markdown","8dda5fc2":"markdown","bd54cd3a":"markdown","2a3741a3":"markdown","efae14b0":"markdown","ebc28efe":"markdown"},"source":{"eda77bae":"import pandas as pd\nimport numpy as np\nimport sys\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nfrom plotly import tools\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)","b19e34c8":"os.listdir(\"..\/input\")","8a629716":"multiple_df = pd.read_csv('..\/input\/multipleChoiceResponses.csv', low_memory=False)\nfree_df = pd.read_csv('..\/input\/freeFormResponses.csv', low_memory=False)\nschema_df = pd.read_csv('..\/input\/SurveySchema.csv', low_memory=False)","74bf3e32":"print(\"Multiple choice response - rows: {} columns: {}\".format(multiple_df.shape[0], multiple_df.shape[1]))\nprint(\"Free form response - rows: {} columns: {}\".format(free_df.shape[0], free_df.shape[1]))\nprint(\"Survey schema - rows: {} columns: {}\".format(schema_df.shape[0], schema_df.shape[1]))","e36bca54":"multiple_df.head(3)","d1589f6d":"free_df.head(3)","6115ace3":"def missing_data(data):\n    total = data.isnull().sum().sort_values(ascending = False)\n    percent = (data.isnull().sum()\/data.isnull().count()*100).sort_values(ascending = False)\n    return pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])","d722d714":"df = missing_data(multiple_df)","5b18d626":"def plot_percent_of_available_data(title):\n    trace = go.Box(\n        x = df['Percent'],\n        name=\"Percent\",\n         marker=dict(\n                    color='rgba(238,23,11,0.5)',\n                    line=dict(\n                        color='tomato',\n                        width=0.9),\n                ),\n         orientation='h')\n    data = [trace]\n    layout = dict(title = 'Percent of available data  - all columns ({})'.format(title),\n              xaxis = dict(title = 'Percent', showticklabels=True), \n              yaxis = dict(title = 'All columns'),\n              hovermode = 'closest',\n             )\n    fig = dict(data=data, layout=layout)\n    iplot(fig, filename='percent')","23e97b44":"plot_percent_of_available_data('multiple_df')","1639f181":"plot_percent_of_available_data('free_df')","98784fa7":"tmp = pd.DataFrame(multiple_df.columns.values)\ncolumns = []\nfor i in range(1,50):\n    var = \"Q{}\".format(i)\n    l = len(list(tmp[tmp[0].str.contains(var)][0]))\n    if(l == 1):\n        columns.append(var)\n\nprint(\"The columns with only one item in the column group are:\\n\",columns)","279f8033":"def get_categories(data, val):\n    tmp = data[1::][val].value_counts()\n    return pd.DataFrame(data={'Number': tmp.values}, index=tmp.index).reset_index()","0da308a1":"df = get_categories(multiple_df, 'Q1')","160c04b6":"def draw_trace_bar(data, title, xlab, ylab,color='Blue'):\n    trace = go.Bar(\n            x = data['index'],\n            y = data['Number'],\n            marker=dict(color=color),\n            text=data['index']\n        )\n    data = [trace]\n\n    layout = dict(title = title,\n              xaxis = dict(title = xlab, showticklabels=True, tickangle=15,\n                          tickfont=dict(\n                            size=9,\n                            color='black'),), \n              yaxis = dict(title = ylab),\n              hovermode = 'closest'\n             )\n    fig = dict(data = data, layout = layout)\n    iplot(fig, filename='draw_trace')","8f294e70":"draw_trace_bar(df, 'Number of people', 'Gender', 'Number of people' )","067f83eb":"draw_trace_bar(get_categories(multiple_df,'Q2'), \"Number of people in each age range\", \"Age range\", \"Number of people\", \"Green\")","8cce48cb":"df = get_categories(multiple_df, 'Q3')\ndf.head()","ca0917a6":"trace = go.Choropleth(\n            locations = df['index'],\n            locationmode='country names',\n            z = df['Number'],\n            text = df['index'],\n            autocolorscale =False,\n            reversescale = True,\n            colorscale = 'rainbow',\n            marker = dict(\n                line = dict(\n                    color = 'rgb(0,0,0)',\n                    width = 0.5)\n            ),\n            colorbar = dict(\n                title = 'Respondents',\n                tickprefix = '')\n        )\n\ndata = [trace]\nlayout = go.Layout(\n    title = 'Number of respondents per country',\n    geo = dict(\n        showframe = True,\n        showlakes = False,\n        showcoastlines = True,\n        projection = dict(\n            type = 'natural earth'\n        )\n    )\n)\n\nfig = dict( data=data, layout=layout )\niplot(fig)","ebaf33e3":"draw_trace_bar(get_categories(multiple_df,'Q4'), \"Highest level of formal education\", \"Education\", \"Number of people\", \"Magenta\")","69d7c167":"draw_trace_bar(get_categories(multiple_df,'Q5'), \"Undergraduate major (best descrition)\", \"Undergraduate major\", \"Number of respondents\", \"Orange\")","39c92131":"draw_trace_bar(get_categories(multiple_df,'Q6'), \"Current title\", \"Current title\", \"Number of respondents\", \"Red\")","fc4902e1":"draw_trace_bar(get_categories(multiple_df,'Q7'), \"Current employer industry\", \"Current employer industry\", \"Number of respondents\", \"Tomato\")","55a5025b":"draw_trace_bar(get_categories(multiple_df,'Q8'), \"Years of experience in the current employer industry\", \"Years of experience\", \"Number of respondents\", \"Lightblue\")","4d6d0f5d":"draw_trace_bar(get_categories(multiple_df,'Q9'), \"Current yearly compensation\", \"Current yearly compensation\", \"Number of respondents\", \"Gold\")","e2e26d61":"draw_trace_bar(get_categories(multiple_df,'Q10'), \"Does the current employer uses machine learning\", \"Use of machine learning\", \"Number of respondents\", \"Brown\")","aeeb7e1b":"draw_trace_bar(get_categories(multiple_df,'Q23'), multiple_df['Q23'][0], \"Option\", \"Number of respondents\", \"Yellow\")","3aea848d":"draw_trace_bar(get_categories(multiple_df,'Q24'), multiple_df['Q24'][0], \"Option\", \"Number of respondents\", \"Lightgreen\")","ccea5f79":"draw_trace_bar(get_categories(multiple_df,'Q25'), multiple_df['Q25'][0], \"Option\", \"Number of respondents\", \"Orange\")","3cd3c2e9":"draw_trace_bar(get_categories(multiple_df,'Q26'), multiple_df['Q26'][0], \"Option\", \"Number of respondents\", \"Lightblue\")","56c09c13":"draw_trace_bar(get_categories(multiple_df,'Q40'), multiple_df['Q40'][0], \"Option\", \"Number of respondents\", \"Magenta\")","ff8c2384":"draw_trace_bar(get_categories(multiple_df,'Q43'), multiple_df['Q43'][0], \"Option\", \"Number of respondents\", \"Tomato\")","299f0880":"draw_trace_bar(get_categories(multiple_df,'Q46'), multiple_df['Q46'][0], \"Option\", \"Number of respondents\", \"Green\")","f6f01b28":"draw_trace_bar(get_categories(multiple_df,'Q48'), \"Are ML models `black boxes`?\", \"Are ML models `black boxes`?\", \"Number of respondents\", \"Black\")","78f1dd93":"def get_categories_group(data, val_group, val):\n    tmp = data[1::].groupby(val_group)[val].value_counts()\n    return pd.DataFrame(data={'Number': tmp.values}, index=tmp.index).reset_index()","15af63b5":"def draw_trace_group_bar(data_df, val_group, val, title, xlab, ylab,color='Blue'):\n    data = list()\n    groups = (data_df.groupby([val_group])[val_group].nunique()).index\n    for group in groups:\n        data_group_df = data_df[data_df[val_group]==group]\n        trace = go.Bar(\n                x = data_group_df[val],\n                y = data_group_df['Number'],\n                name = group,\n                #marker=dict(color=color),\n                text=data_group_df[val]\n            )\n        data.append(trace)\n\n    layout = dict(title = title,\n              xaxis = dict(title = xlab, showticklabels=True, tickangle=15,\n                          tickfont=dict(\n                            size=9,\n                            color='black'),), \n              yaxis = dict(title = ylab),\n              hovermode = 'closest'\n             )\n    fig = dict(data = data, layout = layout)\n    iplot(fig, filename='draw_trace')","b72416a5":"df = get_categories_group(multiple_df, 'Q1', 'Q2')\ndraw_trace_group_bar(df, 'Q1', 'Q2', 'Number of respondents by Sex and age', 'Age', 'Number of respondents')","7c162bb3":"df = get_categories_group(multiple_df, 'Q2', 'Q4')\ndraw_trace_group_bar(df, 'Q2', 'Q4', 'Number of respondents by Age and Highest level of formal education', 'Highest level of formal education', 'Number of respondents')","8e20c3d2":"df = get_categories_group(multiple_df, 'Q2', 'Q9')\ndraw_trace_group_bar(df, 'Q2', 'Q9', 'Number of respondents by Age and Current yearly compensation', 'Current yearly compensation', 'Number of respondents')","1a573849":"df = get_categories_group(multiple_df, 'Q4', 'Q9')\ndraw_trace_group_bar(df, 'Q4', 'Q9', 'Number of respondents by Highest level of formal education and Current yearly compensation', 'Current yearly compensation', 'Number of respondents')","8790c2fb":"df = get_categories_group(multiple_df, 'Q8', 'Q9')\ndraw_trace_group_bar(df, 'Q8', 'Q9', 'Number of respondents by Years of experience and Current yearly compensation', 'Current yearly compensation', 'Number of respondents')","14cc361b":"df = get_categories_group(multiple_df, 'Q6', 'Q4')\ndraw_trace_group_bar(df, 'Q6', 'Q4', 'Number of respondents by Current title and Highest level of education', 'Current title', 'Number of respondents')","a7f0bcfe":"There are three dataset files. Let's load all the files.","86b19c18":"## Years of experience and current yearly compensation","f9fcbd73":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n## Current title\n\nThe next question is about the description of the title.","860183e2":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n# <a id='3'>Data exploration<\/a>  \n\n\nLet's start by exploring the multiple choice response dataset.\n\nWe will also glimpse the free format response dataset.\n\n## Glimpse the data","771f1e28":"Because the first row contains a description of the column, we will read only from 2nd row the categorical values per each column.\n\n## Missing data\n\nLet's represent the distribution of available data for all the columns, using a boxplot.","bc71f185":"# <a id='2'>Prepare the data analysis<\/a>   \n\n\nBefore starting the analysis, we need to make few preparation: load the packages, load and inspect the data.\n\n","7931c3fc":"## Current title and Highest level of education","6fd0f5da":"## Approximately what percent of your data projects involve exploring model insights?","bcc6aa94":"We will make sure to include these columns in the following, besides the obvious options `Q1`, `Q2` ... `Q7`.","e4d67ddb":"## Usage of machine learning by current employer\n\nThe next question is about usage of machine learning by current employer business.","ff5ef982":"## Highest level of formal education and current yearly compensation","e681d28a":"# <a id='1'>Introduction<\/a>  \n\nWe will analyze the dataset `2018 Kaggle ML & DS Survey Challenge` with answers provided by the respondents to the survey of Kaggle users in 2018.\n","eb7819c7":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n## Gender\n\nLet's show the gender, as declared by respondents. \nWe will create here also a function to count categories for categorical data and a function to draw barplots using Plotly.","192b0a3d":"## Approximately what percent of your time at work or school is spent actively coding?\n\n","f9d06930":"## Are ML models *black boxes*?\n\nLet's see the answers to the question `Do you consider ML models to be \"black boxes\" [...]`","d0c9b7a4":"<h1><center><font size=\"6\">Data Scientists in 2018 - Kaggle Survey<\/font><\/center><\/h1>\n\n<img src=\"https:\/\/upload.wikimedia.org\/wikipedia\/commons\/7\/7c\/Kaggle_logo.png\"><\/img>\n\n# <a id='0'>Content<\/a>\n\n- <a href='#1'>Introduction<\/a>  \n- <a href='#2'>Prepare the data analysis<\/a>  \n - <a href='#21'>Load packages<\/a>  \n - <a href='#21'>Load the data<\/a>  \n- <a href='#3'>Data exploration<\/a>   \n- <a href='#4'>Combine the features<\/a>   \n- <a href='#5'>Final note<\/a>   ","8ef392de":"## Do you consider yourself to be a data scientist?","3bdb279a":"## For how many years have you used machine learning methods (at work or in school)?","a5fec4e4":"\n# <a id='4'>Combine the features<\/a>\n\n\nLet's visualize some of the dimmensions presented previously in combination. For example, let's see the combined distribution of sex and age to see how these two are distributed.\n\n## Number of respondents by Sex and Age","ee57488b":"## Current employer industry\n\nThe next question is about the description of the industry of the current employer.","8bc091f5":"## Years of experience in current industry\n\nThe following question is about the number of years of experience in the current position of the respondents.","ddf302c7":"\n# <a id='5'>Final note<\/a>  \n\nThis Kernel is still under construction. Stay tuned, we will update it frequently in the following days.\n\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  ","d3c4d8f8":"## Age and current yearly compensation","24a532c9":"## Which better demonstrates expertise in data science: academic achievements or independent projects? - Your views:","795da8bc":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n## Current yearly compensation\n\nThe next question is about the current yearly compensatiomn.","c6d3a6af":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n\n## Age group\n\nLet's explore the age groups.","a1462456":"## Number of respondents by Age and Highest level of formal education","8ae214ae":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n## Highest level of formal education","e8affea0":"<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n# <a id='22'>Load the data<\/a>  \n\nLet's see first what data files do we have in the root directory.","87d90914":"\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n\n\n## Country\n\nLet's plot the number of responses per country..","8dda5fc2":"## Approximately what percent of your data projects involved exploring unfair bias in the dataset and\/or algorithm?","bd54cd3a":"## Undergraduate major\n\nNext, let's see what is the answer distribution to the question `Which best describes your undergraduate major?`.","2a3741a3":"## How long have you been writing code to analyze data?","efae14b0":"\n\n<a href=\"#0\"><font size=\"1\">Go to top<\/font><\/a>  \n\n## Columns to visualize\n\n\nSome of the following columns are grouped, to capture the multiple choice answers where the order of the answer gives the order of preferences. \nLet's check which columns groups have only one item in the group (columns with multiple items in the group will be called like `Q11_Part1`, `Q11_Part2`[...]. For this we will compose filters like `Q1`, `Q2`, ..., `Q11`, `Q12` etc. and filter the columns containing these values and count the items. We separate only the group of columns with one item in the group. These will be the columns we will further represent.\n\n","ebc28efe":"# <a id='21'>Load packages<\/a>\n\nWe load the packages used for the analysis."}}