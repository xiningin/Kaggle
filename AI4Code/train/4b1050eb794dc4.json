{"cell_type":{"0487be71":"code","f4289a3e":"code","d11241f8":"code","b126e1a7":"code","aec4cae6":"code","ccc7a712":"code","82b2af1b":"code","b377130b":"code","39bf6e34":"code","0f147e5b":"code","3a421241":"code","4de87782":"code","44c5b90b":"markdown","08e21317":"markdown","cb97d4ef":"markdown","1429d353":"markdown"},"source":{"0487be71":"import pandas as pd\nimport ast\nimport seaborn as sns","f4289a3e":"moves = pd.read_csv('..\/input\/competitive-pokemon-dataset\/move-data.csv').set_index('Name')\npokemon = pd.read_csv('..\/input\/competitive-pokemon-dataset\/pokemon-data.csv', sep = ';', converters={'Types':ast.literal_eval, 'Abilities':ast.literal_eval, 'Moves':ast.literal_eval})","d11241f8":"# For the sake of ease, each dual-type Pokemon will \n# be treated as two Pokemon, each with one of the dual types\n\ndata = {}\ndata['pokemon_type'] = {}\ndata['moves'] = {}\n\nc = 0\nfor i in pokemon.index:\n    for t in pokemon.Types[i]:\n        data['pokemon_type'][c] = t\n        data['moves'][c] = pokemon.Moves[i]\n        c += 1\n\ndata = pd.DataFrame(data)\ndata.head()","b126e1a7":"# Lookup move-types from list of actual moves\n# (This will take a 30 seconds or so to run)\n\ndef get_move_type(moveset):\n    move_types = []\n    for m in moveset:\n        try:\n            move_types.append(moves.loc[m].Type)\n        except:\n            pass\n    return move_types\n\ndata['move_types'] = data.moves.apply(get_move_type)\ndata.head()","aec4cae6":"# Find total number of move-types learned by each pokemon-type\n# We will use this to create a heatgrid\n\nheatgrid = {}\n\n# Create an empty 2D nested dict of all the move types\nfor t1 in data.pokemon_type.unique():\n    heatgrid[t1] = {}\n    for t2 in data.pokemon_type.unique():\n        heatgrid[t1][t2] = 0\n        \nheatgrid","ccc7a712":"# Tally up the move-types learned by each Pokemon-type\nfor i in data.index:\n    p_type = data.pokemon_type[i]\n    for m_type in data.move_types[i]:\n#         if p_type != m_type:\n        heatgrid[p_type][m_type] += 1\n    \nheatgrid","82b2af1b":"# Cast to dataframe for easier manipulation\n# COLUMNS = Pokemon-type\n# ROWS = Move-types\n# VALUES = Number of moves\nheatgrid = pd.DataFrame(heatgrid)\nheatgrid","b377130b":"#\u00a0Create a grand TOTAL column (used for sorting)\nheatgrid['TOTAL'] = heatgrid.sum(axis=1)\n\n# Normalize the data in each column\n# Because there are way more, for example, WATER Pokemon,\n# and so they will be over-represented\nheatgrid = round((heatgrid \/ heatgrid.sum() * 100))\n\n# Sort by and then drop the TOTAL column\nheatgrid = heatgrid.sort_values('TOTAL').drop('TOTAL', axis=1)\n\n# Re-order the columns to match the (sorted) indices\nheatgrid = heatgrid[heatgrid.index[::-1]]\n\nheatgrid","39bf6e34":"import seaborn as sns","0f147e5b":"# Set heatmap size\nfigszie = (12, 12)\nsns.set(rc={ 'figure.figsize' : figszie })\n\n# Render heatmap\nsns.heatmap(heatgrid, square=True, cbar_kws={'label': '% of moves'})\\\n    .set(xlabel='Pokemon-type',\n         ylabel='Move-type',\n         title='% BREAKDOWN OF ALL MOVE-TYPES LEARNED BY POKEMON')","3a421241":"# Render heatmap, with data-labels\nsns.heatmap(heatgrid, square=True, annot=True, cbar_kws={'label': '% of moves'})\\\n    .set(xlabel='Pokemon-type',\n         ylabel='Move-type',\n         title='% BREAKDOWN OF ALL MOVE-TYPES LEARNED BY POKEMON')","4de87782":"# Of course, Normal-type moves are way over-represented\n# as they can be learned by many many Pokemon.\n# Let's remove them from the visual.\nheatgrid = heatgrid.drop('Normal', axis=0).drop('Normal', axis=1)\n\nsns.heatmap(heatgrid, square=True, annot=True, cbar_kws={'label': '% of moves'})\\\n    .set(xlabel='Pokemon-type',\n         ylabel='Move-type',\n         title='% BREAKDOWN OF ALL MOVE-TYPES LEARNED BY POKEMON')","44c5b90b":"With Normal-type now removed we can more clearly see the differences.\n\n* (Aside from Normal), Psychic-type moves are the *most* promiscuous move types as they can be\nlearned by the biggest % of Pokemon.\n\n* Dark comes in 2nds place, followed by Fighting in 3rd.\n\n* Fairy moves are the least promiscous, as they can only really be learned by Fairy Pokemon.\nAnd Fairy Pokemon are actually more likely to learn *Psychic* type moves (13%) than Fairy moves (5%)\n\n* After Water-moves, Water Pokemon are most likely to learn Ice-moves.","08e21317":"How to read this:\n\n\"36% of all moves possible to be learned by Ghost-type Pokemon are Normal-type moves\"\n\n\"20% of all moves possible to be learned by Water-type Pokemon are Water-type moves\"","cb97d4ef":"## Visualise\n\nWe're going to use Seaborn's heatmap.","1429d353":"# What are the most *promiscuous* Pokemon move types?\n\nOr, what types of moves are able to be learned by the greatest proportion of Pokemon?\n\ne.g \"of all *moves* known by WATER-type Pokemon, what % are ROCK-type moves?\"\n\ne.g., if we took *every* Grass-type Pokemon, and then took all the\n![](http:\/\/)![](http:\/\/)possible *moves* to be taugh or learned by those Pokemon, what would be the % breakdown of these move types?"}}