{"cell_type":{"43c952f3":"code","8fc9bc27":"code","ff1f03eb":"code","38e8b426":"code","05afb557":"code","249c0234":"code","9ae52050":"code","4c12dabb":"code","a0f29312":"code","c19766db":"code","9e0b37a8":"code","9f47e4be":"code","c523f158":"code","0cdfff0c":"code","9841be47":"code","6c060537":"code","581313df":"code","b94df86e":"code","298c1069":"code","e3f2b2f6":"code","a3fc1fe5":"code","90846cb3":"code","5a11f830":"code","4c93f04d":"code","e08888cf":"code","794f9d50":"code","5ab1c616":"code","44447ee1":"code","d47214d7":"code","971d8fe6":"code","2819d99c":"code","828fdcc2":"code","2868878a":"markdown","771a2714":"markdown","a70a16a1":"markdown","98008ab3":"markdown","c1509c80":"markdown","65e08494":"markdown","8db44546":"markdown","e4a8a546":"markdown","e49b57a0":"markdown","32696e5b":"markdown"},"source":{"43c952f3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","8fc9bc27":"# importing important libraries\nimport pandas as pd\n\n# For Visualisation Purpose\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport folium \nfrom folium import plugins\n\n# Manipulating the default plot size\nplt.rcParams['figure.figsize'] = 10, 12\n\n# Disable warnings \nimport warnings\nwarnings.filterwarnings('ignore')","ff1f03eb":"\n#Reading Pakistan's COVID data\ndf= pd.read_excel(\"..\/input\/pakistanallcitiescovid19\/COVID_Pak_finaldayData.xlsx\")\ndf_pak = df.copy()\ndf.head()","38e8b426":"#Removing Nan Values\ndf_Pak_All = df[0:7][:] \ndf_Pak_All","05afb557":"df_Pak_All = df_Pak_All[['Date','Region','Cumulative  Test positive','Expired','Discharged','New  (last 24 hrs)']]\n\ndf_Pak_All.head(8)  #\/\/ 8 regions","249c0234":"total_cases = df_Pak_All['Cumulative  Test positive'].sum()\nprint('Total number of confirmed COVID 2019 cases across Pakistan till date (20 Aril, 2020):', total_cases)","9ae52050":"#Highlighten the data fram\ndf_Pak_All.style.background_gradient(cmap='Reds')","4c12dabb":"#Total Active  = test positive - (expired + discharged)\n\ndf_Pak_All['Total Active'] = df_Pak_All['Cumulative  Test positive'] - (df_Pak_All['Expired'] + df_Pak_All['Discharged'])\ntotal_active = df_Pak_All['Total Active'].sum()\nprint('Total number of active COVID 2019 cases across Pakistan:', total_active)\nTot_Cases = df_Pak_All.groupby('Region')['Total Active'].sum().sort_values(ascending=False).to_frame()\nTot_Cases.style.background_gradient(cmap='Reds')","a0f29312":"#Createing a zoomable map for pakistan\n\nPak_coord = pd.read_excel('..\/input\/pakistanregionscordinates\/Pak_coord.xlsx')\n\ndf_full = pd.merge(Pak_coord,df_Pak_All,on='Region')\n","c19766db":"map = folium.Map(location=[20, 70], zoom_start=4,tiles='Stamenterrain')\n\nfor lat, lon, value, name in zip(df_full['Latitude'], df_full['Longitude'], df_full['Total Active'], df_full['Region']):\n    folium.CircleMarker([lat, lon], radius=value*0.02,color='red',fill_color='red',fill_opacity=0.3 ).add_to(map)\nmap","9e0b37a8":"#visualization through seaborn\n\nf, ax = plt.subplots(figsize=(12, 8))\ndata = df_full[['Region','Cumulative  Test positive','Discharged','Expired']]\ndata.sort_values('Cumulative  Test positive',ascending=False,inplace=True)\ndata\nsns.set_color_codes(\"pastel\")\nsns.barplot(x=\"Cumulative  Test positive\", y=\"Region\", data=data,label=\"Total\", color=\"r\")\n\nsns.set_color_codes(\"muted\")\nsns.barplot(x=\"Discharged\", y=\"Region\", data=data, label=\"Discharged\", color=\"g\")\n\n\n# Add a legend and informative axis label\nax.legend(ncol=2, loc=\"lower right\", frameon=True)\nax.set(xlim=(0, 3500), ylabel=\"\",xlabel=\"Cases\")\nsns.despine(left=True, bottom=True)","9f47e4be":"Pak_df_dayByDay= pd.read_excel('..\/input\/corona-virus-pakistan-dataset-2020\/COVID_FINAL_DATA.xlsx')\nPak_df_dayByDay.head()","c523f158":"temp_total_date_Sindh = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='Sindh')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_Punjab = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='Punjab')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_Balochistan = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='Balochistan')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_ICT = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='ICT')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_KPK = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='KP')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_GB = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='GB')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})\n\ntemp_total_date_KPTD = Pak_df_dayByDay[(Pak_df_dayByDay['Region']=='KPTD')].groupby(['Date']).agg({'Cumulative  Test positive':['sum']})","0cdfff0c":"Sindh = [i for i in temp_total_date_Sindh[\"Cumulative  Test positive\"]['sum'].values]\nSindh_60 = Sindh[0:60]\n\nPunjab = [i for i in temp_total_date_Punjab[\"Cumulative  Test positive\"]['sum'].values]\nPunjab_60 = Punjab[0:60]\n\nBalochistan = [i for i in temp_total_date_Balochistan[\"Cumulative  Test positive\"]['sum'].values]\nBalochistan_60 = Balochistan[0:60]\n\nICT = [i for i in temp_total_date_ICT[\"Cumulative  Test positive\"]['sum'].values]\nICT_60 = ICT[0:60]\n\nKPK = [i for i in temp_total_date_KPK[\"Cumulative  Test positive\"]['sum'].values]\nKPK_60 = KPK[0:60]\n\nGB = [i for i in temp_total_date_GB[\"Cumulative  Test positive\"]['sum'].values]\nGB_60 = GB[0:60]\n","9841be47":"# Plots\nplt.figure(figsize=(12,6))\n\nplt.plot(Sindh_60)\nplt.plot(Punjab_60)\nplt.plot(Balochistan_60)\nplt.plot(ICT_60)\nplt.plot(KPK_60)\nplt.plot(GB_60)\n\nplt.legend([\"Sindh\",\"Punjab\",\"Balochistan\",\"ICT\",\"KPK\",\"GB\"], loc='upper left')\nplt.title(\"COVID-19 infections In different regions of Pakistan\", size=15)\nplt.xlabel(\"Days\", size=13)\nplt.ylabel(\"Infected cases\", size=13)\nplt.ylim(0, 4000)\nplt.show()","6c060537":"Final_Data_Pak = pd.read_excel('..\/input\/pakistanregioninpandemic\/Pakistan_Data_RegionWise.xlsx')\nFinal_Data_Pak.head()","581313df":"Final_Data_Pak['ConfirmedCasesInPakistan'] = Final_Data_Pak['Prv_Sindh_ConfimedCases'] + Final_Data_Pak['Prv_Punjab_ConfimedCases'] + Final_Data_Pak['Prv_Balochistan_ConfimedCases'] + Final_Data_Pak['Prv_ICT_ConfimedCases']+Final_Data_Pak['Prv_GB_ConfimedCases']+Final_Data_Pak['Prv_KP_ConfimedCases']","b94df86e":"Final_Data_Pak['NewCasesInPakistan'] = Final_Data_Pak['Prv_Sindh_NewCases'] + Final_Data_Pak['Prv_Punjab_NewCases'] + Final_Data_Pak['Prv_Balochistan_NewCases'] + Final_Data_Pak['Prv_ICT_NewCases']+Final_Data_Pak['Prv_GB_NewCases']+Final_Data_Pak['Prv_KP_NewCases']","298c1069":"Final_Data_Pak.head()","e3f2b2f6":"import plotly","a3fc1fe5":"Final_Data_Pak['Date'] =pd.to_datetime(Final_Data_Pak.Date)\nFinal_Data_Pak['Date'] = Final_Data_Pak.sort_values(by='Date')\n","90846cb3":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=Final_Data_Pak['Date'].head(35), y = Final_Data_Pak['ConfirmedCasesInPakistan'].head(35), mode='lines+markers',name='ConfirmedCasesInPakistan'))\nfig.update_layout(title_text='Trend of Coronavirus Cases in Pakistan (Cumulative cases)',plot_bgcolor='rgb(230, 230, 230)')\nfig.show()\n\n# New COVID-19 cases reported daily in Pakistan\n\nimport plotly.express as px\nfig = px.bar(Final_Data_Pak, x=\"Date\", y=\"NewCasesInPakistan\", barmode='group', height=400)\nfig.update_layout(title_text='Coronavirus Cases in Pakistan on daily basis',plot_bgcolor='rgb(230, 230, 230)')\n\nfig.show()","5a11f830":"\ndbd_Italy = pd.read_excel('..\/input\/othercities-pandemic\/per_day_cases.xlsx',parse_dates=True, sheet_name=\"Italy\")\ndbd_Korea = pd.read_excel('..\/input\/othercities-pandemic\/per_day_cases.xlsx',parse_dates=True, sheet_name=\"Korea\")\ndbd_Wuhan = pd.read_excel('..\/input\/othercities-pandemic\/per_day_cases.xlsx',parse_dates=True, sheet_name=\"Wuhan\")","4c93f04d":"fig = px.bar(Final_Data_Pak, x=\"Date\", y=\"ConfirmedCasesInPakistan\", color='ConfirmedCasesInPakistan', orientation='v', height=600,\n             title='Confirmed Cases in Pakistan', color_discrete_sequence = px.colors.cyclical.IceFire)\n\nfig.update_layout(plot_bgcolor='rgb(230, 230, 230)')\nfig.show()\n\nfig = px.bar(dbd_Italy, x=\"Date\", y=\"Total Cases\", color='Total Cases', orientation='v', height=600,\n             title='Confirmed Cases in Italy', color_discrete_sequence = px.colors.cyclical.IceFire)\n\nfig.update_layout(plot_bgcolor='rgb(230, 230, 230)')\nfig.show()\n\nfig = px.bar(dbd_Korea, x=\"Date\", y=\"Total Cases\", color='Total Cases', orientation='v', height=600,\n             title='Confirmed Cases in South Korea', color_discrete_sequence = px.colors.cyclical.IceFire)\n\nfig.update_layout(plot_bgcolor='rgb(230, 230, 230)')\nfig.show()\nfig = px.bar(dbd_Wuhan, x=\"Date\", y=\"Total Cases\", color='Total Cases', orientation='v', height=600,\n             title='Confirmed Cases in Wuhan', color_discrete_sequence = px.colors.cyclical.IceFire)\n\nfig.update_layout(plot_bgcolor='rgb(230, 230, 230)')\nfig.show()","e08888cf":"from fbprophet import Prophet","794f9d50":"confirmed_cases = Final_Data_Pak.groupby('Date').sum()['ConfirmedCasesInPakistan'].reset_index()","5ab1c616":"confirmed_cases.columns = ['ds','y']\nconfirmed_cases['ds'] = pd.to_datetime(confirmed_cases['ds'])","44447ee1":"confirmed_cases.tail()","d47214d7":"m = Prophet(interval_width=0.95)\nm.fit(confirmed_cases)\nfuture = m.make_future_dataframe(periods=7)\nfuture.tail()","971d8fe6":"#predicting the future with date, and upper and lower limit of y value\nforecast = m.predict(future)\nforecast[['ds', 'yhat', 'yhat_lower', 'yhat_upper']].tail()","2819d99c":"confirmed_forecast_plot = m.plot(forecast)","828fdcc2":"confirmed_forecast_plot =m.plot_components(forecast)","2868878a":"> As We can see Sindh and Punjab are amongst the highly effected areas.","771a2714":"As these trends are perfect example of exponential growth of this pandemic. These bars (Of Pakistan) looks like that we are heading towards bad bad situation.","a70a16a1":"This model is pretty much amazing, As we can see above in the picture we are heading towardds more than 10,000 confirmed cases in this week.","98008ab3":"> Now Lets see how is the progression of COVID 19 amongst all Pakistani Cities.","c1509c80":"According to the model, We can predict that corona cases in Pakistan will cross 10,000 in this week (before 26th of april). It is already 9152, This pandemic will be lethal if the Govt and people of Pakistan will not take serious steps. \n\nStay safe, and keep mantain social distancing.","65e08494":"In pakistan, We are facing lockdowns from our Govt and it is going to be more strict. Lets start digging into Pakistan's COVID 19 data and clear our thoughts on:\n\nIs it really a danger or we will get away from this easily?\n\nWuhan, Italy, USA have faced alot because of this epidemic. Is there any possibility that Pakistan will face these consequences like Wuhan did ?\n\nThis Workbook ghas been divided into 2 sections:\n\nSection 1: Analysis of Pakistan's different Region.\n\nSection 2: Forecasting through Prophet model by Facebook.\n\nData: We got our data from 11 march 2020 till 20 april 2020.","8db44546":"**Section 2: Forecasting through fbProphet**\n","e4a8a546":"Fortunately, we are getting some good news from now onwards.","e49b57a0":"We need to remodel corona virus dataset through which we can extract all confirmed case values from all the regions of Pakistan from 11 macrh to 19 april.","32696e5b":"**We are now comparing Pakistan with most effected cities like Wuhan. Is trends similar to Italy\/ S.Korea\/ Wuhan?**\n\nWe have slight outdated data for rest of other countries as we are eager to see trends so it doesnt matter."}}