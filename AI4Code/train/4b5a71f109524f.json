{"cell_type":{"56ef7564":"code","96694e2e":"code","3950c85f":"code","d441f040":"code","5fcfccad":"code","6a97710d":"code","68b2c1f7":"code","a0be8271":"code","bc621b4e":"markdown","9a0b57bb":"markdown"},"source":{"56ef7564":"import numpy as np\nimport pandas as pd\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.decomposition import PCA\nimport statsmodels.formula.api as sm","96694e2e":"random_state = 635\nnp.random.seed(random_state)\ndf_train = pd.read_csv('..\/input\/train.csv')\ndf_test = pd.read_csv('..\/input\/test.csv')","3950c85f":"train_X = df_train.drop(['ID_code', 'target'], axis = 1)\ntest_X = df_test.drop(['ID_code'], axis = 1)","d441f040":"# scaling\nscaler = StandardScaler()\ntrain_X_scaled = pd.DataFrame(scaler.fit_transform(train_X),columns = train_X.columns)\ntest_X_scaled = pd.DataFrame(scaler.fit_transform(test_X),columns = test_X.columns)","5fcfccad":"# extract all PCA factors\npca = PCA()  \nfactors_train = pca.fit_transform(train_X_scaled) \nfactors_test = pca.transform(test_X_scaled)","6a97710d":"# replace 200 vars with PCA features\npca_columns_name = [\"pca_\" + str(col) for col in range(0, 200)]\nfactors_train = pd.DataFrame(factors_train, columns = pca_columns_name)\nfactors_test = pd.DataFrame(factors_test, columns = pca_columns_name)\n\ntrain_pca = df_train.merge(factors_train, left_index = True, right_index = True)\ntest_pca = df_test.merge(factors_test, left_index = True, right_index = True)\n\ntrain_pca_only = train_pca.drop(train_X.columns, axis = 1)\ntest_pca_only = test_pca.drop(test_X.columns, axis = 1)","68b2c1f7":"# logit formula for regression\nformula = 'target ~ '\nfor col in train_pca_only.drop(['ID_code', 'target'], axis = 1).columns:\n    if( col == 'pca_0'):\n        formula += str(col)\n    else:\n        formula += \"+\" + str(col)\nformula","a0be8271":"# logit model (based on all 200 derived pca factors)\nlogit = sm.ols(formula = formula, data = train_pca_only)\nlogit_trained = logit.fit()\nlogit_trained.summary()","bc621b4e":"# Purpose:\n\nPerform PCA (Principal Component Analysis) on all 200 variables and then check all the new PCA factors on significance with the help of Logit regression model.","9a0b57bb":"As you can see there are a lot of PCA factors wich are not significant for the model ('P>|t|' > 0.05)."}}