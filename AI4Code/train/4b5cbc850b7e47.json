{"cell_type":{"f2856b44":"code","68132994":"code","7aa57e2e":"code","c09e2e89":"code","a91d54df":"code","15933143":"code","fcd26f8f":"code","5719c8ce":"code","ab72c4eb":"code","5d7e1eb6":"code","e880da08":"code","da4b56cb":"code","a84dc33a":"code","0e49844f":"code","598b8c11":"code","82bc6470":"code","ac44a860":"code","c03b609b":"code","0fd0d79a":"code","20d3f8cb":"code","deabd35b":"code","3ac4ea74":"code","2c464d57":"code","8c720ae0":"markdown","2ebc0e77":"markdown","1befd1d2":"markdown","e50d15c8":"markdown","1554675a":"markdown","2fac23d7":"markdown","e5f01c83":"markdown","44f43d26":"markdown","d7010cbd":"markdown","98418dbf":"markdown","89577d24":"markdown","8a8d8dad":"markdown","33f80fd5":"markdown","e2828ee2":"markdown","bef34eca":"markdown","8bcaa836":"markdown","2b4fc578":"markdown","f0c92ed9":"markdown","91a48ec4":"markdown","026ebd09":"markdown","2f089f11":"markdown","22556876":"markdown","dc0d0516":"markdown"},"source":{"f2856b44":"!pip install dataprep","68132994":"import dataprep\nfrom dataprep import eda\nimport matplotlib.pyplot as plt\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns","7aa57e2e":"print(f\"Version of dataprep is {dataprep.__version__}.\")","c09e2e89":"tps06_train = pd.read_csv(\"..\/input\/tabular-playground-series-jun-2021\/train.csv\")\ntitanic_train = pd.read_csv(\"..\/input\/titanic\/train.csv\")\ntitanic_test = pd.read_csv(\"..\/input\/titanic\/test.csv\")\nworld_happiness_report_2021 = pd.read_csv(\"..\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv\")\nbitcoin = pd.read_csv(\"..\/input\/meme-cryptocurrency-historical-data\/Bitcoin.csv\")","a91d54df":"# Remove the ID column as it is in the way.\n\ntps06_train = tps06_train.drop('id', axis=1)","15933143":"# I thought that passing all the columns would make the notebook too heavy, so I will pass only some of them.\n\ntps06_report_target = [col for col in tps06_train.columns][:10]\n\neda.create_report(tps06_train[tps06_report_target], title=\"Tabular Playground Series - Jun 2021 report\")","fcd26f8f":"tps06_train.describe().T.style.bar(subset=['mean'], color='#20c8f2')\\\n                      .background_gradient(subset=['std'], cmap='YlGn')","5719c8ce":"tps06_train.info()","ab72c4eb":"pd.DataFrame(tps06_train.isna().sum()\/len(tps06_train), columns=[\"missing_rate\"])\\\n                               .style.bar(subset=['missing_rate'], color='#20c8f2')","5d7e1eb6":"pd.DataFrame((tps06_train==0).sum()\/len(tps06_train), columns=[\"zero_rate\"])\\\n                             .style.bar(subset=['zero_rate'], color='#20c8f2')","e880da08":"eda.plot(tps06_train, \"feature_0\")","da4b56cb":"eda.plot(world_happiness_report_2021, \"Country name\")","a84dc33a":"sns.pairplot(tps06_train[tps06_report_target], corner=True)","0e49844f":"eda.create_report(tps06_train[tps06_report_target],display=[\"Interactions\"])","598b8c11":"eda.plot(tps06_train, \"feature_0\", \"feature_1\")","82bc6470":"eda.plot(titanic_train, \"Age\", \"Sex\")","ac44a860":"eda.plot(titanic_train, \"Sex\", \"Survived\", config={ 'height': 400, 'width': 450, })","c03b609b":"eda.plot_correlation(tps06_train)","0fd0d79a":"eda.plot_correlation(bitcoin, value_range=[0.6, 1], display=[\"Pearson\", \"Stats\"])","20d3f8cb":"eda.plot_correlation(tps06_train, \"feature_2\", display=[\"Spearman\"])","deabd35b":"eda.plot_missing(titanic_train)","3ac4ea74":"eda.plot_missing(titanic_train, \"Age\", \"Survived\")","2c464d57":"diff_cols = [\"Age\", \"Sex\", \"Pclass\"]\neda.plot_diff([titanic_train[diff_cols], titanic_test[diff_cols]])","8c720ae0":"And we can use eda.plot() to display the same plots that were displayed in the Interactions section by specifying numerical variables for columns you are interested in. In addition, we can display the Hexbin Plot and Box Plot.","2ebc0e77":"In the case of eda.plot(), we can configure it in config when the size of the figure is large.","1befd1d2":"<a id=\"3\"><\/a>\n# <div class=\"alert alert-block alert-warning\">Tips<\/div> \n\n## <b>Tips1: light way to overview<\/b>\n\nUsing describe(), info() and sum() of DataFrame, we can calculate stats and profiles. And if we use DataFrame.style property, we can add visual effects to outputs.","e50d15c8":"In order to avoid these challenges and use the EDA component more effectively in kaggle notebooks, we will first check the overview of the EDA component with create_report() and then see how to visualize the component effectively.","1554675a":"However, in some cases, such as the Tabular Playground Series, there are many columns and we cannot be visualized well. In such cases, you can limit the output of create_report() to only Interaction.","2fac23d7":"By specifying col1 and col2 argument in plot_missing(), we can also see how dropping the missing values in col1 affects col2.","e5f01c83":"## <b>Tips6: check difference with dataprep<\/b>\n\nOne feature not found in create_report() is eda.plot_diff(). With this function, you can visualize the corresponding columns of two DataFrames and see what differences there are.","44f43d26":"## <b>Tips5: show missing with eda.plot_missing()<\/b>\n\nBy using eda.plot_missing(), we can have the same visualization as the missing part.","d7010cbd":"In addition, different combinations of the types of variables passed to eda.plot() can be used to create even different visualizations.","98418dbf":"## <b>Tips2: analyze variable with eda.plot()<\/b>\n\nUsing eda.plot(), we can genelate profiles and visualization like Variable part.","89577d24":"## <b>Tips3: analize interactions<\/b>\n\nBy using seaborn.pairplot(), we can check the scatter plots for all columns.","8a8d8dad":"## <b>Tips4: show correlations with  eda.plot_correlation()<\/b>\n\nWe can use eda.plot_correlation() to perform the same visualization as the Correlations part.","33f80fd5":"With limited data, this is not a problem, but when the columns of DataFrame are many, the amount of content quickly becomes too much, and the notebook becomes information overload. (There should have been already a little loading time when the notebook was displayed.) Also, some of the content in the reports you create may be almost duplicated or already known.\n\nTherefore, the readability and accessibility of the EDA notebook will be improved if we use alternative function where we need rather than only using create_report() for all data.\n\nFrom this perspective, we will see tips and visualization examples for each section of the report.","e2828ee2":"<a id=\"1\"><\/a>\n# <div class=\"alert alert-block alert-info\">Preparation<\/div> \n\ndocker-python container image of kaggle doesn't contain dataprep, so first we have to pip install it.","bef34eca":"If the columns to be analyzed are categorical or country names, Word Cloud and World Map will also be displayed.","8bcaa836":"The dataprep EDA component is very cool and elegant module that reads  dataset converted to pandas DataFrame and automatically does profiling and visualization. Anybody can try good EDA with dataprep.\n\n### We can see [dataprep document here!](https:\/\/dataprep.ai\/)\n\nRecently, some kagglers have published notebooks using dataprep in EDA and I am very interested in it.\n\nHowever, while the functionality of dataprep is really great, there are some challenges unique in kaggle, and I feel that we are not taking full advantage of our capabilities.\n\nIn this notebook, I will share some of the challenges that I feel and the tips that I have come up with.","2b4fc578":"## <u>Excellent points<\/u>\n\n### Anyone can create a well-organized report in a short time\u2728\n\nAt a minimum, you can just pass the pandas DataFrame to eda.create_report() and get a neat and tidy report. In addition to basic and common visualizations such as bar graphs, it can also generate Q-Q plots and world maps according to your data. We can get exhaustive visualization results.\n\n### Using HTML, it is possible to visualize a huge number of graphs in a very compact way\ud83d\udcaa\n\nSuch as in Interactions sections we can use HTML tab to switch between multiple plots in generated report and plot. This is especially very powerful when you have a lot of features, such as the Tabular Playground Series.\n\n## <u>Challenges in kaggle<\/u>\n\n### Duplication with kaggle's Data Explorer \ud83d\udcca\n\nIf we use dataprep's features as is, outputs tends to become information overload. For example, eda.plot can be used to easily visualize the graph of each column of the data frame, but this is almost identical to the content of the Data Explorer of data page of each competition.\n\n### Our notebook may become heavy \u231b\n\nThis may overlap with the first point, but the notebook tends to be heavy because eda module generates a large amount of content in proportion to the columns entered. If you like creating or reading notebooks, you may have been frustrated by the fact that notebooks with lots of graphs and other information are not easily displayed.","f0c92ed9":"<a id=\"2\"><\/a>\n# <div class=\"alert alert-block alert-success\">Overviewing of EDA component of dataprep<\/div> \n\n## create_report()\n\nWith create_report(), we can automatically visualize and profile the dataset, and output the results in report format. The EDA component's output can be roughly summarized in this function.\n\nAccording to the documentation, the output is as follows:\n\n> 1. Overview: detect the types of columns in a dataframe\n> 2. Variables: variable type, unique values, distint count, missing values\n> 3. Quantile statistics like minimum value, Q1, median, Q3, maximum, range, interquartile range\n> 4. Descriptive statistics like mean, mode, standard deviation, sum, median absolute deviation, coefficient of variation, kurtosis, skewness\n> 5. Text analysis for length, sample and letter\n> 6. Correlations: highlighting of highly correlated variables, Spearman, Pearson and Kendall matrices\n> 7. Missing Values: bar chart, heatmap and spectrum of missing values\n\n<font size=\"2\">The discription from <I>\n[create_report: generate profile reports](https:\/\/docs.dataprep.ai\/user_guide\/eda\/create_report.html).<\/I><\/font>\n\nAdditionally, in Interactions section, we can check the scatter plot between numerical variables.","91a48ec4":"We can also use value_range argument to set the threshold for displaying the heatmap, and display to specify the type of analysis to display argument.","026ebd09":"It is also possible to narrow down the vertical axis of the heat map to a specific variable.","2f089f11":"# I am very happy if you could comment on this notebook with <u>your thoughts to it and constructive advice<\/u>, and I hope that! Thanks.","22556876":"Let's see example. \n\n### <span style=\"color: orange; \">\u2193\u2193\u2193 You can pass DataFrame to eda.create_report().<\/span>","dc0d0516":"## Contents\n\n- [Preparation](#1)\n- [Overviewing of EDA component of dataprep](#2)\n    - create_report() \n- [Tips](#3)\n    - Tips1: light way to overview\n    - Tips2: analyze variable with eda.plot()\n    - Tips3: analize interactions\n    - Tips4: show correlations with eda.plot_correlation()\n    - Tips5: show missing with eda.plot_missing()\n    - Tips6: check difference with dataprep"}}