{"cell_type":{"015b925d":"code","b62329c1":"code","c724146c":"code","0cff7915":"code","a24072f5":"code","4b590ced":"code","864cca85":"code","2fda7519":"code","1a1da947":"code","a25c5649":"code","9d8b685b":"code","3e83b0ea":"code","e985dc84":"code","6dc824e2":"code","29577fba":"code","791c5aad":"code","b11fa00e":"code","2f4f86a2":"code","d2aaae43":"code","d176131d":"code","24f2c392":"code","20274f92":"code","57465b85":"code","86f3f997":"code","4ec62ce9":"code","c7c66f83":"code","6fd3956f":"code","07cda655":"code","707498e6":"code","2a871f2d":"code","352eae96":"code","37c8203d":"code","6d3957aa":"code","da006573":"code","280dfc5c":"code","989753d5":"code","154bf750":"code","30437d26":"code","34d64c40":"code","3de8eb20":"code","a21285ed":"code","ae930fb7":"code","f327b5be":"code","579037ce":"code","110cd198":"code","45923a51":"code","2ce670ae":"code","df435a1f":"code","1e20818a":"code","ea22fc3c":"code","9c8dfff9":"code","ba8703bc":"code","e4325d0b":"code","196c45e6":"code","199f7e2b":"code","e787d2d5":"code","78639a4f":"code","6876f3c5":"code","71215f61":"markdown","3591a743":"markdown","5863a26c":"markdown","f5c54ba9":"markdown","3fe0d83a":"markdown","6230f5fa":"markdown","77b91a67":"markdown","08c94c60":"markdown","cfe0d8e2":"markdown","b8098b5c":"markdown","ec956bac":"markdown","538b6f9e":"markdown","2ac3f0f4":"markdown","6b285c84":"markdown","f75cfe14":"markdown","778f2f25":"markdown","f605e654":"markdown","48835115":"markdown","40e5daf4":"markdown","9549b157":"markdown","a5f16cd0":"markdown","6499009d":"markdown","f798c91c":"markdown","885a1d16":"markdown","d956bb55":"markdown","dcd5f457":"markdown"},"source":{"015b925d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nimport seaborn as sns\nsns.set_style('darkgrid')\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\n%matplotlib inline \n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","b62329c1":"df = pd.read_csv(\"..\/input\/california-housing-prices\/housing.csv\")","c724146c":"df","0cff7915":"df = df.drop_duplicates() \ndf.duplicated().values.any()","a24072f5":"df = df.fillna(method=\"ffill\")\npd.isnull(df).any()  # Checking for Null Values","4b590ced":"df['avgRooms'] = df['total_rooms'] \/ df['households']\ndf['avgBedrooms'] = df['total_bedrooms'] \/ df['households']\ndf['pop_per_household'] = df['population'] \/ df['households']","864cca85":"df.head()","2fda7519":"df.tail()","1a1da947":"df.describe()","a25c5649":"df.info()","9d8b685b":"df.shape","3e83b0ea":"df.columns","e985dc84":"\nplt.figure(figsize=(18,10))\nplt.scatter(df['latitude'],df['longitude'],c=df['population'], cmap='cool', alpha = 0.8)\nplt.colorbar().set_label(\"Population\")\nplt.title('Population Magnitude')\nplt.xlabel('Latitude')\nplt.ylabel('Longitude')\nplt.show()","6dc824e2":"plt.figure(figsize=(10, 6))\nplt.hist(df.median_house_value, bins = 45, ec = 'black', color = '#f88f01')\nplt.xlabel('Median Price of Houses in a block in $', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Median Price of Housing in a Block', fontsize=16)\nplt.axvline(df['median_house_value'].mean(), color='#21209c', linestyle='dashed', linewidth=3, label='Average Price of House in a block')\nplt.show()\nplt.style.use('dark_background')","29577fba":"plt.figure(figsize=(10, 6))\nsns.distplot(df.median_house_value, bins = 45, color = '#f88f01', hist = True)\nplt.style.use('dark_background')\nplt.xlabel('Median Price of Houses in a block in $', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Median Price of Housing in a Block', fontsize=16)\nplt.show()","791c5aad":"plt.figure(figsize=(10, 6))\nplt.hist(df.households , bins=100, ec = 'black', color = '#ff577f')\nplt.xlabel('Total Number of Households in a block', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Total Number of Households in a block', fontsize=16)\nplt.axvline(df['households'].mean(), color='#21209c', linestyle='dashed', linewidth=3, label='Average Number of Households in a block')\nplt.xlim(0,2500)\nplt.show()\nplt.style.use('dark_background')","b11fa00e":"plt.figure(figsize=(10, 6))\nsns.distplot(df.households , bins=100, color = '#ff577f', hist = False)\nplt.xlabel('Total Number of Households in a block', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Total Number of Households in a block', fontsize=16)\nplt.xlim(0,2500)\n\nplt.show()\nplt.style.use('dark_background')","2f4f86a2":"print(df.households.mean())\nprint(df.households.median())","d2aaae43":"plt.figure(figsize=(10, 6))\nplt.hist(df.avgRooms, bins=100, ec = 'black', color = '#ffcda3')\nplt.xlabel('Average Number of Rooms in a House', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Number of Rooms in a room', fontsize=16)\nplt.axvline(df['avgRooms'].mean(), color='#21209c', linestyle='dashed', linewidth=3, label='Average Number of Rooms in a House')\nplt.xlim(0, 10)\nplt.show()\nplt.style.use('dark_background')","d176131d":"plt.figure(figsize=(10, 6))\nsns.distplot(df.avgRooms, bins=100, color = '#ffcda3', hist = False)\nplt.xlabel('Average Number of Rooms in a House', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Number of Rooms in a room', fontsize=16)\nplt.xlim(0, 10)\nplt.show()\nplt.style.use('dark_background')","24f2c392":"print(df.avgRooms.mean())\nprint(df.avgRooms.median())","20274f92":"plt.figure(figsize=(10, 6))\nplt.hist(df.total_rooms, bins=100, ec = 'black', color = '#00af91')\nplt.xlabel('Total Number of Rooms in a block', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.axvline(df['total_rooms'].mean(), color='#21209c', linestyle='dashed', linewidth=3, label='Average Number of Rooms in a block')\n\nplt.title('Average Distribution of Total Number of Rooms in a block', fontsize=16)\nplt.xlim(0, 12500)\nplt.show()\nplt.style.use('dark_background')","57465b85":"plt.figure(figsize=(10, 6))\nsns.distplot(df.total_rooms, bins = 45, color = '#00af91', hist = False)\nplt.xlabel('Total Number of Rooms in a block', fontsize=16)\nplt.ylabel('Number of Houses', fontsize=16)\nplt.title('Average Distribution of Total Number of Rooms in a block', fontsize=16)\nplt.xlim(0, 12500)\n\nplt.show()\nplt.style.use('dark_background')","86f3f997":"print(df.total_rooms.mean())\nprint(df.total_rooms.median())","4ec62ce9":"freq = df.ocean_proximity.value_counts()\nprint(freq)","c7c66f83":"freq = df.ocean_proximity.value_counts()\nplt.figure(figsize=(10, 6))\nplt.bar(freq.index, height = freq,ec='#21209c',color='#008891')\nplt.xlabel('Ocean Proximity', fontsize=16)\nplt.ylabel('No. of Households', fontsize=16)\nplt.show()","6fd3956f":"dum = pd.get_dummies(df.ocean_proximity)","07cda655":"merged_df = pd.concat([df, dum], axis = 'columns')\nmerged_df = merged_df.drop(['ocean_proximity', 'ISLAND'], axis= 'columns')\nmerged_df.head()","707498e6":"X = merged_df.drop('median_house_value', axis= 'columns')\ny = merged_df['median_house_value']","2a871f2d":"plt.figure(figsize=(16, 10))\nplt.scatter(x= df['median_house_value'], y=df['avgRooms'], alpha=0.2)\nplt.ylim(0, 10)\n\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Average Number of Rooms per household', fontsize = 14)\nplt.title('Median Price vs Average Number of Rooms', fontsize = 14)\nplt.style.use('dark_background')\nplt.show()\n","352eae96":"plt.figure(figsize=(12,10))\nsns.jointplot(x=df['median_house_value'], y=df['avgRooms'], size = 7, color = '#a7c5eb', joint_kws={'alpha': 0.2})\nsns.set_style('darkgrid')\nplt.ylim(0, 10)\nplt.style.use('dark_background')\n\nplt.show()","37c8203d":"df.median_house_value.corr(df.avgRooms)","6d3957aa":"plt.figure(figsize=(16, 10))\nplt.scatter(x= df['median_house_value'], y=df['avgBedrooms'], alpha=0.2)\nplt.ylim(0, 5)\n\nplt.style.use('dark_background')\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Average Number of Bedrooms per household', fontsize = 14)\nplt.title('Median Price vs Average Number of Bedrooms', fontsize = 14)\nplt.show()","da006573":"plt.figure(figsize=(16, 10))\nsns.jointplot(x=df['median_house_value'], y=df['avgBedrooms'], size = 7, color = '#a7c5eb', joint_kws={'alpha': 0.2})\nsns.set_style('darkgrid')\nplt.ylim(0, 5)\n\nplt.style.use('dark_background')\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Average Number of Bedrooms per household', fontsize = 14)\nplt.title('Median Price vs Average Number of Bedrooms', fontsize = 14)\nplt.show()","280dfc5c":"df.median_house_value.corr(df.avgBedrooms)","989753d5":"plt.figure(figsize=(16, 10))\nplt.scatter(x= df['median_house_value'], y=df['pop_per_household'], alpha=0.2)\nplt.ylim(0, 8)\nplt.style.use('dark_background')\n\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Population per Household', fontsize = 14)\nplt.title('Median Price vs Population per Household in 10,000s', fontsize = 14)\nplt.show()","154bf750":"plt.figure(figsize=(16, 10))\nsns.jointplot(x= df['median_house_value'], y=df['pop_per_household'] , size = 7, color = '#a7c5eb', joint_kws={'alpha': 0.2})\nplt.ylim(0, 8)\nplt.style.use('dark_background')\n\n\nplt.show()","30437d26":"df.median_house_value.corr(df.pop_per_household)","34d64c40":"plt.figure(figsize=(16, 10))\nplt.scatter(x= df['median_house_value'], y=df['median_income'], alpha=0.2)\nplt.ylim(0, 10)\nplt.style.use('dark_background')\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Median Income per household', fontsize = 14)\nplt.title('Median Price vs Median Income per household in 1000s', fontsize = 14)\nplt.show()","3de8eb20":"plt.figure(figsize=(16, 10))\nsns.jointplot(x= df['median_house_value'], y=df['median_income'], size = 7, color = '#a7c5eb', joint_kws={'alpha': 0.2})\nplt.ylim(0, 10)\nplt.style.use('dark_background')\n\nplt.show()","a21285ed":"df.median_house_value.corr(df.median_income)","ae930fb7":"plt.figure(figsize=(16, 10))\nplt.scatter(x= df['median_house_value'], y=df['housing_median_age'], alpha=0.2)\nplt.style.use('dark_background')\n\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Median Age of household', fontsize = 14)\nplt.title('Median Price vs Median Age of household', fontsize = 14)\nplt.show()","f327b5be":"plt.figure(figsize=(16, 10))\nsns.jointplot(x= df['median_house_value'], y=df['housing_median_age'], size = 7, color = '#a7c5eb', joint_kws={'alpha': 0.2})\n\nplt.style.use('dark_background')\n\nplt.show()","579037ce":"df.median_house_value.corr(df.housing_median_age)","110cd198":"df.corr()","45923a51":"mask = np.zeros_like(df.corr())\ntriangle_indicies = np.triu_indices_from(mask)\nmask[triangle_indicies] = True\nmask","2ce670ae":"plt.figure(figsize=(16, 10))\nsns.heatmap(df.corr(), mask=mask, annot=True, annot_kws={\"size\": 14})\nplt.style.use('dark_background')\nplt.xticks(fontsize=16)\nplt.yticks(fontsize=16)\nplt.show()","df435a1f":"prices = merged_df['median_house_value']\nfeatures = merged_df.drop('median_house_value', axis = 1)\n\nX_train, X_test, y_train, y_test = train_test_split(features, prices, test_size = 0.2)\n\n#len(X_train)\/len(features)","1e20818a":"regr = LinearRegression()\nregr.fit(X_train, y_train)\n\nprint('Intercept', regr.intercept_)\npd.DataFrame(data = regr.coef_, index=X_train.columns, columns = ['Coef'])","ea22fc3c":"regr.score(X_train, y_train)","9c8dfff9":"regr.score(X_test, y_test)","ba8703bc":"df['median_house_value'].skew()","e4325d0b":"y_log = np.log(df['median_house_value'])\ny_log.tail()","196c45e6":"plt.figure(figsize=(16, 10))\nsns.distplot(y_log)\nplt.title(f'Log Price with skew {y_log.skew()}')\nplt.show()\n","199f7e2b":"transformed_df = features\ntransformed_df['log_median_value'] = y_log\n\nplt.figure(figsize=(16, 10))\nsns.lmplot(x = 'median_income', y ='log_median_value', data=transformed_df, size = 7, scatter_kws={'alpha':0.3}, line_kws={'color':'darkred'})\nplt.ylim(10.5, 13)\nplt.style.use('dark_background')\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Median Income per household', fontsize = 14)\nplt.title('Median Price vs Median Income per household in 1000s', fontsize = 14)\nplt.show()\n\n","e787d2d5":"\nplt.figure(figsize=(16, 10))\nsns.lmplot(x = 'median_income', y ='median_house_value', data=df, size = 7, scatter_kws={'alpha':0.3}, line_kws={'color':'pink'})\nplt.ylim(0, 500000)\nplt.style.use('dark_background')\nplt.xlabel('Median Price of the House', fontsize = 14)\nplt.ylabel('Median Income per household', fontsize = 14)\nplt.title('Median Price vs Median Income per household in 1000s', fontsize = 14)\nplt.show()","78639a4f":"prices = np.log(df['median_house_value'])\nfeatures = merged_df.drop('median_house_value', axis = 1)\n\nX_train, X_test, y_train, y_test = train_test_split(features, prices, test_size = 0.2)\n\nregr = LinearRegression()\nregr.fit(X_train, y_train)\n\nprint('Intercept', regr.intercept_)\npd.DataFrame(data = regr.coef_, index=X_train.columns, columns = ['Coef'])\n\n","6876f3c5":"regr.score(X_train, y_train)","71215f61":"Notice the change in skew value after changing meadian house value to log median price value","3591a743":"### Inference:\nWe find that the average population of California is about 1426 per block.\n<br>\nThe Distribution of the population is almost equal across California\n<br>\nHowever, the population is more denser in the Northern Part of California","5863a26c":"The different features of our dataset are:\n<ol>\n    <li>Longitude<\/li>\n    <li>Latitude<\/li>\n    <li>Median Age of the House<\/li>\n    <li>Total Rooms in the block<\/li>\n    <li>Total Bedrooms in the block<\/li>\n    <li>Population of the block<\/li>\n    <li>Number of Households<\/li>\n    <li>Ocean Proximity<\/li>\n    <li>Number of Rooms per House<\/li>\n    <li>Number of Bedrooms per House<\/li>\n    <li>Number of people per Household<\/li>\n<\/ol>","f5c54ba9":"## Average Distribution of Median Price of Housing in a Block","3fe0d83a":"### Feature Engineering","6230f5fa":"### Feature Engineering: Dummy Variable\nI have created a dummy variable inorder to categorize the ocean proximity attribute in the dataset.","77b91a67":"## Regression using Log Prices","08c94c60":"### Inference:\n The Mean number of rooms per house is between 4 and 5.\n <br>\n The median is also at that range. However there are many houses with 6, 7 and 8 rooms as well.","cfe0d8e2":"### Inference:\nWe can observe that the dataset consists of 20,639 households across 10 different attributes","b8098b5c":"### Glance of the DataSet","ec956bac":"The Dataset is spread across 20640 rows and 13 columns which signify the various attributes","538b6f9e":"### Inference:\n We find that the average number of houses per block is around 500 households. Whereas the median of the data lies at 409 houses per block","2ac3f0f4":"## We find that our model has an accuracy of around \"66.72%\"\n### We can use our model to predict the value of any house by providing the given attributes with 67% accuracy with log price scale","6b285c84":"Hence, we find that more number of houses(9136) are located at a range that is less than 1 hour to the ocean.\nHowever, there is also a large number of homes inland away from the ocean. Later, we also find that the price of homes near the ocean are compartively higher.","f75cfe14":"### Inference:\nWe find that the mean house price is around  $206855.81 $\n<br>\nHowever the median value is  $179700.0. $\n<br>\nWe also observe a spike around the $5000000, since the number of houses in that range are quite high. This proves that there are more number of luxury, expensive homes in California.","778f2f25":"## Training and Test Dataset Split","f605e654":"## Data Visualization","48835115":"## Ocean Proximity","40e5daf4":"## Data Transformation","9549b157":"### Cleaning and Filtering the data","a5f16cd0":"### Importing Dataset","6499009d":"### Inference:\n The Mean number of rooms per block is 2636\n <br>\n The median is at 2127. ","f798c91c":"### Correlation\n### $$ \\rho _{XY} = corr(X,Y)$$\n### $$ -1.0 \\leq \\rho _{XY} \\leq +1.0$$","885a1d16":"Accuracy can further be increased by transforming our model to logarithmic scale","d956bb55":"I have added more number of features which can help with the proper distribution and predicting better values in our model\n<li>Average Rooms per House<\/li>\n<li>Average Bedrooms per House<\/li>\n<li>Number of people per household<\/li>","dcd5f457":"## We find that our model has an accuracy of around \"64.72%\"\n### We can use our model to predict the value of any house by providing the given attributes with 65% accuracy"}}