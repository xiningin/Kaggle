{"cell_type":{"20a8db4d":"code","5cea7fe9":"code","e9c05228":"code","7bb011d7":"code","267a9197":"code","f8f433ea":"code","f688e807":"code","3b4448b6":"code","dfdf4084":"code","79452e72":"code","a6292204":"markdown","1a58de57":"markdown","7099c06d":"markdown","83058330":"markdown","1dccb69a":"markdown","6589d0dc":"markdown","290cdb3c":"markdown","f532ea1e":"markdown","4f1231ba":"markdown"},"source":{"20a8db4d":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt","5cea7fe9":"confirmed_df = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_time_series\/time_series_covid19_confirmed_global.csv', index_col='Country\/Region')\n# group & sum by country, coz bigger countries are split to regions\ncases = confirmed_df.groupby('Country\/Region').sum()\ncases.head()\n# cases.loc['Czechia']","e9c05228":"populations_data = pd.read_csv('..\/input\/countries-population-2020\/populations.csv')\npopulations = populations_data.groupby('Location').sum()","7bb011d7":"cases.insert(loc=0, column='Population', value = populations['PopTotal'])\ncases = cases.loc[cases['Population'] > 1000]","267a9197":"N = 7","f8f433ea":"cases['NdayIncrement'] = (cases.iloc[:,-1] - cases.iloc[:,-1-N])\ncases['NdayAverage'] = cases['NdayIncrement'] \/ N","f688e807":"cases['NdayIncrementPerPopulation'] = cases['NdayIncrement'] \/ cases['Population'] * 100\ncases['NdayAveragePerPopulation'] = cases['NdayAverage'] \/ cases['Population'] * 100","3b4448b6":"result = cases.loc[:,['Population', 'NdayIncrement', 'NdayAverage', 'NdayIncrementPerPopulation' ,'NdayAveragePerPopulation']]","dfdf4084":"top = result.sort_values(by=['NdayAveragePerPopulation'], ascending=False).head(50)\ntop","79452e72":"top.rename(columns = {'NdayAveragePerPopulation':'Cases Count'}, inplace = True)\ntop.plot(kind='bar', y='Cases Count', figsize=(10,8))","a6292204":"## COVID: Average daily increments\n\nCalculate daily increments as an average of last N days.\nThen recalculate them per 100k inhabitants to be comparable.\nShow rankings in descending order.","1a58de57":"Cherrypick data for results dataframe","7099c06d":"# Set number of days from which to calculate the average","83058330":"Calculate increment today vs N days ago, calculate daily average","1dccb69a":"Import population data from provided CSV","6589d0dc":"Sort results","290cdb3c":"Recalculate per 100k inhabitants","f532ea1e":"Insert population data into cases dataframe","4f1231ba":"Import cases data from John Hopkins github repo"}}