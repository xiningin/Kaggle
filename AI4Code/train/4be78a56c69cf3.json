{"cell_type":{"e9e28f9c":"code","77089f17":"code","2805bda3":"code","4fb2e587":"code","51182a6b":"code","d8bf4dbf":"code","357d2aa2":"code","7b488861":"code","bd4d4cc1":"code","663491e7":"code","c5e2b39a":"code","e683de7b":"code","51dde0c0":"code","fdee6200":"code","556174b4":"code","58c4c939":"code","225c706e":"code","2bbc702f":"code","215d3a2e":"code","85ad0104":"code","a0301285":"code","137fb053":"code","5796a3ef":"code","67dbad96":"code","5f4fb370":"code","7ab3af5e":"code","3aca7466":"code","b0f64520":"code","fd018fe9":"code","e19aacd6":"code","d044974e":"code","6e443df4":"code","c038abcd":"code","f08a5fae":"markdown","dcd48669":"markdown","59798466":"markdown","c7dc1ce7":"markdown","7a6c32e4":"markdown","da821eea":"markdown","2e69bec2":"markdown","aa093c03":"markdown","414d696b":"markdown","2aefad6c":"markdown","45053504":"markdown","524614c2":"markdown","01239aa0":"markdown","ea2b8d67":"markdown","aca154fe":"markdown","f2b2f90b":"markdown","74b4452e":"markdown","f66c98e3":"markdown","7f7d7e3e":"markdown","5330a08a":"markdown","8836de81":"markdown","ea7be8e4":"markdown","f2838a39":"markdown","66b47da3":"markdown","7a441c8a":"markdown","aca0346f":"markdown","bfb3a4ef":"markdown","035d130d":"markdown","e63836a6":"markdown","5c2d7ab9":"markdown","e3929494":"markdown","27bc9bed":"markdown","be3e2ca5":"markdown"},"source":{"e9e28f9c":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings('ignore')\nplt.style.use('ggplot')\nfrom IPython.core.display import HTML\nimport re\nfrom glob import glob","77089f17":"# Load in the data\nprod_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')\nprint(f\"# of Product information available: {prod_df.shape[0]}\")\nprod_df.head()","2805bda3":"print(\"Columns details\")\npd.DataFrame(prod_df.dtypes).rename(columns={0:'dtype'})","4fb2e587":"\nprod_df.columns = ['lp_id', 'url', 'product_name', 'provider\/company_name', 'sectors', 'primary_essential_function']\nprod_df.isnull().sum()","51182a6b":"# Fill one missing data for Provider\/Company Name as unknown\nprod_df['provider\/company_name'].fillna('Unknown', inplace=True)\nprod_df['provider\/company_name'] = prod_df['provider\/company_name'].astype(str)","d8bf4dbf":"# Fill the missing data for Sectors as unknown\nprod_df['sectors'].fillna('Unknown', inplace=True)\nprod_df['sectors'] = prod_df['sectors'].astype(str)\nprint(f\"List of sectors:\")\nlist(prod_df['sectors'].unique())","357d2aa2":"# Split the multiple values of Sectors into different rows \n# def splitDataFrameList(df,target_column,separator):\n#     ''' df = dataframe to split,\n#     target_column = the column containing the values to split\n#     separator = the symbol used to perform the split\n#     returns: a dataframe with each entry for the target column separated, with each element moved into a new row. \n#     The values in the other columns are duplicated across the newly divided rows.\n#     '''\n#     def splitListToRows(row,row_accumulator,target_column,separator):\n#         split_row = row[target_column].split(separator)\n#         for s in split_row:\n#             new_row = row.to_dict()\n#             new_row[target_column] = s.strip()\n#             row_accumulator.append(new_row)\n#     new_rows = []\n#     df.apply(splitListToRows,axis=1,args = (new_rows,target_column,separator))\n#     new_df = pd.DataFrame(new_rows)\n#     return new_df\n# prod_df = splitDataFrameList(prod_df, 'Sector(s)', ';')","7b488861":"sectors_data = prod_df.groupby('sectors').size().reset_index(name='count')\nsectors = sectors_data['sectors'].values\nexplode = (0.01,0.01,0.01,0.01, 0.01, 0.01)\nplt.figure(figsize=(8,8))\nplt.pie(sectors_data['count'], labels=sectors, autopct='%1.1f%%', startangle=15, explode=explode)\nplt.title('% of Digital Learning Products per Education Sectors')\nplt.axis('equal')\nplt.show()","bd4d4cc1":"list(prod_df['primary_essential_function'].unique())","663491e7":"# Fill the missing data for Primary Essential Function as unknown\nprod_df['primary_essential_function'].fillna('Unknown', inplace=True)\nprod_df['primary_essential_function'] = prod_df['primary_essential_function'].astype(str)\nprod_df['PSF_main_category'] = prod_df['primary_essential_function'].apply(lambda x: x.split()[0]) ","c5e2b39a":"pef_data = prod_df.groupby('PSF_main_category').size().reset_index(name='count')\ncategory  = pef_data['PSF_main_category'].values\nexplode = (0.05,0.05,0.05,0.05, 0.05)\nplt.figure(figsize=(8,8))\nplt.pie(pef_data['count'], labels=category, autopct='%1.1f%%', startangle=15, explode=explode)\nplt.title('% of Digital Learning Products per Primary Essential Function')\nplt.axis('equal')\nplt.show()","e683de7b":"def plot_percentage_with_hue(plot, feature, Number_of_categories, hue_categories):\n    a = [p.get_height() for p in plot.patches]\n    patch = [p for p in plot.patches]\n    for i in range(Number_of_categories):\n        total = feature.value_counts().values[i]\n        for j in range(hue_categories):\n            percentage = '{:.1f}%'.format(100 * a[(j*Number_of_categories + i)]\/total)\n            x = patch[(j*Number_of_categories + i)].get_x() + patch[(j*Number_of_categories + i)].get_width() \/ 2 - 0.15\n            y = patch[(j*Number_of_categories + i)].get_y() + patch[(j*Number_of_categories + i)].get_height() \n            ax.annotate(percentage, (x, y), size = 12)\n    plt.show()\n\n\nplt.figure(figsize=(15,8))\nax = sns.countplot(\"PSF_main_category\", hue=\"sectors\", data=prod_df)\nplot_percentage_with_hue(ax, prod_df['PSF_main_category'], 5,6)","51dde0c0":"prod_df['PSF_sub_categories'] = prod_df['primary_essential_function'].apply(lambda x: re.split(\"^(LC - |CM - |SDO - |LC\\\/CM\\\/SDO - )\", x)[-1])","fdee6200":"psf_groups = prod_df.groupby(['PSF_main_category', 'PSF_sub_categories', ]).size().reset_index(name='count')\npsf_groups","556174b4":"# Load in the data\ndist_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nprint(f\"# of district information available: {dist_df.shape[0]}\")\ndist_df.head()","58c4c939":"print(\"Columns details\")\npd.DataFrame(dist_df.dtypes).rename(columns={0:'dtype'})","225c706e":"dist_df.isnull().sum()","2bbc702f":"dist_df = dist_df[dist_df.isnull().sum(axis=1) < 7]\nprint(dist_df.shape)\ndist_df.isnull().sum()","215d3a2e":"def plot_percentage_without_hue(plot, feature):\n    total = len(feature)\n    for p in ax.patches:\n        percentage = '{:.1f}%'.format(100 * p.get_height()\/total)\n        x = p.get_x() + p.get_width() \/ 2 - 0.05\n        y = p.get_y() + p.get_height()\n        ax.annotate(percentage, (x, y), size = 12)\n    plt.show()\n    \n\nplt.figure(figsize=(10,8))\nax = sns.countplot(x='locale', data=dist_df)\nplt.xticks(size=12)\nplt.title(\"Distribution of School District per locale\")\nplot_percentage_without_hue(ax, dist_df.locale)\nplt.show()","85ad0104":"dist_df['pct_black\/hispanic'].unique()","a0301285":"plt.figure(figsize=(10,8))\nax = sns.countplot(x='pct_black\/hispanic', data=dist_df)\nplt.xticks(size=12)\nplt.title(\"% Distribution of Black\/hispanic Students accross the school district\")\nplot_percentage_without_hue(ax, dist_df.locale)\nplt.show()","137fb053":"plt.figure(figsize=(15,8))\nax = sns.countplot(\"pct_black\/hispanic\", hue=\"locale\", data=dist_df)\nplot_percentage_with_hue(ax, dist_df['pct_black\/hispanic'], 5,4)","5796a3ef":"dist_df['pct_free\/reduced'].unique()","67dbad96":"plt.figure(figsize=(10,8))\nax = sns.countplot(x='pct_free\/reduced', data=dist_df)\nplt.xticks(size=12)\nplt.title(\"% distribution of students eligible for free or reduced lunch accross the school district\")\nplot_percentage_without_hue(ax, dist_df.locale)\nplt.show()","5f4fb370":"dist_df['county_connections_ratio'].unique()","7ab3af5e":"plt.figure(figsize=(10,8))\nax = sns.countplot(x='county_connections_ratio', data=dist_df)\nplt.xticks(size=12)\nplt.title(\"% distribution of connection ratio accross the school district\")\nplot_percentage_without_hue(ax, dist_df.locale)\nplt.show()","3aca7466":"dist_df['pp_total_raw'].unique()","b0f64520":"plt.figure(figsize=(15,8))\nax = sns.countplot(x='pp_total_raw', data=dist_df)\nplt.xticks(size=8)\nplt.title(\"% distribution per pupil total expenditure  accross the school district\")\nplot_percentage_without_hue(ax, dist_df.locale)\nplt.show()","fd018fe9":"print(f\"Number of states where school district details are given: {len(dist_df['state'].unique())}\")","e19aacd6":"eng_data_path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data'\ncsv_files = glob(eng_data_path + \"\/*.csv\")\ncsv_files[0]","d044974e":"dfs = []\n\nfor filename in csv_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[4].split(\".\")[0]\n    df[\"district_id\"] = int(district_id)\n    merge_dist_df = pd.merge(df, dist_df, on ='district_id')\n    merge_prod_df = pd.merge(merge_dist_df, prod_df, on ='lp_id')\n    dfs.append(merge_prod_df)\n    \neng_df = pd.concat(dfs)\neng_df = eng_df.reset_index(drop=True)\nprint(f\"# of data points in engagement data: {eng_df.shape[0]}\")\neng_df.head()","6e443df4":"# Remove missing values for engagement_index Missing values \neng_df_c = eng_df[~eng_df['engagement_index'].isnull()]\neng_df_c.isnull().sum()","c038abcd":"df_1000 = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/1000.csv\")\ndf_1039 = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/1039.csv\")","f08a5fae":"> **Rural and Towns' School districts has less than 0 to 60% of the pct_black\/hispanic**","dcd48669":"# WIP ***Ananlysis on pct_access***\n\nPercentage of students in the district have at least one page-load event of a given product and on a given day","59798466":"**Total per pupil expendature across different locale**","c7dc1ce7":"A Lot of values are missing in district information, lets mark those values as unknown\n\nRemoving the rows which has more than 5 columns are NaN","7a6c32e4":"*Extract sub categories of Primary Essential Function*","da821eea":"### District Information Data\n\nThe district file districts_info.csv includes information about the characteristics of school districts, including data from NCES (2018-19), FCC (Dec 2018), and Edunomics Lab.","2e69bec2":"***Analysis on countyconnectionsratio variable***","aa093c03":"***Analysis on Primary Essential Function variable***","414d696b":"Check for the null values in the data, incase of any fill them by unknown","2aefad6c":"> **There are less than 1% of school districts whose per pupil expenditure is in the range of 32000 to 34000**\n\n> **Distribution is right tailed, there are less than 10% of school districts which spends more than 20000**","45053504":"* **district_id** - the unique identifier of the school district\n* **state** - the state where the district resides\n* **locale** - four types of areas: City, Suburban, Town, and Rural\n* **pct_black\/hispanic** - Percentage of students in the districts identified as Black or Hispanic\n* **pct_free\/reduced** - Percentage of students in the districts eligible for free or reduced-price lunch\n* **countyconnectionsratio** - residential fixed high-speed connections over 200 kbps in at least one direction\/households\n* **pptotalraw** - Per-pupil total expenditure (sum of local and federal expenditure)","524614c2":"***Analysis on pct_free\/reduced variable***","01239aa0":"> **Plot indicates that 59.1% of school districts are placed in suburban areas. It would be interesting to know what drives the number of schools ditricts in each locale, is it the population, economic conditions and more**","ea2b8d67":"> **Above table gives the comprehensive list of primary essential services provided by the digital platforms.** \n\n> **More than 70 % of the Product's focus is on Study Tools primarily for PreK-12 sectors(Refer to the Pie chart above)**\n\n> **Remaining 30% is focused on Teacher Resources, Classroom facility, Career Planning and School managment**","aca154fe":"***Analysis on state variable***","f2b2f90b":"* **LP ID** - The unique identifier of the product\n* **URL** - Web Link to the specific product\n* **Product Name** - Name of the specific product\n* **Provider\/Company Name** - Name of the product provider\n* **Sector(s)** - Sector of education where the product is used\n* **Primary Essential Function** - Has three main categories  \n        - LC = Learning & Curriculum, \n        - CM = Classroom Management, and \n        - SDO = School & District Operations","74b4452e":"# Data Analysis\n\n### Product information data\n    - The product file products_info.csv includes information about the characteristics of the top 372 products with most users in 2020","f66c98e3":"***Analysis on Sector(s) variable***","7f7d7e3e":"***Analysis on locale variable***\n\nThere are four types of areas: City, Suburban, Town, and Rural. Let's understand the distribution of the schools by locale","5330a08a":"> **There are products which aims to provide learning platform for more than one sectors of education** ","8836de81":"ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households)","ea7be8e4":"***Analysis on pct_black\/hispanic variable***\n\nThis variable indicates the proportion os balck and hispanic students in a given school district","f2838a39":"> **Nearly 65.9% of the School districts has 0 to 20% of Black\/Hispanic students**\n\n> **3.4% of school districts with only\/mostly Black\/Hispanic Students**","66b47da3":"Values are presented in [reverse-bracket](https:\/\/proofwiki.org\/wiki\/Definition:Real_Interval\/Notation\/Reverse-Bracket) notation \n\n[\ud835\udc4e, \ud835\udc4f [ := {\ud835\udc65 \u2208 \u211d: \ud835\udc4e \u2264 \ud835\udc65 < \ud835\udc4f} - Half-open on the right","7a441c8a":"> Extracting the district id from the file path and concatinating all the files to a single dataframe\n\n> Merging the product, district and enganement dtaa to a single dataframe. This might omit the data points in enagement data for which product details are not available ","aca0346f":"### Analysis on engagement data","bfb3a4ef":"Some of the data points are missing for few columns ","035d130d":"> **There are only 2.3% of the school districts which has 80 to 100% of students who are eligible for free or reduced lunch**\n\n> **There are 26.1% of school districts which has no or 20% of the students eligible for free or reduced lunch**","e63836a6":"> **There are three main essential functions that are provided by Digital learning platform providers**  \n\n        - LC = Learning & Curriculum,\n        \n        - CM = Classroom Management, and \n        \n        - SDO = School & District Operations\n\n> **More than 70% of the products focuses on providing plotform for learning and curriculum.** ","5c2d7ab9":"***Analysis on pptotalraw variable***\n\nPer-pupil total expenditure (sum of local and federal expenditure)","e3929494":"This variable indicates the proportion of free or reduced lunch price eligible students ","27bc9bed":"> **There is evidence of more focus on the PreK-12 Learning process. More products are build to support PreK-12 education sector**","be3e2ca5":"> **As the plot indicates that more than 45% of the learning products targets PreK-12 sector, this could be the result of Prek-12 initiative (The PreK-12 initiative works to ensure that all children attending public elementary and secondary schools have access to and receive high-quality educational experiences, with a particular emphasis on improving equity and outcomes for traditionally underserved students.) https:\/\/www.newamerica.org\/education-policy\/prek-12-education\/about**\n\n> **less than 0.5% of product provide learning platform for all the sectors under one roof**\n"}}