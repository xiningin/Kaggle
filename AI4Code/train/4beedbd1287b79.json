{"cell_type":{"c350d29f":"code","e3b3d557":"code","42cbb91a":"code","9cac5097":"code","b7e65a6c":"code","9f373435":"code","91d450b6":"code","33c33a4e":"code","a91384fa":"code","74713893":"code","7c1afe19":"code","dfd07bae":"code","601ee74d":"code","fdd9cfc4":"code","28bccfdd":"code","617b0488":"code","a32c888b":"code","c3bf9491":"code","8169fc6f":"code","340b35ed":"code","aee94676":"code","11a62768":"code","e90138ea":"markdown","804044a0":"markdown","cca2a1b1":"markdown","b6050f39":"markdown","85660045":"markdown","b3b45568":"markdown","25f91a73":"markdown","b1f3fd91":"markdown","d35c6d51":"markdown","08ca2a25":"markdown","bfdc3337":"markdown","bc9eee6f":"markdown","fef6221f":"markdown","1fe5a373":"markdown","5c9ce586":"markdown","95580774":"markdown","e059a505":"markdown","05f1ab1e":"markdown"},"source":{"c350d29f":"import pandas as pd\nimport plotly.graph_objects as go","e3b3d557":"cholera = pd.read_csv('..\/input\/cholera-dataset\/data.csv')","42cbb91a":"cholera.head()","9cac5097":"# Making column names shorter\ncholera.rename(columns = {'Number of reported cases of cholera': 'Cases', \n                          'Number of reported deaths from cholera': 'Deaths', \n                          'Cholera case fatality rate': 'Fatality rate', \n                          'WHO Region': 'Region'}, inplace = True)","b7e65a6c":"cholera.info()","9f373435":"# Checking if 'Fatality rate' can be calculated based on 'Cases' and 'Deaths'\ncholera[(cholera['Fatality rate'].isnull()) & (~cholera['Cases'].isnull()) & (~cholera['Deaths'].isnull())]","91d450b6":"# Checking non-numerical values in Fatality rate column\ncholera [(~cholera['Cases'].fillna('0').str.replace(' ','').str.isnumeric()) | (~cholera['Deaths'].fillna('0').str.replace('.','').str.isnumeric()) | (~cholera['Fatality rate'].fillna('0').str.replace('.','').str.isnumeric())]","33c33a4e":"# Fixing data and changing types to floats\ncholera['Cases'] = cholera['Cases'].str.replace('3 5','3').str.replace(' ','').astype('float')\ncholera['Deaths'] = cholera['Deaths'].str.replace('Unknown','0').str.replace('0 0','0').astype('float')\ncholera['Fatality rate'] = cholera['Fatality rate'].str.replace('Unknown','0').str.replace('0.0 0.0','0').astype('float')","a91384fa":"cholera.describe()","74713893":"cholera[cholera['Fatality rate'] > 100]","7c1afe19":"cholera.loc[1094, 'Deaths'] = 0\ncholera.loc[1094, 'Fatality rate'] = 0","dfd07bae":"# Total number of Cases\ncholera['Cases'].sum()","601ee74d":"# Countries with top 10 number of cases\ncholera.groupby(['Country'])['Cases'].sum().sort_values(ascending = False).head(10)","fdd9cfc4":"# Total number of deaths\ncholera['Deaths'].sum()","28bccfdd":"# Countries with top 10 number of deaths\ncholera.groupby(['Country'])['Deaths'].sum().sort_values(ascending = False).head(10)","617b0488":"# 10 year with biggest outbreaks\ncholera.groupby(['Year'])['Cases'].sum().sort_values(ascending = False).head(10)","a32c888b":"# Statistics for last 5 years \ncholera[cholera['Year'] > 2010].groupby(['Year', 'Region'])['Cases'].sum().sort_index(ascending = [False, True])","c3bf9491":"import plotly.graph_objects as go\n\nfig = go.Figure(data=go.Choropleth(    \n    locations = cholera.groupby('Country')['Cases'].sum().index,\n    locationmode = \"country names\",\n    z = cholera.groupby('Country')['Cases'].sum(),\n    #text = cholera.groupby('Country')['Cases'].sum().index,\n    colorscale = 'Reds_r',\n    autocolorscale=False,\n    reversescale=True,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_title = 'Number of cases',\n))\n\nfig.update_layout(\n    title_text='Cholera Cases',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='natural earth'\n    )\n)\n\nfig.show()","8169fc6f":"import plotly.graph_objects as go\n\nfig = go.Figure(data=go.Choropleth(    \n    locations = cholera.groupby('Country')['Deaths'].sum().index,\n    locationmode = \"country names\",\n    z = cholera.groupby('Country')['Deaths'].sum(),\n    colorscale = 'Hot',\n    autocolorscale=False,\n    reversescale=True,\n    marker_line_color='darkgray',\n    marker_line_width=0.5,\n    colorbar_title = 'Number of cases',\n))\n\nfig.update_layout(\n    title_text='Cholera Cases',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='natural earth'\n    )\n)\n\nfig.show()","340b35ed":"import plotly.express as px\nfig = px.scatter_geo(cholera.dropna(), \n                     locations = \"Country\", locationmode = \"country names\", \n                     color=\"Cases\", color_continuous_scale = \"Reds\",\n                     hover_name=\"Country\", \n                     size = cholera.dropna()[\"Cases\"], size_max = 50,\n                     animation_frame = \"Year\",\n                     category_orders = {\"Year\": range(1949,2017)},\n                     projection=\"natural earth\"                    \n                    )\nfig.update_geos(\n    showframe=False,\n    showcoastlines=False,\n    showcountries=True, \n    countrycolor=\"White\")\nfig.show()","aee94676":"fig = go.Figure(data=[\n     go.Bar(name='Deaths', x = cholera.groupby(['Country'])['Fatality rate'].mean().sort_values(ascending = False).head(15).sort_values(), \n            y = cholera.groupby(['Country'])['Fatality rate'].mean().sort_values(ascending = False).head(15).sort_values().index,\n            orientation='h', marker_color='indianred')\n])\n\nfig.update_layout(title_text='Cholera cases fatality rate', height = 500)\nfig.show()","11a62768":"fig = go.Figure(data=[\n    go.Bar(name='Deaths', x = cholera[cholera['Country'] == 'Ukraine']['Year'], y = cholera[cholera['Country'] == 'Ukraine']['Deaths'], \n    marker_color='lightslategray'), \n    go.Bar(name='Cases', x = cholera[cholera['Country'] == 'Ukraine']['Year'], y = cholera[cholera['Country'] == 'Ukraine']['Cases'], marker_color='indianred')\n])\nfig.update_layout(barmode='stack', title_text='Cholera in Ukraine', height = 400, width = 600)\nfig.show()","e90138ea":"And total number of cholera deaths in every country.","804044a0":"## Checking data","cca2a1b1":"# Visualisation","b6050f39":"Let's find out which countries have the biggest Fatality rate.","85660045":"Let's take a look on total number of cholera cases (since 1949 year) in every country.","b3b45568":"Below you can see an animation, that shows how cholera disease was spread since 1949 year.","25f91a73":"[This WHO report](https:\/\/www.who.int\/csr\/resources\/publications\/surveillance\/en\/cholera.pdf) says \nthat there were no deaths because of cholera in Europe in 1998, so I'm going to correct data for Italy.","b1f3fd91":"# Objectives\n\nDuring whole my live I haven't met a person that is or was sick with cholera. It is interesting for me to investigate this disease, as it might be somewhere around me, but I just don't know that. \n\nIn this notebook I want to build:\n- distribution plot for my country (Ukraine) to find out, how many cases are there. \n- map-plots using plotly to see, where are the most active regions. ","d35c6d51":"Thank you for reviewing. Hope you found some interesting insights!\n\nPlease rate this notebook and leave comments with your opinion.)","08ca2a25":"As last step I'm going to check situation in my country - Ukraine.","bfdc3337":"Let's change some data types.","bc9eee6f":"How is that possible, that Fatality Rate is more than 100%? Checking where is the problem:","fef6221f":"There are missing values in 'Number of reported cases of cholera', 'Number of reported deaths from cholera' and 'Cholera case fatality rate' columns, but I'm not able to find or calculate these data.","1fe5a373":"# Numbers","5c9ce586":"In this chapter I'd like to find numbers like:\n- total number of cases and deaths; \n- top 10 countries with biggest numbers of choleras cases and deaths; \n- top 10 years with biggest outbreaks;\n- statistics for last years.","95580774":"At this chapter I'm going to create map-plots that visualise the situation with cholera disease in the world. here you will find:\n- map with total number of cholera cases per country.\n- map with total number of cholera deaths per country.\n- animation shows how cholera was spread.\n- bar plot with TOP 15 fatality rates (taken average rate per country).\n- statistics in Ukraine.","e059a505":"- There is no information neither in the dataset nor in Internat, that somebody dead in Germany because of cholera in 2016, so I'm going to replace 'Unknown' values with '0'.\n- For Iraq I'll leave only '3' as number of cases, because only 3 cases were reported to [WHO](https:\/\/www.who.int\/gho\/epidemic_diseases\/cholera\/cases\/en\/) ","05f1ab1e":"In this chapter I'll upload data, review the dataset and fix possible errors, which is needed to find correct statistics and build correct visuals."}}