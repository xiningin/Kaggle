{"cell_type":{"7f89e016":"code","84070e31":"code","868ba361":"code","e0a3d92c":"code","2a5dcf97":"code","448ad9a9":"code","c87f76af":"code","08bafd02":"code","7c63f921":"code","002a2bc7":"code","872c503b":"code","9fb72035":"code","201e2d9e":"code","ba5fc714":"code","e5a0a52d":"code","0ec15b0a":"code","3892c809":"code","45974021":"code","8684cd9c":"code","62ae15c6":"code","e3080651":"code","600c6282":"code","7d80295c":"code","73681262":"code","facd2f76":"code","dd046444":"code","4a56ebd1":"code","70a3d355":"code","91c04a73":"code","d9a00f1f":"code","d187ae26":"code","ad21db0a":"code","3ca33c87":"code","25c68f40":"markdown"},"source":{"7f89e016":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","84070e31":"attendance_valuation_elo_df = pd.read_csv(\"..\/input\/nba_2017_att_val_elo.csv\");attendance_valuation_elo_df.head()","868ba361":"salary_df = pd.read_csv(\"..\/input\/nba_2017_salary.csv\");salary_df.head()\n","e0a3d92c":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\");pie_df.head()","2a5dcf97":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\");plus_minus_df.head()","448ad9a9":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\");br_stats_df.head()","c87f76af":"plus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","08bafd02":"\nnba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', \"PS\/G\": \"POINTS\"}, inplace=True)\nnba_players_df.drop([\"G\", \"GS\", \"TEAM\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","7c63f921":"\npie_df_subset = pie_df[[\"PLAYER\", \"PIE\", \"PACE\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","002a2bc7":"salary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)\nsalary_df[\"SALARY_MILLIONS\"] = round(salary_df[\"SALARY\"]\/1000000, 2)\nsalary_df.drop([\"POSITION\",\"TEAM\", \"SALARY\"], inplace=True, axis=1)\nsalary_df.head()","872c503b":"nba_players_with_salary_df = nba_players_df.merge(salary_df); \nnba_players_with_salary_df.head()","9fb72035":"#salary distribution\nsns.kdeplot(nba_players_with_salary_df[\"SALARY_MILLIONS\"], color=\"Blue\", shade=True)","201e2d9e":"plt.subplots(figsize= (10, 5))\nsns.countplot(x= \"AGE\", data =nba_players_with_salary_df)","ba5fc714":"plt.subplots(figsize= (10, 5))\nsns.countplot(x= \"POSITION\", data =nba_players_with_salary_df)","e5a0a52d":"ax=sns.pairplot(plus_minus_df)","0ec15b0a":"fig = plt.subplots(figsize= (10, 5))\nax = sns.boxplot(y= \"SALARY_MILLIONS\" , x=\"AGE\", data = nba_players_with_salary_df, orient=\"Vertical\", width= 0.9)","3892c809":"plt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY)\")\ncorr = nba_players_with_salary_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values,\n           cmap=\"Accent\",\n           annot =True)","45974021":"wiki_df = pd.read_csv(\"..\/input\/nba_2017_player_wikipedia.csv\");wiki_df.head()\n","8684cd9c":"wiki_df.rename(columns={'names': 'PLAYER', \"pageviews\": \"PAGEVIEWS\"}, inplace=True)\n","62ae15c6":"median_wiki_df = wiki_df.groupby(\"PLAYER\").median()\n","e3080651":"\nmedian_wiki_df_small = median_wiki_df[[\"PAGEVIEWS\"]]","600c6282":"median_wiki_df_small = median_wiki_df_small.reset_index()\n","7d80295c":"nba_players_with_salary_wiki_df = nba_players_with_salary_df.merge(median_wiki_df_small)\n","73681262":"twitter_df = pd.read_csv(\"..\/input\/nba_2017_twitter_players.csv\");twitter_df.head()\n","facd2f76":"nba_players_with_salary_wiki_twitter_df = nba_players_with_salary_wiki_df.merge(twitter_df)\n","dd046444":"nba_players_with_salary_wiki_twitter_df.head()","4a56ebd1":"#popularity distribution\nsns.kdeplot(nba_players_with_salary_wiki_twitter_df[\"TWITTER_RETWEET_COUNT\"], color=\"Blue\", shade=True)","70a3d355":"\nplt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY & TWITTER & WIKIPEDIA)\")\ncorr = nba_players_with_salary_wiki_twitter_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","91c04a73":"fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(nrows=2, ncols=2, figsize=(14,10))\nOverallQual_scatter_plot = pd.concat([nba_players_with_salary_df['MPG'],nba_players_with_salary_df['SALARY_MILLIONS']],axis = 1)\nsns.regplot(x='MPG',y = 'SALARY_MILLIONS',data = OverallQual_scatter_plot,scatter= True, fit_reg=True, ax=ax1)\n\nTotalBsmtSF_scatter_plot = pd.concat([nba_players_with_salary_df['AGE'],nba_players_with_salary_df['SALARY_MILLIONS']],axis = 1)\nsns.regplot(x='AGE',y = 'SALARY_MILLIONS',data = TotalBsmtSF_scatter_plot,scatter= True, fit_reg=True, ax=ax2)\n\nGrLivArea_scatter_plot = pd.concat([nba_players_with_salary_wiki_twitter_df['TWITTER_RETWEET_COUNT'],nba_players_with_salary_wiki_twitter_df['SALARY_MILLIONS']],axis = 1)\nsns.regplot(x='TWITTER_RETWEET_COUNT',y = 'SALARY_MILLIONS',data = GrLivArea_scatter_plot,scatter= True, fit_reg=True, ax=ax3)\n\nGarageArea_scatter_plot = pd.concat([nba_players_with_salary_wiki_twitter_df['PAGEVIEWS'],nba_players_with_salary_wiki_twitter_df['SALARY_MILLIONS']],axis = 1)\nsns.regplot(x='PAGEVIEWS',y = 'SALARY_MILLIONS',data = GarageArea_scatter_plot,scatter= True, fit_reg=True, ax=ax4)\n","d9a00f1f":"results = smf.ols('SALARY_MILLIONS ~ TWITTER_RETWEET_COUNT', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","d187ae26":"results = smf.ols('SALARY_MILLIONS ~ POINTS', data=nba_players_with_salary_df).fit()\nprint(results.summary())","ad21db0a":"results = smf.ols('SALARY_MILLIONS ~WINS_RPM', data=nba_players_with_salary_df).fit()\nprint(results.summary())","3ca33c87":"results = smf.ols('SALARY_MILLIONS ~ PAGEVIEWS', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","25c68f40":"Exploration of How Social Media Can Predict Winning Metrics Better Than Salary"}}