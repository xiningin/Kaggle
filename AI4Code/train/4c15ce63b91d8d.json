{"cell_type":{"86dc1ba5":"code","2e7cd079":"code","36bd2ec2":"code","30ddd351":"code","e3d769d6":"code","32b2120a":"markdown","ae24dffc":"markdown","a0650917":"markdown","7314e12d":"markdown"},"source":{"86dc1ba5":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib\nimport matplotlib.dates as mdates\nimport matplotlib.cbook as cbook\nfrom matplotlib.dates import MO, TU, WE, TH, FR, SA, SU\nfrom pandas.plotting import register_matplotlib_converters\nregister_matplotlib_converters()\n# tick on mondays every week\nloc =mdates.WeekdayLocator(byweekday=TU)\n\n\nmatplotlib.style.use('fivethirtyeight')\n\nurl = 'https:\/\/www.data.gouv.fr\/fr\/datasets\/r\/63352e38-d353-4b54-bfd1-f1b3ee1cabd7'\nurl_nouveaux='https:\/\/www.data.gouv.fr\/fr\/datasets\/r\/6fadff46-9efd-4c53-942a-54aca783c30c'\ndf = pd.read_csv(url,sep=';')\ndf_group = df[df['sexe'] == 0].groupby('jour')['hosp','rea','dc','rad'].sum()\ndf_group.index = pd.to_datetime(df_group.index, format='%Y-%m-%d')\ndf_nouveaux = pd.read_csv(url_nouveaux,sep=';')\ndf_nouveaux.index = pd.to_datetime(df_nouveaux.index)\n\ndf_group_n = df_nouveaux.groupby('jour')['incid_hosp','incid_rea','incid_rad'].sum()\ndf_group_n.index = pd.to_datetime(df_group_n.index, format='%Y-%m-%d')\ndef plotBars(res,title,ylabel=\"\",xlabel=\"Dia\",color=\"C0\"):\n    fig, ax = plt.subplots(figsize=(8,5))\n    ax.xaxis.set_major_locator(loc)\n    ax.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\n    ax.bar(res.index.to_pydatetime(), res,color=color)\n    ax.set_title(title)\n    ax.set_ylabel(ylabel)\n    ax.set_xlabel(xlabel)\n\n\nres=df_group['hosp'].diff()\n#plotBars(res,\"Hospitalizations\",\"New Hospitalizations\")\n\n\n#ax0=df_group['rea'].diff().plot(secondary_y=True,title=\"Ocupa\u00e7\u00e3o de leitos em UTI (Fran\u00e7a)\", color=\"C0\")\n\n#ax=df_group_n['incid_rea'].plot(kind=\"bar\" ,title=\"Novas entradas em UTI (Fran\u00e7a)\", color=\"C2\")\n#ax.bar(df_group_n['incid_rea'].index.to_pydatetime(), df_group_n['incid_rea'])\n#plotBars(df_group_n['incid_rea'],\"New ICU\",\"New ICU\",color=\"C2\")\n\n","2e7cd079":"fig, ax = plt.subplots(figsize=(8,5))\n\n#ax0=df_group['rea'].plot(title=\"Ocupa\u00e7\u00e3o de leitos em UTI (Fran\u00e7a)\", color=\"C0\")\n\nax0 = ax.twinx()\nax0.set_title(\"ICU occupation (France)\")\nax0.set_xlabel(\"Dia\")\nax0.xaxis.set_major_locator(loc)\nax0.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\n\nax0.spines['left'].set_color('C1')\nax0.yaxis.label.set_color('C1')\nax.tick_params(axis='y', colors='C1')\nax.set_ylabel(\"New ICU \")\nax.yaxis.label.set_color('C1')\n\nax0.plot(df_group['rea'].index.to_pydatetime(), df_group['rea'],color='C0')\n\n#ax=df_group['rea'].diff().plot(kind=\"bar\",secondary_y=True,color=\"C1\",ax=ax0)\nres=df_group['rea'].diff()\nax.bar(res.index.to_pydatetime(), res,color='C1')\nax0.spines['right'].set_color('C0')\nax.spines['right'].set_color('C0')\nax.xaxis.set_major_locator(loc)\nax.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\nax0.tick_params(axis='y', colors='C0')#\nax0.set_ylabel(\"Number of ICU\")\nax0.yaxis.label.set_color('C0')\nax0.grid(False)\n\nfig.tight_layout()\n#ax0.set_xlabel(\"Dia\")\n","36bd2ec2":"fig, ax = plt.subplots(figsize=(8,5))\n\n#ax0=df_group['rea'].plot(title=\"Ocupa\u00e7\u00e3o de leitos em UTI (Fran\u00e7a)\", color=\"C0\")\n\nax0 = ax.twinx()\nax0.set_title(\"Hospitalizations(France)\")\nax0.set_xlabel(\"Day\")\nax0.xaxis.set_major_locator(loc)\nax0.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\n\nax0.spines['left'].set_color('C1')\nax0.yaxis.label.set_color('C1')\nax.tick_params(axis='y', colors='C1')\nax.set_ylabel(\"New Hospitalizations \")\nax.yaxis.label.set_color('C1')\n\nax0.plot(df_group['hosp'].index.to_pydatetime(), df_group['hosp'],color='C0')\n\n#ax=df_group['rea'].diff().plot(kind=\"bar\",secondary_y=True,color=\"C1\",ax=ax0)\nres=df_group['hosp'].diff()\nax.bar(res.index.to_pydatetime(), res,color='C1')\nax0.spines['right'].set_color('C0')\nax.spines['right'].set_color('C0')\nax.xaxis.set_major_locator(loc)\nax.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\nax0.tick_params(axis='y', colors='C0')#\nax0.set_ylabel(\"Total Hospitalizations\")\nax0.yaxis.label.set_color('C0')\nax0.grid(False)\n\nfig.tight_layout()","30ddd351":"fig, ax = plt.subplots(figsize=(8,5))\n\n#ax0=df_group['rea'].plot(title=\"Ocupa\u00e7\u00e3o de leitos em UTI (Fran\u00e7a)\", color=\"C0\")\n\nax0 = ax.twinx()\nax0.set_title(\"Deaths (France)\")\nax0.set_xlabel(\"Day\")\nax0.xaxis.set_major_locator(loc)\nax0.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\n\nax0.spines['left'].set_color('C1')\nax0.yaxis.label.set_color('C1')\nax.tick_params(axis='y', colors='C1')\nax.set_ylabel(\"New Deaths \")\nax.yaxis.label.set_color('C1')\n\nax0.plot(df_group['dc'].index.to_pydatetime(), df_group['dc'],color='C0')\n\n#ax=df_group['rea'].diff().plot(kind=\"bar\",secondary_y=True,color=\"C1\",ax=ax0)\nres=df_group['dc'].diff()\nax.bar(res.index.to_pydatetime(), res,color='C1')\nax0.spines['right'].set_color('C0')\nax.spines['right'].set_color('C0')\nax.xaxis.set_major_locator(loc)\nax.xaxis.set_major_formatter(mdates.DateFormatter('%d\/%m'))\nax0.tick_params(axis='y', colors='C0')#\nax0.set_ylabel(\"Total Deaths\")\nax0.yaxis.label.set_color('C0')\nax0.grid(False)\n\nfig.tight_layout()\n","e3d769d6":"#df_group['rad'].plot(title=\"Retours \u00e0 domicile\")\n#df_group['rad'].diff().plot(kind=\"bar\",secondary_y=True,color=\"red\")","32b2120a":"# COVID-19 France  Plot from official data","ae24dffc":"### ICU occupation\nLooks like the most important indicator on the epidemy impact ","a0650917":"### Hospitalizations","7314e12d":"### Retours \u00e0 domicile"}}