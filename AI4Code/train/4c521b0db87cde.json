{"cell_type":{"56a12173":"code","e0de456d":"code","dce66ddd":"code","d4d7cb31":"code","f31e0b2d":"code","7a2b8f97":"code","c352a27d":"code","6f7d8ab6":"code","8efc7816":"code","96f27aae":"code","bc15a1d1":"code","4763c377":"code","d9c565c9":"markdown"},"source":{"56a12173":"# importing libraries\nimport pandas as pd\nimport numpy as np\nimport glob\nimport seaborn as sns\nimport matplotlib.pyplot as plt","e0de456d":"# Reading District info dataset\ndistrict = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\ndisplay(district.isnull().sum())\nprint(district.shape)","dce66ddd":"# Making a copy\ndistrict_df1=district.copy()\n# Fill NAN values in state column to perform groupby\ndistrict_df1['state'].fillna('NIL',inplace=True)\ndistrict_df1.head()","d4d7cb31":"# Groupby state\ndistrict_df1=district_df1.groupby('state')\n# Getting all the NIL district number\ndistrict_df1=district_df1.get_group('NIL')\ndistrict_df1=district_df1['district_id']\n# converting all the district id to str\ndistrict_df1=district_df1.astype('str')\ndistrict_df1","f31e0b2d":"# converting the series to list\ndistrict_nan_lst=district_df1.to_list()\nprint(district_nan_lst)\n# allocating a filepath\npath = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/'\n# allocating a filetype\nfiletype='.csv'\n# concatenate strings of full filepath\ndistrict_nan_lst=[path+filename+filetype for filename in district_nan_lst]\ndistrict_nan_lst","7a2b8f97":"# Reading the files without the filepath listed above\npath = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data'\nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    if filename not in district_nan_lst:\n        df = pd.read_csv(filename, index_col=None, header=0)\n        district_id = filename.split(\"\/\")[4].split(\".\")[0]\n        df[\"district_id\"] = district_id\n        li.append(df)\n    \nengagement_df = pd.concat(li)\nengagement_df = engagement_df.reset_index(drop=True)\nengagement_df.head()","c352a27d":"# print(engagement_df.loc[engagement_df['district_id']=='2685'])","6f7d8ab6":"#Check null value of data\ndisplay(engagement_df.isnull().sum())\n# make a copy\nengage_df=engagement_df.copy()\n# Drop unneccessary columns first\nengage_df.drop(['lp_id','engagement_index','district_id'],axis=1,inplace=True)\n# Drop NAN rows for pct_access\nengage_df.dropna(axis=0,inplace=True)","8efc7816":"# display(engage_df.isnull().sum())","96f27aae":"# Creating another column to extract out the month from the given date\nengage_df['month'] = engage_df['time'].str[5:7] # Slicing out the month\n\n# Writing Function to replace month to 3 character month\ndef replace_month(data,month):\n    month_dict={\n               \"01\":\"Jan\",\n               \"02\":\"Feb\",\n               \"03\":\"Mar\",\n               \"04\":\"Apr\",\n               \"05\":\"May\",\n               \"06\":\"Jun\",\n               \"07\":\"Jul\",\n               \"08\":\"Aug\",\n               \"09\":\"Sep\",\n               \"10\":\"Oct\",\n               \"11\":\"Nov\",\n               \"12\":\"Dec\"}\n    \n    for key,value in month_dict.items():\n        if month == key:\n            data.replace(to_replace=month,value=value,inplace=True)\n    return data\n\n# Replacing the month value\nlst=[\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\"]\n\nfor month in lst:\n    replace_month(engage_df,month)\n    \nengage_df\n","bc15a1d1":"# Daily mean and median\ndf1=engage_df.copy()\ndf1=df1.groupby(['time']).mean()\ndf2=engage_df.copy()\ndf2=df2.groupby(['time']).median()\nprint(df1.head())\nprint(df2.head())\n\n#Monthly mean and median\ndf3=engage_df.copy()\ndf3=df3.groupby(['month'],sort=False).mean()\ndf4=engage_df.copy()\ndf4=df4.groupby(['month'],sort=False).median()\nprint(df3.head())\nprint(df4.head())","4763c377":"# Plotting Graphs that have removed the State with Missing Values From District Info Dataset\nfig,axes = plt.subplots(2,2,figsize=(16,10))\nsns.lineplot(ax=axes[0,0],data=df1,x='time',y='pct_access').xaxis.set_ticks([]) # daily mean\nsns.lineplot(ax=axes[0,1],data=df2,x='time',y='pct_access').xaxis.set_ticks([]) # daily median\nsns.lineplot(ax=axes[1,0],data=df3,x='month',y='pct_access') # monthly mean\nsns.lineplot(ax=axes[1,1],data=df4,x='month',y='pct_access') # monthly median\naxes[0,0].set_title(\"Daily Mean\")\naxes[0,1].set_title(\"Daily Median\")\naxes[1,0].set_title(\"Monthly Mean\")\naxes[1,1].set_title(\"Monthly Median\")","d9c565c9":"The graphs above depict similar trend as the graphs that were plotted previously. This suggests that the data from the State with missing values in the district_info.csv did not affect the general trend observed. The reason for the sudden increase around the period of starting from July 2020 and August 2020 is still unknown. Perhaps, a closer look at the data at the State level instead of the National level may provide us some further insights in explaining the observation."}}