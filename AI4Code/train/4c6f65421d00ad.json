{"cell_type":{"62691956":"code","524f875c":"code","a0769481":"code","2946d72f":"code","c39e57e9":"code","4023b83d":"code","11006bd2":"code","e36154b8":"code","3ab8b094":"code","0195889f":"code","e0ebb817":"code","f2267247":"code","9609031f":"code","3cb0d8ec":"code","ce51c7d5":"code","47ee9981":"markdown","28a74367":"markdown","d42451da":"markdown","9733fe9d":"markdown","3caf1296":"markdown","82dbcb77":"markdown","54f5760e":"markdown","33e9d550":"markdown","2e47a6d0":"markdown","4a3dfa62":"markdown","92dd6dd0":"markdown","4432a5d0":"markdown","86afbc93":"markdown","9e3fbee2":"markdown"},"source":{"62691956":"import numpy as np\nimport pandas as pd\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pandas_profiling import ProfileReport\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nmpl.style.use('ggplot') \n%matplotlib inline","524f875c":"data = pd.read_csv('..\/input\/air-quality-data-india-from-20152020\/city_day_new.csv')\ndata.head(5)","a0769481":"data['Date'] = pd.to_datetime(data['Date'])\ndata['year'] = data['Date'].dt.year","2946d72f":"ax = data['AQI'].plot.kde()\nax.set_title('AQI Distibution')","c39e57e9":"aqi = pd.DataFrame(data.groupby('City')['AQI'].mean())\naqi = aqi.sort_values('AQI')","4023b83d":"ax = aqi.plot(kind='barh', \n          figsize = (17, 17), \n          width = 0.4,\n          linewidth=2, \n          edgecolor='white')\n\ntt = \"Cities with highest AQI\"\nax.set_title(tt, fontsize=26)\nplt.legend(fontsize = 18)\nax.set_yticklabels(aqi.index.tolist(),fontsize=22)\nax.axes.get_yaxis().set_visible(True)\nax.set_xticklabels([0,100,200,300,400],fontsize=18)\nax.axes.get_xaxis().set_visible(True)\n","11006bd2":"perc = data[['year','City','AQI']]\nperc['mean_AQI']=perc.groupby([perc.City,perc.year])['AQI'].transform('mean')\nperc.drop('AQI',axis=1,inplace=True)\nperc = perc.drop_duplicates().set_index('year')","e36154b8":"!jupyter nbextension enable --py --sys-prefix widgetsnbextension","3ab8b094":"import ipywidgets as widgets\nfrom ipywidgets import HBox, VBox\nfrom IPython.display import display","0195889f":"@widgets.interact_manual(\n    city=aqi.index.tolist())\ndef plot(city='Ahmedabad',grid=True):\n    df = perc[perc['City'] == city]\n    df.drop('City',axis=1,inplace=True)\n    df.plot(kind='bar', figsize = (10, 5), width = 0.1, linewidth=2, edgecolor='white')\n    tt = \"Year Wise AQI\"\n    plt.title(tt, fontsize=18)\n    plt.xlabel('Year')\n    plt.xticks(rotation=0)\n    plt.ylabel('AQI')\n    plt.legend(fontsize = 16)","e0ebb817":"city = aqi.index.tolist()\n# Removing cities having data of less than 3 years\nunwanted_cities = ['Shillong','Ernakulam','Chandigarh','Kochi','Guwahati','Bhopal','Aizawl'] \nfor ele in unwanted_cities:\n    city.remove(ele)\nfig = plt.figure(figsize=(15,28))\nfor i in range(len(city)):\n    df = data[data['City']==city[i]]\n    df_year = df.groupby('year')['AQI'].mean().reset_index().dropna()\n    ax = fig.add_subplot(6,3,i+1)\n    ax.plot(df_year['year'], df_year['AQI'])\n    ax.set_xticks(df_year['year'].tolist())\n    ax.set_title(city[i])\n    ax.set_ylabel('Mean AQI')\nfig.tight_layout(pad=0.5)","f2267247":"ele = ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2',\n       'O3', 'Benzene', 'Toluene', 'Xylene']\ndf = data.groupby('City')[ele].mean()\n# Fill the Null values with 0\ndf = df.fillna(0.0)","9609031f":"@widgets.interact_manual(\n    Compound = ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2',\n       'O3', 'Benzene', 'Toluene', 'Xylene'])\ndef plot(Compound='PM2.5',grid=True):\n    curr = df[Compound]\n    curr.plot(kind='bar', figsize = (20, 10), width = 0.35, linewidth=2, edgecolor='white')\n    tt = \"Variation in Compounds\"\n    plt.title(tt, fontsize=18)\n    plt.xlabel('City')\n    plt.xticks(rotation=45 , ha='right' ,fontsize=17)\n    plt.ylabel('Amount')\n    plt.legend(fontsize = 18)","3cb0d8ec":"variables = ['PM2.5', 'PM10', 'NO', 'NO2', 'NOx', 'NH3', 'CO', 'SO2','O3', 'Benzene', 'Toluene', 'Xylene']\nfig = plt.figure(figsize=(16,34))\nfor variable,num in zip(variables, range(1,len(variables)+1)):\n    ax = fig.add_subplot(6,2,num)\n    sns.scatterplot(variable, 'AQI', hue='year', data=data , palette='Oranges')\n    plt.title('Relation between {} and AQI'.format(variable))\n    plt.xlabel(variable)\n    plt.ylabel('AQI')\nfig.tight_layout(pad=0.5)","ce51c7d5":"cities = ['Delhi', 'Ahmedabad', 'Patna', 'Gurugram', 'Lucknow']\nfig,ax = plt.subplots(figsize=(15, 7))\nfor city in cities: \n    sns.lineplot(x=\"Date\", y=\"AQI\", data=data[data['City']==city].iloc[::30],label = city)\nax.set_title('AQI values in cities')\nax.legend()","47ee9981":"# Monthly trend of cities with highest AQI ","28a74367":"# Variation in Compunds","d42451da":"<div style=\" background-color: #ebecf1;\n             padding-top: 60px;\n             padding-right: 20px;\n             padding-bottom: 60px;\n             padding-left: 60px;\"><h3>For now this is the end of the analysis. Please do vote if you like it and let me know in the comments if there is anything wrong or how to improve it.<\/h3><\/div>","9733fe9d":"<p> \u26a0\ufe0f Increasing Trend - Kolkata and Talcher<\/p>\n<p> Things aren't looking good for Kolkata and Talcher. All other cities are improving their AQI.<\/p>","3caf1296":"##  Cities which are at higher risks \ud83d\ude37\n\n<p>PM2.5 - Patna, Gurugram, Delhi, Lucknow<\/p>\n<p>PM10 - Delhi , Gurugram, Talcher, Jorapokhar<\/p>\n<p>NO - Kochi, Delhi, Patna, Talcher, Mumbai<\/p>\n<p>NO2 - Ahmedabad, Delhi, Kolkata, Patna, Visakhapatnam<\/p>\n<p>NOx - Kochi, Kolkata, Delhi, Mumbai<\/p>\n<p>NH3 - Chennai<\/p>\n<p>CO - Ahmedabad<\/p>\n<p>SO2 - Ahmedabad, Jorapokhar, Talcher<\/p>\n<p>O3 - Bhopal, Delhi, Jaipur<\/p>\n<p>Benzene - Shilong<\/p>\n<p>Toluene - Shilong<\/p>\n<p>Xylene - Amritsar<\/p>","82dbcb77":"# Trend Analysis of AQI for each city","54f5760e":"# Which city has highest AQI ?","33e9d550":"# Year Wise AQI of each City","2e47a6d0":"All the cities have almost sililar trend, but except for Ahmedabad city from 2018 onwards there is very high growth in AQI.","4a3dfa62":"### Check the relation for each compound\n\n<p>Strong Positive Relation - PM2.5, PM10, NOx, CO, O3, NO<\/p>\n<p>Skewed Relation          - NH3, Benzene, Toluene, Xylene<\/p>\n<p>No Relation              - NO2, SO2<\/p>","92dd6dd0":"Not much information can be extracted from compounds alone. So we will try to visualize the relation between compounds and AQI.","4432a5d0":"<h1 align=center><font size = 5> EDA on Air Quality Data (India) from 2015-2020<\/font><\/h1>\n<br>\n<br>\n<a><img src = \"https:\/\/www.deq.ok.gov\/wp-content\/uploads\/air-division\/aqi_mini.png\" width = 400><\/a>","86afbc93":"# Relation between Compounds and AQI","9e3fbee2":"# How AQI is distributed ?"}}