{"cell_type":{"9ae982d8":"code","59cad704":"code","5e4eae80":"code","14dfaf9e":"code","e27d10c3":"code","b1d8169f":"code","86b63b28":"code","c8b468b1":"code","64a5dd11":"code","84cc594d":"code","7de145cf":"code","3ba73aa7":"code","2561e316":"markdown","091810ef":"markdown","a40334ca":"markdown","3e15ecd1":"markdown","2ce5150d":"markdown"},"source":{"9ae982d8":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\npd.set_option(\"display.max_rows\",1001)\npd.set_option(\"display.max_columns\",300)","59cad704":"bfd = pd.read_csv(\"..\/input\/BlackFriday.csv\")","5e4eae80":"bfd.head()","14dfaf9e":"grp = bfd.groupby(['User_ID','Product_ID']).count()['Purchase'].reset_index()\ngrp[grp.Purchase>1]","e27d10c3":"grp = bfd.groupby(['Gender']).nunique()['User_ID']\ngrp.apply(lambda x : 100*x\/grp.sum()).reset_index()","b1d8169f":"grp_city = bfd.groupby(['Gender','City_Category']).nunique()['User_ID'].reset_index()\npivot_city = grp_city.pivot(index='City_Category',columns='Gender',values='User_ID')\ncolors = [\"#006D2C\", \"#31A354\"]\npivot_city.loc[:,['F','M']].plot.bar(stacked=True, color=colors, figsize=(20,10),title='Distribution of Gender by City_category')","86b63b28":"grp_city = bfd.groupby(['Gender','City_Category']).sum()['Purchase'].reset_index()\npivot_city = grp_city.pivot(index='City_Category',columns='Gender',values='Purchase')\npivot_city.loc[:,['F','M']].plot.bar(stacked=True, color=colors, figsize=(20,10),title='Distribution of Purchase value by Gender and City_category')","c8b468b1":"grp_age = bfd.groupby(['Gender','Age']).nunique()['User_ID'].reset_index()\npivot_age = grp_age.pivot(index='Age',columns='Gender',values='User_ID')\npivot_age.loc[:,['F','M']].plot.bar(stacked=True, color=colors, figsize=(20,10),title='Distribution of Gender by Age')","64a5dd11":"grp_occ = bfd.groupby(['Gender','Occupation']).nunique()['User_ID'].reset_index().sort_values(by='User_ID',ascending=False)\npivot_occ = grp_occ.pivot(index='Occupation',columns='Gender',values='User_ID')\npivot_occ.loc[:,['F','M']].plot.bar(stacked=True, color=colors, figsize=(20,10),title='Distribution of Gender by Occupation')","84cc594d":"grp_occ = bfd.groupby(['Gender','Occupation']).sum()['Purchase'].reset_index()\npivot_occ = grp_occ.pivot(index='Occupation',columns='Gender',values='Purchase')\npivot_occ.loc[:,['F','M']].plot.bar(stacked=True, color=colors, figsize=(20,10),title='Distribution of Purchase amount by Gender and Occupation')","7de145cf":"age_prd = bfd.groupby(['Age','Gender','Product_ID']).count()['User_ID'].reset_index().sort_values(by=['Age','Gender','User_ID'],ascending=False).reset_index(drop=True)\ntop_20 = age_prd.groupby(['Age','Gender'])['Product_ID','User_ID'].apply(lambda x : x.head(20))\ntop_20 = top_20.reset_index()\ntop_20.dtypes\n#top_5.head()","3ba73aa7":"pivot_top_20 = top_20.pivot_table(index='Product_ID',columns=['Gender','Age'],values='User_ID',fill_value=0)\npivot_top_20","2561e316":"**Observation 3**\n\n* Only 28.28% of the customers are Female.\n* Most occupations have a bias towards Men, except Occupation=9 which is tilted towards the Female population.\n* Most customers belong to city_category 'C'. But the most purchase amount was spent by city_category 'B'.\n* Number of people employed in an occupation is directly proportional to the total amount of purchase made by people in the occupation.\n\n**Step 4**\n\nLets dive deep into the products and see what Product_ID is purchase more by which segment of customers.\n\nHere is the list of **top 20 products** bought by each Age group separated by Gender ","091810ef":"**Observation 5**\n\n* The above table shows a lot of insights such as the follows:\n\n    1. P00010742 is popular among multiple age groups of Males but only among 51-55 among Females.\n   \n    2. P00265242 is popular almost among every age group and gender.\n\n    3. P00251242 is only popular among Females in 46-50 age group","a40334ca":"**Observation 2**\n\nThere are no duplicate records for User_ID+ Product_ID combination\n\n**Step 3**\n\nLet's check how many unique customers are there in the dataset and look at the various categories","3e15ecd1":"**Step 1**\n\nI am going to start by looking at some sample records in the data and then will decide what to analyze","2ce5150d":"**Observation 1**\n\nSo, looking the first 5 records, it is clear that there are **multiple records for some User_IDs**.\n\n**Step 2**\n\nLet's check if for a User_ID+Product_ID combination, there are multiple records or no"}}