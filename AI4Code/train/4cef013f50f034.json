{"cell_type":{"bdb8c01b":"code","5a043dca":"code","0d96fd62":"code","5b7fcde0":"code","4c3280ec":"code","8aecc6ad":"code","a63b571a":"code","ab464614":"code","95161d9d":"code","e35631c0":"code","dc13cdfe":"markdown","e4a6fab6":"markdown","fd302547":"markdown","660d0582":"markdown","c9acdba4":"markdown","1814d0d4":"markdown"},"source":{"bdb8c01b":"#Loading important libraries\nimport numpy as np\nimport pandas as pd\n\nfrom fastai.basics import *\nfrom fastai.callback.all import *\nfrom fastai.vision.all import *\nfrom fastai.medical.imaging import *\nimport pydicom","5a043dca":"items = get_dicom_files('..\/input\/siim-covid19-detection\/train', recurse = True)\nprint (items)","0d96fd62":"dcm = items[0]\nDCM = dcm.dcmread()\nDCM","5b7fcde0":"# Extracting the pixel data as an array\nx =DCM.pixel_array,DCM.pixel_array.shape\nprint (x)\n# Converting the pixel array into tensor using TensorDicom\ntdm = TensorDicom(DCM.pixel_array)\ntdm","4c3280ec":"tdm.show()","8aecc6ad":"%%time\ndicoms_df = pd.DataFrame.from_dicoms(items)","a63b571a":"dicoms_df[:2]","ab464614":"# It is a time consuming process to load dicoms into a dataframe. \n#So, i pickle the dataframe to load with ease in future.\ndicoms_df.shape\ndicoms_df.to_pickle('.\/dicoms_df.pkl')","95161d9d":"%%time \n\ndicom_dataframe = pd.read_pickle('.\/dicoms_df.pkl')\ndicom_dataframe.shape #Just to demonstrate loading a .pkl into a dataframe","e35631c0":"dicom_dataframe.columns #Attributes that could help with further analysis in the future","dc13cdfe":"The DICOM file consists of image information as **pixel data**. We have to convert the pixel array into a tensor.","e4a6fab6":"Now, we are going to create a dataframe to store all the meta-data that we have loaded above","fd302547":"Converting the pixel data into a tensor it is easy to visualise the image by calling **.show** ","660d0582":"Get DICOM files into path by using **get_dicom_files** ","c9acdba4":"fastai.medical.imaging uses pydicom.dcmread to read DICOM file. I specify the path from **items** and call **.dcmread**","1814d0d4":"# **Some key pointers on the tag information above**\n\n**Pixel Data**(7fe0, 0010)- This is where the raw pixel data is stored. Pydicom uses the pixel data (Array of 13249792 elements) to an image.\n\n**Phtometric interpretation**(0028, 0004) - a.k.a colour space. In this file it is 'MONOCHROME1'. It indicates that grayscale ranges from bright to dark with ascending pixel values.\n\n**Samples per Pixel**(0028,0002) - Number of samples (planes) in the image.It is should be 1 for this image because it is monochrome.\n\n**Bits stored**(0028,0101) - Number of bits stored for each pixel sample data.\n\nWe may need this meta-data in future analysis. \n\nhttps:\/\/www.dicomlibrary.com\/dicom\/dicom-tags\/ have complete details about DICOM headers."}}