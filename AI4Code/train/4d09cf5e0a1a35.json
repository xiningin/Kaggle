{"cell_type":{"d408cc29":"code","5cda15b1":"code","9ca8b4f8":"code","cb04378b":"code","43c1a75e":"code","e287ee59":"code","aa7e76a4":"code","92198313":"code","78974cef":"code","8bacc6ef":"code","b72575da":"code","eda3b5f0":"code","7ea7a913":"code","f70d5e2b":"code","12f255e3":"code","e8433639":"code","172b25af":"code","00f76e3f":"code","405da6f7":"code","26cc6379":"code","e0f1650e":"code","76cc898a":"code","6aff198c":"code","cb7bd6ef":"markdown","3f7dff55":"markdown","507900c2":"markdown","875060fd":"markdown","a4a41c31":"markdown","a42db0e8":"markdown","6ab81acc":"markdown","7047ccdc":"markdown","2c78f596":"markdown","73238aa8":"markdown","1d336677":"markdown","62b0bf3f":"markdown","f1cc987c":"markdown","f644526c":"markdown","eafdec7a":"markdown","cadcaecb":"markdown","2e8a5498":"markdown","fb920360":"markdown","4b590619":"markdown","2b020a91":"markdown","82f5e53d":"markdown","6b973d22":"markdown"},"source":{"d408cc29":"# imports\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.cm as cm\nimport seaborn as sns\nimport numpy as np\n\nplt.style.use('seaborn-talk')\n","5cda15b1":"drugs = pd.read_csv('..\/input\/drug-use-by-age\/drug-use-by-age.csv')\ndrugs.head(7)","9ca8b4f8":"drugs.info()","cb04378b":"for i in drugs:\n  for j in range(len(drugs[i])):\n    if (drugs[i][j] == '-'):\n      try:\n        drugs[i][j] = (float(drugs[i][j-1])+float(drugs[i][j+1]))\/2\n      except:\n        if j == 16:\n          drugs[i][j] = float(drugs[i][j-1])\/2\n        elif j == 0:\n          drugs[i][j] = float(drugs[i][j+1])\/2\n  \ndrugs[drugs.select_dtypes(exclude = 'number').columns.to_list()[1:]] = drugs[drugs.select_dtypes(exclude = 'number').columns.to_list()[1:]].astype('float')\n\ndrugs.head(10)","43c1a75e":"drugs.info()","e287ee59":"drugs_names = [i.split('-')[0] for i in drugs.columns.to_list()[3:28:2]]\nfull_drugs_names = drugs.columns.to_list()[3:28:2]\n\ncol = []\nfor i in drugs_names:\n  for j in range(17):\n    col.append(i)\n\ndata = pd.DataFrame(columns=['drugs'], data = col)\n\nvalues = np.array(0)\n\nfor i in full_drugs_names:\n  values = np.append(values,drugs[i].to_list())\n\nvalues = values[1:]\n\ndata['values'] = values\ndata","aa7e76a4":"ax = sns.boxplot(x = 'values', y = 'drugs', data = data, orient='h')\nax.figure.set_size_inches(18,10)\n# ax.set_yticklabels([i for i in data['drugs'].values()])\nax.set_xlabel('Frequency', fontsize=14)\nax.set_ylabel('Drugs', fontsize=14)\nax","92198313":"median_heroin = data.query('drugs == \"heroin\"').median()[0]\nmedian_heroin","78974cef":"drugs['heroin-frequency'][14] = median_heroin\ndrugs['heroin-frequency'][7] = median_heroin","8bacc6ef":"median_stimulant = data.query('drugs == \"stimulant\"').median()[0]\nmedian_stimulant","b72575da":"drugs['stimulant-frequency'][16] = median_stimulant","eda3b5f0":"values = []\nfor i in full_drugs_names:\n  values.append(drugs[i].to_list())\n\nvalues2 = []\nfor l in values:\n  for i in l:\n    values2.append(i)\n\ndata['values'] = values2\ndata","7ea7a913":"ax = sns.boxplot(x = 'values', y = 'drugs', data = data, orient='h')\nax.figure.set_size_inches(18,10)\n# ax.set_yticklabels([i for i in data['drugs'].values()])\nax.set_xlabel('Frequency', fontsize=14)\nax.set_ylabel('Drugs', fontsize=14)\nax","f70d5e2b":"def percentage_use(ds,start = 0 , slice = False):\n  percentage_use = []\n  for i in ds.columns.to_list()[2:28:2]:\n    sum_people = 0\n    for j in range(start,start + len(ds),1):\n      sum_people += ds['n'][j] * (ds[i][j] * 0.01)\n    if (not slice):\n      percentage_use.append(float(100*sum_people \/ sum(ds['n'])))\n    else:\n      percentage_use.append(sum_people)\n\n  return percentage_use","12f255e3":"use_drugs = pd.DataFrame(columns = ['drugs','Percentage of use'], index = range(0, 13))\nuse_drugs['drugs'] = drugs.columns.to_list()[2:28:2]\n\nuse_drugs['drugs'] = use_drugs['drugs'].apply(lambda x: x.split('-')[0]) \n\nuse_drugs['Percentage of use'] = percentage_use(drugs)\nuse_drugs = use_drugs.sort_values('Percentage of use')\nuse_drugs.reset_index(inplace=True)\nuse_drugs.drop(columns= ['index'], inplace=True)\nuse_drugs","e8433639":"plt.figure(figsize=(8,12))\nsns.set_style(\"white\")\nplt.title('Percentage of Use', fontsize = 42, fontname = 'monospace', x = 0.9, y = 1.05, color = '#283655')\nb = sns.barplot(data = use_drugs, x = 'Percentage of use', y = 'drugs', color = 'darkred',palette='Blues')\nplt.xticks([])\nplt.yticks(fontname = 'monospace', fontsize = 14, rotation = 15)\nplt.ylabel('')\nplt.xlabel('')\n\n\nb.spines['left'].set_linewidth(1.5)\nb.spines['top'].set_visible(False)\nb.spines['bottom'].set_visible(False)\nb.spines['right'].set_visible(False)\n\nk = 0.1\nfor i in use_drugs['Percentage of use']:\n  plt.text(i + 0.4,k,f'{i: .2f}%', color= 'black', fontname='monospace')\n  k = k+ 1.0\n ","172b25af":"drugs_minor = drugs.head(6)\ndrugs_minor","00f76e3f":"use_drugs_minor = pd.DataFrame(columns=['drugs','percentage of use'],index=range(0,13))\nuse_drugs_minor['drugs'] = drugs_minor.columns.to_list()[2:28:2]\nuse_drugs_minor['drugs'] = use_drugs_minor['drugs'].apply(lambda x: x.split('-')[0])\n\nuse_drugs_minor['percentage of use'] = percentage_use(drugs_minor)\nuse_drugs_minor = use_drugs_minor.sort_values('percentage of use')","405da6f7":"fig, ax = plt.subplots(figsize=(8,12))\n\nsns.set_style(\"white\")\nplt.title('Percentage of Use in young people', fontsize = 42, fontname = 'monospace', x = 0.9, y = 1.05, color = '#283655')\na = sns.barplot(x = 'percentage of use', y = 'drugs', data = use_drugs_minor, palette='mako')\n\nplt.xticks([])\nplt.yticks(fontname = 'monospace', fontsize = 14, rotation = 15)\nplt.ylabel('')\nplt.xlabel('')\n\n\na.spines['left'].set_linewidth(1.5)\na.spines['top'].set_visible(False)\na.spines['bottom'].set_visible(False)\na.spines['right'].set_visible(False)\n\nk = 0.1\nfor i in use_drugs_minor['percentage of use']:\n  plt.text(i + 0.4,k,f'{i: .2f}%')\n  k = k+ 1.0\n\nplt.show()","26cc6379":"# plt.figure(figsize=(20,10))\nfig, ax = plt.subplots(figsize=(20,10))\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\n\ndrugs_most_used = use_drugs.tail(6)[\"drugs\"]\ndrugs_most_used = list(drugs_most_used[:])\ndrugs_most_used = [x+'-frequency' for x in drugs_most_used]\ndrugs_most_used[3] = 'pain-releiver-frequency'\nplt.grid(axis='y')\n\nj = 0\nfor i in drugs_most_used:\n  plt.plot(drugs['age'],drugs[i], label = drugs_most_used[j].split('-')[0], marker = 'o')\n  j = j+1\n\nplt.title('Annual Consumption of most used drugs',fontsize = 22, color = '#283655', loc='left')\n\nplt.xticks(fontname = 'monospace')\nplt.legend()\nplt.show()\n","e0f1650e":"# plt.figure(figsize=(20,10))\nfig, ax = plt.subplots(figsize=(20,10))\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\n\ndrugs_less_used = use_drugs.head(7)[\"drugs\"]\ndrugs_less_used = list(drugs_less_used[:])\ndrugs_less_used = [x+'-frequency' for x in drugs_less_used]\nprint(drugs_less_used)\nplt.grid(axis='y')\n\nj = 0\nfor i in drugs_less_used:\n  plt.plot(drugs['age'],drugs[i], label = drugs_less_used[j].split('-')[0], marker = 'o')\n  j = j+1\n\nplt.title('Annual Consumption of less used drugs',fontsize = 22, color = '#283655', loc='left')\n\nplt.xticks(fontname = 'monospace')\nplt.legend()\nplt.show()","76cc898a":"mean_drugs = []\nnomes = drugs.columns.to_list()[3:28:2]\n    \nfor i in nomes:\n  mean_drugs.append(drugs[i].mean())\n\nnomes = [i.split('-')[0] for i in drugs.columns.to_list()[3:28:2]]\n\nmeans = pd.DataFrame(index = nomes, data = mean_drugs, columns=['Frequency mean'])\nmeans.reset_index(inplace=True)\nmeans.columns = ['Drugs','Frequency mean']\nmeans","6aff198c":"fig, ax = plt.subplots(figsize=(20,8))\n\nsns.set_theme(style=\"whitegrid\")\nplt.title('Frequency mean', fontsize = 22)\na = sns.barplot(x = 'Drugs', y = 'Frequency mean', data = means)\nplt.ylabel('Percentage')\nplt.xlabel('')\nplt.grid(axis='y')\n\nplt.yticks(color = 'white')\nsns.despine(left=True)\nax.grid(axis='y')\n\nk = -0.2\nfor i in means['Frequency mean']:\n  plt.text(k,i+0.8,f'{i: .2f}')\n  k = k+ 1.0\n\nplt.show()","cb7bd6ef":"According to the information obtained in this study, we can draw some conclusions. According to the analysis of users, we can see that more than seventy-five percent of the people interviewed used either alcohol or marijuana in a period of one year. Making a comparison between the general use chart and the one that only covers underage people, we can see that marijuana is a much more popular drug among young people, unlike alcohol. Finally, we can see that heroin, marijuana and alcohol are the most used drugs during the year.\n","3f7dff55":"***\n# **MISSING DATA AND OUTLIERS**\n***","507900c2":"***\n## **AVERAGE COMSUMPTION**\n***","875060fd":"***\n## **MISSING DATA**\n***\n\nOur missing data is being represented by the '-' character which is considered a **str** by python. Therefore, our entire column is treated as being of the **object** type, making it impossible for us to apply mathematical methods. Rather than replacing these values with zero, a number that would alter the calculation of the average significantly. we will replace these values by the average of the two closest values ie the previous value and the later value. If the value after or before does not exist we will consider it zero.","a4a41c31":"***\n## **DRUGS AT A YOUNG AGE**\n***","a42db0e8":"***\n## **TREATING OUTLIERS**\n***\n","6ab81acc":"\n# \ud83c\uddfa\ud83c\uddf8 Exploratory Data Analysis \ud83d\udd0e\n\n![](https:\/\/images.pexels.com\/photos\/7667800\/pexels-photo-7667800.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940)\n\n\n\n\n\n\n\n","7047ccdc":"***\n# **CONCLUSION**\n***","2c78f596":"> ### N\n> ***\n\nNumber of people who was interviwed in that class\n\n|age|n|\n|---|---|\n|12|2798|\n|13|2757|\n|14|2792|\n|15|2956|\n|16|3058|\n|17|3038|\n|18|2469|\n|19|2223|\n|20|2271|\n|21|2354|\n|22-23|4707|\n|24-25|4591|\n|26-29|2628|\n|30-34|2864|\n|35-49|7391|\n|50-64|3923|\n|65+|2448|","73238aa8":"***\n## **ANNUAL COMSUMPTION**\n***\n","1d336677":"***\n## **PERCENTAGE OF USE**\n***\n","62b0bf3f":"## **What questions will be answered?**\n\n","f1cc987c":"***\n## **BASIC INFORMATION**\n***\n","f644526c":"> ### Drug-use\n> ***\n\nPercentage of those in an age group who used this drug in the past 12 months. Look at the example below.\n\n|age|n|alcohol-use|\n|---|---|---|\n|12|2798|3.9|\n|13|2757|8.5|\n|14|2792|18.1|\n|15|2956|29.2|\n|16|3058|40.1|\n|17|3038|49.3|\n|18|2469|58.7|\n|19|2223|64.6|\n|20|2271|69.7|\n|21|2354|83.2|\n|22-23|4707|84.2|\n|24-25|4591|83.1|\n|26-29|2628|80.7|\n|30-34|2864|77.5|\n|35-49|7391|75.0|\n|50-64|3923|67.2|\n|65+|2448|49.3|","eafdec7a":"## **Why a data analysis about drugs?**\n\n\nAccording to the 2021 World Drug Report, an estimated 275 million people have used drugs worldwide in the last year. Document made by the United Nations on Drugs and Crime (UNODC) and released on 24\/06\/2021.\n\nThe report also points out that the potency of cannabis has increased fourfold in the last 24 years in some parts of the world.\n\n\n\n","cadcaecb":"> ### Age\n> ***\n\n|age|\n|---|\n|12|\n|13|\n|14|\n|15|\n|16|\n|17|\n|18|\n|19|\n|20|\n|21|\n|22-23|\n|24-25|\n|26-29|\n|30-34|\n|35-49|\n|50-64|\n|65+|","2e8a5498":"***\n# **INFORMATION**\n***","fb920360":"## **About data used on this project**\n\n**The National Survey on Drug Use and Health (NSDUH)** series (formerly titled National Household Survey on Drug Abuse) primarily measures the prevalence and correlates of drug use in the United States.\n\nThe surveys are designed to provide quarterly, as well as annual, estimates. Information is provided on the use of illicit drugs, alcohol, and tobacco among members of United States households aged 12 and older. Questions included age at first use as well as lifetime, annual, and past-month usage for the following drug classes: marijuana, cocaine (and crack), hallucinogens, heroin, inhalants, alcohol, tobacco, and nonmedical use of prescription drugs, including pain relievers, tranquilizers, stimulants, and sedatives.","4b590619":"> ### Drug-frequency\n> ***\n\nMedian number of times a user in an age group used this drug in the past 12 months. Look at the example below.\n\n|age|\tn|\talcohol-use|\talcohol-frequency|\n|---|---|---|--------|\n| 12|\t2798|\t3.9|\t3.0|\n|\t13|\t2757|\t8.5|  6.0|\n|\t14|\t2792|\t18.1|\t5.0|\n|\t15|\t2956|\t29.2|\t6.0|\n|\t16|\t3058|\t40.1|\t10.0|\n|\t17|\t3038|\t49.3|\t13.0|\n|\t18|\t2469|\t58.7|\t24.0|\n|\t19|\t2223|\t64.6|\t36.0|\n|\t20|\t2271|\t69.7|\t48.0|\n|\t21|\t2354|\t83.2|\t52.0|\n|\t22-23|\t4707|\t84.2|\t52.0|\n|\t24-25|  4591|\t83.1|\t52.0|\n|\t26-29|\t2628|\t80.7|\t52.0|\n|\t30-34|\t2864|\t77.5|\t52.0|\n|\t35-49|\t7391|\t75.0|\t52.0|\n|\t50-64|\t3923|\t67.2|\t52.0|\n|\t65+| 2448|\t49.3\t|52.0|","2b020a91":"***\n# **EDA**\n***","82f5e53d":"***\n## **VARIABLES**\n***\n\nOur dataset has twenty-eight columns of four different types.","6b973d22":"* Which drug has more users?\n* Which drug has more young users?\n* What is the annual comsumption?\n* Which drug is most used?\n"}}