{"cell_type":{"c3c662f2":"code","94263062":"code","7211356f":"code","c5e5f7b8":"code","85a0aeef":"code","2027725f":"code","82a3550c":"code","56376f1e":"code","9086ca17":"code","ae2a3201":"code","efbfdea7":"code","82d1e5d9":"code","17e7d968":"code","ca5fcf79":"markdown","2ba0ec94":"markdown","a21faca3":"markdown","531ce89b":"markdown","89e7247c":"markdown","76822be4":"markdown","2460bbbc":"markdown","82632ef3":"markdown","29bc25e5":"markdown","81893180":"markdown","72c9189a":"markdown","482b7c51":"markdown"},"source":{"c3c662f2":"# packages\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nfrom matplotlib import dates","94263062":"# load data\ngolddf = pd.read_csv(\"..\/input\/gold-prices\/monthly_csv.csv\")\ncommdf = pd.read_csv(\"..\/input\/usa-commodity-prices\/commodity-prices-2016.csv\")\ncommdf","7211356f":"# clean data\ncommdf[\"Date\"] = pd.to_datetime(commdf[\"Date\"])\ngolddf['Date'] = golddf['Date'].astype(str) + '-01' \ngolddf[\"Date\"] = pd.to_datetime(golddf[\"Date\"])\n# use only years from 1992 to 2016\ncommdf = commdf.loc[(commdf['Date'] > \"1991-12-01\") & (commdf['Date'] <= \"2016-02-02\")]\ngolddf = golddf.loc[(golddf['Date'] > \"1991-12-01\") & (golddf['Date'] <= \"2016-02-02\")]\ndf = commdf.loc[: , \"Coffee Other Mild Arabicas\":\"Coffee Robusta\"]\ncommdf['Coffe avg'] = df.mean(axis=1)\ndf = commdf.iloc[: , 31:34]\ncommdf['Natural gas avg'] = df.mean(axis=1)\ndf = commdf.iloc[: , 53:56]\ncommdf['Sugar avg'] = df.mean(axis=1)\ndf = commdf.iloc[: , 28:30]\ncommdf['Logs avg'] = df.mean(axis=1)\ndf = commdf.iloc[: , 61:63]\ncommdf['Wool avg'] = df.mean(axis=1)\nprices = commdf.merge(golddf)\nprices = prices.iloc[:, np.r_[0:16, 19:28, 30, 34, 39:47, 49:53, 56:61, 63:70]]\nprices = prices.rename(columns={'China import Iron Ore Fines 62% FE spot': 'Iron ore', \"Price\": \"Gold\"})\nprices","c5e5f7b8":"# get 2005 prices for creating index\nprices2005 = prices.loc[(prices['Date'] > \"2004-12-01\") & (prices['Date'] <= \"2005-12-02\")]\nprices2005","85a0aeef":"# gold index is calculated\ngoldbase = prices2005[\"Gold\"].mean()\nprices[\"Gold index\"] = prices[\"Gold\"]*100\/goldbase\nprices","2027725f":"fig, ax = plt.subplots(figsize=(10, 6))\nplt.plot(prices[\"Date\"], prices[\"Gold index\"], label = \"Gold index\")\nplt.plot(prices[\"Date\"], prices[\"Food Price Index\"], label = \"Food Price Index\")\nplt.plot(prices[\"Date\"], prices[\"Fuel Energy Index\"], label = \"Fuel Energy Index\")\nplt.plot(prices[\"Date\"], prices[\"Industrial Inputs Price Index\"], label = \"Industrial Inputs Price Index\")\nplt.plot(prices[\"Date\"], prices[\"Metals Price Index\"], label = \"Metals Price Index\")\nplt.legend()\nplt.show()","82a3550c":"# other metal indexes are calculated\nprices[\"Aluminum index\"] = prices[\"Aluminum\"]*100\/(prices2005[\"Aluminum\"].mean())\nprices[\"Copper index\"] = prices[\"Copper\"]*100\/(prices2005[\"Copper\"].mean())\nprices[\"Iron ore index\"] = prices[\"Iron ore\"]*100\/(prices2005[\"Iron ore\"].mean())\nprices[\"Lead index\"] = prices[\"Lead\"]*100\/(prices2005[\"Lead\"].mean())\nprices[\"Nickel index\"] = prices[\"Nickel\"]*100\/(prices2005[\"Nickel\"].mean())\nprices[\"Tin index\"] = prices[\"Tin\"]*100\/(prices2005[\"Tin\"].mean())\nprices[\"Zinc index\"] = prices[\"Zinc\"]*100\/(prices2005[\"Zinc\"].mean())\nprices","56376f1e":"fig, ax = plt.subplots(figsize=(10, 6))\nplt.plot(prices[\"Date\"], prices[\"Gold index\"], label = \"Gold index\")\nplt.plot(prices[\"Date\"], prices[\"Aluminum index\"], label = \"Aluminum index\")\nplt.plot(prices[\"Date\"], prices[\"Copper index\"], label = \"Copper index\")\nplt.plot(prices[\"Date\"], prices[\"Iron ore index\"], label = \"Iron ore index\")\nplt.plot(prices[\"Date\"], prices[\"Lead index\"], label = \"Lead index\")\nplt.plot(prices[\"Date\"], prices[\"Nickel index\"], label = \"Nickel index\")\nplt.plot(prices[\"Date\"], prices[\"Tin index\"], label = \"Tin index\")\nplt.plot(prices[\"Date\"], prices[\"Zinc index\"], label = \"Zinc index\")\n\nplt.legend()\nplt.show()","9086ca17":"fig, ax = plt.subplots(figsize=(8, 6))\nplt.subplot(2, 3, 1)\nplt.gca().set_title(\"1995-01-01\")\nplt.pie(prices[[\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"]].loc[prices['Date'] == \"1995-01-01\"].T.iloc[:,0]\n, autopct='%1.1f%%')\nplt.subplot(2, 3, 2)\nplt.gca().set_title(\"2000-01-01\")\nplt.pie(prices[[\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"]].loc[prices['Date'] == \"2000-01-01\"].T.iloc[:,0]\n, autopct='%1.1f%%')\nplt.subplot(2, 3, 4)\nplt.gca().set_title(\"2005-01-01\")\nplt.pie(prices[[\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"]].loc[prices['Date'] == \"2005-01-01\"].T.iloc[:,0]\n, autopct='%1.1f%%')\nplt.subplot(2, 3, 5)\nplt.gca().set_title(\"2010-01-01\")\nplt.pie(prices[[\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"]].loc[prices['Date'] == \"2010-01-01\"].T.iloc[:,0]\n, autopct='%1.1f%%')\nplt.subplot(2, 3, 6)\nplt.gca().set_title(\"2015-01-01\")\nplt.pie(prices[[\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"]].loc[prices['Date'] == \"2015-01-01\"].T.iloc[:,0]\n, autopct='%1.1f%%')\nplt.figlegend(labels=(\"Beef\", \"Lamb\", \"Poultry chicken\", \"Rice\", \"Tea\", \"Wheat\", \"Sugar avg\"))\nplt.show()","ae2a3201":"tsum = prices.sum(numeric_only=True).sort_values()[:5]\nlsum = prices.sum(numeric_only=True).sort_values(ascending=False)[:5]\n\ntsum = {\"Name\":list(tsum.index), \"Sum\":list(tsum)}\ntsum = pd.DataFrame(tsum)\n\nlsum = {\"Name\":list(lsum.index), \"Sum\":list(lsum)}\nlsum = pd.DataFrame(lsum)\n\nplt.bar(tsum[\"Name\"], tsum[\"Sum\"])","efbfdea7":"plt.bar(lsum[\"Name\"], lsum[\"Sum\"])\nplt.ticklabel_format(style='plain', axis='y')\nplt.show()","82d1e5d9":"# calculating each year\nyearlyp = prices.groupby(prices.Date.dt.year).transform('mean').drop_duplicates()\npd.set_option('display.max_rows', None)\nfor i in range(1,59):\n    yearlyp.iloc[:,i] = pd.to_numeric(yearlyp.iloc[:,i])\n# most expensive every year\nyearlyp.iloc[:,1:].idxmax(axis=1)\nyearlyp","17e7d968":"# as a graph\npd.set_option('display.max_rows', 6)\nyearlyp = yearlyp[[\"Date\",\"Tin\",\"Nickel\"]]\nfig, ax = plt.subplots(figsize=(15, 6))\nplt.plot(yearlyp[\"Date\"], yearlyp[[\"Tin\",\"Nickel\"]], 'o')\nax.xaxis.set_major_formatter(dates.DateFormatter('%Y'))\nax.xaxis.set_major_locator(dates.DayLocator(interval=365))\nplt.show()","ca5fcf79":"<h4 id=\"q3\">3. How did food prices change over the years?<\/h4>","2ba0ec94":"<h3 id=\"q\">Questions<\/h3>\n<h4 id=\"q1\">1. Is there a correlation between gold prices and various commodity prices?<\/h4>","a21faca3":"* Most correlation is between gold and tin. \n* Iron actually rises even more then gold after 2009.","531ce89b":"<h4 id=\"q2\">2. Is there a correlation between gold prices and metal prices?<\/h4>","89e7247c":"<h4 id=\"q6\">6. What was the most expensive commodity each year? <\/h4>","76822be4":"* There is an interesting spike in 2007 in nickel.\n* In resent years tin is more expensive.","2460bbbc":"# Commodity Prices in USA\n\n* [Introduction](#int)\n* [Questions](#q)\n    1. [Is there a correlation between gold prices and various commodity prices?](#q1)\n    2. [Is there a correlation between gold prices and metal prices?](#q2)\n    3. [How did food prices change over the years?](#q3)\n    4. [What is the cheapest commodity in total?](#q4)\n    5. [What is the most expensive commodity total?](#q5)\n    5. [What was the most expensive commodity each year?](#q6)\n","82632ef3":"<h4 id=\"q5\">5. What is the most expensive commodity total? <\/h4>","29bc25e5":"* Food commodities and their proportions every 5 years.\n* It doesn\u2019t chance much.\n* Only in 2010 the rice prices has risen a bit.\n* Also beef and wheat is more expensive in recent years.","81893180":"* Most similar index is metals price index\n* Gold prices are rising more than any commodity after 2008.","72c9189a":"<h4 id=\"q4\">4. What is the cheapest commodity in total? <\/h4>","482b7c51":"<h3 id=\"int\">Introduction<\/h3>\n\n* The dataset that I used is monthly prices of commodities in USA between 1992 and 2016.\n* Indexes are calculated with their prices in 2005 as 100."}}