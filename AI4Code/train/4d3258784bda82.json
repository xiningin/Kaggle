{"cell_type":{"c3364862":"code","e45b67cf":"code","07a0b683":"code","a33a1ca4":"code","ebf07a31":"code","666fe735":"code","ad81176a":"code","ab7ff8c9":"markdown","46223ac1":"markdown"},"source":{"c3364862":"import os\nimport re\nfrom pathlib import Path\npath = Path(\"..\/input\")\n\nimport numpy as np\nimport pandas as pd ","e45b67cf":"text_of_2_games = \"\"\"Game started at: 2016\/12\/30 12:54:25\nGame ID: 808941103 0.50\/1 (PRR) Karkadann (Short) (Hold'em)\nSeat 9 is the button\nSeat 1: Maria_Pia (40).\nSeat 2: RunnerLucker (58.13).\nSeat 3: Pimpika (100.60).\nSeat 4: twoakers (52.88).\nSeat 5: _robbyJ (55.50).\nSeat 6: IlxxxlI (53.50).\nSeat 7: Ice Bank Mice Elf (76.75).\nSeat 8: gust (49.31).\nSeat 9: AironVega (56.76).\nPlayer Maria_Pia has small blind (0.50)\nPlayer RunnerLucker has big blind (1)\nPlayer Maria_Pia received a card.\nPlayer Maria_Pia received a card.\nPlayer RunnerLucker received a card.\nPlayer RunnerLucker received a card.\nPlayer Pimpika received a card.\nPlayer Pimpika received a card.\nPlayer twoakers received a card.\nPlayer twoakers received a card.\nPlayer _robbyJ received a card.\nPlayer _robbyJ received a card.\nPlayer IlxxxlI received card: [Jd]\nPlayer IlxxxlI received card: [Jc]\nPlayer Ice Bank Mice Elf received a card.\nPlayer Ice Bank Mice Elf received a card.\nPlayer gust received a card.\nPlayer gust received a card.\nPlayer AironVega received a card.\nPlayer AironVega received a card.\nPlayer Pimpika folds\nPlayer twoakers folds\nPlayer _robbyJ calls (1)\nPlayer IlxxxlI raises (4)\nPlayer Ice Bank Mice Elf folds\nPlayer gust folds\nPlayer AironVega folds\nPlayer Maria_Pia raises (10.50)\nPlayer RunnerLucker folds\nPlayer _robbyJ folds\nPlayer IlxxxlI folds\nUncalled bet (7) returned to Maria_Pia\nPlayer Maria_Pia mucks cards\n------ Summary ------\nPot: 10. Rake 0\n*Player Maria_Pia mucks (does not show cards). Bets: 4. Collects: 10. Wins: 6.\nPlayer RunnerLucker does not show cards.Bets: 1. Collects: 0. Loses: 1.\nPlayer Pimpika does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer twoakers does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer _robbyJ does not show cards.Bets: 1. Collects: 0. Loses: 1.\nPlayer IlxxxlI does not show cards.Bets: 4. Collects: 0. Loses: 4.\nPlayer Ice Bank Mice Elf does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer gust does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer AironVega does not show cards.Bets: 0. Collects: 0. Wins: 0.\nGame ended at: 2016\/12\/30 12:55:45\n\nGame started at: 2016\/12\/30 13:0:3\nGame ID: 808943744 0.50\/1 (PRR) Karkadann (Short) (Hold'em)\nSeat 3 is the button\nSeat 1: Maria_Pia (48.28).\nSeat 2: RunnerLucker (56.63).\nSeat 3: Pimpika (40).\nSeat 4: twoakers (51.88).\nSeat 5: _robbyJ (54.50).\nSeat 6: IlxxxlI (49.50).\nSeat 7: Ice Bank Mice Elf (151.50).\nSeat 8: gust (49.31).\nSeat 9: AironVega (56.76).\nPlayer twoakers has small blind (0.50)\nPlayer _robbyJ has big blind (1)\nPlayer twoakers received a card.\nPlayer twoakers received a card.\nPlayer _robbyJ received a card.\nPlayer _robbyJ received a card.\nPlayer IlxxxlI received card: [9c]\nPlayer IlxxxlI received card: [Ac]\nPlayer Ice Bank Mice Elf received a card.\nPlayer Ice Bank Mice Elf received a card.\nPlayer gust received a card.\nPlayer gust received a card.\nPlayer AironVega received a card.\nPlayer AironVega received a card.\nPlayer Maria_Pia received a card.\nPlayer Maria_Pia received a card.\nPlayer RunnerLucker received a card.\nPlayer RunnerLucker received a card.\nPlayer Pimpika received a card.\nPlayer Pimpika received a card.\nPlayer IlxxxlI raises (3)\nPlayer Ice Bank Mice Elf folds\nPlayer gust folds\nPlayer AironVega folds\nPlayer Maria_Pia calls (3)\nPlayer RunnerLucker folds\nPlayer Pimpika folds\nPlayer twoakers folds\nPlayer _robbyJ calls (2)\n*** FLOP ***: [4h 8s 2s]\nPlayer _robbyJ checks\nPlayer IlxxxlI checks\nPlayer Maria_Pia bets (3.20)\nPlayer _robbyJ folds\nPlayer IlxxxlI raises (12)\nPlayer Maria_Pia folds\nUncalled bet (8.80) returned to IlxxxlI\nPlayer IlxxxlI mucks cards\n------ Summary ------\nPot: 15.11. Rake 0.55. JP fee 0.24\nBoard: [4h 8s 2s]\nPlayer Maria_Pia does not show cards.Bets: 6.20. Collects: 0. Loses: 6.20.\nPlayer RunnerLucker does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer Pimpika does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer twoakers does not show cards.Bets: 0.50. Collects: 0. Loses: 0.50.\nPlayer _robbyJ does not show cards.Bets: 3. Collects: 0. Loses: 3.\n*Player IlxxxlI mucks (does not show cards). Bets: 6.20. Collects: 15.11. Wins: 8.91.\nPlayer Ice Bank Mice Elf does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer gust does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer AironVega does not show cards.Bets: 0. Collects: 0. Wins: 0.\nGame ended at: 2016\/12\/30 13:1:41\n\"\"\"\n\na_game = \"\"\"Game started at: 2016\/12\/30 12:54:25\nGame ID: 808941103 0.50\/1 (PRR) Karkadann (Short) (Hold'em)\nSeat 9 is the button\nSeat 1: Maria_Pia (40).\nSeat 2: RunnerLucker (58.13).\nSeat 3: Pimpika (100.60).\nSeat 4: twoakers (52.88).\nSeat 5: _robbyJ (55.50).\nSeat 6: IlxxxlI (53.50).\nSeat 7: Ice Bank Mice Elf (76.75).\nSeat 8: gust (49.31).\nSeat 9: AironVega (56.76).\nPlayer Maria_Pia has small blind (0.50)\nPlayer RunnerLucker has big blind (1)\nPlayer Maria_Pia received a card.\nPlayer Maria_Pia received a card.\nPlayer RunnerLucker received a card.\nPlayer RunnerLucker received a card.\nPlayer Pimpika received a card.\nPlayer Pimpika received a card.\nPlayer twoakers received a card.\nPlayer twoakers received a card.\nPlayer _robbyJ received a card.\nPlayer _robbyJ received a card.\nPlayer IlxxxlI received card: [Jd]\nPlayer IlxxxlI received card: [Jc]\nPlayer Ice Bank Mice Elf received a card.\nPlayer Ice Bank Mice Elf received a card.\nPlayer gust received a card.\nPlayer gust received a card.\nPlayer AironVega received a card.\nPlayer AironVega received a card.\nPlayer Pimpika folds\nPlayer twoakers folds\nPlayer _robbyJ calls (1)\nPlayer IlxxxlI raises (4)\nPlayer Ice Bank Mice Elf folds\nPlayer gust folds\nPlayer AironVega folds\nPlayer Maria_Pia raises (10.50)\nPlayer RunnerLucker folds\nPlayer _robbyJ folds\nPlayer IlxxxlI folds\nUncalled bet (7) returned to Maria_Pia\nPlayer Maria_Pia mucks cards\n------ Summary ------\nPot: 10. Rake 0\n*Player Maria_Pia mucks (does not show cards). Bets: 4. Collects: 10. Wins: 6.\nPlayer RunnerLucker does not show cards.Bets: 1. Collects: 0. Loses: 1.\nPlayer Pimpika does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer twoakers does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer _robbyJ does not show cards.Bets: 1. Collects: 0. Loses: 1.\nPlayer IlxxxlI does not show cards.Bets: 4. Collects: 0. Loses: 4.\nPlayer Ice Bank Mice Elf does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer gust does not show cards.Bets: 0. Collects: 0. Wins: 0.\nPlayer AironVega does not show cards.Bets: 0. Collects: 0. Wins: 0.\nGame ended at: 2016\/12\/30 12:55:45\"\"\"","07a0b683":"total = 0\nfor i, file in enumerate(path.glob('*.txt')):\n    with open(file) as f:\n        ngame = 0\n        for line in f:\n            if 'Game ended at' in line:\n                ngame += 1\n        print(f'file \"{file.name}\" has {ngame} games')\n        total += ngame\nprint(f'altogether, there are {total} games')","a33a1ca4":"# isolate games\ndef getgames(file):\n    for match in re.finditer(r'Game started at.*?Game ended at.*?\\n\\n', file,re.MULTILINE + re.DOTALL):\n        yield match.group(0)\n# next().group(0)\n\n# isolate into part\ndef separate(game):\n    match = re.match(r'Game started at: (.*)Game ID: (.*?)\\n(.*)(Player.*)------ Summary ------(.*)Game ended at: (.*)', game, re.MULTILINE + re.DOTALL)\n    try:\n        start, gameid, playerstartmoney, actions, summary, end = match.groups()\n        return start.strip(), gameid.strip(), playerstartmoney, actions, summary, end.strip()\n    except AttributeError:\n        return game, \"\", \"\", \"\", \"\", \"\"\n\nseparate(a_game)\n\nfiles_games = []\nfor i, file in enumerate(path.glob('*.txt')):\n    with open(file) as f:\n        games = getgames(''.join(f.readlines()))\n        file_games = []\n        for game in games:\n            parts = separate(game)\n            parts = list(parts)\n            parts.append(f.name)\n            file_games.append(parts)\n    files_games.extend(file_games)","ebf07a31":"len(files_games)","666fe735":"df = (pd.DataFrame(files_games, columns=['Start', 'ID', 'Money', 'Actions', 'Summary', 'End', 'File'])\n        .assign(NPlayer=lambda df:df.Money.str.count('Seat')+1)\n     )\ndf","ad81176a":"df.NPlayer.value_counts()","ab7ff8c9":"# Example of a game snapshot from dataset","46223ac1":"Now, we get the rough idea of how dataset look like\nI will parse to see more information about each game"}}