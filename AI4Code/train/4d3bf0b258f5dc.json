{"cell_type":{"24f29c6e":"code","660295d1":"code","319e1ce6":"code","ec688497":"code","58b4fe65":"code","d347f703":"markdown","3cbff340":"markdown"},"source":{"24f29c6e":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport time\nfrom sklearn.metrics import accuracy_score\nfrom kaggle.competitions import twosigmanews","660295d1":"env = twosigmanews.make_env()\n(market_train, _) = env.get_training_data()","319e1ce6":"from IPython.display import display\n\nmarket_train['assetCode_asset'] = market_train['assetCode']\nmarket_train['assetCode_exchange'] = market_train['assetCode']\ntmp_map_a, tmp_map_b = {}, {}\nfor i in market_train['assetCode'].unique():\n    a,b = i.split('.')\n    tmp_map_a[i] = a\n    tmp_map_b[i] = b\nmarket_train['assetCode_asset']=market_train['assetCode_asset'].map(tmp_map_a)\nmarket_train['assetCode_exchange']=market_train['assetCode_exchange'].map(tmp_map_b)\n","ec688497":"display(market_train.head())","58b4fe65":"display(market_train['assetCode_exchange'].unique())","d347f703":"Plain stock code don't give usefull information, we can get better feature and groups with exchange information, this RIC Stock code parser do this\n\nIf you liked, please up vote =)","3cbff340":"Now, do some magic :) group by exchange as a new feature, create a exchange index to help models with \"systematic risk information\"\n\nGood luck =)"}}