{"cell_type":{"5e8c27d8":"code","30d2d5a8":"code","13f249fc":"code","d5b6941c":"code","29093b60":"code","a7de2603":"code","c4a7c5cd":"code","6be837e2":"code","3182086f":"code","00bc6b62":"code","f76b25c2":"code","3bc4acd6":"code","4a196a32":"markdown","948f659d":"markdown","0ac72804":"markdown","92b09d14":"markdown","bb529d34":"markdown","9c3d20ae":"markdown","99d06796":"markdown","397cfa66":"markdown","fea817c5":"markdown","635634bc":"markdown","7def3d57":"markdown","b057c5e8":"markdown","5cef332a":"markdown","c26b1e67":"markdown"},"source":{"5e8c27d8":"import warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)\nimport pandas as pd\nimport geopandas as gpd\nimport math \n","30d2d5a8":"import contextily as ctx\ndf = pd.read_csv(\"..\/input\/gymdata\/gymdata.csv\")\ndf = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df[\"long\"], df[\"lat\"]))\ndf.crs = {'init':'epsg:4326'}\nax = df.plot(figsize=(20,20), alpha=0.5, edgecolor=\"k\")\nctx.add_basemap(ax, zoom=14,crs=\"epsg:4326\", source=ctx.providers.CartoDB.Voyager)\nax.set_axis_off()","13f249fc":"df.head()","d5b6941c":"df = df.rename(columns={\"size \":\"s\"})\nsz = []\nfor i in range(len(df)):\n    sz.append(float(df.iloc[i][\"s\"] + 1))\nfor i in range(len(df)):\n    if df.iloc[i][\"s\"] == 0:\n        sz[i] += 1.5","29093b60":"import folium \nfrom folium import Choropleth, Marker\nfrom folium.plugins import HeatMap\n\ndef embed_map(m, file_name):\n    from IPython.display import IFrame\n    m.save(file_name)\n    return IFrame(file_name, width='100%', height='500px')\n\nm_2 = folium.Map(location=[45.40,-75.69], zoom_start=12)\n\nott = gpd.read_file(\"..\/input\/ottawa\/ottawa.geojson\")\npop = pd.DataFrame(ott)\npop = pop.sort_values(by=['POPEST'])\n\nChoropleth(geo_data=ott,\n           name=\"choropleth\",\n           data=pop,\n           columns=[\"Name\",\"POPEST\"],\n           fill_color='PuRd',\n           key_on=\"feature.properties.Name\",\n           fill_opacity=0.5,\n           line_opacity=0.2,\n           legend_name=\"Population Estimate\"\n          ).add_to(m_2)\n\nfor i in range(0,len(df)):\n    folium.Circle(\n        location=[df.iloc[i]['lat'], df.iloc[i]['long']],\n        tooltip=df.iloc[i]['name'],\n        fill=True,\n        radius=sz[i]*150).add_to(m_2)\n    #Marker([df.iloc[i]['lat'], df.iloc[i]['long']], popup=df.iloc[i]['name']).add_to(m_2)","a7de2603":"m_2","c4a7c5cd":"folium.Marker([45.410853, -75.692868],\n       popup='<b>Location 1<\/b>',\n       tooltip=\"Click\").add_to(m_2)\nfolium.Marker([45.428000, -75.652771],\n       popup='<b>Location 2<\/b>',\n       tooltip=\"Click\").add_to(m_2);","6be837e2":"m_2","3182086f":"import matplotlib.pyplot as plt\n\nwith plt.xkcd():\n    plt.scatter(df.numrating, df.rating)\n    plt.xlabel(\"Number of ratings\")\n    plt.ylabel(\"Rating (\/5)\")\n    plt.title(\"Rating vs Number of ratings\")\nfig2 = plt.figure();","00bc6b62":"with plt.xkcd():\n    plt.scatter(sz, df.rating);\n    plt.xlabel(\"size\");\n    plt.ylabel(\"Rating (\/5)\");\n    plt.title(\"Rating vs size\");\nfig1 = plt.figure();","f76b25c2":"m_3 = folium.Map(location=[45.42,-75.70], zoom_start=12)\n\nott = gpd.read_file(\"..\/input\/ottawa\/ottawa.geojson\")\npop = pd.DataFrame(ott)\npop = pop.sort_values(by=['POPEST'])\n\nChoropleth(geo_data=ott,\n           name=\"choropleth\",\n           data=pop,\n           columns=[\"Name\",\"POPEST\"],\n           fill_color='PuRd',\n           key_on=\"feature.properties.Name\",\n           fill_opacity=0.5,\n           line_opacity=0.2,\n           legend_name=\"Population Estimate\"\n          ).add_to(m_3)\n\nfor i in range(0,len(df)):\n    folium.Circle(\n        location=[df.iloc[i]['lat'], df.iloc[i]['long']],\n        tooltip=df.iloc[i]['name'],\n        fill=True,\n        radius=sz[i]*150).add_to(m_3)\n    \nfolium.Marker([45.428000, -75.652771],\n       popup='<b>Location 2<\/b>',\n       tooltip=\"Click\").add_to(m_3);","3bc4acd6":"m_3","4a196a32":"# Type of Gym <a name=\"type\"> <\/a>","948f659d":"# Geo-spatial analysis \n\n-----------------\n\n> By: Graham Pinsent  \n> [Linkedin](https:\/\/www.linkedin.com\/in\/graham-pinsent\/)  \n> [GitHub](https:\/\/github.com\/PerryGraham)\n    \n\nThe purpose of this notebook is to gather and analyze data in order to figure out the best location to open a gym in Ottawa, Canada. Furthermore, given the location, what is the best type of gym to open (with respect to size). \n\n\n### Table of Contents:  \n* [Data Collection](#dc)\n* [Data reading\/cleaning](#rc)\n* [Location map](#map)\n* [Type of gym](#type)\n* [Results](#con)\n\n\n\n##### Limitations of this analysis:\n * Some gym locations could be missed due to the nature of collection. There could be some locations that are not on google, or could have been missed during the data collection process.\n * Choosing the exact location of a gym is not always possible, there are other limitations when choosing a location. (eg: residential area) \n * The type of gym picked is based on google ratings, but this isn't a direct measurement of success. Some gyms could be losing money despite having high ratings. \n \n ----------------","0ac72804":"------------------\n\n# MAP<a name=\"map\"> <\/a>\n\nNote that the range of the population estimations of neighbourboods is\nlarger than the range of the recorded gym locations.\nMeaning that if you move around the whole 'Ottawa' region you will not \nsee any gyms, that doesnt mean there are non there, it means I have not\nrecorded those areas. I only recorded gyms near the downtown area.\n\n* Hover over the circles to see the name of the gym","92b09d14":"# Data Collection <a name=\"dc\"> <\/a>","bb529d34":"----------\n\nLets look at some good looking locations:\n\n<sub> * Click on the markers to see which location it is <\/sub>","9c3d20ae":"Location 1 is in centretown where the population density is high, however is a little bit south so that it is not directly competing with all the other gyms in centretown. \n\nLocation 2 is more eastern where the neighbourhood population density is high and there are only 2 large competing gyms in the area. \n\nNow that we have picked out some potential areas, lets look at what type of gym we should open. \n\n------------","99d06796":"<sub> * Remember that size 2.5 refers to unknown locations. <\/sub> \n\nPlotting rating with size of the gym shows a similar trend. This again could just mean that when you get more ratings (have more people visiting your gym) they are more likely to leave worse ratings. \n\n\nIrregardless, if you use ratings as a measurement of success, small gyms tend to be more favourable. \n\n---------\n\nLets take a look at our location options again:","397cfa66":"![](https:\/\/i.imgur.com\/iRakwiw.png)","fea817c5":"* Used google maps and excel to create a list of all weight lifting gyms across Ottawa. Gyms not near the downtown area of Ottawa were not included in this analysis. \n* Population data downloaded from [Open Ottawa](https:\/\/open.ottawa.ca\/datasets\/ottawa-neighbourhood-study-ons-neighbourhood-boundaries-gen-2?geometry=-78.412%2C44.912%2C-73.186%2C45.589&selectedAttribute=POPEST)\n* In order to be included the gym had to have more than 5 ratings or pictures of the inside of the gym, showing weights. This was so that small private studios and personal trainers listed as gyms would be excluded from the data set. \n* The rating of each gym was recorded along with the amount of ratings. \n* The size column of the data is based off pictures; 3 - large, 2- medium, 1 - small, 0 - Unknown. Unknown means that there were no pictures to determine an estimated size. Unknown gyms are likely towards the smaller size, because most medium-large gyms would have many pictures.\n\n--------------------","635634bc":"Editing the size column so that it works for circle size:","7def3d57":"# Conclusion: <a name=\"con\"> <\/a>\n\nRemember that location 2 that we plotted on the map is in a high population neighbourhood and also it has only 2 large sized gyms. In addition to this, the route to the gyms downtown are blocked by a river, which increases the travel time if people in this area are looking for a small gym. \n\nThis is a perfect area to open a small to medium sized gym and have the greatest chance of success based on the current data. ","b057c5e8":"This graph shows that as the number of ratings increase, the rating values tend to decrease. This is likely a general trend to ratings. \n\n----------\n\nLets investigate further:","5cef332a":"Thank you ","c26b1e67":"# Reading and Cleaning: <a name=\"rc\"> <\/a>\n\nQuickly check the data and plot it on a map:"}}