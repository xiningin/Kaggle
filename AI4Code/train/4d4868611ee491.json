{"cell_type":{"59fa569d":"code","0e831642":"code","76ac5b0b":"code","7d7a72fa":"code","106d3e31":"code","a3ead5a1":"code","d926039f":"code","53d87870":"code","0f2f0a14":"code","9a1e44d2":"code","5dd3871c":"code","0162e71a":"code","f35db49a":"code","5cf4bdd4":"code","d5ea829d":"code","089d0a70":"code","8ba37b9d":"code","d834b475":"code","4969d77e":"markdown","b23a37b0":"markdown","c669498a":"markdown","1fc2e2ce":"markdown"},"source":{"59fa569d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","0e831642":"df_breweries = pd.read_csv('\/kaggle\/input\/beers-breweries-and-beer-reviews\/breweries.csv',index_col='id')\ndf_breweries.head()","76ac5b0b":"df_beers = pd.read_csv('\/kaggle\/input\/beers-breweries-and-beer-reviews\/beers.csv',index_col='id')\ndf_beers.head()","7d7a72fa":"# 2GB file\ndf_reviews = pd.read_csv('\/kaggle\/input\/beers-breweries-and-beer-reviews\/reviews.csv')\ndf_reviews.head()","106d3e31":"#some ratings have missing values so where droped\ndf_reviews.dropna(subset=['look', 'smell', 'taste', 'feel', 'overall', 'score'],inplace=True)\ndf_reviews.head()","a3ead5a1":"# remove beers with less than 5 ratings\ndf_reviews = df_reviews.groupby('beer_id').filter(lambda x : len(x)>5)\ndf_reviews = df_reviews.groupby('beer_id').mean()\ndf_reviews.head()","d926039f":"# join the mean ratings to the beers. \ndf = df_beers.join(df_reviews)\n# As the condidionf of a valid rating was having 5 or more ratings, some are missing here when combining\n# So they were droped again.\ndf.dropna(subset=['look', 'smell', 'taste', 'feel', 'overall', 'score'],inplace=True)","53d87870":"# # df.to_csv('Datasets\/beers\/beer_with_review')\n# df = pd.read_csv('Datasets\/beers\/beer_with_review')","0f2f0a14":"plot = df.groupby('style')['abv'].mean().nlargest(15).plot(kind='bar', \\\n               title='Beer Styles with Highest Average Alcohol by Volume', ylim=(8.7,13.5) )\nplot.set_ylabel('Average % Alcohol Brewed')\nplot.set_xlabel('Style')","9a1e44d2":"plot = df.groupby('style')['overall'].mean().nlargest(15).plot(kind='bar', \n                title='Beer Styles with Highest Overall Score',ylim=(3.9,4.2))\nplot.set_ylabel('Score')\nplot.set_xlabel('Style');","5dd3871c":"plot = df.groupby('style')['name'].count().nlargest(15).plot(kind='bar', \\\n               title='Most Brewed Beer Styles' )\nplot.set_xlabel('Style');","0162e71a":"breweries_types = []\nfor val in df_breweries['types']:\n    try:\n        # some types start with space, so it need to be removed\n        types = val.split(',')\n        types= [item.replace(\" \", \"\") for item in types]\n        breweries_types.extend(types)\n    except AttributeError:\n        pass\nbreweries_types = set(breweries_types)\nprint(len(breweries_types))\nbreweries_types","f35db49a":"def split_type_brewery(val):\n    try:\n        if val.find(g) >-1:\n            return 1\n        else:\n            return 0\n    except AttributeError:\n        return 0\nfor g in breweries_types:\n    df_breweries[g] = df_breweries['types'].apply(split_type_brewery)\ndf_breweries","5cf4bdd4":"df_breweries[breweries_types].sum().sort_values().plot(kind='bar')","d5ea829d":"br_breweries = df_breweries[df_breweries['country'] == 'BR']\nbr_breweries[breweries_types].sum().sort_values().plot(kind='bar')","089d0a70":"df_beers_active = df[df['retired'] =='f']\ndf_beers_retired = df[df['retired'] =='t']\ndf_beers_active","8ba37b9d":"plot = df_beers_retired.groupby('style')['overall'].mean().nlargest(15).plot(kind='bar', \n                title='Retired Beer Styles with Highest Overall Score',ylim=(3.9,4.2))\nplot.set_ylabel('Score')\nplot.set_xlabel('Style');","d834b475":"plot = df_beers_active.groupby('style')['overall'].mean().nlargest(15).plot(kind='bar', \n                title='On Market Beer Styles with Highest Overall Score',ylim=(3.9,4.2))\nplot.set_ylabel('Score')\nplot.set_xlabel('Style');","4969d77e":"Most commom brewery type overall","b23a37b0":"Most commom brewery type in Brazil (as brazilian I was curious)","c669498a":"Brewery types can be have multiple values. So I split then and check all the unique possible values","1fc2e2ce":"Knowing all possible types of brewery it's created a dummie enconding"}}