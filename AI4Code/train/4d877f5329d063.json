{"cell_type":{"dfd02617":"code","745779cf":"code","92070222":"code","8c7dced1":"code","6b3147c2":"code","981516b7":"code","e367cfe2":"code","5dc35a18":"code","5d17112d":"code","5357f358":"code","2cb3a861":"markdown","c2f07eba":"markdown","76ac99e3":"markdown","09e8872b":"markdown","eff534d8":"markdown","b2c86601":"markdown","440ed3e2":"markdown","aebce289":"markdown","3ef0dbd8":"markdown","f4fdb9d3":"markdown","4acc793c":"markdown","b1a7ef82":"markdown","55ffd8a7":"markdown","5e5a1c0e":"markdown","e68bc24d":"markdown","455a853e":"markdown","e1669855":"markdown","f6d2331b":"markdown","8f5d52e0":"markdown","159e43e8":"markdown"},"source":{"dfd02617":"# Data Analysis\nimport numpy as np\nimport pandas as pd\nimport random\n\n# Data Visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport plotly.figure_factory as ff\n%matplotlib inline\n\n# Data\ndata = pd.read_csv(\"..\/input\/customer-personality-analysis\/marketing_campaign.csv\", sep='\\t')\ndata = data.dropna()","745779cf":"data['rate'] = data['Response'] \/ data['NumWebVisitsMonth']\naverage_rate = round(data['rate'].mean(), 2)\nfig = px.histogram(data, x=\"rate\", histnorm='percent', title='Ratio of Responses per Visits')\nfig.show()\nprint('The average rate:', average_rate*100, '%')","92070222":"cur_data = data.query('NumWebVisitsMonth > 0')\naverage_rate = round(cur_data.query('Response > 0').shape[0] \/ cur_data.shape[0], 2)\nprint('The average rate:', average_rate*100, '%')","8c7dced1":"response = data.query('Response == 1')\nnon_response = data.query('Response == 0')\nfig = go.Figure()\nfig.add_trace(go.Violin(x=response['Income'], line_color='lightseagreen', name='Response', y0=0))\nfig.add_trace(go.Violin(x=non_response['Income'], line_color='red', name= 'Don\\'t response', y0=0))\n\nfig.update_traces(orientation='h', side='positive', meanline_visible=False)\nfig.update_layout(xaxis_showgrid=False, xaxis_zeroline=False)\n\nfig.update_layout(title='<b>Income distribution (Response Vs Non-response)<b>',\n                  xaxis_title='Income',\n                  titlefont={'size': 18},\n                  width=600,\n                  height=400,\n                  template=\"plotly_dark\",\n                  showlegend=True,\n                  paper_bgcolor=\"lightgray\",\n                  plot_bgcolor='lightgray', \n                  font=dict(\n                      color ='black',\n                      )\n                  )\nfig.update_layout(xaxis_range=[0,150000])\nfig.show()","6b3147c2":"def scatter(data, var1, var2, title, xlabel, ylabel, alpha=1):\n    plt.scatter(data[var1], data[var2], alpha=alpha)\n    plt.xlabel(xlabel)\n    plt.ylabel(ylabel)\n    plt.title(title)\n    plt.show()\n\nscatter(data, 'MntMeatProducts', 'MntFishProducts', 'Relationship between Meat and Fish', 'Meat', 'Fish', alpha=0.1)","981516b7":"scatter(data, 'MntMeatProducts', 'MntSweetProducts', 'Relationship between Meat and Sweet', 'Meat', 'Sweets', alpha=0.1)","e367cfe2":"scatter(data, 'MntFishProducts', 'MntSweetProducts', 'Relationship between Fish and Sweet', 'Fish', 'Sweets', alpha=0.1)","5dc35a18":"data_cur = data[['MntMeatProducts', 'MntFishProducts', 'MntSweetProducts']]\ncorr = data_cur.corr()\nfig = ff.create_annotated_heatmap(\n    z=corr.to_numpy().round(2),\n    x=list(corr.index.values),\n    y=list(corr.columns.values),       \n    xgap=3, ygap=3,\n    zmin=-1, zmax=1,\n    colorscale='earth',\n    colorbar_thickness=30,\n    colorbar_ticklen=3,\n)\nfig.update_layout(title_text='<b>Correlation Matrix (cont. features)<b>',\n                  title_x=0.5,\n                  titlefont={'size': 24},\n                  width=550, height=550,\n                  xaxis_showgrid=False,\n                  xaxis={'side': 'bottom'},\n                  yaxis_showgrid=False,\n                  yaxis_autorange='reversed',                   \n                  paper_bgcolor=None,\n                  )\nfig.show()","5d17112d":"data['Kidhome'] = data['Kidhome'].astype('str')\nfig = go.Figure()\nfig.add_trace(go.Scatter(y=data['MntSweetProducts'], x=data['Kidhome'], mode='markers', name=\"#Kids\", marker_color='lightseagreen'))\nfig.update_xaxes(title_text=\"Number of kids\")\nfig.update_yaxes(title_text=\"Sweet Products\")\nfig.update_layout(title_text=\"<b>Relation between Sweets and number of kids\")\nfig.show()","5357f358":"data['Dt_Customer'] = pd.to_datetime(data['Dt_Customer'])\ndata['Age'] = data['Dt_Customer'].dt.year - data['Year_Birth']\ndata['Age_Range'] = 'Child'\ndata.loc[data['Age'] >= 13, 'Age_Range'] = 'Teens'\ndata.loc[data['Age'] >= 21, 'Age_Range'] = \"Youth\"\ndata.loc[data['Age'] >= 36, 'Age_Range'] = \"Old\"\n\nfig = go.Figure()\nfig.add_trace(\n    go.Pie(\n        labels=data['Age_Range'],\n        values=None,\n        hole=.4,\n        title='Age Range',\n        titlefont={'color':None, 'size': 18},\n        )\n    )\nfig.update_traces(\n    hoverinfo='label+value',\n    textinfo='label+percent',\n    textfont_size=12,\n    marker=dict(\n        colors=['lightgray', 'lightseagreen', 'lightblue'],\n        line=dict(color='#000000',\n                  width=2)\n        )\n    )\nfig.show()","2cb3a861":"<a id=\"section-three\"><\/a>\n# Question 2\n**Does income have a big effect on this rate or our products didn't attract the customer?**","c2f07eba":"We can see that it's a positive relationship, but it's week so we will check each of them with sweet.","76ac99e3":"Here we've got a more logical result because when we do so we exclude the number of repeated visits.","09e8872b":"![OIP (2).jpg](attachment:8b4ddb2f-bc0f-44a3-9bdd-e5a5eb91baef.jpg)","eff534d8":"Let's see them all at once.","b2c86601":"For answering this questio we must see first what is the relashionship between fish products and meet products because if there is a week relationship among them we must see the relationship between each of them with sweet products.","440ed3e2":"So we can see that we got 4 responses from each 100 visits, but let's ask the question again in more accurate way what is the average ratio between the number of customer visits per their responses?","aebce289":"<a id=\"section-one\"><\/a>\n# Introduction \ud83d\udccb\n\n&nbsp;&nbsp;&nbsp;Here we have a data about 2216 customers we want to extract some important information from it to improve our customer's journey. There are many questions to ask about this data like what is the average number of visits to have one response from a customer? what is the most age range response? and so on. If we answer these questions -god-willing- we will raise our rate of responses per visits. let's see what kind of information we will be interested in:\n<ul>\n    <li><strong>Year_Birth, Dt_Customer<\/strong>: We can get the age of the customer from them\n    <li><strong>Kidhome and Teenhome<\/strong>: the number of each kid and teen that customer has\n    <li><strong>MntMeatProducts, MntFishProducts, MntSweetProducts<\/strong>: the amount of those products do this customer buy\n    <li><strong>Martial_Status<\/strong>: Single or Together\n    <li><strong>Education<\/strong>: The name of the last degree he has got\n    <li><strong>NumWebVisitsMonth<\/strong>: Number of his visits\n    <li><strong>Response<\/strong>: Number of responses\n<\/ul>\n<br>\n<br>\n<div class=\"alert alert-info\" role=\"alert\">\n    <h3>Our Questions:<\/h3>\n    <ul>\n        <li>What is the average rate of responses per visits?\n        <li>Does income have a big effect on this rate or our products didn't attract the customer?\n        <li>Is there a negative relationship between customers who buy sweets and who buy meets or fish (healthy food), so we can categorize each customer?\n        <li>Is there a strong positive relationship between number of kids and sweet products do he have?\n        <li>Assume people are either children (0-12), teens (13-20), youth (21-35) or old (36+) what is the most age range buy from us?\n<\/div>","3ef0dbd8":"<div style=\"\n           display:fill;\n           border-radius:30px;\n           border-style: solid;\n           border-color:#C1C1C1;\n           background-color:#373737;\n           font-size:20px;\n           font-family:Verdana;\n           letter-spacing:0.5px\">\n    <h1 class=\"title\" style=\"font-size:80px; text-align: center;padding: 5px; color:#00BFFF;\">\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">C<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">u<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">s<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">t<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">o<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">m<\/span>\n            <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">e<\/span>\n        <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">r<\/span>\n        <span style=\"\n                margin-right: -5px;\n                transition: 0.4s;\n                     \"\n              onMouseOver=\"this.style.fontSize = '1.5em'\" onMouseOut= \"this.style.fontSize = '1em'\">\ud83d\ude42<\/span>\n        <\/h1>\n<\/div>","f4fdb9d3":"<a id=\"section-two\"><\/a>\n# Question 1\n**What is the average rate of responses per visits?**","4acc793c":"**There is a strange thing here!**\n\nWe can see that the relationship between meat and sweets is as stronge as its with fish. If we find similar thing with fish we must avoid categorizing customers as healthy or unhealthy.","b1a7ef82":"So we can see that income doesn't have a huge effect on responding and this is a good news because if it has this will mean that the products is expensive because many customers don't buy because of the high prices, but this doesn't happen so we have a different reason. ","55ffd8a7":"So our age range of interest is 36+","5e5a1c0e":"And .. yes, it's also strong positive relationship so we will avoid categorizing customers","e68bc24d":"<a id=\"section-seven\"><\/a>\n<div class=\"alert alert-success\" role=\"alert\">\n  <h3>Conclusion<\/h3>\n    <ul>\n        <li>Our age range of interest is 36+, so we must focus on selling products fit this age range.\n        <li>We must avoid categorizing our customers into healthy or unhealthy.\n        <li>Don't focus on present sweets product on customers having more kids as this is not a factor.\n        <li>We should work more on our website to increase the ratio of response per visit.    \n    <\/ul>\n<\/div>","455a853e":"<a id=\"section-four\"><\/a>\n# Question 3\n**Is there a negative relationship between customers who buy sweets and who buy meets or fish (healthy food), so we can categorize each customer?**","e1669855":"**Another strange insight here!**\n\nThere is a negative relationship between sweet products and the number of kids customer has.","f6d2331b":"<a id=\"section-six\"><\/a>\n# Question 5\n**Assume people are either children (0-12), teens (13-20), youth (21-35) or old (36+) what is the most age range buy from us?**","8f5d52e0":"<a id=\"section-five\"><\/a>\n# Question 4\n**Is there a strong positive relationship between number of kids and sweet products do he have?**","159e43e8":"<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n  <h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\"  role=\"tab\" aria-controls=\"home\">Notebook Content!<\/h3>\n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#section-one\" role=\"tab\" aria-controls=\"profile\">Introduction<span class=\"badge badge-primary badge-pill\">1<\/span><\/a>\n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#section-two\" role=\"tab\" aria-controls=\"messages\">What is the average rate of responses per visits?<span class=\"badge badge-primary badge-pill\">2<\/span><\/a>\n  <a class=\"list-group-item list-group-item-action\"  data-toggle=\"list\" href=\"#section-three\" role=\"tab\" aria-controls=\"settings\">Does income have a big effect on this rate or our products didn't attract the customer?<span class=\"badge badge-primary badge-pill\">3<\/span><\/a>\n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#section-four\" role=\"tab\" aria-controls=\"settings\">Is there a negative relationship between customers who buy sweets and who buy meets or fish (healthy food), so we can categorize each customer?<span class=\"badge badge-primary badge-pill\">4<\/span><\/a> \n  <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#section-five\" role=\"tab\" aria-controls=\"settings\">Is there a strong positive relationship between number of kids and sweet products do he have?<span class=\"badge badge-primary badge-pill\">5<\/span><\/a>\n    <a class=\"list-group-item list-group-item-action\" data-toggle=\"list\" href=\"#section-six\" role=\"tab\" aria-controls=\"settings\">Assume people are either children (0-12), teens (13-20), youth (21-35) or old (36+) what is the most age range buy from us?<span class=\"badge badge-primary badge-pill\">6<\/span><\/a>"}}