{"cell_type":{"b472c25a":"code","582ba3b3":"code","692ce032":"code","83d45ed7":"code","67cf4817":"code","1ff947c1":"code","91aaecdb":"code","806bb29b":"code","339d511e":"code","d6b1a2d6":"code","58c667c1":"code","2223ccd7":"code","08b9091e":"code","25f54a2a":"code","badf7c82":"code","371b5c1c":"code","7b22ee7a":"code","8fd4e3eb":"code","7cf0cdf9":"code","139cb497":"code","26bcd47d":"code","69771a96":"code","8bfc1ce4":"code","1c05d013":"code","c6a03fe1":"code","522fe237":"code","565cc13b":"code","3c1049cd":"code","98ef96aa":"code","a23695f7":"code","573820b7":"code","f82e7e98":"code","47dd17f2":"code","0d86c129":"code","6d3eabf2":"code","7631d7f6":"code","b266373a":"code","94f7d0f7":"code","cd7d4cf4":"code","c7bc7816":"code","66e5bc66":"code","2eb41d61":"code","8ad5e44c":"code","32a7e1ba":"code","07e9ae47":"code","69da9f50":"code","d6877533":"code","cfa5daff":"code","dad9a822":"code","56650662":"code","a6336815":"code","fdbb8d23":"code","99e80765":"code","ed117572":"code","f8a90463":"code","ccd7b816":"code","dbd7d30b":"code","16c27a92":"code","874cfa4b":"code","d1bbeb08":"code","39d4c801":"code","79532d4c":"code","2b59239d":"code","70ecdb13":"code","e216d00d":"code","fea691d4":"code","227fbf4f":"code","74a5c597":"code","0863c356":"code","3c2c4b35":"code","37983215":"code","15b2d196":"code","83ae6da6":"markdown","7c11951f":"markdown","e921237f":"markdown","fc4e7138":"markdown","bd66e0e7":"markdown","fd2e7b46":"markdown","71cbf808":"markdown","0a85434b":"markdown","33d91602":"markdown","ed39d5b0":"markdown","9f3c37dd":"markdown","45b1ccf7":"markdown","c14dbc8c":"markdown","ffc9f8f1":"markdown","e10edc3a":"markdown","e487dfdc":"markdown","82e0062f":"markdown","e2946ece":"markdown","d06a9364":"markdown","4fbaa582":"markdown","dc1273b4":"markdown","1d79070f":"markdown","cb21d90a":"markdown","2f4f4b44":"markdown","ebf1918c":"markdown","dc0e4ed3":"markdown","84e36065":"markdown","588529f8":"markdown","3ebb94a5":"markdown","49575b37":"markdown","22d25058":"markdown","3d5ccde0":"markdown","6156c853":"markdown","83df204f":"markdown","e1123fab":"markdown","ee9273f5":"markdown","34a4ee09":"markdown","79ecebc3":"markdown","1a31d9cf":"markdown","40273c4b":"markdown","2de0135a":"markdown","504b34e2":"markdown","37d65b5e":"markdown","9027ef85":"markdown","34115a26":"markdown"},"source":{"b472c25a":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","582ba3b3":"train = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/train.csv')\ntest = pd.read_csv('..\/input\/house-prices-advanced-regression-techniques\/test.csv')","692ce032":"train.head(1)","83d45ed7":"test.head(1)","67cf4817":"# Combine Train and Test Datasets for Data  Preparation:\ndf = pd.concat([test.assign(ind=\"test\"), train.assign(ind=\"train\")])\n\n# Then later we can split them again:\n# test, train = df[df[\"ind\"].eq(\"test\")], df[df[\"ind\"].eq(\"train\")]","1ff947c1":"df.tail()","91aaecdb":"df.info()","806bb29b":"df.corr()['SalePrice'].sort_values()","339d511e":"sns.boxplot(x='OverallQual', y='SalePrice', data=df)","d6b1a2d6":"sns.scatterplot(data = df, x='OverallQual', y='SalePrice')\nplt.axhline(y=200000,color='r')","58c667c1":"df[(df['OverallQual']>8) &(df['SalePrice']<200000)][['SalePrice', 'OverallQual']]","2223ccd7":"sns.scatterplot(data = df , x='GrLivArea', y='SalePrice')\nplt.axhline(y=200000, color='r')\nplt.axvline(x=4000, color='r')","08b9091e":"df[(df['GrLivArea']>4000) & (df['SalePrice']<400000)][['SalePrice', 'GrLivArea']]","25f54a2a":"index_drop=df[(df['GrLivArea']>4000) & (df['SalePrice']<400000)].index\ndf=df.drop(index_drop, axis=0)","badf7c82":"sns.scatterplot(x='GrLivArea', y='SalePrice', data=df)\nplt.axhline(y=200000, color='r')\nplt.axvline(x=4000, color='r')","371b5c1c":"sns.scatterplot(x='OverallQual', y='SalePrice', data=df)\nplt.axhline(y=200000,color='r')","7b22ee7a":"sns.boxplot(x='OverallQual', y='SalePrice', data=df)","8fd4e3eb":"df.info()","7cf0cdf9":"df.head()","139cb497":"df= df.drop('Id', axis=1)","26bcd47d":"msd = 100*(df.isnull().sum()\/len(df)).nlargest(13)","69771a96":"plt.figure(figsize = (18,5))\nsns.lineplot(data = msd).set_title('13 Max Missing Data Column')","8bfc1ce4":"import missingno as msno","1c05d013":"# Visualize missing values as a matrix\nmsno.matrix(df)","c6a03fe1":"def missing_percent(df):\n    nan_percent= 100*(df.isnull().sum()\/len(df))\n    nan_percent= nan_percent[nan_percent>0].sort_values()\n    return nan_percent","522fe237":"nan_percent= missing_percent(df)","565cc13b":"nan_percent","3c1049cd":"plt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","98ef96aa":"plt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n\n#Set 1% threshold:\nplt.ylim(0,1)","a23695f7":"nan_percent[nan_percent<1]","573820b7":"df[df['Electrical'].isnull()]","f82e7e98":"df= df.dropna(axis=0, subset=['Electrical'])","47dd17f2":"#Numerical Columns fill with 0:\ndf['MasVnrArea']=df['MasVnrArea'].fillna(0)\n\n#String Columns fill with None:\ndf['MasVnrType']= df['MasVnrType'].fillna('None')","0d86c129":"nan_percent= missing_percent(df)","6d3eabf2":"plt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n\n#Set 1% threshold:\nplt.ylim(0,1)","7631d7f6":"#Numerical Columns fill with 0:\nbsmt_num_cols= ['BsmtQual' , 'BsmtFinSF1' , 'BsmtFinSF2' , 'BsmtUnfSF' , 'BsmtHalfBath' , 'TotalBsmtSF' , 'BsmtFullBath']\ndf[bsmt_num_cols]= df[bsmt_num_cols].fillna(0)\n\n#String Columns fill with NA:\nbsmt_str_cols = ['BsmtCond', 'BsmtExposure', 'BsmtFinType2', 'BsmtFinType1']\ndf[bsmt_str_cols]= df[bsmt_str_cols].fillna('NA')","b266373a":"nan_percent= missing_percent(df)\n\n# plot \nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n#Set 1% threshold:\nplt.ylim(0,1)","94f7d0f7":"#Numerical Columns fill with 0:\nGarage_num_cols= ['GarageCars' , 'GarageArea']\ndf[Garage_num_cols]= df[Garage_num_cols].fillna(0)\n\n#String Columns fill with NA:\nGarage_str_cols= ['GarageType', 'GarageFinish', 'GarageQual', 'GarageCond', 'GarageYrBlt']\ndf[Garage_str_cols]= df[Garage_str_cols].fillna('NA')","cd7d4cf4":"nan_percent= missing_percent(df)\n\n# plot \nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","c7bc7816":"df= df.drop(['Fence', 'Alley', 'MiscFeature','PoolQC'], axis=1)","66e5bc66":"nan_percent= missing_percent(df)\n\n# plot \nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n\n#Set 1% threshold:\nplt.ylim(0,1)","2eb41d61":"df[\"FireplaceQu\"]= df[\"FireplaceQu\"].fillna('NA')","8ad5e44c":"nan_percent= missing_percent(df)\n\n# plot \nplt.figure(figsize=(12,6))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)\n\n#Set 1% threshold:\nplt.ylim(0,1)","32a7e1ba":"str_cols= ['Exterior1st', 'Exterior2nd']\ndf[str_cols]= df[str_cols].fillna('Other')","07e9ae47":"df[df['KitchenQual'].isnull()]","69da9f50":"df = df.dropna(axis=0, subset=['KitchenQual'])","d6877533":"df['SaleType']= df['SaleType'].fillna('Oth')","cfa5daff":"df[df['Utilities'].isnull()]","dad9a822":"df = df.dropna(axis=0, subset=['Utilities'])","56650662":"df['Functional']= df['Functional'].fillna('Typ')","a6336815":"df[df['MSZoning'].isnull()]","fdbb8d23":"df = df.dropna(axis=0, subset=['MSZoning'])","99e80765":"nan_percent= missing_percent(df)\n\n# plot \nplt.figure(figsize=(3,3))\nsns.barplot(x=nan_percent.index, y=nan_percent)\nplt.xticks(rotation=90)","ed117572":"df['Neighborhood'].unique()","f8a90463":"plt.figure(figsize=(8,12))\nsns.boxplot(data=df, x='LotFrontage', y='Neighborhood')","ccd7b816":"df['LotFrontage']=df.groupby('Neighborhood')['LotFrontage'].transform(lambda val: val.fillna(val.mean()))","dbd7d30b":"df['LotFrontage']= df['LotFrontage'].fillna(0)","16c27a92":"nan_percent= missing_percent(df)","874cfa4b":"nan_percent","d1bbeb08":"df['GarageYrBlt'].value_counts(dropna=False)","39d4c801":"df['GarageYrBlt'] = df['GarageYrBlt'].replace(['NA'],'0')","79532d4c":"df['GarageYrBlt'].value_counts(dropna=False)","2b59239d":"df['MSSubClass'] = df['MSSubClass'].apply(str)","70ecdb13":"print(df['MSSubClass'].dtypes)","e216d00d":"df_num = df.select_dtypes(exclude='object')\ndf_obj = df.select_dtypes(include='object')","fea691d4":"df_obj.dtypes","227fbf4f":"non_dummy_cols = ['ind']\n# Takes all other columns\ndummy_cols = list(set(df_obj.columns) - set(non_dummy_cols))\ndf_obj = pd.get_dummies(df_obj, columns=dummy_cols)","74a5c597":"df_obj.shape","0863c356":"final_df = pd.concat([df_num, df_obj], axis = 1)","3c2c4b35":"test, train = final_df[final_df[\"ind\"].eq(\"test\")], final_df[final_df[\"ind\"].eq(\"train\")]\n\n# We should Drop indicator Column from test and train dataframes:\ntest= test.drop(['ind'], axis=1)\ntrain= train.drop(['ind'], axis=1)","37983215":"if 'SalePrice' in test.columns:\n    print(\"True\") \nelse:\n      print(\"False\")","15b2d196":"test = test.drop(['SalePrice'], axis=1)","83ae6da6":"So about GarageYrBlt we can see 159 with NA content, I think its too much to drop rows! these house are without Garage, we can change NA to 0. Another Solution is convert this column to object. and then convert it to one hot code.\n\nI'm going to convert NA to 0:","7c11951f":"**Check** MSZoning: Identifies the general zoning classification of the sale.\n\t\t\n       A\tAgriculture\n       C\tCommercial\n       FV\tFloating Village Residential\n       I\tIndustrial\n       RH\tResidential High Density\n       RL\tResidential Low Density\n       RP\tResidential Low Density Park \n       RM\tResidential Medium Density","e921237f":"**Check** Functional: Home functionality (Assume typical unless deductions are warranted)\n\n       Typ\tTypical Functionality\n       Min1\tMinor Deductions 1\n       Min2\tMinor Deductions 2\n       Mod\tModerate Deductions\n       Maj1\tMajor Deductions 1\n       Maj2\tMajor Deductions 2\n       Sev\tSeverely Damaged\n       Sal\tSalvage only\n\nSo we can fill nulls with 'Typ' of drop rows:","fc4e7138":"#### Combine Train and Test Datasets","bd66e0e7":"#### All of Column That they Have Missing Data\n**Make a Function to calculate the percent of missing data in each columns (feature) and then sort it:**","fd2e7b46":"#### D-Imputation of Missing Data\n**We assume that the Lot Frontage is related to what a Neighborhood a house is in**","71cbf808":"#### Dealing with Missing Data\n\nlets take a look Null in datafraime with info()","0a85434b":"We know by the [description](https:\/\/www.kaggle.com\/c\/house-prices-advanced-regression-techniques\/data) of this dataset that \"MasVnrType\" is categorical and \"MasVnrArea\" is numeric. Therefore, we can fill the missing data with respect to the documentation.","33d91602":"**Ok. now we want to know how percent of our column are null:**","ed39d5b0":"##### We have Column with high missing data (more than %80). we going to drop these columns:","9f3c37dd":"### Data Overview","45b1ccf7":"#### Visualize missing values ","c14dbc8c":"##### Now i'm going to check and fill Bsmt*** columns:","ffc9f8f1":"*If you notice that the number of outliers in the two graphs is same. So we can drop them at once:*","e10edc3a":"Ok now lets plot again:","e487dfdc":"#### We can split test and train:","82e0062f":"##### Convert All Object type to One hot encoding","e2946ece":"#### Check Outliers from plats\n\n* OverallQual","d06a9364":"##### Numerical Columns to Categorical\nIf the type of columns whose values are numeric but this numeric is kind of categorical numbers, we need to convert that column into object.\n\nfor doing this we should check the discription of dataset. ","4fbaa582":"#### Correlation overview:","dc1273b4":"We have some column with under one percent missing data. for watching those on the plot we can consider threshold for plot:","1d79070f":"Ok lets drop this row:","cb21d90a":"**WELL DONE**\n*, NOW WE CAN USE THIS CLEANING DATAFRAME*","2f4f4b44":"#### Import Dataset","ebf1918c":"#### Done!","dc0e4ed3":"Our dataset is part of GettingStarted Prediction Competition: [House Prices - Advanced Regression Techniques](https:\/\/www.kaggle.com\/c\/house-prices-advanced-regression-techniques\/data)","84e36065":"**Now about Exterior1st and Exterior2nd:**\nIn data_description.txt about Exterior1st and Exterior2nd we have this: \n\n> Exterior1st: Exterior covering on house\n> \n       AsbShng\tAsbestos Shingles\n       AsphShn\tAsphalt Shingles\n       BrkComm\tBrick Common\n       BrkFace\tBrick Face\n       CBlock\tCinder Block\n       CemntBd\tCement Board\n       HdBoard\tHard Board\n       ImStucc\tImitation Stucco\n       MetalSd\tMetal Siding\n       Other\tOther\n       Plywood\tPlywood\n       PreCast\tPreCast\t\n       Stone\tStone\n       Stucco\tStucco\n       VinylSd\tVinyl Siding\n       Wd Sdng\tWood Siding\n       WdShing\tWood Shingles\n\t\n> Exterior2nd: Exterior covering on house (if more than one material)\n> \n       AsbShng\tAsbestos Shingles\n       AsphShn\tAsphalt Shingles\n       BrkComm\tBrick Common\n       BrkFace\tBrick Face\n       CBlock\tCinder Block\n       CemntBd\tCement Board\n       HdBoard\tHard Board\n       ImStucc\tImitation Stucco\n       MetalSd\tMetal Siding\n       Other\tOther\n       Plywood\tPlywood\n       PreCast\tPreCast\n       Stone\tStone\n       Stucco\tStucco\n       VinylSd\tVinyl Siding\n       Wd Sdng\tWood Siding\n       WdShing\tWood Shingles\n\nSo we can fill nulls with 'Other'","588529f8":"**Some of the columns give us features that have no value for our learning model. Id, for example. These columns must be drop:**","3ebb94a5":"#### Dealing with Categorical Data","49575b37":"**Ok now we can say: we don't have any missing data in dataframe! Missing data in SalePrice is for train data beacuse we don't have SalePrice in train dataset.**","22d25058":"* GrLivArea","3d5ccde0":"Check Utilities: Type of utilities available\n\t\t\n       AllPub\tAll public Utilities (E,G,W,& S)\t\n       NoSewr\tElectricity, Gas, and Water (Septic Tank)\n       NoSeWa\tElectricity and Gas Only\n       ELO\tElectricity only\n\nOops we don't have no choice for fill nulls. lets check how many null we have in this column. if there are not many of them we will drop them:","6156c853":"We should use again missing_percent function:","83df204f":"**I checked data_description of dataset, and found that these columns should be object(categorical numeric):**\n\n* OverallCond\n* OverallQual\n* MSSubClass\n\nI think we don't need to convert OverallCond and OverallQual to object type because OverallQual show us Rates the overall material and finish of the house and OverallCond show us Rates the overall condition of the house with numbers from 1 to 10 (1 is Very Poor and 10 is Very Excellent). so its better for training to be numeric type.","e1123fab":"##### lets look at the plot again:","ee9273f5":"##### Now i'm going to check and fill Garage columns:","34a4ee09":"One more thing we should do: drop label column from test dataframe:\n\nfirst lets check existing it in column:","79ecebc3":"> we can see outlier in OverallQual=10 when SalePrice is under 200000 :","1a31d9cf":"**Check** GarageYrBlt column:","40273c4b":"**Check** SaleType: Type of sale\n\t\t\n       WD \tWarranty Deed - Conventional\n       CWD\tWarranty Deed - Cash\n       VWD\tWarranty Deed - VA Loan\n       New\tHome just constructed and sold\n       COD\tCourt Officer Deed\/Estate\n       Con\tContract 15% Down payment regular terms\n       ConLw\tContract Low Down payment and low interest\n       ConLI\tContract Low Interest\n       ConLD\tContract Low Down\n       Oth\tOther\n       \nOk we can fill nulls with 'Oth'","2de0135a":"#### Show Columns that have missimg data by plot:","504b34e2":"# What is Data Preparation?\n\nData preparation is the process of cleaning and transforming raw data prior to processing and analysis. It is an important step prior to processing and often involves reformatting data, making corrections to data and the combining of data sets to enrich data.\n\nData preparation is often a lengthy undertaking for data professionals or business users, but it is essential as a prerequisite to put data in context in order to turn it into insights and eliminate bias resulting from poor data quality.\n\nFor example, the data preparation process usually includes standardizing data formats, enriching source data, and\/or removing outliers. ([Read full article about Data Preparation](https:\/\/www.talend.com\/resources\/what-is-data-preparation\/))","37d65b5e":"**ok lets check KitchenQual column:**\n\nKitchenQual: Kitchen quality\n\n       Ex\tExcellent\n       Gd\tGood\n       TA\tTypical\/Average\n       Fa\tFair\n       Po\tPoor\n\nOops we don't have no choice for fill nulls. lets check how many null we have in this column. if there are not many of them we will drop them:","9027ef85":"> we can see 2 outlier in scatterplot. lets find those in dataframe:","34115a26":"**Now we can look again to our scatterplot. it should be without outliers:**"}}