{"cell_type":{"a4050682":"code","bf35a198":"code","67eb3ec0":"code","b121042a":"code","6fb68c73":"code","a42977d8":"code","1e4007b9":"code","57833a54":"code","25a1d7e2":"code","05e3d76d":"code","1f1368e9":"code","3e87c4c7":"code","6ecc3506":"code","c01b329b":"code","af25665c":"code","d0309e00":"code","916c3ec0":"code","0b2ec2cc":"code","6a04d49f":"code","9739b888":"code","2fdad409":"code","545b2d74":"code","858bf1c6":"code","b137fe0e":"code","d066ff15":"code","21cbe521":"code","f6cec793":"code","9bb39912":"code","e276551b":"code","b722b2e7":"code","1a057f94":"code","17145ad1":"code","f70450e4":"code","08053e8e":"code","c91ea7cd":"code","a4c0c54f":"code","fb9fa624":"code","56365b56":"markdown","f3ad6d58":"markdown","3c3ce484":"markdown","ae9ee849":"markdown","a13e2f26":"markdown","fbf9ba79":"markdown","3b66d3b0":"markdown","1f0707ef":"markdown","58c1e4a3":"markdown","8ad4f5e2":"markdown","323097d1":"markdown","21390924":"markdown","6cd10ff7":"markdown","db1bae5c":"markdown","f4b37eeb":"markdown","213fa394":"markdown","a494d6ea":"markdown","76b6b54e":"markdown","417f8b5a":"markdown","22ec355f":"markdown","5f446054":"markdown","bc2c1245":"markdown","d788f420":"markdown","2fdb929a":"markdown","03f0c1f9":"markdown","8d7cd309":"markdown","0b1e002f":"markdown","75a367c0":"markdown","65dc06b5":"markdown","93a9a85f":"markdown","1b3ccfbd":"markdown","25a13d42":"markdown","23aae242":"markdown","9b6a20a8":"markdown","ba43a5f1":"markdown","f20df5f4":"markdown","7261e1b6":"markdown","29163dd4":"markdown"},"source":{"a4050682":"# Pacotes utilizados:\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nimport datetime\nimport warnings\nwarnings.filterwarnings('ignore')\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import PolynomialFeatures\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_absolute_error","bf35a198":"# Leitura dos arquivos:\ncovid_br = pd.read_csv('..\/input\/brazil_covid19_cities.csv', parse_dates = ['date'])\ncities_pop = pd.read_csv('..\/input\/brazil_population_2019.csv')","67eb3ec0":"# Verificando o formato das vari\u00e1veis:\ncovid_br.dtypes","b121042a":"# Observando as primeiras linhas dos datasets:\ncovid_br.head()","6fb68c73":"# Alterando a nomeclatura de cada estado para o seu respectivo 'UF':\nestado_uf = {'Acre': 'AC', 'Alagoas': 'AL', 'Amap\u00e1': 'AP', 'Amazonas': 'AM', 'Bahia': 'BA', 'Cear\u00e1': 'CE',\n              'Distrito Federal': 'DF', 'Esp\u00edrito Santo': 'ES', 'Goi\u00e1s': 'GO', 'Maranh\u00e3o': 'MA', 'Minas Gerais': 'MG',\n              'Mato Grosso do Sul': 'MS', 'Mato Grosso': 'MT', 'Par\u00e1': 'PA', 'Para\u00edba': 'PB', 'Pernambuco': 'PE',\n              'Piau\u00ed': 'PI', 'Paran\u00e1': 'PR', 'Rio de Janeiro': 'RJ', 'Rio Grande do Norte': 'RN', 'Rond\u00f4nia': 'RO',\n              'Roraima': 'RR', 'Rio Grande do Sul': 'RS', 'Santa Catarina': 'SC', 'Sergipe': 'SE', 'S\u00e3o Paulo': 'SP',\n              'Tocantins': 'TO'}\n\ncovid_br = covid_br.replace({'state': estado_uf})\n\n# Criando a vari\u00e1vel 'city', concatenando a cidade e o 'UF' do seu respectivo estado de refer\u00eancia:\ncovid_br['city'] = covid_br['name'] + ' - ' + covid_br['state']\n\n# Selecionando apenas as capitais de cada estado:\ncapitais = ['Aracaju - SE', 'Bel\u00e9m - PA', 'Belo Horizonte - MG', 'Boa Vista - RR', 'Bras\u00edlia - DF', 'Campo Grande - MS',\n            'Cuiab\u00e1 - MT', 'Curitiba - PR', 'Florian\u00f3polis - SC', 'Fortaleza - CE', 'Goi\u00e2nia - GO', 'Jo\u00e3o Pessoa - PB',\n            'Macap\u00e1 - AP', 'Macei\u00f3 - AL', 'Manaus - AM', 'Natal - RN', 'Palmas - TO', 'Porto Alegre - RS',\n            'Porto Velho - RO', 'Recife - PE', 'Rio Branco - AC', 'Rio de Janeiro - RJ', 'Salvador - BA', 'S\u00e3o Lu\u00eds - MA',\n            'S\u00e3o Paulo - SP', 'Teresina - PI', 'Vit\u00f3ria - ES']\n\ncovid_cap_br = covid_br[covid_br.city.isin(capitais)]\n\n# Deletando as colunas 'state' e 'name' do dataset:\ncovid_cap_br = covid_cap_br.drop(columns = ['state', 'name'])\n\ncovid_cap_br.head()","a42977d8":"# Incorporando o n\u00famero populacional ao dataset com informa\u00e7\u00f5es sobre a Covid-19:\ncovid_cap_br = covid_cap_br.rename(columns = {'code' : 'city_code'})\ncities_pop = cities_pop[['city_code', 'population']]\ncovid_cap_br = pd.merge(covid_cap_br, cities_pop, on = 'city_code')\ncovid_cap_br.head()","1e4007b9":"covid_atual = covid_cap_br[covid_cap_br['date'] == max(covid_cap_br['date'])]\n\ncovid_atual['cases_rate'] = round(((covid_atual['cases'] \/ covid_atual['population'])*100000), 1)\n\ncovid_atual['deaths_rate'] = round(((covid_atual['deaths'] \/ covid_atual['population'])*100000), 1)\n\ncovid_atual['deaths_prop'] = round(((covid_atual['deaths'] \/ covid_atual['cases'])*100), 1)\n\ncovid_atual.head()","57833a54":"# Ordenando o dataset por n\u00famero de mortes:\ncovid_deaths = covid_atual.sort_values(by = ['deaths'], ascending = False)\n\n# Ordenando o dataset por n\u00famero de mortes por 100 mil habitantes:\ncovid_deaths_rate = covid_atual.sort_values(by = ['deaths_rate'], ascending = False)\n\n# Ordenando o dataset por n\u00famero de casos confirmados por 100 mil habitantes:\ncovid_cases_rate = covid_atual.sort_values(by = ['cases_rate'], ascending = False)\n\n# Criando vari\u00e1veis que indicam a primeira e \u00faltima datas apresentadas no dataset:\nult_date = max(covid_cap_br['date']).strftime('%d\/%m\/%Y')\nmin_date = min(covid_cap_br['date']).strftime('%d\/%m\/%Y')\n\n# Criando o plot:\nfig, ax = plt.subplots(nrows = 1, ncols = 2, figsize = (16, 5))\n\nsns.barplot(x = 'city', y = 'deaths', data = covid_deaths[0:5], ci = None,\n            palette = 'Blues', ax = ax[0]).set_title('MORTES TOTAIS AT\u00c9 '+ ult_date)\nax[0].set_xlabel('Cidade')\nax[0].set_ylabel('N\u00famero de mortos')\n\nsns.barplot(x = 'city', y = 'deaths_rate', data = covid_deaths_rate[0:5], ci = None,\n            palette = 'Blues', ax = ax[1]).set_title('MORTES POR 100 MIL HABITANTES AT\u00c9 '+ ult_date)\nax[1].set_xlabel('Cidade')\nax[1].set_ylabel('N\u00famero de mortos por 100 mil hab.')\n\nfig.show()","25a1d7e2":"# Ordenando o dataset por percentagem de mortos entre os casos confirmados:\ncovid_deaths_prop = covid_atual.sort_values(by = ['deaths_prop'], ascending = False)\n\n# Criando o plot:\nfig, ax = plt.subplots(nrows = 1, ncols = 2, figsize = (16, 5))\n\nsns.barplot(x = 'city', y = 'deaths_rate', data = covid_deaths_rate[0:5], ci = None,\n            palette = 'Blues', ax = ax[0]).set_title('MORTES POR 100 MIL HABITANTES AT\u00c9 '+ ult_date)\nax[0].set_xlabel('Cidade')\nax[0].set_ylabel('N\u00famero de mortos por 100 mil hab.')\n\nsns.barplot(x = 'city', y = 'deaths_prop', data = covid_deaths_prop[0:5], ci = None,\n            palette = 'Blues', ax = ax[1]).set_title('PERCENTAGEM DE MORTOS ENTRE CASOS CONFIRMADOS AT\u00c9 '+ ult_date)\nax[1].set_xlabel('Cidade')\nax[1].set_ylabel('Percentagem de mortos entre confirmados')\n\nfig.show()","05e3d76d":"# Criando o plot:\nfig, ax = plt.subplots(nrows = 2, ncols = 2, figsize = (17, 10))\n\nsns.barplot(x = 'city', y = 'deaths', data = covid_deaths[22:], ci = None,\n            palette = 'Blues', ax = ax[0,0]).set_title('MORTES TOTAIS AT\u00c9 '+ ult_date)\nax[0,0].set_xlabel('Cidade')\nax[0,0].set_ylabel('N\u00famero de mortos')\n\nsns.barplot(x = 'city', y = 'deaths_rate', data = covid_deaths_rate[22:], ci = None,\n            palette = 'Blues', ax = ax[0,1]).set_title('MORTES POR 100 MIL HABITANTES AT\u00c9 '+ ult_date)\nax[0,1].set_xlabel('Cidade')\nax[0,1].set_ylabel('N\u00famero de mortos por 100 mil hab.')\n\nsns.barplot(x = 'city', y = 'deaths_prop', data = covid_deaths_prop[22:], ci = None,\n            palette = 'Blues', ax = ax[1,0]).set_title('% DE MORTOS AT\u00c9 '+ ult_date)\nax[1,0].set_xlabel('Cidade')\nax[1,0].set_ylabel('Percentagem de mortos entre confirmados')\n\nsns.barplot(x = 'city', y = 'cases_rate', data = covid_cases_rate[22:], ci = None,\n            palette = 'Blues', ax = ax[1,1]).set_title('CASOS CONFIRMADOS POR 100 MIL HABITANTES AT\u00c9 '+ ult_date)\nax[1,1].set_xlabel('Cidade')\nax[1,1].set_ylabel('N\u00famero de casos confirmados por 100 mil hab.')\n\nfig.show()","1f1368e9":"# Criando uma vari\u00e1vel num\u00e9rica que represente a contagem dos dias a partir da primeira data de refer\u00eancia do dataset:\ncovid_cap_br['day_count'] = (covid_cap_br['date'] - min(covid_cap_br['date']))\ncovid_cap_br['day_count'] = pd.to_numeric(covid_cap_br['day_count'].dt.days, downcast='integer')","3e87c4c7":"# Criando uma fun\u00e7\u00e3o que gera um plot que apresenta a evolu\u00e7\u00e3o do n\u00famero de mortes dia a dia:\ndef deaths_per_day(city_name):\n    \"\"\"Cria um gr\u00e1fico apresentando as mortes dia a dia.\n    \n    Args:\n    city_name: string indicando a cidade a ser filtrada. A conven\u00e7\u00e3o no dataset \u00e9 'Cidade - UF'.\n    \"\"\"\n    filt_city = covid_cap_br[covid_cap_br['city'] == city_name]\n    \n    filt_city = filt_city.reset_index(drop = True)\n    \n    filt_city['deaths_per_day'] = ''\n    for i in range(0, len(filt_city.index)):\n        if i == 0:\n            filt_city['deaths_per_day'][i] = filt_city['deaths'][i]\n        else:\n            filt_city['deaths_per_day'][i] = filt_city['deaths'][i] - filt_city['deaths'][(i-1)]\n    \n    fig, ax = plt.subplots(nrows = 1, ncols = 1, figsize = (16, 5))\n    \n    sns.barplot(x = 'day_count', y = 'deaths_per_day', data = filt_city, palette = \"autumn_r\").set(\n        xlabel = 'Contagem dos dias desde ' + min_date,\n        ylabel = 'Mortes di\u00e1rias',\n        title = 'Evolu\u00e7\u00e3o di\u00e1ria do n\u00famero de mortes em ' + city_name)\n    fig.show()","6ecc3506":"deaths_per_day('S\u00e3o Paulo - SP')","c01b329b":"deaths_per_day('Rio de Janeiro - RJ')","af25665c":"deaths_per_day('Bel\u00e9m - PA')","d0309e00":"deaths_per_day('Porto Alegre - RS')","916c3ec0":"# Criando fun\u00e7\u00e3o para filtrar cidade e colunas desejadas:\ndef city_filter(city_name):\n    \"\"\"Filtra o dataset j\u00e1 alterado - neste ponto, covid_cap_br - para a capital de interesse.\n    \n    Args:\n    city_name: string indicando a cidade a ser filtrada. A conven\u00e7\u00e3o no dataset \u00e9 'Cidade - UF'.\n    \n    Returns:\n    filt_data: dataset contendo os dados referentes \u00e0 cidade de interesse.\n    \"\"\"\n    filt_data = covid_cap_br[covid_cap_br['city'] == city_name]\n    filt_data = filt_data[['day_count', 'deaths']]\n    return filt_data\n\n# Criando fun\u00e7\u00e3o para plotar gr\u00e1fico com a evolu\u00e7\u00e3o do n\u00famero acumulado de mortes semana a semana:\ndef deaths_evolution(city_data, city_name):\n    \"\"\"Cria um gr\u00e1fico de barras com a contagem acumulada das mortes, espa\u00e7adas de 7 em 7 dias.\n    \n    Args:\n    city_data: dataset filtrado pela fun\u00e7\u00e3o city_filter();\n    city_name: string com o nome da cidade a ser apresentado no gr\u00e1fico.\n    \"\"\"\n    sns.barplot(x = 'day_count', y = 'deaths', data = city_data[city_data['day_count'] % 7 == 0], palette = \"Blues\").set(\n        xlabel = 'Contagem de dias a partir de ' + min_date,\n        ylabel = 'N\u00famero de mortes',\n        title = 'Evolu\u00e7\u00e3o do n\u00famero de mortes na cidade de ' + city_name)","0b2ec2cc":"# Criando fun\u00e7\u00e3o para desenvolver, treinar e avaliar o modelo:\ndef covid_poly_model(city_data, n_degree, seed):\n    \"\"\"Transforma os dados para uma regress\u00e3o polinomial, cria o modelo de regress\u00e3o linear e o avalia, juntamente com a\n    apresenta\u00e7\u00e3o de um gr\u00e1fico que ilustra os dados previstos pelo modelo em rela\u00e7\u00e3o aos dados originais.\n    \n    Args:\n    city_data: dataset filtrado pela fun\u00e7\u00e3o city_filter();\n    n_degree: n\u00famero que representa o grau da transforma\u00e7\u00e3o linear a ser aplicada;\n    seed: n\u00famero que permite a reprodu\u00e7\u00e3o da separa\u00e7\u00e3o dos dados de treino e de teste para posterior compara\u00e7\u00e3o.\n    \n    Returns:\n    poly_regr: modelo de transforma\u00e7\u00e3o polinomial a ser aplicado posteriormente, permitindo ao modelo fazer previs\u00f5es;\n    model: modelo de regress\u00e3o linear para fazer as previs\u00f5es.\n    \"\"\"\n    # Separando as vari\u00e1veis:\n    X = city_data[['day_count']]\n    Y = city_data[['deaths']]\n    \n    # Aplicando a transforma\u00e7\u00e3o polinomial aos dados:\n    poly_regr = PolynomialFeatures(degree = n_degree)\n    X_poly = poly_regr.fit_transform(X)\n    \n    # Criando dados de treinos e de teste:\n    X_poly_train, X_poly_test, Y_train, Y_test = train_test_split(X_poly, Y,\n                                                                 test_size = 0.2,\n                                                                 random_state = seed)\n    \n    # Criando o modelo:\n    model = LinearRegression()\n    \n    # Treinando o modelo:\n    model.fit(X_poly_train, Y_train)\n    \n    # Fazendo as previs\u00f5es para os dados de teste:\n    Y_pred = model.predict(X_poly_test)\n    \n    # Avaliando o modelo pela m\u00e9trica MAE (mean absolut error):\n    mae = round(mean_absolute_error(Y_test, Y_pred))\n    \n    sns.scatterplot(x = 'day_count', y = 'deaths', data = city_data).set(\n        xlabel = 'Contagem dos dias a partir de ' + min_date,\n        ylabel = 'N\u00famero de mortos',\n        title = 'Evolu\u00e7\u00e3o Mortes x Regress\u00e3o Polinomial de Grau ' + str(n_degree))\n    plt.plot(X, model.predict(X_poly), color = 'r')\n    plt.show()\n    \n    print('O erro m\u00e9dio absoluto da previs\u00e3o do n\u00famero de mortos para a regress\u00e3o polinomial de grau ' +\n          str(n_degree) + ' \u00e9 de: ' + str(mae) + '.')\n \n    return poly_regr, model","6a04d49f":"# Filtrando os dados para a cidade de S\u00e3o Paulo:\ncovid_sp = city_filter('S\u00e3o Paulo - SP')\n\n# Avaliando o crescimento no n\u00famero de mortes na capital paulista:\ndeaths_evolution(covid_sp, 'S\u00e3o Paulo - SP')","9739b888":"# Cria\u00e7\u00e3o e avalia\u00e7\u00e3o do modelo de regress\u00e3o para a cidade de S\u00e3o Paulo:\nsp_poly_regr_5, sp_model_5 = covid_poly_model(covid_sp, n_degree = 5, seed = 200)\n\nsp_poly_regr_6, sp_model_6 = covid_poly_model(covid_sp, n_degree = 6, seed = 200)\n\nsp_poly_regr_7, sp_model_7 = covid_poly_model(covid_sp, n_degree = 7, seed = 200)","2fdad409":"sp_poly_regr = sp_poly_regr_5\nsp_model = sp_model_5","545b2d74":"# Filtrando os dados para a cidade do Rio de Janeiro:\ncovid_rj = city_filter('Rio de Janeiro - RJ')\n\n# Avaliando o crescimento no n\u00famero de mortes na capital carioca:\ndeaths_evolution(covid_rj, 'Rio de Janeiro - RJ')","858bf1c6":"# Cria\u00e7\u00e3o e avalia\u00e7\u00e3o do modelo de regress\u00e3o para a cidade do Rio de Janeiro:\nrj_poly_regr_4, rj_model_4 = covid_poly_model(covid_rj, n_degree = 4, seed = 201)\n\nrj_poly_regr_5, rj_model_5 = covid_poly_model(covid_rj, n_degree = 5, seed = 201)\n\nrj_poly_regr_6, rj_model_6 = covid_poly_model(covid_rj, n_degree = 6, seed = 201)","b137fe0e":"rj_poly_regr = rj_poly_regr_5\nrj_model = rj_model_5","d066ff15":"# Filtrando os dados para a cidade de Bel\u00e9m:\ncovid_bl = city_filter('Bel\u00e9m - PA')\n\n# Avaliando o crescimento no n\u00famero de mortes na capital paraense:\ndeaths_evolution(covid_bl, 'Bel\u00e9m - PA')","21cbe521":"# Cria\u00e7\u00e3o e avalia\u00e7\u00e3o do modelo de regress\u00e3o para a cidade de Bel\u00e9m:\nbl_poly_regr_4, bl_model_4 = covid_poly_model(covid_bl, n_degree = 4, seed = 202)\n\nbl_poly_regr_5, bl_model_5 = covid_poly_model(covid_bl, n_degree = 5, seed = 202)\n\nbl_poly_regr_6, bl_model_6 = covid_poly_model(covid_bl, n_degree = 6, seed = 202)","f6cec793":"bl_poly_regr = bl_poly_regr_4\nbl_model = bl_model_4","9bb39912":"# Filtrando os dados para a cidade de Porto Alegre:\ncovid_pa = city_filter('Porto Alegre - RS')\n\n# Avaliando o crescimento no n\u00famero de mortes na capital ga\u00facha:\ndeaths_evolution(covid_pa, 'Porto Alegre - RS')","e276551b":"# Cria\u00e7\u00e3o e avalia\u00e7\u00e3o do modelo de regress\u00e3o para a cidade de Porto Alegre:\npa_poly_regr_3, pa_model_3 = covid_poly_model(covid_pa, n_degree = 3, seed = 203)\n\npa_poly_regr_4, pa_model_4 = covid_poly_model(covid_pa, n_degree = 4, seed = 203)\n\npa_poly_regr_5, pa_model_5 = covid_poly_model(covid_pa, n_degree = 5, seed = 203)","b722b2e7":"pa_poly_regr = pa_poly_regr_4\npa_model = pa_model_4","1a057f94":"# Carregando o arquivo com as datas futuras de refer\u00eancia e aplicando as transforma\u00e7\u00f5es necess\u00e1rias:\npred_df = pd.read_csv('..\/input\/covid_predict.csv', parse_dates = ['date'])\npred_df['day_count'] = (pred_df['date'] - min(covid_cap_br['date']))\npred_df['day_count']","17145ad1":"# Transformando a contagem de dias em n\u00fameros inteiros:\npred_df['day_count'] = pd.to_numeric(pred_df['day_count'].dt.days, downcast='integer')","f70450e4":"# Criando uma fun\u00e7\u00e3o para facilitar a aplica\u00e7\u00e3o dos modelos criados anteriormente:\ndef make_prediction(model, poly_regr, cidade):\n    \"\"\"Utiliza os modelos de transforma\u00e7\u00e3o polinomial e regress\u00e3o linear criados anteriormente para fazer previs\u00f5es.\n    \n    Args:\n    model: modelo de regress\u00e3o linear criado pela fun\u00e7\u00e3o covid_poly_model();\n    poly_regr: modelo de transforma\u00e7\u00e3o polinomial criado pela fun\u00e7\u00e3o covid_poly_model();\n    cidade: string da cidade que \u00e9 objeto da previs\u00e3o.\n    \n    Returns:\n    retorna duas strings com a previs\u00e3o do n\u00famero de mortos total at\u00e9 as duas datas contidas no objeto 'pred_df'.\n    \"\"\"\n    Y_predicted = model.predict(poly_regr.fit_transform([[pred_df['day_count'][0]], [pred_df['day_count'][1]]]))\n    \n    print('At\u00e9 ' + pred_df['date'][0].strftime('%d\/%m\/%Y') + ', na cidade de ' + cidade + ', a previs\u00e3o \u00e9 de ' +\n      str(round(int(Y_predicted[0]))) + ' mortos por Covid-19.')\n    \n    print('At\u00e9 ' + pred_df['date'][1].strftime('%d\/%m\/%Y') + ', na cidade de ' + cidade + ', a previs\u00e3o \u00e9 de ' +\n      str(round(int(Y_predicted[1]))) + ' mortos por Covid-19.')","08053e8e":"# Fazendo as previs\u00f5es para a cidade de S\u00e3o Paulo:\nmake_prediction(sp_model, sp_poly_regr, 'S\u00e3o Paulo - SP')","c91ea7cd":"# Fazendo as previs\u00f5es para a cidade do Rio de Janeiro:\nmake_prediction(rj_model, rj_poly_regr, 'Rio de Janeiro - RJ')","a4c0c54f":"# Fazendo as previs\u00f5es para a cidade de Bel\u00e9m:\nmake_prediction(bl_model, bl_poly_regr, 'Bel\u00e9m - PA')","fb9fa624":"# Fazendo as previs\u00f5es para a cidade de Porto Alegre:\nmake_prediction(pa_model, pa_poly_regr, 'Porto Alegre - RS')","56365b56":"<h2 id = intro>1- Introdu\u00e7\u00e3o<\/h2>","f3ad6d58":"<p>\n    Os tr\u00eas modelos de graus 5 e 6 apresentam <i>mean absolut error<\/i> iguais. No entanto, a regress\u00e3o polinomial de grau 5 parece representar melhor o crescimento do n\u00famero de mortos nos \u00faltimos dias e ser\u00e1, portanto, o modelo adotado para fazermos as previs\u00f5es.\n<\/p>","3c3ce484":"<h3 id = modelorj>Rio de Janeiro - RJ<\/h3>","ae9ee849":"<p>\n    Vamos avaliar tamb\u00e9m a evolu\u00e7\u00e3o di\u00e1ria de mortes, principalmente nas capitais que se destacaram at\u00e9 o momento nas an\u00e1lises desenvolvidas. Para tal, ser\u00e1 criada uma vari\u00e1vel que representa a contagem de dias a partir do primeiro registro apresentado no conjunto de dados. Al\u00e9m disso, ser\u00e1 criada uma fun\u00e7\u00e3o para facilitar a cria\u00e7\u00e3o de um gr\u00e1fico que represente esta evolu\u00e7\u00e3o di\u00e1ria de mortes, permitindo uma an\u00e1lise visual da tend\u00eancia apresentada em cada cidade.\n<\/p>","a13e2f26":"### Fim.","fbf9ba79":"<p>\n    Na seq\u00fc\u00eancia, vamos repetir o procedimento para cria\u00e7\u00e3o de um modelo preditivo para as cidades do <b>Rio de Janeiro<\/b>, <b>Bel\u00e9m<\/b> e <b>Porto Alegre<\/b>:\n<\/p>","3b66d3b0":"<p>\n    Entre as capitais estudadas, <b>Porto Alegre<\/b> parece ter um crescimento de \u00f3bitos mais pr\u00f3ximo a um perfil linear, ainda assim, usaremos uma aproxima\u00e7\u00e3o polinomial para melhor representar a evolu\u00e7\u00e3o dos casos de morte pela Covid-19 na cidade.\n<\/p>","1f0707ef":"<p>\n    Na seq\u00fc\u00eancia, utilizaremos os modelos criados para prever o n\u00famero total de mortes contabilizado em dias futuros. \n<\/p>\n<p>\n    <b>Importante<\/b>: cabe ressaltar mais uma vez que a \u00fanica vari\u00e1vel preditora deste estudo \u00e9 a data de refer\u00eancia, sendo que outros fatores que interferem diretamente no n\u00famero de mortes, tais como n\u00famero de leitos dispon\u00edveis, perfil social da popula\u00e7\u00e3o, taxa de ades\u00e3o ao distanciamento social, medidas tomadas pelo governo local, entre outros, n\u00e3o est\u00e3o sendo diretamente considerados. Sendo assim, esta proje\u00e7\u00e3o de mortes n\u00e3o \u00e9 sens\u00edvel a poss\u00edveis altera\u00e7\u00f5es nestes fatores que definem a evolu\u00e7\u00e3o da doen\u00e7a em cada uma das cidades que s\u00e3o objeto deste estudo.\n<\/p>","58c1e4a3":"<h3 id = prevrj>Previs\u00f5es para Rio de Janeiro - RJ<\/h3>","8ad4f5e2":"<h2>\u00cdndice<\/h2>\n<ol>\n    <a href = '#intro'><li><b>Introdu\u00e7\u00e3o<\/b><\/li><\/a>\n    <a href = '#carrega'><li><b>Carregando os Dados<\/b><\/li><\/a>\n    <a href = '#analise'><li><b>An\u00e1lise Explorat\u00f3ria<\/b><\/li><\/a>\n    <a href = '#modelo'><li><b>Cria\u00e7\u00e3o dos Modelos Preditivos<\/b><\/a>\n        <ol>\n            <a href = '#modelosp'><li><b>Modelos de Regress\u00e3o: S\u00e3o Paulo - SP<\/b><\/li><\/a>\n            <a href = '#modelorj'><li><b>Modelos de Regress\u00e3o: Rio de Janeiro - RJ<\/b><\/li><\/a>\n            <a href = '#modelobl'><li><b>Modelos de Regress\u00e3o: Bel\u00e9m - PA<\/b><\/li><\/a>\n            <a href = '#modelopa'><li><b>Modelos de Regress\u00e3o: Porto Alegre - RS<\/b><\/li><\/a>\n        <\/ol>\n    <a href = '#prev'><li><b>Previs\u00f5es<\/b><\/li><\/a>\n        <ol>\n            <a href = '#prevsp'><li><b>Prevendo as Mortes em S\u00e3o Paulo - SP<\/b><\/li><\/a>\n            <a href = '#prevrj'><li><b>Prevendo as Mortes no Rio de Janeiro - RJ<\/b><\/li><\/a>\n            <a href = '#prevbl'><li><b>Prevendo as Mortes em Bel\u00e9m - PA<\/b><\/li><\/a>\n            <a href = '#prevpa'><li><b>Prevendo as Mortes em Porto Alegre - RS<\/b><\/li><\/a>\n        <\/ol>\n    <a href = '#conclusao'><li><b>Conclus\u00e3o<\/b><\/li><\/a>\n<\/ol>","323097d1":"<h3 id = prevbl>Previs\u00f5es para Bel\u00e9m - PA<\/h3>","21390924":"<h3 id = prevsp>Previs\u00f5es para S\u00e3o Paulo - SP<\/h3>","6cd10ff7":"<h3 id = modelopa>Porto Alegre - RS<\/h3>","db1bae5c":"<p>\n    O crescimento do n\u00famero de mortes na cidade de <b>S\u00e3o Paulo<\/b> n\u00e3o segue uma taxa linear. Este mesmo perfil \u00e9 esperado nas demais cidades e, por isso, o modelo de regress\u00e3o linear foi constru\u00eddo com uma transforma\u00e7\u00e3o polinomial da vari\u00e1vel preditora. <\/p>\n<p>\n    O <i>erro absoluto m\u00e9dio<\/i> n\u00e3o foi muito discrepante nos tr\u00eas modelos testados. No entanto, observando a curva vermelha (que representa o modelo de regress\u00e3o polinomial criado), aquela que melhor parece acompanhar a tend\u00eancia de crescimento dos \u00faltimos dias e tamb\u00e9m apresentou o menor erro m\u00e9dio nas previs\u00f5es \u00e9 a curva relativa ao modelo de grau 5, sendo este assumido, portanto, como o grau que melhor respresenta o perfil da curva de crescimento estudada:\n<\/p>","f4b37eeb":"<p>\n    Novamente, os tr\u00eas modelos testados apresentam desempenho muito similar. No entanto, o de grau 4 parece acompanhar melhor a tend\u00eancia de crescimento no n\u00famero de mortos nos \u00faltimos dias:\n<\/p>","213fa394":"<p>\n    Parece haver uma tend\u00eancia de alta no n\u00famero de mortes na cidade do <b>Rio de Janeiro<\/b>, tend\u00eancia esta ainda mais consistente que a apresentada na cidade de S\u00e3o Paulo, onde o aumento de mortes evolui a um passo mais suave. Aparentemente, o segundo m\u00eas registrado no dataset representa um aumento s\u00f3lido no n\u00famero de mortes no Rio de Janeiro.\n<\/p>","a494d6ea":"<p>\n    Na seq\u00fc\u00eancia, ser\u00e3o criadas fun\u00e7\u00f5es para facilitar o desenvolvimento dos modelos para as diferentes cidades de interesse:\n<\/p>","76b6b54e":"<h2 id = prev>5- Previs\u00e3o de mortes por Covid-19 nas cidades estudadas<\/h2>","417f8b5a":"<h2 id = modelo>4- Cria\u00e7\u00e3o de modelo de previs\u00e3o do n\u00famero de mortes pelo Covid-19<\/h2>","22ec355f":"<h3 id = prevpa>Previs\u00f5es para Porto Alegre - RS<\/h3>","5f446054":"<p>\n    Para a cria\u00e7\u00e3o deste modelo preditivo, tentaremos prever o n\u00famero de mortes unicamente pela data, ou seja, esta ser\u00e1 a \u00fanica vari\u00e1vel preditora, j\u00e1 que ser\u00e3o criados modelos separados para algumas capitais de interesse. Sendo assim, a vari\u00e1vel alvo, cujo valor queremos prever, \u00e9 o n\u00famero de mortes total at\u00e9 a data solicitada.\n<\/p>\n<p>\n    80% do dataset ser\u00e1 utilizado para treinar o modelo e os 20% restantes ser\u00e3o utilizados para avaliar a sua performance na previs\u00e3o do n\u00famero correto de mortes, dada uma m\u00e9trica de compara\u00e7\u00e3o.\n<\/p>","bc2c1245":"<p>\n    As cidades estudadas apresentam perfis diferentes de evolu\u00e7\u00e3o do n\u00famero de mortes, sendo que a grande varia\u00e7\u00e3o di\u00e1ria de notifica\u00e7\u00f5es n\u00e3o permite prever com maior precis\u00e3o a tend\u00eancia dos pr\u00f3ximos dias. No entanto, como panorama geral, \u00e9 poss\u00edvel observar que existe uma tend\u00eancia crescente de mortes, mesmo em cidades com situa\u00e7\u00e3o mais confort\u00e1vel. N\u00e3o \u00e9 poss\u00edvel afirmar se o pa\u00eds de um modo geral j\u00e1 chegou ao pico da pandemia, no entanto, pode-se afirmar que o pa\u00eds n\u00e3o entrou na fase de redu\u00e7\u00e3o de casos confirmados ou de mortes.\n<\/p>\n<p>\n    Desta forma, nos resta apenas continuar seguindo as recomenda\u00e7\u00f5es estabelecidas pelos \u00f3rg\u00e3os t\u00e9cnicos respons\u00e1veis que, em sua grande maioria, recomendam o distanciamento social, a higieniza\u00e7\u00e3o constante das m\u00e3os, uso de m\u00e1scaras de prote\u00e7\u00e3o, entre outros.\n<\/p>","d788f420":"<h3 id = modelosp>S\u00e3o Paulo - SP<\/h3>","2fdb929a":"<h2 id = analise>3- An\u00e1lise Explorat\u00f3ria<\/h2>","03f0c1f9":"<p>\n    Na cidade de <b>S\u00e3o Paulo<\/b> \u00e9 poss\u00edvel perceber um padr\u00e3o no qual os casos de morte reportados diminuem pr\u00f3ximo aos finais de semana e aumentam ao longo da semana. \u00c9 claro tamb\u00e9m que, ap\u00f3s um per\u00edodo de certa estabilidade, os picos de morte apresentam uma tend\u00eancia de alta.\n<\/p>","8d7cd309":"<p>\n    Observando os gr\u00e1ficos comparativos acima, pode-se perceber que outros fatores, al\u00e9m da propor\u00e7\u00e3o de mortes relativa ao tamanho da popula\u00e7\u00e3o, parecem afetar a percentagem de mortos entre os casos confirmados. Embora <b>Bel\u00e9m<\/b> seja a capital com a maior propor\u00e7\u00e3o de mortos para 100 mil habitantes, \u00e9 o <b>Rio de Janeiro<\/b> que apresenta a maior propor\u00e7\u00e3o de mortes entre os casos confirmados, n\u00famero este que supera os 12%. <b>Bel\u00e9m<\/b> apresenta n\u00famero pr\u00f3ximo ao n\u00famero apresentado pelo Rio de Janeiro, por\u00e9m levemente menor.\n<\/p>\n<p>\n    Vamos avaliar tamb\u00e9m quais s\u00e3o as capitais que se destacam positivamente no pa\u00eds, utilizando como ponto de vista o n\u00famero total de mortes, o n\u00famero de mortes por 100 mil habitantes e tamb\u00e9m a percentagem de mortos entre os casos confirmados:\n<\/p>","0b1e002f":"<p>\n    \u00c9 poss\u00edvel observar que, se for considerado unicamente o n\u00famero de mortos, as cidades de <b>S\u00e3o Paulo<\/b> e <b>Rio de Janeiro<\/b> s\u00e3o os destaques negativos no pa\u00eds, sendo respons\u00e1veis pelo maior n\u00famero de mortes entre as capitais brasileiras.\n<\/p>\n<p>\n    No entanto, se considerarmos o n\u00famero de mortes pelo Covid-19 relativamente \u00e0 popula\u00e7\u00e3o total de cada uma das cidades, S\u00e3o Paulo e Rio de Janeiro d\u00e3o lugar \u00e0s cidades de <b>Bel\u00e9m<\/b> e <b>Fortaleza<\/b> como sendo as capitais com mais mortes por 100 mil habitantes no Brasil, sendo que <b>Bel\u00e9m<\/b> est\u00e1 na casa de 90 mortes por 100 mil habitantes, enquanto <b>Fortaleza<\/b> apresenta n\u00famero pr\u00f3ximo a 80 mortes por 100 mil habitantes.\n<\/p>","75a367c0":"<h2 id = conclusao>6- Conclus\u00e3o<\/h2>","65dc06b5":"<h3 id = modelobl>Bel\u00e9m - PA<\/h3>","93a9a85f":"<h2 id = carrega>2- Carregando os Dados<\/h2>","1b3ccfbd":"<p>\n    Em <b>Bel\u00e9m<\/b>, \u00e9 poss\u00edvel observar picos maiores ao longo das \u00faltimas semanas, indicando que a situa\u00e7\u00e3o local ainda est\u00e1 piorando.\n<\/p>","25a13d42":"<p>\n    Ser\u00e3o criadas novas colunas para representar o n\u00famero de casos e mortes por 100 mil habitantes para que, posteriormente, as compara\u00e7\u00f5es possam ser feitas de maneira proporcional.\n<\/p>","23aae242":"<p>\n    <b>Porto Alegre<\/b> est\u00e1 entre as 5 capitais com o menor n\u00famero absoluto de mortes e tamb\u00e9m entre as 5 capitais com o menor n\u00famero de casos confirmados por 100 mil habitantes. Ainda assim, n\u00e3o est\u00e1 entre as 5 capitais com menor n\u00famero de mortes por 100 mil habitantes ou com a menor percentagem de mortos entre os casos confirmados. Os fatos que justificam esta observa\u00e7\u00e3o devem ser estudados, no entanto, umas das poss\u00edveis raz\u00f5es pode ser o fato de que o Rio Grande do Sul possui uma propor\u00e7\u00e3o maior de idosos se comparado aos demais estados do pa\u00eds, sendo a popula\u00e7\u00e3o idosa considerada como um dos grupos com maior risco de desenvolver complica\u00e7\u00f5es relacionadas ao v\u00edrus.\n<\/p>\n<p>\n    J\u00e1 as capitais <b>Cuiab\u00e1<\/b>, <b>Campo Grande<\/b> e <b>Palmas<\/b>, do ponto de vista analisado, parecem estar em uma situa\u00e7\u00e3o mais confort\u00e1vel em rela\u00e7\u00e3o \u00e0s demais capitais do pa\u00eds.\n<\/p>","9b6a20a8":"<p>\n    Novamente, pelo perfil das curvas apresentadas e pelo avalia\u00e7\u00e3o de erros do modelo, o modelo de regress\u00e3o de grau 5 ser\u00e1 o adotado para fazermos as previs\u00f5es para a cidade de Bel\u00e9m:\n<\/p>","ba43a5f1":"<h1>Estudo da Covid-19 no Brasil<\/h1>\n<b>\u00c9verton Bin<\/b><br>\n<b>Junho, 2020<\/b>","f20df5f4":"<p>\n    Abaixo, vamos criar um modelo de regress\u00e3o para a cidade de <b>S\u00e3o Paulo<\/b>. O algoritmo utilizado ser\u00e1 o <b>LinearRegression<\/b> juntamente com o algoritmo <b>PolynomialFeatures<\/b>, ambos do pacote Scikit-Learn - como pode ser observado na fun\u00e7\u00e3o criada anteriormente.\n<\/p>\n<p>\n    Esta mesma fun\u00e7\u00e3o ser\u00e1 aplicada para criar os modelos de previs\u00e3o para as demais capitais de interesse.\n<\/p>","7261e1b6":"<p>\n    Como visto anteriormente, <b>Porto Alegre<\/b> est\u00e1 em uma situa\u00e7\u00e3o melhor se comparada a outras capitais no pa\u00eds. Ainda assim, o espa\u00e7amento de dias sem mortes reportadas diminuiu nos \u00faltimos dias, enquanto os picos de mortes apresentam uma tend\u00eancia de alta. Al\u00e9m disso, a barra 'negativa' para a cidade deve ser referente a algum caso de confirma\u00e7\u00e3o exclu\u00eddo posteriormente por duplicidade.\n<\/p>","29163dd4":"<p>\n    Este projeto tem como objetivo fazer uma an\u00e1lise dos dados sobre a pandemia da Covid-19 no Brasil, sobretudo em algumas cidades brasileiras de interesse. Os dados utilizados neste notebook s\u00e3o disponibilizados no Kaggle e podem ser acessados no seguinte endere\u00e7o: <a href = \"https:\/\/www.kaggle.com\/unanimad\/corona-virus-brazil\/data?select=brazil_population_2019.csv\"> Coronavirus - Brazil <\/a>. Ap\u00f3s esta breve an\u00e1lise, o objetivo \u00e9 construir um modelo de regress\u00e3o capaz de prever o n\u00famero de mortes causadas pelo v\u00edrus em datas futuras.\n<\/p>\n<p>\n    O arquivo de refer\u00eancia para este estudo, \"brazil_covid19_cities.csv\", apresenta os seguintes dados sobre a pandemia no pa\u00eds:\n    <li><i>date<\/i>: data de confirma\u00e7\u00e3o dos casos;<\/li>\n    <li><i>state<\/i>: estado brasileiro de refer\u00eancia dos casos;<\/li>\n    <li><i>name<\/i>: nome da cidade de refer\u00eancia dos casos;<\/li>\n    <li><i>code<\/i>: c\u00f3digo da cidade;<\/li>\n    <li><i>cases<\/i>: n\u00famero de casos confirmados;<\/li>\n    <li><i>deaths<\/i>: n\u00famero de mortes confirmadas pelo Covid19.<\/li>\n<\/p>\n<p>\n    Este dataset ser\u00e1 analisado juntamente com o dataset \"brazil_population_2019.csv\", tamb\u00e9m disponibilizado na p\u00e1gina indicada anteriormente, para que se possa avaliar a situa\u00e7\u00e3o dos casos proporcionalmente \u00e0 popula\u00e7\u00e3o da cidade de refer\u00eancia.<\/p>"}}