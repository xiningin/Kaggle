{"cell_type":{"c03e9a72":"code","b593d4db":"code","30b96477":"code","05dae7d5":"code","2e349a87":"code","942f3e5f":"code","7236f637":"code","816aae1f":"code","9abac589":"code","681ef4a7":"code","9bf0d71e":"code","21527b4a":"code","19576959":"code","fa2b0e27":"code","90a332f9":"code","4403207b":"code","23eae89a":"code","67eb34b8":"code","5f453e72":"code","5dc7b8d4":"code","2d2e89df":"code","abc5f564":"code","7d021333":"code","b8c61dd8":"code","a393862f":"code","ae87b59d":"code","83566408":"code","4ae72824":"code","c1145cdc":"code","e6e6518e":"code","7650b228":"code","29935561":"code","f05fc923":"code","c73a13e0":"code","791f9324":"code","74846516":"code","dd7c94a4":"code","6427b8bc":"code","8efbf6f1":"code","4ea76b44":"code","aaef8223":"code","612679bc":"code","1f3ccce2":"code","e2ec2951":"code","3b9a77f7":"code","87f10b3a":"code","97baae7b":"code","abb8b75b":"code","c13ef640":"code","212ddf9a":"code","7578c2b3":"code","70c1f1a6":"code","c0af4fa6":"code","568e0e5e":"code","dbd0de00":"code","fda158c4":"code","338639f6":"code","f848c860":"code","e4c86c39":"code","46232639":"code","f0b780c0":"code","1a206e5e":"code","aa925c09":"code","5adbb3de":"code","a74f28e2":"code","e89ddc6f":"code","c7fcdc6a":"code","ff0be92d":"code","f039af4c":"code","33562e25":"code","7a819322":"code","4aacf35d":"code","5b7fdf9d":"code","de1b3d29":"code","1bae182b":"code","a2cf6d8e":"code","cc5993ad":"code","0c764e3f":"code","43c9489f":"code","9406a6bb":"code","7f2d5278":"code","37194e13":"code","aa286690":"code","29d5e92b":"code","0c3a2f4b":"code","2aaa2e54":"code","f589edbb":"code","bd058936":"markdown","6fe6850a":"markdown","bdceec3a":"markdown","29d39e8a":"markdown","47e2d8d5":"markdown","ce7d9c5d":"markdown","5d13c18e":"markdown","9e887365":"markdown","4ce73569":"markdown","29e8804d":"markdown","4eb7578a":"markdown","6bd90f28":"markdown","fad9f228":"markdown","de0331c5":"markdown","99b754e0":"markdown","26c84f54":"markdown","0e43ed9f":"markdown","d33d3346":"markdown","94753495":"markdown","faf70541":"markdown","1e3348a7":"markdown","f07c37c5":"markdown","27e0b3a9":"markdown","097227e2":"markdown","4601bf30":"markdown","09137a99":"markdown","1cadb79c":"markdown","9cd1e3b5":"markdown","fab187d9":"markdown","84633090":"markdown","67aa9531":"markdown","48a9f2c8":"markdown","fd0f6dee":"markdown","da6dfead":"markdown","067ed243":"markdown","e2d2cb64":"markdown","4fc5fd58":"markdown","43ce8e77":"markdown","fe96ec91":"markdown"},"source":{"c03e9a72":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nimport plotly.express as px\ninit_notebook_mode(connected=True)\nimport cufflinks as cf\ncf.go_offline()","b593d4db":"df = pd.read_csv('\/kaggle\/input\/ibm-hr-analytics-attrition-dataset\/WA_Fn-UseC_-HR-Employee-Attrition.csv')\ndf.head()","30b96477":"df.describe()","05dae7d5":"df.info()","2e349a87":"sns.heatmap(df.isna(),cmap='viridis',cbar=False,yticklabels=False)","942f3e5f":"sns.set_style('white')\ndf['Age'].iplot(kind='hist',color='purple',xTitle='Age', yTitle='No. of  Employees',theme='white',bargap=0.4)\n","7236f637":"attr_age= df.groupby(['Age','Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_age.head()","816aae1f":"px.area(data_frame=attr_age,x='Age', y='Count',color='Attrition')","9abac589":"plt.figure(figsize=(8,6))\nsns.countplot(x='Gender', data= df,hue='Attrition')\nplt.show()","681ef4a7":"sns.jointplot(x='MonthlyIncome',y='Age',kind= 'hex', color= 'red', data=df,)\nplt.show()","9bf0d71e":"sns.catplot(x='MonthlyIncome',y='Attrition',hue='Gender',data=df,height=6,palette='magma')\nplt.show()","21527b4a":"attr_income = df.groupby(['MonthlyIncome', 'Attrition']).apply(lambda x:x['MonthlyIncome'].count()).reset_index(name='Count')\nattr_income.head()","19576959":"attr_income['MonthlyIncome']=round(attr_income['MonthlyIncome'],-3)\nattr_income.head()","fa2b0e27":"attr_income = attr_income.groupby(['MonthlyIncome', 'Attrition']).apply(lambda x:x['MonthlyIncome'].count()).reset_index(name='Count')\nattr_income.head()","90a332f9":"px.bar(data_frame=attr_income,x='MonthlyIncome',y='Count',color='Attrition')","4403207b":"attr_hike=df.groupby(['PercentSalaryHike','Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_hike.head()","23eae89a":"plt.figure(figsize=(10,6))\nsns.barplot(x='PercentSalaryHike',y='Count',data=attr_hike,hue='Attrition',color='black')\nplt.show()","67eb34b8":"attr_dept = df.groupby(['Department','Attrition']).apply(lambda x: x['DailyRate'].count()).reset_index(name='Count')\nattr_dept","5f453e72":"px.bar(data_frame=attr_dept,color='Attrition',x='Department',y='Count')","5dc7b8d4":"attr_satisfy = df.groupby(['JobSatisfaction', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_satisfy.head()","2d2e89df":"plt.figure(figsize=(10,8))\nsns.lineplot(x='JobSatisfaction',y='Count',data=attr_satisfy,hue='Attrition',palette='magma')\nplt.show()","abc5f564":"attr_balance = df.groupby(['WorkLifeBalance', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_balance.head()","7d021333":"sns.set_style('whitegrid')\npx.bar(data_frame=attr_balance,x='WorkLifeBalance',y='Count',color='Attrition',opacity=0.8)","b8c61dd8":"attr_manager = df.groupby(['YearsWithCurrManager', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_manager.head()","a393862f":"plt.figure(figsize=(10,8))\nsns.barplot(x='YearsWithCurrManager',y='Count',hue='Attrition',data=attr_manager,palette='rainbow',saturation=5)\nplt.show()","ae87b59d":"attr_years = df.groupby(['YearsAtCompany', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_years.head()","83566408":"sns.set_style('white')\nplt.figure(figsize=(18,8))\nsns.barplot(x='YearsAtCompany',y='Count',hue='Attrition',data=attr_years,palette='seismic',saturation=4)\nplt.show()","4ae72824":"attr_role = df.groupby(['YearsInCurrentRole', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_role.head()","c1145cdc":"sns.set_style('white')\nplt.figure(figsize=(18,8))\nsns.barplot(y='YearsInCurrentRole',x='Count',hue='Attrition',data=attr_role,palette='magma',orient='h')\nplt.show()","e6e6518e":"attr_promot = df.groupby(['YearsSinceLastPromotion', 'Attrition']).apply(lambda x:x['DailyRate'].count()).reset_index(name='Count')\nattr_promot.head()","7650b228":"sns.set_style('white')\nplt.figure(figsize=(18,5))\nsns.barplot(x='YearsSinceLastPromotion',y='Count',hue='Attrition',data=attr_promot,palette='cubehelix',saturation=4)\nplt.show()","29935561":"df.drop(['BusinessTravel','Department','EducationField','EmployeeCount',\n       'EmployeeNumber','MaritalStatus','Over18', 'OverTime','StandardHours'],axis=1,inplace=True)","f05fc923":"df.columns","c73a13e0":"plt.figure(figsize=(20,14))\nsns.heatmap(df.corr(),cmap='viridis',annot=True)\nplt.show()","791f9324":"gender = pd.get_dummies(df['Gender'],drop_first=True)","74846516":"df = pd.concat([df,gender],axis=1)","dd7c94a4":"df.head()","6427b8bc":"from sklearn.preprocessing import StandardScaler","8efbf6f1":"scaler = StandardScaler()","4ea76b44":"scaler.fit(df.drop(['Attrition', 'Gender','JobRole'],axis=1))","aaef8223":"scaled_feature = scaler.transform(df.drop(['Attrition', 'Gender','JobRole'],axis=1))\nscaled_feature[0]","612679bc":"df_col=df.drop(['Attrition','Gender','JobRole'],axis=1)\ndf_col.columns[:]","1f3ccce2":"df_feat = pd.DataFrame(scaled_feature,columns=df_col.columns[:])\ndf_feat","e2ec2951":"X= df_feat\nY=df['Attrition']","3b9a77f7":"from sklearn.model_selection import train_test_split\nX_train,X_test,Y_train,Y_test = train_test_split(X,Y,random_state=101,test_size=0.3)","87f10b3a":"from sklearn.linear_model import LogisticRegression\nlogm= LogisticRegression()\nlogm.fit(X_train, Y_train)","97baae7b":"predictions = logm.predict(X_test)","abb8b75b":"from sklearn.metrics import accuracy_score, confusion_matrix, classification_report","c13ef640":"print(accuracy_score(Y_test,predictions))","212ddf9a":"print(classification_report(Y_test,predictions))","7578c2b3":"sns.heatmap(confusion_matrix(Y_test,predictions),cmap='coolwarm',annot=True)\nplt.show()","70c1f1a6":"from sklearn.tree import DecisionTreeClassifier\ntree = DecisionTreeClassifier()","c0af4fa6":"tree.fit(X_train,Y_train)","568e0e5e":"predict_tree=tree.predict(X_test)","dbd0de00":"print(accuracy_score(Y_test,predict_tree))","fda158c4":"print(classification_report(Y_test,predict_tree))","338639f6":"sns.heatmap(confusion_matrix(Y_test,predict_tree),cmap='viridis',annot=True)\nplt.show()","f848c860":"from sklearn.ensemble import RandomForestClassifier\nrfc_10= RandomForestClassifier(n_estimators=10)","e4c86c39":"rfc_10.fit(X_train,Y_train)","46232639":"predict_rfc_10=rfc_10.predict(X_test)","f0b780c0":"print(accuracy_score(Y_test,predict_rfc_10))","1a206e5e":"print(classification_report(Y_test,predict_rfc_10))","aa925c09":"sns.heatmap(confusion_matrix(Y_test,predict_rfc_10),cmap='copper',annot=True)\nplt.show()","5adbb3de":"from sklearn.ensemble import RandomForestClassifier\nrfc_100 = RandomForestClassifier(n_estimators=100)","a74f28e2":"rfc_100.fit(X_train,Y_train)","e89ddc6f":"rfc_100_predict= rfc_100.predict(X_test)","c7fcdc6a":"print(accuracy_score(Y_test,rfc_100_predict))","ff0be92d":"print(classification_report(Y_test,rfc_100_predict))","f039af4c":"sns.heatmap(confusion_matrix(Y_test,rfc_100_predict),cmap='seismic',annot=True)\nplt.show()","33562e25":"from sklearn.ensemble import RandomForestClassifier\nrfc=RandomForestClassifier()","7a819322":"rfc.fit(X_train,Y_train)","4aacf35d":"predict_rfc=rfc.predict(X_test)","5b7fdf9d":"print(accuracy_score(Y_test,predict_rfc))","de1b3d29":"print(classification_report(Y_test,predict_rfc))","1bae182b":"sns.heatmap(confusion_matrix(Y_test,predict_rfc),cmap='cubehelix',annot=True)\nplt.show()","a2cf6d8e":"from sklearn.svm import SVC\nsvc = SVC()","cc5993ad":"svc.fit(X_train,Y_train)","0c764e3f":"predict_svc=svc.predict(X_test)","43c9489f":"print(accuracy_score(Y_test,predict_svc))","9406a6bb":"print(classification_report(Y_test,predict_svc))","7f2d5278":"sns.heatmap(confusion_matrix(Y_test,predict_svc),annot=True,cmap='magma')\nplt.show()","37194e13":"from sklearn.neighbors import KNeighborsClassifier\nknn = KNeighborsClassifier()","aa286690":"knn.fit(X_train,Y_train)","29d5e92b":"predict_knn = knn.predict(X_test)","0c3a2f4b":"print(accuracy_score(Y_test,predict_knn))","2aaa2e54":"print(classification_report(Y_test,predict_knn))","f589edbb":"sns.heatmap(confusion_matrix(Y_test,predict_knn),annot=True,cmap='gist_rainbow',alpha=0.5)\nplt.show()","bd058936":"As we can see, the less number of years with the current manager is having higher attrition rate which is evident to speak for employee's relationship with the manager. At an average span of 2 years, the attrition rate decreases as it indicates the comfort level with the manager. Further the attrition spike at 7 year relationship with manager shows that the urge to break the stagnancy in the career and desire for growth and change","6fe6850a":"## IMPORTING LIBRARIES","bdceec3a":"#### 2. GENDER DISTRIBUTION","29d39e8a":"#### 4. PERCENT SALARY HIKE","47e2d8d5":"#### Interpretation:\nThe attrition rate is high in an Age range of 29-36 years old which is also the majority of employee distribution age in the organization. If we can see, the attrition rate is showing growth for employees in younger age group mainly 18-22 years which can be interpreted as majority of these employees are working as an intern or in a part-time positions. The attrition rate is falling for employees above 42 years old which also states the desire to have job stability","ce7d9c5d":"#### 5. DEPARTMENT","5d13c18e":"#### Interpretation:\nAs seen from our Monthly Income analysis, the attrition rate is high at low-income bracket which is evident that low income is potential motivator to leave an organization. This attrition rate is decreasing further with the spike in 10k Monthly Income which is middle range of overall income spread. This can be considered as resignation mainly for better opportunities with better growth in the market.","9e887365":"### From our EDA and Predictive Modeling and Analysis we realise that the best model to know the attrition of Employees and factors affecting this attrition is SVM with 85% of accuracy rate and high precision level for categorical variable followed by Random Forest with higher estimators.","4ce73569":"#### 7. WORK LIFE BALANCE","29e8804d":"#### 6. JOB SATISFACTION","4eb7578a":"#### <center> WITH 10 ESTIMATORS","6bd90f28":"As we can see, attrition is high for people in early years at company for reasons such as growth, Interns and entry level individuals who prefer exploring more and looking for full-time opportunities","fad9f228":"The worklife balance is seemingly having more attrition in higher range for the sole conquest of having much better life","de0331c5":"#### 8. MANAGERS","99b754e0":"### SCALING OF DATA","26c84f54":"As we can see from above that the Attrition is very much dependent on Years at Company, Years in Current role, Years since last promotion and Years with current manager","0e43ed9f":"### SVM","d33d3346":"The employees are leaving more immediately after promotion or in early years since promotion to seek more monetary growth outside or better opportunities","94753495":"## <center>MODELING ","faf70541":"As we can see the attrition rate is higher in Male employees compared to Female employees for sole reason of company has more male employees. To understand motivation behind resignation, we need to understand other factors and segment them in Gender","1e3348a7":"The attrition is high for employees having less number of years in current role with the spike at 7 years which depict that in early years of current role people are exploring more career avenues and after certain period such as 7 years, to change career options or explore more outside","f07c37c5":"### RANDOM FOREST","27e0b3a9":"## EDA","097227e2":"We can see that as the level of Job Satisfaction increases, the attrition rate decreases","4601bf30":"#### <center>WITH NO ESTIMATORS","09137a99":"## CONCLUSION","1cadb79c":"####  1. AGE DISTRIBUTION","9cd1e3b5":"## READING DATA","fab187d9":"#### 9. YEARS IN COMPANY","84633090":"The attrition is high in Sales department followed by HR, 20.62% & 19.04%  respectively. Research & Development department has attrition rate of 13.83 which states the better stability than other 2 departments","67aa9531":"### LOGISTIC REGRESSION","48a9f2c8":"The lower percent hike has higher attrition rate which is very natural for an employee to leave","fd0f6dee":"#### <center> WITH 100 ESTIMATORS","da6dfead":"#### As we can see, the employees are mainly in an Age range of 29-36 years old. Let's check relationship between Attrition and Age","067ed243":"#### 11. YEARS SINCE LAST PROMOTION","e2d2cb64":"### KNN","4fc5fd58":"#### 3. MONTHLY INCOME","43ce8e77":"### DECISION TREE","fe96ec91":"#### 10. YEARS IN CURRENT ROLE"}}