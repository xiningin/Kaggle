{"cell_type":{"0e23da30":"code","093478a8":"code","16029ef7":"code","cf94360f":"code","6d7d6fb5":"code","302112ce":"code","d4411328":"code","79ac821f":"code","fe2aaf31":"code","a7c76367":"code","0ea359a4":"code","f7cfe40c":"code","c286a147":"code","2c72dc11":"code","5ce9e09e":"code","a7a002be":"code","241d80c7":"code","c58b29e6":"code","8bf36ec3":"code","545039b0":"code","7f7f3c60":"code","642ef45a":"code","64b352ef":"code","9af60f55":"code","15b913d5":"code","dbab07cd":"code","4035b0e9":"code","81c4c147":"code","a77a59a0":"code","60ec6d2f":"code","f070b6c9":"code","d97c4beb":"code","a26adbb7":"code","05b68f10":"code","87e51093":"code","51a8f7a3":"code","cc512f5f":"code","d009dea8":"code","e1976177":"code","14ee0ad8":"code","a345eecb":"code","d413421f":"code","4d537e44":"code","354f94ca":"code","e7fc11bb":"code","96f3eeef":"code","bccf230e":"code","c6151f87":"code","5f039967":"code","c85d056b":"code","f521da73":"code","30e7fb1d":"code","db750d0b":"code","029d5fd0":"code","9042aa59":"code","0186da2b":"code","5d158fde":"code","d8b87f8a":"code","e772e916":"code","957341f3":"markdown","97163e5e":"markdown","c47dea7c":"markdown","1c3b2f11":"markdown","7c0e6a42":"markdown","85b36b7c":"markdown","d92f43e6":"markdown","68ca81a9":"markdown","90c8c207":"markdown","2e7f335d":"markdown","c10fad7a":"markdown","19a736a4":"markdown","e64c5cfe":"markdown","4c31024c":"markdown","3eb460b7":"markdown","8c450a99":"markdown","500cb575":"markdown","36f25c1c":"markdown","2325c102":"markdown","ccf62683":"markdown","82723877":"markdown","bef76420":"markdown","92add864":"markdown","16bd2ec9":"markdown","c42bb2e8":"markdown","9b9b75d8":"markdown","662ed4b9":"markdown","52802bc3":"markdown","d168006e":"markdown","18d67d23":"markdown","d5e55f78":"markdown","833070a0":"markdown","417da0c3":"markdown","be31acd4":"markdown","ffd17500":"markdown","dadd39de":"markdown","e95a3165":"markdown","2b5f7704":"markdown","97ea9754":"markdown","40950edb":"markdown","81a5ec58":"markdown","543fe216":"markdown","189d3fbd":"markdown","9d23b200":"markdown","e1ea81ef":"markdown"},"source":{"0e23da30":"# Suppressing Warnings\nimport warnings\nwarnings.filterwarnings('ignore')","093478a8":"# Importing Pandas and NumPy\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Importing more modules\nimport seaborn as sns\n\n\n","16029ef7":"train_study_level_data = pd.read_csv(\"..\/input\/siim-covid19-detection\/train_study_level.csv\")","cf94360f":"\n\n#id:unique study identifier\n#Negative for Pneumonia:1 if the study is negative for pneumonia, 0 otherwise\n#Typical Appearance:1 if the study has this appearance, 0 otherwise\n#Indeterminate Appearance:1 if the study has this appearance, 0 otherwise\n#Atypical Appearance:1 if the study has this appearance, 0 otherwise\n","6d7d6fb5":"train_study_level_data.head()","302112ce":"train_study_level_data.shape","d4411328":"train_study_level_data.info()","79ac821f":"#Above info shows that there are no null columns in the dataset.","fe2aaf31":"#Check for duplicates\nsum(train_study_level_data.duplicated(subset = 'id')) == 0\n# No duplicate values","a7c76367":"train_study_level_data.isnull().sum()","0ea359a4":"# Add a new feature \"Study Result\" which shows the result name of that row.\n\ntrain_study_level_data[\"Study_Result\"]='Negative'\ntrain_study_level_data.loc[train_study_level_data['Typical Appearance']==1, 'Study_Result'] = 'Typical'\ntrain_study_level_data.loc[train_study_level_data['Indeterminate Appearance']==1, 'Study_Result'] = 'Indeterminate'\ntrain_study_level_data.loc[train_study_level_data['Atypical Appearance']==1, 'Study_Result'] = 'Atypical'\n\ntrain_study_level_data.head(5)","f7cfe40c":"train_study_level_data[\"Study_Result\"].value_counts()","c286a147":"train_study_level_data[\"Study_Result\"].value_counts().plot(kind=\"bar\")\nplt.xlabel('Study Results')\nplt.ylabel('Count')\nplt.show()","2c72dc11":"train_image_level_data = pd.read_csv(\"..\/input\/siim-covid19-detection\/train_image_level.csv\")","5ce9e09e":"train_image_level_data.head(10)","a7a002be":"train_image_level_data.isnull().sum()","241d80c7":"#Check for duplicates\nsum(train_image_level_data.duplicated(subset = 'id')) == 0\n# No duplicate values","c58b29e6":"# 1.Class ID\n#Class ID is Either Opacity or None.\n#So lets check how many have opacity by splitting the ClassID as new column\n","8bf36ec3":"train_image_level_data['Class_ID'] = train_image_level_data.label.apply(lambda x: x.split()[0])\ntrain_image_level_data['Class_ID'].value_counts().plot(kind=\"bar\")\nplt.xlabel('Class_ID')\nplt.ylabel('Count')\nplt.show()","545039b0":"#Column 2 is Confidence score: confidence from your neural network model. If none, the confidence is 1","7f7f3c60":"train_image_level_data['Confidence_Score'] = train_image_level_data.label.apply(lambda x: x.split()[1])\ntrain_image_level_data['Confidence_Score'].value_counts()\n","642ef45a":"#Confidence Score is 1 for all the data.","64b352ef":"#Column 3 is bounding box parameters. From Boxes column we either get xmin ,ymin,width and height.Or we can use\n#label column to get xmin,ymin,xmax,ymax.Both will give same values","9af60f55":"train_image_level_data['boxes'][0]","15b913d5":"train_image_level_data['label'][0]","dbab07cd":"#So lets add new columns for xmin,ymin,xmax and ymax by retrieving values from Label column","4035b0e9":"train_image_level_data['x_min'] = train_image_level_data.label.apply(lambda x: float(x.split()[2]))\ntrain_image_level_data['y_min'] = train_image_level_data.label.apply(lambda x: float(x.split()[3]))\ntrain_image_level_data['x_max'] = train_image_level_data.label.apply(lambda x: float(x.split()[4]))\ntrain_image_level_data['y_max'] = train_image_level_data.label.apply(lambda x: float(x.split()[5]))\n\n\n","81c4c147":"#Check the parameters now for 1 record.\n\ntrain_image_level_data.head(1).T","a77a59a0":"#train_image_level_data[train_image_level_data['label']=='none'].value_counts().plot(kind='bar')\ntrain_image_level_data['OpacityCount']=train_image_level_data['label'].str.count('opacity')\ntrain_image_level_data['OpacityCount']","60ec6d2f":"\n##Column ID value in train_study_level_data is same as StudyInstanceID column value in train_Image_level_data\n\n\ntrain_study_level_data['StudyInstanceUID'] = train_study_level_data['id'].apply(lambda x: x.replace('_study', ''))\n##del train_study_level_data['id']\ntrain_Merged_df = train_study_level_data.merge(train_image_level_data, on='StudyInstanceUID')\ntrain_Merged_df.head()","f070b6c9":"\nsns.distplot(train_Merged_df[\"Negative for Pneumonia\"])\n","d97c4beb":"train_Merged_df[\"Negative for Pneumonia\"].value_counts().plot(kind='bar')\nplt.show()\n\n","a26adbb7":"sns.distplot(train_Merged_df[\"Typical Appearance\"])","05b68f10":"train_Merged_df[\"Typical Appearance\"].value_counts().plot(kind='bar')\nplt.show()","87e51093":"sns.distplot(train_Merged_df[\"Indeterminate Appearance\"])","51a8f7a3":"train_Merged_df[\"Indeterminate Appearance\"].value_counts().plot(kind='bar')\nplt.show()","cc512f5f":"sns.distplot(train_Merged_df[\"Atypical Appearance\"])","d009dea8":"train_Merged_df[\"Atypical Appearance\"].value_counts().plot(kind='bar')\nplt.show()","e1976177":"train_Merged_df[\"OpacityCount\"].value_counts().plot(kind='bar')\nplt.show()","14ee0ad8":"grouped_df = train_Merged_df[['Study_Result','Class_ID']]\ngrouped_df[grouped_df['Class_ID']=='opacity'].value_counts()\n           ","a345eecb":"grouped_df[grouped_df['Class_ID']=='opacity'].value_counts().plot(kind='bar')","d413421f":"#Check for None Class values\n\ngrouped_df[grouped_df['Class_ID']=='none'].value_counts()","4d537e44":"grouped_df[grouped_df['Class_ID']=='none'].value_counts().plot(kind='bar')","354f94ca":"#RATIO OF IMBALANCE \n\nfrequency_values=train_study_level_data['Study_Result'].value_counts()\n\nfrequency_values.plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(6,6))","e7fc11bb":"train_image_level_data['OpacityCount'].value_counts().plot(kind='bar')","96f3eeef":"train_Merged_df.head(1)","bccf230e":"train_Merged_df['OpacityCount'].unique()","c6151f87":"OpacityCount_8_df=train_Merged_df[train_Merged_df['OpacityCount']==8][['Study_Result','OpacityCount']]#.plot(kind='bar')\n\nOpacityCount_8_df","5f039967":"\n#grouped_df[grouped_df['Class_ID']=='opacity'].value_counts().plot(kind='bar')\nOpacityCount_8_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","c85d056b":"OpacityCount_5_df=train_Merged_df[train_Merged_df['OpacityCount']==5][['Study_Result','OpacityCount']]\nOpacityCount_5_df","f521da73":"OpacityCount_5_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","30e7fb1d":"\nOpacityCount_4_df=train_Merged_df[train_Merged_df['OpacityCount']==4][['Study_Result','OpacityCount',]]\nOpacityCount_4_df","db750d0b":"OpacityCount_4_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","029d5fd0":"\nOpacityCount_3_df=train_Merged_df[train_Merged_df['OpacityCount']==3][['Study_Result','OpacityCount',]]\n","9042aa59":"OpacityCount_3_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","0186da2b":"OpacityCount_2_df=train_Merged_df[train_Merged_df['OpacityCount']==2][['Study_Result','OpacityCount',]]\nOpacityCount_2_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","5d158fde":"OpacityCount_1_df=train_Merged_df[train_Merged_df['OpacityCount']==1][['Study_Result','OpacityCount',]]\nOpacityCount_1_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","d8b87f8a":"OpacityCount_0_df=train_Merged_df[train_Merged_df['OpacityCount']==0][['Study_Result','OpacityCount','label']]\nOpacityCount_0_df.value_counts().plot(kind='pie',autopct='%1.2f%%',fontsize=14,figsize=(4,4))\nplt.show()","e772e916":"OpacityCount_0_df[OpacityCount_0_df['Study_Result']=='Typical']","957341f3":"### Check UniVariate Analysis of few columns in Merged Data ","97163e5e":"### Analysing OpacityCount 0 data with Typical Study Result","c47dea7c":"There are no duplicates in this dataset","1c3b2f11":"### Based on the above interpretation, lets split the Label column and start analysing the images ","7c0e6a42":"### Analyse Train image dataset","85b36b7c":"##### Plot a bar plot to see the Study results.","d92f43e6":"#### Lets check how the results are when opacity is available.","68ca81a9":"### When Opacity Count is 5, Lets analyse the Study Result","90c8c207":"WHen Opacity is available, most of the results were Typical .Also includes Indeterminate and Atypical.","2e7f335d":"# Perform EDA","c10fad7a":"There are no missing values in the Train Study dataset.","19a736a4":"### When OpacityCount is 8, lets analyse the Study Result.","e64c5cfe":"#### UniVaraite analysis for Negative for Pneumonia ","4c31024c":"##### Below is the approach taken in this Case Study analysis.\n","3eb460b7":"THere is only one record with opacity count 8 and the study result is Typical.","8c450a99":"When there is no Opacity values available in Label column, most of the Study Results were Negative(1736 records) which indicates there was no lung infection in most cases.\nBut surprisingly there were records with Typical (153 records) ,Atypical(92) and Indeterminate (59) study results as well with None opacity values.","500cb575":"# SIIM-FISABIO-RSNA COVID-19 Detection","36f25c1c":"###### Step2: Inspecting Dataframe","2325c102":"### Business Objective: \n   #### Currently, COVID-19 can be diagnosed via polymerase chain reaction to detect genetic material from the virus\n   #### or chest radiograph. However, it can take a few hours and sometimes days before the molecular test results are back.\n   #### In this competition, we identify and localize COVID-19 abnormalities on chest radiographs. \n   #### In particular, we categorize the radiographs as negative for pneumonia or typical, \n   #### indeterminate, or atypical for COVID-19.THis will help radiologists diagnose the millions \n   #### of COVID-19 patients more confidently and quickly\n","ccf62683":"#### UniVariate analysis for Atypical Appearance","82723877":"When OpacityCount is 3, there are 83.06 of data which has Typical Study Result,7.65% of ATypical and \n9.29% of Indeterminate Study Results.\n","bef76420":"##### Check for Missing Values","92add864":"Only boxes column has 2040 missing values. Lets analyse further to check when the boxes column doesnt have value.","16bd2ec9":"#### UniVaraite distribution for Typical Appearance","c42bb2e8":"## Perform UniVaraite and ByVariate analysis on Merged DataSet.","9b9b75d8":"# DataSet Information\ntrain_study_level.csv - the train study-level metadata, with one row for each study, including correct labels.","662ed4b9":"## Feature Engineering on Train Image DataSet","52802bc3":"## Lets check whether Data is imbalanced or not","d168006e":"#### Lets analyse further how the Study result is based on opacity count.","18d67d23":"#### Check UniVariate analysis for Opacity Count","d5e55f78":"## OBSERVATIONS FROM Basic Data Analysis and EDA:","833070a0":"When OpacityCount is 0, Mostly Study Results were Negative(85.1%).But also includes\nIndeterminate(2.89%),ATypical(4.5%) and Typical(7.5%).","417da0c3":"From above Pie chart, it is clear that near to 50% of Study results are Typical.Rest 50% include Negative,Atypical and Indeterminate","be31acd4":"#### UniVariate analysis for Indeterminate Appearance","ffd17500":"###### Step1 : Importing Data\n\nStep 2: Inspecting the Dataframe Train_Study_level dataset.\n\nStep3: Checking for Missing values and Duplicates in Train_Study_level dataset.\n\nStep4 : Adding new column Study_Result in Train_Study_level dataset and Performing EDA.\n\nStep5 : Inspecting dataframe Train_Image_level dataset.\n\nStep6 : Checking for Missing values and Duplicates in Train_Image_level dataset.\n\nStep7 : Merging both the datasets Train_Study_level and Train_Image_level\n\nStep8 : Feature Engineering on Train_Image_level dataset.Creating new columns by splitting data in Label column.\n\nStep9 : Performing EDA (both UniVariate and BiVariate analysis) on Merged dataset.","dadd39de":"Above BarPlot shows that Typical Appearence is the mostly got result.","e95a3165":"#  Merge both datasets train Study and Train image to understand report result and report parameters link\n","2b5f7704":"When OpacityCount is 2, there are 85.22 of data which has Typical Study Result,3.69% of ATypical and \n11.08% of Indeterminate Study Results.","97ea9754":"By looking at the above plot, we can analyse that most of the data have 2 opacity values.","40950edb":"1. There were no missing values in train_study_level dataset.\n\n\n2. When EDA is Performed on train_study_level dataset, we observed that Data is Highly Imbalanced \n   and near to 50% of Study results are Typical.Rest 50% include Negative,Atypical and Indeterminate.\n   \n\n3. There were 2040 missing values in Box Column in Train_Image_level dataset.\n\n\n4. There were no duplicate data.\n\n\nAfter Merging the both the datasets train_study_level and train_Image_level, we observed below points.\n\n5. When Opacity values are available in Label column, study results were mostly Typical(2854 records),\n   followed by Indeterminate(1049 records) and Atypical(391 records).\n   \n    \n6. When there is no Opacity values available in Label column, most of the Study Results were Negative(1736 records) \n    which indicates there was no lung infection in most cases.\n    But surprisingly there were records with Typical (153 records) ,Atypical(92) and Indeterminate (59) \n    study results as well with None opacity values.\n    \n\n7. There were multiple Opacity values available for each study result which indicates either multiple images available or \n   multiple boxes in single image.\n    Multiple values of Opacity Count is 2, 0, 1, 3, 4, 8, 5.\n    \n    \n8. There is only one record with opacity count 8 and the study result is Typical.\n\n\n9. There is only one record with opacity count 5 and the study result is Indeterminate.\n\n\n10. When OpacityCount is 4, there are 91.3% of data which has Typical Study Result,4.35% of ATypical and \n    4.35% of Indeterminate Study Results.\n    \n    \n11. When OpacityCount is 3, there are 83.06 of data which has Typical Study Result,7.65% of ATypical and \n    9.29% of Indeterminate Study Results.\n\n\n12. When OpacityCount is 2, there are 85.22 of data which has Typical Study Result,3.69% of ATypical and \n    11.08% of Indeterminate Study Results.\n\n\n13. When OpacityCount is 1, there are 70.40 of data which has Indeterminate Study Result,2.77% of Typical and \n    26.82% of ATypical Study Results.\n\n\n14. When OpacityCount is 0, Mostly Study Results were Negative(85.1%).But also includes\nIndeterminate(2.89%),ATypical(4.5%) and Typical(7.5%).\n\n","81a5ec58":"In Label Column, the format is as follows: [class ID] [confidence score] [bounding box]\n\nClass ID: Either opacity or none \n\nConfidence score: confidence from your neural network model. If none, the confidence is 1.\n\nBounding box:typical xmin ymin xmax ymax format. If class ID is none, the bounding box is 1 0 0 1 1.","543fe216":"When OpacityCount is 1, there are 70.40 of data which has Indeterminate Study Result,2.77% of Typical and \n26.82% of ATypical Study Results.","189d3fbd":"When OpacityCount is 4, there are 91.3% of data which has Typical Study Result,4.35% of ATypical and 4.35% of Indeterminate Study Results.","9d23b200":"##### Check for missing values in Train Image dataset","e1ea81ef":"THere is only one record with opacity count 5 and the study result is Indeterminate."}}