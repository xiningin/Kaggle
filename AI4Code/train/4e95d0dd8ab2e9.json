{"cell_type":{"0ef98a09":"code","b4476f35":"code","3a7434ff":"code","fe293ad4":"code","4f5a6b08":"code","b89fb799":"code","25ff9b82":"code","3876e3a6":"code","264340c9":"code","c9181145":"code","525597ee":"code","f860f49c":"code","80413e10":"code","f4dd9f66":"code","2b7c0606":"code","4c008e6e":"markdown","78767360":"markdown","2c67f406":"markdown","7dc21e69":"markdown","025ca57a":"markdown","0146b0e0":"markdown","74834f3d":"markdown","dd1dda78":"markdown","9d446c15":"markdown","aa259466":"markdown","0e8d4878":"markdown","5fdf8867":"markdown","76f4dc8d":"markdown","477f63e4":"markdown","27e6791b":"markdown","662eb541":"markdown","8f1d1831":"markdown","ce26a3ca":"markdown","43a41299":"markdown"},"source":{"0ef98a09":"# librerias requeridas para leeer el csv y a\u00f1adir algun comportamiento\n\nimport numpy as np\nimport pandas as pd\nimport plotly.express as px\nfrom wordcloud import WordCloud, STOPWORDS\nimport matplotlib.pyplot as plt\nfrom matplotlib.cm import ScalarMappable\nfrom matplotlib import rcParams\nimport seaborn as sns\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.cluster import KMeans\nfrom iso3166 import countries\nimport plotly.graph_objs as go\nfrom plotly.offline import init_notebook_mode, iplot\n\n\nrcParams['figure.figsize'] = 10,7.5\nrcParams['figure.dpi'] = 80\n\n","b4476f35":"df = pd.read_csv('\/kaggle\/input\/covid19-tweets\/covid19_tweets.csv')\ndf.head(15)","3a7434ff":"df.info()","fe293ad4":"numero_tweets = df['user_name'].value_counts().reset_index()\nnumero_tweets.columns = ['user_name', 'tweets']\n\n\nsns.barplot(x = \"tweets\", y = \"user_name\", data = numero_tweets.head(10))\nplt.show()","4f5a6b08":"top_users = df.sort_values('user_followers', ascending =  False).drop_duplicates(subset = 'user_name', keep = 'first')\ntop_users = top_users[['user_name', 'user_followers']]\ntop_users = pd.merge(top_users, numero_tweets, 'inner')\n\n\n#Normalize the scale to make the color bar on the right of the bar plot\nnorm = plt.Normalize(top_users['tweets'].min(), top_users['tweets'].max())\nsm = plt.cm.ScalarMappable(cmap=\"Blues_r\", norm=norm)\nsm.set_array([])\n#Show the barplot with color bar\nax = sns.barplot(x=\"user_followers\", y = \"user_name\", data = top_users.head(20), hue = 'tweets', dodge = False, palette = 'Blues_r')\nax.get_legend().remove()\nax.figure.colorbar(sm)\nplt.show()\n","b89fb799":"device = df['source'].value_counts().reset_index()\ndevice.columns = ['source', 'count']\ndevice['percent_tweets'] = round(device['count']\/device['count'].sum()*100, 2)\n\n\nsns.barplot(x = \"percent_tweets\", y = \"source\", data = device.head(10))\nplt.show()","25ff9b82":"def hashtags_split(x):\n    return str(x).lower().replace('[','').replace(']','').replace(\"'\",'').replace(\" \", '').split(',')\n\nhashtag_tweets = df.copy()\nhashtag_tweets['hashtag'] = hashtag_tweets['hashtags'].apply(lambda row: hashtags_split(row))\nhashtag_tweets = hashtag_tweets.explode('hashtag')\nhashtag_tweets.loc[hashtag_tweets['hashtag'] == '', 'hashtag'] = 'No Hashtag'\nhashtag_tweets.head()","3876e3a6":"hashtag_number = hashtag_tweets['hashtag'].value_counts().reset_index()\nhashtag_number.columns = ['hashtag', 'count']\n\nsns.barplot(x=\"count\", y = \"hashtag\", data = hashtag_number.head(5))\nplt.show()","264340c9":"text = \"\".join(tweet for tweet in df['text'])\nstopwords = set(STOPWORDS)\nstopwords.update(['https', 't','co', 'many', 's'])\n\nwordcloud = WordCloud(stopwords=stopwords, background_color='white').generate(text)\n\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.title('Prevalent words for all tweets')\nplt.show()","c9181145":"location = df['user_location'].value_counts().reset_index()\nlocation.columns = ['user_location', 'count']\nlocation = location[location['user_location'] != 'NA']\nlocation = location.sort_values(['count'], ascending = False)\n\nsns.barplot(x=\"count\", y = \"user_location\", data = location.head(10))\nplt.show()","525597ee":"!pip install geopandas\n","f860f49c":"import pycountry\n\ndef alpha3code(column):\n    CODE = []\n    for country in column:\n        try:\n            code = pycountry.countries.get(name=country).alpha_3\n            CODE.append(code)\n        except:\n            CODE.append('None')\n    return CODE\n\n\nlocation['CODE'] = alpha3code(location['user_location'])\nlocation.head()","80413e10":"import geopandas\nworld = geopandas.read_file(geopandas.datasets.get_path('naturalearth_lowres'))\nworld.columns = ['pop_est', 'continent', 'name', 'CODE', 'gdp_md_est', 'geometry']\nworld_merge = pd.merge(world, location, on='CODE')\n\nlocation_merge = pd.read_csv('..\/input\/countries-latitude-longitude\/countries-latitude-longitude.csv')\nworld_merge = world_merge.merge(location_merge, on='name').sort_values(by='count', ascending=False).reset_index()\nworld_merge = world_merge[['user_location', 'count', 'latitude','longitude']]\nworld_merge.head()","f4dd9f66":"import folium\nfrom folium import plugins\nfrom folium.plugins import HeatMap\n\nfolium_map = folium.Map(location=[50,0],\n                       zoom_start=3,\n                       tiles='CartoDB dark_matter')\n\nworld_merge['latitude']=world_merge['latitude'].fillna(0)\nworld_merge['longitude']=world_merge['longitude'].fillna(0)\n\nplugins.FastMarkerCluster(data=list(zip(world_merge['latitude'].values, world_merge['longitude'].values))).add_to(folium_map)\narr = world_merge[['latitude', 'longitude']].values\n\nHeatMap(arr, radius = 15).add_to(folium_map)\n\nfolium.LayerControl().add_to(folium_map)\nfolium_map","2b7c0606":"Eso es todo, muchas por la atenci\u00f3n prestada","4c008e6e":"![](http:\/\/)<p style=\"text-align:justify; font-size: 18px\">El siguiente trabajo explora los Tweets que han sido publicados en la pandemia mundial de COVID 19. Mostraremos visualmente la percepcion de la gente basado en los datos. Usaremos algunos gr\u00e1ficos  que se han ense\u00f1ado en el curso de DIPLOMADO<\/p>\n\n<p style=\"text-align:justify; font-size: 18px\">\nLink de consulta en Kaggle: <a href='https:\/\/www.kaggle.com\/bbeisaga\/ucsp-covid19-assessment'>https:\/\/www.kaggle.com\/bbeisaga\/ucsp-covid19-assessment<\/a>\n    <\/p>\n","78767360":"<p style=\"text-align:justify; font-size: 18px\">\n    En est\u00e1 seccion analizaremos la informacion de texto dentro de los hashtags que se han utilizado en los twess, tambien remplazaremos los valores NaN por alguna otra cosa\n    <\/p>","2c67f406":"<div style=\"color:white;\n           display:fill;\n           border-radius:80px;\n           background-color:#5e2129;\n           font-size:200%;\n           font-family:Verdana;\n           letter-spacing:2px\">\n\n<p style=\"padding: 10px 40px;\n              color:white;\n          text-align:left\"> CONJUNTO DE DATOS****    \n \n<\/p>\n<\/div>","7dc21e69":"<div style=\"color:white;\n           display:fill;\n           border-radius:80px;\n           background-color:#5e2129;\n           font-size:200%;\n           font-family:Verdana;\n           letter-spacing:2px\">\n\n<p style=\"padding: 10px 40px;\n              color:white;\n          text-align:left\"> CONTENIDO    \n \n<\/p>\n<\/div>","025ca57a":"<p style=\"text-align:justify; font-size: 18px\">\n    Como se puede obsersar los USA y la India son los que mas p\u00fablican Tweets\n    <\/p>","0146b0e0":"<div style=\"color:white;\n           display:fill;\n           border-radius:80px;\n           background-color:#5e2129;\n           font-size:200%;\n           font-family:Verdana;\n           letter-spacing:2px\">\n\n<p style=\"padding: 10px 40px;\n              color:white;\n#           text-align:left\"> VISUALIZACI\u00d3N GEOESPACIAL\n \n<\/p>\n<\/div>","74834f3d":"<p style=\"text-align:justify; font-size: 18px\">\n    El siguiente gr\u00e1fico muestra la distribuci\u00f3n de Tweest sobre el COVID 19 en el mundo\n    <\/p>","dd1dda78":"<img src=\"https:\/\/www.paho.org\/sites\/default\/files\/styles\/flexslider_full\/public\/2020-03\/blue-covid-banner.jpg?h=96546727&itok=cZemcbKa\" align = 'center'>\n<p><i style=\"color:red;\">Presentado por: Bhernard S. Beisaga Arenas <\/i><\/p>\n","9d446c15":"<p style=\"text-align:justify; font-size: 18px\">\n    Seg\u00fan el gr\u00e1fico China Xinhua Newa ha publicado muchos Twess sobre COVID 19, pero no tiene tantos seguyidores como CNN.\n    <\/p>\n    <p style=\"text-align:justify; font-size: 18px\">\nObservemos los dispositivos usados para los Twees de COVID 19. Podemos concluir que la mayoria proviene de alguna App probablemente descargada e instalada en dispositivos Android como celulares\n    <\/p>\n    ","aa259466":"<p style=\"text-align:justify; font-size: 18px\">\n    En el siguiente gr\u00e1fico muestra el n\u00famero de Twees por usuario\n    <\/p>\n    ","0e8d4878":"![](http:\/\/)<p style=\"text-align:justify; font-size: 18px\">\n        En el siguiente gr\u00e1fico veremos cual es el hashtag mas utilizado por los usuarios\n    <\/p>\n","5fdf8867":"<div style=\"color:white;\n           display:fill;\n           border-radius:80px;\n           background-color:#5e2129;\n           font-size:200%;\n           font-family:Verdana;\n           letter-spacing:2px\">\n\n<p style=\"padding: 10px 40px;\n              color:white;\n          text-align:left\"> VISUALIZACION DE LOS DATOS\n \n<\/p>\n<\/div>","76f4dc8d":"<p style=\"text-align:justify; font-size: 18px\">\n    <ul style=\"text-align:justify; font-size: 18px\">\n        <li>Conjunto de datos<\/li>\n        <li>Visualizaci\u00f3n<\/li>\n        <li>Analisis de tweets<\/li>\n        <li>Visualizaci\u00f3n Geoespacial<\/li>\n<\/ul>\n    <\/p>\n    ","477f63e4":"<p style=\"text-align:justify; font-size: 18px\">\n    El siguinte paso ser\u00e1 hacer una nube de palabras utilizadas en el Tweets\n    <\/p>","27e6791b":"<div style=\"color:white;\n           display:fill;\n           border-radius:80px;\n           background-color:#5e2129;\n           font-size:200%;\n           font-family:Verdana;\n           letter-spacing:2px\">\n\n<p style=\"padding: 10px 40px;\n              color:white;\n#           text-align:left\"> ANALISIS DE TWEETS\n \n<\/p>\n<\/div>","662eb541":"<p style=\"text-align:justify; font-size: 18px\">\n    Como se puede observar, en las columnas de la tabla existe una gran cantidad de valores en blanco NaN, lo cual podria darnos algunos inconvenientes en el an\u00e1lisis de datos\n    <\/p>\n    ","8f1d1831":"<p style=\"text-align:justify; font-size: 18px\">\n    Visualizando el conjunto de datos para el respectivo analisis.\n<\/p>","ce26a3ca":"<p style=\"text-align:justify; font-size: 18px\">El siguiente gr\u00e1fico muestas las cuentas con la mayor cantidad de seguidores y que han realziado Tweets de COVID19.\n    <\/p>","43a41299":"<div class=\"knitr source\">\n    <h1><p style=\"text-align:left; font-size: 24px\"> Exploraci\u00f3n de an\u00e1lisis de datos, para los tweets de COVID 19<\/p><\/h1>\n    <h2><p style=\"text-align:left; font-size: 20px\"> UCSP<\/p><\/h2>\n  \n<\/div>"}}