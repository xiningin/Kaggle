{"cell_type":{"103fc2a3":"code","2dbb56ba":"code","4d8f75ac":"code","824da422":"code","fe6c0f19":"code","c3f833ad":"code","c41d56c0":"code","a371ee66":"code","74f4b0e4":"code","ed0a8b78":"code","22125cb7":"code","b697823a":"code","47797732":"code","72ace704":"code","b236df03":"code","508c6d4f":"code","52323c25":"code","ab315f20":"code","1cf7be99":"code","eecfba25":"code","24e1e95a":"code","2e14b24d":"code","096f2f0b":"code","f32cd02e":"code","ec9dc777":"code","dc3abb19":"code","db4d3bbc":"code","5ed85bb7":"code","bf7afbfc":"code","693b3dd6":"code","3b8b252b":"code","47d393f7":"code","3fc66666":"code","e4ab83d8":"code","905cf8df":"code","d0ac294d":"code","2651cdf4":"code","7838b094":"markdown","c372338a":"markdown","d61af204":"markdown","a198d7b2":"markdown"},"source":{"103fc2a3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom matplotlib import pyplot as plt\n\nimport seaborn as sns # visualization library\nimport plotly as py # visualization library\nfrom plotly.offline import init_notebook_mode, iplot # plotly offline mode\ninit_notebook_mode(connected=True) \nimport plotly.graph_objs as go # plotly graphical object\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","2dbb56ba":"USA=pd.read_csv(\"..\/input\/global-hospital-beds-capacity-for-covid19\/hospital_beds_USA_v1.csv\")","4d8f75ac":"#Sorting values firstly Country then Year ascending order\nUSA.sort_values(['state', 'year'], ascending=[True, True], inplace=True)","824da422":"USA.columns=map(lambda x:str(x).upper(), USA.columns)","fe6c0f19":"USA.drop(USA.iloc[:,-2:], inplace = True, axis = 1)","c3f833ad":"global_=pd.read_csv(\"..\/input\/global-hospital-beds-capacity-for-covid19\/hospital_beds_global_regional_v1.csv\")\nglobal_.sort_values(['country', 'year'], ascending=[True, True], inplace=True)\nglobal_.columns=map(lambda x:str(x).upper(), global_.columns)\nglobal_.drop(global_.iloc[:,-2:], inplace = True, axis = 1)\nglobal_.head()","c41d56c0":"global_.info()","a371ee66":"global_.describe().T","74f4b0e4":"list(set(global_.dtypes.tolist()))","ed0a8b78":"df_num = global_.select_dtypes(include = ['float64', 'int64'])\ndf_num.head()","22125cb7":"global_[['BEDS','POPULATION']].corr() ","b697823a":"#USA's population and bed capacity correlation by years and patient service type\nsns.lmplot(x=\"POPULATION\", y=\"BEDS\",hue=\"YEAR\",data=USA ,palette=\"Set2\");","47797732":"USA.isnull().sum()","72ace704":"from collections import Counter\n\ncounter = Counter(USA['STATE'])\n# Printing biggest values\ncounter.most_common(10)\n","b236df03":"group1=USA.groupby(['YEAR'])['POPULATION','BEDS'].sum()\ngroup_1=group1.reset_index()\ngroup_1=group_1.iloc[ 0:8 , : ]   #I did not include it in the table due to the low number of 2020.\ngroup_1   ","508c6d4f":"f, axes = plt.subplots(1, 2,figsize=(15,8))\nsns.lineplot(  y=\"POPULATION\", x= \"YEAR\", data=group_1 , ax=axes[0])\nsns.lineplot(  y=\"BEDS\", x= \"YEAR\", data=group_1,  ax=axes[1]);","52323c25":"group2=USA.groupby(['STATE','YEAR'])['POPULATION','BEDS'].sum()\ngroup_2=group2.reset_index()","ab315f20":"# Get names of indexes for which column Year has value 2020\nindexNames = group_2[ group_2['YEAR'] == 2020 ].index\n# Delete these row indexes from dataFrame\ngroup_2.drop(indexNames , inplace=True)","1cf7be99":"# A few states from the USA\ngroup2_MO= group_2[group_2['STATE'] == \"MO\"]\ngroup2_LA= group_2[group_2['STATE'] == \"LA\"]\ngroup2_MI= group_2[group_2['STATE'] == \"MI\"]\ngroup2_WA= group_2[group_2['STATE'] == \"WA\"]\ngroup2_TX= group_2[group_2['STATE'] == \"TX\"]\ngroup2_CA= group_2[group_2['STATE'] == \"CA\"]\ngroup2_FL= group_2[group_2['STATE'] == \"FL\"]","eecfba25":"with plt.xkcd():\n    plt.plot(group2_MO.YEAR,group2_MO.BEDS, linestyle=\"--\",linewidth=3,label = \"MO\")\n    plt.plot(group2_LA.YEAR,group2_LA.BEDS, color=\"#20B2AA\",linewidth=3,label= \"LA\")\n    plt.plot(group2_MI.YEAR,group2_MI.BEDS,color=\"#A153E1\",linewidth=3, label=\"MI\")\n    plt.plot(group2_WA.YEAR,group2_WA.BEDS,color=\"#1FC9A5\",linewidth=3, label=\"WA\")\n    plt.plot(group2_TX.YEAR,group2_TX.BEDS,color=\"#E9967A\",linewidth=3, label=\"TX\")\n    plt.plot(group2_CA.YEAR,group2_CA.BEDS,color=\"#FFD700\",linewidth=3, label=\"CA\")\n    plt.plot(group2_FL.YEAR,group2_FL.BEDS,color=\"#9ACD32\",linewidth=3, label=\"FL\")\n\n    \n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Bed Capacity\")\n    plt.legend()\n    plt.tight_layout()\n    plt.title(\"Bed Capacities by States in USA\")\n    plt.show()","24e1e95a":" with plt.xkcd():\n\n    plt.plot(group2_MO.YEAR,group2_MO.POPULATION, linestyle=\"--\",linewidth=3,label = \"MO\")\n    plt.plot(group2_LA.YEAR,group2_LA.POPULATION, color=\"#20B2AA\",linewidth=3,label= \"LA\")\n    plt.plot(group2_MI.YEAR,group2_MI.POPULATION,color=\"#A153E1\",linewidth=3, label=\"MI\")\n    plt.plot(group2_WA.YEAR,group2_WA.POPULATION,color=\"#1FC9A5\",linewidth=3, label=\"WA\")\n    plt.plot(group2_TX.YEAR,group2_TX.POPULATION,color=\"#E9967A\",linewidth=3, label=\"TX\")\n    plt.plot(group2_CA.YEAR,group2_CA.POPULATION,color=\"#FFD700\",linewidth=3, label=\"CA\")\n    plt.plot(group2_FL.YEAR,group2_FL.POPULATION,color=\"#9ACD32\",linewidth=3, label=\"FL\")\n\n    \n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Population\")\n    plt.legend()\n    plt.tight_layout()\n    plt.title(\"Population by States in USA\")\n    plt.show()   ","2e14b24d":"group3=USA.groupby('STATE')['POPULATION','BEDS'].mean()\ngroup_3=group3.reset_index()\n\ngroup_4=group_3.sort_values(by=['POPULATION'], ascending=False)\ngroup_5=group_4.iloc[:11,:]  # Top 10 states according to State.","096f2f0b":"f, axes = plt.subplots(1, 2,figsize=(15,8))\nsns.barplot(  y=\"POPULATION\", x= \"STATE\", data=group_5 , ax=axes[0])\nsns.barplot(  y=\"BEDS\", x= \"STATE\", data=group_5,  ax=axes[1]);","f32cd02e":"a=USA.groupby(['TYPE','YEAR'])['BEDS'].mean()\nb=a.reset_index()","ec9dc777":"plt.figure(figsize = (10, 6))\nax = sns.boxplot(x='TYPE', y='BEDS', data=b)\nax.set_title('Bed capacities according to types in USA')\nplt.setp(ax.artists, alpha=.5, linewidth=2, edgecolor=\"k\")\nplt.xticks(rotation=45);","dc3abb19":"import plotly.express as px\nfig = px.bar(b[['YEAR', 'BEDS','TYPE']].sort_values('BEDS', ascending=False), \n             y=\"BEDS\", x=\"YEAR\", color='TYPE', \n             log_y=True, template='ggplot2')\nfig.update_layout(title_text='Beds capacities according to years in USA')\nfig.show()","db4d3bbc":"USA_ACUTE= b[b['TYPE'] == \"ACUTE\"]\nUSA_ICU=b[b['TYPE'] == \"ICU\"]\nUSA_OTHER=b[b['TYPE'] == \"OTHER\"]\nUSA_PSYCHIATRIC=b[b['TYPE'] == \"PSYCHIATRIC\"]","5ed85bb7":"with plt.xkcd():\n    plt.figure(figsize=(12,8))\n    plt.plot(USA_ACUTE.YEAR,USA_ACUTE.BEDS, linestyle=\"--\",linewidth=2,label = \"Acute\")\n    plt.plot(USA_ICU.YEAR,USA_ICU.BEDS, color=\"#4EB772\",linewidth=2,label= \"ICU\")\n    plt.plot(USA_OTHER.YEAR,USA_OTHER.BEDS,color=\"#A153E1\",linewidth=2, label=\"Other\")\n    plt.plot(USA_PSYCHIATRIC.YEAR,USA_PSYCHIATRIC.BEDS,color=\"#1FC9A5\",linewidth=2, label=\"Psychiatric\")\n    \n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Bed Capacity\")\n    plt.legend(bbox_to_anchor=(1.05, 1), loc='best', borderaxespad=0.)\n    plt.tight_layout()\n    plt.title(\"Bed Capacities by Types in USA\")\n    plt.show()","bf7afbfc":"c=global_.groupby(['TYPE','YEAR'])['BEDS'].mean()\nd=c.reset_index()","693b3dd6":"# Get names of indexes for which column Year has value less than 2011\nindexNames2 = d[ d['YEAR'] < 2011 ].index\n# Delete these row indexes from dataFrame\nd.drop(indexNames2 , inplace=True)","3b8b252b":"plt.figure(figsize = (10, 6))\nax = sns.boxplot(x='YEAR', y='BEDS', data=d)\nplt.setp(ax.artists, alpha=.5, linewidth=2, edgecolor=\"k\")\nplt.xticks(rotation=45)\nplt.xlabel('Year')\nplt.ylabel('BEDS')\nplt.title('Box Plot-Global Data');","47d393f7":"from collections import Counter\ncounter = Counter(global_['TYPE'])\ncounter","3fc66666":"global_ACUTE= d[d['TYPE'] == \"ACUTE\"]\nglobal_ICU=d[d['TYPE'] == \"ICU\"]\nglobal_OTHER=d[d['TYPE'] == \"OTHER\"]\nglobal_PSYCHIATRIC=d[d['TYPE'] == \"PSYCHIATRIC\"]\nglobal_TOTAL=d[d['TYPE'] == \"TOTAL\" ]","e4ab83d8":"with plt.xkcd():\n    plt.figure(figsize=(12,8))\n    plt.plot(global_ACUTE.YEAR,global_ACUTE.BEDS,color=\"#355C7D\", linestyle=\"--\",linewidth=3,label = \"Acute\")\n    plt.plot(global_ICU.YEAR,global_ICU.BEDS, color=\"#F8B195\",linewidth=3,label= \"ICU\")\n    plt.plot(global_OTHER.YEAR,global_OTHER.BEDS,color=\"#F67280\",linewidth=3, label=\"Other\")\n    plt.plot(global_PSYCHIATRIC.YEAR,global_PSYCHIATRIC.BEDS,color=\"#C06C84\",linewidth=3, label=\"Psychiatric\")\n    plt.plot(global_TOTAL.YEAR,global_TOTAL.BEDS,color=\"#6C5B7B\",linewidth=3, label=\"Total\")\n    \n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Bed Capacity\")\n    plt.legend()\n    plt.tight_layout()\n    plt.title(\"Bed capacities by types in global\")\n    plt.show()","905cf8df":"pop_group = USA.groupby([\"STATE\",\"COUNTY\"])[[\"POPULATION\",\"BEDS\"]].mean().reset_index()\npop_group.head()","d0ac294d":"pop_group2 = pop_group.sort_values(by=['STATE','POPULATION'],ascending=False)\npop_group2=pop_group2.groupby('STATE').head(5) # first 5 rows for each group","2651cdf4":"fig = px.bar(pop_group2[['STATE', 'POPULATION','COUNTY']].sort_values('POPULATION', ascending=False), \n             y=\"POPULATION\", x=\"STATE\", color='COUNTY', \n             log_y=True, template='ggplot2')\nfig.show()","7838b094":"Frankly, I would expect the population size and bed capacities to be highly correlated. ","c372338a":"* The bed capacity increase in psychiatric services bed capacity in 2019 and total services bed capacity in 2017 is remarkable.","d61af204":"* As you can see, the bed capacities generally decrease over the years in the USA.(Especially psychiatric and other type.)\n* Increase is observed except for ICU (Intensive Care Unit) 2019 and 2020.","a198d7b2":"**DETAIL ANALYSIS OF USA AND GLOBAL DATA**"}}