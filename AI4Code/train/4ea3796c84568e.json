{"cell_type":{"0ac5f927":"code","7d90d3cd":"code","08ee6d01":"code","1a94583a":"code","768b0cb5":"code","21e0cd5d":"code","2fa26c74":"code","8713ac1c":"code","41601ac9":"code","22004a68":"code","8e3e7229":"code","213e645f":"code","470df011":"code","8db709a5":"code","b1f2d8dd":"code","8af14ef3":"code","d3c525aa":"code","83e04740":"code","1ed082da":"code","19e7c5b7":"code","e4fbcf5a":"code","4de3eb58":"code","00bdc0de":"code","a8bd7f97":"code","d0262af5":"code","2f55fec4":"code","94437c01":"code","29fc58bb":"code","efb7848f":"code","eedfcae1":"code","b90fe835":"code","36a35614":"code","72b71629":"code","5c105069":"code","5d1cc92e":"code","fc3762d9":"code","1ad69b07":"code","93214bb3":"code","da21fef2":"code","f49beb37":"code","cc5a92ca":"code","d1ea2a48":"code","d89b34bc":"code","48051633":"code","803a0617":"code","62e9253e":"code","4ccb60b5":"code","529947b3":"code","d6a4bd17":"code","4366f1c6":"markdown","2dddad38":"markdown","738732ae":"markdown","1b7ad829":"markdown","f59d82c3":"markdown","4f193a51":"markdown","0cf26c58":"markdown","837bf48a":"markdown","59f8cd8b":"markdown","2ea99616":"markdown","d32d632c":"markdown","09210b32":"markdown","8cc7bb05":"markdown","44b51bae":"markdown","051a5049":"markdown","9b73db1c":"markdown","c972b2dc":"markdown"},"source":{"0ac5f927":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport re\nimport plotly.express as px\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\n\nfrom plotly.subplots import make_subplots","7d90d3cd":"df = pd.read_csv('..\/input\/indian-candidates-for-general-election-2019\/LS_2.0.csv')","08ee6d01":"df.head()","1a94583a":"\ndef clean(text):\n    text = text.lower()\n    text = re.sub(r'\\n','',text)\n    return text","768b0cb5":"cols= [clean(i) for i in df.columns.tolist() ]","21e0cd5d":"cols","2fa26c74":"cols[cols.index('criminalcases')] = 'cases'\ncols[cols.index('over total electors in constituency')] = 'constituency electors'\ncols[cols.index('over total votes polled in constituency')] = 'constituency votes'","8713ac1c":"df1 = df.copy()","41601ac9":"df1.columns = cols","22004a68":"df1.head()","8e3e7229":"df1.info()","213e645f":"df1.liabilities.value_counts()","470df011":"df1.fillna(0,inplace=True)","8db709a5":"def get_money(x):\n    try:\n        return re.sub(',','',x.split('~')[0].split()[1])\n    except:\n        return 0","b1f2d8dd":"df1['assets'] = df1.assets.replace({'Not Available':'0','Nil':'0'})\ndf1['liabilities'] = df1.liabilities.replace({'Not Available':'0','Nil':'0'})\ndf1['cases'] = df1.cases.replace({'Not Available':'0','Nil':'0'})","8af14ef3":"df1.assets = pd.to_numeric(df1.assets.apply(lambda x : get_money(x)))\ndf1.liabilities = pd.to_numeric(df1.liabilities.apply(lambda x : get_money(x)))","d3c525aa":"df1.cases = pd.to_numeric(df1.cases)","83e04740":"df1.education.replace({'Post Graduate\\n':'Post Graduate'},inplace=True)","1ed082da":"df1.head()","19e7c5b7":"len(cols)","e4fbcf5a":"winners = df1[df1.winner ==1]","4de3eb58":"fig = make_subplots(rows=4,cols=5,subplot_titles=winners.columns.tolist())\ni = j  = 1\nfor idx in range(len(winners.columns)) :\n    try:\n    \n        counts = pd.DataFrame(winners[cols[idx]].value_counts().head(5))\n        \n        \n        fig.add_trace(go.Bar( x=counts.index.tolist(),y=counts[cols[idx]].tolist()),row = i,col = j)\n        j = j + 1\n        if j > 5:\n            j = 1\n            i = i + 1\n    except:\n        pass\nfig.update_layout(height=800)\nfig.show()","00bdc0de":"bjp = df1[df1.party == 'BJP']\nbjp.head()","a8bd7f97":"#state with number of consituencies greater than 10\ncons = pd.DataFrame(bjp.state.value_counts()>10)\ncons = cons[cons.state==True].index.tolist()","d0262af5":"votesrec = bjp[bjp.state.isin(cons)]\nvotesrec['percentvotes'] = round(votesrec['totalvotes']\/votesrec['total electors'] * 100,2)\nvotesrec","2f55fec4":"d1 = votesrec.groupby('state').agg({'constituency':'count'})\nd2 = votesrec[votesrec.winner == 1]\nd3 = d2.groupby('state').agg({'constituency':'count'})\nd3.loc['Kerala'] = 0\nd4 = pd.Series(d3.constituency\/d1.constituency*100)\npx.bar(data_frame=d4)","94437c01":"n = len(votesrec[votesrec.winner == 0])\np = len(votesrec[votesrec.winner == 1])\nprint(\"Percentage of Constituencies Won in each states with no. of constituencies > 10 :\")\nfor i in d4.items() :\n    print(\"{} : {}%\".format(i[0],round(i[1],2)))\npx.scatter(data_frame=votesrec,x='totalvotes',y='total electors',color='winner',hover_data=['state','constituency','party','percentvotes']\n          ,title= \"States with constituencies >10; Won :{} and Lost : {}\".format(p,n))\n","29fc58bb":"bjp.shape ","efb7848f":"px.histogram(data_frame=bjp,x='winner',opacity=0.3)","eedfcae1":"px.scatter(data_frame = bjp,x='liabilities',y='assets',color='winner')","b90fe835":"dict ={}\nfor i in bjp.education.unique().tolist():\n    try:\n        temp = bjp[bjp.education == i]['winner'].value_counts()[1] \/ (bjp[bjp.education == i]['winner'].value_counts()[1] + \n                                                                    bjp[bjp.education == i]['winner'].value_counts()[0]) *100\n        dict[i] = round(temp,2)\n    except:\n        dict[i] = 0\n","36a35614":"d1 = pd.DataFrame.from_dict(dict,orient='index')","72b71629":"bjp = pd.merge(bjp,d1,right_index=True,left_on='education').rename({0:'educationwinpercent'},axis=1)\nbjp['educationwinpercent'] = bjp['educationwinpercent'].astype('str')+'%'","5c105069":"education = bjp.groupby(['education']).agg({'winner':'sum','name':'count'})\neducation.rename({'winner':'Candidates Won','name':'Total Candidates'},axis=1,inplace=True)\npx.bar(education,barmode='group')","5d1cc92e":"px.pie(data_frame=bjp,names='education',hover_data=['educationwinpercent'])","fc3762d9":"df1.head()","1ad69b07":"#Lets explore criminal background of the candidates","93214bb3":"l=  0\nc = [i for i in df1.cases if i < 4 ]\nprint(f\"Total Canditates : {len(df1)}\")\nprint(f\"Candidates with less than 4 cases : {len(c)}\")\nprint(f\"Candidates with more than 4 cases : {len(df1) - len(c)}\")\n","da21fef2":"#Distribution of 218 candidates\npx.histogram(df1[ (df1.cases > 4)],'cases',nbins=40)","f49beb37":"cases = df1.copy()\ncases['yes'] = cases.cases > 0","cc5a92ca":"len(cases)","d1ea2a48":"c1 = len(cases[(cases.yes == False) & (cases.winner == 0)])\nc2 = len(cases[(cases.yes == False) & (cases.winner == 1)])\nl = len(cases)\nnl = '\\n'\nnew_df =pd.DataFrame.from_dict( {'Losing Candidates with no cases':[c1],\n          'Losing candidates atleast one case' : [l-c1],\n          'Winning Candidates with no cases' : [c2],\n          'Winning candidates atleast one case' : [l-c2]\n         }).T\nprint(f\"Losing Candidates with no cases : {c1} Losing candidates atleast one case : {l-c1}{nl}Winning Candidates with no cases : {c2} Winning candidates atleast one case : {l-c2}\")\npx.bar(cases,'winner','cases',color='cases',\\\ntitle=f\"\",\n    color_continuous_scale='viridis',barmode='relative')","d89b34bc":"new_df","48051633":"px.pie(data_frame = new_df,values=0,names=new_df.index)","803a0617":"df1.head()","62e9253e":"df1.groupby(['party']).agg({'state':'count'}).sort_values(by='state',ascending=False)[:10]\npx.bar(df1.groupby(['party']).agg({'state':'count'}).sort_values(by='state',ascending=False)[:10],\ntitle = \"Parties with Most number of Candidates\",labels = {\"party\":\"Party Name\",\"value\":\"No. of Candidates\"})","4ccb60b5":"all = df1.groupby(['party']).agg({'state':'count'})\nwin = winners.groupby('party').agg({'state':'count'})\nfor i in all.index.tolist():\n    if i not in win.index.tolist():\n        win.loc[i] = 0\nnew_df1 = pd.merge(all,win,left_index=True,right_index=True).sort_values(by='state_y',ascending=False)[:15]\nnew_df1['ratio'] = round(new_df1['state_y'] \/ new_df1['state_x'] * 100,2)","529947b3":"new_df1","d6a4bd17":"px.bar(new_df1,y=['state_x','state_y'],color='ratio',barmode='overlay',opacity = 0.7,\n       labels={'party':'Winning Parties with total no. of candidates and conversion Ratio',\n              'value':'Total no. of winning vs Total no. of Candidates','ratio':'Conversion Ratio'})","4366f1c6":"#Lets see what % of constitunencies were won by BJP.","2dddad38":"#From the above pie chart, we can conclude that most of the candidates who stood for election for bjp were hihgly educated.\n#Alongside this, all the highly educated candidates had a winning rate of more than 70%. But winning percent doesnt seem tobe\n#affected by level of education as even candidates below 10th grade education had 70% candidates winning the election.\n#Still it is good to see educated people taking a stand in the world of politics.","738732ae":"#Finally , let us see the how many candidates who stood for election vs candidates elected\n#from parties with maximum candidates standing\n#for election was.","1b7ad829":"#did assets and liabilities matter in victory?","f59d82c3":"#Thus from above to graphs of liabilities vs assets, we can conclude that having higher liabilities cost had high winning\n#rate. Meanwhile if it is just high assets, winning chances arent very high. This might be because these leaders took \n#money from people and invested it in assets rather than focusing on development.","4f193a51":"#What about the winners?","0cf26c58":"#What percent of bjp leaders were educated and won ?","837bf48a":"#From above graphs, we can see that most of the elected candidates did have some amount of criminal activity on going. It is\n#quite shocking to see that only 306 candidates have a clean background. This points towards corruption in our current \n#system where 1200 candidates who do thier work ethically couldn't get nominated. We need to overcome this as it is really\n#not beneficial for our system to be governed by criminals","59f8cd8b":"#Lets us see how all the parties performed in the election","2ea99616":"# Starting Analysis ","d32d632c":"#Now lets look at BJP data and why they were so successful in the campaign.","09210b32":"#From above, we can see DMK and LJP had huge success with all thier candidates getting elected. INC, BSP,CPI and IND despte of \n#heavy campainging failed to gain much support. Rest others did fairly decent ie more than 50% conversion ratio.","8cc7bb05":"#We can conclude from the above graph that the BJP were popular where the total number of electors were greater than 1.5M.\n#These areas seem to be mostly urban. Thus thier success rate is higher in cities. They majorly work for the benefits and\n#development of cities and thus win more votes for themselves.","44b51bae":"#Above chart shows the distribution of bjp candidates with a certain level of education.Red indicates total no of candidates\n#with an education while blue shows the number who got elected.","051a5049":"Conclusions from above graphs for winners:\n\n1) BJP had the majoirity of the winning candidates.\n\n2) Significant number of winners were educated to college level. This shows people trust in educated candidates.\n\n3) More than 50% percent winners didnt have criminal cases which is a good sign.\n\n4) Seems like average age of the winning leader is 55.\n\n5) Not many women candidate won the elections compared to men.\n\n6) General Category candidates had the majority winning share.","9b73db1c":"#Conclusions drawn:\n\n1) Many of the elected members very educated. \n\n2) A lot of Elected candidates had criminal cases which doesnt reflect a good image.\n\n3) Liabilites tend to higher success rate than assets which was a surprising insight!\n\n4) BJP had highest conversion ratio. It is always a notable fact that many local parties were largely supported by \n    local supporters.\n\n5) BJP ,who had the maximum elected candidates, it can be seen that their major focus of development were in cities and thus rural parties supported local parties more.","c972b2dc":"#From above data, we can still see that many candidates have some criminal cases registered to their name. Considering our\n#country, cases against politicians hardly surface. Thus we can also say that even though a candidate has less registered\n#cases, having some cases registered to their name means they do take unethical paths to get their jobs done and might be  \n#involved in more criminal activity that hasn't surfaced yet."}}