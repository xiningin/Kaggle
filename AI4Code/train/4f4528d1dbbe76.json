{"cell_type":{"ab483c84":"code","b0614147":"code","08b8e216":"code","8279a458":"code","f4990686":"code","1bdd66f6":"code","cb2211a3":"code","6c647cc4":"code","c3fb96c5":"code","071e21a3":"code","3d825bc8":"code","dfc1f269":"code","405d4901":"code","dbd566b9":"code","749ceabe":"code","5d4963ec":"code","349beebf":"code","f2b3e9eb":"code","5230f7f9":"code","35ef37ed":"code","09922185":"code","1479d834":"code","5384ac35":"code","65d0992f":"code","ff3321a0":"code","56b5b90a":"code","f9ae6eec":"code","bd564b5e":"code","894a2665":"code","fb3ed775":"code","d08d47cf":"code","44a4c493":"code","d4bfd005":"code","3e72c757":"code","11fbfcc4":"code","e46b708c":"code","3a05960a":"code","aa810e1c":"code","374a60f6":"code","d08a3d69":"code","e1313009":"code","2eeb9ad0":"markdown","dd56195f":"markdown","bb213e21":"markdown","8b853a7f":"markdown","aefa02f0":"markdown","bc75abf6":"markdown","dc37b52a":"markdown","5116b4ee":"markdown","68938750":"markdown","b41cd8b5":"markdown","f9bc4ac0":"markdown","5d270df7":"markdown","3c1cd288":"markdown","618183f0":"markdown","ce54417b":"markdown","3cf124ae":"markdown","a46b42d4":"markdown","f4d69f7f":"markdown","5a4ccff1":"markdown","5ae57d24":"markdown","efb2b9dc":"markdown","8a6cb8bf":"markdown"},"source":{"ab483c84":"# to load json files\nimport json\n# datetime oprations\nfrom datetime import timedelta\n# to get web contents\nfrom urllib.request import urlopen\n\n# for numerical analyiss\nimport numpy as np\n# to store and process data in dataframe\nimport pandas as pd\n\n# basic visualization package\nimport matplotlib.pyplot as plt\n# advanced ploting\nimport seaborn as sns\n#color patch\nimport matplotlib.patches as mpatches\n\n# hide warnings\nimport warnings\nwarnings.filterwarnings('ignore')\n\nplt.style.use('seaborn')","b0614147":"# Full data\n# =========\n\nfull_table = pd.read_csv('..\/input\/corona-virus-report\/covid_19_clean_complete.csv')\nprint(full_table.shape)\nfull_table.head()","08b8e216":"# Grouped by day, country\n# =======================\n\nfull_grouped = pd.read_csv('..\/input\/corona-virus-report\/full_grouped.csv')\nfull_grouped['Date'] = pd.to_datetime(full_grouped['Date'])\nfull_grouped.head()","8279a458":"# Day wise\n# ========\n\nday_wise = pd.read_csv('..\/input\/corona-virus-report\/day_wise.csv')\nday_wise['Date'] = pd.to_datetime(day_wise['Date'])\nday_wise.head()","f4990686":"# Country wise\n# ============\n\ncountry_wise = pd.read_csv('..\/input\/corona-virus-report\/country_wise_latest.csv')\ncountry_wise = country_wise.replace('', np.nan).fillna(0)\ncountry_wise.head()","1bdd66f6":"# Worldometer data\n# ================\n\nworldometer_data = pd.read_csv('..\/input\/corona-virus-report\/worldometer_data.csv')\nworldometer_data = worldometer_data.replace('', np.nan).fillna(0)\nprint(worldometer_data.shape)\nworldometer_data.head()","cb2211a3":"#get values from dataframe\ntemp = day_wise[['Date','Deaths', 'Recovered', 'Active']].tail(1)\ndt = temp.Date.dt.strftime(\"%d-%m-%y\").values\ntemp = temp.melt(id_vars=\"Date\", value_vars=['Active', 'Deaths', 'Recovered'])\ntemp.sort_values(by='value', inplace=True, ascending=False)\n\n#fig = plt.treemap(temp, path=[\"variable\"], values=\"value\", height=225)\n#fig.data[0].textinfo = 'label+text+value'\n#fig.show()\nbars = plt.bar(temp.variable, temp.value, color=['green', 'blue', 'red'], alpha=0.7)\n\n#remove ytick labels\nplt.tick_params(top=False, bottom=False, left=False, right=False, labelleft=False, labelbottom=True)\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n\n# direct label each bar with Y axis values\nfor bar in bars:\n    plt.gca().text(bar.get_x() + bar.get_width()\/2, bar.get_height()-5, str(int(bar.get_height()\/1000)) + 'K', \n                 ha='center', fontsize=15)\n    \nplt.xticks(temp.variable.values,fontsize=15)\nplt.title('Total Cases till {}'.format(dt[0]), fontsize=17);","6c647cc4":"plt.style.use('fivethirtyeight')\nfig, ax = plt.subplots()\nplt.bar(day_wise.Date,day_wise.Confirmed,width=0.7,alpha=0.7)\n\nax.set_yscale(\"log\")\nplt.title('Monthly Confirmed Cases');","c3fb96c5":"fig, (ax1,ax2) = plt.subplots(1,2,figsize=(15,5))\n\nax1.bar(day_wise.Date,day_wise.Active,color='#ff2e63', width=0.7,alpha=0.7)\nax1.set_yscale(\"log\")\nax1.set_title('Monthly Active Cases');\n\nax2.bar(day_wise.Date,day_wise['New cases'],color='#fe9801', width=0.7,alpha=0.7)\nax2.set_yscale(\"log\")\nax2.set_title('Monthly New Cases');","071e21a3":"fig, (ax1,ax2) = plt.subplots(1,2,figsize=(15,5),sharey=True)\n\nax1.bar(day_wise.Date,day_wise.Deaths,color='red', width=0.7,alpha=0.7)\nax1.set_yscale(\"log\")\nax1.set_title('Monthly Deaths');\n\nax2.bar(day_wise.Date,day_wise.Recovered,color='green', width=0.7,alpha=0.7)\nax2.set_yscale(\"log\")\nax2.set_title('Monthly Recovered');","3d825bc8":"fig, (ax1,ax2) = plt.subplots(1,2,figsize=(15,5),sharey=True)\n\nax1.bar(day_wise.Date,day_wise['New deaths'],color='red', width=0.7,alpha=0.7)\nax1.set_yscale(\"log\")\nax1.set_title('Monthly New Deaths');\n\nax2.bar(day_wise.Date,day_wise['New recovered'],color='green', width=0.7,alpha=0.7)\nax2.set_yscale(\"log\")\nax2.set_title('Monthly New Recovered');","dfc1f269":"fig, ax = plt.subplots()\nplt.bar(day_wise.Date,day_wise['Deaths \/ 100 Recovered'],width=0.7,alpha=0.7)\n\nax.set_yscale(\"log\")\nplt.title('Number of Deaths \/ 100 Recovered');","405d4901":"fig, ax = plt.subplots()\nplt.bar(day_wise.Date,day_wise['Recovered \/ 100 Cases'],width=0.7,alpha=0.7, color='#ff2e63')\n\nax.set_yscale(\"log\")\nplt.title('Number of Recovered \/ 100 Cases');","dbd566b9":"fig, ax = plt.subplots()\nplt.bar(day_wise.Date,day_wise['No. of countries'],width=0.7,alpha=0.7, color='#fe9801')\n\nax.set_yscale(\"log\")\nplt.title('Number of Countries Affected');","749ceabe":"plt.style.use('default')\n\ntemp = country_wise[['Country\/Region', 'Confirmed']].sort_values(by='Confirmed', ascending=False)[0:15]\ntemp.sort_values(by='Confirmed', inplace=True)\n\nbars = plt.barh(temp['Country\/Region'], temp['Confirmed'],color=['gray'])\nbars[-1].set_color('#D63412')\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('Confirmed Cases in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n    \n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['Confirmed']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)","5d4963ec":"temp = country_wise[['Country\/Region', 'Active']].sort_values(by='Active', ascending=False)[0:15]\ntemp.sort_values(by='Active', inplace=True)\n\nbars = plt.barh(temp['Country\/Region'], temp['Active'],color=['gray'])\nbars[-1].set_color('#D63412')\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('Active Cases in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n    \n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['Active']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)","349beebf":"temp = country_wise[['Country\/Region', 'Deaths']].sort_values(by='Deaths', ascending=False)[0:15]\ntemp.sort_values(by='Deaths', inplace=True)\n\nbars = plt.barh(temp['Country\/Region'], temp['Deaths'],color=['gray'])\nbars[-1].set_color('#D63412')\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('Deaths in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n    \n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['Deaths']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)","f2b3e9eb":"temp = country_wise[['Country\/Region', 'Recovered']].sort_values(by='Recovered', ascending=False)[0:15]\ntemp.sort_values(by='Recovered', inplace=True)\n\nbars = plt.barh(temp['Country\/Region'], temp['Recovered'],color=['lightgray'])\nbars[-1].set_color('darkgreen')\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('Recovered Cases in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n    \n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['Recovered']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)","5230f7f9":"dic = {'Americas':'red','South-East Asia':'green','Europe':'blue','Africa':'yellow','Eastern Mediterranean':'gray'}\ntemp = country_wise[['Country\/Region', 'New cases', 'WHO Region']].sort_values(by='New cases', ascending=False)[0:15]\ntemp.sort_values(by='New cases', inplace=True)\ntemp['WHO Region']=temp['WHO Region'].map(dic)\ntemp['WHO Region'].dropna(inplace=True)\n\n\nbars = plt.barh(temp['Country\/Region'], temp['New cases'], color=temp['WHO Region'], alpha=0.8)\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('New cases in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\nplt.legend()\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n\n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['New cases']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)\n    \n#Add Legend\npatchList = []\nfor key in dic:\n        data_key = mpatches.Patch(color=dic[key], label=key)\n        patchList.append(data_key)\nplt.legend(handles=patchList, loc='best');","35ef37ed":"temp = country_wise[['Country\/Region', 'New recovered', 'WHO Region']].sort_values(by='New recovered', ascending=False)[0:15]\ntemp.sort_values(by='New recovered', inplace=True)\ntemp['WHO Region']=temp['WHO Region'].map(dic)\ntemp['WHO Region'].dropna(inplace=True)\n\nbars = plt.barh(temp['Country\/Region'], temp['New recovered'], color=temp['WHO Region'], alpha=0.8)\nplt.tick_params(labelbottom=False, bottom=False, top=False)\nplt.title('New recovered cases in Top15 Countries')\nplt.gca().ticklabel_format(useOffset=False, style='plain', axis='x')\nplt.legend()\n\n# remove the frame of the chart\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\n\n# direct label each bar with Y axis values\nfor i, v in enumerate(temp['New recovered']):\n    plt.gca().text(v + 3, i - .25, str(int(v\/1000))+'K', color='black', fontsize=10)\n    \n#Add Legend\npatchList = []\nfor key in dic:\n        data_key = mpatches.Patch(color=dic[key], label=key)\n        patchList.append(data_key)\nplt.legend(handles=patchList, loc='best');","09922185":"import plotly.express as px","1479d834":"def plot_map(df,col):\n    df = df[df[col]>0]\n    fig = px.choropleth(df, locations=\"Country\/Region\", locationmode='country names', \n                  color=col, hover_name=\"Country\/Region\", \n                  title=col, hover_data=[col], color_continuous_scale=\"Reds\")\n    fig.show()","5384ac35":"plot_map(country_wise, 'Confirmed')","65d0992f":"plot_map(country_wise, 'Deaths')","ff3321a0":"#the plot i will be using is same choropleth plot as used in above plots the \n#differnece is i will be updating the plot with colors according to the animation frame!\n\nfig = px.choropleth(full_grouped, locations=\"Country\/Region\", \n                    color=np.log(full_grouped[\"Confirmed\"]),\n                    locationmode='country names', hover_name=\"Country\/Region\", \n                    animation_frame=full_grouped[\"Date\"].dt.strftime('%Y-%m-%d'),\n                    title='Cases over time', color_continuous_scale=px.colors.sequential.Reds)\nfig.update(layout_coloraxis_showscale=False)\nfig.show()","56b5b90a":"def plot_daywise(col, hue):\n    fig = px.bar(day_wise, x=\"Date\", y=col, width=700, color_discrete_sequence=[hue])\n    fig.update_layout(title=col, xaxis_title=\"\", yaxis_title=\"\")\n    fig.show()","f9ae6eec":"plot_daywise('New cases', '#333333')","bd564b5e":"plot_daywise('New deaths', '#D63412')","894a2665":"def plot_daywise_line(col, hue):\n    fig = px.line(day_wise, x=\"Date\", y=col, width=700, color_discrete_sequence=[hue])\n    fig.update_layout(title=col, xaxis_title=\"\", yaxis_title=\"\")\n    fig.show()","fb3ed775":"plot_daywise_line('New deaths', '#D63412')","d08d47cf":"fig = px.scatter(country_wise.sort_values('Deaths', ascending=False).iloc[:20, :], \n                 x='Confirmed', y='Deaths', color='Country\/Region', size='Confirmed', \n                 height=700, text='Country\/Region', log_x=True, log_y=True, \n                 title='Deaths vs Confirmed (Scale is in log10)')\nfig.update_traces(textposition='top center')\nfig.update_layout(showlegend=False)\nfig.update_layout(xaxis_rangeslider_visible=True)\nfig.show()","44a4c493":"temp = country_wise.iloc[:,0:5].sort_values(ascending=False, by='Confirmed').set_index('Country\/Region')[:10]\ntemp.style.background_gradient(cmap='Greens')","d4bfd005":"plt.figure(figsize=(10,5))\nplt.title('Confirmed cases in Pie-Chart', size=20)\nplt.pie(temp.Confirmed)\nplt.legend(temp.index, loc='best', fontsize=8)\nplt.show()","3e72c757":"latest_data = pd.read_csv('https:\/\/raw.githubusercontent.com\/CSSEGISandData\/COVID-19\/master\/csse_covid_19_data\/csse_covid_19_daily_reports\/07-13-2020.csv')\nlatest_data.head()","11fbfcc4":"latest_data.sort_values(by='Confirmed', ascending=False)\\\n            .loc[:10,['Country_Region','Province_State','Confirmed','Deaths','Recovered','Active']]\\\n            .reset_index(drop=True)[:20]\\\n            .style.background_gradient(cmap='Greens')","e46b708c":"temp = latest_data[latest_data.Country_Region == 'US']\\\n            .loc[:,['Province_State','Confirmed']]\\\n            .groupby(['Province_State']).sum()\\\n            .sort_values(by='Confirmed',ascending=False)\\\n            .iloc[:10]\n\nplt.figure(figsize=(10,5))\nplt.title('Confirmed cases in USA', size=20)\nplt.pie(temp.Confirmed)\nplt.legend(temp.index, loc='best', fontsize=8)\nplt.show()","3a05960a":"temp = latest_data[latest_data.Country_Region == 'India']\\\n            .loc[:,['Province_State','Confirmed']]\\\n            .groupby(['Province_State']).sum()\\\n            .sort_values(by='Confirmed',ascending=False)\\\n            .iloc[:10]\n\nplt.figure(figsize=(10,5))\nplt.title('Confirmed cases in INDIA', size=20)\nplt.pie(temp.Confirmed)\nplt.legend(temp.index, loc='best', fontsize=8)\nplt.show()","aa810e1c":"temp = latest_data[latest_data.Country_Region == 'China']\\\n            .loc[:,['Province_State','Confirmed']]\\\n            .groupby(['Province_State']).sum()\\\n            .sort_values(by='Confirmed',ascending=False)\\\n            .iloc[:10]\n\nplt.figure(figsize=(10,5))\nplt.title('Confirmed cases in China', size=20)\nplt.pie(temp.Confirmed)\nplt.legend(temp.index, loc='best', fontsize=8)\nplt.show()","374a60f6":"temp = country_wise.iloc[:,0:5].sort_values(ascending=False, by='Confirmed').set_index('Country\/Region')[:10]\ntemp['Death ratio'] = temp.Deaths\/temp.Confirmed\ntemp['recover ratio'] = temp.Recovered\/temp.Confirmed\ntemp['var'] = 1","d08a3d69":"temp.sort_values(by='recover ratio',ascending=False,inplace=True)\n\nplt.figure(figsize=(15,5))\nplt.bar(temp.index,temp['var'],color='white',edgecolor='black',alpha=0.7)\nbars = plt.bar(temp.index,temp['recover ratio'],color='green',alpha=0.6)\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\nplt.tick_params(top=False, bottom=False, left=False, right=False, labelleft=False, labelbottom=True)\nfor bar in bars:\n    plt.gca().text(bar.get_x() + bar.get_width()\/2, bar.get_height()+0.01, str(round(bar.get_height()*100,1)) + '%', \n                 ha='center', color='black', fontsize=11)\nplt.title('recover ratio in Top 10 countries');","e1313009":"temp.sort_values(by='Death ratio',ascending=False,inplace=True)\n\nplt.figure(figsize=(15,2.5))\nplt.bar(temp.index,temp['var'],color='white',edgecolor='black',alpha=0.7)\nbars = plt.bar(temp.index,temp['Death ratio'],color='red',alpha=0.6)\nfor spine in plt.gca().spines.values():\n    spine.set_visible(False)\nplt.tick_params(top=False, bottom=False, left=False, right=False, labelleft=False, labelbottom=True)\nfor bar in bars:\n    plt.gca().text(bar.get_x() + bar.get_width()\/2, bar.get_height()+0.02, str(round(bar.get_height()*100,2)) + '%', \n                 ha='center', color='black', fontsize=11)\nplt.title('Death ratio in Top 10 countries');","2eeb9ad0":"### Interactive plot\n\nWe have already plotted number of cases using matplotlib so now i will be plotting same thing but this time by using plotly","dd56195f":"# Top 15 Countries","bb213e21":"<center><h1 style='color:green'>Dn't forget to Upvote, Thanks and Be Safe!","8b853a7f":"# Cases over the time","aefa02f0":"**We have plotted cases accroding to month, try on your own to plot deaths and active cases interactively by using plotly** ","bc75abf6":"**Let's see how cases increases over the time!**","dc37b52a":"### Top 10 countries case-report","5116b4ee":"vow!, this looks nice!","68938750":"### Iteractive Maps","b41cd8b5":"### Some statistics","f9bc4ac0":"**Disclaimer**\n\n> Data is from scrapped from JHU github repository. Any variation in the data there will also reflect in this notebook","5d270df7":"### Top20 Region Wise report","3c1cd288":"We can also plot line graph instead of bar graph","618183f0":"### **Real time Analysis** \n- Results and plots gets updated every time dataset get's updated!","ce54417b":"**Let's compare number of deaths vs confimed cases using scatter plot in plotly**","3cf124ae":"<center><h1 style='color:red'>COVID-19","a46b42d4":"# Let's start with Interactive Visualization with the help of plotly","f4d69f7f":"# Latest Score Board","5a4ccff1":"# Libraries","5ae57d24":"# Dataset","efb2b9dc":"#### Region wise dataset","8a6cb8bf":"A novel strain of coronavirus \u2014 SARS-CoV-2 \u2014 was first detected in December 2019 in Wuhan, a city in China\u2019s Hubei province with a population of 11 million, after an outbreak of pneumonia without an obvious cause. The virus has now spread to over 200 countries and territories across the globe, and was characterised as a pandemic by the World Health Organization (WHO)\n\n**Let's Hope for the best and make sure to Take care of yourself, your familiy members and your loved ones!**"}}