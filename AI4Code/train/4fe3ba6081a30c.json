{"cell_type":{"8affd551":"code","2027b59b":"code","4aac876c":"code","f6c11902":"code","af8184be":"code","9987b4be":"code","994a1dda":"code","d86f7f83":"code","405b891d":"code","6e570acd":"code","49017699":"code","eac582cc":"code","d18650a0":"code","c3d23fd9":"code","bbd4d574":"code","a6c7566e":"code","52d97c86":"code","c354eeac":"markdown","0bd49da4":"markdown","8dd7d3a1":"markdown","166b16cb":"markdown","f2202fce":"markdown","9da15d7b":"markdown"},"source":{"8affd551":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport math","2027b59b":"%matplotlib inline","4aac876c":"df = pd.read_csv(\"..\/input\/training_set_metadata.csv\")","f6c11902":"df.head()","af8184be":"ddf = df[df['ddf']==1] # Deep Drilling Fields\nwfd = df[df['ddf']==0] # Wide-Fast-Deep survey","9987b4be":"fig, axes = plt.subplots(2, 1, figsize=(10, 12),subplot_kw={'projection': 'aitoff'})\naxes[0].scatter(x=(ddf['ra']-180)*math.pi\/180, y=ddf['decl']*math.pi\/180, c=ddf['hostgal_specz'], cmap='plasma', s=2)\naxes[0].set_title(\"DDF survey area\")\naxes[1].scatter(x=(wfd['ra']-180)*math.pi\/180, y=wfd['decl']*math.pi\/180, c=wfd['hostgal_specz'], cmap='plasma', s=2)\naxes[1].set_title(\"WFD survey area\")","994a1dda":"ingal = df[df['hostgal_specz']==0] # inside our galaxy\noutgal = df[df['hostgal_specz']>0] # outside our galaxy","d86f7f83":"fig, axes = plt.subplots(2, 1, figsize=(10, 12),subplot_kw={'projection': 'aitoff'})\naxes[0].scatter(x=(ingal['ra']-180)*math.pi\/180, y=ingal['decl']*math.pi\/180, c=ingal['hostgal_specz'], cmap='plasma', s=2)\naxes[0].set_title(\"Inside our galaxy\")\naxes[1].scatter(x=(outgal['ra']-180)*math.pi\/180, y=outgal['decl']*math.pi\/180, c=outgal['hostgal_specz'], cmap='plasma', s=2)\naxes[1].set_title(\"Outside our galaxy\")","405b891d":"print(ingal['target'].sort_values().unique())","6e570acd":"print(outgal['target'].sort_values().unique())","49017699":"ingal_targets = pd.DataFrame(ingal.groupby('target')['object_id'].nunique())\ningal_targets.reset_index(level=0, inplace=True)\ningal_targets.columns = ['target', 'count']\ningal_targets = ingal_targets.assign(our_galaxy = 1)\noutgal_targets = pd.DataFrame(outgal.groupby('target')['object_id'].nunique())\noutgal_targets.reset_index(level=0, inplace=True)\noutgal_targets.columns = ['target', 'count']\noutgal_targets = outgal_targets.assign(our_galaxy = 0)","eac582cc":"targets = pd.concat([ingal_targets,outgal_targets], ignore_index=True)\ntargets = targets.sort_values(by=['target'])\ntargets = targets.reset_index(drop=True)","d18650a0":"targets","c3d23fd9":"fig, ax = plt.subplots(1, 1, figsize=(10, 5))\nax.bar(targets[targets['our_galaxy']==1].index, targets[targets['our_galaxy']==1]['count'], label=\"Inside our galaxy\")\nax.bar(targets[targets['our_galaxy']==0].index, targets[targets['our_galaxy']==0]['count'], label=\"Outside our galaxy\")\nax.legend(loc='upper left')\nax.set_title(\"Target types inside\/outside of our galaxy\")\nax.set_xticks(targets.index)\nax.set_xticklabels(targets['target']);\nax.set_xlabel(\"Target\")\nax.set_ylabel(\"Numer of occurrence in the dataset\")","bbd4d574":"outgal = outgal.assign(meas_diff = abs(outgal['hostgal_specz']-outgal['hostgal_photoz']))","a6c7566e":"fig, axes = plt.subplots(2, 1, figsize=(10, 12),subplot_kw={'projection': 'aitoff'})\naxes[0].scatter(x=(outgal['ra']-180)*math.pi\/180, y=outgal['decl']*math.pi\/180, c=outgal['meas_diff'], cmap='Blues', s=2)\naxes[0].set_title(\"Where are the biggest differences\")\naxes[1].scatter(x=(outgal['ra']-180)*math.pi\/180, y=outgal['decl']*math.pi\/180, c=outgal['hostgal_photoz_err'], cmap='Blues', s=2)\naxes[1].set_title(\"Where are the biggest errors\")","52d97c86":"sns.pairplot(outgal[['hostgal_specz','hostgal_photoz','hostgal_photoz_err','mwebv','target','meas_diff']], hue='target')","c354eeac":"### Differences between the two types of measurements (hostgal_specz, hostgal_photoz), errors\nOnly for objects outside of our galaxy, inside galaxy objects have value 0.","0bd49da4":"First, we divided the dataset into two parts: DDF (Deep Drilling Field) and WFD (Wide-Fast-Deep)","8dd7d3a1":"### Visualisation of locations of objects on the map (DDF and WFD)\nThe colors of the points show how far the object is from our galaxy (dark blue = near us, light pink = far from us).","166b16cb":"### Which targets are in our galaxy and which are outside","f2202fce":"### Visualisation of objects inside\/outside our galaxy\nThe colors of the points show how far the object is from our galaxy (dark blue = near us, light pink = far from us).","9da15d7b":"### Importing common libraries, loading the dataset"}}