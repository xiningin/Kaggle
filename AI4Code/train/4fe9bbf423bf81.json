{"cell_type":{"a0af4aca":"code","bf072041":"code","502ace94":"code","a96cf4ad":"code","dc1f4189":"code","ea1e0c2a":"code","3e71c531":"code","9a4cad84":"code","d19a979b":"code","2e051e82":"code","21414bff":"code","298e5b58":"code","498b5fe0":"code","ccaf5bf4":"code","3ce8af1f":"code","44badacf":"code","c2bb9cb0":"code","05e5d6bd":"code","fadf5b96":"markdown","9b4addb7":"markdown","d3bad06e":"markdown","64d01d7f":"markdown","c7b2573e":"markdown","5ad7c39b":"markdown","46a53b10":"markdown","47098291":"markdown","abbfc5e0":"markdown"},"source":{"a0af4aca":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np","bf072041":"df = pd.read_csv('..\/input\/pres16results.csv')\ndf.head()","502ace94":"df = df[(df['cand'] == 'Donald Trump') | (df['cand'] == 'Hillary Clinton')].dropna(subset=['county'], axis='rows')","a96cf4ad":"df['county_st'] = df['county'] + ' in ' + df['st']","dc1f4189":"df.head()","ea1e0c2a":"piv = df.pivot(index='county_st', columns='cand', values='votes')","3e71c531":"piv['diff'] = piv['Hillary Clinton'] - piv['Donald Trump']","9a4cad84":"piv.head()","d19a979b":"def HCDT(diff):\n    if diff > 0:\n        res = 'Hillary Clinton'\n    else:\n        res = 'Donald Trump'\n    return res","2e051e82":"piv['Winner'] = list(map(HCDT, piv['diff']))","21414bff":"piv['Absolute Vote Difference'] = abs(piv['diff'])","298e5b58":"piv.head()","498b5fe0":"g_violin = sns.catplot(x=\"Winner\", y=\"Absolute Vote Difference\", kind=\"violin\", inner=None, data=piv, cut=0)\ng_violin.fig.set_size_inches(6,24)\n#plt.savefig('graphs\/gerrymandering.jpg', dpi=600) #graph output","ccaf5bf4":"#fig, ax = plt.subplots(figsize=(6,24))\ng_box = sns.catplot(x=\"Winner\", y=\"Absolute Vote Difference\", kind=\"box\", dodge=False, data=piv, width=0.6, showfliers=False)\ng_box.fig.set_size_inches(6,24)\n#plt.savefig('graphs\/gerrymandering_box.jpg', dpi=600) #graph output","3ce8af1f":"def percentile(n):\n    def percentile_(x):\n        return np.percentile(x, n)\n    percentile_.__name__ = 'percentile_%s' % n\n    return percentile_\n\ncomp = piv[['Absolute Vote Difference', 'Winner']].groupby('Winner').agg(['min', 'max', 'mean', percentile(25), 'median', percentile(75)])\ncomp","44badacf":"piv_p = df.pivot(index='county_st', columns='cand', values='pct')\npiv_p['% diff'] = piv_p['Hillary Clinton'] - piv_p['Donald Trump']\npiv_p['Winner'] = list(map(HCDT, piv_p['% diff']))\npiv_p['Absolute % Difference'] = abs(piv_p['% diff'])\npiv_p.head()","c2bb9cb0":"g_violin = sns.catplot(x=\"Winner\", y=\"Absolute % Difference\", kind=\"violin\", data=piv_p, cut=0)\ng_violin.fig.set_size_inches(6,12)","05e5d6bd":"g_box = sns.catplot(x=\"Winner\", y=\"Absolute % Difference\", kind=\"box\", dodge=False, data=piv_p, width=0.6, showfliers=False)\ng_box.fig.set_size_inches(6,12)","fadf5b96":"Turns out, politics is still very complex! :-)","9b4addb7":"Generating table to compare absolute Votes of Donald Trump and Hillary Clinton in counties.","d3bad06e":"Creating new county identifier because of multiple identical county names.","64d01d7f":"Standard importing.","c7b2573e":"**Plots**","5ad7c39b":"**Comparing vote differences per county in 2016 presidential election (US)**","46a53b10":"Preparing table for plotting.","47098291":"Comparison of key indicators.","abbfc5e0":"Percentage Comparison"}}