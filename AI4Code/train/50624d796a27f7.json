{"cell_type":{"8e2f960c":"code","9fd3475d":"code","3aae9fc8":"code","f72a89a8":"code","34987506":"code","1f3c439c":"code","2e99e307":"code","f8fa3536":"code","5473a946":"code","24cba124":"code","7a20e8ce":"code","5b50cb41":"code","fd8a90fa":"code","71d0948d":"code","c0152750":"code","3b261920":"code","6c8f87ff":"code","441a3f93":"code","fffb9922":"code","79ef5d61":"code","400166ef":"code","8a0da9ae":"code","3eab8c61":"code","40bf3251":"code","9d185556":"code","1bb1c05d":"code","49d5fa3a":"code","43f071c7":"code","ab10718b":"code","e149a1b7":"code","f39b92d4":"code","c3770329":"code","17eb64f6":"code","cdc84da3":"code","191f20a7":"code","2f023d63":"code","9b242494":"code","3f4dafda":"code","01d88036":"code","ade249c0":"code","05510a77":"code","62c7ce91":"code","1383f14e":"code","536649ec":"code","27dcb899":"code","9ec807a3":"code","6d11d002":"code","126d29e5":"code","3432a8ce":"code","b3163904":"code","57577e6e":"code","4453fe1e":"code","a0424181":"code","9a4745ee":"code","1bb3a61e":"code","cadfaf69":"code","a8ade162":"code","d15d76c5":"code","de5766d8":"code","f6ff2a79":"code","b324a7d3":"code","5ec4011c":"code","7620ca91":"code","d047315a":"code","696ad217":"code","06ebd9e2":"code","63ab1fd8":"code","0a11de1e":"code","dd61a765":"markdown","910b3fa9":"markdown","82418cde":"markdown","0215673d":"markdown","9e59f911":"markdown","0e168c53":"markdown","95edd322":"markdown","a7e9b0fb":"markdown","596bcb01":"markdown","54e82a20":"markdown","1e4106f7":"markdown","202d2529":"markdown","3eb13a03":"markdown","24eadbd0":"markdown","d42af200":"markdown","995f5f99":"markdown","1fcc602e":"markdown","fb5a6a69":"markdown","bbdb7b6c":"markdown","30196420":"markdown","073b0d1a":"markdown","fd3e055c":"markdown","cbed6258":"markdown","f3b8dd50":"markdown"},"source":{"8e2f960c":"import numpy as np\nimport pandas as pd","9fd3475d":"import matplotlib.pyplot as plt\nimport seaborn as sns","3aae9fc8":"import difflib","f72a89a8":"import re","34987506":"food = pd.read_csv('..\/input\/food-and-nutrient-data\/food.csv')","1f3c439c":"food_nutrient = pd.read_csv('..\/input\/food-and-nutrient-data\/food_nutrient.csv')","2e99e307":"nutrient = pd.read_csv('..\/input\/food-and-nutrient-data\/nutrient.csv')","f8fa3536":"food.head()","5473a946":"food.info()","24cba124":"food['description'] = food['description'].astype(str)","7a20e8ce":"f'number of unique food items {pd.unique(food.iloc[:, 2]).size}'","5b50cb41":"food_nutrient.head()","fd8a90fa":"food_nutrient.info()","71d0948d":"food_nutrient['footnote'].unique()","c0152750":"food_nutrient[food_nutrient['footnote']=='Trace amount']","3b261920":"f'number of unique nutrients {pd.unique(food_nutrient.iloc[:, 2]).size}'","6c8f87ff":"nutrient.head()","441a3f93":"nutrient.info()","fffb9922":"plt.figure(figsize=(15, 5))\nsns.countplot(x='unit_name', data=nutrient, order=nutrient['unit_name'].value_counts().index)","79ef5d61":"nutrients_with_names = nutrient.merge(food_nutrient.drop('id', axis=1), left_on='id', right_on='nutrient_id')","400166ef":"nutrients_with_names.head()","8a0da9ae":"nutrients_with_names.shape","3eab8c61":"nutrients_with_names.isnull().sum()","40bf3251":"nutrients_with_names = nutrients_with_names[['nutrient_id', 'name', 'amount', 'unit_name', 'fdc_id']]","9d185556":"df = pd.merge(food, nutrients_with_names, on='fdc_id')\ndf","1bb1c05d":"nutrients = pd.unique(df['name'])\nsorted(nutrients)","49d5fa3a":"f'number of unique nutrient names {nutrients.size}'","43f071c7":"vitamins = ['Vitamin A, RAE', 'Thiamin', 'Riboflavin', 'Niacin', 'Pantothenic acid', 'Vitamin B-6', 'Biotin', 'Folate, total', 'Vitamin B-12',\n 'Vitamin C, total ascorbic acid', 'Vitamin D (D2 + D3)', 'Vitamin D2 (ergocalciferol)', 'Vitamin D3 (cholecalciferol)', 'Vitamin E (alpha-tocopherol)', \n 'Vitamin K (Dihydrophylloquinone)', 'Vitamin K (Menaquinone-4)', 'Vitamin K (phylloquinone)']","ab10718b":"minerals = ['Potassium, K', 'Sodium, Na', 'Calcium, Ca', 'Phosphorus, P', 'Magnesium, Mg', 'Iron, Fe', 'Zinc, Zn', 'Manganese, Mn',\n             'Copper, Cu', 'Iodine, I', 'Selenium, Se', 'Molybdenum, Mo', 'Cobalt, Co', 'Nickel, Ni', 'Boron, B']","e149a1b7":"for i in vitamins:\n    print(df[df['name']==i].iloc[0]['unit_name'], 'is unit of measurement for', i )","f39b92d4":"for i in minerals:\n    print(df[df['name']==i].iloc[0]['unit_name'], 'is unit of measurement for', i )","c3770329":"df.groupby('description').count().sort_values(by='amount', ascending=False).head(10)","17eb64f6":"df.groupby(['name']).count().sort_values(by='amount', ascending=False).head(10)","cdc84da3":"matches = difflib.get_close_matches('vitamin D', nutrients, n=15, cutoff=.2)\nmatches","191f20a7":"r = re.compile(\"Choline\")","2f023d63":"set(filter(r.match, nutrients))","9b242494":"df[df['name']=='Calcium, Ca'].sort_values(by='amount', ascending=False).head(10)","3f4dafda":"def filter_description(df, unique_words_in_description):\n    return df.loc[(df['description'].str.split(r\",|;\", expand=True)).drop_duplicates(subset=[i for i in range(unique_words_in_description)]).index]","01d88036":"filter_description(df[df['name']=='Vitamin K (phylloquinone)'].sort_values(by='amount', ascending=False), 1).head(10)","ade249c0":"nutrient['name'][nutrient['name'].duplicated()]","05510a77":"nutrient[nutrient['name']=='Energy']","62c7ce91":"(df[(df['name']=='Energy') & (df['unit_name']=='KCAL')].reset_index()['fdc_id'] == df[(df['name']=='Energy') & (df['unit_name']=='kJ')].reset_index()['fdc_id']).all()","1383f14e":"df[df['nutrient_id']==1062].index","536649ec":"df_1 = df.drop(df[df['nutrient_id']==1062].index)\ndf_1","27dcb899":"df_1.columns","9ec807a3":"df_1.drop(['data_type', 'food_category_id','publication_date'], axis=1, inplace=True)","6d11d002":"wide_df = df_1.set_index(['fdc_id', 'description', 'name'])['amount'].unstack().reset_index().rename_axis(None, axis=1)\nwide_df","126d29e5":"wide_df.count()[vitamins]","3432a8ce":"wide_df.count()[vitamins].plot(kind='bar', figsize=(10,5))","b3163904":"wide_df.count()[minerals]","57577e6e":"wide_df.count()[minerals].plot(kind='bar', figsize=(10,5))","4453fe1e":"wide_df.sort_values(by='Vitamin B-6', ascending=False)[['description', 'Vitamin B-6']].head(10)","a0424181":"wide_df.loc[(wide_df['Protein']\/wide_df['Carbohydrate, by summation']).sort_values(ascending=False).index] \\\n    [['description', 'Protein', 'Carbohydrate, by summation']].head(10)","9a4745ee":"matches = difflib.get_close_matches('Egg', list(df['description']), n=15, cutoff=.5)\nmatches","1bb3a61e":"r = re.compile('Egg')","cadfaf69":"set(filter(r.match, list(df['description'])))","a8ade162":"minerals_rda = dict(zip(minerals[:12], [3400, 1500, 1000, 700, 400, 18, 11, 2.3, .9, 150, 55, 45]))","d15d76c5":"wide_df_minerals = wide_df[['description']].join(wide_df.loc[:, minerals_rda.keys()] \/ minerals_rda.values() * 100)\nwide_df_minerals","de5766d8":"wide_df_minerals.loc[wide_df_minerals.loc[:,minerals_rda.keys()].sum(axis=1).sort_values(ascending=False).index].head(10)","f6ff2a79":"wide_df['description'].str.contains('Salt').tail(10)","b324a7d3":"wide_df_minerals.loc[wide_df_minerals[~wide_df['description'].str.contains('Salt')].loc[:,minerals_rda.keys()].sum(axis=1).sort_values(ascending=False).index].round(2).head(10)","5ec4011c":"vitamins_rda = dict(zip(vitamins[:10] + vitamins[12:14] + vitamins[16:], [900, 1.2, 1.3, 16, 5, 1.3, 30, 400, 2.4, 90, 15, 15, 120]))","7620ca91":"wide_df_vitamins = wide_df[['description']].join(wide_df.loc[:, vitamins_rda.keys()] \/ vitamins_rda.values() * 100)\nwide_df_vitamins","d047315a":"wide_df_vitamins.loc[wide_df_vitamins.loc[:,vitamins_rda.keys()].sum(axis=1).sort_values(ascending=False).index].round(2).head(10)","696ad217":"def filter_description(df, unique_words_in_description):\n    return df.loc[(df['description'].str.split(r\",|;|-\", expand=True)).drop_duplicates(subset=[i for i in range(unique_words_in_description)]).index]","06ebd9e2":"filter_description(wide_df_minerals.loc[wide_df_minerals.loc[:,minerals_rda.keys()].sum(axis=1).sort_values(ascending=False).index], 1).head(10)","63ab1fd8":"filter_description(wide_df_vitamins.loc[wide_df_vitamins.loc[:,vitamins_rda.keys()].sum(axis=1).sort_values(ascending=False).index], 1).head(10)","0a11de1e":"wide_df_minerals[wide_df_minerals['description'].isin(set(filter(r.match, list(df['description'].values))))][['description'] + list(minerals_rda.keys())]","dd61a765":"Most mentioned nutrients","910b3fa9":"When we sort the foods by amount of protein they have, there are many similar food items near to each other. To list different foods, we can split the description and remove duplicates","82418cde":"measurement unit of minerals","0215673d":"Number of food items with vitamins","9e59f911":"Number of food items with minerals","0e168c53":"Recommended Dietary Allowance (RDA): average daily level of intake sufficient to meet the nutrient requirements of nearly all (97%-98%) healthy people taken from from https:\/\/ods.od.nih.gov\/HealthInformation\/Dietary_Reference_Intakes.aspx","95edd322":"merging food and nutrients_with_names to make combined dataframe","a7e9b0fb":"Filtering description to view different food items","596bcb01":"## making wide dataframe","54e82a20":"foods with high protein to carbohydrate value","1e4106f7":"# Nutrients by Food","202d2529":"Table of Contents:\n* [1. Introduction](#Introduction)\n* [2. Foods by Nutrient](#Foods-by-Nutrient)\n* [3. Nutrients by Food](#Nutrients-by-Food)","3eb13a03":"Merging with nutrient dataframe for names of nutrients.","24eadbd0":"# Foods by Nutrient","d42af200":"Most mentioned food items","995f5f99":"# Introduction","1fcc602e":"foods by their mineral content as a percentage of Recommended Dietary Allowance","fb5a6a69":"Converting nutrients which are listed in rows to columns","bbdb7b6c":"sum of rankings of foods by vitamin content","30196420":"## Finding by Modifying Description","073b0d1a":"measurement unit of vitamins","fd3e055c":"## high vitamins and minerals","cbed6258":"Removing duplicated nutrient names","f3b8dd50":"foods by their vitamin content as a percentage of Recommended Dietary Allowance"}}