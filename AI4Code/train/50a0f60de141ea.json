{"cell_type":{"cbbb19da":"code","7449e5e3":"code","d85301c2":"code","d199359b":"code","b8350fcd":"code","bf45b318":"code","26fe7620":"code","3b1c5dd9":"code","8afb2a7f":"code","31447ed5":"code","b4e8896c":"code","93e3fa4a":"code","e65b52dd":"code","4a262d1b":"code","343a876c":"code","44f9d141":"code","a48a1f4d":"code","5a232ce4":"code","76fe76c0":"code","dbe07432":"code","daafd392":"code","b894ade0":"code","19dd8680":"code","72779f59":"code","9bb54065":"code","adb9dbe0":"code","b83f48bb":"code","bc80a7ae":"code","a024bcca":"code","a218743a":"code","74025f7b":"code","792e60b7":"code","9c161403":"code","34593b2a":"code","95e0a1fd":"code","709b1d33":"code","dece8106":"code","1c966f74":"code","36f8dbbd":"code","7f060596":"code","0091d4cb":"code","0d9c1ede":"code","e5278536":"code","0786f409":"code","47738ce5":"markdown","123ed46f":"markdown","ab9414aa":"markdown","95c24e37":"markdown","315e32cc":"markdown","2b79b505":"markdown","e4371605":"markdown","ea29d66f":"markdown","aefd2497":"markdown"},"source":{"cbbb19da":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport gc\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","7449e5e3":"# !pip install -U nlp_profiler","d85301c2":"# from nlp_profiler.core import apply_text_profiling\nfrom nlp_profiler_class import NLPProfiler","d199359b":"DATASET_UPLOAD_FOLDER='\/kaggle\/working\/upload'\nEXTENDED_DATA_FOLDER='\/kaggle\/input\/tweet-sentiment-extraction-extended'","b8350fcd":"%%bash\nDATASET_UPLOAD_FOLDER='\/kaggle\/working\/upload'\nmkdir -p ${DATASET_UPLOAD_FOLDER}\ncp \/kaggle\/input\/tweet-sentiment-extraction-extended\/*.csv ${DATASET_UPLOAD_FOLDER} || true","bf45b318":"def load_csv_if_exists(filepath: str) -> pd.DataFrame:\n    result = None\n    if os.path.exists(filepath): \n        result = pd.read_csv(filepath)\n        print(f'Finished loading {result.shape[0]} rows from {filepath}')\n    else: \n        print(f'Warning: Did NOT find \"{filepath}\"')\n    return result","26fe7620":"def save_to_csv_file(dataframe, filename, field_to_drop='text'):\n    dataframe_copy = dataframe.drop(field_to_drop, axis=1, errors='ignore')\n    dataframe_copy.to_csv(filename, index=False)","3b1c5dd9":"training_dataset = pd.read_csv(f'{EXTENDED_DATA_FOLDER}\/train.csv')\ntest_dataset = pd.read_csv(f'{EXTENDED_DATA_FOLDER}\/test.csv')","8afb2a7f":"training_dataset.info()","31447ed5":"test_dataset.info()","b4e8896c":"profiled_train_text_sentiment = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_text_sentiment.csv')\nprofiled_train_text_ease_of_reading = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_text_ease_of_reading.csv')\nprofiled_train_text_grammar = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_text_grammar_check.csv')\nprofiled_train_text_spelling = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_text_spelling_check.csv')\nprofiled_train_text_granular = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_text_granular_features.csv')","93e3fa4a":"%%time\nif profiled_train_text_sentiment is None:\n    profiled_train_text_sentiment = NLPProfiler().apply_text_profiling(\n        training_dataset, 'text', \n        params={'high_level': True, # only sentiment analysis will be return\n                'ease_of_reading_check': False,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","e65b52dd":"%%time\nif profiled_train_text_ease_of_reading is None:\n    profiled_train_text_ease_of_reading = NLPProfiler().apply_text_profiling(\n        training_dataset, 'text', \n        params={'high_level': False, # only sentiment analysis will be return\n                'ease_of_reading_check': True,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","4a262d1b":"%%time\nif profiled_train_text_grammar is None:\n    profiled_train_text_grammar = NLPProfiler().apply_text_profiling(\n        training_dataset, 'text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': True,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","343a876c":"%%time\nif profiled_train_text_spelling is None:\n    profiled_train_text_spelling = NLPProfiler().apply_text_profiling(\n        training_dataset, 'text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': True,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","44f9d141":"%%time\nforce_generate = True\nif (profiled_train_text_granular is None) or force_generate:\n    profiled_train_text_granular = NLPProfiler().apply_text_profiling(\n        training_dataset, 'text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': True,                 \n                'parallelisation_method': 'using_swifter'}\n    )","a48a1f4d":"profiled_train_text = pd.concat([training_dataset['text'], profiled_train_text_granular, profiled_train_text_sentiment, \n                                 profiled_train_text_ease_of_reading, profiled_train_text_grammar, profiled_train_text_spelling], axis=1)","5a232ce4":"profiled_train_text","76fe76c0":"%%time\nsave_to_csv_file(profiled_train_text_sentiment, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_text_sentiment.csv')\nsave_to_csv_file(profiled_train_text_ease_of_reading, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_text_ease_of_reading.csv')\nsave_to_csv_file(profiled_train_text_grammar, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_text_grammar_check.csv')\nsave_to_csv_file(profiled_train_text_spelling, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_text_spelling_check.csv')\nsave_to_csv_file(profiled_train_text_granular, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_text_granular_features.csv')","dbe07432":"del profiled_train_text_sentiment, profiled_train_text_ease_of_reading, profiled_train_text_grammar, \ndel profiled_train_text_spelling, profiled_train_text_granular\ngc.collect()","daafd392":"profiled_train_selected_text_sentiment = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_selected_text_sentiment.csv')\nprofiled_train_selected_text_ease_of_reading = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_selected_text_ease_of_reading.csv')\nprofiled_train_selected_text_grammar = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_selected_text_grammar_check.csv')\nprofiled_train_selected_text_spelling = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_selected_text_spelling_check.csv')\nprofiled_train_selected_text_granular = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_train_selected_text_granular_features.csv')","b894ade0":"%%time\nif profiled_train_selected_text_sentiment is None:\n    profiled_train_selected_text_sentiment = NLPProfiler().apply_text_profiling(\n        training_dataset, 'selected_text', \n        params={'high_level': True, # only sentiment analysis will be return\n                'ease_of_reading_check': False,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","19dd8680":"%%time\nif profiled_train_selected_text_ease_of_reading is None:\n    profiled_train_selected_text_ease_of_reading = NLPProfiler().apply_text_profiling(\n        training_dataset, 'selected_text', \n        params={'high_level': False, \n                'ease_of_reading_check': True,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","72779f59":"%%time\nif profiled_train_selected_text_grammar is None:\n    profiled_train_selected_text_grammar = NLPProfiler().apply_text_profiling(\n        training_dataset, 'selected_text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': True,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","9bb54065":"%%time\nif profiled_train_selected_text_spelling is None:\n    profiled_train_selected_text_spelling = NLPProfiler().apply_text_profiling(\n        training_dataset, 'selected_text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': True,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","adb9dbe0":"%%time\nforce_generate = True\nif (profiled_train_selected_text_granular is None) or force_generate:\n    profiled_train_selected_text_granular = NLPProfiler().apply_text_profiling(\n        training_dataset, 'selected_text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': True,                 \n                'parallelisation_method': 'using_swifter'}\n    )","b83f48bb":"profiled_train_selected_text = pd.concat([training_dataset['selected_text'], profiled_train_selected_text_granular,\n                                          profiled_train_selected_text_sentiment, profiled_train_selected_text_ease_of_reading, \n                                          profiled_train_selected_text_grammar, profiled_train_selected_text_spelling], axis=1)","bc80a7ae":"profiled_train_selected_text","a024bcca":"%%time\nsave_to_csv_file(profiled_train_selected_text_sentiment, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_selected_text_sentiment.csv', 'selected_text')\nsave_to_csv_file(profiled_train_selected_text_ease_of_reading, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_selected_text_ease_of_reading.csv', 'selected_text')\nsave_to_csv_file(profiled_train_selected_text_grammar, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_selected_text_grammar_check.csv', 'selected_text')\nsave_to_csv_file(profiled_train_selected_text_spelling, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_selected_text_spelling_check.csv', 'selected_text')\nsave_to_csv_file(profiled_train_selected_text_granular, f'{DATASET_UPLOAD_FOLDER}\/profiled_train_selected_text_granular_features.csv', 'selected_text')","a218743a":"del profiled_train_selected_text_sentiment, profiled_train_selected_text_ease_of_reading, profiled_train_selected_text_grammar\ndel profiled_train_selected_text_spelling, profiled_train_selected_text_granular\ngc.collect()","74025f7b":"profiled_test_text_sentiment = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_test_text_sentiment.csv')\nprofiled_test_text_ease_of_reading = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_test_text_ease_of_reading.csv')\nprofiled_test_text_grammar = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_test_text_grammar_check.csv')\nprofiled_test_text_spelling = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_test_text_spelling_check.csv')\nprofiled_test_text_granular = load_csv_if_exists(f'{EXTENDED_DATA_FOLDER}\/profiled_test_text_granular_features.csv')","792e60b7":"%%time\nif profiled_test_text_sentiment is None:\n    profiled_test_text_sentiment = NLPProfiler().apply_text_profiling(\n        test_dataset, 'text', \n        params={'high_level': True, # only sentiment analysis will be return\n                'ease_of_reading_check': False,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","9c161403":"%%time\nif profiled_test_text_ease_of_reading is None:\n    profiled_test_text_ease_of_reading = NLPProfiler().apply_text_profiling(\n        test_dataset, 'text', \n        params={'high_level': False,\n                'ease_of_reading_check': True,\n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","34593b2a":"%%time\nif profiled_test_text_grammar is None:\n    profiled_test_text_grammar = NLPProfiler().apply_text_profiling(\n        test_dataset, 'text', \n        params={'high_level': False, \n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': True,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","95e0a1fd":"%%time\nif profiled_test_text_spelling is None:\n    profiled_test_text_spelling = NLPProfiler().apply_text_profiling(\n        test_dataset, 'text', \n        params={'high_level': False, \n                'ease_of_reading_check': False,                \n                'spelling_check': True,\n                'grammar_check': False,\n                'granular': False,                 \n                'parallelisation_method': 'using_swifter'}\n    )","709b1d33":"%%time\nforce_generate = True\nif (profiled_test_text_granular is None) or force_generate:\n    profiled_test_text_granular = NLPProfiler().apply_text_profiling(\n        test_dataset, 'text', \n        params={'high_level': False,\n                'ease_of_reading_check': False,                \n                'spelling_check': False,\n                'grammar_check': False,\n                'granular': True,                 \n                'parallelisation_method': 'using_swifter'}\n    )","dece8106":"profiled_test_text = pd.concat([test_dataset['text'], profiled_test_text_granular, profiled_test_text_sentiment, \n                                profiled_test_text_ease_of_reading, profiled_test_text_grammar, profiled_test_text_spelling], axis=1)","1c966f74":"profiled_test_text","36f8dbbd":"save_to_csv_file(profiled_test_text_sentiment, f'{DATASET_UPLOAD_FOLDER}\/profiled_test_text_sentiment.csv')\nsave_to_csv_file(profiled_test_text_ease_of_reading, f'{DATASET_UPLOAD_FOLDER}\/profiled_test_text_ease_of_reading.csv')\nsave_to_csv_file(profiled_test_text_grammar, f'{DATASET_UPLOAD_FOLDER}\/profiled_test_text_grammar_check.csv')\nsave_to_csv_file(profiled_test_text_spelling, f'{DATASET_UPLOAD_FOLDER}\/profiled_test_text_spelling_check.csv')\nsave_to_csv_file(profiled_test_text_granular, f'{DATASET_UPLOAD_FOLDER}\/profiled_test_text_granular_features.csv')","7f060596":"del profiled_test_text_sentiment, profiled_test_text_ease_of_reading, profiled_test_text_grammar\ndel profiled_test_text_spelling, profiled_test_text_granular\ngc.collect()","0091d4cb":"from kaggle_secrets import UserSecretsClient\nuser_secrets = UserSecretsClient()\n\nimport os\nos.environ['KAGGLE_KEY'] = user_secrets.get_secret(\"KAGGLE_KEY\")\nos.environ['KAGGLE_USERNAME'] = user_secrets.get_secret(\"KAGGLE_USERNAME\")","0d9c1ede":"import kaggle\nkaggle.api.authenticate()","e5278536":"OWNER_SLUG='neomatrix369'\nDATASET_SLUG='tweet-sentiment-extraction-extended'\ndataset_metadata = kaggle.api.metadata_get(OWNER_SLUG, DATASET_SLUG)\ndataset_metadata['id'] = dataset_metadata[\"ownerUser\"] + \"\/\" + dataset_metadata['datasetSlug']\ndataset_metadata['id_no'] = dataset_metadata['datasetId']\nimport json\nwith open(f'{DATASET_UPLOAD_FOLDER}\/dataset-metadata.json', 'w') as file:\n    json.dump(dataset_metadata, file, indent=4)","0786f409":"%%time\n# !kaggle datasets version -m \"Updating datasets\" -p \/kaggle\/working\/upload\nkaggle.api.dataset_create_version(DATASET_UPLOAD_FOLDER, 'Updating datasets')","47738ce5":"## Uploading newly created\/updated csv to your Kaggle Dataset\n\nSetup your local environment with your Kaggle login details (`KAGGLE_KEY` and `KAGGLE_USERNAME`).","123ed46f":"Using the kaggle Python client login, into your account from within the kernel.","ab9414aa":"Finally call the dataset_create_version() api and pass it the folder where the metadata file exists and also where your .csv and .fth file(s) - those file(s) that you would like to upload into your existing Dataset (as a new version).","95c24e37":"### Prequels\/sequels\n\n- **FastChai sessions: Tweet Sentiment Extraction (data-prep) | [Extended Dataset](https:\/\/www.kaggle.com\/neomatrix369\/tweet-sentiment-extraction-extended)**\n- [FastChai sessions: Tweet Sentiment Extraction (analysis)](https:\/\/www.kaggle.com\/neomatrix369\/fastchai-tweet-sentiment-extraction-analysis\/)","315e32cc":"Get the metadata for the dataset you have already created manually - it's best to manually create it and upload the initial csv file(s) into it, to avoid subsequent issues with updating the dataset (as seen during my own end-to-end cycle).\n\nSave the metadata file as a json file but before that, add\/update two keys id and id_no with the respective details as shown below and then save it.","2b79b505":"### Prequels\/sequels\n\n- **FastChai sessions: Tweet Sentiment Extraction (data-prep) | [Extended Dataset](https:\/\/www.kaggle.com\/neomatrix369\/tweet-sentiment-extraction-extended)**\n- [FastChai sessions: Tweet Sentiment Extraction (analysis)](https:\/\/www.kaggle.com\/neomatrix369\/fastchai-tweet-sentiment-extraction-analysis\/)\n","e4371605":"## Training dataset: text column","ea29d66f":"## Training dataset: selected_text column","aefd2497":"## Test dataset: text column"}}