{"cell_type":{"a6a0be65":"code","5a0b443d":"code","00b1b304":"code","d82e3269":"code","bbaaf963":"code","12d1e51e":"code","a9bd74aa":"code","da10782d":"code","c8eb38f8":"code","58575b79":"code","85b497b2":"code","c78d5d48":"code","e716f966":"code","f8438ba9":"code","325a6809":"code","a39590f4":"code","81e462cb":"code","4801797b":"code","321ffe15":"code","f67d0624":"code","40692ebe":"code","95f551ea":"markdown","3942ae07":"markdown","2670e04b":"markdown","7fd59616":"markdown","2ea4acd0":"markdown","0d39dbdc":"markdown","fe3331ba":"markdown","5409bee2":"markdown","5c52242c":"markdown","2eb51bdb":"markdown","db621cc1":"markdown","da0bb5fe":"markdown","fabf7ec4":"markdown","7ad8d7fa":"markdown","e1015a53":"markdown","84ae799c":"markdown","ee36a23c":"markdown","ae7e4608":"markdown","dcd036d2":"markdown","0af1e2f3":"markdown","b8f1d50e":"markdown","d62b4258":"markdown","83d9ae4b":"markdown","2355414b":"markdown","07be8680":"markdown","2305a779":"markdown","51acdf6e":"markdown","b2787f11":"markdown"},"source":{"a6a0be65":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","5a0b443d":"import numpy as np \nimport pandas as pd \nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport pandas_profiling\nimport datetime as dt\nfrom plotly.subplots import make_subplots\nimport matplotlib.pyplot as plt","00b1b304":"data = pd.read_csv('..\/input\/us-police-shootings\/shootings.csv')\ndel data['id']\ndata.head()","d82e3269":"data.isna().sum()","bbaaf963":"data.dtypes","12d1e51e":"data['date'] = pd.to_datetime(data['date'])","a9bd74aa":"df = data.copy()\ndf['death'] = 1 \n\ndf['date'] = pd.to_datetime(data['date'])\ndf['year'] = df['date'].dt.year\ndf['month'] = df['date'].dt.month\ndf['day'] = df['date'].dt.day","da10782d":"num_var = []\n\nfor col in df.columns:\n    if df[col].dtype != 'O':\n        num_var.append(col)","c8eb38f8":"df[num_var].head()","58575b79":"df['year-month'] = df['date'].map(lambda x: x.strftime('%Y-%m'))\ndf1 = df.groupby('year-month').count().reset_index()[['year-month','death']]\n\nfig = go.Figure(go.Bar(\n    x=df1['year-month'],y=df1['death'],\n    marker={'color': df1['death'], \n    'colorscale': 'Viridis'},  \n    text=df1['death'],\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='No of deaths (2015-2020)',yaxis_title=\"no. of deaths\", xaxis_title=\"Months with Year\")\nfig.show()","85b497b2":"working_col = ['date', 'manner_of_death', 'armed','age', 'gender','race','city', 'state', 'signs_of_mental_illness',\n              'threat_level', 'flee', 'body_camera', 'arms_category']\nweek_day_dict = {0:'Sun',\n                1: 'Mon',\n                2: 'Tue',\n                3: 'Wed',\n                4: 'Thrus',\n                5: 'Fri',\n                6: 'Sat'}\nmonth_dict = {1:'Jan', \n              2: 'Feb',\n              3: 'Mar',\n              4: 'Apr',\n              5: 'May',\n              6: 'Jun',\n              7: 'Jul',\n              8: 'Aug',\n              9: 'Sept',\n              10: 'Oct',\n              11: 'Nov',\n              12: 'Dec',\n             }","c78d5d48":"shooting_per_year = working_df['year'].unique()\nyear_count = working_df['year'].value_counts().sort_index().values\n\nfig = go.Figure(go.Bar(\n    x=shooting_per_year ,y=year_count, \n    marker={ 'color': shooting_per_year, \n             'colorscale': 'Viridis'},  \n    text=year_count,\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='Number of Shooting per Year',xaxis_title=\"Year\",yaxis_title=\"Number of Shootings\", width=700)\nfig.show()","e716f966":"temp_df = working_df[['month','year','death']].groupby(['month', 'year']).count()\ntemp_df.rename(columns={'death':'deaths'},inplace=True)\ntemp_df.reset_index(inplace=True)\n\nfig = make_subplots(rows=4, cols=3,\n                   subplot_titles=(list(month_dict.values())))  # Subplot titles\n\nfor month in range(1,13):\n    df = temp_df[temp_df['month']==month]\n    row=((month-1) \/\/ 3 )+1\n    col = (month) - (row-1)*3\n    \n    fig.add_trace(go.Bar(\n                        x=temp_df['year'],\n                        y=df['deaths'],\n                        name=month,  \n                    ), \n                    row=row, col=col\n                 )\n \n\nfig.update_layout(height=1600, title_text=\"Month \")\nfig.show()","f8438ba9":"df = working_df[['week_day','death']].groupby('week_day').count().rename(columns={'death':'death'})\ndf.index = df.index.map(week_day_dict)\n\nfig = go.Figure(go.Bar(\n    x=df.index,y=df['death'],\n    marker={'color': df['death'], \n    'colorscale': 'Viridis'},  \n    text=df['death'],\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='Shooting with respect to week days',xaxis_title=\"Shooting Count\",yaxis_title=\"Week Days\", width=700)\nfig.show()","325a6809":"df = working_df[['gender','signs_of_mental_illness','manner_of_death','flee','death']].groupby(['gender','signs_of_mental_illness','manner_of_death','flee']).agg('count').reset_index()\ndf = df.rename(columns={'death':'death'})\n\nfig = px.bar(df, x=\"gender\",y='death', color=\"manner_of_death\",barmode=\"group\",\n             facet_row=\"signs_of_mental_illness\", facet_col=\"flee\",\n             )\nfig.update_layout(title_text='Number of Shootings differentiated by gender, flee, mental illness and manner of death.', height=700)\nfig.show()","a39590f4":"df = working_df.armed.value_counts()[:12].to_frame()\ndf.drop(['unknown', 'unarmed'], inplace=True)\ndf.reset_index(inplace=True)\ndf.rename(columns={'index':'armed', 'armed':'count'},inplace=True)\n\nfig = go.Figure(go.Bar(\n    x=df['armed'], y=df['count'],\n    marker={'color': df['count'], \n    'colorscale': 'Viridis'},  \n    text=df['count'].astype(str),\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='Top 10 most used armed used while shooting',xaxis_title=\"Armed\",yaxis_title=\"Number of Shooting\")\nfig.show()","81e462cb":"fig = go.Figure(data=[go.Histogram(x=working_df['age'], \n                                  marker_color=\"green\",\n                      xbins=dict(\n                      start=0,\n                      end=100, \n                      size=10   \n                      ))])\nfig.update_layout(title=\"Distribution of shooted person Age\",xaxis_title=\"Age\",yaxis_title=\"Counts\", width=600)\nfig.show()","4801797b":"df = df[['state','death']].groupby('state').agg('count').reset_index()\n\nfig = go.Figure(go.Choropleth(\n    locations=df['state'],\n    z=df['death'].astype(int),\n    locationmode='USA-states',\n    colorscale='Reds',\n    autocolorscale=False,\n    text=df['state'],\n    marker_line_color='black', \n    showscale = False,\n))\nfig.update_layout(\n    title_text='US Police Shooting States (2015-2020)',\n    title_x=0.5,\n    geo = dict(\n        scope='usa',\n        projection=go.layout.geo.Projection(type = 'albers usa'),\n        showlakes=False, # lakes\n        lakecolor='rgb(255, 255, 255)'))\nfig.update_layout(\n    template=\"plotly_dark\", width=1000)\nfig.show()","321ffe15":"df = working_df[['month','year', 'death']].groupby(['year', 'month']).agg('count').reset_index()\ndf.month = df.month.map(month_dict)\ncolors = ['yellow','green','purple','gold','orange', 'red']\n\nfig = go.Figure()\nfor i in df.year.unique():\n    w_df = df[df['year']==i]\n    fig.add_trace(go.Scatter(x=list(month_dict.values()), y=w_df['death'], name = str(i),\n                line=dict(color=colors[i-2015], width=4)))\n    \n    \nfig.update_layout(title='Number of Shooting every year comparing with month',xaxis_title=\"Months\",yaxis_title=\"Number of Shoot\")\nfig.show()","f67d0624":"df = working_df.city.value_counts()[:15].to_frame().reset_index().rename(columns={'index':'city', 'city':'deaths'})\n\nfig = go.Figure(go.Bar(\n    x=df['city'],y=df['deaths'],\n    marker={'color': df['deaths'], \n    'colorscale': 'Reds'},  \n    text=df['deaths'],\n    textposition = \"outside\",\n))\nfig.update_layout(title_text='Top 15 Cities where most Shooting Encountered',xaxis_title=\"City\",yaxis_title=\"Number of Deaths\",\n                 width=700)\nfig.show()","40692ebe":"df = working_df['arms_category'].value_counts().to_frame().reset_index().rename(columns={'index':'arms_category', 'arms_category':'count'})\n\nfig = go.Figure([go.Pie(labels=df['arms_category'], values=df['count']\n                        ,hole=0.3)])  # can change the size of hole \n\nfig.update_traces(hoverinfo='label+percent', textinfo='percent', textfont_size=15)\nfig.update_layout(title=\"Used Arms Categories\",title_x=0.5)\nfig.show()","95f551ea":"# US Police Shooting Analysis","3942ae07":"### Top 15 Cities where most Shooting Encountered","2670e04b":"**<h3 style=\"color:brown;\">Please Upvote my kernel if you think it is helpful and liked my work.<\/h3>**","7fd59616":"**<h2 style=\"color:brown;\">Please Upvote my kernel if you think it is helpful and liked my work.<\/h2>**","2ea4acd0":"### Remark\n* Comparing the data from last 2-3 years the shooting gone done except for oct-dec months","0d39dbdc":"### Used Armed Categories by US Police","fe3331ba":"### Shooting with respect to week days","5409bee2":"### Shooting VS Year","5c52242c":"### Remark\n* Guns are most used follwed by knife","2eb51bdb":"### Number of Shooting every year comparing with month","db621cc1":"### In Data Analysis We will Analyze To Find out the below stuff\n* Missing Values\n* Types of Variables and Conversion\n* All The Numerical Variables\n* Distribution of the Numerical Variables\n* Categorical Variables\n* Cardinality of Categorical Variables\n* Outliers","da0bb5fe":"<h1> Objective <\/h1>\n<p>The aim of this kernal is to provide a visualisation and analysis of US Police Shooting dataset from 2015-2020.<\/p>","fabf7ec4":"## VISUALISATION","7ad8d7fa":"## Reading Dataset","e1015a53":"![us_police.jpg](attachment:us_police.jpg)","84ae799c":"### Number of Shootings differentiated by gender, flee, mental illness and manner of death.","ee36a23c":"### Remark\n* It is clearly visable that not-fleeing male are been shotted most\n* The mental criminals are less affected","ae7e4608":"## Missing values","dcd036d2":"### Remark\n* The shooting frequency decrease by year","0af1e2f3":"## Table of content\n\n* Reading required dataset.\n* Visualisation using Pandas Profiling.\n* VISUALISATION\n 1. Shooting VS Year\n *  Shooting in different months as compared to years\n *  Shooting with respect to week days\n *  Number of Shootings differentiated by gender, flee, mental illness and manner of death.\n *  Top 10 most used armed used while shooting\n *  Distribution of shooted person Age\n *  US Police Shooting States(2015-2020)\n *  Number of Shooting every year comparing with month\n *  Top 15 Cities where most Shooting Encountered\n *  Used Armed Categories by US Police","b8f1d50e":"## Distribution of the Numerical Variables","d62b4258":"### US Police Shooting States(2015-2020)","83d9ae4b":"### Adding new columns for data visualisation purpose","2355414b":"### Top 10 most used armed used while shooting","07be8680":"## Types of Variables","2305a779":"## All The Numerical Variables","51acdf6e":"### Shooting in different months as compared to years","b2787f11":"### Distribution of shooted person Age"}}