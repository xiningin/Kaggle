{"cell_type":{"4804cdfd":"code","4129d707":"code","b159d51c":"code","8ba96fb3":"code","c471b18f":"code","ff0224d1":"code","cd81ed9f":"code","f307625f":"code","aaf3b8f4":"code","4f7a3dd5":"code","17b08270":"code","24c9b9a6":"code","09fab7ca":"code","80d4a6ec":"code","bc2e6be5":"code","d7e7dfc2":"code","6aa43857":"code","290df1e7":"code","ba131632":"code","a5d9ed51":"code","2041c04b":"markdown","6f3fa679":"markdown","3022e2f8":"markdown","0ce68bf5":"markdown","12a1288f":"markdown","499c678e":"markdown","9c6da29c":"markdown","0a97e366":"markdown","630df463":"markdown","e7e5b5c4":"markdown","171de514":"markdown","80447be1":"markdown","332bb40a":"markdown","8c32b673":"markdown","3e056cb4":"markdown","f0547832":"markdown","23e0a5e7":"markdown","e8ee313b":"markdown","c0a6a4eb":"markdown","fa17a2f8":"markdown","df722dde":"markdown","b474333e":"markdown","f848af8b":"markdown","0e486435":"markdown"},"source":{"4804cdfd":"import pandas as pd\nimport seaborn as sns\nimport re\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator","4129d707":"df = pd.read_csv('\/kaggle\/input\/ufo-sightings-approx-100000\/nuforc_reports.csv')","b159d51c":"print(df.shape)\ndf.head()","8ba96fb3":"df.info()","c471b18f":"print(df.isna().sum())\nprint(df.isna().sum().sum())","ff0224d1":"# Extract the date information from the stats column, we'll save this in a new column called date, we'll also create a drop column with access info that we will drop later\ndf[['drop', 'date']] = df['stats'].str.extract(r'^(?P<drop>Occurred : )(?P<date>[0-9]{1,2}[\/][0-9]{1,2}[\/][0-9]{4})')","cd81ed9f":"# Check the output to see if we managed to extract the date\ndf.head()","f307625f":"#Drop all access columns that do not hold any usefull information for further analysis\ndf.drop(columns=['date_time', 'stats', 'report_link', 'text', 'posted', 'drop'], inplace=True)","aaf3b8f4":"# Set the correct data type for the columns\ndf['date'] = pd.to_datetime(df['date'], errors = 'coerce')\ndf['summary'] = df['summary'].astype(str)","4f7a3dd5":"sns.set_theme(style='darkgrid')\nplt.figure(figsize=(15, 7))\n\nfig = sns.kdeplot(\n    data=df,\n    x='date',\n    fill=True\n)\nplt.title(\n    'UFO sightings over the years',\n    fontdict={\n        'fontsize': 16\n    }\n)","17b08270":"df.sort_values(by=['date'], ascending=True).head(10)","24c9b9a6":"plt.figure(figsize=(15, 15))\nsns.countplot(\n    data=df,\n    y='state',\n    order=df['state'].value_counts().index\n)\n\nplt.title(\n    'UFO sightings by state',\n    fontdict={\n        'fontsize': 16\n    }\n)","09fab7ca":"state_list = df.groupby('state')['state'].count().reset_index(name='count').nlargest(10, columns=['count'])\n\n\nplt.figure(figsize=(15, 7))\n\nsns.kdeplot(\n    data=df[df['state'].isin(state_list['state'])],\n    x='date',\n    hue='state'\n)\n\nplt.title(\n    'UFO sightings over the years by state',\n    fontdict={\n        'fontsize': 16\n    }\n)","80d4a6ec":"plt.figure(figsize=(15, 8))\n\nsns.countplot(\n    data=df,\n    y='shape',\n    order=df['shape'].value_counts().index\n)\n\nplt.title(\n    'UFO sightings by shape',\n    fontdict={\n        'fontsize': 16\n    }\n)","bc2e6be5":"shape_list = df.groupby('shape')['shape'].count().reset_index(name='count').nlargest(10, columns=['count'])\n\nplt.figure(figsize=(15, 7))\n\nsns.kdeplot(\n    data=df[df['shape'].isin(shape_list['shape'])],\n    x='date',\n    hue='shape'\n)\n\nplt.title(\n    'UFO sightings over the years by shape',\n    fontdict={\n        'fontsize': 16\n    }\n)","d7e7dfc2":"# Create a temporary dataframe with no missing values\ndf_temp = df.copy()\ndf_temp = df_temp.dropna(subset=['date'])\ndf_temp['year'] = pd.DatetimeIndex(df_temp['date']).year","6aa43857":"fig = px.choropleth(\n    df_temp.groupby(['state', 'year'])['year'].count().reset_index(name='Sightings').sort_values(by=['year'], ascending=True),\n    locations=\"state\",\n    color='Sightings',\n    color_continuous_scale='aggrnyl',\n    locationmode='USA-states',\n    scope=\"usa\",\n    animation_frame=\"year\",\n    animation_group='state',\n    height=700\n)\n\nfig.update_layout(\n    title_text='UFO sightings over the years',\n\n)\n\nfig.show()","290df1e7":"fig = px.choropleth(\n    df_temp.groupby(['state'])['state'].count().reset_index(name='Sightings'),\n    locations='state',\n    color='Sightings',\n    color_continuous_scale='aggrnyl',\n    locationmode = 'USA-states',\n    height=700\n)\n\nfig.update_layout(\n    title_text = 'Total UFO sightings by state',\n    geo_scope='usa', # limite map scope to USA\n)\n\nfig.show()","ba131632":"df_temp = df_temp.dropna(subset=['city_latitude', 'city_longitude'])\nfig = px.scatter_geo(\n    df_temp.sort_values(by=['year'],ascending=True),\n    lat='city_latitude',\n    lon='city_longitude',\n    locationmode='USA-states',\n    scope=\"usa\",\n    animation_frame=\"year\",\n    animation_group='state',\n    height=700\n)\n\nfig.update_layout(\n    title_text='Recorded UFO location over the years',\n)\n\nfig.show()","a5d9ed51":"text = \" \".join(df['summary'])\nwordcloud = WordCloud(\n    background_color=\"white\",\n    width=1600, \n    height=800\n).generate(text)\n\nplt.figure(figsize=(15, 7))\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.margins(x=0, y=0)\nplt.show()","2041c04b":"It seems that by far the most UFO sightings happen in california, it would be interesting for us to find out if this has always been the case over the years or if this is a recent development","6f3fa679":"### Interactive maps","3022e2f8":"### Data inspection","0ce68bf5":"#### Setting the correct data type","12a1288f":"We're missing a total of 45.858 values. This is quite a significant number. <\/br>\nMost of these values are in the city lat and long values, we can simply drop these values or generate these based on the city names.<\/br>\nFor the missing date_time values we'll check if we can extract these from the stats column.<\/br>\nAs the summary and text column hold similar info we'll drop the text column as it has more missing values.<\/br>\n","499c678e":"### Date exploration","9c6da29c":"It seems that most of the recorded UFO sightings consisted of a light and a circle shaped object.","0a97e366":"The above graph shows us the exact location of the recorded UFO sightings per year. The graph paints a picture of the massive increase in sightings since the year 2000","630df463":"It seems that most of california's recorded UFO sightings have been from after the year 2000, this is similar to the other states. However we also see a fair amount of records from before this period.","e7e5b5c4":"## Loading the necessary libraries","171de514":"# The visualisation of UFO movements over the years in the USA\n### A story about UFO sightings over the years in the USA\n\n![](https:\/\/media-cldnry.s-nbcnews.com\/image\/upload\/t_nbcnews-fp-1024-512,f_auto,q_auto:best\/newscms\/2021_20\/3476829\/210521-ufo-new-mexico-ew-453p.jpg)\n","80447be1":"### State exploration","332bb40a":"### Shape exploration","8c32b673":"### Data loading","3e056cb4":"### Data cleaning","f0547832":"## Data loading and cleaning","23e0a5e7":"## Exploratory Data Analysis","e8ee313b":"The Above graph shows us the total amount of UFO sightings by state, from the year 1721 to 2019. This clearly shows that most UFO recordings take place in California","c0a6a4eb":"#### dropping records","fa17a2f8":"It seems that the earliest recorded UFO sightings have been from the beginning of the 18th century. **We even have a record of Thomas Jefferson**.\n\nMost recorded UFO sightings have been recorded after the year 2000","df722dde":"The wordcloud paints a picture of the summary of all the recorded UFO sightings.","b474333e":"#### Filling missing data with regular expressions","f848af8b":"### Wordcloud","0e486435":"The above visualisation shows us the UFO sightings per state over the years since 1721 to 2019. "}}