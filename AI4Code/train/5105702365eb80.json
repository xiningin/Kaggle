{"cell_type":{"bdf22756":"code","7c22d9fc":"code","3f932fa6":"code","d6fd9953":"code","21382cc0":"code","29420448":"code","21b2c8dd":"code","6c83ddd4":"code","b52bbfa7":"markdown","a18f3e86":"markdown","a3e77327":"markdown"},"source":{"bdf22756":"import numpy as np\nimport pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots","7c22d9fc":"df = pd.read_csv(\"..\/input\/us-electoral-college-votes-per-state-17882020\/Electoral_College.csv\")\nstate_code = pd.read_csv(\"..\/input\/two-letter-us-state-codes\/StateCode.csv\")","3f932fa6":"df.head(10)","d6fd9953":"total_votes = df.groupby(\"Year\")[\"Votes\"].sum().to_dict()\ntotal_states = df.dropna().groupby(\"Year\").count()['State'].to_dict()","21382cc0":"def calc_prop(row):\n    if row['Votes'] != np.nan:\n        prop = row['Votes']\/total_votes[row[\"Year\"]] * 100\n        return prop\n    return np.nan\n\ndf['VoteProp'] = df.apply(calc_prop, axis = 1)","29420448":"map_state = dict(zip(list(state_code['State'].values),\n                     list(state_code['Code'].values)))","21b2c8dd":"fig = make_subplots(specs=[[{\"secondary_y\": True}]])\n\nfig.add_trace(go.Bar(x = list(total_votes.keys()), \n                         y = list(total_states.values()),\n                         name = 'Total number of States in Electoral College over time',\n                         opacity = 0.6),\n                         secondary_y=False)\n\nfig.add_trace(go.Scatter(x = list(total_votes.keys()), \n                         y = list(total_votes.values()),\n                         mode='lines',\n                         name = 'Total number of Electoral College votes over time'),\n                         secondary_y = True)\n\nfig.update_layout(\n    title = \"<b>Number of States in and Votes of Electoral College over time<\/b>\",\n    xaxis_title = \"Year\",\n    plot_bgcolor='white')","6c83ddd4":"px.choropleth(data_frame = df,\n              locations= df['State'].map(map_state),\n              color = df['VoteProp'],\n              locationmode='USA-states',\n              scope = 'usa', animation_frame= \"Year\",\n              color_continuous_scale='YlGnBu',\n              title = '<b>Geographic distribution of % votes by state<\/b>',\n              height=600)","b52bbfa7":"**References and thanks to:**\n* https:\/\/www.kaggle.com\/raenish\/cheatsheet-100-plotly-part-2-advanced\n* The creator of this dataset","a18f3e86":"## Libraries","a3e77327":"## Visualisations"}}