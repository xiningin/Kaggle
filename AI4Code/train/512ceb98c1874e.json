{"cell_type":{"7cecb652":"code","526fdeae":"code","b9606ff1":"code","df2cb282":"code","d1f17e2c":"code","d400df90":"code","2a05b3a4":"code","687c5d7d":"code","c2a8ebad":"code","e329c717":"code","9b7b93da":"code","ba9a2774":"code","469595cf":"code","97ae6a1d":"code","04ce1d0c":"code","97902101":"code","63374bf8":"code","0d4ca290":"code","c57e03b2":"code","10c92047":"code","f9255870":"code","b118ffc1":"code","77cd07eb":"code","dc9427ce":"code","68105188":"code","2bf3de2c":"code","87dc0ee7":"code","b3d41341":"code","e7b06b52":"code","7f5cc037":"code","e40c0db4":"code","0058ca45":"code","3e4de286":"code","4101f0c0":"code","2531996a":"code","64115ca3":"code","f0d7404b":"code","fb63b072":"code","7459aa2c":"code","5c25bf68":"code","948bcce1":"code","450ea892":"code","a4cfc07e":"code","bb525c3d":"code","d53476b6":"code","1ef1fbcc":"code","8647c8fa":"markdown","8e610e66":"markdown","a253e35f":"markdown","56ca553f":"markdown","b8441f84":"markdown","ba16d495":"markdown","6e3ad74b":"markdown","04999a58":"markdown","c2bb3a8f":"markdown","53b5444c":"markdown","f4d09c69":"markdown"},"source":{"7cecb652":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sb\n%matplotlib inline","526fdeae":"solar = pd.read_csv('..\/input\/SolarEnergy\/SolarPrediction.csv')","b9606ff1":"solar.head()","df2cb282":"solar.info()","d1f17e2c":"solar['Time'] = pd.to_datetime(solar['Time'])","d400df90":"solar['Data'] = pd.to_datetime(solar['Data'])","2a05b3a4":"solar.info()","687c5d7d":"date = solar['Data']\nsolar['Day'] = solar['Data'].apply(lambda date: date.day)\nsolar['Month'] = solar['Data'].apply(lambda date: date.month)\nsolar['hour'] = solar['Time'].apply(lambda date: date.hour)","c2a8ebad":"solar.head()","e329c717":"solar = solar.drop(['UNIXTime','Time','Data','TimeSunRise','TimeSunSet'],axis=1)","9b7b93da":"solar.head()","ba9a2774":"solar_sorted = solar.pivot_table(index=['Month', 'Day','hour'],values= ['Radiation','Temperature','Pressure','Humidity','WindDirection(Degrees)','Speed'],aggfunc=np.mean)","469595cf":"solar_sorted","97ae6a1d":"sb.pairplot(solar_sorted)","04ce1d0c":"plt.figure(figsize = (12,8))\nsb.heatmap(solar_sorted.corr(),cmap='coolwarm',annot=True)\nplt.title('Correlations')","97902101":"solar_sorted.columns","63374bf8":"from sklearn.model_selection import train_test_split","0d4ca290":"X = solar_sorted[['Humidity', 'Pressure', 'Speed', 'Temperature', 'WindDirection(Degrees)']]\ny = solar_sorted['Radiation']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.33)","c57e03b2":"from sklearn.linear_model import LinearRegression","10c92047":"solar_linear = LinearRegression()","f9255870":"solar_linear.fit(X_test,y_test)","b118ffc1":"cdf =pd.DataFrame(solar_linear.coef_,X.columns,columns=['Coeffecient'])\ncdf","77cd07eb":"predictions = solar_linear.predict(X_test)","dc9427ce":"plt.scatter(y_test,predictions)","68105188":"from sklearn import metrics","2bf3de2c":"np.sqrt(metrics.mean_squared_error(y_test,predictions))","87dc0ee7":"metrics.r2_score(y_test,predictions)","b3d41341":"from sklearn.svm import SVR","e7b06b52":"solar_svr = SVR()","7f5cc037":"solar_svr.fit(X_train,y_train)","e40c0db4":"predictions_svr = solar_svr.predict(X_test)","0058ca45":"plt.scatter(y_test,predictions_svr)","3e4de286":"np.sqrt(metrics.mean_squared_error(y_test,predictions_svr))","4101f0c0":"metrics.r2_score(y_test,predictions_svr)","2531996a":"param_grid ={'C':[1000,2500,5000,7500,10000], 'gamma':[0.01,0.001,0.0001], 'kernel':['rbf']} \n#note the values I have selcted here have been obtained through an iterative trial and error process to tune the model, and the values shown are values I have found to be optimum.","64115ca3":"from sklearn.model_selection import GridSearchCV","f0d7404b":"grid = GridSearchCV(SVR(),param_grid,refit=True,verbose=3)","fb63b072":"grid.fit(X_train,y_train)","7459aa2c":"grid.best_params_","5c25bf68":"grid.best_estimator_","948bcce1":"solar_svr2 = SVR(C=2500,gamma=0.001)","450ea892":"solar_svr2.fit(X_train,y_train)","a4cfc07e":"predictions_svr2 = solar_svr2.predict(X_test)","bb525c3d":"plt.scatter(y_test,predictions_svr2)","d53476b6":"np.sqrt(metrics.mean_squared_error(y_test,predictions_svr2))","1ef1fbcc":"metrics.r2_score(y_test,predictions_svr2)","8647c8fa":"# __Solar Radiation Prediction with Linear Regression and SVR__","8e610e66":"## *Train test split of Data*","a253e35f":"I am just using two different regression algorithm to check the performance between them. While, the corelation between temperature and Radiation is obvious. So for that a simple linear regression will show favorable rsults. Hwoever, we can use a more complicated alogirthm\n(whcih I am going to use as SVR) to see if non linear relationships can be established between the parameters.","56ca553f":"## *SVR Grid Search -Optimization*","b8441f84":"## *Trying out SVR*","ba16d495":"## *Linear Regression* ","6e3ad74b":"## *Conclusion*","04999a58":"## *__Data Cleaning\/Processing__*","c2bb3a8f":"## *__Data Import and raw data exploration__*","53b5444c":"__To make sense of this Data and process it we will look at the hourly mean values and use that for the predictions__","f4d09c69":"The SVR when optimised, results in a better prediction \n\nThe results can be summarised as follows ;\n \n* Linear Regression  - RMSE = 190.45 W\/m2 and R2 = 0.6267\n* SVR(Optimised) - RMSE = 152.72 W\/m2 and R2 = 0.7491 \n\n\nOr some value similar to this\n"}}