{"cell_type":{"3150d7dc":"code","deaabc96":"code","3fe08ed2":"code","133f146d":"code","a200f3b0":"code","83d1fce7":"code","bad32a06":"code","056a99b4":"code","5e86a8af":"code","ddf20cff":"code","35cca327":"code","995e6756":"code","aca49447":"code","dfcfd1dc":"code","c01a9ec4":"code","ee5c93fd":"code","7730bf80":"code","d7174617":"code","28071b72":"code","4f03c4bc":"code","1fc917a9":"code","5537a43c":"code","03d91e96":"code","2a11d6ae":"code","3737fcd4":"code","94cf0222":"code","a7242252":"code","3202b9c7":"code","a3532c64":"code","9dcf97ef":"code","212014b3":"code","e5ef537a":"code","7dc9f193":"code","ec6f2b0a":"code","1f3e026e":"markdown","4381075a":"markdown","f37e6c2b":"markdown","9b0fbefe":"markdown","d84639e1":"markdown","018e7e97":"markdown","5d85a7a1":"markdown"},"source":{"3150d7dc":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","deaabc96":"sales_train = pd.read_csv(\"..\/input\/competitive-data-science-predict-future-sales\/sales_train.csv\")\nitems = pd.read_csv(\"..\/input\/competitive-data-science-predict-future-sales\/items.csv\")\n","3fe08ed2":"sales_train.head()","133f146d":"sales_train.tail()","a200f3b0":"items.head()","83d1fce7":"items=items.drop(\"item_name\",axis=1)","bad32a06":"items.head()","056a99b4":"train_data = pd.merge(sales_train, items, on='item_id')","5e86a8af":"train_data.head()","ddf20cff":"train = train_data","35cca327":"#Outlier De\u011ferleri Kald\u0131rd\u0131k\ntrain = train[train.item_price<100000]\ntrain = train[train.item_cnt_day<1001]","995e6756":"median = train[(train.shop_id==32)&(train.item_id==2973)&(train.date_block_num==4)&(train.item_price>0)].item_price.median()\ntrain.loc[train.item_price<0, 'item_price'] = median","aca49447":"import datetime\ntrain_data.date = train_data.date.apply(lambda x:datetime.datetime.strptime(x, \"%d.%m.%Y\"))","dfcfd1dc":"train_data.head()","c01a9ec4":"grouped = pd.DataFrame(train_data.groupby(['shop_id', 'date_block_num','item_id'])['item_cnt_day'].sum().reset_index())","ee5c93fd":"total_item_cnt_mounth = grouped.groupby('date_block_num')['item_cnt_day'].sum()","7730bf80":"#Total Shop Count:60\n#Total Mounth Count:34","d7174617":"from math import ceil\nfig, axes = plt.subplots(nrows=5, ncols=2, sharex=True, sharey=True, figsize=(16,20))\nnum_graph = 10\nid_per_graph = ceil(grouped.shop_id.max() \/ num_graph)\ncount = 0\nfor i in range(5):\n    for j in range(2):\n        sns.pointplot(x='date_block_num', y='item_cnt_day', hue='shop_id', data=grouped[np.logical_and(count*id_per_graph <= grouped['shop_id'], grouped['shop_id'] < (count+1)*id_per_graph)], ax=axes[i][j])\n        count += 1","28071b72":"print(total_item_cnt_mounth.head())","4f03c4bc":"total_item_cnt_mounth_np = total_item_cnt_mounth.to_numpy()\ntotal_item_cnt_mounth_np\nmounths = np.arange(34)\nmounths","1fc917a9":"plt.plot(mounths,total_item_cnt_mounth_np)\nplt.xlabel('Mounth')\nplt.ylabel('Total Sale Count')\nplt.show()","5537a43c":"from sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression","03d91e96":"X_train, X_test, y_train, y_test = train_test_split(mounths,total_item_cnt_mounth_np, test_size = 1\/3, random_state = 123, shuffle=1)","2a11d6ae":"X_train = X_train.reshape(-1, 1)\nX_test = X_test.reshape(-1, 1)\ny_train = y_train.reshape(-1, 1)\ny_test = y_test.reshape(-1, 1)","3737fcd4":"print(X_train.shape,X_test.shape,y_train.shape,y_test.shape)","94cf0222":"model = LinearRegression()\nmodel.fit(X_train, y_train)","a7242252":"model.score(X_train,y_train)","3202b9c7":"model.predict([[34]])","a3532c64":"pred = model.predict(X_test)","9dcf97ef":"df = pd.DataFrame({'Actual': y_test.flatten(), 'Predicted': pred.flatten()})","212014b3":"df","e5ef537a":"from sklearn.metrics import mean_squared_error\nfrom math import sqrt","7dc9f193":"mse = mean_squared_error(y_test, pred)\nmse","ec6f2b0a":"rmse = sqrt(mean_squared_error(y_test, pred))\nrmse","1f3e026e":"### Verinin G\u00f6rselle\u015ftirilmesi","4381075a":"### Liner Regresyon Modelimize g\u00f6re bir sonraki ayda yap\u0131lacak toplam \u00fcr\u00fcn sat\u0131\u015f\u0131 79248 olacakt\u0131r","f37e6c2b":"### B\u00fcy\u00fck Veri Analizine Giri\u015f Part-2","9b0fbefe":"### Load Data","d84639e1":"### \u0130sim Soyisim: Tayyip Mert Denizgez\n### Numara: 160201036\n### E-Posta: tdenizgez@gmail.com","018e7e97":"### 11-12 ve 23-24. aylarda sat\u0131\u015flar\u0131n peek yapt\u0131\u011f\u0131n\u0131 g\u00f6r\u00fcyoruz. Bu da demek oluyor ki m\u00fc\u015fteriler y\u0131l sonlar\u0131nda daha fazla \u00fcr\u00fcn almaktad\u0131r. ","5d85a7a1":"### Preprocess"}}