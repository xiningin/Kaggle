{"cell_type":{"3c36f316":"code","af6b0cae":"code","704aae2c":"code","e6149fab":"code","ac8ce694":"code","c5f6b41c":"code","5d8b629b":"code","3b5887e7":"code","b2f4c6bd":"code","1d960f0a":"code","78984757":"code","9db8a50c":"code","82709e33":"code","ffa1cfc3":"code","d00ae684":"markdown","ef777ec1":"markdown","19d0f67a":"markdown","d532523d":"markdown","f9ad9868":"markdown","666b5d10":"markdown","fd37cf4a":"markdown","b68c9e97":"markdown"},"source":{"3c36f316":"! pip install --quiet -U featuretools","af6b0cae":"import featuretools as ft\nimport numpy as np\nimport pandas as pd\npd.set_option(\"display.max_columns\", None)","704aae2c":"df = pd.read_csv('..\/input\/lending-club\/lending_club_loan_two.csv')\ndf['issue_d'] = pd.to_datetime(df['issue_d'])\ndf['earliest_cr_line'] = pd.to_datetime(df['earliest_cr_line'])\ndf = df[df['issue_d'].dt.year == 2016]","e6149fab":"df['loan_diff_years'] = round((df['issue_d'] - df['earliest_cr_line']).dt.days \/ 365, 1)","ac8ce694":"df['address'] = df['address'].apply(lambda x: x[-8:])\ndf[['state','zip_code']] = df['address'].str.split(expand=True)","c5f6b41c":"df['sub_grade'] = df['sub_grade'].apply(lambda x: x[-1:])","5d8b629b":"df.drop(columns=['address'], inplace=True)","3b5887e7":"es = ft.EntitySet(id = 'bank')\n\nes.entity_from_dataframe(\n    entity_id = 'data',\n    dataframe = df,\n    make_index = True,\n    index = 'index'\n)","b2f4c6bd":"es.plot()","1d960f0a":"feature_matrix, feature_defs = ft.dfs(\n    entityset = es,\n    target_entity = 'data',\n    trans_primitives = [\n        'add_numeric', \n        'multiply_numeric',\n        'divide_numeric',\n        'percentile'\n    ]\n)","78984757":"feature_matrix.head()","9db8a50c":"feature_defs","82709e33":"ft.get_valid_primitives(entityset = es, target_entity = 'data')","ffa1cfc3":"feature_matrix.to_csv(\"lending-with-FT.csv\")","d00ae684":"### Install & Load Libraries","ef777ec1":"#### Drop High Cardinality\/Unique Variables","19d0f67a":"### Manual Variables","d532523d":"#### ZipCode & State from Addresses","f9ad9868":"### Load Dataset","666b5d10":"#### Date diff beteween issued date & earliest credit line","fd37cf4a":"#### SubGrade","b68c9e97":"### Featuretools"}}