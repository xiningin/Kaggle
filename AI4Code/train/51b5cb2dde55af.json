{"cell_type":{"ee3143ee":"code","8159d58f":"code","ead79a94":"code","f319f57c":"code","4f62203d":"code","efdf0e01":"code","1e946e0f":"code","c095465b":"code","4c0c554b":"code","9fdd4866":"code","0990ba51":"code","6ea737fc":"code","fbca9fd5":"code","875707a1":"code","ec0ccc62":"code","2e436995":"code","4690972e":"code","9630540c":"code","e11ece3b":"code","3abbcfe5":"code","83197646":"code","22c542c2":"code","a3b2bf12":"code","c2a962f4":"code","741ec9bc":"code","a1ec6c57":"code","a67bd68b":"code","27fbe112":"code","349cb2be":"code","54f5ae15":"code","0d2bcffe":"code","e4461ab6":"code","88d77617":"code","d20429ac":"code","5a4fa3c3":"code","2d67eab0":"code","067852a4":"code","b9077d2b":"code","ccf4fb3a":"code","ac3a6d1b":"code","c0f0a3e9":"code","ca74a7c4":"code","edf9b36d":"code","6003ab0a":"code","e89ac191":"code","35bbf851":"code","69be446f":"code","e2a7f48c":"code","fcc3d040":"code","395c08b6":"code","3cd8c6e4":"code","3df1a3c5":"code","77c09b25":"markdown","3744188c":"markdown","cca35240":"markdown","2bcacbbc":"markdown","d521db27":"markdown","f5f271fe":"markdown","711c0482":"markdown","5d8af6e3":"markdown","6e3946fe":"markdown","634f7549":"markdown","b9175a4e":"markdown","2352e71f":"markdown","cfd61cdf":"markdown","8c2aeae0":"markdown","8b668d2b":"markdown"},"source":{"ee3143ee":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom numpy import loadtxt\nimport xgboost as xgb\nfrom xgboost import XGBClassifier\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.metrics import mean_squared_error","8159d58f":"games   = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/games.csv')\nplayers = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/players.csv')\nplays   = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/plays.csv')\n\nweek_1  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week1.csv')\nweek_2  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week2.csv')\nweek_3  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week3.csv')\nweek_4  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week4.csv')\nweek_5  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week5.csv')\nweek_6  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week6.csv')\nweek_7  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week7.csv')\nweek_8  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week8.csv')\nweek_9  = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week9.csv')\n\nweek_10 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week10.csv')\nweek_11 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week11.csv')\nweek_12 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week12.csv')\nweek_13 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week13.csv')\nweek_14 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week14.csv')\nweek_15 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week15.csv')\nweek_16 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week16.csv')\nweek_17 = pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/week17.csv')\n","ead79a94":"week_3.isnull().sum()","f319f57c":"week_1  = week_1.fillna(0)\nweek_2  = week_2.fillna(0)\nweek_3  = week_3.fillna(0)\nweek_4  = week_4.fillna(0)\nweek_5  = week_5.fillna(0)\nweek_6  = week_6.fillna(0)\nweek_7  = week_7.fillna(0)\nweek_8  = week_8.fillna(0)\nweek_9  = week_9.fillna(0)\nweek_10 = week_10.fillna(0)\nweek_11 = week_11.fillna(0)\nweek_12 = week_12.fillna(0)\nweek_13 = week_13.fillna(0)\nweek_14 = week_14.fillna(0)\nweek_15 = week_15.fillna(0)\nweek_16 = week_16.fillna(0)\nweek_17 = week_17.fillna(0)","4f62203d":"week_1[\"date\"] = week_1.time.apply(lambda x: x.split(\"T\")[0])\nweek_2[\"date\"] = week_2.time.apply(lambda x: x.split(\"T\")[0])\nweek_3[\"date\"] = week_3.time.apply(lambda x: x.split(\"T\")[0])\nweek_4[\"date\"] = week_4.time.apply(lambda x: x.split(\"T\")[0])\nweek_5[\"date\"] = week_5.time.apply(lambda x: x.split(\"T\")[0])\nweek_6[\"date\"] = week_6.time.apply(lambda x: x.split(\"T\")[0])\nweek_7[\"date\"] = week_7.time.apply(lambda x: x.split(\"T\")[0])\nweek_8[\"date\"] = week_8.time.apply(lambda x: x.split(\"T\")[0])\nweek_9[\"date\"] = week_9.time.apply(lambda x: x.split(\"T\")[0])\nweek_10[\"date\"] = week_10.time.apply(lambda x: x.split(\"T\")[0])\nweek_11[\"date\"] = week_11.time.apply(lambda x: x.split(\"T\")[0])\nweek_12[\"date\"] = week_12.time.apply(lambda x: x.split(\"T\")[0])\nweek_13[\"date\"] = week_13.time.apply(lambda x: x.split(\"T\")[0])\nweek_14[\"date\"] = week_14.time.apply(lambda x: x.split(\"T\")[0])\nweek_15[\"date\"] = week_15.time.apply(lambda x: x.split(\"T\")[0])\nweek_16[\"date\"] = week_16.time.apply(lambda x: x.split(\"T\")[0])\nweek_17[\"date\"] = week_17.time.apply(lambda x: x.split(\"T\")[0])","efdf0e01":"week_1[\"time\"] = week_1.time.apply(lambda x: x.split(\"T\")[1])\nweek_2[\"time\"] = week_2.time.apply(lambda x: x.split(\"T\")[1])\nweek_3[\"time\"] = week_3.time.apply(lambda x: x.split(\"T\")[1])\nweek_4[\"time\"] = week_4.time.apply(lambda x: x.split(\"T\")[1])\nweek_5[\"time\"] = week_5.time.apply(lambda x: x.split(\"T\")[1])\nweek_6[\"time\"] = week_6.time.apply(lambda x: x.split(\"T\")[1])\nweek_7[\"time\"] = week_7.time.apply(lambda x: x.split(\"T\")[1])\nweek_8[\"time\"] = week_8.time.apply(lambda x: x.split(\"T\")[1])\nweek_9[\"time\"] = week_9.time.apply(lambda x: x.split(\"T\")[1])\nweek_10[\"time\"] = week_10.time.apply(lambda x: x.split(\"T\")[1])\nweek_11[\"time\"] = week_11.time.apply(lambda x: x.split(\"T\")[1])\nweek_12[\"time\"] = week_12.time.apply(lambda x: x.split(\"T\")[1])\nweek_13[\"time\"] = week_13.time.apply(lambda x: x.split(\"T\")[1])\nweek_14[\"time\"] = week_14.time.apply(lambda x: x.split(\"T\")[1])\nweek_15[\"time\"] = week_15.time.apply(lambda x: x.split(\"T\")[1])\nweek_16[\"time\"] = week_16.time.apply(lambda x: x.split(\"T\")[1])\nweek_17[\"time\"] = week_17.time.apply(lambda x: x.split(\"T\")[1])","1e946e0f":"week_1[\"time\"] = week_1.time.apply(lambda x: x.split(\".\")[0])\nweek_2[\"time\"] = week_2.time.apply(lambda x: x.split(\".\")[0])\nweek_3[\"time\"] = week_3.time.apply(lambda x: x.split(\".\")[0])\nweek_4[\"time\"] = week_4.time.apply(lambda x: x.split(\".\")[0])\nweek_5[\"time\"] = week_5.time.apply(lambda x: x.split(\".\")[0])\nweek_6[\"time\"] = week_6.time.apply(lambda x: x.split(\".\")[0])\nweek_7[\"time\"] = week_7.time.apply(lambda x: x.split(\".\")[0])\nweek_8[\"time\"] = week_8.time.apply(lambda x: x.split(\".\")[0])\nweek_9[\"time\"] = week_9.time.apply(lambda x: x.split(\".\")[0])\nweek_10[\"time\"] = week_10.time.apply(lambda x: x.split(\".\")[0])\nweek_11[\"time\"] = week_11.time.apply(lambda x: x.split(\".\")[0])\nweek_12[\"time\"] = week_12.time.apply(lambda x: x.split(\".\")[0])\nweek_13[\"time\"] = week_13.time.apply(lambda x: x.split(\".\")[0])\nweek_14[\"time\"] = week_14.time.apply(lambda x: x.split(\".\")[0])\nweek_15[\"time\"] = week_15.time.apply(lambda x: x.split(\".\")[0])\nweek_16[\"time\"] = week_16.time.apply(lambda x: x.split(\".\")[0])\nweek_17[\"time\"] = week_17.time.apply(lambda x: x.split(\".\")[0])","c095465b":"plays[\"playtime\"] = plays.playDescription.apply(lambda x: x.split(\")\")[0])\nplays[\"playtime\"] = plays.playtime.apply(lambda x: x.split(\"(\")[1])","4c0c554b":"plays[\"desc\"] = plays.playDescription.apply(lambda x: x.split(\")\")[1])","9fdd4866":"plays.drop(\"playDescription\",axis=1,inplace=True)","0990ba51":"plays = plays.fillna(0)","6ea737fc":"players.drop(\"height\",axis=1,inplace=True)\nplayers.drop(\"weight\",axis=1,inplace=True)\nplayers.drop(\"birthDate\",axis=1,inplace=True)\nplayers.drop(\"collegeName\",axis=1,inplace=True)","fbca9fd5":"defensive = plays[plays.isDefensivePI == True]","875707a1":"attack = plays[~ plays.isDefensivePI == True]","ec0ccc62":"new_plays = plays","2e436995":"new_plays","4690972e":"new_id = [week_1, week_2,week_3,week_4,week_5,week_6, week_7,week_8,week_9,week_10,week_11, week_12,week_13,week_14,week_15,week_16,week_17]","9630540c":"new_info = pd.concat(new_id)","e11ece3b":"defence_list = ['CB','DE','NT','DE','FS','ILB','SS','OLB','S','MLB','DT']","3abbcfe5":"other_list = ['L','P','P','LS','K']","83197646":"new_info.drop(\"event\",axis=1,inplace=True)\nnew_info.drop(\"time\",axis=1,inplace=True)\nnew_info.drop(\"frameId\",axis=1,inplace=True)\nnew_info.drop(\"route\",axis=1,inplace=True)\nnew_info.drop(\"date\",axis=1,inplace=True)\nnew_info.drop(\"jerseyNumber\",axis=1,inplace=True)","22c542c2":"defence_players = new_info[new_info['position'].isin(defence_list)]","a3b2bf12":"defence_players.head(5)","c2a962f4":"offence_players = new_info[~new_info['position'].isin(defence_list)]","741ec9bc":"offence_players = offence_players[~offence_players['position'].isin(other_list)]","a1ec6c57":"list_of_defensive_players = defensive[\"playId\"]","a67bd68b":"final_list_defence = defence_players.drop_duplicates(subset=\"displayName\")","27fbe112":"final_list_offence = offence_players.drop_duplicates(subset=\"displayName\")","349cb2be":"final_list_defence.displayName.value_counts()","54f5ae15":"final_list_offence.displayName.value_counts()","0d2bcffe":"final_list_defence_left = final_list_defence[final_list_defence.playDirection == 'left']","e4461ab6":"final_list_defence_right = final_list_defence[final_list_defence.playDirection == 'right']","88d77617":"final_list_defence_left","d20429ac":"final_list_defence_right","5a4fa3c3":"final_list_defence.position.value_counts()","2d67eab0":"final_list_defence.describe()","067852a4":"X_1, y_1 = final_list_defence_left.iloc[:,0:6],final_list_defence_left.iloc[:,7]\nX_2, y_2 = final_list_defence_right.iloc[:,0:6],final_list_defence_right.iloc[:,7]","b9077d2b":"data_dmatrix_1 = xgb.DMatrix(data=X_1,label=y_1)\ndata_dmatrix_2 = xgb.DMatrix(data=X_2,label=y_2)\n","ccf4fb3a":"X_train_def_left, X_test_def_left, y_train_def_left, y_test_def_left = train_test_split(X_1, y_1, test_size=0.2, random_state=123)\nX_train_def_right, X_test_def_right, y_train_def_right, y_test_def_right = train_test_split(X_2, y_2, test_size=0.2, random_state=123)\n","ac3a6d1b":"xg_reg = xgb.XGBRegressor(objective ='reg:linear', colsample_bytree = 0.3, learning_rate = 0.5, max_depth = 5, alpha = 10, n_estimators = 10)","c0f0a3e9":"xg_reg.fit(X_train_def_left,y_train_def_left)\nxg_reg.fit(X_train_def_right,y_train_def_right)\n","ca74a7c4":"predict_11 = xg_reg.predict(X_1)\npredict_12 = xg_reg.predict(X_2)\n","edf9b36d":"a1 = (predict_11\/predict_11.mean())*10\na2 = (predict_12\/predict_12.mean())*10\n","6003ab0a":"f = final_list_defence_left.reset_index()\ng = final_list_defence_right.reset_index()","e89ac191":"d_l = pd.DataFrame(data = a1,columns =[\"Value\"])\nd_r = pd.DataFrame(data = a2,columns =[\"Value\"])","35bbf851":"d_l[\"Player\"] = f[\"displayName\"]\nd_r[\"Player\"] = g[\"displayName\"]","69be446f":"d_l[\"Pos\"] = f[\"position\"]\nd_r[\"Pos\"] = g[\"position\"]","e2a7f48c":"d_l","fcc3d040":"d_r","395c08b6":"d_l.to_csv('left_d.csv', index = False)\nd_r.to_csv('right_d.csv', index = False)","3cd8c6e4":"df_final = d_l.append(d_r)","3df1a3c5":"df_final.to_csv('final.csv', index = False)","77c09b25":"### Separating Time portion only","3744188c":"### Starting XGBoosting Here","cca35240":"### separating playtime from play description","2bcacbbc":"### Separate the date from time","d521db27":"### Separate Defensive players and Non Defensive Players","f5f271fe":"### Fitting the datas","711c0482":"### importing all the necessary Libraries","5d8af6e3":"### Test and Train Split ","6e3946fe":"### Separate the hour from Time ","634f7549":"### Predicting the datas","b9175a4e":"### Removing all the null values from the dataset","2352e71f":"### putting NaN to zero","cfd61cdf":"### Defining the regressor","8c2aeae0":"### Importing all the csv files","8b668d2b":"### data pre-procesing"}}