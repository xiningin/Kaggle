{"cell_type":{"e9f7cf10":"code","646a9e72":"code","c0ea3cfb":"code","0d45c3ea":"code","f3b00942":"code","f9c8d9e8":"code","e65fc00a":"code","c43809e8":"code","a52b00ba":"code","0d797578":"code","86818a52":"code","492552a9":"code","7e439d80":"code","88e6646b":"code","d24e72e9":"code","91f363f4":"code","b95554b4":"code","60881855":"code","1ac32b1d":"code","3ca2b3ca":"code","713e50d5":"code","3f2d8678":"code","1a2ad018":"code","6f585970":"code","6fafe24c":"code","f41b88a3":"code","5fa02c85":"code","4d98c6d1":"code","d19c26a2":"code","72b7f779":"code","618ca3cf":"code","9dce7c31":"code","e100fa15":"code","5b683365":"code","2c5b2ca2":"code","6bf1e825":"code","b6973e42":"code","a3613efd":"code","8e4595fd":"code","7c8494bc":"code","a2342fae":"code","e58ee2f3":"code","665048db":"code","f7b9a6f7":"code","e5d84de0":"code","3005cd6b":"code","4b6bff0b":"code","669936a4":"code","36208a2d":"code","82cfded2":"code","aa9630be":"code","e43b217d":"code","92776cb6":"code","3602b3e8":"code","ab8d17aa":"code","1b7fcf29":"code","eeaf137a":"code","e1daf2c7":"code","d5dccfe6":"code","dceec22d":"code","c01303f3":"code","7e2fd6c7":"code","c1c52740":"code","4d20a832":"code","06df6c66":"code","1306bb46":"code","d63d44c8":"code","c0301210":"code","7afbb7df":"code","ecc2719a":"code","3477c211":"code","6d9673b4":"code","0b52b0fe":"code","6fb0ea97":"code","36a39496":"code","a2122333":"code","ecdbeac2":"code","0a7dd691":"code","7124fd6f":"code","01547645":"code","47d61c39":"code","918bef74":"code","0cb25d2b":"code","86a6aea0":"code","a842b41a":"code","bcf840ba":"code","aa173af1":"code","9d98c592":"code","ac5c940a":"code","cacfc8cf":"code","3ff10a0e":"code","b34e5b04":"code","309b737c":"code","9c137185":"code","8234b96c":"code","96532773":"code","d1bff19a":"code","da99edbf":"code","3a3dc35a":"code","63bb3790":"code","498670c6":"code","4d5ed3e2":"markdown","dbe44820":"markdown","16d52dbe":"markdown","2f8cf886":"markdown","623355a8":"markdown","0d344cce":"markdown","3fd4eec7":"markdown","46151db4":"markdown","9f143cc8":"markdown","ab24b342":"markdown","1ea83ef5":"markdown","3a758a79":"markdown","0ceedbff":"markdown","b919a63e":"markdown","14f2a5bf":"markdown","5d9cbd7c":"markdown","18d77705":"markdown","46cddcd3":"markdown","bb8f5d5e":"markdown","288ee64e":"markdown","4a753316":"markdown","5238a279":"markdown","2a8f6529":"markdown","391ed8b7":"markdown","f43c2cdc":"markdown","298e85da":"markdown","24785d42":"markdown","0bbb1620":"markdown","f6884de2":"markdown","95be2a74":"markdown","881bb11f":"markdown"},"source":{"e9f7cf10":"import pandas as pd\nimport numpy as np","646a9e72":"import seaborn as sns\nimport matplotlib.pyplot as plt","c0ea3cfb":"from sklearn.preprocessing import LabelEncoder\nle=LabelEncoder()","0d45c3ea":"main_train=pd.read_csv('\/kaggle\/input\/tmdb-box-office-prediction\/train.csv')\nmain_test=pd.read_csv('\/kaggle\/input\/tmdb-box-office-prediction\/test.csv')","f3b00942":"train=main_train.copy(deep=True)","f9c8d9e8":"test=main_test.copy(deep=True)","e65fc00a":"train.shape","c43809e8":"test.shape","a52b00ba":"train.info()","0d797578":"train.isnull().sum()","86818a52":"train.columns","492552a9":"train.drop(['id'],axis=1,inplace=True)","7e439d80":"test.drop(['id'],axis=1,inplace=True)","88e6646b":"train.dropna(subset=[ 'budget', 'genres',\n       'imdb_id', 'original_language', 'original_title', 'overview',\n       'popularity', 'poster_path', 'production_companies',\n       'production_countries', 'release_date', 'runtime', 'spoken_languages',\n       'status', 'tagline', 'title', 'Keywords', 'cast', 'crew', 'revenue'],inplace=True)","d24e72e9":"test.dropna(subset=[ 'budget', 'genres',\n       'imdb_id', 'original_language', 'original_title', 'overview',\n       'popularity', 'poster_path', 'production_companies',\n       'production_countries', 'release_date', 'runtime', 'spoken_languages',\n       'status', 'tagline', 'title', 'Keywords', 'cast', 'crew'],inplace=True)","91f363f4":"train.isnull().sum()","b95554b4":"train['release_date']= pd.to_datetime(train['release_date'])\nk=le.fit_transform(train['release_date'])\n\ntrain['release_date']=k","60881855":"test['release_date']= pd.to_datetime(test['release_date'])\nk=le.fit_transform(test['release_date'])\n\ntest['release_date']=k","1ac32b1d":"for i in train.select_dtypes(include='object'):\n    print(i,end='=')\n    print(len(train[i].unique()))","3ca2b3ca":"train.belongs_to_collection.head(10)","713e50d5":"collection=[]\nfor i in train['belongs_to_collection']:\n    if (type(i)==float):\n        collection.append(0)\n    else:\n        collection.append(1)\n","3f2d8678":"train['belongs_to_collection']=collection","1a2ad018":"collection=[]\nfor i in test['belongs_to_collection']:\n    if (type(i)==float):\n        collection.append(0)\n    else:\n        collection.append(1)\ntest['belongs_to_collection']=collection","6f585970":"collection=[]\nfor i in train['homepage']:\n    if (type(i)==float):\n        collection.append(0)\n    else:\n        collection.append(1)\n","6fafe24c":"train['homepage']=collection","f41b88a3":"collection=[]\nfor i in test['belongs_to_collection']:\n    if (type(i)==float):\n        collection.append(0)\n    else:\n        collection.append(1)\n","5fa02c85":"test['homepage']=collection","4d98c6d1":"train.drop('imdb_id',axis=1,inplace=True)","d19c26a2":"test.drop('imdb_id',axis=1,inplace=True)","72b7f779":"train.drop('original_title',axis=1,inplace=True)","618ca3cf":"test.drop('original_title',axis=1,inplace=True)","9dce7c31":"train['overview']#looks useless","e100fa15":"train.drop('overview',axis=1,inplace=True)","5b683365":"test.drop('overview',axis=1,inplace=True)","2c5b2ca2":"train['poster_path']#looks useless hence dropped","6bf1e825":"train.drop('poster_path',axis=1,inplace=True)","b6973e42":"test.drop('poster_path',axis=1,inplace=True)","a3613efd":"def get_dict(s):\n    try:\n        d = eval(s)\n    except:\n        d = {}\n    return d","8e4595fd":"language=[]\nnumber=[]\nfor i in train['spoken_languages']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    language.append(l)\n    number.append(len(l))\n\ntrain['spoken_languages']=language\n\ntrain['no_of_spoken_languages']=number","7c8494bc":"k=[]\nfor i in train['spoken_languages']:\n    if 'English' not in i:\n        k.append(0)\n    else:\n        k.append(1)","a2342fae":"train['english_spoken']=k","e58ee2f3":"\ntrain.drop('spoken_languages',axis=1,inplace=True)","665048db":"language=[]\nnumber=[]\nfor i in test['spoken_languages']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    language.append(l)\n    number.append(len(l))\n\ntest['spoken_languages']=language\n\ntest['no_of_spoken_languages']=number","f7b9a6f7":"k=[]\nfor i in test['spoken_languages']:\n    if 'English' not in i:\n        k.append(0)\n    else:\n        k.append(1)\n        \ntest['english_spoken']=k","e5d84de0":"test.drop('spoken_languages',axis=1,inplace=True)","3005cd6b":"countries=[]\nnumber=[]\nfor i in train['production_countries']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    countries.append(l)\n    number.append(len(l))\n\ntrain['production_countries']=countries\n\ntrain['no_of_countries']=number","4b6bff0b":"countries=[]\nnumber=[]\nfor i in test['production_countries']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    countries.append(l)\n    number.append(len(l))\n\ntest['production_countries']=countries\n\ntest['no_of_countries']=number","669936a4":"k=[]\nfor i in train['production_countries']:\n    if ('United Kingdom'  in i) and ('United States of America'  in i):\n        k.append(3)\n    elif('United States of America'  in i):\n        k.append(1)\n    elif ('United Kingdom'  in i):\n        k.append(3)\n    else:\n        k.append(0)","36208a2d":"train['production_countries']=k","82cfded2":"k=[]\nfor i in test['production_countries']:\n    if ('United Kingdom'  in i) and ('United States of America'  in i):\n        k.append(3)\n    elif('United States of America'  in i):\n        k.append(1)\n    elif ('United Kingdom'  in i):\n        k.append(3)\n    else:\n        k.append(0)","aa9630be":"test['production_countries']=k","e43b217d":"companies=[]\nnumber=[]\nfor i in train['production_companies']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    companies.append(l)\n    number.append(len(l))\ntrain['production_companies']=companies\ntrain['np_of_companies_involved']=number","92776cb6":"companies=[]\nnumber=[]\nfor i in test['production_companies']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    companies.append(l)\n    number.append(len(l))\ntest['production_companies']=companies\ntest['np_of_companies_involved']=number","3602b3e8":"train.drop('production_companies',axis=1,inplace=True)\ntest.drop('production_companies',axis=1,inplace=True)\n","ab8d17aa":"train['original_language'].value_counts()","1b7fcf29":"k=[]\nfor i in train['original_language']:\n    if 'en'in i:\n        k.append(1)\n    else:\n        k.append(0)","eeaf137a":"np.sum(k)","e1daf2c7":"train['original_lang_English']=k\ntrain.drop('original_language',axis=1,inplace=True)","d5dccfe6":"k=[]\nfor i in test['original_language']:\n    if 'en'in i:\n        k.append(1)\n    else:\n        k.append(0)\ntest['original_lang_English']=k\ntest.drop('original_language',axis=1,inplace=True)","dceec22d":"train['tagline']#droping Tagline","c01303f3":"train.drop('tagline',inplace=True,axis=1)","7e2fd6c7":"test.drop('tagline',inplace=True,axis=1)","c1c52740":"train['Keywords']","4d20a832":"keywords=[]\nlength=[]\nfor i in train['Keywords']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    keywords.append(l)\n    length.append(len(l))\n\ntrain['Keywords']=keywords\n\ntrain['no_of_Keywords']=length","06df6c66":"keywords=[]\nlength=[]\nfor i in test['Keywords']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    keywords.append(l)\n    length.append(len(l))\n\ntest['Keywords']=keywords\n\ntest['no_of_Keywords']=length","1306bb46":"train.drop('Keywords',axis=1,inplace=True)\n#since there are","d63d44c8":"test.drop('Keywords',axis=1,inplace=True)\n","c0301210":"train['title']","7afbb7df":"train.drop([ 'title'], axis=1, inplace=True)\ntest.drop([ 'title'], axis=1, inplace=True)","ecc2719a":"length=[]\nfor i in train['cast']:\n    d=get_dict(i)\n    length.append(len(pd.DataFrame(d)))\n\ntrain['size_of_cast']=length\ntrain.drop('cast',axis=1,inplace=True)","3477c211":"length=[]\nfor i in test['cast']:\n    d=get_dict(i)\n    length.append(len(pd.DataFrame(d)))\n\ntest['size_of_cast']=length\ntest.drop('cast',axis=1,inplace=True)","6d9673b4":"sns.scatterplot(train['size_of_cast'],train['revenue'])","0b52b0fe":"length=[]\nfor i in train['crew']:\n    d=get_dict(i)\n    length.append(len(pd.DataFrame(d)))\n\ntrain['size_of_crew']=length\ntrain.drop('crew',axis=1,inplace=True)","6fb0ea97":"length=[]\nfor i in test['crew']:\n    d=get_dict(i)\n    length.append(len(pd.DataFrame(d)))\n\ntest['size_of_cast']=length\ntest.drop('crew',axis=1,inplace=True)","36a39496":"sns.scatterplot(train['size_of_crew'],train['revenue'])","a2122333":"genre=[]\nnumber=[]\nfor i in train['genres']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    genre.append(l)\n    number.append(len(l))\ntrain['genres']=genre\ntrain['np_of_genre']=number","ecdbeac2":"train[['genres']]","0a7dd691":"genre=[]\nfor i  in train['genres']:\n    for j in i:\n        if  j not in genre:\n            genre.append(j)","7124fd6f":"genre","01547645":"genre","47d61c39":"genre=[]\nfor i in train['genres']:\n    genre.append(i[0])","918bef74":"train['genres']=genre","0cb25d2b":"genre=[]\nnumber=[]\nfor i in test['genres']:\n    d=get_dict(i)\n    l=list(pd.DataFrame(d)['name'])\n    genre.append(l)\n    number.append(len(l))\ntest['genres']=genre\ntest['np_of_genre']=number","86a6aea0":"genre=[]\nfor i in test['genres']:\n    genre.append(i[0])\ntest['genres']=genre","a842b41a":"train['production_countries']=train['production_countries'].astype('object')","bcf840ba":"train.info()","aa173af1":"train.head()","9d98c592":"sns.catplot(x='belongs_to_collection',y='revenue',data=train)","ac5c940a":"sns.catplot(x='homepage',y='revenue',data=train)","cacfc8cf":"sns.catplot(x='production_countries',y='revenue',data=train)","3ff10a0e":"sns.catplot(x='belongs_to_collection',y='revenue',data=train)\n","b34e5b04":"sns.catplot(x='no_of_spoken_languages',y='revenue',data=train)","309b737c":"sns.catplot(x='np_of_companies_involved',y='revenue',data=train)","9c137185":"sns.catplot(x='original_lang_English',y='revenue',data=train)","8234b96c":"sns.scatterplot(x='budget',y='revenue',data=train)","96532773":"sns.lmplot(x='budget',y='revenue',data=train)","d1bff19a":"train","da99edbf":"sns.scatterplot(x=train['popularity'],y=train['revenue'],data=train)\nplt.show()","3a3dc35a":"train.to_csv('train_final.csv')","63bb3790":"test.head()","498670c6":"test.to_csv('test_final.csv')","4d5ed3e2":"\/kaggle\/input\/tmdb-box-office-prediction\/sample_submission.csv\n\/kaggle\/input\/tmdb-box-office-prediction\/train.csv\n\/kaggle\/input\/tmdb-box-office-prediction\/test.csv","dbe44820":"all unique","16d52dbe":"#### SPOKEN LANGUAGES","2f8cf886":"#### TITLE4","623355a8":"#### CAST","0d344cce":"\/kaggle\/input\/tmdb-box-office-prediction\/train.csv\n\/kaggle\/input\/tmdb-box-office-prediction\/test.csv","3fd4eec7":"#### TagLine","46151db4":"transforming data as belonging to collection as 1 else 0 as belonging to collection can be an important features","9f143cc8":"###### CONCIDERING NO OF COMPANIES INVOLVED","ab24b342":"#### GENRE","1ea83ef5":"#### ORIGINAL LANG","3a758a79":"Converting production country to object","0ceedbff":"Concidering first genre of the lists","b919a63e":"crew is dropped as all are summary list of actors worked on movie\n\nconcidering the size of crew","14f2a5bf":"then dropping the original column","5d9cbd7c":"#### CREW","18d77705":"#### EDA\n    \n    to see the hidden trends","46cddcd3":"Concidering the size of cast involved","bb8f5d5e":"#### Production Companies","288ee64e":"#### BELONGING TO COLLECTION","4a753316":"#### RELEASE DATE PREPROCESSING","5238a279":"###### English spoken concidered 1 else 0","2a8f6529":"#### IMDBID","391ed8b7":"#### POSTER PATH","f43c2cdc":"#### Overview","298e85da":"#### Keywords","24785d42":"English spoken movies has more chances of revenue as well as storing no of spoken language as a factor","0bbb1620":"###### Now USA concidered 1, UK concidered 2, if no usa or uk among list of countries concidered 0,if both usa and uk then3","f6884de2":"#### HOMEPAGE","95be2a74":"#### Title","881bb11f":"#### Production Countries"}}