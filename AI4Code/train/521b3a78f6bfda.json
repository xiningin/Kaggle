{"cell_type":{"f4b029d3":"code","47155c29":"code","97dd1d72":"code","2540140c":"code","dc4d27bf":"code","0c2fedd6":"code","71ef576c":"code","d0473597":"code","71b2af98":"code","4d02b023":"code","a97018ca":"code","592adb9c":"code","4a806c31":"code","01f2afb8":"code","08118679":"code","330646b1":"code","470c79a8":"code","95423f40":"code","ac2a5b79":"code","ce6b5aab":"code","9f1b1b07":"code","0dd010a8":"code","25d4a7bc":"code","b75e195e":"code","3d0ca8b5":"code","395c2bcf":"markdown","ca6e05ae":"markdown","aa7f7117":"markdown","c76e80dd":"markdown","70f4dbd0":"markdown","feb7b471":"markdown","6ad67a2b":"markdown","9db38425":"markdown","92a9c4f8":"markdown","ba80c575":"markdown","db0a7b88":"markdown","ba06036d":"markdown","252f7a7e":"markdown","ebaa59a7":"markdown","111eabbc":"markdown","a6a45062":"markdown","8ae31df0":"markdown","ba1c3252":"markdown","43f8a1c4":"markdown"},"source":{"f4b029d3":"import pandas as pd\nimport sqlite3\n\ndef create_connection(db_file):\n    \"\"\" create a database connection to the SQLite database\n        specified by the db_file\n    :param db_file: database file\n    :return: Connection object or None\n    \"\"\"\n    conn = None\n    try:\n        conn = sqlite3.connect(db_file)\n    except Exception as e:\n        print(e)\n\n    return conn","47155c29":"conn = create_connection('\/kaggle\/input\/mental-health-in-the-tech-industry\/mental_health.sqlite')","97dd1d72":"sql = \"\"\"\nSELECT name FROM  sqlite_master \nWHERE type ='table';\n\"\"\"\ndf = pd.read_sql(sql=sql, con=conn)\ndf.head()","2540140c":"sql = \"\"\"\nSELECT *\nFROM Survey;\n\"\"\"\nsurvey = pd.read_sql(sql=sql, con=conn)\nsurvey.head()","dc4d27bf":"survey.shape","0c2fedd6":"sql = \"\"\"\nSELECT *\nFROM Question;\n\"\"\"\nquestion = pd.read_sql(sql=sql, con=conn)\nquestion.head()","71ef576c":"question.shape","d0473597":"sql = \"\"\"\nSELECT *\nFROM Answer;\n\"\"\"\nanswer = pd.read_sql(sql=sql, con=conn)\nanswer.head(20)","71b2af98":"answer.shape","4d02b023":"answer[answer.QuestionID == 1].AnswerText.astype(int).describe()","a97018ca":"answer[answer.QuestionID == 1].AnswerText.astype(int).hist()","592adb9c":"answer.UserID.nunique()","4a806c31":"answer.UserID.value_counts()","01f2afb8":"df = pd.DataFrame({'UserID': answer.UserID.unique()})\ndf.head()","08118679":"answer_age = answer[answer['QuestionID']==1]\nlist_age = []\nfor user in df.UserID:\n    age = int(answer_age[answer_age['UserID']==user]['AnswerText'].values[0])\n    if age > 15 and age < 90:\n        list_age.append(age)\n    else:\n        list_age.append(None)\ndf['age'] = list_age\ndf.head()","330646b1":"df.age.hist()","470c79a8":"answer[answer['QuestionID']==2].AnswerText.value_counts()","95423f40":"answer_gender = answer[answer['QuestionID']==2]\nlist_gender = []\nfor user in df.UserID:\n    gender = answer_gender[answer_gender['UserID']==user]['AnswerText'].values[0]\n    if 'female' in gender.lower():\n        list_gender.append('female')\n    elif 'male' in gender.lower():\n        list_gender.append('male')\n    else:\n        list_gender.append(None)","ac2a5b79":"df['gender'] = list_gender\ndf.head()","ce6b5aab":"df.gender.hist()","9f1b1b07":"answer[answer['QuestionID']==3].AnswerText.value_counts()","0dd010a8":"answer_country = answer[answer['QuestionID']==3]\nlist_country = []\nfor user in df.UserID:\n    country = answer_country[answer_country['UserID']==user]['AnswerText'].values[0]\n    if 'united state' in country.lower():\n        list_country.append('USA')\n    elif 'united kingdom' in country.lower():\n        list_country.append('UK')\n    else:\n        list_country.append(country)\ndf['country'] = list_country\ndf.head()","25d4a7bc":"df.country.value_counts().index","b75e195e":"df[df['country'].isin(df.country.value_counts().index.tolist()[:7])].country.hist()","3d0ca8b5":"question","395c2bcf":"Male are more represented than female in tech. There is about three times more male than female.","ca6e05ae":"See some statistics on question 1: \"What is your age?\"\n\nIt seems not all the answers make sense. An age on -29 doesn't make sens. The same for 329. Anyone can live so old!\n\nOtherwise, the mean and median age is about 33 or 34 years old.","aa7f7117":"Let's visualize again the countries. It seems well define.","c76e80dd":"We can merge United States of American and United States into the same label","70f4dbd0":"It seems most of the gender can be retrieve with the strings male or female","feb7b471":"# Visualize the available tables\n\nThree tables are available in the sqlite database.","6ad67a2b":"Create a df with a different format. One user by line, then the answers as columns.","9db38425":"# Mental health survey in the tech industry\n\n# Outline\n[1. Age](#1.-Age)\n\n[2. Gender](#2.-Gender)\n\n[3. Country](#3.-Country)\n\nWe will begin to clean the data to be able to use it.","92a9c4f8":"# 3. Country\n\n[Outline](#Outline)","ba80c575":"We can see the distribution of the ages","db0a7b88":"# 1. Age\n[Outline](#Outline)","ba06036d":"# 2. Gender\n[Outline](#Outline)","252f7a7e":"# Query the databases and save them into pd.DataFrame","ebaa59a7":"We can assume a person currently working in tech would be between 15 and 90 years old.","111eabbc":"We plot again the histogram of ages. Most of the workers in tech who answered the survey are between 22 and 45 years old.","a6a45062":"We define the function to make the connection betweeb your script avec the database.","8ae31df0":"Effectively makes the connection to the sqlite database\n","ba1c3252":"The outliers or let's say wrong answers make the plot not visualy intuitif. We'll replot it after cleaning the age variable","43f8a1c4":"Not all the users have the same number of answers. The number of answers by persons is between 26 and 76."}}