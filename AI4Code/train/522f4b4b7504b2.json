{"cell_type":{"daa0e883":"code","8336be61":"code","f9ef1a57":"code","b398f11c":"code","eba6011b":"code","dd8fafcd":"code","b8f14e52":"code","b7151595":"code","ab1dc69e":"code","2a37491b":"code","58173946":"code","74d5f5da":"code","eeb0ec0d":"code","4f416892":"code","288037d2":"code","4819170a":"code","c232632f":"code","8cbfb3a0":"code","071f2f09":"code","be552cfa":"code","8baa3d2a":"code","9eb926fc":"code","c5826782":"code","4333c657":"code","cd86954b":"code","b4ea8738":"code","e455fea5":"code","d80fb1d8":"code","8d73634b":"code","a306e979":"code","c9eafd38":"code","2960b667":"code","d2732b4c":"code","cdac3a6e":"code","e1ce7777":"code","7c38d513":"code","440274d7":"code","bac8316b":"code","20b0593f":"code","d2b020fd":"code","ec6ed05b":"code","ca039d83":"markdown","87c4f289":"markdown","9a25d600":"markdown","483df599":"markdown","a4e9836b":"markdown","8d1f1366":"markdown","6d03f282":"markdown","6d022801":"markdown","0c2586f3":"markdown","edb0899b":"markdown","0767c3b7":"markdown","437b6727":"markdown","ce81b92c":"markdown"},"source":{"daa0e883":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ndata = pd.read_csv(\"..\/input\/forest-fires-in-brazil\/amazon.csv\",encoding='latin1') ","8336be61":"data.head() ","f9ef1a57":"data.isna().sum()","b398f11c":"data.duplicated().sum()","eba6011b":"data.drop_duplicates(inplace=True) ","dd8fafcd":"data.drop('date',axis=1,inplace =True) ","b8f14e52":"data = data.reset_index(drop=True)","b7151595":"data = data.replace({'Piau':'Piaui',\n                     'Rio':'Rio de Janeiro'})","ab1dc69e":"plt.figure(figsize=(15,10))\nax=sns.distplot(data.number)\nax = ax.set(yticklabels=[],title='Histogram of number of fires reported')","2a37491b":"ax = plt.figure(figsize=(15,10))\n\nplt.subplot(2,1,1)\nax = sns.boxplot(data.year,data.number)\n\nplt.subplot(2,1,2)\nax = sns.boxplot(data.state,data.number)\nax = plt.xticks(rotation=65)","58173946":"pd.DataFrame(data.groupby(data.year).number.std())","74d5f5da":"pd.DataFrame(data.groupby(data.state).number.std())","eeb0ec0d":"x = data.groupby(data.year).number.median()\n\nax = plt.figure(figsize=(15,10))\nax = plt.plot(x.index.values,x.values) \nax = plt.title('Median of number of fires reported')\nax = plt.xlabel('Year')\nax = plt.ylabel('Median')\n\nz = np.polyfit(x.index.values, x.values, 1)\np = np.poly1d(z)\nax = plt.plot(x.index.values,p(x.index.values),\"r--\")\n\nax = plt.legend(['Real Data','Trend Line'])","4f416892":"x = data.groupby(data.month, sort=False).number.median()\nplt.figure(figsize=(15,10))\nax = plt.plot(x.index.values, x.values) \nax = plt.xticks(rotation=65)\nax = plt.title('Median of number of fires reported')\nax = plt.xlabel('Month')\nax = plt.ylabel('Median')","288037d2":"x = data.groupby(data.state).number.median()\nplt.figure(figsize=(15,10))\nax = sns.barplot(y=x.index.values,x=x.values)\nax = ax.set(xlabel='Median of fires reported',ylabel='States',title='Fires Reported by State')","4819170a":"import geopandas as gpd","c232632f":"map_brazil = gpd.read_file('..\/input\/brazil-geopandas-data\/gadm36_BRA_1.shp')\nmap_brazil = map_brazil[['NAME_1','geometry']]\nmap_brazil = map_brazil.to_crs(epsg=4326)","8cbfb3a0":"map_brazil.head()","071f2f09":"import unidecode\nmap_brazil['NAME_1'] = map_brazil['NAME_1'].apply(lambda x: unidecode.unidecode(x))\ndata['state'] = data['state'].apply(lambda x: unidecode.unidecode(x))","be552cfa":"map_brazil['centroid'] = map_brazil.geometry.centroid","8baa3d2a":"median = data.groupby('state').number.median()\n\nmap_brazil = map_brazil.join(median,on='NAME_1')","9eb926fc":"map_brazil.head()","c5826782":"data['month'] = data.month.replace(data.month.unique(),range(1,13))","4333c657":"fig,ax = plt.subplots(figsize=(20,10))\nmap_brazil.plot(column='number',ax=ax,alpha=0.4,edgecolor='black',cmap='YlOrRd',legend=True)\nplt.title(\"Median Number of Fires\")\nplt.axis('off')\n\n\nfor x, y, label in zip(map_brazil.centroid.x, map_brazil.centroid.y, map_brazil.NAME_1):\n    ax.annotate(label, xy=(x, y), xytext=(3,3), textcoords=\"offset points\",color='blue')","cd86954b":"map_brazil['lat_long'] = map_brazil.centroid.apply(lambda x : x.coords[0])","b4ea8738":"x = map_brazil[['NAME_1','lat_long']]\nx = x.set_index('NAME_1')","e455fea5":"data = data.set_index('state')","d80fb1d8":"data = data.join(x)","8d73634b":"data[['x', 'y']] = pd.DataFrame(data['lat_long'].tolist(), index=data.index) \ndata.drop('lat_long',axis=1,inplace=True)","a306e979":"from sklearn.cluster import KMeans","c9eafd38":"inertia =[] \nfor k in range(1, 10):\n    kmeans = KMeans(n_clusters=k, random_state=0).fit(data)\n    inertia.append(kmeans.inertia_)","2960b667":"ax = plt.plot(range(1,10),inertia)","d2732b4c":"kmeans = KMeans(n_clusters=3, random_state=0).fit(data)","cdac3a6e":"from sklearn.preprocessing import StandardScaler\n\nx = StandardScaler().fit_transform(data)\n\nfrom sklearn.decomposition import PCA\npca = PCA(n_components=2)\nprincipalComponents = pca.fit_transform(x)\nprincipalDf = pd.DataFrame(data = principalComponents, columns = ['1', '2'])\n\nplt.figure(figsize=(10,10))\nax = plt.scatter(principalDf['1'],principalDf['2'],c=kmeans.labels_)","e1ce7777":"pc = pd.DataFrame(pca.components_) \npc.columns = data.columns \npc","7c38d513":"data['labels'] = kmeans.labels_","440274d7":"data.labels.value_counts() ","bac8316b":"plt.figure(figsize=(10,10))\nax = sns.boxplot(data.labels,data.number)","20b0593f":"plt.figure(figsize=(10, 10))\nax = sns.countplot(data.month,hue=data.labels)","d2b020fd":"plt.figure(figsize=(10, 10))\nax = sns.countplot(data.year,hue=data.labels)","ec6ed05b":"plt.figure(figsize=(10, 10))\nax = sns.countplot(data.index.values,hue=data.labels)\nax = plt.xticks(rotation=65)","ca039d83":"I'm going to use PCA for dimensionality reduction so I can plot the clusters. ","87c4f289":"Very skewed right distribution.","9a25d600":"We can see the median number of fires reported increased during this period, and it tends to continue that way.","483df599":"By the elbow method we should use 3 clusters. ","a4e9836b":"Reset the index because of the drop_duplicates.","8d1f1366":"# Graphs","6d03f282":"# K-means ","6d022801":"32 duplicates.","0c2586f3":"We can see that we have sparse data, regarding the number of fires. The standard deviation is very high, so for the next analysis I will be using only the median, beacause using average values could lead to false conclusions.","edb0899b":"No missing values.","0767c3b7":"# Analysing the  Brazil Forest burnings","437b6727":"The data is mainly grouped by number and state.\n","ce81b92c":"The date features doesnt tells us much."}}