{"cell_type":{"8923178e":"code","69f88a54":"code","62d063fb":"code","acf75888":"code","65c72c10":"markdown"},"source":{"8923178e":"import numpy as np \nimport pandas as pd \nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nimport plotly.graph_objs as go\n\n\ndata = pd.read_csv('..\/input\/bus-breakdown-and-delays.csv', low_memory=False)\n\n\ndata['Occurred_On'] = pd.to_datetime(data['Occurred_On'], format = '%Y-%m-%d')\n\n#count of breakdowns per month\nbreakdown_by_month = data['Occurred_On'].groupby([data['Occurred_On'].dt.year, data['Occurred_On'].dt.month]).agg('count')\n\n#convert to dataframe\nbreakdown_by_month = breakdown_by_month.to_frame()\n\n#move date month from index to column\nbreakdown_by_month['Occured_On'] = breakdown_by_month.index\n\n#renaming column\nbreakdown_by_month = breakdown_by_month.rename(columns={breakdown_by_month.columns[0]: 'breakdowns', breakdown_by_month.columns[1]: 'date'})\n\n#re-parse dates\nbreakdown_by_month['date'] = pd.to_datetime(breakdown_by_month['date'], format = '(%Y, %m)')\n\n#remove 2020\nbreakdown_by_month.drop(2020, inplace=True)\n\n#remove index\nbreakdown_by_month = breakdown_by_month.reset_index(drop=True)\n\n#get month of breakdowns\nbreakdown_by_month['month'] = breakdown_by_month['date'].dt.month\n\n#Breakdown reasons\nbreakdown_reason = data['Reason'].value_counts().to_frame()\nbreakdown_reason['reason'] = breakdown_reason.index\nbreakdown_reason = breakdown_reason.reset_index(drop = True)\nbreakdown_reason = breakdown_reason.rename(columns = {breakdown_reason.columns[0]: 'count'})\n\n#Get values by boroughs\nbreakdown_by_boro = data['Boro'].value_counts().to_frame()\nbreakdown_by_boro['boro'] = breakdown_by_boro.index\nbreakdown_by_boro = breakdown_by_boro.reset_index(drop=True)\nbreakdown_by_boro = breakdown_by_boro.rename(columns={breakdown_by_boro.columns[0]: 'Breakdowns'})","69f88a54":"#Breakdowns per month\nd = [go.Scatter(x = breakdown_by_month['date'], y = breakdown_by_month['breakdowns'])]\n\nlayout = dict(title = \"Number of breakdowns per month\",\n             xaxis = dict(title = 'Date', ticklen = 10, zeroline=False))\n\nfig = dict(data = d, layout = layout)\niplot(fig)","62d063fb":"#Breakdown by Boroughs\nd = [go.Bar(\n    x = list(breakdown_by_boro['Breakdowns']),\n    y = list(breakdown_by_boro['boro']),\n    orientation = 'h')]\n\nlayout = go.Layout(title = \"Breakdowns by Boroughs\")\n\nfig = go.Figure(data = d, layout=layout)\niplot(fig)","acf75888":"#Breakdown reasons\ntrace = [go.Pie(\n    values = list(breakdown_reason['count']),\n    labels = list(breakdown_reason['reason']))]\n\nlayout = go.Layout(title = \"Breakdown reasons\")\n\nfig = go.Figure(data = trace, layout=layout)\niplot(fig)","65c72c10":"# NY Bus breakdown Dashborad\nThe data contains bus breakdown information from NY school bus vendors."}}