{"cell_type":{"bbd64da1":"code","884824bc":"code","17a61f5c":"code","44621a4a":"code","20efd382":"code","3f0b3e99":"code","a7865f5c":"code","3e3d5474":"code","d6efe819":"code","0fbeedb8":"code","3cb247d9":"code","e6c08975":"code","40fbfc2e":"code","633bad9c":"code","8f52431b":"code","ff59c876":"code","f5f9319a":"code","67a1918c":"code","11a453d9":"code","5cefd48a":"code","a1448980":"code","9bfdab3e":"code","76566a30":"code","efdf03ae":"markdown","a84b9949":"markdown","f7c6a217":"markdown","c0f5562a":"markdown","e30593f2":"markdown","668688a5":"markdown","f3d2012b":"markdown","18f74c52":"markdown","e3b2e2a5":"markdown","ac65e2de":"markdown","18116c85":"markdown"},"source":{"bbd64da1":"# Instalando as bibliotecas\n%pip install plotly\n%pip install cufflinks\n%pip install chart-studio","884824bc":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport chart_studio.plotly as py\nimport cufflinks as cf\n\nimport plotly.graph_objects as go\nimport plotly.express as px","17a61f5c":"# Configurando o plotly para o modo offline\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\ncf.go_offline()","44621a4a":"# Lendo os dados\ngas_df = pd.read_csv('..\/input\/gas-prices-in-brazil\/2004-2019.tsv', sep='\\t', index_col=0, parse_dates=['DATA INICIAL', 'DATA FINAL'])\ngas_df.head()","20efd382":"# Selecionando apenas a gasolina em S\u00e3o Paulo\ndf_precos = gas_df.query('ESTADO == \"SAO PAULO\" and PRODUTO == \"GASOLINA COMUM\"')","3f0b3e99":"# Plotando os dados com lineplot do seaborn\nsns.lineplot(data=df_precos, x='DATA INICIAL', y='PRE\u00c7O M\u00c9DIO REVENDA')","a7865f5c":"# Plotando os dados de forma identica com o Plotly\npx.line(df_precos, x='DATA INICIAL', y='PRE\u00c7O M\u00c9DIO REVENDA')","3e3d5474":"# Criando um g\u0155afico personalizado\npx.line(\n    gas_df.query('ESTADO == \"SAO PAULO\" and PRODUTO != \"GLP\"'),\n    x='DATA INICIAL',\n    y='PRE\u00c7O M\u00c9DIO REVENDA',\n    color='PRODUTO',\n    labels={'DATA INICIAL':'Data', 'PRE\u00c7O M\u00c9DIO REVENDA':'Pre\u00e7o m\u00e9dio de revenda'},\n    title='Pre\u00e7os m\u00e9dios de revenda para v\u00e1rios combust\u00edveis entre 2004 e 2019'\n)","d6efe819":"# Usando o graph_objects, podemos personalizar mais ainda\n\nfig = go.Figure() # Inicializando uma figura\n\nfig.add_trace(go.Scatter(\n    x=gas_df.query('ESTADO == \"SAO PAULO\" and PRODUTO == \"GASOLINA COMUM\"')['DATA INICIAL'],\n    y=gas_df.query('ESTADO == \"SAO PAULO\" and PRODUTO == \"GASOLINA COMUM\"')['PRE\u00c7O M\u00c9DIO REVENDA'],\n    mode='lines',\n    name='S\u00e3o Paulo',\n    line=dict(color='red', width=2, dash='dash')\n))\n\nfig.add_trace(go.Scatter(\n    x=gas_df.query('ESTADO == \"RIO DE JANEIRO\" and PRODUTO == \"GASOLINA COMUM\"')['DATA INICIAL'],\n    y=gas_df.query('ESTADO == \"RIO DE JANEIRO\" and PRODUTO == \"GASOLINA COMUM\"')['PRE\u00c7O M\u00c9DIO REVENDA'],\n    mode='lines',\n    name='Rio de Janeiro',\n    line=dict(color='green', width=2, dash='dashdot')\n))\n\nfig.update_layout(\n    xaxis=dict(\n        showline=True,\n        showgrid=False,\n        showticklabels=True,\n        ticks='outside',\n        linecolor='rgb(150, 150, 150)',\n        linewidth=3,\n        tickfont=dict(\n            family='Arial',\n            size=14,\n        )\n    ),\n    \n    yaxis=dict(\n        showline=True,\n        showticklabels=True,\n        gridcolor='rgb(200, 200, 200)',\n        linecolor='rgb(150, 150, 150)',\n        linewidth=3,\n        ticks='outside',\n        tickfont=dict(\n            family='Arial',\n            size=14,\n        )\n    ),\n    \n    plot_bgcolor='white',\n    title='Pre\u00e7o da gasolina em SP e RJ'\n)\n\nfig","0fbeedb8":"# Carregando o dataset iris, cont\u00e9m dados de diferentes esp\u00e9cies de flores\niris = sns.load_dataset(\"iris\")\niris.head()","3cb247d9":"# Criando um scatter plot simples\npx.scatter(iris, x='sepal_length', y='sepal_width', color='species', symbol='species',\n          hover_name='species', title='Scatter plot do comprimento x largura da s\u00e9pala')","e6c08975":"# Criando o mesmo scatter plot para os dados da p\u00e9tala\npx.scatter(iris, x='petal_length', y='petal_width', color='species', symbol='species',\n          hover_name='species', title='Scatter plot do comprimento x largura da p\u00e9tala')","40fbfc2e":"#Plot 3D\npx.scatter_3d(iris, x='petal_length', z='petal_width', y='sepal_width',\n              color='species', symbol='species', color_discrete_sequence=px.colors.qualitative.Set1,\n              hover_data=['petal_length', 'petal_width', 'sepal_length', 'sepal_width'],\n              hover_name='species',\n              title='Scatter plot 3D do Dataset Iris')","633bad9c":"# Histograma\npx.histogram(iris, x='petal_length', color='species', nbins=30,\n             title='Distribui\u00e7\u00e3o dos comprimentos de p\u00e9tala por esp\u00e9cie')","8f52431b":"# Box plot\npx.box(iris, x='species', y='petal_length', title='Distribui\u00e7\u00e3o dos comprimentos de p\u00e9tala por esp\u00e9cie')","ff59c876":"# Violin plot\npx.violin(iris, x='species', y='petal_length', box=True, points='all',\n          title='Distribui\u00e7\u00e3o dos comprimentos de p\u00e9tala por esp\u00e9cie')","f5f9319a":"netflix = pd.read_csv('..\/input\/netflix-shows\/netflix_titles.csv')\nnetflix.head()","67a1918c":"px.pie(netflix, names='type', title='Porcentagem de cada tipo de conte\u00fado na Netflix',\n       color_discrete_sequence=['#E50914', '#831010'])","11a453d9":"px.pie(netflix.query('country==\"Brazil\"'), names='rating', color_discrete_sequence=px.colors.qualitative.Prism,\n      title='Porcentagem de conte\u00fado brasileiro para cada classifica\u00e7\u00e3o indicativa', hole=0.5)","5cefd48a":"gapminder_df = px.data.gapminder()\ngapminder_df.head()","a1448980":"# Mapa 2D\nfig = px.scatter_geo(\n    gapminder_df.query('year == 2007'),\n    locations='iso_alpha',\n    color='continent',\n    hover_name='country',\n    size='pop',\n    title='Popula\u00e7\u00e3o mundial em 2007',\n    projection='natural earth', #Esse par\u00e2metro define o tipo de mapa\n)\n\n# Observe que podemos salvar a figura para mostra-la depois\nfig","9bfdab3e":"# Globo 3D\nfig = px.scatter_geo(\n    gapminder_df.query('year == 2007'),\n    locations='iso_alpha',\n    color='continent',\n    hover_name='country',\n    size='pop',\n    title='Popula\u00e7\u00e3o mundial em 2007',\n    projection='orthographic' #Esse par\u00e2metro define o tipo de mapa\n)\n\n# Essa \u00e9 outra forma de mostrar a figura\nfig.show()","76566a30":"px.scatter_geo(\n    gapminder_df,\n    locations='iso_alpha',\n    color='continent',\n    hover_name='country',\n    size='pop',\n    title='Popula\u00e7\u00e3o mundial em 1952 e 2007',\n    projection='natural earth',\n    animation_frame='year' # Cada valor dessa coluna gerar\u00e1 um frame da anima\u00e7\u00e3o\n)","efdf03ae":"Com o Plotly, podemos gerar v\u00e1rios gr\u00e1ficos utilizando mapas. Um dos mais interessantes s\u00e3o os Scatter plots com mapa, no qual podemos usar um globo 3D para representar os dados.","a84b9949":"## 7 - Conclus\u00e3o\nComo foi visto nesse notebook, o Plotly pode ser uma ferramenta muito \u00fatil para a an\u00e1lise explorat\u00f3ria dos dados. Mas, apesar da sua versatilidade, ele n\u00e3o substitui totalmente outras bibliotecas, como matplotlib e seaborn. Afinal, essas ferramentas s\u00e3o muito \u00fateis para gerar gr\u00e1ficos mais leves, onde a interatividade n\u00e3o \u00e9 necess\u00e1ria.\n\nApesar disso, \u00e9 not\u00e1vel a qualidade dos gr\u00e1ficos gerados pelo Plotly, logo ele pode ser utilizado para an\u00e1lises mais detalhadas, gr\u00e1ficos animados, e apresenta\u00e7\u00f5es.\n\nOutra observa\u00e7\u00e3o importante s\u00e3o as diferentes formas como podemos utilizar o Plotly:\n- plotly.express: Interface mais r\u00e1pida e pr\u00e1tica, parecida com o seaborn\n- plotly.graph_objects: Interface que permite personaliza\u00e7\u00e3o mais extensa, parecida com o matplotlib\n\nPara aprender mais, visite a documenta\u00e7\u00e3o oficial do Plotly, ela cont\u00e9m exemplos detalhados dos gr\u00e1ficos apresentados nesse notebook, e muitos outros: https:\/\/plotly.com\/python\/","f7c6a217":"## 5 - Gr\u00e1ficos geogr\u00e1ficos","c0f5562a":"Com o plotly, tamb\u00e9m \u00e9 poss\u00edvel fazer uma grande variedade de plots 3D interativos, nesse exemplo, \u00e9 poss\u00edvel fazer um scatter plot 3D para visualizar os clusters.","e30593f2":"## 3 - Gr\u00e1ficos para representar distribui\u00e7\u00f5es\nExistem v\u00e1rios tipos de gr\u00e1ficos que podem ser utilizados para representar como os diferentes dados est\u00e3o distribu\u00eddos no seu dataset. O Plotly possui diversos gr\u00e1ficos desse tipo. ","668688a5":"## 4 - Gr\u00e1fico de pizza\nEsse tipo de gr\u00e1fico \u00e9 muito conhecido, e pode ser \u00fatil para representar porcentagens de maneira visual.","f3d2012b":"Com o Plotly, notamos que o gr\u00e1fico \u00e9 mais interativo que o do seaborn, mesmo quando escrevemos uma quantidade menor de c\u00f3digo. Mas tamb\u00e9m devemos levar em conta que o Plotly \u00e9 muito mais pesado que o seaborn, isso \u00e9 ainda mais evidente quando geramos muitos gr\u00e1ficos em um notebook, ou temos que gerar gr\u00e1ficos que usam muitos dados.","18f74c52":"## 2 - Scatter plots\nEsse tipo de gr\u00e1fico \u00e9 \u00fatil para observar tend\u00eancias e identificar agrupamentos nos dados.","e3b2e2a5":"## 0 - Importando as bibliotecas e configurando o Plotly\nInicialmente, precisamos instalar e importar as bibliotecas que ser\u00e3o utilizadas. Tamb\u00e9m \u00e9 necess\u00e1rio deixar o plotly no modo offline.","ac65e2de":"## 6 - Anima\u00e7\u00f5es\nUtilizando os mesmos gr\u00e1ficos mostrados anteriormente, tamb\u00e9m podemos criar anima\u00e7\u00f5es com facilidade. Para isso, devemos passar um conjunto de dados que ser\u00e1 respons\u00e1vel pelos frames da anima\u00e7\u00e3o, uma escolha comum para isso s\u00e3o dados relacionados \u00e0 data.","18116c85":"## 1 - Line plots\nEsse tipo de gr\u00e1fico \u00e9 muito comum, principalmente na an\u00e1lise de s\u00e9ries temporais. Nesse exemplo, est\u00e3o sendo explorados os dados dos pre\u00e7os de gasolina no Brasil entre 2004 e 2019, fornecidos pela ANP."}}