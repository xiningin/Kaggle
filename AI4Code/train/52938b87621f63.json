{"cell_type":{"2d892583":"code","a78aa99e":"code","18cf7408":"code","2c077530":"code","6f8ce0a5":"code","6a66ddb3":"code","b60caf50":"code","e805e339":"code","108505df":"code","6948603f":"code","42711272":"code","2997092a":"code","251c26a2":"code","36b8cce2":"code","4bb9e0ed":"code","89e761c1":"code","d73b9d1b":"code","fc6a7aa6":"code","4827a5a9":"code","64ac657c":"code","dcf5b4e9":"code","701d5c9c":"code","d5ef5fcd":"code","39b4c7de":"markdown","7cf0fe88":"markdown","d2e30ceb":"markdown","bf73ec15":"markdown","bdc606c2":"markdown","3a696cfb":"markdown","e2d87de9":"markdown","5f43d4a2":"markdown","a144fd0e":"markdown","0408a5d8":"markdown","67d15e0a":"markdown","6aa411ff":"markdown","36749b25":"markdown","3d3a0237":"markdown","0a015765":"markdown","de787eca":"markdown","1a8d5f73":"markdown"},"source":{"2d892583":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns ","a78aa99e":"data = pd.read_csv('..\/input\/master.csv')","18cf7408":"data.head()","2c077530":"data.shape","6f8ce0a5":"data.columns","6a66ddb3":"data.info()","b60caf50":"data.describe()","e805e339":"data[' gdp_for_year ($) '] = data[' gdp_for_year ($) '].apply(lambda x: x.replace(',','')).astype(float)\ndata=data.drop(['HDI for year','country-year'],axis=1)","108505df":"data.head()","6948603f":"data=data.rename(columns={'suicides\/100k pop':'suicide_100k',' gdp_for_year ($) ':'gdp_yr','gdp_per_capita ($)':'gdp_cap'})","42711272":"data.head()","2997092a":"data.shape","251c26a2":"country = data.groupby('country')['suicides_no','population'].agg('sum')\ncountry['suicides_100k']=country['suicides_no']\/country['population']*100000\ncountry.sort_values(by='suicides_100k',ascending=False,inplace=True)\nprint(\"Highest suicide rate by country\")\nprint(country.head())\nprint()\nprint(\"Lowest suicide rate by country\")\nprint(country.tail())","36b8cce2":"year = data.groupby('year')['suicides_no','population'].agg('sum')\nyear['suicides_100k']=year['suicides_no']\/year['population']*100000\nyear.sort_values(by='suicides_100k',ascending=False,inplace=True)\nyear","4bb9e0ed":"gender = data.groupby('sex')['suicides_no','population'].agg('sum')\ngender['suicides_100k']=gender['suicides_no']\/gender['population']*100000\ngender.sort_values(by='suicides_100k',ascending=False,inplace=True)\ngender","89e761c1":"country_gender = data.groupby(['country','sex'])['suicides_no','population'].agg('sum').reset_index()\ncountry_gender['suicides_100k']=country_gender['suicides_no']\/country_gender['population']*100000\n\ncountry_gender.sort_values(by='suicides_100k',ascending=False,inplace=True)\ncountry_gender.head()","d73b9d1b":"country_gender2 = pd.crosstab(index=country_gender.country,columns=country_gender.sex,values=country_gender.suicides_100k,aggfunc='sum')\ncountry_gender2['m_vs_f']=country_gender2['male']-country_gender2['female']\ncountry_gender2.sort_values(by='m_vs_f',ascending=False,inplace=True)\ncountry_gender2.head()","fc6a7aa6":"age = data.groupby(['age'])['suicides_no','population'].agg('sum')\nage['suicides_100k']=age['suicides_no']\/age['population']*100000\nage.sort_values(by='suicides_100k',ascending=False,inplace=True)\nage","4827a5a9":"country_year_gdp = data[['country','year','gdp_cap']]\ncountry_year_gdp.drop_duplicates(inplace=True)\nprint(country_year_gdp.shape)\n\ncountry_year = country_year_gdp.drop_duplicates(subset=['country','year'])\nprint(country_year.shape)\n","64ac657c":"country_year = data.groupby(['country','year']).agg({'suicides_no':'sum','population':'sum','gdp_cap':'min'}).reset_index()\ncountry_year['suicides_100k']=country_year['suicides_no']\/country_year['population']*100000\ncountry_year.head()","dcf5b4e9":"plt.figure(figsize=(15,15))\nplt.scatter(x=country_year.gdp_cap, y=country_year.suicides_100k)\nplt.title('Suicide rate per 100k population across gdp per capita')\nplt.show()","701d5c9c":"plt.figure(figsize=(15,15))\nplt.scatter(x=country_year[country_year['gdp_cap']<20000].gdp_cap, y=country_year[country_year['gdp_cap']<20000].suicides_100k)\nplt.plot(np.unique(country_year[country_year['gdp_cap']<20000].gdp_cap),\n         np.poly1d(np.polyfit(country_year[country_year['gdp_cap']<20000].gdp_cap,\n                              country_year[country_year['gdp_cap']<20000].suicides_100k,1))\n         (np.unique(country_year[country_year['gdp_cap']<20000].gdp_cap)))\n\nplt.title('Suicide rate per 100k population across gdp per capita (with gdp less than 20k USD)')\nplt.show()","d5ef5fcd":"plt.figure(figsize=(15,15))\nplt.scatter(x=country_year[country_year['gdp_cap']>=20000].gdp_cap, y=country_year[country_year['gdp_cap']>=20000].suicides_100k)\nplt.plot(np.unique(country_year[country_year['gdp_cap']>=20000].gdp_cap),\n         np.poly1d(np.polyfit(country_year[country_year['gdp_cap']>=20000].gdp_cap,\n                              country_year[country_year['gdp_cap']>=20000].suicides_100k,1))\n         (np.unique(country_year[country_year['gdp_cap']>=20000].gdp_cap)))\n\nplt.title('Suicide rate per 100k population across gdp per capita (with gdp higher than or equal to 20k USD)')\nplt.show()","39b4c7de":"### Compares socio-economic info with suicide rates by year and country","7cf0fe88":"So gdp per capita is unique for country-year combination\n<br>Next step is to create the scatter plot.","d2e30ceb":"Another study is the relation between gdp per capita and suicide rate. <br>There is a possibility that the better economy can reduce the suicide rate.\n<br>To study this, scatter plot between gdp per capita and suicide no are plotted. Because gdp per capita is changing across year, therefore there will be one data for each country-year combination.","bf73ec15":"There are numerous studies on gender differences in suicide. From  [Wikipedia](https:\/\/en.wikipedia.org\/wiki\/Gender_differences_in_suicide), the the suicide rate for male is around 1.8 times more often than female. And from data, across all years and countries, the suicide rate for male is around 2.5 times higher than female.\n<br>Again, there is difference on suicide rate across gender in different countries. It's good to see if eastern Europe also has particular findings.","bdc606c2":"\n    1. HDI for year has many missing data. As a result, better remove from dataset. \n    2. gdp_for_year is in text format, better change it back to numeric(floating 64) \n    3. country-year provides no extra information. Cn be deleted  ","3a696cfb":"Although the two best fit lines show different relationship between suicide rate and gdp per capita, the slopes are not very deep. Also from the two scatter plots, one can see the distrubition of scatters are quite broad. As a result, it is hard to connect between suicide rate and gdp per capita.","e2d87de9":"# Suicide Rates Overview 1985 to 2016","5f43d4a2":"After cleaning, there are in total 10 attributes ","a144fd0e":"There are in total 27820 records and 12 attributes ","0408a5d8":"With the improvement of living standard, the suicide rate should be decreasing across year. From the data across year, the highest suicide rates are in 90s.  ","67d15e0a":"The above table shows the difference between suicide rate across gender and country.<br>\nThe effect of gender differnce on suicide is significant in some eastern Europe as the difference is over 40 per 100k population. ","6aa411ff":"Now is time to explore data ","36749b25":"The suicide rates increase with the increase of victum ages. ","3d3a0237":"Although summing up population across all years is not meaningful, however this can simply show the severeness of suicide in different countries without considering the year effect by comparing the total number of suicide and total population in the whole year.\n<br>\n<br> The top 5 countries with suicide rate are Lithuania, Russia, Sri Lanka, Belarus and Hungary. \n<br> The lowest 5 countries with suicide rate are Saint Kitts and Nevis, Dominica, Oman, Jamaica and Antigua and Barbuda. \n\n3 out of 5 top countries with suicide rate are in eastern Europe. This can be an interesting discovery. ","0a015765":"First is check if the gdp per capita is unique for country-year combination","de787eca":"To study more in detailed, separate two groups of data, one with gdp per cap lower than 20k, and one with gdp per cap higher than 20k ","1a8d5f73":"Next step is to rename attribure names."}}