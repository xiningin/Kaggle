{"cell_type":{"a2fd8c2a":"code","409319c9":"code","254757b2":"code","8aa4ade6":"code","bef25310":"code","0fcb7778":"code","5124f6ce":"code","fbc119f3":"code","e6818f53":"code","e5350b02":"code","1ba3b93a":"code","33a284e5":"code","ff5873db":"code","11d18bdf":"code","537b3e83":"code","6336bc2e":"code","210920c2":"code","d21426eb":"code","94110609":"code","593cf786":"code","91744cc6":"code","fe711225":"code","ec634a3a":"code","924287d4":"code","c20f8ae9":"code","60f23565":"code","d753582d":"code","695b5d87":"code","4ea5f32d":"markdown","695d0ee6":"markdown","a25bdf5a":"markdown","799204d4":"markdown","87e75106":"markdown","cb0e92d6":"markdown","43c1e84c":"markdown","2bd608cb":"markdown","e0d7a216":"markdown","906d9e9c":"markdown","472944d3":"markdown","728a60fd":"markdown","c98613c8":"markdown","7a6e9b7d":"markdown","c4750bc0":"markdown","ada152c5":"markdown","38e8ee4a":"markdown","dd2c23e0":"markdown","3ad6520c":"markdown","592c622c":"markdown","31985ca2":"markdown","f69e96d3":"markdown","3fe86c82":"markdown","735b663a":"markdown","03d5b1d1":"markdown","262a2497":"markdown","9420218a":"markdown","d92c8e89":"markdown","d6d40897":"markdown","e2e2f2c0":"markdown","5bb2f0f2":"markdown","28ed87f3":"markdown","db8940e9":"markdown","cb42ab60":"markdown","921e898a":"markdown","268ade35":"markdown","1106aa1c":"markdown","61b68b6e":"markdown","48a079df":"markdown","72b99207":"markdown"},"source":{"a2fd8c2a":"# main libraries \nimport pandas as pd\nimport numpy as np\n# plotting libraries\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nsns.set_style('whitegrid')","409319c9":"#Load files\ntrain = pd.read_csv('..\/input\/titanic\/train.csv')\ntest = pd.read_csv('..\/\/input\/titanic\/test.csv')","254757b2":"print(f'The training data has {train.shape[0]} rows and {train.shape[1]} columns')\nprint(f'The test data has {test.shape[0]} rows and {test.shape[1]} columns')\nprint(f'\\nFeature Names: {train.columns.values}\\n')\ntrain.head()","8aa4ade6":"print(train.dtypes)","bef25310":"train_missing = train.isnull().sum()\ntrain_present = train.shape[0]- train_missing\nprint(f'Missing data in training set: \\n{train_missing}')\n\ntest_missing = test.isnull().sum()\ntest_present = test.shape[0]- test_missing\nprint(f'Missing data in test set: \\n{test_missing}')","0fcb7778":"fig = plt.figure(figsize=(8,5))\nplt.xticks(rotation=90)\nsns.barplot(x=train_present.index,y=train_present.values, palette='crest',edgecolor='black',lw=2)\nplt.title('Training data - missing values');\n\nfig = plt.figure(figsize=(8,5))\nplt.xticks(rotation=90)\nsns.barplot(x=test_present.index,y=test_present.values, palette='coolwarm')\nplt.title('Test data - missing values');","5124f6ce":"sns.set_style('whitegrid')\nsns.countplot(x=train.Embarked, palette='twilight');","fbc119f3":"# Fill the two missing 'Embarked' data points in train data\ntrain_eda = train.copy()\ntrain_eda['Embarked'] = train_eda['Embarked'].fillna('S')\ntrain_eda.head()","e6818f53":"sns.histplot(x=train_eda.Fare,edgecolor='black',lw=1)\nplt.title('Histogram of the Fare Distribution on Titanic');","e5350b02":"# Fill in the missing 'Fare' data point in the test data\ntest_eda = test.copy()\ntest_eda['Fare'] = test_eda['Fare'].fillna(train_eda.Fare.median())","1ba3b93a":"train.groupby('Sex').Survived.mean()","33a284e5":"sns.barplot(x='Sex',y='Survived',data=train, ci=None,palette='autumn')    #ci=None turns off confidence interval line\nplt.title('Suvival Rates for Men and Women')","ff5873db":"sns.set_style('darkgrid')\nsns.barplot(x='Sex',y='Survived',data=train, color='skyblue', ec='black',hatch = '\/',ci=None)\nplt.title('Survival Rates for Men and Women')","11d18bdf":"s = train.groupby('Sex').Survived.value_counts().unstack()\nsns.heatmap(s)\nplt.title('Heatmap of survival counts of Men and Women')","537b3e83":"sns.heatmap(s,annot=True)\nplt.title('Heatmap of survival counts of Men and Women');","6336bc2e":"sns.heatmap(s,annot=True,fmt='.0f')\nplt.title('Heatmap of survival counts of Men and Women');","210920c2":"train_eda.groupby('Pclass').Survived.mean()","d21426eb":"sns.barplot(x='Pclass',y='Survived',data=train, ci=None,palette='bone')\nplt.title('Suvival rates vs. Pclass')","94110609":"sns.barplot(x='Sex',y='Survived',data=train,palette='ocean', hue = 'Pclass',ci=None)\nplt.title(\"Suvival rates grouped by Sex and Pclass\")","593cf786":"sns.histplot(x=train.Age,kde=True)  #shows distribution of ages in integers\nplt.title('Histogram and KDE of Age Feature')","91744cc6":"sns.histplot(x=train.Age,kde=True,binwidth=1)  #shows distribution of ages in integers\nplt.title('Histogram and KDE of Age Feature')","fe711225":"plt.figure(figsize=(9,6))\nsns.histplot(x=train.Age, binwidth=1,hue=train.Pclass)\nplt.title('Age Distribution grouped by Pclass');","ec634a3a":"train_eda['Age'] = train_eda['Age'].fillna(train.Fare.median())\ntest_eda['Age'] = test_eda['Age'].fillna(train.Fare.median())","924287d4":"# look at a box plot - look at the mean age of women vs. men\nsns.boxplot(x='Age',y='Sex',data=train_eda, palette='RdBu')\nplt.title(\"Boxplot of Age Distribution on Titanic\");","c20f8ae9":"sns.violinplot(y=train.Sex, x = train.Age,palette='Pastel2')\nplt.title(\"Violinplot of Age Distribution on Titanic\");","60f23565":"plt.figure(figsize=(8,6))\nsns.swarmplot(x=train.Age)\nplt.title('Swarmplot of age distriubution on Titanic');","d753582d":"sns.barplot(x= train.Parch,y=train.Survived,ci=None,palette='BuPu')\nplt.title('Survival rates vs family size on Titanic ');","695b5d87":"sns.barplot(x= train.SibSp,y=train.Survived,ci=None,palette='flare',ec='black',hatch = '\/')\nplt.title('Survival rates vs. sibling number on Titanic ');","4ea5f32d":"## Thank you","695d0ee6":"From the plot, we can see that the most likely place to embark was Southamption, so I will use that to fill in the two 'Embarked ' values","a25bdf5a":"# EDA and Seaborn Visualizations with Titanic Data\n<br>\nThe purpose of this notebook is to perform a preliminary EDA on the Titanic Data and try out the different visualization options in Seaborn as introduced in the Data Visualization class.  I focused on 5 features in this notebook: Sex, Age, Fare, SibSp,and Parch.  Some of the plot types included in this notebook are:\n\n* barplot\n* histplot\n* countplot\n* boxplot\n* violinplot\n* scatterplot\n* swarmplot\n* heatmap\n\nI also tried out a bunch of the options to change the edge colors, palettes, etc. \n\n<P>I am sharing it in the hopes that it may be useful to others who are learning Seaborn.","799204d4":"## Look at combined effect of sex and pclass\n\nYou can use the hue = '' option to group hue by another feature.  In this case, I will look at survival rate by sex, but with hue representing the Pclass.","87e75106":"This also indicates that small families had a better chance of survival than larger families.","cb0e92d6":"Changing binwidth to 1 will allow for looking at each individual age.","43c1e84c":"You can also use the hue='' option to group into the class variable.  This allows you to see the age distribution per class, but gets a little noisy","2bd608cb":"Another cool way to look at categorical data is the swarmplot.  Which plots each data point as dots. ","e0d7a216":"## EDA Analysis: Pclass\nThis is the passenger class, and is grouped in three classes (First, Second, Third) encoded as Int64's (1,2,3)","906d9e9c":"We have 7 numerical features and 5 categorical.  Fare and Age are floats, while the other 5 numericals are integers.","472944d3":"### Look at survival counts of men and women in a heatmap style plot","728a60fd":"The survival rates for small families (2,3,4 members) is higher than either solo passengers or larger families.","c98613c8":"Since there are a few outliers that may disproportionally affect the mean, I will use the median to fill in the missing fare values.","7a6e9b7d":"## EDA Analysis: Parch\nDid families have a better chance of survival?  Look at the effect of parents and children on survival.","c4750bc0":"The relationship between Pclass and survivial is very strong.  This plot uses the palette='bone' option and a darkgrid.","ada152c5":"## Import Libraries","38e8ee4a":"The boxplot is another interesting visualization tool.  The line in the middle of the colored boxes are the median, and the box extents are the 25% and 75% percentile locations which define the 'Inter Quartile Range' (IQR).  The 'whiskers' are 1.5 x the IQR. The diamonds are points outside 1.5xIQR, which it thinks are potential outliers.  It can be seen that the median male age is slightly higher than the median female.","dd2c23e0":"The test data has one less feature because it is missing the 'Survival' column.\nMost columns are self explanatory with the exception of:\n\n* SibSp = number of siblings\/spouses aboard\n* Parch = number of parents\/children aboard","3ad6520c":"### Use Seaborn bar plots to visualize missing data\n* The first plot (training data) will use the following options:\n    * edgecolor='black'\n    * line width of 2 (lw=2). \n    * 'crest' palette\n* The test data plot will not have an outline, and uses the 'coolwarm' palette","592c622c":"### Explore a few other plotting options\n\n1. Change color to skyblue (color='skyblue')\n2. Make a black outline and hatching (ec='black', hatch = '\/').\n3. Try the seaborn 'darkgrid' style (sns.set_style())","31985ca2":"Both test and train are missing quite a few points from both Age and Cabin.  With so many missing values, I plan to drop 'Cabin' from the features list, and will fill in age with the median.  \n<p>The training data has 2 missing values from 'Embarked', and test data has one missing 'Fare' value. <p>\nFor the columns with only a few values missing, I will fill in these values.  \nI will look at both of these below and decide what to fill in.","f69e96d3":"### First look at data properties - size, features, and first few rows ","3fe86c82":"## EDA Analysis: Age\nThe seaborn histplot will plot age counts, but will also optinally incude a Kernel Density Esitmate (KDE) plot overlayed on top of the histogram.","735b663a":"Thanks for reading.  I hope you found this exploration of Seaborn plots and options to be helpful in some way.","03d5b1d1":"## EDA Analysis: Sibsp\nLook at the effect of siblings and spouses on survival rate","262a2497":"I will fill in the Age missing values a litte later.  First, I want to look survival by sex and pclass.","9420218a":"## EDA Analysis: Sex\nLook at the difference in survival rates between men and women. ","d92c8e89":"## Initial EDA","d6d40897":"## Read into a Pandas DataFrame","e2e2f2c0":"### Visualize and fill in missing Fare data","5bb2f0f2":"### Look for missing data in the test and training sets","28ed87f3":"So, first and second class women had an excellent chance of survival (97% and 92%), but 3rd class women were at about 50%.  First class men had about a 37% survival rate vs. 16% & 14% for second and third class men.","db8940e9":"### Check out the data types of the features","cb42ab60":"### Fill in missing embarked feature","921e898a":"It is hard to see what is going on without annotations.  To turn on the annotations, use the annot=True option.  ","268ade35":"Since there were missing values in Age, I will fill it in with the median","1106aa1c":"We can easily see that women had a better chance of survival.","61b68b6e":"But scientific notation makes it harder to read in this case, so use the fmt='.0f' option to print integer values","48a079df":"### Visualize with Seaborn barplot","72b99207":"The violin plot combines features of the box plot and the KDE plot. The white dot in the middle is the median, the thick part of the line is the IQR, and the symmetrical curvy line is the KDE.  Unlike the boxplot, the violinplot will not flag outliers. "}}