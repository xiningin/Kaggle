{"cell_type":{"94f0ef14":"code","ae33aee9":"code","d8485184":"code","b4b21b46":"code","38b0006d":"code","1968e695":"code","9f72b27a":"code","7354ca2b":"code","0b8492e1":"code","c8869959":"code","3d13c1cf":"code","951f9af6":"code","2d7459e0":"code","56ad3e60":"code","32ad3d81":"code","21f20f2f":"code","f5ec9c6a":"code","ad02f86c":"markdown","bf482f27":"markdown","702e7781":"markdown","6c102090":"markdown"},"source":{"94f0ef14":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nimport plotly.offline as py\nimport plotly.express as px\nfrom plotly.offline import iplot\n\n\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ae33aee9":"df = pd.read_csv('..\/input\/ai4all-project\/results\/deconvolution\/CIBERSORTx_Results_Krasnow_facs_droplet.csv', encoding='ISO-8859-2')\ndf.head()\n","d8485184":"\ndf_grp = df.groupby([\"viral_load\",\"czb_id\"])[[\"B cell\",\"Basal\",\"Basophil\/Mast\", \"Ciliated\", \"Dendritic\", \"Goblet\", \"Ionocyte\", \"Monocytes\/macrophages\", \"Neutrophil\", \"T cell\"]].sum().reset_index()\ndf_grp.head()","b4b21b46":"df_grp = df_grp.rename(columns={\"B cell\":\"Bcell\",\"T cell\":\"Tcell\", \"Monocytes\/macrophages\": \"macrophages\"})","38b0006d":"plt.figure(figsize=(15, 5))\nplt.title('czb_id')\ndf_grp.czb_id.value_counts().plot.bar();","1968e695":"df_grp_plot = df_grp.tail(80)","9f72b27a":"df_grp_r = df_grp.groupby(\"czb_id\")[[\"Bcell\",\"Tcell\",\"macrophages\", \"Dendritic\", \"Ciliated\", \"Neutrophil\"]].sum().reset_index()","7354ca2b":"df_grp_r.head()","0b8492e1":"df_grp_rl20 = df_grp_r.tail(20)","c8869959":"fig = px.bar(df_grp_rl20[['czb_id', 'Bcell']].sort_values('Bcell', ascending=False), \n             y=\"Bcell\", x=\"czb_id\", color='czb_id', \n             log_y=True, template='ggplot2', title='B Cells vs CZB ID')\nfig.show()","3d13c1cf":"df_grp_rl20 = df_grp_rl20.sort_values(by=['Bcell'],ascending = False)","951f9af6":"plt.figure(figsize=(40,15))\nplt.bar(df_grp_rl20.czb_id, df_grp_rl20.Bcell,label=\"Bcell\")\nplt.bar(df_grp_rl20.czb_id, df_grp_rl20.Tcell,label=\"Tcell\")\nplt.bar(df_grp_rl20.czb_id, df_grp_rl20.macrophages,label=\"macrophages\")\nplt.xlabel('viral_load')\nplt.ylabel(\"Count\")\nplt.xticks(fontsize=13)\nplt.yticks(fontsize=15)\n\nplt.legend(frameon=True, fontsize=12)\nplt.title('Immune Response',fontsize=30)\nplt.show()\n\nf, ax = plt.subplots(figsize=(40,15))\nax=sns.scatterplot(x=\"czb_id\", y=\"Bcell\", data=df_grp_rl20,\n             color=\"black\",label = \"Bcell\")\nax=sns.scatterplot(x=\"czb_id\", y=\"Tcell\", data=df_grp_rl20,\n             color=\"red\",label = \"Tcell\")\nax=sns.scatterplot(x=\"czb_id\", y=\"macrophages\", data=df_grp_rl20,\n             color=\"blue\",label = \"macrophages\")\nplt.plot(df_grp_rl20.czb_id,df_grp_rl20.Bcell,zorder=1,color=\"black\")\nplt.plot(df_grp_rl20.czb_id,df_grp_rl20.Tcell,zorder=1,color=\"red\")\nplt.plot(df_grp_rl20.czb_id,df_grp_rl20.macrophages,zorder=1,color=\"blue\")\nplt.xticks(fontsize=13)\nplt.yticks(fontsize=15)\nplt.legend(frameon=True, fontsize=12)","2d7459e0":"df_grp_d = df_grp.groupby(\"viral_load\")[[\"Bcell\",\"Tcell\",\"macrophages\"]].sum().reset_index()","56ad3e60":"df_grp_dl20 = df_grp_d.tail(20)","32ad3d81":"df_grp_d['Bcell_new'] = df_grp_d['Bcell']-df_grp_d['Bcell'].shift(1)\ndf_grp_d['Tcell_new'] = df_grp_d['Tcell']-df_grp_d['Tcell'].shift(1)\ndf_grp_d['macrophages_new'] = df_grp_d['macrophages']-df_grp_d['macrophages'].shift(1)","21f20f2f":"new = df_grp_d\nnew = new.tail(14)","f5ec9c6a":"f, ax = plt.subplots(figsize=(23,10))\nax=sns.scatterplot(x=\"viral_load\", y=\"Bcell\", data=df_grp_dl20,\n             color=\"black\",label = \"B cells\")\nax=sns.scatterplot(x=\"viral_load\", y=\"Tcell\", data=df_grp_dl20,\n             color=\"red\",label = \"T cells\")\nax=sns.scatterplot(x=\"viral_load\", y=\"macrophages\", data=df_grp_dl20,\n             color=\"blue\",label = \"Macrophages\")\nplt.plot(df_grp_dl20.viral_load,df_grp_dl20.Bcell,zorder=1,color=\"black\")\nplt.plot(df_grp_dl20.viral_load,df_grp_dl20.Tcell,zorder=1,color=\"red\")\nplt.plot(df_grp_dl20.viral_load,df_grp_dl20.macrophages,zorder=1,color=\"blue\")","ad02f86c":"#Graphics by Wei Wu\n![](https:\/\/i1.wp.com\/sitn.hms.harvard.edu\/wp-content\/uploads\/2020\/04\/combined_comic6-01.jpg?resize=768%2C1830)http:\/\/sitn.hms.harvard.edu\/flash\/2020\/immune-response-viral-infection\/","bf482f27":"Das War\u00b4s, Kaggle Notebook Runner: Mar\u00edlia Prata   @mpwolke ","702e7781":"#Codes from Vansh Jatana https:\/\/www.kaggle.com\/vanshjatana\/covid-19-in-australia\/notebook","6c102090":"![](https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn%3AANd9GcRISoH2D1d3so8aIWzbv3MNtx1c_s7oMkiSmA&usqp=CAU)sitn.hms.harvard.edu"}}