{"cell_type":{"13ae09dd":"code","d6d5740e":"code","bfcbe9bd":"code","b1a70f5c":"code","737f545a":"code","9bf94abd":"code","552b4cfb":"code","eec88f66":"code","f7e38e5b":"code","f661ae8c":"code","e0868ccc":"code","053fc9f8":"code","0743f1ba":"code","3bb6d33f":"code","77e20a0a":"code","215a3db0":"code","e939c461":"code","afd5f33a":"code","38004f3a":"code","5dbdbccc":"code","04a2bd9f":"code","4a35e8fd":"code","7661b790":"code","cfe7fe82":"code","3fd82f1f":"code","252a528a":"code","3efaa9ea":"code","bb94e069":"code","c2b3ebe5":"markdown","a89c7e49":"markdown"},"source":{"13ae09dd":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport glob","d6d5740e":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path+'\/..\/*md')\nprint(open(all_files[0]).read())","bfcbe9bd":"path = '..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data' \nall_files = glob.glob(path + \"\/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    district_id = filename.split(\"\/\")[4].split(\".\")[0]\n    df[\"district_id\"] = district_id\n    li.append(df)\n    \nengagement_df = pd.concat(li)\nengagement_df = engagement_df.reset_index(drop=True)\nengagement_df.head()","b1a70f5c":"engagement_df['district_id'].value_counts()[:10]","737f545a":"engagement_df['time'].min(), engagement_df['time'].max()","9bf94abd":"engagement_df.describe()","552b4cfb":"districts_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\ndistricts_df.head()","eec88f66":"districts_df['pct_free\/reduced'].value_counts()","f7e38e5b":"products_df = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")\nproducts_df.head()","f661ae8c":"products_df['Primary Essential Function'].value_counts()","e0868ccc":"engagement_df.columns","053fc9f8":"district_id = 2956\nfig = plt.figure(figsize=(20,10))\nfig.suptitle(f\"Engagement Index for {districts_df[districts_df['district_id']==district_id]['state']}\")\nsns.lineplot(data=engagement_df[(engagement_df['district_id']==str(district_id)) & (engagement_df['lp_id']==13117)],x='time',y='engagement_index',hue='lp_id')\nfig.autofmt_xdate()","0743f1ba":"engagement_df['district_id'] = engagement_df['district_id'].astype(int)\nmerged = pd.merge(engagement_df, districts_df, on = 'district_id')\nproducts_df['lp_id'] = products_df['LP ID'].astype(int)\nmerged = pd.merge(merged, products_df, on = 'lp_id')\nmerged.head()","3bb6d33f":"group_by_primary = merged.groupby(['Primary Essential Function', 'state','time']).mean().reset_index()","77e20a0a":"common_functions = merged['Primary Essential Function'].value_counts()[:10].index","215a3db0":"fig = plt.figure(figsize=(20,10))\nsns.scatterplot(data = group_by_primary[group_by_primary['Primary Essential Function'].isin(common_functions)], x='time', y='engagement_index', hue = 'Primary Essential Function', alpha=0.2)","e939c461":"pct_freelunch_df = merged.groupby(['pct_free\/reduced', 'state','time','Sector(s)']).mean().reset_index()","afd5f33a":"pct_pp_total_df = merged.groupby(['pp_total_raw', 'state','time','Sector(s)']).mean().reset_index()   ","38004f3a":"pct_pp_total_df[pct_pp_total_df['engagement_index']>8000], products_df[products_df['lp_id']==20069]","5dbdbccc":"engagement_df.head()","04a2bd9f":"pct_pp_total_df['int_pp_lower'] = [int(band.split(',')[0][1:]) for band in pct_pp_total_df['pp_total_raw']]","4a35e8fd":"pct_pp_total_df['Sector(s)'].value_counts()","7661b790":"pct_pp_total_df.corr()","cfe7fe82":"fig = plt.figure(figsize=(20,10))\nplt.ylim((0,4))\nsns.scatterplot(data = pct_pp_total_df[pct_pp_total_df['Sector(s)']=='Corporate'], x='time', y='pct_access', hue = 'int_pp_lower')","3fd82f1f":"fig = plt.figure(figsize=(20,10))\nplt.ylim((0,4))\nsns.scatterplot(data = pct_pp_total_df[pct_pp_total_df['Sector(s)']=='PreK-12'], x='time', y='pct_access', hue = 'int_pp_lower')","252a528a":"fig = plt.figure(figsize=(20,10))\nsns.scatterplot(data = pct_freelunch_df[pct_freelunch_df['Sector(s)']=='PreK-12'], x='time', y='engagement_index', hue = 'pct_free\/reduced')","3efaa9ea":"for free_lunch_band in merged['pct_free\/reduced'].unique():\n    print(\"Free Lunch Band\", free_lunch_band)\n    print(merged[merged['pct_free\/reduced']==free_lunch_band]['state'].unique())","bb94e069":"merged['state'].value_counts()","c2b3ebe5":"### Outlier: New York, 27\/2\/2020, Schoology","a89c7e49":"### digital learning relate to factors such as district demographics, broadband access, and state\/national level policies and events"}}