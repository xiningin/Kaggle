{"cell_type":{"6f421dee":"code","19a177d6":"code","7a49c44b":"code","b390eb82":"code","20e237ec":"code","be757ce4":"code","29725cd5":"code","1103b5b2":"code","6a73e3aa":"code","a57ba524":"code","3607c1c9":"code","c2fc59d7":"code","8af29b9a":"code","074384f2":"code","51d4bc56":"code","29aaac06":"code","6c148190":"code","b682e035":"code","89d89d6c":"code","482940da":"code","0e9919f1":"code","162177fd":"code","1a0d910e":"code","5f4d7019":"code","e8f3dd41":"code","2fb0bae9":"code","1beda5f8":"code","8221427b":"code","43dbfd97":"code","314233a0":"code","6e96ce06":"code","4bbbcb1b":"code","177ab4eb":"code","3a85e99f":"code","97a7aeb6":"code","efc9b262":"code","38e6cfc2":"code","63bf9adf":"code","2e1d240d":"code","1a94a247":"code","cb81d55e":"code","939a7474":"code","14eb2866":"code","e31160dc":"code","51b5c3c9":"code","cacdb6f3":"code","83e310d3":"code","9a9fa890":"code","f2fc176c":"code","8210e89e":"code","8790d510":"markdown","4c68eaf8":"markdown","47e10f4f":"markdown","92600a52":"markdown","8f05b99e":"markdown","c9b7071e":"markdown","fd74bcea":"markdown"},"source":{"6f421dee":"import os\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport numpy as np","19a177d6":"df = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"unemployment-in-european-union\", \"une_rt_m.tsv\"),delimiter='\\t')\ndf.head()","7a49c44b":"# Splitting the 1st column\n\nall_rows = []\nfor item in df.iloc[:,0:1].values:\n    current_row = str(item[0]).split(\",\")\n    all_rows.append(current_row)\n    \ndf1 = pd.DataFrame(data=all_rows, columns = ['s_adj','age','unit','sex','geo_time'])\n\ndf1.head()","b390eb82":"# Merging with original Dataframe\n\ndata_df = pd.concat([df1,df.iloc[:,1:]],axis=1)\ndata_df.head()","20e237ec":"# Let us consider 10 years data. So we will select columns till 2010M01\n\ndata_df = data_df[['s_adj', 'age', 'unit', 'sex', 'geo_time', '2020M06 ', '2020M05 ',\n       '2020M04 ', '2020M03 ', '2020M02 ', '2020M01 ', '2019M12 ', '2019M11 ',\n       '2019M10 ', '2019M09 ', '2019M08 ', '2019M07 ', '2019M06 ', '2019M05 ',\n       '2019M04 ', '2019M03 ', '2019M02 ', '2019M01 ', '2018M12 ', '2018M11 ',\n       '2018M10 ', '2018M09 ', '2018M08 ', '2018M07 ', '2018M06 ', '2018M05 ',\n       '2018M04 ', '2018M03 ', '2018M02 ', '2018M01 ', '2017M12 ', '2017M11 ',\n       '2017M10 ', '2017M09 ', '2017M08 ', '2017M07 ', '2017M06 ', '2017M05 ',\n       '2017M04 ', '2017M03 ', '2017M02 ', '2017M01 ', '2016M12 ', '2016M11 ',\n       '2016M10 ', '2016M09 ', '2016M08 ', '2016M07 ', '2016M06 ', '2016M05 ',\n       '2016M04 ', '2016M03 ', '2016M02 ', '2016M01 ', '2015M12 ', '2015M11 ',\n       '2015M10 ', '2015M09 ', '2015M08 ', '2015M07 ', '2015M06 ', '2015M05 ',\n       '2015M04 ', '2015M03 ', '2015M02 ', '2015M01 ', '2014M12 ', '2014M11 ',\n       '2014M10 ', '2014M09 ', '2014M08 ', '2014M07 ', '2014M06 ', '2014M05 ',\n       '2014M04 ', '2014M03 ', '2014M02 ', '2014M01 ', '2013M12 ', '2013M11 ',\n       '2013M10 ', '2013M09 ', '2013M08 ', '2013M07 ', '2013M06 ', '2013M05 ',\n       '2013M04 ', '2013M03 ', '2013M02 ', '2013M01 ', '2012M12 ', '2012M11 ',\n       '2012M10 ', '2012M09 ', '2012M08 ', '2012M07 ', '2012M06 ', '2012M05 ', \n       '2012M04 ', '2012M03 ', '2012M02 ', '2012M01 ', '2011M12 ', '2011M11 ', \n       '2011M10 ', '2011M09 ', '2011M08 ', '2011M07 ', '2011M06 ', '2011M05 ', \n       '2011M04 ', '2011M03 ', '2011M02 ', '2011M01 ', '2010M12 ', '2010M11 ', \n       '2010M10 ', '2010M09 ', '2010M08 ', '2010M07 ', '2010M06 ', '2010M05 ', \n       '2010M04 ', '2010M03 ', '2010M02 ', '2010M01 ']]\n\ndata_df.head()","be757ce4":"data_df = data_df.rename(columns={'geo_time': \"Country_code\"})\ndata_df.head()","29725cd5":"# Import Country Codes Dataset","1103b5b2":"countries = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"countries-list\", \"countries_list.csv\"))\ncountries.head()","6a73e3aa":"# Merge original dataframe with country codes dataframe\n\ndata_df_merged = data_df.merge(countries, on=\"Country_code\")\ndata_df_merged.head()","a57ba524":"import seaborn as sns","3607c1c9":"data_df_merged = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"original-dataset-with-countries\", \"Unemployment_Data.csv\"))\ndata_df_merged.head()","c2fc59d7":"data_tr_df = data_df_merged.melt(id_vars=[\"Country\", \"age\", \"unit\", \"sex\", \"s_adj\", \"Country_code\"], \n        var_name=\"Date\", \n        value_name=\"Value\")\n\ndata_tr_df.head()","8af29b9a":"data_tr_df.shape","074384f2":"# First let us clean the data. We remove values which have spaces and non-digit values","51d4bc56":"import re\n\nfor i in range(len(data_tr_df['Value'].values)):\n    data_tr_df['Value'].values[i] = re.sub(r\"[a-zA-Z: ]\", \"\", data_tr_df['Value'].values[i])\n    data_tr_df['Value'].values[i] = data_tr_df['Value'].values[i].replace(\" \",\"\")\n    ","29aaac06":"# Country-wise\n# Let us visualize for one country first. Let's say Austria\n\ncountry_data = data_tr_df[(data_tr_df['Country']=='Austria') & (data_tr_df['age']=='Y25-74') & (data_tr_df['sex']=='T') & (data_tr_df['s_adj']=='TC') & (data_tr_df['unit']=='PC_ACT')]\ncountry_data = country_data.loc[:,['Date','Value']]\nprint(country_data.shape)\ncountry_data.head()","6c148190":"plt.figure(figsize=(20, 12))\ncountries = data_tr_df['Country'].unique()\nfor country in countries:\n    country_data = data_tr_df[(data_tr_df['Country']==country) & (data_tr_df['age']=='Y25-74') & (data_tr_df['sex']=='T') & (data_tr_df['s_adj']=='TC') & (data_tr_df['unit']=='PC_ACT')]\n    country_data = country_data.loc[:,['Date','Value']]\n    plt.plot(country_data['Date'].values, country_data['Value'].values, label=country)\n\nplt.xticks(rotation=90)\nplt.xlabel('Date')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate for Age Group 25-74 country-wise')\nplt.legend()\nplt.show()","b682e035":"# It is difficult to get proper insights","89d89d6c":"# Let's split the Date column into Year and Month and then we'll group by Year to get aggregated Unemployment Count","482940da":"data_tr_df[['Year','Month']] = data_tr_df['Date'].str.split(\"M\",expand=True)\ndata_tr_df.head()","0e9919f1":"data_tr_df.dtypes","162177fd":"# Converting Value to Float Data Type\ndata_tr_df['Value'] = pd.to_numeric(data_tr_df['Value'])","1a0d910e":"data_tr_df.head()","5f4d7019":"# Group by Year - to get overall unemployment count for all the countries","e8f3dd41":"data_tr_df_year = data_tr_df.groupby('Year').sum()","2fb0bae9":"data_tr_df_year.head()","1beda5f8":"plt.figure(figsize=(30, 12))\n\nplt.plot(data_tr_df_year.index, data_tr_df_year.values)\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate overall for last 5 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","8221427b":"# Group by Year and Country - to get overall unemployment count for country-wise","43dbfd97":"data_tr_df_country = data_tr_df.groupby(['Country','Year']).sum().reset_index()","314233a0":"data_tr_df_country.head()","6e96ce06":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ncountries = data_tr_df_country['Country'].unique()\n\nfor country in countries:\n    df_ = data_tr_df_country[data_tr_df_country['Country']==country]\n    plt.plot(df_['Year'], df_['Value'], label=country)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(country))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate overall for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","4bbbcb1b":"# Group by Year and Gender","177ab4eb":"data_tr_df_sex = data_tr_df.groupby(['sex','Year']).sum().reset_index()","3a85e99f":"data_tr_df_sex.head()","97a7aeb6":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ngenders = data_tr_df_sex['sex'].unique()\n\nfor gender in genders:\n    df_ = data_tr_df_sex[data_tr_df_sex['sex']==gender]\n    plt.plot(df_['Year'], df_['Value'], label=gender)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(gender))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Gender-wise for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","efc9b262":"# Group by Age and Year","38e6cfc2":"data_tr_df_age = data_tr_df.groupby(['age','Year']).sum().reset_index()\ndata_tr_df_age.head()","63bf9adf":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\nages = data_tr_df_age['age'].unique()\n\nfor age in ages:\n    df_ = data_tr_df_age[data_tr_df_age['age']==age]\n    plt.plot(df_['Year'], df_['Value'], label=age)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(age))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Age-wise for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","2e1d240d":"# Group by Year, Month and Country","1a94a247":"data_tr_df_year_month_country = data_tr_df.groupby(['Country','Year','Month']).sum().reset_index()\ndata_tr_df_year_month_country.head()","cb81d55e":"# Now let's plot for 2019 and 2020 only\n\ndata_tr_df_year_month_country_last_two_years = data_tr_df_year_month_country[(data_tr_df_year_month_country['Year']=='2019') | (data_tr_df_year_month_country['Year']=='2020')]\n\ndata_tr_df_year_month_country_last_two_years.head()","939a7474":"data_tr_df_year_month_country_last_two_years['Year_Month'] = data_tr_df_year_month_country_last_two_years['Year'] + 'M' + data_tr_df_year_month_country_last_two_years['Month']\ndata_tr_df_year_month_country_last_two_years.head()","14eb2866":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ncountries = data_tr_df_year_month_country_last_two_years['Country'].unique()\n\nfor country in countries:\n    df_ = data_tr_df_year_month_country_last_two_years[data_tr_df_year_month_country_last_two_years['Country']==country]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=country)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(country))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Country-wise for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","e31160dc":"# Group by Country, Age, Year and Month\ndata_tr_df_year_month_country_age = data_tr_df.groupby(['Country','Year','Month','age']).sum().reset_index()","51b5c3c9":"data_tr_df_year_month_country_age","cacdb6f3":"# Let us focus on United States for now\n\ndata_tr_df_year_month_country_age = data_tr_df_year_month_country_age[(data_tr_df_year_month_country_age['Country']=='United States') & ((data_tr_df_year_month_country_age['Year']=='2020') | (data_tr_df_year_month_country_age['Year']=='2019'))]\ndata_tr_df_year_month_country_age","83e310d3":"data_tr_df_year_month_country_age['Year_Month'] = data_tr_df_year_month_country_age['Year'] + 'M' + data_tr_df_year_month_country_age['Month']","9a9fa890":"data_tr_df_year_month_country_age = data_tr_df_year_month_country_age.loc[:,['Year_Month','age','Value']]","f2fc176c":"data_tr_df_year_month_country_age","8210e89e":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\nages = data_tr_df_year_month_country_age['age'].unique()\n\nfor age in ages:\n    df_ = data_tr_df_year_month_country_age[data_tr_df_year_month_country_age['age']==age]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=age)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(age))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Age-wise for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","8790d510":"United States did massive lay-offs in April 2020","4c68eaf8":"# Import Libraries","47e10f4f":"### For month-wise visualization, we first need to convert the dataframe to a pivot dataset for time-series data","92600a52":"### We can now visualize the last 10 years unemployment rate Country-wise, Age-wise and Gender-wise","8f05b99e":"United States have shown some rise in Unemployment Count in this year","c9b7071e":"Most affected age group is 25-74","fd74bcea":"# Frequency Distribution"}}