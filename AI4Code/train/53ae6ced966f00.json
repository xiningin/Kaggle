{"cell_type":{"70c2651d":"code","b2a78bd5":"code","7c808bc6":"code","f7aa9e04":"code","8a8dfce4":"code","dee37705":"code","634e3983":"code","09d5c0ff":"code","24b11192":"code","0ffba48a":"code","dc18c884":"code","5f4b47ce":"code","12498cb3":"code","082f2a8b":"code","5c6f3bcd":"code","1da05443":"code","eadf8881":"code","31201e64":"code","0c44e5e7":"code","98aa762c":"code","b78819f2":"code","0fabe795":"code","d273ec8f":"code","afae5f73":"code","72f9236d":"code","8a65d490":"code","1514414e":"code","591bf757":"code","a986d2c5":"code","b0cdf9cf":"code","a8c9597e":"code","a0a66490":"code","784447c1":"code","a6ecdcc3":"code","0d5aedfc":"code","bd7b08ab":"code","58b403a3":"code","ebce5f40":"markdown","6e3657c0":"markdown","f395f02f":"markdown","d824f57c":"markdown","98955665":"markdown","4d9ad661":"markdown","6c7c87d3":"markdown","53aae756":"markdown","0e320a51":"markdown","29d29307":"markdown","ab47491a":"markdown","a9a7f014":"markdown","e2c8894c":"markdown","2ada648e":"markdown","ee6e4e8f":"markdown","e802fe47":"markdown","6c0488b5":"markdown","4c6e709b":"markdown","d050db7e":"markdown","a313bc62":"markdown","23582f8d":"markdown","3a36cb94":"markdown","71fceb82":"markdown","db834d23":"markdown","e55783ef":"markdown","52444b3b":"markdown","9b89d950":"markdown","425464dd":"markdown","03f246a2":"markdown","f995ca16":"markdown","fd009d05":"markdown","478d77f2":"markdown","7b2a2117":"markdown","ea262f52":"markdown","6b5c4d76":"markdown","e216e467":"markdown","7f1c1fd4":"markdown"},"source":{"70c2651d":"import pandas as pd\nimport numpy as np\nfrom pylab import *\nimport matplotlib.pyplot as plt","b2a78bd5":"df=pd.read_csv('..\/input\/uberdrives\/My Uber Drives - 2016.csv')","7c808bc6":"df.columns #Displaying Column Names","f7aa9e04":"## lets explore the shape of dataframe.\nprint(\" Shape of the  dataframe is: \" , df.shape)","8a8dfce4":"# Lets exlore the first 5 rows of dataframe to see sample records.\ndf.head()","dee37705":"#exploring last 5 rows\ndf.tail(5)  ","634e3983":"df.isnull().sum()","09d5c0ff":"df=df.dropna()","24b11192":"df.isnull().sum()","0ffba48a":"df.describe()## to get the summary stats ","dc18c884":"df['MILES*'].max() #to get maximum value in miles column","5f4b47ce":"df.sample(7)  #to display random sample records ","12498cb3":"df.dtypes #to get datatype of each columns","082f2a8b":"df.info()    # to get complete info about dataframe","5c6f3bcd":"df.sort_values(by=['MILES*'],ascending=False).head(10) #Sorting based on miles","1da05443":"df[df['PURPOSE*'].isnull()] ## displays the rows where purpose is null ","eadf8881":"df1=df.copy() #taking copy of dataframe","31201e64":"df1[\"START_DATE*\"]=pd.to_datetime(df[\"START_DATE*\"],format=\"%m\/%d\/%Y %H:%M\") #changing the datatype and format of start date","0c44e5e7":"df1.info()","98aa762c":"df1.head()","b78819f2":"sd_m_dis=df1[\"START_DATE*\"].dt.month.value_counts()\nsd_m_dis=sd_m_dis.sort_index()\nsd_m_mean=sd_m_dis.mean()\ndef autolabel(rects):\n    for rect in rects:\n        height = rect.get_height()\n        plt.text(rect.get_x()+rect.get_width()\/2., 1.03*height, '%s' % int(height))\nfigure(0)\nrects=plt.bar(sd_m_dis.index,sd_m_dis.values)\nplt.plot([0,len(sd_m_dis.index)+1],[sd_m_mean,sd_m_mean],\"r--\")\nplt.title(\"START_DATE DISTRIBUTE\")\nplt.xlabel(\"Month\")\nplt.ylabel(\"Trips\")\nplt.grid()\nautolabel(rects)","0fabe795":"sd_h_dis=df1[\"START_DATE*\"].dt.hour.value_counts()\nsd_h_dis=sd_h_dis.sort_index()\nsd_h_mean=sd_h_dis.mean()\nfigure(1)\nrects=plt.bar(sd_h_dis.index,sd_h_dis.values)\nplt.plot([0,len(sd_h_dis.index)+1],[sd_h_mean,sd_h_mean],\"r--\")\nplt.title(\"START_DATE(Hours) DISTRIBUTE\")\nplt.xlabel(\"Hours\")\nplt.ylabel(\"Trips\")\nplt.grid()\nautolabel(rects)","d273ec8f":"ct_dis=df1[\"CATEGORY*\"].value_counts()\nfigure(2)\nrects=plt.bar(range(1,len(ct_dis.index)+1),ct_dis.values)\nplt.title(\"Category DISTRIBUTE\")\nplt.xlabel(\"Category\")\nplt.ylabel(\"Quantity\")\nplt.xticks(range(1,len(ct_dis.index)+1),ct_dis.index)\n#plt.grid()\nautolabel(rects)","afae5f73":"st_dis=df1[\"START*\"].value_counts()\nst_dis.sort_values(inplace=True,ascending=False)\nst_dis=st_dis.iloc[:10]\nprint(\"Start place:\\n\",st_dis)","72f9236d":"stp_dis=df[\"STOP*\"].value_counts()\nstp_dis.sort_values(ascending=False)\nstp_dis=stp_dis.iloc[:10]\nprint(\"STOP_PLACE:\\n\",stp_dis)","8a65d490":"ml_dis=df1[\"MILES*\"]\nml_range_lst=[\"<=5\",\"5-10\",\"10-15\",\"15-20\",\">20\"]\nml_dic=dict()\nfor item in ml_range_lst:\n    ml_dic[item]=0\nfor mile in ml_dis.values:\n    if mile<=5:\n        ml_dic[\"<=5\"]+=1\n    elif mile<=10:\n        ml_dic[\"5-10\"]+=1\n    elif mile<=15:\n        ml_dic[\"10-15\"]+=1\n    elif mile<=20:\n        ml_dic[\"15-20\"]+=1\n    else:\n        ml_dic[\">20\"]+=1\nml_dis=pd.Series(ml_dic)\nml_dis.sort_values(inplace=True,ascending=False)\nprint(\"Miles:\\n\",ml_dis)","1514414e":"pp_dis=df[\"PURPOSE*\"].value_counts()\npp_dis.sort_values(ascending=False)\npp_dis=pp_dis.iloc[:10]\nprint(\"PURPOSE:\\n\",pp_dis)","591bf757":"df1['triptype']=np.where(df1['MILES*']<=df1['MILES*'].mean(),'short','long')","a986d2c5":"trip_type=df1['triptype'].value_counts()\ntrip_type.sort_values(ascending=False)\ntrip_type=trip_type.iloc[:10]\nprint(\"PURPOSE:\\n\",trip_type)","b0cdf9cf":"df1['KMS']=df1['MILES*'].apply(lambda Y :Y*1.6)","a8c9597e":"df1.head()","a0a66490":"df1[\"END_DATE*\"]=pd.to_datetime(df1[\"END_DATE*\"],format=\"%m\/%d\/%Y %H:%M\") #changing the datatype and format of END date\n#Calculate the duration for the rides\ndf1['Duration'] = df1['END_DATE*'] - df1['START_DATE*']\n#convert duration to numbers(minutes)\ndf1.loc[:, 'Duration'] = df1['Duration'].apply(lambda x: pd.Timedelta.to_pytimedelta(x).days\/(24*60) + pd.Timedelta.to_pytimedelta(x).seconds\/60)\ndf1['SpeedMph']=df1['MILES*']\/df1['Duration'] #creating speed column","784447c1":"print('Average length of trip in minutes:\\n',df1['Duration'].mean())","a6ecdcc3":"print('Trips per month', sd_m_dis)","0d5aedfc":"print('Trips per hour',sd_h_dis)","bd7b08ab":"df1.groupby(['CATEGORY*','PURPOSE*'])['MILES*'].agg(['mean','count','max','min'])","58b403a3":"df1.groupby(['CATEGORY*','triptype','PURPOSE*'])['SpeedMph'].agg(['mean','median','max','min','count'])","ebce5f40":"**Category vs Triptype vs Purpose Vs Speed**","6e3657c0":"**6.Purpose**","f395f02f":"Some Basic methods to explore data :)","d824f57c":"**Explore start date by hour**","98955665":"Driving is picking more shorter distance trips than a longer one. I think he can get more money on shorter trips.","4d9ad661":"**2.End Date**","6c7c87d3":"I can see some missing Values in the datset :) ","53aae756":"We can see datatype and format of start date column has been changed","0e320a51":"**4.Start**","29d29307":"**Findings**","ab47491a":"**3.Category**","a9a7f014":"Driver took more number of rides in the  month of december.Interestingly,there is no ride recorded in september. In April,May,August and october trips are less than the average value.","e2c8894c":"We have alresdy identified that there is more number of short trips. Creation of new column can be used for further analysis.","2ada648e":"**5.Stop**","ee6e4e8f":"Based on above analysis we can answer many questions on the dataset. Few are shown below.","e802fe47":"**Explore start date by month**","6c0488b5":"We have created speed column from miles and duration columns. This can be used for further analysis.","4c6e709b":"We can see most of trips are business trip. So driver spending most of the time for business work rather than personal work.","d050db7e":"We have dropped all null values","a313bc62":"For this notebook we are going to analyse the uber dataset which contains details of uber drivers. This dataset helps us to understand the behaviour of an ordinary Uber customer. \n\nI will try to do some exploratory data analysis and I will also try to find answers for some questions to uncover insights.","23582f8d":"We can conclude drivers place is CARY","3a36cb94":"**Creating new columns**","71fceb82":"**What is the average length of the trip?**","db834d23":"# Data Analysis Using Python","e55783ef":"Created KM column based on miles.","52444b3b":"Only Purpose column has many missing values. In this notebook we are not going deeper in msiing value analysis so dropping the missing data.","9b89d950":"**Category vs Purpose Vs Miles**","425464dd":"**1. Start Date**","03f246a2":"Most of the orders are between 10am and 6pm","f995ca16":"Importing Necessary Packages","fd009d05":"Meeting and Meal\/Entertain purpose has more trips. Surprisingly,Between Offices and airport travel has very less trips.","478d77f2":"End date will be similar to start date so we are skipping it :)","7b2a2117":"Most of the trips are started at CARY","ea262f52":"Let's analyse each column separately ","6b5c4d76":"**Whats is average number of rides per month?**","e216e467":"We can see most of the trips are used for business\/Meetings trips.","7f1c1fd4":"**Whats is average number of rides per hour?**"}}