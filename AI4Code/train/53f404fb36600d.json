{"cell_type":{"349d787d":"code","350acb36":"code","e34a25e4":"code","106994b2":"code","32602dc0":"code","963cbb20":"code","20be06ff":"code","86aaea0f":"code","2e297749":"code","756b88ca":"code","0fb387f6":"code","73c2154b":"code","bb11d451":"code","5eede840":"code","ce516c47":"code","facaf5d7":"code","b819a150":"code","a99fc602":"code","5d76cfc7":"code","4403e223":"code","2ed66cab":"code","fc78eb44":"code","dd79b76a":"code","f6453048":"code","218bb2b6":"code","76beb84e":"code","9102ecdf":"code","319c66aa":"code","dcc9e3be":"code","b68883d4":"code","3e8060a4":"code","d5205160":"code","114e4024":"code","27b396a5":"code","e6e3c0e3":"code","841a40c0":"code","f2de91b6":"code","374662b9":"code","3518cd41":"code","3919521f":"code","6f9ab5db":"code","2cb0ef4e":"code","8b926736":"code","0f2e16df":"code","e0481809":"code","6199660e":"code","b7f8dcaa":"code","14e5f27e":"code","bf41057d":"code","1c8e7596":"code","13482cc7":"code","7c1ee9f2":"code","1c271ceb":"code","a60148e5":"code","f779cefb":"code","ee5787f3":"code","f9bb10c8":"code","aa8eb00f":"code","2aea2546":"code","bf555bef":"code","b07c55fc":"code","3f67a46c":"code","43ff81aa":"code","516eea3c":"code","aeb42c3a":"code","0027f5af":"code","15a4d112":"code","32bf8761":"code","75ff2c84":"code","deb49b18":"code","9a8f45a9":"code","2455791a":"code","5d0ccac4":"code","9419418a":"code","b3df6a20":"code","853d9dfd":"code","f29499eb":"markdown","ac36d40e":"markdown","2890c99d":"markdown","33d6fdab":"markdown","2d56c2e7":"markdown","e27d0bec":"markdown","8f6606fd":"markdown","f68b67b8":"markdown","f9b1d390":"markdown","80012959":"markdown"},"source":{"349d787d":"import numpy as np \nimport pandas as pd ","350acb36":"data=pd.DataFrame()","e34a25e4":"for i in range(1000):\n    data.loc[i,\"UserID\"]=np.random.randint(30000,30100)","106994b2":"data.head()","32602dc0":"data.shape","963cbb20":"for i in range(1000):\n    A=np.random.randint(100,305)\n    data.loc[i,\"RestaurantID\"]=str(A)+\"R\"","20be06ff":"data.head()","86aaea0f":"rate=[2.5,3,3.5,4,4.5,5]","2e297749":"for i in range(1000):\n    data.loc[i,\"rating\"]=np.random.choice(rate,1)","756b88ca":"data.head()","0fb387f6":"data.info()","73c2154b":"#her \u00e7al\u0131\u015ft\u0131rd\u0131\u011f\u0131mda farkl\u0131 tip geliyor e\u011fer rating object gelirse bu \u015fekilde float'a \u00e7eviriyorum.\n#data[\"rating\"]=data[\"rating\"].astype(\"float\")","bb11d451":"#data.info()","5eede840":"data.nunique()","ce516c47":"data[\"RestaurantID\"].nunique()","facaf5d7":"data.groupby(\"UserID\")[\"RestaurantID\"].count()","b819a150":"user_restaurant_df = data.pivot_table(index=[\"UserID\"], columns=[\"RestaurantID\"], values=\"rating\")","a99fc602":"user_restaurant_df","5d76cfc7":"user_restaurant_df.T.sum().sort_values(ascending=False)","4403e223":"len(user_restaurant_df.columns)","2ed66cab":"#random \u015fekilde bir restoran id'si tutuyorum.\nrandom_restaurant=pd.Series(data[\"RestaurantID\"]).sample(1, random_state=42).values[0]","fc78eb44":"random_restaurant","dd79b76a":"# null de\u011fil mi diye soruyor false ve true cevaplar\u0131n\u0131 al\u0131yorum null de\u011ferler i\u015fleme girmesin diye\nrestaurant_id=user_restaurant_df.get(random_restaurant).notnull()","f6453048":"restaurant_id","218bb2b6":"#item based sonucu\nuser_restaurant_df.corrwith(restaurant_id).sort_values(ascending=False).head(15)","76beb84e":"random_restaurant1=pd.Series(data[\"RestaurantID\"]).sample(1, random_state=15).values[0]","9102ecdf":"random_restaurant1","319c66aa":"restaurant_id1=user_restaurant_df.get(random_restaurant1).notnull()\n#restaurant_id=user_restaurant_df[user_restaurant_df.get(random_restaurant).notnull()]","dcc9e3be":"user_restaurant_df.corrwith(restaurant_id1).sort_values(ascending=False).head(10)","b68883d4":"random_restaurant2=pd.Series(data[\"RestaurantID\"]).sample(1, random_state=34).values[0]","3e8060a4":"random_restaurant2","d5205160":"restaurant_id2=user_restaurant_df.get(random_restaurant2).notnull()","114e4024":"restaurant_id2","27b396a5":"final2=user_restaurant_df.corrwith(restaurant_id2).sort_values(ascending=False).head(15)\nfinal2","e6e3c0e3":"user_restaurant_df.head()","841a40c0":"random_user=np.random.choice(user_restaurant_df.index)","f2de91b6":"random_user","374662b9":"random_user_df=user_restaurant_df[user_restaurant_df.index==random_user]","3518cd41":"random_user_df","3919521f":"#Random bir \u015fekilde se\u00e7ilen kullan\u0131c\u0131n\u0131n gitti\u011fi restoranlar\u0131 bir listeye at\u0131yoruz.\nrandom_user_df.columns[random_user_df.notna().any()].tolist()","6f9ab5db":"wentTo_restaurant=random_user_df.columns[random_user_df.notna().any()].tolist()","2cb0ef4e":"user_restaurant_df.loc[user_restaurant_df.index==random_user,user_restaurant_df.columns]","8b926736":"#\u00d6rnek olarak random user'\u0131n bir restorana verdi\u011fi puana bak\u0131yoruz.\nuser_restaurant_df.loc[user_restaurant_df.index == random_user, user_restaurant_df.columns == wentTo_restaurant[2]]","0f2e16df":"wentTo_restaurant_df=user_restaurant_df[wentTo_restaurant]","e0481809":"#S\u00fctunlarda yaln\u0131zca random user'\u0131n gitti\u011fi restoranlar var.\nwentTo_restaurant_df","6199660e":"user_restaurant_count=wentTo_restaurant_df.T.notnull().sum()","b7f8dcaa":"#Di\u011fer kullan\u0131c\u0131lar\u0131n random userla ortak gittikleri restoran say\u0131s\u0131\n# veri k\u00fc\u00e7\u00fck oldu\u011fundan say\u0131lar da k\u00fc\u00e7\u00fck\nuser_restaurant_count","14e5f27e":"user_restaurant_count=user_restaurant_count.reset_index()","bf41057d":"user_restaurant_count.columns=[\"UserID\",\"wentTorestaurant\"]","1c8e7596":"user_restaurant_count.head()","13482cc7":"user_restaurant_count.describe().T","7c1ee9f2":"user_restaurant_count[user_restaurant_count[\"wentTorestaurant\"]>1][\"UserID\"]","1c271ceb":"users_same_restaurants=user_restaurant_count[user_restaurant_count[\"wentTorestaurant\"]>1][\"UserID\"]","a60148e5":"final=pd.concat([wentTo_restaurant_df[wentTo_restaurant_df.index.isin(users_same_restaurants)],random_user_df[wentTo_restaurant]])","f779cefb":"final.shape","ee5787f3":"final.T.corr()","f9bb10c8":"corr_df = final.T.corr().unstack().sort_values().drop_duplicates()","aa8eb00f":"corr_df = pd.DataFrame(corr_df, columns=[\"corr\"])","2aea2546":"corr_df.index.names = ['user_id_1', 'user_id_2']\ncorr_df = corr_df.reset_index()","bf555bef":"corr_df.head()","b07c55fc":"#Veri k\u00fc\u00e7\u00fck oldu\u011fundan cor de\u011ferini 0.01 gibi k\u00fc\u00e7\u00fck bir de\u011fer veriyorum\ntop_users = corr_df[(corr_df[\"user_id_1\"] == random_user) & (corr_df[\"corr\"] >= 0.01)][\n    [\"user_id_2\", \"corr\"]].reset_index(drop=True)","3f67a46c":"top_users = top_users.sort_values(by='corr', ascending=False)","43ff81aa":"top_users.rename(columns={\"user_id_2\": \"UserID\"}, inplace=True)","516eea3c":"top_users","aeb42c3a":"data","0027f5af":"top_users_ratings = top_users.merge(data[[\"UserID\", \"RestaurantID\", \"rating\"]], on=\"UserID\",how=\"inner\")","15a4d112":"top_users_ratings[\"corr\"].describe()","32bf8761":"top_users_ratings","75ff2c84":"#Hangi de\u011fere g\u00f6re se\u00e7im yapaca\u011f\u0131m\u0131za karar veremedi\u011fimiz i\u00e7in hem rating hem de korelasyon de\u011ferlerini kullan\u0131yoruz\n#Bunu da iki de\u011feri \u00e7arparak sa\u011fl\u0131yoruz.\ntop_users_ratings['weighted_rating'] = top_users_ratings['corr'] * top_users_ratings['rating']\n","deb49b18":"top_users_ratings #yaln\u0131zca 2 ki\u015fi random user'\u0131n best friend'i olabilecek d\u00fczeyde :)","9a8f45a9":"top_users_ratings.groupby('RestaurantID').agg({\"weighted_rating\": \"mean\"}).head()","2455791a":"recommendation_df = top_users_ratings.groupby('RestaurantID').agg({\"weighted_rating\": \"mean\"})","5d0ccac4":"recommendation_df = recommendation_df.reset_index()","9419418a":"recommendation_df.head()","b3df6a20":"recommendation_df[recommendation_df[\"weighted_rating\"] > 4]","853d9dfd":" recommendation_df[recommendation_df[\"weighted_rating\"] > 4].sort_values(\"weighted_rating\", ascending=False)","f29499eb":"### user based'e g\u00f6re restoran tavsiyeleri","ac36d40e":"![fig3.png](attachment:404547b4-9e14-46f9-8f20-7c5db5c171e7.png)\n:https:\/\/psl.linqs.org\/blog\/2018\/07\/30\/hyper.html","2890c99d":"Item Based sonu\u00e7lar\u0131 bu \u015fekildeydi.","33d6fdab":"# User Based ve Item Based'e g\u00f6re Restoran Tavsiye Sistemi","2d56c2e7":"User Based'e g\u00f6re de tavsiye edilen restoranlar yukar\u0131daki gibi.\n\n>  Bambaaa\u015f\u015f\u015fka bir \u00e7al\u0131\u015fmada g\u00f6r\u00fc\u015fmek \u00fczere :)","e27d0bec":"Kaggle b\u00fcy\u00fck veri setlerini kullanmama izin vermedi\u011fi i\u00e7in (ram sorunu) kendi verimi kendim olu\u015fturuyorum.","8f6606fd":"**** \u0130\u015f Birli\u011fine Dayal\u0131 Filtreleme Sistemleri (Collaborative Filtering Systems) ****\n* Kullan\u0131c\u0131 \u0130\u015fbirli\u011fine Dayal\u0131 Filtreleme (User Collaborative Filtering)\n* \u00dcr\u00fcn \u0130\u015fbirli\u011fine Dayal\u0131 Filtreleme (Item Collaborative Filtering)\n\nItem Based(nesne,\u00fcr\u00fcn tabanl\u0131), herhangi bir \u00fcr\u00fcn\u00fc alan ki\u015fiye benzer \u00fcr\u00fcnler \u00f6nerilmesidir; a\u015fa\u011f\u0131daki \u00f6rnekte oldu\u011fu gibi herhangi bir restorana giden m\u00fc\u015fteriye benzer restoranlar\u0131 bu \u015fekilde \u00f6nerece\u011fiz.\n\nUser Based(kullan\u0131c\u0131 tabanl\u0131)'a g\u00f6re kullan\u0131c\u0131lar\u0131n hareketleri analiz edilir.\u00d6rne\u011fin bir m\u00fc\u015fteri  \n196R-202R-301R restoranlar\u0131na gitmi\u015f ve 196R'yi be\u011fenmi\u015f,\u00f6neri yapaca\u011f\u0131m\u0131z kullan\u0131c\u0131 da yaln\u0131zca 196R'ye gitmi\u015f ve be\u011fenmi\u015f olsun.Di\u011fer m\u00fc\u015fteri di\u011fer restoranlar\u0131 da be\u011fendiyse bu kullan\u0131c\u0131ya o restoranlar\u0131 \u00f6nerebiliriz.\n\nBu \u00e7al\u0131\u015fmada k\u0131saca bir m\u00fc\u015fteriye, m\u00fc\u015fterinin gitti\u011fi restoranlara benzer restoranlar\u0131 (item based) ve kendisiyle benzer kullan\u0131c\u0131lar\u0131n gitti\u011fi restoranlar\u0131(user based) \u00f6nerece\u011fiz.\n\nYararlan\u0131lan kaynak: https:\/\/bootcamp.veribilimiokulu.com\/egitim\/veri-bilimci-yetistirme-programi\/","f68b67b8":"30000.0 nolu user 14 tane restorana gitmi\u015f,30001.0  nolu user 4 farkl\u0131 restorana gitmi\u015f vs.","f9b1d390":"126R' ye benzer restoranlar 292R-133R-188R olarak s\u0131ralanm\u0131\u015f.Yani 126R'ye giden biri bu restoranlara da gitmeli.Veri k\u00fc\u00e7\u00fck oldu\u011fu i\u00e7in korelasyon de\u011ferleri y\u00fcksek \u00e7\u0131kabiliyor b\u00fcy\u00fck verilerde \u00e7ok \u00e7ok daha d\u00fc\u015f\u00fck de\u011fer \u00e7\u0131kacakt\u0131r.","80012959":"2.Restorana benzer restoranlar \u00f6nerelim."}}