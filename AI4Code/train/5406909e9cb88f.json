{"cell_type":{"bf83a6da":"code","50ef7929":"code","9cbf6bfc":"code","43998275":"code","b9b7ca06":"code","d6b12915":"code","d38e59c0":"code","4d4c1ec0":"code","142c7bb3":"code","bf32074a":"code","0026629d":"code","ec4e6bb0":"code","03b3188e":"code","ae0e3325":"code","a36f4f0d":"code","3886a7d9":"code","4aab1982":"code","0134f343":"code","82210bb8":"code","5d86f607":"code","e4e42c0e":"code","4dd1f270":"code","0b6b498b":"code","2bdd81ce":"code","cc57c2d6":"code","371d7af7":"code","8a9dee52":"code","62b2736c":"code","791026fc":"code","2953abf6":"code","cb51a9f5":"markdown","1ac92f70":"markdown","95c24965":"markdown","8968dcaf":"markdown","684f9e37":"markdown","c17db800":"markdown","4cb1b3a4":"markdown","69535a47":"markdown","98544287":"markdown","321a11b1":"markdown","142e0d95":"markdown","1dbaa30f":"markdown","a988743c":"markdown","405a713a":"markdown","2030acc1":"markdown","e596e56d":"markdown","ea1d3ff5":"markdown","d23f7c6c":"markdown","4056b288":"markdown","b0dc8dd8":"markdown","ba55c5a0":"markdown","285ce307":"markdown","cd2fb4d4":"markdown","882a178e":"markdown","c3d964c4":"markdown","69d36055":"markdown","c12a615e":"markdown","7f862a94":"markdown"},"source":{"bf83a6da":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.ensemble import ExtraTreesClassifier, RandomForestClassifier\n%matplotlib inline\nsns.set()","50ef7929":"data_df = pd.read_csv(\"..\/input\/titanic\/train.csv\")\ndata_df.head()","9cbf6bfc":"data_df.describe(include=\"all\")","43998275":"sns.countplot(x=\"Survived\", data=data_df)","b9b7ca06":"sns.countplot(x=\"Pclass\", data=data_df)","d6b12915":"sns.countplot(x=\"Sex\", data=data_df)","d38e59c0":"sns.distplot(a=data_df[\"Age\"].dropna())","4d4c1ec0":"sns.countplot(x=\"SibSp\", data=data_df)","142c7bb3":"sns.countplot(x=\"Parch\", data=data_df)","bf32074a":"sns.countplot(x=\"Embarked\", data=data_df)","0026629d":"sns.distplot(a=data_df[\"Fare\"])","ec4e6bb0":"sns.boxplot(x=\"Fare\", data=data_df)","03b3188e":"sns.heatmap(data_df.corr(), annot=True)","ae0e3325":"sns.violinplot(x=\"Pclass\", y=\"Age\", hue=\"Sex\", data=data_df)","a36f4f0d":"sns.swarmplot(x=\"Pclass\", y=\"Fare\", data=data_df)","3886a7d9":"sns.countplot(x=\"Pclass\", hue=\"Survived\", data=data_df)","4aab1982":"sns.countplot(x=\"Sex\", hue=\"Survived\", data=data_df)","0134f343":"grouped_df = data_df.groupby(\"Survived\")\nsurvived_df = grouped_df.get_group(1)\n\nage_survived = survived_df[\"Age\"].dropna()\nsns.distplot(a=age_survived, label=\"Survived\", bins=range(0, 80, 5), kde=False)\nsns.distplot(a=data_df[\"Age\"].dropna(), label=\"Total\", bins=range(0, 80, 5), kde=False)\nplt.legend()","82210bb8":"sibsp_survived = survived_df[\"SibSp\"]\nsns.distplot(a=sibsp_survived, label=\"Survived\", bins=range(0, 8, 1), kde=False)\nsns.distplot(a=data_df[\"SibSp\"], label=\"Total\", bins=range(0, 8, 1), kde=False)\nplt.legend()","5d86f607":"parch_survived = survived_df[\"Parch\"]\nsns.distplot(a=parch_survived, label=\"Survived\", bins=range(0, 6, 1), kde=False)\nsns.distplot(a=data_df[\"Parch\"], label=\"Total\", bins=range(0, 6, 1), kde=False)\nplt.legend()","e4e42c0e":"family_survived = survived_df[\"Parch\"] + survived_df[\"SibSp\"]\nsns.distplot(a=family_survived, label=\"Survived\", bins=range(0, 11, 1), kde=False)\nsns.distplot(a=data_df[\"Parch\"]+data_df[\"SibSp\"], label=\"Total\", bins=range(0, 11, 1), kde=False)\nplt.legend()","4dd1f270":"fare_survived = survived_df[\"Fare\"]\nsns.distplot(a=fare_survived, label=\"Survived\", bins=range(0, 200, 10), kde=False)\nsns.distplot(a=data_df[\"Fare\"], label=\"Total\", bins=range(0, 200, 10), kde=False)\nplt.legend()","0b6b498b":"sns.countplot(x=\"Embarked\", hue=\"Survived\", data=data_df)","2bdd81ce":"sns.countplot(x=\"Embarked\", hue=\"Pclass\", data=data_df)","cc57c2d6":"data_df.isnull().sum()","371d7af7":"data_df[\"Age\"] = data_df[\"Age\"].fillna(np.mean(data_df[\"Age\"]))\ndata_df[\"Embarked\"] = data_df[\"Embarked\"].fillna(\"S\")\ndata_df[\"Cabin\"] = data_df[\"Cabin\"].fillna(\"Other\")\ndata_df.isnull().sum().sum()","8a9dee52":"data_df","62b2736c":"data_df.drop([\"Name\", \"Ticket\", \"PassengerId\"], axis=1, inplace=True)\ndata_df[\"Sex\"] = LabelEncoder().fit_transform(data_df[\"Sex\"])\ndata_df[\"Cabin\"] = LabelEncoder().fit_transform(data_df[\"Cabin\"])\ndata_df[\"Embarked\"] = LabelEncoder().fit_transform(data_df[\"Embarked\"])","791026fc":"rf = RandomForestClassifier(n_estimators=500)\net = ExtraTreesClassifier(n_estimators=500)\n\nrf.fit(data_df.drop(\"Survived\", axis=1), data_df[\"Survived\"])\net.fit(data_df.drop(\"Survived\", axis=1), data_df[\"Survived\"])","2953abf6":"figures, axes = plt.subplots(1, 2, figsize=(24, 12))\nprint(rf.feature_importances_)\naxes[0].bar(height=rf.feature_importances_, x=range(1, 9), tick_label=[\"Pclass\", \"Sex\", \"Age\", \"SibSp\", \"Parch\", \"Fare\", \"Cabin\", \"Embarked\"])\naxes[0].set_title(\"Random Forest Feature Importances\")\naxes[1].bar(height=et.feature_importances_, x=range(1, 9), tick_label=[\"Pclass\", \"Sex\", \"Age\", \"SibSp\", \"Parch\", \"Fare\", \"Cabin\", \"Embarked\"])\naxes[1].set_title(\"Extra Trees Feature Importances\")","cb51a9f5":"As expected, the survived to died ratio grows as the pclass increases. Higher class passengers are probably given priority when boarding lifeboats.","1ac92f70":"Surprisingly over half of the women survived. On the other hand, the majority of men died. Women might also have been given priority during the evacuation.","95c24965":"I chose to overlay two distplots because doing a bar plot like before will make the graph look too crowded. This graph effectively shows the same information of the previous bar charts. The higher the blue bar is inside the yellow bar, the higher the survival rate.\n\nIt seems like, in general, older people tend to survive a lot less, and very young children tend to have an extremely high survival rate. This might be that young children are given priority when evacuating just as women might have been.\n\nNext we'll look at SibSp (number of siblings and spouses)","8968dcaf":"Looks like most people are between 20 and 40 years old. It will be interesting to explore the relationship between age and gender in the next section.","684f9e37":"Before seeing how each feature impacts survived, there are a couple relations from the heatmap that might be interesting to explore. First up, plotting sex, pclass and age to get a better idea of the demographics in our dataset.","c17db800":"As expected, amount of people in class three is the greatest. It's interesting how in our sample there are more people in class one than two though.","4cb1b3a4":"Looks like there are a lot of outliers for the fare feature.","69535a47":"# Bivariate Analysis","98544287":"It is indeed. It's natural that people in higher Pclasses pay more. Though the few outliers who paid more than 500 is interesting. Also as the classes go up, the fares are becomming more spread out.\n\nNow let's examine how each feature relates to Survived. First up is Pclass.","321a11b1":"# Read data","142e0d95":"There's significantly more male than female people in our sample.","1dbaa30f":"Here are some initial observations from the two tables:\n1. There are quite a few categorical features (nominal, ordinal, and binary). Some of the ordinal features are disguised as discrete numerical features (Pclass).\n2. The feature Name has 891 unique values for 891 values total, so there's no point in including it as is. However, we might be able to find some way to engineer other features from name, such as the prefix, family information etc.\n3. The feature ticket has some repeating values, but I'm not too sure what that might mean.","a988743c":"Nice! All the missing values are gone. Now let's look at some feature importances. The models I'm using here are all tree-based, so I won't be using one-hot encoding at all. Take this section with a grain of salt, as feature importances are heavily model dependent. Tree based models perform this step internally when looking for the splits that would result in the highest purity, so I used them here.","405a713a":"That all for a quick overview of this dataset.\nHope you liked this kernel!","2030acc1":"We can see that age has 177 missing values, but it is quite a helpful predictor. We'll use mean value to impute as the purpose of this kernel is not preprocessing. Alternative strategies include grouping people by features like name prefix (title), parch, etc. and using the mean values for each group to impute.\n\nWe'll also fill in embarked with S, because it is the most common embarked location.\n\nAs for Cabin, the information it contains might help because some cabins might be closer to exits etc. So we'll impute the missing values with another category: Other. It might help to add anotehr feature: \"HasImputedCabin\", but from my experiences it didn't really help much.","e596e56d":"Surprisingly, most people who embarked at C survived, while for S and Q much more died than lived. Let's explore why this is the case.","ea1d3ff5":"Ah, the reason is that a lot of people who embarked at C are class 1, meaning they are more likely to survive.","d23f7c6c":"# Missing Values","4056b288":"Most people are traveling alone.","b0dc8dd8":"This plot further confirms the fact that having someone to look out for you is nice. However, as the relationship of looking out for someone and having someone look out for you is combined in this feature, there is an optimal point. There are very few survivers past the point of having more than 4 family members on board, as too large a group is less likely to survive.\n\nNext we'll look at fare.","ba55c5a0":"Again the survival rate seems to be higher for people with parents\/children. I really wish this column is separated into number of parents and number of children, though, because parents are garenteed to care about children while children are the ones being cared about. So a high number of children might mean less survival rate, but high number of parents might mean higher chance etc.\nThis can actually be done by using the name prefix or age combined with Parch, but feature engineering is out of the scope of this EDA.\n\nNext we'll combine SibSp and Parch to examine total family member number on board.","285ce307":"This is a very basic EDA for the titanic dataset. It provides some quick insights into the data for people who just want to get a general feel for it. I didn't include much on feature engineering or preprocessing. If you have any advice\/thoughts, please leave a comment!\n\nAlso if you found it helpful some **upvotes** are greatly appreciated!","cd2fb4d4":"# Feature Importances","882a178e":"# Univariate Analysis","c3d964c4":"The trend here is pretty clear. In general, the more fare money a passenger paid, the more likely they are to survive. I cut the graph window at $200 because past that point it's hard to see more bars because the count is so small.\n\nFinally for the bivariate section we'll look at placed embarked.","69d36055":"Here the results are surprising, as people with 1 sibling\/spouse seems to have the highest survival rate. I originally expected people with 0 siblings\/spouses to survive best, as they don't have to worry about anyone else, but thinking about it more those siblings\/spouses will also look out for you and help you survive.\n\nNext we'll look at Parch, before combining these two to look at total family number on board.","c12a615e":"Overall they are distributed pretty evenly, with females being slightly younger overall. We'll look at if Pclass is strongly correlated with fare next.","7f862a94":"Looks like most people didn't survive, which is to be expected. There might be some dataset inbalance here."}}