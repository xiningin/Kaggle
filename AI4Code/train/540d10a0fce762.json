{"cell_type":{"c705514c":"code","2563ee55":"code","52ec7bbe":"code","7652fd98":"code","171bed59":"code","dc21e863":"code","f328be4e":"code","f53be401":"code","c4ab5612":"code","b440bb5a":"code","fdea12f0":"code","d54d7dfb":"code","34f31f61":"code","601e8aed":"code","c634fd32":"code","2f279881":"code","60b2f3d0":"code","dd1fcd07":"code","8f25a7e8":"code","97c743f7":"code","6bfd281b":"code","f3118191":"code","3faedeae":"code","25084a90":"code","bcd8d2f5":"code","2b614608":"code","7acc0dff":"code","0421b8ac":"code","84c340ee":"code","86722d62":"code","14a62103":"code","7fbdc2ff":"code","2f92c124":"code","9246b7a8":"code","da7ecbae":"code","22a19d2c":"code","c81c18ee":"code","40677ac9":"code","1d086ee1":"code","49e1d534":"code","779295a8":"code","1f0c9349":"code","1e59b882":"code","ab71a618":"code","23175f1a":"code","ba8a7705":"markdown"},"source":{"c705514c":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","2563ee55":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom datetime import date","52ec7bbe":"df =pd.read_csv('\/kaggle\/input\/retail-demand-forecasting-dataset\/Retail_Dataset2.csv',engine='python')\ndf.head()","7652fd98":"print('shape of dataset',np.shape(df))\nprint ('Null to Dataset Ratio in Dates: ',df.isnull().sum()[3]\/df.shape[0]*100)\ndf.isnull().sum()","171bed59":"df['Order_Demand'] = df['Order_Demand'].astype('int64')\n\ndf['Date'] = pd.to_datetime(df['Date'], errors='coerce')\ndf['month'] = df['Date'].dt.month","dc21e863":"import calendar\ndf['month_name'] = df['month'].apply(lambda x: calendar.month_abbr[x])\n","f328be4e":"df.sample(5)","f53be401":"col =df.columns\ndef cnt(colm):\n    print('value count in column',colm ,'is',df[colm].value_counts())\nprint(cnt('Open'))\nprint(cnt('Promo'))\nprint(cnt('SchoolHoliday'))\nprint(cnt('StateHoliday'))","c4ab5612":"df_copy =df.copy()","b440bb5a":"\ndef barplt(col):\n    fig = plt.figure(figsize = (10, 8))\n    splot=sns.countplot(df_copy[col])\n    for p in splot.patches:\n        splot.annotate(format(p.get_height(), '.1f'), \n                       (p.get_x() + p.get_width() \/ 2., p.get_height()), \n                       ha = 'center', va = 'center', \n                       xytext = (0, 9), \n                       textcoords = 'offset points')\n    plt.xlabel(col, size=14)\n    \n    plt.show()\n    \n","fdea12f0":"barplt('Open')\n","d54d7dfb":"barplt('Promo')","34f31f61":"barplt('SchoolHoliday')","601e8aed":"\n\nbarplt('StateHoliday')","c634fd32":"df.dtypes","2f279881":"d_max= df['Date'].max()\nd_min =df['Date'].min()\nprint('Data collection started from ',d_min,' to  ', d_max )","60b2f3d0":"print('Type of product is ',df['Product_Category'].nunique())\ndf['Product_Category'].value_counts()","dd1fcd07":"df.describe()","8f25a7e8":"cor =df.corr()\nplt.figure(figsize=(15,8))\nmask = np.zeros_like(cor)\nmask[np.triu_indices_from(mask)] = True\nsns.heatmap(cor,mask =mask,annot =True)\nplt.title('Corelation function among all variables')\n\nplt.show()","97c743f7":"plt.figure(figsize=(20,14))\nsns.countplot(df['Product_Category'].sort_values(ascending = True))\nplt.xticks(rotation =90)\nplt.title('Count plot of different catogery product demand')\nplt.show()","6bfd281b":"time_df = df.groupby('Date')['Order_Demand'].sum().reset_index()\n\ntime_df = time_df.set_index('Date')\ntime_df.head()\n","f3118191":"#Averages daily sales value for the week, and we are using the start of each month as the timestamp.\ny = time_df.Order_Demand.resample('W').mean()\nprint(np.shape(y))\ny.sample(5)","3faedeae":"y.plot(figsize=(12,5))\nplt.show()\n","25084a90":"df2 = df[['month', 'Warehouse', 'Order_Demand']].groupby(['month', 'Warehouse'], as_index=False).count()\ndf2  = df2.pivot(index='month', columns='Warehouse', values='Order_Demand')\ndf2.head()","bcd8d2f5":"df_new = df[['month_name', 'Warehouse', 'Order_Demand']].groupby(['month_name', 'Warehouse'], as_index=False).count()\ndf_new  = df_new.pivot(index='month_name', columns='Warehouse', values='Order_Demand')\ndf_new.head()","2b614608":"df2.index = df2.index.map(int)\ndf2.plot(kind='area', figsize=(20, 10))\n\nplt.title('Order_Demand Trend')\nplt.ylabel('Number of Order_Demand')\nplt.xlabel('Month')\nplt.show()","7acc0dff":"df2[['Whse_A', 'Whse_C', 'Whse_J', 'Whse_S']].plot(kind='box', figsize=(8, 6))\n\nplt.title('Order_Demand Trend [2011 - 2017]')\nplt.ylabel('Number of Order_Demand')\n\nplt.show()","0421b8ac":"df2.index = df2.index.map(int)\ndf2.plot(kind='barh', figsize=(20, 10))\n\nplt.title('Order_Demand Trend')\nplt.xlabel('Number of Order_Demand')\n\nplt.show()","84c340ee":"df2[['Whse_A', 'Whse_C', 'Whse_J', 'Whse_S']].plot(kind='line', figsize=(10, 8))\n\nplt.title('Order_Demand Trend [2011 - 2017]')\nplt.ylabel('Number of Order_Demand')\n\nplt.show()","86722d62":"df_new['Total'] = df_new.sum(axis=1)","14a62103":"df_new.head()","7fbdc2ff":"#df2.index = df2.index.map(int)\ndf_new.plot.pie(y='Total', figsize=(20, 10),\n                            autopct='%1.1f%%',               \n                            )\n\nplt.title('Order_Demand Trend')\nplt.legend(labels=df_new.index)\nplt.show()","2f92c124":"df.head()","9246b7a8":"df_copy =df.copy()\n\ndf_copy['StateHoliday'].replace('a',1,inplace=True)\ndf_copy['StateHoliday'].replace('b',2,inplace=True)\n\ndf_copy.head()","da7ecbae":"df_copy.columns","22a19d2c":"df_f =df_copy.drop(['Warehouse','month', 'Date','Product_Code','Product_id','Product_Category','month_name'],axis=1)\n\ndf_f[['Promo']] = df_f[['Promo']].astype(int)\ndf_f[['Open']] = df_f[['Open']].astype(int)\ndf_f[['SchoolHoliday']] = df_f[['SchoolHoliday']].astype(int)\ndf_f[['StateHoliday']] = df_f[['StateHoliday']].astype(int)\nprint(df_f.dtypes)\ndf_f.head(7)\n","c81c18ee":"df_f.to_csv('DF_F.csv')","40677ac9":"\nfrom IPython.display  import Image\nimport os\nImage('..\/input\/image12\/insight1.png')\n     ","1d086ee1":"df.columns","49e1d534":"df['Product_Category']=df['Product_Category'].sort_values(ascending=False)","779295a8":"df_cat = df[['month', 'Product_Category', 'Order_Demand']].groupby(['month', 'Product_Category'], as_index=False).count()\ndf_cat  = df_cat.pivot(index='month', columns='Product_Category', values='Order_Demand')\nprint(np.shape(df_cat))\ndf_cat.head()","1f0c9349":"df['Product_Category'].value_counts()","1e59b882":"df_cat = df_cat[['Category_019','Category_005','Category_001','Category_007','Category_021','Category_006']] ","ab71a618":"print(np.shape(df_cat))\ndf_cat.head()\n","23175f1a":"df_cat.plot(figsize=(12,5))\nplt.show()","ba8a7705":"# **we can see there are three type values in State hoilyday so we have to scale it .**"}}