{"cell_type":{"7a865439":"code","c0eb5726":"code","5aae407a":"code","4d3e6598":"code","69b1bd09":"code","6953c4d5":"code","e1cb9dab":"code","31f837d5":"code","e51d4c8a":"code","f22984d0":"code","8ed3e196":"code","61aff9e2":"code","4864fc16":"code","5afd3511":"code","ca598de0":"code","6d6edddc":"code","30af5f33":"code","52338196":"code","af56b20c":"code","8a508ab2":"code","91e3da96":"code","22594766":"code","d3a47913":"code","150444ae":"markdown","a54e5f74":"markdown","0a05d9f6":"markdown","ae0ac0f1":"markdown","d4f6c2a3":"markdown","87bb5cfe":"markdown","73de4b0d":"markdown"},"source":{"7a865439":"held_out = True # whether to use held out data","c0eb5726":"%matplotlib inline\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport numpy as  np\n\nimport tests\nimport os\n\ndef setWorkingDir():\n    os.chdir(\"\/kaggle\/working\/\")\n\ndef setUtilDir():\n    setWorkingDir()\n    os.chdir(\"..\/input\/analysisutils\/\")\n    \ndef setDataDir():\n    setWorkingDir()\n    os.chdir(\"..\/input\/cryptocurrency-market-dynamics\/\")\n\nsetUtilDir()    \nimport analysis_utils as utils","5aae407a":"import importlib\nimportlib.reload(tests)\nimportlib.reload(utils)","4d3e6598":"setDataDir()\nchecks, interventions = utils.read_data(held_out)","69b1bd09":"checks = utils.expand_columns(checks, interventions)","6953c4d5":"daily_volume = utils.get_daily_volume(checks)","e1cb9dab":"coin_data = utils.get_coin_data(checks)","31f837d5":"print(checks.columns)\nprint(interventions.columns)","e51d4c8a":"len(checks)","f22984d0":"tests.print_descriptives(checks, daily_volume)","8ed3e196":"sns.set(context = 'paper', font_scale = 3, font='serif', style = 'white',  rc={\"lines.linewidth\": 2.5})\nplt.plot(range(len(daily_volume)), daily_volume)\nplt.xlabel('Day of Experiment')\nplt.ylabel('Observed BTC Vol.')\n\nsetWorkingDir()\nplt.savefig('btc-vol-over-time.jpg', bbox_inches = 'tight')","61aff9e2":"sns.set(context = 'paper', font_scale = 3, font='serif', style = 'white')\nplt.hist(np.log(coin_data['tot']))\nplt.xlabel('Coin log(Ave. Hourly BTC Vol.)')\nplt.ylabel('Frequency')\nplt.savefig('btc-vol-coin-hist.jpg', bbox_inches = 'tight')","4864fc16":"sns.set(context = 'paper', font_scale = 3, font='serif', style = 'white')\nplt.hist(np.log(coin_data['size']))\nplt.xlabel('Coin log(Ave. BTC Trade Size)')\nplt.ylabel('Frequency')\nplt.savefig('trade-size-coin-hist.jpg', bbox_inches = 'tight')","5afd3511":"sns.set(context = 'paper', font_scale = 3, font='serif', style = 'white')\nplt.hist(coin_data['counts'], 20)\nplt.xlabel('Estimated Average Number\\n of Trades Per Hour (Per Coin)')\nplt.ylabel('Frequency')\nplt.savefig('num-trades-coin-hist.jpg', bbox_inches = 'tight')","ca598de0":"tests.run_ttests(checks)","6d6edddc":"#results = tests.get_bootstrap_results(checks)","30af5f33":"\ntitles = {}\ntitles['buy'] = {'trade':'Last Observed Trade is a Buy',\n                 'perc':'% Buy-Side Volume',\n                 'null':'Some Trade Occurs'}\ntitles['sell'] = {'trade':'Last Observed Trade is a Sell',\n                 'perc':'% Sell-Side Volume',\n                 'null':'Some Trade Occurs'}\n\n\"\"\"\nfor d in results:\n    for a in ['buy','sell']:\n        tests.violin(results[d][a], \n                     {1:'15 Minutes',2:'30 Minutes',3:'60 Minutes'}, \n                     'Time Since Intervention',\n                     '(Treat. Prob.) - (Control Prob.)', \n                     title = 'Dependent Variable:\\n' + titles[a][d], \n                     filebase = d + '-' + a)\n\"\"\"\n","52338196":"tests.run_regressions(checks)","af56b20c":"tests.get_total_effect_size(checks, interventions)","8a508ab2":"tests.get_state_fractions(interventions)","91e3da96":"sns.set(context = 'paper', font_scale = 2.75, font='serif', style = 'white',  rc={\"lines.linewidth\": 4})\nplt.plot(checks.loc[(checks['monitor_num'] == 0)].groupby('hour').mean()['total_60'])\nplt.xlabel('Hour')\nplt.ylabel('Mean Trading Volume')\nplt.savefig('hourly-volume.jpg', bbox_inches = 'tight')","22594766":"sns.set(context = 'paper', font_scale = 2.75, font='serif', style = 'white',  rc={\"lines.linewidth\": 4})\nplt.plot(checks.loc[(checks['monitor_num'] == 0)].groupby('day_of_week').mean()['total_60'])\nplt.xlabel('Day of Week')\nplt.ylabel('Mean Trading Volume')\nplt.savefig('by-day-volume.jpg', bbox_inches = 'tight')","d3a47913":"tests.bot_check(checks)","150444ae":"# Results","a54e5f74":"# Reading Data","0a05d9f6":"# Descriptive Statistics","ae0ac0f1":"## Market Composition","d4f6c2a3":"## Asymmetric Null Effect","87bb5cfe":"## Peer Influence","73de4b0d":"## Statistical Analysis"}}