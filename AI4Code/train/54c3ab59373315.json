{"cell_type":{"c03af825":"code","cca8d067":"code","1278f8cd":"code","05eedd56":"code","45e3e9bc":"code","da16adae":"code","18f320e0":"code","bcbb58e7":"code","c330168a":"code","8a9c2321":"code","91f26951":"code","1ec8560f":"code","4e3ddc2c":"code","89013327":"code","93058aff":"code","c90b1174":"code","d174c883":"code","37821a1e":"markdown","9f16851f":"markdown","4424fd4d":"markdown","470379b8":"markdown","448ab961":"markdown"},"source":{"c03af825":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport geopandas as gpd\nfrom shapely import wkt\nfrom shapely.ops import cascaded_union\nimport geoplot\n\nimport matplotlib.pyplot as plt\nplt.rcParams[\"figure.figsize\"] = (80,13)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cca8d067":"df_crop=pd.read_csv(\"\/kaggle\/input\/tamilnadu-cropproduction\/Tamilnadu agriculture yield data.csv\")\ngdf_districts=pd.read_csv(\"\/kaggle\/input\/tamil-nadu-assembly-constituencies-geo-data-2021\/districts-map.csv\")","1278f8cd":"df_crop.head(2)","05eedd56":"gdf_districts.head(2)","45e3e9bc":"gdf_districts['geometry'] = gdf_districts['geometry'].apply(wkt.loads)\ngdf_districts = gpd.GeoDataFrame(gdf_districts, geometry = 'geometry')","da16adae":"df_crop['District_Name'].unique()","18f320e0":"gdf_districts['District'].unique()","bcbb58e7":"def caps_to_normal(district_name: str):\n    return district_name.title()\n    \ndf_crop['District']=df_crop['District_Name'].apply(caps_to_normal)\ngdf_districts['District']=gdf_districts['District'].apply(caps_to_normal)\ndf_crop.drop(columns=['District_Name'],inplace=True)","c330168a":"districts_one=df_crop['District'].unique()\ndistricts_two=gdf_districts['District'].unique()\n\nprint(set(districts_one).difference(districts_two))\nprint(set(districts_two).difference(districts_one))","8a9c2321":"def rename_districts(district_name):\n    to_rename={\n        'Tuticorin':'Thoothukkudi',\n        'Villupuram':'Viluppuram',\n        'Kanchipuram':'Kancheepuram'\n    }\n    if district_name in to_rename:\n        return to_rename[district_name]\n    return district_name\n\ndf_crop['District']=df_crop['District'].apply(rename_districts)","91f26951":"df_crop_rice=df_crop.loc[df_crop['Crop']=='Rice']\nyear=2013\ndf_crop_rice_year=df_crop_rice.loc[df_crop['Crop_Year']==year]\ngdf_crop_rice_year=pd.merge(df_crop_rice_year,gdf_districts,on='District',how='outer')","1ec8560f":"gpd.GeoDataFrame(gdf_crop_rice_year, geometry = 'geometry').plot(column='Production',cmap='YlGn',\n                                                                 legend=True,missing_kwds={\"color\": \"lightgrey\"},\n                                                                 legend_kwds={'label': \"Rice production on {}\".format(year),'orientation': \"vertical\"}, \n                                                                 edgecolor='k',figsize=(70, 15)).set_axis_off()","4e3ddc2c":"df_crop_rice=df_crop.loc[df_crop['Crop']=='Rice']","89013327":"fig, axs = plt.subplots(3,1)\nyears=[df_crop_rice['Crop_Year'].min(),df_crop_rice['Crop_Year'].median(),df_crop_rice['Crop_Year'].max()]\ni=0\nfor year in years:\n    df_crop_rice_year=df_crop_rice.loc[df_crop['Crop_Year']==year]\n    gdf_crop_rice_year=pd.merge(df_crop_rice_year,gdf_districts,on='District',how='outer')\n    gpd.GeoDataFrame(gdf_crop_rice_year, geometry = 'geometry').plot(column='Area', \n                                                                     cmap='YlGn',legend=True,\n                                                                     missing_kwds={\"color\": \"lightgrey\",\"label\":\"Missing values\"},\n                                                                     legend_kwds={'label': \"Area of rice crops in {}\".format(year),'orientation': \"vertical\",\"shrink\":0.8}, \n                                                                     edgecolor='k',ax=axs[i])\n    i+=1","93058aff":"df_group_district_year=df_crop.groupby(['District'])\n\ndef area_diff(df_group):\n    year_start=df_group['Crop_Year'].min()\n    year_end=df_group['Crop_Year'].max()\n    land_on_start=df_group[df_group['Crop_Year']==year_start].Area.sum()\n    land_on_end=df_group[df_group['Crop_Year']==year_end].Area.sum()\n    if land_on_start-land_on_end < 0:\n        return 0\n    return land_on_start-land_on_end\n    \ndf_land_loss=df_group_district_year.apply(area_diff).sort_values(ascending=False).rename('Land loss')\nprint(\"Area of lands lossed over year\")\ndf_land_loss","c90b1174":"gdf_land_loss=pd.merge(df_land_loss,gdf_districts,on='District',how='right')","d174c883":"gpd.GeoDataFrame(gdf_land_loss, geometry = 'geometry').plot(column='Land loss', \n                                                                     cmap='Reds',legend=True,\n                                                                     missing_kwds={\"color\": \"lightgrey\",\"label\":\"Missing values\"},\n                                                                     legend_kwds={'label': \"Lands lossed over years\",'orientation': \"vertical\",\"shrink\":0.9}, \n                                                                     edgecolor='k').set_axis_off()","37821a1e":"# Visualizing crop production on given year","9f16851f":"# How much Agricultural Lands lost over years","4424fd4d":"# Area of Rice crop across years","470379b8":"**In this notebook , insights are visualized through the Geo data of Tamil Nadu map. Simple insights such as crop area of each districts , production over years and how much agricultural lands are turned to non-production are shown with the Geo map spatial data**","448ab961":"# *Rice Production on 2013*"}}