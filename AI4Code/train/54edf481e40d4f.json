{"cell_type":{"1b9255ef":"code","6c5e3739":"code","a06d20f0":"code","d5790ea7":"code","48486042":"code","2d332c28":"code","c685b408":"code","1d849c27":"code","b281965c":"code","26438c71":"code","547f21bc":"markdown","44620027":"markdown"},"source":{"1b9255ef":"import datetime as dt\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport math","6c5e3739":"!pip install changefinder\nimport changefinder","a06d20f0":"import matplotlib.pyplot as plt\nfrom matplotlib import pyplot","d5790ea7":"# Any results you write to the current directory are saved as output.\nfor dirname, _, filenames in os.walk('\/kaggle\/input\/nab\/realTraffic\/realTraffic\/'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","48486042":"# -*- coding: utf-\nimport matplotlib.pyplot as plt\nimport changefinder\n\n\ndef changefinderTS(data, r, order, smooth):\n    cf = changefinder.ChangeFinder(r=r, order=order, smooth=smooth)\n\n    ret = []\n    for i in data:\n        score = cf.update(i)\n        ret.append(score)\n    return ret\ndef plotTSScore(data, ret):\n    fig = plt.figure(figsize=(17, 8))\n    ax = fig.add_subplot(111)\n    ax.plot(ret, label='anomaly score', color = 'red', alpha=0.9)\n    ax2 = ax.twinx()\n    ax2.plot(data, label='real', color = 'blue', alpha=0.9)\n    plt.title('Anomaly Score time series')\n    plt.ylabel('anomaly score')\n    plt.xlabel('data count')\n    plt.legend()\n    plt.show()\n","2d332c28":"\n# generic data example\ndata=np.concatenate([np.random.normal(0.7, 0.05, 300),\nnp.random.normal(1.5, 0.05, 300),\nnp.random.normal(0.6, 0.05, 300),\nnp.random.normal(1.3, 0.05, 300)])\n\nret = changefinderTS(data, r=0.03, order=1, smooth=5)\n\nplotTSScore(data, ret)","c685b408":"x = np.arange(200)\nnormal_data = np.sin(x*0.5).reshape(200, -1)\nabnormal_data = (np.sin(x*0.5)**2).reshape(200, -1)\n\nwhole_data = np.vstack((normal_data, abnormal_data))\nwhole_data = np.vstack((whole_data, normal_data))\n\nret_data2 = changefinderTS(whole_data, r=0.03, order=1, smooth=5)\n\nplotTSScore(whole_data, ret_data2)","1d849c27":"fpath = \"..\/input\/nab\/realAWSCloudwatch\/realAWSCloudwatch\/\/\"\nfname = \"grok_asg_anomaly.csv\"\n\nfullPath = fpath + fname\n\ndef parser(x):\n\treturn dt.datetime.strptime(x, \"%Y-%m-%d %H:%M:%S\")\n \ndata_ = pd.read_csv(fullPath, header=0, parse_dates=[0], index_col=0, squeeze=True, date_parser=parser)","b281965c":"data_.head()","26438c71":"ret = changefinderTS(data_.values, r=0.01, order=1, smooth=3)\n\nplotTSScore(data_.values, ret)\n\n","547f21bc":"# Detecting Outliers and Change Points from Time Series\n","44620027":"# Final"}}