{"cell_type":{"369b2839":"code","bd227183":"code","c029e16f":"code","5e03ca9f":"code","9cb179a8":"code","c1101a43":"code","7ac95619":"code","c953d799":"code","abbf5b5a":"code","d9ffe7ae":"code","069aeca8":"code","6de663cb":"code","d5452b04":"code","af2d7ed8":"code","f8f0cab9":"code","8ecb4951":"code","d4e68c91":"code","df0d78a6":"code","e996981b":"code","1f9bc2db":"code","98d689b9":"code","e558fbe2":"code","d9770292":"code","4f9c69ef":"code","e874ea8f":"code","498d1255":"code","bf5b6008":"code","9fb377a6":"code","dc396549":"code","4780b6b2":"code","362d09d8":"code","0cfadb29":"code","5b9b547e":"code","10430b35":"code","93cff381":"code","3b5db39d":"code","d0d4a054":"code","098ae6a2":"code","1fa29854":"code","59207ad4":"code","21aac78a":"code","aa0f65fd":"markdown","a4d1fb2b":"markdown","f2ff7926":"markdown","9f90ec06":"markdown","83f34eea":"markdown","4d77f796":"markdown","5b89fc00":"markdown","bd4435cd":"markdown"},"source":{"369b2839":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","bd227183":"df1 = pd.read_csv('..\/input\/Comcast_telecom_complaints_data.csv',index_col=0)","c029e16f":"df1.head()","5e03ca9f":"df1[df1.isnull()].count()\n#No Nulls","9cb179a8":"df1.describe(include='all')","c1101a43":"df1.info()","7ac95619":"df1['Date_month_year'] = pd.to_datetime(df1['Date_month_year'])\ndf1['Created_Month'] =  df1['Date_month_year'].apply(lambda x: x.month)\ndf1['Created_Day'] = df1['Date_month_year'].apply(lambda x: x.day)\ndf1['Created_Day of Week'] = df1['Date_month_year'].apply(lambda x: x.dayofweek)","c953d799":"dmap = {0:'Mon',1:'Tue',2:'Wed',3:'Thur',4:'Fri',5:'Sat',6:'Sun'}\ndf1['Created_Day of Week']=df1['Created_Day of Week'].map(dmap)\ndf1.head(5)","abbf5b5a":"#number of complaints monthly\nplt.figure(figsize=(8,4))\nbymonth = df1.groupby('Created_Month').count().reset_index()\nlp = sns.lineplot(x='Created_Month', y= 'Customer Complaint', data = bymonth, sort=False,markers = \"o\")\nax = lp.axes\nax.set_xlim(0,13)\nax.annotate('Max complaints in Jun', color='red',\n            xy=(6, 1060), xycoords='data',\n            xytext=(0.8, 0.85), textcoords='axes fraction',\n            arrowprops=dict(facecolor='black', shrink=0.1),\n            horizontalalignment='right', verticalalignment='top')","d9ffe7ae":"#number of complaints Daily\nplt.figure(figsize=(18,6))\nbyday = df1.groupby('Created_Day').count().reset_index()\nlp = sns.lineplot(x='Created_Day', y= 'Customer Complaint', data = byday, sort=False, color = 'red',markers = \"o\", )\nax = lp.axes\nax.set_xlim(0,32)","069aeca8":"#number of complaints based on created day of the week\nsns.countplot(x='Created_Day of Week', data = df1, order=df1['Created_Day of Week'].value_counts().index, palette =\"Reds_d\")\n#More number of complaints on Tuesday and wednesday","6de663cb":"df1['Customer Complaint'] = df1['Customer Complaint'].str.title() \nCT_freq = df1['Customer Complaint'].value_counts()\nCT_freq","d5452b04":"import nltk\n%pip install wordcloud","af2d7ed8":"from wordcloud import WordCloud, STOPWORDS\ncommon_complaints = df1['Customer Complaint'].dropna().tolist()\ncommon_complaints =''.join(common_complaints).lower()\n\nlist_stops = ('Comcast','Now','Company','Day','Someone','Thing','Also','Got','Way','Call','Called','One','Said','Tell')\n\nfor word in list_stops:\n    STOPWORDS.add(word)","f8f0cab9":"wordcloud = WordCloud(stopwords=STOPWORDS,\n                      background_color='white',\n                      width=1200,\n                      height=1000).generate(common_complaints)\n","8ecb4951":"plt.figure( figsize=(10,12) )\nplt.imshow(wordcloud)\nplt.title('Frequent words for customer complaints')\nplt.axis('off')\nplt.show()\n#Internet complaints are Maximum","d4e68c91":"from nltk.corpus import stopwords\nfrom nltk.stem.wordnet import WordNetLemmatizer\nimport string\n\nstop = set(stopwords.words('english'))\nexclude = set(string.punctuation)\nlemma = WordNetLemmatizer()","df0d78a6":"nltk.download('wordnet')","e996981b":"def clean(doc):\n    stop_free = \" \".join([i for i in doc.lower().split() if i not in stop])\n    punc_free = \"\".join([ch for ch in stop_free if ch not in exclude])\n    normalized = \" \".join(lemma.lemmatize(word) for word in punc_free.split())\n    return normalized","1f9bc2db":"doc_complete = df1['Customer Complaint'].tolist()\ndoc_clean = [clean(doc).split() for doc in doc_complete]","98d689b9":"import gensim\nfrom gensim import corpora","e558fbe2":"dictionary = corpora.Dictionary(doc_clean)\ndictionary","d9770292":"doc_term_matrix = [dictionary.doc2bow(doc) for doc in doc_clean]\ndoc_term_matrix","4f9c69ef":"from gensim.models import LdaModel","e874ea8f":"num_topic = 9\nldamodel = LdaModel(doc_term_matrix,num_topics=num_topic,id2word = dictionary,passes=10)","498d1255":"topics = ldamodel.show_topics()\nfor topic in topics:\n    print(topic)\n    print()","bf5b6008":"word_dict = {}\nfor i in range(num_topic):\n    words = ldamodel.show_topic(i,topn = 20)\n    word_dict['Topic '+\"{}\".format(i)]=[i[0] for i in words]","9fb377a6":"pd.DataFrame(word_dict)","dc396549":"import pyLDAvis.gensim","4780b6b2":"Lda_display = pyLDAvis.gensim.prepare(ldamodel,doc_term_matrix,dictionary,sort_topics=False)\npyLDAvis.display(Lda_display)","362d09d8":"df1['Highlevel_Status'] = [\"Open\" if Status==\"Open\" or Status==\"Pending\" else \"Closed\" for Status in df1[\"Status\"]]","0cfadb29":"df1['Highlevel_Status'].unique()","5b9b547e":"df1['State'] = df1['State'].str.title() \nst_cmp = df1.groupby(['State','Highlevel_Status']).size().unstack().fillna(0)","10430b35":"st_cmp","93cff381":"st_cmp.sort_values('Closed',axis = 0,ascending=True).plot(kind=\"barh\", figsize=(10,8), stacked=True)","3b5db39d":"df1.groupby([\"State\"]).size().sort_values(ascending=False).to_frame().rename({0: \"Complaint count\"}, axis=1)[:1]\n#Georgia has highest complaints","d0d4a054":"CT = df1.groupby([\"State\",\"Highlevel_Status\"]).size().unstack().fillna(0)\nCT.sort_values('Closed',axis = 0,ascending=False)[:1]","098ae6a2":"#highest percentage of unresolved complaints\nCT['Resolved_cmp_prct'] = CT['Closed']\/CT['Closed'].sum()*100\nCT['Unresolved_cmp_prct'] = CT['Open']\/CT['Open'].sum()*100","1fa29854":"CT.sort_values('Unresolved_cmp_prct',axis = 0,ascending=False)[:1]\n#Georgia state has highest Unresolved complaints when compared to other states ","59207ad4":"cr = df1.groupby(['Received Via','Highlevel_Status']).size().unstack().fillna(0)\ncr['resolved'] = cr['Closed']\/cr['Closed'].sum()*100\ncr['resolved']","21aac78a":"#df[\"item\"].value_counts().nlargest(n=1).values[0]","aa0f65fd":"### TASK 6 --- Provide the percentage of complaints resolved till date, which were received through the Internet and customer care calls.","a4d1fb2b":"# **Comcast Telecom Consumer Complaints**\n**** Import data into Python environment.\n- Provide the trend chart for the number of complaints at monthly and daily granularity levels.\n- Provide a table with the frequency of complaint types.\n\nWhich complaint types are maximum i.e., around internet, network issues, or across any other domains.\n- Create a new categorical variable with value as Open and Closed. Open & Pending is to be categorized as Open and Closed & Solved is to be categorized as Closed.\n- Provide state wise status of complaints in a stacked bar chart. Use the categorized variable from Q3. Provide insights on:\n\nWhich state has the maximum complaints\nWhich state has the highest percentage of unresolved complaints\n- Provide the percentage of complaints resolved till date, which were received through the Internet and customer care calls.","f2ff7926":"### TASK 3 - Create a new categorical variable with value as Open and Closed. Open & Pending is to be categorized as Open and Closed & Solved is to be categorized as Closed.","9f90ec06":"### TASK 4 - Provide state wise status of complaints in a stacked bar chart. Use the categorized variable from Q3.","83f34eea":"### TASK 1 - Provide the trend chart for the number of complaints at monthly and daily granularity levels.\n","4d77f796":"### TASK 2 - Provide a table with the frequency of complaint types.","5b89fc00":"### EDA and Cleanup the data set","bd4435cd":"### TASK 5 - Which state has the maximum complaints Which state has the highest percentage of unresolved complaints"}}