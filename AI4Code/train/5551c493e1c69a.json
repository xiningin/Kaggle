{"cell_type":{"1a3e550d":"code","223287a6":"code","96b4ecd4":"code","bf38aab7":"code","2ff2a513":"code","0c168ac6":"code","400ef9aa":"code","ab705868":"code","997503d3":"code","13462244":"code","032e3485":"code","09e4a2f7":"code","6b27cbc7":"code","fca69858":"code","9d22b00c":"code","2b50ff42":"code","8f2f4b94":"code","0cb914c5":"code","a1dd1684":"code","d19d6bb7":"code","c606a67c":"code","295e47ce":"code","52b68a5f":"code","3a5fb07f":"code","419260a9":"code","dec8ad72":"code","8c55e8d9":"code","dac4bc1c":"code","be1c04e1":"code","9f4312b6":"code","79d86ccf":"markdown","26ed1603":"markdown","e129ad6f":"markdown","ce6dcccf":"markdown","9d202228":"markdown","b59c5cdc":"markdown","28cfbe28":"markdown","d0666e6b":"markdown","1ad7fff7":"markdown","8f252858":"markdown","87741171":"markdown","d4b3b468":"markdown","38b1623a":"markdown","6313b883":"markdown","1650b7c2":"markdown","70be8bc8":"markdown","542a24fa":"markdown","12760b1e":"markdown","20f7b532":"markdown","78c53c36":"markdown","f06f28e9":"markdown","26f5201e":"markdown","e31b627c":"markdown","c3c61748":"markdown","bf8b4de5":"markdown","9cf22ef8":"markdown","ae136f68":"markdown","5f84adbb":"markdown","f866a922":"markdown","e5a69490":"markdown","f3977cf4":"markdown","204d1418":"markdown"},"source":{"1a3e550d":"import pandas as pd\nimport seaborn as sns\nfrom matplotlib import pyplot as plt\nfrom scipy.stats import exponnorm\nimport numpy as np\nfrom bq_helper import BigQueryHelper","223287a6":"stack_overflow = BigQueryHelper(active_project=\"bigquery-public-data\", dataset_name=\"stackoverflow\")","96b4ecd4":"bq_assistant = BigQueryHelper(\"bigquery-public-data\", \"stackoverflow\")\nbq_assistant.list_tables()","bf38aab7":"total_questions_count_query = '''\n    select count(*) as total_number_of_questions \n        from `bigquery-public-data.stackoverflow.posts_questions` \n        where extract(year from creation_date) = 2018\n'''\ntotal_questions_count = stack_overflow.query_to_pandas_safe(total_questions_count_query)\ntotal_questions_count","2ff2a513":"total_js_questions_count_query = '''\n    select count(*) as number_of_javascript_questions \n        from `bigquery-public-data.stackoverflow.posts_questions` \n        where extract(year from creation_date) = 2018 and\n        tags like '%javascript%'\n'''\ntotal_js_questions_count = stack_overflow.query_to_pandas_safe(total_js_questions_count_query)\ntotal_js_questions_count","0c168ac6":"questions_per_day_query = '''\n    select count(id) as q_count, extract(day from creation_date) as day, extract(month from creation_date) as month\n        from `bigquery-public-data.stackoverflow.posts_questions` \n        where extract(year from creation_date) = 2018 and\n        tags like '%javascript%'\n        group by day, month\n'''\nquestions_per_day = stack_overflow.query_to_pandas_safe(questions_per_day_query)\nquestions_per_day.head()","400ef9aa":"questions_per_day.q_count = questions_per_day.q_count.values.astype(int)\npivoted_table = questions_per_day.pivot('day', 'month', 'q_count')\n\nplt.figure(figsize=(16,12))\nsns.heatmap(data=pivoted_table, annot=True, fmt='.0f', linewidths=.5)","ab705868":"answers_to_js_count_query = '''\n    select id, accepted_answer_id, answer_count, comment_count\n    from `bigquery-public-data.stackoverflow.posts_questions`\n    where extract(year from creation_date) = 2018 and\n    tags like '%javascript%'\n'''\nanswers_to_js_count = stack_overflow.query_to_pandas_safe(answers_to_js_count_query)\nanswers_to_js_count.head()","997503d3":"votes_and_views_js_count_query = '''\n    select id, favorite_count, view_count\n    from `bigquery-public-data.stackoverflow.posts_questions`\n    where extract(year from creation_date) = 2018 and\n    tags like '%javascript%'\n'''\nvotes_and_views_js_count = stack_overflow.query_to_pandas_safe(votes_and_views_js_count_query)\nvotes_and_views_js_count = votes_and_views_js_count.fillna(0)\nvotes_and_views_js_count.head()","13462244":"answers_to_js_count['has_accepted_answer'] = answers_to_js_count.apply(lambda r: ~np.isnan(r.accepted_answer_id), axis=1)\nanswers_to_js_count.groupby('has_accepted_answer').count()","032e3485":"plt.figure(figsize=(20,10))\nsns.distplot(answers_to_js_count.\n             answer_count.values,\n             fit=exponnorm,\n             bins=20,\n             axlabel='Number of answers',\n             kde=False,\n             rug=True)","09e4a2f7":"plt.figure(figsize=(20,10))\nsns.distplot(answers_to_js_count.comment_count,\n             bins=40,\n             fit=exponnorm,\n             axlabel='Number of comments',\n             kde=False,\n             rug=True)","6b27cbc7":"tag_js_query = '''\n    select id, tags\n        from `bigquery-public-data.stackoverflow.posts_questions`\n            where extract(year from creation_date) = 2018 and\n            tags like '%javascript%'\n'''\ntags_raw = stack_overflow.query_to_pandas_safe(tag_js_query)\ntags_raw.head()\n\nrows_list = []\nfor _, rows in tags_raw.iterrows():\n    tag = rows.tags.split('|')\n    for t in tag:\n        if t != 'javascript':\n            row = {'question_id': rows.id, 'tag': t}\n            rows_list.append(row)\ntags_per_question = pd.DataFrame(rows_list)\ntags_per_question.head()","fca69858":"tag_count = tags_per_question.groupby('tag').count().sort_values(by='question_id', ascending=False)\ntag_count.head(20)","9d22b00c":"plt.figure(figsize=(20,10))\nsns.barplot(x=tag_count.index[0:20], y=tag_count.question_id[0:20])","2b50ff42":"top20tags = tag_count.head(20).index.values\nanswers_tags = pd.merge(answers_to_js_count, tags_per_question, left_on='id', right_on='question_id', how='left')\nviews_tags = pd.merge(votes_and_views_js_count, tags_per_question, left_on='id', right_on='question_id', how='left')","8f2f4b94":"answers_tag_grouped = answers_tags[answers_tags.tag.isin(top20tags)][['tag', 'answer_count', 'comment_count', 'has_accepted_answer']].groupby('tag')\navg_answer_count = answers_tag_grouped.mean().sort_values('has_accepted_answer', ascending=False)\navg_answer_count","0cb914c5":"answers_top20_tags = answers_tags[answers_tags.tag.isin(top20tags)]\nviews_top20_tags = views_tags[views_tags.tag.isin(top20tags)]","a1dd1684":"plt.figure(figsize=(20, 8))\nsns.stripplot(data=answers_top20_tags, x='tag', y='answer_count', jitter=True)","d19d6bb7":"tag_scatter_data = answers_tags[['tag', 'answer_count', 'comment_count']].groupby('tag').sum()\ntag_scatter_data = tag_count.join(tag_scatter_data, how='left')\ntag_scatter_data['tag'] = tag_scatter_data.index.values\n\nsns.jointplot('answer_count', 'comment_count', data=tag_scatter_data, height=10, kind='reg')","c606a67c":"avg_views = views_top20_tags[['tag', 'favorite_count', 'view_count']].groupby('tag').mean()\navg_views = avg_views.sort_values('view_count', ascending=False)\n\nf = plt.figure(figsize=(16, 12))\n\nax = f.add_subplot(2, 1, 1)\nplt.xticks(rotation=90)\nsns.barplot(x = avg_views.index, y=avg_views.view_count, ax=ax)\nplt.subplots_adjust(hspace=1)\n\navg_views = avg_views.sort_values('favorite_count', ascending=False)\nax = f.add_subplot(2, 1, 2)\nplt.xticks(rotation=90)\nsns.barplot(x = avg_views.index, y=avg_views.favorite_count, ax=ax)","295e47ce":"merged_avg_answer_view = pd.merge(avg_views, avg_answer_count, left_index=True, right_index=True)\nmerged_avg_answer_view = merged_avg_answer_view[['view_count', 'answer_count']].copy()\nmerged_avg_answer_view['tag'] = merged_avg_answer_view.index.values\nmerged_avg_answer_view['ratio'] = merged_avg_answer_view.view_count\/merged_avg_answer_view.answer_count\nmerged_avg_answer_view.sort_values('ratio', ascending=False)","52b68a5f":"sns.jointplot('answer_count', 'view_count', merged_avg_answer_view, height=6, kind='kde')","3a5fb07f":"plt.figure(figsize=(16,8))\nsns.scatterplot(x='answer_count', y='view_count', hue='tag', data=merged_avg_answer_view, palette='hls', s=100)","419260a9":"user_location_query = '''\n    select u.location, q.tags\n    from `bigquery-public-data.stackoverflow.posts_questions` q\n    left join `bigquery-public-data.stackoverflow.users` u on q.owner_user_id = u.id\n        where extract(year from q.creation_date) = 2018 and\n        q.tags like '%javascript%'\n'''\n\ngeo_locations = stack_overflow.query_to_pandas_safe(user_location_query)\ngeo_locations.head()","dec8ad72":"geo_tag_list = []\nfor _, rows in geo_locations.iterrows():\n    tag = rows.tags.split('|')\n    for t in tag:\n        if t != 'javascript':\n            row = {'location': rows.location, 'tag': t}\n            geo_tag_list.append(row)\n\ngeo_tag_data = pd.DataFrame(geo_tag_list)","8c55e8d9":"geo_tag_data.head()","dac4bc1c":"from IPython.display import display_html\ndef display_side_by_side(*args):\n    html_str=''\n    for df in args:\n        html_str+=df.to_html()\n    display_html(html_str.replace('table','table style=\"display:inline\"'),raw=True)","be1c04e1":"angular_loc = geo_tag_data[geo_tag_data.tag == 'angular'].groupby('location').count().sort_values('tag', ascending=False).head(10)\nreact_loc = geo_tag_data[geo_tag_data.tag == 'reactjs'].groupby('location').count().sort_values('tag', ascending=False).head(10)\nvue_loc = geo_tag_data[geo_tag_data.tag == 'vue.js'].groupby('location').count().sort_values('tag', ascending=False).head(10)\n\ndisplay_side_by_side(angular_loc, react_loc, vue_loc)","9f4312b6":"node_loc = geo_tag_data[geo_tag_data.tag == 'node.js'].groupby('location').count().sort_values('tag', ascending=False).head(10)\nphp_loc  = geo_tag_data[geo_tag_data.tag == 'php'].groupby('location').count().sort_values('tag', ascending=False).head(10)\ndisplay_side_by_side(node_loc, php_loc)","79d86ccf":"In 3  tables bellow we have top locations of users from which questions were created. Tables are shown for `angular`, `reactjs` and `vue.js` respectively.","26ed1603":" Most used tags are `jquery` and `html`. In top 5 there is also`node.js`(javascript runtime based on V8 engine) and `reactjs`(frontend library created by Facebook).","e129ad6f":"### View counts and favorite count for tags ","ce6dcccf":"### Working days vs weekends","9d202228":"Initializing BigQuery helper:","b59c5cdc":"In table bellow we can see which tags\/technologies were most used with `javascript` in 2018.","28cfbe28":"So there was 1546724 questions overall and 165979 questions related to Javascript. So arround 10% of all questions on Stackoverflow in 2018 were about Javascript.","d0666e6b":"\n## Tags","1ad7fff7":"### Frontend frameworks","8f252858":"## Basic stats","87741171":"## Answers and comments to Javacript questions","d4b3b468":"There is 97976 javacript questions with accepted answer and 68003 without one.","38b1623a":"### Relation between answers and comments","6313b883":"We can see that `webpack` questions have bad ratio of views against answers(a lot of views and relatively small number answers). Tags `regex` and `arrays` have smaller number of view counts but (relatively) larger number of answers.","1650b7c2":"First, I would like to see total number of questions in 2018 and total number of questions related to Javascript","70be8bc8":"## Usage by geolocation","542a24fa":"### Distribution of number of answers","12760b1e":"### Node.js and PHP","20f7b532":"Distribution of number of comments","78c53c36":"In the table bellow we will calculate following numbers for questions with 20 most used tags:\n* average answer count\n* average comment count\n* percentage of questions with highest rate of accepted answers","f06f28e9":"We can observe interesting pattern from the heatmap above. Developers create less questions on weekends then on working days.","26f5201e":"### Question views and answers for top `javascript` tags.","e31b627c":"On chart bellow we can see distribution of top 20 tags by average view counts and average answers. ","c3c61748":"In this section we want to see which tags are most used with `javascript` tag","bf8b4de5":"#### Ratio between number of views and answers for some tag","9cf22ef8":"#### Angular, React, Vue","ae136f68":"# State of Javascript in 2018","5f84adbb":"List of all tables in Stackoverflow dataset","f866a922":"Distribution of number of answers","e5a69490":"As we can see from the bar chart aboe and table, questions with tags `ecmascript-6`, `webpack`  have biggest number of views and are followed by frontend frameworks `angular` and `vue.js`.","f3977cf4":"In following table we want to see which tags have the biggest number of views.","204d1418":"In this notebook I will explore Javascript trends for 2018. I will try to see which libraries and forntend frameworks are the most used ones, how are developers using JS etc.\n\n__NOTICE__: dataset was last updated on September 2nd 2018. I will update notebook once data is updated the rest of 2018."}}