{"cell_type":{"f60910df":"code","86b0890e":"code","961ff8eb":"code","f8f9c19b":"code","b1fab8ef":"code","f2e528dd":"code","c21a7848":"code","09828a64":"code","98f2b362":"code","21216e9c":"code","57000801":"code","e553bbad":"code","85fa3b88":"code","e8c37a1c":"code","6b640d23":"code","0a697a80":"code","82b12dab":"code","819ad48e":"code","be6bc513":"markdown","889b9d0c":"markdown"},"source":{"f60910df":"import numpy as np \nimport pandas as pd \n\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport datetime\n\n#import plotly.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import iplot\nimport seaborn as sns","86b0890e":"tesla = pd.read_csv('..\/input\/Tesla_Stock.csv',index_col='Date',parse_dates=True)\nford = pd.read_csv('..\/input\/Ford_Stock.csv',index_col='Date',parse_dates=True)\ngm = pd.read_csv('..\/input\/GM_Stock.csv',index_col='Date',parse_dates=True)\ntesla.head()","961ff8eb":"#Plot the opening price of stocks for each day.\nfig, ax = plt.subplots()\n\ntesla['Open'].plot(figsize=(16,6),color=\"blue\",label='Tesla')\nford['Open'].plot(figsize=(16,6),color=\"green\",label='Ford')\ngm['Open'].plot(figsize=(16,6),color=\"orange\",label='GM')\n\nax.legend()\nax.set_title('Open Price');","f8f9c19b":"#Plot the Volume of stock traded each day.\nfig, ax = plt.subplots()\n\ntesla['Volume'].plot(figsize=(16,6),color=\"blue\",label='Tesla')\nford['Volume'].plot(figsize=(16,6),color=\"green\",label='Ford')\ngm['Volume'].plot(figsize=(16,6),color=\"orange\",label='GM')\n\nax.legend()\nax.set_title('Volume');","b1fab8ef":"#Interesting, looks like Ford had a really big spike somewhere in late 2013.\n#What was the date of this maximum trading volume for Ford?\n\nford['Volume'].idxmax()","f2e528dd":"#Create a new column for each dataframe called \"Total Traded\" which is the Open Price multiplied by the Volume Traded.\nfig, ax = plt.subplots()\n\ntesla ['Total_Traded'] = tesla['Open'] * tesla['Volume']\nford ['Total_Traded'] = ford['Open'] * ford['Volume']\ngm ['Total_Traded'] = gm['Open'] * gm['Volume']\n\ntesla['Total_Traded'].plot(figsize=(16,6),color=\"blue\",label='Tesla')\nford['Total_Traded'].plot(figsize=(16,6),color=\"green\",label='Ford')\ngm['Total_Traded'].plot(figsize=(16,6),color=\"orange\",label='GM')\n\nax.legend()\nax.set_title('Total Trade');","c21a7848":"#Interesting, looks like there was huge amount of money traded for Tesla somewhere in early 2014. \n#What date was that and what happened?\ntesla['Total_Traded'].idxmax()","09828a64":"#Let's practice plotting out some MA (Moving Averages). Plot out the MA50 and MA200 for GM.\nfig, ax = plt.subplots()\n\ngm['MA50'] = gm['Open'].rolling(50).mean()\ngm['MA200'] = gm['Open'].rolling(200).mean()\n\ngm['Open'].plot(figsize=(16,6),color=\"blue\",label='Open')\ngm['MA50'].plot(figsize=(16,6),color=\"orange\",label='MA50')\ngm['MA200'].plot(figsize=(16,6),color=\"green\",label='MA200')\n\nax.legend()\nax.set_title('Total Trade');","98f2b362":"df_open = pd.DataFrame()\ndf_open['Tesla'] = tesla['Open']\ndf_open['Ford'] = ford['Open']\ndf_open['GM'] = gm['Open']\n\npd.plotting.scatter_matrix(df_open,hist_kwds = {'bins' : 50})","21216e9c":" \nstart = datetime.date(2012, 1, 1)\nend = datetime.date(2012, 1, 31)\ndf = ford.loc[start:end][['Open','High','Low','Close']]\n\ntrace = go.Candlestick(x=df.index,\n                       open=df.Open,\n                       high=df.High,\n                       low=df.Low,\n                       close=df.Close)\ndata = [trace]\nfig = go.Figure(data=data)\n\niplot(fig, filename='simple_candlestick.html')","57000801":"#Clalculating Daily Percentage Change\nford['returns'] = ford['Close'].pct_change()\ngm['returns'] = gm['Close'].pct_change()\ntesla['returns'] = tesla['Close'].pct_change()\nreturns = [ford['returns'].dropna(), gm['returns'].dropna(), tesla['returns'].dropna()]","e553bbad":"plt.hist(returns , bins = 100 , alpha = 0.75)\n\nplt.legend(['Ford', 'GM', 'Tesla'])\nplt.show()","85fa3b88":"pd.DataFrame(np.array(returns).transpose()).plot(kind = 'kde')\nplt.legend(['Ford', 'GM', 'Tesla'])\nplt.show()","e8c37a1c":"returns_df = pd.DataFrame()\nreturns_df['Ford'] = ford['returns']\nreturns_df['GM'] = gm['returns']\nreturns_df['Tesla'] = tesla['returns']\nplt.boxplot(returns)\nplt.xticks([1, 2, 3], ['Ford', 'GM', 'Tesla'])\nplt.show()","6b640d23":"#Create a scatter matrix plot to see the correlation between each of the stocks daily returns. \n#This helps answer the questions of how related the car companies are. \n#Is Tesla begin treated more as a technology company rather than a car company by the market?\n\npd.plotting.scatter_matrix(returns_df,hist_kwds = {'bins' : 50})","0a697a80":"#It looks like Ford and GM do have some sort of possible relationship,\n#let's plot just these two against eachother in scatter plot to view this more closely!\nplt.scatter(returns_df['Ford'],returns_df['GM'], s = 5 , alpha = 0.5)","82b12dab":"#Create a cumulative daily return column for each car company's dataframe\ntesla['daily_cumulative_return'] = ( 1 + tesla['returns'] ).cumprod()\ngm['daily_cumulative_return'] = ( 1 + gm['returns'] ).cumprod()\nford['daily_cumulative_return'] = ( 1 + ford['returns'] ).cumprod()\n","819ad48e":"#Let's practice plotting out some MA (Moving Averages). Plot out the MA50 and MA200 for GM.\nfig, ax = plt.subplots()\n\ntesla['daily_cumulative_return'].plot(figsize=(16,6),color=\"blue\",label='Tesla')\ngm['daily_cumulative_return'].plot(figsize=(16,6),color=\"green\",label='GM')\nford['daily_cumulative_return'].plot(figsize=(16,6),color=\"orange\",label='Ford')\n\nax.legend()\nax.set_title('Daily Cumulative Return');","be6bc513":"Finally lets see if there is a relationship between these stocks, after all, they are all related to the car industry. We can see this easily through a scatter matrix plot. Import scatter_matrix from pandas.plotting and use it to create a scatter matrix plot of all the stocks'opening price. You may need to rearrange the columns into a new single dataframe.","889b9d0c":"The Open Price Time Series Visualization makes Tesla look like its always been much more valuable as a company than GM and Ford. But to really understand this we would need to look at the total market cap of the company, not just the stock price. Unfortunately our current data doesn't have that information of total units of stock present. But what we can do as a simple calcualtion to try to represent total money traded would be to multply the Volume column by the Open price. Remember that this still isn't the actual Market Cap, its just a visual representation of the total amount of money being traded around using the time series. (e.g. 100 units of stock at $10 each versus 100000 units of stock at $1 each)"}}