{"cell_type":{"9d4dc4db":"code","24c3db48":"code","57083c52":"code","fcb67f7e":"code","368c2a83":"code","d6bb90d5":"code","c2a313ac":"code","00eee00e":"code","60a8561e":"code","bbeea274":"code","9f13fb79":"code","e16f9c68":"code","d2e4924b":"code","8ade2b9f":"code","a9673149":"code","231cac2c":"code","97498062":"code","ae1c19d1":"code","7668835b":"code","4515ec6a":"code","0550c707":"code","991256af":"code","5d7d49a3":"code","980e798c":"code","f3ca322b":"code","0d705e3b":"code","4d060871":"code","69dbed5a":"code","aac2bafd":"code","af283754":"code","25fbb8aa":"code","50b3cc89":"code","1e58dd73":"code","3d760766":"code","c52c1cc5":"code","e23cb061":"code","fdfd1acc":"code","e9867dc5":"code","35d77990":"code","5ec4206f":"code","07252e5e":"code","f097274c":"code","6481bcd8":"code","1c456552":"code","5a9140b1":"code","953ce4b6":"code","d42e22e4":"code","8355984d":"code","dcf60f33":"code","8aced90c":"code","acda6aa5":"code","c6a0afc3":"code","ca9b781b":"code","7bd4c2f3":"code","f0c13cba":"code","d0e81555":"code","764feb93":"code","7e8b2e79":"code","7603c345":"code","023fb710":"code","bc6abc20":"code","366a23a9":"code","369a7906":"code","6d461fa5":"code","cd8a6aa4":"code","dd8fdb3a":"code","ca14f309":"code","190ffaaf":"code","10d76fb9":"code","d7c2a4a7":"code","b4e0fb11":"code","d438cafc":"code","ed0b5684":"code","f6f8ab58":"code","1b90a38a":"code","548297b1":"code","581e4a36":"code","887f2209":"code","f74c839c":"code","7233084d":"code","8084202b":"code","e4518a86":"code","aa8a851d":"code","11bfa7d3":"code","c1ce0053":"code","f72a9f30":"code","c1ef54f0":"code","e1060a4b":"code","80f1405c":"code","e2457195":"code","921f9cbb":"code","70c72535":"code","125d549b":"code","65a9491e":"code","b6d5585d":"code","7b543c06":"code","40535fe7":"code","13ed7920":"code","293334fb":"code","fb33ca50":"code","677f680b":"code","b7d7d26e":"code","38544da6":"markdown","30f24b15":"markdown","583473ea":"markdown","d3d4d159":"markdown","e8264d4c":"markdown","b480c80e":"markdown","df3194c8":"markdown","03eb8f62":"markdown","db3f13d2":"markdown","4caa1e98":"markdown","467113f2":"markdown","a9a2c378":"markdown","04aef483":"markdown","73b5c387":"markdown","0946d7f3":"markdown","d41dca80":"markdown","409b59b1":"markdown","15a125b7":"markdown","7debf991":"markdown","988ab777":"markdown","5810219c":"markdown","91a286e1":"markdown","b98d165d":"markdown","6c907739":"markdown","29fe9baa":"markdown","64fbcb78":"markdown","7d06383c":"markdown","9af4598f":"markdown","0165a543":"markdown","8466c6bb":"markdown","7feb7baa":"markdown","773a3521":"markdown","0f1fea4e":"markdown","b0f673ee":"markdown","4431fd69":"markdown","21086958":"markdown","d3e1b21b":"markdown","efe9cce7":"markdown","3891cf20":"markdown","56ec32d4":"markdown","179e26bc":"markdown","b5562940":"markdown","e8578a81":"markdown","7cca0bcb":"markdown","af45f5d1":"markdown","504db36e":"markdown","462c574c":"markdown","dd18cf78":"markdown","bc5535cb":"markdown","bfd1bb2d":"markdown","f032740a":"markdown","a99a992a":"markdown","7611b4be":"markdown","56718f02":"markdown","db7ee6e8":"markdown","12573d71":"markdown","6fb5e788":"markdown","be97fcfb":"markdown","f6b5ee4d":"markdown","4c911ba5":"markdown","8dcd1e77":"markdown","f484496f":"markdown","c364dbc5":"markdown","917e0279":"markdown","bd6e80b9":"markdown","8e993a19":"markdown","47bc5c52":"markdown","bb52338c":"markdown","6260bc38":"markdown","b1b365e6":"markdown","028d81a9":"markdown","814d8b9c":"markdown","2431efc8":"markdown","b4cb9c7f":"markdown","b0bd4f39":"markdown","20f907ce":"markdown","9fbb7d33":"markdown","4c438aab":"markdown","7d5727f1":"markdown","b9ca36db":"markdown","3bf84790":"markdown","0a294df5":"markdown","624a992a":"markdown","9a77c9b5":"markdown","7d202ce4":"markdown","cd9ce45a":"markdown","ccedc20f":"markdown","eca391f5":"markdown","5cb955fa":"markdown","9ccad06e":"markdown","0b849889":"markdown","908065d3":"markdown","e47f2354":"markdown","22e8de3b":"markdown","b82ade58":"markdown","f48df6dc":"markdown","d0d0f76c":"markdown","53fbaee6":"markdown","80016997":"markdown","495d53be":"markdown","59145184":"markdown","4a934499":"markdown","fe887623":"markdown","d86345d2":"markdown","4a9445ef":"markdown","cc715c67":"markdown","75b7300c":"markdown","44f7d753":"markdown","b84bab9a":"markdown","759ae98d":"markdown","ae816fae":"markdown","8838fc16":"markdown","7d04ff82":"markdown","80aabf4e":"markdown","4d0cfe14":"markdown","0513a23f":"markdown"},"source":{"9d4dc4db":"pip install bioinfokit","24c3db48":"# To work with data\nimport numpy as np\nimport pandas as pd\n\n# To parse missed information from additional sources\nimport requests\nfrom bs4 import BeautifulSoup\nimport time\n\n# To work with string\nimport re\n\n# To visualize information\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly as py\nimport networkx as nx\n\n# For statistical calculations\nfrom scipy import stats\nfrom bioinfokit.analys import stat\nfrom statsmodels.formula.api import ols\nimport statsmodels.api as sm","57083c52":"df = pd.read_csv('..\/input\/nba2k20-player-dataset\/nba2k-full.csv')\n\ndf.head()","fcb67f7e":"df.shape","368c2a83":"df.info()","d6bb90d5":"amount_of_dup = df.duplicated().sum()\n\nprint(f'Available number of duplicates - {amount_of_dup}.')","c2a313ac":"amount_of_dup = df['full_name'].duplicated().sum()\n\nprint(f'Available number of duplicates - {amount_of_dup}.')","00eee00e":"df[df['full_name'].duplicated()]","60a8561e":"amount_of_21 = len(df[df['version'] == 'NBA2k21']['version'])\n\nprint(f'NBA2K21 players are available - {amount_of_21}.')","bbeea274":"amount_of_20 = len(df[df['version'] == 'NBA2k20']['version'])\n\nprint(f'NBA2K21 players are available- {amount_of_20}.')","9f13fb79":"index = df[df['full_name'].duplicated() == True].index.values\ndf = df.drop(index=index)\namount_of_dup = df['full_name'].duplicated().sum()\n\nprint(f'Available number of duplicates - {amount_of_dup}.')","e16f9c68":"df[df['team'].isna()]","d2e4924b":"list_of_players = df[df['team'].isna()]['full_name'].values.tolist()\n\nprint(list_of_players)","8ade2b9f":"list_of_players_f = []\n\nfor player in list_of_players:\n    full_name = player.split()\n    full_name = full_name[0] + '_' + full_name[1]\n    list_of_players_f.append(full_name)\n\nprint(list_of_players_f)","a9673149":"url = 'https:\/\/en.wikipedia.org\/wiki\/'\nlist_teams = []\n\nfor full_name in list_of_players_f:\n    link = url + full_name\n    page = requests.get(link)\n    time.sleep(1)\n    \n    soup = BeautifulSoup(page.text, \"html.parser\")\n\n    try:\n        list_teams.append(soup.findAll('td', class_=\"infobox-data\")[-1].text)\n    except:\n        list_teams.append('-')\n\nprint(list_teams)","231cac2c":"list_teams[2] = list_teams[2][:15]\nlist_teams[3] = 'New Orleans Pelicans'\nlist_teams[4] = 'FC Barcelona'\nlist_teams[9] = 'Washington Wizards'\nlist_teams[15] = list_teams[15][1:]","97498062":"print(list_teams)","ae1c19d1":"index = df[df['team'].isna()]['full_name'].index.values\n\nlist_new_team = []\n\nn=0\nfor i, team in enumerate(df['team']):\n    if i in index:\n        list_new_team.append(list_teams[n])\n        n += 1\n    else:\n        list_new_team.append(team)\n\ncol_team = pd.DataFrame(list_new_team, columns=['team'])\ndf['team'] = col_team\n\ndf.iloc[index] ","7668835b":"# list_numbers = []\n\n# for full_name in list_of_players_f:\n#     full_name = full_name.lower()\n#     url = f'https:\/\/www.landofbasketball.com\/nba_players\/{full_name}.htm'\n#     page = requests.get(url)\n#     time.sleep(1)\n\n#     soup = BeautifulSoup(page.text, \"html.parser\")\n\n#     for i in range(1, 3):\n#         s = soup.findAll('tr', class_=\"a-top\")[i].findAll('td')[1].text\n#         res = [int(n) for n in s.split() if n.isdigit()]\n        \n#         try:\n#             res[-1] \n        \n#         except:\n#             continue\n        \n#         if type(res[-1]) == int:\n#             list_numbers.append(f\"#{res[-1]}\")\n#             break\n#         continue\n        \n# print(list_numbers)\nlist_numbers = ['#15', '#11', '#14', '#24', '#17', '#14', '#31', '#10', '#9', '#34', '#14', '#9', '#10', '#3', '#4', '#20', '#18', '#10', '#0', '#44', '#11', '#8', '#55']","4515ec6a":"list_new_numbers = []\n\nn=0\nfor i, jersey in enumerate(df['jersey']):\n    if i in index:\n        list_new_numbers.append(list_numbers[n])\n        n += 1\n    else:\n        list_new_numbers.append(jersey)\n\ncol_jersey = pd.DataFrame(list_new_numbers, columns=['jersey'])\ndf['jersey'] = col_jersey\n\ndf.iloc[index] ","0550c707":"df['college'] = df['college'].apply(lambda item: 'Without education' if item is np.nan else item)","991256af":"df.info()","5d7d49a3":"# The player's number will be presented as an integer.\ndf['jersey'] = df['jersey'].apply(lambda item: np.int64(item[1:]))\n\n# We will present the date in another form - age.\ndf['age'] = df['b_day'].apply(lambda item: 2020 - int('19' + item[-2:]) if int(item[-2:]) > 50 else 2020 - int('20' + item[-2:]))\ndf = df.drop(columns=['b_day'])\n\n# We leave the growth only in meters and convert it to a floating point number.\ndf['height'] = df['height'].apply(lambda item: float(item.split('\/')[1]))\n\n# We leave the weight only in kg and convert it to a floating point number.\ndf['weight'] = df['weight'].apply(lambda item: float(re.search(r'\\d*.\\d*', item.split('\/')[1].strip())[0]))\n\n# Salary are converted into a floating point number.\ndf['salary'] = df['salary'].apply(lambda item: float(item[1:]))\n\n# Convert to an integer.\ndf['draft_round'] = df['draft_round'].apply(lambda item: 0 if item == 'Undrafted' else np.int64(item))\n\n# Convert to an integer.\ndf['draft_peak'] = df['draft_peak'].apply(lambda item: 0 if item == 'Undrafted' else np.int64(item))","980e798c":"df.info()","f3ca322b":"df.head()","0d705e3b":"df.describe(include='all')","4d060871":"def build_hist(column):\n    fig = px.histogram(df, x=column)\n    fig.update_layout(title = f\"{column.title()} of players\", width=600, height=400)\n    fig.show()","69dbed5a":"build_hist(\"rating\")","aac2bafd":"def test_on_norm(column):\n    res = stats.shapiro(df[column].values)\n    print(f'p-value: {res[1]}.')","af283754":"test_on_norm(\"rating\")","25fbb8aa":"build_hist(\"jersey\")","50b3cc89":"test_on_norm(\"jersey\")","1e58dd73":"def build_bar(column):\n    unique_names = df[column].unique()\n    freq = []\n    \n    for name in unique_names:\n        amount = (df[column] == name).sum()\n        freq.append(amount)\n    \n    fig = px.bar()\n    \n    for name, amount in zip(unique_names, freq):\n        fig.add_bar(y=[name], x=[amount], name=name, orientation='h')\n        fig.update_layout(\n            title = column.title()\n            ,xaxis_title = 'Amount'\n            ,yaxis_title = column\n            ,width = 800\n            ,height = 500\n        )\n    fig.show()\n    \n    return freq","3d760766":"freq = build_bar('team')","c52c1cc5":"res = stats.shapiro(freq)\nprint(f'p-value: {res[1]}.')","e23cb061":"freq = build_bar('position')","fdfd1acc":"res = stats.shapiro(freq)\nprint(f'p-value: {res[1]}.')","e9867dc5":"build_hist(\"height\")","35d77990":"test_on_norm(\"height\")","5ec4206f":"build_hist(\"weight\")","07252e5e":"test_on_norm(\"weight\")","f097274c":"build_hist('salary')","6481bcd8":"test_on_norm(\"salary\")","1c456552":"freq = build_bar('country')","5a9140b1":"res = stats.shapiro(freq)\nprint(f'p-value: {res[1]}.')","953ce4b6":"countries = df['country'].unique().tolist()\namount = []\n\nfor country in countries:\n    n = df[df['country'] == country].shape[0]\n    amount.append(n)\n\ndata = dict(type='choropleth', \n    locations=countries, \n    locationmode='country names',\n    z=amount)\n\nmap=go.Figure(data=data)\npy.offline.plot(map)","d42e22e4":"build_hist('age')","8355984d":"test_on_norm('age')","dcf60f33":"build_hist('draft_year')","8aced90c":"test_on_norm('draft_year')","acda6aa5":"names = df['draft_round'].unique()\n\nd0 = df[df['draft_round'] == 0].shape[0] \/ df.shape[0]\nd1 = df[df['draft_round'] == 1].shape[0] \/ df.shape[0]\nd2 = df[df['draft_round'] == 2].shape[0] \/ df.shape[0]\n\ndraft_round = pd.DataFrame({'values': [d0, d1, d2], 'names': names})\n\nfig = px.pie(draft_round, values='values', names='names', title='Draft rounds')\nfig.show()","c6a0afc3":"build_hist(\"draft_peak\")","ca9b781b":"test_on_norm(\"draft_peak\")","7bd4c2f3":"freq = build_bar(\"college\")","f0c13cba":"res = stats.shapiro(freq)\nprint(f'p-value: {res[1]}.')","d0e81555":"df = df.drop(columns=['full_name', 'version'])\n\ndf.head()","764feb93":"corr = df.corr()\n\nfig = px.imshow(corr)\nfig.update_layout(title = \"Correlation between variables\")\nfig.show()","7e8b2e79":"def test_spearman(data0, data1):\n    corr, p = stats.spearmanr(data0, data1)\n    print(f\"Correlation coefficient between two variables {np.round(corr, 2)}, statistical significance {np.round(p, 2)}.\")\n\nedu = df['college'].apply(lambda item: 0 if item == 'Without education' else 1)    \ntest_spearman(edu.values, df['salary'].values)","7603c345":"df['rating'].describe()","023fb710":"group1 = df[df['rating'] < 72]['salary'].values\n\na = df['rating'] >= 72\nb = df['rating'] <= 79\ngroup2 = df[a.values & b.values]['salary'].values\n\ngroup3 = df[df['rating'] > 79]['salary'].values\n\nfig = go.Figure()\nfig.add_trace(go.Box(y=group1, name=\"Group1\"))\nfig.add_trace(go.Box(y=group2, name=\"Group2\"))\nfig.add_trace(go.Box(y=group3, name=\"Group3\"))\n\nfig.update_layout(title_text=\"Box Plot Rating Groups\")\nfig.show()","bc6abc20":"df_rat_sal = df[['rating', 'salary']]\n\ndef convert2group(item):\n    if item < 72:\n        return 'group1'\n    elif item > 79:\n        return 'group3'\n    else:\n        return 'group2'\n\ndf_rat_sal['rating'] = df_rat_sal['rating'].apply(convert2group)\ndf_rat_sal.head()","366a23a9":"def anova(num, ctg, data):\n    model = ols(f'{num} ~ C({ctg})', data=data).fit()\n    anova_table = sm.stats.anova_lm(model, typ=2)\n    print(anova_table)","369a7906":"anova('salary', 'rating', df_rat_sal)","6d461fa5":"def t_turkey(num, ctg, data):\n    res = stat()\n    res.tukey_hsd(df=data, res_var=num, xfac_var=ctg, anova_model=f'{num} ~ C({ctg})')\n    table = res.tukey_summary\n    print(table)\n    \n    return table","cd8a6aa4":"t_turkey('salary', 'rating', df_rat_sal)","dd8fdb3a":"df['age'].describe()","ca14f309":"group1 = df[df['age'] < 25]['salary'].values\n\na = df['age'] >= 25\nb = df['age'] <= 30\ngroup2 = df[a.values & b.values]['salary'].values\n\ngroup3 = df[df['age'] > 30]['salary'].values\n\nfig = go.Figure()\nfig.add_trace(go.Box(y=group1, name=\"<25\"))\nfig.add_trace(go.Box(y=group2, name=\"25-30\"))\nfig.add_trace(go.Box(y=group3, name=\">30\"))\n\nfig.update_layout(title_text=\"Box Plot Age\")\nfig.show()","190ffaaf":"df_age_sal = df[['age', 'salary']]\n\ndef convert2group(item):\n    if item < 25:\n        return 'group1'\n    elif item > 30:\n        return 'group3'\n    else:\n        return 'group2'\n\ndf_age_sal['age'] = df_age_sal['age'].apply(convert2group)\ndf_age_sal.head()","10d76fb9":"anova('salary', 'age', df_age_sal)","d7c2a4a7":"t_turkey('salary', 'age', df_age_sal)","b4e0fb11":"df['draft_year'].describe()","d438cafc":"group1 = df[df['draft_year'] < 2010]['age'].values\n\na = df['draft_year'] >= 2010\nb = df['draft_year'] <= 2015\ngroup2 = df[a.values & b.values]['age'].values\n\ngroup3 = df[df['draft_year'] > 2015]['age'].values\n\nfig = go.Figure()\nfig.add_trace(go.Box(y=group1, name=\"<2010\"))\nfig.add_trace(go.Box(y=group2, name=\"2010-2015\"))\nfig.add_trace(go.Box(y=group3, name=\">2015\"))\n\nfig.update_layout(title_text=\"Box Plot Draft years\")\nfig.show()","ed0b5684":"df_draft_year_age = df[['draft_year', 'age']]\n\ndef convert2group(item):\n    if item < 2010:\n        return 'group1'\n    elif item > 2015:\n        return 'group3'\n    else:\n        return 'group2'\n\ndf_draft_year_age['draft_year'] = df_draft_year_age['draft_year'].apply(convert2group)\ndf_draft_year_age.head()","f6f8ab58":"anova('age', 'draft_year', df_draft_year_age)","1b90a38a":"t_turkey('age', 'draft_year', df_draft_year_age)","548297b1":"group1 = df[df['age'] < 25]['rating'].values\n\na = df['age'] >= 25\nb = df['age'] <= 30\ngroup2 = df[a.values & b.values]['rating'].values\n\ngroup3 = df[df['age'] > 30]['rating'].values\n\nfig = go.Figure()\nfig.add_trace(go.Box(y=group1, name=\"<25\"))\nfig.add_trace(go.Box(y=group2, name=\"25-30\"))\nfig.add_trace(go.Box(y=group3, name=\">30\"))\n\nfig.update_layout(title_text=\"Box Plot Age\")\nfig.show()","581e4a36":"df_age_rat = df[['age', 'rating']]\n\ndef convert2group(item):\n    if item < 25:\n        return 'group1'\n    elif item > 30:\n        return 'group3'\n    else:\n        return 'group2'\n\ndf_age_rat['age'] = df_age_rat['age'].apply(convert2group)\ndf_age_rat.head()","887f2209":"anova('rating', 'age', df_age_rat)","f74c839c":"t_turkey('rating', 'age', df_age_rat)","7233084d":"fig = go.Figure()\n\ncountries = df['country'].unique()\n\nfor country in countries:\n    fig.add_trace(go.Box(x=df[df['country'] == country]['salary'], name=f\"{country}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=1000, height=800)\nfig.update_traces(orientation='h')\nfig.show()","8084202b":"df_count_rat = df[['country', 'salary']]\n\nfor country in countries:\n    shape = df_count_rat[df_count_rat['country'] == country].shape[0]\n    \n    if shape == 1:\n        idx = df_count_rat[df_count_rat['country'] == country].index.values\n        df_count_rat = df_count_rat.drop(index=idx)","e4518a86":"anova('salary', 'country', df_count_rat)","aa8a851d":"fig = go.Figure()\n\nteams = df['team'].unique()\n\nfor team in teams:\n    fig.add_trace(go.Box(x=df[df['team'] == team]['salary'], name=f\"{team}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=1000, height=800)\nfig.update_traces(orientation='h')\nfig.show()","11bfa7d3":"df_team_rat = df[['team', 'salary']]\n\nfor team in teams:\n    shape = df_team_rat[df_team_rat['team'] == team].shape[0]\n    \n    if shape == 1:\n        idx = df_team_rat[df_team_rat['team'] == team].index.values\n        df_team_rat = df_team_rat.drop(index=idx)","c1ce0053":"anova('salary', 'team', df_team_rat)","f72a9f30":"fig = go.Figure()\n\npositions = df['position'].unique()\n\nfor position in positions:\n    fig.add_trace(go.Box(x=df[df['position'] == position]['salary'], name=f\"{position}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=600, height=400)\nfig.update_traces(orientation='h')\nfig.show()","c1ef54f0":"df_pos_rat = df[['position', 'salary']]\n\nfor position in positions:\n    shape = df_pos_rat[df_pos_rat['position'] == position].shape[0]\n    \n    if shape == 1:\n        idx = df_pos_rat[df_pos_rat['position'] == position].index.values\n        df_pos_rat = df_pos_rat.drop(index=idx)","e1060a4b":"anova('salary', 'position', df_pos_rat)","80f1405c":"fig = go.Figure()\n\ncounries = df['country'].unique()\n\nfor country in countries:\n    fig.add_trace(go.Box(x=df[df['country'] == country]['age'], name=f\"{country}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=1000, height=800)\nfig.update_traces(orientation='h')\nfig.show()","e2457195":"fig = go.Figure()\n\nteams = df['team'].unique()\n\nfor team in teams:\n    fig.add_trace(go.Box(x=df[df['team'] == team]['age'], name=f\"{team}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=1000, height=800)\nfig.update_traces(orientation='h')\nfig.show()","921f9cbb":"fig = go.Figure()\n\npositions = df['position'].unique()\n\nfor position in positions:\n    fig.add_trace(go.Box(x=df[df['position'] == position]['age'], name=f\"{position}\"))\n\nfig.update_layout(title_text=\"Box Plot Age\", width=600, height=400)\nfig.update_traces(orientation='h')\nfig.show()","70c72535":"df_count_age = df[['country', 'age']]\n\nfor country in countries:\n    shape = df_count_age[df_count_age['country'] == country].shape[0]\n    \n    if shape == 1:\n        idx = df_count_age[df_count_age['country'] == country].index.values\n        df_count_age = df_count_age.drop(index=idx)","125d549b":"anova('age', 'country', df_count_age)","65a9491e":"df_team_age = df[['team', 'age']]\n\nfor team in teams:\n    shape = df_team_age[df_team_age['team'] == team].shape[0]\n    \n    if shape == 1:\n        idx = df_team_age[df_team_age['team'] == team].index.values\n        df_team_age = df_team_age.drop(index=idx)","b6d5585d":"anova('age', 'team', df_team_age)","7b543c06":"table = t_turkey('age', 'team', df_team_age)","40535fe7":"table[table['p-value'] < 0.05]","13ed7920":"df_pos_age = df[['position', 'age']]\n\nfor position in positions:\n    shape = df_pos_age[df_pos_age['position'] == position].shape[0]\n    \n    if shape == 1:\n        idx = df_pos_age[df_pos_age['position'] == position].index.values\n        df_pos_age = df_pos_age.drop(index=idx)","293334fb":"anova('age', 'position', df_pos_age)","fb33ca50":"from sklearn.linear_model import LinearRegression\ndef calculate_vif(df, features):    \n    vif, tolerance = {}, {}\n\n    for feature in features:\n        X = [f for f in features if f != feature]        \n        X, y = df[X], df[feature]\n        r2 = LinearRegression().fit(X, y).score(X, y)                \n        \n        tolerance[feature] = 1 - r2\n        vif[feature] = 1\/(tolerance[feature])\n\n    return pd.DataFrame({'VIF': vif, 'Tolerance': tolerance})","677f680b":"allow_col = ['rating', 'jersey', 'height', 'weight', 'draft_peak', 'age', 'draft_year', 'draft_round']\n\ncalculate_vif(df, allow_col)","b7d7d26e":"calculate_vif(df, allow_col[:-2])","38544da6":"Conclusion: the distribution is abnormal.","30f24b15":"It can be seen that the distribution is asymmetric with a long right tail, which indicates an uneven number of points between players.","583473ea":"Let's try to find collinearity between some data. To do this, use the Variance Inflation Factor. VIF allows you to determine the strength of the correlation between different independent variables. It is calculated by taking a variable and regressing it against all other variables. \\\nPresent","d3d4d159":"We look at the result of our work:","e8264d4c":"### Salary","b480c80e":"The graph shows that the median differs between groups. To clarify, we will conduct more statistical analyzes.","df3194c8":"We build a histogram of the distribution of growth among basketball players.","03eb8f62":"We check if everything is done correctly.","db3f13d2":"Conclusion: the difference between the medians of age between countries is not statistically significant.","4caa1e98":"The graph shows that there is a position that is more common (G) than others (C-F). \\\nLet's check for normalcy.","467113f2":"It can be seen that some teams meet more often (such as Milwaukee Bucks), and some less, up to 1 representative (such as Galatasaray). Let's test for normality.","a9a2c378":"The schedule of changes is clearly invisible. It is necessary to conduct a statanalysis.","04aef483":"Let's build a graph.","73b5c387":"You can't tell from the schedule, there is a significant difference. Let's run a test.","0946d7f3":"The test confirms our assumptions. Position in the team does not affect the level of wages.","d41dca80":"Let's divide our players into three categories: with a rating of up to 72, from 72 to 79 and more than 79. Then we compare the average salary between them.","409b59b1":"It is interesting to look at the distribution of players by age. Before drawing the distribution, we can say that the players will be relatively young, because professional athletes have a short career.","15a125b7":"Next, let's see what the gap in the team column looks like.","7debf991":"It is obvious that the duplicates are information about 10 players from NBA2K21. Let's check how many players there are in the NBA2K21 version.","988ab777":"Next, turn the missing data into college in our understanding. NaN in this column means the player has no education (as indicated by the NBA's references to education and the solution to this problem by sending players without education to get it). \\\nWe replace NaN with without education.","5810219c":"### Team","91a286e1":"Download the data, open the first 5 lines and see the total number of dataframe.","b98d165d":"### Age","6c907739":"We build a histogram of the distribution of growth among basketball players.","29fe9baa":"Our hypothesis is correct. The number of young players in the NBA has grown in recent years.\n\nLet's move on.","64fbcb78":"Let's build a bar plot to visualize the distribution of positions.","7d06383c":"Display the updated letter:","9af4598f":"Next, consider the above statements in more detail.\n\nThe first of them indicates that there is a dependence of salary on the player's rating. \\\nRecall what are the values of the rating.","0165a543":"The test showed a negative result, indicating abnormality.","8466c6bb":"We see that there were problems with 3 players. You need to go to their pages to find information and edit in the set.","7feb7baa":"## Analysis of individual attributes","773a3521":"It is clear that all other players - according to NBA2K20.\n\nConclusion: The data contains information about 10 players in NBA2K20 and NBA2K21. For analysis, this will be difficult, because most players are NBA2K20, so you need to remove existing duplicates.","0f1fea4e":"We see that with age the distribution is completely different. We will conduct tests and interpret.","b0f673ee":"Next we find their game numbers. To do this, use a similar parser and look for information in the general search engine.","4431fd69":"It is seen that the p-value is below the established level of significance for each pair, which indicates the deviation of the null hypothesis.\n\nConclusion: We have confirmed that the player's rating affects the level of wages.","21086958":"I will not check my second statement, because it is a proven physiological fact.\n\nI will pass to 3. We will check through the similar scheme, at first we divide into groups depending on age, and then we carry out the analysis of variance.","d3e1b21b":"The value of p is less than statistically significant 0.05, which makes it possible to reject the hypothesis of normality. \\\nThis means that among the population, some rating values are more common than others. In this case - relatively smaller.","efe9cce7":"Visually, we can say that the distribution of growth is similar to normal. \\\nLet's run a test.","3891cf20":"We see that the situation has improved. There is now no collinearity between the vectors of several attributes in the set.","56ec32d4":"First, let's make descriptive statistics of individual attributes. \\\nWe will deduce the table with descriptive values for each attribute.","179e26bc":"Let's build a graph.","b5562940":"### College","e8578a81":"After the test, it is seen that the average salary does not differ between countries.","7cca0bcb":"Next we will look at the distribution of player numbers in this population. To do this, build a histogram again.","af45f5d1":"### Jersey","504db36e":"From this we conclude that the availability of education does not affect the level of wages.","462c574c":"We see that the number of duplicates coincides with the number of players in the NBA2K21 version. \\\nFor more accurate conclusions, let's check the number of players in the NBA2K20 version.","dd18cf78":"## Introduction","bc5535cb":"The graph confirmed the above opinion. He also showed that the distribution is relatively symmetrical and the center is located in the area of **23-27 years**.","bfd1bb2d":"The normality test rejected the hypothesis of normality.","f032740a":"### Position","a99a992a":"It is seen that the position of the player is statistically independent of the age of the player.","7611b4be":"### Weight","56718f02":"Since the value of the command is a categorical indicator, we will use the bar plot to analyze the number of commands.","db7ee6e8":"### Height","12573d71":"We check 4 statements:","6fb5e788":"Data for analysis were taken from a set of NBA players.\n\nPurpose: to make exploraty and statistical analysis.","be97fcfb":"We determine the Pearson correlation of our numerical attributes.","f6b5ee4d":"Conclusion: the level of wages depends on age.","4c911ba5":"The graph shows that the distribution is similar to normal. However, the presence of several extreme values changes our conclusion.","8dcd1e77":"Let's try to conduct similar tests for age.","f484496f":"Let's walk on each attribute.","c364dbc5":"It can be seen that all attributes except \"rating\" and \"draft_year\" are objects. The other two are whole chmslami.\nAlso, of all the attributes, \"team\" and \"college\" have insufficient data.","917e0279":"It is clear that most players have no education. Next are players with education in Kentucky and Duke.","bd6e80b9":"### Draft peak","8e993a19":"For further work it is necessary to format the data to the required types. But before that, let's deal with omissions and the presence of duplicates.\n\nFirst, check for duplicates.","47bc5c52":"With names, everything is clear, each name is unique to the player. Next is the rating. \\\nRating is a special composite ratio that characterizes the player. The higher the rating, the better. We see that the maximum value is 97 and the minimum is 67. Construct a histogram.","bb52338c":"### Rating","6260bc38":"A similar situation to the player rankings. The distribution of numbers is not uniform and more common numbers are less than 60. \\\nLet us confirm our hypothesis statistically.","b1b365e6":"![image.png](attachment:image.png)","028d81a9":"The above result rejects the null hypothesis of equality of mean values between groups. Tukey's a posteriori analysis should be performed to obtain specific information for each group.","814d8b9c":"The test confirms the asymmetry.","2431efc8":"If we talk about lines with all the attributes, then among them there are no ones that occur more than once.\n\nLet's try to find duplicates for an attribute that is unique to the player - full name.","b4cb9c7f":"The upper distribution is asymmetrical, but compared to others, it has a tail on the left. \\\nConclusion: every year the number of people selected in the draft increases.","b0bd4f39":"We are looking at the VIF indicator. If it is greater than 5, it means that there is a strong correlation of attributes. In our case, this is the age of the player and the year of his draft, round of draft and peak draft. The age of the player is really strongly related to the year of the draft, because boys from the age of 19 can take part in the draft, and therefore the number of young guys increases every year. The situation is similar with the round and the peak of the draft. After all, in the first round you can score up to 30 points, and in the second - up to 60. Therefore, from one attribute you can conclude about another.\n\nYou can try to delete the draft year, and check for collinearity again.  ","20f907ce":"### Draft round","9fbb7d33":"The test result is ambiguous, but we reject the hypothesis of normality.","4c438aab":"Let's see which countries are represented in this sample.","7d5727f1":"There is no clear trend, and there is data in which only one observation. We will perform analysis of variance for data where there are many observations.","b9ca36db":"Let's examine the relationship between country, team and position on the target, as well as age.","3bf84790":"We display the first 5 lines for visual inspection.","0a294df5":"The whole analysis gave us knowledge about the individual attributes of the NBA player, namely the distribution of the feature, the mean values or medians, the direction of the tails (asymmetric) and the possible relationship with other attributes.\n\nThe next section will: \\\n1) the analysis of interaction of attributes and definition of influence on each other is carried out; \\\n2) the search of the collinearity of attributes.","624a992a":"Import the necessary libraries for work.","9a77c9b5":"\u041f\u0435\u0440\u0435\u0434 \u0431\u0435\u0437\u043f\u043e\u0441\u0435\u0440\u0435\u0434\u043d\u044c\u043e\u044e \u0440\u043e\u0431\u043e\u0442\u043e\u044e \u043a\u043e\u0440\u043e\u0442\u043a\u043e \u043e\u043f\u0438\u0448\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043a\u043e\u0436\u043d\u043e\u0433\u043e \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0443 \u0434\u043b\u044f \u043a\u0440\u0430\u0449\u043e\u0433\u043e \u0440\u043e\u0437\u0443\u043c\u0456\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445.\n\n**full_name** - *full name of player;*\n\n**rating**, *Hollinger rating - a rating of the effectiveness of a basketball player. John Hollinger has created a rating that can determine the impact and benefits of a player by one number - by his rating (using detailed formulas, Hollinger developed a system that evaluates the statistical characteristics of each player). \n  The calculation of this rating includes the following parameters: prefix indicating the command; prefix indicating the league; number of minutes played; the number of three-pointers scored; number of goals scored; the number of free throws and other parameters set out in basketball statistics.*\n\n**jersey** - *individual number of the player on his clothes.*\n\n**team** - *the name of the team in which the player is.*\n\n**position** - *position on the playing field.*\n\n**b_day** - *player's birthday.*\n\n**height** - *height of player.*\n\n**weight** - *weight of player.*\n\n**salary** - *salary per year.*\n\n**country** - *the coutry where player lives.*\n\n-----------------------------------------------------------------------------------------------------\n**draft NBA** - *the annual selection procedure of thirty clubs of the National Basketball Association for new basketball players who want to start a career in the best basketball league on the planet. These players are usually graduates of American colleges, but recently there has been an increase in the number of athletes entering the NBA from other countries or who have just graduated..*\n\n-----------------------------------------------------------------------------------------------------\n**draft_year** - *the year of selection in which the player participated.*\n\n**draft_round** - *selection round attended by the player (maximum is 2).*\n\n**draft_peak** - *number of points scored during the lottery (maximum 30 for one round (60 for two rounds)).*\n\n**college** - *the location of the college the player graduated from.*\n\n**version** - *time of the lottery.*","7d202ce4":"There is a difference between the created groups. Now you can check in pairs.","cd9ce45a":"We see that all data contains information about 439 players by 14 attributes (excluding the name of the player).\n\nOpen general information about attributes:","ccedc20f":"We add information to the general data set.","eca391f5":"We can say that the Houston Rockets are a relatively older team than others.","5cb955fa":"The hypothesis is confirmed.","9ccad06e":"You can see that there is a strong asymmetry. The most common players are from the United States (**323**). This is not surprising, because before, the NBA could include players from American countries. Players from other countries were later allowed.","0b849889":"Let's draw the number of college graduates and the number of uneducated players.","908065d3":"Now the set is ready for analysis.","e47f2354":"Checking the information about several players on the Internet, we can say that these omissions are due to insufficient information in the set. They can be corrected by adding all the missing data using a parser.","22e8de3b":"Conclusion: in this case, there is a statistically significant difference in median age between the teams. Let's clarify between which ones.","b82ade58":"Look at that the distribution is asymmetric with a long tail on the right. Let's test for normality. To do this, use the Shapiro-Wilk test.","f48df6dc":"We parse Wikipedia pages. To prevent the page from reloading with queries, we take a break of 1 second.","d0d0f76c":"We change the names to the type needed to search Wikipedia.","53fbaee6":"Conclusion: \\\n    1) there is a strong positive relationship between a player's rating and his salary, as mentioned earlier. This is a confirmation of our intuitive assumptions; \\\n    2) there is a strong positive relationship between height and weight. This can be interpreted as a physiological phenomenon; \\\n    3) there is a moderate positive relationship between age and salary. This can be attributed to the player's experience. For a more detailed explanation, we will check in the future; \\\n    4) there is a very strong negative relationship between the year of the draft and the age. Hypothesis: new young players started to appear every year. For further interpretation, we will test by age groups; \\\n    5) weak positive relationship between age and rating. We interpret this later; \\\n    6) there is a negative moderate correlation between the year of the draft and the rating. This can be related to the above-mentioned year and age. Young players in the NBA do not have the same experience as seniors; \\\n    7) there is a negative moderate relationship between the year of the draft and the salary. The interpretation is similar to the above and will require confirmation by other methods.\n    8) strong interaction between the draft round and the draft peak.\n    \nIn addition to the above attributes, there are two other categories - full name, team, position, country, education and draft round. We will not take the full name in the study, because it is unique as an id, and does not carry statistical information. The interaction between the draft round and others needs to be explored.\n   \nDetermine the statistical significance of the relationship of some numerical and categorical attributes.","80016997":"Let's build a graph.","495d53be":"*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*","59145184":"### Attribute interaction research","4a934499":"We see that there are no gaps in the data. Therefore, we can start formatting the data in the form we need.","fe887623":"10 duplicates were found. Let's check them.","d86345d2":"p-value is very low, which rejects the hypothesis of normality.","4a9445ef":"According to this graph, we can conclude that the distribution is asymmetric with a long right tail. \\\nConclusion: certain values of the amount occur more often than others.\n\nThis fact can be related to the rating of players (which had a similar distribution) and make the assumption that the higher the rating of the player, the higher the salary. But we will check later.\n\nLet's do a normality test.","cc715c67":"# Exploraty Data Analysis","75b7300c":"Conclusion: p-value is lower compared to our level of significance, which gives us reason to reject the null hypothesis and say that the player's rating depends on age.\n\nWe will work with other statements later. Let's look at our category indicators.","44f7d753":"### Country","b84bab9a":"We add information to the general data set.","759ae98d":"Let's make a parser that will find the missing data. \\\nFirst, let's create a list of the names of all the players who have no information about their team.","ae816fae":"We are building a distribution for salary.","8838fc16":"Research also shows that although the median salaries may vary between players, the amounts are about the same.","7d04ff82":"### Draft year","80aabf4e":"Conclusion: the largest number of players who got into the NBA with 2 times. There is least with 1.","4d0cfe14":"First, we remove the columns that will not be needed in further research, because they are not informative for us.","0513a23f":"We see that many comparisons. Let's separate those that differ."}}