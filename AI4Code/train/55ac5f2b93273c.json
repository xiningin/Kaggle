{"cell_type":{"cc96fae1":"code","5157d710":"code","1c6e50d3":"code","bfc20310":"code","e6009bd3":"code","8aafb8e9":"code","082dc5ff":"code","4b08bcc9":"code","fd56e236":"code","64efface":"code","b3a42710":"code","3ebd1d36":"code","a7e033ea":"code","9827819c":"code","8086526c":"code","ecf4257b":"code","8a5ef5ef":"code","c94baf0b":"code","f5c0be4e":"code","2d479e35":"code","61019077":"code","26f7350c":"code","dadfac48":"code","86ae7ff4":"code","3ebe8d29":"code","5e5f4fcb":"code","3ed71b5c":"code","a44fdc15":"code","bcb75849":"code","564e466d":"code","b2c4cdcd":"code","35cb73f3":"code","9b74e7d1":"code","66c126ff":"code","082a4d21":"code","4d538eeb":"code","0fd760dd":"code","7d7996e7":"code","ac0f28e6":"code","5f5d0aca":"code","7f556994":"code","8b27d172":"code","157e328d":"code","71dc2355":"code","457dc8d3":"code","839dce51":"code","169f51f9":"code","2f7e6a98":"code","b6b0f87e":"code","d9389d72":"code","5d57756a":"code","a7f1a776":"code","12340b1a":"code","978b0b04":"code","f45564d9":"code","08945227":"code","7a648578":"code","d866bf73":"code","3c7b5a2f":"code","e7ea10bf":"code","3da71674":"code","ac707884":"code","4ac332e0":"code","6909ba63":"code","70fecaf8":"code","18440784":"code","3b24669b":"code","cbad34b4":"code","beae6792":"code","d7fba40d":"code","f2adc487":"code","4cb6bd31":"markdown","965bc9d0":"markdown","505ed104":"markdown","304e4386":"markdown","441b85e2":"markdown","06bf0ec8":"markdown","943536ea":"markdown","12e81caf":"markdown"},"source":{"cc96fae1":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n","5157d710":"#bch=pd.read_csv(\"C:\\Users\\91906\\Desktop\\FMS Python\\bank_churn.csv\")\n#bch= pd.read_csv(\"churnmodelling.csv\")\nbch =  pd.read_csv('..\/input\/churnmodelling\/Churn_Modelling.csv')","1c6e50d3":"bch.head()","bfc20310":"bch.info()","e6009bd3":"bch.describe()","8aafb8e9":"bch.drop('RowNumber', axis=1, inplace=True)\nbch.head()\n#dropping row number as already index is present ","082dc5ff":"bch.drop('Surname', axis=1, inplace=True)\nbch.drop('CustomerId', axis=1, inplace=True)\nbch.head()\n#dropping surname and customerID as it is insignificant in EDA for bank churn","4b08bcc9":"#checking the churn probability vs credit score median\nbch.groupby('Exited')['CreditScore'].median()","fd56e236":"bch.Exited.value_counts()","64efface":"#considering genderwise how many exited\nbch.groupby('Exited')['Gender'].value_counts()","b3a42710":"sns.catplot(x = 'Exited', hue= 'Gender', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","3ebd1d36":"sns.boxplot(x='Exited',y='Tenure',data=bch)","a7e033ea":"pd.crosstab(bch.Geography,bch.Exited)","9827819c":"pd.crosstab(bch.Tenure,bch.Exited)","8086526c":"#percentage of cust exited  wrt credit card\nbch.groupby(['HasCrCard','Exited'])['Exited'].count()\/bch.groupby(['HasCrCard'])['Exited'].count()","ecf4257b":"#percentage of cust exited in each tenure\nbch.groupby(['Tenure','Exited'])['Exited'].count()\/bch.groupby(['Tenure'])['Exited'].count()","8a5ef5ef":"pd.crosstab(bch.Geography,bch.Exited)","c94baf0b":"sns.catplot(x = 'Exited', hue= 'Geography', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers')","f5c0be4e":"bch['Age_cat'] = pd.cut(bch['Age'],\n                    bins=[0,25,40,60,99],\n                    labels=['Teen', 'Youth', 'Middle','Old'])\nbch.head()","2d479e35":"sns.catplot(x = 'Exited', hue= 'Age_cat', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","61019077":"sns.displot(x='NumOfProducts', hue='Exited', data=bch)","26f7350c":"#binning on basis of credit score\n\nbch['Score'] = pd.cut(bch['CreditScore'],\n                    bins=[0,600,750,999],\n                    labels=['Poor', 'Average', 'Good'])\nbch.head()","dadfac48":"sns.catplot(x = 'Exited', hue= 'Score', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","86ae7ff4":"#balance vs exited\nsns.histplot(data=bch, x='Balance', kde=True,hue='Exited')","3ebe8d29":"#checking balance wise proportion of exited\nsns.displot(data = bch, x = 'Balance', hue='Exited', kind = 'ecdf')","5e5f4fcb":"#Estimatedsalary vs exited\nsns.histplot(data=bch, x='EstimatedSalary', kde=True,hue='Exited')","3ed71b5c":"sns.displot(data = bch, x = 'EstimatedSalary', hue='Exited', kind = 'ecdf')","a44fdc15":"#balance vs estimated salary\nsns.jointplot(x='EstimatedSalary', y='Balance', data=bch, hue='Exited')","bcb75849":"#Age vs exited\nsns.histplot(data=bch, x='Age', kde=True,hue='Exited')","564e466d":"#Age_cat vs exited\nsns.histplot(data=bch, x='Age_cat', kde=True,hue='Exited')","b2c4cdcd":"sns.displot(data = bch, x = 'Age_cat', hue='Exited', kind = 'ecdf')","35cb73f3":"ab=pd.crosstab( bch['Exited'], bch['Age_cat'])\nab","9b74e7d1":"sns.heatmap(data=ab,linecolor='g')","66c126ff":"#gender vs exited\ng=pd.crosstab( bch['Exited'], bch['Gender'])\ng","082a4d21":"sns.heatmap(data=g)","4d538eeb":"#Geography vs Exited\na=pd.crosstab( bch['Exited'], bch['Geography'])\na\n","0fd760dd":"sns.heatmap(data=a,linecolor='White')","7d7996e7":"sns.boxplot(x = 'Exited',       \n              y = 'Age', \n              data = bch,\n              color = 'm'\n              )","ac0f28e6":"#age vs balance\nsns.jointplot(x='Age', y='Balance', data=bch, hue='Exited')","5f5d0aca":"#age vs Estimated salary\nsns.jointplot(x='Age', y='EstimatedSalary', data=bch, hue='Exited')","7f556994":"#balance vs HasCrCard\nsns.jointplot(x='HasCrCard', y='Balance', data=bch, hue='Exited')","8b27d172":"#balance vs credit score\nsns.jointplot(x='Balance', y='CreditScore', data=bch, hue='Exited')","157e328d":"#age vs credit score\nsns.jointplot(x='Age', y='CreditScore', data=bch, hue='Exited')","71dc2355":"#no of customers exited wrt geography and age_cat\nsns.catplot(x = 'Exited', hue= 'Age_cat',col = 'Geography', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","457dc8d3":"#no of customers exited wrt geography and score\nsns.catplot(x = 'Exited', hue= 'Score',col = 'Geography', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","839dce51":"#no of customers exited wrt geography and score\nsns.catplot(x = 'Exited', hue= 'Score',col = 'Age_cat', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","169f51f9":"sc=pd.crosstab(bch.Exited,bch.Score)\nsc","2f7e6a98":"sns.heatmap(data=sc)","b6b0f87e":"sns.catplot(x = 'Exited', hue = 'Score',row= 'Gender',col = 'Age_cat', data= bch, kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","d9389d72":"s=pd.crosstab(bch.Score,bch.HasCrCard)\ns","5d57756a":"gc=pd.crosstab(bch.HasCrCard, bch.Exited)\ngc","a7f1a776":"sns.heatmap(data=gc)","12340b1a":"#Tenure vs Exited\nsns.countplot(x='Tenure', data=bch, hue='Exited')","978b0b04":"t=pd.crosstab(bch.Exited, bch.Tenure)\nt","f45564d9":"t['Exited_per'] =  t.loc[1] * 100 \/ t.sum()\nt['Notexited_per'] = t.loc[0] * 100 \/ t.sum()\nt","08945227":"t.loc[1], t.sum(), t.loc[1]*100\/t.sum()\n\nexit_1_per=t.loc[1]*100\/t.sum()\nexit_1_per\n\nexit_0_per=t.loc[0]*100\/t.sum()\nexit_0_per","7a648578":"exit_1_per.T.plot(kind='bar', stacked=True, figsize=(7,5))","d866bf73":"exit_0_per.T.plot(kind='bar', stacked=True, figsize=(7,5))","3c7b5a2f":"#IsActiveMember vs Exited\nac = pd.crosstab(bch.IsActiveMember, bch.Exited)\nac","e7ea10bf":"sns.heatmap(data=ac)","3da71674":"sns.displot(data = bch, x = 'IsActiveMember', hue='Exited', kind = 'ecdf')","ac707884":"sns.displot(data = bch,x='IsActiveMember', y = 'Balance', hue='Exited', kind='kde')","4ac332e0":"sns.displot(data = bch,x='CreditScore', y = 'Balance', hue='Exited', kind='kde')","6909ba63":"sns.displot(data = bch,x='CreditScore', y = 'Balance', hue='Exited', kind='hist')","70fecaf8":"bch.head()","18440784":"acs =pd.crosstab(bch.Age_cat,bch.Score)\nacs","3b24669b":"sns.heatmap(data=acs)","cbad34b4":"sns.catplot(x = 'Exited', hue = 'Score',row= 'NumOfProducts',col = 'IsActiveMember', data=bch,kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","beae6792":"sns.catplot(x = 'Exited', hue = 'Exited',row= 'Age_cat',col = 'NumOfProducts', data=bch,kind='count')\nplt.xticks(range(2), ['NO', 'YES'])\nplt.ylabel('Number of Customers');","d7fba40d":"cat = bch.select_dtypes(include=['category']).columns.values\nobj = bch.select_dtypes(include=['object']).columns.values\ncon = np.array([x for x in bch.select_dtypes(include=['int64','float64']).columns.values if x not in ('Age','CreditScore','Tenure','Balance','EstimatedSalary')])","f2adc487":"p = bch.select_dtypes(include=['category','object']).columns.values\nfig,ax = plt.subplots(2,2, figsize = (10,8))\nax = ax.flatten()\n\nfor i in range(len(p)):\n    sns.countplot(x = bch[p[i]], data = bch,ax =ax[i] )","4cb6bd31":"### indicates that most % of middle aged customers exit and most % of youth cust are retained\n","965bc9d0":"### almost 33% of people in Germany are likely to exit, hence max %","505ed104":"### inactive members are likely to exit more \n","304e4386":"### doesnt show any clear picture ","441b85e2":"### customers with credit score 500-850 with balance between 50000 and 200000 are more likely to exit\n### doesnt give any clear picture","06bf0ec8":"### more the no of products the cust is holding, more percentage of them are likely to exit though their count is less","943536ea":"### more number (%) of females exited ","12e81caf":"## If we consider 1 as exited , then 75% customers exited and only 25% retained.\n"}}