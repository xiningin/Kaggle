{"cell_type":{"8de454e6":"code","27a95b43":"code","04d23596":"code","c165749e":"code","607e57a8":"code","d0187461":"code","f064c68e":"code","3073292e":"code","55b3f1f7":"code","a20a0df3":"code","f066965d":"code","595783db":"code","4071796e":"code","c7f4bf2e":"code","5d27b41e":"code","15a37e77":"code","34d914df":"code","16cf7ec4":"code","4c13fae2":"code","8391cd48":"code","d7c1b195":"code","e3896425":"code","b66e84e0":"code","8ee5bdcc":"code","bf566907":"code","6c01aea8":"code","6d26e165":"code","63787fef":"code","4cfbcbdc":"code","a8a15026":"markdown","a481e761":"markdown","ab5fc437":"markdown","174270e9":"markdown","c1983dd2":"markdown","82cbb90a":"markdown","9b6e5ce6":"markdown","5ffdf7bb":"markdown","611866ad":"markdown","1dd53d66":"markdown","15bd381e":"markdown","086f1c82":"markdown","e24549df":"markdown","c89fccd2":"markdown","b1b703ed":"markdown","2667ade4":"markdown","5f79d36a":"markdown","d344eef8":"markdown","0d4c1c66":"markdown","eb5f9fb2":"markdown","c612bff2":"markdown","b79117a0":"markdown","1d586ac2":"markdown"},"source":{"8de454e6":"# Here we load the necessary Libraries\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")","27a95b43":"#Using Powerful Pandas Library We can read and Manipulate the data.\ndata=pd.read_csv(\"..\/input\/heart.csv\")","04d23596":"#Displaying few rows\ndata.head()","c165749e":"data.columns = ['age', 'sex', 'chest_pain_type', 'resting_blood_pressure', 'cholesterol', 'fasting_blood_sugar', 'rest_ecg', 'max_heart_rate_achieved',\n       'exercise_induced_angina', 'st_depression', 'st_slope', 'num_major_vessels', 'thalassemia', 'target']\n","607e57a8":"#changing the Categorical Variables\n\ndata.sex[data.sex==0]='Female'\ndata.sex[data.sex==1]='Male'\n\n\ndata.chest_pain_type[data.chest_pain_type==0]='typical angina'\ndata.chest_pain_type[data.chest_pain_type== 1] = 'atypical angina'\ndata.chest_pain_type[data.chest_pain_type== 2] = 'non-anginal pain'\ndata.chest_pain_type[data.chest_pain_type== 3] = 'asymptomatic'\n\ndata.rest_ecg[data.rest_ecg == 0] = 'normal'\ndata.rest_ecg[data.rest_ecg == 1] = 'ST-T wave abnormality'\ndata.rest_ecg[data.rest_ecg == 2] = 'left ventricular hypertrophy'\n\ndata.fasting_blood_sugar[data.fasting_blood_sugar == 0] = 'lower than 120mg\/ml'\ndata.fasting_blood_sugar[data.fasting_blood_sugar == 1] = 'greater than 120mg\/ml'\n\n\ndata.exercise_induced_angina[data.exercise_induced_angina == 0] = 'no'\ndata.exercise_induced_angina[data.exercise_induced_angina == 1] = 'yes'\n\n\ndata.st_slope[data.st_slope== 0] = 'upsloping'\ndata.st_slope[data.st_slope== 1] = 'flat'\ndata.st_slope[data.st_slope== 2] = 'downsloping'\n\ndata.thalassemia[data.thalassemia == 1] = 'normal'\ndata.thalassemia[data.thalassemia ==  2] = 'fixed defect'\ndata.thalassemia[data.thalassemia == 3] = 'reversable defect'","d0187461":"data.head()","f064c68e":"data.isnull().sum()","3073292e":"data.dtypes","55b3f1f7":"data.target=data.target.astype('object')","a20a0df3":"# Target Vs Sex-->Count Plot\nsns.countplot(x=data.sex,hue=data.target,palette='Set1')\nplt.title(\"Heart Disease(Male,Female)\")\nplt.ylabel(\"No of patients\")\nplt.legend(['Normal','Heart patients'],loc=1)","f066965d":"#Target vs chest pain\nsns.countplot(x=data.chest_pain_type,hue=data.target,palette='Set1')\nplt.ylabel(\"No of patients\")\nplt.legend(['Normal','Heart patients'],loc=2)\nplt.title(\"Chest Pain Type vs Heart disease\")\nplt.xlabel(\"Chest Pain Type\")","595783db":"#Target VS Fasting Blood Sugar\nsns.countplot(x=data.fasting_blood_sugar,hue=data.target,palette='Set1')\nplt.ylabel(\"No of patients\")\nplt.legend(['Normal','Heart patients'],loc=2)\nplt.title(\"Heart Disease due to Blood Sugar\")\nplt.xlabel(\"Fasting Blood Sugar\")","4071796e":"#Target Vs RestECG\nplt.figure(figsize=(8.4,6))\nsns.countplot(x=data.rest_ecg,hue=data.target,palette='Set1')\nplt.legend(['Normal','Heart patients'],loc=1)\nplt.title(\"Resting electrocardiographic measurement vs Target  \")\nplt.xlabel(\"Resting electrocardiographic measurement\")\n","c7f4bf2e":"#Target vs Slope Segment\nplt.figure(figsize=(8.4,6))\nsns.countplot(x=data.st_slope,hue=data.target,palette='Set1')\nplt.title(\"Slope Segment Vs Target\")\nplt.xlabel(\"Slope Segmet\")\nplt.legend(['Normal','Heart patients'],loc=1)\n","5d27b41e":"#Target vs Blood disorder\nplt.figure(figsize=(8.4,6))\nsns.countplot(x=data.thalassemia,hue=data.target,palette='Set1')\nplt.legend(['Normal','Heart patients'],loc=1)\nplt.title(\"Target vs Blood Disorder\")\nplt.xlabel(\"Blood Disorder\")","15a37e77":"#Target Vs Exercise Induced angina\nplt.figure(figsize=(8.4,6))\nsns.countplot(x=data.exercise_induced_angina,hue=data.target,palette='Set1')\nplt.xlabel(\"Exercie Induced Angina\")\nplt.title(\"Target Vs Exercise Induced Angina\")\nplt.legend(['Normal','Heart patients'],loc=1)\n","34d914df":"# Target VS age\nplt.figure(figsize=(12,6))\nsns.countplot(x=data.age,hue=data.target,palette=\"rainbow\")\nplt.legend(['Normal','Heart patients'],loc=1)\nplt.title(\"Age VS Target\")","16cf7ec4":"data['Age_grp']=pd.cut(x=data.age,bins=range(25,85,10))#creating Age Grp Columns\nplt.figure(figsize=(8.4,6))\nsns.countplot(x=data.Age_grp,hue=data.target,palette='Set1')\nplt.legend(['Normal','Heart patients'],loc=2)\nplt.title(\"Age_grp VS Target\")","4c13fae2":"#target Vs Blood pressure\nplot = data[data.target == 1].resting_blood_pressure.value_counts().sort_index().plot(kind = \"bar\", figsize=(15,4), fontsize = 15)\nplt.title(\"Blood pessure Level in heart Patients\")","8391cd48":"#Age vs Chol level\nplt.figure(figsize=(10,8))\nsns.lineplot(x=data.age,y=data.cholesterol,hue=data.target)\nplt.legend(['Normal','Heart patients'],loc=1)\nplt.title(\"Chol level in Different Age Groups\")\n","d7c1b195":"data.target=data.target.astype('int')\nplt.figure(figsize=(15,10))\nsns.heatmap(data.corr(),annot=True,cmap='YlGnBu')","e3896425":"data=pd.get_dummies(data,drop_first=True)","b66e84e0":"\ndata.head()","8ee5bdcc":"plt.figure(figsize=(15,10))\nsns.heatmap(data.corr(),annot=True,cmap='YlGnBu')","bf566907":"x=data.drop('target',axis=1)\ny=data['target'].values","6c01aea8":"from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.2, random_state=2)","6d26e165":"from sklearn.linear_model import LogisticRegression\nlg = LogisticRegression()\nlg.fit(x_train, y_train)\ny_pred=lg.predict(x_test)","63787fef":"from sklearn.metrics import confusion_matrix,r2_score,accuracy_score\ncmat = confusion_matrix(y_pred,y_test)\nsns.heatmap(cmat, annot=True)","4cfbcbdc":"print('Accurancy:',accuracy_score(y_test, y_pred))\nprint(\"Logistic TRAIN score with \",(lg.score(x_train, y_train)))\nprint(\"Logistic TEST score with \",(lg.score(x_test, y_test)))","a8a15026":"Let's View Basic EDA analysis","a481e761":"For better View we ll create the Age bins.","ab5fc437":"Let's change the column names for easy understanding and coding","174270e9":"By this We can cleary say age is the important factor.","c1983dd2":"Dummy Creation","82cbb90a":"Let's check the dataset","9b6e5ce6":"Let's check the Missing Values","5ffdf7bb":"Using the Data dictionary, we can replace the categorical variables by proper meaningful naming.","611866ad":"# Conclusion\n <font color=\"Dark Green\">We can see in the output, we got 0.9016393442622951 in logistic regression model.our model shows 90% accuracy. I am a beginner to data science. Please comment me your Suggestions to Develop much more. This is my first kernal and my first model as a learner. I hope this can be useful. ","1dd53d66":"## 2. Import Necessary Libraries","15bd381e":"Let's read about heart disease real facts\n#### <font color=red> Some Major Factors for Heart Disease \nGender (males are at greater risk)<br>\nAge (the older you get, the higher your risk)<br>\nSmoking<br>\nHigh LDL, or \"bad\" cholesterol, and low HDL, or \"good\" cholesterol<br>\nUncontrolled hypertension (high blood pressure)<br>\nPhysical inactivity<br>\nObesity<br>\nUncontrolled diabetes<br>\nUncontrolled stress and anger","086f1c82":"# <font color=green>HEART DISEASE ANALYSIS","e24549df":"#### By seeing its a clean dataset.By using the Data dictionary we can understand the variables. ","c89fccd2":"Correlation Checking","b1b703ed":"There is no Missing Values. Let's have a look on Datatypes","2667ade4":"Correlation checking with Dummies","5f79d36a":"# 1.Introduction to Data set\n       This dataset gives a number of variables along with a target condition of having or not having heart disease.\n### Data Dictionary\n**Age:** The person's age in years \n<br>**sex:** The person's sex (1 = male, 0 = female) \n<br>**cp:** The chest pain experienced (Value 1: typical angina, Value 2: atypical angina, Value 3: non-anginal pain, Value 4: asymptomatic) \n<br>**trestbps:** The person's resting blood pressure (mm Hg on admission to the hospital) chol: The person's cholesterol measurement in mg\/dl \n<br>**fbs:** The person's fasting blood sugar (> 120 mg\/dl, 1 = true; 0 = false) \n<br>**restecg:** Resting electrocardiographic measurement (0 = normal, 1 = having ST-T wave abnormality, 2 = showing probable or definite left ventricular hypertrophy by Estes' criteria) \n<br>**thalach:** The person's maximum heart rate achieved \n<br>**exang:** Exercise induced angina (1 = yes; 0 = no) \n<br>**oldpeak:** ST depression induced by exercise relative to rest ('ST' relates to positions on the ECG plot. See more here) \n<br>**slope:** the slope of the peak exercise ST segment (Value 1: upsloping, Value 2: flat, Value 3: downsloping) \n<br>**ca:** The number of major vessels (0-3) \n<br>**thal:** A blood disorder called thalassemia (3 = normal; 6 = fixed defect; 7 = reversable defect) \n<br>**target:** Heart disease (0 = no, 1 = yes)","d344eef8":"Let's change our target variable into object","0d4c1c66":"# 3.Model Creation \n### Let's We go for the Logistic model creation.We split the data into two parts train(80%) and Test(20%).","eb5f9fb2":"By seeing above plot we can say Male genger having more number of Heart Disease.","c612bff2":"From this plot we can cleary say higher number of patients having Non-Anginal Chest Pain","b79117a0":"R2 and Accuaracy score","1d586ac2":"Let's take a look"}}