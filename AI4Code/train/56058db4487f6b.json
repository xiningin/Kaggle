{"cell_type":{"df92afaf":"code","fb8992b8":"code","2c4e1215":"code","1f896553":"code","ebbc370b":"code","2a46743f":"code","f521bb8a":"code","08e9acc6":"code","c33740ab":"code","32ed2ff0":"code","e6a83d8e":"code","cb2822a7":"code","de4363e9":"code","05a639a1":"code","386d95a3":"code","a7afa6d6":"code","c2bc69a4":"code","91140877":"code","b467d803":"code","29d360e6":"code","ee6e276f":"code","03918144":"code","27a184a2":"code","c4b707a3":"code","2a02baa6":"code","3f43a567":"code","9b5dafbd":"code","37d36847":"code","0bb150ef":"code","93ddcb23":"code","e23fbe24":"code","965d1ddb":"code","af34ec1c":"code","7449cb45":"code","141ce1e9":"code","5db1e0f4":"code","718c23e8":"code","166f6dee":"code","012e6a31":"code","7a41196a":"code","65f075e3":"markdown","7f6f7726":"markdown","933e0f76":"markdown","3e881c43":"markdown","0a5e90d4":"markdown"},"source":{"df92afaf":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","fb8992b8":"import matplotlib.pyplot as plt\nimport seaborn as sns","2c4e1215":"import warnings\nwarnings.filterwarnings('ignore')","1f896553":"df=pd.read_csv('\/kaggle\/input\/covid19-education-impact-survey\/open_one_time_covid_education_impact.csv')","ebbc370b":"df.head()","2a46743f":"sns.countplot(y=\"gender\", data=df)","f521bb8a":"sns.countplot(y=\"age\", data=df)","08e9acc6":"sns.countplot(y=\"geography\", data=df)","c33740ab":"sns.countplot(y=\"financial_situation\", data=df)","32ed2ff0":"sns.countplot(y=\"education\", data=df)","e6a83d8e":"sns.countplot(y=\"employment_status\", data=df)","cb2822a7":"sns.countplot(y=\"submission_state\", data=df)","de4363e9":"num_list=['are_there_children_0_to_2_yrs_out_of_educational_system',\n       'were_children_3_to_17_yrs_enrolled_and_did_not_return_to_school',\n       'are_there_children_who_stopped_enrolling_in_primary_education',\n       'are_there_children_who_stopped_enrolling_in_secondary_education',\n       'are_children_attending_face_to_face_classes',\n       'can_children_observe_deterioration_of_basic_services_of_school',\n       'do_children_3_and_17_yrs_receive_regular_school_meals',\n       'are_there_teachers_at_scheduled_class_hours',\n       'are_children_3_to_17_yrs_dealing_with_irregular_school_activity',\n       'are_children_being_teached_by_unqualified_people',\n       'did_teachers_leave_the_educational_system',\n       'do_school_and_the_teachers_have_internet_connection',\n       'do_children_have_internet_connection',\n       'do_children_3_to_17_yrs_miss_virtual_class_due_to_lack_of_electricity',\n       'does_home_shows_severe_deficit_of_electricity',\n       'does_home_shows_severe_deficit_of_internet',\n       'do_children_3_to_17_yrs_miss_class_or_in_lower_grade',\n       'are_children_promoted_with_a_modality_different_from_formal_evaluation']","05a639a1":"fig = plt.figure(figsize=(20,20))\n\nfor i in range(len(num_list)):\n    \n    plt.subplot((len(num_list)\/2), 2, i+1)\n    plt.title(num_list[i])\n    plt.hist(df[num_list[i]])\n\nplt.tight_layout()","386d95a3":"df=df.drop(['submission_date'], axis=1)","a7afa6d6":"df1=pd.get_dummies(df)","c2bc69a4":"df1","91140877":"df1.columns.unique()","b467d803":"plt.figure(figsize=(20, 20))\nsns.heatmap(df1.corr())","29d360e6":"from sklearn.cluster import KMeans\nclust_df1=KMeans(n_clusters=4).fit_predict(df1.iloc[:,1:])\nclust_df1=pd.DataFrame(clust_df1,columns=['cluster'])","ee6e276f":"df1['cluster']=clust_df1['cluster']\ndf1.groupby('cluster')['submission_id'].count().plot.bar()","03918144":"df1.groupby('cluster').mean().iloc[:,1:].plot.bar(figsize=(15,10))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=5)","27a184a2":"from sklearn.decomposition import TruncatedSVD,PCA\npca=PCA(4)\npca_df1=pca.fit_transform(df1.iloc[:,1:])\npca_df1=pd.DataFrame(pca_df1,columns=['PC1','PC2','PC3','PC4'])\npca_df1['cluster']=df1['cluster']","c4b707a3":"pca_df1","2a02baa6":"sns.barplot(x=['PC1','PC2','PC3','PC4'],y=pca.explained_variance_ratio_)\nsns.pointplot(x=['PC1','PC2','PC3','PC4'],y=np.cumsum(pca.explained_variance_ratio_),lw=5,legend=True,label='Cumulative',color='tab:red')\nplt.ylabel('Explained Variance')\nplt.show()","3f43a567":"df=df.drop('submission_state', axis=1)","9b5dafbd":"df['gender']=df['gender'].map({'Female':1, 'Male':2, 'Prefer not to answer':0, 'Non-Binary':0,'Not Available':0})\ndf['age']=df['age'].map({'Over 45 years old':5, '26 to 35 years old':3, '36 to 45 years old':4,'16 to 25 years old':2, 'Under 16':1, 'Not Available':0})\ndf['geography']=df['geography'].map({'Suburban\/Peri-urban':2, 'City center or metropolitan area':3, 'Rural':1,'Not Available':0})\ndf['financial_situation']=df['financial_situation'].map({'I can afford food and regular expenses, but nothing else':3,\n       'I cannot afford enough food for my family':1,\n       'I can comfortably afford food, clothes, and furniture, and I have savings':6,\n       'I can afford food, but nothing else':2,\n       'I can comfortably afford food, clothes, and furniture, but I don\u2019t have savings':5,\n       'I can afford food, regular expenses, and clothes, but nothing else':4,\n       'Prefer not to answer':0, 'Not Available':0})\ndf['education']=df['education'].map({'University or college degree completed':4,\n       'Technical school diploma or degree completed':5,\n       'Some technical education (e.g polytechnic school)':3,\n       'Some university or college':4,\n       'Secondary school\/ high school completed':2,\n       'Primary school completed':1, 'Some primary education':1,\n       'Some secondary school \/ high school':2, 'Post-graduate education':5,\n       'Prefer not to answer':0, 'No formal education':0, 'Not available':0,\n       'College or university':4, 'Post graduate':5, 'Technical school':3,\n       'Secondary\/high school':2})\ndf['employment_status']=df['employment_status'].map({'I am unemployed':0,\n       'I work full-time, either as an employee or self-employed':6,\n       'I do housework, fulfilling domestic tasks, looking after children':4,\n       'I work part-time, either as an employee or self-employed':2,\n       'I am retired':3, 'I am a student and I work part-time':2,\n       'I am a student':1, 'None of the above':0,\n       'I am doing community or military service':5,\n       'I am unable to work due to long-term illness or disability':0,\n       'Not Available':0, 'Employed full-time':6, 'Retired':3, 'Student':1,\n       'Unemployed':0})\ndf['do_children_3_and_17_yrs_receive_regular_school_meals']=df['do_children_3_and_17_yrs_receive_regular_school_meals'].map({'Every day':5, 'No':0, '2 days':2, '4 days':4, '1 day':1, '3 days':3})\ndf['are_there_teachers_at_scheduled_class_hours']=df['are_there_teachers_at_scheduled_class_hours'].map({'Irregularly':0, 'There are not enough':1, 'There are enough':2})","37d36847":"df","0bb150ef":"plt.figure(figsize=(20, 20))\nsns.heatmap(df.iloc[:,2:].corr(),annot=True)","93ddcb23":"from sklearn.cluster import KMeans\nclust_df=KMeans(n_clusters=4).fit_predict(df.iloc[:,2:])\nclust_df=pd.DataFrame(clust_df,columns=['cluster'])","e23fbe24":"df['cluster']=clust_df['cluster']","965d1ddb":"df.groupby('cluster')['submission_id'].count().plot.bar()","af34ec1c":"df.groupby('cluster').mean().iloc[:,1:].plot.bar(figsize=(15,10))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=10)","7449cb45":"from sklearn.decomposition import TruncatedSVD,PCA\npca=PCA(2)\npca_df=pca.fit_transform(df.iloc[:,2:])\npca_df=pd.DataFrame(pca_df,columns=['PC1','PC2'])\npca_df['gender'] = df.gender\npca_df['age'] = df.age\npca_df['geography'] = df.geography\npca_df['financial_situation']=df.financial_situation\npca_df['education']=df.education\npca_df['employment_status']=df.employment_status\npca_df['cluster']=df.cluster","141ce1e9":"pca_df","5db1e0f4":"sns.barplot(x=['PC_1','PC_2'],y=pca.explained_variance_ratio_)\nsns.pointplot(x=['PC_1','PC_2'],y=np.cumsum(pca.explained_variance_ratio_),lw=5,legend=True,label='Cumulative',color='tab:red')\nplt.ylabel('Explained Variance')\nplt.show()","718c23e8":"plt.figure(figsize=(10, 5))\n\nsns.scatterplot(x=pca_df['PC1'],y=pca_df['PC2'],size=pca_df['geography'],hue=pca_df['cluster'],sizes=(10, 200))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=10)","166f6dee":"plt.figure(figsize=(10, 5))\n\nsns.scatterplot(x=pca_df['PC1'],y=pca_df['PC2'],size=pca_df['financial_situation'],hue=pca_df['cluster'],sizes=(10, 200))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=10)","012e6a31":"plt.figure(figsize=(10, 5))\n\nsns.scatterplot(x=pca_df['PC1'],y=pca_df['PC2'],size=pca_df['education'],hue=pca_df['cluster'],sizes=(10, 200))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=10)","7a41196a":"plt.figure(figsize=(10, 5))\n\nsns.scatterplot(x=pca_df['PC1'],y=pca_df['PC2'],size=pca_df['employment_status'],hue=pca_df['cluster'],sizes=(10, 200))\nplt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', borderaxespad=0, fontsize=10)","65f075e3":"# 1) Try to increase the features by 'get_dummies'","7f6f7726":"# It seems to be difficult to explain 4 components by simple 'get_dummies'","933e0f76":"# 2. Clustering and PCA","3e881c43":"# 2) Try to map numbers to explain each features. For example, high education is 5 and no education is 0.","0a5e90d4":"# 1. Visualization"}}