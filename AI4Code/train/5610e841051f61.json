{"cell_type":{"c7ef0fab":"code","b88fc63b":"code","5e0800c2":"code","1a199bde":"code","017b3a63":"code","b613f153":"code","3a4264c0":"code","b542564f":"markdown","2f1ee10e":"markdown","cc9918af":"markdown","69e5c331":"markdown"},"source":{"c7ef0fab":"import numpy as np\nimport pandas as pd","b88fc63b":"# connect to sqlite database\nimport sqlite3\nconn = sqlite3.connect(\"..\/input\/FPA_FOD_20170508.sqlite\")","5e0800c2":"df = pd.read_sql_query(\"SELECT FIRE_YEAR, count(1) as nr_of_fires, sum(FIRE_SIZE) as total_fire_size \\\n    , avg(FIRE_SIZE) AS average_fire_size  from Fires GROUP BY FIRE_YEAR;\",conn)","1a199bde":"import matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\n\nf, axes = plt.subplots(1, 2,figsize=(14,6))\ng1=sns.barplot(x=\"FIRE_YEAR\", y=\"nr_of_fires\", data=df,color='red',ax=axes[0])\ng1.set_title('# of wildfires per year')\ng1.set_xticklabels(g1.get_xticklabels(),rotation=90)\n\ng2=sns.barplot(x=\"FIRE_YEAR\", y=\"total_fire_size\", data=df,color='red',ax=axes[1])\ng2.set_title('Total fire size per year')\ng2.set_xticklabels(g2.get_xticklabels(),rotation=90)","017b3a63":"g3=sns.barplot(x=\"FIRE_YEAR\", y=\"average_fire_size\", data=df,color='red')\ng3.set_title('Average fire size per year')\ng3.set_xticklabels(g3.get_xticklabels(),rotation=90)","b613f153":"# read the data for bigger fires over the years\ndf = pd.read_sql_query(\"SELECT FIRE_YEAR,LATITUDE,LONGITUDE,FIRE_SIZE from Fires \\\n                       WHERE FIRE_SIZE_CLASS='G';\",conn)","3a4264c0":"import plotly.graph_objs as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\n\ndata = []\nlayout = dict(\n    title = 'US Wildfires > 5000 acres',\n    # showlegend = False,\n    autosize = False,\n    width = 1000,\n    height = 900,\n    hovermode = False,\n    legend = dict(\n        x=0.7,\n        y=-0.1,\n        bgcolor=\"rgba(255, 255, 255, 0)\",\n        font = dict( size=11 ),\n    )\n)\nyears = sorted(df['FIRE_YEAR'].unique())\n\nfor i in range(len(years)):\n    geo_key = 'geo'+str(i+1) if i != 0 else 'geo'\n    lons = list(df[ df['FIRE_YEAR'] == years[i] ]['LONGITUDE'])\n    lats = list(df[ df['FIRE_YEAR'] == years[i] ]['LATITUDE'])\n    data.append(\n        dict(\n            type = 'scattergeo',\n            showlegend=False,\n            lon = lons,\n            lat = lats,\n            geo = geo_key,\n            name = str(years[i]),\n            marker = dict(\n                color = \"rgb(255, 0, 0)\",\n                opacity = 0.5\n            )\n        )\n    )\n    data.append(\n        dict(\n            type = 'scattergeo',\n            showlegend = False,\n            lon = [-78],\n            lat = [47],\n            geo = geo_key,\n            text = [years[i]],\n            mode = 'text',\n        )\n    )\n    \n    layout[geo_key] = dict(\n        scope = 'usa',\n        showland = True,\n        landcolor = 'rgb(229, 229, 229)',\n        showcountries = False,\n        domain = dict( x = [], y = [] ),\n        subunitcolor = \"rgb(255, 255, 255)\",\n    )\n    \nz = 0\nCOLS = 5\nROWS = 5\nfor y in reversed(range(ROWS)):\n    for x in range(COLS):\n        geo_key = 'geo'+str(z+1) if z != 0 else 'geo'\n        layout[geo_key]['domain']['x'] = [float(x)\/float(COLS), float(x+1)\/float(COLS)]\n        layout[geo_key]['domain']['y'] = [float(y)\/float(ROWS), float(y+1)\/float(ROWS)]\n        z=z+1\n        if z > 23:\n            break\n\nfig = dict(data=data, layout=layout)\nconfig = {'scrollZoom': False}\niplot( fig, filename='US wildfires', config=config)","b542564f":"Even though 2015 had much less wildfires than the peak of 2006 the average size of the fires reported was much bigger. Each fire burned down in average 140 acres!\n\n## Wildfires on the Map\nLet's see where these fires happend over the years. To simplify the map I'm only looking at the biggest fires (> 5000 acres total size).","2f1ee10e":"# US Wildfires. Some visualization examples\nJust experimenting with some visualization (Seaborn, Plotly) on the US wildfire data set.","cc9918af":"## Fires over the years","69e5c331":"Looks like 2004 to 2006 was a bad year for the firefighters. Both a high count of fires and also the total amount of burning acreage was high."}}