{"cell_type":{"2f0f2e4e":"code","99f0aa0c":"code","e0fbd912":"code","83c6bac3":"markdown"},"source":{"2f0f2e4e":"%%capture\n!pip install google-api-python-client","99f0aa0c":"import json\nimport csv\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n\nfrom apiclient.discovery import build\n\nfrom kaggle_secrets import UserSecretsClient\nuser_secrets = UserSecretsClient()\nsecret_value_0 = user_secrets.get_secret(\"api_key\") # Use your youtube api key\nsecret_value_1 = user_secrets.get_secret(\"channel_id\") # Use your youtube channel ID","e0fbd912":"## Get upload playlist id\nyt = build('youtube', 'v3', developerKey= secret_value_0)\nreq = yt.channels().list(id= secret_value_1, part= 'contentDetails').execute()\n\ndef get_channel_videos(secret_value_1):\n    # get Uploads playlist id\n    res = yt.channels().list(id=secret_value_1, \n                                  part='contentDetails').execute()\n    playlist_id = res['items'][0]['contentDetails']['relatedPlaylists']['uploads']\n    \n    videos = []\n    next_page_token = None\n    \n    while 1:\n        res = yt.playlistItems().list(playlistId=playlist_id, \n                                           part='snippet', \n                                           maxResults=50,\n                                           pageToken=next_page_token).execute()\n        videos += res['items']\n        next_page_token = res.get('nextPageToken')\n        \n        if next_page_token is None:\n            break\n    \n    return videos\n\nvideos = get_channel_videos(secret_value_1)\nprint(f'Total number of video are: {len(videos)}')\n\n## get all video from youtube channel in json file\nall_Yt_Details = []\n\nfor i, video in enumerate(videos):\n    ytDetails = {\n        \"ID\" : i+1,\n        \"Video_ID\" : video['snippet']['resourceId']['videoId'],\n        \"URL\" : f\"https:\/\/www.youtube.com\/watch?v={video['snippet']['resourceId']['videoId']}\",\n        \"Title\" : video['snippet']['title'],\n        \"Published Date\": video['snippet']['publishedAt'].split(\"T\")[0]\n\n    }\n    all_Yt_Details.append(ytDetails)\n\nwith open('youtube_data.json', 'w') as f:\n    json.dump(all_Yt_Details, f, indent=4)\n\n## get all video from youtube channel in excel file\ndata = pd.read_json('\/kaggle\/working\/youtube_data.json')\ndata.to_csv('youtube_data.csv', index= False)\n\nprint(\"File is downloaded\")","83c6bac3":"### Step 1: Get your youtube API key\n1. Go to <a href=\"https:\/\/console.developers.google.com\/\">console.developers.google.com<\/a>\n2. Create project\n3. Select project\n4. Search for youtube data api v3\n5. Enable api\n6. Go to Credentials in left nav.\n7. Cretae Credentials and select api key\n8. Copy api key\n9. Now go to \"Secrets\" in add-ons nav in kaggle and create a secret . Fill label as \"api_key\" and paste copied api key from console.developers.google.com\n\n### Step 2: Get youtube channel ID\n1. Go to youtube channel\n2. Copy all text after \"https:\/\/www.youtube.com\/channel\/\"<br>\n**Example:** If your youtube channel link is https:\/\/www.youtube.com\/channel\/UCx8Z14PpntdaxC, pick UCx8Z14PpntdaxC\n3. Now go to \"Secrets\" in add-ons nav in kaggle and create another secret . Fill label as \"channel_id\" and paste copied youtube channel id.\n\n### Step 3: Run all the code"}}