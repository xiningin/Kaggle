{"cell_type":{"8e7a229b":"code","adec68b9":"markdown","9a2a5d37":"markdown","e28daf3c":"markdown","0749b18b":"markdown","0cd10265":"markdown","a50998cb":"markdown","d88eacd1":"markdown","ec42aaff":"markdown","426b2a83":"markdown","67aa1064":"markdown","83427eb1":"markdown","5855e188":"markdown","3645125f":"markdown","f113f30a":"markdown","c22164b6":"markdown","e4610d6c":"markdown","4ead1e91":"markdown"},"source":{"8e7a229b":"# Importing and Data cleansing\nSuicide = read.csv(file='master.csv', header= TRUE, sep=',')\nHappiness_2015 = read.csv(file='2015.csv', header= TRUE, sep=',')\nHappiness_2016 = read.csv(file='2016.csv', header= TRUE, sep=',')\nHappiness_2017 = read.csv(file='2017.csv', header= TRUE, sep=',')\nHappiness_2018 = read.csv(file='2018.csv', header= TRUE, sep=',')\nHappiness_2019 = read.csv(file='2019.csv', header= TRUE, sep=',')\n\nstr(Suicide)\nstr(Happiness_2015)\n\n# Removing unnecessary column 'Country.year' and 'HDI.for.year' since it has mostly NA values\nsummary(Suicide$HDI.for.year) # 19,456 NA values of 27,820 total rows\nSuicide = Suicide[-c(8,9)] \n\n# Renaming the columns\nlibrary(dplyr)\nSuicide = Suicide %>%\nrename(\n  Country = \u00ef..country,\n  Year = year,\n  Sex = sex,\n  Age = age,\n  Suicides = suicides_no,\n  Pop = population,\n  Suic_100k = suicides.100k.pop,\n  GDP = gdp_for_year....,\n  GDP_C = gdp_per_capita....,\n  Gen = generation\n)\n\n# Tidying data\nSuicide$Age = gsub(\" years\", \"\", Suicide$Age)\nSuicide$Sex = ifelse(Suicide$Sex == \"male\", \"Male\", \"Female\")\n# Reorder levels of age to be ordinal data\nSuicide$Age = factor(Suicide$Age, levels = c(\"5-14\", \"15-24\", \"25-34\", \"35-54\", \"55-74\", \"75+\"))\n\n# We have noticed that data for 2016 is incomplete and for that reason, we are removing 2016 year\nsummary(Suicide$Year==2016)\nSuicide1 = subset(Suicide, Suicide$Year!=2016)\n\n# These are the libraries that we are going to use for our project\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(corrplot)\nlibrary(scales)\n\n# 1. Global suicide (per 100k) trend over years (1985-2015)\n\nGraph1 = Suicide1 %>%\n  group_by(Year) %>%\n  summarize(Suicide_100k = sum(Suicides) \/ sum(Pop) * 100000) %>%\n  ggplot(aes(x = Year, y = Suicide_100k)) + \n  geom_line(col = \"cyan4\", size = 1.2) + \n  geom_point(col = \"cyan4\", size = 2.1) + \n  geom_hline(yintercept = mean(Suicide1$Suic_100k), linetype = 2, color = \"red\", size = 1) +\n  labs(title = \"Global suicide (per 100k) trend over years\",\n       subtitle = \"1985-2015\",\n       x = \"Year\", \n       y = \"Suicides per 100k\") + \n  scale_x_continuous(breaks = seq(1985, 2015, 2)) + \n  scale_y_continuous(breaks = seq(10, 20, 1))\nGraph1\n\n# 2. Global Suicide and Happiness rates for 2015\n\n#  First we need to create a subset of Suicide data for 2015 only\nSuicide2015 = subset(Suicide1, Suicide1$Year==2015)\n# Then we need to merge Suicide and Happiness datasets from 2015 by common column 'Country'\nHappy_suicide = merge(Suicide2015, Happiness_2015, by='Country', all.x = TRUE)\n\n# Graphical representation of global suicide and happiness rates for 2015\nSuicide2015 = Suicide2015 %>%\n  group_by(Country) %>%\n  summarize(Suicide_100k = sum(Suicides) \/ sum(Pop) * 100000)\n\nHappy_suicide = merge(Suicide2015, Happiness_2015, by='Country', all.x = TRUE)\n\nHS1 = ggplot(Happy_suicide, aes(x= Happiness.Score, y= Suicide_100k ))\n\nHS2 = HS1 +\n  geom_smooth(mapping = aes(linetype = \"Trend Average line\"),\n              show.legend = FALSE,\n              method = \"lm\",\n              formula = y ~ x + log(x), se = FALSE,\n              color = \"red\")\nHS3 = HS2 + geom_point(shape = 19, size = 2, stroke = 1.25, color = 'cyan4')\n\nHS4 = HS3 +\n  geom_text_repel(aes(label = Country),\n                  color = \"gray10\",\n                  force = 10)\nGraph2 = HS4 +\n  scale_x_continuous(name = \"Happiness Score\",\n                     limits = c(4, 8),\n                     breaks = seq(4, 8,by = 0.5)) +\n  scale_y_continuous(name = \"Suicides per 100k\",\n                     limits = c(0, 25),\n                     breaks = seq(0, 22,by = 2)) +\n  ggtitle('Happiness and Suicide rates for 2015')\nGraph2\n\n\n# 3. Top 20 ranked countries with average suicides per 100k rate\n\n# First we need to create a subset of top 20 happiness ranked countries from previously merged dataset 'Happy_suicide'\nTop20 = subset(Happy_suicide, Happy_suicide$Happiness.Rank <= 20)\n# Graphical representation of top 20 countries with the average suicides per 100k rate\n \nTH20 = ggplot(Top20, aes(Happiness.Rank, Suicide_100k, fill = Suicide_100k)) +\n  geom_col() +\n  scale_fill_distiller(palette = \"YlGnBu\", direction = 1) +\n  theme_minimal() +\n  theme(\n    panel.grid = element_blank(),\n    panel.grid.major.y = element_line(color = \"grey70\", size = 0.5),\n    panel.ontop = TRUE \n  )\n    \n   Graph3 = TH20 +\n      scale_x_continuous(name = \"Happiness Rank\",\n                         limits = c(0, 20),\n                         breaks = seq(0, 20,by = 4)) +\n      scale_y_continuous(name = \"Suicides per 100k\",\n                         limits = c(0, 18),\n                         breaks = seq(0, 18,by = 2)) +\n      ggtitle('Top 20 countries with average suicides per 100k rate')\n  \nGraph3\n\n# 4. Correlation between numerical columns for Happiness 2017 dataset\n# First we need to delete unnecessary columns 'Whisker.high' and 'Whisker.low'\nHappiness_2017 = Happiness_2017[, -c(4,5)]\n# Then rename the columns\ncolnames (Happiness_2017) = c(\"Country\", \"Happiness.Rank\", \"Happiness.Score\",\n                          \"Economy\", \"Family\",\n                          \"Life.Expectancy\", \"Freedom\", \"Generosity\",\n                          \"Trust\", \"Dystopia\")\n# Graphical representation of correlation between numerical columns\n\nColumns = sapply(Happiness_2017, is.numeric)\nCorrel = cor(Happiness_2017[, Columns])\ncorrplot(Correl, method = 'color') \n# As we can see there is an inverse correlation between 'Happiness.Rank' and all other variables.\n# For that reason we are removing the 'Happiness.Rank' column and creating a new correlation plot.\n\nNum_graph = cor(Happiness_2017[c(3:10)])\ncorrplot(Num_graph, method = \"number\")\n\n# We can conclude that 'Economy', 'Life.Expectancy' and 'Family' are the key factors for Happiness.\n# 'Generosity' and 'Trust' have the lowest impact on Happiness.\n\n# 5. Suicide trend for each country between 1985 and 2015.\n\n# Graphical representation of suicide trend for each country\n\nGlobal = Suicide1 %>%\n  group_by(Year, Country) %>%\n  summarize(Suicide_100k = sum(Suicides) \/ sum(Pop) * 100000)\n\nT5 = ggplot(Global,\n             aes(x = Country,\n                 y = Suicide_100k)) + \n  theme(legend.position='top',\n        axis.text=element_text(size = 6),\n        axis.text.x = element_text(angle = 90))\n\nT6 = T5 + geom_point(aes(color = Year),\n                      alpha = 0.5,\n                      size = 1.6,\n                      position = position_jitter(width = 0.25, height = 0))\n\nGraph5 = T6 +\n  scale_color_continuous(name=\"\",\n                         breaks = c(1985, 1995, 2005, 2015),\n                         labels = c(\"'85\", \"'95\", \"'05\",\"'15\"),\n                         low = muted(\"blue\"), high = muted(\"red\"))\nGraph5\n","adec68b9":"# **1. Introduction**\nDeath by suicide is an extremely complex issue performed by hundreds of thousands of people every year around the world. According to the World Health Organization around 700,000 people committed suicide in 2019. That would be one person every 50 seconds. Fortunately, this number is slowly decreasing. In this project I want to investigate the evolution of suicide rates along with happiness parameters utilizing the open source datasets provided on Kaggle. For this analysis, I will be using the R language and my main focus is to understand the correlation between suicide and happiness.\n","9a2a5d37":"Author: **Marjan Jovic**   \nDate: 20 May 2020","e28daf3c":"<img src=\"https:\/\/i.imgur.com\/FV9cBzD.png\" width=\"800px\">\n","0749b18b":"# 2. Suicide dataset\n\n### 2.1 Context\nThis compiled dataset pulled from four other datasets linked by time and place, and was built to find signals correlated to increased suicide rates among different cohorts globally, across the socio-economic spectrum.\n \n \n### 2.2 Content\nThe dataset what we are utilizing in this project contains suicide metrics in 101 countries globally. The data was collected on a yearly basis from 1985 until 2016. From the shape we can see that our dataset includes 27.8k rows and 12 columns. Columns are: Age, Suicide_No, population, suicides\/100k pop, country-year, HDI for year, gdp_for_year ($), gdp_per_capita ($) and generation. From the column names it is easy to understand what each column is about. Only I would like to mention HDI for year column which is the Human Development Index (HDI) but we are not going to use it for our analysis.\n","0cd10265":"# 6. Top 20 ranked countries with average suicides per 100k rate\n\nMy next analysis is showing us the top 20 ranked countries and their average suicide per 100k population. Based on this graph we can conclude that the average suicide per 100k doesn\u2019t determine the happiness rank so I decided to check the correlation between all the happiness and the suicide dataset variables.\n\n<img src=\"https:\/\/i.imgur.com\/jynhIqg.png\" width=\"800px\">\n\n\nBelow we can find a correlation graph between both datasets where it\u2019s easier to determine how factors correlate with each other.\n\n\n<img src=\"https:\/\/i.imgur.com\/lhqzQrL.png\" width=\"800px\">\n\n\nSuicide and happiness are not easy to understand and we can not expect to easily give a single number for each country regarding these factors. It is silly to imagine that a single number can represent happiness for an entire country and explain this complex matter as human happiness. When we observe that suicide strongly correlates with happiness and quality of life then something is wrong there.\n","a50998cb":"<img src=\"https:\/\/i.imgur.com\/NKPdpf2.png\" width=\"800px\">\n","d88eacd1":"# 3. Happiness dataset \n\n### 3.1 Context\nThe World Happiness Report dataset is a landmark survey of the state of global happiness divided into 5 separated CSV files for each year from 2015 until 2019. The data was released at the United Nations at an event celebrating International Day of Happiness on March 20th. The report continues to gain global recognition as governments, organizations and civil society increasingly use happiness indicators to inform their policy-making decisions. Leading experts across fields \u2013 economics, psychology, survey analysis, national statistics, health, public policy and more \u2013 describe how measurements of well-being can be used effectively to assess the progress of nations. The reports review the state of happiness in the world today and show how the new science of happiness explains personal and national variations in happiness.\n\n### 3.2 Content\nI have chosen the World Happiness Report dataset from Kaggle. In this dataset we can find happiness rank and score among 155 countries globally based on a several factors such as, \nEconomy, generosity, life expectancy, family, trust in government, dystopia residual and freedom. The happiness score is a sum of these factors and the higher the happiness rank, the higher the happiness score. It\u2019s evident that the higher value for each of these factors is, the higher the level of happiness is. Dystopia is an imaginary country with the lowest happiness score. It\u2019s the opposite of Utopia. I am using this variable because it\u2019s useful in terms of a comparison to other countries to see how far they are from being the lowest country regarding the happiness score.\n \n### 3.3 Data Cleansing\nFinally, I can import my dataset and see the structure of its variables. The data is quite neat but I have to implement a few alterations to make it look better. \n\n<img src=\"https:\/\/i.imgur.com\/grGmOwp.png\" width=\"800px\"\/>\n\nI have observed the variables and their structure inside the dataset using str() function. The dataset contains 12 variables and 158 rows and this is for each year, from 2015 until 2019. Some of the columns were not clear enough so I have changed the column names and I have removed the \u2018Standard Error\u2019 and the \u2018Region\u2019 variables because I will not use them for visualization and analysis. \n\n<img src=\"https:\/\/i.imgur.com\/F3jA7Zr.png\" width=\"800px\"\/>","ec42aaff":"# 8. Suicide trend for each country between 1985 and 2015\n\nFor this analysis, I wanted to see a trend for each country over the years. I have concluded that the most of the countries suicide rate is declining as we can see from their traces. Lithuania\u2019s rate has been highest by a large margin along with Russia, Hungary, Ukraine and Sri Lanka. We can notice that Europe and Americans suicide rate is increasing linearly recently which is alarming.\n\n<img src=\"https:\/\/i.imgur.com\/MEHYbSA.png\" width=\"900px\">","426b2a83":"<img src=\"https:\/\/i.imgur.com\/Qbg6a9N.png\" width=\"800px\"\/>","67aa1064":"# **Table of contents**\n\n\n\n1. Introduction  \n    1.1 Purpose of this project\n2. Suicide dataset  \n\t2.1 Context   \n\t2.2 Content  \n\t2.3 Data Cleansing   \n3. Happiness dataset  \n\t3.1 Context  \n\t3.2 Content   \n3. Data Cleansing   \n4. Global suicide (per 100k) trend over the years (1985-2015)  \n5. Global Suicide and Happiness rates for 2015  \n6. Top 20 ranked countries with average suicides per 100k rate  \n7. Correlation between numerical columns for Happiness 2017 dataset  \n8. Suicide trend for each country between 1985 and 2015   \n9. Conclusion  \n10. References   \n   ","83427eb1":"### **1.1 Purpose of this project**\nThe purpose of choosing this project is to learn which factors are more important for us to have a happier life. As a result, countries and their people can focus on these factors to accomplish a better happiness extent.\nI became curious about the Happiness dataset from the moment I saw it for the first time on Kaggle. I was wondering what factors could determine happiness score. This intrigued me to have a deeper analysis. I am hoping to find out if countries like Switzerland and Finland are really happier? I have always thought that some Latin American countries are the happiest but when I had first look into this dataset, it didn\u2019t seem like that. I wanted to find out more, so I went deeper. Suicide could be a metric that measures unhappiness. For that reason I have analyzed happiness score and suicide per 100k people. The results were quite interesting.\n","5855e188":"# 7. Correlation between numerical columns for Happiness 2017 dataset\n\nRegarding this insight, we will play with different variables to find out how they correlate with each other. Let\u2019s see the correlation between numerical variables in our merged dataset.\n\n<img src=\"https:\/\/i.imgur.com\/LXWyCmf.png\" width=\"800px\">\n\nAs we can see, there is an inverse correlation between the \u2018Happiness Rank\u2019 and the other numerical columns. So basically, the lower is the happiness rank, the higher is the happiness score. For that reason I will remove the \u2018happiness rank\u2019 and see how our correlation looks now.\n\n<img src=\"https:\/\/i.imgur.com\/oLyZL3q.png\" width=\"800px\">\n\nAs we can conclude from the above correlation graph, family, economy and life expectancy play the most significant role in contributing to happiness level while generosity and trust have the lowest role in the happiness score.\n","3645125f":"# 5. Global Suicide and Happiness rates for 2015 \n\nIn this analysis, I have chosen the top 50 countries from the global Happiness score and compared their suicide rate with the mean suicide rate. I have noticed that when the suicide rate is decreasing, the happiness score is increasing but this was obvious. Countries that are \u2018unhappy\u2019 have a low number of suicides and again, there are many \u2018happy\u2019 countries that have a high number of suicides. For example, Finland has an average suicide rate of 14.1 per 100k and they are ranked as the happiest country for two years and it\u2019s all the time somewhere at the top. If we take in consideration that Colombia was ranked as 63rd happiest country in 2015 but it has an average suicide rate of 3.1 per 100k which is less than a quarter of Finland\u2019s suicide rate.\n\nI still can not understand which factor determines the happiness score. I believe in the next analysis we can find out more about correlation between suicide and happiness.\n\n<img src=\"https:\/\/i.imgur.com\/rpURy4k.png\" width=\"800px\">\n","f113f30a":"# 9. Conclusion\n\n\nI haven\u2019t been focusing too much on the unreliability of these datasets which could be a factor as well. On average, poorer countries perhaps do not track suicides as much as rich countries. The reason could be cultural or they are not able to track statistics due to financial restrictions.\n\nWithout any clear relation between suicide and happiness my initial question remains unclear. Maybe just because suicide is hard to explain. Looks like the happiness scores provided are an indicator of social-economical satisfaction, not absolute happiness.\n\nI have highlighted the fact that countries with a higher happiness score do not correspond to the countries with the lower suicide rates. For example, in the countries of Western Europe there is an anti correlation between suicide rates and happiness score. Obviously, this is not related to the happiness score itself. I would say other factors are involved such as, behavioral and social-economical.\nI can continue discussing cultural differences or unreliability of the data or I can criticize the whole happiness dataset analysis and all these complaints would be correct but in the end, I believe that this trend is valid. In countries like Sweden, Norway, Finland and Switzerland for most people, life is good. But still not for all of them. Some of them are naturally unhappy, pessimistic and prone to suicide. Regarding the poor countries, perhaps hope for a better future gives them reason to live. As I mentioned before, it\u2019s complicated to discuss suicide and happiness.\n","c22164b6":"### 2.3 Data Cleansing\nI am going to drop a few columns because I do not need them for my analysis and some of them are having too many missing values. The \u2018country.year\u2019 column already exists in the two separated columns. The \u2018HDI.for.year\u2019 column is mostly empty with null values.\n\nAfter deleting unnecessary columns I am going to tidy the dataset a little bit more by renaming the columns and reorder levels of age to be ordinal data. I have noticed that data from 2016 is incomplete and for that reason, I am removing 2016 year. And finally, our dataset is ready for further use.\n\n<img src=\"https:\/\/i.imgur.com\/RrssIkM.png\" width=\"800px\"\/>\n","e4610d6c":"# 4. Global suicide (per 100k) trend over the years (1985-2015)\n\nFor this analysis, I am going to find out how global suicide trend was acting throughout the years. The dashed line is the global mean suicide rate from 1985 until 2015 and it\u2019s representing 12.8 deaths per 100k people.\n\n\n\nSome insights:\n\nFrom the below graph we can see that suicide peak rate was 15.3 deaths per 100k in 1995 and it decreased slowly to 11.5 per 100k in 2015, which was around 25% decrease. This is a positive sign that global suicide numbers are slowly decresing which can be a results of some factor that we are going to examine in the further analysis. Rates are now returning to the rates before 1990. There is limited data in the 1980's, so it\u2019s hard to determine if the rate is truly representative. \n","4ead1e91":"# 10. References\n\nRusty (2018). Suicide Rates Overview 1985 to 2016 dataset. [Online] Available at: \nhttps:\/\/www.kaggle.com\/russellyates88\/suicide-rates-overview-1985-to-2016 [Accessed: 20th April 2020]\n\nWorld Happiness Report dataset. \u2018Sustainable Development Solutions Network\u2019 (2017).[Online] Available at: https:\/\/www.kaggle.com\/unsdsn\/world-happiness [Accessed: 20th April 2020]\n\nHannah Ritchie, Max Roser and Esteban Ortiz-Ospina (2020) - \"Suicide\". [Online] Available at: https:\/\/ourworldindata.org\/suicide  [Accessed: 21st April 2020]\n\nWorld Bank. (2018). World development indicators: GDP (current US$) by country: 1985 to 2016.  [Online] Available at: http:\/\/databank.worldbank.org\/data\/source\/world-development-indicators# [Accessed: 21st April 2020]\nT\u00f8llefsen IM, Hem E, Ekeberg \u00d8. (2012) The reliability of suicide statistics: a systematic review. BMC Psychiatry.  [Online] Available at: https:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC3350416\/ [Accessed: 22nd April 2020]\n \nSzamil. (2017). Suicide in the Twenty-First Century [dataset]. [Online] Available at: https:\/\/www.kaggle.com\/szamil\/suicide-in-the-twenty-first-century\/notebook [Accessed: 21st April 2020]\n \nWorld Health Organization. (2018). Suicide prevention. [Online] Available at: http:\/\/www.who.int\/mental_health\/suicide-prevention\/en\/ [Accessed: 21st April 2020]\n \nAnne Case, Angus Deaton (2015). Suicide and happiness. [Online] Available at: https:\/\/voxeu.org\/article\/suicide-and-happiness [Accessed: 24th April 2020]\n\n"}}