{"cell_type":{"001ca85e":"code","949640b4":"code","dd866551":"code","928f067d":"code","127d62fd":"code","45cfa8bb":"code","1b8bf489":"code","2d467a66":"code","62554cb5":"code","55f7c922":"code","4c6e196e":"code","9d0a02e7":"code","5e6f4eec":"code","73974a08":"code","67072933":"code","3ca56405":"code","6f410fea":"code","e3a6920d":"code","9c92eaa3":"code","4ef96f5d":"code","16492833":"code","4918f9b9":"code","b6d332ae":"markdown","340af9d3":"markdown","2135741f":"markdown","72440ffe":"markdown","52c72939":"markdown","7d6e0239":"markdown","263b3c7d":"markdown","c7dbe20e":"markdown","cdd8462d":"markdown","da7604a0":"markdown","f4f11145":"markdown","88355846":"markdown","caebdbd1":"markdown","7e5a82ca":"markdown","6abfe726":"markdown","c035338c":"markdown","48598479":"markdown","e164785c":"markdown","04c022e6":"markdown","c628e462":"markdown","89a9317a":"markdown","3a0e71c4":"markdown","b2d64cdd":"markdown","542de2e7":"markdown","279a4a29":"markdown","cb086a11":"markdown","0eb0e95e":"markdown"},"source":{"001ca85e":"from textblob import TextBlob\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib\n\nwith open('..\/input\/Harry Potter and the Sorcerer.txt', 'r', errors='ignore') as file:\n    data = file.read().replace('\\n', '')\n\ntext= TextBlob(data)\nmy_list=text.tags","949640b4":"Slytherin = data.count(\"Slytherin\")\nGryffindor = data.count(\"Gryffindor\")\nHufflepuff = data.count(\"Hufflepuff\")\nRavenclaw = data.count(\"Ravenclaw\")\nhouse_list = [['Gryffindor', Gryffindor], ['Slytherin', Slytherin], ['Hufflepuff', Hufflepuff], ['Ravenclaw', Ravenclaw]]\ndf_house=pd.DataFrame(house_list, columns=['House', 'Times mentioned'])\ncolors = [\"crimson\", \"forrest green\", \"true blue\", \"amber\"]\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(10, 5))\nwith sns.xkcd_palette(colors):\n    sns.barplot(x=\"House\", y=\"Times mentioned\", saturation=0.9, data=df_house).set_title(\"Hogward's houses - number of times being mentioned\")","dd866551":"print(df_house)","928f067d":"sentiment=[]\nx=0\n\nfor sentence in text:\n    text.sentiment\n\nfor sentence in text.sentences:\n    sentiment.append(sentence.sentiment)\n    \nsentence_df = pd.DataFrame(sentiment)\nsentence_df.describe()","127d62fd":"text.sentences[1723]","45cfa8bb":"text.sentences[4913]","1b8bf489":"sentence_df['order'] = sentence_df.index\nsentence_df = pd.DataFrame(sentiment)\nsentence_df['order'] = sentence_df.index\npolarity = pd.Series(sentence_df[\"polarity\"])\nplt.figure(figsize=(10, 10))\nsns.jointplot(\"order\", \"polarity\", data=sentence_df, kind=\"kde\")","2d467a66":"plt.figure(figsize=(15, 5))\nsns.jointplot(\"order\", \"polarity\", data=sentence_df[sentence_df.polarity != 0], kind=\"kde\")","62554cb5":"text.sentences[292]","55f7c922":"text.sentences[6394]","4c6e196e":"subjectivity = pd.Series(sentence_df[\"subjectivity\"])\nplt.figure(figsize=(10, 10))\nsns.jointplot(\"order\", \"subjectivity\", data=sentence_df, kind=\"kde\")","9d0a02e7":"plt.xlim(0, None)\nsns.distplot(subjectivity)","5e6f4eec":"sns.jointplot(\"order\", \"subjectivity\", data=sentence_df[sentence_df.subjectivity != 0], kind=\"kde\")","73974a08":"plt.figure(figsize=(10, 10))\nsns.jointplot(\"polarity\", \"subjectivity\", data=sentence_df[(sentence_df.subjectivity != 0)], kind=\"kde\")","67072933":"full_t = pd.DataFrame(my_list)\nfull_t.columns = ['Words', \"Word type\"]\nxft=full_t.groupby('Word type').count().reset_index()\ntop20ft=xft.nlargest(20, 'Words')\n\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(10, 5))\nsns.barplot(x=\"Words\", y=\"Word type\", palette=\"ch:2.5,-.2,dark=.2_r\", saturation=0.9, data=top20ft).set_title(\"Harry Potter and the philosopher's stone - top 20 word types used\")","3ca56405":"full = pd.DataFrame(my_list)\nfull.columns = [\"Word\", \"Occurences\"]\nxf=full.groupby('Word').count().reset_index()\n\ntop10f=xf.nlargest(10, 'Occurences')\nsns.set_style(\"darkgrid\")\nplt.figure(figsize=(10, 5))\nsns.barplot(x=\"Word\", y=\"Occurences\", palette=\"ch:2.5,-.2,dark=.2_r\", saturation=0.9, data=top10f).set_title(\"Harry Potter and the philosopher's stone - top 10 words used\")    ","6f410fea":"def word_analysis(word_type, how_much):\n    dict = {'NN': 'nouns', 'VB': 'verbs', 'JJ': 'adjectives', 'WP': 'pronouns', 'RB': 'adverbs', 'NNP': 'proper nouns'}\n    filtered = [row for row in my_list if str(word_type) in row[1]]\n    print(\"filtered for \" + dict.get(word_type))\n    df = pd.DataFrame(filtered)\n    df = df[df[1]==word_type]\n    df.columns = [\"Word\", \"Occurences\"]\n        \n    x=df.groupby('Word').count().reset_index()\n    y=x.sort_values(by=['Occurences'], ascending=False)\n    top10=y.nlargest(how_much, 'Occurences')\n    sns.set_style(\"darkgrid\")\n    plt.figure(figsize=(10, 5))\n    sns.barplot(x=\"Word\", y=\"Occurences\", palette=\"ch:2.5,-.2,dark=.2_r\", saturation=0.9, data=top10).set_title(\"Harry Potter and the philosophers' stone - most frequently used \"+ dict.get(word_type))","e3a6920d":"word_analysis(word_type='NNP', how_much=10)","9c92eaa3":"word_analysis(word_type='NN', how_much=10)","4ef96f5d":"word_analysis(word_type='NN', how_much=15)","16492833":" word_analysis(word_type='JJ', how_much=20)","4918f9b9":"word_analysis(word_type='VB', how_much=10)","b6d332ae":"Of course Harry is on first place. Hermione is mentioned less times than a Ron or Hagrid. \nWe may observe title 'Professor' on very high spot.\nDudley, the step-brother of Harry has been mentioned more times than a Malfoy and Dumbledore.\n\n![image.png](attachment:image.png)","340af9d3":"Secondly, let's check the top20 most word types and present them on a barplot:","2135741f":"Below you may find 1.0 subjectivity scoring sentences with a neutral polarity:","72440ffe":"Let's dive into this book's sentiment analysis with use of TextBlob:","52c72939":"For more clear code I declare a function of filtering + processing data with barplot of top10 of word type passed in parameter:","7d6e0239":"The score of 1.0 concentrates around beggining and ending of book, whereas 0.5 score sentences are present throughout the book.","263b3c7d":"I was betting that 'wand' and 'school' will be at one of the highest spots, however it ended up at 12th & 13th place. There is no apparrent favourite noun of J.K. Rowling.","c7dbe20e":"0.0 Score seems to be clearly dominating in the distribution. There is as well considerable amount of sentences scoring around 1.0 and 0.5. Let's take a closer look to only sentences scoring above 0.0 subjectivity:","cdd8462d":"At y-axis histogram we can see a bimodal distribution of polarity with a broader left-tail. Before mentioned two clusters of +0.5 sentences at around sentences 1300 and 4500 are not that visible as two visible clusters of +0.1 and -0.1 going through whole book. I have checked the where exactly this first +0.5 spike has appeared: **it was a fragment where Harry and Hagrid were shopping at Diagon Alley for school equipment like wand or cauldron.** I suppose it is due to description of super-fast Nimbus 2000. ![image.png](attachment:image.png)","da7604a0":"As we may see it doesnt tell us much more than that the most used english words 'the', 'to', 'and' are most used in this book, however we may observe 'Harry' at spot no. 5.\nOkay, we need to be more specific. Let's go more into the details to see more interesting stuff:","f4f11145":"As above we may observe that the author uses a rather wide range of adjectives if quite flat distribution. 'Little' appears more often than 'large', 'old' appears more frequently than 'new'. There is no apparent favourite adjective visible.","88355846":"Polarity is a sentence level\u2014whether the expressed opinion in sentence is positive, negative, or neutral. Below you may found examples of highest (+1.0) and lowest (-1.0) scoring sentences when it comes to polarity:","caebdbd1":"LEGEND (in alphabetic order):\n* CC coordinating conjunction\n* DT determiner\n* FW foreign word\n* IN preposition\/subordinating conjunction\n* JJ adjective \u2018big\u2019\n* MD modal could, will\n* NN noun, singular \u2018desk\u2019\n* NNS noun plural \u2018desks\u2019\n* NNP proper noun, singular \u2018Harrison\u2019\n* POS possessive ending parent\u2018s\n* PRP$ possessive pronoun my, his, hers\n* RB adverb very, silently,\n* RP particle give up\n* VB verb, base form take\n* VBN verb, past participle taken\n* VBP verb, sing. present, non-3d take\n* VBZ verb, 3rd person sing. present takes","7e5a82ca":"Book contains 6396 sentences in total. All senteces has been marked with polarity score ranging from -1.0 to +1.0 and subjectivity score ranging from 0.0 to 1.0. Polarity score mean of +0.027 is considered a rather neutral(in comparizon JJR Tolkien's Lord of the Rings trylogy has mean score of +0.036 polarity). Subjectivity score mean of +0.267 is slightly subjective.","6abfe726":"Lets take a look at subjectivity:","c035338c":"Above we may see a brief stats of book done with use of Pandas pandas.DataFrame.describe() function. I will swiftly point out most important elements of it below. ","48598479":"Lets analyse a top 10 used Proper Nouns","e164785c":"Barplot of top 10 used adjectives","04c022e6":"Above jointplot shows subjectivity\/polarity distribution. The more subjective the sentence is the more polarized it may be: we can deduct it from the shape of kde.","c628e462":"Firstly, let's check out which house is mentioned the most:","89a9317a":"Here we may see the frequently used verbs. Nothing particullarly interesting.","3a0e71c4":"As present on jointplot the subjectivity score of 0.0 is clearly dominating. Lets have a closer look to a subjectivity histogram:","b2d64cdd":"Now let's check top 10 most used words:","542de2e7":"This one may be interesting: 'door', 'room' and 'house' are at high spots. Let's widen the results to top15:","279a4a29":"This Kernel is an analysis of 'Harry Potter and the Sorcecers' Stone' with use of Natural Language Processing library TextBlob.\nIt will answer to following questions: which house has been mentioned the most frequently, what type of wording author uses and more interesting stuff!\nAs a source data I use .txt of the book.","cb086a11":"As we can see on the jointplot - the great majority of sentences has been classied as neutral. Jointplot shows two clusters of +0.5 sentences at around sentences 1300 and 4500. Lets remove the neutral values to perform deeper analysis of non-neutral sentences.","0eb0e95e":"House points amounts below :) "}}