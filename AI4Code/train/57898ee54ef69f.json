{"cell_type":{"fd4b5ae3":"code","3366efdb":"code","4cfdfb06":"code","481db640":"markdown","48424ccb":"markdown","306b261c":"markdown","b689ec84":"markdown","f26e5658":"markdown","ef7afbae":"markdown","77a81b8f":"markdown","37f08b6a":"markdown","0dc7369e":"markdown"},"source":{"fd4b5ae3":"import numpy as np\nfrom scipy import stats\nfrom scipy.stats import norm\nfrom scipy.stats import chi2\n\n\nn_A = 5000\nn_B = 3000\n\nmu_A = 65.\nmu_B = 68.\n\nstd_A = 42.\nstd_B = 45.\n\n\nZ = (mu_B - mu_A)\/np.sqrt(std_B**2\/n_B + std_A**2\/n_A)\npvalue = 1-norm.cdf(Z)\n\nprint(\"z-statistic: {0}\\np-value: {1}\".format(Z,pvalue))","3366efdb":"from IPython.display import Image\nImage(\"\/kaggle\/input\/pvalues.jpg\")","4cfdfb06":"#The expected outcomes and the remaining metrics can be calculated in Python:\n\nobserved = [[145.,127],[4855.,2873]]\nstats.chi2_contingency(observed)\n","481db640":"## Z-test for the average time per sesson\n\nHypothesis formulation:<br>\nH0: The average time spent is equal for the two versions (mu_A \u2265 mu_B) - meaning Version B does not provide any improvement<br>\nHa: The average time spent is higher in Version B (mu_A<mu_B) - meaning Version B provides impovement for the Artemis platform\n\n","48424ccb":"Isn't life so much easier with made up numbers?","306b261c":"This Python notebook goes through the logic behind A\/B testing for an e-commerce platform, which seeks to test whether changes in its design will bring improvement. The traffic will be randomly split between the existing website A and the new version website B in order to compare metrics between the two. \n\nBusiness case \n\nLet's call our e-commerce platform Artemis and the product owner wants to know if rearranging sections on its landing page would be meaningful for the business. \n\nThe metrics that the company has chosen are:<br>\n-->Average time users spend on the landing page<br>\n-->Conversion rate i.e. the share of completed transactions in all sessions\n\n\nDefining the sample size:\n\nAccording to Optimizely's sample size calculator if we want to be able to detect at least 35% improvement to our current conversion rate of 2.9% we need to test a minimum sample of 4,000. \n\n\nAfter one-week of A\/B testing we get the following tracking metrics:\n\n  Site          | Sessions*    |Avg time     |Std of the time|Conversion rate|\n  ------------- | -------------|-------------|---------------|---------------|\n  Version A     | 5000         |65 s         |42 s           |2.9%           |\n  Version B     | 3000         |68 s         |45 s           |4.2%           |\n  \n\n*In case the company has concerns about losses from the new version, the traffic can be redistributed in different proportions\n\n**Question:** Artemis product owner wants to know if the seemingly better metrics for Version B have statistical significance or happened by chance? Now we need to test the results.\n","b689ec84":"Since we deal with categorical data Yes\/No (the users made a transaction or didn't) the use of Chi-square test would be appropriate.<br>\nHere is what the observed outcomes look like.\n\n  Site          | Sessions*    |Converted    |Not converted  |\n  ------------- | -------------|-------------|---------------|\n  Version A     | 5000         |145          |4855           |\n  Version B     | 3000         |127          |2873           |\n  \n","f26e5658":"#Another way to calculate \n\nexpected = np.array([170., 102, 4830, 2898])\nobserved = np.array([145., 127, 4855, 2873])\n\nchi_square = np.sum(np.square(observed-expected)\/expected)\n\npvalue = 1-chi2.cdf(chi_square, df=1)\n","ef7afbae":"Our chis-quare is greater than the chi-2(.05,1) critical value of 3.8<br>\nThe p-value is again lower than alpha at 95% confidence interval.\n\nTherefore we can reject H0 and conclude that the new version will indeed be beneficial for our business.","77a81b8f":"With a p-value less than .05 and z test statistic higher than the critical Z-score of 1.96 we can reject the null hypothesis H0 i.e. we can tell the product owner that we are 95% confident that Version B improves our product. If that much (or that little - below 0.05) level of uncertainty is acceptable to the management ... Yay, updated site!","37f08b6a":"Hypothesis formulation:<br>\nH0: The convertion rate is the same for both versions<br>\nH1: The convertion rate is higher for Version B<br>\n\nLet's find the expected outcomes for our variable if the H0 is true.\n\nThe probability for our opservations of convertion rate is:\n\np_hat = (Converted A + Converted B) \/  All Observations\n\np_hat = 0.034\n\nThis gives the following expected outcomes under H0:\n\n  Site          | Sessions*    |Converted    |Not converted  |\n  ------------- | -------------|-------------|---------------|\n  Version A     | 5000         |170          |4830           |\n  Version B     | 3000         |102          |2898           |\n \n\n\nWe can proceed to find the chi-square and its corresponding p-value.\n\n","0dc7369e":"## How about the convertion rate?"}}