{"cell_type":{"690528bd":"code","9bf4db60":"code","58f3995a":"code","cfb6093b":"code","36af939e":"code","6064eb1e":"code","a14c1d24":"code","66071026":"code","8ee4a185":"code","1a15b94d":"code","1d62f9c3":"code","40d2d629":"code","1891b9c8":"code","0be39544":"code","b54e4bb7":"code","4b640462":"markdown","9a28c18d":"markdown","599c8e9a":"markdown","6a10fd50":"markdown","64135670":"markdown","ec833714":"markdown","367fd48c":"markdown","9a78c7d6":"markdown","f05ea302":"markdown","a4ff6c29":"markdown","077bc255":"markdown","aa0cfd84":"markdown","3c478a90":"markdown","828a1765":"markdown","61b74e43":"markdown"},"source":{"690528bd":"\nimport numpy as np\nimport pylab as pl\nimport pandas as pd\nimport matplotlib.pyplot as plt \n%matplotlib inline\nimport seaborn as sns\nfrom scipy.stats import spearmanr\nimport os","9bf4db60":"train = pd.read_csv(\"\/kaggle\/input\/covid19-global-forecasting-week-3\/train.csv\")\ntransport_rankings = pd.read_csv(\"\/kaggle\/input\/transport-rankings-by-state\/US_Transport_Rankings.csv\")\ntrain.head(2)","58f3995a":"transport_rankings.head(5)","cfb6093b":"transport_rankings.columns=('OverallTransportRank','Province_State','CommuteTime','PublicTransitUsage','RoadQuality','BridgeQuality')\ntrain = train[train['Country_Region'] == 'US']","36af939e":"unique = pd.DataFrame(train.groupby(['Country_Region', 'Province_State'],as_index=False)['ConfirmedCases'].sum())\nunique['ConfirmedCases_rank'] = unique['ConfirmedCases'].rank(ascending=False)\nunique.sort_values(by=['ConfirmedCases_rank'], inplace=True)\nunique.head(5)","6064eb1e":"combined = pd.DataFrame(unique.merge(transport_rankings, on='Province_State'))\ncombined.head(5)","a14c1d24":"coef, p = spearmanr(combined['ConfirmedCases_rank'], combined['PublicTransitUsage'])\nprint('Spearmans rank correlation coefficient and p-value respectively: %.3f' % coef,p)\n# interpret the significance\nalpha = 0.05\nif p > alpha:\n    print('Samples are uncorrelated (fail to reject H0) p=%.3f' % p)\nelse:\n    print('Samples are correlated (reject H0) p=%.3f' % p)","66071026":"from scipy.stats import kendalltau\n# calculate kendall's correlation\ncoef, p = kendalltau(combined['ConfirmedCases_rank'], combined['PublicTransitUsage'])\nprint('Kendall correlation coefficient and p-value respectively: %.3f' % coef, p)\n# interpret the significance\nalpha = 0.05\nif p > alpha:\n    print('Samples are uncorrelated (fail to reject H0) p=%.3f' % p)\nelse:\n    print('Samples are correlated (reject H0) p=%.3f' % p)","8ee4a185":"plt.scatter(combined['ConfirmedCases_rank'], combined['PublicTransitUsage'])\n# show line plot\nplt.title('Confirmed Cases Rank vs Public Transport Usage Rank')\nplt.show()","1a15b94d":"coef, p = spearmanr(combined['ConfirmedCases_rank'], combined['RoadQuality'])\nprint('Spearmans rank correlation coefficient and p-value respectively (RoadQuality): %.3f' % coef,p)\ncoef, p = spearmanr(combined['ConfirmedCases_rank'], combined['BridgeQuality'])\nprint('Spearmans rank correlation coefficient and p-value respectively (BridgeQuality): %.3f' % coef,p)\ncoef, p = spearmanr(combined['ConfirmedCases_rank'], combined['OverallTransportRank'])\nprint('Spearmans rank correlation coefficient and p-value respectively (OverallTrasportationRank): %.3f' % coef,p)","1d62f9c3":"HDI_rankings = pd.read_csv(\"\/kaggle\/input\/american-human-development-index\/US_HDI_Rankings.csv\")\nHDI_rankings.head()","40d2d629":"HDI_rankings.columns=('HDI_rank','Province_State','HDI')\ncombined = pd.DataFrame(unique.merge(HDI_rankings, on='Province_State'))\ncombined.head(5)","1891b9c8":"coef, p = spearmanr(combined['ConfirmedCases_rank'], combined['HDI_rank'])\nprint('Spearmans rank correlation coefficient and p-value respectively: %.3f' % coef,p)\n# interpret the significance\nalpha = 0.05\nif p > alpha:\n    print('Samples are uncorrelated (fail to reject H0) p=%.3f' % p)\nelse:\n    print('Samples are correlated (reject H0) p=%.3f' % p)","0be39544":"# calculate kendall's correlation\ncoef, p = kendalltau(combined['ConfirmedCases_rank'], combined['HDI_rank'])\nprint('Kendall correlation coefficient: %.3f' % coef)\n# interpret the significance\nalpha = 0.05\nif p > alpha:\n    print('Samples are uncorrelated (fail to reject H0) p=%.3f' % p)\nelse:\n    print('Samples are correlated (reject H0) p=%.3f' % p)","b54e4bb7":"plt.scatter(combined['ConfirmedCases_rank'], combined['HDI_rank'])\n# show line plot\nplt.title('Confirmed Cases Rank vs Human Development Index')\nplt.show()","4b640462":"Kendall's tau:","9a28c18d":"# Part 2: American Human Development Index","599c8e9a":"I know you want to see the correlations with the other columns. I'll run Spearmans for these:","6a10fd50":"The p value is highly significant, and we have reject the null hypothesis.\nLets try Kendalls tau:","64135670":"Well both the above tests fail to reject the null hypothesis, that there is no correlation between the American Human Development Index and the current confirmed cases rank re corona virus.\nWhat is interesting (although the graph is perhaps not so forgiving visually) is that they *almost* do reject the null hypothesis, because they are significant at the 10% level.\n\nNow if we ascribe anything to that then we would do well to use the index as a barometer for when we need to instill extra measures against such natural evils as a virus bent on taking us out!","ec833714":"Group by State and sum the confirmed cases (yes its cumulative, this is a measure of magnitude, so all good), then rank the states by confirmed cases:","367fd48c":"# Part 1: Public Transport Usage","9a78c7d6":"So now we are ready to run some rank correlation tests. I will be using Spearmans and kendalls coefficients for my tests.","f05ea302":"Again the p-value is significant and we have to reject the null hypothesis that there is no correlation between Public Transit Usage and the number of confirmed cases of corona virus currently.","a4ff6c29":"Merge the data on the state column:","077bc255":"Nothing to write home about re those three correlations. \n\nSo what comes out of this analysis is the idea that we could use the engagement of citizens with public transport infrastructure as an indicator of when to start instilling extra measures against biological threats to human health.","aa0cfd84":"import the data:","3c478a90":"Rename external cols and filter on US data","828a1765":"Now we test for significance again on the rank columns.\nSpearmans rank correlation test:","61b74e43":"# Corona Virus Correlations\n\nTL;DR there is definitely a correlation in the US between public transport usage and the number of corona virus cases currenlty across the states. The Spearman correlation coefficient is calculated at 0.55 and p-value highly significant. \n\nIn the **first part** of this notebook we explore the possible correlation between public transport usage in the US and the number of confirmed corona virus cases, by State.\n\nThe tranportation research I am referencing can be found here: https:\/\/www.usnews.com\/news\/best-states\/rankings\/infrastructure\/transportation\nIt is, in part, based on research conducted by the U.S. DEPARTMENT OF TRANSPORTATION.\n\nTransportation is further broken down into four metrics: commute time, road quality, bridge quality and public transit usage.\n\nEach metric is represented by a ranking for the state. The main metric for this study is the public transit usage metric and is defined as:\n\n**Public Transit Usage**\n\nThis metric measures the average miles traveled on public transportation by one state resident in 2016. With an average of about 1 mile traveled per person, Mississippi\u2019s public transit system earned the state the bottom slot, and with about 42 miles per person, New York was No. 1.\n\nThe **null hypothesis** for this study is that there is no correlation between Public Transit Usage and the number of confirmed cases of corona virus currently. My alpha is at the 5% level.\n\nObviously I am thinking that before lockdown the virus had chance to spread via public transport infrastructure.\n\nIn the **second part** of this notebook we explore the possible correlation between the American Human Development Index and the number of confirmed corona virus cases, by State.\n\nThe data were taken from the [American Human Development Report](http:\/\/http:\/\/measureofamerica.org\/human-development\/#american%20human%20development%20index).\nHuman development according to them is defined as:\n\n**Human development**\n\nHuman development is defined as the process of enlarging people\u2019s freedoms and opportunities and improving their well-being. Human development is about the real freedom ordinary people have to decide who to be, what to do, and how to live.\n\nFollow the link to read more about it, its quite interesting.\nThe **null hypothesis** for this study is that there is no correlation between American Human Develpment Index and the number of confirmed cases of corona virus currently. My alpha is at the 5% level."}}