{"cell_type":{"7fb89f66":"code","a034de3c":"code","d2b885bd":"code","ed07ae41":"code","552ebff5":"code","29ef3aa8":"code","28603779":"code","d2df2d3a":"code","d99fc236":"code","44d1f16b":"code","14d50b5e":"code","5dd23b29":"code","267d940d":"code","a98f1299":"code","4caf4bb0":"code","7923af3f":"code","e8daabc9":"code","bdf8a95b":"code","b74009b4":"code","db765a53":"code","8a4f4d7b":"code","53c46459":"code","a3e6b100":"code","b1b916f7":"code","44e7d8c2":"code","d5080201":"code","e0acfe3e":"code","41190d68":"code","84808013":"markdown","437f6163":"markdown","7b9a3a6b":"markdown","fc1a1239":"markdown","3313b5ce":"markdown"},"source":{"7fb89f66":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","a034de3c":"import time\nimport torch\nfrom transformers import T5ForConditionalGeneration,T5Tokenizer\n\n\ndef set_seed(seed):\n  torch.manual_seed(seed)\n  if torch.cuda.is_available():\n    torch.cuda.manual_seed_all(seed)\n\nset_seed(42)\n\nmodel = T5ForConditionalGeneration.from_pretrained('\/kaggle\/input\/answergen\/')\ntokenizer = T5Tokenizer.from_pretrained('t5-base')\n\ndevice = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\n# print (\"device \",device)\nmodel = model.to(device)","d2b885bd":"text = '''Coronaviruses were discovered in the 1960s. They are a group of viruses that cause diseases in mammals and birds. In humans, coronaviruses cause respiratory tract infections that are typically mild, such as the common cold.\n\nThe name \"coronavirus\" is derived from the Latin corona, meaning crown or halo. The name refers to the characteristic appearance of the infective form of the virus, which is reminiscent of a crown or a solar corona.'''\n","ed07ae41":"question = '''What is coronavirus?'''","552ebff5":"con = \"context:%s \\n question:%s <\/s>\" %(text,question)","29ef3aa8":"max_len = 256","28603779":"\nencoding = tokenizer.encode_plus(con, return_tensors=\"pt\")\ninput_ids, attention_masks = encoding[\"input_ids\"].to(device), encoding[\"attention_mask\"].to(device)\n","d2df2d3a":"def greedy_decoding (inp_ids,attn_mask):\n    greedy_output = model.generate(input_ids=inp_ids, attention_mask=attn_mask, max_length=10)\n    Question =  tokenizer.decode(greedy_output[0], skip_special_tokens=True,clean_up_tokenization_spaces=True)\n    return Question.strip().capitalize()","d99fc236":"print (con)\n# print (\"\\nGenerated Question: \",truefalse)\n\noutput = greedy_decoding(input_ids,attention_masks)\nprint (output)","44d1f16b":"\n\ndef beam_search_decoding (inp_ids,attn_mask):\n  beam_output = model.generate(input_ids=inp_ids,\n                                 attention_mask=attn_mask,\n                                 max_length=256,\n                               num_beams=20,\n                               num_return_sequences=3,\n                               no_repeat_ngram_size=2,\n                               early_stopping=True\n                               )\n  Questions = [tokenizer.decode(out, skip_special_tokens=True, clean_up_tokenization_spaces=True) for out in\n               beam_output]\n#   return Question.strip().capitalize() for Question in Questions\n  return  Questions\n\n\n\ndef topkp_decoding (inp_ids,attn_mask):\n  topkp_output = model.generate(input_ids=inp_ids,\n                                 attention_mask=attn_mask,\n                                 max_length=256,\n                               do_sample=True,\n                               top_k=40,\n                               top_p=0.80,\n                               num_return_sequences=3,\n                                no_repeat_ngram_size=2,\n                                early_stopping=True\n                               )\n  Questions = [tokenizer.decode(out, skip_special_tokens=True,clean_up_tokenization_spaces=True) for out in topkp_output]\n  return list(Question.strip().capitalize() for Question in Questions)\n","14d50b5e":"\noutput = beam_search_decoding(input_ids,attention_masks)\nprint (\"\\nBeam decoding [Most accurate questions] ::\\n\")\nfor out in output:\n    print(out)\n\n\n# output = topkp_decoding(input_ids,attention_masks)\n# print (\"\\nTopKP decoding [Not very accurate but more variety in questions] ::\\n\")\n# for out in output:\n#     print (out)\n","5dd23b29":"output = topkp_decoding(input_ids,attention_masks)\nprint (\"\\nTopKP decoding [Not very accurate but more variety in questions] ::\\n\")\nfor out in output:\n    print (out)\n","267d940d":"def t5_answer(context,question):\n    con = \"context:%s \\n question:%s <\/s>\" %(context,question)\n    encoding = tokenizer.encode_plus(con, return_tensors=\"pt\")\n    input_ids, attention_masks = encoding[\"input_ids\"].to(device), encoding[\"attention_mask\"].to(device)\n    output = beam_search_decoding (input_ids, attention_masks)\n    return str(output)\n","a98f1299":"text = '''Coronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus. Most people who fall sick with COVID-19 will experience mild to moderate symptoms and recover without special treatment. Coronavirus is mainly transmitted through droplets generated when an infected person coughs, sneezes, or exhales. The Victorian Government announced Stay at Home Directions for metropolitan Melbourne and Mitchell Shire from 11:59pm on Wednesday 8 July until 11.59pm on Wednesday 19 August. There are 4 reasons people in metropolitan Melbourne and the Mitchell Shire can leave home. The reasons to leave home can be either shopping, work or study, medical treatment or for exercise. The New South Wales border with Victoria closed at 12:01am on Wednesday 8 July 2020. There is a permit system in place for people who need to travel from Victoria into NSW. the Victorian Government has announced that if you live in metropolitan Melbourne or Mitchell Shire, you must wear a face covering when you leave your home from 11.59pm on Wednesday 22 July 2020. the Victorian Government has announced that metropolitan Melbourne and Mitchell Shire will return to Stage 3 Stay at Home restrictions from 11.59pm on Wednesday 8 July 2020. All Year 11 and Year 12 students will go back to school for Term 3 as planned from 13 July, along with students at special schools. Prep to Year 10 students will return to school on Monday 20 July through remote and flexible learning. The JobKeeper Payment scheme is a temporary subsidy for businesses significantly affected by coronavirus. Eligible employers, sole traders and other entities affected by coronavirus can apply to receive $1,500 per eligible employee per fortnight.'''","4caf4bb0":"text = '''\nCoronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.\nMost people who fall sick with COVID-19 will experience mild to moderate symptoms and recover without special treatment. \nCoronavirus is mainly transmitted through droplets generated when an infected person coughs, sneezes, or exhales. \nThe Victorian Government announced Stay at Home Directions for metropolitan Melbourne and Mitchell Shire from 11:59pm on Wednesday 8 July until 11.59pm on Wednesday 19 August. \nThere are 4 reasons people in metropolitan Melbourne and the Mitchell Shire can leave home.\nThe reasons to leave home can be either shopping, work or study, medical treatment or for exercise.\nThe New South Wales border with Victoria closed at 12:01am on Wednesday 8 July 2020. There is a permit system in place for people who need to travel from Victoria into NSW. \nthe Victorian Government has announced that if you live in metropolitan Melbourne or Mitchell Shire, you must wear a face covering when you leave your home from 11.59pm on Wednesday 22 July 2020. \nthe Victorian Government has announced that metropolitan Melbourne and Mitchell Shire will return to Stage 3 Stay at Home restrictions from 11.59pm on Wednesday 8 July 2020.\nAll Year 11 and Year 12 students will go back to school for Term 3 as planned from 13 July, along with students at special schools.\nPrep to Year 10 students will return to school on Monday 20 July through remote and flexible learning. \nThe JobKeeper Payment scheme is a temporary subsidy for businesses significantly affected by coronavirus. Eligible employers, \nsole traders and other entities affected by coronavirus can apply to receive $1,500 per eligible employee per fortnight.\nOn 21 July the government announced an extension of Job Keeper through to 28 March 2021.\nThe Jobkeeper payment scheme runs for the fortnights from 30 March until 27 September 2020. \nEligible employees need to make a business monthly declaration to the ATO. Business can enrol\nany time within this period to claim JobKeeper. Sole traders may be eligible for the JobKeeper\nscheme under the business participation entitlement if their business has experienced a downturn \naccording to the eligibility criteria. From 20 July, approved providers of child care\nservicesExternal Link cannot claim JobKeeper payments for themselves or their employees\nwhose ordinary duties relate principally to the operation of the child care service.\nJobSeeker Payment is a financial help offered to people aged between 22 and pension age\nand looking for work. JobSeeker payment is offered to sick or injured people. Jobseeker\npayment is for every 2 weeks. A single with no children gets $1115.70 per fortnight as \nJobSeeker payment. A single with a dependent child gets $1,162.00 per fortnight as JobSeeker \npayment. Contact number for additional information on Job Seeker payment is 136240. \nCentrelink phone service is available 7 days a week, 24 hours a day. '''","7923af3f":"question = [\"What is the name of the disease?\",\"What disease is it caused by?\",\"What kind of disease is it?\",\"What is the cause of the disease?\",\"What happens to most people who fall sick with Covid- 19?\",\"What symptoms will most people who fall sick with Covid- 19 experience?\",\"What is the name of the disease?\",\"What type of sickness will most people who fall ill with Covid- 19 experience?\",\"What type of symptoms will most people experience?\",\"What are symptoms of Covid- 19?\"]\n","e8daabc9":"\n\ndef beam_search_decoding (inp_ids,attn_mask):\n        beam_output = model.generate(input_ids=inp_ids,\n                                         attention_mask=attn_mask,\n                                         max_length=256,\n                                       num_beams=50,\n                                       num_return_sequences=2,\n                                       no_repeat_ngram_size=2,\n                                       early_stopping=True\n                                       )\n        Questions = [tokenizer.decode(out, skip_special_tokens=True, clean_up_tokenization_spaces=True) for out in beam_output]\n        return [Question.strip().capitalize() for Question in Questions]\n        \n#         res = max(Questions, key = len) \n          \n#         return  res\n\n\n","bdf8a95b":"import ast \n","b74009b4":"import gc\ngc.collect()","db765a53":"for ques in question:\n    output = t5_answer(text,ques)\n    res = ast.literal_eval(output) \n    longest_string = max(res, key=len)\n\n    print(ques)\n    print(longest_string)","8a4f4d7b":"quest2 = [\"What is the permit system in place for?\",\"Where do people need to travel to get to?\",\"What is the name of the system that allows people to travel from Victoria into NSW?\",\"What is in place for people who need to travel from Victoria into NSW?\"]","53c46459":"for ques in quest2:\n    output = t5_answer(text,ques)\n    res = ast.literal_eval(output) \n    longest_string = max(res, key=len)\n\n    print(ques)\n    print(longest_string)","a3e6b100":"learning = [\"What is the purpose of the program?\",\"What kind of learning is that?\",\"What kind of learning will they be returning to?\",\"How will students go to school?\",\"What kind of learning will be available on the new school year?\"]","b1b916f7":"text = \"All Year 11 and Year 12 students will go back to school for Term 3 as planned from 13 July, along with students at special schools.Prep to Year 10 students will return to school on Monday 20 July through remote and flexible learning.\"","44e7d8c2":"for ques in learning:\n    output = t5_answer(text,ques)\n    res = ast.literal_eval(output) \n    longest_string = max(res, key=len)\n    print(ques)\n    print(longest_string)","d5080201":"declaration = [\"What does the employer need to make a business monthly declaration to?\",\"What type of employees need to make a business monthly declaration?\",\"What type of declaration must employees make?\",\"How often must employees make a business declaration?\",\"What do employees need to make a business monthly declaration to?\",\"What must employees make to the Ato?\"]","e0acfe3e":"text = '''The JobKeeper Payment scheme is a temporary subsidy for businesses significantly affected by coronavirus. Eligible employers, \nsole traders and other entities affected by coronavirus can apply to receive $1,500 per eligible employee per fortnight.\nOn 21 July the government announced an extension of Job Keeper through to 28 March 2021.\nThe Jobkeeper payment scheme runs for the fortnights from 30 March until 27 September 2020. \nEligible employees need to make a business monthly declaration to the ATO. Business can enrol\nany time within this period to claim JobKeeper. Sole traders may be eligible for the JobKeeper\nscheme under the business participation entitlement if their business has experienced a downturn \naccording to the eligibility criteria. From 20 July, approved providers of child care\nservicesExternal Link cannot claim JobKeeper payments for themselves or their employees\nwhose ordinary duties relate principally to the operation of the child care service.\nJobSeeker Payment is a financial help offered to people aged between 22 and pension age\nand looking for work. JobSeeker payment is offered to sick or injured people. Jobseeker\npayment is for every 2 weeks. A single with no children gets $1115.70 per fortnight as \nJobSeeker payment. A single with a dependent child gets $1,162.00 per fortnight as JobSeeker \npayment. Contact number for additional information on Job Seeker payment is 136240. \nCentrelink phone service is available 7 days a week, 24 hours a day. '''","41190d68":"for ques in declaration:\n    output = t5_answer(text,ques)\n    res = ast.literal_eval(output) \n    longest_string = max(res, key=len)\n    print(ques)\n    print(longest_string)","84808013":"* What is the purpose of the program?\n* Remote and flexible learning is the purpose of the program.\n* What kind of learning is that?\n* Remote and flexible is that.\n* What kind of learning will they be returning to?\n* What kind of learning will they be returning to remote and flexible.\n* How will students go to school?\n* Students go to school through remote and flexible learning.\n* What kind of learning will be available on the new school year?\n* Remote and flexible will be available on the new school year.","437f6163":"# By Current System","7b9a3a6b":"* What does the employer need to make a business monthly declaration to?\n* The employer need a business monthly declaration need make the Ato.\n* Who needs to make a business monthly declaration?\n* Eligible employees needs to make a business monthly declaration.\n* What type of employees need to make a business monthly declaration?\n* Eligible for this is the need to make a business monthly declaration.\n* What type of declaration must employees make?\n* Business monthly must be made by employees.\n* How often must employees make a business declaration?\n* Must employees make a business declaration monthly.\n* What do employees need to make a business monthly declaration to?\n* Employees need a business monthly declaration need make the Ato.\n* What must employees make to the Ato?\n* Employees must make to business monthly declaration.","fc1a1239":"# By current system\n* What is the name of the disease?\n* Coronavirus disease is the name of the disease.\n* What disease is it caused by?\n* It is caused by Coronavirus disease( Covid- 19) which is an infectious disease caused by a newly discovered Coronavirus.\n* What kind of disease is it?\n* Coronavirus is it.\n* What is the cause of the disease?\n* A newly discovered Coronavirus is the cause of the disease.\n* What happens to most people who fall sick with Covid- 19?\n* Recover without special treatment happens to most people.\n* What symptoms will most people who fall sick with Covid- 19 experience?\n* Mild to moderate fall with Covid- 19 experience.\n* What is the name of the disease?\n* Covid- 19 is the name of the disease.\n* What type of sickness will most people who fall ill with Covid- 19 experience?\n* Mild to moderate symptoms will most people who fall ill with Covid- 19 experience.\n* What type of symptoms will most people experience?\n* Mild to moderate will most people experience.\n* What are symptoms of Covid- 19?\n* Mild to moderate are symptoms.","3313b5ce":"# By Current System"}}