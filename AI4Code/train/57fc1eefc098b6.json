{"cell_type":{"2d8773c4":"code","d375ffe6":"code","f7b64cf0":"code","b94a4941":"code","711a67a0":"code","305f4468":"code","1cc8bec7":"code","545bf344":"code","51f28b94":"code","bfb2e7da":"code","0e66a289":"code","76b47800":"code","91026f80":"code","31950361":"code","f578b413":"code","ea7b2934":"code","fce9c937":"code","8e3dde32":"code","f5ae2b40":"code","8098146c":"code","3c1a2fc9":"code","27bf42b9":"code","f9499796":"markdown","c5543dd8":"markdown","5108d5a8":"markdown","daf15c1e":"markdown","86cd6a19":"markdown","e57595c8":"markdown","a0f2dd9d":"markdown","a0f5679b":"markdown","7b9ec224":"markdown","a778dde0":"markdown","266fceaa":"markdown","204851a2":"markdown","72615fbd":"markdown","56f96f47":"markdown","e318ed75":"markdown","06ef76ab":"markdown"},"source":{"2d8773c4":"import pandas as pd\nimport numpy as np\nimport random\nfrom sklearn import metrics\nimport seaborn as sns;sns.set()\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport holoviews as hv\nfrom holoviews import opts, dim, Palette\nimport geoviews as gv\nhv.extension('bokeh', 'matplotlib')\nopts.defaults(\n    opts.Bars(xrotation=45, tools=['hover']),\n    opts.Curve(width=600,height=400, tools=['hover']),\n    \n    opts.Scatter(width=800, height=600, color=Palette('Category20'), tools=['hover']),\n    opts.NdOverlay(legend_position='top_left'))\n","d375ffe6":"df = pd.read_csv('..\/input\/master.csv')","f7b64cf0":"df.head()","b94a4941":"df.shape","711a67a0":"df.info()","305f4468":"df.describe()","1cc8bec7":"df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\ndf_country[\"suicides_per_100k\"]=df_country[\"suicides_no\"]\/(df_country[\"population\"]\/100000)\ndf_country[\"Average_suicide\"] = (df_country[\"suicides_no\"]\/31).astype(int)\ndf_country.head()\n","545bf344":"def avg(): \n    g=df_country.sort_values(\"Average_suicide\").tail(10)\n    return(g)\n   \navg()","51f28b94":"def map():\n    import geopandas as gpd\n    world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\n    world=world.rename(index=str, columns={\"name\": \"country\"})\n    \n    df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_country[\"suicides_per_100k\"]=df_country[\"suicides_no\"]\/(df_country[\"population\"]\/100000)\n    df_country[\"Average_suicide\"] = (df_country[\"suicides_no\"]\/31).astype(int)\n    df_country[\"country\"]=df_country[\"country\"].str.replace(\"Russian Federation\",\"Russia\")\n    \n    df1 = pd.merge(world, df_country,  on='country', how='outer')\n    \n    df1 = df1.dropna(axis=0)\n    polys = gv.Polygons(df1, vdims=['suicides_per_100k',\"Average_suicide\", 'suicides_no', 'country'])\n    polys.opts(width=800, height=400, tools=['hover'], cmap='viridis', ylim=(-60, 90))\n    return(polys)\nmap()","bfb2e7da":"def top_countries():\n    df_country = df.groupby([\"country\",\"year\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    stage = df_country.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n\n    macro = hv.Dataset(stage, ['country', 'year'])\n    plot = macro.to(hv.Curve, 'year', ['suicides_no',\"population\"]).overlay()\n\n    plot.relabel('Suicide Rate between 1985 - 2016')\n    return(plot)\ntop_countries()","0e66a289":"def all_countries():\n    df_country=df.groupby([\"country\",\"year\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    macro = hv.Dataset(df_country, ['country', 'year'])\n    curves = macro.to(hv.Curve, 'year', 'suicides_no', groupby='country')\n    \n    return(curves)\nall_countries()\n","76b47800":"def suicides_per_100k():\n    df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_country[\"suicides_per_100k\"]=df_country[\"suicides_no\"]\/(df_country[\"population\"]\/100000)\n    plt.figure(figsize=(10,20))\n    plt.axvline(df_country[\"suicides_per_100k\"].mean(), color='r', linestyle='--')\n    df_country.sort_values('suicides_per_100k',inplace=True)\n    sns.barplot(y=df_country[\"country\"], x=df_country[\"suicides_per_100k\"])\n    plt.xlabel('No. of suicides per 100k')\n    plt.ylabel('Countries')\n    plt.title('Total No. of Suicides per country from 1985 to 2016')\n    return(plt.show())\nsuicides_per_100k()","91026f80":"def suicides_per_100ks():\n    df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_country[\"suicides_per_100k\"]=df_country[\"suicides_no\"]\/(df_country[\"population\"]\/100000)\n    macro = hv.Dataset(df_country, [\"country\"])\n    bars = macro.to(hv.Bars, \"country\", 'suicides_per_100k')\n    bars.opts(width=900,height=400)\n\n    return(bars)\n#suicides_per_100ks()","31950361":"def max_suicide():\n    df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    plt.figure(figsize=(10,20))\n    plt.axvline(df_country[\"suicides_no\"].mean(), color='r', linestyle='--')\n    df_country.sort_values('suicides_no',inplace=True)\n    sns.barplot(y=df_country[\"country\"], x=df_country[\"suicides_no\"])\n    plt.xlabel('No. of suicides')\n    plt.ylabel('Countries')\n    plt.title('Total No. of Suicides per country from 1985 to 2016')\n    return(plt.show())\nmax_suicide()","f578b413":"def max_suicides():\n    df_country=df.groupby([\"country\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    macro = hv.Dataset(df_country, [\"country\"])\n    bars = macro.to(hv.Bars, \"country\", 'suicides_no')\n    bars.opts(width=900,height=400)\n\n    return(bars)\n   \n#max_suicides()","ea7b2934":"def past_ten_years():\n    df_country=df.groupby([\"country\",\"year\",\"sex\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n   # df_country = df_country[df_country[\"year\"] > 2005]\n    stage = df_country.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n\n    macro = hv.Dataset(stage, ['year',\"sex\"])\n    bars = macro.sort('country').to(hv.Bars, 'country', 'suicides_no')\n    bars.opts(width=600,height=400)\n\n    return(bars)\npast_ten_years()","fce9c937":"def gender():\n    df_country=df.groupby([\"country\",\"year\",\"sex\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_country = df_country[df_country[\"year\"] > 2005]\n    stage = df_country.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n    stagem = stage.loc[stage['sex']==\"male\"]\n    stagef = stage.loc[stage['sex']==\"female\"]\n    \n    macrof = hv.Dataset(stagef, ['country', 'year'])\n    macrom = hv.Dataset(stagem, ['country', 'year'])\n    curvem = macrom.to(hv.Curve, 'year', ['suicides_no', 'sex'], label=\"Male\")\n    curvef = macrof.to(hv.Curve, 'year', ['suicides_no', 'sex'], label=\"Female\")\n    \n    curves=(curvem * curvef)\n    \n    return(curves)\ngender()","8e3dde32":"def generations():\n    df_country = df.groupby([\"country\",\"year\",\"generation\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_s = df_country[df_country[\"year\"] > 2005]\n    \n    stage = df_s.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n\n    stage1 = stage.loc[stage['generation'].str.contains(\"Generation X\")]\n    stage2 = stage.loc[stage['generation'].str.contains(\"Silent\")]\n    stage3 = stage.loc[stage['generation'].str.contains(\"G.I. Generation\")]\n    stage4 = stage.loc[stage['generation'].str.contains(\"Boomers\")]\n    stage5 = stage.loc[stage['generation'].str.contains(\"Millenials\")]\n    stage6 = stage.loc[stage['generation'].str.contains(\"Generation Z\")]\n    \n    \n    macro1 = hv.Dataset(stage1, ['country', 'year'])\n    macro2 = hv.Dataset(stage2, ['country', 'year'])\n    macro3 = hv.Dataset(stage3, ['country', 'year'])\n    macro4 = hv.Dataset(stage4, ['country', 'year'])\n    macro5 = hv.Dataset(stage5, ['country', 'year'])\n    macro6 = hv.Dataset(stage6, ['country', 'year'])\n    \n    \n    curve1 = macro1.to(hv.Curve, 'year', 'suicides_no', label=\"Generation X\")\n    curve2 = macro2.to(hv.Curve, 'year', 'suicides_no', label=\"Silent\")\n    curve3 = macro3.to(hv.Curve, 'year', 'suicides_no', label=\"G.I. Generation\")\n    curve4 = macro4.to(hv.Curve, 'year', 'suicides_no', label=\"Boomers\")\n    curve5 = macro5.to(hv.Curve, 'year', 'suicides_no', label=\"Millenials\")\n    curve6 = macro6.to(hv.Curve, 'year', 'suicides_no', label=\"Generation Z\")\n    \n    \n    curves=(curve1 * curve2 * curve3 *curve4 *curve5 *curve6).opts( legend_position='top_right')\n    \n    \n    return(curves)\ngenerations()","f5ae2b40":"def age():\n    df_country=df.groupby([\"country\",\"year\",\"age\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_s=df_country[df_country[\"year\"] > 2005]\n    stage = df_country.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n    \n    \n    macro = hv.Dataset(stage, ['year',\"age\"])\n    bars = macro.sort('country').to(hv.Bars, 'country', 'suicides_no')\n    bars.opts(width=600,height=400)\n    return(bars)\nage()","8098146c":"def ages():\n    df_country = df.groupby([\"country\",\"year\",\"age\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n   # df_s = df_country[df_country[\"year\"] > 2005]\n    stage = df_country.loc[df_country['country'].isin([\"Mexico\",\"Republic of Korea\",\"France\",\"Japan\",\"Russian Federation\",\"United States\",\"Brazil\"])]\n    stage1 = stage.loc[stage['age'].str.contains(\"15-24 years\")]\n    stage2 = stage.loc[stage['age'].str.contains(\"35-54 years\")]\n    stage3 = stage.loc[stage['age'].str.contains(\"75+ years\")]\n    stage4 = stage.loc[stage['age'].str.contains(\"25-34 years\")]\n    stage5 = stage.loc[stage['age'].str.contains(\"55-74 years\")]\n    stage6 = stage.loc[stage['age'].str.contains(\"5-14 years\")]\n    \n    \n    macro1 = hv.Dataset(stage1, ['country', 'year'])\n    macro2 = hv.Dataset(stage2, ['country', 'year'])\n    macro3 = hv.Dataset(stage3, ['country', 'year'])\n    macro4 = hv.Dataset(stage4, ['country', 'year'])\n    macro5 = hv.Dataset(stage5, ['country', 'year'])\n    macro6 = hv.Dataset(stage6, ['country', 'year'])\n    \n    \n    curve1 = macro1.to(hv.Curve, 'year', 'suicides_no', label=\"15-24 years\")\n    curve2 = macro2.to(hv.Curve, 'year', 'suicides_no', label=\"35-54 years\")\n    curve3 = macro3.to(hv.Curve, 'year', 'suicides_no', label=\"75+ years\")\n    curve4 = macro4.to(hv.Curve, 'year', 'suicides_no', label=\"25-34 years\")\n    curve5 = macro5.to(hv.Curve, 'year', 'suicides_no', label=\"55-74 years\")\n    curve6 = macro6.to(hv.Curve, 'year', 'suicides_no', label=\"5-14 years\")\n    \n    \n    curves=(curve1 * curve2 * curve3 *curve4 *curve5 *curve6).opts( legend_position='top_right')\n    \n    \n    return(curves)\nages()","3c1a2fc9":"def overall():\n    \n    df_country=df.groupby([\"year\",\"sex\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    \n    macro = hv.Dataset(df_country, ['year',\"sex\"])\n    bars = macro.to(hv.Bars, \"sex\", 'suicides_no')\n    bars.opts(width=350,height=400)\n\n    return(bars)\n\noverall()","27bf42b9":"def gdp():\n    df_gdp = df.groupby([\"country\",\"year\",\"gdp_per_capita ($)\"],as_index=False)[\"population\",\"suicides_no\"].sum()\n    df_gdp[\"suicides_per_100k\"] = df_gdp[\"suicides_no\"]\/(df_country[\"population\"]\/100000)\n    sns.pairplot(df_gdp, x_vars=['suicides_no'], y_vars=[\"gdp_per_capita ($)\"], height=6, aspect=2, kind='reg')\n    X = df_gdp[\"gdp_per_capita ($)\"].values.reshape(-1,1)\n    y = df_gdp[\"suicides_no\"]\n    from sklearn.linear_model import LinearRegression\n    lm = LinearRegression()\n    lm.fit(X,y)\n    print(lm.intercept_)\n    print(lm.coef_)\n    print(\"Y = {}\".format(lm.coef_),\"X + {}\".format(lm.intercept_))\ngdp()    ","f9499796":" _Does GDP and Population of the country affects the suicide rate?_","c5543dd8":"__Insights :-__\n\nAverage Suicide Rate of __Russian Federation__ and __United States__, is leading the overall data by more than three times.","5108d5a8":"__Some countries are missing in our dataset, hence the world map show gappings.__","daf15c1e":"__HDI for year__ has missing values.","86cd6a19":"__Insights :-__\n\n__Lithuania\u2019s__ rate has been highest by a large margin: > 40 suicides per 100k (per year)\n\n\n__Russian Federation__ rate has been second highest > 30 suicides per 100k (per year)","e57595c8":"__Insights :-__\n\nAccording to data, between __35 - 75__ years people shows more tendency to commit suicide; whereas, before __14__ and after __75__ years there are very less or almost no suicide cases as comparision to other age groups. \n\nAge groups like __35-54 years__ and __55-74 years__ are dominating our data.\n\nYouth between __25-34 years__ are also can not be neglected. ","a0f2dd9d":" Lets check the countries with increasing trend suicide","a0f5679b":"__Insights :-__\n\n__Generation X (with high peak around 2010)__ and __Millenials(with rapid increase around 2010)__ shows high potential as compared to other generations;\n\n__Silent (with rapid decrease around 2010)__ and __Boomers__ shows significant decrease in suicide rate;\n\nwhereas, __Generation Z__ follows constant trend.\n\n__2010 is a interesting year, need to learn about it more.__","7b9ec224":"__Suicide in the 21st Century__\n\n\nIn 2017, a man whom I considered one of the greatest musicians of all time and author, or co-author, of a number of songs that had become the soundtrack of my life, died in suicide. Many were shocked, and many miss him today.\nIn 2018, a man whose TV programs repeatedly kept me in a state of respect towards, and fascination about, the diversity of the world, died in suicide. Many were shocked, and many miss him today.\n\nClose to 800000 less-famous people die due to suicide every year, according to WHO. I looked at the WHO Suicide Statistics to see where the world as a whole is heading.\n\nIs it getting better or worse? You will see my answer below.\n","a778dde0":"__Please upvote my work if you like this sheet.__\n\n__Thanks for your support.__","266fceaa":"__Insight :-__\nOverall trend in suicides over past years increases with time.","204851a2":"__Insights :-__\n\n__Countries with increasing trend in suicide are:__\n* Brazil\n* Mexico\n* Republic of Korea\n* United States\n\n__Countries with constant but considerable suicides per year are:__\n* France\n* Germany\n* Kazakhstan\n* Sri Lanka\n* Thailand\n* Ukraine\n\n__Countries with first increasing then decreasing in suicide trend (no. of suicides in these countries are quite high as comparable to other countries):__\n* Japan\n* Russian Federation\n","72615fbd":"__Insights :-__\n\nA weak relation, as can be seen in the above graph; let's evaluate.\n\nX = GDP per Capita ($),\n\nY = Suicides number.\n\n__Y = 0.035*X + 2316__; meaning with __2316$__ increase in __gdp per capita__, there are additional __one__ suicide.\n\nNot a very good regresssion, as correaltion is very weak. \n\n","56f96f47":"__Insights :-__\n\n__According to the data, Males are more prone to commit suicide.__\n\nOver past __10__ years;\n\n\n__United States__, __Brazil__, __Mexico__, __Republic of Korea__ shows increasing trend in suicide rate;\n\n__Japan__ and __Russian Federation__ shows decreasing trend; whereas, __France__ shows constant trend in suicide rate.\n","e318ed75":"__Insights :-__\n\nCountries with highest __Number of Suicides__ are :\n* France\n* Japan\n* Russian Federation\n* United States","06ef76ab":" Based on above list let's check the record of last 10 years\n"}}