{"cell_type":{"36a12371":"code","dd3d1c67":"code","80054ede":"code","5298a8b1":"code","46ca55c8":"code","efe24cc7":"code","cf07b049":"code","7d38186f":"code","36071cc8":"code","d0434731":"code","ce37a0d5":"code","924ea539":"code","126f7f08":"code","4d3fa7c1":"code","b7a9e649":"code","d2e9c36f":"code","52828448":"code","6fbf08d2":"code","bbb1253d":"code","e44778ad":"code","c9cd1ca2":"code","fa6ba6de":"code","ada7686c":"code","b05a0d36":"code","ac1ac585":"code","38c3d4a2":"code","b768d69e":"code","305c8738":"code","2fbefb1b":"code","86e2b18d":"code","1db3d1e4":"code","691394ec":"code","0d352322":"markdown","c68a5dcd":"markdown","928262d8":"markdown","fe785304":"markdown","7e9bd2c9":"markdown","26809017":"markdown","589e22b1":"markdown","416795b4":"markdown","00220338":"markdown","fd5bb71e":"markdown","36c34a6b":"markdown","0f28fb1f":"markdown","bf96e175":"markdown","0358819a":"markdown","d8b8950b":"markdown"},"source":{"36a12371":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","dd3d1c67":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n\n\nimport plotly.graph_objects as go\nimport plotly.express as px","80054ede":"data = pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')\ndata.head()","5298a8b1":"data.info()","46ca55c8":"data['ObservationDate'] = pd.to_datetime(data['ObservationDate'])","efe24cc7":"#T\u00fcrkiye verilerinin al\u0131nmas\u0131\ndata_turkey = data[data['Country\/Region'] == 'Turkey'] \ndata_turkey = data_turkey.groupby([\"ObservationDate\"]).agg({\"Confirmed\":'sum',\"Recovered\":'sum',\"Deaths\":'sum'})\n#Hafta s\u00fctununun eklenmesi\ndata_turkey[\"WeekofYear\"]=data_turkey.index.weekofyear \ndata_turkey[\"Days Since\"]=(data_turkey.index-data_turkey.index[0])\ndata_turkey[\"Days Since\"]=data_turkey[\"Days Since\"].dt.days\n\ndata_turkey = data_turkey.reset_index()\ndata_turkey.head()","cf07b049":"fig = px.bar(data_turkey, x='ObservationDate', y='Confirmed',color='Confirmed', height=500)\nfig.update_layout(title='T\u00fcrkiyedeki vaka say\u0131s\u0131',\n                 xaxis_title=\"Tarih\",\n                 yaxis_title=\"Vaka Say\u0131s\u0131\")","7d38186f":"print(\"Tarihinde\",data_turkey[\"ObservationDate\"].iloc[-1], \" toplam vaka say\u0131s\u0131 \",data_turkey[\"Confirmed\"].iloc[-1])","36071cc8":"fig = px.bar(data_turkey, x='ObservationDate', y='Deaths',color='Deaths',template='ggplot2', height=500)\nfig.update_layout(title='T\u00fcrkiyedeki \u00f6l\u00fcmle sonu\u00e7lanan vaka say\u0131s\u0131',\n                 xaxis_title=\"Tarih\",\n                 yaxis_title=\"\u00d6l\u00fcmler\")","d0434731":"print(\"Tarihinde \",data_turkey[\"ObservationDate\"].iloc[-1], \" \u00f6l\u00fcmle sonu\u00e7lanan vaka say\u0131s\u0131 \",data_turkey[\"Deaths\"].iloc[-1])","ce37a0d5":"fig = px.bar(data_turkey, x='ObservationDate', y='Recovered',color='Recovered',template='plotly_white', height=500)\nfig.update_layout(title='T\u00fcrkiyede iyile\u015fen vaka say\u0131s\u0131',\n                 xaxis_title=\"Tarih\",\n                 yaxis_title=\"\u0130yile\u015fen vaka\")","924ea539":"print(\"Tarihiyle \",data_turkey[\"ObservationDate\"].iloc[-1], \" iyile\u015fen vaka say\u0131s\u0131 \",data_turkey[\"Recovered\"].iloc[-1])","126f7f08":"fig=go.Figure()\nfig.add_trace(go.Scatter(x=data_turkey['ObservationDate'], y=data_turkey[\"Confirmed\"],\n                    mode='lines+markers',\n                    name='Vaka'))\nfig.add_trace(go.Scatter(x=data_turkey['ObservationDate'], y=data_turkey[\"Recovered\"],\n                    mode='lines+markers',\n                    name='\u0130yile\u015fen vaka'))\nfig.add_trace(go.Scatter(x=data_turkey['ObservationDate'], y=data_turkey[\"Deaths\"],\n                    mode='lines+markers',\n                    name='\u00d6l\u00fcmle sonu\u00e7lanan vaka'))\nfig.update_layout(title=\"Toplam vs \u0130yile\u015fen vs \u00d6l\u00fcmle sonu\u00e7lanan T\u00fcrkiye'deki vaka say\u0131lar\u0131\",\n                 xaxis_title=\"Date\",yaxis_title=\"Vaka say\u0131s\u0131\",legend=dict(x=0,y=1,traceorder=\"normal\"))\nfig.show()","4d3fa7c1":"cases = 1\ndouble_days=[]\nC=[]\nwhile(1):\n    double_days.append(int(data_turkey[data_turkey[\"Confirmed\"]<=cases].iloc[[-1]][\"Days Since\"]))\n    C.append(cases)\n    cases=cases*2\n    if(cases<data_turkey[\"Confirmed\"].max()):\n        continue\n    else:\n        break\n        ","b7a9e649":"turkey_doubling=pd.DataFrame(list(zip(C,double_days)),columns=[\"Vaka Say\u0131s\u0131\",\"\u0130lk vakadan bu yana g\u00fcn\"])\nturkey_doubling[\"Vakalar\u0131 ikiye katlamak i\u00e7in gereken g\u00fcn say\u0131s\u0131\"]=turkey_doubling[\"\u0130lk vakadan bu yana g\u00fcn\"].diff().fillna(turkey_doubling[\"\u0130lk vakadan bu yana g\u00fcn\"].iloc[0])\nturkey_doubling.loc[turkey_doubling['Vaka Say\u0131s\u0131']==1, 'Vakalar\u0131 ikiye katlamak i\u00e7in gereken g\u00fcn say\u0131s\u0131'] = 0\nturkey_doubling.style.background_gradient(cmap='Reds')","d2e9c36f":"data_turkey['Active'] = data_turkey['Confirmed'] - data_turkey['Recovered'] - data_turkey['Deaths']\nfig=go.Figure(data=go.Pie(labels=['Aktif','\u0130yile\u015fen','\u00d6len'],\n                values=[data_turkey.iloc[data_turkey['ObservationDate'].idxmax(axis=1)]['Active'],\n                        data_turkey.iloc[data_turkey['ObservationDate'].idxmax(axis=1)]['Recovered'],\n                        data_turkey.iloc[data_turkey['ObservationDate'].idxmax(axis=1)]['Deaths']\n                       ]),layout={'template':'presentation'})\nfig.update_layout(title_text=\"COVID-19 T\u00fcrkiye Hasta Say\u0131lar\u0131 \"+data_turkey['ObservationDate'].max().strftime(\"%d-%b'%y\"))\nfig.show()","52828448":"columns=['Active','Recovered','Deaths']\nmeltedDF=pd.melt(data_turkey[columns[::-1]+['ObservationDate']],id_vars=['ObservationDate'], var_name='Value Type', value_name='Vaka oranlar\u0131')\nfig = px.bar(meltedDF, \n       x = \"Vaka oranlar\u0131\",\n       animation_frame = meltedDF['ObservationDate'].astype(str), \n       color = 'Value Type', \n       barmode = 'stack', height=400,\n       template='seaborn',\n       title='Zamana g\u00f6re vaka oranlar\u0131',\n       orientation='h')\nfig.show()","6fbf08d2":"data_turkey.head()","bbb1253d":"train_ml=data_turkey.iloc[:int(data_turkey.shape[0]*0.95)]\nvalid_ml=data_turkey.iloc[int(data_turkey.shape[0]*0.95):]\nmodel_scores=[]","e44778ad":"from sklearn.linear_model import LinearRegression\nlin_reg=LinearRegression(normalize=True)\n\nlin_reg.fit(np.array(train_ml[\"Days Since\"]).reshape(-1,1),np.array(train_ml[\"Confirmed\"]).reshape(-1,1))","c9cd1ca2":"prediction_valid_linreg=lin_reg.predict(np.array(valid_ml[\"Days Since\"]).reshape(-1,1))","fa6ba6de":"from sklearn.metrics import mean_squared_error,r2_score\nmodel_scores.append(np.sqrt(mean_squared_error(valid_ml[\"Confirmed\"],prediction_valid_linreg)))\nprint(\"Do\u011frusal Regresyon i\u00e7in K\u00f6k Ortalama Kare Hatas\u0131: \",np.sqrt(mean_squared_error(valid_ml[\"Confirmed\"],prediction_valid_linreg)))","ada7686c":"plt.figure(figsize=(11,6))\nprediction_linreg=lin_reg.predict(np.array(data_turkey[\"Days Since\"]).reshape(-1,1))\nlinreg_output=[]\nfor i in range(prediction_linreg.shape[0]):\n    linreg_output.append(prediction_linreg[i][0])\n\nfig=go.Figure()\nfig.add_trace(go.Scatter(x=data_turkey.index, y=data_turkey[\"Confirmed\"],\n                    mode='lines+markers',name=\"E\u011fitim verisine g\u00f6re vaka say\u0131s\u0131\"))\nfig.add_trace(go.Scatter(x=data_turkey.index, y=linreg_output,\n                    mode='lines',name=\"Do\u011frusal regresyon do\u011frusu\",\n                    line=dict(color='black', dash='dot')))\nfig.update_layout(title=\"Do\u011frusal regresyon tahmini\",\n                 xaxis_title=\"Tarih\",yaxis_title=\"Vaka say\u0131s\u0131\",legend=dict(x=0,y=1,traceorder=\"normal\"))\nfig.show()","b05a0d36":"from sklearn.preprocessing import PolynomialFeatures\npoly = PolynomialFeatures(degree = 10) ","ac1ac585":"train_poly=poly.fit_transform(np.array(train_ml[\"Days Since\"]).reshape(-1,1))\nvalid_poly=poly.fit_transform(np.array(valid_ml[\"Days Since\"]).reshape(-1,1))\ny=train_ml[\"Confirmed\"]","38c3d4a2":"linreg=LinearRegression(normalize=True)\nlinreg.fit(train_poly,y)","b768d69e":"prediction_poly=linreg.predict(valid_poly)\nrmse_poly=np.sqrt(mean_squared_error(valid_ml[\"Confirmed\"],prediction_poly))\nmodel_scores.append(rmse_poly)\nprint(\"Polinom Regresyonunda K\u00f6k Ortalama Kare Hatas\u0131: \",rmse_poly)","305c8738":"comp_data=poly.fit_transform(np.array(data_turkey[\"Days Since\"]).reshape(-1,1))\nplt.figure(figsize=(11,6))\npredictions_poly=linreg.predict(comp_data)\n\n\nfig=go.Figure()\nfig.add_trace(go.Scatter(x=data_turkey.index, y=data_turkey[\"Confirmed\"],\n                    mode='lines+markers',name=\"E\u011fitim verisine g\u00f6re vaka say\u0131s\u0131\"))\nfig.add_trace(go.Scatter(x=data_turkey.index, y=predictions_poly,\n                    mode='lines',name=\"Do\u011frusal regresyon do\u011frusu\",\n                    line=dict(color='black', dash='dot')))\nfig.update_layout(title=\"Polinom regresyon tahmini\",\n                 xaxis_title=\"Tarih\",yaxis_title=\"Vaka say\u0131s\u0131\",\n                 legend=dict(x=0,y=1,traceorder=\"normal\"))\nfig.show()","2fbefb1b":"from sklearn.svm import SVR","86e2b18d":"train_ml=data_turkey.iloc[:int(data_turkey.shape[0]*0.95)]\nvalid_ml=data_turkey.iloc[int(data_turkey.shape[0]*0.95):]","1db3d1e4":"#SVR Modelin olu\u015fturulmas\u0131\nsvm=SVR(C=1,degree=5,kernel='poly',epsilon=0.01)\n\n#E\u011fitim verisine model uydurma\nsvm.fit(np.array(train_ml[\"Days Since\"]).reshape(-1,1),np.array(train_ml[\"Confirmed\"]).reshape(-1,1))\n\nprediction_valid_svm=svm.predict(np.array(valid_ml[\"Days Since\"]).reshape(-1,1))\nmodel_scores.append(np.sqrt(mean_squared_error(valid_ml[\"Confirmed\"],prediction_valid_svm)))\nprint(\"SVR i\u00e7in K\u00f6k Ortalama Kare Hatas\u0131: \",np.sqrt(mean_squared_error(valid_ml[\"Confirmed\"],prediction_valid_svm)))","691394ec":"plt.figure(figsize=(11,6))\nprediction_svm=svm.predict(np.array(data_turkey[\"Days Since\"]).reshape(-1,1))\nfig=go.Figure()\n\nfig.add_trace(go.Scatter(x=data_turkey.index, y=data_turkey[\"Confirmed\"],\n                    mode='lines+markers',name=\"E\u011fitim verisine g\u00f6re vaka say\u0131s\u0131\"))\nfig.add_trace(go.Scatter(x=data_turkey.index, y=prediction_svm,\n                    mode='lines',name=\"SVR do\u011frusu\",\n                    line=dict(color='black', dash='dot')))\nfig.update_layout(title=\"SVR'ye g\u00f6re vaka tahmini\",\n                 xaxis_title=\"Tarih\",yaxis_title=\"Vaka say\u0131s\u0131\",legend=dict(x=0,y=1,traceorder=\"normal\"))\nfig.show()","0d352322":"# Pasta grafi\u011fi","c68a5dcd":"## \u00d6l\u00fcmle sonu\u00e7lanan vakalar\u0131n \u00e7ubuk grafi\u011fi","928262d8":"# T\u00fcrkiyede COVID-19","fe785304":"Onaylanm\u0131\u015f vakalar\u0131n e\u011filiminin do\u011frusal olmad\u0131\u011f\u0131 g\u00f6r\u00fclebildi\u011finden bu modelin pek do\u011fru tahminlerde bulunmad\u0131\u011f\u0131 sonucuna vard\u0131k","7e9bd2c9":"# Zaman \u00e7izelgesi","26809017":"# 3.Support Vector Regresyonu","589e22b1":"# 2.Polinom Regresyonu","416795b4":"# Vakalar\u0131n ikiye katlanmas\u0131yla ge\u00e7en s\u00fcre","00220338":"# Veri analizi","fd5bb71e":"## Da\u011f\u0131l\u0131m grafi\u011fi","36c34a6b":"# G\u00f6rselle\u015ftirme","0f28fb1f":"## \u0130yile\u015fen vakalar\u0131n \u00e7ubuk grafi\u011fi","bf96e175":"# 1.Do\u011frusal Regresyon","0358819a":"## Vaka say\u0131lar\u0131n\u0131n \u00e7ubuk grafi\u011fi","d8b8950b":"# Tahminler"}}