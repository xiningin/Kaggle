{"cell_type":{"a2d8bb82":"code","6486b28d":"code","ece65c72":"code","0e201f68":"code","7f1e905b":"code","f1a4fa7e":"code","5a25a493":"code","e6f0805c":"code","e6762100":"code","8b791c82":"code","65d6faf4":"code","24edf517":"code","250b50c4":"code","07e49923":"code","1bed583d":"code","d45f5338":"code","1108445b":"code","74a3318b":"code","a125e9e6":"code","fedb1c70":"code","78680589":"code","ae119eaa":"code","e8939dcb":"code","596e876d":"markdown","64b016d6":"markdown","71194c01":"markdown","6e161958":"markdown","f260b166":"markdown","c51d4002":"markdown"},"source":{"a2d8bb82":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","6486b28d":"#carregando a base em dataframe\n\nbike_london = pd.read_csv('\/kaggle\/input\/london-bike-sharing-dataset\/london_merged.csv')\n","ece65c72":"#Verificando os tamanhos ds dataframes\nprint('bike compartilhadas:', bike_london.shape)","0e201f68":"#Visualisando os dados carregados\nbike_london.head(10)","7f1e905b":"#Verificando dados nulos na base\nbike_london.isnull().any()","f1a4fa7e":"#Visualisando as colunas carregadas no dataFrame\nbike_london.info()\n","5a25a493":"# Conver\u00e7\u00e3o em Data campo Timestamp\nbike_london['timestamp']=pd.to_datetime(bike_london['timestamp'])\nbike_london.info()","e6f0805c":"#Criando coluna Data, Hora, Va\nbike_london['data']=pd.to_datetime(bike_london['timestamp'].dt.strftime('%Y-%m-%d'))\nbike_london['hora']=pd.to_timedelta(bike_london['timestamp'].dt.strftime('%H:%M:%S'))\nbike_london['ano'] =pd.DatetimeIndex(bike_london['timestamp']).year\nbike_london['mes_valor'] = pd.DatetimeIndex(bike_london['timestamp']).month\nbike_london['mes_ano']=bike_london['timestamp'].dt.strftime('%b-%Y')\n\nbike_london.info()","e6762100":"#Analise Descritiva da Base -  Visualiza\u00e7\u00e3o dos Dados do dataFrame bike_london ap\u00f3s a inclus\u00e3o das colunas\nbike_london.head()","8b791c82":"#Analise Descritiva da Base - ALUGU\u00c9IS totais POR ANO_mes\nbike_london.groupby(['mes_ano']).sum()['cnt'].T","65d6faf4":"# #Analise Descritiva da Base  - 10 menores quantidades de bicicletas alugadas\nbike_london.nsmallest(10,'cnt')","24edf517":"#Analise Descritiva da Base  - 10 maiores quantidades de bicicletas alugadas\nbike_london.nlargest(10,'cnt')\n","250b50c4":"#Analise Descritiva da Base  -  histograma da quantidade de bicicletas alugadas\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.figure(figsize=[7,5])\nplt.hist(bike_london['cnt'], color='red', bins=6)\nplt.title('Histograma da quantidade de bicicletas alugadas')\nplt.show()","07e49923":"#Analise Descritiva da Base - Boxblot do total de Bicicletas alugadas  ano\nplt.figure(figsize=(10,15))\nsns.boxplot(bike_london['ano'], bike_london['cnt'])\nplt.title('Bicicletas alugadas  ano')\n#plt.xticks(rotation=65)\nplt.locator_params(axis='y',nbins=3)\nplt.show()","1bed583d":"#Quantidade de Bicicletas Alugadas por Ano\nbike_london_ano = bike_london.groupby('ano').agg('sum')\n\n#reset_index\nbike_london_ano.reset_index(inplace=True)\n#Criando um dataframe com as tres primeiras colunas\nbike_london_ano=bike_london_ano.iloc[:, 0:2].copy()\nbike_london_ano.head()","d45f5338":"#Grafico com o aluguel por ano\n\n#Aumentando a \u00e1rea do grafico\nfig, ax=plt.subplots(figsize=(14,7))\n\n#Criadno um grafico de barras com o seaborn\nsns.barplot(y='cnt',x='ano', data=bike_london_ano )\n\n#Titulos\nplt.title('Quantidade de Bicicletas alugadas por m\u00eas', fontsize=24)\nplt.ylabel('Quantidade',fontsize=24)\nplt.xlabel('Ano',fontsize=24)","1108445b":"#Quantidade de Bicicletas Alugadas por M\u00eas\nbike_london_mes = bike_london.groupby('mes_ano').agg('sum')\n#reset_index\nbike_london_mes.reset_index(inplace=True)\n#Criando um dataframe com as tres primeiras colunas\nbike_london_mes=bike_london_mes.iloc[:, 0:2].copy()\nbike_london_mes.head()","74a3318b":"#Analise Descritiva da Base  -  Bicicletas alugadas por mes ano\nplt.figure(figsize=(30,5))\nsns.pointplot(x='mes_ano',y='cnt',data = bike_london_mes, color='blue',)\nplt.title('Quantidade de Bicicletas alugadas por m\u00eas')\nplt.grid(True, color='grey')","a125e9e6":"#Analise Descritiva da Base  - Correla\u00e7\u00e3o entre Bicicletas alugadas e temperatura ambiente e sensa\u00e7\u00e3o termica\n\nplt.figure(figsize=[20,10])\nplt.title('Correla\u00e7\u00e3o entre a Quantidade de Bicicletas alugadas por temperatura ambiente')\nsns.scatterplot(bike_london['t1'],bike_london['cnt'],\n                style=bike_london['ano'],hue=bike_london['ano']\n               )\nplt.figure(figsize=[20,10])\nplt.title('Correla\u00e7\u00e3o entre a Quantidade de Bicicletas alugadas por Sensa\u00e7\u00e3o Termica')\nsns.scatterplot(bike_london['t1'],bike_london['cnt'],\n                style=bike_london['ano'],hue=bike_london['ano']\n               )","fedb1c70":"# Verificando correla\u00e7\u00e3o das variaveis da base\nbike_london.corr()","78680589":"#modelo de regress\u00e3o multipla \nimport statsmodels.formula.api as sm\nreg = sm.ols(formula='cnt~t1+t2+hum+wind_speed+weather_code+is_holiday+is_weekend+season+ano+mes_valor', data=bike_london).fit()\nprint(reg.summary())\n","ae119eaa":"#Analise dos Residuos do modelo\ncnt_pre = reg.predict()\nres = bike_london['cnt'] - cnt_pre\n\nplt.hist(res, color='orange', bins=15)\nplt.title('Histograma dos res\u00edduos da regress\u00e3o')\nplt.show()","e8939dcb":"plt.scatter(y=res, x= cnt_pre, color='green', s=50, alpha=.6)\nplt.hlines(y=0, xmin=-10, xmax=3000, color='orange')\nplt.ylabel('$\\epsilon = cnt - \\hat{y}$ - Res\u00edduos')\nplt.xlabel('$\\hat{y}$ ou $E(y)$ - Predito')\nplt.show()","596e876d":"# Criando campos data, ano, hora, mes\nPara um melhor detalhamento da base de aluguel de bicicletas, criaremos as colunas ano,hora,mes,data para melhor entedimento dos alugueis","64b016d6":"# Tratamentamento Campo Timestamp\nConforme demonstrado nos dados das colunas do dataframe o campo \"timestamp\" est\u00e1 carregado como tipo string, assim para avaliarmos o aluguel de bicicletas por per\u00edodo, ser\u00e1 necess\u00e1rio a convers\u00e3o da coluna \"timestamp\" em tipo DATA.","71194c01":"# Gerando modelo de regress\u00e3o com vari\u00e1vel resposta quantidade de bikes alugadas","6e161958":"# An\u00e1lise descritiva da Base","f260b166":"# Hire bikes in London with Santander Cycles\n\nYou can hire a bike from as little as \u00a32. Simply download our Santander Cycles app or go to any docking station terminal with your bank card and touch the screen to get started.","c51d4002":"# Analise Base de Aluguel de Bicicletas em Londres\nA an\u00e1lise pretende encontrar os principais caracteristicas dos alugu\u00e9is de bicicletas compartilhadas em Londes - Inglaterra de 15. Assim, atrav\u00e9s de uma analise descritiva da base, ser\u00e3o demonstradas as principais vari\u00e1veis da base, com o objetivo modelo que ajude a entender o aluguel de bicicletas em Londres.\n\n"}}