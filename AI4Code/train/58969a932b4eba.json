{"cell_type":{"50a747cb":"code","64281ede":"code","dc788ff4":"code","303fb315":"code","71c95011":"code","ce87c233":"code","214bccad":"code","8b202e1b":"code","c055cf7d":"code","ce29db85":"code","bca8096d":"code","e97d7604":"code","5fc94e49":"code","72221b66":"code","594e4040":"code","6ca51e2f":"code","ab6681f6":"code","2270e56b":"code","cf611bb3":"code","8c8f8a73":"code","ace4a848":"code","93a6f5c9":"code","b1377cf9":"code","b84ae3f3":"code","b43cb51e":"code","d97ca06b":"code","bfdfc5ff":"code","4cac7705":"code","a19b8f9f":"code","552e17c7":"code","2fc2890e":"markdown","5627e2ff":"markdown","91e5dc3b":"markdown","747243a5":"markdown","a43394ce":"markdown","79d991aa":"markdown","7addd5ea":"markdown","d24ed73d":"markdown","b33762dd":"markdown","2c5f9512":"markdown","c0867575":"markdown","47063dab":"markdown","442a9a0f":"markdown","b4bdf895":"markdown","f69b3196":"markdown","c2485b22":"markdown","f3e61d1c":"markdown","e23720f9":"markdown","f97aca6a":"markdown","b7109e81":"markdown","4b95706d":"markdown","eaecdf4c":"markdown","b3f96158":"markdown","dbbb3444":"markdown","a9695952":"markdown"},"source":{"50a747cb":"import pandas as pd\nstore = pd.read_csv('..\/input\/store-data\/Store.csv')","64281ede":"store.info()\nstore.head()","dc788ff4":"store.isnull().sum()","303fb315":"store['local_tv'] = store['local_tv'].fillna(store['local_tv'].mean())","71c95011":"store.info()","ce87c233":"store = store.drop('Unnamed: 0', axis = 1)","214bccad":"store.head()","8b202e1b":"store.describe()","c055cf7d":"store.event.unique()","ce29db85":"store.groupby(['event'])['revenue'].describe()","bca8096d":"store = pd.get_dummies(store)","e97d7604":"store.head(10)","5fc94e49":"store.info()","72221b66":"store.corr()","594e4040":"store.corr()[['revenue']].sort_values('revenue',ascending=False)","6ca51e2f":"import seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","ab6681f6":"sns.regplot(x = 'local_tv', y = 'revenue', data = store)","2270e56b":"sns.regplot(x = 'person', y = 'revenue', data = store)","cf611bb3":"sns.regplot(x = 'instore', y = 'revenue', data = store)","8c8f8a73":"from sklearn.linear_model import LinearRegression","ace4a848":"# Build model\nmodel=LinearRegression()","93a6f5c9":"# Create independent variable x and denpendent variable y.\nx = store[['local_tv','person','instore']]\ny = store['revenue']","b1377cf9":"# Model fitting\nmodel.fit(x,y)","b84ae3f3":"# Model intercept\nmodel.intercept_","b43cb51e":"# Model independent variables coefficients\nmodel.coef_","d97ca06b":"score=model.score(x,y)\npredictions=model.predict(x)\nerror=predictions-y\n\nrmse=(error**2).mean()**.5\nmae=abs(error).mean()\n\nprint(rmse)\nprint(mae)","bfdfc5ff":"from statsmodels.formula.api import ols","4cac7705":"# This step is similar to linear regression model\nx=store[['local_tv','person','instore']]  \ny=store['revenue'] ","a19b8f9f":"model=ols('y~x',store).fit()","552e17c7":"print(model.summary())","2fc2890e":"Now I have finished all the data cleaning. It's time to do some statistics using describe(). First, I will apply the describe() to the whole dataframe.","5627e2ff":"# P&G Python Linear Regression Model:  the marketing channel that has the greatest impact on sales\n\n### Data set Description\n\nAssume that a P&G marketing director in charge of media placement, event promotion wants to find the channel that has the greatest impact on sales among the marketing channels currently in use.Therefore, in the case of limited resources, it can be targeted delivery for the business, so that sales to achieve greater growth.\n\nThe aim of the case study is to find the relationship between revenue and maketing channel investment in a linear regression form.\n\nThe goal is to get equation which is similar to this:\n\n**y = intercept + coef1\\*x1 + coef2\\*x2......**\n\n### Terminology Understanding\n\n[MAE](https:\/\/www.statisticshowto.com\/absolute-error\/)\\\n[RMSE](https:\/\/www.statisticshowto.com\/probability-and-statistics\/regression-analysis\/rmse-root-mean-square-error\/)\\\n[OLS](https:\/\/www.xlstat.com\/en\/solutions\/features\/ordinary-least-squares-regression-ols)","91e5dc3b":"It will be helpful to see some trend using regression plot here.","747243a5":"Now it's time to delete column 'Unnamed: 0'.","a43394ce":"**Some variables description**\n\n**reach:** tweet times (Wechat tweet or Twitter)\\\n**local_tv:** local TV advertising investment\\\n**online:** online advertising investment\\\n**instore:** in stores investment, for example posters and displays\\\n**person:** store sales staff input\\\n**event:** promotional events","79d991aa":"Also, it is needed to check if I successfully conducted the step above.","7addd5ea":"All 4 event sub-types have become 4 new vaiables, and '1' represents 'yes', '0'represent 'no'. Can also take a look at info(), will see the data type is changed from object to uint8.","d24ed73d":"### Correlation and Visualisation\n\nNow, the dataframe is completed, it's time to do some correlation!","b33762dd":"I have already produced all needed parameters for the model. To be able to get the best model as we can, here I propose to do an extra thing - improve the model. How can we improve the model? The only thing we will need to do is to change some information, it could be:\n\n* when I was filling all null values, I used mean values, and now I could change the mean values to median values and see if MAE and RMSE are going to decrease.\n* another way is add a new variable to x.\n\nThat's the basic idea, but I will not include the process here as it is just repeating work. The point is understand the core concept. However I am going to use another method to produce a linear regression model, here I'm using OLS.","2c5f9512":"Let's take a look at how the dataframe is changed now.","c0867575":"From the results above, I found that the column 'local_tv' included some missing values, so I considered using the 'local_tv' mean values to fill the null. Another thing I noticed was column'Unnamed: 0' wasn't needed, so I planned to delete the column. \n\nFirst, I want to check how many null values take place in each column.","47063dab":"Similiarly, I am going to check if the \"drop\" was successful.","442a9a0f":"From the result above, I noticed:\n\n* special event earned the most revenue averagely\n* cobranding is the most fequent event\n\nTime to convert 'event' to dummy variable.","b4bdf895":"### Model and Business Interpretation\n\nNow, I am going to produce the final equation.\n\nrevenue = -52880 + 1.75*local_tv + 2050*person + 4.09*instore\n\n**The following conclusions can be drawn:**\n\n* Every 1 \u00a3 increase in TV advertising investment, you can get 1.75 \u00a3 of revenue in return.\n* The revenue return of 4.09 \u00a3 can be realized for every 1 \u00a3 increase in in-store poster investment.\n* Every 1 sale staff increased, you can get 2050 \u00a3 of revenue in return.\n* Constant collection of data and the addition of new variables can improve the control of the overall marketing resource input.","f69b3196":"At this stage, I can point out some important information:\n\nOnly the column 'event' is categorical column. I will need to convert it to dummy vaiable later.\n\n\nNow, I will check what are the unique values in 'event' column.","c2485b22":"### Linear Regression modeling","f3e61d1c":"I am also interested in the renenue under these four types of event.","e23720f9":"### Import library and data","f97aca6a":"### Understand the dataframe\n* Dataframe info\n* Data cleaning and manipulation \n* Basic statistics","b7109e81":"### Model Evaluation and Improve","4b95706d":"The result shows there are 5 null values in 'local_tv' column. Now, I start to fill the null values.","eaecdf4c":"From the regression plot above, we can take a overall look at how each point distributed and how closely it is to the linear regression. While there are many outliers, but overall the points focus on the center. ","b3f96158":"Very straightforward, and you can see the output intercept and coefficients are same as the linear regression model. Plus, you get more other parameters to help you understand the model. For example R-squared, AIC, BIC and other important tests.","dbbb3444":"Now, it is clear that local_tv,person,instore are mostly correlated to revenue.","a9695952":"In order to see a clear correlation amang revenue and all the other vaiables, I will use the following code:"}}