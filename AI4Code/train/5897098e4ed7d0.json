{"cell_type":{"aede5527":"code","a0477178":"code","a2248c90":"code","9d2c666e":"code","b86b2682":"code","473cec8f":"code","35c2b8fa":"code","8c6287e8":"code","f5a76093":"code","230b5a8a":"code","f82096d1":"code","2a522435":"code","7a4dcce5":"code","d6df466c":"code","362ce28f":"markdown","0a8264e9":"markdown","e61ec710":"markdown","05237a20":"markdown","fcc20541":"markdown","f39cbaa2":"markdown","1fd60714":"markdown"},"source":{"aede5527":"# \u5bfc\u5165\u5de5\u5177\u5305\nimport numpy as np \nimport pandas as pd \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nfrom matplotlib import pyplot as plt\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots","a0477178":"# \u5bfc\u5165\u6570\u636e\ndata=pd.read_csv(\"\/kaggle\/input\/omicron-covid19-variant-daily-cases\/covid-variants.csv\")","a2248c90":"#\u67e5\u770b\u524d\u5341\u6761\u6570\u636e\ndata.head(10)","9d2c666e":"#\u67e5\u770b\u540e\u5341\u6761\u6570\u636e\ndata.tail(10)","b86b2682":"#\u770b\u770bvariant\u6709\u591a\u5c11\u4e2a\u53d8\u91cf\u79cd\u7c7b\ndata[\"variant\"].unique()","473cec8f":"data=data[data[\"variant\"]!=\"non_who\"]","35c2b8fa":"data[\"variant\"].unique()","8c6287e8":"selection_zip=list(zip(data['location'],data['date']))\nc=-1\nold=\"\"\nselection_col=[]\nfor x in selection_zip:\n    if (x!=old):\n        old=x\n        c+=1\n    selection_col.append(c)\ndata[\"selection_col\"]=selection_col","f5a76093":"data","230b5a8a":"omicron=data[data[\"variant\"]==\"Omicron\"]\ndelta=data[data[\"variant\"]==\"Delta\"]\nothers=data[(data[\"variant\"]!=\"Delta\") & (data[\"variant\"]!=\"Omicron\")]","f82096d1":"omicron_global=omicron.groupby(\"date\").sum()\nomicron_global[\"date\"]=omicron_global.index\nomicron_global=omicron_global[omicron_global[\"num_sequences\"]>0]\n\ndelta_global=delta.groupby(\"date\").sum()\ndelta_global[\"date\"]=delta_global.index\ndelta_global=delta_global[delta_global[\"perc_sequences\"]>0]\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_global[\"date\"],y=omicron_global[\"num_sequences\"],mode='lines',line_width=5,name=\"Omicron num_sequences\"))\nfig.add_trace(go.Scatter(x=delta_global[\"date\"],y=delta_global[\"num_sequences\"],mode='lines',line_width=5,name=\"Delta num_sequences\"))\nfig.update_layout(title='\u5404\u56fd\u5965\u7c73\u514b\u620e\u548c\u5fb7\u513f\u5854\u75c5\u6bd2\ud83e\udda0\u65e5\u786e\u8bca\u91cf')\nfig.show()","2a522435":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=omicron_global['date'],y=np.log1p(omicron_global[\"num_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Omicron num_sequences logaritm\"))\nfig.add_trace(go.Scatter(x=delta_global['date'],y=np.log1p(delta_global[\"num_sequences\"]),mode='lines+markers',line_width=5,marker_size=10,name=\"Delta num_sequences  logaritm\"))\nfig.update_layout(title='\u7eb5\u5750\u6807\u53d6Log')\nfig.show()","7a4dcce5":"ax=data.groupby(\"date\").sum().plot.bar(y=\"num_sequences_total\",figsize=(25,5), fontsize=15,legend=False)\ntitle=plt.suptitle(\"Title\",fontsize=20)","d6df466c":"\nomicron_top=omicron[omicron[\"num_sequences_total\"]>=300]\nfor country in np.unique(omicron_top[\"location\"]):\n    tmp=omicron_top[omicron_top[\"location\"]==country]\n    latest=tmp.iloc[-1]\n    if (latest[\"date\"]>=\"2021-12-27\"):\n        omicron_top=omicron_top.drop((tmp[tmp[\"date\"]<latest[\"date\"]].index))\n        continue\n    omicron_top=omicron_top.drop((tmp.index))\nomicron_top=omicron_top.sort_values(\"perc_sequences\",ascending=True)\n\nindexes=[delta[delta[\"selection_col\"]==x] for x in omicron_top[\"selection_col\"]]\ndelta_top=pd.DataFrame(np.array(indexes).reshape(omicron_top.shape[0],7),columns=delta.columns)\n\n\ny=np.arange(omicron_top.shape[0])\n\nfig, axes = plt.subplots(ncols=2, sharey=True,figsize=(25, 15))\naxes[0].barh(y, omicron_top[\"perc_sequences\"], align='center', color='mediumturquoise', zorder=10)\naxes[0].set_title('Omicron sequences (%)',fontsize=30)\naxes[1].barh(y, delta_top[\"perc_sequences\"], align='center', color='orange', zorder=10)\naxes[1].set_title('Delta sequences (%)',fontsize=30)\n\n\naxes[0].invert_xaxis()\naxes[0].tick_params(axis=\"both\", labelsize=25)\naxes[0].set(yticks=y, yticklabels=omicron_top[\"location\"])\naxes[1].tick_params(axis=\"both\", labelsize=25)\naxes[0].axvline(0,zorder=10,linewidth=5,color='black')\nfor ax in axes.flat:\n    ax.margins(0.03)\n    ax.grid(True)\n\nfig.tight_layout()\nfig.subplots_adjust(wspace=0)\nplt.show()\n","362ce28f":"\u5220\u9664\u4e86\"non_who\"","0a8264e9":"# According to the last trustable data, how much are widely diffused the delta and the omicron variants? ","e61ec710":"\u53d6log","05237a20":"<h1 style='background:#b4edcf; border:0; color:black'><center>\u5965\u79d8\u514b\u620e\u4e0e\u5fb7\u513f\u5854\u75c5\u6bd2\u8d8b\u52bf\u5206\u6790<\/center><\/h1> ","fcc20541":"# \u5404\u56fd\u5965\u7c73\u514b\u620e\u548c\u5fb7\u513f\u5854\u75c5\u6bd2\ud83e\udda0\u65e5\u786e\u8bca\u91cf","f39cbaa2":"# \u6570\u636e\u5bfc\u5165\u548c\u8bfb\u53d6","1fd60714":"# \u5404\u56fd\u65e5\u68c0\u6d4b\u91cf"}}