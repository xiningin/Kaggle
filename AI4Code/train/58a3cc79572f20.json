{"cell_type":{"b5115435":"code","883e21ec":"code","56ddaa5e":"code","71530ad4":"code","7de10db3":"code","0fc6a1d2":"code","0967eae1":"code","2c56b4f7":"code","38e1d8fe":"code","b9533a58":"code","3297d0c7":"code","8850f4a9":"code","76ef3789":"code","aa4d5d56":"code","3a9506f1":"code","c3f0a626":"code","b24a3640":"code","e32c0f0c":"code","2ded65a5":"code","c574c143":"code","db55e6f9":"code","3b281e8b":"code","12404f73":"code","7b2e0791":"code","4e00074d":"code","845ecdb9":"code","4a93f653":"code","94748adf":"code","508a2d18":"code","56ca571f":"markdown","bc75b1d4":"markdown","bff96cf1":"markdown","fa186d2e":"markdown","3795e15b":"markdown","ced26906":"markdown","c8272cb5":"markdown","3d28ac76":"markdown","a4c9f174":"markdown","af61ab1c":"markdown","625d1242":"markdown","e474bbfc":"markdown","58997ac0":"markdown","34453472":"markdown","29fb207a":"markdown","17e8615f":"markdown","f0622d34":"markdown","282bd1b0":"markdown","8cbb46ff":"markdown","a076724a":"markdown","e04d5bc1":"markdown","80f433cc":"markdown","4aa17a1e":"markdown","1bc42d77":"markdown","86cd8fe9":"markdown","6d8032a8":"markdown","66619af8":"markdown","492907ca":"markdown","bbefa1d5":"markdown","d4e5d790":"markdown","426c1a78":"markdown","e9b68d78":"markdown","c8e87d29":"markdown"},"source":{"b5115435":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt","883e21ec":"district_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/district_level_latest.csv\")\nstate_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/state_level_latest.csv\")\ncountry_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/nation_level_daily.csv\")\npatient_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/patients_data.csv\")\ntests_state_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/tests_state_wise.csv\")","56ddaa5e":"district_data = district_data.drop(['District_Notes','Last_Updated'],axis=1)\ndistrict_data.info()","71530ad4":"# Drop the column of Totals\nstate_data = state_data.drop(0)\n\n# Plot the Confirmed, Recovered, Active and Deaths on the same plot using matplotlib\nplt.figure(figsize=(12,10))\nx = state_data['State_code']\ny = state_data['Confirmed']\nplt.plot(x,y,marker='o',label=\"Confirmed\")\ny = state_data['Recovered']\nplt.plot(x,y,marker='o',label=\"Recovered\")\ny = state_data['Active']\nplt.plot(x,y,marker='o',label=\"Active\")\ny = state_data['Deaths']\nplt.plot(x,y,marker='o',label=\"Deaths\")\nplt.legend();","7de10db3":"state_top20 = state_data.nlargest(20,'Confirmed')\nstate_top20","0fc6a1d2":"# Position of bars on x-axis\nind = np.arange(20)\n\n# Width of a bar \nwidth = 0.4\n\nplt.figure(figsize=(15,12))\nx = state_top20['State_code']\ny = state_top20['Confirmed']\nplt.bar(ind+width\/2,y,align='edge',width=width,label=\"Confirmed\")\ny = state_top20['Recovered']\nplt.bar(ind+width,y,align='edge',width=width,label=\"Recovered\")\ny = state_top20['Active']\nplt.bar(ind+3*width\/2,y,align='edge',width=width,label=\"Active\")\ny = state_top20['Deaths']\nplt.bar(ind+2*width,y,align='edge',width=width,label=\"Deaths\")\n\nplt.xticks(ind + 3*width\/2, x)\nplt.legend();\n","0967eae1":"district_top10 = district_data.nlargest(10,'Confirmed')\ndistrict_top10","2c56b4f7":"# Position of bars on x-axis\nind = np.arange(10)\n\n# Width of a bar \nwidth = 0.4\n\nplt.figure(figsize=(15,12))\nx = district_top10['District']\ny = district_top10['Confirmed']\nplt.bar(ind+width\/2,y,align='edge',width=width,label=\"Confirmed\")\ny = district_top10['Recovered']\nplt.bar(ind+width,y,align='edge',width=width,label=\"Recovered\")\ny = district_top10['Active']\nplt.bar(ind+3*width\/2,y,align='edge',width=width,label=\"Active\")\ny = district_top10['Deceased']\nplt.bar(ind+2*width,y,align='edge',width=width,label=\"Deseased\")\n\nplt.xticks(ind + 3*width\/2, x)\nplt.legend()","38e1d8fe":"tests = tests_state_data.loc[tests_state_data['Updated On'] == '06\/08\/2020']\ntests = tests[['State','Total Tested','Positive']]\ntests = tests.dropna()\ntests.info()","b9533a58":"import plotly.express as px\n\nfig = px.scatter(tests, x=\"Total Tested\", y=\"Positive\", text=\"State\", log_x=True, log_y=True, size_max=100, color=\"Positive\")\nfig.update_traces(textposition='top center')\nfig.update_layout(title_text='Life Expectency', title_x=0.5)\nfig.show() \n# Hover over the image to see the details of each state","3297d0c7":"import geopandas as gpd\n\nfp = r'..\/input\/indiageofiles\/india-polygon.shp'\nmap_df = gpd.read_file(fp)\nmap_df.rename(columns={'st_nm': 'State'},inplace=True)\nmap_df.head() #check the head of the file","8850f4a9":"data_merge = map_df.merge(state_data, on = 'State', how = 'left')\ndata_merge.head()","76ef3789":"fig, ax = plt.subplots(1, figsize=(10, 10))\nax.axis('off')\nax.set_title('Statewise Confirmed Cases', fontdict={'fontsize': '25', 'fontweight' : '10'})\n\n# plot the figure\ndata_merge.plot(column='Confirmed',cmap='YlOrRd', linewidth=0.8, ax=ax, edgecolor='0', legend=True,markersize=[39.739192, -104.990337]);","aa4d5d56":"fig, ax = plt.subplots(1, figsize=(10, 10))\nax.axis('off')\nax.set_title('Statewise Recovered Cases', fontdict={'fontsize': '25', 'fontweight' : '10'})\ndata_merge.plot(column='Recovered',cmap='Greens', linewidth=0.8, ax=ax, edgecolor='0', legend=True,markersize=[39.739192, -104.990337]);\n","3a9506f1":"fig, ax = plt.subplots(1, figsize=(10, 10))\nax.axis('off')\nax.set_title('Statewise Deaths', fontdict={'fontsize': '25', 'fontweight' : '10'})\ndata_merge.plot(column='Deaths',cmap='Blues', linewidth=0.8, ax=ax, edgecolor='0', legend=True,markersize=[39.739192, -104.990337]);","c3f0a626":"import branca.colormap as cm\nimport folium\nstates_daily_data = pd.read_csv(\"\/kaggle\/input\/covid19-corona-virus-india-dataset\/state_level_daily.csv\")\nstates_daily_data.head()","b24a3640":"states =states_daily_data.drop(['State'],axis=1)\nstates = states.rename(columns={'State_Name': 'State'})\nstates_map = states.merge(map_df,on='State')\nstates_map.head()","e32c0f0c":"states_df = states_map[states_map.Confirmed != 0]\nstates_df.info()","2ded65a5":"states_df['log_Confirmed'] = np.log10(states_df['Confirmed'])","c574c143":"states_df.head()","db55e6f9":"states_df['date'] = pd.to_datetime(states_df['Date']).astype(int) \/ 10**9\nstates_df['date'] = states_df['date'].astype(int).astype(str)","3b281e8b":"states_df.head()","12404f73":"states_df = states_df[['State', 'date', 'log_Confirmed', 'geometry']]\nstates_df = states_df.dropna() #Drop all the rows with any null values\nstates_df.info()","7b2e0791":"states_df = states_df.sort_values(['State','date']).reset_index(drop=True)\nstates_df.head()","4e00074d":"max_colour = max(states_df['log_Confirmed'])\nmin_colour = min(states_df['log_Confirmed'])\ncmap = cm.linear.YlOrRd_09.scale(min_colour, max_colour)\nstates_df['colour'] = states_df['log_Confirmed'].map(cmap)","845ecdb9":"states_list = states_df['State'].unique().tolist()\nstates_idx = range(len(states_list))\n\nstyle_dict = {}\nfor i in states_idx:\n    states = states_list[i]\n    result = states_df[states_df['State'] == states]\n    inner_dict = {}\n    for _, r in result.iterrows():\n        inner_dict[r['date']] = {'color': r['colour'], 'opacity': 0.7}\n    style_dict[str(i)] = inner_dict","4a93f653":"states_geom_df = states_df[['geometry']]\nstates_geom_gdf = gpd.GeoDataFrame(states_geom_df)\nstates_geom_gdf = states_geom_gdf.drop_duplicates().reset_index()","94748adf":"from folium.plugins import TimeSliderChoropleth\n\nslider_map = folium.Map(zoom_start=4,location=[21, 78])\n\n_ = TimeSliderChoropleth(\n    data=states_geom_gdf.to_json(),\n    styledict=style_dict,\n\n).add_to(slider_map)\n\n_ = cmap.add_to(slider_map)\ncmap.caption = \"Log of number of confirmed cases\"\nslider_map.save(outfile='Covid19_Map_India.html')\n","508a2d18":"from IPython.display import IFrame\nIFrame(src='.\/Covid19_Map_India.html', width=700, height=600)\n\n#Slide the bar to see the Covid-19 spread across Indian states from 14 March'20 to 6 August'20","56ca571f":"### Defining a colour map in terms of the log of the number of confirmed cases","bc75b1d4":"### Plotting 'Recovered' Cases On Map of India : Heatmap","bff96cf1":"### Drawing Bar Plots For The Top 20 States ","fa186d2e":"# <span style=\"color:blue\">Please Upvote If You Like, Use Or Learn From This.","3795e15b":"### Next, we create style dictionary ","ced26906":"## This Notebook Demonstrates The Following:\n\n\n* Visualizing Covid-19 data in different ways.\n* Plotting data on India map using shapefile and geopandas library.\n* An interactive Time slider choropleth map as follows (Zoom on India before using slider bar).","c8272cb5":"### Selecting Data For Top 10 Districts From India wrt 'Confirmed' Cases","3d28ac76":"### Make a dataframe containing the features for each Indian state","a4c9f174":"## View HTML output file in Notebook","af61ab1c":"### Importing The Libraries And Reading Daily Covid-19 Data Of Indian States","625d1242":"### Sorting The Data According To Date and State Names","e474bbfc":"### Drawing Bar Plots For Top 10 Districts","58997ac0":"# Interactive TimeSlider Choropleth map\nA choropleth map is a type of thematic map in which areas are shaded or patterned in proportion to a statistical variable that represents an aggregate summary of a geographic characteristic within each area. We map the Covid-19 summary on India map.\n","34453472":"# **Coronavirus (COVID-19) in India**\n\n\n> India reported the first confirmed case of the coronavirus infection on 30 January 2020 in the state of Kerala. The affected had a travel history from Wuhan, China. Since the Wuhan coronavirus outbreak in China, the first case of coronavirus in India, the second most populated country in the world, was reported in the state of Kerala. New confirmed cases are being reported in multiple cities such as New Delhi, Mumbai, Bengaluru, Hyderabad, and Patna.\n\nDespite a strong response at the outset of the pandemic, as of Sept 22, India has the world's fastest growing outbreak of COVID-19 in absolute numbers according to WHO, reporting more than 5\u00b76 million infections. Restrictions began to be lifted in June, and this relaxation has continued in the face of a continuing dramatic increase in case numbers nationally. Beneath these alarming national figures, the pattern of spread in India is nuanced and complex, with marked differences between states, and between rural and urban areas. For example, cities like Kolkata and rural areas in the north of India were relatively spared the outbreak initially, whereas Delhi, with strong international connections, was at the forefront of the first wave. Even so, India is clearly facing a dangerous period. The country has responded well in many regards, especially for such a large and diverse nation. India instigated a national lockdown in March, which was praised by WHO. During the lockdown period, tertiary care provision was increased, including access to specialist equipment such as ventilators. Testing numbers also increased quickly, with India being among the first to roll out innovations like pooled testing. India has also been at the forefront of efforts to develop and manufacture a vaccine, both through domestic vaccine candidates and manufacturers such as the Serum Institute of India preparing production capacity for internationally developed vaccine candidates.","29fb207a":"## Import Libraries of Python","17e8615f":"![pic](https:\/\/thefederal.com\/file\/2020\/06\/Coronavirus-India.jpg)\n","f0622d34":"### Convert Date Into Standard Format","282bd1b0":"## Loading the data files","8cbb46ff":"## Final step : create our map and add a colourbar. Save the choropleth map created in HTML format so that you can visualize it in the browser.","a076724a":"# Plotting the important features across the states","e04d5bc1":"### Selecting The Data For Top 20 States wrt 'Confirmed' Cases.","80f433cc":"### Drawing An Interactive Map To Visualize The Relationship Of Number Of Tests With Positive (Confirmed) Cases Using Plotly","4aa17a1e":"# <span style=\"color:blue\">**Please Upvote If You Like, Use Or Learn From This.**\n\n# <span style=\"color:blue\">**Also Comment For Improvisation Of The Notebook.**\n\n\n# <span style=\"color:blue\">**Thank You!!!**\n\n","1bc42d77":"## Merging The State Data File With Shape File","86cd8fe9":"### Deleting the rows containing confirmed cases equal to zero","6d8032a8":"### We drop the unnecessary columns, rename the columns of state names in both the  states data and map_df (shapefile) data and then merge the two data according to 'State'.","66619af8":"### Testing Dataset Processing To Plot","492907ca":"### Plotting 'Confirmed' Cases On Map of India : Heatmap","bbefa1d5":"### Plotting 'Deaths' Cases On Map Of India : Heatmap","d4e5d790":"## Removing Unnecessary Columns From District Data","426c1a78":"# Plotting Covid-19 data on India Map using geopandas: \n### First read the shape file of India which has the geometries of Indian states.","e9b68d78":"### Selecting Important Columns For Plotting","c8e87d29":"### Transforming confirmed cases to log10 scale to reduce the scale of plotting."}}