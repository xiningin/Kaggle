{"cell_type":{"9716af2e":"code","ba8b8938":"code","8f18ab3b":"code","e63bd511":"code","f3ecd121":"code","48a50096":"code","573f880f":"code","5ecb6761":"code","1afbccb0":"code","ae5eff95":"code","2c8446a5":"code","3f124298":"code","0ffa950a":"code","684b2e32":"code","a1ea3cba":"code","6f4753e0":"code","2144b000":"code","a2c257b2":"code","3032feae":"code","e7942bcb":"code","8b854f3f":"code","98a18b47":"code","d15943f9":"code","7adee73e":"code","e92bd79c":"code","85021f38":"code","6e0069c6":"code","d33c8cd9":"code","3f5aa425":"code","fa6b81d8":"code","adb4282f":"code","07f0110b":"code","197eff5f":"code","c933920f":"code","b297d928":"code","b969a65c":"code","2e811713":"code","f05dd5b5":"code","e75c4d20":"code","41242e53":"code","d4e3a1dd":"code","5ab7ec89":"code","2e9f53b6":"code","c84895fc":"code","772d9c17":"code","e29ccde9":"code","293730e0":"code","7c0b1d8f":"code","71590553":"code","9b3bbd2c":"code","e3074431":"code","1ee47a46":"code","a80517de":"code","10cf095d":"code","5c691d2b":"code","986ad3a6":"code","f0c5f3a4":"code","771af370":"code","0e39d776":"code","7877ecb6":"code","ca8da5d3":"code","75677ad7":"code","45fcd270":"code","2669045b":"code","6aac4071":"code","cb5f5270":"code","d47b0354":"code","267f5393":"code","769c11c0":"code","8c131cc4":"code","ef3f98d2":"code","fa97de11":"code","4f791cea":"code","36eb812c":"markdown","8b718ec4":"markdown","238f0683":"markdown","7ab00c3a":"markdown","01d5ceee":"markdown","722bb84f":"markdown","f6b98997":"markdown","1e9894b4":"markdown","67ec9585":"markdown","4953c6c9":"markdown","56b9b98e":"markdown","8be76ef7":"markdown","b62bbaa3":"markdown","e0886b84":"markdown","7f5423e2":"markdown","3bc2308d":"markdown","4e6d58ed":"markdown","93ded923":"markdown","e97e0471":"markdown","e5a5a67c":"markdown","13df5dfe":"markdown","4d60eabe":"markdown","de1bc87c":"markdown","5c9bbf19":"markdown","edf5cfd6":"markdown"},"source":{"9716af2e":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os","ba8b8938":"# files=os.listdir(r'E:\\solar_radiation_data')\n# files","8f18ab3b":"# path=r'E:\\solar_radiation_data'\n\n# #blank dataframe\n# final=pd.DataFrame()\n\n# for file in files:\n#     df=pd.read_csv(path+\"\/\"+file,encoding='utf-8')\n#     final=pd.concat([df,final])","e63bd511":"final = pd.read_csv(\"..\/input\/solar-hourly-data\/combined_data_from_2016_2019_with_out_extra_features.csv\")","f3ecd121":"final.head(n=-5)","48a50096":"final.shape","573f880f":"final.isnull().sum()","5ecb6761":"final.corr()['GHI']","1afbccb0":"# let's rename our data to df from final to make it easy for analysis \ndf = final.drop([ \"Clearsky GHI\",\"Fill Flag\"], axis = 1)\ndf.head()","ae5eff95":"features = df.columns\nfor feature in features:\n    if (len(df[feature].unique())<50):\n        print('for {}:{}'.format(feature,df[feature].unique()))","2c8446a5":"for feature in features:\n    plt.plot(df[feature], '+')\n    plt.xlabel(feature)\n    plt.title('analysis of'+feature)\n    plt.show()","3f124298":"for feature in features:\n    df.plot(kind='scatter', x=feature, y='GHI')\n    plt.show()","0ffa950a":"for feature in features:\n    df.plot(kind='scatter', y=feature, x='Month')\n    plt.show()","684b2e32":"for feature in features:\n    df.plot(kind='scatter', y=feature, x='Year')\n    plt.show()","a1ea3cba":"df.corr()['GHI']","6f4753e0":"df.dtypes","2144b000":"features = df.columns\nfeatures","a2c257b2":"for i in range(1,len(features)):\n    data=df.copy()\n#     data[feature]=np.log(data[feature])\n    data.boxplot(column=features[i],grid = True)\n    plt.ylabel(features[i])\n    plt.title(features[i])\n    plt.show()","3032feae":"df.corr()['GHI']","e7942bcb":"x = df.drop(['GHI'],axis =1)\ny = df['GHI']","8b854f3f":"# # if not installed pycaret\n# import sys\n# !{sys.executable} -m pip install numpy\n# !pip install pycaret","98a18b47":"import pycaret\nfrom pycaret.regression import *\nreg = setup(data=df, target='GHI',remove_outliers=True,feature_selection_threshold=0.2, silent=True, feature_selection=True, transformation=False, train_size=0.8)","d15943f9":"compare_models()","7adee73e":"from sklearn.model_selection import train_test_split","e92bd79c":"x_train,x_test,y_train,y_test = train_test_split(x,y,test_size=0.3, random_state=42)","85021f38":"from sklearn.metrics import accuracy_score","6e0069c6":"from sklearn.linear_model import LogisticRegression\nlr = LogisticRegression()\nlr.fit(x_train,y_train)\nY_pred_lr = lr.predict(x_test)","d33c8cd9":"from sklearn.metrics import r2_score\nprint('R2 Score For Logistic Regression:',round(r2_score(Y_pred_lr,y_test)*100,2))","3f5aa425":"from sklearn.neighbors import KNeighborsClassifier\n\nknn = KNeighborsClassifier(n_neighbors=7)\nknn.fit(x_train,y_train)\nY_pred_knn=knn.predict(x_test)","fa6b81d8":"from sklearn.metrics import r2_score\nprint('R2 Score For K Nearest Neighbours :',round(r2_score(Y_pred_knn,y_test)*100,2))","adb4282f":"# !pip install xgboost","07f0110b":"import xgboost as xgb\n\nxgb_model = xgb.XGBRegressor(verbosity=0) \nxgb_model.fit(x_train, y_train)\n\nY_pred_xgb = xgb_model.predict(x_test)","197eff5f":"from sklearn.metrics import r2_score\nprint('R2 Score For xgboost Regressor :',round(r2_score(Y_pred_xgb,y_test)*100,2))","c933920f":"Y_pred_x = xgb_model.predict(x_train)\nprint('R2 Score For xgboost Regressor :',round(r2_score(Y_pred_x,y_train)*100,2))","b297d928":"# Feeling that the model was overfitted because testing accuracy was arround 95% and training accuracy was 98% ","b969a65c":"from keras.models import Sequential\nfrom keras.layers import Dense\nimport tensorflow as tf","2e811713":"model = Sequential()\nmodel.add(Dense(50, activation='relu',input_dim=15))\nmodel.add(Dense(40, activation='relu'))\nmodel.add(Dense(30, activation='relu'))\nmodel.add(Dense(20, activation='relu'))\nmodel.add(Dense(10, activation='relu'))\nmodel.add(Dense(1))","f05dd5b5":"model.compile(optimizer='RMSProp', loss='mean_squared_error')","e75c4d20":"model.fit(x_train,y_train,epochs=10)","41242e53":"Y_pred_nn = model.predict(x_test)","d4e3a1dd":"from sklearn.metrics import r2_score\nprint('R2 Score For Neural Networks :',round(r2_score(Y_pred_nn,y_test)*100,2))","5ab7ec89":"Y_pred_n = model.predict(x_train)","2e9f53b6":"from sklearn.metrics import r2_score\nprint('R2 Score For Neural Networks :',round(r2_score(Y_pred_n,y_train)*100,2))","c84895fc":"x_test[:10]","772d9c17":"k = model.predict(x_test[:10])\nk","e29ccde9":"y_test[:10]","293730e0":"df1 = pd.DataFrame(k,columns=['predicted_values'])","7c0b1d8f":"df1","71590553":"from keras.models import Sequential\nfrom keras.layers import Flatten, Dense, Dropout, BatchNormalization, AveragePooling2D","9b3bbd2c":"from keras.models import Sequential \nfrom keras.layers import Dense, Activation ","e3074431":"from keras.initializers import RandomNormal\nmodel_relu_ADAM_BN_drop = Sequential()\n\nmodel_relu_ADAM_BN_drop.add(Dense(128, activation='relu', input_dim=15, kernel_initializer=RandomNormal(mean=0.0, stddev=0.062, seed=None)))\nmodel_relu_ADAM_BN_drop.add(BatchNormalization())\nmodel_relu_ADAM_BN_drop.add(Dropout(0.3))\n\nmodel_relu_ADAM_BN_drop.add(Dense(64, activation='relu', kernel_initializer=RandomNormal(mean=0.0, stddev=0.125, seed=None)) )\nmodel_relu_ADAM_BN_drop.add(BatchNormalization())\nmodel_relu_ADAM_BN_drop.add(Dropout(0.3))\n\nmodel_relu_ADAM_BN_drop.add(Dense(64, activation='relu', kernel_initializer=RandomNormal(mean=0.0, stddev=0.250, seed=None)) )\nmodel_relu_ADAM_BN_drop.add(BatchNormalization())\nmodel_relu_ADAM_BN_drop.add(Dropout(0.3))\n\nmodel_relu_ADAM_BN_drop.add(Dense(1))\n\nprint(model_relu_ADAM_BN_drop.summary())\n\nmodel_relu_ADAM_BN_drop.compile(optimizer='adam', loss='mean_squared_error')","1ee47a46":"history = model_relu_ADAM_BN_drop.fit(x_train, y_train, batch_size=128, epochs=10 , verbose=1, validation_data=(x_test, y_test))","a80517de":"Y_pred_rab = model_relu_ADAM_BN_drop.predict(x_test)","10cf095d":"from sklearn.metrics import r2_score\nprint('R2 Score For Neural Networks :',round(r2_score(Y_pred_rab,y_test)*100,2))","5c691d2b":"Y_pred_r =  model_relu_ADAM_BN_drop.predict(x_train)\nY_pred_rab[:10]","986ad3a6":"from sklearn.metrics import r2_score\nprint('R2 Score For Neural Networks :',round(r2_score(Y_pred_r,y_train)*100,2))","f0c5f3a4":"y_test[:10]","771af370":"# df = pd.read_csv('C:\/Users\/HP\/OneDrive\/Desktop\/combined_data_from_2016_2019_with_extra_features.csv')","0e39d776":"# df.head(n=200)","7877ecb6":"# df.corr()","ca8da5d3":"# df = df.drop(['Clearsky GHI','DHI','Clearsky DHI','DNI','Clearsky DNI'],axis =1)","75677ad7":"# df.head()","45fcd270":"# print(df.corr()[\"GHI\"].abs().sort_values(ascending=False))","2669045b":"# df = df.drop(['Ozone','Fill Flag'],axis = 1)","6aac4071":"# print(df.corr()[\"GHI\"].abs().sort_values(ascending=True))","cb5f5270":"# df.info()","d47b0354":"# print(np.percentile(df.Dew_Point,[99])[0])\n# print(np.percentile(df.Dew_Point,[100])[0])","267f5393":"# print(np.percentile(df.Solar_Zenith_Angle,[0])[0])\n# print(np.percentile(df.Solar_Zenith_Angle,[3])[0])","769c11c0":"# features = df.columns\n# features","8c131cc4":"# # Linear analysis\n# for feature in features:\n#     data=df.copy()\n#     plt.scatter(data[feature],data['GHI'])\n#     plt.xlabel(feature)\n#     plt.ylabel('GHI')\n#     plt.title(feature)\n#     plt.show()\n        ","ef3f98d2":"# ## We will be using logarithmic transformation to extract more relavent information from the data\n\n\n# for feature in features:\n#     data=df.copy()\n#     data[feature]=np.log(data[feature])\n#     data['GHI']=np.log(data['GHI'])\n#     plt.scatter(data[feature],data['GHI'])\n#     plt.xlabel(feature)\n#     plt.ylabel('GHI')\n#     plt.title(feature)\n#     plt.show()","fa97de11":"# for feature in features:\n#     data=df.copy()\n#     data[feature]=np.log(data[feature])\n#     data.boxplot(column=feature,grid = True)\n#     plt.ylabel(feature)\n#     plt.title(feature)\n#     plt.show()","4f791cea":"# from pycaret.regression import *\n# reg = setup(data=df, target='GHI',remove_outliers=True, normalize=True, silent=True,train_size=0.8)","36eb812c":"## <u>Model Creation<\/u>","8b718ec4":"# Model Fitting","238f0683":"<b>finally I found Neural Networks was performing well from my conclusion with out any overfitting Problem<\/b>","7ab00c3a":"**since it is observed that \"GHi=clearsky Ghi\" we can remove clearsky Ghi**\n**we can also find that \"fill flag\",\"precipitable water\" and \"pressure\" has very Low impact on GHI so there is no \nuse of considering those columns**\n**<u>so by this correlation analysis I am going to elimanate \"clearsky GHI\",\"fill flag\",\"precipitable water\" and \"pressure\" columns from our Data<\/u>**\n","01d5ceee":"***from above analysis between months and features we canclude that\n   1. between march and may GHI was at peak level then its get down fall\n   2. wind speed was maximum in month of july and started increasing from April and down fall starts from august***","722bb84f":"It is found that surface_albedo is maximum in year 2018","f6b98997":"## K Nearest Neighbours","1e9894b4":"here we can see that predited values are acceptable and model that we created also Generalised model with good training \nand testing accuracies with out overfitting","67ec9585":"### <u>Correlation Analysis<\/u>","4953c6c9":"# <u>27\/04\/2021  to 02\/05\/2021 work<\/u>","56b9b98e":"**from above Observation we can conclude other than date&time columns on cloud type contains no continuous values, rest of all other features contains Continuous features**","8be76ef7":"# Train_Test_Split","b62bbaa3":"# Auto Pycaret","e0886b84":"**1. we can observe GHI increases between 6 to 18 hours from hour and GHI plot\n  2. we can observe at cloud_type 5,9 there is no impact on GHI\n  3. we can also observe increasing Solar_Zenith_angle Decreases GHI\n  4. and can say increasing temperature can increase GHI\n  \n***<u>this is the observation from bivariate analysis between features and \"GHI\"<\/u>***\n\n****for <u>\"relative Humidity,wind direction,wind speed and dew point\"<\/u> we can't find any relation from this analysis let's try with another****\n  ","7f5423e2":"## Logistic Regression","3bc2308d":"# Testing the Model","4e6d58ed":"### <u>Data Collection and Preperation<\/u>\n**guys here we can understand how to combine multiple data_sets from a folder kindly go through this guys**","93ded923":"## Neural Networks","e97e0471":"## found many Outliers from Temp,Dew_poin, Solar_zenith_angle, Surface_albedo Columns","e5a5a67c":"so far analysis can conclude droping DHI, CLearsky DHI,DNI, CLearsky DNI columns","13df5dfe":"## <u>Bivariate Analysis<\/u>","4d60eabe":"## <u>Univariate Analysis<\/u>","de1bc87c":"# here we can see that the prediction were some how in accurate so we can't consider this model out of which Neural Networks performed well","5c9bbf19":"## 26\/04\/2021 work","edf5cfd6":"## xgboost"}}