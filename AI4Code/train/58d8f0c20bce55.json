{"cell_type":{"5ad33424":"code","fd55d73e":"code","a1a46809":"code","4e76ef00":"code","916bde10":"code","56443ee5":"code","9b7da4c0":"code","e97473b0":"code","55f47c3f":"code","258da7cc":"code","a1af9bc3":"code","acd3ac5f":"code","4f8d5dfe":"code","3fbde047":"code","1c23b60f":"code","a2567691":"code","22eebc51":"code","abdfe855":"code","d01fefb2":"code","bab08dd7":"code","e5784449":"code","a0966e30":"code","10865062":"code","4c485280":"code","898a08c2":"markdown","10f4d77b":"markdown","c2458e65":"markdown","0ff64ea0":"markdown","fcb9c7af":"markdown","d46b79be":"markdown","4530a46c":"markdown","756eff2b":"markdown","8ad25781":"markdown","69c32606":"markdown","c2f7dda4":"markdown","6e2077cc":"markdown","3078570e":"markdown","ab80b38c":"markdown","9b858279":"markdown","e549a6c3":"markdown","af0331a7":"markdown","2886eb43":"markdown","5c498640":"markdown","db04501b":"markdown","d140046a":"markdown","8e6637f5":"markdown","d04c84ca":"markdown","6a99c4fd":"markdown","8361b2e6":"markdown","3325fde2":"markdown"},"source":{"5ad33424":"import pandas as pd\nimport requests\nfrom bs4 import BeautifulSoup\nimport re\nimport itertools\nfrom selenium import webdriver\nimport time","fd55d73e":"proyectos = 'https:\/\/congresovisible.uniandes.edu.co\/proyectos-de-ley\/#q=2019&page='\n# lista con las url de las 123 paginas con los proyectos de ley \nproyectos_list = []\nfor i in [x for x in range(1,126)]:\n    proyectos_list.append(proyectos + str(i))\n    \ndef sacar_links_pdl(lista):\n    browser = webdriver.Chrome(executable_path=r\"C:\\web_drivers\\chromedriver.exe\")\n    browser.get(lista)\n    time.sleep(2)\n    html = browser.execute_script(\"return document.getElementsByTagName('html')[0].innerHTML\")\n    time.sleep(0)\n    soup = BeautifulSoup(html,'lxml')\n    \n    elements = soup.find_all('a')\n    pl_prefix = 'https:\/\/congresovisible.uniandes.edu.co\/proyectos-de-ley\/' \n    pl_sufix = re.findall('\/proyectos-de-ley\/(p.+?)\\\">', str(elements))\n    pl_all_list = [pl_prefix + url for url in pl_sufix]\n    return pl_all_list\n\n# sacar la lista con todas las url de los proyectos de ley \nurl_proyectos_ley = list(map(sacar_links_pdl,proyectos_list))\n\ndef Na_taguer(var):\n            if var == []:\n                var = 'NA'\n            else:\n                pass\n            return var\ndef scrap_elementos(url):\n       \n    try: \n        get_url = requests.get(url).text\n        sopa = BeautifulSoup(get_url,'lxml')\n        \n        r_titulo = sopa.find_all('h1')\n        try:\n            titulo = re.findall('\\\">\"|\u201c(.+?)\\[', str(r_titulo))[-1]\n        except:\n            titulo = titulo = re.findall('\\\">\u201c(.+?)\\.', str(r_titulo))\n        \n        try:\n            tagtitulo = re.findall('\\[([A-Z\\d].+?)\\]', str(r_titulo))[-1]\n                #tagtitulo = re.findall('\\[([A-Z\\d].+?)\\]\\\u201d', str(r_titulo))[-1]\n        except:\n            tagtitulo = 'NA'\n        del r_titulo\n        \n        r_estado = sopa.find('div', class_='module5').find_all('li', text='')\n        estado = re.findall('\\\">(.+?)<\/a>', str(r_estado))[-1]\n        proceso = re.findall('\\\">(.+?)<\/a>', str(r_estado))\n        fechas_proceso = re.findall('<p>(.+?)<\/p>', str(r_estado))\n        del r_estado\n        \n        try:\n            r_sinopsis = sopa.find('div', class_='module7').find('p', text='')\n            sinopsis = re.findall('p>(.+?)<\/', str(r_sinopsis))\n            sinopsis = [w.replace('<br\/>', ' ') for w in sinopsis][-1]\n            del r_sinopsis\n        except:\n            sinopsis = 'NA'\n        \n        r_datos_grls = sopa.find('ul', class_='lista6').find_all('li', text='')\n        str_datos_grls = str(r_datos_grls)\n        del r_datos_grls\n        \n        temas = re.findall('Tema<\/h3><p>(.+?)<\/p>', str_datos_grls)\n        temas = Na_taguer(temas)\n        tipo = re.findall('Tipo<\/h3><p>(.+?)<\/p>', str_datos_grls)[-1]\n        tipo = Na_taguer(tipo)\n        \n        fecha_radicacion = re.findall('Fecha de Radicaci\u00f3n <\/h3><p>(.+?)<\/p>', str_datos_grls)[-1]\n        \n        tags = re.findall('#q=(.+?)\\\">', str_datos_grls)\n        tags = [x.strip(' ') for x in tags]\n        tags = Na_taguer(tags)\n        \n        r_autores = sopa.find('div', class_='module2')\n        autores = re.findall('alt=\\\"([A-Z\u00c1\u00c9\u00cd\u00d3\u00da].+?)\\\" height', str(r_autores))\n        autores = Na_taguer(autores)\n        del r_autores\n        \n        r_partido_autores = sopa.find_all('div', class_='module2')\n        partido_autores1 = re.findall('\\d\/\\\">(.+?)<\/p>', str(r_partido_autores))\n        partido_autores = re.findall('\\d\/\\\">(.+?)<\/a>', str(partido_autores1))\n        partido_autores = Na_taguer(partido_autores)\n        del r_partido_autores\n        del partido_autores1\n        \n        url_Pdl = url\n    \n        #return titulo,tagtitulo,estado,autores,partido_autores,proceso,fechas_proceso,sinopsis,temas,tipo,fecha_radicacion,tags,url_Pdl\n\n        return{'Proyecto de Ley':titulo,'Palabra Clave':tagtitulo,'Estado':estado,'Autor':autores,'Partido':partido_autores ,'Proceso':proceso,'Fechas proceso':fechas_proceso,'Resumen':sinopsis,'Tema':temas,'Tipo':tipo,'Fecha Radicaci\u00f3n':fecha_radicacion,'Tags':tags,'link':url_Pdl}\n\n    except: \n        \n        titulo = 'link da\u00f1ado'\n        tagtitulo = 'link da\u00f1ado'\n        estado = 'link da\u00f1ado'\n        autores = 'link da\u00f1ado'\n        partido_autores = 'link da\u00f1ado'\n        proceso = 'link da\u00f1ado'\n        fechas_proceso = 'link da\u00f1ado'\n        sinopsis = 'link da\u00f1ado'\n        temas = 'link da\u00f1ado'\n        tipo = 'link da\u00f1ado'\n        fecha_radicacion = 'link da\u00f1ado'\n        tags = 'link da\u00f1ado'\n        url_Pdl = url\n        \n        return{'Proyecto de Ley':titulo,'Palabra Clave':tagtitulo,'Estado':estado,'Autor':autores,'Partido':partido_autores,'Proceso':proceso,'Fechas proceso':fechas_proceso,'Resumen':sinopsis,'Tema':temas,'Tipo':tipo,'Fecha Radicaci\u00f3n':fecha_radicacion,'Tags':tags,'link':url}\n\nMacro_Dicc = list(map(scrap_elementos,url_625_PdL))\nMacro_DF = pd.DataFrame(Macro_Dicc)","a1a46809":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nprint(os.listdir(\"..\/input\"))","4e76ef00":"pdl = pd.read_csv('..\/input\/Proyectos_Ley_2018_2019.csv')","916bde10":"(pdl['Tipo'].value_counts() \/ len(pdl)).plot.bar()","56443ee5":"(pdl['Camara'].value_counts().head(10) \/ len(pdl)).plot.bar()","9b7da4c0":"(pdl['Estado'].value_counts().head(10) \/ len(pdl)).plot.bar()","e97473b0":"pdl['cuenta'] = pdl.groupby('CC')['CC'].transform('count')","55f47c3f":"sns.kdeplot(data=pdl['cuenta'], shade=True)\nplt.title('Distribuci\u00f3n de cantidad de proyectos de ley presentados por el Congreso')","258da7cc":"pdl.cuenta.mean()","a1af9bc3":"pdl.groupby(['congresista_x','cuenta']).size().nlargest(10).plot.bar()\nplt.title('Congresistas que m\u00e1s proyectos de ley han radicado')","acd3ac5f":"pdl.groupby(['congresista_x','cuenta']).size().nsmallest(25).plot.bar()\nplt.title('Congresistas que MENOS proyectos de ley han radicado')","4f8d5dfe":"#pdl['congresista_x'].value_counts().head(10).plot.bar()","3fbde047":"cuenta_partido = pdl.groupby('Partido')['congresista_x'].count().reset_index().rename(\n    columns={'Partido':'Partido','congresista_x' : 'congresista'})","1c23b60f":"cuenta_partido","a2567691":"sns.kdeplot(data=cuenta_partido['congresista'], label=\"Polo Democratico\", shade=True)\nplt.title(\"Comparaci\u00f3n partidos \")\nplt.legend()\n","22eebc51":"pdl['party_count'] = pdl.groupby('Partido')['CC'].transform('count')","abdfe855":"pdl['party_count'] = pdl.groupby('Partido')['CC'].transform('count')","d01fefb2":"(pdl['Partido'].value_counts().head(20) \/ len(pdl)).plot.bar()\nplt.title('Propuestas de proyectos de ley por Partido')","bab08dd7":"sns.distplot(a=pdl['party_count'], label=\"Centro Democr\u00e1tico\", kde=True)","e5784449":"(pdl['Tema'].value_counts().head(12) \/ len(pdl)).plot.bar()\nplt.title('Temas m\u00e1s relevantes para el congreso de Colombia')","a0966e30":"(pdl['Tema'].value_counts().nsmallest(12) \/ len(pdl)).plot.bar()\nplt.title('Temas menos relevantes para el Congreso de Colombia')","10865062":"(pdl['Tags'].value_counts().head(12) \/ len(pdl)).plot.bar()","4c485280":"(pdl['Tags'].value_counts().nsmallest(12) \/ len(pdl)).plot.bar()","898a08c2":"Entre los temas menos prioritarios para el Congreso, se encuentran t\u00f3picos relacionaos con derechos sociales. Especialmente, resulta interesante observar el poco inter\u00e9s que tiene un tema como \"conflicto armado\", la intuci\u00f3n detr\u00e1s de este hallazgo radica en dos hip\u00f3tis: o bien el proceso de paz logr\u00f3 reducir la importancia del conflicto dentro de la agenda legislativa, o bien es un tema irrelevante para la mayor\u00eda de congresistas. ","10f4d77b":"La distribuci\u00f3n de proyectos de ley presentados por congresista se observa en el siguiente gr\u00e1fico:","c2458e65":"porcentaje de proyectos de ley presentados por partido","0ff64ea0":"### Estado de los Proyectos de Ley ","fcb9c7af":"### Presentaciones de Proyectos de Ley por C\u00e1mara ","d46b79be":"![image.png](attachment:image.png)","4530a46c":"# Proyectos de Ley presentado por el Congreso de la Rep\u00fablica desde el 18 de julio de 2018 a la fecha ","756eff2b":"#### Partidos que m\u00e1s Proyectos de Ley han presentado","8ad25781":"### Tipos de proyectos de ley presentados por el Congreso a la fecha","69c32606":"#### Esta base de datos fue construida a partir de m\u00e9todos de web scraping al portal Congreso visible y a las p\u00e1ginas web del  Senado de la Rep\u00fablica y C\u00e1mara de representantes. **\nPara ver el c\u00f3digo de web scrap, desplegar las siguiente celdas:","c2f7dda4":"#### Congresistas que menos proyectos han radicado","6e2077cc":"### comparaci\u00f3n de bancadas","3078570e":"## Historia: Proyectos de Ley presentados por el Congreso en la vigente legislatura","ab80b38c":"Se genera un groupby de congresistas y su total de proyectos de ley presentados, adem\u00e1s se grafica","9b858279":"Temas menos relevantes para el Congreso de Colombia","e549a6c3":"En general, cerca del 80% de los proyectos radicados son del tipo Proyecto de Ley, seguido de un 19% de Proyectos de acto legislativo, y una peque\u00f1a proporci\u00f3n de leyes estatutarias\n\nAunque es esperada esta distribuci\u00f3n, llama la atenci\u00f3n el reducido n\u00famero de proyectos de ley Estaturia, en proporci\u00f3n a los proyectos de Acto Legislativo, pues, en un gobierno caracterizado por la polarizaci\u00f3n, especialmente en torno a los temas relacionados a la implementaci\u00f3n del proceso de paz, se esperar\u00eda una mayor cantidad de proyectos dirigidos o bien a la regulaci\u00f3n del mismo, o a la derogaci\u00f3n y modificaci\u00f3n. ","af0331a7":"### TAGS","2886eb43":"Partiendo de esta vsualizaci\u00f3n, se desprenden dos datos relevantes: \n1. a la fecha, tras haber concluido la primera legislatura, muchos congresistas han presentado muy pocos proyectos de Ley \n2. El Senador Mockus, electo con la segunda votaci\u00f3n m\u00e1s alta, se encuentra en los \u00faltimos lugares teniendo un total de 4 Proyectos de Ley radicados. Teniendo en cuenta que su inhabilidad se dio en el mes de abril, lo que significa que estuvo al rededor de 6 meses en actividad legislativa (omitiendo periodos de vacaciones) \n3. El Representante a la C\u00e1mara Germ\u00e1n Navas Talero, reconocido por sus \u00e1lgidas intervenciones de control pol\u00edtico, destaca por su poca participaci\u00f3n en la proposici\u00f3n de proyectos ","5c498640":"### congresistas que m\u00e1s proyectos de ley han presentado**","db04501b":"![image.png](attachment:image.png)","d140046a":"se agrega la columna 'cuenta' que contiene la totalidad de proyectos de ley presentados por congresista ","8e6637f5":"La media de proyectos de ley presentados por congresista es de 49.5","d04c84ca":"Con una notable diferencia, los temas relacionados con adminitraci\u00f3n p\u00fablica han sido la prioridad del presente congreso, posteriormente le siguen temas como Bienestar y Pobreza junto con Econom\u00eda. \n\nSin embargo, para ver con mayor detalle diferencias entre los proyectos que se encuentran en esta categor\u00eda, es preciso hacer uso de las palabras clave o Tags de cada uno de estos proyectos, los cuales veremos m\u00e1s adelante","6a99c4fd":"### Temas","8361b2e6":"![image.png](attachment:image.png)","3325fde2":"Dado que Cambio Radical es el partido mayoritario en el Congreso, su cantidad de proyectos de ley es proporcional a sus esca\u00f1os. Esta variable debe normalizarse con el fin de hacer m\u00e1s certero el an\u00e1lisis y poder comparar proporcionalmente. Para ello es preciso dividir el n\u00famero de proyectos por partido, sobre el n\u00famero de curules que este tiene. No obstante, no encontr\u00e9 la forma de graficarlo directamente en Python"}}