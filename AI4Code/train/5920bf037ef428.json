{"cell_type":{"01bcb438":"code","8f450d60":"code","7cc7f138":"code","ff997cc5":"code","374e9a1a":"code","6187ca8d":"code","e76b3c6e":"code","58f355ee":"code","515103a4":"code","831bfa12":"code","7aa7efbf":"markdown","2a48bcc3":"markdown","4c74972f":"markdown","1e5b4029":"markdown","79130339":"markdown","829e5eab":"markdown","24a99916":"markdown","7ca01663":"markdown","32fba884":"markdown","999019c6":"markdown","a9402270":"markdown","e068d47f":"markdown","43a8ca7d":"markdown","2088b543":"markdown","09e81410":"markdown","a79b2122":"markdown","3290ff4b":"markdown","e6eb2817":"markdown","829ae4aa":"markdown","e35871cd":"markdown","7511f3f0":"markdown"},"source":{"01bcb438":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","8f450d60":"lis = pd.read_csv('..\/input\/listings_dec18.csv',low_memory=False)  # Using the listings_dec18.csv file to cleanse\nprint(lis.shape)","7cc7f138":"lis.info()","ff997cc5":"print(sum(lis.host_listings_count !=lis.host_total_listings_count),\"records in column host_listings_count are different from host_total_listings_count:\")\nprint(list(lis[lis.host_listings_count!=lis.host_total_listings_count].host_total_listings_count))\n#print(sum(lis.calculated_host_listings_count !=lis.host_total_listings_count),\"records in column calculated_host_listings_count are different from host_total_listings_count.\")","374e9a1a":"calculated_counts=lis.groupby(['host_id']).size().reset_index(name='calculated_num_listings')\ncalculated_counts.head()","6187ca8d":"print('Unique values in the market column:',\"\\n\",lis.market.unique())","e76b3c6e":"lis[lis.market=='Guangzhou']","58f355ee":"print('License:','\\n',lis[(lis.license.notnull())&(lis.license != \"GST\")].license)","515103a4":"print('Host name of the three properties with license 35753401805:',list(lis[lis.license=='35753401805'].host_name))","831bfa12":"lis[(lis.license.notnull())&(lis.license != \"GST\")][['host_name','host_id','license']].drop_duplicates().sort_values(['host_name'])","7aa7efbf":"Dataset shape:","2a48bcc3":"# 5. The dataset after cleasning\n\nSo after this preliminary cleansing, a cleansed data file is created without the following columns:\n* ***thumbnail_url***,\n* ***medium_url***,  \n* ***xl_picture_url***,\n* ***host_acceptance_rate***,\n* ***host_listings_count***, \n* ***host_total_listings_count***, \n* ***experiences_offered***, \n* ***neighbourhood_group_cleansed***, \n* ***market***,\n* ***is_business_travel_ready***,\n* ***jurisdiction_names***,\n\nalso changing the column names ***neighbourhood_cleansed*** to ***city***, and the original ***city*** column to ***suburb***, and spelling like 'neighbour' to 'neighbor'.","4c74972f":"Next, let's see the 'Guangzhou' one:","1e5b4029":"# 2. Check duplicated columns\n\n Columns ***host_listings_count*** and ***host_total_listings_count***  are almost the same, as there are only 3 different records, which are NaN.\n","79130339":"So let's use the ***calculated_host_listings_count*** and get rid of the other two.","829e5eab":"While column ***calculated_host_listings_count*** are gotten by calculating how many times a host appears in the whole dataset. See the code below:","24a99916":"# Melb Airbnb Data Exploratory Analysis and Cleansing\n\nThis kernel shows some simple steps to do data cleansing with a quick peek of the data, using the Melbourne Airbnb Open Data. \n\nA cleansed dataset will be provided after this EDA for a more sophisticated analysis and dashboard.\n\n# Table of contents\n\n* [0. Loading libraries and data](#0.-Loading-libraries-and-data)\n* [1. Columns with null data](#1.-Columns-with-null-data)\n* [2. Check duplicated columns](#2.-Check-duplicated-columns)\n* [3. Check if column names make sense](#3.-Check--if-column-names-make-sense)\n* [4. Data quality](#4.-Data-quality)\n  * [4.1. Column *market*](#4.1.-Column-market)\n  * [4.2. Columns *weekly_price* and *monthly_price*](#4.2.-Columns-weekly_price-and-monthly_price)\n  * [4.3. Column *license*](#4.3.-Column-license)\n  * [4.4. Column *is_business_travel_ready*](#4.4.-Column-is_business_travel_ready)\n* [5. The dataset after cleasning](#5.-The-dataset-after-cleasning)\n\n# 0. Loading libraries and data","7ca01663":"So the three listings with the same license are from the same host, which makes sense.\nAnd looks like only 4 hosts have license in Melb. (Host Lyn has two licenses.) That's great.  Although not sure what is this license for.","32fba884":"We see that 89% of ***weekly_price*** and 92% of ***monthly_price*** are NaN. This is because most hosts only set nightly prices and don't bother to set longer term prices. So we still keep these columns.","999019c6":"# 3. Check if column names make sense\n\nAfter checked with the info on the City of Melbourne website, I found that the data in column *neighbourhood* is actually city names, and the data in column ***city*** is actually suburbs\/inner suburbs, so let's change the column names ***neighbourhood*** to ***city***, and ***city*** to ***suburb***.","a9402270":"# 4. Data quality\n\nNow let's have a closer look on the data. Specifically, let's look at the columns ***market***, ***weekly_price*** and ***monthly_price***, ***license***, and ***is_business_travel_ready***.","e068d47f":"Click the ***output*** to see what files in the dataset. I will use the ***listings_dec18*** csv file.","43a8ca7d":"After looking into the listing ad and the host profile, it's clearly that this listing is in the Melb market.\n\nIn fact, all the listings scaped are all in the Melbourne market. So this ***market*** column doesn't have much meanings. Let's drop it.","2088b543":"# 4.4. Column *is_business_travel_ready*\n\n\n","09e81410":"Click the ***output*** to see what columns in our data.","a79b2122":"# 1. Columns with null data\n\nLooking into the data preview tab on the dataset page is a good start to see which part of the data needs cleansing.\n\nFor example, columns ***thumbnail_url***, ***medium_url***, ***jurisdiction_names***, etc. have 100% null value. So let's drop these columns.\n\nWe can also see how many valid values in each column.\n\nFor example, columns ***square_feet*** only has 214 non-null valus. So let's drop it.","3290ff4b":"# 4.3. Column *license*\n\nWe see that there are only a few hosts have licenses:","e6eb2817":"Column ***is_business_travel_ready*** shows all false, which is not the case as at least my listings are business travel ready (yes, I am an Airbnb host!). So drop this column.\n","829ae4aa":"# 4.1. Column *market*\n\nFrom the dataset preview, we see that there are 1% showing as 'Other' other than Melb and Other(International).\nWe can see that from the unique values below,  'Phillip Island and Mornington Peninsula' and some others should be marked as \"Melbourne\".","e35871cd":"Let's see who has the License 35753401805:","7511f3f0":"# 4.2. Columns *weekly_price* and *monthly_price*"}}