{"cell_type":{"7d6f9f92":"code","0cda54f4":"code","b596d7d5":"code","a482d29d":"code","c451d7f6":"code","bc211d4d":"code","3d73e7c2":"code","108b0060":"code","00c72c32":"code","f1f0513e":"code","ca6216a8":"code","5cf9bc15":"code","746b6809":"code","5161fdd8":"code","365f99da":"code","36ad0e9a":"code","15a82db8":"code","2b86d71a":"code","98aabd9d":"code","608f685f":"code","cdcbfc03":"code","7549e282":"code","c5006025":"code","2ec241fd":"code","d3d2eff6":"code","ab1fae5c":"markdown","d662f49b":"markdown"},"source":{"7d6f9f92":"# Imports\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport math\n","0cda54f4":"# List of Datafiles\nprint(os.listdir(\"..\/input\"))","b596d7d5":"drivers = pd.read_csv('..\/input\/drivers.csv', encoding='latin1')\nlaptimes = pd.read_csv('..\/input\/lapTimes.csv')","a482d29d":"driverId_and_Ref = drivers[['forename','surname','driverId']]","c451d7f6":"laptimes = laptimes.merge(driverId_and_Ref, on='driverId')\n\ndel driverId_and_Ref","bc211d4d":"laptimes['driverName'] = laptimes['forename'].str.cat(laptimes['surname'], sep=' ')\nlaptimes.drop(['forename', 'surname'], axis=1, inplace=True)\n","3d73e7c2":"laptimes_per_driver = laptimes.drop(['driverId','lap','position','time'],axis=1,inplace=False)\n","108b0060":"races = pd.read_csv('..\/input\/races.csv')\ncircuits = pd.read_csv('..\/input\/circuits.csv', encoding='latin1')","00c72c32":"raceId_circuitId = races[['raceId','circuitId']]\n","f1f0513e":"raceId_circuitId = races[['raceId','circuitId']]\nlaptimes_per_driver = laptimes_per_driver.merge(raceId_circuitId, on='raceId')\ndel raceId_circuitId\n\n","ca6216a8":"circuitId_name = circuits[['circuitId', 'name']]\nlaptimes_per_driver.merge(circuitId_name, on='circuitId')\ndel circuitId_name","5cf9bc15":"circuitId_name = circuits[['circuitId', 'name']]\nlaptimes_per_driver = laptimes_per_driver.merge(circuitId_name, on='circuitId')","746b6809":"laptimes_per_driver.drop(['raceId', 'circuitId'], inplace=True, axis=1)","5161fdd8":"laptimes_per_driver.rename(columns={'name':'circuitName'}, inplace=True)\nlaptimes_per_driver = laptimes_per_driver.groupby(by=['driverName', 'circuitName']).min().reset_index()","365f99da":"uniqueCircuits = pd.DataFrame(laptimes_per_driver['circuitName'].unique(), columns=['circuit'])","36ad0e9a":"listOfCircuits = uniqueCircuits['circuit'].tolist()","15a82db8":"fastest = []","2b86d71a":"def driverTimesByCircuit(circuit):\n    df = laptimes_per_driver[laptimes_per_driver['circuitName'] == circuit]\n    df.sort_values('milliseconds', inplace=True)\n    return df.iloc[0]\n","98aabd9d":"for circuit in listOfCircuits:\n    fastest.append(driverTimesByCircuit(circuit))\n\nfastest = pd.DataFrame(fastest)","608f685f":"#fastest['time'] = fastest['milliseconds'].apply(lambda x: str(math.floor(x\/60000))+':'+str(math.floor(x%60000\/1000)).zfill(2)+':'+str('%.3f' % ((x%1000)\/1000)).replace('0.',''))\nfastest['time'] = fastest['milliseconds'].apply(lambda x: str(math.floor(x\/60000))+':'+str(math.floor(x%60000\/1000)).zfill(2)+':'+str(x%1000).zfill(3))\nfastest.drop(['milliseconds'], inplace=True, axis=1)","cdcbfc03":"fastest.sort_values(by='time', inplace=True)\nfastest.reset_index(drop=True, inplace=True)","7549e282":"fastest\n#TODO add circuit length and divide to get average lap speed","c5006025":"most_fast_laps = fastest['driverName'].value_counts().reset_index()\nmost_fast_laps.rename(columns={'index':'Driver','driverName': '# Fastest Laps Held'}, inplace=True)","2ec241fd":"most_fast_laps = most_fast_laps.iloc[:10]\n","d3d2eff6":"fig,ax = plt.subplots(figsize=(10,5))\ng = sns.barplot(data=most_fast_laps, y='Driver', x='# Fastest Laps Held', palette='viridis')\n","ab1fae5c":"**Lets see who holds the fastest time at each circuit - Note after investigation, fastest laps may become invalid if the track layout changes, so these are the fastest ever times recorded at each circuit, regardless of changes over time. **","d662f49b":"**Now lets see the top 10 holders of fastest laps**"}}