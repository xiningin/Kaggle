{"cell_type":{"450e6a29":"code","8df32c2e":"code","6162e867":"code","424eb146":"code","4a9164ad":"code","d7ca762b":"code","0f8b6283":"code","f9236010":"code","2e42cc9c":"code","01158785":"code","3da31497":"code","93bd1ecb":"code","bc771127":"code","d3d945a0":"code","97a33d4f":"code","a078eec5":"code","1cabb197":"code","5bd13339":"code","cb9713fc":"code","58b30d20":"code","8e56db5f":"code","376a9b3a":"code","6a284bcf":"code","2d4a6daf":"code","931a1aef":"code","923808c9":"code","9232b08a":"code","61643e38":"code","a866a4a6":"code","9f65f461":"code","21bba2d9":"code","9313d323":"code","c8ae7cb3":"code","0179d40d":"code","17b9227b":"code","2725ab12":"markdown","b95b9c11":"markdown","86b26ed2":"markdown","6eab29fa":"markdown","389c6af9":"markdown","9ddd8eb6":"markdown","a1e9b0da":"markdown","7ee6d561":"markdown","76e1852e":"markdown","27a92b83":"markdown","c459d39c":"markdown","0a8ca64a":"markdown","3554e947":"markdown","a3c71612":"markdown","83508997":"markdown","4cd4e733":"markdown","ea71c2ac":"markdown","fde4e843":"markdown","a097cf71":"markdown","6b90eae9":"markdown","c0455b85":"markdown","76e845ae":"markdown","a188b18b":"markdown","fedd5c83":"markdown","19a6620a":"markdown","5b4312a9":"markdown","e86cb32b":"markdown","f9c9911e":"markdown","2106385a":"markdown","95163320":"markdown","ca36f4a4":"markdown","1593ad4d":"markdown","dad493eb":"markdown","3328aef8":"markdown","46953f4d":"markdown","41bcbbcb":"markdown","c6812f59":"markdown","02c4dbbf":"markdown","933d04a5":"markdown","354331c4":"markdown","650b2e15":"markdown","de6d6452":"markdown","169b049a":"markdown","6ce9536e":"markdown","5974f2c5":"markdown","d11d4876":"markdown","82e535de":"markdown","a8d71c81":"markdown","d9aaeb4f":"markdown","bad894f2":"markdown","e411ec80":"markdown","4ce4c417":"markdown","d06e013e":"markdown","c67b0df1":"markdown","86b3418e":"markdown","8cc09372":"markdown","de2de33d":"markdown","95bd3636":"markdown","4b50718d":"markdown","2bed9c4b":"markdown","1aeceade":"markdown","10b336c0":"markdown","512de5fc":"markdown","b292e1e7":"markdown","c36b3c4a":"markdown","17d88a69":"markdown","ad8e21e9":"markdown","68de8ef8":"markdown","c6a5e24c":"markdown","8493ce95":"markdown","2d4c04f7":"markdown","d5c17cd2":"markdown","4384d4c3":"markdown","3406613b":"markdown","b90b8a35":"markdown","80ccaae7":"markdown","a965c410":"markdown","43d49093":"markdown","8b27ee01":"markdown","20aedc16":"markdown","a03bd86f":"markdown","d50843f7":"markdown","0ca48f03":"markdown","26bc6a0c":"markdown","fca313c4":"markdown","abf54bd6":"markdown","d41bc95f":"markdown","d74a9350":"markdown","ff689a1a":"markdown","5917a613":"markdown","12aa4fdd":"markdown","ea700b25":"markdown","1a7f72f1":"markdown","6b5fca07":"markdown","4de23c27":"markdown","8f03b816":"markdown","7a1879a5":"markdown","1a9767af":"markdown","96f3f698":"markdown","af60479b":"markdown","d94d7f74":"markdown","0237110b":"markdown","a1f75ea1":"markdown","86e91779":"markdown","5ffba58d":"markdown","90c43d3f":"markdown","0f62343b":"markdown","aa0ae074":"markdown","138622a7":"markdown","99c08ac1":"markdown","bcc958e3":"markdown","7edc4c4c":"markdown","1f66478d":"markdown","27c08c58":"markdown","9b9bcf98":"markdown","88fe8868":"markdown","b7530608":"markdown","d16affe3":"markdown","8b3ba6c6":"markdown","e7bd642c":"markdown","9f6eeeac":"markdown","e7d9cc1d":"markdown","ec36c5b6":"markdown","e4b713dc":"markdown","eb5d8730":"markdown","128f6827":"markdown","578f5e55":"markdown","60e45803":"markdown","6cfae25d":"markdown","1e092577":"markdown","d9ba2922":"markdown","d6a76682":"markdown","82736f13":"markdown","a95d9119":"markdown","2dd62042":"markdown","1a35ad05":"markdown","37d8967f":"markdown","126ccb9e":"markdown","9378c7c3":"markdown","e6b878fb":"markdown","2202ba77":"markdown","d9e63dfc":"markdown","73f1c5bd":"markdown","c04a8163":"markdown","730dfc5f":"markdown","d41eea8c":"markdown","af02efe9":"markdown","5717c943":"markdown","9ce5d04a":"markdown","84e7fc21":"markdown","436c6bc2":"markdown","00e7a5e6":"markdown","913b3d76":"markdown","4267ba40":"markdown","a1864a27":"markdown","167ff668":"markdown","886b0b29":"markdown","c12a4773":"markdown","f19f3921":"markdown","879035ab":"markdown","aa5d87aa":"markdown","bed7bc80":"markdown","0bb9cf3c":"markdown","134d00ce":"markdown","e7c83dff":"markdown","cba7c67f":"markdown","4248eee7":"markdown","ec9d5f5c":"markdown","e9ff7537":"markdown","4e26eec5":"markdown","f6f15301":"markdown","45aee08b":"markdown","e241b348":"markdown","2b98b40c":"markdown","9d346608":"markdown","830a91c2":"markdown","6c269f31":"markdown","1313957a":"markdown","45fbdd64":"markdown","996610fb":"markdown","75289422":"markdown","1c0343d5":"markdown","82317b7b":"markdown","a9628a56":"markdown","903f304b":"markdown","edbb4dbb":"markdown","0294cf73":"markdown","e80008e6":"markdown","b855c537":"markdown","bcf1069a":"markdown","27e5c5ff":"markdown","6c9aa020":"markdown","3b3cc25b":"markdown","400137bc":"markdown","bcb70975":"markdown","a27faa77":"markdown","29633a7c":"markdown","e1c50c02":"markdown","06ff43f9":"markdown","77f069e6":"markdown","6741f3f1":"markdown","d07253e4":"markdown","8a055498":"markdown","6087084b":"markdown","2ae7b27c":"markdown","8a5227a5":"markdown","79284500":"markdown","9b8834bd":"markdown","05800af3":"markdown","00283033":"markdown","6eb36d38":"markdown","dde3deac":"markdown","093f2c92":"markdown","8900e108":"markdown","fc7005a9":"markdown","b4faf0b3":"markdown","10954150":"markdown","36e4d6ec":"markdown","68e6ff79":"markdown"},"source":{"450e6a29":"# You can edit the font size here to make rendered text more comfortable to read\n# It was built on a 13\" retina screen with 18px\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.rendered_html { font-size: 18px; }<\/style>\"))\n\n# we'll also use this package to read tables\n# it's generally useful for astrophysics work, including this challenge\n# so we'd suggest installing it, even if you elect to work with pandas\nfrom astropy.table import Table","8df32c2e":"\nimport matplotlib.pyplot as plt\nfrom PIL import Image\nimport numpy as np\n%matplotlib inline\n%config InlineBackend.figure_format = 'retina'\n\ndef displayimage(image):\n    img = np.array(Image.open(image))\n    plt.figure(figsize=(10,10))\n    plt.axis('off')\n    _ = plt.imshow(img)\ndisplayimage('..\/input\/plasticc-astronomy-starter-kit-media\/LSST_night.jpg')\n","6162e867":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/LSST_FoV.jpg')","424eb146":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/HST_field_of_view.jpg')","4a9164ad":"%%HTML\n<div align=\"middle\">\n<video width=\"60%\" controls>\n      <source src=\"https:\/\/storage.googleapis.com\/kaggle-datasets\/52432\/98042\/SN98bu_LC.mp4?GoogleAccessId=web-data@kaggle-161607.iam.gserviceaccount.com&Expires=1538266058&Signature=SgHGTPeH4qfe%2BvxF08OY0mBaQX5GxbSOUe2X2ibg%2FxWhGnJNaQ7JT57lFaAOpjN9HAEC%2Fy1o4OCzD3AdR%2F%2FLRXeSfY6BMZdsXclppAzS2Uf%2BXyhIYFXUhGe%2F1gc5Gch5myz%2FOre1h%2F5Fgh7AhK6dKAVMHhLYREWTWEyV8MJkhXtsy3a%2B%2BjwerdcdOiGtuQe3JzjHudBsw%2FjOCtLxYsA4SMNtI6F6750cgqAvC7OgNX6vt4tCpCQW6LxyZSn64sFD0ulZJF9IWWX9tqyMdVgcdb2CEYRke91kpXivdGAvjQrZDr1OkJXSYq6QcXY3JMGrx9egN0iMe3pIJ35Z8DPEsg%3D%3D\" type=\"video\/mp4\">\n<\/video>\n<\/div>","d7ca762b":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/variability_tree.jpg')","0f8b6283":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/prism.jpg')","f9236010":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/SN_Spectra.jpg')","2e42cc9c":"displayimage('..\/input\/plasticc-astronomy-starter-kit-media\/smartt_supernovae_diversity.jpg')","01158785":"def displayimageconverted(image):\n    img = np.array(Image.open(image).convert(\"RGBA\"))\n    plt.figure(figsize=(10,10))\n    plt.axis('off')\n    _ = plt.imshow(img)\ndisplayimageconverted('..\/input\/plasticc-astronomy-starter-kit-media\/atlas_of_variable_stars.png')","3da31497":"import io\nimport base64\n\nvideo = io.open('..\/input\/plasticc-astronomy-starter-kit-media\/LSST_filter_change.mp4', 'rb').read()\nencoded = base64.b64encode(video)\nHTML(data='''\n<video width = 90% controls>\n   <source src=\"data:video\/mp4;base64,{0}\" type=\"video\/mp4\" \/>\n<\/video>'''.format(encoded.decode('ascii')))\n\n","93bd1ecb":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/LSST_passbands.jpg\")","bc771127":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/LSST_construction.jpg\")","d3d945a0":"obj1 = Table.read('..\/input\/plasticc-astronomy-starter-kit-media\/fake010.csv', format='csv')\nobj1","97a33d4f":"displayimageconverted(\"..\/input\/plasticc-astronomy-starter-kit-media\/2007-X-025_R.PS.png\")\ndisplayimageconverted(\"..\/input\/plasticc-astronomy-starter-kit-media\/2007-X-025_I.PS.png\")","a078eec5":"import os\nimport numpy as np\nimport scipy.stats as spstat\nimport matplotlib.pyplot as plt\nfrom collections import OrderedDict\n\n%matplotlib inline","1cabb197":"class LightCurve(object):\n    '''Light curve object for PLAsTiCC formatted data'''\n    \n    _passbands = OrderedDict([(0,'C4'),\\\n                              (1,'C2'),\\\n                              (2,'C3'),\\\n                              (3,'C1'),\\\n                              (4,'k'),\\\n                              (5,'C5')])\n    \n    _pbnames = ['u','g','r','i','z','y']\n    \n    def __init__(self, filename):\n        '''Read in light curve data'''\n\n        self.DFlc     = Table.read(filename, format='ascii.csv')\n        self.filename = filename.replace('.csv','')\n        self._finalize()\n     \n    # this is some simple code to demonstrate how to calculate features on these multiband light curves\n    # we're not suggesting using these features specifically\n    # there also might be additional pre-processing you do before computing anything\n    # it's purely for illustration\n    def _finalize(self):\n        '''Store individual passband fluxes as object attributes'''\n        # in this example, we'll use the weighted mean to normalize the features\n        weighted_mean = lambda flux, dflux: np.sum(flux*(flux\/dflux)**2)\/np.sum((flux\/dflux)**2)\n        \n        # define some functions to compute simple descriptive statistics\n        normalized_flux_std = lambda flux, wMeanFlux: np.std(flux\/wMeanFlux, ddof = 1)\n        normalized_amplitude = lambda flux, wMeanFlux: (np.max(flux) - np.min(flux))\/wMeanFlux\n        normalized_MAD = lambda flux, wMeanFlux: np.median(np.abs((flux - np.median(flux))\/wMeanFlux))\n        beyond_1std = lambda flux, wMeanFlux: sum(np.abs(flux - wMeanFlux) > np.std(flux, ddof = 1))\/len(flux)\n        \n        for pb in self._passbands:\n            ind = self.DFlc['passband'] == pb\n            pbname = self._pbnames[pb]\n            \n            if len(self.DFlc[ind]) == 0:\n                setattr(self, f'{pbname}Std', np.nan)\n                setattr(self, f'{pbname}Amp', np.nan)\n                setattr(self, f'{pbname}MAD', np.nan)\n                setattr(self, f'{pbname}Beyond', np.nan)\n                setattr(self, f'{pbname}Skew', np.nan)\n                continue\n            \n            f  = self.DFlc['flux'][ind]\n            df = self.DFlc['flux_err'][ind]\n            m  = weighted_mean(f, df)\n            \n            # we'll save the measurements in each passband to simplify access.\n            setattr(self, f'{pbname}Flux', f)\n            setattr(self, f'{pbname}FluxUnc', df)\n            setattr(self, f'{pbname}Mean', m)\n            \n            # compute the features\n            std = normalized_flux_std(f, df)\n            amp = normalized_amplitude(f, m)\n            mad = normalized_MAD(f, m)\n            beyond = beyond_1std(f, m)\n            skew = spstat.skew(f) \n            \n            # and save the features\n            setattr(self, f'{pbname}Std', std)\n            setattr(self, f'{pbname}Amp', amp)\n            setattr(self, f'{pbname}MAD', mad)\n            setattr(self, f'{pbname}Beyond', beyond)\n            setattr(self, f'{pbname}Skew', skew)\n        \n        # we can also construct features between passbands\n        pbs = list(self._passbands.keys())\n        for i, lpb in enumerate(pbs[0:-1]):\n            rpb = pbs[i+1]\n            \n            lpbname = self._pbnames[lpb]\n            rpbname = self._pbnames[rpb]\n            \n            colname = '{}Minus{}'.format(lpbname, rpbname.upper())\n            lMean = getattr(self, f'{lpbname}Mean', np.nan)\n            rMean = getattr(self, f'{rpbname}Mean', np.nan)\n            col = -2.5*np.log10(lMean\/rMean) if lMean> 0 and rMean > 0 else -999\n            setattr(self, colname, col)\n    \n    # this is a simple routine to visualize a light curve\n    # it can plot vs the MJD array of the light curve\n    # or vs an optional `phase` array that you pass \n    def plot_multicolor_lc(self, phase=None):\n        '''Plot the multiband light curve'''\n\n        fig, ax = plt.subplots(figsize=(8,6))\n\n        \n        if phase is None:\n            phase = []\n        if len(phase) != len(self.DFlc):\n            phase = self.DFlc['mjd']\n            xlabel = 'MJD'\n        else:\n            xlabel = 'Phase'\n            \n        for i, pb in enumerate(self._passbands):\n            pbname = self._pbnames[pb]\n            ind = self.DFlc['passband'] == pb\n            if len(self.DFlc[ind]) == 0:\n                continue\n            ax.errorbar(phase[ind], \n                     self.DFlc['flux'][ind],\n                     self.DFlc['flux_err'][ind],\n                     fmt = 'o', color = self._passbands[pb], label = f'{pbname}')\n        ax.legend(ncol = 4, frameon = True)\n        ax.set_xlabel(f'{xlabel}', fontsize='large')\n        ax.set_ylabel('Flux', fontsize='large')\n        fig.suptitle(self.filename, fontsize='x-large')\n        fig.tight_layout(rect=[0, 0, 1, 0.97])\n    \n    def get_features(self):\n        '''Return all the features for this object'''\n        variables = ['Std', 'Amp', 'MAD', 'Beyond', 'Skew']\n        feats = []\n        for i, pb in enumerate(self._passbands):\n            pbname = self._pbnames[pb]\n            feats += [getattr(self, f'{pbname}{x}', np.nan) for x in variables]\n        return feats","5bd13339":"lc = LightCurve('..\/input\/plasticc-astronomy-starter-kit-media\/fake010.csv')\nlc.plot_multicolor_lc()","cb9713fc":"lc = LightCurve('..\/input\/plasticc-astronomy-starter-kit-media\/fake030.csv')\nlc.plot_multicolor_lc()","58b30d20":"from gatspy.periodic import LombScargleMultiband","8e56db5f":"model = LombScargleMultiband(fit_period=True)\n\n# we'll window the search range by setting minimums and maximums here\n# but in general, the search range you want to evaluate will depend on the data\n# and you will not be able to window like this unless you know something about\n# the class of the object a priori\nt_min = max(np.median(np.diff(sorted(lc.DFlc['mjd']))), 0.1)\nt_max = min(10., (lc.DFlc['mjd'].max() - lc.DFlc['mjd'].min())\/2.)\n\nmodel.optimizer.set(period_range=(t_min, t_max), first_pass_coverage=5)\nmodel.fit(lc.DFlc['mjd'], lc.DFlc['flux'], dy=lc.DFlc['flux_err'], filts=lc.DFlc['passband'])\nperiod = model.best_period\nprint(f'{lc.filename} has a period of {period} days')","376a9b3a":"phase = (lc.DFlc['mjd'] \/period) % 1\nlc.plot_multicolor_lc(phase=phase)","6a284bcf":"header = Table.read('..\/input\/plasticc-astronomy-starter-kit-media\/plasticc_training_set_metadata_stub.csv', format='csv')\nheader","2d4a6daf":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/allsky_equatorial.jpg\")","931a1aef":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/skymap_minion1016.jpg\")","923808c9":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/allsky_galactic.jpg\")","9232b08a":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/redshift.jpg\")","61643e38":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/Gaia_milky_way.jpg\")","a866a4a6":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/large_scale_structure.jpg\")","9f65f461":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/hubble_cepheid.jpeg\")","21bba2d9":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/hubble_law.jpeg\")","9313d323":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/JLA_HubbleDiagram.png\")","c8ae7cb3":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/UniverseTimeline.jpg\")","0179d40d":"displayimage(\"..\/input\/plasticc-astronomy-starter-kit-media\/dust_map.jpeg\")","17b9227b":"video = io.open('..\/input\/plasticc-astronomy-starter-kit-media\/MilkyWayDust.mp4', 'rb').read()\nencoded = base64.b64encode(video)\nHTML(data='''\n<video width = 60% controls>\n   <source src=\"data:video\/mp4;base64,{0}\" type=\"video\/mp4\" \/>\n<\/video>'''.format(encoded.decode('ascii')))","2725ab12":"There's not much time too - LSST is coming up fast. Here's a construction picture from August 2018, and it is looking a lot like the render at the top of this page! \n","b95b9c11":"#### _Figure 13: The LSST telescope under construction on Cerro Pachon in Chile, Credit: Gianluca Lombardi, Gemini Observatory_\n\n***","86b26ed2":"#### _Figure 5: The hierarchy of variable and transient sources. Credit: Laurent Eyer and Nami Mowlawi, Universit\u00e9 de Gen\u00e8ve_","6eab29fa":"You might prefer to have the y-axis - called the distance modulus - related to the base 10 logarithm of the luminosity distance, rather than the redshift provided in `hostgal_photoz`. ","389c6af9":"The exact details of each eclipsing binary system determine the properties of the light curve - how bright each star is, their relative sizes, how fast they orbit each other - but all of these events have the same general light curve shape. And of course, depending on the period, the time scale of the variability can be anything from hours to years!","9ddd8eb6":"Active galactic nucleii - massive black holes surrounded by hot dust and gas at the centers of galaxies - exhibit this kind of behavior.","a1e9b0da":"The test set is a version what we expect to have after 3 years of LSST operations. ","7ee6d561":"#### _Figure 26. Hubble's Hubble Diagram showing the Universe expanding, Credit: Edwin Hubble_\n\nWe call this the \"Hubble Law\" and this kind of plot a \"Hubble Diagram\" (well Hubble didn't - he called it \"Figure 1.\")","76e1852e":"#### _Figure 29: A dust map of the Milky Way from Planck, Credit: ESA \/ NASA \/ JPL-Caltech_","27a92b83":"The same spectroscopy that is expensive and hard to get to classify transients, which is the raison d'\u00eatre for PLAsTiCC in the first place...","c459d39c":"The 68% confidence interval of the measurement is in the `flux_err` column. ","0a8ca64a":"Additionally, if you remember the video of the supernova, you saw it getting brighter initially and then getting fainter. The light from the supernova explosion changes with time and therefore so do the spectra. We try to obtain a spectrum close to when the object is brightest, but often we can't schedule a telescope in advance exactly then, and even when we do the weather might not cooperate. If you can't see the stars on a cloudy night, then it's probably not good conditions to try and get a spectrum.","3554e947":"#### _Figure 12: The throughput of the LSST passbands with wavelength. Your eyes are sensitive to just the *g and r* bands_","a3c71612":"### 4b. Galactic Coordinates\n<a id=\"section4b\"><\/a>\n\nRA and Dec are \"equatorial\" coordinates - a coordinate system where the Earth's equator is extended outwards into infinity and splits space into an imaginary north and south hemisphere.","83508997":"Objects for which the total flux from source and background is higher than that of the template have positive flux, and when the total flux is lower than the template flux, they have have negative flux.","4cd4e733":"#### _Figure 23: The GAIA view of our Galaxy, Credit: ESA\/GAIA_\n\nThis fuzzy blob below and to the right of center is called the Large Magellanic cloud - a companion galaxy to our Milky Way. \n\nThe other fuzzy blob near it is called the Small Magellanic Cloud. You can see it with your own eyes from a dark site in the southern hemisphere. ","ea71c2ac":"The diversity of these sources is important. ","fde4e843":"How much light gets through each filter depends not only on the properties of the filter, but really the transmission of everything between the camera and the source - the atmosphere, dust in our galaxy, dust in the galaxy of the source... \n\nWe refer to the total transmission of each filter as the \"passband\" (and often use the terms interchangeably). ","a097cf71":"Takes a while eh... you could narrow the search range a bit, if you knew something about the astrophysical class of the object of interest... which is what you want to determine.","6b90eae9":"As we look to farther horizons, to determine the expansion history of the Universe takes the equations of Einstein's General Theory of Relativity. ","c0455b85":"If you have more questions, you can find the PLAsTiCC dev team on the Kaggle forums, and we'll do our best to answer your questions if we can. We hope you have fun and we look forward to your submissions - remember, your work will influence the entire LSST project. \n\nCome help us explore the Universe!","76e845ae":"Unfortunately, spectroscopy takes a tremendous amount of telescope time and there aren't enough telescopes in the world _combined_ to keep up with the LSST event rate. ","a188b18b":"Measuring this expansion history takes bright sources that we can determine the distance to, like those type Ia supernovae like SN1998bu. ","fedd5c83":"With a spectrum, you can distinguish absorption and emission lines of atomic lines that are a few \"Angstroms\" across (the symbol for it is an A with the circle on top) - very approximately 10,000 times smaller than the width of an average strange of human hair. ","19a6620a":"Each filter is a summing the total amount of light in one small region of the spectrum, so you can't measure narrow atomic lines anymore, but you can get many more light curves in the time it takes to get one spectrum. ","5b4312a9":"You can get a clearer view of it from ESA's GAIA satellite without a coordinate grid on top. ","e86cb32b":"### 2c. Flux and Flux Error\n<a id=\"section2c\"><\/a>\n\nThe last two columns in this file are named `flux` contains the actual photometry - the measurements of brightness of this source as a function of time. ","f9c9911e":"With PLAsTiCC, since we're simulating the time series, we don't have the full breadth of this contextual information. ","2106385a":"Even the biggest spectrographs with optical fibers dedicated to each sources can only manage a few thousand sources at most...","95163320":"As we look farther our, we look further back in time. ","ca36f4a4":"This means that LSST can make a map of the entire southern sky, resolving details that are smaller than the width of a human hair held at arm's length... every 4 nights. ","1593ad4d":"We've included some example light curve data along with this Kernel to illustrate some of the astrophysical effects you'll encounter in the full data set. ","dad493eb":"#### _Figure 9: The light curves of an eclipsing binary system, Credit: AstroLab, Durham University, https:\/\/community.dur.ac.uk\/physics.astrolab\/eclipsing.html_","3328aef8":"The difference is even more stark when compared against telescopes that are both smaller and have smaller FoVs - like most everything astronomers have access to now. The Hubble Space Telescope only has a 2.4 meter mirror, and here's it's FoV... relative to one of those full moons:\n","46953f4d":"LSST, based on Chile, views the southern sky. Comparing how the galaxy looks in this projection should help make sense of the otherwise weird looking pattern of observations that LSST plans to obtain:\n","41bcbbcb":"For galactic objects with `hostgal_photoz`$ = 0 $, the `distmod` is reported as `NaN` (the distance would be 0, and taking the logarithm of 0 is a bad idea).","c6812f59":"Each object has observations in every passband. The passbands that LSST will use are called *u, g, r, i, z*, and *y*. In other words, each object has six time-series you can use for classification. \n","02c4dbbf":"You saw that different kinds of supernovae have different spectra. \nThis also means that they'll have different light curves. \n\nDifferent rise and fall times, different absolute energies, a different structure of bumps and wiggles. \n","933d04a5":"Hubble isn't just looking at a smaller piece of sky, it is also collecting light from this region much more slowly than LSST. \n\nConsequently, each and every week LSST will find more sources that vary with time than Hubble has ever seen... in its entire 28+ year life. ","354331c4":"The first widely known measurement of this expansion rate came two years later, from Edwin Hubble who showed definitely that the further galaxies were from our own, the faster they were moving away.","650b2e15":"Here's an (incomplete!) tree diagram of the various kinds of variable sources in the night sky:\n","de6d6452":"Which objects are in the WFD vs the DDF are specified by the `ddf_bool` column in the header (1 if in DDF, 0 otherwise). ","169b049a":"While we can't give you all the contextual information, we do provide some metadata - a few essential elements that you _may_ want to use to augment the features extracted directly from the light curves (this has pluses and minuses). \n\nLet's start by taking a look at the metadata table (a stub of which is provided with the starter kit)","6ce9536e":"There's a lot that we can get out of understanding the time-domain of our Universe.","5974f2c5":"Dispersing the light like this is called \"spectroscopy\", and allows us to look for characteristic atomic signatures from astrophysical sources. ","d11d4876":"This is followed by a gap of 30 minutes -- 2 hours (the results from PLAsTiCC might help decide this too!) where the telescope looks at other patches of sky, before coming back to the original patch of sky.","82e535de":"It will then take another 15--30 second picture. ","a8d71c81":"Lets begin by looking at the format of the light curve and explaining what the columns are (we'll get to the header in Section 3):","d9aaeb4f":"This is Hubble's plot of his measurements:\n","bad894f2":"For some objects, the contribution from the source will fade over time, leaving just the background - which is about the same level as the flux in the template, so some flux entries will be consistent with zero.","e411ec80":"Some of the light curves in the training set should already look familiar - this is a type Ia supernova - like SN1998bu in the animation. ","4ce4c417":"Folding the observations to this period takes that noisy time-series and shows you some of the structure in the data. \n\nIf you look at the light curve below and compare it to the hand drawn diagram of variable stars from 1906, bearing in mind that it's period is a bit less than 12 hours, you should be able to classify it pretty easily.","d06e013e":"(Historical parenthetical: The original Julian Date which began counting up from zero on noon on Jan 1, 4713 BC. When the Soviet Sputnik launched, the Smithsonian Astrophysical Observatory decided to make this zero reference date a little more current. The SAO needed a way to keep track of Sputnik's orbits but the reference for the Julian date was so far in the past that the numbers were too large for their VAX\/VMS system to handle. So they did the simple thing and made the reference date of the VAX\/VMS system the same as the reference date for their new time system - creatively named the \"Modified Julian date\" - and consequently, most of astronomy. This date is conveniently 2400000.5 - the extra 0.5 because the VAX reference starts at midnight, while the Julian Date starts from noon.)","c67b0df1":"(Historical parenthetical: See <a href=\"http:\/\/articles.adsabs.harvard.edu\/cgi-bin\/nph-iarticle_query?2008JAVSO..36..110M&amp;data_type=PDF_HIGH&amp;whole_paper=YES&amp;type=PRINTER&amp;filetype=.pdf\">Milone and Young, 2008<\/a>, Sec. 5)","86b3418e":"where $z$ is the redshift, $\\lambda_{\\text{Earth}}$ is the original wavelength we measure on Earth, and $\\Delta \\lambda$ is the change in wavelength, $v_r$ is the recession velocity and $c$ is the speed of light.","8cc09372":"If we color the galaxies in the nearby Universe that we can see from Earth by redshift with a small telescope, there are many sources that we can see with higher redshifts. \n","de2de33d":"Redshift is so named because if you take the light from distance astrophysical sources and pass it through a prism, you see the same atomic fingerprint of elements and molecules you find here on Earth... just shifted.","95bd3636":"And you'd be right! ","4b50718d":"If you prefer to work with galactic coordinates instead of equatorial coordinates (`ra` and `decl`), these are provided in the header in the columns `gall` and `galb`.","2bed9c4b":"If you want another time format like UNIX time (which counts decimal seconds from a reference date of Jan 1st, 1970), then it's easy to convert between the two. \n\nThe UNIX epoch in MJD is 40587 (or JD 2440587.5), so you'd use:\n\n$$\\textrm{UNIX time} = (\\textrm{MJD} - 40587) \\times 86400$$\n\nwhere 86400 is the number of seconds in 24 hours.","1aeceade":"It's worth noting that while astrophysical sources have to emit enough light to be brighter than the background sky (more or less the definition of what a source is), the flux can be positive or negative.","10b336c0":"### 2a. Time\n<a id=\"section2a\"><\/a>\n\nThe second column, labeled `mjd`, is the time that LSST took an image. More on why it is called this later. First, you should get a sense for what the pattern of LSST observations is.","512de5fc":"This is also one of the reasons why LSST is being built on top of a mountain high in the Atacama desert of Chile - it's far away from bright city lights and the sky background is lower, allowing us to detect fainter sources. ","b292e1e7":"The teams that discovered this won the Nobel prize for their work in 2011. ","c36b3c4a":"LSST presents us with a great opportunity here because it will find an order of magnitude (or more) of these kinds of events than astronomers have ever observed. \n\nThe same event rate also presents a new challenge - supernovae aren't the only sorts of variable and transient events in the night sky. ","17d88a69":"## 4. Primer cont'd - Metadata Provided with Light Curves\n<a id=\"section4\"><\/a>","ad8e21e9":"#### _Figure 21: The sky in galactic coordinates with a equatorial coordinate grid overlaid_\n\nwhere I'm leaving the celestial coordinate grid (in yellow - notice how they no longer correspond to the North and South relative to the plane of our Galaxy).","68de8ef8":"(You might even be able to spot some galaxies in the northern hemisphere, but remember the sky in galactic coordinates doesn't look like the sky you'd see from Earth)","c6a5e24c":"General relativity in the expanding Universe gives us a time machine. ","8493ce95":"#### _Figure 1: The LSST Telescope, Credit: LSST\/NSF\/AURA\/Todd Mason Productions Inc_","2d4c04f7":"$$z = \\frac{\\lambda_{\\text{Source}} - \\lambda_{\\text{Earth}}}{\\lambda_{\\text{Earth}}} = \\frac{\\Delta \\lambda}{\\lambda}  \\sim \\frac{v_r}{c}$$","d5c17cd2":"Dust, like increasing luminosity distance (and therefore redshift) in our Universe, makes things fainter and redder. We're all used to this effect - we see it with our Sun and Moon everyday. Our atmosphere scatters blue light more than the red light, making the sun and the moon appear more red than if we could see them from space. As the sun gets near the horizon and the light from it has to pass through more of the Earth's atmosphere to reach us, it appears even redder than when it is high in the sky. \n\nWhile the light curves we've provided are corrected for the dimming and reddening - called the extinction - along the line of sight in our Galaxy, this correction isn't perfect, because we've not got perfect knowledge of how much dust there is along any line of sight. You'll notice the map in the video is higher resolution towards the center of the galaxy where there are more stars, and lower resolution in the opposite direction for instance.\n\nAdditionally, extragalactic sources can also suffer from extinction _in their own host galaxies._ Galactic sources are nearer us and brighter, and because they are _in_ our Galaxy, they are likely to be in the plane. All said then, you should expect to find that Galactic sources have a different sort of distribution of dust along the line of sight to them than extragalactic sources.","4384d4c3":"#### _Figure 6: A prism dispersing light, creating a spectrum, open access jpeg._","3406613b":"This becomes even more apparent if we look with a different instrument and in a different passband, more sensitive to only the dust. ","b90b8a35":"We can use a Fourier technique known as the Lomb-Scargle Periodogram to estimate the characteristic scale, at least given some search range.","80ccaae7":"Of course, the dust isn't a single layer, and has 3D structure. \n\nAstronomers can map this structure using careful observations of lots of stars.","a965c410":"Also, the training set is not perfectly representative - we can usually only classify the brightest objects we find with spectroscopy. To do well in PLAsTiCC though, you'll have to classify everything","43d49093":"This linear relation between redshift and distance is approximate (hence the $\\sim$ sign).","8b27ee01":"This pattern of how a telescope observes the night sky is called the \"cadence\" and it has a large effect on how well the light curve of an astrophysical source is sampled. ","20aedc16":"Still, you might look at the RR Lyrae and supernova light curve and conclude that extracting information about shape and the relative strengths of the signal in different passbands is a promising way to encode the information on each object... ","a03bd86f":"### 4d. A view of our cosmic neighborhood\n<a id=\"section4d\"><\/a>\n\nYou might already have noticed the fuzzy blob in the Southern hemisphere, below and to the right of center of our galaxy in galactic coordinates.","d50843f7":"When scientists used type Ia supernovae to do this for the first time in 1998, they discovered something remarkable - that the Universe wasn't just expanding, but the expansion was accelerating.\n\n#### *Something is _pushing_ distant galaxies away from us at an ever increasing rate!*","0ca48f03":"Here's the filter exchanger for the LSST camera (adult human for scale):","26bc6a0c":"The training sample is what the entire astronomical community can expect to have before LSST turns on, except where astronomers have a mishmash of observations from different telescopes (something you'll have to deal with if you decide and try to augment it from the literature), you get a nice homogeneous training set. ","fca313c4":"The specific time format we will use in PLAsTiCC is called the Modified Julian Date (MJD) - simply the number of decimal days from midnight on November 17, 1858. ","abf54bd6":"This Kaggle Kernel provides an introduction to some of the astrophysics that might be relevant for the \"Photometric LSST Astronomical Time-series Classification Challenge\" (PLAsTiCC) on Kaggle. It's intended to provide some domain knowledge to data scientists taking part in the challenge, and may even prove useful to some of the astronomers competing. \n\nWhile there's no practical way to cover all of the background astrophysics in a single Kernel, there should be enough relevant material to tackle the challenge. You can also safely ignore it and dive right in and do things your own way. Astrophysics is interesting stuff though, and if you are curious and want to know more about something, or how to do something that isn't covered here then just ask! You'll find us on the Kaggle forum for this challenge! \n\n***\n\n## Contents:\n- [1. LSST, PLAsTiCC and You](#section1)\n    - [1a. The Large Synoptic Survey Telescope](#section1a)\n    - [1b. Light Curves: Time-series of Brightness of Astronomical Sources](#section1b)\n    - [1c. How Astronomers have Studied Astronomical Sources Thus Far](#section1c)\n    - [1d. The PLAsTiCC Challenge: Classifying Astronomical Sources with Light Curves](#section1d)\n- [2. A Primer on the Data - Light Curves](#section2)\n    - [2a. Time](#section2a)\n    - [2b. Passband](#section2b)\n    - [2c. Flux and Flux Error](#section2c)\n- [3. Exploring the Light Curves](#section3)\n- [4. Primer cont'd - Metadata Provided with Light Curves](#section4)\n    - [4a. Coordinates on the Sky](#section4a)\n    - [4b. Galactic Coordinates](#section4b)\n    - [4c. Redshift](#section4c)\n    - [4d. A view of our cosmic neighborhood](#section4d)\n    - [4e. Cosmology](#section4e)\n    - [4f. Dust](#section4f)\n\n***","d41bc95f":"This isn't all that different from the Doppler shift of the sound of an ambulance or police siren moving across you - it'll increase in frequency as the vehicle approaches you, and decrease in frequency as it moves away. ","d74a9350":"### 4f. Dust\n<a id=\"section4f\"><\/a>\n\nDepending on where you are looking on the sky, there's a lot of structure in our Milky Way - lanes of gas and dust obscure the view of stars and galaxies behind it.","ff689a1a":"The other reason why this is using example data and not the training data supplied with the challenge is that we've identified the target classes in the challenge with random integers. This should help reduce astronomer's advantage of domain knowledge - astronomers will have to identify which class corresponds to which integers before they can take advantage of their understanding of the properties of different classes. Most astronomers only specialize in a few kinds of objects though, so even their domain knowledge isn't complete. ","5917a613":"## _<center> ANOTHER IMPORTANT NOTE <\/center>_\n\nThe training set has spectroscopic redshifts for all sources. You'll notice quickly that they don't always agree with the photometric redshift. The photometric redshift is sometimes wrong. Consequently, we also give you an estimate of the 68% uncertainty on the photometric redshift (which itself might be inaccurate...) - `hostgal_photoz_err`. Be warned though that the actual photometric redshift distribution is asymmetric, and the redshift is not likely to be less than zero, so you might want to treat it as just a weight. Why is the redshift unlikely to be less than 0... we'll get to that in a bit.\n\nThe test set does not have spectroscopic redshifts for all sources. There's a few because we simulate occasionally getting lucky and finding a new source in a galaxy which already had spectroscopy, but the vast majority of them will be `NaN`. You could potentially try to use the training set, together with the subset of the test data that does have both spectroscopic and photometric redshifts to make a better redshift predictor if you like, or you could ignore it altogether.\n\nThat said, redshift is a great feature! We know how to separate extragalactic and galactic sources pretty well, so we simulate this ability by setting the redshifts of galactic sources to exactly `0`. That tells you they are within the galaxy and reduces the size of the possible models they might be, but doesn't identify which is which - that's still your challenge! Most machine learning techniques will pick this feature of redshift up easily, but you might use it to build separate classifiers for extragalactic and galactic sources if you like.","12aa4fdd":"### 1c. How Astronomers have Studied Astronomical Sources Thus Far\n<a id=\"section1c\"><\/a>\n\nTo determine the class of any particular astrophysical source, we currently need lots of observational data. \n\nAt present, we classify the sources not using just their light curves, but using more detailed follow-up with other telescopes. We use \"spectrographs\" - instruments that, much like a prism, disperse a beam of light, spreading different colors over position - to study astrophysical sources.\n","ea700b25":"#### _Figure 25. Hubble's Glass Plate - notice the \"Var!\" in the corner. Hubble was using visual inspection for classification, Credit: Carnegie Observatories_","1a7f72f1":"You'll have to design your algorithm with speed as a consideration. ","6b5fca07":"#### *Figure 18: Equatorial coordinates, Credit: https:\/\/en.wikipedia.org\/wiki\/Right_ascension*","4de23c27":"#### _Figure 27. The JLA Hubble Diagram, Credit: Marc Betoule (Paris Center for Cosmological Physics)_\n\nHubble's data covers such a small range that it doesn't even show up on this plot. We've done a lot in 80 years!","8f03b816":"Wiki has a good illustration of this coordinate system:\n<center><img src=\"https:\/\/storage.googleapis.com\/kaggle-datasets\/52432\/98042\/Celestial_Coordinates.gif?GoogleAccessId=web-data@kaggle-161607.iam.gserviceaccount.com&Expires=1538263082&Signature=cjgIOaVBICGMHskVyXJz%2FgwKcrpDyurWP2yWIi6i4CdmhjDjLk2QnrOO%2FJhhAGH5wI6g7HFo3YCUd2hrvRDc4ZMBHSXSS1n6hU%2FNgSfsRa4RQw7%2FPMylQPIQLCegx395nx8%2F%2FbSzXxTmgmekzWMJWI4GEAYzz2rymJPMa93li%2B8Vaswl4tco7o03ar0dpprbDF3Mwxb8cA%2FfqnuSw6agO4b5FXMYcx8t53UQ%2BbuhC1XDEe%2BwARif4tLg1NIHilvxTIxaWj9S8CFWIrlS%2F%2Botc1lxXlLbhKTY07UqW3JsfW6s7RA0ZOgrDgP1j%2BCyE2g8otS1Ct4F1DxeF7zCxHhjgw%3D%3D\"><\/center>","7a1879a5":"But there's another astrophysical effect that affects the determination of time scales and colors, and this one has nothing to do with the nature of the object - what it is - but rather, *where* it is.","1a9767af":"And you have more information than just the one time-series. ","96f3f698":"Some sources are intrinsically variable, while others are extrinsic - they vary, not because they the source itself has some fundamental physical property that causes them to vary, but rather because of extra attributes - e.g. rotation, or forming part of a binary system that just happens to eclipse along our line of sight from Earth. Some sources vary periodically, while others show random or stochastic behavior. Yet others, like supernovae, typically explode once and fade away. \n\nThe sources in the training set are from a mixture of these different astrophysical classes, including:\n\n- Secular, Pulsating and Eruptive Variable Stars\n- Tidal Disruption Events\n- Kilonovae\n- Supernovae of different types\n- Active Galactic Nucleii \n- Microlensing Events\n- Eclipsing Binaries","af60479b":"### 4a. Coordinates on the Sky\n<a id=\"section4a\"><\/a>\n\nThe next few columns of metadata are related to an object's position in our three spatial dimensions.","d94d7f74":"#### _Figure 16: The ligt curve of FAKE030 - looks a bit more messy. Credit: Abhijit Saha (NOAO)_\n\nThis object for instance is something very different - it's a variable star. It's got a characteristic time scale, but you wouldn't know it from a simple light curve plot.","0237110b":"### 4c. Redshift\n<a id=\"section4c\"><\/a>\n\nThe position of a source on the sky is a tuple of two numbers (in either equatorial or galactic coordinates), but we live in a Universe with (at least) 3 spatial dimensions. The third number we use to locate objects in 3D space isn't even a distance from the origin - it's a speed! We call it the \"redshift.\"\n","a1f75ea1":"#### _It'll likely answers questions we don't even know to ask yet._","86e91779":"This example data is simpler than the real data - it has only four of the six passbands, and different properties from the full sample, so that the signal is more obvious, and only a few classes. ","5ffba58d":"This large FoV is what makes LSST so revolutionary. If you like photography, LSST has a 6.5 *meter* effective aperture and a focal ratio of f\/# of 1.23. ","90c43d3f":"#### _Figure 2: The LSST Field of View compared to a camera on a similar telescope and the Moon. Credit: Zelko Ivezic, LSST_","0f62343b":"Still it's a fairly reliable way to extract a period from an irregularly sampled recurring time-series. ","aa0ae074":"I'm not even going to pretend that $z$ and $Y$ have good reasons to be named what they are. ","138622a7":"Here's a visual timeline of the history of our Universe:\n","99c08ac1":"The DDFs will have more observations, but cover a much smaller chunk of sky. Consequently, the light curves will have better sampling, and potentially be found farther away in our Universe, but there's fewer objects. You may wish to treat the DDF and WFD objects separately and build different sorts of classifiers for them. This is entirely up to you, and the two sets of objects are weighted exactly the same, irrespective of which field they originated from.","bcc958e3":"The template image in the left panels is from 2004, while the \"current\" images are from 2007. The third panel has the difference between the two - and you can see there's some light left over near the fuzzy galaxy. The two rows correspond to roughly the $r$ filter and the $i$ filter. ","7edc4c4c":"You might look at something like this light curve, and try to estimate something like a full-width at half maximum to determine a time-scale. ","1f66478d":"This is the most reliable method for determining what a point of light in the night sky actually is, and there's a ton of information you can get from it. \n\nYou can learn more about it <a href=\"https:\/\/ed.ted.com\/lessons\/how-do-we-study-the-stars-yuan-sen-ting\">here<\/a>. ","27c08c58":"We can't really simulate it from previous surveys, because none of them achieve the same sort of signal-to-noise that LSST will - one of the big motivations for building LSST in the first place.   ","9b9bcf98":"#### _Figure 7: Spectra of different kinds of supernovae, with their atomic signatures labeled, Credit: Daniel Kasen (UC Berkeley)._","88fe8868":"That's a data rate of 20--40 terabytes, or about 1 US Library of Congress every night. It is, for want of a better word, ginormous.","b7530608":"#### _Figure 20: The LSST \"minion 1016\" exposure map in celestial coordinates. Credit: LSST Corporation_","d16affe3":"### 2b. Passband\n<a id=\"section2b\"><\/a>\n\nThe next column, labeled `passband` tells you the passband that the observation at time `mjd` was taken. ","8b3ba6c6":"We don't provide another column for distance modulus that was derived from `hostgal_specz` but there's a lookup table included with the dataset if you need to compute this (you probably don't). This is a purely computed quantity and is provided for convenience. It's not a measured distance to each source - actually measuring distances is complicated. You can watch a video about how we do it <a href=\"https:\/\/ed.ted.com\/lessons\/how-do-we-measure-distances-in-space-yuan-sen-ting\">here<\/a>. \n\nBecause the speed of light is fixed, and the distance to sources is increasing, you can also compute a how long it took for light from a source at some redshift took to reach up. This is also in the lookup table. You also don't need this, but it is cool to get a sense for the history of our Universe. ","e7bd642c":"If we unroll the sky into a flat <a href=\"https:\/\/en.wikipedia.org\/wiki\/Aitoff_projection\">Aitoff projection<\/a>, we can get a view of the entire sky:\n","9f6eeeac":"Also, some classes of objects exhibit stochastic variability - they don't repeat periodically, but they do change more on some time scales than others. ","e7d9cc1d":"The advantage of LSST and its giant camera is that it can take an image of several 100,000 astrophysical sources through a single filter at the same time. ","ec36c5b6":"#### _Figure 30: A Fly Through of our Galaxy's Dust, Credit: Gregory Green (Stanford\/KIPAC)_","e4b713dc":"That's it! Phew! It's the minimal bits of the astrophysics you may need to make sense of the data and start to tackle this challenge. \n\nThis Kernel does not need the actual challenge data.\n\nIn a companion Kernel, `plasticc_classification_demo`, we'll build a toy classifier on the challenge data, and introduce some of the useful packages astronomers use to tackle this problem.\n\n***","eb5d8730":"Here's how that looks:\n","128f6827":"The correction we applied to the light curves can be described by a single number for our Milky Way.","578f5e55":"That said, we're being deliberately vague about exactly what sorts of astrophysical sources you'll find in the data, and even what `target` number in the data corresponds to what astrophysical class.\n\nWe'll give you a few external resources for these events in a companion Kernel, if you are determined to augment the training set. \n\nNote that there's been exactly one kilonova event ever seen (we hope this will be out of date by the time LSST turns on though!), so it's not really possible to provide multiple examples in some cases!","60e45803":"If the source is moving towards us, things are shifted to the blue (or higher frequencies), while if the source is moving away from us, things are shifted to the red (or lower frequencies). ","6cfae25d":"The redshift of the Large Magellanic Cloud is a whopping 0.000875 - i.e. the wavelength of light hasn't exactly changed much. \n\nThat's about 163 miles\/second (or 262 km\/s) - fast, but less than a thousandth of the speed of light.","1e092577":"#### _Figure 28. A Timeline of our Universe, Credit: BBC Two, Stargazing Live, Public access NASA images_","d9ba2922":"This folded curve is suitable for feature extraction, but we don't a priori know what objects have periodic structure and which ones don't. ","d6a76682":"The light curves of these explosive transients can look radically different from the light curves of periodic variables. Take for instance the eclipsing binary system <a href=\"http:\/\/simbad.u-strasbg.fr\/simbad\/sim-id?protocol=html&Ident=Y+Psc&NbIdent=1&Radius=2&Radius.unit=arcmin&submit=submit+id\">Y Piscium<\/a>. This is an eclipsing binary system (a name which the animation below should help explain) with a light curve that looks like this:\n\n<center><img src=\"https:\/\/storage.googleapis.com\/kaggle-datasets\/52432\/98042\/Y_Psc_Animated_LC.gif?GoogleAccessId=web-data@kaggle-161607.iam.gserviceaccount.com&Expires=1538262235&Signature=kNFpXU3UFisXxfv4RppCSkLhC2xBgrIuFzVgdI7%2BbVMOUggcui9WFXF7jfFFRb36N5Iv3m9W%2B5SG6ryImaPx0phmNWfTYfjH7mHW8DPtrKjVouE4NwX%2BeLXwX2LLB%2Fr%2F5LG8bzsVY%2BJDeZR4Tfh30ToGu0aOGIlJxthIlOzzPqvUleCTow34vwcNg%2BolVRSCYKMvwtvd0iXDtmzMvOSWxJs3ynDJxbZ7E3AYvU4pF5sz16%2FonQ8BY1q%2BCnNWSOYbX%2BXU72CITygLqn6d9NOa%2FJnBlTFYlXtCuWgnnSYkS7wZyXHAPS7hdoQ9jHYX9JN3wREEf6Fb6Y85mbV8U%2B%2B%2BYw%3D%3D\"><\/center>","82736f13":"If you watched that video of the supernova video carefully, you'll have noticed that there's actually two traces of the brightness - one that covers the optical, and one that covers the infrared. ","a95d9119":"Note that you can also get this information from the `object_id` column (`object_id` < 1,000,000 are in DDF).","2dd62042":"#### _Figure 3: The Hubble Space Telescope's field of view compared to the Moon_","1a35ad05":"The telescope is going to have a 3.2 gigapixel camera that's about the size of an adult human to take images of the night sky. Those pixel numbers may not seem all that meaningful without a reference, so here is the LSST field-of-view  (FoV) compared against the full moon and a similar class telescope:\n\n","37d8967f":"#### _Figure 10: The Atlas of Variable Stars, Credit: Popular Science Monthly, from 1906_","126ccb9e":"We've mapped the passband names to integers, but the mapping is straightforward:\n\n$$ \\{ u \\rightarrow 0,~g \\rightarrow 1,~r \\rightarrow 2,~i \\rightarrow 3,~z \\rightarrow 4,~y \\rightarrow 5 \\} $$","9378c7c3":"These coordinates are supplied in the `ra` and `decl` columns of the metadata table.","e6b878fb":"#### _Figure 4: The light curve of supernova 1998bu. Credit: Peter Challis, Harvard\/CfA_ \n\nThe left panel shows you how the supernova event looked, while the right panel shows a plot of the brightness of the supernova, measured using a process called \"photometry,\" used to determine the light curve.","2202ba77":"You can even expect sources in the test set that aren't in the training set - we expect to find new classes of objects with LSST that we've never seen before, and we've simulated light curves based on theoretical predictions of how they ought to look!","d9e63dfc":"# **The PLAsTiCC Astronomy \"Starter Kit\"**\n### -Gautham Narayan, 20180831\n\nThis kernel was developed for PLAsTiCC on Kaggle. The original version of this kernel is available as a Jupyter Notebook on <a href=\"https:\/\/github.com\/LSSTDESC\/plasticc-kit\">LSST DESC GitHub<\/a>. \n\n***","73f1c5bd":"## 1. LSST, PLAsTiCC and You\n<a id=\"section1\"><\/a>","c04a8163":"#### _Figure 19: The sky in equatorial coordinates with a galactic coordinate grid overlaid_\n\nSplitting the sky into two hemispheres by extending the Earth's equator outwards, the Milky Way forms a graceful arc.\n\nLines of constant Right Ascension and Declination are in grey, while the green lines indicate a coordinate transform, where the plane of the galaxy defines the equatorial plane, instead of the Earth's equator - a galactic coordinate system.","730dfc5f":"Other variable stars have very different light curve shapes from eclipsing binaries. Indeed, variable stars were the first example of astronomers using light curve shapes for classification. \n\nHere's a hand-drawn illustration of some of the different known types of variable stars from <a href=\"https:\/\/archive.org\/details\/popularsciencemo69newy\">Popular Science Monthly in 1906<\/a> (page 179).","d41eea8c":"This is because our telescope detectors are sensitive to wavelengths of light well beyond the range our eyes can see. ","af02efe9":"This view from ESA's Planck satellite really drives that home:\n","5717c943":"These sources, even closely related classes, can have light curves that look quite different from each other. ","9ce5d04a":"#### _Figure 22: \"Redshift\" is a measure of how fast a distant source (with more distant on the top) is moving relative to us along the line of sight, and is determined from how much the wavelength (or alternately, the frequency) of the absorption and emission lines of atoms change, relative to what we see here on Earth (bottom panel)_","84e7fc21":"Here's an illustration of one of these source - supernova 1998bu, imaged with the 1.2m telescope at the Fred Lawrence Whipple Observatory. ","436c6bc2":"On any given night, LSST will begin by taking a picture of one patch for 15--30 seconds long (the results from PLAsTiCC might help decide the exposure time!).","00e7a5e6":"### 4e. Cosmology\n<a id=\"section4e\"><\/a>\n\nIn fact, you might notice that all of the redshifts are positive - almost everything is moving *away* from us, ","913b3d76":"\/cheesy","4267ba40":"This is called $\\text{MW}~E(B-V)$ (MW = Milky Way, E = Extinction between the Blue and Visual, or B-V) and reported in the header in the column named `mwebv`. ","a1864a27":"You can win prizes, eternal glory, and the satisfaction of knowing that you made a real impact and a valuable contribution to the biggest astrophysical experiment to ever be attempted!","167ff668":"Each image then includes a contribution from the source and the background. ","886b0b29":"It's much, much bigger than the training set. ","c12a4773":"... in addition to taking much longer to collect enough photons to have a statistically significant measurement.","f19f3921":"The first of the columns is just the `object_id`. In the real data, you'll get many objects in the same CSV, and you'll need some way of getting all the observations for one object. `object_id` gives you that index.","879035ab":"## 2. A Primer on the Dataset - Light Curves\n<a id=\"section2\"><\/a>","aa5d87aa":"This is one of the best current map of that expansion using type Ia supernovae:\n","bed7bc80":"This is because of how we actually detect these sources against the background sky. ","0bb9cf3c":"You can see the properties of the two sets of images are different. There's a much higher background in the bottom row thanks to a bright source off to the top right. ","134d00ce":"These two angles are called the \"Right Ascension\" (R.A.) and the \"Declination\" (often just Dec.) corresponding to longitude and latitude on the Earth. ","e7c83dff":"#### _Figure 14: Difference Imaging \"Postage Stamps\" (Reference, Image, Difference)_","cba7c67f":"Each image it takes of a particular region is differenced with the template. ","4248eee7":"### 1b. Light Curves: Time-series of Brightness of Astronomical Sources\n<a id=\"section1b\"><\/a>\n\nScanning the entire sky repeatedly means we can identify astrophysical sources in the night sky that change in brightness over time, and we can create a plot of the the brightness vs time. ","ec9d5f5c":"Therefore, in the header, you get two redshifts! `hostgal_specz` is the spectroscopic redshift of the host-galaxy of an event, while `hostgal_photoz` is the photometric redshift of the host-galaxy. ","e9ff7537":"We'll begin by defining a class to handle this example, with a few illustrative features you can use for classification:","4e26eec5":"The variables here (from left to right, top to bottom) are a Mira, an eclipsing binary and \"RR Lyrae\" of type AB and an RR Lyrae of type C. Eclipsing binaries are still called Algol-type stars some times, but note that they look really different from the bottom two panels, and if you look at the x-axis on the horizontal panel, you'll notice that the characteristic time-scale there is much different from the rest of them!","f6f15301":"## 3. Exploring the Light Curves\n<a id=\"section3\"><\/a>\n\nTo get a better sense of what the `flux` and `flux_err` look like, let's take a look at some of their light curves.","45aee08b":"LSST will repeat this cycle, returning to the original filter on the original patch of sky 1--2 weeks later. ","e241b348":"Now looking at Figure 25 and the equation above it, you might notice that sources can have a redshift of greater than one i.e. appear to be moving faster than the speed of light! And you might have heard that it isn't possible to go faster than the speed of light. This is how the cosmological redshift differs from the Doppler effect. It's not the physical motion of the sources that is causing the change in frequency, but rather the expansion of the Universe itself - that the space between us and the source is stretching! Your PLAsTiCC dataset will include objects up to a redshift of 3. \n\nIf everything seems to be moving away with respect to us on Earth, you might also be tempted to think we're the center of the expansion of the Universe. We aren't. We could move to any other point in the Universe and we'd see the same behavior. This is a counterintuitive consequence of Einstein's General Theory of Relativity, and living in a Universe that is homogeneous (same from all positions) and isotropic (same in all directions). If you find this stuff fascinating, you might want to read <a href=\"https:\/\/www.forbes.com\/sites\/startswithabang\/2018\/04\/17\/the-most-important-equation-in-the-universe\/#8869ba60da5c\">this.<\/a>","2b98b40c":"There's a problem though - to measure this accurately we need _spectroscopy_. ","9d346608":"#### *Figure 15: The light curve of FAKE010 - a supernova, Credit: Richard Kessler (University of Chicago), <a href=\"http:\/\/adsabs.harvard.edu\/abs\/2010PASP..122.1415K\">SNPhotCC<\/a>*","830a91c2":"For your convenience, this is provided in the header as a column named `distmod`. ","6c269f31":"Hubble did this by measuring the distances to these galaxies using a special class of variable stars called Cepheids (see that figure from Popular Science Monthly again for an example) that have a relation between their period and how intrinsically bright they are. \n","1313957a":"PLAsTiCC simulates the \"Wide-Fast-Deep\" Survey - the main LSST program, and the \"Deep Drilling Fields\" - a few small regions where LSST will get more observations for specialized scientific studies. ","45fbdd64":"This is a bit like taking a low-resolution spectrum - the light is still being split up and we're getting information about different colors, but it's not as detailed. ","996610fb":"Unlike other multi-channel time-series data, you do not get all the other channels or passbands at once. There's only one filter in front of the camera at any time.","75289422":"Real astrophysical data is from sources on the sky, which means that we normally have contextual information in addition to the light curve to help with classification - if a source is near a galaxy or if it is isolated for instance.","1c0343d5":"LSST will have a reference image for each position on the sky - called a \"template\". ","82317b7b":"#### _Figure 8: The diversity of Supernovae Light Curves, Credit: Stephen J. Smartt, Queen's University, Belfast, https:\/\/www.nature.com\/articles\/nature11643_","a9628a56":"The data from these two images on the same night are combined to remove spurious glitches like cosmic rays, asteroids, airplane contrails etc.","903f304b":"In 1927, Georges Lema\u00eetre, proposed that this meant the Universe was expanding. ","edbb4dbb":"But, if we're talking about objects in the distant Universe, it makes sense to not make the Earth the center of it.","0294cf73":"That's a fair number of fields. `object_id` is a simple integer ID number that uniquely identifies each object, and corresponds to the object's ID in the light curve files, but the rest might not be familiar.","e80008e6":"#### _Figure 11: LSST Filter Exchanger, Credit: LSST\/NSF\/AURA\/Todd Mason Productions Inc_","b855c537":"LSST will then come back to the same patch of sky, the next night, but it will take the picture in a different passband. ","bcf1069a":"As the source flux changes with time, some sources can have some flux entries as positive and others that are negative.","27e5c5ff":"We need to invent new techniques to classify astrophysical sources without using the detailed \"DNA sample\" that you'd get from spectroscopy, but using the less detailed information in their light curves - their \"photometry.\"\n\n**This is where PLAsTiCC and you come in.**","6c9aa020":"**Your mission, should you choose to accept it, is to classify the things that go bump in the night.**","3b3cc25b":"So we've got to identify such type Ia supernovae among all of the ones that LSST will find... hopefully things are beginning to fit together, and this is giving you a sense for the big picture!","400137bc":"You will not need to correct the light curves anymore, but you might be able to use this piece of metadata to distinguish some populations from others using clustering techniques for instance.\n\n***","bcb70975":"Measure the period  of a Cepheid and you figure out how bright they are supposed to be. Measure how bright they appear, and compare the two, and you've got yourself a measurement of the distance.","a27faa77":"Because of this difference imaging techniques, objects have to have changed significantly with respect to the template to be detected by LSST. Whether or not they were detected with respect to the template is reported as `detected_bool`.","29633a7c":"These simplifications will make it easier to work with and highlight some of the issues you'll encounter will the full dataset.","e1c50c02":"This particular source was a supernova, but the same technique can be used to identify all manner of variable and transient sources in astronomical images.","06ff43f9":"## _<center> AN IMPORTANT NOTE <\/center>_\n\nFor historic reasons, redshift is denoted with the letter $z$. This is also the same character as the z passband in LSST (and other surveys), but the two aren't related.","77f069e6":"We use optical filters - elements that only permit a certain range of wavelengths to pass through - to measure the brightness in different \"passbands.\" ","6741f3f1":"That wouldn't be a bad idea for type Ia supernovae, but of course not everything in the dataset is a supernova...","d07253e4":"But just as with this challenge, there's a solution that involves getting images through broad passbands and extracting ratios of brightness in different passbands to get an estimator of the redshift. ","8a055498":"The *time-series* of these change in brightness. We call these time-series, \"light curves.\" ","6087084b":"You probably guessed as much looking at Figure 10, but $u$ covers the ultraviolet, $g$ covers what your eye perceives as blue\/green, $r$ covers red, $i$ covers the infrared. ","2ae7b27c":"Our spectrographs are sensitive enough for it to have been possible to measure these redshifts even a century ago. Many of the redshifts of these nearby galaxies was first measured by Vesto Slipher back in 1917. ","8a5227a5":"#### _Figure 24: The low redshift Universe, Credit: Tom Jarrett, IPAC\/Caltech_","79284500":"We can rotate the sky so that the plane of our galaxy defines the equator, like so:\n","9b8834bd":"Because the characteristic times that we conduct our observations on is a day (we can't observe when the sun is up after all!), we measure time in units of decimal day. ","05800af3":"...and would be useful for classification. ","00283033":"This coordinate system makes sense if you are building a telescope on Earth in the southern hemisphere and have to decide how you want to observe the sky.","6eb36d38":"You can convert the change in frequency or wavelength into a speed using:","dde3deac":"### 1d. The PLAsTiCC Challenge: Classifying Astronomical Sources with Light Curves\n<a id=\"section1d\"><\/a>\nPLAsTiCC is based on a simulation of the light curves that LSST can expect to collect (it doesn't exist yet, so we can't give you real LSST data!). These light curves have realistic time-sampling and noise properties, as well as realistic astrophysical effects for a variety of the sources in the variability tree. ","093f2c92":"LSST data will be useful for many different scientific studies by different groups - from studying stars in our Galaxy to understand how solar systems like ours formed, probing nuclear physics with brief burps before stars explode, how galaxies themselves formed and the role massive stars play in shaping their chemistry, to measuring how much matter there is in our Universe - and everything in between. ","8900e108":"This 3D map was made with the Pan-STARRS telescope which has a 1.2 gigapixel camera and a similar field-of-view to LSST, but is a much smaller telescope.","fc7005a9":"And the data at the time suggested that this increase was linear.\n\n$$ v_r = H_0 \\cdot D \\sim c\\cdot z $$\n\nwhere $D$ is the \"luminosity\" distance to the object and the dot ($\\cdot$) operator is a shorthand for the multiplication ($\\times$) operator. ","b4faf0b3":"#### _Figure 17: The \"folded\" light curve of FAKE030, after determining a period using the Lomb-Scargle algorithm_","10954150":"### 1a. The Large Synoptic Survey Telescope\n<a id=\"section1a\"><\/a>\n\nPLAsTiCC is intended to simulate sources that vary with time in the night-sky as seen during the first three years of operation of the <a href=\"http:\/\/www.lsst.org\">Large Synoptic Survey Telescope (LSST)<\/a>. \n\nThe LSST (illustrated below) is a telescope with an 8.4 meter primary mirror diameter being built high up in Atacama desert of Chile, on a mountain called Cerro Pachon.\n","36e4d6ec":"Other fields have similar issues - if we wanted to uniquely identify a human being for instance, we could test a DNA sample, but that'd be completely impractical given the number of people we encounter. Largely, we use facial recognition. There's less detailed information available, but you can still use it to identify people you see, and categorize them into family, friends, co-workers, strangers etc.","68e6ff79":"We use a spherical coordinate system on the sky, with the positions of stars indexed by a two-tuple that describes where they were on the 1st of January in the year 2000."}}