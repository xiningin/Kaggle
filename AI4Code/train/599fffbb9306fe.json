{"cell_type":{"b414bc92":"code","f34ae634":"code","d9cd7d2c":"code","565a79a6":"code","93ce3028":"code","b8118b5f":"code","0a43c342":"code","274b5ba3":"code","a926025a":"code","8ccac268":"code","d8f9aae4":"code","8d5bed66":"code","74af2f61":"code","c8a62063":"code","f6da6bb8":"code","3469d032":"code","579f067d":"code","fbd5736b":"code","156fcd5f":"code","d724522e":"code","eea204f5":"code","4f4a3ee2":"code","1802a593":"code","42e3a216":"code","9bd1513a":"code","1d52620c":"code","1b4863fa":"code","d2a3611c":"code","516126df":"code","5335bd0d":"code","ead7d157":"code","099c4a31":"code","663d617c":"code","75340453":"code","af5bdda7":"code","0ff4445d":"code","2c58cbde":"code","1cd9474b":"code","0c1bbad5":"code","dfa6057a":"code","ca225afd":"code","e614f0cd":"code","11fcc74e":"code","79e12aaa":"code","b32df654":"code","9018ab15":"code","a507597f":"code","59d79223":"code","9d1bcc65":"code","c1d8c211":"code","21c87fd1":"code","7adfc46b":"code","7b3e08c7":"code","5c6cde93":"code","ddb8f681":"code","f5dbe5aa":"code","ce076dae":"code","9e3961fd":"code","1560944c":"code","956c7afa":"code","9062cfed":"code","cf03bb61":"code","3342c277":"code","fa059f97":"code","2c8be2f7":"code","468caf24":"code","7855a666":"code","36b62971":"code","afaf6e93":"code","298b4e94":"code","2a70aa42":"code","81b930a4":"code","0dd102a7":"code","c8cf7895":"code","1a2c19a9":"code","8e69da5e":"code","85e530d0":"code","b109228a":"code","86dd0c18":"code","06f9ca9b":"code","c867f76f":"code","b541970b":"markdown","40c50ed8":"markdown","02417a2b":"markdown","f681c8c1":"markdown","20964e5a":"markdown","6da96aff":"markdown","057f3d8c":"markdown","ea308716":"markdown","7391047c":"markdown","2c157107":"markdown","ebbcc481":"markdown","80e3d241":"markdown","af08898d":"markdown","9934f3e2":"markdown","63289e2b":"markdown","6dec735f":"markdown","e8c6ca10":"markdown","ac064729":"markdown","9e11f3d9":"markdown","aedfacde":"markdown","382a7bd0":"markdown","ce99be32":"markdown","91737459":"markdown","8c1b6a1d":"markdown","76840ea7":"markdown","d8126e8d":"markdown","6a2fc100":"markdown","03b96809":"markdown","bd38a718":"markdown","0d3e4db5":"markdown","7eb87679":"markdown","93864098":"markdown","cf7dd935":"markdown","8250f838":"markdown","6fa18a9f":"markdown","43a00661":"markdown","8a30796d":"markdown","be8a4e77":"markdown","cc80a20e":"markdown","75161e86":"markdown","031947c5":"markdown","517e8d19":"markdown","bd36c983":"markdown","9417d488":"markdown","c805de3b":"markdown","c5f3dae1":"markdown","84fd6cb5":"markdown","1c8e3920":"markdown","df867fef":"markdown","1b6be357":"markdown","50625834":"markdown","784033e8":"markdown","9273a329":"markdown","48a055bf":"markdown","7ed5036d":"markdown","c2f1ac16":"markdown","a84a4027":"markdown","ebf85f15":"markdown","f2b9fc79":"markdown","dc192208":"markdown","34ec86ba":"markdown","aa86a9da":"markdown","ecab6974":"markdown","ebafd7c2":"markdown","ed7499ed":"markdown","da5bf8a1":"markdown","d982722a":"markdown","a0875ff5":"markdown","0da328c5":"markdown","32d7c56e":"markdown","5ba1aa89":"markdown","e8bd549d":"markdown","cd32e89f":"markdown","330b94cc":"markdown","a93cc793":"markdown","5f1d0e3f":"markdown","35244644":"markdown","caa795f3":"markdown","2cde0bac":"markdown","5ed89ca8":"markdown","79f4fb60":"markdown","829ae8fa":"markdown","072a788b":"markdown","cf9b5339":"markdown","0ed84397":"markdown","acf4592a":"markdown","a2489996":"markdown","797e19a4":"markdown","c4a593a6":"markdown","3f8e59c5":"markdown","f332f390":"markdown","af1788d8":"markdown","7a6fadea":"markdown","c62e7901":"markdown","764254dc":"markdown"},"source":{"b414bc92":"#Import libraries\nimport numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.preprocessing import MinMaxScaler\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import plot_roc_curve, confusion_matrix, roc_auc_score\nfrom scikitplot.metrics import plot_lift_curve","f34ae634":"#Import dataset\nmql = pd.read_csv('..\/input\/lead-scoring-x-online-education\/Leads X Education.csv')","d9cd7d2c":"#Sample view of the dataset\nmql.sample(5)","565a79a6":"#Examine current data types and count of non-null entries by feature\nmql.info()","93ce3028":"#Count columns with fewer than 9240 observations in mql\ncols_w_nulls = [mql[c].isna().max() for c in mql.columns]\nsum(cols_w_nulls)","b8118b5f":"#Drop Prospect ID, we can use Lead Number as the unique ID for each observation\nmql.drop(columns='Prospect ID', axis=1, inplace=True)","0a43c342":"#Plot distribution of Lead Source\nsns.countplot(y='Lead Source', data=mql, order = mql['Lead Source'].value_counts().index)\nplt.title('Distribution of Lead Source')\nplt.show","274b5ba3":"#Impute nulls with \"Unknown\"\nmql['Lead Source'] = mql['Lead Source'].fillna('Unknown')","a926025a":"#Convert Do Not Email, Do Not Call, Converted to boolean values\nfor c in ['Do Not Email', 'Do Not Call', 'Converted']:\n    mql[c] = mql[c].replace('Yes',1)\n    mql[c] = mql[c].replace('No',0)\n    mql[c] = mql[c].astype(bool)","8ccac268":"#Examine distribution of Total Visits\nprint(mql['TotalVisits'].describe(),\"\\n\")\n\nsns.histplot(x='TotalVisits', data=mql, bins=50)\nplt.title(\"Distribution of Total Visits to Website\")","d8f9aae4":"#Examine distribution of Page Views per Visit\nprint(mql['Page Views Per Visit'].describe(),\"\\n\")\n\nsns.histplot(x='Page Views Per Visit', data=mql, bins=50)\nplt.title(\"Distribution of Page Views Per Visit\")","8d5bed66":"#Impute nulls in both features with median value of the feature\nmql['TotalVisits'] = mql['TotalVisits'].fillna(mql['TotalVisits'].median())\nmql['Page Views Per Visit'] = mql['Page Views Per Visit'].fillna(mql['Page Views Per Visit'].median())\n\n#Convert data type to int\nmql['TotalVisits'] = mql['TotalVisits'].astype('int')","74af2f61":"#Plot distribution of leads by Last Activity\nsns.countplot(y='Last Activity', data=mql, order = mql['Last Activity'].value_counts().index)\nplt.title('Distribution of Last Activity')","c8a62063":"#Impute nulls with new category\nmql['Last Activity'] = mql['Last Activity'].fillna('Null')","f6da6bb8":"#Plot distribution of Leads by Country\nplt.figure(figsize=(6,8))\nsns.countplot(y='Country', data=mql, order = mql['Country'].value_counts().index)\nplt.title('Distribution of Leads by Country')","3469d032":"#Print the percentage of values that are null in the Country feature\nprint(round(mql['Country'].isna().sum()*100\/len(mql['Country']),2),'% of values in Country are null.')","579f067d":"#Plot distribution of City where Country is null\nsns.countplot(y='City', data=mql[mql['Country'].isna()], order = mql['City'].value_counts().index)\nplt.title('Distribution of Leads by City where Country is null')","fbd5736b":"#Impute nulls in Country based on Country\nindia_cities = ['Mumbai','Other Cities of Maharashtra','Thane & Outskirts']\n\nfor i in mql[mql['Country'].isnull()].index:\n    if mql.loc[i,'City'] in india_cities:\n        mql.loc[i,'Country'] = 'India'\n    else:\n        mql.loc[i,'Country'] = 'Unknown'","156fcd5f":"#Convert yes\/no field to boolean\nfor c in ['Search', 'Magazine', 'Newspaper Article', 'X Education Forums', 'Newspaper', 'Digital Advertisement']:\n    mql[c] = mql[c].replace('Yes',1)\n    mql[c] = mql[c].replace('No',0)\n    mql[c] = mql[c].astype(bool)","d724522e":"#Convert yes\/no field to boolean\nfor c in ['Through Recommendations', 'Receive More Updates About Our Courses']:\n    mql[c] = mql[c].replace('Yes',1)\n    mql[c] = mql[c].replace('No',0)\n    mql[c] = mql[c].astype(bool)","eea204f5":"#Examine distribution dropdown fields\ndropdown_fields = ['Specialization','How did you hear about X Education','What is your current occupation','What matters most to you in choosing a course']\n\nfig, axes = plt.subplots(nrows=1, ncols=len(dropdown_fields), figsize=(24, 4))\n\nfor i in range(len(dropdown_fields)):\n    sns.countplot(x=dropdown_fields[i], data=mql, ax=axes[i])\n    plt.sca(axes[i])\n    plt.title(\"Distribution of \" + dropdown_fields[i])\n    plt.xticks(rotation=90)","4f4a3ee2":"#Impute \"Select\" with null & print percentage of values in each feature with nulls\nfor c in dropdown_fields:\n    mql[c].replace('Select',np.NaN, inplace=True)\n    print(round(mql[c].isna().sum()*100\/len(mql[c]),2),'% of values in',c,'are null.')","1802a593":"#Impure nulls with \"Unknown\"\nfor c in dropdown_fields:\n    mql[c].fillna('Unknown', inplace=True)","42e3a216":"#Convert yes\/no field to boolean\nfor c in ['Update me on Supply Chain Content', 'Get updates on DM Content']:\n    mql[c] = mql[c].replace('Yes',1)\n    mql[c] = mql[c].replace('No',0)\n    mql[c] = mql[c].astype(bool)","9bd1513a":"#Drop Tags feature\nmql.drop(columns='Tags', axis=1, inplace=True)","1d52620c":"#Drop Lead Quality feature\nmql.drop(columns='Lead Quality', axis=1, inplace=True)","1b4863fa":"#Plot distribution of Lead Profile\nsns.countplot(y='Lead Profile', data=mql, order = mql['Lead Profile'].value_counts().index)\nplt.title('Distribution of Leads by Lead Profile')","d2a3611c":"#Impute \"Select\" value with null\nmql['Lead Profile'].replace('Select', np.NaN, inplace=True)","516126df":"#Impute nulls with \"Unknown\"\nmql['Lead Profile'].fillna('Unknown', inplace=True)","5335bd0d":"#Examine distribution of City\nsns.countplot(y='City', data=mql)\nplt.title('Distribution of City')","ead7d157":"#Impute \"Select\" value with null\nmql['City'].replace('Select', np.NaN, inplace=True)","099c4a31":"#Impute nulls with \"Unknown\"\nmql['City'].fillna('Unknown', inplace=True)","663d617c":"#Convert remaining yes\/no fields to boolean values\nfor c in ['I agree to pay the amount through cheque', 'A free copy of Mastering The Interview']:\n    mql[c] = mql[c].replace('Yes',1)\n    mql[c] = mql[c].replace('No',0)\n    mql[c] = mql[c].astype(bool)","75340453":"#Convert string type fields to category type\nfor c in mql.columns:\n    if mql[c].dtype=='object': mql[c] = mql[c].astype('category')","af5bdda7":"#Print descriptive statistics of score features\nstats_AS = pd.DataFrame(\n    {'Asymmetrique Activity Score':mql['Asymmetrique Activity Score'].describe(),\n    'Asymmetrique Profile Score':mql['Asymmetrique Profile Score'].describe()})\nstats_AS","0ff4445d":"#Plot distribution of Asymmetrique Activity Score & Asymmetrique Profile Score\nscore_fields = ['Asymmetrique Activity Score','Asymmetrique Profile Score']\n\nfig, axes = plt.subplots(nrows=1, ncols=len(score_fields), figsize=(12, 4))\n\nfor i in range(len(score_fields)):\n    sns.histplot(x=score_fields[i], data=mql, ax=axes[i])       \n    plt.sca(axes[i])\n    plt.title(\"Distribution of \" + score_fields[i])","2c58cbde":"#Impute nulls with median\nfor f in score_fields:\n    mql[f].fillna(mql[f].median(), inplace=True)","1cd9474b":"#Plot distribution of Asymmetrique Activity Index & Asymmetrique Profile Index\nindex_fields = ['Asymmetrique Activity Index','Asymmetrique Profile Index']\n\nfig, axes = plt.subplots(nrows=1, ncols=len(index_fields), figsize=(12, 4))\n\nfor i in range(len(index_fields)):\n    sns.countplot(x=index_fields[i], data=mql, ax=axes[i], order=['03.Low','02.Medium','01.High'])       \n    plt.sca(axes[i])\n    plt.title(\"Distribution of \" + index_fields[i])","0c1bbad5":"#Group by Asymmetrique Activity Index\ngrouped_by_activity_index = mql.groupby('Asymmetrique Activity Index').agg({'Asymmetrique Activity Score':'mean'})\ngrouped_by_activity_index","dfa6057a":"#Group by Asymmetrique Profile Index\ngrouped_by_profile_index = mql.groupby('Asymmetrique Profile Index').agg({'Asymmetrique Profile Score':'mean'})\ngrouped_by_profile_index","ca225afd":"#Drop Asymmetrique Index columns\nmql.drop(columns=['Asymmetrique Activity Index','Asymmetrique Profile Index'], axis=1, inplace=True)","e614f0cd":"#Review dataset\nmql.info()","11fcc74e":"#Create functions to facilitate EDA\n\ndef count_by_converted(feature, target='Converted'):\n    #Plot a seaborn countplot for the feature by Converted & add a relevant title\n    sns.countplot(y=feature, data=mql, hue=target, order = mql[feature].value_counts().index)\n    plt.title(\"Distribution of \" + feature + \" by Converted\")\n    plt.show\n    \ndef confusionmatrix_by_converted(feature, target='Converted'):\n    #Plot confusion matrix heatmap of a boolean feature vs. Converted & add relevant labels\n    cm=confusion_matrix(mql[feature], mql[target])\n    sns.heatmap(cm, annot=True, fmt='', xticklabels=['No','Yes'], yticklabels=['No','Yes'], cmap='Purples')\n    plt.title(feature + \" vs. \" + target + \" Confusion Matrix\")\n    plt.xlabel(target)\n    plt.ylabel(feature)\n    plt.show()","79e12aaa":"#Calculate the conversion rate of leads across the dataset\nround(mql['Converted'].mean()*100,2)","b32df654":"#Plot distribution of Lead Origin by Converted\ncount_by_converted('Lead Origin')","9018ab15":"#Plot distribution of Lead Source by Converted\nplt.figure(figsize=(6, 8))\ncount_by_converted('Lead Source')","a507597f":"#Plot confusion matrix of Do Not Call against Converted\nconfusionmatrix_by_converted('Do Not Call')","59d79223":"#Plot confusion matrix of Do Not Email against Converted\nconfusionmatrix_by_converted('Do Not Email')","9d1bcc65":"#Get descriptive statistics on TotalVisits by Converted\nstats_TV = pd.DataFrame(\n    {'TotalVisits_Overall':mql['TotalVisits'].describe(),\n    'TotalVisits_Converted':mql[mql['Converted']==True]['TotalVisits'].describe(),\n    'TotalVisits_NotConverted':mql[mql['Converted']==False]['TotalVisits'].describe()})\nstats_TV","c1d8c211":"#Plot boxplots for distribution of TotalVisits by Converted\nsns.boxplot(y='TotalVisits', data=mql, x='Converted', hue='Converted')\nplt.title(\"Distribution of TotalVisits w\/ Outliers\")\nplt.show()","21c87fd1":"#Remove outliers (TotalVisits > 50) and plot boxplots for distribution of TotalVisits by Converted\nsns.boxplot(y='TotalVisits', data=mql[mql['TotalVisits']<=50], x='Converted', hue='Converted')\nplt.title(\"Distribution of TotalVisits w\/o Outliers\")\nplt.show()","7adfc46b":"#Get descriptive statistics on Total Time Spent on Website by Converted\nstats_TT = pd.DataFrame(\n    {'TotalTime_Overall':mql['Total Time Spent on Website'].describe(),\n    'TotalTime_Converted':mql[mql['Converted']==True]['Total Time Spent on Website'].describe(),\n    'TotalTime_NotConverted':mql[mql['Converted']==False]['Total Time Spent on Website'].describe()})\nstats_TT","7b3e08c7":"#Plot boxplots for distribution of Total Time Spent on Website by Converted\nsns.boxplot(y='Total Time Spent on Website', data=mql, x='Converted', hue='Converted')\nplt.title(\"Distribution of Total Time Spent on Website by Converted\")\nplt.show()","5c6cde93":"#Get descriptive statistics for Page Views Per Visit by Converted\nstats_PV = pd.DataFrame(\n    {'TotalTime_Overall':mql['Page Views Per Visit'].describe(),\n    'TotalTime_Converted':mql[mql['Converted']==True]['Page Views Per Visit'].describe(),\n    'TotalTime_NotConverted':mql[mql['Converted']==False]['Page Views Per Visit'].describe()})\nstats_PV","ddb8f681":"#Plot boxplots for distribution of Page Views Per Visit by Converted\nsns.boxplot(y='Page Views Per Visit', data=mql, x='Converted', hue='Converted')\nplt.title(\"Distribution of Page Views Per Visit by Converted\")\nplt.show()","f5dbe5aa":"#Plot distribution of Last Activity by Converted\nplt.figure(figsize=(6,8))\ncount_by_converted('Last Activity')","ce076dae":"#Plot distribution of Search by Converted\nconfusionmatrix_by_converted('Search')","9e3961fd":"#Plot distribution of Magazine by Converted\nconfusionmatrix_by_converted('Magazine')","1560944c":"#Plot distribution of Newspaper Article by Converted\nconfusionmatrix_by_converted('Newspaper Article')","956c7afa":"#Plot distribution of X Education Forums by Converted\nconfusionmatrix_by_converted('X Education Forums')","9062cfed":"#Plot distribution of Newspaper by Converted\nconfusionmatrix_by_converted('Newspaper')","cf03bb61":"#Plot distribution of Digital Advertisement by Converted\nconfusionmatrix_by_converted('Digital Advertisement')","3342c277":"#Plot distribution of Through Recommendations by Converted\nconfusionmatrix_by_converted('Through Recommendations')","fa059f97":"#Plot distribution of Receive More Updates About Our Courses by Converted\nconfusionmatrix_by_converted('Receive More Updates About Our Courses')","2c8be2f7":"#Plot distribution of Update me on Supply Chain Content by Converted\nconfusionmatrix_by_converted('Update me on Supply Chain Content')","468caf24":"#Plot distribution of Get updates on DM Content by Converted\nconfusionmatrix_by_converted('Get updates on DM Content')","7855a666":"#Plot distribution of I agree to pay the amount through cheque by Converted\nconfusionmatrix_by_converted('I agree to pay the amount through cheque')","36b62971":"#Plot distribution of A free copy of Mastering The Interview by Converted\nconfusionmatrix_by_converted('A free copy of Mastering The Interview')","afaf6e93":"#Compute conversion rate among leads who did and didn't want to receive a free copy of Mastering The Interview\nprint('The overall lead conversion rate is ', mql['Converted'].mean())\nprint('The lead conversion rate among those who received a free copy of Mastering The Interview is ',mql[mql['A free copy of Mastering The Interview']==True]['Converted'].mean())\nprint('The lead conversion rate among those who DID NOT receive a free copy of Mastering The Interview is ',mql[mql['A free copy of Mastering The Interview']==False]['Converted'].mean())","298b4e94":"#Plot distribution of Last Notable Activity by Converted\nplt.figure(figsize=(8,6))\ncount_by_converted('Last Notable Activity')","2a70aa42":"#Split data into training and testing set\ndrop_cols = ['Lead Number','Converted']\nX = pd.get_dummies(mql.drop(columns=drop_cols, axis=1))\ny = mql['Converted']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=123, stratify=y)","81b930a4":"#Scale the numeric features using MinMaxScaler\nscale_cols = ['TotalVisits','Total Time Spent on Website','Page Views Per Visit']\nscaler = MinMaxScaler()\nX_train[scale_cols] = scaler.fit_transform(X_train[scale_cols])\nX_test[scale_cols] = scaler.transform(X_test[scale_cols])","0dd102a7":"#Fit logistic model\nparameters_lr = {'penalty': ['l1', 'l2'], 'C' : np.logspace(-3,3,5,base=10.0)}\nlr = LogisticRegression(solver='liblinear', random_state=123)\n\nlr_cv = GridSearchCV(lr, param_grid=parameters_lr, cv=5, scoring='roc_auc', n_jobs=-1)\nlr_cv.fit(X_train, y_train)\n\nprint(lr_cv.best_params_)\nlr_best = lr_cv.best_estimator_","c8cf7895":"#Fit random forest classifier w\/ hyperparameter tuning\nparameters_rf = {'max_depth':np.arange(6,30,2),'min_samples_leaf':np.arange(100,500,50)}\nrf = RandomForestClassifier()\n\nrf_cv = GridSearchCV(rf, param_grid=parameters_rf, cv=5, scoring='roc_auc', n_jobs=-1)\nrf_cv.fit(X_train, y_train)\n\nprint(rf_cv.best_params_)\nrf_best = rf_cv.best_estimator_","1a2c19a9":"#Plot ROC curve & AUC\nfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(16, 5))\nmodels = {'Logistic Regression':lr_best, 'Random Forest Classifier':rf_best}\n\nfor n,m in models.items():\n    plot_roc_curve(m, X_test, y_test, ax=axes[list(models.keys()).index(n)])\n    plt.sca(axes[list(models.keys()).index(n)])\n    plt.title('ROC Curve - ' + n)","8e69da5e":"#Compute AUC score on training & test data for the Logistic Regression model\nprint('Logistic Regression - AUC (training set):', roc_auc_score(y_train, lr_best.predict_proba(X_train)[:,1]))\nprint('Logistic Regression - AUC (test set):', roc_auc_score(y_test, lr_best.predict_proba(X_test)[:,1]))","85e530d0":"#Compute AUC score on training & test data for the Random Forest Classifier model\nprint('Random Forest Classifier - AUC (training set):', roc_auc_score(y_train, rf_best.predict_proba(X_train)[:,1]))\nprint('Random Forest Classifier - AUC (test set):', roc_auc_score(y_test, rf_best.predict_proba(X_test)[:,1]))","b109228a":"#Plot histogram of lead scores by Converted\nfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(16, 5))\n\nfor n,m in models.items():\n    sns.histplot(x=m.predict_proba(X_test)[:,1], hue=y_test, ax=axes[list(models.keys()).index(n)], bins=20)\n    plt.sca(axes[list(models.keys()).index(n)])\n    plt.title('Lead Score Distribution by Converted - ' + n)\n    plt.xlabel('Lead Scores')","86dd0c18":"#Assign lr_best as the chosen lead scoring model & get model coefficients + intercept\nlead_score_model = lr_best\n\nintercept = lead_score_model.intercept_\n\ncoefs = pd.concat([pd.DataFrame(X.columns, columns=['Predictor']),pd.DataFrame(np.transpose(lead_score_model.coef_), columns=['Coefficient'])], axis = 1)","06f9ca9b":"from scikitplot.metrics import plot_lift_curve","c867f76f":"#Plot lift chart\nX_scaled = X.copy()\nX_scaled[scale_cols] = scaler.transform(X_scaled[scale_cols])\n\nbaseline = y.mean()*100\ntarget_lift = 80\/baseline\nprint('Baseline conversion rate: ', round(baseline,2), '%')\nprint('Lift equivalent to conversion rate of 80%: ', round(target_lift,2))\n\nplot_lift_curve(y,lead_score_model.predict_proba(X_scaled), figsize=(8,6))","b541970b":"#### Univariate Analysis - Digital Advertisement","40c50ed8":"#### Univariate Analysis - Magazine","02417a2b":"At first glance, the Logistic Regression model appears to perform better. Both models have similar ROC curves, but the Logistic Regression model shows a slightly higher AUC value.\n\nTo assess each model's fit, we can compare the AUC score on the training & test sets.","f681c8c1":"**Observations**\n* The Last Activity with he highest conversion rate is by far SMS Sent.\n* **Further investigation is required to determine whether this is a result of th effectiveness of this activity or simply the stage at which it takes place in the lead nurturing process.**","20964e5a":"#### Univariate Analysis - Search","6da96aff":"#### Null Handling: Last Activity\n\n* **Last Activity**: Last activity performed by the customer. Includes Email Opened, Olark Chat Conversation, etc.\n\nAssess the distribution of the feature to determine best null imputation method.","057f3d8c":"#### Data Type Correction: Do Not Email, Do Not Call, Converted\n\n* **Do Not Email**: An indicator variable selected by the customer wherein they select whether of not they want to be emailed about the course or not.\n* **Do Not Call**: An indicator variable selected by the customer wherein they select whether of not they want to be called about the course or not.\n* **Converted**: The target variable. Indicates whether a lead has been successfully converted or not.\n\n\nThese features will be easier to manipulate, interpret, and use in a model by converting them to boolean values.","ea308716":"#### Drop Feature: Tags\n\n* **Tags**: Tags assigned to customers indicating the current status of the lead.\n\nSince Tags is determined by the progress of a lead through the marketing funnel, is it likely endogenous to the conversion status of the lead. As a result, this feature should be dropped.","7391047c":"#### Null Handling: Country\n\n* **Country**: The country of the customer.\n\nAssess the distribution of the feature to identify the appropriate null handling method.","2c157107":"To reach a conversion rate of 80%, the sales team must increase their conversion rate by a factor of 2.08. Assuming that our test set is a representative sample of future leads encountered by X Education, the chart above indicates that by contacting the top 35% of leads by lead scores, the sales team can reach a conversion rate of 80%.","ebbcc481":"#### Model Building\n\nNext, we build two models and compare their performance - a Logistic Regression model and a Random Forest Ensemble model.\n\nBoth models will be assessed on their AUC value. AUC (Area Under Curve) is an especially useful performance metric for models whose output are a probability. In short, it indicates the percentage of the time a model correctly assigns a higher probability to a lead that will convert when compared to a lead that will not convert. As such, it is valuable in determining the performance of a lead scoring model.\n\nIn the Logistic Regression model, the 'liblinear' optimization algorithm is used since it performs well on relatively small datasets. GridSearchCV is used to find the algorithm's optimal regularization strength and penalty norm to maximize model AUC.","80e3d241":"#### Data Type Correction: Object to Category\n\nCategorical variables with be more easily interpreted by our model if they recorded as such.","af08898d":"#### Data Type Correction: Update me on Supply Chain Content, Get updates on DM Content\n\n* **Update me on Supply Chain Content**: Indicates whether the customer wants updates on the Supply Chain Content.\n* **Get updates on DM Content**: Indicates whether the customer wants updates on the DM Content.\n\nThese features will be easier to manipulate, interpret, and use in a model by converting them to boolean values.","9934f3e2":"#### Feature Scaling\n\nMost classification models perform better after feature scaling. This is because numeric predictors often have different centers and ranges. For this dataset, numeric predictors include the following:\n\n* TotalVisits\n* Total Time Spent on Website\n* Page Views per Visit\n\nSince none of these features follow a normal distribution, standardization using MinMaxScaler is the prefered feature scaling method.","63289e2b":"#### Univariate Analysis - Update me on Supply Chain Content","6dec735f":"#### Data Type Correction: Through Recommendations, Receive More Updates About Our Courses\n\n* **Through Recommendations**: Indicates whether the customer came in through recommendations.\n* **Receive More Updates About Our Courses**: Indicates whether the customer chose to receive more updates about the courses.\n\nThese features will be easier to manipulate, interpret, and use in a model by converting them to boolean values.","e8c6ca10":"Of the 37 features in this dataset, 17 have nulls and several more have incorrect data types.\n\nAs part of our data preparation, we review each feature one-by-one to identify correct data types and appropriate null handling.","ac064729":"**Observations**\n* Nearly 1\/3 leads wanted to receive a free copy of Mastering The Interview\n* Interestingly, leads who received a free copy of Mastering The Interview had a lower conversion rate!\n* **Could this be because once leads receive a copy for Mastering The Interview, they don't feel the need for X Education's courses?**","9e11f3d9":"**Observations**\n* Conversion rate appears to be highest for leads that come from the Wellingak Website or that are referred.\n* **It is possible that increasing the number of leads that are referred and that come from the Willingak Website would increase the overall conversion rate.**\n* While Google and Direct Traffic are the source for a similar number of leads, the conversion rate appears higher among leads that come from Google.\n* Fewer leads have Organic Search as a source than Google, but leads coming from both these sources appear to have a similar conversion rate.","aedfacde":"#### Data Splitting\n\nWe identify model predictors (all remaining dataset features except Lead Number) and the target variable. Categorical variables codified using One-Hot Encoding.\n\nThen, we split our data into a training and a testing set (70% of the data will be used for the training set, while the remaining 30% will be used in the test set). ","382a7bd0":"# Exploratory Data Analysis","ce99be32":"#### Univariate Analysis - Lead Origin","91737459":"**Observations**\n* Significantly more leads convert when they originate from the \"Lead Add Form\".\n* The lead conversion rate appears slighly higher among leads originating from \"Landing Page Submission\" than from \"API\".","8c1b6a1d":"#### Univariate Analysis - Lead Source","76840ea7":"#### Null Handling: Specialization, How did you hear about X Education\n\n* **Specialization**: The industry domain in which the customer worked before. Includes the level 'Select Specialization' which means the customer had not selected this option while filling the form.\n* **How did you hear about X Education**: The source from which the customer heard about X Education.\n* **What is your current occupation**: Indicates whether the customer is a student, umemployed or employed.\n* **What matters most to you in choosing a course**: An option selected by the customer indicating what is their main motto behind doing this course.\n\nAssess the distribution of these features to determine best null imputation method.","d8126e8d":"This distribution is difficult to visualize given the number of outliers. To better visualize the distribution of Total visits, we can produce the same plot by removing leads with TotalVisits > 50.","6a2fc100":"#### Null Handling: Lead Profile\n\n* **Lead Profile**: A lead level assigned to each customer based on their profile.\n\nAssess the distribution of this feature to determine best null imputation method.","03b96809":"This section seeks to explore the relationship between each feature of the dataset and the target variable, Converted.\n\nTo facilitate this process, we define two functions that allow rapid comparison of distribution by Converted.","bd38a718":"# Conclusion","0d3e4db5":"#### Null Handling: Lead Source\n\n* **Lead Source**: The source of the lead. Includes Google, Organic Search, Olark Chat, etc.\n\nAssess the distribution of the feature to determine the preferred null imputation method.","7eb87679":"Both distributions are slight left-skewed. As a result, median imputation may be more appropriate than mean imputation.","93864098":"The distributions for both these features is severely left-skewed, suggesting that median imputation would be best suited to handle nulls.\n\nIn addition, TotalVisits should be an integer, not a float.","cf7dd935":"#### Drop Feature: Lead Quality\n\n* **Lead Quality**: Indicates the quality of lead based on the data and intuition the employee who has been assigned to the lead.\n\nSince Lead Quality is the measure we are looking to replace with the Lead Score, we should not include in our model.","8250f838":"**Observations**\n* Not a single lead indicated that they wanted to receive more updates on X Education courses. \n* If this is not a data error, it should be a point of concern for the organization.","6fa18a9f":"The average lead conversion rate across this dataset is 38.54%.","43a00661":"#### Univariate Analysis - Newspaper","8a30796d":"# Problem Statement","be8a4e77":"#### Model Comparison\n\nAs outlined previously, AUC is the performance metric by which these models will be compared. We also plot their ROC curves to assess for any major differences in shape.","cc80a20e":"Here again, a large portion of values are \"Select\", which is equivalent to a null. There is no single city that stands out as a clear value for null imputation. As a result, nulls should be imputed with the value \"Unknown\".","75161e86":"**Observations**\n* The IQR of Total Time Spent on Website for leads that convert is much higher than for leads that do not convert.\n* **It is possible that driving leads to spend more time on the website would increase the overall conversion rate.**","031947c5":"**Observations**\n* No leads saw an ad in a magazine.\n* **X Education may want to reconsider investing in this marketing channel.**","517e8d19":"#### Data Type Correction: Search, Magazine, Newspaper Article, X Education Forums, Newspaper, Digital Advertisement\n\n* **Search**: Indicating whether the customer had seen the ad in any of the listed items (i.e. during a web search).\n* **Magazine**: Indicating whether the customer had seen the ad in any of the listed items (i.e. in a magazine).\n* **Newspaper Article**: Indicating whether the customer had seen the ad in any of the listed items (i.e. in a newspaper article).\n* **X Education Forums**: Indicating whether the customer had seen the ad in any of the listed items (i.e. in a X Education forum).\n* **Newspaper**: Indicating whether the customer had seen the ad in any of the listed items (i.e. in a newspaper).\n* **Digital Advertisement**: Indicating whether the customer had seen the ad in any of the listed items (i.e. in a digital ad).\n\nThese features will be easier to manipulate, interpret, and use in a model by converting them to boolean values.","bd36c983":"#### Univariate Analysis - X Education Forums","9417d488":"#### Asymmetrique Index & Scores\n\n* **Asymmetrique Activity Index**: An index and score assigned to each customer based on their activity and their profile.\n* **Asymmetrique Profile Index**: An index and score assigned to each customer based on their activity and their profile.\n* **Asymmetrique Activity Score**: An index and score assigned to each customer based on their activity and their profile.\n* **Asymmetrique Profile Score**: An index and score assigned to each customer based on their activity and their profile.\n\nAssess the distribution of each feature to determine the most appropriate null imputation method.","c805de3b":"#### Univariate Analysis - Do Not Call","c5f3dae1":"A large portion of values are \"Select\", which is equivalent to a null. There is no single lead profile that stands out as a clear value for null imputation. As a result, nulls should be imputed with the value \"Unknown\".","84fd6cb5":"This section seeks to impute null or incorrect values in the dataset and ensure all dataset features are of the correct data type.","1c8e3920":"It appears that a large portion of values are \"Select\", which is equivalent to a null. We can replace these values with nulls.\n\nSince there is no single value for either of these features with which nulls can be imputed, we can impute nulls as \"Unknown\". We can also check what percentage of values in each feature have nulls","df867fef":"#### Univariate Analysis - I agree to pay the amount through cheque","1b6be357":"**Observations**\n* All leads appear to view a similar number of pages per visit on average, regardless of conversion status.\n* However, the IQR of Page Views Per Visit is larger for leads that convert, in part because a large portion of leads that convert have an average of 0 page views per visit.\n* The outlier that viewed 55 pages per visit on average may not be a lead, but in fact a competitor or an staff member consulting the website.","50625834":"#### Univariate Analysis - Newspaper Article","784033e8":"**Observations**\n* Very few leads have seen an ad during a web search","9273a329":"**Observations**\n* On average, leads that convert appear to visit the website slightly more than leads that do not convert","48a055bf":"Maybe we can deduce the country a lead is located in from the city they have indicated they are located in.","7ed5036d":"By comparing these AUC scores, we see that neither model overfits the data, as the AUC score on the test sets are only slightly lower. We can also confirm that the Logisitc Regression model is the one that achieves the highest AUC on the test set of 0.9093.\n\nWe can further compare how each of these models separate the data by comparing the distribution of the lead scores they assign for converted and non-converted leads.","c2f1ac16":"**Observations**\n* Not a single lead indicated that they wanted to pay by cheque.\n* This payment method is evidently not of interest to leads.","a84a4027":"#### Null Handling: City\n\n* **City**: The city of the customer.\n\nAssess the distribution of the feature to determine best null imputation method.","ebf85f15":"#### Univariate Analysis - Do Not Email","f2b9fc79":"#### Univariate Analysis - Page Views Per Visit","dc192208":"The above histograms appear to validate the higher AUC score shown by the Logistic Regression model. The lead scores appear to be more cleanly separated in the Logistic Regression histogram, with less overlap between the scores of converted and non-converted leads.\n\n**As such, we can select the Logistic Regression model as our Lead Scoring Model of choice.**","34ec86ba":"**Observations**\n* Very few leads appear to have come in through a recommendation.\n* This is strange, as more than 500 leads have \"Reference\" as a Lead Source. Are recommendation and reference different? If so, in what way?","aa86a9da":"#### Univariate Analysis - Converted","ecab6974":"#### Univariate Analysis - Total Time Spent on Website","ebafd7c2":"#### Univariate Analysis - A free copy of Mastering The Interview","ed7499ed":"#### Univariate Analysis - Through Recommendations","da5bf8a1":"# Model Development","d982722a":"# Data Preparation","a0875ff5":"No category for Last Activity stands out as the likely value for nulls in this feature. As a result, imputing nulls with a new category called \"Null\" is best.","0da328c5":"**Observations**\n* Not a single lead indicated that they wanted to receive updates on supply chain content.\n* Sending out this kind of content to leads is evidently not of interest to them.","32d7c56e":"It appears that the index features may simply be bucketed according to the Asymmetrique Score, in which case both these index features are redundant. We can confirm this by observing the mean Asymmetrique Score by Asymetrique Index.","5ba1aa89":"**Observations**\n* Very few leads saw an ad in an X Education Forum.","e8bd549d":"#### Univariate Analysis - Receive More Updates About Our Courses","cd32e89f":"#### Increasing Conversion Rate\n\nThe CEO of X Education expressed he wanted to see lead conversion rate increase to around 80%. Using a lift chart, we can determine how many leads should be contacted to reach a conversion rate of 80% if we contact leads in order of highest to lowest lead score.","330b94cc":"Finally, we can review the dataset to ensure no features contain nulls and all features are of the correct data type.","a93cc793":"#### Univariate Analysis - TotalVisits","5f1d0e3f":"**Observations**\n* The vast majority of leads indicate \"No\" under Do Not Call, suggesting that the sales team is free to contact them by phone.\n* The conversion rate among leads that indicate \"No\" under Do Not Call is 38.52%.\n* While very few leads have a \"Yes\" under Do Not Call, the conversion rate among these appears to be 100%.","35244644":"In conclusion, the logistic regression model we developed proved to be a superior lead scoring model. In nearly 88% of cases, it correctly assigns a higher lead score to leads that will convert compared to a lead who will not convert. By using this lead scoring model, the sales team can increase their conversion rate to 80% by focussing on the top 30% of leads by lead score.\n\nAs a recommended next step for X Education, it would be valuable to determine a minimum lead score for sales reps to bother contacting a lead. This can be done after the cost of having a sales rep contact a lead, as well as the value of a converted lead, has been determined. Using a profit matrix, the optimal threshold for classification to maximize profit can be identified.","caa795f3":"**Observations**\n* Here again, the vast majority of leads indicate \"No\" under Do Not Email, suggesting that the sales team is free to contact them by email.\n* The conversion rate among leads that indicate \"No\" under Do Not Call is 40.47%.\n* Very few leads have a \"Yes\" under Do Not Call (7.94%). The conversion rate among these is to be 16.07%, more than half the conversion rate of leads that are open to receiving emails.","2cde0bac":"#### Univariate Analysis - Last Notable Activity","5ed89ca8":"**Observations**\n* Not a single lead indicated that they wanted to receive updates on DM content.\n* Sending out this kind of content to leads is evidently not of interest to them.","79f4fb60":"**Observations**\n* In addition to visiting the website more often, leads that convert appear to show a higher spread and IQR than leads that do not convert.","829ae8fa":"We can now review the remaining features in the dataset to ensure none of any nulls and that all data types are correct.","072a788b":"#### Univariate Analysis - Get updates on DM Content","cf9b5339":"**Observations**\n\n* As seen under Last Activity, SMS Sent is the Last Notable Activity with the highest conversion rate.","0ed84397":"**Observations**\n* On average, leads that convert appear to spent more than double the time that leads that do not convert on the website.","acf4592a":"An education company named X Education sells online courses to industry professionals.\n\nThe typical lead conversion rate at X Education is between 30%-40%. The CEO wishes to see the lead conversion rate increase to around 80%.\n\nDevelop a lead scoring model using a leads dataset from the past with around 9000 data points and various attributes such as Lead Source, Total Time Spent on Website, Total Visits, Last Activity, etc.","a2489996":"#### Univariate Analysis - Last Activity","797e19a4":"**Observations**\n* Very few leads saw an ad in a newspaper.\n* **X Education may want to reconsider investing in this marketing channel as well.**","c4a593a6":"**Observations**\n* Very few leads saw an ad in a Digital Advertisement.","3f8e59c5":"There is no single most common Lead Source which could be used to impute null values. As a result, imputing nulls with a new value \"Unknown\" would be the preferred null imputation method.","f332f390":"#### Data Type Correction: I agree to pay the amount through cheque, A free copy of Mastering The Interview\n\n* **I agree to pay the amount through cheque**: Indicates whether the customer has agreed to pay the amount through cheque or not.\n* **A free copy of Mastering The Interview**: Indicates whether the customer wants a free copy of 'Mastering the Interview' or not.\n\nThese features will be easier to manipulate, interpret, and use in a model by converting them to boolean values.","af1788d8":"#### Null Handling: TotalVisits & Page Views Per Visit\n\n* **TotalVisit**: The total number of visits made by the customer on the website.\n* **Page Views Per Visit**: The total number of visits made by the customer on the website.\n\nWe assess the distribution of each of these features to determine the best imputation method.","7a6fadea":"For cities that are located in India, we can impute null values in Country as \"India\". Otherwise, we should impute nulls in Country as \"Unknown\"","c62e7901":"**Observations**\n* Very few leads saw an ad in a newspaper article.\n* **X Education may want to reconsider investing in this marketing channel as well.**","764254dc":"As can be seen above, Asymmetrique Activity\/Profile Index values appear to simply bucket Asymmetrique Activity\/Profile Scores. As a result, the index features are redundant and can be dropped."}}