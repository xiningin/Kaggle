{"cell_type":{"98b1bf85":"code","88f1af11":"code","c38b4f79":"code","f34f9fe1":"code","b7a08019":"code","66dab896":"code","10ca84e5":"code","3c77c6cc":"code","87a081e1":"code","eab8825b":"code","5631514c":"code","a84f3a02":"code","0d09afd2":"code","f724a039":"code","c24af98d":"code","d1ce1792":"code","98f4603c":"code","a817d948":"code","58e15b93":"code","aa4c4bc9":"code","ee294f5b":"code","f98c6d44":"code","9b71a461":"code","0af9f598":"code","adcdfcb9":"markdown","7c0dcc14":"markdown","d12a09e5":"markdown","fc31e2b8":"markdown"},"source":{"98b1bf85":"\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom matplotlib import cm\nimport matplotlib\nimport plotly.graph_objects as go\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n","88f1af11":"df = pd.read_csv('..\/input\/bollywood-box-office-20172020\/bollywoodboxoffice_raw.csv')\ndf.head(5)","c38b4f79":"#deleting unwanted columns\ndf = df.drop(['movie_url','movie_director_url'], axis = 1) \n","f34f9fe1":"df.columns","b7a08019":"\ncolumns = ['movie_opening','movie_weekend', 'movie_firstweek', 'movie_total','movie_total_worldwide']\n\nfor i , c in enumerate(columns):\n    df[c] = df[c].replace({':': '', 'cr': '', ',': '','---':'',\" \":''}, regex=True) #replacing special characters\n    df[c] = pd.to_numeric(df[c], errors='coerce').fillna(0) #converting to float\n\ndf.dtypes","66dab896":"\n#getting release date and movie length from movie_movierelease\nnew = df[\"movie_movierelease\"].str.split('|', n = 1, expand = True)  #splitting the values into two\n\n# making separate release date column from new data frame \ndf[\"release_date\"]= new[0] \n  \n# making separate movie length column from new data frame \ndf[\"movie_length\"]= new[1]\n\ndf= df.drop(['movie_movierelease'], axis = 1)","10ca84e5":"#Repeating the same thing from previous code for other columns\n#for column movie_producer\nnew = df[\"movie_producer\"].str.split(':', n = 1, expand = True)\ndf[\"producer\"]= new[1] \ndf = df.drop(['movie_producer'], axis = 1)","3c77c6cc":"#for column movie_banner\nnew = df[\"movie_banner\"].str.split(':', n = 1, expand = True)\ndf[\"banner\"]= new[1] \ndf = df.drop(['movie_banner'], axis = 1)","87a081e1":"#for column movie actors\nnew = df[\"movie_stars\"].str.split(':', n = 1, expand = True)\ndf[\"actors\"]= new[1] \ndf = df.drop(['movie_stars'], axis = 1)","eab8825b":"#getting day , month and year from release date\ndf['release_day'] = pd.DatetimeIndex(df['release_date']).day\ndf['release_month'] = pd.DatetimeIndex(df['release_date']).month\ndf['release_year'] = pd.DatetimeIndex(df['release_date']).year\n\nlook_up = {1: 'Jan', 2: 'Feb', 3: 'Mar', 4: 'Apr', 5: 'May',\n            6: 'Jun', 7: 'Jul', 8: 'Aug', 9: 'Sep', 10: 'Oct', 11: 'Nov', 12: 'Dec'}\n\ndf['release_month'] = df['release_month'].apply(lambda x: look_up[x])\n","5631514c":"#converting movie length column to totaltime in minutes\nnew = df.movie_length.str.split(n=4 , expand = True)\ndf['hours'] = new[0]\ndf['minutes'] = new[2]\ndf.hours = df.hours.replace({' ': ''}, regex=True)\ndf.minutes = df.minutes.replace({' ': ''}, regex=True)\n\ndf.hours = df.hours.astype(str).astype(int)\ndf.minutes = df.minutes.fillna(0)\ndf.minutes = df.minutes.astype(str).astype(int)\n\n\ndf['runtime'] = df['hours'] * 60 + df['minutes']","a84f3a02":"#keeping only required columns and put them in order\ndf = df[['movie_name', 'movie_opening', 'movie_weekend', 'movie_firstweek',\n       'movie_total', 'movie_total_worldwide', 'movie_genre', 'movie_director',\n        'release_date', 'release_day', 'release_month', 'release_year','runtime','producer', 'banner',\n       'actors','movie_details']]","0d09afd2":"df.head()","f724a039":"df.to_csv('bollywood_box_clean.csv', index=False)","c24af98d":"df = df.sort_values('movie_opening', ascending = False)\n\ndftop = df.head(15)\n\n\nsns.set_context(\"talk\")\nsns.set_style(\"darkgrid\")\nplt.style.use(\"fivethirtyeight\")\nplt.figure(figsize = (12,10))\nax = sns.barplot(x = 'movie_opening', y = 'movie_name', data = dftop,palette=\"dark\")\nplt.title(\"Highest first day earning Films\", size = 15)\nax.set_ylabel('')\nax.set_xlabel('Crores')","d1ce1792":"df = df.sort_values('movie_total_worldwide', ascending = False)\n\ndftop = df.head(15)","98f4603c":"sns.set_context(\"talk\")\nsns.set_style(\"darkgrid\")\nplt.style.use(\"fivethirtyeight\")\nplt.figure(figsize = (12,10))\nax = sns.barplot(x = 'movie_total_worldwide', y = 'movie_name', data = dftop,palette=\"dark\")\nplt.title(\"Highest grossing Films\", size = 15)\nax.set_ylabel('')\nax.set_xlabel('Crores')","a817d948":"df['release_year'] = df.release_year.astype('category')","58e15b93":"import plotly.express as px\n\nfig = px.scatter(df, x=\"runtime\", y=\"movie_total_worldwide\", color=\"release_year\",\n                 size='movie_total_worldwide')\nfig.show()","aa4c4bc9":"df.release_date = pd.to_datetime(df.release_date) #convert to datetime\ndf['day'] =df.release_date.dt.dayofweek #make a new column for day of the week where monday is o , tuesday is 1 and so on.","ee294f5b":"df.day.value_counts()","f98c6d44":"df.day = df.day.replace([4, 3, 2], ['Friday','Thursday', 'Tuesday'])","9b71a461":"ax = sns.countplot(x=\"day\", data= df)","0af9f598":"sns.set_context(\"talk\")\nsns.set_style(\"darkgrid\")\nplt.style.use(\"fivethirtyeight\")\nplt.figure(figsize = (12,10))\n\nax = sns.barplot(x = 'movie_total_worldwide', y = 'movie_name', hue = 'day',data = df.head(20))","adcdfcb9":"**Total 115 movies were released on friday . seems like bollywood industry prefers Friday to release a movie**","7c0dcc14":"**Highest grossing movies**","d12a09e5":"**Movies with highest first day opening**","fc31e2b8":"Day of the week movie released"}}