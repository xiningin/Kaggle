{"cell_type":{"d8bbede7":"code","ffe3e099":"code","9127c3f7":"code","3078653e":"code","d86abd64":"code","86fd184c":"code","d117227b":"code","14782cab":"code","e9294fd1":"code","915d1c79":"code","d55c00b8":"code","08db4a2b":"code","abb62b29":"code","9617540a":"code","a2807737":"code","38ff4a51":"code","65983e64":"code","831bb3ee":"code","1fa57db5":"code","8b4ec589":"code","24d56f97":"code","b564dd6b":"code","62175bdc":"code","dd3aad06":"code","dfd21721":"code","22132476":"code","421e6dee":"code","cbae3ac9":"code","ef95c84f":"code","2cdd6af7":"code","0222c068":"code","0d5ebff0":"code","7171ab5e":"code","7452f9d5":"code","84509828":"markdown","a39ff8dd":"markdown","bff6a645":"markdown","23fc91bd":"markdown","f0f883d9":"markdown","3d6a2623":"markdown","93960ee8":"markdown","7d729d54":"markdown","80223fff":"markdown","cd19fc14":"markdown","7023bfe8":"markdown","1e5301b9":"markdown","b4f25543":"markdown","833de08a":"markdown","c3901aee":"markdown","a0396931":"markdown","7351c4e2":"markdown","ac428f19":"markdown"},"source":{"d8bbede7":"#Import the required libraries\nimport os\nimport random\nimport sqlite3\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","ffe3e099":"#Connect to database and extract the exchange_transactions table \nos.chdir(\"\/kaggle\/input\/healthcare-or-transactions-data\")\nsqlite_file = 'Healthcare OR Transactions Data.db'\nconn = sqlite3.connect(sqlite_file)\nextr = pd.read_sql_query(\"SELECT * FROM exchange_transactions\", conn)","9127c3f7":"print(\"Dimensions of the exchange transactions table are: {}\".format(extr.shape))","3078653e":"extr.describe()","d86abd64":"#Drop duplicate rows\nextr.drop_duplicates(keep='first', inplace=True)","86fd184c":"#Convert relevant columns to datetime type and add a column for duration of each transaction\nextr['created_datetime'] = pd.to_datetime(extr['created_datetime'])\nextr['snapshot_date'] = pd.to_datetime(extr['snapshot_date'])\nextr['start_time'] = pd.to_datetime(extr['start_time'])\nextr['end_time'] = pd.to_datetime(extr['end_time'])\nextr['duration'] = (extr['end_time'] - extr['start_time']).dt.total_seconds()\/3600","d117227b":"#Calculate number of days of operation of iQueue\nmax(extr['snapshot_date']) - min(extr['snapshot_date'])","14782cab":"extr.shape[0] #Check the number of rows in the data after removing duplicates","e9294fd1":"extr.head() #Look at the top few rows of data","915d1c79":"#Filter the transactions that do not have a parent transaction\nfresh_tr = extr[extr['parent_transaction_id'].isnull()]\nfresh_tr['action'].value_counts()","d55c00b8":"fresh_tr['location'].value_counts() #Count of locations","08db4a2b":"fresh_tr['room_name'].value_counts() #Count of rooms (top and bottom few)\n","abb62b29":"requests_data = fresh_tr[fresh_tr['action']=='REQUEST']\nreq_dur = requests_data['duration']\nrelease_data = fresh_tr[fresh_tr['action']=='RELEASE']\nrel_dur = release_data['duration']\n\nbins = np.linspace(0, 12, 30)\nfig, ax = plt.subplots(1, 2)\nax[0].hist(req_dur, bins, alpha=0.5, color = 'black')\nax[0].set_ylabel('Count')\nax[0].set_xlabel('Request duration')\nax[0].set_ylim(0, 250)\nax[1].hist(rel_dur, bins, alpha=0.5, color = 'blue')\nax[1].set_ylim(0, 250)\nax[1].set_xlabel('Release duration')\nplt.show()","9617540a":"transfer_data = fresh_tr[fresh_tr['action']=='TRANSFER']\nplt.hist(transfer_data['duration'], color = 'green')\nplt.xlabel('Transfer duration')\nplt.ylabel('Count')\nplt.show()","a2807737":"notnullpar_tr = extr[extr['parent_transaction_id'].notnull()]\nnotnullpar_tr['action'].value_counts()","38ff4a51":"fresh = fresh_tr[['transaction_id', 'created_datetime', 'action', 'duration']]\nnotnull = notnullpar_tr[['parent_transaction_id', 'created_datetime', 'action']]\nfresh_leftjoin_notnull = fresh.merge(notnull, left_on='transaction_id', right_on='parent_transaction_id', how='left')\nfresh_leftjoin_notnull.sort_values('transaction_id').head()","65983e64":"#Filter transactions having Transfer and Mark updated actions\ntransfer_upd = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='TRANSFER') & (fresh_leftjoin_notnull['action_y']=='MARK_UPDATED')]\ntransfer_upd.shape[0]","831bb3ee":"#Filter transactions having Transfer and Approve transfer actions\ntransfer_app = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='TRANSFER') & (fresh_leftjoin_notnull['action_y']=='APPROVE_TRANSFER')]\ntransfer_app.shape[0]","1fa57db5":" #Filter transactions having Transfer and Deny transfer actions\ntransfer_deny = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='TRANSFER') & (fresh_leftjoin_notnull['action_y']=='DENY_TRANSFER')]\ntransfer_deny.shape[0]","8b4ec589":"transfer_app['duration'].sum()","24d56f97":"transfer_upd.head()","b564dd6b":"transfer_updated = transfer_upd.copy()\ntransfer_updated.loc[:,'process_time'] = pd.Series((pd.to_datetime(transfer_updated['created_datetime_y']) - pd.to_datetime(transfer_updated['created_datetime_x'])).dt.total_seconds()\/3600)\nplt.hist(transfer_updated['process_time'])\nplt.xlabel('Transfer processing time')\nplt.ylabel('Frequency')\nplt.show()","62175bdc":"transfer_updated['process_time'].mean()","dd3aad06":"#Filter transactions having Release and Mark updated actions\nrelease_upd = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='RELEASE') & (fresh_leftjoin_notnull['action_y']=='MARK_UPDATED')]\nrelease_upd.shape[0]","dfd21721":"#Filter transactions having Release and Deny release actions\nrelease_den = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='RELEASE') & (fresh_leftjoin_notnull['action_y']=='DENY_RELEASE')]\nrelease_den.shape[0]","22132476":"release_upd['duration'].sum()","421e6dee":"release_updated = release_upd.copy()\nrelease_updated.loc[:,'process_time'] = pd.Series((pd.to_datetime(release_updated['created_datetime_y']) - pd.to_datetime(release_updated['created_datetime_x'])).dt.total_seconds()\/3600)\nplt.hist(release_updated['process_time'])\nplt.xlabel('Release processing time')\nplt.ylabel('Frequency')\nplt.show()","cbae3ac9":"release_updated['process_time'].mean()","ef95c84f":"#Filter transactions having Request and Mark updated actions\nreq_upd = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='REQUEST') & (fresh_leftjoin_notnull['action_y']=='MARK_UPDATED')]\nreq_upd.shape[0]","2cdd6af7":"#Filter transactions having Request and Approve transfer actions\nrequest_app = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='REQUEST') & (fresh_leftjoin_notnull['action_y']=='APPROVE_REQUEST')]\nrequest_app.shape[0]","0222c068":"#Filter transactions having Request and Deny transfer actions\nrequest_deny = fresh_leftjoin_notnull[(fresh_leftjoin_notnull['action_x']=='REQUEST') & (fresh_leftjoin_notnull['action_y']=='DENY_REQUEST')]\nrequest_deny.shape[0]","0d5ebff0":"request_app['duration'].sum()","7171ab5e":"request_approved = request_app.copy()\nrequest_approved.loc[:,'process_time'] = pd.Series((pd.to_datetime(request_approved['created_datetime_y']) - pd.to_datetime(request_approved['created_datetime_x'])).dt.total_seconds()\/3600)\nplt.hist(request_approved['process_time'])\nplt.xlabel('Request processing time')\nplt.ylabel('Frequency')\nplt.show()","7452f9d5":"request_approved['process_time'].mean()","84509828":"It is evident that the total of 2772 'fresh' transactions are either of type REQUEST, RELEASE or TRANSFER.\n\nLet us look at the duration of each type of transactions by plotting histograms.","a39ff8dd":"**3) REQUEST**","bff6a645":"**1) TRANSFER**","23fc91bd":"About 9434 hours of time was released during the 88 days of operation of our product. On an average, 107 hours of time was RELEASED per day. The average processing time to process a release was 7.15 hours.","f0f883d9":"A software product is used to free up capacity in operating rooms and create a much more transparent and surgeon-centric process for measuring Operating Room (OR) utilization. The goal of this analysis is to showcase the effectiveness of the marketplace provided by this product. We have the data for the 'Exchange' transactions that happened this product for an existing customer[](http:\/\/). ","3d6a2623":"About 4668 hours of time was released during the 88 days of operation of our product. On an average, 53 hours of time was REQUESTED per day. ","93960ee8":"We see that from the 1200 RELEASE transactions, 1178 were MARKED UPDATED. The remaining 23 transfer transactions were denied. 99% percent of RELEASE transactions were APPROVED (directly MARKED UPDATED in this case).","7d729d54":"**2) RELEASE**","80223fff":"Now we can look at the downstream transactions for each type of parent transaction by filtering data from this table along with the processing time for each!","cd19fc14":"Next, we will filter the transactions having a parent transaction and look at the actions performed in them.","7023bfe8":"Here we notice that some transactions do not have a parent transaction. We will filter such 'fresh' transactions and look at the actions performed for them followed by looking at the count of locations and rooms.","1e5301b9":"We note here that from the 1309 REQUEST transactions, 1134 were APPROVED and MARKED UPDATED in that order. The remaining 175 REQUEST transactions were denied. 86.6% percent of REQUESTS were APPROVED.","b4f25543":"We note here that from the 263 TRANSFER transactions, 256 were APPROVED and MARKED UPDATED in that order. The remaining 7 transfer transactions were denied. 97.3% percent of TRANSFER transactions were APPROVED.","833de08a":"Over 2085 hours of time was successfully transferred during the 88 days of operation of our product. On an average, we were able to transfer 27.3 hours of time only through TRANSFERS with an average processing time of 7.37 hours with only a few outliers which take a few days to process.","c3901aee":"**EXECUTIVE SUMMARY**\n\n**Goal**\n\n*To increase Surgeon OR Access **via Marketplace for OR time.*\n\n**Need**\n\n*Over 10,000 unutilized hours every 100 days with Block Scheduling.*\n\n**Our Results (88 days)**\n\n*250+  Transfers processed (2000+ hours)*\n\n*1100+ Requests fulfilled (4500+ hours)*\n\n*1150+ Releases approved (9000+ hours)*\n\n**Key Advantages**\n\n*>85% Requests fulfilled*\n\n*>50% of utilization of released time*\n\n*Average Request processing time < 10 hours*","a0396931":"It is evident that the follow up transactions are of one of the types: MARK_UPDATED, APPROVE_REQUEST, APPROVE_TRANSFER, DENY_REQUEST, DENY_RELEASE, DENY_TRANSFER.\n\nNext, we will filter some columns from the fresh transactions table, some from table having parent transactions and perform a left join on the two tables. This will give us details of the downstream transactions taking place on every parent transaction.","7351c4e2":"From the description we can note the following points:\n* We have a total of 6965 but only 6935 unique transaction ids. Some transactions have been repeated in the dataset.\n* Some transactions have a parent transaction.\n* A parent transaction may be the parent of 1 or more transactions.\n* There are 275 schedulers in the system.\n* There are 357 surgeons in the system.\n\nWe will proceed from here by deleting the repeated\/duplicate transactions, converting the columns containning date and time to datetype in Python and add a column corresponding to the duration of time blocked scheduling time for the transaction.","ac428f19":"**Conclusions:**\n* 11500 hours of total time was available for transactions in 88 days.\n* 6700 hours of time transferred via the transactions.\n* Our product is effective in helping reduce unutilized time by more than half.\n* The average processing time for a request is 10.2 hours, it is even lesser (7 hours) for release and transfer."}}