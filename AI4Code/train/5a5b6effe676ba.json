{"cell_type":{"a40a90ff":"code","b22817c3":"code","a2df3a13":"code","9ebf3261":"code","cf611ca7":"code","2dcc6695":"code","f08e99a6":"code","1b349b93":"code","d487fd82":"code","7b6cf4b7":"code","415cd0e8":"code","a1cce3c4":"code","d828ff1c":"code","c43c5949":"code","5191918c":"code","7363797e":"code","53afb976":"code","2a8d74fe":"code","92a273cf":"code","f0d0ab19":"code","fa502696":"code","8256b5d3":"code","569ce966":"code","11d62e9a":"code","4aec1b68":"code","08f89439":"code","36b617ad":"code","d80a0f11":"code","41b31ee1":"code","e6974acc":"code","44392805":"code","cf282162":"code","0f9ddfb7":"code","f4caf5cc":"code","20fdafe8":"code","5a93b51f":"code","10ee17de":"code","3733a106":"code","e1530701":"code","ce3e247f":"code","97693fb5":"code","9f54c76a":"code","738c70d9":"code","4d96a44a":"code","3161be6b":"code","c8f6d94e":"code","41ee0e9a":"code","5011fedd":"code","bcfee2c2":"code","b42b329f":"code","60f54dcf":"code","768e06e2":"code","17deb266":"code","264af263":"code","f7f8473b":"code","ca1d15da":"code","79ad2f06":"code","db8cd5a8":"code","92260a61":"code","6eef8e91":"code","d28ace87":"code","f90a019a":"code","fa94fac5":"code","55eceec0":"code","f478c0ce":"code","93d19430":"code","538550f5":"code","32898378":"code","35afe07e":"code","889531b7":"code","64de9692":"code","98ccbfda":"code","7e012dc9":"code","910b7705":"code","9a922108":"code","c9cea218":"code","bbce3d3e":"code","9fa5e57e":"code","40e3b578":"code","4a1995c2":"code","6bacbc8c":"code","97c18307":"code","5c300f95":"code","472ef301":"code","c30264c2":"code","d05a19ee":"code","56832a2e":"code","92ed5d98":"code","0c921cac":"code","507e6c2d":"code","9044d3a5":"code","a7bfb99b":"code","b8ffcffc":"code","6f0fbca0":"code","e08cfde6":"code","565a908d":"code","e68e3317":"code","7b2a3b19":"code","4a0f031f":"code","abf31e3b":"code","a0a7c536":"code","32988d18":"code","81b133c1":"code","34b05837":"code","66017c4c":"code","2bb0f3ee":"code","25cb7be8":"code","b780040b":"code","cace99fc":"code","693d9b72":"code","abfd9c3d":"code","0b30da99":"code","778cea23":"code","33868349":"code","9ebf8c40":"code","6d8f445a":"code","7f633079":"code","10a3cce7":"code","694f5591":"code","4e165a4d":"code","28067812":"code","eabb3471":"code","b2decccb":"markdown","5dbaa247":"markdown","54148f94":"markdown","421c4b6f":"markdown","bb674efc":"markdown","b3d87281":"markdown","04a4c6e5":"markdown","4447dfe0":"markdown","65e549fb":"markdown","ba362134":"markdown","1a5f3a13":"markdown","d5b216e0":"markdown","aed8db04":"markdown","9df7e0cf":"markdown","59393e4f":"markdown","0dbc6adf":"markdown","26e53c6d":"markdown","d03f50b3":"markdown","dbbada87":"markdown","424baafc":"markdown"},"source":{"a40a90ff":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nsns.set(rc={'figure.figsize': [10, 10]}, font_scale=1.2)\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import MinMaxScaler, StandardScaler\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.svm import SVC\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.neural_network import MLPClassifier\nfrom sklearn.ensemble import RandomForestClassifier\nfrom xgboost import XGBClassifier\nfrom sklearn.metrics import classification_report, accuracy_score, confusion_matrix","b22817c3":"df = pd.read_csv('..\/input\/human-resources-data-set\/HRDataset_v14.csv')\ndf.head(20)","a2df3a13":"df.info()","9ebf3261":"df.describe()","cf611ca7":"plt.figure(figsize=(20,15))\nsns.heatmap(df.corr(),cmap=\"YlGnBu\",annot=True)","2dcc6695":"# Check unique values for each fields except a few ones not so relevant\nfor c in df.columns:\n    if df[c].dtype == object and (c not in ('Employee_Name', 'DOB', 'DateofHire', 'DateofTermination', 'LastPerformanceReview_Date', 'ManagerName')):\n        print(c, df[c].unique())","f08e99a6":"df['MarriedID'].value_counts()","1b349b93":"df['MaritalStatusID'].value_counts()\ndf['MaritalDesc'].value_counts()","d487fd82":"df['GenderID'].value_counts()\ndf['Sex'].value_counts()","7b6cf4b7":"df['EmpStatusID'].value_counts()","415cd0e8":"df['EmploymentStatus'].value_counts()","a1cce3c4":"EmpStatus= df[['EmpStatusID','EmploymentStatus']]\nEmpStatus.head(20)","d828ff1c":"df['DeptID'].value_counts()\ndf['Department'].value_counts()","c43c5949":"df['PerfScoreID'].value_counts()\ndf['PerformanceScore'].value_counts()","5191918c":"df['FromDiversityJobFairID'].value_counts()","7363797e":"df['PositionID'].value_counts()\ndf['Position'].value_counts()","53afb976":"df['ManagerID'].value_counts()\ndf['ManagerName'].value_counts()","2a8d74fe":"#df['State'].value_counts()    \n#df['Zip'].value_counts()","92a273cf":"df['DOB'].unique()","f0d0ab19":"df['MaritalDesc'].value_counts()","fa502696":"df['CitizenDesc'].value_counts()","8256b5d3":"df['HispanicLatino'].value_counts()","569ce966":"df['RaceDesc'].value_counts()","11d62e9a":"df['DateofHire'].unique()","4aec1b68":"df['DateofTermination'].value_counts()\ndf['Termd'].value_counts()","08f89439":"df['TermReason'].value_counts()","36b617ad":"df['RecruitmentSource'].value_counts()","d80a0f11":"df['EngagementSurvey'].unique()","41b31ee1":"df['EmpSatisfaction'].value_counts()","e6974acc":"df['SpecialProjectsCount'].value_counts()","44392805":"df['LastPerformanceReview_Date'].value_counts()","cf282162":"df['DaysLateLast30'].value_counts()","0f9ddfb7":"df['Absences'].unique()","f4caf5cc":"df.head(5)","20fdafe8":"from datetime import datetime\ndf['DateofHire'] = pd.to_datetime(df['DateofHire'], format='%m\/%d\/%Y')\ndf['DateofTermination'] = pd.to_datetime(df['DateofTermination'], format='%m\/%d\/%Y')\ndf[['DateofHire','DateofTermination']]","5a93b51f":"df.hist(bins=50,figsize=(10,10))","10ee17de":"sns.pairplot(df)","3733a106":"df['PerformanceScore'].unique()","e1530701":"plt.figure(figsize=(10,5))\nsns.countplot(x='PerformanceScore', data=df, palette='viridis')","ce3e247f":"plt.figure(figsize=(10,5))\nsns.countplot(x='PerformanceScore', data=df, hue = 'Sex', palette='viridis')","97693fb5":"plt.figure(figsize=(10,5))\nsns.countplot(x='PerformanceScore', data=df, hue = 'Department', palette='viridis')","9f54c76a":"plt.figure(figsize=(10,5))\nsns.countplot(x='PerformanceScore', data=df, hue = 'Termd', palette='viridis')","738c70d9":"plt.figure(figsize=(10,5))\nsns.countplot(x='Sex', data=df, palette='viridis')","4d96a44a":"plt.figure(figsize=(10,5))\nsns.countplot(x='MaritalDesc', data=df, hue = 'Sex', palette='viridis')","3161be6b":"plt.figure(figsize=(10,5))\nsns.countplot(x='MaritalDesc', data=df, hue = 'Termd', palette='viridis')","c8f6d94e":"plt.figure(figsize=(10,5))\nsns.countplot(x='MaritalDesc', data=df, hue = 'CitizenDesc', palette='viridis')","41ee0e9a":"plt.figure(figsize=(20,20))\nsns.catplot(kind='box', x='Salary', y='MaritalDesc', data=df, palette='viridis',  col='PerformanceScore', hue='Sex')","5011fedd":"df['Department'].unique()","bcfee2c2":"perfs = ['Exceeds', 'Needs Improvement', 'PIP', 'Fully Meets']\ndps = ['Production       ', 'IT\/IS', 'Software Engineering',\n       'Admin Offices', 'Executive Office', 'Sales']\npalette1 ={\"IT\/IS\": \"C0\", \"Production       \": \"C1\", \"Software Engineering\": \"C2\", \"Admin Offices\":\"C3\", \"Sales\": \"C4\", \"Executive Office\":\"C5\"}\npalette2 ={\"Exceeds\": \"C0\", \"Needs Improvement\": \"C1\", \"PIP\": \"C2\", \"Fully Meets\":\"C3\"}","b42b329f":"plt.figure(figsize=(15, 10))\nfor dp in dps:\n    sns.histplot(x='Department', hue='PerformanceScore', multiple='stack', shrink=.9, stat='probability',palette=palette2, data=df[df['Department']==dp])","60f54dcf":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, palette='viridis')","768e06e2":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue= 'Termd', palette='viridis')","17deb266":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue= 'Sex',  palette='viridis')","264af263":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'MaritalDesc',  palette='viridis')","f7f8473b":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'Termd',  palette='viridis')","ca1d15da":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'PerformanceScore',  palette='viridis')","79ad2f06":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'RaceDesc',  palette='viridis')","db8cd5a8":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'RecruitmentSource',  palette='viridis')","92260a61":"plt.figure(figsize=(10,5))\nsns.countplot(y='Department', data=df, hue = 'SpecialProjectsCount',  palette='viridis')","6eef8e91":"plt.figure(figsize=(20,20))\nsns.catplot(kind='box', x='Salary', y='Department', data=df, palette='viridis',  col='PerformanceScore', hue='Sex')","d28ace87":"sns.catplot(x='Department', y='Salary', hue='PerformanceScore', kind='box', data=df, height=10, aspect=3)","f90a019a":"plt.figure(figsize=(10,10))\nsns.countplot(y='Position', data=df,  hue = 'Sex', palette='viridis')","fa94fac5":"plt.figure(figsize=(10,10))\nsns.countplot(y='Position', data=df,  hue = 'PerformanceScore', palette='viridis')","55eceec0":"plt.figure(figsize=(10,10))\nsns.countplot(y='Position', data=df,  hue = 'RecruitmentSource', palette='viridis')","f478c0ce":"plt.figure(figsize=(10,10))\nsns.countplot(y='Position', data=df,  hue = 'Termd', palette='viridis')","93d19430":"plt.figure(figsize=(10,10))\nsns.countplot(y='Position', data=df,  hue = 'MaritalDesc', palette='viridis')","538550f5":"print(len(df['ManagerName'].unique()), \"unique managers are currently working in the company :\", df['ManagerName'].unique())","32898378":"sns.catplot(y='ManagerID', x='PerformanceScore', kind='box', data=df, height=10, aspect=1)","35afe07e":"ManagersIds = df.groupby('ManagerID')['PerformanceScore'].count().sort_values(ascending=False).index\nsns.catplot(y='ManagerID', hue='PerformanceScore', kind='count', data=df, order=ManagersIds,  height=10, aspect=1)","889531b7":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"ManagerID\", y=\"SpecialProjectsCount\", hue=\"Sex\",data=df, palette='viridis')","64de9692":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"ManagerID\", y=\"Absences\", hue=\"Sex\",data=df, palette='viridis')","98ccbfda":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"ManagerID\", y=\"Salary\", hue=\"Termd\",data=df, palette='viridis')","7e012dc9":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"ManagerID\", y=\"Salary\", hue=\"Sex\",data=df, palette='viridis')","910b7705":"sns.catplot(x='ManagerID', y='Salary', hue='PerformanceScore', kind='box', data=df, height=10, aspect=3)","9a922108":"plt.figure(figsize=(10,5))\nsns.countplot(x='Sex', data=df, palette='viridis')","c9cea218":"plt.figure(figsize=(10,5))\nsns.countplot(y=df['Department'], hue=df['Sex'])","bbce3d3e":"sns.catplot(x='MaritalDesc', hue='Department', data=df, kind=\"count\",height=7, aspect=1)","9fa5e57e":"plt.figure(figsize=(10,5))\nsns.catplot(y='RaceDesc', data=df, kind='count', height=8, aspect=1)","40e3b578":"palette1 ={\"M \": \"C0\", \"F\": \"C1\"}\nraces = ['White', 'Black or African American', 'Two or more races', 'Asian', 'Hispanic', 'American Indian or Alaska Native']\npalette2 ={'White':\"C0\", 'Black or African American':\"C1\", 'Two or more races':\"C2\", 'Asian':\"C3\", 'Hispanic':\"C4\", 'American Indian or Alaska Native':\"C5\"}\nplt.figure(figsize=(15, 8))\nfor r in races:\n    sns.histplot(x='RaceDesc', hue=\"Sex\", multiple=\"stack\", data=df[df['RaceDesc']==r], palette=palette1, stat='probability', shrink=.8)","4a1995c2":"plt.figure(figsize=(15, 8))\nsns.histplot(x='Department', hue='RaceDesc', multiple='stack', data=df)","6bacbc8c":"dps = ['Sales', 'IT\/IS', 'Software Engineering',\n       'Admin Offices', 'Executive Office','Production']\nplt.figure(figsize=(15, 8))\nfor d in dps:\n    sns.histplot(x='Department', hue='RaceDesc', palette=palette2, stat='probability', multiple='stack', shrink=0.9, data=df[df['Department']==d])","97c18307":"df['RecruitmentSource'].unique()","5c300f95":"sns.catplot(y='RecruitmentSource', kind='count', order=df.groupby('RecruitmentSource')['EmpID'].count().sort_values(ascending=False).index, data=df)","472ef301":"plt.figure(figsize=(10,5))\nsns.distplot(df['Salary'])","c30264c2":"sns.jointplot(x='SpecialProjectsCount', y='Salary', data=df, kind='reg', height=8, color='m')","d05a19ee":"sns.jointplot(x='Absences', y='Salary', data=df, kind='reg', height=8, color='m')","56832a2e":"plt.figure(figsize=(10,5))\nsns.boxplot(x=df['Sex'], y=df['Salary']\/1000, hue=df['MaritalDesc'])","92ed5d98":"sns.catplot(y='Department', x='Salary', col='Sex', data=df, kind=\"box\", height = 10, aspect = 1)","0c921cac":"plt.figure(figsize=(10,5))\nsns.boxplot(y=\"RecruitmentSource\", x=\"Salary\", hue=\"Sex\",data=df, palette='viridis')","507e6c2d":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"PerformanceScore\", y=\"Salary\", hue=\"Sex\",data=df, palette='viridis')","9044d3a5":"plt.figure(figsize=(10,5))\nsns.boxplot(x=\"Termd\", y=\"Salary\", hue=\"Sex\",data=df, palette='viridis')","a7bfb99b":"df['HispanicLatino'].value_counts()","b8ffcffc":"df['HispanicLatino'].replace(\"Yes\",1,inplace=True)\ndf['HispanicLatino'].replace(\"yes\",1,inplace=True)\ndf['HispanicLatino'].replace(\"No\",0,inplace=True)\ndf['HispanicLatino'].replace(\"no\",0,inplace=True)","6f0fbca0":"df['HispanicLatino'].value_counts()","e08cfde6":"plt.figure(figsize=(10,5))\nsns.countplot(x='HispanicLatino', data=df, palette='viridis')","565a908d":"sns.jointplot(x='HispanicLatino', y='Salary', data=df, kind='reg', height=8, color='m')","e68e3317":"sns.boxplot(x=\"HispanicLatino\", y=\"Salary\", hue=\"Sex\",data=df, palette='viridis')","7b2a3b19":"plt.figure(figsize=(10,5))\nsns.countplot(x='HispanicLatino', data=df, hue = 'Termd', palette='viridis')","4a0f031f":"df.info()","abf31e3b":"df_select = df[['MaritalDesc','Sex', 'EmploymentStatus', 'Department', 'PerformanceScore',  'Position', 'CitizenDesc', 'HispanicLatino',\n          'RaceDesc', 'ManagerName', 'RecruitmentSource', 'EmpSatisfaction', 'SpecialProjectsCount','Salary', 'DaysLateLast30', 'Absences', 'Termd']]","a0a7c536":"df_select.head()","32988d18":"df_select.isnull().sum()","81b133c1":"df_select.columns[:-5]","34b05837":"df_dummies = pd.get_dummies(df_select, columns=df_select.columns[:-5], drop_first=True)\ndf_dummies","66017c4c":"df_dummies.info()","2bb0f3ee":"x = df_dummies.drop('Termd', axis=1)\ny = df_dummies['Termd']","25cb7be8":"from sklearn.model_selection import train_test_split","b780040b":"x_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.2, random_state=22)","cace99fc":"from imblearn.over_sampling import SMOTE","693d9b72":"sm = SMOTE(random_state=22)\noversample = SMOTE()\nx_train, y_train = oversample.fit_resample(x_train, y_train)","abfd9c3d":"y_train","0b30da99":"from sklearn.preprocessing import StandardScaler\n\nscaler = StandardScaler()\n\nscaler.fit(x_train)","778cea23":"x_train = scaler.transform(x_train)\nx_test = scaler.transform(x_test)","33868349":"models = {\n    \"   K-Nearest Neighbors\": KNeighborsClassifier(),\n    \"   Logistic Regression\": LogisticRegression(),\n    \"Support Vector Machine\": SVC(),\n    \"         Decision Tree\": DecisionTreeClassifier(),\n    \"        Neural Network\": MLPClassifier(),\n    \"         Random Forest\": RandomForestClassifier(n_estimators=500),\n    \"         XGBClassifier\": XGBClassifier(n_estimators=700)\n}\n\nfor name, model in models.items():\n    model.fit(x_train, y_train)\n    print(name + \" trained.\")","9ebf8c40":"for name, model in models.items():\n    print(name + \" Accuracy: {:.2f}%\".format(model.score(x_test, y_test) * 100))\n    y_pred = model.predict(x_test)\n    print(confusion_matrix(y_test, y_pred))\n    print(classification_report(y_test, y_pred))\n    ","6d8f445a":"from sklearn.feature_selection import f_classif, chi2, mutual_info_classif\nfrom sklearn.feature_selection import SelectKBest","7f633079":"selector = SelectKBest(k=10, score_func=f_classif)","10a3cce7":"selector.fit(x_train, y_train)","694f5591":"selector.get_support(indices=True)","4e165a4d":"x.columns[selector.get_support(indices=True)]","28067812":"Select_columns = pd.DataFrame({'Important_Feature':x.columns[selector.get_support(indices=True)],\n                  'Score':selector.get_support(indices=True)} )","eabb3471":"plt.figure(figsize=(10,5))\nsns.barplot(x='Score', y='Important_Feature', data=Select_columns)","b2decccb":" * Select the needed columns","5dbaa247":"It's also interesting to see the distribution of salaries between individuals having different performance scores and differents managers supervising them :","54148f94":"# Featuer Engineering ","421c4b6f":"* Position Data","bb674efc":"The sales department needs to be watched since it's the department which requires the most performance improvement plan (PIP). These have been set to address failures to meet specific job goals or to ameliorate behavior-related concerns.","b3d87281":"distribution of salaries in the company","04a4c6e5":"# Data exploration ","4447dfe0":"# Data Visualization ","65e549fb":"Which managers supervise the most in the company ?","ba362134":"* Department Data","1a5f3a13":"The histogram below allows us to see the conditional probability of Department given Perfomance Score. It's a way to grasp the overall performance of the company but knowing the fact the production department is much bigger than other departments, we can do better taking the performance score given the department.","d5b216e0":"* Social Data","aed8db04":"* we wnat extract experience for all emp, but part of them was termination ","9df7e0cf":"What are our best recruiting sources if we want to ensure a diverse organization ?","59393e4f":"What is the overall diversity profile of the organization ?","0dbc6adf":"Are there areas of the company where pay is not equitable ?","26e53c6d":"It's also interesting to see the distribution of salaries between individuals having different performance scores and differents Department supervising them :","d03f50b3":"* (1,2,3=active , 4= Terminated for Cause , 5= Voluntarily Terminated)","dbbada87":"How is PerformanceScore distributed in the dataset ?","424baafc":"How many managers are there in the company ?"}}