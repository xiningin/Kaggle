{"cell_type":{"c1b972b6":"code","b8c34e0d":"code","d67a999e":"code","76df9718":"code","2070aada":"code","5ed31361":"code","38261b90":"code","1c8e7249":"code","4692b5ee":"code","15688127":"code","92b9e834":"code","62f89313":"code","57e50cee":"code","aff60ed5":"code","66223171":"markdown","6e3cdd3c":"markdown","f4ce77a7":"markdown","58b14a73":"markdown","6ac19c90":"markdown","51ae97e7":"markdown","607999e8":"markdown","faebb574":"markdown","a64661c4":"markdown","d547ef23":"markdown","0cc3f9fd":"markdown","6edb68f9":"markdown","12a5bafe":"markdown","f46d708b":"markdown","7027f25e":"markdown","182dedf3":"markdown","8afbe0a6":"markdown","6f9b5b39":"markdown","b334aba4":"markdown","2b3d4adb":"markdown","e8856f2c":"markdown","c5b1f7fc":"markdown"},"source":{"c1b972b6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","b8c34e0d":"# import necessary libraries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom wordcloud import WordCloud\n\n","d67a999e":"#loading data\nplayers=pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/players.csv')\nprint(\"Number of datapoints in players.csv:\", len(players))","76df9718":"players.info()\ndisplay(players.head())\nplayers.tail()","2070aada":"print('Missing birthdates: ',players['birthDate'].isnull().sum())\nprint('Missing College info: ',players['collegeName'].isnull().sum())\n\n# converting height in cm\nfeet =pd.to_numeric(players['height'].str.get(0))*12\nheights=players['height'].str.split('-', expand=True)\ninches=pd.to_numeric(heights[1])\ninches=inches.fillna(value=0)\nplayers['height_inch']=inches+feet\nplayers['height_cm']=(inches+feet)*2.51\n\n#converting weight in kg\nplayers['weight_kg']=players['weight']\/2.205\n\n#converting birthdates to datetime\nplayers['birthDate']=pd.to_datetime(players['birthDate'])\n\n# convert player key as object\nplayers['nflId']=players['nflId'].astype('object')\n\n#replacing unknown characters\nplayers['collegeName']=players['collegeName'].str.replace('&amp;', '&')","5ed31361":"# identifying teams\ndef team_map(x):\n    if x in ['SS','FS','MLB', 'ILB', 'LB','CB', 'DE','DT', 'NT', 'OLB', 'S', 'DB']: \n        return 'Defense'\n    elif x in ['C', 'RB','FB', 'HB', 'OG', 'TE', 'QB', 'WR', 'OT','T', 'G']:\n        return 'Offense'\n    else:  #'K', 'LS', 'P'\n        return 'Special Teams'\n\n#position dictionnary\npositions_dic={'SS':'Strong Safety', 'FS': 'Free Safety', 'MLB':'Middle Linebacker', 'ILB': 'Inside Linebacker', 'WR':'Wide Receiver', 'CB':'Cornerback', 'K':'Kicker', 'DB': 'Defensive back', 'OLB':'Outside Linebacker', 'DE':'Defensive End', 'TE':'Tight End',\n       'T':'Tackle', 'DT': 'Defensive Tackle', 'C':'Center', 'P':'Punter', 'LS':'Long Snapper', 'RB':'Running Back', 'G':'Guard', 'NT':'Nose Tackle', 'FB': 'Fullback', 'LB':'Linebacker', 'QB':'Quarterback', 'OT':'Offensive Tackle',\n       'S':'Safety', 'HB': 'Halfback', 'OG': 'Offensive Guard'}\n#add positions descriptions and teams in dataframe\nplayers['Positions_desc']=players['Position'].map(positions_dic)\nplayers['Teams']=players['Position'].map(team_map)\n\n#adding body mass index and age\nplayers['bodyMassIndex']=round(players['weight_kg']\/(players['height_cm']\/100)**2,2)\nplayers['age']=2021-players['birthDate'].map(lambda x: x.year)\n\nplayers.head()\n","38261b90":"#counting players per teams\ncount_players=players.groupby(['Teams']).count()[['nflId']]\ncount_players['Proportion']=round(count_players\/count_players.sum()*100,1)\n\n#plotting\nteams_colors=['#003CC7','#F5291D','#74A633']\nf, (ax1,ax2) = plt.subplots(1,2,figsize=(15, 6))\nfor location in ['left','right', 'bottom', 'top']:\n        ax1.spines[location].set_visible(False)\nax1.bar(x=count_players.index,height=count_players['nflId'],color=teams_colors)\nax1.tick_params(left=False, bottom=False)\nax1.set_yticks([])\nax1.set_title('Number of players', loc='left', weight='bold', y=1.1,fontsize=14)\nfor i,j in enumerate(count_players['nflId']):\n    ax1.annotate(text=j, xy=(i,j), xytext=(i, j+25), fontsize=14, color='black',alpha=0.5,weight='bold', va='center', ha='center')\nax2.pie(count_players['Proportion'], explode = (0,0,0.1), autopct='%1.1f%%', startangle=180,colors=teams_colors,\n        textprops=dict(color=\"w\", weight='bold'))\nax2.axis('equal')\nax2.set_title('Proportion in NFL players', loc='center', weight='bold', y=1.1,fontsize=14)\n\nplt.show()","1c8e7249":"#calculating age, weight, height and bodymass stats per teams\ndf_teams_stats=players.groupby(['Teams']).describe().T\nage_stats=df_teams_stats.loc[['age']].reset_index().iloc[:,1:].drop(0, axis=0).set_index('level_1')\nweight_stats=df_teams_stats.loc[['weight_kg']].reset_index().iloc[:,1:].drop(0, axis=0).set_index('level_1')\nheight_stats=df_teams_stats.loc[['height_cm']].reset_index().iloc[:,1:].drop(0, axis=0).set_index('level_1')\nbodymass_stats=df_teams_stats.loc[['bodyMassIndex']].reset_index().iloc[:,1:].drop(0, axis=0).set_index('level_1')\n\n#boxplot aesthetics\nteams_palette={'Defense': '#003CC7', 'Offense':'#F5291D', 'Special Teams':'#74A633'}\nflierprops = dict(marker='D', markerfacecolor='#D1501F', markersize=5,markeredgecolor='none')\nmedianprops = dict(linewidth=1.2, color='grey')\nmeanpointprops = dict( markeredgecolor='#ECE0D4',\n                      markerfacecolor='#ECE0D4')\n#plotting\nfig1, ax1 =plt.subplots(figsize=(15,5))\nfor location in ['left','right', 'bottom', 'top']:\n        ax1.spines[location].set_visible(False)\nsns.boxplot(y=\"Teams\", x=\"age\", ax=ax1,data=players,palette=teams_palette, saturation=1, linewidth=0.5, \n            showmeans=True, flierprops=flierprops, medianprops=medianprops, meanprops=meanpointprops)\nax1.set_title('Players Age spread per Teams', loc='left', weight='bold', y=1.1, pad=10, fontsize=14)\nax1.set_ylabel('')\nax1.set_xlabel('')\nax1.tick_params(left=False)\n\nplt.table(cellText=age_stats.values.astype('int'),\n          rowLabels=age_stats.index,\n          colLabels=age_stats.columns,\n          cellLoc = 'right', rowLoc = 'center',\n          loc='right', bbox=[0,-0.75,.4,.6])\nplt.show()","4692b5ee":"#calculating proportion of players per month of birth and teams\nplayers['month_bdate']=players['birthDate'].map(lambda x: x.month)\nbirths_months=players[['nflId','Teams','month_bdate']].groupby(['Teams','month_bdate']).count()\nbirths_months=(births_months\/births_months.groupby(level=0).sum()*100).reset_index()\n#plotting\nfig5, (ax1,ax2,ax3) =plt.subplots(1,3,figsize=(15,5), sharey=True)\nteams=['Offense', 'Defense','Special Teams']\nsns.barplot(x='month_bdate',y='nflId', data=births_months, hue='Teams', ax=ax1, palette={'Defense': '#F2F2F2', 'Offense':'#F5291D', 'Special Teams':'#F2F2F2'}, saturation=1 )\nsns.barplot(x='month_bdate',y='nflId', data=births_months, hue='Teams',ax=ax2, palette={'Defense': '#003CC7', 'Offense':'#F2F2F2', 'Special Teams':'#F2F2F2'}, saturation=1 )\nsns.barplot(x='month_bdate',y='nflId', data=births_months, hue='Teams',ax=ax3, palette={'Defense': '#F2F2F2', 'Offense':'#F2F2F2', 'Special Teams':'#74A633'}, saturation=1 )\n\nfor ax, t in zip((ax1,ax2,ax3),teams):\n    ax.legend().remove()\n    ax.set_ylabel('')\n    ax.set_xlabel('Month of birth')\n    ax.tick_params(bottom=False ,color='grey')\n    ax.set_xticklabels(['J','F','M','A','M','J','J','A','S','O','N','D'])\n    ax.set_title(t, weight='bold')\n    for location in ['left','right', 'bottom', 'top']:\n        ax.spines[location].set_visible(False)\nax1.text(s='Percentage of players per month of birth',x=0, y=17, weight='bold', fontsize=14)\nplt.show()","15688127":"fig2, ax2 =plt.subplots(figsize=(15,5))\nfor location in ['left','right', 'bottom', 'top']:\n        ax2.spines[location].set_visible(False)\nsns.boxplot(y=\"Teams\", x=\"weight_kg\", ax=ax2,data=players,palette=teams_palette, saturation=1, linewidth=0.5, \n            showmeans=True, flierprops=flierprops, medianprops=medianprops, meanprops=meanpointprops)\nax2.set_title('Players Weight spread per Teams (Kg)', loc='left', weight='bold', y=1.1, pad=10, fontsize=14)\nax2.set_ylabel('')\nax2.set_xlabel('')\nax2.tick_params(left=False)\nplt.table(cellText=weight_stats.values.round(1),\n          rowLabels=weight_stats.index,\n          colLabels=weight_stats.columns,\n          cellLoc = 'right', rowLoc = 'center',\n          loc='right', bbox=[0,-0.75,.45,.6])\nplt.show()","92b9e834":"fig3, ax3 =plt.subplots(figsize=(15,5))\nfor location in ['left','right', 'bottom', 'top']:\n        ax3.spines[location].set_visible(False)\nsns.boxplot(y=\"Teams\", x=\"height_cm\", ax=ax3,data=players,palette=teams_palette, saturation=1, linewidth=0.5, \n            showmeans=True, flierprops=flierprops, medianprops=medianprops, meanprops=meanpointprops)\nax3.set_title('Players height spread per Teams (cm)', loc='left', weight='bold', y=1.1, pad=10, fontsize=14)\nax3.set_ylabel('')\nax3.set_xlabel('')\nax3.tick_params(left=False)\nplt.table(cellText=height_stats.values.astype('int'),\n          rowLabels=height_stats.index,\n          colLabels=height_stats.columns,\n          cellLoc = 'right', rowLoc = 'center',\n          loc='right', bbox=[0,-0.75,.4,.6])\nplt.show()","62f89313":"fig4, ax4 =plt.subplots(figsize=(15,5))\nfor location in ['left','right', 'bottom', 'top']:\n        ax4.spines[location].set_visible(False)\nsns.boxplot(y=\"Teams\", x=\"bodyMassIndex\", ax=ax4,data=players,palette=teams_palette, saturation=1, linewidth=0.5, \n            showmeans=True, flierprops=flierprops, medianprops=medianprops, meanprops=meanpointprops)\nax4.set_title('Players body mass index spread per Teams', loc='left', weight='bold', y=1.1, pad=10, fontsize=14)\nax4.set_ylabel('')\nax4.set_xlabel('')\nax4.tick_params(left=False)\n\nplt.table(cellText=bodymass_stats.values.round(1),\n          rowLabels=bodymass_stats.index,\n          colLabels=bodymass_stats.columns,\n          cellLoc = 'right', rowLoc = 'center',\n          loc='right', bbox=[0,-0.75,.4,.6])\nplt.show()","57e50cee":"#percentage of players per college and per team\ncolleges=players[['nflId','Teams','collegeName']].groupby(['Teams','collegeName']).count()\ncolleges=(colleges\/colleges.groupby(level=0).sum()*100).reset_index().sort_values('nflId', ascending=False)\nsp_col=colleges.loc[colleges['Teams']=='Special Teams'].head(10)\ndef_col=colleges.loc[colleges['Teams']=='Defense'].head(10)\noff_col=colleges.loc[colleges['Teams']=='Offense'].head(10)\n#plotting\nfig6, (ax1,ax2,ax3) =plt.subplots(3,1,figsize=(8,8), sharex=True)\nsns.barplot(y='collegeName',x='nflId', data=sp_col,ax=ax3, color='#74A633', saturation=1 )\nsns.barplot(y='collegeName',x='nflId', data=def_col,ax=ax2, color='#003CC7', saturation=1 )\nsns.barplot(y='collegeName',x='nflId', data=off_col,ax=ax1, color='#F5291D', saturation=1)\n\nfor ax, t in zip((ax1,ax2,ax3),teams):\n    ax.set_ylabel('')\n    ax.tick_params(left=False ,color='grey')\n    ax.set_xlabel('')\n    ax.set_title(t, weight='bold', loc='left')\n    for location in ['left','right', 'bottom', 'top']:\n        ax.spines[location].set_visible(False)\nax3.set_xlabel('% of Teams per college')\nax1.text(s='Top 10 colleges per teams',x=0, y=-3, weight='bold', fontsize=14)\nplt.show()\n","aff60ed5":"#getting players first names per team\nnames_st = players.loc[players['Teams']=='Special Teams','displayName'].str.split(' ', expand=True).loc[:,0]\nnames_def = players.loc[players['Teams']=='Defense','displayName'].str.split(' ', expand=True).loc[:,0]\nnames_off=players.loc[players['Teams']=='Offense','displayName'].str.split(' ', expand=True).loc[:,0]\n#plotting\nfig7, (ax1,ax2,ax3) =plt.subplots(1,3,figsize=(25,10))\nwordcloud1 = WordCloud (\n                    background_color = 'black',\n                    width = 800,\n                    height = 600, colormap='Reds'\n                        ).generate(\" \".join(names_off))\nwordcloud2 = WordCloud (\n                    background_color = 'black',\n                    width = 800,\n                    height = 600, colormap='Blues'\n                        ).generate(\" \".join(names_def))\nwordcloud3 = WordCloud (\n                    background_color = 'black',\n                    width = 800,\n                    height = 600, colormap='Greens'\n                        ).generate(\" \".join(names_st))\n\nax1.imshow(wordcloud1)\nax2.imshow(wordcloud2)\nax3.imshow(wordcloud3)\nplt.show()\n","66223171":"Special Teams are very similar to Defense players in terms of height. With a median height of 1.9 meter, Offense players are generally much taller than their colleagues in Defense or Special Teams : less than 25% of Defense and special temas are 1.9 meter tall.","6e3cdd3c":"Suprisingly, Special Teams players have a higher percentage of players born in July and February compared to Offense and Defense players ","f4ce77a7":"<p style=\"background-color:#F8F9F4;font-family:newtimeroman;color:#003CC7;font-size:150%;text-align:left;\">TABLE OF CONTENT <\/p>\n<a id='top'><\/a>\n<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n \n    \n* [1. LOADING DATA](#1)\n    \n* [2. DATA CLEANING](#2)\n    \n* [3.1 LET'S LEARN : What are the players positions ?](#3)\n    \n* [3.2 LET'S LEARN : How special are the Special Teams ?](#4)  \n    - [ Number and proportion of players](#4.1)\n    - [ Age and month of birth analysis](#4.2)","58b14a73":"<a id=\"4,1\"><\/a>\n## <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:left;border-radius:5px 5px;\">  Do Special Teams have special names ? <\/p>","6ac19c90":"### <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\"> Thank you for reading --- This is WIP, stay tuned! <br>\n<p style=\"background-color:#F8F9F4;font-family:newtimeroman;color:#003CC7;font-size:150%;text-align:center;border-radius:10px 10px;\"> If you had fun and learnt from this : Upvote and comment!  <br> Constructive feedback is also more than welcome !<\/p>","51ae97e7":"- We can see from the info above that there are numeric data stored as object and that there are inconsistencies in the format of the height and birthdate columns so we need to correct this.\n- There are missing data in the birthdates and college columns.","607999e8":"Let's see how the players dataframe look now.","faebb574":"Special Teams are generally much lighter than other players from Defense and Offense Teams.","a64661c4":"If you are a rookie like me, you have probably asked yourself why you did not see any Special Teams in the drawing above.<br>\nSpecial Teams are special because they only take the field during punts, field goals, and kickoffs.\n\n![image.png](attachment:806bf507-d35b-44bb-a474-736e59b3639a.png)\n<a id=\"4\"><\/a>\n# <p style=\"background-color:#F5291D;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">How special are the Special Teams ?<\/p>\n\nIn next section, I am comparing players from the Special Teams to Offense and Defense players to answer the following questions :\n- How many players are there in Defense, Offense and Special Teams\n- What is the proportion of Special Teams players among NFL players\n- How Special Teams players differs from Defense and offense players in terms of age, and months of birth.\n- How Special Teams players differs from Defense and offense players in terms of body characteristics.\n- How Special Teams players differs from Defense and offense players in terms of college.\n\n","d547ef23":"There are only 155 Special Teams players and they represent less than 6% of the NFL players.","0cc3f9fd":"<a id=\"2\"><\/a>\n# <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">Data cleaning <\/p>\nIn this section my goals are to :\n- identify information available in the players data\n- identify missing values\n- convert weights to appropriate format for future calculation\n- convert dates into datetimeobject\n- tidy up the data for future analysis","6edb68f9":"There seems to be a college specific to the training of Special Teams. The top 3 colleges for Special Teams are not part of the top 10 colleges for Offense and Defense Teams.","12a5bafe":"<a id=\"4.3\"><\/a>\n## <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:left;border-radius:5px 5px;\">  Body attributes analysis <\/p>","f46d708b":"<a id=\"3\"><\/a>\n# <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">Now let's learn! <\/p>\n# <p style=\"background-color:#F5291D;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">What are the players positions in the field ?<\/p>\n\nIn this section my objectives are to :\n- summarize my research on the game rules and players position. \n- identify what are the Special Teams positions\n- add qualitative information into the players data to make comprehension and analysis easier\n\n 'a picture is worth more than a 1000 words' so I made a drawing to picture players and positions\n\n![image.png](attachment:a9aac813-bb32-43c4-92a8-a1a8caed83b9.png)","7027f25e":"<a id=\"1\"><\/a>\n# <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">Loading Data <\/p>\nLet's start by importing the useful librairies and load the data.","182dedf3":"<a id=\"4.1\"><\/a>\n## <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:left;border-radius:5px 5px;\">  Number and proportion of special teams players <\/p>","8afbe0a6":"If your name is Chris you are not special enough to be in Special Teams !","6f9b5b39":"<a id=\"4.4\"><\/a>\n## <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:left;border-radius:5px 5px;\">  Do Special Teams go to special universities ?","b334aba4":"Special Teams players are generally older and more experienced than Defense and Offense players: on average a Special Teams player is 3 years older than offense and defense players. The data also indicates that Special Teams players have longer careers. 25% of special teams players are 34 or more.","2b3d4adb":"# <p style=\"background-color:#F5291D;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:center;border-radius:10px 10px;\">American Football for rookies<\/p>\n\nHi all,\n\nAs a French citizen who has never lived more than 3 weeks in the US, I am totally clueless about the rules of American Football. So I thought this competition whould be a good start to learn about this sport, while having fun investigating the data. The players data seems to be a good start for this journey.\n\nI guess I am not the only newbee around so I hope this notebook will help others like me ! \n\n<img src=\"https:\/\/images.unsplash.com\/photo-1512144253214-d94e86cd9189?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1931&q=80\"><\/br>\n***Photo by Adrian Curiel***\n\n\n","e8856f2c":"<a id=\"4.2\"><\/a>\n## <p style=\"background-color:#003CC7;font-family:newtimeroman;color:#F8F9F4;font-size:150%;text-align:left;border-radius:5px 5px;\">  Age and month of birth analysis  <\/p>","c5b1f7fc":"Special Teams body mass index (BMI) are generally significantly lower than Offense and Defense Teams BMI."}}