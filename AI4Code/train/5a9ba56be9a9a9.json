{"cell_type":{"aff2a106":"code","1f819b6d":"code","9133ddaa":"code","5b7eb4a1":"code","a65d9d97":"code","ca8afc8a":"code","902ef53d":"code","50f65940":"code","10d47722":"code","e168bc60":"code","6e3cca79":"code","e7518eeb":"code","26707089":"code","420fd5fa":"code","1a0c2cc6":"code","30ffc9cf":"code","61e51a81":"code","c38b94b6":"code","fa2c872d":"code","63c29529":"code","b616c090":"code","a83f8c82":"code","142c5788":"code","c686a1c6":"code","82d5fd2c":"code","a6f3f368":"code","35acd9a4":"code","27acc047":"code","38d157f8":"code","d59846b2":"code","89332adf":"code","ea9aacea":"code","730c8dbc":"code","441462cc":"code","0437889d":"code","3376d945":"code","16b2aacb":"code","5a8644ae":"code","507ed473":"code","dba4870f":"code","90316515":"code","2d29174d":"code","d3e76180":"code","13370fdd":"code","33596c96":"code","6229e851":"code","0a8f763d":"code","791bfb57":"code","e11cd2ab":"code","ddd33cfa":"code","ac501b7b":"code","7311be47":"code","02e7bad4":"code","b0d89da0":"code","5a0c5fba":"code","2b6c8141":"code","23886130":"code","00d02687":"code","af0b4917":"code","f6c081d1":"code","fee91667":"code","c6705f20":"code","a747fa72":"code","a3e9811a":"code","c6dcaba4":"code","d5d53f29":"code","0efa5777":"code","1a69e30e":"code","e556debf":"code","59e39f52":"code","1bc7c127":"code","298f573f":"code","ef05e030":"code","03cadf6f":"code","5c6dc59d":"code","707bd754":"code","1e2bc8e6":"code","f1085ced":"code","0aac71ab":"code","52aba451":"code","745118d5":"code","5818d112":"code","a58629af":"code","5f2f4f18":"code","c723d662":"code","94179fdc":"code","7e20b15b":"code","b1e1b405":"code","edfa8c03":"code","fbd1916f":"code","e078f9c7":"code","b9b40b7b":"code","1b574653":"code","cb7acde0":"code","04253802":"code","2b56b681":"code","d77e3716":"code","685dcefe":"code","f2f9c29d":"code","9f04847e":"code","9f476809":"code","c837355f":"code","7558cfb6":"code","500b27af":"code","ad7b359a":"code","88108a27":"markdown","58266af9":"markdown","96dcea1c":"markdown","91095039":"markdown","6830c0d4":"markdown","9e2e7659":"markdown","6287a1d0":"markdown","fa01bd96":"markdown","600bd89e":"markdown","ab150ea5":"markdown","d7ef2fea":"markdown","707152f6":"markdown","f3e6b312":"markdown","86843b45":"markdown","861eac7a":"markdown","135080cd":"markdown","f0fa6b10":"markdown","647a0c3e":"markdown","196e6751":"markdown","8bd39519":"markdown","3ae5e735":"markdown","c215b0c4":"markdown","6b89d521":"markdown","167c6176":"markdown","30d3b504":"markdown","1c0401a6":"markdown","d7f799cb":"markdown","174dfd24":"markdown","98edc24b":"markdown","61534d50":"markdown","f2ac3d75":"markdown","0d39e44f":"markdown","2898bad4":"markdown","bdcf4b13":"markdown","ef5188d9":"markdown","c5e4cf16":"markdown","348ecc59":"markdown","373200e7":"markdown","0a89c8a0":"markdown"},"source":{"aff2a106":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport math\n\nfrom pandas.plotting import register_matplotlib_converters\nregister_matplotlib_converters()\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\nfrom datetime import datetime\n\nimport folium\nfrom folium import Choropleth, Circle, Marker\nfrom folium.plugins import HeatMap, MarkerCluster, TimestampedGeoJson\n# Any results you write to the current directory are saved as output.","1f819b6d":"sar=pd.read_csv('\/kaggle\/input\/sars-outbreak-2003-complete-dataset\/sars_2003_complete_dataset_clean.csv')","9133ddaa":"sar['Remain']=sar['Cumulative number of case(s)']-sar['Number recovered']-sar['Number of deaths']","5b7eb4a1":"top_n=40\ntop_sar_country=sar.groupby(['Country']).agg({'Cumulative number of case(s)':'max'}).reset_index().sort_values(by=['Cumulative number of case(s)'],ascending=False).head(top_n)","a65d9d97":"top_sar_country.head()","ca8afc8a":"plt.figure(figsize=(16, 6))\nplt.xticks(rotation=90)\nplt.bar(x=top_sar_country['Country'],height=top_sar_country['Cumulative number of case(s)'])\nplt.show()","902ef53d":"top_sar_country[top_sar_country['Cumulative number of case(s)']>100]","50f65940":"plt.figure(figsize=(16, 6))\nplt.xticks(rotation=90)\nchina_sar=sar[(sar['Country']=='China') & (sar['Cumulative number of case(s)']>0)]\nx=china_sar['Date'].values\nplt.plot(sar[(sar['Country']=='China') & (sar['Cumulative number of case(s)']>0)]['Date'],sar[(sar['Country']=='China') & (sar['Cumulative number of case(s)']>0)]['Remain'])\nplt.axvline(x='2003-05-13',ymin= 0, label='pyplot vertical line',color='r')\nplt.xlabel('Days since first case')\nplt.ylabel('Remain Infected cases')\nplt.annotate('60 days from peak infected at 3068 case till 38 infected case at 2003-07-11', (41,3100))\nplt.xticks(x[::2])\nplt.show()","10d47722":"plt.figure(figsize=(16, 6))\nplt.xticks(rotation=90)\nstart_top=0\nfor c in top_sar_country['Country'].values[start_top:]:\n    plt.plot(sar[(sar['Country']==c) & (sar['Cumulative number of case(s)']>0)]['Remain'].values)\nplt.gca().legend(top_sar_country['Country'].values[start_top:start_top+10])\nplt.xlabel('Days since first case')\nplt.ylabel('Remain Infected cases')\nplt.show()","e168bc60":"sar['Date'].nunique()","6e3cca79":"plt.figure(figsize=(16, 12))\nplt.xticks(rotation=90)\nstart_top=3\nfor c in top_sar_country['Country'].values[start_top:]:\n    plt.plot(sar[(sar['Country']==c) & (sar['Cumulative number of case(s)']>0)]['Remain'].values)\nplt.gca().legend(top_sar_country['Country'].values[start_top:start_top+20])\nplt.xlabel('Days since first case')\nplt.ylabel('Remain Infected cases')\nplt.show()","e7518eeb":"x=['China','Other countries']\ny=[top_sar_country[top_sar_country['Country']=='China']['Cumulative number of case(s)'].values[0],np.sum(top_sar_country[top_sar_country['Country']!='China']['Cumulative number of case(s)'])]\n\nplt.bar(x,y)\nfor i, v in enumerate(y):\n    plt.annotate(str(v), ( x[i],y[i]))\nplt.show()","26707089":"plt.pie(y,labels=['China','Other Countries'],autopct='%1.1f%%')\nplt.show()","420fd5fa":"# Calcualte Total case of COVID by using historical SAR data and growth in China outbound tarveller  \n81054*3316\/5329*80\/5","1a0c2cc6":"covid_pd=pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')","30ffc9cf":"covid_pd.tail()","61e51a81":"covid_pd.rename(columns={'Country\/Region':'Country'},inplace=True)\ncovid_pd=covid_pd.replace(to_replace='Mainland China',value='China')\ncovid_pd=covid_pd.replace(to_replace=' Azerbaijan',value='Azerbaijan')\ncovid_pd=covid_pd.replace(to_replace='UK',value='United Kingdom')\ncovid_pd=covid_pd.replace(to_replace='US',value='United States')","c38b94b6":"covid_pd['Remain']=covid_pd['Confirmed']-covid_pd['Recovered']-covid_pd['Deaths']","fa2c872d":"lat_long=pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_recovered.csv')","63c29529":"lat_long.head()","b616c090":"china_province_covid=covid_pd[covid_pd['Country']=='China'].groupby('Province\/State').agg({'Confirmed':'max'}).reset_index()","a83f8c82":"china_lat_long=pd.merge(china_province_covid,lat_long,on='Province\/State')","142c5788":"cn_geo_data = \"..\/input\/china-regions-map\/china.json\"","c686a1c6":"#I use code from this link. His map is so cool.\n#https:\/\/www.kaggle.com\/pongsaksawang\/coronavirus-propagation-visualization-forecast\n\nmap = folium.Map(location=[35, 105], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=4)\n\ntooltip = 'Hubei'\nlat=china_lat_long[china_lat_long['Province\/State']=='Hubei']['Lat']\nlon=china_lat_long[china_lat_long['Province\/State']=='Hubei']['Long']\ncon=str(int(china_lat_long[china_lat_long['Province\/State']=='Hubei']['Confirmed'].values[0]))\nfolium.Marker([lat, lon], popup=con+\" cases\", tooltip=tooltip).add_to(map)\n\nfolium.Choropleth(\n    geo_data=cn_geo_data,\n    name='choropleth',\n    key_on='feature.properties.name',\n    fill_color='blue',\n    fill_opacity=0.18,\n    line_opacity=0.7\n).add_to(map)\n\nfor i in range(len(china_lat_long)):\n      folium.CircleMarker(location = [china_lat_long.loc[i,'Lat'],china_lat_long.loc[i,'Long']], \n                        radius = np.log(china_lat_long.loc[i,'Confirmed'])*3, \n                    \n                        color = '#E80018', \n                        fill_opacity = 0.7,\n                        weight = 2, \n                        fill = True\n                       ,fillColor = '#E80018'\n                         ).add_to(map)\n\nmap","82d5fd2c":"country_covid=covid_pd.groupby(['ObservationDate','Country']).agg({'Confirmed':'max','Deaths':'max','Recovered':'max','Remain':'sum'}).reset_index()","a6f3f368":"top_n=10\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)","35acd9a4":"country_covid_remain=country_covid.pivot(index='ObservationDate',columns='Country',values='Remain').reset_index()\ncountry_covid_remain=country_covid_remain.fillna(0)","27acc047":"plt.figure(figsize=(16, 6))\nplt.xticks(rotation=90)\nstart_top=0\ndf=country_covid_remain[top_country['Country'].values[start_top]]\nplt.bar(country_covid_remain['ObservationDate'],df)\nfor c in top_country['Country'].values[start_top+1:]:\n    plt.bar(country_covid_remain['ObservationDate'],country_covid_remain[c],bottom=df)\n    df=df+country_covid_remain[c]\n\nplt.gca().legend(top_country['Country'].values[start_top:start_top+top_n])\nplt.xlabel('Date')\nplt.ylabel('Remain Infected cases')\n#plt.yscale(\"log\")\nplt.show()","38d157f8":"top_n=10\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)","d59846b2":"plt.figure(figsize=(16, 8))\nplt.xticks(rotation=90)\ntop_c=np.append(top_country['Country'].values,\"South Korea\")\nstart_top=0\nfor c in top_c:\n    plt.plot(country_covid[(country_covid['Country']==c) & (country_covid['Remain']>0)]['Remain'].values)\nplt.plot(country_covid[(country_covid['Country']=='South Korea') & (country_covid['Remain']>0)]['Remain'].values)\nplt.gca().legend(top_c)\nplt.xlabel('Days since first case')\nplt.ylabel('Remain Infected cases')\n\nplt.show()","89332adf":"top_n=5\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)","ea9aacea":"#To compare with China need log(data)\n\nplt.figure(figsize=(16, 8))\nplt.xticks(rotation=90)\n\n#Add 30 days for china casue spread start since end of Dec-19\nchina_p=np.ones(66)\na=country_covid[(country_covid['Country']=='China') & (country_covid['Remain']>0)]['Remain'].values\nchina_p=np.append(china_p,a)\nplt.plot(china_p)\n\ntop_c=np.append(top_country['Country'].values,[\"South Korea\",\"Switzerland\",'Iran','Thailand'])\nstart_top=0\nfor c in top_c:\n    plt.plot(country_covid[(country_covid['Country']==c) & (country_covid['Remain']>0)]['Remain'].values)\nplt.gca().legend(np.append(\"China\",top_c))\nplt.axvline(x=92,ymin= 0, label='pyplot vertical line',color='r')\nplt.axvline(x=77,ymin= 0, label='pyplot vertical line',color='b')\nplt.axvline(x=53,ymin= 0, label='pyplot vertical line',color='c')\nplt.axvline(x=45,ymin= 0, label='pyplot vertical line',color='y')\nplt.axvline(x=35,ymin= 0, label='pyplot vertical line',color='r')\nplt.xlabel('Days since first case')\nplt.ylabel('Remain Infected cases')\nplt.yscale(\"log\")\nplt.annotate('China Peak at 92 Days', (92,2000))\nplt.annotate('Thailand Peak at 77 Days', (77,1000))\nplt.annotate('South Korea Peak at 53 Days', (53,300))\nplt.annotate('Iran Peak at 46 Days', (45,100))\nplt.annotate('Switzerland Peak at 35 Days', (35,20))\n\nplt.show()\n","730c8dbc":"country='South Korea'\npeak_remain=np.max(country_covid[(country_covid['Country']==country)]['Remain'])\npeak_d=country_covid[(country_covid['Country']==country) & (country_covid['Remain']==peak_remain)]['ObservationDate'].values[0]\nst_d=country_covid[(country_covid['Country']==country)]['ObservationDate'].values[0]\nprint(peak_d,datetime.strptime(peak_d,'%m\/%d\/%Y')-datetime.strptime(st_d,'%m\/%d\/%Y'))","441462cc":"top_n=100\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)\ncurrent_date=max(covid_pd['ObservationDate'])\npeak_ca=[]\npeak_da=[]\npeak_date=[]\nfor c in  top_country['Country'].values:\n    peak_remain=np.max(country_covid[(country_covid['Country']==c)]['Remain'])\n    peak_d=country_covid[(country_covid['Country']==c) & (country_covid['Remain']==peak_remain)]['ObservationDate'].values[0]\n    st_d=country_covid[(country_covid['Country']==c)]['ObservationDate'].values[0]\n    if ((datetime.strptime(current_date,'%m\/%d\/%Y')-datetime.strptime(peak_d,'%m\/%d\/%Y')).days)>=5:\n        peak_ca.append(c)\n        peak_da.append((datetime.strptime(peak_d,'%m\/%d\/%Y')-datetime.strptime(st_d,'%m\/%d\/%Y')).days)\n        peak_date.append(peak_d)\n        #print(c,peak_d,(datetime.strptime(peak_d,'%m\/%d\/%Y')-datetime.strptime(st_d,'%m\/%d\/%Y')).days)\n        \npeak_da=np.reshape(peak_da,(-1,1))\npeak_ca=np.reshape(peak_ca,(-1,1))\npeak_date=np.reshape(peak_date,(-1,1))\nr=np.concatenate((peak_ca,peak_da,peak_date),axis=1)\ncountry_peak=pd.DataFrame(data=r,columns=['Country','Peak Day','Peak Date'])\ncountry_peak['Peak Day']=country_peak['Peak Day'].astype('int')\ncountry_peak=country_peak[(country_peak['Country']!='China')]\ncountry_peak=country_peak[(country_peak['Country']!='Others')]\ncountry_peak=country_peak.sort_values(by=['Peak Day'])\ncountry_peak","0437889d":"plt.figure(figsize=(16, 8))\nplt.bar(country_peak['Country'],height=country_peak['Peak Day'])\nplt.xticks(rotation=90)\nplt.show()","3376d945":"country_covid['ObservationDate']=pd.to_datetime(country_covid['ObservationDate'])","16b2aacb":"select=['Italy','United States','Germany','France','Spain']\nplt.xticks(rotation=90)\nfor c in select:\n     pd=country_covid[country_covid['Country']==c].sort_values(by=['ObservationDate'])\n     plt.plot(pd['ObservationDate'].values,pd['Remain'])\nplt.gca().legend(select)\nplt.yscale(\"log\")\nplt.show()","5a8644ae":"select=['South Korea','Iran']\nplt.xticks(rotation=90)\nfor c in select:\n     pd=country_covid[country_covid['Country']==c].sort_values(by=['ObservationDate'])\n     plt.plot(pd['ObservationDate'].values,pd['Remain'])\nplt.gca().legend(select)\nplt.yscale(\"log\")\nplt.show()","507ed473":"select=['Switzerland','Netherlands','United Kingdom','Sweden','Belgium']\nplt.xticks(rotation=90)\n\nfor c in select:\n     pd=country_covid[country_covid['Country']==c].sort_values(by=['ObservationDate'])\n     plt.plot(pd['ObservationDate'].values,pd['Remain'])\nplt.gca().legend(select)\nplt.yscale(\"log\")\nplt.show()","dba4870f":"select=['Taiwan','Hong Kong','Singapore','Malaysia','Thailand','Japan']\n\nplt.xticks(rotation=90)\nfor c in select:\n     pd=country_covid[country_covid['Country']==c].sort_values(by=['ObservationDate'])\n     plt.plot(pd['ObservationDate'].values,pd['Confirmed'])\nplt.gca().legend(select)\nplt.yscale(\"log\")\nplt.show()","90316515":"select=['Taiwan','Hong Kong','Thailand','Malaysia','Singapore','Japan']\nplt.xticks(rotation=90)\nfor c in select:\n     pd=country_covid[country_covid['Country']==c].sort_values(by=['ObservationDate'])\n     plt.plot(pd['ObservationDate'].values,pd['Remain'])\nplt.gca().legend(select)\nplt.yscale(\"log\")\nplt.show()","2d29174d":"import pandas as pd","d3e76180":"temp = pd.read_csv('..\/input\/climate-change-earth-surface-temperature-data\/GlobalLandTemperaturesByCountry.csv')","13370fdd":"temp['dt']=pd.to_datetime(temp['dt'])\ntemp=temp.set_index('dt')","33596c96":"temp=temp.replace(to_replace='Bosnia And Herzegovina',value='Bosnia and Herzegovina')\n\ncovid_current=covid_pd.groupby('Country').agg({'Confirmed':'max','Deaths':'max','Recovered':'max'}).reset_index()\n\ncovid_current['Remain']=covid_current['Confirmed']-covid_current['Recovered']-covid_current['Deaths']\ncovid_current['%Recovered Rate']=covid_current['Recovered']\/covid_current['Confirmed']*100\ncovid_current['%Deaths']=covid_current['Deaths']\/covid_current['Confirmed']*100\ncovid_current.replace(np.inf,0,inplace=True)\n\ntop_n=100\ntop_country=covid_current.sort_values(by=['Confirmed'],ascending=False)['Country'].values[:top_n]","6229e851":"country_lat_long=lat_long.groupby('Country\/Region').agg({'Lat':'mean','Long':'mean'}).reset_index()","0a8f763d":"covid_map=covid_current.merge(country_lat_long,left_on='Country',right_on='Country\/Region',how='left')\n#Change country name to match with wolrd json file\ncovid_map=covid_map.replace(to_replace='United States',value='United States of America')\ncovid_map=covid_map.sort_values(by=['%Recovered Rate'],ascending=False)","791bfb57":"covid_map.head(10)","e11cd2ab":"#world_geo=\"\/kaggle\/input\/geo-json-world\/world-countries.json\"\nworld_geo=\"\/kaggle\/input\/world-countries\/world-countries.json\"","ddd33cfa":"covid_map.head(5)","ac501b7b":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n#Remove Top eg (China , Small country)\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=covid_map,\n    columns=['Country','%Recovered Rate'],\n    fill_color='PuBu'\n).add_to(map)\n\n\nmap","7311be47":"#Screen outlier : few sampling of confime)\ncovid_death=covid_map.sort_values(by=['%Deaths'],ascending=False)\ncovid_death=covid_death[covid_death['Confirmed']>50]","02e7bad4":"covid_death[covid_death['Confirmed']>50].sort_values(by=['%Deaths'],ascending=False).head()","b0d89da0":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=covid_death,\n    columns=['Country','%Deaths'],\n    fill_color='OrRd'\n).add_to(map)\n\n#fill_color: fill color code\n#'BuGn', 'BuPu', 'GnBu', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', \n#'RdPu', 'YlGn', 'YlGnBu', 'YlOrBr', and 'YlOrRd'.\n\n\nmap\n","5a0c5fba":"#Find average temperature on  back 20 years\na=np.array([])\ncovid_current['temperature']=0\nfor c in top_country:\n    avg=np.mean((temp[(temp['Country']==c) & (temp.index.month.isin([3]))].\\\n                 groupby(pd.Grouper(freq='M')).agg({'AverageTemperature':'mean'}).\\\n                 reset_index()).dropna(subset=['AverageTemperature'])['AverageTemperature'].values[-20:])\n    covid_current.loc[covid_current['Country']==c,['temperature']]=avg\n    \n    #if(math.isnan(avg)):\n    #    print(c,avg)\n\nir_temp=np.mean((temp[(temp['Country']=='Ireland') & (temp.index.month.isin([3]))].\\\n             groupby(pd.Grouper(freq='M')).agg({'AverageTemperature':'mean'}).\\\n             reset_index()).dropna(subset=['AverageTemperature'])['AverageTemperature'].values[-20:])\ncovid_current.loc[covid_current['Country']=='Republic of Ireland',['temperature']]=ir_temp\ncovid_current.loc[covid_current['Country']=='North Ireland',['temperature']]=ir_temp\n\nvatican_temp=np.mean((temp[(temp['Country']=='Italy') & (temp.index.month.isin([3]))].\\\n             groupby(pd.Grouper(freq='M')).agg({'AverageTemperature':'mean'}).\\\n             reset_index()).dropna(subset=['AverageTemperature'])['AverageTemperature'].values[-20:])\n\ncovid_current.loc[covid_current['Country']=='Vatican City',['temperature']]=vatican_temp\n\npalestine_temp=np.mean((temp[(temp['Country']=='Israel') & (temp.index.month.isin([3]))].\\\n             groupby(pd.Grouper(freq='M')).agg({'AverageTemperature':'mean'}).\\\n             reset_index()).dropna(subset=['AverageTemperature'])['AverageTemperature'].values[-20:])\n\ncovid_current.loc[covid_current['Country']=='Palestine',['temperature']]=palestine_temp\n\ndenmark_temp=np.mean((temp[(temp['Country']=='Denmark (Europe)') & (temp.index.month.isin([3]))].\\\n             groupby(pd.Grouper(freq='M')).agg({'AverageTemperature':'mean'}).\\\n             reset_index().dropna(subset=['AverageTemperature'])['AverageTemperature'].values[-20:]))\n#covid_current.loc[covid_current['Country']=='Denmark',['temperature']]=vatican_temp\ncovid_current.loc[covid_current['Country']=='Denmark',['temperature']]=denmark_temp\n\n#Change country name to match with wolrd json file\ncovid_current=covid_current.replace(to_replace='United States',value='United States of America')","2b6c8141":"all_temp=temp[(temp.index>'2010-01-01')&(temp.index.month.isin([3]))].groupby('Country').agg({'AverageTemperature':'mean'}).reset_index().sort_values(by=['AverageTemperature'])\nall_temp=all_temp.replace(to_replace='United States',value='United States of America')\nall_temp_risk=all_temp[(all_temp['AverageTemperature']>-0) & (all_temp['AverageTemperature']<15)]","23886130":"#Change country name to match with wolrd json file\nall_temp=all_temp.replace(to_replace='United States',value='United States of America')","00d02687":"pd=covid_current.sort_values(by=['Confirmed'],ascending=False)\ncase=pd['Confirmed'].values\nt=pd['temperature'].values\ncountry=pd['Country'].values\nplt.figure(figsize=(12, 8))\n\nplt.scatter(t,case)\nplt.xlabel('Celsius')\nplt.ylabel('confirmed')\nplt.yscale('log')\nplt.axhline(y=100000,xmin= 0,color='g')\nplt.axhline(y=1000,xmin= 0,color='g')\n\nplt.axvline(x=0,ymin= 0,color='r')\nplt.axvline(x=15,ymin= 0,color='r')\nfor i, txt in enumerate(pd['Country'][:15]):\n    plt.annotate(txt, ( t[i],case[i]))\nplt.show()","af0b4917":"max_con=100000\nmin_con=10000\npd=covid_current[(covid_current['Confirmed']<100000) & (covid_current['Confirmed']>10000) & (covid_current['Country']!='China')]\ncase_low=pd['Confirmed'].values\ntemp_low=pd['temperature'].values\ncountry_low=pd['Country'].values\ntotal=pd.count()[0]\nin_range=pd[(pd['temperature']>=-5) & (pd['temperature']<=10)].count()[0]\nplt.figure(figsize=(10, 8))\n\nplt.xlabel('Celsius')\nplt.ylabel('confirmed')\nplt.yscale('log')\n\nplt.scatter(temp_low,np.log(case_low) )\nfor i, txt in enumerate(country_low):\n    plt.annotate(txt, ( temp_low[i],np.log(case_low[i])))\nplt.show()\nprint(in_range,\"in\",total,\"countries of \",str(min_con),\"-\",str(max_con),\" cases temperature range = -5 to 10 Celsius\")","f6c081d1":"pd=covid_current[(covid_current['Confirmed']<10000) & (covid_current['temperature']<15) & (covid_current['temperature']>0) & (covid_current['Country']!='China')]\ncase=pd['Confirmed'].values\nt=pd['temperature'].values\ncountry=pd['Country'].values\nplt.figure(figsize=(10, 8))\nplt.xlabel('Celsius')\nplt.ylabel('Confirmed)')\nplt.scatter(t,case)\nfor i, txt in enumerate(country):\n    plt.annotate(txt, ( t[i],case[i]))\nplt.show()","fee91667":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=covid_current,\n    columns=['Country','temperature'],\n    fill_color='PuRd'\n).add_to(map)\n\n#fill_color: fill color code\n#'BuGn', 'BuPu', 'GnBu', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', \n#'RdPu', 'YlGn', 'YlGnBu', 'YlOrBr', and 'YlOrRd'.\n\n\nmap","c6705f20":"plt.figure(figsize=(8, 12))\nplt.barh(all_temp_risk['Country'],all_temp_risk['AverageTemperature'])\nplt.show()","a747fa72":"check_n=all_temp_risk.merge(covid_current,on='Country',how='left')\ncheck_n[(check_n['Confirmed'].isnull()) & (check_n['AverageTemperature']>0) & (check_n['AverageTemperature']<10)]['Country']","a3e9811a":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=all_temp,\n    columns=['Country','AverageTemperature'],\n    fill_color='PuRd'\n).add_to(map)\n\n#fill_color: fill color code\n#'BuGn', 'BuPu', 'GnBu', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', \n#'RdPu', 'YlGn', 'YlGnBu', 'YlOrBr', and 'YlOrRd'.\n\n\nmap","c6dcaba4":"country_covid_confirm=country_covid.pivot(index='ObservationDate',columns='Country',values='Confirmed').reset_index()\ncountry_covid_confirm=country_covid_confirm.fillna(0)","d5d53f29":"top_n=10\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)","0efa5777":"new_case=country_covid_confirm.iloc[:,1:].diff()\nnew_case.replace(np.nan,0,inplace=True)","1a69e30e":"start_top=1\nfor c in (top_country['Country'].values[start_top:]):\n    plt.plot(new_case[c])\nplt.gca().legend(top_country['Country'].values[start_top:top_n])\nplt.xlabel('Days')\nplt.ylabel('New Cases')\nplt.show()","e556debf":"import pandas as pd\ntop_n=50\ntop_country=covid_pd.groupby(['Country']).agg({'Remain':'max'}).reset_index().sort_values(by=['Remain'],ascending=False).head(top_n)\na=np.array([])\nfor c in (top_country['Country'].values):\n    day_data=covid_pd[covid_pd['Country']==c].groupby('ObservationDate').agg({'Confirmed':'max'}).sort_values(by=['ObservationDate']).reset_index()\n    day_accum=day_data['Confirmed'].values\n    min_date=day_data['ObservationDate'][0]\n    max_change=0\n    if day_accum[0]>0:\n        d=day_data['ObservationDate'][0]\n    else:\n        d=''\n    for i in range(1,len(day_accum)):\n        if day_accum[i-1]>0 and (day_accum[i]-day_accum[i-1])\/day_accum[i-1] > max_change:\n            max_change=(day_accum[i]-day_accum[i-1])\/day_accum[i-1]\n            if d=='':\n                d=day_data['ObservationDate'][i]\n    a=np.append(a,[max_change,d])\na=a.reshape((-1,2))\ncountry=top_country['Country'].values.reshape((-1,1))\ns=np.concatenate([country,a],axis=1)\nspread=pd.DataFrame(s,columns=['Country','max_speed','Start_date'])\nspread['max_speed']=pd.to_numeric(spread['max_speed'])\nspread=spread.sort_values(by=['max_speed'],ascending=False)","59e39f52":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=spread[2:],\n    columns=['Country','max_speed'],\n    fill_color='PuBu'\n).add_to(map)\n\n\nmap","1bc7c127":"covid_current=pd.merge(covid_current, spread, on='Country',how='left')","298f573f":"pop_dense=pd.read_csv('\/kaggle\/input\/migration-data-worldbank-1960-2018\/migration_population.csv')","ef05e030":"pop_data=pop_dense[pop_dense['year']==2018].groupby(['country','year']).agg({'population':'max','pop_density':'max','region':'max',\n                                           'incomeLevel':'max','lendingType':'max',\n                                            'longitude':'mean','latitude':'mean'}).reset_index()","03cadf6f":"pop_data.head()","5c6dc59d":"lat_long.head()","707bd754":"covid_current=pd.merge(covid_current, lat_long, left_on='Country',right_on='Country\/Region')","1e2bc8e6":"covid_current=covid_current.iloc[:,:14]","f1085ced":"covid_current=pd.merge(covid_current, pop_data, left_on='Country',right_on='country',how='left')\ncovid_map=covid_map.dropna()","0aac71ab":"map = folium.Map(location=[10, 15], \n                 tiles = \"CartoDB dark_matter\",\n                 detect_retina = True,\n                 zoom_start=2)\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name='choropleth',\n    key_on='feature.properties.name',\n    data=all_temp,\n    columns=['Country','AverageTemperature'],\n    fill_color='PuRd'\n).add_to(map)\n\n#fill_color: fill color code\n#'BuGn', 'BuPu', 'GnBu', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', \n#'RdPu', 'YlGn', 'YlGnBu', 'YlOrBr', and 'YlOrRd'.\n\nfor i in range(len(covid_map)):\n      folium.CircleMarker(location = [covid_map['Lat'].iloc[i],covid_map['Long'].iloc[i]], \n                        radius = np.log(covid_map['Confirmed'].iloc[i])*2, \n                        color = '#E80018', \n                        fill_opacity = 0.7,\n                        weight = 2, \n                        fill = True\n                       ,fillColor = '#E80018'\n                         ).add_to(map)\n\nmap","52aba451":"plt.figure(figsize=(16, 12))\nplt.scatter(np.log(covid_current['Confirmed']),np.log(covid_current['pop_density']))\nfor i, txt in enumerate(covid_current['Country']):\n    plt.annotate(txt, ( np.log(covid_current['Confirmed'][i]),np.log(covid_current['pop_density'][i])))\nplt.xlabel('Confirmed')\nplt.ylabel('pop_density')\nplt.show()","745118d5":"covid_current.corr(method ='pearson').iloc[:,6:]","5818d112":"covid_current.corr(method ='spearman').iloc[:,6:]","a58629af":"covid_current.corr(method ='kendall').iloc[:,6:]","5f2f4f18":"plt.figure(figsize=(16, 12))\nplt.scatter(np.log(covid_current['population']),covid_current['%Recovered Rate'])\nfor i, txt in enumerate(covid_current['Country']):\n    plt.annotate(txt, ( np.log(covid_current['population'][i]),covid_current['%Recovered Rate'][i]))","c723d662":"covid_current.head()","94179fdc":"covid_current[covid_current['Country']!='China'].groupby('region').agg({'Confirmed':'sum','Recovered':'sum','Deaths':'sum'})","7e20b15b":"rate=covid_current[covid_current['Country']!='China'].groupby('region').agg({'%Recovered Rate':'mean'}).reset_index().sort_values(by=['%Recovered Rate'])","b1e1b405":"plt.figure(figsize=(12, 8))\nplt.barh(rate['region'],rate['%Recovered Rate'])\nplt.xlabel('%Recovered')\nplt.show()","edfa8c03":"rate=covid_current[covid_current['Country']!='China'].groupby('region').agg({'%Deaths':'mean'}).reset_index().sort_values(by=['%Deaths'])","fbd1916f":"plt.figure(figsize=(12, 8))\nplt.barh(rate['region'],rate['%Deaths'])\nplt.xlabel('%Deaths')\nplt.show()","e078f9c7":"covid_current.groupby('incomeLevel').agg({'Confirmed':'sum','Recovered':'sum','Deaths':'sum'})","b9b40b7b":"rate_income=covid_current.groupby('incomeLevel').agg({'%Recovered Rate':'mean','%Deaths':'mean'}).reset_index().sort_values(by=['%Recovered Rate'])","1b574653":"plt.figure(figsize=(12, 8))\nplt.barh(rate_income['incomeLevel'],rate_income['%Recovered Rate'])\n\nplt.xlabel('%Recovered')\n\nplt.show()","cb7acde0":"rate_income=covid_current.groupby('incomeLevel').agg({'%Recovered Rate':'mean','%Deaths':'mean'}).reset_index().sort_values(by=['%Deaths'])","04253802":"plt.figure(figsize=(12, 8))\nplt.barh(rate_income['incomeLevel'],rate_income['%Deaths'])\nplt.xlabel('%Deaths')\nplt.show()","2b56b681":"urban_pd=pd.read_csv('\/kaggle\/input\/urbanize-percentage-by-country-2020\/urban percentage by country.csv')","d77e3716":"urban_pd.rename(columns={'COUNTRY':'Country'},inplace=True)","685dcefe":"urban_pd.head()","f2f9c29d":"covid_current=pd.merge(covid_current, urban_pd, on='Country',how='left')","9f04847e":"covid_current.head()","9f476809":"covid_current.corr(method ='pearson').iloc[:,6:]","c837355f":"covid_current.corr(method ='kendall').iloc[:,6:]","7558cfb6":"covid_current.corr(method ='spearman').iloc[:,6:]","500b27af":"plt.figure(figsize=(16, 12))\nplt.scatter(np.log(covid_current['Confirmed']),covid_current['%Urban'])\nfor i, txt in enumerate(covid_current['Country']):\n    plt.annotate(txt, ( np.log(covid_current['Confirmed'][i]),covid_current['%Urban'][i]))\nplt.xlabel('log(Confimred)')\nplt.ylabel('%Urban')\nplt.show()","ad7b359a":"plt.figure(figsize=(16, 12))\nplt.scatter(covid_current['%Recovered Rate'],covid_current['%Urban'])\nfor i, txt in enumerate(covid_current['Country']):\n    plt.annotate(txt, ( covid_current['%Recovered Rate'][i],covid_current['%Urban'][i]))\nplt.xlabel('%Recovered Rate')\nplt.ylabel('%Urban')\nplt.show()","88108a27":"Number of remain covid cases is decreasing, but for other coutries like Italy,South Korea, and Iran are increasing. So remain case will be increasing again. \n\nFor covid , the second peak may be higher than 1st peak (by China) because number of outbond traveler from China is lot higher than SAR spread in 2003 and occur during chinese new year which is travel time for chinese.  ","58266af9":"Temperature on Mar-20.\nMany counties have covid confirmed cases more than 1000 at beginig of Mar-20.","96dcea1c":"Above chart show country which less than 10000 cases and temperature ranging between 0-15 celsius.Mostly new countries need to monitor number of infected.","91095039":"Confirmed Case","6830c0d4":"Temperature map by countrie with COVID.","9e2e7659":"Total SAR Case =  8645 Confirmed.China 5329 , Out of China 3316. 61.6% is in China.\n","6287a1d0":"Coutries with Number of SAR case more than 100 is only 6 countries. ","fa01bd96":"Mostly of upper middle income come from China. High income also impact a lot.","600bd89e":"Population Density","ab150ea5":"Find max increase compare yesterday by contries\n\nMax((Confirmed Case today)-(Confirmed Case yesterday))\/(Confirmed Case yesterday)\n\n*Can't distinguish color scale. So I excluse Bahrain & Kuwait which is 1st and 2nd max speed.","d7ef2fea":"Calculate Correlation","707152f6":"Peak time different in each country . Assume that total days is 96 Days.","f3e6b312":"Start from Top 4th. Number of remain is decrease but in some country eg. Canada ,remain cases increase agian make 2 peaks.  ","86843b45":"If you run above cell and found error.\n\nAttributeError: 'DataFrame' object has no attribute 'Grouper'\n\nPlease run import Cell again. It's will work.\n","861eac7a":"Analyze data for China Province","135080cd":"![](https:\/\/www.travelchinaguide.com\/images\/photogallery\/2018\/january-weather.jpg)","f0fa6b10":"Find out how long for this COVID-19 epidemic\n\nFactors that impact to number of COVID infected cases , Recovered Rate , Deathe Rate","647a0c3e":"#Urbanize\nhttps:\/\/www.cia.gov\/library\/publications\/the-world-factbook\/fields\/349.html","196e6751":"Calculate Correlation : Method = pearson , kendall , and spearman","8bd39519":"*Difficult to count from  1st day because data is not complete. SAR 2003 started spread since Nov-2002.https:\/\/en.wikipedia.org\/wiki\/2002%E2%80%932004_SARS_outbreak","3ae5e735":"Temperature on coutryies with COVID","c215b0c4":"Chart of Log(Confirmed) vs Day since first case\n\nCompare to China the peak is on 55th Day (add 30 days casue spread start end of 17-Nov-19)\n\nFor China , slope decline obviously . When compare to SAR which take 2 Month before back to normal, China will be back to normal on mid of Apr-20.\n","6b89d521":"Compare withSAR 2003","167c6176":"I try to find which countries no covid yet and temperature range in -10 to 10 in March, found mismatch typing and some countries are small islands. \n\nAs I can see , risk countries will be Macedonia,Tajikistan,and Turkmenistan. (Coutry without covid on 13 Apr 20)\n\nAnyway , Risk of covid spreading into these countries depend on outbound travelers controling in each country to protect virus from abroad. And Higher temperture in Summer will help to reduce severity of virus.","30d3b504":"Remain = Confirmed Cases - Recovered Cases - Death Cases.\nFor China, we can count days from Peak to Remain cases = 38 is **60** Days.(Due to end of data)","1c0401a6":"Chart show relation between temperature.\nTemperature = Average Temperature in Febuary last 20 years.\nTemperature of High infected in many coutries are in range between 0 celsius to 15 celsius.","d7f799cb":"Above Chart , Show Country that pass peak day . Y axis show number before peak since first case. Show how fast they can control.","174dfd24":"Some coutries spread so fast , Some countries not. What is the factor?","98edc24b":"I cannot find temperature by city data. For quick look , I got temperature map picture from https:\/\/www.travelchinaguide.com\/tour\/weather-in-january.htm (Spreading Period in China is in Jan-20 )\n\nColder Western region have lower cases compare to eastearn with higher temperature 0-10 Celsius.But this may be western is less density of population.","61534d50":"%Death Rate","f2ac3d75":"Temperature by Country: \n\nRisk Coutries with Temperature range 3 Celsius to 13 Celsius are in Europe,North America,Central Asia, and East Asia.","0d39e44f":"Data period during 2003-01-17 till 2003-07-11 total 96 Days.\n\nBut from this link SAR may start since Nov-2002.\n\nhttps:\/\/en.wikipedia.org\/wiki\/2002%E2%80%9304_SARS_outbreak","2898bad4":"> **Let's analyze COVID data**","bdcf4b13":"Map show %recovered Rate ","ef5188d9":"From above, we can see spreading time within country.Some country eg. Iran reach 1000 cases in 12 days. For South korea take more than 30 days to reach 1000 and Italy a bit faster than South Korea for 3-4 Days.   ","c5e4cf16":"Temperature Data : 2013","348ecc59":"Compare with case out of china of SAR on 2003 and multiply by increasing number of outbound travel .Exclude China ,COVID estimation is may reach 796k.\n(Max confirmed case in China is 80k) \n\nAnyway , Chinese outbound travel data on 2003 is about 5M , but 2018 increase to 80M.\nTravel Data : https:\/\/china-outbound.com\/editorial-latest-chinese-data-h1-2018\/\n\nThe 796k infected all over the world is the maximum number cause all coutries have a lot awareness to fight with covid.","373200e7":"If you found any error , please run import cell below again. And go back to cell you found error . Run again , It's work.","0a89c8a0":"Temperature vs Confirmed cases"}}