{"cell_type":{"c631dc88":"code","19f96961":"code","1e6c172c":"code","05d0107e":"code","ae727be7":"code","66c77c73":"code","d14e470d":"code","034697e0":"code","e462521f":"code","79433652":"code","cc49fc15":"code","e0dc15c9":"code","afedba0d":"code","73a20578":"code","0f039597":"code","06f16ff4":"code","1d1c1edd":"code","9d1d1049":"code","b1683e9b":"code","e668867c":"code","366d45d4":"code","c9e6c3eb":"code","5315940f":"code","381aa0aa":"code","26cf8ed5":"code","eb0ecec5":"code","af2b4ef1":"code","ad9c47c6":"code","85fd1426":"code","0bcb5521":"code","eaa643fc":"code","265575a4":"code","cb65a2f9":"code","e7be5028":"code","f00b25b9":"code","60ffa68b":"code","2d8ea24c":"code","5da3f64e":"code","4b2fbbe9":"code","bf664349":"code","ca884b7b":"code","c1425a7d":"code","00cb0f79":"code","058d84d2":"code","7df5ea31":"code","06a63b8c":"code","76eb7112":"code","65175a91":"code","033fe30b":"code","035c7278":"code","4c0a23a6":"code","19459da0":"code","4eaeebd2":"code","4b068e8d":"code","e4ba7466":"code","f7c9a62d":"code","e9f7510f":"code","0afec381":"code","0c184767":"code","a570388e":"code","41c4a570":"code","3cecc639":"code","2a0d18d4":"code","99c4d352":"code","6b9da524":"code","b7aacdce":"code","8bb60ffa":"code","51d1659b":"code","98944bd7":"code","2a076ac5":"code","ffc0607b":"code","3a292eac":"code","303868a3":"code","ef859387":"code","18279494":"code","06325d22":"code","2d98c07e":"code","58f94309":"code","54a48742":"code","c7d53c27":"code","0fbc7684":"code","828c7598":"code","29cdb9b1":"code","78e2c252":"code","c3db2032":"code","7542bd78":"code","1476eef9":"code","3dd0bcf5":"code","aeaaaf74":"code","d2f3c82f":"code","a18df177":"code","a3603a22":"code","ce0ae074":"code","f3e5c984":"code","59c4c049":"code","971737c0":"code","ef769f71":"code","52293f21":"markdown","b81b454e":"markdown","dcfaae55":"markdown","889cef74":"markdown","77f8d38b":"markdown","afc37c26":"markdown","05c8afa3":"markdown","b66c1760":"markdown","ea25eafc":"markdown","28fbebac":"markdown","1368a5fe":"markdown","9964fc1d":"markdown","2f0d4ea0":"markdown","ca850f1f":"markdown","da6f8c8f":"markdown","075937d9":"markdown","7604feb1":"markdown","992caa00":"markdown","8e9996a6":"markdown","cec6034e":"markdown","9d4db5d7":"markdown","12a34394":"markdown","e4116510":"markdown","836a5933":"markdown","bce688bf":"markdown","095220cd":"markdown","ae903a88":"markdown","6fa976ef":"markdown","2248d789":"markdown","d37e8c69":"markdown","eb4d1662":"markdown"},"source":{"c631dc88":"#Importing libraries\nimport re\nimport numpy as np\nimport pandas as pd\npd.pandas.set_option('display.max_columns', None)\npd.set_option('display.max_rows', 250)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('darkgrid')\nimport warnings \nwarnings.filterwarnings('ignore')","19f96961":"#Loading csv\ndf = pd.read_csv('..\/input\/new-cars-price-2019\/New_cars_price.csv')\ndf.head()","1e6c172c":"df.shape","05d0107e":"#Number of missing values across columns\n\ndef missing_values(dataframe):\n    null_counts = dataframe.isnull().sum()\n    mean_missing = dataframe.isnull().mean()*100\n    missing_val = pd.DataFrame({'Count' : null_counts[null_counts > 0] , 'Percentage Missing(%)' : mean_missing[mean_missing > 0] })\n    missing_val.sort_values(by = 'Count' , inplace=True)\n    missing_val.reset_index(inplace=True)\n    missing_val.columns = ['Features' , 'Count' , 'Percentage Missing(%)' ]\n    return missing_val\nmissing = missing_values(df)\nmissing","ae727be7":"df1 = df.copy()","66c77c73":"df1['Manufacturer'] = df1['Model'].str.split(' ').str[1]     #Manufacturing Company\ndf1['Model year'] = df1['Model'].str.split(' ').str[0]       #Model year\ndf1.drop(columns='Model' , inplace  = True)","d14e470d":"df1['Manufacturer'].replace({'Alfa':'Alfa Romeo' , \n                             'Aston':'Aston Martin',\n                             'FIAT':'Fiat',\n                             'INFINITI':'Infiniti',\n                             'Land':'Land Rover',\n                             'MINI':'Mini',\n                             'smart':'Smart'} , inplace = True)","034697e0":"sns.set_style('whitegrid')\nplt.figure(figsize=(20,10))\ng = sns.countplot(\n    data=df1,\n    x='Manufacturer',\n    order = df1['Manufacturer'].value_counts().index,\n    palette='PuBuGn_d'\n)\ng.set_title('Car Manufacturers')\nplt.xticks(rotation=90)","e462521f":"df1['MSRP'] = df1['MSRP'].str.replace(\"$\", \"\").str.replace(\",\", \"\").astype(float)","79433652":"plt.figure(figsize=[20,10])\nsns.set(font_scale=1.25)\nsns.distplot(df1['MSRP'].dropna(),color='r')\nplt.xlabel('Price')\nplt.ylabel('PDF')","cc49fc15":"sns.set(font_scale=1.25)\nplt.figure(figsize=(20,10))\ng = sns.barplot(\n    data=df1,\n    x='Manufacturer',\n    y='MSRP',\n    order = df1.groupby(by = 'Manufacturer')['MSRP'].mean().sort_values( ascending=False).index ,\n    palette='pastel'\n)\ng.set(ylabel = 'Average Price in dollars')\ng.set_title('Car Manufacturers')\nplt.xticks(rotation=90)","e0dc15c9":"df1['Engine'] = df1['Engine'].str.split(',').str[0].str.split(' ').str[-1]\n\ndf1['Engine'].replace({'I-4':'l4','V-6':'V6','I4':'l4',\n                       'V-12':'V12','V-8':'V8','I-5':'l5',\n                       'I5':'l5','W-12':'W12','I-6':'l6',\n                       '6-Cyl':'Flat','Cyl':'Flat','I-3':'l3',\n                       'L4':'l4','Turbocharged':'l4','Gas':'l4',\n                       '4-Cyl':'l4','5-Cyl':'l5','ECOTEC':'l4',\n                       'Diesel':'l4','(Vortec)':'V8','I3':'l3',\n                       'V-10':'V10','i4':'l4','4-cyl':'l4',\n                       'H-6':'Flat','6':'Flat','6-cyl':'Flat',\n                       'H-4':'Flat','4':'Flat','Electric\/Gas':'Electric'}, inplace = True)","afedba0d":"sns.set(font_scale=1.25)\nplt.figure(figsize=(15,8))\ng = sns.countplot(\n    data=df1,\n    y='Engine',\n    order = df1['Engine'].value_counts().index,\n    palette='deep'\n)\ng.set_title('Engine Configuration')\n","73a20578":"plt.figure(figsize=(20,10))\ng = sns.barplot(\n    data=df1,\n    x='Engine',\n    y='MSRP',\n    order = df1.groupby(by = 'Engine')['MSRP'].mean().sort_values( ascending=False).index ,\n    palette='muted'\n)\ng.set(ylabel = 'Average Price in dollars')\ng.set_title('Car Manufacturers')","0f039597":"plt.figure(figsize=[15,8])\nsns.boxplot(x='Engine' , y='MSRP',data=df1)\nplt.tight_layout()\nplt.title('Boxplot between Engine type and price')","06f16ff4":"df['Suspension Type - Front'].value_counts()","1d1c1edd":"df1['Suspension Type - Front'] = df['Suspension Type - Front']\n#Suspension type Front\n\npattern1 = re.compile(r'(?i)(strut|MacPh|Mcpher)')                          #Strut\npattern2 = re.compile(r'(?i)(bone|short|sla|pivot|upper)')                  #Wishbone\npattern3 = re.compile(r'(?i)(tors|twis|crank|torq)')                        #Torsion bar\npattern4 = re.compile(r'(?i)(coil)')                                        #Coil spring\npattern5 = re.compile(r'(?i)(link|trap|control arm|multi|Trailing arm)')    #Link type\npattern6 = re.compile(r'(?i)(crank|solid|axle)')                            #Axle\npattern7 = re.compile(r'(?i)(leaf|stage|hotch|hypo)')                       #Leaf type\npattern8 = re.compile(r'(?i)(air)')                                         #Air suspension\npattern9 = re.compile(r'(?i)(indep|indpen|indep)')                          #Independent\n\ndf1['Suspension Type - Front'].fillna('NA',inplace = True)\ndf1['Suspension Type - Rear'].fillna('NA',inplace = True)\n\ndef suspension(x):\n    if re.search(pattern1,x):\n        return 'MacPherson Strut'\n    elif re.search(pattern2,x):\n        return 'Double Wishbone'\n    elif re.search(pattern3,x):\n        return 'Torsion Bar'\n    elif re.search(pattern4,x):\n        return 'Coil Spring'\n    elif re.search(pattern5,x):\n        return 'Link type'\n    elif re.search(pattern6,x):\n        return 'Axle'\n    elif re.search(pattern7,x):\n        return 'Leaf type'\n    elif re.search(pattern8,x):\n        return 'Air Suspension'\n    elif re.search(pattern9,x):\n        return 'Independent'\n    else:\n        return 'Others'","9d1d1049":"df1['Suspension Type - Front'] = df1['Suspension Type - Front'].apply(suspension)\ndf1['Suspension Type - Front'].value_counts()","b1683e9b":"df1['Suspension Type - Rear'] = df1['Suspension Type - Rear'].apply(suspension)\ndf1['Suspension Type - Rear'].value_counts()","e668867c":"p = dict(zip(df1['Suspension Type - Front'].unique(), sns.color_palette()))\nfig, ax =plt.subplots(2,1,figsize=(20,15))\nsns.countplot(df1['Suspension Type - Front'],palette=p,order=df1['Suspension Type - Front'].value_counts().index ,ax=ax[0])\nsns.countplot(df1['Suspension Type - Rear'],palette=p ,order=df1['Suspension Type - Rear'].value_counts().index ,ax=ax[1])","366d45d4":"df1['EPA Fuel Economy Est - City (MPG)'] = df1['EPA Fuel Economy Est - City (MPG)'].str.split(' ').str[0].astype('float')","c9e6c3eb":"df1['Base Curb Weight (lbs)'] = df1['Base Curb Weight (lbs)'].str.replace(',','').str.split(' ').str[0].str.split('-').str[0].astype('float')","5315940f":"df1['Passenger Volume (ft\u00b3)'] = df1['Passenger Volume (ft\u00b3)'].replace('-TBD-',np.NAN).astype('float')","381aa0aa":"df1['Height, Overall (in)'] = df1['Height, Overall (in)'].str.split(' ').str[0].astype('float')","26cf8ed5":"df1['Fuel Tank Capacity, Approx (gal)'] = df1['Fuel Tank Capacity, Approx (gal)'].str.split(' ').str[0].astype('float')","eb0ecec5":"df1['Body Style'].replace('Crew Cab Pickup', 'Crew Cab Pickup - Standard Bed' , inplace = True)\ndf1['Body Style'].replace('Extended Cab Pickup', 'Extended Cab Pickup - Standard Bed' , inplace = True)\ndf1['Body Style'].replace('Regular Cab Chassis-Cab', 'Regular Cab Pickup - Standard Bed',inplace = True)\ndf1['Body Style'].replace('3dr Car' , 'Hatchback' , inplace = True)\ndf1['Body Style'].replace(['Crew Cab Pickup','Extended Cab Pickup'] , np.nan , inplace = True)\n\n\ndf1['Category'] = df1['Body Style']\n\nvan = ['Mini-van, Cargo', 'Full-size Passenger Van', 'Full-size Cargo Van', 'Mini-van, Passenger', 'Specialty Vehicle']\n\npickups = ['Crew Cab Pickup - Short Bed', 'Crew Cab Pickup - Standard Bed', \n        'Extended Cab Pickup - Short Bed', 'Extended Cab Pickup - Standard Bed',\n        'Extended Cab Pickup - Long Bed', 'Regular Cab Pickup - Long Bed', \n        'Crew Cab Pickup - Long Bed', 'Regular Cab Pickup - Short Bed', \n        'Regular Cab Pickup - Standard Bed', 'Extended Cab Pickup', 'Crew Cab Pickup',\n        'Regular Cab Chassis-Cab', 'Pickup - Short Bed', 'Pickup - Standard Bed', 'Pickup - Long Bed']\n\ncar = ['2dr Car', '4dr Car', 'Convertible', 'Station Wagon', '3dr Car', 'Hatchback']\n\ndf1['Category'] = df1['Category'].str.replace('Sport Utility', 'SUV')\n\nfor item in van:\n    df1['Category'] = df1['Category'].str.replace(item, 'Van')\n    \nfor item in pickups:\n    df1['Category'] = df1['Category'].str.replace(item, 'Pickup')\n    \nfor item in car:\n    df1['Category'] = df1['Category'].str.replace(item, 'Car')","af2b4ef1":"df1['Drivetrain'].replace(['Front Wheel Drive', 'Front-Wheel Drive' , \n                           'Front wheel drive','Front-wheel drive' ,\n                           '2 Wheel Drive' , '2WD' , '2-Wheel Drive'] , 'FWD' , inplace = True)\ndf1['Drivetrain'].replace(['Rear Wheel Drive' , 'REAR WHEEL DRIVE' , \n                           'Rear-Wheel Drive' ,'Rear wheel drive'] , 'RWD' , inplace = True)\ndf1['Drivetrain'].replace(['All Wheel Drive' , 'All-Wheel Drive' ,\n                           'All wheel drive' , 'All-wheel drive' ] , 'AWD' , inplace = True)\ndf1['Drivetrain'].replace(['4 Wheel Drive' , 'Four Wheel Drive' , \n                           '4-Wheel Drive' , 'Four-Wheel Drive' , \n                           '4-wheel Drive' , 'Four wheel drive'] , '4WD' , inplace = True)","ad9c47c6":"fig, ax =plt.subplots(1,2,figsize=(18,8))\nsns.barplot(df1['Drivetrain'] , df1['MSRP'] , ax=ax[0])\nsns.countplot(df1['Category'] , hue=df1['Drivetrain'] , ax=ax[1])","85fd1426":"g = sns.FacetGrid(df1 , col='Drivetrain')\ng.map(sns.boxplot , 'MSRP',color='g')\ng.fig.suptitle('Boxplot between Price and Drivetrain types',y=1.06)","0bcb5521":"df1['Trans Type'].replace('10.0' , '10' , inplace = True)\ndf1['Trans Type'].replace('9.0' , '9' , inplace = True)\ndf1['Trans Type'].replace('8.0', '8' , inplace = True)\ndf1['Trans Type'].replace('7.0', '7' , inplace = True)\ndf1['Trans Type'].replace(['6.0' ,6.0, '6-speed' , 'Tiptronic'] , '6' , inplace = True)\ndf1['Trans Type'].replace(['5.0',5.0 , '5-speed','5-Speed' , 'HD 5'] , '5' , inplace = True)\ndf1['Trans Type'].replace(['4-Speed','4.0',4.0] , '4' , inplace = True)\ndf1['Trans Type'].replace(['4-Speed'] , '4' , inplace = True)\ndf1['Trans Type'].replace(['1.0','2'],'<3',inplace = True)\ndf1['Trans Type'].replace('3','<3',inplace = True)\ndf1['Trans Type'].replace([1,'1'],'<3',inplace = True)","eaa643fc":"df1['Trans Type'].value_counts()","265575a4":"#sns.swarmplot(x = df1['Trans Type'] ,y= df1['MSRP'])","cb65a2f9":"#DI - Direct Injection , SFI - Sequential fuel injection ,EFI -  Electronic Fuel Injection\ndf1['Fuel System'].replace(['Gasoline Direct Injection' , 'Direct Injection' , 'Port\/Direct Injection' , \n                            'Diesel Direct Injection' ,'NDIS', 'DI' , 'Direct Gasoline Injection' ,'MPFI' , \n                            'Turbocharged DI','FSI','SIDI','SMFI','Turbocharged SMPI','TDI', \n                            'TFSI Direct','Turbocharged','Direct injection','TFSI','GDI','SDI','Turbo-Diesel',\n                            'Turbo-Charged OHV','FSI Direct','DOHC FSI Direct','Direct','DISI','SFI\/DI'\n                            'Turbocharged FSI','Turbo-Charged DI','CDI','Turbocharged FSI','FI','SFI\/DI'\n                            'NDIS','CRD','DIS','SFI\/DI','SFI\/DI','PFI','HPI'] , 'DI' , inplace = True)\n\ndf1['Fuel System'].replace(['Sequential MPI','SMPI','SEFI','MPI','MFI','SFI FlexFuel','Sequential MPI (injection)'\n                            'Sequential Fuel Injection','SPI','SI','Sequential Fuel Injection',\n                            'Supercharged SPFI','SMPFI','Sequential MPI (injection)'] , 'SFI' , inplace = True)\n\ndf1['Fuel System'].replace(['Electronic Fuel Injection','PGM-FI','Electronic fuel injection' , \n                            'Turbocharged EFI','EMPI','PGM-FI MPI','Supercharged EFI','FFV',\n                            'Electronic Fuel Injectino','Electric','Hydrogen','Turbocharged EMFI','EFI',\n                            'FFV','SPFI'] , 'Electric FI' , inplace = True)","e7be5028":"df1['Fuel System'].value_counts()","f00b25b9":"sns.countplot(df1['Fuel System'],hue=df1['Category'])","60ffa68b":"sns.countplot(df1['Fuel System'],hue=df1['Drivetrain'])","2d8ea24c":"plt.figure(figsize=(8,4))\ng = sns.barplot(\n    data=df1,\n    x='Fuel System',\n    y='MSRP',\n    order = df1.groupby(by = 'Fuel System')['MSRP'].mean().sort_values( ascending=False).index ,\n    palette='muted'\n)\ng.set(ylabel = 'Average Price in dollars')\ng.set_title('Car Manufacturers')","5da3f64e":"pattern1 = re.compile(r'(?i)(auto|hd auto|elec)')                                   #Automatic                   \npattern2 = re.compile(r'(?i)(man|hd man)')                                          #Manual               \npattern3 = re.compile(r'(?i)(cont|cvt|ECVT)')                                       #CVT\npattern4 = re.compile(r'(?i)(Automatic w\/OD|Automatic|Auto w\/OD|elec|tip|smg)')     #Automatic\npattern5 = re.compile(r'(?i)(Man|dsg|hd)')                                          #Manual\n\ndf1['Trans Description Cont.'].fillna('NA',inplace = True)\n\ndef transmission(x):\n    if re.match(pattern2,x) or re.search(pattern5,x):\n        return 'Manual'\n    elif re.match(pattern1,x) or re.search(pattern4,x):\n        return 'Automatic'\n    elif re.match(pattern3,x):\n        return 'CVT'\n    else:\n        return x\n    \ndf1['Trans Description Cont.'] = df1['Trans Description Cont.'].apply(transmission)\ndf1['Trans Description Cont.'].value_counts()","4b2fbbe9":"plt.figure(figsize=(8,4))\ng = sns.barplot(\n    data=df1,\n    x='Trans Description Cont.',\n    y='MSRP',\n    order = df1.groupby(by = 'Trans Description Cont.')['MSRP'].mean().sort_values( ascending=False).index ,\n    palette='muted'\n)\ng.set(ylabel = 'Average Price in dollars')\ng.set_title('Car Manufacturers')","bf664349":"#Net horsepower\ndf1['SAE Net Horsepower @ RPM'] = pd.to_numeric(df1['SAE Net Horsepower @ RPM'].str.split('@').str[0].str.split(' ').str[0],errors='coerce')","ca884b7b":"plt.figure(figsize=[20,10])\nsns.set(font_scale=1.25)\nsns.distplot(df1['SAE Net Horsepower @ RPM'].dropna(),color='g')\nplt.xlabel('Horsepower')\nplt.ylabel('PDF')","c1425a7d":"lm = sns.lmplot(x = 'SAE Net Horsepower @ RPM' , \n           y = 'MSRP' ,\n           markers= '.',\n           col = 'Drivetrain',\n           col_wrap=2,\n           palette='Blues',\n           scatter_kws={'alpha':0.4, 'color':'#fa9943'},\n           line_kws={'color': '#db751a'},\n           data=df1)\nlm.set(ylim=(0, None))\nlm.fig.suptitle('Comparision between Horsepower and Price',y=1.05)","00cb0f79":"#Net Torque\ndf1['SAE Net Torque @ RPM'] = pd.to_numeric(df1['SAE Net Torque @ RPM'].str.split('@').str[0].str.split(' ').str[0], errors='coerce')","058d84d2":"plt.figure(figsize=(20,10))\nsns.scatterplot(df1['SAE Net Torque @ RPM'] , df1['MSRP'],hue = df1['Drivetrain'] , alpha = 0.3)","7df5ea31":"#Torque value above 1000 Nm is highly unlikely\ndf[df1['SAE Net Torque @ RPM'] > 1000][['Model','Engine','SAE Net Torque @ RPM']]","06a63b8c":"#Torque produced by Chevrolet Tahoe is around 460 Nm\ndf1['SAE Net Torque @ RPM'].replace(3350,460,inplace=True)","76eb7112":"plt.figure(figsize=(20,10))\nsns.scatterplot(df1['SAE Net Torque @ RPM'] , df1['MSRP'],hue = df1['Drivetrain'] , alpha = 0.3)","65175a91":"df1['Displacement'] = pd.to_numeric(df1['Displacement'].str.strip(' ').str.split('L').str[0].str.split('\/').str[0].str.split(' ').str[0]\n                      ,errors='coerce')","033fe30b":"df1['Displacement'].plot(kind='box')","035c7278":"df[df1['Displacement'] > 8][['Engine','Displacement']]","4c0a23a6":"#BMW i3 is a hybrid car which has engine size of 650 cc\ndf1['Displacement'].replace(39.5,0.65,inplace=True)","19459da0":"g = sns.jointplot(data=df1 , x = 'Displacement' , y = 'MSRP',kind='reg',color = 'g',\n                 joint_kws = {'scatter_kws':dict(alpha=0.3)})","4eaeebd2":"df1['Turning Diameter - Curb to Curb (ft)'] = pd.to_numeric(df1['Turning Diameter - Curb to Curb (ft)'].str.split(' ').str[0],\n                                                            errors='coerce')","4b068e8d":"df1['Turning Diameter - Curb to Curb (ft)'].plot(kind='box')","e4ba7466":"#Outliers\ndf[(df1['Turning Diameter - Curb to Curb (ft)'] < 20) | (df1['Turning Diameter - Curb to Curb (ft)'] > 80)][['Model' , 'Turning Diameter - Curb to Curb (ft)']]","f7c9a62d":"df1['Turning Diameter - Curb to Curb (ft)'] = df1['Turning Diameter - Curb to Curb (ft)'].apply(lambda x: x*2 if x <20 else x)","e9f7510f":"plt.figure(figsize=(20,10))\nsns.scatterplot(df1['Turning Diameter - Curb to Curb (ft)'] , df1['SAE Net Horsepower @ RPM'],hue = df1['Category'] , alpha = 0.3)","0afec381":"df1['Front Wheel Material'].replace('Styled Steel','Steel',inplace = True)\ndf1['Front Wheel Material'].replace('Forged Aluminum','Aluminum',inplace = True)\ndf1['Front Wheel Material'].replace('Chrome','Alloy',inplace= True)\ndf1['Front Wheel Material'].value_counts()","0c184767":"#df1['Front tire vehicle type']=list(map(lambda x: str(x)[0],df1['Front Tire Size']))\ndf1['Front tire width']=list(map(lambda x: str(x)[1:4],df1['Front Tire Size']))\ndf1['Front tire aspect ratio']=list(map(lambda x: str(x)[0:2],df1['Front Tire Size'].str.split('\/').str[1]))\ndf1['Front tire speed ratings\/cons.type']=list(map(lambda x: str(x)[2:-2],df1['Front Tire Size'].str.split('\/').str[1]))\ndf1['Front tire rim size']=list(map(lambda x: str(x)[-2:],df1['Front Tire Size'].str.split('\/').str[1]))\n\ndf1=df1.drop('Front Tire Size',axis=1)","a570388e":"df1['Front tire aspect ratio'] = df1['Front tire aspect ratio'].replace(['YR','na',''],np.nan)\ndf1['Front tire aspect ratio'] = df1['Front tire aspect ratio'].replace('71',70)\ndf1['Front tire aspect ratio'] = df1['Front tire aspect ratio'].replace('31',30)","41c4a570":"#df1['Front tire aspect ratio'].value_counts(dropna = False)","3cecc639":"pattern1 = re.compile(r'(?i)(z)')     #Z - 240+ Kmph                  \npattern2 = re.compile(r'(?i)(v)')     #V - 240  Kmph       \npattern3 = re.compile(r'(?i)(h)')     #H - 210  Kmph\npattern4 = re.compile(r'(?i)(t)')     #T - 190  Kmph\npattern5 = re.compile(r'(?i)(r)')     #R - 170  Kmph\n\ndef tire_speed(x):\n    if re.match(pattern1,x):\n        return 'Z'\n    elif re.match(pattern2,x):\n        return 'V'\n    elif re.match(pattern3,x):\n        return 'H'\n    elif re.match(pattern4,x):\n        return 'T'\n    elif re.match(pattern5,x):\n        return 'R'\n    else:\n        return 'NA'\n    \ndf1['Front tire speed ratings\/cons.type'] = df1['Front tire speed ratings\/cons.type'].apply(tire_speed)\ndf1['Front tire speed ratings\/cons.type'].value_counts(dropna = False)","2a0d18d4":"df1['Front tire rim size'].value_counts(dropna = False)","99c4d352":"pattern1 = re.compile(r'(1[5-9]|2[0-8])')\n\ndef rim_size(x):\n    if re.match(pattern1,x):\n        return x\n    else:\n        return np.nan\n    \ndf1['Front tire rim size'] = df1['Front tire rim size'].apply(rim_size)\ndf1['Front tire rim size'].value_counts(dropna = False)","6b9da524":"df1['Stabilizer Bar Diameter - Front (in)'] = pd.to_numeric(df1['Stabilizer Bar Diameter - Front (in)'],errors='coerce')","b7aacdce":"df1['Stabilizer Bar Diameter - Front (in)'].plot(kind= 'box')","8bb60ffa":"#Above 2 inch is highly unlikely\ndf1.loc[df1['Stabilizer Bar Diameter - Front (in)']>2,'Stabilizer Bar Diameter - Front (in)'] = np.nan","51d1659b":"df1['Stabilizer Bar Diameter - Front (in)'].plot(kind= 'box')","98944bd7":"y_n = ['Air Bag-Frontal-Driver', 'Air Bag-Frontal-Passenger',\n       'Air Bag-Passenger Switch (On\/Off)', 'Air Bag-Side Body-Front',\n       'Air Bag-Side Body-Rear', 'Air Bag-Side Head-Front',\n       'Air Bag-Side Head-Rear', 'Brakes-ABS', 'Child Safety Rear Door Locks',\n       'Daytime Running Lights', 'Traction Control', 'Night Vision',\n       'Rollover Protection Bars', 'Fog Lamps', 'Parking Aid',\n       'Tire Pressure Monitor', 'Back-Up Camera', 'Stability Control']\n\nfor i in y_n:\n    df1[i] = df1[i].map({'Yes':1 , 'No':0})","2a076ac5":"df1['Corrosion Miles\/km'] = df1['Corrosion Miles\/km'].str.replace(\",\", \"\").str.replace(\"Unlimited\", \"150000\")\ndf1['Corrosion Miles\/km'] = df1['Corrosion Miles\/km'].astype(float)\ndf1['Corrosion Miles\/km'].value_counts()","ffc0607b":"df1['Drivetrain Miles\/km'] = df1['Drivetrain Miles\/km'].str.replace(\",\", \"\").str.replace(\"Unlimited\", \"150000\")\ndf1['Drivetrain Miles\/km'] = df1['Drivetrain Miles\/km'].astype(float)\ndf1['Drivetrain Miles\/km'].value_counts()","3a292eac":"df1['Basic Miles\/km'] = df1['Basic Miles\/km'].str.replace(\",\", \"\").str.replace(\"Unlimited\", \"150000\")\ndf1['Basic Miles\/km'] = df1['Basic Miles\/km'].str.replace(\"49999\", \"50000\")\ndf1['Basic Miles\/km'] = df1['Basic Miles\/km'].astype(float)\ndf1['Basic Miles\/km'].value_counts()","303868a3":"df1['Roadside Assistance Miles\/km'] = df1['Roadside Assistance Miles\/km'].str.replace(\",\", \"\").str.replace(\"Unlimited\", \"150000\")\ndf1['Roadside Assistance Miles\/km'] = df1['Roadside Assistance Miles\/km'].str.replace(\"49711\", \"50000\")\ndf1['Roadside Assistance Miles\/km'] = df1['Roadside Assistance Miles\/km'].str.replace(\"24000\", \"25000\")\ndf1['Roadside Assistance Miles\/km'] = df1['Roadside Assistance Miles\/km'].astype(float)\ndf1['Roadside Assistance Miles\/km'].value_counts()","ef859387":"df1['Drivetrain Years'] = df1['Drivetrain Years'].str.replace('Unlimited','20')\ndf1['Roadside Assistance Years'] = df1['Roadside Assistance Years'].str.replace('Unlimited','20')","18279494":"df1.drop(columns=['EPA Classification' , 'Style Name' ,'Body Style' ,'Transmission','Steering Type','Brake Type'],inplace = True)","06325d22":"df1.head()","2d98c07e":"#df1.to_csv('New_cars_cleaned.csv',index=False)","58f94309":"missing_values(df1)","54a48742":"cat_col_imp = ['Drivetrain' , 'Category' , 'Engine' , 'Trans Type']","c7d53c27":"df1.dropna(axis=0 , how = 'any' , subset=['MSRP','Drivetrain'] , inplace=True)\ndf1[['MSRP' , 'Drivetrain']].isnull().sum()","0fbc7684":"#Imuting missing values in egnine by grouping them by manufacturer and category wise\ndf1['Engine'] = df1['Engine'].fillna(df1.groupby(['Manufacturer', 'Category'])['Engine'].transform(lambda x: x.value_counts().idxmax()))","828c7598":"#Trans type\ndf1['Trans Type'].value_counts(dropna=False)","29cdb9b1":"##Imuting missing values in transmission type by grouping them by manufacturer and engine wise\ndf1['Trans Type'] = df1['Trans Type'].fillna(df1.groupby(['Manufacturer','Category','Engine'])['Trans Type'].transform(lambda x: x.value_counts().idxmax()))","78e2c252":"df1['Trans Description Cont.'].value_counts(dropna= False)","c3db2032":"df1['Trans Description Cont.'] = df1['Trans Description Cont.'].fillna(df1.groupby(['Manufacturer','Category','Engine'])['Trans Description Cont.'].transform(lambda x: x.value_counts().idxmax()))","7542bd78":"df1['Fuel System'].value_counts(dropna=False)","1476eef9":"df['Fuel System'] = df['Fuel System'].fillna('Unknown')","3dd0bcf5":"#Remaining columns tht has to be imputed\nnum_col_imp = ['EPA Fuel Economy Est - City (MPG)', 'Base Curb Weight (lbs)',\n               'Passenger Volume (ft\u00b3)', 'Wheelbase (in)', 'Track Width, Front (in)',\n               'Height, Overall (in)', 'Fuel Tank Capacity, Approx (gal)',\n               'SAE Net Torque @ RPM', 'Fuel System', 'SAE Net Horsepower @ RPM',\n               'Displacement', 'Basic Miles\/km',\n               'Basic Years', 'Corrosion Miles\/km', 'Corrosion Years',\n               'Drivetrain Miles\/km', 'Drivetrain Years',\n               'Turning Diameter - Curb to Curb (ft)']","aeaaaf74":"#One hot encoding\n#If a category has more than 300 values then a new column is created\n\ncat_col = ['Engine' , 'Drivetrain' , 'Trans Description Cont.' , 'Fuel System','Suspension Type - Front',\n           'Trans Type','Suspension Type - Rear','Manufacturer','Category','Front Wheel Material','Front tire speed ratings\/cons.type']\nprint('The Encoding is applied for: ')\nfor col in cat_col:\n    freqs=df1[col].value_counts()\n    k=freqs.index[freqs>300]\n    for cat in k:\n        name=col+'_'+cat\n        df1[name]=(df1[col]==cat).astype(int)\n    del df1[col]\n    print(col)","d2f3c82f":"df1.head()","a18df177":"for i in list(df1.columns[df1.dtypes == 'O']):\n    df1[i] = pd.to_numeric(df1[i],errors='coerce')","a3603a22":"# df2 = df1.copy()\n# df2 = df2[:1000]   \n# #MICE IMPUTATION\n# from fancyimpute import IterativeImputer\n# MICE_imputer = IterativeImputer(verbose=2)\n\n# df2.iloc[:,:] = MICE_imputer.fit_transform(df1)\n\n# df2.to_csv('Car_MICE_imp.csv',index=False)","ce0ae074":"df3 = df1.copy()\ndf3 = df3[:5000]","f3e5c984":"\nfrom fancyimpute import KNN\n\n# Initialize KNN\nknn_imputer = KNN(verbose = 2)\n\n# Impute using fit_tranform on diabetes_knn_imputed\ndf3.iloc[:, :] = knn_imputer.fit_transform(df3)","59c4c049":"# df2.to_csv('Car_MICE_imp.csv',index=False)","971737c0":"# mice = pd.read_csv('Car_MICE_imp.csv')\n# mice.head()","ef769f71":"#knn = pd.read_csv('Car_KNN_imp.csv')\ndf3.head()","52293f21":"## MISSING VALUE IMPUTATION","b81b454e":"##### Category columns that needs to be imputed","dcfaae55":"## DATA CLEANING","889cef74":"#### Torque","77f8d38b":"##### Fuel Economy","afc37c26":"##### Dropping Rows\n\nThe rows in which price and category were missing are removed.","05c8afa3":"##### Fuel Capacity","b66c1760":"##### Type of transmission used","ea25eafc":"##### Model","28fbebac":"##### Engine\nImputing the missing engine values by taking the most occurrent value after grouping them together by their manufacturer and category","1368a5fe":"#### Suspension","9964fc1d":"##### Passenger Volume","2f0d4ea0":"#### Type of transmission","ca850f1f":"#### Drivetrain","da6f8c8f":"#### Number of gears","075937d9":"#### Fuel System","7604feb1":"##### Fuel System","992caa00":"**FEATURE DESCRIPTION**\n\n1. Model - Car model names\n2. MRSP  - Selling price in dollars\n3. Engine - Type of engine used in car\n4. EPA Classification - EPA size classes (Minicompact , Mid size , Compact , Mid-Size , SUV)\n5. Style Name - Special features for each model (Drivetrain , Transmission , Roof , Doors , extra features)  ****\n6. Drivetrain - Types of drivetrain(Conveys power from engine to wheels) used (FWD , RWD , AWD , 4WD )\n7. Passenger Capacity - Number of people who can be seated\n8. Passenger Doors - Number of doors in a car\n9. Body Style - Body style of the car \n10. Transmission - Type of transmission used.  (Not req -- Trans type , Trans Description cont.)\n11. Base Curb Weight - Total weight of the vehicle in pounds\n12. Passenger Volumne - Volume of space available for passengers\n13. Wheelbase - Distance between the centers of the front and rear wheels\n14. Track Width Front - Distance between the centerline of two frontwheels\n15. Height Overall - Overall height of the car in inches\n16. Fuel Tank Capacity,Approx(gal) - Fuel tank capacity in gallon\n17. SAE Net Torque @ RPM - Net optimum torque at certain range of RPM\n18. Fuel System - Type of fuel injection used in car\n19. SAE Net Horsepower @ RPM - Horsepower produced at engine crankshaft(without transmission losses)\n20. Displacement -  Measure of the cylinder volume swept by all of the pistons (in litres)\n21. Trans Description - Type of transmission used in car\n22. Trans Type - Number of gears in transmission\n23. Brake Type - Type of brake used in car\n24. Suspension type Front - Type of suspension used in car front wheels\n25. Suspension type Rear - Type of suspension used in car rear wheels\n26. Air Bag Frontal Driver - Drivers Airbag(Y\/N)\n27. Air Bag Frontal Passenger - Front passenger Airbag(Y\/N)\n28. Air Bag-Side Body-Front - Airbags in front side of the car(Y\/N)\n29. Air Bag-Side Body-Rear - Airbags in rear side of the car(Y\/N)\n30. Air Bag Side Head-Front - Side airbags to protect head for front row(Y\/N)\n31. Air Bag Side Head-Rear  - Side airbags to protect head for rear row(Y\/N)\n32. Brakes -ABS - Is Antilock braking system is present(Y\/N)\n33. Child Safety Rear Door Locks - Child safety door locks(Y\/N)\n34. Daytime Running Lights - (Y\/N)\n35. Traction Control - Is TCS available (Y\/N)\n36. Night Vision -  Thermographic camera to increase a driver's perception in darkness (Y\/N)\n37. Rollover Protection Bar - Is ROPS present (Y\/N)\n38. Fog Lamps - Is fog lamps present(Y\/N)\n39. Parking Aid - Senors to monitor nearby obstacles(Y\/N)\n40. Tire Pressure Monitor - Y\/N\n41. Back up Camera - Is reversing camera present (Y\/N)\n42. Stability Control - Is ECS present (Y\/N)\n43. Basic Miles\/km - Warrany Kms\n44. Basic Years - Warranty years\n45. Corrosion Miles\/km - Warranty against corrosion\n46. Corrosion Years - Warranty against corrosion in years\n47. Drivetrain Miles\/Km - Warranty for drivetrain\n48. Drivetrain Years - Warranty for drivetrain in years\n49. Turning Diameter Curb to Curb(ft) -Diameter of the smallest circular turn by the car \n50. Front Wheel Material - Material in which wheel is made up of\n51. Front Tire Size - Width , Aspect ratio , Speed rating , Rim size \n52. Stabilizer Bar Diameter - Front (in) - Diameter of the front sway bar\n53. Roadside assistance in years - Roadside assistance provided in terms of years\n54. Roadside Assistance Miles\/km - Roadside assistance provided in terms of km","8e9996a6":"#### Horsepower","cec6034e":"##### Transmission type (No of gears)","9d4db5d7":"##### Price","12a34394":"##### Sway Bar","e4116510":"##### Wheels","836a5933":"##### One hot Encoding all categorical columns","bce688bf":"List of cars in which turning radius is given as turning diameter : \n    * Hyundai Sonata\n    * Hyundai Accent\n    * Kia Niro\n    * Lexus LS\n    * Mazda MAZDA3\n    * Maxda MX-5\n\nSince Ram ProMaster is a full size van it can have turning diamter above 80 feet ","095220cd":"#### Turning Diamter","ae903a88":"##### Engine","6fa976ef":"#### Displacement","2248d789":"#### Body Style","d37e8c69":"##### Overall height","eb4d1662":"##### Curb Weight"}}