{"cell_type":{"c76891bd":"code","05107cc2":"code","70d7a8c4":"code","08f2b314":"code","d74e555e":"code","9e6c9487":"code","4ff404ca":"code","95d3bfbc":"code","168dfbe9":"code","8ae252f4":"code","2ea55924":"code","37a09357":"code","033c1d90":"code","4caa8801":"code","6e58a5b6":"code","629e5b47":"code","4a0b7b5d":"code","d2c70ad3":"code","69e0c331":"code","c1b441d5":"code","e69f19b7":"code","971251f0":"code","4fed4c80":"code","4afb2f49":"markdown","907d460c":"markdown","6b4029a2":"markdown","5702ad4b":"markdown","1d026e81":"markdown","d15439d1":"markdown","4d1acf77":"markdown","6a8a1468":"markdown","93538f7c":"markdown","5a6a694f":"markdown","6306d7eb":"markdown","3ba00cba":"markdown","f641718f":"markdown","3a8aca0b":"markdown"},"source":{"c76891bd":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set(style=\"whitegrid\")\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","05107cc2":"df=pd.read_csv('..\/input\/noshowappointments\/KaggleV2-May-2016.csv') ## read data \ndf.head() ## explor data","70d7a8c4":"df.shape ","08f2b314":"df.info()","d74e555e":"df[\"ScheduledDay\"]= pd.to_datetime(df[\"ScheduledDay\"]) \ndf[\"AppointmentDay\"]= pd.to_datetime(df[\"AppointmentDay\"])  # covert to date object\ndf[\"AppointmentDay\"].dtypes,df[\"ScheduledDay\"].dtypes #check data type","9e6c9487":"df['diff_days']=df[\"AppointmentDay\"]-df[\"ScheduledDay\"] # caculate the period between scheduled day and appointment day \ndf['diff_days'].value_counts()","4ff404ca":"df.head(10)","95d3bfbc":"df_temp1=df[df.diff_days >= pd.to_timedelta(0)]\ndf_temp1  # remove minus period                #   df_temp1 to use in Q1","168dfbe9":"df_temp1['diff_days']=df_temp1['diff_days'].dt.days  # convert period to days","8ae252f4":"df_temp1['diff_days'].unique()","2ea55924":"df_temp2=df_temp1.groupby(['diff_days','No-show'])['PatientId'].count().reset_index()\n","37a09357":"sns.set_context(\"notebook\", font_scale=1.1)\nsns.set_style(\"ticks\")\nf, ax = plt.subplots(figsize=(10, 30))\ndf_temp2=df_temp1.groupby(['diff_days','No-show'])['PatientId'].count().reset_index()\n\nax = sns.scatterplot(x=\"diff_days\",y=\"PatientId\", hue=\"No-show\", data=df_temp2)\nplt.title('Number of days for waiting and attending the appiontment')\n\n# Set x-axis label\nplt.xlabel('Period in days')\n\n# Set y-axis label\nplt.ylabel('Number of Patient')","033c1d90":"df_temp3=df_temp2[(df_temp2['No-show']=='No')]   # for just who attend\nf, ax = plt.subplots(figsize=(10, 30))\nax = sns.scatterplot(x=\"diff_days\",y=\"PatientId\", data=df_temp3)\nplt.title('Number of days for waiting and attending the appiontment')\n\n# Set x-axis label\nplt.xlabel('Period')\n\n# Set y-axis label\nplt.ylabel('Number of Patient')","4caa8801":"sns.distplot(df_temp2['diff_days']);\nplt.xlabel('Period')","6e58a5b6":"df.age.value_counts()","629e5b47":"def age_stage(x):                              # Divide the age into stages\n    if ((x>0 ) and (x<16)): x= \"Child\"\n    elif((x>=16) and (x<30)): x=\"age from 16 to 29\"\n    elif((x>=30) and (x<40)): x=\"age from 30 to 39\"\n    elif((x>=40) and (x<50)): x=\"age from 40 to 49\"\n    elif((x>=50) and (x<60)): x=\"age from 50 to 59\"\n    elif((x>=60) and (x<70)): x=\"age from 60 to 69\"\n    elif((x>=70) and (x<80)): x=\"age from 70 to 79\"    \n    else: x=\"age from 79 to 100\"\n    return x;\n        \ndf['age_stage']=df['Age'].apply(lambda x : age_stage(x))\ndf.head(5)","4a0b7b5d":"df_temp4=df.groupby(['age_stage','No-show'])['PatientId'].count().reset_index()  #df_temp4 for Q2\ndf_temp4.head()","d2c70ad3":"sns.set(style=\"whitegrid\")\nf, ax = plt.subplots(figsize=(20, 10))\nsns.barplot(x=\"age_stage\", y=\"PatientId\", hue=\"No-show\",ax=ax,data=df_temp4,dodge=False);\nplt.title('Age stages and number of Patient regards attend the appointments')\n\n# Set x-axis label\nplt.xlabel(' Age stage')\n\n# Set y-axis label\nplt.ylabel('Number of Patient')","69e0c331":"df_temp5=df.groupby('No-show',as_index=False)['Scholarship','Hipertension','Diabetes','Alcoholism','Handcap','SMS_received'].sum()# for Q3","c1b441d5":"df_temp5.head()","e69f19b7":"df_temp=df_temp5.T.reset_index()          # make the coulmns as rows to compare between many variables \ndf_temp.columns=['index','No','Yes']\n\ndf_temp","971251f0":"df_temp.drop(index=0,inplace=True) # remove No-show row\ndf_temp.head()","4fed4c80":"\nf, ax = plt.subplots(figsize=(20, 15))\nlabels=df_temp['index'].values\nY=df_temp['Yes'].values\nX=np.arange(len(labels))\nwidth=0.4\n\nYes=ax.barh(X,Y,width,label='not Attend')\n\n######\nY=df_temp['No'].values\nNo=ax.barh((X+width),Y,width,label='Attend')\n\n\n\nax.set_xlabel('Number of Patient')\nax.set_title('Attend and many Variable')\nax.set_yticks(X)\nax.set_yticklabels(labels)\nax.legend(loc='best', fontsize=10)\n\n","4afb2f49":"<a id=\"age\"><\/a>\n### **Q2 relation between Attend on time and age stage**","907d460c":"<a id=\"conclusions\"><\/a>\n### Conclusions\n* All variables i tested i did not find any correlation between them and no_show except for long period of waiting and this represent small number of Patients *","6b4029a2":"# Medical Appointment No Shows\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","5702ad4b":"<a id='intro'><\/a>\n## Introduction \n> A person makes a doctor appointment, receives all the instructions and no-show. Who to blame?\n\n> **Questions**\n\n* What factors are important for us to know in order to predict if a patient will show up for their scheduled appointment?\n    <ul>\n<li><a href=\"#period\"> Q1 relation with perioud between Scheduled Day and appoimtment<\/a><\/li>\n<li><a href=\"#age\"> Q2 with Age stages<\/a><\/li>\n<li><a href=\"#var\"> Q3 witn many factors like Types of diseases and get sms message<\/a><\/li>\n<\/ul>\n     ","1d026e81":"<h4 style=\"color:red\"> there is not relation between age stage and attending Doctor appiontment Attendance and absenteeism ratios are approximately equal<\/h4>","d15439d1":"<a id=\"eda\"><\/a>\n## Exploratory Data Analysis\n> three Questions","4d1acf77":"<a id=\"period\"><\/a>\n## \u064e\u064eQ1\n> **The effect of the length of the waiting period on attendance at the  scheduled appointment**","6a8a1468":"<h5 style=\"color:red;\">there are not any null values<\/h5>\n<h5 style=\"color:blue;\">ScheduledDay and\tAppointmentDay  their  data type are object  we should convert to date  <\/h5> \n","93538f7c":"### General Properties","5a6a694f":"<a id='wrangling'><\/a>\n## Data Wrangling\n> Load data\n\n>Assess Data(data types,null values)","6306d7eb":"<a id=\"var\"><\/a>\n### Q3  Effect of several factors on attending doctor's appointments","3ba00cba":"<h5 style=\"color:red;\"> there are no relation between all these Variables and attend the  absenteeism ratios are approximately equal<\/h5>","f641718f":"> <h2 style=\"color:red;\"> Long waiting(more than 125 days) times The number of patients is few and absent from the appointment is > greater than attendance<\/h2>\n    \n> <h2 style=\"color:red;\">The average periods(from 75 to 125) are almost equal, with few patients <\/h2>\n    \n> <h2 style=\"color:red;\">In small periods, attendance increases with a large number of patients <\/h2>\n    ","3a8aca0b":"\n<h5 style=\"color:red\"> Most waiting times are less than 60 days <\/h5>"}}