{"cell_type":{"46bfcbaa":"code","12965c8e":"code","006fe537":"code","490aafa4":"code","0e413863":"code","14128f35":"code","c6ee3254":"code","32ef401f":"code","3ebc0ac3":"code","f10f10c0":"code","39690797":"code","8f3d8d76":"code","8d16f5b3":"code","b237f217":"code","2ab2e0dc":"markdown","bf769257":"markdown","e438bf07":"markdown","6b70ae37":"markdown","9af89889":"markdown","ff6fda9a":"markdown","8ad098a5":"markdown","0a7d5ee1":"markdown","29a4784e":"markdown","029dd436":"markdown","5d2b84e9":"markdown","65889d85":"markdown","b310f4ff":"markdown","9527d25e":"markdown","209e2cb9":"markdown","47568eba":"markdown"},"source":{"46bfcbaa":"# import pandas\nimport pandas as pd\n\n# import matplotlib\nimport seaborn as sns\n\n# display the data files linked to this notebook - input data files are available in the read-only \"\/kaggle\/input\/\" directory\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","12965c8e":"# import the data\nhouse_data = pd.read_csv('\/kaggle\/input\/uk-housing-prices-paid\/price_paid_records.csv')\n\n# display the data set to check it has imported correctly\nhouse_data","006fe537":"# display the info for the data set\nhouse_data.info()","490aafa4":"# create a new field Year from the first 4 characters of the Date of Transfer field\nhouse_data['Year']=house_data['Date of Transfer'].str[:4]\n\n# display the data to check\nhouse_data","0e413863":"# create a new data set called leeds_data where the Town\/City value is 'LEEDS'\n# adding .copy() to the command informs pandas to create a copy first - this is not essential in this example but is good practice in general when \"slicing\" a data set. \nleeds_data = house_data[house_data['Town\/City'] == 'LEEDS'].copy()\n\n# display the data set to show that it has been created correctly\nleeds_data","14128f35":"leeds_data.groupby('Year').agg({'Price': ['count','mean', 'std']})","c6ee3254":"# create a new data set with the mean price for each year for each property type\nleeds_year_type_data=leeds_data.groupby(['Property Type','Year'])['Price'].mean().reset_index()\n\n# display the data set\nleeds_year_type_data","32ef401f":"sns.relplot(kind='line', data=leeds_year_type_data, x='Year', y='Price', hue='Property Type', aspect=2);","3ebc0ac3":"# display the data for 'Other' sales\nleeds_data[leeds_data['Property Type']=='O']","f10f10c0":"# check if there are any sales of 'Other' properties of 'PPD type' A\nleeds_data[(leeds_data['Property Type']=='O') & (leeds_data['PPDCategory Type']=='A')]","39690797":"# drop the values that have type 'B'\nleeds_data2=leeds_data.drop(leeds_data[leeds_data['PPDCategory Type']=='B'].index)\n\n# display the data to check they have been dropped\nleeds_data2","8f3d8d76":"# recreate the data set of means grouped by year\nleeds_year_type_data2=leeds_data2.groupby(['Property Type','Year'])['Price'].mean().reset_index()\n\n# diplay the data set\nleeds_year_type_data2","8d16f5b3":"sns.relplot(kind='line', data=leeds_year_type_data2, x='Year', y='Price', hue='Property Type', aspect=2);","b237f217":"# display the unique values for the Town\/City field\n# house_data['Town\/City'].unique()","2ab2e0dc":"There are 1015 records (out of 252,680  sales). These all appear to have the `PPD Category Type` set as `B`. A simple query will check whether there are any of type `A`.","bf769257":"# MEI Data Science Taught Course\n\n# Lesson 1: House price data\n\nThe data for this lesson is from: the HM Land Registry https:\/\/www.gov.uk\/government\/organisations\/land-registry\/about. It shows the records of all house sales in the UK between 1995 and 2017 (over 22 million transactions).\n\nThis notebook is an example of working with a very big data set.\n\nThe first block of code imports some libraries and gets the path to the data.","e438bf07":"This shows that between 2000 and 2005 the mean cost of flats was higher than semi-detached houses but that since 2008 they have been sold for similar prices to terraced houses.","6b70ae37":"The next block of code imports the data.\n\n*Note that this will take longer than usual because of the size of the data set.*","9af89889":"# Exploratory Data Analysis\n\nIn this section you will explore how the average house price for a specific City (Leeds) has changed over the time period of this data set by find the mean price for each year and plotting a time series for different property types.","ff6fda9a":"This appears to be consistent with https:\/\/en.wikipedia.org\/wiki\/Affordability_of_housing_in_the_United_Kingdom which suggests that London median prices went from \u00a380,000 to \u00a3300,000 in a similar time frame.","8ad098a5":"## Exploring the sales for a different town or city","0a7d5ee1":"The data for *Other* sales appears very different from the data for detached, semi-detached, terraced and flats. You can explore whether it is appropriate to disregard these records. ","29a4784e":"All the data for 'Others' is PPD Category Type B: Additional Price Paid entry including transfers under a power of sale\/repossessions, buy-to-lets (where they can be identified by a Mortgage) and transfers to non-private individuals. In the context of house sales it is appropriate to disregard these data as they are not representative of conventional transactions.","029dd436":"## Extracting rows\nA new data set with just the sales from Leeds can be constructed.","5d2b84e9":"Make a new data set of just the property sales of type A: Standard Price Paid entry, includes single residential property sold for full market value.","65889d85":"Generate a new table with the mean for each property type for each year.","b310f4ff":"## Exploring the mean and standard deviation for the price grouped by year","9527d25e":"Make a new dataset of the means.","209e2cb9":"### Exploring the mean price for different property types","47568eba":"## Adding a derived field\nThe `Date of Transfer` field gives the date of sale in the yyyy-mmm-dd hh:mm format. The first 4 characters of this are the year of sale and this can be extracted and written to a new field: `Year`."}}