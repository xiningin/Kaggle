{"cell_type":{"ac0cb24d":"code","2d687e6f":"code","c3ad1763":"code","da767e33":"code","7c9e45db":"code","398a0f8e":"code","4fc05438":"code","ad219328":"code","9e99842f":"code","d93ab784":"code","087d25cb":"code","f14f5a68":"code","7a646b2b":"code","6c5ccd93":"code","fc91521a":"code","a3753739":"code","6df4a5e5":"code","e55d6aed":"code","c9f20b86":"code","f9263206":"code","e9c09f3e":"code","b4a9972b":"code","3fcb7f0c":"code","e14de6e0":"code","8e5ad222":"code","58a0d678":"code","a7a70ba8":"code","dee919d1":"code","b04af4f2":"code","7c97ef0a":"code","3843f645":"code","8e746200":"code","ff9c0adf":"code","2bb3ceb7":"code","96a20d2b":"markdown","ce7cdcd8":"markdown","9819bdc0":"markdown","a64f69f1":"markdown","e47c2c4d":"markdown","603df162":"markdown","1cfcf870":"markdown","11b92334":"markdown","e892a265":"markdown","a63a7218":"markdown","4439c664":"markdown","93739759":"markdown","85f4d6e9":"markdown","04952cb3":"markdown","5ed7f9d4":"markdown","007669b1":"markdown","fd62e5d4":"markdown","0d7f31a1":"markdown","4e7e1b28":"markdown","df755cf7":"markdown","116b0e9b":"markdown","a54f2c2e":"markdown","4c531be7":"markdown","7291ed04":"markdown","420ba7e4":"markdown","f3dc258b":"markdown","23586463":"markdown"},"source":{"ac0cb24d":"!pip install apyori","2d687e6f":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport missingno as msno\nfrom apyori import apriori\nfrom mlxtend.frequent_patterns import apriori\nfrom mlxtend.frequent_patterns import association_rules","c3ad1763":"data=pd.read_csv('..\/input\/the-bread-basket\/bread basket.csv')  ","da767e33":"data.head()","7c9e45db":"data.shape","398a0f8e":"data.describe()","4fc05438":"data.info()","ad219328":"data.isnull().sum()","9e99842f":"msno.bar(data, color = 'purple', figsize = (10,8))  # Check the missing values in test data","d93ab784":"data['date_time']=pd.to_datetime(data['date_time'])","087d25cb":"data['date']=data['date_time'].dt.date\n","f14f5a68":"data['time']=data['date_time'].dt.time","7a646b2b":"data['month']=data['date_time'].dt.month\n\ndata['month'] = data['month'].replace((1,2,3,4,5,6,7,8,9,10,11,12), \n                                          ('January','February','March','April','May','June','July','August',\n                                          'September','October','November','December'))","6c5ccd93":"data['day']=data['date_time'].dt.weekday\n\ndata['day'] = data['day'].replace((0,1,2,3,4,5,6), \n                                          ('Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'))","fc91521a":"data['hour']=data['date_time'].dt.hour\n","a3753739":"data.drop('date_time', axis = 1, inplace = True)\n","6df4a5e5":"data.head()","e55d6aed":"coutbyhour=data.groupby('hour')['Transaction'].count().reset_index()\ncoutbyhour.sort_values('hour',inplace=True)\n\nfig = plt.figure(figsize=(12,5))\nsns.barplot(x=coutbyhour['hour'], y=coutbyhour['Transaction'])\nplt.xlabel('Hour')\nplt.ylabel('Transaction')\nplt.title('Transaction per hour of the day')\nplt.show()","c9f20b86":"coutbyweekday=data.groupby('period_day')['Transaction'].count().reset_index()\ncoutbyweekday.sort_values('period_day',inplace=True)\n\nplt.figure(figsize=(12,5))\nsns.countplot(data['period_day'])\nplt.xlabel('period_day')\nplt.ylabel('Transaction')\nplt.title('Transaction by  period_day')\nplt.show()","f9263206":"coutbydayp=data.groupby('day')['Transaction'].count().reset_index()\ncoutbydayp.sort_values('day',inplace=True)\n\nplt.figure(figsize=(12,5))\ndata['day'].value_counts(dropna = False).plot.bar(color=['darkcyan','lightblue','blue','aquamarine', 'cyan','red', 'green'])\nplt.xlabel('day')\nplt.ylabel('Transaction')\nplt.title('Transaction per day of the week')\nplt.show()\n\n\n","e9c09f3e":"data['weekday_weekend'].value_counts()","b4a9972b":"size = [12807, 7700]\nlabels = \"weekday\", \"weekend\"\ncolors = [\"cyan\", \"lightblue\"]\nexplode = [0, 0.1]\n\n\nplt.figure(figsize=(12,5))\nplt.pie(size, labels = labels, colors = colors, explode = explode, shadow = True, autopct = \"%.2f%%\")\nplt.xlabel('weekday_weekend')\nplt.ylabel('Transaction')\nplt.title('Transaction by week period')\nplt.show()","3fcb7f0c":"coutbymonth=data.groupby('month')['Transaction'].count().reset_index()\ncoutbymonth.sort_values('month',inplace=True)\n\nfig = plt.figure(figsize=(12,5))\nsns.barplot(x=coutbymonth['month'], y=coutbymonth['Transaction'])\nplt.xlabel('month')\nplt.ylabel('Transaction')\nplt.title('Transaction per month')\nplt.show()","e14de6e0":"fig = plt.figure(figsize=(15,5))\n\nnames = data.Item.value_counts().head(25).index\nvalues = data.Item.value_counts().head(25)\nsns.barplot(x = names, y = values)\nplt.xticks(rotation=45)","8e5ad222":"from mlxtend.frequent_patterns import association_rules, apriori\n","58a0d678":"transactions = data.groupby(['Transaction', 'Item'])['Item'].count().reset_index(name ='Count')\ntransactions","a7a70ba8":"# making a mxn matrice where m=transaction and n=items and each row represents whether the item was in the transaction or not\ntable = transactions.pivot_table(index='Transaction', columns='Item', values='Count', aggfunc='sum').fillna(0)","dee919d1":"table.head()","b04af4f2":"# making a function which returns 0 or 1\n# 0 means item was not in that transaction, 1 means item present in that transaction\ndef hot_encode(x): \n    if(x==0): \n        return 0\n    if(x>0): \n        return 1","7c97ef0a":"# applying the function to the dataset\nfinal_table=table.applymap(hot_encode)","3843f645":"final_table.head()","8e746200":"# using the 'apriori algorithm' with min_support=0.01 (1% of 9465)\n# It means the item should be present in atleast 94 transaction out of 9465 transactions only when we considered that item in\n# frequent itemset\nfrequence = apriori(final_table, min_support=0.015, use_colnames=True)\nrules = association_rules(frequence, metric=\"lift\", min_threshold=1)","ff9c0adf":"# now making the rules from frequent itemset generated above\nrules.sort_values('confidence', ascending = False, inplace=True)\nrules","2bb3ceb7":"# arranging the data from highest to lowest with respect to 'confidence'\n\nrules.sort_values('confidence', ascending=False)","96a20d2b":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#000000;font-weight : bold;font-family:Papyrus\">3. Lift<\/h1>\n\nLift is the ratio between the confidence and support.\n\n\n![image.png](attachment:03d11f8b-6277-41b7-a9af-07aa121783e5.png)\n","ce7cdcd8":"\n<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Problem Statement \ud83c\udfaf<\/h1>\n\nIn this notebook, we will learn about APRIORI algorithm which is one of the most popular algo in Association Rule Learing.","9819bdc0":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">People prefer to order in weekdays <\/h1>","a64f69f1":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">\ud83d\udccc Import Dataset \ud83d\udcc1<\/h1>","e47c2c4d":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#000000;font-weight : bold;font-family:Papyrus\">1. Support<\/h1>\n\nThe support define about the frequently bought items or the combination of items frequently bought.\n![support.png](attachment:fe823f7b-3cfa-4f13-a22d-cc4ed935548e.png)\n\nSo with this, we can filter out the items that have a low frequency.","603df162":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">People perfer to order on saturday,friday. <\/h1>","1cfcf870":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Transaction by Day period  <\/h1>","11b92334":"![download.jfif](attachment:7598971d-235d-49ee-85c6-4cbf009eadfd.jfif)","e892a265":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">\ud83d\udccc Data Visualization  \ud83d\udcc8\ud83d\udcca <\/h1>","a63a7218":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Importing Libraries<\/h1>\n","4439c664":" <h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Transaction per day of the week<\/h1>","93739759":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">\ud83d\udccc Data Preprocessing <\/h1>","85f4d6e9":"\n<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Transaction by week period <\/h1>","04952cb3":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Conclusion: Most of the People prefer to order in morning and afternoon <\/h1>","5ed7f9d4":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">As per the above table we can analyse that coffee is an item that is very associated with other purched items in the bakery, such as toast,medialuana and pastry.<\/h1>","007669b1":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Association Rule Mining  \ud83d\udcdc\ud83d\udcdc<\/h1>\nAssociation Rule is a technique to define how items are associated to each other. There are three common ways to measure Association are:\n\n1. Support\n\n2. Confidence\n\n3. Lift","fd62e5d4":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Apriori Algorithm<\/h1>\n\nApriori is an algorithm used for Association Rule Mining. It searches for a series of frequent sets of items in the datasets. It builds on associations and correlations between the itemsets. It is the algorithm behind **\u201cYou may also like\u201d** where you commonly saw in recommendation platforms.\n\nIt is mainly used for **\"Market Basket Analysis\"\"** and helps to find those products that can be bought together.\nso let's go to implementing algo, we will use bread basket dataset.","0d7f31a1":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Top sold product <\/h1>","4e7e1b28":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Transaction per hour of the day <\/h1>","df755cf7":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Install apyori package<\/h1>\nBefore we begin our coding we need to install the apyori package.","116b0e9b":"<br>\n<h1 style = \"font-size:30px; font-family:Papyrus ; font-weight : bold; color : #045F5F; text-align: center; border-radius: 10px 15px;\"> \ud83d\udcda\ud83d\udcda Market Basket Analysis with Association Rule \ud83c\udf73 <\/h1>\n<br>","a54f2c2e":"![Apiori2.png](attachment:58fb22d4-d679-4fa2-96ce-b3a840bc6196.png)","4c531be7":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#000000;font-weight : bold;font-family:Papyrus\">2. Confidence<\/h1>\n\nThe Confidence define How often the items occur together.\n\n![image.png](attachment:9b8465fd-cf20-4364-9eba-fcf8ab1be51f.png)","7291ed04":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Top sold items were: Coffee, Bread, Tea\n\nitems with least sell:Tiffin,Jam<\/h1>","420ba7e4":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">If you find it is helpful,upvote it  \ud83d\udc4d \nHope you enjoy!!!   Happy Learning :)\n\nThank you. \ud83d\ude0a<\/h1>","f3dc258b":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">\ud83d\udcccApriori Algorithm <\/h1>","23586463":"<h1 style=\"background-color:#FFFFFF;font-size:20px;color:#F04C8B;font-weight : bold;font-family:Papyrus\">Transaction by Month <\/h1>"}}