{"cell_type":{"742d50fe":"code","a75c5dbd":"code","2b1c8dad":"code","27e52c39":"code","4c3addc5":"code","c38e8060":"code","2f3943ea":"code","6c58b028":"code","8e0f614d":"code","371c1bd2":"code","55e87971":"code","26373b73":"code","97e18d2b":"code","aeaf1db2":"code","05f7999c":"code","9a5dd5eb":"code","a9ba6190":"code","fa2c3d84":"code","b37f0132":"code","53fd7b62":"code","7ad246bd":"code","71d2f763":"code","22d36305":"code","962fc1bb":"code","7ffc04e3":"code","dc28af29":"code","9ecc5451":"code","4eaac81f":"code","2f91d331":"code","9df32eba":"code","384498ed":"code","6d3b0f99":"code","c5bedda8":"code","6f8361e3":"code","3fc671bd":"code","a30a93e6":"code","bd419ccf":"code","dfe3f12a":"code","34b7e7b4":"code","fe5ddde2":"code","e9c60be9":"code","a594ac6a":"code","bff36ebf":"code","853b37cb":"code","a5d8d10a":"code","64ecd22b":"code","8950f081":"code","3f6924dd":"code","cea0b998":"code","4fee72d6":"code","08ee41c4":"code","36be07c0":"code","c8e95526":"code","fa34c08e":"code","29014eb6":"code","8c7eed9d":"code","6fec85aa":"code","0ece9657":"markdown","3f0968b4":"markdown","f5072770":"markdown","0122f0a6":"markdown","ff3c80c1":"markdown","794a2107":"markdown","eb0f00eb":"markdown","46e8a8fc":"markdown","e72ee7e0":"markdown","9555aa3e":"markdown","b988a9d7":"markdown","b6cd919a":"markdown","a747360d":"markdown","81c8e4c5":"markdown","e246354d":"markdown","a29e39a2":"markdown","ef2d2387":"markdown","14d265e3":"markdown","3048f260":"markdown","7d918f3a":"markdown","d4f71480":"markdown","78ae7c87":"markdown","39961e5f":"markdown","e1ed82fc":"markdown","d50c94c1":"markdown","9a71c655":"markdown","7b5964ce":"markdown","2edc00ed":"markdown","b135b810":"markdown","a7ea38a8":"markdown","215e7a88":"markdown","a7a3e1f4":"markdown","7adeaaec":"markdown","d82bb105":"markdown","b83c920b":"markdown","a1ddf793":"markdown","86d30ee8":"markdown","d17ab200":"markdown","a503067b":"markdown","64c62159":"markdown","6ce60528":"markdown","3a492b68":"markdown","84585e6e":"markdown","37acb7d9":"markdown","4eecb72e":"markdown","364dd9c3":"markdown","eebb0e2e":"markdown","ba8cfaea":"markdown","89ede895":"markdown","8919eaee":"markdown","aa8ace85":"markdown","ade3dd9f":"markdown","bb8e585a":"markdown","2f5691c8":"markdown","555567c8":"markdown","22746401":"markdown","4daa3019":"markdown"},"source":{"742d50fe":"#importing the libraries that we use\nimport pandas as pd \nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas_profiling as pp\nfrom scipy import stats\nfrom scipy.stats import ttest_ind\nfrom statsmodels.stats.proportion import proportions_ztest\nimport statsmodels.api as sm\nfrom statsmodels.formula.api import ols\nfrom statsmodels.stats.multicomp import pairwise_tukeyhsd\nsns.set(color_codes=True) # adds a nice background to the graphs\n%matplotlib inline","a75c5dbd":"#reading data from csv file as dataframe\ndf = pd.read_csv(\"\/kaggle\/input\/insurance\/insurance.csv\")","2b1c8dad":"#Checking the first 5 records of loaded data \ndf.head()","27e52c39":"df.shape #shape of the data","4c3addc5":"df.info() #Get the total info of the dataframe","c38e8060":"df[\"children\"].value_counts() # Categorical variable","2f3943ea":"#Datatypes of each variable\ndf.dtypes","6c58b028":"df_num = df.loc[:,[\"age\",\"bmi\",\"charges\"]]\ndf_cat = df.loc[:,[\"sex\",\"children\",\"smoker\",\"region\"]]\ndf_num.head()","8e0f614d":"df_cat.head()","371c1bd2":"#Checking the presences of missing values\ndf.isnull().sum()","55e87971":"#5 point summary of numerical attributes\ndf_num.describe()","26373b73":"#Distribution of \u2018bmi\u2019 column.\nsns.distplot(df[\"bmi\"],color=\"Green\");\nplt.show()\nsns.violinplot(df[\"bmi\"],color=\"Orange\");\nplt.show()\nsns.distplot(df[\"bmi\"], hist_kws=dict(cumulative=True), kde_kws=dict(cumulative=True),color=\"cyan\")\nplt.show()","97e18d2b":"#Distribution of \u2018age\u2019 column.\nsns.distplot(df[\"age\"],color=\"Green\");\nplt.show()\nsns.violinplot(df[\"age\"],color=\"Orange\");\nplt.show()\nsns.distplot(df[\"age\"], hist_kws=dict(cumulative=True), kde_kws=dict(cumulative=True),color=\"cyan\")\nplt.show()","aeaf1db2":"#Distribution of 'charges' column.\nsns.distplot(df[\"charges\"],color=\"Green\");\nplt.show()\nsns.violinplot(df[\"charges\"],color=\"Orange\");\nplt.show()\nsns.distplot(df[\"charges\"], hist_kws=dict(cumulative=True), kde_kws=dict(cumulative=True),color=\"cyan\")\nplt.show()","05f7999c":"df_num.skew() #measures the skewness of every numerical attribute","9a5dd5eb":"sns.boxplot(df[\"bmi\"]);\nplt.show()","a9ba6190":"sns.boxplot(df[\"age\"]);\nplt.show()","fa2c3d84":"sns.boxplot(df[\"charges\"]);\nplt.show()","b37f0132":"df_cat.columns","53fd7b62":"sns.countplot(df_cat[\"sex\"]);","7ad246bd":"sns.countplot(df_cat[\"children\"]);\nplt.show()","71d2f763":"sns.countplot(df_cat[\"smoker\"]);","22d36305":"sns.countplot(df_cat[\"region\"]);","962fc1bb":"# Let us analyze categorical variables \"smoker\" and \"sex\" (as hue) with respect to \"charges\" as continuous variable\nsns.catplot(x=\"smoker\", y=\"charges\", hue=\"sex\", kind=\"box\", data=df);","7ffc04e3":"# Let us analyze categorical variables \"region\" and \"smoker\" (as hue) with respect to \"charges\" as continuous variable\nsns.catplot(x=\"region\", y=\"charges\", hue=\"smoker\", kind=\"box\", data=df);","dc28af29":"# Let us analyze categorical variables \"region\" and \"sex\" (as hue) with respect to charges as continuous variable\nsns.catplot(x=\"region\", y=\"charges\", hue=\"sex\", kind=\"box\", data=df);","9ecc5451":"sns.pairplot(df);","4eaac81f":"# Pairplot with smoker as hue\nsns.pairplot(data=df, hue='smoker');","2f91d331":"# Pairplot with sex as hue\nsns.pairplot(data=df, hue='sex');","9df32eba":"# Pairplot with region as hue\nsns.pairplot(data=df, hue='region');","384498ed":"pp.ProfileReport(df)","6d3b0f99":"df_cat[\"smoker\"].value_counts()","c5bedda8":"ppl_smoke_chrge = df[df[\"smoker\"]==\"yes\"][\"charges\"]","6f8361e3":"ppl_nosmoke_chrge = df[df[\"smoker\"]==\"no\"][\"charges\"]","3fc671bd":"print(f\"Mean of smoker charges: {np.mean(ppl_smoke_chrge)}\")\nprint(f\"Mean of non-smoker charges: {np.mean(ppl_nosmoke_chrge)}\")","a30a93e6":"print(f\"Std of smoker charges {np.std(ppl_smoke_chrge)}\")\nprint(f\"Std of non-smoker charges {np.std(ppl_nosmoke_chrge)}\")","bd419ccf":"t_statistic,pval = ttest_ind(ppl_smoke_chrge,ppl_nosmoke_chrge)","dfe3f12a":"print('P Value ',pval)    ","34b7e7b4":"if pval <0.05:\n  print(\"Since pval is very much less than significance level we tend to reject null hypothesis\")\nelse:\n  print(\"we Fail to reject null hypothesis\")","fe5ddde2":" df_cat[\"sex\"].value_counts()","e9c60be9":"bmi_male = df[df[\"sex\"]==\"male\"][\"bmi\"]\nbmi_female = df[df[\"sex\"]==\"female\"][\"bmi\"]","a594ac6a":"print(f\"Mean of bmi male: {np.mean(bmi_male)}\")\nprint(f\"Mean of bmi female: {np.mean(bmi_female)}\")\nprint(f\"Std of bmi male: {np.std(bmi_male)}\")\nprint(f\"Std of bmi female: {np.std(bmi_female)}\")","bff36ebf":"z_statistic,pval = ttest_ind(bmi_male,bmi_female)","853b37cb":"print('P Value ',pval)","a5d8d10a":"if pval <0.05:\n  print(\"Since pval is very much less than significance level we tend to reject null hypothesis\")\nelse:\n  print(\"we Fail to reject null hypothesis\")","64ecd22b":"female_smokers = df[df['sex'] == 'female'].smoker.value_counts()[1]  # number of female smokers\nmale_smokers = df[df['sex'] == 'male'].smoker.value_counts()[1] # number of male smokers\nn_females = df.sex.value_counts()[1] # number of females in the data\nn_males = df.sex.value_counts()[0] #number of males in the data","8950f081":"print([female_smokers, male_smokers] , [n_females, n_males])\nprint(f' Proportion of smokers in females, males = {round(115\/662,2)}%, {round(159\/676,2)}% respectively')","3f6924dd":"stat, pval = proportions_ztest([female_smokers, male_smokers] , [n_females, n_males])\n\nif pval < 0.05:\n    print(f'With a p-value of {round(pval,4)} the difference is significant. aka |We reject the null|')\nelse:\n    print(f'With a p-value of {round(pval,4)} the difference is not significant. aka |We fail to reject the null|')","cea0b998":"df['sex'].value_counts()","4fee72d6":"bmi_w_noc = df[(df['sex']=='female') & (df['children']==0)].bmi\nbmi_w_1c = df[(df['sex']=='female') & (df['children']==1)].bmi\nbmi_w_2c = df[(df['sex']=='female') & (df['children']==2)].bmi","08ee41c4":"sns.distplot(bmi_w_noc);\nplt.title(\"Distribution of BMI of women with no children\")\nplt.show()","36be07c0":"sns.distplot(bmi_w_1c);\nplt.title(\"Distribution of BMI of women with One children\")\nplt.show()","c8e95526":"sns.distplot(bmi_w_2c);\nplt.title(\"Distribution of BMI of women with Two children\")\nplt.show()","fa34c08e":"bmi_df = pd.DataFrame()\n\ndf1 = pd.DataFrame({'women': 'NoChild', 'bmi':bmi_w_noc})\ndf2 = pd.DataFrame({'women': 'OneChild', 'bmi':bmi_w_1c})\ndf3 = pd.DataFrame({'women': 'TwoChild', 'bmi':bmi_w_2c})\n\nbmi_df = bmi_df.append(df1) \nbmi_df = bmi_df.append(df2) \nbmi_df = bmi_df.append(df3)","29014eb6":"sns.boxplot(x = \"women\", y = \"bmi\", data = bmi_df)\nplt.title('BMI of women with children')\nplt.show()","8c7eed9d":"mod = ols('bmi ~ women', data = bmi_df).fit()\naov_table = sm.stats.anova_lm(mod, typ=2)\nprint(aov_table)","6fec85aa":"print(pairwise_tukeyhsd(bmi_df['bmi'], bmi_df['women']))","0ece9657":"**Since the standard deviation of the population in not known we carryout independent t test**","3f0968b4":".","f5072770":"###  Null and alternative hypothesis\n","0122f0a6":"Here we have three groups. Analysis of variance can determine whether the means of three or more groups are different. ANOVA uses F-tests to statistically test the equality of means.","ff3c80c1":"***Above changes*** plot shows Existence of outlier","794a2107":"### Count plot of Children column","eb0f00eb":"### Significance Level \nHere we select $\\alpha$ = 0.05","46e8a8fc":"#### Ho = The proportions are equal\n#### Ha = The two proportions are not equal","e72ee7e0":"##### Conclusion","9555aa3e":"### Describe the five point summary","b988a9d7":".","b6cd919a":"* $H_0$: $\\mu{BmiMale}$ - $\\mu{BmifeMale}$ =      0\n* $H_A$: $\\mu{BmiMale}$ - $\\mu{BmifeMale}$ $\\neq$  0","a747360d":"The proportions are different but are they statistically significant?","81c8e4c5":"## Distribution of Columns bmi,age,charges","e246354d":"**Positively skewed:** Most frequent values are low and tail is towards high values.\n\n**Negatively skewed:** Most frequent values are high and tail is towards low values.\n\nIf **Mode< Median< Mean** then the distribution is positively skewed.\n\nIf **Mode> Median> Mean** then the distribution is negatively skewed.","a29e39a2":"## Objective:\nWe want to see if we can dive deep into this data to find some valuable insights.","ef2d2387":"### calculate p value using Anova","14d265e3":"## Pair plot of all the columns","3048f260":"Here $\\mu1$, $\\mu2$ and $\\mu3$ are the mean of bmi of women with no children, one children and two children respectively.","7d918f3a":"**No the bmi of males donot differ significantly from that of females**\n\n**BMI of males and female are equal**","d4f71480":".","78ae7c87":"#### Conclusion\n\n***Yes the Proportion of smokers significantly different in different genders***","39961e5f":"## Profile report of the complete dataframe","e1ed82fc":"### Significance Level ","d50c94c1":"* $H_0$: $\\mu{SMC}$ - $\\mu{NSMC}$ =      0\n* $H_A$: $\\mu{SMC}$ - $\\mu{NSMC}$ $\\neq$  0","9a71c655":"#### Significance level \n$\\alpha$ = 0.05 ","7b5964ce":"## Attribute Information:\n\nage: age of primary beneficiary\n\nsex: insurance contractor gender, female, male\n\nbmi: Body mass index, providing an understanding of body, weights that are relatively high or low relative to height, objective index of body weight (kg \/ m ^ 2) using the ratio of height to weight, ideally 18.5 to 24.9\n\nchildren: Number of children covered by health insurance \/ Number of dependents\n\nsmoker: Smoking\n\nregion: the beneficiary's residential area in the US, northeast, southeast, southwest, northwest.\n\ncharges: Individual medical costs billed by health insurance.","2edc00ed":"## Shape of each column","b135b810":"### END","a7ea38a8":"### Is the proportion of smokers significantly different in different genders?","215e7a88":"##### P value 0.7158  is greater than 0.05. So we are unable to reject null hypothesis .\n***Hence the mean and distribution of bmi across women with no child,1child and 2 child are same***","a7a3e1f4":"### Count plot of Sex column","7adeaaec":"### Do charges of people who smoke differ significantly from the people who don't?\n","d82bb105":"### Count plot of region column","b83c920b":"**Yes the charges of people who smoke differ significantly from the people who don't**","a1ddf793":"### Datatypes of each column","86d30ee8":"### Boxplots\n\nThis kind of plot shows the three quartile values of the distribution along with extreme values. The \u201cwhiskers\u201d extend to points that lie within 1.5 IQRs of the lower and upper quartile, and then observations that fall outside this range are displayed independently(outliers). ","d17ab200":"## Does bmi of males differ significantly from that of females?","a503067b":"#### The boxplot shows mostly same mean but mean slightly differs at women with two children. Let check it statistically","64c62159":"Here we select $\\alpha$ = 0.05","6ce60528":"* $H_0$: $\\mu1$ = $\\mu2$ = $\\mu3$\n* $H_A$: At least one $\\mu$ differs \n","3a492b68":"### Count plot of Smoker column","84585e6e":"## Checking the missing values in all the Columns","37acb7d9":"# Distribution of categorical columns (include children)","4eecb72e":"## Checking the presence of outliers","364dd9c3":"***Above bmi*** plot shows the existence outliers","eebb0e2e":"***We are able to see the reject is false in every case so the distribution of bmi across women with 0,1,2children are same***","ba8cfaea":"##### Conclusion","89ede895":"### Significance Level\nHere we select $\\alpha$= 0.05","8919eaee":"***Above age*** plot shows no outlier","aa8ace85":".","ade3dd9f":"###  Null and alternative hypothesis\n","bb8e585a":"## Statistical Analysis","2f5691c8":".","555567c8":"<span style=\"font-family: Arial; font-weight:bold;font-size:1.5em;color:#00b3e5;\"> Checking the Skewness","22746401":".","4daa3019":"### Is the distribution of bmi across women with no children, one child and two children, the same?"}}