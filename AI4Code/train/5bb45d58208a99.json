{"cell_type":{"bdae8b70":"code","5e7188ed":"code","61b05d36":"code","c438f119":"code","06a8a557":"code","b5b87159":"code","73cf463a":"code","03f1f1d2":"code","9c4a0d1c":"code","8759b75b":"code","2f6a4c80":"code","8c9bedf0":"code","d2034636":"code","a9fed68e":"code","f2719719":"code","e7c18520":"code","620b4ca5":"code","6c7f0700":"code","bf0027a9":"code","a82b8c84":"code","23eb2ba4":"code","93c0f33f":"code","6c4bf9ce":"code","46a02500":"code","b5cd7495":"code","de9f5589":"code","90b2b8f7":"code","6ec3d69e":"code","4b2d4021":"code","485a856b":"code","3b063724":"code","3e50d928":"code","45f81fe5":"code","73705194":"code","267f0c26":"code","81a46eca":"code","a5535cfc":"code","c05509e0":"code","84575853":"code","e620a11f":"code","4076bfd2":"code","13f1d450":"markdown","13af9a5c":"markdown","7c510531":"markdown","3c514c3d":"markdown","de8b97b4":"markdown","785bfd65":"markdown","69c34446":"markdown","a19efe0c":"markdown","3a913b75":"markdown","a13c40b9":"markdown","6dc6c2aa":"markdown","d00be2a0":"markdown","638542d3":"markdown","61c3eb0a":"markdown","93e467e6":"markdown","980cb977":"markdown","1828267d":"markdown","fc8da569":"markdown","5eb19aae":"markdown","f86861b6":"markdown","8bfbf032":"markdown","6e30e9ce":"markdown"},"source":{"bdae8b70":"#In this notebook,I am going to explain maximum about Matplotlib,Matplotlib Finance and Time Series Graphs from basic to advance.","5e7188ed":"#Installing mplfinance for matplotlib finance\n!pip install mplfinance","61b05d36":"#Importing Liabraries\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport numpy as np\nimport pandas as pd\nimport plotly.express as px\nimport random\nfrom pandas import read_csv\nfrom pandas import DataFrame\nfrom pandas import Grouper\nfrom pandas import concat\nfrom pandas.plotting import scatter_matrix\nfrom pandas.plotting import autocorrelation_plot\nimport mplfinance as fplt","c438f119":"# Create x & y NumPy arrays (10 Floats from 0 to 5)\n# Any NumPy array will do for x & y points as long as you have an equal number \nx_1 = np.linspace(0,5,10)\ny_1 = x_1**2","06a8a557":"# Display plot with x & y\nplt.plot(x_1, y_1)\n# Add a title\nplt.title('Days Squared Chart')\n# Add an X & Y Label\nplt.xlabel('Days')\nplt.ylabel('Days Squared')","b5b87159":"# Define the row and column to print the plot with a number assigned to the plot\nplt.subplot(1,2,1)\nplt.plot(x_1,y_1,'r')\nplt.subplot(1,2,2)\nplt.plot(y_1,x_1,'b')","73cf463a":"# You can define multiple plots with subplots and it handles creating the axes objects\n# axes_2 is a list of axes objects\nfig_2, axes_2 = plt.subplots(figsize=(8,4), nrows=1, ncols=3)\n# Put space between plots\nplt.tight_layout()\n# You can access the plots by index\naxes_2[1].set_title('Plot 2')\naxes_2[1].set_xlabel('X')\naxes_2[1].set_ylabel('X Squared')\naxes_2[1].plot(x_1,y_1)","03f1f1d2":"fig_3 = plt.figure(figsize=(6,4))\naxes_3 = fig_3.add_axes([0,0,1,1])\naxes_3.plot(x_1,y_1,color='navy', alpha=.75, lw=2, ls='-.',\n           marker='o', markersize=7, markerfacecolor='y',\n           markeredgecolor='y', markeredgewidth=4)\n# Set the lower and upper bound of x & y axis\naxes_3.set_xlim([0,3])\naxes_3.set_ylim([0,8])\n# Add a grid, color, dashes(5pts 1 pt dashes separated by 2pt space)\naxes_3.grid(True, color='0.6', dashes=(5, 2, 1, 2))\n# Set grid background color\naxes_3.set_facecolor('#FAEBD7')","9c4a0d1c":"# Analyze where France gets its electricity from\nx = ['Nuclear', 'Hydro', 'Coal', 'Gas', 'Solar', 'Wind', 'Other']\nper_1 = [71, 10, 3, 7, 2, 4, 3]\n# Chart variance in usage\nvariance = [8, 3, 1, 3, 1, 2, 1]\nplt.bar(x, per_1, color='purple', yerr=variance)","8759b75b":"# Show percentages of males & females in engineering\nm_eng = (76, 85, 86, 88, 93)\nf_eng = (24, 15, 14, 12, 7)\n# Get evenly spaced values for each interval\nspc = np.arange(5) \nplt.bar(spc, m_eng, width=0.45, label='Male', edgecolor='k')\nplt.bar(spc + 0.45, f_eng, width=0.45, label='Female', edgecolor='k')","2f6a4c80":"# Plot teachers by sex\nt_type = ['Kind', 'Elem', 'Sec', 'Spec']\nm_teach = np.array([2, 20, 44, 14])\nf_teach = np.array([98, 80, 56, 86])\nind = [x for x, _ in enumerate(t_type)]\n# Plot stacked bars for men and then women under\nplt.bar(ind, m_teach, width=0.45, label='Male', bottom=f_teach)\nplt.bar(ind, f_teach, width=0.45, label='Female')\nplt.legend(loc='lower right')","8c9bedf0":"fig_1 = plt.figure(figsize=(5,4),dpi=100)\n# Adds axes with a left, bottom, width and height that ranges from 0 to 1\naxes_1 = fig_1.add_axes([0.1,0.1,0.9,0.9])\n# Set lables and title\naxes_1.set_xlabel('Days')\naxes_1.set_ylabel('Days Squared')\naxes_1.set_title('Days Squared Chart')\n# Plot on the axes (If you want a label associated with the legend\n# add it with label)\naxes_1.plot(x_1,y_1,label='x \/ x\u00b2')\n# You can plot to plots using the same axes\naxes_1.plot(y_1,x_1,label='x\u00b2 \/ x')\n# Add the optional legend with a location number \naxes_1.legend(loc=0)\n# You can create axis inside of others\naxes_2 = fig_1.add_axes([0.45,0.45,0.4,0.3])\naxes_2.set_xlabel('Days')\naxes_2.set_ylabel('Days Squared')\naxes_2.set_title('Small Days Squared Chart')\naxes_2.plot(x_1,y_1,'r')\n# Add text to plot from central point of 0,0\naxes_2.text(0, 40, 'Message')","d2034636":"fig_5 = plt.figure(figsize=(5,4),dpi=100)\naxes_5 = fig_5.add_axes([0.1,0.1,0.9,0.9])\naxes_5.text(0, 23, \n            r'$\\alpha \\beta \\sigma \\omega \\epsilon \\mu \\pi \\theta \\lambda$', fontsize=18)\n# Subscripts, multiletter superscript, sum, fractions, binomial\naxes_5.text(0, 18, \n            r'$\\delta_i \\gamma^{ij} \\sum_{i=0}^\\infty x_i \\frac{3}{4} \\binom{3}{4}$', fontsize=18)\n# Another fraction, sqrt, cbrt, trig functions : \naxes_5.text(0, 13, \n            r'$\\frac{8 - \\frac{x}{5}}{3} \\sqrt{2} \\sin(\\pi) \\sqrt[3]{1} \\acute a \\div$', fontsize=18)\naxes_5.text(0, 8, \n            r'$\\bar a \\hat a \\tilde a \\vec a \\overline {a} \\lim_{x \\to 2} f(x) = 5$', fontsize=18)\naxes_5.text(0, 3, \n            r'$\\geq \\leq $', fontsize=18)\naxes_5.plot(x_1,y_1)","a9fed68e":"arr_1 = np.random.randint(1,7,5000)\narr_2 = np.random.randint(1,7,5000)\narr_3 = arr_1 + arr_2\nplt.hist(arr_3, bins=11, density=True, stacked=True)","f2719719":"fig_6 = plt.figure(figsize=(8,5),dpi=100)\naxes_6 = fig_6.add_axes([0.1,0.1,0.9,0.9])\n# Create a pie chart of the number of Pokemon by type\ntypes = ['Water', 'Normal', 'Flying', 'Grass', 'Psychic', 'Bug', 'Fire', 'Poison',\n'Ground', 'Rock', 'Fighting', 'Dark', 'Steel', 'Electric', 'Dragon', 'Fairy','Ghost', 'Ice']\npoke_num = [133, 109, 101, 98, 85, 77, 68, 66, 65, 60, 57, 54, 53, 51, 50, 50, 46, 40]\n# Generate a random color array \ncolors = []\nfor i in range(18):\n    rgb = (random.uniform(0, .5), random.uniform(0, .5), random.uniform(0, .5))\n    colors.append(rgb)\n    \n# Explode biggest 1st slice\nexplode = [0] * 18\nexplode[0] = 0.2\n\n# Provide values, what to explode and by how much, labels, colors, pct for values,\n# whether to shadow, amount to rotate pie, pie text color\nwedges, texts, autotexts = plt.pie(poke_num, explode=explode, labels=types, colors=colors, \n                                   autopct='%1.0f%%', shadow=True, startangle=140, \n                                   textprops=dict(color=\"w\"))\n# Create legend to right and move off pie with 1-1.5 axes point width\nplt.legend(wedges, types, loc='right', bbox_to_anchor=(1, 0, 0.5, 1))","e7c18520":"# Country array\ncnt_arr = np.array(['Australia','Brazil','Canada','Chile','France','Germany','Greece',\n                   'Iceland','India','Iran','Italy','Mexico','New Zealand','Nigeria',\n                   'Norway','Pakistan','Peru','Russia','Saudi Arabia','Singapore',\n                   'South Africa','Spain','Sweden','Turkey','UK','US'])\n# Death rate per 100k Coronavirus\ndr_arr = np.array([1.8,53,24.5,56.5,45.4,11.2,2.2,\n                   2.8,4,24.6,58.6,46.3,.5,.5,\n                   4.9,2.9,83.3,11,10.4,.5,\n                   21.5,61.6,56.9,7.3,62.4,52.9])\n# Daily confirmed cases (Tests)\ntest_arr = np.array([110,7197,600,1862,1636,1103,35,\n                   10,295,1658,1226,2490,8,243,\n                   48,1395,1101,4447,1443,280,\n                   2830,1602,447,1205,1546,24988])\n# Dot size Confirmed cases\ncc_arr = np.array([24236,3456652,125408,390037,256534,229706,7684,\n                   2035,2836925,350279,255278,537031,1654,50488,\n                   10162,290445,549321,935066,302686,56031,\n                   596060,370867,85411,253108,323008,5529824])\ncc_arr_sm = cc_arr \/ 1000\ncolor_arr = np.random.rand(26)\n\nplt.title('Death Rate per 100k vs. Confirmed Cases')\nplt.xlabel('Death Rate per 100k')\nplt.ylabel('Confirmed Cases')\nplt.scatter(dr_arr,test_arr,s=cc_arr_sm,c=color_arr,alpha=0.5)","620b4ca5":"# Needed for creating 3D axes\nfrom mpl_toolkits import mplot3d\n\nfig_9 = plt.figure(figsize=(8,5),dpi=100)\naxes_9 = fig_9.add_axes([0.1,0.1,0.9,0.9], projection='3d')\n\n# Create a 3D scatterplot\n# Te darker points are represented that way to seem closer to you\nz_3 = 15 * np.random.random(100)\nx_3 = np.sin(z_3) * np.random.randn(100)\ny_3 = np.cos(z_3) * np.random.randn(100)\n# axes_9.scatter3D(x_3, y_3, z_3, c=z_3, cmap='Blues')\n\n# You can create contour plots by defining a function for z based on x & y\ndef get_z(x, y):\n    return np.sin(np.sqrt(x**2 + y**2))\n\nx_4 = np.linspace(-6, 6, 30)\ny_4 = np.linspace(-6, 6, 30)\n\n# Creates a rectangular grid out of 2 given 1D arrays\nx_4, y_4 = np.meshgrid(x_4, y_4)\nz_4 = get_z(x_4,y_4)\n\n# Change viewing angle to reorient camera 60 degrees and rotate 55\naxes_9.view_init(45,55)\naxes_9.set_xlabel('x')\naxes_9.set_ylabel('y')\naxes_9.set_zlabel('z')\n\n# You can create wireframes\n# axes_9.plot_wireframe(x_4,y_4,z_4,color='blue')\n\n# You can create surface plots which is wireframe with filled faces\naxes_9.plot_surface(x_4,y_4,z_4, rstride=1, cstride=1,cmap='Blues',edgecolor='none')","6c7f0700":"# A heatmap is a color coded representation of data from a 2D list\nsymptoms = [\"Coronavirus\",\"Influenza\",\"Pneumonia\",\"Dyspnea\"]\ndates = [\"Jun28\",\"Jul05\",\"Jul12\",\"Jul19\",\"Jul26\",\"Aug02\",\"Aug09\",\"Aug16\",\"Aug21\"]\nsymp_per = np.array([[5.2, 5.5, 5.7, 5.6, 5.3, 5.1, 5.0, 4.9, 5.3],\n                    [3.5, 4.0, 4.3, 3.9, 3.5, 3.2, 2.7, 2.2, 2.0],\n                    [1.8, 2.2, 2.3, 2.2, 2.1, 1.9, 1.7, 1.4, 1.3],\n                    [1.0, 1.1, 1.1, 1.0, 0.9, 0.8, 0.8, 0.8, 0.7]])\n\nfig_10, axes_10 = plt.subplots()\n# Dfine data to use and color map\nim = axes_10.imshow(symp_per, cmap=\"Wistia\")\n\n# Add ticks at data points and labels\naxes_10.set_xticks(np.arange(len(dates)))\naxes_10.set_yticks(np.arange(len(symptoms)))\naxes_10.set_xticklabels(dates)\naxes_10.set_yticklabels(symptoms)\n\n# Rotate labels on the bottom so they don't overlap\nplt.setp(axes_10.get_xticklabels(), rotation=45, ha=\"right\",\n         rotation_mode=\"anchor\")\n\n# Loop over data dimensions and create text annotations.\nfor i in range(len(symptoms)):\n    for j in range(len(dates)):\n        text = axes_10.text(j, i, symp_per[i, j],\n                       ha=\"center\", va=\"center\", color=\"k\",fontweight=\"bold\")","bf0027a9":"#Importing dataset for Time Series Graphs\nseries = pd.read_csv('..\/input\/daily-minimum-temperatures\/daily-minimum-temperatures.csv', header=0, index_col=0, parse_dates=True, squeeze=True)\nseries.head()","a82b8c84":"from pandas import read_csv\nfrom matplotlib import pyplot\nseries.plot()\npyplot.show()","23eb2ba4":"#Modifying Line Plot\nseries.plot(style='k.')\npyplot.show()","93c0f33f":"#Sub-plots\ngroups = series.groupby(Grouper(freq='A'))\nyears = DataFrame()\nfor name, group in groups:\n years[name.year] = group.values\nyears.plot(subplots=True, legend=False)\npyplot.show()","6c4bf9ce":"series.hist()\npyplot.show()","46a02500":"series.plot(kind='kde')\npyplot.show()","b5cd7495":"groups = series.groupby(Grouper(freq='A'))\nyears = DataFrame()\nfor name, group in groups:\n years[name.year] = group.values\nyears.boxplot()\npyplot.show()","de9f5589":"# create a boxplot of monthly data\none_year = series['1990']\ngroups = one_year.groupby(Grouper(freq='M'))\nmonths = concat([DataFrame(x[1].values) for x in groups], axis=1)\nmonths = DataFrame(months)\nmonths.columns = range(1,13)\nmonths.boxplot()\npyplot.show()","90b2b8f7":"groups = series.groupby(Grouper(freq='A'))\nyears = DataFrame()\nfor name, group in groups:\n years[name.year] = group.values\nyears = years.T\npyplot.matshow(years, interpolation=None, aspect='auto')\npyplot.show()","6ec3d69e":"values = DataFrame(series.values)\nlags = 7\ncolumns = [values]\nfor i in range(1,(lags + 1)):\n columns.append(values.shift(i))\ndataframe = concat(columns, axis=1)\ncolumns = ['t+1']\nfor i in range(1,(lags + 1)):\n columns.append('t-' + str(i))\ndataframe.columns = columns\npyplot.figure(1)\nfor i in range(1,(lags + 1)):\n ax = pyplot.subplot(240 + i)\n ax.set_title('t+1 vs t-' + str(i))\n pyplot.scatter(x=dataframe['t+1'].values, y=dataframe['t-'+str(i)].values)\npyplot.show()","4b2d4021":"autocorrelation_plot(series)\npyplot.show()","485a856b":"#Importing dataset for Matplotlib Finance\napple_df = pd.read_csv('..\/input\/aaplcsv\/AAPL.csv', index_col=0, parse_dates=True)\napple_df.head()","3b063724":"#Simple candlestick \nfplt.plot(\n            apple_df,\n            type='candle',\n            title='Candlestick Chart',\n            ylabel='Price ($)'\n        )","3e50d928":"#We can chose any one style\nfplt.available_styles()","45f81fe5":"#Here we use classic as style\nfplt.plot(\n            apple_df,\n            type='candle',\n            style=\"classic\",\n            title='Apple, March - 2020',\n            ylabel='Price ($)'\n        )","73705194":"#Here we use charles as style\nfplt.plot(\n            apple_df,\n            type='candle',\n            style='charles',\n            title='Apple, March - 2020',\n            ylabel='Price ($)',\n            )","267f0c26":"#Here we use mike as style\nfplt.plot(\n            apple_df,\n            type='candle',\n            style='mike',\n            title='Apple, March - 2020',\n            ylabel='Price ($)',\n        )","81a46eca":"fplt.plot(\n            apple_df,\n            type='candle',\n            style='charles',\n            title='Apple, March - 2020',\n            ylabel='Price ($)',\n            volume=True,\n            ylabel_lower='Shares\\nTraded',\n            )","a5535cfc":"fplt.plot(\n            apple_df,\n            type='candle',\n            style='charles',\n            title='Apple, March - 2020',\n            ylabel='Price ($)',\n            volume=True,\n            ylabel_lower='Shares\\nTraded',\n            show_nontrading=True\n            )","c05509e0":"#Customizing volume and candlestick colours\nmc = fplt.make_marketcolors(\n                            up='tab:blue',down='tab:red',\n                            edge='lime',\n                            wick={'up':'blue','down':'red'},\n                            volume='tab:green',\n                           )\n\ns  = fplt.make_mpf_style(marketcolors=mc)\n\nfplt.plot(\n        apple_df,\n        type=\"candle\",\n        title='Apple, March - 2020',\n        ylabel='Price ($)',\n        figratio=(12,8),\n        volume=True,\n        ylabel_lower='Shares\\nTraded',\n        show_nontrading=True,\n        style=s\n    )","84575853":"#Modifying Chart\nmc = fplt.make_marketcolors(\n                            up='tab:blue',down='tab:red',\n                            edge='lime',\n                            wick={'up':'blue','down':'red'},\n                            volume='lawngreen',\n                           )\n\ns  = fplt.make_mpf_style(base_mpl_style=\"ggplot\", marketcolors=mc)\n\nfplt.plot(\n        apple_df,\n        type=\"candle\",\n        title='Apple, March - 2020',\n        ylabel='Price ($)',\n        figratio=(12,8),\n        volume=True,\n        ylabel_lower='Shares\\nTraded',\n        show_nontrading=True,\n        style=s\n    )","e620a11f":"#Adding moving average of Price\nmc = fplt.make_marketcolors(\n                            up='tab:blue',down='tab:red',\n                            edge='lime',\n                            wick={'up':'blue','down':'red'},\n                            volume='lawngreen',\n                           )\n\ns  = fplt.make_mpf_style(base_mpl_style=\"seaborn\", marketcolors=mc, mavcolors=[\"red\"])\n\nfplt.plot(\n        apple_df,\n        type=\"candle\",\n        title='Apple prices',\n        ylabel='Price ($)',\n        mav=2,\n        figscale=1.5,\n        style=s\n    )","4076bfd2":"#Adding multiple Moving averages\nmc = fplt.make_marketcolors(\n                            up='tab:blue',down='tab:red',\n                            edge='lime',\n                            wick={'up':'blue','down':'red'},\n                            volume='lawngreen',\n                           )\n\ns  = fplt.make_mpf_style(base_mpl_style=\"seaborn\", marketcolors=mc, mavcolors=[\"black\",\"orange\",\"skyblue\"])\n\nfplt.plot(\n        apple_df,\n        type=\"candle\",\n        title='Apple Prices',\n        ylabel='Price ($)',\n        mav=(2,4,6),\n        figratio=(12,6),\n        style=s\n    )","13f1d450":"## **Scatter Plot**","13af9a5c":"## **Heat Map**","7c510531":"## **Histograms**","3c514c3d":"## **Time Series Line Plot**","de8b97b4":"## **Time Series Heat Map**","785bfd65":"## **Figure objects**","69c34446":"## **Text Markup**","a19efe0c":"## **Bar Plots**","3a913b75":"## **Matplotlib Finance**","a13c40b9":"## **Histogram**","6dc6c2aa":"## **Single & Multiple Plots**","d00be2a0":"## **Candlestick with volume**","638542d3":"## **Time Series Autocorrelation plot**","61c3eb0a":"## **Single & Multiple Moving Averages**","93e467e6":"If you like this notebook,don't forget to upvote\n\nYou can also access my another notebook on Plotly Liabrary [here](https:\/\/www.kaggle.com\/ammaraahmad\/interactive-visualizations-using-plotly)","980cb977":"## **3D surface**","1828267d":"## **Time Series Scatter Plot**","fc8da569":"## **Density Plot**","5eb19aae":"## **Candlesticks**","f86861b6":"## **Pie Chart**","8bfbf032":"## **Time Series Box and Whisker Plots by Interval**","6e30e9ce":"## **Contents**\n\n**1.Basic Plottings**\n   * Single & Multiple Plots\n   * Bar Plots\n   * Figure Objects\n   * Text Markup\n   * Histograms\n   * Pie Chart\n   * 3D surface\n   * Heat Map\n   \n**2.Time Series Graphs**\n   * Line Plot\n   * Histograms\n   * Density Plot\n   * Box and Whisker Plots\n   * Heat Map\n   * Scatter Plot\n   * Autocorrelation plot\n   \n**3.Matplotlib Finance**\n   * Candlesticks\n   * Candlesticks with Volumes\n   * Single & Multiple Moving Averages\n  "}}