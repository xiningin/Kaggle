{"cell_type":{"c3a6e100":"code","4952e263":"code","6111ddb9":"code","9f4970cc":"code","565e8184":"code","80a4d93b":"code","9d8329f7":"code","b6fc4d07":"code","098e46c0":"code","63fa348c":"code","ce50af2b":"code","dfc07efa":"code","20bb5fa2":"code","9c1ef87a":"code","a3ac8dac":"code","9721ba1a":"code","9dbb1d60":"code","bb9d1661":"code","c218b6ca":"code","149a8ed6":"code","b0d599ea":"code","ea971640":"code","d4f178de":"code","30f4470e":"code","0a78b47f":"code","883a3dc9":"code","fd0a4870":"code","6091f71d":"code","fdb7939b":"code","0dfd6174":"code","711918f5":"code","d49a229d":"code","2c1073f1":"code","eabc1447":"code","5a02fe23":"code","87c878c8":"markdown","9c689de0":"markdown","bee074e8":"markdown","7049e1a0":"markdown","beb0db32":"markdown","8985a843":"markdown","9c240bbb":"markdown","13e63675":"markdown","71d77d24":"markdown","1b3056b8":"markdown","fa35f70d":"markdown","0b3eccdd":"markdown","403aa9fc":"markdown","a33cb360":"markdown","f0d9ef9b":"markdown","9e66d639":"markdown","9269a7f7":"markdown","a96a65b1":"markdown","380acc8b":"markdown","1b51d7b2":"markdown","ad743171":"markdown","53334d58":"markdown","b8181f07":"markdown","3581ec01":"markdown","7d37e4f9":"markdown","e6e6853a":"markdown","69bfb247":"markdown","a29fdc76":"markdown","fce9dfc6":"markdown","d2bdbd32":"markdown","756df010":"markdown","0f31fb21":"markdown","4aa01acf":"markdown","ab001d06":"markdown","20f75ed7":"markdown","ceb76923":"markdown","10ad7ddb":"markdown","0b6b3ef6":"markdown","216fb793":"markdown","0d58f5ed":"markdown"},"source":{"c3a6e100":"import pandas as pd\nimport numpy as np\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport plotly.graph_objects as go\nimport plotly.express as px\n\nfrom sklearn import preprocessing\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import mean_absolute_error","4952e263":"# Load data\ndf = pd.read_csv(\"..\/input\/ashrae-global-thermal-comfort-database-ii\/ashrae_db2.01.csv\", low_memory=False)\ndf_climate = pd.read_csv(\"..\/input\/covcsd-covid19-countries-statistical-dataset\/temperature_data.csv\", low_memory=False) # wind, precipitation, fog data from Jan to Mar \ndf_temperature = pd.read_csv(\"..\/input\/world-average-temperature\/Avg_World_Temp_2020.csv\",low_memory=False) # Annual average temperature\ndf_country = pd.read_csv(\"..\/input\/014-world-gdp-with-codes\/2014_world_gdp_with_codes.csv\") # Geographical location","6111ddb9":"df.head()","9f4970cc":"df.info()","565e8184":"print(\"Number of values by season:\\n\",df['Season'].value_counts())\nprint(\"Season missing values: \",df['Season'].isna().sum())\nprint()\nprint(\"Number of values by building type: \\n\", df['Building type'].value_counts())\nprint(\"Building type missing values: \",df['Building type'].isna().sum())\nprint()\nprint(\"Number of values by age: \\n\", df['Age'].value_counts())\nprint(\"Age missing values: \",df['Age'].isna().sum())","80a4d93b":"# Dealing with missing age data\ndf['Age'].fillna((df['Age'].mean()), inplace=True)","9d8329f7":"# Create filter conditions based on our senario setting\nseason_con = df.Season == 'Summer' # Summer Olympic game\nbuilding_type_con = df['Building type'].isin(['Office', 'Multifamily housing']) # Those building types are similar to apartments\nage_con = (df.Age >= 15) & (df.Age <= 40) # General age range of athletes\n\n# Filter rows by conditions\ndf_con = df.loc[season_con & building_type_con & age_con]","b6fc4d07":"# Include columns that we are interested in, drop duplication or unnecessary data\nto_include = ['Climate','City','Country', # Geographical information\n              'Age','Sex','Clo','Met', # Personal features\n              'Thermal sensation', # Thermal comfort\n              'Air temperature (C)','Relative humidity (%)','Air velocity (m\/s)' # Environmental features\n             ]\n\ndf_con = df_con[to_include]\ndf_con.info()","098e46c0":"# Dealing with missing data\n# Drop rows have missing thermal sensation, air temperature, humidity, and air velocity value\ndf_con = df_con.dropna(subset=['Thermal sensation', 'Air temperature (C)', 'Relative humidity (%)', 'Air velocity (m\/s)'])\n\n# Use .round() function to get integer thermal comfort values\ndf_con['Thermal sensation'] = df_con['Thermal sensation'].round()","63fa348c":"# Explore what features influence thermal sensation\nplt.figure(figsize=(12, 5))\nsns.heatmap(df_con.corr(), annot=True)\n\nplt.title('What features influence thermal sensation')","ce50af2b":"df_climate.head()","dfc07efa":"# Wind_speed, Precipitation, Fog_Presence\n# Select relevant columns\nto_include_climate = ['Country','Wind_speed','Precipitation','Fog_Presence']\ndf_climate = df_climate[to_include_climate]\n\n# In the climate dataset, UK is written as United Kingdom, USA as US\n# Replace the country names before merging data\ndf_climate['Country'] = df_climate['Country'].replace([\"US\",\"United Kingdom\"],[\"USA\",\"UK\"])\n\n# Summarize daily climate data into average value\ndf_climate['Wind_speed'] = df_climate.groupby('Country')['Wind_speed'].transform('mean').round(1)\ndf_climate['Precipitation'] = df_climate.groupby('Country')['Precipitation'].transform('mean').round(1)\ndf_climate['Fog_Presence'] = df_climate.groupby('Country')['Fog_Presence'].transform('mean').round(1)\n\n# Remove duplicates\ndf_climate.drop_duplicates(inplace=True)\n\n# Merge climate data with ASHRAE dataset\ndf_con = pd.merge(df_con, df_climate, how='left')","20bb5fa2":"df_temperature.head()","9c1ef87a":"# Annual temperature\ndf_temperature = df_temperature[['Country','Avg_Year']]\ndf_temperature['Avg_Year'] = df_temperature.groupby('Country')['Avg_Year'].transform('mean').round(1)\ndf_temperature.drop_duplicates(inplace=True)\ndf_temperature['Country'] = df_temperature['Country'].replace([\"United States\",\"United Kingdom\"],[\"USA\",\"UK\"])\ndf_temperature.rename(columns={\"Avg_Year\": \"Temperature\"}, inplace=True)\n\ndf_con = pd.merge(df_con, df_temperature, how='left')\n\n# Calculate average temperature by Koppen climate zone\ndf_con['Temperature by climate'] = df_con.groupby('Climate')['Temperature'].transform('mean').round(1)\ndf_con.head()","a3ac8dac":"# Define our thermal comfort color palette\n# Red - Hot, Green - Comfortable, Blue - Cold\ncolors = ['#004bf2', '#6281ef', '#87b9e1', '#9af785', '#ffc8b9', '#ff8e8c', '#d65036']\nsns.set_palette(sns.color_palette(colors))","9721ba1a":"# By countries\n# Sort country order according to their average remperature\ndf_con = df_con.sort_values(by = ['Temperature'], ascending=True)\n\ng = sns.FacetGrid(\n    data=df_con, \n    col='Country', \n    hue='Thermal sensation', \n    col_wrap=4, \n    ylim=(17,40)\n)\n\ng.map_dataframe(\n    sns.scatterplot, \n    'Relative humidity (%)', \n    'Air temperature (C)', \n    size=0.5, \n    alpha=0.6\n)\n\ng.add_legend()\ng.fig.subplots_adjust(top=0.9)\ng.fig.suptitle('Relationships between temperature, humidity, and thermal sensation (by country)',fontsize=16)","9dbb1d60":"# By climate zones\n# Sort climate zone order according to their average remperature\ndf_con = df_con.sort_values(\n    by = ['Temperature by climate'], \n    ascending=True\n)\n\ng = sns.FacetGrid(\n    data=df_con[['Relative humidity (%)','Air temperature (C)','Thermal sensation','Climate']].dropna(), \n    col='Climate', \n    hue='Thermal sensation', \n    col_wrap=4, \n    ylim=(17,40)\n)\n\ng.map_dataframe(\n    sns.scatterplot, \n    'Relative humidity (%)', \n    'Air temperature (C)', \n    size=0.5, \n    alpha=0.6\n)\n\ng.add_legend()\ng.fig.subplots_adjust(top=0.9)\ng.fig.suptitle('Relationships between temperature, humidity, and thermal sensation (by climate zone)',fontsize=16)","bb9d1661":"# Find the temperatures that make most people feel comfortable by each country\ndf_con['Comfort temperature (C)'] = (df_con['Air temperature (C)'] - df_con['Thermal sensation']\/0.35).round(1)\ndf_con['Comfort temperature by country (C)'] = df_con.groupby('Country')['Comfort temperature (C)'].transform('mean').round(1)\n\n# Calculate air temperature of each country as comparison\ndf_con['Air temperature by country (C)'] = df_con.groupby('Country')['Air temperature (C)'].transform('mean').round(1)","c218b6ca":"# Compare the comfort temperature with current air temperature\nplt.figure(figsize=(10, 8))\n\nplt.hlines(\n    data=df_con, \n    y='Country', \n    xmin='Comfort temperature by country (C)', \n    xmax='Air temperature by country (C)', \n    color='lightgrey', \n    alpha=0.4\n)\n\nsns.scatterplot(\n    data=df_con,\n    y='Country',\n    x='Comfort temperature by country (C)', \n    color='#6281ef',\n    s = 60,\n    label=\"Comfort temperature by country (C)\"\n)\n\nsns.scatterplot(\n    data=df_con,\n    y='Country',\n    x='Air temperature by country (C)', \n    color='#ff8e8c',\n    s = 60,\n    label=\"Air temperature by country (C)\"\n)\n\nsns.despine()\nplt.legend()\nplt.ylabel(\"Country\")\nplt.xlabel(\"Temperature\")\nplt.title('Comfort temperature v.s. actual air temperature (by country)')","149a8ed6":"df_con['Standard humidity by country (%)'] = df_con.loc[\n    (df_con['Air temperature (C)'] >= df_con['Comfort temperature by country (C)'] - 1.5) &\n    (df_con['Air temperature (C)'] <= df_con['Comfort temperature by country (C)'] + 1.5) & # 1.5 degrees around comfort temperature\n    (df_con['Thermal sensation'] >= -1) &\n    (df_con['Thermal sensation'] <= 1) # Within comfort thermal sensation range\n].groupby('Country')['Relative humidity (%)'].transform('mean').round(1)\n\ndf_con['Standard humidity by country (%)'].fillna(df_con.groupby('Country')['Standard humidity by country (%)'].transform('mean'),inplace=True)\n\n# Calculate relative humidity of each country as comparison\ndf_con['Relative humidity by country (%)'] = df_con.groupby('Country')['Relative humidity (%)'].transform('mean').round(1)","b0d599ea":"# Compare the standard humidity with current humidity\nplt.figure(figsize=(10, 8))\n\nplt.hlines(\n    data=df_con, \n    y='Country', \n    xmin='Standard humidity by country (%)', \n    xmax='Relative humidity by country (%)', \n    color='lightgrey', \n    alpha=0.4\n)\n\nsns.scatterplot(\n    data=df_con,\n    y='Country',\n    x='Standard humidity by country (%)', \n    color='#6281ef',\n    s = 60,\n    label=\"Standard humidity by country (%)\"\n)\n\nsns.scatterplot(\n    data=df_con,\n    y='Country',\n    x='Relative humidity by country (%)', \n    color='#ff8e8c',\n    s = 60,\n    label=\"Relative humidity by country (%)\"\n)\n\nsns.despine()\nplt.legend()\nplt.ylabel(\"Country\")\nplt.xlabel(\"Humidity\")\nplt.title('Standard humidity v.s. actual humidity (by country)')","ea971640":"# Add on geographical location\ndf_country = df_country[['COUNTRY','CODE']]\ndf_country['COUNTRY'] = df_country['COUNTRY'].replace([\"United States\",\"United Kingdom\"],[\"USA\",\"UK\"])\ndf_country.rename(columns={\"COUNTRY\": \"Country\"}, inplace=True)\n\ndf_geo = pd.merge(df_con, df_country, how='left')\ndf_geo = df_geo[\n    ['Country',\n    'Comfort temperature by country (C)',\n    'Standard humidity by country (%)',\n    'CODE']\n].drop_duplicates(subset = ['Country'])","d4f178de":"fig = go.Figure(data=go.Choropleth(\n    locations = df_geo['CODE'],\n    z = df_geo['Comfort temperature by country (C)'],\n    text = df_geo['Country'],\n    colorscale = 'agsunset',\n    marker_line_color = 'white',\n    marker_line_width = 0.5,\n    colorbar_title = 'Comfort temperature by country (C)',\n))\n\nfig.update_layout(\n    title_text='Comfort temperature by country (C)',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    )\n)\n\nfig.show()","30f4470e":"fig = go.Figure(data=go.Choropleth(\n    locations = df_geo['CODE'],\n    z = df_geo['Standard humidity by country (%)'],\n    text = df_geo['Country'],\n    colorscale = 'YlGnBu',\n    marker_line_color='white',\n    marker_line_width=0.5,\n    colorbar_title = 'Standard humidity by country (%)',\n))\n\nfig.update_layout(\n    title_text='Standard humidity by country (%)',\n    geo=dict(\n        showframe=False,\n        showcoastlines=False,\n        projection_type='equirectangular'\n    )\n)\n\n\nfig.show()","0a78b47f":"# Explore what factors influence comfort temperature and humidity\nplt.figure(figsize=(12, 5))\nsns.heatmap(df_con[['Wind_speed','Precipitation','Fog_Presence',\n                   'Temperature','Temperature by climate',\n                   'Comfort temperature by country (C)','Standard humidity by country (%)']].corr(), annot=True)\n\n\nplt.title('What climate features influence thermal preference')","883a3dc9":"X_to_include = [\n    'Age',\n    'Wind_speed',\n    'Precipitation',\n    'Fog_Presence',\n    'Temperature',\n    'Thermal sensation'\n]\n\nX = df_con[X_to_include]\ny = df_con['Comfort temperature (C)']","fd0a4870":"# Split training and testing data\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)\n\n# Scaling\nscaler = preprocessing.StandardScaler().fit(X_train)\n\nX_train = scaler.transform(X_train)\nX_test = scaler.transform(X_test)\n\n# Train random forest model\nrf = RandomForestRegressor(random_state=0)\nrf.fit(X_train, y_train)\n\ny_pred = rf.predict(X_test)","6091f71d":"# Model performance\nMAE = mean_absolute_error(y_test, y_pred)\nprint(\"Mean absolute error: \",MAE)\nprint(\"The predicted temperatures are {} degrees Celsius around actual comfortable temperatures\".format(MAE.round(1)))","fdb7939b":"y2 = df_con['Relative humidity (%)']\n\n# Split training and testing data\nX_train, X_test, y2_train, y2_test = train_test_split(X, y2, random_state=0)\n\n# Scaling\nscaler = preprocessing.StandardScaler().fit(X_train)\n\nX_train = scaler.transform(X_train)\nX_test = scaler.transform(X_test)\n\n# Train random forest model\nrf2 = RandomForestRegressor(random_state=0)\nrf2.fit(X_train, y2_train)\n\ny2_pred = rf2.predict(X_test)\n\n# Model performance\nMAE2 = mean_absolute_error(y2_test, y2_pred)\nprint(\"Mean absolute error: \",MAE2)\nprint(\"The predicted humidities are {}% around actual comfortable humidities\".format(MAE2.round(1)))","0dfd6174":"# Add in information of new countries\ncountries_to_add = ['Argentina', 'Croatia', 'Cuba', 'Jamaica', 'Japan', 'Netherlands', 'Russia','Spain', 'Switzerland', 'Thailand','Vietnam']\ndf_add = pd.merge(df_climate, df_temperature, how='inner')\ndf_add = df_add.loc[df_add['Country'].isin(countries_to_add)]\n\n# Create a column of athelets average age\ndf_add['Age'] = [27.7, 27.5, 25.1, 26.4, 25.2, 27.2, 26.1, 27.1, 26.7, 24.0, 23.3]\n\n# Set thermal sensation as comfortable\ndf_add['Thermal sensation'] = 0","711918f5":"df_add","d49a229d":"X_add = df_add[X_to_include]\n\n# Scaling\nX_add = preprocessing.StandardScaler().fit(X_add).transform(X_add)\n\n# Predicting\ny_add_tem = rf.predict(X_add) # Temperature\ny_add_hum = rf2.predict(X_add) # Humidity","2c1073f1":"# Add predicted outcomes back into the new country dataset\ndf_add['Comfort temperature by country (C)'] = y_add_tem.round(1)\ndf_add['Standard humidity by country (%)'] = y_add_hum.round(1)\ndf_add","eabc1447":"df_con['Category'] = \"Known\"\ndf_add['Category'] = \"Predicted\"\n\ndf_all = pd.concat(\n    [\n    df_con[['Country', 'Comfort temperature by country (C)', 'Standard humidity by country (%)', 'Category']].drop_duplicates(subset = ['Country']),\n    df_add[['Country', 'Comfort temperature by country (C)', 'Standard humidity by country (%)', 'Category']]\n    ]\n)\n\ndf_all","5a02fe23":"# Plot the thermal peference\nfig = px.scatter(\n    df_all, \n    x = 'Comfort temperature by country (C)', \n    y = 'Standard humidity by country (%)',\n    text = 'Country',\n    color = 'Category'\n)\n\nfig.update_traces(textposition='top center')\nfig.update_layout(title_text='Thermal preferences in global countries', title_x=0.5, yaxis=dict(gridcolor = '#DFEAF4'), xaxis=dict(gridcolor = '#DFEAF4'), plot_bgcolor='white')\nfig.show()","87c878c8":"# **What are the ideal temperature and humidity to people from different countires?**\n\nIn order to provide the ideal environment to athletes around the world, we need to identify the exact ideal temperature and humidity to people from different countries. \n\nAccording to BCA Green Mark criteria: thermal sensation = a + b * air temperature + c * air velocity. In this case, air velocity has small correlation with thermal sensation, the change of (a + c * air velocity) will not have large impact on thermal sensation. Therefore, we treat it as a constant value, comfort temperature = air temperature - thermal sensation\/b.\n\nReferring to BCA Green Mark criteria, the value of b varies in different types of buildings, we calculate the average b value of sport facilities and healthcare facilities, which are similar to apartment buildings, the b value is 0.35.","9c689de0":"There are many missing values in [Age] column, instead of dropping them directly, we fill them with mean age of all participants.\n","bee074e8":"# **Data processing**\n\n![image.png](attachment:043ef973-979d-4492-a9de-8236ccc92f35.png)\n\nWe examine the values counts and missing values of our interested columns.","7049e1a0":"We further subset the data based on our scenario settings:\n- Season: Summer only\n- Building type: Office, Multifamily housing (similar to apartments)\n- Age range of athletes: 15 to 40 years old","beb0db32":"### **Scenario setting**\n\nThanks to the efforts of the Singaporean government and all citizens, Singapore has obtained the qualification to host the Summer Olympics in 2032. \n\nIn order to show the world the friendly and open attitude of Singapore and to revitalize the tourism industry, the Singapore government has unanimously decided to **give all athletes who come to Singapore the most comfortable experience**. \n\nAccording to statistics, a good and comfortable living and resting environment will have a positive impact on residents. \nTherefore, the Olympic Village, as a place for every athlete to rest and prepare for battle, requires careful consideration and design. \n\nThe Olympic Games has a particularly large number of participating countries and people. In order to allow people from all over the world live in ideal environment, we need to analyze the thermal preferences of people in different countries.","8985a843":"Similar to the previous figure, the thermal sensation patterns also varies in different climate zones. \n\nThe most significant differences between countries and climate zones are their climatic characteristics, such as average annual temperature, precipitation, wind speed, etc.\n\nTherefore, it is worth considering to add in more detailed climatic features to our analysis, they can transform categorical differences between countries and climate zones into quantifiable numerical variations.","9c240bbb":"### **Objectives and Goals**\n1. Help government give all athletes the most comfortable experience.\n2. Better understanding of perspective on how human people are affected \n     by ACMV systems\n3. Conduct a geographical analysis of ACMV systems and thermal preferences.\n4. Determine suitable thermal parameters based on the data of personnel in different \n     areas.\n5. Achieve the Net Zero Energy building criteria which BCA milestones for Singapore Green Plan 2030","13e63675":"### **Temperature prediction model**\nIn this model, we use the \"individual\" as the input unit instead of \"country\" for ensuring enough sample size.\nTherefore besides the climated features, we add in personal information [Age], and personal [Thermal sensation] value. ","71d77d24":"Next we're going to **plot the thermal sensation patterns in different geographical locations**. \n\nWe defined our own thermal comfort color palette:\n ![image.png](attachment:a8fc206c-0e7f-4166-abc5-4f2433d45c6b.png)\n \nScatterplot seems to be a good choice for demonstrating the relationship of thermal sensation to temperature and humidity. \n\nWe create a set of scatterplots by country and climate zone, the plots are arranged in ascending order of mean temperatures of the geographical areas.","1b3056b8":"Since humidity also slightly affects thermal comfort sensation, we wish to identify the standard humidity are corresponds to the comfort temperature. \n\nWhen the air humidity differs significantly from the standard humidity, the operator can adjust the indoor environmental parameters of the Olympic Village.","fa35f70d":"### **Load data**\n\nBesides the ASHRAE Global Thermal Comfort Database II, we also introduce datasets that have detailed information of countries' climate features in order to get more insightful findings:\n\n- First the climate data, which contains **wind_speed**, **precipitation** and **fog_presence** of global countries from 2020 Jan to Mar:\n\n- Second, the **annual average temperature** of global cities.\n\n- Lastly, the **country codes** for mapping geographical locations.","0b3eccdd":"From this figure, the thermal sensation has a very small correlation with personal features, such as clothing and metabolism level. In this geographical analysis, personal features are not the main focus of the study, and it is safe to exclude those personal features of low impact to thermal sensation in following analysis. \n\nAs for the emvironmental features, thermal sensation has a weak positive, positive correlation with air temperature and a negative relationship with relative humidity. It is worth noting that thermal sensation is not the ideal indicator for revealing the relationship between environmental features and thermal preference, because the breaks of the ordinal thermal sensation values are equal, which is different from the reality.   \n\nIn spite of this, the figure can provide us with a rough idea of what factors to be considered in following analysis. We chose air temperature and relative humidity as two key indicators for thermal perception, they are also the main environment parameters of our Olympic Village.","403aa9fc":"The model has an encouraging performance, the predicted temperatures are only 1.5 degrees Celsius around the actual comfortable temperatures. \n","a33cb360":"There are still missing values in some columns, we drop rows that have missing key info, e.g. thermal sensation","f0d9ef9b":"# **Conclusion**\nIn this project we explored the relationship between geographic location and people's thermal preferences. We found that personal factors such as clothing level and metabolic rate do not have a strong correlation with thermal sensation, however, environmental factors such as temperature and humidity have a noticable impact on it. We overlaid thermal perception patterns with geographic locations, finding out thermal perception patterns differ significantly across countries and climate zones.\n\nBecause the major differentiation between countries and climatic zones is in their climatic characteristics, we further added the annual average temperature, humidity, and wind speed of countries to the existing dataset. Followed by calculating the collective thermal preferences of people in the same country, referring to the formula of Singapore green mark. Geographical maps suggest that people's temperature and humidity preferences are closely related to the latitude of the respective countries.\n\nWe try to extend the investigation of thermal preferences to more geographic areas, through building a random forest prediction model by country climate characteristics, individual thermal sensations, therefore to predict the ideal temperature and humidity of target group people in other countries.\n\nOur prediction models yielded optimistic results, with both temperature and humidity predictions within a small margin of mean absolute error. The trained models are employed on a new dataset to obtain a more comprehensive list of ideal indoor environments for global countries.","9e66d639":"From the figure above, it can be easily seen that under the same environmental conditions, people in different countries may report different thermal sensation values. This further confirms our assumption that geographic factors can influence people's thermal environment preferences.\n\nIn countries that have lower annual temperatures (UK), participants will normally feel hot in summer, whereas in countries with high temperature (e.g. Philippines), people feel cool under the same temperature range of UK.\n\nSetting a generalized indoor environment cannot meet the preferences of people in different regions. It is an imperative to diversify environmental settings of Olympic Village apartments.","9269a7f7":"Comparing to the previous correlation matirx, this figure shows an optimistic result.\n* Wind_speed has a surprising strong negative relationship to both temperature and humidity\n* Precipitation has negative correlation to both\n* Temperature has strong positive correlation to both temperature (0.76) and humidity (0.73) \n \nWith those numbers, we were much more confident to move on to our next step - training a prediction model. ","a96a65b1":"Let's explore the relationship of all the columns, try to find out what features influence thermal sensation! ","380acc8b":"Our final result is quite fun to explore, the relative positions of data points match with our common sense. \n- Jamaica has highest comfort temperature of all countries. \n- Countries have similar climate features appears together: Brazil and Cuba, Croatia and Greece, India and Vietnam.\n- We mistakenly include Thailand that already exists in ASHRAE dataset, the known value and predicted value of Thailand are close to each other. In a way, it reaffirms the reliability of the prediction.\n\nJust as the five rings of the Olympic rings represent the five continents, the countries in our new dataset contain Comfort temperature and Standard humidity from these five continents.\n\nAsia:\n\nJapan, the country has five climate zones, the temperature and climate of the four seasons are very different, Comfort temperature and Standard humidity are lower\nThailand, Southeast Asia has a tropical monsoon climate. Standard humidity is high, while Comfort temperature is medium.\n\nRussia, straddling the Eurasian continent, mostly in the temperate climate zone, has the lowest average annual temperature among all countries, while Fog_Presence is the highest, with obvious climate characteristics. standard humidity is high, while Comfort temperature is low.\n\nVietnam, located in Southeast Asia, also belongs to the tropical monsoon climate. Similar to Thailand, Standard humidity is higher, while Comfort temperature belongs to medium.\n\nAmericas:\n\nCuba, which has a mostly tropical rainforest climate, has a high Standard humidity and a medium Comfort temperature.\n\nJamaica, located in the central Caribbean, is close to Cuba in terms of geographic location and climate characteristics, but is unique in that Standard humidity is medium, while Comfort temperature is the highest of all countries.\n\nArgentina, the second largest country in South America, the northern part of the climate is tropical, while the rest of the milder to subtropical transition, the temperature difference between the north and the south, but the average annual temperature change is small. standard humidity and Comfort temperature are both low.\n\nEurope:\n\nCroatia, which has a temperate continental climate, is more mild and dry. From this we can also find that its standard humidity is the lowest in all countries, while Comfort temperature is moderately high.\n\nThe Netherlands, Atlantic climate, humid and windy, the wind speed is higher in all countries as we can see from the previous list. Its comfort temperature is the lowest among the predicted countries, and the standard humidity is also low.\n\nSpain, with a Mediterranean climate, is often subject to low pressure from the ocean, which brings frequent rainfall and fog to the coast, and its standard humidity and comfort temperature are both medium.\n\nSwitzerland, with an oceanic climate in the west and a continental climate in the east. The results are close to those of the Netherlands, and both standard humidity and comfort temperature are also moderate.\n","1b51d7b2":"# **How thermal preferences distribute globally?**","ad743171":"# **What climate features influence thermal preferences?**","53334d58":"## **Build models and test their performances**\nWe wish to predict both the temperature and humidity that make people feel comfortable, this can be done by multi-out put regressor. However, because temperature and humidity has low correlation as shown in previous matrix, we can simply build two models to predict comfortable temperature and humidity seperately.","b8181f07":"# **Introduction**\nThis notebook is under task [\"How does geographic location influence thermal comfort perception?\"](http:\/\/https:\/\/www.kaggle.com\/claytonmiller\/ashrae-global-thermal-comfort-database-ii\/tasks?taskId=5983) of [ASHRAE Global Thermal Comfort Database II](http:\/\/https:\/\/www.kaggle.com\/claytonmiller\/ashrae-global-thermal-comfort-database-ii)\n\nDeveloped by:\n- [Wang Jing](http:\/\/wangjing.city\/)\n- Xu Jiaqi\n- Tian Yuening \n- Lyu Jingke\n- Tan Wee Soon\n\nIn this task, we will be exploring whether where the person is located has an influence on their tendency to have comfort preferences that are different than other locations.\n\nTo add more fun to our analysis, we developed an assumptive working scenario - designing the interior environment of an Olympic Village. It shapes the objectives of the analysis, and the flow of exploring this dataset. ","3581ec01":"We also observe that the geographical distribution of standard humidity is related to latitude. Standard humidities of countries close to equator are higher. ","7d37e4f9":"Let's plot the previous calculated ideal environmental features on a geographical maps. We refer to the [tutorial of interactive choroplopleth](https:\/\/plotly.com\/python\/choropleth-maps\/) developed by Plotly.","e6e6853a":"### **Humidity prediction model**\n","69bfb247":"In the subset, we only include the relevant columns, dropping duplication or unnecessay information.","a29fdc76":"Relating back to our scenario setting, this final output provide us a good reference for setting indoor environmental parameters for the Olympic Village buildings. Considering that the difference between the minimum and maximum temperature is 10 degrees Celsius, we decided to set the indoor ambient temperature starting from 22 degrees Celsius to the final 30 degrees Celsius, using every two degrees Celsius as the dividing line. Similarly, considering the humidity range of 35% to 70%, we are going to set the value from 35% to 65% in 10% increments, so that the temperature and humidity match each other to design the air conditioning system of the building. For example, if one of the buildings is designed with an indoor parameter of 23 degrees Celsius and an air humidity of 45%, we can group countries with a thermal comfort range of 22-24 degrees Celsius and an air humidity of 40%-50% and place them in the same building for subsequent occupancy.\n\nWe can also divide all apartment buildings into groups with different attributes, such as low temperature dry zone, low temperature humid zone, normal temperature temperature dry zone, normal temperature humid zone, high temperature dry zone and high temperature humid zone. In this way, the AMVC system for different property accommodation areas of the Olympic Village is set up as a whole.","fce9dfc6":"Let's run our pre-trained model on this new dataset.","d2bdbd32":"Finally, let's explore the thermal preference patterns of both the known countries and the predicted countries. ","756df010":"- <span style='color:blue'> **Blue** <\/span> indicates the ideal temperature to people. \n- <span style='color:red'> **Red** <\/span> indicates the actual air temperature when the survey was made.\n\nComparing the calculated temperature that people in different regions feel comfortable with the local temperature, we find that people in most countries would like their surroundings to be cooler. Most of the ideal temperatures gather within the range of 24 to 26 degrees Celsius. Some countries are exceptions - in Mexico, Malaysia, and Iran, the comfort temperature is around 28 to 30 degrees Celsius. ","0f31fb21":"From the world maps above, we notice that the investigation of thermal comfort has not yet covered the overall landscape of global countries. Thermal preference of important players in the Olympic Game (e.g. Russia) is missing.\n\nIn our next step, we wish to predict the thermal peferences of people in investigated countries.\n\nBefore doing that, let's find out what are the climate features impacting ideal thermal environments.","4aa01acf":"Since there is no direct formula to calculate the standard humidity, we filtered out the data points near the comfort temperature with thermal sensation values of 0 or positive or negative 1 (comfortable), and calculated their average humidity.\n\nComparing the standard humidity to the ground humidity, people do not have a single-sided preference like temperature. In most countries the ideal humidity is similar to the local humidity (e.g. USA, Greece, Australia). However, in Mexico these two values are considerably different, we acknowledge that this could be a bias due to small sample size of Mexico.","ab001d06":"## **Make predictions**\nWe create a new dataset of the countries to predict, with information of climate features and average athelets age (the most representative individual). The age information is from https:\/\/www.theguardian.com\/sport\/datablog\/2012\/aug\/07\/olympics-2012-athletes-age-weight-height\n\nWe add some new data on the climate of the main participating countries of the Olympics that were missing from the original dataset. There are many factors that influence climate formation, including latitudinal position, land and sea position, atmospheric circulation, topography, altitude, ocean currents, and other factors. Among them, location is the most influential, so we have chosen the countries that are distributed all over the world, and the data are very diverse and representative. And we intentionally chose countries with similar climate characteristics to set up a control group in order to observe the accuracy of the prediction results.","20f75ed7":"Countries that are close to the equator receive higher sun radiation. Their preferred temperatures are higher than the country that are closer to the poles.","ceb76923":"Among all the columns, there are some we find relevant to our working scenario:\n- Season, Climate, Country; City\n- Building type: Office, Multifamily housing\n- PMV: Predicated Mean Vote (Between -3 to 3)\n- Age; Sex\n- Clo, Clothing levels (Between 0.0 to 3.0)\n- Met, metabolism (Between 1.0 to 7.0)\n- Thermal Comfort\n   - Air temperature (degC), Relative humidity (%), Air velocity (m\/s)\n   - Thermal Sensation (Between -3 to 3) ","10ad7ddb":"# **Do thermal sensation patterns vary in different geographical locations?**\nIn this section, we'll have an exploratory analysis of the thermal sensation patterns in global countries. \n\nFirst, let's **add detailed climate features** of countries to the dataset. ","0b6b3ef6":"## **Final output**","216fb793":"The predicted humidities are 7.3% around actual comfort humidities.\n\nBecause humidity has larger value range than temperature, we consider the performance as acceptable. ","0d58f5ed":"# **Predict thermal preferences of people from other countires**"}}