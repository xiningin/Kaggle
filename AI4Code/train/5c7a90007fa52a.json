{"cell_type":{"2b57620b":"code","359c3e08":"code","f8d66bdb":"code","32e7ca87":"code","b4de6ef3":"code","c462b917":"code","e3616970":"code","09d72d4d":"code","fee81da2":"code","6bd0a5f6":"code","b2527fda":"code","1008840b":"code","6a15b32a":"code","27707368":"code","e4309516":"code","ab719e68":"code","0707e10e":"code","d8e03c5c":"code","7e64c096":"code","039e30d9":"code","2edf6f0d":"code","5b48e8e6":"code","9f6a7b24":"markdown"},"source":{"2b57620b":"import numpy as np\nimport pandas as pd\nimport os\nimport glob\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom plotly.subplots import make_subplots\nimport plotly.graph_objects as go\nfrom plotly.offline import plot\nimport plotly.express as px\nimport warnings\nwarnings.filterwarnings(\"ignore\")","359c3e08":"path = \"..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\"\nfiles = glob.glob(path + \"\/*.csv\")\ndata = []\nfor file in files:\n    df_raw = pd.read_csv(file)\n    df_raw[\"filename\"] = os.path.basename(file)\n    data.append(df_raw)\n\ndf_engagement_data = pd.concat(data,ignore_index= True)\ndistricts_info_df  = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv\")\nproducts_info_df   = pd.read_csv(\"..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv\")","f8d66bdb":"def missing_df(df):\n    missing_values = df.isnull().sum() \/ len(df) * 100\n    df_ = pd.DataFrame( missing_values, columns=[\"value\"] ).reset_index()\n    return df_\n    \nmissing_districts_info     = missing_df(districts_info_df)\nmissing_products_info      = missing_df(products_info_df)\nmissing_df_engagement_data = missing_df(df_engagement_data)","32e7ca87":"df_engagement_data[\"filename\"] = df_engagement_data[\"filename\"].str.replace(\".csv\",\"\")\ndf_engagement_data","b4de6ef3":"for missing_data in [missing_districts_info,missing_products_info,missing_df_engagement_data]:\n    fig = px.pie(missing_data,\n                 names= \"index\", \n                 values = \"value\",\n                 title = \"% of Missing values\",\n                 width=800, height=400,\n                color_discrete_sequence=px.colors.sequential.RdBu)\n\n    fig.update_traces(textposition='inside', textinfo='value+label')\n    fig.show()","c462b917":"df_engagement_data","e3616970":"df_engagement_data[\"filename\"] = df_engagement_data[\"filename\"].astype(str)\ndistricts_info_df[\"district_id\"] = districts_info_df[\"district_id\"].astype(str)","09d72d4d":"raw_df_eng_dist = pd.merge(\n    df_engagement_data,\n    districts_info_df,\n    how = \"left\", \n    left_on = [\"filename\"],\n    right_on = [\"district_id\"]\n)","fee81da2":"missing_raw_df_eng_dist = missing_df(raw_df_eng_dist)\nmissing_raw_df_eng_dist","6bd0a5f6":"print(df_engagement_data[\"lp_id\"].nunique())\nprint(products_info_df[\"LP ID\"].nunique())","b2527fda":"raw_df_eng_prod = pd.merge(\n    products_info_df, \n    df_engagement_data,\n    how      = \"left\" , \n    left_on  = [\"LP ID\"] , \n    right_on = [\"lp_id\"]\n)","1008840b":"raw_df_eng_prod_missing = missing_df(raw_df_eng_prod)\nraw_df_eng_prod_missing","6a15b32a":"#state distribution\nfig = px.histogram(districts_info_df, \n                   x = 'state',\n                   width=800,\n                   height=400).update_xaxes(categoryorder=\"total descending\")\nfig.show()","27707368":"districts_info_df.columns","e4309516":"clean_districts_info_df = districts_info_df[districts_info_df[\"locale\"].isna() == False]","ab719e68":"df = pd.DataFrame(clean_districts_info_df[\"locale\"].value_counts()).reset_index()","0707e10e":"import plotly.express as px\nfig = px.pie(df, \n             values = \"locale\",\n             names = \"index\",\n            color_discrete_sequence= px.colors.sequential.Plasma,\n            hole=0.2)\n\nfig.update_traces(hoverinfo='percent', textinfo='value+label')\nfig.show()","d8e03c5c":"sns.countplot(y=\"Provider\/Company Name\", data = products_info_df, order=products_info_df['Provider\/Company Name'].value_counts().index[:20])\nplt.title(\"Top 20 Provider\/Company\")","7e64c096":"agg_prod = products_info_df.groupby(by=[\"Sector(s)\"]).size().reset_index(name= 'counts')","039e30d9":"fig = make_subplots(rows=1,cols=1, specs=[[{'type':'domain'}]])","2edf6f0d":"cafe_colors =  ['rgb(146, 123, 21)', 'rgb(177, 180, 34)', 'rgb(206, 206, 40)',\n                'rgb(175, 51, 21)', 'rgb(35, 36, 21)']\n\nfig.add_trace(\n    go.Pie(\n        values=agg_prod[\"counts\"],\n        labels=agg_prod[\"Sector(s)\"],\n        marker_colors=cafe_colors\n    ))\nfig.update_traces(hoverinfo='percent', textinfo='label+value')\n#plt.figure(figsize=(10,10))","5b48e8e6":"sns.countplot(y=\"Primary Essential Function\", \n              data = products_info_df, \n              order=products_info_df['Primary Essential Function'].value_counts().index[:20]\n             )\n","9f6a7b24":"#### product information excel"}}