{"cell_type":{"76276438":"code","35b7d55b":"code","bfca2c98":"code","5d1eaf86":"code","33a589cb":"code","717d609c":"code","ad7bd29d":"code","c001d5fb":"code","2aa3f202":"code","45c50356":"code","3b5b5c16":"code","9b900dfe":"code","734c252e":"code","c4a274b5":"code","e77098e7":"code","2cf38371":"code","980e599a":"code","8eb556a6":"code","2f5e2e95":"code","1bc02b02":"code","dd810100":"code","3bf9b022":"code","74854348":"code","483397c8":"code","591d79a8":"code","5bbfac5e":"code","5e146c94":"code","ec3e7b7d":"code","fbd353f0":"code","22cc4522":"code","fa5eb5b1":"code","e9dab166":"code","7f857a95":"code","3f1bb0cb":"markdown","62a0d712":"markdown","dd06c3f6":"markdown","b0858669":"markdown","1e8e0396":"markdown","52dabe18":"markdown","e7a41361":"markdown","de922e1c":"markdown"},"source":{"76276438":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","35b7d55b":"data = pd.read_csv('..\/input\/tabelog-restaurant-review-dataset\/Kyoto_Restaurant_Info.csv')","bfca2c98":"data.head()","5d1eaf86":"data.dtypes","33a589cb":"import folium\nfrom folium import plugins\nprint( \"folium version is {}\".format(folium.__version__) )","717d609c":"# \u5730\u56f3\u4f5c\u6210\u3057\u3066\u5168\u4f53\u3092\u628a\u63e1\n\nLAT = data.Lat.iloc[0]\nLNG = data.Long.iloc[0]\n\nm = folium.Map(location=[LAT, LNG], zoom_start=10)\ndata_nodup = data.drop_duplicates(subset=[\"Lat\", \"Long\"])\nfor lat, lon in zip(data_nodup.Lat, data_nodup.Long):\n    folium.Marker(\n        location=[lat, lon],\n        popup=\"\/\".join([str(lat), str(lon)]),\n        tooltip=str(lat) + \"_\" + str(lon),\n    ).add_to(m)\nm","ad7bd29d":"data['TotalRating'].max()","c001d5fb":"data.describe()","2aa3f202":"data.isnull().sum()","45c50356":"df = data.fillna(data.mean())\ndf.isnull().sum()","3b5b5c16":"# \u30e9\u30f3\u30af\u304c\uff14\uff0e\uff10\u4ee5\u4e0a\u306e\u304a\u5e97\n\ndf[df['TotalRating'] > 4.0]","9b900dfe":"# \u30c7\u30a3\u30ca\u30fc\u306e\u5024\u6bb5\u5225\u306e\u70b9\u6570\n\nplt.figure(figsize=(20, 10))\nsns.boxplot(x=\"DinnerPrice\", y=\"TotalRating\", data=df)","734c252e":"df['DinnerPrice'].unique()","c4a274b5":"df.replace('\uffe54000\uff5e\uffe54999', '4000', inplace=True)\ndf.replace('\uffe53000\uff5e\uffe53999', '3000', inplace=True)\ndf.replace('\uffe58000\uff5e\uffe59999', '8000', inplace=True)\ndf.replace('\uffe52000\uff5e\uffe52999', '2000', inplace=True)\ndf.replace('\uffe510000\uff5e\uffe514999', '10000', inplace=True)\ndf.replace('\uffe55000\uff5e\uffe55999', '5000', inplace=True)\ndf.replace('\uffe56000\uff5e\uffe57999', '6000', inplace=True)\ndf.replace('\uffe520000\uff5e\uffe529999', '20000', inplace=True)\ndf.replace('\uffe51000\uff5e\uffe51999', '1000', inplace=True)\ndf.replace('\uff5e\uffe5999', '500', inplace=True)\ndf.replace('\uffe515000\uff5e\uffe519999', '15000', inplace=True)\ndf.replace('\uffe530000\uff5e', '30000', inplace=True)","e77098e7":"df.head()","2cf38371":"df.dtypes","980e599a":"df[\"DinnerPrice\"] = pd.to_numeric(df[\"DinnerPrice\"], errors='coerce')\ndf[\"LunchPrice\"] = pd.to_numeric(df[\"LunchPrice\"], errors='coerce')","8eb556a6":"df.dtypes","2f5e2e95":"df['ce_d'] = df['DinnerPrice'] \/ df['DinnerRating']\ndf['ce_l'] = df['LunchPrice'] \/ df['LunchRating']\ndf.head()","1bc02b02":"df['ce_d'].min()","dd810100":"df[df['ce_d'] < 300]","3bf9b022":"x = df.ce_d\ny = df.TotalRating\n\nplt.scatter(x, y)","74854348":"df_\uff19\uff19 = df.query('(DinnerPrice < 8000) & (DinnerRating > 3.5)')\ndf_99.head()","483397c8":"df_9920 = df_99.sort_values(by=\"DinnerRating\", ascending=False)[0:20]\ndf_9920.head()","591d79a8":"df_100 = df.query('(DinnerPrice > 10000) & (DinnerRating > 3.5)')\ndf_100.head()","5bbfac5e":"df_10020 = df_100.sort_values(by=\"DinnerRating\", ascending=False)[0:20]\ndf_10020.head()","5e146c94":"# \u6700\u9ad8\u70b9\u6570\u306e\u300c\u4eac\u61d0\u77f3 \u5409\u6cc9\u300d\u306e\u5834\u6240\u3092\u898b\u3066\u307f\u308b\n\nLAT = data.Lat.iloc[0]\nLNG = data.Long.iloc[0]\n\nm = folium.Map(location=[LAT, LNG])\nfolium.Marker(\n    location=[data.Lat.iloc[767], data.Long.iloc[767]],\n    popup=\"This is Simple Marker\",\n).add_to(m)\nm","ec3e7b7d":"df_fc = data.groupby([\"FirstCategory\"])[\"TotalRating\"].count()\ndf_fc = df_fc.sort_values(ascending=False)[0:30]\ndf_fc","fbd353f0":"df_ikitai = df.query('(DinnerPrice < 10000) & (DinnerRating > 3.5) & (FirstCategory == \"Steak\")')\ndf_ikitai","22cc4522":"# 1\u4e07\u5186\u4ee5\u4e0b\u3067\u3001\u70b9\u6570\uff13\uff0e\uff15\u4ee5\u4e0a\u306e\u30b9\u30c6\u30fc\u30ad\u5e97\u300c\u30d7\u30e9\u30f3\u30c1\u30e3\u30fc\u5065\u300d\u306e\u5834\u6240\u3092\u898b\u3066\u307f\u308b\n\nLAT = data.Lat.iloc[0]\nLNG = data.Long.iloc[0]\n\nm = folium.Map(location=[LAT, LNG])\nfolium.Marker(\n    location=[data.Lat.iloc[304], data.Long.iloc[304]],\n    popup=\"This is Simple Marker\",\n).add_to(m)\nm","fa5eb5b1":"# \u70b9\u6570\uff13\uff0e\uff15\u4ee5\u4e0a\u30015000\u5186\u4ee5\u4e0b\u3067\u98f2\u3081\u308b\u5c45\u9152\u5c4b\u30ea\u30b9\u30c8\n\ndf_ikitai_izakaya = df.query('(DinnerPrice < 5000) & (DinnerRating > 3.5) & (FirstCategory == \"Izakaya (Tavern)\")')\ndf_ikitai_izakaya","e9dab166":"# \u77f3\u5840\u5c0f\u8def \u8c46\u3061\u3083 \u4eac\u90fd\n\nLAT = data.Lat.iloc[0]\nLNG = data.Long.iloc[0]\n\nm = folium.Map(location=[LAT, LNG])\nfolium.Marker(\n    location=[data.Lat.iloc[9], data.Long.iloc[9]],\n    popup=\"This is Simple Marker\",\n).add_to(m)\nm","7f857a95":"plt.figure(figsize=(30, 20))\nx = df['FirstCategory'][0:50]\nsns.boxplot(x, y=\"TotalRating\", data=df)","3f1bb0cb":"\u671f\u305b\u305a\u3057\u3066\u3001\u98df\u3079\u30ed\u30b0\u304b\u3089\u5834\u6240\u691c\u7d22\u3067\u304d\u308b\u3082\u306e\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u30b8\u30e3\u30f3\u30eb\u3068\u304b\u3067\u3082\u691c\u7d22\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b","62a0d712":"\u3042\u307e\u308a\u610f\u5473\u304c\u306a\u304b\u3063\u305f\u304b\u3082\u77e5\u308c\u306a\u3044\u30fb\u30fb\u30fb\n\nDinnerPrice \u3067\u5206\u6790\u3057\u3066\u307f\u3088\n\n< 8000 = \u00a59999\u4ee5\u4e0b  \u3068\u3001\u3000> 10000 = \u00a510000\u4ee5\u4e0a\n","dd06c3f6":"\u00a520000-\u00a529999\u306e\u70b9\u6570\u304c\u9ad8\u3044\u3057\u3001\u5e45\u304c\u5e83\u3044\n\n\u00a58000-\u00a59999\u3082\u5e45\u5e83\u3044\n\n\u9ad8\u3044\u304a\u5e97\u304c\u70b9\u6570\u9ad8\u3044\u306e\u306f\u305d\u3046\u3060\u3088\u306d\u30fb\u30fb\u30fb","b0858669":"\u30ab\u30c6\u30b4\u30ea\u306b\u3088\u3063\u3066\u70b9\u6570\u306e\u3070\u3089\u3064\u304d\u304c\u3042\u308b\u306e\u304b\uff1f\uff1f","1e8e0396":"\u3053\u3093\u306a\u3068\u3053\u308d\u306b\u3042\u3063\u305f\u3093\u3060\u3042\u30fb\u30fb\u30fb","52dabe18":"\u7947\u5712\u306e\u8fd1\u304f\u304b\u3042\u30fb\u30fb\u30fb","e7a41361":"\u30b3\u30b9\u30c8\u5bfe\u52b9\u679c\u304c\u826f\u3044\u5e97\u306f\uff1f\n\nDinnerPrice \/ DinnerRating = ce_d\u3000\uff08cost-effective\uff1a\u65b0\u3057\u3044\u70b9\u6570\uff09","de922e1c":"\u98df\u3079\u30ed\u30b0\u306e\u70b9\u6570\u9ad8\u3044\u304a\u5e97\u3092\u63a2\u3057\u3066\u30ea\u30b9\u30c8\u3067\u3082\u4f5c\u308d\u3046"}}