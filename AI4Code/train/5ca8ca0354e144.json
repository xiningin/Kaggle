{"cell_type":{"10a40b45":"code","2de6d554":"code","a515f9ae":"code","5acff416":"code","4a20d386":"code","c96aa338":"code","d5e5e0ea":"code","91bdd661":"code","17e69f08":"code","e79a2d2e":"code","26073f13":"code","4a52d9c6":"code","fb739b12":"code","ad0bf1d5":"markdown","7b9d7e5d":"markdown","6da0d233":"markdown","03d502da":"markdown","c938f7cc":"markdown","16538606":"markdown","4d873dfc":"markdown","f6a4e4d3":"markdown","bc3e7be4":"markdown","e44164dd":"markdown","67827e0f":"markdown"},"source":{"10a40b45":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\nfrom termcolor import colored\nfrom PIL import Image\n\n#for word cloud\nfrom subprocess import check_output\nfrom wordcloud import WordCloud, STOPWORDS\nstopwords = set(STOPWORDS)\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport random\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode()\nimport plotly.graph_objs as py\n\nimport seaborn as sns\n# Any results you write to the current directory are saved as output.","2de6d554":"choco = pd.read_csv(\"..\/input\/chocolate-bar-ratings\/flavors_of_cacao.csv\")\ncodes = pd.read_csv(\"..\/input\/country-codes\/Country_code.csv\")","a515f9ae":"#Sanitization of Data as per need, lets leave the original file untouched --Note: this step was acheived later after analysis of Dataset\nchocotemp = choco\nchocotemp[\"Cocoa\\nPercent\"] = chocotemp[\"Cocoa\\nPercent\"].str.replace('%','').astype('float')\nchocotemp = chocotemp.rename(columns={'Company \\n(Maker-if known)': 'Maker', 'Specific Bean Origin\\nor Bar Name': 'Bar Name', \\\n                                     'Review\\nDate':'ReviewDate','Cocoa\\nPercent':'CocoaPercent','Company\\nLocation':'CompanyLocation',\\\n                                     'Bean\\nType':'BeanType','Broad Bean\\nOrigin':'Broad Bean Origin'})\nchocotemp.columns.values[0] = 'Maker'\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Domincan Republic','Dominican Republic')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Eucador','Ecuador')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Niacragua','Nicaragua')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Amsterdam','Netherlands')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Sao Tome','Sao Tome and Principe')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('St. Lucia','Saint Lucia')\nchocotemp[\"CompanyLocation\"] = chocotemp[\"CompanyLocation\"].str.replace('Martinique','Puerto Rico')\n\n#chocotemp.groupby(\"CompanyLocation\")[\"CompanyLocation\"].count()","5acff416":"chcocomaxP = chocotemp.groupby(\"CompanyLocation\")[\"CocoaPercent\"].mean().sort_values(ascending=False).head(10)\nprint(colored(\"Top 10 Locations that produces Darkest Chocolates:\",'blue'))\n\nplt.figure(figsize=(18,9))\nplt.bar(x=chcocomaxP.index,height=chcocomaxP.values,color=\"#674321\",hatch='+',edgecolor=[\"black\"]*10)\nplt.xlabel(\"Locations\",color=\"grey\")\n#plt.title(\"Top 10 Locations that produces Darkest Chocolates\",color=\"blue\")\nplt.ylabel(\"Avg. Cocoa %\",color=\"grey\")\nplt.show()","4a20d386":"#Data Prep\ntop6coco = chocotemp.groupby('BeanType')[\"CocoaPercent\"].mean().sort_values(ascending=False).head(6)\nx=pd.Series(top6coco.index)\ny=pd.Series(top6coco.values)","c96aa338":"#plot\nfig = plt.figure(figsize=(15,9))\nplt.bar(x=x.values,height=y , color=\"#654321\",hatch='||',edgecolor=['black']*6)\nplt.xlabel('Bean Types',color='grey')\nplt.ylabel('Cocoa Percent (%)',color='grey')\nplt.ylim(ymin=60) \nplt.yticks(np.arange(60, 82, 1.0))\nplt.show()","d5e5e0ea":"#Grey color function\ndef grey_color_func(word, font_size, position, orientation, random_state=None,\n                    **kwargs):\n    col = ['rgb(210,105,30)','rgb(139,69,19)','rgb(160,82,45)','rgb(165,42,42)','rgb(128,0,0)']\n    return random.choice(col)\n    #return \"hsl(0, %d%%, %d%%)\" % (np.random.randint(60, 80),np.random.randint(60, 100))\n\n#Main WordCloud Code\nwc = (WordCloud(width=1440, height=1080, relative_scaling=0.5, stopwords=stopwords).generate_from_frequencies(chocotemp['Maker'].value_counts()))\n\nfig = plt.figure(1,figsize=(15, 15))\nplt.imshow(wc.recolor(color_func=grey_color_func, random_state=3),\n           interpolation=\"bilinear\")\nplt.axis('off')\nplt.show()","91bdd661":"#fetching needed data and Data Prep\nchocoCountry = chocotemp.groupby(\"CompanyLocation\")[\"CompanyLocation\"].count().sort_values(ascending=False)\nchocoWorld = pd.DataFrame()\nchocoWorld[\"Country\"] = pd.Series(chocoCountry.index)\nchocoWorld[\"Counts\"] = pd.Series(chocoCountry.values)\nchocoWorld[\"Code\"] = pd.Series(['USA']) #initializing first element","17e69f08":"for i in range(1,55):\n    chocoWorld[\"Code\"][i] = str(codes[codes.COUNTRY == chocoWorld[\"Country\"][i]][\"CODE\"].values).replace('[','').replace(']','').replace('\\'','')\n#left manual work\nchocoWorld[\"Code\"][3] = 'GBR'\nchocoWorld[\"Code\"][22] = 'GBR' #Scotland falls under United Kingdom (Great Britain)\nchocoWorld[\"Code\"][55] = 'GBR'#Wales falls under United Kingdom (Great Britain)\nchocoWorld[\"Code\"][33] = 'KOR'\n","e79a2d2e":"data = [ dict(\n        type = 'choropleth',\n        locations = chocoWorld[\"Code\"],\n        z = chocoWorld[\"Counts\"],\n        text = chocoWorld[\"Country\"],\n        colorscale = [[0,\"rgb(89, 78, 66)\"],[0.35,\"rgb(128,0,0)\"],[0.5,\"rgb(165,42,42)\"],\\\n            [0.6,\"rgb(160,82,45)\"],[0.7,\"rgb(139,69,19)\"],[1,\"rgb(210,105,30)\"]],\n        autocolorscale = False,\n        reversescale = True,\n        marker = dict(\n            line = dict (\n                color = 'rgb(180,180,180)',\n                width = 0.5\n            ) ),\n        colorbar = dict(\n            autotick = False,\n            tickprefix = '#',\n            title = '#Companies'),\n      ) ]\n\nlayout = dict(\n    title = 'Where are the Chocolates producing Companies located?',\n    geo = dict(\n        showframe = False,\n        showcoastlines = False,\n        showland=True,\n        showocean=True,\n        projection = dict(\n            type = 'natural earth'\n        )\n    )\n)\n\nfig = dict( data=data, layout=layout )\niplot( fig, validate=False, filename='d3-world-map' )","26073f13":"sns.jointplot(x='Rating', y='CocoaPercent', \n              data=chocotemp, color ='#FA8C00', kind ='reg', \n              size = 8.0)\nplt.show()\n","4a52d9c6":"top10 = chocotemp.groupby(\"Broad Bean Origin\")[\"Broad Bean Origin\"].count().sort_values(ascending=False).head(10)\nnames = list(top10.index)\nnames[5] = \"unknown\"\n\nplt.figure(figsize=(18,9))\nplt.bar(x=names,height=top10.values,color=\"#654321\",edgecolor=[\"black\"]*10,hatch='|\/')\nplt.xlabel(\"Broad Beans Origin\",color=\"grey\")\nplt.title(\"Where does the Broad Beans come from (Top 10 Locations)?\",color=\"blue\")\nplt.ylabel(\"Count\",color=\"grey\")\nplt.show()","fb739b12":"cm = sns.light_palette(\"blue\", as_cmap=True)\na = chocotemp.groupby(\"Broad Bean Origin\")[\"Rating\"].mean().sort_values(ascending = False).head(20)\ntemp = pd.DataFrame()\ntemp[\"Broad Bean Origin\"] = a.index\ntemp[\"Average Rating\"] = a.values\ntemp.style.background_gradient(cmap=cm)","ad0bf1d5":"**<font size=4 color=\"#830303\">Welcome On Board Chocolate Lovers' Have a Bite!<\/font>**\n<br\/>\n![Giant Bar](https:\/\/i.pinimg.com\/originals\/d1\/a6\/40\/d1a640505128d896eb95e2475b849289.jpg)","7b9d7e5d":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">From the Famous Makers of the Chocolates' presenting you the WordCloud<\/font>***","6da0d233":"**Datasets Used:**","03d502da":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Top 10 Locations that produces Darkest Chocolates<\/font>***","c938f7cc":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Where does the Broad Beans come from (Top 10 Locations)?<\/font>***","16538606":"***There is no clear trend\/relationship, but it seems people prefer Mild Chocolates not Dark!***","4d873dfc":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Broad Beans' Location and Average Ratings<\/font>***","f6a4e4d3":"**Data Preparation (basic)**","bc3e7be4":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Does Consumer Prefers Dark Chocolates?<\/font>***","e44164dd":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Chocolates Producing Companies location on the Map<\/font>***","67827e0f":"<br\/>\n***<font size=\"4\" color=\"#D4AF37\">Top 6 Dark-Chocolates Bean Types!<\/font>***"}}