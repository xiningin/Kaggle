{"cell_type":{"fe94ac33":"code","b77d60c7":"code","f7663bcd":"code","208baeb3":"code","129e0ba8":"code","dd5e77f6":"code","2714dab6":"code","7308a0db":"code","f6869eac":"code","aa29d6ca":"code","660c407c":"code","25d20123":"code","1ba62ee8":"code","fb088c1b":"code","99888aa3":"code","f5af32f9":"code","1735da7c":"code","5b0ca7b5":"code","9e45ffd7":"code","0f616c0c":"code","50b285f9":"code","6cff5db5":"code","80086e53":"code","9429a22b":"code","0ec11443":"code","93532d1d":"code","8444af6f":"code","aed370b1":"code","8fd02a0b":"code","1443a04e":"markdown","5edac307":"markdown","7f55c4a9":"markdown","76348cba":"markdown","5c8b4104":"markdown","51c01d47":"markdown","5a986fc6":"markdown"},"source":{"fe94ac33":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","b77d60c7":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport sklearn.tree as tree\nimport sklearn.ensemble as ensem\nfrom sklearn.model_selection import train_test_split","f7663bcd":"identity = pd.read_csv(\"..\/input\/train_identity.csv\",header=0)\ntransaction = pd.read_csv(\"..\/input\/train_transaction.csv\",header=0)","208baeb3":"tempData = transaction[[\"TransactionAmt\",\"ProductCD\",\"card4\",\"isFraud\"]]","129e0ba8":"tempData.head()","dd5e77f6":"#how many frauddata and  non fraud records \ntempData.isFraud.value_counts()","2714dab6":"### Description of isFraud column \ntempData.groupby(\"isFraud\").describe()","7308a0db":"tempData.card4.isna().any()","f6869eac":"tempData.card4.isna().sum()","aa29d6ca":"from IPython.display import display, Markdown","660c407c":"\nsns.distplot(tempData.TransactionAmt)","25d20123":"sns.jointplot(x=\"isFraud\", y=\"TransactionAmt\", data=tempData);","1ba62ee8":"data = tempData.groupby('isFraud').apply(lambda x: x.sample(n=20000))\ndata.reset_index(drop=True, inplace=True)","fb088c1b":"data.head()","99888aa3":"data.ProductCD.value_counts()","f5af32f9":"data.card4.value_counts()","1735da7c":"data.card4.value_counts()","5b0ca7b5":"data.replace({\"ProductCD\":{'C':0,'H':1,'R':2,'S':3,'W':4},\n            \"card4\":{\"american express\":0,\"discover\":1,\"mastercard\":2,\"visa\":3}\n           }, inplace=True)","9e45ffd7":"data.card4.value_counts()","0f616c0c":"data.isna().any()","50b285f9":"data.ProductCD.value_counts()","6cff5db5":"data.dropna(axis=0,inplace=True)","80086e53":"data.head()","9429a22b":"indData = data.loc[:,\"TransactionAmt\":\"card4\"]\ndepdData = data.loc[:,'isFraud']\nindTrain, indTest, depTrain, depTest \\\n= train_test_split(indData, depdData, test_size=0.2, random_state=0)","0ec11443":"mytree =  tree.DecisionTreeClassifier(criterion='entropy',max_depth=50)","93532d1d":"import sklearn.metrics as metric","8444af6f":"mytree.fit(indTrain,depTrain)\npredVal =  mytree.predict(indTest)\nactVal = depTest.values\nmetric.confusion_matrix(actVal, predVal)","aed370b1":"metric.accuracy_score(actVal, predVal)","8fd02a0b":"rft =  ensem.RandomForestClassifier(criterion='entropy',max_depth=30,\n                                   n_estimators=500,verbose=0)\nrft.fit(indTrain,depTrain)\npredVal =  rft.predict(indTest)\nactVal = depTest.values\nprint(metric.confusion_matrix(actVal, predVal))\nprint(metric.accuracy_score(actVal, predVal))","1443a04e":"### Stratified sampling ","5edac307":"I have just taken four columns \n\n* TransactionAmt\n* ProductCD\n* card4 \n* isFraud\n\nI want to see the relationship of first three that is TransactionAmt, ProductCD, card4 with isFraud and also want to **fit** Decesion tree and see the performance of it","7f55c4a9":"### Deviding data into training and testing part","76348cba":"### How many type of cards are used for transactions ?","5c8b4104":"### Description of TransactionAmt groupd on isFraud column \n\n* Mean value of TransactionAmt for catogry  1 is high\n* Median value of TransactionAmt for catogry  1 is less than catogry 0 \n* The TransactionAmt for catogry  1 is  more skewed on right side for category 1","51c01d47":"### From output above, it is sure that this data is imbalance. ","5a986fc6":"# Hope you have enjoyed this kernel. If enjoyed kindly upvote it "}}