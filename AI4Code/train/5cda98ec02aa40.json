{"cell_type":{"a8fb35a6":"code","9dff8eb2":"code","4c0fa638":"code","6cfebdad":"code","52eb8b97":"code","79a3446f":"code","3a7db758":"code","6cccdbd0":"code","ba0758b6":"code","987861f0":"code","1352a3cc":"code","d8e81e05":"code","a6c421d1":"code","a7197a6b":"code","03459676":"code","0b02d51c":"code","307e1708":"code","08f4bfd5":"code","708a4bdd":"code","321a9689":"code","7b7b29b6":"code","3b95a266":"code","19e00efa":"code","888bde0c":"code","9fc38a3f":"code","34bfd024":"code","1d228660":"code","02ad9d4a":"code","01187535":"code","05773975":"code","1d89767b":"code","02511233":"code","55a1a662":"code","bf3f45bb":"code","d6690296":"code","412bcabb":"code","958c6e73":"code","a3264698":"code","ff4027b9":"code","90b3b1e8":"code","8c2dff61":"code","9bc5bd2e":"code","ecb22cd1":"markdown","349b8578":"markdown","aceacf6c":"markdown","0530737a":"markdown","b713de1f":"markdown","8e2d0d69":"markdown","12752a61":"markdown","81025b9b":"markdown","4ddb5928":"markdown","f6822412":"markdown"},"source":{"a8fb35a6":"import plotly.express as px\nimport plotly\n!pip install dabl -q\nimport dabl\nimport pandas as pd\nimport numpy as np\nimport plotly.graph_objs as go\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom matplotlib import rcParams\nimport warnings\nwarnings.filterwarnings('ignore')\nimport re\nimport string\nimport nltk\nfrom nltk.corpus import stopwords\nfrom collections import Counter\nfrom wordcloud import WordCloud\nfrom pandas_profiling import ProfileReport\nimport plotly.io as pio\npio.templates.default = \"ggplot2\"\nplt.rcParams['figure.figsize'] = (20,10)\n","9dff8eb2":"episodes = pd.read_csv('..\/input\/chai-time-data-science\/Episodes.csv',parse_dates=['recording_date','release_date'])\nthumbnails = pd.read_csv('..\/input\/chai-time-data-science\/YouTube Thumbnail Types.csv')\nathumbnails = pd.read_csv('..\/input\/chai-time-data-science\/Anchor Thumbnail Types.csv')\ndescription = pd.read_csv('..\/input\/chai-time-data-science\/Description.csv')","4c0fa638":"episodes.head()","6cfebdad":"episodes.info()","52eb8b97":"dabl.plot(episodes, 'youtube_views')","79a3446f":"profile = ProfileReport(episodes, title=\"Pandas Profiling Report\")","3a7db758":"profile.to_notebook_iframe()\n","6cccdbd0":"null_counts = episodes.isnull().sum()\/len(episodes)\nplt.figure(figsize=(16,8))\nplt.xticks(np.arange(len(null_counts))+0.5,null_counts.index,rotation='vertical')\nplt.ylabel('fraction of rows with missing data')\nplt.bar(np.arange(len(null_counts)),null_counts)","ba0758b6":"episodes.head()","987861f0":"val_count_gen = episodes['heroes_gender'].value_counts().reset_index()\nval_count_gen.columns = ['Gender','count']\n","1352a3cc":"fig = px.bar(val_count_gen, x='Gender', y='count', color='Gender', title='Count of Heroes (Gender Wise)')\nfig.show()","d8e81e05":"val_count_gen = episodes['heroes_nationality'].value_counts().reset_index()\nval_count_gen.columns = ['heroes_nationality','count']\nfig = px.bar(val_count_gen, x='heroes_nationality', y='count', color='heroes_nationality', title='Count of Heroes Nationality')\nfig.show()","a6c421d1":"pd.crosstab(index = episodes['episode_id'],columns=episodes['heroes'], margins=True, margins_name = 'Total').iloc[:10]","a7197a6b":"episodes['spotify_streams'] \\\n    .plot(kind='hist',\n          bins=90,\n          figsize=(15, 5),\n          label='Mens',\n          alpha=0.5)\nepisodes['spotify_listeners'] \\\n    .plot(kind='hist',\n          bins=105,\n          figsize=(15, 5),\n          label='Womens',\n          alpha=0.5)\nplt.title('Score Differential')\nplt.xlim(0,60)\nplt.legend()\nplt.show()","03459676":"data_to_plot = episodes.dropna(subset=['heroes','youtube_subscribers'])\nfig = px.bar(data_to_plot, x='heroes', y='youtube_subscribers', color='heroes_nationality', title='YouTube Subscribers (Heroes)')\nfig.show()","0b02d51c":"labels = episodes['flavour_of_tea'].value_counts()[:10].index\nvalues = episodes['flavour_of_tea'].value_counts()[:10].values\ncolors=['#4458bf',\n '#99adbf']\n\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, textinfo='label+percent',\n                             insidetextorientation='radial',marker=dict(colors=colors))])\nfig.update_layout(title=\"Chai Distribution \",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","307e1708":"labels = episodes['category'].value_counts()[:10].index\nvalues = episodes['category'].value_counts()[:10].values\ncolors=['#4458bf',\n '#99adbf']\n\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, textinfo='label+percent',\n                             insidetextorientation='radial',marker=dict(colors=colors))])\nfig.update_layout(title=\"Category Distribution \",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","08f4bfd5":"episodes.head()","708a4bdd":"data_to_plot = episodes.dropna()\nfig = px.sunburst(data_to_plot, path=['category', 'flavour_of_tea'], values='apple_avg_listen_duration',\n                  color='heroes_gender', hover_data=['youtube_subscribers'])\nfig.show()","321a9689":"fig = px.scatter(episodes, x=\"youtube_views\", y=\"youtube_likes\", color=\"category\", marginal_y=\"violin\",\n           marginal_x=\"box\", trendline=\"ols\")\nfig.show()","7b7b29b6":"labels = episodes['heroes_kaggle_username'].value_counts()[:10].index\nvalues = episodes['heroes_kaggle_username'].value_counts()[:10].values\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, textinfo='label+percent',\n                             insidetextorientation='radial',marker=dict(colors=colors))])\nfig.update_layout(title=\"Kaggle Users Distribution \",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","3b95a266":"fig = px.scatter(episodes, x=\"youtube_views\", y=\"youtube_subscribers\", color=\"category\", marginal_y=\"violin\",\n           marginal_x=\"box\", trendline=\"ols\")\nfig.show()","19e00efa":"fig = px.scatter_geo(data_to_plot, locations=\"heroes_location\", color=\"heroes_location\", hover_name=\"heroes_location\", size=\"youtube_views\", projection=\"natural earth\")\nfig.show()","888bde0c":"sns.countplot(episodes['heroes_nationality'], palette = 'Dark2',hue='category',data=episodes)\nplt.title('Nationality wise Category distribution', fontsize = 20)\nplt.show()","9fc38a3f":"labels = ['Morning', 'Evening', 'Afternoon', 'Night']\nsizes = episodes['recording_time'].value_counts()\ncolors = plt.cm.Dark2(np.linspace(0, 1, 4))\nexplode = [0.1, 0.1, 0.2, 0.5]\n\nplt.rcParams['figure.figsize'] = (9, 9)\nplt.pie(sizes, labels = labels, colors = colors, explode = explode, shadow = True)\nplt.title('Recoding time for CTDS.show', fontsize = 20)\nplt.legend()\nplt.show()","34bfd024":"plt.rcParams['figure.figsize'] = (15, 5)\nsns.distplot(episodes['youtube_views'], color = 'b')\nplt.xlabel('Youtube views', fontsize = 16)\nplt.ylabel('Number of Views', fontsize = 16)\nplt.title('Distribution of Youtube Views', fontsize = 20)\nplt.xticks(rotation = 90)\nplt.show()","1d228660":"fig = px.scatter(episodes, x=\"release_date\", y=\"youtube_views\", color=\"category\",\n                 size='episode_duration', hover_data=['episode_duration'])\nfig.update_layout(title=\"Release Date vs Youtube Views\",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","02ad9d4a":"sns.set(style = \"dark\", palette = \"deep\", color_codes = True)\nx = episodes.episode_duration\nplt.figure(figsize = (12,8))\nplt.style.use('ggplot')\n\nax = sns.distplot(x, bins = 10, kde = True, color = 'g')\nax.set_xlabel(xlabel = \"Episodes\", fontsize = 16)\nax.set_ylabel(ylabel = 'Duration(sec)', fontsize = 16)\nax.set_title(label = 'Histogram Episodes Duration', fontsize = 20)\nplt.show()\n","01187535":"sns.set(style = \"dark\", palette = \"deep\", color_codes = True)\nx = episodes.youtube_avg_watch_duration\nplt.figure(figsize = (12,8))\nplt.style.use('ggplot')\n\nax = sns.distplot(x, bins = 10, kde = False, color = 'b')\nax.set_xlabel(xlabel = \"youtube_avg_watch_duration\", fontsize = 16)\nax.set_ylabel(ylabel = 'Duration(sec)', fontsize = 16)\nax.set_title(label = 'Histogram Youtube watch Duration', fontsize = 20)\nplt.show()\n","05773975":"epi_thumb = episodes.merge(thumbnails, left_on=\"youtube_thumbnail_type\", right_on=\"youtube_thumbnail_type\")\nepi_thumb[\"recording_date\"] = pd.to_datetime(epi_thumb[\"recording_date\"])\nepi_thumb[\"release_date\"] = pd.to_datetime(epi_thumb[\"release_date\"])","1d89767b":"fig = px.scatter(episodes, x=\"youtube_watch_hours\", y=\"youtube_avg_watch_duration\", color=\"recording_time\",\n                 size='youtube_watch_hours', hover_data=['episode_duration'])\nfig.update_layout(title=\"YouTube watch vs Youtube Average watch\",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","02511233":"fig = px.scatter(episodes, x=\"youtube_subscribers\", y=\"youtube_likes\", color=\"category\",\n                 size='youtube_watch_hours', hover_data=['episode_duration'])\nfig.update_layout(title=\"Subscriber vs Youtube likes\",font=dict(size=15,color=\"#7f7f7f\"))\nfig.show()","55a1a662":"s= episodes.groupby(['heroes','heroes_kaggle_username'])['youtube_watch_hours'].count().reset_index().sort_values(by='youtube_watch_hours',ascending=False)\ns.head(10).style.background_gradient(cmap='Oranges')","bf3f45bb":"s= episodes.groupby(['heroes','heroes_nationality'])['youtube_views'].count().reset_index().sort_values(by='youtube_views',ascending=False)\ns.head(10).style.background_gradient(cmap='Blues')","d6690296":"sns.relplot(x ='episode_duration', y ='youtube_avg_watch_duration', col = 'category', data = episodes, color = 'g', height = 5)","412bcabb":"sns.relplot(x ='youtube_subscribers', y ='youtube_avg_watch_duration', col = 'category', data = episodes, color = 'r', height = 5)","958c6e73":"sns.relplot(x ='youtube_views', y ='youtube_likes', col = 'heroes_gender', data = episodes, color = 'b', height = 5)","a3264698":"sns.relplot(x = 'apple_listeners', y = 'apple_listened_hours', kind = 'line', data=episodes,aspect = 1,height = 7, color = 'r')","ff4027b9":"sns.relplot(x = 'apple_listeners', y = 'apple_avg_listen_duration', kind = 'line', data=episodes,aspect = 1,height = 7, color = 'orange')","90b3b1e8":"plt.figure(figsize=(10,10))\nsns.heatmap(episodes.corr(), annot=True, linewidth=0.5, cmap='winter')","8c2dff61":"# text preprocessing helper functions\n\ndef clean_text(text):\n    '''Make text lowercase, remove text in square brackets,remove links,remove punctuation\n    and remove words containing numbers.'''\n    text = text.lower()\n    text = re.sub('\\[.*?\\]', '', text)\n    text = re.sub('https?:\/\/\\S+|www\\.\\S+', '', text)\n    text = re.sub('<.*?>+', '', text)\n    text = re.sub('[%s]' % re.escape(string.punctuation), '', text)\n    text = re.sub('\\n', '', text)\n    text = re.sub('\\w*\\d\\w*', '', text)\n    return text\n\n\ndef text_preprocessing(text):\n    \"\"\"\n    Cleaning and parsing the text.\n\n    \"\"\"\n    tokenizer = nltk.tokenize.RegexpTokenizer(r'\\w+')\n    nopunc = clean_text(text)\n    tokenized_text = tokenizer.tokenize(nopunc)\n    #remove_stopwords = [w for w in tokenized_text if w not in stopwords.words('english')]\n    combined_text = ' '.join(tokenized_text)\n    return combined_text","9bc5bd2e":"description['description'] = description['description'].apply(str).apply(lambda x: text_preprocessing(x))\nwordcloud = WordCloud(\n                          background_color='black',\n                          max_words=200,\n                          max_font_size=40, \n                          random_state=42\n                         ).generate(str(description['description']))\n\nplt.figure(figsize=(20, 16))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","ecb22cd1":"<img src = \"https:\/\/media.giphy.com\/media\/KZMRyVjEtdv8AU6mIr\/giphy.gif\">","349b8578":"## Cheers!!!\u2615\u2615\u2615\u2615\u2615\u2615","aceacf6c":"<img src = \"https:\/\/media.giphy.com\/media\/aKjaEWISv9Ie4\/source.gif\"\/>","0530737a":"<img src = \"https:\/\/media.giphy.com\/media\/xUA7b2kdiQaSyyAG0o\/source.gif\"\/>","b713de1f":"<img src = \"https:\/\/media.giphy.com\/media\/3o6Ztm9AHrsloT5LIk\/source.gif\">","8e2d0d69":"<img src = \"https:\/\/media.giphy.com\/media\/1lGI0MPO4M0bm\/source.gif\">","12752a61":"<img src = \"https:\/\/media.giphy.com\/media\/Wn74RUT0vjnoU98Hnt\/source.gif\">","81025b9b":"<img src =\"https:\/\/media.giphy.com\/media\/yr6mgdF0b9arC\/source.gif\"> ","4ddb5928":"<img src = \"https:\/\/chaitimedatascience.com\/content\/images\/2020\/07\/ctds-1.png\">","f6822412":"<img src = \"https:\/\/media.giphy.com\/media\/3o6nV3Ky2C3ZVl0sne\/giphy.gif\"\/>"}}