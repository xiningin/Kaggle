{"cell_type":{"6ad2ea84":"code","44eb69ff":"code","4163f0c1":"code","94d3e5c4":"code","e817b43f":"code","9fb25001":"code","b66373be":"code","e029960b":"code","9d66617b":"code","95bcf722":"code","12ec3dd1":"code","49502a94":"code","9fa1ce4e":"code","8a103bb6":"code","2355838a":"code","9119b9d5":"code","20b401f2":"code","a4f3614d":"code","7a817b25":"code","3a886e10":"code","7e401798":"code","6c08f7fd":"code","e1daec7f":"code","00d2948c":"code","520ab448":"code","ca00d38a":"code","b66085e5":"code","8390c038":"code","3e4f46f8":"code","8855273d":"code","ed295fcd":"code","4d775fe7":"code","a85e3d9d":"code","aa8de863":"code","91617cbb":"code","291f74fd":"code","7a9ffde1":"code","c8e3553b":"code","dc4e9998":"code","ef5cd131":"code","c0a9864e":"code","bc042144":"code","5e7b32b8":"code","cf3d87b7":"code","ba75249a":"code","dc5279b8":"code","dbe0932f":"code","6b68dd0c":"code","cd5e46bc":"code","62f954ba":"code","b408756e":"code","ddebca42":"code","67ce38dd":"code","20cbba1b":"markdown","6f9defc2":"markdown","dafad5a3":"markdown","ede65966":"markdown","e5555c9f":"markdown","80f81154":"markdown","da7fda48":"markdown","ae082e0e":"markdown","62ee09d3":"markdown","7b10fa93":"markdown","9cdc726c":"markdown","8b2332a3":"markdown","c8dc4d70":"markdown","7c11b502":"markdown","4ac18439":"markdown","124bf9ba":"markdown","ec84f6f0":"markdown","4586fe39":"markdown","8ca7b13c":"markdown","1fa4e48d":"markdown","a9aacf49":"markdown","95ce698f":"markdown","30aea71c":"markdown","261c91e5":"markdown","2e687ada":"markdown","aa60b514":"markdown","8b9c92d9":"markdown","9a9ee9ed":"markdown","2edd259b":"markdown","59e4ee8c":"markdown","63ef9106":"markdown","38a59b06":"markdown","33b6e233":"markdown","0c13c74f":"markdown","aca5dfde":"markdown","0117faf9":"markdown","cf48de84":"markdown","9deef4e5":"markdown","6249b31b":"markdown","ca365934":"markdown","da438c75":"markdown","a566dbca":"markdown","6fe3205f":"markdown","e9b22caf":"markdown","427f927a":"markdown","1acfb08c":"markdown","ffcb85bf":"markdown","eb2d652e":"markdown","b9d39558":"markdown","bb36d2fa":"markdown","6378476b":"markdown","ddba9fba":"markdown","fcc6f48b":"markdown","3c5aa628":"markdown","76873580":"markdown","d5ccdb29":"markdown"},"source":{"6ad2ea84":"import numpy as np\nimport pandas as pd\nimport warnings\nwarnings.filterwarnings(\"ignore\")","44eb69ff":"#Reading the file(downloaded from covid19india.org)\ndf = pd.read_csv('..\/input\/secondphase\/case_time_series_27.csv')\ndf.head()","4163f0c1":"#To avoid outliers\npop = df[['Date', 'Daily Confirmed', 'Total Confirmed', 'Daily Deceased', 'Total Deceased']][62:]","94d3e5c4":"pop['CFR'] = (pop['Daily Deceased']\/pop['Daily Confirmed'])*100 #Calculating Case Fatality Rate\npop.head()","e817b43f":"df[453:]['Total Deceased']\/df[453:]['Total Confirmed']*100","9fb25001":"pop['CFR'][pop['CFR']>17.5] #removing Outliers","b66373be":"pop['CFR'][pop['CFR']>17.5] = float(df[453:]['Total Deceased']\/df[453:]['Total Confirmed']*100)","e029960b":"import statistics #Mean and Standard Deviation\nprint('Population Mean = '+str(statistics.mean(pop['CFR'])))\nmu_pop = statistics.mean(pop['CFR'])\n#print('Phase1 Standard Deviation = '+str(statistics.stdev(pop['CFR'])))","9d66617b":"df1 = pop[0:183] #extracting from 1st April, 2020 to 30th September, 2020\ndf1 =  df1.reset_index()\ndf1.head()","95bcf722":"import statistics #Mean and Standard Deviation\nprint('Phase1 Mean = '+str(statistics.mean(df1['CFR'])))\nprint('Phase1 Standard Deviation = '+str(statistics.stdev(df1['CFR'])))","12ec3dd1":"import matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport seaborn as sns\n\n\n\nmpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.scatter(df1.index, df1['CFR'], s=20)\nplt.xlabel(\"Day\")\nplt.ylabel(\"Case Fatality Rate\")\nplt.show()\n\n","49502a94":"%matplotlib inline\nmpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.rcParams.update({'figure.figsize':(10, 4), 'figure.dpi':100})\n\nplt.hist(df1['CFR'], bins=40)\nplt.gca().set(title='Frequency Histogram', ylabel='Frequency')\n\n\n","9fa1ce4e":"df2 = pop[183:334] #Extracting from 1st October, 2020 to 30th January, 2021\ndf2 = df2.reset_index()\ndf2.head()","8a103bb6":"print('Phase2 mean = '+str(statistics.mean(df2['CFR'])))\nprint('Phase2 Standard Deviation = '+str(statistics.stdev(df2['CFR'])))","2355838a":"import matplotlib.pyplot as plt\nmpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.scatter(df2.index, df2['CFR'], s=20, c='#e66c80')\nplt.xlabel(\"Day\")\nplt.ylabel(\"Case Fatality Rate\")\nplt.show()\n\n","9119b9d5":"%matplotlib inline\nmpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.rcParams.update({'figure.figsize':(10, 5), 'figure.dpi':100})\n\nplt.hist(df2['CFR'], bins=10, color = \"#e66c80\")\nplt.gca().set(title='Frequency Histogram', ylabel='Frequency')","20b401f2":"df3 = pop[334:] #Extracting from 1st February, 2021 till date\ndf3 = df3.reset_index()\ndf3.head()","a4f3614d":"print('Phase3 mean = '+str(statistics.mean(df3['CFR'])))\nprint('Phase3 Standard Deviation = '+str(statistics.stdev(df3['CFR'])))","7a817b25":"import matplotlib.pyplot as plt\nplt.figure(figsize=(10,5))\nplt.scatter(df3.index, df3['CFR'], s=20, c='#8ebf7a')\nplt.xlabel(\"Day\")\nplt.ylabel(\"Case Fatality Rate\")\nplt.show()","3a886e10":"%matplotlib inline\nmpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.rcParams.update({'figure.figsize':(10, 5), 'figure.dpi':100})\n\nplt.hist(df3['CFR'], bins=10, color = \"#8ebf7a\")\nplt.gca().set(title='Frequency Histogram', ylabel='Frequency')","7e401798":"#z-test\nimport math\nimport numpy as np\nfrom numpy.random import randn\nfrom statsmodels.stats.weightstats import ztest\n  \n# Generate a random array of 50 numbers having mean 110 and sd 15\n# similar to the IQ scores data we assume above\nmean_iq = statistics.mean(df1['CFR'])\nsd_iq = statistics.stdev(df1['CFR'])\/math.sqrt(len(df1['CFR']))\nalpha =0.05\nnull_mean = mu_pop\ndata = sd_iq*randn(len(df1['CFR']))+mean_iq\n# print mean and sd\nprint('mean=%.2f stdv=%.2f' % (np.mean(data), np.std(data)))\n  \n# now we perform the test. In this function, we passed data, in value parameter\n# we passed mean value in the null hypothesis, in alternative hypothesis we check whether the\n# mean is larger\n  \nztest_Score, p_value= ztest(data,value = null_mean, alternative='larger')\n# the function outputs a p_value and z-score corresponding to that value, we compare the \n# p-value with alpha, if it is greater than alpha then we do not null hypothesis \n# else we reject it.\n  \nif(p_value <  alpha):\n  print(\"Reject Null Hypothesis\")\nelse:\n  print(\"Fail to Reject NUll Hypothesis\")","6c08f7fd":"mean_iq = statistics.mean(df2['CFR'])\nsd_iq = statistics.stdev(df2['CFR'])\/math.sqrt(len(df2['CFR']))\nalpha =0.05\nnull_mean = mu_pop\ndata = sd_iq*randn(len(df2['CFR']))+mean_iq\n# print mean and sd\nprint('mean=%.2f stdv=%.2f' % (np.mean(data), np.std(data)))\n  \n# now we perform the test. In this function, we passed data, in value parameter\n# we passed mean value in the null hypothesis, in alternative hypothesis we check whether the\n# mean is larger\n  \nztest_Score, p_value= ztest(data,value = null_mean, alternative='larger')\n# the function outputs a p_value and z-score corresponding to that value, we compare the \n# p-value with alpha, if it is greater than alpha then we do not null hypothesis \n# else we reject it.\n  \nif(p_value <  alpha):\n  print(\"Reject Null Hypothesis\")\nelse:\n  print(\"Accept NUll Hypothesis\")","e1daec7f":"mean_iq = statistics.mean(df3['CFR'])\nsd_iq = statistics.stdev(df3['CFR'])\/math.sqrt(len(df3['CFR']))\nalpha =0.05\nnull_mean = mu_pop\ndata = sd_iq*randn(len(df3['CFR']))+mean_iq\n# print mean and sd\nprint('mean=%.2f stdv=%.2f' % (np.mean(data), np.std(data)))\n  \n# now we perform the test. In this function, we passed data, in value parameter\n# we passed mean value in the null hypothesis, in alternative hypothesis we check whether the\n# mean is larger\n  \nztest_Score, p_value= ztest(data,value = null_mean, alternative='larger')\n# the function outputs a p_value and z-score corresponding to that value, we compare the \n# p-value with alpha, if it is greater than alpha then we do not null hypothesis \n# else we reject it.\n  \nif(p_value <  alpha):\n  print(\"Reject Null Hypothesis\")\nelse:\n  print(\"Accept NUll Hypothesis\")","00d2948c":"from scipy import stats\nfrom statsmodels.stats import weightstats as stests\n\nztest ,pval1 = stests.ztest(df2['CFR'], x2=df1['CFR'], value=0,alternative='two-sided')\nprint(float(pval1))\nif pval1<0.05:\n    print(\"reject null hypothesis\")\nelse:\n    print(\"accept null hypothesis\")","520ab448":"from scipy import stats\nfrom statsmodels.stats import weightstats as stests\n\nztest ,pval1 = stests.ztest(df3['CFR'], x2=df1['CFR'], value=0,alternative='two-sided')\nprint(float(pval1))\nif pval1<0.05:\n    print(\"reject null hypothesis\")\nelse:\n    print(\"accept null hypothesis\")","ca00d38a":"from scipy import stats\nfrom statsmodels.stats import weightstats as stests\n\nztest ,pval1 = stests.ztest(df3['CFR'], x2=df2['CFR'], value=0,alternative='two-sided')\nprint(float(pval1))\nif pval1<0.05:\n    print(\"reject null hypothesis\")\nelse:\n    print(\"accept null hypothesis\")","b66085e5":"import seaborn as sns\nmpl.style.use('seaborn')\n#visualizing the time series of all the phases\nplt.figure(figsize=(10,5))\nplt.xlabel('DAY') \nplt.ylabel('Daily cases') \nplt.bar(df1['index'], df1['Daily Confirmed'], label='Dawn (Phase 1)')\nplt.bar(df2['index'], df2['Daily Confirmed'], color = '#e66c80', label='Calm (Phase 2)')\nplt.bar(df3['index'], df3['Daily Confirmed'], color = '#8ebf7a', label='Storm (Phase 3)')","8390c038":"#converting series to dataframes\ntime1 = pop['CFR'].to_frame()\ntime2 = df1['CFR'].to_frame()\ntime3 = df2['CFR'].to_frame()\ntime4 = df3['CFR'].to_frame()","3e4f46f8":"#naming labels\ntime1[\"Data\"] = \"Overall\"\ntime2[\"Data\"] = \"Dawn\"\ntime3[\"Data\"] = \"Calm\"\ntime4[\"Data\"] = \"Storm\"","8855273d":"#joining them\ntimes = [time1, time2, time3, time4]\nallTimes = pd.concat(times)","ed295fcd":"result = pd.concat(times)\n#result","4d775fe7":"import seaborn as sns\nsns.set_theme(style=\"whitegrid\")","a85e3d9d":"ax = sns.boxplot(x=\"Data\", y=\"CFR\", data=result)","aa8de863":"last_month = df3['CFR'][-28:] #Extracting last 4 week's data","91617cbb":"last_month_data = df3[-28:]","291f74fd":"last_month_data = last_month_data.reset_index()\nlast_month_data.head()","7a9ffde1":"last_month_data = last_month_data.rename(columns={\"level_0\": \"X1\"})\nlast_month_data.head()","c8e3553b":"last_month_data = last_month_data.reset_index()\nlast_month_data.head()","dc4e9998":"last_month_data = last_month_data.rename(columns={\"level_0\": \"X\"})\nlast_month_data.head()","ef5cd131":"mpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.xlabel('DAY') \nplt.ylabel('CFR') \nplt.bar(last_month_data['X'], last_month_data['CFR'], color ='Orange')\n#plt.plot(x, fitted_model(x), color ='orange')","c0a9864e":"last_month_data.to_csv('last_month.csv')","bc042144":"from scipy.stats import ttest_1samp\ntscore, pvalue = ttest_1samp(last_month, popmean=mu_pop)\nprint(\"t Statistic: \", tscore)  \nprint(\"P Value: \", pvalue)","5e7b32b8":"!pip install astropy","cf3d87b7":"from astropy import modeling","ba75249a":"x=last_month_data['X']","dc5279b8":"fitter = modeling.fitting.LevMarLSQFitter()\nmodel = modeling.models.Gaussian1D()   # depending on the data you need to give some initial values\nfitted_model = fitter(model, x, last_month_data['Daily Confirmed'])","dbe0932f":"mpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.xlabel('DAY') \nplt.ylabel('Cases Reported') \nplt.bar(x, last_month_data['Daily Confirmed'], color ='#7baaad')\nplt.plot(x, fitted_model(x), color ='orange')","6b68dd0c":"l = [i for i in range(0, 35)]\nl = pd.Series(l)","cd5e46bc":"#forecasts\nfitted_model(l)[-7:]","62f954ba":"n=1\nfor i in fitted_model(l)[-7:]:\n    print('Day '+str(n)+': '+str(i))\n    n=n+1","b408756e":"fitter = modeling.fitting.LevMarLSQFitter()\nmodel = modeling.models.Gaussian1D()   # depending on the data you need to give some initial values\nfitted_model = fitter(model, x, last_month_data['Daily Deceased'])","ddebca42":"mpl.style.use('seaborn')\nplt.figure(figsize=(10,5))\nplt.xlabel('DAY') \nplt.ylabel('Deaths') \nplt.bar(x, last_month_data['Daily Deceased'], color ='#b895c7')\nplt.plot(x, fitted_model(x), color ='orange')","67ce38dd":"n=1\nfor i in fitted_model(l)[-7:]:\n    print('Day '+str(n)+': '+str(i))\n    n=n+1","20cbba1b":"Mean and Standard Deviation","6f9defc2":"This shows Statistical Significance, which means that this is unlikely to occur at 95% confidence given the null hypothesis.","dafad5a3":"# Case Fatality Rate (CFR)","ede65966":"Especially, in the last 4 weeks, the virus has been spreading with an alarming rate, so I have taken only the last 28 days data to perform a T-test on this data with the overall Population Mean.","e5555c9f":"By Looking at 'Dawn', 'Calm' and 'Storm' the ranges and the medians appear to be shifting downwards.","80f81154":"As observed below, The Case Fatality Rate for the last few days are below 1%, which can give us hope for surviving this phase. ","da7fda48":"# Comparision of Phases by visualization","ae082e0e":"Mean and Standard Deviation","62ee09d3":"This shows very low Statistical Significance, which means that this very likely to occur at 95% confidence interval.\nTherefore 'Calm' Phase follows the similar pattern to the overall.","7b10fa93":"The distribution of the variable 'CFR' is skewed on the left side from the Histogram below","9cdc726c":"This means that the means of 'CFR's of the 'Dawn' (Phase 1) and 'Storm' (Phase 3) are significantly different and highly unlikely to occur at 95% confidence.","8b2332a3":"# Predicting Cases","c8dc4d70":"This means that the means of 'CFR's of the 'Clam' (Phase 2) and 'Storm' (Phase 3) are significantly different and highly unlikely to occur at 95% confidence.","7c11b502":"This shows very low Statistical Significance, which means that this very likely to occur at 95% confidence interval. Therefore 'Storm' Phase also follows the similar pattern to the overall.","4ac18439":"# One sample Z-test\n\nIn a one sample z-test we test the mean of a sample(which is a different phase in our example) with a known population mean(Mean of the entire 'CFR' value in the India dataset.","124bf9ba":"Testing Phase 2 against the Population Mean","ec84f6f0":"CFR looks like it has been elevating for the last few days","4586fe39":"Selecting the required Features","8ca7b13c":"# T-test\n\nThe One Sample t Test is commonly used to test the following: Statistical difference between a mean and a known or hypothesized value of the mean in the population. If the mean change score is not significantly different from zero, no significant change occurred.","1fa4e48d":"Case Fatality Rate is the number of reported Deaths due to Covid19 per the number of Reported Positive Cases on a particular Day.\nIt can be Calculated by:\nCFR = (Daily Deceased\/Daily Confirmed)*100 ","a9aacf49":"Visualizing all the Distributions","95ce698f":"# z - test\n\nThis Statistical test determines if two populations means are different when the sample size is more than 30. In this example, we assume that all the variables follow a normal distribution.\n\nA Null Hypothesis is assumed that there will be no significant difference between the population means.\nThe Alternative Hypothesis is that there will be a significant difference between the population means, and therefore it is unlikely that they are from the same sample at a certain Confidence level.\n\nA z-score is the result from the z-test\n\nz = (sample_mean-population_mean)\/Standard_deviation\n\nIn this example we assume the alpha value as 0.05 i.e. 95% confidence level for all the cases, if the computed p-value is less than alpha it will reject the null hypothesis else it will accept.\n\np-value indicates how unlikely the statistic is. z-score indicates how far away from the mean it is.\n\n![image.png](attachment:image.png)","30aea71c":"# Conclusion:\n\nIt can be inferred that there are significant differences between each phase which could be the result of factors like Mutation of the virus, Vaccination or enhanced therapeuics","261c91e5":"Visualizing the CFR for last 4 weeks","2e687ada":"Calculating Population Mean","aa60b514":"# Two Sample z-test\n\nI'm doing a 2-sample z-test to compare the means of each phase with one another, to prove if they are likely to occur or if there is any disruption that could have significantly changed the average of the 'CFR's in each phase.","8b9c92d9":"Mean and Standard Deviation","9a9ee9ed":"Histogram","2edd259b":"Scatter plot for CFR time series data","59e4ee8c":"# Predicting Deaths","63ef9106":"Calculating the Population Mean of CFR of the entire Dataset for further Statistical Analysis, as it is the mean of all the values in the population.","38a59b06":"This means that the means of 'CFR's of the 'Dawn' (Phase 1) and 'Calm' (Phase 2) are significantly different and highly unlikely to occur at 95% confidence. ","33b6e233":"Testing Phase 1 against the Population Mean","0c13c74f":"Phase 3 against Phase 2","aca5dfde":"# SIR Model\n\nAn SIR model is an epidemiological model that computes the theoretical number of people infected with a contagious illness in a closed population over time. The name of this class of models derives from the fact that they involve coupled equations relating the number of susceptible people S(t), number of people infected I(t), and number of people who have recovered R(t). One of the simplest SIR models is the Kermack-McKendrick model.\n\n![image.png](attachment:image.png)\n\nSince, we don't have the data of the number of Susceptible people, we will be predicting the Daily Cases and Deaths for the next week by fitting with the bell curve equation.\n\n![image-2.png](attachment:image-2.png)\n\n(This model is not to be confused with normal distribution even though they are similar)","0117faf9":"A downward trend in the CFR can be observed in the first phase(dawn) which means that the number of deaths per positive cases has been decreases that may be a result of improved therapeutics or Medical care in India.","cf48de84":"Next week forecasts for Daily Cases","9deef4e5":"Reject Null Hypothesis","6249b31b":"1.2% is the median CFR for 'Calm' phase.","ca365934":"Phase 3 against Phase 1","da438c75":"since P value is less than alpha value i.e. 0.05, the null hypothesis is rejected which means there is a Statistical Significance between the overall Mean 'CFR' and the mean of last month which could be caused by multiple factors.","a566dbca":"# Storm: Phase 3 (March - till Date)\n\nLike Predicted, India was hit by the second storm, following the same pattern as the other countries just with a lag. There has been a steep increase in the day-wise reported cases and deaths since March, 2021 after loosening the restrictions during the 'Calm' phase. Hospitals are being flooded with covid19 patients and there's a shortage of oxygen tanks excacerbating the severity.","6fe3205f":"Removing the outliers to minimize the bias ","e9b22caf":"One Sample T-test (against Population Mean)","427f927a":"# Analysing Last 4 weeks","1acfb08c":"# Visualizing the boxplots of all the Phases","ffcb85bf":"# Dawn (Phase 1)\n\nFirst Case of Covid19 in India is reported at Kerala on Jan 27th, 2020 and the rest is history. To mitigate the spread of the virus, Social Distancing has been imposed followed by closing of Universities, Schools, Movie Theatres. A nationwide Lockdown has been announced on 24th March, 2020 to 19th April, 2020 yet the cases of Covid19 continued to proliferate in April, and gradully plummeted in September after peaking in August.","eb2d652e":"Testing Phase 3 against the Population Mean","b9d39558":"The CFR seems to be hovering around 1.0% in the graph below, which means approximately 99% of the patients recover.  ","bb36d2fa":"# Results","6378476b":"1. Phase 1 vs Population - Reject Null Hypothesis \n2. Phase 2 vs Population - Accept Null Hypothesis\n3. Phase 3 vs Population - Accept Null Hypothesis\n4. Phase 1 vs Phase 2 - Reject Null Hypothesis\n5. Phase 1 vs Phase 3 - Reject Null Hypothesis\n6. Phase 2 vs Phase 3 - Reject Null Hypothesis\n7. Last 28 days vs Population - Reject Null Hypothesis (t-test)","ddba9fba":"# Calm: Phase 2(October - Feb)\n\nJust like the calmness of the eye of a Cyclone, there seem to be a steady decrease in the Daily cases between October, 2020 to February, 2021, As the Outbreak appeared to be in control, few states have decided to reopen Universities, Offices, Malls, etc.\nParallelly, contries like The United States, United Kingdom, etc are already hit by a much severe Second Wave. So, even though the lockdown is lifted in India, we need to be prepared for the worst.","fcc6f48b":"Phase 2 against Phase 1","3c5aa628":"Daily Deaths Forecast for next week","76873580":"# Introduction\n\nThis Data is being sourced from covid19india.org. As the second wave of the pandemic surges in India, There have been more 2k reported fatal cases for the last few days. I have done Statistical Analysis on this Data by dividing the timeline into three phases, where I'll be comparing each of them. In this Blog, The main area of focus will be on Case Fatality Rate. Since, reducing the fatality rate is the Primary aim.","d5ccdb29":"Most of the 'CFR' values are between 0.5% to 0.6% from the histogram."}}