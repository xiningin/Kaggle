{"cell_type":{"9a76b150":"code","e93914d0":"code","a57214c5":"code","9a5c746b":"code","d3a96929":"code","42ae2ece":"code","00f6fa88":"markdown"},"source":{"9a76b150":"#make a dictionary with file paths of all image ids\n#necessary because dataset is divided into 20 parts!\nimport os\nimport pickle\nimport pandas as pd\n\nimgid_paths={}\nsource_folders=[\"..\/input\/hpa-cropped-cells-{}20\".format(i+1) for i in range(20)]\nfor folder in source_folders:\n    files = [os.path.splitext(filename)[0] for filename in os.listdir(folder)]\n    imgid_paths.update(dict.fromkeys(files, folder))","e93914d0":"#add paths to dataframe\nhpa_data_df=pd.read_pickle(\"..\/input\/hpadata\/hpa_data_df.pkl\")\nhpa_data_df[\"path\"] = hpa_data_df.apply(lambda x: imgid_paths[x.ID+\"_\"+x.cell]+\"\/\"+x.ID+\"_\"+x.cell+\".png\", axis=1)\nhpa_data_df","a57214c5":"mkdir resized","9a5c746b":"#exceeds 9h kaggle runtime. must therefore be done in parts in parallel in different notebooks\n#also results in 20 datasets per resolution value when done in 20 parts per resolution\n\nfrom PIL import Image\nimport os, sys\nfrom tqdm import tqdm\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n\nfor path in tqdm(hpa_data_df[\"path\"][:100]):   ###just use 100 images only for visualization\n    if os.path.isfile(path):\n        image = Image.open(path)\n        file_name = path.split(\"\/\")[-1]\n\n        new_image_height = 240    ###CHOOSE DESIRED RESOLUTION HERE\n        new_image_length = 240    ###CHOOSE DESIRED RESOLUTION HERE TOO\n        \n        image = image.resize((new_image_height, new_image_length), Image.ANTIALIAS)\n        image.save(\".\/resized\/\"+file_name, 'PNG', quality=100)","d3a96929":"import shutil\nzip_name = 'resized'\ndirectory_name = 'resized'\n\nshutil.make_archive(zip_name, 'zip', directory_name)","42ae2ece":"rm -r resized","00f6fa88":"#### this notebook is part of the documentation on my HPA approach  \n    -> main notebook: https:\/\/www.kaggle.com\/philipjamessullivan\/0-hpa-approach-summary\n\n# 4: resize cell images to 4 resolutions needed for the 4 networks\n ## INPUT:\n **images:** All of the individual cell images cropped RGB images\n     -> saved as 20 parts, one dataset per part in \"hpa-cropped-cells-{}20\" (linked to this notebook)  \n ## RESULTS:\n**dataset name:** 4 * 20 = 80 datasets with the following names: (all linked in my account but not in this notebook --> too many)  \n        \"224x224 images {}\/20\"  \n        \"240x240 images {}\/20\"   \n        \"260x260 images {}\/20\"   \n        \"300x300 images {}\/20\"   \n**file type:** png files  \n**contents:** all individual cells as RGB images in desired smaller resolutions [224x224,240x240,260x260,300x300]"}}