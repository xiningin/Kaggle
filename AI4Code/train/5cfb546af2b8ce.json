{"cell_type":{"162034fc":"code","3ed8a815":"code","a3c222b0":"code","f079101a":"code","858aa652":"code","12693636":"code","ff51ebca":"code","371fca91":"code","d24e7c7e":"code","80dedcd2":"code","bb0f1348":"code","37edfeb6":"code","e1ec0d08":"code","740f516f":"code","93544012":"code","fb914175":"code","1b4d087c":"code","cfc7d592":"code","9cc0fb9d":"code","4dd573db":"code","93f3bfb3":"code","b9954a3f":"code","f4200f9b":"code","591228fe":"code","9cb8b659":"code","a997e0eb":"code","968769a7":"code","09761f45":"code","14272e84":"code","1b309c56":"code","e231a9ed":"code","f3240bf7":"code","fad9b8dc":"code","90bae3b8":"code","e4b6cd5a":"code","42401fa2":"code","f07cdd63":"code","3ae7bda3":"code","c23b66be":"code","944f7eb5":"code","256790ab":"code","11aa842c":"code","88a6b711":"markdown","0b6a9387":"markdown","08e0e23e":"markdown","b4ea66e7":"markdown","7551c5de":"markdown","62aba670":"markdown"},"source":{"162034fc":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","3ed8a815":"airbnb = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')","a3c222b0":"airbnb.head()","f079101a":"airbnb.info()","858aa652":"#it seems like last review and review per month has a lot of null values. host_name and name also have null figures.","12693636":"#Last review data nulls seems to coincide with reviews per month data, is last review data important though? \n#Some hostings have only limited bookings and none of them left a review. or they've never had any reviews. \n","ff51ebca":"#Because host_name is not needed, it shall be dropped. Also name column provides very little information and as it is too customised, also little use and will be dropped.\n#Null values from last review shall be filled with unknown ","371fca91":"airbnb.fillna({'last_review':'unknown','reviews_per_month':0},inplace=True)","d24e7c7e":"plt.figure(figsize=(12,8))\nsns.heatmap(airbnb.isnull(),cmap='coolwarm',yticklabels=False)","80dedcd2":"airbnb.drop('name',axis=1,inplace=True)","bb0f1348":"nullhostids = airbnb[airbnb['host_name'].isnull()]['host_id'].values\nnullhostids","37edfeb6":"airbnb[airbnb['host_id'].isin(nullhostids)]","e1ec0d08":"#Looks like there are no other instnaces where the names of the hosts are given. since hostnames is pretty useless, itll be dropped","740f516f":"airbnb.drop('host_name',axis=1,inplace=True)","93544012":"airbnb.isnull().sum()","fb914175":"#now data is clean of null values, lets start digging in","1b4d087c":"airbnb.head()","cfc7d592":"airbnb.groupby('neighbourhood_group')\n#seems like Mahattan and Brooklyn are very popular, lets visualise this ","9cc0fb9d":"sns.set_style('whitegrid')\nplt.figure(figsize=(10,8))\nsns.countplot(data=airbnb,x='neighbourhood_group')","4dd573db":"airbnb['neighbourhood'].nunique()\n#lets just graph the top 10 and see from there","93f3bfb3":"plt.figure(figsize=(13,10))\nsns.countplot(data=airbnb,x='neighbourhood',order=airbnb['neighbourhood'].value_counts().head(8).index)\nplt.tight_layout()\n#it looks like after 8 there arent many changes, lets just show top 8 ","b9954a3f":"#lets take a deeper dive into the neighbourhood_groups ","f4200f9b":"airbnb.groupby('neighbourhood_group')['price'].mean()","591228fe":"plt.figure(figsize=(10,10))\nsns.violinplot(data=airbnb[airbnb['price'] < 1200],x='neighbourhood_group',y='price')","9cb8b659":"#we can see not only is Manhattan most popular, it is also on average the most expensive area. ","a997e0eb":"#lets see which area is most profitable\nmeanprice = airbnb.groupby('neighbourhood_group')['price'].mean()\ngroup_counts = airbnb.groupby('neighbourhood_group')['id'].count()\ngroup_counts","968769a7":"profit = meanprice * group_counts","09761f45":"profit\n#we can see that Mahattan is by far most profitable ","14272e84":"profitdf = pd.DataFrame(profit)","1b309c56":"profitdf.plot(kind='bar',figsize=(8,8),color='blue',legend=False)\nplt.title('Neighbourhood Group Count')","e231a9ed":"airbnb['host_id'].value_counts().head(8)","f3240bf7":"plt.figure(figsize=(10,10))\nsns.countplot(data=airbnb,x='host_id',order=airbnb['host_id'].value_counts().head(5).index)","fad9b8dc":"top5hosts = airbnb['host_id'].value_counts().head(20).index","90bae3b8":"airbnb[airbnb['host_id'].isin(top5hosts)]['neighbourhood_group'].value_counts()\n#for the top 20 hosts, pretty much all their listings are in Manhattan. ","e4b6cd5a":"airbnb.head()","42401fa2":"import geopandas as gpd\nimport descartes\nfrom shapely.geometry import Point,Polygon","f07cdd63":"#nyc_map = gpd.read_file('geo_export_b20d26db-09ac-41a0-b27b-4bc7d7d23818.shp')\n#crs = {'init':'epsy:4326'}\n#geometry = [Point(xy) for xy in zip(airbnb['longitude'], airbnb['latitude'])]","3ae7bda3":"#geo_df = gpd.GeoDataFrame(airbnb,\n#                         crs = crs,\n#                         geometry = geometry)\n#geo_df.head()","c23b66be":"#sns.set_style('darkgrid')\n#fig,ax = plt.subplots(figsize=(15,15))\n#nyc_map.plot(ax=ax, alpha=1,color='green')\n#noutlier = airbnb[airbnb['price'] < 350]['price']\n#x = airbnb[airbnb['price'] < 350]['longitude']\n#y = airbnb[airbnb['price'] < 350]['latitude']\n#plt.scatter(x,y,c=noutlier,cmap='coolwarm')\n#plt.title('NYC Price map')\n#plt.colorbar()","944f7eb5":"airbnb.head()","256790ab":"plt.figure(figsize=(8,8))\nairbnb['room_type'].value_counts().plot.bar(color='blue')\nplt.title('Type of Room Popularity')\n#we can see that entire houses or private rooms are far more popular than shared rooms","11aa842c":"plt.figure(figsize=(12,8))\nsns.boxplot(data=airbnb,y =airbnb[airbnb['price'] < 400]['price'],x=airbnb['room_type'])\n#data looks as expected that whole houses will be the most expensive","88a6b711":"Lets have a look at other data ","0b6a9387":"Now we're going to try to use our locational data to create a map ","08e0e23e":"****What can we learn about different hosts and areas?","b4ea66e7":"Note that an image of the output is provided below as it is too difficult to link shp file","7551c5de":"Lets see some more data","62aba670":"![title](https:\/\/i.imgur.com\/QYqqULP.png)"}}