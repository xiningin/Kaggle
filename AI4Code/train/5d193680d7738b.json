{"cell_type":{"be3a9139":"code","19116d9c":"code","6e9e2f14":"code","bd40dbde":"code","00d21839":"code","52901cca":"code","cc89c295":"code","b05010f6":"code","9b995421":"code","81c865dd":"code","639777d8":"code","26dc26f2":"code","6e8e03fe":"code","099d6f74":"code","03d72d56":"code","23fd6dfe":"code","71491141":"code","7bf6a03b":"code","c529ca16":"markdown","799e855b":"markdown","2c9f8fbb":"markdown","a2ba7c64":"markdown"},"source":{"be3a9139":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","19116d9c":"df = pd.read_excel('\/kaggle\/input\/covid19\/dataset.xlsx')","6e9e2f14":"df.head(5)","bd40dbde":"df['SARS-Cov-2 exam result'] = df['SARS-Cov-2 exam result'].map(lambda r: 1 if r == 'positive' else 0 )","00d21839":"df = df.rename(columns={'SARS-Cov-2 exam result': 'has_covid', 'Patient addmited to regular ward (1=yes, 0=no)': 'hospital',\n                   'Patient addmited to semi-intensive unit (1=yes, 0=no)': 'semi_icu',\n                   'Patient addmited to intensive care unit (1=yes, 0=no)': 'icu'})","52901cca":"corr = df.corr()\ncorr[['has_covid', 'hospital', 'semi_icu', 'icu']].sort_values('has_covid', ascending=False)","cc89c295":"features = df.iloc[:, 6:]\n#For task 1, we won't use the hospital\/semi-icu\/icu data","b05010f6":"import missingno as msno\n# checking null values\nmsno.bar(features, figsize=(16, 4),log = True)","9b995421":"features.head(5)","81c865dd":"#Dropping all NanColumns\nall_nas = []\nfor f in features.columns:\n    if features[f].isna().all():\n        all_nas += [f]\nfeatures = features.drop(columns=all_nas) #Dropping all NanColumns","639777d8":"features.head(5)\n#It's important to show the head of the dataframe because we know now that 5 features are completely needless","26dc26f2":"msno.bar(features, figsize=(16, 4), log = True)","6e8e03fe":"msno.dendrogram(features)","099d6f74":"nan_series = pd.Series(index = list(features.columns), data = np.zeros(len(features.columns)))\n#Creating an empty nan_series. We'll add the nan_values below\nnan_series.head(5)","03d72d56":"for label in features.columns:\n    for i in features[label].isnull().index:\n        if features[label].isnull()[i] == True:\n            nan_series[label]+=1\n#This cell has a very high computational cost, by the way\nnan_series.head(5)","23fd6dfe":"nan_series.nunique()\n#The value below shows that there are 40 categories of NaN values (41, if we count the all-NaN values)","71491141":"np.unique(nan_series.values)\n#These are the values of NaN for each group","7bf6a03b":"#In this cell, we'll show the features in each category\nunique_nan_series = np.unique(nan_series.values) \nfor i in range(0, len(unique_nan_series)):\n    print(\"Category \", i)\n    print(\"Number of NaN values: \", unique_nan_series[i] )\n    print(\"Features in category \", i, \" :\")\n    for element in list(nan_series[nan_series == unique_nan_series[i]].index):\n        print(element)\n    print('\\n')","c529ca16":"## Preliminary Conclusion\/Posterior Work ##\n\nExcept for the age feature, the features with minimum number of NaNs (Respiratory Syncytial Virus, Influenza A and Influenza B) have 4290 NaN (out of 5644), i.e.: 76% of NaN, making imputting techniques impracticable. One possible approach would be count the number of positives for each category and, if any category doesn't contribute at all (or little, according to a specified threshold) in prescribe whether or not a patient is covid-positive, we should drop this category.\n\nA cause-effect relationship between groups, explained by a health professional, maybe would be useful. For example, if a patient who made a test in \"Category 39\" *necessarily* had make tests in Categories 7, 14, 20, etc... If this is true, we can drop some of the categories, since the objective of Task 1 is to determine probabilities of Sars-Cov-2 with *preliminary* tests.\n\nEven without this specialized help, we can plot correlation *inside* the categories, to see if we can reduce the dimensionality of the problem.","799e855b":"## Missing Data ##\nThe main objective of this session is to establish patterns by NaN values, 'blocking' certain features together. We'll not use the age data yet, because there aren't people with NaN values in this feature. In another notebook, we'll try to group the data by age.\nThis idea came from the graph in line [5] of https:\/\/www.kaggle.com\/ossamum\/exploratory-data-analysis-and-feature-importance, which shows the fraction of null-values in different features and we reproduce below.","2c9f8fbb":"## Cleaning Data for Task 1 ##","a2ba7c64":"## Preliminary note ##\n\nFor some functions and reasoning of this notebook, I had consulted the following notebooks, already available at the Kernel:\n\nhttps:\/\/www.kaggle.com\/brandao\/setting-a-limit-for-false-negatives-covid19\n\nhttps:\/\/www.kaggle.com\/ossamum\/exploratory-data-analysis-and-feature-importance\n\nhttps:\/\/www.kaggle.com\/nazeboan\/null-values-exploration-logreg-67-acc\n\nhttps:\/\/www.kaggle.com\/endelgs\/98-accuracy-at-covid-19\n\nhttps:\/\/www.kaggle.com\/rodrigofragoso\/exploring-nans-and-the-impact-of-unbalanced-data\n\nhttps:\/\/www.kaggle.com\/eduardosmorgan\/quick-data-exploration-and-svm-cv\n\nhttps:\/\/www.kaggle.com\/andrewmvd\/lightgbm-baseline\n\nhttps:\/\/www.kaggle.com\/dmvieira\/overfitting-ward-semi-intensive-or-intensive-unit\n\nhttps:\/\/www.kaggle.com\/dmvieira\/94-precision-on-covid-19\n\nhttps:\/\/www.kaggle.com\/rspadim\/eda-first-try-python-lgb-shap"}}