{"cell_type":{"80ff13ae":"code","e7ad351b":"code","58064943":"code","b4ba8b63":"code","f645eefa":"code","5df2e15d":"code","854c8407":"code","fbcc268f":"code","ea3dfcd1":"code","7f8a50ba":"code","8fab77b2":"code","0d4529ba":"code","9220af62":"code","7190f785":"code","63bc79d3":"code","e48dc63d":"code","4b8a008f":"code","642011a3":"code","8c859eb3":"code","0a28420e":"markdown","49eeefa8":"markdown","e5ee033b":"markdown","5ef177ac":"markdown","0fcbd656":"markdown","c8bf4289":"markdown","8ff70d27":"markdown","671e4ed4":"markdown","b4371cda":"markdown","1bda9dea":"markdown","964f478a":"markdown","79d6a5cc":"markdown"},"source":{"80ff13ae":"#Importing important libraries for cleaning and analysis.\nimport pandas as pd                 # Pandas library is used to deal with dataframe.\nimport numpy as np                  # Numpy library is used to deal with numeric values and concepts, such as Null\/NaN.\nimport matplotlib.pyplot as plt     # Pyplot is a function is matplotlib library that is used to draw charts.\nimport seaborn as sns               # seaborn library is also used to draw charts that pyplot cannot, such as pie.\n","e7ad351b":"#Importing the data\ndaily_activity = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/dailyActivity_merged.csv')\ndaily_calories = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/dailyCalories_merged.csv')\ndaily_intensities = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/dailyIntensities_merged.csv')\ndaily_steps = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/dailySteps_merged.csv')\ndaily_sleep = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/sleepDay_merged.csv')\nweight_log = pd.read_csv('..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16\/weightLogInfo_merged.csv')\n","58064943":"#Have a look at the data we imported.\nact_sum = daily_activity.describe().transpose()\ncal_sum = daily_calories.describe().transpose()\nintense_sum = daily_intensities.describe().transpose()\nstep_sum = daily_steps.describe().transpose()\nsleep_sum = daily_sleep.describe().transpose()\nweight_sum = weight_log.describe().transpose()\n\nprint(act_sum.head(5))\nprint(cal_sum.head(5))\nprint(intense_sum.head(5))\nprint(step_sum.head(5))\nprint(sleep_sum.head())\nprint(weight_sum.head())","b4ba8b63":"# Investigating to see whether some tables are just a part of the other.\n\ndf_match = pd.DataFrame({'Match': []})          #Create a dataframe to compare values of attribute between 2 tables\ndf_match['Match'] = np.where\n(daily_activity['Calories'] == daily_calories['Calories'], True, False) #Set condition to compare records between 2 tables. If they match then return True, False otherwise.\nprint(df_match['Match'].unique())               #Check to see whether the record contains any different values. If True is the only value then 2 tables match completely\n\n#The process repeats and compare daily_activity with other tables. \n#In conclusion, the daily_activity contains all records of other tables except daily_sleep. Thus, I decide to join these 2 together.","f645eefa":"# Let's look at records with 24 hours sedentary\nmax_sedentary = daily_activity[daily_activity['SedentaryMinutes'] == 1440].reset_index()\n\nprint(max_sedentary[['Id','SedentaryMinutes','Calories']])\n\n# Here, we see that even people with 1440 minutes (24 hours) sedentary, they still have their calories-burn recorded. With that said, 0 calories-burn\n# records were invalid since that's only possible when people didn't wear their fitbit devices. So let's remove them from the table\n\nprint(daily_activity[daily_activity['Calories'] == 0].reset_index()[['Id','Calories']]) # Let's have a look at number of records with 0 calories\n\n# There are only 4\/940 records by 4 different users. Hence removing them should be fine\n# Let's remove the invalid data\ndaily_activity = daily_activity[daily_activity['Calories'] != 0]\n","5df2e15d":"# Let's add another attribute to the daily_activity table: Total active time\n\ndaily_activity['total_active_minutes'] = 1440 - daily_activity['SedentaryMinutes']","854c8407":"# Let's group the records daily_activity into 4 active levels: \n# most active, moderately active, lightly active, and sedentary based on their total active minutes.\nx = daily_activity['total_active_minutes']\ndaily_activity['active_level'] = np.where(\n                                        x > np.quantile(x, 0.75),\n                                        'Most active',\n                                        np.where(\n                                            x > np.quantile(x, 0.5),\n                                            'Moderately active',\n                                            np.where(\n                                                x > np.quantile(x,0.25),\n                                                'Lightly active',\n                                                'Sedentary'))\n                                        )\n\n# Merging  tables together. The daily_activity and daily_sleep table actually has a different name for date attribute. \n# Moreover, daily_sleep contains time in the same column, so I will split it.\ndaily_sleep['ActivityDate'] = daily_sleep['SleepDay'].str[:9]\n\ndaily_sleep = daily_sleep.drop('SleepDay', axis = 1) # Drop the sleep day attribute\n\ndaily_records = daily_activity.merge(daily_sleep, how = 'outer', on = ['Id', 'ActivityDate']).dropna()\n\n# Here I joined the 2 tables together and drop any rows with missing values.","fbcc268f":"daily_records.head() # Recheck the table\ndaily_records.dtypes # Notice that ActivityDate is object state. We want them in datetime type to perform analysis\ndaily_records['ActivityDate'] = pd.to_datetime(daily_records['ActivityDate']) # Transform the datatype of ActivityDate to datetime\n","ea3dfcd1":"\nprint(daily_records.dtypes)\ndaily_records.head()\n","7f8a50ba":"# Now let's move to the weight log\nweight_log.head()\nweight_log['Date_norm'] = pd.to_datetime(weight_log['Date'], format= '%m\/%d\/%Y %I:%M:%S %p') # Format the date from 12-hour to 24-hour\n\nweight_log_group = weight_log.groupby('Id')\nweight_log_group.first()","8fab77b2":"\n# Let's create our weight_log dataframe for analysis\nid = weight_log['Id'].unique()\nfirst_day = weight_log_group['Date_norm'].first().values\nlast_day = weight_log_group['Date_norm'].last().values\ndays_between = last_day - first_day\nweight_before =  weight_log_group['WeightKg'].first().values\nweight_after = weight_log_group['WeightKg'].last().values\nweight_change = weight_after - weight_before\ntotal_records = weight_log_group['Id'].count().values\nnum_manual = weight_log_group['IsManualReport'].sum().values\n\n\nweight = pd.DataFrame({'id': id,\n                        'first_day':first_day,\n                        'last_day':last_day,\n                        'days_between':days_between,\n                        'weight_before': weight_before,\n                        'weight_after': weight_after,\n                        'weight_change_kg':weight_change,\n                        'total_records':total_records,\n                        'num_manual':num_manual\n                        })\n\nweight\n\n","0d4529ba":"# Summary statistics of daily_activities. This is important since daily_records drop rows that don't record sleep data.\ndaily_activity.describe().transpose()","9220af62":"#Group the records together by user Id by average.\navg_user_records = daily_records.groupby('Id').mean().reset_index()\navg_user_records.describe().transpose()\n","7190f785":"# Let's group the daily_activity by ID\navg_daily_act = daily_activity.groupby('Id').mean().reset_index()\navg_daily_act.describe().transpose()","63bc79d3":"# Let's make some functions\ndef trendline_maker(df,x,y, color = 'red'):\n    z = np.polyfit(df[x], df[y], 1)\n    p = np.poly1d(z)\n    plt.plot(df[x], p(df[x]), color = color )\n\ndef scatterplot(data, x, y, xlabel, ylabel, title, legend_title = None, legend = 'auto',  hue = None):\n    sns.scatterplot(x = x, y = y, data = data, hue = hue, legend = legend)\n    plt.xlabel(xlabel)\n    plt.ylabel(ylabel)\n    plt.title(title)\n    plt.legend(title=legend_title)\n    \n","e48dc63d":"# Let's do some analysis on our 2nd objective, finding relationship between total steps and sleep time\nscatterplot(data = daily_records,\n            x = 'TotalSteps',\n            y = 'TotalMinutesAsleep', \n            title = 'Correlation between sleep time and total steps',\n            xlabel = 'Total steps',\n            ylabel = 'Minutes asleep'\n            )                                                                       # Draw the scatterplot \ntrendline_maker(daily_records, 'TotalSteps', 'TotalMinutesAsleep', color = 'blue')                  # Draw the trend line\nprint(np.corrcoef(daily_records['TotalMinutesAsleep'],daily_records['TotalSteps'])) # Find the correlation coefficients\n\n\n# In conclusion, there is no correlation between totals steps and total sleep time.","4b8a008f":"# Let's make a scatterplot to find correlation between total sleep time and total active time\n# The reason why I dont use the users_record was because each user might have different active level between days.\n# Hence, I will need to consider each individual record instead of the average by id.\nscatterplot(data = daily_records,\n            x = 'total_active_minutes',\n            y = 'TotalMinutesAsleep', \n            title = 'Correlation between sleep time and active time',\n            xlabel = 'Active minutes',\n            ylabel = 'Minutes asleep',\n            legend_title = 'Active level',\n            hue = 'active_level'\n            )  \ntrendline_maker(daily_records,'total_active_minutes', 'TotalMinutesAsleep')\nprint(np.corrcoef(daily_records['TotalMinutesAsleep'],daily_records['total_active_minutes']))\n\n# We can conclude that there is a moderate positive correlation between sleep time and active levels. \n","642011a3":"# Let's make another scatterplot to find correlation between active time and calories-burn\nscatterplot(data = daily_records,\n            x = 'total_active_minutes',\n            y = 'Calories',\n            hue = 'active_level',\n            xlabel = 'Active minutes',\n            ylabel = 'Calories burn',\n            title = 'Correlation between calories burn and active time',\n            legend_title = 'Active level')\n\ntrendline_maker(daily_records,'total_active_minutes', 'Calories')\nprint(np.corrcoef(daily_records['Calories'],daily_records['total_active_minutes']))\n\n\n\n","8c859eb3":"# Let's find the correlation between total steps and calories burn and separate the data by active levels.\n# Let's use the daily_activity table for more records\nscatterplot(data = daily_activity,\n            x = 'TotalSteps',\n            y = 'Calories',\n            xlabel = 'Total steps',\n            ylabel = 'Calories-burn',\n            title = 'Correlation between total steps and calories burn in a day',\n            legend_title = 'Active level',\n            hue = 'active_level'\n)\ntrendline_maker(daily_activity, 'TotalSteps', 'Calories')\nprint(np.corrcoef(daily_activity['TotalSteps'], daily_activity['Calories']))\n\n# We can conclude that there is a moderate positive correlation between total steps and calories burn in a day. ","0a28420e":"# PHASE 3: PROCESS\n## Tools:\n* I used Python for processing data instead of R because I actually learned Python for DS before taking the Google DA course. I prefer Python because I'm more comfortable with it. The only downside is sometimes it takes more lines of code to get something in Python that just needs 1 line in R. \n\n## Summary:\n*  I noticed that the most of the tables contain 940 records and the daily_activity actually has many attributes of other tables, so I suspect there are overlapping data between tables. Thus, I decided to investigate to see whether some tables are just a part of the other. It turned out daily_activity contains all records of other tables, except daily_sleep and weight_log. However, daily_sleep and weight_log do not contain the same number of records, especially weight_log contain only 67 records compare to 940. I decided to merge daily_activity and daily_sleep into a new table and drop any missing records so I can track the relationship between sleep and activity.\n\n* Moreover, I noticed that the minimum calories burned recorded was 0, and maximum sedentary was 24 hours. After investigation, I found out that even when sedentary time was 24 hours, some rows still have calories-burned recorded. Hence, I believe such data (0 calories-burned) was not valid and removed them from the table. I supposed it's the recorded data when people didn't wear their fitbit devices, which would greatly impact my analysis for how people use their devices.\n\n* The weight_log table contains many problems, so I will leave it out of analysis.","49eeefa8":"# PHASE 6: ACT\n\n## Applying analysis to Bellabeat products:\n### Key findings:\n* Non-bellabeat users use their fitness smart devices to track sleep time, calories, steps, activity, and weight\n* However, there are several data that isn't tracked like stress level\n* The average sedentary time is ~998 minutes (About 16.5 hours).\n    * According to *Healthy WA*, sitting more than 7 to 10 hours a day is bad for your health, even if you're doing enough physical activities\n    * That said, Bellabeat could use this information to encourage people to exercise more, even lightly like walking, to avoid health issues.\n* The average sleep time is 375 minutes (6.5 hours). One person can sleep up to 683 minutes (11+ hours).\n    * According to *Sleep Foundation*, sleeping time should fall into 4-6 cycles of 90 minutes (6 - 9 hours) to feel rested.\n    * That said, Bellabeat could run a marketing campaign to educate people about the importance of sleep quality and how to achieve with Bellabeat products.\n\n### Bellabeat products that fits in: \n* Leaf\/Time\n    * Leaf\/Time are devices that can track activity, sleep, and stress. This is perfect to fits in the trend of using fitness devices. Leaf\/Time takes it to another step to count stress in, which can provide further analysis on the quality of sleep and sleep time. \n    * It can be said that Leaf and Time are products that directly comepte with other fitness devices on the market. Hence, I believe the marketing campaign should be built around what Leaf\/Time can offer.\n* Bellabeat App\n    * This app is one of many factors that differentiate Bellabeat from other competetitors. Besides providing users health data related to their activity, sleep, stress, it also gives users, who mainly are females, a tool to track menstrual cycle, and mindfulness habits. \n        * Menstrual cycle tracking is not found in other dataset. In my opinion, this data is crucial and can explain anomalies in stress, sleep time, weight control, and activity of users.\n        * This is when mindfulness habits can come in clutch. Giving people advices to reduce their suffering can make customers have good feelings toward Bellabeat. Moreover, from the key findings of the analysis, Bellabeat app can be responsible to:\n            * Remind people to be more active.\n            * Remind people who'd set goal for weight loss to walk more.\n            * Balance sleep time.\n            * Provide tips to reduce stress.\n\n### Marketing strategy\n* From my findings, I have the following recommendations for marketing team:\n    * As for promoting products, we should focus on the benefits that Time\/Leaf and Bellabeat app would bring.\n        * Besides tracking normal health data, Bellabeat users can be adviced with tips on how to control calories burning, tips on dealing with menstrual cycle, tips to have a better sleep -> Focus on the other benefits that Bellabeat can provide.\n        * Moreover, the design of Time\/Leaf is very unique compares to other fitness devices on the market. It keeps the traditional and fancy look why intergrating modern functions.\n            * However, I need to conduct another study on the user experiences with fitness devices to understand their decisions when it comes to design and functions.\n    * I also think that Bellabeat needs to run a small marketing campaign to educate people about the importance of sleep quality and how to achieve it.\n        * Some benefits of good sleep like better mental health and better weight control are very attractive to people with busy life.\n        * According to *Medical News Today*, stress is one of the reason to cause sleep deprivation. Moreover, menstruation is also one of the biggest factor that cause abnormal stress. Educating people about this will benefit not only women but also men who wants to understand their parters and help them achieve better sleep. \n        * Lastly, Bellabeat has all the tools (Time\/Leaf\/Spring\/Bellabeat App) that can measure and give advices about those problems and help people to sleep better.","e5ee033b":"There are many problems with this table. \n* 1st, there are only data of 8 candidates, which is far below the minimum requirement (30). The sample is too tiny for me to draw any conclusion\n* 2nd, most of the data records were performed by 2 users (Look at total records). \n* 3rd, 3\/8 records were either recorded only once or the days between records were too closed, leaving only 5 reliable records.\n\nI need to collect more data for a bigger sample size or find another dataset. For now, I will have to leave the weight analysis out.","5ef177ac":"# PHASE 4: ANALYSIS\n## Objectives:\n* Find interesting insights of the data\n* Find the relationship between total steps vs. sleep time. I suspected that the more people walk the longer they sleep (Or better sleep) due to tiredsome. \n* Determine the relationship between total steps and type of activities. From there, determine whether type of activities or total steps is the key factor to burning the most calories.\n\n\n","0fcbd656":"### Interesting insights and recommendation:\n* There is a moderate positive correlation between active time and sleep time.\n    * This might be a causation relationship since being active can make people worn-out.\n* People who are lightly actve or sedentary are the ones that do not get enough sleep time. More over, people who are very active can get oversleeping too.\n    * This can be explained that sedentary\/lightly active people are not worn-out enough.\n    * On the other hand, very active people are too tired and need more sleep.\n    * According *Cleveland clinic organization*, too little sleep can lead to high blood pressure, diabetes, heart attack, heart failure, or stroke. On the other hand, oversleeping can cause heart diseases, diabetes, anxiety, and obesity, according to *Premier Health*. \n\n* At least 400 minutes of being active (doesn't matter the active level) can contribute to giving you 7-9 hours of sleep\n    * We could use this information to encourage people to enjoy light activity (walking, preparing foods, etc.)\n    * Of course there are other factors that affect sleep time overall (i.e stress level, hydration, etc.) \n        * This dataset does not contain enough information, so in order to get to know more about non-Bellabeat customers, I might have to find a more complete dataset.","c8bf4289":"# PHASE 5: SHARE\n## Summary:\n* I pulled some interesting insights from the summaries of 3 tables\n* Made some plots to find correlation between some attributes to answer phase 4 objectives\n* Noted down some useful ways to use insights to benefit the marketing campaign\n* Noted some limitations of the dataset \n","8ff70d27":"Here, I can conclude that there is no correlation between active minutes and calories burn. It is very strange since I know that activity requires energy,hence more active time should lead to more calories burn. However, there are other factors that contribute to calories burn as well. For instance, weight is one key factor to determine someone's BMR, which means the heavier you are the more calories you consume, even in sedentary. Another factor is the type of activities. Heavy activities should consume more calories compares to light activities in the same ammount of time. That said, I need to approach this problem in a different way. I'm thinking of either tracking the active level of each users between days to find the correlation since a person's BMR will not change drastically or maybe I could redefine the group of active-level based on type of activities (using attributes like VeryActiveMinutes, ModActiveMinutes, etc.). Or I could find the correlation between total steps and calories burned.","671e4ed4":"### Interesting insights and recommendation:\n* Total steps is not related to active level. Most active records (based on sedentary time) can do very few steps. This kinda explain why we found no correlation between active levels and calories burn earlier.\n    * Might have to find another method to regroup the sample.\n    \n* However, there is in fact correlation between total steps and calories burn. Since stepping requires energy, it's safe to say its a causation relationship.\n    * Bellabeat could use this information to encourage people who aims to burn more calories to walk more.\n    * Since Bellabeat's customers are mostly (if not all) female, who are often sensitive with controlling weights, this insight is very helpful","b4371cda":"Here are some interesting insights I pulled from 2 tables:\n* The maximum sedentary time is 1440 minutes (24 hours). The average sedentary time is ~998 minutes (About 16.5 hours).\n* The average sleep time is 375 minutes (6.5 hours). One person can sleep up to 683 minutes (11+ hours).\n* On average, people burn about 2292 kcal everyday. The highest calories-burn recorded was 4900 kcal.\n* On average, people do 7555 steps everyday.\n* On average, people do 20 minutes very-active, 19 minutes fairly-active, and 192 minutes lightly-active\n","1bda9dea":"# PHASE 1: ASK\n## Business task:\n* Bellabeat needs to analyze trends in fitness smart devices usage of non-Bellabeat users. Apply this finding into one of Bellabeat product then make high-level recommendation for Bellabeat marketing strategy.\n\n## Key stakeholders:\n* Urska Srsen: CEO\n* Sando Mur: Mathematician and co-founder of Bellabeat\n* Bellabeat marketing analytics team\n\n## Questions:\n* What attributes do people use their devices to track?\n* What relationships could we find to better understand customers' habits.\n    * What factors contribute to burning calories (losing weight)\n* What do *customers of Bellabeat* want? (Female)\n    * E.g. burn more calories, get better sleep, etc.\n* How could we intergrate our findings with what our customers want?\n* ","964f478a":"# PHASE 2: PREPARE\n## Data source: \n* FitBit Fitness Tracker Data:\n    * Public Domain \n    * Contains data from 30 eligible fitbit users who are all consented to the submission of personal data, including **minute-level** output for **physical activities, heart rate, and sleep monitoring**. It also includes information about **daily activities, steps, and heart rates**. \n    * This dataset can answer questions of how non-Bellabeat users use their smart fitness devices.\n    * Limitation: Most of Bellabeat customers are *females* while this dataset might contain *mixed genders* information, which might not reflect what Bellabeat needs to do.\n## Data credibility:\n* The data is from FitBit Fitness Tracker Data and made public on reliable platform: Zenodo.org. Thus, it is safe to use this data to determine the habits of FitBit users. It contains several tables that record different level of acitivities, such as heart rate, calories burned, and sleep. \n\n## Sort and filter:\n* Although the database contains minute-level of tracking, I will just focus on daily records since I want to determine the trends in usage by users not detailed of perfomance. With that said, I will emerge tables that contain daily records of activities, calories, steps, intensities, and sleep.","79d6a5cc":"The reason why I grouped the records together by ID is to avoid some unusual records that could affect the stats overall. Also, by grouping the records together, we could see how each person perform on average. However, this table only contains records of 24 users, which is below the minimum sample (30). This is due to the fact that there were only 24 users that recorded their sleep. So I will also group the daily_acitivity records by users and pull some interesting insights from the 3 tables."}}