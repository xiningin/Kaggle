{"cell_type":{"f947c167":"code","cbc67a75":"code","115a9671":"code","78b5f7b5":"code","b3ac0d95":"code","a9f016d1":"code","493d6fe8":"code","d87c80e4":"code","b5a57d5d":"code","36c0cb68":"code","2cbc47cc":"code","6c6b7f49":"code","00d6134e":"code","ef35a775":"code","80f15be0":"code","e33e0d8f":"code","9cdbe12a":"code","d97e29bd":"code","d39988c5":"code","c8f966ed":"code","1ad6fd0c":"code","81fecad1":"code","401ce8b3":"code","8a033320":"code","c59aa844":"code","efa51e5b":"code","9e2c4fac":"code","29006311":"code","35d25c51":"code","e09d1eef":"code","c3ed09af":"code","aa118636":"code","7dfc76a5":"code","6fe464b6":"code","7f9f45d7":"code","9858daa7":"code","6afa96f2":"code","a1f1dadd":"code","9873f7ce":"code","6104df07":"code","d03a658b":"code","15fc1c87":"code","7d50560b":"code","2d94f2bb":"markdown","79749e07":"markdown","a9523145":"markdown","1bbf422d":"markdown","4b318bb1":"markdown","355c2333":"markdown","2b797308":"markdown","9356e861":"markdown","80a8cce3":"markdown","78cf57b8":"markdown","82c5b3e2":"markdown","de0b28ae":"markdown","6fd98c8a":"markdown","4a69d9f1":"markdown","192a4a15":"markdown","215fccc5":"markdown","8c5d490f":"markdown","86d20d4e":"markdown","3532d591":"markdown","d544cdbe":"markdown","bd6dd588":"markdown","651a1b25":"markdown","d7d35884":"markdown","68032dbb":"markdown","b5c29aad":"markdown","686eeba4":"markdown","f9ae045e":"markdown","29cf2b63":"markdown","a747024b":"markdown","53215d1d":"markdown","3cf06b41":"markdown","cd700385":"markdown","77e8fd18":"markdown","d1618b8e":"markdown","bafaae2a":"markdown","982fe7aa":"markdown","4dfad30e":"markdown","e50c7bcf":"markdown","841de3e9":"markdown","1573928f":"markdown","a48dd781":"markdown","15fe7e85":"markdown","4f6e6b36":"markdown","5ed744b4":"markdown","7c200c7a":"markdown","bbb12dc9":"markdown","77f822be":"markdown"},"source":{"f947c167":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cbc67a75":"import pandas as pd\n# pandas = excel in python\n\nimport numpy as np\n# numpy = mathe in python\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns \n# visualization libraries\n\nimport datetime\n# date library\n\nimport warnings\nwarnings.filterwarnings('ignore')\n# ignore warning signal ","115a9671":"df=pd.read_csv('\/kaggle\/input\/noshowappointments\/KaggleV2-May-2016.csv')","78b5f7b5":"df.head(3)","b3ac0d95":"df.isnull().any().any()\n# No missing value","a9f016d1":"df.duplicated().sum()\n# No duplication ","493d6fe8":"df.info()\n# wrong type of data: ScheduledDay,AppointmentDay","d87c80e4":"## Converting the date information in string to datetime type:\ndf['ScheduledDay'] = pd.to_datetime(df.ScheduledDay)\ndf['AppointmentDay'] = pd.to_datetime(df.AppointmentDay)","b5a57d5d":"df.rename(columns = {'Hipertension': 'Hypertension', 'Handcap': 'Handicap'}, inplace = True)","36c0cb68":"df.describe()","2cbc47cc":"df[df['Age']==-1]","6c6b7f49":"df.drop([99832],inplace=True)","00d6134e":"df[df['Age']==0].shape","ef35a775":"df[(df.Age <= 0) & ((df.Hypertension.astype(int) == 1) | (df.Diabetes.astype(int) == 1) | (df.Alcoholism.astype(int) == 1))]","80f15be0":"print(\"Unique Values of `Neighbourhood`:{}\"\n      .format(np.sort(df.Neighbourhood.unique())))","e33e0d8f":"#df['AppointmentDay'] = np.where((df['AppointmentDay'] - df['ScheduledDay']).dt.days < 0, df['ScheduledDay'], df['AppointmentDay'])\n\n# Get the Waiting Time in Days of the Patients.\ndf['Waiting_Time_days'] = df['AppointmentDay'] - df['ScheduledDay']\ndf['Waiting_Time_days'] = df['Waiting_Time_days'].dt.days","9cdbe12a":"Negative = df[df['Waiting_Time_days'] < 0].index\ndf.drop(Negative, inplace=True)","d97e29bd":"df2 = df[df['No-show']=='Yes']\ndf2.to_csv('only_Noshow.csv',index=False)","d39988c5":"plt.figure(figsize=(17,7)) \nsorted_counts = df['No-show'].value_counts()\nax=plt.pie(sorted_counts, labels = sorted_counts.index, startangle = 90,\n        counterclock = False,pctdistance=0.8 ,wedgeprops = {'width' : 0.4}, autopct='%1.0f%%');\n\nplt.title('No Show vs Show',fontsize=20);","c8f966ed":"plt.figure(figsize=(10,7))\nsns.countplot(x='Gender',data=df2,hue='Gender')\nplt.title(\"Gender comparision (No Show)\".title(),fontsize=30)\nplt.ylabel('Numer of No Show cases');","1ad6fd0c":"df.groupby(['Gender','No-show'])['No-show'].count()","81fecad1":"a = (df.groupby(['Gender','No-show'])['No-show'].count()[1] \/ sum(df.groupby(['Gender','No-show'])['No-show'].count()[0:2]))\nprint(\"The rate of female's no show is \"+\"{:.2f}\".format(a*100)+'%')\nb = (df.groupby(['Gender','No-show'])['No-show'].count()[3] \/ sum(df.groupby(['Gender','No-show'])['No-show'].count()[2:4]))\nprint(\"The rate of male's no show is \"+\"{:.2f}\".format(b*100)+'%')","401ce8b3":"plt.subplots(figsize=(20,8))\nplt.hist(x='Age',bins=20,data=df2,edgecolor='black',color='red')\nplt.title('Age histogram',fontsize=30)\nplt.xlabel('Age')\nplt.ylabel('Number of Noshow')\nx1 = list(range(0,120,5))\nplt.xticks(x1);","8a033320":"f,ax=plt.subplots(2,1,figsize=(15,15))\ndf2[df2['Gender']=='M'].Age.plot.hist(ax=ax[0],bins=20,edgecolor='black',color='red')\nax[0].set_title('Age histogram(Men)',fontsize=30)\nax[0].set_xlabel('Age')\nx1=list(range(0,110,5))\nax[0].set_xticks(x1)\ndf2[df2['Gender']=='F'].Age.plot.hist(ax=ax[1],bins=20,edgecolor='black',color='blue')\nax[1].set_title('Age histogram(Women)',fontsize=30)\nax[1].set_xlabel('Age')\nx2=list(range(0,110,5))\nax[1].set_xticks(x2);","c59aa844":"df2['Hour'] = pd.to_datetime(df2['ScheduledDay']).dt.hour\ndf2['Minute'] = pd.to_datetime(df2['ScheduledDay']).dt.minute\ndf2['Second'] = pd.to_datetime(df2['ScheduledDay']).dt.second\ndf2['Count'] = 1\ndf2.head()","efa51e5b":"keys = [pair for pair, df2 in df2.groupby(['Hour'])]\n\nplt.figure(figsize=(20,5))\nplt.plot(keys, df2.groupby(['Hour']).count()['Count'])\nplt.xlabel('hour')\nplt.ylabel('Number of Noshow')\nplt.xticks(keys);","9e2c4fac":"No_show_Adult = df2[df2['Age']>=18]","29006311":"plt.figure(figsize=(7,5))\nsns.countplot(x='SMS_received',hue='No-show',data=No_show_Adult)\nplt.title(\"SMS_received & Noshow\",fontsize=30)\nplt.ylabel('Number of Noshow');","35d25c51":"plt.figure(figsize=(20,4))\nplt.xticks(rotation='vertical')\nax = sns.countplot(x=np.sort(df2.Neighbourhood))\nax.set_title(\"No show by Neighbourhood\",fontsize=30);","e09d1eef":" RateNeighbourhood = df[df['No-show']=='No'].groupby(['Neighbourhood']).size() \/ df.groupby(['Neighbourhood']).size() ","c3ed09af":"plt.figure(figsize=(20,4))\nplt.xticks(rotation='vertical')\nsns.barplot(x=RateNeighbourhood.index,y=RateNeighbourhood)\nplt.title(\"No show rate by Neighbourhood\",fontsize=30);","aa118636":"plt.figure(figsize=(10,7))\nsns.countplot(data=df,x='No-show',hue='Hypertension')\nplt.title(\"No show with Hypertension\",fontsize=30);","7dfc76a5":" RateHypertension = df[df['No-show']=='No'].groupby(['Hypertension']).size() \/ df.groupby(['Hypertension']).size() ","6fe464b6":"plt.figure(figsize=(7,4))\nplt.xticks(rotation='vertical')\nsns.barplot(x=RateHypertension.index,y=RateHypertension)\n\nplt.title(\"No show rate by Neighbourhood\",fontsize=20)\nplt.ylabel(\"Rate of No show\");","7f9f45d7":"plt.figure(figsize=(10,7))\nsns.countplot(data=df,x='No-show',hue='Handicap')\nplt.title(\"No show with Handicap\",fontsize=30);","9858daa7":" RateHandicap = df[df['No-show']=='No'].groupby(['Handicap']).size() \/ df.groupby(['Handicap']).size() ","6afa96f2":"plt.figure(figsize=(7,4))\nplt.xticks(rotation='vertical')\nsns.barplot(x=RateHandicap.index,y=RateHandicap)\nplt.title(\"No show rate by Handicap\",fontsize=20)\nplt.ylabel(\"Rate of No show\");","a1f1dadd":"plt.figure(figsize=(30,7))\nsns.countplot(data=df,x='Waiting_Time_days',hue='No-show')\nplt.title(\"No show with Waiting Time\",fontsize=30);","9873f7ce":" RateWaitingTimeDay = df[df['No-show']=='No'].groupby(['Waiting_Time_days']).size() \/ df.groupby(['Waiting_Time_days']).size() ","6104df07":"plt.figure(figsize=(30,7))\nplt.xticks(rotation='vertical')\nsns.barplot(x=RateWaitingTimeDay.index,y=RateWaitingTimeDay)\nplt.title(\"No show rate by WaitingTimeDay\",fontsize=20)\nplt.ylabel(\"Rate of No show\");","d03a658b":"df.replace({'Yes':1, 'No': 0},inplace=True)\n# In order to get a correation in number we need to conver into numeric value","15fc1c87":"c= df.corr()\nmask = np.triu(np.ones_like(c, dtype=np.bool))","7d50560b":"sns.heatmap(df.corr(),annot=True,cmap='RdYlGn',linewidths=0.2,mask=mask) #data.corr()-->correlation matrix\nfig=plt.gcf()\nfig.set_size_inches(10,8)","2d94f2bb":"Observation \n\n> both histograms show right skewed distribution","79749e07":"### 4.8 No show with Neighborhood ","a9523145":"### 4.9 No show with Hypertension","1bbf422d":"### 3.1 Misssing value","4b318bb1":"### 3.2 Duplication ","355c2333":"### 3.4 change the column name\n\n - Hipertension is spanisch -> in english called **Hypertension**\n - Handcap -> **Handicap**\n ","2b797308":"Observation \n\n> Female > Male ","9356e861":"Observation \n\n> High no show cases in the morning (7am to 10am). Probably because of the morning they want to sleep more rather show up appointment","80a8cce3":"#### 4.9.2 No show rate with Hypertension","78cf57b8":"### 4.3 No show rate of differrent gender","82c5b3e2":"# <a name=\"AC\"><\/a> 3. Data cleaning & Feature engineering ","de0b28ae":" > Negative age value -> wrong","6fd98c8a":"**Notice**\n\nThere are exceptions that waiting times are negative.That mean scheduledDay was earlier than Appointment day.We need to remove it","4a69d9f1":"<div align='left'><font size=\"6\" color=\"#F39C12\">check list<\/font><\/div>\n\n**Notice** : check the information about dataset, especially column data.You can check out the data from kaggle : [Original dataset](https:\/\/www.kaggle.com\/joniarroba\/noshowappointments)\n\nStrongly recommended to read out what is this dataset about and the meaning of each columns\n\n- Summary of columns data\n  1. PatientId : Identification of a patient \n  2. AppointmentID : Identification of each appointment\n  3. Gender : Male or Female\n  4. ScheduledDay : The day of the actuall appointment, when they have to visit the doctor.\n  5. AppointmentDay : The day someone called or registered the appointment, this is before appointment of course.\n  6. Age : How old is patient  \n  7. Neighbourhood : Where the appointment takes place.\n  8. Scholarship : True of False . Observation, this is a broad topic, consider reading this article https:\/\/en.wikipedia.org\/wiki\/Bolsa_Fam%C3%ADlia\n  9. Hipertension : True or False\n  10. Diabetes: True or False \n  11. Alcoholism : True or False\n  12. Handcap : True or False\n  13. SMS_received : 1 or more messages sent to the patient.\n  14. No-show : True or False ","192a4a15":"### 3.9 Split show vs Noshow","215fccc5":"#### 4.8.1 No show counting with Neighbourhood","8c5d490f":"### 4.2 Gender Comparision only with no show","86d20d4e":"### 3.8 Waiting Time","3532d591":"Observation \n\n> There 3539 patients who are 0 years old.These are small infant with few months of Age. In the normal case they don't have `Diabetes`,`Hipertension` and `Alcoholism`. And then we check that these are infant.(No case of Infant with `Diabetes`,`Hipertension` or `Alcoholism`)","d544cdbe":"### 4.10 No show with Handicap ","bd6dd588":"### 3.3 Incorrect datatype","651a1b25":"# <a name=\"eda\"><\/a> 4. Exploratory Data Analysis","d7d35884":"<div align='center'><font size=\"7\" color=\"#F39C12\">Medical Appointment No Show<\/font><\/div>\n<hr>\n\n\n<div align='left'><font size=\"5\" color=\"#F39C12\">A general Introduction<\/font><\/div>\nIf you have any symptom on your body people want to visit hospital and talk with dochter.But they need a appointment to meet doctor. However according to the US Study is found that up tp 30% of patients miss their appointments, and $150 billion is lost every year \n\n**Reference: [US Study](https:\/\/www.scisolutions.com\/uploads\/news\/Missed-Appts-Cost-HMT-Article-042617.pdf)**","68032dbb":"Observation\n\n> Gender is not a important fator of No show appointment.Because the rate of different gender shows very similar values.","b5c29aad":"# <a name=\"loading\"><\/a> 2. load the dataset","686eeba4":"## 2.1 read dataset","f9ae045e":"### 4.5 Age histogram with different Gender","29cf2b63":"### 4.12 Correlation matrix of factors ","a747024b":"Observation \n\n> Age interval from 0 to 5 shows the highst number of no show cases.This is because of parent.Age from 0 to 5 can't visit hospital without next of kin(NOK)","53215d1d":"### 4.12 No show with Waiting Time days","3cf06b41":"# <a name=\"imports\"><\/a> 1. Importing the prerequisite libraries","cd700385":"## Reference\n\nUseful Kernal : [Predict Show\/NoShow - EDA+Visualization+Model](https:\/\/www.kaggle.com\/samratp\/predict-show-noshow-eda-visualization-model)\n\nIf you like my notebook please give a upvote \n\nThank you all very much","77e8fd18":"## 2.2 Head & Tail of dataset","d1618b8e":"### 4.1 No Show vs Show with pie-chart ","bafaae2a":"#### 4.9.1 No show counting by Hypertension","982fe7aa":"Considering the Age over 18. Assumed not all minor have a cell phone.So it's not considered in this visualization.","4dfad30e":"### 4.6 No Show with Time ","e50c7bcf":"### 4.7 Noshow with Receiving SMS","841de3e9":"### 3.6 Age of Infant","1573928f":"Observation\n\n> Receiving SMS is not a crucial factor of determininig No-show. As you can see above there are a lot of cases that they didn't show up their medical appointment even they received a message from hospital or doctor.","a48dd781":"### 4.4 Age histogram","15fe7e85":"\n\n<div align='left'><font size=\"6\" color=\"#F39C12\">Structure<\/font><\/div>\n<hr>\n- **[1. Importing the prerequisite libraries](#imports)**\n- **[2. load the dataset](#loading)**\n- **[3. Data cleaning](#AC)**\n- **[4. Exploratory Data Analysis](#eda)**","4f6e6b36":"### 3.7 Unique value of Neighborhood","5ed744b4":"### 3.5 Statistical Error","7c200c7a":"Observation \n\n> No Show: 20%  vs  Show: 80%","bbb12dc9":"#### 4.8.2 No show rate with Neighbourhood","77f822be":"Observation \n\n> Rate of No show by neighbourhood are almost same."}}