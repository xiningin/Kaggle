{"cell_type":{"bdd1793a":"code","d2f17c4e":"code","34fb5983":"code","d7ace72b":"code","e32cccaf":"code","aee6338c":"code","383a846f":"code","03bb18ff":"code","76d7ebfe":"code","a8567833":"code","74b200c7":"code","8d2e9c6c":"code","ce0b9bcf":"code","572137ea":"code","6d58b560":"code","8a489063":"code","f6829e56":"code","fa2b83ac":"code","b174148f":"code","3032e2e5":"code","9b2088e4":"code","efae56bb":"code","0658a440":"code","2e545653":"code","a2e4b6fa":"code","77ad2369":"code","d741b051":"code","18789288":"code","5f1b5fab":"markdown","17c3662a":"markdown","cc27b8da":"markdown","4571ef8f":"markdown","34539043":"markdown","8db17e1e":"markdown","a542fad9":"markdown","c8e35bd7":"markdown","7d7a5070":"markdown","d760ad54":"markdown","513ab95c":"markdown","1531d6c3":"markdown"},"source":{"bdd1793a":"#Importing Packages\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.metrics import confusion_matrix, r2_score\nfrom sklearn.preprocessing import StandardScaler, MinMaxScaler\nfrom sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.linear_model import LogisticRegression, LinearRegression","d2f17c4e":"data=pd.read_csv('..\/input\/retail-analysis-with-walmart-data\/Walmart_Store_sales.csv')","34fb5983":"data.head()","d7ace72b":"data.shape","e32cccaf":"data.info()","aee6338c":"data.describe(include = 'all')","383a846f":"data.isnull().sum()","03bb18ff":"#Converting date column to datetime type\ndata['Date'] = pd.to_datetime(data['Date'])\ndata['year'] = pd.DatetimeIndex(data['Date']).year\ndata['month'] = pd.DatetimeIndex(data['Date']).month","76d7ebfe":"data.head()","a8567833":"# which store has the best Weekly _ Sales from this data \ndata[data['Weekly_Sales']==max(data['Weekly_Sales'])]","74b200c7":"#Which store has maximum sales?\n\ndata.groupby('Store')['Weekly_Sales'].max().sort_values(ascending=False).head()","8d2e9c6c":"#Which Store has maximum variations in weekly sales?\n\nstd_devs = []\ntotal_stores = data['Store'].nunique()\nfor store in range(1,int(total_stores)+1):\n    values = data[data['Store']==store]['Weekly_Sales'].values\n    sd = np.std(values)\n    std_devs.append(sd)\n    \nmax_std_dev = max(std_devs)\nprint(\"Store with maximum standard deviation: Store\",std_devs.index(max_std_dev)+1)","ce0b9bcf":"#Which store\/s has good quarterly growth rate in Q3\u20192012?\n\n","572137ea":"qtr_profits =[]\nfor store in range(1,int(total_stores)+1):\n    values = data[(data['Store']==store) & (data['Date']> '2012-06-01') & (data['Date']<'2012-09-01')]['Weekly_Sales'].values\n    qtr_profits.append(np.mean(values))\n    \nprint(\"Store with maximum profit in Q3\u20192012: Store\",qtr_profits.index(max(qtr_profits))+1)","6d58b560":"plt.figure(figsize=(10,5))\nsns.barplot(x=[store for store in range(1,int(total_stores)+1)],y=qtr_profits)\nplt.show()","8a489063":"non_holiday_sales = data[data['Holiday_Flag']==0]['Weekly_Sales'].mean()\ndf_v1 = pd.DataFrame(data[data['Holiday_Flag']==1].groupby('Date')['Weekly_Sales'].mean())\nprint(df_v1[df_v1['Weekly_Sales'] > non_holiday_sales])\n","f6829e56":"data.head()","fa2b83ac":"#Which year has maximum weekly sales?\n\ndata.groupby(['year'])['Weekly_Sales'].sum().sort_values(ascending=False).plot.bar(x=\"Year\", y=\"Weekly Sales\", title=\"Year vs Weekly Sales\")\n","b174148f":"#Which store has highest sales in holiday?\n\ndata_v1 = data[(data['Holiday_Flag'] == 1)&(data['year']==2011) ]\ndata_v1.groupby('Store')['Weekly_Sales'].sum().sort_values(ascending = False).head(10).plot.bar(color='violet', title = 'Store Vs Sales for 2011')","3032e2e5":"#Correlation plot\ncorr = data.corr()\n\nplt.figure(figsize=(12, 10))\nsns.heatmap(corr, annot=True, vmin=-2.0)\nplt.show()","9b2088e4":"data['Day']=data['Date'].dt.day\ndata = data.drop('Date',axis=1)\ndata_v2 = pd.get_dummies(data, columns = ['Holiday_Flag','Store'])\ny = data_v2['Weekly_Sales']\nX= data_v2.drop('Weekly_Sales',axis=1)","efae56bb":"X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2)","0658a440":"ln_model = LinearRegression()\nln_model.fit(X_train,y_train)\ny_pred = ln_model.predict(X_test)\nprint(\"r2 score:\",r2_score(y_test,y_pred))","2e545653":"#Splitting independent and dependent variables\ny = data['Holiday_Flag']\nX= data.drop('Holiday_Flag',axis=1)\n\nscaler = MinMaxScaler()\nX = scaler.fit_transform(X)\n\nX_train, X_test, y_train, y_test = train_test_split(X,y,train_size=0.7)","a2e4b6fa":"penalty = [\"l1\",\"l2\"]\nc = np.logspace(0,8,10)\nhyperparameters = dict(C=c, penalty=penalty, solver =['liblinear'])","77ad2369":"model = LogisticRegression()\nclf = GridSearchCV(model,hyperparameters, cv = 10 , verbose = 0)\nbest_model = clf.fit(X_train,y_train)\nprint(\"Best hyperparameters : \",best_model.best_params_)","d741b051":"y_pred = best_model.predict(X_test)\nprint(best_model.score(X_test,y_test))","18789288":"confusion_matrix = confusion_matrix(y_pred,y_test)\nprint(confusion_matrix)","5f1b5fab":"Predicting weekly sales for all the stores","17c3662a":"There are no missing values in the dataset","cc27b8da":"Walmart Holiday Sale Prediction\n\nGiven data about weekly Walmart sales, let's try to predict whether a given record will be from during a holiday.\n\nWe will use logistic regression, support vector machine, and decision tree classifiers to make our predictions.","4571ef8f":"Store 14 looks like the one with the maximmum weekly sale . Wow (3818686) this is high.","34539043":"Store 14 has maximum weekly sales","8db17e1e":"Find out holidays which have higher sales than the mean sales in non-holiday season for all stores together","a542fad9":"Store 4 has the highest weekly sales in the year 2011","c8e35bd7":"Sales are higher at 2011 when compared to 2010 and 2012","7d7a5070":"Predicting whether the given sales record belongs to holiday or not","d760ad54":"**Analysis**","513ab95c":"Observations:\n1. Date column is not in date type\n2. All the columns are of numerical type","1531d6c3":"Store 14 has maximum standard deviation"}}