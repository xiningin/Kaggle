{"cell_type":{"beff97ae":"code","13d51f1a":"code","e017bb70":"code","385cd634":"code","9dfd16ba":"code","cf727f33":"code","fdccaed2":"code","482718ab":"code","f83d6af2":"code","d77ebc0b":"code","4962e889":"code","56fa0490":"code","be70e7b1":"code","73f2bb44":"code","e6df3e1b":"code","2f5dedce":"code","d0b57270":"code","68bf0c3a":"code","0946e629":"code","879ee73f":"code","9a325247":"code","965de6e7":"code","1aaab898":"code","770cd9ce":"code","1c6b2e71":"code","5ce31efe":"code","2b37eeef":"code","1e204ce8":"code","251177a8":"code","0388cf92":"code","b842d02a":"code","cf8529dd":"code","06ab95ad":"code","bc1823ab":"code","43558e7d":"code","2c9762ff":"code","2e684a66":"code","5a0ddb4c":"code","b6ab83a4":"code","533fa594":"code","23efa1ce":"code","cedc6830":"code","176561ee":"code","19d67ad7":"code","faaa0573":"code","f60d2a1b":"code","647fe51e":"code","470d7eac":"markdown","ea20bf5e":"markdown","07331376":"markdown","e7578b9a":"markdown","71f026af":"markdown","14caee10":"markdown","8ca9b795":"markdown","601350a2":"markdown","ed8cd398":"markdown","cc0d3c11":"markdown","cf6a6b1a":"markdown","726411ef":"markdown","928c8c02":"markdown","a6dbe81b":"markdown","a4838fd3":"markdown","8b94dac1":"markdown","b74a22b1":"markdown","ee6d89d1":"markdown","14b051c3":"markdown","b33a25ee":"markdown","310d23d1":"markdown","5861d6a6":"markdown","84d9ec46":"markdown","b6586a6e":"markdown","132a696e":"markdown","1a5b73f6":"markdown","e1839f68":"markdown","1b4a8b68":"markdown","fc448fe3":"markdown","310a84dd":"markdown","09c31a84":"markdown","7111b8fc":"markdown","9283e5df":"markdown","39c33921":"markdown","36186394":"markdown","ef0abaeb":"markdown","b015c1e9":"markdown","64c58013":"markdown","ead2d9ad":"markdown"},"source":{"beff97ae":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","13d51f1a":"df = pd.read_csv('..\/input\/120-years-of-olympic-history-athletes-and-results\/athlete_events.csv')\nnoc = pd.read_csv('..\/input\/120-years-of-olympic-history-athletes-and-results\/noc_regions.csv')\noriginal = df.copy()","e017bb70":"df = pd.merge(left = df, right = noc, on = 'NOC')","385cd634":"print(df.shape)","9dfd16ba":"df.info()","cf727f33":"df.describe()","fdccaed2":"df.drop_duplicates(inplace = True) ","482718ab":"df.drop(columns = ['ID', 'notes'], inplace = True)","f83d6af2":"num_cols = df.select_dtypes(['int64', 'float64']).columns.tolist()\nobj_cols = df.select_dtypes('O').columns.tolist()","d77ebc0b":"print('No. of Unique Values')\nfor i in obj_cols:\n    print(i, ':', df[i].nunique())","4962e889":"df.sample(10)","56fa0490":"def missing(df):\n    total = df.isnull().sum().sort_values(ascending = False)\n    percent = round(df.isnull().sum().sort_values(ascending = False) \/ len(df) * 100, 2)\n    return pd.concat([total, percent], axis = 1, keys = ['Total', '% Missing'])","be70e7b1":"missing(df)","73f2bb44":"df.dropna(subset = ['Weight', 'Height', 'Age'], inplace = True)","e6df3e1b":"bins = [0, 29, 45, 60, 100]\ndf['Age Group'] = pd.cut(df['Age'], bins = bins)","2f5dedce":"df['bmi'] = df['Weight'] \/ ((df['Height'] \/ 100) ** 2)","d0b57270":"df['bmi group'] = np.where(df['bmi'] <= 18.5, 'Underweight',\n                          np.where(df['bmi'] < 25, 'Normal',\n                                  np.where(df['bmi'] < 30, 'Overweight',\n                                          np.where(df['bmi'] >= 30, 'Obese', 'NA'))))","68bf0c3a":"print(\"Number of Olympic Seasons Held :\", df['Year'].nunique())\nprint(\"Number of Countries Participated :\", df['NOC'].nunique())\nprint(\"Number of Players Participated :\", df['Name'].nunique())\nprint(\"Number of Sports Conducted :\", df['Sport'].nunique())\nprint(\"Number of Medals Won :\\n\", df['Medal'].dropna().value_counts())","0946e629":"medals_won = df.dropna(subset = ['Medal'])","879ee73f":"plt.rcParams['figure.figsize'] = (8,6)\n\nmedals_won['region'].value_counts().nlargest(5).plot(kind = 'bar', linewidth = 1, facecolor = 'seagreen', edgecolor = 'k')\nplt.title('Top 5 Countries with most medals')\nplt.xlabel('Country')\nplt.ylabel('# Medals')\nplt.show()","9a325247":"df.groupby('region')['Name'].count().nlargest(5).plot(kind = 'bar', linewidth = 1, facecolor = 'seagreen', edgecolor = 'k')\nplt.title('Top 5 Countries which sent most players')\nplt.xlabel('Country')\nplt.ylabel('# Players')\nplt.show()","965de6e7":"top5countries_medals = medals_won.loc[medals_won['region'].isin(['USA', 'UK', 'Russia', 'France', 'Germany']), :]","1aaab898":"plt.rcParams['figure.figsize'] = (12,6)\n\npd.pivot_table(index = 'Year', columns = 'region', values = 'Medal', aggfunc = 'count',data = top5countries_medals).iloc[-5:, :].plot()\nplt.title('Performance of Top 5 Countries Over Last 5 Seasons')\nplt.xlabel('Country')\nplt.ylabel('#Medals')\nplt.show()","770cd9ce":"mf_ratio = pd.pivot_table(index = 'region', columns = 'Sex', values = 'Name', data = df, aggfunc = 'nunique')\nmf_ratio.head()","1c6b2e71":"mf_ratio['MRatio'] = ((mf_ratio['M'] \/ mf_ratio['M'])  * 100).astype(int)\nmf_ratio['FRatio'] = ((mf_ratio['F'] \/ mf_ratio['M'])  * 100).astype(int)\nmf_ratio['Overall'] = round(mf_ratio['MRatio'] \/ mf_ratio['FRatio'], 2)","5ce31efe":"mf_ratio[(mf_ratio['Overall'] > 0.90) & (mf_ratio['Overall'] < 1.1)]","2b37eeef":"mf_ratio.loc[((mf_ratio['Overall'] > 0.90) & (mf_ratio['Overall'] < 1.1) & (mf_ratio['M'] + mf_ratio['F'] > 100))].sort_values(by = 'Overall', ascending = False)","1e204ce8":"recent_olympic = df.loc[df['Year'] == 2016, :]","251177a8":"recent_olympic['Sport'].nunique()","0388cf92":"country_by_sport = pd.pivot_table(index = 'region', values = 'Sport', aggfunc = 'nunique', data = recent_olympic)","b842d02a":"print(country_by_sport[country_by_sport['Sport'] == 34].index)","cf8529dd":"plt.rcParams['figure.figsize'] = (8,6)\n\ndf['City'].value_counts().nlargest(5).plot(kind = 'bar', linewidth = 1, facecolor = 'seagreen', edgecolor = 'k')\nplt.title('Top 5 Cities Hosted Most Matches')\nplt.xlabel('City')\nplt.ylabel('# Matches')\nplt.show()","06ab95ad":"last_olympic = df.loc[df['Year'] == 2012, :]","bc1823ab":"last_olympic['Sport'].nunique()","43558e7d":"recent_olympic['Sport'].nunique()","2c9762ff":"last = set(last_olympic['Sport'])\nrecent = set(recent_olympic['Sport'])","2e684a66":"print('Games Introduced in the recent Summer Olympics : ', recent.difference(last))","5a0ddb4c":"first_olympic = df.loc[df['Year'] == 1896, :]","b6ab83a4":"first = set(first_olympic['Sport'])\nrecent = set(recent_olympic['Sport'])","533fa594":"print('Sports Played Since the First Summer Olympic Season', '\\n')\nprint(recent.intersection(first))","23efa1ce":"plt.rcParams['figure.figsize'] = (8,6)\n\nmedals_won['Name'].value_counts().nlargest(5).plot(kind = 'bar', linewidth = 1, facecolor = 'seagreen', edgecolor = 'k')\nplt.title('Top 5 Players with most medals')\nplt.xlabel('Players')\nplt.ylabel('# Medals')\nplt.show()","cedc6830":"medals_by_age = pd.DataFrame()","176561ee":"medals_by_age['Total Players'] = df['Age Group'].value_counts()\nmedals_by_age['Players Won Medals'] = medals_won['Age Group'].value_counts()\nmedals_by_age['Percent'] = round(medals_by_age['Players Won Medals'] \/ medals_by_age['Total Players'] * 100, 2)","19d67ad7":"medals_by_age.sort_index()","faaa0573":"medals_by_bmi = pd.DataFrame()","f60d2a1b":"medals_by_bmi['Total Players'] = df['bmi group'].value_counts()\nmedals_by_bmi['Players Won Medals'] = medals_won['bmi group'].value_counts()\nmedals_by_bmi['Percent'] = round(medals_by_bmi['Players Won Medals'] \/ medals_by_bmi['Total Players'] * 100, 2)","647fe51e":"medals_by_bmi","470d7eac":"To check whether the top 5 countries which won the most medals were consistent across the last 5 seasons, let's create a subset with only the top 5 countries.","ea20bf5e":"The difference operation of two sets would give out the values that are present in one set, but not in the other set. This is what we are looking for, right? Let's check it out.","07331376":"Let's create a new dataframe which has the total number of players and who have won the medals. This will help us to compute the percentage of players in every age group who have won medals.","e7578b9a":"### Which are the top 5 cities which hosted the most number of Olympic games?","71f026af":"Let's quickly drop the duplicate rows in this dataset as they impact our analysis. Also the columns like ID and notes would be of no use for our task. Hence they can also be removed.","14caee10":"### Did the top 5 countries won medals consistently for the last 5 Olympic seasons?","8ca9b795":"This notebook is an initial version of the analysis. I'll update this kernel with more inferences and incorporate some advanced visualization and data wrangling techniques. Do watch out this space for interesting updates.\n\nPlease upvote and comment if you like this kernel. Thanks in advance!","601350a2":"### Are there any countries which have participated in every game in the most recent Olympic held?","ed8cd398":"Let's check for the missing values. I'm defining a simple function which takes a dataframe as an argument and gives out another dataframe with no. of missing values and their percentage.","cc0d3c11":"## Insights to be derived","cf6a6b1a":"An interesting feature we could create from height and weight features is BMI. Let's create a feature for BMI using this formula.\n\n* BMI = Weight (kg) \/ Height (m) ** 2","726411ef":"It is a best practise to keep a copy of the original dataset. Let's merge both the datasets with NOC field as the primary key.","928c8c02":"Brazil is the only country which played in every sport in the 2016 Olympic season.","a6dbe81b":"### Is BMI a factor influencing the player's ability to win a medal?","a4838fd3":"### What are the top 5 countries which have won most gold, silver and bronze medals?","8b94dac1":"There were 34 games held during this Olympic season. Now let's check which are the countries who have played 34 games during 2016. This would help us understand the countries which have played in every sport.","b74a22b1":"There is no inference in particular. In Olympics, there are games which require the participants to either have more or less weight. \n\nFor example, if we take sports like wresting this would be played by participants who weigh more. For sports like athletics, it is the reverse case. Given this fact, there is no underlying trend between the BMI of the player and the winning ability.","ee6d89d1":"Okay, Let's define our own questions before moving forward. Framing questions before deep diving into the analysis would help us to stick to the flow. We would not be wasting time in less important points, rather we would be focused in finding the answers one by one. This will make our analysis more structured as well.","14b051c3":"The elder participants seem to won in less numbers, as expected. The increase in age probably would have resulted in less agility.","b33a25ee":"Let's create a pivot table to see the count of players by gender in every region.","310d23d1":"Hello Viewers, Thanks for taking a moment to view my kernel on Olympic case study. \n\nThis is an interesting kernel aimed at analysing the data on Olympic games held until the year 2016. This is a starter's guide for exploratory data analysis and basic data visualizations. \n\nThis kernel also helps you to understand how to frame questions initially before analysing the dataset. Once you define your own questions on what to explore in the particular dataset, it would immensely help you.\n\nOur dataset has the following features.\n\n* ID - Unique number for each athlete;\n* Name - Athlete's name;\n* Sex - M or F;\n* Age;\n* Height - In centimeters;\n* Weight - In kilograms;\n* Team - Team name;\n* NOC;\n* Games - Year and season;\n* Year;\n* Season - Summer or Winter;\n* City - Host city;\n* Sport - Sport;\n* Event - Event;\n* Medal - Gold, Silver, Bronze, or NA.","5861d6a6":"Let's create a subset with observations only for the recent season of the Olympics held .i.e. 2016.","84d9ec46":"The following questions apply for both summer and winter Olympics.\n\n### Country:\n* What are the top 5 countries which have won most medals?\n* What are top 5 countries which has sent more players to the Olympic games?\n* Did the top 5 countries won medals consistently for the last 5 Olympic seasons?\n* Does an increase in no. of players from a particular country increases the no. of medals for the country?\n* Which country has the best male to female ratio of players?\n* Are there any countries which have participated in every game in the most recent Olympic held?\n\n### City:\n* Which are the top 5 cities which hosted the most number of Olympic games?\n\n### Sport:\n* Are there any new sports introduced in the most recent summer Olympic held?\n* Which are the sports being played since the first summer Olympic season?\n\n### Player:\n* Who are the top 5 players that won most gold, silver and bronze medals? \n* Are young players tend to win more medals than the elder ones?\n* Is BMI a factor influencing the player's ability to win a medal?","b6586a6e":"The libraries used in this kernel are,\n* Numpy\n* Pandas\n* Matplotlib","132a696e":"Let's create two sets as we did earlier - one for the last summer olympics and the other for the first season and then compute the intersection to check the games which are being played since the first Olympic season.","1a5b73f6":"## Importing Libraries and Dataset","e1839f68":"### What are the top 5 countries which sent more players?","1b4a8b68":"### Are there any new sports introduced in the most recent summer Olympic held?","fc448fe3":"This is an interesting question. The optimum way I could think of finding this is by using set analysis. Sets carry only the unique values by default. Let's create two sets, the one which has games held during the recent Olympics and the other with that held during the previous season.","310a84dd":"### Which country has the best male - female ratio?","09c31a84":"### Which are the sports being played since the first summer Olympic season?","7111b8fc":"# Olympic Case Study - A Beginner's Guide","9283e5df":"### Are young players tend to win more medals than the elder ones?","39c33921":"Let's first have a subset of the original dataframe. This subset contains the observations where atleast a medal is won.","36186394":"Medals can be left as it is because not all the players who participate in the game would win. But the height, weight and age columns also have missing values. Even though the number of missing values in height and weight features are high, let us drop this as we will be still having a dataset with reasonable number of observations which suffice for the analysis.","ef0abaeb":"### Who are the top 5 players that won most gold, silver and bronze medals?","b015c1e9":"These are the countries which have the M:F ratio almost equal to 1. Why are we looking for a value almost equal to 1?\nThe value of 1 represents that the no. of males participated is equal to the no. of the females participated. As the value of 1 can't be obtained ideally, a buffer of -0.1 to 0.1 is chosen.\nLet's filter this with the countries which has sent more than 100 players as it makes more sense.","64c58013":"Though we have age, it is of a numeric type. Let's bin this feature as the categorization of numeric variables would simplify the analysis and more intuitive.","ead2d9ad":"Let's create a new dataframe like we did previosly. This time we will consider BMI Group as a primary feature and compute the total and percentage of players who have won medals."}}