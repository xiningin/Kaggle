{"cell_type":{"9c1e06aa":"code","02e44078":"code","b22d68e8":"code","1698c74d":"code","e75b8956":"code","ccfc4ec2":"code","37c60432":"code","21a08a36":"code","e8be1bab":"code","f6d18194":"code","3e46e234":"code","2756e825":"code","c8a1edb9":"code","46b0e98e":"code","34e0f09d":"code","772b3db2":"code","e6b9b619":"code","4ab65080":"code","4ed3abab":"code","1c2401d5":"code","5c5f8838":"code","82bce302":"code","ae560c41":"code","48be6b47":"code","19d7d045":"code","d2f69f32":"code","deddc841":"code","8b0100d4":"code","1f0f96de":"code","d2fbd464":"code","b5887810":"code","901457df":"code","a10983dc":"code","f9453436":"code","9a12a7c1":"code","c94747c5":"markdown","a02e12bc":"markdown","d8579fee":"markdown"},"source":{"9c1e06aa":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport pandas_profiling\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","02e44078":"train = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/train.csv')\ntest = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/test.csv')\n\n# train.profile_report()","b22d68e8":"train.head()","1698c74d":"# \u6700\u5f8c\u306e\u30ab\u30e9\u30e0SalePrice\u3092\u4e88\u6e2c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\ntest.head()","e75b8956":"train.isnull().sum()","ccfc4ec2":"# train\u3068test\u306e\u30ab\u30e9\u30e0\u3092\u4e00\u62ec\u3067\u51e6\u7406\u3059\u308b\u305f\u3081\u306b\u884c\u65b9\u5411\u306b\u7d50\u5408\u3059\u308b\ndata = pd.concat([train, test], sort=False)","37c60432":"#\u6700\u5927\u8868\u793a\u884c\u6570\u3092\u8a2d\u5b9a\npd.set_option('display.max_rows', 500)","21a08a36":"# \u6b20\u640d\u5024\u306e\u3042\u308b\u30ab\u30e9\u30e0\u3092\u63a2\u3059\ndata.isnull().sum()","e8be1bab":"# data['Street'].replace(['Pave', 'Grvl'], [0, 1], inplace=True)\n# data['LandContour'].replace(['Lvl', 'HLS', 'Bnk', 'Low'], [0, 1, 2, 3], inplace=True)\n# data['Utilities'].replace(['AllPub', 'False', 'NoSeWa'], [0, 1, 2], inplace=True)\n# data['LotConfig'].replace(['Inside', 'Corner', 'CulDSac', 'FR2', 'FR3'], [0, 1, 2, 3, 4], inplace=True)","f6d18194":"# (data['Neighborhood'].value_counts())","3e46e234":"# Utilities\u306e\u6b20\u640d\u5024\u3092False\u3067\u57cb\u3081\u308b\ndata['Utilities'].fillna('AllPub', inplace=True)","2756e825":"# Exterior2nd\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['Exterior2nd'].value_counts()","c8a1edb9":"# Exterior2nd\u306f\u6b20\u640d\u5024\u304c1\u3064\u306a\u306e\u3067\u30c7\u30fc\u30bf\u304c\u6700\u3082\u591a\u3044VinylSd\u3067\u57cb\u3081\u308b\ndata['Exterior2nd'].fillna('VinylSd', inplace=True)","46b0e98e":"# BsmtFinType1\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['BsmtFinType1'].value_counts()","34e0f09d":"# \u6b20\u640d\u5024\u3092ALQ\u3067\u7a74\u57cb\u3081\ndata['BsmtFinType1'].fillna('ALQ', inplace=True)","772b3db2":"# TotalBsmtSF\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['TotalBsmtSF'].isnull().sum()","e6b9b619":"# TotalBsmtSF\u306e\u6b20\u640d\u5024\u3092\u4e2d\u592e\u5024\u3067\u7a74\u57cb\u3081\ndata['TotalBsmtSF'].fillna(data['TotalBsmtSF'].median(), inplace=True)","4ab65080":"# Electrical\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['Electrical'].value_counts()","4ed3abab":"# Electrical\u306e\u6b20\u640d\u5024\u3092SBrkr\u3067\u7a74\u57cb\u3081\ndata['Electrical'].fillna('SBrkr', inplace=True)","1c2401d5":"# GarageCars\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['GarageCars']","5c5f8838":"data['GarageCars'].fillna(data['GarageCars'].median(), inplace=True)","82bce302":"# GarageArea\u306e\u30c7\u30fc\u30bf\u78ba\u8a8d\ndata['GarageArea']","ae560c41":"data['GarageArea'].fillna(data['GarageArea'].median(), inplace=True)","48be6b47":"data.isnull().sum()","19d7d045":"# \u4f7f\u308f\u306a\u3044\u30ab\u30e9\u30e0\u3092\u524a\u9664\ndelete_columns = ['MSZoning', 'LotFrontage', 'Alley', 'LotArea', 'LotShape', 'LandSlope', 'OverallQual',\n                 'YearRemodAdd', 'RoofStyle', 'RoofMatl', 'Exterior1st', 'MasVnrType', 'MasVnrArea',\n                 'ExterQual', 'ExterCond', 'BsmtQual', 'BsmtCond', 'BsmtExposure', 'BsmtFinSF1', 'BsmtFinType2',\n                 'BsmtFinSF2', 'BsmtUnfSF', 'HeatingQC', 'LowQualFinSF', 'GrLivArea', 'BsmtFullBath', 'BsmtHalfBath',\n                 'FullBath', 'HalfBath', 'KitchenQual', 'Functional', 'FireplaceQu', 'GarageType', 'GarageYrBlt',\n                 'GarageFinish', 'GarageQual', 'GarageCond', 'PavedDrive', 'EnclosedPorch', '3SsnPorch', 'ScreenPorch',\n                 'PoolQC', 'Fence', 'MiscFeature', 'MiscVal', 'MoSold', 'YrSold', 'SaleType', 'SaleCondition']\ndata.drop(delete_columns, axis=1, inplace=True)","d2f69f32":"data.isnull().sum()","deddc841":"# concat\u3067\u7d50\u5408\u3057\u3066\u3044\u305f\u306e\u3067\u518d\u5ea6\u5206\u5272\u3059\u308b\ntrain = data[:len(train)]\ntest = data[len(train):]\n\ny_train = train['SalePrice']\nX_train = train.drop('SalePrice', axis=1)\nX_test = test.drop('SalePrice', axis=1)","8b0100d4":"# \u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u5ba3\u8a00\u3059\u308b\ncategorical_features = ['Street', 'LandContour', 'Utilities', 'LotConfig', 'Neighborhood', 'Condition1',\n                        'Condition2', 'BldgType', 'HouseStyle', 'Exterior2nd', 'Foundation', 'BsmtFinType1',\n                        'Heating', 'CentralAir', 'Electrical']","1f0f96de":"from sklearn.preprocessing import LabelEncoder\n\n# \u30ab\u30c6\u30b4\u30ea\u5909\u6570\u3092\u30eb\u30fc\u30d7\u3057\u3066label encoding\nfor c in categorical_features:\n    le = LabelEncoder()\n    le.fit(X_train[c])\n    X_train[c] = le.transform(X_train[c])\n    X_test[c] = le.transform(X_test[c])","d2fbd464":"from sklearn.model_selection import train_test_split\n\nX_train, X_valid, y_train, y_valid = \\\n    train_test_split(X_train, y_train, test_size=0.3, shuffle=True, random_state=0)","b5887810":"X_test.dtypes","901457df":"# \u30c7\u30fc\u30bf\u306f\u8a13\u7df4\u7528\u3068\u30c6\u30b9\u30c8\u7528\u306e2\u7a2e\u985e\u3092\u767b\u9332\nimport lightgbm as lgb\n\nlgb_train = lgb.Dataset(X_train, y_train, categorical_feature=categorical_features)\nlgb_eval = lgb.Dataset(X_valid, y_valid, reference=lgb_train, categorical_feature=categorical_features)","a10983dc":"params = {\n    'metric': 'rmse'\n}\n\nmodel = lgb.train(params, lgb_train,\n                 valid_sets=[lgb_train, lgb_eval],\n                 verbose_eval=10,\n                 num_boost_round=1000,\n                 early_stopping_rounds=10)\ny_pred = model.predict(X_test, num_iteration=model.best_iteration)","f9453436":"y_pred[:10]","9a12a7c1":"sub = pd.read_csv('\/kaggle\/input\/house-prices-advanced-regression-techniques\/sample_submission.csv')\n\nsub['SalePrice'] = y_pred\nsub.to_csv('submission_lightgbm_handtuning_saleprice.csv', index=False)","c94747c5":"### LightGBM\u3067\u5b66\u7fd2\u30fb\u4e88\u6e2c\u3057\u3066\u3044\u304f","a02e12bc":"## LightGBM","d8579fee":"## \u7279\u5fb4\u91cf\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u3001\u30c7\u30fc\u30bf\u306e\u6574\u5f62\n* \u4f7f\u3046\u7279\u5fb4\u91cf\u3092\u6c7a\u3081\u308b\n    * MSSubClass\u3002\u5efa\u7269\u306e\u30af\u30e9\u30b9\n<!--     * MSZoning\u3002\u4e00\u822c\u7684\u306a\u30be\u30fc\u30cb\u30f3\u30b0\u5206\u985e -->\n<!--     * LotFrontage \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u9053\u8def\u306e\u76f4\u7dda\u30d5\u30a3\u30fc\u30c8 -->\n    * LotArea\uff1a\u6577\u5730\u9762\u7a4d\u3002\u6577\u5730\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n    * Street: \u9053\u8def\u30a2\u30af\u30bb\u30b9\u306e\u7a2e\u985e\n<!-- Alley: \u8def\u5730\u306e\u7a2e\u985e -->\n<!-- LotShape: \u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e00\u822c\u7684\u306a\u5f62\u72b6 -->\n<!-- LandContour: Flatness of the property\uff08\u6577\u5730\u306e\u5e73\u5766\u6027 -->\n    * Utilities: \u5229\u7528\u53ef\u80fd\u306a\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u306e\u7a2e\u985e\n    * LotConfig: \u571f\u5730\u306e\u69cb\u6210\n<!-- LandSlope: \u50be\u659c\uff1a\u6577\u5730\u306e\u50be\u659c -->\n    * Neighborhood\uff1a\u8fd1\u96a3\u5730\u57df\u3002\u30a8\u30a4\u30e0\u30ba\u5e02\u57df\u5185\u306e\u7269\u7406\u7684\u306a\u4f4d\u7f6e\n    * \u6761\u4ef61: \u5e79\u7dda\u9053\u8def\u3084\u9244\u9053\u306b\u8fd1\u3044\u3053\u3068\n    * \u6761\u4ef62: \u5e79\u7dda\u9053\u8def\u307e\u305f\u306f\u9244\u9053\u3078\u306e\u8fd1\u63a5\u6027\uff082\u3064\u76ee\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\uff09\n    * BldgType: \u4f4f\u307e\u3044\u306e\u30bf\u30a4\u30d7\n    * HouseStyle: \u4f4f\u307e\u3044\u306e\u30b9\u30bf\u30a4\u30eb\n<!-- OverallQual\uff1a\u5168\u4f53\u7684\u306a\u7d20\u6750\u3068\u4ed5\u4e0a\u3052\u306e\u8cea \u5168\u4f53\u7684\u306a\u7d20\u6750\u3068\u4ed5\u4e0a\u3052\u306e\u54c1\u8cea -->\n    * OverallCond: Overall Condition Rating\uff1a\u5168\u4f53\u7684\u306a\u72b6\u614b\u306e\u8a55\u4fa1\n    * YearBuilt: YearBuilt\uff08\u5efa\u8a2d\u5e74\uff09\uff1a\u5f53\u521d\u306e\u5efa\u8a2d\u65e5\n<!-- YearRemodAdd: \u6539\u9020\u6642\u671f -->\n<!-- RoofStyle: \u5c4b\u6839\u306e\u7a2e\u985e -->\n<!-- RoofMatl: \u5c4b\u6839\u306e\u6750\u8cea -->\n<!-- Exterior1st: \u5916\u88c51st\uff1a\u4f4f\u5b85\u306e\u5916\u88c5\u30ab\u30d0\u30fc -->\n    * Exterior2nd: \u5bb6\u306e\u5916\u58c1\uff08\u8907\u6570\u306e\u7d20\u6750\u304c\u3042\u308b\u5834\u5408\uff09\n<!-- MasVnrType: \u30e1\u30a4\u30bd\u30f3\u30ea\u30fc\u30d9\u30cb\u30e4\u30bf\u30a4\u30d7 -->\n<!-- MasVnrArea: \u77f3\u7a4d\u307f\u30d9\u30cb\u30e4\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8 -->\n<!-- ExterQual: \u30a8\u30af\u30b9\u30c6\u30ea\u30a2\u7d20\u6750\u306e\u54c1\u8cea -->\n<!-- ExterCond: ExterCond: \u5916\u88c5\u6750\u306e\u73fe\u5728\u306e\u72b6\u614b -->\n<!-- \u8ca1\u56e3 \u57fa\u790e\u306e\u7a2e\u985e -->\n<!-- BsmtQual\uff1a\u5730\u4e0b\u5ba4\u306e\u9ad8\u3055 -->\n<!-- BsmtCond: BsmtCond\uff1a\u5730\u4e0b\u5ba4\u306e\u4e00\u822c\u7684\u306a\u72b6\u614b -->\n<!-- BsmtExposure\uff1a\u30a6\u30a9\u30fc\u30af\u30a2\u30a6\u30c8\u307e\u305f\u306f\u30ac\u30fc\u30c7\u30f3\u30ec\u30d9\u30eb\u306e\u5730\u4e0b\u5ba4\u306e\u58c1 -->\n    * BsmtFinType1\u3002BsmtFinType1\uff1a\u5730\u4e0b\u5ba4\u306e\u4ed5\u4e0a\u3052\u30a8\u30ea\u30a2\u306e\u54c1\u8cea\n<!-- BsmtFinSF1\u3002\u30bf\u30a4\u30d71\u306e\u4ed5\u4e0a\u3052\u9762\u7a4d -->\n<!-- BsmtFinType2\u30022\u3064\u76ee\u306e\u4ed5\u4e0a\u3052\u9762\u7a4d\u306e\u8cea\uff08\u3042\u308b\u5834\u5408\uff09 -->\n<!-- BsmtFinSF2\uff1a\u30bf\u30a4\u30d72\u306e\u5b8c\u6210\u9762\u7a4d -->\n<!-- BsmtUnfSF\uff1a\u5730\u4e0b\u306e\u672a\u5b8c\u6210\u30a8\u30ea\u30a2\u306e\u5e73\u7c73\u6570 -->\n    * TotalBsmtSF\uff1a\u5730\u4e0b\u5ba4\u30a8\u30ea\u30a2\u306e\u7dcf\u9762\u7a4d\n<!-- \u6696\u623f \u6696\u623f\u306e\u7a2e\u985e -->\n    * HeatingQC: HeatingQC\uff1a\u6696\u623f\u306e\u8cea\u3068\u72b6\u614b\n<!-- CentralAir: \u30bb\u30f3\u30c8\u30e9\u30eb\u30fb\u30a8\u30a2\u30fb\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0 -->\n    * Electrical\uff1a\u96fb\u6c17\u7cfb\u7d71\n    * 1stFlrSF\uff1a1\u968e\u306e\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n    * 2ndFlrSF\uff1a2\u968e\u306e\u5e83\u3055\u30d5\u30a3\u30fc\u30c8\n<!-- LowQualFinSF\uff1a\u4f4e\u54c1\u8cea\u4ed5\u4e0a\u3052\u306e\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\uff08\u5168\u30d5\u30ed\u30a2\uff09 -->\n<!-- GrLivArea: Above Grade (ground) living area\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8 -->\n<!-- BsmtFullBath\uff1a\u5730\u4e0b\u5ba4\u306e\u30d5\u30eb\u30d0\u30b9\u3002BsmtFullBath\uff1a\u5730\u4e0b\u306e\u30d5\u30eb\u30d0\u30b9\u30eb\u30fc\u30e0 -->\n<!-- BsmtHalfBath\uff1a\u30d9\u30fc\u30b9\u30e1\u30f3\u30c8\u30cf\u30fc\u30d5\u30d0\u30b9\u30eb\u30fc\u30e0 \u30d9\u30fc\u30b9\u30e1\u30f3\u30c8\u30cf\u30fc\u30d5\u30d0\u30b9\u30eb\u30fc\u30e0 -->\n<!-- FullBath: \u968e\u5c64\u4e0a\u306e\u30d5\u30eb\u30d0\u30b9\u30eb\u30fc\u30e0 -->\n<!-- HalfBath: HalfBath: \u534a\u5206\u4ee5\u4e0a\u306e\u30d0\u30b9\u30eb\u30fc\u30e0 -->\n    * Bedroom \u5730\u4e0b1\u968e\u4ee5\u4e0a\u306e\u30d9\u30c3\u30c9\u30eb\u30fc\u30e0\u306e\u6570\n<!-- \u30ad\u30c3\u30c1\u30f3 \u53f0\u6240\uff1a\u53f0\u6240\u306e\u6570 -->\n<!-- KitchenQual: KitchenQual: \u30ad\u30c3\u30c1\u30f3\u306e\u54c1\u8cea -->\n    * TotRmsAbvGrd: \u968e\u6bb5\u3092\u4e0a\u304c\u3063\u305f\u90e8\u5c4b\u306e\u7dcf\u6570\uff08\u30d0\u30b9\u30eb\u30fc\u30e0\u306f\u542b\u307e\u306a\u3044\uff09\n<!-- Functional\uff1a\u4f4f\u5b85\u306e\u6a5f\u80fd\u6027\u8a55\u4fa1 -->\n    * Fireplaces: \u6696\u7089\uff1a\u6696\u7089\u306e\u6570\n<!-- FireplaceQu: \u6696\u7089\u306e\u8cea -->\n<!-- GarageType: \u30ac\u30ec\u30fc\u30b8\u306e\u5834\u6240 -->\n<!-- GarageYrBlt: \u30ac\u30ec\u30fc\u30b8\u304c\u5efa\u3066\u3089\u308c\u305f\u5e74 -->\n<!-- GarageFinish: \u30ac\u30ec\u30fc\u30b8\u306e\u5185\u88c5\u4ed5\u4e0a\u3052 -->\n    * GarageCars: \u30ac\u30ec\u30fc\u30b8\u306e\u30b5\u30a4\u30ba\uff08\u8eca\u306e\u5bb9\u91cf\n    * GarageArea\uff1a\u30ac\u30ec\u30fc\u30b8\u306e\u9762\u7a4d GarageArea\uff1a\u30ac\u30ec\u30fc\u30b8\u306e\u5e83\u3055\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n<!-- GarageQual\uff1a\u30ac\u30ec\u30fc\u30b8\u306e\u54c1\u8cea \u30ac\u30ec\u30fc\u30b8\u306e\u54c1\u8cea -->\n<!-- GarageCond: \u8eca\u5eab\u306e\u72b6\u614b -->\n<!-- PavedDrive: PavedDrive: \u8217\u88c5\u3055\u308c\u305f\u30c9\u30e9\u30a4\u30d6\u30a6\u30a7\u30a4 -->\n    * WoodDeckSF\uff1a\u30a6\u30c3\u30c9\u30c7\u30c3\u30ad\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n    * OpenPorchSF\uff1a\u30aa\u30fc\u30d7\u30f3\u30dd\u30fc\u30c1\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n<!-- EnclosedPorch: EnclosedPorch\uff1a\u9589\u3058\u3089\u308c\u305f\u30dd\u30fc\u30c1\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8 -->\n<!-- 3SsnPorch: Three-season Porch\uff1a\u30b9\u30ea\u30fc\u30b7\u30fc\u30ba\u30f3\u30dd\u30fc\u30c1\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8 -->\n<!-- ScreenPorch: ScreenPorch\uff1a\u30b9\u30af\u30ea\u30fc\u30f3\u30dd\u30fc\u30c1\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8 -->\n    * PoolArea\uff1a\u30d7\u30fc\u30eb\u30a8\u30ea\u30a2 \u30d7\u30fc\u30eb\u30a8\u30ea\u30a2\uff1a\u30d7\u30fc\u30eb\u306e\u9762\u7a4d\uff08\u5e73\u65b9\u30d5\u30a3\u30fc\u30c8\n<!-- PoolQC: \u30d7\u30fc\u30eb\u306e\u54c1\u8cea -->\n<!-- Fence: Fence\uff1a\u30d5\u30a7\u30f3\u30b9\u306e\u54c1\u8cea -->\n<!-- MiscFeature: \u4ed6\u306e\u30ab\u30c6\u30b4\u30ea\u30fc\u306b\u542b\u307e\u308c\u306a\u3044\u96d1\u591a\u306a\u6a5f\u80fd -->\n<!-- % MiscVal: \u96d1\u591a\u306a\u6a5f\u80fd\u306e \u4fa1\u5024 -->\n<!-- MoSold: \u58f2\u308c\u305f\u6708 -->\n<!-- YrSold: \u58f2\u308c\u305f\u5e74 -->\n<!-- SaleType: \u8ca9\u58f2\u306e\u7a2e\u985e -->\n<!-- SaleCondition: \u30bb\u30fc\u30eb\u306e\u6761\u4ef6 -->"}}