{"cell_type":{"5c6a9fae":"code","e8d272c6":"code","71bd6a96":"code","7232b954":"code","9a801bef":"code","34e7411e":"code","eaa6fe80":"code","d3a0f0f6":"code","d453b6af":"code","6b649d69":"code","087083fd":"code","c3bfa94d":"code","2de0468e":"code","ce085623":"code","fdf5b7ac":"code","6d5dc59f":"code","020c2776":"code","6166c0ef":"code","8793c0a4":"code","9701293e":"code","39aca16e":"markdown","716c65dc":"markdown","4fee468d":"markdown","de4ee23d":"markdown","d5976430":"markdown"},"source":{"5c6a9fae":"import os \nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom matplotlib.gridspec import GridSpec\nfrom datetime import date","e8d272c6":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","71bd6a96":"df = pd.read_csv('\/kaggle\/input\/police-deadly-force-usage-us\/fatal-police-shootings-data.csv', delimiter=',')","7232b954":"df.head()","9a801bef":"df.info()","34e7411e":"df.nunique()","eaa6fe80":"df['date'] = pd.to_datetime(df['date'])\ndf['year'] = df.date.dt.year\ndf.head()","d3a0f0f6":"df.gender.value_counts()","d453b6af":"df[df.gender.isna()]","6b649d69":"df.gender.fillna(value='Unknown',inplace=True)\ndf.gender.value_counts()","087083fd":"plt.figure(figsize=(8,5))\nax = sns.countplot(x='gender', data=df);\ntotal = df.gender.value_counts().sum()\nfor p in ax.patches:\n    perc = '{:.2f}%'.format(100 * p.get_height()\/total)\n    ax.annotate(perc, (p.get_x()+0.33, p.get_height()+50))\nplt.title('Police Shooting Deaths in US (2015-2020)', fontsize=16)\nplt.show()","c3bfa94d":"df_M=df[df['gender']=='M'].groupby(['year'])['id'].count().reset_index()\ndf_F=df[df['gender']=='F'].groupby(['year'])['id'].count().reset_index()\n\nfig = plt.figure(figsize=(12,5))\ng = GridSpec(1,2)\nax1 = fig.add_subplot(g[0,0])\nax2 = fig.add_subplot(g[0,1])\n\nsns.barplot(x='year', y='id', ax=ax1, data=df_M)\nsns.barplot(x='year', y='id', ax=ax2, data=df_F)\nax1.set_title('Male population')\nax2.set_title('Female population')\nax1.set_ylabel('count')\nax2.set_ylabel('count')\nplt.show()","2de0468e":"df.race.notna().value_counts()","ce085623":"df.race.fillna(value='U',inplace=True)\ndf.race.value_counts()","fdf5b7ac":"race_grouped = df.groupby(['year','race'])['id'].count().unstack(level=-1)\nrace_grouped = race_grouped[['W', 'B', 'H', 'U', 'A', 'N', 'O']]\nrace_grouped = race_grouped.rename(columns={'W': 'White', 'B': 'Black', 'H': 'Hispanic', \n                    'U': 'Unknown', 'A': 'Asian', 'N': 'Native American', 'O': 'Other'})\nrace_grouped","6d5dc59f":"plt.figure(figsize=(12,6))\nrace_grouped.plot.barh(stacked=True)\nplt.legend(bbox_to_anchor=(1.1, 1.05))\nplt.show()","020c2776":"state_pops = pd.read_csv('..\/input\/us-state-populations-2018\/State Populations.csv')\nstate_codes = {'California' : 'CA', 'Texas' : 'TX', 'Florida' : 'FL', 'New York' : 'NY', 'Pennsylvania' : 'PA',\n       'Illinois' : 'IL', 'Ohio' : 'OH', 'Georgia' : 'GA', 'North Carolina' : 'NC', 'Michigan' : 'MI',\n       'New Jersey' : 'NJ', 'Virginia' : 'VA', 'Washington' : 'WA', 'Arizona' : 'AZ', 'Massachusetts' : 'MA',\n       'Tennessee' : 'TN', 'Indiana' : 'IN', 'Missouri' : 'MO', 'Maryland' : 'MD', 'Wisconsin' : 'WI',\n       'Colorado' : 'CO', 'Minnesota' : 'MN', 'South Carolina' : 'SC', 'Alabama' : 'AL', 'Louisiana' : 'LA',\n       'Kentucky' : 'KY', 'Oregon' : 'OR', 'Oklahoma' : 'OK', 'Connecticut' : 'CT', 'Iowa' : 'IA', 'Utah' : 'UT',\n       'Nevada' : 'NV', 'Arkansas' : 'AR', 'Mississippi' : 'MS', 'Kansas' : 'KS', 'New Mexico' : 'NM',\n       'Nebraska' : 'NE', 'West Virginia' : 'WV', 'Idaho' : 'ID', 'Hawaii' : 'HI', 'New Hampshire' : 'NH',\n       'Maine' : 'ME', 'Montana' : 'MT', 'Rhode Island' : 'RI', 'Delaware' : 'DE', 'South Dakota' : 'SD',\n       'North Dakota' : 'ND', 'Alaska' : 'AK', 'District of Columbia' : 'DC', 'Vermont' : 'VT',\n       'Wyoming' : 'WY'}\nstate_pops['State Code'] = state_pops['State'].apply(lambda x: state_codes[x])\nstate_pops.head()","6166c0ef":"state_grouped = df.groupby(['state'])['id'].count().reset_index()\nstate_grouped.head()","8793c0a4":"state_grouped['population'] = state_grouped['state'].apply(lambda x: state_pops[state_pops['State Code'] == x].values[0,1])\nstate_grouped['per100000'] = state_grouped['id']\/state_grouped['population']*100000\nstate_grouped.sort_values('per100000', ascending=False, inplace=True)\nstate_grouped.head()","9701293e":"plt.figure(figsize=(8,15))\nsns.barplot(x='per100000', y='state', data=state_grouped)\nplt.title('Police Shootings in US (2015-2020)', fontsize=16)\nplt.xlabel('Deaths per 100,000')\nplt.show()","39aca16e":"# Exploring data by gender","716c65dc":"# Racial distribution","4fee468d":"# Reading data","de4ee23d":"A new column 'year' is introduced, since at some point data will be examined during years as periods of time.","d5976430":"# Geographical distribution"}}