{"cell_type":{"ce2bf0dd":"code","282c29b4":"code","922611c8":"code","f393466f":"code","bb3abec4":"code","f5854fca":"code","1992c007":"code","f32d0723":"code","e13c0fa1":"code","f41466ca":"code","04407c0d":"code","5f3f8af1":"code","bc4882c0":"markdown","6da7e1bd":"markdown","84db56fc":"markdown","8b342974":"markdown","9f01f89d":"markdown","62a3293b":"markdown","fd9372a3":"markdown","2ce703c2":"markdown","4aede7ba":"markdown","3ac4571f":"markdown","1020c165":"markdown","fbd6f153":"markdown","f89b923a":"markdown","c25d9d98":"markdown","e9a28609":"markdown","3dbff53c":"markdown","a0edd677":"markdown"},"source":{"ce2bf0dd":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nimport warnings\n\nfrom IPython.display import display, Latex\n\nwarnings.filterwarnings('ignore')\n\n\ndata = pd.read_csv('\/kaggle\/input\/titanic\/train.csv')","282c29b4":"print(f\"Total row count in the dataset: {data.shape[0]}\")\nlength = data.shape[0]\nnan_count = pd.DataFrame(data.apply(lambda x: x.isna().sum()), columns=['nan_count'])\nfraction_nan = pd.DataFrame(data.apply(lambda x: round(x.isna().sum() \/ length * 100, 2)), columns=['percentage_nan'])\ndtype = pd.DataFrame(data.apply(lambda x: x.dtype), columns=['dtype'])\n\npd.concat([nan_count, fraction_nan, dtype], axis=1)","922611c8":"ax = pd.crosstab(data['Survived'], data['Sex']).plot(kind='bar')\nax.set_ylabel('Passenger count')\n_ = ax.set_title('Survived vs non-survived passenger count by Gender')","f393466f":"n_male = data['Sex'].value_counts()['male']\nn_female = data['Sex'].value_counts()['female']\n\ndf = data.groupby(['Survived', 'Sex'])[['PassengerId']].count()\ndf = df.reset_index('Sex')\ndf['percent_of_total'] = df['PassengerId'] \/ data.shape[0] * 100\ndf['percent_of_gender'] = df.apply(lambda x: x['PassengerId'] \/ n_male * 100 if x.Sex == 'male' else x['PassengerId'] \/ n_female * 100 , axis=1)\ndf","bb3abec4":"ax = pd.crosstab(data['Survived'], data['Pclass']).plot(kind='bar')\nax.set_ylabel('Passenger count')\n_ = ax.set_title('Survived vs non-survived passenger count by socio-economic class')","f5854fca":"n_1 = data['Pclass'].value_counts()[1]\nn_2 = data['Pclass'].value_counts()[2]\nn_3 = data['Pclass'].value_counts()[3]\n\ndef calculate_percent_class(row):\n    if row['Pclass'] == 1:\n        return row['PassengerId'] \/ n_1\n    elif row['Pclass'] == 2:\n        return row['PassengerId'] \/ n_2\n    else:\n        return row['PassengerId'] \/ n_3\n\ndf = data.groupby(['Survived', 'Pclass'])[['PassengerId']].count()\ndf.reset_index('Pclass', inplace=True)\ndf['percent_of_total'] = df['PassengerId'] \/ data.shape[0] * 100\ndf['percent_of_class'] = df.apply(lambda x: calculate_percent_class(x) * 100, axis=1)\ndf","1992c007":"print(\n    f\"Mean age: {data['Age'].mean()}\", \n    f\"Median age: {data['Age'].median()}\", \n    f\"Age range: {data['Age'].min()} to {data['Age'].max()}\",\n    f\"2nd to 3rd quartile: {data['Age'].quantile(0.25)} to {data['Age'].quantile(0.75)}\",\n    sep='\\n'\n)\n\ndata['age_group'] = pd.cut(data['Age'], bins=[0, 10, 20, 30, 40, 50, 60, 70, 80, 90]).map(lambda x: f'{x.left}-{x.right}')\npd.crosstab(data['age_group'], data['Survived']).plot(kind='bar')","f32d0723":"sns.countplot(x='Parch', data=data, hue='Survived')\ndf = pd.crosstab(data['Parch'], data['Survived'])\ndf['% survived'] = df[1] \/ (df[1] + df[0])\ndf['% not survived'] = df[0] \/ (df[1] + df[0])\ndf","e13c0fa1":"sns.countplot(x='SibSp', data=data, hue='Survived')\ndf = pd.crosstab(data['SibSp'], data['Survived'])\ndf['% survived'] = df[1] \/ (df[1] + df[0])\ndf['% not survived'] = df[0] \/ (df[1] + df[0])\ndf","f41466ca":"fig, ax = plt.subplots(figsize=(12, 5))\n\nsns.distplot(a=data[data['Survived'] == 0]['Fare'], label='Not Survived', ax=ax, hist=False)\nsns.distplot(a=data[data['Survived'] == 1]['Fare'], label='Survived', ax=ax, hist=False)\nax.legend()\n\nthird_quantile = data['Fare'].quantile(0.75)\nprint(f'Third quantile: {third_quantile}')\ngreater = data[data['Fare'] >= third_quantile]['Survived'].value_counts()\nless = data[data['Fare'] < third_quantile]['Survived'].value_counts()\ndf = pd.concat([greater, less], axis=1)\ndf.columns = [f'fare >= {third_quantile}', f'fare < {third_quantile}']\ndf","04407c0d":"def get_salutation(name):\n    name = name.split(',')[1]\n    return name.split('.')[0].strip()\n\nsalutation = data['Name'].map(get_salutation)\ndata['salutations'] = salutation\nprint(f\"Rows without any salutations: {salutation.isna().sum()}\")\nprint(f\"Unique salutations in the dataset: {', '.join(salutation.unique().tolist())}\")\n\ndf = pd.crosstab(data['salutations'], data['Survived'])\ndf['% survived'] = df[1] \/ (df[1] +  df[0])\ndf['% not survived'] = df[0] \/ (df[1] +  df[0])\ndf","5f3f8af1":"salutation_dict = dict(data[['salutations', 'Age']].groupby('salutations')['Age'].median())\nmissing_ages = data[data['Age'].isna()]['salutations'].map(salutation_dict.get)\nidx = missing_ages.index\ndata.loc[idx, 'Age'] = missing_ages\nmissing_age_count = data['Age'].isna().sum()\nprint(f'Missing values in age column: {missing_age_count}')","bc4882c0":"### Feature: Sex","6da7e1bd":"## Conclusions\n\n1. The sex of the passenger has quite a good impact on the survivability of the passenger.\n2. People on the higher end of the socio-economic status were given more priority\n3. Young people has a lesser chance of surviving.\n4. Passengers who paid a higher fare survived better.\n5. People with 0 parent \/ children and siblings\/spouses survived less.\n6. The salutations matches with the age group where specific salutations survived.","84db56fc":"Even though 1st class contains the least amount of people; **24.24%** of total, The highest fraction of people that survived were from 1st class **(62.96%)**. And unfortunately, Most number of people had their tickets booked in the 3rd class **(55.1%)** and the most number of people that didn't survive were from 3rd class **(75.76%)**.\n\nSimilarily, 1st class tallied lowest in deaths **(37.04%)** and 3rd class tallied lowest **(24.23)** in survival rates. Consequently, as a persons socio economic status is higher, that chances of survival is also higher.","8b342974":"There is a skew in the distribution of fare paid and it is to the left. When distribution of fare is plotted but separated by survival, we can see both distributions are skewed to the left. But the density of the non-survived plot is higher than the survived plot. Indicating people who paid a higher fare had a higher chance of survival.\n\nThe 3rd quantile value of the fair is 31. And it can be seen that a higher proportion of people survived who had paid more than that amount.\n\nThe spike in the beginning of the not survived distribution can be accounted to the disproportionate amount of male passengers.","9f01f89d":"Similar with Parch, SibSp has almost the same distribution. With SibSp = 0, the percent of people who has survived is less than the people who did not. While for passengers with SipSp = 1, the people who survived are lesser than that of not survived.","62a3293b":"Number of people not survived seems to be disproportionately high in the age group of 20-30 against the number of people who survived. Where as the only age group where more survived are the group from 0-10. This can again be attributed to the fact that women and children were given higher priority. Most of the passengers were in the age group 20-40","fd9372a3":"## Feature: Name\n\nThe feature Name is pretty much useless, but we can use the salutations to have a better picture and maybe create a new feature. But first the salutations has to be extracted and analyzed.","2ce703c2":"There are 177 null values in Age column and 687 null values in Cabin column. Cabin can be ignored for now. Null values in Age column will be taken care of later in the notebook.","4aede7ba":"# Data Summary","3ac4571f":"The total passenger count predominantly consists of male passengers. Where **35.24%** are women and the rest **64.76%** are men. The percent of women survived is far greater than that of men (**74.24% > 18.89%**). Gender plays a huge role in deciding who get saved and who are left behind. The crew must have considered the women and children to be saved first and then, the men.\n> Second Officer Lightoller insisted on excluding men, while First Officer Murdoch, on the other side of the ship, permitted men and women to board the lifeboats.\n\nsource: https:\/\/en.wikipedia.org\/wiki\/Titanic#cite_note-10","1020c165":"There are a lot of notebooks in here on titanic. So I'll add mine to the lot as well.\n\n## Features in the data set\n\n* PassengerId: Passenger identifier. Not really necessary for any analysis\n* Survived: If the passenger survived the tragedy or not\n* Pclass: Socio-economic status of the passenger.\n    * Were passengers with higher socio-economic status given higher priorities to access to life boats\n    * Did socio-economic status and gender combined create more priority access\n* Name: name of the passenger. Not needed for analysis because it will not add any value\n* Sex: Male\/Female\n    * How did gender affect the survivability of a passenger?\n* Age: Age of the passenger in years\n    * How did gender affect the survivability of a passenger?\n    * Were children and old age given a higher priority?\n* SibSp: Number of siblings \/ spouses\n    * Did number of siblings \/ spouses impact the chances of survival?\n* Parch: Number of parents \/ children\n    * Did number of parents \/ children impact the chances of survival?\n* Ticket: Ticket number of the passenger\n    * Did ticket number indicate any higher status?\n* Fare: How much the passenger had paid for his\/her travel\n    * Does fare paid matter in survivability?\n* Cabin: The cabin number of the passenger\n* Embarked: The place where the person had embarked from\n    * Does place of embarking affect survivability?","fbd6f153":"## Feature: Sibsp and parch","f89b923a":"## Feature: Fare","c25d9d98":"### Feature: Pclass","e9a28609":"### Feature: Age","3dbff53c":"The group of passenger with 0 number of parent\/children tolled the most in deaths. The group with 1 and 2 in Parch has a slightly larger proportion of people who have survived. There is not enough data to come to an ideal conclusion for Parch > 3","a0edd677":"This again goes back to the Sex feature. Mrs and Miss has a higher survival rate over Mr. We will fill the missing values in the age column using the meadian age of each salutations"}}