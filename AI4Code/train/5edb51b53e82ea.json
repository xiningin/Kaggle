{"cell_type":{"4059f665":"code","2916833d":"code","3dab2ff7":"code","7f62890b":"code","ebf89262":"code","ad1a9cff":"code","88a1225e":"code","65373426":"code","bb88fe4f":"code","11b625e2":"code","4bdc0825":"code","100908b2":"code","d1388f17":"code","b30f4081":"code","d3016a6a":"code","757ccc19":"code","8c150a73":"code","85d14e93":"code","80924e39":"code","b440f041":"code","69de3aff":"code","c0a4f394":"code","20bb6ec7":"code","d66cdae5":"code","69425eaa":"code","18f2d8dd":"code","2db5904c":"code","79efc00a":"markdown","c42106a7":"markdown","dd7070c8":"markdown","36b4796b":"markdown","0d537f70":"markdown","a88b4044":"markdown","cee1c27d":"markdown","bd61cf36":"markdown","15e3c2ef":"markdown","23ab906a":"markdown","5ea7ee6a":"markdown","74d61570":"markdown","52381d4e":"markdown","6ad98734":"markdown"},"source":{"4059f665":"#for ViSenze\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport geopandas as gpd #geopandas\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom sklearn import datasets, linear_model\nfrom sklearn.linear_model import LinearRegression\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","2916833d":"firmsize = pd.read_csv('..\/input\/base_etablissement_par_tranche_effectif.csv')","3dab2ff7":"net_salary = pd.read_csv('..\/input\/net_salary_per_town_categories.csv')","7f62890b":"geography = pd.read_csv('..\/input\/name_geographic_information.csv')\npopulation = pd.read_csv('..\/input\/population.csv')\ngeography_map = gpd.read_file('..\/input\/departements.geojson')\nhome_map = gpd.read_file('..\/input\/communes.geojson')","ebf89262":"salary_copy = salary.copy()","ad1a9cff":"salary = net_salary[net_salary[\"CODGEO\"].apply(lambda x: str(x).isdigit())]","88a1225e":"salary[\"CODGEO\"] = salary[\"CODGEO\"].astype(int)","65373426":"salary = salary[['CODGEO', 'SNHM14', 'SNHMH14', 'SNHMF14']]\n","bb88fe4f":"salary = salary.rename(columns = {\"CODGEO\": \"area_code\",\n                                  \"SNHM14\": \"mean_salary\",\n                                  \"SNHMH14\": \"mean_salary_male\",\n                                  \"SNHMF14\": \"mean_salary_female\",\n                                                         }\n                                              )","11b625e2":"firmsize = firmsize.drop([\"REG\", \"DEP\", \"E14TS0ND\", \"E14TS500\"], axis = 1)","4bdc0825":"firmsize = firmsize.rename(columns = {\"CODGEO\": \"area_code\",\n                                                          \"LIBGEO\": \"location\",\n                                                          \"E14TST\": \"total_size\"\n                                                     }\n                                          )                                                        ","100908b2":"firmsize = firmsize[firmsize[\"area_code\"].apply(lambda x: str(x).isdigit())]","d1388f17":"firmsize[\"area_code\"] = firmsize[\"area_code\"].astype(int)\n","b30f4081":"salary_firmsize = salary.merge(firmsize, how=\"inner\", on=\"area_code\")","d3016a6a":"salary_firmsize_dupe = salary_firmsize.copy()","757ccc19":"salary_firmsize_dupe[\"total_size\"] = salary_firmsize_dupe[\"E14TS1\"] +salary_firmsize_dupe[\"E14TS6\"] + salary_firmsize_dupe[\"E14TS10\"] + salary_firmsize_dupe[\"E14TS20\"] + salary_firmsize_dupe[\"E14TS50\"] + salary_firmsize_dupe[\"E14TS100\"] + salary_firmsize_dupe[\"E14TS200\"]","8c150a73":"salary_firmsize_dupe.head(5)","85d14e93":"salary_firmsize[\"E14TS1\"] = salary_firmsize[\"E14TS1\"] * 3\nsalary_firmsize[\"E14TS6\"] = salary_firmsize[\"E14TS6\"] * 8\nsalary_firmsize[\"E14TS10\"] = salary_firmsize[\"E14TS10\"] * 15\nsalary_firmsize[\"E14TS20\"] = salary_firmsize[\"E14TS20\"] * 35\nsalary_firmsize[\"E14TS50\"] = salary_firmsize[\"E14TS50\"] * 75\nsalary_firmsize[\"E14TS100\"] = salary_firmsize[\"E14TS100\"] * 150\nsalary_firmsize[\"E14TS200\"] = salary_firmsize[\"E14TS200\"] * 350","80924e39":"salary_firmsize[\"total_size\"] = salary_firmsize[\"E14TS1\"] +salary_firmsize[\"E14TS6\"] + salary_firmsize[\"E14TS10\"] + salary_firmsize[\"E14TS20\"] + salary_firmsize[\"E14TS50\"] + salary_firmsize[\"E14TS100\"] + salary_firmsize[\"E14TS200\"]","b440f041":"salary_firmsize[\"total_size\"] = salary_firmsize[\"total_size\"] \/ salary_firmsize_dupe[\"total_size\"]","69de3aff":"salary_firmsize.head(5)","c0a4f394":"salary_firmsize = salary_firmsize.drop([\"E14TS1\", \"E14TS6\", \"E14TS10\", \"E14TS20\", \"E14TS50\", \"E14TS100\", \"E14TS200\"], axis = 1)","20bb6ec7":"salary_firmsize = salary_firmsize.rename(columns = {\"total_size\": \"avg_firm_size\"})","d66cdae5":"salary_firmsize.head(3)","69425eaa":"sns.lmplot(x=\"avg_firm_size\", y=\"mean_salary\", data=salary_firmsize);","18f2d8dd":"sns.lmplot(x=\"avg_firm_size\", y=\"mean_salary_male\", data=salary_firmsize);","2db5904c":"sns.lmplot(x=\"avg_firm_size\", y=\"mean_salary_female\", data=salary_firmsize);","79efc00a":"Now, we have a dataset that has isolated all the variables that we are interested in -- the mean salary, the mean salary of males and females, and the total size of the firm, all merged together by area code \/ location. ","c42106a7":"Now we change the total_size variable such that it becomes our average. This is done by ","dd7070c8":"So now we have our best fit line, and our correlation appears very low. This contradicts our initial hypothesis -- that average firm sizes and mean salary do not in fact have a significant correlation.","36b4796b":"These are the salaries we are interested in -- due to limited time constraints, I will only divide into the salaries of male and females per hour, as well as consider the net salary.\n\nThese are the variables we are interested in, so we will isolate these variables. Then, we will rename them to something more intuitive.\n\nSNHMF14 : mean net salary for women\nSNHMH14 : mean net salary for man\nCODGEO : unique code of the town\nLIBGEO : name of the town\nSNHM14 : mean net salary\n","0d537f70":"We aren't using the data below, but it's always helpful to have them loaded.","a88b4044":"**2. We summarize the datasets.**\n\n**a. We summarize the salaries and sort them by geographical region.**\n\nFirst, we copy the salaries before consolidating it into a dataframe, in case we require the original salary datasheet. The salaries have already been segmented by age, so we aim to consolidate these salaries by region before comparing them with the firm sizes.","cee1c27d":"In conclusion, we isolated variables in the dataset which we felt would be useful in helping us check our hypothesis. Then, we correlated the data by combining them based on geographical location. We then ran a linear regression which aimed to find a correlation between average firm size within a region and its mean salary and and we found a non-significant correlation. \n\nThis contradicts our hypothesis that the average salary of a French person in a geographical region (dependent variable) has a strong correlation with the average size of a firm in that geographical region, at least for firms with below 500 employees.\n\nThis contradicts our initial implication and insight then is that French people would be better served going to larger cities in order to find more competitive jobs (in terms of wages and salaries).\n\nThere are also significant problems with the way in which the data was analysed and approached. For example, coercion of the values of average firm size to 'average' values is difficult to quantify well, and thus there might have been a lot of noise that prevented us finding a  correlation, if there existed one. However, I found that it was a fantastic exercise in manipulating datasets and greatly enjoyed the process; it helped me to learn a new skill.\n\nWe could have explored the dataset further and isolated different variables such as gender ratios in different parts of France as well as the relative ranks (hourly pay of a executive vs hourly wage of a middle manager, and so on).  Further avenues for exploration include comparing the average age of employees in a certain geographical region (should we be able to get our hands on that data) and analyse age\u2019s effect on salary.\n\nHowever, given the limited time and scope of the project (and considering I am also still relatively new to Data Science), this was probably the limit of the effort I could have devoted at the time to generating insight.","bd61cf36":"We now have the total number of firms that are eligible to be considered saved as total_size.","15e3c2ef":"**3. Data Analysis**\n\nWe aim to analyze the datasets and find the correlation between average firm size and the mean salary of workers in the region. This will be done using a linear regression. First, we visualize salaries against total size.","23ab906a":"**Introduction**\n\nI'm interested in measuring the correlation between the salary of a French person and the average firm size of their geographical region. I aim to isolate the geographical location of the firms and provide a visualisation of the size of firms per town. My hypothesis is that as the average firm size in the region increases, salaries of people in the region will tend to increase as well.\n\nThis intuition derives from the fact that small firms generally do not generate large amounts of revenue. Furthermore, there exists less opportunities for professionals to advance in their careers if the average firm size is low -- this means that there exists less employment opportunities for people driven in their career. We will see if this intuition holds based on the dataset.\n\nDue to limited resources and time constraints, I will not be able to give a full treatment and control for all factors. However, I recognize that there can be certain confounding and \"third\" variable factors that affect the overall result. For example, it may be true that the 'young' French people flock to agile and small sized companies. Therefore, this might have a downward pressure upon wages. If I had more time, I would have tried to isolate the effect of age and location (close to Paris, paid more; further from Paris; paid less).\n\nFor the good folks at ViSenze who are taking a look at this, keep in mind that I applied for a Product Management internship -- but I am willing to learn, quick fast and dirty. :-)","5ea7ee6a":"**Merging the datasets**\n\nWe pre-process the firmsize dataset, and isolate the variables we're interested in. Then, we merge the datasets.","74d61570":"And now we can have the average size of a firm per town.","52381d4e":"**b. We summarize the average firm size and sort them by geographical region.**\n\nWe aim to generate an average firm size number from the data we are given. Since the data is not as specific as we would like, we coerce the range of values to the mean of the range so that we can have a working 'average' of firm size. As for the outliers -- those with 500 firms or above, we remove the towns from our analysis. Hence, we can modify our hypothesis at this stage: for towns with firms with less than 500 employees, we expect that average salary increases as average firm size increases.\n\nWe aim to combine our dataset so we can get an **averaged** firm size per town. We begin by multiplying the different firm sizes to get an averaged value which can then be summed in order to generate an 'average firm size' per town.\n\n```\n1-5 - coerced to 3\n6-9 - coerced to 8\n10-19 - coerced to 15\n20-49 - coerced to 35\n50-99 - coerced to 75\n100-199 = coerced to 150\n200-499 = coerced to 350\n500 - excluded from dataset\n```","6ad98734":"```\nCredits to https:\/\/seaborn.pydata.org\/tutorial\/regression.html, https:\/\/www.kaggle.com\/skalskip\/using-regression-to-predicting-earnings-in-france, and the Pandas documentation for the ideas. I don't claim to be an expert in data analytics, but hey, I gave it a good shot.\n```"}}