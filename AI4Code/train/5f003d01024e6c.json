{"cell_type":{"d0eeef3c":"code","65cdb5e5":"code","73bbc760":"code","02e0ded5":"code","e57c3ac8":"code","1fc0b22e":"code","48bc129f":"code","4ad69357":"code","2df55d37":"code","1041509d":"code","7989ccda":"code","4b435030":"code","5428a8a1":"code","825ae44b":"code","02e9dd9a":"code","650862af":"code","c14c7c73":"code","1c67dde8":"code","195d0e9a":"code","027ac3db":"code","d77de5c1":"code","e2b79899":"code","f3de83ee":"code","241a111d":"code","b5b6f64e":"code","6799851a":"code","a2bd3b09":"markdown","8d6d5c44":"markdown","a253f44b":"markdown","fb8fa85c":"markdown","6e39820e":"markdown","c47aabf5":"markdown","c75d8530":"markdown","7144982d":"markdown","e3957f6e":"markdown","5636f5f5":"markdown","a939507e":"markdown","78af111d":"markdown","1a2ed049":"markdown","cd2fdf0d":"markdown","9ac3b604":"markdown","d01ea4df":"markdown","a44c6ea7":"markdown","180a1b3c":"markdown","f32cd09e":"markdown","b75e0288":"markdown","1d18420b":"markdown","5e4cc782":"markdown","487d0b85":"markdown"},"source":{"d0eeef3c":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","65cdb5e5":"import chardet\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef find_encoding(fname):\n    r_file = open(fname, 'rb').read()\n    result = chardet.detect(r_file)\n    charenc = result['encoding']\n    return charenc\n\n#Import with coding for words with letters like: \u00e7, \u00e1 ... \nmy_encoding = find_encoding('..\/input\/forest-fires-in-brazil\/amazon.csv')\namazon = pd.read_csv(\"..\/input\/forest-fires-in-brazil\/amazon.csv\",encoding=my_encoding)","73bbc760":"meses = ['Janeiro', 'Fevereiro', 'Mar\u00e7o', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']\n\n#Order month\namazon['month'] = pd.Categorical(amazon['month'], categories=meses, ordered=True)","02e0ded5":"amazon.head()","e57c3ac8":"# date column is unnecessary\namazon = amazon.drop(columns=['date'])","1fc0b22e":"amazon[\"state\"].value_counts()","48bc129f":"amazon[\"month\"].value_counts()","4ad69357":"amazon[\"year\"].value_counts().sort_index()","2df55d37":"print(amazon[(amazon[\"state\"] == \"Rio\") & (amazon[\"year\"] == 1998)])\nprint(amazon[(amazon[\"state\"] == \"Amazonas\") & (amazon[\"year\"] == 1998)])","1041509d":"amazon = amazon.groupby(['state', 'month', 'year']).agg({\"number\": \"sum\"}).reset_index()","7989ccda":"amazon[\"state\"].value_counts()","4b435030":"amazon[\"month\"].value_counts()","5428a8a1":"amazon[(amazon[\"year\"] == 2017) & (amazon[\"state\"] == 'Acre')]","825ae44b":"amazonia_legal = ['Amazonas', 'Par\u00e1', 'Roraima', 'Amapa', 'Rondonia', 'Acre', 'Tocantins', 'Mato Grosso', 'Maranhao']\n\nestados = amazon.groupby('state')['number'].sum().sort_values(ascending=False)\n\nax = plt.gca()\ncolors = ['C0' if i not in amazonia_legal else 'r' for i in estados.index]\nestados.plot(kind='bar',ax=ax,color=colors, figsize=(10, 5))\nh,l = ax.get_legend_handles_labels()\nax.set_title(\"States with the largest fires\")\nax.set_ylabel('Number of fires')\nax.set_xlabel('States')\nax.legend([\"Amazonia Legal\", \"Other states\"], labelspacing=2)","02e9dd9a":"meses_incendio = amazon.groupby('month')['number'].sum()\nmeses_incendio_amazonia = amazon[amazon.state.isin(amazonia_legal)].groupby('month')['number'].sum()\n\nax = plt.gca()\nmeses_incendio.plot(kind='bar',x='month',y='number', ax=ax, stacked=True, figsize=(10, 5))\nmeses_incendio_amazonia.plot(kind='bar',x='month',y='number', ax=ax, stacked=True, color='r', figsize=(10, 5))\nax.set_title(\"Total fires and fires in Amazonia\")\nax.set_ylabel('Number of fires')\nax.set_xlabel('Month')\nax.legend([\"Total fires\", \"Fires in Amazon\"])","650862af":"queimadas_amazonia = amazon[amazon.state.isin(amazonia_legal)].groupby('year')['number'].sum()\nqueimadas_outras_regioes = amazonia = amazon[~amazon.state.isin(amazonia_legal)].groupby('year')['number'].sum()\n\nax = plt.gca()\nqueimadas_amazonia.plot(kind='line',x='year',y='number',ax=ax, figsize=(25, 5), color='r')\nqueimadas_outras_regioes.plot(kind='line',x='year',y='number',ax=ax, figsize=(25, 5))\nax.set_title(\"Fires growth\")\nax.set_ylabel('Number of fires')\nax.legend([\"Total fires\", \"Fires in Amazon\"])\nax.legend([\"Fire in Amazon\", \"Fire in other regions\"])\nax.set_xlabel('Year')\nax.locator_params(integer=True)\nstart, end = ax.get_xlim()\nax.xaxis.set_ticks(np.arange(start, end, 1))\n","c14c7c73":"import pandas as pd\n# https:\/\/www.kaggle.com\/fabiopotsch\/precipitation-in-brazil\nprecipitation = pd.read_csv(\"..\/input\/precipitation-in-brazil\/precipitation.csv\")\nprecipitation.head()","1c67dde8":"sigla_estado = {\n    \"AM\" : \"Amazonas\",\n    \"PA\" : \"Par\u00e1\",\n    \"RR\" : \"Roraima\",\n    \"AP\" : \"Amapa\",\n    \"RO\" : \"Rondonia\",\n    \"AC\" : \"Acre\",\n    \"TO\" : \"Tocantins\",\n    \"MT\" : \"Mato Grosso\",\n    \"MA\" : \"Maranhao\",\n    \"AL\" : \"Alagoas\",\n    \"BA\" : \"Bahia\",\n    \"CE\" : \"Cear\u00e1\",\n    \"DF\" : \"Distrito Federal\",\n    \"ES\" : \"Esp\u00edrito Santo\",\n    \"GO\" : \"Goi\u00e1s\",\n    \"MG\" : \"Minas Gerais\",\n    \"PB\" : \"Para\u00edba\",\n    \"PR\" : \"Paran\u00e1\",\n    \"PE\" : \"Pernambuco\",\n    \"PI\" : \"Piau\u00ed\",\n    \"RJ\" : \"Rio\",\n    \"RN\" : \"Rio Grande do Norte\",\n    \"RS\" : \"Rio Grande do Sul\",\n    \"SP\" : \"S\u00e3o Paulo\",\n    \"SE\" : \"Sergipe\",\n    \"SC\" : \"Santa Catarina\"\n}","195d0e9a":"precipitation['date'] =  pd.to_datetime(precipitation['date'], format='%d\/%m\/%Y')\n\nprecipitation['date'] = precipitation['date'] + pd.Timedelta(days=1)\n\nprecipitation['estado'] = precipitation['state'].replace(sigla_estado)\n\n# There isn't data precipitacion in Rondonia\nprecipitation['estado'].value_counts()","027ac3db":"precipitation['month'] =  precipitation['date'].dt.month\nprecipitation['year'] =  precipitation['date'].dt.year\nprecipitation.head()","d77de5c1":"estados_chuva = precipitation.groupby('estado')['precipitation'].sum().sort_values(ascending=False)\n\nax = plt.gca()\ncolors = ['C0' if i not in amazonia_legal else 'r' for i in estados_chuva.index]\nestados_chuva.plot(kind='bar',ax=ax,color=colors, figsize=(10, 5))\nh,l = ax.get_legend_handles_labels()\nax.set_title(\"Rain Level in Brazil\")\nax.set_ylabel('Total Precipitation')\nax.set_xlabel('States')\nax.legend([\"Amazonia Legal\", \"Other states\"], labelspacing=2)","e2b79899":"meses_precipitation_amazonia = precipitation[precipitation.estado.isin(amazonia_legal)].groupby('month')['precipitation'].sum()\nmeses_precipitation_amazonia.index = [meses[i-1] for i in meses_precipitation_amazonia.index]\n\nax = plt.gca()\nmeses_precipitation_amazonia.plot(kind='bar',x='month',y='precipitation', ax=ax, stacked=True, color='b', figsize=(10, 5))\nax.set_title(\"Rain level in Amazonia\")\nax.set_ylabel('Total Precipitation')\nax.set_xlabel('Month')\nax.legend([\"Rain level\"])","f3de83ee":"meses_precipitation_amazonia = precipitation[precipitation.estado.isin(amazonia_legal)].groupby('month')['precipitation'].sum()\nmeses_precipitation_amazonia = meses_precipitation_amazonia \/ max(meses_precipitation_amazonia)\nmeses_precipitation_amazonia.index = [meses[i-1] for i in meses_precipitation_amazonia.index]\n\nmeses_incendio_amazonia = amazon[amazon.state.isin(amazonia_legal)].groupby('month')['number'].sum()\nmeses_incendio_amazonia = meses_incendio_amazonia \/ max(meses_incendio_amazonia)\n\nfig, ax = plt.subplots(figsize=(12, 8))\nx = np.arange(len(meses_precipitation_amazonia))\nbar_width = 0.4\nb1 = ax.bar(x, meses_precipitation_amazonia, width=bar_width, color='b', label='Rain')\nb2 = ax.bar(x + bar_width, meses_incendio_amazonia, width=bar_width, color='r', label='Fire')\nax.set_xticks(x + bar_width \/ 2)\nax.set_xticklabels(meses_precipitation_amazonia.index, rotation=90)\nax.legend()\nax.set_title(\"Rain level vs Fire in Amazonia\")\nax.set_ylabel('Growth Variation')\nax.set_xlabel('Month')\n","241a111d":"queimadas_amazonia = amazon[amazon.state.isin(amazonia_legal)].groupby('year')['number'].sum()\nprecipitation_grafico = precipitation.groupby('year')['precipitation'].sum()\n\n#Normalize datas for plot Growth\nqueimadas_amazonia = queimadas_amazonia \/ max(queimadas_amazonia)\nprecipitation_grafico = precipitation_grafico \/ max(precipitation_grafico)\n\nax = plt.gca()\nqueimadas_amazonia.plot(kind='line',x='year',y='number',ax=ax, figsize=(25, 5), color='r')\nprecipitation_grafico.plot(kind='line',x='date',y='precipitation',ax=ax, figsize=(25, 5), color='b')\nax.set_title(\"Fire vs Rain in Amazon\")\nax.set_ylabel('Growth Variation')\nax.legend([\"Total fires\", \"Rain level\"])\nax.set_xlabel('Year')\nax.locator_params(integer=True)\nstart, end = ax.get_xlim()\nax.xaxis.set_ticks(np.arange(start, end+1, 1))","b5b6f64e":"def definePlot(axs, indice, x, precipitation, amazon, estado):\n    prec_estado = precipitation[precipitation.estado == estado].groupby('year')['precipitation'].sum()\n    #y = prec_estado \/ max(prec_estado)\n    y = prec_estado\n    axs[indice].plot(x, y, '.-', color='b')\n    fire_estado = amazon[amazon.state == estado].groupby('year')['number'].sum()\n    #y = fire_estado \/ max(fire_estado)\n    y=fire_estado\n    axs[indice].plot(x, y, '.-', color='r')\n    axs[indice].set_title(estado)\n    axs[indice].legend(['Rain', 'Fire'])\n    axs[indice].set_ylabel('Absolute values')\n    return axs\n\nfig, axs = plt.subplots(8, sharex=True, sharey=True)\nfig.suptitle('Rain level vs Fire for States in absolute values')\nfig.set_size_inches(20, 20)\n\nx = precipitation[precipitation.estado == \"Acre\"].groupby('year')['precipitation'].sum().index\n\naxs = definePlot(axs, 0, x, precipitation, amazon, \"Amazonas\")\naxs = definePlot(axs, 1, x, precipitation, amazon, \"Par\u00e1\")\naxs = definePlot(axs, 2, x, precipitation, amazon, \"Roraima\")\naxs = definePlot(axs, 3, x, precipitation, amazon, \"Amapa\")\naxs = definePlot(axs, 4, x, precipitation, amazon, \"Acre\")\naxs = definePlot(axs, 5, x, precipitation, amazon, \"Tocantins\")\naxs = definePlot(axs, 6, x, precipitation, amazon, \"Mato Grosso\")\naxs = definePlot(axs, 7, x, precipitation, amazon, \"Maranhao\")\n\n#axs[7].locator_params(integer=True)\nstart, end = axs[7].get_xlim()\naxs[7].xaxis.set_ticks(np.arange(int(start), int(end)+1, 1))\naxs[7].set_xlabel('Year')\n\nplt.show()","6799851a":"def definePlot(axs, indice, x, precipitation, amazon, estado):\n    prec_estado = precipitation[precipitation.estado == estado].groupby('year')['precipitation'].sum()\n    y = prec_estado \/ max(prec_estado)\n    axs[indice].plot(x, y, '.-', color='b')\n    fire_estado = amazon[amazon.state == estado].groupby('year')['number'].sum()\n    y = fire_estado \/ max(fire_estado)\n    axs[indice].plot(x, y, '.-', color='r')\n    axs[indice].set_title(estado)\n    axs[indice].legend(['Rain', 'Fire'])\n    axs[indice].set_ylabel('Growth Variation')\n    return axs\n\nfig, axs = plt.subplots(8, sharex=True, sharey=True)\nfig.suptitle('Rain level vs Fire for States in relative values')\nfig.set_size_inches(20, 20)\n\nx = precipitation[precipitation.estado == \"Acre\"].groupby('year')['precipitation'].sum().index\n\naxs = definePlot(axs, 0, x, precipitation, amazon, \"Amazonas\")\naxs = definePlot(axs, 1, x, precipitation, amazon, \"Par\u00e1\")\naxs = definePlot(axs, 2, x, precipitation, amazon, \"Roraima\")\naxs = definePlot(axs, 3, x, precipitation, amazon, \"Amapa\")\naxs = definePlot(axs, 4, x, precipitation, amazon, \"Acre\")\naxs = definePlot(axs, 5, x, precipitation, amazon, \"Tocantins\")\naxs = definePlot(axs, 6, x, precipitation, amazon, \"Mato Grosso\")\naxs = definePlot(axs, 7, x, precipitation, amazon, \"Maranhao\")\n\naxs[7].locator_params(integer=True)\nstart, end = axs[7].get_xlim()\naxs[7].xaxis.set_ticks(np.arange(int(start), int(end)+1, 1))\naxs[7].set_xlabel('Year')\n\nplt.show()","a2bd3b09":"## Acronym definition of states","8d6d5c44":"## Data processing","a253f44b":"### Fires growth in Amazonia and other regions","fb8fa85c":"# Conclusion\n* We can observe that the largest fires in Brazil do not occur in the Amazon, but in other forests;\n* July and October have the highest number of burns;\n* Only 2008 the fires in Amazon was bigger than fires in other regions;\n* Mato Grosso is the state with the largest fires, but the next state of Amazonia Legal is the Tocantis in 9\u00ba place.\n* Mato Grosso is not only 1 state, it is formed by Mato Grosso and Mato Grosso do Sul. Could not separate fires in the Amazon and in the Pantanal(other florest).\n* At a glance, we don't see a large drop in rainfall throughout the period. But usually when there is a fall in the rain the fire increases.\n* Mato Grosso is the state that has the most fire and has little rain\n* 2009 there were many burnings and no fall in rainfall\n* In Mato Grosso in 2009 there were many burnings\n* Octuber there is many burnings and fall in rainfall\n* There isn't data precipitacion in Rondonia\n* Almost every rainy state is in the Amazonia Legal\n\n# Next step\n* Analyze in other forests of Brazil","6e39820e":"## Rainfall and fire level comparison in states of Amazonia in relative values","c47aabf5":"## Rainfall and fire level comparison in Amazonia by year","c75d8530":"## Rainfall level by state","7144982d":"**December 2017 is missing for all states**","e3957f6e":"**Now we have same quantity of datas.**","5636f5f5":"## Sequence month","a939507e":"**There are 3 samples to Rio and 1 to Amazonas. We can aggregate this datas.**","78af111d":"## Import dataset","1a2ed049":"## Rainfall and fire level comparison in states of Amazonia","cd2fdf0d":"### States with the largest fires","9ac3b604":"# Data analysis","d01ea4df":"# Data processing\n","a44c6ea7":"## Import dataset","180a1b3c":"# Precipitation ()","f32cd09e":"PS.:\n* Sorry for some grammar mistake. I am still studying\n* I'm not minimizing the fire in the Amazon, I am just comparing with other fires of other forests that exists in Brazil. The problem is much bigger.","b75e0288":"# Introdution\n* A brief comparison among fires in Brazil.\n* Amozonia Legal is the florest Amazon where is in the states: **Amazonas, Par\u00e1, Roraima, Amapa, Rondonia, Acre, Tocantins, Mato Grosso, Maranhao**\n\n![image.png](attachment:image.png)","1d18420b":"## Rainfall and fire level comparison in Amazon by Month","5e4cc782":"### Comparison between total fires and fires in Amazonia","487d0b85":"## Rainfall level by month"}}