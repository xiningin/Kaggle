{"cell_type":{"e3310b61":"code","2da02c6c":"code","79058ba4":"code","f5eadeb6":"code","8db6bd18":"markdown","e9b9b9e5":"markdown","87cedd36":"markdown"},"source":{"e3310b61":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport rasterio as rio\nimport folium\nimport os\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\n\n\n# Any results you write to the current directory are saved as output.","2da02c6c":"file = '\/kaggle\/input\/ds4g-environmental-insights-explorer\/eie_data\/s5p_no2\/s5p_no2_20180708T172237_20180714T190743.tif'\n\nimage_rio = rio.open(file)","79058ba4":"print(image_rio.bounds)\n[row1,col1] = [0,0]\n[row2,col2] = [147,0]\nprint(image_rio.xy(row1,col1))\nprint(image_rio.xy(row2,col2))","f5eadeb6":"[lat, lon] = [18.23, -66.255]\ndef overlay_image_on_puerto_rico(file,band_layer):\n    \n    im_rio = rio.open(file)\n    \n    band = im_rio.read(band_layer)\n    \n    band[0:10,0:10] = 0\n    m = folium.Map([lat, lon], zoom_start=8)\n    folium.raster_layers.ImageOverlay(\n        image=band,\n        bounds = [[17.9 ,-67.3,],[18.6,-65.2]],\n        colormap=lambda x: (2, 0, 0, x),\n    ).add_to(m)\n    [lon0,lat0] = im_rio.xy(0,0)\n    folium.Marker([lat0,lon0]).add_to(m)\n    return m\noverlay_image_on_puerto_rico(file,1)","8db6bd18":"Till here, everthing is ok. row=0 corresponds to lattitude min (17.90) and row = 147 corresponds to lattitude max (18.56).","e9b9b9e5":"In this notebook, I want to show that tiff images are flipped in y-axis. \n\nWhat, I mean is that the index of row 0 correponds to the max latitude and row end \nto the min latitude","87cedd36":"In this map, we mark the position of [lon0,lat0] = im_rio.xy(0,0), which corresponds to (col,row)=(0,0). Howerver, when I change the value of the band image (band[0:10,0:10] = 0), it appears in the opposition location.  "}}