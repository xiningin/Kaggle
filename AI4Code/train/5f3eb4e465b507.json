{"cell_type":{"e68eef1a":"code","b8cc2333":"code","27201534":"code","3805d6ee":"code","77aa05a8":"code","daed2838":"code","80cbc526":"code","f69fdbfe":"code","53b0d856":"code","08cefaa8":"code","ebccd130":"code","6416ae3c":"code","08f7b2ab":"code","4efdfd1e":"code","4f8c3402":"code","4c27711c":"code","10710552":"code","5ac60471":"code","5efd6d9a":"code","2b0238ec":"code","1de98d8e":"code","08f394ea":"code","3d3b495f":"code","7a4669fe":"code","d20dd214":"code","de7108d7":"code","705e4aec":"code","19286236":"markdown","a472797a":"markdown","4382d295":"markdown","062182e2":"markdown","8603b141":"markdown","258d537c":"markdown","5f13c97f":"markdown","5b0a6594":"markdown","8b53cacc":"markdown","9d0c3c09":"markdown","0ea81d53":"markdown","391ba47f":"markdown","f3d59c05":"markdown","b4d5592d":"markdown","460046ac":"markdown","929d8939":"markdown","53f70341":"markdown","ebb421ae":"markdown","0df35fe5":"markdown","0671eccb":"markdown","de1cec68":"markdown"},"source":{"e68eef1a":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns #visualization\nimport plotly.express as px #visualization\nimport chart_studio.plotly as py #visualization\nimport plotly.figure_factory as ff #visualization\nimport plotly.graph_objs as go #visualization\nimport matplotlib.pyplot as plt #visualization\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","b8cc2333":"Injurydf=pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/InjuryRecord.csv')\nInjurydf","27201534":"Playdf=pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/PlayList.csv')\nPlaydf","3805d6ee":"Playdf['StadiumType']=Playdf['StadiumType'].replace(to_replace =['Outdoors', 'Outddors', 'Oudoors','Oudoor', 'Dome', 'Indoor'], \n                            value =[\"Outdoor\", \"Outdoor\", \"Outdoor\",\"Outdoor\",  \"Indoors\", \"Indoors\"])","77aa05a8":"plays=list(Injurydf['PlayerKey'].unique())\nPlaydf_Copy=Playdf[Playdf.PlayerKey.isin(plays)]\nPlaydf_Copy","daed2838":"last_row0=Playdf_Copy.groupby('PlayerKey').tail(1)\nrp=last_row0['StadiumType'].value_counts()\nx1=rp[:5].index\ny1=rp[:5].values\n\nst=last_row0['Position'].value_counts()\nx2=st[:5].index\ny2=st[:5].values\n\nwt=last_row0['RosterPosition'].value_counts()\nx3=wt[:5].index\ny3=wt[:5].values\n\npt=last_row0['PlayType'].value_counts()\nx4=pt[:5].index\ny4=pt[:5].values\n","80cbc526":"plt.subplots_adjust(left=0.005, bottom=0.01, right=2.5, top=2.1)\nplt.subplot(2, 2, 1)\nsns.barplot(x1, y1)\nplt.title('StadiumType',fontsize=20)\nplt.ylabel('Number')\nplt.subplot(2, 2, 2)\nplt.title('RosterPosition', fontsize=20)\nsns.barplot(x3, y3)\nplt.ylabel('Number')\nplt.subplot(2, 2, 3)\nsns.barplot(x2, y2)\nplt.title('Position', fontsize=20)\nplt.ylabel('Number')\nplt.subplot(2, 2, 4)\nplt.title('PlayType', fontsize=20)\nsns.barplot(x4, y4)\nplt.ylabel('Number')\n\nplt.show()","f69fdbfe":"Trackdf=pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/PlayerTrackData.csv')\nTrackdf_Copy=Trackdf.merge(Injurydf, how='inner')","53b0d856":"Trackdf","08cefaa8":"Trackdf_Copy['day_missed']=(Trackdf_Copy['DM_M1']+Trackdf_Copy['DM_M7']+Trackdf_Copy['DM_M28']+Trackdf_Copy['DM_M42'])\nTrackdf_Copy=Trackdf_Copy.drop(['DM_M1', 'DM_M7', 'DM_M28','DM_M42'], axis=1)\nTrackdf_Copy","ebccd130":"last_row1=Trackdf_Copy.groupby('PlayerKey').tail(1)#last row for each player","6416ae3c":"rp=last_row1['BodyPart'].where(Trackdf_Copy['Surface']=='Natural').value_counts()\nst=last_row1['BodyPart'].where(Trackdf_Copy['Surface']=='Synthetic').value_counts()\n\nfig = go.Figure()\nfig.add_trace(go.Bar(x=st.index, y=st.values, name=\"Synthetic\"))\nfig.add_trace(go.Bar(x=rp.index, y=rp.values, name=\"Natural\"))\nfig.update_layout(title_text=\"BodyPart & Surface  \",\n                   width=850,\n                   height=600,\n                  title_font_size=20)\nfig.show()","08f7b2ab":"rp=last_row1['day_missed'].where(Trackdf_Copy['Surface']=='Natural').value_counts()\nst=last_row1['day_missed'].where(Trackdf_Copy['Surface']=='Synthetic').value_counts()\nfig = go.Figure()\nfig.add_trace(go.Bar(x=st.index, y=st.values, name=\"Synthetic\"))\nfig.add_trace(go.Bar(x=rp.index, y=rp.values, name=\"Natural\"))\nfig.update_layout(title_text=\"day_missed & Surface \",\n                   width=850,\n                   height=500,\n                  title_font_size=20,\n                 barmode='stack')\nfig.show()","4efdfd1e":"KN=last_row1['day_missed'].where(last_row1['BodyPart']=='Knee').value_counts()\nFT=last_row1['day_missed'].where(last_row1['BodyPart']=='Foot').value_counts()\nAN=last_row1['day_missed'].where(last_row1['BodyPart']=='Ankle').value_counts()\nfig = go.Figure()\nfig.add_trace(go.Bar(x=KN.index, y=KN.values, name=\"Knee\"))\nfig.add_trace(go.Bar(x=FT.index, y=FT.values, name=\"Foot\"))\nfig.add_trace(go.Bar(x=AN.index, y=AN.values, name=\"Ankle\"))\nfig.update_layout(title_text=\"day_missed & BodyPart\",\n                   width=850,\n                   height=500,\n                  title_font_size=20, \n                 barmode='stack')\nfig.show()","4f8c3402":"last_row2=Trackdf_Copy.groupby('PlayerKey').tail(1)#last row for each inuried player\nfig = px.scatter(last_row2, x=\"x\", y=\"y\", \n              title=\"The players last position  \")\nfig.show()","4c27711c":"fig = px.scatter(last_row2, x=\"x\", y=\"y\", color=\"Surface\", \n                 labels='BodyPart', title=\"Surface types for injuried player on the field\")\nfig.show()","10710552":"fig = px.scatter(last_row2, x=\"x\", y=\"y\", color=\"BodyPart\", title=\"BodyPart distrubiton on the field\")\nfig.show()","5ac60471":"fig = px.scatter(last_row2, x=\"x\", y=\"y\", color=\"event\", title=\"last event's distrubiton on the field\")\nfig.show() ","5efd6d9a":"event_dist=last_row2['event'].value_counts()\nfig = px.bar(x=event_dist.values, y=event_dist.index, orientation='h', title=\"last event of injuried players\")\nfig.show()","2b0238ec":"last_row5=Trackdf_Copy.groupby('PlayerKey').head(2)\nevent_dist1=last_row5['event'].value_counts()\nfig = px.bar(x=event_dist1.values, y=event_dist1.index, orientation='h', title=\"first event  injuried players\")\nfig.show()","1de98d8e":"players=list(Trackdf_Copy['PlayKey'].unique())\nplayers_track=Trackdf[Trackdf.PlayKey.isin(players)]\nplayers_track['PlayerKey']=players_track.PlayKey.str.split('-').str[0]\nplayers_track.sample(4)","08f394ea":"#Acceleration calculation found on stackoverflow\nplayers_track['acceleration'] = (players_track['s'] - players_track['s'].shift(1)) \/ (players_track['time'] - players_track['time'].shift(1))","3d3b495f":"fig = px.line(players_track, x=\"x\", y=\"y\", color='PlayerKey',\n              title=\"Movements of player on the field in the game \")\nfig.show()","7a4669fe":"fig = px.line(Trackdf_Copy, x=\"x\", y=\"y\", color='PlayerKey',\n              title=\"Movements of player on the field during injury \")\nfig.show()","d20dd214":"last_row3=players_track.groupby('PlayerKey').tail(15)#last row for each inuried player\nfig = px.line(last_row3, x=\"x\", y=\"y\", color='PlayerKey',\n              title=\"last moves of injuried players\")\nfig.show()","de7108d7":"fig = px.line(players_track, x=\"time\", y=\"acceleration\", color=\"PlayerKey\", title='Acceleration change with time')\nfig.show()","705e4aec":"Injured_speed=Trackdf_Copy['s'].mean()\nTotal_speed=players_track['s'].mean()\nInjured_dis=Trackdf_Copy['dis'].mean() \nTotal_dis=players_track['dis'].mean()\nInjured_ac=last_row3['acceleration'].mean() \nTotal_ac=players_track['acceleration'].mean()\npercentage=round(((Injured_speed-Total_speed)\/Total_speed)*100)\npercentage1=round(((Injured_dis-Total_dis)\/Total_dis)*100)\npercentage2=round(((Injured_ac-Total_ac)\/Total_ac)*100)\nprint(\"The difference in speed, distance and acceleration changes throughout the game vs injury time:\")\nprint(f\"The players are moved  %{percentage} yards\/meter faster then usual\")\nprint(f\"The players move %{percentage1} meter more then usual \")\nprint(f\"The players moving acceleration %{percentage2} less then usual \")","19286236":"### Getting deeper looking for more","a472797a":" # NFL Injury Analysis\n\n","4382d295":"* Above we can see BodyPart and day_missed relation.","062182e2":"# Conlusion\nAfter some looking up and merging all data together, i felt free to do my approach. Here is what i think that players doing different get injuried.\n1. event change is a considerable for not getting injuried.\n2. When look at Surface type, day missed and BodyPart we can see some insights for instance,  Foot injuries tooks more then 28 days to heal and mostly happening on the synthetic surface.\n3. Comparing to all values during the game, there is considerable change in the speed, distance and acceleration which can be a reason for injury during the game","8603b141":"* now lets look at Playlist data to see what we can mine from it.","258d537c":"* Below we have bar chart for last event that an injuried player were in and tackle is seems the most common one.","5f13c97f":"## Injury Record","5b0a6594":"As seen above on synthetic surface ankle is the most common injury type.","8b53cacc":"* You can see PlayType, Position, RosterPosition and StadiumType comparing with number of injuries which can help us to enlighten us about which value causes most injury. The most dangreous positions are WR and OLB,  about %65 of injuries are on outdoor games,  Pass and Rush are the most couse playtype for injury and RosterPosition show us more then half of injuries are  due to Linebacker, Wide Receiver and Safety.","9d0c3c09":" ### Importing the libraries","0ea81d53":"## PlayerTrackData","391ba47f":"## What is happening on the field?","f3d59c05":"* Comparing some metrics for players during all game versus while injuried.","b4d5592d":"* Fixing typos in StadiumType","460046ac":"* Above you can see surface and day missed relationship 1 means more then 1 day, 2 means more then 7 days, 3 means more then 28 days and 4 means more then 42 days.","929d8939":"*Down here i will see the all movements injuried players in all games. I used pandas isin to Play Type and Player Track Record.","53f70341":"## PlayList ","ebb421ae":"*  Visualizing some features after merge PlayList with InjuryRecord to see the patterns between Playlist features and number of Injuried players ","0df35fe5":" I will mark missed days to 1, 2, 3 and 4.\n* 1: more then 1 day\n* 2: more then 7 days\n* 3: more then 28 days\n* 4: more then 42 days","0671eccb":"* Now let's dive into some real work and work on players and try to understand what they are doing that causes them to be injuried","de1cec68":"### INTRODUCTION\n\n\nMy goal in this notebook is to use given features and try to find some insights based on those features. As an data analyst, i tried to visualize every useful feature to find some the correlations and patterns between the features. I tried to split and and make the notebook as much as possible.\n**contents**\n1. Importing libraries.\n2. Overview of Injury Record and Play file.\n3. Comparing missed days, injuried body part and surface with bar charts.\n4. Looking for location of events, injuried body part and surface over the game field with scatter plots.\n5. Looking for event types change during the game with horizontal bar chart.\n6. Looking for the players movement during all game and just before getting injuried\n7. Looking for acceleration change and mean difference of speed, distance and acceleration."}}