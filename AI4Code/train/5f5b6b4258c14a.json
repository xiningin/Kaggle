{"cell_type":{"4d4ae57e":"code","f7622d3c":"code","dc93bdb2":"code","2c5f29ad":"code","e6cc3d09":"code","ad1c4cb3":"code","dc102249":"code","8e3a9669":"code","77545dfa":"code","9e815aa8":"code","3cd9bf80":"code","6ea74608":"code","2519821a":"code","f98273dd":"code","1c2e274b":"code","e460fb1a":"code","836f82d5":"code","4f63fda0":"code","42b49ee4":"code","4c188b5f":"code","166cff95":"code","8d70be92":"code","0e9c5959":"code","dfa8dd73":"code","3650427a":"code","6b69d868":"code","88ae42bf":"code","3a6bae1f":"code","35d8382c":"code","f7891117":"code","fccc4d8b":"code","c48d49f7":"code","688acaa1":"code","06824006":"code","db6b553b":"code","ebaeec77":"code","680e6d7e":"code","bd1014a9":"code","84cc01c0":"code","c1f3f8da":"code","abba7da3":"code","633b87e2":"code","2a8ba370":"code","5ed77bb6":"code","742ec169":"code","3c589dde":"code","e09707ab":"code","1790557f":"code","100b64f3":"code","2beed696":"code","2da74d35":"code","98067f8e":"code","ecba819b":"code","9700906c":"code","92084bd7":"code","470fde36":"code","dbd09a21":"markdown","09e4e0e4":"markdown","d59128e4":"markdown","a0bcf40e":"markdown","2cee51cf":"markdown","8c112b87":"markdown","415be125":"markdown","c4f5aed4":"markdown","8cd43ee0":"markdown","183cec37":"markdown","a32235b7":"markdown","c68290d3":"markdown","1f402131":"markdown","4c6697f9":"markdown","892c6e9f":"markdown","fa0b9996":"markdown"},"source":{"4d4ae57e":"#pip install chart-studio","f7622d3c":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n#import chart_studio.plotly as py\nimport plotly.offline as of\nimport cufflinks as cf\nimport datetime\n%matplotlib inline","dc93bdb2":"of.init_notebook_mode(connected=True)\ncf.go_offline()","2c5f29ad":"donors=pd.read_csv(\"..\/input\/for-school-donation-analysis\/Donors\/259.Donors.csv\")","e6cc3d09":"donations=pd.read_csv(\"..\/input\/for-school-donation-analysis\/donations\/258.Donations.csv\")","ad1c4cb3":"projects=pd.read_csv(\"..\/input\/for-school-donation-analysis\/projects\/260.Projects.csv\")","dc102249":"schools=pd.read_csv(\"..\/input\/for-school-donation-analysis\/schools\/262.Schools.csv\")","8e3a9669":"teachers=pd.read_csv(\"..\/input\/for-school-donation-analysis\/teachers\/263.Teachers.csv\")","77545dfa":"print(\"Shape of donors dataframe is: \",donors.shape)\nprint(\"Shape of donations dataframe is: \",donations.shape)\nprint(\"Shape of projects dataframe is: \",projects.shape)\nprint(\"Shape of schools dataframe is: \",schools.shape)\nprint(\"Shape of teachers dataframe is: \",teachers.shape)","9e815aa8":"donors.head()","3cd9bf80":"donations.head()","6ea74608":"projects.head()","2519821a":"schools.head()","f98273dd":"teachers.head()","1c2e274b":"donors.describe()","e460fb1a":"donations.describe()","836f82d5":"projects.describe()","4f63fda0":"schools.describe()","42b49ee4":"teachers.describe()","4c188b5f":"data=pd.merge(donors,donations,how=\"inner\",on='Donor ID')","166cff95":"data1=pd.merge(data,projects,how='inner',on='Project ID')","8d70be92":"data2=pd.merge(data1,schools,how=\"inner\",on = 'School ID')","0e9c5959":"data3=pd.merge(data2,teachers, how=\"inner\", on=\"Teacher ID\")","dfa8dd73":"data3.head()","3650427a":"a=data3.columns.values.tolist()\na","6b69d868":"tp=schools[\"School State\"].value_counts().sort_values(ascending=False).head(10)\ntp","88ae42bf":"tp.iplot(kind='bar',xTitle=\"States\",yTitle=\"No of schools\",title=\"NO of schools involved in projects by states\",colorscale=\"-paired\",theme=\"solar\")","3a6bae1f":"tp2=data3.groupby('School State')['Donation Amount'].mean().sort_values(ascending=False).head(10)\ntp2","35d8382c":"tp2.iplot(kind=\"bar\",xTitle=\"State\",yTitle='Average donation per project',title='Top 10 ststes with maximum average donation',colorscale=\"paired\",theme=\"solar\")","f7891117":"mean=data3[\"Donation Amount\"].dropna().mean()\nmedian=np.median(data3[\"Donation Amount\"].dropna())\nminimum=data3[\"Donation Amount\"].dropna().min()\nmaximum=data3[\"Donation Amount\"].dropna().max()\npercentile=np.percentile(data3[\"Donation Amount\"].dropna(),[25,75])","fccc4d8b":"print(\"Mean donation amount is: \",np.round(mean,3))\nprint(\"Median donation amount is: \",np.round(median,3))\nprint(\"25% and 75% donation amount is: \",np.round(percentile,3))\nprint(\"Maximum donation amount is: \",np.round(maximum,3))\nprint(\"Minimum donation amount is: \",np.round(minimum,3))","c48d49f7":"tp3=data3.groupby(\"Donor State\")['Donor ID'].count().sort_values(ascending=False).head(10)\n#tp=schools[\"School State\"].value_counts().sort_values(ascending=False).head(10)","688acaa1":"tp3.iplot(kind=\"bar\",xTitle=\"Donor State\",yTitle=\"No of donations\",title=\"Donations Count\",colorscale=\"paired\",theme=\"solar\")","06824006":"d1=schools[\"School State\"].value_counts()\nd2=data3.groupby(\"Donor State\")['Donor ID'].count()\nd3=pd.concat([d1,d2],axis=1,keys=[\"Projects\",\"Donations\"])","db6b553b":"d3=d3.dropna()\nd3.head()","ebaeec77":"d3.iplot(kind=\"scatter\",xTitle=\"Donations\",yTitle=\"Projects\",title=\"Projects vs Donations\",symbol=\"x\",colorscale=\"paired\",mode=\"markers\",theme=\"solar\")","680e6d7e":"slp, intcpt = np.polyfit(d3[\"Projects\"],d3[\"Donations\"],1)\nx=np.array([d3.Projects.min(),d3.Projects.max()])\ny=slp*x+intcpt\nplt.plot(x,y)","bd1014a9":"d3.plot.scatter(x=\"Projects\",y=\"Donations\",color=\"red\")\nslp, intcpt = np.polyfit(d3[\"Projects\"],d3[\"Donations\"],1)\nx=np.array([d3.Projects.min(),d3.Projects.max()])\ny=slp*x+intcpt\nplt.plot(x,y)\nplt.tight_layout()\nplt.margins(0.1)","84cc01c0":"d4=data3[\"Project Type\"].value_counts()\nd5=data3.groupby(\"Project Type\")[\"Donation Amount\"].sum().astype(int)","c1f3f8da":"plt.subplot(2,1,1)\nplt.pie(d4,startangle=180)\nplt.subplot(2,1,2)\nplt.pie(d5,startangle=180)\nplt.tight_layout()\nplt.margins(0.1)\nfig=plt.gcf()\nfig.set_size_inches(20,15)","abba7da3":"d6=data3.groupby(\"Project Subject Category Tree\")[\"Donation Amount\"].sum().sort_values(ascending=False).astype(int).head(20)","633b87e2":"d6.iplot(kind=\"bar\",xTitle=\"Project sub category\",yTitle=\"Donation amount\",title=\"Donation amount by project sub category\",colorscale=\"-paired\",theme=\"solar\")","2a8ba370":"data3[[\"Project Posted Date\", \"Project Fully Funded Date\"]].isnull().sum()","5ed77bb6":"data3[[\"Project Posted Date\", \"Project Fully Funded Date\"]].head()","742ec169":"data3[\"Project Posted Date\"]=pd.to_datetime(data3[\"Project Posted Date\"])","3c589dde":"data3[\"Project Fully Funded Date\"]=pd.to_datetime(data3[\"Project Fully Funded Date\"])","e09707ab":"data3[\"Funding Time\"]=data3[\"Project Fully Funded Date\"]-data3[\"Project Posted Date\"]\ndata3[[\"Funding Time\",\"Project Posted Date\", \"Project Fully Funded Date\"]].head()","1790557f":"data3[[\"Funding Time\",\"Project Posted Date\", \"Project Fully Funded Date\"]].isnull().sum()\ndata4 = data3[pd.notnull(data3[\"Funding Time\"])]","100b64f3":"import datetime as dt\ndata4[\"Funding Time\"]=data4[\"Funding Time\"].dt.days\ndata4[[\"Project Posted Date\", \"Project Fully Funded Date\"]].isnull().sum()","2beed696":"mean_time=data4.groupby(\"Project ID\")[\"Funding Time\"].mean()\nmeantime=mean_time.mean()\nmeantime","2da74d35":"f_time=data4.groupby([\"School State\",\"Project ID\"])[\"Funding Time\"].mean()\nfun_time_full=f_time.groupby(\"School State\").mean().sort_values()\nfun_time=fun_time_full.head(20)\nfun_time.round(0)","98067f8e":"fun_time.iplot(kind=\"bar\",xTitle=\"State\",yTitle=\"Mean fully funding Time (in days)\",title=\"Mean project fully funding time with states\",theme=\"solar\")","ecba819b":"fast_states=fun_time_full[fun_time_full<=32].head(15)\nfast_states.round(0)","9700906c":"fast_states.iplot(kind=\"bar\",xTitle=\"States\",yTitle=\"Fully funding time (in days)\",title=\"States that fund projects faster than others\",theme=\"solar\")","92084bd7":"slow_states=fun_time_full[fun_time_full>32].sort_values(ascending=False).head(15)\nslow_states.round(0)","470fde36":"slow_states.iplot(kind=\"bar\",xTitle=\"States\",yTitle=\"Fully funding time (in days)\",title=\"States that fund projects slower than others\",theme=\"solar\")","dbd09a21":"# Plotting bar plot for top 10 states having most no of schools which opened project to gather donations.","09e4e0e4":"Combine the plot","d59128e4":"# How many project subject category tree exist? Which one attracted the most donations?","a0bcf40e":"# Analyse the maximum, minimum, mean, median and 25% and 75% of donations","2cee51cf":"# What is the mean time that takes a project to be fully funded and how it varies between states?","8c112b87":"# Load Data Files","415be125":"# Setup Libraries","c4f5aed4":"# Which states are the best and which are the wrost performing in the term of this criteria (Mean project fully funded time) ?","8cd43ee0":"# Top 10 states in which schools gathered most amoount of AVERAGE donation for their project","183cec37":"# In which states there are more donations done by donors","a32235b7":"# How many different project type exist? What is the total donation amount for each of them?","c68290d3":"# Fit a linear model which basically indicate the relationship between projects and donations","1f402131":"# Average funding time for each state","4c6697f9":"# Creating data for use from upper datasets ","892c6e9f":"# Datas described for idea about columns","fa0b9996":"Is there a relationship between the number of projects offered and number of donations made by the donors. Which states performing better in this case ? How many of them responding project requests below average and which states are performing best in terms of donations per project ? "}}