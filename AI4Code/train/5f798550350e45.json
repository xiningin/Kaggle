{"cell_type":{"96dbd88f":"code","49d46b19":"code","c4a110cf":"code","176f6857":"code","cc0b3eb2":"code","227f6615":"code","3de6e78c":"code","c77bee68":"code","f3cce366":"code","0bd33b44":"code","ae33ca9d":"code","35eaa19c":"code","6f82af62":"code","51264a8f":"code","d693c358":"code","461c0a29":"code","18956b71":"code","a7a502f1":"code","a3397611":"code","f766021b":"code","cd0b4d63":"code","67b42409":"code","ebf36bd8":"markdown","a35b194a":"markdown","d3650744":"markdown","51107d2d":"markdown","0f50b828":"markdown","c38e8818":"markdown","6dc1adb6":"markdown","35fd4a06":"markdown","3ff69de3":"markdown","c5fc5d7a":"markdown","4d483738":"markdown","b9e72723":"markdown","02ba6f1c":"markdown","62181208":"markdown","5e9a4f42":"markdown","bf54a4b7":"markdown","905f2365":"markdown","2216d46f":"markdown","65ecdb7f":"markdown","6f2e8a33":"markdown","e4ce6a18":"markdown","4a3b3c3d":"markdown","ffafcf58":"markdown","fc0effc9":"markdown","9c9367d3":"markdown","50c9701b":"markdown","cc4fd031":"markdown","1149dc35":"markdown","a02e48a8":"markdown","f0576eab":"markdown","08d463cb":"markdown","163cf214":"markdown","10f7574c":"markdown","16a92f94":"markdown","777c7b26":"markdown","7ea3802d":"markdown","4afae626":"markdown","01f7cf42":"markdown","f35158b6":"markdown","d2cd7b2c":"markdown","39c19fe7":"markdown","80284b76":"markdown"},"source":{"96dbd88f":"import pandas as pd\nimport sqlite3\nfrom sqlalchemy import create_engine","49d46b19":"engine = create_engine(\"sqlite:\/\/\", echo=False)\n\nvg_df = pd.read_csv(\"\/kaggle\/input\/top-video-games-19952021-metacritic\/all_games.csv\")\nvg_df.to_sql(\"vg\", engine, if_exists=\"replace\")","c4a110cf":"pd.read_sql_query(\"\"\"SELECT COUNT(*) row_count\n                     FROM vg\"\"\", engine)","176f6857":"pd.read_sql_query(\"\"\"SELECT *\n                     FROM vg\n                     LIMIT 10\"\"\", engine)","cc0b3eb2":"for c in vg_df.columns:\n    query = pd.read_sql_query(f\"\"\"SELECT DISTINCT {c} \n                                  FROM vg \n                                  ORDER BY 1\"\"\", engine)\n    print(query)","227f6615":"pd.read_sql_query(\"\"\"SELECT SUM(CASE WHEN name IS NULL THEN 1 ELSE 0 END) name_miss,\n                         SUM(CASE WHEN platform IS NULL THEN 1 ELSE 0 END) platform_miss, \n                         SUM(CASE WHEN release_date IS NULL THEN 1 ELSE 0 END) rdate_miss,\n                         SUM(CASE WHEN summary IS  NULL THEN 1 ELSE 0 END) summ_miss,\n                         SUM(CASE WHEN meta_score IS NULL THEN 1 ELSE 0 END) mscore_miss,\n                         SUM(CASE WHEN user_review = 'tbd' OR user_review IS NULL THEN 1 ELSE 0 END) ureview_miss\n                     FROM vg\"\"\", engine)","3de6e78c":"pd.read_sql_query(\"\"\"SELECT *\n                     FROM vg\n                     WHERE summary IS NULL\n                         OR user_review = 'tbd'\n                         OR user_review IS NULL\"\"\", engine) ","c77bee68":"vg_df['release_date_formatted'] = pd.to_datetime(vg_df.release_date, format='%B %d, %Y')\n# print(vg_df.release_date)","f3cce366":"vg_df.platform = vg_df.platform.str.lstrip()\n\nprint(vg_df.platform.unique())","0bd33b44":"vg_df.to_sql(\"vg\", engine, if_exists=\"replace\")","ae33ca9d":"pd.read_sql_query(\"\"\"SELECT name,\n                         summary,\n                         AVG(1.0 * meta_score) meta_score_avg\n                     FROM vg\n                     GROUP BY 1\n                     ORDER BY 3 DESC, 1\n                     LIMIT 10\"\"\", engine) ","35eaa19c":"pd.read_sql_query(\"\"\"SELECT name,\n                         summary,\n                         ROUND(AVG(1.0 * user_review), 1) user_review_avg,\n                         AVG(1.0 * meta_score) meta_score_avg\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\n                     ORDER BY 3 DESC, 4 DESC, 1\n                     LIMIT 10\"\"\", engine) ","6f82af62":"pd.read_sql_query(\"\"\"SELECT name,\n                         summary,\n                         AVG(1.0 * meta_score) meta_score_avg,\n                         ROUND(AVG(1.0 * user_review), 2) user_review_avg\n                     FROM vg\n                     GROUP BY 1\n                     ORDER BY 3, 4, 1\n                     LIMIT 10\"\"\", engine) ","51264a8f":"pd.read_sql_query(\"\"\"SELECT name,\n                         summary,\n                         ROUND(AVG(user_review), 2) user_review_avg\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\n                     ORDER BY 3, 1\n                     LIMIT 10\"\"\", engine) ","d693c358":"pd.read_sql_query(\"\"\"SELECT platform, \n                         name,\n                         MAX(meta_score) meta_score_max, \n                         user_review\n                     FROM vg\n                     GROUP BY 1\"\"\", engine)","461c0a29":"pd.read_sql_query(\"\"\"SELECT platform, \n                         name, \n                         MAX(1.0 * user_review) user_review_max,\n                         meta_score\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\"\"\", engine)","18956b71":"pd.read_sql_query(\"\"\"SELECT STRFTIME('%Y', release_date_formatted) release_year,\n                         ROUND(AVG(1.0 * meta_score), 2) meta_score_avg,\n                         COUNT(meta_score) meta_score_count\n                     FROM vg\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","a7a502f1":"pd.read_sql_query(\"\"\"SELECT STRFTIME('%Y', release_date_formatted) release_year,\n                         ROUND(AVG(1.0 * user_review), 2) user_review_avg,\n                         COUNT(user_review) user_review_count\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","a3397611":"pd.read_sql_query(\"\"\"SELECT platform,\n                         ROUND(AVG(1.0 * meta_score), 2) meta_score_avg,\n                         COUNT(meta_score) meta_score_count\n                     FROM vg\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","f766021b":"pd.read_sql_query(\"\"\"SELECT platform,\n                         ROUND(AVG(1.0 * user_review), 2) user_review_avg,\n                         COUNT(user_review) user_review_count\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","cd0b4d63":"pd.read_sql_query(\"\"\"SELECT \n                         CASE\n                             WHEN platform IN ('3DS', 'DS', 'Game Boy Advance', 'PSP', 'PlayStation Vita')\n                                 THEN 'Handheld'\n                             WHEN platform = 'Switch'\n                                 THEN 'Hybrid'\n                             WHEN platform = 'PC' \n                                 THEN 'PC'\n                             ELSE 'Home'\n                             END platform_type,\n                         ROUND(AVG(1.0 * meta_score), 2) meta_score_avg,\n                         COUNT(meta_score) meta_score_count\n                     FROM vg\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","67b42409":"pd.read_sql_query(\"\"\"SELECT \n                         CASE\n                             WHEN platform IN ('3DS', 'DS', 'Game Boy Advance', 'PSP', 'PlayStation Vita') THEN 'Handheld'\n                             WHEN platform = 'Switch' THEN 'Hybrid'\n                             WHEN platform = 'PC' THEN 'PC'\n                             ELSE 'Home'\n                             END platform_type,\n                         ROUND(AVG(1.0 * user_review), 2) user_review_avg,\n                         COUNT(user_review) user_review_count\n                     FROM vg\n                     WHERE user_review != 'tbd'\n                     GROUP BY 1\n                     ORDER BY 2 DESC\"\"\", engine)","ebf36bd8":"#### Which platforms had the most popular games?","a35b194a":"Inspecting number of rows:","d3650744":"## Cleaning & pre-processing","51107d2d":"##### By Metascore","0f50b828":"From above:\n1. If a game is released on different `platform`s, they are duplicated in `name` and each is given a separate `meta_score` and `user_review` score \n2. `release_date` should be changed to a format that allows for `STRFTIME` (`YYYY-MM-DD`).\n3. `platform` has a space prefix that should be removed.\n4. `user_review` uses `'tbd'` as potentially a `NULL` value.","c38e8818":"Inspecting first 10 rows:","6dc1adb6":"Selecting rows with missing values:","35fd4a06":"### Over the years","3ff69de3":"##### By Metascore","c5fc5d7a":"##### By user review","4d483738":"By Metascore, handheld consoles have the lowest rating games out of all 4 categoriesm, PC games edged out on home consoles.\n\nHowever, contrastingly, user-reviewed scores of games are the highest rated on handheld consoles, with PCs being slightly lower than home consoles.","b9e72723":"By both Metascore and user reviews, 1995 had the most popular games released. However, there was only one game included from 1995, so this has a high margin of error. \n\nAlthough the ordering is slightly different, the top 5 are all in the 1990s (**NB**: the data does not include games from 1990-1994 inclusive).\n\nHowever, Metascores were far higher for games released in 2019-2021 than user reviews.","02ba6f1c":"#### Do *home* video game consoles have more popular games than *handheld*? Do *PCs* have more popular games than *home* video game consoles?","62181208":"##### By user reviews","5e9a4f42":"### Missing values","bf54a4b7":"Inspecting `DISTINCT` values of each column:","905f2365":"##### By Metascore","2216d46f":"# Video Games EDA - SQL\nExploratory data analysis (EDA) on video games (1995-2021), scraped by Deep Contractor on [Kaggle](https:\/\/www.kaggle.com\/deepcontractor\/top-video-games-19952021-metacritic) from [Metacritic](https:\/\/www.metacritic.com\/browse\/games\/score\/metascore\/all\/all\/filtered?page=0). Python is used to load the data, and SQL is used to inspect, clean and discover insights.\n\n**Please visit my GitHub ([henrylin03](https:\/\/github.com\/henrylin03\/)) for more projects!**\n\nLast updated: 27 Oct 2021","65ecdb7f":"### Changing `release_date` to `STRFTIME` format","6f2e8a33":"### Games","e4ce6a18":"Missing values largely in `user_review`. `'tbd'` indicates <4 user reviews [(source)](https:\/\/www.metacritic.com\/faq#item13) which would be difficult to impute. \n\nMissing values in `summary` are also difficult to impute. ","4a3b3c3d":"Because each row represents a game for a platform, we will need to `GROUP BY` the game name, and take an average.","ffafcf58":"Reading in CSV and creating SQL database:","fc0effc9":"### Inspecting","9c9367d3":"## Insights","50c9701b":"## Setup","cc4fd031":"##### By Metascore\nMetascore is a weighted average score of curated reviews by critics selected by Metacritic [(source)](https:\/\/www.metacritic.com\/about-metascores).","1149dc35":"Importing packages:","a02e48a8":"#### Which years had the most popular games released?","f0576eab":"#### What is the top game for each platform?","08d463cb":"#### What are the 10 most popular games?","163cf214":"#### What are the 10 least popular games?","10f7574c":"### Removing space prefix for `platform`","16a92f94":"### Platforms","777c7b26":"##### By Metascore","7ea3802d":"##### By Metascore","4afae626":"##### By user review","01f7cf42":"Counting the missing numbers in each column:","f35158b6":"##### By user review","d2cd7b2c":"##### By user review","39c19fe7":"As above, on average, Metascores tend to rate the latest games (on Xbox Series X, and PlayStation 5) far higher than users. \n\nNintendo 64 was agreed by both Metacritic and users to have the most popular games. The Dreamcast and PlayStation 1 also reached top 5 in both metrics.","80284b76":"##### By user reviews"}}