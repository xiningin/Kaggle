{"cell_type":{"83ba1f5b":"code","7896d36a":"code","e0ac5f0d":"code","dd533977":"code","bc5836ee":"code","463d05ae":"code","75ad2566":"code","e4508400":"code","dcd4517c":"code","e65cd978":"code","d4cbd759":"code","be86995e":"code","8216a254":"code","c253c6c5":"code","d0eec0af":"code","a8cd36c6":"code","c08ead36":"code","42b99e63":"code","ca7484d8":"code","39de6240":"code","ff0e8587":"code","539115ac":"code","c1d4f028":"code","8506386f":"code","90e594e3":"code","67b25397":"code","32825537":"code","d38cb68a":"markdown","760ffa45":"markdown","0dd031d3":"markdown","e81aacb4":"markdown","f818f55e":"markdown","b1eb7d4a":"markdown","c31608dd":"markdown","31b5e506":"markdown","e12bc737":"markdown","9123187d":"markdown","87119349":"markdown","492d1d59":"markdown","5d3cd1df":"markdown","7b69d671":"markdown","69494ea5":"markdown","6b6446ed":"markdown","e607a32b":"markdown","793b0983":"markdown","0cf5c56e":"markdown","498d92aa":"markdown","a4b56205":"markdown","f4d3bc67":"markdown"},"source":{"83ba1f5b":"import numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\n# setting colors for plots.\ncolors = ['#794C74', '#00AF91', '#F39233', '#0F9D58']\nsns.set_palette(colors)\nplt.rc('font', size=14)","7896d36a":"data = pd.read_csv(\"..\/input\/rainfall-data-from-1901-to-2017-for-india\/Rainfall_Data_LL.csv\")\ndata.head()","e0ac5f0d":"# shape\nprint(\"#rows:\", data.shape[0])\nprint(\"#columns:\", data.shape[1])","dd533977":"# Unique values per rows.\nfor col in data.select_dtypes(include=object):\n    print(col, data[col].nunique())","bc5836ee":"# Drop Name column.\ndata.drop('Name', axis=1, inplace=True)","463d05ae":"# Replace '-' with '_'.\n\nfor col in data.columns:\n    data.rename(columns={col:col.replace('-', '_')}, inplace=True)","75ad2566":"data.head()","e4508400":"# Statistical Description.\ndata.describe()","dcd4517c":"# Summary\ndata.info()","e65cd978":"# distribution of four seasons.\nfig, axs = plt.subplots(nrows=2, ncols=2, figsize=(16,12))\n\nax1 = sns.histplot(data['Jan_Feb'], ax=axs[0, 0], kde=True, label='Winter')\nax1.legend()\n\nax2 = sns.histplot(data['Mar_May'], ax=axs[0, 1], kde=True, label='Summer\/Pre-Monsoon')\nax2.legend()\n\nax3 = sns.histplot(data['June_September'], ax=axs[1, 0], kde=True, label='Rainy-season\/Monsoon')\nax3.legend()\n\nax4 = sns.histplot(data['Oct_Dec'], ax=axs[1, 1], kde=True, label='Autumn\/Post-monsoon')\nax4.legend()\n\nfig.suptitle(\"Rainfall, by seasons\")\nplt.show()\n","d4cbd759":"year_data = data.groupby('YEAR').mean()","be86995e":"# % rainfall in each month over the years.\nmonths_data = year_data.loc[:,'JAN':'ANNUAL']\nmonths_data.head()\n\npercent_rain = {}\ncols = months_data.columns[:-1]\n\nfor col in cols:\n    percent_rain[col] = round((months_data[col]\/months_data['ANNUAL']).sum(), 2)\n    \npercent_df = pd.DataFrame(data = percent_rain.values(), index=percent_rain.keys(), columns=['Percent_rainfall'])\npercent_df.style.background_gradient()","8216a254":"# plot.\nplt.figure(figsize=(12, 6))\nplt.bar(percent_df.index, percent_df.Percent_rainfall)\n\n# Annotate\nfor row in percent_df.itertuples():\n    plt.text(row.Index, row.Percent_rainfall, s=round(row.Percent_rainfall, 2), horizontalalignment= 'center', verticalalignment='bottom')\n\nplt.xlabel('Months')\nplt.ylabel('Percentage')\nplt.title(\"% of Rainfall in each months over the years.\", fontdict={'size':20})\nplt.show()","c253c6c5":"# Let's examine rainfall trends in 'Mar_May'(pre-monsoon)\n\nmin_data = year_data['Mar_May'].min()\n\nmax_data = year_data['Mar_May'].max()\nmax_data_yr = year_data[year_data['Mar_May'] == max_data].index[0]    \n\nlast_max_data = year_data.loc[2010:2020, 'Mar_May'].max()\nlast_max_data_yr = year_data[year_data['Mar_May'] == last_max_data].index[0]\n\nplt.figure(figsize=(14, 8))\nsns.lineplot(data = year_data,x = year_data.index, y = 'Mar_May', linewidth=2, label='Mar-May')\n\nplt.axvline(x = max_data_yr, linewidth=2, linestyle= '--', color='#222')\nplt.text(max_data_yr+1, y=max_data, s= max_data, color='r')\nplt.text(max_data_yr, y=min_data-5, s= max_data_yr, color='r')\n\nplt.axvline(x = last_max_data_yr, linewidth=2, linestyle= '--', color='#222')\nplt.text(last_max_data_yr+1, y=last_max_data, s= last_max_data, color='r')\nplt.text(last_max_data_yr, y=min_data-5, s= last_max_data_yr, color='r')\n\nplt.ylabel(\"Rainfall in (mm)\")\nplt.title(\"All over India Pre-Monsoon Annual average rainfall over the years\")\n\nplt.show()","d0eec0af":"\ndef monsoon_plots(month):\n    \n    \"\"\"Line plots and Trends\"\"\"\n    \n    months = {'JUL': 'July', 'AUG': 'August'}\n    \n    year_data[f'{month}_SMA_10'] = year_data[month].rolling(30, min_periods=10).mean()\n    \n    plt.figure(figsize=(14, 6))\n    sns.scatterplot(data = year_data, x = year_data.index, y = month,label=months[month])\n    sns.lineplot(data = year_data, x = year_data.index, y = f'{month}_SMA_10', linewidth=2, label= 'movAvg')\n    \n    plt.ylabel(\"Rainfall in (mm)\")\n    plt.title(f\"Yearly Average Rainfall trend for {months[month]} month all over India.\")\n    \n    plt.legend()\n    plt.xticks(rotation=45)\n    plt.show()","a8cd36c6":"# Annual Average rainfall observations in July and August.\nmonsoon_plots('JUL')\nmonsoon_plots('AUG')","c08ead36":"# Annual observations for Rainfall?\nyear_data['SMA_10'] = year_data['ANNUAL'].rolling(20, min_periods=10).mean()\n\nplt.figure(figsize=(14, 8))\n\nsns.lineplot(data = year_data, x = year_data.index, y = 'ANNUAL', linewidth=2, label='Average')\nsns.lineplot(data = year_data, x = year_data.index, y = 'SMA_10', linewidth=2, label='movAvg')\n\nplt.ylabel(\"Rainfall in (mm)\")\nplt.title(\"Annual Average Rainfall in all over India\", fontdict={'size':20})\n\nplt.plot()","42b99e63":"# Average rainfall by subdivision.\navgSubDiv = data.groupby(by = ['SUBDIVISION']).agg(['mean', 'std'])['June_September']\navgSubDiv['CV'] = avgSubDiv['std'] \/ avgSubDiv['mean']\navgSubDiv.sort_values(by=['mean'], ascending=False, inplace=True)\n\n# plot\nplt.figure(figsize=(14, 8))\nsns.barplot(data=avgSubDiv, x=avgSubDiv.index, y='mean', color='#4C4C6D')\n\nplt.ylabel('Rainfall (in mm)')\nplt.title(\"Average Rainfall by SubDivisions.\", fontdict={'size':20})\n\nplt.xticks(rotation=90)\nplt.show()","ca7484d8":"# Coefficient of Variation in rainfall by subdivision.\n\n# Visualization.\nplt.figure(figsize=(14, 8))\nsns.barplot(data=avgSubDiv, x=avgSubDiv.index, y='CV', color='#4C4C6D')\n\nplt.ylabel('Coefficient of Variation')\nplt.title(\"Coefficient of Variation by SubDivisions\",fontdict={'size':20})\n\nplt.xticks(rotation=90)\nplt.show()","39de6240":"# select Maharashtra's subdivision\nsub_div = data.set_index('SUBDIVISION')\n\n# select last 30 years\nsub_div = sub_div.loc[sub_div.YEAR > 1987]\n\nMahaData = sub_div.loc['Konkan & Goa':'Vidarbha']\nMahaData.reset_index(inplace=True)\nMahaData.head()","ff0e8587":"# percent average rainfall in Maharashtra in each month over last 30 years.\nMaha_months_data = MahaData.loc[:,'JAN':'ANNUAL']\nMaha_months_data.head()\n\npercent_rain = {}\ncols = Maha_months_data.columns[:-1]\n\nfor col in cols:\n    percent_rain[col] = round((Maha_months_data[col]\/Maha_months_data['ANNUAL']).sum(), 2)\n    \npercent_df = pd.DataFrame(data = percent_rain.values(), index=percent_rain.keys(), columns=['Percent_rainfall'])\npercent_df.style.background_gradient()","539115ac":"fig, ax = plt.subplots(figsize=(14,8))\nax.vlines(x=percent_df.index, ymin=-1, ymax=percent_df.Percent_rainfall, alpha = 0.8, linewidth=25)\nax.scatter(x=percent_df.index, y=percent_df.Percent_rainfall, s=60, color='#293B5F')\n\n# Title, Label, and Ticks.\nax.set_xlabel('Months')\nax.set_ylabel('Rainfall (in mm)')\nax.set_title('% Rainfall in each Month all over Maharashtra for last 30 years', fontdict={'size':20})\n\nax.set_xticks(percent_df.index)\n\n# Annotate\nfor row in percent_df.itertuples():\n    ax.text(row.Index, row.Percent_rainfall+.5, s=round(row.Percent_rainfall, 2), horizontalalignment= 'center', verticalalignment='bottom')\n\nplt.show()","c1d4f028":"# Average rainfall trend in Maharashtra.\nMahaGrp = pd.DataFrame(MahaData.groupby(by=['YEAR']).agg(['mean', 'std'])[['JUN', 'JUL', 'AUG', 'SEP','ANNUAL', 'June_September']])\n\n# Trends in June, July, August and September.\n# Simple Moving average to find monthly trends.\nMahaGrp['JunSMA_10'] = MahaGrp['JUN']['mean'].rolling(10, min_periods=3).mean()\nMahaGrp['AugSMA_10'] = MahaGrp['AUG']['mean'].rolling(10, min_periods=3).mean()\nMahaGrp['SepSMA_10'] = MahaGrp['SEP']['mean'].rolling(10, min_periods=3).mean()\nMahaGrp['JulSMA_10'] = MahaGrp['JUL']['mean'].rolling(10, min_periods=3).mean()\n\nplt.figure(figsize=(14, 8))\n\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['JUN']['mean'], color='#FF2442', linewidth=1.8, alpha=0.6, label='June')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['JunSMA_10'], color='#FF2442', linewidth=2, linestyle='--')\n\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['JUL']['mean'], color='#3DB2FF', linewidth=1.8, alpha=0.6, label='July')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['JulSMA_10'], color='#3DB2FF', linewidth=2, linestyle='--')\n\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['AUG']['mean'], color='#F39233', linewidth=1.8, alpha=0.6, label='August')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['AugSMA_10'], color='#F39233', linewidth=2, linestyle='--')\n\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['SEP']['mean'], color='#81B214', linewidth=1.8, alpha=0.6, label='September')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['SepSMA_10'], color='#81B214', linewidth=2, linestyle='--')\n \nplt.xlabel('Rainfall (in mm)')\nplt.ylabel(\"Years\")\nplt.title(\"Maharashtra state monthly rainfall trends\", fontdict={'size':22})\nplt.show()","8506386f":"# Let's examine Seasonal and Annual rainfall trend for Maharashtra.\n\n# Simple Moving Average over a period of 10 years.\nMahaGrp['AnnualSMA10'] = MahaGrp['ANNUAL']['mean'].rolling(30, min_periods=2).mean()\nMahaGrp['JJAS_SMA10'] = MahaGrp['June_September']['mean'].rolling(30, min_periods=2).mean()\n\n# visualization for the same\nplt.figure(figsize=(14, 8))\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['ANNUAL']['mean'], color='#40394A', linewidth=2.6, alpha=0.6, label='Annual')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y='AnnualSMA10', linewidth=2, color='#40394A', linestyle='--')\n\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y= MahaGrp['June_September']['mean'],color='#9B3675', linewidth=2.6, alpha=0.7, label='JJAS')\nsns.lineplot(data = MahaGrp, x=MahaGrp.index, y='JJAS_SMA10', linewidth=2,color='#9B3675', linestyle='--')\n\nplt.ylabel('Rainfall (in mm)')\nplt.title(\"Maharashtra state southwest monsoon\", fontdict={'size':20})\n\nplt.show()","90e594e3":"# Let's examine the Percent average of each SubDivisions of Maharashtra.\na = pd.DataFrame(MahaData.groupby(['SUBDIVISION']).mean())\n\n# Compute the annual percentage of each Subdivision.\ntotal_avg = a['ANNUAL'].sum()\nb = pd.DataFrame((a['June_September'] \/ total_avg) * 100)\n\n# plot\nb.plot(kind='bar', figsize=(14, 8))\n\nplt.ylabel(\"Percent Rainfall (in mm)\")\nplt.title(\"Maharashtra's subdivision percentage rainfall in SW monsoon\")\nplt.xticks(rotation=0)\nplt.show()","67b25397":"# Let's examine rainfall trends in konkan and goa in southwest monsoon.\n\nkonkan_data = MahaData.loc[MahaData.SUBDIVISION == 'Konkan & Goa']\nkonkan_grpdata = konkan_data.groupby('YEAR').mean()\nkonkan_grpdata['SMA_10'] = konkan_grpdata['ANNUAL'].rolling(20, min_periods=2).mean()\n\nmin_data = konkan_grpdata['ANNUAL'].min()\n\nmax_data = konkan_grpdata['ANNUAL'].max()\nmax_data_yr = konkan_grpdata[konkan_grpdata['ANNUAL'] == max_data].index[0]    \n\nplt.figure(figsize=(14, 8))\nsns.lineplot(data = konkan_grpdata,x = konkan_grpdata.index, y = 'ANNUAL', linewidth=2, color='#184D47',label='ANNUAL')\nsns.lineplot(data = konkan_grpdata,x = konkan_grpdata.index, y = 'SMA_10', linewidth=2, linestyle='--', color='#A685E2',label='mov_avg2')\n\n\nplt.axvline(x = max_data_yr, linewidth=2, linestyle= '--', color='#96BB7C')\nplt.text(max_data_yr+0.2, y=max_data-2, s= max_data, color='#6155A6')\nplt.text(max_data_yr+0.2, y=min_data-2, s= max_data_yr, color='#6155A6')\n\nplt.ylabel(\"Rainfall in (mm)\")\nplt.title(\"Konkan&Goa annual rainfall in sw monsoon seasons\")\n\nplt.show()","32825537":"# Let's examine rainfall trends in Marathwada in southwest monsoon.\n\nmarathwada_data = MahaData.loc[MahaData.SUBDIVISION == 'Matathwada']\nmarathwada_grpdata = marathwada_data.groupby('YEAR').mean()\nmarathwada_grpdata['SMA_10'] = marathwada_grpdata['ANNUAL'].rolling(20, min_periods=2).mean()\n\nmin_data = marathwada_grpdata['ANNUAL'].min()\n\nmax_data = marathwada_grpdata['ANNUAL'].max()\nmax_data_yr = marathwada_grpdata[marathwada_grpdata['ANNUAL'] == max_data].index[0]    \n\nplt.figure(figsize=(14, 8))\nsns.lineplot(data = marathwada_grpdata,x = marathwada_grpdata.index, y = 'ANNUAL', linewidth=2, color='#184D47',label='ANNUAL')\nsns.lineplot(data = marathwada_grpdata,x = marathwada_grpdata.index, y = 'SMA_10', linewidth=2, linestyle='--', color='#A685E2',label='mov_avg2')\n\n\nplt.axvline(x = max_data_yr, linewidth=2, linestyle= '--', color='#96BB7C')\nplt.text(max_data_yr+0.2, y=max_data-2, s= max_data, color='#6155A6')\nplt.text(max_data_yr+0.2, y=min_data-2, s= max_data_yr, color='#6155A6')\n\nplt.ylabel(\"Rainfall in (mm)\")\nplt.title(\"Marathwada annual rainfall in sw monsoon seasons\")\n\nplt.show()","d38cb68a":"**While Marathwada receives lowest rainfall in sw monson season, the highest rainfall receive was 1198.1(in mm) in the year 1990, we can see that there is decreasing rainfall trend in Marathwada.**","760ffa45":"**We can see that, There is decreasing trend in Annual average rainfall in recent years in all over India**","0dd031d3":"## Monthly Average Rainfall in JULY & AUGUST","e81aacb4":"## Rainfall by Subdivision ","f818f55e":"**High average rainfall is observed in NorthEast and SouthWest Regions of India.**","b1eb7d4a":"## Maharashtra rainfall southwest monsoon analysis.\n\n#### Let's examine the last 30 years of Rainfall in Maharashtra and find trends.","c31608dd":"**We can see that, Both seasonal and annual rainfall shows neither increasing nor decreasing trend all over maharashtra for the recent years.**","31b5e506":"## Konkan and Goa SW Monsoon Rainfall","e12bc737":"**Above barplot shows the percentage of rainfall in each months. We can see that average rainfall in \"July\" and \"August\" is high followed by the months June and September. They together contribute 88% of rainfall over the years all over India.**","9123187d":"**This is Monthly trend lines for Rainfall in Maharashtra, The monthly rainfall in July and September shows increasing trend while rainfall in June and August shows decreasing trend.**","87119349":"**Higher rainfall subdivisions has lower coeffient of variation, whereas lower average rainfall subdivisions has higher coefficient of variation.**","492d1d59":"# Monsoon Rainfall Analysis","5d3cd1df":"**We can see that, Rainfall in July shows increasing trend while rainfall in August shows decreasing trend all over India over the Years.**  ","7b69d671":"**This is bar plot for percentage rainfall in each months all over Maharashtra for last 30 years, we can see that, July and August has highest average percentage followed by June and September. July and August together contributes almost 65% of rainfall all over Maharashtra. This is mainly because Konkan & Goa has higher average rainfall in all over india.**","69494ea5":"# Pre-Monsoon analysis (Mar-May)","6b6446ed":"# Percentage rainfall in each month over years","e607a32b":"**We can see that, There is increasing rainfall trend in Konkan and goa region in South west monsoon season. The highest rainfall receive in Konkan & Goa is 3825.2(mm) in the year 2011.**","793b0983":"**Almost 50% of annual rainfall receive in the Konkan and Goa region of Maharashtra in SW monsoon seasoon. While Vidharbha, Madhya Maharashtra, and Marathwada receives less than 20% of rainfall in monsoon.**","0cf5c56e":"The months of June_September(Rainy Season) has higher observations ~(>1000 mm) values. In months between March and May also have some higher observation for rainfall.","498d92aa":"There are no missing values in data.","a4b56205":"## Marathwada SW Monsoon Rainfall","f4d3bc67":"**Highest average Pre-monsoon rainfall receives in 1990 and it was ~245mm, In last 10 years, it was recorded in 2015 which was ~203mm.**"}}