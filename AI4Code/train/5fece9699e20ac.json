{"cell_type":{"f5f47512":"code","f8f30f2d":"code","1eb46f4e":"code","adc94c25":"code","b20e56d9":"code","af966193":"code","60c106e8":"code","752e16ec":"code","f479dcc9":"code","f1bbc7aa":"code","68b0d4f2":"code","8b1e762c":"code","80d54f21":"code","3268ff03":"code","b3eef24d":"markdown","d18298bd":"markdown","d4a2296d":"markdown","ed69d9e2":"markdown","a3a41e47":"markdown","41836495":"markdown","1ff6430d":"markdown"},"source":{"f5f47512":"#%matplotlib notebook\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nplt.style.use('fivethirtyeight')","f8f30f2d":"# Load data set\nforest_fire = pd.read_csv('..\/input\/forest-fires-in-brazil\/amazon.csv', encoding='ISO-8859\u20131')\nforest_fire.head()","1eb46f4e":"forest_fire.info()\n#forest_fire.describe()","adc94c25":"# change date column to pandas date time\nforest_fire.date = pd.to_datetime(forest_fire.date)\nforest_fire.info()","b20e56d9":"# total states\nprint('Total states \\n', forest_fire.state.unique())","af966193":"# get state wise data for each year\ndf = forest_fire.groupby(['date', 'state'])['number'].sum().to_frame()\ndf.reset_index(inplace=True)\ndf","60c106e8":"#get top 5 states based on number of fires\ns = df.groupby('state')['number'].sum()\n\ns.sort_values(ascending=False, inplace=True)\n\ntop5state = s[:5].index.values","752e16ec":"# keep only top 5 states\ndf = df[df['state'].isin(top5state)]","f479dcc9":"import warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)\n\n# Plot each state graph\nplt.figure(figsize=(20,8))\n\ngrouped = df.groupby('state')\n\nfor name, frame in grouped:\n    plt.plot(frame.date, frame.number, label=name)\n\nplt.xlabel('Year')\nplt.ylabel('Number of fire')\nplt.title('Top 5 states with most number of forest fire')\nplt.legend(loc=1)\nplt.show()","f1bbc7aa":"# Plot each state graph\nplt.figure(figsize=(20,10))\n#sns.set()\n\ncp = sns.color_palette(['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00'])\nbars = sns.barplot(x='date', y='number', hue='state', data=df, palette=cp)\n\n# get current axis\nax = plt.gca()\n# get current xtick labels\nxticks = ax.get_xticks()\nax.set_xlabel('Year', fontsize=18)\nax.set_ylabel('Number of fire', fontsize=18)\nax.set_title('Top 5 states with most number of forest fire', fontsize=18)\nax.set_xticklabels(df.date.dt.strftime('%Y').unique());\nax.legend().set_title('States')\n#legend = ax.legend()\n#legend.texts[0].set_text(\"Whatever else\")\n","68b0d4f2":"# fire in 2017\ndata = df[df.date.dt.year == 2017]\ndata","8b1e762c":"plt.figure(figsize=(12,8))\n#plt.pie(x=data.number, labels=data.state);\nexplode = (0, .1, 0, 0, 0)  \nplt.pie(data.number, explode=explode, labels=data.state, autopct='%1.1f%%',\n        shadow=True, startangle=90);\nplt.title('Pie chart - Forest fire in 2017');","80d54f21":"monthwisefire = forest_fire.groupby('month')['number'].mean()\n\n## month mapping to date time. Year doesnt matter. We will use month to print it on plot\nmonth_mapping = {\n                 'Janeiro' : '1\/1\/2017', 'Fevereiro' : '1\/2\/2017', 'Mar\u00e7o' : '1\/3\/2017',\n                 'Abril' : '1\/4\/2017', 'Maio' : '1\/5\/2017', 'Junho' : '1\/6\/2017',\n                 'Julho' : '1\/7\/2017', 'Agosto' : '1\/8\/2017', 'Setembro' : '1\/9\/2017',\n                 'Outubro' : '1\/10\/2017', 'Novembro' : '1\/11\/2017', 'Dezembro' : '1\/12\/2017'\n                 }\n\nmonthwisefire = monthwisefire.reset_index()\nmonthwisefire.month.replace(month_mapping, inplace=True)\nmonthwisefire.month = pd.to_datetime(monthwisefire.month, format='%d\/%m\/%Y')\nmonthwisefire.sort_values(by='month', inplace=True)\n","3268ff03":"import matplotlib.dates as mdates\nimport datetime\n\nplt.figure(figsize=(12, 8))\npal = sns.color_palette(\"Reds_r\", len(monthwisefire))\nrank = monthwisefire.number.argsort().argsort()\nsns.barplot(monthwisefire.month.dt.strftime('%b'), monthwisefire.number, palette=np.array(pal[::-1])[rank], \n            linewidth=1, edgecolor=\".2\");\n\nax = plt.gca()\nax.set_xlabel('Months')\nax.set_ylabel('Average number of Fire')\nax.set_title('Month wise average number of fire');","b3eef24d":"### Plotting","d18298bd":"### Month wise forest fire count","d4a2296d":"### Cleaning and preparing data","ed69d9e2":"# Analysis of forest fire in Brazil","a3a41e47":"### Read data","41836495":"#### There are lots of state so plotting all of them will not make sense. So, lets find top 5 state based on total number of fire","1ff6430d":"#### Lets see how many states are available in data set"}}