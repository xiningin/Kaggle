{"cell_type":{"a8becc4c":"code","f45ca275":"code","2c42f9a6":"code","e03d3214":"code","c07d179a":"code","5677d920":"code","186043a8":"code","d4081085":"code","f7aa2f26":"code","61d12369":"code","a834f197":"code","a7974674":"code","5acf6708":"code","d82b1b80":"code","629ca878":"code","713b009d":"code","442bca01":"code","873a0986":"markdown","13cd96d2":"markdown","86b6c8cd":"markdown","5c013dde":"markdown","80e63e5e":"markdown","3be32b58":"markdown","51fb9bdd":"markdown","8e58dfcb":"markdown"},"source":{"a8becc4c":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport os\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\nprint(os.listdir(\"..\/input\"))","f45ca275":"team_df = pd.read_csv('..\/input\/team_info.csv')","2c42f9a6":"team_df.head()","e03d3214":"game_df.head()","c07d179a":"\"\"\"\nAdd home and away team names.\n\"\"\"\ngame_df = pd.read_csv('..\/input\/game.csv')\ngame_df = game_df.merge(team_df[['team_id', 'teamName']],\n              left_on='home_team_id', right_on='team_id') \\\n    .merge(team_df[['team_id', 'teamName']], left_on='away_team_id',\n           right_on='team_id', suffixes=('home','away'))","5677d920":"game_df.head()","186043a8":"game_df[['away_goals','home_goals']].plot(kind='hist', figsize=(15,5), bins=10, alpha=0.5, title='Distribution of Home vs. Away Goals')","d4081085":"game_df.groupby('teamNamehome').mean()['home_goals'] \\\n    .sort_values() \\\n    .plot(kind='barh', figsize=(15, 8), title='Average Goals Scored in Home Games')\nplt.show()\ngame_df.groupby('teamNameaway').mean()['away_goals'] \\\n    .sort_values() \\\n    .plot(kind='barh', figsize=(15, 8), title='Average Goals Scored in Away Games')\nplt.show()","f7aa2f26":"game_df.groupby('teamNamehome').mean()['away_goals'] \\\n    .sort_values() \\\n    .plot(kind='barh', figsize=(15, 8), title='Average Goals Allowed in Home Games')\nplt.show()\ngame_df.groupby('teamNameaway').mean()['home_goals'] \\\n    .sort_values() \\\n    .plot(kind='barh', figsize=(15, 8), title='Average Goals Allowed in Away Games')\nplt.show()","61d12369":"game_df['point_diff'] = game_df['home_goals'] - game_df['away_goals']","a834f197":"game_df['point_diff'].plot(kind='hist',\n                           bins=18,\n                           title='NHL Point Differential (Negative Home team Loses, Positive Home team Wins)',\n                           xlim=(-10,10))","a7974674":"#Biggest Blowout was by 10 points\ngame_df['point_diff'].abs().max()","5acf6708":"# Blowout game:\ngame_df.loc[game_df['point_diff'] == 10]","d82b1b80":"game_df['point_diff_type'] = game_df['point_diff'].abs().apply(lambda x: 'Blowout' if x>=3 else ('Normal' if x>=2 else 'Tight'))","629ca878":"# Create one dataframe with the point \npoint_diff_team = pd.concat([game_df[['teamNamehome','point_diff_type','point_diff','date_time']].rename(columns={'teamNamehome':'team'}),\n    game_df[['teamNameaway','point_diff_type','point_diff','date_time']].rename(columns={'teamNameaway':'team'})])","713b009d":"point_diff_team['date_time'] = pd.to_datetime(point_diff_team['date_time'])","442bca01":"for team, data in point_diff_team.groupby('team'):\n    data.groupby(data['date_time'].dt.year).mean()['point_diff'].plot(kind='line', title='{} Average Point Diff By Year'.format(team), figsize=(15,2))\n    plt.show()","873a0986":"# Biggest Blowout","13cd96d2":"Ouch that was a blowout. \nHere are the video highlights in case you were wondering how it happened: https:\/\/www.nhl.com\/bluejackets\/video\/recap-mtl-0-cbj-10\/t-283041746\/c-46026003","86b6c8cd":"# Average Goals per Team\n","5c013dde":"Lets define game types as:\n- Blowout (abs point diff >= 3 points)\n- Normal Game (win > 2 points)\n- Tight Game (win by 1 point)","80e63e5e":"# TODO\n- Better metrics\n- Figure out how to make plot colors = team colors\n- More fun stuff\n\nGO CAPS!","3be32b58":"# Average Goals Allowed per Team","51fb9bdd":"# Distribution of Point Differential\n\nHow much do teams usually win\/lose by? Point differential is computed as:\n`point_diff` = `home team goals` - `away team goals`","8e58dfcb":"# Distribution of Goals\nThe distribution of home goals had a higher mean than away goals. \"Home ice advantage?\""}}