{"cell_type":{"4d831030":"code","711483ee":"code","ddb751ea":"code","95cf3a97":"code","d468bf4b":"code","22d93a57":"code","43df35b2":"markdown","5a016d24":"markdown","8f7513d1":"markdown","37d8b0e4":"markdown"},"source":{"4d831030":"import pathlib\nimport itertools","711483ee":"import pydicom\nimport pandas as pd","ddb751ea":"root = pathlib.Path('\/kaggle\/input\/siim-covid19-detection')","95cf3a97":"metadata = []\nfor file in root.glob('**\/*.dcm'):\n    print('.', end='')\n    # read the file, but ignore pixel values\n    dcm = pydicom.dcmread(file, stop_before_pixels=True)\n    # iterall will magically convert RawElement from DataElement\n    elements = itertools.chain(dcm.iterall(), dcm.file_meta.iterall())\n    for elem in elements:\n        meta = {\n            'VM': elem.VM,\n            'VR': elem.VR,\n            'tag': elem.tag,\n            'name': elem.name,\n            'keyword': elem.keyword,\n            # SQ values are redundant with other elements\n            'data': elem.value if elem.VR != 'SQ' else None,\n            'value': elem.repval,\n            'filename': file.name,\n        }\n        metadata.append(meta)\nmetadata = pd.DataFrame(metadata)\nprint('\\nDONE:', len(metadata))\nmetadata.tail(50)","d468bf4b":"# display the last dcm for comparison\ndcm","22d93a57":"# display the metadata schema\nmetadata.info()","43df35b2":"# Good luck with the competition :)\n\n**If you found this notebook useful, please consider leaving an upvote!** ","5a016d24":"# Solution","8f7513d1":"# Problem","37d8b0e4":"DICOM files contain valuable metadata to classify examples and evaluate your model.\n\nThis notebook explains how to extract these metadata and convert them into a DataFrame.\n\nFeel free to share your approach to this problem if you find your solution easier or more efficient :)"}}