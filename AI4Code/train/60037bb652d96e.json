{"cell_type":{"891fd729":"code","2cbf4825":"code","dfa19ce3":"code","d5fd0476":"code","b0d784e7":"code","cfd6a9fe":"code","c6c1ccf3":"code","50c31660":"code","3169fc7e":"code","32c49fbc":"code","b530d7d4":"code","548d4aa2":"code","bda42e80":"code","a3186294":"code","5dfd7f49":"code","17b46ca5":"code","45498960":"code","5d159a25":"code","d951d121":"code","ca425b4c":"code","97922cdb":"code","532937d3":"code","d28cfa51":"code","c2076dcd":"code","cd38a000":"code","458e884d":"code","f0b51c2f":"code","f64ca5a6":"code","2e84af73":"code","e8ec49f4":"code","368e0fa9":"code","bff1e008":"markdown","29748979":"markdown","f851dd6a":"markdown","9785f1de":"markdown","819ca313":"markdown","fea99e7c":"markdown","3f387208":"markdown","febf78e4":"markdown","2720d99a":"markdown","9ae67343":"markdown","b07c826e":"markdown","f317415f":"markdown","08de850f":"markdown","a859c145":"markdown","7ffdd69c":"markdown","f2e76e98":"markdown","7010e5aa":"markdown","0ce59ce8":"markdown","819ee6e9":"markdown","72320659":"markdown"},"source":{"891fd729":"# Import all of the libraries \nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nmpl.rcParams['patch.force_edgecolor'] = True\n%matplotlib inline","2cbf4825":"events = pd.read_csv(\"..\/input\/athlete_events.csv\")\nevents.head(10)","dfa19ce3":"events.info()","d5fd0476":"events.isnull().sum()","b0d784e7":"#How many different types of sports do Olympic Games have?\nevents['Sport'].nunique()","cfd6a9fe":"events['Medal'].value_counts(dropna=False)","c6c1ccf3":"events.groupby(['Year', 'Medal'])['Medal'].count().unstack().plot(kind='bar',figsize=(15,6))","50c31660":"fig, (ax1, ax2) = plt.subplots(2, 1, sharex=True)\nevents.groupby(['Year', 'Sex'])[['Height', 'Weight']].mean().unstack().plot(ax=ax1)\nax1.set_title('Average Height and Weight of Sportsmen\/women')\nevents.groupby(['Year', 'Sex'])['Age'].mean().unstack().plot(ax=ax2,figsize=(15,10))\nax1.set_title('Average Age of Sportsmen\/women')","3169fc7e":"#Here is the exact numbers of age difference in the last five OG\nevents.groupby(['Year', 'Sex'])['Age'].mean().unstack().tail()","32c49fbc":"grouped_df = events.groupby('Year')[['Height', 'Weight', 'Age']].count()","b530d7d4":"grouped_df.head(3)","548d4aa2":"attendees = events['Year'].value_counts().sort_index()\nprint('The Total Attendees from 1896 to 2016 in the List\/Array:')\nattendees.values","bda42e80":"grouped_df['Total Attendees'] = attendees.values\ngrouped_df.head()","a3186294":"grouped_df[['Height', 'Weight', 'Total Attendees']].plot(figsize=(15,5), \n          title = 'Number of Existing Height and Weight vs Total Number of Olympic participants')","5dfd7f49":"grouped_df[['Age', 'Total Attendees']].plot(figsize=(15,5))","17b46ca5":"grouped_df['Height non-NA'] = grouped_df['Height'] \/ grouped_df['Total Attendees']\ngrouped_df['Weight non-NA'] = grouped_df['Weight'] \/ grouped_df['Total Attendees']\ngrouped_df['Age non-NA'] = grouped_df['Age'] \/ grouped_df['Total Attendees']\ngrouped_df.head(3)","45498960":"grouped_df[['Weight non-NA', 'Height non-NA', 'Age non-NA']].plot(figsize=(15,8), marker='o', alpha = .3, \n                                                 xticks = range(1896, 2018, 6), \n                                                 title='Proportion\/Percentage of Non-missing Values for Weight, Height & Age')","5d159a25":"events_60up = events.loc[events['Year']>=1960, :]\nevents_60up.head(3)","d951d121":"events_60up.info()","ca425b4c":"height_grouped = events_60up.groupby(['Sport', 'Sex'])['Height'].mean().unstack()\nheight_grouped.sort_values(by='M', ascending=False).head()","97922cdb":"height_grouped.sort_values(by='M').plot(kind='barh', figsize=(15,12))","532937d3":"#Practice how to grab a key for getting a value from python dictionary\n#Assign height of sportswomen to a variable\nf_height = height_grouped.to_dict()['F']\n#what is the average value of female basketball player?\nf_height['Basketball']","d28cfa51":"#set a condition which returns all NaN values for rows of female basketball and column of Height\nevents_60up.loc[(events_60up['Height'].isnull()) & (events_60up['Sex'] == 'F') & (events_60up['Sport'] == 'Basketball'), 'Height'] ","c2076dcd":"#How to iterate through to get pair of keys and values from python dictionary \nfor k,v in f_height.items():\n    print(k)","cd38a000":"#Plug an average hight of sportswomen for each sport (type).\ndef f_height_fixer(df):\n    for k,v in f_height.items():\n        df.loc[(df['Height'].isnull()) & (df['Sex'] == 'F') & (df['Sport'] == str(k)), 'Height'] = v\n    return df\n#Do we have reasonable numbers of missing values for the height column? \nf_height_fixer(events_60up).info()        ","458e884d":"# pandas' .info method tells us that we have more non-null values \n# but lets make sure that it has worked by taking a step further\nevents_60up.loc[(events_60up['Sex'] == 'F'), 'Height'].isnull().sum()","f0b51c2f":"events_60up.loc[(events_60up['Sex'] == 'M'), 'Height'].isnull().sum()","f64ca5a6":"m_height = height_grouped.to_dict()['M']\ndef m_height_fixer(df):\n    for k,v in m_height.items():\n        df.loc[(df['Height'].isnull()) & (df['Sex'] == 'M') & (df['Sport'] == str(k)), 'Height'] = v\n    return df\nm_height_fixer(events_60up).info() ","2e84af73":"events_60up['Height'].unique()","e8ec49f4":"events_60up['Height'] = (round(events_60up['Height'])).astype(int)\nevents_60up['Height'].unique()","368e0fa9":"#Let's see the distribution of heights for males and females\nevents_60up['Height'].hist(by=events_60up['Sex'],figsize=(12,6),sharey=True, bins=25)","bff1e008":"### Part Two - Take Actions on the missing Data","29748979":"#### Does each column have an appropriate data type and which columns' missing data need to be fixed?","f851dd6a":"## I hope this \"tutorial\" was useful! If you are interested on doing further analysis, you have to answer the following bonus questions:\n### - Do you think using sex and sport columns give us the most trustworthy results for missing values of height? Try to answer it by visualizing and using a mixture of other columns (i.e. sex and country; or sport, sex and year; or whatever combination you think suits based on plotting some graphs, grouping and applying some statistics) \n### - Age and Weight columns missing data points were not addressed. Try to solve the puzzle on your own by using various pandas and python methods \n\n## If you liked my analysis, please upvote it. Also, please share your thoughts on the comment section below!","9785f1de":"#### The function has fixed NaNs by replacing them with meaningful statistical means of sport types. Lets do the same thing for males","819ca313":"#### The weight and height of olympic sport-players didn't fluctuate much but their ages did (especially until 1950s, the age drastically changed from an olympic game to game). Probably, it is because of having very few sportsmen and women in early years of OG. Since 1910, females on average tend to be younger than males but the gap has been shrinking steadily since 80s  ","fea99e7c":"#### Olympic players' average height varies based on thier gender and playing sport type. Therefore, we are going to fill missing data points by mapping to their height averages of sport type and gender. ","3f387208":"# Handling Missing Data","febf78e4":"#### In early years of OG, there were way too many missing values of olympic players' height and weight. Let's analyze the proportion of it by ploting one more line-chart","2720d99a":"#### For each gender with their playing sport type create a df of their average heights and plot it on a bar chart","9ae67343":"## In this short tutorial, I will attemp to illustrate how to handle missing data using some \"advanced\" techniques. I am not going to implement pandas' build in methods (such \".interpolate\" or \".fillna\"). Hope you will find it useful!","b07c826e":"#### Now the Height column has floating numbers which needs to be rounded","f317415f":"### First, Let's import pandas library and check which columns need to be taken care of","08de850f":"#### For Medal column, we need to convert all of the NaNs into \"No Medal\" or just string of zeros. The graph shows how the bronze, silver and gold medals were distributed in each Olympic Games. Also, starting from 1992, the winter and summer olympic games were held in different years ","a859c145":"#### There are also other ways of joining pandas series\/df objects together - the common use cases are \".concat\", \".join\", \".merge\" or \".append\" methods","7ffdd69c":"events_60up['Medal'].fillna(value='No Medal', inplace=True)","f2e76e98":"#### Until 1960, the players height and weight were unbearably low for data analysis (especially, for statistical analysis).","7010e5aa":"#### If we pretend that height and weight are the most important part of our data or statistical analysis, then we can simply drop the \"bad\" data points. ","0ce59ce8":"#### After retrieving the selected rows and column, we can just put an \"equal\" sign to change the NaN values to 182 but doing it one by one (for each sport) is too slow; therefore, let's write a function which loops through each sport and then assigns the average values for each sport ","819ee6e9":"### Part One - Explore and Understand by Visualize the missing Data","72320659":"#### Change the NaN values to \"No Medal\" for the Medals column by running the following code:"}}