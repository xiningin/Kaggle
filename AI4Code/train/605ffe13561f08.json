{"cell_type":{"772d185e":"code","f487633e":"code","883379bd":"code","90497b70":"code","8a8f0303":"code","8ecb695d":"code","c910f713":"code","6a311f3c":"code","510a1190":"code","69b170bc":"code","bc91d608":"code","2da63bf2":"code","72d7bc24":"code","c548e993":"code","b430bb78":"code","4893cbca":"code","4ca5770c":"code","06adc786":"code","a2efb0d2":"code","529e7379":"markdown","2a13f8e8":"markdown","4f508bec":"markdown","4fccfa52":"markdown","0d1e16ad":"markdown","74e25b5d":"markdown","dc9b0e1d":"markdown","03ed858f":"markdown","43d4fb25":"markdown","db6cc722":"markdown","7477c09f":"markdown","489d4b48":"markdown","9455d19a":"markdown","e96d67fa":"markdown","772ca57f":"markdown","71d0ddda":"markdown","d21cb187":"markdown","dfb25e0e":"markdown","3dcfa8a3":"markdown","05e9263a":"markdown","b6b7e00d":"markdown","87f3c600":"markdown","628fad93":"markdown","7fdffc3a":"markdown","58432cc4":"markdown","92846b5d":"markdown","d5057b1a":"markdown","92bf6906":"markdown","efadebb1":"markdown","375fae8c":"markdown","a342c309":"markdown","73acd689":"markdown","63e2fa20":"markdown","537d9ea9":"markdown","d166a5e3":"markdown","9768d4f9":"markdown","9712d64c":"markdown","05bc97d6":"markdown","40f76b94":"markdown","119ece29":"markdown","2277eea9":"markdown","061a7e80":"markdown","891dad51":"markdown","81b97d92":"markdown","d52ebe61":"markdown","f7a0dbce":"markdown","474a23e0":"markdown","f1f988a9":"markdown","1d441853":"markdown","97f1eb82":"markdown"},"source":{"772d185e":"import pandas as pd # create DataFrames\nimport numpy as np # working with arrays\nimport datetime # convert serial dates to datetime object","f487633e":"raw_data = pd.read_csv('..\/input\/airbnb_nyc_homes_raw_20180908.csv') # read raw csv file","883379bd":"[raw_data.columns.values[x] for x in [43,87,88]] # retrieve columns that raised a warning","90497b70":"raw_data.info() #metadata","8a8f0303":"pd.set_option('display.max_columns', 96) # enlarge display of DataFrame to show more columns\nraw_data.head(3) # head of DataFrame","8ecb695d":"raw_data.isna().sum()[raw_data.isna().sum() != 0] # columns that hold missing values","c910f713":"data = raw_data[[\n'host_id',\n'host_since',\n'host_is_superhost',\n'neighbourhood_cleansed',\n'neighbourhood_group_cleansed',\n'zipcode',\n'latitude',\n'longitude',\n'room_type',\n'bathrooms',\n'bedrooms',\n'beds',\n'price',\n'weekly_price',\n'monthly_price',\n'security_deposit',\n'cleaning_fee',\n'number_of_reviews',\n'review_scores_rating',\n'reviews_per_month',\n]].copy().reset_index() # extracted columns to new DataFrame\n\ndata = data.rename(columns={'index':'id', \n                            'host_is_superhost':'superhost', \n                            'neighbourhood_cleansed':'neighborhood', \n                            'neighbourhood_group_cleansed': 'city'})\n # update column names","6a311f3c":"data.dtypes # retrieve datatypes","510a1190":"data.zipcode = pd.to_numeric(data.zipcode, errors='coerce',\n                             downcast='integer') \n# changing zipcode to numeric. invalid parsing will be set as NaN.","69b170bc":"data.isna().sum()[data.isna().sum() != 0] \n# retrieve all columns that have missing values","bc91d608":"data = data.dropna(subset=['host_since','superhost','zipcode']) \n# create clean dataset","2da63bf2":"def serial_to_datetime(sdate):\n# conversion formula\n    temp = datetime.datetime(1900, 1, 1)\n    delta = datetime.timedelta(days=sdate)\n    return temp+delta\n\ndata['host_since'] = data['host_since'].apply(serial_to_datetime) \n# apply to all rows in host since column","72d7bc24":"data.zipcode = data.zipcode.astype(int) # change zip to an integer","c548e993":"data['city'] = data['city'].apply(\n    lambda x: \"New York\" if x == \"Manhattan\" else x) \n# change \"Manhattan\" to \"New York\"","b430bb78":"data.zipcode.loc[41368] = 11208 # reassign this zipcode because of a data entry order. Cypress Hill neighbourhood zip is 11208\n\ndata.zipcode.loc[30750] = 11367 # Kew Gardens Hills zipcode should be 11367, not 91766\n\ndata.zipcode.loc[35739] = 10036 # Hell's Kitchen zipcode should 10036, not 7093\n\ndata.zipcode.loc[[48316,48654]] = 10303 # Port Ivory zipcode should be 10303 not 7206\n\ndata.zipcode.loc[25165] = 10013 # SoHo zipcode should 10013, not 5340\n\ndata.zipcode.loc[39882] = 11207 # East New York zipcode should 11207, not 11954\n\ndata.neighborhood.loc[36027] = 'Howard Beach' # update to correct city","4893cbca":"data.to_csv('airbnb_nyc_cleaned_20180908.csv', encoding='utf-8', sep=',', index=False) \n# save cleaned dataset csv","4ca5770c":"data[data['neighborhood'].isin(\n    ['Westerleigh', 'Fort Wadsworth', 'Woodrow', 'Todt Hill', 'Tribeca'])].groupby(\n    ['neighborhood']).agg({'price': \"median\", 'id':'count'}).rename(\n    columns={'id': 'count of homes', 'price':'median price'}) \n# pull median price and count of top 5 neighborhoods.","06adc786":"grouped = data.groupby(['neighborhood']).agg({'price': \"median\", 'id':'count'})\ngrouped = grouped[grouped.id >= 10].groupby('neighborhood')['price'].median().sort_values(ascending=False)[:5] \n# pull top 5 neighborhoods by median price with at least 10 homes.\ngrouped","a2efb0d2":"data.groupby(['superhost'])['superhost'].count() \n# pull the count of homes from superhost. \n# 't' for True being super host and 'f' for False not being superhost.","529e7379":"## 1. Overview\nAirbnb is a popular platform for finding alternative places to stay for vacation. The platform features homes from all over the world. Homes from luxurious mansions in Southern California to treehouses in Bali. In this project, I will highlight the NYC listings using visualizations.\n\nThis project is broken into 2 parts: \n1.  In the first part, section 2, I will import and clean the raw data using Python.\n2. In the second part, I will create meaningful visualizations using Tableau. This will span from section 3 through section 4. \n\t* In section 3, we will see how price is distributed, where homes are distributed, and if the total space available has an affect on price. \n\t* In section 4, the visuals built will tells us how different types of host affect price.\n\nThe goal of this project is to:\n* Understand and highlight the Airbnb NYC home market.\n* Conduct an extensive exploratory data analysis. \n* Create story-telling visualizations to illustrate our findings.\n\nWe will ultimately learn:\n* What affects a listing's price.\n* Hot spot of listings. \n* The difference between aged hosts and newer host on the platform.\n* A distribution of the reviews of listings\n* And more. \n\nAlthough Python can handle both the cleaning and building of visuals through libraries such as Matplotlib or Seaborn, I am demonstrating the seamless connection between Python and Tableau. The two together make great for fast analytics and visualization.\n\nLet\u2019s get started.\n","2a13f8e8":"Let\u2019s see the count of homes of both groups.","4f508bec":"<img src=\"https:\/\/image.ibb.co\/k4Uo1L\/Age-of-Host-vs-Price.png\" alt=\"Age-of-Host-vs-Price\" border=\"0\" width=700 height=1000>","4fccfa52":"### 3.2 Where Exactly are Homes Distributed?\nLet us take deeper look at where the Airbnb homes are distributed.\nThe geographic heat map below shows exactly what part of the city holds the most Airbnb homes. As we have learned from the histogram, Brooklyn and Manhattan composes of the most homes in NYC. In the map below, this is shown by the saturated blue color. \n\nIt is important to point out that the part of Brooklyn that connects to Manhattan is where homes are more frequent in Brooklyn. The further away from Manhattan the Brooklyn Airbnb is, the more comparable that Brooklyn Airbnb home\u2019s frequency is to a Bronx and Staten Island home. ","0d1e16ad":"The datatypes are correct except for `host_since` and `zipcode`, which should be of type `datetime` and  `int`, respectively.\nTo convert `host_since` to a `datetime`, we must remove the missing values in the column. \n\nTo convert `zipcode` into an `int`, we have to first convert it from an `object` type to a numeric type. Second we drop any missing values. We finish the conversion using the `astype()` function.","74e25b5d":"### 2.4 Extracting the Necessary Columns\nIt is always necessary to remove all meaningless data and handle missing values as a preliminary step. Let's start by copying the necessary columns of this project to a new DataFrame.\n\nWe should keep in mind, the goals of the project is to draw insights about Airbnb NYC listings. So when we extract certain columns and data, it should have a significance.","dc9b0e1d":"### 2.3 A Glimpse at the Dataset\nI will pull the columns\u2019 metadata, a view of the head of the DataFrame, and all columns that hold missing values.","03ed858f":"With all missing values removed from `host_since` and `zipcode`, we can successfully convert the datatypes.\nThe `host_since` column is stored as a serial date which picks up as a float dataype. This serial format is normally used in MS Excel. To fix we will apply a formula to convert serial format to datetime object. ","43d4fb25":"Right away the raw dataset raises a non-fatal warning. It is a datatype warning. Columns 43, 87, 88 have mixed types. Let's investigate these columns before moving on.","db6cc722":"The `zipcode` column is stored as a `float` but zip-codes do not have decimals.","7477c09f":"# Exploring Airbnb NYC Listings Through Visuals with Python and Tableau\n[Shawn Rodgers](http:\/\/www.linkedin.com\/in\/srodgersnyc) - October 2018","489d4b48":"We have successfully imported a raw dataset, cleaned the dataset, and moved the static file to Tableau. Now, let\u2019s start describing the dataset.","9455d19a":"Briefly, in other words, Airbnb homes can easily be found at a price of \\$60 to \\$79 in Brooklyn. As prices increase, homes in Manhattan are much more ubiquitous. \n\nThe Bronx and Staten Island Airbnb homes barely contribute to the count of homes in NYC and are seldom above $160.","e96d67fa":"Proof proved. Now let\u2019s see what the top median prices are when there are at least 10 homes in the neighborhood.","772ca57f":"* 96 columns \n* 50,220 rows of data\n* 53 columns that hold missing values\n\nIn the next sub-section we will truncate the dataset.","71d0ddda":"## 4. Impact of Hosts\nIn this section we will explore through visuals what impact, if any, the effects of the type of host and reviews have on a listing.\n\nWe will start by seeing if the median price changes based on how long a host been active on Airbnb.","d21cb187":"<img src=\"https:\/\/image.ibb.co\/gY4cvf\/Total-Space-vs-Price.png\" alt=\"Total-Space-vs-Price\" border=\"0\" width=700 height=1000>","dfb25e0e":"### 3.3 Neighborhood Price Distribution \nWithin these boroughs are neighborhoods. Let\u2019s see how their prices compare. ","3dcfa8a3":"The weekly, monthly, security deposit, and cleaning fee columns are price options specified by each host. Some host may specify certain prices for those columns and some may not. We will leave these columns as is and not change it. If we were to change these prices to 0, then our analysis will be incorrect because 0 is a value that will impact the aggregate. We will leave the review columns unchanged too because some users may not get reviews.\n\nI will drop the missing values only in columns `host_since`, `superhost` and `zipcode` since these values are currently unobtainable and will not our analysis. ","05e9263a":"Columns extracted (21\/96):\n* id\n* host_id\n* host_since\n* superhost *(renamed from host_is_superhost)*\n* neighborhood *(renamed from neighbourhood_cleansed)*\n* city (renamed from neighbourhood_group_cleansed)*\n* zipcode\n* latitude\n* longitude\n* room_type\n* bathrooms\n* bedrooms\n* beds\n* price\n* weekly_price\n* monthly_price\n* security_deposit\n* cleaning_fee\n* number_of_reviews\n* review_scores_rating\n* reviews_per_month\n\nWorking with only the extracted will save us time and unnecessary work. ","b6b7e00d":"## Contents\n1. Overview\n2. Importing and Cleaning the Dataset\n3. Price DIstribution\n4. Impact of Hosts\n5. Wrapping Up","87f3c600":"## 5. Wrapping Up\nThank you for following along. I hoped you found this dataset both interesting and informative about Airbnb listings in NYC. Feel free to leave a comment. \n\n\u201cAlways continue to learn!\u201d - \n[Shawn Rodgers](http:\/\/www.linkedin.com\/in\/srodgersnyc)","628fad93":"### 2.1 Libraries\nImport the necessary modules.","7fdffc3a":"Let\u2019s view all missing values.","58432cc4":"### 4.3 Distribution on Reviews\nLastly, let\u2019s see how reviews of the listings are distributed. In the histogram below, we map out the count of reviews; the bins are sized 1. We see that reviews rating of 100 have the highest count by far, followed by reviews that received a rating of 98 then reviews that received a rating of 97. \n\nI think its worth pointing out the spike at a rating of 80. While this is not a confirmed theory, I believe the spike at 80 is because users default to ratings that end in the  number 0. We can also see a similar spike at 90, and also, perhaps why a rating of 100 is very high.","92846b5d":"### 4.1 New Host vs Veteran Host Prices","d5057b1a":"What we can draw about price and home distribution from simply the histogram and geographic heat map is abundant. Manhattan is the hot spot for Airbnb homes; it is the center of NYC. However, Manhattan homes are most expensive and to stay competitive, Airbnb homes in neighboring Brooklyn have lower prices.","92bf6906":"### 2.2 Importing and Storing Data\nThis dataset is pulled from [Inside Airbnb](http:\/\/insideairbnb.com\/get-the-data.html).\nInside Airbnb complies a monthly listing of Airbnb homes from around the world. I will be working with the NYC dataset 2018-09-08.","efadebb1":"**Key:**\n* Red - Manhattan\n* Orange - Brooklyn\n* Teal - Queens\n* Blue -  Bronx\n* Green - Staten Island","375fae8c":"In the line chart above, we see how the price changes from 2008 to 2018.\n\nThe downward shifting line is our regression line. It is showing us that newer host have lower prices than host that been active longer.\n\nHere is the line equation generated by Tableau:\n<br>Median Price = -0.0105959(Months of Host) + 553.183\n<br>R\u00b2 equals .31, which we learned earlier to be on the lower end of explanatory power. However, the p-value proves our linear model to be significant.","a342c309":"<img src=\"https:\/\/image.ibb.co\/hnxxvf\/Home-Distribution.png\" alt=\"Home-Distribution\" border=\"0\" width=700 height=1000>","73acd689":"### 2.6 Updating Values\nWe have successfully converted all columns to their proper datatype and dropped all missing values that are not needed. There are a few more values that needs to be fixed manually. \n\nChange `Manhattan` values  to `New York` in the `city` column.","63e2fa20":"### 3.4 More Space Higher Prices?\nIn the scatter chart below, we plot median price against the total space of an Airbnb home (which is a Tableau calculated field: sum of bed, bedroom and bathroom).","537d9ea9":"This distribution of reviews is very informative. At a glance we can draw that host and their home listings are well received by the Airbnb community. \n\nWe were also able to draw that there is very little difference in prices between super host and regular host although there are 5x more Airbnb listing by regular hosts. And for newer host, their prices are be lower compared to veteran hosts.","d166a5e3":"### 3.1 How is Price Distributed?\nThe histogram below shows the distribution of price and composition each city makes within that price. The info we can draw from this visual is that most hosts set their prices at \\$60 to \\$79. This info is drawn from the size of the bins, the tallest being \\$60 to \\$79. Most Airbnb homes in this bin are from Brooklyn.\n\nWe also see the histogram is skewed to the left \u2013 there is a higher frequency of homes below \\$100. However, homes exist much above that price. At prices above \\$100 we see Manhattan Airbnb homes surpass the count of homes from Brooklyn, which held the highest composition of homes at higher frequency (below \\$100). ","9768d4f9":"<img src=\"https:\/\/image.ibb.co\/f3nxvf\/Superhost-Pie-Chart.png\" alt=\"Superhost-Pie-Chart\" border=\"0\" width=700 height=1000>","9712d64c":"We see that there is 5x more non-superhost listings on Airbnb than there are of superhost listings.","05bc97d6":"### 4.2 Super Host vs. Regular Host\nAccording to Airbnb \u201cSuperhosts are experienced hosts who provide a shining example for other hosts, and extraordinary experiences for their guests.\u201c - [Superhost Explained Airbnb](https:\/\/www.airbnb.com\/help\/article\/828\/what-is-a-superhost)\n\nWith such a grand title like \u201cSuperhost\u201d, does one raise their price much higher?\n\nIn the pie chart below, we see an evenly spilt price between being a super host and not being a super host with the price charged being slightly higher for Superhost.","40f76b94":"### 2.5 Cleaning and Converting Values\nWith the extracted columns in place lets begin to handle missing values  and inaccurate datatypes columns.","119ece29":"The treemap above shows us the top 15 neighborhoods by median price. \n\nTop 5:\n1. Westerleigh, Staten Island \u2013 \\$801.50\n2. Fort Wadsworth, Staten Island \u2013 \\$750\n3. Woodrow, Staten Island \u2013 \\$462.50\n4. Todt, Staten Island \u2013 \\$429\n5. Tribeca, Manhattan \u2013 \\$270\n\nIt is very interesting seeing the 4 top neighborhoods of the 5 are from Staten Island. This is most likely because of the low count of the Airbnb homes in Staten Island. Let\u2019s quickly see if this true using Python.","2277eea9":"### 2.7 Saving our Results\nThe raw dataset that was originally imported has been reviewed and all the necessary information has been extracted and cleansed. The new object  `data` will be the workable DataFrame used to summarize the data and conduct an analysis. \n<br>In the following section we will: \n* Statistically describe the data \n* Create visuals to summarize the data\n* Highlight any trends and patterns\n\nAs of now, we can save our proper dataset as a CSV file and move it into other BI programs, such as Tableau or Excel, or more into a RDBMS and manage over a database connection. \n","061a7e80":"<img src=\"https:\/\/image.ibb.co\/eg4AFf\/Top-Neighborhoods-by-Price.png\" alt=\"Top-Neighborhoods-by-Price\" border=\"0\" width=700 height=1000>","891dad51":"<img src=\"https:\/\/image.ibb.co\/jLQHvf\/Price-Distribution.png\" alt=\"Price-Distribution\" border=\"0\">","81b97d92":"## 2. Importing and Cleaning the Dataset\nIn this section we will setup our data by importing the raw CSV file. We will also import all necessary modules. By end of this section, the data will be cleansed and ready for analysis and visuals and visual building.","d52ebe61":"We can see that columns `zipcode`, `license`, and `jurisdiction_names` have mixed data types. Before we fix these columns, let's take a look at the rest of the data for missing values and non-essential columns.","f7a0dbce":"## 3. Price Distribution\nIn this section, we will use visualizations to breakdown the pricing distribution of Airbnb NYC homes. Let\u2019s dive right into it.","474a23e0":"Updating `zipcode`  and `neighborhood` values.  (Data entry errors from the source)","f1f988a9":"A true sense of the top 5 neighborhoods by median price are:\n1. Tribeca, New York \u2013 \\$270\n2. NoHo, New York \u2013 \\$245\n3. Battery Park City, New York \u2013 \\$225\n4. Flatiron District, New York \u2013 \\$220\n5. Midtown, New York \u2013 \\$210","1d441853":"<img src=\"https:\/\/image.ibb.co\/gVyRo0\/Distribution-of-Reviews.png\" alt=\"Distribution-of-Reviews\" border=\"0\" width=700 height=1000>","97f1eb82":"We can see from the linear trend line (line of best fit) there is a slight increase in price as the total space increases. Before we conclude that price increases as total space increases, let\u2019s view the generated linear equation by Tableau. \n\nOur linear equation (y = mx + b) is:\n<br>Median Price = 36.01(Total Space) + 12.1185  \n<br>Where,\n* Median Price is our dependent variable (the value we expect) \n* \\$36.01 is our coefficient. For each unit increase in Total Space, there will be an increase of \\$36.01 to median price.\n* Total Space is our independent variable\n* \\$12.12 is the median price if Total Space was 0. \n\nR\u00b2 tells us how much total variation in price is explained by Total Space. It is a value 0 to 1. The closer R\u00b2 is to 1, the more we can attribute a change in price is attributed to Total Space. In this case of our linear model, R\u00b2 is very low at .02. We can conclude that a change in Total Space does not have a strong impact on price.\n\nOn the other, this model is significant at a p-value less than .05. The low p-value is telling us that there is a linear relationship between median price and Total Space.\n\nIn as little as 4 visuals we were able to see and understand much about Airbnb pricing in NYC. In the next section we will see how host and their home reviews have an impact on an Airbnb listing."}}