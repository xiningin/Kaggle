{"cell_type":{"4c2819a4":"code","f3c7e2ea":"code","c5d6d185":"code","ef0fcb77":"code","5c11d422":"markdown","4753a306":"markdown","a673aa2b":"markdown","be2d3930":"markdown"},"source":{"4c2819a4":"!dpkg -i --force-depends \/kaggle\/input\/pyvips-local\/libvips-apt\/libvips-apt\/*.deb >\/dev\/null 2>&1\n!pip install \/kaggle\/input\/pyvips-local\/cffi-1.14.4-cp37-cp37m-manylinux1_x86_64.whl\n!pip install \/kaggle\/input\/pyvips-local\/pycparser-2.20-py2.py3-none-any.whl\n!pip install \/kaggle\/input\/pyvips-local\/pyvips-2.1.13-py2.py3-none-any.whl","f3c7e2ea":"import pyvips\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nformat_to_dtype = {\n    'uchar': np.uint8,\n    'char': np.int8,\n    'ushort': np.uint16,\n    'short': np.int16,\n    'uint': np.uint32,\n    'int': np.int32,\n    'float': np.float32,\n    'double': np.float64,\n    'complex': np.complex64,\n    'dpcomplex': np.complex128,\n}","c5d6d185":"%%timeit\nfor i in range(5):\n    image = pyvips.Image.new_from_file('..\/input\/hubmap-kidney-segmentation\/train\/0486052bb.tiff')\n    patch = image.crop(i*2048, i*2048, 2048, 2048)\n\n    np_img = np.ndarray(buffer=patch.write_to_memory(),\n                       dtype=format_to_dtype[patch.format],\n                       shape=[patch.height, patch.width, patch.bands])","ef0fcb77":"image = pyvips.Image.new_from_file('..\/input\/hubmap-kidney-segmentation\/train\/0486052bb.tiff')\npatch = image.crop(10000, 10000, 2048, 2048)\n\nnp_img = np.ndarray(buffer=patch.write_to_memory(),\n                   dtype=format_to_dtype[patch.format],\n                   shape=[patch.height, patch.width, patch.bands])\nplt.imshow(np_img)","5c11d422":"# load region","4753a306":"# Install Pyvips without Internet\n\n- Original: https:\/\/www.kaggle.com\/hirune924\/fast-image-region-loading-using-pyvips\n  - Thanks for @hirune924 !!\n- Install needs about 5 minutes","a673aa2b":"# Import libraries","be2d3930":"# Enjoy this competition !!"}}