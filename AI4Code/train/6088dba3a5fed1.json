{"cell_type":{"69ee05ad":"code","1d39751e":"code","8287944d":"code","f0f7cfb8":"code","fd49b3b7":"code","dc18171e":"code","55698bcd":"code","b986bae4":"code","c8120631":"code","7b64e1fd":"code","b0b9bde9":"code","0755a4e8":"code","7b53a215":"code","7dc0362b":"code","b0e451d7":"code","71e06600":"code","2c213f4d":"code","67ffae65":"code","d8181329":"code","7a42522c":"code","1507e668":"code","77fffc3b":"code","cee09c50":"code","a2a08aa8":"code","18fd9ee2":"code","2a9faad3":"code","5f8dfec2":"code","9b82850f":"code","701c2279":"code","12978cee":"code","3229d447":"code","2982ed17":"code","ae078e79":"code","d071518f":"code","ea4246de":"code","05879116":"code","df828f9b":"code","de80d01b":"code","4d1548e5":"code","c769cb39":"code","dce0ce63":"code","92d594af":"code","bc0036d9":"code","777b03c4":"code","6988c012":"code","52d3a000":"code","0f7a7e35":"code","1a8fc87c":"code","2aaf6f24":"code","19b2b646":"code","e2d42181":"code","59d6cbf0":"code","94fdca7b":"code","9013f422":"code","33c124b8":"code","5c9ff984":"code","88572e11":"code","2d7d3ac9":"code","1f35832d":"code","90170b05":"code","a42d1298":"code","7af9dca7":"code","891bfd0c":"code","d96684f9":"code","ccae1684":"code","96a7a3dc":"code","9027a9b2":"code","09d1fab1":"code","4f86f3b4":"code","d9a724b0":"code","2d51ba82":"code","8ada7cc8":"code","083a502e":"code","f7cd47e8":"code","e4b8acf4":"code","ac373327":"markdown","535eb602":"markdown","6fcd51c5":"markdown","3e47b2be":"markdown","48e2498f":"markdown","15a9122c":"markdown","2e28044e":"markdown","16b0d821":"markdown","d0f0aaca":"markdown","07c56247":"markdown","cbbddaa6":"markdown","e6386cc9":"markdown","912cf712":"markdown","370a47fb":"markdown","36937e56":"markdown","ed0eeea6":"markdown","b00a5ab0":"markdown","0e61027b":"markdown","e6feb66a":"markdown","e6f1fa04":"markdown","b4ec1245":"markdown","546bec02":"markdown","43d4dcd0":"markdown","2667b1bd":"markdown","2472abc7":"markdown","30374597":"markdown","e6cc6b8a":"markdown","0e8bb31b":"markdown","73cf743b":"markdown","a6b2b449":"markdown","4aba9e9e":"markdown","af137c04":"markdown","dc9dbd83":"markdown","9df2856b":"markdown","6a068320":"markdown","2def6a70":"markdown","bc61021e":"markdown","f57f3169":"markdown","7f9067c9":"markdown","784cd639":"markdown","384e7b06":"markdown","acff637e":"markdown","e04c0418":"markdown","4fff3946":"markdown","71d609a0":"markdown","dad80c6f":"markdown","a49cad61":"markdown","8c29bbf0":"markdown","0612c438":"markdown","39519f3c":"markdown","bcafe0c3":"markdown","f912e57e":"markdown","ab36c4b4":"markdown","eb3e196b":"markdown","992385e3":"markdown","dcabc781":"markdown","dd7325fd":"markdown","acc6367e":"markdown","2bb0a64d":"markdown","1a6a1683":"markdown","41b078db":"markdown","91439886":"markdown","7ff742f6":"markdown","d9b05629":"markdown","b46614a0":"markdown","888b4924":"markdown","95bc0f36":"markdown","9b48206f":"markdown","f36b18ea":"markdown","0ea21d24":"markdown","fd46c6c3":"markdown","7882988a":"markdown","64789bcb":"markdown","aa0c87ba":"markdown","5e39e232":"markdown","2b55d0b8":"markdown","fc5991f2":"markdown","49c836b9":"markdown","a102a482":"markdown","20c07345":"markdown","c460f5fd":"markdown","dadd6a35":"markdown","22822cbd":"markdown","57251158":"markdown","8761be5f":"markdown","6f80ab3b":"markdown","06194cd6":"markdown","2f57b026":"markdown","7635abde":"markdown","b4fc3496":"markdown","6c93485d":"markdown","d6d762bc":"markdown","3a0862d8":"markdown","7cecdece":"markdown","ab5137fe":"markdown","c5ba706d":"markdown","8f242928":"markdown","2ba2ae05":"markdown"},"source":{"69ee05ad":"import numpy as np\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\nimport seaborn as sns\r\n\r\n%matplotlib inline\r\nsns.set_theme()","1d39751e":"df = pd.read_csv('..\/input\/noshowappointments\/KaggleV2-May-2016.csv')\r\ndf.head()","8287944d":"df[['ScheduledDay', 'AppointmentDay']].head(20)","f0f7cfb8":"df.info()","fd49b3b7":"df.describe()","dc18171e":"df['Age'].value_counts().loc[-1]","55698bcd":"df['Handcap'].unique()","b986bae4":"df.duplicated().any()","c8120631":"df.rename(columns={'ScheduledDay':'ScheduledDate', 'AppointmentDay':'AppointmentDate', 'No-show':'No_show'}, inplace=True)","7b64e1fd":"df.rename(columns=lambda x: x.lower(), inplace=True)\r\ndf.columns","b0b9bde9":"df[['scheduleddate', 'appointmentdate']] = pd.to_datetime(df[['scheduleddate', 'appointmentdate']].stack()).unstack()\r\ndf[['scheduleddate', 'appointmentdate']].dtypes","0755a4e8":"df[['scholarship', 'hipertension', 'diabetes', 'alcoholism', 'handcap', 'sms_received']] = df[['scholarship', 'hipertension', 'diabetes',\r\n                                                                                               'alcoholism', 'handcap', 'sms_received']].astype(bool)\r\ndf[['scholarship', 'hipertension', 'diabetes', 'alcoholism', 'handcap', 'sms_received']].dtypes","7b53a215":"df['no_show'].replace(['Yes', 'No'], [True, False], inplace=True)\r\ndf['no_show'].dtype","7dc0362b":"df.info()","b0e451d7":"index = df.query('age == -1').index\r\ndf.drop(index, inplace=True)\r\ndf['age'].astype(int)\r\ndf['age'].min()\r\n","71e06600":"df['scheduleddate'] = pd.to_datetime(df['scheduleddate'].dt.date)\r\ndf['appointmentdate'] = pd.to_datetime(df['appointmentdate'].dt.date)","2c213f4d":"\r\ndf[['scheduleddate', 'appointmentdate']]","67ffae65":"df['patientid'].duplicated().sum()","d8181329":"patient_info_df = df.drop_duplicates('patientid')[['patientid', 'gender', 'neighbourhood', 'scholarship', 'hipertension', 'diabetes', 'alcoholism', 'handcap']]\r\npatient_info_df","7a42522c":"patient_info_df['neighbourhood'].nunique()","1507e668":"patient_info_df['neighbourhood'].mode()","77fffc3b":"neighborhood = patient_info_df['neighbourhood'].value_counts().iloc[:5]","cee09c50":"plt.figure(figsize=(15,8))\r\nbar1 = plt.bar([1,2,3,4,5], neighborhood.values, tick_label=neighborhood.index)\r\nfor rect in bar1:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.title('Neighborhoods that most patients come from')\r\nplt.xlabel('The most popular 5 neighborhoods')\r\nplt.ylabel('Number of Patients');\r\nneighborhood","a2a08aa8":"neighbourhood = patient_info_df.query('scholarship')['neighbourhood']\r\nneighbourhood.nunique()","18fd9ee2":"neighbourhood = neighbourhood.value_counts().iloc[:5]\r\nneighbourhood.index","2a9faad3":"plt.figure(figsize=(15,8))\r\nbar1 = plt.bar([1,2,3,4,5], neighbourhood.values, tick_label=neighbourhood.index)\r\nfor rect in bar1:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.title('Neighborhoods that most poor patients come from')\r\nplt.xlabel('The most popular 5 neighborhoods')\r\nplt.ylabel('Number of Patients');\r\nneighbourhood","5f8dfec2":"neighbourhoods = patient_info_df.query('not scholarship')['neighbourhood'].value_counts().iloc[:5]","9b82850f":"plt.figure(figsize=(15,8))\r\nbar1 = plt.bar([1,2,3,4,5], neighbourhoods.values, tick_label=neighbourhoods.index)\r\nfor rect in bar1:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.title('Neighborhoods that most poor patients come from')\r\nplt.xlabel('The most popular 5 neighborhoods')\r\nplt.ylabel('Number of Patients');\r\nneighbourhoods","701c2279":"age = df['age']","12978cee":"# Right skewed\r\nplt.figure(figsize=(15,8))\r\nplt.hist(age, 12)\r\nplt.title('Counts of Ages')\r\nplt.xlabel('Age');","3229d447":"hipertension = patient_info_df['hipertension'].sum()\r\ndiabetes = patient_info_df['diabetes'].sum()\r\nalcoholism = patient_info_df['alcoholism'].sum()\r\nhandcap = patient_info_df['handcap'].sum()","2982ed17":"plt.figure(figsize=(15,8))\r\nplt.bar([1, 2, 3, 4], [hipertension, diabetes, alcoholism, handcap], tick_label=['Hipertension', 'Diabetes', 'Alcoholism', 'Handcap'])\r\nplt.title('Common Diseases')\r\nplt.xlabel('Disease')\r\nplt.ylabel('Number of patients');\r\nprint('Hipertension', hipertension, '\\nDiabetes', diabetes, '\\nAlcoholism', alcoholism, '\\nHandcap', handcap)","ae078e79":"schedule = df['appointmentdate']\r\nattend = df.query('not no_show')['appointmentdate']","d071518f":"plt.figure(figsize=(15,8))\r\nplt.hist(schedule, label='Number of scheduled appointments')\r\nplt.hist(attend, label='Show patients')\r\nplt.title('Total Number of Patients that should have attended and Total Number of Patients that actually attended')\r\nplt.xlabel('Date')\r\nplt.ylabel('Number of patients')\r\nplt.legend();","ea4246de":"attendance = 100 - (df.groupby('appointmentdate')['no_show'].mean()*100)\r\navg = attendance.mean()\r\navg","05879116":"plt.figure(figsize=(15,8))\r\nplt.plot(attendance, label='Percentage of attendance each day')\r\nplt.axhline(avg, linestyle=':', label='Average percentage of attendance')\r\nplt.title('The Number of Attendance of the Number of Scheduled Appointments')\r\nplt.xlabel('Date')\r\nplt.ylabel('Percentage of attendance')\r\nplt.legend();\r\nattendance.describe()","df828f9b":"schedule = df['scheduleddate'].sort_values().value_counts(sort=False)[39:]\r\navg = schedule.mean()\r\navg","de80d01b":"plt.figure(figsize=(15,8))\r\nplt.plot(schedule, label='Number of people scheduling')\r\nplt.axhline(avg, label='Average number of people scheduling daily', linestyle=':')\r\nplt.title('Number of People Scheduling Daily')\r\nplt.xlabel('Date')\r\nplt.ylabel('Number of schedules')\r\nplt.legend();\r\nschedule.describe()","4d1548e5":"def mean_patients_each_day(column_name):\r\n    \"\"\"Calculate the mean number of schedules or appointments in each day\r\n\r\n       Inputs:\r\n            column_name(str) : The name of the column ('scheduleddate' \/ 'appointmentdate') \r\n\r\n       Returns:\r\n            days(list) : The day names of the week\r\n            avg_patients(list) : the average number of patients each day \r\n    \"\"\"\r\n    day_name = df[column_name].dt.day_name()\r\n    days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\r\n    avg_patients = [\r\n        df[day_name == day][column_name]\r\n        .value_counts()\r\n        .mean()\r\n        for day in days\r\n    ]\r\n    return days, avg_patients","c769cb39":"days, height = mean_patients_each_day('scheduleddate')\r\n# Replacing the NaN with 0 to make the bar chart look good\r\nheight[-1] = 0","dce0ce63":"plt.figure(figsize=(15,8))\r\nbar1 = plt.bar(np.arange(len(days)), height, tick_label=days)\r\nfor rect in bar1:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.title('Number of patients scheduling appointments through the week')\r\nplt.xlabel('Day')\r\nplt.ylabel('Number of schedules');","92d594af":"days, height = mean_patients_each_day('appointmentdate')\r\n# Replacing the NaN with 0 to make the graph look good\r\nheight[-1] = 0","bc0036d9":"plt.figure(figsize=(15,8))\r\nbar1 = plt.bar(np.arange(len(days)), height, tick_label=days)\r\nfor rect in bar1:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.title('Number of appointments throught the week')\r\nplt.xlabel('Day')\r\nplt.ylabel('Number of appointments');","777b03c4":"df['duration'] = (df['appointmentdate'] - df['scheduleddate']).dt.days.astype(int)","6988c012":"df['duration'].describe()","52d3a000":"df.query('duration < 0')['duration']","0f7a7e35":"index = df.query('duration < 0').index\r\ndf.drop(index, inplace=True)\r\ndf.query('duration < 0')","1a8fc87c":"df['duration'].describe()","2aaf6f24":"frequency = df[df['patientid'].duplicated(keep=False)].groupby('patientid')['scheduleddate'].diff()","19b2b646":"frequency.dropna(inplace=True)\r\navg_frequency = frequency.mean()\r\navg_frequency","e2d42181":"diseases = ['hipertension', 'diabetes', 'alcoholism', 'handcap']\r\ngender_effect = df.groupby('gender')[diseases].mean()*100","59d6cbf0":"plt.figure(figsize=(15, 8))\r\nplt.bar(np.arange(4), gender_effect.loc['M'], 0.4, label='Male', color='blue', tick_label=gender_effect.columns, align='edge')\r\nplt.bar(np.arange(4)+0.4, gender_effect.loc['F'], 0.4, label='Female', color='red', tick_label=gender_effect.columns, align='edge')\r\nplt.title('Effect of gender on health')\r\nplt.xlabel('Disease')\r\nplt.ylabel('Percentage of patients')\r\nplt.legend();\r\ngender_effect","94fdca7b":"poverty_effect = df.groupby('scholarship')[diseases].sum()\r\nawarded = df['scholarship'].sum()\r\nno_award = df.query('not scholarship')['scholarship'].count()\r\npoverty_effect.loc[False] = (poverty_effect.loc[False]\/no_award)*100\r\npoverty_effect.loc[True] = (poverty_effect.loc[True]\/awarded)*100","9013f422":"plt.figure(figsize=(15,8))\r\nplt.bar(np.arange(4), poverty_effect.loc[False], width=0.4, tick_label=poverty_effect.columns, label='Not awarded a scholarship', color='green', align='edge')\r\nplt.bar(np.arange(4)+0.4, poverty_effect.loc[True], width=0.4, tick_label=poverty_effect.columns, label='Awarded a scholarship', color='brown', align='edge')\r\nplt.title('Effect of poverty on health')\r\nplt.xlabel('Disease')\r\nplt.ylabel('Percentage of patients')\r\nplt.legend();\r\npoverty_effect","33c124b8":"df['age_stages'] = pd.cut(df['age'], [-1,3,12,18,40,df['age'].max()], labels=['Toddler', 'Kid', 'Teen', 'Adult', 'Elder'])","5c9ff984":"age_effect = df.groupby('age_stages')[diseases].sum()","88572e11":"fraction_increase = (age_effect.iloc[-1] - age_effect.iloc[:4].sum()) \/ age_effect.iloc[:4].sum()\r\npercentage_increase = fraction_increase*100\r\npercentage_increase.mean()","2d7d3ac9":"plt.figure(figsize=(30,8))\r\nbar1 = plt.bar(np.arange(4)-0.2, age_effect.loc['Toddler'], 0.1, tick_label=diseases, label='Toddler (0-5)')\r\nbar2 = plt.bar(np.arange(4)-0.1, age_effect.loc['Kid'], 0.1, tick_label=diseases, label='Kid (6-12)')\r\nbar4 = plt.bar(np.arange(4)+0.1, age_effect.loc['Adult'], 0.1, tick_label=diseases, label='Adult (19-39)')\r\nbar5 = plt.bar(np.arange(4)+0.2, age_effect.loc['Elder'], 0.1, tick_label=diseases, label='Elder (>40)')\r\nbar3 = plt.bar(np.arange(4), age_effect.loc['Teen'], 0.1, tick_label=diseases, label='Teen (13-18)')\r\nfor rect in bar1 + bar2 + bar3 + bar4 + bar5:\r\n    height = rect.get_height()\r\n    plt.text(rect.get_x() + rect.get_width() \/ 2.0, height, f'{height:.0f}', ha='center', va='bottom')\r\nplt.xlabel('Disease')\r\nplt.ylabel('number of patients')\r\nplt.legend();\r\nage_effect","1f35832d":"neighbourhood_disease = df.groupby('neighbourhood')[diseases].sum()\r\nprint('The neighbourhood with the most hipertension patients is {}'.format(neighbourhood_disease['hipertension'].sort_values().index[-1]))\r\nprint('The neighbourhood with the most diabetic patients is {}'.format(neighbourhood_disease['diabetes'].sort_values().index[-1]))\r\nprint('The neighbourhood with the most alcoholism is {}'.format(neighbourhood_disease['alcoholism'].sort_values().index[-1]))\r\nprint('The neighbourhood with the most handcap patients is {}'.format(neighbourhood_disease['handcap'].sort_values().index[-1]))","90170b05":"df['scheduledday'] = df['scheduleddate'].dt.day_of_week\r\ndf['appointmentday'] = df['appointmentdate'].dt.day_of_week\r\nday_duration = df.groupby('scheduledday')['duration'].mean()\r\nday_duration.index = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']","a42d1298":"plt.figure(figsize=(40,8))\r\nday_duration.plot(kind='line', xlabel='Day of scheduling', ylabel='Days until the appointment', title='The Duration until The Appointment Day each Scheduling Day');\r\nday_duration","7af9dca7":"gender_show = df.groupby('gender')['no_show'].value_counts().unstack()\r\ngender_show.loc['F'] = (gender_show.loc['F'] \/ df['gender'].value_counts().loc['F'])*100\r\ngender_show.loc['M'] = (gender_show.loc['M'] \/ df['gender'].value_counts().loc['M'])*100\r\ngender_show\r\n","891bfd0c":"age_show = df.groupby('age_stages')['no_show'].value_counts().unstack()\r\nage_show.loc['Toddler'] = (age_show.loc['Toddler'] \/ age_show.loc['Toddler'].sum())*100\r\nage_show.loc['Kid'] = (age_show.loc['Kid'] \/ age_show.loc['Kid'].sum())*100\r\nage_show.loc['Teen'] = (age_show.loc['Teen'] \/ age_show.loc['Teen'].sum())*100\r\nage_show.loc['Adult'] = (age_show.loc['Adult'] \/ age_show.loc['Adult'].sum())*100\r\nage_show.loc['Elder'] = (age_show.loc['Elder'] \/ age_show.loc['Elder'].sum())*100\r\nage_show\r\n","d96684f9":"schedule_show = df.groupby('scheduledday')['no_show'].value_counts().unstack()\r\nschedule_show.iloc[0] = (schedule_show.iloc[0] \/ schedule_show.iloc[0].sum())*100\r\nschedule_show.iloc[1] = (schedule_show.iloc[1] \/ schedule_show.iloc[1].sum())*100\r\nschedule_show.iloc[2] = (schedule_show.iloc[2] \/ schedule_show.iloc[2].sum())*100\r\nschedule_show.iloc[3] = (schedule_show.iloc[3] \/ schedule_show.iloc[3].sum())*100\r\nschedule_show.iloc[4] = (schedule_show.iloc[4] \/ schedule_show.iloc[4].sum())*100\r\nschedule_show.iloc[5] = (schedule_show.iloc[5] \/ schedule_show.iloc[5].sum())*100\r\nschedule_show.index = days[:6]","ccae1684":"plt.figure(figsize=(20,8))\r\nplt.plot(schedule_show)\r\nplt.title('Percentage of patients showing up and not showing up each day')\r\nplt.xlabel('Day')\r\nplt.ylabel('Percentage of Patients')\r\nplt.legend(labels=['Show', 'No-show']);\r\nschedule_show","96a7a3dc":"appointment_show = df.groupby('appointmentday')['no_show'].value_counts().unstack()\r\nappointment_show.iloc[0] = (appointment_show.iloc[0] \/ appointment_show.iloc[0].sum())*100\r\nappointment_show.iloc[1] = (appointment_show.iloc[1] \/ appointment_show.iloc[1].sum())*100\r\nappointment_show.iloc[2] = (appointment_show.iloc[2] \/ appointment_show.iloc[2].sum())*100\r\nappointment_show.iloc[3] = (appointment_show.iloc[3] \/ appointment_show.iloc[3].sum())*100\r\nappointment_show.iloc[4] = (appointment_show.iloc[4] \/ appointment_show.iloc[4].sum())*100\r\nappointment_show.iloc[5] = (appointment_show.iloc[5] \/ appointment_show.iloc[5].sum())*100\r\nappointment_show.index = days[:6]\r\nappointment_show","9027a9b2":"duration_show = df.groupby('no_show')['duration'].mean()","09d1fab1":"plt.figure(figsize=(10,8))\r\nplt.bar([1,2], duration_show.values, tick_label=['Show', 'No-show'])\r\nplt.title('The average duration between schedule date and appointment date for show and no-show patients'.title())\r\nplt.ylabel('Average Duration');\r\nduration_show","4f86f3b4":"duration = df['duration']\r\nduration_sms_effect = df.query('@duration >= 15').groupby(['sms_received'])['no_show'].mean()*100\r\nduration_sms_effect","d9a724b0":"scholarship_show = df.groupby('scholarship')['no_show'].mean()*100","2d51ba82":"plt.figure(figsize=(10,8))\r\nplt.bar([1,2], scholarship_show.values, tick_label=['Not-awarded Scholarship', 'Awarded Scholarship'])\r\nplt.title('The percentage of no-show patients of awarded and non awarded scholarship patients'.title())\r\nplt.ylabel('Percentage of no-show patients');\r\nscholarship_show","8ada7cc8":"hipertension_show = df.groupby('hipertension')['no_show'].mean().loc[True]*100\r\ndiabetes_show = df.groupby('diabetes')['no_show'].mean().loc[True]*100\r\nalcoholism_show = df.groupby('alcoholism')['no_show'].mean().loc[True]*100\r\nhandcap_show = df.groupby('handcap')['no_show'].mean().loc[True]*100\r\nprint(hipertension_show, diabetes_show, alcoholism_show, handcap_show)","083a502e":"df.groupby('sms_received')['no_show'].mean()*100","f7cd47e8":"gass_show = df.groupby(['gender', 'scholarship', 'sms_received', 'age_stages'])['no_show'].mean().unstack()*100\r\ngass_show.plot(figsize=(20,8), ylabel='Percentage of no-show Patients');\r\ngass_show","e4b8acf4":"ssa_show = df.groupby(['scholarship', 'sms_received', 'age_stages'])['no_show'].mean().unstack()*100\r\nssa_show.plot(figsize=(20,8), ylabel='Percentage of no-show Patients');\r\nssa_show","ac373327":"Extracting only the top 5 neighbourhoods","535eb602":"### Research Question 1 (How does gender, poverty and age affect diabetes, alcoholism, handcap and hipertension?)\r\n\r\n_This information is important for medical research_","6fcd51c5":"**Being awarded a scholarship increases the chances of not showing up**","3e47b2be":"### Research Question 11 (What is the average duration between scheduling and the appointment?)\r\n\r\n_Calculating the duration between the schedule and the appointment because it is going to be helpful in determining the no-show patients._","48e2498f":"G.A.S.S. -> gender age SMS scholarship","15a9122c":"\r\n### General Properties","2e28044e":"### Medical Information","16b0d821":"**Patients with no scholarship contribute in more than 75% of the top neighbourhoods because the top 5 neighbourhoods are the same before and after filtering the data by scholarship.**","d0f0aaca":"**Strangely receiving an SMS overall increases the chances of not attending. There may be a problem with delivering the SMS to the patient of there is misleading data in the SMS**","07c56247":"### Research Question 3 (Is there a relation between the schedule date and duration until appointment?)\r\n\r\n_Determine which days patients tend to schedule an appointment with long duration_","cbbddaa6":"They are a few row so drop them","e6386cc9":"Create bins for age column to make the graph cleaner\r\n\r\nUsing -1 as the first bin because this number is not included","912cf712":"### Marketing information\r\n\r\n_All of this information can be used to determine in which neighbourhoods should the medical center publish advertisments and what products should they promote._\r\n","370a47fb":"### Research Question 6 (Total number of patients that should have attended and total number of patients that actually attended)\r\n\r\n_Inspecting whether there is a sudden drop in attendance or a pattern_","36937e56":"**Patients tend to schedule appointments with long durations on Tuesday, Friday and Saturday. This happens on Saturday because really low numbers schedule on Saturday and Sunday is off, so they are going to schedule an appointment at least with a 2 days duration**","ed0eeea6":"**Most of the patients live in Jardim Camburi, Maria Ortiz, Jardim Da Penha, Resistencia and Itarare.**\r\n","b00a5ab0":"**There is no relation between diseases and no-show as the average percentage of patients attending is 80%**\r\n","0e61027b":"#### Age","e6feb66a":"**When the duration increases, patients propably forgets the appointment date and do not attend.**","e6f1fa04":"##### Making sure all datatypes are correct","b4ec1245":"<a id='wrangling'><\/a>\r\n\r\n## Data Wrangling\r\n","546bec02":"### Research Question 2 (Neighbourhood with a common disease)\r\n\r\n_Determine which neighbourhoods has the highest amount of a disease_","43d4dcd0":"1. Not all the schedules were recorded for each date\r\n2. If the content of the SMS changes from one patient to another, adding the content of SMS to the dataframe would be advantageous.\r\n3. The period of  time in which all this information was recorded is short. It would be better if the the period of time of the records increases.\r\n4. Adding how long did the patient wait in the medical center to enter the appointment to the dataset. Sometime patients do not like waiting and leave and turn into no-show patients.\r\n5. Adding the prices of the medicine and the appointment to the dataset is very helpful. Finance is very important in answering many questions.\r\n6. Some schedule dates were switched with appointment dates.","2667b1bd":"##### Column names Lowercased for consistency","2472abc7":"### Research Question 2  (Where do most poor patients come from (Neighbourhood)?)\r\n\r\n_This information can be used to determine in which cities would the medical center publish advertisments_\r\n","30374597":"Filtering the dataframe by the patients that came more than once","e6cc6b8a":"Filtering data by the no_show column","0e8bb31b":"**Females tend to have hipertension and diabetes more and males tend to have alcoholism and handcap more**","73cf743b":"#### Duration between schedule date and appointment date","a6b2b449":"#### Age","4aba9e9e":"**There is no realtion between gender and no-show as the average percentage of patients attending is 80%**","af137c04":"**It is clear that recently the percentage of attendance has increased.**","dc9dbd83":"### Research Question 9 (What is the most common day of scheduling an appointment?)\r\n\r\n_Looking at the schedules per day to figure out the period where there is no calls at all and to determine on which days should the call center look out for large amounts of registers_","9df2856b":"##### Removing time information","6a068320":"It is hard to determine the average number of patients that schedule appointments daily because not all the schedules are listed. The recorded scheduled dates are the dates of registering the given appoinments, so there may have been schedules that registered appointments which were not within the range of the recorded appointments' dates. Roughly 2000 patients schedule daily. Patients tend to schedule appointments on Wednesday and Friday the most and very few patients schedule on Saturday. Appointments slightly decreases from Monday to Friday, but on Saturday the number of appointments decreases significantly. The medical center is closed on Sunday because there is no schedules and appointments on Sunday.\r\n\r\nApproximately the duration between schedule date and appointment date is 9 days. The duration is rarely greater than 14 days. If a patient is going to schedule an appointment again, the patient is will schedule every 5 days an appointment. Duration tends to increase when an appointments are scheduled on Tuesday, Friday and Saturday.\r\n\r\n#### No-show Factors\r\n\r\n_On average 80% of the total patients that scheduled an appointment show up._\r\n\r\n1. Teen patients are most likely to not show up and elder and toddler patients are most likely to show up.\r\n2. There is a big possibilty that patients that schedule on Saturday show up.\r\n3. When duration between schedule date and appointment date increases, the possibilty of not showing up increases. This is probably because patients forget their appointment date. Nevertheless, receiving an SMS decreases the chance of forgetting the appointment date, if the duration is long.\r\n4. However, it seems that there is a problem with the sms because, overall, patients that receive SMS do not tend to attend the appointment. Maybe SMS are not sent properly or the data in the SMS are incorrect.\r\n5. Being awarded a scholarship increases the chances of being a no-show patient. Perhaps poor families do not learn how important visiting a medical center is and they tend to follow primitive medicine.\r\n","2def6a70":"**It is obvious that a large amount of patients have hipertension. Patients also have diabetes, alcoholism and handcap respectively from highest to lowest. Thus it would be fruitful if a hipertension or diabetes product is promoted in the medical center**","bc61021e":"##### Convert date columns to datetime","f57f3169":"<a id='intro'><\/a>\r\n\r\n## Introduction\r\n\r\n### Brief\r\n\r\nMany patients schedule medical appointments that they do not show up to, thus usually more patients could have been placed in the qeue instead of the no-show patients, but this is not possible because whether a patient is a no-show or a show is determined too late. Wouldn't it be amazing to determine early enough whether the patient is attending or not, that appointments are scheduled with more patients. In this project data associated with the appointments scheduled in a medical center will be analysed. Particulary the variables that affect the attendance of the patients will be identified.\r\n\r\n### Questions\r\n\r\n#### Independant Variables\r\n\r\n1. Where do most patients come from (Neighbourhood)?\r\n2. Where do most poor patients come from (Neighbourhood)?\r\n3. Where do most non-awarded scholarship patients come from (Neighbourhood)?\r\n4. Common Age\r\n5. Common disease\r\n6. Total number of patients that should have attended and total number of patients that actually attended\r\n7. Average percentage of people that attend daily\r\n8. Number of people that schedule daily\r\n9. What is the most common day of scheduling an appointment?\r\n10. What is the most common day of an appointment?\r\n11. What is the average duration between scheduling and the appointment?\r\n12. Frequency of scheduling appointments\r\n\r\n#### Dependant Variables\r\n\r\n1. How does gender, poverty and age affect diabetes, alcoholism, handcap and hipertension?\r\n2. Neighbourhood with a common disease\r\n3. Is there a relation between the schedule date and duration until appointment?\r\n4. What variables are associated with the attendance of the patients?\r\n","7f9067c9":"<a id='conclusions'><\/a>\r\n\r\n## Conclusions\r\n","784cd639":"##### Day replaced with Date to be precise and replacing '-' with '_' just to look more pythonic","384e7b06":"Calculating the percentage as it is more reliable","acff637e":"# Project: Investigate a Dataset (Medical No-show Appointments)\r\n\r\n## Table of Contents\r\n\r\n- <a href=\"#intro\">Introduction<\/a>\r\n- <a href=\"#wrangling\">Data Wrangling<\/a>\r\n- <a href=\"#eda\">Exploratory Data Analysis<\/a>\r\n- <a href=\"#conclusions\">Conclusions<\/a>","e04c0418":"**Being not awarded a scholarship increases the chances of having hipertension, diabetes and handcap, but being awarded a scholarship increases the chances of having alcoholism**","4fff3946":"\r\n### Data Cleaning\r\n\r\n#### Columns\r\n\r\n- Make all column names lowercased to be consistent\r\n- Replace day with date in scheduleday and appointmentday columns to be precise\r\n\r\n#### Data Types\r\n\r\n- Convert scheduledate and appoinmentdate data type to datetime data\r\n- Convert any column that contains 1 and 0 data to boolean data\r\n- Convert No-show data to boolean data\r\n\r\n#### Data\r\n\r\n- Remove any row with a negative age\r\n- Replace any value larger than 1 in Handcap column with True\r\n- Remove time information in scheduled date and appointment date because it is missing from appointment date column\r\n","71d609a0":"**There is no clear pattern. It seems that roughly the same amount of patients are no-show.**","dad80c6f":"**Yup, each variable changes the percentage of no-show pateints as predicted above.**","a49cad61":"**There is no certain changes in the number of schedules daily, but there is a certain day or period where there is no schedules at all. Let's find out what is this day**","8c29bbf0":"Calculating how being an elder patient increases the chances of having these diseases","0612c438":"### Research Question 8 (Number of people that schedule daily)\r\n\r\n_This information is helpful for the call center of the medical center, since they are going to be ready for the number of calls and registers._","39519f3c":"### Research Question 4 (What variables are associated with the attendance of the patients?)\r\n\r\n_Predict which patients will not attend to allow more patients schedule an apppointment instead of them_","bcafe0c3":"## Limitations","f912e57e":"####  Appointment day","ab36c4b4":"**It is remarkable how being an elder increases the chances of having any of these diseases by a stunning 640%. As the patient gets older, the possibility of having one of these diseases increases**","eb3e196b":"Some neighbourhoods have very low number of scholarship residents which means some neighbourhoods are more expensive than other","992385e3":"**It seems that the number of poor patients is not that high. The highest neighbourhood only have 289 patients which is in comarison with Jardim Camburi is very low. Maybe the scholarship do not cover the prices of the medicine.**","dcabc781":"It seems that some schedule dates are switched with appointment dates and this problem results in negative duration. Let's fix it. ","dd7325fd":"#### Gender","acc6367e":"##### Convert No-show column to bool","2bb0a64d":"Thus drop any duplicates of patient id and create a dataframe of each patient's info where there is no more than one occurence of patient id\r\n\r\n_Age will not be included as it may change throughout the visits_","1a6a1683":"#### Scholarship","41b078db":"**Patients that have an appointment of Saturday tend to show up more, perhaps because these are special appointments.**","91439886":"### Research Question 12 (Frequency of scheduling appointments)\r\n\r\n_If a patient is required to visit the medical center again for checkup, this may be helpful as to predict when the patient will call again_ ","7ff742f6":"**There is no relation between appointment day and no-show as the average percentage of patients attending is 80%**","d9b05629":"##### Does Receiving an SMS solve thie problem of duration?","b46614a0":"**Approximately the patient will call after 5 days to schedule another appointment**","888b4924":"### Scheduling and Attendance Information","95bc0f36":"### Research Question 5 (Common disease)\r\n\r\n_This information can be used to determine in which cities would the medical center publish advertisments_\r\n","9b48206f":"Remove first few dates as not all the schedules were recorded\r\n","f36b18ea":"_There are many factors that can lead to hipertension, diabetes, alcoholism and handcap. These factors are:_\r\n\r\n#### Gender\r\n\r\nFemales are more likely to be diabetic and have hipertension. On the other hand, males have a higher chance of being handcap and alcohol addicted. This may be because males like hanging out in bars and pubs.\r\n\r\n#### Age\r\n\r\nAs age increases the chances of having diabetes, hipertension, alcoholism and handcap increases. Especially the chances of elder patients (above 40 years old) increases remarkably by approximately __640%__.\r\n\r\n#### Poverty\r\n\r\nScholarship awarded patients have a lower chance of having one of these diseases except for alcoholism. The reason for that is hard to determine since it may be political or cultural reasons.\r\n","0ea21d24":"### Research Question 1 (Where do most patients come from (Neighbourhood)?)\r\n\r\n_This information can be used to determine in which cities would the medical center publish advertisments_\r\n","fd46c6c3":"##### Remove any row with negative age","7882988a":"#### Poverty","64789bcb":"\r\n#### Neighbourhood\r\n\r\nMost of the patients live in Jardim Camburi, Maria Ortiz, Jardim Da Penha, Resestencia and Itarare respectively from the highest to lowest and the majority of these patients are not awarded scholarship. Most of scholarship awarded patients live in Tabuazeiro, Ilha Do Principe, Caratoira, Gurigica and Santa Martha respectively from highest to lowest. Jardim Da Penha is known for hipertension and diabetic patients and Santa Martha has the highest number of alcoholism and handcap.\r\n\r\n#### Age\r\n\r\nThe total number of patients that are less than 10 years old is the highest. As the age increases the total number of patients decreases.\r\n\r\n#### Disease\r\n\r\nThe common diseases are hipertension, diabetes, alcoholism and handcap respectively from the most common to the least common.\r\n","aa0c87ba":"**The same pattern applies here. The medical center is closed on Sunday and Saturday is for special appointments. From Monday to Friday the number of appointments decreases slightly.**","5e39e232":"Calculating the percentage of patients that attended is more reliable than calculating the sum, as the number of appointments per day changes with no clear pattern.","2b55d0b8":"Creating a function to calculate the average number of schedules or appointments per day just to make life easier.","fc5991f2":"Caluclating the percentage of males and females as it is more reliable","49c836b9":"### Research Question 3 (Where do most non-awarded scholarship patients come from (Neighbourhood)?)\r\n\r\n_This information can be used to determine in which cities would the medical center publish advertisments_\r\n","a102a482":"Patients come more than once, so the mode neighbourhood may not be correct.","20c07345":"### Research Question 4 (Common Age)\r\n\r\n_This information can be used to determine in which cities would the medical center publish advertisments_\r\n","c460f5fd":"_Making sure that all the variables together have the same effect_","dadd6a35":"Extracting only the top 5 neighbourhoods only","22822cbd":"#### SMS Received","57251158":"<a id='eda'><\/a>\r\n\r\n## Exploratory Data Analysis\r\n","8761be5f":"**The histogram is right skewed, so as the age increases the number of patients decreases. So it would be a good idea to promote for example a baby product in the medical center.**","6f80ab3b":"**On average duration between the schedule and appointment is 10 days. There is a duration for 179 days. This may be an error or a patient who is too patient to have an appointment :D**","06194cd6":"**There is a slight relation between age and no-show, as teens tend to not show up the most and elders and toddlers tend to show up the most**","2f57b026":"#### Scheduled day","7635abde":"### Research Question 7 (Average percentage of people that attend daily)\r\n\r\n_Let's see how the attendance is changing over time and determine the average percentage of patients that attend_","b4fc3496":"### Research Question 10 (What is the most common day of an appointment?)\r\n\r\n_Looking at the appointments per day to determine on which days should the staff and doctors look out for large amounts of appointments_","6c93485d":"#### Gender, Age, SMS & Scholarship ","d6d762bc":"**Sunday is surely a day off for the call center. Saturday seems to be not for all patients or for special schedules, as the number of schedules on Saturday is very low. Most calls occur on Wednesday and Friday**","3a0862d8":"Calculating the number of patients that have these popular diseases","7cecdece":"#### Diseases","ab5137fe":"**Receiving a SMS increases the chances of attending after long durations**","c5ba706d":"##### Convert 1 and 0 columns to bool","8f242928":"#### Gender","2ba2ae05":"Looking at the data with a duration higher than 15 days as more patients tend to forget there appointment date"}}