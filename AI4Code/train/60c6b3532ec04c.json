{"cell_type":{"84e568ae":"code","08200e5e":"code","a8a9c0ee":"markdown","842a9202":"markdown"},"source":{"84e568ae":"import pandas as pd\ntrain = pd.read_pickle('..\/input\/optiver-train-from-tabuchis-baseline\/train.pkl')\nprint(f'Train shape: {train.shape}')\ndisplay(train.head(5))","08200e5e":"!pip install git+https:\/\/github.com\/aerdem4\/lofo-importance\n\nimport pandas as pd\nfrom sklearn.model_selection import KFold\nfrom lofo import LOFOImportance, Dataset, plot_importance\n%matplotlib inline\n\ntarget=\"target\"\n\nsample_df = train.sample(frac=0.01, random_state=0)\n#sample_df.sort_values(\"AvSigVersion\", inplace=True)\n\n# define the binary target and the features\ncv = KFold(n_splits=4, shuffle=False, random_state=0)\n#target = \"HasDetections\"\nfeatures = [col for col in train.columns if col != target]\n#features = [col for col in train.columns]\n\n\n# define the binary target and the features\ndataset = Dataset(df=sample_df, target=\"target\", features=[col for col in sample_df.columns if col != target])\n\n# get the mean and standard deviation of the importances in pandas format\nlofo = LOFOImportance(dataset, cv=cv, scoring=\"neg_mean_absolute_error\")\nimportance_df = lofo.get_importance()\n\n# plot the means and standard deviations of the importances\nplot_importance(importance_df, figsize=(12, 20))","a8a9c0ee":"This notebook shows LOFO importance of train pickle data that used in https:\/\/www.kaggle.com\/hiromasatabuchi\/baseline-simple-flow-with-lightgbm\n\nTrain to pickle done in https:\/\/www.kaggle.com\/kiitosu\/train-to-pickle\n\nLOFO is introduced in this discussion https:\/\/www.kaggle.com\/c\/optiver-realized-volatility-prediction\/discussion\/269283\n\n-----------------------------------------------------------------------------------\n\nhttps:\/\/www.kaggle.com\/hiromasatabuchi\/baseline-simple-flow-with-lightgbm \u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\n\nhttps:\/\/www.kaggle.com\/kiitosu\/train-to-pickle \u3067 pickle\u5316\u3057\n\nhttps:\/\/www.kaggle.com\/c\/optiver-realized-volatility-prediction\/discussion\/269283 \u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308bLOFO\u30a4\u30f3\u30dd\u30fc\u30bf\u30f3\u30b9\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u305f\uff01","842a9202":"# **4-4-1.LOFO importance**"}}