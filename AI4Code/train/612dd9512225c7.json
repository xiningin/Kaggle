{"cell_type":{"1c4ac6da":"code","0332ca0a":"code","98d69a5c":"code","f36fb113":"code","fa260e1d":"code","d9322a48":"code","bd202472":"code","0e7da3cd":"code","52e22f7d":"code","82106ef0":"code","3eb9cbc4":"code","4ccda8bc":"code","197aae87":"code","f844d131":"code","4222b083":"code","3e66b456":"code","a323f839":"code","93ea46f0":"code","8e682402":"code","f76e1479":"code","1aecc91d":"code","8c73f288":"code","91cea306":"code","8fc759ee":"code","7d2147ab":"code","d7436705":"markdown","cdd25d68":"markdown","2f219ead":"markdown","1d52cac0":"markdown","7ccb0dcf":"markdown","2dceeee6":"markdown","5134e988":"markdown","c274e977":"markdown","0ae168a6":"markdown","a196e0fa":"markdown","27e55736":"markdown","0e10c227":"markdown"},"source":{"1c4ac6da":"import numpy as np \nimport pandas as pd\nimport matplotlib\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline \nfrom wordcloud import WordCloud, STOPWORDS\nfrom nltk.sentiment import SentimentIntensityAnalyzer\nfrom textblob import TextBlob\nimport warnings\nwarnings.simplefilter(\"ignore\")","0332ca0a":"data_df = pd.read_csv(\"..\/input\/antiwork-unemployment-for-all-not-just-the-rich\/reddit_antiwork.csv\")","98d69a5c":"data_df.head()","f36fb113":"data_df.info()","fa260e1d":"def missing_data(data):\n    total = data.isnull().sum()\n    percent = (data.isnull().sum()\/data.isnull().count()*100)\n    tt = pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])\n    types = []\n    for col in data.columns:\n        dtype = str(data[col].dtype)\n        types.append(dtype)\n    tt['Types'] = types\n    return(np.transpose(tt))","d9322a48":"missing_data(data_df)","bd202472":"def show_wordcloud(data, title=\"\"):\n    text = \" \".join(t for t in data.dropna())\n    stopwords = set(STOPWORDS)\n    stopwords.update([\"t\", \"co\", \"https\", \"amp\", \"U\", \"Comment\"])\n    wordcloud = WordCloud(stopwords=stopwords, scale=4, max_font_size=50, max_words=500,background_color=\"black\").generate(text)\n    fig = plt.figure(1, figsize=(16,16))\n    plt.axis('off')\n    fig.suptitle(title, fontsize=20)\n    fig.subplots_adjust(top=2.3)\n    plt.imshow(wordcloud, interpolation='bilinear')\n    plt.show()","0e7da3cd":"show_wordcloud(data_df['title'], title = 'Prevalent words in titles')","52e22f7d":"show_wordcloud(data_df['body'], title = 'Prevalent words in post bodies')","82106ef0":"# borrowed from https:\/\/www.kaggle.com\/pashupatigupta\/sentiments-transformer-vader-embedding-bert\nsia = SentimentIntensityAnalyzer()\ndef find_sentiment(post):\n    if sia.polarity_scores(post)[\"compound\"] > 0:\n        return \"Positive\"\n    elif sia.polarity_scores(post)[\"compound\"] < 0:\n        return \"Negative\"\n    else:\n        return \"Neutral\"       ","3eb9cbc4":"def plot_sentiment(df, feature, title):\n    counts = df[feature].value_counts()\n    percent = counts\/sum(counts)\n\n    fig, (ax1, ax2) = plt.subplots(ncols=2, figsize=(12, 5))\n\n    counts.plot(kind='bar', ax=ax1, color='green')\n    percent.plot(kind='bar', ax=ax2, color='blue')\n    ax1.set_ylabel(f'Counts : {title} sentiments', size=12)\n    ax2.set_ylabel(f'Percentage : {title} sentiments', size=12)\n    plt.suptitle(f\"Sentiment analysis: {title}\")\n    plt.tight_layout()\n    plt.show()","4ccda8bc":"data_df['title_sentiment'] = data_df['title'].apply(lambda x: find_sentiment(x))\nplot_sentiment(data_df, 'title_sentiment', 'Title')","197aae87":"show_wordcloud(data_df.loc[data_df['title_sentiment']=='Positive', 'title'], title = 'Prevalent words in titles (Positive sentiment)')","f844d131":"show_wordcloud(data_df.loc[data_df['title_sentiment']=='Negative', 'title'], title = 'Prevalent words in titles (Negative sentiment)')","4222b083":"show_wordcloud(data_df.loc[data_df['title_sentiment']=='Neutral', 'title'], title = 'Prevalent words in titles (Neutral sentiment)')","3e66b456":"df = data_df.loc[~data_df.body.isna()]\ndf['body_sentiment'] = df['body'].apply(lambda x: find_sentiment(x))\nplot_sentiment(df, 'body_sentiment', 'Body')","a323f839":"show_wordcloud(df.loc[df['body_sentiment']=='Positive', 'body'], title = 'Prevalent words in body (Positive sentiment)')","93ea46f0":"show_wordcloud(df.loc[df['body_sentiment']=='Negative', 'body'], title = 'Prevalent words in body (Negative sentiment)')","8e682402":"show_wordcloud(df.loc[df['body_sentiment']=='Neutral', 'body'], title = 'Prevalent words in body (Neutral sentiment)')","f76e1479":"def find_sentiment_polarity_textblob(post):\n    blob = TextBlob(post)\n    polarity = 0\n    for sentence in blob.sentences:\n        polarity += sentence.sentiment.polarity\n    return polarity\n\ndef find_sentiment_subjectivity_textblob(post):\n    blob = TextBlob(post)\n    subjectivity = 0\n    for sentence in blob.sentences:\n        subjectivity += sentence.sentiment.subjectivity\n    return subjectivity","1aecc91d":"data_df['title_sentiment_polarity'] = data_df['title'].apply(lambda x: find_sentiment_polarity_textblob(x))\ndata_df['title_sentiment_subjectivity'] = data_df['title'].apply(lambda x: find_sentiment_subjectivity_textblob(x))","8c73f288":"def plot_sentiment_textblob(df, feature, title):\n    polarity = df[feature+'_sentiment_polarity']\n    subjectivity = df[feature+'_sentiment_subjectivity']\n\n    fig, (ax1, ax2) = plt.subplots(ncols=2, figsize=(12, 5))\n\n    polarity.plot(kind='kde', ax=ax1, color='magenta')\n    subjectivity.plot(kind='kde', ax=ax2, color='green')\n    ax1.set_ylabel(f'Sentiment polarity : {title}', size=12)\n    ax2.set_ylabel(f'Sentiment subjectivity: {title}', size=12)\n    plt.suptitle(f\"Sentiment analysis (polarity & subjectivity): {title}\")\n    plt.tight_layout()\n    plt.show()","91cea306":"plot_sentiment_textblob(data_df, \"title\", 'Title')","8fc759ee":"df['body_sentiment_polarity'] = df['body'].apply(lambda x: find_sentiment_polarity_textblob(x))\ndf['body_sentiment_subjectivity'] = df['body'].apply(lambda x: find_sentiment_subjectivity_textblob(x))","7d2147ab":"plot_sentiment_textblob(df, \"body\", 'Body')","d7436705":"## Body","cdd25d68":"### Title","2f219ead":"### Body","1d52cac0":"# Introduction\n\nAntiwork: Unemployment for all, not just the rich! [r\/antiwork](https:\/\/www.reddit.com\/r\/antiwork\/) is a subreddit for those who want to end work, are curious about ending work, want to get the most out of a work-free life, want more information on anti-work ideas and want personal help with their own jobs\/work-related struggles.\n\n<center><img src=\"https:\/\/images-na.ssl-images-amazon.com\/images\/I\/51yaGWD886L.jpg\" width=400><\/img><\/center>\n\nWe collect daily the post and comments from this subrredit.\n\nIn this Notebook we analyze the data in this Dataset.","7ccb0dcf":"# Analysis preparation\n\nWe initialize the packages that we will use in the analysis.","2dceeee6":"Body of posts is missing in approximatively half of the data.","5134e988":"We also look to things like data quality, for example missing data.","c274e977":"## With TextBlob","0ae168a6":"We read and glimpse the data.","a196e0fa":"# Data visualization\n\n\nWe will use wordclouds to identify the most frequent words in the titles and body of the posts.\n\n","27e55736":"## Title","0e10c227":"# Sentiment analysis\n\n## With nltk SentimentIntensityAnalyzer"}}