{"cell_type":{"96dbf767":"code","7112cd41":"code","f59d6fee":"code","00007d74":"code","67dafc7b":"code","fff9747d":"code","7f181b9c":"code","c418a096":"code","a5b39bcd":"code","f0039f9c":"code","bf0ab4a6":"code","2e4e732c":"code","394d5855":"code","c8a1ab1b":"code","db5996a0":"code","004830ea":"code","b2f0c45b":"code","4ae20a34":"markdown","173dac69":"markdown","fdcb4ca0":"markdown","02f384c2":"markdown","1729840a":"markdown","f14e5c9d":"markdown","259d4959":"markdown","e823d469":"markdown","96f444d9":"markdown","cabbc1a8":"markdown","7e52e48e":"markdown","3e1c6af8":"markdown","154d139f":"markdown","d4aea691":"markdown","1057a745":"markdown","685bc81b":"markdown","3d9f20c1":"markdown","492dd276":"markdown"},"source":{"96dbf767":"# Import the libraries\nimport numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\n%matplotlib inline","7112cd41":"# Import the data\ndf = pd.read_csv(\"..\/input\/spotify-dataset-19212020-160k-tracks\/data.csv\")\n\n# View the shape and columns names\nprint(df.shape)\ndf.columns","f59d6fee":"# Check for missing values\ndf.isnull().sum()","00007d74":"# Drop unneccessary columns\ndf.drop([\"id\", \"key\", \"mode\", \"explicit\", \"release_date\"], axis=1, inplace=True)\ndf.head()","67dafc7b":"corr = df[[\"acousticness\",\"danceability\",\"energy\", \"instrumentalness\", \n           \"liveness\",\"tempo\", \"valence\", \"loudness\", \"speechiness\"]].corr()\n\nplt.figure(figsize=(10,10))\nsns.heatmap(corr, annot=True)","fff9747d":"year_avg = df[[\"acousticness\",\"danceability\",\"energy\", \"instrumentalness\", \n               \"liveness\",\"tempo\", \"valence\", \"loudness\", \"speechiness\", \"year\"]].\\\ngroupby(\"year\").mean().sort_values(by=\"year\").reset_index()\n\nyear_avg.head()","7f181b9c":"# Create a line plot\nplt.figure(figsize=(14,8))\nplt.title(\"Song Trends Over Time\", fontdict={\"fontsize\": 15})\n\nlines = [\"acousticness\",\"danceability\",\"energy\", \n         \"instrumentalness\", \"liveness\", \"valence\", \"speechiness\"]\n\nfor line in lines:\n    ax = sns.lineplot(x='year', y=line, data=year_avg)\n    \n    \nplt.ylabel(\"value\")\nplt.legend(lines)","c418a096":"# Check for the number of unique artists\ndf[\"artists\"].nunique()","a5b39bcd":"# Top 10 artists with most songs\ndf[\"artists\"].value_counts()[:10]","f0039f9c":"artist_list = df.artists.value_counts().index[:10]\n\ndf_artists = df[df.artists.isin(artist_list)][[\"artists\",\"year\"]].\\\ngroupby([\"artists\",\"year\"]).size().reset_index(name=\"song_count\")\n\ndf_artists.head()","bf0ab4a6":"plt.figure(figsize=(14,8))\nsns.lineplot(x=\"year\", y=\"song_count\", hue=\"artists\", data=df_artists)","2e4e732c":"top_artists = pd.DataFrame(np.zeros((100,10)), columns=artist_list)\ntop_artists['year'] = np.arange(1921,2021)\nprint(top_artists.shape)\ntop_artists.head()","394d5855":"top_artists = top_artists.melt(id_vars='year',var_name='artists', value_name='song_count')\nprint(top_artists.shape)\ntop_artists.head()","c8a1ab1b":"df_merged = pd.merge(top_artists, df_artists, on=['year','artists'], how='outer').\\\nsort_values(by='year').reset_index(drop=True)\ndf_merged.head()","db5996a0":"df_merged.fillna(0, inplace=True)\ndf_merged.drop('song_count_x', axis=1, inplace=True)\ndf_merged.rename(columns={'song_count_y':'song_count'}, inplace=True)\ndf_merged.head()","004830ea":"df_merged['cumsum'] = df_merged[['song_count','artists']].groupby('artists').cumsum()\ndf_merged.head(10)","b2f0c45b":"fig = px.bar(df_merged,\n             x='artists', y='cumsum',\n             color='artists',\n             animation_frame='year', animation_group='year',\n             range_y=[0,1300],\n             title='Artists with Most Songs')\nfig.show()","4ae20a34":"The dataframe includes 100 rows for 100 years and 11 columns (10 artists and a year column). Then I will convert it to a long dataframe using melt function.","173dac69":"## Audio Features Correlation Analysis\nThe dataset includes many different audio features of the songs. Some of these features may be correlated. At first glance, energy and loudness seem correlated. We can use Pandas' `corr` method to calculate the correlation and use a heatmap to visualize them.","fdcb4ca0":"We cannot really separate the lines. Since it is such a long period (100 years) artists appear in only a part of the entire timeline. For instance, \u201c\u042d\u0440\u0438\u0445 \u041c\u0430\u0440\u0438\u044f \u0420\u0435\u043c\u0430\u0440\u043a\u201d seems to be dominating 1930s.","02f384c2":"# Spotify Time Series Analysis\nIn this project, we have the Spotify dataset which contains audio features of 160k+ songs released in between 1921 and 2020. The dataset is collected from Spotify Web API and can be found on [Kaggle](https:\/\/www.kaggle.com\/yamaerenay\/spotify-dataset-19212020-160k-tracks).\n\nThe goal of this project is to analyze the trends of songs as well as the top artists over the course of a century.","1729840a":"## Song Trends\nThe dataset contains songs from as far back as 1921. We can get an overview how the characteristics of song change over a hundred-year-period.","f14e5c9d":"Let's also add a column that shows the cumulative sum of the songs that each artist produced over the years. One way to do that is to use groupby and cumsum functions.","259d4959":"## Artists with Most Songs\nNow, let's analyze which artists have the most songs over this hundred-year-period. But first, I wonder how many unique artists we have in the dataset. ","e823d469":"The `df.isna().sum()` method returns the number of missing values in each column. And as we can see, there is no missing value. We might also want to drop some columns as they are unnecessary for our analysis.","96f444d9":"Finally, we can create an animated bar plot that spans through the entire timeline to see how each artist dominates in different years.. There will be a bar for each artists. The bars will go up as the cumulative number of songs for artists increase.","cabbc1a8":"There are 33375 artists in the entire dataset.","7e52e48e":"The data contains nearly 170,000 songs with 19 different features columns. The features include the song name, artist, release date as well as some characteristics of the song such as acousticness, danceability, loudness, tempo and so on.","3e1c6af8":"There is a strong positive correlation between energy and loudness as we suspected. On the other hand, there seems to be a strong negative correlation between energy and acousticness.","154d139f":"For five different measures, we obtained the average yearly values. Let's create a line graph that shows the trends in these variables over time.","d4aea691":"Song count is zero in all years. Let's merge the song counts from df_artists dataframe using Pandas merge function. ","1057a745":"If an artist does not have any songs in a particular year, that value is filled with NaN. Let's also replace NaN values with 0 and drop song_count_x column.","685bc81b":"## Setup\nBefore we start, let's first import the libraries that we are going to use for our analysis.","3d9f20c1":"\u042d\u0440\u043d\u0435\u0441\u0442 \u0425\u0435\u043c\u0438\u043d\u0433\u0443\u044d\u0439 has 1215 songs and the runner up, Francisco Canaro, has 938. ","492dd276":"## Loading the Data\nNext, we are going to import the `data.csv` and convert it into a Pandas DataFrame."}}