{"cell_type":{"8627fb00":"code","4d384abb":"code","9ea14f3d":"code","a1e0bc74":"code","9c2bda4c":"code","85662c59":"code","b6cc16b8":"code","4f63919d":"code","e4f7cfc2":"code","7c5d7576":"code","262c6be4":"code","4ba27e14":"code","e2383be8":"code","5f7826ca":"code","cd5400a0":"code","cea74b3d":"code","97d6b0d8":"code","9bcb05b2":"code","9f75d505":"markdown","388b7381":"markdown","51adb848":"markdown"},"source":{"8627fb00":"import numpy as np\nimport pandas as pd\nimport os\nimport datetime\nimport warnings\nimport seaborn as sns\nfrom matplotlib import pyplot as plt\nfrom matplotlib.dates import DateFormatter\nfrom tqdm._tqdm_notebook import tqdm_notebook\n\ntqdm_notebook.pandas()\npd.set_option('display.max_columns', 100)\nsns.set_style(\"whitegrid\")\nwarnings.filterwarnings('ignore')\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","4d384abb":"PATH = '\/kaggle\/input\/meta-kaggle'","9ea14f3d":"users = pd.read_csv(f'{PATH}\/Users.csv')\nusers_ach = pd.read_csv(f'{PATH}\/UserAchievements.csv')","a1e0bc74":"display(users.tail())\ndisplay(users_ach.head())\nprint(f'User Id Duplicated: {users.Id.duplicated().any()}')","9c2bda4c":"def get_resample_data(df, col, offset):\n    df[col] = pd.to_datetime(df[col])\n    return df.set_index(col).resample(offset).count().reset_index()\n\ndef plot_transition_graph(x, y, label=''):\n    figure_ = plt.figure(1, figsize=(15,7))\n    axes = figure_.add_subplot(111)\n    axes.plot(x, y, 'o-', label=label)\n    axes.legend(fontsize=18)\n    xaxis = axes.xaxis\n    xaxis.set_major_formatter(DateFormatter('%Y-%m-%d'))","85662c59":"users_rd = get_resample_data(users, 'RegisterDate', 'M').rename(columns={'Id':'Cnt'})[:-1]\nplot_transition_graph(users_rd.RegisterDate, users_rd.Cnt)","b6cc16b8":"sub = pd.read_csv(f'{PATH}\/Submissions.csv')\nteams = pd.read_csv(f'{PATH}\/Teams.csv')\ncompe = pd.read_csv(f'{PATH}\/Competitions.csv')\ndisplay(sub.tail())\ndisplay(teams.tail())\ndisplay(compe.tail())","4f63919d":"# Competitions type\ncompe = compe[(compe.HostSegmentTitle == 'Featured') |\n              (compe.HostSegmentTitle == 'Research') ]\n# merge\ncompe = compe.rename(columns={'Id': 'CompetitionId'})\nteams = pd.merge(teams, compe[['CompetitionId']], on='CompetitionId')\nteams = teams.rename(columns={'Id': 'TeamId'})\nsub = pd.merge(sub, teams[['TeamId']], on='TeamId')","e4f7cfc2":"# Success Submission\nsub = sub[~sub.PublicScoreLeaderboardDisplay.isnull() & ~sub.IsAfterDeadline]\n\n# merge\nsub_userid = sub.drop_duplicates(subset='SubmittedUserId')[['SubmittedUserId']]\nsub_users = pd.merge(users, sub_userid, left_on='Id', right_on='SubmittedUserId')\nsub_users.head()","7c5d7576":"sub_users_rd = sub_users.set_index('RegisterDate').resample('M').count().reset_index()[:-1]\nsub_users_rd['roll'] = sub_users_rd.rolling(12).mean().Id","262c6be4":"figure_ = plt.figure(1, figsize=(15,7))\naxes = figure_.add_subplot(111)\naxes.plot(sub_users_rd.RegisterDate, sub_users_rd.Id, 'o-', label='')\naxes.plot(sub_users_rd.RegisterDate, sub_users_rd.roll, '-', alpha=0.5, label='12-month rolling mean')\naxes.legend(fontsize=18)\nxaxis = axes.xaxis\nxaxis.set_major_formatter(DateFormatter('%Y-%m-%d'))","4ba27e14":"compe = pd.read_csv(f'{PATH}\/Competitions.csv')\ncompe_tag = pd.read_csv(f'{PATH}\/CompetitionTags.csv')\ntag = pd.read_csv(f'{PATH}\/Tags.csv')","e2383be8":"display(compe.head())\ndisplay(compe_tag.head())\ndisplay(tag.head())","5f7826ca":"# Competitions type\ncompe = compe[(compe.HostSegmentTitle=='Featured') | \n              (compe.HostSegmentTitle=='Research') ]\n\ncompe_tag_id = pd.merge(compe_tag, compe, left_on='CompetitionId', right_on='Id')","cd5400a0":"# top10\nconpe_tag_cnt = compe_tag_id.groupby('TagId')[['CompetitionId']].count().rename(columns={'CompetitionId': 'Cnt'})\ntag_top10 = conpe_tag_cnt.sort_values('Cnt', ascending=False)[:10].reset_index()\npd.merge(tag_top10, tag[['Id','Name']], how='left', left_on='TagId', right_on='Id').drop('Id', axis=1)","cea74b3d":"tabular_compe = compe_tag_id[compe_tag_id.TagId == 14101]\nimage_compe   = compe_tag_id[compe_tag_id.TagId == 14102]\ntext_compe    = compe_tag_id[compe_tag_id.TagId == 14104]","97d6b0d8":"start_data = pd.DataFrame({'EnabledDate':[pd.to_datetime('2013-06-1')],'cnt':[0]})\nend_data = pd.DataFrame({'EnabledDate':[pd.to_datetime('2019-11-05')],'cnt':[0]})\n\nfor compe_data, label in zip([tabular_compe, image_compe, text_compe],\n                             ['tabular','image','text']):\n    compe_data = get_resample_data(compe_data, 'EnabledDate', 'M'\n                                  ).rename(columns={'CompetitionId': 'cnt'})\n    # Add Start Data\n    compe_data = start_data.append(compe_data,sort=False)\n    compe_data = compe_data.append(end_data,sort=False)\n    compe_data = compe_data.resample('2Q', on='EnabledDate').sum().reset_index()[:-1]\n    plot_transition_graph(compe_data.EnabledDate, compe_data.cnt, label)","9bcb05b2":"compe['EnabledDate'] = pd.to_datetime(compe.EnabledDate)\ncompe_rd = compe.set_index('EnabledDate').resample('2Q').count().reset_index()[:-1]\nplot_transition_graph(compe_rd.EnabledDate, compe_rd.Id, 'num of compe')","9f75d505":"# Meta Kaggle Analysis\n### Connehito March\u00e9 vol.6 (11\/5\/2019)","388b7381":"## Number of new users","51adb848":"## Tag"}}