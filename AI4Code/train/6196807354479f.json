{"cell_type":{"671c700d":"code","eb8228fd":"code","89ec69e1":"code","98864c62":"code","77e43788":"code","0bded86b":"code","a4eff8ed":"code","90bcd196":"code","395b85b2":"code","b29e6848":"code","8a679f7b":"code","6f996b80":"code","9a19c06b":"code","b2d53171":"code","a0c1aa85":"code","78284ee4":"code","f3bf5f52":"code","57d77c14":"code","ae9489ee":"code","b6e2bb16":"code","456567d9":"code","b7ce726f":"code","12dfac4a":"code","13af7603":"code","15361b4c":"code","7060aeda":"code","739c1092":"code","535ce0ff":"code","9e254ce9":"code","90348a91":"code","39b2644a":"code","8a1dcf72":"code","7ffb30e5":"code","db739539":"code","dddcd536":"code","d7cf5b11":"code","2d3feac4":"code","c71820f9":"code","68402f79":"code","d1420cc6":"code","89968d76":"code","99bb73ac":"code","1df9797a":"code","0e787ac3":"code","ec057287":"code","2abcc30e":"code","f76018f7":"code","fffae8f4":"code","a0052350":"code","064619b8":"code","5d4c1c08":"markdown","14a315bf":"markdown","76011aa4":"markdown","5d712ac7":"markdown","e4db4b39":"markdown","05381bb5":"markdown","1c0c5bef":"markdown","92935bc2":"markdown","65e1b6e7":"markdown","011a3b23":"markdown","3a2a2517":"markdown","613222d5":"markdown","d5e6c27b":"markdown","328b4529":"markdown","dd9c17e0":"markdown","81a0db7c":"markdown","3cc51011":"markdown","ef697e77":"markdown","be9559ed":"markdown","3f6b425d":"markdown","3c347fb2":"markdown","7e7bf76e":"markdown","cbbfbba6":"markdown","6f33b171":"markdown","36cbcbdd":"markdown","b7dc4f70":"markdown","0a617226":"markdown","b05385c0":"markdown","b70c212d":"markdown","c5cc4028":"markdown","fe88a4db":"markdown","40222799":"markdown","d37cce5e":"markdown","8d89129a":"markdown","4178de13":"markdown","40aeb78c":"markdown","00857085":"markdown","0e5f9d9e":"markdown","b956705b":"markdown","4d75d7e2":"markdown","3a0693b7":"markdown","ff93dbbe":"markdown","85757101":"markdown","9ba7432a":"markdown","3a2253ab":"markdown","46fd7095":"markdown","d34642c4":"markdown","08a7a697":"markdown","8d8c3013":"markdown","ed8282ad":"markdown","f89af09e":"markdown","1be13e82":"markdown"},"source":{"671c700d":"import numpy as np\nimport pandas as pd\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","eb8228fd":"df=pd.read_csv(\"\/kaggle\/input\/clicks-conversion-tracking\/KAG_conversion_data.csv\")","89ec69e1":"df.head()","98864c62":"df.info()","77e43788":"df.shape","0bded86b":"df.describe()","a4eff8ed":"import matplotlib.pyplot as plt\nimport seaborn as sns","90bcd196":"g=sns.heatmap(df[[\"Impressions\",\"Clicks\",\"Spent\",\"Total_Conversion\",\"Approved_Conversion\"]].corr(),annot=True ,fmt=\".2f\", cmap=\"coolwarm\")","395b85b2":"df[\"xyz_campaign_id\"].unique()","b29e6848":"df[\"xyz_campaign_id\"].replace({916:\"campaign_a\",936:\"campaign_b\",1178:\"campaign_c\"}, inplace=True)","8a679f7b":"df.head()","6f996b80":"# count plot on single categorical variable \nsns.countplot(x ='xyz_campaign_id', data = df) \n# Show the plot \nplt.show() ","9a19c06b":"#Approved_Conversion\n# Creating our bar plot\nplt.bar(df[\"xyz_campaign_id\"], df[\"Approved_Conversion\"])\nplt.ylabel(\"Approved_Conversion\")\nplt.title(\"company vs Approved_Conversion\")\nplt.show()","b2d53171":"# count plot on single categorical variable \nsns.countplot(x ='age', data = df) \n# Show the plot \nplt.show() ","a0c1aa85":"import seaborn as sns\nsns.set(style=\"whitegrid\")\ntips = sns.load_dataset(\"tips\")\nsns.barplot(x=df[\"xyz_campaign_id\"], y=df[\"Approved_Conversion\"], hue=df[\"age\"], data=tips)","78284ee4":"# count plot on single categorical variable \nsns.countplot(x ='gender', data = df) \n# Show the plot \nplt.show() ","f3bf5f52":"import seaborn as sns\nsns.set(style=\"whitegrid\")\ntips = sns.load_dataset(\"tips\")\nsns.barplot(x=df[\"xyz_campaign_id\"], y=df[\"Approved_Conversion\"], hue=df[\"gender\"], data=tips)","57d77c14":"# count plot on single categorical variable \nfig_dims = (15,6)\nfig, ax = plt.subplots(figsize=fig_dims)\nsns.countplot(x ='interest', data = df) \n# Show the plot \nplt.show() ","ae9489ee":"plt.scatter(df[\"interest\"], df[\"Approved_Conversion\"])\nplt.title(\"interest vs. Approved_Conversion\")\nplt.xlabel(\"interest\")\nplt.ylabel(\"Approved_Conversion\")\nplt.show()","b6e2bb16":"g = sns.FacetGrid(df, col=\"gender\")\ng.map(plt.scatter, \"interest\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","456567d9":"g = sns.FacetGrid(df, col=\"age\")\ng.map(plt.scatter, \"interest\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","b7ce726f":"plt.hist(df['Spent'], bins = 25)\nplt.xlabel(\"Spent\")\nplt.ylabel(\"Frequency\")\nplt.show()","12dfac4a":"plt.scatter(df[\"Spent\"], df[\"Approved_Conversion\"])\nplt.title(\"Spent vs. Approved_Conversion\")\nplt.xlabel(\"Spent\")\nplt.ylabel(\"Approved_Conversion\")\nplt.show()","13af7603":"g = sns.FacetGrid(df, col=\"gender\")\ng.map(plt.scatter, \"Spent\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","15361b4c":"g = sns.FacetGrid(df, col=\"age\")\ng.map(plt.scatter, \"Spent\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","7060aeda":"plt.hist(df['Impressions'], bins = 25)\nplt.xlabel(\"Impressions\")\nplt.ylabel(\"Frequency\")\nplt.show()","739c1092":"plt.scatter(df[\"Impressions\"], df[\"Approved_Conversion\"])\nplt.title(\"Impressions vs. Approved_Conversion\")\nplt.xlabel(\"Impressions\")\nplt.ylabel(\"Approved_Conversion\")\nplt.show()","535ce0ff":"g = sns.FacetGrid(df, col=\"gender\")\ng.map(plt.scatter, \"Clicks\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","9e254ce9":"g = sns.FacetGrid(df, col=\"age\")\ng.map(plt.scatter, \"Clicks\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","90348a91":"g = sns.FacetGrid(df, col=\"gender\")\ng.map(plt.scatter, \"Total_Conversion\", \"Approved_Conversion\", alpha=.4)\ng.add_legend();","39b2644a":"g = sns.FacetGrid(df, col=\"age\")\ng.map(plt.scatter, \"Total_Conversion\", \"Approved_Conversion\",alpha=.5)\ng.add_legend()","8a1dcf72":"a=[]\nb=[]\nc=[]\nfor i,j,k in zip(df.xyz_campaign_id, df.fb_campaign_id, df.Approved_Conversion):\n    if i==\"campaign_c\":\n      a.append(i),b.append(j),c.append(k)","7ffb30e5":"d={'campaign_name':a, 'fb_campaign_id':b, 'Approved_Conversion':c}     \ncampaign_c=pd.DataFrame(d)\ncampaign_c.head()","db739539":"plt.figure(figsize=(20,5))\nplt.scatter(campaign_c[\"fb_campaign_id\"], campaign_c[\"Approved_Conversion\"])\nplt.title(\"fb_campaign_id vs. Approved_Conversion for campaign_c\")\nplt.xlabel(\"fb_campaign_id\")\nplt.ylabel(\"Approved_Conversion\")\nplt.show()","dddcd536":"df[\"xyz_campaign_id\"].replace({\"campaign_a\":916 ,\"campaign_b\":936 ,\"campaign_c\":1178}, inplace=True)","d7cf5b11":"#encoding gender\nfrom sklearn.preprocessing import LabelEncoder\nencoder=LabelEncoder()\nencoder.fit(df[\"gender\"])\ndf[\"gender\"]=encoder.transform(df[\"gender\"])\nprint(df[\"gender\"])","2d3feac4":"#encoding age\nencoder.fit(df[\"age\"])\ndf[\"age\"]=encoder.transform(df[\"age\"])\nprint(df[\"age\"])","c71820f9":"df.head()","68402f79":"x=np.array(df.drop(labels=[\"Approved_Conversion\",\"Total_Conversion\"], axis=1))\ny=np.array(df[\"Total_Conversion\"])","d1420cc6":"x","89968d76":"y","99bb73ac":"y=y.reshape(len(y),1)\ny","1df9797a":"from sklearn.preprocessing import StandardScaler\nsc_x= StandardScaler()\nx = sc_x.fit_transform(x)","0e787ac3":"from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x,y,test_size=0.2, random_state=42)","ec057287":"from sklearn.ensemble import RandomForestRegressor\nrfr = RandomForestRegressor(n_estimators = 10, random_state = 0)\nrfr.fit(x_train, y_train)","2abcc30e":"y_pred=rfr.predict(x_test)\ny_pred=np.round(y_pred)","f76018f7":"y_pred","fffae8f4":"from sklearn.metrics import r2_score,mean_squared_error,mean_absolute_error\nmae=mean_absolute_error(y_test, y_pred)\nmse=mean_squared_error(y_test, y_pred)\nrmse=np.sqrt(mse)\nr2_score=r2_score(y_test, y_pred)\n","a0052350":"mae","064619b8":"#R-squred value\nr2_score","5d4c1c08":"# **Zooming into campaign_c(campaign with most approved_conversion)**","14a315bf":"It's interesting to note that  in campaign_c and campaign_b, the age group of 30-34 shows more interest, whereas in campaign_a the age group of 40-44 shows more interest.\n\nLet's see the distribution with gender.","76011aa4":"# **Sales Conversion Optimization by analysing ad campaigns Tracked by Facebook and Prediction using Random Forest Regressor**","5d712ac7":"# **Summary**","e4db4b39":"# **Campaigns**","05381bb5":"**Correlation Matrix**","1c0c5bef":"Let's see people who actually went from enquiring to buying the product.","92935bc2":"**Replacing xyz_campaign_ids again with actual ids for modelling**","65e1b6e7":"It seems people in age group 30-34 are more likely to buy the product after enquiring the product.","011a3b23":"**Impressions**","3a2a2517":"# **Exploratory Data Analysis**","613222d5":"**Correlations:**\n* \"Impressions\" and \"Total_Conversion\" are more correlated with \"Approved_Conversion\" than \"Clicks\" and \"Spent\".\n\n**Campaign_C:**\n1. campaign_c has most number of ads.\n2. compaign_c has better Approved_conversion count, i.e. most people bought products in campaign_c.\n\n**age_group:**\n3. In campaign_c and campaign_b, the age group of 30-34 shows more interest, whereas in campaign_a the age group of 40-44 shows more interest.\n\n**gender:**\n4. Both the genders shows similar interests in all three campaigns.\n\n**interest:**\n5. Although the count of interest after 100 is less,there is a rise of users after 100 who actually bought the product. Rest of the distribution is according to what was expected.\n\n**money spent:**\n6. As the amount of money spent increases, no of product bought increases.\n7. There is a sudden rise in the Approved_Conversion after a certain point in Impressions.\n\n**Product bought after clicking the ad:**\n8. It seems men tend to click more than women but women buy more products than men after clicking the add.\n9. People in age group 30-34 has more tendency to buy product after clicking the add.\n\n**Product bought after enquiring the ad:**\n10. It seems women buys more products than men after enquiring the product. However men tends to enquire more about the product.\n11. It seems people in age group 30-34 are more likely to buy the product after enquiring the product.\n\n**Instructive_conclusion:**\n\n12. For campaign_c, fb_campaign_ids around 145000 have more Approved_Conversion than around 180000\n\n","d5e6c27b":"**Age**","328b4529":"# **Evaluation**","dd9c17e0":"This shows campaign_c has most number of ads.","81a0db7c":"**Aim:** \n\nTo optimize Sales conversion and predict future sales","3cc51011":"It's clear from both the above graphs that compaign_c has better Approved_conversion count, i.e. most people bought products in campaign_c.\n\nLet's see the distribution with age.","ef697e77":"**Spent**","be9559ed":"**Business Questions**\n\n**1)How to optimize the social ad campaigns for the highest conversion rate possible. (Attain best Reach to Conversion ratios\/Click to Conversion ratios)**\n\n**=>** Since highest conversion rate was attained in campaign_c, we can consider the factors contributed in this campaign:\n\n* The number of ad counts should be more for better reach.\n\n* The age group of 30-34 should be the main aim.\n\n* People with interest types after 100 should be given more attention\n\n* More the number of times the add is shown i.e. \"impression\", more approved_conversion rate is achieved.\n\n**2)Finding the perfect target demographics with the appropriate clickthrough rates**\n\n* Women tend to buy the product more often after clicking the ad than men.\n* Also the age group 30 to 34 buy the product more often after clicking the ad\n\n**3)Understanding the ideal turnaround\/decision making time per age group to convert and retarget future social campaigns**\n\n* Age group 30-34 tend to take less decision making time followed by 35 to 39 and 40-44. \n* Age group 45-49 take the most time to decide.\n\n**4)Comparing the individual campaign performance so the best creative\/campaign can be run again with adjusted audiences.**\n\n* clearly campaign_c wins the battle due to highest approved_conversion rate.\n* Also campaign_a does pretty well , considering the number of ads it involves. With less no of ads, it has managed to peform better than campaign_b with large no of ads.","3f6b425d":"**Predicting Total Conversion in test_set and rounding up values**","3c347fb2":"**Approach:** \n\nExploratory Data Analysis using matplotlib and seaborn and model training using Random Forest Regressor","7e7bf76e":"**Data:**\n\nThe data used in this project is from an anonymous organisation\u2019s social media ad campaign.\n\n1.) ad_id: an unique ID for each ad.\n\n2.) xyzcampaignid: an ID associated with each ad campaign of XYZ company.\n\n3.) fbcampaignid: an ID associated with how Facebook tracks each campaign.\n\n4.) age: age of the person to whom the ad is shown.\n\n5.) gender: gender of the person to whim the add is shown\n\n6.) interest: a code specifying the category to which the person\u2019s interest belongs (interests are as mentioned in the person\u2019s Facebook public profile).\n\n7.) Impressions: the number of times the ad was shown.\n\n8.) Clicks: number of clicks on for that ad.\n\n9.) Spent: Amount paid by company xyz to Facebook, to show that ad.\n\n10.) Total conversion: Total number of people who enquired about the product after seeing the ad.\n\n11.) Approved conversion: Total number of people who bought the product after seeing the ad.","cbbfbba6":"# **Loading Data**","6f33b171":"We can see fb_campaign_ids around 145000 have more Approved_Conversion than around 180000 for campaign_c","36cbcbdd":"# **Random Forest Regressor to predict Total_Conversion**","b7dc4f70":"It's interesting to note that, although the count of interest after 100 is less,there is a rise of users after 100 who actually bought the product. Rest of the distribution is according to what was expected.","0a617226":"# **People who actually bought the product**","b05385c0":"It seems men tend to click more than women but women buy more products than men after clicking the add.","b70c212d":"we have got 0.753 of R-squared value which means 75.3% of the data fits the regression model.","c5cc4028":"**Distribution of fb_campaign_id with Approved_Conversion for campaign_c**","fe88a4db":"People in age group 30-34 has more tendency to buy product after clicking the add.","40222799":"**Encoding the Labels 'gender' and 'age' for better modelling**","d37cce5e":"# **Modelling**","8d89129a":"There is a sudden rise in Approved conversions after a certain point in Impressions.","4178de13":"Let's see people who actually went from clicking to buying the product.","40aeb78c":"**Feature Scaling**","00857085":"# **Importing Libraries**","0e5f9d9e":"**Removing \"Approved_Conversion\" and \"Total_Conversion\" from dataset**","b956705b":"**After enquiring the product?**","4d75d7e2":"**Gender**","3a0693b7":"**Interest**","ff93dbbe":"Both the genders shows similar interests in all three campaigns.","85757101":"**After Clicking the ad ?**","9ba7432a":"Here, we see there are 3 different ad campaigns for xyz company.\n\nNow we'll replace their names with campaign_a, campaign_b and campaign_c for better visualisation which creates problem with integer values","3a2253ab":"Here it's clear, \"Impressions\" and \"Total_Conversion\" are more correlated with \"Approved_Conversion\" than \"Clicks\" and \"Spent\". ","46fd7095":"Please, upvote my work if it could help.\nThank you!","d34642c4":"The mean absolute error achieved is 0.99.","08a7a697":"We can see, as the amount of money spent increases, no of product bought increases.","8d8c3013":"**splitting Data into testset and trainset**","ed8282ad":"It seems women buys more products than men after enquiring the product. However men tends to enquire more about the product.","f89af09e":"**(Just for reminder : (916,  936, 1178) xyz_campaign_ids were replaced by campaign_a, campaign_b and campaign_c)**","1be13e82":"**Checking for null values**"}}