{"cell_type":{"f607738b":"code","8532330b":"code","d32a3fd8":"code","a66e67e7":"code","f8970748":"code","9d816b1c":"code","bddea2cc":"code","d7967abb":"code","fa9aeb2b":"code","9a61cc9e":"markdown"},"source":{"f607738b":"!pip install lofo-importance","8532330b":"import pandas as pd\nimport numpy as np\nimport janestreet as jane\nfrom lofo import LOFOImportance, Dataset, plot_importance","d32a3fd8":"train = pd.read_csv(\"..\/input\/jane-street-market-prediction\/train.csv\")\ntrain = train.loc[train[\"weight\"] != 0,]\ntrain[\"Y\"] = (train[\"weight\"]*train[\"resp\"] > 0).astype(\"int\")\n\ntrain = train.dropna()","a66e67e7":"Xs = list(list(np.where(train.columns.str.contains(\"feature\")))[0]) \nXs = list(train.columns[Xs])\nYs = list(list(np.where(train.columns.str.contains(\"Y\")))[0]) \nYs = list(train.columns[Ys])","f8970748":"dataset = Dataset(df=train, target=Ys, features=Xs)","9d816b1c":"Imp = LOFOImportance(dataset, cv=4, scoring=\"roc_auc\")","bddea2cc":"imp_result = Imp.get_importance()","d7967abb":"plot_importance(imp_result.head(130), figsize=(8, 70), kind=\"default\")","fa9aeb2b":"imp_result.to_csv(\"importanceResults.csv\", index=False)","9a61cc9e":">***This kernel uses a LGBM to compute feature importances leaving one feature out.\nIn the kernel output, you find the results \"importanceResults.csv\"***"}}