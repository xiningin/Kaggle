{"cell_type":{"317cd2c5":"code","f2d57a02":"code","ccbf7cbe":"code","2e270392":"code","1e74ba45":"code","7aa5f0ce":"code","c23b8ada":"code","d96853b2":"code","941f71f2":"code","e9764bd9":"markdown","183910f3":"markdown","bc14bf14":"markdown","9b174b08":"markdown","fad9871b":"markdown","6bb95333":"markdown","7b658222":"markdown","1ce44608":"markdown","3a4f7434":"markdown","118f5a0a":"markdown","64762d4d":"markdown","23617bca":"markdown"},"source":{"317cd2c5":"import numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot\nimport math\n\nmatches = pd.read_csv('..\/input\/matches.csv')\ndeliveries = pd.read_csv('..\/input\/deliveries.csv')","f2d57a02":"highest_score_batsman = deliveries.groupby(['match_id', 'batting_team', 'batsman']) \\\n                                  .batsman_runs \\\n                                  .agg([np.sum]) \\\n                                  .max(level = ['match_id', 'batting_team'])\n\ntotal_runs = deliveries.groupby(['match_id', 'batting_team']) \\\n                       .total_runs \\\n                       .agg([np.sum])\n\nmatch_total_highest_combined = pd.concat([highest_score_batsman, total_runs], axis=1)\nmatch_total_highest_combined_list = []\nfor name in match_total_highest_combined.index:\n    match_total_highest_combined_list.append({\n        \"highest\": match_total_highest_combined.loc[name].tolist()[0],\n        \"total\": match_total_highest_combined.loc[name].tolist()[1]\n    })\n\ntotal_highest_df = pd.DataFrame.from_records(match_total_highest_combined_list)\npyplot.scatter(total_highest_df.highest, total_highest_df.total)\npyplot.xlabel(\"Highest runs by a batsman\")\npyplot.ylabel(\"Total runs scored by the team\")\npyplot.show()","ccbf7cbe":"# Use `.corr` method\ncorr = total_highest_df.highest.corr(total_highest_df.total)\nprint(f'Correlation between \"Highest runs by a batsman\" and \"Total runs scored by the team\" is {corr}')","2e270392":"# Use `.cov` method\ncov = total_highest_df.highest.cov(total_highest_df.total)\nprint(f'Covariance between \"Highest runs by a batsman\" and \"Total runs scored by the team\" is {cov}')","1e74ba45":"corr * total_highest_df.highest.std() * total_highest_df.total.std()","7aa5f0ce":"# Step 1: Find slope\nm = corr * total_highest_df.total.std() \/ total_highest_df.highest.std()\nprint(f'Slope, m = {m}')\n\n# Step 2: Find (x_bar, y_bar)\nx_bar, y_bar = total_highest_df.highest.mean(), total_highest_df.total.mean()\nprint(f'(x_bar, y_bar) = ({x_bar}, {y_bar})')\n\n# Step 3: Find intercept\nb = y_bar - m * x_bar\nprint(f'Intercept, b = {b}')\n\n# Equation of the line\nprint(f'Equation of the line is y = {m:.2f}x + {b:.2f}')","c23b8ada":"pyplot.scatter(total_highest_df.highest, total_highest_df.total)\npyplot.xlabel(\"Highest runs by a batsman\")\npyplot.ylabel(\"Total runs scored by the team\")\n\n# Two points (x1, y1), (x2, y2) that follows the eqn y = mx + b\n(x1, y1), (x2, y2) = (0, b), (175, 175*m + b)\npyplot.plot([x1, x2], [y1, y2], 'r-')\npyplot.show()","d96853b2":"r_squared = corr * corr\nprint(f'R-squared = {r_squared:.2f}')","941f71f2":"rmse = math.sqrt(1 - r_squared) * total_highest_df.total.std()\nprint(f'Root mean square error = {rmse}')","e9764bd9":"# Scatter plot\n\nScatter plots help us see relationship between variables. We can infer by looking at the plot, whether there is a positive or negative or no association between the variables. Following is a sample scatter plot between **Variable A** and **Variable B**.\n\n![Scatter plot sample](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/scatter-plot-sample.png)\n\nWe can see that there is a ***positive association*** between **Variable A** and **Variable B**. i.e. Variable A increases as variable B increases.\n\nSome datasets many contain a few data points that doesn't fit the pattern. They're called outliers.\n\n![Scatter plot outliers](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/scatter-plot-outliers.png)\n\n# Correlation\n\n## Positive correlation \n\nA positive correlation exists between two variables A and B when A increases, B also increases and B decreases when A decreases. Graph between A and B would look like the following.\n\n![Positive correlation](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/positive-correlation.png)\n\n***Examples***\n* Height v\/s Weight of a person\n* Walking distance v\/s calories burnt\n* Product quality v\/s sales\n\n## Perfect Positive correlation\n\nA perfect positive correlation exists if there is a positive linear association between two variables. Which means, given variable A, we can exactly predict the value of B by multiplying with a positive number.\n\n![Perfect positive correlation](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/perfect-positive-correlation.png)\n\n***Examples***\n* Length of a square v\/s it\u2019s circumference\n* Weight in kilos v\/s weight in pounds\n\n## Negative correlation\n\nA negative correlation exists between two variables A and B, if A decreases when B increases and A increases when B decreases.\n\n![Negative correlation](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/negative-correlation.png)\n\n***Examples***\n* Mobile screen time v\/s remaining battery percentage\n* Current run rate v\/s Required run rate (in Cricket)\n\n## Perfect Negative correlation\n\nA perfect negative correlation exists if there is a negative linear association between two variables.\n\n![Perfect Negative correlation](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/perfect-negative-correlation.png)\n\n***Examples***\n* Power v\/s focal length of a lens\n* Frequency v\/s wavelength of light\n\n## Zero correlation\n\nIf two variables are independent of each other, then there is no correlation or zero correlation.\n\n![Zero correlation](https:\/\/raw.githubusercontent.com\/nowke\/nowke.github.io\/gh-pages\/src\/pages\/stats\/images\/zero-correlation.png)\n\n***Examples***\n* Bitcoin price v\/s speed of light\n* Your mobile usage per day v\/s neighbor\u2019s electricity bill\n\n# Correlation coefficient\n\nCorrelation coefficient $r$ measures the linear correlation between variables.\n* Value is between -1 to +1\n* Value closer to 1 &rarr; Strong positive linear relationship\n* Value closer to -1 &rarr; Strong negative linear relationship\n* Value cloesr to 0 &rarr; weak relationship\n\nFormula for calculating correlation coefficient between $x = (x_1, x_2, ..., x_n)$ and $y = (y_1, y_2, ..., y_n)$ is given by,\n\n$$\n\\begin{align}\nr = {1 \\over n-1} \\sum{({x_i - \\bar{x} \\over \\sigma_x}) \\cdot ({y_i - \\bar{y} \\over \\sigma_y})}\n\\end{align}\n$$\n\nIn terms of z-score,\n\n$$\n\\begin{align}\nr = {1 \\over n-1} \\sum{z_{x_i} \\cdot z_{y_i}}\n\\end{align}\n$$\n\nLet's draw a scatter plot between **X = Total runs scored** and **Y = highest score by a batsman** in an innings","183910f3":"We get a correlation coefficient of **0.658**. As we can observe from the graph and infer from the number, there's a **positive correlation**.","bc14bf14":"# Least squares regression\n\nWe can fit an approximate line for the scatter plot by a method called **least squares regression**. This can be helful in predicting unknown values. \n\nA line is represented by the equation $y = mx + b$.\n\nFormula for the slope, **$m$** is given by,\n\n$$\n\\begin{align}\nm = r \\cdot {\\sigma_y \\over \\sigma_x}\n\\end{align}\n$$\n\nThe line would go through the coordinates $(\\bar{x}, \\bar{y})$. Hence substituting $\\bar{x}$ and $\\bar{y}$ gives us the value for $b$.\n\n$$\n\\begin{align}\nb = \\bar{y} - m \\cdot \\bar{x}\n\\end{align}\n$$\n\nLet's find out the equation for the best-fit line for our scatter plot.","9b174b08":"Originally published in [Kaggle](https:\/\/www.kaggle.com\/nowke9\/statistics-3-bivariate-data)\n\n# Introduction\n\nBivariate numerical data involves two variables in a dataset. Relationship between two variables can be visualized using a **scatter plot** and measured using a metric called **correlation coefficient**.\n\nLet's setup our environment.","fad9871b":"Let's plot the line along with the scatter plot","6bb95333":"## Root mean square error (RMSE)\n\n**Residuals** are a measure of how far from the regression line data points are. **Root mean square error (RMSE)** is the standard deviation of the residuals. It is given by,\n\n$$\n\\begin{align}\nRMSE = \\sqrt{{1 \\over n} \\cdot \\sum{(y_i - \\hat{y})^2}}\n\\end{align}\n$$\n\nIn terms of R-squared,\n\n$$\n\\begin{align}\nRMSE = \\sqrt{1 - r^2} \\cdot \\sigma_y\n\\end{align}\n$$","7b658222":"# Covariance\n\nCovariance is another measure of joint variability between two random variables. It is calculated as,\n\n$$\n\\begin{align}\nCovariance(x, y) = {1 \\over n - 1} \\cdot {\\sum_{i=1}^n (x_i - \\bar{x}) \\cdot (y_i - \\bar{y})} = E[XY] - \\mu_x\\mu_y\n\\end{align}\n$$\n\nCorrelation in terms of covariance is given by,\n\n$$\n\\begin{align}\nCorrelation(x, y) = {Covariance(x, y) \\over \\sigma_x \\cdot \\sigma_y}\n\\end{align}\n$$","1ce44608":"While **RMSE** is an absolute measure, **R-squared** is a relative measure (value between 0 to 1).","3a4f7434":"Let's calculate the **correlation coefficient** between X and Y.","118f5a0a":"i.e. we have a variability of **43%** in our best-fit line","64762d4d":"## Coefficient of determination (R-squared)\n\n**Coefficient of determination** or **R-squared** is a measure of how close the data are fitted in the regression line. It is calculated as the square of correlation coefficient (r)\n\n$$\n\\begin{align}\nCoefficient\\,of\\,determination = r^2\n\\end{align}\n$$","23617bca":"We can verify the same using the above formula."}}