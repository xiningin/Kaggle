{"cell_type":{"b1a04f4a":"code","bd15492b":"code","e5b1b941":"code","7416dbe4":"code","1831917f":"code","9d6b0068":"code","5ac76641":"code","c0c02e4b":"code","036a8d56":"code","24fc4ce7":"code","6b15ff52":"code","4083e7bb":"code","d78d2883":"code","63141f03":"code","a47e287a":"code","46ae6894":"code","b93dfd15":"code","e4f2612c":"markdown","19dd10c0":"markdown","86235fb4":"markdown","5a847be7":"markdown","7c9bba88":"markdown","1b1875e8":"markdown","23a16b97":"markdown","6eca6319":"markdown","cf6044b7":"markdown","7035ab43":"markdown","d14326bc":"markdown","f016f077":"markdown","277a4cd1":"markdown","ce93972f":"markdown","542610b4":"markdown","03d7cc82":"markdown","9b0c2053":"markdown","a8ca8a00":"markdown","b0178843":"markdown","5d1f6e3b":"markdown","fd8a0777":"markdown","f40e043e":"markdown","e53a9d5c":"markdown","da22f982":"markdown","7bc49b0f":"markdown","b4e4b4d3":"markdown"},"source":{"b1a04f4a":"import numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n!pip install openpyxl\nimport pandas as pd\nfrom datetime import datetime\nfrom sklearn.preprocessing import MinMaxScaler\nimport statsmodels.api as sm\nfrom statsmodels.graphics import tsaplots\nfrom scipy.stats import wilcoxon\n!pip install mplfinance\nimport mplfinance as fplt\nimport plotly.express as px\nfrom sklearn.cluster import DBSCAN\nfrom sklearn.neighbors import NearestNeighbors","bd15492b":"BTC_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/btcusd.csv')\nETH_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/ethusd.csv')\nUSDT_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/ustusd.csv')\nSOL_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/solusd.csv')\nADA_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/adausd.csv')\nXRP_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/xrpusd.csv')\nLUNA_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/luna-usd.csv')\nDOT_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/dotusd.csv')\nAVAX_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/avax-usd.csv')\nDOGE_USD = pd.read_csv('..\/input\/392-crypto-currency-pairs-at-minute-resolution\/doge-usd.csv')","e5b1b941":"def date(df):\n    df['Date']= pd.to_datetime(df['Date'])\n    return df\n\nBTC_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/BTC-EUR.csv'))\nETH_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/ETH-EUR.csv'))\nUSDT_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/USDT-EUR.csv'))\nUSDC_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/USDC-EUR.csv'))\nADA_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/ADA-EUR.csv'))\nXRP_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/XRP-EUR.csv'))\nBNB_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/BNB-EUR.csv'))\nDOGE_EUR_simple = date(pd.read_csv('..\/input\/top-8-crypto-currency-data\/DOGE-EUR.csv'))\nTOTAL_simple = date(pd.read_excel('..\/input\/top-8-crypto-currency-data\/TOTAL.xlsx')).set_index('Date')","7416dbe4":"scale = MinMaxScaler()\nplt.figure(figsize=(28,12))\nplt.plot( BTC_EUR_simple.Date, scale.fit_transform(BTC_EUR_simple.Open.array.reshape(-1, 1)))\nplt.plot( ETH_EUR_simple.Date, scale.fit_transform(ETH_EUR_simple.Open.array.reshape(-1, 1)))\nplt.title('Figure 1: Bitcoin and Ethereum performance', size=15)\nplt.show()","1831917f":"def returns_list(l):   \n    ret = [((b - a) \/ a)*100 for a, b in zip(l[::1], l[1::1])]\n    return ret\n#sm.tsa.acf(BTC_EUR_simple_returns)","9d6b0068":"curr_fig, curr_ax = plt.subplots(figsize=(28, 8))\ntsaplots.plot_acf(returns_list(BTC_EUR_simple.Open), lags=100, color='g', ax=curr_ax, zero = False)\nplt.title('Figure 2: Autocorrelation Bitcoin Lag = 100', size=15)\nplt.show()\ncurr_fig, curr_ax = plt.subplots(figsize=(28, 8))\nfig = tsaplots.plot_acf(returns_list(ETH_EUR_simple.Open), lags=100, color='r', ax=curr_ax, zero = False)\nplt.title('Figure 3: Autocorrelation Ethereum Lag = 100', size=15)\nplt.show()","5ac76641":"print(wilcoxon(returns_list(BTC_EUR_simple.Open), zero_method = 'wilcox',correction = False))\nprint(wilcoxon(returns_list(ETH_EUR_simple.Open), zero_method = 'wilcox',correction = False))","c0c02e4b":"BTC_USD_min_2 = BTC_USD[(BTC_USD['time']\/1000>1435701600) & (BTC_USD['time']\/1000<1451516400)].reset_index(drop = True)\nBTC_USD_min_2['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_2.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_2))]","036a8d56":"plt.figure(figsize=(28,12))\nplt.plot(BTC_USD_min_2.time, scale.fit_transform(BTC_USD_min_2.open.array.reshape(-1, 1)))\nplt.axvline(x = datetime(2015,8,1), color = 'red')\nplt.axvspan(datetime(2015,7,29), datetime(2015,8,4), alpha=0.2, color='red')\nplt.axvline(x = datetime(2015,8,15), color = 'red')\nplt.axvspan(datetime(2015,8,12), datetime(2015,8,18), alpha=0.2, color='red')\nplt.axvline(x = datetime(2015,9,28), color = 'g')\nplt.axvspan(datetime(2015,9,25), datetime(2015,10,1), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,8), color = 'g')\nplt.axvspan(datetime(2015,10,5), datetime(2015,10,11), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,22), color = 'g')\nplt.axvspan(datetime(2015,10,19), datetime(2015,10,25), alpha=0.2, color='g')\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,28), datetime(2015,11,3), alpha=0.2, color='g')\nplt.title('Figure 4: Positive and negative news from the second half of 2015.', size=15)\nplt.show()","24fc4ce7":"BTC_USD_min_30_pos = BTC_USD_min_2[(BTC_USD_min_2['time']>datetime(2015,9,30)) & (BTC_USD_min_2['time']<datetime(2015,11,30))].reset_index(drop = True)\nBTC_USD_min_30_neg = BTC_USD_min_2[(BTC_USD_min_2['time']>datetime(2015,7,15)) & (BTC_USD_min_2['time']<datetime(2015,9,15))].reset_index(drop = True)\nBTC_EUR_day_30_pos = BTC_EUR_simple[(BTC_EUR_simple['Date']>datetime(2015,9,30)) & (BTC_EUR_simple['Date']<datetime(2015,11,30))].reset_index(drop = True)\nBTC_EUR_day_30_neg = BTC_EUR_simple[(BTC_EUR_simple['Date']>datetime(2015,7,15)) & (BTC_EUR_simple['Date']<datetime(2015,9,15))].reset_index(drop = True)\n\nplt.figure(figsize=(28,20))\nplt.subplot(321)\nplt.plot(BTC_EUR_day_30_pos.Date, BTC_EUR_day_30_pos.Open, 'ok-', markersize=4)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.title('Figure 5: Market impact of the publication in The Economist.', size=15)\nplt.ylabel('Price')\n\nplt.subplot(322)\nplt.plot(BTC_EUR_day_30_neg.Date, BTC_EUR_day_30_neg.Open, 'ok-', markersize=4)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\nplt.title('Figure 6: Effect of the August Fork on the market.', size=15)\n\nplt.subplot(323)\nplt.plot(BTC_USD_min_30_pos.time, BTC_USD_min_30_pos.open, 'ok', markersize=.1)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.ylabel('Minute Price')\n\nplt.subplot(324)\nplt.plot(BTC_USD_min_30_neg.time, BTC_USD_min_30_neg.open, 'ok', markersize=.1)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\n\nplt.subplot(325)\nplt.plot(BTC_USD_min_30_pos.time, BTC_USD_min_30_pos.volume, 'ok', markersize=.2)\nplt.axvline(x = datetime(2015,10,31), color = 'g')\nplt.axvspan(datetime(2015,10,21), datetime(2015,11,10), alpha=0.2, color='g')\nplt.ylabel('Minute Volume')\n\nplt.subplot(326)\nplt.plot(BTC_USD_min_30_neg.time, BTC_USD_min_30_neg.volume, 'ok', markersize=.2)\nplt.axvline(x = datetime(2015,8,15), color = 'r')\nplt.axvspan(datetime(2015,8,5), datetime(2015,8,25), alpha=0.2, color='r')\nplt.show()","6b15ff52":"BTC_USD_min_FC = BTC_USD[(BTC_USD['time']\/1000>1556661600) & (BTC_USD['time']\/1000<1559167200)].reset_index(drop = True)\nBTC_USD_min_FC['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_FC.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_FC))]\nplt.figure(figsize=(28,12))\nplt.plot(BTC_USD_min_FC.time, BTC_USD_min_FC.open)\nBTC_USD_min_FC = BTC_USD_min_FC.set_index('time')\nplt.axvline(x = datetime(2019,5,4,6,41), color = 'k', alpha=0.2)\nplt.axvspan(datetime(2019,5,3), datetime(2019,5,5), alpha=0.2, color='k')\nplt.title('Figure 7: Bitcoin Performance May 2019', size=15)\nplt.show()","4083e7bb":"BTC_USD_min_FC = BTC_USD[(BTC_USD['time']\/1000>1557975600) & (BTC_USD['time']\/1000<1557986400)].reset_index(drop = True)\nBTC_USD_min_FC['time'] = [pd.to_datetime(datetime.utcfromtimestamp(BTC_USD_min_FC.time[i]\/1000).strftime('%Y-%m-%d %H:%M:%S')) for i in range(len(BTC_USD_min_FC))]\nBTC_USD_min_FC = BTC_USD_min_FC.set_index('time')\nfplt.plot(\n    BTC_USD_min_FC,\n    type='candle',\n    style='charles',\n    title='Figure 8: BTC Flash Crash, 16 May - 2019',\n    figratio=(28,12),\n    ylabel='Price ($)',\n    volume=True\n            )","d78d2883":"from sklearn.decomposition import PCA\nfrom sklearn.preprocessing import StandardScaler\n\nTOTAL_simple_scaled = StandardScaler().fit_transform(TOTAL_simple.dropna())\nPCA = PCA()\npca = PCA.fit(TOTAL_simple_scaled)\nsummary = pd.DataFrame({'Variance' : pca.explained_variance_ratio_,\n                          'VarianceCum' : pca.explained_variance_ratio_.cumsum(),\n                          'Eigenvalue' : pca.explained_variance_,\n                          'PC' : np.arange(1, len(pca.explained_variance_ratio_)+1)})\n\nplt.figure(num = 3, figsize=(20,10))\n\nplt.subplot(211)\nplt.bar(data = summary,\n         height = 'Variance', x = 'PC', color=\"steelblue\")\nsns.lineplot(data = summary,\n         y = 'VarianceCum', x = 'PC', color=\"red\")\nfor i, v in enumerate(round(summary.VarianceCum,3)):\n    plt.text(summary.PC.tolist()[i], v+0.01, str(v), ha='right', \n             fontsize=12, color = 'red')\nplt.title('Figure 9: Variance and Cumulative Variance of each PC', size=15)\n\nplt.subplot(212)\nplt.figure(num = 3, figsize=(20,10))\nplt.bar(data = summary,\n         height = 'Eigenvalue', x = 'PC', color=\"steelblue\")\nfor i, v in enumerate(round(summary.Eigenvalue,1)):\n    plt.text(summary.PC.tolist()[i], v+0.01, str(v), ha='center', \n             fontsize=12, color = 'black')\nplt.title('Figure 10: Eigenvalues of each PC', size=15)\nplt.show()","63141f03":"pcs = pca.components_\nnormalized_pcs = list()\n\nfor eigen_vector in pcs:\n  normalized_values = eigen_vector\/eigen_vector.sum()\n  normalized_pcs.append(normalized_values)\n    \ncompA = [(TOTAL_simple[x]*y) for x, y in zip(TOTAL_simple.columns.tolist(), normalized_pcs[0])]\n\ndf = pd.concat(compA, axis=1, keys=[s.name for s in compA])\ndf['PC1']= df.iloc[:,:].sum(axis=1)\n\nplt.figure(figsize=(20,9))\nsns.lineplot(data = df.dropna(), x = df.dropna().index, y = 'PC1')\nplt.title('Figure 11: Market portfolio performance (PC1)', size=15)\nplt.show()","a47e287a":"plt.figure(figsize=(20,9))\nplt.stackplot(df.index,df.BTC_EUR, df.ETH_EUR,df.USDT_EUR, df.BNB_EUR, df.USDC_EUR, df.ADA_EUR, df.XRP_EUR, df.DOGE_EUR, labels=df.columns.tolist())\nplt.legend(loc='upper left')\nplt.title('Figure 12: Market portfolio composition', size=15)\nplt.show()","46ae6894":"correlation = df.loc[:, df.columns]\ncorr_matrix_p = correlation.select_dtypes(include = ['int', 'float']).corr(method = 'pearson')\n\nmask_p = np.zeros_like(corr_matrix_p)\nmask_p[np.triu_indices_from(mask_p)]=True\n\nplt.figure(num = 3, figsize=(13,10))\nsns.heatmap(corr_matrix_p, annot=True, annot_kws={\"size\": 10}, mask = mask_p)\nplt.title('Figure 13: Correlation Cryptocurrencies - Market ', size=15)\nplt.show()","b93dfd15":"projected = PCA.fit_transform(TOTAL_simple_scaled.T)\n\nclustering = DBSCAN(eps=15).fit(TOTAL_simple_scaled.T)\ny_pred_x = clustering.fit_predict(TOTAL_simple_scaled.T)\n\nfig = px.scatter_3d(x = projected[:,0], y = projected[:,1], z = projected[:,2], title = 'Figure 14: Cryptocurrency clustering', hover_name = TOTAL_simple.columns.tolist(), color = y_pred_x)\nfig.show()","e4f2612c":"To conclude, I thought it would be interesting to analyze **the composition of the cryptocurrency market based on Avellaneda and Lee\u2019s approach** (*Avellaneda & Lee (2008)*), which I have already used in another <a href=\"https:\/\/www.kaggle.com\/ralarellanolopez\/s-p-500-markowitz-analysis-from-pca#notebook-container\">publication<\/a>.\n\nAccording to Avellaneda and Lee, **a market portfolio that assumes the best possible representation of the movements of the sector can be generated by applying a Principal Component Analysis to the assets of a market**. Once we have applied the analysis, we are left with the first Principal Component that will behave the same as the market portfolio and, therefore, its evolution will be equal to the evolution that the market will undergo in the research period.","19dd10c0":"# <font size=\"6\"> Second level: Medium Efficiency  <\/font> ","86235fb4":"# <font size=\"6\"> Annex: Cryptocurrency Market Composition <\/font> ","5a847be7":"On May 16, 2019, Bitcoin suffered a series of Flash Crash around 5 am. **If we look at the long-term performance in the days following this Flash Crash (*Figure 7*) we can see how the trend was upward while it had been rather stable or downward. Thus, investors who took advantage of this Flash Crash, because of the volume of transactions they made, were able to take advantage of this extraordinary performance in a better way.**\n\nTo analyze the Flash Crash, I have made a chart (*Figure 8*) in which you can see **the price candlesticks for each minute between 3 and 6 a.m. on May 19, which is when the Flash Crash occurred.**","7c9bba88":"In *Figure 11*, we can see **the evolution of the market portfolio that has been generated as the first principal component of a Principal Component Analysis applied on the 8 main cryptocurrencies in the market.** The data has been scaled before performing the Principal Component Analysis, so the difference in the price dimension between the different cryptocurrencies should not alter the performance of this market portfolio, it is only going to be **the information in the set of returns of the different currencies that generates the market portfolio.**\n\nAs we have already seen, **the yield that can be seen in *Figure 11* contains approximately 80% of the market information and is, therefore, a very good indicator of how the cryptocurrency market is developing.**\n\nIn *Figure 12*, I will try to represent **the contribution of each of the different cryptocurrencies to the market portfolio.** In this way, it will be possible to see whether the market is explained to a greater or lesser extent by any of the cryptocurrencies.","1b1875e8":"In this case, **with a confidence level well above 99.99%, we can reject the null hypothesis on the performance of Bitcoin, and therefore, the median of the returns is equal to 0, with an equal number of positive and negative returns.** Thus, the market would behave as a random walk and could only be defeated by public or privileged information.\n\nIn the case of Ethereum, we can reach the same conclusion, but with a lower confidence level (98.3%), which is explained by the existence of autocorrelation between returns. Still, **we claim that it has weak efficiency.**","23a16b97":"As we can see, after performing the Principal Component Analysis, **the first of the components (or what is the same, the market portfolio) explains 76.3% of the information in our database, therefore, it gathers a large part of the market information.** According to the definition of the Principal Component Analysis, those cryptocurrencies that best represent the market performance will be highly correlated with this first principal component, while those assets that are more residual and whose performance is not related to the market performance but other variables or reasons, will not be correctly represented and will have a lower correlation in the first principal component (although they will be correctly represented in the second principal component).","6eca6319":"First, I create the function `returns_list()` that calculates the returns of an input list (daily or minute) and then I use the `plot_acf()` function to obtain the autocorrelation graphs for different lags.\n\nTo analyze these graphs, we must understand that **those values within the blue area imply that, with 95% confidence, we can reject the null hypothesis that the two time series (the original and the delayed X days) are correlated**. Fama's approach (*Fama, 1970*) determines that **the relationship we should focus on is the one between the time series of returns and the one-day deferred returns series.** (*However, I have calculated the autocorrelation for up to 100 lags*)","cf6044b7":"For the two mentioned news, **I have made a graph representing the evolution of the daily price in each of the two occasions, another graph with the price per minute in each of the two news and another graph with the effect on the volume of transactions in each of the two situations.**\n\nBefore commenting on the two situations that according to the theory of behavioral finance presented by Andrei Shleifer (*Shleifer, Professor of Economics Andrei, 2000*), **the investor takes longer to assume negative news than positive news** since positive news immediately generates a furor while negative news is hardly acceptable by those who own the asset about which information is being published.\n\nTherefore, if we look at the positive news about the publication of bitcoin on the cover of The Economist, we can see how **it takes a couple of days for the market to accept the information and the price per minute increases considerably**, as we can see in the second graph even though there is a correction the day after the publication, **the returns have practically doubled compared to the average of the previous days**. In the case of the price per minute, we can see how a couple of days after the publication there is a great disruption in the value per minute of the asset since, as can be seen in the volume graph, **the number of transactions of the asset increases as it becomes much more popular with a publication such as a cover story in The Economist** and therefore attracts a greater number of investors.\n\nIf we look at the negative news, we see how **investors take 2 to 3 days to take in the information** and thereafter there is a large drop in returns followed by a price correction and again a large drop in returns. If we look at the evolution of the volume and price per minute, we can see how **there is a big disruption 3 days after the publication of the news of the Fork and how the volume of transactions increases to levels never seen before in this reduced time series.**\n\n**Therefore, we can say that the market takes between 2 and 3 days to assume the published information and therefore, although there is a period in that time lag in which a person with faster information can beat the market, the price assumes the news that is published and therefore behaves like a random walk. Thus, according to Fama\u2019s hypothesis (*Fama, 1970*), the market can only be beaten with privileged information. Therefore, according to Fama\u2019s efficient market hypothesis, we can state that the bitcoin market assumes at least average efficiency.**","7035ab43":"<font size=\"6\"> Is the cryptocurrency market manipulated?  <\/font> ","d14326bc":"According to Fama\u2019s research (*Fama, 1970*), **in order to analyze the degree of strong efficiency of a market, performing the investment portfolio of a manager of an investment fund that invests in market assets should be compared with the usual market performance.** In this way, **it would be possible to find out whether there is insider information in the market that is exploited by the managers to manipulate the performance of the assets.**\n\nBecause of the *decentralized* nature of Bitcoin and that the information about its performance is not related to annual accounts or financial results but to investors\u2019 expectations, it seems relevant to me to analyze a phenomenon known as ***Flash Crash***. A *Flash Crash* occurs when there is a **momentary increase in the volume of transactions of an asset, while there is a very sharp drop in the price momentarily and that can only be observed by analyzing the returns to the second or minute of the shares.** This situation occurs thanks to the use of high-frequency machines to buy and sell cryptocurrencies.\n\nHere, since I have the information per minute of the Bitcoin price and this allows me to know what has been the minimum and maximum and the opening and closing of that minute, I can know if in any of the minutes there has been **an out of range situation in which a very low price has been paid and correlate this with the volume that has been traded in each minute** since it is information that I have. \n\nGraphically, on a candlestick chart like the one below, you can see a *Flash Crash* as a **candle with a very long downward shadow, followed by a situation where the volume traded increases greatly.**\n\n**A situation like a *Flash Crash* allows large holders of these assets to quickly sell a large amount of cryptocurrencies and automatically buy at a much lower price in order to take better advantage of the growth in yields, i.e. it allows investors with a large volume of assets and with high-frequency access to the market to manipulate yields, generating a situation similar to the one presented by Fama in mutual fund managers.**\n\n**This situation is beyond the understanding of the long-term investor or that only looks at the price per day or per hour, since in the long term and as can be seen in the graph, the price remains constant in its long-term trend, and the effect that this Flash Crash has had on the overall performance of the asset cannot be appreciated.**","f016f077":"**There are substantial differences in the data of the different cryptocurrencies**, from the date on which they began to be in the market (Bitcoin is one of the oldest and others such as Doge are more recent) to their performance. This situation means that, as we will see below, **although Bitcoin may have a certain degree of efficiency, other cryptocurrencies do not achieve this degree of efficiency.**\n\n**However, Bitcoin and Ethereum are the two main cryptocurrencies by volume, and their performance is quite similar as can be seen in *Figure 1*.**","277a4cd1":"To perform this analysis, **I focus on the Bitcoin data available in the following <a href=\"https:\/\/www.kaggle.com\/tencars\/392-crypto-currency-pairs-at-minute-resolution\">directory<\/a>, although it is true that I have applied these same tests on other crypto assets to validate the result.** \n\n The data are of the **Bitcoin - US Dollar price per minute**, collecting the maximum, minimum, opening and closing of each minute, as well as the volume traded. Thanks to this depth of information, we can apply some of the tests that I am going to explain, however, so I have loaded other databases with only daily information for each cryptocurrency, which can greatly simplify some of the analysis.\n\n","ce93972f":"# <font size=\"6\"> Bibliography <\/font> \n\n* *Avellaneda & Lee (2008): Marco Avellaneda & Jeong-Hyun Lee. (2008, Jul). Statistical Arbitrage in the U.S. Equities Market.*\n\n https:\/\/papers.ssrn.com\/sol3\/papers.cfm?abstract_id=1153505\n\n* *Brockwell y Davis (2013): Brockwell, P. J., & Davis, R. A. (2013). Time Series: Theory and Methods. Springer Publishing.*\n\n* *Fama (1970): Fama, E. F. (1970). Efficient Capital Markets: A Review of Theory and Empirical Work. The Journal of Finance, 25(2), 383.*\n\n https:\/\/doi.org\/10.2307\/2325486\n \n\n* *Shleifer, Professor of Economics Andrei (2000): Shleifer, Professor of Economics Andrei. (2000). Inefficient Markets: An Introduction to Behavioral Finance (1.a ed.). Oxford University Press, USA.*","542610b4":"To certify the degree of average efficiency of a market, you have to **analyze the speed with which it assumes the information that has just been published in the media**. According to Fama's theory (*Fama, 1970*) we must study the effect of announcements such as splits or interest rate increases on the performance of assets, however, in the case of an asset such as Bitcoin, there are no splits, but we can analyze the effect of news published related to this asset. To do this, I am going to focus on the Bitcoin market and analyze the effect that six news items have had on the price of the currency.\n\nThe 6 News items I am going to analyze occur between August and October 2015. Among them, we find positive and negative news.","03d7cc82":"Indeed, as can be seen in the graph, DBSCAN with a correct selection of the inputs determines that **there is a group of majority cryptocurrencies closely related to the market as we have already seen in the correlation analysis, which would include Bitcoin, Ethereum, Binance, Cardano and XRP. However, the algorithm leaves out of this group 2 cryptocurrencies essentially USDT and USDC, which were the least correlated with the market portfolio and whose returns will not be correlated with Bitcoin or with the performance of the crypto-asset market, but for other reasons. DOGE coin is also left out of this analysis as its performance is not based on actual market analysis, but on investors\u2019 irrationalities provoked on internet forums or by large holders of cryptocurrencies.**","9b0c2053":"***Negative News:***\n* **August 1, 2015: Mark Karpeles, CEO of now defunct Crypto-Exchange Mt Gox., arrested in Japan in allegations od Financial Fraud available <a href=\"https:\/\/www.france24.com\/en\/20150801-japan-bitcoin-arrest-exchange-theft-allegations-karpeles-france\">here<\/a>**\n\n* **August 15, 2015: New Fork (software update) named Bitcoin XT released available <a href=\"https:\/\/spectrum.ieee.org\/the-bitcoin-for-is-a-coup\">here<\/a>**\n\n***Possitive News:***\n\n* **September 28, 2015: Crypto currencies termed as a commodity by US regulating agency CTFC available <a href=\"https:\/\/www.cftc.gov\/sites\/default\/files\/idc\/groups\/public\/@lrenforcementactions\/documents\/legalpleading\/enfcoinfliprorder09172015.pdf\">here<\/a>**\n\n* **October 8, 2015: New Crypto-exchange Gemini launched, with FIDC insurance available <a href=\"https:\/\/www.coindesk.com\/markets\/2015\/10\/01\/gemini-exchange-moves-toward-launch-with-twin-nydfs-approvals\/\">here<\/a>**\n\n* **October 22, 2015: EU Declares no VAT on Bitcoin available <a href=\"https:\/\/www.cnbc.com\/2015\/10\/22\/bitcoin-now-tax-free-in-europe-after-court-ruling.html\">here<\/a>**\n\n* **October 31, 2015: Bitcoin article displayed en the front page of the \"Economist\" available <a href=\"https:\/\/www.economist.com\/weeklyedition\/2015-10-31\">here<\/a>**\n\nOf these, I have focused on the publication of Bitcoin in The Economist cover story as positive and the August Fork as negative as they are the two most closely related to the currency, and will therefore have the greatest effect on its performance.","a8ca8a00":"<font size=\"5\"> Andrei Shleifer and Eugene Fama Research <\/font> \n\nResearch by *Shleifer, Professor of Economics Andrei (2000)* on behavioral finance found that **irrationality of investor decision-making causes a market to be inefficient**. This irrationality of investors can be evidenced in facts such as **the belief in spurts** or the **low practice of diversification**, as well as in trying to **understand the market as a whole with only a few data**. \n\nTo analyze the degree of efficiency of the Bitcoin market, I will use ***Fama\u2019s (1970)* study on the Efficiency of Financial Markets** . In it, Fama determines that **efficiency of a market is determined by the type of information that the price of assets collects**. To do this, I must first divide the 3 types of information involved in the efficiency's analysis of a market: \n\n* **Historical Information:** it is that which happened in the past, it is found in databases or old publications. \n\n* **Public Information:** It is the one that is happening right now. It has just been published and will become historical in a short time.  \n\n* **Privileged Information:** It is the one in the hands of investment fund managers (in crypto assets in this case) and that the law pursues. \n\nAccording to the **Efficient Markets Hypothesis**, there are three types of efficiency depending on the type of information that the price of an asset gathers in its performance in the market:\n\n*  **Weak Efficiency:** We say that a market is weakly efficient when the asset price collects historical information on the asset\u2019s performance. In this way, the market can only be beaten with public information or privileged information. \n\n*  **Medium efficient:** We say that a market is medium efficient when the asset price gathers public information. Thus, the market can only be beaten with privileged information. \n\n*  **Strong efficiency:** We say that a market is strong efficient when the price of the assets includes all the information available in the market. In this way, the market cannot be beaten. \n\n *When we say that \u2018the market cannot be beaten\u2019 we mean that the market will behave as a random walk, and a return above the market average has the same probability of happening whether a fully supervised investment is made or a random investment is made.* \n\n **In this publication, I will practice the different tests to contrast the Bitcoin market efficiency hypothesis presented by Fama in his research (*Fama, 1970*). To do this, a series of analyses are applied at different levels to develop whether there is the possibility of beating the market with historical, public, or privileged information, as it does not behave as a random walk.** ","b0178843":"As can be seen in *Figure 2*, **the autocorrelation of the one-day deferred bitcoin returns is below the significance level, so we can say that past bitcoin returns do not explain future bitcoin returns and therefore** (and in the absence of the sign test) **bitcoin might be weakly efficient.**\n\nHowever, if we look at the autocorrelation of Ethereum\u2019s one-day deferred returns (*Figure 3*), we can see how **we cannot reject the null hypothesis of autocorrelation with sufficient confidence, so we can state that Ethereum cryptocurrency is not efficient, since what determines the current price are past returns, and not the rational expectations of investors.** (*This situation also applies to USDT and USDC cryptocurrencies.*)","5d1f6e3b":"As can be seen in the line of correlations of the different cryptocurrencies with the market portfolio or Principal Component 1, **Bitcoin has a correlation equal to 1, so the market behaves the same as the Bitcoin or what is the same, that performing the cryptocurrency market is based on performing the Bitcoin. Therefore, the analysis we have made in the first part of this publication about the efficiency of the Bitcoin market can apply to the general cryptocurrency market, since its performance is the same.**\n\nOn the other hand, **there is a group of cryptocurrencies that are highly correlated with the market portfolio, such as Ethereum Binance Cardano or XRP.** However, other cryptocurrencies, such as **USDT or USDC, do not have such a high correlation with the market and therefore their performance can be explained by different reasons than by performing Bitcoin.** DOGE coin is left out of this analysis since it is a cryptocurrency whose performance is different and which is very exposed to manipulation by large crypto-asset holders or Internet forums.\n\nTo conclude this analysis, it seems relevant to me to perform a **cluster analysis to see the degree to which cryptocurrencies are grouped, i.e., if the yields of these coins can determine whether there is a group in which many cryptocurrencies behave the same as the market and then other subgroups or atypical crypto assets that behave differently using the DBSCAN algorithm.**","fd8a0777":"# <font size=\"6\"> Third level: Strong efficiency <\/font> ","f40e043e":"**The trend during the period of these three hours is more or less constant downward, but if we analyze the results that are seen around 4:40, we see how a series of candles have some elongated downward shadows related to increases in the volume of transactions with losses (i.e., volume in red).**\n\nIn this way, we can certify that indeed on May 16, 2019, **the increase in selling volume around 4:40 gender that investors with high selling power took better advantage of the extraordinary returns that would come from that date represented in the uptrend thereafter** (*Figure 7*).\n\nTherefore, following Fama\u2019s reasoning (*Fama, 1970*) and relating the Flash Crashes with privileged information to manipulate the market, we can certify that **there are investors in the Bitcoin market with sufficient capacity to manipulate the momentary prices of the currency and be able to reduce its price.** In this way, they take better advantage than the market average of increases in asset yields in the short term. However, **they go unnoticed by those investors who invest in the long term or who only consider the daily or hourly price of the assets**, therefore they can manipulate the market momentarily and without being seen.\n\n# <font size=\"6\"> Conclusion of the market efficiency analysis <\/font> \n\n**Therefore, we can certify that, although the bitcoin market has weak efficiency and medium efficiency, it cannot pass the tests of the strong efficiency market. Therefore, we could only test the efficiency hypothesis against a medium efficient market and not against a strong efficient market.**\n\n**As a conclusion of this analysis, we could determine that the bitcoin market can be beaten with insider information since people with sufficient investment capacity and volume can alter the price of bitcoin and generate higher returns than the market average, while people whose investment strategy is based on the analysis of historical information or public information cannot beat the market since it correctly assumes this type of information in the asset's price.**","e53a9d5c":"In order to corroborate that, indeed, a market is weakly efficient, Fama determines that the sign test should be applied. In this case, **we use the Wilcoxon Signed Ranks Test that allows us to reject, with a given confidence, the null hypothesis that the median is different from 0, and therefore, there are as many positive as negative numbers in the asset returns.**","da22f982":"# <font size=\"6\"> First level: Weak efficiency  <\/font> \n\nAs I have already mentioned, **a weak efficient market contains historical stock performance information but can be beaten with public or insider information**. Fama's study (*Fama, 1970*) establishes two ways of analyzing weak market efficiency:\n\n* **Study of the autocorrelation of returns:** We can say that a market is weakly efficient when the returns of its assets have an autocorrelation equal to 0, i.e. **the return of the previous period does not determine the return of the following period**. For the analysis of this point, I use the *Brockwell and Davis (2013)* approach present in the 'statsmodels.graphics' package. \n\n* **Sign analysis:** according to Fama's hypothesis, **the number of positive and negative returns in the historical stock price should be equal**, having a median equal to 0, for the market to be average efficient. **To test the null hypothesis that the median of the returns is equal to 0, I use the Wilcoxon test.**","7bc49b0f":"In recent years, **words such as blockchain, NFT, or cryptocurrency are flooding the headlines and news of specialized investment websites** and are increasingly becoming an investment alternative in the portfolios of millions of investors. To a large extent, the complexity behind this type of assets is beyond the understanding of a large part of the population and, therefore, **their performance in the markets may not be because of a series of aim reasons** (as the performance of traditional assets) **but because of movements based on the irrationality of investors that cause the market to be inefficient** (and therefore, it does not collect all the information available to investors, but it is moved by the irrational behavior or manipulations of these).","b4e4b4d3":"As we can see in *Figure 12*, **Bitcoin explains practically the entire market, especially in the years before 2021**. Specifically, from 2021 onwards, currencies such as Ethereum or Binance become more relevant. Despite this, their contribution to the explanation of the market remains marginal compared to the great weight of Bitcoin (*again, the data are scaled so that the effect of the different dimensions on the price of the coins should not affect the Principal Component Analysis, which is based on the actual information contained in this price*).\n\nOnce I have reached this conclusion, I find it interesting to do a **correlation analysis** to see which are those cryptocurrencies that are best explained by the market and those that are not correctly explained by this market."}}