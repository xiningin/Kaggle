{"cell_type":{"5c2e4bdd":"code","ff774fe3":"code","fe5ede18":"code","e1517719":"code","70506568":"code","9c6ed08e":"code","b74a894d":"code","0d40ccaf":"code","731b1017":"code","0f3e4251":"code","575330e3":"code","498f02f7":"code","532f6b1f":"code","e3c03147":"code","c2e98717":"code","fe709088":"code","512c718a":"code","e9d67cd7":"code","7bad326e":"code","90b8db45":"code","5ac099a2":"code","656e1144":"code","4806ca98":"code","c309784f":"code","25f22744":"markdown","73d2f3d1":"markdown","d580d07b":"markdown","729734b9":"markdown","4be8998b":"markdown","123fa779":"markdown","053c14a6":"markdown","439bd248":"markdown","c494b5c7":"markdown","a8e8173e":"markdown","0586bb6c":"markdown"},"source":{"5c2e4bdd":"#Importer les packages python\nimport geopandas as gpd\nimport matplotlib\nimport pandas as pd\nimport numpy as np\nimport descartes\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport scipy.stats as stats\npd.options.mode.chained_assignment = None","ff774fe3":"#D\u00e9finir la chemin pour le jeu de donn\u00e9es\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input\/'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","fe5ede18":"# Ici, nous travaillons sur les transactions en 2020 comme une exemple\ndf_full20 = pd.read_csv('\/kaggle\/input\/france-geolocated-dvf-land-values\/2020-full.csv')","e1517719":"#La base brute pour l'ann\u00e9e 2020\ndf_full20.head(5)","70506568":"#V\u00e9rifier le taux des donn\u00e9es manquantes dans la base brutes\ndf_full20.isnull().sum()\/len(df_full20)*100","9c6ed08e":"df_final = df_full20.drop(['numero_disposition',\n                          'ancien_code_commune',\n                          'adresse_suffixe',\n                           'ancien_nom_commune',\n                           'ancien_id_parcelle',\n                           'numero_volume',\n                           'lot1_numero',\n                           'lot1_surface_carrez',\n                           'lot2_numero',\n                           'lot2_surface_carrez',\n                           'lot3_numero',\n                           'lot3_surface_carrez',\n                           'lot4_numero',\n                           'lot4_surface_carrez',\n                           'lot5_numero',\n                           'lot5_surface_carrez',\n                           'code_nature_culture',\n                           'nature_culture',\n                           'code_nature_culture_speciale',\n                           'nature_culture_speciale'],axis= 1)","b74a894d":"#Changer le types de variables\ndf_final['code_postal'] = df_final['code_postal'].astype('object')\ndf_final['code_type_local'] = df_final['code_type_local'].astype('object')\ndf_final['type_local'] = df_final['type_local'].astype('object')\ndf_final['nombre_pieces_principales'] = df_final['nombre_pieces_principales'].astype('object')\ndf_final['code_departement'] = df_final['code_departement'].astype('object')\ndf_final['code_commune'] = df_final['code_commune'].astype('object')\ndf_final['nombre_lots'] = df_final['nombre_lots'].astype('float64')","0d40ccaf":"df_final.info()","731b1017":"df_final['type_local'].value_counts(dropna = False, normalize = True).head()","0f3e4251":"#Cr\u00e9er les graphiques!\nplt.figure(figsize=(10,10))\nlabels = ['Don\u00e9es Manquantes', 'Maison', 'Appartement', 'D\u00e9pendance', 'Local industriel. commercial ou assimil\u00e9']\ncolors = ['#ff9999','#66b3ff','#99ff99','#ffcc99','#fffc52']\narea = [41, 21.4, 18, 12.9, 0.37]\n#area = [91.93, 6.88, 0.82, 0.28,0.056]\nexplode = (0.05,0.05,0.1,0.1,0.1)\nplt.pie(area, labels=labels, explode=explode, colors= colors, startangle=65, autopct='%1.1f%%',shadow='True')\nplt.title(label= 'R\u00e9partition de la variable type_local')\nplt.legend()\nplt.show()","575330e3":"df_final['code_type_local'].value_counts(dropna = False, normalize = True).head()","498f02f7":"# R\u00e9partition de la nature de mutation du bien!\ndf_final['nature_mutation'].value_counts(dropna = False, normalize = True).head()","532f6b1f":"# Visualiser la r\u00e9partition de la nature de mutation\nplt.figure(figsize=(10,10))\nlabels = ['Vente', 'VEFA', 'Echange', 'Vente Terrain', 'Adjudication']\ncolors = ['#ff9999','#66b3ff','#99ff99','#ffcc99','#fffc52']\narea = [92, 6.8, 0.82, 0.28, 0.56]\n#area = [91.93, 6.88, 0.82, 0.28,0.056]\nexplode = (0.05,0.05,0.2,0.3,0.4)\nplt.pie(area, labels=labels, explode=explode, colors= colors, startangle=65, autopct='%1.1f%%',shadow='True')\nplt.legend()\nplt.show()","e3c03147":"#Traiter les donn\u00e9es manquantes","c2e98717":"# L'imputation des donn\u00e9es manquantes\ndf_final['adresse_numero'] = df_full20['adresse_numero'].fillna(\"None\")\ndf_final['adresse_nom_voie'] = df_full20['adresse_nom_voie'].fillna(\"None\")\ndf_final['adresse_code_voie'] = df_full20['adresse_code_voie'].fillna(\"None\")\ndf_final['code_type_local'] = df_full20['code_type_local'].fillna(\"None\")\ndf_final['type_local'] = df_full20['type_local'].fillna(\"None\")\ndf_final['valeur_fonciere'] = df_final['valeur_fonciere'].transform(lambda x: x.fillna(x.mean()))\ndf_final['surface_reelle_bati'] = df_full20['surface_reelle_bati'].fillna(0)\ndf_final['nombre_pieces_principales'] = df_full20['nombre_pieces_principales'].fillna(0)\ndf_final['longitude'] = df_full20['longitude'].fillna(0)\ndf_final['latitude'] = df_full20['latitude'].fillna(0)\ndf_final['surface_reelle_bati'] = df_full20['surface_reelle_bati'].fillna(0)\ndf_final['surface_terrain'] = df_final['surface_terrain'].fillna(0)","fe709088":"#Verifier s'il y a des donn\u00e9es manquantes dans la base\ndf_final.isnull().sum()\/len(df_full20)*100","512c718a":"#3) Filtrer les donn\u00e9es pour avoir une base qui contient que les donn\u00e9es pour la local commercial, industriel et assimil\u00e9\nfiltered_df = df_final[(df_final[\"nature_mutation\"] == 'Vente')  &  (df_final[\"code_type_local\"] == 4)]","e9d67cd7":"filtered_df.head(3)","7bad326e":"#V\u00e9rifier le nombre des variables quantitatives et qualitatives dans notre jeu de donn\u00e9e\nnum_vars = filtered_df.dtypes[filtered_df.dtypes != \"object\"].index\ncat_vars = filtered_df.dtypes[filtered_df.dtypes == \"object\"].index\n\nprint(\"Nombres des variables quantitatives: \", len(num_vars))\nprint(\"Nombres des variables qualitatives: \", len(cat_vars))","90b8db45":"#Cr\u00e9er une fonction pour calculer la corr\u00e9lation entre les variables quantitatives\ndef spearman(frame, features):\n    spr = pd.DataFrame()\n    spr['feature'] = features\n    spr['spearman'] = [frame[f].corr(frame['valeur_fonciere'], 'spearman') for f in features]\n    spr = spr.sort_values('spearman')\n    plt.figure(figsize=(6, 0.25*len(features)))\n    sns.barplot(data=spr, y='feature', x='spearman', orient='h')\n    \nfeatures = num_vars\nspearman(filtered_df, features)","5ac099a2":"#Matrice de corr\u00e9lation entre les variables (heatmap)\ncorrmat = filtered_df.corr()\nplt.subplots(figsize=(12,9))\nsns.heatmap(corrmat, vmax=0.9, square=True)","656e1144":"#Box Plot\ndata = pd.concat([filtered_df['valeur_fonciere'], filtered_df['code_departement']], axis=1)\nf, ax = plt.subplots(figsize=(30, 30))\nfig = sns.boxplot(x=filtered_df['code_departement'], y=filtered_df['valeur_fonciere'], data=data)\nfig.axis(ymin=0, ymax=65000000);","4806ca98":"import scipy.stats as st\nsns.distplot(filtered_df['valeur_fonciere'])\n\nprint(\"Skewness: %f\" % filtered_df['valeur_fonciere'].skew())\nprint(\"Kurtosis: %f\" % filtered_df['valeur_fonciere'].kurt())","c309784f":"#Ici, nous transformons la valeur fonciere en log pour voir la distribution de cette variable: \nimport scipy\nfrom scipy.stats import norm\ny = np.log(filtered_df['valeur_fonciere'])\nsns.distplot(y, fit=norm);\nfig = plt.figure()","25f22744":"**** Pour analyser la corr\u00e9lation entre les variables dans notre jeu de donn\u00e9es, nous utlisons la test spearman et pearson pour savoir la r\u00e9lation entre les variables quantitatives.\n**** Ici, nous trouvons que la valeur fonci\u00e8re est corr\u00e9l\u00e9 possitivement avec la surface du terrain et la surface reelle du b\u00e2timent. C'est \u00e0 dire plus la surface est grande, plus la valeur est cher!","73d2f3d1":"### 3) Pour la classification les bureaux, commerces et entrepots \u00e0 partir de la variable type_local je vois que:\n - Avec seulements les donn\u00e9es disponibles dans ce jeu de donn\u00e9es, pour classfier les types des b\u00e2timents nous pourrons utiliser certaines m\u00e9thodes comme la K-Nearest Neighboor ou le Clustering mais personnellement, je trouves que les r\u00e9sultats ne seronts pas signigicatives vu que nous n'avons pas beaucoup des informations concernant les caract\u00e9ristiques du bien pour faire la classification.\n - De l'autre c\u00f4t\u00e9, pour chaque bien on a les donn\u00e9es g\u00e9olocalis\u00e9e (variables coordinates), c'est une information tr\u00e8s important. \u00c0 partir de la variable cordinnates, nous pouvons trouver les images \"street view\" pour chaque b\u00e2timent avec l'API Google Street View Static. Et puis, nous pouvons collecter tous les images \"fa\u00e7ade\" de chaque b\u00e2timents et cr\u00e9er une dataset contient ques les images.\n - Avec ce dataset, nous pouvons faire ensuite une mod\u00e8le R\u00e9seaux Neuronal Convolutif pour faire la classification des b\u00e2timents \u00e0 partir de ces images (Il existe aussi d'autres techniques classification comme la SVM, RandomForest Classifier, Regression Logistique Multinomial, etc.).\n - Mais vu que l'API de google n'est pas gratuit pour collecter les images. Donc, j'ai essay\u00e9 de faire une exemple en collectant une base des images qui contients ques les photos de fa\u00e7ades pour les batiments en Etats-Unis. Ce dataset contient 6600 images (en trois classe: industrial, office building, retail) pour les donn\u00e9es apprentisage et 845 images pour la validation (3 class: industrial, office building, retail). \n - Ce jeux de donn\u00e9es, je consid\u00e8re comme une proposition pour trouver la m\u00e9thodologie pour la classification des b\u00e2timents. C'est pour cette raison, la partie de la construction du mod\u00e8le Machine Learning s'est mis dans la deuxi\u00e8me jupyter notebook qui s'appelle Classification b\u00e2timents.","d580d07b":"### Analyse exploratoire pour certains variables importants!\n\n* L'objectif de cette \u00e9tape est de savoir la distribution des variables importants dans cette base et de voir la relation entre les variables explicatives dans ce jeu avec le prix de l'immobili\u00e8re (la valeur fonci\u00e8re).\n* Nous commen\u00e7ons par l'\u00e9tude de la distribution et la r\u00e9partition des variables qualitatives et quantitatives dans ce jeu de donn\u00e9es et ensuite nous allons v\u00e9rifier la r\u00e9lation (la corr\u00e9lation) entre les variables \u00e0 la fin de cette \u00e9tape!","729734b9":"**Pour \u00e9tudier la corr\u00e9lation entre une variable quantitative et une variable qualitative, nous pouvons utiliser le box-plot pour voir la r\u00e9lation entre eux. Ici, j'\u00e9tudie la relation entre le valeur fonci\u00e8re et le code_departement. L'id\u00e9e est pour voir si la localisation g\u00e9ographique du bien a une impact sur le prix de transaction immobili\u00e8re. Les commentaires se trouvent en dessous du graph.**","4be8998b":"### 2) Pr\u00e9paration des donn\u00e9es:\n\nPour une \u00e9tude quantitatives, la partie pr\u00e9paration des donn\u00e9es joue un r\u00f4le tr\u00e8s important. Plus on travail bien sur cette partie, plus on a les chances pour avoir les r\u00e9sultats pertinences dans les \u00e9tapes analyses et mod\u00e9lisation, pr\u00e9diction les donn\u00e9es! Pour cette \u00e9tape, nous avons r\u00e9alis\u00e9 les techniques comme:\n               - Cr\u00e9er les dataset brutes et v\u00e9rifier les donn\u00e9es dans ce dataset.\n               - Traitement des donn\u00e9es manquantes et remplacer les donn\u00e9es manquantes par m\u00e9thode l'imputation.\n               - Changement les types de certaines variables et choisir les variables importants pour analyser!\n               - L'analyse exploratoire des donn\u00e9es pour voir la r\u00e9lation entre la valeur fonci\u00e8re et d'autres variables dans le jeu de donn\u00e9es. Pour le traitement des outliers (donn\u00e9es ab\u00e9rrantes) nous ne pouvons pas faire en raison des biens immobiliers dans ce jeu de donn\u00e9es sont h\u00e9t\u00e9rog\u00e8nes et de plus, pour la partie mod\u00e9lisation et la classification des donn\u00e9es nous travaillons sur une autre jeu de donn\u00e9es. C'est pour cette raison, je ne mets pas la partie traitement des outliers ici. \n             ","123fa779":"* Ici, nous constatons que la base brute contient beaucoup de variables qui ont un taux de plus de 90% des donn\u00e9es manquantes. Donc, pour ces variables, nous avons exclu\u00e9 dans notre jeu de donn\u00e9es. \n* Pour les autres variables qui ont un taux de moins de 40%, nous utilisons la m\u00e9thode de l'imputation de donn\u00e9es pour remplacer les donn\u00e9es manquantes ( par exemple, on peut remplacer les donn\u00e9es manquantes dans la valeur fonci\u00e8re par la valeur moyenne ou par le m\u00e9dian afin de ne pas changer la distribution de cette variables!)\n","053c14a6":"* Ici, on voit que pour les transactions immobili\u00e8res en 2020, les types de biens d'ici sont r\u00e9partie diff\u00e9rement!\n                   - 43.8% les transactions n'a pas \u00e9t\u00e9 saisi par le type de biens.\n                   - 22.8% les transantions concerne les maisons en France.\n                   - 19.2% les transantions concerne les appartements en France.\n                   - Les transactions des bureaux\/commerces\/entrep\u00f4ts sont juste 0.4% par rapport la volume totale!","439bd248":"Ici, nous trouvons que 91% les tranctions immobili\u00e8res en 2020 pour tous les r\u00e9gions en France sont les ventes immobili\u00e8res. La vente en VEFA est juste 6.8% et les restes sont moins de 2% pour les autres types de transactions.\nDu coup, nous serons travailler sur la Vente dans ce jeu de donn\u00e9es (en excluant tous les autres types de transactions).","c494b5c7":"On voit ici que la distribution de la valeur fonciere est sysm\u00e9trie positivement. Cela indique une distribution d\u00e9cal\u00e9e \u00e0 gauche de la m\u00e9diane, et donc une queue de distribution \u00e9tal\u00e9e vers la droite. Dans les \u00e9tudes de prix immobilier (notament pour la mod\u00e9lisation et l'estimation prix immobili\u00e8re), normalement nous transformons le prix en logarithme (log_normale) et de plus, on va s'int\u00e9resser au prix par m2 plut\u00f4t que le prix total d'une transaction. \n\nPar ailleurs, on trouves que le type de bien ici sont redondances (il comprend les bureaux, les commerces, les entrep\u00f4t) dont cela donne des valeurs foncieres tr\u00e8s h\u00e9t\u00e9rog\u00e8nes! ","a8e8173e":"### 1) Analyse brivement: \n* La base DVF enregistre les donn\u00e9es des transactions immobili\u00e8res de tous les communes en frances m\u00e9tropoles (hors Alsace et Moselle) ainsi que les d\u00e9partement d'Outre-Mer (hors Mayotte). \n* \u00c0 partir de ce jeux de donn\u00e9es, nous pourons faire des analyses pour la valeur fonci\u00e8res en france selon diff\u00e9rentes crit\u00e8res (typologie de biens, la nature de mutation,cr\u00e9er des outils cartographique interactive avec la valeur fonci\u00e8re par chaque communes et par le d\u00e9partement (par exemple, comme les outils cartographiques que MeilleursAgents a utilis\u00e9, nous pourrons faire la carte de prix par m\u00b2 des bureaux\/commerces\/entrep\u00f4ts par communes en France). \n* Nous pourrons savoir aussi \u00e0 partir de ce jeu de donn\u00e9es l'\u00e9voution selon le temps ( entre 2014 et 2020 ) pour chaque type de biens.\n* Le point faible de ce jeu, c'est qu'il n'y a pas mal des informations manquantes (comme les caract\u00e9ristiques du bien, le nombre d'\u00e9tage, ascenseur, ann\u00e9e de construction ...) qui nous permet de faire une estimation la valeur du bien en utilisant la m\u00e9thode h\u00e9donique et en prendre en compte l'impacte de la localisation spatial du bien.\n* De plus,le jeu de donn\u00e9es contient aussi beaucoup des donn\u00e9es manquants.","0586bb6c":"* Gr\u00e2ce \u00e0 ce graphique, je vois que la valeur fonci\u00e8re est forte corr\u00e9l\u00e9 avec la localisation du bien. Par exemple, pour les d\u00e9parments dans la r\u00e9gions Ile-de-France, on voit la diff\u00e9rent tr\u00e8s claire par rapport les autres d\u00e9partements. Les biens dans ces d\u00e9partements a \u00e9t\u00e9 vendu plus chers par rapport les autres r\u00e9gions de la France. On peut conclure que, pour les prix immobili\u00e8re en France, la r\u00e9gions Ile-de-France est un cas sp\u00e9cialis\u00e9 en terme de prix, et la volume de transaction!\n\n* Pour les autres d\u00e9partments en France, on trouve que les d\u00e9partement Alpes-maritimes - Nice, Bouches-du-Rh\u00f4ne - Marseille, Haute-garonne - Toulouse, Loire-atlantique - Nantes, Nord - Lille, Gironde - Bordeaux, Rh\u00f4ne - Lyon, les prix sont toujours plus haut que les autres r\u00e9gions de la France (sauf Ile-de-France). \n* Cela est compr\u00e9hensible, parce que ce sont les plus grands m\u00e9tropoles fran\u00e7aises ou les march\u00e9 immobiliers sont tendu. Par exemple pour le march\u00e9 des bureaux, lyon prend la 2 \u00e8me position juste apr\u00e8s le Grand Paris! "}}