{"cell_type":{"3ce62a7f":"code","b34fb253":"code","76b9249c":"code","a828cc46":"code","e62fbca4":"code","d814ed45":"code","c506ac31":"markdown","2f37f2c5":"markdown"},"source":{"3ce62a7f":"import pandas as pd\nimport numpy as np\nimport os\nimport requests\nimport json\nimport datetime\nimport time","b34fb253":"BUFFER = 1\n\nbase_url = \"https:\/\/www.kaggle.com\/requests\/EpisodeService\/\"\nget_url = base_url + \"GetEpisodeReplay\"\nlist_url = base_url + \"ListEpisodes\"","76b9249c":"# inital team list\n\nr = requests.post(list_url, json = {\"submissionId\":  18703109}) # ID is sample value\nrj = r.json()\n\nteams_df = pd.DataFrame(rj['result']['teams'])","a828cc46":"teams_df.sort_values('publicLeaderboardRank', inplace = True)\nteams_df.head(10)","e62fbca4":"def saveEpisode(sub_id, epid, rj):\n    # request\n    re = requests.post(get_url, json = {\"EpisodeId\": int(epid)})\n        \n    # save replay\n    with open('{}_{}.json'.format(sub_id, epid), 'w') as f:\n        f.write(re.json()['result']['replay'])\n\n    # save episode info\n    with open('{}_{}_info.json'.format(sub_id, epid), 'w') as f:\n        json.dump([r for r in rj['result']['episodes'] if r['id']==epid][0], f)","d814ed45":"sub = 18669376 # nagiss's public LB submission ID\n\nstart_time = datetime.datetime.now()\nr = BUFFER;\nresult = requests.post(list_url, json = {\"submissionId\":  int(sub)})\nteam_json = result.json()\nteam_df = pd.DataFrame(team_json['result']['episodes'])\nprint('{} games for {}'.format(len(team_df), sub))\n\nfor i in range(len(team_df)):\n    epid = team_df.id.iloc[i]\n    \n    saveEpisode(sub, epid, team_json); r+=1;\n    try:\n        size = os.path.getsize('{}_{}.json'.format(sub, epid)) \/ 1e6\n        print('Saved Episode #{} @ {:.1f}MB'.format(epid, size))\n    except:\n        print('file {}_{}.json did not seem to save'.format(sub, epid))    \n    if r > (datetime.datetime.now() - start_time).seconds:\n        time.sleep( r - (datetime.datetime.now() - start_time).seconds)","c506ac31":"\u4e0a\u4f4d\u30c1\u30fc\u30e0\u306e\u6226\u7565\u3092\u77e5\u308b\u3053\u3068\u306f\u3001\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30da\u3067\u306f\u3068\u3066\u3082\u91cd\u8981\u3067\u3059\u3002\u904e\u53bb\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30da\uff08Halite & Football\uff09\u3067\u306f\u3001\u4e0a\u4f4d\u30c1\u30fc\u30e0\u306e\u5bfe\u6226\u30ed\u30b0\u3092\u5b66\u7fd2\u3057\u305f\u30c1\u30fc\u30e0\u304c\u91d1\u30e1\u30c0\u30eb\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306enotebook\u3067\u306f\u3001\u6700\u4e0a\u4f4d\u30c1\u30fc\u30e0(nagiss)\u306e\u5bfe\u6226\u30ed\u30b0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nKnowing the top team's strategy is very important in Simulation competition. In past simulation competitions (Halite & Football), the team that learned from logs of the top teams got the gold medal.\nIn this notebook, we download the match logs of the top team(nagiss).","2f37f2c5":"## Get Topteam(nagiss) Episode"}}