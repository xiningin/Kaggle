{"cell_type":{"3d687c43":"code","8a979a13":"code","fbd23904":"code","c3dd8cce":"code","ecab2980":"code","49be6279":"code","1779a55d":"markdown","3ba6351b":"markdown","8e0e66e0":"markdown","62683ea9":"markdown","9c91d08a":"markdown","d498f59e":"markdown","7528041c":"markdown","8cebb83e":"markdown"},"source":{"3d687c43":"from google.cloud import bigquery\nclient = bigquery.Client()","8a979a13":"from google.cloud import bigquery\nimport pandas as pd\n\nclient = bigquery.Client()\n\nquery = \"\"\"\n#standardSQL\n    SELECT\n    COUNT(block_id)\n    FROM `bigquery-public-data.bitcoin_blockchain.blocks`\n\"\"\"\n\nquery_job = client.query(query)\n\niterator = query_job.result(timeout=30)\nrows = list(iterator)\n\n# Transform the rows into a nice pandas dataframe\ntransactions = pd.DataFrame(data=[list(x.values()) for x in rows], columns=list(rows[0].keys()))\n\n# Look at the first row, which will contain the count. \ntransactions.head(1)","fbd23904":"aggquery = \"\"\"\nWITH last_year AS (\n  SELECT transaction_id, DATE(TIMESTAMP_MILLIS(timestamp)) as DAY\n  FROM `bigquery-public-data.bitcoin_blockchain.transactions`\n  WHERE DATE(TIMESTAMP_MILLIS(timestamp)) > DATE_SUB(DATE(2018,9,10), INTERVAL 1 YEAR))\nSELECT DAY, COUNT(transaction_id) AS COUNT_OF_TRANSACTIONS\nFROM last_year\nGROUP BY DAY\nORDER BY COUNT_OF_TRANSACTIONS DESC\n\"\"\"","c3dd8cce":"client = bigquery.Client()\n\n# Taking the query from the previous cell. \n\nquery_job = client.query(aggquery)\n\niterator = query_job.result(timeout=30)\nrows = list(iterator)\n\n# Transform the rows into a nice pandas dataframe\ntransactionsum = pd.DataFrame(data=[list(x.values()) for x in rows], columns=list(rows[0].keys()))\n\n# Look at the top ten rows in the dataframe, which will contain the top ten results. \ntransactionsum.head(10)","ecab2980":"client = bigquery.Client()\n\ndayquery = \"\"\"\nWITH last_year AS (\n  SELECT transaction_id, DATE(TIMESTAMP_MILLIS(timestamp)) as DAY\n  FROM `bigquery-public-data.bitcoin_blockchain.transactions`\n  WHERE DATE(TIMESTAMP_MILLIS(timestamp)) > DATE_SUB(DATE(2018,9,10), INTERVAL 1 YEAR))\nSELECT DAY, COUNT(transaction_id) AS COUNT_OF_TRANSACTIONS\nFROM last_year\nGROUP BY DAY\nORDER BY DAY DESC\n\"\"\"\n\nquery_job = client.query(dayquery)\n\niterator = query_job.result(timeout=30)\nrows = list(iterator)\n\n# Transform the rows into a nice pandas dataframe\ntransactionsday = pd.DataFrame(data=[list(x.values()) for x in rows], columns=list(rows[0].keys()))\n\n# Look at the ten top rows as a preview\ntransactionsday.head(10)","49be6279":"import matplotlib\nfrom matplotlib import pyplot as plt\n%matplotlib inline\n\ntransactionsday.plot()","1779a55d":"Let's try now to build a SQL query that will help us clarify on what days the largest amount of transactions were conducted in the last year of the dataset. This will help us unparse some of the transactions-level data. Note that since the Bitcoin database holds no data past September 10th, 2018, we'll have to use that as a starting reference point for our data comparision. ","3ba6351b":"In the following block, we're going to take a simple SQL query and get a count transferred into a Pandas dataframe, just to show you how to take sample SQL queries into a dataframe that can be manipulated into machine learning projects.","8e0e66e0":"We can see that a lot of the highest-transaction days cluster around December 2017, which makes sense because that is around the all-time high price around December 16th to 17th of 2017. Now let's get that table ordered by day instead of by highest value and plot it to see if there are any interesting patterns in transaction volume across time. ","62683ea9":"Now, we're ready to work with the data to do different machine learning projects. For more ideas, refer back to our article.","9c91d08a":"In this kernel, I'll lay out a few queries you can perform on the blockchain data present in Google BigQuery's dataset. Let's start by initiating Kaggle's bigquery client.","d498f59e":"We see that there are 540584 block_ids, or 540584 blocks of the Bitcoin blockchain in the dataset. ","7528041c":"We can see that there has been a peak around 300 days after our interval started (corresponding to around December 2017), while it beings to tail down again afterwards. ","8cebb83e":"Here are some more interesting tutorials on how to use the data in cryptocurrencies and potential ideas on how to incorporate them into machine learning projects:\nhttps:\/\/www.kaggle.com\/yazanator\/analyzing-ethereum-classic-via-google-bigquery (Analyzing and computing the Gini coefficient\/equality level for miner rewards for the Ethereum Classic chain). \n\nThis Kaggle kernel visualizes the transactional flow from the 10k of bitcoin famously spent on pizza: https:\/\/www.kaggle.com\/mrisdal\/visualizing-the-10k-btc-pizza-transaction-network\n\nA seperate kernel from this dataset (using exchange data) uses ARIMA time series analysis to predict the price of Bitcoin. https:\/\/www.kaggle.com\/myonin\/bitcoin-price-prediction-by-arima\n\nFor credit, much of the code here was built on and inspired by queries built by Allen Day of Google (https:\/\/github.com\/allenday). \n\n"}}