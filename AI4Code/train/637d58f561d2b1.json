{"cell_type":{"999ea664":"code","9c0cd933":"code","33a26e55":"code","9d48774e":"code","d09afe71":"code","0679f8b8":"code","bd4c32d9":"code","14f20fd1":"code","550deaa0":"code","3971dc70":"code","690ce4cd":"markdown"},"source":{"999ea664":"import os\nimport numpy\nimport pandas as pd\nimport wgs_ecef","9c0cd933":"!ls ..\/input\/gsdc-smart-ensembling","33a26e55":"gsdc_position_shift = pd.read_csv('..\/input\/gsdc-position-shift\/submission.csv')\ngsdc_phones_mean_prediction = pd.read_csv('..\/input\/gsdc-phones-mean-prediction\/submission.csv')\ngoogle_smartphone_decimeter_challenge = pd.read_csv('..\/input\/device-eda-interpolate-by-removing-device-en-ja\/submission.csv')\nadaptive_gauss_phone_mean = pd.read_csv('..\/input\/adaptive-gauss-phone-mean\/submission.csv')\ngsdc_smart_ensembling3 = pd.read_csv('..\/input\/gsdc-smart-ensembling\/submission3.csv')\ngsdc_smart_ensembling2 = pd.read_csv('..\/input\/gsdc-smart-ensembling\/submission2.csv')\ngsdc_smart_ensembling1 = pd.read_csv('..\/input\/gsdc-smart-ensembling\/submission1.csv')","9d48774e":"7.6484375 + (2.25 + 2.5) \/ 2","d09afe71":"import numpy as np\n\nblend_weights_lat = {\n    \"gsdc-phones-mean-prediction\": (7.5 + 7.625) \/ 2 + 0.0625 + 0.0625\/2 - 0.0625\/4 + 2*0.0625\/8,\n    \"device-eda-interpolate-by-removing-device-en-ja\":  (2.25 + 2.5) \/ 2 + (2.25 + 2.5) \/ 4,\n    \"gsdc-position-shift\":  0.75 - 0.125,\n}\n\n\nblend_weights_long = {\n    \"gsdc-phones-mean-prediction\": (7.5 + 7.625) \/ 2 + 0.0625  + 0.0625\/2 - 0.0625\/4 + 0.0625\/8,\n    \"device-eda-interpolate-by-removing-device-en-ja\":(2.25 + 2.5) \/ 2 + (2.25 + 2.5) \/ 4,\n    \"gsdc-position-shift\": 0.75 - 0.125,\n}\n\n\nlat_norm = sum(blend_weights_lat.values())\nlong_norm = sum(blend_weights_long.values())\n\nblend = gsdc_phones_mean_prediction\n# blend['millisSinceGpsEpoch'] = (\n#     gsdc_position_shift['millisSinceGpsEpoch'] * blend_weights[\"gsdc-position-shift\"]\/norm +\n#     gsdc_phones_mean_prediction['millisSinceGpsEpoch'] * blend_weights[\"gsdc-phones-mean-prediction\"]\/norm +\n#     google_smartphone_decimeter_challenge['millisSinceGpsEpoch'] * blend_weights[\"device-eda-interpolate-by-removing-device-en-ja\"]\/norm\n# )\n\n\nblend['latDeg'] = (\n    gsdc_position_shift['latDeg'] **2 * blend_weights_lat[\"gsdc-position-shift\"]\/lat_norm +\n    gsdc_phones_mean_prediction['latDeg'] **2 * blend_weights_lat[\"gsdc-phones-mean-prediction\"]\/lat_norm +\n    google_smartphone_decimeter_challenge['latDeg']**2  * blend_weights_lat[\"device-eda-interpolate-by-removing-device-en-ja\"]\/lat_norm \n)**0.5\n\nblend['lngDeg'] = (\n    gsdc_position_shift['lngDeg'] * blend_weights_long[\"gsdc-position-shift\"]\/long_norm +\n    gsdc_phones_mean_prediction['lngDeg'] * blend_weights_long[\"gsdc-phones-mean-prediction\"]\/long_norm +\n    google_smartphone_decimeter_challenge['lngDeg'] * blend_weights_long[\"device-eda-interpolate-by-removing-device-en-ja\"]\/long_norm \n)\n\n","0679f8b8":"blend['millisSinceGpsEpoch'] = blend['millisSinceGpsEpoch'].astype(np.int64)","bd4c32d9":"blend","14f20fd1":"blend['latDeg'] = 0.35 * blend['latDeg'] +  0.65 * adaptive_gauss_phone_mean['latDeg']\nblend['lngDeg'] = 0.35 * blend['lngDeg'] +  0.65 * adaptive_gauss_phone_mean['lngDeg']","550deaa0":"blend['latDeg'] = 0.3 * blend['latDeg'] +  0.3*gsdc_smart_ensembling3['latDeg'] +  0.4*gsdc_smart_ensembling2['latDeg'] # + 0.175*gsdc_smart_ensembling1['latDeg']\nblend['lngDeg'] = 0.3 * blend['lngDeg'] +  0.3*gsdc_smart_ensembling3['lngDeg'] +  0.4*gsdc_smart_ensembling2['lngDeg'] # + 0.175*gsdc_smart_ensembling1['lngDeg']","3971dc70":"blend.to_csv(\"submission.csv\", index=False)","690ce4cd":"# Average top public notebooks\n\nWeighted mean in cartesian coordinates at equal altitude.\n\n**All credit to the authors of those notebooks; please look at their work:**\n* [GSDC phones mean prediction](https:\/\/www.kaggle.com\/t88take\/gsdc-phones-mean-prediction)\n* [device EDA & Interpolate by removing device[en,ja]](https:\/\/www.kaggle.com\/columbia2131\/device-eda-interpolate-by-removing-device-en-ja)\n* [GSDC: Position shift](https:\/\/www.kaggle.com\/wrrosa\/gsdc-position-shift)"}}