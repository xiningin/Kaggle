{"cell_type":{"b2cb39a1":"code","ad5ca09d":"code","6e945d40":"code","5d5775ac":"code","4df6c1cc":"code","d16a5c4f":"code","c2a5179f":"code","0d08c452":"code","54fbdb02":"code","50ec50bf":"code","5c9372d2":"code","b96ade8a":"code","a7be0e39":"code","4cf3284d":"code","d11ba0b8":"code","cd0a8a04":"code","7e43439b":"code","4ff67e8b":"markdown","acd5ac73":"markdown","0ffe8194":"markdown","279c61ce":"markdown","a5c44ee3":"markdown","fc3ba2e7":"markdown","5ce2ca10":"markdown","cc02c5f8":"markdown","7b46b3db":"markdown","7d75d873":"markdown","e6adc36d":"markdown","32c9aa31":"markdown","9da2b815":"markdown","c45c7ad0":"markdown","610a366c":"markdown"},"source":{"b2cb39a1":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')","ad5ca09d":"df = pd.read_csv('..\/input\/insurance\/insurance.csv')\ndf.head()\n","6e945d40":"df.shape","5d5775ac":"df.describe()","4df6c1cc":"df.dtypes","d16a5c4f":"df.isnull().sum()","c2a5179f":"sns.set(style='whitegrid')\nf, ax=plt.subplots(2,2,figsize=(12,8))\nax=sns.distplot(df['charges'],kde=True,color='g')\nplt.title=('Distrubition of Charges')","0d08c452":"f, ax= plt.subplots(1,1,figsize=(12,8))\nax=sns.distplot(np.log10(df['charges']),kde=True,color='r')","54fbdb02":"charges=df['charges'].groupby(df.region).sum().sort_values(ascending=True)\nf,ax=plt.subplots(1,1,figsize=(8,6))\nax=sns.barplot(charges.head(),charges.head().index,palette='Blues')","50ec50bf":"f, ax=plt.subplots(1,1,figsize=(12,8))\nax=sns.barplot(x='region',y='charges',hue='smoker',data=df,palette='Reds_r')","5c9372d2":"f,ax =plt.subplots(1,1,figsize=(12,8))\nax=sns.barplot(x='region',y='charges',hue='children',data=df,palette='Set1')","b96ade8a":"ax = sns.lmplot(x = 'age', y = 'charges', data=df, hue='smoker', palette='Set1')\nax=sns.lmplot(x='bmi',y='charges',data=df,hue='smoker',palette='Set2')\nax=sns.lmplot(x='children',y='charges',data=df,hue='smoker',palette='Set3')","a7be0e39":"f,ax=plt.subplots(1,1,figsize=(10,10))\nax=sns.violinplot(x='children',y='charges',data=df,orient='v',hue='smoker',palette='inferno')","4cf3284d":"df[['sex', 'smoker', 'region']] = df[['sex', 'smoker', 'region']].astype('category')\ndf.dtypes\n\n","d11ba0b8":"from sklearn.preprocessing import LabelEncoder\nlabel=LabelEncoder()\nlabel.fit(df.sex.drop_duplicates())\ndf.sex=label.transform(df.sex)\nlabel.fit(df.smoker.drop_duplicates())\ndf.smoker=label.transform(df.smoker)\nlabel.fit(df.region.drop_duplicates())\ndf.region=label.transform(df.region)\ndf.dtypes","cd0a8a04":"f,ax=plt.subplots(1,1,figsize=(10,10))\nax=sns.heatmap(df.corr(),annot=True,cmap='cool')","7e43439b":"from sklearn.model_selection import train_test_split as holdout\n\n\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn import metrics\nx=df.drop(['charges'],axis=1)\ny=df['charges']\nx_train,x_test,y_train,y_test=holdout(x,y,test_size=0.2,random_state=0)\nLin_reg=LinearRegression()\nLin_reg.fit(x_train,y_train)\nprint(Lin_reg.intercept_)\nprint(Lin_reg.coef_)\nprint(Lin_reg.score(x_test,y_test))\n\n","4ff67e8b":"# Which Price Influence the Price of Health Insurance?\n\nMany factors that affect how much you pay for health insurance are not within your control. Nonetheless, it's good to have an understanding of what they are. Here are asome factors that affect how much health insurance premiums cost.\n\n\n* **age:** age of primary beneficiary \n* **sex:** insurance contractor gender\n* **bmi:** body mass index providing an understanding of body, weights that are relatively high or low relative to height, objective index of body weight (kg \/m^2) using the ratio of height to weight, ideally 18.5 to 24.5\n* **children:** Number of children covered by health insurance \/ Number of dependents.\n* **smoker:** Smokers\n* **region:** The beneficiary's residental area in the USA.","acd5ac73":"## EDA And Visulizations","0ffe8194":"Smoking has the highest impact on medical costs, even though the costs are growing with age, bmi and children. Also people who have children generally smoke less, which the following violinplots shows too","279c61ce":"Now let's analyze the medical charges by age, bmi(body mass index) and children according to the smoking factor","a5c44ee3":"## Converting category labels into numerical using LabelEncoder","fc3ba2e7":"### Import Libraries","5ce2ca10":"## Converting Object Labels into Categorical","cc02c5f8":"No correlation, except with the smoking","7b46b3db":"Now let's look at the charges by region","7d75d873":" ### Shape of Dataset","e6adc36d":"As we can see from these barplots the highest charges due to smoking are still in the Southeast but the lowest are in the Northeast. People in the Southwest generally smoke more than people in the Northeast, but people in the Northeast have higher charges by gender than in the Southwest and Northwest overall. And people with children tend to have higher medical costs overall as well.","32c9aa31":"### Visualization ","9da2b815":"### Read Dataset","c45c7ad0":"## Linear Regression","610a366c":"So overall the highest medical charges are in in the Southeast and the lowest are in the Southwest. Taking into account certain factors(sex,smoking,having children) let's see how it changes by region."}}