{"cell_type":{"6347dc5f":"code","52727641":"code","354ca31b":"code","a79c6ab3":"code","88c69660":"code","094e77a6":"code","03e092ca":"code","82275736":"code","bb4680b6":"code","661fe514":"code","200db0ac":"code","f39866fa":"markdown","2c989839":"markdown","16afb379":"markdown","b576ada5":"markdown","cbd0a3ef":"markdown","dce9cdf3":"markdown","a70ce78e":"markdown","d5abe447":"markdown","c07629ce":"markdown","97f91401":"markdown","dfcc1d02":"markdown"},"source":{"6347dc5f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\n\nimport pandas as pd\nimport os\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport warnings\nwarnings.simplefilter('ignore')\n","52727641":"dataset = pd.read_csv('..\/input\/wind-turbine-scada-dataset\/T1.csv', \n                      parse_dates = ['Date\/Time'], \n                      date_parser = lambda x: pd.to_datetime(x, format = '%d %m %Y %H:%M'), \n                      index_col = 'Date\/Time')\n\n\ndataset.info()\n\n# transformar a frecuencia horaria y agregar mes\n\ndataset_hora = dataset.resample('H').mean().fillna(0)\n\ndataset_hora['mes'] = dataset_hora.index.strftime('%B')\n\ndataset_hora['mes'] = pd.Categorical(dataset_hora['mes'], \n               categories = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n              ordered = True)\n\ndataset_hora.info()","354ca31b":"fig, ax = plt.subplots(2,2, figsize = (15,7.5))\nsns.distplot(dataset['LV ActivePower (kW)'], ax = ax[0,0])\nsns.distplot(dataset['Wind Speed (m\/s)'], ax = ax[0,1])\nsns.distplot(dataset['Theoretical_Power_Curve (KWh)'], ax = ax[1,0])\nsns.distplot(dataset['Wind Direction (\u00b0)'], ax = ax[1,1])\nplt.tight_layout()\nplt.show()","a79c6ab3":"gb_velocidad = dataset.groupby(pd.qcut(dataset['Wind Speed (m\/s)'], q = 25)).mean()\n\nzona_0 = gb_velocidad['Wind Speed (m\/s)'] < 4\nzona_1 = (gb_velocidad['Wind Speed (m\/s)'] >= 3.5) & (gb_velocidad['Wind Speed (m\/s)'] <= 15)\nzona_2 = gb_velocidad['Wind Speed (m\/s)'] >= 14.5\n\n# dataset['Benchmark'] = (dataset['LV ActivePower (kW)'].div(dataset['Theoretical_Power_Curve (KWh)'])).replace(np.inf, np.nan).replace(-np.inf, np.nan).fillna(0)\n\nfig, ax = plt.subplots(1,2, figsize = (15,7.5))\n\n# Power Curve grouped\n\n# fill curve zones\nax[0].fill_between(gb_velocidad[zona_0]['Wind Speed (m\/s)'], 0 , gb_velocidad[zona_0]['Theoretical_Power_Curve (KWh)'], color = 'gray')\nax[0].fill_between(gb_velocidad[zona_1]['Wind Speed (m\/s)'], 0 , gb_velocidad[zona_1]['Theoretical_Power_Curve (KWh)'], color = 'lightgray')\nax[0].fill_between(gb_velocidad[zona_2]['Wind Speed (m\/s)'], 0 , gb_velocidad[zona_2]['Theoretical_Power_Curve (KWh)'], color = '#F2F3F4')\n\n#plot \nsns.lineplot(x = 'Wind Speed (m\/s)', y = 'LV ActivePower (kW)', data = gb_velocidad, label = 'Real Power (kW)', marker = 'o', ax = ax[0])\nsns.lineplot(x = 'Wind Speed (m\/s)', y = 'Theoretical_Power_Curve (KWh)', data = gb_velocidad, label = 'Theoretical Power (kW)', marker = 'o', ax = ax[0])\nax[0].legend()\n\n# Power Curve ungrouped\nsns.scatterplot(x = 'Wind Speed (m\/s)', y = 'LV ActivePower (kW)', data = dataset, label = 'Real Power (kW)', ax = ax[1])\nsns.scatterplot(x = 'Wind Speed (m\/s)', y = 'Theoretical_Power_Curve (KWh)', data = dataset, label = 'Theoretical Power (kW)', ax = ax[1])\nax[1].legend()\n\n\nplt.show()","88c69660":"prod_acumulada = dataset_hora['LV ActivePower (kW)'].sort_values(ascending = False)\nprod_acumulada = prod_acumulada.reset_index(drop = True)\n\nplt.figure(figsize= (15,7.5))\n\nsns.lineplot(data = prod_acumulada, linewidth = '5')\n\nplt.fill_between( list(range(0, int(8760*0.25))) ,0, prod_acumulada[:int(8760*0.25)], color = 'gray')\nplt.fill_between( list(range(int(8760*0.25), int(8760*0.5))), 0, prod_acumulada[int(8760*0.25):int(8760*0.5)], color = 'lightgray')\nplt.fill_between( list(range(int(8760*0.5), int(8760*0.75))), 0, prod_acumulada[int(8760*0.5):int(8760*0.75)], color = '#F2F3F4')\n\nplt.title('Potencia generada Vs N\u00famero de horas')\nplt.ylabel('Potencia [kW]')\nplt.xlabel('Horas en el a\u00f1o')\nplt.show()","094e77a6":"# Agregar mes\n\ndataset['mes'] = dataset.index.strftime('%B')\n\ndataset['mes'] = pd.Categorical(dataset['mes'], \n               categories = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n              ordered = True)\n\n# Datos agregados por mes: Produccion de energ\u00eda por mes y factor de uso \n\ndataset_mes = dataset_hora.groupby('mes')\n\nagg_mes = dataset_mes.agg( ActivePower_total_MW = ('LV ActivePower (kW)', 'sum'),\n                TheoreticalPower_Total_MW = ('Theoretical_Power_Curve (KWh)', 'sum'),\n                Velocidad_promedio = ('Wind Speed (m\/s)', 'mean'),\n                Direccion_promedio = ('Wind Direction (\u00b0)', 'mean')\n               )\nhoras_uso = dataset_hora[dataset_hora['LV ActivePower (kW)'] > 0].groupby('mes')['LV ActivePower (kW)'].count()\n\n# horas_uso = dataset[dataset['LV ActivePower (kW)'] > 0].groupby('mes')['LV ActivePower (kW)'].count()\n\ntotal_horas = dataset_mes['LV ActivePower (kW)'].count()\n\nfactor_uso = pd.DataFrame(horas_uso\/total_horas).rename(columns = {'LV ActivePower (kW)': 'Factor_uso'})\n\nagg_mes = agg_mes.merge(factor_uso, left_index = True, right_index = True)\n\nagg_mes.sort_index(inplace = True)\n\nagg_mes['ActivePower_total_MW'] = agg_mes['ActivePower_total_MW']\/1000 \n\nagg_mes['TheoreticalPower_Total_MW'] = agg_mes['TheoreticalPower_Total_MW']\/1000\n\nagg_mes['Perdidas'] = agg_mes['TheoreticalPower_Total_MW'] - agg_mes['ActivePower_total_MW']\n\n# Producci\u00f3n por mes\nfig, ax = plt.subplots(2,1, figsize = (15,7.5))\n\n# grafico superior\n\n#top\nsns.barplot(x = agg_mes.index , y =  'TheoreticalPower_Total_MW', data = agg_mes, color = 'red', ax = ax[0], label = 'perdidas')\n#bottom\nsns.barplot(x = agg_mes.index , y =  'ActivePower_total_MW', data = agg_mes, color = 'blue', ax = ax[0], label = 'Energia producida')\nax[0].legend()\nax[0].set_ylabel('Energia Producida_MWh')\n\n# grafico inferior\nsns.barplot(x = agg_mes.index, y = 'Factor_uso', data = agg_mes, ax=ax[1], color = 'gray', label = 'Porcentaje de operaci\u00f3n')\nax[1].legend()\nplt.show()\n\n","03e092ca":"# velocidad promedio por mes\nplt.figure(figsize = (15,7.5))\nsns.boxplot(x = 'mes', y = 'Wind Speed (m\/s)', data = dataset_hora, color = '#F2F3F4')\nvelocidad_promedio = dataset_hora['Wind Speed (m\/s)'].mean()\nsns.lineplot(x = list(range(0,12)), y = velocidad_promedio, color = 'black', label = f'Velocidad promedio {round(velocidad_promedio,1)} m\/s')\nplt.legend()\nplt.show()","82275736":"# Datos fuera de servicio\n\npotencias = []\nfor i in range(0,110,10):\n    \n    umbral_potencia = i\n\n    filtros = (dataset_hora['Wind Speed (m\/s)'] <= 25) & (dataset_hora['Wind Speed (m\/s)'] >= 3.5) & (dataset_hora['LV ActivePower (kW)'] <= umbral_potencia)\n\n    fuera_servicio = dataset_hora[filtros]\n    \n    potencias.append(fuera_servicio['Theoretical_Power_Curve (KWh)'].sum())\n\n# sns.lineplot(x = range(0,110,10), y = potencias)\n\n# filtrando por fuera de servicio\n\nfiltros = (dataset_hora['Wind Speed (m\/s)'] <= 25) & (dataset_hora['Wind Speed (m\/s)'] >= 3.5) & (dataset_hora['LV ActivePower (kW)'] <= 0)\n\nfuera_servicio = dataset_hora[filtros]\n\nfuera_servicio['Delta_Prod'] = fuera_servicio['Theoretical_Power_Curve (KWh)'] - fuera_servicio['LV ActivePower (kW)']\n    \nfuera_servicio_gb = fuera_servicio.loc[:,['mes','Theoretical_Power_Curve (KWh)','Delta_Prod']].groupby('mes').sum()\n\nfuera_servicio_gb['Theoretical_Power_Curve (KWh)'] = fuera_servicio_gb['Theoretical_Power_Curve (KWh)']\/1000\n\nfuera_servicio_gb['Delta_Prod'] = fuera_servicio_gb['Delta_Prod']\/1000\n\n# perdidas por mes\n\nplt.figure(figsize =(15,7.5))\nsns.barplot(x = fuera_servicio_gb.index, y = 'Theoretical_Power_Curve (KWh)', data = fuera_servicio_gb, color = 'gray')\nplt.ylabel('Potencia perdida [MW]')\nplt.title('P\u00e9rdidas por fuera de servicio')\nplt.show()","bb4680b6":"# perdidas de energia turbina en operaci\u00f3n\nfiltros = (dataset_hora['Wind Speed (m\/s)'] <= 25) & (dataset_hora['Wind Speed (m\/s)'] >= 3.5) & (dataset_hora['LV ActivePower (kW)'] > 0) \nturbina_op = dataset_hora[filtros]\n\nturbina_op['Delta_prod'] = turbina_op['Theoretical_Power_Curve (KWh)'] - turbina_op['LV ActivePower (kW)']\n\n# sns.lineplot(x = turbina_op.index, y =  'Delta_prod', data = turbina_op)\n# plt.show()\n\nturbina_op_gb = turbina_op.loc[:,['mes','Delta_prod']].groupby('mes').sum()\n\nturbina_op_gb['Delta_prod'] = turbina_op_gb['Delta_prod']\/1000\n\nplt.figure(figsize =(15,7.5))\nsns.barplot(x = turbina_op_gb.index, y = 'Delta_prod', data = turbina_op_gb, color = 'gray')\nplt.title('Potencia perdida en operaci\u00f3n [MW]')\nplt.ylabel('MW')\nplt.show()\n\n# Composicion de p\u00e9rdidas\n\nperdidas_totales = turbina_op_gb['Delta_prod'] + fuera_servicio_gb['Delta_Prod'] \n\nplt.figure(figsize =(15,7.5))\nplt.style.use('seaborn-white')\nplt.stackplot(perdidas_totales.index, [turbina_op_gb['Delta_prod'],fuera_servicio_gb['Delta_Prod']], labels = ['P\u00e9rdidas en operaci\u00f3n', 'P\u00e9rdidas por fuera de servicio'])\nplt.title('Diferencias entre la potencia te\u00f3rica y real por mes')\nplt.ylabel('MW')\nplt.legend()\nplt.show()","661fe514":"def ratio_perd(mes): \n    \n    turbina_op_mes = turbina_op[turbina_op['mes'] == mes]\n    sns.boxplot(turbina_op_mes['Delta_prod']\/turbina_op_mes['LV ActivePower (kW)'])\n    plt.xlim(0,1)\n    plt.show()\n    \nfig, ax = plt.subplots(4,3, sharex = True, figsize = (15, 7.5))\n\nsubplots = [item for sublist in ax for item in sublist]\n\nmeses = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n\nfig.suptitle('Raz\u00f3n de p\u00e9rdidas\/Potencia esperada por mes')\nfor mes in meses: \n    axis = subplots.pop(0)\n    turbina_op_mes = turbina_op[turbina_op['mes'] == mes]\n    sns.boxplot(np.abs(turbina_op_mes['Delta_prod'])\/turbina_op_mes['Theoretical_Power_Curve (KWh)'], ax  = axis)\n    axis.set_title(mes)\n    axis.set_xlim(0,1)\n#     axis.set_ylim(0,10)\n    axis.grid(linewidth=0.25)\n    axis.spines['left'].set_visible(False)\n    axis.spines['top'].set_visible(False)\n    axis.spines['right'].set_visible(False)\n    ","200db0ac":"shape = []\nratio_list = list(np.arange(0,1.1,0.1))\nfor i in ratio_list:\n    ratio_lim  = np.abs(turbina_op['Delta_prod'])\/turbina_op['Theoretical_Power_Curve (KWh)'] >= i\n    shape.append(turbina_op[ratio_lim].shape[0])\n\nfig, ax = plt.subplots(1,2, figsize=(15,7.5))\nsns.lineplot(x = ratio_list, y = shape, marker = \"o\", markersize = 8, ax = ax[0])\nax[0].set_title('N\u00famero de datos filtrados for umbral de raz\u00f3n de p\u00e9rdidas')\nax[0].set_xlabel('Raz\u00f3n de p\u00e9rdidas')\n\nfor x,y in zip(ratio_list, shape): \n    \n    label = \"{:.0f}\".format(y)\n    ax[0].annotate(label, \n                (x,y), \n                textcoords = 'offset points', \n                xytext = (5,5),\n                ha = 'left')\n    \n    \nratio_lim  = np.abs(turbina_op['Delta_prod'])\/turbina_op['Theoretical_Power_Curve (KWh)'] >= 0.3\nsns.barplot(x = turbina_op[ratio_lim].groupby('mes').count()['Delta_prod'], \n            y = turbina_op[ratio_lim].groupby('mes').count().index, \n            ax = ax[1], \n           color = 'lightgrey')\nax[1].set_title('N\u00famero de datos por encima del umbral de 30% por mes')\nax[1].set_xlabel('Conteo de operaciones filtradas')\nplt.show()","f39866fa":"La turbina se encuentra ubicada en Yalova, Turqu\u00eda. Los datos consisten en mediciones con una frecuencia de 10 min durante el a\u00f1o 2018 de las siguientes variables: \n\n- LV ActivePower (kW): La potencia instant\u00e1nea real generada\n- Wind Speed (m\/s): velocidad del viento medida en el buje de la turbina.\n- Theoretical_Power_Curve (KW): Potencia instant\u00e1nea generada seg\u00fan la curva de rendimiento del fabricante.\n- Wind Direction (\u00b0): Direcci\u00f3n del viento a la altura del buje de la turbina.\n\nEn la siguiente libreta se realizar\u00e1 un an\u00e1lisis descriptivo del rendimiento, exponi\u00e9ndose: Curva de potencia del a\u00f1o, producciones por mes y p\u00e9rdidas por mes.","2c989839":"A continuaci\u00f3n, se realiza un an\u00e1lisis sobre las diferencias entre la producci\u00f3n real y esperada, de ahora en adelante, p\u00e9rdidas, las cuales se pueden agrupar por: \n- Horas de operaciones en las que la turbina no oper\u00f3 pero la velocidad era adecuada. Para identificar estos datos se utilizan las velocidades de $v_{cut_{in}}$ y $v_{cut_{out}}$ definidas anteriormente.\n\n- Ineficiencias fluidodin\u00e1micas, mec\u00e1nicas y el\u00e9ctricas en el sistema \u00e1labe-eje-generador-transmisi\u00f3n de la turbina de viento. \n\nRespecto a la primera, se observa como en los meses de invierno, las p\u00e9rdidas de energ\u00eda aumentan considerablemente. En invierno, los \u00e1labes pueden sufrir de acumulaci\u00f3n de hielo que aumentan las cargas en el rotor adem\u00e1s de alterar la fluidodin\u00e1mica; es un riesgo que se debe controlar durante estos meses. Un aspecto a favor de las bajas temperaturas es que el aire es mas denso. lo que se traduce en un mayor potencial de producci\u00f3n de energ\u00eda que se debe aprovechar. ","16afb379":"En la siguiente gr\u00e1fica se muestra la potencia generada por n\u00famero de horas. Esto permite establecer un contexto sobre la productividad de la turbina. As\u00ed, vemos que en un 25% del tiempo, la turbina fue capaz de generar un valor igual o superior a 2360 kW; 760 kW, un 50% del tiempo y 34 kW, un 75% del tiempo. De la gr\u00e1fica es claro como la turbina estuvo inoperante durante aproximadamente el 25% del tiempo en el a\u00f1o.","b576ada5":"Las altas p\u00e9rdidas en Agosto pueden deberse a qu\u00e9 tambi\u00e9n es el mes con mayor producci\u00f3n. Otra forma de analizar las p\u00e9rdidas por mes durante la operaci\u00f3n es ver la distribuci\u00f3n de la raz\u00f3n entre las p\u00e9rdidas y la producci\u00f3n esperada. De la gr\u00e1fica, se observa que la raz\u00f3n de las p\u00e9rdidas en Agosto es comparable con los otros meses, una media menor al 20% de desviaci\u00f3n. Por otro lado, sobresalen los meses de Abril y Junio, que presentan la mayor media en la desviaci\u00f3n, 20%.","cbd0a3ef":"De acuerdo a la ecuaci\u00f3n a, se espera encontrar grandes diferencias en la producci\u00f3n de energ\u00eda a lo largo del a\u00f1o, especialmente, en paises que experimentan las diferentes estaciones. \n\nEn primer lugar, se muestra un an\u00e1lisis por mes para visualizar los efectos de la estacionalidad en la producci\u00f3n de energ\u00eda. De acuerdo a la gr\u00e1fica, los meses m\u00e1s fr\u00edos (oto\u00f1o-invierno, hemisferio norte) presentan una producci\u00f3n m\u00e1s alta de energ\u00eda respecto a los meses m\u00e1s calido, con excepci\u00f3n de Agosto. \n\nOtro aspecto a resaltar es el factor de uso de la turbina, calculada como: \n\n\\begin{equation}\nFactor de uso = \\frac{Horas_{operadas}}{Horas_{totales}}\n\\end{equation}\n\nSe observa lo siguiente:\n\n- Agosto, el mes con mayor disponiblidad\n- Enero - Diciembre, meses de invierno, tuvieron la menor disponiblidad\n- Est\u00e1 gr\u00e1fica concuerda con la anterior, la turbina se mantiene en operaci\u00f3n al menos un 75% del tiempo en promedio.","dce9cdf3":"### Gr\u00e1ficas de distribuci\u00f3n de las variables\n\nCon estas gr\u00e1ficas se busca establecer una idea general de la distribuci\u00f3n de las variables. Se evidencia que:\n\n- Potencial Real y Potencia Teorica, presentan una distribuci\u00f3n similar con dos picos, potencia 0 y potencia m\u00e1xima.\n\n- La velocidad presenta una distribuci\u00f3n sesgada hacia la izquierda con dos ligeros picos.\n\n- Respecto a la direcci\u00f3n del viento, se observan dos sentidos predominantes: aproximadamente 90\u00ba y 200\u00ba\n","a70ce78e":"La gran diferencia en la producci\u00f3n por mes, se debe principalmente en las diferencias en las distribuciones de la velocidad del viento por mes, como se observa en la siguiente gr\u00e1fica. Aunque, las mayores velocidades se dieron en Marzo, en agosto las velocidades fueron menos dispersas y con valores por encima del promedio anual. En los meses de Abril a Julio, la producci\u00f3n m\u00ednima se explica en la baja velocidad del viento.","d5abe447":"Del c\u00e1lculo anterior, tambi\u00e9n se puede establecer un criterio de filtrado para identificar aquellos d\u00edas donde se presentaron altas diferencias en las potencias produciadas vs esperadas. De los datos resultantes, se puede seguir investigando para establecer qu\u00e9 sucedi\u00f3 en esos momentos e identificar factores que impactan en la producci\u00f3n de energ\u00eda. Inicialmente, se establece un valor de 0.3 para filtrar los datos y realizar una investigaci\u00f3n a fondo para determinar las causas. Los meses de enero, abril, julio y diciembre sobresalen por la mayor cantidad de datos a analizar.","c07629ce":"Respecto a las p\u00e9rdidas en operaci\u00f3n, destacan tres meses: Agosto, Enero y Diciembre. Los dos \u00faltimos se explica, en parte, por lo mencionado anteriormente respecto al problema que enfrentan las turbinas de viento en los meses de invierno. La fluidodin\u00e1mica se empeora con la acumulaci\u00f3n de hielo en los alabes. Sorprende el mes de agosto, estaci\u00f3n de verano, donde las p\u00e9rdidas fueron m\u00e1ximos durante la operaci\u00f3n.","97f91401":"Se cargan los datos y se comprueba la existencia de valores faltantes. Afortundamente, no existen datos nulos. Se realizar\u00e1n los an\u00e1lisis bajo el supuesto que el sistema de medici\u00f3n funcion\u00f3 correctamente.","dfcc1d02":"Los analisis posteriores van a tomar como base la siguente ecuaci\u00f3n que describe La potencia generada por turbina e\u00f3lica: \n\n\\begin{equation}\nE = \\frac{\\rho Av^3}{2}\n\\end{equation}\n\nDonde:\n- $v$, velocidad del viento\n- $\\rho$, densidad del aire\n- $A$, area descrita por los \u00e1labes de la turbina\n\nDe la ecuaci\u00f3n, $A$ es la \u00fanica variable fija. En operaci\u00f3n, la potencia ser\u00e1 funci\u00f3n de la velocidad y de la densidad del aire, que var\u00edan a lo largo del a\u00f1o. De estas, la velocidad es la variable m\u00e1s significativa en la producci\u00f3n de energ\u00eda; de hecho, la curva caracter\u00edstica de una turbina es un gr\u00e1fico de la potencia generada Vs velocidad del viento. En la figura se establecen tres zonas en funci\u00f3n de la magnitud de la velocidad: \n\n- 1.0 - 3.5 m\/s, las turbinas no suelen operar en este rango de velocidad debido a que la potencia generada es baja y no es rentable econ\u00f3micamente la operaci\u00f3n. El valor m\u00ednimo de operaci\u00f3n se conoce como $v_{cut_{in}}$ cuyo valor es, t\u00edpicamente, 3 - 3.5 m\/s.\n\n\n- 3.5 - 14 m\/s, la turbina se encuentra en operaci\u00f3n y se evidencia la dependencia c\u00fabica respecto a la velocidad del viento. Para esta turbina, A 14.5 m\/s, aproximadamente, se alcanza un m\u00e1ximo en la potencia generada.\n\n\n- 14 - 25 m\/s, el m\u00e1ximo en la curva corresponde a la velocidad de dise\u00f1o de la turbina, una vez alcanzada, se sigue generando la misma potencia aunque la velocidad aumente. El incremento en la velocidad conlleva un aumento en las cargas mec\u00e1nicas que debe resistir la estructura por lo que llegada a una cierta magnitud se realiza una parada en la operaci\u00f3n por seguridad. Este valor se conoce como $v_{cut_{out}}$ y tiene un valor t\u00edpico de 25 m\/s.\n"}}