{"cell_type":{"f1989116":"code","ce3fc3b9":"code","04826008":"markdown","ccefaae7":"markdown"},"source":{"f1989116":"import numpy as np\nfrom matplotlib import pyplot as plt\nimport scipy.io.wavfile\nimport os\nfrom scipy import signal\n\n\ndef plot_signal(x):\n    f = plt.figure(figsize=(10,8))\n    ax = f.add_subplot(211)\n    ax2 = f.add_subplot(212)\n\n    x = x\/(.8*max(x))\n    # Show one recording\n    #plt.subplot(211)\n    #plt.figure(figsize = (10,8))\n    ax.plot(np.linspace(0,len(x)\/fs,len(x)),x)\n    ax.autoscale(enable=True, axis='x', tight=True)\n    plt.xlabel('time (s)')\n    plt.title('vibration recording')\n    ax.grid(True)\n    \n    #plt.subplot(212)\n    cmap = plt.get_cmap('viridis')\n    vmin = 20*np.log10(np.max(x)) - 80  # hide anything below -80 dBc\n    cmap.set_under(color='k', alpha=None)\n\n    #plt.figure(figsize = (10,8))\n    Pxx, freqs, bins, im = plt.specgram(x, NFFT=256, Fs=fs, noverlap=256-256\/6, mode='magnitude', cmap=cmap, vmin=vmin)\n    ax2.autoscale(enable=True, axis='x', tight=True)\n    plt.xlabel('time (s)')\n    plt.ylabel('frequency [Hz]')\n    plt.show()\n    return\n\npath = '\/kaggle\/input\/lab\/lab\/infested\/infested_1.wav' \nfs, x = scipy.io.wavfile.read(path)\nplot_signal(x)","ce3fc3b9":"path = '\/kaggle\/input\/field\/field\/train\/infested\/folder_1\/F_20200218135459_84_T24.4.wav' \nfs, x = scipy.io.wavfile.read(path)\nplot_signal(x)","04826008":"Looking at the figure above one may suggest that the detection of borers is an easy task: an envelope follower or a simple thresholding could reveal the impulses. However, in the field the signals we get, are not that clean for the following reasons:\n\na)\tDepending on the biological cycle of the pest, it can be noisy or cryptic. The pests can be detected during their larva and adult stage when they move and feed, whereas during their egg or pupa state they are silent (although inside the tree). This means that the algorithm should integrate data from longer time spans (daily, weekly, monthly) to infer the infestation state of a tree.\n\nb)\tYou do not know if there are borers in the tree and even if there are, one cannot know their number and exact location inside the tree. Some of these impulses are feeble because they originate from a location distant to the probe. Depending on the kind of the wood, the probe can detect feeding sounds within a sphere of 1.5-2m radius. \n\nc)\tNot all recordings contain impulses even when one surveys an infested tree. It may happen that in the particular time slot the larvae were not active.\n\nd)\tUrban spaces are rich in vibrations originating from cars, footsteps and vocalizations of dogs, birds and humans. Some of these vibrations propagate in the wood and reach the metal probe of the device. Therefore, recordings can be very noisy sometimes to the point that external noise dominates over the impulsive sound of the borer (see figure below for an example).\n\ne)\tRegarding trees located far from an urban environments, the rain and strong winds that shake the branches and leaves produce external vibrations and impulsive sounds (e.g. raindrops hitting the tree, the shaking of fibrous structures such as palms) that can be picked up by the sensor as well. \n\nIn the following figure we see a spectrogram of a recording from an infested tree in the field. One can see the characteristic vertical strip in the spectrogram which is indicative of an impulsive audio event. This event corresponds to the crack of fibers as the borers feed and move. Notice however, the substantial background noise that vibrates the tree.\n","ccefaae7":"## Introduction\n\nIn the following figure one can see a typical example of a recording. This recording was taken in the lab from a part of an infested trunk. We know that the trunk was probably infested before carrying it in the lab because it had exit tunnels from previous exits of insects. We have kept the trunk in the lab until insects came out and we confirmed their identity. \nGenerally, the internal soundscape of a healthy tree \u2013excluding externally induced vibrations - is silent at the level of audio sounds we seek. If it is infested one expects to hear a train of pulses. In the second subplot we see the spectrogram (i.e. the frequency composition of the recording as it changes over time).\n"}}