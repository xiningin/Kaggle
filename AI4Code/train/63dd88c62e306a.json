{"cell_type":{"3ecc5209":"code","ee9b7f70":"code","3ad3ccf5":"code","63b01c04":"code","cd7a2c0b":"code","f96ca20c":"code","13b916f6":"code","77340eed":"code","27600b6f":"code","0bc46979":"code","685917bb":"code","569b56bf":"code","02475033":"code","d4ca257f":"code","a6ac480e":"code","d2b329bf":"code","d3e44da0":"code","93c6d507":"code","f4669ebb":"code","d9f3fa8f":"code","f7a9d952":"code","cdcae2a4":"code","6b1b09ef":"code","b23547d8":"code","8d01dd2e":"code","72bb251a":"code","f6ec62aa":"markdown","ba677ee0":"markdown","9252dede":"markdown","2bdb417c":"markdown","7fdfbac7":"markdown","5f516a81":"markdown","91e5c206":"markdown","83b4bf14":"markdown","4a21d018":"markdown","3e5c765a":"markdown","85f89471":"markdown","d7bf8cb4":"markdown","5d29cef8":"markdown","1d2eb8b1":"markdown","1f6ba98e":"markdown","50839fe1":"markdown","40637fe6":"markdown","a2bdc60c":"markdown","a4d6dec8":"markdown","81a83bf8":"markdown","40048533":"markdown","58bea1fc":"markdown","29ea2001":"markdown","6ffb5eab":"markdown","40b35a43":"markdown","7616628a":"markdown","ad06cc3b":"markdown","9d795edb":"markdown","0bf9ac6b":"markdown","dc8cf142":"markdown","623856a6":"markdown","fd1825ea":"markdown","672498b7":"markdown","dc3e55c9":"markdown","027a040c":"markdown","739bc424":"markdown","2a4fda0b":"markdown","b53e5665":"markdown","50ead92c":"markdown","e31f155b":"markdown","fb1c1d8d":"markdown","b6022fce":"markdown","da2c09d7":"markdown","3c91aa9c":"markdown"},"source":{"3ecc5209":"#8e0e0eimport numpy as np # linear algebra\nimport pandas as pd # data processing\nimport matplotlib.pyplot as plt #plot\nimport os \nimport seaborn as sns\nfrom scipy import stats #zscore\nimport plotly.plotly as py #plotly\nfrom plotly.offline import init_notebook_mode, iplot #plotly\ninit_notebook_mode(connected=True) #plotly\nimport plotly.graph_objs as go #plotly","ee9b7f70":"worldcup_general = pd.read_csv('..\/input\/fifa-world-cup\/WorldCups.csv', index_col='Year') #reading the dataset","3ad3ccf5":"# Removing points in the values and converting to integer\nworldcup_general['Attendance'] = worldcup_general['Attendance'].str.replace('\\.', \"\").astype('int64') \n\nwinner = worldcup_general['Winner'].value_counts() #Counting the countries who have win the world cup\nsecond_place = worldcup_general['Runners-Up'].value_counts() #Counting the countries who ended a world cup in the second place\nthird_place = worldcup_general['Third'].value_counts() #Counting the countries who ended a world cup in the third place\nfourth_place = worldcup_general['Fourth'].value_counts() #Counting the countries who ended a world cup in the fourth place\n\n#Concateneting the dataframes - Row-Wise\noverall_results_df = pd.concat([winner,second_place,third_place,fourth_place], \n                               keys=['Champion','Second','Third','Fourth']).reset_index()\n\n#Renaming the columns\noverall_results_df.columns = ['Performance', 'Country','Count']\n#Changing 'Germany FR\" to \"Germany\"\noverall_results_df['Country'] = overall_results_df['Country'].replace('Germany FR', 'Germany')\n#tranforming the dataframe to plot - Pivoting Performance Variable, filling \"NaNs\" and sorting by the champion column.\noverall_results_wide = overall_results_df.pivot_table(index='Country', \n                                                      columns='Performance', \n                                                      values='Count').fillna(0)\n\noverall_results_wide.head(10)","63b01c04":"#\noverall_results_wide[['Champion','Second','Third','Fourth']].plot(kind='barh',layout=(1,4),subplots=True, sort_columns=True, legend=False,\n                          figsize=(15,9), fontsize=10, sharex=True, sharey=True, title='Best countries - All World Cups')\n\nplt.style.use('seaborn')\n\nplt.show()","cd7a2c0b":"worldcup_general[['QualifiedTeams','MatchesPlayed']].plot(kind='bar', figsize=(11,7), subplots=True, fontsize=13)\n\nplt.style.use('seaborn')\n\nplt.show()","f96ca20c":"matches = pd.read_csv('..\/input\/fifa-world-cup\/WorldCupMatches.csv')\n\nmatches = matches.drop_duplicates()\n\nmatches['Year'] = matches['Year'].dropna().astype('int64')\n","13b916f6":"worldcup_general[worldcup_general['Country'] == worldcup_general['Winner']] ","77340eed":"color2 = ['#b73550','#003366','#003366','#b73550','#003366','#003366','#b73550','#003366','#b73550','#003366',\n          '#003366',  '#003366','#b73550','#003366','#b73550', '#df6703','#003366','#003366','#50fa83','#b73550']\n\n\nx_data2 = ['1930','1934','1938','1950','1954',\n          '1958','1962','1966','1970','1974',\n          '1978','1982','1986','1990','1994',\n          '1998','2002','2006','2010','2014']\n             \ny1930 = matches[matches['Year'] == 1930]['Attendance']\ny1934 = matches[matches['Year'] == 1934]['Attendance']\ny1938 = matches[matches['Year'] == 1938]['Attendance']\ny1950 = matches[matches['Year'] == 1950]['Attendance']\ny1954 = matches[matches['Year'] == 1954]['Attendance']\ny1958 = matches[matches['Year'] == 1958]['Attendance']\ny1962 = matches[matches['Year'] == 1962]['Attendance']\ny1966 = matches[matches['Year'] == 1966]['Attendance']\ny1970 = matches[matches['Year'] == 1970]['Attendance']\ny1974 = matches[matches['Year'] == 1974]['Attendance']\ny1978 = matches[matches['Year'] == 1978]['Attendance']\ny1982 = matches[matches['Year'] == 1982]['Attendance']\ny1986 = matches[matches['Year'] == 1986]['Attendance']\ny1990 = matches[matches['Year'] == 1990]['Attendance']\ny1994 = matches[matches['Year'] == 1994]['Attendance']\ny1998 = matches[matches['Year'] == 1998]['Attendance']\ny2002 = matches[matches['Year'] == 2002]['Attendance']\ny2006 = matches[matches['Year'] == 2006]['Attendance']\ny2010 = matches[matches['Year'] == 2010]['Attendance']\ny2014 = matches[matches['Year'] == 2014]['Attendance']\n\ny_data2 = [y1930,y1934,y1938,y1950,y1954,y1958,y1962,\n        y1966,y1970,y1974,y1978,y1982,y1986,y1990,\n        y1994,y1998,y2002,y2006,y2010,y2014]\n\n\ntraces = []\n\nlayout = go.Layout(title='Attendance in matches by World Cup',\n                   paper_bgcolor='white',\n                   plot_bgcolor='white',\n                   showlegend=False\n)\n\nfor name, values, cls in zip(x_data2, y_data2, color2): \n    traces.append(go.Box(\n        y=values,\n        name=name,\n        whiskerwidth=0.75,\n        jitter=0.15,\n        marker=dict(\n            color=cls,\n            size=5.5\n        )))  \n\n\n\nfig = go.Figure(data=traces, layout=layout)\n\niplot(fig)\n\n\n","27600b6f":"worldcup_general['Average Attendance'] = worldcup_general['Attendance'].div(worldcup_general['MatchesPlayed'])\n\nworldcup_general['Continent'] = ['America','Europe','Europe','America','Europe','Europe','America','Europe',\n                                'America','Europe','America','Europe','America','Europe','America','Europe',\n                                'Asia','Europe','Africa','America']\n\nworldcup_general.groupby('Continent').mean()['Average Attendance']","0bc46979":"#Countries population \nworldcup_general['Population'] = [4200000,41651000,42000000,54000000,5000000,7500000,8000000,42000000,52000000,79000000, 27500000, \n                                  38000000, 77400000, 56500000, 263000000, 58000000, 150000000,82000000, 56000000, 203000000]\n# Note that I have researched the population of the countries in the year that the world cups was hosted\nworldcup_general['Population - Home Country in millions'] = worldcup_general['Population'] \/ 1000000  #Dividing by one million\n\n#Now I'll create a scatterplot to check if thereis a linear relationship\nworldcup_general.plot(kind='scatter', x = 'Population - Home Country in millions', y = 'Average Attendance', figsize=(9,9),\n                      alpha = 0.7, fontsize=15)\nplt.title('Population in millions vs Average attendance in World Cup', fontsize=18)\nplt.xlabel('Population in millions', fontsize=15)\nplt.ylabel('Average Attendance', fontsize=15)\nplt.style.use('seaborn')\nplt.show()","685917bb":"worldcup_general['Population - Home Country in millions'].corr(worldcup_general['Average Attendance'])","569b56bf":"market_value = pd.read_csv('..\/input\/complementary-dataset-fifa-world-cup\/market_value_.csv', index_col=['player','country'])\n\nmarket_value['market_value'] = market_value['market_value'].str.split(' ')\n\nmarket_value['market_value'] = market_value['market_value'].str[0]\n\nmarket_value['market_value'] = market_value['market_value'].str.replace(',', '.').astype('float64')\n\nmarket_value.columns = ['group','position','position_in_general','team','market_value (millions of euros)']\n#selecting columns\nmarket_value_sub = market_value[['market_value (millions of euros)']]\n#reseting index\nmarket_value_sub = market_value_sub.reset_index()\n#setting the name of the players as the index\nmarket_value_sub = market_value_sub.set_index('player')","02475033":"market_value_sub.plot(kind='hist', bins=40, figsize=[8,5], legend=False)\nplt.ylabel('number of players',fontsize=13)\nplt.xlabel('market value',fontsize=13)\nplt.title('Number of players by market value', fontsize=22)","d4ca257f":"market_value.groupby('position').median()['market_value (millions of euros)'].plot(kind='barh', figsize=[10,9], \n                                                                                   color='#f3dc8a', \n                                                                                   edgecolor=['black']*13, fontsize=15)\n\nplt.xlabel('position', fontsize=19)\nplt.ylabel('median market value',fontsize=19)\nplt.title('Median market value by position',fontsize=22)","a6ac480e":"\nmarket_value_sub['country'] = market_value_sub['country'].astype('category')\nmarket_value_sub['country_abrev'] = market_value_sub['country'].str[0:3].str.upper()\n\nx_data = ['Russia','Uruguay','Saudi Arabia','Egypt',\n          'Morocco','Iran','Portugal','Spain',\n          'France','Peru','Denmark','Australia',\n          'Argentina','Croatia','Nigeria','Iceland',\n          'Switzerland','Brazil','Serbia','Costa Rica',\n          'Germany','Sweden','Mexico','South Korea',\n          'England','Belgium','Panama','Tunisia',\n          'Japan','Senegal','Poland','Colombia']       \n\nx0 = market_value_sub[market_value_sub['country'] == 'Russia']['market_value (millions of euros)']\nx1 = market_value_sub[market_value_sub['country'] == 'Uruguay']['market_value (millions of euros)']\nx2 = market_value_sub[market_value_sub['country'] == 'Saudi Arabia']['market_value (millions of euros)']\nx3 = market_value_sub[market_value_sub['country'] == 'Egypt']['market_value (millions of euros)']\nx4 = market_value_sub[market_value_sub['country'] == 'Morocco']['market_value (millions of euros)']\nx5 = market_value_sub[market_value_sub['country'] == 'Iran']['market_value (millions of euros)']\nx6 = market_value_sub[market_value_sub['country'] == 'Portugal']['market_value (millions of euros)']\nx7 = market_value_sub[market_value_sub['country'] == 'Spain']['market_value (millions of euros)']\nx8 = market_value_sub[market_value_sub['country'] == 'France']['market_value (millions of euros)']\nx9 = market_value_sub[market_value_sub['country'] == 'Peru']['market_value (millions of euros)']\nx10 = market_value_sub[market_value_sub['country'] == 'Denmark']['market_value (millions of euros)']\nx11 = market_value_sub[market_value_sub['country'] == 'Australia']['market_value (millions of euros)']\nx12 = market_value_sub[market_value_sub['country'] == 'Argentina']['market_value (millions of euros)']\nx13 = market_value_sub[market_value_sub['country'] == 'Croatia']['market_value (millions of euros)']\nx14 = market_value_sub[market_value_sub['country'] == 'Nigeria']['market_value (millions of euros)']\nx15 = market_value_sub[market_value_sub['country'] == 'Iceland']['market_value (millions of euros)']\nx16 = market_value_sub[market_value_sub['country'] == 'Switzerland']['market_value (millions of euros)']\nx17 = market_value_sub[market_value_sub['country'] == 'Brazil']['market_value (millions of euros)']\nx18 = market_value_sub[market_value_sub['country'] == 'Serbia']['market_value (millions of euros)']\nx19 = market_value_sub[market_value_sub['country'] == 'Costa Rica']['market_value (millions of euros)']\nx20 = market_value_sub[market_value_sub['country'] == 'Germany']['market_value (millions of euros)']\nx21 = market_value_sub[market_value_sub['country'] == 'Sweden']['market_value (millions of euros)']\nx22 = market_value_sub[market_value_sub['country'] == 'Mexico']['market_value (millions of euros)']\nx23 = market_value_sub[market_value_sub['country'] == 'South Korea']['market_value (millions of euros)']\nx24 = market_value_sub[market_value_sub['country'] == 'England']['market_value (millions of euros)']\nx25 = market_value_sub[market_value_sub['country'] == 'Belgium']['market_value (millions of euros)']\nx26 = market_value_sub[market_value_sub['country'] == 'Panama']['market_value (millions of euros)']\nx27 = market_value_sub[market_value_sub['country'] == 'Tunisia']['market_value (millions of euros)']\nx28 = market_value_sub[market_value_sub['country'] == 'Japan']['market_value (millions of euros)']\nx29 = market_value_sub[market_value_sub['country'] == 'Senegal']['market_value (millions of euros)']\nx30 = market_value_sub[market_value_sub['country'] == 'Poland']['market_value (millions of euros)']\nx31 = market_value_sub[market_value_sub['country'] == 'Colombia']['market_value (millions of euros)']\n\ny_data = [x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12,x13,x14,x15,x16,\n         x17,x18,x19,x20,x21,x22,x23,x24,x25,x26,x27,x28,x29,x30,x31]\n\ncolor = ['#8e0e0e','#8e0e0e','#8e0e0e','#8e0e0e','#50fa83','#50fa83','#50fa83','#50fa83',\n         '#6300a5','#6300a5','#6300a5','#6300a5','#b5c3cb','#b5c3cb','#b5c3cb','#b5c3cb',\n         '#ffc100','#ffc100','#ffc100','#ffc100','#00cadb','#00cadb','#00cadb','#00cadb',\n         '#fa8350','#fa8350','#fa8350','#fa8350','#2e8b57','#2e8b57','#2e8b57','#2e8b57']\n\nlayout = go.Layout(\n    title='Country Squads - Market Value',\n    paper_bgcolor='white',\n    plot_bgcolor='white',\n    showlegend=False\n)\n\ntraces = []\n\nfor xd, yd, cls in zip(x_data, y_data, color):\n    traces.append(go.Box(\n        y=yd,\n        name=xd,\n        marker= dict(\n            color=cls,\n            size=5\n        )\n    ))\n    \n\nfig = go.Figure(data=traces, layout=layout)\n\niplot(fig)","d2b329bf":"median_market_value = market_value[['group', 'market_value (millions of euros)']].reset_index()\nmedian_market_value =  median_market_value[['country','group','market_value (millions of euros)']]\nmedian_market_value = median_market_value.groupby(['group','country']).median()['market_value (millions of euros)']\nmedian_market_value = median_market_value.reset_index().set_index('country')","d3e44da0":"f, axes = plt.subplots(ncols=4, nrows=2, figsize=(11, 11), sharey=True)\n\nmedian_market_value[median_market_value['group'] == 'A']['market_value (millions of euros)'].plot(\n    kind=\"bar\", ax=axes[0,0], fontsize=13, title='Group A', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'B']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[0,1], fontsize=13, \n                                                                title='Group B', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'C']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[0,2], fontsize=13, \n                                                                title='Group C', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'D']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[0,3], fontsize=13, \n                                                                title='Group D', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'E']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[1,0], fontsize=13, \n                                                                title='Group E', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'F']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[1,1], fontsize=13, \n                                                                title='Group F', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'G']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[1,2], fontsize=13, \n                                                                title='Group G', color='#f3dc8a', edgecolor=['black']*4)\n\nmedian_market_value[median_market_value['group'] == 'H']['market_value (millions of euros)'].plot(kind=\"bar\", ax=axes[1,3], fontsize=13, \n                                                                title='Group H', color='#f3dc8a', edgecolor=['black']*4)\naxes[0,0].set_ylabel('Median Market Value')\naxes[1,0].set_ylabel('Median Market Value')\n\nplt.tight_layout()\n\nplt.style.use('seaborn')\nplt.show()","93c6d507":"ranking_countries = pd.read_csv('..\/input\/complementary-dataset-fifa-world-cup\/ranking_countries.csv')\n\nranking_countries = ranking_countries[['country','group_2018','total_ranking']]\n\nranking_countries = ranking_countries.set_index('country')\n\nranking_countries.head()\n\nranking_countries.loc['South Korea', 'total_ranking'] = 135 #The South Korea value was wrong.","f4669ebb":"ranking_countries['Average Performance in Cups'] = ranking_countries['total_ranking'] \/\/ 5\n\nranking_countries = ranking_countries.reset_index().sort_values(by='country').set_index('country')\n\nranking_countries[['Average Performance in Cups']].plot(kind='bar', figsize=[18,6], fontsize=15, color = '#f3dc8a', edgecolor=(['black']*32), legend=False)\n\nplt.xlabel('Countries', fontsize=15)\nplt.ylabel('Average Performance in Cups', fontsize = 15)\nplt.style.use('fast')\nplt.title('Average Performance in Cups by Country', fontsize=15)","d9f3fa8f":"df = ranking_countries.copy()\n\nf, axes = plt.subplots(ncols=4, nrows=2, figsize=(11, 11), sharey=True)\n\ndf[df['group_2018'] == 'A']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[0,0], fontsize=15, \n                                                            title='Group A', color='#f3dc8a', edgecolor=['black']*4)\n\n\ndf[df['group_2018'] == 'B']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[0,1], fontsize=15, \n                                                                title='Group B', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'C']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[0,2], fontsize=15, \n                                                                title='Group C', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'D']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[0,3], fontsize=15, \n                                                                title='Group D', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'E']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[1,0], fontsize=15, \n                                                                title='Group E', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'F']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[1,1], fontsize=15, \n                                                                title='Group F', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'G']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[1,2], fontsize=15, \n                                                                title='Group G', color='#f3dc8a', edgecolor=['black']*4)\n\ndf[df['group_2018'] == 'H']['Average Performance in Cups'].plot(kind=\"bar\", ax=axes[1,3], fontsize=15, \n                                                                title='Group H', color='#f3dc8a', edgecolor=['black']*4)\naxes[0,0].set_ylabel('Average Performance in World Cups', fontsize=15)\naxes[1,0].set_ylabel('Average Performance in World Cups', fontsize=15)\n\nplt.tight_layout()\n\nplt.style.use('seaborn')\nplt.show()","f7a9d952":"df2 = median_market_value.copy() #copying the dataset to reduce the amount of code needed\ndf = df.reset_index() # reseting index of the df1\ndf2 = df2.reset_index() # reseting index of the df2\n\n\ndf3 = pd.merge(df, df2, how='inner', left_on=['country','group_2018'],right_on=['country','group']) #Inner Join\ndf3 = df3[['country','group','total_ranking','Average Performance in Cups','market_value (millions of euros)']] #selecting columns\ndf3.head() #showing the head of the new df","cdcae2a4":"#Standardizing the columns, before tooking the average (The two columns have different measures)\ndf3['Average Performance in Cups - Z'] = stats.zscore(df['Average Performance in Cups']) #Standardizing the Average Performance in Cups\ndf3['median_market_value_Z'] = stats.zscore(df3['market_value (millions of euros)']) #Standardizing the Median Market value by country\ndf3['combined_scores_Z'] = (df3['median_market_value_Z'] + df3['Average Performance in Cups - Z'])\/2 #Combining them and tooking the average\ndf3.head()","6b1b09ef":"df3 = df3.set_index('country')\n\nf, axes = plt.subplots(ncols=4, nrows=2, figsize=(11, 11), sharey=True) #Setting up the figure\n\n#Creating subplots\ndf3[df3['group'] == 'A']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[0,0], fontsize=16, \n                                                            title='Group A', color='#f3dc8a', edgecolor=['black']*4)\ndf3[df3['group'] == 'B']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[0,1], fontsize=16, \n                                                                title='Group B', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'C']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[0,2], fontsize=16, \n                                                                title='Group C', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'D']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[0,3], fontsize=16, \n                                                                title='Group D', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'E']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[1,0], fontsize=16, \n                                                                title='Group E', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'F']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[1,1], fontsize=16, \n                                                                title='Group F', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'G']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[1,2], fontsize=16, \n                                                                title='Group G', color='#f3dc8a', edgecolor=['black']*4)\n\ndf3[df3['group'] == 'H']['combined_scores_Z'].plot(kind=\"bar\", ax=axes[1,3], fontsize=16, \n                                                                title='Group H', color='#f3dc8a', edgecolor=['black']*4)\n#setting the yaxis label\naxes[0,0].set_ylabel('Combined Indicators (Z Score)', fontsize=15)\naxes[1,0].set_ylabel('Combined Indicators (Z Score)', fontsize=15)\n#Improving the layout\nplt.tight_layout()\n\nplt.style.use('seaborn')\nplt.show() #showing the plot","b23547d8":"observed_results = set(['Uruguay','Russia','Spain','Portugal','France','Denmark','Argentina','Croatia',\n                        'Brazil','Switzerland','Mexico','Sweden','England','Belgium','Japan','Colombia'])\n\nexpected_results_combination_of_scores = ['Uruguay','Russia','Spain','Portugal','Denmark','France','Argentina','Croatia',\n                                          'Brazil','Switzerland','Germany','Mexico','England','Belgium','Japan','Colombia']\n\nexpected_results_average_performance_in_cups = ['Uruguay','Saudi Arabia','Spain','Portugal','France','Denmark','Argentina',\n                                                'Croatia','Brazil','Costa Rica','Germany','Mexico','England','Belgium','Japan','Colombia']\n\nexpected_results_median_market_value = ['Uruguay','Russia','Spain','Portugal','France','Denmark','Argentina','Croatia','Brazil',\n                                        'Serbia','Germany','Mexico','England','Belgium','Senegal']\n","8d01dd2e":"#Comparing the expected results (Combination of Historical performance and median market value) versus the observed results\ncombined_scores = []\nerror_combined_scores = []\nfor c in observed_results:\n    for d in expected_results_combination_of_scores:\n        if d == c:\n            combined_scores.append(d)\n\n#Comparing the expected results (Median Market Value) versus the observed results\nmarket_value_scores = []\nnot_market_value_scores = []\nfor c in observed_results:\n    for d in expected_results_median_market_value:\n        if d == c:\n            market_value_scores.append(d)\n\naverage_historical_scores = []\nnot_average_historical_scores = []\nfor c in observed_results: \n    for d in expected_results_median_market_value: \n        if d == c: # if the cylinder level type matches,\n            average_historical_scores.append(d)\n","72bb251a":"x = 'The average historical performance in World Cups predicted {} out of 16 teams \\nThe median market value of the squads predicted {} out of 16 teams \\nThe combination of those two variables preditcted {} out of 16 teams'.format(len(average_historical_scores), len(market_value_scores), len(combined_scores))\nprint(x)","f6ec62aa":"<a id='market_value_by_soccer_postions'><\/a>\n## Market Value by Soccer positions\n***","ba677ee0":"<a id='loading_packages'><\/a>\n# Loading the packages\n***","9252dede":"- This horizontal bar plot shown that, in general, players who play on **atack** positions worth more money than those who play on **midfield** and **defense.**\n- There are some positions of the midfield that are also highly valuable like: Centre-Forward and Central Midfield; That happens, in my opinion, because of they are responsible to the connection between the defense and atack\n\nThe difference between the valuation of the players wasn't expected to be so different, however, it makes sense, since the goal is a rare event, so, players who score more goals are more valuable for the teams","2bdb417c":"<a id='historical_performance_by_country'><\/a>\n## Historical Performance by Country\n***","7fdfbac7":"Now, we will combine the median market values of the countries  with their historical performances. But, as we are dealing with variables with different measures, we will standardize them before combining them.\n\nAfter that, we will plot the values to see who would advance to the second phase of the world cup based on this combination.","5f516a81":"<a id='combination'><\/a>\n# Combination (Historical Performance and Median Market Value) \n***","91e5c206":"- Based on the analysis that was made above, we can say that the variable that best predicts the countries who will move to the second phase is the combination of the median market value and the average performance in World Cups\n- The most unusual outcome in this World Cup was Germany being disqualified in the group phase, since their squad is the most valuable in their group and they have the best average performance in the last five World Cups.\n- The group H was really one of more balanced groups. For the first time, a team (Japan) was qualified because of the number of yellow cards they have taken\n- Based on median market value and average performance, it was a big surprise the fact that Croatia advanced to the final stage.\n\n## Future Research Ideas\n- Compare performance of the players with their market values and position to identificate undervalued and overvalued players;\n- Identificate which factor is more correlated with a high average attendance in World Cups;\n- Identificate if the World Cup is critical on the decision of who is the best players of the World;\n- Does the teams performs better at home than out of home in World Cups?\n\n","83b4bf14":"<a id='Combined_Scores_by_group_and_country'><\/a>\n## Combined Scores by Group and Country\n***","4a21d018":"Looking at those plots, we can realize somethings:\n1. We didn't have a World Cup in 1942 and 1946 because of the Second World War and the reconstruction of Europe after the war.\n2. The number of teams who have participated in 1950 (the first world cup after the war) was smaller than the number of countries who have participated in 1938, however the number of matches played was bigger. Probably, the model of the world cup changed.\n3. The last time that the number of countries participating in the world cup changed was 1998 (32 countries)","3e5c765a":"<a id='Home_teams_who_win_world_cups'><\/a>\n## Home teams who win at the World Cups at home\n***","85f89471":"- Group A: Uruguay, Saudi Arabia\n- Group B: Spain, Portugal \n- Group C: France, Denmark \n- Group D: Argentina, Croatia\n- Group E: Brazil,  Costa Rica\n- Group F: Germany, Mexico\n- Group G: England \/ Belgium\n- Group H: Japan, Colombia  or Senegal (Their values are too close, however, for the sake of the prediction we will use the higher value - Colombia)\n","d7bf8cb4":"<a id='Attendance_by_world_cups'><\/a>\n## Attendance by World Cups\n***","5d29cef8":"### The colors represent the continent where the World Cup was hosted.\n- Pink: America\n- Blue: Europe\n- Orange: Asia\n- Green: Africa\n\n### Interesting findings:\n- The World Cup of 1950 has the highest attendance in one game of all World Cups: 173,5k. This World Cup was hosted in Brazil.\n- The World Cup with the lowest median happened in 1962 at Chile.\n\n\nLet's take the mean by continent, to see if there is some pattern","1d2eb8b1":"The correlation between the size of the population of the host country and the average attendance is 0.69","1f6ba98e":"## Table of Contents\n- [Loading packages](#loading_packages)\n- [About the data](#About_data)\n\n### Research question:\n- [Problem Statement](#problem_statement)\n\n\n### Exploratory Data Analysis\n- [Performance in World Cups - General View](#Performance_in_world_cups_general_view)\n- [Qualified teams versus matches played](#Qualified_teams_versus_matches_played)\n- [Home teams who win at the World Cups at home](#Home_teams_who_win_world_cups)\n- [Mean attendance per cup versus Population of the Country](#Mean_attendance_verus_population)\n\n\n### Players Market Value\n- [Market Value (Histogram)](#market_value_distribution)\n- [Market Value by Soccer positions](#market_value_by_soccer_postions)\n- [Country Squads - Market Value](#country_squads_market_value)\n- [Expected results (Median Market Value)](#expected_results_median_market_value)\n\n### Average Performance in World Cups\n- [Description](#description)\n- [Historical Performance by Country](#historical_performance_by_country)\n- [Historical Performance by Country and Group](#historical_performance_by_country_and_group) \n- [Expected Results (Average Historical Performance)](#expected_results_history)\n\n\n### Combination of the median market value of the squads and the average performance in World Cups of the countries\n- [Combination (Historical Performance and Median Market Value)](#combination)\n- [Combined Scores by Group and Country](#Combined_Scores_by_group_and_country)\n- [Expected results (Combination of indicators)](#expected_results_combination_of_indicators)\n\n### Expected versus Observed results\n- [Outcome](#expected_vs_observed)\n\n### Conclusions\n- [Conclusions](#conclusion)\n\n\n","50839fe1":"<a id='conclusion'><\/a>\n# Conclusions\n***","40637fe6":"\n\n# Introduction","a2bdc60c":"<a id='Mean_attendance_verus_population'><\/a>\n## Mean attendance per cup versus populations of the host countries (Scatterplot)\n***","a4d6dec8":"- Group A: Uruguay, Russia\n- Group B: Spain, Portugal\n- Group C: France, Denmark\n- Group D: Argentina, Croatia\n- Group E:  Brazil, Switzerland\n- Group F: Germany, Mexico\n- Group G: England, Belgium\n- Group H: Japan, Colombia or Senegal (Colombian score is slightly higher, so we will use Colombia instead of Senegal)","81a83bf8":"In order to predict the countries, who move probably will move to the round of 16, we will use the median market value of the countries and split the countries by group.\n\nAfter that, we will compare the median market values to indicate, based on their median market value, which countries are more likely to advance to the round of 16 in each group.\n\nFirstly, let's take a look in the median market value by country.","40048533":"<a id='expected_results_median_market_value'><\/a>\n## Expected results (Median Market Value)\n***\n- Group A: Russia, Uruguay\n- Group B: Spain, Portugal \n- Group C: France, Denmark \n- Group D: Argentina, Croatia\n- Group E: Brazil, Serbia \/ Switzerland (Serbia is slightly higher) \n- Group F: Germany, Mexico \/ Sweden (Mexico is slightly higher)\n- Group G: England \/ Belgium \n- Group H: Senegal, Poland \/ Colombia (Equal Values )\n","58bea1fc":"* The distribution of the market values of the players is right skewed. Most of the players worth less than 25 millions of euros, while there are some players that worth more than 100 million. \n\nWe want ot have an overview of the players's skills, so we will use the median instead of the mean when we start to predict the countries who advance to the second phase of the World Cup.","29ea2001":"<img src='https:\/\/www.newsamericasnow.com\/wp-content\/uploads\/2018\/05\/FifA-world-cup-2018.jpg'\/>","6ffb5eab":"# Players Market Value","40b35a43":"<a id='expected_results_history'><\/a>\n## Expected Results (Average Historical Performance)\n***","7616628a":"<a id='expected_results_combination_of_indicators'><\/a>\n## Expected results (Combination of indicators)\n***","ad06cc3b":"# Research question\n\n<a id='problem_statement'><\/a>\n## Problem Statement: Is possible to predict the countries who will advance to the second phase in World Cup using data?\n***\n\n### The main objective of this analysis is to identify which variable best predicts them teams who will advance to the second phase of the World Cup. In order to do that, we will use three variables:\n- The median market value of the squads;\n- The average performance in World Cups\n- The combination of the average performance in World Cups and the median market value of the squads","9d795edb":"<a id='historical_performance_by_country_and_group'><\/a>\n## Historical Performance by Country and Group\n***\n","0bf9ac6b":"From 1930 to 2014, Fifa have already organized 20 World Cups. In five of them, the home team was the one who won. However, it's important to point out, that most of the countries who have already hosted a World Cup have a good overall performance in World Cups. In another study, we would like to test if home teams are more likely to perform better at home.","dc8cf142":"<a id='country_squads_market_value'><\/a>\n## Country Squads - Market Value\n***","623856a6":"Sounds like there is  a weak positive linear relationship, other factors may influence as well like:\n- World  prosperity in the year that the World Cup took place\n- Globalization (is easier to travel to another countries nowadays)\n- The location of the World Cup:\n- Capacity of the stadiums. Example: the capacity of the stadium of Maracan\u00e3 in Brazil was greater than 150.000, but today the capacity is 79.000)","fd1825ea":"<a id='market_value_distribution'><\/a>\n## Market Value (Histogram)\n***","672498b7":"<a id='Performance_in_world_cups_general_view'><\/a>\n## Performance in World Cups - General View\n***","dc3e55c9":"<a id='expected_vs_observed'><\/a>\n# Expected results versus observed results\n***","027a040c":"<a id='Qualified_teams_by_year'><\/a>\n## Qualified teams by year\n***","739bc424":"#### The countries with the highest average performance rating in the last five World Cups  are:\n - Argentina;\n - Brazil;\n - France;\n - Germany;\n - Spain;\n - Mexico.\n \n #### Countries that haven't participated in the last five World Cups:\n - Egypt;\n - Iceland;\n - Panama;\n - Peru;","2a4fda0b":"# Historical performance in World Cups","b53e5665":"<a id=about_data><\/a>\n# About the Data\n***\nWe will use two datasets of the Kernel of Andre Becklas on Kaggle, this data can be found here: https:\/\/www.kaggle.com\/abecklas\/fifa-world-cup\n- The first dataset is named **WorldCups.csv** and provides general information about the World Cups throught history\n- The second dataset is named **WorldCupsMatches.csv** and provide general information about all matches disputed in World Cups\n- The third dataset is named **market_value.csv** and was scraped by us from this site:  https:\/\/www.transfermarkt.com\/. More information on the section below.\n- The fouth dataset is named **ranking countries.csv ** and was created by us based on the second dataset and wikipedia. It provides information about the total performance of the countries who are in Fifa World Cup in the last five tournaments. More information about this dataset can be found in the next sections.\n\n","50ead92c":"<a id='Qualified_teams_versus_matches_played'><\/a>\n## Qualified teams versus matches played\n***","e31f155b":"- Africa and Asia only was the host continent one time each.\n- The average number of people per game is higher in American than Europe\n\n","fb1c1d8d":"1. Only countries from South America and Europe have already won the world cup\n2. There are some countries that went far in the past world cups, but were divided in more than one country like: Soviet Union, Czechoslovakia, Yoguslavia\n3. Netherlands have never win a world cup, but this country almost win three times.","b6022fce":"# Exploratory Data Analysis","da2c09d7":"<a id='description'><\/a>\n## Description\n***\n\nThis dataset was created by us.  In order to create the dataset, we researched the first dataset along with other sources like wikipedia to understand the performance of all the countries in the last five cups, after that, we categorized them (grading each of those categories as following), creating one column for each world cup. \n\n### There are seven categories: \n* nc  = not classified for cup \n* gp  = group phase \n* r16  = round of 16\n* qf  = quarter-finals \n* sf  = semi-finals \n* f  = finals \n* win  = won the world cup\n\n### Number of points by category\n* nc = 0 points \n* gp = 15 points\n* r16 = 30 points\n* qf = 45 points \n* sf = 60 points\n* f = 75 points\n* win = 100 points\n\n### Why we choosed only the five last cups?\n\nFifa has changed the model of the World Cup a lot of times in the past, changing the number of phases, the number of teams who can participate in each continent and the last time that the model has changed was in 1998. So, we prefer to analyse world cups that has the same model because it's more practical and less prone to error since we don't have to adapt the categories and grades to each world cup model.\n\n### Countries considered in the ranking:\nOnly the countries that are qualified for the Fifa World Cup 2018\n\n### Important Note: \nWe will took the average of the ranking (to get the average performance in cups)","3c91aa9c":"### Some takeaways:\n1. The market value of the players is very unbalanced and there is a lot of outliers.\n2. The two most valuable players are in Argentina and Brazil: Lionel Messi and Neymar\n3. The five teams with the highest median market value are: Brazil, France, Germany, England and Spain\n4. In order to predict the team who will move through to the round of 16, we will use only the median to avoid the influence of the outliers because we want to know the overall quality of the teams (assuming here a correlation between market value of the players and their quality)\n5. The most balanced group is the Group H: Japan, Senegal, Poland and Colombia"}}