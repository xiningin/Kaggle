{"cell_type":{"9d0d1abe":"code","78d47cd5":"code","eeeefab0":"code","6798d4aa":"code","8fd67655":"code","4bc939ef":"code","fab578ae":"code","2fff189d":"code","2e5f0990":"code","68d01c0b":"code","e655e2a7":"code","4070ca92":"code","b2675a7b":"code","9be484a3":"code","daf40531":"code","071ecf5f":"code","ca3ab8cb":"code","0eb16784":"code","3017ef9a":"code","dd44a93a":"code","43e2fcbd":"code","d176d834":"code","166d9cd0":"code","15d88a7e":"code","da285a28":"code","35704cae":"code","addfacc8":"code","fe356b60":"code","fde37e8e":"code","f446ffef":"code","d4968991":"markdown","e3075086":"markdown","81e56eeb":"markdown","076ad728":"markdown","6b755d5f":"markdown"},"source":{"9d0d1abe":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n%matplotlib inline","78d47cd5":"def load_data(file_path):\n    return pd.read_csv(file_path, sep=r'\\s*,\\s*', header=0, engine='python', error_bad_lines=False)\nbooks = load_data(\"..\/input\/goodreadsbooks\/books.csv\").set_index(\"bookID\")","eeeefab0":"books.head()","6798d4aa":"books.info()","8fd67655":"books.describe()","4bc939ef":"import matplotlib.pyplot as plt\nbooks.hist(bins=50, figsize=(20,15))\n#weather.hist(bins=50, figsize=(20,15))\nplt.show()","fab578ae":"corr_matrix = books.corr()\ncorr_matrix","2fff189d":"attributes = [\"average_rating\",\"num_pages\",\"ratings_count\",\"text_reviews_count\"]","2e5f0990":"books[attributes].head()","68d01c0b":"# Pandas method\nfrom pandas.plotting import scatter_matrix\nscatter_matrix(books[attributes], figsize=(12,8))","e655e2a7":"# Seaborn method\nsns.pairplot(data=books[attributes])\nsns.set_palette(\"Set3\")","4070ca92":"sns.set_context('paper')\nsns.set_palette(\"Set3\")\nplt.figure(figsize=(15,10))\nax = languages = books.groupby('language_code')['title'].count().plot.bar()\nplt.title('Language Code')\nplt.xticks(fontsize = 15)\nfor p in ax.patches:\n    ax.annotate(str(p.get_height()), (p.get_x()-0.3, p.get_height()+100))","b2675a7b":"# Sorting by weighted factor - not ideal...weights num reviews highly!\nbooks[\"weighted_rating\"] = books[\"average_rating\"]*books[\"ratings_count\"]\nbooks = books.sort_values(by=\"weighted_rating\", ascending=False)","9be484a3":"books.head()","daf40531":"books.plot(kind=\"scatter\", x=\"num_pages\", y=\"average_rating\")#, alpha=0.1, s=AVG_speed, label=\"Speed\", figsize=(10,7), c=trips[\"ETA\"], cmap=plt.get_cmap(\"jet\"), colorbar=True, sharex=False)","071ecf5f":"books.plot(kind=\"scatter\", x=\"num_pages\", y=\"weighted_rating\")#, alpha=0.1, s=AVG_speed, label=\"Speed\", figsize=(10,7), c=trips[\"ETA\"], cmap=plt.get_cmap(\"jet\"), colorbar=True, sharex=False)","ca3ab8cb":"plt.figure(figsize=(10,10))\nplot = sns.countplot(y = \"authors\", data = books, order = books['authors'].value_counts().iloc[:20].index, palette = \"Set3\")\nplt.xlabel('Number of Books')\nplt.ylabel('Authors')","0eb16784":"most_rated = books.sort_values('ratings_count', ascending = False).head(20).set_index('title')\nplt.figure(figsize=(15,10))\nsns.barplot(most_rated['average_rating'], most_rated.index, palette='Set3')","3017ef9a":"sns.distplot(books['average_rating'], \n             bins = 80,\n             kde_kws={\"color\": \"coral\", \"lw\": 1, \"label\": \"KDE\"}, \n             hist_kws={\"histtype\": \"stepfilled\", \"linewidth\": 1, \"alpha\": 1, \"color\": \"skyblue\"});\nplt.xlabel(\"Average Rating\")","dd44a93a":"sns.distplot(books['num_pages'], \n             bins=100,\n             kde_kws={\"color\": \"coral\", \"lw\": 1, \"label\": \"KDE\"}, \n             hist_kws={\"histtype\": \"stepfilled\", \"linewidth\": 1, \"alpha\": 1, \"color\": \"skyblue\"});\nplt.xlabel(\"Book Length (pages)\")\nplt.xlim(0,2000)","43e2fcbd":"plt.figure(figsize=(15,10))\n#books.dropna(0, inplace=True)\nsns.set_context('paper')\nax = sns.jointplot(x=\"average_rating\",y='text_reviews_count', kind='scatter',  data= books[['text_reviews_count', 'average_rating']])\nax.set_axis_labels(\"Average Rating\", \"Text Review Count\")\nplt.show()","d176d834":"plt.figure(figsize=(15,10))\nsns.set_context('paper')\nax = sns.jointplot(x=\"average_rating\", y=\"num_pages\", data = books, color = 'crimson')\nax.set_axis_labels(\"Average Rating\", \"Number of Pages\")","166d9cd0":"without_outliers = books[~ (books['num_pages']>1500) & (books['ratings_count']>50) & (books['text_reviews_count']>50) & (books['num_pages']>25)]\nax = sns.jointplot(x=\"average_rating\", y=\"num_pages\", data = without_outliers, color = 'darkcyan')\nax.set_axis_labels(\"Average Rating\", \"Number of Pages\")","15d88a7e":"worst_books = without_outliers.sort_values('average_rating').set_index('title').head(40)\nplt.figure(figsize=(15,10))\nax = sns.barplot(worst_books['average_rating'], worst_books.index, palette='Set3')\nax.set(xlabel=\"Average Rating\", ylabel=\"Book Title\")","da285a28":"best_books = without_outliers.sort_values('average_rating', ascending=False).set_index('title').head(40)\nplt.figure(figsize=(15,10))\nax = sns.barplot(best_books['average_rating'], best_books.index, palette='Set3')\nax.set(xlabel=\"Average Rating\", ylabel=\"Book Title\")","35704cae":"plt.figure(figsize=(15,10))\nduplicate = books['title'].value_counts()[:40]\n#rating = books.average_rating[:20]\nax = sns.barplot(x = duplicate, y = duplicate.index, palette='Set3')\nax.set(xlabel=\"Occurences\", ylabel=\"Book Title\")","addfacc8":"# Author book ratings over time\n#popular_authors = ['Stephen King', 'Agatha Christie', 'Dan Brown', 'J.K. Rowling']\n#books[books['authors']==popular_authors[0]].sort_values(\"average_rating\", ascending=False)","fe356b60":"ratings = np.arange(0, 5.5, 0.5)\n#print(len(ratings))\ngroups = pd.cut(books[\"average_rating\"], bins=ratings)\ngrouped_ratings = books.groupby(groups).sum()\ngrouped_ratings\n#grouped_ratings['average_rating']\n#sns.distplot(grouped_ratings['ratings_count'])\n#grouped_ratings.plot.hist(\"average_rating\", figsize=(10,10), colormap=\"Set3\")\n#plt.pie(grouped_ratings[\"average_rating\"], explode = (0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1), labels = ratings, autopct='%1.1f%%', shadow=True, startangle=90)\n#plt.axis('equal')\n#plt.show()\ngrouped_ratings.plot.pie(y=\"average_rating\", figsize=(10,10), colormap=\"hsv\")","fde37e8e":"from sklearn.linear_model import LinearRegression\nlin_reg = LinearRegression()\nlin_reg.fit(train_df, train_labels)","f446ffef":"# Split data for training\nbooks_train = training.iloc[:-10000]\noot_df = training.iloc[-10000:]\noot_df.shape,train_df.shape\ntrain_df = train_df.drop('Timestamp',axis=1)\ntrain_labels = train_df[\"ETA\"]\ntrain_df = train_df.drop('ETA',axis=1)","d4968991":"# Goodreads Predition","e3075086":"## Data Visualisation","81e56eeb":"**Ideas**:\n\n1. Filter based on user accounts (e.g. # followers, # reviews, etc) - will need to scrape Goodreads user data.\n2. Exclude outliers and predict book rating based on number of reviews and book length etc.","076ad728":"## Machine Learning Prediction and Recommendation (NOT STARTED)","6b755d5f":"## Exploratory Analysis"}}