{"cell_type":{"f90739d7":"code","0ad4e8a5":"code","046a62ca":"code","80706905":"code","eea6ff7f":"code","69ba616e":"code","51b1200c":"code","611dcf71":"code","486ef89b":"code","af28c11a":"code","1b4b0ad2":"code","e77a3f6d":"code","905aff67":"code","3738a0a4":"code","27fb1434":"code","25d4f9c7":"code","b38ca777":"code","ca7e2a83":"code","e951818a":"code","f0c712ed":"code","b3a5080d":"code","0f9efe37":"code","e0729c67":"code","3d705493":"markdown","ab1b5cec":"markdown","611f5a27":"markdown","49c795f2":"markdown","37b9fbf4":"markdown","3edf3e44":"markdown","a8dbbcec":"markdown","9694ca1f":"markdown"},"source":{"f90739d7":"import os \nimport numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns \ncolor = sns.color_palette()\n%matplotlib inline \n\nimport plotly.offline as py \nfrom plotly import tools \npy.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.express as px \n\npd.options.mode.chained_assignment = None ","0ad4e8a5":"us_data_path = \"\/kaggle\/input\/covid19-in-usa\/\"\nus_df = pd.read_csv(us_data_path + \"us_covid19_daily.csv\")\nus_states_df = pd.read_csv(us_data_path + \"us_states_covid19_daily.csv\")\nus_df[\"date\"] = pd.to_datetime(us_df[\"date\"], format=\"%Y%m%d\")\nus_states_df = us_states_df.reindex(index=us_states_df.index[::-1])\nus_states_df[\"date\"] = pd.to_datetime(us_states_df[\"date\"], format=\"%Y%m%d\").dt.date.astype(str)\n\n#%Y%m%d -> %m%d%y  %m%d%Y","046a62ca":"us_df.head()","80706905":"us_states_df.head()","eea6ff7f":"state_map_dict = {'AL': 'Alabama',\n 'AK': 'Alaska',\n 'AS': 'American Samoa',\n 'AZ': 'Arizona',\n 'AR': 'Arkansas',\n 'CA': 'California',\n 'CO': 'Colorado',\n 'CT': 'Connecticut',\n 'DE': 'Delaware',\n 'DC': 'District of Columbia',\n 'D.C.': 'District of Columbia',\n 'FM': 'Federated States of Micronesia',\n 'FL': 'Florida',\n 'GA': 'Georgia',\n 'GU': 'Guam',\n 'HI': 'Hawaii',\n 'ID': 'Idaho',\n 'IL': 'Illinois',\n 'IN': 'Indiana',\n 'IA': 'Iowa',\n 'KS': 'Kansas',\n 'KY': 'Kentucky',\n 'LA': 'Louisiana',\n 'ME': 'Maine',\n 'MH': 'Marshall Islands',\n 'MD': 'Maryland',\n 'MA': 'Massachusetts',\n 'MI': 'Michigan',\n 'MN': 'Minnesota',\n 'MS': 'Mississippi',\n 'MO': 'Missouri',\n 'MT': 'Montana',\n 'NE': 'Nebraska',\n 'NV': 'Nevada',\n 'NH': 'New Hampshire',\n 'NJ': 'New Jersey',\n 'NM': 'New Mexico',\n 'NY': 'New York',\n 'NC': 'North Carolina',\n 'ND': 'North Dakota',\n 'MP': 'Northern Mariana Islands',\n 'OH': 'Ohio',\n 'OK': 'Oklahoma',\n 'OR': 'Oregon',\n 'PW': 'Palau',\n 'PA': 'Pennsylvania',\n 'PR': 'Puerto Rico',\n 'RI': 'Rhode Island',\n 'SC': 'South Carolina',\n 'SD': 'South Dakota',\n 'TN': 'Tennessee',\n 'TX': 'Texas',\n 'UT': 'Utah',\n 'VT': 'Vermont',\n 'VI': 'Virgin Islands',\n 'VA': 'Virginia',\n 'WA': 'Washington',\n 'WV': 'West Virginia',\n 'WI': 'Wisconsin',\n 'WY': 'Wyoming'}\n","69ba616e":"state_map_dict['IL']","51b1200c":"state_code_dict = {v:k for k, v in state_map_dict.items()}\nstate_code_dict[\"Chicago\"] = 'Illinois'","611dcf71":"state_code_dict['Chicago']","486ef89b":"def correct_state_names(x):\n    try:\n        return state_map_dict[x.split(\",\")[-1].strip()]\n    except:\n        return x.strip()\n    \ndef get_state_codes(x):\n    try:\n        return state_code_dict[x]\n    except:\n        return \"Others\"\n\ncovid_19_df = pd.read_csv(\"..\/input\/novelcoronavirus2019dataset\/covid_19_data.csv\")\n\n\nus_covid_df = covid_19_df[covid_19_df[\"Country\/Region\"]==\"US\"]\n\n\nus_covid_df[\"Province\/State\"] = us_covid_df[\"Province\/State\"].apply(correct_state_names)\nus_covid_df[\"StateCode\"] = us_covid_df[\"Province\/State\"].apply(lambda x: get_state_codes(x))\n\ncumulative_df = us_covid_df.groupby(\"ObservationDate\")[\"Confirmed\", \"Deaths\", \"Recovered\"].sum().reset_index()\n\n# us_df[\"date\"] = pd.to_datetime(us_df[\"date\"], format=\"%Y%m%d\")\n","af28c11a":"covid_19_df.head()","1b4b0ad2":"us_covid_df","e77a3f6d":"cumulative_df.head()","905aff67":"#Change 'ObservationDate' 01\/01\/2021 -> 2021\/01\/01 \uc774\uac70 \uc548\ud558\uba74 \uadf8\ub798\ud504\uac00 \ub0a0\uc9dc\ub97c \uc778\uc2dd\ubabb\ud574\uc11c \uc774\uc0c1\ud558\uac8c \ub098\uc634 \nfrom datetime import datetime, timedelta\nfrom pandas import DataFrame\ncumulative_df['ObservationDate'] = pd.to_datetime(cumulative_df['ObservationDate'], format='%m\/%d\/%Y')","3738a0a4":"cumulative_df.head()","27fb1434":"fig = px.bar(cumulative_df, x='ObservationDate', y='Confirmed')\nlayout = go.Layout(\n    title = go.layout.Title(text='Daily cumulative count of confirmed COVID-19 cases in US', x=0.5),\n    font = dict(size=14),\n    width = 800,\n    height = 500,\n    xaxis_title = 'Date of Observation',\n    yaxis_title = 'Number of Confirmed cases' )\n\nfig.update_layout(layout)\nfig.show()","25d4f9c7":"fig = px.bar(cumulative_df, x='ObservationDate', y='Deaths')\nlayout = go.Layout(\n    title = go.layout.Title(text='Daily cumulative count of deaths due to COVID-19 in US', x=0.5),\n    font = dict(size=14),\n    width = 800,\n    height = 500,\n    xaxis_title = 'Date of Observation',\n    yaxis_title = 'Number of death cases' )\n\n\nfig.update_layout(layout)\nfig.show()","b38ca777":"cumulative_df['ConfirmedNew'] = cumulative_df['Confirmed'].diff()","ca7e2a83":"cumulative_df['ConfirmedNew'].head()","e951818a":"cumulative_df['ObservationDate'] = pd.to_datetime(cumulative_df['ObservationDate'], format='%m\/%d\/%Y')\nfig = px.bar(cumulative_df, x=\"ObservationDate\", y=\"ConfirmedNew\")\nlayout = go.Layout(\n    title=go.layout.Title(\n        text=\"Daily count of new confirmed COVID-19 cases in US\",\n        x=0.5\n    ),\n    font=dict(size=14),\n    width=800,\n    height=500,\n    xaxis_title = \"Date of observation\",\n    yaxis_title = \"Number of confirmed cases\"\n)\n\nfig.update_layout(layout)\nfig.show()","f0c712ed":"us_covid_df.head()","b3a5080d":"import datetime \n\ncumulative_df = us_covid_df.groupby(['StateCode','ObservationDate'])['Confirmed','Deaths','Recovered'].sum().reset_index()\ncumulative_df['ObservationDate'] = pd.to_datetime(cumulative_df['ObservationDate'], format ='%m\/%d\/%Y').dt.date\ncumulative_df = cumulative_df.sort_values(by='ObservationDate').reset_index(drop=True)\nstart_date = datetime.date(2020, 1, 22)\ncumulative_df = cumulative_df[cumulative_df['ObservationDate']>=start_date]\ncumulative_df['ObservationDate'] = cumulative_df['ObservationDate'].astype(str)\n","0f9efe37":"cumulative_df['StateCode']","e0729c67":"fig = px.choropleth(locations=cumulative_df['StateCode'],\n                    color = cumulative_df['Confirmed'],\n                    locationmode= 'USA-states',\n                    scope = 'usa',\n                    animation_frame = cumulative_df['ObservationDate'],\n                    color_continuous_scale = 'Reds',\n                    range_color = [0,600000])\n\nlayout = go.Layout(\n    title=go.layout.Title( text=\"Cumulative count of COVID-19 cases in US states\",\n        x=0.5), font=dict(size=14),)\n\nfig.update_layout(layout)\nfig.show()","3d705493":"https:\/\/www.kaggle.com\/sudalairajkumar\/covid-19-analysis-of-usa\n\nThank you for your good notebook! \nI updated the data +2021 data!","ab1b5cec":"# <a id='1'>1. Read dataset<\/a>","611f5a27":"# <a id='3_3'>3.3 ConfirmedNew & Confirmed","49c795f2":"# <a id='2' >2. US state code to name mapping","37b9fbf4":"# <a id='4'>4. Map showing cumulative count of confirmed COVID-19 cases over time ","3edf3e44":"#  Contents\n## - <a href='#1'>1. Read dataset<\/a> \n## - <a href='#2'>2. US state code to name mapping<\/a> \n## - <a href='#3'>3. Plot for number of cumulative covid cases over time<\/a>\n###        - <a href='#3_1'>3.1. ObservationDate & Confirmed <\/a>\n###        - <a href='#3_2'>3.2. ObservationDate & Deaths<\/a>\n###        - <a href='#3_3'>3.3. ConfirmedNew & Confirmed<\/a> \n## - <a href='#4'>4. Map showing cumulative count of confirmed COVID-19 cases over time <\/a","a8dbbcec":"## <a id='3_2'>3.2 ObservationDate & Deaths\n","9694ca1f":"# <a id='3'>3. Plot for number of cumulative covid cases over time. \n## <a id='3_1'>3.1 ObservationDate & Confirmed\n"}}