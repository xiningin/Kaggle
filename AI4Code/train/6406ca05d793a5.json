{"cell_type":{"18c4adfa":"code","720fcc9f":"code","dbc82048":"code","27e0b322":"code","b2a5b12a":"code","37c58204":"code","9111ecc2":"code","b5160800":"code","f09d8f60":"code","2f8508ad":"code","fbd31104":"code","4b90164c":"code","4967f4f6":"code","460611d4":"code","7c61e2f5":"code","da1427e3":"code","3eccd470":"code","6f62cd60":"code","78b480d5":"code","0fcff780":"code","bac7d6b4":"code","a32dca64":"code","fc2cdb2d":"code","ad63d3b2":"code","f98a582a":"code","a41d5174":"code","7d30f08a":"code","336ab772":"code","50377378":"code","c9eda484":"code","43ce9e8d":"code","cbb82090":"markdown","f78de773":"markdown","6be8c050":"markdown","3c590c6e":"markdown","608c3762":"markdown","0261abd8":"markdown","64d1f237":"markdown","1b2fb2d0":"markdown","ad3386ec":"markdown","1b50fd19":"markdown","f7fda69f":"markdown","c9803828":"markdown","aac23439":"markdown","717c0cb9":"markdown","f92f849e":"markdown","85f4a796":"markdown","f4fbc32b":"markdown","59e325de":"markdown","63878555":"markdown","dc49d780":"markdown","7788c3c9":"markdown","76099f9a":"markdown","6e062bf4":"markdown","d2e8ab76":"markdown","55e1244b":"markdown","41b18ca0":"markdown","81ecde73":"markdown","ce1a7e46":"markdown","5c7e2ece":"markdown","92e10490":"markdown","99e5fb14":"markdown","57bcdc49":"markdown","56274105":"markdown"},"source":{"18c4adfa":"from PIL import Image\nImage.open(\"..\/input\/rulebased\/ruleBased.jpeg\")","720fcc9f":"# Importing Libraries\nimport pandas as pd\n\n# loading Data\ndf = pd.read_csv(\"..\/input\/persona\/week_02_data.csv\")\ndf.head()","dbc82048":"df.shape","27e0b322":"df.info()","b2a5b12a":"# Question 2\ndf[\"SOURCE\"].nunique()  # df.SOURCE.nunique()","37c58204":"df[\"SOURCE\"].value_counts()\n# value_counts : It is one of the most used methods that gives the class information of the related categorical variable.","9111ecc2":"df[\"PRICE\"].nunique()","b5160800":"df[\"PRICE\"].value_counts()","f09d8f60":"df[\"COUNTRY\"].value_counts()","2f8508ad":"df.groupby(\"COUNTRY\").agg({\"PRICE\":\"sum\"})\n\n# df.groupby(\"COUNTRY\")[\"PRICE\"].sum() \n\n# The thing to note here is that the variable we do groupby operation comes to us as \"index\". We observe this in our output.","fbd31104":"df.groupby(\"SOURCE\").agg({\"PRICE\":\"count\"})\n\n# df.groupby(\"SOURCE\")[\"PRICE\"].count() OR\n# df[\"SOURCE\"].value_counts()","4b90164c":"df.groupby(\"COUNTRY\").agg({\"PRICE\":\"mean\"})","4967f4f6":"df.groupby(by=['SOURCE']).agg({\"PRICE\": \"mean\"})  # by=[\"SOURCE\"]  == df.groupby(\"SOURCE\")","460611d4":"df.groupby(by=[\"COUNTRY\", 'SOURCE']).agg({\"PRICE\": \"mean\"})","7c61e2f5":"df.groupby(by=[\"COUNTRY\", 'SOURCE', \"SEX\", \"AGE\"]).agg({\"PRICE\": \"mean\"})","da1427e3":"agg_df = df.groupby([\"COUNTRY\", \"SOURCE\", \"SEX\",\"AGE\"]).agg({\"PRICE\": \"mean\"}).sort_values(by=\"PRICE\", ascending=False)\nagg_df.head()","3eccd470":"agg_df = agg_df.reset_index()\nagg_df.head()\n\n# With the help of reset_index(), we fixed our variables that appear as index as variables.","6f62cd60":"# Let's specify from where the AGE variable will be divided\nbins = [0, 18, 23, 30, 40, agg_df[\"AGE\"].max()]","78b480d5":"# Let's express what the nomenclature will be for the dividing points:\nmy_labels = [\"0_18\", \"19_23\", \"24_30\", \"31_40\", \"41_\" + str(agg_df[\"AGE\"].max())]","0fcff780":"# divide age:\nagg_df[\"AGE_CAT\"] = pd.cut(agg_df[\"AGE\"], bins, labels=my_labels)\nagg_df.head()\n\n# We use pd.cut to convert it to a categorical variable.","bac7d6b4":"# Let's perform the operation in such a way that we select the observation values in the above loop:\nagg_df.shape","a32dca64":"agg_df[\"CUSTOMER_LEVEL_BASED\"] = [str(agg_df[\"COUNTRY\"][i]).upper()\n                                  + \"_\"\n                                  + str(agg_df[\"SOURCE\"][i]).upper()\n                                  + \"_\"\n                                  + str(agg_df[\"SEX\"][i]).upper()\n                                  + \"_\"\n                                  + str(agg_df[\"AGE_CAT\"][i]).upper()\n                                  for i in range(agg_df.shape[0])]\n\n# # our data doesn't actually need str because it consists of only str values","fc2cdb2d":"# Let's add it to the dataset:\n\nagg_df = agg_df[[\"CUSTOMER_LEVEL_BASED\",\"PRICE\"]]\nagg_df.head()","ad63d3b2":"agg_df = agg_df.groupby(\"CUSTOMER_LEVEL_BASED\").agg({\"PRICE\":\"mean\"}).reset_index()\nagg_df","f98a582a":"agg_df[\"CUSTOMER_LEVEL_BASED\"].value_counts()","a41d5174":"agg_df[\"SEGMENT\"]=pd.qcut(agg_df[\"PRICE\"], 4, labels=[\"D\",\"C\",\"B\",\"A\"])\n\n# qcut takes a variable and sorts it from 0 to the end.","7d30f08a":"agg_df.groupby(\"SEGMENT\").agg([\"mean\",\"max\",\"sum\"]).sort_values(\"SEGMENT\", ascending=False)\nagg_df","336ab772":"agg_df[agg_df[\"SEGMENT\"] == \"C\"].describe().T","50377378":"new_user = \"TUR_ANDROID_FEMALE_31_40\"\nnew_user_2 =\"FRA_IOS_FEMALE_31_40\"","c9eda484":"agg_df.loc[agg_df[\"CUSTOMER_LEVEL_BASED\"] == new_user, [\"PRICE\",\"SEGMENT\"]]\nagg_df.loc[agg_df[\"CUSTOMER_LEVEL_BASED\"] == new_user, [\"PRICE\",\"SEGMENT\"]].agg({\"PRICE\":\"mean\"})","43ce9e8d":"agg_df.loc[agg_df[\"CUSTOMER_LEVEL_BASED\"] == new_user_2, [\"PRICE\",\"SEGMENT\"]]\nagg_df.loc[agg_df[\"CUSTOMER_LEVEL_BASED\"] == new_user_2, [\"PRICE\",\"SEGMENT\"]].agg({\"PRICE\":\"mean\"})","cbb82090":"# **TASK 7:**","f78de773":"# **TASK 8:**","6be8c050":"# **Variables**\n\n* **PRICE** \u2013 Customer's spending amount\n* **SOURCE** \u2013 The type of device the customer is connecting to\n* **SEX** \u2013 Gender of the client\n* **COUNTRY** \u2013 Country of the customer\n* **AGE** \u2013 Age of the customer","3c590c6e":"# **TASK 1:**\n","608c3762":"* **Question 8:** What are the PRICE averages by country?","0261abd8":"* **Result**: we had non-deduplicated data. It would take too much time for us to interpret them. As a solution, we grouped them into segments and reduced them to 4.\n\n* If we want to deduplicate something in multiplexed data, we need a value to represent it. This is provided by the PRICE variable in our data. Because we need to show representative value.\n\n**THANK YOU :)**","64d1f237":"# **Helloooooo, (I <3 VBO) I will explain my Rule-Based Classification project in my weekly assignments in order to turn it into a contribution for you.**\n![image.png](attachment:17e0e236-3916-4c51-9f1a-08128145c140.png)","1b2fb2d0":"# **Lead Calculation with Rule-Based Classification**","ad3386ec":"**Sort the output by PRICE.**\n\n* **To better see the output in the previous question, apply the sort_values method in descending order of PRICE.**\n\n* **Save the output as agg_df.**","1b50fd19":"# **TASK 4:**","f7fda69f":"# **Project Steps**","c9803828":"# **Business Problem**\n\n**A game company wants to create level-based new customer definitions (personas) by using some features of its customers, and to create segments according to these new customer definitions and to estimate how much the new customers can earn on average according to these segments.**","aac23439":"* **Question 9**: What are the PRICE averages according to SOURCEs?","717c0cb9":"*  **Question 10:** What are the PRICE averages in the COUNTRY-SOURCE breakdown?","f92f849e":"**Convert age variable to categorical variable and\nAdd it to agg_df.**\n\n* **Convert the numeric variable age to a categorical variable.**\n\n* **Construct the intervals convincingly.**\n\n* **For example: '0_18', '19_23', '24_30', '31_40', '41_70'**","85f4a796":"**Segment new customers (personas).**\n\n* **Divide new customers (Example: USA_ANDROID_MALE_0_18) into 4 segments according to PRICE.**\n\n* **Add the segments as a variable to agg_df with the SEGMENT naming.**\n\n* **Describe segments (group by segments and get price mean, max, sum).**\n\n* **Analyze C segment (Extract only C segment from the dataset and analyze).**","f4fbc32b":"# **TASK 6:**","59e325de":"**Convert the names in the index to variable names.**\n\n* **All variables except price in the output of the third question are index names.**\n\n* **Convert these names to variable names**","63878555":"# **TASK 3:**","dc49d780":"* *Attention!* After creating customers_level_based values with list comprehension, these values need to be deduplicated.\n* For example, it could be more than one of the following: USA_ANDROID_MALE_0_18. It is necessary to take them to groupby and get the price averages.**","7788c3c9":"* **Question 5:** How many sales were made from which country?","76099f9a":"* **Question 6:** How much was earned in total from sales by country?","6e062bf4":"**What are the average earnings in breakdown of COUNTRY, SOURCE, SEX, AGE?**","d2e8ab76":"* **Question 1**: Read the persona.csv file and show the general information about the dataset.","55e1244b":"* **Question 4**: How many sales were made from which PRICE?","41b18ca0":"# **TASK 2:**","81ecde73":"# Rule Based Classification","ce1a7e46":"# **TASK 5:**","5c7e2ece":"**Classify new customers by segment and estimate how much revenue they can generate.**\n\n* **Which segment does a 33-year-old Turkish woman using ANDROID belong to? How much income is expected on average?**\n\n* **In which segment and on average how much income would a 35-year-old French woman using iOS expect to earn?**","92e10490":"**Identify new level-based customers (personas).**\n\n* **Define new level-based customers (personas) and add them as variables to the dataset.**\n\n* **Name of the new variable to be added: customers_level_based**\n\n* **You need to create the customers_level_based variable by combining the observations from the output from the previous question.**","99e5fb14":"* **Question 3:** How many unique PRICEs are there?","57bcdc49":"* **Question 2:** How many unique SOURCE are there? What are their frequencies?","56274105":"* **Question 7**: What are the sales numbers by SOURCE types?"}}