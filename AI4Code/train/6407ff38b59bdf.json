{"cell_type":{"b136989f":"code","57d67d50":"code","53dffa83":"code","699a5506":"code","94b236e3":"code","10ed2afe":"code","b1fac187":"code","9bd49677":"code","fa26b837":"code","2937b87d":"code","a348b419":"code","b8afa61f":"code","06074155":"code","2d049887":"code","fa17c9ae":"code","13024887":"code","7f9cfe99":"code","87bf026f":"code","d1c79fc3":"code","713f79c3":"code","c76d318d":"code","611be4f8":"code","b9692b13":"code","1fdbf70f":"code","6025f868":"code","7fe411ee":"code","6fc93700":"code","1f2ae2f3":"code","6a8d3f83":"code","c80705c4":"code","8d6b5da0":"code","98fe34ca":"code","42d6c392":"code","955a35d9":"code","0b6ec7c9":"code","fb6ddedf":"code","dd2e1a8a":"code","c3f84964":"markdown","1300f806":"markdown","28943e6a":"markdown"},"source":{"b136989f":"import numpy as np\nimport pandas as pd \nimport matplotlib.pyplot as plt\n%matplotlib inline","57d67d50":"data = pd.read_csv('..\/input\/perrin-freres-monthly-champagne-sales\/Perrin Freres monthly champagne sales millions.csv')\ndata.head()","53dffa83":"data.columns=['Month','Sales']","699a5506":"data.isnull().sum()","94b236e3":"data.drop(105,axis=0,inplace=True)","10ed2afe":"data.drop(106,axis=0,inplace=True)","b1fac187":"data.isnull().sum()","9bd49677":"data['Month']=pd.to_datetime(data['Month'])","fa26b837":"data.head()","2937b87d":"data.set_index('Month',inplace=True)","a348b419":"data.head()","b8afa61f":"data.describe()","06074155":"data.plot()","2d049887":"from statsmodels.tsa.stattools import adfuller","fa17c9ae":"def adfuller_test(sales):\n    result=adfuller(sales)\n    labels=['ADF Test statistic','p-value','#Lags Used','Number of Observations Used']\n    for value,label in zip(result,labels):\n        print(label+' : '+str(value))\n        if result[1]<=0.05:\n            print(\"strong evidence against the null hypothesis(H0),reject the null hypothesis\")\n        else:\n            print('weak evidence against null hypothesis, time series has a unit root ')\n        \n    ","13024887":"adfuller_test(data['Sales'])","7f9cfe99":"data['sales first difference']=data['Sales']-data['Sales'].shift(1)","87bf026f":"data['Seasonal First Difference']=data['Sales']-data['Sales'].shift(12)","d1c79fc3":"data.head(14)","713f79c3":"adfuller_test(data['Seasonal First Difference'].dropna())","c76d318d":"data['Seasonal First Difference'].plot()","611be4f8":"from pandas.plotting import autocorrelation_plot\nautocorrelation_plot(data['Sales'])\nplt.show()","b9692b13":"from statsmodels.graphics.tsaplots import plot_acf,plot_pacf","1fdbf70f":"import statsmodels as sm","6025f868":"fig = plt.figure(figsize=(12,8))\nax1 = fig.add_subplot(211)\nfig = sm.graphics.tsaplots.plot_acf(data['Seasonal First Difference'].iloc[13:],lags=40,ax=ax1)\nax2 = fig.add_subplot(212)\nfig = sm.graphics.tsaplots.plot_pacf(data['Seasonal First Difference'].iloc[13:],lags=40,ax=ax2)","7fe411ee":"# For non-Seasonal data\n# p=1 , d=1 , q=0 or 1\nfrom statsmodels.tsa.arima_model import ARIMA","6fc93700":"model= ARIMA(data['Sales'],order=(1,1,1))\nmodel_fit=model.fit()","1f2ae2f3":"model_fit.summary()","6a8d3f83":"data['forecast']=model_fit.predict(start=90,end=103,dynamic=True)\ndata[['Sales','forecast']].plot(figsize=(12,8))","c80705c4":"import statsmodels.api as sm","8d6b5da0":"models=sm.tsa.statespace.SARIMAX(data['Sales'],order=(1,1,1),seasonal_order=(1,1,1,12))\nresults=model.fit()","98fe34ca":"data['forecast']=results.predict(start=90,end=103,dynamic=True)\ndata[['Sales','forecast']].plot(figsize=(12,8))","42d6c392":"from pandas.tseries.offsets import DateOffset\nfuture_dates=[data.index[-1]+ DateOffset(months=x)for x in range(0,24)]","955a35d9":"future_datest_df = pd.DataFrame(index=future_dates[1:],columns=data.columns)","0b6ec7c9":"future_datest_df.tail()","fb6ddedf":"future_df=pd.concat([data,future_datest_df])","dd2e1a8a":"future_df['forecast']=results.predict(start=104,end=120,dynamic=True)\nfuture_df[['Sales','forecast']].plot(figsize=(12,8))","c3f84964":"### Differencing ","1300f806":"### Auto Regressive Model","28943e6a":"### Visualization in data"}}