{"cell_type":{"0c5fb38c":"code","3637e989":"code","a6eeba32":"code","63e2ad4e":"code","b2b97fef":"code","013b8b2c":"code","d29f9ccb":"code","7f92d5a0":"code","c8bf4e56":"code","6d719511":"code","cbbe0217":"code","0dd90744":"code","35fa5827":"code","808e0832":"code","5110fd6c":"code","a69fe8e3":"code","0b9c1bc2":"code","5ef57040":"code","189d1a15":"code","ac50ae0c":"code","12ff0e5c":"code","d0211545":"code","2317330f":"code","9b38c069":"code","6960cc4b":"code","fc6bc089":"code","d3c6e693":"code","002f721d":"code","18a85777":"code","86efc483":"code","b0b97db0":"code","186b8f9d":"code","1a2d5d7c":"code","27f9975c":"code","c793fc61":"code","ccfc0d99":"code","97940576":"markdown","52f3283d":"markdown","07184225":"markdown","47003ece":"markdown","7bd28c36":"markdown","08d67278":"markdown","f27d6af8":"markdown","c480cc10":"markdown","d254f9a2":"markdown","ec768ff7":"markdown","5e860350":"markdown","fdbc4555":"markdown","ed4f4d9b":"markdown","d9891924":"markdown","6ff72de5":"markdown","a4e24964":"markdown"},"source":{"0c5fb38c":"!python -m spacy download en_core_web_md","3637e989":"import spacy\nfrom spacy.matcher import Matcher\nfrom spacy.tokens import Span\nfrom spacy import displacy\nimport en_core_web_md","a6eeba32":"nlp = en_core_web_md.load()","63e2ad4e":"df=[\n    \"Thank you for calling EFG Bank, your call is recorded, you are not required to give any SSN during the call.\",\n    \"Thank you for calling FGH Bank, your call is recorded, you are required to give any Social Security Number during the call.\",\n    \"Thank you for calling GHI Bank, your call is recorded, you are not required to give credit card number during the call.\",\n    \"Thank you for calling ABC Bank, your call is recorded, you are not required to give any SSN or full credit card number during the call.\",\n    \"Thank you for calling DEF Bank, your call is recorded, you are required to give any SSN or full credit card number during the call.\",\n    \"Thank you for calling BCD Bank, your call is recorded, you are not required to give any Social Security Number or full credit card number during the call.\",\n    \"Thank you for calling CDE Bank, your call is recorded, you are required to give any Social Security Number or full credit card number during the call.\"\n]","b2b97fef":"pattern1= [{\"LOWER\":\"bank\"},{'OP' : '+'},{\"LOWER\" : \"ssn\"}]\npattern2= [{\"LOWER\":\"bank\"},{'OP' : '+'},{\"LOWER\" : \"social\"},{\"LOWER\" : \"security\"},{\"LOWER\" : \"number\"}]\npattern3= [{\"LOWER\":\"bank\"},{'OP' : '+'},{\"LOWER\" : \"card\"},{\"LOWER\" : \"number\"}]","013b8b2c":"matched_sents = []","d29f9ccb":"def label_sentiment(matcher, doc,i ,matches):\n    match_id, start, end = matches[i]\n    string_id=doc.vocab.strings[match_id]\n    span = doc[start:end]\n    sent = span.sent\n    label = \"\"\n\n    if \"not\" in str(sent):\n        label+=\"correct \"+doc.vocab.strings[match_id]\n    else:\n        label+=\"faulty \"+doc.vocab.strings[match_id]\n        \n    match_ents=[{\n        'start' : span.start_char-sent.start_char,\n        'end' : span.end_char-sent.start_char,\n        'label' : label\n    }]\n    \n    matched_sents.append({'text':sent.text,'ents':match_ents,'id':string_id})","7f92d5a0":"matcher = Matcher(nlp.vocab)","c8bf4e56":"matcher.add(\"Short name match\",label_sentiment,pattern1)\nmatcher.add(\"Long name match\",label_sentiment,pattern2)\nmatcher.add(\"Card match\",label_sentiment,pattern3)","6d719511":"doc =  nlp(df[0])","cbbe0217":"matches= matcher(doc)","0dd90744":"displacy.render(matched_sents, style ='ent', manual =True)\n","35fa5827":"matched_sents = []","808e0832":"doc =  nlp(df[1])","5110fd6c":"matches= matcher(doc)","a69fe8e3":"displacy.render(matched_sents, style ='ent', manual =True)\n","0b9c1bc2":"matched_sents = []","5ef57040":"doc =  nlp(df[2])","189d1a15":"matches= matcher(doc)","ac50ae0c":"displacy.render(matched_sents, style ='ent', manual =True)","12ff0e5c":"matched_sents = []","d0211545":"doc =  nlp(df[3])","2317330f":"matches= matcher(doc)","9b38c069":"displacy.render(matched_sents, style ='ent', manual =True)\n","6960cc4b":"matched_sents = []","fc6bc089":"doc =  nlp(df[4])","d3c6e693":"matches= matcher(doc)","002f721d":"displacy.render(matched_sents, style ='ent', manual =True)\n","18a85777":"matched_sents = []","86efc483":"doc =  nlp(df[5])","b0b97db0":"matches= matcher(doc)","186b8f9d":"displacy.render(matched_sents, style ='ent', manual =True)\n","1a2d5d7c":"matched_sents = []","27f9975c":"doc =  nlp(df[6])","c793fc61":"matches= matcher(doc)","ccfc0d99":"displacy.render(matched_sents, style ='ent', manual =True)","97940576":"# Adding patterns to matcher","52f3283d":"<img src=\"https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn:ANd9GcRWDgteV-sNXVRkc0xwyodmJt18ImebZ1UcKA&usqp=CAU\">","07184225":"# Defining patterns","47003ece":"# Creating an instance of matcher","7bd28c36":"<b>Listerner is asked to provide SSN number<\/b>","08d67278":"<b>Listerner is not asked to provide credit card number<\/b>","f27d6af8":"# Testing matcher with various text inputs","c480cc10":"<b>Listerner is not asked to provide SSN number as well as credit card number<\/b>","d254f9a2":"<b>Listerner is asked to provide SSN number as well as credit card number<\/b>","ec768ff7":"<b>Listerner is not asked to provide SSN number<\/b>","5e860350":"# Callback funtion","fdbc4555":"<b>Listerner is asked to provide SSN number as well as credit card number<\/b>","ed4f4d9b":"# Import spaCy Libraries","d9891924":"<b>Listerner is not asked to provide SSN number as well as credit card number<\/b>","6ff72de5":"# Sample statements for testing pattern recognition","a4e24964":"<h1 style=\"text-align:center;font-weight:bold;font-size:2em\">BANK CALL SENTIMENT ANALYSIS<\/h1>"}}