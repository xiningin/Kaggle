{"cell_type":{"bef7ecf6":"code","93116728":"code","be4aa633":"code","f0a48ab7":"code","06cb61a3":"code","6e0e2f54":"code","6b820450":"code","80e58dba":"code","338f59e4":"code","d6d4c008":"code","fed1e515":"code","b5bd2c3a":"code","bfaa6852":"code","62185ade":"code","776cffff":"code","b592e19d":"code","ff5be5b4":"code","aa92b268":"code","563d4d84":"code","d6551e55":"code","3987dada":"code","c9fe9661":"code","a3be6ef6":"markdown","0906382a":"markdown","211f2071":"markdown","9b2b6836":"markdown","9d606ef6":"markdown","c931e555":"markdown","c6efd4ad":"markdown","4e9c8e96":"markdown","d43543d0":"markdown","6b5a6bf5":"markdown","aebb7071":"markdown","089e4ab4":"markdown","17ed7b0b":"markdown","76855ff0":"markdown","1e24f4ff":"markdown","46bc218b":"markdown","9eac2615":"markdown","5c585714":"markdown","a0c04ad0":"markdown","e05da8ec":"markdown","0dd50ded":"markdown","17ed0267":"markdown","a6c18d28":"markdown","47280f69":"markdown","8ebc44b6":"markdown","c4beec2d":"markdown","0731556f":"markdown","886fb97d":"markdown","8cad6318":"markdown","155a53ef":"markdown"},"source":{"bef7ecf6":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport re\nfrom matplotlib.ticker import FuncFormatter\nimport matplotlib.pyplot as plt\n\n# read MCQ responses\ndf = pd.read_csv('..\/input\/multipleChoiceResponses.csv')\n\n# keep only columns needed in this analysis\nneeded_cols = ['Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8','Q9','Q17','Q20','Q22','Q24','Q25','Q26','Q32','Q37']\ndf = df[needed_cols]\n\n#drop first row which include question details\ndf.drop(df.index[0], inplace=True)\n\n# cleanup unneeded data\ndf = df[pd.notnull(df['Q9'])]\ndf = df[~df.Q9.isin(['I do not wish to disclose my approximate yearly compensation','500,000+'])]\ndf = df[df.Q6 != 'Student']\ndf = df[df.Q7 != 'I am a student']\ndf['Q3'] = df['Q3'].str.replace('(\\(|,| or | and | of ).+$','', regex=True)\ndf['Q4'] = df['Q4'].str.replace('(\/).+$','', regex=True)\ndf['Q5'] = df['Q5'].str.replace('(\\(|,| or | and | of ).+$','', regex=True)\n\n# represent compensation with range midpoint\ndef extract_avg_pay(compensation):\n    result = re.split('-|,',compensation)\n    return 1000*(int(result[0]) + int(result[1]))\/2\n    \ndf['pay'] = df['Q9'].apply(extract_avg_pay)\n\n# plot formatting\nsns.set(style='whitegrid')\ncomma_fmt = FuncFormatter(lambda x, p: format(int(x), ','))\npay_label = 'Average Yearly Compensation (USD)'","93116728":"sns.set_palette(['#95d0fc','pink'])\npx = df[df.Q1.isin(['Female','Male'])]['Q1'].value_counts(normalize=True).plot(kind='pie', autopct='%.1f%%', figsize=(16,7))\npx.axis('equal')\npx.get_yaxis().set_visible(False)","be4aa633":"gender_palette = ['pink','#95d0fc']\nsns.set_palette(gender_palette)\npx = df[df.Q1.isin(['Female','Male'])].groupby(['Q1'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Gender', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=0)\npx.yaxis.set_major_formatter(comma_fmt)","f0a48ab7":"sns.set_palette('husl')\npx = df[df.Q3 != 'Other']['Q3'].value_counts().nlargest(15).plot(kind='bar', figsize=(16,7))\npx.set_xticklabels(px.get_xticklabels(), rotation=30)","06cb61a3":"sns.set_palette(sns.light_palette(\"green\",reverse=True, n_colors=10))\npx = df.groupby(['Q3'])['pay'].mean().sort_values(ascending=False).head(10).plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Country', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","6e0e2f54":"sns.set_palette('husl')\npx = df['Q4'].value_counts(normalize=True).plot(kind='pie', autopct='%.1f%%', figsize=(16,7))\npx.axis('equal')\npx.get_yaxis().set_visible(False)","6b820450":"sns.set_palette('pastel')\npx = df.groupby(['Q4'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Highest Education level', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","80e58dba":"sns.set_palette(gender_palette)\npx = df[df.Q1.isin(['Male','Female'])].groupby(['Q4','Q1'])['pay'].mean().unstack().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Highest Education', ylabel=pay_label)\npx.legend().set_title('Gender')\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","338f59e4":"sns.set_palette('husl')\npx = df['Q5'].value_counts(normalize=True).plot(kind='pie', autopct='%.1f%%', figsize=(16,7))\npx.axis('equal')\npx.get_yaxis().set_visible(False)","d6d4c008":"sns.set_palette('pastel')\npx = df.groupby(['Q5'])['pay'].mean().sort_values().plot(kind=\"barh\", figsize=(15,7))\npx.set(xlabel=pay_label, ylabel='Major')\npx.xaxis.set_major_formatter(comma_fmt)","fed1e515":"sns.set_palette(gender_palette)\npx = df[df.Q1.isin(['Male','Female'])].groupby(['Q5','Q1'])['pay'].mean().unstack().plot(kind=\"bar\",figsize=(16,7))\npx.legend().set_title('Gender')\npx.set(xlabel='Major', ylabel=pay_label)\npx.yaxis.set_major_formatter(comma_fmt)","b5bd2c3a":"dfz = df[~df['Q4'].isin(['Some college','I prefer not to answer'])].pivot_table(index='Q5', columns='Q4', values='pay', aggfunc=np.mean)\nfig, ax = plt.subplots(figsize=(16,7))\npx = sns.heatmap(dfz, annot=True, fmt=\".1f\", cmap=\"RdBu_r\",ax=ax)\npx.set(xlabel='Highest Education', ylabel='Major')\npx.set_xticklabels(px.get_xticklabels(), rotation=0)\n","bfaa6852":"sns.set_palette('pastel')\npx = df[df.Q6 != 'Other'].groupby(['Q6'])['pay'].mean().sort_values().plot(kind=\"barh\",figsize=(15,7))\npx.set(ylabel='Job Title', xlabel=pay_label)\npx.xaxis.set_major_formatter(comma_fmt)","62185ade":"sns.set_palette(gender_palette)\npx = df[(df.Q1.isin(['Male','Female'])) & (df.Q6 != 'Other')].groupby(['Q6','Q1'])['pay'].mean().unstack().plot(kind=\"bar\",figsize=(16,7))\npx.set(xlabel='Job Title', ylabel=pay_label)\npx.legend().set_title('Gender')\npx.yaxis.set_major_formatter(comma_fmt)","776cffff":"sns.set_palette('pastel')\npx = df.groupby(['Q26'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Are you Data scientist', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=0)\npx.yaxis.set_major_formatter(comma_fmt)","b592e19d":"px = df[df.Q7 != 'Other'].groupby(['Q7'])['pay'].mean().sort_values().plot(kind=\"barh\", figsize=(14,7))\npx.set(ylabel='Industry', xlabel=pay_label)\npx.xaxis.set_major_formatter(comma_fmt)","ff5be5b4":"px = df.groupby(['Q8'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Years of Experience', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=0)\npx.yaxis.set_major_formatter(comma_fmt)","aa92b268":"sns.set_palette('pastel')\npx = df.groupby(['Q17'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Language', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","563d4d84":"px = df[df.Q20 != 'Other'].groupby(['Q20'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Library', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","d6551e55":"px = df[df.Q22 != 'Other'].groupby(['Q22'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Visualization', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","3987dada":"px = df[df.Q32 != 'Other Data'].groupby(['Q32'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Type of Data', ylabel=pay_label)\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","c9fe9661":"px = df[df.Q37 != 'Other'].groupby(['Q37'])['pay'].mean().sort_values().plot(kind=\"bar\", figsize=(16,7))\npx.set(xlabel='Learning Platform', ylabel='Average Yearly Pay in USD')\npx.set_xticklabels(px.get_xticklabels(), rotation=30)\npx.yaxis.set_major_formatter(comma_fmt)","a3be6ef6":"## <a id=\"country\"> 2. Country<\/a>\nHow does your current location affect your pay?  \nFirst, let's see where most of the respondents come from:","0906382a":"## Conclusion\nTo summarize it all:\n* Men in general earn more than women\n* Working in US, Canada or Europe have highest compensation\n* PhDs and Master's degree guarantee higher compensation\n* Data Scientists earn more in general\n* Working in Entertainment Industry definitely get you higher compensation than Education \n* Scala, CNTK, Bokeh and D3 are used by highest paid kaggelers ","211f2071":"As we can see most of the respondents are from **US and India**.  \nNeedless to say that income differs by country. But, out of curiosity, let\u2019s see countries with highest pay:","9b2b6836":"## <a id=\"ml\">5. Machine Learning<\/a>\nWhat languages, tools, libraries are related to higher compensation.","9d606ef6":"### Years of Experience\nOf course the more experience yo have the more you get paid, but let's double check:","c931e555":"**Yes**, it seems like being a Data Scientist actually guarantee highest compensation.","c6efd4ad":"Well, I didn\u2019t see that coming.   \n**Fine Arts** are at the top with about 100k USD while Computer science average yearly compensation is only 48k USD.  \nLet's find out what are highest paying majors for men and women?","4e9c8e96":"We can see **Computer Science, Engineering and Mathematics** are the top three majors among kagglers.  \nLet's see if some majors get higher pay than others:","d43543d0":"## <a id=\"gender\"> 1. Gender<\/a>\nLet's see if gender affect kagglers' compensation.  \nBut first, let's see the gender distribution among respondents: ","6b5a6bf5":"### Programming Language\nWhich programming languages get you higher compensation?","aebb7071":"### Industry\nAs we have seen, title definitely has a huge impact on compensation. How much does the company industry affect it? ","089e4ab4":"**Scala** is at the top while **PHP** is at the bottom.  \n### ML Libraries\nHow about Machine learning libraries?","17ed7b0b":"Well, **TheSchool.AI** is at the top. ","76855ff0":"## <a id=\"job\">4. Current Job<\/a>\nHow much does your title, industry and affect your compensation. \n### Title\nFirst, which titles get highest pay?","1e24f4ff":"Well, it definitely worth it.  \n**PhDs** get the highest pay with 73k USD average yearly compensation followed by Master's degree with about 58k USD.  \nLet's see the difference in compensation between men and women with same education level:","46bc218b":"Wow, **CNTK** (Microsoft Cognitive Toolkit) is at the top with over 100k USD average yearly compensation.  \n\n### Visualization\nWhat about Vizualization libraries?","9eac2615":"Uh oh, **Entertainment** is at the very top and **Education** is at the bottom.","5c585714":"We can see that **Chief Officers, Principal Investigators and Managers** are at the top.  \nThen Data journalists, project managers, consultants and data scientists.  \nLet's see how different is the pay between men and women for same title?\n","a0c04ad0":"Although PhDs still get highest pay, men definitely earn more.","e05da8ec":"It seems that men earn a bit more than women, but later we\u2019ll see how gender affect compensation with other factors like education and job title.","0dd50ded":"In this Notebook, I'm trying to figure out what are factors affecting Kagglers compensation.  \nThese are the main factors I'm interested in:\n1. [Gender](#gender): do men earn more than women?\n2. [Country](#country): which countries have highest compensation?\n3. [Education](#education): does pursuing higher education worth it? How much does your major affect your pay?\n4. [Current Job](#job): how much does your title, industry and years of experience affect your pay?\n5. [Machine Learning](#ml): what machine learning tools get you higher pay?","17ed0267":"Cool, it seems that kagglers are well educated with over 48% hold a Master\u2019s degree and over 17% have PhD.  \nLet\u2019s see if pursuing higher education actually worth it:","a6c18d28":"No suprises, **Bokeh and D3** are the top.  \n  \n### Type of Data\nWhat are types of data are associated with higher compensation?","47280f69":"Again men earn more in general specially as **Data Journalists and Chief officers**, with few exceptions where women have higher compensation as **Marketing Analysts and Research Assistants**.  \n  \nDo Data Scientist actually get higher compensation?","8ebc44b6":"No surprises here as **US, Canada and Europe** are at the top.","c4beec2d":"## <a id=\"education\">3. Education<\/a>\nNow, let\u2019s see the education level distribution among the respondents:","0731556f":"Well, it seems like men get paid more in all majors except for **Environmental Science**.     \nHow about education level for these majors, do we actually need PhD to get higher pay no matter what our major is:","886fb97d":"### Major\nHow about undergraduate major?  \nLet's find out what are the popular majors among the respondents:","8cad6318":"**Time Series Data** are at the top while **Image Data** are at the bottom.  \n\n### Learning Platform\nFinally let's see which learning platorms associated with higher compensation:\n","155a53ef":"Well, as we can see majority of respondents are men.  \nLet's see who make more money, men or women?"}}