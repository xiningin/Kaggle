{"cell_type":{"00666056":"code","1d8954f8":"code","b4a43cb3":"code","a00316a4":"code","fa5dd93f":"code","15c125eb":"code","b7f4d654":"code","de990d32":"code","e428dab1":"code","599245f9":"code","73974ab5":"code","fae3c54b":"code","e2e8b1d5":"code","1c2c2aeb":"code","710ea171":"code","2ca25418":"code","37110e22":"code","7b48accf":"code","1db23827":"code","af3fed03":"code","24793a50":"code","6d8f2dde":"code","240082d3":"code","6af584fd":"code","5e459270":"code","f848889d":"code","42890322":"code","5bfd72d9":"code","9ee62d3e":"code","3a1b979a":"code","c518817d":"code","39440729":"code","dc206b8d":"code","5d6877d6":"code","4a8a7d91":"code","b86f3ef3":"code","63527d07":"code","3c21531d":"code","79af3ecf":"code","731d6d5d":"code","d82070f4":"code","59b46bd9":"markdown","5eada42e":"markdown","84dcea0f":"markdown","a00f3ec4":"markdown","6bcf41a3":"markdown","970e43f2":"markdown","7809736c":"markdown","64c5687e":"markdown","2b7b9c06":"markdown","8a20e1ee":"markdown","fe566099":"markdown","7312a0bb":"markdown","9c8a3085":"markdown","94616922":"markdown","de5d1ac1":"markdown","d1ab66de":"markdown","3f07b52b":"markdown","a7069857":"markdown","8be67ab4":"markdown","2adc6089":"markdown","d5372761":"markdown","11dcbaad":"markdown","679566ec":"markdown","2cbe9466":"markdown","a0c6d9db":"markdown","985f88a5":"markdown","3b024873":"markdown","1693462a":"markdown","2d19a6bc":"markdown","3282c1cc":"markdown","62753603":"markdown","de1c877d":"markdown"},"source":{"00666056":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\npd.options.display.max_rows = None\npd.options.display.max_columns = None","1d8954f8":"cp = pd.read_csv(\"..\/input\/churn-modelling\/Churn_Modelling.csv\")","b4a43cb3":"cp.head()","a00316a4":"cp.info()","fa5dd93f":"columns = cp.columns.values.tolist()\nprint(columns)","15c125eb":"cp.drop(['RowNumber', 'Surname'], axis=1, inplace=True)","b7f4d654":"cp.head()","de990d32":"def plot_bar(variable):\n    \n    var=cp[variable]\n    varValue= var.value_counts()\n    \n    #visualize\n    plt.figure(figsize=(9,3))\n    plt.bar(varValue.index,varValue)\n    plt.xticks(varValue.index,varValue.index.values)\n    plt.ylabel(\"Frequency\")\n    plt.title(variable)\n    plt.show()\n    print(\"{}: \\n {}\".format(variable,varValue))","e428dab1":"category1=[\"Gender\",\"NumOfProducts\",\"HasCrCard\",\"IsActiveMember\",\"Exited\"]\nfor c in category1:\n    plot_bar(c)","599245f9":"category2=[\"Geography\"]\nfor c in category2:\n    plot_bar(c)","73974ab5":"def plot_hist(variable):\n    plt.figure(figsize=(9,3))\n    plt.hist(cp[variable],bins=50)\n    plt.xlabel(variable)\n    plt.ylabel(\"Frequency\")\n    \n    plt.title(\"{} distribution with histogram\".format(variable))\n    plt.show()","fae3c54b":"numerical1=[\"CustomerId\"]\nfor n in numerical1:\n    plot_hist(n)","e2e8b1d5":"cp.drop(['CustomerId'], axis=1, inplace=True)","1c2c2aeb":"cp.shape","710ea171":"numerical2=[\"CreditScore\",\"Age\",\"Tenure\",\"Balance\",\"EstimatedSalary\"]\nfor n in numerical2:\n    plot_hist(n)","2ca25418":"cp.CreditScore.mean()","37110e22":"cp.Age.mean()","7b48accf":"print(cp.Balance.max())\nprint(cp.Balance.min())\nprint(cp.Balance.mean())\nprint(cp.Balance.std())","1db23827":"print(cp.EstimatedSalary.max())\nprint(cp.EstimatedSalary.min())\nprint(cp.EstimatedSalary.mean())\nprint(cp.EstimatedSalary.std())","af3fed03":"sns.pairplot(cp, hue = 'Exited')","24793a50":"f,ax=plt.subplots(figsize=(10,10))\nsns.heatmap(cp.corr(),annot=True,fmt= \".4f\",ax=ax)\nplt.show()","6d8f2dde":"cp[[\"Age\",\"Exited\"]].groupby([\"Exited\"],as_index=False).mean().sort_values(by=\"Age\",ascending=False)","240082d3":"cp[[\"IsActiveMember\",\"Exited\"]].groupby([\"IsActiveMember\"],as_index=False).mean().sort_values(by=\"IsActiveMember\",\n                                                                                              ascending=False)","6af584fd":"cp[[\"NumOfProducts\",\"Exited\"]].groupby([\"NumOfProducts\"],as_index=False).mean().sort_values(by=\"NumOfProducts\",ascending=False)","5e459270":"sns.countplot(x=\"Geography\",hue=\"Exited\",data=cp)","f848889d":"sns.countplot(x=\"Gender\",hue=\"Exited\",data=cp)","42890322":"sns.countplot(x=\"IsActiveMember\",hue=\"Exited\",data=cp)","5bfd72d9":"plt.scatter(cp.EstimatedSalary,cp.CreditScore,alpha=0.1,color=\"r\")\nplt.xlabel(\"EstimatedSalary\")\nplt.ylabel(\"CreditScore\")\nplt.show()","9ee62d3e":"plt.scatter(cp.Age,cp.EstimatedSalary,alpha=0.1,color=\"g\")\nplt.xlabel(\"Age\")\nplt.ylabel(\"EstimatedSalary\")\nplt.show()","3a1b979a":"plt.scatter(cp.Balance,cp.Age,alpha=0.1,color=\"b\")\nplt.xlabel(\"Balance\")\nplt.ylabel(\"Age\")\nplt.show()","c518817d":"plt.figure(figsize=(6,8))\nsns.boxplot(x='Exited', y='EstimatedSalary', hue = \"Exited\", data=cp)","39440729":"plt.figure(figsize=(6,6))\nsns.boxplot(x='Exited', y='Age',hue = \"Exited\", data=cp)","dc206b8d":"cp['Age'].min(), cp['Age'].max()","5d6877d6":"cp['AgeGrp'] = pd.cut(cp['Age'],\n                     bins=[18,30,50,65,99], labels=['18-30','31-50', '51-65','Above65'])","4a8a7d91":"cp['AgeGrp'].value_counts()","b86f3ef3":"sns.countplot(x='AgeGrp', data=cp)","63527d07":"pd.crosstab(cp['AgeGrp'], cp['Exited']).plot(kind='bar', stacked=True, figsize=(6,6))","3c21531d":"plt.figure(figsize=(6,7))\nsns.boxplot(x='Exited', y='Balance',hue =\"Exited\", data=cp)\nplt.title('CHURN vs BALANCE')","79af3ecf":"plt.figure(figsize=(6,6))\nsns.barplot(x='Exited', y='Balance', hue='HasCrCard', data=cp)\nplt.legend(title = 'Has credit card', loc=0)","731d6d5d":"plt.figure(figsize=(6,6))\nsns.countplot(x='NumOfProducts', hue='Exited', data=cp)\nplt.title('CHURN vs NUMBER OF PRODUCTS TAKEN')","d82070f4":"pd.crosstab(cp['IsActiveMember'], cp['Exited']).plot(kind='bar', stacked=True, figsize=(6,6))","59b46bd9":"# Age variable:\n\n**Fewer customers are over the age of 45. \n\n**There are even fewer customers in the age group of 60 to 80 \n\n**There are very few customers who are around 90 years old, where it can be outlier.\n\n**We can say that there is a skewed distribution to the right because there is a significant decrease in the number of customers older than the average age i.e. 38.92","5eada42e":"# Tenure variable\n\n**Clearly shows there are 11 categories in length of relationship","84dcea0f":"**Loading the dataset","a00f3ec4":"#### Customers with 1 or 2 products are more likely to churn","6bcf41a3":"#### Inactive customers are more likely to churn","970e43f2":"#### Customers who are maintaining low balance are also likely to churn","7809736c":"# Balance variable\n\n**The number of customers with a balance status of 0 is too high.\n\n**There was an increase between 50,000 and 100,000, and then it decreased.\n\n**The standard deviation is high, that is, the balance variable is heterogeneously distributed.\n\n**There is a gap between the customers in terms of balance maintained by the customer\n(as can be seen from the max and min values).","64c5687e":"##**Not all columns affect the customer churn\n\nColumn Description:\n\nRowNumber - corresponds to the record (row) number and has no effect on the output.\n\nCustomerId\u2014 contains random values and has no effect on customer leaving the bank. However, it is unique identifier hence we will keep this column and can drop it before EDA.\n\nSurname\u2014the surname of a customer has no impact on their decision to leave the bank.\n\nCreditScore\u2014can have an effect on customer churn, since a customer with a higher credit score is less likely to leave the bank.\n\nGeography\u2014a customer's location can affect their decision to leave the bank.\n\nGender\u2014 Using this we can analyse if gender is important factor to predict the customer leaving the bank\n\nAge\u2014 Age is relevant, since older customers are less likely to leave their bank than younger ones.\n\nTenure\u2014 Number of years that the customer has been a client of the bank. Normally, older customers are more loyal and less likely to leave a bank.\n\nBalance\u2014 Good indicator of customer churn, as people with a higher balance in their accounts are less likely to leave the bank compared to those with lower balances.\n\nNumOfProducts\u2014 Number of products that a customer has purchased through the bank.\n\nHasCrCard\u2014 Whether or not a customer has a credit card. This column is also relevant, since people with a credit card are less likely to leave the bank.\n\nIsActiveMember\u2014active customers are less likely to leave the bank.\n\nEstimatedSalary\u2014People with lower salaries are more likely to leave the bank compared to those with higher salaries.\n\nExited\u2014 Whether or not the customer left the bank","2b7b9c06":"#### Data showing rate of customer exit is higher in the age group of 31 to 50 years","8a20e1ee":"#### 14% of active members and 26% of inactive members left the bank.","fe566099":"#### Inactive customers are more likely to churn","7312a0bb":"#### In France, Spanin and Germany, the number of customers who have not left is much higher than those who have exited, but the biggest difference between exited and not existed is in France.","9c8a3085":"#### More churn is visbile in the age group of 40 to 50","94616922":"#### Above graph shows variation of balance for credit card holders\/non holders by exited and retained customers","de5d1ac1":"#### People with high salaries rarely have a low credit score.Usually there is a people density between 500 and 700 credit points","d1ab66de":"### Univariate Variable Analysis\n\n**Categorical variable :\n\nGeography\nGender\nNumOfProducts\nHasCrCard\nIsActiveMember\nExited\n\n\n**Numerical variable:\n\nCustomerId\nCreditScore\nAge\nTenure\nBalance\nEstimatedSalary\n","3f07b52b":"# EDA","a7069857":"#### The average age of those who left is 44.8 while the average age of those who did not leave is 37.4. So the age of the people who leave is generally higher.","8be67ab4":"**Total No. of columns are 14\nNo Null values exist in any of the column","2adc6089":"# EstimatedSalary variable\n\n**There is a heterogeneous distribution in estimated salaries, customers' salaries differ, \nbut there is no obvious difference in the number of customers who receive the same salary.","d5372761":"**50% of the customers are in France, around 25% in Germany, and around 24% in Spain.","11dcbaad":"#### Customers with low number of products shows higher churning ratio","679566ec":"# CreditScore variable\n\n**Few customers have less than 600 credit points.\n\n**The majority of its customers have a credit score of more than 600.\n\n**The mean of the credit score is 650.\n\n**As seen in the chart, the number of customers with a credit score less than 600 is small, after 600 the number of customers has increased, so we can say that there is a distorted distribution to the left.\n\n**The number of customers with a credit score of more than 800 increased at one point.","2cbe9466":"#### In this dataset, the number of male customers is slightly higher than the number of female customers\n\n#### The number of customers using 3 or 4 products is very low.\n\n#### The number of customers who have a credit card is almost 2.5 times the number of customers without a credit card, so the number of customers who use the bank's credit card is around 70% of all customers.\n\n#### The number of active customers is higher than inactive customers, but there is no obvious difference, their values are close to each other.\n\n#### Too many customers leaving the bank, around 80% of all customers left the bank.\n","a0c6d9db":"**Since the CustomerId variable is not meaningful numeric variables. We should not include it in analysis.","985f88a5":"#### Balance values of people between the ages of 26-42 are between 60000-170000","3b024873":"Based on the above observations of the column features, We will remove the RowNumber and Surname column as they have no impact on the output. All remaining columns do contribute to the customer churn in one way or another","1693462a":"#### Female customers are more likely to churn than male customers","2d19a6bc":"#### The density of people between the ages of 26-42 is high. Few Older people at the age of 80 also have a high salary","3282c1cc":"## Numerical Variables","62753603":"#### Difference in estimated salary of exited and not existed customer is not visible","de1c877d":"#### The above data says the Age, Balance, and Estimated Salary positively correlates with Exited which means with increase in their value probability of exited being 1 is more\n\n#### whereas  creditscore,Tenure, NumofProducts, HsCrCard, isACtive member negatively correlates with Exited which means that increase in the values of these variables reduces the chances of exiting"}}