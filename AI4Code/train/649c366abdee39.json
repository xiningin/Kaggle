{"cell_type":{"1977e3f4":"code","747b3543":"code","27a7f997":"code","666b7339":"code","54f035c1":"code","a3c6620d":"code","3affec14":"code","aac23568":"code","af529795":"code","bf36c9a7":"code","c27e6003":"code","95a6b6ab":"code","71b2ee7a":"code","b15a0b8f":"code","1ae8f83f":"code","4a838334":"code","5f306b47":"code","bcb650a5":"code","7522f93e":"code","be0bc3fa":"code","4a78b4aa":"code","b62919ef":"code","aa3f76a7":"code","c410f20c":"code","cf7b472f":"code","8e4afdd0":"code","ea7a84bd":"code","3f46b40c":"code","9b554180":"code","703f0c6f":"code","3d915556":"code","c506bacd":"markdown","5fdd8efe":"markdown","402db353":"markdown","6daf2828":"markdown","99fef7a4":"markdown","eb0d6952":"markdown","6b25ac6b":"markdown","0c2acb6d":"markdown","4adcd38e":"markdown","2fccee88":"markdown","8bfac9af":"markdown","db447c0a":"markdown","eaf33905":"markdown","bd240c18":"markdown","8f156f8f":"markdown","ddf7e65f":"markdown","c71b5635":"markdown","b349e80d":"markdown","f79ffa2c":"markdown","a889fe8f":"markdown","45c118b1":"markdown","279efe7a":"markdown","8658c9e9":"markdown","c391f30a":"markdown","47c185cc":"markdown","e22a9648":"markdown","87d06d43":"markdown","8b8b7ec0":"markdown","6e0b8ec5":"markdown","61d4d212":"markdown","ae3fede7":"markdown","5cfd5618":"markdown","2bfdf8b4":"markdown","3435eb54":"markdown","49fe5756":"markdown"},"source":{"1977e3f4":"import warnings \nwarnings.filterwarnings('ignore')","747b3543":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline","27a7f997":"vc = pd.read_csv('..\/input\/heart.csv')\nvc.head()","666b7339":"vc.info()","54f035c1":"print('Veri Setindeki Sat\u0131r Say\u0131s\u0131: ', vc.shape[0])\nprint('Veri Setindeki S\u00fctun Say\u0131s\u0131: ', vc.shape[1])","a3c6620d":"vc.shape","3affec14":"vc.isnull().sum()","aac23568":"vc.describe()","af529795":"Erkek =len(vc[vc['sex'] == 1])\nKad\u0131n = len(vc[vc['sex']== 0])\n\nplt.figure(figsize=(12,8))\n\n# Veriyi g\u00f6rselle\u015ftirelim\nlabels = 'Erkek','Kad\u0131n'\nsizes = [Erkek,Kad\u0131n]\ncolors = ['skyblue', 'yellowgreen']\nexplode = (0, 0)  \n \n# Plot\nplt.pie(sizes, explode=explode, labels=labels, colors=colors,\nautopct='%1.1f%%', shadow=True, startangle=50)\n \nplt.axis('equal')\nplt.show()","bf36c9a7":"plt.figure(figsize=(8, 6))\n\nlabels = 'G\u00f6\u011f\u00fcs A\u011fr\u0131s\u0131 T\u00fcr\u00fc:0', 'G\u00f6\u011f\u00fcs A\u011fr\u0131s\u0131 T\u00fcr\u00fc:1', 'G\u00f6\u011f\u00fcs A\u011fr\u0131s\u0131 T\u00fcr\u00fc: :2', 'G\u00f6\u011f\u00fcs A\u011fr\u0131s\u0131 T\u00fcr\u00fc:3'\nsizes = [len(vc[vc['cp'] == 0]),\n         len(vc[vc['cp'] == 1]),\n         len(vc[vc['cp'] == 2]),\n         len(vc[vc['cp'] == 3])]\ncolors = ['skyblue', 'yellowgreen', 'orange', 'gold']\nexplode = (0, 0, 0, 0)\n\n#\u00c7izdirelim\nplt.pie(sizes, explode = explode, labels = labels, colors = colors,\n       autopct = '%1.1f%%', shadow = True, startangle = 180)\nplt.axis('equal')\nplt.show()","c27e6003":"plt.figure(figsize=(12,8))\n\netiketler = 'Kan \u015eekeri  < 120 mg\/dl', 'Kan \u015fekeri > 120 mg\/dl'\nboyutlar =[len(vc[vc['fbs'] == 0]),\n          len(vc[vc['cp'] == 1])]\nrenkler =['skyblue', 'yellowgreen', 'orange', 'gold']\nexplode = (0, 1, 0)\n\n#\u015eimdi \u015eekli \u00c7izdirelim\nplt.pie(boyutlar, explode = explode, labels = etiketler, colors = renkler, autopct = '%1.1f%%', shadow = True, startangle = 180)\n\nplt.axis('equal')\nplt.show()","95a6b6ab":"plt.figure(figsize =(12,8))\n\netiketler = 'Hay\u0131r', 'Evet'\nboyutlar = [len(vc[vc['exang'] == 0]),\n           len(vc[vc['exang'] == 1])]\nrenkler = ['skyblue', 'yellowgreen']\nexplode = (0.1, 0)\n\nplt.pie(boyutlar, explode = explode, labels = etiketler, colors = renkler, autopct = '%1.1f%%', shadow = True, startangle=90)\n\nplt.axis('equal')\nplt.show()","71b2ee7a":"sns.set_style('whitegrid')","b15a0b8f":"plt.figure(figsize=(16,8))\nsns.heatmap(vc.corr(), annot = True, cmap = 'coolwarm', linewidths = .1)\nplt.show()","1ae8f83f":"sns.distplot(vc['thalach'], kde = False, bins = 30, color = 'violet')","4a838334":"sns.distplot(vc['chol'],  kde = False, bins = 30, color = 'red')\nplt.show()","5f306b47":"sns.distplot(vc['trestbps'], kde = False, bins = 30, color = 'blue')\nplt.show()","bcb650a5":"plt.figure(figsize = (16,8))\nsns.countplot(x = 'age', data = vc, hue = 'target', palette = 'GnBu')\nplt.show()","7522f93e":"plt.figure(figsize =(12,8))\nsns.scatterplot(x = 'chol', y = 'thalach', data = vc, hue = 'target')\nplt.show()","be0bc3fa":"plt.figure(figsize=(12, 8))\nsns.scatterplot(x = 'trestbps', y = 'thalach', data = vc, hue = 'target')\nplt.show()","4a78b4aa":"X = vc.drop('target', axis = 1)\ny = vc['target']","b62919ef":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = .3, random_state = 42)","aa3f76a7":"from sklearn.preprocessing import MinMaxScaler","c410f20c":"scaler = MinMaxScaler(feature_range =(0,1))\n\nX_train_scaled = scaler.fit_transform(X_train)\nX_train = pd.DataFrame(X_train_scaled)\n\nX_test_scaled = scaler.fit_transform(X_test)\nX_test = pd.DataFrame(X_test_scaled)","cf7b472f":"from sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.model_selection import GridSearchCV\nknn = KNeighborsClassifier()\nparams = {'n_neighbors':[i for i in range(1, 33, 2)]}","8e4afdd0":"model = GridSearchCV(knn, params, cv = 10)","ea7a84bd":"model.fit(X_train, y_train)\nmodel.best_params_","3f46b40c":"predict = model.predict(X_test)\npredict","9b554180":"from sklearn.metrics import accuracy_score, confusion_matrix\nprint('Do\u011fruluk oran\u0131:', accuracy_score(y_test, predict))\nprint('k-NN algoritmas\u0131n\u0131 kullanarak yap\u0131lan modelin tahmin oran\u0131 :', \n     round(accuracy_score(y_test, predict), 5)*100, '%')","703f0c6f":"cnf_matrix = confusion_matrix(y_test, predict)\ncnf_matrix","3d915556":"class_names = [0,1]\nfig, ax = plt.subplots()\ntick_marks = np.arange(len(class_names))\nplt.xticks(tick_marks, class_names)\nplt.yticks(tick_marks, class_names)\n\n# Yeni bir s\u0131cakl\u0131k haritas\u0131 olu\u015ftural\u0131m\nsns.heatmap(pd.DataFrame(cnf_matrix), annot = True, cmap = 'YlGnBu',\n           fmt ='g')\nax.xaxis.set_label_position('top')\nplt.tight_layout()\nplt.title('Kar\u015f\u0131la\u015ft\u0131rma matrisi', y = 1.1)\nplt.ylabel('Ger\u00e7ek de\u011ferler')\nplt.xlabel('Tahmin edilen de\u011ferler')\nplt.show()","c506bacd":"### **Elimizdeki Verisetinin matris boyutu**","5fdd8efe":"###  **\u015eimdi \u0130htiyac\u0131m\u0131z olan Python K\u00fct\u00fcphanelerini \u00e7al\u0131\u015fma alan\u0131m\u0131za dahil edelim.**","402db353":"#### **1.S\u0131cakl\u0131k Haritas\u0131 **(Heatmap)","6daf2828":"** Yukar\u0131daki veri setinde bulunan de\u011ferleri k\u0131saca a\u00e7\u0131klayacak olursak; <br>\n**1.Count:** Veri setimizde bulunan sat\u0131r sat\u0131s\u0131n\u0131 bize verir.(Bu sat\u0131rlar tamamen dolu olan say\u0131d\u0131r. <br>\n**2.Mean:** \u0130lgili s\u00fctunda bulunan de\u011ferlerin ortalamas\u0131n\u0131 verir. <br>\n**3.Std:** \u00d6zelliklerin  Standart Da\u011f\u0131l\u0131m bilgisini verir. <br>\n**4.Min:** Veri Setinde ilgili s\u00fctundaki \u00f6zellik(feature) de\u011ferlerin en k\u00fc\u00e7\u00fc\u011f\u00fcn\u00fcn bilgisini verir. <br>\n**5.%25, %50 ve %75 oranlar\u0131n\u0131 verir. <br>\n**Max:** \u00d6zelli\u011fin en b\u00fcy\u00fck de\u011ferini verir. ","99fef7a4":"#### ** Dinlenme halindeki kan bas\u0131nc\u0131 ** (3. trestbps: resting blood pressure (in mm Hg on admission to the hospital)","eb0d6952":"#### **4.exang: exercise induced angina (1 = yes; 0 = no)**","6b25ac6b":"**\u00d6zellikleri \u00f6n i\u015fleme tabi tutarak \u00f6l\u00e7eklediriyoruz.**","0c2acb6d":"### ***Kullanaca\u011f\u0131m\u0131z veri setini y\u00fckleyelim.(Veri Seti Kaggle'da mevcut oldu\u011fu i\u00e7in basit import kodu ile veri setini y\u00fckl\u00fcyoruz.) ***","4adcd38e":"**Confusion Matrix**","2fccee88":"Not: Yukar\u0131daki grafikten anla\u015f\u0131laca\u011f\u0131 \u00fczere kalp krizi riski 55 Ya\u015f\u0131na kadar Erkeklerde(1), 55 Ya\u015f\u0131ndan sonra ise Kad\u0131n(0)'larda daha \u00e7ok g\u00f6r\u00fclmektedir.","8bfac9af":"#### **5.Scatterplot for thalach vs. chol **","db447c0a":"### **Veri Setinin \u00f6zellikleri**","eaf33905":"**Veri setimizi ikiye (E\u011fitim ve Test) setlerine ay\u0131r\u0131yoruz.","bd240c18":"Veri Setinde bulunan s\u00fctunlar ve a\u00e7\u0131klamalar\u0131; <br>\n\n**1.age(Ya\u015flar)** <br>\n**2.sex(cinsiyet)(1 = Erkek, 0 = Kad\u0131n) <br>\n**3.cp**:chest pain type(g\u00f6\u011f\u00fcs a\u011fr\u0131s\u0131 t\u00fcr\u00fc)** <br>\n**4.trstbps:** resting blood pressure(in mm Hg on admission to the hospital- kan bas\u0131nc\u0131) <br>\n**5.chol:** serum cholestoral in mg\/dl(Serum kollestrol\u00fc) <br>\n**6.fbs:** (fasting blood sugar > 120 mg\/dl)(1 = true; 0 = false) <br>\n**7.restecg:** resting electrocardiographic results(Elektrokardiografik sonu\u00e7lar\u0131n dinlenmesi) <br>\n**8.thalach:** maximum hear rate achieved(maksimum kalp at\u0131\u015f h\u0131z\u0131) <br>\n**9.exang:** exercise induced angina(1 = yes; 0 = no) <br>\n**10.oldpeak:** ST depression induced by exercise relative to test  (Teste g\u00f6re ind\u00fcklenen depresyon)<br>\n**11.slope:** the slope of the peak exercise ST segment (Tepe egzersizi ST segmentinin e\u011fimi) <br>\n**12.ca:** number of major vessels(0-3) colored by flourosopy(floroskopi ile renklendirilmi\u015f ana damarlar\u0131n (0-3) say\u0131s\u0131) <br>\n**13.thal:** 3 = normal; 6 = fixed defect; 7 = reversable defect \n**14.target:** 1 or 0 \n\n\n","8f156f8f":"### **Farkl\u0131 niteliklerin \u00f6zelliklerini kontrol edelim**\n","ddf7e65f":"### **Veri Setimizde eksik(Null) de\u011ferler varm\u0131  onu kontrol ediyoruz. \u00c7\u00fcnk\u00fc null de\u011ferler sonu\u00e7lar\u0131m\u0131z\u0131 etkileyebilir.**","c71b5635":"### TAHM\u0130NLER YAPALIM","b349e80d":"### **2. G\u00f6\u011f\u00fcs A\u011fr\u0131s\u0131 t\u00fcr\u00fc**","f79ffa2c":"#### 4.Ya\u015flara g\u00f6re Kalp hastal\u0131\u011f\u0131 oranlar\u0131","a889fe8f":"#### **3. fbs: (fasting blood sugar > 120 mg\/dl) (1 = true; 0 = false)**","45c118b1":"Ya da a\u015fa\u011f\u0131daki gibi sat\u0131r ve s\u00fctun say\u0131s\u0131n\u0131 kontrol edebiliriz.","279efe7a":"**Tahmin yapal\u0131m bakal\u0131m ***","8658c9e9":"\u015eimdi Tahminler Yapal\u0131m","c391f30a":"### Ke\u015fifsel Veri Analizi (Exploratory Data Analysis)","47c185cc":"**Modelimizin Do\u011frulu\u011funu kontrol edelim**","e22a9648":"#### **6.Scatterplot for thalach vs. trestbps **","87d06d43":"**Suggestions are welcome**","8b8b7ec0":"En iyi parametreleri se\u00e7mek i\u00e7in GridSearchCv ve k-NN Algoritmas\u0131n\u0131 uyguluyoruz**Implementing GridSearchCv to select best parameters and applying k-NN Algorithm**","6e0b8ec5":"#### **2.chol: serum cholestoral in mg\/dl **","61d4d212":"Veri ke\u015ffine \u00e7\u0131kal\u0131m.","ae3fede7":"Bu \u00e7al\u0131\u015fmada Ke\u015fifsel Veri Analizi y\u00f6ntemi ile Kalp Hastal\u0131klar\u0131n\u0131 ve Kalp Hastal\u0131klar\u0131 ile di\u011fer hastal\u0131klar aras\u0131ndaki ili\u015fkileri anlamaya \u00e7al\u0131\u015faca\u011f\u0131z. Ke\u015fifsel Veri Analizi i\u015fleminden sonra(yani verileri ke\u015ffettikten sonra) methodlar\u0131m\u0131z\u0131n sonu\u00e7lar\u0131n\u0131 tahmin etmek i\u00e7in k-NN(k- En Yak\u0131n Kom\u015fular) algoritmas\u0131n\u0131 uygulayaca\u011f\u0131z. Daha sonra di\u011fer algoritmalar\u0131da uygulayarak tahminler yapmaya \u00e7al\u0131\u015faca\u011f\u0131z.","5cfd5618":"Yukar\u0131daki sonu\u00e7lardan g\u00f6r\u00fclece\u011fi \u00fczere veri setimizde bo\u015f de\u011fer(Null) bulunmamaktad\u0131r bu g\u00fczel bir durum.","2bfdf8b4":"####**1.Cinsiyet(Sex)**","3435eb54":"#### De\u011fi\u015fkenlerin da\u011f\u0131l\u0131m\u0131n\u0131 g\u00f6sterir \u00e7ubuk grafi\u011fi \u00e7izdirelim.","49fe5756":"#### **1.Eri\u015filen Maksimum kalp h\u0131z\u0131 oranlar\u0131 ** (thalach: maximum heart rate achieved)"}}