{"cell_type":{"db5267a3":"code","f836b8aa":"code","8029cf82":"code","d0881371":"code","e777da98":"code","53ca3513":"code","569e3d45":"code","3ca3e8d8":"code","39714caa":"code","163da88e":"code","36faf7bb":"code","996fdd7e":"code","5111f3d6":"code","e61fd15c":"code","1def9c38":"code","ee9f7fd1":"code","285e45f4":"code","11617b4d":"code","fa772ebd":"code","f96b916a":"code","baa954d1":"code","8cd0f656":"code","3d6c12ca":"code","b34094df":"code","f65b521a":"code","80977a79":"code","7bced582":"code","70c92da6":"code","a87a6d56":"code","f81076c8":"code","ed65869c":"code","63ccfc8f":"code","7f5ca298":"code","9b244694":"code","0d9b617c":"code","33d2106f":"code","ab7a6cef":"code","a6758b4c":"code","8f102725":"code","fb21b83b":"code","1087b374":"code","0cd380d1":"code","a5cb6940":"code","6012b29b":"markdown","4c365d36":"markdown","39e72844":"markdown","d86a4bca":"markdown","dc307698":"markdown","8c7dd6e3":"markdown","eeb7bc04":"markdown","538fe1f8":"markdown","e91e2881":"markdown","8a3db71e":"markdown","48a06f04":"markdown","77778215":"markdown","0885f1f9":"markdown","b74e74f2":"markdown","55f3a317":"markdown"},"source":{"db5267a3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# plotly\nimport plotly\nimport plotly.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\n\n# word cloud library\nfrom wordcloud import WordCloud\n\n# seaborn\nimport seaborn as sns\n\n# matplotlib\nimport matplotlib\nimport matplotlib.pyplot as plt\n\n%matplotlib inline\n\nsns.set()\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\/\"))\n\n# Any results you write to the current directory are saved as output.","f836b8aa":"pd.__version__","8029cf82":"np.__version__","d0881371":"sns.__version__","e777da98":"plotly.__version__","53ca3513":"matplotlib.__version__","569e3d45":"df = pd.read_csv('..\/input\/store-locations\/directory.csv')\ndf.head()","3ca3e8d8":"def update_column(column):\n    return column.replace(' ', '_').lower()","39714caa":"starbucks = df.copy()","163da88e":"starbucks.columns = starbucks.columns.map(update_column)","36faf7bb":"starbucks.head()","996fdd7e":"starbucks.info()","5111f3d6":"starbucks.dropna(axis=0, subset=['longitude', 'latitude'], inplace=True)","e61fd15c":"starbucks.dropna(axis=1, inplace=True)","1def9c38":"starbucks.info()","ee9f7fd1":"starbucks.ownership_type.unique()","285e45f4":"starbucks.country.unique()","11617b4d":"country_indices, country_labels = starbucks.country.factorize()\ncountry_labels","fa772ebd":"country_indices","f96b916a":"starbucks[\"country_indice\"] = country_indices","baa954d1":"countries = pd.read_csv('..\/input\/all-countries-with-their-2-digit-codes\/countries.csv', names=['country_name', 'code'])\ncountries.head()","8cd0f656":"starbucks = starbucks.merge(countries, left_on='country', right_on='code')\nstarbucks.drop('code', axis=1, inplace=True)\nstarbucks.head()","3d6c12ca":"starbucks.plot(kind=\"scatter\", x=\"longitude\", y=\"latitude\", \n               alpha=0.4, \n               figsize=(20,10), \n               c=starbucks.country_indice,\n               s=starbucks[\"country_indice\"] * 10 \/ len(country_labels), label=\"country\",\n               cmap=plt.get_cmap(\"jet\"), \n               colorbar=False\n)\nplt.legend();","b34094df":"plt.figure(figsize=(20,10))\n\nsns.scatterplot(x=\"longitude\", y=\"latitude\", data=starbucks, \n                hue=\"country\", \n                legend=False, \n                palette=sns.color_palette('coolwarm', n_colors=len(country_labels)));","f65b521a":"co_lat_long = pd.Series(starbucks.country_name + \" <br> \"+starbucks.latitude.astype(str) + ' : ' + starbucks.longitude.astype(str))","80977a79":"trace = go.Scattergeo(\n    lat=starbucks.latitude, \n    lon=starbucks.longitude, \n    mode='markers',\n    hoverinfo = 'text', \n    text=co_lat_long,\n    marker = dict( \n        size=2, \n        color= starbucks.country_indice,\n        colorscale='jet',\n        autocolorscale = False,\n    )\n)\n\ndata = [trace]\n\nlayout = dict(\n    title = 'Starbucks Locations Worldwide<br>(Hover for locations)',\n    showlegend = False, \n    geo = dict(\n        showframe=False,\n        showland = True,\n        showlakes = False,\n        showcountries = True,\n        showcoastlines=False, \n        showocean = False,\n        landcolor = 'rgb(243, 243, 243)',\n        countrycolor = 'rgb(204, 204, 204)',\n        projection = dict(\n            type = 'natural earth'\n        )\n    )\n)\n\nfig = dict(data = data, layout = layout)\niplot(fig)","7bced582":"first_ten_countries = starbucks.country_name.value_counts()[:10]\nfirst_ten_countries","70c92da6":"country_names =  first_ten_countries.index\ncountry_values = first_ten_countries.values","a87a6d56":"plt.figure(figsize=(15,10))\n\nsns.barplot(x=country_names, y=country_values, palette=sns.color_palette('BuGn', n_colors=10))\nplt.xticks(rotation= 45)\nplt.xlabel('Countries')\nplt.ylabel('Size');","f81076c8":"plt.figure(figsize=(20,10))\n\nwordcloud = WordCloud(background_color='white',\n                    width=712,\n                    height=384)\\\n            .generate(\" \".join(starbucks.country_name.value_counts().index))\n\nplt.imshow(wordcloud)\nplt.axis('off');","ed65869c":"starbucks.head()","63ccfc8f":"sns.countplot(starbucks.ownership_type, palette=sns.color_palette('Purples'))\nplt.ylabel('Number of Ownership')\nplt.xlabel('Owenership Type')\nplt.title('Ownership Types over Startbucks', color = 'blue', fontsize=15);","7f5ca298":"list_ten_countries = country_names.tolist()","9b244694":"ten_countries = starbucks.query('country_name in @list_ten_countries')","0d9b617c":"group_country_ownership = ten_countries.groupby(['country_name', 'ownership_type'])['brand'].count().reset_index()\npivot_country_ownership = pd.pivot_table(group_country_ownership, values='brand', index='country_name', columns='ownership_type', fill_value=0)\npivot_country_ownership","33d2106f":"sns.set_palette(sns.color_palette('coolwarm'))\npivot_country_ownership.plot(kind='bar',figsize=(20,10))\nplt.xlabel('Countries')\nplt.ylabel('Ownership Size')\nplt.title('Starbucks Ownership Size Over Ten Countries', fontsize=15);","ab7a6cef":"max_ownership_type = pivot_country_ownership.sum(axis=0)\npivot_country_ownership[\"Company Owned Ratio\"] = pivot_country_ownership[\"Company Owned\"] \/ max_ownership_type[\"Company Owned\"]\npivot_country_ownership[\"Franchise Ratio\"] = pivot_country_ownership[\"Franchise\"] \/ max_ownership_type[\"Franchise\"]\npivot_country_ownership[\"Joint Venture Ratio\"] = pivot_country_ownership[\"Joint Venture\"] \/ max_ownership_type[\"Joint Venture\"]\npivot_country_ownership[\"Licensed Ratio\"] = pivot_country_ownership[\"Licensed\"] \/ max_ownership_type[\"Licensed\"]","a6758b4c":"fig, ax = plt.subplots(figsize=(20,10))\n\nsns.barplot(x=pivot_country_ownership[\"Company Owned Ratio\"], y=pivot_country_ownership.index, color='green',alpha = 0.8,label='Company Owned')\nsns.barplot(x=pivot_country_ownership[\"Franchise Ratio\"], y=pivot_country_ownership.index, color='blue',alpha = 0.5,label='Franchise')\nsns.barplot(x=pivot_country_ownership[\"Joint Venture Ratio\"], y=pivot_country_ownership.index, color='red',alpha = 0.5,label='Jount Venture')\nsns.barplot(x=pivot_country_ownership[\"Licensed Ratio\"], y=pivot_country_ownership.index, color='yellow',alpha = 0.5,label='Licensed')\n\nax.legend(loc='center right',frameon = True)\nax.set(xlabel='Ownership Size Ratio', ylabel='Countries',title = \"Ratio For Each Starbucks Ownership Over Type Ten Countries\");","8f102725":"starbucks.brand.unique()","fb21b83b":"brands = ['Teavana', 'Evolution Fresh', 'Coffee House Holdings']","1087b374":"result = starbucks.query('brand in @brands')\nresult.shape","0cd380d1":"result.ownership_type.unique()","a5cb6940":"result.country_name.unique()","6012b29b":"`longitude` ve `latitude` de\u011ferleri olmayan Starbucks'lar\u0131 dikkate almayal\u0131m. Bu veri k\u00fcmemizde sadece bir yerin 2 de\u011ferinin olmad\u0131\u011f\u0131n\u0131 yukar\u0131da g\u00f6r\u00fcyoruz.","4c365d36":"Bar grafi\u011fi \u00fczerinden sahiplik kategorilerinin ba\u015fl\u0131ca 10 \u00fclke \u00fczerindeki d\u00f6k\u00fcm\u00fcne bakal\u0131m:","39e72844":"Sahiplik kategorisinde ortalamaya g\u00f6re ilk 10 \u00fclkenin de\u011ferleri:","d86a4bca":"_Franchise_ kategorisinde Starbucks, sadece \u0130ngiltere'de d\u00fc\u015f\u00fcn\u00fclm\u00fc\u015f durumda.\n\nSon olarak, veri k\u00fcmemiz i\u00e7erisindeki _Brand_ kolonunu inceleyelim:[](http:\/\/)","dc307698":"S\u0131rada _ployly_ \u00fczerinden ayn\u0131 arac\u0131 interaktif olarak g\u00f6rselle\u015ftirmeye \u00e7al\u0131\u015fal\u0131m:","8c7dd6e3":"\u0130ncelememize \u00fclkelerdeki Starbucks da\u011f\u0131l\u0131mlar\u0131n\u0131 g\u00f6rselle\u015ftirmekle ba\u015flayal\u0131m. \u00d6ncelikle `matplotlib` kullanarak bunu ger\u00e7ekle\u015ftirelim.","eeb7bc04":"![](http:\/\/)Sahiplik tipi (`ownership_type`) \u00fczerinden Starbucks da\u011f\u0131l\u0131mlar\u0131n\u0131 inceleyelim.\n\n\u0130lk olarak sahiplik tiplerine g\u00f6re en \u00e7ok hangi tip(ler) a\u011f\u0131rl\u0131k g\u00f6stermekte bakal\u0131m:[](http:\/\/)","538fe1f8":"\u00d6ncelikle daha anla\u015f\u0131l\u0131r olmas\u0131 a\u00e7\u0131c\u0131s\u0131ndan \u00fclke k\u0131saltmalar\u0131n\u0131n tam isimlerini de veri k\u00fcmemize ekleyelim.","e91e2881":"\u0130lk 10 \u00fclkeye ait sahiplik tip verilerine bakal\u0131m:","8a3db71e":"T\u00fcrkiye 9. s\u0131rada ve Amerika Birle\u015fik Devletleri ilk s\u0131rada beliriyor.","48a06f04":"G\u00f6rseller \u00fczerinden konu\u015fmak gerekirse, Amerika Birle\u015fik Devletleri'nde Starbucks pop\u00fclasyonunun fazla oldu\u011fu g\u00f6rmekteyiz. Bu d\u00fc\u015f\u00fcnceyi somutla\u015ft\u0131rmak ad\u0131na gerekli ad\u0131mlar atal\u0131m. ","77778215":"3 \u015firketin sonras\u0131nda Starbucks taraf\u0131ndan al\u0131nd\u0131\u011f\u0131n\u0131 kesinlikle g\u00f6rm\u00fc\u015f oluyoruz. Toplamda 3 \u00fclkede 351 tane \u015fubesi mevcutmu\u015f bu markalar\u0131n.","0885f1f9":"Bariz bir \u015fekilde Amerika Birle\u015fik Devletleri ilk s\u0131rada ve onu takip edenler ile aras\u0131nda b\u00fcy\u00fck bir oran fark\u0131 bulunmaktad\u0131r.\n\nAyr\u0131ca hangi devletlerin bulundu\u011funu _WordCloud_ olu\u015fturarak da g\u00f6rselle\u015ftirebiliriz.","b74e74f2":"Starbucks d\u0131\u015f\u0131nda toplam 3 farkl\u0131 marka g\u00f6z\u00fcm\u00fcze \u00e7arp\u0131yor. Bu markalar\u0131 biraz internette inceledi\u011fimizde, hepsi Starbucks \u015firketi taraf\u0131ndan al\u0131nd\u0131\u011f\u0131n\u0131 \u00f6\u011freniyoruz. Bu \u015firketler sonras\u0131nda Starbucks'\u0131n b\u00fcnyesine dahil olmu\u015flar.\n\nSon 3 markan\u0131n listesini \u00e7\u0131kartal\u0131m ve sahiplik tiplerine bakal\u0131m:","55f3a317":"Bir de ayn\u0131 haritay\u0131 _seaborn_ ile olu\u015fturmay\u0131 deneyelim."}}