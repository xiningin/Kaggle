{"cell_type":{"16074247":"code","46bb8dbb":"code","2b8d3eab":"code","aafb92f9":"code","c1e94136":"code","936cc523":"code","cdd463a3":"code","3e962cb8":"code","eb946e61":"code","a8b99142":"code","939efb70":"code","4e120dbf":"code","ae947f19":"code","48fdf9c8":"code","28eb4edb":"code","b464d46a":"code","6ad68258":"code","2a3f6dda":"code","21a5447e":"code","92bb8b10":"code","0136559d":"code","71deb1c6":"code","f7c6ed92":"code","a56ab862":"code","e3576d56":"code","1e9ca0a2":"code","234d81ec":"code","2450731f":"code","00c5340f":"code","eca65256":"code","d30839e6":"code","e4df9e8d":"code","4ac5530a":"code","bdf4f8c2":"code","82c5789b":"code","5bdeaf06":"code","fc89a8b4":"code","22129c8a":"code","e8545778":"code","acb14270":"code","cf4f9ca3":"code","15afcdd0":"code","cf14e52a":"code","2ab51328":"code","731307ae":"code","e0856f03":"code","f525553c":"code","2c685ff9":"code","70c76180":"code","fbca5d15":"code","a1503867":"code","9f84f061":"code","28a8d17f":"code","adc303b6":"code","7750bf64":"code","e7c72901":"code","9e99324e":"markdown","2f14a3f1":"markdown","8da4c48a":"markdown","cd020e3f":"markdown","b4b8b8e7":"markdown","f2b2632f":"markdown","c07e34e2":"markdown","e4428ed3":"markdown","50cf8304":"markdown","72f8d22f":"markdown","0cdb3902":"markdown","525f4677":"markdown","29c47fa9":"markdown","5374bbe8":"markdown","c2fe0cb9":"markdown","f9494bb9":"markdown","2075bb2c":"markdown","88bd3a5b":"markdown","730b350d":"markdown","599871e3":"markdown","66b7c824":"markdown","ce5668aa":"markdown","2417e7a3":"markdown","28f0cb0c":"markdown"},"source":{"16074247":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nimport folium # for plotting latitudes and longitudes in map\nfrom folium import plugins\nfrom folium.plugins import HeatMap","46bb8dbb":"df = pd.read_csv(\"..\/input\/us-accidents\/US_Accidents_Dec20_updated.csv\")","2b8d3eab":"#To display first five rows of the data set\ndf.head()","aafb92f9":"# to extract all the column titles\ndf.columns","c1e94136":"#extracting information about the dataset, check for any missing values and inconsistencies\ndf.info()","936cc523":"# tp extract count, mean, standard deviation, minimim, maximum etc of the dataset\ndf.describe()","cdd463a3":"#to seperate columns with only numirical values\nnumerics = [\"int16\", \"int32\", \"int64\", \"float16\", \"float32\", \"float64\"]\nnumerical_df = df.select_dtypes(include = numerics)\nlen(numerical_df.columns)","3e962cb8":"# to detect missing values, sum and sort them in descending order and displaying in terms of percentage\nmissing_percentages = df.isna().sum().sort_values(ascending=False) \/ len(df)\nmissing_percentages","eb946e61":"type(missing_percentages)","a8b99142":"#printing the columns with highest missing \/ null values\nmissing_percentages[missing_percentages != 0].plot(kind = 'barh')","939efb70":"#dsiplay column titles\ndf.columns","4e120dbf":"df.City","ae947f19":"#total number of unique cities in dataset\ncities = df.City.unique()\nlen(cities)","48fdf9c8":"#Counting the number of accidents in each city\ncities_by_accident = df.City.value_counts()\ncities_by_accident","28eb4edb":"#printing the top 20 cities with most accidents\ncities_by_accident[:20]","b464d46a":"#checking if New York city is present in dataset\n'New York' in df.City","6ad68258":"cities_by_accident[:20].plot(kind = 'barh')","2a3f6dda":"#plotting histogram of count of accidents in cities\nsns.set_style(\"darkgrid\")\nsns.histplot(cities_by_accident, log_scale = True)\n#enabling log_scale = True, this distributes x axis in log scale i.e. 1, 10, 100, 1000, 10000 and so on.","21a5447e":"#cities with only one accident\ncities_by_accident[cities_by_accident == 1]","92bb8b10":"#dividing cities with less than 1000 accidents and more than 1000 accidents\nlow_accident_cities = cities_by_accident[cities_by_accident < 1000]\nhigh_accident_cities = cities_by_accident[cities_by_accident >= 1000]","0136559d":"#percentage of cities with high accidents\nlen(high_accident_cities) \/ len(cities_by_accident) * 100","71deb1c6":"sns.distplot(high_accident_cities)","f7c6ed92":"#percentage of cities with low accidents\nlen(low_accident_cities) \/ len(cities_by_accident) * 100","a56ab862":"sns.distplot(low_accident_cities)","e3576d56":"#displaying exact date and time of the accidents\ndf.Start_Time","1e9ca0a2":"df.Start_Time[0] #YYYY-MM-DD HH:MM:SS","234d81ec":"#rewriting the dataframe with pandas datetime where output is timestamp\ndf.Start_Time = pd.to_datetime(df.Start_Time) \ndf.Start_Time","2450731f":"df.Start_Time[0]","00c5340f":"#plotting the percentage of accidents occuring a what time of the day\nsns.distplot(df.Start_Time.dt.hour, bins = 24, kde=False, norm_hist=True)","eca65256":"#plotting the percentage of accidents occuring on which day (eg Monday, Tuesday...etc.)\nsns.distplot(df.Start_Time.dt.day_of_week, bins = 7, kde=False, norm_hist=True) \n#in dayofweek - 0 = Monday, 1 = Tuesday,...,5=Saturday, 6=Sunday","d30839e6":"#assigning the accidents happened on which weekday to seperate variables\nmondays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 0]\ntuesdays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 1]\nwednesdays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 2]\nthursdays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 3]\nfridays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 4]","e4df9e8d":"#plotting number of accidents occuring on Sunday \nsundays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 6]\nsns.distplot(sundays_start_time.dt.hour, bins = 24, norm_hist=True)","4ac5530a":"#plotting number of accidents occuring on Saturday\nsaturdays_start_time = df.Start_Time[df.Start_Time.dt.day_of_week == 5]\nsns.distplot(saturdays_start_time.dt.hour, bins = 24, norm_hist=True)","bdf4f8c2":"#plotting number of accidents occuring on Monday\nsns.distplot(mondays_start_time.dt.hour, bins = 24, kde=False, norm_hist=True)","82c5789b":"#plotting number of accidents occuring on Tuesday\nsns.distplot(tuesdays_start_time.dt.hour, bins = 24, kde=False, norm_hist=True)","5bdeaf06":"#plotting number of accidents occuring on Wednesday\nsns.distplot(wednesdays_start_time.dt.hour, bins = 24, kde=False, norm_hist=True)","fc89a8b4":"#plotting number of accidents occuring on Thursday\nsns.distplot(thursdays_start_time.dt.hour, bins = 24, kde=False, norm_hist=True)","22129c8a":"#plotting number of accidents occuring on Friday\nsns.distplot(fridays_start_time.dt.hour, bins = 24, kde=False, norm_hist=True)","e8545778":"#plotting number of accidents occuring in each month\nsns.distplot(df.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","acb14270":"#assigning the number of accidents occuring in each year to seperate variable\n\ndf_2016 = df[df.Start_Time.dt.year == 2016]\ndf_2017 = df[df.Start_Time.dt.year == 2017]\ndf_2018 = df[df.Start_Time.dt.year == 2018]\ndf_2019 = df[df.Start_Time.dt.year == 2019]\ndf_2020 = df[df.Start_Time.dt.year == 2020]","cf4f9ca3":"#plotting number of accidents occuring in 2016\nsns.distplot(df_2016.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","15afcdd0":"#plotting number of accidents occuring in 2017\nsns.distplot(df_2017.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","cf14e52a":"#plotting number of accidents occuring in 2018\nsns.distplot(df_2018.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","2ab51328":"#plotting number of accidents occuring in 2019\nsns.distplot(df_2019.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","731307ae":"#plotting number of accidents occuring in 2020\nsns.distplot(df_2020.Start_Time.dt.month, bins = 12, kde=False, norm_hist=True)","e0856f03":"#Latitudes\ndf.Start_Lat","f525553c":"#Longitudes\ndf.Start_Lng","2c685ff9":"#Plotting scatterplot of sample from dataset (1%) on US map\nsample_df =df.sample(int(0.01 * len(df)))\nsns.scatterplot(x=sample_df.Start_Lng, y=df.Start_Lat)","70c76180":"#plotting the marker points on US map with sample size of 0.1% of wholw dataset\nsample_df_2 =df.sample(int(0.001 * len(df))) #creating a sample of 0.01%\n\n#creating a variable containing the list of latitudes and longitudes\nlocations = sample_df_2[['Start_Lat', 'Start_Lng']]\nlocationlist = locations.values.tolist()\nlen(locationlist)\nlocationlist[0]\n\n#plotting the markers on the US map using folium library\nmap = folium.Map(zoom_start=12)\nfor point in range(0, len(locationlist)):\n    folium.Marker(locationlist[point]).add_to(map)\nmap","fbca5d15":"#plotting heat map for sample size of 0.01% of dataset\nheat_map = folium.Map()\nHeatMap(zip(list(sample_df_2.Start_Lat),list(sample_df_2.Start_Lng))).add_to(heat_map)\nheat_map","a1503867":"df_weather_condition_sample = df.sample(int(0.001 * len(df)))\ndf_weather_condition_sample[\"Weather_Condition\"].value_counts()\ndf_weather_condition_sample[\"Weather_Condition\"].value_counts()[:15].plot(kind='bar',xlabel = \"Weather Conditions\", ylabel = 'Count', title = 'Accidents by weather conditions', color = 'magenta')","9f84f061":"sample_cities_population = (3970000+4540000+8570000+2310000+2310000+1330000)\nprint(high_accident_cities[:5])\n\nprint(\"\\n\\nhighest number of accidents per capita: \")\ni=0\nwhile i<5:\n    cities = ['Los Angeles', 'Miami', 'Charlotte', 'Houston', 'Dallas']\n    per_capita = high_accident_cities[i]\/sample_cities_population\n    print(f\"{cities[i]} - {per_capita}\")\n    i = i+1","28a8d17f":"high_accident_cities[:5].sum()\/","adc303b6":"df[\"State\"].value_counts()","7750bf64":"df[\"City\"].value_counts()[:100]","e7c72901":"sns.histplot(x=df['State'], y=df[\"City\"].value_counts()[:10])","9e99324e":"## Exploratory Analysis and Visualization\n\nColumns to analyse\n1. City\n2. Start time\n3. Start Lat & Lon\n4. Temperature\n5. Weather condition","2f14a3f1":"- Sundays and Saturdays show similar accident time pattern. \n- Peak time accidents occur is between 12pm and 3am","8da4c48a":"### Start Time","cd020e3f":"- A high percentage of accidents increases between 13 hrs (1 pm) and 18 hrs (6 pm)\n- Also, next highest accident percentage occur between 6 am and 10 am (probably because of people in hurry to get to work)","b4b8b8e7":"# **Accidents in United States of America -  Exploratory data analysis**\n\nExploratory data analysis (EDA) is used to analyze and investigate data sets and summarize their main characteristics, often employing data visualization methods. It helps determine how best to manipulate data sources to get the answers you need, making it easier to discover patterns, spot anomalies, test a hypothesis, or check assumptions.\n\n\nThe dataset used here for exploratory data analysis is \"US Accidents\" (updated) - A Countrywide Traffic Accident Dataset (Feb 2016 - Dec 2020) from www.kaggle.com. This dataset contains 1.5 million accident records and 569 MB in size as on 21st Nov,2021. \n\nUS-Accidents can be used for numerous applications such as real-time car accident prediction, studying car accidents hotspot locations, casualty analysis and extracting cause and effect rules to predict car accidents, and studying the impact of precipitation or other environmental stimuli on accident occurrence. \n\n\n### Acknowledgements\n\nMoosavi, Sobhan, Mohammad Hossein Samavatian, Srinivasan Parthasarathy, and Rajiv Ramnath. \u201cA Countrywide Traffic Accident Dataset.\u201d, 2019.\n\nMoosavi, Sobhan, Mohammad Hossein Samavatian, Srinivasan Parthasarathy, Radu Teodorescu, and Rajiv Ramnath. \"Accident Risk Prediction based on Heterogeneous Sparse Data: New Dataset and Insights.\" In proceedings of the 27th ACM SIGSPATIAL International Conference on Advances in Geographic Information Systems, ACM, 2019.","f2b2632f":"### City","c07e34e2":"is the displot of accidents by hour is same on weekends as on weekdays?","e4428ed3":"Loading the US Accidents dataset using Pandas and storing it in a variable \"df\"","50cf8304":"#### 6.Which days of the week have the most accidents?\n#### Solution:","72f8d22f":"#### 7. which months have the most accident?\n#### Solution:","0cdb3902":"#### 2. Which five states have the highest number of accidents? how about per capita?\n#### Solution:\n\nNote: Population of below mentioned cities as on 23-11-2021. Source- United States Census Bureau\n\nLos Angeles 3970000\n\nMiami 4540000\n\nCharlotte 8570000\n\nHouston 2310000\n\nDallas 1330000","525f4677":"# Question and answer section\n\n1. Are there more accidents in warmer or colder area?\n2. which five states have the highest number of accidents? how about per capita?\n3. Why dosent New York show up in the data? If yes, why is the count lower if this is most populated city?\n4. Among the top 100 cities in the number of accidents, which states do they belong to?\n5. What time of day are accidents are more frequent in?\n6. Which days of the week have the most accidents?\n7. which months have the most accident?\n8. what is the trend of accidents year over year? (decreasing\/increasing?)\n9. when is accidents\/unit traffic ","29c47fa9":"### Start Latitude and Start Longitude","5374bbe8":"#### 9. when is accidents\/unit traffic\n#### Solution:","c2fe0cb9":"- much data for year 2016, 2019 and 2020 is missing, hence the plots deviate from usual pattern (off-trend).\n- year 2017 and 2018 have linearly increasing\/decreasing pattern.","f9494bb9":"#### 1.Are there more accidents in warmer or colder area?\n#### Solution:","2075bb2c":"# Summary and Conclusion\n\nInsights\n\n- No data for New York\n- The number of accidents per cities decreases exponentially\n- Less than 2.5% of cities have more than 1000 yearly accidents\n- over 1100 cities (1167) have reported just one accident (need to investigate)","88bd3a5b":"- Here we can observe that from Monday to Friday, accident patterns during any time in a day is similar.\n- i.e. most accidents occur between 11am and 7pm\n- 2ns most accidents occur between 6am and 10 am","730b350d":"## Importing python libraries, downloading\/loading the data and cleaning\/sorting\ndata: https:\/\/www.kaggle.com\/sobhanmoosavi\/us-accidents\n\n- Load the file using pandas - file is in CSV file format\n- Look at any missing information about the data and the columns\n- fix any missing or incorrect values\n- mention that new york data is not present.","599871e3":"#### 8.what is the trend of accidents year over year? (decreasing\/increasing?)\n#### Solution:","66b7c824":"#### 3. Why dosent New York show up in the data? If yes, why is the count lower if this is most populated city?\n#### Solution: \n\nNew York does show up in Dataset with total accidents of 60974. New York ranks 5th in most number of accidents in a state.\n\nPopulation of california is 39,500,000 and population of New York is 8,420,000 which is far less than california. ","ce5668aa":"#### 5. What time of day are accidents are more frequent in?\n#### Solution:","2417e7a3":"#### 4. Among the top 100 cities in the number of accidents, which states do they belong to?\n#### Solution:","28f0cb0c":"Remove columns that you dont want to use"}}