{"cell_type":{"f781705f":"code","9e7d2d4d":"code","1bb7c13a":"code","1615f2e9":"code","dedf8ee6":"code","0fa10483":"code","7a24b149":"code","0db6e7b1":"code","60957363":"code","bab4fc14":"code","3fbb97c5":"code","9a44bd86":"code","c1d9d2a9":"markdown","7f05052e":"markdown","449f8d54":"markdown","37154070":"markdown","970f4957":"markdown","719ddc5b":"markdown","7b5e7199":"markdown","e65f311e":"markdown","bc9c4863":"markdown"},"source":{"f781705f":"from datetime import datetime\nimport string\n\nfrom nltk import FreqDist, Text, word_tokenize\nfrom nltk.corpus import stopwords\nimport numpy as np\nimport pandas as pd","9e7d2d4d":"df = pd.read_csv(\"..\/input\/redditbrasildata\/rBrasilLogs.csv\", sep=\";\")\ndf.head()","1bb7c13a":"df[\"DATETIME\"] = [datetime.strptime(d + \" \" + h, \"%d\/%m\/%Y %H:%M\") for d, h in zip(df[\"DAY\"], df[\"HOUR\"])]","1615f2e9":"df_subs = df.loc[:, (\"SUBSCRIBERS\", \"DAY\")]\ndf_subs.loc[:, \"DAY\"] = [pd.to_datetime(day, format=\"%d\/%m\/%Y\") for day in df_subs[\"DAY\"]]\ndf_subs.head()","dedf8ee6":"df_subs.groupby(\"DAY\").mean().plot(figsize=(12,8), grid=True, legend=False, title=\"Subscribers on \/r\/Brasil\");","0fa10483":"df[\"HOUR\"] = [int(h[:2]) for h in df.HOUR]\ndf[\"ACTIVE_USER_COUNT\"] = pd.to_numeric(df.ACTIVE_USER_COUNT, errors=\"coerce\")\ndf_hours = df.loc[:, (\"HOUR\", \"ACTIVE_USER_COUNT\")]\nhours_plot = df[[\"HOUR\", \"ACTIVE_USER_COUNT\"]].groupby(\"HOUR\").mean().plot.bar(\n    figsize=(16,8), \n    rot=0, \n    legend=False, \n    title=\"Average users online on \/r\/Brasil by time of day\",\n)\nfor p in hours_plot.patches:\n    hours_plot.annotate(str(int(p.get_height())), (p.get_x() * 1.005, p.get_height() * 1.005))","7a24b149":"df.ACTIVE_USER_COUNT.plot.box(figsize=(8, 10), title=\"Online users in \/r\/Brasil - Boxplot\", grid=True);","0db6e7b1":"df[\"CREATED_HOUR\"] = df.CREATED.apply(lambda x: datetime.fromtimestamp(x).hour)\ndf_created = df.loc[:, (\"TOP_POST\", \"CREATED_HOUR\")]\ndf_created.drop_duplicates(inplace=True)\ndf_created.head()","60957363":"created_plot = df_created.CREATED_HOUR.value_counts().plot.bar(xticks=np.arange(0, 24, 1), figsize=(10, 6), rot=0, width=0.7, xlabel=\"Hour\", ylabel=\"Number Of Top Posts\", title=\"When are \/r\/Brasil top posts created?\")\nfor p in created_plot.patches:\n    created_plot.annotate(str(int(p.get_height())), (p.get_x() * 1.01, p.get_height() * 1.01))","bab4fc14":"top_posts = list(df_created.TOP_POST)\nprint(len(top_posts), len(set(top_posts)))","3fbb97c5":"joined_posts = \" \".join(top_posts)\ntokens = word_tokenize(joined_posts)\nstop = stopwords.words(\"portuguese\") + list(string.punctuation) + [\"...\",]\nwords = [w.lower() for w in tokens if w.lower() not in stop]\ntext = Text(words)\ntext.collocations()","9a44bd86":"text.vocab()","c1d9d2a9":"Even though the period between 12 and 15 pm was the busiest in terms of users online, almost none of the top posts were created in those hours. Several of them were created during the late night and early morning hours, when there were fewer users online on average. The prime time to create top posts seems to be between 19:01 and 20:59, while the afternoon hours top posts seem like outliers.\n\nWe can also apply some very early and crude nlp, in order to get an overall idea of what kind of content is popular in this subreddit.","7f05052e":"The graph shows an increase in the rate of growth of the number of subscribers, starting in early november and persisting through until early december. This is very likely explained by the 2020 brazilian elections for states and counties, which happened in the 15th and 29th of november. This suggests that the brazilian's audience engagement with this particular virtual community grew during the electoral period.\n\nWe can also visualize the busiest hours of r\/Brasil on average:","449f8d54":"Importing libraries and reading data","37154070":"## Reddit \/r\/Brasil data\n\nReddit is a social media website in which users gather on forums, known as subreddits. Each forum has its specific theme and set of rules. The web address for each subreddit start with the main reddit url (https:\/\/www.reddit.com\/), followed always by r\/ and the name of the subreddit. For this reason, subreddits are often referred to by the end of their url, such as r\/funny, r\/pics or r\/movies. Currently the most popular brazilian subreddit is r\/Brasil, which has around 500k subscribers. Let's check out some data extracted from this specific brazilian web forum and try to draw some first conclusions.","970f4957":"As we can see, references to Brazil's current president emerge between the most popular terms used in top posts in r\/Brasil, which strengthens our earlier conclusions about this being a community with an active political discourse. We also find references to the terms blind (\"cega\") and book publishing (\"livro\" and \"publicado\"), both being very popular in a few series of posts during collection time.\n\n\nNaturally, this notebook is only scratching the surface on the possibilities of exploring and analyzing social media data. There is a lot more to be done so let's keep it up!","719ddc5b":"As expected, the very late nights and early mornings are the less busy periods of the day, still averaging more than a thousand users online. Afternoons and evenings\/nights are similar, with slightly higher numbers around lunch time, that being the busiest hours on average during the period of data available.\n\nThe box plot of the active user count shows that r\/Brasil consistently has between two and three thousand users online:","7b5e7199":"We can now filter our dataframe to visualize the growth of our target subreddit subscribers number through time.","e65f311e":"First let's create a new column in the dataframe, aggregating the date and time original columns into a datetime type new field.","bc9c4863":"The collected data also shows us the top post (the post with the most upvotes - the reddit equivalent of the like button) hourly and some information about this post. Let's try to find out when is the best time of the day to create a new post if we intend it to be a top post."}}