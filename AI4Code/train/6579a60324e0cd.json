{"cell_type":{"11293563":"code","33249b19":"code","a66d8b56":"code","50c187ea":"code","64831f8a":"code","c3e0317a":"code","bf83f14c":"code","24e6f638":"code","e42450a6":"code","d5b510be":"code","027699e1":"code","07f60f1f":"code","d50096f3":"code","dea9200f":"code","be870ee0":"code","340917be":"code","9e079477":"code","452e87ab":"code","1bffa24e":"code","c8e172f8":"code","81b460b9":"code","82f64cdf":"code","d030dabe":"code","a568cd4a":"code","a8ffa779":"code","9f5cc158":"code","0d99f197":"code","6ec9bf05":"code","2f2d4ccf":"code","16ce957a":"code","00cf4442":"code","0d9db7c8":"code","f9598be7":"code","b2adf147":"code","5898d117":"code","bdd8c9f0":"code","08b1acf1":"code","909c282d":"code","6e9999d4":"code","50f32b22":"code","b07c5c59":"code","cfc8bc2f":"code","e869439f":"code","b387c157":"code","c0ce0dd7":"code","dd230cc8":"code","dafee84d":"code","79fee492":"code","a2149b45":"code","b1e0dd14":"code","712c6ec7":"code","6bad57fd":"code","0f5adf4b":"code","f5a8e4e1":"code","54efbf3c":"code","15c65f8d":"code","07450026":"code","8056a91c":"code","5803be16":"code","927e0611":"code","d4b3bd78":"code","9f0d2b48":"code","6df5c150":"markdown","bf812974":"markdown","ab9d09e9":"markdown","4fa1f3a4":"markdown","5121cea5":"markdown","4ec3f6ac":"markdown","b7cd7d90":"markdown","09410a38":"markdown","74110291":"markdown","f8ee3d9b":"markdown","35cb0252":"markdown","e5a3ebb4":"markdown","29af35c4":"markdown","bb5fc76f":"markdown","6a252434":"markdown","5114099e":"markdown","6451bcb4":"markdown","1c3ccd9a":"markdown","5a1eb50c":"markdown","ba55d7d1":"markdown","a50100fb":"markdown","e822e97b":"markdown","09d315c3":"markdown","837c8194":"markdown","846596e6":"markdown","eee98fc2":"markdown","8b4f38f5":"markdown","7016df29":"markdown","3da446c1":"markdown","8420357f":"markdown","d3331546":"markdown"},"source":{"11293563":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","33249b19":"import numpy as np\nimport seaborn as sns\nimport pandas as pd\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn import preprocessing\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_squared_error\nimport math\nfrom sklearn.metrics import mean_absolute_error\nimport statsmodels.api as sm","a66d8b56":"startups = pd.read_csv('..\/input\/sp-startup\/50_Startups.csv') \ndf = startups","50c187ea":"df.head()","64831f8a":"df.info()","c3e0317a":"df.shape","bf83f14c":"df.isnull().sum()","24e6f638":"df.corr()","e42450a6":"corr=df.corr()\nsns.heatmap(corr, xticklabels=corr.columns.values, yticklabels=corr.columns.values);","d5b510be":"sns.scatterplot(x=\"R&D Spend\", y=\"Profit\", data= df);","027699e1":"sns.distplot(df[\"Profit\"], bins=16, color=\"black\");","07f60f1f":"sns.distplot(df[\"R&D Spend\"], bins=16, color=\"blue\");","d50096f3":"sns.distplot(df[\"Marketing Spend\"], bins=16, color=\"red\");","dea9200f":"sns.distplot(df[\"Administration\"], bins=16, color=\"green\");","be870ee0":"#ba\u011f\u0131mlo de\u011fi\u015fken ile ba\u011f\u0131ms\u0131z de\u011fi\u015fken aras\u0131ndaki ili\u015fkinin g\u00f6sterimi\nsns.pairplot(df, x_vars=['R&D Spend','Administration','Marketing Spend'], y_vars='Profit', size=7, aspect=0.7)","340917be":"df.describe().T","9e079477":"df[\"State\"].unique()","452e87ab":"df['State'] = pd.Categorical(df['State'])\ndfDummies = pd.get_dummies(df['State'], prefix = 'State')\ndfDummies","1bffa24e":"df = pd.concat([df, dfDummies], axis=1)\ndf.head()","c8e172f8":"df.drop([\"State\", \"State_New York\"], axis = 1, inplace = True)","81b460b9":"X = df.drop(\"Profit\", axis = 1)\ny = df[\"Profit\"]","82f64cdf":"X.head()","d030dabe":"y.head()","a568cd4a":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.20, random_state=99)","a8ffa779":"X_train.head()","9f5cc158":"X_test.head()","0d99f197":"y_train.head()","6ec9bf05":"y_test.head()","2f2d4ccf":"lm = LinearRegression()","16ce957a":"model = lm.fit(X_train, y_train)","00cf4442":"y_pred = lm.predict(X_test)","0d9db7c8":"df_a = pd.DataFrame({'Gercek': y_test, 'Tahmin': y_pred})\ndf_a","f9598be7":"MSE = mean_squared_error(y_test, y_pred)\nMSE","b2adf147":"RMSE = math.sqrt(MSE)\nRMSE","5898d117":"MAE = mean_absolute_error(y_test, y_pred)\nMAE","bdd8c9f0":"model.score(X_train, y_train)","08b1acf1":"model.score(X_test, y_test)","909c282d":"lm = sm.OLS(y, X)\nmodel=lm.fit()\nmodel.summary()","6e9999d4":"#analize ba\u015flamadan baz\u0131 varsay\u0131mlar kontrol edilmeli\n#normallik testi\nfrom numpy.random import seed\nfrom numpy.random import randn\nfrom scipy.stats import shapiro\nseed(1)\nfor i in df:\n    stat, p = shapiro(df[i])\n    print('Statistics=%.3f, p=%.3f' % (stat, p))","50f32b22":"#do\u011frusall\u0131k testi\nfrom statsmodels.graphics.gofplots import qqplot\nfrom matplotlib import pyplot\nfor i in df:\n    qqplot(df[i], line='s')\n    pyplot.show()","b07c5c59":"#art\u0131klar\u0131n da\u011f\u0131l\u0131m\u0131 normal olmal\u0131 varsay\u0131m\u0131n test etme\nresidual = y_test - y_pred\nsns.distplot(residual)","cfc8bc2f":"#hata terimlerinin ortalamas\u0131 s\u0131f\u0131r olmal\u0131\nnp.mean(residual)","e869439f":"#ba\u011f\u0131ms\u0131z de\u011fi\u015fkenler aras\u0131nda \u00e7oklu ba\u011flant\u0131 olmamal\u0131.\nfrom statsmodels.stats.outliers_influence import variance_inflation_factor\nvif = [variance_inflation_factor(X_train.values, i) for i in range(X_train.shape[1])]\npd.DataFrame({'vif': vif[0:]}, index=X_train.columns).T","b387c157":"#sabit varyans olmal\u0131\nimport matplotlib.pyplot as plt\nfig, ax = plt.subplots(figsize=(6,2.5))\n_ = ax.scatter(y_pred, residual)","c0ce0dd7":"#filtreleme y\u00f6ntemi i\u00e7in korelasyon kullan\u0131labilir\ncor = df.corr()\ncor_target = abs(cor[\"Profit\"])\n#y\u00fcksek korelasyona sahip de\u011fi\u015fkenler se\u00e7ilebilir\nrelevant_features = cor_target[cor_target>0.5]\nrelevant_features","dd230cc8":"print(df[[\"R&D Spend\",\"Marketing Spend\"]].corr())# iki de\u011fi\u015fken aras\u0131nda y\u00fcksek korelasyon var ve beraber modelde yer almamal\u0131","dafee84d":"import statsmodels.formula.api as smf\ndf[\"rdS\"]=df[\"R&D Spend\"]\nlm1 = smf.ols(formula='Profit ~ rdS ', data=df).fit()\nlm1.params","79fee492":"lm1.rsquared","a2149b45":"df_filter=df.filter(items=['R&D Spend', \"Profit\"])\ndf_filter","b1e0dd14":"X = df_filter.drop(\"Profit\", axis = 1)\ny = df_filter[\"Profit\"]","712c6ec7":"X.head()","6bad57fd":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.20, random_state=99)","0f5adf4b":"lm = LinearRegression()","f5a8e4e1":"model = lm.fit(X_train, y_train)","54efbf3c":"y_pred = lm.predict(X_test)","15c65f8d":"df_a = pd.DataFrame({'Gercek': y_test, 'Tahmin': y_pred})\ndf_a","07450026":"MSE = mean_squared_error(y_test, y_pred)\nMSE","8056a91c":"RMSE = math.sqrt(MSE)\nRMSE","5803be16":"MAE = mean_absolute_error(y_test, y_pred)\nMAE","927e0611":"model.score(X_train, y_train)","d4b3bd78":"X_1 = sm.add_constant(X)\nmodel = sm.OLS(y,X_1).fit()\ndegerler=model.pvalues\ndegerler.sort_values()","9f0d2b48":"#Backward Elimination\ncols = list(X.columns)\npmax = 1\nwhile (len(cols)>0):\n    p= []\n    X_1 = X[cols]\n    X_1 = sm.add_constant(X_1)\n    model = sm.OLS(y,X_1).fit()\n    p = pd.Series(model.pvalues.values[1:],index = cols)      \n    pmax = max(p)\n    feature_with_p_max = p.idxmax()\n    if(pmax>0.05):\n        cols.remove(feature_with_p_max)\n    else:\n        break\nselected_features_BE = cols\nprint(selected_features_BE)","6df5c150":"State'a ait benzersiz de\u011ferleri g\u00f6r\u00fcnt\u00fcleyelim.","bf812974":"LinearRegression'u \u00e7ekirde\u011fe dahil edip modeli in\u015fa edelim.","ab9d09e9":"Veri \u00e7er\u00e7evesinin bilgilerini g\u00f6r\u00fcnt\u00fcleyelim.","4fa1f3a4":"State \u00f6zniteli\u011fini silip dummy olarak yarat\u0131lan State'lardan da birisini hari\u00e7 tutarak veri \u00e7er\u00e7evemizi g\u00fcncelleyelim.","5121cea5":"get_dummies yard\u0131m\u0131yla State'a dair kategorik \u00f6znitelik \u00e7\u0131kar\u0131mlar\u0131nda bulunal\u0131m. \u00c7\u00fcnk\u00fc State'lar\u0131n birbirine \u00fcst\u00fcnl\u00fc\u011f\u00fc yok, nominaller. Ordinal de\u011fil.","4ec3f6ac":"Korelasyon matrisi \u00e7izdirelim.","b7cd7d90":"Veri \u00e7er\u00e7evesinin temel istatistik de\u011ferlerini g\u00f6r\u00fcnt\u00fcleyelim.","09410a38":"sklearn b\u00fcnyesinde bar\u0131nan metrics'i \u00e7ekirde\u011fe dahil edelim ve MAE, MSE, RMSE de\u011ferlerini g\u00f6r\u00fcnt\u00fcleyelim.","74110291":"Modeli e\u011fitmek i\u00e7in ba\u011f\u0131ml\u0131 ba\u011f\u0131ms\u0131z de\u011fi\u015fkenlerden olu\u015fturulan e\u011fitim verilerini verelim.","f8ee3d9b":"Eksik verileri kontrol edelim.","35cb0252":"Sarmal y\u00f6ntem ile de sadece R&D Spend \u00f6zniteli\u011fi \u00e7\u0131kt\u0131\u011f\u0131 i\u00e7in modeli tekrar test etmeye gerek yoktur.","e5a3ebb4":"Modele daha \u00f6nce g\u00f6rmedi\u011fi ba\u011f\u0131ml\u0131 test de\u011fi\u015fkenini tahmin ettirelim. Bu tahmin de\u011ferlerimizi y_pred de\u011fi\u015fkenine atayal\u0131m.","29af35c4":"# Do\u011frusal Regresyon Egzersizleri","bb5fc76f":"Dileyenler statsmodel kullanarak hangi \u00f6zniteliklerin model i\u00e7in %95 g\u00fcvenilirlikle ne kadar anlaml\u0131 olup olmad\u0131\u011f\u0131na da bakabilir. Modelde baz\u0131 feature selection i\u015flemleri yaparak tekrardan e\u011fitip yeni sonu\u00e7lar mukayese edilebilir.","6a252434":"Numpy, matplotlib.pyplot, pandas ve seaborn k\u00fct\u00fcphanelerini \u00e7ekirde\u011fe dahil edelim.","5114099e":"4 par\u00e7a de\u011fi\u015fkeni kontrol edelim.","6451bcb4":"Tahminleri ve ger\u00e7ek de\u011ferleri bir veri \u00e7er\u00e7evesinde toplay\u0131p \u00fczerinde g\u00f6z gezdirelim.","1c3ccd9a":"Veri \u00e7er\u00e7evemizi ba\u011f\u0131ml\u0131 ve ba\u011f\u0131ms\u0131z de\u011fi\u015fkenler olmak \u00fczere b\u00f6l\u00fctleyelim.","5a1eb50c":"# WRAPPER-SARMAL Y\u00d6NTEM","ba55d7d1":"Ba\u011f\u0131ml\u0131 ve ba\u011f\u0131ms\u0131z de\u011fi\u015fkenleri kontrol edelim.","a50100fb":"Modelin R Squared de\u011ferini e\u011fitim verileri \u00fczerinden yazd\u0131ral\u0131m.","e822e97b":"Seaborn ile korelasyon matrisinin \u0131s\u0131 haritas\u0131n\u0131 \u00e7izdirelim.","09d315c3":"50 adet Startup'\u0131n ara\u015ft\u0131rma ve geli\u015ftirmeye y\u00f6nelik harcamas\u0131, y\u00f6netime y\u00f6nelik harcamas\u0131, pazarlama harcamas\u0131, kazand\u0131klar\u0131 kar miktar\u0131 ve kurulduklar\u0131 lokasyon bilgisi bulunmaktad\u0131r. Ama\u00e7 kar miktar\u0131n\u0131 tahmin etmektir. Bu bir say\u0131sal tahmin problemidir ve ba\u011f\u0131ml\u0131 de\u011fi\u015fkenimiz \"Profit\".","837c8194":"Say\u0131sal de\u011fi\u015fkenlerin da\u011f\u0131l\u0131m\u0131n\u0131 g\u00f6rmek i\u00e7in df \u00fczerinden histogram \u00e7izdirelim.","846596e6":"R&D Spend ve Profit aras\u0131ndaki korelasyonu daha iyi g\u00f6rebilmek i\u00e7in scatterplot \u00e7izdirelim.","eee98fc2":"Ka\u00e7 g\u00f6zlem ve \u00f6znitelikten olu\u015ftu\u011funu g\u00f6r\u00fcnt\u00fcleyelim.","8b4f38f5":"F\u0130LTRELEME Y\u00d6NTEM\u0130","7016df29":"Bu ba\u011f\u0131ml\u0131 ve ba\u011f\u0131ms\u0131z de\u011fi\u015fkenlerden train ve test olmak \u00fczere 4 par\u00e7a olu\u015ftural\u0131m. Bunu yapmak i\u00e7in train_test_split kullanal\u0131m.","3da446c1":"Dizinde bulunan veri \u00e7er\u00e7evemizi startups de\u011fi\u015fkenine atayal\u0131m. startups de\u011fi\u015fkenini df de\u011fi\u015fkenine kopyalayarak kullanmaya ba\u015flayal\u0131m.","8420357f":"\u0130lk 5 g\u00f6zlemini yazd\u0131ral\u0131m.","d3331546":"# ****\u00d6ZN\u0130TEL\u0130K SE\u00c7\u0130M\u0130"}}