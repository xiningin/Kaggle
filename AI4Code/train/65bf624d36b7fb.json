{"cell_type":{"3f81a4d4":"code","5e50207e":"code","910cefbf":"code","f9debc29":"code","26ff17b9":"code","e1dd3d69":"code","c88f5f4d":"code","78fa9cb3":"code","1d2c7300":"code","a65fbc52":"code","2608b29f":"code","a36aa7df":"code","6d2efdb8":"code","eead5493":"code","f9f3b243":"code","413bd929":"code","2040ed5f":"code","7b736715":"code","50f558b4":"code","8be5157c":"code","7e53f7f0":"code","01ee6f03":"code","d0878425":"code","3ffa2aa8":"code","42da0061":"code","11711f7f":"code","00681d4e":"code","fa0df7b8":"code","c9c91426":"code","9817ea56":"code","44a0fa55":"code","76836c30":"code","a8da81e7":"code","d14d52dd":"code","08408018":"code","11b9e8e3":"code","21d02689":"markdown","735d9572":"markdown","43d0bc31":"markdown","103fa0f4":"markdown","5fc73126":"markdown","b38a171a":"markdown"},"source":{"3f81a4d4":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go\nimport geopandas as gpd\nimport geoplot\nimport geoplot.crs as gcrs\nfrom shapely.geometry import Point, Polygon\nimport plotly.express as px\nimport geoplot as gplt\nimport geoplot.crs as gcrs\nimport warnings\n\nwarnings.filterwarnings(\"ignore\")","5e50207e":"df = pd.read_csv('..\/input\/all-uk-police-street-crime-102018-to-092021\/UK_Police_Street_Crime_2018-10-01_to_2021_09_31.csv')","910cefbf":"df.sample(5)","f9debc29":"# Because data is big, i only use one month\n# I choose the month with the most crime\ndf['Month'].value_counts().sort_values(ascending=False)","26ff17b9":"df_new = df[df['Month']=='2018-10']","e1dd3d69":"df_new = df_new.drop(columns='Unnamed: 0')","c88f5f4d":"datageo = gpd.read_file('..\/input\/all-uk-police-street-crime-102018-to-092021\/Police_Force_Areas__December_2016__Generalised_Clipped_Boundaries_in_England_and_Wales.geojson')","78fa9cb3":"datageo.crs","1d2c7300":"geoplot.polyplot(datageo, projection=gcrs.AlbersEqualArea(), edgecolor='darkgrey', facecolor='lightgrey', linewidth=.3,\n    figsize=(12, 8))\n","a65fbc52":"df_new.info()","2608b29f":"plt.figure(figsize=(10,10))\nsns.countplot(data=df_new, y='Reported by', order=df_new['Reported by'].value_counts().index)\nplt.title('Count of Police Service Who Report The Crime', fontsize=15)\nplt.show()","a36aa7df":"plt.figure(figsize=(10,10))\nsns.countplot(data=df_new, y='Falls within', order=df_new['Falls within'].value_counts().index)\nplt.title('Count of Police Service Who Handle The Crime', fontsize=15)\nplt.show()","6d2efdb8":"plt.figure(figsize=(10,10))\nsns.countplot(data=df_new, y='Crime type', order=df_new['Crime type'].value_counts().index)\nplt.title('Count of The Crime Type', fontsize=15)\nplt.show()","eead5493":"plt.figure(figsize=(10,10))\nsns.countplot(data=df_new, y='Location', order=df_new['Location'].value_counts().index[:10])\nplt.title('Top 10 Location Where Crime Often Occurs ', fontsize=15)\nplt.show()","f9f3b243":"plt.figure(figsize=(10,10))\nsns.countplot(data=df_new, y='Last outcome category', order=df_new['Last outcome category'].value_counts().index)\nplt.title('Count of Last Outcome Category', fontsize=15)\nplt.show()","413bd929":"df_new['Location'].value_counts().index[:10]","2040ed5f":"df_top3_loc = df_new.query(\"Location in ('On or near Supermarket', 'On or near Parking Area','On or near Shopping Area')\")","7b736715":"# What type of crimes often occur in the top 3 locations ?\nplt.figure(figsize=(10,10))\nsns.countplot(data=df_top3_loc, y='Crime type', order=df_top3_loc['Crime type'].value_counts().index)\nplt.title('Count of The Crime Type', fontsize=15)\nplt.show()","50f558b4":"# What the last outcome that often appears in the top 3 locations ?\nplt.figure(figsize=(10,10))\nsns.countplot(data=df_top3_loc, y='Last outcome category', order=df_top3_loc['Last outcome category'].value_counts().index)\nplt.title('Count of Last Outcome Category', fontsize=15)\nplt.show()","8be5157c":"df_top3_loc_SM = df_top3_loc[df_top3_loc['Location']=='On or near Supermarket']","7e53f7f0":"crs = {'init' : 'epsg:4326'}\ngeo = [Point(xy) for xy in zip(df_top3_loc_SM['Longitude'], df_top3_loc_SM['Latitude'])]\ngeo_df = gpd.GeoDataFrame(df_top3_loc_SM, crs=crs, geometry=geo)\ngeo_df.head(2)","01ee6f03":"# Map Supermarket Location and what crime happenned there with geoplot\nplt.figure(figsize=(10,10))\nax = gplt.polyplot(datageo)\ngplt.pointplot(geo_df['geometry'], ax=ax)","d0878425":"# Map Supermarket Location and what crime happenned there with plotly\nfig = go.Figure(data=go.Scattergeo(\n        lon = df_top3_loc_SM['Longitude'],\n        lat = df_top3_loc_SM['Latitude'],\n        text = df_top3_loc_SM['Crime type'],\n        mode = 'markers',\n        ))\n\nfig.update_geos(\n    center=dict(lon=0, lat=51),\n    lataxis_range=[-50,50], lonaxis_range=[100, 200],\n    fitbounds=\"locations\")\n\nfig.update_layout(\n        title = 'Supermarket Location & Crime Happenned There',\n#         geo_scope='europe',\n    )\nfig.show()","3ffa2aa8":"df_new = df_new.rename(columns={'Crime type':'CrimeType'})","42da0061":"df_top3_crime = df_new.query(\"CrimeType in ('Violence and sexual offences', 'Anti-social behaviour','Criminal damage and arson')\")","11711f7f":"# Location where this type of crime often occurs\nplt.figure(figsize=(10,10))\nsns.countplot(data=df_top3_crime, y='Location', order=df_top3_crime['Location'].value_counts().index[:10])\nplt.title('Top 10 Location Where Crime Often Occurs ', fontsize=15)\nplt.show()","00681d4e":"# What the last outcome that often appears in the top 3 crime type ?\nplt.figure(figsize=(10,10))\nsns.countplot(data=df_top3_crime, y='Last outcome category', order=df_top3_crime['Last outcome category'].value_counts().index)\nplt.title('Count of Last Outcome Category', fontsize=15)\nplt.show()","fa0df7b8":"df_top3_crime.head()","c9c91426":"# Map where usually the top 1 crimes occur\ndf_top3_crime_VO = df_top3_crime[df_top3_crime['CrimeType']=='Violence and sexual offences']\nfig = go.Figure(data=go.Scattergeo(\n        lon = df_top3_crime_VO['Longitude'],\n        lat = df_top3_crime_VO['Latitude'],\n        text = df_top3_loc_SM['Location'],\n        mode = 'markers',\n        ))\n\nfig.update_geos(\n    center=dict(lon=0, lat=51),\n    lataxis_range=[-50,50], lonaxis_range=[100, 200],\n    fitbounds=\"locations\")\n\nfig.update_layout(\n        title = 'Map TOP 1 Crime',\n#         geo_scope='europe',\n    )\nfig.show()","9817ea56":"df_new['CrimeType'].unique()","44a0fa55":"# What is the most outcome for possession of weapons\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['CrimeType']=='Possession of weapons']\nsns.countplot(data=data1, y='Last outcome category', order=data1['Last outcome category'].value_counts().index)\nplt.title('Count of outcome for Possesion of Weapon', fontsize=15)\nplt.show()","76836c30":"# What is the most outcome for drugs\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['CrimeType']=='Drugs']\nsns.countplot(data=data1, y='Last outcome category', order=data1['Last outcome category'].value_counts().index)\nplt.title('Count of outcome for Drugs', fontsize=15)\nplt.show()","a8da81e7":"# What is the most outcome for robbery\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['CrimeType']=='Robbery']\nsns.countplot(data=data1, y='Last outcome category', order=data1['Last outcome category'].value_counts().index)\nplt.title('Count of outcome for Robbery', fontsize=15)\nplt.show()","d14d52dd":"# Crime that often occur in or near nightclub\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['Location']=='On or near Nightclub']\nsns.countplot(data=data1, y='CrimeType', order=data1['CrimeType'].value_counts().index)\nplt.title('Crime that often occur in or near nightclub', fontsize=15)\nplt.show()","08408018":"# Crime that often occur in or near hospital\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['Location']=='On or near Hospital']\nsns.countplot(data=data1, y='CrimeType', order=data1['CrimeType'].value_counts().index)\nplt.title('Crime that often occur in or near hospital', fontsize=15)\nplt.show()","11b9e8e3":"# Crime that often occur in or near supermarket\nplt.figure(figsize=(10,10))\ndata1 = df_new[df_new['Location']=='On or near Supermarket']\nsns.countplot(data=data1, y='CrimeType', order=data1['CrimeType'].value_counts().index)\nplt.title('Crime that often occur in or near supermarket', fontsize=15)\nplt.show()","21d02689":"<h1 style='background:#CCE2CB; border:0; color:black'><center> Load Data <\/center><\/h1> ","735d9572":"<h2 style='background:#BDE3EB; color:black'><center> Analyze Top 3 Location <\/center><\/h2> ","43d0bc31":"<h2 style='background:#BDE3EB; color:black'><center> Analyze Top 3 Crime Type <\/center><\/h2> ","103fa0f4":"<h1 style='background:#CCE2CB; border:0; color:black'><center> Importing Libraries <\/center><\/h1> ","5fc73126":"<h1 style='background:#CCE2CB; border:0; color:black'><center> EDA <\/center><\/h1> ","b38a171a":"<h2 style='background:#BDE3EB; color:black'><center> Random Analysis <\/center><\/h2> "}}