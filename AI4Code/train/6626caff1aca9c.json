{"cell_type":{"7d96abd8":"code","1ca5623e":"code","76a792da":"code","8fc94550":"code","4e5828ca":"code","b020c91c":"code","b5a129d1":"code","a6f419d5":"code","b48b7426":"code","2de4edb3":"code","793d9a5c":"code","42611ab3":"code","52d745e2":"code","2acbb74f":"code","4e7564f5":"code","23f85ac7":"code","64acc01f":"code","953f727c":"code","80385ba3":"code","38db5370":"code","f3aa49d1":"code","3324c947":"code","f3b7194f":"code","9bf3171c":"code","91371df6":"code","bec8ed30":"code","162760be":"code","441594cd":"markdown","eb210489":"markdown","d2e39f54":"markdown","9a444af5":"markdown","6cc989db":"markdown","adafe0e7":"markdown","1eb28c26":"markdown","a87be88b":"markdown","50a557ec":"markdown","63f6cc0e":"markdown"},"source":{"7d96abd8":"import pandas as pd\ndata_df = pd.read_csv(\"\/kaggle\/input\/violence-against-women-and-girls\/makeovermonday-2020w10\/violence_data.csv\")","1ca5623e":"data_df.head()","76a792da":"data_df.info()","8fc94550":"columns = data_df.columns\nfor column in columns:\n    print(f\"{column} : {data_df[column].nunique()}\")","4e5828ca":"demographics_df = data_df.groupby([\"Demographics Question\", \"Demographics Response\"])[\"Value\"].agg([\"median\", \"max\", \"min\", \"mean\"]).reset_index()\ndemographics_df.columns = [\"Question\", \"Response\", \"Median\", \"Max\", \"Min\", \"Mean\"]\nprint(\"Violence % median, min, max, and mean per demographic group\")\ndemographics_df.sort_values([\"Question\", \"Median\"])","b020c91c":"question_df = data_df.groupby([\"Question\"])[\"Value\"].agg([\"median\", \"max\", \"min\", \"mean\"]).reset_index()\nquestion_df.columns = [\"Question\", \"Median\", \"Max\", \"Min\", \"Mean\"]\nprint(\"Violence % median, min, max, and mean per question asked\")\nquestion_df.sort_values([\"Median\"])","b5a129d1":"demoq_df = data_df.groupby([\"Demographics Question\", \"Demographics Response\", \"Question\"])[\"Value\"].agg([\"median\", \"max\", \"min\", \"mean\"]).reset_index()\ndemoq_df.columns = [\"Demographics Question\", \"Demographics Response\", \"Question\", \"Median\", \"Max\", \"Min\", \"Mean\"]\nprint(\"Violence % median, min, max, and mean per demographic group and question asked\")\ndemoq_df = demoq_df.sort_values([\"Demographics Question\", \"Demographics Response\", \"Median\"])\ndemoq_df.head()","a6f419d5":"import plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\ndef show_answers_per_demographic_question(question, aggregate=\"Median\", layout_mode=\"Single\"):\n    font_size = 10\n    if layout_mode == \"Single\":\n        fig = go.Figure()\n        font_size = 12\n    else:\n        fig = make_subplots(rows=2, cols=2, specs=[[{'type': 'polar'}]*2]*2)\n        \n    sel_df = demoq_df.loc[demoq_df[\"Demographics Question\"]==question]\n    answers = list(sel_df[\"Demographics Response\"].unique())\n    count = 0\n    for answer in answers:\n        subsel_df = sel_df.loc[sel_df[\"Demographics Response\"] == answer]\n        if layout_mode == \"Single\":\n            fig.add_trace(go.Scatterpolar(name=answer, r=subsel_df[aggregate], theta=subsel_df['Question']))\n        else:\n            fig.add_trace(go.Scatterpolar(name=answer, r=subsel_df[aggregate], theta=subsel_df['Question']), count%2 + 1, int(count\/2+1))\n        count = count + 1\n    fig.update_traces(fill='toself')\n    fig.update_layout(title='Demografics Question: '+ question + ' | Statistics: ' + aggregate,font=dict(family=\"Courier New, monospace\",size=font_size))\n    fig.show()","b48b7426":"show_answers_per_demographic_question(\"Age\")","2de4edb3":"show_answers_per_demographic_question(\"Age\", aggregate=\"Max\")","793d9a5c":"show_answers_per_demographic_question(\"Education\")","42611ab3":"show_answers_per_demographic_question(\"Education\", aggregate=\"Max\")","52d745e2":"show_answers_per_demographic_question(\"Employment\")","2acbb74f":"show_answers_per_demographic_question(\"Employment\", aggregate=\"Max\")","4e7564f5":"show_answers_per_demographic_question(\"Marital status\")","23f85ac7":"show_answers_per_demographic_question(\"Marital status\", aggregate=\"Max\")","64acc01f":"show_answers_per_demographic_question(\"Residence\")","953f727c":"show_answers_per_demographic_question(\"Residence\", aggregate=\"Max\")","80385ba3":"country_df = pd.read_csv(\"..\/input\/iso-country-codes-global\/wikipedia-iso-country-codes.csv\")\ncountry_df.columns = [\"Country\", \"A2C\", \"A3C\", \"Num\",\"ISO\"]\ndatac_df = data_df.merge(country_df)","38db5370":"df = datac_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"median\", \"max\", \"min\", \"mean\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Median\", \"Max\", \"Min\", \"Mean\"]","f3aa49d1":"def show_on_map(df, aggregate, title):\n    fig = go.Figure(data=go.Choropleth(\n        locations = df['A3C'],\n        z = df[aggregate],\n        text = df['Country'],\n        colorscale = 'Blues',\n        autocolorscale=False,\n        reversescale=True,\n        marker_line_color='darkgray',\n        marker_line_width=0.5,\n        colorbar_tickprefix = '%',\n        colorbar_title = 'Violence %',\n    ))\n\n    fig.update_layout(\n        title_text=title,\n        geo=dict(\n            showframe=False,\n            showcoastlines=False,\n            projection_type='equirectangular'\n        ),\n        annotations = [dict(\n            x=0.55,\n            y=0.1,\n            xref='paper',\n            yref='paper',\n            text='Source: <a href=\"https:\/\/www.kaggle.com\/andrewmvd\/violence-against-women-and-girls\">\\\n                Violence against Women and Girls<\/a>',\n            showarrow = False\n        )]\n    )\n\n    fig.show()","3324c947":"show_on_map(df, \"Median\", \"Violence against Women and Girls - Country median level of violence[%]\")","f3b7194f":"filter_df = datac_df.loc[datac_df[\"Demographics Response\"]==\"No education\"]\ndf = filter_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"median\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Median\"]\nshow_on_map(df, \"Median\", \"Violence against Women with No education - Country Median level of violence [%]\")","9bf3171c":"filter_df = datac_df.loc[datac_df[\"Demographics Response\"]==\"Higher\"]\ndf = filter_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"median\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Median\"]\nshow_on_map(df, \"Median\", \"Violence against Women with Higher education - Country Median level of violence [%]\")","91371df6":"df = datac_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"median\", \"max\", \"min\", \"mean\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Median\", \"Max\", \"Min\", \"Mean\"]\nshow_on_map(df, \"Max\", \"Violence against Women and Girls - Country maximum level of violence[%]\")","bec8ed30":"filter_df = datac_df.loc[datac_df[\"Demographics Response\"]==\"No education\"]\ndf = filter_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"max\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Max\"]\nshow_on_map(df, \"Max\", \"Violence against Women with No education - Country Max level of violence [%]\")","162760be":"filter_df = datac_df.loc[datac_df[\"Demographics Response\"]==\"Higher\"]\ndf = filter_df.groupby([\"Country\", \"A3C\"])[\"Value\"].agg([\"max\"]).reset_index()\ndf.columns = [\"Country\", \"A3C\", \"Max\"]\nshow_on_map(df, \"Max\", \"Violence against Women with Higher education - Country Max level of violence [%]\")","441594cd":"# Maximum violence percent per country","eb210489":"Generally, the median and maximum are aligned. The reasons for violence, ranged by median values are:\n* if she burns the food;  \n* if she refuses to have sex with him;  \n* if she argues with him;  \n* if she goes out without telling him;  \n* if she neglects the children.  \n\nNon specified but at least one specific reason would have the maximum median value and the absolute maximum percent.","d2e39f54":"# Introduction\n\nWe will analyze the data on violence on women and girls. The data is collected from 70 countries and contains demographics questions and answers as well as percent of response to 5 violence specific questions.\n\n<center><img src=\"https:\/\/equineteurope.org\/wp-content\/uploads\/2019\/11\/stop-violence-against-women.jpg\" width=\"800\"><\/img><\/center>","9a444af5":"# What the question answered reveals","6cc989db":"# Median violence percent per country","adafe0e7":"## Glimpse the data","1eb28c26":"The data grouped on demographics shows the following:\n* The most exposed age group is the 15-24, with a median of 17.50 and max of 80.1, while the absolute max is for 25-34 age group;\n* Education level of girls and women is a very good predictor for violence against them: a higher education level will ensure a small median percent of 4.2%, while No education shows a 21.55% median and a 82% maximum violence percent.\n* Employment factor also counts, from Unemployed to Employed for kind the median is varying from 14.55% to 20.15%. The women that work tend to be more exposed to violence.\n* Marriage is slighly protecting if we look to the median, but married women are more exposed to higher level of violence. Widowed, divorced or separated have a smaller median than Married or living together group, as well as the max. But it might be also an age factor here.\n* Women from Urban areas are less exposed to violence than women from Rural areas, both the median and the max values being smaller in Urban vs. Rural areas.","a87be88b":"# Demographics and question answered combined","50a557ec":"# What demographics are telling us\n\n\nLet's look first to what demographics are telling to us. There are 5 demographics questions:\n* Age (15-24, 25-34, 35-49)\n* Education (No Education, Primary, Secondary, Higher)\n* Employement (Unemployed, Employed for cash, Employed for kind)\n* Marital status (Maried or living together, Widowed, divorced, separated, Never Married)\n* Residence (Rural, Urban)\n\nWe will aggregate the data on the demographic question, answer and calculate the minimm, maximum, median and average stats per each of this demographic.","63f6cc0e":"# Analysis preparation\n\n\n## Data input"}}