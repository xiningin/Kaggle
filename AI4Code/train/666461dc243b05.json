{"cell_type":{"b616d8ef":"code","c9298e14":"code","d8ab022f":"code","8d7ec30d":"code","7abfd7f6":"code","f29e9a56":"code","9f227308":"code","21503280":"code","379b466b":"code","de7c72bf":"code","fb81283d":"code","3d8f1b75":"code","feae898f":"code","72c1e8de":"code","293ef83c":"code","387fecac":"code","c77a842a":"code","4347642f":"code","7c8b79b2":"code","95af93df":"code","85f15fc0":"code","a496e495":"code","26d3397b":"code","66dd776b":"code","8f6d1120":"code","a9aa25cc":"code","4a590a78":"code","a43c4d26":"code","4201b4ec":"code","73ada9a5":"markdown","265f88d6":"markdown","7bb104bf":"markdown","96446dd6":"markdown","981d5932":"markdown","74ef256f":"markdown","6deb87fd":"markdown","cd6f6695":"markdown","23866e48":"markdown","90dff8e9":"markdown","7f4d63f4":"markdown","a5daa34e":"markdown","77dbfda5":"markdown","4803b0fb":"markdown","e31c92b0":"markdown","5914eb7f":"markdown","34a4ac90":"markdown","fe36e0bd":"markdown"},"source":{"b616d8ef":"import seaborn as sns\nimport pandas as pd\nimport numpy as np\nimport cufflinks as cf\nimport plotly.express as px\nimport matplotlib.pylab as plt\nfrom pandas.api.types import CategoricalDtype\nfrom plotly.offline import download_plotlyjs,init_notebook_mode,plot,iplot\ninit_notebook_mode(connected=True)\ncf.go_offline()\nsns.set_style(\"whitegrid\")","c9298e14":"df=pd.read_csv(\"..\/input\/online-chess-games\/chess_games.csv\",index_col=[\"game_id\"])","d8ab022f":"df.head(3)","8d7ec30d":"df.drop([\"white_id\",\"black_id\"],axis=1,inplace=True)","7abfd7f6":"df.info()","f29e9a56":"df.describe() ","9f227308":"df.isna().sum() ","21503280":"fig=px.pie(df[\"winner\"].value_counts(),names=df[\"winner\"].value_counts().index,values=df[\"winner\"].value_counts().values,\n           title=\"Percentage of Winners\",\n            color_discrete_sequence=[\"#FDFEFE\",\"#17202A\",\" #3498DB\"],\n           labels={\"names\":\"Player\",\"values\":\"Num of Games\"}\n      )\nfig.update_layout(\ntitle_font_color=\"#fff\",paper_bgcolor=\"#283747\",title_font_size=20,title_x=.45,font_color=\"#bbb\",\n    plot_bgcolor=\"#D0D3D4\",legend_title_font_size=17,legend_title_font_color=\"#fff\",\n    legend_title_text=\"Game winner\")\nfig.update_yaxes(showgrid=False,visible=False,title=\"percent of commencts\")\nfig.update_xaxes(tickfont_size=9)\nfig.update_traces(textfont_size=10)\nfig.show()","379b466b":"sample=df[[\"winner\",\"white_rating\",\"black_rating\"]].rename(columns={\"white_rating\":\"white\",\"black_rating\":\"black\"})","de7c72bf":"sample.head()","fb81283d":"sample[\"w>b\"]=(sample[\"white\"] > sample[\"black\"])\nsample ","3d8f1b75":"mask=((sample[\"winner\"]==\"White\" )& (sample[\"w>b\"]==True)) | ((sample[\"winner\"]==\"Black\") & (sample[\"w>b\"]==False))\nsample[\"high_winn\"]=\"low_rank win\"\nsample.loc[mask,\"high_winn\"]=\"high_rank win\"","feae898f":"sample","72c1e8de":"fig=px.pie(sample[\"high_winn\"].value_counts(),names=sample[\"high_winn\"].value_counts().index,values=sample[\"high_winn\"].value_counts().values,\n           title=\"Winnig Situation\",\n            color_discrete_sequence=[\"#FDFEFE\",\"#17202A\"],\n           labels={\"names\":\"Situation \",\"values\":\"Count \"}\n      )\nfig.update_layout(\ntitle_font_color=\"#fff\",paper_bgcolor=\"#283747\",title_font_size=20,title_x=.45,font_color=\"#bbb\",\n    plot_bgcolor=\"#D0D3D4\",legend_title_font_size=17,legend_title_font_color=\"#fff\",\n    legend_title_text=\"Situation\")\nfig.update_xaxes(tickfont_size=9)\nfig.update_traces(textfont_size=10)\nfig.show()","293ef83c":"# first make column of the openning move\ndf[\"opening_move\"]=df[\"moves\"].str.slice(0,2)","387fecac":"black=df[df[\"winner\"]==\"Black\"].opening_move.value_counts().nlargest(10)\nblack","c77a842a":"fig=px.bar(y=black.index,x=black.values,\n           title=\"most used oppening moves, black wins\".title(),\n            color_discrete_sequence=[\"#21618C\"],\n           labels={\"x\":\"Count \",\"y\":\"Move \"},\n      )\nfig.update_layout(\ntitle_font_color=\"#fff\",paper_bgcolor=\"#283747\",title_font_size=20,title_x=.5,font_color=\"#bbb\",\n    plot_bgcolor=\"#F4F6F7\",legend_title_font_size=17,legend_title_font_color=\"#fff\",\n    legend_title_text=\"Game winner\")\nfig.update_yaxes(showgrid=False,visible=True,title=\"Opening Moves\",color=\"#fff\")\nfig.update_xaxes(showgrid=False,tickfont_size=9)\nfig.update_traces(textfont_size=1,visible=True)\nfig.update_traces(textfont_color=\"#333\",textposition='inside')\nfig.show()","4347642f":"white=df[df[\"winner\"]==\"White\"].opening_move.value_counts().nlargest(10)\nfig=px.bar(y=white.index,x=white.values,\n           title=\"most used oppening moves, White wins\".title(),\n            color_discrete_sequence=[\"#21618C\"],\n           labels={\"x\":\"Count \",\"y\":\"Move \"},\n      )\nfig.update_layout(\ntitle_font_color=\"#fff\",paper_bgcolor=\"#283747\",title_font_size=20,title_x=.5,font_color=\"#bbb\",\n    plot_bgcolor=\"#F4F6F7\",legend_title_font_size=17,legend_title_font_color=\"#fff\",\n    legend_title_text=\"Game winner\")\nfig.update_yaxes(showgrid=False,visible=True,title=\"Opening Moves\",color=\"#fff\")\nfig.update_xaxes(showgrid=False,tickfont_size=9,visible=True)\nfig.update_traces(textfont_size=10,textfont_color=\"#fff\",textposition='inside')\nfig.show()","7c8b79b2":"opening=df[\"opening_shortname\"].value_counts().nlargest(5)\nopening","95af93df":"fig=px.bar(y=opening.index,x=opening.values,\n           title=\"most used Oppenings\".title(),\n            color_discrete_sequence=[\"#21618C\"],\n           labels={\"x\":\"Count \",\"y\":\"Move \"},\n           text=opening.values\n      )\nfig.update_layout(\ntitle_font_color=\"#fff\",paper_bgcolor=\"#283747\",title_font_size=20,title_x=.5,font_color=\"#bbb\",\n    plot_bgcolor=\"#F4F6F7\",legend_title_font_size=17,legend_title_font_color=\"#fff\",\n    legend_title_text=\"Game winner\")\nfig.update_yaxes(showgrid=False,visible=True,title=\"Opening Moves\",color=\"#fff\")\nfig.update_xaxes(showgrid=False,tickfont_size=9,visible=False)\nfig.update_traces(textfont_size=10,textfont_color=\"#fff\",textposition='inside')\nfig.show()","85f15fc0":"df[\"winner\"].value_counts(normalize=True)","a496e495":"# making sample distribution from the data\nsample_distribution=[]\nfor _ in range(5000):\n    # making samples from the main data\n    sample=df.sample(len(df),replace=True)\n    diff=sample[\"winner\"].value_counts(normalize=True)[0]-sample[\"winner\"].value_counts(normalize=True)[1]\n    sample_distribution.append(diff)","26d3397b":"# ploting the sample distribution\nplt.figure(figsize=(8,8))\nsns.distplot(sample_distribution,kde=True,color=\"blue\")\nplt.title(\"distribution of portion difference between white winners and Black ones\")\nplt.axvline(np.percentile(sample_distribution,2.5)) \nplt.axvline(np.percentile(sample_distribution,97.5))","66dd776b":"np.percentile(sample_distribution,2.5),np.percentile(sample_distribution,97.5)","8f6d1120":"# the difference assuming the null hypothesis\nnull_diff=0\n# the std of the sample distribution\nstd= np.std(sample_distribution)\n# making the normal distribution using the sample std and null_diff\nnormal=np.random.normal(loc=0,scale=std,size=5000)","a9aa25cc":"plt.figure(figsize=(8,8))\nsns.distplot(normal,kde=True,color=\"blue\")\nplt.title(\"distribution of portion difference assuming the null hypothesis\")\n","4a590a78":"sample_statistic=(sample[\"winner\"].value_counts(normalize=True)[0])-(sample[\"winner\"].value_counts(normalize=True)[1])\nsample_statistic","a43c4d26":"# plot the statistic to make more under stadning\nplt.figure(figsize=(8,8))\nsns.distplot(normal,kde=True,color=\"blue\")\nplt.title(\"distribution of portion difference assuming the null hypothesis\")\nplt.axvline(sample_statistic)","4201b4ec":"p_value= (normal>sample_statistic).mean()\np_value","73ada9a5":"### <span style=\"color:red\"> What is the precentage of games wins by each player?","265f88d6":"## Second: Hypothesis Test\nfor the null hypothesis:\n- null hypothesis: portion of white winners <= portion of black winners. [difference =< 0]\n- alternative hypothesis: portion of white winners > portion of black winners. [difference >0]\n<p> what is the steps<\/p>\n- the distribution assuming the null hypothesis.\n- find the p-value: which is the probalility of getting the statistic or more extreme assuming the null hypothesis.","7bb104bf":"### what is the difference:\n- <span style=\"color:green\">statisic : <\/span> it is the measure that talks about the <span style=\"color:green\"> sample <\/sapn>\n- <span style=\"color:green\">parameter : <\/span> it is the measure that talks about the <span style=\"color:green\"> population <\/span> \n<p> It is the most important to make conclution about the data to see the effect on the total population not just the sample<\/p>\n<h4 style=\"color:red\"> what is the question here<\/h4>\n      <p> i want to know if the white player is more likely to win the game or not ?<\/p>\n      <p> or if the higher rank player is more likely to win the game? <\/p>\n <span style=\"color:red\"> for answering that question we need to make some techniques. <\/sapn>\n <p> I will use the follwing tquniques <\/p>\n <p style=\"color:#333\"> - Confidance Interval. <\/p>\n <p style=\"color:#333\"> - Hypothesis Test. <\/p>\n  \n","96446dd6":"#### now,Which opening move was most frequently used in games in which black won?","981d5932":"#### so , assuming the null hypothesis , what is the probalility of getting the statistic or more extreme [ p-value ]","74ef256f":"## in the previous section we only talke about the statistic\n## now , we will start talking about the parameter","6deb87fd":"### First: confidence Interval and Bootstraping\n- Bootstrap: is any test or metric that uses random sampling with replacement and falls under the broader class of resampling methods.\n#### start with the fisrt  question?\n#### the white player is more likely to win the game or not ?\n","cd6f6695":"#### what the plot is saying?\n- it says that we are sure by 95% that in general the diff in postion of is in the interval [ .03 , .05 ] and this means that\n<span style=\"color:red\"> the white winner is more likely to win the game,but by small amount<\/span>","23866e48":"### that's it. thanks .... waiting for your feedback","90dff8e9":"## <span style=\"color:red\">what is the  most significant opening technique?","7f4d63f4":"## measure some statistics","a5daa34e":"### <span style=\"color:red\"> How many times the winner was the one that has higher rate?","77dbfda5":"### on ther other hand ,Which opening move was most frequently used in games in which white won?","4803b0fb":"# Statistical Thinking.","e31c92b0":"# EDA \ud83d\udcca","5914eb7f":"### drop columns that has no need","34a4ac90":"### only form the plot , the p_value =0 so the \n- i regect the null hypothesis \n- <span style=\"color:red\">ans: the white winner is more likely to win the game,but by small amount\n","fe36e0bd":"## <span style=\"color:red\"> Which opening move was most frequently used in games in which black won? What about when white won?"}}