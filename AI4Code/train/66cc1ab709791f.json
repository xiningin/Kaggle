{"cell_type":{"055f81f3":"code","d313f0a1":"code","2418a87e":"code","f257e6f3":"code","485ac761":"code","9a347673":"code","f77f2351":"code","5de172c0":"code","7b483ffc":"code","8b467328":"code","e65ea66e":"code","2c1e8722":"code","bf515e0a":"code","8e03b359":"code","cbd9f707":"code","e5f824c7":"code","98e4acd7":"code","3859c2db":"code","d843dc62":"code","c7b018d0":"code","5af2b2b3":"code","aa0661da":"code","8afe4365":"code","6a88cf4a":"code","f3d73841":"code","80f9bbc3":"code","20e13de7":"code","a00cfff0":"code","8423ffd3":"code","e8d42fb0":"code","30439377":"code","d37998a0":"code","20b988bc":"code","28832376":"code","785d4095":"code","fecf5b53":"code","48d2c81c":"code","d7ae1cea":"code","d05c67f1":"code","4209acbe":"code","a327b60b":"code","a46038f6":"code","e345c73a":"code","66882e66":"code","1bf2610d":"code","f54f2451":"code","ce5ed31d":"code","ea043e5c":"code","a7b9152f":"code","7c9f2e75":"code","eb83d84d":"code","98966f49":"code","2d1834f3":"code","94e1261c":"code","fdc85fca":"code","7e389a98":"code","c0a45fcd":"code","936848dd":"code","d91606d4":"code","31092db1":"markdown","0130ebd3":"markdown","f4786f79":"markdown","0af4c312":"markdown","48f0d780":"markdown","a7024e3d":"markdown","730eecb7":"markdown","6c77156a":"markdown","7ff14bbc":"markdown","4c215c13":"markdown","229fa007":"markdown","9da070d1":"markdown","977915c3":"markdown"},"source":{"055f81f3":"#Gerekli olan k\u00fct\u00fcphanelerin import i\u015flemleri yap\u0131lm\u0131\u015ft\u0131r.\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\n\n#T\u00fcm sut\u00fcnlar\u0131 ve sat\u0131rlar\u0131 g\u00f6zlemlemek i\u00e7in kulland\u0131\u011f\u0131m\u0131z kod.\npd.set_option('display.max_columns', None); pd.set_option('display.max_rows', None);\n\n#virgulden sonra g\u00f6sterilecek olan say\u0131 say\u0131s\u0131\npd.set_option('display.float_format', lambda x: '%.0f' % x)\nimport matplotlib.pyplot as plt","d313f0a1":"#Veri seti okuma i\u015flemi ger\u00e7ekle\u015ftirildi.\ndf_2010_2011 = pd.read_excel(\"..\/input\/uci-online-retail-ii-data-set\/online_retail_II.xlsx\", sheet_name = \"Year 2010-2011\")","2418a87e":"#Veri seti boyutu b\u00fcy\u00fck oldu\u011fu i\u00e7in okuma i\u015flemi uzun s\u00fcrd\u00fc bu sebeple veri setini kopyalama i\u015flemi yapt\u0131k.\ndf = df_2010_2011.copy()","f257e6f3":"#Veri setine ait ilk 5 g\u00f6zlem birimine eri\u015ftik.\ndf.head()","485ac761":"#essiz \u00fcr\u00fcn say\u0131s\u0131 nedir?\ndf[\"Description\"].nunique()","9a347673":"#hangi \u00fcr\u00fcnden ka\u00e7ar tane var?\ndf[\"Description\"].value_counts().head()","f77f2351":"#en \u00e7ok sipari\u015f edilen \u00fcr\u00fcn hangisi?\ndf.groupby(\"Description\").agg({\"Quantity\":\"sum\"}).head()","5de172c0":"#yukar\u0131daki \u00e7\u0131kt\u0131y\u0131 nas\u0131l s\u0131ralar\u0131z?\ndf.groupby(\"Description\").agg({\"Quantity\":\"sum\"}).sort_values(\"Quantity\", ascending = False).head()","7b483ffc":"#toplam ka\u00e7 fatura kesilmi\u015ftir?\ndf[\"Invoice\"].nunique()","8b467328":"#fatura basina toplam kac para kazanilmistir? (iki de\u011fi\u015fkeni \u00e7arparak yeni bir de\u011fi\u015fken olu\u015fturmak gerekmektedir)\n#ka\u00e7 para kazan\u0131ld\u0131\u011f\u0131n\u0131 bulmak i\u00e7in \"adet(Quantity) * fiyat(Price)\" yap\u0131lmas\u0131 gerekir. \ndf[\"TotalPrice\"] = df[\"Quantity\"]*df[\"Price\"]","e65ea66e":"#Dataframe \"Total Price\" de\u011fi\u015fkeni eklenmi\u015ftir. Bu de\u011fi\u015fken ilk 5 g\u00f6zlem \u00fczerinden incelenmi\u015ftir. \ndf.head()","2c1e8722":"#Fatura numaras\u0131na (Invoice) g\u00f6re gruplay\u0131p \"Total Price\" de\u011fi\u015fkenin toplam\u0131n\u0131 getirildi. \n#Bu \u015fekilde fatura ba\u015f\u0131na toplam ka\u00e7 para kazan\u0131ld\u0131 hesaplanm\u0131\u015ft\u0131r.\ndf.groupby(\"Invoice\").agg({\"TotalPrice\":\"sum\"}).head()","bf515e0a":"#en pahal\u0131 \u00fcr\u00fcnler hangileri?\n#\u00dcr\u00fcnlerin ismine g\u00f6re groupby yap\u0131larak \"Price\" de\u011fi\u015fkenin max de\u011feri al\u0131nm\u0131\u015ft\u0131r ve azalan \u015fekilde s\u0131ralanm\u0131\u015ft\u0131r.\ndf.groupby(\"Description\").agg({\"Price\":\"max\"}).sort_values(\"Price\", ascending = False).head()","8e03b359":"#en pahal\u0131 \u00fcr\u00fcnler hangileri? \n#Farkl\u0131 bir \u00e7\u00f6z\u00fcm olarak direk dataframe \u00fczerinden \"Price\" de\u011fi\u015fkenine g\u00f6re azalan \u015fekilde s\u0131ralama yap\u0131lmaktad\u0131r. \ndf.sort_values(\"Price\", ascending = False).head()","cbd9f707":"#hangi \u00fclkeden kac sipari\u015f geldi?\n#\u00dclke kategorik bir de\u011fi\u015fken oldu\u011fu i\u00e7in kategorik de\u011fi\u015fkenlerin s\u0131n\u0131flar\u0131n\u0131 value_counts() fonksiyonu ile sayd\u0131rabiliriz.\ndf[\"Country\"].value_counts().head()","e5f824c7":"#hangi \u00fclke ne kadar kazand\u0131rd\u0131?\n#\u00dclkelere g\u00f6re groupby yap\u0131larak \"Total Price\" de\u011fi\u015fkenini toplam\u0131 al\u0131narak hangi \u00fclke ne kadar b\u0131rakm\u0131\u015f \u00f6\u011frenilmi\u015ftir.\ndf.groupby(\"Country\").agg({\"TotalPrice\":\"sum\"}).sort_values(\"TotalPrice\", ascending = False).head()","98e4acd7":"#en \u00e7ok iade alan \u00fcr\u00fcn hangisidir?\n#Invoice de\u011fi\u015fkeninde yer alan kodlar ba\u015f\u0131nda \"C\" ifadesi iade anlam\u0131na gelmektedir.\n#Veri setinde \u015fu anda na de\u011ferler oldu\u011fu i\u00e7in str.contains komutu i\u00e7inde na de\u011ferlerini False olarak tan\u0131mlay\u0131p g\u00f6rmezden gel diyoruz.\n#Adet i\u015flemi i\u00e7in de \"Quantity\" de\u011fi\u015fkenini azalan \u015fekilde s\u0131ralarsak yakalad\u0131\u011f\u0131m\u0131z Invoice de\u011fi\u015fkenine g\u00f6re en \u00e7ok iadeleri buluruz.\nreturned = df[df[\"Invoice\"].str.contains(\"C\",na=False)]\nreturned.sort_values(\"Quantity\", ascending = True).head()","3859c2db":"# Hi\u00e7 eksik g\u00f6zlem var m\u0131 sorusunu sormaktad\u0131r.\ndf.isnull().sum()","d843dc62":"# Elimdeki veri setinde yakla\u015f\u0131k olarak 500000 g\u00f6zlemden olu\u015fan bir veri seti var bu nedenle eksik g\u00f6zlemleri silebilirim.\ndf.dropna(inplace = True)","c7b018d0":"#Silme i\u015fleminden sonra tekrardan kontrol ediyorum eksik g\u00f6zlem var m\u0131?\ndf.isnull().sum()","5af2b2b3":"#Boyut bilgisine eri\u015filmektedir.\ndf.shape","aa0661da":"#\u00c7eyrekliklerini(Kartiller) kendimiz belirleyerek betimsel istatistiklere bak\u0131lmaktad\u0131r. Veri seti hakk\u0131nda incelemeler yap\u0131lmaktad\u0131r.\ndf.describe([0.05,0.01,0.25,0.50,0.75,0.80,0.90,0.95,0.99]).T","8afe4365":"# Ayk\u0131r\u0131 g\u00f6zlem analizinde en yayg\u0131n kullan\u0131lan method bir alt limit ve \u00fcst limit belirleyerek bask\u0131lamakt\u0131r.\n# Burada 1. ve 3. \u00e7eyreklikler g\u00f6z \u00f6n\u00fcne al\u0131narak IQR hesaplan\u0131r ve alt, \u00fcst s\u0131n\u0131rlar burada belirlenir. \n# Neden sadece bu de\u011fi\u015fkenler \u00e7\u00fcnk\u00fc yukar\u0131daki kodda Customer ID hari\u00e7 ayk\u0131r\u0131 g\u00f6zlem analizi oldu\u011fu saptanm\u0131\u015ft\u0131r.\n#Burada ayk\u0131r\u0131 g\u00f6zlemlere ucundan de\u011finilerek bu problem ortadan kald\u0131r\u0131lm\u0131\u015ft\u0131r.\nfor feature in [\"Quantity\",\"Price\",\"TotalPrice\"]:\n\n    Q1 = df[feature].quantile(0.01)\n    Q3 = df[feature].quantile(0.99)\n    IQR = Q3-Q1\n    upper = Q3 + 1.5*IQR\n    lower = Q1 - 1.5*IQR\n\n    if df[(df[feature] > upper) | (df[feature] < lower)].any(axis=None):\n        print(feature,\"yes\")\n        print(df[(df[feature] > upper) | (df[feature] < lower)].shape[0])\n    else:\n        print(feature, \"no\")","6a88cf4a":"df.head()","f3d73841":"df.info()","80f9bbc3":"df.shape","20e13de7":"#Al\u0131\u015fveri\u015fin yap\u0131ld\u0131\u011f\u0131 ilk g\u00fcn\ndf[\"InvoiceDate\"].min()","a00cfff0":"#Al\u0131\u015fveri\u015fin yap\u0131ld\u0131\u011f\u0131 son g\u00fcn\ndf[\"InvoiceDate\"].max()","8423ffd3":"#Analiz i\u00e7in gerekli import i\u015flemi yap\u0131larak max de\u011fer analizi yapt\u0131\u011f\u0131m\u0131z g\u00fcn olarak belirlenmi\u015ftir. Bu de\u011fer today_date olarak atanm\u0131\u015ft\u0131r.\nimport datetime as dt\ntoday_date = dt.datetime(2011,12,9)\ntoday_date","e8d42fb0":"#Customer ID de\u011ferine g\u00f6re groupby i\u015flemi yap\u0131l\u0131p Invoice Date de\u011fi\u015fkenin max de\u011ferleri getirildi. \n#Yani son al\u0131\u015fveri\u015f yap\u0131lan tarihler geldi. M\u00fc\u015fteri ID sine g\u00f6re son yap\u0131lan al\u0131\u015fveri\u015f tarihlerine ula\u015ft\u0131k. \ndf.groupby(\"Customer ID\").agg({\"InvoiceDate\":\"max\"}).head()","30439377":"# Customer ID de\u011fi\u015fkeni stringe d\u00f6n\u00fc\u015ft\u00fcr\u00fclm\u00fc\u015ft\u00fcr.\ndf[\"Customer ID\"] = df[\"Customer ID\"].astype(int)","d37998a0":"# Analizin yap\u0131ld\u0131\u011f\u0131 g\u00fcn - Son al\u0131\u015fveri\u015f yap\u0131lan tarih i\u015flemi yap\u0131ld\u0131\u011f\u0131nda recency de\u011ferini yakalad\u0131k.\ntemp_df = (today_date - df.groupby(\"Customer ID\").agg({\"InvoiceDate\":\"max\"}))\ntemp_df.head()","20b988bc":"# Analiz yap\u0131ld\u0131 ve burada Invo\u0131ceDate de\u011fi\u015fkeninin ad\u0131n\u0131 Recency olarak de\u011fi\u015ftirilmektedir.\ntemp_df.rename(columns={\"InvoiceDate\": \"Recency\"}, inplace = True)\ntemp_df.head()","28832376":"#Yukar\u0131da yap\u0131lan i\u015flem sonucunda Recency de\u011fi\u015fkeninde saat de\u011ferlerini silmek istiyorum.\n#Bunu yapabilmek i\u00e7in, daha \u00f6nce buras\u0131 Invoice Date de\u011fi\u015fkeni ve veri tipi datetime oldu\u011fu i\u00e7in days'leri se\u00e7ip saatleri silebiliriz. \nrecency_df = temp_df[\"Recency\"].apply(lambda x: x.days)\nrecency_df.head()","785d4095":"#Customer ID ye g\u00f6re ve Invoice'a gruopby yap ve Invoice de\u011fi\u015fkenini say.\ntemp_df = df.groupby([\"Customer ID\",\"Invoice\"]).agg({\"Invoice\":\"count\"})\ntemp_df.head()","fecf5b53":"#Customer ID ye g\u00f6re gruopby yap ve Invoice de\u011fi\u015fkenini topla. Yani her m\u00fc\u015fteri ka\u00e7 al\u0131\u015fveri\u015f yapm\u0131\u015f toplamda bunu bulmu\u015f oluyoruz.\ntemp_df.groupby(\"Customer ID\").agg({\"Invoice\":\"count\"}).head()","48d2c81c":"#Burada yukar\u0131da yapm\u0131\u015f oldu\u011fumuz i\u015flemi bir de\u011fi\u015fkene atay\u0131p \"Invoice\" yazan de\u011fi\u015fkeni de \"Frequency\" olarak de\u011fi\u015ftirip g\u00f6zlemliyoruz.\nfreq_df = temp_df.groupby(\"Customer ID\").agg({\"Invoice\":\"count\"})\nfreq_df.rename(columns={\"Invoice\": \"Frequency\"}, inplace = True)\nfreq_df.head()","d7ae1cea":"monetary_df = df.groupby(\"Customer ID\").agg({\"TotalPrice\":\"sum\"})\nmonetary_df.head()","d05c67f1":"#Sut\u00fcn adland\u0131rmas\u0131 de\u011fi\u015ftirildi.\nmonetary_df.rename(columns = {\"TotalPrice\": \"Monetary\"}, inplace = True)\nmonetary_df.head()","4209acbe":"# Her bir parametrenin boyutlar\u0131na bak\u0131ld\u0131. \nprint(recency_df.shape,freq_df.shape,monetary_df.shape)","a327b60b":"#Parametreleri bir dataframe olarak concat fonksiyonu yard\u0131m\u0131 ile birle\u015ftirdik.\nrfm = pd.concat([recency_df, freq_df, monetary_df],  axis=1)\nrfm.head()","a46038f6":"# Buradaki skorlama i\u015flemi pandas i\u00e7inde .qcut fonk. kullan\u0131larak b\u00f6l\u00fcnm\u00fc\u015ft\u00fcr.\nrfm[\"RecencyScore\"] = pd.qcut(rfm['Recency'], 5, labels = [5, 4, 3, 2, 1])\nrfm[\"FrequencyScore\"] = pd.qcut(rfm['Frequency'].rank(method = \"first\"), 5, labels = [1,2,3,4,5])\nrfm[\"MonetaryScore\"] = pd.qcut(rfm['Monetary'], 5, labels = [1,2,3,4,5])","e345c73a":"#Skorlama i\u015flemi sonras\u0131 dataframe ilk 5 g\u00f6zlem biriminin incelenmesi\nrfm.head()","66882e66":"#Skorlar\u0131 yanyana yazd\u0131rmak i\u00e7in yap\u0131lmaktad\u0131r.\n(rfm['RecencyScore'].astype(str) + \n rfm['FrequencyScore'].astype(str) + \n rfm['MonetaryScore'].astype(str)).head()","1bf2610d":"#Dataframe e RFM_SCORE sut\u00fcn\u00fc eklenmi\u015ftir.\nrfm[\"RFM_SCORE\"] = rfm['RecencyScore'].astype(str) + rfm['FrequencyScore'].astype(str) + rfm['MonetaryScore'].astype(str)\nrfm.head()","f54f2451":"#Betimsel istatistikleri incelenerek baz\u0131 yorumlar yap\u0131lmaktad\u0131r.\nrfm.describe().T","ce5ed31d":"#En iyi m\u00fc\u015fteriler g\u00f6sterilmektedir.\nrfm[rfm[\"RFM_SCORE\"] == \"555\"].head()","ea043e5c":"#En k\u00f6t\u00fc m\u00fc\u015fteriler g\u00f6sterilmektedir.\nrfm[rfm[\"RFM_SCORE\"] == \"111\"].head()","a7b9152f":"#Burada rfm skorlar\u0131na g\u00f6re s\u0131n\u0131flar atanmaktad\u0131r. Bu s\u0131n\u0131flar\u0131n hangi skor aral\u0131\u011f\u0131nda olaca\u011f\u0131 a\u015fa\u011f\u0131da belirtilmi\u015ftir. \n#\u00d6rnek olarak Hibernating s\u0131n\u0131f\u0131 \u015fu skor de\u011ferlerine sahiptir. \n#Recency de\u011feri 1-2, Frequency de\u011feri 1-2 olanlard\u0131r di\u011fer s\u0131n\u0131flarda bu \u015fekilde okunmaktad\u0131r.\n#Buraya sadece Recency ve Frequency eklenmesinin sebebi tabloda sadece bu iki parametre yer ald\u0131\u011f\u0131 i\u00e7in ancak Monetary de yanlar\u0131na eklenebilir.\nseg_map = {\n    r'[1-2][1-2]': 'Hibernating',\n    r'[1-2][3-4]': 'At Risk',\n    r'[1-2]5': 'Can\\'t Loose',\n    r'3[1-2]': 'About to Sleep',\n    r'33': 'Need Attention',\n    r'[3-4][4-5]': 'Loyal Customers',\n    r'41': 'Promising',\n    r'51': 'New Customers',\n    r'[4-5][2-3]': 'Potential Loyalists',\n    r'5[4-5]': 'Champions'\n}","7c9f2e75":"#Yukar\u0131da tan\u0131mlanan seg_map'i dataframe dahil etme i\u015flemi yap\u0131lm\u0131\u015ft\u0131r.\nrfm['Segment'] = rfm['RecencyScore'].astype(str) + rfm['FrequencyScore'].astype(str)\nrfm['Segment'] = rfm['Segment'].replace(seg_map, regex=True)\nrfm.head()","eb83d84d":"#Segmentlere g\u00f6re groupby yaparak elde edilen (kodda belirtilen) 3 parametrenin ortalama ve ka\u00e7 adet oldu\u011funu getirmektedir. \nrfm[[\"Segment\", \"Recency\",\"Frequency\",\"Monetary\"]].groupby(\"Segment\").agg([\"mean\",\"count\"]).head()","98966f49":"#Bu segmentteki grup dikkat gerektiren grublardan birisiydi. Bunlar\u0131 yakalama i\u015flemi yap\u0131lm\u0131\u015ft\u0131r.\nrfm[rfm[\"Segment\"] == \"Need Attention\"].head()","2d1834f3":"#Yeni m\u00fc\u015fterilere ait Customer ID (indeks) de\u011ferlerine eri\u015filmi\u015ftir.\n#Bu de\u011ferler m\u00fc\u015fteri departman\u0131 ile payla\u015f\u0131l\u0131p yeni m\u00fc\u015fterilere \u00f6zel promosyonlar ve mailler bu ID'ler sayesinde at\u0131labilir.\nrfm[rfm[\"Segment\"] == \"New Customers\"].index","94e1261c":"#Dikkat gerektiren m\u00fc\u015fterilerin Customer ID (indeks) de\u011ferlerine eri\u015filmi\u015ftir.\n#Bu de\u011ferler m\u00fc\u015fteri departman\u0131 ile payla\u015f\u0131l\u0131p dikkat gerektiren m\u00fc\u015fterilere \u00f6zel promosyonlar ve mailler bu ID'ler sayesinde at\u0131labilir.\nrfm[rfm[\"Segment\"] == \"Need Attention\"].index","fdc85fca":"#Yeni bir dataframe olu\u015fturularak i\u00e7erisine Need Attention grubuna ait m\u00fc\u015fterilerin ID bilgileri at\u0131lm\u0131\u015ft\u0131r.\nnew_df = pd.DataFrame()\nnew_df[\"NeedAttentionID\"] = rfm[rfm[\"Segment\"] == \"Need Attention\"].index","7e389a98":"#\u0130lk 5 g\u00f6zlem g\u00f6zlemlenmi\u015ftir.\nnew_df.head()","c0a45fcd":"#Atanan bu ID'ler excel \u00e7\u0131kt\u0131s\u0131 al\u0131narak m\u00fc\u015fteri departman\u0131 ile payla\u015f\u0131lmaya haz\u0131r hale getirilmi\u015ftir.\nnew_df.to_excel(\"new_attention.xlsx\")","936848dd":"#Hangi segmentten ka\u00e7 adet bulunmakta ve %ka\u00e7\u0131n\u0131 olu\u015fturmakta.\nsegments_counts = rfm['Segment'].value_counts().sort_values(ascending=True)\n\nfig, ax = plt.subplots()\n\nbars = ax.barh(range(len(segments_counts)),\n              segments_counts,\n              color='silver')\nax.set_frame_on(False)\nax.tick_params(left=False,\n               bottom=False,\n               labelbottom=False)\nax.set_yticks(range(len(segments_counts)))\nax.set_yticklabels(segments_counts.index)\n\nfor i, bar in enumerate(bars):\n        value = bar.get_width()\n        if segments_counts.index[i] in ['Can\\'t loose']:\n            bar.set_color('firebrick')\n        ax.text(value,\n                bar.get_y() + bar.get_height()\/2,\n                '{:,} ({:}%)'.format(int(value),\n                                   int(value*100\/segments_counts.sum())),\n                va='center',\n                ha='left'\n               )\n\nplt.show()","d91606d4":"rfm[[\"Segment\", \"Recency\",\"Frequency\",\"Monetary\"]].groupby(\"Segment\").agg([\"mean\",\"count\",\"max\"]).head(20)","31092db1":"# Frequency Score Hesaplama\n**Frequency (S\u0131kl\u0131k): Toplam sat\u0131n alma say\u0131s\u0131**\n\nYap\u0131lacak olan i\u015flem Customer ID de\u011fi\u015fkenine g\u00f6re groupby yapmak ve Invoice de\u011fi\u015fkeninin toplam\u0131 getirilerek Frequency Score hesaplanm\u0131\u015f olacakt\u0131r. ","0130ebd3":"# Data Understanding ","f4786f79":"# Ayk\u0131r\u0131 G\u00f6zlem Analizi","0af4c312":"# Data Preparation\n\n# Eksik G\u00f6zlem Analizi","48f0d780":"RFM Analizinde yayg\u0131n olarak kullan\u0131lmakta olan bir tablo bulunmaktad\u0131r. A\u015fa\u011f\u0131da bunu sizinle payla\u015fmaktay\u0131m. Genelde bu tablolarda 2 parametre kullan\u0131lmaktad\u0131r. Bunlar Recency ve Frequency de\u011ferleridir. Burada bu parametrelere de\u011ferler verilmektedir. De\u011ferler g\u00f6r\u00fcld\u00fc\u011f\u00fc \u00fczere 1 ile 5 aras\u0131nda olan de\u011ferlerdir. 5 \u00e7ok iyi, 1 ise \u00e7ok k\u00f6t\u00fc anlam\u0131na gelmektedir. Bu tabloda g\u00f6r\u00fcld\u00fc\u011f\u00fc \u00fczere m\u00fc\u015fteriler segmentlere ayr\u0131lm\u0131\u015f durumdad\u0131r. Parametre de\u011ferlerine bak\u0131larak m\u00fc\u015fterilerin segmentleri belirlenmektedir. Bizlerin burada dikkat etmesi gereken grup asl\u0131nda herkesin d\u00fc\u015f\u00fcnd\u00fc\u011f\u00fc \u015fampiyonlar grubu de\u011fil bu grup zaten s\u00fcrekli olarak bizi ziyaret ediyor ve al\u0131\u015fveri\u015f yap\u0131p para b\u0131rak\u0131yor. Burada en dikkat gerektiren s\u0131n\u0131f \"can't loose them\" s\u0131n\u0131f\u0131d\u0131r. \u00c7\u00fcnk\u00fc bu ki\u015filer bizi nerdeyse hi\u00e7 ziyaret etmiyor ve \u00e7ok fazla al\u0131\u015fveri\u015f yap\u0131yor yani frequency de\u011ferleri 5 g\u00f6rd\u00fc\u011f\u00fcn\u00fcz \u00fczere bu nedenle bu s\u0131n\u0131fa odaklanmam\u0131z gerekiyor. \u00c7\u00fcnk\u00fc bu grupta yer alan m\u00fc\u015fteriler bizi b\u0131rakt\u0131 b\u0131rakacak bu nedenle dikkat gerektirmekte ve bu gruptaki m\u00fc\u015fterileri gerekli analizler yaparak bize kazand\u0131rmal\u0131y\u0131z. Ayn\u0131 zamanda bir de \"need attention\" grubu bulunmakta Recency de\u011feri 3, Frequency de\u011feri 3 olan gruba ve uyku halinde olan gruba \u00f6zel mailler atarak, promosyonlar yaparak canland\u0131r\u0131p tabloda sa\u011fa veya yukar\u0131ya do\u011fru \u00e7\u0131karmam\u0131z gerekmektedir. K\u0131sacas\u0131 bu tabloyu bu \u015fekilde a\u00e7\u0131klayabiliriz. RFM analizinin temel mant\u0131\u011f\u0131n\u0131n anlat\u0131ld\u0131\u011f\u0131 tablo bu tablodur.  \n\n![rfm-segments.png](attachment:rfm-segments.png)\n\n\nA\u015fa\u011f\u0131daki yer alan kod par\u00e7as\u0131nda elde etti\u011fimiz parametreleri skorlara ay\u0131rmam\u0131z gerekmektedir. Az \u00f6nce yukar\u0131da tabloyu anlat\u0131rken de\u011findi\u011fim de\u011ferlerden bahsediyorum. Burada dikkatinizi \u00e7eken nokta Recency de\u011feri olacakt\u0131r. \u00c7\u00fcnk\u00fc tersten bir skorlama yap\u0131lmaktad\u0131r. Bunun sebebi ise \u00f6rne\u011fin siz analiz yap\u0131lan g\u00fcnden 1 g\u00fcn \u00f6nce bizleri ziyaret ederek al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131n\u0131z\u0131, di\u011fer m\u00fc\u015fterimiz ise 100 g\u00fcn \u00f6nce bizleri ziyaret ederek al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131n\u0131 d\u00fc\u015f\u00fcnelim. Bu durumda Recency de\u011feri **Analiz yap\u0131lan g\u00fcn\u00fcn (Bug\u00fcn\u00fcn) tarihi - Son sat\u0131n alma tarihi** form\u00fcl\u00fc ile hesapland\u0131\u011f\u0131nda burada siz bizi 1 g\u00fcn \u00f6nce ziyaret edip al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131n\u0131z hesaplanacakt\u0131r. Yani yak\u0131n zamanda al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131n\u0131z i\u00e7in **recency puan\u0131n\u0131z: 5** olacakt\u0131r. Di\u011fer m\u00fc\u015fterimiz ise analiz yap\u0131lan g\u00fcnden 100 g\u00fcn \u00f6nce al\u0131\u015fveri\u015f yapt\u0131\u011f\u0131 i\u00e7in **recency puan\u0131 1 olacakt\u0131r.** Bu nedenle recency de\u011feri d\u00fc\u015f\u00fck olana 5 puan, recency de\u011feri y\u00fcksek olana 1 puan verilmektedir. Di\u011fer iki parametre zaten sat\u0131\u015f artt\u0131k\u00e7a ve \u00f6denen toplam para artt\u0131k\u00e7a skor de\u011ferleri de artacakt\u0131r. ","a7024e3d":"# RFM Skorlar\u0131 ile M\u00fc\u015fteri Segmentasyonu\n\nRecency, Frequency, Monetary ifadelerinin ba\u015f harflerinden olu\u015fur.\n\nM\u00fc\u015fterilerin sat\u0131n alma al\u0131\u015fkanl\u0131klar\u0131 \u00fczerinden pazarlama ve sat\u0131\u015f stratejileri belirlemeye yard\u0131mc\u0131 olan bir tekniktir.\n\n- Recency (yenilik): M\u00fc\u015fterinin son sat\u0131n almas\u0131ndan bug\u00fcne kadar ge\u00e7en s\u00fcre\n\n    -- Di\u011fer bir ifadesiyle \u201cM\u00fc\u015fterinin son temas\u0131ndan bug\u00fcne kadar ge\u00e7en s\u00fcre\u201d dir.\n\n    -- Bug\u00fcn\u00fcn tarihi - Son sat\u0131n alma\n\n    -- \u00d6rnek verecek olursak bug\u00fcn bu analizi yap\u0131yorsak bug\u00fcn\u00fcn tarihi - son \t\u00fcr\u00fcn sat\u0131n alma tarihi.\n\n    -- Bu \u00f6rne\u011fin 20 olabilir 100 olabilir. Biliriz ki 20 olan m\u00fc\u015fteri daha s\u0131cakt\u0131r. Daha son zamanlarda bizimle temas\u0131 olmu\u015ftur.\n\n- Frequency (S\u0131kl\u0131k): Toplam sat\u0131n alma say\u0131s\u0131.\n\n- Monetary (Parasal De\u011fer): M\u00fc\u015fterinin yapt\u0131\u011f\u0131 toplam harcama.","730eecb7":"# Pandas k\u00fct\u00fcphanesi ile veriyi anlamaya \u00e7al\u0131\u015f\u0131n\u0131z.","6c77156a":"# Customer Segmentation\n\nBir e-ticaret \u015firketi m\u00fc\u015fterilerini segmentlere ay\u0131r\u0131p bu segmentlere g\u00f6re pazarlama stratejileri belirlemek istiyor.\n\nBuna y\u00f6nelik olarak m\u00fc\u015fterilerin davran\u0131\u015flar\u0131n\u0131 tan\u0131mlayaca\u011f\u0131z ve bu davran\u0131\u015flarda \u00f6beklenmelere g\u00f6re gruplar olu\u015fturaca\u011f\u0131z.\n\nYani ortak davran\u0131\u015flar sergileyenleri ayn\u0131 gruplara alaca\u011f\u0131z ve bu gruplara \u00f6zel sat\u0131\u015f ve pazarlama teknikleri geli\u015ftirmeye \u00e7al\u0131\u015faca\u011f\u0131z.\n\n**Veri Seti Hikayesi**\n\nhttps:\/\/archive.ics.uci.edu\/ml\/datasets\/Online+Retail+II\n\nOnline Retail II isimli veri seti \u0130ngiltere merkezli online bir sat\u0131\u015f ma\u011fazas\u0131n\u0131n 01\/12\/2009 - 09\/12\/2011 tarihleri aras\u0131ndaki sat\u0131\u015flar\u0131n\u0131 i\u00e7eriyor.\n\nBu \u015firket hediyelik e\u015fya sat\u0131yor. Promosyon \u00fcr\u00fcnleri gibi d\u00fc\u015f\u00fcnebilir.\n\nM\u00fc\u015fterilerinin \u00e7o\u011fu da toptanc\u0131.\n\n**De\u011fi\u015fkenler**\n\n- **InvoiceNo**: Fatura numaras\u0131. Her i\u015fleme yani faturaya ait e\u015fsiz numara. E\u011fer bu kod C ile ba\u015fl\u0131yorsa i\u015flemin iptal edildi\u011fini ifade eder.\n- **StockCode**: \u00dcr\u00fcn kodu. Her bir \u00fcr\u00fcn i\u00e7in e\u015fsiz numara.\n- **Description**: \u00dcr\u00fcn ismi\n- **Quantity**: \u00dcr\u00fcn adedi. Faturalardaki \u00fcr\u00fcnlerden ka\u00e7ar tane sat\u0131ld\u0131\u011f\u0131n\u0131 ifade etmektedir.\n- **InvoiceDate**: Fatura tarihi ve zaman\u0131. \n- **UnitPrice**: \u00dcr\u00fcn fiyat\u0131 (Sterlin cinsinden)\n- **CustomerID**: E\u015fsiz m\u00fc\u015fteri numaras\u0131\n- **Country**: \u00dclke ismi. M\u00fc\u015fterinin ya\u015fad\u0131\u011f\u0131 \u00fclke.\n\n","7ff14bbc":"# Recency Score Hesaplama\n\n**Recency Score = Bug\u00fcn\u00fcn tarihi - Son sat\u0131n alma**\n\nBug\u00fcn nedir? \u015eimdi e\u011fer g\u00fcn\u00fcm\u00fcz tarihini al\u0131rsak bu durumda arada \u00e7ok ciddi bir fark olacakt\u0131r.\n\nBu sebeple \u00f6rnek olmas\u0131 a\u00e7\u0131s\u0131ndan kendimize bu veri setinin yap\u0131s\u0131na g\u00f6re bir \"bug\u00fcn\" belirleyelim.\n\nBu g\u00fcn\u00fc veri setinin maksimum g\u00fcn\u00fc olarak belirleyebiliriz.\n\nSon kay\u0131t d\u00fc\u015f\u00fclen g\u00fcne g\u00f6re segmentasyon yapabiliriz.\n\nYap\u0131lacak olan i\u015flem analizin yap\u0131laca\u011f\u0131 g\u00fcnden, Customer ID de\u011fi\u015fkenine g\u00f6re groupby yapmak ve InvoiceDate de\u011fi\u015fkeninin maksimum de\u011ferleri al\u0131narak bu iki de\u011feri birbirinden \u00e7\u0131kararak Recency Score hesaplanm\u0131\u015f olacakt\u0131r. ","4c215c13":"# Monetary Score Hesaplama\n**Monetary (Parasal De\u011fer): M\u00fc\u015fterinin yapt\u0131\u011f\u0131 toplam harcama.**\n\nYap\u0131lacak olan i\u015flem M\u00fc\u015fteri denildi\u011fi i\u00e7in Customer ID de\u011fi\u015fkenine g\u00f6re groupby i\u015flemi yap\u0131l\u0131p TotalPrice de\u011fi\u015fkeninin toplam\u0131 getirilerek Monetary Score hesaplanm\u0131\u015f olacakt\u0131r.","229fa007":"RFM Analizi i\u00e7in gerekli olan parametreler hesaplanm\u0131\u015ft\u0131r. \u015eimdi bu parametereler \u00fczerinden baz\u0131 i\u015flemler ve yorumlar yap\u0131yor olaca\u011f\u0131z. ","9da070d1":"Yorumlar\u0131m\u0131 yukar\u0131da yer alan betimsel istatistiklere g\u00f6re ger\u00e7ekle\u015ftirece\u011fim. Se\u00e7ilecek olan 4 segment \u015funlard\u0131r;\n\n- **Champions**\n- **About to Sleep**\n- **Need Attention**\n- **Can't Loose**\n\n**Champions**\n- bu segmentte 665 ki\u015fi bulunmakta,\n- ortalama olarak en son al\u0131\u015fveri\u015fleri 4 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f,\n- al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 15, toplamda 248 al\u0131\u015fveri\u015fleri var,\n- 279489 dolar\/TL harcamalar\u0131 olmu\u015f.\n\n**About to Sleep**\n- bu segmentte 369 ki\u015fi bulunmakta,\n- ortalama olarak en son al\u0131\u015fveri\u015fleri 51 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f,\n- al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 1, toplamda 2 al\u0131\u015fveri\u015fleri var,\n- 6208 dolar\/TL harcamalar\u0131 olmu\u015f.\n\n**Need Attention**\n- bu segmentte 190 ki\u015fi bulunmakta,\n- ortalama olarak en son al\u0131\u015fveri\u015fleri 48 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f,\n- al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 3, toplamda 4 al\u0131\u015fveri\u015fleri var,\n- 3546 dolar\/TL harcamalar\u0131 olmu\u015f.\n\n**Can't Loose**\n- bu segmentte 68 ki\u015fi bulunmakta,\n- ortalama olarak en son al\u0131\u015fveri\u015fleri 132 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f,\n- al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 10, toplamda 35 al\u0131\u015fveri\u015fleri var,\n- 10217 dolar\/TL harcamalar\u0131 olmu\u015f.\n\n**AKS\u0130YON**\n\n**Champions** segmentindeki ki\u015filer ile ileti\u015fim kurmak kendilerini de\u011ferli ve takdir edilmi\u015f ki\u015filer olarak hissettirecektir. Bu m\u00fc\u015fteriler muhtemelen toplam gelirlerin orant\u0131s\u0131z olarak y\u00fcksek bir y\u00fczdesini olu\u015fturmaktad\u0131r ve bu nedenle onlar\u0131 mutlu etmeye odaklanmak en b\u00fcy\u00fck \u00f6ncelik olmal\u0131d\u0131r. Bireysel tercihlerini ve yak\u0131nl\u0131klar\u0131n\u0131 daha fazla analiz ederek, daha ki\u015fiselle\u015ftirilmi\u015f mesajla\u015fma i\u00e7in ek f\u0131rsatlar sa\u011flayacakt\u0131r. \u00d6rne\u011fin do\u011fum g\u00fcnlerini kutlama gibi ki\u015fisel mesajlar g\u00f6nderilebilir. Yeni \u00fcr\u00fcnler i\u00e7in erken benimsiyor olabilirler onlara yeni \u00fcr\u00fcnlerimizi \u00fccretsiz olarak ileterek markam\u0131z\u0131 tan\u0131tmam\u0131za yard\u0131mc\u0131 olabilirler.\n\n**About to sleep** segmentindeki ki\u015filere de\u011ferli kaynaklar\u0131m\u0131z\u0131 payla\u015farak, pop\u00fcler \u00fcr\u00fcnleri \/ yenilemeleri indirimli olarak \u00f6nerip, onlarla yeniden ba\u011flant\u0131 kurup m\u00fc\u015fterimiz yapabiliriz.\n\n**Need Attention** segmentindeki ki\u015filere s\u0131n\u0131rl\u0131 s\u00fcreli teklifler yapabiliriz bu onlar\u0131 bizimle al\u0131\u015fveri\u015f yapmaya do\u011fru itecektir, ge\u00e7mi\u015f sat\u0131n al\u0131mlara dayanarak tavsiye \u00fcr\u00fcnlerde bulunabiliriz. Bu \u015fekilde onlar\u0131 yeniden etkinle\u015ftirerek al\u0131\u015fveri\u015f yapmalar\u0131n\u0131 sa\u011flayabiliriz.\n\n**Can't Loose** \u00f6nem verilmesi gerekilen segmentlerden birisidir. Bu segment bizim kaybetmek istemedi\u011fimiz segmenttir. Son al\u0131\u015fveri\u015fleri 132 g\u00fcn \u00f6nce yap\u0131lm\u0131\u015f olmas\u0131 k\u00f6t\u00fc bir sonu\u00e7tur. Ancak toplam yap\u0131lan al\u0131\u015fveri\u015f say\u0131s\u0131 olduk\u00e7a y\u00fcksek bir rakamd\u0131r 35 adet toplam sat\u0131\u015f olmu\u015f. Asl\u0131nda al\u0131\u015fveri\u015f yap\u0131yorlar ama tek seferde veya birka\u00e7 seferde girip toplu bir \u015fekilde al\u0131\u015fveri\u015f yap\u0131p uzun bir s\u00fcre tekrar al\u0131\u015fveri\u015f yapm\u0131yorlar. Bu segmentte yer alan ki\u015filere yenilemeler, daha yeni \u00fcr\u00fcnleri onlara \u00f6nererek veya bu s\u0131n\u0131fa \u00f6zel promosyonlar, k\u00fc\u00e7\u00fck \u00e7apl\u0131 para puanlar verilerek geri kazanabiliriz, burada yer alan ki\u015fileri rekabete sokmamal\u0131y\u0131z, onlarla konu\u015farak mailler ve smsler atarak kazanabiliriz. Neyin yanl\u0131\u015f gitti\u011fini \u00f6\u011frenmek i\u00e7in anketler yaparak anket sonu\u00e7lar\u0131ndan d\u00fczeltmeler yap\u0131labiliriz.","977915c3":"# Yorumlar ve Al\u0131nacak olan Aksiyonlar"}}