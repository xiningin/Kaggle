{"cell_type":{"dd1b03c3":"code","d1fe412b":"code","f5f529e1":"code","6475ec61":"code","76b49cb3":"code","fc2b7da8":"code","c0ea49a1":"code","af5b50cc":"code","60c1631d":"code","070f6275":"code","58f27c21":"code","3bad088e":"code","31463880":"code","e4feb26e":"code","0a9d5b33":"code","5eb02968":"code","b161cb3c":"code","e7259496":"code","8146a771":"code","5d9926e3":"code","6cd8b16f":"code","6831a6bd":"code","67b1fc82":"code","8e8d727e":"code","cd669ac3":"code","554b7c39":"code","c740e679":"code","9aea6e0a":"code","8c9906db":"code","1965d934":"code","4e9f6597":"code","adacd22a":"code","0413d7a2":"code","b0d8c97d":"code","3116bc00":"code","1b098e9f":"code","223eb3dc":"code","22084eef":"code","a640496a":"code","448a92d8":"code","100bbad5":"code","a923fe19":"code","ec7a49c5":"code","c0f4d3fd":"code","7db2b4ed":"code","d4fc4dcc":"code","4b4f88be":"code","62477dc2":"code","ed8a824c":"code","df0ebe97":"code","39f4dd1e":"code","6485b86a":"code","19bd4c75":"code","e661bfdd":"code","4f95d463":"code","1613016a":"code","8813c495":"code","99db96db":"code","50f9d564":"code","46d9a4f0":"code","0da032a0":"code","01319cdd":"code","5e9b3340":"code","d7990dd8":"code","01a41a4c":"code","ecbf9e6e":"code","75f8b644":"code","06d47cf4":"code","5a9396e1":"code","b6b9284a":"code","5b65a8f6":"code","57d778ac":"code","2b74b3f5":"code","f64c87d5":"code","932d0f69":"code","2e341dcb":"code","e1aab574":"code","edc35d89":"code","84290901":"code","5617a82a":"code","609f5f3f":"code","059e1126":"code","4ac8d79f":"code","8a0c3432":"code","d957ba58":"code","1ff3f00c":"code","959ea578":"code","40377509":"code","8f5ec15a":"code","3d6ce9d6":"code","d4f14ae8":"code","1032d122":"code","69c9e03f":"code","9fec850c":"code","a6943101":"code","8bc6431e":"code","b797831d":"code","b66ca818":"code","2bf71b98":"code","4e4a88b5":"code","259543ca":"code","12ed97e2":"markdown","506ab54e":"markdown","d25ca5c7":"markdown","58d643b0":"markdown","7d2050d3":"markdown","00471181":"markdown","2f28c3d4":"markdown","a8e56fc6":"markdown","5bc4d8dd":"markdown","ed36e65c":"markdown","be694673":"markdown","35f491b5":"markdown","7a1dad9a":"markdown","0acaf462":"markdown","9a7d5860":"markdown","62c09e7f":"markdown","a56f01a5":"markdown","c0ee82d5":"markdown","db2762af":"markdown","67988256":"markdown","1f07e965":"markdown","3175eaa2":"markdown","dcde116b":"markdown","4dbdff8c":"markdown","f4a185e7":"markdown","4a2aae44":"markdown","fcfa6ea0":"markdown","60feaa5d":"markdown","9d976681":"markdown","f47b40fe":"markdown","1651c10e":"markdown","22e90eba":"markdown","fceab4ea":"markdown","9e1ad68e":"markdown","0a944ccd":"markdown","4a040f71":"markdown","bafb9c47":"markdown","3ca5956a":"markdown","82f7feb1":"markdown","b63cc48b":"markdown","993a3f77":"markdown","a4e2b4ac":"markdown","a73ec0db":"markdown","3a1e5e37":"markdown"},"source":{"dd1b03c3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","d1fe412b":"# import the important libraries\nimport pandas as pd     # for dataframe\nimport numpy as np      # for arraies\nimport matplotlib.pyplot as plt  # for visualization \n%matplotlib inline\nimport seaborn as sns           # for visualization ","f5f529e1":"# read the data\ndf = pd.read_csv('\/kaggle\/input\/pubg-finish-placement-prediction\/train_V2.csv')\ndf.head()","6475ec61":"df.iloc[:,:14].head(10)","76b49cb3":"df.iloc[:,14:].head(10)","fc2b7da8":"df.info(null_counts=True)","c0ea49a1":"# for knowing statistical information\ndf.describe().T","af5b50cc":"df.winPlacePerc.value_counts().head()","60c1631d":"df.winPlacePerc.plot(kind='hist',bins=100)\nplt.title('number of winer in each place')\nplt.show()","070f6275":"df.weaponsAcquired.value_counts().head()","58f27c21":"df.nunique()","3bad088e":"# how many duplicats in the data\ndf.duplicated().sum()","31463880":"# firstly let's drop the nan in the winPlacePerc feture \ndf.dropna(axis=0,inplace=True)","e4feb26e":"df.info(null_counts=1)","0a9d5b33":"df.matchType.value_counts()","5eb02968":"df.matchType.value_counts()","b161cb3c":"plt.figure(figsize=(15,6))\nplt.xticks(rotation=45)\nax = sns.barplot(df.matchType.value_counts().index, df.matchType.value_counts().values, alpha=0.8)\nax.set_title(\"Number of players in the same match type\")\nplt.show()","e7259496":"df.matchType.replace(['squad-fpp','squad','normal-squad-fpp','normal-squad'],'squad',inplace=True)","8146a771":"df.matchType.replace(['duo-fpp','normal-duo-fpp','normal-duo'],'duo',inplace=True)","5d9926e3":"df.matchType.replace(['solo-fpp','normal-solo-fpp','normal-solo'],'solo',inplace=True)","6cd8b16f":"df.matchType.replace(['crashfpp','flaretpp','flarefpp','crashtpp'],'others',inplace=True)","6831a6bd":"df.matchType.value_counts()","67b1fc82":"sns.barplot(df.matchType.value_counts().index, df.matchType.value_counts().values)\nplt.title('squad vs duo vs solo')\nplt.show()","8e8d727e":"plt.figure(figsize=(30,10))\nplt.xticks(rotation=90)\nsns.countplot(df.DBNOs,hue=df.matchType)\nplt.title(\"DBNOs\/match types\")\nplt.show()","cd669ac3":"plt.figure(figsize=(30,6))\nplt.xticks(rotation=90)\nsns.countplot(df.revives,hue=df.matchType)\nplt.title(\"revives\/match types\")\nplt.show()","554b7c39":"plt.figure(figsize=(30,10))\nplt.xticks(rotation=90)\nsns.countplot(df.kills,hue=df.matchType)\nplt.title(\"kills\/match types\")\nplt.show()","c740e679":"sns.scatterplot(df.kills,df.damageDealt)\nplt.title('relation between kills and damage')\nplt.show()","9aea6e0a":"kills = df[['headshotKills','killPlace','killPoints','kills'\n            ,'killStreaks','longestKill','roadKills','teamKills'\n            ,'weaponsAcquired','winPlacePerc']]","8c9906db":"kills.head()","1965d934":"kills.nunique()","4e9f6597":"kills_features = ['headshotKills','killPlace','killPoints','kills'\n                  ,'killStreaks','longestKill','roadKills','teamKills','weaponsAcquired']\ndef scatter (feature_name):\n        sns.scatterplot(x=feature_name,y='winPlacePerc',data=kills)","adacd22a":"plt.figure(figsize=(15,10))\nplt.subplot(3,3,1)\nscatter(kills_features[0])\nplt.subplot(3,3,2)\nscatter(kills_features[1])\nplt.subplot(3,3,3)\nscatter(kills_features[2])\nplt.subplot(3,3,4)\nscatter(kills_features[3])\nplt.subplot(3,3,5)\nscatter(kills_features[4])\nplt.subplot(3,3,6)\nscatter(kills_features[5])\nplt.subplot(3,3,7)\nscatter(kills_features[6])\nplt.subplot(3,3,8)\nscatter(kills_features[7])\nplt.subplot(3,3,9)\nscatter(kills_features[8])\nplt.show()","0413d7a2":"kills.corr()","b0d8c97d":"plt.figure(figsize=(8,8))\nsns.heatmap(kills.corr(), annot=True, linewidths=.5)","3116bc00":"mobility=df[['rideDistance','roadKills','swimDistance','vehicleDestroys','walkDistance','winPlacePerc']]","1b098e9f":"mobility.head()","223eb3dc":"# Then you map to the grid\ng = sns.PairGrid(mobility)\ng.map(plt.scatter)","22084eef":"sns.heatmap(mobility.corr(),annot=True, linewidths=.5)","a640496a":"data_train = df.copy()","448a92d8":"data_train.head()","100bbad5":"plt.figure(figsize=(20,20))\nsns.heatmap(data_train.corr(),annot=True, linewidths=.5)","a923fe19":"f_data_train=data_train.drop(['Id','groupId','matchId','killPoints','matchDuration','maxPlace',\n                 'numGroups','rankPoints','roadKills','teamKills'\n                 ,'winPoints','killStreaks','longestKill','killPoints'],axis=1)","ec7a49c5":"f_data_train.head()","c0f4d3fd":"f_data_train.info()","7db2b4ed":"X= f_data_train.drop('winPlacePerc',axis=1)\nX.head()","d4fc4dcc":"y= data_train[['winPlacePerc']]\ny.head()","4b4f88be":"num_data = X.drop('matchType',axis=1)","62477dc2":"num_data.shape","ed8a824c":"cat_data = f_data_train['matchType']","df0ebe97":"cat_data = pd.DataFrame(cat_data)","39f4dd1e":"from sklearn.pipeline import Pipeline\nfrom sklearn.preprocessing import StandardScaler\n\nnum_pipeline = Pipeline([('std_scaler', StandardScaler())])\n\ndata_num_tr = num_pipeline.fit_transform(num_data)","6485b86a":"data_num_tr= pd.DataFrame(data_num_tr,columns=num_data.columns)\ndata_num_tr.head()","19bd4c75":"from sklearn.preprocessing import OneHotEncoder\ncat_encoder = OneHotEncoder(sparse=False)\ndata_cat_1hot = cat_encoder.fit_transform(cat_data)\ndata_cat_1hot","e661bfdd":"cat_encoder.categories_","4f95d463":"from sklearn.compose import ColumnTransformer\n\nnum_attribs = list(num_data)\ncat_attribs = [\"matchType\"]\n\nfull_pipeline = ColumnTransformer([\n        (\"num\", num_pipeline, num_attribs),\n        (\"cat\", OneHotEncoder(), cat_attribs),\n    ])\n\ndata_prepared = full_pipeline.fit_transform(f_data_train)","1613016a":"data_prepared=pd.DataFrame(data_prepared)","8813c495":"data_prepared.drop(17,axis=1,inplace=True)","99db96db":"X = data_prepared.copy()","50f9d564":"y.head()","46d9a4f0":"import xgboost as xgb\n\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, Y_train, Y_test = train_test_split(X, y, test_size=0.3)\n\nD_train = xgb.DMatrix(X_train, label=Y_train)\nD_test = xgb.DMatrix(X_test, label=Y_test)","0da032a0":"param = {\n    'eta': 0.15, \n    'max_depth': 5,  \n    'num_class': 2} \n\nsteps = 20  # The number of training iterations\nmodel = xgb.train(param, D_train, steps)","01319cdd":"from sklearn.metrics import mean_squared_error\n\npreds = model.predict(D_test)\nbest_preds = np.asarray([np.argmax(line) for line in preds])\n\nprint(\"MSE = {}\".format(mean_squared_error(Y_test, best_preds)))","5e9b3340":"test_data = pd.read_csv('\/kaggle\/input\/pubg-finish-placement-prediction\/test_V2.csv')","d7990dd8":"test_data.head()","01a41a4c":"list(f_data_train.columns)","ecbf9e6e":"test_set = test_data[['assists','boosts','damageDealt','DBNOs','headshotKills',\n 'heals','killPlace','kills','matchType','revives','rideDistance',\n 'swimDistance','vehicleDestroys','walkDistance','weaponsAcquired']]","75f8b644":"test_set.matchType.replace(['squad-fpp','squad','normal-squad-fpp','normal-squad'],'squad',inplace=True)\ntest_set.matchType.replace(['duo-fpp','normal-duo-fpp','normal-duo'],'duo',inplace=True)\ntest_set.matchType.replace(['solo-fpp','normal-solo-fpp','normal-solo'],'solo',inplace=True)\ntest_set.matchType.replace(['crashfpp','flaretpp','flarefpp','crashtpp'],'others',inplace=True)","06d47cf4":"test_set.head()","5a9396e1":"test_model = full_pipeline.fit_transform(test_set)","b6b9284a":"test_model","5b65a8f6":"test_model = pd.DataFrame(test_model)","57d778ac":"test_model.head()","2b74b3f5":"test_model.drop(17,axis=1,inplace=True)","f64c87d5":"# X is dependant features\n# y independant label\n# test model for prediction","932d0f69":"X.head()","2e341dcb":"y.head()","e1aab574":"test_model.head()","edc35d89":"X.to_csv('independant_feture_train.csv')\ny.to_csv('dependant_feture_train.csv')\ntest_model.to_csv('test_model.csv')","84290901":"X = pd.read_csv('independant_feture_train.csv',)\ny = pd.read_csv('dependant_feture_train.csv')\ntest_model = pd.read_csv('test_model.csv')","5617a82a":"X.drop('Unnamed: 0',axis=1,inplace=True)\ny.drop('Unnamed: 0',axis=1,inplace=True)\ntest_model.drop('Unnamed: 0',axis=1,inplace=True)","609f5f3f":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)\n\nforest_reg = RandomForestRegressor(n_estimators=10, random_state=42)\nforest_reg.fit(X_train, y_train)","059e1126":"from sklearn.metrics import mean_absolute_error\nforest_predictions = forest_reg.predict(X_test)\nforest_mae = mean_absolute_error(y_test, forest_predictions)\nforest_mae","4ac8d79f":"'''\nfor tuning parameters\nparameters_for_testing = {\n    'colsample_bytree':[0.4,0.6,0.8],\n    'gamma':[0,0.03,0.1,0.3],\n    'min_child_weight':[1.5,6,10],\n    'learning_rate':[0.1,0.07],\n    'max_depth':[3,5],\n    'n_estimators':[10000],\n    'reg_alpha':[1e-5, 1e-2,  0.75],\n    'reg_lambda':[1e-5, 1e-2, 0.45],\n    'subsample':[0.6,0.95]  \n}\n\n                   \nxgb_model = xgboost.XGBRegressor(learning_rate =0.1, n_estimators=1000, max_depth=5,\n     min_child_weight=1, gamma=0, subsample=0.8, colsample_bytree=0.8, nthread=6, scale_pos_weight=1, seed=27)\n\ngsearch1 = GridSearchCV(estimator = xgb_model, param_grid = parameters_for_testing, n_jobs=6,iid=False, verbose=10,scoring='neg_mean_squared_error')\ngsearch1.fit(train_x,train_y)\nprint (gsearch1.grid_scores_)\nprint('best params')\nprint (gsearch1.best_params_)\nprint('best score')\nprint (gsearch1.best_score_)\n'''","8a0c3432":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3,random_state=42)","d957ba58":"import xgboost \n\nxgb_model = xgboost.XGBRegressor(colsample_bytree=0.4,\n                 gamma=0,                 \n                 learning_rate=0.07,\n                 max_depth=3,\n                 min_child_weight=1.5,\n                 n_estimators=1000,                                                                    \n                 reg_alpha=0.75,\n                 reg_lambda=0.45,\n                 subsample=0.6,\n                 seed=42)\nxgb_model.fit(X_train,y_train)","1ff3f00c":"xgb_pred = xgb_model.predict(X_test)","959ea578":"mean_absolute_error(y_test, xgb_pred)","40377509":"test_pred = xgb_model.predict(test_model)","8f5ec15a":"submit = pd.read_csv('sample_submission_V2.csv')","3d6ce9d6":"submit.winPlacePerc = test_pred","d4f14ae8":"submit.to_csv('xgboost_prediction.csv')","1032d122":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3,)","69c9e03f":"from sklearn.linear_model import SGDRegressor\n\nsgd_reg = SGDRegressor(max_iter=10000, tol=1e-3, penalty=None, eta0=0.1, random_state=42)\nsgd_reg.fit(X_train, y_train)","9fec850c":"sgd_pred=sgd_reg.predict(X_test)","a6943101":"sqd_mae = mean_absolute_error(y_test,sgd_pred)","8bc6431e":"sqd_mae","b797831d":"from sklearn.linear_model import LinearRegression","b66ca818":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.4, random_state=42)","2bf71b98":"lm = LinearRegression()\nlm.fit(X_train,y_train)","4e4a88b5":"lm_pred = lm.predict(X_test)","259543ca":"mean_absolute_error(y_test,lm_pred)","12ed97e2":"<a id='Train'><\/a>\n\n# Select and Train the Model","506ab54e":"**Detect unique data in columns**","d25ca5c7":"## standardize numerical data","58d643b0":"<a id='intro'><\/a>\n## Introduction\n\n","7d2050d3":"**so working as a team give you the chance to revived or make more damage and kills**","00471181":"<a id='eda'><\/a>\n## Exploratory Data Analysis\n","2f28c3d4":"<a id='feature'><\/a>\n# Feature Selection","a8e56fc6":"<a id='model'><\/a>\n# Modeling  \n**it's time to build a model that predicts the win place for players**","5bc4d8dd":"**------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------**","ed36e65c":"**We can see that there are features between them, very strong relationships**","be694673":"## Table of Contents\n<ul>\n<li><a href=\"#feature\">Feature Selection <\/a><\/li>\n<li><a href=\"#prepro\">Data Preprocessing<\/a><\/li>\n<li><a href=\"#Train\">Select and Train the Model<\/a><\/li>\n<\/ul> ","35f491b5":"- **groupId** - Integer ID to identify a group within a match. If the same group of players plays in different matches, they will have a different groupId each time.\n- **matchId** - Integer ID to identify match. There are no matches that are in both the training and testing set.\n- **assists** - Number of enemy players this player damaged that were killed by teammates.\n- **boosts** - Number of boost items used.\n- **damageDealt** - Total damage dealt. Note: Self inflicted damage is subtracted.\n- **DBNOs** - Number of enemy players knocked.\n- **headshotKills** - Number of enemy players killed with headshots.\n- **heals** - Number of healing items used.\n- **killPlace** - Ranking in match of number of enemy players killed.\n- **killPoints** - Kills-based external ranking of player. (Think of this as an Elo ranking where only kills matter.)\n- **kills** - Number of enemy players killed.\n- **killStreaks** - Max number of enemy players killed in a short amount of time.\n- **longestKill** - Longest distance between player and player killed at time of death. This may be misleading, as downing a - player and driving away may lead to a large longestKill stat.\n- **maxPlace** - Worst placement we have data for in the match. This may not match with numGroups, as sometimes the data skips over placements.\n- **numGroups** - Number of groups we have data for in the match.\n- **revives** - Number of times this player revived teammates.\n- **rideDistance** - Total distance traveled in vehicles measured in meters.\n- **roadKills** - Number of kills while in a vehicle.\n- **swimDistance** - Total distance traveled by swimming measured in meters.\n- **teamKills** - Number of times this player killed a teammate.\n- **vehicleDestroys** - Number of vehicles destroyed.\n- **walkDistance** - Total distance traveled on foot measured in meters.\n- **weaponsAcquired** - Number of weapons picked up.\n- **winPoints** - Win-based external ranking of player. (Think of this as an Elo ranking where only winning matters.)\n- **winPlacePerc** - The target of prediction. This is a percentile winning placement, where 1 corresponds to 1st place, and 0 corresponds to last place in the match. It is calculated off of maxPlace, not numGroups, so it is possible to have missing chunks in a match.","7a1dad9a":"### What we did is we made pipelines to make the work easier and turned the numerical data and categorical data to be ready for the model","0acaf462":"**there are some features Because there is a strong relationship between them and other variables, or because they do not affect winning** \n### [killPoints,matchDuration,maxPlace,numGroups,rankPoints,roadKills,teamKills,winPoints,killStreaks,longestKill,killPoints]","9a7d5860":"## let's see the correlation","62c09e7f":"# SGD","a56f01a5":"### now we are ready to Explor!","c0ee82d5":"# Project: EDA PUBG\n## Table of Contents\n<ul>\n<li><a href=\"#Dictionary\">Data Dictionary<\/a><\/li>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<li><a href=\"#model\">Modeling <\/a><\/li>\n<\/ul> ","db2762af":"**We can divide the data into two parts to see all the fetures**","67988256":" <a id='conclusions'><\/a>\n# Conclusions","1f07e965":"# xgboost","3175eaa2":"### Now we can say that the more weapons you carry, and the more kills you have killed, the greater your chance of getting an advanced center.\n\n### Notice that the more dead your enemy kills. Much lower your chance of getting the top position","dcde116b":"# let's work on a war","4dbdff8c":"Now let's build a pipeline for preprocessing all attributes:","f4a185e7":"### Whenever you played in a team increased your chance to win and find aid to have other opportunities, In addition to increasing the number of killers you kill them , Taking into account that if the competitor kills more than you, you are an exhibition of loss so you must develop your skills in murder from distances and focus when shooting on the head, Must move so much until they do not give an opportunity to hit you and always try to collect weapons and find vehicles","4a2aae44":"### Encod Categorical feature ","fcfa6ea0":"<a id='Dictionary'><\/a>\n## Data Dictionary","60feaa5d":"# If you find this notebook useful please upvote on it ","9d976681":"**We can see that all these features have positive relationships with a  , but I struggled is that there is a very strong positive relationship between the distance that the player walks and win place Followed Ride distance**","f47b40fe":"- Running\n- Swimming\n- Driving","1651c10e":"**After analyzing and understanding the data is time to answer a question:**\n# What's the best strategy to win in PUBG?","22e90eba":"### now we will make it only 3 types [solo,duo,squad]","fceab4ea":"\n<a id='wrangling'><\/a>\n## Data Wrangling\n\n\n","9e1ad68e":"# Who are the highest win (Solos, Duos or Squads)?","0a944ccd":"# Mobility in the match","4a040f71":"**we can say that more than 50% of players play as a (squad)**","bafb9c47":"<a id='prepro'><\/a>\n# Data Preprocessing\n\n**let's make a pipelines to automate our work**","3ca5956a":"## Random Forest","82f7feb1":"# Apply on  Test data","b63cc48b":"# Training The models","993a3f77":"# What is the impact of damage on the number of kills?","a4e2b4ac":"**What has happened so far is an attempt to explore and understand the data further, and find out which problems are in it and need cleaning**","a73ec0db":"# Linear Regression","3a1e5e37":"- In this project what we want is analyzing the data and find out what affects the player's win by answering some questions such as:\n    -  **Who are the highest win (Solos, Duos or Squads)?**\n    -  **What is the impact of damage on the number of kills?**\n    -  **What is affects of the player's win?**\n    -  **What is the amount of work as a team between players?**\n\n\n- **What's the best strategy to win in PUBG? Should you sit in one spot and hide your way into victory, or do you need to be the top shot? Let's let the data do the talking!**"}}