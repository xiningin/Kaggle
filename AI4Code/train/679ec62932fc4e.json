{"cell_type":{"ca4c7307":"code","f585e4d1":"code","1244ad84":"code","4b1ca38b":"code","619c2a65":"code","f06f0341":"code","6b74d856":"code","0f0fb61f":"code","609da8f6":"code","cd1f3b03":"code","d889521f":"code","54a2a1a4":"code","cf0f315d":"code","4a7fa600":"code","da79d099":"markdown","5bc72a83":"markdown","1bafb382":"markdown","0cd96dfa":"markdown","55649165":"markdown","7503ed95":"markdown","2231717d":"markdown","7d1b33a9":"markdown","4577b736":"markdown"},"source":{"ca4c7307":"!pip install catboost \n\nimport numpy as np, os\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport datetime\nfrom time import time\nfrom tqdm import tqdm_notebook as tqdm\nfrom IPython.display import clear_output \n\n# Machine learning libraries\nfrom sklearn.model_selection import train_test_split\nfrom catboost import CatBoostRegressor\n\n\"\"\" \nIn Order to Use it in your own machine, just change the HOME_DIR to your current working directory\nwhere there is a folder named data in which the  csv files are there. \n \"\"\"\n\nDATA_DIR = '..\/input\/hackerearth-employee-burnout-challenge\/'\n\ntrain_df = pd.read_csv(os.path.join(DATA_DIR, 'train.csv'))\ntest_df = pd.read_csv(os.path.join(DATA_DIR, 'test.csv'))\nsub = pd.read_csv(os.path.join(DATA_DIR, 'sample_submission.csv'))\n\n\nclear_output()","f585e4d1":"def get_days(d0, d1):\n    \"\"\"\n    d0 : earlier data\n    d1 : later date\n    returns : number of days between those two dates.   \n    \"\"\"\n    d0 = pd.to_datetime(d0)\n    d1 = pd.to_datetime(d1)\n    delta = d1 - d0\n    return delta.days","1244ad84":"train_df.head()","4b1ca38b":"train_df.info()","619c2a65":"# train_df['Resource Allocation'].fillna(train_df['Resource Allocation'].median() , inplace = True)\n# train_df['Mental Fatigue Score'].fillna(train_df['Mental Fatigue Score'].median() , inplace = True)\n\ntrain_df.dropna(inplace=True)\ntrain_df.info()","f06f0341":"train_df2 = train_df.copy()\ntrain_df2['Burn Rate'] = train_df['Burn Rate']\nsns.relplot(x=\"Designation\", y=\"Mental Fatigue Score\", size ='Burn Rate',  data=train_df2);","6b74d856":"train_df.info()","0f0fb61f":"resource_counts = train_df['Resource Allocation'].value_counts()\n\nfig = sns.barplot(y=resource_counts.values, x=resource_counts.index)\nfig.set(title = 'Resource Allocation Distributions');","609da8f6":"dataset = [train_df, test_df]\n\nfor data in dataset:\n    data['Date of Joining'] = pd.to_datetime(data['Date of Joining'])\n    data['Gender'] = [1 if (gender == 'Male') else 0  for gender in data.Gender]\n    data['Company Type'] = [1 if (ctype == 'Service') else 0  for ctype in data['Company Type']]\n    data['WFH Setup Available'] = [1 if (wfh == 'Yes') else 0  for wfh in data['WFH Setup Available']]\n    data['JobDuration'] = [get_days(d, '2009-2-1') for d in data['Date of Joining']]\n    data['JobDurationMonth'] = (data['JobDuration']\/30)\n    ","cd1f3b03":"train_df = train_df.astype({\"Designation\": int, \"Resource Allocation\": int, \"JobDurationMonth\": int})\ntest_df = test_df.astype({\"Designation\": int, \"Resource Allocation\": int, \"JobDurationMonth\": int})\ntest_df\n","d889521f":"train_df.to_csv('train_processed.csv', index=False)\ntest_df.to_csv('test_processed.csv', index=False)\n","54a2a1a4":"fig = train_df.groupby(['JobDurationMonth']).mean()['Burn Rate'].plot.bar()\nfig.set(title = 'Burn Rate vs Job Duration in Months', ylabel = 'Mean Burn Rate');","cf0f315d":"fig = train_df.groupby(['JobDurationMonth']).mean()['Mental Fatigue Score'].plot.bar()\nfig.set(title = 'Mental Fatigue Score vs Job Duration in Months', ylabel = 'Reported Mental Fatigue Score');","4a7fa600":"# Selected features for training\nfeatures = ['Gender',   'JobDuration', 'JobDurationMonth',  'Company Type',\t\n            'WFH Setup Available', 'Designation', 'Resource Allocation',\t'Mental Fatigue Score']\n\ncat_features = ['Gender', 'JobDurationMonth', 'Company Type', 'WFH Setup Available', \n                'Designation', 'Resource Allocation']\n","da79d099":"## Burn Rate vs Job Duration in Months:\nIt seems that there is not that much clear relationship between Job Duration in Month and Burn Rate of the Employees. ","5bc72a83":"# Handling Missing Values","1bafb382":"# <font color='blue'>Feature Engineering <\/font>","0cd96dfa":"## Utility Functions","55649165":"# Data Staging\n","7503ed95":"## Burn Rate vs (Designation and Mental Fatigue)","2231717d":"## Fatigue Reported vs Job Duration in Months:","7d1b33a9":"![](https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn%3AANd9GcSDSH7J3HcXkjC0ftWuIL8gn2Tj4ZHMIUV8ZQ&usqp=CAU)","4577b736":"## Resource Allocation"}}