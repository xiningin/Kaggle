{"cell_type":{"8f7126c2":"code","1531bdbe":"code","45647ddd":"code","d5eba0dc":"code","95f19b67":"code","c3f949d4":"code","9443498d":"code","054ead29":"code","466cb284":"code","e3e62437":"code","675daa47":"code","d5d16e26":"code","301eac73":"code","cda476ea":"code","93feaf06":"code","42c27db9":"code","78973ce8":"code","397e4d9d":"code","44f7b846":"code","2d622660":"code","9b5d9bfa":"code","9818ce16":"code","f8a4af77":"code","5eb0c316":"code","f60f729b":"code","530f2c1a":"code","6e464a8d":"code","8e625369":"code","1df093cf":"code","b8182a72":"code","6aeba23c":"code","0fa4eb79":"code","b1648e1b":"code","7152a3e0":"code","07395239":"code","8ac357bc":"code","26e48a81":"code","ffc45e94":"code","60498f29":"markdown","8f11fa79":"markdown","a2596c72":"markdown","181ff1db":"markdown","72dbb65b":"markdown"},"source":{"8f7126c2":"pip install mglearn","1531bdbe":"import mglearn\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nfrom sklearn.cluster import KMeans\nfrom sklearn.preprocessing  import scale","45647ddd":"df = pd.read_csv(\"\/kaggle\/input\/fifa19\/data.csv\")\ndf.drop(\"Unnamed: 0\",axis=1,inplace=True)\ndf.head()","d5eba0dc":"df.info()","95f19b67":"DEFENDING = [\"CB\",\"LB\",\"LCB\",\"LWB\",\"RB\",\"RCB\",\"RWB\"]\nMIDFIELD = [\"CAM\",\"CDM\",\"CM\",\"LAM\",\"LCM\",\"LDM\",\"LM\",\"RAM\",\"RCM\",\"RDM\",\"RM\"]\nATTACKING = [\"CF\",\"LF\",\"RF\",\"RS\",\"RW\",\"LW\",\"LS\",\"ST\"]\nGOALKEEPER = [\"GK\"]\n\nmain = []\n\nfor i in df[\"Position\"]:\n    if i in DEFENDING:\n        main.append(\"Defending\")\n    elif i in MIDFIELD:\n        main.append(\"Midfield\")\n    elif i in ATTACKING:\n        main.append(\"Attacking\")\n    elif i in GOALKEEPER:\n        main.append(\"Goalkeeper\")\n    else:\n        main.append(np.nan)\ndf[\"Main Position\"] = main","c3f949d4":"def numericValue(arr):\n    dummy = []\n    for i in range(len(arr)):\n        if arr[i][len(arr[i])-1]==\"M\":\n            dummy.append(pd.to_numeric(arr[i][0:len(arr[i])-2])*1000000)\n        elif arr[i][len(arr[i])-1]==\"K\":\n            dummy.append(pd.to_numeric(arr[i][0:len(arr[i])-2])*1000)\n        else:\n            dummy.append(0)\n            \n    return dummy\n\ndf[\"Value\"]=df['Value'].str.replace('\u20ac','')\nvalue = numericValue(df[\"Value\"])\ndf[\"Value\"]=np.array(value)\/1000000","9443498d":"weight = []\nfor i in df[\"Weight\"]:\n    if type(i)==float:\n        weight.append(i)\n    elif len(i)<6:\n        weight.append(pd.to_numeric(i[0:2]))\n    else:\n        weight.append(pd.to_numeric(i[0:3]))\ndf[\"Weight2\"]=weight  ","054ead29":"df[\"Age Cut\"]=pd.cut(df[\"Age\"],[0,20,25,30,35,100],labels=[\"U20\",\"21to25\",\"26to30\",\"31to35\",\"Over35\"])","466cb284":"print(\"Top 10 Clubs of Average Overall...\")\npd.DataFrame(df.groupby(\"Club\")[\"Overall\"].mean().sort_values(ascending=False)[:10]).style.background_gradient(\"Greens\")","e3e62437":"pd.DataFrame(df.groupby(\"Club\")[\"Age\"].mean().sort_values(ascending=False)[:10]).style.background_gradient(\"Reds\")","675daa47":"pd.DataFrame(df.groupby(\"Club\")[\"Value\"].sum().sort_values(ascending=False)[:10]).style.background_gradient(\"Greens\")","d5d16e26":"df[[\"Name\",\"Overall\",\"Age\"]][:10].set_index(\"Name\").style.background_gradient(\"Greens\")","301eac73":"pd.DataFrame(df.groupby(\"Name\")[\"Weight2\"].mean().sort_values(ascending=False)[:10]).style.background_gradient(\"Greens\")","cda476ea":"labels  = df[\"Main Position\"].value_counts().index\nsizes   = df[\"Main Position\"].value_counts().values\nexplode = (0,0,0,0.1)\nplt.figure(figsize=(10,6))\nplt.pie(x=sizes,explode=explode,autopct='%1.1f%%',shadow=True, startangle=90, frame=True,colors=[\"tab:green\",\"teal\",\"firebrick\",\"orange\"])\nplt.axis('equal')\nplt.legend(labels)\nplt.title(\"Positions\",fontsize=20)\nplt.xticks([])\nplt.yticks([])\nplt.show()","93feaf06":"plt.figure(figsize=(14,6))\ndf[\"Nationality\"].value_counts()[:10].plot(kind=\"bar\",color=\"teal\",lw=2,edgecolor=\"black\")\nplt.xticks(rotation=0)\nplt.xlabel(\"Country\",fontsize=15)\nplt.ylabel(\"Count\",fontsize=15)\nplt.title(\"Top 10 Countries\",fontsize=20)\nplt.show()","42c27db9":"plt.figure(figsize=(14,6))\nplt.subplot(1,2,1)\nsns.countplot(data=df , x=\"Preferred Foot\" ,palette=\"Blues\",edgecolor=\"black\")\nplt.title(\"Count Plot of Preferred Foot\", fontsize=20)\nplt.subplot(1,2,2)\nsns.countplot(data=df , x=\"International Reputation\" ,palette=\"Blues\",edgecolor=\"black\")\nplt.title(\"Count Plot of International Reputation\", fontsize=20)\nplt.show()","78973ce8":"plt.figure(figsize=(14,6))\nplt.hist(df[\"Overall\"],bins=20,density=True,color=\"teal\",edgecolor=\"black\")\nplt.xlabel(\"Overall\",fontsize=15)\nplt.ylabel(\"Frequency\",fontsize=15)\nplt.title(\"Histogram of Overall\",fontsize=20)\nplt.show()","397e4d9d":"plt.figure(figsize=(14,6))\nplt.subplot(1,2,1)\nsns.boxenplot(data=df, x=\"Age Cut\", y=\"Overall\",palette=[\"teal\"])\nplt.title(\"Boxen Plot of Age and Overall\",fontsize=20)\nplt.subplot(1,2,2)\nsns.boxenplot(data=df, x=\"Age Cut\", y=\"Potential\",palette=[\"teal\"])\nplt.title(\"Boxen Plot of Age and Potential\",fontsize=20)\nplt.show()","44f7b846":"plt.figure(figsize=(14,6))\nsns.boxplot(data=df, x=\"Position\", y=\"Weight2\",palette=[\"teal\"])\nplt.ylabel(\"Weight (lbs)\")\nplt.title(\"Box Plot of Weight\",fontsize=20)\nplt.show()","2d622660":"club = df.loc[(df[\"Club\"]==\"Juventus\")|\n      (df[\"Club\"]==\"Napoli\")|\n      (df[\"Club\"]==\"Inter\")|\n      (df[\"Club\"]==\"Real Madrid\")|\n      (df[\"Club\"]==\"Milan\")|\n      (df[\"Club\"]==\"FC Barcelona\")|\n      (df[\"Club\"]==\"Paris Saint-Germain\")|\n      (df[\"Club\"]==\"Manchester United\")|\n      (df[\"Club\"]==\"SL Benfica\")]\n\nplt.figure(figsize=(14,6))\nsns.boxplot(data=club,y=\"Club\",x=\"Overall\",\n            palette=[\"teal\",\"white\",\"teal\",\"white\",\"teal\"]+[\"white\"]*4,linewidth=2)\nplt.xticks(fontsize=15)\nplt.yticks(fontsize=15)\nplt.title(\"Box Plot of Overall of Top 10 Clubs\",fontsize=20)\nplt.show()","9b5d9bfa":"plt.figure(figsize=(14,6))\nsns.scatterplot(data=df, y=\"Value\", x=\"Overall\",size=\"Age\",color=\"teal\")\nplt.xlabel(\"Overall\",fontsize=15)\nplt.ylabel(\"Value (M\u20ac)\",fontsize=15)\nplt.title(\"Scatter Plot X: Overall Y: Value\",fontsize=20)\nplt.show()","9818ce16":"plt.figure(figsize=(14,6))\nsns.kdeplot(df.loc[df[\"Main Position\"]==\"Attacking\"][\"Jersey Number\"],label=\"Attacking\",shade=True)\nsns.kdeplot(df.loc[df[\"Main Position\"]==\"Midfield\"][\"Jersey Number\"],label=\"Midfield\",shade=True)\nsns.kdeplot(df.loc[df[\"Main Position\"]==\"Defending\"][\"Jersey Number\"],label=\"Defending\",shade=True)\nsns.kdeplot(df.loc[df[\"Main Position\"]==\"Goalkeeper\"][\"Jersey Number\"],label=\"Goalkeeper\",shade=True)\nplt.legend()\nplt.title(\"Kernel Density Estimate Plot of Jersey Number\",fontsize=20)\nplt.ylabel(\"Frequency\")\nplt.show()","f8a4af77":"plt.figure(figsize=(14,6))\narr  = [\"Finishing\",\"SprintSpeed\",\"ShotPower\",\"Stamina\"]\nfor i in range(1,5):\n    plt.subplot(2,2,i)\n    df.groupby([\"Main Position\"])[arr[i-1]].mean().sort_index().plot(kind=\"barh\",color=\"teal\"\n                                                                     ,edgecolor=\"black\",lw=2)\n    plt.xticks(fontsize=15)\n    plt.yticks(fontsize=15)\n    plt.title(\"{} Average\".format(arr[i-1]),fontsize=20)\nplt.tight_layout()\nplt.show()","5eb0c316":"plt.figure(figsize=(14,10))\nsns.boxplot(data=df.iloc[:,53:88], orient=\"h\", palette=[\"teal\"])\nplt.title(\"Box Plot of Data\")\nplt.show()","f60f729b":"skills = df.iloc[:,53:89]\nskills.drop(\"Release Clause\",axis=1,inplace=True)\nskills[\"Name\"]=df[\"Name\"]\nskills = skills.set_index(\"Name\")\nskills.dropna(inplace=True)","530f2c1a":"skills.head()","6e464a8d":"plt.figure(figsize=(14,6))\nplt.subplot(1,2,1)\nplt.hist2d(x=df[\"Age\"],y=df[\"Overall\"],cmap=\"RdYlGn_r\",bins=10)\nplt.xlabel(\"Age\",fontsize=15)\nplt.ylabel(\"Overall\",fontsize=15)\nplt.title(\"2D Histogram\",fontsize=20)\nplt.subplot(1,2,2)\nplt.hist2d(x=df[\"Age\"],y=df[\"Potential\"],cmap=\"RdYlGn_r\",bins=10)\nplt.xlabel(\"Age\",fontsize=15)\nplt.ylabel(\"Potential\",fontsize=15)\nplt.title(\"2D Histogram\",fontsize=20)\nplt.show()","8e625369":"plt.figure(figsize=(14,4))\nsns.heatmap(skills.loc[skills[\"Main Position\"]==\"Attacking\"].drop(\"Main Position\",axis=1)[:10],cmap=\"RdYlGn_r\",annot=True)\nplt.title(\"Heat Map of Top 10 Attacking\",fontsize=20)\nplt.show()","1df093cf":"plt.figure(figsize=(14,4))\nsns.heatmap(skills.loc[skills[\"Main Position\"]==\"Midfield\"].drop(\"Main Position\",axis=1)[:10],cmap=\"RdYlGn_r\",annot=True)\nplt.title(\"Heat Map of Top 10 Midfield\",fontsize=20)\nplt.show()","b8182a72":"plt.figure(figsize=(14,4))\nsns.heatmap(skills.loc[skills[\"Main Position\"]==\"Defending\"].drop(\"Main Position\",axis=1)[:10],cmap=\"RdYlGn_r\",annot=True)\nplt.title(\"Heat Map of Top 10 Defending\",fontsize=20)\nplt.show()","6aeba23c":"plt.figure(figsize=(14,4))\nsns.heatmap(skills.loc[skills[\"Main Position\"]==\"Goalkeeper\"].drop(\"Main Position\",axis=1)[:10],cmap=\"RdYlGn_r\",annot=True)\nplt.title(\"Heat Map of Top 10 Goalkeeper\",fontsize=20)\nplt.show()","0fa4eb79":"from yellowbrick.cluster import KElbowVisualizer","b1648e1b":"mglearn.plots.plot_kmeans_algorithm()\nplt.show()","7152a3e0":"mglearn.plots.plot_kmeans_boundaries()\nplt.show()","07395239":"X = skills.drop(\"Main Position\",axis=1).dropna()\nX_scale = scale(X)","8ac357bc":"model = KMeans()\nfig = KElbowVisualizer(model,k=(1,10))\nfig.fit(X_scale)\nfig.show();","26e48a81":"cluster = KMeans(3)\ncluster.fit(X_scale)\nskills[\"Cluster\"] = cluster.labels_","ffc45e94":"skills.groupby(\"Main Position\")[\"Cluster\"].value_counts().plot(kind=\"barh\",color=\"teal\",figsize=(14,6))\nplt.show()","60498f29":"<a id=\"t1.\"><\/a>\n# 1. Import data and python packages","8f11fa79":"## Context\nFootball analytics\n\n## Content\n1. [Import data and python packages](#t1.)\n    * Import packages\n    * Import data\n2. [Data visualization](#t2.)\n    * Count plots\n    * Box plots\n    * Boxen plot\n    * Histograms\n    * Heatmaps\n3. [Clustering](#t3.)\n    * Eblow Method\n    * KMean Clustering\n\n## Acknowledgements\nData scraped from https:\/\/sofifa.com\/\n\n## Inspiration\nInspired from this dataset: https:\/\/www.kaggle.com\/thec03u5\/fifa-18-demo-player-dataset","a2596c72":"<h1><center>FIFA 19:Complete player dataset analysis<\/center><\/h1>\n\n<center><img src=\"https:\/\/i.ytimg.com\/vi\/QmODkfIUEss\/maxresdefault.jpg\"><\/center>","181ff1db":"<a id=\"t2.\"><\/a>\n# 2. Data visualization","72dbb65b":"<a id=\"t3.\"><\/a>\n# 3. Clustering"}}