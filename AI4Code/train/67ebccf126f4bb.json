{"cell_type":{"24211882":"code","5a380b1a":"code","6bab243e":"code","fc4fbf39":"code","c34085d3":"code","46729499":"code","5d4fb30c":"code","bcf10b0c":"code","bfa6db37":"code","b3355778":"code","6b2a1389":"code","fe559846":"code","6e42a3a2":"code","f6127076":"code","f3895023":"code","2ee1a25b":"code","570bb516":"code","f2cb45f3":"code","455d7e12":"code","3d419ae5":"code","23d5dd35":"markdown","4ddea612":"markdown","6c60e53f":"markdown","9de9c708":"markdown","93315c9c":"markdown","e6a37973":"markdown","73547f39":"markdown","19495f0e":"markdown","0500cc62":"markdown","5ea19587":"markdown","59c1ec89":"markdown","d36a315b":"markdown","3fb71065":"markdown","b25256a4":"markdown","dc4d070e":"markdown","7c6cef58":"markdown","99f1a176":"markdown","dda15f9c":"markdown","208b4381":"markdown","4ac3ed4b":"markdown","a8ce60a4":"markdown","096a2f42":"markdown","df6e017a":"markdown","537c615f":"markdown","80551afb":"markdown"},"source":{"24211882":"import matplotlib.pyplot as plt\nimport cv2\nimport seaborn as sns\n\nimport tensorflow as tf\n\nimport numpy as np\nimport ast\n\nimport pandas as pd\nfrom pandas_profiling import ProfileReport\nfrom collections import Counter\nfrom wordcloud import WordCloud\n\nimport warnings\nwarnings.filterwarnings('ignore')\nsns.set()\n%matplotlib inline","5a380b1a":"TRAIN_PATH = \"..\/input\/siim-covid19-dataset-256px-jpg\/256px\/train\/train\"\nTEST_PATH = \"..\/input\/siim-covid19-dataset-256px-jpg\/256px\/test\/test\"\n\nmeta_train = pd.read_csv(\"..\/input\/siim-covid19-dataset-256px-jpg\/meta_train.csv\")\nmeta_test = pd.read_csv(\"..\/input\/siim-covid19-dataset-256px-jpg\/meta_test.csv\")\nHEIGHT,WIDTH = 256,256","6bab243e":"ProfileReport(meta_train,title = \"Metadata of Training images\")","fc4fbf39":"ProfileReport(meta_test, title=\"Metadata of Test Images\")","c34085d3":"train_df = pd.read_csv(\"..\/input\/siim-covid19-dataset-256px-jpg\/train.csv\")\ntrain_df.head(3)","46729499":"labels = list(train_df.label_id.value_counts().index)\ncounts = list(train_df.label_id.value_counts().values)\n\npie, ax = plt.subplots(figsize=[10,6])\n\nplt.pie(x=counts, autopct=\"%.1f%%\", labels=labels, pctdistance=0.5)\nplt.title(\"Labels count\", fontsize=14)","5d4fb30c":"train_df[\"boxes\"] = train_df[\"boxes\"].map(lambda x : ast.literal_eval(x))\ntrain_df[\"boxes_count\"] = train_df[\"boxes\"].map(lambda x : len(x))\ntrain_df[\"boxes_count\"][train_df[\"image_label\"] ==  \"none 1 0 0 1 1\"]  = 0\n\nlabels = list(train_df.boxes_count.value_counts().index)\ncounts = list(train_df.boxes_count.value_counts().values)\n\nprint(train_df.boxes_count.value_counts())\n\nplt.figure(figsize=(14,5))\n\nplt.subplot(1,2,1)\nsns.countplot(x=\"boxes_count\",data=train_df)\nplt.title(\"Boxes Count\")\n\nplt.subplot(1,2,2)\nsns.countplot(y=\"boxes_count\",hue=\"label_id\",data=train_df)\nplt.title(\"Boxes Count per each label\")\n\nplt.show()","bcf10b0c":"height = []\nwidth = []\nx = []\ny = []\nfor row in train_df.values:\n    for box in row[6]:\n        if box[\"width\"] != 1:\n            width.append(box[\"width\"])\n            x.append(box[\"x\"])\n            y.append(box[\"y\"])\n            height.append(box[\"height\"])","bfa6db37":"plt.figure(figsize=(10,10))\nsns.jointplot(x=width, y=height, kind=\"hex\", color=\"#4CB391\")\nplt.xlabel(\"Width of BBOX\")\nplt.ylabel(\"Height of BBOX\")\n\nplt.show()","b3355778":"plt.figure(figsize=(10,10))\n\nsns.jointplot(x=x, y=y, kind=\"reg\", color=\"#0d324d\")\nplt.xlabel(\"X-location of BBOX\")\nplt.ylabel(\"Y-location of BBOX\")\n\nplt.show()","6b2a1389":"plt.figure(figsize=(10,10))\n\nsns.jointplot(x=x, y=width, kind=\"scatter\")\n\nplt.show()","fe559846":"plt.figure(figsize=(10,10))\n\nsns.jointplot(x=y, y=height, kind=\"reg\", color=\"#c471ed\")\n\nplt.show()","6e42a3a2":"labels = list(train_df.StudyInstanceUID.value_counts().index)\ncounts = train_df.StudyInstanceUID.value_counts().values\n\nkeys = list(Counter(counts).keys())\nvalues = list(Counter(counts).values())\n\nprint(Counter(counts))\n\nfig, ax = plt.subplots(figsize=(10, 5))\n\nax.barh(keys,values,align = \"center\")\nax.set_xlabel(\"Count of study_ids\")\nax.set_ylabel(\"Number of images\")\ny_tick = np.arange(10)\nax.set_yticks(y_tick)\nax.set_title(\"Count of study_ids having given number of images\")\n\nfor i, y in enumerate(ax.patches):\n    ax.text(y.get_width()+.09, y.get_y()+.3, str(round((y.get_width()), 1)), fontsize=10)","f6127076":"labels = labels[:232]\ncounts = counts[:232]\n\ndict_ = {labels[i]:counts[i] for i in range(len(labels))}\nwordcloud = WordCloud()\nwordcloud.generate_from_frequencies(dict_)\nplt.figure(figsize=(15,15))\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.title(\"Study Instance UIDs with multiple Images\",fontsize=20,fontweight=\"bold\")\nplt.show()","f3895023":"colors_dict = {\n    0 : (255,255,255),\n    1 : (0,0,255),\n    2 : (0,255,0),\n    3 : (255,0,0)\n}\n\nTRAIN_FILES = tf.io.gfile.glob(TRAIN_PATH + \"\/*.jpg\")\n\n##------------------------------\n#get path of image from study_id\n##------------------------------\ndef get_path(image_id):\n    filepath = tf.io.gfile.glob(TRAIN_PATH + \"\/*\" + image_id+\".jpg\")[0]\n    return filepath\n\n##-----------------------\n#display images with BBOX\n##-----------------------\ndef showImages(df,label):\n    df = df[df[\"label_id\"] == label]\n    fig,ax = plt.subplots(nrows=3,ncols=3,figsize=(15,15))\n    for i,row in enumerate(df.values[:9]):\n        r,c = i\/\/3, i%3\n        filepath = get_path(row[0])\n        img = cv2.imread(filepath,cv2.COLOR_BGR2RGB)\n        study_label = row[3]\n        box_color = colors_dict[study_label]\n        w_factor, h_factor = WIDTH\/row[5], HEIGHT\/row[4]\n        if label != \"Negative for Pneumonia\":\n            for box in row[6]:\n                x1 = int(box[\"x\"]*w_factor)\n                y1 = int(box[\"y\"]*h_factor)\n                x2 = x1 + int(box[\"width\"]*w_factor)\n                y2 = y1 + int(box[\"height\"]*h_factor)\n                \n                cv2.rectangle(img, (x1,y1), (x2,y2),box_color,2)\n        ax[r,c].imshow(img,cmap=\"viridis\")\n        ax[r,c].axis(\"off\")\n        ax[r,c].set_title(label,fontsize=15, weight='bold')","2ee1a25b":"showImages(train_df,\"Negative for Pneumonia\")","570bb516":"temp = train_df[train_df[\"label_id\"] == \"Negative for Pneumonia\"]\nprint(\"Unique Values : \",temp.boxes.value_counts())\nprint(\"Number of unique values : \", len(temp.boxes.value_counts()))","f2cb45f3":"showImages(train_df,\"Typical Appearance\")","455d7e12":"showImages(train_df,\"Atypical Appearance\")","3d419ae5":"showImages(train_df,\"Indeterminate Appearance\")","23d5dd35":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Class: Negative for Pneumonia<\/h2>","4ddea612":"<h2 style=\"border-style: outset;border-color: red;text-align: center;\">SIIM-FISABIO-RSNA COVID-19 Dataset Visualization<\/h2>\n\n<img src=\"https:\/\/content.presspage.com\/uploads\/2110\/gettyimages-1214942330.jpg\" height=\"500\" width=\"500\" style=\"display: block;margin-left: auto;margin-right: auto;\"> \n\n<h2 style=\"text-align: center;border-style: double;text-align: center;border-color: red; \">About SIIM<\/h2>\n<img src=\"https:\/\/siim.org\/resource\/resmgr\/SIIM_logo-600x315.png\" width=\"200\" style=\"display: block;margin-left: auto;margin-right: auto;\">\n<p> <b>Society for Imaging Informatics in Medicine<\/b> (<a href=\"https:\/\/siim.org\/\">SIIM<\/a>) is the leading healthcare professional organization for those interested in the current and future use of informatics in medical imaging. The society's mission is to advance medical imaging informatics across the enterprise through education, research, and innovation in a multi-disciplinary community.<\/p>\n\n<h3 style = \"text-align :center; color:red; background-color: yellow; \">This is my first Data Visualization Notebook. Kindly comment if there are any mistakes \ud83d\ude42<\/h3>\n\n<a href = \"https:\/\/www.kaggle.com\/shanmukh05\/siim-covid19-dataset-256px-jpg\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Dataset<\/h3><\/a>\n\n<a href = \"https:\/\/www.kaggle.com\/shanmukh05\/siim-covid-19-data-preparation-for-detectron2\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Data Preparation Notebook<\/h3><\/a> \n\n<a href = \"https:\/\/www.kaggle.com\/shanmukh05\/siim-covid-19-study-level-predictions-predictions\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Training Notebook (Study Level)<\/h3><\/a> \n\n<a href = \"https:\/\/www.kaggle.com\/shanmukh05\/siim-covid-19-yolo-v5-image-level-predictions\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Training Notebook (Image Level)<\/h3><\/a> \n\n<a href = \"https:\/\/www.kaggle.com\/shanmukh05\/siim-covid-19-detection-detectron2-training\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Training Notebook (Detectron2)<\/h3><\/a> \nTo be updated\n\n<a href = \"\" style=\"font-weight:'bold'; color:blue; font-family:monospace; text-align :center;\"><h3>My Inference Notebook<\/h3><\/a> \n[Private]","6c60e53f":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n### There are 4 different classes in the data\n\n- `Negative for Pneumonia`\n- `Typical Appearance`\n- `Indeterminate Appearance`\n- `Atypical Appearance`\n\n### Majority of the Training images belongs to `Typical Appearance` class.","9de9c708":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Study Instance UID<\/h2>","93315c9c":"<h1 style = \"text-align :center; color:white; background-image: url(https:\/\/cdn.pixabay.com\/photo\/2014\/06\/16\/23\/40\/blue-370128__340.png); \">Image Metadata Visualization<\/h1>","e6a37973":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n- Y coordinate of top-left point of BBOX peaks around `500px`.\n- X coordinate of top-left point of BBOX has 2 peaks at `500px`, `2000px` ","73547f39":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n- Majority of `Study Instance UID` containes only 1 image.\n- There are `Study Instance UID` with multiple images.\n- These count of images are discrete and are in the list `[1,2,3,4,5,6,7,9]`","19495f0e":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Class: Typical Appearance<\/h2>","0500cc62":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Size of Bounding Boxes<\/h2>","5ea19587":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n- Number of boxes per given image are **not continuous**.\n- The discrete counts are `[1,2,3,4,5,8]`\n- Majority of images containes either 0 or 2 (either no bounding-box or 2)","59c1ec89":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Pandas Profiling of Metadata<\/h2>\n\n<img src=\"https:\/\/pandas-profiling.github.io\/pandas-profiling\/docs\/assets\/logo_header.png\" style= \"display: block; margin-left: auto; margin-right: auto;\" height=\"300\" width=\"300\">\n\n<p>Pandas profiling is an open source Python module with which we can quickly do an exploratory data analysis with just a few lines of code. Besides, if this is not enough to convince us to use this tool, it also generates interactive reports in web format that can be presented to any person, even if they don\u2019t know programming.<\/p>\n<a style = \"text-align :center; font-family:verdana; color:blue; font-size:25px\" href = \"https:\/\/pandas-profiling.github.io\/pandas-profiling\/docs\/master\/rtd\/\"> Know more about Pandas Profiling <\/a>","d36a315b":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n- Height of boxes peaks around `750px` and distributes evenly both sides.\n- Width of boxes peaks around `500px` and distribution is slightly shifted towards higher widths.","3fb71065":"<h1 style = \"text-align :center; color:white; background-image: url(https:\/\/cdn.pixabay.com\/photo\/2014\/06\/16\/23\/40\/blue-370128__340.png); \">Tabular Data Visualization<\/h1>","b25256a4":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n### - `Height` and `Width` of Test images are Highly Correlated.\n### - `Mean width` of both Train and Test images is more than that of `Mean Height`.\n\n#### Comment below if you found any useful observation \ud83d\ude04","dc4d070e":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Class: Indeterminate Appearance <\/h2>","7c6cef58":"<img src=\"https:\/\/t4.ftcdn.net\/jpg\/03\/54\/26\/09\/360_F_354260981_mvf4Yt39tO1iAWkXeFcPayv0OkTw6p4j.jpg\" style= \"display: block;margin-left: auto; margin-right: auto;\" height=\"100\" width=\"300\">\n\n<h1 style = \"text-align :center; color:white; background-image: url(https:\/\/cdn.pixabay.com\/photo\/2014\/06\/16\/23\/40\/blue-370128__340.png); \">Do upvote if you found this notebook useful\ud83d\ude42<\/h1>","99f1a176":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Class: Atypical Appearance<\/h2>","dda15f9c":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Labels<\/h2>","208b4381":"<h1 style = \"text-align :center; color:white; background-image:url(https:\/\/cdn.pixabay.com\/photo\/2014\/06\/16\/23\/40\/blue-370128__340.png)\"> About Competition <\/h1>","4ac3ed4b":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Count of Bounding Boxes<\/h2>","a8ce60a4":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Y,Height of Bounding Boxes<\/h2>","096a2f42":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">Location of Bounding Boxes<\/h2>","df6e017a":"<h2 style = \"text-align :center; font-family:verdana; color:black; background-image: url(https:\/\/i.pinimg.com\/originals\/dd\/f9\/97\/ddf997d65d8b92a3d7e085d6bf1cc484.jpg); \">X,Width of Bounding Boxes<\/h2>","537c615f":"<h2 style = \"text-align :center; font-family:verdana; color:red; background-image: url(https:\/\/hookagency.com\/wp-content\/uploads\/2015\/11\/miracle-grow-light-green-gradient.jpg); \">Observations<\/h2>\n\n- So, as per the label `Negative for Pneumonia` there are no images with bounding boxes which is correct \ud83e\udd73.","80551afb":"<h1 style = \"text-align :center; color:white; background-image: url(https:\/\/cdn.pixabay.com\/photo\/2014\/06\/16\/23\/40\/blue-370128__340.png); \">Images Visualization<\/h1>"}}