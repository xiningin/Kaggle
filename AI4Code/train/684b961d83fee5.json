{"cell_type":{"1281c3d4":"code","42beaf53":"code","e43ffd62":"code","5819853e":"code","1262f746":"code","eb31f7ed":"code","e5880ec6":"code","9e1d80ed":"code","8f21483e":"code","89652561":"code","b21dee39":"code","724ee44b":"code","71c4e143":"code","997c3f38":"code","a8407553":"code","cd4967d3":"code","46ae1512":"code","fc90fa33":"code","82997ddb":"code","d6e95167":"code","d9a54672":"code","29279e84":"code","d88b4e9d":"code","7b51c0b9":"code","b87b0924":"code","818c67f2":"code","c2ea2ac7":"code","e7490f50":"code","e04137d4":"code","cac2864d":"code","3a0846a9":"code","bbb23f04":"code","af52a36e":"code","c923410a":"code","5d2dec13":"code","0bcfa263":"code","8e10dc89":"code","d0d1ee91":"code","23304964":"code","1ff0430e":"code","96699eaa":"code","7ae8f0d6":"code","6c4616ff":"code","bc64d02b":"code","e5db1f97":"code","548f654e":"code","dc9d0aca":"code","a945bc00":"code","e658dc87":"code","8d0109e4":"code","25e2c838":"code","59fa0e25":"code","ba98268a":"code","08945eab":"code","e73adf63":"code","cf65aacb":"code","ea730b72":"code","db974d09":"code","5d0a96e7":"code","a31d58c2":"code","69bacd37":"code","6dd843bc":"code","1aae7a96":"code","52b50a7c":"code","8f012597":"code","44d8415c":"code","2416b156":"code","f7418c2c":"code","483f2cab":"code","78fd7af6":"code","41379f40":"code","51567841":"code","d088a69b":"code","684800e8":"code","fa2e4d0f":"code","80b3a158":"code","85c98362":"code","25e66142":"code","39cd2733":"code","f4eb0363":"code","8cddc8d0":"code","4536a199":"code","45c91874":"code","d08631e9":"code","10b56010":"code","ec36b537":"code","d2925831":"code","6a012374":"code","030c5e77":"code","62cf9ce9":"code","f81ab147":"code","c131115f":"code","76b3761f":"code","51fb0622":"code","ddaed180":"code","baec6eb4":"code","01ec5f99":"code","887cde40":"code","c2610e61":"code","800a80bc":"code","887febf6":"code","5e7242a6":"markdown","c6f71eeb":"markdown","c43b3a29":"markdown","fdecfde1":"markdown","e170e5d7":"markdown","ea049d5b":"markdown","b4947775":"markdown","dbe3eee0":"markdown","02c5a9c2":"markdown","db0488ef":"markdown","cbb6dfd5":"markdown","68da2a89":"markdown","aa89d530":"markdown","3826ef60":"markdown","9b4dd78b":"markdown","7bb54853":"markdown","f0c0b302":"markdown","5cb7e09a":"markdown","c6f42863":"markdown","b95b2f8e":"markdown","725097e2":"markdown","bd040530":"markdown","ac857100":"markdown","ae73f6a5":"markdown","f626b719":"markdown","58dc2593":"markdown","bf0beefd":"markdown","1d8c9022":"markdown","30bc2478":"markdown","780d7cb1":"markdown","bb3ac3fb":"markdown","1d3b2a5c":"markdown"},"source":{"1281c3d4":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","42beaf53":"#import pandas as pd\n#import numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score,mean_squared_error,mean_absolute_error\nfrom sklearn.preprocessing import PolynomialFeatures, StandardScaler\nfrom sklearn.neighbors import KNeighborsRegressor\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.tree import DecisionTreeRegressor\nfrom xgboost import XGBRegressor","e43ffd62":"def resizeplot(l,a):\n    plt.figure(figsize=(l,a))","5819853e":"df = pd.read_csv('..\/input\/kc-house-data\/kc_house_data.csv')","1262f746":"df.head()","eb31f7ed":"df.drop('id',inplace=True,axis=1)","e5880ec6":"df.info()","9e1d80ed":"df['date'] = pd.to_datetime(df['date'])","8f21483e":"df['Month'] = df['date'].apply(lambda date: date.month)\ndf['Year'] = df['date'].apply(lambda date: date.year)","89652561":"df.head()","b21dee39":"df['bathrooms'] = np.round(df['bathrooms'])\ndf['floors'] = np.round(df['floors'])","724ee44b":"df.isnull().sum()","71c4e143":"df.dropna(inplace=True)","997c3f38":"df.drop('date',inplace=True,axis=1)","a8407553":"df.isnull().sum()","cd4967d3":"resizeplot(10,6)\nsns.histplot(df['price'],kde=True,bins=50)","46ae1512":"resizeplot(16,7)\nsns.heatmap(df.corr(),annot=True)","fc90fa33":"resizeplot(10,6)\nsns.scatterplot(x='yr_built',y='price',data=df,hue='view',palette = 'deep')","82997ddb":"resizeplot(10,5)\nsns.countplot(x='view',data=df)","d6e95167":"resizeplot(9,5)\nsns.countplot(x='waterfront',data=df)","d9a54672":"resizeplot(10,6)\nsns.lineplot(x='Year',y='price',data=df)","29279e84":"resizeplot(10,6)\nsns.lineplot(x='grade',y='price',data=df,palette='terrain')","d88b4e9d":"resizeplot(10,6)\nsns.boxplot(x='grade',y='price',data=df,showfliers=False)","7b51c0b9":"resizeplot(10,6)\nsns.relplot(x='sqft_lot',y='price',data=df,palette='terrain')","b87b0924":"print('Mean of 1 room with view: ',df.loc[(df['waterfront']==1)&(df['bedrooms']==1)]['price'].mean())","818c67f2":"print('Mean of 1 room without view: ',df.loc[(df['waterfront']==0)&(df['bedrooms']==1)]['price'].mean())","c2ea2ac7":"print('Mean of 2 rooms with view: ',df.loc[(df['waterfront']==1)&(df['bedrooms']==2)]['price'].mean())","e7490f50":"print('Mean of 2 rooms without view: ',df.loc[(df['waterfront']==0)&(df['bedrooms']==2)]['price'].mean())","e04137d4":"print('Mean of 3 rooms with view: ',df.loc[(df['waterfront']==1)&(df['bedrooms']==3)]['price'].mean())","cac2864d":"print('Mean of 3 rooms without view: ',df.loc[(df['waterfront']==0)&(df['bedrooms']==3)]['price'].mean())","3a0846a9":"print('Mean of 4 rooms with view: ',df.loc[(df['waterfront']==1)&(df['bedrooms']==4)]['price'].mean())","bbb23f04":"print('Mean of 4 rooms without view: ',df.loc[(df['waterfront']==0)&(df['bedrooms']==4)]['price'].mean())","af52a36e":"resizeplot(10,6)\nsns.boxplot(x='bathrooms',y='price',data=df)","c923410a":"resizeplot(10,6)\nsns.countplot(x='bedrooms',data=df)","5d2dec13":"df.info()","0bcfa263":"X = df[['bedrooms','bedrooms','bathrooms','sqft_living','sqft_lot','floors','waterfront','view','condition',\n       'grade','sqft_above','sqft_basement','sqft_living15','sqft_lot15']].values\ny = df['price'].values","8e10dc89":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, random_state=50)","d0d1ee91":"std = StandardScaler()","23304964":"X = std.fit_transform(X)","1ff0430e":"rfr = RandomForestRegressor(n_estimators=200)","96699eaa":"rfr.fit(X_train,y_train)","7ae8f0d6":"score_rfr = rfr.score(X_train,y_train)","6c4616ff":"prev_rfr = rfr.predict(X_test)","bc64d02b":"mae_rfr = mean_absolute_error(y_test,prev_rfr)","e5db1f97":"mse_rfr = mean_squared_error(y_test,prev_rfr)","548f654e":"rmse_rfr = np.sqrt(mean_squared_error(y_test,prev_rfr))","dc9d0aca":"print('Mae: ',mae_rfr)\nprint('Mse: ',mse_rfr)\nprint('Rmse: ',rmse_rfr)","a945bc00":"print(score_rfr)","e658dc87":"preco_rfr = df['price']\npredict_rfr = pd.Series(prev_rfr)\nerror_rfr = preco_rfr-predict_rfr\ndata_rfr = {'Price':preco_rfr,'Predictions':predict_rfr,'Error':error_rfr}\ndata_prev_rfr = pd.DataFrame(data_rfr)\ndata_prev_rfr.head()","8d0109e4":"resizeplot(10,6)\nplt.scatter(y_test,prev_rfr)\nplt.plot(y_test,y_test,color='red')","25e2c838":"lr = LinearRegression()","59fa0e25":"lr.fit(X_train,y_train)","ba98268a":"pred_lr = lr.predict(X_test)","08945eab":"score_lr = lr.score(X_train,y_train)","e73adf63":"print(score_lr)","cf65aacb":"lr.coef_[0]","ea730b72":"lr.intercept_","db974d09":"mae_lr = mean_absolute_error(y_test,pred_lr)\nmse_lr = mean_squared_error(y_test,pred_lr)\nrmse_lr = np.sqrt(mse_lr)","5d0a96e7":"print('Mae_lr: ',mae_lr)\nprint('Mse_lr: ',mse_lr)\nprint('Rmse_lr: ',rmse_lr)","a31d58c2":"preco_lr = df['price']\npredict_lr = pd.Series(pred_lr)\nerror_lr = preco_lr-predict_lr\ndata_lr = {'Price':preco_lr,'Predictions':predict_lr,'Error':error_lr}\ndata_prev_lr = pd.DataFrame(data_lr)\ndata_prev_lr.head()","69bacd37":"resizeplot(10,6)\nplt.scatter(y_test,pred_lr)\nplt.plot(y_test,y_test,color='red')","6dd843bc":"poly = PolynomialFeatures(degree=4)","1aae7a96":"X_train_poly = poly.fit_transform(X_train)","52b50a7c":"X_test_poly = poly.transform(X_test)","8f012597":"lr.fit(X_train_poly,y_train)","44d8415c":"score_poly = lr.score(X_train_poly,y_train)","2416b156":"print(score_poly)","f7418c2c":"pred_poly = lr.predict(X_test_poly)","483f2cab":"pred_poly[0]","78fd7af6":"mae_poly = mean_absolute_error(y_test,pred_poly)\nmse_poly = mean_squared_error(y_test,pred_poly)\nrmse_poly = np.sqrt(mean_squared_error(y_test,pred_poly))","41379f40":"print('Mae_poly:',mae_poly)\nprint('Mse_poly:',mse_poly)\nprint('Rmse_poly:',rmse_poly)","51567841":"dtr = DecisionTreeRegressor(random_state=0)","d088a69b":"dtr.fit(X_train,y_train)","684800e8":"pred_dtr = dtr.predict(X_test)","fa2e4d0f":"score_dtr = dtr.score(X_train,y_train)","80b3a158":"print(score_dtr)","85c98362":"mae_dtr = mean_absolute_error(y_test,pred_dtr)\nmse_dtr = mean_squared_error(y_test,pred_dtr)\nrmse_dtr = np.sqrt(mse_dtr)","25e66142":"print('Mae_dtr: ',mae_dtr)\nprint('Mse_dtr: ',mse_dtr)\nprint('Rmse_dtr: ',rmse_dtr)","39cd2733":"price_dtr = df['price']\npredict_dtr = pd.Series(pred_dtr)\nerror_dtr = price_dtr-predict_dtr\ndata_dtr = {'Price':price_dtr,'Predictions':predict_dtr,'Error':error_dtr}\ndata_prev_dtr = pd.DataFrame(data_dtr)\ndata_prev_dtr.head()","f4eb0363":"data_prev_dtr['Percentage_error'] = np.abs(data_prev_dtr['Error'])*100\/data_prev_dtr['Price']","8cddc8d0":"data_prev_dtr.head()","4536a199":"resizeplot(10,6)\nplt.scatter(y_test,pred_dtr)\nplt.plot(y_test,y_test,color='red')","45c91874":"knr = KNeighborsRegressor(n_neighbors = 10)","d08631e9":"knr.fit(X_train,y_train)","10b56010":"score_knr = knr.score(X_train,y_train)","ec36b537":"print(score_knr)","d2925831":"pred_knr = knr.predict(X_test)","6a012374":"mae_knr = mean_absolute_error(y_test,pred_knr)\nmse_knr = mean_squared_error(y_test,pred_knr)\nrmse_knr = np.sqrt(mse_knr)","030c5e77":"print('Mae_knr: ',mae_knr)\nprint('Mse_knr: ',mse_knr)\nprint('Rmse_knr: ',rmse_knr)","62cf9ce9":"price_knr = df['price']\npredict_knr = pd.Series(pred_knr)\nerror_knr = price_dtr-predict_knr\ndata_knr = {'Price':price_knr,'Predictions':predict_knr,'Error':error_knr}\ndata_prev_knr = pd.DataFrame(data_knr)\ndata_prev_knr.head()","f81ab147":"resizeplot(10,6)\nplt.scatter(y_test,pred_knr)\nplt.plot(y_test,y_test,color='red')","c131115f":"xgb = XGBRegressor()","76b3761f":"xgb.fit(X_train,y_train)","51fb0622":"pred_xgb = xgb.predict(X_test)","ddaed180":"score_xgb = xgb.score(X_train,y_train)","baec6eb4":"print(score_xgb)","01ec5f99":"mae_xgb = mean_absolute_error(y_test,pred_xgb)\nmse_xgb = mean_squared_error(y_test,pred_xgb)\nrmse_xgb = np.sqrt(mean_squared_error(y_test,pred_xgb))","887cde40":"print('Mae_xgb: ',mae_xgb)\nprint('Mse_xgb: ',mse_xgb)\nprint('Rmse_xgb: ',rmse_xgb)","c2610e61":"price_xgb = df['price']\npredict_xgb = pd.Series(pred_xgb)\nerror_xgb = price_xgb-predict_xgb\ndata_xgb = {'Price':price_xgb,'Predictions':predict_xgb,'Error':error_xgb}\ndata_prev_xgb = pd.DataFrame(data_xgb)\ndata_prev_xgb.head()","800a80bc":"resizeplot(10,6)\nplt.scatter(y_test,pred_xgb)\nplt.plot(y_test,y_test,color='red')","887febf6":"print('Decision Tree Regressor: ',round(score_dtr,3), '->', 'Rmse_DTR: ',rmse_dtr)\nprint('Random Forrest Regressor: ', round(score_rfr,3), '->', 'Rmse_RFR: ',rmse_rfr)\nprint('XGBOOST Regressor: ', round(score_xgb,3),'Rmse_XGB:','->',rmse_xgb)\nprint('Polynomial Regressor: ', round(score_poly,3),'->','Rmse_POLY: ',rmse_poly)\nprint('Linear Regression: ', round(score_lr,3),'Rmse_LR: ','->',rmse_lr)\nprint('KNN Regressor: ', round(score_knr,3),'Rmse_KNN: ','->',rmse_knr)","5e7242a6":"> **KNN REGRESSOR**","c6f71eeb":"**DECISION TREE REGRESSOR**","c43b3a29":"**A linear analysis showing us the increase of the price along the years.**","fdecfde1":"**Bellow, a fuction to resize our plots**","e170e5d7":"**Yes, just two.let's clean it.**","ea049d5b":"![5-Addison_Park_Community_Nov_2018-1200x650.jpg](attachment:5-Addison_Park_Community_Nov_2018-1200x650.jpg)","b4947775":"# Let's start creating our models","dbe3eee0":"**Let's drop the 'id' column. Not important for our work here.**","02c5a9c2":"**And of course, the higher the grade the higher the price.\nNote that, the price does not vary much between 2 and 6,\nprobably due to the similarity of the houses.**","db0488ef":"**Let's drop de 'date column as I mentioned before.**","cbb6dfd5":"**Let's visualyze for another perspective.**","68da2a89":"**Let's see the result.**","aa89d530":"**POLYNOMIAL REGRESSION**","3826ef60":"**Now, I'll transform the 'date' column in a usefull column, spliting it in a Year column and Month column.**","9b4dd78b":"**We import the main libraries.**","7bb54853":"**Bellow, some of a few correlated features.**","f0c0b302":"**Hello everyone, I hope you are well.\nToday I will be conducting the analysis and forecasting of King County - Washington - US registration prices.\nBefore carrying out this deployment what is important to emphasize?\nMany machine learning algorithms work best when numeric input variables are sized to a standard range. This includes algorithms that use a weighted sum of input, such as linear regression, and algorithms that use distance measures, such as knn. Input variables can have different units which, in turn, can mean input variables with different scales.\n\nIn the end if you liked it, give a positive vote, if you didn't like it, leave the comment.\n\nLet's get started!**","5cb7e09a":"**It is important to note that although Decision Tree gave us a 99% score, the Random Forest Regressor dos algorithm gave a lower score, 95%, however the mean square error was lower than Decision tree. In that case it will depend on what the analyst looks for in relation to the data and whether this average value will be and well above what he wants or enough enough for the insight of his business.**\n\n\n**Thats all for now guys,and be healthy and be safe.**","c6f42863":"**LINEAR REGRESSION**","b95b2f8e":"**Relating the number of bathrooms with the price.**","725097e2":"**Normalize the data.**","bd040530":"**If you notice, there's a numbers in the columns 'bathrooms' and 'floors' indicating a float numbers.\nLet's turn them on integers.**","ac857100":"**As we can see bellow, there is a much more residences without a View than the others.**","ae73f6a5":"**There is some null data?**","f626b719":"**XGBOOST**","58dc2593":"**..and much less waterfront houses.**","bf0beefd":"**#RANDOM FOREST REGRESSOR**","1d8c9022":"**Starting the visualizations with distplot we can see a density of the Price but if you notice we can see a little bit outliers over 2 million.**","30bc2478":"**Now, let's do an analysis relating the number of rooms with a view to the price of the property.**","780d7cb1":"**Now, let's see how the price changed along the years.**","bb3ac3fb":"**Let's see with what we're dealing with.**","1d3b2a5c":"**We can see that the residences have more houses with 3 and 4 bedrooms than the others, which leads us to realize that there are several other attributes that value the house and not just bedrooms and bathrooms.**"}}