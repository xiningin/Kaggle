{"cell_type":{"5e786f1a":"code","8169cd62":"code","3cac747d":"code","849790c2":"code","8138fedb":"code","de02817a":"code","e44cfdc8":"code","0a114ae5":"code","6704aacd":"code","af6336de":"code","c2c3cc50":"code","06b1d6d6":"code","388c1cfd":"code","efcc49c8":"code","9d3d8c20":"code","55c17b94":"code","f1f847de":"code","74db219c":"markdown","377512b3":"markdown","91851e30":"markdown","6e59a445":"markdown","d8239e40":"markdown","4b25886b":"markdown","732d123b":"markdown","319b48b2":"markdown","f0373cb6":"markdown"},"source":{"5e786f1a":"import pandas as pd\nimport numpy as np\nimport matplotlib as plt\nimport seaborn as sns\nimport plotly.offline as pyo\nimport plotly.graph_objs as go\nimport plotly.express as px\n%matplotlib inline","8169cd62":"df=pd.read_csv(\"..\/input\/amazon-top-50-bestselling-books-2009-2019\/bestsellers with categories.csv\")\ndf.head(10)","3cac747d":"df.info()","849790c2":"#Finding the distribution of Fiction vs Non Fiction books over years\nsns.lineplot(x='Year',y='Reviews',hue='Genre',data=df)","8138fedb":"#Prices of books across years for Fiction vs Non Fiction\ng=sns.FacetGrid(data=df,col='Genre')\ng.map(sns.lineplot,'Year','Price')","de02817a":"#Average Price of books\ndf.groupby('Genre').agg({\"Price\":\"mean\"})","e44cfdc8":"#Since the prices of Fiction books are low, the number of people buying it would be high and hence the higher reviews probably.\n#Let's compare the user rating for Genre\ng=sns.FacetGrid(data=df,col='Genre')\ng.map(sns.histplot,'User Rating',kde=False,bins=50)","0a114ae5":"rating=df[df['User Rating']>4]\nprint(\"Number of Books with Rating 4 + is\",rating['Name'].count())","6704aacd":"#Let's get the author with their average rating for the books published over the years\navg_rating=df.groupby(['Genre','Author']).agg({\"User Rating\":\"mean\",\"Reviews\":\"sum\",\"Price\":\"mean\"}).sort_values([\"User Rating\",\"Reviews\"]).reset_index()","af6336de":"#By taking the mean of user rating over the year, we shall find the count of authors by their user rating\navg_rating['User Rating']=avg_rating['User Rating'].round(1)\nsns.histplot(avg_rating[\"User Rating\"],kde=False)","c2c3cc50":"avg_rating[\"Rank\"]=avg_rating.groupby('Genre')[\"User Rating\"].rank(\"dense\",ascending=False)\n#top Authors with the highest rating\nrank1=avg_rating[avg_rating.Rank==1]\nfig=px.bar(rank1,x=\"Author\",y=\"User Rating\",color=\"Genre\",barmode=\"group\",title=\"Authors with Highest Rating\")\nfig.show()","06b1d6d6":"#Top 10 Reviews\ndf2=avg_rating.groupby([\"Genre\"]).apply(lambda x:x.sort_values([\"Reviews\"],ascending=False)).reset_index(drop=True)\ndf3 = df2.groupby('Genre').head(10)\nfig=px.bar(df3,x=\"Author\",y=\"Reviews\",color=\"Genre\",barmode=\"group\",title=\"Top 10 Author Reviews by Genre\")\nfig.show()","388c1cfd":"#Top 10 highest priced books \n#Replace this with word cloud\nprice1=df.groupby([\"Genre\"]).apply(lambda x:x.sort_values([\"Price\"],ascending=False)).reset_index(drop=True)\nprice2=price1.groupby('Genre').head(10)\nfig=px.bar(price2.sort_values([\"Year\"]),x=\"Name\",y=\"Price\",color=\"Genre\",title=\"Top 10 Priced Books by Genre\",hover_data=[\"User Rating\",\"Reviews\"])\nfig.update_xaxes(showticklabels=False)\nfig.show()","efcc49c8":"#let's find the relationship between price Vs Reviews, Price Vs User Rating and User Rating vs Reviews by Year\nrating_year=df.groupby(['Genre','Author','Year']).agg({\"User Rating\":\"mean\",\"Reviews\":\"sum\",\"Price\":\"mean\"}).sort_values([\"User Rating\",\"Reviews\"]).reset_index()","9d3d8c20":"fig=px.scatter_matrix(rating_year,dimensions=[\"Price\",\"Reviews\",\"User Rating\"],color=\"Year\",hover_data=['Author'])\nfig.update_traces(diagonal_visible=False)\nfig.show()","55c17b94":"#We shall find the price and reviews of each book over years.\nfig=px.scatter(df.sort_values([\"Year\"]),x=\"Price\",y=\"Reviews\",animation_frame=\"Year\",size=\"User Rating\",color=\"Genre\",hover_name=\"Name\"\n              ,facet_col=\"Genre\",hover_data=[\"Author\"],title=\"Reviews vs Price of Books over Year\")\nfig.show()","f1f847de":"#lets find the top authors who were in top 10 Reviews with the maximum rating\ntopauthors=df3.merge(rank1,on=[\"User Rating\",\"Author\"],how='inner').reset_index()\ntop_authorbooks=df.merge(topauthors,on=['Author'],how='inner')\nfig1=px.sunburst(top_authorbooks,path=['Author','Name'],values='Reviews',title=\"Top Author and their Books\")\nfig1.show()","74db219c":"The Above graph inidicates that Fiction genre had more reviews compared to Non Fiction. This gives us an idea that Fiction is more famous.","377512b3":"Note: Hovering over the bar graph above would show the book names","91851e30":"These are the top authors who has maximum rating and their reviews fall under the top 10 category","6e59a445":"The Price of Non Fiction is higher over the years","d8239e40":"Note that there are no rating below 3 for Non Fiction.\n","4b25886b":"The above Histogram suggests that the number of Authors with an average rating of 4.8 is the highest","732d123b":"From this graph we can find that number of Fiction books with highest rating is 11 and Non Fiction is 4","319b48b2":"The above plot shows the relationship between the metric. This is to see if there is any abvious relationship between one another****","f0373cb6":"# Best Seller Analysis using Plotly, Seaborn and Matplotlib"}}