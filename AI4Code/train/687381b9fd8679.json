{"cell_type":{"5d833b46":"code","4cad66ed":"code","33182420":"code","b4e14347":"code","f9662772":"code","9608836d":"code","d5d7266d":"code","64494857":"code","d556bc6c":"code","ba8bcf21":"code","06ab5a0d":"code","dfc5d072":"code","6d3802fa":"code","dd37f69b":"code","f7d5ec24":"code","2d0426f3":"code","9cb46ae7":"code","7e578069":"code","2b86fc28":"code","d9b1775f":"code","21aaba34":"code","528dd417":"code","60c5f82f":"code","8f98d6e5":"code","6dc4fe40":"code","d6367b2c":"code","465b347c":"code","d429367d":"code","dbf2db8b":"code","fdaff7da":"code","72f03fb1":"code","23f205cb":"code","a8931761":"code","b4f60183":"code","0c3de4c2":"code","330cec40":"markdown","252cba03":"markdown","d6d02d2f":"markdown","5bb19c26":"markdown","b23bac15":"markdown","2d285c3e":"markdown","9080ba83":"markdown","9079cd1d":"markdown","64dd265b":"markdown","1b4cbb54":"markdown","e9436f62":"markdown","de2a0cb3":"markdown","73416463":"markdown","5049331a":"markdown","af89aae4":"markdown","99acb1f6":"markdown","bf576917":"markdown","190651b3":"markdown","46faedec":"markdown","7530db69":"markdown","deea98c8":"markdown","0c14b4df":"markdown","2e694e83":"markdown","de9077d9":"markdown","c306e718":"markdown","e65d19cc":"markdown"},"source":{"5d833b46":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport numpy as np\nimport pandas as pd\n%matplotlib inline\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport plotly.io as pio\npio.templates.default = \"plotly_dark\"\nfrom plotly.subplots import make_subplots\n#init_notebook_mode{connected=True}\nimport folium \nfrom folium import plugins\nfrom tqdm.notebook import tqdm as tqdm\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","4cad66ed":"cleaned_data=pd.read_csv('\/kaggle\/input\/corona-virus-report\/covid_19_clean_complete.csv')\ncleaned_data.head(15)","33182420":"# cases \ncases = ['Confirmed', 'Deaths', 'Recovered', 'Active']\n\n# Active Case = confirmed - deaths - recovered\ncleaned_data['Active'] = cleaned_data['Confirmed'] - cleaned_data['Deaths'] - cleaned_data['Recovered']\n\n# filling missing values \ncleaned_data[['Province\/State']] = cleaned_data[['Province\/State']].fillna('')\ncleaned_data[cases] = cleaned_data[cases].fillna(0)\n\ncleaned_data.head()","b4e14347":"Date_df=cleaned_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nDate_df=Date_df.sort_values(by=['Confirmed'])\nDate_df.head(40)","f9662772":"temp = Date_df.melt(id_vars=\"Date\", value_vars=['Recovered', 'Deaths', 'Active'],\n                 var_name='case', value_name='count')\nfig = px.area(temp, x=\"Date\", y=\"count\", color='case',\n             title='Cases over time: Area Plot', color_discrete_sequence = ['cyan', 'red', 'orange'])\nfig.update_xaxes(tick0=4, dtick=4)\nfig.show()","9608836d":"for column in Date_df[['Confirmed']]:\n   # Select column contents by column name using [] operator\n   columnSeriesObj = Date_df[column]\n#    print('Colunm Name : ', column)\n#    print('Column Contents : ', columnSeriesObj.values)\n   new_cases=columnSeriesObj.values\nmy_list=[]\nfor i in range(0,len(new_cases)-1):\n    new_value=new_cases[i+1]-new_cases[i]\n    my_list.append(new_value)\nmy_list.insert(0,0)\nprint(len(my_list))\nprint(Date_df.shape)\nDate_df['New_cases'] = np.array(my_list)\n","d5d7266d":"import plotly.express as px\nfig = go.Figure()\nfig.add_trace(go.Bar(\n    x=Date_df['Date'],\n    y=Date_df['New_cases'],\n    name='New_cases',\n    marker_color='grey'\n))\nfig.show()","64494857":"for column in Date_df[['Recovered']]:\n   # Select column contents by column name using [] operator\n   columnSeriesObj = Date_df[column]\n#    print('Colunm Name : ', column)\n#    print('Column Contents : ', columnSeriesObj.values)\n   new_recover=columnSeriesObj.values\nmy_list1=[]\nfor i in range(0,len(new_recover)-1):\n    new_value=new_recover[i+1]-new_recover[i]\n    my_list1.append(new_value)\nmy_list1.insert(0,0)\nprint(len(my_list1))\nprint(Date_df.shape)\nDate_df['New_recover'] = np.array(my_list1)\nDate_df.head(5)","d556bc6c":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=Date_df['Date'], y=Date_df['New_cases'],\n                    mode='lines+markers',\n                    name='New_cases',line=dict(color='red')))\nfig.add_trace(go.Scatter(x=Date_df['Date'], y=Date_df['New_recover'],\n                    mode='lines+markers',\n                    name='New_recover',line=dict(color='green')))\nfig.update_xaxes(tick0=4, dtick=4)\nfig.show()","ba8bcf21":"Date_df['Closed_cases']=Date_df['Recovered']+Date_df['Deaths']","06ab5a0d":"Date_df['Recover_percent']=(Date_df['Recovered']\/Date_df['Closed_cases'])*100\nDate_df['Death_percent']=(Date_df['Deaths']\/Date_df['Closed_cases'])*100\nDate_df.head(5)\n","dfc5d072":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=Date_df['Date'], y=Date_df['Recover_percent'],\n                    mode='lines+markers',\n                    name='Recover %',line=dict(color='green')))\nfig.add_trace(go.Scatter(x=Date_df['Date'], y=Date_df['Death_percent'],\n                    mode='lines+markers',\n                    name='Death %',line=dict(color='red')))\nfig.update_xaxes(tick0=4, dtick=4)\nfig.update_layout(title='Output of Closed Cases(Recovery OR Death)',\n                   xaxis_title='Date',\n                   yaxis_title='Percentage')\nfig.show()","6d3802fa":"new_df=cleaned_data.loc[cleaned_data['Country\/Region'] == 'China'] \n# v=cleaned_data.groupby('Country\/Region')['Active'].sum().reset_index()\n# v = v.melt(id_vars=\"Country\/Region\", value_vars=['Active'],\n#                  var_name='case', value_name='count')\nnew_df1=cleaned_data.loc[cleaned_data['Date'] == '4\/7\/20'] \nres_df=new_df1.groupby('Country\/Region')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nfig = px.pie(res_df, values='Confirmed', names='Country\/Region', title='Countries Cases Distribution')\nfig.show()","dd37f69b":"top_10=res_df.sort_values(by=['Confirmed'],ascending=False)[0:10]","f7d5ec24":"import plotly.express as px\nfig = px.bar(top_10, x='Country\/Region', y='Confirmed')\nfig.show()\n","2d0426f3":"top_10_death=res_df.sort_values(by=['Deaths'],ascending=False)[0:10]\ntop_10_death.head(5)\nimport plotly.express as px\nfig = px.bar(top_10_death, x='Country\/Region', y='Deaths')\nfig.show()","9cb46ae7":"us_data=cleaned_data.loc[cleaned_data['Country\/Region']=='US']\nus_data=us_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nus_data=us_data.sort_values(by=['Confirmed'])\n\n\nSpain_data=cleaned_data.loc[cleaned_data['Country\/Region']=='Spain']\nSpain_data=Spain_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nSpain_data=Spain_data.sort_values(by=['Confirmed'])\n\n\n\nItaly_data=cleaned_data.loc[cleaned_data['Country\/Region']=='Italy']\nItaly_data=Italy_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nItaly_data=Italy_data.sort_values(by=['Confirmed'])\n\n\n\nFrance_data=cleaned_data.loc[cleaned_data['Country\/Region']=='France']\nFrance_data=France_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nFrance_data=France_data.sort_values(by=['Confirmed'])\n\n\n\nGermany_data=cleaned_data.loc[cleaned_data['Country\/Region']=='Germany']\nGermany_data=Germany_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nGermany_data=Germany_data.sort_values(by=['Confirmed'])\n\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=us_data['Confirmed'][30:],\n                    mode='markers',\n                    name='US'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Spain_data['Confirmed'][30:],\n                    mode='markers',\n                    name='Spain'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Italy_data['Confirmed'][30:],\n                    mode='markers',\n                    name='Italy'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=France_data['Confirmed'][30:],\n                    mode='markers',\n                    name='France'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Germany_data['Confirmed'][30:],\n                    mode='markers',\n                    name='Germany'))\nfig.update_xaxes(tick0=4, dtick=4)\nfig.update_layout(height=500, width=1000, title_text=\"Case progrssion of top countries\")\nfig.show()","7e578069":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=us_data['Deaths'][30:],\n                    mode='markers',\n                    name='US'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Spain_data['Deaths'][30:],\n                    mode='markers',\n                    name='Spain'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Italy_data['Deaths'][30:],\n                    mode='markers',\n                    name='Italy'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=France_data['Deaths'][30:],\n                    mode='markers',\n                    name='France'))\nfig.add_trace(go.Scatter(x=us_data['Date'][30:], y=Germany_data['Deaths'][30:],\n                    mode='markers',\n                    name='Germany'))\nfig.update_xaxes(tick0=4, dtick=4)\n\nfig.update_layout(height=500, width=1000, title_text=\"Death progrssion of top countries\")\nfig.show()\n","2b86fc28":"train_dataset = pd.read_csv('..\/input\/time-covid-19\/time_series_covid_19_confirmed.csv')\ndrop_clo = ['Province\/State','Country\/Region','Lat','Long']\ntrain_dataset=train_dataset.drop(drop_clo,axis=1)\ndatewise= list(train_dataset.columns)\nval_dataset = train_dataset[datewise[-15:]]","d9b1775f":"date_array=np.asarray(Date_df['Date'])\nfig = make_subplots(rows=3, cols=1)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[0].values[:-15], marker=dict(color=\"dodgerblue\"), showlegend=False,),\n    row=1, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[0].values, mode='lines+markers', marker=dict(color=\"darkorange\"), showlegend=False,),\n    row=1, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[1].values[:-15], marker=dict(color=\"dodgerblue\"), showlegend=False),\n    row=2, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[1].values, mode='lines+markers', marker=dict(color=\"darkorange\"), showlegend=False),\n    row=2, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[2].values[:-15], marker=dict(color=\"dodgerblue\"), showlegend=False),\n    row=3, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[2].values, mode='lines+markers', marker=dict(color=\"darkorange\"), showlegend=False),\n    row=3, col=1\n)\n\nfig.update_layout(height=1200, width=800, title_text=\"Train (blue) vs. Validation (orange) sales\")\nfig.show()","21aaba34":"predictions = []\nfor i in range(len(val_dataset.columns)):\n    if i == 0:\n        predictions.append(train_dataset[train_dataset.columns[-16]].values)\n    else:\n        predictions.append(val_dataset[val_dataset.columns[i-1]].values)\n    \npredictions = np.transpose(np.array([row.tolist() for row in predictions]))\nerror_naive = np.linalg.norm(predictions[:] - val_dataset.values[:])\/len(predictions[:])","528dd417":"pred_1 = predictions[0]\npred_2 = predictions[1]\npred_3 = predictions[2]\n\nfig = make_subplots(rows=3, cols=1)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[0].values[:-15], marker=dict(color=\"dodgerblue\"),name=\"Train\"),\n    row=1, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[0].values, mode='lines+markers', marker=dict(color=\"darkorange\"), name=\"Validation\"),\n    row=1, col=1,\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=pred_1, mode='lines', marker=dict(color=\"seagreen\"),\n               name=\"Pred\"),\n    row=1, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[1].values[:-15], marker=dict(color=\"dodgerblue\"), showlegend=False),\n    row=2, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[1].values, mode='lines+markers', marker=dict(color=\"darkorange\"), showlegend=False),\n    row=2, col=1\n)\n\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=pred_2, mode='lines', marker=dict(color=\"seagreen\"), showlegend=False,\n               name=\"Denoised signal\"),\n    row=2, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[:-15], mode='lines+markers', y=train_dataset.loc[2].values[:-15], marker=dict(color=\"dodgerblue\"), showlegend=False),\n    row=3, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=val_dataset.loc[2].values, mode='lines+markers', marker=dict(color=\"darkorange\"), showlegend=False),\n    row=3, col=1\n)\n\nfig.add_trace(\n    go.Scatter(x=date_array[-15:], y=pred_3, mode='lines', marker=dict(color=\"seagreen\"), showlegend=False,\n               name=\"Denoised signal\"),\n    row=3, col=1\n)\n\nfig.update_layout(height=1200, width=800, title_text=\"Naive approach\")\nfig.show()","60c5f82f":"from sklearn.metrics import mean_squared_error\nfrom math import sqrt\nrms = sqrt(mean_squared_error(predictions[:] ,val_dataset.values[:]))\nprint(rms)","8f98d6e5":"model_train=Date_df.iloc[:int(Date_df.shape[0]*0.90)]\nvalid=Date_df.iloc[int(Date_df.shape[0]*0.90):]","6dc4fe40":"import statsmodels.api as sm\nfrom statsmodels.tsa.api import Holt,SimpleExpSmoothing,ExponentialSmoothing\nholt=Holt(np.asarray(model_train[\"Confirmed\"])).fit(smoothing_level=0.2, smoothing_slope=0.8)\ny_pred=valid.copy()","d6367b2c":"import matplotlib.pyplot as plt\ny_pred[\"Holt\"]=holt.forecast(len(valid))\n#model_scores.append(np.sqrt(mean_squared_error(y_pred[\"Confirmed\"],y_pred[\"Holt\"])))\nprint(\"Root Mean Square Error Holt's Linear Model: \",np.sqrt(mean_squared_error(y_pred[\"Confirmed\"],y_pred[\"Holt\"])))","465b347c":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=Date_df['Date'], y=model_train['Confirmed'],\n                    mode='lines+markers',\n                    name='Train ',line=dict(color='green')))\nfig.add_trace(go.Scatter(x=valid['Date'], y=valid['Confirmed'],\n                    mode='lines+markers',\n                    name='validation ',line=dict(color='red')))\nfig.add_trace(go.Scatter(x=valid['Date'], y=y_pred[\"Holt\"],\n                    mode='lines+markers',\n                    name='predicted ',line=dict(color='white')))\nfig.update_xaxes(tick0=4, dtick=4)\nfig.update_layout(title='Holt Linear Model',\n                   xaxis_title='Date',\n                   yaxis_title='Percentage')\nfig.show()","d429367d":"us_data=cleaned_data.loc[cleaned_data['Country\/Region']=='US']\nus_data=us_data.groupby('Date')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()\nus_data=us_data.sort_values(by=['Confirmed'])\n","dbf2db8b":"state_data=cleaned_data.loc[cleaned_data['Country\/Region']=='US']\nstate_data.head(5)","fdaff7da":"fig = go.Figure()\nfig.add_trace(go.Scatter(x=us_data['Date'], y=us_data['Active'],\n                    mode='lines+markers',\n                    name='Active'))\nfig.add_trace(go.Scatter(x=us_data['Date'], y=us_data['Deaths'],\n                    mode='lines+markers',\n                    name='Deaths'))\nfig.update_xaxes(tick0=4, dtick=4)\nfig.show()","72f03fb1":"new_df=cleaned_data.loc[cleaned_data['Country\/Region'] == 'China'] \n# v=cleaned_data.groupby('Country\/Region')['Active'].sum().reset_index()\n# v = v.melt(id_vars=\"Country\/Region\", value_vars=['Active'],\n#                  var_name='case', value_name='count')\nnew_df1=cleaned_data.loc[cleaned_data['Date'] == '4\/7\/20'] \nres_df=new_df1.groupby('Country\/Region')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()","23f205cb":"new_df1=cleaned_data.loc[cleaned_data['Date'] == '4\/7\/20'] ","a8931761":"res_df=new_df1.groupby('Country\/Region')['Confirmed','Recovered', 'Deaths', 'Active'].sum().reset_index()","b4f60183":"\nimport plotly.graph_objects as go\n\n\n\nfig = go.Figure()\nfig.add_trace(go.Bar(\n    x=top_10['Country\/Region'],\n    y=top_10['Confirmed'],\n    name='Confirmed',\n    marker_color='indianred'\n))\nfig.add_trace(go.Bar(\n    x=top_10['Country\/Region'],\n    y=top_10['Active'],\n    name='Active',\n    marker_color='lightsalmon'\n))\n\nfig.add_trace(go.Bar(\n    x=top_10['Country\/Region'],\n    y=top_10['Deaths'],\n    name='Deaths',\n    marker_color='red'\n))\nfig.add_trace(go.Bar(\n    x=top_10['Country\/Region'],\n    y=top_10['Recovered'],\n    name='Recovered',\n    marker_color='green'\n))\n\n# Here we modify the tickangle of the xaxis, resulting in rotated labels.\nfig.update_layout(barmode='group', xaxis_tickangle=-45)\nfig.show()","0c3de4c2":"import plotly.express as px\nfig = px.bar(top_10, x=\"sex\", y=\"total_bill\", color=\"smoker\", barmode=\"group\",\n             facet_row=\"time\", facet_col=\"day\",\n             category_orders={\"day\": [\"Thur\", \"Fri\", \"Sat\", \"Sun\"],\n                              \"time\": [\"Lunch\", \"Dinner\"]})\nfig.show()","330cec40":"# Naive approach\nThe first approach is the very simple naive approach. It simply forecasts the next day's cases as the current day's cases. The model can be summarized as:\n\n<img src=\"https:\/\/i.imgur.com\/r8wjrzk.png\" width=\"120px\">\n\nIn the above equation, yt+1 is the predicted value for the next day's cases and yt is today's cases. The model predicts tomorrow's cases as today's sales. Now let us see how this simple model performs on our miniature dataset. The training data is in blue, validation data in orange, and predictions in green.","252cba03":"Graph shows the current status of total number of cases been increased or decreased on daily basis. as per it we could see the first rise was on 13th feburary,2020 upto 13,639 cases , whereas second rise could be seen exact after a month on 13th march,2020 upto 16,853. Highest peek was on 4th april,2020 upto 1,01,488.Since 13th march storm didn't ended it began to rise as per the date in worldwide.","d6d02d2f":"**Newly Infected vs. Newly Recovered**","5bb19c26":"**Outcome of Cases (Recovery or Death)**","b23bac15":"**Preprocessing**","2d285c3e":"**Death progression of top countries**","9080ba83":"**Daily new cases**","9079cd1d":"#  Train\/Val split \n\n> First, we need to create miniature training and validation sets to train and validate our models. I will take the last 15 days as the validation data and the 55 days before that as the training data. We need to predict the sales in the validation data using the sales in the training data.**","64dd265b":"# Holt's Linear model","1b4cbb54":"# NEXT STEP: \n* Holt's Winter Model\n* ARIMA\n","e9436f62":"### Forecast, level, and trend equations respectively\n<img src=\"https:\/\/i.imgur.com\/MHgcgGo.png\" width=\"180px\">\n<img src=\"https:\/\/i.imgur.com\/3ImRHEO.png\" width=\"300px\">\n<img src=\"https:\/\/i.imgur.com\/XExnvMX.png\" width=\"300px\">\n","de2a0cb3":"**TOP 10 Countries with most confirmed cases**","73416463":"# **Modeling**","5049331a":"**Total Cases**","af89aae4":"In this graph less of variation can be seen in case of newly recovered cases and high rate of variation in new cases as new one were being added to the list on daily basis worldwide. first rise of new cases was between 12th and 15th feburary,2020 and since after 8th of march it kept rising at a normal rate.","99acb1f6":"# Moving on to Top 5 Countries","bf576917":"maximum of people found infected with COVID-19 was in US followed by the countries like Spain , Italy , France and Germany","190651b3":"#  End","46faedec":"# END","7530db69":"Top 10 countries with most death cases","deea98c8":"As per the graph we could analysis that Active cases were ona constant growth between 11th februrary,2020 and 12th march,2020 but eventually started growing at an increasing rate since 14th march,2020 till date as per data.","0c14b4df":"Percentage is a better way to represent the recoverd cases and deaths during COVID-19 as it gives a better visualization of the situation.\n\nthere was time between 22nd january and 31st january,2020 when percentage of people recovered and persons who dierd were 50%. Fortunately the percebtage of recovered people rised as on 6th of march,2020 people who recovered were 94.167% whereas the people who died were just 5.832%. Lately it reduced but at a decreasing rate as percentage of people recoverd was 78.34% as to 21.65% of people who died as on 7th april,2020.","2e694e83":"**Countries Cases Distribution**","de9077d9":"**Case Progression of top 5 countries**","c306e718":"**1. US**","e65d19cc":"\n# World Stats"}}