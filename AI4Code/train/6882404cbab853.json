{"cell_type":{"69512225":"code","cd8af512":"code","a0479158":"code","5149dab8":"markdown"},"source":{"69512225":"# Install zarr and load packages\n!pip install -qq zarr\nimport tifffile, cv2, zarr\nfrom pathlib import Path\nimport matplotlib.pyplot as plt\nfrom tqdm.notebook import tqdm","cd8af512":"# Settings\nscale = 2\npath = Path('..\/input\/cptacpda')\nfiles = [f for f in path.iterdir() if f.suffix=='.svs']\ng_data = zarr.group(f'images_scale{scale}')","a0479158":"# Loop over files\nfor f in tqdm(files):\n    print(f.name)\n    img = tifffile.imread(f)\n    \n    if scale!=1:\n        new_size = (img.shape[1] \/\/ scale, img.shape[0] \/\/ scale)\n        print(f'Resizing from {img.shape[:2]} to {new_size}')\n        img = cv2.resize(img, new_size)\n    \n    g_data[f.stem] = img\n    print(g_data[f.stem].info)\n    \n    print('Plotting')\n    fig, ax = plt.subplots(figsize=(15,15))\n    shape = img.shape\n    ax.imshow(cv2.resize(img, (1024, 1024*shape[0]\/\/shape[1])))\n    plt.show()","5149dab8":"# CPTAC-PDA image conversion\n\n> Convert svs files to zarr files\n\n***"}}