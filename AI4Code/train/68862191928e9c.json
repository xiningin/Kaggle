{"cell_type":{"d8c2f6bc":"code","b8ee3969":"code","958dc862":"code","96eb3101":"code","4310f1af":"code","a4fe3c15":"code","acb1dad9":"code","b40f0123":"code","77271c31":"code","5b5ac4d6":"code","72b04308":"code","d1e33bb0":"code","03edf905":"code","5237b467":"code","987e7c64":"code","561d20a3":"code","2c6ea3d9":"code","88fd0f69":"code","a8118b2b":"code","cf375e3e":"code","ac95061e":"code","64676779":"code","025214b0":"code","8324dbd9":"code","71a894c0":"code","39ad9e99":"code","a2aff932":"code","43c36829":"code","5881ee36":"code","c2638eaf":"code","2c60579c":"code","9a666bc0":"code","30710cf9":"code","40cb8919":"code","ef14b891":"code","428d15cc":"code","e5165792":"code","c3b60340":"code","8e306db9":"code","73883f87":"code","237662b9":"code","e3286a67":"code","4f86b528":"code","9bdb5bfc":"code","36c100d2":"code","9a480b64":"code","26d9878f":"code","19865541":"code","827ef338":"code","026ac4d9":"code","177b11d1":"code","091562b7":"code","0a6e8c3b":"code","ea7bc0a9":"code","c345fc47":"markdown","80bd0c27":"markdown","242a8a73":"markdown","c030c7b7":"markdown","e259bcff":"markdown","87384d22":"markdown","fbec0581":"markdown","a0b8e57c":"markdown","dc378766":"markdown","1778c919":"markdown","f311748d":"markdown"},"source":{"d8c2f6bc":"import pandas as pd\nimport numpy as np\nfrom IPython.display import display\npd.options.display.max_columns = 50","b8ee3969":"college = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/college.csv')","958dc862":"college.head()","96eb3101":"college.shape","4310f1af":"college.describe(include=[np.object, pd.Categorical]).T","a4fe3c15":"with pd.option_context('display.max_rows', 8):\n    display(college.describe(include=[np.number]).T)","acb1dad9":"college.describe(include=[np.object, pd.Categorical]).T","b40f0123":"college.info()","77271c31":"college.describe(include=[np.number]).T","5b5ac4d6":"college.describe(include=[np.object, pd.Categorical]).T","72b04308":"with pd.option_context('display.max_rows', 5):\n    display(college.describe(include=[np.number], \n                 percentiles=[.01, .05, .10, .25, .5, .75, .9, .95, .99]).T)","d1e33bb0":"college_dd = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/college_data_dictionary.csv')","03edf905":"with pd.option_context('display.max_rows', 8):\n    display(college_dd)","5237b467":"college = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/college.csv')\ndifferent_cols = ['RELAFFIL', 'SATMTMID', 'CURROPER', 'INSTNM', 'STABBR']\ncol2 = college.loc[:, different_cols]\ncol2.head(6)\n","987e7c64":"col2.dtypes","561d20a3":"original_mem = col2.memory_usage(deep=True)\noriginal_mem","2c6ea3d9":"col2['RELAFFIL'] = col2['RELAFFIL'].astype(np.int8)","88fd0f69":"col2.dtypes","a8118b2b":"col2.select_dtypes(include=['object']).nunique()","cf375e3e":"col2['STABBR'] = col2['STABBR'].astype('category')\ncol2.dtypes","ac95061e":"new_mem = col2.memory_usage(deep=True)\nnew_mem","64676779":"new_mem \/ original_mem","025214b0":"college = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/college.csv')","8324dbd9":"college[['CURROPER', 'INSTNM']].memory_usage(deep=True)","71a894c0":"college.loc[0, 'CURROPER'] = 10000000\ncollege.loc[0, 'INSTNM'] = college.loc[0, 'INSTNM'] + 'a'\n# college.loc[1, 'INSTNM'] = college.loc[1, 'INSTNM'] + 'a'\ncollege[['CURROPER', 'INSTNM']].memory_usage(deep=True)","39ad9e99":"college['MENONLY'].dtype","a2aff932":"college['MENONLY'].astype('int8') # ValueError: Cannot convert non-finite values (NA or inf) to integer","43c36829":"college.describe(include=['int64', 'float64']).T","5881ee36":"college.describe(include=[np.int64, np.float64]).T","c2638eaf":"college['RELAFFIL'] = college['RELAFFIL'].astype(np.int8)","2c60579c":"college.describe(include=['int', 'float']).T  # defaults to 64 bit int\/floats","9a666bc0":"college.describe(include=['number']).T  # also works as the default int\/float are 64 bits","30710cf9":"college['MENONLY'] = college['MENONLY'].astype('float16')\ncollege['RELAFFIL'] = college['RELAFFIL'].astype('int8')","40cb8919":"college.index = pd.Int64Index(college.index)\ncollege.index.memory_usage()","ef14b891":"movie = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/movie.csv')\nmovie2 = movie[['movie_title', 'imdb_score', 'budget']]\nmovie2.head()","428d15cc":"movie2.nlargest(100, 'imdb_score').head()","e5165792":"movie2.","c3b60340":"movie = pd.read_csv('..\/input\/pandas-cookbook-data\/data\/movie.csv')\nmovie2 = movie[['movie_title', 'title_year', 'imdb_score']]\nmovie2","8e306db9":"movie2.sort_values('title_year', ascending=False).head()","73883f87":"movie3 = movie2.sort_values(['title_year','imdb_score'], ascending=False)\nmovie3.head()","237662b9":"movie_top_year = movie3.drop_duplicates(subset='title_year')\nmovie_top_year.head()","e3286a67":"movie4 = movie[['movie_title', 'title_year', 'content_rating', 'budget']]\nmovie4_sorted = movie4.sort_values(['title_year', 'content_rating', 'budget'], \n                                   ascending=[False, False, True])\nmovie4_sorted.drop_duplicates(subset=['title_year', 'content_rating']).head(10)","4f86b528":"movie2 = movie[['movie_title', 'imdb_score', 'budget']]\nmovie_smallest_largest = movie2.nlargest(100, 'imdb_score').nsmallest(5, 'budget')\nmovie_smallest_largest","9bdb5bfc":"movie2.sort_values('imdb_score', ascending=False).head(100).head()","36c100d2":"movie2.sort_values('imdb_score', ascending=False).head(100).sort_values('budget').head()","9a480b64":"movie2.nlargest(100, 'imdb_score').tail()","26d9878f":"movie2.sort_values('imdb_score', ascending=False).head(100).tail()","19865541":"import pandas_datareader as pdr","827ef338":"tsla = pdr.DataReader('tsla', data_source='yahoo',start='2017-1-1')\ntsla.head(8)","026ac4d9":"tsla_close = tsla['Close']","177b11d1":"tsla_cummax = tsla_close.cummax()\ntsla_cummax.head(8)","091562b7":"tsla_trailing_stop = tsla_cummax * .9\ntsla_trailing_stop.head(8)","0a6e8c3b":"def set_trailing_loss(symbol, purchase_date, perc):\n    close = pdr.DataReader(symbol, 'yahoo', start=purchase_date)['Close']\n    return close.cummax() * perc","ea7bc0a9":"msft_trailing_stop = set_trailing_loss('msft', '2017-6-1', .85)\nmsft_trailing_stop.head()","c345fc47":"# Chapter 3: Beginning Data Analysis\n\n## Recipes\n* [Developing a data analysis routine](#Developing-a-data-analysis-routine)\n* [Reducing memory by changing data types](#Reducing-memory-by-changing-data-types)\n* [Selecting the smallest of the largest](#Selecting-the-smallest-of-the-largest)\n* [Selecting the largest of each group by sorting](#Selecting-the-largest-of-each-group-by-sorting)\n* [Replicating nlargest with sort_values](#Replicating-nlargest-with-sort_values)\n* [Calculating a trailing stop order price](#Calculating-a-trailing-stop-order-price)","80bd0c27":"### Note: pandas_datareader issues\npandas_datareader can have issues when the source is 'google'. It can also read from Yahoo! finance. Try switching it to 'yahoo'","242a8a73":"## There's more...","c030c7b7":"# Reducing memory by changing data types","e259bcff":"# Selecting the largest of each group by sorting","87384d22":"# Calculating a trailing stop order price","fbec0581":"## There's more...","a0b8e57c":"## There's more...","dc378766":"# Developing a data analysis routine","1778c919":"# Selecting the smallest of the largest","f311748d":"# Replicating nlargest with sort_values"}}