{"cell_type":{"fb988a71":"code","57b6a059":"code","e00a6ebb":"code","9b85155b":"code","a27e3b68":"code","eb62d9e3":"code","2640eb2c":"code","de4ddc16":"code","82124c86":"code","de8b4662":"code","ea898791":"code","1aceb78e":"code","41c6a466":"code","a1a75b6a":"code","522d5966":"code","0f847dac":"code","3038c4a1":"code","4524953e":"code","57b3c46d":"code","ab33d983":"code","1e8a32b4":"code","9e1a83ff":"code","cd112405":"code","e8faf552":"code","3e3cd21d":"code","b1b73bb0":"code","0c8ecb48":"code","e50a90c4":"code","418de886":"code","0ef6cc12":"code","1bfc37ca":"code","4cb8693a":"code","aa4d6002":"code","7b4da9fb":"markdown","8f5a3de4":"markdown","10203101":"markdown","4ba29c7b":"markdown","055d73fa":"markdown","46343fb0":"markdown","f3f0318d":"markdown","81d2c101":"markdown","be94b752":"markdown","2f5b5791":"markdown","f3dd444e":"markdown","39ab7e77":"markdown","1c97b48d":"markdown","5d5156a3":"markdown","8d0c8878":"markdown","e4ecb0aa":"markdown","413098e7":"markdown","a8fcf57e":"markdown","93f9180f":"markdown","40e2ca7e":"markdown","98a1c38b":"markdown","ee3102bd":"markdown","1a4b1f08":"markdown","be6c1316":"markdown","18a8d08b":"markdown","5b4d0e83":"markdown","40407da2":"markdown","9ca14087":"markdown","a8a0096f":"markdown","d87bace6":"markdown","e954eb90":"markdown","88ab1414":"markdown","f3670718":"markdown","e3db7424":"markdown","0bfefa57":"markdown","c90095e6":"markdown"},"source":{"fb988a71":"#%matplotlib inline\n\nimport matplotlib.pyplot as plt\nfrom matplotlib.widgets import CheckButtons\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom plotly.subplots import make_subplots\nimport plotly.express as px\nfrom plotly.offline import iplot\n\n#import warnings\n#warnings.filterwarnings('ignore')","57b6a059":"!ls ..\/input\/nfl-big-data-bowl-2021\/","e00a6ebb":"df_week1 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week1.csv\")\ndf_week2 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week2.csv\")\ndf_week3 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week3.csv\")\ndf_week4 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week4.csv\")\ndf_week5 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week5.csv\")\ndf_week6 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week6.csv\")\ndf_week7 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week7.csv\")\ndf_week8 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week8.csv\")\ndf_week9 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week9.csv\")\ndf_week10 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week10.csv\")\ndf_week11 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week11.csv\")\ndf_week12 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week12.csv\")\ndf_week13 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week13.csv\")\ndf_week14 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week14.csv\")\ndf_week15 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week15.csv\")\ndf_week16 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week16.csv\")\ndf_week17 = pd.read_csv(\"..\/input\/nfl-big-data-bowl-2021\/week17.csv\")","9b85155b":"df_weeks = [df_week1,df_week2,df_week3,df_week4,df_week5,df_week6,df_week7,df_week8,df_week9,\n            df_week10,df_week11,df_week12,df_week13,df_week14,df_week15,df_week16,df_week17]","a27e3b68":"df_week1.head()","eb62d9e3":"def visualize_coordinate(df_weeks, displayName):\n    df = pd.DataFrame(columns=df_weeks[0].columns)\n    \n    for i, df_week in enumerate(df_weeks):\n        df_tmp = df_week[df_week[\"displayName\"] == displayName].copy()\n        df_tmp[\"week\"] = str(i + 1)\n        df = pd.concat([df, df_tmp])\n    \n    fig = px.scatter(df, x=\"x\", y=\"y\", color=\"week\")\n    fig.update_layout(height=600, width=800, title_text=f\"Coordinate of {displayName} in the game\")\n    iplot(fig)#fig.show()","2640eb2c":"def visualize_angle_and_numeric_by_polar(df_weeks, displayName, angle_col, r_col):\n    \n    df = pd.DataFrame(columns=df_weeks[0].columns)\n    \n    for i, df_week in enumerate(df_weeks):\n        df_tmp = df_week[df_week[\"displayName\"] == displayName].copy()\n        df_tmp[\"week\"] = str(i + 1)\n        df = pd.concat([df, df_tmp])\n        \n    fig = px.scatter_polar(df, r=r_col, theta=angle_col ,symbol=\"week\", color=\"week\",\n                       color_discrete_sequence=px.colors.sequential.Plasma_r)\n\n    fig.update_layout(height=600, width=800, title_text=f\"{angle_col} and {r_col} polar plot of {displayName}\")\n    iplot(fig)#.show()","de4ddc16":"df_week1.info()","82124c86":"sns.scatterplot(data=df_week1[df_week1[\"displayName\"] == \"Leonard Williams\"], x=\"x\", y=\"y\")","de8b4662":"ax = plt.subplot(111, polar=True)\nax.set_theta_zero_location('N')\nax.set_theta_direction(-1)\nplt.show()","ea898791":"set(df_week1[\"position\"])","1aceb78e":"list(set(df_week1[df_week1[\"position\"].isin([\"DL\", \"DE\"])][\"displayName\"]))[:10]","41c6a466":"df_week1[df_week1[\"displayName\"] == \"Patrick Ricard\"].head(1)","a1a75b6a":"visualize_coordinate(df_weeks, \"Patrick Ricard\")","522d5966":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Patrick Ricard\", \"o\", \"s\")","0f847dac":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Patrick Ricard\", \"o\", \"a\")","3038c4a1":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Patrick Ricard\", \"dir\", \"s\")","4524953e":"visualize_angle_and_numeric_by_polar(df_weeks, \"Patrick Ricard\", \"dir\", \"a\")","57b3c46d":"list(set(df_week1[df_week1[\"position\"].isin([\"LB\", \"OLB\", \"MLB\"])][\"displayName\"]))[:10]","ab33d983":"df_week1[df_week1[\"displayName\"] == \"Nate Gerry\"].head(1)","1e8a32b4":"visualize_coordinate(df_weeks, \"Nate Gerry\")","9e1a83ff":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Nate Gerry\", \"o\", \"s\")","cd112405":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Nate Gerry\", \"o\", \"a\")","e8faf552":"#visualize_angle_and_numeric_by_polar(df_weeks, \"Nate Gerry\", \"dir\", \"s\")","3e3cd21d":"visualize_angle_and_numeric_by_polar(df_weeks, \"Nate Gerry\", \"dir\", \"a\")","b1b73bb0":"db_players = list(set(df_week1[df_week1[\"position\"].isin([\"CB\", \"FS\", \"SS\", \"S\", \"DB\"])][\"displayName\"]))\ndb_players[:10]","0c8ecb48":"print(f\"Number of players in DB position is {len(db_players)}\")","e50a90c4":"df_week1[df_week1[\"displayName\"] == \"T.J. Carrie\"].head(1)","418de886":"visualize_coordinate(df_weeks, \"T.J. Carrie\")","0ef6cc12":"#visualize_angle_and_numeric_by_polar(df_weeks, \"T.J. Carrie\", \"o\", \"s\")","1bfc37ca":"visualize_angle_and_numeric_by_polar(df_weeks, \"T.J. Carrie\", \"o\", \"a\")","4cb8693a":"#visualize_angle_and_numeric_by_polar(df_weeks, \"T.J. Carrie\", \"dir\", \"s\")","aa4d6002":"visualize_angle_and_numeric_by_polar(df_weeks, \"T.J. Carrie\", \"dir\", \"a\")","7b4da9fb":"x and y are float and represent field coordinate which we see below. \n\ns and a are players' speed and acceleration at each time point. Distance is players' euclid distance between this point in time and at a previous point in time.\n\no and dir are angle of players. o is orientation and represents simple direction. dir is angle of player motion. Find out more below.","8f5a3de4":"In this notebook, I'll create following plots. Please note that these plots corresponding to above field. ","10203101":"visualize_coordinate function plots tracking data for specific player.","4ba29c7b":"# LB","055d73fa":"Speed scatter is about the same as Patrick Ricard, but acceleration seems to be more uneven than his. So Nate Gerry seems to have a few moments when he suddenly speed up and a few not so much.","46343fb0":"<div class=\"alert alert-block alert-warning\">Note that you can turn on\/off plots by clicking legends in graph. Please try!<\/div>","f3f0318d":"We have 17weeks data.","81d2c101":"<a id=\"2\"><\/a> <br>\n# <div class=\"alert alert-block alert-info\">Preparation<\/div>\n\nI'll read library and data. And create function  for the sake of simplicity.","be94b752":"visualize_angle_and_numeric_by_polar function creates polar plots which represent relation between angle and numerical data for specific player.","2f5b5791":"I'll pick Patrick Ricard's data.","f3dd444e":"I'll pick T.J. Carrie's data.","39ab7e77":"<a id=\"4\"><\/a> <br>\n# <div class=\"alert alert-block alert-info\">Visualization<\/div>","1c97b48d":"# Tracking data Visualization\n\n### **<u>Content<\/u>**\n1. [About this notebook](#1)\n1. [Preparation](#2)\n1. [Data overview and definition](#3)\n1. [Visualization](#4)\n1. [Future work](#5)","5d5156a3":"We can find that speed is widely scattered, but acceleration gather around the center. Rather than suddenly accelerating, it seems to gradually get up to speed.\n\nIf you look at the motion angle, you can see that he often rapidly accelerate towards 90\u00b0 and 315\u00b0.","8d0c8878":"<a id=\"1\"><\/a> <br>\n# <div class=\"alert alert-block alert-success\">About this notebook<\/div>\n\n\n## Summary\nI'll pick specific players in each defence position, and propose the way to visualize their tracks and motions by scatterplot in cartesian and polar coordinate.\n\n## Motivation\nIn this competition, we have to focus on difence plays. We have tracking data and can find out what defensive plays were made by them. So I tried to analize tracking data, but I found it quite daunting to visualize and understand the data. \n\nThrough trial and error, I've found a way to visualize tracking data so that we can visualize real-world play. So I want to share it.","e4ecb0aa":"Let's check players. Two plyaers are DL.","413098e7":"He has more data than other players. We find that he doesn't go to y=20 ~ y=30 area very often.\n\nLet's see relation between angle and speeds or acceleration.","a8fcf57e":"T.J. Carrie is CB. \n\nCB marks the WR and contain the offense's pass plays. WR is a target for the quarterback on pass plays and WR is both wings of the offense. WR needs to be fast enough to get past the opposing defense's marks, as well as have the jumping and catching ability to win through the air, and the ability to run a precise pass route. \n\nWe may think that CB should run long to mark WR.","93f9180f":"Next, I'll check LB players. There are 10 players.","40e2ca7e":"### <div class=\"alert alert-block alert-warning\">This notebook contains some plotly plots. If I plot too many at once, the dots disappear, so I comment out more than half of them.\ud83d\ude13 If you want to see them, please fork and try!<\/div>","98a1c38b":"Within these positions, I'll group the defensive positions as follows.\n\n- DL (Defensive line): DL, DE, DT\n\n  Players who set on the scrimmage line.\n\n- LB (Linebacker): LB, OLB, MLB\n\n  Players who set behind the defensive line.\n\n- DB (Defensive backs): CB, FS, SS, S, DB\n\n  Players guarding the back and sides of the field.\n  \n  \n  \n Below is an overview diagram of the defensive positions.\n  \n -------------\n  \n![Defensive_team](https:\/\/github.com\/tasotasoso\/kaggle_media\/blob\/main\/NFLBigDataBowl2021\/Defensive_team.png?raw=true)  \n\n -------------","ee3102bd":"## Defence positions\n\nIn American football, the game is clearly divided into two teams, one on the offensive side of the ball (offense) and one on the defensive side (defense). In each teams, players are divided to several positions.\n\nIn week1's tracking data, following positions are. ","1a4b1f08":"Note that we were able to see he rapidlly accelerated toward 250\u00b0 while facing 90\u00b0 in week15.","be6c1316":"# DL","18a8d08b":"Patrick Ricard is DL.\n\nI'll visualize his coordinate.","5b4d0e83":"# DB","40407da2":"<a id=\"5\"><\/a> <br>\n# <div class=\"alert alert-block alert-warning\">Future work<\/div>\n\n- I want to compare angles of orientation and motion between players.","9ca14087":"## Field\n\nIn this notebook, I create plots which collesponding to field's coordinate and direction. By following picture, the origin is the lower left corner of the figure. 0\u00b0 of angle is upper of picture and the angles increases clockwise.\n\n![field](https:\/\/www.googleapis.com\/download\/storage\/v1\/b\/kaggle-user-content\/o\/inbox%2F3258%2F820e86013d48faacf33b7a32a15e814c%2FIncreasing%20Dir%20and%20O.png?generation=1572285857588233&alt=media)","a8a0096f":"Tracking data has below columns.","d87bace6":"He seems to be moving around on the court more than Patrick Rickard. He appears to be often moving vertically on the graph.\n\nAnd I'll check relation between angle and speeds or acceleration.","e954eb90":"## If you like, please vote!\ud83d\ude39","88ab1414":"I'll pick Nate Gerry's data.","f3670718":"Patrick Ricard is LB.\n\nI'll visualize his coordinate.","e3db7424":"Finally, I'll check DB players. A lot of plyers are tracked in this position.","0bfefa57":"Next, I'll see following 4 relation,\n\n- Player's orientation angle and speed.\n\n- Player's orientation angle and acceleration.\n\n- Player's motion angle and speed.\n\n- Player's motion angle and acceleration.\n\nby visualize_angles_by_polars function we define in preparation.","c90095e6":"<a id=\"3\"><\/a> <br>\n# <div class=\"alert alert-block alert-info\">Data overview and definition<\/div>"}}