{"cell_type":{"f1e15150":"code","081e367e":"code","15067461":"code","898a1adc":"code","67538569":"code","687b3fbd":"code","473977e8":"code","01a002e7":"code","44740fcb":"code","04230077":"code","c4890e9b":"code","6302812d":"code","303645da":"code","9b58b8cc":"code","68fdc998":"code","9e27a3f1":"code","ca20a5cd":"code","08075a5e":"code","f817afb8":"code","e0613646":"markdown","6a147ce8":"markdown","a66fbd31":"markdown","8bf6ad9c":"markdown","a6c74c24":"markdown","d035e031":"markdown","46092bc9":"markdown","09964207":"markdown","2de21b17":"markdown","4c635978":"markdown","f189513c":"markdown","6f248cb2":"markdown","f5fff81f":"markdown","e8a4f3a3":"markdown","1ca6a839":"markdown","e98e1705":"markdown","d39dcd59":"markdown","d3cccac2":"markdown","13f9a7af":"markdown","9eb2542a":"markdown","9dc82217":"markdown","d40e293c":"markdown","84f0d90c":"markdown","3807ffa0":"markdown","bc4a551d":"markdown","158f532b":"markdown","30efe276":"markdown","e28aa343":"markdown","fcffa8c1":"markdown","be1747d1":"markdown","8a62ae4b":"markdown","733aa023":"markdown","b2ddb83b":"markdown","323e7b90":"markdown","a3b71e5e":"markdown","0860973b":"markdown","07676207":"markdown","3da95b5a":"markdown"},"source":{"f1e15150":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","081e367e":"df_original = pd.read_csv(\"\/kaggle\/input\/hotel-booking-demand\/hotel_bookings.csv\")\ndf_original.head()","15067461":"df_original.tail()","898a1adc":"df_original = pd.concat([df_original,df_original[(df_original.arrival_date_year == 2017) & ((df_original.arrival_date_month == 'August') | (df_original.arrival_date_month == 'July'))]]).drop_duplicates(keep=False)","67538569":"df_original.tail()","687b3fbd":"display(f'Dataset shape is: {df_original.shape}',df_original.describe())","473977e8":"ax = sns.distplot(df_original.is_canceled,kde=False,color='r')\nplt.title('Not Canceled VS. Canceled')\nfor p in ax.patches:\n    if p.get_height() > 0: ax.text(p.get_x()+p.get_width()\/2,p.get_height(),f\"{int(p.get_height())}\",fontsize=16) ","01a002e7":"bookings_by_year_not_canceled = df_original[df_original.is_canceled == 0].groupby('arrival_date_year').arrival_date_year.count()\nax = sns.barplot(bookings_by_year_not_canceled.index,bookings_by_year_not_canceled.values)\nplt.title('Number of Confirmed Bookings')\nfor p in ax.patches:\n    ax.text(p.get_x()+p.get_width()\/4,p.get_height(),f\"{int(p.get_height())}\",fontsize=16)","44740fcb":"booking_by_year_month_not_canceled = df_original[df_original.is_canceled == 0].groupby(['arrival_date_year','arrival_date_month']).arrival_date_month.count().sort_values(ascending=False)\nplt.figure(figsize=(10,30))\nplt.title('Number of Confirmed Bookings by Year-Month')\nax = sns.barplot(booking_by_year_month_not_canceled.values,booking_by_year_month_not_canceled.index)\nfor p in ax.patches:\n    ax.text(p.get_width(),p.get_y()+p.get_height()\/2,f\"{int(p.get_width())}\",fontsize=16)","04230077":"booking_by_month_not_canceled = df_original[df_original.is_canceled == 0].groupby('arrival_date_month').arrival_date_month.count().sort_values(ascending=False)\nplt.figure(figsize=(10,15))\nplt.title('Number of Confirmed Bookings by Month')\nax = sns.barplot(booking_by_month_not_canceled.values,booking_by_month_not_canceled.index)\nfor p in ax.patches:\n    ax.text(p.get_width(),p.get_y() + p.get_height()\/2,f\"{int(p.get_width())}\",fontsize=20)","c4890e9b":"bookings_by_year_canceled = df_original[df_original.is_canceled == 1].groupby('arrival_date_year').arrival_date_year.count()\nax = sns.barplot(bookings_by_year_canceled.index,bookings_by_year_canceled.values)\nplt.title('Number of Canceled Bookings')\nfor p in ax.patches:\n    ax.text(p.get_x()+p.get_width()\/4,p.get_height(),f\"{int(p.get_height())}\",fontsize=16)","6302812d":"booking_by_year_month_canceled = df_original[df_original.is_canceled == 1].groupby(['arrival_date_year','arrival_date_month']).arrival_date_month.count().sort_values(ascending=False)\nplt.figure(figsize=(10,30))\nplt.title('Number of Canceled Bookings by Year-Month')\nsns.set(font_scale=1.1)\nax = sns.barplot(booking_by_year_month_canceled.values,booking_by_year_month_canceled.index)\nfor p in ax.patches:\n    ax.text(p.get_width(),p.get_y()+p.get_height()\/2,f\"{int(p.get_width())}\",fontsize=16)","303645da":"booking_by_month_canceled = df_original[df_original.is_canceled == 1].groupby('arrival_date_month').arrival_date_month.count().sort_values(ascending=False)\nplt.figure(figsize=(10,15))\nplt.title('Number of Canceled Bookings by Month')\nax = sns.barplot(booking_by_month_canceled.values,booking_by_month_canceled.index)\nfor p in ax.patches:\n    ax.text(p.get_width(),p.get_y() + p.get_height()\/2,f\"{int(p.get_width())}\",fontsize=20)","9b58b8cc":"cancel_rate_by_month = ((df_original[df_original.is_canceled == 1].groupby('arrival_date_month').arrival_date_month.count() \/ df_original[df_original.is_canceled == 0].groupby('arrival_date_month').arrival_date_month.count()) * 100).sort_values(ascending=False)\nplt.figure(figsize=(10,15))\nax = sns.barplot(cancel_rate_by_month.values,cancel_rate_by_month.index)\nplt.title('Cancel Rates by Month')\nfor p in ax.patches:\n    ax.text(p.get_width(),p.get_y() + p.get_height()\/2,f\"{round(p.get_width(),2)}%\",fontsize=20)","68fdc998":"hotel_dist = pd.concat([df_original.hotel.value_counts(),df_original[df_original.is_canceled == 0].hotel.value_counts(),df_original[df_original.is_canceled==1].hotel.value_counts()],axis=1)\nhotel_dist.columns = ['Total','Confirmed','Canceled']\nax = hotel_dist.plot.bar(rot=0,figsize=(8,6))\nfor p in ax.patches:\n    ax.text(p.get_x(),p.get_height(),f\"{int(p.get_height())}\",fontsize=16)","9e27a3f1":"df_original.lead_time.agg(['min','mean','max'])","ca20a5cd":"lead_time_diff = pd.concat([df_original[df_original.is_canceled == 0].lead_time.agg(['min','mean','max']),df_original[df_original.is_canceled == 1].lead_time.agg(['min','mean','max'])],axis=1)\nlead_time_diff.columns=['Confirmed','Canceled']\nax = lead_time_diff.plot.bar(rot=0,figsize=(8,6))\nfor p in ax.patches:\n    ax.text(p.get_x(),p.get_height(),f\"{int(p.get_height())}\",fontsize=16)","08075a5e":"zero_night_stays = df_original[(df_original.stays_in_weekend_nights == 0) & (df_original.stays_in_week_nights == 0)]\nzero_night_stays","f817afb8":"zero_night_stays.is_canceled.value_counts()","e0613646":"- Still most canceled bookings were in 2016","6a147ce8":"## Which month had the most bookings?","a66fbd31":"- There are 30942 more confirmed bookings than canceled","8bf6ad9c":"- In total, May had the most bookings which were 5408. This was expected because May,2017 was the time had the most booking and May,2016 was ranked at 7th place from last figure","a6c74c24":"- In average, canceled bookings were made 3 months ahead while confirmed were made 2 months ahead. A gap of 1 month between\n- For the extreme case, the longest canceled booking was made 1 year and 3 months ahead while comparing to 2 years ahead for the confirmed case. There was a gap of 8 months between","d035e031":"## Which year had most canceled bookings?","46092bc9":"### Number of datapoints in the dataset","09964207":"- Max cancel rate was 40.97% in June and least was 25.61% in November","2de21b17":"## Feature Examination","4c635978":"- There were 597 cases that customer did not stay for a single night which meant they either canceled the booking or checked-out on the same day they checked-in\n- The case at index 1 was the extreme case that the customer booked 2 years ahead but did not stay for any night when they arrived, hmm.. interesting","f189513c":"## Question-Driven Exploratory Data Analysis(EDA) is an essential skill to master with as those questions you come up with become the initial motivations for yourself to explore the dataset and also train your mind to be familiar with this process.\n\n## In my opinion, a good data scientist not just having good technical skills but also stay curious to the data and good at storytelling","6f248cb2":"## * For simplicity, I used the term 'Confirmed' refering to 'Not Canceled' for bookings","f5fff81f":"# Environment Setup","e8a4f3a3":"## Brief description of the dataset","1ca6a839":"## How many were canceled and how many were checked out on the same day?","e98e1705":"## Drop cases from July,2017 to August,2017","d39dcd59":"## Which month had most canceled bookings?","d3cccac2":"* It seems like most bookings appears in 2016, and least in 2015 with a gap number of 9496 bookings","13f9a7af":"## Now let's examine those canceled samples","9eb2542a":"# EDA Phase","9dc82217":"- Observing the dataset, it started in July,2015 and ended in August,2017. July and August both had three entries from 2015,2016,2017 while others all had two from whether 2015,2016 or 2016,2017. In this case, I dropped data from July 2017 to August 2017 to make sure the result did not bias to those two months.","d40e293c":"## Feature -> `lead_time`","84f0d90c":"- May,2017 had the most not canceled bookings of 2832, next followed by August,2016 with a tiny gap of 4","3807ffa0":"# Load Dataset","bc4a551d":"## Feature -> `hotel`","158f532b":"- August,2016 and May,2017 seem to be two most busy periods as they were the top 2 which got most cancels and confirms","30efe276":"## Feature -> `is_canceled`","e28aa343":"## How many days ahead people usually book?","fcffa8c1":"### Number of canceled VS number of confirmed","be1747d1":"- A difference of 14084 samples between City and Resort Hotels\n- 72% confirm rate for city hotel, 79% confirm rate for resort hotel\n- 28% cancel rate for city hotel, 21% cancel rate for resort hotel","8a62ae4b":"## Let's first look at bookings that were not canceled","733aa023":"## Any difference in lead_time between canceled and confirmed cases?","b2ddb83b":"## Feature -> `stays-in-weekend-nights` & `stays-in-week-nights`","323e7b90":"## Which year had the most bookings?","a3b71e5e":"## How is the distribution of feature `hotel`?","0860973b":"- 571 cases were checked out on the same day they checked in\n- 26 cases were canceled bookings","07676207":"## When I look at the dataset, I had noticed that some records had 0 night stay in both weekend and week, I would like to investigate it further","3da95b5a":"- People usually made a booking 2 months ahead\n- Extreme cases appeared to be someone booked on the same day they checked in or someone made a booking 2 years ahead\n- I wonder if there's any diff between canceled and confirmed cases?"}}