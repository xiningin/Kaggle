{"cell_type":{"3d7b2227":"code","952765c5":"code","6c79385f":"code","5a1263cb":"code","165185b2":"code","d24e0ad7":"code","c95dfd38":"code","cda74d7d":"code","645b62a6":"code","aadcc5e4":"code","14b1c938":"code","a615b80a":"code","68c099a5":"code","25b7aa5e":"code","fcb7c744":"code","b0c53f86":"code","ed546c81":"code","93728e03":"code","d2216076":"code","e22d8d6f":"code","110d8558":"code","91b60657":"code","96330d5f":"code","def91e63":"code","276080b0":"code","a64b16ad":"code","b8468022":"code","bd95881e":"code","848b33ea":"code","7e401cbe":"code","6971d62a":"code","d1ac2431":"code","a8f6e36b":"code","c8b701cd":"code","6af3cc48":"code","063d6074":"code","01ba889e":"code","8cd13e6a":"code","83ce93d9":"code","bbf10bd5":"code","a5c5346e":"code","d151c5c6":"code","d678d5c6":"code","21e58b50":"code","ba125e66":"code","6d27695d":"code","645f04b8":"code","279a9e86":"code","85239f85":"code","9eb513a8":"code","84a17c3c":"code","238718ec":"code","c763c14d":"code","c74609ba":"code","c6e2bf05":"code","314fbd8a":"code","f91c5327":"code","8004c8ea":"code","942f1dd7":"code","17a9ebb2":"code","b40c2e3f":"code","d9d6ec12":"code","fd82d644":"code","0123f2bc":"code","1d25f5d4":"code","171bfca9":"code","4a5a6453":"code","113938cf":"code","8aa972d9":"code","d024aca2":"code","5a2a1412":"code","868de092":"code","5724ec21":"code","22c02978":"code","650088bf":"code","75681829":"code","2e4f495b":"code","ca8cfe93":"code","8aa62fd4":"code","eaa0c8fd":"code","0049d1b4":"code","65d070f0":"markdown","e5856dd9":"markdown","b2ee7208":"markdown","4323f0c1":"markdown","16f15ea5":"markdown","8cb6502c":"markdown","0760d3f0":"markdown","505f6823":"markdown","a6c22efc":"markdown","8dfc1909":"markdown","b867bd3a":"markdown","eda66e6a":"markdown","edc6746e":"markdown","67ff6ccb":"markdown","5b882cb3":"markdown","06b50e6d":"markdown","d4923d48":"markdown","5a4e6aba":"markdown","1d8a153b":"markdown","6726c066":"markdown","6317712c":"markdown","3fead4d7":"markdown","46a8b3ba":"markdown","10a24bde":"markdown","f2463605":"markdown","d803485a":"markdown","985fd736":"markdown","4001b2ad":"markdown","12e6f8af":"markdown"},"source":{"3d7b2227":"!pip install pyramid\n!pip install pyramid-arima\n!pip install colour\nimport numpy as np \nimport matplotlib.pyplot as plt \nimport matplotlib.colors as mcolors\nimport pandas as pd \nimport random\nimport math\nimport time\nfrom sklearn.linear_model import LinearRegression, BayesianRidge\nfrom sklearn.model_selection import RandomizedSearchCV, train_test_split\nfrom sklearn.preprocessing import PolynomialFeatures\nfrom sklearn.svm import SVR\nfrom sklearn.metrics import mean_squared_error, mean_absolute_error\n\nimport operator \nplt.style.use('seaborn')\nimport geopandas as gpd\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\n%matplotlib inline \npd.plotting.register_matplotlib_converters()\nimport seaborn as sns\n\nimport matplotlib.ticker as ticker\nimport matplotlib.animation as animation\nimport emoji\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings('ignore')\n\nfrom datetime import datetime\nfrom scipy import stats\nimport statsmodels.api as sm\nfrom statsmodels.graphics.api import qqplot\nfrom matplotlib.pylab import rcParams\nfrom statsmodels.tsa.stattools import adfuller\nfrom statsmodels.tsa.stattools import acf, pacf\n#rcParams['figure.figsize'] = 30, 10\n\nimport pyramid as pm\nfrom pyramid.arima import auto_arima\nfrom scipy.optimize import curve_fit\n\n\nprint(\"Setup Complete\")","952765c5":"conf_df = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_confirmed.csv')\ndeath_df = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_deaths.csv')\nreco_df = pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/time_series_covid_19_recovered.csv')","6c79385f":"conf_df.head(2)","5a1263cb":"#extracting all the dates\ndates = conf_df.columns[4:]\n\n#making new dataframes for confiremed ,death and recovred cases\nconf_df_long = conf_df.melt(id_vars=['Province\/State', 'Country\/Region', 'Lat', 'Long'], \n                            value_vars=dates, var_name='Date', value_name='Confirmed')\n\ndeaths_df_long = death_df.melt(id_vars=['Province\/State', 'Country\/Region', 'Lat', 'Long'], \n                            value_vars=dates, var_name='Date', value_name='Deaths')\n\nrecv_df_long = reco_df.melt(id_vars=['Province\/State', 'Country\/Region', 'Lat', 'Long'], \n                            value_vars=dates, var_name='Date', value_name='Recovered')\n\n#full table combinig all confirmed,recovered and deaths \nfull_table = pd.concat([conf_df_long, deaths_df_long['Deaths'], recv_df_long['Recovered']], \n                       axis=1, sort=False)\n\nfull_table.head()","165185b2":"cases = ['Confirmed', 'Deaths', 'Recovered', 'Active']\n\n#adding active cases to the dataset\n\nfull_table['Active'] = full_table['Confirmed'] - full_table['Deaths'] - full_table['Recovered']\n\n#Cleaning \nfull_table = full_table[full_table['Province\/State'].str.contains(',')!=True]\n\nfull_table['Country\/Region'] = full_table['Country\/Region'].replace('Korea, South', 'South Korea')\nfull_table['Country\/Region'] = full_table['Country\/Region'].replace('Mainland China', 'China')\n\n\n\n#full_table.to_csv('covid_19_full_updatedNew.csv', index=False)","d24e0ad7":"#full_table = pd.read_csv('covid_19_full_updatedNew.csv')","c95dfd38":"#current_date,according to dataset\ntoday = dates[-1]\n#full latest keeps today's data for all countries\nfull_latest = full_table[full_table['Date'] == today].reset_index()","cda74d7d":"full_latest.head(2)","645b62a6":"full_latest_grouped = full_table.groupby('Country\/Region')['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\ntemp_f = full_latest_grouped.sort_values(by='Confirmed', ascending=False)\ntemp_f = temp_f.reset_index(drop=True)\ntemp_f.head(10).style.background_gradient(cmap='Reds')","aadcc5e4":"full_latest_grouped = full_table.groupby('Country\/Region')['Confirmed', 'Deaths', 'Recovered', 'Active'].sum().reset_index()\ntemp_g = full_latest_grouped.sort_values(by='Recovered', ascending=False)\ntemp_g = temp_g.reset_index(drop=True)\ntemp_g.head(10).style.background_gradient(cmap='Greens')","14b1c938":"#getting all the dates\ncols = conf_df.keys()","a615b80a":"conf = conf_df.loc[:, cols[4]:cols[-1]]\ndeath = death_df.loc[:, cols[4]:cols[-1]]\nreco = reco_df.loc[:, cols[4]:cols[-1]]","68c099a5":"conf.head(2)","25b7aa5e":"dates = conf.keys()\nworld_cases = []\ntotal_deaths = [] \nmortality_rate = []\nrecovery_rate = [] \ntotal_recovered = [] \ntotal_active = [] \n\nindia_cases_conf = []\nindia_cases_reco = []\nindia_cases_death = []\nindia_cases_active = []\n\nj=0\nfor i in dates:\n    \n    confirmed_sum = conf[i].sum()\n    death_sum = death[i].sum()\n    recovered_sum = reco[i].sum()\n    \n    # confirmed, deaths, recovered, and active\n    world_cases.append(confirmed_sum)\n    total_deaths.append(death_sum)\n    total_recovered.append(recovered_sum)\n    total_active.append(confirmed_sum-death_sum-recovered_sum)\n    \n    # calculate rates\n    mortality_rate.append(death_sum\/confirmed_sum)\n    recovery_rate.append(recovered_sum\/confirmed_sum)\n\n    # case studies \n    #china_cases.append(conf_df[conf_df['Country\/Region']=='China'][i].sum())\n    #italy_cases.append(conf_df[conf_df['Country\/Region']=='Italy'][i].sum())\n#     india_cases_conf.append(conf_df[conf_df['Country\/Region']=='India'][i].sum())\n#     india_cases_reco.append(reco_df[reco_df['Country\/Region']=='India'][i].sum())\n#     india_cases_death.append(death_df[death_df['Country\/Region']=='India'][i].sum())\n#     india_cases_active.append(india_cases_conf[j] - india_cases_reco[j] - india_cases_death[j])\n    \n    j = j+1","fcb7c744":"# india_cases_conf_df = pd.DataFrame(index=dates,data=india_cases_conf, columns=['conf_cases'])\n# india_cases_reco_df = pd.DataFrame(index=dates,data=india_cases_reco, columns=['reco_cases'])\n# india_cases_death_df = pd.DataFrame(index=dates,data=india_cases_death, columns=['death_cases'])\n# india_cases_active_df = pd.DataFrame(index=dates,data=india_cases_active, columns=['activ_cases'])\n    ","b0c53f86":"# india_full = pd.concat([india_cases_conf_df,india_cases_reco_df,india_cases_death_df,india_cases_active_df], axis=1)","ed546c81":"# india_full.head(3)","93728e03":"#total confirmed cases in the world\nworld_df = pd.DataFrame(index=dates,data=world_cases, columns=['conf_cases'])\nworld_df['daily_new_cases'] = world_df.diff()\nworld_df['daily_new_cases'][0] = world_df['conf_cases'][0]\nworld_df['daily_new_cases'] =world_df['daily_new_cases'].astype('int64')","d2216076":"world_df.head(2)","e22d8d6f":"total_death_df = pd.DataFrame(index=dates,data=total_deaths, columns=['total_death'])\ntotal_death_df['new_death'] = total_death_df.diff()\ntotal_death_df['new_death'][0] = total_death_df['total_death'][0] \ntotal_death_df['new_death'] = total_death_df['new_death'].astype('int64')","110d8558":"total_reco_df = pd.DataFrame(index=dates,data=total_recovered, columns=['total_recovered'])\ntotal_reco_df['new_reco'] = total_reco_df.diff()\ntotal_reco_df['new_reco'][0] = total_reco_df['total_recovered'][0] \ntotal_reco_df['new_reco'] = total_reco_df['new_reco'].astype('int64')","91b60657":"total_reco_df.head(3)","96330d5f":"\n##this is tricky but true as it is daily new active cases being found both way it give same ans\ntotal_active_df = pd.DataFrame(index=dates,data=total_active, columns=['total_active'])\n\n#total_active_df['new_active111'] = world_df['daily_new_cases'] - total_death_df['new_death'] - total_reco_df['new_reco']\ntotal_active_df['new_active'] = total_active_df['total_active'].diff()\ntotal_active_df['new_active'][0] = total_active_df['total_active'][0] \ntotal_active_df['new_active'] = total_active_df['new_active'].astype('int64')\n\ntotal_active_df=total_active_df.clip(lower =0)","def91e63":"world_full = pd.concat([world_df,total_reco_df,total_death_df,total_active_df], axis=1)","276080b0":"world_full.head(3)","a64b16ad":"import datetime","b8468022":"days_since_1_22 = np.array([i for i in range(len(dates))]).reshape(-1, 1)\nworld_cases = np.array(world_cases).reshape(-1, 1)\ntotal_deaths = np.array(total_deaths).reshape(-1, 1)\ntotal_recovered = np.array(total_recovered).reshape(-1, 1)","bd95881e":"#Dates manipulation for Future forcasting\ndays_in_future = 10\nfuture_forcast = np.array([i for i in range(len(dates)+days_in_future)]).reshape(-1, 1)\nadjusted_dates = future_forcast[:-10]","848b33ea":"start = '1\/22\/2020'\nstart_date = datetime.datetime.strptime(start, '%m\/%d\/%Y')\nfuture_forcast_dates = []\nfor i in range(len(future_forcast)):\n    future_forcast_dates.append((start_date + datetime.timedelta(days=i)).strftime('%m\/%d\/%Y'))","7e401cbe":"sns.set(context='notebook',\n    style='darkgrid',\n    palette='deep',\n    font='sans-serif',\n    font_scale=2,\n    color_codes=True,\n    rc=None)\n\nplt.figure(figsize=(20, 10))\nplt.title('Number of Total CONFIRMED COVID-19 Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('Number of Cases', size=30)\nsns.lineplot(data=world_full.reset_index()['conf_cases']);\n#sns.regplot(x=world_full.index ,y = world_full.reset_index()['world_cases']);\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","6971d62a":"\nsns.set(context='notebook',\n    style='darkgrid',\n    palette='deep',\n    font='sans-serif',\n    font_scale=2,\n    color_codes=True,\n    rc=None)\n\nplt.figure(figsize=(20, 10))\nplt.title('Daily New CONFIRMED COVID-19 Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('Number of Cases', size=30)\nsns.lineplot(data=world_full.reset_index()['daily_new_cases']);\n#sns.regplot(x=world_full.index ,y = world_full.reset_index()['world_cases']);\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","d1ac2431":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['total_active'])\n\nplt.title('# of Coronavirus Active Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Active Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","a8f6e36b":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['new_active'])\n\nplt.title('Daily New Active Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Active Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","c8b701cd":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['total_death'])\nplt.title('# of Coronavirus Deaths Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Deaths', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","6af3cc48":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['new_death'])\nplt.title('Daily Deaths Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Deaths', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","063d6074":"mean_mortality_rate = np.mean(mortality_rate)\nplt.figure(figsize=(20, 12))\nplt.plot(adjusted_dates, mortality_rate, color='orange')\nplt.axhline(y = mean_mortality_rate,linestyle='--', color='black')\nplt.title('Mortality Rate of Coronavirus Over Time', size=30)\nplt.legend(['mortality rate', 'y='+str(mean_mortality_rate)], prop={'size': 20})\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('Mortality Rate', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","01ba889e":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['total_recovered'])\n\n\nplt.title('# of Coronavirus Cases Recovered Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","8cd13e6a":"plt.figure(figsize=(20, 12))\n\nsns.lineplot(data=world_full.reset_index()['new_reco'])\n\nplt.title('Daily Recovery over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","83ce93d9":"mean_recovery_rate = np.mean(recovery_rate)\nplt.figure(figsize=(20, 12))\nplt.plot(adjusted_dates, recovery_rate, color='blue')\nplt.axhline(y = mean_recovery_rate,linestyle='--', color='black')\nplt.title('Recovery Rate of Coronavirus Over Time', size=30)\nplt.legend(['recovery rate', 'y='+str(mean_recovery_rate)], prop={'size': 20})\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('Recovery Rate', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","bbf10bd5":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['conf_cases'] );\nsns.lineplot(data=world_full.reset_index()['total_recovered'])\nsns.lineplot(data=world_full.reset_index()['total_death'])\nsns.lineplot(data=world_full.reset_index()['total_active'])\n\n\nplt.legend(['confirmed', 'recoveries','deaths','active'], loc='best', fontsize=20)\nplt.title('# of Coronavirus Cases in World', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","a5c5346e":"#india_full.head(2)","d151c5c6":"# plt.figure(figsize=(20, 12))\n# sns.lineplot(data=india_full.reset_index()['conf_cases'])\n# sns.lineplot(data=india_full.reset_index()['reco_cases'])\n# sns.lineplot(data=india_full.reset_index()['death_cases'])\n# sns.lineplot(data=india_full.reset_index()['activ_cases'])\n\n\n# plt.legend(['confirmed', 'recoveries','deaths','active'], loc='best', fontsize=20)\n# plt.title('# of Coronavirus Cases in India', size=30)\n# plt.xlabel('Days Since 1\/22\/2020', size=30)\n# plt.ylabel('# of Cases', size=30)\n# plt.xticks(size=20)\n# plt.yticks(size=20)\n# plt.show()","d678d5c6":"f, ax = plt.subplots(figsize=(20, 12))\n\n# Load the example car crash dataset\nsns.set_color_codes(\"deep\")\nsns.barplot(x =world_full.reset_index().index,y=world_full.reset_index()['conf_cases'] , label = 'Confirmed',color ='b');\n\nsns.set_color_codes(\"muted\")\nsns.barplot(x =world_full.reset_index().index,y=world_full.reset_index()['total_recovered'] , label = 'Recovered',color ='r');\n\n\nsns.set_color_codes(\"muted\")\nsns.barplot(x =world_full.reset_index().index,y=world_full.reset_index()['total_death'] , label = 'Deaths',color ='black');\n# Add a legend and informative axis label\n#plt.legend(['confirmed', 'recoveries','deaths'], loc='best', fontsize=20)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\n\n#ax.legend(ncol=1, loc=\"upper right\", frameon=True)\n#ax.set(xlim=(0, 60) ,ylabel=\"no of people\",\n#       xlabel=\"# of cases \")\nsns.despine(left=True, bottom=True)\nplt.xticks(size=10)\nplt.yticks(size=20)\nplt.show()","21e58b50":"plt.figure(figsize=(20, 12))\nsns.lineplot(data=world_full.reset_index()['daily_new_cases'] ,markers=True );\nsns.lineplot(data=world_full.reset_index()['new_reco'])\nsns.lineplot(data=world_full.reset_index()['new_death'])\nsns.lineplot(data=world_full.reset_index()['new_active'])\n\n\nplt.legend(['Daily new confirmed', 'Daily new recoveries','dailty new deaths','daily new active'], loc='best', fontsize=20)\nplt.title('# of Coronavirus Cases in World', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","ba125e66":"#current date data\nlatest_confirmed = conf_df[dates[-1]]\nlatest_deaths = death_df[dates[-1]]\nlatest_recoveries = reco_df[dates[-1]]","6d27695d":"#all unique country list \nunique_countries =  list(conf_df['Country\/Region'].unique())","645f04b8":"country_confirmed_cases = []\nno_cases = []\nfor i in unique_countries:\n    cases = latest_confirmed[conf_df['Country\/Region']==i].sum()\n    if cases > 0:\n        country_confirmed_cases.append(cases)\n    else:\n        no_cases.append(i)\n        \nfor i in no_cases:\n    unique_countries.remove(i)\n    \nunique_countries = [k for k, v in sorted(zip(unique_countries, country_confirmed_cases), key=operator.itemgetter(1), reverse=True)]\nfor i in range(len(unique_countries)):\n    country_confirmed_cases[i] = latest_confirmed[conf_df['Country\/Region']==unique_countries[i]].sum()","279a9e86":"# Only show 10 countries with the most confirmed cases, the rest are grouped into the other category\nvisual_unique_countries = [] \nvisual_confirmed_cases = []\nothers = np.sum(country_confirmed_cases[10:])\n\nfor i in range(len(country_confirmed_cases[:10])):\n    visual_unique_countries.append(unique_countries[i])\n    visual_confirmed_cases.append(country_confirmed_cases[i])\n    \nvisual_unique_countries.append('Others')\nvisual_confirmed_cases.append(others)","85239f85":"c = random.choices(list(mcolors.CSS4_COLORS.values()),k = len(unique_countries))\nplt.figure(figsize=(20,20))\nplt.title('Covid-19 Confirmed Cases per Country', size=20)\nplt.pie(visual_confirmed_cases, colors=c)\nplt.legend(visual_unique_countries, loc='best', fontsize=15)\nplt.show()","9eb513a8":"\nformated_gdf = full_table.groupby(['Date', 'Country\/Region'])['Confirmed', 'Deaths', 'Recovered'].sum()","84a17c3c":"full_latest.head(3)","238718ec":"\nformated_gdf = full_table.groupby(['Date', 'Country\/Region'])['Confirmed', 'Deaths', 'Recovered'].max()\nformated_gdf = formated_gdf.reset_index()\nformated_gdf['Date'] = pd.to_datetime(formated_gdf['Date'])\nformated_gdf['Date'] = formated_gdf['Date'].dt.strftime('%m\/%d\/%Y')\nformated_gdf['size'] = formated_gdf['Confirmed'].pow(0.3)\n\nfig = px.scatter_geo(formated_gdf, locations=\"Country\/Region\", locationmode='country names', \n                     color=\"Confirmed\", size='size', hover_name=\"Country\/Region\", \n                     range_color= [0, max(formated_gdf['Confirmed'])+2], \n                     projection=\"natural earth\", animation_frame=\"Date\", \n                     title='Global Spread over time')\nfig.update(layout_coloraxis_showscale=False)\nfig.show()","c763c14d":"HTML('''<div class=\"flourish-embed flourish-bar-chart-race\" data-src=\"visualisation\/1651020\"><script src=\"https:\/\/public.flourish.studio\/resources\/embed.js\"><\/script><\/div>''')","c74609ba":"adj_dates = full_table.Date.unique()\ndf = full_table.copy()","c6e2bf05":"\ndef genratepseudorandomcolors():\n    import random\n    from colour import Color\n    random_i = random.randint(0,10000000)\n    random_j = random.randint(0,10000000)\n    c = Color(random_i,random_j)\n    hex_number = c.hex_l\n    return hex_number","314fbd8a":"\ncolours = []\nfor i in range(len(df['Country\/Region'].unique())) :\n    colours.append(genratepseudorandomcolors())","f91c5327":"colorsset = dict(zip(\n    [i for i in df['Country\/Region'].unique()],\n    colours\n))\n","8004c8ea":"start_date ='1\/22\/20'\ncurrent_date = start_date","942f1dd7":"\n\ndef draw_barchart_conf(current_date):\n    \n    #creating dataframe for plotting \n    #In each loop it contains top 10 coutires having most number of confirmed cases\n    dff = df[df['Date'].eq(current_date)].groupby('Country\/Region').sum().sort_values(by='Confirmed', ascending=False).head(10)\n    dff = dff.reset_index()\n    dff = dff[::-1]\n    \n    \n    \n    #Now, let's plot a basic bar chart. We start by creating a figure and an axes.\n    #Then, we use `ax.barh(x, y)` to draw horizontal barchart.\n\n    \n    ax.clear()\n    ax.barh(dff['Country\/Region'], dff['Confirmed'], color=[colorsset[x] for x in dff['Country\/Region']])\n    dx = dff['Confirmed'].max() \/ 200\n    \n    \n    #Next, let's add text,color,labels\n\n    for i, (value, name) in enumerate(zip(dff['Confirmed'], dff['Country\/Region'])):\n        \n        ax.text(value-dx, i,     name,           size=14, weight=600, ha='right', va='bottom')\n        ax.text(value+dx, i,     f'{value:,.0f}',  size=14, ha='left',  va='center')\n    \n    \n    ax.text(1, 0.4, current_date, transform=ax.transAxes, color='#777777', size=46, ha='right', weight=800)\n    ax.text(0, 1.06, 'Population (thousands)', transform=ax.transAxes, size=12, color='#777777')\n    ax.xaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n    ax.xaxis.set_ticks_position('top')\n    ax.tick_params(axis='x', colors='#777777', labelsize=12)\n    ax.set_yticks([])\n    ax.margins(0, 0.01)\n    ax.grid(which='major', axis='x', linestyle='-')\n    ax.set_axisbelow(True)\n    \n    #adding other textual infomations\n    ax.text(0, 1.15, f'Most number of confirmed cases in the world from 1\/22\/20{emoji.emojize(\":worried_face:\")}',\n            transform=ax.transAxes, size=24, weight=600, ha='left', va='top')\n    ax.text(1, 0, 'by @aryanc55', transform=ax.transAxes, color='#777777', ha='right',\n            bbox=dict(facecolor='white', alpha=0.8, edgecolor='white'))\n    plt.box(False)\n    \n#draw_barchart_conf(current_date=start_date)","17a9ebb2":"fig, ax = plt.subplots(figsize=(15, 8))\nanimator = animation.FuncAnimation(fig, draw_barchart_conf, frames=adj_dates)\nHTML(animator.to_jshtml())\n# or use animator.to_html5_video() or animator.save() ","b40c2e3f":"def draw_barchart_deaths(current_date):\n    #dff = df[df['Date'].eq(current_year)].sort_values(by='value', ascending=True).tail(10)\n    dff = df[df['Date'].eq(current_date)].groupby('Country\/Region').sum().sort_values(by='Deaths', ascending=False).head(10)\n    dff = dff.reset_index()\n    dff = dff[::-1]\n\n    ax.clear()\n    ax.barh(dff['Country\/Region'], dff['Deaths'], color=[colorsset[x] for x in dff['Country\/Region']])\n    dx = dff['Deaths'].max() \/ 200\n    \n    for i, (value, name) in enumerate(zip(dff['Deaths'], dff['Country\/Region'])):\n        \n        ax.text(value-dx, i,     name,           size=14, weight=600, ha='right', va='bottom')\n        #ax.text(value-dx, i-.25, colorsset[name], size=10, color='#444444', ha='right', va='baseline')\n        ax.text(value+dx, i,     f'{value:,.0f}',  size=14, ha='left',  va='center')\n    \n    ax.text(1, 0.4, current_date, transform=ax.transAxes, color='#777777', size=46, ha='right', weight=800)\n    ax.text(0, 1.06, 'Population (thousands)', transform=ax.transAxes, size=12, color='#777777')\n    ax.xaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n    ax.xaxis.set_ticks_position('top')\n    ax.tick_params(axis='x', colors='#777777', labelsize=12)\n    ax.set_yticks([])\n    ax.margins(0, 0.01)\n    ax.grid(which='major', axis='x', linestyle='-')\n    ax.set_axisbelow(True)\n    ax.text(0, 1.15, f'Most number of Death cases in the world from 1\/22\/20{emoji.emojize(\":pensive_face:\")}',\n            transform=ax.transAxes, size=24, weight=600, ha='left', va='top')\n    ax.text(1, 0, 'by @aryanc55', transform=ax.transAxes, color='#777777', ha='right',\n            bbox=dict(facecolor='white', alpha=0.8, edgecolor='white'))\n    plt.box(False)\n    \n#draw_barchart_conf(current_date=start_date)","d9d6ec12":"fig, ax = plt.subplots(figsize=(15, 8))\nanimator = animation.FuncAnimation(fig, draw_barchart_deaths, frames=adj_dates)\nHTML(animator.to_jshtml())","fd82d644":"def draw_barchart_Recovered(current_date):\n    #dff = df[df['Date'].eq(current_year)].sort_values(by='value', ascending=True).tail(10)\n    dff = df[df['Date'].eq(current_date)].groupby('Country\/Region').sum().sort_values(by='Recovered', ascending=False).head(10)\n    dff = dff.reset_index()\n    dff = dff[::-1]\n\n    ax.clear()\n    ax.barh(dff['Country\/Region'], dff['Recovered'], color=[colorsset[x] for x in dff['Country\/Region']])\n    dx = dff['Recovered'].max() \/ 200\n    \n    for i, (value, name) in enumerate(zip(dff['Recovered'], dff['Country\/Region'])):\n        \n        ax.text(value-dx, i,     name,           size=14, weight=600, ha='right', va='bottom')\n        #ax.text(value-dx, i-.25, colorsset[name], size=10, color='#444444', ha='right', va='baseline')\n        ax.text(value+dx, i,     f'{value:,.0f}',  size=14, ha='left',  va='center')\n    \n    ax.text(1, 0.4, current_date, transform=ax.transAxes, color='#777777', size=46, ha='right', weight=800)\n    ax.text(0, 1.06, 'Population (thousands)', transform=ax.transAxes, size=12, color='#777777')\n    ax.xaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\n    ax.xaxis.set_ticks_position('top')\n    ax.tick_params(axis='x', colors='#777777', labelsize=12)\n    ax.set_yticks([])\n    ax.margins(0, 0.01)\n    ax.grid(which='major', axis='x', linestyle='-')\n    ax.set_axisbelow(True)\n    ax.text(0, 1.15, f'Most number of Recovered cases in the world from 1\/22\/20 {emoji.emojize(\":smiling_face:\")}',\n            transform=ax.transAxes, size=24, weight=600, ha='left', va='top')\n    ax.text(1, 0, 'by @aryanc55', transform=ax.transAxes, color='#777777', ha='right',\n            bbox=dict(facecolor='white', alpha=0.8, edgecolor='white'))\n    plt.box(False)\n    \n#draw_barchart_deaths(current_date=start_date)","0123f2bc":"fig, ax = plt.subplots(figsize=(15, 8))\nanimator = animation.FuncAnimation(fig, draw_barchart_Recovered, frames=adj_dates)\nHTML(animator.to_jshtml())","1d25f5d4":"X_train_confirmed, X_test_confirmed, y_train_confirmed, y_test_confirmed = train_test_split(days_since_1_22, world_cases, test_size=0.15, shuffle=False) ","171bfca9":"# use this to find the optimal parameters for SVR\n# c = [0.01, 0.1, 1]\n# gamma = [0.01, 0.1, 1]\n# epsilon = [0.01, 0.1, 1]\n# shrinking = [True, False]\n# degree = [3, 4, 5]\n\n# svm_grid = {'C': c, 'gamma' : gamma, 'epsilon': epsilon, 'shrinking' : shrinking, 'degree': degree}\n\n# svm = SVR(kernel='poly')\n# svm_search = RandomizedSearchCV(svm, svm_grid, scoring='neg_mean_squared_error', cv=3, return_train_score=True, n_jobs=-1, n_iter=30, verbose=1)\n# svm_search.fit(X_train_confirmed, y_train_confirmed)","4a5a6453":"# svm_confirmed = svm_search.best_estimator_\nsvm_confirmed = SVR(shrinking=True, kernel='poly',gamma=0.01, epsilon=1,degree=5, C=0.1)\nsvm_confirmed.fit(X_train_confirmed, y_train_confirmed)\nsvm_pred = svm_confirmed.predict(future_forcast)\n# check against testing data\nsvm_test_pred = svm_confirmed.predict(X_test_confirmed)\nplt.plot(svm_test_pred)\nplt.plot(y_test_confirmed)\nprint('MAE:', mean_absolute_error(svm_test_pred, y_test_confirmed))\nprint('MSE:',mean_squared_error(svm_test_pred, y_test_confirmed))","113938cf":"plt.figure(figsize=(20, 12))\nplt.plot(adjusted_dates, world_cases)\nplt.plot(future_forcast, svm_pred, linestyle='dashed', color='purple')\nplt.title('# of Coronavirus Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.legend(['Confirmed Cases', 'SVM predictions'], prop={'size': 20})\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","8aa972d9":"# Future predictions using SVM \nprint('SVM future predictions:')\nlist(zip(future_forcast_dates[-10:], np.round(svm_pred[-10:])))","d024aca2":"# Also creating Polynomial Features\npoly = PolynomialFeatures(degree=5)\npoly_X_train_confirmed = poly.fit_transform(X_train_confirmed)\npoly_X_test_confirmed = poly.fit_transform(X_test_confirmed)\npoly_future_forcast = poly.fit_transform(future_forcast)\n\nlinear_model = LinearRegression(normalize=True, fit_intercept=False)\nlinear_model.fit(poly_X_train_confirmed, y_train_confirmed)\ntest_linear_pred = linear_model.predict(poly_X_test_confirmed)\nlinear_pred = linear_model.predict(poly_future_forcast)\n\nprint('MAE:', mean_absolute_error(test_linear_pred, y_test_confirmed))\nprint('MSE:',mean_squared_error(test_linear_pred, y_test_confirmed))\n\nplt.plot(test_linear_pred)\nplt.plot(y_test_confirmed)","5a2a1412":"# Future predictions using Polynomial Regression \nlinear_pred = linear_pred.reshape(1,-1)[0]\nprint('Polynomial regression future predictions:')\nlist(zip(future_forcast_dates[-10:], np.round(linear_pred[-10:])))\n","868de092":"plt.figure(figsize=(20, 12))\nplt.plot(adjusted_dates, world_cases)\nplt.plot(future_forcast, linear_pred, linestyle='dashed', color='orange')\nplt.title('# of Coronavirus Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.legend(['Confirmed Cases', 'Polynomial Regression Predictions'], prop={'size': 20})\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","5724ec21":"pm.__version__\n#world_cases\n\n#import pyramid as pm\n#from pyramid.arima import auto_arima","22c02978":"tsarima = auto_arima(world_cases,start_p=1, d=2, start_q=1, max_p=5, max_d=2, max_q=5, \n start_P=1, D=None, start_Q=1, max_P=2, max_D=1, max_Q=2, \n max_order=10, m=2, seasonal=True, stationary=False, information_criterion='aic', alpha=0.05, \n test='kpss', seasonal_test='ch', stepwise=True,n_jobs=-1, start_params=None, trend='c',\n method=None, transparams=True, solver='lbfgs',maxiter=50, disp=0, callback=None, \n offset_test_args=None, seasonal_test_args=None, suppress_warnings=True, \n error_action='warn', trace=False, random=False,random_state=None,n_fits=10, \nreturn_valid_fits=False, out_of_sample_size=0, scoring='mse')","650088bf":"tsarima.fit(world_cases)\narima_pred = tsarima.predict(n_periods=10)\narima_pred = pd.DataFrame(arima_pred,index = future_forcast_dates[-10:],columns=['Prediction'])","75681829":"plt.figure(figsize=(20, 12))\nplt.plot(world_df[\"conf_cases\"])\nplt.plot(arima_pred, linestyle='dashed', color='purple')\nplt.title('# of Coronavirus Cases Over Time', size=30)\nplt.xlabel('Days Since 1\/22\/2020', size=30)\nplt.ylabel('# of Cases', size=30)\nplt.legend(['Confirmed Cases', 'ARIMA Predictions'], prop={'size': 20})\nplt.xticks(size=20)\nplt.yticks(size=20)\nplt.show()","2e4f495b":"# Future predictions using ARIMA\nprint('ARIMA future predictions:')\narima_pred","ca8cfe93":"world_full.head()","8aa62fd4":"data = world_full.copy()","eaa0c8fd":"#country_data['GrowthFactor'] = growth_factor(country_data['Confirmed'])\n\n# we will want x_data to be the number of days since first confirmed and the y_data to be the confirmed data. This will be the data we use to fit a logistic curve\nx_data = range(len(data.index))\ny_data = data['conf_cases']\n\ndef log_curve(x, k, x_0, ymax):\n    return ymax \/ (1 + np.exp(-k*(x-x_0)))\n\n# Fit the curve\npopt, pcov = curve_fit(log_curve, x_data, y_data, bounds=([0,0,0],np.inf), maxfev=5000)\nestimated_k, estimated_x_0, ymax= popt\n\n\n# Plot the fitted curve\nk = estimated_k\nx_0 = estimated_x_0\ny_fitted = log_curve(x_data, k, x_0, ymax)\nprint(k, x_0, ymax)\n#print(y_fitted)\ny_data.tail()","0049d1b4":"fig = plt.figure()\nax = fig.add_subplot(111)\nax.plot(x_data, y_fitted, '--', label='fitted')\nax.plot(x_data, y_data, 'o', label='Confirmed Data')","65d070f0":"# Confirmerd Cases","e5856dd9":"## Pie Chart","b2ee7208":"### Bar Plots","4323f0c1":"# COVID-19 (Corona Virus Disease 2019)\n* Caused by a **SARS-COV-2** corona virus.  \n* First identified in **Wuhan, Hubei, China**. Earliest reported symptoms reported in **November 2019**. \n* First cases were linked to contact with the Huanan Seafood Wholesale Market, which sold live animals. \n* On 30 January the WHO declared the outbreak to be a Public Health Emergency of International Concern ","16f15ea5":"Graphing all together","8cb6502c":"### Daily NEW Cases altogether ","0760d3f0":"# Deaths Cases","505f6823":"### generate random color hexadecimal  codes","a6c22efc":"# Visualisation \n### Deaths , Recovery, Mortality Rates etc","8dfc1909":"#### The Graph suggests that it has not still reach its Inflection point !! Hence more worse situation can happen.\n## But Ray of Hope!! \n#### There are various parameters which cant be incoporated like lockdown, preventive measures, medical facilities etc. This all will effect the growth rate!","b867bd3a":"# Prediction \nfor next 10 days","eda66e6a":"### Loading the data\nImport the data (make sure to update this on a daily basis)","edc6746e":"# Acknowledgements\n\n\nA big thank you to Johns Hopkins for providing the data.\nhttps:\/\/github.com\/CSSEGISandData\/COVID-19. \n\nThanking our community\n1. https:\/\/www.kaggle.com\/dferhadi\n2. https:\/\/www.kaggle.com\/therealcyberlord\n3. https:\/\/www.kaggle.com\/imdevskp\/\n4. https:\/\/github.com\/imdevskp\/covid_19_jhu_data_web_scrap_and_cleaning\n\n","67ff6ccb":"#### Creating some useful lists for plotting as well as forecasting","5b882cb3":"## Confimed Cases all over ","06b50e6d":"##  This Notebook Contain Basic Visualisations,Analysis and Forcasting \n#### EDA,Maps,Bar Race Charts,Starter Codes,Modelling,Forecasting,Estimation","d4923d48":"### Bubble Map Animation Plotly","5a4e6aba":"#### Pls appreaciate my work by leaving an upvote! Thank You","1d8a153b":"More Curve Fitting Techniques are needed to be applied.","6726c066":"# Recovered Cases","6317712c":"### making a list of colors","3fead4d7":"### ARIMA Model\n##### Using Pyramid ARIMA \nIt has auto arima ","46a8b3ba":"### making a dictionary of countries along with colorcodes ","10a24bde":"## Animate\n\nTo animate, we will use [`FuncAnimation`][FuncAnimation] from `matplotlib.animation`.\n\n[`FuncAnimation`][FuncAnimation] makes an animation by repeatedly calling a function (that draws on canvas). \nIn our case, it'll be `draw_barchart`.\n\n`frames` arguments accepts on what values you want to run `draw_barchart` -- we'll\nrun from `date` 1\/22\/20  to last updated.\n\n[FuncAnimation]: https:\/\/matplotlib.org\/3.1.1\/api\/_as_gen\/matplotlib.animation.FuncAnimation.html","f2463605":"### Creating a final Dataset \n","d803485a":"#### Bar Race Chart Using Flourish App","985fd736":"### Solving It as Univariate Problem","4001b2ad":"# Animations\n## Bar Race Plots","12e6f8af":"It will require to update daily!\n# BarChartRace using Python with Matplotlib "}}