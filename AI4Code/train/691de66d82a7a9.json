{"cell_type":{"ab00bed1":"code","eb860cc5":"code","1166c9e2":"code","e8f4ac78":"code","2b009fab":"code","584ad800":"code","5dc4079b":"code","ba9780f3":"code","87d345c4":"code","589c1d2d":"code","8f440d71":"code","a8fd9be1":"code","4a74ebdf":"markdown","093815f0":"markdown","b0be7075":"markdown","519cef55":"markdown"},"source":{"ab00bed1":"import numpy as np\nimport pandas as pd\nimport IPython.display as ipd\nimport librosa\nimport warnings\n","eb860cc5":"warnings.filterwarnings('ignore')","1166c9e2":"input_path = '..\/input\/birdsong-recognition\/'\ndataset_path = '..\/input\/timestamps-for-train-data-cornell-birdcall\/'\n","e8f4ac78":"sr = 32000\npause_sec = 0.2\nlimit = True\nlimit_sec = 60","2b009fab":"def get_aud_bird(df_full, bird, pause_sec):\n    pause = np.zeros(int(pause_sec * sr))\n    aud = pause\n\n    df = df_full[df_full['bird']==bird]\n    files = df['file'].unique()\n    print(f'{bird} - {len(files)} files {len(df)} samples')\n    \n    for file in files:\n        if limit:\n            if len(aud) > limit_sec * sr:\n                break\n        aud_file , _ = librosa.load(f'{input_path}train_audio\/{bird}\/{file}', mono=True, sr=sr)\n        aud_file = librosa.util.normalize(aud_file, axis=0)\n        df_file = df[df['file']==file]\n        for i, r in df_file.iterrows():\n            start = int(r['start'] * sr)\n            end = start + int(r['duration'] * sr)\n            aud = np.concatenate((aud, aud_file[start:end], pause)) \n    \n    return aud","584ad800":"df = pd.read_csv(f'{dataset_path}timestamps-train-cornell-birds.csv')","5dc4079b":"aud = get_aud_bird(df, 'aldfly', pause_sec)","ba9780f3":"ipd.Audio(aud, rate=sr)","87d345c4":"aud_normoc = get_aud_bird(df, 'normoc', pause_sec)","589c1d2d":"ipd.Audio(aud_normoc, rate=sr)","8f440d71":"aud_norcar = get_aud_bird(df, 'norcar', pause_sec)","a8fd9be1":"ipd.Audio(aud_norcar, rate=sr)","4a74ebdf":"Notebook contains simple examples for checking the [dataset](https:\/\/www.kaggle.com\/sapr3s\/timestamps-for-train-data-cornell-birdcall)","093815f0":"**norcar**\n\nNow I understand where the car alarm sound came from :)","b0be7075":"I have limited the duration of the audio files I create, otherwise they are too big . To check the full file, change: limit = False","519cef55":"Awesome **normoc**\n\nIt turned out almost an hour of marked sounds. It can represent other birds. I think it needs a separate classifier. This reminds me of the struggle 'generator vs discriminator' in the GAN"}}