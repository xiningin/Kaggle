{"cell_type":{"680f703d":"code","1b321509":"code","5bed2c9a":"code","4d555be7":"code","1a9a0125":"code","9bd547c5":"markdown","7bda4255":"markdown","89ef0ecf":"markdown"},"source":{"680f703d":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nfrom glob import glob\nimport cv2\nfrom matplotlib.offsetbox import OffsetImage, AnnotationBbox","1b321509":"%time\nimages = []\nlabels = []\n\nfor class_folder_name in os.listdir('..\/input\/emojiimage-dataset\/image\/'):\n    class_folder_path = os.path.join('..\/input\/emojiimage-dataset\/image\/', class_folder_name)\n    print(class_folder_name)\n    if class_folder_name not in ['Apple']:\n        continue\n    for image_path in glob(os.path.join(class_folder_path, \"*.png\")):\n        image = cv2.imread(image_path, cv2.IMREAD_UNCHANGED)\n#         if image.shape[-1] == 4:\n        image = cv2.cvtColor(image, cv2.COLOR_BGRA2RGBA)\n#         else:\n#             image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)\n        try:   \n            images.append(image.flatten())\n            labels.append(class_folder_name)\n        except:\n            print(image_path)\n\n        \nimages = np.array(images)\nlabels = np.array(labels)","5bed2c9a":"%%time\nfrom umap import UMAP\n\numap = UMAP(random_state=0)\nfeatures = umap.fit_transform(images, labels)","4d555be7":"def imscatter(X, Y, images, figsize, image_zoom=1):\n    fig, ax = plt.subplots(figsize=figsize)\n    artists = []\n    for x, y, i in zip(X, Y, images):\n        i = i.reshape(72, 72,4)\n        img = OffsetImage(i, zoom=image_zoom)\n        ab = AnnotationBbox(img, (x, y), xycoords='data', frameon=False)\n        artists.append(ax.add_artist(ab))\n\n    ax.set_title('Emoji Space', fontweight='bold', fontfamily='serif', fontsize=30)   \n    ax.set_xticks([])\n    ax.set_yticks([])\n    ax.set_xlabel('')\n    ax.set_ylabel('')\n    ax.spines[:].set_visible(False)\n    ax.update_datalim(features)\n    ax.autoscale()\n    plt.show()","1a9a0125":"imscatter(features[:,0], features[:,1], images, (30, 20), 0.3)","9bd547c5":"## Dimension Reduction","7bda4255":"## Import Images","89ef0ecf":"## Visualization"}}