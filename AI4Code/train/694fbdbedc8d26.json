{"cell_type":{"4df009bc":"code","60a743f9":"code","2809b766":"code","52f50b47":"code","38efba1e":"code","607ec59c":"code","dd8671c2":"code","556db9d6":"code","e52230a1":"markdown","94cc6cdf":"markdown","dccdf592":"markdown","e6c31ca6":"markdown","5eda9e1a":"markdown","c0997e7d":"markdown"},"source":{"4df009bc":"import glob\nimport os\n\nimport numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\n\nimport tifffile as tiff ","60a743f9":"tiffFileList = glob.glob(\"..\/input\/hubmap-kidney-segmentation\/train\/*.tiff\")\n\nfor file in tiffFileList:\n    size  = os.path.getsize(file)\/1000000\n    print(file[len(\"..\/input\/hubmap-kidney-segmentation\/train\/\"):], \"---\", \"{:.1f}\".format(size), \"MB\")","2809b766":"img = tiff.imread(\"..\/input\/hubmap-kidney-segmentation\/train\/aaa6a05cc.tiff\")\n\nprint(\"Original Image Shape: \", img.shape)\nplt.figure(figsize=(24, 24), dpi=150)\nplt.imshow(img[:, :, 0], cmap=plt.cm.bone_r)","52f50b47":"def rle2mask(mask_rle, shape=(1600, 256)):\n    '''\n    mask_rle: run-length as string formated (start length)\n    shape: (width,height) of array to return \n    Returns numpy array, 1 - mask, 0 - background\n\n    '''\n    s = mask_rle.split()\n    starts, lengths = [np.asarray(x, dtype=int) for x in (s[0:][::2], s[1:][::2])]\n    starts -= 1\n    ends = starts + lengths\n    img = np.zeros(shape[0]*shape[1], dtype=np.uint8)\n    for lo, hi in zip(starts, ends):\n        img[lo:hi] = 1\n    return img.reshape(shape).T\n","38efba1e":"train_df = pd.read_csv('..\/input\/hubmap-kidney-segmentation\/train.csv')\ntrain_df.head()","607ec59c":"# Create the mask from REL data\n\nmask = rle2mask(train_df.iloc[1, 1], (img.shape[1], img.shape[0]))\nmask.shape","dd8671c2":"plt.figure(figsize=(24, 24), dpi=150)\nplt.imshow(img[:, :, 0], cmap='bone_r', alpha=0.9)\nplt.imshow(mask[:,:], cmap='bone_r', alpha=0.5)","556db9d6":"plt.figure(figsize=(24, 24), dpi=300)\nplt.imshow(img[12500:15000, 2000:5000, 0], cmap='bone_r', alpha=0.9)\nplt.imshow(mask[12500:15000, 2000:5000], cmap='bone_r', alpha=0.5)","e52230a1":"# Load the train.csv\ntrain.csv contains the unique IDs for each image, as well as an RLE-encoded representation of the mask for the objects in the image.","94cc6cdf":"**List of training tiff files and the corresponding size**","dccdf592":"# Display the original image and the mask over it","e6c31ca6":"* Select the smallest file aaa6a05cc.tiff (415 MB) for quick visualization\n* Load and display the original image","5eda9e1a":"# Display a segment of the original image with the mask","c0997e7d":"**If you look closely you can notice the circular features of potential Glomeruli functional tissue units (FTUs).**\n\n**mask to rle function**\nReference: https:\/\/www.kaggle.com\/paulorzp\/rle-functions-run-lenght-encode-decode\n"}}