{"cell_type":{"22ea96b3":"code","9eb055a9":"code","52d4bc4a":"code","ef89055d":"code","2096e914":"code","0bd4e101":"code","a0102f99":"code","d2f3e526":"code","9a6a4469":"code","b92ba2fd":"code","4a37cc24":"code","babdfec4":"code","7957a47e":"code","b8b5fa08":"code","d379e650":"code","7edaef5b":"code","53cdeba3":"code","d80016d4":"code","fbbd2999":"code","479d5b89":"code","43d2ecf3":"code","06620bcb":"code","1e9a0582":"code","668ab259":"code","51b31765":"code","0d0d5595":"code","d181dee3":"code","e187e500":"code","4dd0878f":"code","78e07941":"code","f07e5586":"code","f5acd9e8":"code","7fd578e9":"code","37cd25aa":"code","7193aa68":"code","3b9301a7":"code","e6e8384c":"code","543c44cb":"code","e96aa616":"code","01190487":"code","569811ec":"code","519a867c":"code","fad54608":"code","245ae478":"code","4410c624":"code","7c8fee93":"code","81072472":"code","94ec2f14":"code","830bc5ef":"code","d9b36824":"code","f969db55":"code","07712294":"code","2e6633d8":"markdown","d8d5c5c6":"markdown","c6844090":"markdown","caf600b6":"markdown","4e459984":"markdown"},"source":{"22ea96b3":"#Daniel Cruz @giordannocruz\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport math\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","9eb055a9":"df1 = pd.read_csv('\/kaggle\/input\/brasilian-houses-to-rent\/houses_to_rent.csv',index_col=['Unnamed: 0'])\ndf2 = pd.read_csv('\/kaggle\/input\/brasilian-houses-to-rent\/houses_to_rent_v2.csv')","52d4bc4a":"df1.head()","ef89055d":"df1.info()","2096e914":"df1.describe(include = 'all').T","0bd4e101":"for col in df1:\n    print(df1[col].value_counts(), '\\n')","a0102f99":"df1.isnull().sum()","d2f3e526":"df1.isna().sum()","9a6a4469":"furniture_mapper = {'not furnished': 0, 'furnished': 1}\nanimal_mapper= {'not acept': 0, 'acept': 1}\ndf1['furniture'].replace(furniture_mapper, inplace=True)\ndf1['animal'].replace(animal_mapper, inplace=True)\ndf1['floor'] = df1['floor'].replace('-',np.nan)\ndf1['floor'] = pd.to_numeric(df1['floor'])","b92ba2fd":"df1.isnull().sum()","4a37cc24":"df1.describe(include='all').T","babdfec4":"df1.floor.describe()","7957a47e":"df1['floor'].replace(99,df1['floor'].mean(), inplace=True)\ndf1['floor'].fillna((math.floor(df1['floor'].mean())), inplace=True)","b8b5fa08":"df1.floor.describe()","d379e650":"df1.isnull().sum()","7edaef5b":"df1.isna().sum()","53cdeba3":"df1.describe(include = 'all').T","d80016d4":"df1.info()","fbbd2999":"df1[\"hoa\"] = (df1[\"hoa\"].str.strip(\"$R\"))\ndf1[\"rent amount\"] = (df1[\"rent amount\"].str.strip(\"$R\"))\ndf1[\"property tax\"] = (df1[\"property tax\"].str.strip(\"$R\"))\ndf1[\"fire insurance\"] = (df1[\"fire insurance\"].str.strip(\"$R\"))\ndf1[\"total\"] = (df1[\"total\"].str.strip(\"$R\"))","479d5b89":"df1.head()","43d2ecf3":"df1[\"hoa\"] = (df1[\"hoa\"].str.replace(',', ''))\ndf1[\"rent amount\"] = (df1[\"rent amount\"].str.replace(',', ''))\ndf1[\"property tax\"] = (df1[\"property tax\"].str.replace(',', ''))\ndf1[\"fire insurance\"] = (df1[\"fire insurance\"].str.replace(',', ''))\ndf1[\"total\"] = (df1[\"total\"].str.replace(',', ''))\ndf1.head()","06620bcb":"df1.info()","1e9a0582":"for i in df1.hoa:\n    print(i)","668ab259":"df1['hoa'] = df1['hoa'].replace('Sem info',np.nan).replace('Incluso',np.nan)","51b31765":"df1['hoa'] = pd.to_numeric(df1['hoa'])","0d0d5595":"df1.isnull().sum()","d181dee3":"df1.describe(include='all').T","e187e500":"df1['hoa'].replace(220000,df1['hoa'].mean(), inplace=True)\ndf1['hoa'].fillna((math.floor(df1['hoa'].mean())), inplace=True)","4dd0878f":"df1.info()","78e07941":"df1['property tax'] = df1['property tax'].replace('Sem info',np.nan).replace('Incluso',np.nan)","f07e5586":"df1['property tax'] = pd.to_numeric(df1['property tax'])\ndf1.isnull().sum()","f5acd9e8":"df1.describe(include='all').T","7fd578e9":"df1['property tax'].replace(366300,df1['property tax'].mean(), inplace=True)\ndf1['property tax'].fillna((math.floor(df1['property tax'].mean())), inplace=True)\ndf1.info()","37cd25aa":"#df1['property tax'] = pd.to_numeric(df1['rent amount'])\ndf1['rent amount'] = df1['rent amount'].astype('int64')\ndf1['property tax'] = df1['property tax'].astype('int64')\ndf1['fire insurance'] = df1['fire insurance'].astype('int64')\ndf1['total'] = df1['total'].astype('int64')\ndf1['floor'] = df1['floor'].astype('int64')\ndf1['hoa'] = df1['hoa'].astype('int64')\ndf1.info()","7193aa68":"df1.head()","3b9301a7":"df1 = df1.drop(['total'], axis = 1) ","e6e8384c":"df1.head()","543c44cb":"df1['total'] = df1['hoa']+df1['rent amount']+df1['property tax']+df1['fire insurance']","e96aa616":"df1.head()","01190487":"df2.head()","569811ec":"df2 = df2.rename(columns={'hoa (R$)': 'hoa', 'rent amount (R$)': 'rent amount',\n                        'property tax (R$)':'property tax',\n                        'fire insurance (R$)':'fire insurance','total (R$)':'total'})\ndf2.head()","519a867c":"df2.city.value_counts()","fad54608":"df2.info()","245ae478":"df2.isnull().sum()","4410c624":"df2.describe(include = 'all').T","7c8fee93":"df2['floor'] = df2['floor'].replace('-',np.nan)\ndf2['floor'] = pd.to_numeric(df2['floor'])\ndf2['parking spaces'] = df2['parking spaces'].astype('int64')\ndf2['furniture'].replace(furniture_mapper, inplace=True)\ndf2['animal'].replace(animal_mapper, inplace=True)\ndf2['hoa'] = df2['hoa'].replace('Sem info',np.nan).replace('Incluso',np.nan)\ndf2['hoa'] = pd.to_numeric(df2['hoa'])","81072472":"df2.isnull().sum()","94ec2f14":"df2.floor.describe()","830bc5ef":"df2['floor'].replace(301,df2['floor'].mean(), inplace=True)\ndf2['floor'].fillna((math.floor(df2['floor'].mean())), inplace=True)\ndf2.isnull().sum()","d9b36824":"df2['floor'] = df2['floor'].astype('int64')","f969db55":"df2.info()","07712294":"corr_matrix  = df1.corr()\nmask  = np.zeros_like(corr_matrix, dtype = np.bool)\nmask[np.triu_indices_from(mask)] = True\n\n# Correlation heatmap\nfig, ax = plt.subplots(figsize = (15,9))\n\nheatmap = sns.heatmap(corr_matrix,\n                     mask = mask,\n                     square = True,\n                      cmap = \"coolwarm\",\n                      cbar_kws = {\"ticks\": [-1,-0.5,0,0.5,1]},\n                     vmin=-1,\n                     vmax=1,\n                     annot = True,\n                     annot_kws = {\"size\": 10})\n\nplt.show()","2e6633d8":"## PRE-PROCESSING \n### DATA CLEANING","d8d5c5c6":"#### This is the second dataframe from the second csv","c6844090":"### This is what I have done until far, I will keep commiting my notebooks","caf600b6":"As we can see, not all the columns have unique values at all, the ones have those unique values are the followings:\n* city\n* rooms\n* bathrooms\n* floor\n* animal\n* furniture\n\nAnd the ones we will choose to encode are the following:\n* animal\n* furniture\n\nThese ones will be used later:\n* rooms\n* bathrooms\n* parking spaces","4e459984":"Now the total columns is fine "}}