{"cell_type":{"7d6515d0":"code","2188b75f":"code","27b5589f":"code","63ee0035":"code","dee5c31e":"code","18d8e1d7":"code","79e09cd1":"code","2c330c92":"code","1399e534":"code","69aa880f":"code","7658e96c":"code","8f92f63c":"code","69b98bb3":"code","3af7d94a":"code","d302f594":"code","a0512f64":"code","ba95b618":"code","9eeb651a":"code","e9f8e9e7":"code","94c9a4ff":"code","29042bb8":"code","269181e1":"code","d04a63c5":"code","ef3b4d62":"code","5ae98952":"code","73e4cc31":"code","7f1ca1ec":"code","109f6b55":"code","73c5c2fb":"code","6ed07f9d":"code","a2ddf4c9":"code","8ec053c0":"code","3d09ef19":"code","d34a6a37":"code","9a94fe85":"code","f3d6b046":"code","cef78459":"markdown","9c38d39e":"markdown","1220c12a":"markdown","4f096236":"markdown","897e66d0":"markdown","9c47e03f":"markdown","bbb64f1d":"markdown","2ae5f8e1":"markdown","169f924a":"markdown","c1705ad6":"markdown","6e65c76b":"markdown","51499acf":"markdown"},"source":{"7d6515d0":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom scipy import stats\n\nimport warnings\nwarnings.filterwarnings('ignore')","2188b75f":"red_wine_df = pd.read_csv(\"..\/input\/red-wine-quality-cortez-et-al-2009\/winequality-red.csv\")\nred_wine_df.head()","27b5589f":"red_wine_df.shape","63ee0035":"## datframe info\n\nred_wine_df.info()","dee5c31e":"# remove space from all features\nred_wine_df.columns = [col.strip().replace(' ', '_') for col in red_wine_df.columns]\nred_wine_df.columns","18d8e1d7":"## check null values in all columns\n\nred_wine_df.isna().sum()","79e09cd1":"red_wine_df.describe().T","2c330c92":"cols = red_wine_df.columns\n\nfig, axs = plt.subplots(ncols=2, nrows=6, figsize=(12, 30))\naxs = np.ravel(axs)\n\nfor i, col in enumerate(cols):\n    plt.sca(axs[i])\n    sns.histplot(data=red_wine_df, x=col, \n                 kde=True, fill=True, \n                 line_kws={'lw':2,'ls':'--','color':'k'}, \n                 color='orange')\n    plt.title(f\"{col} distribution plot\", fontdict={'size':16,'color':'k'})\n    \nplt.tight_layout()\nplt.show()","1399e534":"red_wine_df.quality.value_counts()","69aa880f":"red_wine_df.quality.value_counts(normalize=True)","7658e96c":"def plot_box_swarm(data=red_wine_df, x='quality', y=None):\n    fig, axs = plt.subplots(nrows=1, ncols=2, figsize=(20,8))\n\n    sns.boxplot(data=data, x=x, y=y, ax=axs[0])\n\n    sns.swarmplot(data=data, x=x, y=y, ax=axs[1])\n    plt.show()","8f92f63c":"for col in cols[:-1]:\n    plot_box_swarm(y=col)","69b98bb3":"corr_matrix = red_wine_df.corr(method='spearman')\n\nplt.figure(figsize=(15,10))\nsns.heatmap(corr_matrix, \n            annot=True, annot_kws={'size':14}, \n            fmt='.2f', cmap='Pastel1',\n            mask=np.triu(corr_matrix))\nplt.show()","3af7d94a":"corr_matrix['quality'][:-1].plot.bar(color='orange', figsize=(12,6))\nplt.ylabel(\"Correlation with quality\")\nplt.show()","d302f594":"## remove all the outliers\nredwine_new_df = red_wine_df.loc[~(red_wine_df.fixed_acidity>14)\n                |(red_wine_df.volatile_acidity>1.2)\n                |(red_wine_df.citric_acid>0.8)\n               |(red_wine_df.residual_sugar>10)\n               |(red_wine_df.chlorides>0.5)\n               |(red_wine_df.free_sulfur_dioxide>60)\n               |(red_wine_df.total_sulfur_dioxide>200)\n               |(red_wine_df.pH>3.8)\n               |(red_wine_df.sulphates>1.5)\n               |(red_wine_df.alcohol>14)]\n\nredwine_new_df","a0512f64":"corr_matrix = redwine_new_df.corr(method='spearman')\n\nplt.figure(figsize=(15,10))\nsns.heatmap(corr_matrix, \n            annot=True, annot_kws={'size':14}, \n            fmt='.2f', cmap='Pastel1',\n            mask=np.triu(corr_matrix))\nplt.show()","ba95b618":"corr_matrix['quality'][:-1].plot.bar(color='orange', figsize=(12,6))\nplt.ylabel(\"Correlation with quality\")\nplt.show()","9eeb651a":"white_wine_df = pd.read_csv(\"..\/input\/white-wine-quality\/winequality-white.csv\", sep=';')\nwhite_wine_df.head()","e9f8e9e7":"white_wine_df.shape","94c9a4ff":"white_wine_df.info()","29042bb8":"white_wine_df.columns = [col.strip().replace(' ', '_') for col in white_wine_df.columns]\nwhite_wine_df.columns","269181e1":"white_wine_df.isna().sum()","d04a63c5":"white_wine_df.describe().T","ef3b4d62":"cols = white_wine_df.columns\n\nfig, axs = plt.subplots(ncols=2, nrows=6, figsize=(12, 30))\naxs = np.ravel(axs)\n\nfor i, col in enumerate(cols):\n    plt.sca(axs[i])\n    sns.histplot(data=white_wine_df, x=col, \n                 kde=True, fill=True, \n                 line_kws={'lw':2,'ls':'--','color':'k'}, \n                 color='orange')\n    plt.title(f\"{col} distribution plot\", fontdict={'size':16,'color':'k'})\n    \nplt.tight_layout()\nplt.show()","5ae98952":"for col in white_wine_df.columns.tolist()[:-1]:\n    plot_box_swarm(data=white_wine_df, y=col)    ","73e4cc31":"corr_matrix = white_wine_df.corr(method='spearman')\n\nplt.figure(figsize=(15,10))\nsns.heatmap(corr_matrix, \n            annot=True, annot_kws={'size':14}, \n            fmt='.2f', cmap='Pastel1',\n            mask=np.triu(corr_matrix))\nplt.show()","7f1ca1ec":"corr_matrix['quality'][:-1].plot.bar(color='orange', figsize=(12,6))\nplt.ylabel(\"Correlation with quality\")\nplt.show()","109f6b55":"whitewine_new_df = white_wine_df.loc[~(white_wine_df.fixed_acidity>11)\n                 |(white_wine_df.volatile_acidity>0.8)\n                 |(white_wine_df.citric_acid>1.1)\n                 |(white_wine_df.residual_sugar>30)\n                 |(white_wine_df.chlorides>0.25)\n                 |(white_wine_df.free_sulfur_dioxide>150)\n                 |(white_wine_df.total_sulfur_dioxide>300)\n                 |(white_wine_df.density>1.01)]\nwhitewine_new_df","73c5c2fb":"corr_matrix = whitewine_new_df.corr(method='spearman')\n\nplt.figure(figsize=(15,10))\nsns.heatmap(corr_matrix, \n            annot=True, annot_kws={'size':14}, \n            fmt='.2f', cmap='Pastel1',\n            mask=np.triu(corr_matrix))\nplt.show()","6ed07f9d":"corr_matrix['quality'][:-1].plot.bar(color='orange', figsize=(12,6))\nplt.ylabel(\"Correlation with quality\")\nplt.show()","a2ddf4c9":"red_wine_df['type'] = 'Red'\nwhite_wine_df['type'] = 'White'\n\nwines_df = pd.concat([red_wine_df, white_wine_df])\nwines_df.shape","8ec053c0":"wines_df = wines_df.reset_index(drop=True)\nwines_df.head()","3d09ef19":"cols = wines_df.columns[:-1]\n\nfig, axs = plt.subplots(ncols=2, nrows=6, figsize=(12, 30))\naxs = np.ravel(axs)\n\nfor i, col in enumerate(cols):\n    plt.sca(axs[i])\n    sns.histplot(data=wines_df, x=col,hue='type', \n                 kde=True, fill=True, \n                 line_kws={'lw':2,'ls':'--','color':'k'}, \n                 color='orange')\n    plt.title(f\"{col} distribution plot\", fontdict={'size':16,'color':'k'})\n    \nplt.tight_layout()\nplt.show()","d34a6a37":"def plot_boxplot(data, col, hue='type'):\n    plt.figure(figsize=(15, 8))\n    sns.boxplot(data=data, x='quality', y=col, hue=hue, showfliers=False)\n    plt.show()","9a94fe85":"for col in cols[:-1]:\n    plot_boxplot(wines_df, col)","f3d6b046":"## Hypothesis test for red and white wine to check mean equality\n\nttest_df = pd.DataFrame(columns=['feature', 'pval', 'reject'])\n\nfor i,col in enumerate(cols[:-1]):\n    res = stats.ttest_ind(red_wine_df[col], white_wine_df[col])\n    \n    if res[1]>0.05:\n        reject = 'No'\n    else:\n        reject = 'Yes'\n    \n    ttest_df.loc[i] = [col, round(res[1],3), reject]\n    \nttest_df","cef78459":"**`Features Description`**\n- **Fixed Acidity** : Amount of Tartaric Acid in wine, measured in g\/dm3\n- **Volatile Acidity** : Amount of Acetic Acid in wine, measured in g\/dm3\n- **Citric Acid** : Amount of citric acid in wine in g\/dm3. Contributes to crispness of wine.\n- **Residual Sugar** : amonunt of sugar left in wine after fermentation. Measured in in g\/dm3\n- **Chlorides** : amount of Sodium Choloride (salt) in wine. Measured in g\/dm3\n- **Free Sulfur Dioxide** : Amount of SO2 in free form. Measured in mg\/dm3\n- **Total Sulfur Dioxide** : Total Amount of SO2. Too much SO2 can lead to a pungent smell. SO2 acts as antioxidant and antimicrobial agent.\n- **Density** : Density of Wine in g\/dm3\n- **pH** : pH of Wine on a scale of 0-14 . 0 means highly Acidic, while 14 means highly basic.\n- **Sulphates** : Amount of Potassium Sulphate in wine, measured in g\/dm3.Contributes to the formation of SO2.\n- **Alcohol** : alcohol content in wine (in terms of % volume)\n- **Quality** : Wine Quality graded on a scale of 1 - 10 (Higher is better)","9c38d39e":"## Data Loading & Preprocessing","1220c12a":"## Data Distribution","4f096236":"- More than 81% of wines have either quality 5 or 6","897e66d0":"**Source of below information:** \n1. https:\/\/winefolly.com\/deep-dive\/understanding-acidity-in-wine\/\n2. https:\/\/winefolly.com\/deep-dive\/what-is-residual-sugar-in-wine\/\n\n- all wines lie on the acidic side of the pH spectrum, and most range from 2.5 to about 4.5 pH.\n- pH is a logarithmic scale, so theoretically, a wine with a pH of 3 is ten times more acidic than a wine with a pH of 4.\n![PH Level](https:\/\/media.winefolly.com\/acidity-ph-level-in-wine-and-drinks.png)\n![residual sugar](https:\/\/media.winefolly.com\/Residual-Sugar-in-wine-folly.png)","9c47e03f":"## Data Distribution","bbb64f1d":"# Red Vs White Wine","2ae5f8e1":"## Quality Analysis","169f924a":"- All features seems to be normally distributed with some outliers except feature 'citric_acid', ","c1705ad6":"# White Wine Analysis","6e65c76b":"# Red Wine Analysis","51499acf":"## Data Loading & Preprocessing"}}