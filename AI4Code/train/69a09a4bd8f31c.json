{"cell_type":{"5275aaf1":"code","4f2988e2":"code","726c9037":"code","70a64a2d":"code","1fea7029":"code","a27c2b1a":"code","fd8857b1":"code","10b9de15":"code","a82729a7":"code","32d1cbe1":"code","53e28f0a":"code","fb19eb9b":"code","ed00e793":"code","540c4bc2":"code","20f985e2":"code","797d1e64":"code","ca599615":"code","4496fceb":"code","8da6224e":"code","ddc56bf8":"code","66e196f1":"code","05a0d2c2":"code","625da354":"code","03fb6d44":"code","9bc38092":"code","17cc00f1":"code","d51018c3":"code","0243ea4f":"code","9660fca0":"code","6518c6e6":"code","d1129f82":"code","e65357a5":"markdown","ae44c0b5":"markdown","3b0fa186":"markdown","299a093a":"markdown","006622e7":"markdown","103761d7":"markdown","2832e502":"markdown","98458bc2":"markdown","e51cb585":"markdown","54a99373":"markdown","1a3545ef":"markdown","52210a47":"markdown","09cbe1a1":"markdown","c82b2a70":"markdown","e81e483b":"markdown","ecdbeb86":"markdown","ad1c8f66":"markdown","67828fcb":"markdown"},"source":{"5275aaf1":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","4f2988e2":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns","726c9037":"train = pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_train.csv')\ntest = pd.read_csv('\/kaggle\/input\/hr-analytics-job-change-of-data-scientists\/aug_test.csv')","70a64a2d":"train.head()","1fea7029":"print(train.shape)\nprint(test.shape)","a27c2b1a":"train.info()","fd8857b1":"train.isnull().sum()","10b9de15":"#gender column\ntrain['gender'].fillna(train['gender'].mode()[0], inplace=True)\n#enrolled_university column\ntrain['enrolled_university'].fillna(train['enrolled_university'].mode()[0], inplace=True)\n#education_level column\ntrain['education_level'].fillna(train['education_level'].mode()[0], inplace=True)\n#major_discipline column\ntrain['major_discipline'].fillna('Unknown_discipline', inplace=True)\n#experience column\ntrain.dropna(subset=['experience'], inplace=True)\n#company_size column\ntrain['company_size'].fillna(train['company_size'].mode()[0], inplace=True)\n#company_type column\ntrain['company_type'].fillna('Unknown_type', inplace=True)\n#last_new_job column\ntrain['last_new_job'].fillna(train['last_new_job'].mode()[0], inplace=True)","a82729a7":"train.isnull().sum()","32d1cbe1":"sns.set_style(\"whitegrid\")\nsns.countplot(data=train, x='gender')","53e28f0a":"sns.boxplot(x='target', y='city_development_index', data=train)","fb19eb9b":"plt.figure(figsize=(14,6))\norder= ['<1','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','>20']\nsns.barplot(data=train, x='experience', y='target',order=order)","ed00e793":"plt.figure(figsize=(10,5))\nsns.barplot(x='major_discipline', y='target', data=train)","540c4bc2":"train.info()","20f985e2":"# Making dictionaries for the ordinal features\n\nrelevent_experience_map = {\n    'Has relevent experience':  1,\n    'No relevent experience':    0\n}\n\neducation_level_map = {\n    'Primary School' :    0,\n    'Graduate'       :    2,\n    'Masters'        :    3, \n    'High School'    :    1, \n    'Phd'            :    4\n} \n    \nexperience_map = {\n    '<1'      :    0,\n    '1'       :    1, \n    '2'       :    2, \n    '3'       :    3, \n    '4'       :    4, \n    '5'       :    5,\n    '6'       :    6,\n    '7'       :    7,\n    '8'       :    8, \n    '9'       :    9, \n    '10'      :    10, \n    '11'      :    11,\n    '12'      :    12,\n    '13'      :    13, \n    '14'      :    14, \n    '15'      :    15, \n    '16'      :    16,\n    '17'      :    17,\n    '18'      :    18,\n    '19'      :    19, \n    '20'      :    20, \n    '>20'     :    21\n} \n\ncompany_size_map = {\n    '<10'          :    0,\n    '10\/49'        :    1,\n    '50-99'        :    2, \n    '100-500'      :    3, \n    '500-999'      :    4, \n    '1000-4999'    :    5, \n    '10000+'       :    6, \n    '5000-9999'    :    7\n}\n    \nlast_new_job_map = {\n    'never'        :    0,\n    '1'            :    1, \n    '2'            :    2, \n    '3'            :    3, \n    '4'            :    4, \n    '>4'           :    5\n}","797d1e64":"# Transforming Categorical features into numerical features\ntrain['relevent_experience'] = train['relevent_experience'].map(relevent_experience_map)\ntrain['education_level'] = train['education_level'].map(education_level_map)\ntrain['experience'] = train['experience'].map(experience_map)\ntrain['company_size'] = train['company_size'].map(company_size_map)\ntrain['last_new_job'] = train['last_new_job'].map(last_new_job_map)\n\n#One-hot encoding the other categories because they are independent to each other\nnew_df = pd.get_dummies(train, columns = ['gender', 'enrolled_university', 'major_discipline', 'company_type'], drop_first=True)\n\n# Dropping 'city' and 'enrollee_id' columns\nnew_df.drop(['enrollee_id', 'city'],axis=1, inplace=True)","ca599615":"new_df.head()","4496fceb":"new_df.info()","8da6224e":"new_df.corr()['target']","ddc56bf8":"plt.figure(figsize=(6, 4))\nsns.countplot(x='target', data=new_df)\nplt.show()","66e196f1":"X = new_df.drop('target', axis=1)\ny = new_df['target']","05a0d2c2":"from imblearn.over_sampling import SMOTE\n\noversample = SMOTE()\nsmote = SMOTE(random_state = 101)\nX_smote, y_smote = smote.fit_resample(X,y)","625da354":"plt.figure(figsize=(6, 4))\nsns.barplot(y_smote.value_counts().index.astype(int),\n            y_smote.value_counts().values)\nplt.title('After sampling')\nplt.show()","03fb6d44":"from sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import classification_report","9bc38092":"X_train, X_test, y_train, y_test = train_test_split(X_smote,\n                                                    y_smote,\n                                                    test_size=0.2,\n                                                    random_state=101)","17cc00f1":"RFC = RandomForestClassifier()\nRFC.fit(X_train,y_train)\nprediction = RFC.predict(X_test)\nprint(classification_report(y_test, prediction))","d51018c3":"# Let's the do same cleansing to our test dataset like our training dataset\n\n#gender column\ntest['gender'].fillna(test['gender'].mode()[0], inplace=True)\n#enrolled_university column\ntest['enrolled_university'].fillna(test['enrolled_university'].mode()[0], inplace=True)\n#education_level column\ntest['education_level'].fillna(test['education_level'].mode()[0], inplace=True)\n#major_discipline column\ntest['major_discipline'].fillna('Unknown_discipline', inplace=True)\n#experience column\ntest.dropna(subset=['experience'], inplace=True)\n#company_size column\ntest['company_size'].fillna(test['company_size'].mode()[0], inplace=True)\n#company_type column\ntest['company_type'].fillna('Unknown_type', inplace=True)\n#last_new_job column\ntest['last_new_job'].fillna(test['last_new_job'].mode()[0], inplace=True)","0243ea4f":"# Transforming Categorical features into numerical features\ntest['relevent_experience'] = test['relevent_experience'].map(relevent_experience_map)\ntest['education_level'] = test['education_level'].map(education_level_map)\ntest['experience'] = test['experience'].map(experience_map)\ntest['company_size'] = test['company_size'].map(company_size_map)\ntest['last_new_job'] = test['last_new_job'].map(last_new_job_map)\n\n#One-hot encoding the other categories because they are independent to each other\nnew_test_df = pd.get_dummies(test, columns = ['gender', 'enrolled_university', 'major_discipline', 'company_type'], drop_first=True)\n\n# Dropping 'city' and 'enrollee_id' columns\nnew_test_df.drop(['enrollee_id', 'city'],axis=1, inplace=True)","9660fca0":"new_test_df.head()","6518c6e6":"# Predict the dataset\nprediction = RFC.predict(new_test_df)","d1129f82":"#Create a  DataFrame\nprediction_df = pd.DataFrame({'enrollee_id':test['enrollee_id'],'target':prediction})\n                        \nprediction_df.head()","e65357a5":"Let's do some quick EDA to our dataset.","ae44c0b5":"It seems like our dataset samples are dominated by men.","3b0fa186":"Now we have our final dataset, let's see the correlation to our target. ","299a093a":"# Modelling","006622e7":"# Test the model with the test dataset","103761d7":"# EDA","2832e502":"People on the lower city development index tends to leave the job.","98458bc2":"# <center> HR Analytics: Job change of Data scientists<\/center>","e51cb585":"Because our dataset is imbalanced we will use smote method to deal with it.","54a99373":"# Handling missing values","1a3545ef":"Now our dataset is ready let's make the model!","52210a47":"Our dataset has a lot of missing values so we have to deal with them first before we proceed.","09cbe1a1":"# Encoding Categorical Data","c82b2a70":"Let's look at our data first.","e81e483b":"**In this notebook, I will try to analyze and predict which employee are more likely to search for a new job. I'll be doing some data cleansing, quick visualization, deal with the imbalance dataset and lastly make model to predict which employee will leave the job.**","ecdbeb86":"People with more experience tends to stick with the job.","ad1c8f66":"Because our dataset has a lot of categorical data we have to encode them so our model can read them.","67828fcb":"**That's it! Thank you for reading my first notebook on Kaggle, as I'm still new on this field, any advice is welcome!**"}}