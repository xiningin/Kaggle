{"cell_type":{"5e7be945":"code","f491292f":"code","60c9741e":"code","dfa67292":"code","6b31cd67":"code","e1152a93":"code","d03157e5":"code","bdf50171":"code","929784d6":"code","1bd4f86d":"code","0c7b6208":"code","f3a96cee":"code","239c297b":"code","4a1d4ffb":"code","02ad4162":"markdown","f1b047e9":"markdown","d3fb6ed2":"markdown","94a69a88":"markdown","73f1d8a6":"markdown","f00b7c84":"markdown","cae566bf":"markdown","42d6a960":"markdown","93ce3acc":"markdown","c885b696":"markdown"},"source":{"5e7be945":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport folium\nimport geopandas as gpd\n\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \nimport warnings\nwarnings.filterwarnings(\"ignore\")","f491292f":"# The df we will use for CO2 emission trends from 1960-2018\ndf = pd.read_csv('..\/input\/co2-emissions-1960-2018\/CO2_Emissions_1960-2018.csv').T\ndf = df.rename(columns=df.iloc[0])\ndf = df.drop(['Country Name'], axis=0)","60c9741e":"df.head(5)","dfa67292":"print('Total number of countries:', len(df.columns))\nna_values = df.isna().sum()\ndisplay(na_values.values)\ndf = df.dropna(axis=1, how='all')\nprint('Total number of countries with no NaN values:', len(df.columns))","6b31cd67":"df = df.astype(float)","e1152a93":"df.describe()","d03157e5":"# The mean of CO2 Emissions in each country:\nmean_list = df.describe().loc['mean'].values\nplt.hist(mean_list)\nplt.show()\nprint('Mean of total emissions across the world:', np.mean(mean_list))\nprint('Number of countries with a mean emission > 50:', len([round(x) for x in mean_list if x > 50]))","bdf50171":"df = df.drop('Aruba', axis=1)","929784d6":"fig = plt.figure(figsize = (18, 100))\nspec = gridspec.GridSpec(ncols=5, nrows=50, figure=fig)\n\ncountries = df.columns.tolist()[:249]\n\nfor i in range(5):\n    for j in range(50):\n        ax = fig.add_subplot(spec[j,i])\n        sns.set_style(\"white\")\n        plt.title(countries[i+j], size = 12, fontname = 'monospace')\n        ax.plot(df[countries[i+j]].index, df[countries[i+j]].values, color='#1a5d57')\n        ax.set_xticklabels(df[countries[i+j]].index[::6], rotation=70)\n        ax.set_xticks(df[countries[i+j]].index[::6])\n        ax.set_yticklabels([])\n        for s in ['top', 'right', 'bottom', 'left']:\n            ax.spines[s].set_visible(False)\n\nfig.tight_layout(h_pad = 3)\nplt.show()","1bd4f86d":"# To use a world heat map, we need to combine our data with country codes which can be read by the geopandas library.\n# For this, we use another dataset from Kaggle - \"Iso Country Codes Global\"\n\ncountry_df = df.T.reset_index()\ncountry_code = pd.read_csv('..\/input\/iso-country-codes-global\/wikipedia-iso-country-codes.csv')\n\ncountry_df = country_df.rename(columns={'index': 'country'})\ncountry_code = country_code.rename(columns={'English short name lower case': 'country'})\n\ndf_global = country_df.merge(country_code, how='left', left_on=['country'], right_on=['country'])\ndf_global = df_global.rename(columns={'Alpha-3 code': 'iso_a3'})","0c7b6208":"df_global.head(5)","f3a96cee":"world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\nworld.head(5)","239c297b":"mapped = world.merge(df_global, how='left', left_on='iso_a3', right_on='iso_a3')\nmapped = mapped.fillna(0)\nmapped = mapped.drop(['Alpha-2 code', 'Numeric code','ISO 3166-2', 'pop_est', 'continent', 'country'], axis=1)\nmapped.head(5)","4a1d4ffb":"import geoplot\nimport mapclassify\n\n# Fig Setup\nfig, ax = plt.subplots(1, figsize=(18,12))\nspec = gridspec.GridSpec(ncols=2, nrows=3, figure=fig)\n\ndef create_map(year, posx, posy):\n    ax = fig.add_subplot(spec[posx,posy])\n    mapped.plot(column=year, cmap='Blues', linewidth=0.8, ax=ax, edgecolors='0.8', legend=True)\n    ax.set_title('CO2 Emissions in {}'.format(year), fontdict={'fontsize':15})\n    ax.set_axis_off()\n\ncreate_map('1960', 0, 0)\ncreate_map('1980', 0, 1)\ncreate_map('2000', 2, 0)\ncreate_map('2018', 2, 1)\n\n\nfig.text(0.25, 0.62, 'Comparative Study of CO2 Emissions across Countries', fontsize=17, fontweight='bold', fontfamily='sans-serif')\nfig.text(0.25, 0.37, \n'''Right off the bat, we notice one consistent theme - CO2 emissions are generally higher in the West\nacross all 4 time periods considered. From these visualisations alone, it seems to correlate with the \ndevelopment of the economy. In other words, developed economies (like, US, Australia, UK) seem to \nhave higher CO2 emissions.\nAs we approach the 21st century, we see a shift from high rates in the West. They start to even out a \nlittle and increase in the Middle East and Australia, followed closely by China and some European\ncountries.\nAnother important point to note is the scale on the right. There's a jump in emissions to values of \naround 50 in 1980 and it drops back to the range of 10-30 in 2000. This is consistent with what we saw \nin our initial plots. Most countries experienced a significant peak followed by a drop in emissions in\nthe 1980s.\n'''\n, fontsize=14, fontweight='light', fontfamily='sans-serif')\n\n\nfig.tight_layout()\nplt.show()","02ad4162":"# Exploratory Data Analysis","f1b047e9":"# Remarks\n\nThank you for taking the time to read this analysis. I would love to hear your feedback in the comments in any way I could improve on this notebook. If you liked it, I'd really appreciate it if you could upvote the project :)","d3fb6ed2":"# Data Cleaning","94a69a88":"# Comparative Analaysis\n\nHowever, these figures only show us how CO2 Emissions have progressed over the 60 years. They don't show us how big the effect has been in each country. For example, as we saw earlier emissions in Aruba were crossing 200 which is over 20000% that of any other country and we wouln't have seen that dramatic increase in these individual plots. \n\nThis is why we need a comparative analysis of some countries (it's hard to do this for all 249 countries we're considering). So, let's set up the dataframe we will need for our next steps. Going forward, my idea is to compare the CO2 emissions in 1960, 1980, 2000 and 2018 pictured on a heatmap of the world. This would allow us to get a better idea of the differences between the countries.","73f1d8a6":"# Possible Policies\/Global Phenomenons\n\nI'm no expert here but if most countries seem to have a significant drop in CO2 Emissions in the same time period of 1980-1995, it's likely these are due to some global phenomenon - either some treaties that may have been signed (like the Paris Agreement, 2016) or there was a big shift in production environments across the world because this time period co-incides with third era of globalisation from 1980-2000.\n\nSome of the treaties that aimed at reducing CO2 emissions \/ global warming were:\n- Paris Agreement, 2016\n- Doha Agreement, 2012\n- Kyoto Protocol, 1997\n\nAgain, these are just my guesses for the reasons and I could be wrong. I'd love to hear your opinion on what they could be and I could try to add to the analysis from external data sources!","f00b7c84":"Aruba seems to be the only country with the extremely high numbers. If no other countries (not even neighbouring ones) seem to have such numbers, they probably are from incorrect logging of data. Let's remove Aruba now.","cae566bf":"# A Comparative Analysis of CO2 Emissions across Countries \n\nEvery year we head about the rise of global warming and those world-ending theories and today I want to see how bad things have been getting over the last few decades. Along with a Time Series since 1960, I also want to find out the differences between countries and look into the reasons why they may exist. \n\nThese are some of the questions we will be trying to answer throughout this notebook:\n- How have CO2 Emissions fared in different countries over the last few decades?\n- What are the differences in Emissions in each country and what might be the reasons for this? \n- We will try to overlay some important dates and events and see differences that may have occured (for example, signing of the Paris Agreement)","42d6a960":"## Comparative Study Conclusions \n\nClearly, we saw higher CO2 emissions in developed countries as opposed to developing countries with a drop in the values for Greenland over the 40 years. Based on the data provided, it seems there is some correlation between a country's development and CO2 rates but we cannot be sure about this without a deeper look into this and some correlation plots.","93ce3acc":"# Imports","c885b696":"## Further Cleaning\n\nAs you saw, we had 16 countries with no recorded data. While we did get rid of those, we still have some countries where almost half the data is missing. We will ignore this missing data for now but we can always revisit this later.\n\nAnother point to note is that emissions in Aruba generally seem to be at around 200 which is over 20-50 times the amount of emission of the rest of the world. This leads me to believe that the numbers for Aruba must be a mistake and I will be removing them from the data. But first, let's see if there are any other such outliers."}}