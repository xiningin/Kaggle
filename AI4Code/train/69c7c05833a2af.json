{"cell_type":{"96743f0f":"code","71d3e65e":"code","ed597e15":"code","4d46b838":"code","85037e2b":"code","f7058146":"code","833d8ccd":"code","65f0bde3":"code","f958c2d8":"code","4e903908":"code","6c3d61f9":"code","e3d4bbe7":"code","52dd1263":"code","f3982af9":"code","52267c42":"code","f3679c33":"code","ba00823a":"code","6b86603b":"code","51efa8c5":"markdown","fd870ed4":"markdown","21da9d9d":"markdown","443c8a0d":"markdown"},"source":{"96743f0f":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\nimport numpy as np","71d3e65e":"df = pd.read_excel('\/kaggle\/input\/covid19\/dataset.xlsx')","ed597e15":"df.columns = [x.lower().strip().replace(' ','_') for x in df.columns]\ndf.columns","4d46b838":"plt.figure(figsize=(15,8))\nsns.heatmap(df.isna(),cbar=False)","85037e2b":"# Proportion of the dataset that has null values\n\ndef find_null_values(threshold_of_null=0):\n    \n    null_columns = np.where(df.isna().sum() > threshold_of_null)[0]\n    prop = (len(null_columns) \/ df.shape[1])*100    \n\n    print(f'{round(prop,2)}% ({len(null_columns)}) of columns in the dataset have at least {threshold_of_null} null values.')\n","f7058146":"find_null_values(df.shape[0]*0.8)","833d8ccd":"def find_null_values_rows(threshold_of_null=0):\n    \n    null_rows = np.where(df.isna().sum(axis=1) > threshold_of_null)[0]\n    prop = (len(null_rows) \/ df.shape[0])*100\n    \n    print(f'{round(prop,2)}% ({len(null_rows)}) of rows in the dataset have at least {threshold_of_null} null values.')","65f0bde3":"find_null_values_rows(df.shape[1]*0.8)","f958c2d8":"df.groupby('sars-cov-2_exam_result').count().iloc[:,list(set(np.where(df.groupby('sars-cov-2_exam_result').count() > 500)[1]))]","4e903908":"## Let's find where the we have at least 500 not null values.\n\ndf.groupby('sars-cov-2_exam_result').count().iloc[:,list(set(np.where(df.groupby('sars-cov-2_exam_result').count() > 500)[1]))].columns","6c3d61f9":"## Let's use this columns\n\ndf.groupby('sars-cov-2_exam_result').count().loc[:,['hematocrit','hemoglobin','platelets','bordetella_pertussis','influenza_b,_rapid_test','influenza_a,_rapid_test','red_blood_cells','basophils','lymphocytes','leukocytes']]","e3d4bbe7":"df_model = df[['sars-cov-2_exam_result','hematocrit','hemoglobin','platelets','bordetella_pertussis','influenza_b,_rapid_test','influenza_a,_rapid_test','red_blood_cells','basophils','lymphocytes','leukocytes']]\ndf_model.notnull().sum()","52dd1263":"df = df_model.dropna(how='any')","f3982af9":"## Checking correlations\n\ndf_corr = df.assign(target = lambda x: x['sars-cov-2_exam_result'].map({'negative':0,'positive':1}))\n\nplt.figure(figsize=(15,8))\nsns.heatmap(df_corr.corr(method='spearman'),vmin= -1, vmax= 1,annot=True)","52267c42":"from sklearn.linear_model import LogisticRegression\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom sklearn.compose import make_column_transformer\nfrom sklearn.model_selection import cross_val_score\n\ndf.head()","f3679c33":"cat_features = ['bordetella_pertussis','influenza_b,_rapid_test','influenza_a,_rapid_test']\nnum_features = ['hematocrit','hemoglobin','platelets','red_blood_cells','basophils','lymphocytes','leukocytes']\n\nmkcol = make_column_transformer((StandardScaler(),num_features),(OneHotEncoder(),cat_features),remainder='drop')\nx = mkcol.fit_transform(df)\ny = df.loc[:,'sars-cov-2_exam_result']","ba00823a":"logreg = LogisticRegression(class_weight='balanced')\nlogreg.fit(x,y)","6b86603b":"cross_val_score(logreg,x,y,cv=9).mean()","51efa8c5":"I'll try to use this dataset ...","fd870ed4":"## Well! There are 88 columns (of 111) with at least 4515 null values. That's going to be hard.","21da9d9d":"# Let's find some null values?","443c8a0d":"## Well! There are 4094 rows (of 5644) with at least 88 null values (out of 111). That's going to be really, really hard."}}