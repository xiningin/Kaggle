{"cell_type":{"320b59ec":"code","b405dea9":"code","5891be0a":"code","baf93eea":"code","fe09ef27":"code","c71432da":"code","c4bac36c":"code","e33747fc":"markdown","6703489c":"markdown"},"source":{"320b59ec":"import pandas as pd\nimport numpy as np\nimport pandas_datareader as web\nimport matplotlib.pyplot as plt\nimport datetime as dt\nplt.style.use('seaborn')","b405dea9":"# data loading\nticker = 'GOOG'\n\ndf = web.get_data_yahoo(ticker, start=dt.datetime(2015,1,1))\ndf = df[['Close']]\ndf","5891be0a":"df.plot()","baf93eea":"# 20 and 40 days MAs\ndf['SMA20'] = df.Close.rolling(20).mean()\ndf['SMA40'] = df.Close.rolling(40).mean()","fe09ef27":"df","c71432da":"# Buy adn sell Signals\ndf['Signal'] = np.where(df.SMA20 > df.SMA40, 1, 0)\ndf['Position'] = df.Signal.diff()\n# 20 avg > 40 avg from 20 avg <= 40 avg. SO we think it might rise more hence buy\ndf['Buy'] = np.where(df.Position == 1, df.Close, np.nan) \n# 20 avg <= 40 avg from 20 avg > 40 avg. SO we think it might go down more hence sell\ndf['Sell'] = np.where(df.Position == -1, df.Close, np.nan) \ndf","c4bac36c":"# Let us see buy and sells on graph\nplt.figure(figsize=(20,15))\nplt.plot(df.Close, label='Close')\nplt.plot(df.SMA20, label='SMA20')\nplt.plot(df.SMA40, label='SMA40')\nplt.scatter(df.index, df.Buy, marker='o', label='Buy', c='b', s=200)\nplt.scatter(df.index, df.Sell, marker='^', label='Sell', c='r', s=200)\nplt.legend()","e33747fc":"The notebook is based on the https:\/\/www.youtube.com\/watch?v=PUk5E8G1r44\n# IMPORTS","6703489c":"# Moving averages"}}