{"cell_type":{"2edb54b2":"code","3c978f13":"code","a49c3eff":"code","d1e45ed0":"code","f4abd0aa":"code","232ba057":"code","ca1d5a02":"code","2ffa1608":"code","f1cca3d4":"code","0f9c4309":"markdown","0f897b97":"markdown","4e4cd5e3":"markdown","765af168":"markdown","c7e8666a":"markdown","a7eb04e8":"markdown","057e6d2c":"markdown","6a5d4b40":"markdown","e40e8636":"markdown","c01b41ae":"markdown","4c56bdb3":"markdown"},"source":{"2edb54b2":"#checking the shape\nimport pandas as pd\ndeaths = pd.read_csv(\"..\/input\/ghost-map\/deaths.csv\")\ndeaths.shape","3c978f13":"deaths.head()","a49c3eff":"deaths.info()","d1e45ed0":"#describing the dataframe\ndeaths.describe()","f4abd0aa":"# creating pair of longitude and lattitude\nlocations = deaths[[\"X coordinate\",\"Y coordinate\"]]\ndeaths_list = locations.values.tolist()\nlen(deaths_list)","232ba057":"#Plotting map\nimport folium\nmap = folium.Map(location=[51.5132119,-0.13666], tiles='Stamen Toner', zoom_start=17)\nfor point in range(0, len(deaths_list)):\n    folium.CircleMarker(deaths_list[point], radius=8, color='red', fill=True, fill_color='red', opacity = 0.4).add_to(map)\nmap","ca1d5a02":"# getting the co-ordinate pairs for map\npumps = pd.read_csv('..\/input\/ghost-map\/pumps.csv')\nlocations_pumps = pumps.loc[:, ['X coordinate','Y coordinate']]\npumps_list = locations_pumps.values.tolist()\n\n# Plotting the map\nmap1 = map\nfor point in range(0, len(pumps_list)):\n    folium.Marker(deaths_list[point], popup=pumps['Pump Name'][point]).add_to(map1)\nmap1","2ffa1608":"dates = pd.read_csv('..\/input\/ghost-map\/dates.csv', parse_dates=['date'])\n\n# Set the Date when handle was removed (8th of September 1854)\nhandle_removed = pd.to_datetime('1854\/9\/8')\ndates['day_name'] = dates['date'].dt.day_name()\n\n# Creating new column \"handle\" in \"dates\" DataFrame based on a Date the handle was removed \ndates['handle'] = dates['date'] > handle_removed\ndates.groupby(['handle']).sum()","f1cca3d4":"import bokeh\nfrom bokeh.plotting import output_notebook, figure, show\noutput_notebook(bokeh.resources.INLINE)\n\n# Set up figure\np = figure(plot_width=900, plot_height=450, x_axis_type='datetime', tools='lasso_select, box_zoom, save, reset, wheel_zoom',\n          toolbar_location='above', x_axis_label='Date', y_axis_label='Number of Deaths\/Attacks', \n          title='Number of Cholera Deaths\/Attacks before and after 8th of September 1854 (removing the pump handle)')\n\n# Plot on figure\np.line(dates['date'], dates['deaths'], color='red', alpha=1, line_width=3, legend='Cholera Deaths')\np.circle(dates['date'], dates['deaths'], color='black', nonselection_fill_alpha=0.2, nonselection_fill_color='grey')\np.line(dates['date'], dates['attacks'], color='black', alpha=1, line_width=2, legend='Cholera Attacks')\n\nshow(p)","0f9c4309":"<a id=\"5\"><\/a>\n\n## 5. Preventing the Spread\n<p><img style=\"float: left;margin:5px 20px 5px 1px\" src=\"https:\/\/assets.datacamp.com\/production\/project_132\/img\/johnsnow_map1.jpg\"><\/p>\n<p>So, John Snow finally had his proof that there was a connection between deaths as a consequence of the cholera outbreak and the public water pump that was probably contaminated. But he didn't just stop there and investigated further.<\/p>\n<p>He was looking for anomalies now (we would now say \"outliers in data\") and found two in fact where there were no deaths. First was brewery right on the Broad Street, so he went there and learned that they drank mostly beer (in other words not the water from the local pump, which confirms his theory that the pump is the source of the outbreak). The second building without any deaths was workhouse near Poland street where he learned that their source of water was not the pump on the Broad Street (confirmation again). The locations of both buildings are visualized also on the map on the left.<\/p>\n<p>He was now sure, and although officials did not trust him nor his theory they removed the handle to the pump next day, 8th of September 1854. John Snow later collected and published in his famous book also all the data about deaths in chronological order, before and after the peak of the outbreak and we will now analyze and compare the effect when the handle was removed.<\/p>","0f897b97":"<a id='top'><\/a>\n<div class=\"list-group\" id=\"list-tab\" role=\"tablist\">\n<h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\"  role=\"tab\" aria-controls=\"home\">Notebook Navigation<\/h3>\n\n[1. Breif History](#1)   \n[2. Exploratoring the Data](#2)  \n[3. The Ghost Map!](#3)  \n[4. Water Borne Hypothesis](#4)   \n[5. Preventing the Spread](#5)   ","4e4cd5e3":"<a id=\"3\"><\/a>\n\n## 3. The Ghost Map!","765af168":"<a id=\"4\"><\/a>\n\n## 4. Water Borne Hypothesis\n\nJohn Snow at the time already had a developed theory that cholera spreads through water, so to test this he marked on the map also the locations of the water pumps nearby. We will do the same here","c7e8666a":"<a id=\"2\"><\/a>\n\n## 2. Exploring the Data","a7eb04e8":"As you can see that the majority cases are clustered around one particular public water pump in Broad Street, Soho. This prooved the John Snow's Hypothesis that the disease was water borne","057e6d2c":"As we can see, removing the handle from the pump prevented any more of the infected water from being collected and hence prevented the spread of the disease","6a5d4b40":"From the above visualization, we can clearly see that the peak of the cholera outbreak happened before removing the handle and it was already in decline (downside trajectory) before the 8th of September 1854.","e40e8636":"## KEY NOTE\n\nIn this notebook,analyze the data that was collected in 1854 recording the Cholera Deths and recreate the famous map \"The Ghost Map\" by John Snow","c01b41ae":"<a id=\"1\"><\/a>\n\n## 1. Brief History\n<p><img style=\"float: left;margin:5px 20px 5px 1px\" src=\"https:\/\/assets.datacamp.com\/production\/project_132\/img\/johnsnow_final1.png\"><\/p>\n<p>Dr. John Snow (1813-1858) was a famous British physician and is widely recognized as a legendary figure in the history of public health and a leading pioneer in the development of anesthesia. Some even say one of the greatest physicians of all time.<\/p>\n<p>As a leading advocate of both anesthesia and hygienic practices in medicine, he not only experimented with ether and chloroform but also designed a mask and method how to administer it. He personally administered chloroform to Queen Victoria during the births of her eighth and ninth children, in 1853 and 1857, which assured a growing public acceptance of the use of anesthetics during childbirth.<\/p>\n<p>But, as we will show later, not all his life was just a success. John Snow is now also recognized as one of the founders of modern epidemiology <em>(some also consider him as the founder of data visualization, spatial analysis, data science in general, and many other related fields)<\/em> for his scientific and pretty modern data approach in identifying the source of a cholera outbreak in Soho, London in 1854, but it wasn't always like this. In fact, for a long time, he was simply ignored by the scientific community and currently is very often mythified. <\/p>","4c56bdb3":"# FIN."}}