{"cell_type":{"16f24009":"code","f90fe7cd":"code","7dc45c3d":"code","781b949a":"code","b3687479":"code","536475d8":"code","a308389b":"code","2cec8748":"code","a7d06268":"code","a1c9dc5b":"code","3d454c09":"code","14a499b9":"code","6244faa1":"code","7ea5be7b":"code","e227d2f2":"code","5a9a4227":"code","84016f1c":"code","b467a2dd":"code","898ceeef":"code","04b55fbb":"code","eeeea14c":"code","1fc66e27":"markdown","a1d83130":"markdown","87be2cd7":"markdown","9b80359e":"markdown"},"source":{"16f24009":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\n%matplotlib inline","f90fe7cd":"train = pd.read_csv('..\/input\/train.csv')\n\ny_train = train['target'].values\ntrain.drop(['ID', 'target'], axis=1, inplace=True)\n\nX_train = train.values\nfeature_names = train.columns.values","7dc45c3d":"olivier_features= [\n        'f190486d6', 'c47340d97', 'eeb9cd3aa', '66ace2992', 'e176a204a',\n        '491b9ee45', '1db387535', 'c5a231d81', '0572565c2', '024c577b9',\n        '15ace8c9f', '23310aa6f', '9fd594eec', '58e2e02e6', '91f701ba2',\n        'adb64ff71', '2ec5b290f', '703885424', '26fc93eb7', '6619d81fc',\n        '0ff32eb98', '70feb1494', '58e056e12', '1931ccfdd', '1702b5bf0',\n        '58232a6fb', '963a49cdc', 'fc99f9426', '241f0f867', '5c6487af1',\n        '62e59a501', 'f74e8f13d', 'fb49e4212', '190db8488', '324921c7b',\n        'b43a7cfd5', '9306da53f', 'd6bb78916', 'fb0f5dbfe', '6eef030c1'\n    ]","781b949a":"def len_of_intersection(feature, target):\n    return len(set(target).intersection(set(feature)))\n\n\nintersection_features = np.apply_along_axis(\n    len_of_intersection, arr=X_train, axis=0, target=y_train\n)","b3687479":"intersection_features_top40 = feature_names[\n    np.argsort(intersection_features)[-40:]\n]","536475d8":"len_of_intersection(intersection_features_top40, olivier_features)","a308389b":"set(olivier_features) - set(intersection_features_top40)","2cec8748":"np.where(feature_names[\n        np.argsort(intersection_features)[::-1]\n    ] == '9306da53f'\n)[0][0]","a7d06268":"giba_feature = 'f190486d6'\ngiba_feature in set(intersection_features_top40)","a1c9dc5b":"np.where(intersection_features_top40 == giba_feature)[0][0]","3d454c09":"df = pd.DataFrame()\ndf['len_of_intersection'] = np.sort(intersection_features)[-40:]\ndf['name_of_feature'] = intersection_features_top40\ndf.plot.barh(y='len_of_intersection', x='name_of_feature', figsize=(6, 12), rot=33)\nplt.show()","14a499b9":"from collections import Counter\n\nCounter(intersection_features != 0.0)","6244faa1":"\ndef corr_with_target(feature, target):\n    # for exactly zeros feature return 0.0\n    if np.count_nonzero(feature) == 0:\n        return 0.0\n    return np.corrcoef(feature, target)[0, 1]\n\ncorr_features = np.apply_along_axis(\n    corr_with_target, arr=X_train, axis=0, target=y_train\n)","7ea5be7b":"from sklearn.cluster import KMeans","e227d2f2":"cluster_features = KMeans(n_clusters=2, random_state=0).fit_predict(\n    np.column_stack([corr_features, intersection_features])\n)","5a9a4227":"len(cluster_features)","84016f1c":"plt.figure(figsize=(8, 6))\nplt.scatter(corr_features, intersection_features, c=cluster_features)\nplt.plot(corr_features[np.where(feature_names == '9306da53f')],\n         intersection_features[np.where(feature_names == '9306da53f')], 'o', markersize=15, label='olivier_outlier', c='red')\nplt.plot(corr_features[np.where(feature_names == 'f190486d6')],\n         intersection_features[np.where(feature_names == 'f190486d6')], 'o', markersize=15, label='giba_feature')\nplt.legend()\nplt.show()","b467a2dd":"cluster1_fnames = feature_names[cluster_features == 1]\nlen(cluster1_fnames)","898ceeef":"len(set(cluster1_fnames).intersection(set(olivier_features)))","04b55fbb":"len(set(cluster1_fnames).intersection(set(intersection_features_top40)))","eeeea14c":"np.save('intersection_features', intersection_features_top40)\nnp.save('olivier_features', olivier_features)","1fc66e27":"40 native features from  Olivier's [feature_scoring_vs_zeros](https:\/\/www.kaggle.com\/ogrellier\/feature-scoring-vs-zeros) kernel ","a1d83130":"Where is it?","87be2cd7":"What about Giba's `'f190486d6'` feature from [The Data \"Property\"](https:\/\/www.kaggle.com\/c\/santander-value-prediction-challenge\/discussion\/61329) post?","9b80359e":"Who cares about `'9306da53f'` feature? ;)"}}