{"cell_type":{"32ae8f45":"code","16b1b90e":"code","8001ca10":"code","00b66fd5":"code","877705a2":"code","b17a3b11":"code","37fd1722":"code","bac8fa8f":"code","2eefdfb3":"code","44218978":"code","4897949e":"code","eb0496c6":"code","4abbf60f":"code","62927140":"code","74638b7c":"code","14032593":"code","5612ae47":"code","fa7fae78":"code","03b773e4":"code","198e4601":"code","3448fc81":"code","d7ee12cd":"code","7edfe3ee":"code","a50e3223":"code","625ce7ba":"code","6ad4c6aa":"code","6f2aa752":"code","b3ee63d4":"code","54268a35":"code","428c3a1d":"code","4aefb17c":"code","2cc88480":"code","604059d6":"code","d042892a":"code","f039e970":"code","ea2e4ef4":"code","1b756792":"code","91c56be3":"markdown","2acb5b3c":"markdown","4778b9ef":"markdown","70e68cd2":"markdown","28caaa7d":"markdown","429856c2":"markdown","e0d414d1":"markdown","6ea4bb04":"markdown","fc97edd5":"markdown","8e228863":"markdown","4954deed":"markdown","324b5e4b":"markdown","d09c1974":"markdown","5176ee5f":"markdown","f120e12e":"markdown","5a195295":"markdown","d353637f":"markdown","b9c5ceaa":"markdown","d7b251fb":"markdown","98673a2f":"markdown","9473903e":"markdown","6c351c46":"markdown","4ce127db":"markdown","7aa245f0":"markdown","ed5c8e08":"markdown","2acabaea":"markdown","ff55f436":"markdown","6101f6c1":"markdown","f2ce231e":"markdown","6a20fc97":"markdown","5cc46886":"markdown","89235be5":"markdown","42774560":"markdown","7823c52e":"markdown","5be52eb9":"markdown","606bbfd7":"markdown","63ff6976":"markdown"},"source":{"32ae8f45":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","16b1b90e":"# Read the csv file\ndf = \"..\/input\/hotel-booking-demand\/hotel_bookings.csv\"\nhotel_booking_data = pd.read_csv(df)","8001ca10":"hotel_booking_data.shape","00b66fd5":"hotel_booking_data.head()","877705a2":"hotel_booking_data.tail()","b17a3b11":"hotel_booking_data.sample(10)","37fd1722":"hotel_booking_data.info()","bac8fa8f":"hotel_booking_data.columns","2eefdfb3":"# Rename the columns to be more readable\nhotel_booking_data.rename(columns={'adr': 'average_daily_rate'},inplace=True)\nhotel_booking_data.head()","44218978":"# drop company column\nhotel_booking_data.drop('company',axis='columns', inplace=True);","4897949e":"#check the number of columns after drop company column\nhotel_booking_data.shape","eb0496c6":"hotel_booking_data.isna().sum()","4abbf60f":"# drop Null rows \nhotel_booking_data.dropna(inplace=True)","62927140":"hotel_booking_data.isna().sum()","74638b7c":"hotel_booking_data.duplicated().sum()","14032593":"# drop the duplicates\nhotel_booking_data = hotel_booking_data.drop_duplicates()","5612ae47":"hotel_booking_data.duplicated().sum()","fa7fae78":"hotel_booking_data.describe()","03b773e4":"hotel_booking_data.drop(hotel_booking_data[hotel_booking_data.average_daily_rate<1.0].index,inplace=True)","198e4601":"hotel_booking_data.shape","3448fc81":"# Show the type of hotel\nhotel_booking_data.hotel.unique()","d7ee12cd":"hotel_booking_data['hotel'].value_counts()","7edfe3ee":"labels = hotel_booking_data.hotel.value_counts().index\nsizes = hotel_booking_data.hotel.value_counts()\nplt.figure(figsize = (5,5))\nplt.pie(sizes, labels=labels, autopct='%1.1f%%',colors = ['#ADD8E6','#007399'])\nplt.title('City hotel v Resort hotel',color = 'black',fontsize = 13);","a50e3223":"plt.figure(figsize=(10,5))\nsns.countplot(data=hotel_booking_data, x = 'hotel',hue='is_canceled',palette='Blues')\nplt.title(\"Type of hotel has the highest number of cancellations\",fontsize=16)\nplt.legend(['not canceled','canceled'],shadow = True, loc = 0)\nplt.show()\n\n\n","625ce7ba":"# Now we compare the cancel rate of the city hotel and the resort hotel\ncan_rate = hotel_booking_data.groupby([\"hotel\",\"is_canceled\"]).size().reset_index(name='rate')\nsumme = can_rate.groupby(\"hotel\")['rate'].transform(\"sum\")\ncan_rate['rate'] = can_rate['rate'].div(summe)\ncan_rate","6ad4c6aa":"ngroup= hotel_booking_data.groupby('is_canceled', as_index= False)[['previous_cancellations']].mean()\nplt.figure(figsize=(10,5))\nplt.title(\"Customers with the history of cancellation\",fontsize=16)\nhistory_of_cancellation=sns.barplot(data=ngroup, x=ngroup['is_canceled'], y=ngroup['previous_cancellations'], palette='Blues')\nhistory_of_cancellation.set_xticklabels(['Not canceled','canceled']);","6f2aa752":"hotel_resort_data = hotel_booking_data[hotel_booking_data['hotel'] == 'Resort Hotel']\nhotel_city_data = hotel_booking_data[hotel_booking_data['hotel'] == 'City Hotel']","b3ee63d4":"# Cancelation across city hotel for each customer type\nplt.figure(figsize=(10,5))\ncity_hotel=sns.countplot(data=hotel_city_data, x='is_canceled', hue='customer_type', palette='Blues')\nplt.title('Cancelations Across Customer Types For City Hotel', fontdict={'fontsize':16})\ncity_hotel.set_xticklabels(['Not canceled','canceled'])\n\nplt.show()\n\n\n# Cancelation across resort hotel for each customer type\nplt.figure(figsize=(10,5))\nresort_hotel=sns.countplot(data=hotel_resort_data, x='is_canceled', hue='customer_type',palette='Blues')\nplt.title('Cancelations Across Customer Types For Resort Hotel', fontdict={'fontsize':16})\nresort_hotel.set_xticklabels(['Not canceled','canceled'])\n\nplt.show()","54268a35":"plt.figure(figsize=(10,5))\nhotel_booking_data['is_canceled'].value_counts().plot(kind=\"bar\",rot=0)\nplt.title('Effect of waiting list on cancelation', fontdict={'fontsize':16})\nticks_x = np.linspace(0, 1,2)\nis_canceled = ['Not canceled','canceled']\nplt.xticks(ticks_x, is_canceled);","428c3a1d":"#group data for deposit_type:\ndeposit_cancel_data = hotel_booking_data.groupby(\"deposit_type\")[\"is_canceled\"].describe()\ndeposit_cancel_data","4aefb17c":"hotel_booking_data['deposit_type'].value_counts()","2cc88480":"plt.figure(figsize=(10, 5))\nsns.barplot(x= deposit_cancel_data.index, y= deposit_cancel_data[\"count\"]\/100 ,palette='Blues')\nplt.title(\"Effect of deposit_type on cancelation\",fontsize=16)\nplt.xlabel(\"Deposit type\", fontsize=10)\nplt.ylabel(\"Cancelations [%]\",fontsize=10)\nplt.show()","604059d6":"plt.figure(figsize=(10, 5))\nplt.title(\"Effect the total of special request on cancelation\",fontsize=16)\ntotal_of_special=sns.countplot(data=hotel_booking_data,x='is_canceled', palette='Blues')\ntotal_of_special.set_xticklabels(['Not canceled','canceled']);","d042892a":"plt.figure(figsize=(15,5))\nsns.countplot(data=hotel_city_data, x = 'arrival_date_month',hue='is_canceled',palette='Blues',order=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"])\nplt.title(\"Cancelations Across Months For City Hotel\",fontsize=16)\nplt.legend(['not canceled','canceled'],shadow = True, loc = 0)\nplt.show()","f039e970":"plt.figure(figsize=(15,5))\nsns.countplot(data=hotel_resort_data, x = 'arrival_date_month',hue='is_canceled',palette='Blues',order=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"])\nplt.title(\"Cancelations Across Months For Resort Hotel\",fontsize=16)\nplt.legend(['not canceled','canceled'],shadow = True, loc = 0)\nplt.show()","ea2e4ef4":"# group data for lead_time:\nlead_cancel_data = hotel_booking_data.groupby(\"lead_time\")[\"is_canceled\"].describe()\n\n# use only lead_times with more than 10 bookings for graph:\nlead_cancel_data_10 = lead_cancel_data.loc[lead_cancel_data[\"count\"] >= 10]\n\n#show figure:\nplt.figure(figsize=(10,5))\nsns.regplot(x=lead_cancel_data_10.index, y=lead_cancel_data_10[\"mean\"].values * 100)\nplt.title(\"Effect of lead time on cancelation\", fontsize=16)\nplt.xlabel(\"Lead time\",fontsize=10)\nplt.ylabel(\"Cancelations [%]\", fontsize=10)\n# plt.xlim(0,365)\nplt.show()\n","1b756792":"a = hotel_booking_data.corr()\nplt.figure(figsize=(11, 8))\nk = 15\ncols = a.nlargest(k,'is_canceled')['is_canceled'].index\ncm = np.corrcoef(hotel_booking_data[cols].values.T)\nsns.set(font_scale=1.0)\nhm = sns.heatmap(cm, annot=True, square=True, fmt='.2f', annot_kws={'size': 12}, yticklabels=cols.values,xticklabels=cols.values,cmap=\"Blues\")\nplt.show()","91c56be3":"### check if stell we have any missnig value","2acb5b3c":"##### So, more days in waiting list,is no reason to more cancel","4778b9ef":"### after check, we found some NULL value should drop it ","70e68cd2":"### Check if there are NULL value and sum them","28caaa7d":"### Data Exploration","429856c2":"#### compare the cancelings between two hotels.\n### Which type of hotel has the highest number of cancellations?","e0d414d1":"#### City hotel is more than resort hotel","6ea4bb04":"##### The above figure shows the absolute amount of the canceled order of the city hotel and the resort hotel. The big difference does not tell us much information, since the city hotel has overall much more orders. Only the cancellation rate matters.\n","fc97edd5":"##### One third of the hotels are resort hotels.\n##### The reason could be that:\n\n##### Tere are more city hotels than resort hotels.\n##### City Hotel are normally cheaper.\n##### There are more demand for city hotels than resort hotels.","8e228863":"#### Rename the columns","4954deed":"#### Effect of lead time on cancelation","324b5e4b":"### Cancelation across months for City Hotel and Resort Hotel","d09c1974":"### Data Visualization","5176ee5f":"### Lets import the necessary libs and load the dataet.","f120e12e":"### Data Preprocessing","5a195295":"check after drop the duplicates","d353637f":"#### The purpose of this analysis cancellations in hotels, whether resorts or city hotels,to help devise new methods to reduce the consequent losses.\n##### the results allow hotel managers to improve cancellation policies, define better overbooking tactics\n ","b9c5ceaa":"##### Over 99% of people how No deposit have canceled their hotel bookings","d7b251fb":"#### There is feature that won't be relevant in our analysis so we will drop it","98673a2f":"##### With these lists, we can conclude that reservation status date plays a huge role whether a guest cancels or not.\n##### We can see as we get close to the end of the year, cancelations tend to decrease after a sudden rise in July. (which could be an account for the summer travels)\n\n","9473903e":"##### Now is cleaner","6c351c46":"### Now let's see the cancelations across customer types","4ce127db":"### let's see the relations of special request with cancelation.","7aa245f0":"### Show if more days in waiting list lead more cancelation?","ed5c8e08":" ### Customers with the history of cancellation","2acabaea":"#### Content\n\n##### Data Exploration\n##### Data Pre-Processing\n##### Data Visualization","ff55f436":"##### Bookings made a few days before the arrival date are rarely canceled, whereas bookings made over one year in advance are canceled very often.","6101f6c1":"##### For City Hotel the pattern observed for canceled bookings and confirmed bookings (Not Canceled) is same. No cancelations can be observed across Contract and Group category in Resort Hotel.","f2ce231e":"### to remove negative value from average_daily_rate","6a20fc97":"##### we have a lot of duplicates should drop it ","5cc46886":"#### Customers with the history of cancellation tend to cancel more often.\n##### Interestingly repeated guests tend to cancel more!","89235be5":"##### From the above analysis we can see that the city hotel has a much higher cancellation rate. However, if we only look at the guests who had canceled before, the guests of resort hotel has more cancellations.","42774560":"##### So total of special request it's has some effect on cancelation","7823c52e":"#### NO Deposit is more cancellation , let's show it in visualization","5be52eb9":"### Check if we have any negative value","606bbfd7":"### The relation between deposit type and cancelations.","63ff6976":"### To show if we have duplicates"}}