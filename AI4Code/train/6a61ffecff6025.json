{"cell_type":{"1a4b275c":"code","bdfd5ea8":"code","ecca31ed":"code","38833b78":"code","72edee25":"code","3cb0dc65":"code","8c491725":"code","66376c4b":"code","700c355a":"code","98bca6d4":"code","472ba9ad":"code","9d57d3e2":"code","3bfcd58f":"code","ef57dae5":"code","08805007":"code","18c448da":"code","eac875af":"code","3d4bfc24":"code","265af384":"code","f50f8c10":"code","ae7c817b":"code","cafc285e":"code","d41e2974":"code","eb9361a0":"code","95afb90f":"code","512f8629":"code","e113ed4d":"code","9b2b6ebd":"code","cffc6033":"code","1a65c08f":"code","8a7a6b8b":"code","65dadda4":"code","0ba37426":"code","a1d1f1f9":"code","005624a0":"code","a0dcb056":"code","6d3ab5eb":"code","92ae7212":"code","cf68e17e":"code","70f13558":"code","0506aed9":"code","6c0f4538":"code","dc1f3c40":"code","f0cbff2a":"code","615c7730":"code","17d6ef5d":"code","17cb76c3":"code","c1146cb6":"code","e162c39d":"code","9c610312":"code","54e4764c":"code","9ed24a5d":"code","19f1fd83":"code","843b398c":"code","90db845a":"code","250e71d7":"code","d8f9e71a":"code","24b179f4":"code","26964c2b":"code","77a0239b":"code","1a91009f":"code","e67d977c":"code","bcd5cdfa":"code","dc73b02a":"code","3d462a79":"code","226bee5b":"code","3ee0fe02":"code","4da1b0e7":"code","c6b2a419":"code","0535a83b":"code","95dac0a3":"code","947d6bdb":"code","3f18e409":"code","a48f6bd1":"code","f294893b":"code","c0f6e255":"code","0e74b19b":"code","7e3b8867":"code","c7fdc3d6":"code","ef0b44e0":"code","5284fb91":"code","7f94b444":"code","e9115b30":"code","a6d6ee15":"markdown","cd1286cb":"markdown","cc84d0c1":"markdown","b96b3204":"markdown","fc18002c":"markdown","e57f152f":"markdown","8964261b":"markdown","7187b9c4":"markdown","712e0a9c":"markdown","5d196dc7":"markdown","71c26263":"markdown","061e0401":"markdown","46c6a05f":"markdown","747ef0ba":"markdown","2799ed89":"markdown","81349bb0":"markdown","54cf01f0":"markdown","896067fc":"markdown","1c72c24a":"markdown","a593678a":"markdown","3ee2ce88":"markdown","c7f98180":"markdown"},"source":{"1a4b275c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport folium","bdfd5ea8":"df=pd.read_csv('..\/input\/hotel-bookings\/hotel_bookings.csv')","ecca31ed":"df.head()","38833b78":"df.shape","72edee25":"df.columns","3cb0dc65":"df.isnull().values.any()","8c491725":"df.isnull().sum()","66376c4b":"df.fillna(0,inplace=True)","700c355a":"df.isnull().sum()","98bca6d4":"df['meal'].value_counts()","472ba9ad":"df['children'].unique()","9d57d3e2":"df['babies'].unique()","3bfcd58f":"filter=(df['children']==0) & (df['adults']==0) & (df['babies']==0)\ndf[filter]","ef57dae5":"\n\ndata=df[~filter]","08805007":"data.shape","18c448da":"data.head()","eac875af":"resort=data[(data[\"hotel\"]==\"Resort Hotel\")&(data[\"is_canceled\"]==0)]\ncity=data[(data[\"hotel\"]==\"City Hotel\")&(data[\"is_canceled\"]==0)]","3d4bfc24":"resort.head()","265af384":"resort.shape","f50f8c10":"city.head()","ae7c817b":"city.shape","cafc285e":"country_data=pd.DataFrame(data[data[\"is_canceled\"]==0][\"country\"].value_counts())\ncountry_data.rename(columns={\"country\":\"Number of Guests\"},inplace=True)\ntotal_guests=country_data[\"Number of Guests\"].sum()\ncountry_data[\"Guests in %\"]=round(country_data[\"Number of Guests\"] \/ total_guests * 100, 2)\ncountry_data[\"country\"]=country_data.index","d41e2974":"#Pie plot\nfig = px.pie(country_data,\n             values=\"Number of Guests\",\n             names=\"country\",\n             title=\"Home country of guests\",\n             template=\"seaborn\")\nfig.update_traces(textposition=\"inside\", textinfo=\"value+percent+label\")\nfig.show()","eb9361a0":"guest_map=px.choropleth(country_data,\n                  locations=country_data.index,\n                  color=country_data[\"Guests in %\"],\n                  hover_name=country_data.index,\n                  color_continuous_scale=px.colors.sequential.Plasma,\n                  title=\"Home Country of Guests\")\nguest_map.show()","95afb90f":"data.head()","512f8629":"data2=data[data[\"is_canceled\"]==0]","e113ed4d":"plt.figure(figsize=(12, 8))\nsns.boxplot(x=\"reserved_room_type\",\n            y=\"adr\",\n            hue=\"hotel\",\n            data=data2)\nplt.title(\"Price of room types per night and person\", fontsize=16)\nplt.xlabel(\"Room type\", fontsize=16)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.ylim(0, 600)\nplt.show()","9b2b6ebd":"data_resort=resort[resort[\"is_canceled\"]==0]\ndata_city=city[city[\"is_canceled\"]==0]","cffc6033":"data_resort.head()","1a65c08f":"data_city.head()","8a7a6b8b":"resort_hotel=data_resort.groupby(\"arrival_date_month\")[\"adr\"].mean().reset_index()\ncity_hotel=data_city.groupby(\"arrival_date_month\")[\"adr\"].mean().reset_index()","65dadda4":"resort_hotel","0ba37426":"city_hotel","a1d1f1f9":"final=resort_hotel.merge(city_hotel,on=\"arrival_date_month\")\nfinal.columns=[\"month\",\"price_for_resort\",\"price_for_city_hotel\"]\nfinal","005624a0":"final.head()","a0dcb056":"room_prices_mothly = data[[\"hotel\", \"arrival_date_month\", \"adr\"]].sort_values(\"arrival_date_month\")","6d3ab5eb":"# order by month:\nordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nroom_prices_mothly[\"arrival_date_month\"] = pd.Categorical(room_prices_mothly[\"arrival_date_month\"], categories=ordered_months, ordered=True)","92ae7212":"plt.figure(figsize=(12, 8))\nsns.lineplot(x = \"arrival_date_month\", y=\"adr\", hue=\"hotel\", data=room_prices_mothly, \n            hue_order = [\"City Hotel\", \"Resort Hotel\"], ci=\"sd\", size=\"hotel\", sizes=(2.5, 2.5))\nplt.title(\"Room price per night and person over the year\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.xticks(rotation=45)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.show()","cf68e17e":"data.head()","70f13558":"resort_guests_monthly = data_resort.groupby(\"arrival_date_month\")[\"hotel\"].count()\ncity_guests_monthly = data_city.groupby(\"arrival_date_month\")[\"hotel\"].count()\nresort_guest_data = pd.DataFrame({\"month\": list(resort_guests_monthly.index),\n                    \"hotel\": \"Resort hotel\", \n                    \"guests\": list(resort_guests_monthly.values)})\n\ncity_guest_data = pd.DataFrame({\"month\": list(city_guests_monthly.index),\n                    \"hotel\": \"City hotel\", \n                    \"guests\": list(city_guests_monthly.values)})\nfull_guest_data = pd.concat([resort_guest_data,city_guest_data], ignore_index=True)","0506aed9":"# order by month:\nordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nfull_guest_data[\"month\"] = pd.Categorical(full_guest_data[\"month\"], categories=ordered_months, ordered=True)","6c0f4538":"# This Dataset contains July and August date from 3 years, the other month from 2 years. Normalize data:\nfull_guest_data.loc[(full_guest_data[\"month\"] == \"July\") | (full_guest_data[\"month\"] == \"August\"),\n                    \"guests\"] \/= 3\nfull_guest_data.loc[~((full_guest_data[\"month\"] == \"July\") | (full_guest_data[\"month\"] == \"August\")),\n                    \"guests\"] \/= 2","dc1f3c40":"#show figure:\nplt.figure(figsize=(12, 8))\nsns.lineplot(x = \"month\", y=\"guests\", hue=\"hotel\", data=full_guest_data, \n             hue_order = [\"City hotel\", \"Resort hotel\"], size=\"hotel\", sizes=(2.5, 2.5))\nplt.title(\"Average number of hotel guests per month\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.xticks(rotation=45)\nplt.ylabel(\"Number of guests\", fontsize=16)\nplt.show()","f0cbff2a":"df.head()","615c7730":"plt.figure(figsize=(16,10))\nsns.boxplot(x=\"market_segment\",y=\"stays_in_weekend_nights\",data=data,hue=\"hotel\")","17d6ef5d":"data[\"meal\"].value_counts()","17cb76c3":"px.pie(data,values=data[\"meal\"].value_counts(),names=data[\"meal\"].value_counts().index,hole=0.5)","c1146cb6":"data.head()","e162c39d":"sns.countplot(data[\"total_of_special_requests\"])","9c610312":"data.columns","54e4764c":"pivot=data.groupby([\"total_of_special_requests\",\"is_canceled\"]).agg({\"total_of_special_requests\":\"count\"}).rename({\"total_of_special_requests\":\"count\"}).unstack()","9ed24a5d":"pivot.plot(kind=\"bar\")","19f1fd83":"data_resort.head()","843b398c":"rush_resort=data_resort[\"arrival_date_month\"].value_counts().reset_index()\nrush_resort.columns=[\"month\",\"no of guests\"]\nrush_resort","90db845a":"rush_city=data_city[\"arrival_date_month\"].value_counts().reset_index()\nrush_city.columns=[\"month\",\"no of guests\"]\nrush_city","250e71d7":"final_rush=rush_resort.merge(rush_city,on=\"month\")","d8f9e71a":"final_rush.columns=[\"month\",\"no of guests in resort\",\"no of guests in city\"]\nfinal_rush","24b179f4":"filter=data[\"is_canceled\"]==0\nclean_data=data[filter]","26964c2b":"clean_data.head()","77a0239b":"clean_data[\"total_nights\"] = clean_data[\"stays_in_weekend_nights\"] + clean_data[\"stays_in_week_nights\"]","1a91009f":"clean_data.head()","e67d977c":"stay=clean_data.groupby([\"total_nights\",\"hotel\"]).agg(\"count\").reset_index()\nstay=stay.iloc[:,0:3]\nstay.head()","bcd5cdfa":"stay=stay.rename(columns={\"is_canceled\":\"Number of stays\"})\nstay.head()","dc73b02a":"plt.figure(figsize=(20,8))\nsns.barplot(x=\"total_nights\", y = \"Number of stays\",hue=\"hotel\",hue_order=[\"City Hotel\",\"Resort Hotel\"],data=stay)","3d462a79":"clean_data.columns","226bee5b":"clean_data[\"market_segment\"].value_counts()","3ee0fe02":"px.pie(clean_data,values=clean_data[\"market_segment\"].value_counts(),names=clean_data[\"market_segment\"].value_counts().index,title=\"Bokings per market segment\")","4da1b0e7":"plt.figure(figsize=(20,10))\nsns.barplot(x=\"market_segment\",y=\"adr\",hue=\"reserved_room_type\",data=clean_data)","c6b2a419":"cancel=data[data[\"is_canceled\"]==1]","0535a83b":"cancel.head()","95dac0a3":"len(cancel[cancel[\"hotel\"]==\"Resort Hotel\"])","947d6bdb":"len(cancel[cancel[\"hotel\"]==\"City Hotel\"])","3f18e409":"px.pie(values=[11120,33079],names=[\"rh_cancellations\",\"ch_cancellations\"])","a48f6bd1":"data.head()","f294893b":"cancellations=data[data[\"is_canceled\"]==1]\ncancellations.head()","c0f6e255":"cancellations[\"hotel\"].unique()","0e74b19b":"cancel_month=data.groupby([\"arrival_date_month\",\"hotel\"]).agg(\"count\").reset_index()\ncancelled=cancel_month.iloc[:,0:3]","7e3b8867":"cancelled","c7fdc3d6":"cancelled=cancelled.rename(columns={\"is_canceled\":\"No of cancellations\"})\ncancelled","ef0b44e0":"res_book_per_month = data[(data[\"hotel\"] == \"Resort Hotel\")].groupby(\"arrival_date_month\")[\"hotel\"].count()\nres_cancel_per_month = data[(data[\"hotel\"] == \"Resort Hotel\")].groupby(\"arrival_date_month\")[\"is_canceled\"].sum()\n\ncty_book_per_month = data[(data[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"hotel\"].count()\ncty_cancel_per_month = data[(data[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"is_canceled\"].sum()","5284fb91":"cty_book_per_month = data[(data[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"hotel\"].count()\ncty_cancel_per_month = data[(data[\"hotel\"] == \"City Hotel\")].groupby(\"arrival_date_month\")[\"is_canceled\"].sum()\n\nres_cancel_data = pd.DataFrame({\"Hotel\": \"Resort Hotel\",\n                                \"Month\": list(res_book_per_month.index),\n                                \"Bookings\": list(res_book_per_month.values),\n                                \"Cancelations\": list(res_cancel_per_month.values)})\ncty_cancel_data = pd.DataFrame({\"Hotel\": \"City Hotel\",\n                                \"Month\": list(cty_book_per_month.index),\n                                \"Bookings\": list(cty_book_per_month.values),\n                                \"Cancelations\": list(cty_cancel_per_month.values)})\n\nfull_cancel_data = pd.concat([res_cancel_data, cty_cancel_data], ignore_index=True)\nfull_cancel_data[\"cancel_percent\"] = full_cancel_data[\"Cancelations\"] \/ full_cancel_data[\"Bookings\"] * 100","7f94b444":"ordered_months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n          \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\nfull_cancel_data[\"Month\"] = pd.Categorical(full_cancel_data[\"Month\"], categories=ordered_months, ordered=True)","e9115b30":"# show figure\nplt.figure(figsize=(12, 8))\nsns.barplot(x = \"Month\", y = \"cancel_percent\" , hue=\"Hotel\",\n            hue_order = [\"City Hotel\", \"Resort Hotel\"], data=full_cancel_data)\nplt.title(\"Cancelations per month\", fontsize=16)\nplt.xlabel(\"Month\", fontsize=16)\nplt.xticks(rotation=45)\nplt.ylabel(\"Cancelations [%]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.show()","a6d6ee15":"# Pivot table of relationship between special request and  cancellation booking status.","cd1286cb":"# How does the price per night vary over the year?","cc84d0c1":"**It has be seen that most of the groups are normal distributed, some of them have high skewness. Looking at the distribution, most people do not seem to prefer to stay at the hotel for more than 1 week. But it seems normal to stay in resort hotels for up to 12-13 days\nIt is obvious that when people go to resort hotels, they prefer to stay more.**","b96b3204":"# How many booking were cancelled?","fc18002c":"# Where do the guests come from?","e57f152f":"# Thanks to all ","8964261b":"**In this figure it shows the average price per room , depending on its type and the standard deviation.Note that due to data anonymization rooms with the same type letter may not necessarily be the same across hotels.**","7187b9c4":"# Distribution of Nights Spent at Hotels by Market Segment and Its Hotel Type","712e0a9c":"# Analysing Preference of Guests and What they basically Prefer?","5d196dc7":"**Below the pie graph shows the meal categories. There is a big difference in the Bed&Breakfast category and the others. Almost 80% of bookings reserved for Bed&Breakfast.**","71c26263":"# Bookings by market segment","061e0401":"# Which are the most busy month or in which months Guests are high?","46c6a05f":"# Price per night (ADR) and person based on booking and room","747ef0ba":"# Which month have the highest number of cancellations?","2799ed89":"**For the City hotel the relative number of cancelations is around 40 % throughout the year.For the Resort hotel it is highest in the summer and lowest during the winter.**","81349bb0":"**This graph clearly showing that the prices in the Resort hotel are much higher during the summer.The price of the city hotel varies less and is most expensive during spring and autumn.**","54cf01f0":"# Special request done by the customers","896067fc":"**Around 55% of bookings do not have any special requests.**","1c72c24a":"#  How much do guests pay for a room per night?","a593678a":"# Which are the most busy month?","3ee2ce88":"# How long people stay at the hotel?","c7f98180":" **City hotel and Resort hotel both have different room types and different types of meal arragements.Seasonal factors are also important.Since there have no information about currency.But Portugal is part of the European Union,for that reason i assume all prices in EUR.**"}}