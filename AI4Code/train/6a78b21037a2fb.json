{"cell_type":{"ad85352e":"code","da8b3fbc":"code","5e5886e8":"code","2a6c64fd":"code","6f55610e":"code","12cb7be0":"code","27942ea8":"code","7a4b2b7c":"code","53b5ae46":"code","223a9548":"code","9c78939c":"code","316cc8c8":"code","3c444063":"code","70879e72":"code","f22766c8":"code","0eb90caa":"code","383246d9":"code","a0b8394b":"code","ec5d8141":"code","db47d659":"markdown","1d83e7d1":"markdown","78791a90":"markdown","c84110bb":"markdown"},"source":{"ad85352e":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom contextlib import contextmanager\nfrom time import time\nfrom tqdm import tqdm\nimport lightgbm as lgbm\nimport category_encoders as ce\n\nfrom tensorflow.keras.utils import to_categorical\nfrom sklearn.metrics import classification_report, log_loss, accuracy_score\nfrom sklearn.metrics import mean_squared_error\nfrom sklearn.model_selection import KFold\n\n# Pandas Profiling to get the overview of the data\nimport pandas_profiling as pp\n# Seaborn for plot graphically depicting groups of numerical data through their quartiles\nimport seaborn as sns","da8b3fbc":"# Load data file - diabetes _ 012 _ health _ indicators _ BRFSS2015.csv\n# is a clean dataset of 253,680 survey responses to the CDC's BRFSS2015. \n# The target variable Diabetes_012 has 3 classes.\n#    0 is for no diabetes or only during pregnancy\n#    1 is for prediabetes\n#    2 is for diabetes\n# There is class imbalance in this dataset. This dataset has 21 feature variables\n# Info about original data collected by BRFSS - https:\/\/www.kaggle.com\/cdc\/behavioral-risk-factor-surveillance-system\n\ndata0 = pd.read_csv(\"..\/input\/diabetes-health-indicators-dataset\/diabetes_012_health_indicators_BRFSS2015.csv\")\ndata0","5e5886e8":"# The following is a QA check, showing that approximatly 2000 people hadn't had a cholesterol check in the past 5 years, \n# yet they indicats for a high cholesterol.\n#It shows they number of people who replied no for not being checked for cholesterol, still replied yes for \n#having high colesterol, which implies that the data is not completely reliable. ","2a6c64fd":"data0[(data0['CholCheck'] == 0.0) & (data0['HighChol'] != 0.0)]","6f55610e":"# Comparing non-smokers to smokers in each diabetic status, normalized ","12cb7be0":"#group diabetes status & Smokers\ndiabetes_Smokers = data0.groupby(['Diabetes_012', 'Smoker']).size().reset_index(name = 'Count')\nprint(diabetes_Smokers)","27942ea8":"Total_Stat = diabetes_Smokers.groupby(['Diabetes_012']).sum().Count\nTotal_Stat","7a4b2b7c":"Temp = diabetes_Smokers.set_index('Diabetes_012').join(Total_Stat,rsuffix='_')\nTemp['Percentage'] = Temp['Count']\/Temp['Count_']\nTemp = Temp.reset_index()\nTemp","53b5ae46":"Temp['Diabetes_012'] = Temp['Diabetes_012'].replace({0.0:'Healthy', 1.0:'Pre-diabetic', 2.0:'Diabetic'})\nTemp['Smoker'] = Temp['Smoker'].replace({0.0:'Non-Smoker', 1.0:'Smoker'})","223a9548":"#visualize diabetes status ~ Smokers\nplt.figure(figsize = (8,6))\nsns.barplot(x = 'Diabetes_012', y = 'Percentage', hue = 'Smoker', data = Temp, palette = 'Set2')\nplt.title(\"Diabetes Status ~ Smokers\")\nplt.show()","9c78939c":"# Comparing non-smokers to smokers in each diabetic status, normalized shows for no significant difference in-between\n# the different diabetic groups, thus the Smoking indicator doesn't provide business insight to this questionnaire","316cc8c8":"#Comparing normalized data divided by the 3 diabetes statuses: health, pre diabetes and diabetes, \n#where mental health indicator is regrouped according to the number of days the person felt any mental health disorder\n#between 0-5 days: Not so sad, 6-24: sad, 25-30: very sad","3c444063":"diabetes_Mental_temp = data0['MentHlth']\ndata0.loc[diabetes_Mental_temp < 6,'MentHlth_group'] = '0-5'\ndata0.loc[((diabetes_Mental_temp >= 6) & (diabetes_Mental_temp <= 24)),'MentHlth_group'] = '6-24'\ndata0.loc[((diabetes_Mental_temp > 24) & (diabetes_Mental_temp <= 30)),'MentHlth_group'] = '25-30'\ndata0","70879e72":"#group diabetes status & Mental Health\ndiabetes_Mental = data0.groupby(['Diabetes_012', 'MentHlth_group']).size().reset_index(name = 'Count')\nprint(diabetes_Mental)\n\n# Check the missing values in the dataset\ndata0.isnull().values.any()","f22766c8":"#calculating percentage\nTotal_Stat_Mnth = diabetes_Mental.groupby(['Diabetes_012']).sum()\nTotal_Stat_Mnth\n# Total_Stat_Mnth.set_index('Diabetes_012')\n# diabetes_Mental.append(Count)","0eb90caa":"Temp1 = diabetes_Mental.set_index('Diabetes_012').join(Total_Stat_Mnth,rsuffix='_')\nTemp1['Percentage'] = Temp1['Count']\/Temp1['Count_']\nTemp1\nTemp1 = Temp1.reset_index()","383246d9":"Temp1['Diabetes_012'] = Temp1['Diabetes_012'].replace({0.0:'Healthy', 1.0:'Pre-diabetic', 2.0:'Diabetic'})\nTemp1['MentHlth_group'] = Temp1['MentHlth_group'].replace({'0-5':'Not so sad','6-24':'Sad','25-30':'Very sad'})","a0b8394b":"#visualize diabetes status ~ Smokers\nplt.figure(figsize = (8,6))\nsns.barplot(x = 'Diabetes_012', y = 'Percentage', hue = 'MentHlth_group', data = Temp1, palette = 'Set3')\nplt.title(\"Diabetes Status ~ Mental Health\")\nplt.show()","ec5d8141":"#The graph shows that there is a similar distribution of mental health severity across diabetes specctrum, thus\n#mental health does not provide an added value in terms of clinical situation","db47d659":"# RDA - Data preparation ","1d83e7d1":"# Diabetes Status & Mental Health","78791a90":"#  Data QA: Cholesterol check:","c84110bb":"#  Smokers vs. Diabetes"}}