{"cell_type":{"f4260004":"code","adf337f4":"code","ff724e7e":"code","31001a59":"code","f19ee81d":"code","0bb5f22f":"code","8aec4f1a":"code","1fc1d252":"code","68e30b44":"code","ac8e80d4":"code","624f4692":"code","22d9c249":"code","55fec942":"code","71b47782":"code","e7970361":"code","91172be1":"code","f835ad02":"code","f064e819":"code","30bdb0d0":"code","414fa9bc":"code","b198c221":"code","6581e91c":"code","a9f474f6":"code","d86b87ad":"code","3a9615fd":"code","8e7228e4":"code","5924562e":"code","c12505ff":"code","6f988330":"code","f8eaaf11":"code","b5482680":"code","643b5181":"code","595fbb98":"code","5eb5e563":"code","e562de4b":"code","7b552a7d":"code","ab4525dd":"code","e22cd6e7":"code","c939731f":"code","fd324d2e":"code","8a6f812f":"code","d5abae48":"markdown","2e22855b":"markdown","0be266fd":"markdown","21e847d3":"markdown","10560f77":"markdown","a6f481f2":"markdown","2996ad30":"markdown","26bd8203":"markdown","b3dd898f":"markdown","daaba582":"markdown","8b216f3a":"markdown","fe603b27":"markdown","4531125b":"markdown","5abebeaf":"markdown","4a9575ce":"markdown","3f2d0df3":"markdown","c4fe5091":"markdown"},"source":{"f4260004":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\n%matplotlib inline\nwarnings.filterwarnings('ignore')\npd.pandas.set_option('display.max_columns', None)","adf337f4":"data = pd.read_csv('..\/input\/states_all_extended.csv')","ff724e7e":"data.head()","31001a59":"data.shape","f19ee81d":"data.describe()","0bb5f22f":"vars_with_na = [var for var in data.columns if data[var].isnull().sum()>1]\nprint(len(vars_with_na))","8aec4f1a":"vars_with_na","1fc1d252":"dict_missing = { var: np.round(data[var].isnull().mean()*100, 3) for var in vars_with_na}","68e30b44":"dict_missing","ac8e80d4":"import collections\nsorted_dict = sorted(dict_missing.items(), key=lambda kv: kv[1], reverse=True)","624f4692":"sorted_dict","22d9c249":"# create a dataframe of missing values\nmissings_df = pd.DataFrame.from_dict(sorted_dict)\nmissings_df.columns = ['columns', 'Percent missing']\nmissings_df.head()","55fec942":"missings_df.shape","71b47782":"d = missings_df.iloc[:50]","e7970361":"d","91172be1":"d = missings_df.iloc[:50]\nplt.figure(figsize = [20, 10]);\ng = sns.barplot(x=\"columns\", y=\"Percent missing\", data=d)\ng.set_xticklabels(g.get_xticklabels(), rotation=90);","f835ad02":"revenues = data[['YEAR','STATE','TOTAL_REVENUE', 'FEDERAL_REVENUE', 'STATE_REVENUE', 'LOCAL_REVENUE']]","f064e819":"revenues","30bdb0d0":"revenues_millions = revenues[['TOTAL_REVENUE', 'FEDERAL_REVENUE', 'STATE_REVENUE', 'LOCAL_REVENUE']]\/1000000","414fa9bc":"revenues_millions","b198c221":"# Create a figure and axes\nfig, ax = plt.subplots(2, 2, figsize=(20, 10))\n\n# plot the total revenue\nax[0, 0].hist(revenues_millions.TOTAL_REVENUE.dropna(), bins=50)\nax[0, 0].set_title('Total revenue in Millions')\nax[0, 0].set_xlabel('Revenue in Millions')\nax[0, 0].set_ylabel('Count')\n\n# plot the federal revenue\nax[0, 1].hist(revenues_millions.FEDERAL_REVENUE.dropna(), bins=50)\nax[0, 1].set_title('Federal revenue in Millions')\nax[0, 1].set_xlabel('Revenue in Millions')\nax[0, 1].set_ylabel('Count')\n\n# plot the state revenue\nax[1, 0].hist(revenues_millions.STATE_REVENUE.dropna(), bins=50)\nax[1, 0].set_title('State revenue in Millions')\nax[1, 0].set_xlabel('Revenue in Millions')\nax[1, 0].set_ylabel('Count')\n\n# plot the local revenue\nax[1, 1].hist(revenues_millions.LOCAL_REVENUE.dropna(), bins=50)\nax[1, 1].set_title('Local revenue in Millions')\nax[1, 1].set_xlabel('Revenue in Millions')\nax[1, 1].set_ylabel('Count')\n","6581e91c":"base_color = sns.color_palette()[2]\nplt.figure(figsize = [10, 10])\nplt.title('Revenue in Millions')\ndfm = revenues_millions.melt(var_name='columns')\nsns.violinplot(data = dfm, y='columns', x='value', color=base_color, inner = 'quartile')","a9f474f6":"base_color = sns.color_palette()[3]\nplt.figure(figsize = [10, 10])\nplt.title('Revenue in Millions')\ndfm = revenues_millions.melt(var_name='columns')\nsns.boxplot(data = dfm, y='columns', x='value', color=base_color)","d86b87ad":"dfm = pd.melt(revenues, id_vars =['YEAR'], value_vars =['TOTAL_REVENUE', 'FEDERAL_REVENUE', 'STATE_REVENUE', 'LOCAL_REVENUE'])\ndfm.columns = ['Year', 'Revenue_type', 'Dollar_Amount']\ndfm.head()\ndfm.Dollar_Amount = dfm.Dollar_Amount\/1000000\ndfm.head()\n","3a9615fd":"plt.figure(figsize = [20, 10])\nplt.title('Revenue in millions')\nsns.lineplot(x='Year', y='Dollar_Amount', hue='Revenue_type' , data=dfm, ci=None)","8e7228e4":"plt.figure(figsize = [20, 10])\nplt.title('Average total revenue in Millions')\n(revenues.groupby('YEAR')['TOTAL_REVENUE'].mean()\/1000000).plot.bar()","5924562e":"total_rev = pd.concat([revenues['TOTAL_REVENUE']\/1000000, revenues['YEAR']], axis=1)\nf, ax = plt.subplots(figsize=(20, 10))\nfig = sns.boxplot(x='YEAR', y=\"TOTAL_REVENUE\", data=total_rev)\nplt.ylabel('Total revenue in millions')\nplt.title('Annual total revenue')","c12505ff":"plt.figure(figsize = [20, 10])\nplt.title('Average federal revenue in Millions')\n(revenues.groupby('YEAR')['FEDERAL_REVENUE'].mean()\/1000000).plot.bar()","6f988330":"total_rev = pd.concat([revenues['FEDERAL_REVENUE']\/1000000, revenues['YEAR']], axis=1)\nf, ax = plt.subplots(figsize=(20, 10))\nfig = sns.boxplot(x='YEAR', y=\"FEDERAL_REVENUE\", data=total_rev)\nplt.xlabel('Federal revenue in millions')\nplt.title('Annual Federal revenue')","f8eaaf11":"plt.figure(figsize = [20, 10])\nplt.title('Average state revenue in Millions')\n(revenues.groupby('YEAR')['STATE_REVENUE'].mean()\/1000000).plot.bar()","b5482680":"total_rev = pd.concat([revenues['STATE_REVENUE']\/1000000, revenues['YEAR']], axis=1)\nf, ax = plt.subplots(figsize=(20, 10))\nfig = sns.boxplot(x='YEAR', y=\"STATE_REVENUE\", data=total_rev)\nplt.xlabel('State revenue in millions')\nplt.title('Annual State revenue')","643b5181":"plt.figure(figsize = [20, 10])\nplt.title('Average local revenue in Millions')\n(revenues.groupby('YEAR')['LOCAL_REVENUE'].mean()\/1000000).plot.bar()\n","595fbb98":"total_rev = pd.concat([revenues['LOCAL_REVENUE']\/1000000, revenues['YEAR']], axis=1)\nf, ax = plt.subplots(figsize=(20, 10))\nfig = sns.boxplot(x='YEAR', y=\"LOCAL_REVENUE\", data=total_rev)\nplt.xlabel('Local revenue in millions')\nplt.title('Annual Local revenue')","5eb5e563":"rev_data = revenues.groupby('STATE')['TOTAL_REVENUE'].mean()\/1000\nrev_data = rev_data.reset_index()\nrev_data = rev_data.sort_values('TOTAL_REVENUE', ascending=False)\nrev_data.plot.barh(x='STATE', y='TOTAL_REVENUE', figsize=(10, 25))\nplt.xlabel('Average Total revenue in thousands')","e562de4b":"total_rev = pd.concat([revenues['TOTAL_REVENUE']\/1000000, revenues['STATE']], axis=1)\nf, ax = plt.subplots(figsize=(10, 25))\nfig = sns.boxplot(y='STATE', x=\"TOTAL_REVENUE\", data=total_rev)\nplt.xlabel('Total revenue in millions')\nplt.title('Annual total revenue')","7b552a7d":"rev_data = revenues.groupby('STATE')['FEDERAL_REVENUE'].mean()\/1000\nrev_data = rev_data.reset_index()\nrev_data = rev_data.sort_values('FEDERAL_REVENUE', ascending=False)\nrev_data.plot.barh(x='STATE', y='FEDERAL_REVENUE', figsize=(10, 25))\nplt.xlabel('Average federal revenue in thousands')","ab4525dd":"total_rev = pd.concat([revenues['FEDERAL_REVENUE']\/1000000, revenues['STATE']], axis=1)\nf, ax = plt.subplots(figsize=(10, 25))\nfig = sns.boxplot(y='STATE', x=\"FEDERAL_REVENUE\", data=total_rev)\nplt.xlabel('Federal revenue in millions')\nplt.title('Annual Federal revenue')","e22cd6e7":"rev_data = revenues.groupby('STATE')['STATE_REVENUE'].mean()\/1000\nrev_data = rev_data.reset_index()\nrev_data = rev_data.sort_values('STATE_REVENUE', ascending=False)\nrev_data.plot.barh(x='STATE', y='STATE_REVENUE', figsize=(10, 25))\nplt.xlabel('Average state revenue in thousands')","c939731f":"total_rev = pd.concat([revenues['STATE_REVENUE']\/1000000, revenues['STATE']], axis=1)\nf, ax = plt.subplots(figsize=(10, 25))\nfig = sns.boxplot(y='STATE', x=\"STATE_REVENUE\", data=total_rev)\nplt.xlabel('State revenue in millions')\nplt.title('Annual State revenue')","fd324d2e":"rev_data = revenues.groupby('STATE')['LOCAL_REVENUE'].mean()\/1000\nrev_data = rev_data.reset_index()\nrev_data = rev_data.sort_values('LOCAL_REVENUE', ascending=False)\nrev_data.plot.barh(x='STATE', y='LOCAL_REVENUE', figsize=(10, 25))\nplt.xlabel('Average local revenue in thousands')","8a6f812f":"total_rev = pd.concat([revenues['LOCAL_REVENUE']\/1000000, revenues['STATE']], axis=1)\nf, ax = plt.subplots(figsize=(10, 25))\nfig = sns.boxplot(y='STATE', x=\"LOCAL_REVENUE\", data=total_rev)\nplt.xlabel('Local revenue in millions')\nplt.title('Annual State revenue')","d5abae48":"This is a work in progress, I will update this notebook with more interesting insights.","2e22855b":"We have 190 variables with missing values","0be266fd":"### Local Revenue","21e847d3":"# Exploratory Data Analysis","10560f77":"## Missing values","a6f481f2":"### Federal Revenue","2996ad30":"## Revenues - state, local, federal","26bd8203":"### Local Revenue","b3dd898f":"### State revenue","daaba582":"### State revenue","8b216f3a":"## Revenue by states","fe603b27":"The figures above shows that the school receive most of its revenue from the state and local revenue","4531125b":"### Total Revenue","5abebeaf":"### Federal revenue","4a9575ce":"## Revenue over the years","3f2d0df3":"### Total Revenue","c4fe5091":"The average yearly total revenue increase over the year. Apparently the schools receive more money from the federal government in years 2010 and 2011."}}