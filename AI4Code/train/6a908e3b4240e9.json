{"cell_type":{"73d3925e":"code","dc6687f4":"code","75ec0c9e":"code","bee4221c":"code","8714d061":"code","f7f9a789":"code","05151e3f":"code","c25ef4dd":"code","fc377057":"code","db890c48":"code","e764192a":"code","aade1b43":"code","7246e7b1":"code","1897cbdd":"code","aed66f7c":"code","ab0d60e5":"code","39c9d696":"code","df5a7aaa":"code","f6b46a7d":"code","9f2f005d":"code","e524a417":"code","142855e6":"code","76b21791":"code","e4cb7aa7":"markdown","a29b8767":"markdown","d9136e88":"markdown","48fb354f":"markdown","2502ac6b":"markdown","6004dda6":"markdown","efdc7ffb":"markdown","d0b79738":"markdown","3d31d308":"markdown","f37ec869":"markdown","09b90170":"markdown","6fdccd6d":"markdown"},"source":{"73d3925e":"#Load required packages\nimport numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","dc6687f4":"#Read 2021 Paralympic Games datafiles \nathletes_path = '\/kaggle\/input\/2021-paralympic-games-in-tokyo\/Athletes.csv'\nmedals_path = '\/kaggle\/input\/2021-paralympic-games-in-tokyo\/Medals.csv'\ngender_path = '\/kaggle\/input\/2021-paralympic-games-in-tokyo\/GenderByDiscipline.csv'\nmedallists_path = '\/kaggle\/input\/2021-paralympic-games-in-tokyo\/Medallists.csv'\ncoaches_path = '\/kaggle\/input\/2021-paralympic-games-in-tokyo\/Coaches.csv'\n\nathletes_data = pd.read_csv(athletes_path)\nmedals_data = pd.read_csv(medals_path)\ngender_data = pd.read_csv(gender_path)\nmedallists_data = pd.read_csv(medallists_path)\ncoaches_data = pd.read_csv(coaches_path)","75ec0c9e":"#Brief summary of athletes data\nprint(athletes_data.head())\nathletes_data.describe()","bee4221c":"athletes_data['NPC'] = athletes_data['NPC'].str.replace(r\"'\", r'', regex=True)","8714d061":"#Group athletes by country name and its abbreviation. Record top-10 countries.   \nathletes_by_country = athletes_data.groupby(['NPCCode', 'NPC']).size().sort_values(ascending=False)\nathletes_by_country_top = athletes_by_country.head(10) \nathletes_by_country_top","f7f9a789":"#Record country names and abbreviations for vizualization purposes\ntop_abbr = athletes_by_country_top.index.get_level_values(0)\ntop_names = athletes_by_country_top.index.get_level_values(1)\n\n#Load necessary packages\nimport matplotlib.image as mpimg\nfrom matplotlib.offsetbox import OffsetImage, AnnotationBbox\n\n#Define function that adds coutry flags to the labes of barplot\ndef offset_image(y_coord, country_name, ax):\n    img_path = f'..\/input\/olympicflags\/{country_name}.png'\n    img = mpimg.imread(img_path)\n    im = OffsetImage(img, zoom=0.09)\n    im.image.axes = ax\n    ab = AnnotationBbox(im, (0, y_coord), xybox=(-65, 0), frameon=False,\n                        boxcoords='offset points')\n    ax.add_artist(ab)    \n\n#Visualize data\nfs = 16\n\nfig, ax = plt.subplots(figsize = (11,7))\nax.set_title('Fig. 1. Most represented countries.', fontsize=fs)\n\nsns.barplot(ax = ax, x = athletes_by_country_top.values, \n            y = top_abbr, palette='bright')\n\nax.set_xlabel('Number of participating athletes', fontsize=fs)\nax.set_ylabel('')\n\nax.set_yticks(range(len(top_abbr)))\nax.set_yticklabels(top_abbr)\n\nfor patch in ax.patches:\n    width = patch.get_width()\n    ax.text(7 + width, patch.get_y() + 0.55 * patch.get_height(),\n            '{:1.0f}'.format(width), ha='center', va='center')\n    \nfor i, name in enumerate(top_names):\n    offset_image(i, name, ax)","05151e3f":"#Group athletes by discipline \nathletes_by_discipline = athletes_data.groupby(['Discipline']).size().sort_values(ascending=False)\nathletes_by_discipline","c25ef4dd":"#Visualize data\n\nfig, ax = plt.subplots(figsize=(16, 10))\nax.set_title('Fig. 2. Number of participants per discipline.', fontsize=fs)\n\nmy_colors = ['#a6cee3','#1f78b4','#b2df8a','#33a02c','#fb9a99','#e31a1c',\n             '#fdbf6f','#ff7f00','#cab2d6','#6a3d9a','#ffff99','#b15928']\n\nplt.pie(x=athletes_by_discipline, autopct=\"%.1f%%\", \n        explode=[0.07] * len(athletes_by_discipline.keys()), \n        labels=athletes_by_discipline.keys(), colors=my_colors,\n        pctdistance=0.85,textprops={'fontsize': 12});\n","fc377057":"#Brief summary of gender data\nprint(gender_data.head())\ngender_data.describe()","db890c48":"#Supplemental series and parameters for visualization purposes\nlabels = gender_data.Discipline\nmen = gender_data.M\nwomen = gender_data.F\nwidth = 0.42\n\n#Label locators\nlab_loc = np.arange(len(labels))\n\n#Visualize gender by discipline data\nfig, ax = plt.subplots(figsize = (12, 8))\n\nrects1 = ax.bar(lab_loc - width\/2, men, width, label='Men', color='g')\nrects2 = ax.bar(lab_loc + width\/2, women, width, label='Women', color='r')\n\n#Add some text for labels, title and custom x-axis tick labels, etc.\nax.set_xlabel('Discipline', fontsize=fs)\nax.set_ylabel('Number of participants', fontsize=fs)\nax.set_title('Fig. 3. Gender representation by discipline.', fontsize=fs)\nax.set_xticks(lab_loc)\nax.set_xticklabels(labels, rotation=90, fontsize=fs)\nax.legend(fontsize=fs)\n\nax.bar_label(rects1, padding=3)\nax.bar_label(rects2, padding=3)\n\nfig.tight_layout()\n\nplt.show()","e764192a":"#Visualize overall gender representation\nwomen_total = gender_data.F.sum()\nmen_total = gender_data.M.sum()\n\nlabels = ['Men', 'Women']\nsizes = [men_total, women_total]\n\nfig, ax = plt.subplots(figsize=(12,6))\nax.set_title('Fig. 4. Overall gender representation.', fontsize=fs)\n\nax.pie(sizes, labels=labels, autopct='%1.1f%%', \n       startangle=270, textprops={'fontsize': fs})\n\n#Equal aspect ratio ensures that pie is drawn as a circle.\nax.axis('equal')  \nplt.show()","aade1b43":"#Brief summary of coaches data\nprint(coaches_data.head())\ncoaches_data.describe()","7246e7b1":"#Group coaches by discipline \ncoaches_by_discipline = coaches_data.groupby(['Discipline']).size().sort_values(ascending=False)","1897cbdd":"#Visualize coaches data\nfig, ax = plt.subplots(figsize=(12,8))\n\nax.set_title('Fig. 5. Coaches per paralympic discipline', fontsize=fs)\nplt.pie(x=coaches_by_discipline, autopct=\"%.1f%%\", \n        explode=[0.05] * len(coaches_by_discipline.keys()), \n        labels=coaches_by_discipline.keys(), \n        pctdistance=0.75, textprops={'fontsize': 14})\n\n#Equal aspect ratio ensures that pie is drawn as a circle.\nax.axis('equal')  \nplt.show()","aed66f7c":"#Brief summary of medallists data\nmedallists_data.head()","ab0d60e5":"#Group medal winners by discipline and count total number of medals\nmedals_by_discipline = medallists_data.groupby(['Sport'])['Total'].agg('sum').sort_values(ascending=False) #.size().sort_values(ascending=False)\n\n#Determine number of medal sets awarded in a particular discipline\nmedal_sets_by_discipline = round(medals_by_discipline \/ 3) \nmedal_sets_by_discipline","39c9d696":"#Visualize medal sets percentage representation by discipline\n\nfig, ax = plt.subplots(figsize=(14, 10))\n\nax.set_title('Fig. 6. Medal sets awarded by discipline.', fontsize=fs)\n\nplt.pie(x=medal_sets_by_discipline, autopct=\"%.1f%%\", \n        explode=[0.04]*len(medal_sets_by_discipline.keys()), \n        labels=medal_sets_by_discipline.keys(), colors=my_colors,\n        pctdistance=0.9, textprops={'fontsize': 14});\n\n#Equal aspect ratio ensures that pie is drawn as a circle.\nax.axis('equal')  \nplt.show()","df5a7aaa":"#Remove apostrophes from medals data NPC names and index data by NPC \nmedals_data['Team\/NPC'] = medals_data['Team\/NPC'].str.replace(r\"'\",r'',regex=True)\nmedals_data.set_index('Team\/NPC', inplace=True)\nmedals_data.head()","f6b46a7d":"#Group athletes by country\nathletes_num = athletes_data.groupby(['NPC']).size().sort_values(ascending=False)\nathletes_num.head()","9f2f005d":"#Merge two tables, include number of athletes and determine medal efficiency\nmedals_data_ext = medals_data.merge(athletes_num.to_frame(), right_index=True, \n                                    left_index=True)\nmedals_data_ext.rename(columns={0: 'Athletes'},inplace=True)\nmedals_data_ext = medals_data_ext.assign(Efficiency=medals_data_ext['Total']\/medals_data_ext['Athletes'])\nmedals_data_ext.head(10)","e524a417":"#Visualize the results\nfig, ax = plt.subplots(figsize=(12, 8))\n\nax.scatter(x=medals_data_ext['Athletes'], y=medals_data_ext['Total'], \n           alpha=0.3,  s=400*medals_data_ext['Efficiency'])\n\nax.set_xlabel('Number of participating athletes', fontsize=fs)\nax.set_ylabel('Total number of medals', fontsize=fs)\nax.set_title('Fig. 7. Medal count vs number of participants.', fontsize=fs)\n\nfor i, txt in enumerate(medals_data_ext.head(10).index):\n    ax.annotate(txt, (medals_data_ext['Athletes'][i]-8, medals_data_ext['Total'][i]-12), \n                fontsize=14)\n    \nax.legend()\nax.grid(True)\n\nplt.show()","142855e6":"#Brief summary of top-5 medal winning countries\nmedals_top = medals_data.sort_values(by='Total',ascending=False).head()\nmedals_top","76b21791":"from matplotlib.offsetbox import OffsetImage, AnnotationBbox\n\n#Supplemental lists for the data visualization purposes\nbar_coord_x = [1.7, 2.5, 3.6, 4.8, 5.7]\nbar_coord_y = [2, 4, 6, 5, 3]\nbar_width = [0.6, 0.8, 1.2, 1.0, 0.6]\n\nrank_text_num = ['5', '3', '1', '2', '4']\nrank_text_char = ['th', 'rd', 'st', 'nd', 'th']\nrank_coord_x_num = [1.68, 2.4, 3.45, 4.65, 5.7]\nrank_coord_x_char = [1.75, 2.6, 3.7, 4.9, 5.78]\nrank_coord_y_char = [2.05,4.05,6.05,5.05,3.05]\n\nalpha = [0.3, 0.6, 1, 0.8, 0.3]\nzoom = [0.34, 0.15, 0.85, 0.7, 0.42]\nimg_y= [1.4, 3.2, 4.8, 4.1, 2.4]\n\nmy_colors = ['#D0D9C3','#D4A492','#E0B30E','#8D918A','#D0D9C3']\nfontsize= [40, 75, 95, 85, 40]\n\n#Arrange countries for visualization purposes\ncountries = ['Ukraine', 'RPC', 'Peoples Republic of China',\n             'Great Britain', 'United States of America']\nabbr = ['UKR', 'RPC', 'CHN', 'GBR', 'USA']\nabbr_loc = [0.5, 1.8, 3, 2.5, 1.5]\n\n#Define function that adds coutry flags to the labes of barplot\ndef make_img(img, zoom, x, y):\n    img = mpimg.imread(img)\n    imagebox = OffsetImage(img, zoom=zoom)\n    ab = AnnotationBbox(imagebox, (x,y), frameon=False)\n    ax.add_artist(ab)\n\n#Visualize top-5 medal winners\nfig, ax = plt.subplots(figsize=(22,13));\n\nfor i in range(5):\n    plt.bar(x=bar_coord_x[i], height=bar_coord_y[i],\n            width=bar_width[i], color=my_colors[i])\n    make_img(f'..\/input\/olympicflags\/{countries[i]}.png', \n             zoom[i], bar_coord_x[i], img_y[i])\n    plt.text(s=abbr[i], x=bar_coord_x[i], y=abbr_loc[i], \n             va='bottom', ha='center', \n             fontsize=fontsize[i], alpha=alpha[i])\n    plt.text(s=rank_text_num[i], x=rank_coord_x_num[i], \n             y=bar_coord_y[i], va='bottom', ha='center', \n             fontsize=fontsize[i])\n    plt.text(s=rank_text_char[i], x=rank_coord_x_char[i], \n             y=rank_coord_y_char[i], va='bottom', ha='center', \n             fontsize=fontsize[i]-25);\n    \nplt.axis('off')\nplt.show()","e4cb7aa7":"The <span style=\"color:FireBrick;\">'NPC'<\/span> contains athelte's country of residence. Some contries have apostrophes in their names, while coutry names in the `Olympic Flags` dataset, which we will use for the data visualization purposes, do not includes apostrophes. To make everything consistent, we remove apostrophes from the athletes_data table.","a29b8767":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-GenderByDisc style=\"color:white\"> \n    4. Gender representation by discipline\n<\/a>\n<\/h2>\n<\/div>","d9136e88":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-MedalsByDisc style=\"color:white\"> \n    6. Medal sets awarded by discipline\n<\/a>\n<\/h2>\n<\/div>","48fb354f":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:blue;\n              font-size:110%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h1 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n2021 Paralympic Games EDA\n<\/h1>\n<\/div>\n\n<img src=\"https:\/\/cdn.pixabay.com\/photo\/2016\/05\/25\/14\/26\/bike-1414987_960_720.jpg\" width=\"1200\"\/>","2502ac6b":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-AthletesByDisc style=\"color:white\"> \n    3. Athletes by discipline\n<\/a>\n<\/h2>\n<\/div>","6004dda6":"Table of contents  \n=\n\n1. <a href='#Link-SecIntro'>Introduction and data preparation<\/a>  \n2. <a href='#Link-ParticipantsNum'>Number of participants by country<\/a>  \n3. <a href='#Link-AthletesByDisc'>Athletes by discipline<\/a>   \n4. <a href='#Link-GenderByDisc'>Gender representation by discipline<\/a>\n5. <a href='#Link-CoachesByDisc'>Number of coaches by discipline<\/a>\n6. <a href='#Link-MedalsByDisc'>Medal sets awarded by discipline<\/a>\n7. <a href='#Link-MedalsVsAthletes'>Medal count vs numer of participating athletes<\/a>\n8. <a href='#Link-Top5'>Top-5 medal winning countries<\/a>  \n","efdc7ffb":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-SecIntro style=\"color:white\"> \n    1. Introduction and data preparation\n<\/a>\n<\/h2>\n<\/div>","d0b79738":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-MedalsVsAthletes style=\"color:white\"> \n    7. Medal count vs numer of participating athletes\n<\/a>\n<\/h2>\n<\/div>","3d31d308":"In this notebook we perform an Exploratory Data Analysis (EDA) the 2021 (2020) Summer Paralympic Games in Tokyo, Japan that took place between 24 August and 5 September 2021. The considered datasets contain details of over `4400 athletes`, `their coaches`, `23 paralympic disciplines`, and the `overall medal count`. \n\n\ud83d\ude00 !!!Any feedback and suggestions are greatly appreciated!!! \ud83d\ude00","f37ec869":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-Top5 style=\"color:white\"> \n    8. Top-5 medal winning countries\n<\/a>\n<\/h2>\n<\/div>","09b90170":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-CoachesByDisc style=\"color:white\"> \n    5. Number of coaches by discipline\n<\/a>\n<\/h2>\n<\/div>","6fdccd6d":"<div style = \"color:white; \n              display:fill;\n              border-radius:5px;\n              background-color:MediumSlateBlue ;\n              font-size:100%;\n              font-family:Verdana;\n              letter-spacing:0.5px\">\n<h2 style = \"text-align: center;\n             padding: 10px;\n             color:white\">\n<a id=Link-ParticipantsNum style=\"color:white\"> \n    2. Number of participants by country\n<\/a>\n<\/h2>\n<\/div>"}}