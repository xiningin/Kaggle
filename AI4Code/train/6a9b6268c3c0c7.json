{"cell_type":{"76d23d01":"code","fccbfdab":"code","6e93d1cf":"code","43c20362":"code","aebfd365":"code","0c8f8301":"code","f4b1947b":"code","187d956a":"code","aa268e4d":"code","b5e92bc7":"code","e77052bd":"code","9130dec7":"code","bf12d173":"code","05ac8e25":"code","cbfa2a35":"code","de350527":"code","dca44847":"code","c80172f5":"code","ab88f471":"code","453c6baf":"code","5fab2f03":"code","713de5a0":"code","64ff1488":"code","cd757c97":"code","bcdd8a3d":"code","0e0827aa":"code","b1af485e":"code","fb20bc61":"code","d7247454":"code","26ebbea4":"code","88748bbc":"code","510bfb6a":"code","76e93761":"code","efcbc365":"code","569c8f2f":"code","f116c297":"code","2287a8c9":"code","75fa17ac":"code","ee3142e8":"code","5fa55183":"code","35daaabf":"markdown"},"source":{"76d23d01":"import pandas as pd\nwater= pd.read_csv(\"..\/input\/nyc-beach-water-quality-data\/dohmh-beach-water-quality-data-1.csv\")\nwater.head(9)","fccbfdab":"water['Sample Location'].value_counts()","6e93d1cf":"water['Sample Location']= water['Sample Location'].replace('Rigth','Right')\nround(water['Sample Location']. value_counts()*100\/len(water),2)","43c20362":"water.nunique()","aebfd365":"water.info()","0c8f8301":"water['Sample Date']=pd.to_datetime(water['Sample Date'])\nwater.info()","f4b1947b":"water.isnull().sum()*100\/len(water)","187d956a":"missing=water[water.isna().any(axis=1)]\nmissing.head()","aa268e4d":"missing.isnull().sum()*100\/len(missing)","b5e92bc7":"missing.nunique()","e77052bd":"missing['Units or Notes'].value_counts()*100\/len(missing)","9130dec7":"water[water['Units or Notes']=='Result below detection limit'].head()","bf12d173":"water[water['Units or Notes']=='Result below detection limit'].info()","05ac8e25":"water[water['Units or Notes']!='Result below detection limit'].head()","cbfa2a35":"water[water['Units or Notes']!='Result below detection limit'].info()","de350527":"water['Enterococci Results']=water['Enterococci Results'].fillna(0)\nwater.isnull().sum()*100\/len(missing)","dca44847":"water=water.dropna()\nwater.info()","c80172f5":"water.nunique()","ab88f471":"water.head()","453c6baf":"water=water.drop(['Units or Notes'],axis=1)\nwater.head()","5fab2f03":"#paper : https:\/\/www.environment.nsw.gov.au\/-\/media\/OEH\/Corporate-Site\/Documents\/Water\/Beaches\/state-of-beaches-2019-2020-statewide-summary-200302.pdf\nwater.loc[water['Enterococci Results'] <= 50, 'Category'] = 'open'\nwater.loc[water['Enterococci Results'] >500, 'Category'] = 'closed'\nwater.loc[(water['Enterococci Results'] >50) & (water['Enterococci Results'] <=500), 'Category'] = 'advisory'\nround(water['Category'].value_counts()*100\/len(water))","713de5a0":"water.rename(columns = {'Enterococci Results':'Enterococci Results (MPN\/100 ml)'}, inplace = True)\nwater.head()","64ff1488":"!pip install pandas-profiling","cd757c97":"from pandas_profiling import ProfileReport\nProfileReport(water, title=\"EDA Report\")","bcdd8a3d":"!pip install pycaret","0e0827aa":"data = water.sample(frac=0.8, random_state=42)\ndata_unseen = water.drop(data.index)\ndata.reset_index(inplace=True, drop=True)\ndata_unseen.reset_index(inplace=True, drop=True)\nprint('Data for Modeling: ' + str(data.shape))","b1af485e":"print('Unseen Data For Predictions: ' + str(data_unseen.shape))","fb20bc61":"from pycaret.classification import *","d7247454":"water= setup(data = data, target = 'Category', session_id=42,\n                  normalize = True, \n                  transformation = True, \n                  log_experiment = True,\n                  handle_unknown_categorical = True, \n                  unknown_categorical_method = 'most_frequent',\n                  remove_multicollinearity = True, #drop one of the two features that are highly correlated with each other\n                  ignore_low_variance = True,#all categorical features with statistically insignificant variances are removed from the dataset.\n                  combine_rare_levels = True,# all levels in categorical features below the threshold defined in rare_level_threshold param are combined together as a single level\n                  numeric_imputation='median',\n           ignore_features=['Sample ID'],\n            date_features=['Sample Date'],\n             high_cardinality_features =['Beach Name'],           \n           fix_imbalance = True,\n            train_size = 0.8\n          )","26ebbea4":"dt = create_model('dt')","88748bbc":"print(dt)","510bfb6a":"tuned_dt = tune_model(dt,optimize = 'Accuracy')","76e93761":"plot_model(tuned_dt, plot = 'auc')","efcbc365":"plot_model(tuned_dt, plot = 'pr')","569c8f2f":"plot_model(tuned_dt, plot='feature')","f116c297":"plot_model(tuned_dt, plot = 'confusion_matrix')","2287a8c9":"evaluate_model(tuned_dt)","75fa17ac":"predict_model(tuned_dt)","ee3142e8":"unseen_predictions = predict_model(tuned_dt, data=data_unseen)\nunseen_predictions.head()","5fa55183":"print(\"Confidence Score :   {}\".format(round(unseen_predictions.Score.mean(),2)))#Confidence Score","35daaabf":"# Sample Location"}}