{"cell_type":{"76bf9e72":"code","aa4be5b8":"code","b6308984":"code","cec2be5c":"code","f372750f":"markdown","e8f9cafb":"markdown","b02528c9":"markdown","234fed35":"markdown"},"source":{"76bf9e72":"import random\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","aa4be5b8":"win_rate = 60\ntop_rate = 50","b6308984":"stars_needed = {10:2,9:2,8:2,7:3,6:3,5:3,4:4,3:4,2:4}\nirrev_rank = {10:True, 9:True, 8:False,7:True,6:False,5:False, 4:True, 3:False, 2:False, 1:True}","cec2be5c":"title = \"Win Rate: \" + str(win_rate) + \"%, Finish Top: \" + str(top_rate) + \"%\"\nresults = []\n\n#1,000 simulations\nfor x in range(1000):\n    rank = 10\n    stars = 0\n    games = 0\n    while rank > 1:\n        games = games + 1\n        n = random.randrange(1,100)\n        #Loss or draw\n        if n > win_rate:\n            #second chance if top on xp\n            n = random.randrange(1,100)\n            if n > top_rate:\n                #if not you lose a star\n                stars = stars - 1\n                if stars <0:\n                    #irrevocable rank so stay on that rank\n                    if irrev_rank[rank]:\n                        stars = 0\n                    #otherwise demoted\n                    else:\n                        rank = rank + 1\n                        stars = stars_needed[rank]-1\n        #Win\n        else:\n            stars = stars + 1\n            if stars >= stars_needed[rank]:\n                stars = 0\n                rank = rank - 1\n\n    results.append(games)\n\n#calculate the average\nmn = round(np.mean(results))\naverage = 'Average (' + str(int(mn)) + ')'\n\n#Plotting\nplt.figure(figsize=(12,6))\nplt.grid()\nplt.xlabel('Total Games Played')\nplt.title(title)\nsns.kdeplot(results,shade=True)\nplt.annotate(average,xy = (mn,0),xytext=(mn+10,0.005),\n    arrowprops=dict(facecolor='black',shrink=0.05))\nplt.tight_layout()\nplt.show()","f372750f":"Adjust your win-rate and likelihood of finishing top of the team. \nA number of '50' will be treated as '50%' so no need to add '%'.","e8f9cafb":"Here you can adjust how many stars are needed for each rank and which ranks are irrevocable.","b02528c9":"The rest of the code is here:","234fed35":"Anyone who has played online games has probably come across 'ranked battles'. This is a mode where you play individually or in smaller teams and where you aim to move up from a starter rank to the top rank.\n\nThis is a simulation based on the rules used for WarGaming's Season 1 Ranked Battles for *World of Warships Legends*, which is on console. The rules are as follows:\n\n* The player starts at Rank 10 and is aiming to reach Rank 1 \n* Each rank has a set number of stars that you need in order to move up to the next rank\n* Win a game and you receive a star. Win enough stars and you will be promoted to the next rank\n* Lose a game and you lose a star. However, you don't lose a star if you finished top of your team in terms of xp earned\n* Some ranks are irrevocable i.e. once reached you cannot be demoted from them\n\nAs you can tell, Ranked Battles have a *Snakes and Ladders* feel about them, which often causes player stress and rage!\n\nBased on the rules above, this simulation uses basic random number generation and 1000 simulated runs to produce a distribution curve for how many games you will have to play in order to reach Rank 1. The better players have typically reported requiring only 60 games, which according to this simulation requires a Win-Rate of 60% (and finishing top of your team 50% of the time when losing). An average player with a 50% Win-Rate is going to have to play on average 130+ games! However, the distribution has a long tail which means some players just won't be able to play enough games to get there....\n\nFeel free to play and adjust. Pass pack any suggestions to improve my hacky code :)"}}