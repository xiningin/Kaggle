{"cell_type":{"e1bd4b9b":"code","c94384ce":"code","65892352":"code","e84dd4e3":"code","2e6c2251":"code","0a15d0d5":"code","e1bc2242":"code","cead8644":"code","0a41d092":"code","36e38b1f":"code","8518459e":"code","64b2f215":"code","224764e9":"code","cb586892":"code","51949899":"code","e1031fec":"code","39eba4d0":"code","299a6e28":"code","976457ee":"code","4267bfd1":"code","9dc28654":"code","d120a758":"code","1bc4376d":"code","8e89f998":"code","15077674":"code","deca82fe":"code","606f25d1":"code","83480596":"code","6985b0a1":"code","345c54ef":"markdown","ffcd15f5":"markdown","371c7dfb":"markdown","b00a2860":"markdown","dd4ed29f":"markdown","9ee2c159":"markdown","6a701110":"markdown","f9c200bb":"markdown","03b65064":"markdown","8afd735a":"markdown","053c4407":"markdown","d3964ec2":"markdown","8c4af9af":"markdown","623fac7a":"markdown","836f341d":"markdown","76a1ed42":"markdown","d347b6a7":"markdown","0f9163d5":"markdown","0c728955":"markdown","9cf7f49f":"markdown","0aff2697":"markdown","cff7eb1c":"markdown","12ef8828":"markdown","637b81e9":"markdown","8ae46c28":"markdown","2ee09fed":"markdown","5b7fac36":"markdown","150c388a":"markdown","cc25be6f":"markdown"},"source":{"e1bd4b9b":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings('ignore')\n\ndata = pd.read_csv('\/kaggle\/input\/insurance\/insurance.csv')\nprint(\"\")\nprint(\"Data Frame Shape is \", data.shape)\nprint(\"\")","c94384ce":"data.head()","65892352":"data.isnull().sum()","e84dd4e3":"data.info()","2e6c2251":"data['sex']=data['sex'].astype('category')\ndata['smoker']=data['smoker'].astype('category')","0a15d0d5":"data.info()","e1bc2242":"data.describe()","cead8644":"col_list = [\"shit\",\"pistachio\"]\ncol_list_palette = sns.xkcd_palette(col_list)\nsns.set_palette(col_list_palette)\n\nsns.set(rc={\"figure.figsize\": (10,6)},\n            palette = sns.set_palette(col_list_palette),\n            context=\"talk\",\n            style=\"ticks\")\n\n# How many smokers are in this study?\nsns.catplot(x = 'smoker', data=data, kind='count',height=5,aspect=1.5, edgecolor=\"black\")\nplt.title('Count of Smokers in Study', fontsize = 20)\nprint(data['smoker'].value_counts())","0a41d092":"# Count of Smokers by Sex\nsns.catplot(x ='sex',hue='smoker', data=data, kind=\"count\",height=6, aspect=1.8,legend_out=False, edgecolor=\"black\")\nplt.suptitle('Count of Smokers by Gender', fontsize = 20)\nplt.xlabel('Gender')\nplt.tight_layout(rect=[0, 0.03, 1, 0.95])\nprint(pd.crosstab(data['smoker'],data['sex']))","36e38b1f":"male_data = data[data['sex']=='male']\nfemale_data = data[data['sex']=='female']","8518459e":"print('male data shape'+ str(male_data.shape))\nprint('Female data shape'+ str(female_data.shape))","64b2f215":"fig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nax.axis('equal')\nlangs = ['Male','Femlae']\nstudents = [676,672]\nax.pie(students, labels = langs,autopct='%1.2f%%',colors = [\"#1f77b4\", \"#ff7f0e\"])\nplt.title('Pie chart ')\nplt.show()","224764e9":"print(\"Median value of Male age is:\"+str(male_data['age'].mean()))\nprint(\"Median value of Femalemale age is:\"+str(female_data['age'].mean()))","cb586892":"male_smoking_young = data[(data['age']<38) & (data['sex']=='male') & (data['smoker']=='yes')]\nmale_nonsmoking_young = data[(data['age']<38) & (data['sex']=='male') & (data['smoker']=='no')]\nmale_smoking_older = data[(data['age']>38) & (data['sex']=='male') & (data['smoker']=='yes')]\nmale_nonsmoking_older = data[(data['age']>38) & (data['sex']=='male') & (data['smoker']=='no')]\n\nfemale_smoking_young = data[(data['age']<38) & (data['sex']=='female') & (data['smoker']=='yes')]\nfemale_nonsmoking_young = data[(data['age']<38) & (data['sex']=='female') & (data['smoker']=='no')]\nfemale_smoking_older =  data[(data['age']>38) & (data['sex']=='female') & (data['smoker']=='yes')]\nfemale_nonsmoking_older = data[(data['age']>38) & (data['sex']=='female') & (data['smoker']=='no')]\n                               ","51949899":"print('Younger boys who smoke and their avg spending on medical is = ' + str(male_smoking_young['charges'].mean()) +' $')\nprint(\"\")\nprint('Younger boys who dont smoke and their avg spending on medical is = ' + str(male_nonsmoking_young['charges'].mean()) +' $')\nprint(\"\")\nprint('Older men who smoke and their avg spending on medical is = ' + str(male_smoking_older['charges'].mean()) +' $')\nprint(\"\")\nprint('Older men who dont smoke and their avg spending on medical is = ' + str(male_nonsmoking_older['charges'].mean()) +' $')\nprint(\"\")","e1031fec":"print('Younger gilrs who smoke and their avg spending on medical is ='+ str(female_smoking_young['charges'].mean())+' $')\nprint(\"\")\nprint('Younger gilrs who dont smoke and their avg spending on medical is ='+ str(female_nonsmoking_young['charges'].mean())+' $')\nprint(\"\")\nprint('Older gilrs who smoke and their avg spending on medical is ='+ str(female_smoking_older['charges'].mean())+' $')\nprint(\"\")\nprint('Older gilrs who dont smoke and their avg spending on medical is ='+ str(female_nonsmoking_older['charges'].mean())+' $')\nprint(\"\")","39eba4d0":"values = [(male_smoking_young['charges'].mean()),(male_nonsmoking_young['charges'].mean()),(male_smoking_older['charges'].mean()),(male_nonsmoking_older['charges'].mean())]\nimport matplotlib.pyplot as plt\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nnames = ['YoungSmokers', 'Young-non-smoker', 'old-Smoker', 'old-Non-smokers']\nax.set_ylabel('Average charges')\nax.set_title('Average medical charges of Male')\nax.bar(names,values,width = 0.5,color=[\"#2ca02c\"])\nplt.show()","299a6e28":"values = [(female_smoking_young['charges'].mean()),(female_nonsmoking_young['charges'].mean()),(female_smoking_older['charges'].mean()),(female_nonsmoking_older['charges'].mean())]\nimport matplotlib.pyplot as plt\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nnames = ['YoungSmokers', 'Young-non-smoker', 'old-Smoker', 'old-Non-smokers']\nax.set_ylabel('Average charges')\nax.set_title('Average medical charges of Female')\nax.bar(names,values,width = 0.5,color=[\"#1f77b4\"])\nplt.show()","976457ee":"print(data['region'].unique())","4267bfd1":"southwest = data[data['region']=='southwest']\nsoutheast = data[data['region']=='southeast']\nnortheast = data[data['region']=='northeast']\nnorthwest = data[data['region']=='northwest']","9dc28654":"values = [(southwest['charges'].mean()),(southeast['charges'].mean()),(northeast['charges'].mean()),(northwest['charges'].mean())]\nimport matplotlib.pyplot as plt\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nnames = ['South-West','South-East','North-east','North-West']\nax.set_ylabel('Average charges')\nax.set_title('Average medical charges based on region')\nax.bar(names,values,width = 0.5,color=[\"#9467bd\"])\nplt.show()","d120a758":"values = [(southwest['charges'].max()),(southeast['charges'].max()),(northeast['charges'].max()),(northwest['charges'].max())]\nimport matplotlib.pyplot as plt\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nnames = ['South-West','South-East','North-east','North-West']\nax.set_ylabel('Average charges')\nax.set_title('Maximum medical charges based on region')\nax.bar(names,values,width = 0.5,color=[\"#9467bd\"])\nplt.show()","1bc4376d":"values = [(southwest['charges'].min()),(southeast['charges'].min()),(northeast['charges'].min()),(northwest['charges'].min())]\nimport matplotlib.pyplot as plt\nfig = plt.figure()\nax = fig.add_axes([0,0,1,1])\nnames = ['South-West','South-East','North-east','North-West']\nax.set_ylabel('Average charges')\nax.set_title('Minimum medical charges based on region')\nax.bar(names,values,width = 0.5,color=[\"#8c564b\"])\nplt.show()","8e89f998":"#------------------------------------------------------#\n#####   Medical Costs & Body Mass Index by Smoker  #####\n#------------------------------------------------------#\n\na = sns.lmplot(x=\"bmi\", y=\"charges\", col=\"smoker\",\n           hue=\"smoker\", data=data, height = 6)\nplt.suptitle('Medical Costs & Body Mass Index by Smoker')\nplt.tight_layout(rect=[0, 0.03, 1, 0.95])\na.set_axis_labels('Body Mass Index', 'Medical Costs in Dollars')","15077674":"#------------------------------#\n####  binning the bmi data  ####\n#------------------------------#\n\nmnb = round(min(data.bmi)-1)\nmxb = round(max(data.bmi)+2)\nbm = np.linspace(mnb, mxb, num=11).astype(int)\ndata['bmi_binned'] = pd.cut(data['bmi'], bins = bm); data.head(10)\n# Group by the bin and calculate averages\navg_bmi  = data.groupby('bmi_binned').mean()\n\n#------------------------------------------#\n####  Body Mass Index & Medical Costs   ####\n#------------------------------------------#\n\nplt.bar(avg_bmi.index.astype(str), avg_bmi['charges'], color='#3f9b0b')\nplt.xticks(rotation = 75); plt.xlabel('Body Mass Index'); plt.ylabel('Average Medical Cost in Dollars')\nplt.suptitle('Body Mass and Associated Medical Cost');","deca82fe":"#--------------------------------------------------#\n####  Age Distribution of Study Participants   #####\n#--------------------------------------------------#\n\nprint('#####  Age Statistics  #######\\n')\nprint('      Minimum     ',int(data['age'].min()))\nprint('      Average     ',int(data['age'].mean()))\nprint('      Median      ', int(np.median(data['age'])))\nprint('      Max         ',int(data['age'].max()))\nprint('   Std Deviation  ', int(data['age'].std()))","606f25d1":"####  Body Mass Distribution of Study Participants   #####\n#--------------------------------------------------------#\n\n# Distribution of Body Mass\nprint('#####  Body Mass Statistics  #######\\n')\nprint('      Minimum     ',int(data['bmi'].min()))\nprint('      Average     ',int(data['bmi'].mean()))\nprint('      Median      ', int(np.median(data['bmi'])))\nprint('      Max         ',int(data['bmi'].max()))\nprint('   Std Deviation  ', int(data['bmi'].std()))","83480596":"print('################################################')\nprint('############     Report Summary    #############')\nprint('################################################\\n')\nprint('Average Age')\nprint('--------------')\nprint('Smoker      %0.0f' % data[data['smoker']=='yes']['age'].mean())\nprint('Non-Smoker  %0.0f' %data[data['smoker']=='no']['age'].mean(),'\\n')\nprint('Average Body Mass')\nprint('--------------------')\nprint('Smoker      %0.0f' % data[data['smoker']=='yes']['bmi'].mean())\nprint('Non-Smoker  %0.0f' % data[data['smoker']=='no']['bmi'].mean(),'\\n')\nprint('Average Medical Cost by Gender')\nprint('-----------------------------')\nprint('Female      ${:,.0f}'.format(data[data['sex']=='female']['charges'].mean()))\nprint('Male        ${:,.0f}'.format(data[data['sex']=='male']['charges'].mean()), '\\n')\nprint('Average Medical Cost by Smoker')\nprint('--------------------------------')\nprint('Non-Smoker   ${:,.0f}'.format(data[data['smoker']=='no']['charges'].mean()))\nprint('Smoker      ${:,.0f}'.format(data[data['smoker']=='yes']['charges'].mean()))\n","6985b0a1":"temp = {\"no\" : 0, \"yes\" : 1}\ndata.smoker = [temp[item] for item in data.smoker]\n\nprint('##############################################')\nprint('###########    Correlations       ############')\nprint('##############################################')\nprint('\\n')\nprint('Cost to Smoker   ', round(data['charges'].corr(data['smoker'])*100,1),'%')\nprint('Cost to Age      ', round(data['charges'].corr(data['age'])*100,1),'%')\nprint('Cost to Body Mass ', round(data['charges'].corr(data['bmi'])*100,1),'%')","345c54ef":"The reason why I'm doing this is for better understanding of the data .\nNow we can see how much difference the younger ones are spending than the older on medical is known very easy for the visuals","ffcd15f5":"DataFrame contains 1338 column and 7 rows","371c7dfb":"As we can see there are only 4 regions given in the dataset\n","b00a2860":"From the above result we can see that \n\nMale   -  Total no : 676\n\nFemale  - Total no : 662\n\n\n\n\n\n","dd4ed29f":"# Simple statistics from our data","9ee2c159":"From the above output it is clear that there are no missing values in the dataset\n\n\nHere is another way to check the missing values","6a701110":"Now let me the shape of newly created dataframes\n","f9c200bb":"From the above bar charts we can tell that South-east people are the ones who are paying more on thier medical charges","03b65064":"So now divide the dataframes into \n\nyounger_male < 38.917159763313606 (round the mean coz age in an int)\n\nolder_male > 38.917159763313606 (round the mean coz age in an int)\n\nyounger_female < 39.503021148036254 (round the mean coz age in an int)\n\nolder_female > 39.503021148036254 (round the mean coz age in an int)","8afd735a":"Double check if the change has been made","053c4407":"# Let us see the results based on their regions","d3964ec2":"## Converting sex and smoker columns to Categorial values","8c4af9af":"Let us check if the data set contains any missing values ","623fac7a":"Let us visually see the average spedings ","836f341d":"### Now let us see medical costs and body mass index by smokers","76a1ed42":"Let us import all the required libraries for the data preprocessing and visualisation ","d347b6a7":"Since the sex and smoker column consists of categorial data it is listed above.\n\nStatistical calculation cannot be done on strings","0f9163d5":"Let us see a bit more about the data frame\n","0c728955":"# Data Visualisation ","9cf7f49f":"# Medical Cost Personal Dataset","0aff2697":"From the above bar graph it is clear that total number of non-smokers are more in the dataset","cff7eb1c":" Let me spilt the data based on regions","12ef8828":"### Body Mass and associated medical costs","637b81e9":"Let me split the dataframe based on their sex . so that the statistical calcluations are based on their sex from now","8ae46c28":"Let me see how may smokers and non-smoker are there in the data frame","2ee09fed":"# Now I'm Dividing the Male and Female dataframes into younger and older dataframes based on the mean values of age ","5b7fac36":"As we see the result it is clear that there are no missing values in the data set.\nEach column has the respected data type in them \n\nage      - int64 \n\nsex      - object ( may be we can change this to category)\n\nbmi      - float64\n\nchildren - int64\n\nsmoker   - object ( may be we can change this to category)\n\nregion   - object\n\ncharges  - float64","150c388a":"The above correlation is used for linear regression models \n","cc25be6f":"Now let us see the average amount of money spent by each dataframe"}}