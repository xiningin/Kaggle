{"cell_type":{"4754e056":"code","acfd89a2":"code","21c2bc8e":"code","4744c79c":"code","156bb4a7":"code","8bf36044":"code","0bbe3cad":"code","fb75c2ce":"code","fea0e404":"code","7d3e6275":"code","f5dc226e":"code","c42f76d4":"code","95acd269":"markdown","c71119e9":"markdown","3fd61b87":"markdown","9badcbc3":"markdown","62a476a1":"markdown","acc2ea1d":"markdown","06951d98":"markdown","50638a81":"markdown","006e7380":"markdown","b06b4ddd":"markdown"},"source":{"4754e056":"import pandas as pd\nfrom fbprophet import Prophet","acfd89a2":"# Python\ndf = pd.read_csv('..\/input\/no-of-page-visits-to-the-r-page-on-wikipedia\/example_wp_log_R.csv')\ndf.head()","21c2bc8e":"df['cap'] = 8.5\ndf.head()","4744c79c":"m = Prophet(growth='logistic')\nm.fit(df)","156bb4a7":"future = m.make_future_dataframe(periods=1461)\nfuture['cap'] = 8.5\nfcst = m.predict(future)\nfig = m.plot(fcst)","8bf36044":"fig1 = m.plot_components(fcst)","0bbe3cad":"from fbprophet.plot import plot_plotly\n\nplot_plotly(m, fcst)","fb75c2ce":"df['y'] = 10 - df['y']\ndf['cap'] = 6\ndf['floor'] = 1.5\ndf.head()","fea0e404":"future['cap'] = 6\nfuture['floor'] = 1.5\nm = Prophet(growth='logistic')\nm.fit(df)","7d3e6275":"fcst = m.predict(future)\nfig = m.plot(fcst)\n","f5dc226e":"fig2 = m.plot_components(fcst)","c42f76d4":"from fbprophet.plot import plot_plotly\n\nplot_plotly(m, fcst)","95acd269":"We make a dataframe for future predictions as before, except we must also specify the capacity in the future. Here we keep capacity constant at the same value as in the history, and forecast 4 years into the future:","c71119e9":"By default, Prophet uses a linear model for its forecast. When forecasting growth, there is usually some maximum achievable point: total market size, total population size, etc. This is called the carrying capacity, and the forecast should saturate at this point.\n\nProphet allows you to make forecasts using a logistic growth trend model, with a specified carrying capacity. We illustrate this with the log number of page visits to the R (programming language) page on Wikipedia:","3fd61b87":"The important things to note are that cap must be specified for every row in the dataframe, and that it does not have to be constant. If the market size is growing, then cap can be an increasing sequence.\n\nWe then fit the model as before, except pass in an additional argument to specify logistic growth:","9badcbc3":"# Saturating Forecasts","62a476a1":"The logistic function has an implicit minimum of 0, and will saturate at 0 the same way that it saturates at the capacity. It is possible to also specify a different saturating minimum.","acc2ea1d":"## Forecasting Growth\n","06951d98":"The logistic growth model can also handle a saturating minimum, which is specified with a column **floor** in the same way as the cap column specifies the maximum:","50638a81":"## Saturating Minimum\n","006e7380":"To use a logistic growth trend with a saturating minimum, a maximum capacity must also be specified.","b06b4ddd":"We must specify the carrying capacity in a column **cap**. Here we will assume a particular value, but this would usually be set using data or expertise about the market size."}}