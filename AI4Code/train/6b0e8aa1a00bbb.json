{"cell_type":{"6d3ea0bd":"code","90ee295c":"code","9347b59a":"code","9590f779":"code","26710d19":"code","1db64d16":"code","f26d90f2":"code","87d7b2ab":"code","3ecb31a7":"code","1f024eca":"code","facb1892":"code","341b6798":"code","385079ee":"code","2d3274ab":"code","19d6040c":"code","819d10f0":"code","6098329a":"code","d955b8cd":"code","ef74b1b0":"code","e7a02cc8":"code","7b1ee352":"code","1727760a":"code","ca94ba19":"code","f6ba7cf3":"code","55668eb2":"code","419308b4":"code","db401898":"code","eec5d2f0":"code","9ab68e00":"code","cce8ac47":"code","8b8f8ab7":"code","045ce190":"code","37b70746":"code","ff03a072":"code","30cce326":"code","2480096c":"code","660e920f":"code","6df9d5cb":"code","c5c57b17":"code","a0c5854c":"code","2bb097d6":"code","ec9ae0e6":"code","81869123":"code","e188afc7":"code","e92ff312":"code","2a845b6f":"code","8d1e7f7a":"code","1dee104a":"code","8d50186e":"code","8c730189":"code","72c023b2":"code","b0adf7ec":"code","2f53c3d8":"code","e314be65":"code","bfb043ea":"code","5559dddd":"code","6f1e284d":"code","962206a6":"code","1d225e58":"code","267e9318":"code","cef350ad":"code","57447d2e":"code","7619d4db":"code","3806b9c5":"code","57e8c6d8":"code","97bd2f42":"code","af40bcfa":"code","ffc72d14":"code","3f866180":"code","382312fa":"code","4144842a":"code","8a597f0d":"code","c03870e5":"code","cffbdbe6":"code","4c1809a1":"code","35ee65f3":"code","bb19e992":"code","ebcc1650":"code","f636f81e":"code","6cca5f94":"code","32ceb6ea":"code","fc00e52c":"code","ac73aec6":"code","3a8ac64a":"code","d6268234":"code","4cb0f9e2":"code","78cda45b":"code","311336db":"code","5a3ae313":"code","d861f41f":"code","75b7eb39":"code","856e06cc":"code","83bb4f3f":"code","cd0d79e2":"code","cbe4c3a4":"code","6f0b9d87":"code","f59d6614":"code","416076bb":"code","c6e96c36":"code","1ce91272":"code","38d73dd5":"code","3b70e6bd":"code","abf2efa1":"code","46539cc3":"code","ef61fd58":"code","012f959f":"code","88edf9f9":"code","30f50c28":"code","762d736b":"code","cff584c4":"code","913fafd4":"code","2a0fe871":"code","23c3aeae":"code","ab2a9134":"code","97b33993":"code","b9d28703":"code","1b6222da":"code","cc95eb5b":"code","21417aad":"code","57bde814":"code","4dc43f3f":"code","5c746743":"code","b87788cf":"code","98184bcf":"code","7bbd4046":"code","caaec1a2":"code","14036101":"code","2e0960fb":"code","43ce0940":"code","23ab771d":"code","a697c1c0":"code","2f75d252":"code","b863d216":"code","be128a35":"code","8e1fd14f":"code","6aca727b":"code","8a5a8002":"code","b937c801":"code","236ebf21":"code","4830def6":"code","b9eed008":"code","9942a8c0":"code","6ee8ec3d":"code","d9c17bab":"code","7b36e666":"code","fa966816":"code","1f41a3a1":"code","3afaa5d3":"code","ecb2e413":"code","80a673a8":"code","642537b8":"code","9c2d7313":"code","2f96c25d":"code","52818124":"code","7e6b3391":"code","1574563d":"code","e7c1b402":"code","3e00971a":"code","52e0f42c":"code","7b99b081":"code","1fc31b39":"code","b64145a9":"code","32327fb4":"code","d75861cd":"code","b582fbc1":"code","8e46d6ac":"code","ce478b03":"code","86a03027":"code","22446654":"code","3fb04dbe":"code","a32c90d5":"code","295d40cf":"code","40474bce":"code","0dbee9f5":"code","9d22b236":"code","931d5726":"code","6239a5a7":"code","38c55861":"code","8777ec9e":"code","16aaa558":"code","92c64dc8":"code","109e4f38":"code","b81fccb8":"code","19b01d7b":"code","c6198b4b":"markdown","fffd61bd":"markdown","3a6009a8":"markdown","54368646":"markdown","7705cee5":"markdown","71c998c8":"markdown","ed530512":"markdown","4136eaaa":"markdown","463f2e46":"markdown","e5439f34":"markdown","fb37936c":"markdown"},"source":{"6d3ea0bd":"#importing libs\nimport pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimport seaborn as sns","90ee295c":"#importing warnings to ignore filter warnings\nimport warnings\n\nwarnings.filterwarnings('ignore')","9347b59a":"# Read and load data 'application_data.csv'\n\napp_data = pd.read_csv('..\/input\/bank-loan-application-eda\/application_data.csv')\napp_data.head()","9590f779":"# Read and load data 'previous_application.csv'\n\nprev_app = pd.read_csv('..\/input\/bank-loan-application-eda\/previous_application.csv')\nprev_app.head()","26710d19":"#Checking shape and size of application_data.csv\n\napp_data.shape","1db64d16":"#Checking stastical date of application_data.csv\n\napp_data.describe()","f26d90f2":"app_data.info()","87d7b2ab":"#To view all 122 columns\n\npd.set_option('display.max_columns', 122)\napp_data.head()","3ecb31a7":"# Working with null values\n# finding percentage null values in each columns and arranging them in ascending order\n\napp_data.isnull().sum()\/len(app_data)*100\n(app_data.isnull().sum()\/len(app_data)*100).sort_values(ascending= False)","1f024eca":"# removing columns where null values are more than 50%\n\napp_data_clean = app_data.loc[ : ,(app_data.isnull().sum()\/len(app_data)*100 <50)]\napp_data_clean.shape","facb1892":"#Checking cleaned where data has null values less than 50\n\napp_data_clean.head()","341b6798":"# Checking data with more than 30% null values\n\napp_data.loc[ : ,(app_data.isnull().sum()\/len(app_data)*100 >30)].head()","385079ee":"#Checking CLEANED DATA,  where data has null values less than 30\n#But we missed OCCUPATION_TYPE and TOTALAREA_MODE\n# TOTALAREA_MODE- we are keeping this as this shows how big the applicant's own house area is- This is an ASSEST\n# OCCUPATION_TYPE- This captures the nature of job and gives us sense of appliant's income security. \n# These are important factor for approving or rejecting loans\n\napp_data_clean30 = app_data.loc[ : ,(app_data.isnull().sum()\/len(app_data)*100 <30)]              \napp_data_clean30.shape","2d3274ab":"# adding OCCUPATION_TYPE and TOTALAREA_MODE back\n\napp_data_clean30['OCCUPATION_TYPE'] = app_data['OCCUPATION_TYPE']\napp_data_clean30['TOTALAREA_MODE'] = app_data['TOTALAREA_MODE']\napp_data_clean30.shape","19d6040c":"#Checking the new heads\n\napp_data_clean30.head()","819d10f0":"# some columns have negative age details in days, we will need to convert them into Years data type\n# We will use user defined function for this\n\ndef convert_to_years(value):\n    return abs(value\/\/365)\n\napp_data_clean30['YEARS_BIRTH']= app_data_clean30['DAYS_BIRTH'].apply(convert_to_years)\napp_data_clean30['YEARS_EMPLOYED']= app_data_clean30['DAYS_EMPLOYED'].apply(convert_to_years)\napp_data_clean30['YEARS_REGISTRATION']= app_data_clean30['DAYS_REGISTRATION'].apply(convert_to_years)\napp_data_clean30['YEARS_ID_PUBLISH']= app_data_clean30['DAYS_ID_PUBLISH'].apply(convert_to_years)\napp_data_clean30['YEARS_LAST_PHONE_CHANGE']= app_data_clean30['DAYS_LAST_PHONE_CHANGE'].apply(convert_to_years)\n\napp_data_clean30.head()","6098329a":"# Removing the DAYs columns\napp_data_clean30.drop(app_data_clean30.loc[ : , 'DAYS_BIRTH':'DAYS_ID_PUBLISH'], axis= 1, inplace=True)","d955b8cd":"# Droping unwanted FLAG_DOCUMENT columns\n\napp_data_clean30.drop(app_data_clean30.loc[ : ,'FLAG_DOCUMENT_2':'FLAG_DOCUMENT_21'], axis= 1, inplace=True)","ef74b1b0":"# Droping WEEKDAY_APPR_PROCESS_START, HOUR_APPR_PROCESS_START, NAME_TYPE_SUITE\n# EXT_SOURCE_2, EXT_SOURCE_3\n\nunwanted= ['WEEKDAY_APPR_PROCESS_START', 'HOUR_APPR_PROCESS_START', 'NAME_TYPE_SUITE','EXT_SOURCE_2', 'EXT_SOURCE_3']\napp_data_clean30.drop(labels= unwanted, axis= 1, inplace= True)","e7a02cc8":"app_data_clean30.describe()","7b1ee352":"#Observation:-\n\n# We  notice that for years of employment max is 1000 years, which is impossible \n# We will need to check and replace accordinlgy ","1727760a":"# DAYS_EMPLOYED- max need to be changed\n\napp_data_clean30.YEARS_EMPLOYED.value_counts()","ca94ba19":"# 55374 number of applicates say they are employed for 1000 years, investigating deeper\n\napp_data_clean30[app_data_clean30.YEARS_EMPLOYED == 1000].NAME_INCOME_TYPE.value_counts()","f6ba7cf3":"#Observation:-\n\n#so pensioners and unemployed have entered incorrect data of 1000 years of employment\n# For correct data analysis, this need to be replaced by NAN\/ null\n\napp_data_clean30.loc[app_data_clean30.YEARS_EMPLOYED == 1000, 'YEARS_EMPLOYED']= np.NAN\n","55668eb2":"#Checking if this worked\n\napp_data_clean30.YEARS_EMPLOYED.value_counts()","419308b4":"app_data_clean30.NAME_INCOME_TYPE.value_counts()","db401898":"#Checking the new shape of final data frame\n\napp_data_clean30.shape","eec5d2f0":"app_data_clean30.info()","9ab68e00":"# Checking DAYS_EMPLOYED\n\nsns.boxplot(y= 'YEARS_EMPLOYED', data= app_data_clean30) \nplt.title('YEARS_EMPLOYED')\nplt.show()","cce8ac47":"# Observations:-\n\n# There are outliers, but these can give some valuable insights about employment hence we are keeping them ","8b8f8ab7":"#Checking outliers in CNT_FAM_MEMBERS \n\nsns.boxplot(y='CNT_FAM_MEMBERS',data=app_data_clean30)\nplt.title('COUNT OF FAMILY MEMBERS')\nplt.show()","045ce190":"# Observations:-\n\n# Outliers are a few applicants with more family members, we will keep them as these might add new insight ","37b70746":"#Checking ORGANIZATION_TYPE, as this is a critical information\n\napp_data_clean30.ORGANIZATION_TYPE.value_counts()","ff03a072":"# Replacing XNA with NaN\napp_data_clean30 = app_data_clean30.replace('XNA',np.NaN)","30cce326":"#Checking the new column\n\napp_data_clean30.ORGANIZATION_TYPE.value_counts()","2480096c":"# Checking AMT_INCOME_TOTAL\nsns.boxplot(y='AMT_INCOME_TOTAL', data= app_data_clean30)\nplt.show()","660e920f":"# We are further ananlysis AMT_INCOME_TOTAL column for better understanding\napp_data_clean30.AMT_INCOME_TOTAL.describe()","6df9d5cb":"# Observation:- \n\n# This shows that there are outliers in the AMT_INCOME_TOTAL, which are very high income\n# We are not going to treat these outliers \n# We see that 75% number of applicants are within 2.025000e+05 range, where as rest 25% are after that\n# Maximum income total is 1.170000e+08","c5c57b17":"#Let us check Education type and Income relationship\n\nplt.figure(figsize=(13,6))\nsns.barplot(x='NAME_EDUCATION_TYPE', y='AMT_INCOME_TOTAL', data= app_data_clean30)\nplt.title('Education type VS Income')\nplt.show()","a0c5854c":"#Observation:-\n\n#The annual income increases with more education","2bb097d6":"# Education VS Income VS Gender\n\nplt.figure(figsize=(13,6))\nsns.barplot(x='NAME_EDUCATION_TYPE', y='AMT_INCOME_TOTAL', data= app_data_clean30, hue= 'CODE_GENDER')\nplt.title('Education VS Income VS Gender')\nplt.show()","ec9ae0e6":"# Observation:-\n\n# It is observed that Males have more education and are better paid then females","81869123":"# Let us check the relationship between AMT_INCOME_TOTAL and Ease of repayment\n\nsns.barplot(x='TARGET', y='AMT_INCOME_TOTAL', data= app_data_clean30)\nplt.title('Income VS Repayment Probability')\nplt.show()","e188afc7":"# Observation:-\n\n# We dont see a relationship between the Target and AMT_INCOME_TOTAL\n# Hence we will need to find another variable for checking possible relationship","e92ff312":"# We are now going to check the relationship between Income Type and Ease of repayment\n\nplt.figure(figsize=(10,8))\nsns.barplot(x= 'TARGET', y= 'NAME_INCOME_TYPE', data= app_data_clean30)\nplt.title('Income Type VS Repayment Probability')\nplt.show()","2a845b6f":"# Observations:-\n\n# Income type of Unemployed and Marternity leave has more probablity of defaulting\n# State servant and Pensioner has the lowest probability repayment difficulties","8d1e7f7a":"# Checking NAME_EDUCATION_TYPE and AMT_CREDIT verses NAME_FAMILY_STATUS\n\nplt.figure(figsize=(15,8))\n#plt.xticks(rotation=45)\nsns.barplot(data= app_data_clean30, x='NAME_EDUCATION_TYPE', y='AMT_CREDIT', hue ='NAME_FAMILY_STATUS')\nplt.title('EDUCATION_TYPE and AMT_CREDIT verses FAMILY_STATUS')\nplt.show()","1dee104a":"# Observations:-\n\n# We can see that applicants gets most loan amount credit who have a family status as Civil marriage and has a Academic degree\n# We also notice that Single\/ not married has the lowest Amt_Credit irrespective of Education type","8d50186e":"# Checking AMT_CREDIT and NAME_HOUSING_TYPE verses Repayment Probability\n\nplt.figure(figsize=(12,6))\n#plt.xticks(rotation=45)\nsns.barplot(data= app_data_clean30, x='NAME_HOUSING_TYPE', y='AMT_CREDIT', hue ='TARGET')\nplt.title('HOUSING_TYPE VS AMT_CREDIT VS Repayment Probability')\nplt.show()","8c730189":"#Observation:-\n\n# Applicants who are housed in Office Appartment gets the higest Amt Credit and also has the highest probabillity to default","72c023b2":"# NAME_EDUCATION_TYPE, AMT_CREDIT, CODE_GENDER\n\nplt.figure(figsize=(13,6))\nsns.barplot(x='NAME_EDUCATION_TYPE', y='AMT_CREDIT', data= app_data_clean30, hue= 'CODE_GENDER')\nplt.title(\"EDUCATION_TYPE VS Credit VS Gender\")\nplt.show()","b0adf7ec":"#Observation:- \n# More the education, more is the loan amount credited for both genders","2f53c3d8":"#Gender VS Loan Credit VS Target\n\nplt.figure(figsize=(12,8))\nsns.boxplot(x='TARGET', y='AMT_CREDIT', data= app_data_clean30, hue= 'CODE_GENDER')\nplt.title('Gender VS Credit VS Repayment Probability')\nplt.show()","e314be65":"#Observations:-\n\n# Males have more chances of higher credit\n# Both genders have similar probabilites of defaulting ","bfb043ea":"# Grouping Age into bins of '20-30','30-40','40-50','50-60','>60'\n\napp_data_clean30['Age_Group']= pd.cut(app_data_clean30.YEARS_BIRTH,[20,30,40,50,60,80],labels=['20-30','30-40','40-50','50-60','>60'])\napp_data_clean30.info()","5559dddd":"app_data_clean30.head()","6f1e284d":"#ge_Group verses AMT_CREDIT verses TARGET\nplt.figure(figsize=(15,10))\nsns.boxplot(data= app_data_clean30, x='Age_Group', y='AMT_CREDIT', hue ='TARGET')\nplt.title('Age_Group verses AMT_CREDIT verses TARGET')\nplt.show()","962206a6":"#Observations:-\n\n# We see that Age group of 40-50 has the highest Amount Credit and has the most probability of replaying the loan\n# Applicants in Age group of >60 has more probability of defaulting the loan, where as in agr group 20-30 has less probability of defualting\n","1d225e58":"#Age_Group VS YEARS_EMPLOYED VS TARGET\n\nplt.figure(figsize=(13,8))\nsns.boxplot(data= app_data_clean30, x='Age_Group', y='YEARS_EMPLOYED', hue ='TARGET')\nplt.title('Age_Group VS YEARS_EMPLOYED VS TARGET')\nplt.show()","267e9318":"#Observation:-\n\n# As Age increases the probability of repaying the loan is higher irrespective of years employed","cef350ad":"# OWN_REALTY VS Age_Group VS YEARS_EMPLOYED\n\nplt.figure(figsize=(13,8))\nsns.boxplot(data= app_data_clean30, x='Age_Group', y='YEARS_EMPLOYED', hue ='FLAG_OWN_REALTY')\nplt.title('Age_Group verses YEARS_EMPLOYED verses Own House')\nplt.show()","57447d2e":"#Observation:-\n\n# As Age increases the probability of NOT owning a property are higher than owning a properly ","7619d4db":"#Age_Group verses YEARS_EMPLOYED verses OWN_CAR\nplt.figure(figsize=(13,8))\nsns.boxplot(data= app_data_clean30, x='Age_Group', y='YEARS_EMPLOYED', hue ='FLAG_OWN_CAR')\nplt.title('Age_Group verses YEARS_EMPLOYED verses OWN_CAR')\nplt.show()","3806b9c5":"#Observations:-\n\n# As the Age increases the probability of Not owning a car is more than owning a car\n# Age group of 40-50 has equal chances of owning a car or not owning a car","57e8c6d8":"#CREDIT_BUREAU Check VS OCCUPATION_TYPE VS Repayment Probability\nplt.figure(figsize=(13,12))\nsns.barplot(data= app_data_clean30, x='AMT_REQ_CREDIT_BUREAU_MON', y='OCCUPATION_TYPE', hue ='TARGET')\nplt.title('CREDIT_BUREAU Check VS OCCUPATION_TYPE VS Repayment Probability')\nplt.show()","97bd2f42":"#Observations:-\n\n# Accountants who has a higher numnber of Credit checks has the highest probability of defaulting\n# Secretaries and High skill staff also has a higher probabillity of defualting\n# HR Staff has the most probability of repaying the loan\n# IT Staff and Realty agent has good probability of replaying the loan","af40bcfa":"#CREDIT_BUREAU Check VS DEFAULTS IN SOCIAL_CIRCLE VS Repayment Probability\n\nplt.figure(figsize=(12,8))\nsns.barplot(data= app_data_clean30, x='AMT_REQ_CREDIT_BUREAU_MON', y='DEF_60_CNT_SOCIAL_CIRCLE', hue ='TARGET')\nplt.title('CREDIT_BUREAU Check VS DEFAULTS IN SOCIAL_CIRCLE VS Repayment Probability')\nplt.show()","ffc72d14":"# Observations:-\n\n# Major probability of defaulting for social circle who has more credit checks in a month\n# ","3f866180":"app_data_clean30.TARGET.value_counts()","382312fa":"plt.hist(app_data_clean30.TARGET)\nplt.show()","4144842a":"# Observation:-\n\n# High imbalance between target values hence dividing them","8a597f0d":"# Dividing the original dataset into two different datasets depending upon the target value\ntarget0 = app_data_clean30.loc[app_data_clean30.TARGET == 0]\ntarget1 = app_data_clean30.loc[app_data_clean30.TARGET == 1]","c03870e5":"# Gender analysis of those who have no payment difficulties \ntarget0.CODE_GENDER.value_counts().plot.pie(autopct='%1.0f%%',colors=['lightpink','red'],)\nplt.title('GENDER OF CLIENTS WITH NO PAYMENT DIFFICULTIES')\nplt.show()\n\n","cffbdbe6":"# Gender Distribution of those who have payment difficulties \ntarget1.CODE_GENDER.value_counts().plot.pie(autopct='%1.0f%%',colors=['lightblue','blue'],)\nplt.title('GENDER OF CLIENTS WITH PAYMENT DIFFICULTIES')\nplt.show()","4c1809a1":"# Observation:-\n\n# More female applicants in both cases, also seen that probability of female customers having payment difficulties are more","35ee65f3":"# Income type of customers with payment difficulty \n\nplt.figure(figsize=(10,6))\ntarget1.NAME_INCOME_TYPE.value_counts().plot.bar(color='red') \nplt.title('Income type of applicants with payment difficulty')\nplt.xlabel('INCOME TYPE') \nplt.ylabel('count')\nplt.show()","bb19e992":"# Income type of customers with no payment difficulty \n\ntarget0.NAME_INCOME_TYPE.value_counts().plot.bar(color='green') \nplt.title('Income type of applicants with no payment difficulty')\nplt.xlabel('INCOME TYPE') \nplt.ylabel('count')\nplt.show()","ebcc1650":"# Observation:- \n\n# Applicants in the working category have payment difficulty more than other income types.\n# Also Applicants in working category has the most probability of loans","f636f81e":"# Analysing education type of people with payment difficulties \nplt.figure(figsize=(10,6))\ntarget1.NAME_EDUCATION_TYPE.value_counts().plot.bar(color='red') \nplt.title('Applicant Education type with payment difficulties')\nplt.xlabel('EDUCATION TYPE') \nplt.ylabel('count')\nplt.show()","6cca5f94":"# Analysing education type of people with no payment difficulties \nplt.figure(figsize=(10,6))\ntarget0.NAME_EDUCATION_TYPE.value_counts().plot.bar(color='green') \nplt.title('Applicant Education type with no payment difficulties')\nplt.xlabel('EDUCATION TYPE') \nplt.ylabel('count')\nplt.show()","32ceb6ea":"# Observation:- \n\n# Most applicants with payment difficulty are in the secondary\/lower secondary category.\n# Applicants with payment difficulties have lesser education background","fc00e52c":"# Age group of people with payment difficulties \nplt.figure(figsize=(10,6))\ntarget1.Age_Group.value_counts().plot.bar(color='red') \nplt.title('Applicant Age group with payment difficulties')\nplt.xlabel('Age Group') \nplt.ylabel('count')\nplt.show()","ac73aec6":"# Age group of people with no payment difficulties \n\nplt.figure(figsize=(10,6))\ntarget0.Age_Group.value_counts().plot.bar(color='green') \nplt.title('Applicant Age group with no payment difficulties')\nplt.xlabel('Age Group') \nplt.ylabel('count')\nplt.show()","3a8ac64a":"#Observation:- \n\n# Applicants with most payment difficulties are in the age group of 30-40\n# Most applicants are in age group of 30-40","d6268234":"# Effect of occupation type in clients with payment difficulty \n\nplt.figure(figsize=(10,6))\ntarget1.OCCUPATION_TYPE.value_counts().plot.bar(color='red') \nplt.xlabel('OCCUPATION_TYPE')\nplt.ylabel('count') \nplt.title('Occupation type with payment difficulty ')\nplt.show()","4cb0f9e2":"plt.figure(figsize=(10,6))\ntarget0.OCCUPATION_TYPE.value_counts().plot.bar(color='green') \nplt.xlabel('OCCUPATION_TYPE')\nplt.ylabel('count') \nplt.title('Occupation type with no payment difficulty ')\nplt.show()","78cda45b":"# Observation:-\n\n# Applicants in jobs with lesser education requirement like Labourers, Drivers have applied for more number of loans\n# Applicants in IT, HR have least loan applications\n# In payment difficulties, Laborers, sales staff, drivers have higer probability of defaulting.","311336db":"# YEARS_LAST_PHONE_CHANGE with payment difficulty\n\nplt.figure(figsize=(10,6))\ntarget1.YEARS_LAST_PHONE_CHANGE.value_counts().plot.bar(color='red') \nplt.xlabel('YEARS_LAST_PHONE_CHANGE')\nplt.ylabel('count') \nplt.title('YEARS_LAST_PHONE_CHANGE with payment difficulty ')\nplt.show()","5a3ae313":"# YEARS_LAST_PHONE_CHANGE with no payment difficulty\n\nplt.figure(figsize=(10,6))\ntarget0.YEARS_LAST_PHONE_CHANGE.value_counts().plot.bar(color='green') \nplt.xlabel('YEARS_LAST_PHONE_CHANGE')\nplt.ylabel('count') \nplt.title('YEARS_LAST_PHONE_CHANGE with no payment difficulty ')\nplt.show()","d861f41f":"# Observations:-\n\n# We do not notice a relationship between regular changing of mpbile phones and payment difficulties\n# Hence this column can be dropped from further loan application","75b7eb39":"# FAMILY_STATUS with payment difficulty\n\nplt.figure(figsize=(10,6))\ntarget1.NAME_FAMILY_STATUS.value_counts().plot.bar(color='red') \nplt.xlabel('FAMILY_STATUS')\nplt.ylabel('count') \nplt.title('FAMILY_STATUS with payment difficulty ')\nplt.show()","856e06cc":"# FAMILY_STATUS with no payment difficulty\n\nplt.figure(figsize=(10,6))\ntarget0.NAME_FAMILY_STATUS.value_counts().plot.bar(color='green') \nplt.xlabel('FAMILY_STATUS')\nplt.ylabel('count') \nplt.title('FAMILY_STATUS with no payment difficulty ')\nplt.show()","83bb4f3f":"# Observation:\n\n# Deep diving into the percentage of Family status to understand more on the chances of payment difficulties\n# Percentage of Family status with payment difficulties\n\n(target1.NAME_FAMILY_STATUS.value_counts()\/app_data_clean30.NAME_FAMILY_STATUS.value_counts())*100","cd0d79e2":"# Ploting the percentage of Family status with payment difficulties\n\n((target1.NAME_FAMILY_STATUS.value_counts()\/app_data_clean30.NAME_FAMILY_STATUS.value_counts())*100).plot.bar(color='red')\nplt.title('Percentage of Family status with payment difficulties')\nplt.show()","cbe4c3a4":"(target0.NAME_FAMILY_STATUS.value_counts()\/app_data_clean30.NAME_FAMILY_STATUS.value_counts())*100","6f0b9d87":"((target0.NAME_FAMILY_STATUS.value_counts()\/app_data_clean30.NAME_FAMILY_STATUS.value_counts())*100).plot.bar(color='green')\nplt.title('Percentage of Family status with no payment difficulties')\nplt.show()","f59d6614":"# Observations:-\n\n# Civil and not married has the most chances of defualting the loans","416076bb":"#Pairplot for Target 0 (Appilicates with Non Payment Difficulties)\npair = target0[['AMT_CREDIT','AMT_INCOME_TOTAL','CNT_FAM_MEMBERS','YEARS_BIRTH', 'YEARS_EMPLOYED',]].fillna(0)\nsns.pairplot(pair)\n\nplt.show()","c6e96c36":"#Observations:- Appilicates with Non Payment Difficulties\n\n# 1- Less Family count more loan amt credit\n# 2- Less Family count more income total\n# 3- Longer the applicant is employed the lesser is the count of family members\n# 4- It is seen that Age is NOT dependent upto certain loan amt credit, post which loan amt credit is scares\/ barrier\/ rare","1ce91272":"#Pairplot for Target 1 (Appilicates with Payment Difficulties)\npair = target1[['AMT_CREDIT','AMT_INCOME_TOTAL','CNT_FAM_MEMBERS','YEARS_BIRTH', 'YEARS_EMPLOYED']].fillna(0)\nsns.pairplot(pair)\n\nplt.show()","38d73dd5":"#Observations:- Appilicates with Payment Difficulties\n\n# 1- Loan Amt credit is reducing with increase in count of family\n# 2- Loan amt credit is increasing but amt income is NOT increasing, hence payment difficulties\n# 3- Loan amt credit is increasing where as family count is decreasing, hence negetive relationship\n# 4- As Age and years employed is increasing, family count is decreasing","3b70e6bd":"corr = target1[['AMT_GOODS_PRICE','AMT_INCOME_TOTAL','AMT_ANNUITY','YEARS_EMPLOYED', 'YEARS_BIRTH', 'YEARS_REGISTRATION',\n              'YEARS_ID_PUBLISH','AMT_CREDIT']].corr(method = 'pearson')\n\ncorr = corr.where(np.triu(np.ones(corr.shape),k=1).astype(np.bool))\ncorr_df = corr.unstack().reset_index()","abf2efa1":"corr_df.columns = ['VAR1','VAR2','CORRELATION']\ncorr_df.dropna(subset = ['CORRELATION'],inplace=True)\ncorr_df['CORR_ABS'] = corr_df['CORRELATION'].abs()","46539cc3":"corr_df.sort_values('CORR_ABS', ascending=False).head(10)","ef61fd58":"#Observation:-\n\n#  Top 10 correlation for applicants with payment difficulties","012f959f":"#Checking Previous dataset\n\nprev_app.head()","88edf9f9":"prev_app.shape","30f50c28":"prev_app.info()","762d736b":"# Cleaning dataset more than 50% null values\n\n(prev_app.isnull().sum()\/len(prev_app)*100>50).sort_values(ascending= False).value_counts()","cff584c4":"# Cleaning dataset more than 30% null values\n\n(prev_app.isnull().sum()\/len(prev_app)*100>30).sort_values(ascending= False).value_counts()","913fafd4":"(prev_app.isnull().sum()\/len(prev_app)*100).sort_values(ascending= False)","2a0fe871":"# Dropping columns that has more than 30% null values  \n\nprev_app_clean30 = prev_app.loc[ : , (prev_app.isnull().sum()\/len(prev_app)*100<30)]\nprev_app_clean30.shape","23c3aeae":"prev_app_clean30.describe()","ab2a9134":"# checking the NAME_CASH_LOAN_PURPOSE columns\n\nprev_app_clean30.NAME_CASH_LOAN_PURPOSE.value_counts()","97b33993":"# we find that most of rows have XNA and XAP, which invalid entries\n\n#(prev_app_clean30.NAME_CASH_LOAN_PURPOSE == 'XNA').value_counts()","b9d28703":"#(prev_app_clean30.NAME_CASH_LOAN_PURPOSE == 'XAP').value_counts()","1b6222da":"# Hence we are droping them\n\n#prev_app_clean30.drop(prev_app_clean30[prev_app_clean30.NAME_CASH_LOAN_PURPOSE =='XNA'].index, inplace=True)\n#prev_app_clean30.shape","cc95eb5b":"#prev_app_clean30.drop(prev_app_clean30[prev_app_clean30.NAME_CASH_LOAN_PURPOSE =='XAP'].index, inplace=True)\n#prev_app_clean30.shape","21417aad":"prev_app_clean30.describe()","57bde814":"# converting DAYS_DECISION to absolute Years\n\nprev_app_clean30['YEARS_DECISION'] = prev_app_clean30.DAYS_DECISION.apply(convert_to_years)\n","4dc43f3f":"#checking\n\nprev_app_clean30.describe()","5c746743":"# Changing days decision to absolute values \n\nprev_app_clean30['DAYS_DECISION'] = prev_app_clean30['DAYS_DECISION'].abs()\nprev_app_clean30['DAYS_DECISION']\n","b87788cf":"# Dropping WEEKDAY_APPR_PROCESS_START and HOUR_APPR_PROCESS_START\n\nprev_app_clean30.drop(['WEEKDAY_APPR_PROCESS_START', 'HOUR_APPR_PROCESS_START', 'FLAG_LAST_APPL_PER_CONTRACT',\n                      'NFLAG_LAST_APPL_IN_DAY'], axis= 1, inplace= True)","98184bcf":"prev_app_clean30.info()","7bbd4046":"prev_app_clean30.describe()","caaec1a2":"#Check outlier for AMT_APPLICATION, AMT_CREDIT, YEARS_DECISION\n\nplt.figure(figsize= [15,5])\n\nplt.subplot(1,3,1)\nsns.boxplot(prev_app_clean30.AMT_APPLICATION)\n\nplt.subplot(1,3,2)\nsns.boxplot(prev_app_clean30.AMT_CREDIT)\n\nplt.subplot(1,3,3)\nsns.boxplot(prev_app_clean30.AMT_ANNUITY)\n\nplt.show()","14036101":"prev_app_clean30.info()","2e0960fb":"#CREDIT_BUREAU Check VS OCCUPATION_TYPE VS Repayment Probability\n\nplt.figure(figsize=(8,8))\nsns.barplot(data= prev_app_clean30, x='NAME_CONTRACT_TYPE', y='AMT_CREDIT')\nplt.title('CONTRACT_TYPE VS AMT_CREDIT')\nplt.show()","43ce0940":"#Observation:-\n\n# Cash loans has the highest Ammount credit ","23ab771d":"plt.figure(figsize=(12,6))\nsns.boxplot(data= prev_app_clean30, x='NAME_CONTRACT_STATUS', y='AMT_CREDIT')\nplt.title('CONTRACT_STATUS VS AMT_CREDIT')\nplt.show()","a697c1c0":"plt.figure(figsize=(15,6))\nsns.boxplot(data= prev_app_clean30, x='NAME_PAYMENT_TYPE', y='DAYS_DECISION')\nplt.title('PAYMENT_TYPE VS DAYS_DECISION')\nplt.show()","2f75d252":"# Observations:-\n\n# Cashless paymnents from the account of the employers takes the most days to decide","b863d216":"plt.figure(figsize=(12,6))\nsns.barplot(data= prev_app_clean30, x='CODE_REJECT_REASON', y='DAYS_DECISION')\nplt.title('REJECT_REASON VS DAYS_DECISION')\nplt.show()","be128a35":"# Observations:-\n\n# Most days taken to reject loan is with Rejection reason- System \n# Least days taken to reject loan is with Rejection reason- SCOFR ","8e1fd14f":"plt.figure(figsize=(16,10))\nsns.boxplot(data= prev_app_clean30, x='NAME_CLIENT_TYPE', y='DAYS_DECISION', hue= 'CODE_REJECT_REASON')\nplt.title('CLIENT_TYPE VS DAYS_DECISION VS REJECT_REASON')\nplt.show()","6aca727b":"# Observations:-\n\n# New Client type takes the most days to decide to reject loans then Repeaters and refreshed\n# This means that the bank is investing more time on new client before they reject the loans\n# They also has the higest probability of rejection","8a5a8002":"plt.figure(figsize=(16,8))\nsns.barplot(data= prev_app_clean30, x='NAME_CLIENT_TYPE', y='AMT_CREDIT', hue= 'CODE_REJECT_REASON')\nplt.title('CLIENT_TYPE VS AMT_CREDIT VS REJECT_REASON')\nplt.show()","b937c801":"#Observation:-\n\n# VERIF- rejection reason code has the highest ammount credit request irrespective of Client Type","236ebf21":"plt.figure(figsize=(15,40))\nsns.barplot(data= prev_app_clean30, x='AMT_CREDIT', y='NAME_CASH_LOAN_PURPOSE', hue= 'CODE_REJECT_REASON')\nplt.title('AMT_CREDIT VS NAME_CASH_LOAN_PURPOSE VS REJECT_REASON')\nplt.show()","4830def6":"#Observation:- \n\n# VERIF- rejection reason code has the highest Ammount credit rejection reason\n# Further breaking down the rejection code\n# Buying a house has the most rejection \n# Followed by Bying a new car, Business Developement\n# Education loan has the least Ammount credit rejection reason","b9eed008":"plt.figure(figsize=(10,6))\nsns.barplot(data= prev_app_clean30, x='NAME_CLIENT_TYPE', y='AMT_APPLICATION')\nplt.title('NAME_CLIENT_TYPE VS AMT_APPLICATION')\nplt.xticks(rotation=45)\nplt.show()","9942a8c0":"# Observations:-\n\n# Refreshed and Repeaters has more chances of applying for higher loan amount application","6ee8ec3d":"plt.figure(figsize=(16,8))\nsns.barplot(data= prev_app_clean30, x='CODE_REJECT_REASON', y='AMT_CREDIT', hue='NAME_CLIENT_TYPE')\nplt.title('REJECT_REASON VS NAME_CLIENT_TYPE VS AMT_CREDIT')\nplt.xticks(rotation=45)\nplt.show()","d9c17bab":"# Observations:-\n\n# rejection code Client has the least loan credit\n# Reconfirming that rejection code VERIF has the higest ammount credit of loan rejection","7b36e666":"plt.figure(figsize=(18,10))\nsns.barplot(data= prev_app_clean30, x='NAME_CASH_LOAN_PURPOSE', y='AMT_APPLICATION', hue= 'NAME_CLIENT_TYPE')\nplt.title('LOAN_PURPOSE VS AMT_APPLICATION VS CLIENT_TYPE')\nplt.xticks(rotation=60)\nplt.show()","fa966816":"#Observations:-\n\n# Buying a new car has the higest loan application amount from refreshed and repeater customers\n# Buying a home has the second higest loan application amount from repeater followed by refreshed customers","1f41a3a1":"plt.figure(figsize=(15,6))\nsns.boxplot(data= prev_app_clean30, x='AMT_APPLICATION', y='NAME_SELLER_INDUSTRY')\nplt.title('AMT_APPLICATION VS SELLER_INDUSTRY')\nplt.show()","3afaa5d3":"# Observations:-\n\n# (Ignoring the XNA) Tourism, Clothing and MLM Partners has the higest loan amount application","ecb2e413":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='NAME_SELLER_INDUSTRY', y='AMT_CREDIT')\nplt.title('SELLER_INDUSTRY VS AMT_CREDIT')\nplt.show()","80a673a8":"# Observations:-\n\n# (Ignoring the XNA) Tourism and MLM Partners has the higest loan amount credit\n# Connectivity has the lowest loan amount credit","642537b8":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='NAME_SELLER_INDUSTRY', y='DAYS_DECISION')\nplt.title('SELLER_INDUSTRY VS DAYS_DECISION')\nplt.show()\n","9c2d7313":"# Observations:-\n\n# Tourism and MLM Partners has the least days taken for decision taking to approve the loans\n# Connectivity takes the most days for decision making","2f96c25d":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='NAME_SELLER_INDUSTRY', y='DAYS_DECISION', hue= 'CODE_REJECT_REASON')\nplt.title('SELLER_INDUSTRY VS DAYS_DECISION VS REJECT_REASON')\nplt.show()","52818124":"# Observations:-\n\n# Tourism and MLM partners has lowest application rejection and days to decision\n# Jewelry taks the least days for decision, but also has a low loan application request number. Hence we are avoiding this \n# Rejection code System takes the most day to make decision across many industries","7e6b3391":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='NAME_SELLER_INDUSTRY', y='AMT_CREDIT', hue= 'CODE_REJECT_REASON')\nplt.title('SELLER_INDUSTRY VS AMT_CREDIT VS REJECT_REASON')\nplt.show()","1574563d":"# Observations:-\n\n# Auto Technology has highest Loan amount credit rejection reason\n# Connectivity and Jewelry has the lowest Loan amount credit rejection","e7c1b402":"plt.figure(figsize=(10,6))\nsns.boxplot(data= prev_app_clean30, x='NAME_PORTFOLIO', y='AMT_CREDIT')\nplt.title('NAME_PORTFOLIO VS AMT_CREDIT')\nplt.show()","3e00971a":"#Observations:-\n#Car has the higest loan amount credit","52e0f42c":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='CHANNEL_TYPE', y='AMT_CREDIT', hue= 'NAME_YIELD_GROUP')\nplt.title('CHANNEL_TYPE VS AMT_CREDIT VS NAME_YIELD_GROUP')\nplt.xticks(rotation= 45)\nplt.show()","7b99b081":"#Observations:-\n\n# Most loan amount credit is in low action and low normal irrespective of Channel type\n# High Yeild group Channel type has the lowest loan amount credits\n# Hence most probability of loan ammount credit is NOT in High Channel type rather low channel type","1fc31b39":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='CHANNEL_TYPE', y='AMT_ANNUITY')\nplt.title('CHANNEL_TYPE VS AMT_ANNUITY')\nplt.xticks(rotation= 45)\nplt.show()","b64145a9":"#Observations:-\n\n# Channel type car dealer has the higest ammount annuity","32327fb4":"plt.figure(figsize=(15,6))\nsns.barplot(data= prev_app_clean30, x='CHANNEL_TYPE', y='AMT_ANNUITY', hue= 'CODE_REJECT_REASON')\nplt.title('CHANNEL_TYPE VS AMT_ANNUITY VS REJECT_REASON')\nplt.xticks(rotation= 45)\nplt.show()","d75861cd":"# Observations:-\n\n# We again observe that Verif rejection reason has the highest Ammount Annuity across most Channel type","b582fbc1":"#We are joining the Current Application data with Prev application data to find out historical instance and \n# infer more accurate probabilities of a applicant defualting or not\n\n\nmerge_data= pd.merge(left= app_data_clean30, right=prev_app_clean30, how='inner', on= 'SK_ID_CURR')\nmerge_data.head()","8e46d6ac":"# Checking the shape\n\nmerge_data.shape","ce478b03":"# Checking stats data\n\nmerge_data.describe()","86a03027":"merge_data.info()","22446654":"#Dropping unwanted columns\n\nmerge_data.drop(['SK_ID_PREV','AMT_ANNUITY_y', 'AMT_GOODS_PRICE_y', 'NAME_PAYMENT_TYPE', 'NAME_GOODS_CATEGORY', 'NAME_PRODUCT_TYPE','SELLERPLACE_AREA','NAME_SELLER_INDUSTRY'], axis=1, inplace= True)","3fb04dbe":"merge_data.head()","a32c90d5":"merge_data.shape","295d40cf":"# We are checking and removing invalid enteries in NAME_CASH_LOAN_PURPOSE ","40474bce":"(merge_data.NAME_CASH_LOAN_PURPOSE == 'XNA').value_counts()","0dbee9f5":"(merge_data.NAME_CASH_LOAN_PURPOSE == 'XAP').value_counts()","9d22b236":"# Hence we are droping them\nmerge_data.drop(merge_data[merge_data.NAME_CASH_LOAN_PURPOSE =='XNA'].index, inplace=True)\nmerge_data.drop(merge_data[merge_data.NAME_CASH_LOAN_PURPOSE =='XAP'].index, inplace=True)","931d5726":"merge_data.shape","6239a5a7":"plt.figure(figsize=(13,30))\nsns.countplot(data = merge_data, y= 'NAME_CASH_LOAN_PURPOSE', order=merge_data['NAME_CASH_LOAN_PURPOSE'].value_counts().index,hue = 'NAME_CONTRACT_STATUS')\nplt.title('Contract status distribution of with loan purposes')\nplt.xscale('log')\nplt.show()","38c55861":"# Observations-\n\n# Higest cash loan refusal is for Repairs\n# Loan reeason Education has a similar rate of rejection and approval\n# Higest difference between Approval and rejection of loan is in Real Estate purpose followed by Payment for other loans","8777ec9e":"plt.figure(figsize=(13,30))\nsns.countplot(data = merge_data, y= 'NAME_CASH_LOAN_PURPOSE', order=merge_data['NAME_CASH_LOAN_PURPOSE'].value_counts().index,hue = 'TARGET')\nplt.title('Plottling Target with loan purposes')\nplt.xscale('log')\nplt.show()","16aaa558":"# Observations:-\n\n# Real estate and car loan purpose has significant higher chances of repaying the loans than facing difficulties.\n# Hence these loan purpose have less chances of defualting","92c64dc8":"plt.figure(figsize=(17,8))\nplt.xticks(rotation=60)\nplt.yscale('log')\nsns.barplot(data =merge_data, x='NAME_CASH_LOAN_PURPOSE', y='AMT_CREDIT_y', hue='NAME_INCOME_TYPE')\nplt.title('Plotting of Loan Purpose VS Prev Credit amount')\nplt.show()","109e4f38":"# Observation:-\n\n# State Servant followed by Commercial associate and then working income type has the higest previouos amount credit for real estate and car purchase \n# Pensioner has the least previous amount credit history irrespective of loan purpose","b81fccb8":"plt.figure(figsize=(13,8))\nsns.countplot(data = merge_data, x= 'NAME_CLIENT_TYPE', order=merge_data['NAME_CLIENT_TYPE'].value_counts().index,hue = 'TARGET')\nplt.title('Plottling Target with Previous Client Type')\n#plt.xscale('log')\nplt.show()","19b01d7b":"#Observations:-\n\n# Repeater clients has very good history of replaying loans and less chances of defualting","c6198b4b":"## Finding Top 10 correlation ","fffd61bd":"## Dividing the App dataset into two different datasets based upon 'Target' value.","3a6009a8":"## Conclusion:-","54368646":"## Working with previous application data ##","7705cee5":"Univariate & Multi-variate Analysis of Application Data","71c998c8":"## Checking Imbalance","ed530512":"Real estate and car loan purchase has significant higher chances of repaying the loans. Hence financial firms should focus on issuing these kind of loan purpose more.\n\nFinancial firms should be careful while lending more amounts to clients with low education backgrounds, engaged in occupations like labourer, sales staff, driver etc. As they have high payment difficulties. Financial firms can lend them at higher interest rates or reduce the amount of loan.\n\nHigh previous amount credit was issued for State Servant followed by Commercial associate and then Working client income type for real estate and car loan purpose. Among them State Servant has the least payment difficulties. Hence financial firms should focus on issuing more loans to them.\n\nRepeater clients has very good history of replaying loans and less chances of defaulting.\n\nHence, most preferred loan client type will be Repeater and State Servant with higher educational background.\nAnd clients with low education backgrounds, engaged in occupations like labourer, sales staff, driver will be least preferred.\n","4136eaaa":"## Univariate and Multi-Variate Ananlysis of Previous Data","463f2e46":"# Now merging the Application dataset with previous appliaction dataset","e5439f34":"Checking Outlier analysis","fb37936c":"## Analysis Application Data"}}