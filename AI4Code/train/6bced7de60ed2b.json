{"cell_type":{"2a404a19":"code","9e0920ae":"code","7cc8076c":"code","8dc836b2":"code","2caa42ee":"code","d5382d70":"code","36756517":"code","25c4064a":"code","86e9bdb2":"code","a431eecf":"code","f0a576ca":"code","71c28d3f":"code","d746fc55":"code","ffa391e3":"code","ac3bdfe9":"code","40ac5d71":"code","95edd951":"code","ad0ed79e":"markdown","79cfdcfa":"markdown","2096ea80":"markdown","12b07956":"markdown"},"source":{"2a404a19":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","9e0920ae":"data=pd.read_csv('..\/input\/core_dataset.csv')","7cc8076c":"data.head()","8dc836b2":"sub1=data[['Employee Number','MaritalDesc','Employment Status','Sex']].dropna()","2caa42ee":"sub1.head()","d5382d70":"#Frequency table for category MarialDesc\nList=sub1['MaritalDesc']\nList.value_counts()","36756517":"#Frequency table for category Employment Status\nList=sub1['Employment Status']\nList.value_counts()","25c4064a":"#Removing not future start employee from the set and see if employee martial status has any relation on the status\nsub1=sub1[sub1['Employment Status']!='Future Start']\nsub1['Employment Status'].value_counts()","86e9bdb2":"#changing Employment status to binary\nsub1['EStatus_bin']=np.where(sub1['Employment Status']=='Active',1,0)\nsub1['EStatus_bin'].value_counts()","a431eecf":"#changing marital status to binary\nsub1['MStatus_bin']=np.where(sub1['MaritalDesc']=='Married',1,0)\nsub1['MStatus_bin'].value_counts()","f0a576ca":"#import stats model\n\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf","71c28d3f":"reg1 = smf.ols('EStatus_bin ~ MStatus_bin', data=sub1).fit()\nprint (reg1.summary())","d746fc55":"#Q-Q plot for normality\nfig1=sm.qqplot(reg1.resid, line='r')\n\n# simple plot of residuals\nstdres=pd.DataFrame(reg1.resid_pearson)\nplt.plot(stdres, 'o', ls='None')\nl = plt.axhline(y=0, color='r')\nplt.ylabel('Standardized Residual')\nplt.xlabel('Observation Number')\n\n\n# additional regression diagnostic plots\nfig2 = plt.figure(figsize=(12,8))\nfig2 = sm.graphics.plot_regress_exog(reg1,  \"MStatus_bin\", fig=fig2)\n\n# leverage plot\nfig3=sm.graphics.influence_plot(reg1, size=8)\nprint(fig3)\n\n","ffa391e3":"#Considering additional variable sex \n#Frequency table for category Sex\nList=sub1['Sex']\nList.value_counts()\n","ac3bdfe9":"#changing sex  to binary\nsub1['Female_bin']=np.where(sub1['Sex']=='Female',1,0)\nsub1['Female_bin'].value_counts()","40ac5d71":"# logistic regression with Marital status on employment status\nlreg1 = smf.logit(formula = 'EStatus_bin ~ MStatus_bin', data = sub1).fit()\nprint (lreg1.summary())\n# odds ratios\nprint (\"Odds Ratios\")\nprint (np.exp(lreg1.params))\n\n# odd ratios with 95% confidence intervals\nparams = lreg1.params\nconf = lreg1.conf_int()\nconf['OR'] = params\nconf.columns = ['Lower CI', 'Upper CI', 'OR']\nprint (np.exp(conf))","95edd951":"# logistic regression with Marital status & sex on employment status\nlreg2 = smf.logit(formula = 'EStatus_bin ~ MStatus_bin + Female_bin', data = sub1).fit()\nprint (lreg2.summary())\n# odds ratios\nprint (\"Odds Ratios\")\nprint (np.exp(lreg2.params))\n\n# odd ratios with 95% confidence intervals\nparams = lreg2.params\nconf = lreg2.conf_int()\nconf['OR'] = params\nconf.columns = ['Lower CI', 'Upper CI', 'OR']\nprint (np.exp(conf))","ad0ed79e":"# Week 4 work logistics regression","79cfdcfa":"****#Week 3 work","2096ea80":"From the above logistic regression results it shows that \n\nAfter adjusting for potential confounding factors MaritalStaus -Married, the odds of having Female statying with the company were 93% higher (OR=0.930958, 95% CI = 0.57-1.50, p=.77).  however p value signifies that female employee was not a good variable for the determining the model. Marital status has more influence on the statying with company. Overall 50% employees are female thats the reason odds ratio is higher.","12b07956":"# Answer for week 2\nThe results of the linear regression model indicated that Marital status =Married (Beta=-0.1070, p=.0070) was not significantly and positively associated with Employment status Active."}}