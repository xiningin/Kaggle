{"cell_type":{"45a2b762":"code","25a102de":"code","86759751":"code","6a1ba4f2":"code","709f5ec9":"code","6d1420c0":"code","f3a1f030":"code","c2b46145":"code","029d5531":"code","bbf1d8ff":"code","d7d1ad1d":"code","8531aeec":"code","d2ad4f8a":"code","15070325":"code","21b0dc63":"code","4f5ba492":"code","3cd1399d":"code","9ff5c3d4":"code","837503c3":"code","582c6baa":"code","72e24643":"code","38faf94a":"code","10b63faa":"code","d342cecb":"code","5b1b794b":"code","314178e3":"code","7a53021e":"code","e2535262":"code","64cb8709":"code","3f0257df":"code","00e051ad":"code","129b3c31":"code","eab2fd25":"code","40a3ca1f":"code","8a1b2daa":"code","d7d8f84a":"code","704b89d1":"code","55f5fe9f":"code","72353365":"code","571ae375":"code","e8f4c3af":"code","f2dd02b9":"code","7ef4edbc":"code","a8721cbc":"code","60678e1d":"code","a44bf2e3":"code","4d93089d":"code","9ab42407":"code","0f2f61db":"code","1dcd59e4":"code","22a2f6e4":"code","36500655":"code","18745ea2":"code","294e9d74":"code","bdc3be12":"code","9b4e87e5":"code","5ab6b4e3":"code","cb838bdb":"code","90dbde84":"code","de969668":"markdown","1523ad9f":"markdown","2fb88c6a":"markdown","c1b190b6":"markdown","f0d4c2cf":"markdown","7e83c162":"markdown","34ea39ba":"markdown","ff6a2c65":"markdown","7d976757":"markdown","2915b5b3":"markdown","41e81c74":"markdown","3b5c93d6":"markdown","87163891":"markdown","a214bd40":"markdown","a0e1de98":"markdown","7e8e9afc":"markdown","48148aa3":"markdown","f321121e":"markdown","45532b41":"markdown","bdb028f6":"markdown","bd21144c":"markdown","452e7de4":"markdown","a448824f":"markdown","e0b8785b":"markdown","24a7acb2":"markdown","b6bb584f":"markdown","7e08eadf":"markdown","a07f9bab":"markdown","3862d6d0":"markdown","94e6618e":"markdown","a47dca5d":"markdown","8ef4e1f8":"markdown","393a9c0f":"markdown","e282f604":"markdown","0c7de473":"markdown","d7eb7cc2":"markdown","115dc0be":"markdown","c150d9d7":"markdown","c1021ffa":"markdown","3c33902c":"markdown","8edcf5be":"markdown","f2058349":"markdown","e82c1e52":"markdown","a1f0be11":"markdown","873a2766":"markdown","99516ad4":"markdown","348235f5":"markdown","506c47a2":"markdown","6e222786":"markdown","8c6f0d7a":"markdown","fa269dd7":"markdown","59332a3d":"markdown","a54e9ab8":"markdown","90d5714c":"markdown","4a368c6e":"markdown","6d6de675":"markdown","264b3a0a":"markdown","0f485e5e":"markdown","c7b753ee":"markdown","4e9c8f69":"markdown","11c38da8":"markdown","fabb805a":"markdown"},"source":{"45a2b762":"import pandas as pd\nfrom sklearn.linear_model import LogisticRegression\nimport matplotlib.pyplot as plt\nimport seaborn as sn\nfrom sklearn import preprocessing ","25a102de":"bank = pd.read_csv(\"..\/input\/bank-marketing-dataset\/bank.csv\")","86759751":"bank.head()","6a1ba4f2":"bank.shape","709f5ec9":"bank.columns","6d1420c0":"bank.info()","f3a1f030":"bank.describe()","c2b46145":"bank['deposit'].value_counts()","029d5531":"sn.boxplot(bank['age'])","bbf1d8ff":"sn.boxplot(bank['balance'])","d7d1ad1d":"sn.boxplot(bank['duration'])","8531aeec":"sn.boxplot(bank['campaign'])","d2ad4f8a":"sn.boxplot(bank['pdays'])","15070325":"sn.boxplot(bank['previous'])","21b0dc63":"sn.distplot(bank['age'])","4f5ba492":"sn.distplot(bank['balance'])","3cd1399d":"sn.distplot(bank['duration'])","9ff5c3d4":"sn.distplot(bank['campaign'])","837503c3":"sn.distplot(bank['pdays'])","582c6baa":"sn.distplot(bank['previous'])","72e24643":"sn.heatmap(bank.isnull())","38faf94a":"bank.isna().sum()","10b63faa":"bank['job'].describe()","d342cecb":"label_encoder = preprocessing.LabelEncoder() \n \nbank['job']= label_encoder.fit_transform(bank['job']) \n  \nbank['job'].unique() ","5b1b794b":"bank['marital'].describe()","314178e3":"bank = pd.get_dummies(bank, columns=['marital'])\nbank.head()","7a53021e":"bank['education'].describe()","e2535262":"bank['education']= label_encoder.fit_transform(bank['education']) \n  \nbank['education'].unique() ","64cb8709":"bank['default'].describe()","3f0257df":"bank = pd.get_dummies(bank, columns=['default'])\nbank.head()","00e051ad":"bank['housing'].describe()","129b3c31":"bank = pd.get_dummies(bank, columns=['housing'])\nbank.head()","eab2fd25":"bank = pd.get_dummies(bank, columns=['loan'])\nbank.head()","40a3ca1f":"bank['contact'].describe()","8a1b2daa":"bank = pd.get_dummies(bank, columns=['contact'])\nbank.head()","d7d8f84a":"bank['month'].describe()","704b89d1":"bank['month']= label_encoder.fit_transform(bank['month']) \n  \nbank['month'].unique() ","55f5fe9f":"bank['poutcome'].describe()","72353365":"bank = pd.get_dummies(bank, columns=['poutcome'])\nbank.head()","571ae375":"bank['deposit'].describe()","e8f4c3af":"bank['deposit'].value_counts()","f2dd02b9":"bank['deposit']= label_encoder.fit_transform(bank['deposit']) \n  \nbank['deposit'].unique() ","7ef4edbc":"pd.set_option('display.max_columns',None)\npd.set_option('display.max_rows',None)","a8721cbc":"bank.head()","60678e1d":"plt.figure(figsize=(12,5))\nsn.heatmap(bank.corr(),annot = True)","a44bf2e3":"bank.corr()","4d93089d":"Y = bank['deposit']","9ab42407":"Y.head()","0f2f61db":"X = bank.drop('deposit',axis=1)","1dcd59e4":"X.head()","22a2f6e4":"classifier = LogisticRegression()\nclassifier.fit(X,Y)","36500655":"y_pred = classifier.predict(X)","18745ea2":"y_pred_df= pd.DataFrame({'actual': Y,\n                         'predicted_prob': classifier.predict(X)})","294e9d74":"y_pred_df","bdc3be12":"from sklearn.metrics import confusion_matrix\nconfusion_matrix = confusion_matrix(Y,y_pred)\nprint (confusion_matrix)","9b4e87e5":"((4679+3917)\/(4679+1194+1372+3917))*100","5ab6b4e3":"from sklearn.metrics import classification_report\nprint(classification_report(Y,y_pred))","cb838bdb":"from sklearn.metrics import roc_curve\nfrom sklearn.metrics import roc_auc_score\n\nfpr, tpr, thresholds = roc_curve(Y, classifier.predict_proba (X)[:,1])\n\nauc = roc_auc_score(Y, y_pred)\n\nimport matplotlib.pyplot as plt\nplt.plot(fpr, tpr, color='red', label='logit model ( area  = %0.2f)'%auc)\nplt.plot([0, 1], [0, 1], 'k--')\nplt.xlabel('False Positive Rate or [1 - True Negative Rate]')\nplt.ylabel('True Positive Rate')","90dbde84":"auc","de969668":"### Observations :- ","1523ad9f":"In the above dataframe, we are comparing our actual vs predicted values","2fb88c6a":"We are using seperator as semicolon as we have data separated with semicolon in our dataset","c1b190b6":"### Observations :-  \n\n1. We don't have any missing values in our dataset. If it was present, there would be a different colour shade appearing on the red background. ","f0d4c2cf":"##### We need to predict whether the customer will subscribe for the term deposit or not. So, the target variable here is y (outcome) and is of Yes\/No form","7e83c162":"##### We can see that deposit column is having only 2 unique values (yes\/no) type. The deposit column is actually our outcome value. We need to predict the deposit values for our data ie whether a client will subscribe for term deposit or not\n\n##### The frequency count of no and yes values is almost same in our data. We can say our data is balanced. ","34ea39ba":"# Fitting a Logistic Regression Model","ff6a2c65":"##### Variable X has our input variables and Y has our output variable","7d976757":"###### We can now separate our target variable y with the our input variables.","2915b5b3":"# Loading the dataset","41e81c74":"##### We can see that marital column is having 3 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The marital values are not ordinal so we can go for One Hot Encoding Technique.","3b5c93d6":"1. The most of the values are less than 10 for campaign.\n2. There are few outliers which means lot of contacts were made for these clients","87163891":"### Observations :- ","a214bd40":"# Summary Statistics","a0e1de98":"1. The boxplot of Previous is very similar to pdays but the outlier values here are less.\n2. We can see most of the values as 0 so which means the clients were not contacted before this campaign. \n3. There is one client which was contacted more than 250 times before the campaign. There is a vast difference between this value and other values as all the other values are less than 100. There is a chance that this might be a typo (human error). ","7e8e9afc":"##### We can see that poutcome column is having only  4 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The values in pouttcome column are not ordinal, so we can go for One Hot Encoding Technique.","48148aa3":"##### Heatmap is a very effective technique to check the missing values in the dataset and to also understand if there is any correlation between the features of the data","f321121e":"Attribute information For bank dataset\n\n   Input variables:\n   \n    bank client data:\n   \n   1 - age (numeric)\n   2 - job : type of job (categorical: \"admin.\",\"unknown\",\"unemployed\",\"management\",\"housemaid\",\"entrepreneur\",\"student\",\n                                       \"blue-collar\",\"self-employed\",\"retired\",\"technician\",\"services\") \n   3 - marital : marital status (categorical: \"married\",\"divorced\",\"single\"; note: \"divorced\" means divorced or widowed)\n   4 - education (categorical: \"unknown\",\"secondary\",\"primary\",\"tertiary\")\n   5 - default: has credit in default? (binary: \"yes\",\"no\")\n   6 - balance: average yearly balance, in euros (numeric) \n   7 - housing: has housing loan? (binary: \"yes\",\"no\")\n   8 - loan: has personal loan? (binary: \"yes\",\"no\")\n   \n    related with the last contact of the current campaign:\n    \n   9 - contact: contact communication type (categorical: \"unknown\",\"telephone\",\"cellular\") \n  10 - day: last contact day of the month (numeric)\n  11 - month: last contact month of year (categorical: \"jan\", \"feb\", \"mar\", ..., \"nov\", \"dec\")\n  12 - duration: last contact duration, in seconds (numeric)\n  \n    other attributes:\n    \n  13 - campaign: number of contacts performed during this campaign and for this client (numeric, includes last contact)\n  14 - pdays: number of days that passed by after the client was last contacted from a previous campaign (numeric, -1 means client was not previously contacted)\n  15 - previous: number of contacts performed before this campaign and for this client (numeric)\n  16 - poutcome: outcome of the previous marketing campaign (categorical: \"unknown\",\"other\",\"failure\",\"success\")\n\n  Output variable (desired target):\n  17 - deposit - has the client subscribed a term deposit? (binary: \"yes\",\"no\")\n","45532b41":"##### We have 12 unique values in the month column. So we will use Label Encoding technique. Also the months of a year are ordinal","bdb028f6":"Performing univariate analysis using boxplot. Boxplots are very intuitive for checking any outlier data ","bd21144c":"1. We can see that the Age values lies from 20 to 70 (Approx.) \n2. Most of the age values are between 30 to 50 (25 percentile to 75 percentile)\n3. There are few outlier values more than 70. As mostly the average lifetime of human being is around 70 years","452e7de4":"##### We can see that education column is having 3 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The values are ordinal (primary, secondary, etc.) so we can go for Label Encoding Technique. If we use One Hot Encoding technique for ordinal data then there is a chance that we can have multicollinearity problem (as the outcome of one variable can easily be predicted with the help of the remaining variables)","a448824f":"##### We can see that contact column is having only 3 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The values in contact column are not ordinal, so we can go for One Hot Encoding Technique.","e0b8785b":"### Observations :- ","24a7acb2":"1. If we compare the 75% values and max values for the columns like Balance, Duration, Campaign, Pdays and Previous we can see there is a huge difference. So there are chances of outliers in our data. We will check this further using Data visualization techniques.\n","b6bb584f":"Dist plots are used to check the distribution of the data, peak value(the observation having the highest frequecy) and check for skewness in the data","7e08eadf":"We have multiple ways of checking model accuracy for our classification model.We will use below 2 methods\n\n1. Confusion matrix report\n2. ROC curve","a07f9bab":"### Dist plots","3862d6d0":"##### We will try to predict Y values for the X values in our data. ","94e6618e":"## Heatmap","a47dca5d":"We have got an auc score of 0.76 for our model.","8ef4e1f8":"We can just peek into few data points by using head function of pandas. By default, head function return top 5 values ","393a9c0f":"We can check missing values by using isna() method as well.","e282f604":"### Observations :- ","0c7de473":"##### We can see that default column is having only 2 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The values in default column are not ordinal so we can go for One Hot Encoding Technique.","d7eb7cc2":"# Understanding the target variable","115dc0be":"##### For loan column as we we have only 2 unique values(yes\/no). So similar like housing we can use One Hot Encoding Tecnhique","c150d9d7":"1. The boxplot shows most of the data points have the value of -1 which means that most of the clients were contacted the first time \n2. There are some clients that were contacted many times and few more than 800 times as well.","c1021ffa":"### Observations :- ","3c33902c":"# Problem statement","8edcf5be":"###### Given the bank customer data predict whether the customer will subscribe a term deposit (Yes\/No). This is a classification problem and we will use Logistic Regression to predict whether customer will subscribe for term deposit or not","f2058349":"### Confusion Matrix for the model accuracy","e82c1e52":"The Correlation matrix is an important data analysis metric that is computed to summarize data to understand the relationship (correlation) between various variables and make decisions accordingly.\n\n\n##### Correlation only works on the continuous variables and we have few categorical variables in our dataset. We need to convert them into numerical values using Encoding techniques.","a1f0be11":"# Importing the libraries","873a2766":"##### We can see that we have more number of no values (the customers have not subscribed for term deposits) than yes values in our data. This means that we have class imbalance problem in our data ","99516ad4":"### Observations :- ","348235f5":"##### We can see high positive skewness in all the above dist plots ","506c47a2":"# Checking model accuracy","6e222786":"* ##### The overall accuracy of the model is 77%","8c6f0d7a":"# Data visualization","fa269dd7":"1. We can see that there are outliers value in our duration values.\n2. Most of the points lie between -1 and 1000. ","59332a3d":"## Correlation","a54e9ab8":"### Observations :- ","90d5714c":"We have few categorical variables in our data job, marital,education, default, housing, loan, contact, month, poutcome and the output variable y as well.","4a368c6e":"##### We can see that housing column is having only 2 unique values and we can use both One Hot Encoding and Label Encoding Techniques here. The values in housing column are not ordinal, so we can go for One Hot Encoding Technique.","6d6de675":"### ROC Curve","264b3a0a":"### Classification report ","0f485e5e":"### Observations :- ","c7b753ee":"1. The boxplot of balance is very different than usual boxplots. We can see lot of outliers data. This is mainly due to the reason that each person maintains a very different balance.\n2. We can see most of the people are maintaining a very low balance. \n3. There are few people(only 5-6) who are maintaining a balance of more than 60,000  ","4e9c8f69":"### Observations :- ","11c38da8":"##### We have total 12 unique values in job column. So we will go for Label Encoding Technique as the number of total unique values are 12 and if we use One hot Encoding technique we will have 12 more columns ","fabb805a":"# Data Insights"}}