{"cell_type":{"aafb1ea5":"code","ee960fe7":"code","e0fc7ad7":"code","22007a9d":"code","1605c050":"code","4996db20":"code","b3b8dccb":"code","c7cee709":"code","d18918f6":"code","72945424":"code","747da744":"code","6d606a69":"code","e816374e":"code","615cd422":"code","751fd544":"code","0d903a3a":"code","cd29a2ba":"code","1549ff7e":"code","dcf01fa2":"code","13f99b20":"code","e01c1bd3":"code","e68ec784":"code","ba7abbfe":"code","57b96534":"code","84e059ff":"code","176f90f7":"code","d1124b62":"code","5453286a":"code","b136a233":"code","9bf5fb53":"code","409d8f30":"code","b472784a":"code","6984dec8":"code","a507b3a7":"code","64dcc98d":"code","c7bbad61":"code","650ef138":"code","65e3c494":"code","8f47f350":"code","b7be29b1":"markdown","47aeb6e3":"markdown","38e098ff":"markdown","9afe3c67":"markdown","a2308206":"markdown","6e24cb17":"markdown","d4f7fbe0":"markdown","9d28a312":"markdown","8db53258":"markdown","3782de87":"markdown","7afbfb17":"markdown","d003618e":"markdown","fc2a818b":"markdown","a2ecffa6":"markdown","74c0a3b0":"markdown","691be266":"markdown","320b4ac8":"markdown","0b0b1b8c":"markdown","03624a31":"markdown","2a153658":"markdown","62632da2":"markdown","fb9e97f7":"markdown","7355e4bc":"markdown","d47a01b0":"markdown","4fac3cb7":"markdown","e55ee002":"markdown","9aed0eb3":"markdown","4e5a1f3b":"markdown","df086704":"markdown","e4446293":"markdown","60ceb6ed":"markdown"},"source":{"aafb1ea5":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\n\nimport plotly.graph_objects as go\nimport plotly.express as px\n\nimport pycountry","ee960fe7":"defence_companies = pd.read_csv(\"\/kaggle\/input\/defence-companies-top-100-for-each-year-from-2005\/defence_companies_from_2005.csv\")\ndf = defence_companies.copy()\ndf.head()","e0fc7ad7":"df.info()","22007a9d":"df.Country.unique()","1605c050":"a = df.Company.str.replace(\"\\d\",\"\") # To Remove Numbers\na = a.str.replace(\"[^\\w\\s]\",\"\") # To Remove Punctuations\na = a.str.strip() # To Remove Space Characters\n\ndf[\"Company\"] = a","4996db20":"df[\"Country\"] = df[\"Country\"].str.replace(\"So Africa\",\"South Africa\").replace(\"S. Africa\",\"South Africa\")\ndf[\"Country\"] = df[\"Country\"].str.replace(\"U.S.\",\"USA\").replace(\"US\",\"USA\").replace(\"U.S\",\"USA\")\ndf[\"Country\"] = df[\"Country\"].str.replace(\"U.K.\",\"United Kingdom\").replace(\"UK\",\"United Kingdom\")\ndf[\"Country\"] = df[\"Country\"].str.replace(\"So. Korea\",\"South Korea\").replace(\"Korea\",\"South Korea\")\ndf[\"Country\"] = df[\"Country\"].str.replace(\"canada\",\"Canada\").replace(\"Swiss\",\"Switzerland\")\nb = df[df.Country == \"Netherlands\/France\"]\nb.Country = [\"France\"] * 4 \ndf = df.append(b, ignore_index=True)\ndf.Country = df.Country.apply(lambda x: x.split(\"\/\")[0] if \"\/\" in x else x)\n","b3b8dccb":"df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] = df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"].str.replace(\",\",\"\")\ndf[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] = df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"].str.replace(\"$\",\"\")\ndf.iloc[1072,5] = \"778.09\"\ndf[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] = df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"].astype(np.float32)\n","c7cee709":"df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] = df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].str.replace(\",\",\"\")\ndf[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] = df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].str.replace(\"$\",\"\")\ndf[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] = df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].apply(lambda x: np.nan if (x==\"~\" or x==\"-\" or x==\"NR\") else x)\ndf[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] = df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].astype(np.float32)\n","d18918f6":"df[\"Total Revenue(in millions)\"] = df[\"Total Revenue(in millions)\"].str.replace(\",\",\"\")\ndf[\"Total Revenue(in millions)\"] = df[\"Total Revenue(in millions)\"].str.replace(\"$\",\"\")\ndf[\"Total Revenue(in millions)\"] = df[\"Total Revenue(in millions)\"].apply(lambda x: np.nan if (x==\"~\" or x==\"-\" or x==\"NR\") else x)\ndf[\"Total Revenue(in millions)\"] = df[\"Total Revenue(in millions)\"].astype(np.float32)","72945424":"a = ((df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"]-df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"])\/df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"])*100\ndf[\"%Defense Revenue Change\"] = a","747da744":"### Updating %of Revenue from Defence Column From Revenues Which Total and A Year Ago","6d606a69":"df[\"%of Revenue from Defence\"] = df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] \/ df[\"Total Revenue(in millions)\"] * 100","e816374e":"pd.options.display.float_format = \"{:,.2f}\".format","615cd422":"df.head()","751fd544":"df.info()","0d903a3a":"df[\"IsoAlpha3\"] = df.Country.apply(lambda x: pycountry.countries.search_fuzzy(x)[0].alpha_3 if x != \"South Korea\" else pycountry.countries.search_fuzzy(\"Korea\")[0].alpha_3)","cd29a2ba":"df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] = df[\"Defense_Revenue_From_A_Year_Ago(in millions)\"] * 1000000\ndf[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] = df[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"] * 1000000\ndf[\"Total Revenue(in millions)\"] = df[\"Total Revenue(in millions)\"] * 1000000","1549ff7e":"pd.options.display.float_format = '{:,.2f}'.format","dcf01fa2":"df2020 = df[df.Year == 2020]\ndf2020 = df2020.sort_values(\"Defense_Revenue_From_A_Year_Ago(in millions)\", ascending = False)","13f99b20":"fig = px.bar(df2020[:15], x=\"Company\", y=\"Defense_Revenue_From_A_Year_Ago(in millions)\", \n             hover_name= \"Company\", text=\"Country\", color=\"Defense_Revenue_From_A_Year_Ago(in millions)\")\nfig.update_layout(\n    title='Top 15 Companies by Revenue',\n    yaxis=dict(\n        title='Revenue ($)'\n    )\n)\nfig.show()","e01c1bd3":"prepared_df2020 = df2020.groupby(\"Country\")[\"Company\"].count().reset_index()","e68ec784":"fig = px.pie(prepared_df2020, values='Company', names='Country', labels=\"Country\",\n             color_discrete_sequence=px.colors.sequential.Electric, title=\"Distribution of Countries\")\nfig.update_traces(textposition='inside', textinfo='percent+label')\nfig.show()","ba7abbfe":"prepared_df2020 = df2020.groupby([\"IsoAlpha3\"])[\"Company\"].count().reset_index()","57b96534":"fig = px.scatter_geo(prepared_df2020, locations=\"IsoAlpha3\", size=\"Company\", color=\"IsoAlpha3\")\nfig.show()","84e059ff":"fig = px.bar(df2020[:15], x=\"Company\", y=\"%Defense Revenue Change\", hover_name= \"Company\", \n             title=\"Top 15 Countries Defence Revenue Change %\", color=\"Country\")\nfig.show()","176f90f7":"fig = px.bar(df2020.sort_values(\"%Defense Revenue Change\", ascending=False)[:15], \n             x=\"Company\", y=\"%Defense Revenue Change\", hover_name= \"Country\")\nfig.update_traces(marker_color='green')\nfig.show()","d1124b62":"fig = px.bar(df2020.sort_values(\"%Defense Revenue Change\", ascending=True)[:15], \n             x=\"Company\", y=\"%Defense Revenue Change\", hover_name= \"Country\")\nfig.update_traces(marker_color='red')\nfig.show()","5453286a":"prepared_df2020 = df2020.groupby(\"Country\")[\"%Defense Revenue Change\"].mean().reset_index()\nprepared_df2020 = prepared_df2020.sort_values(\"%Defense Revenue Change\", ascending=False)\n","b136a233":"fig = px.bar(prepared_df2020, x=\"%Defense Revenue Change\", y=\"Country\", hover_name= \"Country\", \n             title=\" % Defence Revenue Change of Countries AVG\", color=\"%Defense Revenue Change\", orientation='h')\nfig.show()","9bf5fb53":"a = ((df2020[\"Defense_Revenue_From_A_Year_Ago(in millions)\"].sum()-df2020[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].sum())\/df2020[\"Defense_Revenue_From_Two_Years_Ago(in millions)\"].sum())*100\nprint(\"Top 100 AVG % Defence Revenue Change: {}%\".format(\"%.2f\" % a))","409d8f30":"fig = px.bar(df2020[:15], x=\"Company\", y=\"%of Revenue from Defence\", hover_name= \"Company\", \n             title=\"Top 15 Companies % of Revenue from Defence\", color=\"Country\")\nfig.show()","b472784a":"fig = px.bar(df2020.sort_values(\"%of Revenue from Defence\", ascending=False)[:15], \n             x=\"Company\", y=\"%of Revenue from Defence\", hover_name= \"Country\")\nfig.update_traces(marker_color='green')\nfig.show()","6984dec8":"fig = px.bar(df2020.sort_values(\"%of Revenue from Defence\", ascending=True)[:15], \n             x=\"Company\", y=\"%of Revenue from Defence\", hover_name= \"Country\")\nfig.update_traces(marker_color='red')\nfig.show()","a507b3a7":"prepared_df2020 = df2020.groupby(\"Country\")[\"%of Revenue from Defence\"].mean().reset_index()\nprepared_df2020 = prepared_df2020.sort_values(\"%of Revenue from Defence\", ascending=False)","64dcc98d":"fig = px.bar(prepared_df2020, x=\"%of Revenue from Defence\", y=\"Country\", hover_name= \"Country\", \n             title=\"Defence Companies Revenue From Defence of Countries AVG\", color=\"%of Revenue from Defence\", orientation='h')\nfig.show()","c7bbad61":"prepared_df = pd.DataFrame(df.groupby([\"Year\",\"Country\"])[\"Company\"].count()).reset_index()","650ef138":"fig = px.line(prepared_df, x=\"Year\", y=\"Company\", color=\"Country\")\nfig.show()","65e3c494":"prepared_df = pd.DataFrame(df.groupby([\"Year\"])[\"Country\"].unique()).reset_index()\nprepared_df[\"Number\"] = prepared_df[\"Country\"].apply(lambda x: len(x))","8f47f350":"fig = px.line(prepared_df, x=\"Year\", y=\"Number\")\nfig.show()","b7be29b1":"### Fixing Country Column","47aeb6e3":"### % Revenue From Defence of Countries AVG","38e098ff":"### How Many Different Countries are in Top 100 by Years","9afe3c67":"#### in Geographical Map","a2308206":"### by Years EDA","6e24cb17":"### Fixing Defense_Revenue_From_Last_Year Column","d4f7fbe0":"### % Defence Revenue Change of Countries AVG","9d28a312":"### First-Looking and Determining Problems","8db53258":"### Addition IsoAlpha-3 Code of the Countries","3782de87":"![s](https:\/\/media.giphy.com\/media\/2FQx0XQHVXaJq\/giphy.gif)","7afbfb17":"### Changing Float Columns Fraction View","d003618e":"### Last Status","fc2a818b":"### Fixing Company Column","a2ecffa6":"<b>The column includes such as \"~\", \"-\" and \"NR\" values<\/b>","74c0a3b0":"<b>There are more than one short country name which mean are same. We have to fix it.<\/b><br>\n<b>Examples: <\/b><br>\n\"U.S.\", \"U.S\", \"US\" -> USA<br>\n\"So. Korea\", \"South Korea\", \"Korea(This is not from North, You can check the companies)\" -> South Korea<br>\n\"Swiss\", \"Switzerland\" -> Switzerland<br>\n\"S. Africa\", \"So Africa\" -> South Africa<br><br>\n<b>There is a Upper-Lower Problem<\/b><br>\n<b>Examples: <\/b><br>\n\"canada\" -> Canada<br><br>\n<b>There is a company which belongs to two countries(Netherlands\/France): Airbus. We will fix it<\/b><br>\n\"Netherlands\/France\" -> Netherlands and France\n","691be266":"<b>The column includes such as \"~\", \"-\" and \"NR\" values<\/b>","320b4ac8":"### Which company's %Defence Revenue Change is biggest and smallest","0b0b1b8c":"### Which company's % Revenue from Defence is biggest and smallest","03624a31":"<b>Interpretation of the Head and Info Outputs<\/b>\n<hr>\n<b>Company: <\/b>There are numbers with company names but they should not be there.<br>\n<b>Country: <\/b>We should look its inside, is there a different short country name which mean are same<br>\n<b>Defense_Revenue_From_A_Year_Ago: <\/b>We should change type and look its inside too. Is there different type from float.<br>\n<b>Defense_Revenue_From_Two_Years_Ago: <\/b>Interpretation is same with \"Defense_Revenue_From_A_Year_Ago\"<br>\n<b>%Defense Revenue Change: <\/b>There are a lot of null values which i expect. When we look the revenues, Both do not have null values as its. We can fill most of them thanks to both of revenues<br>\n<b>Total Revenue: <\/b>Interpretation is same with \"Defense_Revenue_From_A_Year_Ago\"<br>\n<b>%of Revenue from Defence : <\/b>Interpretation is same with \"Defense_Revenue_From_A_Year_Ago\"<br>\n\n\n","2a153658":"### Distribution of Countries in Top100","62632da2":"### Top Companies by Revenue","fb9e97f7":"<b>The column includes such as 778.0.9 value, we should change it to 778.09 before doing float. I understood to be 778.09 from its upper and lower companies revenue.<\/b>","7355e4bc":"### Revenue Columns * 1000000 To Get Reel Value\n","d47a01b0":"### Defense Revenue Change %","4fac3cb7":"### To be continued","e55ee002":"### Fixing Defense_Revenue_From_Two_Years_Ago Column","9aed0eb3":"### % of Revenue from Defence","4e5a1f3b":"### Total Company Numbers which is in Top 100 by Countries","df086704":"### Updating %Defense Revenue Change Column From Revenues Which One and Two Years Ago","e4446293":"### 2020 EDA","60ceb6ed":"### Fixing Total Revenue Column"}}