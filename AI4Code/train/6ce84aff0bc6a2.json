{"cell_type":{"9835f618":"code","fe4dd203":"code","ea367411":"code","593dc9a9":"code","6cf363b8":"code","879c71ce":"code","e4c83ce9":"code","d6d8b190":"code","a211153d":"code","04d6067e":"code","27f97be5":"code","41f0bb26":"code","389808ac":"code","9c92844a":"code","c792f42f":"code","76a67a13":"code","3e2453c1":"markdown","c765baac":"markdown","9b6b74d1":"markdown","2cf4df45":"markdown","5fe3ad31":"markdown","16f72c42":"markdown","205d585f":"markdown","2372fdb3":"markdown","4c7d4093":"markdown","4777dc92":"markdown","3748cf77":"markdown","e2678aaf":"markdown","1e1ee1ac":"markdown","d158a364":"markdown","4e10cf74":"markdown","cbd24ae1":"markdown","7921a519":"markdown","dd9aaa19":"markdown","8e02fa2d":"markdown","178d47f4":"markdown","4072a5d7":"markdown"},"source":{"9835f618":"!pip install git+https:\/\/github.com\/python-visualization\/branca\n!pip install git+https:\/\/github.com\/sknzl\/folium@update-css-url-to-https","fe4dd203":"#dependencies\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt #plotting\nimport seaborn as sns #for beatiful visualization\nimport folium\nfrom folium import plugins\n\n#set file path\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","ea367411":"folium.__version__","593dc9a9":"folium.branca.__version__","6cf363b8":"fire_nrt_m6 = pd.read_csv(\"..\/input\/australian-bush-fire-satellite-data-nasa\/fire_nrt_M6_101673.csv\")\nfire_archive_m6 = pd.read_csv(\"..\/input\/australian-bush-fire-satellite-data-nasa\/fire_archive_M6_101673.csv\")\nfire_nrt_v1 = pd.read_csv(\"..\/input\/australian-bush-fire-satellite-data-nasa\/fire_nrt_V1_101674.csv\")\nfire_archive_v1 = pd.read_csv(\"..\/input\/australian-bush-fire-satellite-data-nasa\/fire_archive_V1_101674.csv\")\n\ntype(fire_nrt_v1)","879c71ce":"df_merged = pd.concat([fire_archive_v1,fire_nrt_v1],sort=True)\ndata = df_merged\ndata.head()","e4c83ce9":"data.info()","d6d8b190":"df_filter = data.filter([\"latitude\",\"longitude\",\"acq_date\",\"frp\"])\ndf_filter.head()","a211153d":"df = df_filter[df_filter['acq_date']>='2019-11-01']\ndf.head()","04d6067e":"data_topaffected = df.sort_values(by='frp',ascending=False).head(10)\ndata_topaffected","27f97be5":"#Create a map\nm = folium.Map(location=[-35.0,144], control_scale=True, zoom_start=3,attr = \"text some\")\ndf_copy = data_topaffected.copy()\n\n# loop through data to create Marker for each hospital\nfor i in range(0,len(df_copy)):\n    \n    folium.Marker(\n    location=[df_copy.iloc[i]['latitude'], df_copy.iloc[i]['longitude']],\n    #popup=popup,\n    tooltip=\"frp: \" + str(df_copy.iloc[i]['frp']) + \"<br\/> date: \"+ str(df_copy.iloc[i]['acq_date']),\n    icon=folium.Icon(color='red',icon='fire',prefix=\"fa\"),\n    ).add_to(m)\n        \nm\n","41f0bb26":"dfdate = df[['acq_date','frp']].set_index('acq_date')\ndfdate_highest = dfdate.groupby('acq_date').sum().sort_values(by='frp',ascending=False)\ndfdate_highest.head(10)","389808ac":"plt.figure(figsize=(10,5))\nsns.set_palette(\"pastel\")\nax = sns.barplot(x='acq_date',y='frp',data=df)\nfor ind, label in enumerate(ax.get_xticklabels()):\n    if ind % 10 == 0:  # every 10th label is kept\n        label.set_visible(True)\n    else:\n        label.set_visible(False)\nax.set_xticklabels(ax.get_xticklabels(), rotation=40, ha=\"right\")\nplt.xlabel(\"Date\")\nplt.ylabel('FRP (fire radiation power)')\nplt.title(\"time line of bushfire in Australia\")\nplt.tight_layout()\n","9c92844a":"from folium.plugins import HeatMapWithTime\n# A small function to get heat map with time given the data\n\ndef getmap(ip_data,location,zoom,radius):\n    \n    #get day list\n    dfmap = ip_data[['acq_date','latitude','longitude','frp']]\n    df_day_list = []\n    for day in dfmap.acq_date.sort_values().unique():\n        df_day_list.append(dfmap.loc[dfmap.acq_date == day, ['acq_date','latitude', 'longitude', 'frp']].groupby(['latitude', 'longitude']).sum().reset_index().values.tolist())\n    \n    # Create a map using folium\n    m = folium.Map(location, zoom_start=zoom,tiles='Stamen Terrain')\n    #creating heatmap with time\n    HeatMapWithTime(df_day_list,index =list(dfmap.acq_date.sort_values().unique()), auto_play=False,radius=radius, gradient={0.2: 'blue', 0.4: 'lime', 0.6: 'orange', 1: 'red'}, min_opacity=0.5, max_opacity=0.8, use_local_extrema=True).add_to(m)\n\n    return m\ngetmap(df,[-27,132],3.5,3)\n","c792f42f":"#df tail for the latest data\ndf_10days = df.tail(21500)\n#Using getmap function to obtain map from above, location set to canberra\ngetmap(df_10days,[-35.6,149.12],8,3)\n","76a67a13":"#Using getmap function to obtain map from above, location set to kangaroo island\ngetmap(df,[-36, 137.22],8.5,3)\n","3e2453c1":"# Australian Bushfire - Map analysis\n\nThe Australian bushfire has led to a massive loss to wildlife, forest area and has even caused human casualties, including firefighters from the U.S. It has even affected the air quality in nearby cities such as Sydney and Melbourne. We will take a look at fire data obtained from NASA satellite's MODIS and VIIRS.\n\nWhat is covered - \n- Regions with Highest recorded fire radiation in a day\n- Dates on which bushfires were at a peak.\n- Timeline of bushfire - barplot\n- A heat map with time - for Australian bushfire\n- Canberra Fire over the last 10 days\n- Kangaroo island fire\n\nNote :\n- Also since the loading time could be high we will only consider data for the last 3 months - Nov 1, 2019 to Jan 31, 2020.","c765baac":"## Install dependencies and set file path","9b6b74d1":"## Kangaroo Island fire","2cf4df45":"## Canbbera Fire over last 10 days","5fe3ad31":"- Note : this may take sometime to execute\n","16f72c42":"## Conclusion:\n- Dates on which Bushfires were at a peak in Australia - \n    - 4th January 2020.\n    - 30th december 2019.\n    - 8th January 2020. \n- Regions with highest recorded fire radiation power in a day -\n    1. Abbeyard, Victoria on 8th Jan.\n    2. Flinders chase in Kangaroo island on 8th Jan\n    3. Ravine road, flinders chase in Kangaroo Island\n    4. Cobberas, Victoria on 4th Jan\n    5. West bay road, Flinders chase in kangaroo island on 8th Jan.\n   \n- Observations from the map - \n   - Most of the fire activity in kangaroo island falls between 20th December to 10th January\n   - Fire activity near Capital Canberra has been observed from 25th January onwards\n****","205d585f":"## Heat map with time - for Australian bushfire","2372fdb3":"Some [issues](https:\/\/github.com\/python-visualization\/folium\/issues\/812) with branca and folium HeatMapWithTime were resolved recenlty (by [destein](https:\/\/github.com\/dstein64) and [sknzl](https:\/\/github.com\/sknzl)),\nupdate them using the following - (keep internet option on in settings)","4c7d4093":"By reverse geocoding we can obtain the locations(Mentioned in Conclusion at the end).\n\n**Below is the map marking the regions which were highest affected in a day**","4777dc92":"- The above map gives heatmap with time\n- Play it at higher fps to increase speed","3748cf77":" - You can see the red spot appearing in Canberra over last 4 days, indicating fire activity\n","e2678aaf":"## Timeline of bushfire - barplot","1e1ee1ac":"## Regions with Highest recorded fire radiation in a day","d158a364":"## Load the data","4e10cf74":"- **Also since most of the fire activity occurred after September\/November, and the complete data takes time to load in this notebook, we will filter the data between Nov 1, 2019 to Jan 31, 2020**","cbd24ae1":"- The above barplot represents the progress of fire from Nov 1, 2019 to jan 31, 2020\n- You can notice three big spikes after 30th Dec, representing highest frp activity\n","7921a519":"## Merge archive and nrt data\n\nArchive data is between Sep 1,2019 to Dec 31,2019.\nNrt is between jan 1,2020 to jan 31,2020.\n\nWe will be merging both the data","dd9aaa19":"We will be concentrating particularly on frp(Fire radiation power) which can detect bushfires","8e02fa2d":"## Dates on which bushfires were at peak","178d47f4":"Since VIIRS provides more spatial resolution(375m), We will be using VIIRS for further visualization and analysis.","4072a5d7":"## Filter the data\nWe will consider only 4 fields - latitude, longitude,acq_date and frp (fire radiation power) for this analysis."}}