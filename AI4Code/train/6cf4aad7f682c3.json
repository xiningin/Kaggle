{"cell_type":{"2a587a41":"code","9987d287":"code","e1d6cdab":"code","56b9e8af":"code","68cd0be4":"code","540126e7":"code","496ea472":"code","2de6bc48":"code","1045f7ff":"code","7863f658":"code","3a77f9ee":"code","1bf5721a":"code","fc87027c":"code","c2e24034":"markdown","28603e06":"markdown","946efb58":"markdown","ed7f7854":"markdown","527a9fd4":"markdown","dedd7163":"markdown","547315ee":"markdown","8730882d":"markdown","f15be4e2":"markdown","5cb4b7d0":"markdown","b6562b66":"markdown"},"source":{"2a587a41":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport statsmodels.formula.api as sm","9987d287":"df = pd.read_csv(\"..\/input\/brasilian-houses-to-rent\/houses_to_rent_v2.csv\")\ndf.head()\ndf = df.loc[df['city'] == 'S\u00e3o Paulo']\ndf.head()","e1d6cdab":"df.isnull().sum()","56b9e8af":"df = df.drop(['city'],axis=1)\ndf = df.drop(['hoa (R$)'],axis=1)\ndf = df.drop(['total (R$)'],axis=1)\ndf = df.drop(['property tax (R$)'],axis=1)\ndf = df.drop(['fire insurance (R$)'],axis=1)\ndf = df.rename({'rent amount (R$)': 'rent_amount',}, axis=1) \ndf = df.rename({'parking spaces': 'parking_spaces',}, axis=1) \ndf.head()","68cd0be4":"def categ_code(df, coluna):\n  df[coluna] = pd.Categorical(df[coluna])\n  return df[coluna].cat.codes\ndf['animal'] = categ_code(df, 'animal')\ndf['furniture'] = categ_code(df, 'furniture')\ndf = df.replace({'floor':{'-': 0 }})\ndf['floor'] = pd.to_numeric(df['floor'])\ndf.dtypes","540126e7":"correlacao = df.corr()\nplt.figure(figsize=(8, 7))\nsns.heatmap(correlacao)","496ea472":"g = sns.scatterplot(x=\"rent_amount\", y=\"area\",data=df)","2de6bc48":"df['rent_amount_log'] =  np.log1p(df['rent_amount'])\ndf['area_log'] = np.log1p(df['area'])\ng = sns.scatterplot(x=\"rent_amount_log\", y=\"area_log\",data=df)","1045f7ff":"correlacao = df.corr()\nplt.figure(figsize=(8, 7))\nsns.heatmap(correlacao)","7863f658":"from sklearn.linear_model import LinearRegression\nimport statsmodels.api as sm\nfrom sklearn.model_selection import train_test_split\n\nX = df.drop(['rent_amount','floor','area'],axis=1).values\ny = df['rent_amount'].values\nX_train,X_test,y_train,y_test = train_test_split(X,y,test_size= 0.2)","3a77f9ee":"model = LinearRegression()\nmodel.fit(X_train, y_train)\nprint(\"Score treino: \" + str(model.score(X_train,y_train)))","1bf5721a":"model = LinearRegression()\nmodel.fit(X_test, y_test)\nmodel.coef_\nprint(\"Score teste: \" + str(model.score(X_test,y_test)))","fc87027c":"df['predict'] = model.predict(X)\ndf.head()","c2e24034":"Com base nos resultados podemos dizer que o modelo esta acertando tanto na base teste quanto na treino e poderia ser aplicado em uma base real.\nAplicando os valores na base:","28603e06":"# An\u00e1lise de alugu\u00e9is - S\u00e3o Paulo - Data Prep + Regress\u00e3o linear\n\nEste notebook tem como objetivo realizar uma regress\u00e3o para prever o pre\u00e7o de im\u00f3veis da cidade de SP. Estou iniciando na \u00e1rea de modelagem de dados e esta analise \u00e9 baseada no que conhe\u00e7o e no que aprendi com outros notebooks deste site.\nVou melhorar com o tempo este notebook. \nAceito sujest\u00f5es de melhoria no c\u00f3digo tbm ;)","946efb58":"Analise da base e data prep com as colunas que irei trabalhar.","ed7f7854":"Ap\u00f3s verificar que n\u00e3o h\u00e1 registros nulos na base, vou eliminar as colunas que n\u00e3o ser\u00e3o utilizadas e renomear as demais.","527a9fd4":"Transformando os dados categ\u00f3ricos em num\u00e9ricos.","dedd7163":"An\u00e1lise dos resultados:","547315ee":"Com a melhora na correla\u00e7\u00e3o vamos aplicar a regress\u00e3o.","8730882d":"Nova correla\u00e7\u00e3o ap\u00f3s a normaliza\u00e7\u00e3o dos dados.","f15be4e2":"# Conclus\u00e3o da an\u00e1lise\n\nPodemos observar que o modelo possui uma boa assertividade e com valores aproximados entre treino e teste, por\u00e9m est\u00e1 aplicando valores negativos na base. Vou analisar outros tipos de modelo para melhorar a an\u00e1lise.","5cb4b7d0":"An\u00e1lise de correla\u00e7\u00e3o da base atual. \u00c9 possivel observar que n\u00e3o h\u00e1 grandes rela\u00e7\u00f5es entre a vari\u00e1vel objetivo *rent_amount* e as demais.","b6562b66":"Convertemos a variavel objetivo e a area em log na base 10.\nAcredito que h\u00e1 grande rela\u00e7\u00e3o entre essas variaveis porem a varia\u00e7\u00e3o de valores pode esta interferindo."}}