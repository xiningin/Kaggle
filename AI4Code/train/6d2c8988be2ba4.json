{"cell_type":{"974847c7":"code","93be92b3":"code","4cf3a040":"code","2b5d6389":"code","3b271845":"code","80dfc356":"code","4a3cdb11":"code","4dcef51e":"code","43ba05e5":"code","7ba06f23":"code","cc332f82":"code","227c7e9d":"code","64791290":"code","d12f228b":"code","a3267bc3":"code","60b97797":"code","b0c14828":"code","9fb3fa46":"code","021d3dfa":"code","b076c920":"code","39e187a2":"code","070aec1f":"code","7398ceb1":"code","1d0b5948":"code","a85f6598":"code","5403f0bb":"code","0d51ed9d":"code","0cd18990":"code","71becefd":"code","2fb20fe8":"code","898698aa":"code","4becd056":"code","c6ea8269":"code","3b39c052":"code","4eb27dde":"code","b5fa9d7c":"markdown","018b16c1":"markdown","34d7f47b":"markdown","a647de81":"markdown","9bb7bf71":"markdown","43ec321b":"markdown","46458bda":"markdown","1ed3d7fa":"markdown","42c1a27f":"markdown","7f332423":"markdown","cdf5f76b":"markdown","24a01642":"markdown","ac512a42":"markdown","c66f38a5":"markdown","4fc68336":"markdown"},"source":{"974847c7":"import pandas as pd\nimport numpy as np\nimport matplotlib as plt\nimport seaborn as sns","93be92b3":"data = pd.read_csv(\"..\/input\/laptop-prices\/laptops.csv\", encoding='latin-1')\ndata.head()","4cf3a040":"data.info()","2b5d6389":"data[\"Product\"] = data[\"Product\"].str.split(\"(\").apply(lambda x: x[0])","3b271845":"data[\"Cpu_Speed\"] = data[\"Cpu\"].str.split(\" \").apply(lambda x: x[-1]).str.replace(\"GHz\", \"\")\ndata[\"Cpu_Vender\"] = data[\"Cpu\"].str.split(\" \").apply(lambda x: x[0])\ndata[\"Cpu_Type\"] = data[\"Cpu\"].str.split(\" \").apply(lambda x: x[1:4] if x[1] == \"Celeron\" and \"Pentium\" and \"Xeon\" else (x[1:3] if (x[1] == \"Core\" or x[0] == \"AMD\") else x[0]) )\ndata[\"Cpu_Type\"] = data[\"Cpu_Type\"].apply(lambda x: ' '.join(x))\ndata[\"Cpu_Type\"]\ndata.head()","80dfc356":"split_mem = data['Memory'].str.split(' ', 1, expand=True)\ndata['Storage Type'] = split_mem[1]\ndata['Memory'] = split_mem[0]\ndata[\"Memory\"].unique()\ndata.head()","4a3cdb11":"data[\"Ram\"] = data[\"Ram\"].str.replace(\"GB\", \"\")\n\ndf_mem= data['Memory'].str.split('(\\d+)',  expand=True)\ndata['Memory'] = pd.to_numeric(df_mem[1])\ndata.rename(columns={'Memory':'Memory (GB or TB)'}, inplace=True)\n\ndef mem(x):\n    if x == 1:\n        return 1024\n    elif x == 2:\n        return 2048\ndata['Memory (GB or TB)'] = data['Memory (GB or TB)'].apply(lambda x: 1024 if x==1 else x)\ndata['Memory (GB or TB)'] = data['Memory (GB or TB)'].apply(lambda x: 2048 if x==2 else x)\ndata.rename(columns={'Memory (GB or TB)':'Storage (GB)'}, inplace=True)\ndata.head()","4dcef51e":"data[\"Weight\"] = data[\"Weight\"].str.replace(\"kg\", \"\")\ndata.head()","43ba05e5":"gpu_distribution_list = data[\"Gpu\"].str.split(\" \")\n#data[\"Gpu_Vender\"] = data[\"Gpu\"].str.split(\" \").apply(lambda x: x[0:2]  if x[0] == \"Intel\" else x[0]  if x[0] == \"Intel Iris\" else x[0])\ndata[\"Gpu_Vender\"] = data[\"Gpu\"].str.split(\" \").apply(lambda x: x[0])\ndata[\"Gpu_Type\"] = data[\"Gpu\"].str.split(\" \").apply(lambda x: x[1:])\ndata[\"Gpu_Type\"] = data[\"Gpu_Type\"].apply(lambda x: ' '.join(x))\ndata.head()","7ba06f23":"data['Touchscreen'] = data['ScreenResolution'].apply(lambda x:1 if 'Touchscreen' in x else 0)\ndata['Ips'] = data['ScreenResolution'].apply(lambda x:1 if 'IPS' in x else 0)\n","cc332f82":"def cat_os(inp):\n    if inp == 'Windows 10' or inp == 'Windows 7' or inp == 'Windows 10 S':\n        return 'Windows'\n    elif inp == 'macOS' or inp == 'Mac OS X':\n        return 'Mac'\n    else:\n        return 'Others\/No OS\/Linux'\n\ndata['OpSys'] = data['OpSys'].apply(cat_os)","227c7e9d":"data = data.reindex(columns=[\"Company\", \"TypeName\", \"Inches\", \"Touchscreen\", \"Ips\", \"Cpu_Vender\", \"Cpu_Type\",\"Ram\", \"Storage (GB)\", \"Storage Type\", \"Gpu_Vender\", \"Gpu_Type\", \"Weight\", \"OpSys\", \"Price_euros\" ])","64791290":"data.head()","d12f228b":"data.info()","a3267bc3":"data[\"Ram\"] = data[\"Ram\"].astype(\"int\")\ndata[\"Storage (GB)\"] = data[\"Storage (GB)\"].astype(\"int\")\ndata[\"Weight\"] = data[\"Weight\"].astype(\"float\")","60b97797":"data.info()","b0c14828":"backup = data.to_csv(\".\/laptop_price(3rd).csv\")","9fb3fa46":"sns.set(rc={\"figure.figsize\":(9, 5)})","021d3dfa":"data[\"Company\"].value_counts().plot(kind=\"bar\")","b076c920":"sns.barplot(x=data[\"Company\"], y=data[\"Price_euros\"])","39e187a2":"data[\"TypeName\"].value_counts().plot(kind=\"bar\")","070aec1f":"sns.barplot(x=data['TypeName'],y=data['Price_euros'])","7398ceb1":"cpu_distribution = data[\"Cpu_Type\"].value_counts()[:10].reset_index()\ncpu_distribution","1d0b5948":"sns.barplot(x=cpu_distribution[\"index\"], y=cpu_distribution[\"Cpu_Type\"], hue=\"Cpu_Vender\", data=data)","a85f6598":"gpu_distribution = data[\"Gpu_Type\"].value_counts()[:10].reset_index()\ngpu_distribution","5403f0bb":"sns.barplot(x=gpu_distribution[\"index\"], y=gpu_distribution[\"Gpu_Type\"], hue=\"Gpu_Vender\", data=data)","0d51ed9d":"sns.barplot(x=data['OpSys'],y=data['Price_euros'])","0cd18990":"corr_data = data.corr()\ncorr_data[\"Price_euros\"].sort_values(ascending=False)","71becefd":"sns.heatmap(data.corr())","2fb20fe8":"X = data.drop(columns=['Price_euros'])\ny = np.log(data['Price_euros'])","898698aa":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test = train_test_split(X,y,test_size=0.15,random_state=2)","4becd056":"from sklearn.compose import ColumnTransformer\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.preprocessing import OneHotEncoder\nfrom sklearn.metrics import r2_score,mean_absolute_error","c6ea8269":"from sklearn.ensemble import RandomForestRegressor,GradientBoostingRegressor,ExtraTreesRegressor\nfrom xgboost import XGBRegressor","3b39c052":"\nfrom sklearn.ensemble import VotingRegressor,StackingRegressor\n\nstep1 = ColumnTransformer(transformers=[\n    ('col_tnf',OneHotEncoder(sparse=False, handle_unknown='ignore'),[0,1,5,6,9,10,11,13])\n],remainder='passthrough')\n\n\nrf = RandomForestRegressor(n_estimators=350,random_state=3,max_samples=0.5,max_features=0.75,max_depth=15)\ngbdt = GradientBoostingRegressor(n_estimators=100,max_features=0.5)\nxgb = XGBRegressor(n_estimators=25,learning_rate=0.3,max_depth=5)\net = ExtraTreesRegressor(n_estimators=100,random_state=3,max_samples=0.5,max_features=0.75,max_depth=10)\n\nstep2 = VotingRegressor([('rf', rf), ('gbdt', gbdt), ('xgb',xgb), ('et',et)],weights=[5,1,1,1])\n\npipe = Pipeline([\n    ('step1',step1),\n    ('step2',step2)\n])\n\npipe.fit(X_train,y_train)\n\ny_pred = pipe.predict(X_test)\n\nprint('R2 score',r2_score(y_test,y_pred))\nprint('MAE',mean_absolute_error(y_test,y_pred))","4eb27dde":"import pickle\npickle.dump(pipe,open('.\/laptop_price(3rd).pkl','wb'))","b5fa9d7c":"# Result of Analysing Data\n <ol>\n <li> Dell, Lenovo and HP are dominant company in Selling Laptops\n <li> The Average Price of the Laptop in all Branda lies between 1500 to 200 Euros\n <li> In The Laptop Type NoteBook is a Dominant Factor as its Price is also preety low compare to its popularity and other Laptop Type\n <li> In CPU and GPU section Intel is the Dominant Member where in Cpu Intel Core i7 and in Gpu Intel HD Graphics is most Popular \n <li> In Operating System Mac is the clear Winner but Windows is also not much Far away\n <li> According to the Analysis the Atribute which makes the most price Difference of the laptops are Ram, IPS Display, Weight and Touchscreen","018b16c1":"# Laptop Price Prediction\n\n#### Loading the Data-Set for the Project","34d7f47b":" ## Extract IPS and Touchscreen Feature form ScreenResolution Column","a647de81":" ## Catorizing The Operating System","9bb7bf71":"## Remove extra unnecessary details form Product Columns","43ec321b":" # Analysing Relation with The Clean Data","46458bda":" ## Fetching Out The Use Full Columns the Leaving The Rest","1ed3d7fa":" ## Extract CPU Vender, CPU Type and CPU Speed in Different Columns","42c1a27f":"# Data Cleaning Process\n<ol>\n\n<li> Remove extra unnecessary details form Product Columns\n <li> Extract CPU Vender, CPU Type and CPU Speed in Different Columns\n <li> Convert Ram into Numeric Values\n <li> Extract Memory type from Memory Column\n <li> Convert Weight into numeric Values\n <li> Extract GPU Vender, GPU Type in Different Columns\n <li> Extract IPS and Touchscreen Feature form ScreenResolution Column\n <\/ol>","7f332423":" # Exporting the Model","cdf5f76b":"# Transforming the Data Type of some of the Columns\n<ol>\n<li> Ram\n<li> Storage\n<li> Weight\n<\/ol>","24a01642":"# Using Machine Learning to Predict Laptop Price\n \n ### I have tested this data with many well-Know Algorithims and i got the best result from VotingRegression Algorithm you can also Use any other Algorithm too.","ac512a42":"## Extract Memory type from Memory Column","c66f38a5":"## Extract GPU Vender, GPU Type in Different Columns","4fc68336":"## Convert Weight into numeric Values"}}