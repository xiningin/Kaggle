{"cell_type":{"ebccf3a2":"code","4c5028a7":"code","eb49a368":"code","d3658de6":"code","c287a8eb":"code","ca0c88d5":"code","60e7d22d":"code","70a434c8":"code","243d523a":"code","48fcaa60":"code","3e1b0f56":"code","acc780f4":"code","de4cb302":"code","689db9f4":"code","733449b9":"code","526054c0":"code","148183cd":"code","7c4a0e6d":"code","4f8a2fe5":"code","a14af367":"code","40c50091":"code","6ad2ae89":"code","f5d9c97d":"code","8c85f3e1":"code","38b7c97f":"code","7d29e3c1":"code","ac8f52b8":"code","37e88db4":"code","aec11e67":"code","fc1a4956":"code","04c08c8e":"code","a8842a7d":"code","1f8a081c":"code","615eb481":"code","7c974338":"code","ed9d68dd":"code","16ca5a14":"code","1952d3af":"code","1baffa89":"code","7f9bfd2f":"code","b15a4144":"code","e6e9811c":"code","32841151":"code","f62d9a16":"code","3abfc4f7":"markdown","5d75bf74":"markdown","9e123f73":"markdown","90c4a4d6":"markdown","2ba9f163":"markdown","2ced0112":"markdown","ecdf5dc8":"markdown","64ae5edd":"markdown","6c1463eb":"markdown","70ea9619":"markdown","5794ad7e":"markdown","48b54fd2":"markdown","fde48d5e":"markdown","58bd9fbc":"markdown","46f75ce7":"markdown","41be990a":"markdown","fbdfa517":"markdown","6b9e3c7c":"markdown","46b5928b":"markdown"},"source":{"ebccf3a2":"!pip install seaborn --upgrade","4c5028a7":"# loading packages\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.rcParams['figure.dpi'] = 300\n\n# ignoring warnings\nimport warnings\nwarnings.simplefilter(\"ignore\")\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","eb49a368":"sns.__version__","d3658de6":"# loading data\ndata_2017 = pd.read_csv('..\/input\/kaggle-survey-2017\/multipleChoiceResponses.csv', encoding='latin-1')\ndata_2018 = pd.read_csv('..\/input\/kaggle-survey-2018\/multipleChoiceResponses.csv')\ndata_2019 = pd.read_csv('..\/input\/kaggle-survey-2019\/multiple_choice_responses.csv')\ndata_2020 = pd.read_csv('..\/input\/kaggle-survey-2020\/kaggle_survey_2020_responses.csv')\n\nprint('Data 2017 shape: {}'.format(data_2017.shape))\nprint('Data 2018 shape: {}'.format(data_2018.shape))\nprint('Data 2019 shape: {}'.format(data_2019.shape))\nprint('Data 2020 shape: {}'.format(data_2020.shape))\nprint('-'*30)\nprint('Head of the data 2020:')\ndata_2020.head()","c287a8eb":"print('Data 2017 types: \\n{}'.format(data_2017.dtypes.value_counts()))\nprint('-'*20)\nprint('Data 2018 types: \\n{}'.format(data_2018.dtypes.value_counts()))\nprint('-'*20)\nprint('Data 2019 types: \\n{}'.format(data_2019.dtypes.value_counts()))\nprint('-'*20)\nprint('Data 2020 types: \\n{}'.format(data_2020.dtypes.value_counts()))","ca0c88d5":"print('Columns with NaN (2017): %d' %data_2017.isna().any().sum())\nprint('Columns with NaN (2018): %d' %data_2018.isna().any().sum())\nprint('Columns with NaN (2019): %d' %data_2019.isna().any().sum())\nprint('Columns with NaN (2020): %d' %data_2020.isna().any().sum())","60e7d22d":"# data frame without explanation row\ndf = data_2020.drop(0, axis = 0)","70a434c8":"def bar_plot(x, y, title, palette_len, xlim = None, ylim = None, \n             xticklabels = None, yticklabels = None, \n             top_visible = False, right_visible = False, \n             bottom_visible = True, left_visible = False,\n             xlabel = None, ylabel = None, figsize = (10, 4),\n             axis_grid = 'y'):\n    fig, ax = plt.subplots(figsize = figsize)\n    plt.title(title, size = 15, fontweight = 'bold', fontfamily = 'serif')\n\n    for i in ['top', 'right', 'bottom', 'left']:\n        ax.spines[i].set_color('black')\n    \n    ax.spines['top'].set_visible(top_visible)\n    ax.spines['right'].set_visible(right_visible)\n    ax.spines['bottom'].set_visible(bottom_visible)\n    ax.spines['left'].set_visible(left_visible)\n\n    sns.barplot(x = x, y = y, edgecolor = 'black', ax = ax,\n                palette = reversed(sns.color_palette(\"viridis\", len(palette_len))))\n    ax.set_xlim(xlim)\n    ax.set_ylim(ylim)    \n    ax.set_xticklabels(xticklabels, fontfamily = 'serif')\n    ax.set_yticklabels(yticklabels, fontfamily = 'serif')\n    plt.xlabel(xlabel, fontfamily = 'serif')\n    plt.ylabel(ylabel, fontfamily = 'serif')\n    ax.grid(axis = axis_grid, linestyle = '--', alpha = 0.9)\n    plt.show()","243d523a":"sns.set_style(\"whitegrid\")\nage = df.Q1.value_counts().sort_index()\n\nbar_plot(x = age.index, \n         y = age,\n         title = 'Age distribution',\n         palette_len = age.index, \n         ylim = (0, 4500), \n         xticklabels = age.index,\n         yticklabels = ['0', '', '1000', '', '2000', '', '3000', '', '4000', ''])","48fcaa60":"salary_order = ['$0-999', '1,000-1,999', '2,000-2,999', '3,000-3,999', \n                '4,000-4,999', '5,000-7,499', '7,500-9,999', '10,000-14,999',\n                '15,000-19,999', '20,000-24,999', '25,000-29,999', \n                '30,000-39,999', '40,000-49,999', '50,000-59,999', \n                '60,000-69,999', '70,000-79,999', '80,000-89,999', \n                '90,000-99,999', '100,000-124,999', '125,000-149,999',\n                '150,000-199,999', '200,000-249,999', '250,000-299,999', \n                '300,000-500,000', '> $500,000']\nsalary = df.Q24.fillna('unknown').value_counts()[salary_order]\n\nbar_plot(x = salary, \n         y = salary.index,\n         title = 'Salary distribution',\n         palette_len = salary.index, \n         xlim = (0, 2500), \n         xticklabels = range(0, 2501, 500),\n         yticklabels = salary.index,\n         left_visible = True,\n         figsize = (10, 8), axis_grid = 'x')","3e1b0f56":"max_salary = df.Q24.fillna('unknown-unknown') \\\n    .apply(lambda x: x.replace('$', '') \\\n    .replace('> 500,000', '500,000-500,000') \\\n    .replace(',', '') \\\n    .split(\"-\")[1]).replace('unknown', np.nan).astype('float64') + 1\n\nnew_df = pd.DataFrame({'max_salary': max_salary, 'age': df.Q1})","acc780f4":"def horizontal_boxplot(data, title, xlabel, order = None):\n    fig, ax = plt.subplots(1, 1, figsize=(10, 4))\n    plt.title(title, size = 15, fontweight = 'bold', fontfamily = 'serif')\n    \n    for i in ['top', 'right', 'bottom', 'left']:\n        ax.spines[i].set_visible(False)\n    \n    sns.boxplot(x = data, y = new_df.max_salary, ax = ax,\n                palette = reversed(sns.color_palette(\"viridis\", data.nunique())),\n                order = order)\n    plt.xlabel('')\n    plt.ylabel('Salary', fontfamily = 'serif')    \n    plt.xticks(fontfamily = 'serif')\n    plt.yticks(fontfamily = 'serif')\n    ax.grid(axis = 'y', linestyle = '--', alpha = 0.9)\n    plt.show()\n    \ndef vertical_boxplot(data, title, ylabel, order = None):\n    fig, ax = plt.subplots(1, 1, figsize=(10, 4))\n    plt.title(title, size = 15, fontweight = 'bold', fontfamily = 'serif')\n    \n    for i in ['top', 'right', 'bottom', 'left']:\n        ax.spines[i].set_visible(False)\n    \n    sns.boxplot(y = data, x = new_df.max_salary, ax = ax,\n                palette = reversed(sns.color_palette(\"viridis\", data.nunique())),\n                order = order)\n    plt.xlabel('Salary', fontfamily = 'serif')\n    plt.ylabel('')   \n    plt.xticks(fontfamily = 'serif')\n    plt.yticks(fontfamily = 'serif')\n    ax.grid(axis = 'x', linestyle = '--', alpha = 0.9)\n    plt.show()","de4cb302":"horizontal_boxplot(new_df.age.sort_values(ascending = True), \n                   'Salary by age', 'Age')","689db9f4":"new_df['sex'] = df.Q2\n\nhorizontal_boxplot(new_df.sex[new_df.sex.isin(['Man', 'Woman'])], \n                   'Salary by sex', 'Sex')","733449b9":"hm = pd.DataFrame(new_df[new_df.sex.isin(['Man', 'Woman'])][['sex', 'age']] \\\n                  .value_counts()).reset_index().pivot('sex', 'age', 0) \\\n                  .fillna(0).astype('int')\n\nplt.figure(figsize=(10, 5))\nplt.title('Count by sex and age', size = 15, fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Age', fontfamily = 'serif')\nplt.ylabel('Sex', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","526054c0":"education_order = ['No formal education past high school', \n              'Some college\/university study without earning a bachelor\u2019s degree',\n              'Professional degree', 'Bachelor\u2019s degree', \n              'Master\u2019s degree', 'Doctoral degree']\nnew_df['education'] = df.Q4\n\nvertical_boxplot(new_df.education, 'Salary by education', \n                 'Education', order = education_order)","148183cd":"new_df['position'] = df.Q5\n\nvertical_boxplot(new_df.position, 'Salary by position', 'Position')","7c4a0e6d":"exp_order = ['I have never written code', '< 1 years', '1-2 years', \n             '3-5 years', '5-10 years', '10-20 years', '20+ years']\nnew_df['experience'] = df.Q6\n\nvertical_boxplot(new_df.experience, 'Salary by experience', \n                 'Experience', order = exp_order)","4f8a2fe5":"hm = pd.DataFrame(new_df[['position', 'education']].value_counts()) \\\n    .reset_index().pivot('position', 'education', 0) \\\n    .fillna(0).astype('int')[education_order]\n\nplt.figure(figsize=(10, 6))\nplt.title('Count by position and education', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\n\nplt.xlabel('Education', fontfamily = 'serif')\nplt.ylabel('Position', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","a14af367":"hm = pd.DataFrame(new_df.groupby(['position', 'education']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('position', 'education', 'max_salary') \\\n    .fillna(0).astype('int')[education_order]\n\nplt.figure(figsize=(10, 6))\nplt.title('The average salary by position and education', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Education', fontfamily = 'serif')\nplt.ylabel('Position', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","40c50091":"hm = pd.DataFrame(new_df[['position', 'experience']].value_counts()) \\\n    .reset_index().pivot('position', 'experience', 0) \\\n    .fillna(0).astype('int')[exp_order]\n\nplt.figure(figsize=(10, 6))\nplt.title('Count by position and experience', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Experience', fontfamily = 'serif')\nplt.ylabel('Position', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","6ad2ae89":"hm = pd.DataFrame(new_df.groupby(['position', 'experience']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('position', 'experience', 'max_salary') \\\n    .fillna(0).astype('int')[exp_order]\n\nplt.figure(figsize=(10, 6))\nplt.title('The average salary by position and experience', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Experience', fontfamily = 'serif')\nplt.ylabel('Position', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","f5d9c97d":"top_countries = df.Q3.value_counts()\ntop_countries = top_countries[top_countries.index != 'Other'][:30]\n\nbar_plot(x = top_countries, \n         y = top_countries.index,\n         title = 'TOP countries by Kaggle users',\n         palette_len = top_countries.index, \n         xlim = (0, 6000), \n         xticklabels = range(0, 6001, 1000),\n         yticklabels = top_countries.index,\n         left_visible = True,\n         figsize = (10, 8), axis_grid = 'x')","8c85f3e1":"comp_order = ['0-49 employees', '50-249 employees', '250-999 employees',\n              '1000-9,999 employees', '10,000 or more employees']\ncomp_by_emp = df.Q20.value_counts()[comp_order]\n\nbar_plot(x = comp_by_emp, \n         y = comp_by_emp.index,\n         title = 'Companies by employees',\n         palette_len = comp_by_emp.index, \n         xlim = (0, 5000), \n         xticklabels = range(0, 5001, 1000),\n         yticklabels = comp_by_emp.index,\n         left_visible = True, axis_grid = 'x')","38b7c97f":"new_df['comp_size'] = df.Q20\n\nvertical_boxplot(new_df.comp_size, 'Salary by company size', \n                 'Company size', order = comp_order)","7d29e3c1":"hm = pd.DataFrame(new_df.groupby(['experience', 'comp_size']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('experience', 'comp_size', 'max_salary') \\\n    .fillna(0).astype('int').loc[exp_order, comp_order]\n\nplt.figure(figsize=(10, 6))\nplt.title('The average salary by experience and company size', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm, annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Company size', fontfamily = 'serif')\nplt.ylabel('Experience', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","ac8f52b8":"new_df['country'] = df.Q3\n\nhm = pd.DataFrame(new_df.groupby(['experience', 'country']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('country', 'experience', 'max_salary') \\\n    .fillna(0).astype('int')[exp_order]\n\nplt.figure(figsize=(10, 12))\nplt.title('The average salary by top country and experience', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm.loc[top_countries.index], annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Experience', fontfamily = 'serif')\nplt.ylabel('Country', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","37e88db4":"hm = pd.DataFrame(new_df.groupby(['comp_size', 'country']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('country', 'comp_size', 'max_salary') \\\n    .fillna(0).astype('int')[comp_order]\n\nplt.figure(figsize=(10, 12))\nplt.title('The average salary by top country and company size', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm.loc[top_countries.index], annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Company size', fontfamily = 'serif')\nplt.ylabel('Country', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","aec11e67":"hm = pd.DataFrame(new_df.groupby(['position', 'country']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('country', 'position', 'max_salary') \\\n    .fillna(0).astype('int')\n\nplt.figure(figsize=(15, 10))\nplt.title('The average salary by top country and position', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm.loc[top_countries.index], annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Position', fontfamily = 'serif')\nplt.ylabel('Country', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","fc1a4956":"hm = pd.DataFrame(new_df.groupby(['education', 'country']) \\\n                  .max_salary.mean()) \\\n    .reset_index().pivot('country', 'education', 'max_salary') \\\n    .fillna(0).astype('int')[education_order]\n\nplt.figure(figsize=(10, 10))\nplt.title('The average salary by top country and education', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\nsns.heatmap(hm.loc[top_countries.index], annot = True, fmt = \"d\", linewidths=.5)\nplt.xlabel('Education', fontfamily = 'serif')\nplt.ylabel('Country', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","04c08c8e":"reg_pl = df.iloc[:, 7:20].apply(lambda x: [x.dropna().unique()[0], \n                                           x.count()], axis = 0).T\nreg_pl.columns = ['lang', 'count']\nreg_pl['perc'] = reg_pl['count'] \/ len(df) * 100\nreg_pl = reg_pl.sort_values('perc', ascending = False)\n\nbar_plot(x = reg_pl.perc, \n         y = reg_pl.lang,\n         title = 'Programming languages that respondents use on a regular basis',\n         palette_len = reg_pl.lang, \n         xlim = (0, 80), \n         xticklabels = range(0, 81, 10),\n         yticklabels = reg_pl.lang,\n         left_visible = True, xlabel = 'Part of respondents (%)',\n         figsize = (10, 5), axis_grid = 'x')","a8842a7d":"recomend_pl = df.Q8.value_counts().reset_index()\nrecomend_pl.columns = ['lang', 'count']\nrecomend_pl['perc'] = recomend_pl['count'] \/ len(df) * 100\nrecomend_pl = recomend_pl.sort_values('perc', ascending = False)\n\nbar_plot(x = recomend_pl.perc, \n         y = recomend_pl.lang,\n         title = 'Programming languages that respondents recommend to learn first',\n         palette_len = recomend_pl.lang, \n         xlim = (0, 80), \n         xticklabels = range(0, 81, 10),\n         yticklabels = recomend_pl.lang,\n         left_visible = True, xlabel = 'Part of respondents (%)',\n         figsize = (10, 5), axis_grid = 'x')","1f8a081c":"df_2017 = data_2017.drop(0, axis = 0)\ndf_2018 = data_2018.drop(0, axis = 0)\ndf_2019 = data_2019.drop(0, axis = 0)\n\ndf_2017['year'] = '2017'\ndf_2018['year'] = '2018'\ndf_2019['year'] = '2019'\ndf['year'] = '2020'","615eb481":"df_all = pd.DataFrame({'year': [2017, 2018, 2019, 2020], \n                       'respondents': [len(df_2017), len(df_2018), \n                                       len(df_2019), len(df)]})\n\nbar_plot(x = df_all.year, \n         y = df_all.respondents,\n         title = 'The number of respondents',\n         palette_len = df_all, \n         ylim = (0, 25000), \n         xticklabels = df_all.year,\n         yticklabels = range(0, 25001, 5000))","7c974338":"def age_data_ch(data):\n    if data.iloc[:, 1].dtype == 'object':\n        data.columns = ['sex', 'age', 'count']\n        data.age = data.age.apply(lambda x: x.split(\"-\")[0])\n        data.age = data.age.apply(lambda x: x.replace('+', '')).astype('int')\n    else: \n        data.columns = ['sex', 'age', 'count']\n        data.age = data.age.astype('int')\n    return data\n\nsex_2017 = age_data_ch(df_2017[['GenderSelect', 'Age']].value_counts().reset_index())\nsex_2018 = age_data_ch(df_2018[['Q1', 'Q2']].value_counts().reset_index())\nsex_2019 = age_data_ch(df_2019[['Q2', 'Q1']].value_counts().reset_index())\nsex_2020 = age_data_ch(df[['Q2', 'Q1']].value_counts().reset_index())","ed9d68dd":"fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 5))\nsns.set_style(\"white\")\nplt.suptitle('Age distributions', size = 15, \n             fontweight = 'bold', fontfamily = 'serif')\n\nsns.lineplot(data = sex_2017[(sex_2017.sex == \"Male\") & (sex_2017.age >= 18)], \n             x = 'age', y = 'count', color = '#73D055FF', label = '2017', ax = ax1)\nsns.lineplot(data = sex_2018[sex_2018.sex == \"Male\"], x = 'age', y = 'count',\n            color = '#1F968BFF', label = '2018', ax = ax1)\nsns.lineplot(data = sex_2019[sex_2019.sex == \"Male\"], x = 'age', y = 'count',\n            color = '#39568CFF', label = '2019', ax = ax1)\nsns.lineplot(data = sex_2020[sex_2020.sex == \"Man\"], x = 'age', y = 'count',\n            color = '#440154FF', label = '2020', ax = ax1)\nax1.set_title('Male', size = 13, fontweight = 'bold', fontfamily = 'serif')\nax1.legend(prop={'size': 14})\nax1.set_xlabel('Age', fontfamily = 'serif')\nax1.set_ylabel('')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\n\nsns.lineplot(data = sex_2017[(sex_2017.sex == \"Female\") & (sex_2017.age >= 18)], \n             x = 'age', y = 'count', color = '#73D055FF', label = '2017', ax = ax2)\nsns.lineplot(data = sex_2018[sex_2018.sex == \"Female\"], x = 'age', y = 'count',\n            color = '#1F968BFF', label = '2018', ax = ax2)\nsns.lineplot(data = sex_2019[sex_2019.sex == \"Female\"], x = 'age', y = 'count',\n            color = '#39568CFF', label = '2019', ax = ax2)\nsns.lineplot(data = sex_2020[sex_2020.sex == \"Woman\"], x = 'age', y = 'count',\n            color = '#440154FF', label = '2020', ax = ax2)\nax2.set_title('Female', size = 13, fontweight = 'bold', fontfamily = 'serif')\nax2.legend(prop={'size': 14})\nax2.set_xlabel('Age', fontfamily = 'serif')\nax2.set_ylabel('')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\n\nplt.show()","16ca5a14":"degree = ['Professional degree', \"Bachelor's degree\", \"Bachelor\u2019s degree\", \n          \"Master's degree\", \"Master\u2019s degree\", 'Doctoral degree']\n\ndegree_2017 = df_2017[df_2017.FormalEducation.isin(degree)]\ndegree_2017['Q4'] = df_2017.FormalEducation\ndegree_2018 = df_2018[df_2018.Q4.isin(degree)]\ndegree_2018.Q4 = degree_2018.Q4.apply(lambda x: x.replace(\"\u2019\", \"'\"))\ndegree_2019 = df_2019[df_2019.Q4.isin(degree)]\ndegree_2019.Q4 = degree_2019.Q4.apply(lambda x: x.replace(\"\u2019\", \"'\"))\ndegree_2020 = df[df.Q4.isin(degree)]\ndegree_2020.Q4 = degree_2020.Q4.apply(lambda x: x.replace(\"\u2019\", \"'\"))","1952d3af":"degree_by_year = pd.concat([degree_2017[['year', 'Q4']],\n                            degree_2018[['year', 'Q4']],\n                            degree_2019[['year', 'Q4']],\n                            degree_2020[['year', 'Q4']]], \n                           axis = 0)\n\nplt.figure(figsize=(10, 5))\nplt.title('Degree by year', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\n\nsns.histplot(data = degree_by_year, x = 'Q4', hue = 'year',\n             multiple = \"dodge\", shrink = .8, edgecolor = 'black',\n             palette = reversed(sns.color_palette(\"viridis\", 4)))\nplt.xlabel('Degree', fontfamily = 'serif')\nplt.ylabel('Count', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","1baffa89":"positions = ['Student', 'Data Engineer', 'Software Engineer', 'Data Scientist',\n           'Data Analyst', 'Research Scientist','Statistician',\n           'Product\/Project Manager', 'Machine Learning Engineer',\n           'Business Analyst', 'DBA\/Database Engineer']\n\npositions_2017 = df_2017[df_2017.CurrentJobTitleSelect.isin(positions)]\npositions_2017['Q5'] = df_2017.CurrentJobTitleSelect\npositions_2018 = df_2018[df_2018.Q6.isin(positions)]\npositions_2018['Q5'] = df_2018.Q6\npositions_2019 = df_2019[df_2019.Q5.isin(positions)]\npositions_2020 = df[df.Q5.isin(positions)]\n\nposition_by_year = pd.concat([positions_2017[['year', 'Q5']],\n                              positions_2018[['year', 'Q5']],\n                              positions_2019[['year', 'Q5']],\n                              positions_2020[['year', 'Q5']]], axis = 0)\n\nplt.figure(figsize=(10, 10))\nplt.title('Some positions by year', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\n\nsns.histplot(data = position_by_year, y = 'Q5', hue = 'year',\n             multiple = \"dodge\", shrink = .8, edgecolor = 'black',\n             palette = reversed(sns.color_palette(\"viridis\", 4)))\nplt.xlabel('Count', fontfamily = 'serif')\nplt.ylabel('Position', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","7f9bfd2f":"countries = top_countries.index[:10]\n\ncountries_2017 = df_2017[df_2017.Country.isin(countries)]\ncountries_2017['Q3'] = df_2017.Country\ncountries_2018 = df_2018[df_2018.Q3.isin(countries)]\ncountries_2019 = df_2019[df_2019.Q3.isin(countries)]\ncountries_2020 = df[df.Q3.isin(countries)]\n\ncc_by_year = pd.concat([countries_2017[['year', 'Q3']],\n                        countries_2018[['year', 'Q3']],\n                        countries_2019[['year', 'Q3']],\n                        countries_2020[['year', 'Q3']]], axis = 0)\n\nplt.figure(figsize=(10, 8))\nplt.title('TOP-2020 Kaggle countries by year', size = 15, \n          fontweight = 'bold', fontfamily = 'serif')\n\nsns.histplot(data = cc_by_year, y = 'Q3', hue = 'year',\n             multiple = \"dodge\", shrink = .8, edgecolor = 'black',\n             palette = reversed(sns.color_palette(\"viridis\", 4)))\nplt.ylabel('Count', fontfamily = 'serif')\nplt.ylabel('Country', fontfamily = 'serif')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","b15a4144":"def lang_func(data, year):\n    reg_pl = data.apply(lambda x: [x.dropna().unique()[0], \n                                   x.count()], axis = 0).T\n    reg_pl.columns = ['lang', 'count']\n    reg_pl['perc'] = reg_pl['count'] \/ len(df) * 100\n    reg_pl = reg_pl.sort_values('perc', ascending = False)\n    reg_pl['year'] = year\n    return reg_pl","e6e9811c":"lang_2018 = lang_func(df_2018.iloc[:, 65:83], 2018)\nlang_2019 = lang_func(df_2019.iloc[:, 82:94], 2019)\nlang_2020 = lang_func(df.iloc[:, 7:20], 2020)\nlang = pd.concat([lang_2018, lang_2019, lang_2020])\nlang_2017 = pd.DataFrame({'lang': lang['lang'].unique(), \n                          'count': np.zeros(len(lang['lang'].unique())),\n                          'perc': np.zeros(len(lang['lang'].unique())),\n                          'year' : 2017})\nlang = pd.concat([lang_2017, lang])\nlang = lang.sort_values('perc', ascending = False)\n\nplt.figure(figsize=(10, 15))\nplt.title('Programming languages that respondents use on a regular basis by year', \n          size = 14, fontweight = 'bold', fontfamily = 'serif')\n\nsns.barplot(y = lang['lang'], x = lang['perc'], edgecolor = 'black',\n            hue = lang['year'],\n            palette = reversed(sns.color_palette(\"viridis\", 4)))\nplt.legend(loc = 'center right')\nplt.xlabel('Part of respondents (%)', fontfamily = 'serif')\nplt.ylabel('')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","32841151":"def recom_lang(data, year):\n    recomend_pl = data.value_counts().reset_index()\n    recomend_pl.columns = ['lang', 'count']\n    recomend_pl['perc'] = recomend_pl['count'] \/ len(data) * 100\n    recomend_pl = recomend_pl.sort_values('perc', ascending = False)\n    recomend_pl['year'] = year\n    return recomend_pl","f62d9a16":"recom_2017 = recom_lang(df_2017.LanguageRecommendationSelect, 2017)\nrecom_2018 = recom_lang(df_2018.Q18, 2018)\nrecom_2019 = recom_lang(df_2019.Q19, 2019)\nrecom_2020 = recom_lang(df.Q8, 2020)\nrecom = pd.concat([recom_2017, recom_2018, recom_2019, recom_2020])\nrecom = recom.sort_values('perc', ascending = False)\n\nplt.figure(figsize=(10, 15))\nplt.title('Programming languages that respondents recommend to learn first by year', \n          size = 14, fontweight = 'bold', fontfamily = 'serif')\n\nsns.barplot(y = recom['lang'], x = recom['perc'], edgecolor = 'black',\n            hue = recom['year'],\n            palette = reversed(sns.color_palette(\"viridis\", 4)))\nplt.legend(loc = 'center right')\nplt.xlabel('Part of respondents (%)', fontfamily = 'serif')\nplt.ylabel('')\nplt.xticks(fontfamily = 'serif')\nplt.yticks(fontfamily = 'serif')\nplt.show()","3abfc4f7":"It looks like the average data analyst's salary is one of the lowest :(","5d75bf74":"The salary rises depending on age. It looks logical.","9e123f73":"## **Work in progress...**","90c4a4d6":"There is a clear dependence between academic degree and salary size.","2ba9f163":"Now, we'll look at time changes in some relations.","2ced0112":"As expected, Python is the best programming language :)\n\nMy favorite R comes second.","ecdf5dc8":"There are a lot of relations that we can find in this data. Let's look at some of them.","64ae5edd":"# A first look at the data","6c1463eb":"The importance of Python as the most recommended programming language increases every year.","70ea9619":"# **Kaggle Data Science & Machine Learning Survey**\n![Kaggle](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/7\/7c\/Kaggle_logo.png)\n\nHi! I'm glad to see you here! \n\nLet's try to find some interesting relations in this data. Also, we'll look at the data from past years, and compare them.\n\n### **Past datasets:**\n**2017:** [https:\/\/www.kaggle.com\/kaggle\/kaggle-survey-2017](https:\/\/www.kaggle.com\/kaggle\/kaggle-survey-2017)\n\n**2018:** [https:\/\/www.kaggle.com\/kaggle\/kaggle-survey-2018](https:\/\/www.kaggle.com\/kaggle\/kaggle-survey-2018)\n\n**2019:** [https:\/\/www.kaggle.com\/c\/kaggle-survey-2019\/data](https:\/\/www.kaggle.com\/c\/kaggle-survey-2019\/data)","5794ad7e":"Salary in big companies is higher that also looks logical.","48b54fd2":"# 2017-2020: changes in relations","fde48d5e":"Then let's look at the salary distribution.","58bd9fbc":"As with a degree, experience is positively correlated with salary.","46f75ce7":"The absolute domination of India :)","41be990a":"Let's look at the programming languages that respondents use on a regular basis.","fbdfa517":"Almost all columns have NaN values.","6b9e3c7c":"It is interesting to analyze the distribution of salaries according to different criteria.","46b5928b":"# DATA 2020 EDA"}}