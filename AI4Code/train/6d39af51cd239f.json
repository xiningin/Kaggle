{"cell_type":{"405aeb3c":"code","49e2cf47":"code","666dfcf7":"code","72278721":"code","d1070dc5":"code","52678a6f":"code","c763ee01":"code","bfc055bc":"code","e7f01f84":"code","4b4e7c2c":"code","5627c37b":"code","6843fc4a":"code","860b9468":"code","6fcb3ba7":"code","41fce360":"code","1e0efa7c":"code","a19961eb":"code","3adbe20b":"code","7b2ccce5":"code","14454b8c":"markdown","5ad004f6":"markdown","f0a80faa":"markdown","17a4bd13":"markdown","21175a88":"markdown","69d71a11":"markdown"},"source":{"405aeb3c":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\ndf = pd.read_csv(\"..\/input\/customer-personality-analysis\/marketing_campaign.csv\",delimiter='\\t')\ndf.head()","49e2cf47":"#Add age column,combine children at home into one.\ndf[\"Childhome\"] = df[\"Kidhome\"] + df[\"Teenhome\"]\n\n# Add age colum\ndf[\"Age\"] = 2021 - df[\"Year_Birth\"]\n\n# drop age older than 70\ndf = df[df.Age <70]\n\n#drop income higher than 150000\ndf = df[df.Income <150000]","666dfcf7":"\n#drop redundant columns\ndf.drop(columns=[\"ID\",'AcceptedCmp3', 'AcceptedCmp4', 'AcceptedCmp5', 'AcceptedCmp1',\n       'AcceptedCmp2',\"Z_CostContact\",\"Z_Revenue\",\"Response\",\"Year_Birth\",\"Kidhome\",\"Teenhome\"],axis=1,inplace=True)","72278721":"df.loc[(df.Marital_Status == 'Alone') | (df.Marital_Status ==\"YOLO\") | (df.Marital_Status ==\"Absurd\"),'Marital_Status']='Single'","d1070dc5":"# combine all purchase quantity into one column\nbuy = [\"MntWines\",\"MntFruits\",\"MntMeatProducts\",\"MntFishProducts\",\"MntSweetProducts\",\"MntGoldProds\"]\nfor item in buy:\n    df[\"Totalbuy\"] =+ df[item]\n    df.drop(columns=[item],axis=1,inplace=True)\ndf","52678a6f":"#Check customers age group\nplt.figure(figsize=(17,9))\nsns.countplot(x=\"Age\",data = df)","c763ee01":"plt.figure(figsize=(17,9))\nsns.countplot(x=\"Childhome\",data=df)","bfc055bc":"df[\"Education\"].value_counts().plot(kind=\"bar\",color=[\"r\",\"g\",\"purple\"],figsize=(10,8))\nplt.xlabel(\"Education\",weight=\"bold\",fontsize=12)\nplt.ylabel(\"Number of customers\",weight=\"bold\",fontsize=12)\nplt.title(\"Customer Education Background\",fontsize=\"20\",weight=\"bold\")","e7f01f84":"plt.figure(figsize=(15,9))\nsns.boxplot(x=\"Education\",y=\"Age\",data = df)","4b4e7c2c":"plt.figure(figsize=(11,7))\nsns.countplot(x=df[\"Marital_Status\"])\nplt.xticks(fontsize=11)\nplt.yticks(fontsize=11)\nplt.ylabel(\"Counts\",fontsize=17)\nplt.xlabel(\"Marital Status\",fontsize=17)\nplt.title(\"Customers Per Marital Status\",fontsize=22)","5627c37b":"df.drop(df[df.Age > 80].index, inplace=True) #drop age over 80\n\nsns.lmplot(x=\"Age\",y=\"Income\",data = df,hue=\"Education\",height=12)\nplt.xlabel(\"Age\",weight=\"bold\",fontsize=20)\nplt.ylabel(\"Income\",weight=\"bold\",fontsize=20)","6843fc4a":"plt.figure(figsize=(15,11))\nsns.scatterplot(x=\"Education\",y=\"Income\",data = df)\nplt.xlabel(\"Education\",weight=\"bold\",fontsize=20)\nplt.ylabel(\"Income\",weight=\"bold\",fontsize=20)\nplt.title(\"Correlation: income vs education\",weight=\"bold\",fontsize=25)","860b9468":"plt.figure(figsize=(14,9))\nsns.barplot(x=\"Education\",y=\"Totalbuy\",data = df)","6fcb3ba7":"sns.lmplot(x=\"Income\",y=\"Totalbuy\",data = df,height=13,hue=\"Childhome\")","41fce360":"plt.figure(figsize=(15,9))\nsns.boxplot(x=\"Childhome\",y=\"Income\",data = df)","1e0efa7c":"plt.figure(figsize=(15,9))\nsns.boxplot(x=\"Childhome\",y=\"Totalbuy\",data = df)","a19961eb":"plt.figure(figsize=(7,7))\nlabels = \"No\",\"Yes\"\nplt.pie(df[\"Complain\"].value_counts(),labels=labels,)\nplt.title(\"Complains\",fontsize=22)\nplt.tight_layout()\nplt.show()","3adbe20b":"dealbuy = df[\"NumDealsPurchases\"].sum()\nwebbuy = df[\"NumWebPurchases\"].sum()\ncatbuy = df[\"NumCatalogPurchases\"].sum()\nstorebuy = df[\"NumStorePurchases\"].sum()\n\nplt.figure(figsize=(10,10))\nexplode = (0, 0, 0, 0.1)  # only \"explode\" the 2nd slice \n\nlst = [dealbuy,webbuy,catbuy,storebuy]\nlabels = \"NumDealsPurchases\",\"NumWebPurchases\",\"NumCatalogPurchases\",\"NumStorePurchases\"\nplt.pie(lst,labels = labels,autopct='%1.1f%%',shadow=True,explode=explode)\nplt.title(\"Total purchses per Channel\",fontsize=21)\nplt.show() \n","7b2ccce5":"channel = [\"NumDealsPurchases\",\"NumWebPurchases\",\"NumCatalogPurchases\",\"NumStorePurchases\",\"NumWebVisitsMonth\"]\n\nfor itm in channel:\n    fig, ax = plt.subplots(figsize=(14,9))\n    bar = df.groupby(itm).size().plot(kind='bar', ax=ax)","14454b8c":"Most cutomers are middle age.","5ad004f6":"Customers with more children at home have lower income.","f0a80faa":"Very few customers hvae 3 children at home, mostly single or with 1 child at home.","17a4bd13":"Higher education correlated higher income,people with more money spend more.","21175a88":"People with basic education background earn least, while those with 2n Cycle degree increase income more apparently when they get older(or gain more experience).","69d71a11":"The higher income customers have(fewer children at home), the more the customers spend."}}