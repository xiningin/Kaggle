{"cell_type":{"3e37908f":"code","2f2846f8":"code","b0a6013b":"code","bfb04700":"code","39613fc5":"code","a753e65d":"code","15528271":"code","2e8d9f96":"code","eb1b82aa":"code","2ca407d1":"code","d046575c":"code","57a9421d":"code","cf0506b6":"code","dcbe990f":"code","4509cad8":"code","33e7302f":"code","835c2b05":"code","a0e296ed":"code","fe53d25d":"code","6c255a78":"code","a7a6b736":"code","ff3ba9b2":"code","f7a5e98e":"code","2ed21eaa":"code","0146107c":"markdown","71fa1c36":"markdown","d3e44156":"markdown","a857d1ad":"markdown","acd7b68a":"markdown"},"source":{"3e37908f":"import numpy as np\nimport pandas as pd","2f2846f8":"df = pd.read_csv('..\/input\/covid19-case-surveillance-public-use-dataset\/COVID-19_Case_Surveillance_Public_Use_Data.csv')\ndf.shape","b0a6013b":"df.head(10)","bfb04700":"print(df['death_yn'].value_counts(dropna=False))","39613fc5":"df = df.loc[((df.death_yn != 'Missing') & (df.death_yn != 'Unknown'))]\ndf.reset_index(drop=True, inplace=True)\ndf.shape","a753e65d":"def NaN_info(df):\n    global null_view\n    try:\n        null_view = df[[col for col in df.columns if df[col].isna().sum() > 0]].isna().sum().sort_values(ascending = True)\n        null_view = pd.DataFrame(null_view, columns=['NANs'])\n        null_view[['PERCENT']] = null_view.NANs.apply(lambda x: round((x\/len(df))*100, 2))\n        null_view[['TYPE']] = df.dtypes\n    except:\n        return null_view\n    return null_view\n\nNaN_info(df)","15528271":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nplt.figure(figsize=(20, 50))\nsns.heatmap(df.isnull(), cbar=False)","2e8d9f96":"df = df.dropna(subset=['Race and ethnicity (combined)', 'sex', 'age_group'], how='any')\ndf.reset_index(drop=True, inplace=True)\ndf.shape","eb1b82aa":"NaN_info(df)","2ca407d1":"for el in list(df.columns):\n    print(f'======================= {el} =======================')\n    print(df[el].value_counts(dropna=False))\n    print('')","d046575c":"df['symptomatic_yn'] = np.where(df.onset_dt.isnull(), 'No', 'Yes')\ndf[0:10][['symptomatic_yn','onset_dt']]","57a9421d":"df['tested_yn'] = np.where(df[['pos_spec_dt']].isnull(), 'No', 'Yes')\ndf[:][['tested_yn','pos_spec_dt']]","cf0506b6":"df['month'] = pd.DatetimeIndex(df['cdc_report_dt']).month\ndf['month'].value_counts(dropna=False)","dcbe990f":"print(df.age_group.unique())","4509cad8":"change={\n        '0 - 9 Years': 10,\n        '10 - 19 Years': 20,\n        '20 - 29 Years': 30,\n        '30 - 39 Years': 40,\n        '40 - 49 Years': 50,\n        '50 - 59 Years': 60,\n        '60 - 69 Years': 70,\n        '70 - 79 Years': 80,\n        '80+ Years': 90\n        }\n\ndf['decades_of_age(less_than)'] = df['age_group'].map(change)\ndf[55:65][['decades_of_age(less_than)','age_group']]","33e7302f":"NaN_info(df)","835c2b05":"df = df.dropna(subset=['decades_of_age(less_than)'], how='any')\ndf.reset_index(drop=True, inplace=True)\ndf.shape","a0e296ed":"target_column = ['death_yn']\npredictors = list(set(list(df.columns))-set(target_column))","fe53d25d":"sns.set(font_scale=1.5)\n\nfor el in predictors:\n    plt.figure(figsize=(20, 10))\n    plot_data = df[['death_yn', el]]\n    try:\n        sns.countplot(x=el, hue='death_yn', data=plot_data, palette='Set1')\n    except:\n        pass","6c255a78":"plt.figure(figsize=(20, 10))\nplot_data = df[['death_yn', 'decades_of_age(less_than)']]\n\ng = sns.pairplot(plot_data, hue='death_yn', palette='Set1', height=10, aspect=2)\n\nhandles = g._legend_data.values()\nlabels = g._legend_data.keys()\ng.fig.legend(handles=handles, labels=labels, loc='upper center', ncol=1)","a7a6b736":"plt.figure(figsize=(20, 10))\nplot_data = df[['death_yn', 'month']]\n\ng = sns.pairplot(plot_data, hue='death_yn', palette='Set1', height=10, aspect=2)\n\n\nhandles = g._legend_data.values()\nlabels = g._legend_data.keys()\ng.fig.legend(handles=handles, labels=labels, loc='upper center', ncol=1)","ff3ba9b2":"df.columns","f7a5e98e":"plt.figure(figsize=(20, 20))\nplot_data = pd.DataFrame(df.loc[:, 'decades_of_age(less_than)'])\nplt.plot(plot_data.index, plot_data[['decades_of_age(less_than)']], label=\"Age\")","2ed21eaa":"plt.figure(figsize=(20, 20))\nplt.scatter(plot_data.index, plot_data[['decades_of_age(less_than)']], label=\"Age\")","0146107c":"# Data overview, cleaning and preprocessing","71fa1c36":"# Drop rows with missing target values (Unknown, Missing)","d3e44156":"# Remove some NaNs in [Race and ethnicity, sex, age_group]","a857d1ad":"# Feature Engineering","acd7b68a":"# Is this synthetic data?"}}