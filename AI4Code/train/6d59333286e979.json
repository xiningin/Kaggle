{"cell_type":{"0b2de9cf":"code","7163cdc4":"code","c6932ea4":"code","e97860ca":"code","8729cb89":"code","31b6189a":"code","ebe0fc1f":"code","77cd23d7":"code","2735cd0e":"code","665bdae7":"code","f8832d7a":"code","75bf6db9":"code","84105642":"code","7a302891":"code","8cef8455":"code","da486370":"code","b19a1b3a":"code","eafb10c2":"code","da517a94":"code","6d191af2":"code","3878025f":"markdown","f6a3ccbb":"markdown","38236fa2":"markdown","4976ed92":"markdown","bf492874":"markdown","94629f79":"markdown","8555e7f9":"markdown","89c13cdb":"markdown","315c1436":"markdown","095a93ac":"markdown","0c80ba75":"markdown","8764885b":"markdown","05ea2ad2":"markdown","6500d350":"markdown","b99f9f83":"markdown","55670d6a":"markdown","93daaee2":"markdown","c7b75dcf":"markdown","983c1d94":"markdown","54facf42":"markdown"},"source":{"0b2de9cf":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style(\"darkgrid\")","7163cdc4":"df = pd.read_csv(\"\/kaggle\/input\/london-bike-sharing-dataset\/london_merged.csv\")\ndf.head()","c6932ea4":"df.timestamp = pd.to_datetime(df.timestamp)\ndf.timestamp[0].month","e97860ca":"df.info()","8729cb89":"df.describe()","31b6189a":"df.timestamp.diff().mean()","ebe0fc1f":"df.timestamp.describe()","77cd23d7":"plt.figure(figsize=(10,7))\nsns.distplot(df.cnt,label=\"Bike Share Distribution\")\nmean_share = df.cnt.mean()\nplt.plot([mean_share,mean_share],[0,0.0012],\"-\",linewidth=5,label=\"Average # of Bike Share\")\nplt.text(mean_share+100,0.001201,int(mean_share),fontweight=\"bold\",fontsize=12)\nplt.legend()","2735cd0e":"df.groupby(pd.Grouper(key=\"timestamp\",freq=\"1M\")).sum()[\"cnt\"].plot()","665bdae7":"sns.pairplot(df.sample(frac=0.05))","f8832d7a":"corrs = abs(df.corr())\n\nfig = plt.figure(figsize=(10,8))\nsns.heatmap(corrs,annot=True)","75bf6db9":"weather_lookup = {\n1 : \"Clear\",\n2 : \"Scattered clouds\",\n3 : \"Broken clouds\",\n4 : \"Cloudy\",\n7 : \"Rain\",\n10 : \"Rain with thunderstorm\",\n26 : \"Snowfall\",\n94 : \"Freezing Fog\"}\n\nweather_counts = df.weather_code.value_counts()\nweather_counts.index = [weather_lookup[i] for i in weather_counts.index]\nweather_counts.plot(kind=\"pie\",autopct=\"%.0f%%\")\nplt.ylabel(\"\")\nplt.title(\"Weather Type Distribution\",fontweight=\"bold\")","84105642":"plt.axhline(y=mean_share,linewidth=5,c=\"deepskyblue\",label=\"Mean\")\nsns.barplot(x=\"is_holiday\",y=\"cnt\",data=df)\nplt.legend()","7a302891":"temps = pd.qcut(df.t1,10)\nsns.barplot(y=temps,x=\"cnt\",data=df,orient=\"h\")\nplt.axvline(x=mean_share,label=\"Mean\",c=\"deepskyblue\")\nplt.legend()","8cef8455":"hums = pd.qcut(df.hum,10)\nsns.barplot(y=hums,x=\"cnt\",data=df,orient=\"h\")\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","da486370":"winds = pd.qcut(df.wind_speed,10)\nsns.barplot(y=winds,x=\"cnt\",data=df,orient=\"h\")\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","b19a1b3a":"#first replace values with the categorical names in the weather_code column\ndf.weather_code.replace({\n1 : \"Clear\",\n2 : \"Scattered clouds\",\n3 : \"Broken clouds\",\n4 : \"Cloudy\",\n7 : \"Rain\",\n10 : \"Rain with thunderstorm\",\n26 : \"Snowfall\",\n94 : \"Freezing Fog\"},inplace=True)\n\nsns.barplot(y=\"weather_code\",x=\"cnt\",data=df,orient=\"h\",\n            order=[\"Clear\",\"Scattered clouds\",\"Broken clouds\",\"Cloudy\",\"Rain\",\"Rain with thunderstorm\",\"Snowfall\",\"Freezing Fog\"])\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","eafb10c2":"df.is_holiday.replace({1:\"Holiday\",0:\"Workday\"},inplace=True)\nsns.barplot(x=\"cnt\",y=\"is_holiday\",data=df,orient=\"h\")\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","da517a94":"df.is_weekend.replace({1:\"Weekend\",0:\"Weekday\"},inplace=True)\nsns.barplot(x=\"cnt\",y=\"is_weekend\",data=df,orient=\"h\")\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","6d191af2":"df.season.replace({0:\"Spring\",1:\"Summer\",2:\"Fall\",3:\"Winter\"},inplace=True)\nsns.barplot(y=\"season\",x=\"cnt\",data=df,orient=\"h\",order=[\"Spring\",\"Summer\",\"Fall\",\"Winter\"])\n\nplt.axvline(x=mean_share,c=\"deepskyblue\",label=\"Mean\")\nplt.legend()","3878025f":"Import necessary packages","f6a3ccbb":"And, wind speeds are gathered into 10 closely sized groups, and group relation with the target value is visualised:\n\n> Even though there was no correlation appeared in the pairplot, surprisingly wind speed seems to be **positively** correlated with the target variable","38236fa2":"Let's make 10 weather temperature groups and calculate each group's average bike sharing counts:\n\n* When temperature increases, bike sharing increases (positive correlation)\n* Bike sharing increases drammatically when temperature is above 17 degrees\n* No difference was observed when t1 is changed with t2","4976ed92":"It covers a two year period between 4\/1\/2015 and 3\/1\/2017","bf492874":"This kernel provides predictive analytics on the Bike Sharing dataset. \n\nDataset info:\n\n\"**timestamp**\" - timestamp field for grouping the data\n\n\"**cnt**\" - the count of a new bike shares\n\n\"**t1**\" - real temperature in C\n\n\"**t2**\" - temperature in C \"feels like\"\n\n\"**hum**\" - humidity in percentage\n\n\"**windspeed**\" - wind speed in km\/h\n\n\"**weathercode**\" - category of the weather\n\n\"**isholiday**\" - boolean field - 1 holiday \/ 0 non holiday\n\n\"**isweekend**\" - boolean field - 1 if the day is weekend\n\n\"**season**\" - category field meteorological seasons: 0-spring ; 1-summer; 2-fall; 3-winter.\n\n\n\n\"weather_code\" category description:\n1 = Clear ; mostly clear but have some values with haze\/fog\/patches of fog\/ fog in vicinity \n2 = scattered clouds \/ few clouds \n3 = Broken clouds \n4 = Cloudy \n7 = Rain\/ light Rain shower\/ Light rain \n10 = rain with thunderstorm \n26 = snowfall \n94 = Freezing Fog","94629f79":"Calculate correlation (absolute) between parameters and display with a heatmap. Since we will think number of bike share as our target, let's see which parameters are correlated more","8555e7f9":"Let's now visualise the the correlation between the parameters using Seaborn's pairplot. The diagonal line shows each parameter's distribution in a histogram chart while the rest visualise correlations in scatter chart. For speeding up the calculations and plotting as well as a better correlation visibility, we will use 5% of the randomly sampled chunk of the data for pairplot. Some of the initial findings are:\n\n* As expected, the real and felt temperature are highly correlated\n* Negative correlation between temperature and humidity\n* Positive correlation between temperature and bike share count\n* Negative correlation between humidity and bike share count","89c13cdb":"In term of seasons; summers have the highest number of bike sharing, and sharing numbers decline as it gets colder ","315c1436":"Time difference between observations are **1 hour**, in average","095a93ac":"Lets plot monthly counts of bike shares within 2 years period. Summer shares are significantly higher as compared to winter as expected","0c80ba75":"There are over 17K samples, no missing data, summary stats of the numeric variables:","8764885b":"Similarly, humidity values are gathered into 10 equally sized groups, and group relation with the target value is visualised:\n\n> Humidity is **negatively** correlated with bike share","05ea2ad2":"### Predictive Analytics\n\nXGBosst regression codes will be added here in the future commits","6500d350":"Load the dataset","b99f9f83":"As the weather code gets rainier and colder, the number of bike shares tend to decline","55670d6a":"People tend to share bikes on the commuting, working days more than the holidays","93daaee2":"## Feature & Target relationships\n\n\n> From this point on the variable which gives the number of bike shares per hour (*cnt*) will be our **target** variable.\n\nLet's see how is the relationship between the target and other features. Maybe we can generate some new features using the columns. People tend to share bikes more on the non-holiday period. However note that population size difference between the two groups is enormous.","c7b75dcf":"Similarly, people tend to use bike sharing during the weekdays","983c1d94":"Convert timestamp column to datetime object","54facf42":"Let's make a look up table for weather codes and visualise the distribution of weather types:\n\n* Weather is 51% of  cloudy (scattered, broken or just cloudy)\n* 1\/3 of a time it is clear sky\n* Almost no days with snow or thunderstorm\n"}}