{"cell_type":{"1717ada6":"code","e015a54d":"code","120c2305":"code","5cf59fa4":"code","69383535":"code","28705973":"code","91bf9009":"code","5613495c":"code","5507161b":"code","f6114c2e":"code","ec163776":"code","cf363b96":"markdown","3b202524":"markdown","ba25d5f3":"markdown","9b94b6d6":"markdown","f2697da6":"markdown","0d6b56e6":"markdown"},"source":{"1717ada6":"import pandas as pd\nimport librosa\nimport librosa.display\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport soundfile as sf\nimport IPython\nfrom tqdm.notebook import tqdm\nimport os","e015a54d":"# \u30c7\u30fc\u30bf\u8aad\u8fbc\u307f\ndf_train = pd.read_csv('\/kaggle\/input\/hah-data-science-challenge\/train.csv', index_col=False)\ndf_test = pd.read_csv('\/kaggle\/input\/hah-data-science-challenge\/test.csv', index_col=False)\ndf_labeled = df_train[df_train.Target.isnull()==False]","120c2305":"# \u74b0\u5883\u97f3\u3068\u6253\u97f3\u306b\u5206\u3051\u308b\u95a2\u6570 (\u5206\u96e2\u5f8c\u306e\u97f3\u58f0\u306e\u51fa\u529b\u3042\u308a)\ndef hpss_sound(filepath):\n    y, sr = librosa.load(filepath)\n    y_harm, y_perc = librosa.effects.hpss(y)\n\n    # Plot\n    plt.subplot(3,1,1)\n    plt.plot(y)\n    plt.title(\"Original signal\")\n\n    plt.subplot(3,1,2)\n    plt.plot(y_harm)\n    plt.title(\"Harmonic signal\")\n\n    plt.subplot(3,1,3)\n    plt.plot(y_perc)\n    plt.title(\"Percussive signal\")\n\n    plt.tight_layout()\n    plt.show()\n    \n    # \u6253\u97f3\u3060\u3051\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u51fa\u529b\n    sf.write(\"\/kaggle\/working\/sound_perc.wav\", y, sr, subtype=\"PCM_16\")","5cf59fa4":"# 1\u30d5\u30a1\u30a4\u30eb\u3067\u78ba\u8a8d\nfilepath = '\/kaggle\/input\/hah-data-science-challenge\/train\/train\/train0.wav'\nprint(filepath)\nprint(\"\u30aa\u30ea\u30b8\u30ca\u30eb\u97f3\u6e90\")\nIPython.display.Audio(filepath)","69383535":"# \u97f3\u58f0\u3092\u5206\u96e2\nhpss_sound(filepath)\nprint(\"\u6253\u97f3\u306e\u307f\u5206\u96e2\u3057\u305f\u97f3\u58f0\")\nIPython.display.Audio(\".\/sound_perc.wav\")","28705973":"# \u30bb\u30df\u306e\u97f3\u304c\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u78ba\u8a8d\nfilepath = '\/kaggle\/input\/hah-data-science-challenge\/train\/train\/train969.wav'\nprint(filepath)\nprint(\"\u30aa\u30ea\u30b8\u30ca\u30eb\u97f3\u6e90\")\nIPython.display.Audio(filepath)","91bf9009":"# \u30bb\u30df\u306e\u97f3\u304c\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u97f3\u58f0\u5206\u96e2\nhpss_sound(filepath)\nprint(\"\u6253\u97f3\u306e\u307f\u5206\u96e2\u3057\u305f\u97f3\u58f0\")\nIPython.display.Audio(\".\/sound_perc.wav\")","5613495c":"# \u74b0\u5883\u97f3\u3068\u6253\u97f3\u306b\u5206\u3051\u308b\u95a2\u6570 (\u5206\u96e2\u5f8c\u306e\u97f3\u58f0\u306e\u51fa\u529b\u306a\u3057)\ndef hpss(filepath):\n    y, sr = librosa.load(filepath)\n    y_harm, y_perc = librosa.effects.hpss(y)\n\n    # Plot\n    plt.subplot(3,1,1)\n    plt.plot(y)\n    plt.title(\"Original signal\")\n\n    plt.subplot(3,1,2)\n    plt.plot(y_harm)\n    plt.title(\"Harmonic signal\")\n\n    plt.subplot(3,1,3)\n    plt.plot(y_perc)\n    plt.title(\"Percussive signal\")\n\n    plt.tight_layout()\n    plt.show()","5507161b":"# train \u306e wav \u30d5\u30a1\u30a4\u30eb\u3092\u5206\u96e2\nfilelist = filelist = ['\/kaggle\/input\/hah-data-science-challenge\/train\/train\/'+f for f in df_train.\u30d5\u30a1\u30a4\u30eb.values]\n\nfor i, filepath in enumerate(tqdm(filelist)):\n    filename = os.path.basename(filepath)\n    print(filename)\n    hpss(filepath)","f6114c2e":"# test \u306e wav \u30d5\u30a1\u30a4\u30eb\u3092\u5206\u96e2\nfilelist = filelist = ['\/kaggle\/input\/hah-data-science-challenge\/test\/test\/'+f for f in df_test.\u30d5\u30a1\u30a4\u30eb.values]\n\nfor i, filepath in enumerate(tqdm(filelist)):\n    filename = os.path.basename(filepath)\n    print(filename)\n    hpss(filepath)","ec163776":"# train(labeled) \u306e wav \u30d5\u30a1\u30a4\u30eb\u3092\u5206\u96e2\nfilelist = filelist = ['\/kaggle\/input\/hah-data-science-challenge\/train\/train\/'+f for f in df_labeled.\u30d5\u30a1\u30a4\u30eb.values]\n\nfor i, filepath in enumerate(tqdm(filelist)):\n    filename = os.path.basename(filepath)\n    print(filename)\n    hpss(filepath)","cf363b96":"\u30bb\u30df\u306e\u74b0\u5883\u97f3\u304c\u542b\u307e\u308c\u308b\u97f3\u58f0\u3082\u3001\u30b7\u30e3\u30fc\u30d7\u306b\u306a\u3063\u305f\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n\u6253\u97f3\u3060\u3051\u3067\u97f3\u58f0\u3092\u805e\u304d\u305f\u3044\u3067\u3059\u304c\u3001\u3061\u3087\u3063\u3068\u65b9\u6cd5\u304c\u5206\u304b\u3089\u305a\u3002\u3002","3b202524":"## \u5168\u30d5\u30a1\u30a4\u30eb\u306b\u9069\u7528\u3057\u3066\u78ba\u8a8d","ba25d5f3":"\u30b0\u30e9\u30d5\u4e0a\u306f\u30b7\u30e3\u30fc\u30d7\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u97f3\u58f0\u805e\u304f\u9650\u308a\u306f\u3061\u3087\u3063\u3068\u97f3\u304c\u5c0f\u3055\u304f\u306a\u3063\u305f\u304f\u3089\u3044\u304b\u3082\u3002","9b94b6d6":"\u4e0a\u304b\u3089\u9806\u756a\u306b\u3001\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n1. \u30aa\u30ea\u30b8\u30ca\u30eb\n1. \u8abf\u6ce2\u697d\u5668\uff08\u74b0\u5883\u97f3\u306e\u60f3\u5b9a\uff09\n1. \u6253\u697d\u5668\uff08\u6253\u97f3\u306e\u60f3\u5b9a\uff09\n\n\n\uff13\u3064\u76ee\u304c\u3084\u3084\u30b7\u30e3\u30fc\u30d7\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002","f2697da6":"## \u74b0\u5883\u97f3\u3068\u6253\u97f3\u306e\u5206\u96e2\n\n\u697d\u66f2\u306b\u306f\u3001\u8907\u6570\u306e\u697d\u5668\u306e\u97f3\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u697d\u66f2\u4fe1\u53f7\u306f\u8abf\u6ce2\u697d\u5668\u97f3\u3068\u6253\u697d\u5668\u97f3\u3092\u8db3\u3057\u5408\u308f\u305b\u305f\u69cb\u9020\u3067\u3042\u308b\u3068\u8003\u3048\u3001\u697d\u66f2\u4fe1\u53f7\u304b\u3089\u300c\u8abf\u6ce2\u697d\u5668\u97f3\u300d\u3068\u300c\u6253\u697d\u5668\u97f3\u300d\u3092\u63a8\u5b9a\u3067\u304d\u308b\u305d\u3046\u3067\u3059\u3002\n\n\u8981\u306f\u3001\u30d0\u30a4\u30aa\u30ea\u30f3\u306e\u3088\u3046\u306a\u97f3\u3068\u3001\u6253\u697d\u5668\u306e\u97f3\u3092\u5206\u96e2\u3067\u304d\u308b\u3068\u3002\n\nlibrosa \u306e\u3000HPSS\u3092\u5229\u7528\u3057\u3066\u3001\u74b0\u5883\u97f3\u3068\u6253\u97f3\u3092\u5206\u96e2\u3067\u304d\u306a\u3044\u304b\u30c8\u30e9\u30a4\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nHPSS (Hermonic\/Percussive Source Seperation)\n\n\u53c2\u8003\uff1a\u3000https:\/\/www.wizard-notes.com\/entry\/music-analysis\/hpss","0d6b56e6":"\u74b0\u5883\u97f3\u3092\u5206\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u7cbe\u5ea6\u3092\u4e0a\u3052\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002"}}