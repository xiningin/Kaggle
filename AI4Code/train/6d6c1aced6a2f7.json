{"cell_type":{"4f72a8ee":"code","9e72a6bd":"code","3adfc13c":"code","e5d178d3":"code","4e7c031b":"code","00935f6f":"code","26667b88":"code","87dd891d":"code","7ca63864":"code","5ed6bd98":"code","3a0e91fe":"code","43c777a4":"code","e8713b07":"code","5ecf0214":"code","198401be":"code","62adb20a":"code","b98b198e":"code","91814b0d":"code","f5e70e40":"code","4cf6d33a":"code","f5305905":"code","79695b8c":"code","5c45a332":"code","48d22c70":"code","ecf58429":"code","6eb8c520":"code","3b9c5974":"code","3eb5eefd":"code","d00e6b71":"code","450a3dbe":"code","d3aff854":"code","d3103f0d":"code","9ad0585e":"code","75eee36d":"code","bd210145":"code","cf712b08":"code","2969c33d":"code","f5fb0c93":"code","502a9238":"code","644efe75":"code","55c3933f":"markdown","819814ee":"markdown","a32947df":"markdown","d9193dd3":"markdown","24c3e06d":"markdown","5facdcba":"markdown","fc6eb25c":"markdown","8d6a5dca":"markdown","b606c655":"markdown","3b0a5d80":"markdown","52ef250a":"markdown","42fa87a2":"markdown","ca393af6":"markdown","7a59ef79":"markdown","0c288ae8":"markdown","dfc2fc2d":"markdown","53773285":"markdown","1ab4fa6e":"markdown","335d16a4":"markdown","d3eaa442":"markdown","3ececf28":"markdown","fec2901f":"markdown","6779a411":"markdown","bca1e16d":"markdown","827ebb64":"markdown"},"source":{"4f72a8ee":"# Import Libaries\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom sklearn.cluster import KMeans","9e72a6bd":"# Import Data\ndf=pd.read_csv(\"..\/input\/clicks-conversion-tracking\/KAG_conversion_data.csv\")\ndf.head()","3adfc13c":"df.info()","e5d178d3":"df.describe()","4e7c031b":"# Check for NULL values\ndf.isnull().sum()","00935f6f":"print(\"Number of Companies for campaign : \",len(df['xyz_campaign_id'].unique()))\nprint(\"Male to Female ratio : \", len(df[df['gender']=='M'])\/len(df[df['gender']=='F']))","26667b88":"# Click to Impression Ratio\n\ndf['clickToImpPer']=(df['Clicks']\/df['Impressions'])*100\ndf","87dd891d":"# Heatmap of the features. This shows how the features of our data depend on each other.\n\nplt.figure(figsize=(16,5))\nx=sns.heatmap(df[df.columns.difference(['ad_id','fb_campaign_id','xyz_campaign_id'], sort=False)].corr(),annot=True ,fmt=\".2f\", cmap=\"coolwarm\")","7ca63864":"# Plot for frequency of people in each age group\nplt.rcParams[\"figure.figsize\"] = [7.50, 3.50]\nplt.rcParams[\"figure.autolayout\"] = True\n\nfig, ax = plt.subplots()\n\ndf['age'].value_counts().plot(ax=ax, kind='bar', xlabel='age', ylabel='frequency')\nplt.show()","5ed6bd98":"# Plot for frequency of people of each gender\nplt.rcParams[\"figure.figsize\"] = [7.50, 3.50]\nplt.rcParams[\"figure.autolayout\"] = True\n\nfig, ax = plt.subplots()\n\ndf['gender'].value_counts().plot(ax=ax, kind='bar', xlabel='gender', ylabel='frequency')\nplt.show()","3a0e91fe":"# Grouping the data based on age and gender\ndf2 = df.groupby(['age','gender'],as_index=False)[['interest','Impressions','Spent','Total_Conversion','Clicks']].mean()\ndf2['clickToImpPer']=df2['Clicks']\/df2['Impressions']\ndf2","43c777a4":"# Plot for Click to Impression vs age\nsns.barplot(x=df2.age,y=df2.clickToImpPer,hue=df2.gender)\nplt.show()","e8713b07":"# Plot for Total Conversion vs age\nsns.barplot(x=df2.age,y=df2.Total_Conversion,hue=df2.gender)\nplt.show()","5ecf0214":"# Scatterplot showing Total Conversions vs Clicks for each age group\nsns.scatterplot(x = df['Clicks'], y = df['Total_Conversion'], hue=df[\"age\"])\nplt.show()","198401be":"# Overall Stats for each age group\ndf.groupby(['age'],as_index=False)[['interest','Impressions','Spent','Total_Conversion','Clicks']].mean()","62adb20a":"# Plot Total Conversions vs Clicks for each gender \nsns.scatterplot(x = df['Clicks'], y = df['Total_Conversion'], hue=df[\"gender\"], palette = ['black','red'])\nplt.show()","b98b198e":"# Overall Stats for each gender\ndf.groupby(['gender'],as_index=False)[['interest','Impressions','Spent','Total_Conversion','Clicks']].mean()","91814b0d":"# Group the data based on fb campaigh id\ndf3=df.groupby(\"fb_campaign_id\")[[\"interest\",\"Impressions\",\"Spent\",\"Total_Conversion\",\"Clicks\",\"clickToImpPer\"]].mean()","f5e70e40":"from sklearn.preprocessing import StandardScaler\nscaled = StandardScaler()\nscaled_features = scaled.fit_transform(df3.values)","4cf6d33a":"# Standard Scaling the data\ndf3=pd.DataFrame(scaled_features)\ndf3 = df3.rename(columns = {0:'interest',1:'Impressions',2:'Spent',3:'Total_Conversion',4:\"Clicks\",5:\"clickToImpPer\"})\ndf3","f5305905":"# Elbow Method\n\ndistortions = []\nK = range(1,6)\nfor k in K:\n    kmeanModel = KMeans(n_clusters=k)\n    kmeanModel.fit(scaled_features)\n    distortions.append(kmeanModel.inertia_)","79695b8c":"plt.figure(figsize=(16,8))\nplt.plot(K, distortions, 'bx-')\nplt.xlabel('k')\nplt.ylabel('Distortion')\nplt.title('The Elbow Method showing the optimal k')\nplt.show()","5c45a332":"# Clustering using K-Means \n\nmodel = KMeans(n_clusters=2)\nmodel.fit(scaled_features)\ndf3['cluster'] = model.predict(scaled_features)","48d22c70":"sns.pairplot(df3,hue='cluster')\nplt.show()","ecf58429":"# All the datapoints in 0th cluster\ndf3[df3[\"cluster\"]==0]","6eb8c520":"# Box plot for Click to Impression ratio vs age\nsns.boxplot(x = df['age'], y = df['clickToImpPer'])\nplt.show()","3b9c5974":"# Box plot for Click to Impression ratio vs Gender\nsns.boxplot(x = df['gender'], y = df['clickToImpPer'])\nplt.show()","3eb5eefd":"# Box plot for Click to Impression ratio vs age for each gender\nsns.boxplot(x = df['age'], y = df['clickToImpPer'], hue=df[\"gender\"])\nplt.show()","d00e6b71":"# Group the data based on age groups\ndf4 = df.groupby(['age'],as_index=False)[['interest','Impressions','Spent','Total_Conversion','Clicks',\"Approved_Conversion\"]].mean()\ndf4['clickToImpPer']=df4['Clicks']\/df4['Impressions']\ndf4","450a3dbe":"# Plot for Click to Impression ratio vs age\nsns.barplot(x = df4['age'], y = df4['clickToImpPer'])\nplt.show()","d3aff854":"# Plot for Total Conversion vs age\nsns.barplot(x = df4['age'], y = df4['Total_Conversion'])\nplt.show()","d3103f0d":"# Plot for Approved Conversions vs age\nsns.barplot(x = df4['age'], y = df4['Approved_Conversion'])\nplt.show()","9ad0585e":"# Group the data based on xyz_campaign id\ntempdf=df.groupby(['xyz_campaign_id'],as_index=False)[['interest','Impressions','Spent','Total_Conversion','Clicks',\"Approved_Conversion\"]].mean()\ntempdf['clickToImpPer']=tempdf['Clicks']\/tempdf['Impressions']\ntempdf","75eee36d":"# Plot for Click to Impression ratio vs Expenditure for Company 1\nsns.scatterplot(x=df[df[\"xyz_campaign_id\"]==916][\"Spent\"],y=df[df[\"xyz_campaign_id\"]==916][\"clickToImpPer\"])\nplt.show()","bd210145":"# Plot for Click to Impression ratio vs Expenditure for Company 2\nsns.scatterplot(x=df[df[\"xyz_campaign_id\"]==936][\"Spent\"],y=df[df[\"xyz_campaign_id\"]==936][\"clickToImpPer\"])\nplt.show()","cf712b08":"# Plot for Click to Impression ratio vs Expenditure for Company 3\nsns.scatterplot(x=df[df[\"xyz_campaign_id\"]==1178][\"Spent\"],y=df[df[\"xyz_campaign_id\"]==1178][\"clickToImpPer\"])\nplt.show()","2969c33d":"# Plot for CLick to Impression ratio vs xyz_campaign_id\nsns.barplot(x = tempdf['xyz_campaign_id'], y = tempdf['clickToImpPer'])\nplt.show()","f5fb0c93":"# Plot for Total Conversions per Click for each Company\nax = sns.barplot(x = tempdf['xyz_campaign_id'], y = tempdf['Total_Conversion']\/tempdf[\"Clicks\"])\nax.set(xlabel='xyz_campaign_id', ylabel='Total Conversions per Click')\nplt.show()","502a9238":"ax = sns.barplot(x = tempdf['xyz_campaign_id'], y = tempdf['clickToImpPer']\/tempdf['Spent'])\nax.set(xlabel='xyz_campaign_id', ylabel='Click to Impression per Expenditure')\nplt.show()","644efe75":"ax = sns.barplot(x = tempdf['xyz_campaign_id'], y = tempdf['Total_Conversion']\/tempdf['Spent'])\nax.set(xlabel='xyz_campaign_id', ylabel='Total Conversions per Expenditure')\nplt.show()","55c3933f":"## Conclusion:\n-  The Click to Impression ratio is more for the age group of 45-49. It means they click more often on the ads than other age groups.\n-  Althought people in age group 30-34 have less click to impression ratio but they have high total conversions. It means they enquire more about the products than any other age groups.\n-  The age group 30-34 have high approved conversions than other age groups, i.e, they buy more products than other people.","819814ee":"----","a32947df":"## 3. Understanding the ideal turnaround\/decision making time per age group to convert and retarget future social campaigns","d9193dd3":"#### The number of males and females are almost equal ","24c3e06d":"## Questions:\n\n- How to optimize the social ad campaigns for the highest conversion rate possible. (Attain best Reach to Conversion ratios\/Click to Conversion ratios)\n\n- Finding the perfect target demographics with the appropriate clickthrough rates\n\n- Understanding the ideal turnaround\/decision making time per age group to convert and retarget future social campaigns\n\n- Comparing the individual campaign performance so the best creative\/campaign can be run again with adjusted audiences.","5facdcba":"## Data Analysis","fc6eb25c":"## 2. Finding the perfect target demographics with the appropriate clickthrough rates.","8d6a5dca":"#### People in age group 45-49 have higher Click to Impression ratio, that is they click on the ads more than any other age group and females of each age group have higher Click to Impression ratio than their male counterparts","b606c655":"## Conclusion: \n-  Cluster 1 i.e. the orange cluster are the facebook ad campaigns which are already optimised. Thus, we need to optimize the ad campaigns of cluster 0 i.e. the blue cluster. We can clearly see orange cluster is preforming better than the blue cluster here.\n-  These ad camapigns of cluster 0 can be optimised to give better click to conversion ratio","3b0a5d80":"##### People in age group 30-34 have more total conversion per clicks than any other age group","52ef250a":"#### For Males the Total conversion per clicks is high than Females","42fa87a2":"----","ca393af6":"----","7a59ef79":"#### Clickthrough rate: ClickToImpPer = Clicks\/Impression","0c288ae8":"----","dfc2fc2d":"## 4. Comparing the individual campaign performance so the best creative\/campaign can be run again with adjusted audiences.","53773285":"----","1ab4fa6e":"## 1. How to optimize the social ad campaigns for the highest conversion rate possible? (Attain best Reach to Conversion ratios\/Click to Conversion ratios)","335d16a4":"#### Using the elbow method we can clearly see that the optimal number of clusters are 2","d3eaa442":"#### Company id:\n- ##### Company 1: 916\n- ##### Company 2: 936\n- ##### Company 3: 1178","3ececf28":"## Import Libraries and Data","fec2901f":"## Conclusion:\n-  The total number of conversions for Company 3 is more. This is because it has relatively very high number of datapoints.\n-  The click to impression ratio is higher for Company 2.\n-  For Company 1 the total conversions per expenditure, click to impression ratio per expenditure and total conversions per click is higher that other.\n-  Therefore, Company 1 has the best campaign performance.","6779a411":"## Conclusion:\n##### The target group of people with higher clickthrough rates are:\n- Females in age group 45-49\n- Females in age group 40-44","bca1e16d":"#### Age group 30-34 has higher clicks to conversion ratio than any other group","827ebb64":"----"}}