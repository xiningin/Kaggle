{"cell_type":{"9cd9a614":"code","6bffb11a":"code","948ec19f":"code","546dda4d":"code","f252ef6d":"code","2713a66a":"code","1c2f0e81":"code","2f99a065":"code","0e707836":"code","a0b8bcbb":"code","bc45da9c":"code","e2be05dd":"code","880eb1cc":"code","233bc01c":"code","9954f169":"code","efd1c905":"code","c05632f7":"code","edbbdffb":"code","ef46f52c":"code","28dcada0":"markdown","1a2596f0":"markdown","83c6518b":"markdown","87fa3e82":"markdown","a5266ad7":"markdown","3b9d4eb5":"markdown","76850008":"markdown","e0d90946":"markdown","3d54721f":"markdown","a8d57b0e":"markdown","d9d47f03":"markdown","68b8ad2d":"markdown","f737acaf":"markdown","800ca97e":"markdown","ea4f0eb0":"markdown","00d1f2d7":"markdown","6212dc3c":"markdown","858411e2":"markdown"},"source":{"9cd9a614":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport random\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')\nfrom mpl_toolkits.basemap import Basemap\n%pylab inline","6bffb11a":"data_ter = pd.read_csv('..\/input\/gtd\/globalterrorismdb_0718dist.csv', encoding='ISO-8859-1')","948ec19f":"data_ter = data_ter.dropna(thresh=160000, axis=1)\ndata_ter.head(5)","546dda4d":"data_ter.dropna(thresh=160000, axis=1).shape[0]","f252ef6d":"def mapWorld(col1,size2,label4,metr=100,colmap='hot',ds=data_ter,scat=False):\n    datatt = ds\n    m = Basemap(projection='mill',llcrnrlat=-60,urcrnrlat=70,\\\n            llcrnrlon=-150,urcrnrlon=180,resolution='c')\n    m.drawcoastlines()\n    m.drawcountries()\n    m.drawparallels(np.arange(-120,91.,30.))\n    m.drawmeridians(np.arange(-120,90.,60.))\n    lat = datatt['latitude'].values\n    lon = datatt['longitude'].values\n    a_1 = datatt[col1].values\n    if size2:\n        a_2 = datatt[size2].values\n    else: a_2 = 1\n    if scat:\n        m.scatter(lon, lat, latlon=True,c=a_1,s=metr*a_2,edgecolors='black',cmap=colmap,alpha=1)\n    else:\n        m.scatter(lon, lat, latlon=True,c=a_1,s=metr*a_2,cmap=colmap,alpha=1)\nsns.set(font_scale=1.5)\nplt.figure(figsize=(15,15))\nplt.title('Terrorist attacks', fontsize=20)\nmapWorld(col1='targtype1', size2=False,label4='',metr=10,colmap='viridis',ds=data_ter)","2713a66a":"fig = plt.figure(figsize=(20,15))\nax1 = fig.add_subplot(3,2,1)\nax1.set_title('2010-2017')\nmapWorld(col1='targtype1',ds=data_ter[data_ter['iyear']>=2010], size2=False,label4='',metr=1,colmap='viridis',scat=True)\nax2 = fig.add_subplot(3,2,2)\nax2.set_title('2000-2009')\nmapWorld(col1='targtype1',ds=data_ter[(data_ter['iyear']>=2000) & (data_ter['iyear']<2010)], \\\n         size2=False,label4='',metr=10,colmap='viridis',scat=True)\nax3 = fig.add_subplot(3,2,3)\nax3.set_title('1990-1999')\nmapWorld(col1='targtype1',ds=data_ter[(data_ter['iyear']>=1990) & (data_ter['iyear']<2000)], \\\n         size2=False,label4='',metr=10,colmap='viridis',scat=True)\nax4 = fig.add_subplot(3,2,4)\nax4.set_title('1980-1989')\nmapWorld(col1='targtype1',ds=data_ter[(data_ter['iyear']>=1980) & (data_ter['iyear']<1990)], \\\n         size2=False,label4='',metr=10,colmap='viridis',scat=True)\nax4 = fig.add_subplot(3,2,5)\nax4.set_title('1970-1979')\nmapWorld(col1='targtype1',ds=data_ter[(data_ter['iyear']>=1970) & (data_ter['iyear']<1980)], \\\n         size2=False,label4='',metr=10,colmap='viridis',scat=True)","1c2f0e81":"def plot_by_years(kind='region_txt',big=(30,20)):\n    sns.set(style=\"white\",font_scale=2.5)\n    fig = plt.figure(figsize=big)\n    ax1 = fig.add_subplot(3,2,1)\n    ax1.set_title('2010-2017')\n    ax1.set_ylabel('');\n    data_ter[data_ter['iyear']>=2010]['eventid'].groupby(data_ter[kind]).count().plot(kind='barh');\n    ax1.set_ylabel('');\n    ax2 = fig.add_subplot(3,2,2)\n    ax2.set_title('2000-2009')\n    data_ter[(data_ter['iyear']>=2000) & (data_ter['iyear']<2010)]['eventid'].groupby(data_ter[kind]).count().plot(kind='barh');\n    ax2.set_ylabel('');\n    ax3 = fig.add_subplot(3,2,3)\n    ax3.set_title('1990-1999')\n    data_ter[(data_ter['iyear']>=1990) & (data_ter['iyear']<2000)]['eventid'].groupby(data_ter[kind]).count().plot(kind='barh');\n    ax3.set_ylabel('');\n    ax4 = fig.add_subplot(3,2,4)\n    ax4.set_title('1980-1989')\n    data_ter[(data_ter['iyear']>=1980) & (data_ter['iyear']<1990)]['eventid'].groupby(data_ter[kind]).count().plot(kind='barh');\n    ax4.set_ylabel('');\n    ax4 = fig.add_subplot(3,2,5)\n    ax4.set_title('1970-1979')\n    data_ter[(data_ter['iyear']>=1970) & (data_ter['iyear']<1980)]['eventid'].groupby(data_ter[kind]).count().plot(kind='barh');\n    plt.tight_layout()\n    plt.ylabel('');\nplot_by_years(kind='region_txt')","2f99a065":"sns.set(font_scale=1.5)\nfig = plt.figure(figsize=(20,10))\nsns.countplot(x='iyear',data=data_ter);\nplt.xlabel('')\nplt.ylabel('')\nplt.xticks(rotation=45)\nplt.title('Terrorist attacks', fontsize=20)\nplt.tight_layout()","0e707836":"fig = plt.figure(figsize=(10,5))\nsns.set(font_scale=1.5)\nsns.countplot(data_ter.imonth);\nplt.ylabel('count');","a0b8bcbb":"fig = plt.figure(figsize=(20,5))\nsns.set(font_scale=1.5)\nsns.countplot(data_ter.iday);\nplt.ylabel('count');","bc45da9c":"sns.set(font_scale=1.5)\nfig = plt.figure(figsize=(20,10))\nsns.countplot(x='iyear', data=data_ter, hue='success', orient='v');\nplt.xlabel('')\nplt.ylabel('')\nplt.title('Successful\/unsuccessful terrorist strike', fontsize=20)\nplt.xticks(rotation=45)\nplt.tight_layout()","e2be05dd":"sns.set(font_scale=1.5)\nplt.figure(figsize=(20,20))\nplt.title('Successful\/unsuccessful terrorist strike', fontsize=20)\nmapWorld(col1='success', size2=False,label4='',metr=10,colmap='viridis',ds=data_ter)","880eb1cc":"sns.set(font_scale=1.5)\nfig = plt.figure(figsize=(20,10))\nsns.countplot(x='iyear',data=data_ter,hue='suicide');\nplt.title(\"The incident was\/wasn't a suicide attack\", fontsize=20)\nplt.xlabel('')\nplt.ylabel('')\nplt.tight_layout()\nplt.xticks(rotation=45);","233bc01c":"plot_by_years(kind='attacktype1_txt');","9954f169":"def plot_by_years(kind='region_txt',big=(30,20)):\n    sns.set(style=\"white\",font_scale=2.5)\n    fig = plt.figure(figsize=big)\n    ax1 = fig.add_subplot(3,2,1)\n    ax1.set_title('2010-2017')\n    ax1.set_ylabel('');\n    data_ter[data_ter['iyear']>=2010]['eventid'].groupby(data_ter[kind]).count().sort_values(ascending=False)[:10].plot(kind='barh');\n    ax1.set_ylabel('');\n    ax2 = fig.add_subplot(3,2,2)\n    ax2.set_title('2000-2009')\n    data_ter[(data_ter['iyear']>=2000) & (data_ter['iyear']<2010)]['eventid'].groupby(data_ter[kind]).count().sort_values(ascending=False)[:10].plot(kind='barh');\n    ax2.set_ylabel('');\n    ax3 = fig.add_subplot(3,2,3)\n    ax3.set_title('1990-1999')\n    data_ter[(data_ter['iyear']>=1990) & (data_ter['iyear']<2000)]['eventid'].groupby(data_ter[kind]).count().sort_values(ascending=False)[:10].plot(kind='barh');\n    ax3.set_ylabel('');\n    ax4 = fig.add_subplot(3,2,4)\n    ax4.set_title('1980-1989')\n    data_ter[(data_ter['iyear']>=1980) & (data_ter['iyear']<1990)]['eventid'].groupby(data_ter[kind]).count().sort_values(ascending=False)[:10].plot(kind='barh');\n    ax4.set_ylabel('');\n    ax4 = fig.add_subplot(3,2,5)\n    ax4.set_title('1970-1979')\n    data_ter[(data_ter['iyear']>=1970) & (data_ter['iyear']<1980)]['eventid'].groupby(data_ter[kind]).count().sort_values(ascending=False)[:10].plot(kind='barh');\n    plt.tight_layout()\n    plt.ylabel('');\nplot_by_years(kind='targtype1_txt',big=(30,30));","efd1c905":"data_hap = pd.read_csv('..\/input\/the-human-freedom-index\/hfi_cc_2018.csv')\ndata_hap.head(3)","c05632f7":"def reg(x):\n    if x in ('South America','Central America & Caribbean'):\n        res = 'Latin America & the Caribbean'\n    elif x=='Central Asia':\n        res = 'Caucasus & Central Asia'\n    elif x=='Australasia & Oceania':\n        res = 'Oceania'\n    elif x in('South Asia','Southeast Asia',):\n            res = 'South Asia'\n    else:\n        res=x\n    return res\ndata_bx = data_ter\ndata_bx['region_txt'] = data_bx.region_txt.apply(reg)\ndata_bx = data_bx[data_bx.iyear.isin(['2016','2015','2014','2013','2012','2011','2010','2009','2008'])]","edbbdffb":"plt.figure(figsize=(20,5))\nsns.set(font_scale=1.5)\nsns.boxplot(x='region',y='hf_score',data=data_hap,order=['Caucasus & Central Asia','East Asia','Eastern Europe',\\\n                                'Latin America & the Caribbean','Middle East & North Africa','North America',\\\n                                    'Oceania','South Asia','Sub-Saharan Africa','Western Europe']);\nplt.title(\"Human Freedom (score)\", fontsize=20)\nplt.xlabel('')\nplt.xticks(rotation=30)\nplt.show()\n\nplt.figure(figsize=(25,5))\nsns.set(font_scale=1.5)\ndata_bx['eventid'].groupby(data_ter['region_txt']).count().plot(kind='bar');\nplt.title(\"Count of terrorist attacks\", fontsize=20)\nplt.xticks(rotation=30)\nplt.xlabel('')\nplt.show()","ef46f52c":"plt.figure(figsize=(20,5))\nsns.set(font_scale=1.5)\nsns.boxplot(x='region',y='pf_score',data=data_hap,order=['Caucasus & Central Asia','East Asia','Eastern Europe',\\\n                                                         'Latin America & the Caribbean','Middle East & North Africa','North America',\\\n                                                         'Oceania','South Asia','Sub-Saharan Africa','Western Europe']);\nplt.title(\"Personal Freedom (score)\", fontsize=20)\nplt.xlabel('')\nplt.xticks(rotation=30)\nplt.show()\n\nplt.figure(figsize=(25,5))\nsns.set(font_scale=1.5)\ndata_bx['eventid'].groupby(data_ter['region_txt']).count().plot(kind='bar');\nplt.title(\"Count of terrorist attacks\", fontsize=20)\nplt.xlabel('')\nplt.xticks(rotation=30)\nplt.show()","28dcada0":"## Table of contents\n* [1. Data import](#1.-Data-import)\n* [2. Full Map](#2.-Full-Map)\n* [3. Annual dynamics with map](#3.-Annual-dynamics-by-map)\n* [4. Annual dynamics by regions](#4.-Annual-dynamics-by-regions)\n* [5. Successful\/unsuccessful terrorist strike](#5.-Successful\/unsuccessful-terrorist-strike)\n* [6. Types of attacks](#6.-Types-of-attacks)\n* [7. Types of target](#7.-Types-of-target)\n* [8. Human freedom score due to terrorism](#8.-Human-freedom-score-due-to-terrorism)\n* [9. Personal freedom score due to terrorism](#9.-Personal-freedom-score-due-to-terrorism)\n\n","1a2596f0":"What share of incidents was a suicide attack?","83c6518b":"## 8. Human freedom score due to terrorism\nCollate this data with another kaggle dataset \"The Human Freedom Index\". Firstly, slightly change the data for a successful merge.","87fa3e82":"## 3. Annual dynamics by map\nIn 1970-1979 terrorist concentrates more tightly in Western Europe, Carribean and Middle East. <br>\nIn 1980-1989  - South America, Western Europe, Carribean. <br>\nIn 1990-1999, surge of terrorist activity - Western Europe, South Asia, South America, Middle East and North Africa. <br>\nIn the past 20 years, terrorists have been concentrated in South Asia, Middle Asia and Sub-Saharan Africa. <br>\nFor a clearer view, see the bar charts below.","a5266ad7":"## 5. Successful\/unsuccessful terrorist strike\nThis bar chart also does not inspire optimism - the overwhelming majority of attacks end successfully","3b9d4eb5":"## 1. Data & libraries import","76850008":"Thank you for reading! <br>\nIf you like same map visualization, you can see my other kernels:\nhttps:\/\/www.kaggle.com\/nikitagrec\/kernels","e0d90946":"## 6. Types of attacks\nThe most frequent types of attacks have not changed much - armed assault and bombing\/explosion pushed out assassination. The share of use of bombs increases - terrorist attacks began to be massive and aimed at hitting a large number of people.","3d54721f":"# How has terrorism changed over the years? (Geographic maps)","a8d57b0e":"## 2. Full Map\nDescry full map of terrorist attacks. We can see attacks for all the time. Much more important to see the trend. To do this, we divide all data into ten-year segments.\n","d9d47f03":"According to the proposed data we consider how terrorism has changed over time.","68b8ad2d":"Compare Personal Freedom (score) and count of terrorist attacks. We can see by plots that number of attacks is related to freedom schedules.","f737acaf":"Remove columns with a large number of missing values.","800ca97e":"Consider the distribution of attacks by years. Since 2012, terrorist activity is greatly increased.","ea4f0eb0":"## 9. Personal freedom score due to terrorism\nCompare Human Freedom (score) and count of terrorist attacks:","00d1f2d7":"Let's see if there is any feature in the distribution by week or by day. By first view - there are no interesting in these countplots. Only in 31 - not all months contain 31 day.","6212dc3c":"## 4. Annual dynamics by regions","858411e2":"## 7. Types of target\nDifferent types of targets for terrorists:"}}