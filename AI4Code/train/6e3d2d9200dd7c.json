{"cell_type":{"3b4e3693":"code","b679cad2":"code","74f997fa":"code","d340b093":"code","85bee693":"code","44e492a7":"code","fc1174c2":"code","d780d8e5":"code","b1dfc539":"code","9792018e":"code","e54452ea":"code","b7a5a853":"code","fb736471":"code","8b108f34":"code","3f738c0e":"code","452fbb4a":"code","1985e640":"code","b1ad0964":"code","c3516e7e":"code","e6a2ae39":"code","284e3e73":"code","67548c13":"code","97179c74":"code","ad1144f4":"code","1ac125de":"code","98d2f660":"code","d0a9bf2b":"code","a1d9eb17":"code","6dd94633":"code","be77f4d7":"code","5f05134c":"code","1f00a74b":"code","ac468ecb":"code","bf3fd22f":"code","48b67993":"code","2f874326":"code","8aa01b32":"code","6c3167d5":"code","7a4f05a3":"code","49ef548b":"code","6c97a21d":"code","af0d5015":"code","18413729":"code","43ff99c1":"code","cc9b919c":"code","dcac2c6d":"code","de2cfb8e":"code","b085dfb2":"code","5fdb29dd":"code","697150db":"code","5cbe4d78":"code","a6fcf0c9":"code","f5bffcc1":"code","435b8433":"code","7d0f3868":"code","a3e4114c":"code","285689f0":"code","e87e0f0b":"markdown","ac397651":"markdown","d4828348":"markdown","df76e97d":"markdown","be1aee3a":"markdown","df201a6d":"markdown","b64a1b19":"markdown","6c9ddba3":"markdown","c0adf5ed":"markdown","f87275a8":"markdown"},"source":{"3b4e3693":"import requests\nfrom bs4 import BeautifulSoup","b679cad2":"search_query=\"Nestaway-com-reviews-925868223\"\nbase_url=\"https:\/\/www.mouthshut.com\/websites\/\"","74f997fa":"url= base_url+search_query\nprint(url)","d340b093":"search_response=requests.get(url)## pass the url to mouthshut an requesting the response\nprint(search_response)","85bee693":"print(search_response.status_code)\nprint(search_response.content)","44e492a7":"reviews=BeautifulSoup(search_response.content)\nprint(reviews)","fc1174c2":"reviews.title","d780d8e5":"review=reviews.find(\"div\",{\"class\": \"left-panel\"})","b1dfc539":"data=review.find(\"div\", {\"class\":\"read-review-holder\"})\nprint(data)","9792018e":"\nnew=[]\ndef test(review):\n    for x in review:\n        new.append(x.text)\n    return new  \n","e54452ea":"reviews_1=data.findAll('div', {\"class\":\"more reviewdata\"})\nprint(reviews_1)\nprint(len(reviews_1))","b7a5a853":"def extractReview(Review):\n    r=[]\n    for  i in Review:\n        r.append(i.text)\n    return r","fb736471":"review_1= extractReview(reviews_1)\nprint(review_1)","8b108f34":"readmore=data.find(\"a\",{\"onclick\":\"bindreviewcontent('3041453',this,false,'I found this review of Nestaway.com pretty useful',925868223,'.png','I found this review of Nestaway.com pretty useful %23WriteShareWin','https:\/\/www.mouthshut.com\/review\/Nestaway-com-review-mqlroqpmplo','Nestaway.com',' 1\/5','mqlroqpmplo');\"})","3f738c0e":"# Data manipulation\nimport pandas as pd\nimport numpy as np\n\n# Options for pandas\npd.options.display.max_columns = None\npd.options.display.max_rows = None\n\npd.options.display.max_colwidth=-1\n\n# Display all cell outputs\nfrom IPython.core.interactiveshell import InteractiveShell\nInteractiveShell.ast_node_interactivity = 'all'\n\nfrom IPython import get_ipython\nipython = get_ipython()\nimport re","452fbb4a":"total_reviews=reviews.find(\"span\",{\"id\":\"ctl00_ctl00_ContentPlaceHolderFooter_ContentPlaceHolderBody_lblnoofrecords\"})","1985e640":"total_review=total_reviews.text\ntotal_review","b1ad0964":"total_review=total_review.replace(\"Showing: 1 - 20 of \",\"\")\nprint(total_review)\ntotal_review=re.sub(\" Reviews.*\",\"\",total_review)\nprint(total_review)","c3516e7e":"total_review=int(total_review)","e6a2ae39":"total_pages=total_review\/\/20\n\nif total_pages%20!=0:\n    total_pages=total_pages+1\nprint(total_pages)","284e3e73":"reviews_url=[]\nfor more_div in reviews_1:\n    review_url=more_div.find(\"a\")['onclick']\n    reviews_url.append(review_url)\n\nreviews_url","67548c13":"urls=[]\n\nfor review_url in reviews_url:\n    review_url=review_url.replace('bindreviewcontent',\"\")\n    review_url=review_url.replace(\";\",\"\")\n    review_url=review_url.replace('\"',\"\")\n    review_url=review_url.strip(\"()\")\n    ## Convert the review url string to tuple or split on comma \n    review_url_split=review_url.split(\",\")\n    #print(review_url_split)\n    #If a value after splitting starts with \"https:\" it is tghe url of the review\n    url=[value for value in review_url_split if \"www.mouthshut.com\/review\" in value][0]\n    urls.append(url)","97179c74":"for review_url in reviews_url:\n    review_url=review_url.replace('bindreviewcontent',\"\")\n    review_url=review_url.replace(\";\",\"\")\n    review_url=review_url.replace('\"',\"\")\n    review_url=review_url.strip(\"()\")\n    ## Convert the review url string to tuple or split on comma \n    review_url_split=review_url.split(\",\")\n    ","ad1144f4":"review_url1=urls[0]\nreview_url1","1ac125de":"def cleancontent(urls):\n    print(urls)\n    search_response1=requests.get(urls)\n    print(search_response1)\n    search_response1.status_code\n    #search_response1.content\n    reviews=BeautifulSoup(search_response.content)\n    reviews.prettify\n    return reviews","98d2f660":"review_url1=cleancontent(urls[0])","d0a9bf2b":"exactreview=review_url1.find(\"div\",{\"class\": \"left-panel\"})","a1d9eb17":"exact=exactreview.find(\"div\", {\"class\":\"read-review-holder\"})\nprint(exact)","6dd94633":"exactrow=exact.find('div',{\"class\":\"row review-article\"})\nprint(exactrow)","be77f4d7":"reviews_exact=exactrow.find('div', {\"class\":\"rev-main-content\"})\nprint(reviews_exact)","5f05134c":"urls=[]\nfor i in range(1,19):\n    url=\"https:\/\/www.mouthshut.com\/websites\/\"\n    query=\"Nestaway-com-reviews-925868223\"\"-page-\"+str(i)\n    print (url+query)\n    urls.append(url+query)","1f00a74b":"\ndef getreviewUrl(urls):\n    reviews=cleancontent(urls)   \n    review=reviews.find(\"div\",{\"class\": \"left-panel\"})\n    data=review.find(\"div\", {\"class\":\"read-review-holder\"})\n    reviews_1=data.findAll('div', {\"class\":\"more reviewdata\"})\n    reviews= extractReview(reviews_1)\n    \n    rating=review.findAll('div',{\"class\":\"rating\"})\n    ratings=[]\n    for x in rating:\n        rating=x.findAll(\"i\",{\"class\":\"icon-rating rated-star\"})\n        ratings.append(len(rating))\n    #print(len(review))\n    #print(review)\n        \n    nestaway=pd.DataFrame()\n    nestaway['ratings']=ratings\n    nestaway['reviews']=reviews\n    return nestaway\n    ","ac468ecb":"nestaway=getreviewUrl(urls[0])","bf3fd22f":"rating=review.findAll('div',{\"class\":\"rating\"})\nratings=[]\nfor x in rating:\n    rating=x.findAll(\"i\",{\"class\":\"icon-rating rated-star\"})\n    ratings.append(len(rating))","48b67993":"print(len(ratings))","2f874326":"nestaway","8aa01b32":"nestaway1=getreviewUrl(urls[1])","6c3167d5":"nestaway2=getreviewUrl(urls[2])","7a4f05a3":"nestaway3=getreviewUrl(urls[3])","49ef548b":"nestaway4=getreviewUrl(urls[4])","6c97a21d":"nestaway5=getreviewUrl(urls[5])","af0d5015":"nestaway6=getreviewUrl(urls[6])","18413729":"nestaway7=getreviewUrl(urls[7])","43ff99c1":"nestaway8=getreviewUrl(urls[8])","cc9b919c":"nestaway9=getreviewUrl(urls[9])","dcac2c6d":"nestaway10=getreviewUrl(urls[10])","de2cfb8e":"nestaway11=getreviewUrl(urls[11])","b085dfb2":"nestaway12=getreviewUrl(urls[12])","5fdb29dd":"nestaway13=getreviewUrl(urls[13])","697150db":"nestaway14=getreviewUrl(urls[14])","5cbe4d78":"nestaway15=getreviewUrl(urls[15])","a6fcf0c9":"nestaway16=getreviewUrl(urls[16])","f5bffcc1":"nestaway17=getreviewUrl(urls[17])","435b8433":"nestaway0=getreviewUrl(url)","7d0f3868":"nestaway_reviews=pd.concat([nestaway0, nestaway, nestaway1, nestaway2, nestaway3, nestaway4, nestaway5, nestaway6, nestaway7, nestaway8, nestaway9, nestaway10, nestaway11, nestaway12, nestaway13, nestaway14, nestaway15, nestaway16, nestaway17 ])","a3e4114c":"nestaway_reviews.shape","285689f0":"nestaway_reviews.to_csv(\"nestaway.csv\")","e87e0f0b":"## I have successfully saved my scraped reviews in a CSV file","ac397651":"#### Response for the code good it has given \"Response 200\". Let us see what the response content is being beautifully souped ","d4828348":"### I have got 380 reviews it can be repeated reviews ","df76e97d":"## Extracting reviews","be1aee3a":"# Description\nTrying to find few insights by scrapping form Mouthshut.com which is a verified review platform where people try to speak truth. I tried to scrap about nestaway in part of my learnings","df201a6d":"### Trying to get full review 1 on 1 by extracting \"Read MOre\" data","b64a1b19":"## let me find out how many pages we have if a page show 20 reviews","6c9ddba3":"### Trying to find out how many reviews are there exactly","c0adf5ed":"## Writing a function to extract text form the data","f87275a8":"## A full function to scrap all the review and ratings by using 1 Url"}}