{"cell_type":{"e23b79fa":"code","cceab044":"code","3d522985":"code","36567756":"code","cbe00b59":"code","2f75a697":"code","2219ebd6":"code","542b3b7d":"code","23d85291":"code","cda0380c":"code","10188fd0":"code","f3a9fe44":"code","948ab6cd":"code","42ad16c9":"code","d0dd8789":"code","b164f416":"code","ea5820a8":"code","3fb60217":"markdown","e80fbbaa":"markdown","7c9c4c25":"markdown","bfc0c14d":"markdown","f90ec227":"markdown","32cbdfe9":"markdown","f1fc91af":"markdown","271683e9":"markdown","b17c2b58":"markdown","e7464565":"markdown","ba778b8e":"markdown","85aefa14":"markdown","ee4b4132":"markdown","d8f56911":"markdown","68be8889":"markdown","44c13ffc":"markdown","8037c230":"markdown","4790f564":"markdown","1074f15f":"markdown","f0849262":"markdown","0b3a46fe":"markdown","6fb78a75":"markdown"},"source":{"e23b79fa":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport markdown\nimport math\nimport requests\nimport io\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\n\n\n\n","cceab044":"mild = 0.81","3d522985":"unascertained = 0.60\nascertained = 1-unascertained\nunasc_ratio = round(unascertained \/ ascertained,1)\nprint(unascertained) \nprint(unasc_ratio) ","36567756":"gd_pos_test_rate = 0.0047\nround(1 \/ gd_pos_test_rate)","cbe00b59":"# Get current positive test rate\n\ndf = pd.read_csv(\"\/kaggle\/input\/test-on\/test_data_on (2).csv\")\ncurrent = df.tail(1)\ncurrent","2f75a697":"current_pos_test_rate = current[\"positive\"]\/current[\"total\"]\ncurrent_pos_test_rate ","2219ebd6":"pos_test_rate=current_pos_test_rate\nnp.round(1 \/ pos_test_rate)","542b3b7d":"current[\"positive\"]","23d85291":"test_on_pos = 6237\non_test_ala_gd = test_on_pos \/ gd_pos_test_rate\n\nprint(round(on_test_ala_gd))","cda0380c":"current[\"total\"]","10188fd0":"test_on = current[\"total\"]\n\ntest_ratio = on_test_ala_gd \/ test_on\n\nround(test_ratio)","f3a9fe44":"est_mild_on = 4 * test_on_pos\n\nest_total = test_on_pos + est_mild_on\nprint(est_mild_on, est_total)","948ab6cd":"est_total_unascertained = unasc_ratio * est_total\nest_total_unascertained\ntotal_COVID_on = est_total_unascertained + est_total\nprint(total_COVID_on)","42ad16c9":"FN_rate = 0.3\ntest_on_FN = FN_rate * test_on_pos\ntest_on_TPFN = test_on_FN + test_on_pos\nround(test_on_FN)","d0dd8789":"#Update total\ntotal_COVID_on = est_total_unascertained + test_on_TPFN + est_mild_on\nprint(total_COVID_on)","b164f416":"\n\n\n\nresults = pd.DataFrame({'Number of positive tests': test_on_pos,\n                        'Estimated number of patients tested but with of FN tests': test_on_FN,\n                        'Estimated number of patients with mild symptoms, likely not tested' : est_mild_on,\n                        'Estimated of unascertained (asymptomatic) patients': est_total_unascertained,\n                       'Estimated total number of patients with COVID-19' : total_COVID_on},\n                      index=[0])\n\n#print(\"Summary (as of Apr 4)\")\n#print(\"Number of positive tests = \", test_on_pos)\n#print(\"Estimated number of patients tested but with of FN tests = \", test_on_FN)\n#print(\"Estimated number of patients with mild symptoms, likely not tested = \", est_mild_on)\n#print(\"Estimated of unascertained (asymptomatic) patients = \", est_total_unascertained[1], \"to\", est_total_unascertained[0])\n\n#number calling telehealth?\n\nresults\nround(results,-2)","ea5820a8":"results_norm = results.div(test_on_pos)\nresults_norm","3fb60217":"## How's Our (Ontario's) Testing?\n\n\nNext we have to look at testing criteria. Guangdong province in China can serve as a comparison. The most popluous province in China set up fever clinics to detect spread from Hubei. A total of 320,000 tests were performed as per a WHO report. At *peak* (Jan 30, 2020), 0.47% tests were positive (0.14% overall). \n(https:\/\/www.who.int\/docs\/default-source\/coronaviruse\/who-china-joint-mission-on-covid-19-final-report.pdf)","e80fbbaa":"At minimum, 213 people were tested for each positive case in Guangdong!\n\nSo now let's compare positive test rate in Ontario. \n\nFrom Ontario's official data, we can see the % of positive tests has climbed from 0.47% to over 10% at one point!\n\n![image.png](attachment:image.png)\n\n(Source: https:\/\/howsmyflattening.ca\/#\/analysis)\n","7c9c4c25":"# How many people in Ontario have COVID?\n## Fermi-style Q\/A \n\nThis is the conversation at home:\n\nWife: What are you doing.\n\nMe: COVID\n\nWife: <Sigh, not again.> What are you looking at?\n\nMe: Data\n\nWife: So how many people have it?\n\nMe: I don't know. But it is everywhere...\n\nWife: What does that mean?\n\nMe: ...\n\n\n\nWe know how many patients have been tested from publicly available data, but how many people actually have it? What does that even mean? We know the test is not perfect (https:\/\/www.medrxiv.org\/content\/10.1101\/2020.04.07.20051474v1), we are undertesting and there is asympatic spread (https:\/\/www.nejm.org\/doi\/full\/10.1056\/NEJMc2001468). There are local anectodes of unexplained spread and negative tests. But what does this mean?\n\nThis notebook explores the question and answers visually.\n\nFirst, how does the virus work. We know it spreads from person to person, lying dormant in ones nasopharynx for a median of 5.1 days before symptoms occur (https:\/\/annals.org\/AIM\/FULLARTICLE\/2762808\/INCUBATION-PERIOD-CORONAVIRUS-DISEASE-2019-COVID-19-FROM-PUBLICLY-REPORTED). \n\n","bfc0c14d":"## One other hiccup: False Negatives\n\nThis was left to the end, as it is more subtle, but has important implications.\n\nWe also know that the NP swab PCR test is not 100% sensitive. \n\nFrom a study of 213 admitted patients in Wuhan, we know that PCR samples from the nasopharynx can be negative in early 30% of patients https:\/\/www.medrxiv.org\/content\/10.1101\/2020.02.11.20021493v2.full.pdf.\n\n![image.png](attachment:image.png)\n\nThis is ballpark consistent with 1014 person study comapring CT and PCR, where 88% of patients had CT findings and only 59% had positive PCR https:\/\/pubs.rsna.org\/doi\/10.1148\/radiol.2020200642.\n\nGold standard is a problem for these studies, but the imperfect sensitivity is clear. \n\nFor Ontario, assuming a 30% FN rate...(and assuming only a single test)","f90ec227":"Let's normalize relative to positive tests so we can better appreciate what is going on here:","32cbdfe9":"**Point 4:** It would be reasonable to estimate from above that there are about 78,000 (large error bars) mild and asymptomatic patients in Ontario that have NOT BEEN TESTED ","f1fc91af":"## Mild Symptoms\n\nWe also know that symptoms vary markedly. Some patients are asymptomatic and others have mild symptoms, for which they would not seek medical testing or treatment.\n\nFrom a review of a large Wuhan case series in a JAMA paper (https:\/\/jamanetwork.com\/journals\/jama\/fullarticle\/2762130), we have an idea of the distribution of disease severity.\n\nSpectrum of disease (N\u2009=\u200944\u202f415)\n\nMild: 81% (36\u202f160 cases)\n\nSevere: 14% (6168 cases)\n\nCritical: 5% (2087 cases)\n","271683e9":"## Aymptomatic Patients\n\nAsymptomatic spread is now well-documented, with a summary of recent evidence here: https:\/\/www.cebm.net\/covid-19\/covid-19-what-proportion-are-asymptomatic\/. The range in the literature is 5-80%.\n\nOne studies estimated the number of infected patients who are never tested (unascertained) from fitting SEIR-type model including unascertained cases to Wuhan data (https:\/\/www.medrxiv.org\/content\/10.1101\/2020.03.03.20030593v1):\n\n![image.png](attachment:image.png)\n\nUsing their modeling, during the early growth phase of the disease, at best 37% of cases were ascertained (tested). \n\n","b17c2b58":"**Point 3: So, Ontario is undertesting 12x compared to Guangdong!!**\n\n## What does this all mean for Ontario?\n\nFirst, it is probably safe to assume that Ontario is not really testing most mildly symptomatic people (81% in Wuhan). So that means, there are likely at least  4 patients with mild symptoms who are not tested for every 1 that is tested","e7464565":"## Summary and implications\n\n**Point 1\/3:** Approx. 4\/5 of cases of COVID-19 are mild. We not testing these (except maybe healthcare workers). There about 32000 Ontarians who would have tested positive to date, if we had been testing like parts of China.\n\n**Point 2\/4:** While there is a range of estimates, it is reasonable to say there are 1.5 asymptomatic cases for each case with symptoms. It would be reasonable to estimate from above that there are about 78,000 (large error bars) mild and asymptomatic patients in Ontario that have NOT BEEN TESTED\n\n**Point 5:** There are likely around 1900 cases of false negative patients floating around Ontario.\n\n\n\n\nOntario is massively undertesting, 12x less than parts of China. We are not testing mild cases. And we know we are missing asymptomatic cases, as it true most places in the world. For each positive test in Ontario, there are likely at least 10 untested patients with COVID-19.\n\nThis is likely not a surprise to most citiziens (everyone knows someone who sounds like they had COVID but was told to stay home and self-isolate) and physicians, uncluding myself, who have seen cases that MUST be COVID but are not suspected a priori, tested or sometimes test negative (very small N).\n\nWhat does this mean?\n\nFor provincial leaders:\n* Get logistics in order and aggressively test and trace as Singapore, South Korea and others have shown. We currently have very little information on who HAS or HAD the disease (great discussion in Josh Gans new book: https:\/\/economics-in-the-age-of-covid-19.pubpub.org\/pub\/h5gzz4on). In this information poor environment, one must assume everybody has the disease. The only policy that works in that state is total lock down. If, as numbers fall, we can get into a position of information on every case, we have new policy options other than complete lock down. See Paul Romer's work re simulating different testing strategies: https:\/\/paulromer.net\/\n* The way to start may be to aggressively test high contact \/ risk people during the lock down (healthcare workers, food supply, hospital patients). This would require rapid\/instant point of care testing, which is emerging.\n\nFor hospital \/ healthcare leaders:\n* Don't trust the test alone to dictate decision-making. Asymptomatic, mildly symptomatic and false negative tests are likely entering your facilities via staff or patients. \n* Consider aggressive health care worker testing and tracing.\n* Allow clinicians to isolate patients as suspected COVID even with negative testing.\n* Get rapid\/instant testing.\n\nFor providers\n* As you probably know, this disease is everywhere in Ontario. As of this writing, testing criteria are lagging. Test and isolate if you are suspicious.\n* Don't trust negative tests as providing 100% certainty. \n\n\n","ba778b8e":"In reality, far fewer tests have been peformed:\n\n","85aefa14":"![image.png](attachment:image.png)","ee4b4132":"Either the disease is truly everywhere...or we are increasingly testing fewer and fewer people. We know the latter to be true as criteria are reasonably stringent and politicians are starting to get upset (https:\/\/www.tvo.org\/article\/how-ontarios-covid-19-testing-debacle-has-cost-lives)\n\n![image.png](attachment:image.png)\n\nOk. So now we can run a comparison of Ontario vs Guangdon testing rates...\n\n\nOur most recent number of positive tests is below:\n\n\n\n\n","d8f56911":"**Point 2: While there is a range of estimates, it is reasonable to say there are 1.5 asymptomatic cases for each with symptoms.**","68be8889":"A second reasonably convincing story (because of stated impact; rigor is hard to evaluate) comes from Vo-Euganeo in Italy: a town of 300 where the **ENTIRE POPULATION** of 3000 was repeatedly tested (https:\/\/www.bmj.com\/content\/368\/bmj.m1165). First, they noted that 50-75% of residents were asymptomatic. Second, they report that isolating all positive cases resulted in a 90% decrease in sympomatic people in 10 days.\n\nWe will take the number of asymptomatic casse to measure 60% for illustrative purposes.","44c13ffc":"**Point 1:** 4\/5 of cases are mild. Are we testing these? We will discuss below. But first...","8037c230":"**Point 3:** So that means there about 32000 Ontarians who would have tested positive, if we had been testing like China.\n\nBUT, we also know that estimates of unascertained \/ ascertained cases (from above)","4790f564":"**Point 5:** There are likely around 1900 cases of false negative patients floating around Ontario.","1074f15f":"Doing some basic math we can figure out the \"Ontario-operating-as-Guangdong to Ontario-actual\" ratio","f0849262":"If we were testing expecting the same rate as Guangdon (0.47%), we would expect to have tested:","0b3a46fe":"![image.png](attachment:image.png)","6fb78a75":"\n#Visualization link\n\nData as of Apr 13, 2020\n\nhttps:\/\/datastudio.google.com\/u\/0\/reporting\/1b5237ba-2533-4cf9-8dc0-b14eb45ecdef\/page\/iLEMB\n\nThanks Marc Soares!!!\nhttps:\/\/www.linkedin.com\/in\/marcsoares\/\n\n![image.png](attachment:image.png)\n"}}