{"cell_type":{"85a8ba56":"code","ebfc764e":"code","f015cf8b":"code","abff68ec":"code","ecdaed5e":"code","ae2b909a":"code","ed9e65a2":"code","bf1d134b":"code","4e081798":"code","b4046d61":"code","0800a534":"code","9ce85c10":"code","b7560d82":"code","fe4d312f":"code","16d6bd45":"code","f045bb22":"code","a4ab9901":"code","5dbfab81":"code","5b4049fa":"code","681bbfc4":"code","2edcedb7":"code","2e55b935":"code","bff8cf52":"code","23a48cb0":"code","6a81038a":"code","c18925af":"markdown","498533ee":"markdown","5d883873":"markdown","63a8bdac":"markdown","2be5e639":"markdown","17155616":"markdown","66bf28ab":"markdown","1654c014":"markdown","c76222a8":"markdown","44ce4757":"markdown","15d6deca":"markdown","d0e895ed":"markdown","aacf0bde":"markdown","6ae8d3eb":"markdown","eb726ad0":"markdown","096c1184":"markdown","df35b9ea":"markdown","b2a6c7bf":"markdown","3910eb1a":"markdown","29b8173a":"markdown"},"source":{"85a8ba56":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ebfc764e":"input_data = pd.read_csv('..\/input\/kaggle-survey-2021\/kaggle_survey_2021_responses.csv')\nprint(list(input_data.columns))","f015cf8b":"age_distribution = input_data['Q1'][1:].value_counts().rename_axis('age_bracket').reset_index(name='counts')\nage_distribution['cum_sum'] = age_distribution['counts'].cumsum() \/ 25973\nage_distribution","abff68ec":"age_sex_distribution = input_data[['Q1','Q2']][1:].groupby(by='Q1').agg({'Q2' : [lambda x : (x == 'Man').sum(), lambda x : (x == 'Woman').sum()]})\nage_sex_distribution.columns = age_sex_distribution.columns.droplevel()\nage_sex_distribution = age_sex_distribution.rename(columns={\"<lambda_0>\":'Male',\"<lambda_1>\":'Female'})\nage_sex_distribution['male_cum_sum'] = age_sex_distribution['Male'].cumsum() \/ sum(age_sex_distribution['Male'])\nage_sex_distribution['female_cum_sum'] = age_sex_distribution['Female'].cumsum() \/ sum(age_sex_distribution['Female'])\nage_sex_distribution","ecdaed5e":"fig,ax = plt.subplots(figsize=(9,7))\nsns.lineplot(data=age_sex_distribution[['male_cum_sum','female_cum_sum']])\nplt.xlabel('Age Bracket')\nplt.ylabel('Normalised cumulative sum of number of respondents')\nax.legend(['Males','Females'])\nplt.show()","ae2b909a":"input_data['Q3'].value_counts()","ed9e65a2":"pd.DataFrame(input_data[1:]['Q3'].value_counts()).sort_values(by='Q3',ascending=False).head(6)","bf1d134b":"top_5 = ['India','United States of America','Japan','China','Brazil']","4e081798":"## Returns age-sex distribution for a country\ndef age_sex_distribution_by_country(country):\n    age_sex_distribution_india = input_data[input_data['Q3'] == country][['Q1','Q2']]\n    age_sex_distribution_india = age_sex_distribution_india[['Q1','Q2']][1:].groupby(by='Q1').agg({'Q2' : [lambda x : (x == 'Man').sum(), lambda x : (x == 'Woman').sum()]})\n    age_sex_distribution_india.columns = age_sex_distribution_india.columns.droplevel()\n    age_sex_distribution_india = age_sex_distribution_india.rename(columns={\"<lambda_0>\":'Male',\"<lambda_1>\":'Female'}).rename_axis('Age Bracket')\n    age_sex_distribution_india['male_cum_sum'] = age_sex_distribution_india['Male'].cumsum() \/ sum(age_sex_distribution_india['Male'])\n    age_sex_distribution_india['female_cum_sum'] = age_sex_distribution_india['Female'].cumsum() \/ sum(age_sex_distribution_india['Female'])\n    return age_sex_distribution_india","b4046d61":"age_sex_distribution_by_country('India')","0800a534":"age_sex_distribution_by_country('China')","9ce85c10":"age_sex_distribution_by_country('Japan')","b7560d82":"age_sex_distribution_by_country('United States of America')","fe4d312f":"age_sex_distribution_by_country('Brazil')","16d6bd45":"female_participation_by_country = input_data[['Q1','Q2','Q3']][1:].groupby(by='Q3').agg({'Q2' : [lambda x : (x == 'Man').sum(), lambda x : (x == 'Woman').sum()]})\nfemale_participation_by_country.columns = female_participation_by_country.columns.droplevel()\nfemale_participation_by_country = female_participation_by_country.rename(columns={\"<lambda_0>\":'Male',\"<lambda_1>\":'Female'}).rename_axis(\"country\")\nfemale_participation_by_country['female_part_ratio'] = female_participation_by_country['Female']\/(female_participation_by_country['Male'] + female_participation_by_country['Female'])\nfemale_participation_by_country[female_participation_by_country['Male'] + female_participation_by_country['Female'] > 100].sort_values(by='female_part_ratio',ascending=False).head(20)","f045bb22":"female_participation_by_country_young = input_data[(input_data['Q1'] == '18-21') | (input_data['Q1'] == '22-24') | (input_data['Q1'] == '25-29') | (input_data['Q1'] == '30-34')][['Q1','Q2','Q3']][1:]\nfemale_participation_by_country_young = female_participation_by_country_young.groupby(by='Q3').agg({'Q2' : [lambda x : (x == 'Man').sum(), lambda x : (x == 'Woman').sum()]})\nfemale_participation_by_country_young.columns = female_participation_by_country_young.columns.droplevel()\nfemale_participation_by_country_young = female_participation_by_country_young.rename(columns={\"<lambda_0>\":'Male',\"<lambda_1>\":'Female'}).rename_axis(\"country\")\nfemale_participation_by_country_young['female_part_ratio'] = female_participation_by_country_young['Female']\/(female_participation_by_country_young['Male'] + female_participation_by_country_young['Female'])\nfemale_participation_by_country_young[female_participation_by_country_young['Male'] + female_participation_by_country_young['Female'] > 78].sort_values(by='female_part_ratio',ascending=False).head(20)","a4ab9901":"input_data[1:][input_data['Time from Start to Finish (seconds)'][1:].astype('int') >  20000]","5dbfab81":"input_data[1:].groupby(by='Q3').agg({'Time from Start to Finish (seconds)' : lambda x: x.astype('int').mean()}).sort_values(by='Time from Start to Finish (seconds)').head(21)","5b4049fa":"input_data[1:].groupby(by='Q3').agg({'Time from Start to Finish (seconds)' : lambda x: x.astype('int').mean()}).sort_values(by='Time from Start to Finish (seconds)',ascending=False).head(21)","681bbfc4":"fig, ax = plt.subplots(figsize=(14,8))\nlabels = ['Master\\'s','Bachelor\\'s',\"Doctoral\",\"DropOut\",\"Prefer No answer\",\"High School\",\"Professional Doctorate\"]\nvalues = list(input_data['Q4'][1:].value_counts())\nax.pie(values,labels=labels,autopct='%1.1f%%')\nplt.show()","2edcedb7":"plt.clf()\nfig,ax = plt.subplots(figsize=(12,8))\nsns.barplot(y='Profession',x='counts',data=input_data['Q5'][1:].value_counts().rename_axis('Profession').reset_index(name='counts'),axes=ax,color='tab:blue')\nplt.xlabel(\"No. of Respondents\")\nplt.show()","2e55b935":"plt.clf()\nfig,ax = plt.subplots(figsize=(12,8))\nsns.barplot(y='Profession',x='counts',data=input_data[input_data['Q3'] == 'India']['Q5'][1:].value_counts().rename_axis('Profession').reset_index(name='counts'),axes=ax,color='tab:blue')\nplt.xlabel(\"No. of Respondents\")\nplt.show()","bff8cf52":"input_data[(input_data['Q3'] == 'India') & (input_data['Q5'] == 'Student')]","23a48cb0":"## Students in India\nsns.countplot(y='Q4',data=input_data[(input_data['Q3'] == 'India') & (input_data['Q5'] == 'Student')][1:])","6a81038a":"##Students overall\nsns.countplot(y='Q4',data=input_data[(input_data['Q5'] == 'Student')][1:])","c18925af":"A significant number of respondents are master's degree.","498533ee":"##### In India there are is more proportion of Students in Bachelors degree than the global average. Also while we see that respondents with Bachelor's and Master's degree are roughly same number overall; there is a significant difference in the student community. It is possibly because of enthusiasm in the younger people for this field.","5d883873":"##### From what it seems the survey could have been filled in multiple sessions by many as there are many responses with time duration in hours.","63a8bdac":"#### Let us now explore the profession and education of respondents","2be5e639":"## Time Taken to fill the survey\n##### Let us try and understand if there is any pattern in time taken across variables.","17155616":"We have our top 5 countries as :- India, USA, Japan, China and Brazil. 'Other is not considered'. Let us try and consider the demographic mix on the countries. Starting with Age Sex Distribution","66bf28ab":"## Exploring Basic Age and Gender Variations ","1654c014":"##### Let me see how my country looks like","c76222a8":"##### Let us explore the same by gender :- Male and Female.","44ce4757":"### Women on average are younger as compared to Men with about 77% of men younger than 40 while 85% of females younger than 40","15d6deca":"##### The younger population has more females with Tunisia leading the way.","d0e895ed":"##### So Sweden took least time while Uganda the most time to fill the survey","aacf0bde":"#### About 79% of all respondents less than 40 years of age and 56% less than 24 years of age.","6ae8d3eb":"##### For India the number of Students clearly dominate the survey.\n\n##### Let us see how the students in India are distributed across degrees.","eb726ad0":"## Adding Country as a variable\nThe respondednt are located in 67 countries with more than 7000 responses from India and just 43 from Iraq. Lets us analyze the top 5 countries.","096c1184":"##### The chinese respondents are even younger than their Indian counterparts with 96% of males and 98% of females younger than 40","df35b9ea":"##### Thus we observe that for countries with atleast 100 respondents, Tunisia tops the list of maximum female participation.\n##### Lets us see if this trend hold up when we consider only young population(< 35), which likely it should.","b2a6c7bf":"##### Japaneses, American and Brazilian respondents are much older than their conterparts in India and China. At this point two points are worth exploring :- Top countries by female participation and top countries by female participation among younger respondents (< 30).\n\n##### Let us find top 20 countries in female participation. We only consider countries with atleast 100 respondents","3910eb1a":"Table ","29b8173a":"##### The respondents from India are younger than the world average with 92% of males and 95% of females younger than 40."}}