{"cell_type":{"fae0778f":"code","06279203":"code","166159e9":"code","fd172b32":"code","c41be562":"code","7f3b196d":"code","66442c2a":"code","13989a8a":"code","3ad5d8c7":"code","5c63a965":"code","faf1afd4":"code","85c7427f":"code","91395731":"code","5fa1eaae":"code","01304ca3":"code","08dc352c":"code","407ccda8":"code","5162a6b8":"code","01945ab5":"code","d71dab4d":"code","4e8bfa04":"markdown","48229410":"markdown","e4da0371":"markdown","54990ca7":"markdown","acd5fb58":"markdown","d69c4b85":"markdown","a4a93038":"markdown","ab470db1":"markdown","657f6e53":"markdown","3487f5fa":"markdown","8c4caccf":"markdown","04fa7ebb":"markdown","7505482e":"markdown","f2464a25":"markdown","7a54b5b6":"markdown","d413309a":"markdown"},"source":{"fae0778f":"import pandas as pd\nimport numpy as np\nimport datetime\nimport time\nfrom datetime import datetime\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport statistics\nimport os","06279203":"#print(os.listdir('..\/input'))\ndf=pd.read_csv(\"..\/input\/recorridos-realizados-2018.CSV\", encoding='latin-1')\nprint('There are %d bikes released' % len(df))\n","166159e9":"df.head()","fd172b32":"df.tail()","c41be562":"df.rename(columns={'bici_id_usuario': 'id_user',\n                   'bici_Fecha_hora_retiro': 'date_released',\n                   'bici_tiempo_uso': 'time_use',\n                   'bici_nombre_estacion_origen': 'station_name_released',\n                   'bici_estacion_origen': 'station_id_released',\n                   'bici_nombre_estacion_destino': 'station_name_lock',\n                   'bici_estacion_destino': 'station_id_lock',\n                   'bici_sexo': 'sex',\n                   'bici_edad': 'age',\n                   'bici_direccion': 'address',\n                   'bici_pais': 'country',}, inplace=True)","7f3b196d":"df[\"day_released\"]=\"\"\ndf[\"month_released\"]=\"\"\ndf[\"year_released\"]=\"\"\ndf[\"hour_released\"]=\"\"\ndf[\"minute_released\"]=\"\"\ndf[\"hour_use\"]=\"\"\ndf[\"minute_use\"]=\"\"\ndf[\"minute_use_total\"]=\"\"\n\n\ndf[\"day_released\"]=pd.to_numeric(df.date_released.str.slice(0, 2), errors=\"force\")\ndf[\"month_released\"]=pd.to_numeric(df.date_released.str.slice(3, 5), errors=\"force\")\ndf[\"year_released\"]=pd.to_numeric(df.date_released.str.slice(6, 10), errors=\"force\")\ndf[\"hour_released\"]=pd.to_numeric(df.date_released.str.slice(11, 13), errors=\"force\")\ndf[\"minute_released\"]=pd.to_numeric(df.date_released.str.slice(14, 16), errors=\"force\")\n\ndf[\"hour_use\"]=pd.to_numeric(df.time_use.str.slice(-8,-6), errors=\"force\")\ndf[\"minute_use\"]=pd.to_numeric(df.time_use.str.slice(-5,-3), errors=\"force\")\n\ndf[\"minute_use_total\"]=df[\"hour_use\"]*60+df[\"minute_use\"]\n\ndf.loc[(df.age.isnull()),'age']=30 # just 1 bike\n","66442c2a":"df_normal=df[(df.minute_use_total<=120)]\ndf_outlier=df[(df.minute_use_total>120)]\n","13989a8a":"print('There are %d bikes with less than 120 minutes in used' % len(df_normal))","3ad5d8c7":"print('There are %d bikes with more than 120 minutes in used' % len(df_outlier))","5c63a965":"print(\"Total Database\")\nprint('The longest trip was: %d minutes' % max(df[\"minute_use_total\"]))\nprint('The shortest trip was: %d minutes' % min(df[\"minute_use_total\"]))\nprint('The mean trip was: %d minutes' % df[\"minute_use_total\"].mean())\nprint('The median trip was: %d minutes' % df[\"minute_use_total\"].median())\nprint('The most frequent trip was: %d minutes' % df[\"minute_use_total\"].mode())\nprint(\"\")\nprint(\"Normal Database\")\nprint('The longest trip was: %d minutes' % max(df_normal[\"minute_use_total\"]))\nprint('The shortest trip was: %d minutes' % min(df_normal[\"minute_use_total\"]))\nprint('The mean trip was: %d minutes' % df_normal[\"minute_use_total\"].mean())\nprint('The median trip was: %d minutes' % df_normal[\"minute_use_total\"].median())\nprint('The most frequent trip was: %d minutes' % df_normal[\"minute_use_total\"].mode())\nprint(\"\")\nprint(\"Outlier Database\")\nprint('The longest trip was: %d minutes' % max(df_outlier[\"minute_use_total\"]))\nprint('The shortest trip was: %d minutes' % min(df_outlier[\"minute_use_total\"]))\nprint('The mean trip was: %d minutes' % df_outlier[\"minute_use_total\"].mean())\nprint('The median trip was: %d minutes' % df_outlier[\"minute_use_total\"].median())\nprint('The most frequent trip was: %d minutes' % df_outlier[\"minute_use_total\"].mode())","faf1afd4":"fig, ax = plt.subplots(figsize=(15,7))\nax = sns.distplot(df_normal.minute_use_total, hist=True, kde=True, \n             bins=int(60), color = 'darkblue', \n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth': 4})\nax.set_title(\"Probability Density Distribution minute_use_total\", fontsize=30)\n","85c7427f":"g=df.groupby(\"station_name_released\").agg({'id_user':'count'}).sort_values(by=\"id_user\", ascending=0).head(25)\ng=g.plot(kind=\"bar\")\ng.set_ylabel(\"Released bikes\", fontsize=10)\ng.set_xlabel(\"Stations\", fontsize=10)\ng.set_title(\"Station Distribution (top 25)\", fontsize=20)\nfig=plt.gcf()\nfig.set_size_inches(15,6)","91395731":"f,ax=plt.subplots(1,2,figsize=(16,5),sharex=True)\ndf[\"sex\"].value_counts().plot.pie(ax=ax[0], shadow=True)\nax[0].set_title(\"Sex Distribution\", fontsize=20)\nax[0].set_ylabel(\"\")\nax[0].set_xlabel(\"\")\nsns.countplot(\"sex\", data=df, ax=ax[1])\nax[1].set_title(\"Sex Distribution\", fontsize=20)\nax[1].set_ylabel(\"\")\nax[1].set_xticklabels(ax[1].get_xticklabels(), ha=\"right\")\nplt.show()\n","5fa1eaae":"fig, ax = plt.subplots(figsize=(15,7))\nax = sns.distplot(df_normal.hour_released, hist=True, kde=False, \n             bins=int(24), color = 'darkblue', \n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth': 2})\nax.set_title(\"Hour Released Distribution\", fontsize=30)\nax.set_xlabel(\"Hour Released\", fontsize=10)\n","01304ca3":"fig, ax = plt.subplots(figsize=(15,7))\nax = sns.distplot(df_normal.age, hist=True, kde=False,\n             bins=int(82),      \n             hist_kws={'edgecolor':'black'},\n             kde_kws={'linewidth': 2})\nax.set_title(\"Age Distribution\", fontsize=30)\nax.set_xlabel(\"Age\", fontsize=10)\nplt.xlim(16,80)","08dc352c":"df.groupby(['year_released','month_released','day_released']).count()['id_user']","407ccda8":"fig, ax = plt.subplots(figsize=(15,7))\ndf.groupby(['year_released','month_released','day_released']).count()['id_user'].plot(ax=ax)\nax.set_title('Bike Released by Day', fontsize=25)\nax.set_xlabel(\"From 2015 to 2018\")","5162a6b8":"df[(df.year_released==2017)].groupby(['month_released','day_released']).count()['id_user']","01945ab5":"fig, ax = plt.subplots(figsize=(15,7))\ndf[(df.year_released==2017)].groupby(['month_released','day_released']).count()['id_user'].plot(ax=ax)\nax.set_title('Bike Released by Day (2017)', fontsize=25)\nax.set_xlabel(\"Year2017 (from January to June)\")","d71dab4d":"g=df[(df.country!=\"Argentina\")].groupby(\"country\").agg({'id_user':'count'}).sort_values(by=\"id_user\", ascending=0).head(10)\ng=g.plot(kind=\"bar\")\ng.set_ylabel(\"Count Users\", fontsize=10)\ng.set_xlabel(\"Country\", fontsize=10)\ng.set_title(\"Foreign Users (not argentinian)\", fontsize=20)\nfig=plt.gcf()\nfig.set_size_inches(15,6)","4e8bfa04":"I was focus on plotting this to check the importance of seasons and weather but no conclusion at all. Try to check more users during spring and less users during winter and low temperature.","48229410":"Split up outliers","e4da0371":"The rush hour is when people go back home after work day between 5 and 7 pm","54990ca7":"Young people using the bikes. No users below 18 years old. There is problem with this feature because it takes the actual age of users, so we might have certain ages distorsions","acd5fb58":"Irregular plot. I guess there is a problem on the last month of 2015 and beggining of 2016 cause of the graphic. Maybe the system was not working properly.\n\nWe can see a big variance in the whole plot. There is no regular increasing or decreasing pattern","d69c4b85":"First download the file and read csv\n\nref: https:\/\/data.buenosaires.gob.ar\/\n\nCheck how many lines","a4a93038":"Just 25% aprox of the bikes are used by women","ab470db1":"There are lot of inmigrants in Buenos Aires and the system is a good way to move arround the city because is free and very well placed. Border inmigrants might be the most common foreign users but we can see Colombian\u00b4s and Haiti\u00b4s inmigrants in the top 10. It is surprising","657f6e53":"Rename columns","3487f5fa":"Split DateTime in numeric and fill certain nulls","8c4caccf":"The bike system has a minute_use_total limit. Users can take a bike and use it for 60 minutes maximun during labor days and 120 minutes maximun on weekend.\nref: http:\/\/www.buenosaires.gob.ar\/ecobici\/sistema-ecobici\/preguntas-frecuentes","04fa7ebb":"Show some information about dataset","7505482e":"Import usefull libraries","f2464a25":"# Conclusions\n\nThe dataset is very intereting and have multiple features to work with. Although it is open data and seem to be very complete, the datast have many problems to solve, for example the omissions of trips with less than 8 minute_use_total. I do not know the reason why it happens, but with that information we could be able to see mechanical failures in the system and predict them using machine learning.\nIt coulb be very usefull to get an id_bike to make an analysis of the units and check their performance.\nFortunately, in my personal case, i am a user of the system and it works well regarding the costless. However, in the app where users can check their historic movements, i can see more released than i can see in dataset. This problem shows that the dataset is not taking every movements of users. I hope this can be solve soon =)\n\nIf you like it, please post a comment!","7a54b5b6":"On the last results we can see some useful metrics. There is no normal distribution aproximation cause the difference between median and mean. In both dataset mean is much higher than median, that means the distribution is heavier on the right.\n\nOn outlier dataset, we can see a bigger difference between mean and median. The reason can be the big minute_use_total on the right of distribution.\n\nThe shortest trip in 8 minutes is confuse. There should be a mistake con the left side of distribution with no trips below 8 minutes. In so many lines there must be some trips below 8 minutes. The difference between the mode (most frequent value) and shortest trip is very small. The ramdom variable get some confuse performance.\n","d413309a":"# About this Kernel\n\nThis kernel is not a machine learning testing, i want to visualize with plots and tables the distributions and certain attributes of the Buenos Aires Public Bike System. There is an official open data site from Buenos Aires goverment that allow developers to download different kind of datasets. Working with this data is useful to deal with big amount of cells, there are almost one and a half millons bike released it is a good challenge to go throght. I invite the community to download not only this dataset, but also other ones to continue exploring public information. Although this is not a perfect dataset, i guess it is a good sample to work.\n\n"}}