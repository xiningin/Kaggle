{"cell_type":{"82364883":"code","221d706e":"code","50dd9106":"code","9b1b24f0":"code","dc0a342e":"code","d886b590":"code","77a77c4b":"code","99d58cbe":"code","6f5e9705":"code","4f93e34c":"code","6a72e050":"markdown","822497e9":"markdown","e909f52b":"markdown","59a9d066":"markdown","4e83b27e":"markdown","4b244e73":"markdown","1c326552":"markdown","14ab4d03":"markdown","7bd27273":"markdown","c1eed2f0":"markdown"},"source":{"82364883":"import pandas as pd\nimport numpy as np","221d706e":"users = pd.read_csv('..\/input\/userscsv\/users.csv')\nusers.head()","50dd9106":"purchases = pd.read_csv('..\/input\/purchases\/purchases.csv')\npurchases.head()","9b1b24f0":"data = purchases.merge(users, how = \"inner\", on = \"uid\")\ndata.head()","dc0a342e":"data = data.groupby([\"country\", \"device\", \"gender\", \"age\"]).agg({\"price\": \"sum\"}).reset_index()\ndata.sort_values(by=\"price\",ascending = False)\n","d886b590":"data[\"age_cat\"] = pd.cut(data[\"age\"], bins=[0, 18, 23, 30, 40, 75],\n                           labels=['0_18', '19_23', '24_30', '31_40', '41_75'])\ndata.head(10)","77a77c4b":"data[\"customers_level_based\"] = [row[0] + \"_\" + row[1].upper() + \"_\" + row[2] + \"_\" + row[5] \n                                 for row in data.values]\ndata = data[[\"customers_level_based\", \"price\"]]\ndata.head()","99d58cbe":"data = data.groupby(\"customers_level_based\").agg({\"price\": \"mean\"}).reset_index()\ndata.head()","6f5e9705":"data[\"segment\"] = pd.qcut(data[\"price\"], 4, labels=[\"D\", \"C\", \"B\", \"A\"])\ndata.head()","4f93e34c":"new_customer = \"TUR_IOS_F_41_75\"\ndata[data[\"customers_level_based\"] == new_customer]","6a72e050":"Step 6: I will segment the customers according to the price variable with \"qcut\" function.","822497e9":"Last Step: Prediction of the segment of a NEW female ios user from Turkey at age 42 and her potential average purchase:","e909f52b":"#            LEVEL BASED PERSONA SEGMENTATION \n\n**In this tutorial, I will explain how a segmentation problem can handle step by step with Python.**\n\nThe goal of this project is to predict which segment a new customer might belong to when contacted.\n\nTwo data files will be used in this project : users.csv and purchases.csv.\n\n\nData description:\n\n* users.csv    : This file includes characteristic feature of users. \n    uid        : user id of users\n    reg_date   : registration date of users\n    device     : the type of device the users used  ( IOS or Android )\n    gender     : gender of customers ( Female or Male )\n    country    : country of customers\n    age        : age of customers\n \n* purchases.csv:\n    uid        : user id of users purchased in users file. \n    date       : the date the customer made a purchase\n    price      : spending amount\n    \n    \n","59a9d066":"Step 2: I will do an aggregation process to reach the total purchase amount in the breakdown of country, device, gender and age.","4e83b27e":"Step 4: In this step, I create a new column called level based customers that contains the categorical         breakdowns of the customers.","4b244e73":"Step 3: I will create a new column called age_cat with the \"cut\" function in order to see the purchases according to the age breakdown more clearly.\n\nNote : Bins rank should be determined according to rational decisions in real life.","1c326552":"According to this data, now we can clearly say that the average purchase amount of an android user from Brazil between 0-18 age rank is 26460.50 usd.","14ab4d03":"Step 5: I will do an aggregation process to reach to customers who are classified according to their categorical breakdowns and their average purchases amount.","7bd27273":"We can now see more clearly the customers' total purchase amount from highest to lowest.","c1eed2f0":"Step 1: In this step, i will merge users and purchases file on \"uid\" to reach all the information of the users who made the purchase."}}