{"cell_type":{"d7dcd55e":"code","e7d025e1":"code","7a9554ef":"code","62c19605":"code","194cbccb":"code","6f8cd2a0":"code","e1c840ee":"code","a4afcded":"code","cf488c96":"code","e7c208ff":"code","64ca9bbf":"code","2f1497fd":"code","5259bdd1":"code","da163107":"code","d2fa539e":"code","3ab73a9d":"code","ce2c9bcd":"code","0feaf343":"code","474618b8":"code","24627b7e":"code","2dd30ad9":"code","ba63f77d":"code","4cbf75a0":"code","c30f90c4":"code","e6692def":"code","062df79e":"code","f5a91be8":"code","8c355362":"code","7f795b4a":"code","5c5f876e":"code","1c405230":"code","1f866a65":"code","98b35f34":"code","5ef4a710":"code","f72dc739":"code","cccf9046":"code","e38bb686":"code","0ab54c5f":"code","9aaaf7c7":"code","c6e93fc1":"code","f9654f9b":"code","8f7a66da":"code","aa1111aa":"code","e7a69e20":"code","55fdd29e":"code","b593dd13":"code","25826d44":"code","65cac3ce":"code","7ebaa756":"code","9419eb31":"code","56ba5b81":"code","3f9c3e13":"code","6bad5b48":"code","709ef78c":"code","cc6e22b1":"code","528c032c":"markdown","662cd73c":"markdown","22fd3b1a":"markdown","0df38e77":"markdown","7bd863e7":"markdown","29d0166b":"markdown","fecf1785":"markdown","afb6f0ed":"markdown","d2f438da":"markdown","1120823e":"markdown","f93317df":"markdown","59e71b7c":"markdown","fcff13d5":"markdown","fdc518a0":"markdown","2476c44c":"markdown","c0f66784":"markdown","7b4de375":"markdown","15fd61ce":"markdown","3bf7e43a":"markdown","07397511":"markdown","35eaa07c":"markdown","bf7541ae":"markdown"},"source":{"d7dcd55e":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt","e7d025e1":"nome = 'Davide'\ncognome = 'Canu'","7a9554ef":"import random\ndef parametri(nome, cognome):\n    seed_alpha = 0\n    seed_emiss = 0\n    for c in nome:\n        seed_alpha += ord(c)\n    for c in cognome:\n        seed_emiss += ord(c)\n\n    random.seed(a=seed_alpha*seed_emiss, version=2)\n    \n    emiss = round(0.780*(1.01+0.05*(random.random())), 3)\n    alpha = round(0.300*(1+0.05*(2*random.random()-1)), 3)\n        \n    return alpha, emiss","62c19605":"alpha, emiss = parametri(nome, cognome)\nprint('Albedo: ' + str(alpha))\nprint('Emissivit\u00e0: ' + str(emiss))","194cbccb":"So = 1367\nSave = So\/4\nsigma = 5.67e-8\nTp = 0 # definizione della variabile","6f8cd2a0":"Tp = (Save*(1-alpha)\/(1-0.5*emiss)\/sigma)**0.25\nTa = ((Tp**4)\/2)**0.25","e1c840ee":"print('Temperatura atmosfera  : ' + str(Ta- 273.15) + '\u00b0C')\nprint('Temperatura del pianeta: ' + str(Tp- 273.15) + '\u00b0C')","a4afcded":"emiss = np.linspace(0,1,101)","cf488c96":"# Tp =\nTp_C=(Save*(1-alpha)\/(1-0.5*emiss)\/sigma)**0.25-273.15","e7c208ff":"Tp_C","64ca9bbf":"plt.figure(figsize=(16,8));\nplt.plot(100*emiss, Tp_C);\n\nplt.xlabel('emissivita [%]');\nplt.ylabel('Tp [\u00b0C]');\n\nplt.xticks(np.arange(0, 101, 2));\nplt.yticks(np.arange(-20, 35, 2));\n\nplt.grid();","2f1497fd":"temperatures = pd.read_csv('..\/input\/climate-change-earth-surface-temperature-data\/GlobalLandTemperaturesByCity.csv')","5259bdd1":"temperatures['dt'] = pd.to_datetime(temperatures['dt'])","da163107":"def country_city(nome, cognome, df):\n    seed = 0\n    for c in (nome+cognome):\n        seed += ord(c)\n\n    countries = ['Spain', 'Germany', 'France', 'Italy', 'Netherlands', 'United Kingdom']\n    country = countries[int(seed%len(countries))]\n    cities = df.loc[df.Country==country].City.unique()\n    city = cities[int(seed%len(cities))]\n    \n    return country, city","d2fa539e":"country, city = country_city(nome, cognome, temperatures)","3ab73a9d":"print(city + ', ' + country)","ce2c9bcd":"temperatures.shape","0feaf343":"data = temperatures.loc[temperatures.City == city]","474618b8":"data.shape","24627b7e":"data.head()","2dd30ad9":"data = data.set_index('dt')","ba63f77d":"temp = data.AverageTemperature","4cbf75a0":"temp","c30f90c4":"plt.figure(figsize=(16,8));\nplt.plot(temp);\nplt.grid();\nplt.title('Temperatura media mensile di ' + city + ', ' + country);\nplt.xlabel('data [anni]');\nplt.ylabel('temperatura [\u00b0C]');\n#plt.savefig('temp.png', dpi=300);","e6692def":"climate = temp.rolling(30*12).mean()","062df79e":"plt.figure(figsize=(16,8))\n#plt.plot(cagliari_temp, label='media mensile');\nplt.plot(climate, label='climate');\nplt.grid();\nplt.title('Temperatura media mensile di ' + city);\nplt.xlabel('data [anni]');\nplt.ylabel('temperatura [\u00b0C]');\nplt.legend();","f5a91be8":"year = 2012\nyear_30 = year - 30","8c355362":"temp_year = temp.loc[temp.index.year == year].values\ntemp_year_30 = temp.loc[temp.index.year == year_30].values","7f795b4a":"print(temp_year)\nprint(temp_year_30)","5c5f876e":"plt.figure(figsize=(16,8))\nplt.plot(temp_year, label=year);\nplt.plot(temp_year_30, label=year_30);\nplt.grid();\nplt.title('Temperatura mensile di ' + city + ', ' + country);\nplt.xlabel('data [anni]');\nplt.ylabel('temperatura [\u00b0C]');\nplt.xticks(np.arange(12), ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])\nplt.legend();","1c405230":"#temp.groupby(temp.index.month).rolling(30).mean().head()","1f866a65":"climate_month = []\nfor i in range(1,13):\n    climate_month.append(temp.loc[temp.index.month == i].rolling(30).mean())","98b35f34":"len(climate_month)","5ef4a710":"climate_month[11]","f72dc739":"climate_year = np.zeros(12)\nclimate_year_30 = np.zeros(12)","cccf9046":"for i in range(12):\n    climate_year[i] = climate_month[i].loc[climate_month[i].index.year == year].values\n    climate_year_30[i] = climate_month[i].loc[climate_month[i].index.year == year_30].values","e38bb686":"climate_year_30","0ab54c5f":"plt.figure(figsize=(16,8))\nplt.plot(climate_year, label=year);\nplt.plot(climate_year_30, label=year_30);\nplt.grid();\nplt.title('Clima mensile di ' + city + ', ' + country);\nplt.xlabel('mese');\nplt.ylabel('temperatura [\u00b0C]');\nplt.xticks(np.arange(12), ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])\nplt.legend();","9aaaf7c7":"print(city, country, (climate_year - climate_year_30).mean(), (climate_year - climate_year_30).max())","c6e93fc1":"import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.basemap import Basemap","f9654f9b":"PrimaryBiomes_names=['Humid',\n                     'Intermediate',\n                     'Semi-arid',\n                     'Desert']","8f7a66da":"def correzione_clima(nome, cognome):\n    seed = 0\n    for c in (nome+cognome):\n        seed += ord(c)\n    gamma = 1 + ((seed%10)\/100)\n    \n    return gamma","aa1111aa":"gamma = correzione_clima(nome, cognome)\nprint('Coefficiente di correzione del clima al 2100: ' + str(gamma))","e7a69e20":"lat = np.load('..\/input\/clima-globale\/lat.npy')\nlon = np.load('..\/input\/clima-globale\/lon.npy')\nlsmask = np.load('..\/input\/clima-globale\/lsmask.npy')\nTclima2020 = np.load('..\/input\/clima-globale\/Tclima2020.npy')\nPclima2020 = np.load('..\/input\/clima-globale\/Pclima2020.npy')\nTclima2100 = np.load('..\/input\/clima-globale\/Tclima2100.npy')\nTclima2100 = Tclima2100*gamma\nPclima2100 = np.load('..\/input\/clima-globale\/Pclima2100.npy')\nTclima2100 *= gamma\nPclima2100 *= gamma","55fdd29e":"Tclima = Tclima2020\nPclima = Pclima2020\n#Tclima = Tclima2100\n#Pclima = Pclima2100","b593dd13":"nlat = len(lat)\nnlon = len(lon)\nnlat_2 = int(nlat \/ 2)\n\n# calcola dal clima i campi che servono per individure i biomi\nP_annual = np.zeros([nlat,nlon])\nT_annual = np.zeros([nlat,nlon])\nT_summer = np.zeros([nlat,nlon])\n\nP_annual = np.sum(Pclima, axis=0)\nT_annual = np.mean(Tclima, axis=0)","25826d44":"# calcola i biomi primari\nPrimaryBiomes = np.zeros([nlat,nlon])\nprint(PrimaryBiomes.shape)","65cac3ce":"PrimaryBiomes[P_annual>=1.5] = 1\nPrimaryBiomes[(P_annual>=0.62)&(P_annual<1.5)] = 2\nPrimaryBiomes[(P_annual>=0.25)&(P_annual<0.62)] = 3\nPrimaryBiomes[P_annual<0.25] = 4","7ebaa756":"plt.figure(figsize=(16, 8))\nm = Basemap(projection='cyl', resolution='c')\n#m = Basemap(projection='ortho', resolution='l', lat_0=39, lon_0=9)\n\n\nxx, yy = np.meshgrid(lon, lat);\n\nm.contourf(xx, yy, PrimaryBiomes, cmap=plt.cm.get_cmap('rainbow', 4), latlon=True);\n#plt.colorbar(np.arange(1,5), PrimaryBiomes_names);\ncbar = plt.colorbar();\ncbar.set_ticks(list())\n\nfor index, label in enumerate(PrimaryBiomes_names):\n    x = 1.5\n    y = (2 * index + 1) \/ 8\n    cbar.ax.text(x, y, label)\n\nm.drawlsmask(resolution='c', land_color='none', ocean_color='w', zorder=25);\nm.drawcoastlines(zorder=26);","9419eb31":"Area = np.zeros([nlat,nlon])\ndx = 360.\/nlon*60*1.852\nfor i in range(nlat):\n    a = np.cos(lat[i]*np.pi\/180.)*dx**2\n    Area[i,:] = a","56ba5b81":"Area_land = Area*lsmask","3f9c3e13":"areas = np.zeros(4)\nfor i in range(4):\n    mask=(PrimaryBiomes==(i+1))\n    a=np.sum(Area_land[mask])\n    print(PrimaryBiomes_names[i]+' area km^2:',np.int(a))\n    areas[i] = np.int(a)","6bad5b48":"areas_2020 = areas\n#areas_2100 = areas","709ef78c":"areas_delta = areas_2100 - areas_2020","cc6e22b1":"for i in range(4):\n    a = areas_delta[i]\n    print(PrimaryBiomes_names[i]+' area km^2:',np.int(a))","528c032c":"- Ta \u00e8 pi\u00f9 grande o pi\u00f9 piccola di Tp? Discutere quali sono le conseguenze di questa differenza di temperatura per i moti atmosferici.\n- I valori di albedo alpha=0.3 ed emissivit\u00e0 emiss=0.78 riproducono l'attuale temperatura media del pianeta Tp=15\u00b0C.\n- Discutere come i valori di alpha ed emiss utilizzati influenzano la Tp trovata. \n- E' uno scenario da riscaldamento globale o da glaciazione? \n- Poich\u00e8 alpha aumenta all'aumentare della nuvolosit\u00e0 media e della superficie dei ghiacciai ed emiss cresce al crescere della concentrazione dei gas serra in atmosfera discutere il risultato trovato in termini di queste grandezze fisiche.","662cd73c":"Variazione delle superfici occupate dai biomi","22fd3b1a":"## Importazione delle librerie\n\nCome primo passo importiamo le librerie che abbiamo utilizzato","0df38e77":"# Esercizio 3\n\n- Mappa della distribuzione dei biomi primari al 2020\n- Mappa della distribuzione dei biomi primari al 2100\n- Calcolo della variazione della superficie occupata dai biomi primari per lo scenario al 2100 rispetto al 2020","7bd863e7":"## Citt\u00e0 e stati\n\nSelezioniamo uno stato ed una citt\u00e0 per l'analisi","29d0166b":"## Confronto tra le temperature mensili\n\nA distanza di 30 anni","fecf1785":"## Clima\n\nDefiniamo il clima: la media sui 30 anni","afb6f0ed":"- Dall'analisi del grafico sopra dire che tipo di azioni si dovrebbero intraprendere, con riferimento all'emissione dei gas serra, per ritornare ad una temperatura media del pianeta Tp=14\u00b0C\n- Potrebbero aumentare o dovrebbero diminuire?","d2f438da":"## Inserire nome e cognome","1120823e":"Converti la colonna dt in formato **datetime**","f93317df":"- Includere la mapppa trovata e discuterla in relazione alle 3 celle della circolazione generale dell'atmosfera.\n- Discutere per ciascuno dei biomi primari le variazioni dell'areale dello scenario del 2100 rispetto a quello del 2020. \n- In particolare cercare di argomentare il perch\u00e8 delle diminuzioni o aumento dell'area di ciascuna delle 4 classi. ","59e71b7c":"# Modello atmosferico a 1 livello\n\n![](http:\/\/)![image.png](attachment:image.png)\n","fcff13d5":"# Esercizio 1\n\n- Calcolo della temperatura di equilibrio radiativo Tp note emissivit\u00e0 ed albedo per modello climatico con atmosfera come corpo grigio ad 1 singolo livello\n- Grafico della temperatura di equilibrio Tp facendo variare l'emissivit\u00e0 tra 0 e 1 per trovare il valore di emiss che riproduce una data Tp  ","fdc518a0":"- Scrivere, e possibilmente ottenere mediante opportuni passaggi dai bilanci energetici, l'equazione per la Tp e la Ta.\n- Consiglio: ottenere la formula per Tp e poi quella di Ta in funzione di Tp","2476c44c":"- Estendere a ciascuna delle sottoclassi dei biomi trovati la discussione precedente.","c0f66784":"# Esercizio 2 \n\n- Grafico del clima per una citt\u00e0\n- Grafico della variazione del clima mensile a distanza di 30 anni per una citt\u00e0","7b4de375":"# Distillato di tecniche\n\nQuesto notebook \u00e8 una versione asciugata dei notebook gi\u00e0 visti nel corso. \nTornate alle versioni estese se qualche passaggio risulta poco chiaro.","15fd61ce":"- Discutere includendo i grafici ottenuti i risultati del cambiamento climatico per la citt\u00e0 analizzata\n- La variazione climatica per la citt\u00e0 \u00e8 coerente con il valire della Tp trovata sopra rispetto a quello attuale di circa 15\u00b0C","3bf7e43a":"Modifichiamo l'indice per avere una serie di misure in funzione del tempo","07397511":"## Dati\n\nimportiamo il dataset GlobalLandTemperaturesByCity.csv e conserviamolo in una variabile","35eaa07c":"**Calcolare superfici al 2020, e al 2100 e sottrarre (previsione al 2100 - stato al 2020) per ottenere la variazione**","bf7541ae":"# Esercizio 4 (extra)\n\n- Mappa della distribuzione dei biomi secondari al 2020\n- Mappa della distribuzione dei biomi secondari al 2100\n- Calcolo della variazione della superficie occupata dai biomi secondari per lo scenario al 2100 rispetto al 2020"}}