{"cell_type":{"4a1b9a1b":"code","5b78cbb9":"code","fe4bf8d6":"code","161d1cdf":"code","3dcf5e48":"code","acc6912a":"code","f120b08d":"code","70b83637":"code","34973306":"code","4e762011":"code","3cf18359":"code","8d0caf5c":"code","9fe12259":"code","97a38904":"code","8ffd7956":"code","1744b729":"code","a6339419":"code","bffc4860":"code","44900c66":"code","1dc943e5":"code","1e79319c":"code","d8725a51":"code","dd747e45":"code","39eb236f":"code","22eb0646":"code","c1f4432b":"code","fba7ee03":"code","8cf924ab":"code","40f2023d":"code","35e2b266":"code","fb786ae1":"code","7fe70f43":"code","01c6da8b":"code","c82804fc":"code","7c92ea32":"code","0dc769de":"code","a9809c66":"code","b6fc27cf":"code","45105c7d":"code","ae82c1dc":"code","c4e86e33":"code","8059ba96":"code","15e92b29":"code","b0a71f52":"code","abe8689f":"code","e21faaec":"code","1e8ea512":"code","7bc01b5a":"code","03e9690e":"code","e9597166":"code","a3025b76":"code","3ef83c48":"code","750b8ed4":"code","3929e33c":"markdown","b2cbf51b":"markdown","5ff4a730":"markdown","d1a53a61":"markdown","c13f9347":"markdown","de00ac7a":"markdown","827f5bf2":"markdown","fa10aeda":"markdown","3d002c82":"markdown","e10bb9d6":"markdown","2efc1a30":"markdown","ad4d0e17":"markdown","88dfdce0":"markdown","581a3a04":"markdown","57bbedea":"markdown","3395bff7":"markdown","12854e53":"markdown","145cdd92":"markdown","018762fb":"markdown","5d7326c9":"markdown","e0551dbb":"markdown","d24a5c0f":"markdown","e6dd5242":"markdown","49619e0d":"markdown","582f6ea4":"markdown","37a7ff52":"markdown","4db03a74":"markdown","9376e466":"markdown","2bed7811":"markdown","dd368767":"markdown","535d0394":"markdown","8b68548a":"markdown","7d0cb1e6":"markdown","1bff1db4":"markdown","7c760f59":"markdown","cb6d1bd2":"markdown","d1f93458":"markdown","0eb06163":"markdown","e8ae02aa":"markdown","80158561":"markdown","7e4ff2ca":"markdown","9e6a338c":"markdown","f52c66c7":"markdown","3ae190a1":"markdown","4ad5aa57":"markdown"},"source":{"4a1b9a1b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nimport warnings\nwarnings.filterwarnings('ignore')\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","5b78cbb9":"\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as mticker\nimport matplotlib.dates as mdates\nimport matplotlib.colors as mcolors\nfrom matplotlib import style\nimport seaborn as sns\nsns.set_style('whitegrid')\nplt.style.use(\"fivethirtyeight\")\n%matplotlib inline\n\n# For reading stock data from yahoo\nfrom pandas_datareader.data import DataReader\n\n# For time stamps\nfrom datetime import datetime\nfrom math import sqrt\n\n#ignore the warnings\nimport warnings\nwarnings.filterwarnings('ignore')\n\n\ntry:\n    import mplfinance as mpf\n    import mpl_finance as mplf\n    from mpl_finance import candlestick_ohlc\nexcept:\n    !pip install mplfinance mpl_finance\n    import mplfinance as mpf\n    import mpl_finance as mplf\n    from mpl_finance import candlestick_ohlc","fe4bf8d6":"nflx = pd.read_csv('..\/input\/netflix-stock-data-live-and-latest\/Netflix_stock_history.csv')\nprint(nflx.head())","161d1cdf":"#Closing Price PLot\nnflx[[\"Close\"]].plot()\n#Volume Plot\nnflx[[\"Volume\"]].plot()","3dcf5e48":"#OHLC Plot using Plotly\nimport plotly.graph_objects as go\n\nfig = go.Figure(data=go.Ohlc(x=nflx['Date'],\n        open=nflx['Open'],\n        high=nflx['High'],\n        low=nflx['Low'],\n        close=nflx['Close']))\nfig.show()","acc6912a":"nflx['SMA5'] = nflx.Close.rolling(5).mean()\nnflx['SMA20'] = nflx.Close.rolling(20).mean()\nnflx['SMA50'] = nflx.Close.rolling(50).mean()\nnflx['SMA200'] = nflx.Close.rolling(200).mean()\nnflx['SMA500'] = nflx.Close.rolling(500).mean()\n\nfig = go.Figure(data=[go.Ohlc(x=nflx['Date'],\n                              open=nflx['Open'],\n                              high=nflx['High'],\n                              low=nflx['Low'],\n                              close=nflx['Close'], name = \"OHLC\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA5, line=dict(color='orange', width=1), name=\"SMA5\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA20, line=dict(color='green', width=1), name=\"SMA20\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA50, line=dict(color='blue', width=1), name=\"SMA50\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA200, line=dict(color='violet', width=1), name=\"SMA200\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA500, line=dict(color='purple', width=1), name=\"SMA500\")])\nfig.show()","f120b08d":"\nnflx['EMA5'] = nflx.Close.ewm(span=5, adjust=False).mean()\nnflx['EMA20'] = nflx.Close.ewm(span=20, adjust=False).mean()\nnflx['EMA50'] = nflx.Close.ewm(span=50, adjust=False).mean()\nnflx['EMA200'] = nflx.Close.ewm(span=200, adjust=False).mean()\nnflx['EMA500'] = nflx.Close.ewm(span=500, adjust=False).mean()\n\nfig = go.Figure(data=[go.Ohlc(x=nflx['Date'],\n                              open=nflx['Open'],\n                              high=nflx['High'],\n                              low=nflx['Low'],\n                              close=nflx['Close'], name = \"OHLC\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA5, line=dict(color='orange', width=1), name=\"EMA5\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA20, line=dict(color='green', width=1), name=\"EMA20\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA50, line=dict(color='blue', width=1), name=\"EMA50\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA200, line=dict(color='violet', width=1), name=\"EMA200\"),\n                      go.Scatter(x=nflx.Date, y=nflx.SMA500, line=dict(color='purple', width=1), name=\"EMA500\")])\nfig.show()","70b83637":"nflx.set_index('Date')","34973306":"nflx['daily_change_pct'] = nflx['Close'].pct_change()*100\nnflx['returns'] = nflx['daily_change_pct'] \/ nflx['Close']  \nnflx.head()","4e762011":"nflx['daily_change_pct'].fillna(0)\nnflx['daily_change_pct'].hist(bins = 50, figsize = (10,5)) \nplt.xlabel('Daily Change Percentage')\nplt.ylabel('Frequency')\nplt.show()\n#print the statistics on daily change percentage\nnflx.daily_change_pct.describe()","3cf18359":"nflx_vol = nflx['Volume'].rolling(7).std()*np.sqrt(7)\nnflx_vol.plot(figsize = (15, 7))","8d0caf5c":"def daily_trend(x):\n    if x > -0.5 and x <= 0.5:\n        return 'No change'\n    elif x > 0.5 and x <= 2:\n        return 'Upto 2% Increase'\n    elif x > -2 and x <= -0.5:\n        return 'Upto 2% Decrease'\n    elif x > 2 and x <= 5:\n        return '2-5% Increase'\n    elif x > -5 and x <= -2:\n        return '2-5% Decrease'\n    elif x > 5 and x <= 10:\n        return '5-10% Increase'\n    elif x > -10 and x <= -5:\n        return '5-10% Decrease'\n    elif x > 10:\n        return '>10% Increase'\n    elif x <= -10:\n        return '>10% Decrease'","9fe12259":"nflx['Trend']= np.zeros(nflx['daily_change_pct'].count()+1)\nnflx['Trend']= nflx['daily_change_pct'].apply(lambda x:daily_trend(x))\nnflx['Trend'].replace('None','No change')\nnflx.head()","97a38904":"\nnflx_pie_data = nflx.groupby('Trend')\n#pie_label = nflx_pie_data['Trend'].unique()\nplt.pie(nflx_pie_data['Trend'].count(), #labels = pie_label, \n        autopct = '%1.1f%%', radius = 2 )\nplt.show()\nax=nflx_pie_data['Trend'].count().sort_values(ascending=False).plot.bar(rot=90)\nplt.show()","8ffd7956":"nflx.index = pd.DatetimeIndex(nflx['Date'])\nmpf.plot(nflx)","1744b729":"mpf.plot(nflx, type='candle', mav = (7, 30, 90, 180, 365), volume = True)","a6339419":"mpf.plot(nflx, type='candle', mav = (7, 30, 90, 180, 365), volume = True , show_nontrading = True)","bffc4860":"nflx.head()","44900c66":"nflx['Shares'] = [1 if nflx.loc[ei, 'SMA20']>nflx.loc[ei, 'SMA50'] else 0 for ei in nflx.index]","1dc943e5":"nflx['Close1'] = nflx['Close'].shift(-1)\nnflx['Profit'] = [nflx.loc[ei, 'Close1'] - nflx.loc[ei, 'Close'] if nflx.loc[ei, 'Shares']==1 else 0 for ei in nflx.index]\nnflx['Profit'].plot()\nplt.axhline(y=0, color='red')","1e79319c":"nflx['wealth'] = nflx['Profit'].cumsum()\nnflx.tail()","d8725a51":"nflx['wealth'].plot()\nplt.title('Total money made by Netflix Stock (number of times ): {}'.format(round((nflx.loc[nflx.index[-2], 'wealth']),1)))","dd747e45":"nflx['LogReturn'] = np.log(nflx['Close']).shift(-1) - np.log(nflx['Close'])\nprint(nflx['LogReturn'])","39eb236f":"from scipy.stats import norm\nmu = nflx['LogReturn'].mean()\nsigma = nflx['LogReturn'].std(ddof=1)\n\ndensity = pd.DataFrame()\ndensity['x'] = np.arange(nflx['LogReturn'].min()-0.01, nflx['LogReturn'].max()+0.01, 0.001)\ndensity['pdf'] = norm.pdf(density['x'], mu, sigma)\n\nnflx['LogReturn'].hist(bins=50, figsize=(15, 8))\nplt.plot(density['x'], density['pdf'], color='red')\nplt.show()","22eb0646":"mu220 = 365*mu\nsigma220 = (365**0.5) * sigma\nfor i in range(-5, 6, 1):\n    drop = norm.cdf((-i)*0.05, mu220, sigma220)\n    jump = norm.cdf(i*0.05, mu220, sigma220)\n    print('The probability of %d percent drop is = %f & The probability of %d percent jump is = %f' % (i*5, round(drop,2), -i*5, round(jump,2)))","c1f4432b":"VaR = norm.ppf(0.05, mu, sigma)\nprint('Single day value at risk is: ', VaR)","fba7ee03":"# Quantile \n# 5% quantile\nprint('5% quantile ', norm.ppf(0.05, mu, sigma))\n# 95% quantile\nprint('95% quantile ', norm.ppf(0.95, mu, sigma))","8cf924ab":"nflx['logReturn'] = np.log(nflx['Close'].shift(-1)) - np.log(nflx['Close'])\nsample_size = nflx['logReturn'].shape[0]\nsample_mean = nflx['logReturn'].mean()\nsample_std = nflx['logReturn'].std(ddof=1) \/ sample_size**0.5\n# left and right quantile\nfor i in range(1,10):\n    z_left = norm.ppf(0.05*i)\n    z_right = norm.ppf((1-0.05*i))\n    interval_left = sample_mean+z_left*sample_std\n    interval_right = sample_mean+z_right*sample_std\n    print('%d percent confidence interval is ' % (100-i*2*5), ( round(interval_left,6), round(interval_right,6)))","40f2023d":"try:\n    from finta import TA\n    from backtesting import Backtest, Strategy\n    from backtesting.lib import crossover\nexcept:\n    !pip install finta backtesting\n    from finta import TA\n    from backtesting import Backtest, Strategy\n    from backtesting.lib import crossover\n","35e2b266":"fin_nflx = pd.read_csv('..\/input\/netflix-stock-data-live-and-latest\/Netflix_stock_history.csv', index_col=\"Date\", parse_dates=True)\nprint(fin_nflx.head())\nohlc=fin_nflx\nprint(TA.SMA(ohlc, 42))\n#will return Pandas Series object with \"Awesome oscillator\" values\nTA.AO(ohlc)\n#expects [\"volume\"] column as input\nprint(TA.OBV(ohlc))\n#will return Series with Bollinger Bands columns [BB_UPPER, BB_LOWER]\nprint(TA.BBANDS(ohlc))\n#will return Series with calculated BBANDS values but will use KAMA instead of MA for calculation, other types of Moving Averages are allowed as well.\nprint(TA.BBANDS(ohlc, MA=TA.KAMA(ohlc, 20)))","fb786ae1":"\n# calc bol band\nbbands = TA.BBANDS(fin_nflx, 30)\n\n# cherry pick what to show on the chart\nbands_plot = pd.concat([bbands.BB_UPPER, bbands.BB_LOWER], axis=1)\n\napd = mpf.make_addplot(bands_plot.tail(300))\n\nmpf.plot(fin_nflx.tail(300), type='candle', style='charles',\n        title='nflx BBANDS(30)',\n        ylabel='Price (USD)',\n        ylabel_lower='Volume',\n        volume=True,\n        figscale=1.5,\n        addplot=apd\n        )\n\napd = mpf.make_addplot(bands_plot.head(300))\n\nmpf.plot(fin_nflx.head(300), type='candle', style='charles',\n        title='nflx BBANDS(30)',\n        ylabel='Price (USD)',\n        ylabel_lower='Volume',\n        volume=True,\n        figscale=1.5,\n        addplot=apd\n        )","7fe70f43":"\nfunction_dict = {' Simple Moving Average ' : 'SMA',\n                 ' Simple Moving Median ' : 'SMM',\n                 ' Smoothed Simple Moving Average ' : 'SSMA',\n                 ' Exponential Moving Average ' : 'EMA',\n                 ' Double Exponential Moving Average ' : 'DEMA',\n                 ' Triple Exponential Moving Average ' : 'TEMA',\n                 ' Triangular Moving Average ' : 'TRIMA',\n                 ' Triple Exponential Moving Average Oscillator ' : 'TRIX',\n                 ' Volume Adjusted Moving Average ' : 'VAMA',\n                 ' Kaufman Efficiency Indicator ' : 'ER',\n                 ' Kaufmans Adaptive Moving Average ' : 'KAMA',\n                 ' Zero Lag Exponential Moving Average ' : 'ZLEMA',\n                 ' Weighted Moving Average ' : 'WMA',\n                 ' Hull Moving Average ' : 'HMA',\n                 ' Elastic Volume Moving Average ' : 'EVWMA',\n                 ' Volume Weighted Average Price ' : 'VWAP',\n                 ' Smoothed Moving Average ' : 'SMMA',\n                 ' Fractal Adaptive Moving Average ' : 'FRAMA',\n                 ' Moving Average Convergence Divergence ' : 'MACD',\n                 ' Percentage Price Oscillator ' : 'PPO',\n                 ' Volume-Weighted MACD ' : 'VW_MACD',\n                 ' Elastic-Volume weighted MACD ' : 'EV_MACD',\n                 ' Market Momentum ' : 'MOM',\n                 ' Rate-of-Change ' : 'ROC',\n                 ' Relative Strength Index ' : 'RSI',\n                 ' Inverse Fisher Transform RSI ' : 'IFT_RSI',\n                 ' True Range ' : 'TR',\n                 ' Average True Range ' : 'ATR',\n                 ' Stop-and-Reverse ' : 'SAR',\n                 ' Bollinger Bands ' : 'BBANDS',\n                 ' Bollinger Bands Width ' : 'BBWIDTH',\n                 ' Momentum Breakout Bands ' : 'MOBO',\n                 ' Percent B ' : 'PERCENT_B',\n                 ' Keltner Channels ' : 'KC',\n                 ' Donchian Channel ' : 'DO',\n                 ' Directional Movement Indicator ' : 'DMI',\n                 ' Average Directional Index ' : 'ADX',\n                 ' Pivot Points ' : 'PIVOT',\n                 ' Fibonacci Pivot Points ' : 'PIVOT_FIB',\n                 ' Stochastic Oscillator Percent K ' : 'STOCH',\n                 ' Stochastic oscillator Percent D ' : 'STOCHD',\n                 ' Stochastic RSI ' : 'STOCHRSI',\n                 ' Williams Percent R ' : 'WILLIAMS',\n                 ' Ultimate Oscillator ' : 'UO',\n                 ' Awesome Oscillator ' : 'AO',\n                 ' Mass Index ' : 'MI',\n                 ' Vortex Indicator ' : 'VORTEX',\n                 ' Know Sure Thing ' : 'KST',\n                 ' True Strength Index ' : 'TSI',\n                 ' Typical Price ' : 'TP',\n                 ' Accumulation-Distribution Line ' : 'ADL',\n                 ' Chaikin Oscillator ' : 'CHAIKIN',\n                 ' Money Flow Index ' : 'MFI',\n                 ' On Balance Volume ' : 'OBV',\n                 ' Weighter OBV ' : 'WOBV',\n                 ' Volume Zone Oscillator ' : 'VZO',\n                 ' Price Zone Oscillator ' : 'PZO',\n                 ' Elders Force Index ' : 'EFI',\n                 ' Cummulative Force Index ' : 'CFI',\n                 ' Bull power and Bear Power ' : 'EBBP',\n                 ' Ease of Movement ' : 'EMV',\n                 ' Commodity Channel Index ' : 'CCI',\n                 ' Coppock Curve ' : 'COPP',\n                 ' Buy and Sell Pressure ' : 'BASP',\n                 ' Normalized BASP ' : 'BASPN',\n                 ' Chande Momentum Oscillator ' : 'CMO',\n                 ' Chandelier Exit ' : 'CHANDELIER',\n                 ' Qstick ' : 'QSTICK',\n                 #' Twiggs Money Index ' : 'TMF',\n                 ' Wave Trend Oscillator ' : 'WTO',\n                 ' Fisher Transform ' : 'FISH',\n                 ' Ichimoku Cloud ' : 'ICHIMOKU',\n                 ' Adaptive Price Zone ' : 'APZ',\n                 #' Squeeze Momentum Indicator ' : 'SQZMI',\n                 ' Volume Price Trend ' : 'VPT',\n                 ' Finite Volume Element ' : 'FVE',\n                 ' Volume Flow Indicator ' : 'VFI',\n                 ' Moving Standard deviation ' : 'MSD',\n                 ' Schaff Trend Cycle ' : 'STC'}\n\nfor key, value in function_dict .items():\n    function_name = \"TA.\" + value + \"(ohlc).plot(title='\" + key + \"')\"\n    result = eval(function_name)\n","01c6da8b":"# Defining DEMA cross strategy\nclass DemaCross(Strategy):\n\n    def init(self):\n\n        self.ma1 = self.I(TA.DEMA, ohlc, 10)\n        self.ma2 = self.I(TA.DEMA, ohlc, 20)\n\n    def next(self):\n        if crossover(self.ma1, self.ma2):\n            self.buy()\n        elif crossover(self.ma2, self.ma1):\n            self.sell()","c82804fc":"bt = Backtest(ohlc, DemaCross,\n              cash=10000, commission=0.025)","7c92ea32":"bt.run()","0dc769de":"def sharpe_ratio(return_series, N, rf):\n    mean = return_series.mean() * N -rf\n    sigma = return_series.std() * np.sqrt(N)\n    return mean \/ sigma\n\nN = 255 #255 trading days in a year\nrf =0.018 #1.8% risk free rate\nnflx.columns\ntemp_df=nflx[['Close']]\nsharpes = temp_df.apply(sharpe_ratio, args=(N,rf,))#,axis=0)\nprint(\"The Sharpe Ratio for the stock i =\" , round(sharpes[0],2))","a9809c66":"def calculate_sortino(series,N, rf):\n    expected_return = np.mean(series)\n    below_avg = [i for i in series if i < expected_return]\n    risk_free = rf\n    sortino = (expected_return - risk_free) \/ np.std(below_avg)\n    return round(sortino, 2)\n\nsortinos = temp_df.apply(calculate_sortino, args=(N,rf,))\nprint(\"The Sortino Ratio for the stock is =\" , round(sortinos[0],2))","b6fc27cf":"def max_drawdown(return_series):\n    comp_ret = (return_series+1).cumprod()\n    peak = comp_ret.expanding(min_periods=1).max()\n    dd = (comp_ret\/peak)-1\n    return dd.min()\n\n\nmax_drawdowns = temp_df.apply(max_drawdown,axis=0)\nprint(\"The max_drawdowns Ratio for the stock is =\" , round(max_drawdowns[0],2))","45105c7d":"def bollinger_bands_price(price):\n    up, mid, low = BBANDS(close, timeperiod=20, nbdevup=2, nbdevdn=2, matype=0)\n    bollinger_bands_price = (price['Close'] - low) \/ (up - low)\n    return bollinger_bands_price","ae82c1dc":"# Histogram of the daily price change percent of 'Close' price\nnflx['Close'].pct_change().plot.hist(bins=50)\nplt.title('Daily Price: 1-Day Percent Change')\nplt.show() ","c4e86e33":"# Create 5-day % changes of Last for the current day, and 5 days in the future\nnflx['5d_future_close'] = nflx['Close'].shift(-5)\nnflx['5d_close_future_pct'] = nflx['5d_future_close'].pct_change(5)\nnflx['5d_close_pct'] = nflx['Close'].pct_change(5)","8059ba96":"# Calculate the correlation matrix between the 5d close pecentage changes (current and future)\ncorr = nflx[['5d_close_pct', '5d_close_future_pct']].corr()","15e92b29":"# Scatter the current 5-day percent change vs the future 5-day percent change\nplt.scatter(nflx['5d_close_pct'], nflx['5d_close_future_pct'])\nplt.title('Current vs. Future 5-Day % Change')\nplt.show()","b0a71f52":"# a list of the feature names for later\nfeature_names = ['5d_close_pct']  ","abe8689f":"# Drop all na values\nnflx = nflx.dropna()\n\n# Create features and targets\n# use feature_names for features; 5d_close_future_pct for targets\nfeatures = nflx[feature_names]\ntargets = nflx['5d_close_future_pct']\n\n# Create DataFrame from target column and feature columns\nfeat_targ_df = nflx[['5d_close_future_pct'] + feature_names]\n\n# Calculate correlation matrix\ncorr = feat_targ_df.corr()\nprint(corr)","e21faaec":"import seaborn as sns\n# Plot heatmap of correlation matrix\nsns.heatmap(corr, annot=True)\nplt.yticks(rotation=0); plt.xticks(rotation=90) # fix ticklabel directions\nplt.show() # show the plot","1e8ea512":"import statsmodels.api as sm\n\n# Add a constant to the features\nlinear_features = sm.add_constant(features)\n\n# Create a size for the training set that is 80% of the total number of rows\n#.shape gives us the number of rows in our data, and convert to an int\ntrain_size = int(0.8 * features.shape[0])\n\n# split features and targets using python indexing\ntrain_features = linear_features[:train_size]\ntrain_targets = targets[:train_size]\ntest_features = linear_features[train_size:]\ntest_targets = targets[train_size:]\nprint(linear_features.shape, train_features.shape, test_features.shape)","7bc01b5a":"# Create the linear model and complete the least squares fit\nmodel = sm.OLS(train_targets, train_features)\nresults = model.fit()  # fit the model\nprint(results.summary())\n\n# examine pvalues\n# Features with p <= 0.05 are typically considered significantly different from 0\nprint(results.pvalues)\n\n# Make predictions from our model for train and test sets\ntrain_predictions = results.predict(train_features)\ntest_predictions = results.predict(test_features)","03e9690e":"try:\n    from fbprophet.plot import plot_plotly\n    from fbprophet import Prophet\nexcept:\n    !pip install fbprophet    # install Faceboo Prophet\n    from fbprophet.plot import plot_plotly\n    from fbprophet import Prophet\n    ","e9597166":"from fbprophet.plot import plot_plotly\nfrom fbprophet import Prophet","a3025b76":"def plot_close_val(data_frame, column, stock):\n    plt.figure(figsize=(16,6))\n    plt.title(column + ' Price History for ' + stock )\n    plt.plot(data_frame[column])\n    plt.xlabel('Date', fontsize=18)\n    plt.ylabel(column + ' Price USD ($) for ' + stock, fontsize=18)\n    plt.show()","3ef83c48":"def fb_prophet_plot(df, param, stock):\n    # Check the dataset\n    #df.head()\n    # Create Dataset based on the FB Prophet standard ds\/y\n    df2 = pd.DataFrame([], columns = ['ds', 'y'])\n    df2.columns=['ds','y']\n    df2['ds']=pd.to_datetime(df.index,format='%Y-%m')\n    #Assign the Parameter\n    df2['y']=df[param].values\n    #check the new DS\n    #df2.head()\n    \n    #create a new Prophet Model\n    model=Prophet(interval_width=0.95,yearly_seasonality=True)\n    \n    #Fit the Model\n    model.fit(df2)\n    #Predict the future\n    future=model.make_future_dataframe(periods=50, freq='MS')\n    forecast=model.predict(future)\n    #Save the predicted model\n    preds= forecast['yhat'][:-50]\n    #plot the graph\n    title = 'FB Prophet predictions for ==> ' + stock\n    plt.figure(figsize=(16,8))\n    plt.plot(df2.ds,preds,color='#555555',label=' Predictions')\n    plt.plot(df2.ds,df2.y,color='#1155FF',label='Actual')\n    plt.title(title)\n    plt.legend()\n    plt.show()\n    figure=model.plot(forecast,xlabel='Date',ylabel='Price')\n    figure.set_size_inches(16,8)\n    plt.title(title)\n    model.plot_components(forecast)\n    plt.show()","750b8ed4":"plot_close_val(nflx, 'Close', 'nflx') # Plot the Closing Price\nfb_prophet_plot(nflx, 'Close', 'nflx')\n\nprint(\"All forecasting done!\")","3929e33c":"#### Create a histogram on the daily changes \/ percentage","b2cbf51b":"### Tag the dates as profit when the closing price is greater than the preceding date \n\n#### Plot the dates of wealth generation over the years","5ff4a730":"# THIS IS A WORK IN PROGRESS ","d1a53a61":"#### A Pie & Bar Chart of Daily Percentage change categories","c13f9347":"# [7\ufe0f\u20e3 Let us do a bit of forecasting using Regression ](#7)\n\n Some inspiration from the following post as well\n*  [MLQ.AI](https:\/\/www.mlq.ai\/price-prediction-with-linear-regression\/)\n","de00ac7a":"# [2\ufe0f\u20e3. Dataset Visualization Using Simple Plots](#2)\n\n\n## Initial simple plots using \n* *Pandas Plotting for opening and closing prices*\n* *Plotly OHLC (Open-High-Low-Close) Charts*\n* *Statistical Moving Average (SMA) Charts*\n* *Exponential Moving Average (EMA) Charts*\n","827f5bf2":"# [8\ufe0f\u20e3 Let us do a Forecasting using FB Prophet ](#8)\n","fa10aeda":"## Try Bollinger Bands Price","3d002c82":"### Let us try Sharpe Ratio","e10bb9d6":"# [3\ufe0f\u20e3. Dataset Visualization Using MPLFinance Plots](#3)\n","2efc1a30":"#### What is the Value At Risk for the Stock?","ad4d0e17":"# [\ud83d\udd2e\ud83c\udfaf\ud83d\udcca Netflix Stock Price Performance Analysis and Data Visualization \ud83d\udcca\ud83c\udfaf\ud83d\udd2e](#0)\n","88dfdce0":"# [1\ufe0f\u20e3. Dataset Loading](#1)\r>","581a3a04":"#### Reset the index on to the Date column","57bbedea":"###### Following is a reuse from the kernel https:\/\/www.kaggle.com\/datapple\/eda-tesla-stock-price-financial-analysis and modified for the analysis","3395bff7":"### Let us check the Backtesting summary","12854e53":"#### Calculate the cumulated wealth on the stock","145cdd92":"#### CandleStick MPLFinance plot with Moving Averages for (7, 30, 90, 180, 365) days ","018762fb":"# [4\ufe0f\u20e3. Stock Data Analysis using standard techniques](#4)\n","5d7326c9":"> ","e0551dbb":"# Use of Facebook Prophet for Stock Forecasting\n## Netflix Stock forecast \n* This kernel uses Facebook Prophet (which uses SKLEARN) and Neural Prophet (which uses PyTorch) libaries to predict stocks. This kernel splits the NASDAQ stocks into ten folds and creates 10 output files each for the stocks in a PDF Format\n\n###  Yahoo! DataReader Download\n<div class=\"alert alert-block alert-info\">\n<b>Step-1:<\/b> Download data using Yahoo! Finance Data Reader<\/div>\n\n###  Facebook Prophet Models\n<div class=\"alert alert-block alert-info\">\n<b>Step-2:<\/b> Build Facebook Prophet Input dataset<\/div>\n<div class=\"alert alert-block alert-info\">\n<b>Step-3:<\/b> Run Prophet Model<\/div>\n<div class=\"alert alert-block alert-info\">\n<b>Step-4:<\/b> Generate Model Visualization <\/div>\n<div class=\"alert alert-block alert-info\">\n<b>Step-5:<\/b> Generate the Image Files <\/div>\n<div class=\"alert alert-block alert-info\">\n<b>Step-6:<\/b> Consolidate Image Files for Facebook Prophet Model <\/div>\n\n###  Neural Prophet Models\n<div class=\"alert alert-block alert-warning\">\n<b>Step-7-11:<\/b> Repeat Steps 2-6 for Neural Prophet Model <\/div>\n\n","d24a5c0f":"#### Simple Pandas plots for the price and volume of Netflix Stock","e6dd5242":"# [6\ufe0f\u20e3 Let us do a financial ratios calculation](#6)\n","49619e0d":"#### What is the Mu and Sigma for the stock at 5 and 95 percentile?","582f6ea4":"#### OHLC Chart","37a7ff52":"#### Another Candle Stick Plot with Moving Averages and show of non trading days","4db03a74":"#### Identify the days where the SMA20 is greater than SMA50 and tag the dates.These are target investment dates","9376e466":"#### EMA chart plotting for 5, 20, 50, 200, 500 day moving averages","2bed7811":"#### SMA chart plotting for 5, 20, 50, 200, 500 day moving averages","dd368767":"## Use backtesting library to do a simple data backtesting","535d0394":"#### Plot 7-day rolling averages for volume of stocks traded","8b68548a":" *  Task-1 Dataset Load  \n *  Task-2 Data Visualization Charts  \n *  Task-3 Statistical Analysis and Inference  \n *  Task-4 Linear Regression and Forecasting \n","7d0cb1e6":"<a id=1><h3 >1\ufe0f\u20e3 Dataset Loading<br><\/h3><\/a>\n<a id=2><h3 >2\ufe0f\u20e3 Dataset Visualization Using Simple Plots<br><\/h3><\/a>\n<a id=3><h3 >3\ufe0f\u20e3 Dataset Visualization Using MPLFinance Plots<br><\/h3><\/a>\n<a id=4><h3 >4\ufe0f\u20e3 Stock Analysis of the data<br><\/h3><\/a>\n<a id=5><h3 >5\ufe0f\u20e3 Let us do a financial ratios calculation using FINTA library <br><\/h3><\/a>\n<a id=6><h3 >6\ufe0f\u20e3 Let us do a financial ratios calculation<br><\/h3><\/a>\n<a id=7><h3 >7\ufe0f\u20e3 Let us do a bit of forecasting using Facebook Prophet Regression <br><\/h3><\/a>\n<a id=8><h3 >8\ufe0f\u20e3 Let us do a Facebook Prophet library<br><\/h3><\/a>\n","1bff1db4":"#### Define a daily trend function for usage in aggregation","7c760f59":"#### SMA chart plotting for 5, 20, 50, 200, 500 day moving averages","cb6d1bd2":"* Simple Moving Average 'SMA'\n* Simple Moving Median 'SMM'\n* Smoothed Simple Moving Average 'SSMA'\n* Exponential Moving Average 'EMA'\n* Double Exponential Moving Average 'DEMA'\n* Triple Exponential Moving Average 'TEMA'\n* Triangular Moving Average 'TRIMA'\n* Triple Exponential Moving Average Oscillator 'TRIX'\n* Volume Adjusted Moving Average 'VAMA'\n* Kaufman Efficiency Indicator 'ER'\n* Kaufman's Adaptive Moving Average 'KAMA'\n* Zero Lag Exponential Moving Average 'ZLEMA'\n* Weighted Moving Average 'WMA'\n* Hull Moving Average 'HMA'\n* Elastic Volume Moving Average 'EVWMA'\n* Volume Weighted Average Price 'VWAP'\n* Smoothed Moving Average 'SMMA'\n* Fractal Adaptive Moving Average 'FRAMA'\n* Moving Average Convergence Divergence 'MACD'\n* Percentage Price Oscillator 'PPO'\n* Volume-Weighted MACD 'VW_MACD'\n* Elastic-Volume weighted MACD 'EV_MACD'\n* Market Momentum 'MOM'\n* Rate-of-Change 'ROC'\n* Relative Strenght Index 'RSI'\n* Inverse Fisher Transform RSI 'IFT_RSI'\n* True Range 'TR'\n* Average True Range 'ATR'\n* Stop-and-Reverse 'SAR'\n* Bollinger Bands 'BBANDS'\n* Bollinger Bands Width 'BBWIDTH'\n* Momentum Breakout Bands 'MOBO'\n* Percent B 'PERCENT_B'\n* Keltner Channels 'KC'\n* Donchian Channel 'DO'\n* Directional Movement Indicator 'DMI'\n* Average Directional Index 'ADX'\n* Pivot Points 'PIVOT'\n* Fibonacci Pivot Points 'PIVOT_FIB'\n* Stochastic Oscillator %K 'STOCH'\n* Stochastic oscillator %D 'STOCHD'\n* Stochastic RSI 'STOCHRSI'\n* Williams %R 'WILLIAMS'\n* Ultimate Oscillator 'UO'\n* Awesome Oscillator 'AO'\n* Mass Index 'MI'\n* Vortex Indicator 'VORTEX'\n* Know Sure Thing 'KST'\n* True Strength Index 'TSI'\n* Typical Price 'TP'\n* Accumulation-Distribution Line 'ADL'\n* Chaikin Oscillator 'CHAIKIN'\n* Money Flow Index 'MFI'\n* On Balance Volume 'OBV'\n* Weighter OBV 'WOBV'\n* Volume Zone Oscillator 'VZO'\n* Price Zone Oscillator 'PZO'\n* Elder's Force Index 'EFI'\n* Cummulative Force Index 'CFI'\n* Bull power and Bear Power 'EBBP'\n* Ease of Movement 'EMV'\n* Commodity Channel Index 'CCI'\n* Coppock Curve 'COPP'\n* Buy and Sell Pressure 'BASP'\n* Normalized BASP 'BASPN'\n* Chande Momentum Oscillator 'CMO'\n* Chandelier Exit 'CHANDELIER'\n* Qstick 'QSTICK'\n* Twiggs Money Index 'TMF'\n* Wave Trend Oscillator 'WTO'\n* Fisher Transform 'FISH'\n* Ichimoku Cloud 'ICHIMOKU'\n* Adaptive Price Zone 'APZ'\n* Squeeze Momentum Indicator 'SQZMI'\n* Volume Price Trend 'VPT'\n* Finite Volume Element 'FVE'\n* Volume Flow Indicator 'VFI'\n* Moving Standard deviation 'MSD'\n* Schaff Trend Cycle 'STC'\n","d1f93458":"#### General MPLFinance Plot","0eb06163":"## It is very evidend that albeit some volatility, it is a pretty solid long term stock with outstanding run over last 5 years.","e8ae02aa":"# [5\ufe0f\u20e3 Let us do a financial ratios calculation using FINTA library](#5)\ra>\n","80158561":"#### Calculate the probability of better investment","7e4ff2ca":"#### Create a column on daily change percentages for the Stock","9e6a338c":"#### What is the confidence level at various levels?","f52c66c7":"#### Check for the probability od drops and jumps for a range","3ae190a1":"#### Plot a histogram on logarithm of returns","4ad5aa57":"#### Build a probability distribution function plot using scipy stats package"}}