{"cell_type":{"7d2d31f9":"code","32822530":"code","538bcf86":"code","f4644233":"code","34ddd7a5":"code","6e8d3ac0":"code","3891d3bc":"code","16379ef6":"code","bf0bf377":"code","e1596305":"code","acabb09f":"code","5cc5fc59":"code","a07a17eb":"code","d7f374ec":"code","5fa080ca":"code","dc41f3ba":"code","91c64274":"code","94018f98":"code","d5f43dbc":"markdown","a2194413":"markdown","85a3d861":"markdown","48f25fe3":"markdown"},"source":{"7d2d31f9":"# Imports\nimport os\nimport numpy as np\nimport pandas as pd\n\n# Locating .csv files\npath = '..\/input\/silkboard-bangalore-ambient-air-covid19lockdown\/'\ncsv = os.listdir(path)\ncsv","32822530":"# Creating list of all files name\nfiles = {'SO2':0, 'PM10':0, 'CO':0, 'PM25':0, 'O3':0, 'NO2':0}\n\n# Reading all .csv files\ncount = 0\nfor key in files.keys():\n    files[key] = pd.read_csv(path + csv[count], index_col=0)\n    count += 1   ","538bcf86":"# Lets look at any one dataset \nfiles['PM25'].head(3)","f4644233":"# Info\nfiles['PM25'].info()   # Note that every other dataset has same format ","34ddd7a5":"# Adding a new column 'Date' that represents date for each file\nfor key in files.keys():\n    files[key]['Date'] = pd.to_datetime(files[key]['local']).apply(lambda x: x.date().strftime('%d-%m-%Y'))","6e8d3ac0":"# Lets look at the unique terms and attributes for each dataset\nfor key in files.keys():\n    print('Gas : {}'.format(key))\n    print(files[key].nunique())\n    print()","3891d3bc":"files['PM25'].head(3)","16379ef6":"# Imports \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nimport cufflinks as cff\ninit_notebook_mode(connected=True)\ncff.go_offline()\n%matplotlib inline","bf0bf377":"# Creating an empty dataframe that will hold all mean values for one particular date\ndf = pd.DataFrame(columns=['SO2', 'PM10', 'CO', 'PM25', 'O3', 'NO2'])\ndf","e1596305":"# Replacing old files with new one that holds date as index & value as columns\nfor col in df.columns:\n    x = pd.DataFrame(data=np.array(files[col]['value']), index=files[col]['Date'],columns=[col])\n    x = pd.DataFrame(x.groupby(by=x.index)[col].mean())\n    files[str(col)] = x\n    \n# Concating all files into single dataframe\ndf = pd.concat([files[key] for key in files.keys()], axis=1)\ndf = df.dropna()\ndf.index.name = 'Date'\ndf.head()","acabb09f":"# Dataframe info\ndf.info()","5cc5fc59":"# Adding a day & month column\ndf['Day'] = [date.split('-')[0] for date in df.index]\ndf['Month'] = [date.split('-')[1] for date in df.index]\n\n# Sorting dataframe by month and day\ndf = df.sort_values(by=['Month', 'Day'])\ndf.head()","a07a17eb":"# Visualizing Gases Concentration per Day using Line Plot\ndf.drop(['Day', 'Month'], axis=1).iplot(kind='line', title='Gases Concentration per Day')","d7f374ec":"fig = df[['SO2', 'NO2', 'O3', 'PM10', 'CO']].iplot(kind='line', title='Gases Concentration per Day (excluding PM25)')","5fa080ca":"# Mean Concentration of Gases per Month\ndf_2 = df.groupby(by='Month').mean()\n\n# Replacing index with month names\ndf_2['Month'] = ['February', 'March', 'April', 'May', 'June']\ndf_2.set_index('Month', inplace=True)\ndf_2","dc41f3ba":"# Relation between Gases wrt df_2\nsns.heatmap(data=df_2.corr(), cmap='pink_r',linewidth=1, linecolor='white', annot=True)","91c64274":"# Visualizing Gases Concentration per Month using Line plot\nfig, axes = plt.subplots(nrows=3, ncols=2, figsize=(15,14))\n\nsns.lineplot(x=df_2.index, y=df_2['SO2'], ax=axes[0, 0], sort=False, marker='o')\nsns.lineplot(x=df_2.index, y=df_2['PM10'], ax=axes[0, 1], sort=False, marker='o')\nsns.lineplot(x=df_2.index, y=df_2['CO'], ax=axes[1, 0], sort=False, marker='o')\nsns.lineplot(x=df_2.index, y=df_2['PM25'], ax=axes[1, 1], sort=False, marker='o')\nsns.lineplot(x=df_2.index, y=df_2['O3'], ax=axes[2, 0], sort=False, marker='o')\nsns.lineplot(x=df_2.index, y=df_2['NO2'], ax=axes[2, 1], sort=False, marker='o')","94018f98":"# Pie Plot representing Gases Concentration per Month in percentage\n\nfig, axes = plt.subplots(3, 2, figsize=(22,15))\n\nfig1 = axes[0, 0].pie(df_2['SO2'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[0, 0].set_title('SO2 Concentration per Month')\n\nfig2 = axes[0, 1].pie(df_2['PM10'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[0, 1].set_title('PM10 Concentration per Month')\n\nfig3 = axes[1, 0].pie(df_2['CO'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[1, 0].set_title('CO Concentration per Month')\n\nfig4 = axes[1, 1].pie(df_2['PM25'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[1, 1].set_title('PM25 Concentration per Month')\n\nfig5 = axes[2, 0].pie(df_2['O3'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[2, 0].set_title('O3 Concentration per Month')\n\nfig6 = axes[2, 1].pie(df_2['NO2'], labels=df_2.index, autopct='%1.1f%%', startangle=90)\naxes[2, 1].set_title('NO2 Concentration per Month')\n","d5f43dbc":"# Using the Date Column for visualizing changes in value of gases","a2194413":"# df : Dataframe representing Values of Gases per Day","85a3d861":"# df_2 : Mean Concentration of Gases per Month","48f25fe3":"- Thank You.\n- Suggestions are welcomed!"}}