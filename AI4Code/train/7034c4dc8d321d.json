{"cell_type":{"d30508d5":"code","78191afc":"code","11ecd391":"code","a58a51fc":"code","55c1736a":"code","e37237f4":"code","a54e51e2":"code","78354687":"code","33910ffd":"code","804eefe7":"code","038b03cc":"code","dd1995b2":"code","142efddd":"code","35c166f0":"code","f1ad2004":"code","be6e62f3":"code","8a2f08d8":"code","5781baaa":"code","69e222b9":"code","d1cf997b":"code","1a33899a":"code","4a6f599b":"code","7279cfea":"code","dc175a4f":"code","133c6a35":"code","dda3f9ff":"code","c1f8243e":"code","15da850a":"code","2825cdff":"code","72cca6b9":"code","06766e79":"code","adb096b5":"code","5962b283":"code","9bfb48da":"code","6b222945":"code","cb10e3b1":"code","4f796c57":"code","8facfa43":"code","3d3dd8fb":"code","d3aba5b8":"code","e8799509":"code","cc4cfddf":"code","c4891b53":"code","ee66b6e2":"code","e10c5f1f":"code","539e1444":"code","5de62543":"code","63f86818":"code","2b76deb8":"code","c8494e5c":"code","bd759f4f":"code","8614b1d9":"code","ff7bb8c4":"code","6faf762b":"code","5ddbbf5c":"code","0e102dbe":"code","3c10b80e":"code","c1b1d98f":"code","34433c98":"code","4cda0fd7":"code","4b9f216f":"markdown","38dd78e2":"markdown","6fe698e9":"markdown","5f1e0e42":"markdown","4f145784":"markdown","b2adf837":"markdown","e8ca00d0":"markdown","9d9189ac":"markdown"},"source":{"d30508d5":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","78191afc":"df=pd.read_csv('..\/input\/ibm-hr-analytics-attrition-dataset\/WA_Fn-UseC_-HR-Employee-Attrition.csv',index_col='EmployeeNumber')","11ecd391":"df.head()","a58a51fc":"df.info()","55c1736a":"plt.figure(figsize=(10,6))\nsns.heatmap(df.isna(),cmap='viridis',cbar=False, yticklabels=False);","e37237f4":"#no null value present as seen from above heatmap.","a54e51e2":"for col in df.columns:\n    print(\"{}:{}\".format(col,df[col].nunique()))\n    print(\"=======================================\")","78354687":"df.drop(columns=['Over18','StandardHours','EmployeeCount'],inplace=True)","33910ffd":"df['Attrition']=df['Attrition'].map({'Yes':1, 'No':0})","804eefe7":"categorical_col=[]\nfor col in df.columns:\n    if df[col].dtype== object and df[col].nunique()<=50:\n        categorical_col.append(col)\nprint(categorical_col)","038b03cc":"for col in categorical_col:\n    print(\"{}:\\n{}\".format(col,df[col].value_counts()))\n    print(\"=======================================\")","dd1995b2":"df.columns","142efddd":"sns.countplot(x='Attrition',data=df)","35c166f0":"sns.countplot(x='Attrition',hue='PerformanceRating',data=df)","f1ad2004":"sns.countplot(x='Attrition',hue='JobInvolvement',data=df)","be6e62f3":"sns.scatterplot(x='Age',y='MonthlyIncome',data=df)","8a2f08d8":"sns.kdeplot(df['Age'],df['MonthlyIncome'],shade=True,cbar=True)","5781baaa":"plt.figure(figsize=(18,12))\nsns.heatmap(df.corr(),cmap='RdYlGn',annot=True,fmt='.2f')","69e222b9":"df.corr()['Attrition'].sort_values(ascending=False)","d1cf997b":"sns.set(font_scale=2)\nplt.figure(figsize=(30,30))\nfor i,col in enumerate(categorical_col,1):\n    plt.subplot(3,3,i)\n    sns.barplot(x=f\"{col}\",y='Attrition',data=df)\n    plt.xticks(rotation=90)\nplt.tight_layout()\n","1a33899a":"sns.set(font_scale=1)\nsns.boxplot(x='JobRole',y='MonthlyIncome',data=df)\nplt.xticks(rotation=90);","4a6f599b":"sns.boxplot(x='EducationField',y='MonthlyIncome',data=df)\nplt.xticks(rotation=90);","7279cfea":"sns.violinplot(x='EducationField',y='MonthlyIncome',data=df,hue='Attrition',color='Yellow',split=True)\nplt.legend(bbox_to_anchor=(1.2,0.65))\nplt.xticks(rotation=45);","dc175a4f":"plt.subplots(figsize=(15,5))\nsns.countplot(x='TotalWorkingYears',data=df)","133c6a35":"plt.figure(figsize=(6,6))\nplt.pie(df['EducationField'].value_counts(),labels=df['EducationField'].value_counts().index,autopct='%.2f%%');","dda3f9ff":"df['EducationField'].value_counts()","c1f8243e":"df.groupby(by='JobRole')[\"PercentSalaryHike\",\"YearsAtCompany\",\"TotalWorkingYears\",\"YearsInCurrentRole\",\"WorkLifeBalance\"].mean()","15da850a":"plt.figure(figsize=(6,6))\nplt.pie(df['JobRole'].value_counts(),labels=df['JobRole'].value_counts().index,autopct='%.2f%%');\nplt.title('Job Role Distribution',fontdict={'fontsize':22});","2825cdff":"plt.figure(figsize=(14,5))\nsns.countplot(x='Age',data=df)","72cca6b9":"sns.barplot(x='Education',y='MonthlyIncome',hue='Attrition',data=df)\nplt.legend(bbox_to_anchor=(1.2,0.6))","06766e79":"sns.barplot(y='DistanceFromHome',x='JobRole',hue='Attrition',data=df,dodge=False,alpha=0.4,palette='twilight')\nplt.xticks(rotation=90);\nplt.legend(bbox_to_anchor=(1.2,0.6));","adb096b5":"from sklearn.preprocessing import LabelEncoder","5962b283":"le= LabelEncoder()","9bfb48da":"for col in categorical_col:\n    df[col]=le.fit_transform(df[col])","6b222945":"from sklearn.model_selection import train_test_split","cb10e3b1":"data= df.copy()","4f796c57":"X= data.drop('Attrition',axis=1)\ny=data['Attrition']","8facfa43":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)","3d3dd8fb":"from sklearn.tree import DecisionTreeClassifier","d3aba5b8":"model= DecisionTreeClassifier()","e8799509":"model.fit(X_train,y_train)","cc4cfddf":"pred= model.predict(X_test)","c4891b53":"from sklearn.metrics import classification_report,confusion_matrix","ee66b6e2":"print(classification_report(y_test,pred))","e10c5f1f":"print(confusion_matrix(y_test,pred))","539e1444":"from sklearn.model_selection import RandomizedSearchCV","5de62543":"params={\"criterion\":(\"gini\", \"entropy\"),\n        \"splitter\":(\"best\", \"random\"), \n        \"max_depth\":(list(range(1, 20))), \n        \"min_samples_split\":[2, 3, 4], \n        \"min_samples_leaf\":list(range(1, 20))}","63f86818":"tree_random= RandomizedSearchCV(model,params,n_iter=100,n_jobs=-1,cv=3,verbose=2)","2b76deb8":"tree_random.fit(X_train,y_train)","c8494e5c":"tree_random.best_estimator_","bd759f4f":"model=DecisionTreeClassifier(ccp_alpha=0.0, class_weight=None, criterion='entropy',\n                       max_depth=8, max_features=None, max_leaf_nodes=None,\n                       min_impurity_decrease=0.0, min_impurity_split=None,\n                       min_samples_leaf=6, min_samples_split=4,\n                       min_weight_fraction_leaf=0.0, presort='deprecated',\n                       random_state=None, splitter='random')","8614b1d9":"model.fit(X_train,y_train)\npred=model.predict(X_test)","ff7bb8c4":"print(classification_report(y_test,pred))","6faf762b":"print(confusion_matrix(y_test,pred))","5ddbbf5c":"from sklearn.ensemble import RandomForestClassifier","0e102dbe":"rfc= RandomForestClassifier(n_estimators=100)","3c10b80e":"rfc.fit(X_train,y_train)","c1b1d98f":"rfc_pred= rfc.predict(X_test)","34433c98":"print(classification_report(y_test,rfc_pred))","4cda0fd7":"print(confusion_matrix(y_test,rfc_pred))","4b9f216f":"ACCURACY USING DECISION TREE IS 76%. AND THE CONFUSION MATRIX COMES OUT TO BE.","38dd78e2":"WE CAN SEE THAT WE HAVE IMPROVED THE ACCURACY FOR DECISION TREE TO 83% USING RANDOM SEARCH CV METHOD. AND THE CONFUSION MATRIX IS FOUND TO BE.","6fe698e9":"USING TREE DECISION METHOD FOR PREDICTION.","5f1e0e42":"NOW, WE WILL BE TUNING THE HYPERPARAMETERS OF DECISION TREE USING RANDOMIZED SEARCH CROSS VALIDATION\nMETHOD FOR IMPROVING THE ACCURACY OF THE MODEL.","4f145784":"1.Self relation i.e of a feature to itself is equal to 1 as expected.\n\n2.JobLevel is highly related to Age as expected as aged employees will generally tend to occupy higher positions in the company.\n\n3.PerformanceRating is highly related to PercentSalaryHike which is quite obvious.\n\n4.MonthlyIncome is very strongly related to joblevel as expected as senior employees will definately earn more.\n\n5.YearsAtCompany is related to YearsInCurrentRole.\n\n6.Also note that TotalWorkingYears is highly related to JobLevel which is expected as senior employees must have worked for a larger span of time.\n\n7.YearsWithCurrManager is highly related to YearsAtCompany.","b2adf837":"NOW TRYING TO MAKE A MODEL USING RANDOM FOREST CLASSIFIER","e8ca00d0":"Accuracy of this model is 85%.","9d9189ac":"ENCODING THE CATEGORICAL COLUMNS."}}