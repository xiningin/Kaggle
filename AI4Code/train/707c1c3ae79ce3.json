{"cell_type":{"d722ff95":"code","d71d4399":"code","0be86e9a":"code","70babe6e":"code","fce527c4":"code","a9fce344":"code","f617834e":"code","a848b170":"code","efc40593":"code","534a2ab6":"code","aee76ea0":"code","d6e2a448":"code","69f7b054":"code","bd2727c7":"code","06c60b7f":"code","9619b3b0":"code","cecc6ef8":"code","7f06832d":"code","e117e4a5":"code","b081c55a":"code","0f9a0da7":"code","854d8135":"code","e440c14d":"code","7cdf7380":"code","815b3bef":"code","2fcf17f0":"code","961e922f":"markdown","43c417c6":"markdown","e2e2c424":"markdown","da4c217d":"markdown","62eceedc":"markdown","bc11bdd3":"markdown","f69029c5":"markdown","b7205fa8":"markdown","6c9e9fd6":"markdown","838fe40a":"markdown","3f5e9f7a":"markdown","404d77c3":"markdown","18855d0a":"markdown","36ae7eab":"markdown"},"source":{"d722ff95":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","d71d4399":"!pip3 install plotly","0be86e9a":"from sklearn import preprocessing\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom bokeh.plotting import figure, show, output_file\nimport plotly\nimport plotly.express as px\n\nimport json\n\nfrom urllib.request import urlopen\n\nimport warnings\nwarnings.filterwarnings('ignore')","70babe6e":"df_source = pd.read_csv('\/kaggle\/input\/chronic-disease\/U.S._Chronic_Disease_Indicators.csv')\ndf_source.head()","fce527c4":"df_source.info()","a9fce344":"for col in df_source:\n    print(col)\n    print(df_source[col].value_counts())\n    print('*******')","f617834e":"df = df_source.drop(columns=[\"DataSource\",\n\"Response\",\n\"DataValueFootnoteSymbol\",\n\"DataValueAlt\",\n'StratificationCategory2',\n\"StratificationCategory3\",\n\"Stratification2\",\n\"Stratification3\",\n\"ResponseID\",\n\"QuestionID\",\n\"TopicID\",\n\"StratificationCategoryID1\",\n\"StratificationCategoryID2\",\n\"StratificationCategoryID3\",\n\"StratificationID1\",\n\"StratificationID2\",\n\"StratificationID3\"])\nprint(len(df))","a848b170":"df.info()","efc40593":"print(df.isna().sum())","534a2ab6":"#remove for no data value at all\nprint(len(df))\ndf = df.merge(df[(df['DataValueUnit'].isna()) & (df['DataValue'].isna())], how='left', indicator=True)\ndf = df[df['_merge']=='left_only']\ndf= df.drop('_merge',axis=1)\nprint(len(df))\n\ndf = df[df['DataValue'].notna()]\nprint(len(df))\n\ndf = df[df['DatavalueFootnote']!='No data available']\nprint(len(df))\n\ndf = df[df['DatavalueFootnote']!='Data not shown because of too few respondents or cases']  \nprint(len(df))\n\ndf.DatavalueFootnote[df['DatavalueFootnote'].isna()]=''\nprint(df.isna().sum())","aee76ea0":"df.Topic.value_counts()","d6e2a448":"# parameter is a list of words that you'd associate with that question\ndef find_ques(words):\n    rel=[]\n    for i in list(df.Question.value_counts().index):\n        for w in words:\n            if str(w) in str(i):\n                rel.append(i)\n                \n    return list(set(rel))\n","69f7b054":"def merge_dfs_loc(df1,df2):\n    temp1 = df1[['LocationAbbr','DataValue']].reset_index().drop(columns='index')\n    temp2 = df2[['LocationAbbr','DataValue']].reset_index().drop(columns='index')\n    temp = temp1.merge(temp2, left_on='LocationAbbr', right_on='LocationAbbr')\n    return temp \n    ","bd2727c7":"print(find_ques(['alcohol','drinking']))","06c60b7f":"df_alc = pd.concat([df[df['Question']==x] for x in find_ques(['alcohol','drinking']) if x!='Population served by community water systems that receive optimally fluoridated drinking water'])","9619b3b0":"per_cap_alc = df_alc[df_alc['Question']=='Per capita alcohol consumption among persons aged >= 14 years']\nper_cap_alc['YearStart'].value_counts()\n#per capita in gallons for the years 2010 and 2014 data available for all 52 states\nper_cap_alc_2010= per_cap_alc[per_cap_alc['YearStart']==2010]\nper_cap_alc_2014= per_cap_alc[per_cap_alc['YearStart']==2014]\nper_cap_alc_2010['DataValue']=pd.to_numeric(per_cap_alc_2010['DataValue'])\nper_cap_alc_2014['DataValue']=pd.to_numeric(per_cap_alc_2014['DataValue'])","cecc6ef8":"fig = px.choropleth(\n    per_cap_alc_2010,\n    locations=\"LocationAbbr\",\n    locationmode='USA-states',\n    color= 'DataValue',\n    color_continuous_scale='Matter',  \n    scope='usa',\n    hover_name=\"LocationDesc\",\n    labels = {'DataValue':'Gallons\/capita'},\n    title=\"per capita alcohol consumption in the year 2010 in gallons\"\n)\n\nfig.show()\n\nfig = px.choropleth(\n    per_cap_alc_2014,\n    locations=\"LocationAbbr\",\n    locationmode='USA-states',\n    color= 'DataValue',\n    color_continuous_scale='Matter',  \n    scope='usa',\n    hover_name=\"LocationDesc\",\n    labels = {'DataValue':'Gallons\/capita'},\n    title=\"per capita alcohol consumption in the year 2014 in gallons\"\n)\n\nfig.show()\n\n","7f06832d":"df_alc_change =merge_dfs_loc(per_cap_alc_2010,per_cap_alc_2014)\ndf_alc_in= set(df_alc_change.LocationAbbr[df_alc_change['DataValue_y']>df_alc_change['DataValue_x']])","e117e4a5":"f, ax = plt.subplots(figsize=(8, 15))\n\nsns.set_color_codes(\"muted\")\nsns.barplot(x=\"DataValue_y\", y=\"LocationAbbr\", data=df_alc_change,\n            label=\"2014\", color=\"b\")\n\nsns.set_color_codes(\"pastel\")\nsns.barplot(x=\"DataValue_x\", y=\"LocationAbbr\", data=df_alc_change,\n            label=\"2010\", color=\"b\")\n\nax.legend(ncol=2, loc=\"upper right\", frameon=True)\nax.set(xlim =(0,5),ylabel=\" State \",\n       xlabel=\"Gallons per Capita\")\nsns.despine(left=True, bottom=True)","b081c55a":"print(find_ques(['renal','kidney']))","0f9a0da7":"df_kidney = df[df['Question']=='Prevalence of chronic kidney disease among adults aged >= 18 years']\ndf_kidney = df_kidney[(df_kidney['StratificationCategory1']=='Overall')& (df_kidney['DataValueType']=='Age-adjusted Prevalence')]\ndf_kidney['DataValue']=pd.to_numeric(df_kidney['DataValue'])\ndf_kidney_2011= df_kidney[df_kidney['YearStart']==2011]\ndf_kidney_2014= df_kidney[df_kidney['YearStart']==2014]","854d8135":"df_kidney_change = merge_dfs_loc(df_kidney_2011,df_kidney_2014)","e440c14d":"f, ax = plt.subplots(figsize=(8, 15))\n\nsns.set_color_codes(\"muted\")\nsns.barplot(x=\"DataValue_y\", y=\"LocationAbbr\", data=df_kidney_change,\n            label=\"2014\", color=\"b\")\n\nsns.set_color_codes(\"pastel\")\nsns.barplot(x=\"DataValue_x\", y=\"LocationAbbr\", data=df_kidney_change,\n            label=\"2010\", color=\"b\")\n\nax.legend(ncol=2, loc=\"upper right\", frameon=True)\nax.set(xlim =(0,5),ylabel=\" State \",\n       xlabel=\"% of population with renal failure\")\nsns.despine(left=True, bottom=True)","7cdf7380":"df_kidney_in= set(df_kidney_change.LocationAbbr[df_kidney_change['DataValue_y']>df_kidney_change['DataValue_x']])\n\nx= df_kidney_in.intersection(df_alc_in)","815b3bef":"d1 = df_kidney_change[['LocationAbbr','DataValue_x','DataValue_y']].reset_index().drop(columns='index')\nd2 = df_alc_change[['LocationAbbr','DataValue_x','DataValue_y']].reset_index().drop(columns='index')\nd = d1.merge(d2, left_on='LocationAbbr', right_on='LocationAbbr')\nd = pd.concat([d[d['LocationAbbr']==i] for i in x])\nd['inc_alc']=d['DataValue_y_x']-d['DataValue_x_x']\nd['inc_kid']=d['DataValue_y_y']-d['DataValue_x_y'] ","2fcf17f0":"fig = px.choropleth(\n    d,\n    locations=\"LocationAbbr\",\n    locationmode='USA-states',\n    color= 'inc_alc',\n    color_continuous_scale='Matter',  \n    scope='usa',\n    hover_name=\"LocationAbbr\",\n    labels = {'inc_alc':'Gallons\/capita'},\n    title=\"increase in per capita alcohol consumption in gallons\"\n)\n\nfig.show()\n\n\nfig = px.choropleth(\n    d,\n    locations=\"LocationAbbr\",\n    locationmode='USA-states',\n    color= 'inc_kid',\n    color_continuous_scale='Matter',  \n    scope='usa',\n    hover_name=\"LocationAbbr\",\n    labels = {'inc_kid':'% increase'},\n    title=\"increase in renal failure as % of the population \"\n)\n\nfig.show()","961e922f":"### Helper function to merge dataframes on Location and keep only the data values","43c417c6":"# Understanding the data","e2e2c424":"### Helper function to find relevant Questions by key words","da4c217d":"## Kidney Failure","62eceedc":"Surprisingly, the impact of higher alcohol consumption isn't that direct on renal fialure","bc11bdd3":"Things we need to look into:\n* what's the data value when its unit is na, does it make sense? if no, remove the entry.\n* If the data has no value what is the corresponding topic and question?\n* Are the footnotes necessary given the values?\n* do the confidence limits not make sense in the context of the data value?\n* If there's no geolocation but there's a location we can still probably plot the origin, therefore it's okay if we let this column be.\n* Certain data value cells are empty due to low number of respondents and n=lack of available data as indicated by the footnotes, get rid of those","f69029c5":"# Alcoholism Trends","b7205fa8":"Based on the above the following columns are either entirely empty or not of any use to us:\n* DataSource\n* Response\n* DataValueFootnoteSymbol\n* DataValueAlt\n* StratificationCategory2\n* StratificationCategory3\n* Stratification2\n* Stratification3\n* ResponseID\n* QuestionID\n* TopicID\n* StratificationCategoryID1\n* StratificationCategoryID2\n* StratificationCategoryID3\n* StratificationID1\n* StratificationID2\n* StratificationID3","6c9e9fd6":"# Introduction:\n\n### Questions I want to answer with this-\n- Alcohol trends across states\n    * Are these getting better with time?\n- How they correlate with renal failure\n    * Did the states that showed an increase in alcohol consumption also show an icrease in renal failure?\n    \n### The dataset has survey results from multiple surveys, and across multiple years - will have to clean\n\n### Multiple results have staggered categorization of the data, which isn't uniform\n    ","838fe40a":"How many of these values are na per column?","3f5e9f7a":"## Contents:\n\n1. Introduction:\n        - What questions are we hoping to answer here?\n        - How would we ideally proceed?\n2. Imports & Reading in the data\n3. Understanding and Cleaning the data\n        - What do the columns mean?\n        - What are the unique values in each column?\n        - Replacing NaNs and with what?\n        - Which columns should be dropped?\n        - Which rows should be dropped?\n4. Helper functions\n5. Charting how state wise consumption of alcohol changed between 2010 and 2014\n            -Will require streamlining in terms of what years, DataValueUnits and Data Descriptions we want to keep\n6. Charting how renal failure rates increased between 2011 and 2014\n            -Will require streamlining in terms of what years, DataValueUnits and Data Descriptions we want to keep\n7. Plotting the impact of the 2\n","404d77c3":"Topic wise","18855d0a":"# Imports & Reading in the Data: ","36ae7eab":"## Trends over the years and across states"}}