{"cell_type":{"a5d8b532":"code","c85b8bf5":"code","7b3d33c9":"code","b2e9985a":"code","d8b1f092":"code","e4d3b937":"code","5edb16a5":"code","22fd8d99":"code","761bd04c":"code","1fb89297":"code","b997c988":"code","3d50fffc":"code","45fd04bb":"code","0d69548d":"code","12dbbbd7":"code","38f53d60":"markdown","d6e60b49":"markdown","6d766094":"markdown","b8297f39":"markdown","14b929d5":"markdown","5b1778af":"markdown","1e6c0798":"markdown","d2891a29":"markdown","2e8ceaa6":"markdown","d78fc8c3":"markdown","3331f7c5":"markdown","b4e37d01":"markdown","c55fab1f":"markdown","8d3b809e":"markdown","c73818a1":"markdown","ac91cff9":"markdown","a08ba72a":"markdown","b5958ecd":"markdown","b7805f93":"markdown"},"source":{"a5d8b532":"# Set up the environment\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n%matplotlib inline","c85b8bf5":"# Loading data\nno_show_appointments=pd.read_csv('\/kaggle\/input\/noshowappointments\/KaggleV2-May-2016.csv')","7b3d33c9":"# rename the columns\nno_show_appointments=no_show_appointments.rename(columns={\"No-show\": \"No_show\", \"Handcap\": \"Handicap\", \"Hipertension\": \"Hypertension\"})\n\n# excluding children less than 10 years\nno_show_appointments = no_show_appointments.query('Age > 10')\n","b2e9985a":"# showing up vs not showing up patients\n\nfig,fg=plt.subplots(figsize=(14, 8))\nno_show_appointments['No_show'].value_counts().plot(kind = 'bar', fontsize=18, rot=0)\nfg.set_ylabel('Number of patients', fontsize=18)\nfg.set_xlabel('Not showing up patients', fontsize=18)\nfg.set_title('Not Showing up vs showing up patients', fontsize=18)\nplt.show;","d8b1f092":"no_show_appointments['No_show'].value_counts()","e4d3b937":"# split the data into attended and non attended\n\nnon_attended = no_show_appointments.query('No_show == \"Yes\"')\nattended = no_show_appointments.query('No_show == \"No\"')\n\n# taking the outer join of the attended and non attended dataframes\nds_union = pd.merge(non_attended, attended, how='outer', left_on='PatientId', right_on='PatientId',sort=True)\n\n# keep the null values only and exclude the rest\nds_union = ds_union[ds_union.isnull().any(axis=1)]\n\n# splitting the dataframe into new attended and non attended dataframes\n\nnon_attended = ds_union.iloc[:,:14]\nattended = ds_union.iloc[:, np.r_[0,14:27]]\n\n#cleaning column names\n\nattended=attended.rename(columns = lambda x : str(x)[:-2])\nattended=attended.rename(columns={\"Patient\": \"PatientId\"})\nnon_attended.columns = non_attended.columns.str.rstrip('_x')\n\n#removing dublicates and na values\n\nnon_attended = ((non_attended.dropna()).drop_duplicates())\nattended = ((attended.dropna()).drop_duplicates())","5edb16a5":"attended.describe()","22fd8d99":"non_attended.describe()","761bd04c":"# split the non attended patients into males and females\n\nfemale_non_attended = non_attended[non_attended['Gender'] == 'F']\nmale_non_attended = non_attended[non_attended['Gender'] == 'M']\n\n# split the non attended patients into diabetic and non diabetic\n\ndiabetic_non_attended = non_attended.query('Diabetes == 1.0')\nnon_diabetic_non_attended = non_attended.query('Diabetes == 0.0')\n\n# split the non attended patients into alcoholic and non_attended\n\nalcoholic_non_attended = non_attended.query('Alcoholism == 1.0')\nnon_alcoholic_non_attended = non_attended.query('Alcoholism == 0.0')\n\n# split the non attended patients into hypertension and no hypertension\n\nhypertension_non_attended = non_attended.query('Hypertension == 1.0')\nno_hypertension_non_attended = non_attended.query('Hypertension == 0.0')","1fb89297":"# mean values of non attended females and males\n\nprint ('female non attended mean Age:',female_non_attended['Age'].mean(),'years')\nprint ('male non attended mean Age:',male_non_attended['Age'].mean(),'years')","b997c988":"# non attended females and males with age graph\n\nfig,fg=plt.subplots(figsize=(14, 8))\nfemale_non_attended['Age'].hist(alpha = 0.5, label='Female')\nmale_non_attended['Age'].hist(alpha = 0.5, label='Male')\nfg.legend(loc='upper right', fontsize=18)\nfg.set_ylabel('Number of patients', fontsize=18)\nfg.set_xlabel('Age', fontsize=18)\nfg.set_title('Non attended females and males at different ages', fontsize=18)\nplt.xticks(fontsize=18)\nplt.yticks(fontsize=18)\nplt.show()","3d50fffc":"# non diabetic, non alcoholic and patients with no hypertension graph\n\nfig,fg=plt.subplots(figsize=(14, 8))\nnon_diabetic_non_attended['Age'].hist(alpha = 0.25, label='Non diabetic')\nno_hypertension_non_attended['Age'].hist(alpha = 0.25, label='No hypertension')\nnon_alcoholic_non_attended['Age'].hist(alpha = 0.25, label='Non alcoholic')\nfg.legend(loc='upper right', fontsize=18)\nfg.set_ylabel('Number of patients', fontsize=18)\nfg.set_xlabel('Age', fontsize=18)\nfg.set_title('Non diabetic, non alcoholic and patients with no hypertension at different ages', fontsize=18)\nplt.xticks(fontsize=18)\nplt.yticks(fontsize=18)\nplt.show()\n\n# diabetic, alcoholic and patients with hypertension graph\n\nfig1,fg1=plt.subplots(figsize=(14, 8))\ndiabetic_non_attended['Age'].hist(alpha = 0.5, label='Diabetic')\nhypertension_non_attended['Age'].hist(alpha = 0.5, label='Hypertension')\nalcoholic_non_attended['Age'].hist(alpha = 0.5, label='Alcoholic')\nfg1.legend(loc='upper right', fontsize=18)\nfg1.set_ylabel('Number of patients', fontsize=18)\nfg1.set_xlabel('Age', fontsize=18)\nfg1.set_title('Diabetic, alcoholic and patients with hypertension at different ages', fontsize=18)\nplt.xticks(fontsize=18)\nplt.yticks(fontsize=18)\nplt.show()\n","45fd04bb":"print ('Non diabetic mean Age:',non_diabetic_non_attended['Age'].mean(),'years')\nprint ('No hypertension mean Age:',no_hypertension_non_attended['Age'].mean(),'years')\nprint ('Non alcoholic mean Age:',non_alcoholic_non_attended['Age'].mean(),'years')","0d69548d":"print ('Diabetic mean Age:',diabetic_non_attended['Age'].mean(),'years')\nprint ('Hypertension mean Age:',hypertension_non_attended['Age'].mean(),'years')\nprint ('Alcoholic mean Age:',alcoholic_non_attended['Age'].mean(),'years')","12dbbbd7":"print ('Percentage of non attended diabetic patient:',round(100*sum(non_attended['Diabetes']) \/ non_attended['PatientId'].count() , 2),'%')\nprint ('Percentage of non attended alcoholic patient:',round(100*sum(non_attended['Alcoholism']) \/ non_attended['PatientId'].count() , 2),'%')\nprint ('Non attended Patients mean age:',round(non_attended['Age'].mean() , 2), 'years')","38f53d60":"The following figure demonstrates an important aspect of the effect of hypertension and diabetes on the patient not showing up to an appointment.","d6e60b49":"Start by viewing statistics about both attended and non_attended patients.","6d766094":"As you can see the figure does not shows a different pattern between males and females, It is clear in both males and females that the number of patients not attended is high in teenagers then decreases with increasing age.","b8297f39":"## Analysis","14b929d5":"We see that the mean age of the non-attended patient is 39.6 years less than the attended patient which is 45.3.","5b1778af":"Now we need to split the data frame into two data frames attended and non attended according to the column No_show, So we extract non attended patients only by taking the outer join of the attended and non attended data frames which result in a 27 column data frame with null values in both attended and non attended data frames. We keep the null values only and exclude the rest as we do not need the intersection, Then split the data frame into new attended and non attended data frames which represent the attended and non attended patients each without intersection with the other one, Finally, clean the new data frame's column names and removing duplicates and NA values.","1e6c0798":"As most of the patients are non-diabetic, non-alcoholic, and have no hypertension, The overall behavior affects the male\/female graph with age shown above, But the patients with hypertension or the diabetic or alcoholic patients show a different pattern, The diabetic\/alcoholic\/hypertension non attended teenage patients are small in numbers then the number of patients with the mentioned health conditions increases significantly passing by midlife age and reaches its peak at the age of retirement and then decreases with aging.","d2891a29":"Now it is time to view the relation between non-attended females and males.","2e8ceaa6":"\n## Cleaning and processing data\n\nFirst, start by renaming the column and removing misspelled words. And then exclude children who are less than 10 years old who are not responsible for their nonattendance and we did not have data about their parents. ","d78fc8c3":"There is no big difference between the mean age between females and males not showing up. \nThe following graph shows the relation between non-attended females and males with age.","3331f7c5":"Now let's split the non-attended patients into males and females, Also split the non-attended patients into diabetic and non-diabetic, alcoholic and non-alcoholic, and hypertension and no hypertension.","b4e37d01":"- As most of the patients are non-diabetic, non-alcoholic, and have no hypertension, The overall behavior affects the overall mean age of the non-attended patients, making the average of the non-attended patient's age is 39.6 years which is less than attended patient is 45.3.\n\n- The diabetic\/alcoholic\/hypertension non attended teenage patients number are small then the number of patients increases significantly passing by midlife age and reaching the retirement age and then decreases with aging.\n\n- So the age of the patient and his health status (diabetic, alcoholic, and hypertension) are related to each other, The health status mentioned results in increasing levels of patients not showing up for the scheduled appointments.","c55fab1f":"### Limitations\n\nI have a little concern about the diabetic and alcoholic patients' representation of the population.","8d3b809e":"As you can see from the previous percentages that diabetic and alcoholic patients have a very low representation of the population, This seems to be natural, however, the average age of non-diabetic and non-alcoholic patients is 38.01 and 39.28 years respectively, Compared to diabetic and alcoholic patients which are 60.46 and 47.47 years, This shifts the overall average age of non attended patients to 39.57 years. So it is better to get more data about diabetic and alcoholic patients as it has a great impact on the overall average age of non-attended patients. ","c73818a1":"The number of patients showing up is 73246 which is much higher than that of the not showing up patients which is 18531. \nthese numbers include the patients that have both attended and non-attended certain appointments.","ac91cff9":"The following graph shows the patient not showing up to an appointment as yes, And no to the patient showing up to an appointment.","a08ba72a":"###  So to conclude:","b5958ecd":"#### 11\/15\/2021\n<a id='intro'><\/a>\n## Introduction\nThis is a no-show appointments case study on the relation between the age of the patient and his health status and how it affects his showing up for their scheduled appointments?\n\n### Dataset Description \n\nThis dataset collects information from 100k medical appointments in Brazil and is focused on the question of whether or not patients show up for their appointment.\nThe medical appointments data is [here](https:\/\/www.kaggle.com\/joniarroba\/noshowappointments). \nThe data consists of one CSV file, The file contains 14 columns and 110527 non-null rows including patient ID, appointment ID, scheduled and appointment days, personal information like gender, age, patient's neighborhood, membership in Bolsa Fam\u00edlia, patient's health status like if the patient is alcoholic, diabetic or has hypertension or has a handicap and if the patient received an SMS message and if the patient showed up to the appointment or not.\n\n\n### Question for Analysis\n\nDoes the age of the patient and his health status affect his showing up for their scheduled appointments?\n\n## Set up the environment\n","b7805f93":"## Loading our data"}}