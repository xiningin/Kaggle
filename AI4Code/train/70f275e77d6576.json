{"cell_type":{"eccf8b90":"code","59e8deb8":"code","ad159030":"code","15ebf859":"code","8fa1361c":"code","32f10a66":"code","287471d6":"code","ef063346":"code","0ee2574d":"code","af043ec5":"code","9c19adaf":"code","e9e38f52":"code","131930f5":"code","d9ba0011":"code","37417096":"code","d2e4a3e5":"code","eb634893":"code","66a17861":"code","b0495675":"code","8d5a4ba7":"code","f39c511c":"code","b7aa0d42":"code","677447d6":"code","507bd2f3":"code","964d85a4":"code","669a67a9":"code","1b3c2909":"code","3fdfe516":"code","0e58de59":"code","22fe300f":"code","f6bebeb8":"code","5951c7ad":"code","c6edc576":"code","a49bfa0b":"code","a835cbb7":"code","d425b1ae":"code","f8476353":"code","5c838dac":"code","db567d12":"code","1fa57532":"code","ddf1959b":"code","afbe1eff":"code","958b66b8":"code","861749ef":"code","2a1f99f4":"code","a4502e68":"code","e6ebe00f":"code","ffb19c90":"code","c0a6cc6a":"code","3799c2d9":"code","70c27f26":"code","e802d648":"code","d806d168":"code","481a0002":"code","72d22c5e":"code","df5bb31b":"code","a768277a":"code","19d72590":"code","7142ce65":"code","4412bacf":"code","c46ff494":"code","c241c237":"code","5d812f2e":"code","cf9142be":"code","e89a4285":"code","dc508d43":"code","18ef471e":"markdown","2ed06d15":"markdown","39815a2e":"markdown","5f5ad7be":"markdown","e27b2206":"markdown","03f21f04":"markdown","23260089":"markdown","1bae733d":"markdown","45b99216":"markdown","a537b7e4":"markdown","c0718893":"markdown","287a1349":"markdown","45a8ce4d":"markdown","d90ef1e9":"markdown","8eaa0493":"markdown","259a616c":"markdown","9e662027":"markdown","baab5cc1":"markdown","387483e5":"markdown","c7c3332a":"markdown","06554e94":"markdown","26e7767e":"markdown","48cfa680":"markdown","8c03cdb7":"markdown","5e816265":"markdown","cbd938b1":"markdown","2b68d722":"markdown","23b0b23e":"markdown","48deeb65":"markdown","a37c20cf":"markdown","31d6a4c6":"markdown","c0d0ec5a":"markdown","f7e65fd4":"markdown","ba200e63":"markdown","47810163":"markdown","3a0257bb":"markdown","d20ecdcb":"markdown","5f63ee7c":"markdown","1ac16344":"markdown","e7117450":"markdown","b6ae3ddc":"markdown","36b06c1a":"markdown","3a9fce12":"markdown","688a1d85":"markdown","fabaa4df":"markdown","18ea0432":"markdown","c62fa6a2":"markdown","876fbdc3":"markdown","8cd3a111":"markdown","a1df2d0a":"markdown","f651f46d":"markdown","29043484":"markdown","f8b1019d":"markdown","b6fd3386":"markdown","a7a631c5":"markdown","839db43c":"markdown","926ac327":"markdown","5e9dd64b":"markdown","4569fe28":"markdown","635c3e9f":"markdown","36dc80f8":"markdown","153e8fd7":"markdown","a29c00e4":"markdown","b596408d":"markdown","64cd4371":"markdown","cdb6049a":"markdown","2030641c":"markdown","7db1f6e2":"markdown","cdc3646e":"markdown","3b5fd6f4":"markdown","85817805":"markdown","f0c31941":"markdown","11034713":"markdown","c5a51c24":"markdown","072b4adc":"markdown","dcedab88":"markdown","60060ffa":"markdown","88481083":"markdown","ffd3e3f4":"markdown","9c012de2":"markdown","64fa2112":"markdown"},"source":{"eccf8b90":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline\nfrom plotnine import *\nimport warnings\nwarnings.filterwarnings('ignore')\nimport statistics as st","59e8deb8":"train=pd.read_csv('..\/input\/jobathon-may-2021-credit-card-lead-prediction\/train.csv')\ntest=pd.read_csv('..\/input\/jobathon-may-2021-credit-card-lead-prediction\/test.csv')","ad159030":"train.info()","15ebf859":"test.info()","8fa1361c":"\ntrain.head()","32f10a66":"\ntest.head()","287471d6":"train.iloc[:,1:10].select_dtypes(include='int').describe()","ef063346":"test.iloc[:,1:10].select_dtypes(include='int').describe()","0ee2574d":"train.isnull().sum()","af043ec5":"test.isnull().sum()","9c19adaf":"target_encode={0:'Not_Interested',1:'Interested'}\ntrain['Is_Lead']=train['Is_Lead'].map(target_encode)","e9e38f52":"def combine(counts, percentages):\n    fmt = '{} ({:.1f}%)'.format\n    return [fmt(c, p) for c, p in zip(counts, percentages)]\n\n(ggplot(train,aes(x='Is_Lead',fill='Is_Lead'))+\ngeom_bar()+\ngeom_text(\naes(label=after_stat('combine(count, prop*100)'), group=1),\nstat='count',\nnudge_y=0.125,\nva='bottom')+\nlabs(x='Customers_Interest',y='Count',title=\"Customer's Response in the Recommended Credit Cards\")+\ntheme_seaborn(style='ticks')+\ntheme(figure_size=(8,5),\nlegend_position='none',      \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=14,weight='bold'),    \naxis_ticks=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n\n","131930f5":"train['Gender'].value_counts()","d9ba0011":"\n(ggplot(train,aes(x='Gender',fill='Is_Lead'))+\ngeom_bar()+\ngeom_text(\naes(label=after_stat('count')),\nstat='count',position=position_stack(vjust=0.5))+\nlabs(x='',y='Count',title=\"Gender Wise Customer's Response in the Recommended Credit Cards\")+\ntheme_seaborn(style='ticks')+\ntheme(figure_size=(8,5),\nlegend_position='right',      \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=14,weight='bold'),    \naxis_ticks=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","37417096":"f = lambda x: 100 * x \/ float(x.sum())\ntrain.groupby(['Gender','Is_Lead'])['Is_Lead'].agg({'count'}).assign(Percentage=f).reset_index()","d2e4a3e5":"def iqr(x: [int,float])->[int,float]:\n    \"\"\"Inter_Quartile-Range.\n    \n    with the help of numpy percentile function we can get the 1st and 3rd quartile.\n    Then subtract the 1st quartile value from 3rd quartile.\n    \n    parameters:\n    -----------\n    input: list of numerical values,array\n    return: single nummerical value.\n    \"\"\"\n    q1_x = np.percentile(x, 25, interpolation='midpoint')\n    q3_x = np.percentile(x, 75, interpolation='midpoint')\n    return q3_x - q1_x","eb634893":"def bin_w(x: [int,float])->[int,float]:\n    \"\"\"\n    with help of above iqr function we can get iqr value.\n    Using the iqr value and the following freedman diaconis formula we can get optimal bin width.\n    \n    parametes:\n    ----------\n    input: list of numerical values,array\n    return: single nummerical value.\n    \n    \"\"\"\n    bw=(2 * iqr(x)) \/ np.power(x.shape[0], 1\/3)\n    return bw","66a17861":"age_bw=bin_w(train['Age'])\n(ggplot(train)+geom_histogram(aes(x='Age'),fill='seagreen',color='black',\n                             binwidth=age_bw)+\nscale_x_continuous(breaks=range(20,90,10))+ \nlabs(y='',title=\"Customer's Age Distribution\")+\ntheme_void()+\ntheme(figure_size=(10,5),\npanel_grid=element_blank(),\naxis_ticks=element_blank(), \nplot_background=element_rect(fill='pink'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=14,weight='bold'),\naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","b0495675":"age_bw=bin_w(train['Age'])\n(ggplot(train,aes(x='0',y='Age'))+\ngeom_boxplot(color='seagreen',fill='none',size=2.5)+\nlabs(x='',y='',title=\"Customer's Age Distribution Boxplot\")+\ntheme_void()+\ntheme(figure_size=(8,5),\npanel_grid=element_blank(),\naxis_ticks=element_blank(), \nplot_background=element_rect(fill='pink'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_y=element_text(style='normal',size=14,weight='bold'),\naxis_text_x=element_blank(),\naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","8d5a4ba7":"print(\"The Customer's Age Median is:\",train['Age'].median())","f39c511c":"print(\"The Customer's Age Mode is:\",st.mode(train['Age']))","b7aa0d42":"print(\"Customer's Age Summary\\n\",train['Age'].describe())","677447d6":"age_bw=bin_w(train['Age'])\n(ggplot(train,aes(x='Age'))+\n       geom_histogram(fill='seagreen',color='black',\n                             binwidth=age_bw)+\nscale_x_continuous(breaks=range(20,90,5))+ \nlabs(y='',title=\"Customer's Age Distribution\")+\nfacet_wrap('Is_Lead')+ \ntheme_dark()+\ntheme(figure_size=(12,5),\npanel_grid=element_blank(),\naxis_ticks=element_blank(), \nplot_background=element_rect(fill='pink'), \npanel_background=element_rect(fill='none'),   \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=14,weight='bold'),\naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","507bd2f3":"train['age_bin']=pd.cut(train['Age'],bins=7,labels=['22-31','31-40','40-49','49-58','58-67','67-76','76-85'])","964d85a4":"(ggplot(train,aes(x='age_bin',fill='Is_Lead'))+\ngeom_bar()+\ngeom_text(\naes(label=after_stat('count')),\nstat='count',position=position_stack(vjust=0.5))+\nlabs(x='',y='Count')+\nfacet_wrap('Gender')+\ntheme_dark()+\ntheme(figure_size=(12,8),\nlegend_position='right',  \npanel_grid=element_blank(),\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","669a67a9":"(ggplot(train,aes(x='Region_Code',fill='Is_Lead'))+\ngeom_bar(position='identity')+\ngeom_text(\naes(label=after_stat('count')),ha='left',size=10,\nstat='count',position=position_identity())+\nlabs(x='',y='Count')+\nfacet_wrap('Is_Lead')+\ntheme_dark()+\ntheme(figure_size=(12,8),\nlegend_position='none',  \npanel_grid=element_blank(),\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold'))+coord_flip())","1b3c2909":"(ggplot(train,aes(x='Region_Code',fill='Gender'))+\ngeom_bar(position='dodge2')+\nlabs(x='',y='Count')+\n#facet_wrap('Is_Lead',ncol=1,scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,5),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=90),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","3fdfe516":"#function to highlight the maximum number\ndef highlight_max(x):\n    return ['background-color: lightgreen' if v == x.max() else ''\n                for v in x]\n","0e58de59":"train.groupby(['Region_Code','Gender'])['Gender'].agg({'count'}).reset_index().pivot_table(index='Gender', \n                    columns='Region_Code', \n                    values='count').style.apply(highlight_max)","22fe300f":"(ggplot(train,aes(x='Region_Code',y='Age',fill='Region_Code'))+\ngeom_boxplot()+\nlabs(x='',y='Count')+\n#facet_wrap('Is_Lead',ncol=1,scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,5),\nlegend_position='none',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=90),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold')))","f6bebeb8":"(ggplot(train,aes(x='Occupation',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=12,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Occupation',y='Count')+\n#facet_wrap('Is_Lead',ncol=1,scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,5),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold'),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold')))","5951c7ad":"(ggplot(train,aes(x='Occupation',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=12,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Occupation',y='Count')+\nfacet_wrap('Gender',ncol=2,scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,5),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","c6edc576":"(ggplot(train,aes(x='age_bin',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\nlabs(y='Count')+\nfacet_grid('Gender~Occupation',scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,5),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","a49bfa0b":"train.groupby(['Occupation','Gender','age_bin','Is_Lead',])['Is_Lead'].agg({'count'}).reset_index().pivot_table(index=['Gender','Is_Lead','Occupation'], \n                    columns=['age_bin']).style.apply(highlight_max)","a835cbb7":"(ggplot(train,aes(x='Region_Code',fill='Occupation'))+\ngeom_bar()+\nlabs(y='Count')+\nfacet_wrap('Occupation',ncol=1)+\ntheme_dark()+\ntheme(figure_size=(14,8),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","d425b1ae":"train.groupby(['Region_Code','Occupation'])['Occupation'].agg({'count'}).reset_index().pivot_table(index='Region_Code', \n                    columns=['Occupation'],values='count').style.apply(highlight_max)","f8476353":"(ggplot(train,aes(x='Channel_Code',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=12,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Channel_Code',y='Count')+\n#facet_wrap('Occupation',ncol=1)+\ntheme_dark()+\ntheme(figure_size=(14,8),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","5c838dac":"(ggplot(train,aes(x='Channel_Code',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=12,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Channel_Code',y='Count')+\nfacet_wrap('Gender',ncol=2,scales='free')+\ntheme_dark()+\ntheme(figure_size=(14,8),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","db567d12":"(ggplot(train,aes(x='Channel_Code',fill='Gender'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=8,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Channel_Code',y='Count')+\nfacet_grid('Is_Lead~Occupation',scales='free')+\ntheme_dark()+\ntheme(figure_size=(12,10),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","1fa57532":"(ggplot(train,aes(x='Channel_Code',fill='Channel_Code'))+\ngeom_bar()+\ngeom_text(\naes(label=after_stat('count')),va='bottom',size=8,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_stack(vjust=0.5))+\nlabs(y='Count')+\nfacet_wrap('age_bin',ncol=2,scales='free')+\ntheme_dark()+\ntheme(figure_size=(12,12),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","ddf1959b":"(ggplot(train,aes(x='Region_Code',fill='Channel_Code'))+\ngeom_bar()+\nfacet_wrap('Channel_Code',ncol=1)+\ntheme_dark()+\ntheme(figure_size=(12,8),\nlegend_position='none',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n\n","afbe1eff":"#month to year conversion\ndef mon_to_yr(col):\n  \"\"\"\n  if month is greater than or equal to 12 divide by 12 else return the input value\n  \"\"\"\n  if col>=12:\n    return round(col\/12,1)\n  else:\n    return col\/10\n","958b66b8":"train['vintage_yr']=train['Vintage'].apply(mon_to_yr)","861749ef":"vintage_bin=bin_w(train['vintage_yr'])\n(ggplot(train,aes(x='vintage_yr',fill='Is_Lead'))+\ngeom_histogram(binwidth=vintage_bin,color='black')+\nscale_x_continuous(breaks=range(0,15,1))+\nfacet_wrap('Is_Lead',ncol=1)+\ntheme_dark()+\ntheme(figure_size=(12,8),\nlegend_position='none',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'), \npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","2a1f99f4":"train['vintage_yr_bin']=pd.cut(train['vintage_yr'],bins=5 ,labels=['0.7-2.8','2.8-4.9','4.9-7.0','7.0-9.1','9.1-11.2'])","a4502e68":"(ggplot(train,aes(x='vintage_yr_bin',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=8,\ncolor='darkblue',fontweight='bold',angle=40,\nstat='count',position=position_dodge(width=1))+\nlabs(x='Vintage_Year_Category',y='Count')+\nfacet_wrap('Gender',ncol=2,scales='free')+\ntheme_dark()+\ntheme(figure_size=(10,8),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","e6ebe00f":"(ggplot(train,aes(x='vintage_yr_bin',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='center',size=8,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_dodge(width=1))+\nlabs(x='Vintage_Year_Category',y='Count')+\nfacet_grid('age_bin~Gender',scales='free')+\ntheme_dark()+\ntheme(figure_size=(11,12),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","ffb19c90":"(ggplot(train,aes(x='Credit_Product',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=12,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_dodge(width=1))+\nlabs(x='Vintage_Year_Category',y='Count')+\ntheme_dark()+\ntheme(figure_size=(11,6),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n","c0a6cc6a":"(ggplot(train,aes(x='Credit_Product',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=10,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_dodge(width=1))+\nfacet_wrap('Occupation',ncol=2,scales='free')+\nlabs(y='Count')+\ntheme_dark()+\ntheme(figure_size=(11,8),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))\n\n","3799c2d9":"(ggplot(train,aes(x='Region_Code',fill='Credit_Product'))+\ngeom_bar(position='dodge')+\nfacet_wrap('Credit_Product',ncol=1)+\nlabs(y='Count')+\ntheme_dark()+\ntheme(figure_size=(11,12),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","70c27f26":"#optimal bin width for Avg_Account_Balance\n\navg_bal_bin=bin_w(train['Avg_Account_Balance'])\n\n(ggplot(train,aes(x='Avg_Account_Balance'))+\ngeom_histogram(binwidth=avg_bal_bin,fill='seagreen',color='black')+\nlabs(y='Count',title='Avg_Account_Balance Distribution histogram')+\ntheme_dark()+\ntheme(figure_size=(11,7),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","e802d648":"(ggplot(train,aes(x='0',y='Avg_Account_Balance'))+\ngeom_boxplot(color='seagreen',fill='none',size=2.5)+\nlabs(x='',y='',title=\"Avg_Account_Balance Distribution Boxplot\")+\ntheme_void()+\ntheme(figure_size=(8,5),\npanel_grid=element_blank(),\naxis_ticks=element_blank(), \nplot_background=element_rect(fill='pink'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_y=element_text(style='normal',size=14,weight='bold'),\naxis_text_x=element_blank(),\naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","d806d168":"print(\"The Avg_Account_Balance Median is:\",train['Avg_Account_Balance'].median())","481a0002":"print(\"The Avg_Account_Balance Mode is:\",st.mode(train['Avg_Account_Balance']))","72d22c5e":"print('Avg_Account_Balance Summary\\n',train['Avg_Account_Balance'].describe())","df5bb31b":"(ggplot(train,aes(x='0',y='Avg_Account_Balance'))+\ngeom_boxplot(color='seagreen',fill='none',size=1.5)+\nlabs(x='',y='',title=\"Avg_Account_Balance Distribution Boxplot\")+\nfacet_wrap('Is_Lead')+\ntheme_dark()+\ntheme(figure_size=(11,7),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_blank(),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","a768277a":"train.groupby(['Is_Lead'])['Avg_Account_Balance'].agg(['min','mean','median','max','std'])","19d72590":"(ggplot(train,aes(x='0',y='Avg_Account_Balance'))+\ngeom_boxplot(color='seagreen',fill='none',size=1.5)+\nlabs(x='',y='',title=\"Avg_Account_Balance Distribution Boxplot\")+\nfacet_wrap('Occupation')+\ntheme_dark()+\ntheme(figure_size=(11,7),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_blank(),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","7142ce65":"train.groupby(['Occupation'])['Avg_Account_Balance'].agg(['min','mean','median','max','std'])","4412bacf":"(ggplot(train,aes(x='Is_Active',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=10,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_dodge(width=1))+\nlabs(y='Count')+\ntheme_dark()+\ntheme(figure_size=(11,8),\nlegend_position='right',  \npanel_grid=element_blank(),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","c46ff494":"(ggplot(train,aes(x='Is_Active',fill='Is_Lead'))+\ngeom_bar(position='dodge')+\ngeom_text(\naes(label=after_stat('count')),va='baseline',size=10,\ncolor='darkblue',fontweight='bold',\nstat='count',position=position_dodge(width=1))+\nfacet_wrap('Occupation')+\nlabs(y='Count')+\ntheme_dark()+\ntheme(figure_size=(11,8),\nlegend_position='right',  \npanel_grid=element_blank(),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_text(style='normal',size=12,weight='bold',rotation=70),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","c241c237":"(ggplot(train,aes(x='0',y='Avg_Account_Balance'))+\ngeom_boxplot(color='seagreen',fill='none',size=1.5,outlier_color='red',outlier_alpha=0.1)+\nlabs(x='',y='')+\nfacet_wrap('Is_Active')+\ntheme_dark()+\ntheme(figure_size=(11,7),\nlegend_position='right',  \npanel_grid=element_blank(),\nsubplots_adjust={'hspace': 0.4,'wspace': 0.4},\n#plot_background=element_rect(fill='lightgrey'),\npanel_background=element_rect(fill='none'),    \nplot_title=element_text(style='normal',size=16,weight='bold'),      \naxis_text_x=element_blank(),\naxis_text_y=element_text(style='normal',size=12,weight='bold'),    \naxis_ticks=element_blank(),\nlegend_background=element_blank(),    \naxis_title=element_text(style='normal',size=14,weight='bold'),\nstrip_text=element_text(style='normal',size=14,weight='bold')))","5d812f2e":"train.groupby(['Is_Active'])['Avg_Account_Balance'].agg(['min','mean','median','max','std'])","cf9142be":"import missingno as msno","e89a4285":"train.isnull().sum()","dc508d43":"msno.dendrogram(train.iloc[:,1:10])","18ef471e":"### Let's see customer's average account balance distribution using histogram.","2ed06d15":"### Let's see the Customer's age distribution","39815a2e":"### Introduction\n\n#### This competition is about identifying the customers who are highly interested in recommended credit cards. The customer's interests in recommended credit cards will be identified based on the customer account details.","5f5ad7be":"#### customers who are from regions 254, 268, and 283 having a higher number of previous loans in the bank.","e27b2206":"#### The above dodge bar chart explains that if the customer has any previous loans means they are highly interested in recommended credit cards.\n\n#### There are 29325 previous loan informations are missing.","03f21f04":"### Import Train and Test Dataset\n","23260089":"#### The above bar chart explains that the customers who are in the age range 22 to 31 are mostly using channel X1 to interact with the bank.\n\n#### 40 years and old age customers are mostly using X2 and X3 channels to interact with the bank.","1bae733d":"#### The above histogram shows that the customer's Avg_Account_Balance distribution right skewed.\n\n#### The boxplot shows there are **ouliers**.","45b99216":"### Let's see is there a difference in customer average balance based on their type of occupation.","a537b7e4":"### Let's see how many customers have been active in the past 3 months.","c0718893":"#### The bar chart shows that male customers are highly interests in recommended credit cards when compare to female customers.\n#### The percentage of customers not interested in the recommended policies is high in both genders.","287a1349":"\n#### The test dataset contains 105312 obsevations and 9 features.","45a8ce4d":"#### The above summary shows that the average age of the customers who are eligible to take credit cards is **43** and the minimum age is **23** and the maximum age is **85**.\n\n#### Vintage is how long the eligible customers have been on the bank records.The average is **3 year 8 months** and the minimum is **7 months**, the maximum year is **11 years(135 months)**\n\n","d90ef1e9":"#### The above chart explains more eligible customers are who have been in the category of 7 months to 3 years.\n\n#### The male customers who have been in the bank for 7 to 9 years are highly interested in recommended credit cards.","8eaa0493":"#### Credit product column has 29325 missing values.","259a616c":"### Let's see if there is any difference in customer Avg_Account_Balance distribution and their responses on recommended credit card categories.","9e662027":"#### Let's create a categorical group from customer age column ","baab5cc1":"### Let's compare customer's previous loan details with their occupations.","387483e5":"#### Both train and test dataset have missin values in Credit_Product column.","c7c3332a":"#### The above dodge bar explains that more number customers are using the **X1** channel to interact with the bank. In that, most of them are females and also show a higher interest than male customers in recommended credit cards.\n\n#### More number of interested customer using **X2 and X3** to interact with the bank.","06554e94":"#### The above information shows that there are nine features to predict the customer's interests in the recommended credit cards.   \n#### In train dataset there are  245725 observations and 9 features and 1 target column.  ","26e7767e":"#### The above-stacked bar chart explains that most salaried customers are females and moreover less interested in recommended credit cards.\n\n#### Self-employed and customers who are having other occupations are highly interested in recommended credit cards.","48cfa680":"#### Let's see how many various channels are used by customers to interact with the bank. Also, let see if there is any difference in customer responses based on those channels.","8c03cdb7":"#### Let's create a fuction to find a optimal bin width by using Freedman Diaconis Rule.","5e816265":"#### The above chart shows that the customers from the region **254,268,283,284** are shown higher interest in recommended credit card. even though, the same regions have more numbers of uninterested customers.","cbd938b1":"### Let's compare the customer's past three months' account activity and their average account balance.","2b68d722":"### Let's see the way of interacting with the bank changes will base on the gender-wise customer's occupations?","23b0b23e":"#### The above facet bar chart explains that the salaried customers are mostly using the X1 channel to interact with the bank.\n\n#### Self_employed customers are mostly using the channel X2, X3 to interact with the bank.\n\n#### Customer's who are having other occupations are mostly using X1, X2, and X3 channels to interact with the bank.","48deeb65":"### Let's see if there is any difference in the channel of interacting with the bank by gender. Also, let's see is there any change in the customer's interest.","a37c20cf":"### Let's see if there is any difference in customer age distribution and their responses on recommended credit card categories.","31d6a4c6":"#### The stacked bar chart explains that both male and female customers who are in the age category of **40-49 and 49-58** are highly interested in recommended credit cards.\n\n#### More customers of the bank are in the age range of **22 to 31**.","c0d0ec5a":"\n#### First let's see the target column distribution.","f7e65fd4":"### Let's see if customer's responses on recommended credit cards will be based on their occupations.","ba200e63":"#### Let's see if the customer has any previous loans.","47810163":"#### The above boxplot explains that there is a significant differences between region and customer's age distribution.\n\n#### There are outlier points in some regions.","3a0257bb":"#### The above dodge bar chart explains that the customers who have not been active in the past three months are highly interested in recommended credit cards.","d20ecdcb":"### Let's see various age groups of customers and their channel of communication to the bank.","5f63ee7c":"### Let's see which channel of interaction is popular in all the regions.","1ac16344":"#### The above histogram shows that the customer's age distribution looks normal and there is no skew. There are two peaks at the **age 30 and 50**.\n\n#### The boxplot shows there are **no ouliers**.\n\n#### The **mean and median are equal** so the distribution is **symmetric and zero skewness**.\n\n#### Most customers who are eligible to get credit cards are in the age range of **24 to 30**.","e7117450":"### Let's see if there are any differences between gender-wise customer's interest responses and customer's age category.","b6ae3ddc":"#### The above bar chart shows that the target column biased towards **one class(1-Not_Interested)** and clearly shows a class imbalance.","36b06c1a":"### Import Necessary Packages","3a9fce12":"#### Let's bin the vintage years by using pandas cut.","688a1d85":"### Let's perform Exploratory data analysis.","fabaa4df":"#### The target column **Is_Lead** is in binary(0,1) format.Let's convert into **0-as Not_Interested** and **1-as Interested**.","18ea0432":"#### The customers who are from regions 253,268,283,284 are mostly using X1, X2, and X3 channels to interact with the bank.\n","c62fa6a2":"#### The dendrogram explains that the column credit product and other column has the highest distance so cannot predict the missing value based on the other columns.","876fbdc3":"#### Highest number of entrepreneurs customers are from the regions of 268 283, and 284.","8cd3a111":"### Let's see if there are any differences in gender-wise occupation and responses to the recommended credit cards.","a1df2d0a":"\n### Let's see a statistical summary of the numerical columns in the train and test dataset.","f651f46d":"### Let's see region-wise age distribution using boxplot","29043484":"#### The vintage details in months so let's convert it into year format.","f8b1019d":"#### The above histogram explains that the customers who have been in bank books for 1 to 3 years and 1 to 8 year means they are highly interested in recommended credit cards.\n\n#### Most of the eligible customers are have been in the bank book's are 1 to 3 years.","b6fd3386":"#### The above boxplot explains that there is a difference between the customer's average balance and the past 3 months' account activity.","a7a631c5":"#### The above histogram shows that there is no significant change in both balance distributions.","839db43c":"#### Let's see how long been the customers are in the bank's book and see their response pattern on recommended credit cards.","926ac327":"#### The above bar chart explains that the customers who are self-employed and the customers who have other occupations are highly interested in recommended credit cards.\n#### Most of the eligible customers are self-employed and salaried.","5e9dd64b":"#### Let's see customer's occupation-wise how many of them are have been active in the past 3 months and see their responses in recommended credit cards.","4569fe28":"#### Function to find Inter-Quartile-Range","635c3e9f":"### Let's see Region-wise gender distribution.","36dc80f8":"#### The above chart and table explains that the region **252,256,264,267,271,and 275** have more number of female customers.","153e8fd7":"#### The above dodge bar chart explains that the customers who are self-employed and have not been active in the past 3 months are highly interested in recommended credit cards.","a29c00e4":"#### Let's compare gender-wise customer responses with vintage year category.","b596408d":"### Let's see structure of the train and test dataset","64cd4371":"### Let's see Region-wise customers occupations.","cdb6049a":"### Let's see the glimpse of train and test dataset.","2030641c":"#### Test data","7db1f6e2":"#### The above histogram explains that the customers who are not interested in the recommended credit card options, in that most of them are in the age range of **27 to 30**.\n\n#### **45 to 55** age customer's shows higher interest in recommended credit card options when compare to the other age range customers.","cdc3646e":"### Let's compare the age group and type of occupations and check customer's responses on recommended credit cards.","3b5fd6f4":"#### The above dodge bar chart explains that the customers who are 40 years and above are have been in the bank books for 7 to 9 years and showing higher interest in recommended credit cards.","85817805":"### Let's compare the gender-wise customer age category with vintage year category.","f0c31941":"#### Train data","11034713":"#### The above chart explains that the entrepreneur customers are having fewer previous loans than customers who are having other occupations.\n\n#### self-employed customers are having a high number of previous loans.","c5a51c24":"#### The above-stacked bar chart explains that most customers have interacted with the bank through channel **X1**.\n\n#### The customers who are used channel **X3** to interact with the banks are highly interested in recommended credit cards.","072b4adc":"### Let's see gender wise customer's response on recommended credit cards.","dcedab88":"#### The above bar chart and pivot table explains that most of the salaried customers are in the age range of **22-31**.\n\n#### **40-49 and 49-58** age range customers are mostly **self-employed and interested in recommended credit cards**.\n\n#### The age range of customers who are entrepreneurs is between **21-58** \n\n#### The customers who are older than **67** years and they are occupations not fall under the category of salaried, self-employed, and entrepreneur.\n","60060ffa":"### Let's analyze the missing values","88481083":"### Let's see which region customers have the highest previous loans.","ffd3e3f4":"### Let's check is there are any missing values in train and test dataset by column wise.","9c012de2":"### Let's see how many regions are there and check region wise customer responses on recommended credit cards.","64fa2112":"#### Dendrogram-reveals deeper trend than pair-wise analysis heatmap"}}