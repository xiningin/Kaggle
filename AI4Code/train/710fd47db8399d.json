{"cell_type":{"184af0fa":"code","d8b7f9af":"code","574719d7":"code","fd06a823":"code","99ed34b8":"code","9bb42ab4":"code","2ca76e5d":"code","bf5bb1b0":"code","905f5f7d":"code","dfe4dbf7":"code","990c894a":"code","219266a3":"code","7cf9267d":"code","e3383e0d":"code","ddb57f1b":"code","39246379":"code","407afa1c":"code","51d407c5":"code","537d2930":"code","63260545":"code","933e47d4":"code","e569ffc8":"code","299c400a":"code","0768c9a0":"code","51261985":"code","727de542":"code","3e6d09f6":"code","c55c0bd2":"code","472c0910":"code","fbd0f207":"code","5cbf46df":"code","bf7dd3d3":"code","f1a377a0":"code","ca0c2164":"code","7559e2e6":"code","aa036987":"code","2b0c376b":"code","eaf8e803":"code","21d25e12":"code","35e40bc5":"code","7c74e206":"code","cc5b0f7f":"code","7f4f7ee0":"code","dceef916":"code","6e02e58d":"code","221e25f0":"code","549350ab":"code","2687ab93":"code","d9d58ac2":"code","7d1fc4c3":"code","fe43d03c":"code","18b5f935":"code","540d5afd":"code","2c64f32c":"code","0ea1bd3d":"code","589a6487":"code","9bf9d2f8":"code","c9c2387c":"code","bea41b9d":"code","aac57d91":"code","19c3e0f3":"code","82c7f9a1":"code","e2ad5755":"markdown","cb69303d":"markdown","8e3043fe":"markdown","a6c800f1":"markdown","329344ac":"markdown","2282a0dc":"markdown","e9e674c7":"markdown","c0e0efe7":"markdown","7f22c74c":"markdown","1e5e857b":"markdown","dc99a304":"markdown","5a84d765":"markdown","e4e2ce7f":"markdown","fe08a950":"markdown","24e23bca":"markdown","e22eada8":"markdown","33e3fcbf":"markdown","c9c4d8ee":"markdown","f097aa68":"markdown","211c972b":"markdown","3ad1cf4c":"markdown","24918002":"markdown","bceba5f0":"markdown","bd8e0d83":"markdown","7b64fae9":"markdown"},"source":{"184af0fa":"#Importo las librerias que voy a utilizar\n\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nprint(\"Setup completo\")","d8b7f9af":"pip install openpyxl","574719d7":"#Path de las bases\n\npath_equipamiento = '..\/input\/equipamiento-de-los-hogares\/engho2018_equipamiento.txt'\npath_hogares = '..\/input\/hogares\/engho2018_hogares.txt'","fd06a823":"#Lectura de la base\n\nbase_equipamiento = pd.read_csv(path_equipamiento,sep='|')\nbase_equipamiento.head()","99ed34b8":"#Tama\u00f1o del dataframe\n\nbase_equipamiento.shape","9bb42ab4":"#Columnas del dataframe\n\nlist(base_equipamiento.columns)","2ca76e5d":"#Lectura de la base\n\nbase_hogares = pd.read_csv(path_hogares,sep='|')\nbase_hogares.head()","bf5bb1b0":"#Tama\u00f1o del dataframe\n\nbase_hogares.shape","905f5f7d":"#Columnas del dataframe\n\nlist(base_hogares.columns)","dfe4dbf7":"columnas_hogares = ['id','decgaphp','decgaphr','decgapht','quigaphp','quigaphr','quigapht', 'qinth_p','qinth_r',\n                    'qinth_t','dinth_p','dinth_r','dinth_t','qinpch_p','qinpch_r','qinpch_t','dinpch_p','dinpch_r','dinpch_t']\ncolumnas_hogares","990c894a":"base_hogares_util = base_hogares[columnas_hogares]\nbase_hogares_util.head()","219266a3":"base_hogares_util.shape","7cf9267d":"base = pd.merge(base_equipamiento,base_hogares_util,how='outer', on='id')\nbase.head()","e3383e0d":"base.shape","ddb57f1b":"#cg44 - 'Habitualmente utiliza'\n\ncg44 = {'Descripcion': ['Utiliza','No Utiliza','No tiene','Ns\/Nr']}\ndf_cg44 = pd.DataFrame(data=cg44,index=[1,2,3,99])\ndf_cg44","39246379":"#cg56 - 'Antig\u00fcedad del equipo'\n\ncg56 = {'Descripcion': ['Menos de 5 a\u00f1os','Entre 5 y 10 a\u00f1os','Entre 11 y 20 a\u00f1os','M\u00e1s de 20 a\u00f1os','Ns\/Nr']}\ndf_cg56 = pd.DataFrame(data=cg56,index=[1,2,3,4,99])\ndf_cg56","407afa1c":"coccion_conservacion = {'Descripcion': ['Cocina a gas','Anafe a gas','Anafe electrico','Horno a gas','Horno electrico']}\ncoccion_conservacion = pd.DataFrame(data=coccion_conservacion,index=[541101,541102,541103,541104,541105])\ncoccion_conservacion","51d407c5":"calentamiento_agua = {'Descripcion': ['Calef\u00f3n a gas con piloto','Calef\u00f3n a gas sin piloto','Calef\u00f3n electrico','Calefon solar\/termotanque solar','Termotanque a gas','Termotanque electrico','Ducha electrica',\n                                     'Agua caliente por caldera individual','Agua caliente central']}\ncalentamiento_agua = pd.DataFrame(data=calentamiento_agua,index=[541301,541302,541303,541304,541305,541306,541307,541308,541309])\ncalentamiento_agua","537d2930":"calefaccion_ambiente = {'Descripcion': ['Split capacidad de calefacci\u00f3n hasta 3 KW','Split capacidad de calefacci\u00f3n de m\u00e1s de 3 KW','Estufa\/calefactor a gas sin tiro balanceado','Estufa\/calefactor a gas con tiro balanceado','Estufa el\u00e9ctrica (caloventor, radiador, convector,etc\u00e9tera)',\n                                       'Estufa a garrafa','Estufa a kerosene','Hogar\/salamandra a le\u00f1a','Calefacci\u00f3n centralizada a gas','Calefacci\u00f3n por losa radiante','Calefacci\u00f3n por radiadores de agua']}\ncalefaccion_ambiente = pd.DataFrame(data=calefaccion_ambiente,index=[541401,541402,541403,541404,541405,541406,541411,541407,541408,541409,541410])\ncalefaccion_ambiente","63260545":"condicion_1 = (base['articulo'] == 541101) | (base['articulo'] == 541102) | (base['articulo'] == 541103) | (base['articulo'] == 541104) | (base['articulo'] == 541105)","933e47d4":"base_grupo1 = base[condicion_1]\nbase_grupo1.head()","e569ffc8":"condicion_2 = (base['articulo'] == 541301) | (base['articulo'] == 541302) | (base['articulo'] == 541303) | (base['articulo'] == 541304) | (base['articulo'] == 541305) | (base['articulo'] == 541306) | (base['articulo'] == 541307) | (base['articulo'] == 541308) | (base['articulo'] == 541309)","299c400a":"base_grupo2 = base[condicion_2]\nbase_grupo2.head()","0768c9a0":"condicion_3 = (base['articulo'] == 541401) | (base['articulo'] == 541402) | (base['articulo'] == 541403) | (base['articulo'] == 541404) | (base['articulo'] == 541405) | (base['articulo'] == 541406) | (base['articulo'] == 541407) | (base['articulo'] == 541408) | (base['articulo'] == 541409) | (base['articulo'] == 541410) | (base['articulo'] == 541411)","51261985":"base_grupo3 = base[condicion_3]\nbase_grupo3.head()","727de542":"#Filtro para aquellos hogares que declaran utilizar - Columna cg44 valor 1\n\nbase_grupo1_utiliza = base_grupo1[base_grupo1['cg44']==1]\nbase_grupo1_utiliza.head()","3e6d09f6":"#Filtro para aquellos hogares que declaran utilizar - Columna cg44 valor 1\n\nbase_grupo2_utiliza = base_grupo2[base_grupo2['cg44']==1]\nbase_grupo2_utiliza.head()","c55c0bd2":"#Filtro para aquellos hogares que declaran utilizar - Columna cg44 valor 1\n\nbase_grupo3_utiliza = base_grupo3[base_grupo3['cg44']==1]\nbase_grupo3_utiliza.head()","472c0910":"def region_quintiles(df,codigo,region,nombre):\n    df_equipo = df[df['articulo']==codigo]\n    s_region = df_equipo[df_equipo['region']==region]\n    s_region_quintiles = s_region.groupby(quintil)['pondera'].sum()\n    df_region_quintiles = pd.DataFrame(s_region_quintiles).transpose()\n    df_region_quintiles.index = [nombre]\n    \n    return df_region_quintiles","fbd0f207":"def tabla(base,codigo):\n    metro = region_quintiles(base,codigo,1,'Metropolitana')\n    pamp = region_quintiles(base,codigo,2,'Pampeana')\n    noro = region_quintiles(base,codigo,3,'Noroeste')\n    nore = region_quintiles(base,codigo,4,'Noreste')\n    cuyo = region_quintiles(base,codigo,5,'Cuyo')\n    pata = region_quintiles(base,codigo,6,'Patagonica')\n    df = pd.concat([metro,pamp,noro,nore,cuyo,pata]).fillna(0)\n    \n    return df","5cbf46df":"quintil = 'qinth_t'","bf7dd3d3":"print('    541101 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo1_utiliza,541101)","f1a377a0":"print('    541102 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo1_utiliza,541102)","ca0c2164":"print('    541103 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo1_utiliza,541103)","7559e2e6":"print('    541104 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo1_utiliza,541104)","aa036987":"print('    541105 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo1_utiliza,541105)","2b0c376b":"print('    541301 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541301)","eaf8e803":"labels = ['G1', 'G2', 'G3', 'G4', 'G5']\nmen_means = [20, 35, 30, 35, 27]\nwomen_means = [25, 32, 34, 20, 25]\nmen_std = [2, 3, 4, 1, 2]\nwomen_std = [3, 5, 2, 3, 3]\nwidth = 0.35       # the width of the bars: can also be len(x) sequence\n\nfig, ax = plt.subplots()\n\nax.bar(labels, men_means, width, yerr=men_std, label='Men')\nax.bar(labels, women_means, width, yerr=women_std, bottom=men_means,\n       label='Women')\n\nax.set_ylabel('Scores')\nax.set_title('Scores by group and gender')\nax.legend()\n\nplt.show()","21d25e12":"prueba = tabla(base_grupo2_utiliza,541301)\nprueba_new = prueba.T\nprueba_new","35e40bc5":"prueba_new.columns","7c74e206":"list(prueba_new.loc[1])","cc5b0f7f":"q1 = prueba_new.loc[1]\nq2 = prueba_new.loc[2]\nq1+q2","7f4f7ee0":"labels = list(prueba_new.columns)\nq1 = prueba_new.loc[1]\nq2 = prueba_new.loc[2]\nq3 = prueba_new.loc[3]\nq4 = prueba_new.loc[4]\nq5 = prueba_new.loc[5]\n\nwidth = 0.35       # the width of the bars: can also be len(x) sequence\n\nfig, ax = plt.subplots(figsize=(20,12))\n\nax.bar(labels, q1, width, label='q1')\nax.bar(labels, q2, width,bottom=q1,label='q2')\nax.bar(labels, q3, width,bottom=q1+q2,label='q3')\nax.bar(labels, q4, width,bottom=q1+q2+q3,label='q4')\nax.bar(labels, q5, width,bottom=q1+q2+q3+q4,label='q5')\n\nax.set_ylabel('Cantidad de Hogares estimados')\nax.set_title('Calefon a Gas con Piloto')\nax.legend()\n\nplt.show()","dceef916":"print('    541302 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541302)","6e02e58d":"print('    541303 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541303)","221e25f0":"print('    541304 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541304)","549350ab":"print('    541305 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541305)","2687ab93":"print('    541306 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541306)","d9d58ac2":"print('    541307 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541307)","7d1fc4c3":"print('    541308 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541308)","fe43d03c":"print('    541309 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo2_utiliza,541309)","18b5f935":"print('    541401 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541401)","540d5afd":"print('    541402 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541402)","2c64f32c":"print('    541403 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541403)","0ea1bd3d":"print('    541404 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541404)","589a6487":"print('    541405 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541405)","9bf9d2f8":"print('    541406 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541406)","c9c2387c":"print('    541407 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541407)","bea41b9d":"print('    541408 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541408)","aac57d91":"print('    541409 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541409)","19c3e0f3":"print('    541409 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541409)","82c7f9a1":"print('    541410 - Cantidad de Hogares estimados - Quintiles por Region')\ntabla(base_grupo3_utiliza,541410)","e2ad5755":"# 1. Librerias, lectura de base y analisis general","cb69303d":"# 5. Funciones\n","8e3043fe":"## 2.1 Columnas","a6c800f1":"## 1.2 Base Hogares","329344ac":"## Calefaccion de ambientes","2282a0dc":"## 6.2 Calentamiento de agua sanitaria","e9e674c7":"# Analisis INDEC-ENGHO 2017\/2018 - Equipamiento y Quintiles - Factor de Expansion - Tablas","c0e0efe7":"## Calentamiento de agua sanitaria","7f22c74c":"# 6. Analisis\n\nVoy analizar por medio de la columna \"qinth_t\" : Quintil de ingreso total del hogar. Total del pa\u00eds","1e5e857b":"## 2.2 Grupos","dc99a304":"### 2.2.3 Calefaccion de ambientes","5a84d765":"## Calentamiento de agua sanitaria","e4e2ce7f":"## 6.1 Coccion de alimentos","fe08a950":"# 4. Bases de Grupos - Utiliza","24e23bca":"## 6.3 Calefaccion de ambientes","e22eada8":"# 3. Bases de Grupos","33e3fcbf":"## 1.1 Base Equipamiento","c9c4d8ee":"### 1.2.1 Base Hogares - Columnas deciles y quintiles","f097aa68":"## Coccion de alimentos","211c972b":"## Coccion de alimentos","3ad1cf4c":"## Calefaccion de ambientes","24918002":"### 2.2.2 Calentamiento de agua sanitaria","bceba5f0":"### 2.2.1 Coccion y conservacion de alimentos","bd8e0d83":"## 1.3 Merge de Bases","7b64fae9":"# 2. Auxiliares"}}