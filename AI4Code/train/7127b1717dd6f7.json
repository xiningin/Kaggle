{"cell_type":{"832c8573":"code","39b538e4":"code","df6c51ba":"code","7a4bf727":"code","748e03a8":"code","03a6fa71":"code","38bf6973":"code","4865df15":"code","67ac1920":"code","24e2bca2":"code","04101de2":"code","114ee367":"code","f2e4071a":"code","a190a49d":"code","fdb54cba":"code","fe4199c1":"code","5c0d3541":"code","dad45399":"code","be0f7c1b":"code","e5d0d9ed":"code","54501b17":"code","ddf1e1d1":"code","b9f8aa0c":"code","ebf7f8bd":"code","28f222d6":"code","64bb88a2":"code","b7bdfced":"code","c23f0fbd":"code","a00acb59":"code","b77cac49":"code","cb32b077":"markdown","cdf9e623":"markdown","9f41549e":"markdown","bcdf4377":"markdown","f060409b":"markdown","acf2ca86":"markdown","5048c872":"markdown","887c705f":"markdown","811348f4":"markdown","2a4dd67e":"markdown","33b4bf05":"markdown","6a9447f0":"markdown","32622542":"markdown","cec0bde3":"markdown","695e387b":"markdown","24a95276":"markdown","6ec6830e":"markdown","9c1f34e4":"markdown","6a4bf690":"markdown","e7ea023f":"markdown","5fb4ed30":"markdown","23284219":"markdown","91596aed":"markdown","4d3e32cb":"markdown","c8bf02e7":"markdown","d809c818":"markdown","e7f65a64":"markdown"},"source":{"832c8573":"import numpy as np\nimport pandas as pd\n# pip install seaborn \nimport seaborn as sns\nimport matplotlib.pyplot as plt","39b538e4":"# First, look at everything.\nfrom subprocess import check_output\nprint(check_output([\"ls\", \"..\/input\/\"]).decode(\"utf8\"))","df6c51ba":"dtype = {'DayOfWeek': np.uint8, 'DayofMonth': np.uint8, 'Month': np.uint8 , 'Cancelled': np.uint8, \n         'Year': np.uint16, 'FlightNum': np.uint16 , 'Distance': np.uint16, \n         'UniqueCarrier': str, 'CancellationCode': str, 'Origin': str, 'Dest': str,\n         'ArrDelay': np.float16, 'DepDelay': np.float16, 'CarrierDelay': np.float16,\n         'WeatherDelay': np.float16, 'NASDelay': np.float16, 'SecurityDelay': np.float16,\n         'LateAircraftDelay': np.float16, 'DepTime': np.float16}","7a4bf727":"# change the path if needed\npath = '..\/input\/2008.csv'\nflights_df = pd.read_csv(path, usecols=dtype.keys(), dtype=dtype)","748e03a8":"print(flights_df.shape)\nprint(flights_df.columns)","03a6fa71":"flights_df.head()","38bf6973":"flights_df.head().T","4865df15":"flights_df.info()","67ac1920":"flights_df.describe().T","24e2bca2":"flights_df['UniqueCarrier'].nunique()","04101de2":"flights_df.groupby('UniqueCarrier').size().plot(kind='bar');","114ee367":"flights_df.groupby(['UniqueCarrier','FlightNum'])['Distance'].sum().sort_values(ascending=False).iloc[:3]","f2e4071a":"flights_df.groupby(['UniqueCarrier','FlightNum'])\\\n  .agg({'Distance': [np.mean, np.sum, 'count'],\n        'Cancelled': np.sum})\\\n  .sort_values(('Distance', 'sum'), ascending=False)\\\n  .iloc[0:3]","a190a49d":"pd.crosstab(flights_df.Month, flights_df.DayOfWeek)","fdb54cba":"plt.imshow(pd.crosstab(flights_df.Month, flights_df.DayOfWeek),\n           cmap='seismic', interpolation='none');","fe4199c1":"flights_df.hist('Distance', bins=20);","5c0d3541":"flights_df['Date'] = pd.to_datetime(flights_df.rename(columns={'DayofMonth': 'Day'})[['Year', 'Month', 'Day']])","dad45399":"num_flights_by_date = flights_df.groupby('Date').size()","be0f7c1b":"num_flights_by_date.plot();","e5d0d9ed":"num_flights_by_date.rolling(window=7).mean().plot();","54501b17":"# You code here","ddf1e1d1":"# You code here","b9f8aa0c":"# You code here","ebf7f8bd":"# You code here","28f222d6":"# You code here","64bb88a2":"# You code here","b7bdfced":"# You code here","c23f0fbd":"# You code here","a00acb59":"# You code here","b77cac49":"# You code here","cb32b077":"**2. Plot distributions of flight cancellation reasons (_CancellationCode_).**\n\n**What is the most frequent reason for flight cancellation? (Use this [link](https:\/\/www.transtats.bts.gov\/Fields.asp?Table_ID=236) to translate codes into reasons)**\n- carrier\n- weather conditions \n- National Air System\n- security reasons","cdf9e623":"**9. Identify the carrier with the greatest number of cancellations due to carrier in the corresponding month from the previous question.**\n\n- 9E\n- EV\n- HA\n- AA","9f41549e":"**Flight distance histogram:**","bcdf4377":"**Another way:**","f060409b":"**Print first 5 rows of the dataset.**","acf2ca86":"**It can also be handy to color such tables in order to easily notice outliers:**","5048c872":"**7. Examine the distribution of cancellation reasons with time. Make a bar plot of cancellation reasons aggregated by months.**\n\n**Choose all correct statements:**\n- December has the highest rate of cancellations due to weather. \n- The highest rate of cancellations in September is due to Security reasons.\n- April's top cancellation reason is carriers.\n- Flights cancellations due to National Air System are more frequent than those due to carriers.","887c705f":"**8. Which month has the greatest number of cancellations due to Carrier?** \n- May\n- January\n- September\n- April ","811348f4":"**1. Find top-10 carriers in terms of the number of completed flights (_UniqueCarrier_ column)?**\n\n**Which of the listed below is _not_ in your top-10 list?**\n- DL\n- AA\n- OO\n- EV ","2a4dd67e":"**Check the number of rows and columns and print column names.**","33b4bf05":"**Number of flights by days of week and months:**","6a9447f0":"**Reading data into memory and creating a Pandas _DataFrame_ object**\n\n(This may take a while, be patient)\n\nWe are not going to read in the whole dataset. In order to reduce memory footprint, we instead load only needed columns and cast them suitable data types.","32622542":"**Count unique Carriers and plot their relative share of flights:**","cec0bde3":"# <center>Assignment #2. Fall 2018 <br> Exploratory Data Analysis (EDA) of US flights <br> (using Pandas, Matplotlib & Seaborn)\n\n<img src='https:\/\/mlcourse.ai\/notebooks\/blob\/master\/img\/plane_sunset.png' width=50%>\n\nPrior to working on the assignment, you'd better check out the corresponding course material:\n - [Visualization: from Simple Distributions to Dimensionality Reduction](https:\/\/mlcourse.ai\/notebooks\/blob\/master\/jupyter_english\/topic02_visual_data_analysis\/topic2_visual_data_analysis.ipynb?flush_cache=true)\n - [Overview of Seaborn, Matplotlib and Plotly libraries](https:\/\/mlcourse.ai\/notebooks\/blob\/master\/jupyter_english\/topic02_visual_data_analysis\/topic2_additional_seaborn_matplotlib_plotly.ipynb?flush_cache=true)\n - first lectures in [this](https:\/\/www.youtube.com\/watch?v=QKTuw4PNOsU&list=PLVlY_7IJCMJeRfZ68eVfEcu-UcN9BbwiX) YouTube playlist \n\n### Your task is to:\n - write code and perform computations in the cells below\n - choose answers in the [webform](https:\/\/docs.google.com\/forms\/d\/1qSTjLAGqsmpFRhacv0vM-CMQSTT_mtOalNXdRTcdtM0\/edit)\n - submit answers with **the very same email and name** as in assignment 1. This is a part of the assignment, if you don't manage to do so, you won't get credits. If in doubt, you can re-submit A1 form till the deadline for A1, no problem\n \n### <center> Deadline for A2: 2018 October 21, 20:59 CET\n\n","695e387b":"**Making a histogram of flight frequency by date.**","24a95276":"**Examine data types of all features and total dataframe size in memory.**","6ec6830e":"**Do you see a weekly pattern above? And below?**","9c1f34e4":"**Transpose the frame to see all features at once.**","6a4bf690":"**We can also _group by_ category\/categories in order to calculate different aggregated statistics.**\n\n**For example, finding top-3 flight codes, that have the largest total distance travelled in year 2008.**","e7ea023f":"<center>\n<img src=\"https:\/\/mlcourse.ai\/notebooks\/blob\/master\/img\/ods_stickers.jpg\" \/>\n    \n## [mlcourse.ai](mlcourse.ai) \u2013 Open Machine Learning Course \n\nAuthor: [Yury Kashnitskiy](https:\/\/yorko.github.io). \nTranslated and edited by [Maxim Keremet](https:\/\/www.linkedin.com\/in\/maximkeremet\/), [Artem Trunov](https:\/\/www.linkedin.com\/in\/datamove\/), and [Aditya Soni](https:\/\/www.linkedin.com\/in\/aditya-soni-0505a9124\/). This material is subject to the terms and conditions of the [Creative Commons CC BY-NC-SA 4.0](https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/) license. Free use is permitted for any non-commercial purpose.","5fb4ed30":"**4. Find top-5 delayed routes (count how many times they were delayed on departure). From all flights on these 5 routes, count all flights with weather conditions contributing to a delay.**\n\n- 449 \n- 539 \n- 549 \n- 668 ","23284219":"**6. Show how the number of flights changes through time (on the daily\/weekly\/monthly basis) and interpret the findings.**\n\n**Choose all correct statements:**\n- The number of flights during weekends is less than during weekdays (working days).\n- The lowest number of flights is on Sunday.\n- There are less flights during winter than during summer.  ","91596aed":"**10. Examine median arrival and departure delays (in time) by carrier. Which carrier has the lowest median delay time for both arrivals and departures? Leave only non-negative values of delay times ('ArrDelay', 'DepDelay').\n[Boxplots](https:\/\/seaborn.pydata.org\/generated\/seaborn.boxplot.html) can be helpful in this exercise, as well as it might be a good idea to remove outliers in order to build nice graphs. You can exclude delay time values higher than a corresponding .95 percentile.**\n\n- EV\n- OO\n- AA\n- AQ ","4d3e32cb":"**Get basic statistics of each feature.**","c8bf02e7":"**5. Examine the hourly distribution of departure times. For that, create a new series from DepTime, removing missing values.**\n\n**Choose all correct statements:**\n - Flights are normally distributed within time interval [0-23] (Search for: Normal distribution, bell curve).\n - Flights are uniformly distributed within time interval [0-23].\n - In the period from 0 am to 4 am there are considerably less flights than from 7 pm to 8 pm.","d809c818":"* Download the data [archive](http:\/\/stat-computing.org\/dataexpo\/2009\/2008.csv.bz2) (Archived ~ 114 Mb, unzipped - ~ 690 Mb). No need to unzip - pandas can unbzip on the fly.\n* Place it in the \"..\/..\/data\" folder, or change the path below according to your location.\n* The dataset has information about carriers and flights between US airports during the year 2008. \n* Column description is available [here](http:\/\/www.transtats.bts.gov\/Fields.asp?Table_ID=236). Visit this site to find ex. meaning of flight cancellation codes.","e7f65a64":"**3. Which route is the most frequent, in terms of the number of flights?**\n\n(Take a look at _'Origin'_ and _'Dest'_ features. Consider _A->B_ and _B->A_ directions as _different_ routes) \n\n - New-York \u2013 Washington\n - San-Francisco \u2013 Los-Angeles \n - San-Jose \u2013 Dallas\n - New-York \u2013 San-Francisco"}}