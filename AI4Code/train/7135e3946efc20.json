{"cell_type":{"13c0d5ee":"code","08c21116":"code","4ef9ed9b":"code","1dcee81f":"code","df1a576e":"code","f1d5697f":"code","2030943a":"code","60f715db":"code","0b8fabe0":"code","f121a6f8":"code","a5f601eb":"code","13c125a0":"code","e3608dbf":"code","3e107c4d":"markdown","29fbd452":"markdown"},"source":{"13c0d5ee":"%load_ext autoreload\n%autoreload 2\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom numpy import log\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\n\n","08c21116":"import pandas as pd\n\ndf = pd.concat([pd.read_csv(\"..\/input\/200-financial-indicators-of-us-stocks-20142018\/2014_Financial_Data.csv\", index_col=0),\n                pd.read_csv(\"..\/input\/200-financial-indicators-of-us-stocks-20142018\/2015_Financial_Data.csv\", index_col=0),\n                pd.read_csv(\"..\/input\/200-financial-indicators-of-us-stocks-20142018\/2016_Financial_Data.csv\", index_col=0),\n                pd.read_csv(\"..\/input\/200-financial-indicators-of-us-stocks-20142018\/2017_Financial_Data.csv\", index_col=0)],\n              sort=False).drop_duplicates()\n\n","4ef9ed9b":"df.head()","1dcee81f":"df.shape","df1a576e":"df.describe()","f1d5697f":"plt.figure()\n\n# to have a better view of the different entreprises, we will use the log scale\n\ndflog = log(df[[\"Revenue\",\"R&D Expenses\"]] + 0.01)\ndflog['Sector'] = df['Sector']\nsns.catplot(x=\"Revenue\", y=\"Sector\", kind=\"box\", data=dflog)\nsns.catplot(x=\"R&D Expenses\", y=\"Sector\", kind=\"box\", data=dflog)\n\nplt.show()","2030943a":"# Price variation are the difference between a year and an other\nX = df[['Sector', '2015 PRICE VAR [%]', '2016 PRICE VAR [%]', '2017 PRICE VAR [%]', '2018 PRICE VAR [%]']]\nX=  X.rename(mapper={'2015 PRICE VAR [%]':'2015',\n                     '2016 PRICE VAR [%]':'2016',\n                     '2017 PRICE VAR [%]':'2017',\n                     '2018 PRICE VAR [%]':'2018'}, axis=1)\nX = X.fillna(0)\nX.head()","60f715db":"g = sns.PairGrid(X[[\"2015\",\"2016\",\"2017\",\"2018\"]])\ng.map(plt.scatter)","0b8fabe0":"# just take a look at revenues between 0 and 1000:\nx = X[X[[\"2015\",\"2016\",\"2017\",\"2018\"]]<1000]\n\ng = sns.PairGrid(x[[\"2015\",\"2016\",\"2017\",\"2018\"]])\ng.map(plt.scatter)","f121a6f8":"# Data are really ugly ^^","a5f601eb":"from sklearn.cluster import KMeans\nkmeans = KMeans(n_clusters=5, random_state=0).fit(X[[\"2015\",\"2016\",\"2017\",\"2018\"]])\nX['label'] = kmeans.labels_","13c125a0":"from mpl_toolkits.mplot3d import Axes3D\n\nfig = plt.figure()\nax = Axes3D(fig, elev=48, azim=134)\nax.scatter(X[\"2015\"], X[\"2016\"], X[\"2017\"],\n               c=X['label'].astype(np.float), edgecolor='k')\nax.set_title(\"Price \")\nax.set_xlabel('2015')\nax.set_ylabel('2016')\nax.set_zlabel('2017')\nplt.show()","e3608dbf":"g = sns.PairGrid(X[[\"2015\",\"2016\",\"2017\",\"2018\",\"label\"]], hue=\"label\")\ng.map_diag(plt.hist)\ng.map_offdiag(plt.scatter)\ng.add_legend()\nplt.show()","3e107c4d":"As we an see the cluster of Consumer Defensive, Consumer Cyclical, Industrials, Real Estate have similar Revenues and R&D Expenses.\n\nFor the R&D Expenses, all Sectors have a budget between 10^10 and 10^25, but in the Basic Materials and Energy Sectors, there are a very variety of big and small entreprises.","29fbd452":"We could conclude that we have a big cluster, the blue one that contains all clients with no good data and other serious clients. With 5 clusters, we could say that this classification performs a gradient of different clients and it works well."}}