{"cell_type":{"74175cb1":"code","4acd02ca":"code","45955d1c":"code","e3f36909":"code","80a11b90":"code","6c246024":"code","363a63c2":"code","ceeb099f":"code","dc58ef27":"code","40bc444d":"code","1cc2b264":"code","8db6bc13":"code","10f025e4":"code","25447d70":"code","0290daf7":"code","5c4f6e3c":"code","c1312542":"code","f999ae00":"code","e62719b5":"code","1302be69":"code","510f4c68":"code","f6e8f2d1":"code","212070c6":"code","a6132080":"code","b59fb468":"code","e20a47bc":"code","d2c466ce":"code","ab27f293":"code","320f272f":"code","64f13df3":"code","62113502":"code","26b78291":"code","886e0392":"code","651242b0":"code","59c8b227":"code","53e89ff7":"code","7d900095":"markdown","8e40f207":"markdown","4f819a71":"markdown","312556d3":"markdown","2b4f2640":"markdown","38274b6d":"markdown"},"source":{"74175cb1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be \ndf2015=pd.read_csv('\/kaggle\/input\/world-happiness\/2015.csv')\ndf2015['year']=2015\nprint('2015.csv contains')\nprint(df2015.columns)\n\n\ndf2016=pd.read_csv('\/kaggle\/input\/world-happiness\/2016.csv')\ndf2016['year']=2016\nprint('2016.csv contains')\nprint(df2016.columns)\n\n\ndf2017=pd.read_csv('\/kaggle\/input\/world-happiness\/2017.csv')\ndf2017['year']=2017\ndf2017.rename(columns={'Economy..GDP.per.Capita.':'Economy (GDP per Capita)',\\\n                    'Trust..Government.Corruption.':'Trust (Government Corruption)',\\\n                    'Happiness.Score':'Happiness Score',\\\n                    'Health..Life.Expectancy.':'Health (Life Expectancy)','Dystopia.Residual':'Dystopia Residual','Happiness.Rank':'Happiness Rank'}, inplace=True)\nprint('2017.csv contains')\nprint(df2017.columns)\n\n\ndf2018=pd.read_csv('\/kaggle\/input\/world-happiness\/2018.csv')\ndf2018['year']=2018\ndf2018.rename(columns={'Score':'Happiness Score', \\\n                   'GDP per capita': 'Economy (GDP per Capita)',\\\n                   'Country or region':'Country',\\\n                   'Healthy life expectancy':'Health (Life Expectancy)',\\\n                   'Overall rank':'Happiness Rank',\\\n                   'Freedom to make life choices':'Freedom',\\\n                   'Perceptions of corruption':'Trust (Government Corruption)','Social support':'Family'}, inplace=True)\n\nprint('2018.csv contains')\nprint(df2018.columns)\n\n\ndf2019=pd.read_csv('\/kaggle\/input\/world-happiness\/2019.csv')\nimport seaborn as sns\nimport matplotlib.pyplot as plot\nfrom matplotlib import pyplot as plt\ndf2019['year']=2019\ndf2019.rename(columns={'Score':'Happiness Score', \\\n                   'GDP per capita': 'Economy (GDP per Capita)',\\\n                   'Country or region':'Country',\\\n                   'Healthy life expectancy':'Health (Life Expectancy)',\\\n                   'Overall rank':'Happiness Rank',\\\n                   'Freedom to make life choices':'Freedom',\\\n                   'Perceptions of corruption':'Trust (Government Corruption)','Social support':'Family'}, inplace=True)\n\nprint('2019.csv contains')\nprint(df2019.columns)","4acd02ca":"import seaborn as sns\nimport matplotlib.pyplot as plot\nfrom matplotlib import pyplot as plt","45955d1c":"#plt.hist(df2015['Happiness Score'],edgecolor='black',bins = 20)\n#plt.show()\nfig = sns.kdeplot(df2015['Happiness Score'], shade=True, legend ='2015 happiness', color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Happiness Score'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Happiness Score'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Happiness Score'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Happiness Score'], shade=True, color = 'black',label='2019')\nplt.title ('Happiness Score 2015-2019')\n\nplot.show()","e3f36909":"fig = sns.kdeplot(df2015['Economy (GDP per Capita)'], shade=True, color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Economy (GDP per Capita)'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Economy (GDP per Capita)'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Economy (GDP per Capita)'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Economy (GDP per Capita)'], shade=True, color = 'black',label='2019')\nplt.title ('GDP per Capita 2015-2019')\n\nplot.show()","80a11b90":"fig = sns.kdeplot(df2015['Family'], shade=True, color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Family'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Family'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Family'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Family'], shade=True, color = 'black',label='2019')\nplt.title ('Family support 2015-2019')\n\nplot.show()","6c246024":"fig = sns.kdeplot(df2015['Health (Life Expectancy)'], shade=True, color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Health (Life Expectancy)'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Health (Life Expectancy)'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Health (Life Expectancy)'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Health (Life Expectancy)'], shade=True, color = 'black',label='2019')\nplt.title ('Life Expectancy 2015-2019')\n\nplot.show()","363a63c2":"fig = sns.kdeplot(df2015['Generosity'], shade=True, color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Generosity'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Generosity'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Generosity'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Generosity'], shade=True, color = 'black',label='2019')\nplt.title ('Generosity 2015-2019')\n\nplot.show()","ceeb099f":"fig = sns.kdeplot(df2015['Trust (Government Corruption)'], shade=True, color = 'yellowgreen', label='2015')\nfig = sns.kdeplot(df2016['Trust (Government Corruption)'], shade=True, color = 'green', label='2016')\nfig = sns.kdeplot(df2017['Trust (Government Corruption)'], shade=True, color = 'lightblue',label='2017')\nfig = sns.kdeplot(df2018['Trust (Government Corruption)'], shade=True, color = 'blue',label='2018')\nfig = sns.kdeplot(df2019['Trust (Government Corruption)'], shade=True, color = 'black',label='2019')\nplt.title ('Trust (Government Curruption) 2015-2019')\n\nplot.show()","dc58ef27":"df_concat=pd.concat([df2015,df2016,df2017,df2018,df2019])\ndf_concat.columns\ndf_concat.to_csv('\/combined.csv')","40bc444d":"import matplotlib.pyplot as plt","1cc2b264":"top20_2015 = df_concat[df_concat.year==2015].iloc[:30]\ntop20_2016 = df_concat[df_concat.year==2016].iloc[:30]\ntop20_2017 = df_concat[df_concat.year==2017].iloc[:30]\ntop20_2018 = df_concat[df_concat.year==2018].iloc[:30]\ntop20_2019 = df_concat[df_concat.year==2019].iloc[:30]","8db6bc13":"import numpy as np\nplt.figure(figsize=(15,4))\nplt.scatter('Country','Happiness Score', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Happiness Score', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Happiness Score', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Happiness Score', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Happiness Score', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Top 30 happiness countries in 2015-2019', fontsize=14)\n\n            \nplt.show()","10f025e4":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Economy (GDP per Capita)', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Economy (GDP per Capita)', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Economy (GDP per Capita)', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Economy (GDP per Capita)', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Economy (GDP per Capita)', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('GDP per Capita in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","25447d70":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Family', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Family', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Family', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Family', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Family', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Family support in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","0290daf7":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Health (Life Expectancy)', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Health (Life Expectancy)', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Health (Life Expectancy)', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Health (Life Expectancy)', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Health (Life Expectancy)', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Life Expectancy in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","5c4f6e3c":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Freedom', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Freedom', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Freedom', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Freedom', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Freedom', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Freedom in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","c1312542":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Trust (Government Corruption)', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Trust (Government Corruption)', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Trust (Government Corruption)', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Trust (Government Corruption)', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Trust (Government Corruption)', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Trust in Government in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","f999ae00":"plt.figure(figsize=(15,4))\nplt.scatter('Country','Generosity', data=top20_2015,marker = \"o\", color='yellowgreen')\nplt.scatter('Country','Generosity', data=top20_2016,marker = \"o\", color='green')\nplt.scatter('Country','Generosity', data=top20_2017,marker = \"o\", color='skyblue')\nplt.scatter('Country','Generosity', data=top20_2018,marker = \"o\", color='blue')\nplt.scatter('Country','Generosity', data=top20_2019,marker = \"o\", color='black')\nplt.xticks(rotation = 'vertical')\nplt.legend(['2015','2016','2017','2018','2019'])\nplt.title('Generosity in top 30 happiness countries in 2015-2019', fontsize=14)\n             \nplt.show()","e62719b5":"import seaborn as sns\ncorrMatrix2015 = df2015.corr()\nprint(corrMatrix2015)\nsns.heatmap(corrMatrix2015,annot=True)\nplt.title ('Correlation Heatmap')\nplt.title('Correlation Coefficient of 2015 data', fontsize=14)","1302be69":"corrMatrix2016 = df2016.corr()\nprint(corrMatrix2016)\nsns.heatmap(corrMatrix2016,annot=True)\nplt.title('Correlation Coefficient of 2016 data', fontsize=14)","510f4c68":"corrMatrix2017 = df2017.corr()\nprint(corrMatrix2017)\nsns.heatmap(corrMatrix2017,annot=True)\nplt.title('Correlation Coefficient of 2017 data', fontsize=14)","f6e8f2d1":"corrMatrix2018 = df2018.corr()\nprint(corrMatrix2018)\nsns.heatmap(corrMatrix2018,annot=True)\nplt.title('Correlation Coefficient of 2018 data', fontsize=14)","212070c6":"corrMatrix2019 = df2019.corr()\nprint(corrMatrix2019)\nsns.heatmap(corrMatrix2019,annot=True)\nplt.title('Correlation Coefficient of 2019 data', fontsize=14)","a6132080":"sns.pairplot(df2015,kind = 'reg', vars =['Happiness Score', 'Economy (GDP per Capita)','Family','Health (Life Expectancy)',\n                                     'Freedom','Generosity'])\n\nprint('Correlation Matrix for 2015 data')","b59fb468":"sns.pairplot(df2016,kind = 'reg', vars =['Happiness Score', 'Economy (GDP per Capita)','Family','Health (Life Expectancy)',\n                                     'Freedom','Generosity'])\nprint('Correlation Matrix for 2016 data')","e20a47bc":"sns.pairplot(df2017,kind = 'reg', vars =['Happiness Score', 'Economy (GDP per Capita)','Family','Health (Life Expectancy)',\n                                     'Freedom','Generosity'])\nprint('Correlation Matrix for 2017 data')","d2c466ce":"sns.pairplot(df2018,kind = 'reg', vars =['Happiness Score', 'Economy (GDP per Capita)','Family','Health (Life Expectancy)',\n                                     'Freedom','Generosity'])\n\nprint('Correlation Matrix for 2018 data')","ab27f293":"sns.pairplot(df2019,kind = 'reg', vars =['Happiness Score', 'Economy (GDP per Capita)','Family','Health (Life Expectancy)',\n                                     'Freedom','Generosity'])\nprint('Correlation Matrix for 2019 data')","320f272f":"import statsmodels.api as sm\nimport statsmodels.formula.api as smf","64f13df3":"df = df_concat\nx = pd.get_dummies(df_concat[['Economy (GDP per Capita)','Family','Health (Life Expectancy)','Freedom','Generosity']])\ny = df_concat['Happiness Score']\nX = sm.add_constant(x)\nmodel = sm.OLS(y,X)\nresult = model.fit()\nresult.summary()","62113502":"# import the folium library\nimport folium\n\n# initialize the map and store it in a m object\n# london centered\nm = folium.Map(location=[20, 5], zoom_start=2.25, tiles='cartodbpositron')\n#m = folium.Map(location=[40, -95], zoom_start=4)\n#m.choropleth(geo_path='countries.geojson')\n# show the map\nm","26b78291":"import pandas as pd\nimport os\nimport json\n\n#url = (\n#    \"https:\/\/raw.githubusercontent.com\/python-visualization\/folium\/master\/examples\/data\"\n#)\n\n\nworld_geo = os.path.join('\/kaggle\/input\/world-countries.json')\n\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name=\"choropleth\",\n    data=df2015,\n    columns=['Country', 'Happiness Score'],\n    key_on='feature.properties.name',\n    fill_color=\"BuGn\",\n    fill = True,\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    reset=True,\n    legend_name='2015 Happiness Level',\n).add_to(m)\n\nfolium.LayerControl().add_to(m)\nm","886e0392":"n = folium.Map(location=[20, 5], zoom_start=2.25, tiles='cartodbpositron')\n#m = folium.Map(location=[40, -95], zoom_start=4)\n#m.choropleth(geo_path='countries.geojson')\n# show the map\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name=\"choropleth\",\n    data=df2016,\n    columns=['Country', 'Happiness Score'],\n    key_on='feature.properties.name',\n    fill_color=\"BuGn\",\n    fill = True,\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    reset=True,\n    legend_name='2016 Happiness Level',\n).add_to(n)\n\nfolium.LayerControl().add_to(n)\n\nn","651242b0":"p = folium.Map(location=[20, 5], zoom_start=2.25, tiles='cartodbpositron')\n#m = folium.Map(location=[40, -95], zoom_start=4)\n#m.choropleth(geo_path='countries.geojson')\n# show the map\nfolium.Choropleth(\n    geo_data=world_geo,\n    name=\"choropleth\",\n    data=df2017,\n    columns=['Country', 'Happiness.Score'],\n    key_on='feature.properties.name',\n    fill_color=\"BuGn\",\n    fill = True,\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    reset=True,\n    legend_name='2017 Happiness Level'\n).add_to(p)\n\nfolium.LayerControl().add_to(p)\n\np","59c8b227":"q = folium.Map(location=[20, 5], zoom_start=2.25, tiles='cartodbpositron')\n#m = folium.Map(location=[40, -95], zoom_start=4)\n#m.choropleth(geo_path='countries.geojson')\n# show the map\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name=\"choropleth\",\n    data=df2018,\n    columns=['Country or region', 'Score'],\n    key_on='feature.properties.name',\n    fill_color=\"BuGn\",\n    fill = True,\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    reset=True,\n    legend_title='2018 Happiness Level',\n).add_to(q)\n\nfolium.LayerControl().add_to(q)\n\nq","53e89ff7":"r = folium.Map(location=[20, 5], zoom_start=2.25, tiles='cartodbpositron')\n#m = folium.Map(location=[40, -95], zoom_start=4)\n#m.choropleth(geo_path='countries.geojson')\n# show the map\n\nfolium.Choropleth(\n    geo_data=world_geo,\n    name=\"choropleth\",\n    data=df2019,\n    columns=['Country or region', 'Score'],\n    key_on='feature.properties.name',\n    fill_color=\"BuGn\",\n    fill = True,\n    fill_opacity=0.7,\n    line_opacity=0.2,\n    reset=True,\n    legend_title='2019 Happiness Level',\n).add_to(r)\n\nfolium.LayerControl().add_to(r)\n\nr\n","7d900095":"## 5. Further Exploratory Data Analysis\n### Top 30 happiness countries data plot shows that many of them are Westernized countries (Switzerland, Iceland, Denmark, Norway, Canada, Finland, Netherland, and Sweden, etc.).\n### We will colorcode each country by the level of happiness to see if the regional tendency of happiness level.","8e40f207":"### The correlation analysis revealed a strong relationship among Happiness, GDP per Capita, Family support, and Life Expectancy.\n\n## 4. Causal Relationships (Multiple Linear Regression Analysis)\n### Based on the relationships among variables we explored how well we can predict the happiness score in each country from the other 5 variables. The correlation analysis leads us to assume strong influences from GDP per Capita, Life Expectancy, and Family Support as well as intermediate influence from Freedom. ","4f819a71":"### Distribution of each variable shows that these are nicely distributed and can be used for further analysis without a transformation.\n\n## 2. Next, we plotted data points of top 30 happiest countries for all 6 variables (Happiness, GDP per Capita, Family support, Life Expectancy, Trust in government, Generosity)","312556d3":"### Multiple linear regression analysis found that GDP per Capita and the life expectancy influence a feeling of happiness as expected. However, the family support has a relatively small influence on the happiness (coefficient = 0.58, p<.01). Since the family support is highly correlated to a high income and longer life, these factors might enable people in those countries to support each other among family. In other words, higher income and longer life might make it easier to support other family members.\n\n### Despite a relatively low correlation coefficient with the happiness (r=0.54 to 0.57), the freedom has a highest impact on the happiness score (coefficient = 1.705, p<.01).","2b4f2640":"### Plotting data points of each variable somehow indicates relationships between a feeling of happiness and the other 5 variables. We calculated Pearson correlation coefficient among the variables.\n\n## 3. Correlation Analysis","38274b6d":"### The world map with coloring based on the happiness level shows that western countries are highly likely to be rated for one of the happiest countries. The other countries are rated low happiness. However, we need to be careful to conclude that the happiness level or happiness ranking shows how good the happiest people are. A feeling of happiness is just one of many indicators to measure quality of their lives."}}