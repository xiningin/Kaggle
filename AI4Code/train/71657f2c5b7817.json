{"cell_type":{"3c0fd856":"code","065245bd":"code","04ee45ee":"code","3d6ff2a2":"code","3b959cef":"code","312adc72":"code","067b66c2":"code","80429f2a":"code","be388a42":"code","33107545":"code","243244b0":"code","743babdc":"code","4ad7b977":"code","88fe8fc0":"code","e8279c73":"code","97d272bb":"code","2c7cb21a":"code","d195265d":"code","a41cf97f":"code","7b8ad14c":"code","eebacd22":"code","9900821b":"code","90fbd8b0":"code","30c84aa0":"code","17623150":"code","b44c599b":"markdown","76fedaf0":"markdown","3c257740":"markdown","d7896a27":"markdown","5d77e4e6":"markdown","a2a8ccde":"markdown","49c3504b":"markdown","e109de49":"markdown","2c025f8b":"markdown","819ec994":"markdown","0fe592c6":"markdown","42f51367":"markdown"},"source":{"3c0fd856":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport matplotlib\nimport seaborn as sns\n\n# Good for interactive plots\nimport plotly.graph_objs as go\nfrom plotly import tools\nimport plotly.express as px\nfrom plotly.offline import iplot, init_notebook_mode\ninit_notebook_mode()\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","065245bd":"nRowsRead = 1000 # specify 'None' if want to read whole file\ndf = pd.read_csv('..\/input\/cusersmarildownloadsfatalitycsv\/fatality.csv', delimiter=';', nrows = nRowsRead)\ndf.dataframeName = 'fatality.csv'\nnRow, nCol = df.shape\nprint(f'There are {nRow} rows and {nCol} columns')\ndf.head(2).style.set_properties(**{'background-color':'orange',\n                                     'color': 'purple'})","04ee45ee":"#Code by Mike Chirico  https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\nimport datetime\n\n# You might want to get started with accident.csv \ndef f(x):\n    year = x[0]\n    month = x[1]\n    day = x[2]\n    hour = x[3]\n    minute = x[4]\n    # Sometimes they don't know hour and minute\n    if hour == 99:\n        hour = 0\n    if minute == 99:\n        minute = 0\n    s = \"%02d-%02d-%02d %02d:%02d:00\" % (year,month,day,hour,minute)\n    c = datetime.datetime.strptime(s,'%Y-%m-%d %H:%M:%S')\n    return c\n \ndf['crashTime']   = df[['YEAR','MONTH','DAY','HOUR','MINUTE']].apply(f, axis=1)\ndf['crashDay']    = df['crashTime'].apply(lambda x: x.date())\ndf['crashMonth']  = df['crashTime'].apply(lambda x: x.strftime(\"%B\") )\ndf['crashMonthN'] = df['crashTime'].apply(lambda x: x.strftime(\"%d\") ) # sorting\ndf['crashTime'].head()","3d6ff2a2":"df.isnull().sum()","3b959cef":"import holoviews as hv\nfrom holoviews import opts\nhv.extension('bokeh')","312adc72":"#Code by Lucas Abrah\u00e3o https:\/\/www.kaggle.com\/lucasabrahao\/trabalho-manufatura-an-lise-de-dados-no-brasil\n\ndf[\"DRUNK_DR\"].value_counts().plot.barh(color=['red', 'purple', 'blue'], title='Drunk Driving',);","067b66c2":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\ndrunk_cnt = np.round(df['DRUNK_DR'].value_counts(normalize=True) * 100)\nhv.Bars(drunk_cnt).opts(title=\"Drunk Driving\", color=\"red\", xlabel=\"Drunk Driving\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=500, height=300,tools=['hover'],show_grid=True))","80429f2a":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\npersons_cnt = np.round(df['PERSONS'].value_counts(normalize=True) * 100)\nhv.Bars(persons_cnt).opts(title=\"Persons in Traffic Accidents\", color=\"DarkKhaki\", xlabel=\"Persons\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","be388a42":"#Code by Mike Chirico  https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\n# Incident by state\ndf['STATENAME'].value_counts().to_frame()","33107545":"#Code by Mike Chirico  https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\n# You can check these values against\n#   https:\/\/crashstats.nhtsa.dot.gov\/Api\/Public\/ViewPublication\/812318\n\ndf.groupby(['STATENAME']).agg({'FATALS':sum})","243244b0":"#http:\/\/holoviews.org\/user_guide\/Customizing_Plots.html\n\n#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nfatal_cnt = np.round(df['FATALS'].value_counts(normalize=True) * 100)\nhv.Bars(fatal_cnt).opts(title=\"Traffic Fatalities 2019\", color=\"purple\", xlabel=\"Percentage\", ylabel=\"Traffic Fatalities\", xformatter='%d%%')\\\n                .opts(opts.Bars(invert_axes=True, width=500, height=300,tools=['hover'],show_grid=True))","743babdc":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nweather_cnt = np.round(df['WEATHERNAME'].value_counts(normalize=True) * 100)\nhv.Bars(weather_cnt).opts(title=\"Weather-Related Traffic Accidents\", color=\"red\", xlabel=\"weather-related accidents\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","4ad7b977":"#Code by Mike Chirico  https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\nweather = {0: 'No Additional Atmospheric Conditions', 1: 'Clear', \n           2: 'Rain', 3: 'Sleet, Hail', \n           4: 'Snow', 5: 'Fog, Smog, Smoke', 6: 'Severe Crosswinds', \n           7: 'Blowing Sand, Soil, Dirt', \n           8: 'Other', 10: 'Cloudy', 11: 'Blowing Snow', \n           12: 'Freezing Rain or Drizzle', \n           98: 'Not Reported', 99: 'Unknown'}\n\ndf['weather']=df['WEATHER'].apply(lambda x: weather[x])\ndf['weather1']=df['WEATHER1'].apply(lambda x: weather[x])\ndf['weather2']=df['WEATHER2'].apply(lambda x: weather[x])","88fe8fc0":"df[['WEATHER','WEATHER1','WEATHER2']].head()","e8279c73":"df[['weather','weather1','weather2']].head()","97d272bb":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nlight_cnt = np.round(df['LGT_CONDNAME'].value_counts(normalize=True) * 100)\nhv.Bars(light_cnt).opts(title=\"Light Conditions-Related Traffic Accidents\", color=\"purple\", xlabel=\"Light Conditions\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","2c7cb21a":"#Code by Mike Chirico  https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\ndf[df['ST_CASE']==10001][['PERSONS','FATALS','DRUNK_DR','HOURNAME','STATENAME','WEATHERNAME']].head()\n","d195265d":"#Code by Lucas Abrah\u00e3o https:\/\/www.kaggle.com\/lucasabrahao\/trabalho-manufatura-an-lise-de-dados-no-brasil\n\ndf[\"MAN_COLLNAME\"].value_counts().plot.barh(color='red', title='Traffic Collisions',);","a41cf97f":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nurban_cnt = np.round(df['RUR_URBNAME'].value_counts(normalize=True) * 100)\nhv.Bars(urban_cnt).opts(title=\"Urban\/Rural Traffic Accidents\", color=\"yellow\", xlabel=\"Urban\/Rural Accidents\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","7b8ad14c":"#http:\/\/holoviews.org\/user_guide\/Customizing_Plots.html\n\n#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nnhs_cnt = np.round(df['NHSNAME'].value_counts(normalize=True) * 100)\nhv.Bars(nhs_cnt).opts(title=\"Sections on NHS\", color=\"green\", xlabel=\"Percentage\", ylabel=\"Sections on NHS\", xformatter='%d%%')\\\n                .opts(opts.Bars(invert_axes=True, width=500, height=300,tools=['hover'],show_grid=True))","eebacd22":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nday_cnt = np.round(df['DAY_WEEKNAME'].value_counts(normalize=True) * 100)\nhv.Bars(day_cnt).opts(title=\"Traffic Accidents by Day of the week\", color=\"blue\", xlabel=\"Day of the Week\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=500, height=300,tools=['hover'],show_grid=True))","9900821b":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nmonth_cnt = np.round(df['MONTHNAME'].value_counts(normalize=True) * 100)\nhv.Bars(month_cnt).opts(title=\"Traffic Accidents by Month\", color=\"magenta\", xlabel=\"Month\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","90fbd8b0":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nfunction_cnt = np.round(df['FUNC_SYSNAME'].value_counts(normalize=True) * 100)\nhv.Bars(function_cnt).opts(title=\"Accidents by Road Function System\", color=\"teal\", xlabel=\"Road Function System\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","30c84aa0":"#Code by Kohei-mu https:\/\/www.kaggle.com\/koheimuramatsu\/industrial-accident-causal-analysis\/notebook\n\nroad_cnt = np.round(df['RD_OWNERNAME'].value_counts(normalize=True) * 100)\nhv.Bars(road_cnt).opts(title=\"Accidents by Road Owner\", color=\"cyan\", xlabel=\"Road Owner\", ylabel=\"Percentage\", yformatter='%d%%')\\\n                .opts(opts.Bars(width=700, height=300,tools=['hover'],show_grid=True)).opts(xrotation=45)","17623150":"#Code by Olga Belitskaya https:\/\/www.kaggle.com\/olgabelitskaya\/sequential-data\/comments\nfrom IPython.display import display,HTML\nc1,c2,f1,f2,fs1,fs2=\\\n'#eb3434','#eb3446','Akronim','Smokum',30,15\ndef dhtml(string,fontcolor=c1,font=f1,fontsize=fs1):\n    display(HTML(\"\"\"<style>\n    @import 'https:\/\/fonts.googleapis.com\/css?family=\"\"\"\\\n    +font+\"\"\"&effect=3d-float';<\/style>\n    <h1 class='font-effect-3d-float' style='font-family:\"\"\"+\\\n    font+\"\"\"; color:\"\"\"+fontcolor+\"\"\"; font-size:\"\"\"+\\\n    str(fontsize)+\"\"\"px;'>%s<\/h1>\"\"\"%string))\n    \n    \ndhtml('Thank you Mike Chirico @mchirico for the script')","b44c599b":"#Above Accident involving 3 persons, 1 fatal, Driver was drunk, clear weather at noon in Alabama.","76fedaf0":"#And that's the moment that I found out that I have only 3 States in this Dataframe.","3c257740":"#Analysing one Event individually","d7896a27":"#Since I don't know what are index (0, 1 and 2) of Drunk. If there was 0 and 1, it would be (Drunk and Not Drunk), though what is the meaning of number 2?","5d77e4e6":"  # **<span style=\"color:#DC143C;\">Drunk Driving<\/span>**\n\n\"Every day, about 28 people in the United States die in drunk-driving crashes \u2014 that's one person every 52 minutes. In 2019, these deaths reached the lowest percentage since 1982 when NHTSA started reporting alcohol data \u2014 but still 10,142 people lost their lives. These deaths were all preventable.\"\n\n\"Alcohol is a substance that reduces the function of the brain, impairing thinking, reasoning and muscle coordination. All these abilities are essential to operating a vehicle safely.\"\n\n**<span style=\"color:#DC143C;\">Blood Alcohol Concentration, or BAC<\/span>**\n\n\"A person's alcohol level is measured by the weight of the alcohol in a certain volume of blood. This is called Blood Alcohol Concentration, or BAC. At a BAC of .08 grams of alcohol per deciliter (g\/dL) of blood, crash risk increases exponentially. Because of this risk, it\u2019s illegal in all 50 states, the District of Columbia and Puerto Rico to drive with a BAC of .08 or higher, except in Utah where the BAC limit is .05.\"\n\n\"However, even a small amount of alcohol can affect driving ability. In 2018, there were 1,878 people killed in alcohol-related crashes where drivers had lower alcohol levels (BACs of .01 to .07 g\/dL).\"\n\n\"BAC is measured with a breathalyzer, a device that measures the amount of alcohol in a driver\u2019s breath, or by a blood test.\"\n\nhttps:\/\/www.nhtsa.gov\/risky-driving\/drunk-driving","a2a8ccde":"#**<span style=\"color:#DC143C;\">Fatal Car Accidents Spikes After Daylight Saving Time<\/span>**\n\n\n\"New research finds that fatal car crashes increase by 6 percent the week following daylight saving time (DST).\"\n\n\"The annual time switch increases sleep deprivation, resulting in jet lag-like symptoms that leave people feeling drowsy behind the wheel of a car. In some cases, drowsy driving can be just as dangerous as drunk driving.\"\n\nhttps:\/\/www.healthline.com\/health-news\/daylight-saving-can-make-driving-less-safe","49c3504b":"#**<span style=\"color:#DC143C;\">If you see an impaired driver on the road, contact local law enforcement. Your actions could help save someone\u2019s life.<\/span>**","e109de49":"\"DataMod will affirm NHTSA's position as the leader in motor vehicle crash data collection and analysis, by collecting quality data to keep pace with emerging technologies and policy needs.\"\n\n\"The data collection systems directly impacted by DataMod are NASS and the Fatality Analysis Reporting System (FARS). The modernization project will upgrade the affected data systems by:\"\n\nImproving the IT Infrastructure for NASS and FARS\n\nUpdating the data collected in NASS\n\nReexamining the NASS sample design.\n\nhttps:\/\/one.nhtsa.gov\/Data\/DataMod\/DataMod","2c025f8b":"#CrashTime by Mike Chirico https:\/\/www.kaggle.com\/mchirico\/traffic-fatalities-getting-started\/notebook\n\nYou might want crashTime in datetime format. Careful, since sometimes the HOUR and MINUTE could be unknown (has a value of 99).\n\nNote these are local times at the crash site.","819ec994":"#Clear is the Worst Weather? Or Drivers take things for granted and are less cautious?\n\n#We're not here to explain The Whys. Just The Whats. (What's the worst?)","0fe592c6":"#**<span style=\"color:#DC143C;\">Safe Driving: Rain, Sleet, Snow or Otherwise<\/span>**\n\n\n\"Winter driving demands special care; safe driving is a year-round habit. You and everyone in your vehicle should be wearing seat belts for every ride. Children should be in age- and size-appropriate child seats. Never drive after drinking. Never drive when distracted by an electronic device or anything else. Those are the essentials for safe driving, whatever the weather.\"\n\n\n#**<span style=\"color:#DC143C;\">Winter Driving Safety<\/span>**\n\n\n\"Driving safely in winter weather can be a challenge for even the most experienced driver. It\u2019s easy to forget after months of mild conditions that snow and ice demand careful driving and special preparation for your vehicle. But when 17 percent of all vehicle crashes occur during winter conditions it\u2019s clear that we could all use a refresher when it comes to making our way through a winter wonderland.\"\n\nhttps:\/\/www.nhtsa.gov\/winter-driving-safety","42f51367":"<center style=\"font-family:verdana;\"><h1 style=\"font-size:200%; padding: 20px; background: #001f3f;\"><i><b style=\"color:orange;\">Better Data. Safer Roads Project.<\/b><\/i><\/h1><\/center>"}}