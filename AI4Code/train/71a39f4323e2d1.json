{"cell_type":{"8ce825ec":"code","08517db0":"code","2bcb5082":"code","2dab46b8":"code","ced1b791":"code","b04cb91d":"code","31f3ee21":"code","ec7981f2":"code","81d08f92":"code","a0425118":"code","2d65038b":"code","8fcf6534":"code","1aa0f439":"code","a96c6047":"code","89b05712":"code","913c8217":"code","ed39eb74":"code","a4fc978c":"code","10bb019c":"code","0218b275":"code","7948320a":"code","c6e9a6c5":"markdown","75044c96":"markdown","73e972e1":"markdown","fc95ded2":"markdown","99fc9de2":"markdown","ed4ab83a":"markdown","955207da":"markdown","17d07df0":"markdown","bc2fc18c":"markdown","89edc3fe":"markdown","c3e7f727":"markdown","fe8471f8":"markdown","437f3b96":"markdown","7b4a4886":"markdown","ab0661d0":"markdown","2b8b0e69":"markdown","3bd6bf5a":"markdown","ab10e589":"markdown","a1062737":"markdown","430685f6":"markdown","d6d895cb":"markdown","fb4b2e64":"markdown","0542fdf2":"markdown","89db6274":"markdown","545fe8de":"markdown","469643f8":"markdown","a726048b":"markdown","06666274":"markdown","dae11dbc":"markdown","9b8a95be":"markdown"},"source":{"8ce825ec":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","08517db0":"import json\nimport numpy as np\nimport pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom IPython.display import HTML,display\n#import bar_chart_race as bcr","2bcb5082":"tokyo_covid = pd.read_csv('..\/input\/covid19-in-tokyo-japan\/tokyo_covid19_patients.csv')\nprefecture_covid = pd.read_csv('..\/input\/covid19-dataset-in-japan\/covid_jpn_prefecture.csv')\ntokyo = pd.read_csv('..\/input\/covid19-in-tokyo-japan\/tokyo_cases_byarea.csv')\nprefecture_covid","2dab46b8":"tokyo_current = prefecture_covid[prefecture_covid[\"Prefecture\"] == \"Tokyo\"].tail(1)\ncols = [\"Discharged\",\"Fatal\",\"Hosp_require\",\"Hosp_severe\"]\ntokyo_current = tokyo_current[cols]\ntokyo_current.columns = [\"Cured\",\"Death\",\"Active\",\"Severe\"]","ced1b791":"current_df = pd.DataFrame(tokyo_current.T.values,columns=[\"Cases\"],index=[\"Cured\",\"Death\",\"Active\",\"Severe\"])","b04cb91d":"fig = px.pie(current_df, values='Cases',names=current_df.index,\n             title='Current Situation in Tokyo (As of January 29th)',color_discrete_sequence=px.colors.sequential.Rainbow)\nfig.show()","31f3ee21":"cases_byday = []\nfor i in range(102,len(tokyo_covid.drop_duplicates([\"Date\"],keep='last'))-1):\n    cases_byday.append(tokyo_covid.drop_duplicates([\"Date\"],keep='last').iloc[i+1,0]-tokyo_covid.drop_duplicates([\"Date\"],keep='last').iloc[i,0])","ec7981f2":"date = tokyo_covid.drop_duplicates([\"Date\"]).iloc[103:,1]\ntokyo_cases_bydate = pd.DataFrame({\"Date\":date,\"Number of cases\":cases_byday})\ntokyo_cases_bydate","81d08f92":"fig = px.bar(tokyo_cases_bydate,x='Date',y='Number of cases',labels={\"index\":\"Number of cases\",\"value\":\"Date\"},title=\"Cases by Date in Tokyo\") \nfig.show()","a0425118":"d =  json.load(open('..\/input\/tokyo-json\/tokyo23.json', 'r'))","2d65038b":"features = d['features']\nids = sorted(set([d['id'] for d in features]))\nnew_features = []\nfor id in ids:\n    data = [d['geometry']['coordinates'] for d in features if d['id']==id]\n    if len(data) == 1:\n        feature = dict(\n            type = \"Feature\",\n            geometry = dict(\n                type = \"Polygon\",\n                coordinates = data[0],\n            ),\n            id = id,\n        )\n    else:\n        feature = dict(\n            type = \"Feature\",\n            geometry = dict(\n                type = \"MultiPolygon\",\n                coordinates = data,\n            ),\n            id = id,\n        )\n    new_features.append(feature)\nd['features'] = new_features\n\n#with open('new_tokyo23.json', 'w') as f:\n#    json.dump(d, f)","8fcf6534":"fig = px.choropleth(tokyo, geojson=d, color=\"Positive Cases\",\n                    locations=\"Code\",title = 'Confirmed Cases by Area'\n                   )\nfig.update_geos(fitbounds=\"locations\", visible=False)\n#fig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\nfig.show()","1aa0f439":"tokyo = tokyo.drop('Code',axis=1)\ntokyo.sort_values(by='Positive Cases',ascending=False).style.background_gradient(cmap='plasma_r')","a96c6047":"tokyo_total = prefecture_covid[prefecture_covid[\"Prefecture\"] == \"Tokyo\"]\nfig = px.bar(tokyo_total,x='Date',y='Tested',labels={\"index\":\"Number of Tests\",\"value\":\"Date\"},title=\"Total Tests in Tokyo (As of Jan 29th)\") \nfig.show()","89b05712":"fig = px.bar(tokyo_total,x='Date',y='Positive',labels={\"Positive\":\"Number of cases\",\"value\":\"Date\"},title=\"Total Cases in Tokyo (As of Jan 29th)\") \nfig.show()","913c8217":"fig = px.bar(tokyo_total,x='Date',y='Hosp_require',labels={\"Hosp_require\":\"Number of active cases\",\"value\":\"Date\"},title=\"Active Cases in Tokyo (As of Jan 29th)\") \nfig.show()","ed39eb74":"fig = px.bar(tokyo_total,x='Date',y='Hosp_severe',labels={\"Hosp_severe\":\"Number of severe cases\",\"value\":\"Date\"},title=\"Severe Cases in Tokyo (As of Jan 29th)\") \nfig.show()","a4fc978c":"fig = px.bar(tokyo_total.iloc[51:],x='Date',y='Fatal',labels={\"Fatal\":\"Number of death cases\",\"value\":\"Date\"},title=\"Death Cases in Tokyo (As of Jan 29th)\") \nfig.show()","10bb019c":"tokyo_age = tokyo_covid[\"Age\"].value_counts()\nfig = px.bar(tokyo_age,labels={\"index\":\"Age\",\"value\":\"Number of people\"},title=\"Patient Age\",text=tokyo_age)\nfig.show()","0218b275":"tokyo_gender = tokyo_covid[\"Gender\"].value_counts()\nfig = px.bar(tokyo_gender,labels={\"index\":\"Gender\",\"value\":\"Number of people\"},title=\"Patient Gender\",text=tokyo_gender)\nfig.show()","7948320a":"tokyo_reg = tokyo_covid[\"Region\"].value_counts()\nfig = px.bar(tokyo_reg,labels={\"index\":\"Region\",\"value\":\"Number of people\"},title=\"Regions where patients live in\",text=tokyo_reg)\nfig.show()","c6e9a6c5":"* The number of death cases reached 700 on January.","75044c96":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Total Confirmed Cases<center><h2>","73e972e1":"* The table below shows the number of total cases by Municipality in Tokyo.","fc95ded2":"<a id=\"3\"><\/a>\n<h2 style='background:#FFFFFF; border:0; color:black'><center>Patients of COVID-19 in Tokyo<center><h2>","99fc9de2":"# As of 30th January\n* The number of patients in hospital is 2882 (Total bed: 4000)\n* The number of patients who are seriously ill is 141 (Total bed for severe patients: 250)\n* Information about patients can be accessed [here](https:\/\/stopcovid19.metro.tokyo.lg.jp\/en).","ed4ab83a":"<a id=\"2\"><\/a>\n<h2 style='background:#FFFFFF; border:0; color:black'><center>Confirmed Cases by Date<center><h2>","955207da":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Total Tests<center><h2>","17d07df0":"* We can see that many young people infected COVID-19.\n* Few people in their 20s or 30s died of COVID-19 in Tokyo, but there are concerns about sequelae.\n* Tokyo government asked people, especially young to refrain from having a diner with others and nonessential and nonurgent outings.","bc2fc18c":"* According to [Update on COVID-19 in Tokyo](https:\/\/stopcovid19.metro.tokyo.lg.jp\/en), the definition of \"Severe\" is as follows.\n\n\n> Within hospitalized patients, \"serious symptoms\" are considered to be those patients who need ventilators or ECMO.","89edc3fe":"# Content\n* [Current Situation in Tokyo](#1)\n* [EDA about COVID-19 cases](#2)\n* [EDA about patients of COVID-19](#3)","c3e7f727":"* On 14th January, the number of confirmed cases in Tokyo reached 80000.","fe8471f8":"# Thank you for reading, feel free to upvote!","437f3b96":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Severe Cases<center><h2>","7b4a4886":"* The number of cases by Date reached 2000 for the first time on 7th January.","ab0661d0":"![Tokyo Special Ward](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/a\/aa\/Tokyo_23_Special_Wards_Area_Map.svg)\n\n* Areas painted green belong to Tokyo Special Wards.([Image Source](https:\/\/en.wikipedia.org\/wiki\/Special_wards_of_Tokyo))","2b8b0e69":"* We can see that the number of cases is particularly high in Shinjuku and Setagaya.\n* The number of cases in Setagaya is highest in 23 wards probably because Setagaya has a larger population (about 1 million people).\n* Shinjuku has more cases probably because there are large downtown (such as \"Kabukicho\") and many people who work there live nearby.","3bd6bf5a":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Total Death<center><h2>","ab10e589":"* The number of severe cases is soaring since December 2020, and reached high record on January.","a1062737":"<a id=\"1\"><\/a>\n<h2 style='background:#FFFFFF; border:0; color:black'><center>Current Situation in Tokyo<center><h2>","430685f6":"* The first three patients live in China, but most of patients after that live in Tokyo.\n* \"Outside Tokyo\" means areas near Tokyo Metropolis (e.g. Saitama,Kanagawa,Chiba).","d6d895cb":"* In Tokyo, there are 23 wards such as Shinjuku,Shibuya,and Setagaya.\n* The area including 23 wards is called \"Tokyo Special Wards\", and many government agencies and businesses are located.","fb4b2e64":"# About Tokyo\n\n![](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/0\/01\/Tokyo_in_Japan.svg)\n* [Image Source](https:\/\/en.wikipedia.org\/wiki\/Tokyo)\n* Area painted <span style=\"color:red\">red<\/span> belongs to Tokyo Metropolis.\n* Tokyo (Tokyo Metropolis) is the largest prefecture and the capital of Japan.\n* The population is about 14 million, and incereasing year by year.\n* The city and trains in Tokyo are crowded because many people visit Tokyo from neighboring area for working.\n* In Tokyo, as of 30th January, about 100000 people tested positive for COVID-19 and the number of death cases is about 850.","0542fdf2":"* We analyze the number of cases in Tokyo Special Wards by drawing a map.\n* GeoJSON file was collected at [this site](https:\/\/github.com\/niiyz\/JapanCityGeoJson).\n\n* Reference: [Choropleth Maps in Python](https:\/\/plotly.com\/python\/choropleth-maps\/)","89db6274":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Active Cases<center><h2>","545fe8de":"![](https:\/\/images.unsplash.com\/photo-1558632328-465f59aff245?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1053&q=80)\n* A photo of the streets in Kabukicho ([Image Source](https:\/\/unsplash.com\/photos\/wDehhoMbspg))","469643f8":"![](https:\/\/upload.wikimedia.org\/wikipedia\/commons\/1\/16\/Tokyo_special_wards_map.svg)\n* Tokyo Special Wards face Tokyo Bay.\n* Population is about 9.6 million.\n* Shinjuku ward has Japan's largest downtown area.\n* ([Image Source](https:\/\/en.wikipedia.org\/wiki\/Special_wards_of_Tokyo))","a726048b":"* The number of active cases is increasing since November 2020, and now approximately 18000 people are hospitalized or staying at home or in hotels.\n* In Tokyo, the bed utilization rate is increasing,and medical services are in danger of collapsing.","06666274":"* On 7th January 2021, Japanese government declared <span style=\"color:red\">a state of emergency<\/span> for Tokyo metropolitan area because the number of cases is soaring.\n* For more information, please refer to these sites below.\n* [COVID-19 Information and Resources(Cabinet Secretariat)](https:\/\/corona.go.jp\/en\/)\n* [Novel Coronavirus (Ministry of Health,Labour and Welfare)](https:\/\/www.mhlw.go.jp\/stf\/seisakunitsuite\/bunya\/0000164708_00079.html)\n* [Coronavirus Outbreak (NHK World)](https:\/\/www3.nhk.or.jp\/nhkworld\/en\/news\/tags\/82\/)\n","dae11dbc":"<h2 style='background:#FFFFFF; border:0; color:black'><center>Confirmed Cases by Area<center><h2>","9b8a95be":"# EDA: COVID-19 in Tokyo\n![](https:\/\/images.unsplash.com\/photo-1513407030348-c983a97b98d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1052&q=80)\n* [Image Source](https:\/\/unsplash.com\/photos\/IocJwyqRv3M)\n\n\n\nHello Kagglers.\n\nI wrote a [notebook about COVID-19 in Japan](https:\/\/www.kaggle.com\/japandata509\/eda-covid-19-pandemic-in-japan) about a month ago, and got many upvotes. Thank you for your upvote.\nThen, I felt like writing a notebook about COVID-19 in Tokyo, so I published it.\n\nIf you like, please feel free to **upvote**.\n\n\n# Data Source\u2193\n* [COVID-19 in Tokyo](https:\/\/www.kaggle.com\/japandata509\/covid19-in-tokyo-japan)\n* [COVID-19 dataset in Japan](https:\/\/www.kaggle.com\/lisphilar\/covid19-dataset-in-japan)"}}