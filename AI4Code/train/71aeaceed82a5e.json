{"cell_type":{"7a2f385b":"code","d2a56d60":"code","10bca711":"code","b63e5b9a":"code","7ec16572":"code","aa4155a8":"code","513a76ae":"code","20fed180":"code","a75029e0":"code","14b9503c":"code","3576a99b":"markdown","359b4a92":"markdown","70e0738e":"markdown","030ecba5":"markdown","e80ef4c2":"markdown","64e2b80f":"markdown","c55af6bb":"markdown","28074cf6":"markdown"},"source":{"7a2f385b":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","d2a56d60":"# Load the data\ndf = pd.read_csv('..\/input\/us-personal-expenditures-by-state-19972019\/SAEXP1__ALL_AREAS_1997_2019.csv', dtype='string');\ndf.shape","10bca711":"df.head()","b63e5b9a":"# Count the unique categories\ncategory_count = str(len(df['Description'].unique()))\nprint(\"There are \" + category_count + \" categories, therefore \" + category_count + \" rows for each 'area' (not counting N\/A).\")","7ec16572":"# List all the categories\ndf['Description'].unique()","aa4155a8":"df1 = df[df['GeoName'] == 'California']\ndf1.shape","513a76ae":"df1.head(10)","20fed180":"# Get a single row from the original DF\nrow = df.iloc[[129]]\nrow.head()","a75029e0":"# Make DF to pivot the columns into rows\nnew_df = pd.DataFrame(columns = ['year','Clothing and footwear'])\n\n# Loop through the years and get the values from each column\nfor year in range(1997,2019):\n    year = str(year)\n    df2 = pd.DataFrame(row[[year]].astype('float'))\n\n    df2.columns = ['Clothing and footwear']\n    df2.insert(0, 'year', year)\n    new_df = pd.concat([new_df,df2], ignore_index=True, axis=0)\n    \nnew_df.head(10)","14b9503c":"# Plot the spending on Clothing and footwear in California\nplt.figure(figsize = (12,5))\nsns.lineplot(data=new_df, x='year', y='Clothing and footwear');","3576a99b":"## US Personal Consumption Expenditures by State\n\n- This notebook explores the BEA (https:\/\/bea.gov) Personal Consumption Expenditures dataset.\n- It contains 25 categories of spending data by US region, State and County for the years 1997-2019","359b4a92":"- We'll grab the \"Clothing and footwear\" row by using it's index in the original dataframe.","70e0738e":"### Unique categories","030ecba5":"- Now we can see how much Californians spent on Clothing and Footwear in the last 20 years.\n- There's 25 categories of data in this set that can be extracted and recombined to make interesting maps and tables.","e80ef4c2":"- This gives us 24 rows, one for each category. Let's look at a few of the rows.","64e2b80f":"- We can choose any of these categories for a state. Let's get data for California ..","c55af6bb":"- This set has 1,444 rows of data in 31 columns.\n- The first 8 columns describe the row (as with most BEA csv files).\n- The GeoName column specifies whether the row references the entire US, or a specific state.\n- The Description column specifies the type of speding (Food & Drink, Clothing & Footware, Motor Vehicles etc).\n- The rest of the columns are the values for each year.","28074cf6":"- Now let's pivot the columns, or un-encode them, as I like to think of it."}}