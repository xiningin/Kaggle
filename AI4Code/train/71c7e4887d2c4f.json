{"cell_type":{"33cc9ccd":"code","8cccfcdd":"code","dfbed83a":"code","6ced6d67":"code","c91a8c3c":"code","6d76cae2":"code","1eb252a1":"code","04dea1da":"code","6b801dfa":"code","4f035346":"code","9a6f5a93":"code","751d794f":"code","8f11644d":"code","9824394e":"code","a3fb4f8c":"code","fe5d683c":"code","48aa5cb8":"code","3277f7d7":"code","6073afb1":"code","b23653f5":"code","8703137d":"code","0fed3137":"code","95ce38bd":"code","1c75fa37":"code","d8e53c6f":"code","0cb1c8b5":"code","f0895991":"code","74f1d63a":"code","0fbe016e":"code","f80eab09":"code","5bac8c77":"code","81b522ca":"code","2420c900":"code","001c3da4":"code","15974f67":"code","bdb1f394":"code","82a38ed3":"code","53f0b8af":"code","0725c23f":"code","94068d74":"code","82897767":"code","fafbf521":"code","748e8067":"code","74ab937c":"code","ec18a004":"code","6dad2842":"code","a65718ef":"code","53c11502":"code","765db20e":"code","7a88ebc2":"code","675f5d82":"code","8fd32d85":"code","f8e8d564":"code","fe997fff":"code","7e25f545":"code","bf7c3573":"code","41592297":"code","31b75b90":"code","7cd2c486":"code","e5de707c":"code","9bca3436":"code","e70b7e64":"code","24a7a312":"code","7c9dc249":"code","96d14f5a":"code","de7b9500":"code","08d824ae":"code","303868b2":"code","00363ae6":"code","ab1508bf":"code","41e5fd26":"code","c2fa0a63":"code","22d297b6":"code","b17105bd":"code","befbaf25":"code","4b15995e":"code","57e9752e":"code","7c0d5fa1":"code","4de95d8c":"code","66e6fb30":"code","d0cc41ff":"code","2304cb4d":"code","78379c63":"code","ea839f4a":"code","f65df2e7":"code","4a112cf2":"code","5bce8dee":"code","93cf2c35":"code","79cb068f":"code","f3bd774a":"code","3d2b430c":"code","8acb089e":"code","ba7cd572":"code","3356f03e":"code","8a0ae5dc":"code","848c65aa":"code","d31c089c":"code","fcbd1394":"code","7f82286e":"code","f58aa387":"code","d4c8925f":"code","187d61ad":"code","48f72746":"code","4d32b4fd":"code","7bbd8611":"code","6f817645":"code","86c33e4f":"code","027cb5cd":"code","fc0726c7":"code","4271d586":"code","3a35141c":"code","46cf9557":"code","565f90ef":"code","9ce87b22":"code","631be4c9":"code","74cbba9a":"code","7cf39d3d":"code","16b20467":"code","b22be11a":"code","7f8dd35c":"code","5dcaa290":"code","89842f49":"code","47d20eae":"markdown","0d1ae556":"markdown","56c5a867":"markdown","9fdeedc5":"markdown","52843eb3":"markdown","894704fc":"markdown","507658ed":"markdown","de036d53":"markdown","695816af":"markdown","a530bd42":"markdown","a3e9d90a":"markdown","aad1225e":"markdown","e7079dae":"markdown","9341ded0":"markdown","c8ae28a4":"markdown","cfb417f3":"markdown","7869dfbb":"markdown","6d053b49":"markdown","cbdc8636":"markdown","eb6a68e1":"markdown","dace4ce5":"markdown","7b0ee4a1":"markdown","9ae0baee":"markdown","54afc66f":"markdown","684ada21":"markdown","9a33a4d5":"markdown","c13a9442":"markdown","e316d8d0":"markdown","5bf00f89":"markdown","e23cfa47":"markdown","dd083aea":"markdown","bef612a0":"markdown","fe660062":"markdown","63b411ab":"markdown","d16cc7bf":"markdown","05fbe986":"markdown","c2955288":"markdown","12345750":"markdown","4df99fa7":"markdown","5d118863":"markdown","aac144f8":"markdown","357e60aa":"markdown","1f6ab2aa":"markdown","e2a6305c":"markdown","36cb5a2c":"markdown","b50d37c6":"markdown","28e802b0":"markdown","3b45a916":"markdown","87da754f":"markdown","b688ad17":"markdown","a2effba4":"markdown","a9a00962":"markdown","2495e5e0":"markdown","5627924c":"markdown","cdff3a6f":"markdown","0d730c1b":"markdown","05ae1144":"markdown","95264071":"markdown","15a4901d":"markdown","d83882c0":"markdown","188ad797":"markdown","05209a03":"markdown","eeca4413":"markdown","6b8543cd":"markdown","f06beca8":"markdown","91e1eb5e":"markdown","db1b9c8a":"markdown","cf850cb0":"markdown","2ef580d4":"markdown","3c3ad984":"markdown","afcd264e":"markdown","f2348258":"markdown","10570c2c":"markdown","0cf51b49":"markdown","2be5bf76":"markdown","0a1e882d":"markdown","da8d1657":"markdown","a915551d":"markdown","092e1356":"markdown","96168287":"markdown","8a7199db":"markdown","be10a6ed":"markdown","c376b022":"markdown","d6c0c7fc":"markdown","da6531a9":"markdown","4fec8d21":"markdown","dbe3e97b":"markdown","e3c5aee5":"markdown","c3e28b8a":"markdown","ff5916f3":"markdown","ea180ca3":"markdown"},"source":{"33cc9ccd":"import numpy as np\nimport pandas as pd\nimport sklearn\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom scipy import stats","8cccfcdd":"data_df = pd.read_csv('..\/input\/train.csv')\ndata_df.head()","dfbed83a":"test_data_df = pd.read_csv('..\/input\/test.csv')","6ced6d67":"data_df.shape","c91a8c3c":"data_df.columns","6d76cae2":"train_df = data_df.copy()\ntest_df = test_data_df.copy()","1eb252a1":"(data_df['SalePrice'].min(), data_df['SalePrice'].max())","04dea1da":"data_df['SalePrice'].mean()","6b801dfa":"data_df['SalePrice'].median()","4f035346":"data_df['SalePrice'].plot.hist()","9a6f5a93":"np.log1p(data_df['SalePrice']).plot.hist()","751d794f":"plt.subplots(figsize=(20,15))\nsns.heatmap(data=data_df.corr())","8f11644d":"data_df['LotFrontage'].isnull().sum()","9824394e":"sns.regplot(data_df['LotArea'], data_df['SalePrice'])","a3fb4f8c":"data_df['OverallQual'].plot.hist()","fe5d683c":"sns.regplot(data_df['OverallQual'], data_df['SalePrice'])","48aa5cb8":"data_df['YearBuilt'].plot.hist()","3277f7d7":"(data_df['YearBuilt'].min(), data_df['YearBuilt'].max())","6073afb1":"sns.regplot(data_df['YearBuilt'], data_df['SalePrice'])","b23653f5":"sns.regplot(data_df['TotalBsmtSF'], data_df['SalePrice'])","8703137d":"data_df[data_df['TotalBsmtSF'] > 6000]","0fed3137":"outliers = set(data_df[data_df['TotalBsmtSF'] > 6000].index.values)\n\nprint('Running list of outliers: ', outliers)","95ce38bd":"sns.regplot(data_df['1stFlrSF'], data_df['SalePrice'])","1c75fa37":"data_df[data_df['1stFlrSF'] > 4000]","d8e53c6f":"sns.regplot(data_df['GrLivArea'], data_df['SalePrice'])","0cb1c8b5":"data_df[data_df['GrLivArea'] > 4000].loc[:, ['GrLivArea', 'SalePrice']]","f0895991":"zscore = stats.zscore(data_df['GrLivArea'])\nthresh = 4\nprint(np.where(zscore > thresh), zscore[np.where(zscore > thresh)])","74f1d63a":"outliers.update([outlier for outlier in list(np.where(data_df['GrLivArea'] > 4000)[0]) if outlier not in outliers])\nprint('Running list of outliers: ', outliers)","0fbe016e":"missing_data = (data_df.isnull().sum()\/len(data_df)*100).sort_values(ascending=False)\nplt.figure(figsize=(25, 12))\nplt.xticks(rotation=\"90\")\nsns.barplot(missing_data.index, missing_data)","f80eab09":"data_df[data_df['PoolArea'] != 0].loc[:, ['PoolArea', 'PoolQC']]","5bac8c77":"train_df['PoolQC'].fillna('None', inplace=True)","81b522ca":"test_df['PoolQC'].isnull().sum()","2420c900":"test_df[test_df['PoolArea'] != 0].loc[:, ['PoolArea', 'PoolQC']]","001c3da4":"test_df[(test_df['PoolArea'] != 0) & (test_df['PoolQC'].isnull())].loc[:, ['PoolQC']].fillna('Fa', inplace=True)\ntest_df['PoolQC'].fillna('None', inplace=True)","15974f67":"data_df['MiscVal'].plot.hist()","bdb1f394":"train_df.drop(columns=['MiscFeature'], inplace=True)","82a38ed3":"print('Number of missing values in MiscFeature in test data = ', test_df['MiscFeature'].isnull().sum())\n\ntest_df['MiscVal'].plot.hist()","53f0b8af":"test_df.drop(columns=['MiscFeature'], inplace=True)","0725c23f":"train_df['Alley'].fillna('None', inplace=True)\ntest_df['Alley'].fillna('None', inplace=True)","94068d74":"train_df.drop(columns=['Fence'], inplace=True)\ntest_df.drop(columns=['Fence'], inplace=True)","82897767":"print('Number of missing values in FireplaceQu = ', data_df['FireplaceQu'].isnull().sum())\nprint('Number of missing values in Fireplaces = ', data_df['Fireplaces'].isnull().sum())","fafbf521":"data_df['Fireplaces'].plot.hist()","748e8067":"len(data_df[(data_df['Fireplaces']!=0) & (data_df['FireplaceQu'].isnull())])","74ab937c":"len(test_df[(test_df['Fireplaces']!=0) & (test_df['FireplaceQu'].isnull())])","ec18a004":"train_df['FireplaceQu'].fillna('None', inplace=True)","6dad2842":"test_df['FireplaceQu'].fillna('None', inplace=True)","a65718ef":"temp = data_df[data_df['LotArea'] < 55000]\nsns.regplot(temp['LotArea'], temp['SalePrice'])","53c11502":"data_df['LotFrontage'].mean()","765db20e":"data_df['LotFrontage'].median()","7a88ebc2":"data_df['LotFrontage'].plot.hist()","675f5d82":"train_df['LotFrontage'].fillna(data_df['LotFrontage'].median(), inplace=True)","8fd32d85":"print('Number of missing values for LotFrontage in test set = ', test_df['LotFrontage'].isnull().sum())\nprint('Mean = ', test_df['LotFrontage'].mean())\nprint('Median = ', test_df['LotFrontage'].median())","f8e8d564":"test_df['LotFrontage'].plot.hist()","fe997fff":"test_df['LotFrontage'].fillna(test_df['LotFrontage'].median(), inplace=True)","7e25f545":"sns.regplot(data_df['LotFrontage'], data_df['SalePrice'])","bf7c3573":"sns.boxplot(data_df['LotFrontage'])","41592297":"zscore = np.abs(stats.zscore(data_df['LotFrontage']))\n\nthresh = 4\nprint(np.where(zscore > thresh), zscore[np.where(zscore > thresh)])","31b75b90":"data_df[data_df['LotFrontage'] > 300]","7cd2c486":"outliers.update([outlier for outlier in list(np.where(data_df['LotFrontage'] > 300)[0]) if outlier not in outliers])\n\nprint('Running list of outliers: ', outliers)","e5de707c":"sns.boxplot(test_df['LotFrontage'])","9bca3436":"data_df['GarageArea'].isnull().sum(), data_df['GarageArea'].mean(), data_df['GarageArea'].median()","e70b7e64":"data_df['GarageArea'].plot.hist()","24a7a312":"# Check if there is any house with missing values in the garage category with nonzero garage area\nlen(data_df[(data_df['GarageArea']!=0) & ((data_df['GarageCond'].isnull()) | \n                                          (data_df['GarageType'].isnull()) | \n                                          (data_df['GarageYrBlt'].isnull()) | \n                                          (data_df['GarageFinish'].isnull()) | \n                                          (data_df['GarageQual'].isnull()))])","7c9dc249":"train_df['GarageCond'].fillna('None', inplace=True)\ntrain_df['GarageType'].fillna('None', inplace=True)\ntrain_df['GarageYrBlt'].fillna('None', inplace=True)\ntrain_df['GarageFinish'].fillna('None', inplace=True)\ntrain_df['GarageQual'].fillna('None', inplace=True)","96d14f5a":"print('Number of missing values in garage area = ', test_df['GarageArea'].isnull().sum())","de7b9500":"test_df[(test_df['GarageArea']!=0) & ((test_df['GarageType'].isnull()) | \n                                      (test_df['GarageYrBlt'].isnull()) | \n                                      (test_df['GarageFinish'].isnull()) | \n                                      (test_df['GarageQual'].isnull())\n                                     )].loc[:, ['GarageArea', 'GarageType', 'GarageYrBlt', 'GarageFinish', 'GarageQual']]","08d824ae":"test_df['GarageArea'].fillna(test_df['GarageArea'].median(), inplace=True)","303868b2":"print('Year most garages were built: ', test_df['GarageYrBlt'].median())\nprint('Year house 666 was built and year it was remodelled: ', test_df.at[666, 'YearBuilt'], test_df.at[666, 'YearRemodAdd'])\nprint('Year house 666 was built and year it was remodelled: ', test_df.at[1116, 'YearBuilt'], test_df.at[1116, 'YearRemodAdd'])","00363ae6":"test_df['GarageFinish'].value_counts()","ab1508bf":"test_df['GarageQual'].value_counts()","41e5fd26":"test_df.at[666, 'GarageYrBlt'] = 1983\ntest_df.at[1116, 'GarageYrBlt'] = 1999\n\ntest_df.at[666, 'GarageFinish'] = 'Unf'\ntest_df.at[1116, 'GarageFinish'] = 'Unf'\n\ntest_df.at[666, 'GarageQual'] = 'TA'\ntest_df.at[1116, 'GarageQual'] = 'TA'","c2fa0a63":"test_df['GarageCond'].fillna('None', inplace=True)\ntest_df['GarageType'].fillna('None', inplace=True)\ntest_df['GarageYrBlt'].fillna('None', inplace=True)\ntest_df['GarageFinish'].fillna('None', inplace=True)\ntest_df['GarageQual'].fillna('None', inplace=True)","22d297b6":"train_df.isnull().sum().sum()","b17105bd":"(data_df['BsmtExposure'].isnull().sum(),\ndata_df['BsmtFinType2'].isnull().sum(),\ndata_df['BsmtFinType1'].isnull().sum(),\ndata_df['BsmtCond'].isnull().sum(),\ndata_df['BsmtQual'].isnull().sum())","befbaf25":"data_df['TotalBsmtSF'].isnull().sum()","4b15995e":"data_df[(data_df['TotalBsmtSF'] != 0) & ((data_df['BsmtExposure'].isnull()) | \n                                         (data_df['BsmtFinType2'].isnull()) | \n                                         (data_df['BsmtFinType1'].isnull()) |\n                                         (data_df['BsmtCond'].isnull()) |\n                                         (data_df['BsmtQual'].isnull())\n                                        )].loc[:, ['TotalBsmtSF', 'BsmtExposure', 'BsmtFinType2', 'BsmtFinType1', 'BsmtCond', 'BsmtQual']]","57e9752e":"data_df['BsmtExposure'].value_counts()","7c0d5fa1":"data_df['BsmtFinType2'].value_counts()","4de95d8c":"train_df.at[332, 'BsmtFinType2'] = 'Unf'\ntrain_df.at[948, 'BsmtExposure'] = 'No'","66e6fb30":"train_df['BsmtExposure'].fillna('None', inplace=True)\ntrain_df['BsmtFinType2'].fillna('None', inplace=True)\ntrain_df['BsmtFinType1'].fillna('None', inplace=True)\ntrain_df['BsmtCond'].fillna('None', inplace=True)\ntrain_df['BsmtQual'].fillna('None', inplace=True)","d0cc41ff":"(test_df['BsmtExposure'].isnull().sum(),\ntest_df['BsmtFinType2'].isnull().sum(),\ntest_df['BsmtFinType1'].isnull().sum(),\ntest_df['BsmtCond'].isnull().sum(),\ntest_df['BsmtQual'].isnull().sum(),\ntest_df['TotalBsmtSF'].isnull().sum())","2304cb4d":"test_df[(test_df['TotalBsmtSF'] != 0) & ((test_df['BsmtExposure'].isnull()) | \n                                         (test_df['BsmtFinType2'].isnull()) | \n                                         (test_df['BsmtFinType1'].isnull()) |\n                                         (test_df['BsmtCond'].isnull()) |\n                                         (test_df['BsmtQual'].isnull())\n                                        )].loc[:, ['TotalBsmtSF', 'BsmtExposure', 'BsmtFinType2', 'BsmtFinType1', 'BsmtCond', 'BsmtQual']]","78379c63":"basement = ['BsmtQual', 'BsmtCond', 'BsmtExposure', 'BsmtFinType1', 'BsmtFinSF1',\n            'BsmtFinType2', 'BsmtFinSF2', 'BsmtUnfSF', 'TotalBsmtSF', 'BsmtFullBath', 'BsmtHalfBath']\ntest_df.loc[660, basement]","ea839f4a":"test_df.at[660, 'BsmtQual'] = None\ntest_df.at[660, 'BsmtCond'] = None\ntest_df.at[660, 'BsmtExposure'] = None\ntest_df.at[660, 'BsmtFinType1'] = None\ntest_df.at[660, 'BsmtFinSF1'] = 0\ntest_df.at[660, 'BsmtFinType2'] = None\ntest_df.at[660, 'BsmtFinSF2'] = 0\ntest_df.at[660, 'BsmtUnfSF'] = 0\ntest_df.at[660, 'TotalBsmtSF'] = 0\ntest_df.at[660, 'BsmtFullBath'] = None\ntest_df.at[660, 'BsmtHalfBath'] = None","f65df2e7":"train_df['BsmtCond'].value_counts()","4a112cf2":"train_df['BsmtQual'].value_counts()","5bce8dee":"test_df.at[27, 'BsmtExposure'] = 'No'\ntest_df.at[580, 'BsmtCond'] = 'TA'\ntest_df.at[725, 'BsmtCond'] = 'TA'\ntest_df.at[757, 'BsmtQual'] = 'TA'\ntest_df.at[758, 'BsmtQual'] = 'TA'\ntest_df.at[888, 'BsmtExposure'] = 'No'\ntest_df.at[1064, 'BsmtCond'] = 'TA'","93cf2c35":"test_df['BsmtExposure'].fillna('None', inplace=True)\ntest_df['BsmtFinType2'].fillna('None', inplace=True)\ntest_df['BsmtFinType1'].fillna('None', inplace=True)\ntest_df['BsmtCond'].fillna('None', inplace=True)\ntest_df['BsmtQual'].fillna('None', inplace=True)","79cb068f":"(data_df['MasVnrType'].isnull().sum(), data_df['MasVnrArea'].isnull().sum())","f3bd774a":"data_df[(data_df['MasVnrType'].isnull()) | (data_df['MasVnrArea'].isnull())].loc[:, ['MasVnrType', 'MasVnrArea']]","3d2b430c":"data_df['MasVnrArea'].mean()","8acb089e":"data_df['MasVnrArea'].median()","ba7cd572":"data_df['MasVnrArea'].plot.hist()","3356f03e":"len(data_df[data_df['MasVnrArea'] == 0])\/len(data_df['MasVnrArea'])","8a0ae5dc":"train_df['MasVnrArea'].fillna(0, inplace=True)","848c65aa":"train_df['MasVnrType'].fillna('None', inplace=True)","d31c089c":"test_df['MasVnrArea'].plot.hist()","fcbd1394":"print('Number of missing values in MasVnrType ', test_df['MasVnrType'].isnull().sum(), 'and MasVnArea ', test_df['MasVnrArea'].isnull().sum())","7f82286e":"test_df[(test_df['MasVnrType'].isnull()) |\n        (test_df['MasVnrArea'].isnull())].loc[:, ['MasVnrType', 'MasVnrArea']]","f58aa387":"test_df['MasVnrType'].value_counts()","d4c8925f":"test_df.at[1150, 'MasVnrType'] = 'BrkFace'\ntest_df['MasVnrType'].fillna('None', inplace=True)\ntest_df['MasVnrArea'].fillna(test_df['MasVnrArea'].median(), inplace=True)","187d61ad":"print('Number of missing values = ', data_df['Electrical'].isnull().sum())","48f72746":"data_df['Electrical'].value_counts()","4d32b4fd":"train_df['Electrical'].fillna('Sbrkr', inplace=True)","7bbd8611":"print('Number of missing values = ', test_df['Electrical'].isnull().sum())","6f817645":"train_df.isnull().sum().sum()","86c33e4f":"test_df.columns[np.where(test_df.isnull().sum() != 0)]","027cb5cd":"test_df['MSZoning'].fillna('RL', inplace=True)\ntest_df['Utilities'].fillna('AllPub', inplace=True)\ntest_df['Exterior1st'].fillna('VinylSd', inplace=True)\ntest_df['Exterior2nd'].fillna('VinylSd', inplace=True)\ntest_df['BsmtFullBath'].fillna(0, inplace=True)\ntest_df['BsmtHalfBath'].fillna(0, inplace=True)\ntest_df['KitchenQual'].fillna('TA', inplace=True)\ntest_df['Functional'].fillna('Typ', inplace=True)\ntest_df['GarageCars'].fillna(2, inplace=True)\ntest_df['SaleType'].fillna('WD', inplace=True)","fc0726c7":"test_df.isnull().sum().sum()","4271d586":"train_df.drop(columns=['Id', 'SalePrice'], inplace=True)\ntest_df.drop(columns=['Id'], inplace=True)","3a35141c":"train_df.shape, test_df.shape","46cf9557":"print('Current list of outliers ', list(outliers))","565f90ef":"train_df.drop(index=list(outliers), inplace=True)","9ce87b22":"data_df.drop(index=list(outliers), inplace=True)","631be4c9":"dummies = pd.get_dummies(pd.concat((train_df, test_df), axis=0))","74cbba9a":"dummies.shape","7cf39d3d":"X = dummies.iloc[:train_df.shape[0]]\nX_test = dummies.iloc[train_df.shape[0]:]","16b20467":"X.shape, X_test.shape","b22be11a":"y = np.log(data_df['SalePrice'] + 1)","7f8dd35c":"from sklearn.ensemble import GradientBoostingRegressor\nfrom sklearn.model_selection import cross_val_score\n\nGBR3 = GradientBoostingRegressor(learning_rate= 0.1, n_estimators=150, max_depth=4)\ncv_score = cross_val_score(GBR3, X, y, cv=5, scoring='neg_mean_squared_error')\nprint('Cross validation scores for GBR model:', np.sqrt(-cv_score).mean())","5dcaa290":"from sklearn.ensemble import RandomForestRegressor\nRF3 = RandomForestRegressor(n_estimators=100, max_features=20, random_state=0)\ncv_score2 = cross_val_score(RF3, X, y, cv=5, scoring='neg_mean_squared_error')\nprint('Cross validation scores for GBR model:', np.sqrt(-cv_score2).mean())","89842f49":"GBR3.fit(X, y)\ny_pred = np.exp(GBR3.predict(X_test)) - 1\nanswer = pd.DataFrame(data=y_pred, columns=['SalePrice'])\nanswer.insert(loc=0, column='Id', value=test_data_df['Id'])\n\nanswer.to_csv('submission.csv', index=False)","47d20eae":"Now let's have a look at the test set.","0d1ae556":"As for the `GarageFinish`, fill in with `Unf` and for `GarageQual`, fill in with `TA`, although these 2 values seem to contradict.","56c5a867":"Now, there are 3 houses with nonzero `PoolArea` but no values for `PoolQC` that should not be filled in as `None` but perhaps `Fa`. The rest can be filled in as `None`.","9fdeedc5":"Nothing else strikes me as out of the ordinary. They have very much lower `SalePrice` given very high `LotFrontage` and normal everything else. Let's save the identity of these data points in a list of outliers for future consideration.","52843eb3":"## 1- Load libraries","894704fc":"## 6 - Train models with cross validation","507658ed":"Let's have a look at the test set.","de036d53":"`MasVnrArea` has 8 missing values, which are for the same houses that have missing values for `MasVnrType`. `MasVnrArea`  describes the masonry veneer area in square feet and so it may be OK to fill in the missing values with the mean or the median. However, looking at the actual mean and  median, it shows that the data are very skewed and need a second look. This is an example showing that it's safer to go with the median, and not the mean. I go with the median, which is a reasonable choice looking at the distribution plot.","695816af":"Because these 8 houses have 0 masonry veneer area, the corresponding values for `MasVnrType` should be `None`.","a530bd42":"Let's have a look at the test set.","a3e9d90a":"## 2- Import data","aad1225e":"Distribution of sale prices","e7079dae":"Although it's a little bit harder to call, the points where `GrLivArea` > 4000 are out of the ordinary with extreme `SalePrice`. Let's have a look to see if our man `1298` is among them. I wouldn't be surprised.","9341ded0":"This looks much better. The predictions should probably be made on the log of the sale prices. ","c8ae28a4":"So as predicted, all houses with missing values in `FireplaceQu` don't have a fireplace, so the missing values should be filled with `None` for both the train set and test set.","cfb417f3":"Two points appear to be outliers from the plot above where `LotFrontage` > 300. We can double check these points are outliers using Seaborn's boxplot or some statistical tools.","7869dfbb":"Check out the dimension of the input data:","6d053b49":"### Electrical\n\nThere is one missing value. that perhaps should just be filled with the most common type.","cbdc8636":"### PoolQC","eb6a68e1":"Normalizing features aren't necessary in this problem.","dace4ce5":"### Fence\n\nThe possible values for `Fence` are:\n* GdPrv: Good privacy\n* MnPrv: Minium privacy\n* GdWo: Good wood\n* MnWw: Minium wood\/wire\n* NA: No fence\n\nMost houses don't have fences and hence the missing values are filled with `None`. This feature can be also considered a miscellaneous feature, and it's value, if any, has already been included in `MiscVal`, so can be probably be ignored. ","7b0ee4a1":"### LotFrontage","9ae0baee":"This point has identity `1298`. Let's add this to our list of outliers.","54afc66f":"Now check the test set:","684ada21":"This is not very surprising that houses with higher overall quality get sold for higher prices. The distribution also looks very normal. However, note that the price range is quite large still given a particular value of OverallQual, especially for the highest quality OverallQual=10.","9a33a4d5":"We can see at a glance that SalePrice is correlated more strongly to a number of features such as:\n* OverallQual (Most strongly correlated)\n* YearBuilt\n* YearRemodAdd\n* MasVnrArea\n* TotalBsmtSF\n* 1stFlrSF\n* GrLivArea (2nd most strongly correlated)\n* FullBath\n* TotRmsAbvGrd\n* GarageCars\n* GarageArea\n\nI note that some features that I personally think are important don't show up in the map:\n* LotArea\n* LotFrontage ","c13a9442":"However, looking at the test set, there are still a number of missing values. Check what those features are:","e316d8d0":"Since most of the `MiscFeature` results in 0 value, the missing values should consequently be filled with `None`. This feature can probably be dropped.","5bf00f89":"Now let's have a look at the relationship between `LotFrontage` and `SalePrice`.","e23cfa47":"There is one point definitely out of the ordinary here with `TotalBsmtSF` > 6000 but very low `SalePrice`. Let's take a look.","dd083aea":"Now let's look at YearBuilt.","bef612a0":"Again, one point appears very unusual here with `1stFlrSF` >> 4000 but very low `SalePrice`. Let's take a look.","fe660062":"> ### Mean and median of sale [](http:\/\/)prices","63b411ab":"Now let's have a look at the test data.","d16cc7bf":"### FireplaceQu\n\nThe possible values for `FireplaceQu` are:\n* Ex\tExcellent - Exceptional Masonry Fireplace\n* Gd\tGood - Masonry Fireplace in main level\n* TA\tAverage - Prefabricated Fireplace in main living area or Masonry Fireplace in basement\n* Fa\tFair - Prefabricated Fireplace in basement\n* Po\tPoor - Ben Franklin Stove\n* NA\tNo Fireplace","05fbe986":"Other missing values are filled in with `None` for no basement.","c2955288":"Let's have a look at the distribution of LotFrontage.","12345750":"This point is again the house number `1298` that is already in our running list of outliers!","4df99fa7":"As expected, our man `1298` is among them.  This house must be haunted!!! However, there's also 3 new faces `523`, `691`, and `1182`. Before updating  our list of outliers, let's check zscore.","5d118863":"Do the same for the test set, but first, check how many missing values there are and if the mean, median, and distribution look reasonable.","aac144f8":"OK so apparently these two houses do have a basement. Now fill in the missing values manually for these 2.","357e60aa":"There indeed doesn't seem to be as clear a correlation. Most houses have `LotArea` smaller than 25000 SF. Something to think about.","1f6ab2aa":"As the mean and median and distribution look similar enough to that of the training data, I think the missing values can be safely filled with the median.","e2a6305c":"Check out all the features given:","36cb5a2c":"It would not be surprising if (at least most of) these houses don't have a basement at all. We can check the `TotalBsmtSF` to see if the corresponding values are nonzero.","b50d37c6":"Percentage of houses with 0 masonry veneer area:","28e802b0":"It appears that about half of the houses don't have a fireplace. Perhaps this half is the one with no fireplace quality. In addition, `FireplaceQu` can be considered a `MiscFeature` and perhaps can be removed.","3b45a916":"### Process outliers","87da754f":"`LotFrontage` has 259 values missing so that may be why.\n\nLet's have a look at the scatter plot `LotArea` vs. `SalePrice`.","b688ad17":"## 5- Data Preprocessing: missing values\nI got this idea from `firstbloodY` and found it useful.\nhttps:\/\/www.kaggle.com\/firstbloody\/an-uncomplicated-model-top-2-or-top-1","a2effba4":"### MiscFeature\n\nNext, look at `MiscFeature` where most values are missing. The possible values are:\n* Elev Elevator\n* Gar2 2nd Garage (if not described in garage section)\n* Othr Other\n* Shed Shed (over 100 SF)\n* TenC Tennis Court\n* NA   None","a9a00962":"Manually fill in data for these 8 houses using training data. Except for number 660, where all values appear to be missing.","2495e5e0":"### BsmtExposure, BsmtFinType2, BsmtFinType1, BsmtCond, BsmtQual\n\nLet's look at these features. Following are the number of missing values:","5627924c":"# House Prices: Advanced Regression Techniques","cdff3a6f":"### GarageCond, GarageType, GarageYrBlt, GarageFinish, GarageQual\n\nFrom my experience, this missing values are expectedly filled with `None`, that is, the houses don't have a garage. Therefore, let's check the `GarageArea`.","0d730c1b":"### MasVnrType, MasVnrArea\n\nHow many missing values are we talking about, and are they for the same house?","05ae1144":"### Alley\n\nNow let's check out `Alley`. The possible values for `Alley` are:\n* Grvl: Gravel\n* Pave: Paved\n* NA: No Alley\n\nUsually most of the houses don't have alley and thus the missing values perhaps can be safely  filled with `None`. I should consider removing this feature all together.","95264071":"Again, most misc features result in very little value and thus the type of features should not play an important role and can probably be safely removed.","15a4901d":"Let's fill in the missing values for `LotFrontage` with the median. I think we can fill in the missing values with the mean, but median is slightly better in my opinion in case of a skewed distribution or outliers present. ","d83882c0":"According to the feature descriptions, this feature should have 5 possible values:\n* Ex   Excellent\n* Gd   Good\n* TA   Average\/Typical\n* Fa   Fair\n* NA   No Pool","188ad797":"Although there are some points close to 200 that look out of the ordinary, these points are quite within range of the training data, so they should be OK.","05209a03":"It appears that all houses with missing values for `PoolQC` in the training set do not have a pool. All the missing values should therefore be filled with `None`. ","eeca4413":"It turns out to not matter in this case weather we choose the mean or the median anyway.","6b8543cd":"OK there is no missing value in `GarageArea`, and it appears that most houses have a garage. The distribution looks pretty health. In addidtion, it's indeed true that all the missing values come from houses without a garage, and should therefore be filled with `None`.","f06beca8":"Filling in these missing data with the median values.","91e1eb5e":"It's quite obvious that house `1298` is very much an outlier here, but it's a harder call to make for others.  I think since the zscore for `1169` is quite lower than the others, I will for now call the 4 houses we discovered above outliers and add them to our running list.","db1b9c8a":"The two houses appeared to have been built in 1910 and 1923 respectively, so I guess having the garage built in 1979 is not that unreasonable. However, it's probably also reasonable to say that the garage was built when the house was remodelled?","cf850cb0":"## 3- Exploratory Data Analysis","2ef580d4":"Now fill in the rest of the missing values with `None` because they don't have a garage.","3c3ad984":"There is no missing value in `TotalBsmtSF` so that's good. Now print the houses with non-zero `TotalBsmtSF` but missing values for one of the above features.","afcd264e":"The distribution is somewhat skewed. Let's transform the sale prices into log scale and see how the distribution looks.","f2348258":"OK the one missing value in `GarageArea` is nonzero because there is apparently a  garage type value. This value should then be filled with the median. ","10570c2c":"Should all the missing values then be None (no pool) or something else?","0cf51b49":"Make a copy of data_df and test_data_df for preprocessing.","2be5bf76":"The rest is now filled with `None`.","0a1e882d":"### Heatmap","da8d1657":"Now, check test data to see if there are missing values for these features, and if they can all be filled with `None` for no basement or must be filled in manually.","a915551d":"It appears that more houses are built recently.","092e1356":"It appears that there is 1 house with a nonzero `MasVnrArea` but nodata on `MasVnrType`, the missing value thus should be filled with some median value from the set. The rest should be filled with `None`.","96168287":"Now go on to the test set. Doublecheck that no house has missing values in `FireplaceQu` with at least a fireplace.","8a7199db":"For number 660, I assume that there is no basement.","be10a6ed":"We can see that out of these 7 points, points 934 and 1298 have very much larger zscore compared to others. Let's have a look at these 2 points.","c376b022":"Random forest doesn't appear to do as well. I'm going to submit the predictions using GBR.","d6c0c7fc":"> ### Range of sale prices","da6531a9":"There appears to be a week trend of increasing sale prices with how recent the house is. However, besides the normal variations, there appear to be some outliers.","4fec8d21":"### Final check for missing values\n\nNow check if there are still missing values in the training data.","dbe3e97b":"Now, let's look at the test set. There are also many missing values for `PoolQC`. Should all the missing values be filled with None also?","e3c5aee5":"### Drop Id, SalePrice","c3e28b8a":"### Process categorical features\n\nThere are ordinal as well as nominal features, which should be processed with label encoding and one hot encoding separately I would think. However, having tried that it doesn't seem to make it better.","ff5916f3":"First, let's have a look at the range of sale prices, mean, median, as well as the heatmap plot to see how features are correlated.\n\n","ea180ca3":"### OverallQual\n\nThis is definitely a key feature that decides the range of the sale price for each house. Let's have a closer look."}}