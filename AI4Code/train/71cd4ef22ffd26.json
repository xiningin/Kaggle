{"cell_type":{"d08a3313":"code","b6b7af2a":"code","6334b3a6":"code","8143b3c4":"code","b3eacd42":"code","8ab924a7":"code","3b3efe0f":"code","65d593c8":"code","05518d12":"code","3e3c292f":"code","b0d7e6dc":"code","552dac48":"code","005dfa23":"code","de7ebd18":"code","416ef51d":"code","8866921c":"code","2f7326b5":"code","2e1916c8":"code","fd58a86e":"code","a8b585bd":"code","b920356b":"code","cf08916d":"code","63bdff12":"code","c8c978a9":"code","c1c60807":"code","c297d36d":"code","d0fd9db0":"code","28087870":"code","9dcce1b4":"code","b8a2648a":"code","8182bd07":"code","7ded1da0":"code","99d0c88f":"code","d02772e4":"code","be3722c8":"code","219c23c0":"code","22435f03":"markdown","b49d5042":"markdown","6a618a24":"markdown","d37e11ce":"markdown","8cf89799":"markdown","23007134":"markdown","4b331a06":"markdown","df88bdc2":"markdown","6ce79a90":"markdown","faa2db08":"markdown","3fd911df":"markdown","61b93542":"markdown","36721c5d":"markdown","53a32982":"markdown","046bba46":"markdown","bbb960a9":"markdown","464c62be":"markdown","807698ba":"markdown"},"source":{"d08a3313":"!pip install chart_studio","b6b7af2a":"import pandas as pd \nimport numpy as np \nimport datetime as dt\nfrom datetime import datetime  \nimport seaborn as sns \nimport matplotlib.pyplot as plt \n%matplotlib inline\nimport chart_studio.plotly as py\nimport plotly.graph_objects as go \nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot","6334b3a6":"# For Notebooks\ninit_notebook_mode(connected=True)","8143b3c4":"covid_cases = pd.read_csv('..\/input\/covid-cases-in-prisons\/covid_prison_cases.csv')","b3eacd42":"covid_cases.head(5)","8ab924a7":"covid_cases.info()","3b3efe0f":"plt.figure(figsize=(8,6))\nsns.heatmap(covid_cases.isnull(),cmap='viridis') #lots of nulls","65d593c8":"#drop unwanted cols\ncovid_cases = covid_cases.drop(['staff_tests','staff_tests_with_multiples','staff_partial_dose', 'staff_full_dose', 'prisoner_tests','prisoner_tests_with_multiples','prisoners_partial_dose', 'prisoners_full_dose','notes'],axis=1)","05518d12":"#converting as_of_date into date objects\ncovid_cases['as_of_date'] = pd.to_datetime(covid_cases['as_of_date'])","3e3c292f":"#creating month, day, and year cols\ncovid_cases['month'] = covid_cases['as_of_date'].apply(lambda time: time.month)\ncovid_cases['day of week'] = covid_cases['as_of_date'].apply(lambda time: time.dayofweek)\ncovid_cases['year'] = covid_cases['as_of_date'].apply(lambda time: time.year)","b0d7e6dc":"#labels for days of week\ndmap = {0: 'Mon',1:'Tues',2:'Wed',3:'Thurs',4:'Fri',5:'Sat',6:'Sun'}\ncovid_cases['day of week'] = covid_cases['day of week'].map(dmap)","552dac48":"Mmap = {1: 'Jan',2:'Feb',3:'Mar',4:'April',5:'May',6:'Jun',7:'July',8:'Aug',9:'Sept',10:'Oct',11:'Nov',12:'Dec'}\ncovid_cases['month'] = covid_cases['month'].map(Mmap)","005dfa23":"#dropping rows from as_of_date that contain nulls \ncovid_cases = covid_cases[covid_cases['as_of_date'].notna()]","de7ebd18":"#replacing other nulls with 0\ncovid_cases.fillna(0,inplace=True)","416ef51d":"#sort by chronological order\ncovid_cases = covid_cases.sort_values(by='as_of_date',ascending=True)","8866921c":"covid_cases.head(3)","2f7326b5":"plt.figure(figsize=(12,4))\ncovid_cases['total_prisoner_cases'].plot(kind='hist')","2e1916c8":"plt.figure(figsize=(16,4))\nsns.boxplot(x='total_prisoner_cases',data=covid_cases)","fd58a86e":"plt.figure(figsize=(15,6))\nsns.boxplot(x='name',y='total_prisoner_cases',data=covid_cases)\nplt.xticks(rotation=90)\nplt.xlabel('State')\nplt.ylabel('Total Prisoner COVID-19 Cases')","a8b585bd":"plt.figure(figsize=(15,6))\nsns.boxplot(x='name',y='total_prisoner_deaths',data=covid_cases)\nplt.xticks(rotation=90)\nplt.xlabel('State')\nplt.ylabel('Total Prisoner Deaths Due to COVID-19')","b920356b":"plt.figure(figsize=(12,4))\nsns.lineplot(x='month',y='total_prisoner_cases',data=covid_cases,ci=False,sort=True,color='r',label='Prisoners')\nsns.lineplot(x='month',y='total_staff_cases',data=covid_cases,ci=False,sort=True,color='blue',label='Staff')\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.xlabel('Month \\n (March 2020 - Feb 2021)')\nplt.ylabel('Total COVID-19 Cases')\nplt.title('Staff and Prisonser COVID-19 Cases')","cf08916d":"plt.figure(figsize=(12,4))\nsns.lineplot(x='month',y='total_prisoner_deaths',data=covid_cases,ci=False,sort=True,color='r',label='Prisoners')\nsns.lineplot(x='month',y='total_staff_deaths',data=covid_cases,ci=False,sort=True,color='blue',label='Staff')\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.xlabel('Month \\n (March 2020 - Feb 2021)')\nplt.ylabel('Total Deaths Due to COVID-19')\nplt.title('Staff and Prisonser COVID-19 Deaths')","63bdff12":"federal_prisons = covid_cases[covid_cases['name']=='Federal']","c8c978a9":"plt.figure(figsize=(12,4))\nsns.lineplot(x='month',y='total_prisoner_cases',data=federal_prisons,ci=False,sort=True,color='r',label='Prisoners')\nsns.lineplot(x='month',y='total_staff_cases',data=federal_prisons,ci=False,sort=True,color='blue',label='Staff')\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.xlabel('Month \\n (March 2020 - Feb 2021)')\nplt.ylabel('Total COVID-19 Cases')\nplt.title('Staff and Prisonser COVID-19 Deaths (Federal Prisons)')","c1c60807":"plt.figure(figsize=(12,4))\nsns.lineplot(x='month',y='total_prisoner_deaths',data=federal_prisons,ci=False,sort=True,color='r',label='Prisoners')\nsns.lineplot(x='month',y='total_staff_deaths',data=federal_prisons,ci=False,sort=True,color='blue',label='Staff')\nplt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\nplt.xlabel('Month \\n (March 2020 - Feb 2021)')\nplt.ylabel('Total Deaths Due to COVID-19')\nplt.title('Staff and Prisonser COVID-19 Deaths (Federal Prisons)')","c297d36d":"covid_cases['name'].unique()","d0fd9db0":"#filtering out 'Federal' since it is not a state for the map\ncovid_map = covid_cases[covid_cases['name'] != 'Federal']","28087870":"#getting sums of variable per state\ndf = covid_map.groupby(covid_map['name']).sum()","9dcce1b4":"abbrev = covid_map[['name','abbreviation']]","b8a2648a":"#joining both df's\ncovid = abbrev.join(df, how=\"left\",on='name')","8182bd07":"data = dict(type='choropleth',\n            colorscale = 'Portland',\n            reversescale = False,\n            locations = covid['abbreviation'],\n            z = covid['total_prisoner_cases'],\n            locationmode = 'USA-states',\n            text = covid['name'],\n            marker = dict(line = dict(color = 'rgb(255,255,255)',width = 1)),\n            colorbar = {'title':\"Total Cases\"}\n            ) ","7ded1da0":"layout = dict(title = 'Total Prisoner Cases in US Prisons',\n              geo = dict(scope='usa',\n                         showlakes = True,\n                         lakecolor = 'rgb(85,173,240)')\n             )","99d0c88f":"choromap = go.Figure(data = [data],layout = layout)\niplot(choromap)","d02772e4":"data = dict(type='choropleth',\n            colorscale = 'Portland',\n            reversescale = False,\n            locations = covid['abbreviation'],\n            z = covid['total_prisoner_deaths'],\n            locationmode = 'USA-states',\n            text = covid['name'],\n            marker = dict(line = dict(color = 'rgb(255,255,255)',width = 1)),\n            colorbar = {'title':\"Total Deaths\"}\n            ) ","be3722c8":"layout = dict(title = 'Total Prisoner Deaths in US Prisons',\n              geo = dict(scope='usa',\n                         showlakes = True,\n                         lakecolor = 'rgb(85,173,240)')\n             )","219c23c0":"choromap = go.Figure(data = [data],layout = layout)\niplot(choromap)","22435f03":"I will drop the columns that are not of interest for this project. Luckily, the majortiy of missing values come from these columns.","b49d5042":"## Look into Federal Prison Covid Stats","6a618a24":"## A Comparison of Total Cases and Deaths Between Staff and Prisoners","d37e11ce":"Since we are dealing with time, it is reasonable for missing values to be 0 for some variables since there may have been no change in variables for that particular day or month. Therefore, I will replace na's with 0. Before doing so, I will create columns for the month, day, and year for dataset then drop the nulls from 'as_of_date' variable since I do not want zeroes for dates.","8cf89799":"## Total Prisoner Deaths Map","23007134":"Staff deaths were significantly lower than prisoner deaths, both bearing similar trends.","4b331a06":"## Choropleth Map","df88bdc2":"Seems to be a lot of missing values.","6ce79a90":"'df' now has the states ('name') as an index. I need the index reset in order to map out the variable. For this, I will create another dataframe that contains the states ('name') and the states abbreviations ('abbreviations'). After joining these two dataframes, it will reset the 'name' index that will allow me to create the map with the abbreivations as well.","faa2db08":"## Findings\n\nCaliforina is the state with the state with the most total cases(~1.5M). Texas had the second most cases (~1.3M).","3fd911df":"## Total Prisoner Cases\n\nI am interested in exploring the total of prisoner cases ","61b93542":"## Findings\nTexas leads the nation in total prisoner deaths due to COVID-19 (~12k). Florida has the second most deaths in the nation (7,701).","36721c5d":"For our choropleth map, it is important we get the sum of total cases per state to display it on our map. ","53a32982":"## Total Prisoner Cases Map","046bba46":"Noticed similar trends between federal prisons and state prisons.","bbb960a9":"# Coronavirus Cases in U.S. Prisons\n## COVID-19 infection in prisons across the United States, 2020 - 2021\n\nThis dataset can be found on [kaggle](https:\/\/www.kaggle.com\/shaneysze\/covid-cases-in-prisons?select=covid_prison_rates.csv). A big thanks to the contributors of this dataset (listed on site)!\n\n### How Will I Use This Data?\n\nI am most interested in exploring the total of prisoner covid cases. In this project, I will use some data cleaning, data wrangling, and data visualization to get some interesting findings.","464c62be":"Cases between staff and prisoners have differ drastically.","807698ba":"Looking at the boxplots and histogram above, it is clear that the data has many outliers, but these outliers remain significant since the numbers of cases were volatile during the pandemic. "}}