{"cell_type":{"3e021a27":"code","2b52366a":"code","ae42eabc":"code","110c7fb8":"code","21e98185":"code","dbf71a6e":"code","905b0018":"code","17e4c1e6":"code","1b43bf24":"code","0eecfe1d":"code","18149bb9":"code","9d6cffa5":"code","f6649e53":"code","6ab52e3b":"code","b91db4f0":"code","1e7b2888":"markdown","20df2ab6":"markdown","23204a76":"markdown","164d658e":"markdown","dda48296":"markdown","f6d377fc":"markdown","8bc28515":"markdown","b1d456fb":"markdown","5330e13c":"markdown","0398d840":"markdown","ef50b081":"markdown","4cd452aa":"markdown","97e563c0":"markdown","b84a1925":"markdown","e64803d3":"markdown","d44c9395":"markdown","ba5d6dc1":"markdown","328a4a78":"markdown","d084f6d8":"markdown","87a3c1f3":"markdown","7b9248e1":"markdown"},"source":{"3e021a27":"#Install libraries\n!pip install librosa","2b52366a":"import librosa\naudio_data1 = '..\/input\/rfcx-species-audio-detection\/train\/005f1f9a5.flac'\nx , sr = librosa.load(audio_data1)\nprint(type(x), type(sr))\nprint(x.shape, sr)","ae42eabc":"librosa.load(audio_data1, sr=44100)","110c7fb8":"import IPython.display as ipd\nipd.Audio(audio_data1)","21e98185":"audio_data2 = '..\/input\/rfcx-species-audio-detection\/train\/00834f88e.flac'\nx , sr = librosa.load(audio_data2)\nprint(type(x), type(sr))\nprint(x.shape, sr)","dbf71a6e":"librosa.load(audio_data2, sr=44100)","905b0018":"ipd.Audio(audio_data2)","17e4c1e6":"%matplotlib inline\nimport matplotlib.pyplot as plt\nimport librosa.display\nplt.figure(figsize=(14, 5))\nlibrosa.display.waveplot(x, sr=sr)","1b43bf24":"X = librosa.stft(x)\nXdb = librosa.amplitude_to_db(abs(X))\nplt.figure(figsize=(14, 5))\nlibrosa.display.specshow(Xdb, sr=sr, x_axis='time', y_axis='hz')\nplt.colorbar()","0eecfe1d":"import numpy as np\nsr1 = 23000 # sample rate\nT = 5.0    # seconds\nt = np.linspace(0, T, int(T*sr1), endpoint=False) # time variable\nx1 = 0.5*np.sin(2*np.pi*220*t)# pure sine wave at 220 Hz\n#Playing the audio\nipd.Audio(x1, rate=sr1) # load a NumPy array","18149bb9":"import sklearn\nspectral_centroids = librosa.feature.spectral_centroid(x, sr=sr)[0]\nspectral_centroids.shape\n(775,)\n# Computing the time variable for visualization\nplt.figure(figsize=(12, 4))\nframes = range(len(spectral_centroids))\nt = librosa.frames_to_time(frames)\n# Normalising the spectral centroid for visualisation\ndef normalize(x, axis=0):\n    return sklearn.preprocessing.minmax_scale(x, axis=axis)\n#Plotting the Spectral Centroid along the waveform\nlibrosa.display.waveplot(x, sr=sr, alpha=0.4)\nplt.plot(t, normalize(spectral_centroids), color='b')","9d6cffa5":"spectral_rolloff = librosa.feature.spectral_rolloff(x+0.01, sr=sr)[0]\nplt.figure(figsize=(12, 4))\nlibrosa.display.waveplot(x, sr=sr, alpha=0.4)\nplt.plot(t, normalize(spectral_rolloff), color='r')","f6649e53":"spectral_bandwidth_2 = librosa.feature.spectral_bandwidth(x+0.01, sr=sr)[0]\nspectral_bandwidth_3 = librosa.feature.spectral_bandwidth(x+0.01, sr=sr, p=3)[0]\nspectral_bandwidth_4 = librosa.feature.spectral_bandwidth(x+0.01, sr=sr, p=4)[0]\nplt.figure(figsize=(15, 9))\nlibrosa.display.waveplot(x, sr=sr, alpha=0.4)\nplt.plot(t, normalize(spectral_bandwidth_2), color='r')\nplt.plot(t, normalize(spectral_bandwidth_3), color='g')\nplt.plot(t, normalize(spectral_bandwidth_4), color='y')\nplt.legend(('p = 2', 'p = 3', 'p = 4'))","6ab52e3b":"x, sr = librosa.load('..\/input\/rfcx-species-audio-detection\/train\/00ad36516.flac')\n#Plot the signal:\nplt.figure(figsize=(14, 5))\nlibrosa.display.waveplot(x, sr=sr)\n# Zooming in\nn0 = 9000\nn1 = 9100\nplt.figure(figsize=(14, 5))\nplt.plot(x[n0:n1])\nplt.grid()","b91db4f0":"mfccs = librosa.feature.mfcc(x, sr=40000)\nprint(mfccs.shape)\n(20, 97)\n#Displaying  the MFCCs:\nplt.figure(figsize=(15, 7))\nlibrosa.display.specshow(mfccs, sr=sr, x_axis='time')","1e7b2888":"**A very simple way for measuring the smoothness of a signal is to calculate the number of zero-crossing within a segment of that signal. A voice signal oscillates slowly \u2014 for example, a 100 Hz signal will cross zero 100 per second \u2014 whereas an unvoiced fricative can have 3000 zero crossings per second.**","20df2ab6":"**The spectral centroid indicates at which frequency the energy of a spectrum is centered upon or in other words It indicates where the \u201d center of mass\u201d for a sound is located.**","23204a76":"**Close your eyes and bear with me to listen and open your third eye to see!**","164d658e":"**Let's plot a graph to visualize the audio data**","dda48296":"# Audio File Basic Information","f6d377fc":"**The spectral bandwidth is defined as the width of the band of light at one-half the peak maximum (or full width at half maximum and is represented by the two vertical red lines and \u03bbSB on the wavelength axis.\n**","8bc28515":"# What is Sampling and Sampling frequency?\n\n***In signal processing, sampling is the reduction of a continuous signal into a series of discrete values. The sampling frequency or rate is the number of samples taken over some fixed amount of time. A high sampling frequency results in less information loss but higher computational expense, and low sampling frequencies have higher information loss but are fast and cheap to compute.***","b1d456fb":"**Audio format just refers to the music format. It is a file format for storing digital audio data on a computer system. The maximum bandwidth of audio format is 20KHz, with a rate between 40 to 50KHz. By adopting liner PCM (pulse-code modulation), each quantized step length of the audio is the same.he bit layout of the audio data (excluding metadata) is called the audio coding format and can be uncompressed, or compressed to reduce the file size, therefore, audio file formats can be divided into lossy compression and lossless compression. But what we often use is lossy compression. Since there is data loss in the audio digital process, we cannot reach the truly lossless.Lossless compression formats include the common APE, FLAC, ALAC, WMA, etc. In addition, CD generally adopts a WAV file format, since WAV files are uncompressed raw audio file with a large volume, it is often compressed into FLAC or APE with smaller volume.**","5330e13c":"> This returns an audio time series as a numpy array with a default sampling rate(sr) of 22KHZ mono. We can change this behavior by resampling at 44.1KHz.","0398d840":"# Spectrogram\n \nA spectrogram is a visual way of representing the signal strength, or \u201cloudness\u201d, of a signal over time at various frequencies present in a particular waveform. Not only can one see whether there is more or less energy at, for example, 2 Hz vs 10 Hz, but one can also see how energy levels vary over time.","ef50b081":"# Audio Data Handling","4cd452aa":"![Audio-Data-Sets-MBg.jpg](attachment:Audio-Data-Sets-MBg.jpg)","97e563c0":"**Python has some great libraries for audio processing like Librosa and PyAudio.There are also built-in modules for some basic audio functionalities.**","b84a1925":"*Loading an audio file:*","e64803d3":"# What is audio format and  what are the main types?","d44c9395":"![rainforest-sound-wave1_s.jpg](attachment:rainforest-sound-wave1_s.jpg)","ba5d6dc1":"**Creating an audio signal**","328a4a78":"# Feature extraction from Audio signal","d084f6d8":"**Spectral Rolloff is a measure of the shape of the signal. It represents the frequency at which high frequencies decline to 0. To obtain it, we have to calculate the fraction of bins in the power spectrum where 85% of its power is at lower frequencies.**","87a3c1f3":"**Sound waves are digitized by sampling them at discrete intervals known as the sampling rate (typically 44.1kHz for CD-quality audio meaning samples are taken 44,100 times per second). Each sample is the amplitude of the wave at a particular time interval, where the bit depth determines how detailed the sample will be also known as the dynamic range of the signal (typically 16bit which means a sample can range from 65,536 amplitude values).**","7b9248e1":"**The Mel frequency cepstral coefficients (MFCCs) of a signal are a small set of features (usually about 10\u201320) which concisely describe the overall shape of a spectral envelope. It models the characteristics of the human voice.**"}}