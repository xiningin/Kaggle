{"cell_type":{"b81e7e90":"code","0792f24b":"code","3a94452a":"code","0a6ed674":"code","f41dc3d9":"code","2a4375ac":"code","0b535235":"markdown","46b46352":"markdown","423feadf":"markdown","7ee04e62":"markdown"},"source":{"b81e7e90":"# Start by importing the bq_helper module and calling on the specific active_project and dataset_name for the BigQuery dataset.\nimport bq_helper\nfrom bq_helper import BigQueryHelper\n# https:\/\/www.kaggle.com\/sohier\/introduction-to-the-bq-helper-package\n\nebi_chembl = bq_helper.BigQueryHelper(active_project=\"patents-public-data\",\n                                   dataset_name=\"ebi_chembl\")","0792f24b":"# View table names under the ebi_chembl data table\nbq_assistant = BigQueryHelper(\"patents-public-data\", \"ebi_chembl\")\nbq_assistant.list_tables()","3a94452a":"# View the first three rows of the tissue_dictionary_23 data table\nbq_assistant.head(\"tissue_dictionary_23\", num_rows=3)","0a6ed674":"# View information on all columns in the tissue_dictionary_23 data table\nbq_assistant.table_schema(\"tissue_dictionary_23\")","f41dc3d9":"query1 = \"\"\"\nSELECT DISTINCT\n  pref_name\nFROM\n  `patents-public-data.ebi_chembl.tissue_dictionary_23`\nLIMIT\n  20;\n        \"\"\"\nresponse1 = ebi_chembl.query_to_pandas_safe(query1)\nresponse1.head(20)","2a4375ac":"bq_assistant.estimate_query_size(query1)","0b535235":"## Importance of Knowing Your Query Sizes\n\nIt is important to understand how much data is being scanned in each query due to the free 5TB per month quota. For example, if a query is formed that scans all of the data in a particular column, given how large BigQuery datasets are it wouldn't be too surprising if it burns through a large chunk of that monthly quota!\n\nFortunately, the bq_helper module gives us tools to very easily estimate the size of our queries before running a query. Start by drafting up a query using BigQuery's Standard SQL syntax. Next, call the estimate_query_size function which will return the size of the query in GB. That way you can get a sense of how much data is being scanned before actually running your query.","46b46352":"Interpretting this number, this means my query scanned almost 0 GB of data in order to return a table of 20 unique tissue\/organ names from the dataset.","423feadf":"# How to Query ChEMBL EBI Small Molecules Database (BigQuery)\n[Click here](https:\/\/www.kaggle.com\/mrisdal\/safely-analyzing-github-projects-popular-licenses) for a detailed notebook demonstrating how to use the bq_helper module and best practises for interacting with BigQuery datasets.","7ee04e62":"## Example SQL Query\nWhat are some preferred names of the tissues and organs that are found in this data table?"}}