{"cell_type":{"8049cee5":"code","9d203e0e":"code","b3017bd1":"code","c59caea9":"code","46db36b5":"code","e2a5a76b":"code","4a2a1eb2":"code","e9ea7c42":"code","2ba55d54":"code","cb887e1a":"code","81eb68d9":"code","cf91f7d7":"code","98e68a56":"code","0910a135":"code","5be132cc":"code","029eed15":"code","754c0066":"code","792efdbc":"code","8bf99445":"code","2a8fd984":"code","fdd95426":"code","1f414dd0":"code","7b162519":"code","9accd641":"code","533d1eb9":"code","ad0d890b":"code","8c528c35":"code","0d3b4a80":"code","fb757be0":"code","4200ba3d":"code","38789bed":"markdown","3a468993":"markdown","da9b0734":"markdown","1d1bd1e0":"markdown","33fb0bb9":"markdown","1ffcc78d":"markdown","c70fd8d8":"markdown","e5b0525d":"markdown","6211ff04":"markdown","44a2297e":"markdown","db03299d":"markdown","0e19062c":"markdown","856aab27":"markdown","39c54b09":"markdown","ba5f63c6":"markdown","e3518162":"markdown","e402b0b0":"markdown","d5025e06":"markdown","ea8d277f":"markdown","1c3b9cb1":"markdown","919e21a2":"markdown","5e9d6868":"markdown","954b4eb7":"markdown","965764ef":"markdown","e795de63":"markdown","71b6824a":"markdown","2a511c9e":"markdown","a5b96f86":"markdown","6cc2460c":"markdown","e8117f74":"markdown","8b2e2598":"markdown","80e49e5e":"markdown","5453d9f5":"markdown","8b5538d5":"markdown","981c4ce1":"markdown","75bd9fd3":"markdown"},"source":{"8049cee5":"# import all packages and set plots to be embedded inline\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sb\nimport warnings\n\nwarnings.filterwarnings('ignore')\n%matplotlib inline","9d203e0e":"df = pd.read_csv('..\/input\/videogamesales\/vgsales.csv')\ndf.head()\n","b3017bd1":"df.isna().sum()","c59caea9":"df = df.dropna()\ndf.isna().sum()","46db36b5":"df.dtypes","e2a5a76b":"#Turning the year column into int\ndf['Year'] = df['Year'].astype(int)\n#Converting all column names to lowercase\ndf.rename(columns = lambda x: x.lower(), inplace=True)\ndf.head()","4a2a1eb2":"df.shape","e9ea7c42":"plt.figure(figsize=(10,10))\nax = sb.countplot(data=df,y='year',color=sb.color_palette()[0])","2ba55d54":"#Removing all records from before 1994 and after 2017\ndf = df[df['year']>1994][df['year']<2017]","cb887e1a":"plt.figure(figsize=(10,10))\nax = sb.countplot(data=df,y='year',color=sb.color_palette()[0]);\nplt.xlabel('Count');\nplt.ylabel('Year of Publishing');","81eb68d9":"plt.figure(figsize=(5,5));\nsb.countplot(data=df,y='genre',color=sb.color_palette()[0],order=df.genre.value_counts().index);\nplt.ylabel('Genre');\nplt.xlabel('Number of Published Games');\nplt.title('Number of Games Published in different Genres');","cf91f7d7":"df.describe()","98e68a56":"sb.boxplot(data=df,y='global_sales');","0910a135":"#Removing outliers\ndf_no_outliers = df[df['global_sales'] <= 0.46+(1.5*(0.46-0.06))]\n#Checking number of records removed\ndf.shape[0] - df_no_outliers.shape[0]","5be132cc":"sb.boxplot(data=df_no_outliers,y='global_sales');\nplt.ylabel('Global Sales');\nplt.title('Global Sales Boxplot');","029eed15":"sb.countplot(data=df_no_outliers,y='genre',color=sb.color_palette()[0],order=df_no_outliers.genre.value_counts().index);\nplt.ylabel('Genre');\nplt.xlabel('Number of Published Games');\nplt.title('Number of Games Published in different Genres');","754c0066":" #Getting a list of publishers who have published 50+ games\narr = df_no_outliers.publisher.value_counts() >= 50\nfor x in arr.keys():\n    if not arr[x]:\n        arr.pop(x)\n\n#Removing the \"Unkown\" publisher which is assigned when information on the publisher was not available\nif 'Unknown' in arr.keys():\n    arr.pop('Unknown')\n\n#Creating a countplot of publishers\ndf_big_publishers = df[df['publisher'].isin(arr.keys())]\nplt.subplots(figsize=(20,20));\nsb.countplot(data=df_big_publishers,y='publisher',color=sb.color_palette()[0],order=df_big_publishers.publisher.value_counts().index);\nplt.ylabel('Publisher');\nplt.xlabel('Frequency');\nplt.title('Number of Games Published by the Top Publishers');","792efdbc":"plt.hist(data=df_no_outliers,x='na_sales',bins=15);\nplt.xlabel('NA Sales');\nplt.ylabel('Frequency');\nplt.title('NA Sales Distribution');","8bf99445":"plt.hist(data=df_no_outliers,x='eu_sales',bins=15);\nplt.xlabel('EU Sales');\nplt.ylabel('Frequency');\nplt.title('EU Sales Distribution');","2a8fd984":"plt.hist(data=df_no_outliers,x='jp_sales',bins=15);\nplt.xlabel('JP Sales');\nplt.ylabel('Frequency');\nplt.title('JP Sales Distribution');","fdd95426":"plt.hist(data=df_no_outliers,x='other_sales',bins=15);\nplt.xlabel('Other Sales');\nplt.ylabel('Frequency');\nplt.title('Other Sales Distribution');","1f414dd0":"plt.hist(data=df_no_outliers,x='global_sales',bins=15);\nplt.xlabel('Global Sales');\nplt.ylabel('Frequency');\nplt.title('Global Sales Distribution');","7b162519":"#Sorting the boxes in the boxplot in order of ascending average global sales \norder = df_no_outliers.groupby(['genre']).mean()['global_sales'].sort_values(ascending=True).index.tolist()\n\n#Creating the boxplot\nsb.boxplot(data=df_no_outliers,x='genre',y='global_sales',color=sb.color_palette()[0],order=order);\nplt.xlabel('Genre of Video Game')\nplt.ylabel('Average Global Sales')\nplt.title('Average Global Sales of Different Genres')\nplt.xticks(rotation='90');","9accd641":"graph = sb.PairGrid(data=df_no_outliers,vars=['na_sales','eu_sales','jp_sales','other_sales','global_sales'])\ngraph.map_offdiag(plt.scatter,alpha=0.05);\ngraph.map_diag(plt.hist,bins=15)","533d1eb9":"from scipy.stats import pearsonr\ncorr,_ = pearsonr(df_no_outliers['global_sales'],df_no_outliers['na_sales'])\nprint(\"NA sales: \" + str(corr))\ncorr,_ = pearsonr(df_no_outliers['global_sales'],df_no_outliers['eu_sales'])\nprint(\"EU sales: \" + str(corr))\ncorr,_ = pearsonr(df_no_outliers['global_sales'],df_no_outliers['jp_sales'])\nprint(\"JP sales: \" + str(corr))\ncorr,_ = pearsonr(df_no_outliers['global_sales'],df_no_outliers['other_sales'])\nprint(\"other sales: \" + str(corr))","ad0d890b":"sb.pointplot(data=df_no_outliers[df_no_outliers['year'] >= 2000],x='year',y='global_sales')\nplt.xticks(rotation='90');\nplt.xlabel('Year');\nplt.ylabel('Average Global Sales');\nplt.title('Average Global Sales by Year');","8c528c35":"graph = sb.FacetGrid(data=df_no_outliers[df_no_outliers['year']>=2005],col='genre',col_wrap=4,sharex=True, sharey=True)\ngraph.map(sb.pointplot,'year','global_sales', order = [2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016]);\ngraph.map(plt.xticks,rotation=90);\ngraph.set_xlabels('Year');\ngraph.set_ylabels('Average Global Sales\\n(in Millions of Copies)');","0d3b4a80":"#Creating a new dataframe grouped by the years after 2005 with the sum of each of the sales figures features recorded in each year's record\ndf_years = df_no_outliers[['year','na_sales','eu_sales','jp_sales','other_sales','global_sales']][df_no_outliers['year'] >= 2005]\ndf_years = df_years.groupby(['year']).sum()","fb757be0":"#Creating new columns to hold the proportions of the sales figures\nprops_and_sales = [('na_prop','na_sales'),('eu_prop','eu_sales'),('jp_prop','jp_sales'),('other_prop','other_sales')]\nfor prop,sales in props_and_sales:\n    df_years[prop] = df_years[sales]\/df_years['global_sales']\ndf_years['year']=df_years.index\ndf_years = df_years[df_years['year']<2017]\n","4200ba3d":"df_years.plot(x='year',y=['na_prop','eu_prop','jp_prop','other_prop'],kind='bar',ylabel='Proprtion of Global Sales')\nplt.legend(['NA Sales Proportion','EU Sales Proportion','JP Sales Proportion','Other Sales Proportion']);\nplt.xlabel('Year');\nplt.title(\"Different Regions' Proportion of Global Sales Per Year\");","38789bed":"> It might be intriguing if we can find that some genres are more successful (have higher sales figures) on average than other genres. This will be checked below.","3a468993":"> We can see here that the Adventure genre seems to be very stable over the years with the average sales being around 100,000 while the \"Fighting\" genre seems to experience ups and downs over the years. ","da9b0734":"> We can then check if any of the data types of the features are problematic.","1d1bd1e0":"> This shows that this dataset does not have an equal number of games in each genre. This is logical as the video game industry tends to produce more action games than all the other genres. This needs to be taken into consideration in future analysis so as to not report misguided information.","33fb0bb9":"> This trend can be explained by the video game industry's trend to release free-to-play games (games that are free to download and play and are monetized through in-game transactions) and creating in-game store for monetization.","1ffcc78d":"> This shows that NA sales correlates linearly the most with global sales; this could be due to how big the video game market is in North America.","c70fd8d8":"This shows that the dataset has too few records before 1994 and after 2016; this prompts us to remove records from those years so as to not draw conclusions from a small sample.","e5b0525d":"> We previously posed a question of whether the different genres sales figures remained stable throughout the years this will be investigated here.","6211ff04":"> It appears that all sales distributions are extremely right-skewed. This shows that most video games sell around 100,000 to 200,000 copies globally and it gets increasingly rarer to sell more.","44a2297e":"## Multivariate Exploration","db03299d":"> It seems that there are some records with missing values as these are a relatively small number of records we can drop them.","0e19062c":"> This confirms the observation from the .csv that only a small number of the publishers publish most games. Next we plot the distribution of the sales figures.","856aab27":"### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?\n\n> In this section we observed the means of the different genres over the years and discovered that some genres are less stable than others. Additionally, we observed that North American sales over the years have held the most proportion of global sales.","39c54b09":"> A question can be asked which of the specific sales figures is most likely to correlate with the global sales. This can be determined from a scatter plot by identifying which of these features most forms a linear relationship when plotted against global sales. Furthermore this can be checked using pearson's correlation coefficient.","ba5f63c6":"> It would be helpful if the column headers were in lowercase as that would help when writing the code. Furthermore, we need to check if there are any null values that need to be dealt with.","e3518162":"> Checking with Pearson's correlation coefficient.","e402b0b0":"> This verifies the suspicion that this feature has many outliers, this could be due to the fact that some publishers (or genres) are far more popular than others and as such achieve much higher levels of sales. For now we will exclude these outliers but later on we will verify if our assumption is actually the cause of this large number of outliers. We will eliminate the outliers that are 1.5*IQR above q3.","d5025e06":"> This shows that there was a peak in the number of published video games in 2008 and then the number of published video games decreases over the years. We now check the distribution of genres in the dataset.","ea8d277f":"> By exploring the .csv of the data we find that the majority of games are published by a few publishers, additionally the list of publishers is too large to attempt to graph anything regarding publishers. So to remedy this we pick only the publishers who have published 50+ games and place them in a separate dataframe.","1c3b9cb1":"> We can see that our removal of the outliers has disproportionately affected the shooter genre moving it from the sixth most published genre to the seventh most published genre. This gives us a preliminary confirmation that the shooter genre is disproportionatly more successful and thus has much larger sales figures.","919e21a2":"> First we check the distribution of years to check for anomalies.","5e9d6868":"> First we load in the dataset and view if there are any problems with the data that can be found at a glance.","954b4eb7":"### What is the structure of your dataset?\n\n> This dataset consists of 16291 records after initial cleaning with each row recording the description of a video game (Its name, publisher, platform, genre, and release date). In addition to its sales' figures (in millions) in different regions as well as globally.\n\n### What is\/are the main feature(s) of interest in your dataset?\n\n> The features we care about the most in this dataset are the sales across the different regions and the global sales, as they will act as indication to the customers' wants.\n\n### What features in the dataset do you think will help support your investigation into your feature(s) of interest?\n\n> The genre feature will assist us in identifying how the customers' demands for different types of games will change, which should show the trends in game sales over the years.","965764ef":"## Bivariate Exploration","e795de63":"# Exploring the Video Games Sales Dataset\n## by Youssef Maher\n\n## Preliminary Wrangling\n\n> This dataset contains a number of records of video games whose sales exceeded a hundred thousand copies. It was webscrapped from https:\/\/vgchartz.com. The dataset and an explanation of all the features can be found at https:\/\/www.kaggle.com\/gregorut\/videogamesales.","71b6824a":"### Discuss the distribution(s) of your variable(s) of interest. Were there any unusual points? Did you need to perform any transformations?\n\n> As discussed previously the sales figures follow an extremely right-skewed distribution. Which showed that on average most videogames sell between 100,000 and 200,000 copies globally. There was found to be many outliers in the sales figures these were removed by eliminating any values that were 1.5*IQR greater than q3.\n\n### Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?\n\n> Only a small number of the publishers publish most games. Additionally, some genres are on average published more frequently than other genres.","2a511c9e":"> By inspecting q1,q3 and the maximum of the global_sales feature it appears that this feature will have many outliers this can be further verified using the boxplot of this feature.","a5b96f86":"> Over the years it appears North American sales almost always have the highest proportion however in the recent years this proportion difference is decreasing with other regions getting higher proportions.","6cc2460c":"> It appears that the year feature is stored as a float this can be remedied by turning it into an integer.","e8117f74":"> This shows that indeed some genres like the \"Sports and \"Shooter\" genres are on average more successful (higher sales) than other genres. But perhaps some genres are more stable than others this will be investigated in multivariate exploration.","8b2e2598":"## Univariate Exploration","80e49e5e":"> Next I would like to investigate whether the video game industry as a whole has an upwards or downwards trend in video game sales.","5453d9f5":"> This results in a much more reasonable graph which will enable us to draw more realistic conclusions. But did our removal of those records affect our data?","8b5538d5":"> We now observe the statistical summary of our numerical data (sales features) to check for anomalies.","981c4ce1":"> Another point that I'd like to investigate is the proportion of the different regions from the global sales.","75bd9fd3":"### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?\n\n> We discovered that some genres are on average more successful (higher global sales) than other genres, additionally we noticed the downwards trend of video game sales.\n\n### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?\n\n> We explored that global sales correlates linearly the most with North American sales."}}