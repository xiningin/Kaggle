{"cell_type":{"c3ab1c4d":"code","43162043":"code","ba7a8a17":"code","00cbabf3":"code","4fa66ff7":"code","a3db5751":"code","d8169f24":"code","417a68d5":"code","793be7c9":"code","503489f1":"code","69079826":"code","a6e93067":"code","5b6ab764":"code","0f6dd769":"code","a47d374c":"code","2b24b367":"code","55cbbd79":"code","c61d2372":"code","e92319be":"code","cd8a9d2a":"code","6d6201bb":"code","89337817":"code","7c5da8f1":"code","fd005161":"code","51447f37":"code","12380713":"code","f9fa7337":"markdown","e030c5b1":"markdown","5e94d9c6":"markdown","709c256c":"markdown","467ea5f2":"markdown","5d9ce9d3":"markdown","a803bfbe":"markdown","7bd8c85f":"markdown","03ab577f":"markdown","64599aff":"markdown","977f5e1c":"markdown","0614c87a":"markdown","3f3fd660":"markdown","3d17d4fd":"markdown","9c20d755":"markdown","d4ce9b43":"markdown","4d64e120":"markdown"},"source":{"c3ab1c4d":"from IPython.display import Image\nimport time\nimport numpy as np\nimport pandas as pd","43162043":"df_train = pd.read_csv(r\"\/kaggle\/input\/shopee-product-matching\/train.csv\")\ndf_test = pd.read_csv(r\"\/kaggle\/input\/shopee-product-matching\/test.csv\")\n#df_sample_sub = pd.read_csv(r\"\/kaggle\/input\/shopee-product-matching\/sample_submission.csv\")","ba7a8a17":"df_train","00cbabf3":"df_train.info()","4fa66ff7":"df_train.image_phash.value_counts()","a3db5751":"test_pics = df_train[df_train.image_phash == \"fad28daa2ad05595\"] # pHash with most occurences in dataset","d8169f24":"# print all pictures with the same pHash\nfor i in test_pics.image:\n    image_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(i) \n    display(Image(filename=image_path))\n    time.sleep(1)","417a68d5":"df_train[\"Length\"] = df_train.image_phash.apply(lambda x: len(x))\ndf_train[\"Length\"].value_counts()","793be7c9":"df = pd.DataFrame(columns=['Hamming Distance','Bild1','Bild2'])\nfor i in df_train.image_phash[:100]:\n    for j in df_train.image_phash:\n        hamming_distance = sum(c1 != c2 for c1, c2 in zip(i, j))\n        if hamming_distance <= 4:\n            df = df.append({'Hamming Distance': hamming_distance, 'Bild1': i , 'Bild2': j }, ignore_index=True)","503489f1":"df.sort_values(by=\"Hamming Distance\")\ndf[df['Hamming Distance'] == 1]","69079826":"#df_train[df_train.image_phash == \"ee9690c347ceb02e\"]\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/00d4a4865fa5c81896287fc2c3ea0e1d.jpg\"))\n#df_train[df_train.image_phash == \"e899aece46d3b121\"]\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/fe3511856a8429fbdc1537e4eabcf2d5.jpg\"))","a6e93067":"#df_train[df_train.image_phash == \"c1d43c3f1f949685\"]\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/004ede0e328d05780813f853857463f1.jpg\"))\n#df_train[df_train.image_phash == \"c1843f3f66693d42\"]\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/5c39f46a76758d565560cc05bf06fb2d.jpg\"))","5b6ab764":"abc = df_train[df_train.image_phash == \"e699996699266699\"]\nabc\n#image_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\n#display(Image(filename=image_path))","0f6dd769":"display(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/733dee44474dfc4aa8304d58312e7893.jpg\"))","a47d374c":"abc = df_train[df_train.image_phash == \"e69999668c663399\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","2b24b367":"abc = df_train[df_train.image_phash == \"8112eeedf2c4a933\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","55cbbd79":"abc = df_train[df_train.image_phash == \"8116eee9f2c0ad33\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","c61d2372":"df_train[df_train.image_phash == \"b3cccc26cc339933\"]\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/733dee44474dfc4aa8304d58312e7893.jpg\"))","e92319be":"display(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/fadb5098b573655c17aabd8decaa1182.jpg\"))","cd8a9d2a":"abc = df_train[df_train.image_phash == \"b3cccc26cc3333cc\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","6d6201bb":"abc = df_train[df_train.image_phash == \"9acce5335ccd3a14\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","89337817":"abc = df_train[df_train.image_phash == \"9acce1334ced3a94\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.iloc[1])\ndisplay(Image(filename=image_path))","7c5da8f1":"#abc = df_train[df_train.image_phash == \"fab111489dc3c74e\"]\n#abc\n#image_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\n#display(Image(filename=image_path))\ndisplay(Image(filename=r\"\/kaggle\/input\/shopee-product-matching\/train_images\/a6fed93df91723e136ab0402a27a0e02.jpg\"))","fd005161":"abc = df_train[df_train.image_phash == \"fab111489dc3c76c\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","51447f37":"abc = df_train[df_train.image_phash == \"e699996689663399\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","12380713":"abc = df_train[df_train.image_phash == \"e69999668c663399\"]\nimage_path = r\"\/kaggle\/input\/shopee-product-matching\/train_images\/{}\".format(abc.image.to_string(index=False))\ndisplay(Image(filename=image_path))","f9fa7337":"## 3rd example with Hemming 4","e030c5b1":"## Hemming 5","5e94d9c6":"Lets plot the pictures with the same pHash and see if they identical ","709c256c":"## TODO:  \n* Schauen welche Bitpositionen relevant f\u00fcr die Bilder sind (zb Position 10 wichtig, Pos 16 eher nicht)\n* pHashes sortieren und beim durchloopen direkt dort anfangen wo es relevant ist (zb. Bild beginnt mit bbb, alle aaa nicht ber\u00fccksichtigen)\n* Neue Spalten erstellen: 1. OCR Text, 2. Ma\u00dfe aus dem Titel , 3. Nur Text\n* phash Score berechnung: https:\/\/cloudinary.com\/blog\/how_to_automatically_identify_similar_images_using_phash","467ea5f2":"## Hemming 4","5d9ce9d3":"## Hemming 1","a803bfbe":"## Another example with Hemming 10 ","7bd8c85f":"Looks like some pictures are already identical (via pHash)","03ab577f":"## Here are two Pics with Hemming Distance of 10","64599aff":"## Bad example of Hemming 4","977f5e1c":"## Hemming 2","0614c87a":"No missing Values. ","3f3fd660":"check if length of phash is always the same (if so, we need to consider this when calculating hemming distance)","3d17d4fd":"Its always the same length of 16","9c20d755":"They are indeed perceptual identical","d4ce9b43":"Lets see if we can find more pictures that are identical by calculating the distances between the pHashes.   \n> Hammming Distance 0:\n* 94974f937d4c2433   \n* 94974f937d4c2433   \n(All bits are identical)    \n\n> Hamming Distance 1: \n* 94974f937d4c2433      \n* 94974f937d4c2432    \n(One Bit is diffrent)","4d64e120":"### Hashing:\n- Diffrence between cryptographic Hashes and perceptual hash\n> There are several ways to hash values in computer science. Most common one are **cryptographic hashes** (Md5, Sha1). You create a unique fingerprint of your value (picture). If only one pixel changes, your hash will be completely diffrent (Avalance effect).\n> **Perceptual Hash**. Creates a hash value that you can compare with others. If two pHashes are same, the picture is perceptual the same. You can even meausre how similiar two pictures are by calulating the distance between both phashes (using Hamming distance or MSE)   \n- [Mean Squared Error](https:\/\/www.pyimagesearch.com\/2014\/09\/15\/python-compare-two-images\/)   \n- [pHash Concept](http:\/\/www.hackerfactor.com\/blog\/index.php?\/archives\/432-Looks-Like-It.html)   \n- [pHash Explanation](https:\/\/www.youtube.com\/watch?v=pyzMP9qvxl0)\n"}}