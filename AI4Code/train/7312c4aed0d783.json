{"cell_type":{"7f144dee":"code","ccde701c":"code","3656532b":"code","3f773133":"code","e7d532d3":"code","921b4bd5":"code","d973966f":"code","0e1f9ab1":"code","334d136e":"code","84a9deda":"code","20231b7f":"code","553bc8e8":"code","d324526b":"code","48e90970":"code","da86be03":"code","2afc8318":"code","88cb86a4":"code","a87be468":"code","ddde5046":"code","07be70e0":"code","755cef8e":"code","149bcd6d":"code","d7c87cf9":"code","c7ca18f2":"code","a70a87c9":"code","54e7260a":"code","822db9b8":"code","dfa33516":"code","5a953367":"code","0446a59f":"code","4082d014":"code","ed3b5d91":"markdown","5c0f01fc":"markdown","2bd8c692":"markdown","f18f1361":"markdown","0cf8b44b":"markdown","d5eac487":"markdown","76930993":"markdown","e88f01a6":"markdown","76905cfc":"markdown","d50481a9":"markdown","94994ec1":"markdown","363acfcb":"markdown","1fd8c44f":"markdown","1ffbefda":"markdown","51f0a863":"markdown","9c6e6873":"markdown","eb044b9e":"markdown","59914e3e":"markdown"},"source":{"7f144dee":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport plotly.offline as py\npy.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.tools as tls\nimport warnings\nfrom collections import Counter\nfrom sklearn.feature_selection import mutual_info_classif\nwarnings.filterwarnings('ignore')","ccde701c":"df2015 = pd.read_csv(\"..\/input\/2015.csv\")\ndf2016 = pd.read_csv(\"..\/input\/2016.csv\")\ndf2017 = pd.read_csv(\"..\/input\/2017.csv\")","3656532b":"df2015.head()","3f773133":"# Drop columns that will not be used in further analysis\ndf2015.drop([\"Standard Error\"], axis = 1, inplace = True)","e7d532d3":"df2016.head()","921b4bd5":"# Drop columns that will not be used in further analysis\ndf2016.drop([\"Lower Confidence Interval\"], axis = 1, inplace = True)\ndf2016.drop([\"Upper Confidence Interval\"], axis = 1, inplace = True)","d973966f":"df2017.head()","0e1f9ab1":"# Drop columns that will not be used in further analysis\ndf2017.drop([\"Whisker.high\"], axis = 1, inplace = True)\ndf2017.drop([\"Whisker.low\"], axis = 1, inplace = True)","334d136e":"print(df2015.shape)\nprint(df2016.shape)\nprint(df2017.shape)","84a9deda":"country2015 = df2015.Country.tolist() # series to list conversion\ncountry2016 = df2016.Country.tolist() # series to list conversion\ncountry2017 = df2017.Country.tolist() # series to list conversion\ncountries = country2015 + country2016 + country2017 # union of the countries\n\ncountries = list(set(countries)) # remove duplicates, end up with unique elements\n\nprint(\"countries[] contains \" + str(len(countries)) + \" unique elements before removing the common elements\")","20231b7f":"uncommon_countries = countries.copy() # copy operation is important. Otherwise, \n                                      # modifications on uncommon_countries[] change countries[] too.\nfor country in uncommon_countries:\n    if country in country2015 and country in country2016 and country in country2017:\n        countries.remove(country)\n        \nuncommon_countries = countries.copy()        \nprint(\"uncommon_countries[] contains \" + str(len(uncommon_countries)) + \" unique elements after removing the common elements\")","553bc8e8":"for i in range(0,len(df2015.Country)):\n    if df2015.Country[i] in uncommon_countries:\n        df2015.drop(i, axis = 0, inplace = True)\nfor i in range(0,len(df2016.Country)):\n    if df2016.Country[i] in uncommon_countries:\n        df2016.drop(i, axis = 0, inplace = True)\nfor i in range(0,len(df2017.Country)):\n    if df2017.Country[i] in uncommon_countries:\n        df2017.drop(i, axis = 0, inplace = True)\n    \nprint(df2015.shape)\nprint(df2016.shape)\nprint(df2017.shape)","d324526b":"df2015.reset_index(inplace = True)\ndf2016.reset_index(inplace = True)\ndf2017.reset_index(inplace = True)","48e90970":"# order countries alphabetically so that countries in dataframes have the same order\ndf2015.sort_values(\"Country\", inplace = True)\ndf2016.sort_values(\"Country\", inplace = True)\ndf2017.sort_values(\"Country\", inplace = True)","da86be03":"df2017.insert(1, 'Region', df2017['Country']) # create \"region\" column as the 2nd column of df2017\n\n# fill the \"Region\" column created in df2017\nfor i in range(0,df2017.shape[0]):\n    df2017.Region[i] = df2015.Region[i] # this works since countries are in the same order\n    df2016.Region[i] = df2015.Region[i] # this works since countries are in the same order","2afc8318":"# re-order dataframes according to the index\ndf2015.sort_index(inplace=True)\ndf2016.sort_index(inplace=True)\ndf2017.sort_index(inplace=True)\n\n# drop index column that is additionally created for sorting (ordering)\ndf2015.drop(['index'], axis = 1, inplace = True)\ndf2016.drop(['index'], axis = 1, inplace = True)\ndf2017.drop(['index'], axis = 1, inplace = True)\n\n# re-order column names in alphabetical order\ndf2015 = df2015.reindex_axis(sorted(df2015.columns), axis=1)\ndf2016 = df2016.reindex_axis(sorted(df2016.columns), axis=1)\ndf2017 = df2017.reindex_axis(sorted(df2017.columns), axis=1)","88cb86a4":"df2015.rename(index=str, columns={\"Country\": \"country\", \n                                  \"Dystopia Residual\": \"dystopia_residual\",\n                                  \"Economy (GDP per Capita)\": \"GDP_per_Capita\",\n                                  \"Family\": \"family\",\n                                  \"Freedom\": \"freedom\",\n                                  \"Generosity\": \"generosity\",\n                                  \"Happiness Rank\": \"happiness_rank\",\n                                  \"Happiness Score\": \"happiness_score\",\n                                  \"Health (Life Expectancy)\": \"health\",\n                                  \"Region\": \"region\",\n                                  \"Trust (Government Corruption)\": \"trust_to_gov\"}, inplace = True)\n\ndf2016.rename(index=str, columns={\"Country\": \"country\", \n                                  \"Dystopia Residual\": \"dystopia_residual\",\n                                  \"Economy (GDP per Capita)\": \"GDP_per_Capita\",\n                                  \"Family\": \"family\",\n                                  \"Freedom\": \"freedom\",\n                                  \"Generosity\": \"generosity\",\n                                  \"Happiness Rank\": \"happiness_rank\",\n                                  \"Happiness Score\": \"happiness_score\",\n                                  \"Health (Life Expectancy)\": \"health\",\n                                  \"Region\": \"region\",\n                                  \"Trust (Government Corruption)\": \"trust_to_gov\"}, inplace = True)\n\ndf2017.rename(index=str, columns={\"Country\": \"country\", \n                                  \"Dystopia.Residual\": \"dystopia_residual\",\n                                  \"Economy..GDP.per.Capita.\": \"GDP_per_Capita\",\n                                  \"Family\": \"family\",\n                                  \"Freedom\": \"freedom\",\n                                  \"Generosity\": \"generosity\",\n                                  \"Happiness.Rank\": \"happiness_rank\",\n                                  \"Happiness.Score\": \"happiness_score\",\n                                  \"Health..Life.Expectancy.\": \"health\",\n                                  \"Region\": \"region\",\n                                  \"Trust..Government.Corruption.\": \"trust_to_gov\"}, inplace = True)","a87be468":"df2015.head()","ddde5046":"df2016.head()","07be70e0":"df2017.head()","755cef8e":"## Top 10 Happiest Countries\n\nhappiness_score_2015 = []\ncountries_2015 = []\nhappiness_score_2016 = []\ncountries_2016 = []\nhappiness_score_2017 = []\ncountries_2017 = []\n\nfor i in range(0,10):\n    happiness_score_2015.append(df2015.happiness_score.values[i])\n    countries_2015.append(df2015.country[i])\n    happiness_score_2016.append(df2016.happiness_score.values[i])\n    countries_2016.append(df2016.country[i])\n    happiness_score_2017.append(df2017.happiness_score.values[i])\n    countries_2017.append(df2017.country[i])\n\n# Normalize happiness score by the maximum happiness score at the associated year\nhappiness_score_2015 = happiness_score_2015\/happiness_score_2015[0]*100\nhappiness_score_2016 = happiness_score_2016\/happiness_score_2016[0]*100\nhappiness_score_2017 = happiness_score_2017\/happiness_score_2017[0]*100\n\n# create trace1   \ntrace1 = go.Bar(\n    x = countries_2015,\n    y = happiness_score_2015,\n    name = \"2015\")\ntrace2 = go.Bar(\n    x = countries_2016,\n    y = happiness_score_2016,\n    name = \"2016\")\ntrace3 = go.Bar(\n    x = countries_2017,\n    y = happiness_score_2016,\n    name = \"2017\")\n\ndata = [trace1, trace2, trace3]\nlayout = go.Layout(\n    margin=dict(b=100),\n    title='Top 10 Happiest Countries',\n    xaxis=dict(titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd', range=[95, 100]),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nfig = go.Figure(data=data, layout=layout)\npy.iplot(fig, filename='grouped-bar')","149bcd6d":"## Top 10 Saddest Countries\n\nhappiness_score_2015 = []\ncountries_2015 = []\nhappiness_score_2016 = []\ncountries_2016 = []\nhappiness_score_2017 = []\ncountries_2017 = []\n\nfor i in range(1,9):\n    happiness_score_2015.append(df2015.happiness_score.values[-i])\n    countries_2015.append(df2015.country[-i])\n    happiness_score_2016.append(df2016.happiness_score.values[-i])\n    countries_2016.append(df2016.country[-i])\n    happiness_score_2017.append(df2017.happiness_score.values[-i])\n    countries_2017.append(df2017.country[-i])\n\n# Normalize happiness score by the maximum happiness score at the associated year\nhappiness_score_2015 = happiness_score_2015\/df2015.happiness_score.values[0]*100\nhappiness_score_2016 = happiness_score_2016\/df2016.happiness_score.values[0]*100\nhappiness_score_2017 = happiness_score_2017\/df2017.happiness_score.values[0]*100\n\n# create trace1   \ntrace1 = go.Bar(\n    x = countries_2015,\n    y = happiness_score_2015,\n    name = \"2015\")\ntrace2 = go.Bar(\n    x = countries_2016,\n    y = happiness_score_2016,\n    name = \"2016\")\ntrace3 = go.Bar(\n    x = countries_2017,\n    y = happiness_score_2016,\n    name = \"2017\")\n\ndata1 = [trace1]\ndata2 = [trace2]\ndata3 = [trace3]\nlayout1 = go.Layout(\n    margin=dict(b=100),\n    title='Top 10 Saddest Countries in 2015',\n    xaxis=dict(titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nlayout2 = go.Layout(\n    margin=dict(b=100),\n    title='Top 10 Saddest Countries in 2016',\n    xaxis=dict(titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nlayout3 = go.Layout(\n    margin=dict(b=100),\n    title='Top 10 Saddest Countries in 2017',\n    xaxis=dict(titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nfig1 = go.Figure(data=data1, layout=layout1)\nfig2 = go.Figure(data=data2, layout=layout2)\nfig3 = go.Figure(data=data3, layout=layout3)\npy.iplot(fig1, filename='grouped-bar')\npy.iplot(fig2, filename='grouped-bar')\npy.iplot(fig3, filename='grouped-bar')","d7c87cf9":"## Average Happiness Scores of the Regions\n\nregions = df2015.region.tolist()\nregions = list(set(regions)) # returns the list of unique regions\n\nregion2015 = {}\nregion2016 = {}\nregion2017 = {}\n\nfor i in range(0, len(df2015.region)):\n    if df2015.region[i] not in region2015:\n        region2015[df2015.region[i]] = [df2015.happiness_score[i]]\n    else:\n        region2015[df2015.region[i]].append(df2015.happiness_score[i])\n        \n    if df2016.region[i] not in region2016:\n        region2016[df2016.region[i]] = [df2016.happiness_score[i]]\n    else:\n        region2016[df2016.region[i]].append(df2016.happiness_score[i])\n        \n    if df2017.region[i] not in region2017:\n        region2017[df2017.region[i]] = [df2017.happiness_score[i]]\n    else:\n        region2017[df2017.region[i]].append(df2017.happiness_score[i])\n\nregion_2015 = []\nregion_2016 = []\nregion_2017 = []\n\nfor region in regions:\n    avg2015 = sum(region2015[region])\/len(region2015[region])\n    region_2015.append(avg2015)\n    \n    avg2016 = sum(region2016[region])\/len(region2016[region])\n    region_2016.append(avg2016)\n    \n    avg2017 = sum(region2017[region])\/len(region2017[region])\n    region_2017.append(avg2017)\n\n# Normalize happiness scores of regions by the greatest score at that year\nregion_2015 = region_2015\/df2015.happiness_score.values[0]*100\nregion_2016 = region_2016\/df2016.happiness_score.values[0]*100\nregion_2017 = region_2017\/df2017.happiness_score.values[0]*100\n\n# create trace1   \ntrace1 = go.Bar(\n    x = regions,\n    y = region_2015,\n    name = \"2015\")\ntrace2 = go.Bar(\n    x = regions,\n    y = region_2016,\n    name = \"2016\")\ntrace3 = go.Bar(\n    x = regions,\n    y = region_2017,\n    name = \"2017\")\n\ndata = [trace1, trace2, trace3]\nlayout = go.Layout(\n    margin=dict(b=250),\n    title='Average Happiness Scores of the Regions',\n    xaxis=dict(titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Happiness Scores (%)',gridwidth=2, gridcolor='#bdbdbd', range = [50, 100]),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nfig = go.Figure(data=data, layout=layout)\npy.iplot(fig, filename='grouped-bar')\n","c7ca18f2":"## Contribution Levels of the Factors to the Happiness\n\nfactors_2015 = []\ncontribution_of_factors_2015 = []\nfactors_2016 = []\ncontribution_of_factors_2016 = []\nfactors_2017 = []\ncontribution_of_factors_2017 = []\n\nfor col_name in list(df2015.columns.values):\n    if not (col_name == 'country' or col_name == 'happiness_rank' or col_name == 'region' or col_name == 'happiness_score'):\n        factor_2015 = df2015[col_name].values\n        #print(factor_2015)\n        avg_contribution_2015 = sum(factor_2015)\/len(factor_2015)\n        factors_2015.append(col_name)\n        contribution_of_factors_2015.append(avg_contribution_2015)\n    \n        factor_2016 = df2016[col_name].values\n        avg_contribution_2016 = sum(factor_2016)\/len(factor_2016)\n        factors_2016.append(col_name)\n        contribution_of_factors_2016.append(avg_contribution_2016)\n    \n        factor_2017 = df2017[col_name].values\n        avg_contribution_2017 = sum(factor_2017)\/len(factor_2017)\n        factors_2017.append(col_name)\n        contribution_of_factors_2017.append(avg_contribution_2017)\n        \ncontribution_of_factors_2015 = contribution_of_factors_2015\/sum(contribution_of_factors_2015) * 100\ncontribution_of_factors_2016 = contribution_of_factors_2016\/sum(contribution_of_factors_2016) * 100\ncontribution_of_factors_2017 = contribution_of_factors_2017\/sum(contribution_of_factors_2017) * 100\n\n# create trace1   \ntrace1 = go.Bar(\n    x = factors_2015,\n    y = contribution_of_factors_2015,\n    name = \"2015\")\ntrace2 = go.Bar(\n    x = factors_2016,\n    y = contribution_of_factors_2016,\n    name = \"2016\")\ntrace3 = go.Bar(\n    x = factors_2017,\n    y = contribution_of_factors_2017,\n    name = \"2017\")\n\ndata = [trace1, trace2, trace3]\nlayout = go.Layout(\n    margin=dict(b=150),\n    title='Contribution Levels of the Factors to the Happiness',\n    xaxis=dict(title='Factors',titlefont=dict(size=16), tickangle=-60),\n    yaxis=dict(title='Contribution Levels (%)',gridwidth=2, gridcolor='#bdbdbd'),\n    font=dict(size=16),\n    bargap = 0.6,\n    barmode='group')\n\nfig = go.Figure(data=data, layout=layout)\npy.iplot(fig, filename='grouped-bar')","a70a87c9":"## Contribution Weight of Dystopia Residual to Happiness\n\ndystopia_residual2015 = df2015.dystopia_residual.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\ndystopia_residual2016 = df2016.dystopia_residual.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\ndystopia_residual2017 = df2017.dystopia_residual.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 30\n\nfor i in range(0,len(dystopia_residual2015)):\n    dystopia_residual2015[i] = sum(dystopia_residual2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    dystopia_residual2016[i] = sum(dystopia_residual2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    dystopia_residual2017[i] = sum(dystopia_residual2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100\n\ntrace1 = go.Scatter(\n                    y = dystopia_residual2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = dystopia_residual2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = dystopia_residual2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Dystopia Residual to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Dystopia Residual (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","54e7260a":"## Contribution Weight of GDP per Capita\n\nGDP2015 = df2015.GDP_per_Capita.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\nGDP2016 = df2016.GDP_per_Capita.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\nGDP2017 = df2017.GDP_per_Capita.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 30\n\nfor i in range(0,len(GDP2015)):\n    GDP2015[i] = sum(GDP2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    GDP2016[i] = sum(GDP2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    GDP2017[i] = sum(GDP2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100\n\ntrace1 = go.Scatter(\n                    y = GDP2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = GDP2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = GDP2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of GDP per Capita to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of GDP per Capita (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","822db9b8":"## Contribution Weight of Family\n\nfamily2015 = df2015.family.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\nfamily2016 = df2016.family.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\nfamily2017 = df2017.family.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 20\n\nfor i in range(0,len(family2015)):\n    family2015[i] = sum(family2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    family2016[i] = sum(family2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    family2017[i] = sum(family2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100    \n\ntrace1 = go.Scatter(\n                    y = family2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = family2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = family2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Family to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Family (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","dfa33516":"## Contribution Weight of Freedom\n\nfreedom2015 = df2015.freedom.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\nfreedom2016 = df2016.freedom.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\nfreedom2017 = df2017.freedom.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 40\n\nfor i in range(0,len(dystopia_residual2015)):\n    freedom2015[i] = sum(freedom2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    freedom2016[i] = sum(freedom2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    freedom2017[i] = sum(freedom2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100\n    \ntrace1 = go.Scatter(\n                    y = freedom2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = freedom2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = freedom2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Freedom to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Freedom (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","5a953367":"## Contribution Weight of Generosity\n\ngenerosity2015 = df2015.generosity.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\ngenerosity2016 = df2016.generosity.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\ngenerosity2017 = df2017.generosity.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 30\n\nfor i in range(0,len(dystopia_residual2015)):\n    generosity2015[i] = sum(generosity2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    generosity2016[i] = sum(generosity2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    generosity2017[i] = sum(generosity2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100    \n    \ntrace1 = go.Scatter(\n                    y = generosity2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = generosity2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = generosity2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Generosity to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Generosity (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","0446a59f":"## Contribution Weight of Health\n\nhealth2015 = df2015.health.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\nhealth2016 = df2016.health.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\nhealth2017 = df2017.health.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 30\n\nfor i in range(0,len(dystopia_residual2015)):\n    health2015[i] = sum(health2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    health2016[i] = sum(health2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    health2017[i] = sum(health2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100    \n    \ntrace1 = go.Scatter(\n                    y = health2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = health2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = health2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Health to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Health (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","4082d014":"## Contribution Weight of Trust to Government\n\ntrust_to_gov2015 = df2015.trust_to_gov.tolist()\nhappiness_score2015 = df2015.happiness_score.tolist()\ntrust_to_gov2016 = df2016.trust_to_gov.tolist()\nhappiness_score2016 = df2016.happiness_score.tolist()\ntrust_to_gov2017 = df2017.trust_to_gov.tolist()\nhappiness_score2017 = df2017.happiness_score.tolist()\n\nk = 20\n\nfor i in range(0,len(trust_to_gov2015)):\n    trust_to_gov2015[i] = sum(trust_to_gov2015[i:i+k-1])\/sum(df2015.happiness_score.values[i:i+k-1])*100\n    happiness_score2015[i] = sum(happiness_score2015[i:i+k-1])\/k\n    trust_to_gov2016[i] = sum(trust_to_gov2016[i:i+k-1])\/sum(df2016.happiness_score.values[i:i+k-1])*100\n    happiness_score2016[i] = sum(happiness_score2016[i:i+k-1])\/k\n    trust_to_gov2017[i] = sum(trust_to_gov2017[i:i+k-1])\/sum(df2017.happiness_score.values[i:i+k-1])*100\n    happiness_score2017[i] = sum(happiness_score2017[i:i+k-1])\/k\n\n# Normalize happiness score by the maximum happiness score at the associated year    \nhappiness_score2015 = happiness_score2015\/df2015.happiness_score[0]*100\nhappiness_score2016 = happiness_score2016\/df2016.happiness_score[0]*100\nhappiness_score2017 = happiness_score2017\/df2017.happiness_score[0]*100    \n    \ntrace1 = go.Scatter(\n                    y = trust_to_gov2015,\n                    x = happiness_score2015,\n                    mode = \"lines\",\n                    name = \"2015\",\n                   )\n\ntrace2 = go.Scatter(\n                    y = trust_to_gov2016,\n                    x = happiness_score2016,\n                    mode = \"lines\",\n                    name = \"2016\",\n                   )\n\ntrace3 = go.Scatter(\n                    y = trust_to_gov2017,\n                    x = happiness_score2017,\n                    mode = \"lines\",\n                    name = \"2017\",\n                   )\n\ndata = [trace1, trace2, trace3]\nlayout = dict(title = 'Contribution Weight of Trust to Government to Happiness',\n              autosize=False,\n              width=800,\n              height=500,\n              yaxis= dict(title= 'Contribution Weight of Trust to Government (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              xaxis= dict(title= 'Happiness Score (%)',gridwidth=2, gridcolor='#bdbdbd'),\n              font=dict(size=14)\n             )\nfig = dict(data = data, layout = layout)\npy.iplot(fig)","ed3b5d91":"## df2017 does not have \"Region\" column, let's add it","5c0f01fc":"## Remove uncommon countries from dataframes","2bd8c692":"# We can now start visualization","f18f1361":"### As seen, dataframes have different number of rows, which means that there are uncommon country data in the dataframes","0cf8b44b":"## Import Libraries","d5eac487":"## Delete the countries that are common in all three dataframes","76930993":"### Conclusion: Generally, weight of the freedom is not much sensitive to the happiness score of the countries.","e88f01a6":"## Append all countries into a list and unique the list","76905cfc":"## Import Data","d50481a9":"### Conclusion: Generally, as countries get happier below 70%, trust to government becomes a less effective factor in determining the happiness score among other factors.","94994ec1":"### Conclusion: Generally, as countries get happier, generosity becomes a less effective factor in determining the happiness score among other factors.","363acfcb":"## Data Preprocessing","1fd8c44f":"## Rename the columns of the dataframes","1ffbefda":"### Conclusion: Generally, as countries get happier above 60% and get less happier below 15%, health becomes a more effective factor in determining the happiness score among other factors. In the midband region, weight of health is not much sensitive to the happiness score of the countries.","51f0a863":"## reset indexes so that indexes are from 0 to 145","9c6e6873":"### Conclusion: in 2015 and 2016,  generally, as countries get happier, family becomes a more effective factor in determining the happiness score among other factors.","eb044b9e":"### Conclusion: Generally, as countries get happier, dystopia residual becomes a less effective factor in determining the happiness score among other factors.","59914e3e":"### Conclusion: Generally, as countries get happier, GDP per capita becomes a more effective factor in determining the happiness score among other factors."}}