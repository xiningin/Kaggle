{"cell_type":{"e25e2e2d":"code","838b170e":"code","180b8e83":"code","c973fec4":"code","682143bb":"code","8e62aa77":"code","eeb50721":"code","406c67f9":"code","3806da69":"code","c469d502":"code","5b4dacec":"code","ef9dc717":"code","b76095a2":"code","305031ad":"code","46544350":"code","c6e6562b":"code","d261379e":"markdown","054a1681":"markdown","944cbbb0":"markdown","c6daf0df":"markdown","85670ccc":"markdown","4cd156b5":"markdown","c4bea5ac":"markdown","37999a51":"markdown","a71e1e90":"markdown","ae3a653b":"markdown","9b8bca71":"markdown","8bc22937":"markdown","8ae9e9f5":"markdown","974f38bf":"markdown","561b3435":"markdown","79a696e3":"markdown","6643c5a8":"markdown"},"source":{"e25e2e2d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom scipy.stats import ttest_1samp, shapiro, levene, ttest_ind, mannwhitneyu, pearsonr, spearmanr, kendalltau, \\\n    f_oneway, kruskal\nfrom statsmodels.stats.proportion import proportions_ztest\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","838b170e":"# Let's make the necessary adjustments first.\npd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', 10)\npd.set_option('display.float_format', lambda x: '%.5f' % x)","180b8e83":"# Read the ab_testing_control and ab_testing_test data in the ab-testing-examples csv. \n#Make a copy of the dataframe you created.\ndf_control = pd.read_csv(\"..\/input\/ab-testing-examples-datasets\/ab_testing_control.csv\")\ndf_control = df_control.iloc[:, 1:]\n\ndf_test = pd.read_csv('..\/input\/ab-testing-examples-datasets\/ab_testing_test.csv')\ndf_test = df_test.iloc[:, 1:]\n","c973fec4":"df_control.describe().T\n","682143bb":"df_test.describe().T","8e62aa77":"df_control['Purchase'].mean()\n","eeb50721":"df_test['Purchase'].mean()","406c67f9":"test_stat, pvalue = shapiro(df_control[\"Purchase\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n\ntest_stat, pvalue = shapiro(df_test[\"Purchase\"])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","3806da69":"test_stat, pvalue = levene(df_control['Purchase'],\n                           df_test['Purchase'])\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","c469d502":"test_stat, pvalue = ttest_ind(df_control[\"Purchase\"],\n                              df_test[\"Purchase\"],\n                              equal_var=True)\n\nprint('Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))","5b4dacec":"\ndef hypothesis_result(dataframe_A, dataframe_B, col_name):\n    test_stat_A, pvalue_A = shapiro(dataframe_A[col_name])\n    print('Shapiro Test Stat = %.4f, p-value = %.4f' % (test_stat_A, pvalue_A))\n\n    test_stat_B, pvalue_B = shapiro(dataframe_B[col_name])\n    print('Shapiro Test Stat = %.4f, p-value = %.4f' % (test_stat_B, pvalue_B))\n\n    test_stat_var, pvalue_var = levene(dataframe_A[col_name],\n                                        dataframe_B[col_name])\n    print('Levene Test Stat = %.4f, p-value = %.4f' % (test_stat_var, pvalue_var))\n\n    if pvalue_A < 0.05 and pvalue_B < 0.05:\n        test_stat, pvalue = mannwhitneyu(dataframe_A[col_name],\n                                         dataframe_B[col_name])\n\n        print('Mannwhitneye Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n        print(f'H0 hypothesis {\"NOT REJECTED\" if pvalue > 0.05 else \"REJECTED\"}')\n    else:\n        test_stat, pvalue = ttest_ind(dataframe_A[col_name],\n                                         dataframe_B[col_name],\n                                      equal_var=(True if pvalue_var > 0.05 else False))\n\n        print('Ttest Test Stat = %.4f, p-value = %.4f' % (test_stat, pvalue))\n        print(f'H0 hypothesis {\"NOT REJECTED\" if pvalue > 0.05 else \"REJECTED\"}')","ef9dc717":"hypothesis_result(df_control, df_test, 'Earning')\nprint('###########################################')\nprint('control_mean', df_control['Earning'].mean())\nprint('test_mean', df_test['Earning'].mean())","b76095a2":"#for maxiumum bidding click rate\na1 = df_control[\"Click\"].sum()\na2 = df_control[\"Impression\"].sum()\nprint(a1\/a2)","305031ad":"#for average bidding click rate\nb1 = df_test[\"Click\"].sum()\nb2 = df_test[\"Impression\"].sum()\nprint(b1\/b2)","46544350":"number_of_clicks = np.array([a1,b1])\n\nnumber_of_ad_views = np.array([a2,b2])","c6e6562b":"proportions_ztest(count=number_of_clicks,nobs=number_of_ad_views)","d261379e":"The Independent Samples t Test compares the means of two independent groups in order to determine whether there is statistical evidence that the associated population means are significantly different. The Independent Samples t Test is a parametric test.\n\nNote: The Independent Samples t Test can only compare the means for two (and only two) groups. It cannot make comparisons among more than two groups. If you wish to compare the means across more than two groups, you will likely want to run an ANOVA.\n\n## Mann\u2013Whitney U test\n\nThe Mann-Whitney U test is a nonparametric test that allows two groups or conditions or treatments to be compared without making the assumption that values are normally distributed. ","054a1681":"## Data Preparation","944cbbb0":"* H0 : There is a statistically significant difference between the click rate averages of control and test groups.\n\n* H1 : There is no statistically significant difference between the click rate averages of control and test groups.","c6daf0df":"* !!! H0 cannot be rejected because p-value = 0.1541 and 0.5891 > 0.05, so  that is, the normal distribution assumption of is provided.\n\nThen, we should at the homogenity of variance.\n\n## Variance Homogenity Assumption\n\n**Levene's Test**\n\n> In statistics, Levene's test is an inferential statistic used to assess the equality of variances for a variable calculated for two or more groups. Some common statistical procedures assume that variances of the populations from which different samples are drawn are equal. Levene's test assesses this assumption. It tests the null hypothesis that the population variances are equal (called homogeneity of variance or homoscedasticity). If the resulting p-value of Levene's test is less than some significance level (typically 0.05), the obtained differences in sample variances are unlikely to have occurred based on random sampling from a population with equal variances. Thus, the null hypothesis of equal variances is rejected and it is concluded that there is a difference between the variances in the population.\n\n* H0: Variances are Homogeneous.\n* H1: Variances are not Homogeneous.\n","85670ccc":"* !!! H0 cannot be rejected because p-value = 0.1083 > 0.05, so  that is, homogeneous variance distribution is provided.\n\nSince the assumptions are made, we will perform two independent sample t tests. (parametric test)\n\n## Independent Samples T Test","4cd156b5":"According to this result;\n\n* There is a statistically significant difference between them because p-value = 0.0000 < 0.05 so H0 is rejected.\n\n* Based on the current average click-through rates, the maximum bidding -->5 out of 100 people click on the ad, while the ad the average bidding 3 out of 100 people click on.\n\n> So, if the company wants to increase the click-through rate, it may prefer maximum bidding.\n","c4bea5ac":"## Business Problem\n\nFacebook recently announced a proposal called maximum bidding \naverage bidding, a new type of quote, as an alternative to the export type \nIntroduced.\n\nOne of our customers, bombabomba.com, tested this new feature \nand averagebidding, more than maximumbidding. \nperform an A\/B test to see if it brings too many conversions \nTo.\n\n## Dataset Story\n\nIn this data set containing bombabomba.com's website information, users \ninformation such as the number of ads they see and click on, as well as \nearnings information. \nThere are two separate data sets, Control and Test group.\n\n## Variables\n\n* **Impression** \u2013 Number of ad views\n* **Click** \u2013 Specifies the number of clicks on the ad that appears.\n* **Purchase** \u2013 Specifies the number of products purchased after clicked ads.\n* **Earning** \u2013 Gain after purchased products\n\n","37999a51":"## Now let's look at which type of offer to choose with two examples.","a71e1e90":"According to this result;\n\n* The presumability of normality is provided beacuse P-value = 0.5306 and 0.6163 > 0.05 that is, H0 can not rejected.\n* The presumability of variance homogenity is not provided beacuse P-value = 0.5540 > 0.05 that is, H0 can not rejected.\n* In this case, we should perform parametric testing.(Independent Samples T Test)\n>  As a result, there is a statistically significant difference between them because p-value = 0.0000 < 0.05 so H0 is rejected. When you look at the gain in the test group, the test group gains more. That's why we can choose average bidding. ","ae3a653b":"## Let's review according to Earning","9b8bca71":"* H0 : There is a statistically significant difference between the earnings averages of control and test groups.\n\n* H1 : There is no statistically significant difference between the earnings averages of control and test groups.","8bc22937":"## What is A\/B Test? \n\nA\/B tests are summarized in a sentence: To investigate whether the innovations and improvements made on the website for Front-End or Back-End projects make a \"meaningful difference\" according to some of the criteria set. For example: Is there a significant difference in conversion rates between if the buy button for a product is red and green? Another example is the investigation of whether the new machine learning project in the live system causes a significant difference in terms of increasing revenues compared to the old system.\n\nAlthough the \"meaningful difference\" part here is very important, when the use cases in the world are examined, the definition of signibility comes with statistical tests.\n\nIncomplete or misunderstanding of statistical tests will cause errors in the study and low reliability results.\n\nFor example, a short search of Google and Booking can be done. It should be seen how excited the team at Google is interested in these tests \ud83d\ude42\n\nIn addition, netflix's legendary recommendation system has been tested with these methods. It is not a test of the recommendation algorithm, but rather a test of the performance of the created model in the living. For this study, you can review the following article http:\/\/dl.acm.org\/citation.cfm?id=2843948\n\nIf the A\/B test is used frequently, sorted:\n\n1. Optimizing \"Customer Journey\" steps for e-Commerce, i.e. increasing conversion rates.\n\n2. An innovation on the Front-End side. Changes such as color change, menu change, button change, placement change.\n\n3. Revenue-driven performance of a machine learning (big data, data science) project in the live.\n\n## What path should be followed and what should be considered?\n\n1. It is necessary to design the right experiment and collect the right data.\n2. The correct measuring tool (test method) must be selected.\n3. Accurate statistical hypotheses need to be established and tested.\n\n--> Hypotheses that need to be established for the problem:\n\n> H0: There is no statistically significant difference between the conversion rate value of the old system and the conversion rate value of the new system.\n\n> H1: There is a statistically significant difference between the conversion rate value of the old system and the conversion rate value of the new system.\n\n4. It is necessary to comment on the hypotheses and to submit relevant action recommendations to the business units.\n\n\n","8ae9e9f5":"## Let's review according to click rate(conversion of impression to click)\n\n**Two Proportion Z-Test**\n\nWe apply the z rate test to compare the average of the ratios of the two groups. A two proportion z-test is used to test for a difference between two population proportions.\n\nTwo Proportion Z-Test: Formula\nA two proportion z-test always uses the following null hypothesis:\n\n* H0: \u03bc1 = \u03bc2 (the two population proportions are equal)\nThe alternative hypothesis can be either two-tailed, left-tailed, or right-tailed:\n\n* H1 (two-tailed): \u03c01 \u2260 \u03c02 (the two population proportions are not equal)\n* H1 (left-tailed): \u03c01 < \u03c02 (population 1 proportion is less than population 2 proportion)\n* H1 (right-tailed): \u03c01 > \u03c02 (population 1 proportion is greater than population 2 proportion)\n\nWe use the following formula to calculate the test statistic z:\n\n* z = (p1-p2) \/ \u221ap(1-p)(1\/n1+1\/n2)\n\nwhere p1 and p2 are the sample proportions, n1 and n2 are the sample sizes, and where p is the total pooled proportion calculated as:\n\n* p = (p1n1 + p2n2)\/(n1+n2)\n\nIf the p-value that corresponds to the test statistic z is less than your chosen significance level (common choices are 0.10, 0.05, and 0.01) then you can reject the null hpothesis.","974f38bf":"* H0 cannot be rejected because p-value = 0.3493 > 0.05 . \u0130n other words, there is no statistically significant difference between the purchase averages of the control and test groups. \n\n* According to the test results, H0 is undeniable. that is, there is no significant difference between maximum bidding and average bidding.\nIn both of the bid types given, purchases close to each other were realized. In this case, it can be directed to whichever price offer is more suitable. to pay less and get the same purchases. however, we can also recommend a more detailed analysis. Because although purchases are important, the rate of seeing and clicking an ad can also cause benefits such as popularity and not being forgotten. If the customer agrees to a more detailed analysis, we can perform and present the following analyzes.\n\n## Lets converting to function for quick result","561b3435":"There doesn't seem to be much difference between purchases, according to maximum bidding or average bidding. We need to run a hypothesis test to see if there's a statistically significant difference between the two groups.\n\n## Hypothesis testing for Purchase:\n\nH0= There is no statistically significant difference between the purchasing averages of control and test groups. \u03bc0 = \u03bc1\n\nH1= There is a statistically significant difference between the purchasing averages of control and test groups. \u03bc0 <> \u03bc1\n\n## The way to follow when setting up the hypothesis:\n1. Two independent sample t-tests (parametric testing) if assumptions are provided.\n2. Mannwhitneyu test (non-parametric test) if assumptions are not provided.\n\nIf normality is not achieved, we will do all kinds of nonparametric tests.\nWhat happens if normality is achieved and variance homogeneity is not achieved?  We're going to enter an argument in the T-test function.\n\n* p-value < 0.05 => H0 IS REJECTED.\n\n* p-value > 0.05 => H0 IS NOT REJECTED.\n\nWe should first look at the assumption of normality.\n\n## Normality Assumtion\n\n**Shapiro-Wilk Test**\n\n> The Shapiro-Wilk test  is a test for normal distribution exhibiting high power, leading to good results even with a small number of observations. In contrast to other comparison tests the Shapiro-Wilk test is only applicable to check for normality. The null-hypothesis of this test is that the population is normally distributed. Thus, if the p value is less than the chosen alpha level, then the null hypothesis is rejected and there is evidence that the data tested are not normally distributed. On the other hand, if the p value is greater than the chosen alpha level, then the null hypothesis can not be rejected.\n\n* H0: Normal distribution assumption is provided.\n* H1: Normal dagilim assumption is not provided.\n\n","79a696e3":"![A\/B](https:\/\/www.veribilimiokulu.com\/wp-content\/uploads\/2018\/08\/what-ab-test.png)","6643c5a8":"## Let's review according to Purchase."}}