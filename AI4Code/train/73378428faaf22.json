{"cell_type":{"03cde878":"code","b5d305b6":"code","e3c23578":"code","dd1905cd":"code","1bb43271":"code","824a2f1f":"code","7708d0af":"code","b38b5cd7":"code","1d0dd429":"code","bf55b519":"code","812e3d7d":"code","5de5bd12":"code","35200ead":"code","c33bab20":"code","e0bd1028":"code","970e1460":"code","2d217330":"code","29fda60f":"code","654d09a5":"code","0c32f039":"code","0d4922be":"code","6775001d":"code","d4d50e66":"code","c29a39d5":"markdown","7eb724ac":"markdown","1bd8bb7c":"markdown","dcd964a9":"markdown","a66e4169":"markdown","410b53c0":"markdown","a2894a0f":"markdown","d2d097f2":"markdown","c4c20152":"markdown","ff978ebd":"markdown","d0cc1be9":"markdown","668c64fd":"markdown","a438b4d4":"markdown","70f94fbd":"markdown","33b88ebb":"markdown","39c43b20":"markdown","41bb537e":"markdown","6ae797de":"markdown","154e2046":"markdown","fd120fd3":"markdown","4d223c61":"markdown"},"source":{"03cde878":"import pandas as pd\n\nimport numpy as np\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nimport seaborn as sns","b5d305b6":"# Load the original data (index and drop as there's a dummy index I don't want to keep).\nmaster_demos = pd.read_csv('..\/input\/csgofixed\/mm_master_demos.csv', index_col=0).reset_index(drop=True)","e3c23578":"# Group by `file` and `round` and take the first entry to avoid duplicates.  This gives us a row for each pair.\nmaster_by_round = master_demos.groupby(['file', 'round'], as_index=False).first()\n\n# Group again by `file`, which lets us then extract repeated information for all rounds for a given file.\nmaster_by_file = master_by_round.groupby('file')\n\n# Extract the first occurrence of `map` per file.\nmap_by_file = master_by_file['map'].first().reset_index()\n\n# Extract and tally `winner_side` per file.  CT\/T values may not always be present, so fill those with 0.\nside_per_file = master_by_file['winner_side'].value_counts().reset_index(name='amount')\nside_per_file = side_per_file.pivot_table(index='file', columns='winner_side', values='amount', fill_value=0).reset_index()\nside_per_file.columns = ['file', 'ct_wins', 't_wins']\n\n# Merge the data together per file.\nper_game_df = map_by_file.merge(side_per_file, on='file')\n\n# Cleanup.\ndel master_by_round\ndel master_by_file\ndel map_by_file\ndel side_per_file\n\nper_game_df.head()","dd1905cd":"df = pd.DataFrame(per_game_df[['ct_wins', 't_wins']].sum().values, columns=['amount'], index=['Counter Terrorists', 'Terrorists'])\nsns.barplot(data=df, x=df.index, y='amount')\nsns.despine()\nplt.xlabel('Winning Side')\nplt.ylabel('Total Wins')\nplt.title('Total wins per side')\nplt.show()\n\ndel df","1bb43271":"wins_per_map = per_game_df.rename({'ct_wins': 'Counter Terrorist', 't_wins': 'Terrorist'}, axis=1).groupby('map').sum().reset_index()\nwins_per_map = wins_per_map.melt(id_vars='map').rename({'variable': 'side', 'value': 'amount'}, axis=1)\n_ = plt.figure(figsize=(10, 10))\ng = sns.barplot(data=wins_per_map, x='map', y='amount', hue='side')\nsns.despine()\ng.set_xticklabels(g.get_xticklabels(), rotation=90)\nplt.xlabel('Map')\nplt.ylabel('Wins')\nplt.title('Wins per side per map')\nplt.show()\n\ndel wins_per_map\ndel g","824a2f1f":"def wins_per_map(df, map_name, ax):\n    # Filter out the map we want.\n    map_df = df.loc[df.map == map_name]\n    # Sum again but based on this new df.\n    wins_df = pd.DataFrame(map_df[['ct_wins', 't_wins']].sum().values, columns=['amount'], index=['Counter Terrorists', 'Terrorists'])\n    # Plot!\n    sns.barplot(data=wins_df, x=wins_df.index, y='amount', ax=ax)\n    sns.despine()\n    ax.set(title=map_name, ylabel='Total Wins')\n    return wins_df\n\nfig, axes = plt.subplots(7, 3, figsize=(15, 15), sharex=False)\nfig.subplots_adjust(hspace=0.5)\nfor ax, curr_map in zip(axes.flatten(), sorted(per_game_df.map.unique())):\n    wins_per_map(per_game_df, curr_map, ax)\nfig.tight_layout()","7708d0af":"top_5_weaps = master_demos.wp.value_counts().head(5)\nsns.barplot(x=top_5_weaps.index, y=top_5_weaps.values)\nsns.despine()\nplt.xlabel('Weapon')\nplt.ylabel('Total occurrences')\nplt.title('Five most popular weapons overall')\nplt.show()\n\ndel top_5_weaps","b38b5cd7":"worst_5_weaps = master_demos.wp.value_counts().tail(5)\nsns.barplot(x=worst_5_weaps.index, y=worst_5_weaps.values)\nsns.despine()\nplt.xlabel('Weapon')\nplt.ylabel('Total occurrences')\nplt.title('Five least popular weapons overall')\nplt.show()\n\ndel worst_5_weaps","1d0dd429":"# Group by `map` and `wp` then see how many there are.  This gives us an entry for each map\/wp combination and the total number of occurrences.\nweap_by_map = master_demos.groupby(['map', 'wp'], as_index=False).size().reset_index().rename({0: 'amount'}, axis=1)\n\nfor curr_map in weap_by_map['map'].unique():\n    print(f'{curr_map} top 5 weapons:')\n    curr_map_weap = weap_by_map.loc[weap_by_map['map'] == curr_map]\n    for curr_weap in curr_map_weap.sort_values('amount', ascending=False)[:5].iterrows():\n        print(f'\\t{curr_weap[1][1]} ({curr_weap[1][2]})')\n    print()\n    \ndel weap_by_map","bf55b519":"g = sns.countplot(master_demos['hitbox'], order=master_demos['hitbox'].value_counts().index)\nsns.despine()\ng.set_xticklabels(g.get_xticklabels(), rotation=45)\nplt.xlabel('Hitbox location')\nplt.ylabel('Amount')\nplt.title('Most common hitboxes')\nplt.show()\n\ndel g","812e3d7d":"sniper_box = master_demos.loc[master_demos['wp_type'] == 'Sniper', 'hitbox']\ng = sns.countplot(sniper_box, order=sniper_box.value_counts().index)\nsns.despine()\ng.set_xticklabels(g.get_xticklabels(), rotation=45)\nplt.xlabel('Hitbox location')\nplt.ylabel('Amount')\nplt.title('Most common hitboxes - Sniper')\nplt.show()\n\ndel sniper_box\ndel g","5de5bd12":"pistol_box = master_demos.loc[master_demos['wp_type'] == 'Pistol', 'hitbox']\ng = sns.countplot(pistol_box, order=pistol_box.value_counts().index)\nsns.despine()\ng.set_xticklabels(g.get_xticklabels(), rotation=45)\nplt.xlabel('Hitbox location')\nplt.ylabel('Amount')\nplt.title('Most common hitboxes - Pistol')\nplt.show()\n\ndel pistol_box\ndel g","35200ead":"import math\n\ndef convert_x_to_map(start_x, size_x, res_x, x):\n    x += (start_x * -1.0) if (start_x < 0) else start_x\n    x = math.floor((x \/ size_x) * res_x)\n    return x\n\ndef convert_y_to_map(start_y, size_y, res_y, y):\n    y += (start_y * -1.0) if (start_y < 0) else start_y\n    y = math.floor((y \/ size_y) * res_y)\n    y = (y - res_y) * -1.0\n    return y\n\nmap_data = pd.read_csv('..\/input\/csgofixed\/map_data.csv', index_col=0)\nmap_data.loc['de_overpass'] = {'StartX': -4820, 'StartY': -3591, 'EndX': 503, 'EndY': 1740, 'ResX': 1024, 'ResY': 1024}\nmap_data.loc['de_nuke'] = {'StartX': -3082, 'StartY': -4464, 'EndX': 3516, 'EndY': 2180, 'ResX': 1024, 'ResY': 1024}\nmap_data","c33bab20":"# Create the columns that will contain the converted coordinates.\nmaster_demos['AttackPosX'] = np.nan\nmaster_demos['AttackPosY'] = np.nan\nmaster_demos['VictimPosX'] = np.nan # I think this is for victim position?\nmaster_demos['VictimPosY'] = np.nan\n\n\nfor map_name in master_demos['map'].unique():\n    if map_name not in map_data.index:\n        print(f'Data not found for map: {map_name}')\n        continue\n    # Pull metadata for the map in question.\n    data = map_data.loc[map_name]\n    start_x = data['StartX']\n    start_y = data['StartY']\n    end_x = data['EndX']\n    end_y = data['EndY']\n    size_x = end_x - start_x\n    size_y = end_y - start_y\n    res_x = data['ResX']\n    res_y = data['ResY']\n    \n    # Apply the conversion functions to the appropriate columns and store them in the dummy columns created earlier.\n    print(f'Converting coordinates for {map_name}', end='')\n    master_demos.loc[master_demos['map'] == map_name, 'AttackPosX'] =  master_demos.loc[master_demos['map'] == map_name, 'att_pos_x'].apply(lambda x: convert_x_to_map(start_x, size_x, res_x, x))\n    master_demos.loc[master_demos['map'] == map_name, 'AttackPosY'] =  master_demos.loc[master_demos['map'] == map_name, 'att_pos_y'].apply(lambda y: convert_y_to_map(start_y, size_y, res_y, y))\n    master_demos.loc[master_demos['map'] == map_name, 'VictimPosX'] =  master_demos.loc[master_demos['map'] == map_name, 'vic_pos_x'].apply(lambda x: convert_x_to_map(start_x, size_x, res_x, x))\n    master_demos.loc[master_demos['map'] == map_name, 'VictimPosY'] =  master_demos.loc[master_demos['map'] == map_name, 'vic_pos_y'].apply(lambda y: convert_y_to_map(start_y, size_y, res_y, y))\n    print('...done!')\n\n# Cleanup.\ndel map_data","e0bd1028":"map_name = 'de_dust2'\n\ndust_data = master_demos.loc[master_demos['map'] == map_name]\n\n# Plot attack positions.\nplt.figure(figsize=(20, 20))\nplt.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\nplt.scatter(dust_data['AttackPosX'], dust_data['AttackPosY'], alpha=0.005, c='blue')\nplt.title(f'Attacker positions for {map_name}', fontsize=20)\nplt.show()\n\n# Plot victim positions.\nplt.figure(figsize=(20, 20))\nplt.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\nplt.scatter(dust_data['VictimPosX'], dust_data['VictimPosY'], alpha=0.005, c='red')\nplt.title(f'Victim positions for {map_name}', fontsize=20)\nplt.show()","970e1460":"dust_sniper_data = dust_data.loc[dust_data['wp_type'] == 'Sniper']\n\nplt.figure(figsize=(20, 20))\nplt.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\nplt.scatter(dust_sniper_data['AttackPosX'], dust_sniper_data['AttackPosY'], alpha=0.01, c='blue')\nplt.scatter(dust_sniper_data['VictimPosX'], dust_sniper_data['VictimPosY'], alpha=0.01, c='red')\nplt.title(f'Attacker and Victim positions for {map_name} with snipers', fontsize=20)\nplt.show()","2d217330":"filtered_dust_sniper_data = dust_sniper_data.loc[\n    (\n        (dust_sniper_data.AttackPosX > 400) &\n        (dust_sniper_data.AttackPosX < 500) &\n        (dust_sniper_data.AttackPosY > 900)\n    )\n]\n\nplt.figure(figsize=(20, 20))\nplt.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\nplt.scatter(filtered_dust_sniper_data['AttackPosX'], filtered_dust_sniper_data['AttackPosY'], alpha=0.01, c='blue')\nplt.scatter(filtered_dust_sniper_data['VictimPosX'], filtered_dust_sniper_data['VictimPosY'], alpha=0.01, c='red')\nplt.title(f'{map_name} Terrorist spawn sniper shots', fontsize=20)\nplt.show()","29fda60f":"from matplotlib.collections import LineCollection\n\nrays_origin = list(zip(filtered_dust_sniper_data.AttackPosX, filtered_dust_sniper_data.AttackPosY))\nrays_dest = list(zip(filtered_dust_sniper_data.VictimPosX, filtered_dust_sniper_data.VictimPosY))\nlines_formatted = list(map(lambda x, y: [x, y], rays_origin, rays_dest))\nlc = LineCollection(lines_formatted, linestyles='dashed', colors=[(1, 0, 0, 0.05)])\n\nfig, ax = plt.subplots(1, figsize=(20, 20))\nax.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\nax.add_collection(lc)\nplt.title(f'{map_name} Terrorist spawn sniper shots', fontsize=20)\nplt.show()\n\ndel rays_origin\ndel rays_dest\ndel lines_formatted\ndel lc\ndel fig\ndel ax","654d09a5":"# A bit of cleanup before continuing.\ndel filtered_dust_sniper_data\ndel dust_sniper_data","0c32f039":"# If true, will run the animation process. READ THE WARNING FIRST.\ndo_animation = False\n\n# If true, will save the animation out.\nsave_animation = False","0d4922be":"from IPython.display import HTML\nfrom matplotlib import animation, rc\n\nif do_animation:\n    # Filter out a particular round.\n    round_data = dust_data.loc[dust_data['round'] == 1]\n\n    # How many encounters to show at the same time?\n    window_size = 100\n    # How many sliding windows will we have?\n    window_count = len(round_data) - window_size\n\n    # Create and configure the figure.\n    fig, ax = plt.subplots(1, figsize=(10, 10))\n    title = ax.text(0.5, 0.95, 'ayyy lmao', bbox={'facecolor': 'w', 'alpha': 0.5, 'pad': 5}, transform=ax.transAxes, ha='center')\n    image = ax.imshow(plt.imread(f'..\/input\/csgofixed\/{map_name}.png'))\n    attack_scatter = ax.scatter([], [], alpha=1.0, c='blue')\n    victim_scatter = ax.scatter([], [], alpha=1.0, c='red', marker='x')\n\n    # Animation.\n    def update(i):\n        attack_subset = list(zip(round_data['AttackPosX'][i:i+window_size], round_data['AttackPosY'][i:i+window_size]))\n        attack_scatter.set_offsets(attack_subset)\n\n        victim_subset = list(zip(round_data['VictimPosX'][i:i+window_size], round_data['VictimPosY'][i:i+window_size]))\n        victim_scatter.set_offsets(victim_subset)\n\n        title.set_text(f'{map_name} Attacks & Victims {i} -> {i+window_size}')\n\n        return (title,)\n\n    anim = animation.FuncAnimation(fig, update, interval=20, frames=window_count, blit=True)","6775001d":"# Export out the video into a HTML video.\nif do_animation:\n    HTML(anim.to_html5_video())","d4d50e66":"if do_animation and save_animation:\n    writer_ffmpeg = animation.writers['ffmpeg']\n    writer = writer_ffmpeg(fps=15, bitrate=1800)\n    anim.save('anim.mp4', writer=writer)","c29a39d5":"What about for pistols?  Gotta get that ONE DEAG!  According to the numbers, apparently not.  That said, the head here is proportionally larger than expected, so it's definitely attempted more!","7eb724ac":"Let's instead plot many subplots per map.\n\nKeep in mind that all axes here are unique - we cannot compare horizontally.  A quick eyeball shows that terrorists lose more often on `de_dust` but win more often on the revised `de_dust2`.  That said, the former has significantly less samples.  Overall, maps with plenty of samples seem to be relatively well balanced.  Some have terrorists just win by count, but others have counter terrorists do the same.  With more data and motives, we could of course dig into this in more detail per map.","1bd8bb7c":"We can always of course confirm our suspicions by masking out particular coordinates for either attack or victim positions and plotting both.  This way, for example, we could get all samples around the window at bomb site B an confirm where the hits are landing.  We could also further split this by Terrorists vs. Counter Terrorists to see if each team take advantage of different spots.  I'll leave this as an exercise to the reader.\n\nBelow I've split the data where attackers are in the Terrorist spawn (roughly).  We can clearly see that indeed players shoot from the Terrorist spawn through the middle lane where victims meet their demise.\n\nWe could of course delve deeper into this per weapon, per map, per team, per round type, and so on, if we wanted to do better analysis of common gameplay.  This kind of analysis is used in game design to check areas of maps that need improvement during development and refinement.","dcd964a9":"Below, both attackers and victims are plotted on separate graphs.  We can see from the darker regions on the maps that there are obvious choke points, which is how the map is designed.  Discussion applies to both maps as they are almost identical in hotspots.\n\nStarting on the left, the tunnels (upper) are a clear designed choke point which provide access to bomb site B from T spawn.  This is one of the main access points and has very little in the way of free movement; it's a risky move going through the tunnel, hence the vast number of encounters.  Similarly, the lower tunnels has a choke point on some stairs which provide very little in the way of visibility and require a risky exposure to get a proper line of sight.  Within bomb site B, the common hiding spots (back plat, big box, window) are all also dense.  Once the bomb is planted, it is common for people to hold out here in defense, or vice versa waiting for the bomb to be brought.  Similarly, the doors to B are quite dense.  This is the second entrance to the bomb site but it also has obscured vision due to the angled doors which makes it risky to peek.  The story is similar to the tunnels - once you become offensive there, you are exposed, and it is one of the main points of access.\n\nMoving onto the center of the map, the mid doors and its surrounding area are also dense.  The doors hold a similar purpose to those just described - they are a primary yet blind method of crossing the map.  Interestingly, the part above the mid doors is relatively full, too.  If we move south from here to the Terrorist spawn, we can also see a slither of dense blue.  This is a common sniper position to directly hit the doors and beyond, which likely explains the spread of encounters above the mid doors.  We can split by weapon later to confirm this.\n\nMoving to the right, the long doors hold the same situation as the previous two doors - they are a main port of entry to both sides and provide a restricted view which means exposing yourself to proceed.  Because of this, moving up is risky and encounters are frequent.  Slightly to the right just above the pit is a dense corner.  This, in my experience, is either for Terrorists pushing to A to plant the bomb, or Counter Terrorists pushing to A to defuse the bomb after being mislead to other areas of the map.  The corner is dense because, like the doors, it provides little in the way of cover and requires exposing your player fully to proceed.  In comparison, people north of this position at the ramp do have limited but more cover.  Finally, we can look at the density around the a plat (quad), which has density surrounding crates which people use as cover just like the back plat, big box, and window in bomb site B.\n\nI could go on, but let's save some words!","a66e4169":"### Preprocessing\nThe coordinates we have need translating into the coordinate frame of the specific map they are for.  Let's preprocess everything now, per map, to save time.\n\nUnfortunately, the data provided only has 7 maps worth of data, but we have more maps.  [This repository](https:\/\/github.com\/akiver\/CSGO-Demos-Manager\/tree\/376cc90eb49425050b351bc933940480f6d48075\/Core\/Models\/Maps) has more maps and the coordinates match.  However, only two of their maps can be used.  We are still missing c`cs_agency`, `de_dust`, `de_austria`, `cs_assault`, `de_thrill`, `de_blackgold`, `cs_insertion`, `cs_office`, `de_shipped`, `de_canals`, and `de_aztec`!","410b53c0":"Let's now look at the stats per map.  Unfortunately the wins per map differ so greatly (popular maps, it seems) that a combined bar chart is almost unreadable.","a2894a0f":"## Animations!\nJust for fun, I'm going to take a single demo file and animate the attack points over time.  With some proper refinement, this could be a valuable game design debugging tool, too, as we could see how and where encounters appear throughout many matches visually.  If we had access to more player data, we could also plot their positions.\n\nThe documentation I managed to find for an older version of this dataset says that `tick` is the game state at which the event took place, where in competitive play, 64 states are recorded per second.  Alternatively, `seconds` are a converted format in seconds since the match started.  I'll probably go with seconds.\n\nThe idea here is to take all encounters over a given time period and plot them as time progresses.  Ideally I'd like to plot this per second or so, but looking at the data, the seconds and ticks are a bit oddly formatted.  Instead, I'm just going to use a generic sliding window across the data.","d2d097f2":"This table is for stats per game.  The killer here is that there is not a single row for each round per game, but many, many rows.  This means there's a lot of duplicate information.  If the grouping is applied and the first row taken (i.e., all but one of the duplicate rows for a given group combination are dropped), then all repeated data throughout a given round for a given game can be extracted.","c4c20152":"## Which guns are most popular?\nLet's next check out which weapon is most popular overall.  Perhaps we can look at the per-map details, too.  I was considering pulling in the stats of the weapons to see if any trends could be found between the most popular weapons, but I don't have the data from the time these games were played and it is constantly tweaked.\n\nSince we're dealing with total weapon usage, we can just sum up all occurrences of each weapon.  We do see in the list below pretty much what I expected - AK47 and M4A4\/M4A1 topping the charts.  This is not surprising because the are the goto assault rifles for the Terrorists and Counter Terrorists respectively.  We already know that terrorists win slightly more often.  If we combine both M4 variations, the AK47 still reigns supreme with 78,504 extra entries.  It's unlikely that Terrorists shoot *this much* more than Counter Terrorists.  More likely is that Counter Terrorists pickup and keep Terrorist weapons.\n\nFinally, let's pay tribute to those 10 poor souls that were killed by a Decoy.","ff978ebd":"## Which body parts are hit most often?\nSticking with our weapons theme, which parts of the body (i.e., the hit boxes) are hit the most often?  How does this differ per weapon type?  I'm not interested in a statistical test here, but a high-level observation.\n\nAgain, let's start with overall stats.  Given that the chest and stomach supposedly the largest of the hit boxes and the fact that it's safer to shoot than trying for a headshot, it makes sense that these values are dominant.  The upper body in particular makes sense as you want to be aiming around the head, but adjusting for the fact that you may miss!  Aiming more so for the chest is a safer way to play.","d0cc1be9":"## Which side wins most often?\nLet's begin by answering which team wins most often.\n\nAs we can see here, terrorists come out on top over all games, but not by much.","668c64fd":"## Common imports","a438b4d4":"I won't be using the following image for analysis, but it demonstrates how the positions can be combined to draw rays from the attacking position to victim position.","70f94fbd":"### Hotspots overall\nLet's begin with a high-level plot of overall positions of attack and victim positions.\n\nFor reference, [here](https:\/\/steamcommunity.com\/sharedfiles\/filedetails\/?id=157442340) is an image of the de_dust2 callouts.\n\n<img src=\"..\/input\/csgofixed\/de_dust2_callouts.png\" width=50% \/>","33b88ebb":"As mentioned, I believe that the density around the Terrorist spawn and just above mid doors is because of long-distance sniping.  Let's filter out the weapons to plot only sniper shots and see if the densities still remain.\n\nAs you can see below, the Terrorist spawn and mid section are respectively filled with attack positions and victim positions respectively.  This shows that there is a clear line of sight that players who spawn (or happen to be around) the Terrorist spawn abuse.  I've seen matches where everybody storms the door to get wiped out by a set of sniper rounds from the Terrorist spawn.\n\nWhile we're here, it's worth having a look at the other choke points.  Those that stand out are the window for bomb site B, where attackers perch themselves to defend the door entrance (which again likely contributes to the density in the mid section).  Similarly, the corner near the pit has a lot of attack positions.  Based on the density and parallelism of the red victim blob around the long doors, it would be safe to say that this corner is used to snipe victims coming through the doorway.  In comparison to our corner earlier which was obviously used to hide behind to avoid the long straight, this corner is used in reverse, exposing oneself to the long A stretch knowing enemies are likely at the doorway instead.","39c43b20":"Let's now explore the same information per-map.  I won't be plotting them for now in Python, but I can imagine some nice infographics could be made based on this information.\n\nTo no surprise, the AK47 and M4** top most of the charts.  That said, de_aztec interestingly has the MP7 as the most favored weapon, although its samples are quite low.  de_shipped has the Nova as the favored weapon, but given the close quarters, this shotgun makes sense.","41bb537e":"# CS:GO Analysis\n\n*Note: The dataset referenced here seems to have had data removed.  The 'private' dataset I'm using is just the old CSVs that are now missing.*\n\n*NOTE: This is a conversion of my [GitHub notebook](https:\/\/github.com\/KasumiL5x\/csgo-eda).  It should hopefully work the same!*\n\nIn this notebook, I'm going to be taking [this](https:\/\/www.kaggle.com\/skihikingkevin\/csgo-matchmaking-damage) great dataset and exploring some aspects of it.  For the uninitiated, Counter Strike: Global Offensive (CS:GO) is an online first-person shooter developed and published by Valve Software.  It is a strikingly popular competitive shooter with professional leagues.  This dataset contains a list of around 1400 competitive matchmaking games with at least 16 rounds played per game.  The data also includes official top-down map images and various coordinates, which makes for potentially interesting plots.  The majority of the data represents a single engagement between two characters.  That is, whenever a player was hurt (even by fall damage, for instance), a record was logged.\n\nI should also clarify that I am quite a casual CS:GO player, so there won't be too much inside knowledge!\n\nAdditionally, this will be quite a casual stroll through the data; I won't dig super deep.\n\nInstead of exploring the entire dataset variable-by-variable, I have some questions I would like to answer.  To save exploring for decades to come, I will likely restrict my analysis to a map that I am familiar with.  Even then, some cross-map analysis will likely creep in, too.\n\nOne thing to keep in mind about this dataset is that is records **attacks**, not deaths, which means unless we track damage per player cumulatively per round, we cannot know if they died.  There was a discussion [here](https:\/\/www.kaggle.com\/skihikingkevin\/csgo-matchmaking-damage\/discussion\/65054) which suggested issues with the data in circumstances where bots were overtaken by players that had died, resulting in >100 damage to their health.  For simplicity, I'm going to stick with looking at the attacks rather than deaths.\n\nFirstly, the obvious questions:\n\n* Which team wins most often?\n* ~~When Counter Terrorists win, is defusing the bomb or saving hostages more common?~~ (Cannot do this as hostage data isn't present.)\n* What are the most popular weapons ~~and what are their stats (attacks, damage, etc.)~~? (Reliable stats aren't available.)\n* Which part of the body is hit most often? What about per weapon type?\n* ~~Does being on a particular side affect the win as both Terrorists or Counter Terrorists?~~ (Maybe)\n\nAnd then some more interesting questions like:\n\n* Where do attacks happen most often?  Are there any hotspots?\n* ~~Where does fall damage happen most often?~~ (Coordinates are borked, `World` type is unclear)\n* Animate attacks over time, just for fun!","6ae797de":"We can investigate this for weapons of sniper class only.  Given the required accuracy of a sniper, I'd assume that the chest will be the most common target.","154e2046":"**WARNING**\n\nThis will take a **very** long time.  If you want to test it yourself, maybe subset the first 100 entries or so using `[:100]` at the end of `round_data = ...`.","fd120fd3":"## Preprocessing\nThe format that the data comes in is a little strange.  There is an entry for each damage point taken, for each round, for each file, which means there is some redundant information.  It requires a lot of grouping and fiddling around to get any per-round or per-game information out of it without duplicates.\n\nBefore we continue, I'm going to do a little manipulation to create some nicer tables for this kind of data.","4d223c61":"## Where do attacks happen most often? Are there any hotspots?\nI'm now going to plot positions of attacks as an overlay on the maps.  To save space and time, I'm going to focus on a map I at least know vaguely well, `de_dust2`.  The idea here is to find clusters of attack points.  This could help us identify choke points and whatnot in a more complete analysis.  We could also do some things like cluster detection based on the distribution of points, but I want to keep this lightweight."}}