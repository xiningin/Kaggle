{"cell_type":{"96a8ec8f":"code","46265799":"code","a246222d":"code","8a724687":"code","be43e902":"code","5830e7ca":"code","c15eb258":"code","e4839c59":"code","b1314ead":"code","5a73e42f":"code","22e93b61":"code","89f0e2ab":"code","2fadcff2":"code","4d0d5ca7":"code","50e93113":"markdown","0c0cc3fc":"markdown","352d5f7c":"markdown","bb2503cd":"markdown","b9d95e00":"markdown","2b4a4f1e":"markdown"},"source":{"96a8ec8f":"import warnings\nwarnings.filterwarnings('ignore')\nimport os\nimport gc\nimport pickle\nimport numpy as np\nimport pandas as pd\nimport random as rn\nimport matplotlib.pyplot as plt\n\nfrom tqdm import tqdm\nfrom datetime import datetime, timedelta","46265799":"test = pd.read_csv('..\/input\/ashrae-energy-prediction\/test.csv', index_col=0, parse_dates = ['timestamp'])\nbuilding = pd.read_csv('..\/input\/ashrae-energy-prediction\/building_metadata.csv', usecols=['site_id', 'building_id'])","a246222d":"test = test.merge(building, left_on = \"building_id\", right_on = \"building_id\", how = \"left\")\nt = test[['building_id', 'meter', 'timestamp']]\nt['row_id'] = t.index","8a724687":"submission_base = pd.read_csv('..\/input\/ashrae-half-and-half\/submission.csv', index_col=0)","be43e902":"submission = submission_base.copy()","5830e7ca":"site_0 = pd.read_csv('..\/input\/new-ucf-starter-kernel\/submission_ucf_replaced.csv', index_col=0)\nsubmission.loc[test[test['site_id']==0].index, 'meter_reading'] = site_0['meter_reading']\ndel site_0\ngc.collect()","c15eb258":"with open('..\/usr\/lib\/ucl_data_leakage_episode_2\/site1.pkl', 'rb') as f:\n    site_1 = pickle.load(f)\nsite_1 = site_1[site_1['timestamp'].dt.year > 2016]","e4839c59":"site_1 = site_1.merge(t, left_on = ['building_id', 'meter', 'timestamp'], right_on = ['building_id', 'meter', 'timestamp'], how = \"left\")\nsite_1 = site_1[['meter_reading_scraped', 'row_id']].set_index('row_id').dropna()\nsubmission.loc[site_1.index, 'meter_reading'] = site_1['meter_reading_scraped']\ndel site_1\ngc.collect()","b1314ead":"site_2 = pd.read_csv('..\/input\/asu-buildings-energy-consumption\/asu_2016-2018.csv', parse_dates = ['timestamp'])\nsite_2 = site_2[site_2['timestamp'].dt.year > 2016]","5a73e42f":"site_2 = site_2.merge(t, left_on = ['building_id', 'meter', 'timestamp'], right_on = ['building_id', 'meter', 'timestamp'], how = \"left\")\nsite_2 = site_2[['meter_reading', 'row_id']].set_index('row_id').dropna()\nsubmission.loc[site_2.index, 'meter_reading'] = site_2['meter_reading']\ndel site_2\ngc.collect()","22e93b61":"site_4 = pd.read_csv('..\/input\/ucb-data-leakage-site-4\/site4.csv', parse_dates = ['timestamp'])\nsite_4.columns = ['building_id', 'timestamp', 'meter_reading']\nsite_4['meter'] = 0\nsite_4['timestamp'] = pd.DatetimeIndex(site_4['timestamp']) + timedelta(hours=-8)\nsite_4 = site_4[site_4['timestamp'].dt.year > 2016]","89f0e2ab":"site_4 = site_4.merge(t, left_on = ['building_id', 'meter', 'timestamp'], right_on = ['building_id', 'meter', 'timestamp'], how = \"left\")\nsite_4 = site_4[['meter_reading', 'row_id']].dropna().set_index('row_id')\nsubmission.loc[site_4.index, 'meter_reading'] = site_4['meter_reading']\ndel site_4\ngc.collect()","2fadcff2":"submission.to_csv('submission.csv')","4d0d5ca7":"submission.describe()","50e93113":"* Site 2\n\nThanks to [@pdnartreb](https:\/\/www.kaggle.com\/pdnartreb) and his great dataset.\n\nhttps:\/\/www.kaggle.com\/pdnartreb\/asu-buildings-energy-consumption","0c0cc3fc":"**Warning !**\nThis is just a test of leaked data. \n\nSince @sohier said:\n> We will ensure that any meter readings that can be publicly downloaded are not included in the private set.\n\nhttps:\/\/www.kaggle.com\/c\/ashrae-energy-prediction\/discussion\/117357\n\nThere is nothing about the private LB. You can replce the 'submission_base' with your own one. \nIf everyone use this snippet, **maybe it can make public LB some useful.**","352d5f7c":"* Site 1\n\nThanks to [@mpware](https:\/\/www.kaggle.com\/mpware) and his great kernel.\n\nhttps:\/\/www.kaggle.com\/mpware\/ucl-data-leakage-episode-2\n","bb2503cd":"* Site 4\n\nThanks to [@serengil](https:\/\/www.kaggle.com\/serengil) and his great kernel.\n\nhttps:\/\/www.kaggle.com\/serengil\/ucb-data-leakage-site-4","b9d95e00":"I used a public kernel from [@rohanrao](https:\/\/www.kaggle.com\/rohanrao) as example.\n\nhttps:\/\/www.kaggle.com\/rohanrao\/ashrae-half-and-half\n\n**Replace this part with yours.**","2b4a4f1e":"* Site 0\n\nThanks to [@yamsam](https:\/\/www.kaggle.com\/yamsam\/) and his great kernel.\n\nhttps:\/\/www.kaggle.com\/yamsam\/new-ucf-starter-kernel"}}