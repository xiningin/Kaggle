{"cell_type":{"e15c19e3":"code","85ac6557":"code","11569263":"code","b50029b6":"code","0f7dfc69":"code","c735b0ea":"code","9bbe71de":"code","1d9b5bb9":"code","fed47cbe":"code","56fd3adb":"code","60a64d9a":"code","a7b77778":"code","599101af":"code","77cbed05":"code","6dc2aa81":"code","729407ca":"code","005d0599":"code","dece31c9":"code","b5b26c7a":"code","d1b98e84":"code","42ae9f90":"code","7870975f":"code","f566a344":"code","3ffc5325":"code","41f72c9f":"code","7f85e6d0":"code","21066944":"code","4b1f6706":"code","eff8660b":"code","ea20959f":"code","d830b5b3":"code","1cb2228f":"code","bb33a9af":"code","9c56659e":"code","ab02b68f":"code","7a3d9c84":"code","c2f1900a":"code","a033172c":"code","49bbea21":"code","5c0d564d":"code","fa18c5a7":"code","7e440c65":"code","a9105991":"code","3510ed9f":"code","319f3be6":"code","1dd63b71":"code","690d1ae8":"code","73050801":"markdown","89392253":"markdown","e6e16780":"markdown","95c1660d":"markdown","1e6c4992":"markdown","3c013437":"markdown","c4e84d4f":"markdown"},"source":{"e15c19e3":"import pandas as pd\nfrom datetime import datetime as dt\nimport re\nimport numpy as np","85ac6557":"jobs = pd.read_csv('\/kaggle\/input\/data-jobs-listings-glassdoor\/glassdoor.csv', parse_dates=['job.discoverDate'])\njobs.head(5)","11569263":"jobs.shape","b50029b6":"jobs.columns","0f7dfc69":"best_columns = jobs[['gaTrackerData.empName', 'gaTrackerData.jobTitle', 'map.country', 'gaTrackerData.location', 'header.sponsored', 'job.description', 'job.discoverDate', 'salary.salaries', 'overview.industry', 'overview.sector', 'overview.revenue', 'salary.country.currency.currencyCode']]\n\ndel jobs\n\nbest_columns.head(5)","c735b0ea":"best_columns = best_columns.dropna(subset=['map.country'])\n#best_columns.head(10)","9bbe71de":"countries = pd.read_csv('\/kaggle\/input\/data-jobs-listings-glassdoor\/country_names_2_digit_codes.csv')\ncountries.head(5)","1d9b5bb9":"## Transforming the countries' name\n\ndict_countries = countries.to_dict('records')\nfor country in dict_countries:\n  best_columns = best_columns.replace(to_replace={'map.country':country['Code']}, value={'map.country':country['Name']})\n\nbest_columns.head(10)","fed47cbe":"# Getting the countries that I want\ncountries_iwant = ['Italy', 'United States', 'Austria', 'Canada', 'Portugal', 'United Kingdom', 'Switzerland', 'Estonia', 'Germany', 'Netherlands', 'Ireland', 'Spain']","56fd3adb":"main_df = best_columns[best_columns['map.country'].isin(countries_iwant)]\n\ndel best_columns\ndel countries\n\nmain_df.head(10)","60a64d9a":"main_df['day'] = main_df['job.discoverDate'].dt.day\nmain_df['month'] = main_df['job.discoverDate'].dt.month\nmain_df = main_df.drop(['job.discoverDate'], axis='columns')\nmain_df.head(5)","a7b77778":"main_df.shape","599101af":"# Function to search and select only the data scientist jobs\n# With this function you can look for any job that you want, using RegEx.\n\ndef search_job(job_title):\n  re_expression = '(?<=data.)(scientist)'\n  job_title = str(job_title)\n  job_title = job_title.lower()\n  is_the_job = re.search(re_expression, job_title)\n  if is_the_job:\n    return True\n  else:\n    return False","77cbed05":"main_df = main_df[main_df['gaTrackerData.jobTitle'].apply(search_job)==True]\nmain_df.head(10)","6dc2aa81":"main_df.shape","729407ca":"main_df.dtypes","005d0599":"import seaborn as sb\nimport matplotlib.pyplot as plt\n\nsb.set_style('dark')\nsb.set_context('paper')","dece31c9":"# About the countries\nplt.figure(figsize=(20,10))\nsb.countplot(x='map.country', data=main_df)","b5b26c7a":"# About the job's sectors\nplt.figure(figsize=(20,10))\ncount_sector = sb.countplot(x='overview.sector', data=main_df, palette='muted')\nfor tick in count_sector.get_xticklabels():\n  tick.set_rotation(55)\ncount_sector.set_xlabel('Comapany Sector')","d1b98e84":"# Working with the time variable\nplt.figure(figsize=(20,10))\nsb.countplot(y='month' , data=main_df, hue='map.country')","42ae9f90":"# How many currencies are described the salaries?\n\nmain_df['salary.country.currency.currencyCode'].unique()","7870975f":"s_salaries = pd.read_csv('\/kaggle\/input\/data-jobs-listings-glassdoor\/glassdoor_salary_salaries.csv')\ns_salaries.head(10)","f566a344":"new_main_df = pd.merge(main_df, s_salaries, how='left', left_on='salary.salaries', right_on='id')\n\nnew_main_df = new_main_df.dropna(subset=['salary.salaries'])\n\nnew_main_df.head(10)","3ffc5325":"new_main_df['salary.salaries.val.payPeriod'].unique()","41f72c9f":"annual_s = new_main_df[new_main_df['salary.salaries.val.payPeriod'] == 'ANNUAL']\n\nmonthly_s = new_main_df[new_main_df['salary.salaries.val.payPeriod'] == 'MONTHLY']\n\nhourly_s = new_main_df[new_main_df['salary.salaries.val.payPeriod'] == 'HOURLY']\n\nprint('Annual dataset size: ', annual_s.shape)\nprint('Monthly dataset size: ', monthly_s.shape)\nprint('Hourly dataset size: ', hourly_s.shape)","7f85e6d0":"f, (ax1, ax2, ax3) = plt.subplots(3, 1, figsize=(18, 8), sharex=True)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=annual_s, palette='vlag', orient='h', ax=ax1)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=annual_s, size=2, color=\".3\", linewidth=0, ax=ax1)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=annual_s, palette='vlag', orient='h', ax=ax2)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=annual_s, size=2, color=\".3\", linewidth=0, ax=ax2)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=annual_s, palette='vlag', orient='h', ax=ax3)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=annual_s, size=2, color=\".3\", linewidth=0, ax=ax3)","21066944":"# Removing outliers\n\nan_10 = annual_s['salary.salaries.val.salaryPercentileMap.payPercentile10']\nannual_10 = an_10.between(an_10.quantile(.05), an_10.quantile(.95))\n\n# Here I'm getting the index rows where the value it's True and True means outlier\nindex_names_10 = annual_s[~annual_10].index\n\n# Droping the values where index it's True\nannual_p10_no_outliers = annual_s.drop(index_names_10, axis=0, inplace=False)","4b1f6706":"an_50 = annual_s['salary.salaries.val.salaryPercentileMap.payPercentile50']\nannual_50 = an_50.between(an_50.quantile(.05), an_50.quantile(.95))\n\nindex_names_50 = annual_s[~annual_50].index\n\nannual_p50_no_outliers = annual_s.drop(index_names_50, axis=0, inplace=False)","eff8660b":"an_90 = annual_s['salary.salaries.val.salaryPercentileMap.payPercentile90']\nannual_90 = an_90.between(an_90.quantile(.05), an_90.quantile(.95))\n\nindex_names_90 = annual_s[~annual_90].index\n\nannual_p90_no_outliers = annual_s.drop(index_names_90, axis=0, inplace=False)","ea20959f":"f, (ax1, ax2, ax3) = plt.subplots(3, 1, figsize=(18, 8), sharex=True)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=annual_p10_no_outliers, palette='vlag', orient='h', ax=ax1)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=annual_p10_no_outliers, size=2, color=\".3\", linewidth=0, ax=ax1)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=annual_p50_no_outliers, palette='vlag', orient='h', ax=ax2)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=annual_p50_no_outliers, size=2, color=\".3\", linewidth=0, ax=ax2)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=annual_p90_no_outliers, palette='vlag', orient='h', ax=ax3)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=annual_p90_no_outliers, size=2, color=\".3\", linewidth=0, ax=ax3)","d830b5b3":"f, (ax1, ax2, ax3) = plt.subplots(3, 1, figsize=(18, 8), sharex=True)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=monthly_s, palette='vlag', orient='h', ax=ax1)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=monthly_s, size=2, color=\".3\", linewidth=0, ax=ax1)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=monthly_s, palette='vlag', orient='h', ax=ax2)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=monthly_s, size=2, color=\".3\", linewidth=0, ax=ax2)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=monthly_s, palette='vlag', orient='h', ax=ax3)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=monthly_s, size=2, color=\".3\", linewidth=0, ax=ax3)","1cb2228f":"f, (ax1, ax2, ax3) = plt.subplots(3, 1, figsize=(18, 8), sharex=True)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=hourly_s, palette='vlag', orient='h', ax=ax1)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile10', y='map.country', data=hourly_s, size=2, color=\".3\", linewidth=0, ax=ax1)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=hourly_s, palette='vlag', orient='h', ax=ax2)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile50', y='map.country', data=hourly_s, size=2, color=\".3\", linewidth=0, ax=ax2)\n\nsb.boxplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=hourly_s, palette='vlag', orient='h', ax=ax3)\nsb.swarmplot(x='salary.salaries.val.salaryPercentileMap.payPercentile90', y='map.country', data=hourly_s, size=2, color=\".3\", linewidth=0, ax=ax3)","bb33a9af":"!pip install langdetect\nfrom langdetect import detect\n\n!pip install unidecode\nimport unidecode","9c56659e":"def replace_html(text):\n  re_expression = '(<\\w+>|<\/\\w+>|\\\\n|<\\w+\/>|&quot;|&egrave|http\\S+|[-|0-9]|\\*|,|;|&)'\n  clean_text = re.sub(re_expression, ' ', text)\n  ready_text = unidecode.unidecode(clean_text.lower())\n  return ready_text","ab02b68f":"new_main_df['job.description'] = new_main_df['job.description'].map(replace_html)\nnew_main_df.head(5)","7a3d9c84":"# Separating the jobs by language\n\nnew_main_df['language'] = new_main_df['job.description'].apply(detect)\nnew_main_df.head(10)","c2f1900a":"new_main_df['language'].unique()","a033172c":"italian_df = new_main_df[new_main_df['language'].isin(['it'])]\nenglish_df = new_main_df[new_main_df['language'].isin(['en'])]\ngerman_df = new_main_df[new_main_df['language'].isin(['de'])]\nspanish_df = new_main_df[new_main_df['language'].isin(['es'])]\nnetherlands_df = new_main_df[new_main_df['language'].isin(['nl'])]\nfrance_df = new_main_df[new_main_df['language'].isin(['fr'])]\nportuguese_df = new_main_df[new_main_df['language'].isin(['pt'])]","49bbea21":"# Dataset size by language\n\nprint('Italian dataset size: ', italian_df.shape)\nprint('English dataset size: ', english_df.shape)\nprint('German dataset size: ', german_df.shape)\nprint('Spanish dataset size: ', spanish_df.shape)\nprint('Portuguese dataset size: ', portuguese_df.shape)","5c0d564d":"# Function to put together all descriptions\n\ndef aggregate_strings(dataframe_series):\n  big_string = ''\n  for text in dataframe_series:\n    big_string += text + ' '\n  return big_string","fa18c5a7":"# Putting together all descriptions by language\n\nenglish_descs = aggregate_strings(english_df['job.description'])\nitalian_descs = aggregate_strings(italian_df['job.description'])\ngerman_descs = aggregate_strings(german_df['job.description'])\nspanish_descs = aggregate_strings(spanish_df['job.description'])\nportuguese_descs = aggregate_strings(portuguese_df['job.description'])","7e440c65":"# Packages to figure out the most used words on jobs descriptions\n\nimport nltk\nnltk.download('stopwords')\nnltk.download('punkt')\nfrom string import punctuation\nfrom wordcloud import WordCloud","a9105991":"# Portuguese WordCloud\n\nportuguese_stopwords = set(nltk.corpus.stopwords.words('portuguese') + list(punctuation))\nportuguese_wordcloud = WordCloud(max_words=100, stopwords=portuguese_stopwords, width=800, height=400).generate(portuguese_descs)\n\nplt.figure(figsize=(20,10))\nplt.imshow(portuguese_wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","3510ed9f":"# English WordCloud\n\nenglish_stopwords = set(nltk.corpus.stopwords.words('english') + list(punctuation))\nenglish_wordcloud = WordCloud(max_words=100, stopwords=english_stopwords, width=800, height=400).generate(english_descs)\n\nplt.figure(figsize=(20,10))\nplt.imshow(english_wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","319f3be6":"# Italian WordCloud\n\nitalian_stopwords = set(nltk.corpus.stopwords.words('italian') + list(punctuation))\nitalian_wordcloud = WordCloud(max_words=100, stopwords=italian_stopwords, width=800, height=400).generate(italian_descs)\n\nplt.figure(figsize=(20,10))\nplt.imshow(italian_wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","1dd63b71":"# Spanish WordCloud\n\nspanish_stopwords = set(nltk.corpus.stopwords.words('spanish') + list(punctuation))\nspanish_wordcloud = WordCloud(max_words=100, stopwords=spanish_stopwords, width=800, height=400).generate(spanish_descs)\n\nplt.figure(figsize=(20,10))\nplt.imshow(spanish_wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","690d1ae8":"# German WordCloud\n\ngerman_stopwords = set(nltk.corpus.stopwords.words('german') + list(punctuation))\ngerman_wordcloud = WordCloud(max_words=100, stopwords=german_stopwords, width=800, height=400).generate(german_descs)\n\nplt.figure(figsize=(20,10))\nplt.imshow(german_wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","73050801":"**Viewing the data**","89392253":"# **Text Mining**","e6e16780":"**Hourly Salaries Analysis**","95c1660d":"**Salaries**\n\nHere we gonna join the salary dataset with the main job glassdoor dataset.","1e6c4992":"**Monthly Salaries Analysis**","3c013437":"**Job Analaysis**\n\nThis data analysis aim to figure out the most important skills for companies that are looking for new talents on data area.\n\n[Dataset used on this work.](https:\/\/www.kaggle.com\/andresionek\/data-jobs-listings-glassdoor)","c4e84d4f":"**Annual Salaries Analysis**"}}