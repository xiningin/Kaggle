{"cell_type":{"12f16dfd":"code","6b2ceb32":"code","47b3b423":"code","99621572":"code","c4197ed1":"code","8b8d3291":"code","ec6daa3c":"code","ba3667c1":"code","93bc45b7":"code","707f971b":"code","10a13afd":"code","3e04a812":"code","d764859c":"code","3d5cb8d2":"code","a586f45d":"code","d17bcfe6":"code","25bbf5d0":"code","7619f163":"code","b0722d3a":"code","d3f0f878":"code","4bfea6ff":"code","15344fda":"code","bffd6cdc":"code","8d28f3b3":"code","7d3abf3e":"code","74249d1b":"code","3ac62cdc":"code","94917a86":"code","497880f4":"code","bf8a7d17":"code","c0b5249c":"code","c37ca826":"code","f1f9bc3b":"code","d0682ec4":"code","e0ea4931":"code","82bda155":"code","fd0af954":"markdown","22b1ca2f":"markdown","30cd0d80":"markdown","0e03f541":"markdown","af7f6f97":"markdown","872a8b91":"markdown","14c4d312":"markdown","5ec30fbb":"markdown","84449d98":"markdown","86309cea":"markdown","8048475b":"markdown","0981feec":"markdown","74bcb9cc":"markdown","82c283b7":"markdown","799088be":"markdown","f8a969ac":"markdown","c5da2683":"markdown","cd1507a9":"markdown","9a414d50":"markdown","738f22cd":"markdown","20a7183c":"markdown","04c44a04":"markdown","a6996d7a":"markdown","42207576":"markdown","693fecf3":"markdown","a3bdb278":"markdown","771b8796":"markdown"},"source":{"12f16dfd":"## Pandas is a Python package providing fast, flexible, and expressive data structures designed to make working with \u201crelational\u201d or \u201clabeled\u201d data both easy and intuitive. It aims to be the fundamental high-level building block for doing practical, real world data analysis in Python.\nimport pandas as pd\n## Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python scripts, the Python and IPython shells, the Jupyter notebook, web application servers, and four graphical user interface toolkits.\nimport matplotlib.pyplot as plt\n## `%matplotlib` is a magic function in IPython. With this, the output of plotting commands is displayed inline within frontends like the Jupyter notebook, directly below the code cell that produced it. The resulting plots will then also be stored in the notebook document.\n%matplotlib inline\n## Seaborn is a Python data visualization library based on matplotlib. It provides a high-level interface for drawing attractive and informative statistical graphics.\nimport seaborn as sns\nimport numpy as np\nprint(\"Setup Complete\")","6b2ceb32":"# Set up code checking\n## The checking code and notebooks used in Kaggle Learn courses.\nfrom learntools.core import binder\nbinder.bind(globals())\nfrom learntools.data_viz_to_coder.ex7 import *\nprint(\"Setup Complete\")","47b3b423":"# Check for a dataset with a CSV file\nstep_1.check()","99621572":"# Specify the path of the CSV file to read\nmy_filepath = '..\/input\/smart-home-dataset-with-weather-information\/HomeC.csv'\n# Check for a valid filepath to a CSV file in a dataset\nstep_2.check()","c4197ed1":"# Read the data file into a variable my_data\n## pandas.read_csv: Read a comma-separated values (csv) file into DataFrame.\nmy_data = pd.read_csv(my_filepath  ,   parse_dates=True)\nmy_data.info()","8b8d3291":"# Remove the type of data is object in the dataset.\nhome_dat = my_data.select_dtypes(exclude=['object'])\n\n## you can convert a time from unix epoch timestamp to normal stamp using import time \n## print( ' start ' , time.strftime('%Y-%m-%d %H:%S', time.localtime(1451624400)))\n\n# Data publisher says the dataset contains the readings with a time span of 1 minute of house appliances in kW from a smart meter and weather conditions of that particular region. So, I set freq='min' and convert Uinx time to readable date.\ntime_index = pd.date_range('2016-01-01 00:00', periods=503911, freq='min')\ntime_index = pd.DatetimeIndex(time_index)\nhome_dat = home_dat.set_index(time_index)\n# Check that a dataset has been uploaded into my_data\nstep_3.check()","ec6daa3c":"# Print the first 10 rows of the data\n## pandas.DataFrame.head: This function returns the first n rows for the object based on position. It is useful for quickly testing if your object has the right type of data in it.\nhome_dat.head(10)","ba3667c1":"# Print the last 10 rows of the data\n## This function returns last n rows from the object based on position. It is useful for quickly verifying data, for example, after sorting or appending rows.\nhome_dat.tail(10)","93bc45b7":"home_dat = home_dat[0:-1] ## == dataset[0:dataset.shape[0]-1] == dataset[0:len(dataset)-1] == dataset[:-1]\nhome_dat.tail()","707f971b":"# Separate two different Attributes\nenergy_data = home_dat.filter(items=['use [kW]', 'gen [kW]', 'House overall [kW]', \n                                     'Dishwasher [kW]', 'Furnace 1 [kW]', 'Furnace 2 [kW]', \n                                     'Home office [kW]', 'Fridge [kW]', 'Wine cellar [kW]', \n                                     'Garage door [kW]', 'Kitchen 12 [kW]', 'Kitchen 14 [kW]', \n                                     'Kitchen 38 [kW]', 'Barn [kW]', 'Well [kW]',\n                                     'Microwave [kW]', 'Living room [kW]', 'Solar [kW]'])\n\nweather_data = home_dat.filter(items=['temperature','humidity', 'apparentTemperature'])","10a13afd":"# Print the first 5 rows of the energy data\nenergy_data.head()","3e04a812":"# Print the first 5 rows of the weather data\nweather_data.head()","d764859c":"# Genetate data per day\n## pandas.DataFrame.resample: Convenience method for frequency conversion and resampling of time series.\nenergy_per_day = energy_data.resample('D').sum() # for energy we use sum to calculate overall consumption in period\nenergy_per_day.head()","3d5cb8d2":"fig, axes = plt.subplots(nrows=2, ncols=1)\nenergy_per_day['use [kW]'].plot(ax=axes[0],figsize=(20,10))\nenergy_per_day['House overall [kW]'].plot(ax=axes[1],figsize=(20,10))","a586f45d":"energy_data = energy_data.drop(columns=['use [kW]'])\nenergy_per_day = energy_per_day.drop(columns=['use [kW]'])","d17bcfe6":"fig, axes = plt.subplots(nrows=2, ncols=1)\nenergy_per_day['gen [kW]'].plot(ax=axes[0],figsize=(20,10))\nenergy_per_day['Solar [kW]'].plot(ax=axes[1],figsize=(20,10))","25bbf5d0":"energy_data = energy_data.drop(columns=['gen [kW]'])\nenergy_per_day = energy_per_day.drop(columns=['gen [kW]'])","7619f163":"# Set the width and height of the figure\nplt.figure(figsize=(20,10))\n\n# Add title\nplt.title(\"Overall energy consumption per day\")\nsns.lineplot(data = energy_per_day.filter(items=['House overall [kW]']), dashes=False)","b0722d3a":"energy_per_month = energy_data.resample('M').sum()\nplt.figure(figsize=(20,10))\nplt.title(\"Overall energy consumption per month\")\nsns.lineplot(data = energy_per_month.filter(items=['House overall [kW]']), dashes=False)\n# use power == house overall\n# gen power == solar","d3f0f878":"plt.figure(figsize=(20,10))\nplt.title(\"Each appliance energy consumption per day\")\nsns.lineplot(data = energy_per_day.filter(items=['Dishwasher [kW]', 'Furnace 1 [kW]', 'Furnace 2 [kW]', \n                                     'Home office [kW]', 'Fridge [kW]', 'Wine cellar [kW]', \n                                     'Garage door [kW]', 'Kitchen 12 [kW]', 'Kitchen 14 [kW]', \n                                     'Kitchen 38 [kW]', 'Barn [kW]', 'Well [kW]',\n                                     'Microwave [kW]', 'Living room [kW]']), dashes=False)","4bfea6ff":"plt.figure(figsize=(20,10))\nplt.title(\"Each appliance energy consumption per month\")\nsns.lineplot(data = energy_per_month.filter(items=['Dishwasher [kW]', 'Furnace 1 [kW]', 'Furnace 2 [kW]', \n                                     'Home office [kW]', 'Fridge [kW]', 'Wine cellar [kW]', \n                                     'Garage door [kW]', 'Kitchen 12 [kW]', 'Kitchen 14 [kW]', \n                                     'Kitchen 38 [kW]', 'Barn [kW]', 'Well [kW]',\n                                     'Microwave [kW]', 'Living room [kW]']), dashes=False)","15344fda":"energy_per_month.head(12)","bffd6cdc":"plt.figure(figsize=(20,10))\nplt.title(\"Devices energy consumption\")\n\n# Plot the devices consumption\nsns.lineplot(data = energy_per_month.filter(items=['Dishwasher [kW]', 'Furnace 1 [kW]', 'Furnace 2 [kW]', \n                                     'Fridge [kW]', 'Garage door [kW]', 'Well [kW]',\n                                     'Microwave [kW]']), dashes=False)","8d28f3b3":"plt.figure(figsize=(20,10))\nplt.title(\"Rooms energy consumption\")\n\n# Plot the rooms consumption \nsns.lineplot(data = energy_per_month.filter(items=[      # remove the devices consumption \n                                     'Home office [kW]', 'Wine cellar [kW]', 'Kitchen 12 [kW]',\n                                     'Kitchen 14 [kW]', 'Kitchen 38 [kW]', 'Barn [kW]',\n                                      'Living room [kW]']) , dashes=False)","7d3abf3e":"plt.figure(figsize=(20,7))\nplt.title(\"Solar generation per month\")\nsns.lineplot(data = energy_per_day.filter(['Solar [kW]']).resample('M').sum(),dashes=False)","74249d1b":"plt.figure(figsize=(20,10))\nplt.title(\"Home activity in day 2016-10-4\")\nsns.lineplot(data = energy_data.loc['2016-10-04 00:00' : '2016-10-04 23:59'].filter(['Home office [kW]', \n                                     'Wine cellar [kW]', 'Kitchen 12 [kW]',\n                                     'Kitchen 14 [kW]', 'Kitchen 38 [kW]', 'Barn [kW]',\n                                     'Living room [kW]']),dashes=False)","3ac62cdc":"weather_per_day = weather_data.resample('D').mean()  # note!! (mean) # D =>> for day sample\nweather_per_day.head()","94917a86":"weather_per_month = weather_data.resample('M').mean()                # M =>> for month sample\nplt.figure(figsize=(15,5))\nplt.ylabel('\u00b0F')\nplt.title(\"Temperature mean per month\")\nsns.lineplot(data = weather_per_month.filter(items=['temperature', 'apparentTemperature']),dashes=False)","497880f4":"weather_per_month = weather_data.resample('M').mean()                # M =>> for month sample\nplt.figure(figsize=(15,5))\nplt.title(\"Humidity mean per month\")\nsns.lineplot(data = weather_per_month.filter(items=['humidity']),dashes=False)","bf8a7d17":"rooms_energy = energy_per_month.filter(items=[      # remove the devices consumption \n                                     'Home office [kW]', 'Wine cellar [kW]', 'Kitchen 12 [kW]',\n                                     'Kitchen 14 [kW]', 'Kitchen 38 [kW]', 'Barn [kW]',\n                                     'Living room [kW]']) \ndevices_energy = energy_per_month.filter(items=[    # remove the rooms consumption\n                                     'Dishwasher [kW]',\n                                     'Furnace 1 [kW]', 'Furnace 2 [kW]',  'Fridge [kW]',\n                                     'Garage door [kW]', 'Well [kW]',\n                                     'Microwave [kW]'])\n\nall_rooms_consum = rooms_energy.sum()\nall_devices_consum = devices_energy.sum()\nprint(all_rooms_consum)\nprint(all_devices_consum)","c0b5249c":"plot = all_rooms_consum.plot(kind=\"pie\", autopct='%.2f', figsize=(10,10))\nplot.set_title(\"Consumption for rooms\")\nplot.set_ylabel('%')","c37ca826":"plot = all_devices_consum.plot(kind=\"pie\", autopct='%.2f', figsize=(10,10))\nplot.set_title(\"Consumption for devices\")\nplot.set_ylabel('%')","f1f9bc3b":"sns.regplot(x = energy_per_day['Furnace 2 [kW]'], y = weather_per_day['temperature'])","d0682ec4":"sns.regplot(x = energy_per_day['Wine cellar [kW]'], y = weather_per_day['temperature'])","e0ea4931":"sns.regplot(x = energy_per_day['Fridge [kW]'], y = weather_per_day['temperature'])","82bda155":"sns.regplot(x = energy_per_day['Barn [kW]'], y = weather_per_day['temperature'])","fd0af954":"## Step 2: Specify the filepath\n\nNow that the dataset is attached to the notebook, you can find its filepath.  To do this, use the **Workspace** menu to list the set of files, and click on the CSV file you'd like to use.  This will open the CSV file in a tab below the notebook.  You can find the filepath towards the top of this new tab.  \n\n![ex6_filepath](https:\/\/i.imgur.com\/pWe0sVb.png)\n\nAfter you find the filepath corresponding to your dataset, fill it in as the value for `my_filepath` in the code cell below, and run the code cell to check that you've provided a valid filepath.  For instance, in the case of this example dataset, we would set\n```\nmy_filepath = \"..\/input\/dc-wikia-data.csv\"\n```  \nNote that **you must enclose the filepath in quotation marks**; otherwise, the code will return an error.\n\nOnce you've entered the filepath, you can close the tab below the notebook by clicking on the **[X]** at the top of the tab.","22b1ca2f":"# Data Preparation :","30cd0d80":"### As we see  the home office has the highest consumption in the home and the kitchen has the lowest consumption.","0e03f541":"Then plot the everyday data of energy.","af7f6f97":"Run the following cell to set up the feedback system.","872a8b91":"It seems `use [kW]` and `House overall [kW]` show the same data. Let's visualize these two columns.","14c4d312":"Some columns are not numerical. In this project we do not need them.","5ec30fbb":"## Step 1: Attach a dataset to the notebook\n\nBegin by selecting a CSV dataset from [Kaggle Datasets](https:\/\/www.kaggle.com\/datasets).  If you're unsure how to do this or would like to work with your own data, please revisit the instructions in the previous tutorial.\n\nOnce you have selected a dataset, click on the **[+ ADD DATASET]** option in the top right corner.  This will generate a pop-up window that you can use to search for your chosen dataset.  \n\n![ex6_search_dataset](https:\/\/i.imgur.com\/QDEKwYp.png)\n\nOnce you have found the dataset, click on the **[Add]** button to attach it to the notebook.  You can check that it was successful by looking at the **Workspace** dropdown menu to the right of the notebook -- look for an **input** folder containing a subfolder that matches the name of the dataset.\n\n![ex6_dataset_added](https:\/\/i.imgur.com\/oVlEBPx.png)\n\nYou can click on the carat to the right of the name of the dataset to double-check that it contains a CSV file.  For instance, the image below shows that the example dataset contains two CSV files: (1) **dc-wikia-data.csv**, and (2) **marvel-wikia-data.csv**.\n\n![ex6_dataset_dropdown](https:\/\/i.imgur.com\/4gpFw71.png)\n\nOnce you've uploaded a dataset with a CSV file, run the code cell below **without changes** to receive credit for your work!","84449d98":"### The furnace has the highest consumption , in devices nearly the half of devices consumption","86309cea":"#### from plot :The Solar power has the highest rate in the April - May","8048475b":"### The temprature effect on barn is weak","0981feec":"### ADD a Date Time Index to dataset to be more meaningful. \n  ####  Dataset use Unix epoch timestamps for min so I calculate the start time to generate the data time index.","74bcb9cc":"## Step 3: Load the data\n\nUse the next code cell to load data file into `my_data`.  Use the filepath that was specified in the previous step.","82c283b7":"### we can note that :  in August  and September the highest consumption in the year then the lowest consumption in July and December.","799088be":"## Step 4: Visualise the data\n\nUse the next code cell to create a figure that tells a story behind the dataset.","f8a969ac":"## Home activity in day 2016-10-4","c5da2683":"They are same. It's better to remove one of them.","cd1507a9":"They are same. It's better to remove one of them.","9a414d50":"### It can be seen from the above that the time recorded in the dataset is from 2016-01-01 00:00:00 to 2016-12-15 22:29:00.","738f22cd":"### from this plot we can see that : the home office has the highest consumption in home","20a7183c":"Similarly, it seems `gen [kW]` and `Solar [kW]` show the same data. Let's visualize these two columns.","04c44a04":"#### The relation between Furnace consumption and Temprature are invers","a6996d7a":"## Generate Data per day and month :","42207576":"We see that the last row is invalid, so let's remove it.","693fecf3":"## Setup\n### Importing the required Libraries\n\nRun the next cell to import and configure the Python libraries and set up coding environment.","a3bdb278":"> Here are the `rule`s you can use:\n- B         business day frequency\n- C         custom business day frequency (experimental)\n- D         calendar day frequency\n- W         weekly frequency\n- M         month end frequency\n- SM        semi-month end frequency (15th and end of month)\n- BM        business month end frequency\n- CBM       custom business month end frequency\n- MS        month start frequency\n- SMS       semi-month start frequency (1st and 15th)\n- BMS       business month start frequency\n- CBMS      custom business month start frequency\n- Q         quarter end frequency\n- BQ        business quarter endfrequency\n- QS        quarter start frequency\n- BQS       business quarter start frequency\n- A         year end frequency\n- BA, BY    business year end frequency\n- AS, YS    year start frequency\n- BAS, BYS  business year start frequency\n- BH        business hour frequency\n- H         hourly frequency\n- T, min    minutely frequency\n- S         secondly frequency\n- L, ms     milliseconds\n- U, us     microseconds\n- N         nanoseconds","771b8796":"### The relation between temprature and Fridge consumption (Strong dependant)"}}