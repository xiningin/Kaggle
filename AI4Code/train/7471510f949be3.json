{"cell_type":{"191df2dd":"code","bfa5e8f7":"code","77e1a4b1":"code","1ad52f8a":"code","5672e769":"code","cc1ba449":"code","a6107e47":"code","5dc788c2":"code","140cae8b":"code","d0b55358":"code","2699a701":"code","db4e69c2":"code","d9d157a5":"markdown","62cb5578":"markdown"},"source":{"191df2dd":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pathlib import Path","bfa5e8f7":"TRAIN_DIR = Path('..\/input\/mlb-pdef-train-dataset')\ntargets = pd.read_pickle(TRAIN_DIR \/ 'nextDayPlayerEngagement_train.pkl')","77e1a4b1":"sns.set_context(\"paper\", font_scale=1.5)  ","1ad52f8a":"targets.head()","5672e769":"targets_agg_df = targets.groupby('playerId')['target1', 'target2', 'target3', 'target4'].agg(['sum']).reset_index()\ntargets_agg_df.columns = [\n'_'.join(col).rstrip('_') for col in targets_agg_df.columns.values\n]","cc1ba449":"targets_agg_df.head()","a6107e47":"targets_agg_df['target1_decile'] = pd.qcut(targets_agg_df.target1_sum, 10, labels = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], duplicates = 'drop')\ntargets_agg_df['target2_decile'] = pd.qcut(targets_agg_df.target2_sum, 10, labels = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], duplicates = 'drop')\ntargets_agg_df['target3_decile'] = pd.qcut(targets_agg_df.target3_sum, 10, labels = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], duplicates = 'drop')\ntargets_agg_df['target4_decile'] = pd.qcut(targets_agg_df.target4_sum, 10, labels = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], duplicates = 'drop')","5dc788c2":"plt.figure(figsize = (8, 8))\nsns.heatmap(pd.crosstab(targets_agg_df['target1_decile'], targets_agg_df['target2_decile']),\n            cmap=\"Blues\",\n            annot=True,\n            cbar=False,\n            fmt='g',\n            square=True)\nplt.suptitle(\"Target1 decile vs Target2 decile\", fontsize = 15);","140cae8b":"plt.figure(figsize = (8, 8))\nsns.heatmap(pd.crosstab(targets_agg_df['target2_decile'], targets_agg_df['target3_decile']),\n            cmap=\"Blues\",\n            annot=True,\n            cbar=False,\n            fmt='g',\n            square=True)\nplt.suptitle(\"Target2 decile vs Target3 decile\", fontsize = 15);","d0b55358":"plt.figure(figsize = (8, 8))\nsns.heatmap(pd.crosstab(targets_agg_df['target3_decile'], targets_agg_df['target4_decile']),\n            cmap=\"Blues\",\n            annot=True,\n            cbar=False,\n            fmt='g',\n            square=True)\nplt.suptitle(\"Target3 decile vs Target4 decile\", fontsize = 15);","2699a701":"plt.figure(figsize = (8, 8))\nsns.heatmap(pd.crosstab(targets_agg_df['target2_decile'], targets_agg_df['target4_decile']),\n            cmap=\"Blues\",\n            annot=True,\n            cbar=False,\n            fmt='g',\n            square=True)\nplt.suptitle(\"Target2 decile vs Target4 decile\", fontsize = 15);","db4e69c2":"plt.figure(figsize = (8, 8))\nsns.heatmap(pd.crosstab(targets_agg_df['target1_decile'], targets_agg_df['target4_decile']),\n            cmap=\"Blues\",\n            annot=True,\n            cbar=False,\n            fmt='g',\n            square=True)\nplt.suptitle(\"Target1 decile vs Target4 decile\", fontsize = 15);","d9d157a5":"### From the above cross tables, we can see that players who are falling in higher bins of one target (e.g. target1) are falling into higher bins of another target (e.g. target2). With a few exceptions.","62cb5578":"### Short notebook to analyse if targets are correlated"}}