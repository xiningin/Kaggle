{"cell_type":{"f8cab380":"code","e1f8d7ae":"code","75a6ca19":"code","bd0b0a49":"code","92efba19":"code","5a0c7351":"code","fb27e8b8":"code","a3fed95a":"code","e9fb2caf":"code","f9c0e140":"code","34f9e14a":"code","6cbce57c":"code","415e75e4":"code","c0107976":"code","3109bfbc":"code","51c2cf45":"code","25453fc8":"code","4e5079c9":"code","f6f56bbb":"code","8552b480":"code","4c1b6501":"code","8f52199d":"code","188fab27":"code","c0bd9d6e":"markdown","707eb8a9":"markdown","471c0232":"markdown","e409f762":"markdown","b724011a":"markdown","560b1a08":"markdown","f91d1f00":"markdown","037a4097":"markdown","52feb7ee":"markdown","853c8f68":"markdown","bda27803":"markdown","c39710b7":"markdown","fc54dd0b":"markdown","3a9b49c4":"markdown","8c24c3d1":"markdown","758483b9":"markdown","7f153837":"markdown","535b71fa":"markdown","6b821ab7":"markdown","ab2387dd":"markdown","025b4fdf":"markdown","59aaa6e8":"markdown"},"source":{"f8cab380":"#Data manipulation\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n#Data visualisation\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n#Import the data\nplayers = pd.read_csv('..\/input\/data.csv')","e1f8d7ae":"#5 first lines of the dataframe\nplayers.head()","75a6ca19":"#Some info about the features of the dataframe\nplayers.info()","bd0b0a49":"#A quick look to some interesting features\nplayers.loc[:, ['ID', 'Name', 'Position', 'Overall', 'ST', 'CB']].head()","92efba19":"#Still info.. (for float and integer features)\nplayers.describe()","5a0c7351":"#Check if there are good correlations between features among the dataset\n\nplt.figure(figsize= (25, 16))\nhm=sns.heatmap(players.loc[:,['Crossing','Finishing', 'HeadingAccuracy', \n                          'ShortPassing', 'Volleys', 'Dribbling', 'Curve',\n                          'FKAccuracy', 'LongPassing', 'BallControl', \n                          'Acceleration', 'SprintSpeed', 'Agility', 'Reactions', \n                          'Balance', 'ShotPower', 'Jumping', 'Stamina', \n                          'Strength', 'LongShots', 'Aggression',\n                          'Interceptions', 'Positioning', 'Vision', \n                          'Penalties', 'Composure', 'Marking', 'StandingTackle', \n                          'SlidingTackle', 'Overall']].corr(), annot = True, linewidths=.5, cmap='Reds')\nhm.set_title(label='Heatmap of dataset', fontsize=20)\nhm;","fb27e8b8":"#We want to clean the notes given for a player for each position\n\nposition_attributes = ['RWB','LWB','RCB','CB', 'LCB', 'LB', 'RB','RM',  'RAM',\n                       'RDM', 'RCM', 'LDM', 'LCM', 'CM', 'CDM', 'CAM','LM', \n                       'LAM', 'RW', 'RS', 'RF','LW', 'LS', 'LF','ST', 'CF']\n\ndef change_overall(position) :\n    new_position = []\n    for elt in position :\n        if  isinstance(elt, float) :\n            new_position.append(elt)\n        else : \n            new_position.append(float(elt.split('+')[0])+float(elt.split('+')[1]))\n    return new_position\n\n#Rewrite the interesting columns\nfor elt in position_attributes :\n    \n    players[elt] = players[elt].fillna(0.0) #If the value for a given player & position is missing,\n                                            #it means that the player (GK) cannot play at this position\n                                            #We attribute to these positions the value 0 to fill our dataframes\n    players[elt] = change_overall(players[elt])\n\n    \n#Check the dataframe  \nplayers.loc[:, ['ID', 'Name', 'Position', 'Overall', 'ST', 'CB']].head()","a3fed95a":"#Top 5 strikers in FIFA19\nplayers.loc[:,['Name','Overall','ST']].sort_values(by='ST', ascending=False).head()","e9fb2caf":"#Top 5 left-wing backs\nplayers.loc[:,['Name','Overall','LWB']].sort_values(by='LWB', ascending=False).head()","f9c0e140":"#Top characteristics for a centre-back\n\nplayer_characteristics = ['Crossing','Finishing', 'HeadingAccuracy', \n                          'ShortPassing', 'Volleys', 'Dribbling', 'Curve',\n                          'FKAccuracy', 'LongPassing', 'BallControl', \n                          'Acceleration', 'SprintSpeed', 'Agility', 'Reactions', \n                          'Balance', 'ShotPower', 'Jumping', 'Stamina', \n                          'Strength', 'LongShots', 'Aggression',\n                          'Interceptions', 'Positioning', 'Vision', \n                          'Penalties', 'Composure', 'Marking', 'StandingTackle', \n                          'SlidingTackle']\n\ncorr_matrix = players.corr()\n\ncorr_matrix.loc[player_characteristics, 'CB'].sort_values(ascending=False).head()","34f9e14a":"#Top characteristics for a striker\n\ncorr_matrix.loc[player_characteristics, 'ST'].sort_values(ascending=False).head()","6cbce57c":"#For which position sprintspeed is the most important\n\ncorr_matrix.loc[position_attributes, 'SprintSpeed'].sort_values(ascending=False).head()","415e75e4":"#We select the Ligue 1 clubs\nLigue1_Conforama_Clubs = ['Paris Saint-Germain', \n                          'Olympique de Marseille',\n                          'Stade Malherbe Caen', \n                          'FC Nantes',\n                          'Olympique Lyonnais',\n                          'AS Saint-\u00c9tienne',\n                          'AS Monaco',\n                          'OGC Nice',\n                          'Toulouse Football Club',\n                          'Montpellier HSC',\n                          'FC Girondins de Bordeaux',\n                          'Stade Rennais FC',\n                          'RC Strasbourg Alsace',\n                          'Amiens SC',\n                          'En Avant de Guingamp',\n                          'LOSC Lille',\n                          'Angers SCO',\n                          'Dijon FCO',\n                          'N\u00eemes Olympique',\n                          'Stade de Reims',\n                          ]\nLigue1_Conforama_Clubs.sort()\n\n#We creae a new dataframe with only Ligue 1 players\ndf_ligue1 = players[players.Club.isin(Ligue1_Conforama_Clubs)].sort_values(by='Club')","c0107976":"#Number of players for each Ligue 1 Club\ndf_ligue1.groupby(by='Club')['ID'].count().sort_values(ascending=False)","3109bfbc":"#Check the values of the clubs\n\n#The value of each player has to be converted to an integer\ndef value_to_int(df_value):\n    try:\n        value = float(df_value[1:-1])\n        suffix = df_value[-1:]\n        if suffix == 'M':\n            value = value * 1000000\n        elif suffix == 'K':\n            value = value * 1000\n    except ValueError:\n        value = 0\n    return value\n\nplayers['Value_float'] = players['Value'].apply(value_to_int)\ndf_ligue1['Value_float'] = df_ligue1['Value'].apply(value_to_int)\n\n# Comparison between values and overalls\nplt.figure(figsize=(20,10))\nvalue = players.Value_float\nax = sns.regplot(x = 'Overall', y = value \/ 10000000, fit_reg = False, data = players);\nax.set_title(label='Comparison between values and overalls');\nplt.ylabel('Value (10M)')","51c2cf45":"#Cumulate value of the players for each Ligue 1 club\ndf_ligue1.groupby(by='Club')['Value_float'].sum().sort_values(ascending=False)","25453fc8":"#We compare the Ligue 1 clubs and their players overall\n\nplt.figure(figsize = (10,5))\nax = sns.boxplot(x=df_ligue1['Club'], y=df_ligue1['Overall'], palette='hls');\nax.set_title(label='Distribution Overall in Ligue 1 clubs', fontsize=20);\nplt.xlabel('Club', fontsize=20)\nplt.ylabel('Overall', fontsize=20)\nplt.xticks(rotation = 90)\nplt.ylim(45, 95)","4e5079c9":"#Explore the FC Nantes team\n\ndf_fcnantes = df_ligue1[df_ligue1.Club == 'FC Nantes']\ndf_fcnantes.loc[:, ['Name', 'Position', 'Club', 'Overall']].sort_values(by=['Overall', 'Name'], \n                                                                        ascending=[False, True])","f6f56bbb":"#Positions in the team\n\nplt.figure(figsize = (12,10))\n\nplt.subplot(211)\nsns.countplot(x = 'Position', data = df_fcnantes, palette = 'hls', order=position_attributes);\nplt.title('Count of players by prefered position', fontsize=20);\nplt.xlabel('Prefered position')\n\nplt.subplot(212, label='Rating of FC Nantes players by position')\nsns.boxplot(data=df_fcnantes[position_attributes], palette='hls', order=position_attributes);\nplt.title('Rating of FC Nantes players by position', fontsize=20);\nplt.xlabel('Position')\nplt.ylabel('Rating')","8552b480":"#Looking for LWs and RWs that FC Nantes can recruit for 8M\u20ac\n\n#We plot the 5 best LW that are less 8M value \nplayers.loc[:,['Name', \n               'Overall',\n               'LW', \n               'RW', \n               'Value_float']][players.Value_float < 8000000].sort_values(by=['LW', \n                                                                              'Value_float'], ascending=[False, True]).head()","4c1b6501":"#Top characteristics for a left winger\ncorr_matrix.loc[player_characteristics, 'LW'].sort_values(ascending=False).head()","8f52199d":"#Defining a LW Score\nplayers['LW_score'] = players[player_characteristics].dot(corr_matrix.loc[player_characteristics, 'LW'])\n\nplayers.loc[:,['Name', \n               'Overall',\n               'LW', \n               'LW_score', \n               'Value_float']][players.Value_float < 8000000].sort_values(by=\n                                                                  ['LW_score', \n                                                                   'Value_float'], ascending=[False, True]).head()","188fab27":"players.loc[:,['Name', \n               'Overall',\n               'LW', \n               'LW_score',\n               'Age',\n               'Value_float', \n               'Potential']][players.Value_float < 8000000].sort_values(by=\n                                                                  ['Age',\n                                                                   'LW_score'], ascending=[True, False]).head()","c0bd9d6e":"**Study of the rates**\n\n\nWe want to use these rates given by FIFA for a given player and position. So, I rewrite the corresponding features.","707eb8a9":"Here I just plot the comparison between player values and ther overalls, that I find very interesting. A way of following the project could be to build a model to determine their value given their characteristics.","471c0232":"For those who have never played FIFA 19 and tested the Fifa Ultimate Team Mode, here are some explanations about the mode, which will help to understand how the dataframe is built.\n\nFifa Ultimate Team is the most common online mode in Fifa. In fact, in this mode, you are not playing with real teams but with your own-made team.\n\nTo make a good team to compete online, you have to respect some rules :\n- Choose good players (of course) ;\n- Respect the prefered position of each player when you are building your tactics ;\n- Try making collective links between neighbour players (when 2 players play in the same league or club, or if they share their nationality).\n\n![](https:\/\/images.ecosia.org\/jAe1FWSlvFHZ3je5iAdFMTZl88M=\/0x390\/smart\/https%3A%2F%2Fimage.redbull.com%2Frbcom%2F052%2F2017-09-19%2Fd97d07f4-55e0-4ee8-80a1-8511ece84190%2F0010%2F1%2F1600%2F1067%2F1%2Ffifa-18-fut-teams.jpg)\n\n\nFinally with these rules, each player in your team gets a 'collective' rate that will improve or not his characteristics. On the following image, you can see the different player positions in FIFA 19 :\n\n![](https:\/\/images.ecosia.org\/zJQLt5BIWX1Bt4-sfR7RukYgdjE=\/0x390\/smart\/https%3A%2F%2Fwww.fifauteam.com%2Fwp-content%2Fuploads%2F2017%2F01%2FA1150-3b.jpg)\n","e409f762":"Knowing this, let's see what we have in our dataframe.\n\n\n\n\n\n**Quick look on the dataframe and its characteristics**","b724011a":"I wanted to do also a research by characteristics to discover other players in the dataframe that might be interesting : ","560b1a08":"We get some surprising results. Kant\u00e9 as a midfielder, is the second best LWB in the game (careful, he is the second LWB if he gets the maximum collective rate which is not that easy to get because Kant\u00e9 is totally off-position).\n\n*70% of the earth is covered by water, the rest is covered by N'Golo Kant\u00e9*\n\nIn fact, we don't know exactly how the rating for each position is exactly done. If the Overall rate was strongly correlated with Reactions and Composure, let's see the main rules for each position.\n","f91d1f00":"With these 2 graphs, we can see the weak positions in the team. For example, FC Nantes seems to have a big problem on the wings ('LM', 'RM', 'LW', 'RW'). So we will look for a good recruit for the team !\n\nA.Limbomb\u00e9 has been recruited for 8M\u20ac during summer 2018, becoming the most expansive player in the history of FC Nantes. He mostly plays on the wings, which makes the recruitment of the club questionnable because the level on theses positions remains weak.\n\nWas Limbomb\u00e9 the best choice to join FC Nantes ?","037a4097":"Finally, I wanted to check for young players with potential.\nI didn't use the potential feature because it doesn't give info about the position.","52feb7ee":"**To conclude : **\n\nThis dataframe offers a lot of possibilities and I think we explored a tiny part of it.\n\nHere are some ideas to continue the game :\n- Work more on the overall and the position ratings ; \n- Build a prediction model for players value ; \n- Build a prediction model for players potential (work on several versions of FIFA ?).\n\n\nLong live the FC Nantes !","853c8f68":"Now this is done, we can easily classify the players with their rates for each position :","bda27803":"If PSG is well beyond other clubs in terms of level, we can see that Nantes is in the second half of the classification. Even though, the level in the club is quite homogeneous.","c39710b7":"Geubbels, who has joined Lyon last summer, seems very promising !","fc54dd0b":"We can see here that Cristiano Ronaldo and Messi are not very good at defending..\nI won't focus on goalkeepers in my study because they are not rating at all on the positions on the field (even if they have all the characteristics).","3a9b49c4":"According to game data, Dani Alves would have been the best choice for FC Nantes (even if theses aren't his prefered positions !). P.Tau could have joined freely as well..","8c24c3d1":"**FC Nantes : best team in France ?**","758483b9":"Here we plot a first simplificated correlation matrix of the dataframe.\nSome interesting correlations with Overall for example could be observed, particularly with Reactions and Composure.\nWe can also see that Sprint Speed and Acceleration are strongly correlated, which seems quite logical.\n\nAs I say before, other projects have already studied more precisely these aspects of the dataset.","7f153837":"As you can see in the dataframe, each player has a prefered position ('Position') and a global rate ('Overall'). But each player has also a rate given for each position registered in FIFA19 ('ST', 'LW', ...). The method to rate for each position will be a very interesting thing to study in the project.\n\nThe rate for each position has a specific format : 'Note+CollectiveBonus'. If the player gets the maximum collective rate in your team, he will have the bonus points indicated.","535b71fa":"Some new players appear in the wishing list, but Dani Alves remains on top ! I would have wanted to do the study without players Value but with their Release Clause because clubs often sell their players more expansive than they really are. Unfortunately, the Release Clause wasn't complete enough.","6b821ab7":"In order to compare the characteristics of each club, it was very important to know the size of each team. It seems that Nantes has already a lot of players ! Maybe the team has some valuable players to sell...","ab2387dd":"Indeed, we can sell some valuable players with no doubt! Let's now compare the overalls of the Ligue 1 teams : ","025b4fdf":"Even if we don't have the exact rule to rate each player on a given position, we can see that the rules remain logical : a centre-ack has good tackling skills, a striker is good at positionning, quick players are put on the sides...\n\nIf we know all this, why not try scouting with FIFA ? I will take FC Nantes as an example : the latest results of the team seem to show that the squad is not strong enough.","59aaa6e8":"**Let's find the FIFA 19 golden nuggets!**\n\nSource: https:\/\/www.kaggle.com\/karangadiya\/fifa19\n        \nAs a football and FC Nantes fan, I found really interesting to explore this dataset and its possibilities.\nFeel free to comment the kernel and to share with me your opinion about the work :)\n\nI'm focusing here on the scouting that we can do the data. Some great global analysis have already been made by other people on Kaggle.\nHere are some interesting works on the same dataset :\n- https:\/\/www.kaggle.com\/dczerniawko\/fifa19-analysis\n- https:\/\/www.kaggle.com\/kushal1996\/fifa-19-analysis-dream-team"}}