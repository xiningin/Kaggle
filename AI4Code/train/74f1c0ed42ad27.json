{"cell_type":{"7c30d1e5":"code","f4c28bf7":"code","e8d7a492":"code","142b8a08":"code","5dba56a8":"code","37e70971":"code","6e45517c":"code","23a2cdb2":"code","da9a678a":"code","4bb0e7a9":"code","c754494b":"code","d0a1a4b5":"code","cf5dcf7b":"code","f46e5b2f":"code","5bd9a8df":"code","bc909fdb":"code","a40741f1":"code","68d69851":"code","fa3d64b9":"code","0dc2b5c4":"code","f0416102":"code","4999055e":"code","478af1ad":"code","d29a1625":"code","f975cffa":"code","cb520cce":"code","3108b7ab":"code","11975234":"code","3283f8f6":"code","32493ae8":"code","b8a9b86c":"markdown","29adca50":"markdown","e6f12cd5":"markdown","7dd9827a":"markdown","923cb126":"markdown","8be3bb2a":"markdown","6de1dbe8":"markdown","0a5eb803":"markdown","8384e172":"markdown","827956ff":"markdown","5c014832":"markdown","2c531c4c":"markdown","a6fc785e":"markdown","c33de7fe":"markdown","0d84b829":"markdown","a522ef3a":"markdown","3a7b73f9":"markdown"},"source":{"7c30d1e5":"import warnings\ndef warn(*arg, **kwarg):\n    pass\nwarnings.warn = warn\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\nimport glob\nimport json\nfrom IPython.display import Image","f4c28bf7":"import py2neo\nfrom py2neo import Graph\nimport jgraph as IGraph\nfrom IPython.display import Image\nfrom IPython.core.display import HTML \n\nimport numpy as np\nimport pandas as pd\n\n# Other\nimport re\nimport string\n\n# NLTK\nimport nltk\nfrom nltk.corpus import stopwords\nfrom nltk.stem import SnowballStemmer\n\n## Plot\nimport plotly.offline as py\nimport plotly.graph_objs as go\npy.init_notebook_mode(connected=True)\nimport matplotlib as plt","e8d7a492":"root_path = '.\/CORD-19-research-challenge'\nmetadata_path = f'{root_path}\/all_sources_metadata_2020-03-13.csv'","142b8a08":"metadata_path","5dba56a8":"meta_df = pd.read_csv(metadata_path, dtype={\n    'pubmed_id': str,\n    'Microsoft Academic Paper ID': str, \n    'doi': str\n})\nmeta_df.head(3)","37e70971":"meta_df.shape","6e45517c":"all_json = glob.glob(f'{root_path}\/**\/*.json', recursive=True)\nlen(all_json)","23a2cdb2":"class FileReader:\n    def __init__(self, file_path):\n        with open(file_path) as file:\n            content = json.load(file)\n            self.paper_id = content['paper_id']\n            self.abstract = []\n            self.body_text = []\n            self.title = content['metadata']['title']\n            # Abstract\n            for entry in content['abstract']:\n                self.abstract.append(entry['text'])\n            # Body text\n            for entry in content['body_text']:\n                self.body_text.append(entry['text'])\n            self.abstract = '\\n'.join(self.abstract)\n            self.body_text = '\\n'.join(self.body_text)\n\n    def __repr__(self):\n        return f'{self.paper_id}: {self.title}: {self.abstract[:200]}... {self.body_text[:200]}...'\nfirst_row = FileReader(all_json[0])\nprint(first_row)","da9a678a":"dict_ = {'paper_id': [], 'title': [], 'abstract': [], 'body_text': []}\nfor idx, entry in enumerate(all_json):\n    if idx % (len(all_json) \/\/ 10) == 0:\n        print(f'Processing index: {idx} of {len(all_json)}')\n    content = FileReader(entry)\n    dict_['paper_id'].append(content.paper_id)\n    dict_['title'].append(content.title)\n    dict_['abstract'].append(content.abstract)\n    dict_['body_text'].append(content.body_text)\ndf_covid = pd.DataFrame(dict_, columns=['paper_id', 'title', 'abstract', 'body_text'])","4bb0e7a9":"df_covid.head()\ndf_covid.shape","c754494b":"df_covid.drop_duplicates(['title'], inplace=True)\ndf_covid.drop_duplicates(['abstract'], inplace=True)\ndf_covid.drop_duplicates(['body_text'], inplace=True)","d0a1a4b5":"print(f'Title: {df_covid[\"title\"].nunique()}, Abstract: {df_covid[\"abstract\"].nunique()}, Body: {df_covid[\"body_text\"].nunique()}')","cf5dcf7b":"def lower_case(input_str):\n    input_str = input_str.lower()\n    return input_str\n\ndf_covid['title'] = df_covid['title'].apply(lambda x: lower_case(x))\ndf_covid['body_text'] = df_covid['body_text'].apply(lambda x: lower_case(x))\ndf_covid['abstract'] = df_covid['abstract'].apply(lambda x: lower_case(x))","f46e5b2f":"def regexReplcae(text):\n    text = re.sub(r\"\\\"\", \" \", text)\n    text = re.sub(r\"(\\\"?\\')(\\w)\", \" \\2\", text)\n    text = re.sub(r\"\\?\", \" .\", text)\n    text = re.sub(r\",\", \"\", text)\n    text = re.sub(r\"\\.\\s?\", \" SEP.SEP \", text)\n    text = re.sub(r\"!\", \".\", text)\n    text = re.sub(r\":\", \"\", text)\n    text = re.sub(r\"\\s?\\;\\s?\", \"\", text)\n    text = re.sub(r\"\\\/\", \" \", text)\n    text = re.sub(r\"\\^\", \" ^ \", text)\n    text = re.sub(r\"\\(\", \"\", text)\n    text = re.sub(r\"\\)\", \"\", text)\n    text = re.sub(r\"&\", \" \", text)\n    text = re.sub(r\"([A-z])\\-([A-z])\", r\"\\1 \\2\", text)\n    text = re.sub(r\"viruses\", \"virus\", text)\n    text = re.sub(r\"proteins\", \"protein\", text)\n    text = re.sub(r\"genes\", \"gene\", text)\n    text = re.sub(r\"pathogens\", \"pathogen\", text)\n    text = re.sub(r\"cells\", \"cell\", text)\n    text = re.sub(r\"drugs\", \"drug\", text)\n    text = re.sub(r\"vaccines\", \"vaccine\", text)\n    text = re.sub(r\"vaccination\", \"vaccine\", text)\n    text = re.sub(r\"genomes\", \"gene\", text)\n    text = re.sub(r\"genotypes\", \"genotype\", text)\n    text = re.sub(r\"diseases\", \"disease\", text)\n    text = re.sub(r\"pathogenesis\", \"pathogen\", text)\n    text = re.sub(r\"pathogeneis\", \"pathogen\", text)\n    text = re.sub(r\"pathogenic\", \"pathogen\", text)\n    text = re.sub(r\"infections\", \"infection\", text)\n    text = re.sub(r\"infected\", \"infection\", text)\n    text = re.sub(r\"antibodies\", \"antibody\", text)\n    text = re.sub(r\"zikv\", \"zikavirus\", text)\n    text = re.sub(r\"zika\", \"zikavirus\", text)\n    text = re.sub(r\"bats\", \"bat\", text)\n    text = re.sub(r\"dogs\", \"dog\", text)\n    text = re.sub(r\"cats\", \"cat\", text)\n    text = re.sub(r\"sequences\", \"sequence\", text)\n    text = re.sub(r\"experiments\", \"experiment\", text)\n    text = re.sub(r\"sequencing\", \"sequence\", text)\n    text = re.sub(r\"author\\s?\", \"\", text)\n    text = re.sub(r\"corresponding\\s?\", \"\", text)\n    text = re.sub(r\"inhibited\", \"inhibit\", text)\n    text = re.sub(r\"inhibitor\", \"inhibit\", text)\n    text = re.sub(r\"adults\", \"adult\", text)   \n    text = re.sub(r\"interactions\", \"interaction\", text)\n    text = re.sub(r\"[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}\", \" \", text)\n    return text","5bd9a8df":"all_text = ' '.join(df_covid['abstract'])\nall_text = regexReplcae(all_text)","bc909fdb":"allWords = nltk.tokenize.word_tokenize(all_text)\nallWordDist = nltk.FreqDist(w.lower() for w in allWords)","a40741f1":"freq_df = pd.DataFrame(allWordDist.items()).rename(columns = {0:'word', 1: 'count'})\nfreq_df.sort_values(by = ['count'], ascending = False, inplace= True)","68d69851":"freq_df[freq_df['count'] <= 1].count()","fa3d64b9":"freq_df.shape","0dc2b5c4":"import matplotlib.pyplot as plt\nplt.hist(freq_df[freq_df['count'] >400]['count'], bins = 100, density=False);","f0416102":"print(f'Stop words from histogram: {len(list(freq_df[freq_df[\"count\"]  >= 400][\"word\"]))}')","4999055e":"from stopwords_list import stopwords_list\nupdated_stopwords = list(set(stopwords.words(\"english\")).union(set(stopwords_list)))\nprint(f'Total number of stopwords: {len(updated_stopwords)}')","478af1ad":"def clean_text(text):\n    text = regexReplcae(text)\n    text = text.lower().split()\n    text = [w for w in text if w not in updated_stopwords  and len(w) > 2]\n    aa = nltk.pos_tag(text)\n    text = [pair[0] for pair in aa if pair[1] == 'NNS' or pair[1] == 'NN' or pair[1] == 'NNP' or pair[1] == 'NNPS' or  pair[1] == 'CC' or pair[1] == 'RB' or pair[1] == 'sep.sep']\n    text = \" \".join(text)\n    text = re.sub(r\"\\s?sep\\.sep\\s?\", \". \", text)\n    \n    if text is None:\n        return na\n    else:\n        return text","d29a1625":"df_covid['processed_title'] = df_covid['title'].map(lambda x: clean_text(x))\ndf_covid['processed_abstract'] = df_covid['abstract'].map(lambda x: clean_text(x))","f975cffa":"CREATE_MODEL = '''\nCREATE \n  (`0` :Word ) ,\n  (`1` :Word ) ,\n  (`0`)-[:`NEXT_WORD` ]->(`1`)\n'''\n\nDELETE_EXISTING_DATA = '''MATCH (n) DETACH DELETE n'''\nCREATE_WORD_CONSTRAINT = '''CREATE CONSTRAINT ON (W:Word) ASSERT W.name IS UNIQUE;'''\n\nINSERT_DATA = '''\nWITH split($sentence, \" \") as words\nunwind range(0,size(words)-2) as idx\n\nMERGE (w1:Word {name: words[idx]})\n  ON CREATE SET w1.count = 1 ON MATCH SET w1.count =  1 + w1.count\n\nMERGE (w2:Word {name: words[idx+1]})\n  ON CREATE SET w2.count = 1 ON MATCH SET w2.count =  1 + (case when idx = size(words)-2 then 1 else 0 end)\n\nMERGE (w1)-[NW: NEXT_WORD]->(w2)\n  ON CREATE SET NW.count = 1 ON MATCH SET NW.count = 1 + NW.count\n'''","cb520cce":"graph = Graph(\"bolt:\/\/localhost:7687\", auth = (\"neo4j\", 'sabber251188'))","3108b7ab":"graph.delete_all()\ngraph.run(DELETE_EXISTING_DATA)\ngraph.run(CREATE_MODEL)\ngraph.run(CREATE_WORD_CONSTRAINT)","11975234":"for lines in df_covid['processed_abstract']:\n    aa = lines.split('.')\n    for sentence in aa:\n        if sentence != \"\":\n            graph.run(INSERT_DATA, parameters = {'sentence': sentence.strip()})","3283f8f6":"DELETE_EMPTY_NODE = \"\"\"\nMATCH (n { name:\"\" })\nDETACH DELETE n\n\"\"\"\ngraph.run(DELETE_EMPTY_NODE)","32493ae8":"MATCH path = (:Word)-[:NEXT_WORD]->(:Word)\nwith collect(path) as paths\ncall apoc.gephi.add(null,'workspace1', paths) yield nodes, relationships, time\nreturn *","b8a9b86c":"For more details, read the manuscript of this work: https:\/\/arxiv.org\/abs\/2004.02085. <br>\nFor graph and associated data: https:\/\/github.com\/msahamed\/covid19-text-network <br>\n\nIf you have any more questions, please reach out to us:<br>\nSabber Ahamed (sabbers@gmail.com), Manar Samad (msamad@tnstate.edu)","29adca50":"#### Drug subgraph\nA long list of drugs have appeared in the literature, including Chloroquine. Several antiviral drugs such as 'Verdinexor', 'Oseltamivir', 'Amantadine', 'Pranobex' are found in the $drug$ subgraph: \n\nSeveral other relevant categories of drugs that appear in the subgraph are:\n<li> drugs for cancer treatment (Gemcitabine, Berenil, Daunorubicin, Tanespimycin) <\/li>\n<li> anti-fungal drug (Amphotericin), antibiotics (Paromomycin, Carbapenem, Betalactam) <\/li>\n<li> immunosuppressive drugs (Mizoribine, Cyclosporin) <\/li>\n<li> drugs for malaria (Amodiaquine) <\/li>\n<li> Hepatitis C virus treatment (boceprevir) <\/li>\n\n<br>\nMany chemical and organic compounds, proteins, and enzymes are mentioned in the literature that may have important pharmaceutical properties. Plants (Clerodendrum), plant-based organic compounds (Resveratrol, Glycyrrhizin), and medicine derived from plants (Phytomedicines, Phytochemicals, Phytoconstituents) have appeared in the literature. Bat coronavirus (BTCOV) appears on the list as well. Interestingly, 'Chikungunya', 'Monkeypox', 'Dengue', and 'Tuberculosis' appeared both in the subgraphs of $drug$ and $transmission$. The pathogens of these diseases may have useful links to the study of drug and transmission of coronavirus. \n<br>\n<br>\n![drug_BC.jpg](attachment:drug_BC.jpg)","e6f12cd5":"#### Export to Gephi","7dd9827a":"#### Transmission subgraph\nThe subgraph reveals several host-pathogen interactions. Animal hosts such as poultry, camel, dogs, pigs, monkeys, chimpanzees may be candidates for studying the transmission mechanism of different zoonotic pathogens related coronavirus. \n\nDifferent diseases are also found in this subgraph: dengue, tuberculosis, adenovirus, malaria, measles, and hand-foot-and-mouth disease (HFMD). These pathogens may have new traits in common with the transmission of coronavirus. Keywords such as multi-drug resistant organism (MDRO), tropism (the growth or movement of organisms), zoonosis (the topic of disease transmission from animals to humans), sanitization, bioaerosols have expectedly appeared in the subgraph of transmission topic. Additionally, the subgraph includes words related to different transmission media such as blood, respiratory, lung, water, aerosol, oronasal, gut, mouth, trachea, glands, droplet, saliva, airborne, and semen.\n\n![transmission_BC.jpg](attachment:transmission_BC.jpg)","923cb126":"### More details","8be3bb2a":"## Information Mining for COVID-19 Research From a Large Volume of Scientific Literature\n\n<center>Sabber Ahamed (sabbers@gmail.com), Manar Samad (msamad@tnstate.edu)<\/center>\n<br>\n\nIn this project, we developed a graph-based model using abstracts of 10,683 scientific articles to find key information on three topics: transmission, drug types, and genome research related to coronavirus. A subgraph is built for each of the three topics to extract topic-focused information. Within each subgraph, we use a betweenness centrality to rank the importance of keywords. The results reveal intriguing information about <b>antiviral drugs<\/b> (Chloroquine, Amantadine, Dexamethasone), <b>pathogen-hosts<\/b> (pigs, bats, macaque,  cynomolgus), <b>viral pathogens<\/b> (zika, dengue, malaria, and several viruses in the coronaviridae virus family), and <b>proteins and therapeutic mechanisms<\/b> (oligonucleotide, interferon, glycoprotein) in connection with the core topic of coronavirus. The categorical summary of these keywords and topics may be a useful reference to expedite and recommend new and alternative directions for COVID-19 research.\n\n### Graph\nThe project repository (https:\/\/github.com\/msahamed\/covid19-text-network) contains all the graph files (.gephi and .gexf). \nYou need to install Gephi to visualize the network.\n\n<li> covid19_abstract.geph is the graph network of all the available abstracts. <\\li>\n<li>covid19_abstract.gexf is the graph meta data of all the abstracts.<\\li>\n<li> covid19_title.geph is the graph network of all the titles of 29K articles.<\\li>\n<li> covid19_title.gexf is the graph meta data of all the titles of 29K articles.<\\li>\n\n### Paper:\nThe manuscript associated with work can be found on here: https:\/\/arxiv.org\/abs\/2004.02085.","6de1dbe8":"### Import all the necessary library","0a5eb803":"### Remove the duplicates","8384e172":"### Update stopwords","827956ff":"## <b> Data Processing<b>","5c014832":"#### Gene subgraph\nThe list includes Hepatitis viruses (HCV, HBV, HEV), influenza viruses (H1N1, H5N1, H7N9, PR8), other viruses related to Dengue (Denv), Chikungunya (CHIKV), HIV, zikavirus, and malaria. Many of these viruses can share similar genomic structure and replication strategy that can be repurposed in the pathogenic study and drug discovery of novel virus strains such as COV-2.\nCoronaviruses related to pigs, such as porcine epidemic diarrhea virus (PEDV), porcine hemagglutinating encephalomyelitis virus (PHEV), mouse hepatitis virus (MHV), feline infectious peritonitis (FIP) virus, mice originated human coronavirus (HKU1), alpha- and Betacoronaviruses (mainly infect bats) appear in the subgraph as they belong to the same $coronaviridae$ virus family. \n<br>\n<br>\n![gene_BC.jpg](attachment:gene_BC.jpg)","2c531c4c":"### Reading raw json files","a6fc785e":"#### Export Data to Ne04j","c33de7fe":"##### Cypher codes for Neo4J","0d84b829":"### Data modeling for text\nWe develop a directed graph $G(N, E)$ that is represented by a set of nodes $N$ and a set of edges $E$ with directions. Each node $n \\in N$ represents a unique word. A directed edge $e \\in E$ connects two adjacent words based on their positioning in a sentence. An edge point from the preceding word to the succeeding word in a sentence, as shown in the figure below.\n<br>\n![network_model.jpg](attachment:network_model.jpg)","a522ef3a":"### Clean text","3a7b73f9":"### Analysis\nThe proposed graph model is developed using all available article abstracts in the dataset. We assume that an abstract has succinct and sufficient information to represent the overall content of a research article. From the global graph, we find three important keywords $transmission$, $drug$, and $gene$ based on their betweenness centrality values and are relevant to coronavirus. Next, we create three subgraphs using neighboring words of the selected words shown in the Figure below. Within each subgraph, neighboring nodes are expected to reveal a variety of information about the topic word. The neighboring words are further grouped into several categories. Within each category, we rank the neighboring words using subgraph betweenness centrality.  All of the keywords and their different categories are shown in the following subsections. \n\n![subgraph_model.jpg](attachment:subgraph_model.jpg)"}}