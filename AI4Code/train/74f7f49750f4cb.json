{"cell_type":{"bc99309c":"code","c7d0191b":"code","ccbd5393":"code","f3d58d7a":"code","790fa829":"code","f890e94d":"code","95763264":"code","59385bd5":"code","5fd84739":"code","50864415":"code","bd1d0fa5":"code","68c5481b":"code","baca6d57":"code","0318dd6b":"code","a8154f85":"code","df732ae7":"code","66a2e3bc":"code","cdf7e327":"code","4e8b1557":"code","8b94fbc9":"code","5081d9d3":"code","e3bdff32":"code","407a336b":"markdown","bd818802":"markdown","c904cdaa":"markdown","342f04e4":"markdown","e27697bc":"markdown","b9468ef8":"markdown","e5a76cc6":"markdown","1f472e8c":"markdown","c39f436f":"markdown","8ec1f1c1":"markdown","ea72d282":"markdown","6cd91f68":"markdown","6a5b0acd":"markdown","7075c404":"markdown","a61817f8":"markdown","391d741b":"markdown","1f772ee1":"markdown","db206283":"markdown","dea79d4f":"markdown","78e58014":"markdown","2ae101d1":"markdown"},"source":{"bc99309c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nfrom sklearn.decomposition import PCA\n%matplotlib inline\nfrom IPython.display import Image","c7d0191b":"df_listings = pd.read_csv('..\/input\/airbnbla\/listings.csv')\ndf_calendar = pd.read_csv('..\/input\/airbnbla\/calendar.csv')\ndf_reviews = pd.read_csv('..\/input\/airbnbla\/reviews.csv')","ccbd5393":"print(\"The dataset listings.csv has {} rows and {} columns\".format(df_listings.shape[0], df_listings.shape[1]))\nprint(\"The dataset calendar.csv has {} rows and {} columns\".format(df_calendar.shape[0], df_calendar.shape[1]))\nprint(\"The dataset reviews.csv has {} rows and {} columns\".format(df_reviews.shape[0], df_reviews.shape[1]))","f3d58d7a":"print(\"\\nColumns @ listings:\\n\",df_listings.columns.tolist())\nprint(\"\\nColumns @ calendar:\\n\",df_calendar.columns.tolist())\nprint(\"\\nColumns @ reviews:\\n\",df_reviews.columns.tolist())\n","790fa829":"df_listings.isnull().sum()","f890e94d":"df_calendar.isnull().sum()","95763264":"df_reviews.isnull().sum()","59385bd5":"# Dropping the records with price missing in calendar dataframe.\ndf_calendar = df_calendar[~df_calendar.price.isnull()].copy()\n\n# Checking the missing values in the dataset after treatment.\ndf_calendar.isnull().sum()","5fd84739":"df_listings.describe()\n#(include='all')","50864415":"df_calendar.describe()","bd1d0fa5":"df_reviews.describe()","68c5481b":"#Map of neighbourhood group\nplt.figure(figsize=(20,20))\nplt.title(\"Map of Neighbourhood Group\")\nsns.scatterplot(df_listings.longitude,df_listings.latitude,hue=df_listings.neighbourhood_group_cleansed)\nplt.ioff()\nplt.show()","baca6d57":"def clean_price(price_col):\n  if price_col.dtype == 'float64':\n    return price_col\n  else:\n    return price_col.str.replace(r'[^0-9.]','',regex=True).astype('float64')","0318dd6b":"\ndf_listings['price'] = clean_price(df_listings['price'])\n","a8154f85":"def clean_date(date_col):\n  return date_col.astype(np.datetime64)","df732ae7":"df_calendar['date'] = clean_date(df_calendar['date'])","66a2e3bc":"df_calendar['date'] = clean_date(df_calendar['date'])\ndf_calendar['price'] = clean_price(df_calendar['price'])\ndf_calendar_grp = df_calendar.groupby(by=pd.Grouper(key='date', freq = 'D'))[['listing_id', 'price']] \\\n  .agg({'listing_id':'count', 'price': 'mean'})\n\n#drop a few first and last rows due to missing data\ndf_calendar_grp = df_calendar_grp[1:-2]","cdf7e327":"fig = px.line(df_calendar_grp,\n             x=df_calendar_grp.index,\n             y='price'\n             )\n\nfig.update_layout(title=\"Daily average listing price\",\n                  xaxis_title=\"Day\",\n                  yaxis_title=\"Average listing price\",\n                  )\n\nfig.show()","4e8b1557":"#Neighbourhood Group Price Distribution\n#Price Varies vs. Area\n# plt.figure(figsize=(13,7))\n# plt.title(\"Map of Price Distribution\")\n\n# sns.scatterplot(df_listings.longitude,df_listings.latitude,hue=df_listings.price)\n\nax=df_listings[df_listings.price<500].plot(kind='scatter', x='longitude',y='latitude',figsize=(20,20),label='availability_365',c='price',cmap=plt.get_cmap('jet'),colorbar=True,alpha=0.4)\nax.legend()\nplt.ioff()\nplt.show()","8b94fbc9":"\nnbh = df_listings.groupby(by='neighbourhood')['id'].agg(['count', lambda x: x.count()\/df_listings.shape[0]])\nnbh.columns = ['Listing count', '% of total']\nnbh['% of total'] = nbh['% of total'].apply(lambda x:f'{x:.1%}')\nnbh.sort_values(by = '% of total', ascending=False, inplace=True)\nnbh.head()","5081d9d3":"df_listings.price.value_counts(normalize=True)\n\n#plot the bar graph of percentage job categories\nplt.figure(figsize=(13,50))\nplt.title(\"Neighbourhoods Relative Price\")\ndf_listings.neighbourhood_cleansed.value_counts(normalize=True).plot.barh()\nplt.show()","e3bdff32":"# Percentage of each category.\ndf_listings.bedrooms.value_counts(normalize=True)\n\n#plot the pie chart of categories\nplt.figure(figsize=(13,13))\nplt.title(\"Number of Bedrooms on Listings\")\ndf_listings.bedrooms.value_counts(normalize=False).plot.pie()\nplt.show()","407a336b":"## Price Distribution by Region Map","bd818802":"#### Most Expensive Neighbourhoods","c904cdaa":"## Dataset Overview","342f04e4":"##### https:\/\/matplotlib.org\/stable\/tutorials\/colors\/colormaps.html\n##### https:\/\/towardsdatascience.com\/exploratory-data-analysis-eda-python-87178e35b14\n##### https:\/\/github.com\/dwiknrd\/medium-code\/blob\/master\/ny-airbnb\/eda_nyc_airbnb.py\n##### https:\/\/medium.com\/analytics-vidhya\/python-exploratory-data-analysis-eda-on-nyc-airbnb-cbeabd622e30\n##### https:\/\/github.com\/mark-baole\/AirBnB-Los-Angeles\n##### https:\/\/github.com\/mark-baole\/AirBnB-Los-Angeles\/blob\/ML\/ML_AirBnB_Los_Angeles.ipynb\n","e27697bc":"## Treatment\n#### Missing Value Evaluation","b9468ef8":"## Neighbourhoods with Most Listings","e5a76cc6":"## Categorical Ordered Univariate Analysis\n#### Ordered variables are those variables that have a natural rank of order","1f472e8c":"***","c39f436f":"## Los Angeles, CA.\nAs the second largest metropolitan area in the country with a population of more than 16 million, Los Angeles is the West's iconic city, the place where movie stars, big money, bigger traffic jams and modern culture meet over Pacific surf, Santa Monica Mountain vistas and sometimes, a blanket of smog. Though it is surrounded by suburbs both famous and infamous, edged by film-worthy beaches and dominated by drama (both fictional and otherwise), downtown Los Angeles proper is suspiciously normal. Rows of unassuming skyscrapers and nine to five business doesn't make for a great tourist attraction, but they do serve as a reminder that there really is a city here after all. Leaving downtown behind, visitors will find the extremes that L.A. is better known for. To the west is affluent, often glamourous Hollywood and Beverly Hills, where movie stars and photo-snapping tourists shop and dine along palm-lined boulevards. The upscale homes of Brentwood and Bel Air give way to the quirky, youth-dominated vibe of Melrose Avenue. To the north are Glendale, Burbank, and Pasadena, where athletes and scholars pursue their endeavors at the feet of the San Gabriel Mountains. (https:\/\/www.go-california.com\/los-angeles)","8ec1f1c1":"*( Note_1: For the purpose of this exercise it was important to test and set the maximum price displayed of 500, if not limited, analysis would be more difficult)*\n*( Note_2: Still solving map framing)*","ea72d282":"## Data Loading","6cd91f68":"#### Acording to the graph above, the months of the year when the bookings are higher are on summer, around july, and at late december, while bookings are the their lowest values around march, followed by a period from september to mid december when there is with a slight decrease after summer. Weekends have higher rates than weekdays.","6a5b0acd":"## Dataset Available Data","7075c404":"## Period of the Year with the Cheapest Booking","a61817f8":"## Univariate Analysis\nUnivariate Analysis examines data over a single variable\/column from a dataset","391d741b":"## Parts of this EDA were based on the following:","1f772ee1":"## Listings by Neighbourhood Group","db206283":"## Exploratory Data Analysis","dea79d4f":"# Exploratory Data Analysis \n### Introductory Data Science Course Practice - Airbnb Dataset - Los Angeles Data as of april 26, 2021.\n\n#### *http:\/\/insideairbnb.com\/get-the-data.html* \n***","78e58014":"#### We choosed to treat only those missing values which were used in the analysis.\n#### It is worth remarking that \"price\" column on \"df_calendar\" is being treated only for learning practice purposes, since the impact in the results of the analysis performed here is negligible. It is 535 missing values out of 11643526 rows, or 0.005%. We just dropped the missing values.","2ae101d1":"### The chart above presents the distribution of the listings through the map of Los Angeles area and vicinities. Most listings are on the metropolitan area stretching towards east. The comparison with a geographic map of the area may correlate that distribution is limited by natural and geographic chracteristics, notably forest, desert areas mostly at the north, and the sea at south. It is wort mentioning tha the southernmost points are not outliers or data with errors, but listings at the channel islands, such as in Avalon."}}