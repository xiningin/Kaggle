{"cell_type":{"e3ef5603":"code","851845e2":"code","f68cc91e":"code","7f6c9fa8":"code","6a14cb4a":"code","f72b660e":"code","69e52bc2":"code","6f46c90f":"code","a7d67790":"code","0e9374dc":"code","3c08754c":"code","f8aab6fa":"code","81d0b7b3":"code","fcf10c1c":"code","bae524ed":"code","81230286":"code","7ab443f4":"code","e1112791":"code","6faa9703":"code","789909e8":"code","86a6bbd9":"code","bd109005":"code","d4dec12a":"code","fdf7fa97":"code","cdcf0159":"code","6d58eda8":"code","ab144d58":"code","ed508fd5":"code","d225c760":"code","e0413448":"code","59ec59f0":"code","8657020d":"code","8d373560":"code","b1648513":"code","762ba442":"code","d3280a6b":"code","5f30e905":"code","b5431eec":"code","ce671ee8":"code","f3627d7b":"code","92002ff4":"code","b678a6ec":"code","aaf07820":"code","1e5e099f":"code","fa8325e0":"code","0c73b504":"markdown","393aa959":"markdown","4757f427":"markdown","17e6db34":"markdown","3eb2d6cc":"markdown","28002192":"markdown","4affa911":"markdown","d1f70e57":"markdown","346eb372":"markdown","28776483":"markdown","c0bd7d99":"markdown","844a5f54":"markdown","a4094b0f":"markdown","c00c0ad0":"markdown","d7fa9e5d":"markdown","2e6c8ee4":"markdown","d73d4c96":"markdown","69bc69ac":"markdown","bcf756bd":"markdown","62d3060d":"markdown","7c8b5ebf":"markdown","c57034a5":"markdown","6b19d510":"markdown","64ef443c":"markdown","3be963dc":"markdown","5aa315c8":"markdown","f6adde84":"markdown","d228bb03":"markdown","0b6f89e0":"markdown","aa924652":"markdown","9a88824f":"markdown","6ccf915b":"markdown","660ef5f3":"markdown","5e526af1":"markdown","e56d7188":"markdown","d9b8f3cd":"markdown","e82cd51d":"markdown","621ea5ea":"markdown","a7a47d08":"markdown"},"source":{"e3ef5603":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","851845e2":"df = pd.read_csv('..\/input\/stages_TDF.csv')","f68cc91e":"df.info()","7f6c9fa8":"df.head()","6a14cb4a":"plt.figure(figsize=(9,6))\nsns.heatmap(df.isnull(),cmap='summer',yticklabels=False,cbar=False)\nplt.title('Missing Data?',fontsize=20)\nplt.xticks(fontsize=15,rotation=90)\n#plt.xticks(fontsize=10)\nplt.show()\n#df.isnull()","f72b660e":"df[df['Winner_Country'].isnull()].head(10)","69e52bc2":"df['Date'] = pd.to_datetime(df['Date'])\ndf['Year'] = df['Date'].map(lambda x: x.year)","6f46c90f":"df.duplicated().value_counts()","a7d67790":"df['Date'].duplicated().value_counts()","0e9374dc":"df[df['Date']=='1991-07-07']","3c08754c":"df['Type'].value_counts()","f8aab6fa":"df['DistanceInMiles'] = df['Distance'].apply(lambda x: x*.62)","81d0b7b3":"df['Type'].value_counts()","fcf10c1c":"def changeStageNames(x):\n    \n    plainsList = ['Plain stage', 'Flat Stage','Flat cobblestone stage','Plain stage with cobblestones']\n    mountainsList = ['Stage with mountain(s)','High mountain stage','Medium mountain stage','Stage with mountain','Mountain Stage']\n    \n    if x in plainsList:\n        return 'Flat stage'\n    if x in mountainsList:\n        return 'Mountain stage'\n    else:\n        return x","bae524ed":"df['Type'] = df['Type'].apply(changeStageNames)","81230286":"df['Type'].value_counts()","7ab443f4":"df[df['Winner']=='Alberto Contador']","e1112791":"df[df['Winner']=='Alberto Contador[n 1]']","6faa9703":"df[df['Winner']=='Jan Ullrich'].head(5)","789909e8":"df[df['Winner']=='Jan Ullrich[n 1]']","86a6bbd9":"df[df['Winner']=='Lance Armstrong']","bd109005":"df[df['Winner']=='Lance Armstrong[n 1]'].head(5)","d4dec12a":"def lanceArmstrong(x):\n    if x == 'Lance Armstrong[n 1]':\n        return 'Lance Armstrong'\n    return x","fdf7fa97":"df['Winner'] = df['Winner'].apply(lanceArmstrong)","cdcf0159":"df['Winner'].value_counts().head(10)","6d58eda8":"pre1970 = df[df['Year']<=1970]\npost1970 = df[df['Year']>=1970]\npost2000 = df[df['Year']>=2000]\npost2010 = df[df['Year']>=2010]","ab144d58":"plt.figure(figsize=(9,6))\npre1970['Winner_Country'].value_counts().head(15).plot('bar')\nplt.title('Stage Winners by Country Origin (Pre 1970)',fontsize=20)\nplt.xticks(fontsize=12,rotation=90)\nplt.show()\nprint('Stage Winners by Country Origin\\n')\nprint(pre1970['Winner_Country'].value_counts().head(15))","ed508fd5":"plt.figure(figsize=(9,6))\npost1970['Winner_Country'].value_counts().head(15).plot('bar')\nplt.title('Stage Winners by Country Origin (Year 1970 and Beyond)',fontsize=20)\nplt.xticks(fontsize=12,rotation=0)\nplt.show()\nprint('Stage Winners by Country Origin\\n')\nprint(post1970['Winner_Country'].value_counts().head(15))","d225c760":"plt.figure(figsize=(9,6))\npost2000['Winner_Country'].value_counts().head(15).plot('bar')\nplt.title('Stage Winners by Country Origin (Year 2000 and Beyond)',fontsize=20)\nplt.xticks(fontsize=12,rotation=0)\nplt.show()\nprint('Stage Winners by Country Origin\\n')\nprint(post2000['Winner_Country'].value_counts().head(15))","e0413448":"plt.figure(figsize=(9,6))\npost2010['Winner_Country'].value_counts().head(15).plot('bar')\nplt.title('Stage Winners by Country Origin (Year 2010 and Beyond)',fontsize=20)\nplt.xticks(fontsize=12,rotation=0)\nplt.show()\nprint('Stage Winners by Country Origin\\n')\nprint(post2010['Winner_Country'].value_counts().head(15))","59ec59f0":"df[df['Winner_Country']=='FRG']['Year'].value_counts()","8657020d":"df[df['Winner_Country']=='COL']['Type'].value_counts()","8d373560":"plt.figure(figsize=(9,6))\ndf['Destination'].value_counts().head(20).plot(kind='bar',color='green')\nplt.xlabel('Destinations',fontsize=16)\nplt.ylabel('Count',fontsize=16)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.title('Count of Destinations',fontsize=20)\nplt.show()\nprint(df['Destination'].value_counts().head(20))","b1648513":"plt.figure(figsize=(9,6))\ndf['Origin'].value_counts().head(20).plot(kind='bar',color='purple')\nplt.xlabel('Origin',fontsize=16)\nplt.ylabel('Count',fontsize=16)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.title('Count of Origins',fontsize=20)\nplt.show()\nprint(df['Destination'].value_counts().head(20))","762ba442":"plt.figure(figsize=(20,8))\ndf.groupby('Year').count()['Type'].plot(kind='bar')\nplt.title('Number of Stages by Year',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=16)\nplt.show()","d3280a6b":"plt.figure(figsize=(20,8))\ndf.groupby('Year')['DistanceInMiles'].sum().plot(kind='bar')\nplt.title('Total Miles Ridden per Tour',fontsize=20)\nplt.yticks(fontsize=18)\nplt.ylabel('Distance in Miles',fontsize=18)\nplt.xticks(fontsize=12)\nplt.xlabel('Year',fontsize=18)\nplt.show()","5f30e905":"plt.figure(figsize=(20,8))\ndf.groupby('Year')['DistanceInMiles'].mean().plot(kind='bar')\nplt.title('Average Miles Ridden per Day per Tour',fontsize=20)\nplt.yticks(fontsize=18)\nplt.ylabel('Distance in Miles',fontsize=18)\nplt.xticks(fontsize=12)\nplt.xlabel('Year',fontsize=18)\nplt.show()","b5431eec":"plt.figure(figsize=(9,6))\nsns.distplot(df['DistanceInMiles'],hist=True)\nplt.title('Histogram of Tour de France Course Distance in Miles',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Distance in Miles',fontsize=12)\nplt.show()\nprint('The median distance of a Tour de France race course is ' + str(df['DistanceInMiles'].median()) + ' miles.')\nprint('The shortest distance of a Tour de France race course was ' + str(df['DistanceInMiles'].min()) + ' miles.')\nprint('The longest distance of a Tour de France race course was ' + str(df['DistanceInMiles'].max()) + ' miles.')","ce671ee8":"plt.figure(figsize=(9,6))\ndf['Type'].value_counts().plot('bar')\nplt.title('Stage Types',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.show()","f3627d7b":"df['Winner'].value_counts().head(5)","92002ff4":"plt.figure(figsize=(12,6))\nsns.countplot(data=df[df['Winner']=='Eddy Merckx'],x='Year',hue='Type')\nplt.title('Eddy Merckx Wins by Stage Type',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Wins',fontsize=16)\nplt.legend(loc=1)\nplt.show()\ndf[df['Winner']=='Eddy Merckx'].groupby('Year').count()['Winner']","b678a6ec":"plt.figure(figsize=(12,6))\nsns.countplot(data=df[df['Winner']=='Mark Cavendish'],x='Year',hue='Type')\nplt.title('Mark Cavendish Wins by Stage Type',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Wins',fontsize=16)\nplt.legend(loc=1)\nplt.show()\ndf[df['Winner']=='Mark Cavendish'].groupby('Year').count()['Winner']","aaf07820":"plt.figure(figsize=(12,6))\nsns.countplot(data=df[df['Winner']=='Bernard Hinault'],x='Year',hue='Type')\nplt.title('Bernard Hinault Wins by Stage Type',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Wins',fontsize=16)\nplt.legend(loc=1)\nplt.show()\ndf[df['Winner']=='Bernard Hinault'].groupby('Year').count()['Winner']","1e5e099f":"plt.figure(figsize=(12,6))\nsns.countplot(data=df[df['Winner']=='Andr\u00e9 Leducq'],x='Year',hue='Type')\nplt.title('Andr\u00e9 Leducq Wins by Stage Type',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Wins',fontsize=16)\nplt.legend(loc=1)\nplt.show()\ndf[df['Winner']=='Andr\u00e9 Leducq'].groupby('Year').count()['Winner']","fa8325e0":"plt.figure(figsize=(12,6))\nsns.countplot(data=df[df['Winner']=='Lance Armstrong'],x='Year',hue='Type')\nplt.title('Lance Armstrong Wins by Stage Type',fontsize=20)\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel('Year',fontsize=16)\nplt.ylabel('Wins',fontsize=16)\nplt.legend(loc=2)\nplt.show()\ndf[df['Winner']=='Lance Armstrong'].groupby('Year').count()['Winner']","0c73b504":"https:\/\/en.wikipedia.org\/wiki\/1926_Tour_de_France\n\nin 1926,the longest tour ever, the organizer of the tour lead the riders in a perimeter of the nation of France.","393aa959":"The Tour de France is without a doubt one of the most historical, brutal and controversial sporting events. This data has a plethora of information ranging from dates and distances to start and finish locations. By looking at this data, we can get a good idea of how the race once was and how it has evolved over time. Let's get started!","4757f427":"France, Belgium and Italy clearly enjoy most of the territory before 1970.","17e6db34":"- Let's first understand what kind of data we have, how clean it is and if it needs any modifications.\n- Review winner data and doping.\n- See which nations participate in the Tour de France.\n- Analyze the course starts and finsihes. Which locations have the most Tour de France appearances. \n- Get a feel for the length of the race, and how the difficulty of the race has evolved over time. \n- Who are the famous stage winners, and what kind of riding style do they have? ","3eb2d6cc":"# Data","28002192":"Le Tour de France is not the same route every year. The race course is always changing, making it very dynamic and exciting to watch. ","4affa911":"## Convert Kilometers to Miles","d1f70e57":"I understand that I may be losing some meaning by aggressively restructuring the values in the 'Type' column. Having so many types of flat stages, plains stages and mountain stages makes the data harder to understand.","346eb372":"France and Belgium still holding the top two spots.","28776483":"# Fact 4 - It is a Very Difficult Race","c0bd7d99":"Most null data in the 'Winner_Country' column comes from 'Team time trial' events. My guess is that many teams have team members from various nations, making it hard to nationalize? \n\nHowever, there are also other very interesting events that resulted in missing data that were not 'Team time trial' events. \n\n- In 1998, the [Festina affair](https:\/\/en.wikipedia.org\/wiki\/Festina_affair) caused numerous teams to strike and protest the race after one team was caught with illegal performance drugs. \n\n- In stage 16 of the 1995 Tour de France, the stage with held in non competitive spirirt due to the death of [Fabio Casartelli](https:\/\/en.wikipedia.org\/wiki\/Fabio_Casartelli), who died a stage earlier in a descent in the mountains. \n\n- In the 5th stage of 1982, steel workers from Usinor blocked the road. \n\n- The 12th stage of the 1978 tour ended when the riders protested an early ride after a late finish the night before. They protested by riding at an average of 12 miles per hour, reaching the finish line behind schedule.\n\n- Stage 18 of 1977, no winner was declared becuase the first two finishers were caught cheating, and the rest of the riders finished at the sametime. ","844a5f54":"# Thank You!","a4094b0f":"FRG is West Germany","c00c0ad0":"Pretty clear here that the French are losing their grip on the Tour de France stage victories, and Belgium is now in the middle of the pack.","d7fa9e5d":"[Eddy Merckx](https:\/\/en.wikipedia.org\/wiki\/Eddy_Merckx), AKA 'The Cannabal' is the most decorated Tour de France rider with 34 stage wins. ","2e6c8ee4":"# Objectives","d73d4c96":"As of recent, with Mr. Cavendish, Mr. Froome and Team Sky, the Tour has suffered an English Invasion.","69bc69ac":"Interesting. No duplicate data, but some of the data on the 'Date' column is repetitive. Are there dates where more than one race was held per day? ","bcf756bd":"# Five Facts About Le Tour","62d3060d":"Le Tour is massively european. Let's take a closer look by examining the winners's native country.","7c8b5ebf":"# Fact 5 - Cannibalism","c57034a5":"Armstrong went from being a flat stage sprinting cannonball, to a climbing, time trialing animal. This transition also happened at around the same time he admitted to doping.\n\nAnd for all of the Armstrong fans, here is his famous ['look back'](https:\/\/www.youtube.com\/watch?v=F94TCxLYZew) Alpe D'Huez performance. Enjoy.","6b19d510":"# Imports","64ef443c":"Pretty gnarly, on July 7, 1991, there were two races on the same day. One race, a traditional 70 mile plain stage, fairly easy by Tour de France standards. The second race that day was a team time trial. Also notice the 'Nan' for Winner_Country in the time trial row. Maybe that is because many times teams have members from various countries.  ","3be963dc":"Europe and North America aside, Colombia has an odd appearance in the Tour. Colombians are also well known for their climbing ability. Andes anyone? ","5aa315c8":"As of the late 80s, the tour has been very consistant with the number of stages per tour.\n\nThere are a couple of gaps when the Le Tour was not held.  \n- Between 1914 and 1919 because of WW1.\n- Between 1939 and 1947 because of WW2.","f6adde84":"1. [Data](#Data)\n2. [Objectives](#Objectives)\n3. [Imports](#Imports)\n4. [Review Data and Clean](#Review-Data-and-Clean)\n5. [Fact 1 Tour de France has a History of Doping](#Fact-1---Tour-de-France-has-a-History-of-Doping)\n6. [Fact 2 The Tour is Very European](#Fact-2---The-Tour-is-Very-European)\n7. [Fact 3 Le Tour's Course is Always Changing](#Fact-3---Le-Tour's-Course-is-Always-Changing)\n8. [Fact 4 It is a Very Difficult Race](#Fact-4---It-is-a-Very-Difficult-Race)\n9. [Fact 5 - Cannibalism](#Fact-5---Cannibalism)\n","d228bb03":"# Fact 2 - The Tour is Very European","0b6f89e0":"# Table of Contents","aa924652":"Mr. Cavendish can be considered one of the best sprinters ever. All of his victories have come from punchy sprints at the end of a flat stage races. Check out some of his sprinting victories in this [video.](https:\/\/www.youtube.com\/watch?v=7PPlYnhWYj0) Pretty amazing, and scary! ","9a88824f":"# Review Data and Clean","6ccf915b":"COL is Colombia","660ef5f3":"Doping is professional cyclng is wide spread. Check out this wikipedia article. Most of the podium, in certain eras, were [doping.](https:\/\/en.wikipedia.org\/wiki\/Doping_at_the_Tour_de_France)","5e526af1":"## Reorganize Terrain Type","e56d7188":"# Fun Fact 3 - Le Tour's Course is Always Changing ","d9b8f3cd":"# Fact 1 - Tour de France has a History of Doping","e82cd51d":"As you can see from the plot above, the Cannibal feasted on his prey on various stages, over the span of 6 years. It should also be knowned that Merckx is considered the best competitive cyclist of all time with 11 [Grand Tour](https:\/\/en.wikipedia.org\/wiki\/Grand_Tour_(cycling) victories, victories in all of the [Classics](https:\/\/en.wikipedia.org\/wiki\/Classic_cycle_races), 3 [world championships](https:\/\/en.wikipedia.org\/wiki\/UCI_Road_World_Championships) and broke the [hour record.](https:\/\/en.wikipedia.org\/wiki\/Hour_record). Here is a [video](https:\/\/www.youtube.com\/watch?v=KNCamaNuxwE) of Merckx riding in le Tour.","621ea5ea":"Let's create a column that displays miles instead of kiloeters for our non metric system friends.","a7a47d08":"Seems that Armstrong is targeted on this dataset, while other famous dopers were left out, or unmarked with the '[n 1]' symbol. Let's change the marking so that we can have a more accurate data reading."}}