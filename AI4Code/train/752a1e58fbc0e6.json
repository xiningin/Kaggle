{"cell_type":{"5b45bb9d":"code","07b6f72c":"code","a1f5cff7":"code","f0c4a5dd":"code","fa4936c5":"code","03cca119":"code","84e77d97":"code","7cdf4e0a":"code","ed4297ed":"code","74c20110":"code","d8f1f1f0":"code","e6c1cb19":"code","b1b699ff":"code","8e34a1e4":"code","df5c3667":"code","581a27cf":"code","4b2fe322":"code","9cbed738":"code","3fddfac0":"code","aaa8790f":"code","38dcfde4":"code","5dc009b4":"code","a743ad2e":"code","21d9db59":"code","5ceb3e23":"code","c56a4d25":"code","2a502764":"code","19884464":"code","504bda35":"code","feab9c24":"code","d8e411a8":"code","0de4dec8":"code","f51560d7":"code","3dd191f4":"code","86654e77":"markdown","7fcd5879":"markdown","f9004d13":"markdown","81c6dfcd":"markdown","00ac5e28":"markdown","39a1a5ae":"markdown","b62b5ec3":"markdown","170b29fe":"markdown","636634bd":"markdown","881f062a":"markdown","9c885bb4":"markdown","2a437e6a":"markdown","387f1e4c":"markdown","179981a0":"markdown","eff41ba7":"markdown","d2186007":"markdown","53718653":"markdown","9acc5cc0":"markdown","d18218d2":"markdown","59fe18e5":"markdown","877d58cb":"markdown","64df3ae6":"markdown","e687d2e3":"markdown","5ee45501":"markdown"},"source":{"5b45bb9d":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nplt.style.use(\"ggplot\")\nimport seaborn as sns\nsns.set_palette(\"bwr\")\n\nfrom sklearn.metrics import accuracy_score, confusion_matrix\nfrom sklearn.model_selection import cross_val_score\n\n# Set pandas to display all columns\npd.set_option(\"display.max_columns\", None)\n\n%matplotlib inline","07b6f72c":"# Student performance data in Mathematics subject\n\ndfmat = pd.read_csv(\"\/kaggle\/input\/student-performance-data-set\/student\/student-mat.csv\", sep=\";\")\nprint(dfmat.shape)\ndfmat.head()","a1f5cff7":"dfmat.describe()","f0c4a5dd":"# Student performance data in Portuguese subject\n\ndfpor = pd.read_csv(\"\/kaggle\/input\/student-performance-data-set\/student\/student-por.csv\", sep=\";\")\nprint(dfpor.shape)\ndfpor.head()","fa4936c5":"dfpor.describe()","03cca119":"print(dfmat.duplicated().value_counts(), \"\\n\")\nprint(dfpor.duplicated().value_counts())","84e77d97":"ax = sns.heatmap(dfmat.isnull(), cbar=False)","7cdf4e0a":"ax = sns.heatmap(dfpor.isnull(), cbar=False)","ed4297ed":"# Opening notes from the dataset provider\n\nfile = open(\"\/kaggle\/input\/student-performance-data-set\/student\/student.txt\", 'r')\nprint(file.read())","74c20110":"# Male, urban, family member > 3, parents living together, yes answers, and Gabriel Pereira schooler\none_values = [\"M\", \"U\", \"GT3\", \"T\", \"yes\", \"GP\"]\n\n# Female, rural, family member <= 3, parents living apart, no answers, and Mousinho da Silveira schooler\nzero_values = [\"F\", \"R\", \"LE3\", \"A\", \"no\", \"MS\"]\n\nfor column in dfmat.columns:\n    dfmat[column] = dfmat[column].replace(to_replace=[one_values], value=1)\n    dfmat[column] = dfmat[column].replace(to_replace=[zero_values], value=0)\n    \nfor column in dfpor.columns:\n    dfpor[column] = dfpor[column].replace(to_replace=[one_values], value=1)\n    dfpor[column] = dfpor[column].replace(to_replace=[zero_values], value=0)","d8f1f1f0":"nominal_columns = [\"Fjob\", \"Mjob\"]\ndfmat = pd.get_dummies(dfmat, columns=nominal_columns, prefix=nominal_columns)\ndfpor = pd.get_dummies(dfpor, columns=nominal_columns, prefix=nominal_columns)","e6c1cb19":"dfmat = dfmat.drop(columns=[\"reason\", \"guardian\"])\ndfpor = dfpor.drop(columns=[\"reason\", \"guardian\"])\n\ndfmat.head()","b1b699ff":"dfpor.head()","8e34a1e4":"print(\"Now our dataframe has\", dfpor.shape[1], \"columns each!\")","df5c3667":"# Key attributes to join dataset\n\nnot_join_val = ['G1', 'G2', 'G3', 'paid', 'absences', 'failures']\njoin_val = list(set(dfmat.columns) - set(not_join_val))\n\nprint(\"Attributes to be joined:\\n\\n\", join_val)","581a27cf":"dfall = dfpor.merge(dfmat, on=join_val, suffixes=[\"_por\", \"_mat\"])\nprint(dfall.shape)\ndfall.head()","4b2fe322":"# Defining a simple function to plot pie charts\n\ndef plot_pie(value, title, label=None, count=True, sort=False, legend=False):\n    plt.figure(figsize=(4,4))\n    ax = plt.pie(\n        value.value_counts(sort=(label is None)),\n        startangle=90,\n        labels=(None if legend is True else value.value_counts(sort=(label is None)).to_frame().index.to_numpy() if label is None else label) ,\n        autopct=(\n            lambda p: f'{p:.2f}%\\n{p*sum(value.value_counts())\/100 :.0f} items' if count is True\n            else f'{p:.2f}%'\n        ),\n        pctdistance=0.6,\n    )\n    if legend:\n        plt.legend(labels=label, loc=\"best\", bbox_to_anchor=(1.1, 0., 0.5, 0.5))\n    plt.title(title)\n    plt.show()","9cbed738":"plot_pie(dfall[\"sex\"], title=\"Sex ratio\", label=[\"Female\", \"Male\"])","3fddfac0":"ax = sns.countplot(dfall[\"age\"], color=\"r\")","aaa8790f":"plot_pie(dfall[\"address\"], title=\"Urban vs Rural ratio\", label=[\"Rural\", \"Urban\"])","38dcfde4":"plot_pie(dfall[\"famsize\"], title=\"Family size of students\", label=[\"Three or less\", \"More than 3\"])","5dc009b4":"plot_pie(\n    dfall[\"traveltime\"],\n    title=\"Travel times of students\",\n    label=[\"<15 min\", \"15 to 30 min\", \"30 min. to 1 hour\", \">1 hour\"],\n    count=False,\n    legend=True\n)","a743ad2e":"dfall.filter(regex='^Fjob*').idxmax(1).value_counts()","21d9db59":"plot_pie(\n    dfall.filter(regex='^Fjob*').idxmax(1),\n    title=\"Student's father's job\",\n    label=[\"Services\", \"Other\", \"Stay-at-home\", \"Teacher\", \"Healthcare\"],\n    count=False,\n    legend=True\n)","5ceb3e23":"dfall.filter(regex='^Mjob*').idxmax(1).value_counts()","c56a4d25":"plot_pie(\n    dfall.filter(regex='^Mjob*').idxmax(1),\n    title=\"Student's mother's job\",\n    label=[\"Other\", \"Teacher\", \"Stay-at-home\", \"Healthcare\", \"Services\"],\n    count=False,\n    legend=True\n)","2a502764":"dfmat[[\"G1\", \"G2\", \"G3\"]].describe()","19884464":"dfpor[[\"G1\", \"G2\", \"G3\"]].describe()","504bda35":"# Mathematics\ndfmat[[\"sex\",\"G3\"]].groupby(\"sex\").mean()","feab9c24":"# Portuguese\ndfpor[[\"sex\",\"G3\"]].groupby(\"sex\").mean()","d8e411a8":"# Mathematics\ndfmat[[\"address\",\"G3\"]].groupby(\"address\").mean()","0de4dec8":"# Portuguese\ndfpor[[\"address\",\"G3\"]].groupby(\"address\").mean()","f51560d7":"print(\"Students who have 0 grade in Math:\")\nprint(dfmat[(dfmat[\"G1\"] == 0) | (dfmat[\"G2\"] == 0) | (dfmat[\"G3\"] == 0)].shape[0], \"\\n\")\n\nprint(\"Students who have 0 grade in Portuguese:\")\nprint(dfpor[(dfpor[\"G1\"] == 0) | (dfpor[\"G2\"] == 0) | (dfpor[\"G3\"] == 0)].shape[0])","3dd191f4":"plt.figure(figsize=(15,15))\n\ncorr = dfall.corr()\nax = sns.heatmap(\n    corr, \n    vmin=-1, vmax=1, center=0,\n    cmap=sns.diverging_palette(20, 160, n=256),\n    square=True,\n)\nax.set_xticklabels(\n    ax.get_xticklabels(),\n    rotation=50,\n    horizontalalignment=\"right\"\n);","86654e77":"## The Interesting Stuff\n\n### Correlation heatmap","7fcd5879":"### Age distribution","f9004d13":"![classroom](https:\/\/images.unsplash.com\/photo-1510531704581-5b2870972060?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500)\n\n# Getting Started\n\nWe're going to analyze student achievement in secondary education of two Portuguese schools. The data attributes include student grades, demographic, social and school related features. The subjects are Math and Portuguese. There seem to be many interesting insight that we can dig from these data. Let's check them.","81c6dfcd":"# Preparing The Data\n\nWe need to know what does each attribute means for the data and what types of data they contain.","00ac5e28":"### Map nominal values with one-hot encoding","39a1a5ae":"### Average G3 score in female vs male students\n\nMale students tend to excel in math, and females tend to excel in Portuguese subject.\n\n0: Females, 1: Males","b62b5ec3":"### Urban vs Rural students","170b29fe":"### Importing math performance data","636634bd":"\"reason\" and \"guardian\" are also nominal attributes. But we'll just drop them because they are not very interesting data and to avoid making too many columns.","881f062a":"### Joining Two Dataset\n\nThe dataset is split into two subjects (Math and Portuguese). However, several students belong to both datasets. To find them out, we must find what features are related to the student's characteristics and what features are related to the study subjects (therefore different in each dataset).\n\nFrom the data above we can see that:\n\n* G1, G2, G3 is obviously the grade for each subject.\n* The attribute \"paid\" represents extra paid classes within the course subject. Therefore it will likely be different for each study subject.\n* absences and failures likely depend on the subject the student is learning.\n\nTherefore the attributes above are less likely to be the key attributes to join both datasets. We will use any other attributes.","9c885bb4":"### Student's mother's job","2a437e6a":"### Home to school travel time","387f1e4c":"# Importing Data","179981a0":"### Insights about student's scores in each subject","eff41ba7":"From the heatmap above we can know so many interesting insights:\n\n- Math grades is correlated with Portuguese grades\n- G1, G2, and G3 in both subjects are strongly correlated with each other\n- Female students tend to study more and achieve the higher grades\n- Male students tend to have higher weekly and daily alcohol consumption (Dalc and Walc)\n- Students who failed in Math tend to fail in Portuguese too\n- Students who wants to achieve higher education tend to fail less and achieve more grades\n- Students who frequently skipped Math class tend to also skip their Portuguese class\n- Rural students travel for a longer time than urban students\n- Students whose father has a higher education tend to have a mother with a higher education too (and vice versa)\n- Mothers who has a higher education are less likely to stay at home and more likely to be a teacher\n- Students whose mother has a higher education is less likely to fail at Math and Portuguese","d2186007":"Nice! It looks like our dataset is perfect. We found no null or duplicate values!","53718653":"### Family size of students","9acc5cc0":"### Importing Portuguese performance data","d18218d2":"### Map binary values into one and zeroes","59fe18e5":"### Student's father's job","877d58cb":"### Average G3 score in rural vs urban students\n\nUrban students get higher scores than rural students.\n\n0: Rural, 1: Urban","64df3ae6":"# Exploring Data\n\nBelow, we'll be exploring the dataset. I want to make clear the way that we use our data:\n\n* The merged dataset (**dfall**) is used to explore student characteristics data (sex, family, etc)\n* The dataset for each subject (**dfmat** and **dfpor**) is used to explore data relating to the students' grades.\n\nFor the sake of convenience and DRY (don't repeat yourself) principle, I've also created some function to plot pie charts.","e687d2e3":"### Checking duplicate and null values in both dataframes","5ee45501":"## The Basic Stuff\n\n### Sex ratio"}}