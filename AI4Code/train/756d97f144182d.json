{"cell_type":{"32919851":"code","6f151364":"code","f9fa2e27":"code","1c8b901c":"code","8d9733b2":"code","7a4703f5":"code","a027e111":"code","23f5383b":"code","104277fb":"code","b1ce6398":"code","40e9a423":"code","006ac996":"code","d3d8cda6":"code","f95dd2bb":"code","13e2bd42":"code","53880a82":"code","ff950c7f":"code","7ef78912":"code","7d5d4d59":"code","3f6a8fbe":"code","e13ba048":"markdown","1c140123":"markdown","02c804ee":"markdown","fe342818":"markdown","7aed59ee":"markdown"},"source":{"32919851":"%matplotlib inline\n#import warnings\n#warnings.filterwarnings(\"ignore\")\n\n#basic imports\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom numpy import mean, std\n\n\n#Preposessing imports\nfrom sklearn import preprocessing\nfrom sklearn.preprocessing import MinMaxScaler, LabelEncoder\nfrom sklearn.model_selection import train_test_split, cross_val_score\n\n#ML Modal Algorithms\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.ensemble import RandomForestClassifier\n\n#Profiling imports\nfrom pandas_profiling import ProfileReport","6f151364":"#project_data = pd.read_csv(r'\/Users\/pavanmantha\/Pavans\/PracticeExamples\/DataScience\/survey_lung_cancer.csv')\nproject_data = pd.read_csv(r'..\/input\/lung-cancer\/survey lung cancer.csv')\nproject_data.head()","f9fa2e27":"print(\"Number of data points in dataset\", project_data.shape)\nprint('*'*50)\nprint(\"The attributes of dataset :\", project_data.columns.values)","1c8b901c":"project_data.info()","8d9733b2":"project_data.describe()","7a4703f5":"# Checking value counts for class label\nproject_data.AGE.value_counts()[0:10].plot(kind='bar')\nplt.show()","a027e111":"# Checking value counts for class label\nproject_data[\"ALCOHOL CONSUMING\"].value_counts()[0:10].plot(kind='bar')\nplt.show()","23f5383b":"# Checking value counts for class label\nproject_data[\"COUGHING\"].value_counts()[0:10].plot(kind='bar')\nplt.show()","104277fb":"sns.set_style(\"whitegrid\")\nsns.pairplot(project_data);\nplt.show()","b1ce6398":"#look at how target is distributed among variables\nsns.set_style(\"whitegrid\")\nsns.pairplot(project_data,hue='LUNG_CANCER')\nplt.legend()\nplt.show()","40e9a423":"plt.figure(figsize=(20,10))\nsns.heatmap(project_data.corr(), annot=True)\nplt.show()","006ac996":"profile = ProfileReport(project_data, title=\"Correlation Analysis Report\")\nprofile","d3d8cda6":"le = LabelEncoder()\nproject_data.GENDER = le.fit_transform(project_data.GENDER)\nproject_data.LUNG_CANCER = le.fit_transform(project_data.LUNG_CANCER)\n\n#after data encoding checking for the data\nproject_data.head()","f95dd2bb":"scaler = MinMaxScaler(copy=True, feature_range=(0, 1))\nproject_data = pd.DataFrame(scaler.fit_transform(project_data),columns=project_data.columns,index=project_data.index)","13e2bd42":"X = project_data.drop('LUNG_CANCER',axis=1)\ny = project_data.LUNG_CANCER\n\nY_true = project_data['LUNG_CANCER'].values\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2, random_state = 50, stratify=Y_true)\n\nprint('Feature data points in train data:', X_train.size)\nprint('Label data points in train data:', y_train.size)\n","53880a82":"lr = LogisticRegression(max_iter = 2000)\ncv = cross_val_score(lr,X_train,y_train,cv=5)\nprint(mean(cv), '+\/-', std(cv))","ff950c7f":"#random forest classifier with five-fold cross validation\nrf = RandomForestClassifier(random_state = 1)\ncv = cross_val_score(rf,X_train,y_train,cv=5)\nprint(mean(cv), '+\/-', std(cv))","7ef78912":"#import evaluation tools\nfrom sklearn.metrics import accuracy_score,precision_score, matthews_corrcoef, confusion_matrix, classification_report","7d5d4d59":"lr = LogisticRegression(C= 0.3, max_iter= 15000)\nlr.fit(X_train, y_train)\n\ny_pred_lr = lr.predict(X_test)\n\n#assess accuracy\nprint('LogisticRegression test accuracy: {} %'.format(accuracy_score(y_test, y_pred_lr)*100))","3f6a8fbe":"#create and reshape confusion matrix data\nmatrix = confusion_matrix(y_test, y_pred_lr)\nmatrix = matrix.astype('float') \/ matrix.sum(axis=1)[:, np.newaxis]\n\n#plot as heatmap\nplt.figure(figsize=(16,7))\nsns.set(font_scale=1.4)\nsns.heatmap(matrix, annot=True, annot_kws={'size':10},\n            linewidths=0.2, vmin=0, vmax=1)\n\n#plot settings\nclass_names = ['Lung cancer', 'No lung cancer']\ntick_marks = np.arange(len(class_names))\ntick_marks2 = tick_marks + 0.5\nplt.xticks(tick_marks, class_names, rotation=25)\nplt.yticks(tick_marks2, class_names, rotation=0)\nplt.xlabel('Predicted label')\nplt.ylabel('True label')\nplt.title('Confusion Matrix for LogisticRegression')\nplt.show()","e13ba048":"### Read data and view sample data set for understanding","1c140123":"### Library Imports","02c804ee":"## Lung cancer Analysis & Prediction","fe342818":"In This Analysis we will try to predict the lung cancer with logistic regression algorithms","7aed59ee":"### Eploratory Data Analysis"}}