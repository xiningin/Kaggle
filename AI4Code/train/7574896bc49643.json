{"cell_type":{"7515271f":"code","f60659bb":"code","73dac03b":"code","58d53acb":"code","ea5486fa":"code","5536bfa6":"code","08897344":"code","2f59cbd9":"code","d11883e1":"code","bce870e6":"code","888ed429":"code","768e61f7":"code","565c6dbb":"code","b6baeaa8":"code","58bc9fe3":"code","15e5915f":"code","d4062260":"code","4d055834":"code","5e06c38e":"code","54e0d96c":"code","a469053f":"code","630f15b8":"code","02fc3b59":"code","e7847968":"markdown","60ebe7b7":"markdown","09428659":"markdown","1cb80a85":"markdown","2d8df041":"markdown","6eeca574":"markdown","8073fc6a":"markdown","a2b56514":"markdown","ee9e15df":"markdown","ee06acfa":"markdown","b070ddb0":"markdown","2566bf75":"markdown","73c7ed0c":"markdown"},"source":{"7515271f":"# Import libraries\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nplt.style.use('fivethirtyeight')","f60659bb":"expense = pd.read_csv('..\/input\/military-expenditure-of-countries-19602019\/Military Expenditure.csv')\nexpense.head()","73dac03b":"expense.Type.value_counts()","58d53acb":"#Remove type other than Country\nexpense_country = expense[expense.Type == 'Country'].copy()\ndel expense_country['Code']\ndel expense_country['Type']\ndel expense_country['Indicator Name']\n\nexpense_country.set_index('Name', inplace=True)\n\n#Convert spendings to billion\nexpense_country = expense_country.div(1000000000)","ea5486fa":"expense_country['average expenditure'] = expense_country.mean(axis=1)","5536bfa6":"# Get top 10 countries with their average Military spendings\ntop10_average = expense_country.sort_values(by='average expenditure', ascending=False)[:10]","08897344":"fig = plt.figure(figsize=(15, 10))\nax = sns.barplot(x=top10_average.index, y=top10_average['average expenditure'])\nax.set_xlabel('Country', fontsize=15)\nax.set_ylabel('avg. Millitary \\nSpendings in bn$', fontsize=15)\nax.set_title('Top 10 countries by average Military spendings', fontsize=15);","2f59cbd9":"decade_spendings = top10_average[['2008', '2009', '2010', '2011', '2012',\n       '2013', '2014', '2015', '2016', '2017', '2018']]\n","d11883e1":"plt.figure(figsize=(15, 12))\n\nax1 = plt.subplot(211)\nax2 = plt.subplot(212)\n\n\nNUM_COLORS = 10\ncm = plt.get_cmap('gist_rainbow')\nax2.set_prop_cycle(color=[cm(1.*i\/NUM_COLORS) for i in range(NUM_COLORS)])\nfor index, row in decade_spendings.iterrows():\n    if index == 'United States':\n        ax1.plot(decade_spendings.columns, np.ravel(row), label=index, color='purple')\n        continue\n        \n    ax2.plot(decade_spendings.columns, np.ravel(row), label=index)\n\n\nax1.legend(loc='upper left')\nax1.set_ylim(500, 750)\nax1.set_xticklabels([])\nax2.legend()\nax2.set_xlabel('Year', fontsize=20)\nax2.set_ylabel('Spendings bn$', fontsize=20);\nax1.set_title('United States vs Top countries by Millitary Expense', fontsize=20);\nplt.tight_layout()","bce870e6":"expense_country_all = expense[expense.Type == 'Country'].copy()\ndel expense_country_all['Code']\ndel expense_country_all['Type']\ndel expense_country_all['Indicator Name']\nexpense_country_all.set_index('Name', inplace=True)\nexpense_country_all = expense_country_all.div(1000000000)","888ed429":"import matplotlib.animation as animation\nfrom IPython.display import HTML\nfrom IPython.display import Image\n\ndef run(i):\n    #print(i)\n    s = expense_country_all.iloc[:, i].sort_values(ascending=False)[:20]\n    plt.clf()\n    #plt.barh(s.index, s)\n    plt.xlim(0, s[0]+50)\n    ax = sns.barplot(s, s.index, palette=sns.color_palette(\"husl\", n_colors=20))\n    plt.title('Millitary expense Top 20 countries from year 1960-2018\\nYear-{}'.format(s.name))\n    plt.xlabel('Millitary expense in US$ billions', fontsize=12)\n    plt.ylabel('')\n    for p in ax.patches:\n        text = format(p.get_width(), '.2f')\n        ax.annotate(text, (p.get_width()+.3, \n                    p.get_y()+ p.get_height()\/2), va = 'center', )\n    plt.gcf().subplots_adjust(left=0.15)\n    #plt.tight_layout()\n    \n\nframes = len(expense_country_all.columns)\n    \nfig = plt.figure(figsize=(15, 12)) \n\nanim = animation.FuncAnimation(fig, run, blit=False, interval=500, repeat=False, frames=frames)\nanim.save('top20.gif')    \nplt.close(anim._fig)\n#display(Image(url='filename.gif'))","768e61f7":"display(Image(url='top20.gif'))","565c6dbb":"expense_country_all","b6baeaa8":"import plotly.express as px\n\ndf = px.data.gapminder()\n\nfig = px.bar(df, x=\"continent\", y=\"pop\", color=\"continent\",\n  animation_frame=\"year\", animation_group=\"country\", range_y=[0,4000000000])\nfig.show()","58bc9fe3":"countries = expense_country['2018'].sort_values(ascending=False)[:10]\nrest_world = expense_country['2018'].sort_values(ascending=False)[11:].sum()\ncountries = countries.append(pd.Series(rest_world, index=['Rest world']))","15e5915f":"plt.figure(figsize=(12, 12))\nplt.title('Military Expenditures by Country (in US$ billions) 2018')\n#colors=['#a6cee3','#1f78b4','#b2df8a','#33a02c','#fb9a99','#e31a1c','#fdbf6f','#ff7f00','#cab2d6','#6a3d9a','#ffff99']\nsns.color_palette(\"hls\", 11)\nexplode=[.0]*11\nexplode[0] = .05\nexplode[1] = .03\n\ndef func(pct, allvals):\n    absolute = int(pct\/100.*np.sum(allvals))\n    return \"{:.1f}%,{:d}\".format(pct, absolute)\n\nplt.pie(countries, labels=countries.index, autopct=lambda pct: func(pct, countries),\n        shadow=True, startangle=90, counterclock=False, explode=explode,\n        rotatelabels=True, pctdistance=.8, wedgeprops = {'edgecolor': 'black'}, colors=sns.color_palette(\"husl\", 11) );","d4062260":"expense_geographically = expense[expense.Type == 'Regions Clubbed Geographically'].copy()\ndel expense_geographically['Code']\ndel expense_geographically['Type']\ndel expense_geographically['Indicator Name']\n#del expense_geographically[['Name' == 'World']]\nexpense_geographically.set_index('Name', inplace=True)\nexpense_geographically = expense_geographically.div(1000000000)","4d055834":"expense_geographically = expense_geographically.drop('World')","5e06c38e":"def run(i):\n    #print(i)\n    s = expense_geographically.iloc[:, i].sort_values(ascending=False)\n    plt.clf()\n    #plt.barh(s.index, s)\n    plt.xlim(0, s[0]+50)\n    ax = sns.barplot(s, s.index, palette=sns.color_palette(\"husl\", n_colors=20))\n    plt.title('Millitary expense regions from year 1960-2018\\nYear-{}'.format(s.name))\n    plt.xlabel('Millitary expense in Bn$', fontsize=12)\n    plt.ylabel('')\n    for p in ax.patches:\n        text = format(p.get_width(), '.2f')\n        ax.annotate(text, (p.get_width()+.3, \n                    p.get_y()+ p.get_height()\/2), va = 'center', )\n    #plt.tight_layout()\n    plt.gcf().subplots_adjust(left=0.30)\n\nframes = len(expense_geographically.columns)\n    \nfig = plt.figure(figsize=(15, 8)) \n\nanim = animation.FuncAnimation(fig, run, blit=False, interval=500, repeat=False, frames=frames)\nanim.save('top20r.gif')    \nplt.close(anim._fig)\n","54e0d96c":"display(Image(url='top20r.gif'))","a469053f":"# convert millitary spendings in 4 parts\nexpense_country_all = expense[expense.Type == 'Country'].copy()\n\ndel expense_country_all['Type']\ndel expense_country_all['Indicator Name']\nexpense_country_all.set_index('Code', inplace=True)\ndata_2018 = expense_country_all['2018'].div(1000000000)","630f15b8":"import cartopy.io.shapereader as shpreader\nshpfilename = shpreader.natural_earth(resolution='110m',\n                                      category='cultural',\n                                      name='admin_0_countries')","02fc3b59":"import matplotlib as mpl\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.axes_grid1 import make_axes_locatable\nimport cartopy\nimport cartopy.crs as ccrs\nfrom cartopy.feature import ShapelyFeature\nfrom shapely.geometry.polygon import Polygon\n\n\nimport sys\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nfig = plt.figure(figsize=(20,10))\n\nax = plt.axes(projection=ccrs.PlateCarree())\n#ax = plt.axes(projection=ccrs.Robinson())\nax.add_feature(cartopy.feature.LAND)\nax.add_feature(cartopy.feature.COASTLINE)\nax.add_feature(cartopy.feature.BORDERS)\nax.add_feature(cartopy.feature.LAKES, alpha=0.95)\nax.add_feature(cartopy.feature.RIVERS)\n\nreader = shpreader.Reader(shpfilename)\ncountries = reader.records()\n\nfor country in countries:    \n    # default grey color\n    try:\n        color = (.5,.5,.5)\n        colors = sns.cubehelix_palette(4)        \n        if country.attributes['ADM0_A3'] in data_2018:\n            #print(country.attributes['ADM0_A3'])    \n            exp = data_2018[country.attributes['ADM0_A3']]\n            #print(exp)\n            \n            if np.isnan(exp):\n                color = (.5,.5,.5)\n            elif exp >= 100:\n                color = tuple(colors[3])\n            elif exp >= 50 and exp < 100:\n                color = tuple(colors[2])\n            elif exp >= 10 and exp < 50:\n                color = tuple(colors[1])\n            elif exp < 10:\n                color = tuple(colors[0])\n        #else :\n            #print(country.attributes['NAME_EN'])\n        \n        if isinstance(country.geometry, Polygon):\n            #ax.add_geometries(MultiPolygon(polygons=[testobj]), ccrs.PlateCarree(), \n            #             facecolor=color, label=country.attributes['ADM0_A3'])\n            ax.add_feature(ShapelyFeature([country.geometry], ccrs.PlateCarree()), facecolor=color)\n            #print(country.attributes['NAME_EN'])\n        else:\n            ax.add_geometries(country.geometry, ccrs.PlateCarree(), \n                          facecolor=color, label=country.attributes['ADM0_A3'])\n    except:\n        #e = sys.exc_info()[0]\n        exctype, value = sys.exc_info()[:2]\n        print('Error', country.attributes['NAME_EN'], exctype, value )\n        break\n    \n\ndivider = make_axes_locatable(ax)\nax_cb = divider.new_horizontal(size=\"2%\", pad=0.1, axes_class=plt.Axes)\nfig.add_axes(ax_cb)\n\nnorm = mpl.colors.Normalize(vmin=1,vmax=100)\nsm = plt.cm.ScalarMappable(cmap=sns.cubehelix_palette(4, as_cmap=True), norm=norm)\nsm.set_array([])\nplt.colorbar(sm, ticks=np.array([10,50,100]), fraction=0.046, pad=0.04, cax=ax_cb)\n\nax.set_title('Countries by military expenditures in 2018', fontsize=25)\nax_cb.set_title('Billion US $ > ', fontsize=10)\n\nplt.show()","e7847968":"### Animation - Millitary expense Top 20 countries from year 1960-2018","60ebe7b7":"United states and china alone has more than 50% share of millitary spendings than rest world.","09428659":"### Last decade spendings trend\n\n","1cb80a85":"## Geographically spendings","2d8df041":"As per above graph United state's spendings was increasing till year 2011. After that there is decline in spending. \nChina is consistently increasing Millitary spendings. Rest top 10 countries has small spikes in spendings. ","6eeca574":"# World Millitary expense analysis - Animation","8073fc6a":"## Country wise spendings","a2b56514":"There are total 4 categories. Get the count of each category records\n","ee9e15df":"### World map","ee06acfa":"### Average spendings","b070ddb0":"###  Global military expenditures by country for 2018, in US$ billions","2566bf75":"<h1>Table of Contents<span class=\"tocSkip\"><\/span><\/h1>\n<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#World-Millitary-expense-analysis---Animation\" data-toc-modified-id=\"World-Millitary-expense-analysis---Animation-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;<\/span>World Millitary expense analysis - Animation<\/a><\/span><ul class=\"toc-item\"><li><span><a href=\"#Country-wise-spendings\" data-toc-modified-id=\"Country-wise-spendings-1.1\"><span class=\"toc-item-num\">1.1&nbsp;&nbsp;<\/span>Country wise spendings<\/a><\/span><ul class=\"toc-item\"><li><span><a href=\"#Average-spendings\" data-toc-modified-id=\"Average-spendings-1.1.1\"><span class=\"toc-item-num\">1.1.1&nbsp;&nbsp;<\/span>Average spendings<\/a><\/span><\/li><li><span><a href=\"#Last-decade-spendings-trend\" data-toc-modified-id=\"Last-decade-spendings-trend-1.1.2\"><span class=\"toc-item-num\">1.1.2&nbsp;&nbsp;<\/span>Last decade spendings trend<\/a><\/span><\/li><li><span><a href=\"#Animation---Millitary-expense-Top-20-countries-from-year-1960-2018\" data-toc-modified-id=\"Animation---Millitary-expense-Top-20-countries-from-year-1960-2018-1.1.3\"><span class=\"toc-item-num\">1.1.3&nbsp;&nbsp;<\/span>Animation - Millitary expense Top 20 countries from year 1960-2018<\/a><\/span><\/li><li><span><a href=\"#Global-military-expenditures-by-country-for-2018,-in-US$-billions\" data-toc-modified-id=\"Global-military-expenditures-by-country-for-2018,-in-US$-billions-1.1.4\"><span class=\"toc-item-num\">1.1.4&nbsp;&nbsp;<\/span>Global military expenditures by country for 2018, in US$ billions<\/a><\/span><\/li><\/ul><\/li><li><span><a href=\"#Geographically-spendings\" data-toc-modified-id=\"Geographically-spendings-1.2\"><span class=\"toc-item-num\">1.2&nbsp;&nbsp;<\/span>Geographically spendings<\/a><\/span><ul class=\"toc-item\"><li><span><a href=\"#World-map\" data-toc-modified-id=\"World-map-1.2.1\"><span class=\"toc-item-num\">1.2.1&nbsp;&nbsp;<\/span>World map<\/a><\/span><\/li><\/ul><\/li><\/ul><\/li><\/ul><\/div>","73c7ed0c":"**Preamble**"}}