{"cell_type":{"b9aae7b3":"code","3e208019":"code","ba7b7198":"code","cc9e6333":"code","4005d333":"code","947ec877":"code","59b28a4d":"code","8bab7407":"code","97d355ac":"code","2315ae9a":"code","b482b3ef":"code","d0913bde":"code","024786bf":"code","522f531b":"code","fdb9aca4":"code","4317d1ba":"code","d02c5713":"code","af024be9":"code","3038a748":"code","fc1b9aff":"code","bf5f02f9":"code","d18d0711":"code","0401c321":"code","da7e372c":"code","c0be6ddd":"code","94c4f01b":"markdown","d08e468c":"markdown","a5835d23":"markdown"},"source":{"b9aae7b3":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px \n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        ","3e208019":"df = pd.read_csv('\/kaggle\/input\/suicide-rates-overview-1985-to-2016\/master.csv')\ndf","ba7b7198":"a = df.groupby(by='year').sum().reset_index()\na.loc[a['year'] < 2016].plot(x='year',y='suicides_no')","cc9e6333":"df.groupby(by=\"age\")['suicides_no'].sum().sort_values()","4005d333":"df.groupby(by='generation')['suicides_no'].sum().sort_values()","947ec877":"sns.heatmap(data=df.corr(),annot=True,cmap='YlGnBu');","59b28a4d":"a = df.groupby(by='country').sum().reset_index().sort_values(by='suicides_no',ascending=False).head(5)\n# fig,ax = plt.subplots()\n# ax.barh(a.country, a.suicides_no,c=a.country)\nplt.barh(a.country,a.suicides_no,color=['#365314','#3f6212','#4d7c0f','#65a30d','#84cc16'])\nplt.title('Countries with the highest number of suicides');","8bab7407":"a = df.groupby(by='country').mean().reset_index().sort_values(by='suicides\/100k pop',ascending=False)[['suicides\/100k pop','country']].head(5)\nplt.barh(a.country,a[\"suicides\/100k pop\"],color=['#365314','#3f6212','#4d7c0f','#65a30d','#84cc16'])\nplt.title('Countries with the highest suicides\/100k');","97d355ac":"changed_df = df.copy()","2315ae9a":"changed_df['sex'] = changed_df['sex'].replace('male',1)\nchanged_df['sex'] = changed_df['sex'].replace('female',0)","b482b3ef":"a = changed_df.groupby(by=['year','country']).agg({'suicides_no':'sum', 'gdp_per_capita ($)':'mean'}).reset_index()\nfig = px.scatter(a, x='gdp_per_capita ($)',y ='suicides_no', color='country',title='corr of gdp_per_capita ($) to suicides_no')\nfig.show()","d0913bde":"changed_df.drop(['generation','country-year'],axis=1,inplace=True)","024786bf":"changed_df.head()","522f531b":"dummies = pd.get_dummies(changed_df['country'])\nchanged_df = changed_df.join(dummies)","fdb9aca4":"changed_df.drop('country', axis=1,inplace=True)\nchanged_df.head(3)","4317d1ba":"changed_df[\"age\"] = changed_df[\"age\"].map({'5-14 years':1,'15-24 years':2,'25-34 years':3,'35-54 years':4,'55-74 years':5,'75+ years':6})","d02c5713":"changed_df[' gdp_for_year ($) '].replace(',','',regex=True,inplace=True)","af024be9":"(changed_df['HDI for year'].isna().sum()) \/ len(changed_df)","3038a748":"changed_df.drop('HDI for year',axis=1,inplace=True)\nchanged_df","fc1b9aff":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom sklearn.model_selection import train_test_split","bf5f02f9":"X = changed_df.drop('suicides_no',axis=1)\ny = changed_df['suicides_no']","d18d0711":"X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2)\nX_train.shape, X_test.shape, y_train.shape, y_test.shape","0401c321":"model = RandomForestRegressor(n_jobs=-1)\nmodel.fit(X_train,y_train)\n\npred = model.predict(X_test)\n\nrmse = np.sqrt(mean_squared_error(y_test,pred))\nprint(f'root mean squared error {rmse}')","da7e372c":"r2_score(y_test,pred)","c0be6ddd":"pd.DataFrame({'y_test':y_test,'pred':pred})","94c4f01b":"## Suicide Rates Overview 1985 to 2016\nhttps:\/\/www.kaggle.com\/russellyates88\/suicide-rates-overview-1985-to-2016","d08e468c":"there's an issue with the 'generation' variable as it appears to be defined based on the banded age variable & year.","a5835d23":"## Modeling"}}