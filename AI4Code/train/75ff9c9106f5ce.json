{"cell_type":{"00753cd8":"code","059dd413":"code","e5fe6d9a":"code","47249806":"code","9bfb01a0":"code","548d475b":"markdown"},"source":{"00753cd8":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.\ninputData=pd.read_csv(r\"..\/input\/BreadBasket_DMS.csv\")","059dd413":"mergedDateTime = inputData.Date +' '+inputData.Time\ninputData.index = (pd.to_datetime(mergedDateTime))\ninputData.drop([\"Time\",\"Date\",\"Transaction\"],axis=1,inplace=True)","e5fe6d9a":"startDate,endDate = \"2016-10\",\"2017-02\"\nitemName = \"Coffee\"\nsubset = inputData[startDate:endDate]\n# Group the data on hourly spans\ngroup = pd.DataFrame({\"ItemCount\":subset.groupby([subset.index.map(lambda t: t.hour),\"Item\"]).size()}).reset_index();\n\n# Now lets find the probabilities\n# Note this is an hourly probability - so we only consider items falling within\n# the hour span\nitemProbabilities = group[group[\"Item\"] == itemName]\nitemProbabilities.rename(index=int, columns={\"level_0\": \"Hour\"},inplace=True)\nitemProbabilities.drop([\"Item\"],axis= 1,inplace=True)\ntotal = np.float(itemProbabilities[\"ItemCount\"].sum())  \nitemProbabilities[\"ItemCount\"]=itemProbabilities[\"ItemCount\"].apply(lambda v:(v \/total)) # ItemCount will now hold probabilities\n","47249806":"itemProbabilities.head()","9bfb01a0":"fig = plt.figure(figsize = (15,5))\nax = fig.gca()\nx = itemProbabilities[\"Hour\"]\ny = itemProbabilities[\"ItemCount\"]\nplt.stem(x,y, markerfmt='go',label=\"Item Probabilities\")\nplt.legend()\nplt.xlabel('Time span',fontsize=10)\nplt.ylabel('Probability',fontsize=10)\nax.tick_params(labelsize=10)\nplt.title('Probability of {} sold during the day'.format(itemName),fontsize=20)\nplt.grid()\nplt.ioff()\nplt.show()\n","548d475b":"# A program the calulates the probability of an item sold during the 24 hour span of the day."}}