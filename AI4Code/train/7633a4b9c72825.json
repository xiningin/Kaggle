{"cell_type":{"d8aaa6f9":"code","473d35ed":"code","6b15b140":"code","cd8ee5d3":"code","015a043e":"code","aca9a10c":"markdown"},"source":{"d8aaa6f9":"import numpy as np\nimport pandas as pd\nimport sqlite3\nimport altair as alt\n\npd.set_option('display.float_format', lambda x: '%.2f' % x)\nconn = sqlite3.connect('..\/input\/188-million-us-wildfires\/FPA_FOD_20170508.sqlite')\nfires = pd.read_sql(\"\"\"SELECT * FROM fires\"\"\", con=conn)\n\n# table_list = pd.read_sql(\"SELECT name FROM sqlite_master WHERE type='table';\", con=conn)\n# table_list","473d35ed":"FIRE_SIZE_THRESHOLD = 500\n\nbig_fires = fires[fires.FIRE_SIZE>FIRE_SIZE_THRESHOLD]\nbig_fire_count = pd.DataFrame(big_fires.groupby(['STAT_CAUSE_DESCR']).OBJECTID.count().sort_values(ascending=False)).reset_index()\nbig_fire_count.rename(columns={'OBJECTID': 'num_fires'}, inplace=True)\nalt.Chart(big_fire_count).mark_bar().encode(\n    alt.X('STAT_CAUSE_DESCR', sort='-y', title=None),\n    alt.Y('num_fires', title='Number of Fires'),\n).properties(title=f'Count of Fires Larger than {FIRE_SIZE_THRESHOLD} Acres',\n    width=600,\n    height=300\n).configure_axis(\n    labelFontSize=14,\n    titleFontSize=14\n)\n","6b15b140":"acres_by_cause = pd.DataFrame(fires.groupby(['STAT_CAUSE_DESCR']).FIRE_SIZE.sum().sort_values(ascending=False)).reset_index()\nacres_by_cause.rename(columns={'FIRE_SIZE': 'Acres'}, inplace=True)\nalt.Chart(acres_by_cause).mark_bar().encode(\n    alt.X('STAT_CAUSE_DESCR', sort='-y', title=None),\n    alt.Y('Acres'),\n).properties(\n    title=f'Acres Burned by Cause',\n    width=600,\n    height=300\n).configure_axis(\n    labelFontSize=14,\n    titleFontSize=14\n)\n","cd8ee5d3":"acres_by_year = pd.DataFrame(fires.groupby(['FIRE_YEAR']).FIRE_SIZE.sum().sort_values(ascending=False)).reset_index()\nacres_by_year.rename(columns={'FIRE_SIZE': 'Acres'}, inplace=True)\n\nalt.Chart(acres_by_year).mark_line().encode(\n    alt.X('FIRE_YEAR:N', title=None),\n    alt.Y('Acres'),\n).properties(\n    title=f'Acres Burned by Year',\n    width=600,\n    height=300,\n).configure_axis(\n    labelFontSize=14,\n    titleFontSize=14\n)\n","015a043e":"frac_by_lightning = (fires.query('STAT_CAUSE_DESCR==\"Lightning\"').groupby(['FIRE_YEAR']).FIRE_SIZE.sum() \/ acres_by_year.set_index('FIRE_YEAR').Acres)\nfrac_by_lightning.name = 'frac_acres_lightning'\nfrac_by_lightning = pd.DataFrame(frac_by_lightning).reset_index()\n\nalt.Chart(frac_by_lightning).mark_line().encode(\n    alt.X('FIRE_YEAR:N', title=None),\n    alt.Y('frac_acres_lightning', title=None),\n).properties(\n    title=f'Fraction of Burned Acres Caused By Lightning Induced Fires',\n    width=600,\n    height=300\n).configure_axis(\n    labelFontSize=14,\n    titleFontSize=14\n)\n","aca9a10c":"### Notes\n\nThis is data from the US collected between 1992 and 2015. Fire patterns are probably different now than during most of the data collection period.\n\nGiven that data came from [here](https:\/\/www.fs.usda.gov\/rds\/archive\/catalog\/RDS-2013-0009.4), it seems we don't have a dynamically updating data source."}}