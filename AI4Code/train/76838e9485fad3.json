{"cell_type":{"0a44ef96":"code","03e79b54":"code","b635599a":"code","48862d6a":"code","798b4cad":"code","fc50bfc8":"code","9a88cdfb":"code","1ef69ba2":"code","789a8450":"code","63bdcd5d":"code","7e8aecb2":"code","551719da":"code","24ad3cea":"code","d05e61e1":"code","4f0cc4f1":"code","c16156a0":"markdown","4e971d98":"markdown","f1e02b1a":"markdown","e05936bb":"markdown","3f01b0ad":"markdown","c146249f":"markdown","d0a84b6b":"markdown","de0e10bb":"markdown","d97cc830":"markdown","c1885c54":"markdown","7b5b0228":"markdown","1389ad7f":"markdown","42564cfb":"markdown","416fdf1e":"markdown","3061fe49":"markdown"},"source":{"0a44ef96":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","03e79b54":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib notebook\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom IPython.display import HTML\nimport calendar\nfrom plotly.subplots import make_subplots\nimport datetime\nimport seaborn as sb","b635599a":"df = pd.read_csv('..\/input\/daily-temperature-of-major-cities\/city_temperature.csv')\ndf.head()\n","48862d6a":"num_features = ['Month','Day','Year','AvgTemperature']\ndf_hist = df[num_features]\ndf_hist.hist(bins =20)\n","798b4cad":"#Remove records with -99 temp\ndf=df.drop(df[df['AvgTemperature']==-99.0].index)","fc50bfc8":"df.isnull().sum()","9a88cdfb":"#Rempove State column\ndf= df.drop(['State'], axis = 1) \n\n# Make new Date column\ndf['Date']=df.apply(lambda x: datetime.date(x['Year'], x['Month'], x['Day']), axis=1)\ndf.head()","1ef69ba2":"plt.close()\ndf_2 = df.groupby('Region').mean()\ndf_2.reset_index(inplace=True)\ndf_2.head()\np1=sb.barplot(x='Region',y= 'AvgTemperature',data=df_2)\np1.set_xticklabels(p1.get_xticklabels(),rotation=20,ha='right')\n\n","789a8450":"plt.close()\ndf_3 = df[df['Region']== 'Middle East']\ndf_3.head()\ndf_3['Country'].unique()\ndf_4 = df_3.groupby('Country').mean()\ndf_4.reset_index(inplace=True)\ndf_4.head()\np1=sb.barplot(x='Country',y= 'AvgTemperature',data=df_4)\np1.set_xticklabels(p1.get_xticklabels(),rotation=20,ha='right')","63bdcd5d":"plt.close()\ndf_5 = df[df['Country']=='United Arab Emirates']\ndf_5.head()\ndf_5['City'].unique()\ndf_6 = df_5.groupby('City').sum()\ndf_6.reset_index(inplace=True)\ndf_6.head()\np1=sb.barplot(x='City',y= 'AvgTemperature',data=df_6,order=df_6.sort_values('AvgTemperature',ascending = False).City)\np1.set_xticklabels(p1.get_xticklabels(),rotation=20,ha='right')","7e8aecb2":"plt.close()\nplt.figure(figsize=(17,6))\ndf.groupby(['Region','Country'])['AvgTemperature'].max().sort_values(ascending=False).head(10).plot(kind = 'bar',rot =15)","551719da":"plt.close()\nplt.figure(figsize=(14,8))\n#sb.set(rc={'figure.figsize':(8,6)})\ng1 = sb.lineplot(x = df['Year'],y =df['AvgTemperature'],hue = df['Region'],palette=sb.color_palette(\"colorblind\", 7))\nplt.title('Change in temperature across Regions : 1995-2020')\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1)\nplt.legend(bbox_to_anchor=(1,1), loc=2)\nplt.show()","24ad3cea":"plt.close()\n#plt.figure(figsize=(17,6))\n#fig, axes = plt.subplots(1,7, figsize=(12,3))\na2=[]\nfor r in df['Region'].unique():\n    a1 =df[df['Region']==r].groupby(['Year','Month','Country'])['AvgTemperature'].max().head(1)\n    a2.append(a1.to_frame())\n\nprint(a2)","d05e61e1":"c2 =[]\nc3 = []\nfor y in df['Year'].unique():\n    c1 =df[df['Year']==y].groupby(['AvgTemperature','Region']).min()['Year'].head(1)\n    c2.append(c1.keys()[0])\n    c3.append(str(c1.to_list()))\n    \n\n    \nd = pd.DataFrame(c2,columns=['AvgTemperature','Region'])\nd['Year'] =pd.Series(c3, dtype=\"string\")\n\nfig = px.bar(d, x='AvgTemperature', y='Year',\n             hover_data=['Region'], color='AvgTemperature',\n             labels={'y':'Region'},height=600)\nfig.show()\n\n","4f0cc4f1":"#fig, axes = plt.subplots(1,7, figsize=(12,3))\nc2 =[]\nc3 = []\nfor y in df['Year'].unique():\n    c1 =df[df['Year']==y].groupby(['AvgTemperature','Region']).min()['Year'].sort_values(ascending=False).head(1)\n    #print(str(c1))\n    c2.append(c1.keys()[0])\n    #print(\"C2\" , c2)\n    c3.append(str(c1.to_list()))\n    #print(\"C3\" , c3)\n\n    \nd = pd.DataFrame(c2,columns=['AvgTemperature','Region'])\nd['Year'] =pd.Series(c3, dtype=\"string\")\n\nfig = px.bar(d, x='AvgTemperature', y='Year',\n             hover_data=['Region'], color='AvgTemperature',\n             labels={'y':'Region'},height=600)\nfig.show()\n\n","c16156a0":"AvgTemperature has extreme value = -99. Hence,remove the rows with -99 avg temperature","4e971d98":" **Change in temperature across regions in 25 years**","f1e02b1a":"**2019 is the hottest year so far(quite consistent with the real scenario!!) . IF hovered upon ,ONLY AFRICA(in blue) & MIDDLE EAST have been the hottest regions across years. The hottest temperature value has been increasing to even higher values since 1995 clearly indicating the impact of rising temperatures**","e05936bb":"**Let us now look out for hottest days along with respective temperatures in Every Country**","3f01b0ad":" **1999 has been the coolest year so far.If hovered across, we find that ONLY ASIA and NORTH AMERICA have stayed the coolest. The coolest temperature value is decreasing to a even lower value which clearly indicates the impact of rising temperatures across the world**","c146249f":"**Asia, Europe ,North America and Middle East have declining average temperatures as compared to other 3 Regions. The temperature has drastically reduced after 2020 for all 4 regions**","d0a84b6b":"# **DATA CLEANING**\n\n1. Plot the histogram of all the numerical columns : This shows the distribution of values in that column","de0e10bb":"State column has significant number of null values.Hence, thos column can be dropped. Also Date, year and mont hcan be combined to form a new Date column.","d97cc830":"2. Check for null values","c1885c54":"Dubai has the highest contribution in the UAE, Middle East Region.\n**The same can be done for other Regions as well, but sice Middle East has by far the largest increase, we focus only on that for now**","7b5b0228":"**3#** # **UAE it is!!!**. Exploring further , let's see which city in US contributes the most","1389ad7f":"# **LET'S START EXPLORING THE DATA. IT'S READY TO USE !!!**","42564cfb":"**2#** Let's check out which countries in North America have contributed the most towards rise in avg temeprature","416fdf1e":"**1#**Regionwise change in temperature : The plot shows that **Middle East** has the highest variation in average temperature","3061fe49":"# **Now lets see the top 10 countries Region wise with highes temperatures recorded so far**"}}