{"cell_type":{"a1e12f05":"code","302c3004":"code","081562a2":"code","634ef767":"code","7e678d9a":"code","74c48412":"code","8b776396":"code","d0c1f718":"code","4639a35e":"code","bc071931":"code","c89b0606":"code","8a0a2106":"code","d76b52e4":"code","c9d781bd":"code","39331bcb":"code","45278118":"code","c338e878":"code","24515cb1":"code","e47d6296":"code","a83b065e":"code","f0757617":"code","09d98351":"code","941adc41":"code","d0b35e72":"code","be2692be":"code","4e6869eb":"code","88931315":"code","c36c1f54":"code","66114e5b":"code","ad5ec70e":"code","c82cb175":"code","8099734d":"code","49102d64":"code","25a18461":"code","1ea8343b":"code","c84d0af6":"code","0532e146":"code","231e837b":"code","1b326e21":"code","d371cd6f":"code","a4398212":"code","ed15a225":"code","41ed4930":"code","2b91c578":"code","0abd4b6f":"code","3e96e994":"code","c2ad493f":"code","a52e651d":"code","0aee96c9":"code","c5f9482d":"code","cc6a3f65":"code","4b6543d1":"code","b93a063e":"code","bc762501":"code","1a681b62":"code","4735acf3":"code","58b0c4ab":"code","16208224":"code","23679de8":"code","d9441e23":"code","ac44df95":"code","8ba8f030":"code","f7ea8179":"markdown","fccba765":"markdown","57ad6ba3":"markdown","7b210785":"markdown","46024e1d":"markdown"},"source":{"a1e12f05":"#Housing Case Study !!!","302c3004":"import pandas as pd\nimport numpy as np","081562a2":"data=pd.read_csv('..\/input\/housing-simple-regression\/Housing.csv')","634ef767":"data.head()","7e678d9a":"#What type of values stored in columns...\ndata.info()","74c48412":"data['furnishingstatus'].value_counts()","8b776396":"#Converting Yes to 1 and No to 0\ndata['mainroad']=data['mainroad'].map({'yes':1,'no':0})\ndata['guestroom']=data['guestroom'].map({'yes':1,'no':0})\ndata['basement']=data['basement'].map({'yes':1,'no':0})\ndata['hotwaterheating']=data['hotwaterheating'].map({'yes':1,'no':0})\ndata['airconditioning']=data['airconditioning'].map({'yes':1,'no':0})\ndata['prefarea']=data['prefarea'].map({'yes':1,'no':0})","d0c1f718":"data.head()","4639a35e":"status=pd.get_dummies(data['furnishingstatus'],drop_first=True)","bc071931":"status.head()","c89b0606":"data=pd.concat([data,status],axis=1)","8a0a2106":"data.head()","d76b52e4":"data.drop(['furnishingstatus'],axis=1,inplace=True)","c9d781bd":"data.head()","39331bcb":"#CREATING NEW VARIABLES..\ndata['areaperbedroom']=data['area']\/data['bedrooms']\n","45278118":"data['bbratio']=data['bathrooms']\/data['bedrooms']","c338e878":"data.head()","24515cb1":"def normalize(x):\n    return ((x-np.min(x))\/(max(x)-min(x)))\n","e47d6296":"#Applying Normalize to all columns","a83b065e":"data=data.apply(normalize)","f0757617":"data.head()","09d98351":"data.columns","941adc41":"X=data[['area', 'bedrooms', 'bathrooms', 'stories', 'mainroad',\n       'guestroom', 'basement', 'hotwaterheating', 'airconditioning',\n       'parking', 'prefarea', 'semi-furnished', 'unfurnished',\n       'areaperbedroom', 'bbratio']]\ny=data['price']","d0b35e72":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.3,random_state=100)","be2692be":"import statsmodels.api as sm\nX_train=sm.add_constant(X_train)\nlm_l=sm.OLS(y_train,X_train).fit()","4e6869eb":"print(lm_l.summary())","88931315":"# # Variables might be correlated with each  other...\n# # What about if we have more than 1 columns which is highly correlated\n# #Correlation matrix can only work for 2 variables but for not more than 2\n\n\n# We will Use VIF (Variance  Inflation Factor)\n# VIF(x)=1\/(1-R^2)\n#if R^2 Higher VIF also Higher \n#Higher the VIF Higher the muticollinearity   \n#Variable with Higher VIF may not be statistically significant\n","c36c1f54":"#FUNCTION FOR VIF","66114e5b":"def vif_cal(input_data,dependent_col):\n    vif_df=pd.DataFrame(columns=['Var','Vif'])\n    x_vars=input_data.drop([dependent_col],axis=1)\n    x_var_names=x_vars.columns\n    for i in range(0,x_var_names.shape[0]):\n        y=x_vars[x_var_names[i]]\n        x=x_vars[x_var_names.drop(x_var_names[i])]\n        rsq=sm.OLS(y,x).fit().rsquared\n        vif=round(1\/(1-rsq),2)\n        vif_df.loc[i]=[x_var_names[i],vif]\n    return vif_df.sort_values(by='Vif',axis=0,ascending=False,inplace=False)","ad5ec70e":"vif_cal(input_data=data,dependent_col=\"price\")","c82cb175":"# REMOVE BB RATIO BECAUSE IT HAS HIGH P-value and high VIF","8099734d":"#CORRELATION MATRIX","49102d64":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","25a18461":"plt.figure(figsize=(16,10))\nsns.heatmap(data.corr(),annot=True)","1ea8343b":"#Dropping The variable and Updating The model","c84d0af6":"X_train=X_train.drop(['bbratio'],axis=1)","0532e146":"lm_2=sm.OLS(y_train,X_train).fit()","231e837b":"print(lm_2.summary())","1b326e21":"vif_cal(input_data=data.drop(['bbratio'],axis=1),dependent_col=\"price\")","d371cd6f":"#DROPPING BEDROOM ALSO\nX_train=X_train.drop(['bedrooms'],axis=1)","a4398212":"lm_3=sm.OLS(y_train,X_train).fit()","ed15a225":"print(lm_3.summary())","41ed4930":"vif_cal(input_data=data.drop(['bbratio','bedrooms'],axis=1),dependent_col=\"price\")","2b91c578":"#Removing Area PEr Bedroom","0abd4b6f":"X_train=X_train.drop(['areaperbedroom'],axis=1)","3e96e994":"lm_4=sm.OLS(y_train,X_train).fit()","c2ad493f":"lm_4.summary()","a52e651d":"vif_cal(input_data=data.drop(['bbratio','bedrooms','areaperbedroom'],axis=1),dependent_col=\"price\")","0aee96c9":"#REMOVING SEMI-FURNISHED ALSO","c5f9482d":"X_train.drop(['semi-furnished','basement'],axis=1,inplace=True)","cc6a3f65":"lm_5=sm.OLS(y_train,X_train).fit()","4b6543d1":"print(lm_5.summary())","b93a063e":"vif_cal(input_data=data.drop(['bbratio','bedrooms','areaperbedroom','semi-furnished','basement'],axis=1),dependent_col=\"price\")","bc762501":"# DESIGN model by dropping all variables one by one with high VIF. Then compare results","1a681b62":"X_test_m5=sm.add_constant(X_test)","4735acf3":"X_test_m5=X_test_m5.drop(['bbratio','bedrooms','areaperbedroom','semi-furnished','basement'],axis=1)","58b0c4ab":"y_pred_m5=lm_5.predict(X_test_m5)","16208224":"#MODEL EVALUATION","23679de8":"from sklearn.metrics import mean_squared_error,r2_score\nmse=mean_squared_error(y_test,y_pred_m5)\nrsq=r2_score(y_test,y_pred_m5)","d9441e23":"mse","ac44df95":"rsq","8ba8f030":"#We can also use RFE...","f7ea8179":"**DATA PREPARATION**","fccba765":"Problem Statement :\n    Consider a real estate company that has a dataset containing the prices of properties in Delhi Region. It wishes to use the \n    data to optimise the sale prices of properties based on important factors such as Area , Bedrooms , Parking etc.\n    \n    Essentially the company wants :\n        1 to identify variables affecting house prices. Eg : Area , Number of rooms , bathrooms etc\n        2 to create a linear model that quantitatively relates house prices with variables such as No of rooms .. etc\n        3 to know the accuracy of model , i.e. how well these variables can predict house prices.\n        ","57ad6ba3":"Building A linear model","7b210785":"RESCALING THE FEATURES...\nIt is extremely important to rescale variables so that they have a comprable scale. 2 ways of rescaling :\n    1. Normalization (min-max scaling)\n    2. standardisation (mean-0,sigma-1). Try Normalization","46024e1d":"**Housing Case Study**"}}