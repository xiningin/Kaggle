{"cell_type":{"dc1bb241":"code","d9b8771c":"code","94be1451":"code","b0c63115":"code","016884fb":"code","8859cdd6":"code","dbe84969":"code","17621455":"code","2f8ea739":"code","410a4138":"code","00ab904a":"code","a393978b":"code","168c0418":"code","238f7d33":"code","86ec0549":"code","18d1a690":"code","baa0d0ea":"code","6526577d":"code","d8a7adbd":"markdown","4eb1afff":"markdown","c3d36496":"markdown","4e5516ca":"markdown","83b53b9d":"markdown","3bb54776":"markdown"},"source":{"dc1bb241":"import sys\n!{sys.executable} -m pip install bar_chart_race","d9b8771c":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport bar_chart_race as bcr\nfrom IPython.display import HTML\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom IPython.display import Video\nfrom tqdm import tqdm","94be1451":"data = pd.read_csv('..\/input\/world-covid-varients\/covid-variants.csv')\ndata","b0c63115":"data.columns","016884fb":"data2=data[['date','variant','location','perc_sequences']].copy()\ndata2","8859cdd6":"print(data2.variant.unique())\nprint(data2.location.unique())","dbe84969":"data2.info()","17621455":"data2[\"date\"]=data2[\"date\"].apply(pd.to_datetime, dayfirst=True)\ndata2=data2.fillna(0)","2f8ea739":"data3us=data2[data2.location=='United States']\ndata3bz=data2[data2.location=='Brazil']\ndata3in=data2[data2.location=='India']\ndata3jp=data2[data2.location=='Japan']\ndata3cl=data2[data2.location=='Colombia']","410a4138":"# set double indexes and unstack!!!\ndata4us=data3us.set_index(['date','variant']).unstack()['perc_sequences']\ndata4bz=data3bz.set_index(['date','variant']).unstack()['perc_sequences']\ndata4in=data3in.set_index(['date','variant']).unstack()['perc_sequences']\ndata4jp=data3jp.set_index(['date','variant']).unstack()['perc_sequences']\ndata4cl=data3cl.set_index(['date','variant']).unstack()['perc_sequences']","00ab904a":"countries=['US','Brazil','India','Japan','Colombia']\ndataset=[data4us,data4bz,data4in,data4jp,data4cl]","a393978b":"def make_bcr(df,name):\n    bcr.bar_chart_race(\n        df=df,\n        filename='BCR_CovidVariants_'+name+'.mp4',\n        orientation='h',\n        sort='desc',\n        n_bars=5,\n        fixed_order=False,\n        fixed_max=False,\n        steps_per_period=10,\n        interpolate_period=False,\n        label_bars=True,\n        bar_size=.95,\n        period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n        #period_fmt='%B %d, %Y',\n        period_summary_func=lambda v, r: {'x': .99, 'y': .18,'s': '',\n                                          'ha': 'right', 'size': 8, 'family': 'Courier New'},\n        #perpendicular_bar_func='median',\n        period_length=1000,\n        figsize=(5,3),\n        dpi=500,\n        cmap='dark24',\n        title='Covid Variants in '+name,\n        title_size=10,\n        bar_label_size=7,\n        tick_label_size=5,\n        shared_fontdict={'color' : '.1'},\n        scale='linear',\n        writer=None,\n        fig=None,\n        bar_kwargs={'alpha': .7},\n        filter_column_colors=True)","168c0418":"for i in tqdm(range(5)):\n    make_bcr(dataset[i],countries[i])","238f7d33":"Video(\"\/kaggle\/working\/BCR_CovidVariants_\"+countries[0]+\".mp4\", width=600, height=400, embed=True)","86ec0549":"Video(\"\/kaggle\/working\/BCR_CovidVariants_\"+countries[1]+\".mp4\", width=600, height=400, embed=True)","18d1a690":"Video(\"\/kaggle\/working\/BCR_CovidVariants_\"+countries[2]+\".mp4\", width=600, height=400, embed=True)","baa0d0ea":"Video(\"\/kaggle\/working\/BCR_CovidVariants_\"+countries[3]+\".mp4\", width=600, height=400, embed=True)","6526577d":"Video(\"\/kaggle\/working\/BCR_CovidVariants_\"+countries[4]+\".mp4\", width=600, height=400, embed=True)","d8a7adbd":"# Variants of Concern synonyms\nhttps:\/\/covariants.org\/\n* alpha: B.1.1.7 \n* beta: B.1.351 \n* gammma: P.1 \n* delta: B.1.617.2 \n* kappa: B.1.617.1 \n* epsilon: B.1.427, B.1.429\n* eta: B.1.525 \n* iota: B.1.526\n* lambda: C.37\n* mu: B.1.621\n","4eb1afff":"* Mu is spreading in Colombia.\n* Eta is found in Japan.","c3d36496":"# Dataframe for Bar Chart Race","4e5516ca":"# Data preparation","83b53b9d":"# Bar Chart Race of World Covid19 Variants\n* cf. https:\/\/www.dexplo.org\/bar_chart_race\/\n* cf. https:\/\/github.com\/dexplo\/bar_chart_race\/","3bb54776":"# Create Bar Chart Race\n"}}