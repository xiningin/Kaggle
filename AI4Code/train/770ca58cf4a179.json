{"cell_type":{"af9b078f":"code","f1d28df6":"code","a87bbf3b":"code","c8cff4a9":"code","db4a1b6f":"code","abba6820":"code","b8824bfd":"code","6db3b141":"code","50537cc6":"code","62338e88":"code","66877cde":"code","1b144ece":"code","86c1e909":"code","195998e7":"code","74369b43":"code","0651f987":"code","72214c3b":"code","feae4302":"code","193a5328":"code","d8027b68":"code","5b760c25":"code","87537b13":"code","a0178d22":"code","c5d6c394":"code","d225545e":"code","43e554ce":"code","5429d366":"code","11053e1b":"code","d4c11767":"code","1f126a60":"code","5f1829a4":"code","d89096ff":"code","3d89b67a":"code","183804ff":"code","a4382aeb":"code","ee55a65d":"code","0e8c5132":"code","d101cac2":"code","f4c551fa":"code","d8668e43":"code","6e15d507":"code","15c54c19":"code","7e3a8e9b":"code","66488869":"markdown","796f82eb":"markdown","293b78b5":"markdown","635a9cd1":"markdown","a671eeba":"markdown","d6e414ca":"markdown","49f89149":"markdown","3e7df38d":"markdown","9d711230":"markdown","de7d4cf3":"markdown","17c752da":"markdown","b7d4b8ac":"markdown","223b53b8":"markdown","9341306d":"markdown","cadf48c7":"markdown","fb6dddc1":"markdown","f5a864f2":"markdown","2c454ab8":"markdown","f9af2daa":"markdown","c56635e6":"markdown","648e4559":"markdown"},"source":{"af9b078f":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nimport re\n\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\n\nfrom sklearn import preprocessing\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import r2_score\nfrom sklearn import metrics\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")","f1d28df6":"df = pd.read_csv('\/kaggle\/input\/brasilian-houses-to-rent\/houses_to_rent.csv')","a87bbf3b":"df.head()","c8cff4a9":"df['hoa'] = df['hoa'].replace('Sem info','0')\ndf['hoa'] = df['hoa'].replace('Incluso','0')","db4a1b6f":"df['property tax'] = df['property tax'].replace('Sem info','0')\ndf['property tax'] = df['property tax'].replace('Incluso','0')","abba6820":"df.info()","b8824bfd":"df.total = df['total'].map(lambda x: re.sub('\\D', '', x))\ndf.hoa = df.hoa.map(lambda x: re.sub('\\D', '', x))\ndf['rent amount'] = df['rent amount'].map(lambda x: re.sub('\\D', '', x))\ndf['property tax'] = df['property tax'].map(lambda x: re.sub('\\D', '', x))\ndf['fire insurance'] = df['fire insurance'].map(lambda x: re.sub('\\D', '', x))\n\n# [.map()] Used for substituting each value in a Series with another value\n# [\\D] Matches any character which is not a decimal digit.\n\ndf.head(1)","6db3b141":"df.isnull().sum()","50537cc6":"df.total = pd.to_numeric(df.total).astype(float)\ndf.hoa = pd.to_numeric(df.hoa).astype(float)\ndf['rent amount'] = pd.to_numeric(df['rent amount']).astype(float)\ndf['property tax'] = pd.to_numeric(df['property tax']).astype(float)\ndf['fire insurance'] = pd.to_numeric(df['fire insurance']).astype(float)","62338e88":"df.info()","66877cde":"plt.boxplot(df.total)","1b144ece":"df[df.total > 50000]","86c1e909":"df = df.drop([1269, 3303, 2611, 5627])","195998e7":"df.drop(columns=['total'], inplace=True)","74369b43":"plt.figure(figsize=(10,6))\nsns.boxplot(x='rooms', y='rent amount', data=df)","0651f987":"plt.figure(figsize=(10,6))\nsns.boxplot(x='bathroom', y='rent amount', data=df)","72214c3b":"plt.figure(figsize=(14,10))\nminha_ordem = df.groupby('floor')['rent amount'].median().sort_values().iloc[::-1].index\nsns.boxplot(x='floor', y='rent amount', data=df, order=minha_ordem)","feae4302":"df.floor = df.floor.map(lambda x: re.sub('-', '10', x))\ndf.floor = pd.to_numeric(df.floor).astype(float)","193a5328":"df['animal'].value_counts().plot(kind='pie', autopct = '%.2f%%')","d8027b68":"df['furniture'].value_counts().plot(kind='pie', autopct = '%.2f%%')","5b760c25":"print(pd.DataFrame(df.groupby('furniture')['rent amount'].mean()))\ndf.groupby('furniture')['rent amount'].mean().plot(kind='barh')","87537b13":"sns.pairplot(df, y_vars=['rent amount'], x_vars=['floor', 'hoa','property tax', 'fire insurance'])","a0178d22":"df_s = pd.DataFrame(preprocessing.scale(df[['area', 'rooms', 'bathroom', 'parking spaces', 'floor', 'hoa', 'rent amount',\n                             'property tax', 'fire insurance']]))","c5d6c394":"df[['area', 'rooms', 'bathroom', 'parking spaces', 'floor', 'hoa', 'rent amount', 'property tax', 'fire insurance']] = df_s","d225545e":"df.isna().sum()","43e554ce":"df[df.isna().any(axis=1)]","5429d366":"df.drop(index=[6076, 6077, 6078, 6079],inplace=True)","11053e1b":"df.drop(columns=['Unnamed: 0'], inplace=True)\n# Essa coluna n\u00e3o nos diz nada","d4c11767":"df = pd.get_dummies(df, columns=['animal', 'furniture'], drop_first=True)","1f126a60":"df.head(1)","5f1829a4":"X = df.drop(columns=['rent amount'])\ny = df['rent amount']","d89096ff":"results = sm.OLS(y, X).fit()\nprint(results.summary())","3d89b67a":"X = X.drop(columns=['animal_not acept'])\nresults = sm.OLS(y, X).fit()\nprint(results.summary())","183804ff":"X = X.drop(columns=['area'])\nresults = sm.OLS(y, X).fit()\nprint(results.summary())","a4382aeb":"X = X.drop(columns=['bathroom'])\nresults = sm.OLS(y, X).fit()\nprint(results.summary())","ee55a65d":"X = X.drop(columns=['city'])\nresults = sm.OLS(y, X).fit()\nprint(results.summary())","0e8c5132":"X = X.drop(columns=['furniture_not furnished'])\nresults = sm.OLS(y, X).fit()\nprint(results.summary())","d101cac2":"X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=34)","f4c551fa":"model = LinearRegression()\nmodel.fit(X_train, y_train)","d8668e43":"predictions = model.predict(X_test)","6e15d507":"plt.scatter(y_test,predictions)","15c54c19":"score = r2_score(y_test, predictions)\nprint(score)","7e3a8e9b":"print('MAE:', metrics.mean_absolute_error(y_test, predictions))\nprint('MSE:', metrics.mean_squared_error(y_test, predictions))\nprint('RMSE:', np.sqrt(metrics.mean_squared_error(y_test, predictions)))","66488869":"Andares mais altos tem em geral custos maiores. \nO tra\u00e7o, que representa casas, est\u00e1 entre os valores maiores de 10. Vou substitu\u00ed- lo por 10.","796f82eb":"## Modelagem e avalia\u00e7\u00e3o","293b78b5":"O P-valor de city \u00e9 maior que 0,05 tem o maior valor","635a9cd1":"O rent amount tem um rela\u00e7\u00e3o forte com o fire insurance","a671eeba":"Temos nas colunas hoe e property tax os valores: Incluso e Sem info. Vamos substitu\u00ed-los por zero","d6e414ca":"O P-valor de area \u00e9 maior que 0,05 tem o maior valor","49f89149":"#print(*df['property tax'].unique(), sep='\\n')","3e7df38d":"Transformar o tipo de object para float","9d711230":"## Adequa\u00e7\u00e3o dos dados","de7d4cf3":"O P-valor de furniture_not furnished \u00e9 maior que 0,05 tem o maior valor","17c752da":"O valor m\u00e1ximo positivo do r2 \u00e9 1. Quanto mais pr\u00f3ximo de 1 melhor","b7d4b8ac":"O P-valor de bathroom \u00e9 maior que 0,05 tem o maior valor","223b53b8":"Nessa base temos caracter\u00edsticas de im\u00f3veis de retornam o valor total a ser gasto mensalmente. Tentarie prever qual o rent amount de acordo com os outras caracter\u00edsticas.\n#### N\u00e3o faz sentido tentar prever o total sendo que ele \u00e9 diretamente atralado ao rent amount.","9341306d":"O P-valor de animal acept \u00e9 maior que 0,05 tem o maior valor. \u00c9 o primeiro a ser retirado","cadf48c7":"* O 1269 tem um valor absurdo de condom\u00ednio, 220000,00. O 3303 tem condom\u00ednio de 200000. N\u00e3o deve estar correto\n* O 2611 tem o valor de IPUT de 313700,00 com 42 metros quadrados. \n* O 5627 tem IPUT de 366300,00\n* O \u00fanico com valor plaus\u00edvel \u00e9 o 3381. ","fb6dddc1":"Precisamos remover os s\u00edmbolos R$ ","f5a864f2":"As \u00faltimas quatro linhas s\u00e3o as que contem Nan","2c454ab8":"## An\u00e1lise explorat\u00f3ria","f9af2daa":"## Sele\u00e7\u00e3o de vari\u00e1veis","c56635e6":"# Outliers","648e4559":"#print(*df.hoa.unique(), sep='\\n')"}}