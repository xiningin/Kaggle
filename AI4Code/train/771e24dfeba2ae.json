{"cell_type":{"b66ee45f":"code","f81ea935":"code","3f2367c8":"code","17972196":"code","529921c0":"code","1dbf2d7a":"code","9e8ac290":"code","f48810d0":"code","eb1e3f04":"code","fb362fec":"code","30f0aa10":"code","5fb12cd3":"code","944c1fd4":"code","362c0a84":"code","b1640afd":"markdown"},"source":{"b66ee45f":"import os\nimport pandas as pd\nimport numpy as np\nfrom pathlib import Path\nfrom PIL import Image\nfrom tqdm.notebook import tqdm","f81ea935":"data_path = Path('..\/input\/prostate-cancer-grade-assessment\/')\nos.listdir(data_path)","3f2367c8":"!cd ..\/input\/prostate-cancer-grade-assessment\/; du -h","17972196":"os.listdir(data_path\/'train_images')","529921c0":"import pandas as pd\ntrain_df = pd.read_csv(data_path\/'train.csv')\ntrain_df.head(10)","1dbf2d7a":"print('Number of whole-slide images in training set: ', len(train_df))","9e8ac290":"sample_image = train_df.iloc[np.random.choice(len(train_df))].image_id\nprint(sample_image)","f48810d0":"import openslide","eb1e3f04":"openslide_image = openslide.OpenSlide(str(data_path\/'train_images'\/(sample_image+'.tiff')))","fb362fec":"openslide_image.properties","30f0aa10":"img = openslide_image.read_region(location=(0,0),level=2,size=(openslide_image.level_dimensions[2][0],openslide_image.level_dimensions[2][1]))\nimg","5fb12cd3":"Image.fromarray(np.array(img.resize((512,512)))[:,:,:3])","944c1fd4":"Image.save?","362c0a84":"for i in tqdm(train_df['image_id'],total=len(train_df)):\n    openslide_image = openslide.OpenSlide(str(data_path\/'train_images'\/(i+'.tiff')))\n    img = openslide_image.read_region(location=(0,0),level=2,size=(openslide_image.level_dimensions[2][0],openslide_image.level_dimensions[2][1]))\n    Image.fromarray(np.array(img.resize((256,256)))[:,:,:3]).save(i+'.jpeg')\n    ","b1640afd":"That's right, the images are a whopping 347 GB! This is expected with thousands of Whole-slide images (WSIs)."}}