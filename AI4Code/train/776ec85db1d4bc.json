{"cell_type":{"3bb476d4":"code","9b86497c":"code","4a4eee42":"code","403d6179":"code","1caa3d2a":"code","1b271246":"code","f284053d":"code","7859c43c":"code","858bf7c1":"code","b20c05dd":"code","7b51fae2":"code","d5f3745f":"code","22536f05":"code","1ecbd561":"code","095cd3e5":"code","bbf0f49a":"code","0c7eb800":"code","f4b4e7b9":"code","05730624":"code","8fff133c":"code","467ad900":"code","ce73b8e1":"code","c11425e0":"code","47d65859":"code","1d67b33c":"code","2c4d04f5":"code","384db76a":"code","eba7cbb1":"code","f70af880":"code","7cb99c8f":"code","4adc2988":"code","55dd74a2":"code","e415675c":"code","b6305879":"code","c5e7c477":"code","29ec1129":"code","4831eea1":"code","8498a1d2":"code","95224f57":"code","cb18907a":"code","5e778cdc":"code","8f84a643":"code","34dae190":"code","41850091":"code","4d3b79e5":"code","9ca6cfe5":"code","fbf879a9":"code","37a0219d":"code","3f0b49fb":"code","045068ee":"code","4a671b27":"code","2889e512":"code","bcf01f32":"code","ec93ebf4":"code","94d70dad":"code","2b2bed8c":"code","1c4c4281":"markdown","4f7d0360":"markdown","2be1a0ce":"markdown","d21ca2c3":"markdown","f8c9ae3f":"markdown","73543ccf":"markdown","3dae13a5":"markdown","56049258":"markdown","9ecb5e0b":"markdown","bf453659":"markdown","30823892":"markdown","038ee467":"markdown","d9c9a607":"markdown","52ef3e15":"markdown","cef4def6":"markdown","db111186":"markdown","48cabc48":"markdown","758eb173":"markdown","3fe0d06e":"markdown","2b24ef14":"markdown","0843b604":"markdown","1064aad7":"markdown","95349496":"markdown"},"source":{"3bb476d4":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","9b86497c":"from matplotlib import pyplot as plt\nimport warnings\nwarnings.filterwarnings('ignore')","4a4eee42":"pd.set_option('display.max_rows', 10000)\npd.set_option('display.max_colwidth', 150)\nmedia = pd.read_csv('\/kaggle\/input\/covid19-containment-and-mitigation-measures\/COVID 19 Containment measures data.csv')\ncovid19 = pd.read_csv('\/kaggle\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')","403d6179":"media.head(2)","1caa3d2a":"policy = media[['Country','Date Start','Description of measure implemented']]\\\n.sort_values('Date Start',ascending=True)","1b271246":"policy.head(3)","f284053d":"# we see different country\npolicy.Country.unique()","7859c43c":"covid19.head(3)","858bf7c1":"covid19 = covid19.groupby(['Country\/Region', 'ObservationDate'])[['Confirmed', 'Deaths', 'Recovered']].agg('sum')\ncovid19['CurrentConfirmed'] = covid19['Confirmed'] - covid19['Recovered'] - covid19['Deaths']\ncovid19.head()","b20c05dd":"country = covid19.reset_index()\ncountry.info()","7b51fae2":"country.head(3)","d5f3745f":"country.loc[:, 'ObservationDate'] = pd.to_datetime(country.loc[:, 'ObservationDate'])\ncountry.loc[:, 'Confirmed'] = pd.to_numeric(country.loc[:, 'Confirmed'], errors='coerce')\ncountry.loc[:,'Recovered'] = pd.to_numeric(country.loc[:,'Recovered'], errors='coerce')\ncountry.loc[:,'Deaths'] = pd.to_numeric(country.loc[:,'Deaths'], errors='coerce')\npolicy.loc[:, 'Date Start'] = pd.to_datetime(policy.loc[:, 'Date Start'])","22536f05":"country['Country\/Region'].unique()","1ecbd561":"def growth_rate(data=None):\n    x = []\n    x.append(0)\n    for i in range(data.shape[0]-1):\n        a = data.iloc[i+1]-data.iloc[i]\n        if data.iloc[i] == 0:\n            v = 0.0\n        else:\n            v = a\/data.iloc[i]\n        #v=v*100\n        x.append(v)\n        \n    return np.array(x)","095cd3e5":"def compute_growth_rate(data=None):\n    \"\"\"\n        :params data\n        \n    \"\"\"\n    for c in ['Confirmed', 'Recovered', 'Deaths','CurrentConfirmed']:\n        r = 'growth_rate_{}'.format(c)\n        data.loc[:,r] = growth_rate(data.loc[:,c])\n        \n    return data.copy()","bbf0f49a":"china = policy[policy.Country == 'China'].sort_values(by=['Date Start'])\nmainland_china = country[country['Country\/Region'] == 'Mainland China']","0c7eb800":"# to see date that policy has started at China\nchina['Date Start'].unique()","f4b4e7b9":"china[china['Date Start'] < '2020-02-22'].style.set_properties(**{'background-color': 'black',\n                            'color': 'white',\n                            'border-color': 'lawngreen'})","05730624":"gr_china = compute_growth_rate(mainland_china)","8fff133c":"cols = list(set(gr_china.columns) - set(['Confirmed', 'Deaths', 'Recovered','Country\/Region','CurrentConfirmed',\n                                        'growth_rate_CurrentConfirmed']))\nicols = ['ObservationDate', 'Confirmed', 'Recovered', 'Deaths']","467ad900":"china[china['Date Start'] >= '2020-02-22'].style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color':'white'})","ce73b8e1":"mainland_china[cols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The effect of containment and mitigation mesures on growth rate confirmed, recovered,\\\ndeaths in China ')\nplt.ylabel('growth rate')","c11425e0":"mainland_china.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, mainland_china.ObservationDate.min(), mainland_china.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in China')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","47d65859":"mainland_china[['ObservationDate','Confirmed','Recovered', 'Deaths']].plot(x='ObservationDate', figsize=(15,5))\nplt.title('Control disease state in China')","1d67b33c":"italy = policy[policy['Country'] == 'Italy'].sort_values(by=['Date Start'])\nc_italy = country[country['Country\/Region'] == 'Italy']","2c4d04f5":"italy[italy['Date Start'] < '2020-02-24'].style.set_properties(**{'background-color': 'black',\n                            'color': 'white',\n                            'border-color': 'lawngreen'})","384db76a":"gr_italo = compute_growth_rate(c_italy)","eba7cbb1":"italy[italy['Date Start'] >= '2020-02-24'].style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color': 'white'})","f70af880":"gr_italo[cols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The effect of containment and mitigation mesures on growth rate confirmed,\\\nRecovered and death in Italy')\nplt.ylabel('growth rate')","7cb99c8f":"gr_italo.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, gr_italo.ObservationDate.min(), gr_italo.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in Italy')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","4adc2988":"fig = plt.figure(figsize=(15,5))\nfig.subplots_adjust(hspace=0.4, wspace=0.1)\nax1 = fig.add_subplot(1,2,1)\nax2 = fig.add_subplot(1,2,2)\nc_italy.plot(x='ObservationDate', y = 'Confirmed', ax=ax1)\nax1.set_title('Increasing confirmed in Italy')\nc_italy[['ObservationDate','Deaths', 'Recovered']].plot(x='ObservationDate', ax=ax2)\nax2.set_title('Increasing recovered and deaths in Italy')","55dd74a2":"german = policy[policy['Country'] == 'Germany'].sort_values(by=['Date Start'])\ngermany = country[country['Country\/Region'] == 'Germany']","e415675c":"german[german['Date Start'] <= '2020-02-28'].style.set_properties(**{'background-color': 'black',\n                            'color': 'white',\n                            'border-color': 'lawngreen'})","b6305879":"gr_german = compute_growth_rate(germany)","c5e7c477":"german[german['Date Start'] > '2020-02-28'].style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color': 'white'})","29ec1129":"gr_german[cols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The effect of containment and mitigation mesures on growth rate confirmed, recovered,\\\ndeaths in Germany')\nplt.ylabel('growth rate')","4831eea1":"gr_german.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, gr_german.ObservationDate.min(), gr_german.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in Germany')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","8498a1d2":"fig = plt.figure(figsize=(15,5))\nfig.subplots_adjust(hspace=0.4, wspace=0.1)\nax1 = fig.add_subplot(1,2,1)\nax2 = fig.add_subplot(1,2,2)\ngermany.plot(x='ObservationDate', y = 'Confirmed', ax=ax1)\nax1.set_title('Increasing confirmed in Germany')\ngermany[['ObservationDate','Deaths', 'Recovered']].plot(x='ObservationDate', ax=ax2)\nax2.set_title('Increasing recovered and deaths in Germany')","95224f57":"french = policy[policy['Country'] == 'France'].sort_values(by=['Date Start'])\nfrance = country[country['Country\/Region'] == 'France']","cb18907a":"french.style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color': 'white'})","5e778cdc":"gr_france = compute_growth_rate(france)","8f84a643":"gr_france[cols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The effect of containment and mitigation mesures on growth rate confirmed, recovered,\\\ndeaths in France')","34dae190":"gr_france.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, gr_france.ObservationDate.min(), gr_france.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in France')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","41850091":"fig = plt.figure(figsize=(15,5))\nfig.subplots_adjust(hspace=0.4, wspace=0.1)\nax1 = fig.add_subplot(1,2,1)\nax2 = fig.add_subplot(1,2,2)\nfrance.plot(x='ObservationDate', y = 'Confirmed', ax=ax1)\nax1.set_title('Increasing confirmed in France')\nfrance[['ObservationDate','Deaths', 'Recovered']].plot(x='ObservationDate', ax=ax2)\nax2.set_title('Increasing recovered and deaths in France')","4d3b79e5":"tehran = policy[policy['Country'] == 'Iran'].sort_values(by=['Date Start'])\niran = country[country['Country\/Region'] == 'Iran']","9ca6cfe5":"tehran.style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color': 'white'})","fbf879a9":"gr_iran = compute_growth_rate(iran)","37a0219d":"gr_iran[cols].plot(x='ObservationDate',figsize=(15,5))\nplt.title('The effect of containment and mitigation mesures on growth rate confirmed, recovered, death in Iran')\nplt.ylabel('growth rate ')","3f0b49fb":"gr_iran.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, gr_iran.ObservationDate.min(), gr_iran.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in Germany')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","045068ee":"iran[icols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The fight against disease controlled by Iran')","4a671b27":"cairo = policy[policy.Country == 'Egypt']\negypt = country[country['Country\/Region'] == 'Egypt']","2889e512":"cairo.style.set_properties(**{'background-color': 'black',\n                            'color': 'lawngreen',\n                            'border-color': 'white'})","bcf01f32":"gr_egypt = compute_growth_rate(egypt)","ec93ebf4":"gr_egypt[cols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The effect of containment and mitigation mesure on growth rate confirmed,\\\nrecovered and deaths in Egypt')\nplt.ylabel('growth rate ')","94d70dad":"gr_egypt.plot(x='ObservationDate', y = 'growth_rate_CurrentConfirmed', figsize=(15,5))\nplt.hlines(0, gr_egypt.ObservationDate.min(), gr_egypt.ObservationDate.max(), \n           linestyles='dashdot', colors='black',\n              label='limit (relation between growth rate and R0)')\nplt.title('The effect of containment and mitigation mesures on growth rate current confirmed in Egypt')\nplt.legend(loc='best')\nplt.ylabel('growth rate')","2b2bed8c":"egypt[icols].plot(x='ObservationDate', figsize=(15,5))\nplt.title('The fight against disease controlled by Egypt')","1c4c4281":"# France ","4f7d0360":"### Practical:  SIRF approximated\n\nIn the context of sars cov 2 in the world, we need to adapt SIRF model to our data such that we can make some approximation on behavior of disease and define transmission rate and others. If we consider **(N)**  the number of population in some fixed surface ($Km^{2}$) at time t. We know that there will exist some confirmed cases population and non confirmed cases population.\n\n**population size = totalpositivecases + totalnegativecases** and **totalpositivecases = currentpositivecases + (recovered + death)**\n\nhence,\n\n**population size = totalnegativecases + currentpositivecases + recovered + death**  (1)\n\nFrom (1) we can make some identification:\n\n> population size can be a total Population (N).\n\n> totalnegativecases can be a Susceptible (S)\n\n> currentpositivecases can be an Infective (I) \n\n> recovered + death can be a Recovered individuals (R) + Fatalities (F)\n\nWe can write again:\n\n$S = N  - S_c \\rightarrow \\dfrac{S}{N} = 1 - \\dfrac{S_c}{N}$ if $  \\dfrac{S_c}{N} << 1 $ we have $S \\approx N$ and SIRF Model with standard  incidence become:\n\n$\\dfrac{dI}{dt} = (\\beta - \\gamma - \\delta)I$, $\\qquad$ $\\dfrac{dR}{dt} = \\gamma I$ $\\qquad$ $\\dfrac{dF}{dt} = \\delta I$","2be1a0ce":"# Germany containment and mitigation mesures","d21ca2c3":"## After ","f8c9ae3f":"# Egypt containment and mitigation mesures","73543ccf":"# Relation between growth rate, $R_0(t)$, containment and mitigation mesures.\n\nIn this notebook, I show how there is a correlation between mitigation mesures, containment and growth rates,$R_0(t)$.\nTo do this, we will observe the strategy of each country(China, US, Germany,South Korea, italy, France...) to fight against covid19 and the impact of this strategy on the growth rate and $R_0(t)$. We will need three growth rates also $R_0(t)$.\n\n> **growth rate positive cases**\n\n> **growth rate recovered**\n\n> **growth rate death**\n\n> **relation between growth rate current positive case with** $R_0(t)$\n\n> **Adequate contact rate and incidence, SIRF Model with standard incidence adapted, Practical: SIRF approximated,  Estimate $\\beta(t), \\gamma(t), \\delta(t)$, Behaviour of Covid 19 disease**\n\nAnd the end of this work, I give some conclusion. Let's start.","3dae13a5":"# Prepare data","56049258":"## After","9ecb5e0b":"# Iran","bf453659":"# China containment and mitigation mesures","30823892":"## before","038ee467":"**You can see the relationship between growth rate and containment, mitigation measures very well.\nwe notice that this mitigation measures can be efficient if government and population fight together against this disease. (e.g. China, ..)**","d9c9a607":"### SIRF Model with standard incidence  adapted\n\n**Can we find the model that explain well the spreading of covid 19 in the world?**\n\nWe know that covid19 have many importants variables but our data, we have four  **ConfirmedCases(TotalpositiveCases), CurrentConfirmedCases(CurrentpositiveCases), Recovered and Deaths**. How can we obtain the dynamics system equation for these variables? To answer this question, we are going to use the SIRF Model with standard incidence:\n\nThe SIRF model with standard incidence  is a classic model in epidemiology, it contain 04 subpopulations, the susceptibles **S**, the infectives **I** and recovered individuals **R**, fatalities **F**:\n\n> Susceptiles \n\n> Infective\n\n> Recovered\n\n> Fatalities\n\nThe susceptible can become infective, and the infectives can become recovered or Fatalities, but no other transitions are considered.\nThe population $N = S + I + R + F$ remains constant. The model describes the movement between the classes by the system of differential equations.\n\n> $\\dfrac{dS}{dt} = -\\beta I\\dfrac{S}{N}$, $\\qquad$ $\\dfrac{dI}{dt} = \\beta I\\dfrac{S}{N} -(\\gamma +\\delta) I$, $\\qquad$ $\\dfrac{dR}{dt} = \\gamma I$ $\\qquad$ $\\dfrac{dF}{dt} = \\delta I$.  Where  $\\beta$ is the transmission rate, $\\gamma$ is the recovery rate, $\\delta$ is fatalities rate and $R_{0}=\\dfrac{\\beta }{\\gamma+\\delta}$","52ef3e15":"### Estimate $\\beta(t), \\gamma(t), \\delta(t)$\n\n> $\\beta(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  currentConfirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n> $\\gamma(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  recovered \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n> $\\delta(t) = \\dfrac{the \\:  number \\: of \\:  daily \\:  deaths \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}{the \\:  number \\:  of \\:  accummulated \\:  confirmed \\:  covid19 \\:  patients \\:  at \\:  time \\:  t}$\n\n**Source: Zhien Ma, Jia Li - Dynamical Modeling and Anaylsis of Epidemics-World Scientific Publishing Company (2009)**","cef4def6":"### Growth rate","db111186":"## Behaviour of Covid 19 disease (relation between growth rate current positive case with $R_0(t)) \n\nThe behaviour of disease depends on the state of ratio reproductive number $R_0(t)$ over time. Disease have three behaviours following the state of $R_0(t)=\\dfrac{\\beta(t) }{\\gamma(t)+\\delta(t)}$.\n\n> If $\\dfrac{dI}{Idt} > 0$ then $R_{0}(t) > 1 $ **the disease outbreaks again**.\n\n> If $\\dfrac{dI}{Idt} \\approx 0$ then $R_{0}(t) \\approx 1 $, also $ \\beta(t) \\approx \\gamma(t)+\\delta(t)$ **the disease remains constant over time, it is the buffer state of the disease**.\n\n> If $\\dfrac{dI}{Idt} < 0$  then $R_{0}(t) < 1 $ **the disease die out**.","48cabc48":"# SARS Cov 2 transmission rate ($\\beta$), recovered rate ($\\gamma$) and fatalities rate ($\\delta$)\n\n## Adequate contact rate and incidence\n\n**Contact rate $U(N)$** is the number of individuals contacted by infective per unit of time. Suppose that the probability of infection by each contact is $\\beta_0$, then the **adequate contact rate** is $\\beta_0U(N)$. \n\nThe mean adequate contact rate of an infected individual to a susceptible is $\\beta_0U(N)\\dfrac{S}{N}$. This rate is called an **infection rate**. Then the total new infectives infected by all individuals in the infected compartiment per unit of time, at time t is $(\\beta_0U(N)\\dfrac{S}{N})I$, which is called **incidence** of disease.\n\n- If $U(N) = kN$ that is, the contact rate is proportional to the total population size, the incidence is $\\beta(t)S(t)I(t)$, where $\\beta = \\beta_0k$ is called the transmission coefficient(transmission rate). This type of incidence is called **bilinear incidence**\n- If $U(N) = k^{'}$, that is, the contact rate is a constant in this case, the incidence become $\\beta I\\dfrac{S}{N}$, where $\\beta = \\beta_0k^{'}$, and it is called **standard incidence**.\n\n**Extract from: Zhien Ma, Jia Li - Dynamical Modeling and Anaylsis of Epidemics-World Scientific Publishing Company (2009)**","758eb173":"## Before","3fe0d06e":"# After","2b24ef14":"**To continuous with Italy see** https:\/\/www.kaggle.com\/lumierebatalong\/italy-space-time-spreading-of-covid19","0843b604":"# Italy Containment and Mitigation mesures","1064aad7":"## UpNext","95349496":"## Before"}}