{"cell_type":{"6cfe170e":"code","0f613ee7":"code","2dea3179":"code","1e96c5b5":"code","c49ad740":"code","d11bf0b0":"code","fb9a6185":"code","99ff99e8":"code","f72189bb":"code","63d0c04b":"code","56ac94b4":"code","dceaab25":"code","a308f23a":"code","4761636b":"code","767fc2de":"markdown","59ae0a2a":"markdown","f7ef2077":"markdown","0dd55029":"markdown","0eb65a39":"markdown","0ff06820":"markdown","258e7167":"markdown","bfbe7946":"markdown","49e52dcb":"markdown","8bea9f44":"markdown","087dc465":"markdown"},"source":{"6cfe170e":"import requests\nfrom pandas.io.json import json_normalize\nimport pandas as pd\nimport missingno as msno \nimport seaborn as sns\nfrom matplotlib import pyplot\nimport matplotlib.pyplot as plt\nfrom scipy import stats\nimport time\npd.set_option('display.max_rows', 100)\npd.set_option('display.max_columns', 100)\npd.set_option('display.width', 1000)","0f613ee7":"dfall = pd.read_csv(\"..\/input\/cornell-car-rental-dataset\/CarRentalDataV1.csv\")","2dea3179":"cols = ['fuelType', 'rating', 'renterTripsTaken', 'reviewCount', 'location.city', 'location.country', \n        'location.latitude', 'location.longitude', 'location.state',  'owner.id', \n        'rate.daily', 'vehicle.make','vehicle.model', 'vehicle.type', 'vehicle.year', 'airportcity']","1e96c5b5":"sns.set(font_scale=1.5)\nsns.set_context(\"notebook\")\n#sns.set_color_codes(\"dark\")\nsns.set(style=\"ticks\")\na4_dims = (14.00, 7.80)\nx = dfall['rate.daily']\nfig, ax = pyplot.subplots(figsize=a4_dims)\nsns.distplot(x, bins=400, \n             kde=True, \n             color='gray', \n             hist_kws={\"alpha\":None, \"color\":'steelblue'}\n            )\nplt.xlim(0, 405)\nax.set_ylabel('no. of vehicles in each price range', fontsize=14)\nax.set_xlabel('daily rate (dollars per day)', fontsize=14)\nsns.despine(trim=True, left=True)\nax.xaxis.grid(True)\nplt.savefig('3rateVsCount.jpg', format='jpg')\n","c49ad740":"dfall['count']=dfall['vehicle.make'].value_counts()","d11bf0b0":"sns.set_context(\"notebook\")\nsns.set_color_codes(\"dark\")\nsns.set(style=\"white\")\na4_dims = (20.00, 7.80)\nfig, ax = pyplot.subplots(figsize=a4_dims)\nplt.xticks(rotation=65)\n\nsns.countplot(x='vehicle.make', data=dfall,\n              order = dfall['vehicle.make'].value_counts().index,\n              #hue='vehicle.year'\n              palette=\"Blues_r\" #\"BrBG\" #\"cubehelix\" #\"GnBu_d\"    #\"BuGn_r\"     #\"Set2\"\n           )\nax.set_ylabel('count', fontsize=14, color='b')\nax.set_xlabel('make of the vehicle', fontsize=14, color='b')\nplt.savefig('carVsCount.png', format='png')\nsns.despine(left=True, bottom=True)","fb9a6185":"df2 = pd.melt(dfall, \"vehicle.make\", var_name=\"rate.daily\")\n\nsns.set_context(\"notebook\")\n#sns.set_color_codes(\"dark\")\nsns.set(style=\"whitegrid\")\na4_dimsRel = (20.00, 9.80)\nfig, ax = pyplot.subplots(figsize=a4_dimsRel)\n\nsns.swarmplot(y=\"rate.daily\", x=\"vehicle.make\", \n              color=\"steelblue\",\n              data=dfall,\n              order = dfall['vehicle.make'].value_counts().iloc[:20].index,\n              size=3, \n              #color=\".1\", \n              linewidth=0)\n\nax.xaxis.grid(True)\nax.yaxis.grid(False)\n#ax.set(ylabel=\"\")\nsns.despine(left=True, bottom=True)\n\nplt.ylim(0, 405)\nplt.xticks(rotation=30, fontsize=16)\n#sns.despine(left=True, bottom=True)\nax.set_xlabel('Make of the vehicle', fontsize=18)\nax.set_ylabel('daily rate (dollars per day)', fontsize=18)\nplt.savefig('carVsRate.jpg', format='jpg')\n","99ff99e8":"sns.set(style=\"ticks\")\nsns.set_context(\"notebook\")\na4_dimsRel2 = (9.80, 12.80)\nfig, ax = pyplot.subplots(figsize=a4_dimsRel2)\nsns.stripplot(x=\"rate.daily\", y=\"vehicle.make\",\n                #hue=\"kind\",\n                data=dfall,\n                palette=\"husl\", \n                size=5, \n                marker=\"D\",\n                edgecolor=\"gray\", \n                alpha=.75,\n                #linewidth=.5,\n                #jitter=0.1,\n                order = dfall['vehicle.make'].value_counts().index\n              \n                )\nax.xaxis.grid(True)\nax.yaxis.grid(False)\n#ax.set(ylabel=\"\")\nsns.despine(trim=False, \n            left=True, bottom=False)\n\nplt.xlim(0, 405)\nax.set_ylabel('Make of the vehicle', fontsize=14)\nax.set_xlabel('daily rate (dollars per day)', fontsize=14)\n\n\nplt.savefig('5modelVsRate.png', format='png', bbox_inches=\"tight\")","f72189bb":"sns.set(style=\"ticks\")\nsns.set_context(\"notebook\")\na4_dimsRel2 = (9.80, 12.80)\nfig, ax = pyplot.subplots(figsize=a4_dimsRel2)\n\ncmap = sns.cubehelix_palette(rot=-.2, as_cmap=True)\n\nsns.stripplot(x=\"rate.daily\", y=\"vehicle.model\", data=dfall,\n                order = dfall['vehicle.model'].value_counts().iloc[:50].index  #.iloc[:30] before index\n                )\n\nax.xaxis.grid(True)\nax.yaxis.grid(False)\n#ax.set(ylabel=\"\")\nsns.despine(trim=False, \n            left=True, bottom=False)\n\n\n#plt.ylim(0,150)\nplt.xlim(0, 400)\nplt.yticks(fontsize=10)\nax.set_ylabel('Model of the vehicle', fontsize=14)\nax.set_xlabel('daily rate (dollars per day)', fontsize=14)\n\nplt.savefig('6modelVsRate.png', format='png', bbox_inches=\"tight\")","63d0c04b":"sns.set_context(\"notebook\")\na4_dimsRel = (20.00, 9.80)\nfig, ax = pyplot.subplots(figsize=a4_dimsRel)\nsns.set(style=\"white\")\n# Draw a categorical scatterplot to show each observation\nsns.boxplot(y=\"rate.daily\", x=\"airportcity\",  \n              data=dfall.groupby('airportcity').filter(lambda x: len(x) >= 20),\n              #order = dfall['airportcity'].value_counts().iloc[:20].index\n              order = dfall.groupby('airportcity').filter(lambda x: len(x) >= 20)\\\n                     .groupby(['airportcity']).median()\\\n                    .sort_values('rate.daily', ascending = False)\\\n                    #.iloc[0:50]\n                     .index)\n\nax.xaxis.grid(True)\nax.yaxis.grid(False)\nsns.despine(left=True, bottom=True)\n\nplt.ylim(0, 255)\nplt.xticks(rotation=75, fontsize=14)\nax.set_xlabel('City', fontsize=14)\nax.set_ylabel('daily rate (dollars per day)', fontsize=14)\n\nplt.savefig('4cityVsRate.png', format='png', bbox_inches=\"tight\")\n","56ac94b4":"sns.set(style=\"darkgrid\")\n#sns.set_context(\"notebook\")\na4_dims = (15, 12)\nfig, ax = pyplot.subplots(figsize=a4_dims)\nsns.scatterplot(data=dfall, x='renterTripsTaken', y='rate.daily', \n                palette=\"ch:2,r=.1,l=.5_r\",\n                   size=1)\nplt.xlim(0, 205)\nplt.ylim(0,405)\nax.set_ylabel('rate', fontsize=14, color='b')\nax.set_xlabel('renterTripsTaken', fontsize=14, color='b')","dceaab25":"dfall['revenue'] = dfall.apply(lambda x: x.loc['rate.daily']*x.loc['renterTripsTaken'], axis=1)","a308f23a":"sns.set(style=\"darkgrid\")\na4_dims = (15, 12)\nfig, ax = pyplot.subplots(figsize=a4_dims)\nsns.scatterplot(data=dfall, x='revenue', y='rate.daily', \n                palette=\"ch:2,r=.1,l=.5_r\")\nplt.ylim(0,405)\nax.set_ylabel('rate', fontsize=14, color='b')\nax.set_xlabel('revenue', fontsize=14, color='b')\nax.set_xscale('log')\n","4761636b":"a4_dims = (15, 8)\nx = dfall['rate.daily']\nfig, ax = pyplot.subplots(figsize=a4_dims)\nsns.kdeplot(x, dfall.renterTripsTaken, shade=False, shade_lowest=False, cmap='Purples_d',  n_levels=20)\nplt.xlim(0, 250)\nplt.ylim(-20,100)\nax.set_ylabel('no. of Trips Taken', fontsize=14, color='b')\nax.set_xlabel('daily rate (dollars per day)', fontsize=14, color='b')","767fc2de":"# How Rental Fares Affect Number of Trips Taken","59ae0a2a":"# **Original Notebook: EDA of Cornell Car Rental Dataset**","f7ef2077":"# How Rental Fares Affect Number of Trips Taken: KDE Plot","0dd55029":"# How Rental Fares Affect Revenues of Hosts (Estimated Only)","0eb65a39":"# Top 20 Most Popular Makes of Car: Swarm Plot","0ff06820":"See original Post on Medium: https:\/\/link.medium.com\/Yduf7ceYC8 ","258e7167":"# Costliest Airport Cities for Car Rental","bfbe7946":"# Car Rental Typical Fares, Histogram","49e52dcb":"# Top 50 Most Popular Models of Car: Strip Plot","8bea9f44":"# Most Popular Makes of Car Makes: Histogram","087dc465":"# Top 50 Most Popular Makes of Car: Strip Plot"}}