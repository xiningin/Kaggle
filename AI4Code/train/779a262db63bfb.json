{"cell_type":{"92372ad6":"code","42e10df7":"code","0e3326b0":"code","50067ee7":"code","2b79a89c":"code","4e66b485":"code","6914bb0d":"code","4ba4d0fa":"code","cf516351":"code","567263e9":"code","499aa610":"code","fe27bd37":"code","bc6b7d57":"code","e69a967f":"markdown","1c733f77":"markdown","a4fc09ab":"markdown","e5d2bb92":"markdown","183db57b":"markdown","b36b55d3":"markdown","82123cb6":"markdown","be726fce":"markdown","5afc24ab":"markdown"},"source":{"92372ad6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","42e10df7":"ratings=pd.read_csv('..\/input\/bookcrossing-dataset\/Book reviews\/BX-Book-Ratings.csv',sep=';',encoding='latin-1')\nusers=pd.read_csv(\"..\/input\/bookcrossing-dataset\/Book reviews\/BX-Users.csv\",sep=';',encoding='latin-1')\nbooks = pd.read_csv('..\/input\/bookcrossing-dataset\/Book reviews\/BX-Books.csv', sep=';',encoding='latin-1',names=['isbn', 'book_title' ,'book_author','year_of_publication', 'publisher', 'img_s', 'img_m', 'img_l'],low_memory=False, skiprows=1)\n\nratings=ratings.rename(columns={'ISBN':'isbn'})\ndf1 = pd.merge(users, ratings, on='User-ID')\ndf1 = pd.merge(df1, books, on='isbn')","0e3326b0":"yeardata=df1['year_of_publication'].value_counts().reset_index()\nyeardata.columns=['year','bookspublished']\nyeardata['year']='year '+yeardata['year']\n\nyeardata_sorted=yeardata.sort_values(by='bookspublished',ascending=False)\nyeardata_sorted=yeardata_sorted.head(25)\nyeardata_sorted.plot.bar(x='year',y='bookspublished',color='green')","50067ee7":"yeardata_sorted=yeardata_sorted[yeardata_sorted['year']!='year 0']\nyeardata_sorted.plot.bar(x='year',y='bookspublished')","2b79a89c":"dp=df1['publisher'].value_counts().reset_index()\ndp.columns=['publisher','count']\ndp.sort_values(by='count',ascending=False)\npublisher_sorted=dp.head(10)\npublisher_sorted.plot.bar(x='publisher',y='count',color='red')","4e66b485":"authors=df1['book_author'].value_counts().reset_index()\nauthors.columns=['Author','NumOfBooks']\nauthors.sort_values(by='NumOfBooks',ascending=False).head(20).plot.bar(x='Author',y='NumOfBooks')","6914bb0d":"booksnum=df1['book_title'].value_counts().reset_index()\nbooksnum.columns=['BookTitle','Count']\nbooksnum.sort_values(by='Count',ascending=True).tail(10).plot.barh(x='BookTitle',y='Count',color='Purple')","4ba4d0fa":"import plotly.express as px\nbooksnum=df1['book_title'].value_counts().reset_index()\nbooksnum.columns=['BookTitle','Count']\nbooksnum=booksnum.sort_values(by='Count',ascending=True).tail(10)\n\nfig1=px.bar(booksnum, y=\"BookTitle\", x=\"Count\",orientation='h')\nfig1.update_traces(marker_color='olivedrab')\nfig1.show()\n\n#USING ONE OF THE COLUMN VALUES TO DEFINE COLOR\nfig = px.bar(booksnum, y=\"BookTitle\", x=\"Count\",orientation='h',color='Count')\nfig.show()\n","cf516351":"books_rated=df1.groupby(['book_title']).sum().reset_index()\nbooks_rated.sort_values(by='Book-Rating',ascending=True).tail(20).plot.barh(x='book_title',y='Book-Rating',color='Pink')","567263e9":"df2=df1\ndf2=df2.rename(columns={'Book-Rating':'BookRating'})\n\ngrp3=df2.groupby('Location').BookRating.mean().to_frame()\ngrp3.reset_index()\n\n#pandas.query('column_name.str.contains(\"abc\")')\ngrp4=grp3.query('Location.str.contains(\"usa\")',engine='python').sort_values(by='Location',ascending=True).head(20).reset_index()\ngrp4=grp4.rename(columns={'Location':'Locality','BookRating':'Ratings'})\ngrp4.plot.bar(x='Locality',y='Ratings',Color='Gold')\n","499aa610":"#SAME DATA ANOTHER VISUALIZATION\ndiag = px.bar(grp4, x=\"Ratings\", y=\"Locality\",orientation='h',color='Locality')\ndiag.show()","fe27bd37":"##last word of the location column using regular expression and stored in other column named Country \ndf2['Country'] = df2.Location.str.extract(r'\\b(\\w+)$', expand=True)\ndf2.head()\n","bc6b7d57":"t1=df2.groupby('Country').BookRating.mean().reset_index()\ncountries=['usa','germany','turkey','africa','zimbabwe','yugoslavia','albania']\nt1=t1[t1.Country.isin(countries)]\nt1['Country']=t1.Country.str.capitalize() #capitalize first letter\nt1.plot.bar(x='Country',y='BookRating',color='teal')\n","e69a967f":"** TRYING HOVER VALUES **","1c733f77":"# **2.BOOKS PUBLISHED PER PUBLISHER- top10publishers**","a4fc09ab":"# 5.  20 BOOKS WITH TOP RATINGS (sum of ratings by grouping)","e5d2bb92":"# **1.NUMBER OF BOOKS PUBLISHED YEARWISE ANALYSIS- TOP 25 YEARS**","183db57b":"# 4.TEN Top published BOOKS","b36b55d3":"# 6.AVERAGE RATINGS REGION WISE IN USA","82123cb6":"# 7.COUNTRY WISE AVG. RATINGS ","be726fce":"**ELIMINATE YEAR 0**","5afc24ab":"# **3.Top 20 best selling authors**"}}