{"cell_type":{"c3af0065":"code","924388d3":"code","ae91e8bc":"code","7c4ea1cb":"code","625a294c":"code","be2218da":"code","434adfac":"code","def41260":"code","fd0922e3":"code","140802cd":"code","4125e59d":"code","0c8cccf3":"code","0602a8c7":"code","fe574306":"code","364f0006":"code","cafa73ed":"code","3bb7d6ce":"code","e55a14bf":"code","71ccf956":"code","ae7440f0":"code","51ac3c0a":"code","92e691e0":"code","332b0c1e":"code","0a7c7bed":"code","e1bc12e1":"code","6997fe83":"code","53379f9d":"code","6d55d983":"code","931f64a2":"code","a3d125f4":"code","8b9dec5a":"code","e72f773b":"code","7d25b52c":"code","6256e864":"code","9aee774b":"code","d4781990":"code","4d9f2483":"code","6fe83cd9":"code","e2c8f04c":"code","cd248409":"code","dd54c715":"code","c7476f66":"code","bd585714":"code","d99fc29d":"code","37ab8ff6":"code","8c016d63":"code","ef3e3ac1":"code","6f1b83f3":"code","0296e640":"code","1e276f61":"code","c0f55770":"code","598e7c78":"code","cf4dcdd0":"code","91e0c432":"code","a9d254f2":"code","d47f0fa4":"code","8018a374":"code","30d4ea4a":"code","34cba5a8":"code","246ac4b4":"code","ae8880ee":"code","4d6d961f":"code","99b5e3a9":"code","619762f3":"code","e1808798":"code","eb8dc4a6":"code","de363d14":"code","33ce9c49":"code","93483f7f":"code","168ee508":"code","098b9c59":"code","83c1d331":"code","bad51392":"code","d08d198f":"code","396fd7c8":"code","3020bab1":"code","f7ad04f2":"code","310d4968":"code","52e3e3a4":"code","a84e3554":"code","9b24dd80":"code","6c1e52b2":"code","957e3315":"code","c8b27bd7":"code","66799a88":"code","f0673584":"code","feda3288":"code","5437b98e":"code","54122aab":"code","3099f67d":"code","162f4c48":"markdown","179a0e39":"markdown","a7019755":"markdown","0033f760":"markdown","d6f7a4f0":"markdown","eab56675":"markdown","c846d625":"markdown","0a38b854":"markdown","3dcb0c5d":"markdown","c26f8b2f":"markdown","1fbc3458":"markdown","feca6219":"markdown","b2087f81":"markdown","b60a50e8":"markdown","4347117e":"markdown","77a3bbe1":"markdown","6536b12b":"markdown","cbdffb53":"markdown","f1016d58":"markdown","aebc7187":"markdown","178c063b":"markdown","06f1e0a8":"markdown","9fecc11c":"markdown","33fabfb6":"markdown","c1f6e6fb":"markdown","da75b33e":"markdown","2995f889":"markdown","eac42fe7":"markdown","8e9e92c0":"markdown","927663ac":"markdown","57d52c23":"markdown","44ba730b":"markdown","e0170d9c":"markdown","a0051ed7":"markdown","3d1dcb8e":"markdown","e57cd7a3":"markdown","1bf2b6ba":"markdown","d0992b31":"markdown","089f9eca":"markdown","5d64d4e5":"markdown","e962068e":"markdown","bcb43652":"markdown","6babe04e":"markdown","227a514c":"markdown","f44c6692":"markdown","47f9b7af":"markdown","53cf8a02":"markdown","09f38227":"markdown","78d42717":"markdown","8405c1ac":"markdown","39fba3ac":"markdown","c7f8b24a":"markdown","574b5dbc":"markdown","443f9cb8":"markdown","4dae3fa9":"markdown","945b2a56":"markdown","48bdb263":"markdown","72c5196d":"markdown","fe58f4fa":"markdown","662616a6":"markdown","80d11ca2":"markdown","9832024f":"markdown","d7f3a462":"markdown","ae431333":"markdown","2d7dde4f":"markdown","e9d7fc61":"markdown","b3fd94c6":"markdown","cdbfa650":"markdown"},"source":{"c3af0065":"# first we import all our required libraries\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt","924388d3":"brca = pd.read_csv('..\/input\/breastcancerdataset\/BRCA.csv')","ae91e8bc":"brca.head()","7c4ea1cb":"brca.dropna(inplace = True)","625a294c":"brca.shape","be2218da":"brca.describe()","434adfac":"print('The attributes of the dataset are:\\n')\nfor txt in brca.columns:\n    print('--', txt)","def41260":"gen = (\n    brca\n    .groupby('Gender', as_index = False)\n    .agg(Total = ('Age', 'count'))\n)","fd0922e3":"gen['Percentage'] = (gen['Total']\/gen['Total'].sum()) * 100","140802cd":"gen","4125e59d":"plt.figure(figsize = (5,7))\ngen_bar = plt.bar(gen['Gender'], gen['Total'])\nplt.yticks(np.arange(0,400,50))\nplt.bar_label(gen_bar, labels = ['{} ({:.2f}%)'.format(t,p) for t,p in zip(gen['Total'],gen['Percentage'])], padding = 3)\nplt.xlabel('Gender')\nplt.ylabel('No. of cases')\nplt.title('No. of cases by gender')\nplt.show()","0c8cccf3":"bins = list(range(20,105,5))\n\nplt.figure(figsize = (8,5))\nplt.hist(brca['Age'].astype(int), width = 4, align = 'mid', bins = bins, color = 'red', edgecolor = 'black')\nplt.xticks(bins)\nplt.xlabel('Ages')\nplt.title('Age range in dataset')\nplt.yticks(np.arange(0,65,5))\nplt.show()","0602a8c7":"cancer_types_total = brca.groupby('Histology', as_index = False)['Age'].count()","fe574306":"cancer_types_total.rename(columns = {'Age': 'Total_Number'}, inplace = True)","364f0006":"# for scaling, we get the percentage of total cases for each type of case\ntotals_of_dataset = []\nfor hist, num in zip(cancer_types_total['Histology'], cancer_types_total['Total_Number']):\n    answer = (num\/brca.shape[0]) * 100\n    totals_of_dataset.append(answer)","cafa73ed":"cancer_types_total['Percentage'] = totals_of_dataset","3bb7d6ce":"cancer_types_total","e55a14bf":"totals_bar = plt.bar(cancer_types_total['Histology'],cancer_types_total['Percentage'])\nplt.xticks(rotation = 60)\nplt.yticks(np.arange(0,100,10))\nplt.xlabel('Type of cancer')\nplt.ylabel('Percentage of total patients')\nplt.title('Total cancer types in dataset by percentage')\nplt.bar_label(totals_bar, labels = ['{:.2f}%'.format(t) for t in totals_bar.datavalues], padding = 3)\nplt.show()","71ccf956":"# we group the cancer types by histology and stage, and count them\ncancer_type_by_stage = (\n    brca\n    .groupby(['Histology', 'Tumour_Stage'], as_index = False)\n    .agg(Total = ('Age', 'count'))\n)","ae7440f0":"cancer_type_by_stage","51ac3c0a":"cancer_type_by_stage = cancer_type_by_stage.append({'Histology': 'Mucinous Carcinoma', 'Tumour_Stage':'III', 'Total':0}, ignore_index = True)","92e691e0":"cancer_type_by_stage","332b0c1e":"# we're setting the 'labels', ie the number of units on the x-axis. The x is the position of each bar, and the width is the width of each bar\nlabels = list(cancer_type_by_stage['Histology'].unique())\nx = np.arange(len(labels))\nwidth = 0.2\n\n# we create subplots, and set the size of the whole figure\nfig, ax = plt.subplots(figsize = (12, 8))\n\n# now we add the bar for each cancer type. Each plt describes each stage for one cancer type each.\nplt1 = ax.bar(x, cancer_type_by_stage.loc[cancer_type_by_stage['Tumour_Stage'] == 'I', 'Total'], width = width, label = 'Stage One')\nplt2 = ax.bar(x + width, cancer_type_by_stage.loc[cancer_type_by_stage['Tumour_Stage'] == 'II', 'Total'], width = width, label = 'Stage Two')\nplt3 = ax.bar(x + width*2, cancer_type_by_stage.loc[cancer_type_by_stage['Tumour_Stage'] == 'III', 'Total'], width = width, label = 'Stage Three')\n\n# we set where where the x values on the x-axis will be, and what their labels will be.\nax.set_xticks(x)\nax.set_xticklabels(labels)\n\n# we put the the height of each bar on top of the bar, with some padding for neatness.\nax.bar_label(plt1, padding = 3)\nax.bar_label(plt2, padding = 3)\nax.bar_label(plt3, padding = 3)\n\nplt.xlabel('Type of cancer', fontdict = {'fontsize': 20})\nplt.ylabel('No. of cases for each stage', fontdict = {'fontsize': 20})\nplt.title('No. of cases for each stage by type of cancer')\n\nplt.legend(prop={'size': 20})\nplt.xticks(rotation = 60)\n\n\nplt.show()","0a7c7bed":"# first we get subsets of the original dataframe by age range, and put each subset in a dictionary\ncancer_ages_raw = {}\nkey = 0\nfor i in range(len(bins)):\n    if i < len(bins) - 1:\n        row = brca.loc[(brca['Age'] >= bins[i]) & (brca['Age'] < bins[i + 1])][['Histology', 'Age']]\n        if row.empty is False:\n            cancer_ages_raw.update({'{} to {}'.format(bins[i], bins[i + 1]):row })\n            key += 1\n    else:\n        pass","e1bc12e1":"# then we group by histology (to get each cancer type) and put these in another list of dictionaries\n\ncancer_ages_list = []\n\nfor key, val in cancer_ages_raw.items():\n    age_range = key\n    hist = val.groupby('Histology', as_index = False).count()['Histology']\n    age_count = val.groupby('Histology', as_index = False).count()['Age']\n    hist_vals = {}\n    \n    for h, a in zip(hist, age_count):\n        hist_vals.update({'Age_range': age_range, h:a})\n        \n    cancer_ages_list.append(hist_vals)","6997fe83":"# finally, we convert this list to a dataframe\n\ncancer_ages = pd.DataFrame(cancer_ages_list)","53379f9d":"# performing clean-up in the next few cells...\n\ncancer_ages.fillna(0, inplace = True)","6d55d983":"cols = ['Infiltrating Ductal Carcinoma','Infiltrating Lobular Carcinoma','Mucinous Carcinoma']","931f64a2":"for vla in cols:\n    cancer_ages[vla] = cancer_ages[vla].astype(int)","a3d125f4":"cancer_ages.head()","8b9dec5a":"fig, axs = plt.subplots(1,3, figsize = (20,6))\naxs[0].bar(cancer_ages['Age_range'], cancer_ages['Infiltrating Ductal Carcinoma'], width = 0.5, edgecolor = 'black')\naxs[0].set_xticks(list(cancer_ages['Age_range']))\naxs[0].set_xticklabels(list(cancer_ages['Age_range']), rotation = 60)\naxs[0].set_yticks(range(0,45, 5))\naxs[0].set_title('Infiltrating Ductal Carcinoma')\n\naxs[1].bar(cancer_ages['Age_range'], cancer_ages['Infiltrating Lobular Carcinoma'], width = 0.5, edgecolor = 'black', color = 'red')\naxs[1].set_xticks(list(cancer_ages['Age_range']))\naxs[1].set_xticklabels(list(cancer_ages['Age_range']), rotation = 60)\naxs[1].set_yticks(range(0,45, 5))\naxs[1].set_title('Infiltrating Lobular Carcinoma')\n\naxs[2].bar(cancer_ages['Age_range'], cancer_ages['Mucinous Carcinoma'], width = 0.5, edgecolor = 'black', color = 'green')\naxs[2].set_xticks(list(cancer_ages['Age_range']))\naxs[2].set_xticklabels(list(cancer_ages['Age_range']), rotation = 60)\naxs[2].set_yticks(range(0,45, 5))\naxs[2].set_title('Mucinous Carcinoma')\n\nfig.tight_layout(pad = 4)\nfig.supxlabel('Age ranges', fontsize = 15)\nfig.suptitle('Age ranges for each cancer type', fontsize = 25)\nplt.show()","e72f773b":"protein_types = brca[['Protein1', 'Protein2', 'Protein3', 'Protein4']]","7d25b52c":"protein_types.head()","6256e864":"p_labels = protein_types.columns","9aee774b":"plt.figure(figsize = (12, 16))\n\nboxes = plt.boxplot([list(protein_types[ptype]) for ptype in protein_types], labels = p_labels, patch_artist = True)\n\nfor box in boxes['boxes']:\n    # set edge color\n    box.set(color = '#abcdef', linewidth = 2)\n    \n    # set fill color\n    box.set(facecolor = '#abdcfe')\n\nplt.yticks(np.arange(-3, 4, 0.5))\nplt.xlabel('Type of protein markers', fontdict = {'fontsize': 20})\nplt.ylabel('Protein marker levels', fontdict = {'fontsize': 20})\nplt.title('Distribtution of protein marker levels', fontdict = {'fontsize': 20})\n\nplt.show()","d4781990":"color_list = ['red','blue','green','orange']","4d9f2483":"p_labels = list(p_labels)","6fe83cd9":"type_slices = brca[['Histology', 'Protein1', 'Protein2', 'Protein3', 'Protein4']]","e2c8f04c":"type_slices.head()","cd248409":"fig, axs = plt.subplots(2,2, figsize = (20,15))\naxs[0,0].scatter(type_slices['Histology'], type_slices['Protein1'], color = color_list[0], alpha = 0.8)\naxs[0,0].set_title('Marker Protein 1')\naxs[0,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[0,1].scatter(type_slices['Histology'], type_slices['Protein2'], color = color_list[1], alpha = 0.8)\naxs[0,1].set_title('Marker Protein 2')\naxs[0,1].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,0].scatter(type_slices['Histology'], type_slices['Protein3'], color = color_list[2], alpha = 0.8)\naxs[1,0].set_title('Marker Protein 3')\naxs[1,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,1].scatter(type_slices['Histology'], type_slices['Protein4'], color = color_list[3], alpha = 0.8)\naxs[1,1].set_title('Marker Protein 4')\naxs[1,1].set_yticks(np.arange(-3, 4, 0.5))\n\n#fig.yticks(np.arange(-3, 4, 0.5))\n\n\nplt.suptitle('Cancer types for each marker protein', fontsize = 30)\nfig.supylabel('Protein Level', fontsize = 20)\nfig.supxlabel('Breast cancer type', fontsize = 20)\nplt.tight_layout(pad = 2)\n\nplt.show()","dd54c715":"idc = type_slices.loc[type_slices['Histology'] == 'Infiltrating Ductal Carcinoma'][['Protein1','Protein2','Protein3','Protein4']]\nilc = type_slices.loc[type_slices['Histology'] == 'Infiltrating Lobular Carcinoma'][['Protein1','Protein2','Protein3','Protein4']]\nmcc = type_slices.loc[type_slices['Histology'] == 'Mucinous Carcinoma'][['Protein1','Protein2','Protein3','Protein4']]","c7476f66":"# first we create an overll figure\n\nfig = plt.figure(figsize = (20,15))\n\n# for the first, leftmost subplot\nplt.subplot(1,3,1)\nidc_boxes = plt.boxplot([list(idc[t]) for t in idc], labels = list(idc.columns), patch_artist = True)\n\n# setting the colors for the boxplot\nfor box in idc_boxes['boxes']:\n    # set edge color\n    box.set(color = '#800080', linewidth = 2)\n    \n    # set fill color\n    box.set(facecolor = '#800080')\n# setting range of yticks and the labels\nplt.yticks(np.arange(-3, 4, 0.5))\nplt.xlabel('Infiltrating Ductal Carcinoma', fontsize = 20)\n\n\n# we repeat the process for the other two subplots\nplt.subplot(1,3,2)    \n    \nilc_boxes = plt.boxplot([list(ilc[t]) for t in ilc], labels = list(ilc.columns), patch_artist = True)\n\nfor box in ilc_boxes['boxes']:\n    # set edge color\n    box.set(color = '#000080', linewidth = 2)\n    \n    # set fill color\n    box.set(facecolor = '#000080')\nplt.yticks(np.arange(-3, 4, 0.5))\nplt.xlabel('Infiltrating Lobular Carcinoma', fontsize = 20)\n\n\n\nplt.subplot(1,3,3)\n\nmcc_boxes = plt.boxplot([list(mcc[t]) for t in mcc], labels = list(mcc.columns), patch_artist = True)\n\nfor box in mcc_boxes['boxes']:\n    # set edge color\n    box.set(color = '#003333', linewidth = 2)\n    \n    # set fill color\n    box.set(facecolor = '#003333')\nplt.yticks(np.arange(-3, 4, 0.5))\nplt.xlabel('Mucinous Carcinoma', fontdict = {'fontsize':20})\n\n\n# finally, we put in the title and labels for the overall figure\nfig.suptitle('Marker protein profiles for each cancer type', fontsize = 30)\n#fig.supxlabel('Marker Proteins', fontsize = 20)\nfig.supylabel('Range of marker protein level', fontsize = 20)\nfig.tight_layout(pad = 2)\n\nplt.show()","bd585714":"idc_l = brca.loc[brca['Histology'] == brca['Histology'].unique()[0]][['Tumour_Stage','Protein1', 'Protein2','Protein3','Protein4']]\nmcc_l = brca.loc[brca['Histology'] == brca['Histology'].unique()[1]][['Tumour_Stage','Protein1', 'Protein2','Protein3','Protein4']]\nilc_l = brca.loc[brca['Histology'] == brca['Histology'].unique()[2]][['Tumour_Stage','Protein1', 'Protein2','Protein3','Protein4']]","d99fc29d":"idc_l['Tumour_Stage'] = [len(vi) for vi in idc_l['Tumour_Stage']]\nilc_l['Tumour_Stage'] = [len(vi) for vi in ilc_l['Tumour_Stage']]\nmcc_l['Tumour_Stage'] = [len(vi) for vi in mcc_l['Tumour_Stage']]","37ab8ff6":"labels = list(idc_l['Tumour_Stage'].unique())","8c016d63":"fig, axs = plt.subplots(2,2, figsize = (20,15))\naxs[0,0].scatter(idc_l['Tumour_Stage'],idc_l['Protein1'], color = color_list[0], alpha = 0.8)\naxs[0,0].set_title('Marker Protein 1')\naxs[0,0].set_xticks(labels)\naxs[0,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[0,1].scatter(idc_l['Tumour_Stage'],idc_l['Protein2'], color = color_list[1], alpha = 0.8)\naxs[0,1].set_title('Marker Protein 2')\naxs[0,1].set_xticks(labels)\naxs[0,1].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,0].scatter(idc_l['Tumour_Stage'],idc_l['Protein3'], color = color_list[2], alpha = 0.8)\naxs[1,0].set_title('Marker Protein 3')\naxs[1,0].set_xticks(labels)\naxs[1,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,1].scatter(idc_l['Tumour_Stage'],idc_l['Protein4'], color = color_list[3], alpha = 0.8)\naxs[1,1].set_title('Marker Protein 4')\naxs[1,1].set_xticks(labels)\naxs[1,1].set_yticks(np.arange(-3, 4, 0.5))\n\n\nplt.suptitle('Protein levels for each stage in Infiltrating Ductal Carcinoma', fontsize = 25)\nfig.supylabel('Protein Level', fontsize = 20)\nfig.supxlabel('Cancer Stage', fontsize = 20)\nplt.tight_layout(pad = 2)\n\nplt.show()","ef3e3ac1":"fig, axs = plt.subplots(2,2, figsize = (20,15))\naxs[0,0].scatter(ilc_l['Tumour_Stage'],ilc_l['Protein1'], color = color_list[0], alpha = 0.8)\naxs[0,0].set_title('Marker Protein 1')\naxs[0,0].set_xticks(labels)\naxs[0,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[0,1].scatter(ilc_l['Tumour_Stage'],ilc_l['Protein2'], color = color_list[1], alpha = 0.8)\naxs[0,1].set_title('Marker Protein 2')\naxs[0,1].set_xticks(labels)\naxs[0,1].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,0].scatter(ilc_l['Tumour_Stage'],ilc_l['Protein3'], color = color_list[2], alpha = 0.8)\naxs[1,0].set_title('Marker Protein 3')\naxs[1,0].set_xticks(labels)\naxs[1,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,1].scatter(ilc_l['Tumour_Stage'],ilc_l['Protein4'], color = color_list[3], alpha = 0.8)\naxs[1,1].set_title('Marker Protein 4')\naxs[1,1].set_xticks(labels)\naxs[1,1].set_yticks(np.arange(-3, 4, 0.5))\n\n\nplt.suptitle('Protein levels for each stage in Infiltrating Lobular Carcinoma', fontsize = 25)\nfig.supylabel('Protein Level', fontsize = 20)\nfig.supxlabel('Cancer Stage', fontsize = 20)\nplt.tight_layout(pad = 2)\n\nplt.show()","6f1b83f3":"fig, axs = plt.subplots(2,2, figsize = (20,15))\naxs[0,0].scatter(mcc_l['Tumour_Stage'],mcc_l['Protein1'], color = color_list[0], alpha = 0.8)\naxs[0,0].set_title('Marker Protein 1')\naxs[0,0].set_xticks(labels)\naxs[0,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[0,1].scatter(mcc_l['Tumour_Stage'],mcc_l['Protein2'], color = color_list[1], alpha = 0.8)\naxs[0,1].set_title('Marker Protein 2')\naxs[0,1].set_xticks(labels)\naxs[0,1].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,0].scatter(mcc_l['Tumour_Stage'],mcc_l['Protein3'], color = color_list[2], alpha = 0.8)\naxs[1,0].set_title('Marker Protein 3')\naxs[1,0].set_xticks(labels)\naxs[1,0].set_yticks(np.arange(-3, 4, 0.5))\naxs[1,1].scatter(mcc_l['Tumour_Stage'],mcc_l['Protein4'], color = color_list[3], alpha = 0.8)\naxs[1,1].set_title('Marker Protein 4')\naxs[1,1].set_xticks(labels)\naxs[1,1].set_yticks(np.arange(-3, 4, 0.5))\n\n\nplt.suptitle('Protein levels for each stage in Mucinous Carcinoma', fontsize = 25)\nfig.supylabel('Protein Level', fontsize = 20)\nfig.supxlabel('Cancer Stage', fontsize = 20)\nplt.tight_layout(pad = 2)\n\nplt.show()","0296e640":"fig, axs = plt.subplots(2,2, figsize = (20,15))\naxs[0,0].scatter(brca['Age'], brca['Protein1'], color = color_list[0])\nm, b = np.polyfit(brca['Age'], brca['Protein1'],1)\naxs[0,0].plot(brca['Age'], m * brca['Age'] + b)\naxs[0,0].set_title('Marker Protein 1')\n\naxs[0,1].scatter(brca['Age'], brca['Protein2'], color = color_list[1])\nm, b = np.polyfit(brca['Age'], brca['Protein2'],1)\naxs[0,1].plot(brca['Age'], m * brca['Age'] + b)\naxs[0,1].set_title('Marker Protein 2')\n\naxs[1,0].scatter(brca['Age'], brca['Protein3'], color = color_list[2])\nm, b = np.polyfit(brca['Age'], brca['Protein3'],1)\naxs[1,0].plot(brca['Age'], m * brca['Age'] + b)\naxs[1,0].set_title('Marker Protein 3')\n\naxs[1,1].scatter(brca['Age'], brca['Protein4'], color = color_list[3])\nm, b = np.polyfit(brca['Age'], brca['Protein4'],1)\naxs[1,1].plot(brca['Age'], m * brca['Age'] + b)\naxs[1,1].set_title('Marker Protein 4')\n\nfig.supxlabel('Age')\nfig.supylabel('Protein level')\nplt.show()\n","1e276f61":"n_markers = brca[['Histology', 'ER status', 'PR status', 'HER2 status']]","c0f55770":"n_markers.loc[n_markers['ER status'] == 'Positive'].count()","598e7c78":"n_markers.loc[n_markers['PR status'] == 'Positive'].count()","cf4dcdd0":"n_markers.loc[n_markers['HER2 status'] == 'Positive'].count()","91e0c432":"n_markers.loc[n_markers['HER2 status'] == 'Negative'].count()","a9d254f2":"brca.groupby('HER2 status', as_index = False).agg(Total =('Age', 'count'))","d47f0fa4":"# we get the attributes for positive and negative status patients into two dataframes\nher2_alive = brca.loc[brca['Patient_Status'] == 'Alive'][['Age', 'Tumour_Stage', 'Histology', 'HER2 status']]\nher2_dead = brca.loc[brca['Patient_Status'] == 'Dead'][['Age', 'Tumour_Stage', 'Histology', 'HER2 status']]","8018a374":"# then we group by whether patient status is alive or dead\nalive_stat = her2_alive.groupby('HER2 status', as_index = False)['Age'].count()\ndead_stat = her2_dead.groupby('HER2 status', as_index = False)['Age'].count()","30d4ea4a":"alive_stat  ","34cba5a8":"dead_stat   ","246ac4b4":"# now we plot the chart by number of cases\nvari = ['HER2 Negative', 'HER2 Positive']\nx = np.arange(len(vari))\ncur_width = 0.2\n\nfig, ax = plt.subplots(figsize = (8, 5))\n\npos_ax = ax.bar(x, alive_stat['Age'], width = cur_width, label = 'Alive')\nneg_ax = ax.bar(x + width, dead_stat['Age'], width = cur_width, label = 'Dead')\n\nax.bar_label(pos_ax, padding = 0.3)\nax.bar_label(neg_ax, padding = 0.3)\n\nax.set_xticks(x)\nax.set_xticklabels(vari)\nax.set_yticks(np.arange(0,250,50))\n\nplt.xlabel('Patient Status')\nplt.ylabel('Number of cases')\nplt.title('HER2 Marker status to patient status - by number of cases')\nplt.legend()\nplt.show()","ae8880ee":"# we manually calculate the ratios of dead and alive patients to get the mortality. \n\nalive_stat['Ratio'] = 0\ndead_stat['Ratio'] = 0\n\nalive_stat.iloc[1,2] = alive_stat.iloc[1,1] \/ (alive_stat.iloc[1,1] + dead_stat.iloc[1,1])\ndead_stat.iloc[1,2] = dead_stat.iloc[1,1] \/ (alive_stat.iloc[1,1] + dead_stat.iloc[1,1])\nalive_stat.iloc[0,2] = alive_stat.iloc[0,1] \/ (alive_stat.iloc[0,1] + dead_stat.iloc[0,1])\ndead_stat.iloc[0,2] = dead_stat.iloc[0,1] \/ (alive_stat.iloc[0,1] + dead_stat.iloc[0,1])","4d6d961f":"alive_stat","99b5e3a9":"dead_stat","619762f3":"# and here we plot the scaled chart to reflect ratios \nvari = ['HER2 Negative', 'HER2 Positive']\nx = np.arange(len(vari))\ncur_width = 0.2\n\nfig, ax = plt.subplots(figsize = (8, 5))\n\npos_ax = ax.bar(x, alive_stat['Ratio'], width = cur_width, label = 'Alive')\nneg_ax = ax.bar(x + width, dead_stat['Ratio'], width = cur_width, label = 'Dead')\n\nax.bar_label(pos_ax, padding = 0.3)\nax.bar_label(neg_ax, padding = 0.3)\n\nax.set_xticks(x)\nax.set_xticklabels(vari)\nax.set_yticks(np.arange(0,1.1,0.1))\n\nplt.xlabel('Patient Status')\nplt.ylabel('Ratio of total')\nplt.title('HER2 Marker status to patient status - by ratio')\nplt.legend()\nplt.show()","e1808798":"# We get the patient statuses and ages by age ranges, and put the subsets of data into a dictionary\n\ncancer_mort_raw = {}\nkey = 0\nfor i in range(len(bins)):\n    if i < len(bins) - 1:\n        row = brca.loc[(brca['Age'] >= bins[i]) & (brca['Age'] < bins[i + 1])][['Patient_Status', 'Age']]\n        if row.empty is False:\n            cancer_mort_raw.update({'{} to {}'.format(bins[i], bins[i + 1]):row })\n            key += 1\n    else:\n        pass","eb8dc4a6":"# we further clean the data, and rejoin the subsets into one dataframe\n\ncancer_mort_list = []\n\nfor key, val in cancer_mort_raw.items():\n    age_range = key\n    status_df = val.groupby('Patient_Status', as_index = False).count()\n    status_vals = {}\n    \n    for ps, a in zip(status_df['Patient_Status'], status_df['Age']):\n        status_vals.update({'Age_range': age_range, ps: a})\n        \n    cancer_mort_list.append(status_vals)","de363d14":"cancer_mort = pd.DataFrame(cancer_mort_list)\ncancer_mort.fillna(0, inplace = True)","33ce9c49":"cancer_mort.head()","93483f7f":"fig = plt.figure(figsize = (10,6))\n\nage_range = list(cancer_mort['Age_range'])\nx = np.arange(len(age_range))\nwidth = 0.4\n\nplt.bar(x, cancer_mort['Alive'], width = width, label = 'Alive')\nplt.bar(x + width, cancer_mort['Dead'], width = width, label = 'Dead')\nplt.xticks(x, rotation = 60, labels = age_range)\nplt.yticks(np.arange(0, 55, 5))\nplt.title('Number of dead vs live patients by age range')\nplt.xlabel('Age range')\nplt.ylabel('Number of deaths')\n\nplt.legend()\nplt.show()","168ee508":"cancer_types = (\n    brca\n    .groupby(['Histology', 'Patient_Status'], as_index = False)\n    .agg(Total = ('Age', 'count'))\n)","098b9c59":"cancer_types","83c1d331":"total_lesions = cancer_types_total['Total_Number'].sum()\n\nratios_by_type = []\nratios_by_total = []\nfor hist, pat_total in zip(cancer_types_total['Histology'], cancer_types_total['Total_Number']):\n    results = cancer_types.loc[cancer_types['Histology'] == hist]\n    \n    for result in results['Total']:\n        ratio_by_type = (result\/pat_total)*100\n        ratios_by_type.append(ratio_by_type)\n        \n        ratio_by_total = (result\/total_lesions)*100\n        ratios_by_total.append(ratio_by_total)","bad51392":"cancer_types['Ratio by cancer type (%)'] = ratios_by_type\ncancer_types['Ratio by total (%)'] = ratios_by_total","d08d198f":"cancer_types","396fd7c8":"cancer_types_alive = cancer_types.loc[cancer_types['Patient_Status'] == 'Alive'].copy()\ncancer_types_dead = cancer_types.loc[cancer_types['Patient_Status'] == 'Dead'].copy()","3020bab1":"cancer_types_alive.reset_index(inplace = True)\ncancer_types_alive.drop('index', axis = 1, inplace = True)\n\ncancer_types_dead.reset_index(inplace = True)\ncancer_types_dead.drop('index', axis = 1, inplace = True)","f7ad04f2":"plt.bar(cancer_types_alive['Histology'], cancer_types_alive['Total'], label = 'Patients alive')\nplt.bar(cancer_types_dead['Histology'], cancer_types_dead['Total'], bottom = cancer_types_alive['Total'], label = 'Patients deceased')\n\nplt.xticks(rotation = 60)\nplt.yticks(np.arange(0, 250, 20))\nplt.ylabel('No. of cases', fontdict={'fontsize': 13})\nplt.xlabel('Type of cancer', fontdict={'fontsize': 15})\nplt.title('Mortality rate by cancer type', fontdict={'fontsize': 20})\nplt.legend()\n\nplt.show()","310d4968":"plt.figure(figsize = (8, 5))\ncounter = 0\n\nplt.bar(cancer_types_alive['Histology'], cancer_types_alive['Ratio by cancer type (%)'], label = 'Patients alive')\n\nfor ind, value in zip(cancer_types_alive.index, cancer_types_alive['Ratio by cancer type (%)']):\n    plt.text(ind, 40, '{:.2f}%'.format(value), horizontalalignment='center', fontdict={'fontsize': 15, 'color':'white'})\n\nplt.bar(cancer_types_dead['Histology'], cancer_types_dead['Ratio by cancer type (%)'], bottom = cancer_types_alive['Ratio by cancer type (%)'], label = 'Patients deceased')\n\nfor ind, value in zip(cancer_types_dead.index, cancer_types_dead['Ratio by cancer type (%)']):\n    plt.text(ind, 85, '{:.2f}%'.format(value), horizontalalignment='center', fontdict={'fontsize': 15, 'color':'white'})\n\nplt.xticks(rotation = 60)\nplt.yticks(np.arange(0, 150, 20))\nplt.ylabel('No. of cases', fontdict={'fontsize': 13})\nplt.xlabel('Type of cancer', fontdict={'fontsize': 15})\nplt.title('Adjusted mortality rate by cancer type', fontdict={'fontsize': 20})\n\n\nplt.legend(prop = {'size': 15})\n\nplt.show()","52e3e3a4":"# first we get the histological types \ncancer_stage_raw = {}\nc_types = list(brca['Histology'].unique())\n\nfor ty in c_types:\n# for each type, we get the stages, patient statuses and ages\n    row = brca.loc[(brca['Histology'] == ty)][['Tumour_Stage','Patient_Status', 'Age']]\n    \n# we put the resulting dataframes in a dictionary, with the type as the key\n    cancer_stage_raw.update({'{}'.format(ty):row })","a84e3554":"# we set the labels we want on the x-axis of the charts\nlabels = ['Alive', 'Dead']","9b24dd80":"# now we get the dataframes for each type of cancer\n\nkidc, vidc = list(cancer_stage_raw.keys())[0], list(cancer_stage_raw.values())[0]\nkmcc, vmcc = list(cancer_stage_raw.keys())[1], list(cancer_stage_raw.values())[1]\nkilc, vilc = list(cancer_stage_raw.keys())[2], list(cancer_stage_raw.values())[2]","6c1e52b2":"# for Infiltrating Ductal Carcinoma\n\nidc_i_i = vidc.loc[vidc['Tumour_Stage'] == 'I'][['Patient_Status', 'Age']]\nidc_i_f = idc_i_i.groupby('Patient_Status', as_index = False).count()\n\nidc_ii_i = vidc.loc[vidc['Tumour_Stage'] == 'II'][['Patient_Status', 'Age']]\nidc_ii_f = idc_ii_i.groupby('Patient_Status', as_index = False).count()\n\nidc_iii_i = vidc.loc[vidc['Tumour_Stage'] == 'III'][['Patient_Status', 'Age']]\nidc_iii_f = idc_iii_i.groupby('Patient_Status', as_index = False).count()","957e3315":"# for Infiltrating Lobular Carcinoma\n\nilc_i_i = vilc.loc[vilc['Tumour_Stage'] == 'I'][['Patient_Status', 'Age']]\nilc_i_f = ilc_i_i.groupby('Patient_Status', as_index = False).count()\n\nilc_ii_i = vilc.loc[vilc['Tumour_Stage'] == 'II'][['Patient_Status', 'Age']]\nilc_ii_f = ilc_ii_i.groupby('Patient_Status', as_index = False).count()\n\nilc_iii_i = vilc.loc[vilc['Tumour_Stage'] == 'III'][['Patient_Status', 'Age']]\nilc_iii_f = ilc_iii_i.groupby('Patient_Status', as_index = False).count()","c8b27bd7":"# for Mucinous Carcinoma\n\nmcc_i_i = vmcc.loc[vmcc['Tumour_Stage'] == 'I'][['Patient_Status', 'Age']]\nmcc_i_f = mcc_i_i.groupby('Patient_Status', as_index = False).count()\n\nmcc_ii_i = vmcc.loc[vmcc['Tumour_Stage'] == 'II'][['Patient_Status', 'Age']]\nmcc_ii_f = mcc_ii_i.groupby('Patient_Status', as_index = False).count()\n\nmcc_iii_i = vmcc.loc[vmcc['Tumour_Stage'] == 'III'][['Patient_Status', 'Age']]\nmcc_iii_f = mcc_iii_i.groupby('Patient_Status', as_index = False).count()","66799a88":"# the stage I chart of mucinous carcinoma needs to be appended because it doesn't have a 'Dead' column, which can affect our chart.\n\nmcc_i_f = mcc_i_f.append({'Patient_Status':'Dead','Age':0}, ignore_index = True)","f0673584":"# now we get the percentages for the number of dead and alive patients in each dataset for a scaled comparision\n\nidc_i_f['Percentage'] = (idc_i_f['Age']\/idc_i_f['Age'].sum())*100\nilc_i_f['Percentage'] = (ilc_i_f['Age']\/ilc_i_f['Age'].sum())*100\nmcc_i_f['Percentage'] = (mcc_i_f['Age']\/mcc_i_f['Age'].sum())*100\n\nidc_ii_f['Percentage'] = (idc_ii_f['Age']\/idc_ii_f['Age'].sum())*100\nilc_ii_f['Percentage'] = (ilc_ii_f['Age']\/ilc_ii_f['Age'].sum())*100\nmcc_ii_f['Percentage'] = (mcc_ii_f['Age']\/mcc_ii_f['Age'].sum())*100\n\nidc_iii_f['Percentage'] = (idc_iii_f['Age']\/idc_iii_f['Age'].sum())*100\nilc_iii_f['Percentage'] = (ilc_iii_f['Age']\/ilc_iii_f['Age'].sum())*100\nmcc_iii_f['Percentage'] = (mcc_iii_f['Age']\/mcc_iii_f['Age'].sum())*100","feda3288":"# we get our xticks\nx = np.arange(len(labels))\nwidth = 0.15","5437b98e":"fig = plt.figure(figsize = (20,8))\n\nfig1 = fig.add_subplot(1,3,1)\nfig1.bar(x - width, idc_i_f['Age'], width = width, label = 'Stage I', edgecolor = 'black')\nfig1.bar(x, idc_ii_f['Age'], width = width, label = 'Stage II', edgecolor = 'black')\nfig1.bar(x + width, idc_iii_f['Age'], width = width, label = 'Stage III', edgecolor = 'black')\nfig1.set_yticks(np.arange(0, 110,10))\nfig1.set_xticks(x)\nfig1.set_xticklabels(labels)\nfig1.set_title('Infiltrating Ductal Carcinoma', fontdict = {'fontsize': 20})\nfig1.legend()\n\nfig2 = fig.add_subplot(1,3,2)\nfig2.bar(x - width, ilc_i_f['Age'], width = width, label = 'Stage I', edgecolor = 'black')\nfig2.bar(x, ilc_ii_f['Age'], width = width, label = 'Stage II', edgecolor = 'black')\nfig2.bar(x + width, ilc_iii_f['Age'], width = width, label = 'Stage III', edgecolor = 'black')\nfig2.set_yticks(np.arange(0, 110,10))\nfig2.set_xticks(x)\nfig2.set_xticklabels(labels)\nfig2.set_title('Infiltrating Lobular Carcinoma', fontdict = {'fontsize': 20})\nfig2.legend()\n\nfig3 = fig.add_subplot(1,3,3)\nfig3.bar(x - width, mcc_i_f['Age'], width = width, label = 'Stage I', edgecolor = 'black')\nfig3.bar(x, mcc_ii_f['Age'], width = width, label = 'Stage II', edgecolor = 'black')\n# there is no third bar for mucinous carcinoma since our dataset contains no samples having stage III mucinous carcinoma\nfig3.set_yticks(np.arange(0, 110,10))\nfig3.set_xticks(x)\nfig3.set_xticklabels(labels)\nfig3.set_title('Mucinous Carcinoma', fontdict = {'fontsize': 20})\nfig3.legend()\n\nfig.tight_layout(pad = 6)\nfig.supylabel('No. of patients')\nfig.suptitle('No. of alive vs dead patients by cancer stage', fontsize = 30)\nplt.show()","54122aab":"fig = plt.figure(figsize = (20,8))\n\nfig1 = fig.add_subplot(1,3,1)\nfig1.bar(x - width, idc_i_f['Percentage'], width = width, label = 'Stage I', edgecolor = 'black')\nfig1.bar(x, idc_ii_f['Percentage'], width = width, label = 'Stage II', edgecolor = 'black')\nfig1.bar(x + width, idc_iii_f['Percentage'], width = width, label = 'Stage III', edgecolor = 'black')\nfig1.set_yticks(np.arange(0,110,10))\nfig1.set_xticks(x)\nfig1.set_xticklabels(labels)\nfig1.set_title('Infiltrating Ductal Carcinoma', fontdict = {'fontsize': 20})\nfig1.legend()\n\nfig2 = fig.add_subplot(1,3,2)\nfig2.bar(x - width, ilc_i_f['Percentage'], width = width, label = 'Stage I', edgecolor = 'black')\nfig2.bar(x, ilc_ii_f['Percentage'], width = width, label = 'Stage II', edgecolor = 'black')\nfig2.bar(x + width, ilc_iii_f['Percentage'], width = width, label = 'Stage III', edgecolor = 'black')\nfig2.set_yticks(np.arange(0,110,10))\nfig2.set_xticks(x)\nfig2.set_xticklabels(labels)\nfig2.set_title('Infiltrating Lobular Carcinoma', fontdict = {'fontsize': 20})\nfig2.legend()\n\nfig3 = fig.add_subplot(1,3,3)\nfig3.bar(x - width, mcc_i_f['Percentage'], width = width, label = 'Stage I', edgecolor = 'black')\nfig3.bar(x, mcc_ii_f['Percentage'], width = width, label = 'Stage II', edgecolor = 'black')\n# there is no third bar for mucinous carcinoma since our dataset contains no samples having stage III mucinous carcinoma\nfig3.set_yticks(np.arange(0,110,10))\nfig3.set_xticks(x)\nfig3.set_xticklabels(labels)\nfig3.set_title('Mucinous Carcinoma', fontdict = {'fontsize': 20})\nfig3.legend()\n\nfig.tight_layout(pad = 6)\nfig.supylabel('No. of patients')\nfig.suptitle('Percentage of alive vs dead patients by cancer stage', fontsize = 30)\nplt.show()","3099f67d":"\\","162f4c48":"We further subdivide each cancer type into its stages, to get a more elaborate picture of the distribution of our dataset:","179a0e39":"The adjusted mortality shows us that **each cancer has roughly the same mortality rate - around 20%**.","a7019755":"Now we can make the following observations:\n    \n- For **Infiltrating Ductal Carcinoma**, all three stages appear to have an equal mortality rate, hovering at around **20%**.\n- For **Infiltrating Lobular Carcinoma**, Stage I has a mortality rate of around **10%**, rising slightly to around **12%** in **Stage II**. In **Stage III** however, it jumps to around **30%**.\n- For **Mucinous Carcinoma**, it is difficult to make any real observations due to the scarcity of data. However, it appears that the mortality rate of **Stage II** is at least **30%** higher than that of **Stage I**.","0033f760":"We see from above that the rates of occurance of cancer of all types is greatest in middle ages, with rates of occurance declining at both extremes of age. \n\nPatients 45+ are **nearly double** the number of patients <45 having **Infiltrating Ductal Carcinoma**, with rates jumping from around **13% to 30%** for ages **45-65**, before gradually declining beyond.\n\nFor **Infiltrating Lobular Carcinoma** the number of patients rises morely evenly, with only **1%** of patients from age **25** to **15%** in ages **50-55**. At the other tail of the curve, there is a decrease of 5-10% in numbers up to ages 75-80.\n\nIn **Mucinous Carcinoma**, it is very difficult to interpret any trends due to the smaller number of samples.","d6f7a4f0":"Th above chart shows us the mortality rate by cancer type. However, due to the uneven number of samples of each cancer type, it is difficult to make just how lethal each type is in proportion to the number of samples. We use the ratios we calculated to get a more balanced picture:","eab56675":"The first thing we need to do beyond looking at the initial statistics of the dataset, is to calculate the number of cases by cancer type. In the dataset, the cancer type is given under the column 'Histology'.","c846d625":"## Stages of each cancer type","0a38b854":"So now we see that in our dataset, **70.66%** of cases are of the **Infiltrating Ductal Carcinoma** type, **25.55%** are of the **Infiltrating Lobular Carcinoma** type, and only **3.79%** are of the **Mucinous Carcinoma** type. This fits with the fact that Infiltrating Ductal Carcinoma is the most common type of breast cancer; in any given sample dataset, it is likely that it is the most popular of all the types.","3dcb0c5d":"## Conclusions","c26f8b2f":"### Number of deaths each age range ","1fbc3458":"Taking the figures of cancers types by marker proteins and protein profiles for each type of cancer, we can come to the following rudimentary conclusions:\n- Very low levels of protein 1 and very high levels of protein 3 could mean the possibility of **Infiltrating Ductal Carcinoma**.\n- Very high or very low levels of proteins 1, 2 and 3 could lessen the possibility of the cancer type being **Mucinous Carcinoma**.","feca6219":"In keeping with the findings of this analysis, I would like to research further on male patients having breast cancer, and a greater number of patients having the rarer types of breast cancers. Also, a larger number of patients from the extremes of age ranges could be taken into consideration, so as to check if they present an 'atypical' picture of breast cancer. Regressor models would need to be run upon atypical patients so as to maximize predictive capabilities of the model.","b2087f81":"Mortality is a health statistic that corresponds to the total number of deaths per unit time in a population divided by the population's number. Since our dataset gives us the patient's status (alive or dead), it would be interesting to calculate the mortality by different parameters for our dataset.","b60a50e8":"#### For ER status:","4347117e":"The above filtering shows us that **all patients in the dataset have a positive PR(Progesterone Receptor) and ER(Estrogen Receptor) status**, which means that analyses based on these two receptors is unlikely to be beneficial. However the **HER2 status is both positive and negative**, which could be useful in analysis. ","77a3bbe1":"### Mapping ages to protein levels","6536b12b":"From the above chart, we can see that deaths in all age ranges follow a normal distribution, same as the overall distribution of number of cases. We could try to get the percentages for each age range, but considering that we have an uneven number of patients in each range, our results could be deciphered incorrectly. ","cbdffb53":"First we can take a look at the number of deaths in each age range. For this, weonce again need to transform the data before we can work with it.","f1016d58":"A cancer tumor often produces a specific protein in the blood that serves as a marker for the cancer. These protein levels can be measured via blood tests to determine the possibility of cancer. \n\nOur dataset does not name the four marker proteins, nor does it give the units of measurement. Nevertheless, we can measure their levels relative to each other (as well as other attributes in the dataset) to see if any patterns jump out.","aebc7187":"#### For PR status:","178c063b":"### Marker protein level by stage for each type of cancer","06f1e0a8":"## Marker Proteins","9fecc11c":"### Cancer types by marker protein levels","33fabfb6":"Above, we can see the no. of cases of each cancer type, the patient status, and the ratio of status by cancer type as well as total number of cases. ","c1f6e6fb":"The first thing we do is to see how many male vs female patients we have:","da75b33e":"From the above box-and-whiskers plot, we see the following:\n\nThe **mean** of **Marker Protein 1** is at around **0.0**, and the **IQR** is relatively small, from **-0.40 to 0.35**. The **total spread** is around **-1.7 to 1.1**, but there are **a few outliers on either side**.\n\nThe **mean** of the **Marker Protein 2** is the highest, hovering somewhere around **1.0**. Its **IQR** is the largest as well from around **0.35 to 1.60**. The **total spread** is correspondingly the largest, from around **-1.0 to 3.4**, but there are **no outliers**.\n\nThe **mean of Marker Protein 3** is at around **-0.1**. Its **IQR** is a little greater than that of the Protein 1 Marker, from **-0.6 to 0.2**, and its **total spread** is slightly larger as well from **-1.7 to 1.4**. There are **outliers on the higher side**, but none on the lower side.\n\nThe **mean** of **Marker Protein 4** is at around **0.0** as well. Its **IQR** is of a similar size to that of the Protein 3 Marker, from **-0.4 to 0.4**. Its **total spread** is from **-1.5 to 1.6**, with **some outliers on the lower side**. ","2995f889":"Alternatively, we could look at the marker protein composition is in each type of cancer, as a distinct profile could also alert us to the type of cancer.","eac42fe7":"#### For HER2 status:","8e9e92c0":"By this adjusted scale, we see that the actual mortality of **HER2 negative** patients is slightly **greater** than **HER2 positive** patients. ","927663ac":"We started this analysis with the intention of seeing any trends or correlation between the different attributes in breast cancer patients. After our analysis, we see the following trends:\n- Male cancer patients make up a little more than 1% of all breast cancer patients in the dataset.\n- 40% or more patients having breast cancer fall in the age range of 40-65. For Infiltrating Ductal Carcinoma the numbers rise fairly sharply, but for Infiltrating Lobular and Mucinous Carcinoma the curve is more gradual.\n- A majority of patients having breast cancer have the Infiltrating Ductal variety. \n- For both Infiltrating Ductal and Lobular Carcinomas, most patients present in the II and III stages.\n- The number of patients having Mucinous Carcinoma are the fewest in the entire dataset; there are no patients having Stage III Mucinous Carcinoma in the dataset. \n- Marker proteins, which are a special kind of protein that serve as markers for cancer, have no particular association with age, type or stage of cancer. \n- ER and PR receptors are all positive for every patient in the dataset. \n- There are both HER2 positive and HER2 negative patients in the dataset.\n- The mortality of HER2 positive patients is at 13.79% for our dataset, while the mortality of HER2 negative patients is slightly higher at 20.14%.\n- In keeping with the general distribution of the data, the mortality by age range is highest between ages 45-70.\n- The mortality rates by cancer types all hover around twenty percent. \n- For Infiltrating Ductal Carcinoma, the overall mortality is 20.09%; in Stage I it is 17.02%, in Stage II, it is 21.67%, and in Stage III, it is 19.30%.)\n- For Infiltrating Lobular Carcinoma, the overall mortality is 17.28%; in Stage I the mortality is 10.0%, in Stage II it is 13.73%, and in Stage III it is 30%.\n- For Mucinous Carcinoma, the overall mortality is 25.00%; in Stage I it is 0.0%, in Stage II it is 33.33%, and in Stage III it is 0.0%.\n- All percentages derived from total number of patients in the given stage of that particular cancer.\n- With only our dataset as the training and testing model, our regressor model was able to predict the survival of the patients with a mean square error of 0.33.\n\n\n","57d52c23":"Here we see the distribution patterns of protein markers for all the breast cancer types. \n\n**Marker Protein 1:**\nWe see that for the most part, the values are symmetrically spaced around the 0.0 point. However, the levels for **IDC** end to dip more towards the negative, going down to as far as -2.1, which could be an indicator of this type of cancer should such low levels show up in reports.\n\n**Marker Protein 2:**\nThe values here are higher than those for Marker Protein 1. However, with the exception of a few outliers, the ranges all seem the same for all three types of cancers, except for MCC, whose upper range is far smaller than that of the other two cancers. \n\n**Marker Protein 3:**\nThe values for Marker Protein 3 show a similar distribution to that of Marker Protein 1. The only notable difference here is in the values for IDC, which go as high as +2.0. This high level is not reached in the other two types, and could indicate the presence of **IDC** in very high Protein 3 levels. \n\n**Marker Protein 4:**\nThe values for this protein are, again, similar to protein 1 and 3. ","44ba730b":"## Age distribution in dataset","e0170d9c":"First we filter the relevant data:","a0051ed7":"## Age ranges for each cancer type","3d1dcb8e":"**PR(Progesterone Receptor)**, **ER(Estrogen Receptor)** may be found in breast cancer cells. Cancer cells with these receptors depend on estrogen and related hormones, such as progesterone, to grow. About two-thirds of breast cancers are ER and\/or PR positive.\n\n**HER2(Human Epidermal growth factor Receptor 2)** is a protein that can play a role in the development of breast cancer.  HER2-positive breast cancers tend to grow faster and are more likely to spread and come back compared to HER2-negative breast cancers. But there are medicines specifically for HER2-positive breast cancers.","e57cd7a3":"We can also look at the age ranges in our dataset to get a feel for its distribution. For this, we can construct a histogram:","1bf2b6ba":"Another good way to get a measure of our data is to look at the levels of marker proteins by age. This could give us an idea of whether marker levels could be a good prognostic indicator by age.","d0992b31":"We check out the statistical measurements of our data at a glance.","089f9eca":"## Future Analyses","5d64d4e5":"### Number of deaths by stage","e962068e":"We can also look at the age ranges for each cancer type, to see whether any particular type favours any age range. For this we need to transform the dataset to get the number of cases in each age range.","bcb43652":"To see what patterns these receptors follow in patients with breast cancer, we will first check the number of patients who are positive for these receptors:","6babe04e":"#### **Table of contents:**\n- [Gender distribution in dataset](#Gender-distribution-in-dataset)\n- [Age distribution in dataset](#Age-distribution-in-dataset)\n- [Number of cases by cancer type](#Number-of-cases-by-cancer-type)\n- [Stages of each cancer type](#Stages-of-each-cancer-type)\n- [Age ranges for each cancer type](#Age-ranges-for-each-cancer-type)\n- [Marker Proteins](#Marker-Proteins)\n    - [Cancer types by marker protein levels](#Cancer-types-by-marker-protein-levels)\n    - [Marker protein levels by cancer types](#Marker-protein-levels-by-cancer-types)\n    - [Marker Protein level by stage for each type of cancer](#Protein-marker-level-by-stage-for-each-type-of-cancer)\n    - [Mapping ages to protein levels](#Mapping-ages-to-protein-levels)\n- [Checking ER\/PR\/HER2 statuses](#Checking-ER\/PR\/HER2-statuses)\n- [Mortality](#Mortality)\n    - [Number of deaths in each age range](#Number-of-deaths-in-each-age-range)\n    - [Mortality rate by cancer type](#Mortality-rate-by-cancer-type)\n    - [Number of deaths by stage](#Number-of-deaths-by-stage)\n- [Random Forest Analysis for multiple factors determination of prognosis](#Random-Forest-Analysis-for-multiple-factors-in-determination-of-prognosis)\n- [Conclusions](#Conclusions)\n- [Future Analyses](#Future-Analyses)","227a514c":"Breast cancer is the most common cancer in women around the world. In 2020 alone, there were **2.3 million women diagnosed** with breast cancer and **685,000 deaths** globally. As of the end of **2020**, there were **7.8 million women alive who were diagnosed with breast cancer** in the past 5 years, making it the world\u2019s most prevalent cancer. In addition, around **0.5-1% of cancer patients are male**.\n\nBreast cancer arises in the lining cells (epithelium) of the ducts (85%) or lobules (15%) in the glandular tissue of the breast. Initially, the cancerous growth is confined to the duct or lobule (\u201cin situ\u201d) where it generally causes no symptoms and has minimal potential for spread (metastasis). \n\nInfiltrating ductal carcinoma is the most common type of breast cancer, followed by infiltrating lobular carcinoma. There are many other, much rarer types, including mucinous carcinoma.\n\nIn this notebook, I will be analysing the __[Real Breast Cancer Data](https:\/\/www.kaggle.com\/amandam1\/breastcancerdataset\/discussion\/270626)__ dataset to see the correlation between different features that occur in breast cancer patients and try to find some trends or patterns between them. ","f44c6692":"We see here that the greatest number of deaths occur in Stage II of each type of cancer. However, the reason for this high number could be because we have a large number of Stage II samples; the numbers in the 'Alive' column follow a similar pattern to the ones in the 'Dead' column. To get a better idea of the relative mortality, we use the 'Percentage' column in our dataframes:","47f9b7af":"We can also see the attributes of our dataset:","53cf8a02":"## Number of cases by cancer type","09f38227":"## Gender distribution in dataset","78d42717":"We can see what the mortality is for each cancer type:","8405c1ac":"To get a better idea of the true proportion of each number to cases to the total number of cases, we plot a bar chart with the percentage of cases:","39fba3ac":"We see from above that there are only **four male cancer patients** or **1.26%** of the total, as opposed to **313 female cancer patients** or **98.74%** of the total, in the dataset. This could make any analysis of males vs females problematic, as we would need a sample size of >4 in order to generate any significant results.","c7f8b24a":"## Checking ER\/PR\/HER2 statuses","574b5dbc":"It would be good to see what each protein level is in each type of cancer, as differences in levels of different proteins could signal the type of breast cancer. For this, we could create a scatter plot to see what results we get. ","443f9cb8":"Now we can see that for **Infiltrating Ductal Carcinoma** and **Infiltrating Lobular Carcinoma**, the number of Stage II patients are the greatest, followed by stage III. This could be due to the fact that many patients do not present to the doctor until they are in Stage II of the disease.","4dae3fa9":"We see above that a greater number of patients are **HER2 negative**, and out of them a large number are alive. By comparision, in **HER2 positive** cases, there appear to be a smaller number of living patients compared to the dead. However, in order to calculate whether mortality is truly greaer in HER2 positive patients than in HER2 negative patients, we need to find the ratio of dead to alive patients in HER2 positive patients and HER2 negative patients respectively. ","945b2a56":"# Data analysis of breast cancer patients","48bdb263":"The regression lines in the above charts make it clear that there is no real association between any of the protein markers and age.","72c5196d":"Unfortunately, there does not appear to be an association between cancer stage and protein levels for any of the cancer types. Further investigation needs to be done to see whether levels are truly variable for all stages in all cancers, or whether it is simply a quirk of our dataset.","fe58f4fa":"In order to get a better idea of the mortality for each cancer type, we need to figure out the number of deaths in each stage. For this we shall once again transform the data:","662616a6":"From the table above, we see that there are **224 cases of Infiltrating Ductal Carcinoma**, **81 cases of Infiltrating Lobular Carcinoma** and only **12 cases of mucinous carcinoma**.","80d11ca2":"### Marker protein levels by cancer types","9832024f":"### Mortality rate by cancer type","d7f3a462":"Since there are no samples of Stage III Mucinous Carcinoma, we will add this row manually:","ae431333":"Finally we start constructing our charts:","2d7dde4f":"## Mortality","e9d7fc61":"In the above analysis, we have seen the protein levels by cancer type, and cancer types by protein levels. A  more elaborate picture could be constructed by checking the protein marker levels by stage for each cancer type, with the assumption being that each stage should have a different protein level. ","b3fd94c6":"The above box-and-whiskers plots show us the marker protein levels for each type of breast cancer. The plots corraborate the distributions that we saw in the previous charts, as well as giving us some new insights. Some of the overall trends to be noted are:\n- The highest levels of marker protein found in all three cancer types is marker protein 2.\n- While the overall range for protein 1 in IDC and ILC are similar, the presence of outliers on the lower end of the scale in IDC could indicate the possibility of IDC in very low levels of Protein 1.\n- The ranges for marker proteins 1, 2 and 3 for MCC are far tighter compared to the other two types of cancer. ","cdbfa650":"In the three cells below this, we filter the samples by stage into different datasets. This is so that constructing the bar chart would be easier in the end"}}