{"cell_type":{"e0efffeb":"code","6d4048c9":"code","7b90e955":"code","c00a43cb":"code","c9893ad7":"code","c9e682a5":"code","95037168":"code","75778fc9":"code","8f62d679":"code","33606046":"code","033f441c":"code","b7ad70be":"code","45acd84c":"code","6f2f8bc7":"code","98e04cc7":"code","a1eacb0d":"code","5289c119":"code","fc4d42d4":"code","8a0a0e9b":"code","4209002e":"code","494c635f":"code","eae0db19":"code","a0e87da0":"code","4e9ca88c":"code","bb54e319":"code","5b62533f":"markdown"},"source":{"e0efffeb":"import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt","6d4048c9":"df = pd.read_csv(\"..\/input\/daily-climate-time-series-data\/DailyDelhiClimateTest.csv\")\n#Obs: eu usei o dataset de teste sem perceber mas no final ficou mais did\u00e1tico :D","7b90e955":"df.head()","c00a43cb":"df.info()","c9893ad7":"df.date = pd.DatetimeIndex(df.date.values)\ndf = df.set_index('date')\ndf.head()","c9e682a5":"df.describe()","95037168":"df_exemple = pd.read_csv(\"..\/input\/daily-climate-time-series-data\/DailyDelhiClimateTest.csv\")\ndf_exemple.date = pd.to_datetime(df_exemple.date)\ndf_exemple = df_exemple.set_index('date')","75778fc9":"df_exemple.resample('M').mean()","8f62d679":"df_exemple.resample('H').ffill()","33606046":"df_exemple.resample('H').bfill()","033f441c":"df.plot(subplots=True, figsize=(10,8))","b7ad70be":"df.meantemp.hist(grid=False, bins=10, )\nplt.show()","45acd84c":"from statsmodels.tsa.seasonal import seasonal_decompose\nresult = seasonal_decompose(df.meantemp)\nresult.plot()\nplt.show()","6f2f8bc7":"# import matplotlib.dates as mdates\n\nfig, ax = plt.subplots(figsize=(10,7))\nplt.subplots_adjust(hspace=0.5)\n\nax0 = plt.subplot(411)\nplt.plot(result.observed)\nax0.set_title('observado')\n\nax1 = plt.subplot(412)\nplt.plot(result.trend)\nax1.set_title('tend\u00eancia')\n\nax2 = plt.subplot(413)\nplt.plot(result.seasonal)\nax2.set_title('sazonalidade')\n\nax3 = plt.subplot(414)\nplt.plot(result.resid)\nax3.set_title('res\u00edduo')\nfig.autofmt_xdate()\n","98e04cc7":"from statsmodels.tsa.stattools import adfuller\nfrom statsmodels.tsa.stattools import acf, pacf\n\nprint('Resultados - Dickey Fuller Teste:')\nadftest = adfuller(df['meantemp'])\n\nout = pd.Series(adftest[0:4], index=['Teste','p-valor','Lags','N\u00famero de observa\u00e7\u00f5es usadas'])\nfor key,value in adftest[4].items():\n    out['Valor cr\u00edtico (%s)'% key] = value\nprint(out)","a1eacb0d":"dfdiff = df.meantemp.diff()\ndfdiff = dfdiff.dropna()\nplt.title(\"Primeira diferencia\u00e7\u00e3o\")\ndfdiff.plot()\nplt.show()","5289c119":"print('Results of Dickey Fuller Test: Diferencia\u00e7\u00e3o')\ndftest = adfuller(dfdiff, autolag='AIC')\n\ndfoutput = pd.Series(dftest[0:4], index=['Test Statistic','p-value','#Lags Used','Number of Observations Used'])\nfor key,value in dftest[4].items():\n    dfoutput['Critical Value (%s)'%key] = value\n    \nprint(dfoutput)","fc4d42d4":"#Determine rolling statistics\nmediamovel = df['meantemp'].rolling(window=7).mean() #window = 7 diz que a janela usada para m\u00e9dia m\u00f3vel \u00e9 de 7 observa\u00e7\u00f5es (no caso 7 dias)\ndesviomovel = df['meantemp'].rolling(window=7).std()\n\nfig, ax = plt.subplots(figsize=(10,7))\n\n\norig = plt.plot(df['meantemp'], color='blue', label='Observado')\nmedia = plt.plot(mediamovel, color='red', label='M\u00e9dia M\u00f3vel')\ndesvio = plt.plot(desviomovel, color='black', label='Desvio Padr\u00e3o M\u00f3vel')\nplt.legend(loc='best')\nplt.title('Estat\u00edsticas de rolagem')\nfig.autofmt_xdate()\n\nplt.show(block=False)","8a0a0e9b":"temp_log = np.log(df['meantemp'])\nfig, ax = plt.subplots()\nplt.plot(temp_log)\nplt.title(\"Transforma\u00e7\u00e3o logar\u00edtma\")\nax.xaxis_date()\nfig.autofmt_xdate()","4209002e":"print('Results of Dickey Fuller Test:')\ndftest = adfuller(temp_log, autolag='AIC')\n\ndfoutput = pd.Series(dftest[0:4], index=['Test Statistic','p-value','#Lags Used','Number of Observations Used'])\nfor key,value in dftest[4].items():\n    dfoutput['Critical Value (%s)'%key] = value\n    \nprint(dfoutput)","494c635f":"#Determine rolling statistics\nrolmean_log = temp_log.rolling(window=7).mean() \nrolstd = temp_log.rolling(window=7).std()\n\nfig, ax = plt.subplots(figsize=(8,6))\n\norig = plt.plot(temp_log, color='blue', label='Transforma\u00e7\u00e3o logar\u00edtmica')\nmean = plt.plot(rolmean_log, color='red', label='M\u00e9dia M\u00f3vel da transforma\u00e7\u00e3o')\nplt.legend(loc='best')\nplt.title('Estat\u00edsticas de rolagem - Log')\nax.xaxis_date()\nfig.autofmt_xdate()\nplt.show(block=False)","eae0db19":"log_menos_media = temp_log - rolmean_log\n#Remove NAN values\nlog_menos_media.dropna(inplace=True)","a0e87da0":"#Determine rolling statistics\nrolmean = log_menos_media.rolling(window=7).mean() #window size 12 denotes 12 months, giving rolling mean at yearly level\nrolstd = log_menos_media.rolling(window=7).std()\n\nfig, ax = plt.subplots(figsize=(8,6))\n\norig = plt.plot(log_menos_media, color='blue', label='Observado')\nmean = plt.plot(rolmean, color='red', label='M\u00e9dia M\u00f3vel')\nstd = plt.plot(rolstd, color='black', label='Desvio Padr\u00e3o M\u00f3vel')\nplt.legend(loc='best')\nplt.title('Estat\u00edsticas de rolagem')\n\nax.xaxis_date()\nfig.autofmt_xdate()\nplt.show(block=False)","4e9ca88c":"print('Results of Dickey Fuller Test: Log menos m\u00e9dia')\ndftest = adfuller(log_menos_media, autolag='AIC')\n\ndfoutput = pd.Series(dftest[0:4], index=['Test Statistic','p-value','#Lags Used','Number of Observations Used'])\nfor key,value in dftest[4].items():\n    dfoutput['Critical Value (%s)'%key] = value\n    \nprint(dfoutput)","bb54e319":"from scipy.stats import boxcox\nmeantemp_bcx, lam = boxcox(df['meantemp'])\nprint('Lambda: %f' % lam)\n\nfig, ax = plt.subplots()\n# line plot\nfig.suptitle(\"BoxCox resultados\")\nplt.subplot(211)\n\nplt.plot(meantemp_bcx)\n# histogram\nplt.subplot(212)\nplt.hist(meantemp_bcx)\nplt.show()\n\nprint('Results of Dickey Fuller Test:')\ndftest = adfuller(meantemp_bcx, autolag='AIC')\n\ndfoutput = pd.Series(dftest[0:4], index=['Test Statistic','p-value','#Lags Used','Number of Observations Used'])\nfor key,value in dftest[4].items():\n    dfoutput['Critical Value (%s)'%key] = value\n    \nprint(dfoutput)","5b62533f":"This notebook is the pratical part of this article (in portuguese): https:\/\/medium.com\/@gisely.alves\/s%C3%A9ries-temporais-parte-1-20fca5a6c7cd"}}