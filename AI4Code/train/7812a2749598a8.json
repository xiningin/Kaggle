{"cell_type":{"20f893c3":"code","fa98a0d8":"code","a51c54a6":"code","d96b31f7":"code","3029ccea":"code","fce24cb5":"code","94b54b9d":"code","07f68844":"code","900a359d":"code","12ea6dfb":"code","7979fd29":"code","a7ff82de":"code","12260f9d":"code","9fac87de":"code","3b5ca859":"code","041c9f1a":"code","aa60ac43":"code","6df91262":"code","304e916a":"code","04b3acb5":"code","760e4140":"code","df74cc49":"code","0141a197":"code","4d45206a":"code","980b6780":"code","1b4c0625":"code","d29c9db6":"code","d6430ad0":"code","ed13b8de":"code","d94cabce":"code","497d4f9e":"code","77052faa":"code","b9df04ab":"code","7aed5ac0":"code","f1f80e0c":"code","8acd8ba1":"code","d43d384c":"code","0c4c2e5d":"code","aed687fb":"code","e5e590f5":"code","60948d19":"code","0043d157":"code","8e1d22cd":"code","a0659fa0":"code","b37233e8":"code","2fe8d83f":"code","24aee76e":"code","e6673cb2":"code","6bba51c4":"code","990b34af":"code","508bb768":"code","04e969af":"code","16b80d10":"code","d6bc1eda":"code","d13022a4":"code","369a37bb":"code","4bafb2ae":"code","e5e60261":"code","49cdf2e4":"code","c2a8a969":"code","6e2fadc7":"code","dc6c5d81":"code","33678402":"code","0a1d014b":"code","b349ccd1":"markdown","3f354f1f":"markdown","bccab837":"markdown","2bfa033a":"markdown","9d14718a":"markdown","d7155bd9":"markdown","f6baf945":"markdown","cafa24a9":"markdown","5dad203e":"markdown","6a51bbd8":"markdown","9bb40836":"markdown","59822b70":"markdown","cd01a732":"markdown","d191aaec":"markdown","0e97bb87":"markdown","cf9cbfd0":"markdown","0e6b65ab":"markdown","a2aa9864":"markdown","b6cce0e8":"markdown","14a2a8e1":"markdown","048b6673":"markdown","1cafdf4b":"markdown","d85980d3":"markdown","aadc7d43":"markdown","1f533f28":"markdown","6289e4c1":"markdown","5b75a026":"markdown","0d341925":"markdown","dd952c03":"markdown","38d1d574":"markdown","b7ef5206":"markdown","ba0a133e":"markdown","be6fd2bb":"markdown","a4b2ec7e":"markdown","a0227d87":"markdown","c83afe9e":"markdown","9a1e3d60":"markdown","cfc4eb75":"markdown","52ac01ae":"markdown","c9475f11":"markdown","446416f1":"markdown","0d6659b6":"markdown","03cd795e":"markdown","065211a6":"markdown","3a128b8c":"markdown","29933b6a":"markdown","c31fef39":"markdown","b3a1cd16":"markdown","10d2fe54":"markdown","6d9a0459":"markdown","e1ee479e":"markdown","4749254d":"markdown","6bcf5865":"markdown","73f40a1b":"markdown","c724b3e1":"markdown","b5845ea2":"markdown","d1e3ca3c":"markdown","3845f437":"markdown","0264f059":"markdown","48be14ce":"markdown","9823a0d2":"markdown","0fba3cf7":"markdown","eb3993e2":"markdown","bccc2b18":"markdown","e376c38c":"markdown","572f7a9d":"markdown","c03329a9":"markdown","cb0ba74b":"markdown","4e81aeb7":"markdown","62236d0a":"markdown","c03f87ef":"markdown","a576518d":"markdown","9c46e6da":"markdown","d09b9abe":"markdown","d97b3899":"markdown","6c90af9c":"markdown","3b217039":"markdown","00868ec7":"markdown","88b7737f":"markdown","43c251ce":"markdown","8848100d":"markdown","5d5fe507":"markdown","4d3d3922":"markdown","2f5e300d":"markdown"},"source":{"20f893c3":"import pandas as pd \nimport numpy as np\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline \n\nimport gc\nfrom datetime import datetime \nfrom sklearn.model_selection import train_test_split\nfrom sklearn.model_selection import KFold\nfrom sklearn.metrics import roc_auc_score\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.ensemble import AdaBoostClassifier\nfrom catboost import CatBoostClassifier\nimport lightgbm as lgb\nimport xgboost as xgb\n\npd.set_option('display.max_columns', 100)","fa98a0d8":"RFC_METRIC = 'gini'         # metrik digunakan dengan Random Forrest Classifier\nNUM_ESTIMATORS = 100        # jumlah estimator yang digunakan untuk Random Forrest Classifier\nNO_JOBS = 4                 # jumlah pekerjaan paralel yang digunakan untuk Random Forrest Classifier\n\n#VALIDASI\nVALID_SIZE = 0.20           # validasi sederhana menggunakan train_test_split\n\n#VALIDASI SILANG\nNUMBER_KFOLDS = 5           # jumlah KFolds untuk validasi silang\n\nRANDOM_STATE = 2021\n\nMAX_ROUNDS = 1000           # iterasi lgb\nEARLY_STOP = 50             # lgb berhenti lebih awal\nOPT_ROUNDS = 1000           # untuk disesuaikan berdasarkan putaran validasi terbaik\nVERBOSE_EVAL = 50           # cetak hasil metrik\n\nIS_LOCAL = False\n\nimport os\n\nif(IS_LOCAL):\n    PATH=\"..\/input\/default-of-credit-card-clients-dataset\"\nelse:\n    PATH=\"..\/input\"\nprint(os.listdir(PATH))","a51c54a6":"data_df = pd.read_csv(PATH+\"\/UCI_Credit_Card.csv\")","d96b31f7":"print(\"Default Credit Card Clients data -  rows:\",data_df.shape[0],\" columns:\", data_df.shape[1])","3029ccea":"data_df.head(3)","fce24cb5":"data_df.describe()","94b54b9d":"total = data_df.isnull().sum().sort_values(ascending = False)\npercent = (data_df.isnull().sum()\/data_df.isnull().count()*100).sort_values(ascending = False)\npd.concat([total, percent], axis=1, keys=['Total', 'Percent']).transpose()","07f68844":"temp = data_df[\"default.payment.next.month\"].value_counts()\ndf = pd.DataFrame({'default.payment.next.month': temp.index,'values': temp.values})\nplt.figure(figsize = (6,6))\nplt.title('Default Credit Card Clients - target value - data unbalance\\n (Default = 0, Not Default = 1)')\nsns.set_color_codes(\"pastel\")\nsns.barplot(x = 'default.payment.next.month', y=\"values\", data=df)\nlocs, labels = plt.xticks()\nplt.show()","900a359d":"plt.figure(figsize = (14,6))\nplt.title('Amount of credit limit - Density Plot')\nsns.set_color_codes(\"pastel\")\nsns.distplot(data_df['LIMIT_BAL'],kde=True,bins=200, color=\"blue\")\nplt.show()","12ea6dfb":"data_df['LIMIT_BAL'].value_counts().shape","7979fd29":"data_df['LIMIT_BAL'].value_counts().head(5)","a7ff82de":"class_0 = data_df.loc[data_df['default.payment.next.month'] == 0][\"LIMIT_BAL\"]\nclass_1 = data_df.loc[data_df['default.payment.next.month'] == 1][\"LIMIT_BAL\"]\nplt.figure(figsize = (14,6))\nplt.title('Default amount of credit limit  - grouped by Payment Next Month (Density Plot)')\nsns.set_color_codes(\"pastel\")\nsns.distplot(class_1,kde=True,bins=200, color=\"red\")\nsns.distplot(class_0,kde=True,bins=200, color=\"green\")\nplt.show()","12260f9d":"fig, (ax1, ax2) = plt.subplots(ncols=2, figsize=(12,6))\ns = sns.boxplot(ax = ax1, x=\"SEX\", y=\"LIMIT_BAL\", hue=\"SEX\",data=data_df, palette=\"PRGn\",showfliers=True)\ns = sns.boxplot(ax = ax2, x=\"SEX\", y=\"LIMIT_BAL\", hue=\"SEX\",data=data_df, palette=\"PRGn\",showfliers=False)\nplt.show();","9fac87de":"var = ['BILL_AMT1','BILL_AMT2','BILL_AMT3','BILL_AMT4','BILL_AMT5','BILL_AMT6']\n\nplt.figure(figsize = (10,10))\nplt.title('Amount of bill statement (Apr-Sept) \\ncorrelation plot (Pearson)')\ncorr = data_df[var].corr()\nsns.heatmap(corr,xticklabels=corr.columns,yticklabels=corr.columns,linewidths=.1,vmin=-1, vmax=1)\nplt.show()","3b5ca859":"var = ['PAY_AMT1', 'PAY_AMT2', 'PAY_AMT3', 'PAY_AMT4', 'PAY_AMT5']\n\nplt.figure(figsize = (10,10))\nplt.title('Amount of previous payment (Apr-Sept) \\ncorrelation plot (Pearson)')\ncorr = data_df[var].corr()\nsns.heatmap(corr,xticklabels=corr.columns,yticklabels=corr.columns,linewidths=.1,vmin=-1, vmax=1)\nplt.show()","041c9f1a":"var = ['PAY_0','PAY_2', 'PAY_3', 'PAY_4', 'PAY_5', 'PAY_6']\n\nplt.figure(figsize = (8,8))\nplt.title('Repayment status (Apr-Sept) \\ncorrelation plot (Pearson)')\ncorr = data_df[var].corr()\nsns.heatmap(corr,xticklabels=corr.columns,yticklabels=corr.columns,linewidths=.1,vmin=-1, vmax=1)\nplt.show()","aa60ac43":"def boxplot_variation(feature1, feature2, feature3, width=16):\n    fig, ax1 = plt.subplots(ncols=1, figsize=(width,6))\n    s = sns.boxplot(ax = ax1, x=feature1, y=feature2, hue=feature3,\n                data=data_df, palette=\"PRGn\",showfliers=False)\n    s.set_xticklabels(s.get_xticklabels(),rotation=90)\n    plt.show();","6df91262":"boxplot_variation('MARRIAGE','AGE', 'SEX',8)","304e916a":"boxplot_variation('EDUCATION','AGE', 'MARRIAGE',12)","04b3acb5":"boxplot_variation('AGE','LIMIT_BAL', 'SEX',16)","760e4140":"boxplot_variation('MARRIAGE','LIMIT_BAL', 'EDUCATION',12)","df74cc49":"target = 'default.payment.next.month'\npredictors = [  'LIMIT_BAL', 'SEX', 'EDUCATION', 'MARRIAGE', 'AGE', \n                'PAY_0', 'PAY_2', 'PAY_3', 'PAY_4', 'PAY_5', 'PAY_6', \n                'BILL_AMT1','BILL_AMT2', 'BILL_AMT3', 'BILL_AMT4', 'BILL_AMT5', 'BILL_AMT6',\n                'PAY_AMT1', 'PAY_AMT2', 'PAY_AMT3', 'PAY_AMT4', 'PAY_AMT5', 'PAY_AMT6']","0141a197":"train_df, val_df = train_test_split(data_df, test_size=VALID_SIZE, random_state=RANDOM_STATE, shuffle=True )","4d45206a":"train_df_bkp = train_df.copy()\nval_df_bkp = val_df.copy()","980b6780":"clf = RandomForestClassifier(n_jobs=NO_JOBS, \n                             random_state=RANDOM_STATE,\n                             criterion=RFC_METRIC,\n                             n_estimators=NUM_ESTIMATORS,\n                             verbose=False)","1b4c0625":"clf.fit(train_df[predictors], train_df[target].values)","d29c9db6":"preds = clf.predict(val_df[predictors])","d6430ad0":"tmp = pd.DataFrame({'Feature': predictors, 'Feature importance': clf.feature_importances_})\ntmp = tmp.sort_values(by='Feature importance',ascending=False)\nplt.figure(figsize = (7,4))\nplt.title('Features importance',fontsize=14)\ns = sns.barplot(x='Feature',y='Feature importance',data=tmp)\ns.set_xticklabels(s.get_xticklabels(),rotation=90)\nplt.show()   \n","ed13b8de":"cm = pd.crosstab(val_df[target].values, preds, rownames=['Actual'], colnames=['Predicted'])\nfig, (ax1) = plt.subplots(ncols=1, figsize=(5,5))\nsns.heatmap(cm, \n            xticklabels=['Not Default', 'Default'],\n            yticklabels=['Not Default', 'Default'],\n            annot=True,ax=ax1,\n            linewidths=.2,linecolor=\"Darkblue\", cmap=\"Blues\")\nplt.title('Confusion Matrix', fontsize=14)\nplt.show()","d94cabce":"roc_auc_score(val_df[target].values, preds)","497d4f9e":"cat_features = ['EDUCATION', 'SEX', 'MARRIAGE', 'PAY_0', 'PAY_2', 'PAY_3', 'PAY_4', 'PAY_5', 'PAY_6']","77052faa":"train_f_df = pd.get_dummies(train_df_bkp, columns = cat_features)\nval_f_df = pd.get_dummies(val_df_bkp, columns = cat_features)","b9df04ab":"print(\"Default of Credit Card Clients train data -  rows:\",train_f_df.shape[0],\" columns:\", train_f_df.shape[1])\nprint(\"Default of Credit Card Clients val  data -  rows:\",val_f_df.shape[0],\" columns:\", val_f_df.shape[1])","7aed5ac0":"train_fa_df, val_fa_df = train_f_df.align(val_f_df, join='outer', axis=1, fill_value=0)","f1f80e0c":"print(\"Default of Credit Card Clients train data -  rows:\",train_fa_df.shape[0],\" columns:\", train_fa_df.shape[1])\nprint(\"Default of Credit Card Clients val  data -  rows:\",val_fa_df.shape[0],\" columns:\", val_fa_df.shape[1])","8acd8ba1":"train_fa_df.head(5)","d43d384c":"val_fa_df.head(5)","0c4c2e5d":"target_f = 'default.payment.next.month'\npredictors_f = ['AGE', 'BILL_AMT1', 'BILL_AMT2', 'BILL_AMT3', 'BILL_AMT4',\n       'BILL_AMT5', 'BILL_AMT6', 'EDUCATION_0', 'EDUCATION_1',\n       'EDUCATION_2', 'EDUCATION_3', 'EDUCATION_4', 'EDUCATION_5',\n       'EDUCATION_6', 'LIMIT_BAL', 'MARRIAGE_0', 'MARRIAGE_1',\n       'MARRIAGE_2', 'MARRIAGE_3', 'PAY_0_-1', 'PAY_0_-2', 'PAY_0_0',\n       'PAY_0_1', 'PAY_0_2', 'PAY_0_3', 'PAY_0_4', 'PAY_0_5', 'PAY_0_6',\n       'PAY_0_7', 'PAY_0_8', 'PAY_2_-1', 'PAY_2_-2', 'PAY_2_0', 'PAY_2_1',\n       'PAY_2_2', 'PAY_2_3', 'PAY_2_4', 'PAY_2_5', 'PAY_2_6', 'PAY_2_7',\n       'PAY_2_8', 'PAY_3_-1', 'PAY_3_-2', 'PAY_3_0', 'PAY_3_1', 'PAY_3_2',\n       'PAY_3_3', 'PAY_3_4', 'PAY_3_5', 'PAY_3_6', 'PAY_3_7', 'PAY_3_8',\n       'PAY_4_-1', 'PAY_4_-2', 'PAY_4_0', 'PAY_4_1', 'PAY_4_2', 'PAY_4_3',\n       'PAY_4_4', 'PAY_4_5', 'PAY_4_6', 'PAY_4_7', 'PAY_4_8', 'PAY_5_-1',\n       'PAY_5_-2', 'PAY_5_0', 'PAY_5_2', 'PAY_5_3', 'PAY_5_4', 'PAY_5_5',\n       'PAY_5_6', 'PAY_5_7', 'PAY_5_8', 'PAY_6_-1', 'PAY_6_-2', 'PAY_6_0',\n       'PAY_6_2', 'PAY_6_3', 'PAY_6_4', 'PAY_6_5', 'PAY_6_6', 'PAY_6_7',\n       'PAY_6_8', 'PAY_AMT1', 'PAY_AMT2', 'PAY_AMT3', 'PAY_AMT4',\n       'PAY_AMT5', 'PAY_AMT6', 'SEX_1', 'SEX_2']","aed687fb":"clf.fit(train_fa_df[predictors_f], train_df[target_f].values)","e5e590f5":"preds = clf.predict(val_fa_df[predictors_f])","60948d19":"tmp = pd.DataFrame({'Feature': predictors_f, 'Feature importance': clf.feature_importances_})\ntmp = tmp.sort_values(by='Feature importance',ascending=False)\nplt.figure(figsize = (16,4))\nplt.title('Features importance',fontsize=14)\ns = sns.barplot(x='Feature',y='Feature importance',data=tmp)\ns.set_xticklabels(s.get_xticklabels(),rotation=90)\nplt.show()","0043d157":"cm = pd.crosstab(val_fa_df[target].values, preds, rownames=['Actual'], colnames=['Predicted'])\nfig, (ax1) = plt.subplots(ncols=1, figsize=(5,5))\nsns.heatmap(cm, \n            xticklabels=['Not Default', 'Default'],\n            yticklabels=['Not Default', 'Default'],\n            annot=True,ax=ax1,\n            linewidths=.2,linecolor=\"Darkblue\", cmap=\"Blues\")\nplt.title('Confusion Matrix', fontsize=14)\nplt.show()","8e1d22cd":"roc_auc_score(val_fa_df[target].values, preds)","a0659fa0":"clf = AdaBoostClassifier(random_state=RANDOM_STATE,\n                         algorithm='SAMME.R',\n                         learning_rate=0.8,\n                             n_estimators=NUM_ESTIMATORS)","b37233e8":"clf.fit(train_df[predictors], train_df[target].values)","2fe8d83f":"preds = clf.predict(val_df[predictors])","24aee76e":"tmp = pd.DataFrame({'Feature': predictors, 'Feature importance': clf.feature_importances_})\ntmp = tmp.sort_values(by='Feature importance',ascending=False)\nplt.figure(figsize = (7,4))\nplt.title('Features importance',fontsize=14)\ns = sns.barplot(x='Feature',y='Feature importance',data=tmp)\ns.set_xticklabels(s.get_xticklabels(),rotation=90)\nplt.show()   ","e6673cb2":"cm = pd.crosstab(val_df[target].values, preds, rownames=['Actual'], colnames=['Predicted'])\nfig, (ax1) = plt.subplots(ncols=1, figsize=(5,5))\nsns.heatmap(cm, \n            xticklabels=['Not Default', 'Default'],\n            yticklabels=['Not Default', 'Default'],\n            annot=True,ax=ax1,\n            linewidths=.2,linecolor=\"Darkblue\", cmap=\"Blues\")\nplt.title('Confusion Matrix', fontsize=14)\nplt.show()","6bba51c4":"roc_auc_score(val_df[target].values, preds)","990b34af":"clf = CatBoostClassifier(iterations=500,\n                             learning_rate=0.02,\n                             depth=12,\n                             eval_metric='AUC',\n                             random_seed = RANDOM_STATE,\n                             bagging_temperature = 0.2,\n                             od_type='Iter',\n                             metric_period = VERBOSE_EVAL,\n                             od_wait=100)","508bb768":"clf.fit(train_df[predictors], train_df[target].values,verbose=True)","04e969af":"preds = clf.predict(val_df[predictors])","16b80d10":"tmp = pd.DataFrame({'Feature': predictors, 'Feature importance': clf.feature_importances_})\ntmp = tmp.sort_values(by='Feature importance',ascending=False)\nplt.figure(figsize = (7,4))\nplt.title('Features importance',fontsize=14)\ns = sns.barplot(x='Feature',y='Feature importance',data=tmp)\ns.set_xticklabels(s.get_xticklabels(),rotation=90)\nplt.show()   ","d6bc1eda":"cm = pd.crosstab(val_df[target].values, preds, rownames=['Actual'], colnames=['Predicted'])\nfig, (ax1) = plt.subplots(ncols=1, figsize=(5,5))\nsns.heatmap(cm, \n            xticklabels=['Not Fraud', 'Fraud'],\n            yticklabels=['Not Fraud', 'Fraud'],\n            annot=True,ax=ax1,\n            linewidths=.2,linecolor=\"Darkblue\", cmap=\"Blues\")\nplt.title('Confusion Matrix', fontsize=14)\nplt.show()","d13022a4":"roc_auc_score(val_df[target].values, preds)","369a37bb":"# siapkan data training dan data valaidasinya\ndtrain = xgb.DMatrix(train_df[predictors], train_df[target].values)\ndvalid = xgb.DMatrix(val_df[predictors], val_df[target].values)\n\n# Apa yang harus dipantau (dalam hal ini, ** training** dan ** validasi **)\nwatchlist = [(dtrain, 'train'), (dvalid, 'valid')]\n\n# Atur parameter xgboost nya\nparams = {}\nparams['objective'] = 'binary:logistic'\nparams['eta'] = 0.039\nparams['silent'] = True\nparams['max_depth'] = 2\nparams['subsample'] = 0.8\nparams['colsample_bytree'] = 0.9\nparams['eval_metric'] = 'auc'\nparams['random_state'] = RANDOM_STATE","4bafb2ae":"model = xgb.train(params, \n                dtrain, \n                MAX_ROUNDS, \n                watchlist, \n                early_stopping_rounds=EARLY_STOP, \n                maximize=True, \n                verbose_eval=VERBOSE_EVAL)","e5e60261":"fig, (ax) = plt.subplots(ncols=1, figsize=(8,5))\nxgb.plot_importance(model, height=0.8, title=\"Features importance (XGBoost)\", ax=ax, color=\"green\") \nplt.show()","49cdf2e4":"params = {\n          'boosting_type': 'gbdt',\n          'objective': 'binary',\n          'metric':'auc',\n          'learning_rate': 0.05,\n          'num_leaves': 7,                          # ini harus lebih kecil dari 2^(max_depth)\n          'max_depth': 4,                           \n          'min_child_samples': 100,                 # jumlah minimum data yang diperlukan (min_data_in_leaf)\n          'max_bin': 100,                           # jumlah tempat penyimpanan untuk nilai fitur\n          'subsample': 0.9,                         # rasio untuk subsampel yang di training\n          'subsample_freq': 1,                      # frekuensi subsampel, <=0 tidak memungkinkan\n          'colsample_bytree': 0.7,                  # rasio subsampel saat membuat setiap pohon keputusannya.\n          'min_child_weight': 0,                    # Jumlah minimum bobot yang dibutuhkan setiap cabang (leaf)\n          'min_split_gain': 0,                      # lambda_l1, lambda_l2 dan min_gain_to_split untuk regularisasi\n          'nthread': 8,\n          'verbose': 0,\n          'scale_pos_weight':50,                    # because training data is sightly unbalanced \n         }","c2a8a969":"categorical_features = ['SEX', 'EDUCATION', 'MARRIAGE','PAY_0', 'PAY_2', 'PAY_3', 'PAY_4', 'PAY_5', 'PAY_6']","6e2fadc7":"dtrain = lgb.Dataset(train_df[predictors].values, \n                     label=train_df[target].values,\n                     feature_name=predictors,\n                     categorical_feature=categorical_features)\n\ndvalid = lgb.Dataset(val_df[predictors].values,\n                     label=val_df[target].values,\n                     feature_name=predictors,\n                     categorical_feature=categorical_features)","dc6c5d81":"evals_results = {}\n\nmodel = lgb.train(params, \n                  dtrain, \n                  valid_sets=[dtrain, dvalid], \n                  valid_names=['train','valid'], \n                  evals_result=evals_results, \n                  num_boost_round=MAX_ROUNDS,\n                  early_stopping_rounds=EARLY_STOP,\n                  verbose_eval=VERBOSE_EVAL, \n                  feval=None)\n\ndel dvalid\ngc.collect()","33678402":"fig, (ax) = plt.subplots(ncols=1, figsize=(8,5))\nlgb.plot_importance(model, height=0.8, title=\"Features importance (LightGBM)\", ax=ax,color=\"red\") \nplt.show()","0a1d014b":"kf = KFold(n_splits = NUMBER_KFOLDS, random_state = RANDOM_STATE, shuffle = True)\nfor train_index, test_index in kf.split(data_df):\n    train_X, valid_X = data_df.iloc[train_index], data_df.iloc[test_index]\n\n    dtrain = lgb.Dataset(train_X[predictors].values, label=train_X[target].values,\n                     feature_name=predictors)\n\n    dvalid = lgb.Dataset(valid_X[predictors].values, label=valid_X[target].values,\n                     feature_name=predictors)\n\n    evals_results = {}\n    model =  lgb.train(params, \n                  dtrain, \n                  valid_sets=[dtrain, dvalid], \n                  valid_names=['train','valid'], \n                  evals_result=evals_results, \n                  num_boost_round=MAX_ROUNDS,\n                  early_stopping_rounds=EARLY_STOP,\n                  verbose_eval=VERBOSE_EVAL, \n                  feval=None)","b349ccd1":"## <a id=\"42\">Data yang Hilang<\/a>  \n\nMari kita periksa apakah ada data yang hilang. (Nb: Bagian ini sangat penting dilakukan untuk memastikan data anda sudah layak untuk dilakukan olah data yang lebih detail dan mempuni untuk dimasukkan dalam model)","3f354f1f":"### <a id=\"41\">Review Data<\/a>\n\nDimulai dengan melihat fitur data (3 baris pertama). (Nb: Pada bagian ini anda bisa menjelaskan bebarapa hal yang anda anggap penting untuk diceritakan)","bccab837":"Melatih model","2bfa033a":"Skor validasi terbaik diperoleh untuk putaran 254, dimana AUC ~ = 0,78. Berikut juga diperlihatkan plot variabel pengaruh.\n\n(Nb: Setiap kali anda melekukan simulasi, kemungkinan besar akan memberikan hasil yang berbeda-beda). Tetapi hasil yang diperoleh tidak akan berbeda jauh.","9d14718a":"Dapat juga dilakukan dengan menghitung persentasi area di bawah kurva sebagai berikut:","d7155bd9":"### Siapkan Model\n\nMenginisialisasi objek DMatrix untuk pelatihan dan validasi, mulai dari dataset. Dapat juga dengan mengatur beberapa parameter yang digunakan untuk penyetelan model.","f6baf945":"# <a id=\"1\">Abstrak<\/a>  \n\nPada kesempatan ini, saya akan memberikan suatu pedoman buat Anda (Mahasiswa-i) yang sedang belajar meneliti. Khususnya matakuliah saya yaitu Metode Penelitian. Sebenarnya ada banyak sekali metode yang bisa kalian terapkan dalam hal penelitian khususnya Statistik\/Matematika (Yang penting data ada dan valid). Melalui latihan yang kalian lakukan dalam metode penelitan ini diharapkan Anda mampu untuk menganalisis data, berpikir kritis, dan mampu menyelesaikan masalah yang ada di masyarakat untuk meningkatkan pengetahuan tentang aplikasi statistik khususnya dalam Bisnis maupun Industri. \n\nOutput yang diharapkan dari \"Contoh Penelitian Sederhanan dengan Python ini adalah untuk mengembangkan ide-ide kreatif dalam mengolah data, mampu memberikan kesimpulan yang berarti (yang terkadung) didalam sekumpulan data. Diharapkan juga, mahasiswa-i dapat menerapkan konsep yang sama dengan data yang lainnya, boleh juga menganalisa data yang saya gunakan disini, tentunya dengan metode yang berbeda dan hasi prediksi yang lebih baik (Tergantung minat Anda). \n \n## <a id=\"11\"> Latar Belakang<\/a> \n\n<center><b> Transaksi Kredit di Bank (April September 2005)<\/b> <\/center>\n<br>\n\nDi era digital ini, dunia mengalami perkembangan pesat di bidang teknologi. Tidak hanya itu, di bidang ekonomi juga mengalami perkembangan yang mengikuti perkembangan teknologi juga. Itu disebut Teknologi Keuangan (Fintech). Fintech adalah istilah untuk inovasi dan penciptaan kemajuan layanan keuangan di era digital ini. FSB (Financial Stability Board) mengelompokkan fintech berdasarkan jenis inovasi menjadi empat kelompok: Pembayaran, Kliring, dan Penyelesaian; E-Aggretator; Peer to Peer Lending (P2P); Risiko dan Manajemen Investasi.\n\nGagasan utama fintech adalah membuat layanan keuangan lebih baik bagi konsumen, bukan untuk mengeluarkan bank dari bisnis. Perbankan juga mengambil bagian dalam teknologi pemasaran berbasis pada layanan keuangan seperti berikut ini: Perbankan, Kredit dan Pinjaman, Penasihat Keuangan, dan Kenyamanan Konsumen. Dengan mengotomatiskan sebagian besar proses perbankan dan menambahkan kecepatan, transparansi, dan keamanan pada proses-proses tersebut, aplikasi Fintech juga membantu secara tidak langsung pengalaman yang memudahkan untuk pelanggan.\n\nDari penjelasan di atas, diketahui bahwa salah satu bank di Taiwan (di Indonesia juga sudah banyak) telah menerapkan sistem fintech, salah satunya adalah dalam hal proses pembayaran kredit (kredit online). Beberapa orang telah menerapkan kredit di bank dengan melakukan pembayaran secara digital atau online. Bank telah mengumpulkan data dari pelanggan mereka yang telah melakukan kredit online. Data-data ini dikumpulkan untuk mendapatkan informasi yang membantu bank melihat status pembayaran kredit.\n\nPenelitian ini akan mengunakan beberapa metode klasifikas untuk melakukan prediksi, diantaranya; Klasifikasi Random Forrest, Klasifikasi RandomForrest dengan OneHotEncoder, AdaBoostClassifier, CatBoostClassifier, XGBoost, dan LightGBM. Berdasarkan latar belakang tersebut diatas, maka judul penelitian adalah \"Analisis Statistik pada Pembayaran Digital suatu Fintech di Taiwan dengan Menggunakan Metode Klasifikasi\".\n\n\n## <a id=\"12\">Rumusan Masalah <\/a> \n\nAdapun yang menjadi rumusan penelitian ini adalah \"Bagaimana prosedur yang dilakukan untuk Analisis Statistik dalam Pembayaran Digital dengan Menggunakan Metode Klasifikasi\". Di era golabal seperti sekarang ini pembayaran digital memiliki kepentingan besar bagi pebisnis maupun bagi konsumen. Pembayaran digital telah muncul sebagai alat penting untuk memajukan inklusi keuangan karena hal itu dapat mengurangi biaya penyediaan layanan keuangan dan meningkatkan keamanan dan kenyamanan saat melakukan transaksi pembayaran. Dampak yang mungkin terjadi akibat transaksi ini adalah penumpukan data secara terus menerus (big data), karena hal ini akan memungkinkan konvergensi pembayaran yang lebih besar. Dengan demikian, dibutuhkan kemampuan untuk mengolah data yang mempuni dan proses analitik berkembang untuk membuat keputusan yang efisien. \n\n## <a id=\"13\"> Dataset<\/a> \n\nDataset yang digunakan dalam penelitian ini berisi informasi tentang pembayaran standar, faktor demografis, data kredit, riwayat pembayaran, dan laporan tagihan klien kartu kredit di Taiwan dari **April 2005** hingga **September 2005**. Ada 25 variabel:\n\n* **ID**: ID of each client\n* **LIMIT_BAL**: Amount of given credit in NT dollars (includes individual and family\/supplementary credit\n* **SEX**: Gender (1=male, 2=female)\n* **EDUCATION**: (1=graduate school, 2=university, 3=high school, 4=others)\n* **MARRIAGE**: Marital status (1=married, 2=single, 3=others)\n* **AGE**: Age in years\n* **PAY_0**: Repayment status in September, 2005 (-2=early payment, -1= paid full on time, 0 = paid not fully, 1=payment delay for one month, 2=payment delay for two months, ... 8=payment delay for eight months, 9=payment delay for nine months and above)\n* **PAY_2**: Repayment status in August, 2005 (scale same as above)\n* **PAY_3**: Repayment status in July, 2005 (scale same as above)\n* **PAY_4**: Repayment status in June, 2005 (scale same as above)\n* **PAY_5**: Repayment status in May, 2005 (scale same as above)\n* **PAY_6**: Repayment status in April, 2005 (scale same as above)\n* **BILL_AMT1**: Amount of bill statement in September, 2005 (NT dollar)\n* **BILL_AMT2**: Amount of bill statement in August, 2005 (NT dollar)\n* **BILL_AMT3**: Amount of bill statement in July, 2005 (NT dollar)\n* **BILL_AMT4**: Amount of bill statement in June, 2005 (NT dollar)\n* **BILL_AMT5**: Amount of bill statement in May, 2005 (NT dollar)\n* **BILL_AMT6**: Amount of bill statement in April, 2005 (NT dollar)\n* **PAY_AMT1**: Amount of previous payment in September, 2005 (NT dollar)\n* **PAY_AMT2**: Amount of previous payment in August, 2005 (NT dollar)\n* **PAY_AMT3**: Amount of previous payment in July, 2005 (NT dollar)\n* **PAY_AMT4**: Amount of previous payment in June, 2005 (NT dollar)\n* **PAY_AMT5**: Amount of previous payment in May, 2005 (NT dollar)\n* **PAY_AMT6**: Amount of previous payment in April, 2005 (NT dollar)\n* **default.payment.next.month**: Default payment (1=yes, 0=no)\n\n\u201cdefault.payment.next.month\u201d adalah status kartu kredit yang tidak hanya memengaruhi posisi pelanggan di bank tetapi juga status kredit pelanggan secara umum. Standarnya adalah 1 jika pelanggan melewatkan pembayaran kartu kredit untuk setidaknya enam bulan sekali dan defaultnya adalah 0 jika pelanggan terus melakukan pembayaran kartu kredit setiap bulan. Tagihan akan muncul di awal bulan sementara status kartu kredit muncul di akhir bulan.\n\n## <a id=\"14\"> Tujuan Penelitian<\/a>\n\nPada penelitian ini saya tertarik untuk mempelajari karakteristik pelanggan yang membuat kredit di bank pada bulan berikutnya. Data yang diberikan sekitar 24000 pelanggan dengan karakteristik berbeda, di mana 15945 di antaranya tidak pernah melewatkan pembayaran dan 8055 di antaranya setidaknya melewati pembayaran sekali. Sebagai Peneliti, saya untuk memprediksi 6000 pelanggan baru dengan jenis karakteristik tertentu yang diberikan pada Tabel [1] apakah mereka melewatkan pembayaran setidaknya satu kali selama periode enam bulan. Secara garis besar penelitian sederhana ini mencakup beberapa pembahasan sebagai berikut:\n* Memilih variabel yang menjadi acuan untuk melakukan analisis dan memberikan justifikasi.\n* Menentukan metodologi yang digunakan untuk analisis dan menjelaskan alasan mengapa memilih metode tersebut (disebutkan dan jelaskan teorinya secara singkat).\n* Memperlihatkan hasil eksplorasi data dan menjelaskan hasil analisis.\n* Diakhir pembahasan diberikan saran berdasarkan hasil penelitian.","cafa24a9":"Sejumlah 6.636 dari 30.000 (atau 22%) klien akan mengalami default bulan depan. Data tidak memiliki ketidakseimbangan besar sehubungan dengan nilai target (default.payment.next.month). Jadi, sejauh ini tidak ada masalah yang berarti dengan dataset yang akan digunakan.","5dad203e":"Melatih **Randon Forest Classifier** menggunakan **train_fa_df** data dan fungsi **fit**.","6a51bbd8":"### Memprediksi nilai target\n\nSekarang dilakukan prediksi nilai **target** untuk **val_df** data, menggunakan fungsi prediksi.","9bb40836":"### Siapkan modelnya\n\nMenententukan fitur kategorikal.\n","59822b70":"Memvisualisasikan fitur penting.\n\n### Features importance","cd01a732":"### Matriks keputusan\n\nTunjukkan matriks keputusan untuk hasil yang diperoleh.","d191aaec":"## <a id=\"66\">CatBoostClassifier<\/a>\n\n\nCatBoostClassifier adalah peningkatan gradien untuk algoritma pohon keputusan (Decision Trees) dengan dukungan untuk menangani data kategorikal <a href='#8'>[6]<\/a>.\n\n### Siapkan modelnya\n\nMenentukan parameter untuk model dan menginisialisasi model.","0e97bb87":"(Nb: Dari hasil diatas anda bisa menjelaskan bebarapa hal yang anda anggap penting untuk diceritakan), \n\nContoh:\n\nAda 30.000 klien kartu kredit yang berbeda. Nilai rata-rata untuk jumlah batas kartu kredit adalah 167.484. Terlihat bahwa standar deviasi sangat besar, nilai maksnya 1M. Tingkat pendidikan sebagian besar adalah sekolah pascasarjana dan universitas. Sebagian besar klien sudah menikah sedangkan yang berstatus lajang lebih jarang. Usia rata-rata adalah 35,5 tahun, dengan standar deviasi 9,2. Karena nilai 0 untuk pembayaran standar berarti 'not default' dan nilai 1 berarti 'default', rata-rata 0,221 berarti bahwa ada 22,1% kontrak kartu kredit yang akan default bulan depan (bagian ini selanjutnya akan diverifikasi dengan analisis lebih lanjut).\n","cf9cbfd0":"Dapat juga dilakukan dengan menghitung persentasi area di bawah kurva sebagai berikut:","0e6b65ab":"Ternyata tidak ada korelasi antara jumlah pembayaran sebelumnya untuk April-September 2005. Maka diperiksa juga korelasi antara status Pelunasan pada bulan April - September 2005.","a2aa9864":"## <a id=\"63\">Random Forest Classifier<\/a>\n\n\n","b6cce0e8":"Disimpulkan bahwa, nilai Q3 dan Q4 meningkat untuk pria dan wanita dengan usia sampai 35 tahun dan kemudian berosilasi dan mencapai maksimum Q4 untuk pria pada usia 64. Nilai rata-rata umumnya lebih kecil untuk pria daripada wanita, dengan beberapa pengecualian, misalnya pada usia 39, 48, hingga sekitar 60 tahun, di mana nilai rata-rata untuk pria umumnya lebih besar daripada wanita.\n\n\n(Nb: Tentu masih banyak hal yang bisa simpulkan dari boxplot diatas, tergantung prespektif dan logikan analisa kalian masing-masing)\n\n","14a2a8e1":"## <a id=\"65\">AdaBoostClassifier<\/a>\n\n\nAdaBoostClassifier singkatan dari Adaptive Boosting Classifier <a href='#8'>[5]<\/a>.\n\n### Siapkan modelnya\n\nMembentuk parameter untuk pemodelan dan menginisialisasi model.","048b6673":"Berikut memprediksi nilai **target** untuk **val_df** data, menggunakan fungsi **predict**.","1cafdf4b":"Skor ROC-AUC yang diperoleh dengan AdaBoostClassifier adalah 0,65.","d85980d3":"Sebagian besar default adalah untuk batas kredit 0-100.000 (dan kepadatan untuk interval ini lebih besar untuk default daripada non-default). Jumlah default yang lebih besar adalah untuk jumlah **50.000**, **20.000** dan **30.000**.","aadc7d43":"Diperiksa lagi datanya.","1f533f28":"Fitur yang paling penting adalah **AGE**, **LIMIT_BAL**, **BILL_AMT1**, **PAY_0_2**, **BILL_AMT2**, **BILL_AMT3**.","6289e4c1":"## <a id=\"56\">Batas Usia, Jenis Kelamin, dan Jumlah Kredit<\/a> \n\n\nBerikut diperlihatkan boxplot dengan distribusi batas jumlah kredit yang dikelompokkan berdasarkan usia dan jenis kelamin.\n\n","5b75a026":"## <a id=\"54\">Check Korelasi<\/a>\n\n\nUntuk data yang bernilai numerik, biasanya dilakakan analisis korelasi. Oleh sebab itu berikut ini diperiksa korelasi jumlah laporan tagihan pada bulan April - September 2005.","0d341925":"Tidak ada data yang hilang di seluruh dataset.","dd952c03":"# <a id=\"4\">Pembersihan Data<\/a>","38d1d574":"\nMari kita jalankan model menggunakan set pelatihan untuk pelatihan. Kemudian, kami akan menggunakan set validasi untuk validasi.\n\n### Metrik (Metric)\n\nPada penelitian ini digunakan kriteria validasi (validation criterion) **GINI**, yang rumusnya **GINI = 2 * (AUC) - 1**, di mana **AUC** adalah **Karakteristik Operasi Penerima - Area Di Bawah Kurva (ROC-AUC )**. Jumlah estimator diatur ke **100** dan jumlah iterasi pengulangan paralel disesuaikan dengan <a href='#8'> [4]<\/a>.\n\nBerikutnya dilakukan inisialisasi Random Forest Classifier dibawah ini.","b7ef5206":"Dari gambar terlihat bahwa adanya korelasi jumlah tagihan disetiap bulannya. Korelasi terendah ada pada September dan April. Oleh karena itu, berikutnya juga dilakukan pemeriksaan korelasi Jumlah pembayaran sebelumnya pada bulan April - September 2005.","ba0a133e":"Sebaiknya juga membuat salinan train_df dan val_df untuk penggunaan nanti.","be6fd2bb":"Dapat juga dilakukan dengan menghitung persentasi area di bawah kurva sebagai berikut:","a4b2ec7e":"Skor ROC-AUC yang diperoleh dengan CatBoostClassifier adalah 0,66.","a0227d87":"### Matriks keputusan\n\nTunjukkan matriks keputusan untuk hasil yang diperoleh.","c83afe9e":"Menententukan daftar target dan prediktor.","9a1e3d60":"# <a id=\"2\">Persiapan Data<\/a>\n## <a id=\"21\">Memuat Packages<\/a>\n\nSebelum memulai mengolah data dengan menggunakan Python biasanya diperlukan berbagai paket atau tool yang dapat memudahkan proses (Tentu paket yang anda perlukan susuai dengan data, model, dan metode yang digunakan dalam peneltian tersebut). Berikut saya perlihatkan beberapa paket yang saya gunakan dalam penelitian ini; ","cfc4eb75":"## <a id=\"22\">Menetapkan Parameter<\/a>\n\nPada tahap ini saya menetapkan beberapa parameter untuk analisis dan model.","52ac01ae":"### Bentuk Model\n\nJalankan modelnya, menggunakan fungsi training.","c9475f11":"## <a id=\"52\">Klasifikasi Batasan Kredit<\/a>\n\nSekerang, akan diperlihatkan visualisasikan plot kepadatan untuk jumlah batas kredit (LIMIT_BAL), dikelompokkan berdasarkan pembayaran standar bulan depan. (Nb: Hal ini dilakukan untuk melihat sebaran data, kenormalan data tersebut)","446416f1":"## <a id=\"61\">Tentukan Variabel Prediktor dan Respon<\/a> \n\nPada tahap ini adalah penentuan variabel prediktor dan respon (target). Meninjau variabel kategorikal jika ada, kebetulan pada kasus ini tidak ada fitur kategorikal.","0d6659b6":"Untuk melihat lebih detail mengenai data, dilakukan hal sebagai berikut: ","03cd795e":"## <a id=\"51\">Batasan Kredit <\/a>\n\nPada tahap ini, dilakukan analisa sederhana mengenai batasan kredit yang biasa diberikan kepada klien (Konsumen). ","065211a6":"Dari Boxplot diatas dapat disimpulkan bahwa tingkat pendidikan dan status pernikahan sedikit banyaknya mempengaruhi batasan kredit setiap klien atau konsumen.","3a128b8c":"Kelompok terbesar jumlah batas kredit tampaknya berkisar 50 ribuan. Untuk memverifikasi dugaan tersebut, dilakukan;","29933b6a":"## <a id=\"62\">Split Data Training dan Data Validasi<\/a>\n\nMemisahkan data training dan data validasi","c31fef39":"Seperti halnya status pernikahan 3 (lainnya), saat nilai rata-rata lebih dari 40 dan nilai Q4 lebih dari 60 berarti sebagian besar konsumen sudah menikah atau bercerai. Sementara status Menikah 0 tidak dapat ditentukan atau bercerai, karena nilai Q1 di atas nilai untuk menikah dengan kedua jenis kelamin.\n\nPria yang menikah memiliki usia rata-rata di atas wanita yang sudah menikah. Laki-laki yang belum menikah memiliki nilai rata-rata untuk usia di atas wanita yang belum menikah juga tetapi lebih dekat. Nilai Q3 dan Q4 untuk pria yang sudah menikah berada di atas nilai yang sesuai untuk wanita yang sudah menikah.\n\nMelalui Boxplot tersebut terlihat dengan distribusi usia yang dikelompokkan berdasarkan pendidikan dan pernikahan.\n\nArti status pendidikan adalah:\n\n* 1: sekolah pascasarjana\n* 2: universitas\n* 3: sekolah menengah\n* 4: lainnya\n* 5: tidak diketahui\n* 6: tidak tahu\n","b3a1cd16":"Sekarang dilakukan prediksi nilai **target** untuk **val_df** data, menggunakan fungsi **predict**.","10d2fe54":"Karena data training dan validasi tidak memiliki jumlah kolom yang sama, maka kita perlu untuk menyelaraskannya.","6d9a0459":"## <a id=\"68\">LightGBM<\/a>\n\n\nDilanjutkan dengan algoritma peningkatan gradien lain, LightGBM <a href='#8'>[7]<\/a> <a href='#8'>[8]<\/a>.\n\n\n### Tentukan Parameter Model\n\nMenentukan parameter pada model.","e1ee479e":"Dimulai dengan penerapa metode Random Forrest Classifier <a href='#8'>[3]<\/a>.","4749254d":"## <a id=\"67\">XGBoost<\/a>\n\nXGBoost adalah algoritma peningkatan gradien <a href='#8'>[7]<\/a>.","6bcf5865":"## <a id=\"53\">Batas Kredit vs Jenis Kelamin<\/a>\n\nPada tahap ini dilakukan analisis distribusi batas kredit vs jenis kelamin. Untuk jenis kelamin, 1 singkatan untuk pria dan 2 untuk wanita.","73f40a1b":"### Varibel Pengaruh\n\nBerikut diperlihatkan Variabel yang paling mempengaruhi;","c724b3e1":"### Variabel Pengaruh\n\nMenentukan varibel yang paling mempengaruhi sebagai berikut:","b5845ea2":"## <a id=\"43\">Proporsi Sebaran Data<\/a>","d1e3ca3c":"Dengan variabel tambahan (dummified), peningkatan skor AUC cukup kecil.","3845f437":"## <a id=\"23\">Input Data<\/a> \n\nPada tahap ini, saya melakukan beberapa manipulasi data seperti; Iput data, Memisahkan data pelatihan dan pengujian, dan mengubah data kategori menjadi numerik. (Nb: Tentu semua bergantung kepada data atau model yang anda gunakan, karena tidak semuanya harus melakukan hal yang sama)","0264f059":"Ada 81 nilai berbeda untuk jumlah batas kredit.","48be14ce":"Skor **ROC-AUC** yang diperoleh dengan **Random Forrest Classifier** adalah **0,66**.\n\n\nBerikutnya digunakan untuk Random Forrest Classifier **variabel dummi** untuk **fitur-fitur kategori**. Dapat dimulai dengan mendefinisikan fitur-fitur kategorikal.\n\n\n## <a id=\"64\">Random Forrest with OneHotEncoder<\/a> ","9823a0d2":"# <a id=\"7\">Kesimpulan dan Saran<\/a>","0fba3cf7":"### Matriks keputusan\n\nTunjukkan matriks keputusan untuk hasil yang diperoleh.","eb3993e2":"Skor validasi terbaik (ROC-AUC) adalah **0,78**, pada iterasi **391**. \n\n\n(Nb: Setiap kali anda melekukan simulasi, kemungkinan besar akan memberikan hasil yang berbeda-beda). Tetapi hasil yang diperoleh tidak akan berbeda jauh.","bccc2b18":"# <a id='0'>Daftar Isi<\/a>\n\n- <a href='#1'>Abstrak<\/a>  \n    - <a href='#11'>Latar Belakang<\/a>\n    - <a href='#12'>Rumusan Masalah<\/a>\n    - <a href='#13'>Dataset<\/a>\n    - <a href='#14'>Tujuan Penelitian<\/a>\n- <a href='#2'>Persiapan Data <\/a>  \n    - <a href='#21'>Memuat Packages<\/a>  \n    - <a href='#22'>Menetapkan Parameter<\/a> \n    - <a href='#22'>Input Data<\/a> \n- <a href='#4'>Pembersihan Data<\/a>  \n    - <a href='#41'>Review Data<\/a>  \n    - <a href='#42'>Data yang Hilang<\/a>\n    - <a href='#43'>Proporsi Sebaran Data<\/a>\n- <a href='#5'>Eksplorasi Data<\/a>\n    - <a href='#51'>Batasan Kredit<\/a>  \n    - <a href='#52'>Klasifikasi Batasan Kredit<\/a>\n    - <a href='#53'>Batas Kredit vs Jenis Kelamin<\/a>\n    - <a href='#54'>Check Korelasi<\/a>\n    - <a href='#55'>Jenis Kelamin, Pendidikan, Usia dan Pernikahan<\/a>\n    - <a href='#56'>Usia, Jenis Kelamin, dan Jumlah Kredit<\/a>\n    - <a href='#57'>Status Perkawinan, Pendidikan, dan Batasan Kredit<\/a>\n- <a href='#6'>Pemodelan Prediksi<\/a>  \n    - <a href='#61'>Tentukan Variabel Prediktor dan Respon<\/a> \n    - <a href='#62'>Split Data Training dan Data Validasi<\/a>\n    - <a href='#63'>Klasifikasi Random Forrest<\/a> \n    - <a href='#64'>Klasifikasi RandomForrest dengan OneHotEncoder<\/a> \n    - <a href='#65'>AdaBoostClassifier<\/a> \n    - <a href='#66'>CatBoostClassifier<\/a> \n    - <a href='#67'>XGBoost<\/a> \n    - <a href='#68'>LightGBM<\/a> \n- <a href='#7'>Kesimpulan dan Saran<\/a>\n- <a href='#8'>Daftar Pustaka<\/a>\n","e376c38c":"Sebaiknya lakukan visualisasi untuk menentukan variabel yang sangat mempengaruhi.\n\n### Features importance","572f7a9d":"Validasi rata-rata **AUC** untuk 5 kali pengulangan yang diperoleh adalah **0,80**, dengan nilai antara **0,79** dan **0,80**.","c03329a9":"Mari kita siapkan model, membuat struktur **dataset** dari data training dan validasi.\n\nMenginisialisasi dataset dengan daftar fitur kategorikal (lgb memiliki perlakuan khusus untuk nilai-nilai kategorikal).","cb0ba74b":"# <a id=\"6\">Pemodelan Prediksi<\/a>  \n\n","4e81aeb7":"### Prediksikan nilai target\n\nPrediksi nilai **target** untuk **val_df** data, menggunakan fungsi prediksi.","62236d0a":"Setelah menyelidiki hasil, memeriksa data yang tidak seimbang, memvisualisasikan fitur dan memahami hubungan antara berbagai variabel.\n\nKemudian menyelidiki lima model prediksi sebagai berikut:\n* Dimulai dengan **Random Forrest Classifier**, untuk itu kami memperoleh kode AUC **0.66**.\n* Untuk **Random Forrest Classifier** saya juga bereksperimen dengan **OneHotEncoder**, mengganti fitur-fitur kategorikal dengan nilai-nilai dummifikasi (memperkenalkan satu variabel dummy untuk setiap kategori). Skor AUC  0.66, jadi tidak membaik secara signifikan dalam kasus ini.\n* Selanjutnya digunakan model **AdaBoostClassifier**, dengan skor AUC yang lebih rendah (**0,65**).\n* Berikutnya digunakan model **CatBoostClassifier**, dengan skor AUC yang lebih rendah (**0,66**).\n* Kemudian dilakukan dengan eksperimen dengan model **XGBoost**, di mana skor AUC yang diperoleh adalah **0,77**.\n* Pada bagaian akhir dipresentasikan data ke model **LightGBM** diperoleh adalah **0,80**. \n\nPada penelitian ini digunakan split validasi training dan validasi silang untuk mengevaluasi efektivitas model untuk memprediksi nilai target, yaitu mendeteksi apakah klien kartu kredit akan mengalami default bulan depan. Dengan kombinasi Metode Random Forrest Classfier dan LightGBM nilai yang diperoleh dari AUC untuk set validasi sekitar **0,80**. Sehingga disimpulkan Metode Random Forrest Classfier dan LightGBM adalah model yang terbaik untuk melakukan prediksi apakah klien kartu kredit akan mengalami default bulan depan.\n\nSaran: Jika Anda kesulitan dalam menemukan penelitan yang ingin anda lakukan, beleh menggunakan data yang ada pada penelitian sederhana ini. Tetapi anda harus mengunakan metode yang lainnya dan hasil prediksinya harus melebihi 80%.\n\n\nSelamat belajar. \n\n\nCheers!\n\nBakti Siregar","c03f87ef":"Mari kita periksa ketidakseimbangan data, hal ini tentu akan sangat mempengaruhi variabel respon, dalam hal ini saya menggunkan **default.payment.next.month**.","a576518d":"Dapat juga dilakukan dengan menghitung persentasi area di bawah kurva sebagai berikut:","9c46e6da":"# <a id=\"8\">Daftar Pustaka<\/a>\n\n[1] Default Credit Card Clients Dataset,  https:\/\/www.kaggle.com\/uciml\/default-of-credit-card-clients-dataset\/  \n[2] Principal Component Analysis, Wikipedia Page, https:\/\/en.wikipedia.org\/wiki\/Principal_component_analysis  \n[3] Random Forrest Classifier, http:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.ensemble.RandomForestClassifier.html  \n[4] ROC-AUC characteristic, https:\/\/en.wikipedia.org\/wiki\/Receiver_operating_characteristic#Area_under_the_curve   \n[5] Ada Boost Classifier, http:\/\/scikit-learn.org\/stable\/modules\/generated\/sklearn.ensemble.AdaBoostClassifier.html   \n[6] Cat Boost Classifier, https:\/\/tech.yandex.com\/catboost\/doc\/dg\/concepts\/python-reference_catboostclassifier-docpage\/  \n[7] XG Boost Python API Reference, http:\/\/xgboost.readthedocs.io\/en\/latest\/python\/python_api.html  \n[8] Light GBM Python implementation, https:\/\/github.com\/Microsoft\/LightGBM\/tree\/master\/python-package  \n[9] Light GBM algorithm, https:\/\/www.microsoft.com\/en-us\/research\/wp-content\/uploads\/2017\/11\/lightgbm.pdf   \n\n","d09b9abe":"## <a id=\"55\">Jenis Kelamin, Pendidikan, Usia dan Pernikahan<\/a> \n\n\nDibawah ini diperlihatkan distribusi jenis kelamin, pendidikan, usia dan pernikahan. Dimulai dengan menunjukkan Boxplot dengan distribusi usia yang dikelompokkan berdasarkan status pernikahan dan jenis kelamin.\n\nMakna status pernikahan adalah:\n\n* 0 : unknown (bisa diasumsikan lainnya juga)\n* 1 : menikah\n* 2 : tunggal\n* 3 : lainnya\n\nArti seks adalah:\n\n* 1 : pria\n* 2 : wanita\n","d97b3899":"Sejalan dengan korelasi jumlah tagihan, korelasi pembayaran juga menurun setiap bulannya. (Korelasi terendah ada pada September dan April).\n","6c90af9c":"# <a id=\"5\">Eksplorasi Data<\/a>","3b217039":"### Fit model\n\nMari kita muat modelnya.","00868ec7":"Berikutnya dilakukan pelatihan model Randon Forest Classifier menggunakan data train_df dan fungsi fitnya.","88b7737f":"Ternyata benar bahwa, jumlah kartu kredit terbesar adalah dengan batas 50.000 (3365), diikuti oleh 20.000 (1976) dan 30.000 (1610), dst.","43c251ce":"Fitur yang paling penting adalah **PAY_0**, **AGE**, **BILL_AMT1**, **LIMIT_BAL**, **BILL_AMT2**, **BILL_AMT3**.\n\n\n### Confusion matrix\n\nBerikut ditunjukkan matriks keputusan untuk hasil yang diperoleh.","8848100d":"### Pelatihan dan validasi menggunakan validasi silang (cross-validation)\n\nBerikut digunakan validasi, akan menggunakan cross-validation (KFolds) dengan 5 kali pengulangan. Data dibagi dalam 5 bagian dan, secara rotasi, sehingga pengujian menggunakan pengulagan 4 (n-1) dan memvalidasi hingga menggunakan pengulagan ke-5 (n).","5d5fe507":"Batas jumlah kredit cukup seimbang antara jenis kelamin. Laki-laki memiliki Q2 sedikit lebih kecil dan lebih besar Q3 dan Q4 dan rata-rata lebih rendah. Ditemukan bahwa wanita memiliki nilai max outlier yang lebih besar hingga kisaran (1M dolar NT).","4d3d3922":"## <a id=\"57\">Status Perkawinan, Pendidikan, dan Batasan Kredit<\/a> \n\n\nBerikut ini diperlihatkan boxplot dengan distribusi batas jumlah kredit yang dikelompokkan berdasarkan status pernikahan dan tingkat pendidikan.","2f5e300d":"### Plot Variabel Pengaruh"}}