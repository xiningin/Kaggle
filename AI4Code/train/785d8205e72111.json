{"cell_type":{"004777ea":"code","4db81a7f":"code","fa69087c":"code","fa22a16c":"code","485cfcf1":"code","5dff8bb4":"code","8055ac84":"code","31cb2234":"code","7acf9b75":"code","1e8f0a0b":"code","d42c6e9f":"code","aff7ec6a":"code","9220608f":"code","ad31c4bf":"code","ae285341":"code","a05b43ca":"code","d9931b69":"code","30a3991a":"code","2753e2b1":"markdown","e0d05d15":"markdown","1004e4ad":"markdown","6bd9cbbf":"markdown","8f0b20da":"markdown","4646ebd8":"markdown","c25762b4":"markdown","884f36d1":"markdown","ebdf99b4":"markdown","a79a81db":"markdown","bc517fa6":"markdown","3ab6eb81":"markdown","01ade982":"markdown","c81224e0":"markdown","5d6b23b0":"markdown","52b9b4f2":"markdown","a1a9039d":"markdown","66023232":"markdown","763a4da8":"markdown","bf20902d":"markdown","788f0d90":"markdown","d74b24ae":"markdown","cd309ff8":"markdown","0f6121a0":"markdown"},"source":{"004777ea":"import numpy as np\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport math","4db81a7f":"for i in range(len(os.listdir('..\/input'))-1):\n    year = str(2001+i)\n    name = 'table' + year + '.csv'\n    if i == 0:\n        data = pd.read_csv('..\/input\/'+name, encoding='shift-jis')\n    else:\n        data = pd.concat([data,pd.read_csv('..\/input\/'+name, encoding='shift-jis')],axis=0)\ndata = data.rename(columns = {'\u5e74':'year','\u6708':'month','\u65e5':'day','\u6642\uff08UTC\uff09':'hour','\u53f0\u98a8\u756a\u53f7':'typhoon number','\u53f0\u98a8\u540d':'typhoon name','\u968e\u7d1a':'grade','\u7def\u5ea6':'longitude','\u7d4c\u5ea6':'latitude','\u4e2d\u5fc3\u6c17\u5727':'center pressure','\u6700\u5927\u98a8\u901f':'max wind speed','50KT\u9577\u5f84\u65b9\u5411':'50KT major axis direction','50KT\u9577\u5f84':'50KT major axis diameter','50KT\u77ed\u5f84':'50KT minor axis diameter','30KT\u9577\u5f84\u65b9\u5411':'30KT major axis direction','30KT\u9577\u5f84':'30KT major axis diameter','30KT\u77ed\u5f84':'30KT minor axis diameter','\u4e0a\u9678':'landing'})","fa69087c":"data.head()","fa22a16c":"for col in ['year','month','day','hour']:\n    print(col)\n    print(np.sort(data[col].unique()))","485cfcf1":"print(data['typhoon number'].unique().shape)\nprint(data['typhoon name'].unique().shape)","5dff8bb4":"data['grade'].value_counts()","8055ac84":"name = 'CIMARON'\nnum = 101\nx = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['latitude'].values\ny = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['longitude'].values\nfig = plt.figure(facecolor=\"skyblue\")\nplt.plot(x,y,'darkorchid')\nplt.hlines([10,20,30],110,140,\"black\", linestyles='dashed',linewidth=1)\nplt.vlines([110,120,130,140],10,30,\"black\", linestyles='dashed',linewidth=1)\nplt.show()","31cb2234":"example_num = 1\njp_x = [145,143,141,142,140,136,133,131,129,133,137,139,140,141,142,145]\njp_y = [44,41,42,40,35,34,33,30,33,36,37,38,41,42,45,44]\n\nfor name in data['typhoon name'].unique()[:example_num]:\n    print(name)\n    for num in data[data['typhoon name']==name]['typhoon number'].unique():\n        \n        x = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['latitude'].values\n        y = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['longitude'].values\n        \n        plt.figure(facecolor=\"white\")\n        plt.axhspan(10,50,0.04,0.96,color='skyblue')\n        plt.fill(jp_x,jp_y,color=\"g\",alpha=0.5)\n        plt.plot(x,y,'darkorchid')\n        plt.xlabel('longitude')\n        plt.ylabel('latitude')\n        plt.hlines([10,20,30,40,50],110,160,\"black\", linestyles='dashed',linewidth=1)\n        plt.vlines([110,120,130,140,150,160],10,50,\"black\", linestyles='dashed',linewidth=1)\n        plt.show()","7acf9b75":"print(np.sort(data['latitude'].values))\nprint(np.sort(data['longitude'].values))","1e8f0a0b":"np.sort(data['center pressure'].unique())","d42c6e9f":"data['max wind speed'].unique()","aff7ec6a":"example_num = 1\njp_x = [145,143,141,142,140,136,133,131,129,133,137,139,140,141,142,145]\njp_y = [44,41,42,40,35,34,33,30,33,36,37,38,41,42,45,44]\n\nfor name in data['typhoon name'].unique()[:example_num]:\n    print(name)\n    for num in data[data['typhoon name']==name]['typhoon number'].unique():\n        print(num)\n        x = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['latitude'].values\n        y = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['longitude'].values\n        \n        major_diameter_50 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['50KT major axis diameter'].values\n        major_direction_50 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['50KT major axis direction'].values\n        minor_diameter_50 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['50KT minor axis diameter'].values\n        major_diameter_30 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['30KT major axis diameter'].values\n        major_direction_30 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['30KT major axis direction'].values\n        minor_diameter_30 = data[(data['typhoon name']==name)&(data['typhoon number']==num)]['30KT minor axis diameter'].values\n        shifted_x = x + ((major_diameter_50-minor_diameter_50)\/2)*np.sin((np.pi\/4)*major_direction_50)*(1.852\/111)\n        shifted_y = y + ((major_diameter_50-minor_diameter_50)\/2)*np.cos((np.pi\/4)*major_direction_50)*(1.852\/111)\n        diameter = ((major_diameter_50+minor_diameter_50)\/2)*(1.852\/111)\n        diameter_30 = ((major_diameter_30+minor_diameter_30)\/2)*(1.852\/111)\n        fig = plt.figure(facecolor=\"white\")\n        plt.axhspan(10,50,0.04,0.96,color='skyblue')\n        plt.fill(jp_x,jp_y,color=\"g\",alpha=0.5)\n        # 50 knot storm range\n        for i in range(len(shifted_x)):\n            circle_x = []\n            circle_y = []\n            for j in np.linspace(-180,180,360):\n                circle_x.append(shifted_x[i]+diameter[i]*math.cos(math.radians(j)))\n                circle_y.append(shifted_y[i]+diameter[i]*math.sin(math.radians(j)))\n            plt.plot(circle_x,circle_y,'red')\n        # 30 knot storm range\n        for i in range(len(shifted_x)):\n            circle_x = []\n            circle_y = []\n            for j in np.linspace(-180,180,360):\n                circle_x.append(shifted_x[i]+diameter_30[i]*math.cos(math.radians(j)))\n                circle_y.append(shifted_y[i]+diameter_30[i]*math.sin(math.radians(j)))\n            plt.plot(circle_x,circle_y,'green',linewidth=0.5)\n        plt.plot(x,y)\n        plt.plot(jp_x,jp_y,'black')\n        plt.plot(shifted_x,shifted_y,'red')\n        plt.xlabel('longitude')\n        plt.ylabel('latitude')\n        plt.hlines([10,20,30,40,50],110,160,\"black\", linestyles='dashed',linewidth=1)\n        plt.vlines([110,120,130,140,150,160],10,50,\"black\", linestyles='dashed',linewidth=1)\n        plt.show()","9220608f":"print('Showing numbers of typhoons for each year')\nnumbers = {}\nfor year in data['year'].unique():\n    numbers[year] = len(data[data['year']==year]['typhoon number'].unique())\n    #print(str(year)+' : ',len(data[data['year']==year]['typhoon number'].unique()))\nplt.figure(facecolor='gray')\nplt.plot(list(numbers.keys()),list(numbers.values()),'black')\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(numbers.keys()),list(numbers.values()))[0][1]))","ad31c4bf":"numbers = {}\nfor year in data['year'].unique()[9:]:\n    numbers[year] = len(data[data['year']==year]['typhoon number'].unique())\n    #print(str(year)+' : ',len(data[data['year']==year]['typhoon number'].unique()))\nplt.figure(facecolor='gray')\nplt.plot(list(numbers.keys()),list(numbers.values()))\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(numbers.keys()),list(numbers.values()))[0][1]))","ae285341":"print('Showing average size of typhoons for each year')\nprint('Circle size reveals typhoon size')\nsizes = {}\nfor year in data['year'].unique():\n    sizes[year] = np.mean((data[data['year']==year]['50KT major axis diameter'].values + data[data['year']==year]['50KT minor axis diameter'].values)\/2)\nplt.figure(facecolor='gray')\nplt.plot(list(sizes.keys()),list(sizes.values()),'black')\nfor i in range(len(sizes)):\n    circle_x = []\n    circle_y = []\n    for j in np.linspace(-180,180,360):\n        circle_x.append(list(sizes.keys())[i]+(list(sizes.values())[i]\/50)*math.cos(math.radians(j)))\n        circle_y.append(list(sizes.values())[i]+(list(sizes.values())[i]\/30)*math.sin(math.radians(j)))\n    plt.plot(circle_x,circle_y)\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(sizes.keys()),list(sizes.values()))[0][1]))","a05b43ca":"print('Showing max size of typhoons for each year')\nsizes = {}\nfor year in data['year'].unique():\n    sizes[year] = max((data[data['year']==year]['50KT major axis diameter'].values + data[data['year']==year]['50KT minor axis diameter'].values)\/2)\nplt.figure(facecolor='gray')\nfor i in range(len(sizes)):\n    circle_x = []\n    circle_y = []\n    for j in np.linspace(-180,180,360):\n        circle_x.append(list(sizes.keys())[i]+(list(sizes.values())[i]\/300)*math.cos(math.radians(j)))\n        circle_y.append(list(sizes.values())[i]+(list(sizes.values())[i]\/40)*math.sin(math.radians(j)))\n    plt.plot(circle_x,circle_y)\nplt.plot(list(sizes.keys()),list(sizes.values()))\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(sizes.keys()),list(sizes.values()))[0][1]))","d9931b69":"print('Showing average max wind speed of typhoons for each year')\nsizes = {}\nfor year in data['year'].unique():\n    sizes[year] = np.mean(data[data['year']==year]['max wind speed'].values)\nplt.figure(facecolor='gray')\nplt.plot(list(sizes.keys()),list(sizes.values()),'black')\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(sizes.keys()),list(sizes.values()))[0][1]))","30a3991a":"print('Showing numbers of landed typhoons for each year')\nnumbers = {}\nfor year in data['year'].unique():\n    count = 0\n    for num in data[data['year']==year]['typhoon number'].unique():\n        if not (len(data[(data['year']==year)&(data['typhoon number']==num)]['landing'].unique())==1)&(data[(data['year']==year)&(data['typhoon number']==num)]['landing'].unique()[0]==0):\n            count += 1\n    numbers[year] = count\nplt.figure(facecolor='gray')\nplt.plot(list(numbers.keys()),list(numbers.values()))\nplt.show()\nprint('correlation coefficient : '+str(np.corrcoef(list(numbers.keys()),list(numbers.values()))[0][1]))","2753e2b1":"# Simple Data Description\n\n\n![](https:\/\/classmethod.jp\/wp-content\/uploads\/2016\/10\/thu_logo_kishochou.png)\n\n\nThis data is from Japanese Official Metrological Agency.\n\nYou can get this data from here:\nhttps:\/\/www.data.jma.go.jp\/fcd\/yoho\/typhoon\/position_table","e0d05d15":"that's why I thought these days numbers of typhoons is increasing.","1004e4ad":"It corresponds to the mercator plot of this,\n\n\n![](https:\/\/www.data.jma.go.jp\/fcd\/yoho\/data\/typhoon\/T0101.png)","6bd9cbbf":"# Course of typhoon based on longitude\/latitude","8f0b20da":"# Then Let's watch about change of the numbers of typhoons","4646ebd8":"# So, how about wind speed?\nIt's also the main destructive part of typhoon","c25762b4":"# typhoon number, name\n\nidentification of each typhoon","884f36d1":"year & number of typhoons have 0.256 correlation \nI felt it's smaller than I thought,\nit may be because I'm a teenager and compared only 2010\u301c typhoons, Let's check it out","ebdf99b4":"# 50\/30 knot major\/minor axis direction\/diameter\n\n\nJapanese storm range is defined by a circle which:\n\n1. center is shifted (50 knot major axis diameter - 50 knot minor axis diameter) to the direction of major axis diameter\n\n2. direction has 8 types, 1:NE, 2:E, 3:SE, 4:S, 5:SW, 6:W, 7:NW, 8:N \n\n(N:North, S:South, E:East,W:West), and 9(wind direction is concentric to the center of typhoon)\n\nLet's plot it with formor 2d course of typhoon (it's littlebit biased)","a79a81db":"# Thank you for watching!","bc517fa6":"# max wind speed","3ab6eb81":"# center pressure\n\nair pressure at the center of typhoon","01ade982":"# longitude & latitude\n\ngeological point of typhoon\n\nLet's plot examples of 2d courses of typhoons","c81224e0":"# Data of 2019 isn't filled, so this time I dropped it","5d6b23b0":"It also shows there is minus correlation, and tells us average max speed are relatively decreasing.","52b9b4f2":"there is clearly big correlation in these recent 10 years but totally it's not related","a1a9039d":"# Landing","66023232":"# Next Let's see how the size of typhoon changed\nIt is an important features directly related to how large does the typhoon have its effects.","763a4da8":"From this analysis, typhoons are clearly increasing these 10 years in Japan, but in 20 years there is not such a relationship, and average wind speed is decreasing.\nNext time I'm gonna try to make some analysis about global warming.\nIf there are some advice please comment!","bf20902d":"There is no correlation between year & max size of typhoon for each year","788f0d90":"# About this kernel\n![](https:\/\/d1uzk9o9cg136f.cloudfront.net\/f\/16783342\/rc\/2019\/10\/11\/0e310b5fae494ff287cf769a37c9382672f255f6_xlarge.jpg)\n\n\n\nRecently there was historical biggest typhoon in Japan(named Hagibis), and made devastiting effect,\nand I wondered if the number of typhoons is increasing.\nso made some analysis and want to share you how Japanese typhoon trend changes.","d74b24ae":"It says there is correlation -0.463 between year & average size of typhoon \/ year.\nso how about max size of typhoon? ","cd309ff8":"# year, month, day, hour\n\ntime based features of typhoons","0f6121a0":"# grade\n\n1 : no typhoon (not included in this dataset)\n\n2 : typhoon which max wind speed < 17m\/s (34 knot)\n\n3 : typhoon which 17m\/s (34 knot) <= max wind speed < 25m\/s (48 knot)\n\n4 : typhoon which 25m\/s (48 knot) <= max wind speed < 33m\/s (64 knot)\n\n5 : typhoon which 33m\/s (64 knot) <= max wind speed\n\n6 : temperate cyclone\n\n7 : center of typhoon is out of north longitude 0-60\u00b0, east latitude 100-180\u00b0"}}