{"cell_type":{"1c6a50c7":"code","881f8e33":"code","7e1330b4":"code","d29e116f":"code","b70919ab":"code","bbe9af98":"code","11fbb311":"code","8f35d761":"code","711e34e3":"code","eb979318":"code","608f5fc7":"code","841221d1":"code","341d3760":"code","9fc67128":"code","12361866":"code","d14114a9":"code","bc7e5d84":"code","f0ab8bb1":"code","24ba323e":"code","6d780a97":"code","9f9bd718":"code","4482c1c7":"code","01c246ed":"code","eaf5f95b":"code","d27f1f9c":"code","557e4613":"code","4f5f83fa":"code","21f24427":"code","d01c73c4":"code","331b8f1a":"code","a8909be7":"code","e9fb658f":"code","328f83a3":"code","8c86cc7b":"code","a4970e12":"code","9c232c6e":"code","c43401d0":"code","cfdb761f":"code","56d8ee46":"code","0df050e3":"code","8e36574f":"code","9b63aad7":"code","fbb318c5":"code","b3065c07":"code","b58c11a8":"code","593594f3":"code","53965c26":"code","18627913":"code","a20f21a3":"code","947a0f56":"code","38e3cf25":"code","73ff63f3":"code","6c03c7e5":"code","d48ab8d9":"code","06d9ce87":"code","4f4fcb09":"code","872b61c7":"code","d7fa1a11":"markdown","c955f73a":"markdown","328dcf29":"markdown","6ac94cba":"markdown","3302d203":"markdown","463b9cde":"markdown","a6c4c83a":"markdown","88176b16":"markdown","93ab0673":"markdown","0d616287":"markdown","5a834576":"markdown","5c62d826":"markdown","82372a8b":"markdown","8f27f0d8":"markdown","bf97da14":"markdown","d9beef8e":"markdown","b209528a":"markdown","e6a3ccb3":"markdown","ddf0b6c4":"markdown","4d2b440b":"markdown","bc84e15f":"markdown","52a839a0":"markdown","6cda52aa":"markdown","994d25bc":"markdown","e1a68729":"markdown","19027935":"markdown","d9610e64":"markdown"},"source":{"1c6a50c7":"import pandas as pd                  #Importing Pandas library\nimport numpy as np                   #Importing numpy library\nimport matplotlib.pyplot as plt      # Import matplotlib library\nimport os","881f8e33":"project=pd.read_excel('..\/input\/Dataset used for the Project.xls') #Reading dataset","7e1330b4":"#Below code was found from here : https:\/\/stackoverflow.com\/questions\/26266362\/how-to-count-the-nan-values-in-a-column-in-pandas-dataframe\/39734251.\n#This function was created by Nikos Tavoularis and shared on stackoverflow.com. Comments in below functions were added by Smit Patel\n\ndef missing_values_table(df):\n        mis_val = df.isnull().sum()                                #Counts the number of missing values\n        mis_val_percent = 100 * df.isnull().sum() \/ len(df)        #Calculates the precentage of missing valyes\n        mis_val_table = pd.concat([mis_val, mis_val_percent], axis=1)  #Concates the above variables\n        mis_val_table_ren_columns = mis_val_table.rename(              #renames the column\n        columns = {0 : 'Missing Values', 1 : '% of Total Values'})\n        mis_val_table_ren_columns = mis_val_table_ren_columns[              # Sort and round the values the column in ascending order\n            mis_val_table_ren_columns.iloc[:,1] != 0].sort_values(         \n        '% of Total Values', ascending=False).round(1)\n        print (\"Your selected dataframe has \" + str(df.shape[1]) + \" columns.\\n\"      \n            \"There are \" + str(mis_val_table_ren_columns.shape[0]) +\n              \" columns that have missing values.\")                     \n        return mis_val_table_ren_columns  ","d29e116f":"missing_values_table(project)","b70919ab":"new_project=project.loc[ : , ['ID','Age', 'Body mass index','Social drinker',\n       'Social smoker','Son','Day of the week','Month of absence','Seasons','Service time','Absenteeism time in hours'] ] #Subsetting columns of interest","bbe9af98":"new_project.columns=['ID','Age', 'BMI', 'Social_drinker', 'Social_smoker', 'Son',\n       'Day_of_the_week', 'Month_of_absence', 'Seasons', 'Service_time','Absenteeism_time_in_hours'] #Renaming column  names","11fbb311":"new_project.drop(new_project[new_project.Absenteeism_time_in_hours==0].index,inplace=True) #Dropping data that contains 0 hours in absenteeism_time_in_hours columns","8f35d761":"new_project.shape #Dimension of the dataset after cleaning and subsetting columns of interest","711e34e3":"plt.rcParams['figure.figsize']=25,10               #Selecting size and width of the plot\nnew_project.hist()                                 #Choosing bar\/histogram for visualization\nplt.show()                                         #Display the visualization","eb979318":"new_project1=new_project #Copying dataframe into new dataframe. To avoid messing with original dataframe","608f5fc7":"#Calculation in this section is suggested by Lauren Foltz using Excel, However Coding in below section was developed and executed by Smit Patel\nbins = [20,29,39,49,59]   #Creating bins\nlabels=['Adult20s','Adult30s','Adult40s','Adult50s'] #Labelling bins","841221d1":"new_project1['age_fact']=pd.cut(new_project1['Age'],bins=bins,labels=labels) #Creating new column with bins that are appropriate for each rows","341d3760":"import warnings                   #Import warnings library\nwarnings.filterwarnings('ignore')","9fc67128":"hours_sum=new_project1.groupby(('ID','age_fact'),as_index=False)['Absenteeism_time_in_hours'].sum() #Sum number of hours missed by employees based on Unique ID and labeled bins","12361866":"hours_sum=hours_sum.dropna() #Removing NA's that are generated during the process","d14114a9":"age_hours_missed=round(hours_sum.groupby('age_fact')[['Absenteeism_time_in_hours']].mean(),2) #Calculating AVG hours missed by emplyees based on Age group and rounding to two decimals","bc7e5d84":"age_hours_missed #Avg hours missed by employees based on Unique ID.","f0ab8bb1":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nbin2=[19,24,29,38]          #Binning BMI \nlabels2=['Normal','Overweight','Obese'] #labelling BMI's","24ba323e":"new_project1['BMI_fact']=pd.cut(new_project1['BMI'],bins=bin2,labels=labels2) #Creating new column to represent BMI value assocaited with bins and labels","6d780a97":"BMI_sum=new_project1.groupby(('ID','BMI_fact'),as_index=False)['Absenteeism_time_in_hours'].sum() #Sum number of hours missed by employees based on Unique ID and labeled bins","9f9bd718":"BMI_sum=BMI_sum.dropna() #Removing NA's that are generated during the process","4482c1c7":"BMI_hours_missed=round(BMI_sum.groupby('BMI_fact')[['Absenteeism_time_in_hours']].mean(),2) #Calculating AVG hours missed by emplyees based on BMI group and rounding to two decimals","01c246ed":"BMI_hours_missed #Avg hours missed by employees based on Unique ID.","eaf5f95b":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nnew_project1['Drinker_cat']=pd.cut(new_project1.Social_drinker,2,labels=['Drinker','Non-Drinker']) #Creating new column and assigning lables based on values present in Social_drinker column","d27f1f9c":"Drinker_sum=new_project1.groupby(('ID','Drinker_cat'),as_index=False)['Absenteeism_time_in_hours'].sum() #Sum number of hours missed by employees based on Unique ID and labeled bins","557e4613":"Drinker_sum=Drinker_sum.dropna() #Removing NA's that are generated durig the process","4f5f83fa":"Drinker_hours_missed=round(Drinker_sum.groupby('Drinker_cat')[['Absenteeism_time_in_hours']].mean(),2) #Calculating AVG hours missed by emplyees based on Drinker's group and rounding to two decimals","21f24427":"Drinker_hours_missed #Avg hours missed by employees based on Unique ID.","d01c73c4":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nnew_project1['Smoker_cat']=pd.cut(new_project1.Social_smoker,2,labels=['Smoker','Non-Smoker']) #Creating new column and assigning lables based on values present in Social_smoker column","331b8f1a":"Smoker_sum=new_project1.groupby(('ID','Smoker_cat'),as_index=False)['Absenteeism_time_in_hours'].sum() #Sum number of hours missed by employees based on Unique ID and labeled bins","a8909be7":"Smoker_sum=Smoker_sum.dropna() #Removing NA's that are generated durig the process","e9fb658f":"Smoker_hours_missed=round(Smoker_sum.groupby('Smoker_cat')[['Absenteeism_time_in_hours']].mean(),2) #Calculating AVG hours missed by employees based on Smoker's group and rounding to 2 decimals","328f83a3":"Smoker_hours_missed #Avg hours missed by employees based on Unique ID.","8c86cc7b":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nbin3=[-np.inf,0,np.inf] #Creting bins for 0-4 levels in \"son\" column","a4970e12":"new_project1['son_fact']=pd.cut(new_project1.Son,bins=bin3,labels=['None','some']) #Creating new column and assigning lables based on values present in 'Son' column","9c232c6e":"Son_sum=new_project1.groupby(('ID','son_fact'),as_index=False)['Absenteeism_time_in_hours'].sum() #Sum number of hours missed by employees based on Unique ID and labeled bins","c43401d0":"Son_sum=Son_sum.dropna() #Removing NA's that are generated durig the process","cfdb761f":"Son_hours_missed=round(Son_sum.groupby('son_fact')[['Absenteeism_time_in_hours']].mean(),2) #Calculating AVG hours missed by employees based on Son's group and rounding to 2 decimals","56d8ee46":"Son_hours_missed","0df050e3":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nfrom calendar import day_name     #Import days of the week library\nfrom collections import deque","8e36574f":"days = deque(day_name)          #Dequing days of the week ","9b63aad7":"days.rotate(2)                    # rotate days\ndays_map = dict(enumerate(days)) #Creating dictionary","fbb318c5":"new_project4=new_project1 #Copying dataset into new datafram to avoid overwriting","b3065c07":"new_project4['Day_Factor'] = new_project4['Day_of_the_week'].map(days_map) #Mapping days of the week to a dataframe","b58c11a8":"Day_filter=new_project4.filter(['Day_Factor','Absenteeism_time_in_hours']) #Filtering columns of interest","593594f3":"Day_filter.groupby('Day_Factor').sum()[['Absenteeism_time_in_hours']].sort_values(['Absenteeism_time_in_hours'],ascending=False) #Grouping by Days of the week, summing and Sorting hours in descending order","53965c26":"import altair as alt\nalt.renderers.enable('kaggle')#Rendering notebook","18627913":"alt.Chart(new_project4).mark_bar().encode(                                                                                    #Selecting Bar chart for visualization\n    alt.X('Day_Factor:N',axis=alt.Axis(title='Days of the week'),sort=['Monday','Tuesday','Wednesday','Thursday','Friday']),  #Assigning data to x-axis, adding title and sorting by Days of the week\n    alt.Y('sum(Absenteeism_time_in_hours):Q',axis=alt.Axis(title='Absenteeism time in hours')),                               #Assigning data to Y-axis and adding title\n    color=alt.Color('Day_Factor:N',title='Days of the Week',sort=['Monday','Tuesday','Wednesday','Thursday','Friday'])      #Assigning color to visualization, adding title and sorting by Days of the week\n).properties(width=200,height=200)                                                                                          #Assigning height and width of the plot","a20f21a3":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nmonth_filter=new_project1.filter(['Month_of_absence','Absenteeism_time_in_hours']) #Filtering columns of interest","947a0f56":"month_group=month_filter.groupby(['Month_of_absence']).sum()[['Absenteeism_time_in_hours']] #Grouping and summing hours missed by employees","38e3cf25":"month_group #Output of Month and total hours missed by employees for each month","73ff63f3":"alt.Chart(new_project1).mark_bar().encode(                                                         #Selecting Bar chart for visualization\n    alt.X('Month_of_absence:Q',axis=alt.Axis(title='Months',ticks=True),bin=alt.Bin(maxbins=30)),  #Assigning data to x-axis, adding title and adding maximum number of bins to x-axis\n    alt.Y('sum(Absenteeism_time_in_hours):Q',axis=alt.Axis(title='Absenteeism time in hours')),    #Assigning data to Y-axis and adding title\n    color=alt.Color('Month_of_absence:N',legend=None)                                              #Assigning color to visualization and adding title\n).properties(width=300,height=200)                                                                 #Assigning height and width of the plot","6c03c7e5":"#Calculation in this section is suggested by Lauren Foltz using Excel, Coding developed and executed by Smit Patel\nnew_project4['seasons_fact']=pd.cut(new_project4.Seasons,4,labels=['Summer','Autumn','Winter','Spring']) #Adding dummy column to covnert numerical data to categorical","d48ab8d9":"season_filter=new_project4.filter(['seasons_fact','Absenteeism_time_in_hours']) #Filtering columns of interest","06d9ce87":"seasons_group=season_filter.groupby(['seasons_fact']).sum()[['Absenteeism_time_in_hours']] #Grouping by Seasons and adding number of hours missed by employees","4f4fcb09":"seasons_group #Output of Seasons and number of hours missed by employees","872b61c7":"alt.Chart(new_project4).mark_bar().encode(                                                     #Selecting Bar chart for visualization\n    alt.X('seasons_fact:N',axis=alt.Axis(title='Seasons')),                                    #Assigning data to x-axis and adding title\n    alt.Y('sum(Absenteeism_time_in_hours):Q',axis=alt.Axis(title='Absenteeism time in hours')), #Assigning data to Y-axis and adding title\n    color=alt.Color('seasons_fact:N',title='Seasons')                                           #Assigning color to visualization and adding title\n).properties(width=200,height=200)                                                              #Assigning height and width of the plot","d7fa1a11":"# Business Question 1: Which age group misses the most work? ","c955f73a":"# Part #1 :Do Drinkers or Non-Drinkers miss the most work?","328dcf29":"# DataSet Distribution","6ac94cba":"**Visualization to support above Calculations:**","3302d203":"# Result Analysis:\n\nNon-Drinker misses more work compare to Drinker. Smoker misses more work compare to Non-smoker.","463b9cde":"# Binning Age Column","a6c4c83a":"# Column Subsetting, Renaming and Dropping","88176b16":"# Result Analysis:\nNon-Drinker employees misses more work compare to Drinker.","93ab0673":"# Result Analysis:\nEmployess with 1 or more children misses more work compare to employees with no children","0d616287":"# Overview\n\nBelow project was created in collaboration with Lauren Foltz, as a part of Data Science Project.  Dataset used for the below project was downloaded from UCI ML repositoy located [here](http:\/\/archive.ics.uci.edu\/ml\/datasets\/Absenteeism+at+work). Below research questins will be answered using python code.\n\n**Research Questions:**\n\n**1) Which age group misses the most work?**\n\n**2) Does being in a higher BMI group cause people to miss more? Being a smoker? Being a drinker?**\n\n**3) Do people with children miss more than people without?**\n\n**4) Which day of the week is missed most? Which month? Which season?**\n\n**5) Do people with more years of service miss more?***","5a834576":"# Part #2 : Do Smokers or Non-Smokers miss the most work?","5c62d826":"# Business Question #4: Which day of the week is missed most? Which month? Which season?","82372a8b":"**Let's confirm with Visualization:**","8f27f0d8":"# Result Analysis:\nMost employees are absent in March and July,which are Summer and winter seasons in Brazil. This data correlates with the above season output.\n\nSeason breakdown in Brazil (http:\/\/trip-n-travel.com\/listicle\/21049\/)\n\n    Month            Seasons\n    Jan- March\t   Summer\n    April- June\t  Autumn\n    July- Sept       Winter\n    Oct- Dec\t     Spring","bf97da14":"# Business Question# 3 : Do people with children miss more than people without?","d9beef8e":"# Result Analysis:\nEmployees are mostly absent on Monday, Tuesday and Wednesday.","b209528a":"# Part #3 :Which Season is missed by employees?","e6a3ccb3":"# Result Analysis:\nOriginal dataset contained 740 observations and 21 variables. After subsetting and dropping few columns. Dataset size was lowered to 696 Observations and 11 variables. To avoid deletion any useful data in original dataset, subsetted dataset was copied into new dataframe.","ddf0b6c4":"# Part # 1 : Which Day of the week missed most ?","4d2b440b":"# Part #2 :Which Month is missed by employees ?","bc84e15f":"# Result Analysis:\n\nAdult in their 50's misses most work followed by Adult's in their 30s.","52a839a0":"**Visualization**","6cda52aa":"# Result summary:\n\n1.  Adults in their 50s missed the most work.\n2.  Obese workers missed the most work.\n3.  Smokers missed more work than non-smokers.\n4.  Non-drinkers missed more work than drinkers.\n5. Parents missed more work than non-parents.\n6. Workers missed work starting on Monday the most often. \n   - The highest months for missed work were March and July. \n   - The highest season for missed work was Winter.\n","994d25bc":"# Business Question 2 : Which BMI group the misses most work? ","e1a68729":"**Result Analysis:**\n\nObese people misses more work compare to Normal and Overweight. The next BMI group that misses more work is NOT shockingly employees in Overweight BMI group.\n\n**Below Binning range was used for analysis:**\n\n    BMI            BMI Bin\n    19-24 \t     Normal\n    25-29     \t Overweight\n    30-38          Obese","19027935":"# What's next ?\n\nWe will try to answer below questions....\n\n1)Which reasons caused the most missed hours?\n\n2)If the same trend of absenteeism continues, how much loss of hours can we project for next year?\n\n","d9610e64":"**Note:**\n\nBelow code will generate below warning, this is 'ignored' by importing 'ignore' module from warnings library.\n\nWarning:\nC:\\Users\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:1: FutureWarning: Interpreting tuple 'by' as a list of keys, rather than a single key. Use 'by=[...]' instead of 'by=(...)'. In the future, a tuple will always mean a single key.\n  \"\"\"Entry point for launching an IPython kernel."}}