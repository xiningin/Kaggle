{"cell_type":{"3272b640":"code","d10d9d2e":"code","ee6af0f4":"code","5a58f209":"code","5b8dc80d":"code","0b04ece0":"code","534dcc21":"code","2ad19635":"markdown","69eb5645":"markdown"},"source":{"3272b640":"import urllib.request, json \nimport pandas as pd\n#from pandas.io.json import json_normalize\n############## https:\/\/labs.data.gov\/dashboard\/offices\/qa\napi_list = [\"http:\/\/www.usda.gov\/data.json\",\n            \"http:\/\/www.commerce.gov\/data.json\",\n            #\"https:\/\/www.defense.gov\/data.json\",\n            \"http:\/\/www.ed.gov\/data.json\",\n            \"http:\/\/www.energy.gov\/data.json\",\n            \"http:\/\/www.hhs.gov\/data.json\",\n            \"http:\/\/www.dhs.gov\/data.json\",\n            \"http:\/\/www.hud.gov\/data.json\",\n            \"http:\/\/www.usdoj.gov\/data.json\",\n            \"http:\/\/www.dol.gov\/data.json\",\n            #\"http:\/\/www.state.gov\/data.json\",\n            \"http:\/\/www.ustreas.gov\/data.json\",\n            \"http:\/\/www.dot.gov\/data.json\",\n            \"http:\/\/www.va.gov\/data.json\"\n            \"http:\/\/www.gsa.gov\/data.json\",\n            \"http:\/\/www.nsf.gov\/data.json\",\n            #\"http:\/\/www.nrc.gov\/data.json\",\n            \"http:\/\/www.opm.gov\/data.json\",\n            \"http:\/\/www.sba.gov\/data.json\",\n            \"http:\/\/www.ssa.gov\/data.json\",\n            \"http:\/\/www.usaid.gov\/data.json\",\n            \"http:\/\/www.usccr.gov\/data.json\",\n            \"http:\/\/www.consumerfinance.gov\/data.json\",\n            \"http:\/\/www.cpsc.gov\/data.json\",\n            \"http:\/\/www.eeoc.gov\/data.json\",\n            \"http:\/\/www.fdic.gov\/data.json\",\n            #\"http:\/\/www.fhfa.gov\/data.json\",\n            \"http:\/\/www.frtib.gov\/data.json\",\n            \"http:\/\/www.ftc.gov\/data.json\",\n            #\"http:\/\/www.mspb.gov\/data.json\",\n            \"https:\/\/www.doi.gov\/sites\/doi.gov\/files\/data.json\",\n            \"http:\/\/www.udall.gov\/data.json\",\n            \"http:\/\/www.ncua.gov\/data.json\",\n            #\"http:\/\/www.arts.gov\/data.json\",\n            \"http:\/\/www.neh.gov\/data.json\",\n            \"http:\/\/www.ntsb.gov\/data.json\",\n            \"http:\/\/www.osc.gov\/data.json\",\n            \"http:\/\/www.pbgc.gov\/data.json\",\n            \"http:\/\/www.presidio.gov\/data.json\",\n            \"https:\/\/www.pdsdc.org\/data.json\",\n            \"http:\/\/www.sec.gov\/data.json\",\n            \"http:\/\/www.usitc.gov\/data.json\", \n           ]\n#api_list = [\"http:\/\/www.commerce.gov\/data.json\"]\ni=0\nfor site in api_list:\n    print (site)\n    with urllib.request.urlopen(site) as url:\n        try:\n            data = json.loads(url.read().decode('utf8'))\n        except json.decoder.JSONDecodeError:\n            pass\n        \n        #print (data)\n        if i==0:\n            df = pd.DataFrame(pd.json_normalize(data, 'dataset'))\n        else:\n            temp = pd.DataFrame(pd.json_normalize(data, 'dataset'))\n            df = df.append(temp, ignore_index=True)\n    i=i+1\n#df=df[df['@type'].str.contains('dcat:Dataset')]\ndf","d10d9d2e":"df2 = df[['title']].copy()\ndf2['title'].str.replace(\",\",\"\")\ndf2['title']=df['title'].str.lower()\ndf[\"title\"] = df['title'].str.replace('[^\\w\\s]','')\n\ndf","ee6af0f4":"arr= df2[\"title\"].unique()\nlen(arr)","5a58f209":"df_tmp = pd.DataFrame(arr,columns =[\"title\"])\ndf_tmp.head()","5b8dc80d":"len(df_tmp)","0b04ece0":"df_tmp.to_csv('govt_much_bigger_datasets.csv', index = False)","534dcc21":"#df3=df[df['identifier'].str.match('noaa')]\n\ndf3=df2[df2['title'].str.contains('longitudinal')]\n\ndf3","2ad19635":"Thank you https:\/\/www.kaggle.com\/mlconsult\/100000-govt-datasets-api-json-to-df","69eb5645":"Thank you @Ken Miller for sharing "}}