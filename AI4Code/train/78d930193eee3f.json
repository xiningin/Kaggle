{"cell_type":{"90f5c1b4":"code","4f83811b":"code","8e6ba3bd":"code","38755f7d":"code","c9aa7650":"code","5736bce5":"code","ee93e5fa":"markdown","f023c29b":"markdown","3d6b9db0":"markdown","a4294c4f":"markdown","6023e18a":"markdown","712d3549":"markdown","189d89d4":"markdown","ad4929d1":"markdown"},"source":{"90f5c1b4":"# run each cell by Shift+Enter\n\n# assumption: assumed that the mortal rate in a given region is a constant\n# the function daily_infected returns the number of infected in a given region under the assumption \ndef daily_infected(timeseries, multiplier=100.0\/4.0, shift=20):      # Baud D. et al. Real estimates of mortality following COVID-19 infection \/\/The Lancet Infectious Diseases. \u2013 2020. https:\/\/doi.org\/10.1016\/S1473-3099(20)30195-X\n    timeseries = multiplier * timeseries\n    timeseries[:-shift] = timeseries[shift:]\n    timeseries[-shift:] = 0\n    return timeseries\n\nglobal ax\n\n\nimport pandas as pd   #\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0430\u0437\u0430\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\nimport numpy as np    #\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\u043c\u0438 \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\nimport matplotlib.pyplot as plt\nfrom IPython.display import Image\n%matplotlib inline    \n\ndf = pd.read_csv('\/kaggle\/input\/corona-virus-report\/covid_19_clean_complete.csv') \n\ncountries = list(df['Country\/Region'].unique())\ndef smooth(time_series,eps=0.2):    # this function smooths timeseries by three elements\n    timeseries = np.zeros(len(time_series)+2)\n    timeseries[1:-1] = np.array(time_series)\n    timeseries[0], timeseries[-1] = timeseries[1], timeseries[-2]\n    return pd.Series(eps*timeseries[:-2]+(1-2*eps)*timeseries[1:-1]+eps*timeseries[2:])\n\ndef smooth5(timeseries,eps=0.15):   # this function smooths timeseries by five elements\n    timeseries = np.zeros(len(time_series)+4)\n    timeseries[2:-2] = np.array(time_series)\n    timeseries[0], timeseries[1], timeseries[-2], timeseries[-1] = timeseries[2], timeseries[2], timeseries[-3], timeseries[-3]\n    return pd.Series(eps*timeseries[:-4]+(1\/3-eps\/3)*timeseries[1:-3]+(1\/3-4*eps\/3)*timeseries[2:-2]+(1\/3-eps\/3)*timeseries[3:-1]+eps*timeseries[4:])\n\ndef cum2daily(time_series):      # this function is an inverse of cummulative summation\n    timeseries = np.zeros(len(time_series)+1)\n    timeseries[1:] = np.array(time_series)\n    timeseries[0] = timeseries[1]\n    return pd.Series(timeseries[1:]-timeseries[:-1])\n\ndef show_with_dates(columns,dates, label):\n    columns = pd.DataFrame(columns, columns=[label])\n    columns['Date']=dates.reset_index()['Date'] \n    return columns.set_index('Date')\n\ndef show_est(data,vert_lines,death_rate=4.0,smooth_koef=0.15): \n    confirmed_per_day = cum2daily(smooth(data['Confirmed'],0.3))\n    ax = show_with_dates(confirmed_per_day,\n                   data['Date'],'Confirmed per day, smoothed').plot.line()\n    infected_per_day = daily_infected(cum2daily(smooth(data['Deaths'],smooth_koef)),multiplier=100\/death_rate,shift=20)\n    show_with_dates(infected_per_day[:-20],\n              data['Date'],'Infected per day, reconstruction').plot.line(ax=ax)\n    \n    scale = max(infected_per_day)\n    \n    for day, y, text, color in vert_lines:\n              plt.axvline(x=day,color=color)\n              ax.text(day+1, scale * y, text,\n                        verticalalignment='bottom', horizontalalignment='left',\n                        color=color, fontsize=10)   \n","4f83811b":"print('The data set is actual on', df[-1:]['Date'].to_string(index=False))","8e6ba3bd":"country = 'Norway'\nregion_df = df[df['Country\/Region']==country]\nplt.figure()    \nshow_est(region_df,[[30, 0.5, '16 cases in Lombardy on 21 Feb', 'black'],\n                    [0, 0.9, country, 'black'],\n                    [len(region_df)-20, 0, 'data on last 20 days is N\/A', 'orange']],death_rate=4.0)\nplt.show()","38755f7d":"Image(\"\/kaggle\/input\/weather2\/Norway_oslo.png\",width=432) # thanks https:\/\/meteostat.net\/en\/station","c9aa7650":"region_df = df[df['Country\/Region']=='Sweden']\n\n# img = plt.imread('\/kaggle\/input\/weather2\/Sweden_stockholm1.png')\n# x = range(len(region_df))\n# fig, ax = plt.subplots(dpi=400) \n# ax.imshow(img, extent=[0, len(region_df), 0, 10])\nshow_est(region_df,[[30, 0.5, '16 cases in Lombardy on 21 Feb', 'black'],\n                    [0, 0.9, country, 'black'],\n                    [len(region_df)-20, 0, 'data on last 20 days is N\/A', 'orange']],death_rate=4.0)\n\n\nplt.show()\n\n","5736bce5":"Image(\"\/kaggle\/input\/weather3\/Sweden_stockholm1.png\",width=382) # thanks https:\/\/meteostat.net\/en\/station\n ","ee93e5fa":"# Even seasonal infections can happen \u201cout of season\u201d when they are new \n\nCOVID-19 is a new and unknown disease. Every new stamp of influenza looks for a new way in society to spread itself.\nOur research with mathematical models with a part of data from [5] do not support conclusions of [5].\n\nPlease, read paper by Professor of Epidemiology and Director, Center for Communicable Disease Dynamics of Harvard University.\nhttps:\/\/ccdd.hsph.harvard.edu\/will-covid-19-go-away-on-its-own-in-warmer-weather\/","f023c29b":"## Oslo Feb 24th - March 1st","3d6b9db0":"# 6. Acknowledgements\n\nCOVID-19 Complete Dataset (Updated every 24hrs) published by Devakumar kp, Student at NIELIT Calicut, Kasaragod, Kerala, India\n\nmeteo data source: meteostat.net; Raw data: NOAA, Deutscher Wetterdienst\n\n[meteostat Sources](https:\/\/meteostat.net\/en\/sources)","a4294c4f":"## Stockholm Feb 26th - Feb 29th, 2020","6023e18a":"# Weather conditions and COVID-19","712d3549":"# 3. Scandinavian countries","189d89d4":"\n\n\nThe dependence of the transmission of the influenza virus in the air on the relative humidity and temperature is known [1]. The influence of the relative humidity and temperature on the transmission of the coronovirus infection SARS-CoV is discussed in [2, 3]. ~~The dynamics of the epedimic spread of COVID-19 in China is well documented and provides excellent data for studying the dependence of the transmission on the humidity and temperature [4 - 7]. Researchers from Sun Yat-sen University in [5] analyzed the relationship between the mean temperature and the number of all confirmed cases in the three days after the first diagnosed case in more than 400 Chinese cities. Portuguese researchers [6] perform a linear regression of the doubling time on meteorological variables. This work assumes a linear dependency of the virus spreading rate on temperature and humidity in contrast to the nonlinear functional dependency found in [1]. The models given [4-7] can be useful to estimate the further dynamics of COVID-19 in other regions. This dynamic is known as the seasonality of virus infection. In the case of COVID-19, the doubling time is skewed by barriers, carantines, and other national government activities.~~\n \n1. Lowen AC, Mubareka S, Steel J, Palese P (2007) Influenza virus transmission is dependent on relative humidity and temperature. PLoS Pathog 3(10): e151. doi:10. 1371\/journal.ppat.0030151\n2. Chan K. H. et al. The effects of temperature and relative humidity on the viability of the SARS coronavirus \/\/Advances in virology. \u2013 2011. \u2013 \u0422. 2011.\n3. Bu J. et al. Analysis of meteorological conditions and prediction of epidemic trend of 2019-nCoV infection in 2020 \/\/medRxiv. \u2013 2020.\n4. Khamsi R. (2020) Wired.com 03.14.2020 They Say Coronavirus Isn't Airborne \u2014 but It's Definitely Borne By Air.\n5. Wang M. et al. Temperature significant change COVID-19 Transmission in 429 cities \/\/medRxiv. \u2013 2020.\n6. Oliveiros B. et al. Role of temperature and humidity in the modulation of the doubling time of COVID-19 cases \/\/medRxiv. \u2013 2020.\n7. Araujo M. B., Naimi B. Spread of SARS-CoV-2 Coronavirus likely to be constrained by climate \/\/medRxiv. \u2013 2020.\n8. Luo W. et al. The role of absolute humidity on transmission rates of the COVID-19 outbreak \/\/medRxiv. \u2013 2020.","ad4929d1":"## 1. Introduction"}}