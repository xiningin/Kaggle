{"cell_type":{"b29af387":"code","ee6e4f7e":"code","5ae22ae8":"code","2eb11b47":"code","efa3d207":"code","c8f1f03d":"code","6d589336":"code","fb6a786a":"code","40ae3167":"code","e518a2b0":"code","e069d386":"code","54a01266":"code","0efb927c":"code","f810348d":"code","d0b20ed6":"markdown"},"source":{"b29af387":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","ee6e4f7e":"# Load the libraries.\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","5ae22ae8":"# Load the dataset.\n\ndata = pd.read_csv('..\/input\/new-york-city-airbnb-open-data\/AB_NYC_2019.csv')","2eb11b47":"# Look at the first and last few rows.\n\ndata.head()\ndata.tail()","efa3d207":"# View information about the columns, value types and non-null counts\n\ndata.info()","c8f1f03d":"# Look at descriptive statistics for each column.\n\ndata.describe()","6d589336":"# A few rentals have a price equal to 0. They will be excluded from this analysis.\n\nprint(len(data[data['price'] == 0]))\ndata_v2 = data[data['price'] > 0]","fb6a786a":"# Look at the top values.\n\nnumber_listed = len(data_v2)\nnumber_over_1000 = len(data_v2[data_v2['price'] > 1000])\nnumber_over_500 = len(data_v2[data_v2['price'] > 500])\n\nprint(f'There are {number_listed} locations listed. {number_over_500} cost more than $500 a night '\n    f'({100 * number_over_500 \/ number_listed:.2f}%) and {number_over_1000} cost more than $1000 '\n    f'for a night ({100 * number_over_1000 \/ number_listed:.2f}%)'\n     )","40ae3167":"# Although the highest price is $10000, 97.86% of the locations listed are $500 and under.\n# Zooming into that view allows for a better visualization of the rentals distribution.\n\n\n# Size for the graph.\nplt.figure(figsize = (16,9))\n\n# All-values plot.\nplt.subplot(121)\nplt.hist(x='price', data=data_v2, bins = 100, alpha = 0.8)\nplt.xlabel('Price for a night (USD)')\nplt.ylabel('Number of rentals')\n\n# <$500 plot.\nplt.subplot(122)\nplt.hist(x='price', data=data_v2, bins = range(0, 10001, 50), alpha = 0.8)\nplt.axis([0, 500, 0, 18000])\nplt.xlabel('Price for a night (USD)')\nplt.ylabel('Number of rentals')\n\n\n","e518a2b0":"# Boxplots show how far away outliers are from the rest of the rentals.\n\nsns.boxplot(x='neighbourhood_group', y='price', data=data_v2, palette='Accent')\nplt.xlabel('Borough')\nplt.ylabel('Price (USD)')\n","e069d386":"# Topping the y axis to 500 helps to better appreciate how prices are distributed in each borough.\n# Manhattan shows both the highest median price and the largest interquartile range: this means that rentals in this borough are usually higher\n# than in the other boroughs, and also prices vary more.\n# It is important to note that this refers to the cost of rentals per day, without taking into account the room type or surface area (there is\n# no data of the latter in this dataset).\n\nax = plt.subplot()\nsns.boxplot(x='neighbourhood_group', y='price', data=data_v2, palette='Accent')\nax.set_ylim(0, 500)\nax.set_yticks(range(0, 501, 50))\nplt.xlabel('Borough')\nplt.ylabel('Price (USD)')","54a01266":"# Here is a visual representation of where rentals are located. The lowest rentals are dark blue and the higher rentals are dark red.\n\n# 95th percentile.\np_95 = data_v2.price.quantile(.95)\n\n# Keep only values that are below or equal the 95th percentile.\ndata_v2_95 = data_v2[data_v2['price'] <= p_95]\n\n# Create a scatterplot with the coordinates for each rental and their price.\nplt.figure(figsize=(20, 10))\nplt.scatter(data_v2_95['longitude'], data_v2_95['latitude'], c=data_v2_95['price'], cmap='seismic', label=data_v2_95['price'])","0efb927c":"# Now, the room types. There are 3 types: Private room; Entire home\/apt; Shared room.\n\nprint(data_v2.room_type.value_counts())","f810348d":"# Hypothesis testing to state whether the distribition of the price is significantly different from one room type to other is out of the scope of this analysis.\n# Instead, here the focus is to compare the distribution of the price of each room type with histograms.\n# The offer of shared rooms is, as it could be expected, concentrated on the low price range (less than $100 a night). However, very few shared rooms are offered.\n# Private rooms can also be found mostly in the <$100 range. The main differences with shared rooms are that:\n# 1) There are many more rentals available and 2) There is also an offer for rentals above $100 in the market, which diminishes as price goes up.\n# Entire homes and apartments have higher starting prices, and are found mostly around the $50-$300 range. Unlike the other room types, there is a significant\n# offer that goes beyond that price. The majority of the rentals offered above $1000 are of this type, the rest being private rooms.\n\n# Group data by room type.\ngrouped = data_v2.groupby('room_type')\n\n# Graph size.\nplt.figure(figsize = (24,12))\n\n# <$500 rentals plot.\nplt.subplot(1,2,1)\nplt.title('Overview of the <$500 market')\n\n# Create histogram for each room type.\nfor group in grouped:\n  plt.hist(group[1].price, alpha=0.5, bins=range(0, 501, 50), label=group[0])\n\nplt.xlabel('Price for a night (USD)')\nplt.ylabel('Number of rentals')\nplt.legend()\n\n# >= $500 rentals plot.\nplt.subplot(1,2,2)\nplt.title('''Zooming into the >=$500 market. Note that the values in the y axis (Number of rentals)\nare significantly lower than those for the <$500 market in the left''')\n\n# Create histogram for each room type.\nfor group in grouped:\n  plt.hist(group[1].price, alpha=0.5, bins=range(500, 10500, 500), label=group[0])\n\nplt.xlabel('Price for a night (USD)')\nplt.ylabel('Number of rentals')\nplt.xticks(range(500, 10500, 500))\nplt.legend()\n\n","d0b20ed6":"# Data analytics using Airbnb data\n\n### The purpose of the analysis is as follows.\n### I) Compare prices by region by looking at Airbnb on a New York City map.\n### II) Analyze whether there is a difference in price by room type."}}