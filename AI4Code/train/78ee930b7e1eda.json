{"cell_type":{"9add1cb6":"code","7f7ac8dc":"code","a9d6cf4b":"code","67c18d16":"code","83a20a78":"code","fa206a20":"code","5c6ed0a8":"code","83f27cf7":"code","0989d0f5":"code","6e63b300":"code","2ff7f49d":"code","10fe3b89":"code","5a994908":"code","49c85f13":"code","5ae52b96":"code","c9dfd051":"code","7c84fb8b":"code","449b634e":"code","6098b72c":"code","0bb53f59":"code","efd21eaa":"code","bcd0804e":"code","d3ecb2e5":"code","28537fef":"markdown","0e8db4da":"markdown","1b3e2789":"markdown","d8ff84dc":"markdown","865fe763":"markdown","a5b476c0":"markdown","b2972f8d":"markdown","c3103d54":"markdown","b7b335e4":"markdown","5bc061e8":"markdown","25ac180a":"markdown","01f1ad3e":"markdown","71d21a00":"markdown","5007df0b":"markdown","92c224f1":"markdown","e6d75885":"markdown"},"source":{"9add1cb6":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport datetime\n\nimport plotly.graph_objects as go\nimport plotly.express as px","7f7ac8dc":"df = pd.read_csv(\"..\/input\/border-crossing-entry-data\/Border_Crossing_Entry_Data.csv\")","a9d6cf4b":"df.shape","67c18d16":"df.duplicated().sum()","83a20a78":"df.columns","fa206a20":"df.isnull().sum()","5c6ed0a8":"df.info()","83f27cf7":"print('Attribute '+ 'Values')\nfor i in df.columns:\n    print( i,len(df.loc[:,i].unique()) )","0989d0f5":"temp = df[['Port Name','Port Code']].drop_duplicates()\ntemp[temp['Port Name'].duplicated(keep=False)]","6e63b300":"df.iloc[[29,217]]","2ff7f49d":"indexes = df['Location'].drop_duplicates().index\ntemp = df.iloc[indexes].groupby(by='Port Code')['Location'].count()\ntemp.value_counts().plot(kind='pie', autopct='%1.1f%%', shadow=True, explode=[0,0.20],startangle=15)\ndel temp","10fe3b89":"df['Date'] = pd.to_datetime(df['Date'])\n\ndf['Year'] = df['Date'].apply(lambda x : x.year)\n\nmonth_mapper = {1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr', 5:'May', 6:'Jun'\n               ,7:'Jul', 8:'Aug', 9:'Sep' ,10:'Oct', 11:'Nov', 12:'Dec'}\ndf['Month'] = df['Date'].apply(lambda x : x.month).map(month_mapper)\n\ndel month_mapper","5a994908":"df.head()","49c85f13":"temp = pd.DataFrame(df.groupby(by='Measure')['Value'].sum().sort_values(ascending=False)).reset_index()\nfig = px.bar(temp, x='Measure', y='Value', height=400)\nfig.show()\ndel temp","5ae52b96":"temp = df.groupby(by=['Border','Measure'])['Value'].sum().reset_index()\ntemp.fillna(0,inplace=True)\ntemp.sort_values(by='Value', inplace=True)\nfig = px.bar(temp, x='Measure', y='Value', color='Border', barmode='group')\nfig.show()\ndel temp","c9dfd051":"temp = df.groupby(by='Border')['Value'].sum()\nfig = go.Figure(data=[go.Pie(labels = temp.index, values=temp.values)])\nfig.update_traces(textfont_size=15,  marker=dict(line=dict(color='#000000', width=2)))\nfig.show()\ndel temp","7c84fb8b":"plt.figure(figsize=(10,6))\nsns.lineplot(data=df, x='Year', y='Value', hue='Measure',legend='full')\nplt.legend(bbox_to_anchor=(1.04,1), loc=\"upper left\")\nplt.title('Measure Values Through Years')","449b634e":"plt.figure(figsize=(10,6))\nsns.lineplot(data=df, x='Month', y='Value',legend='full', hue='Measure')\nplt.legend(bbox_to_anchor=(1.04,1), loc=\"upper left\")\nplt.title('Value by month')","6098b72c":"temp = pd.DataFrame(df.groupby(by='Port Name')['Value'].sum().sort_values(ascending=False)).reset_index()\npx.bar(temp, x='Port Name', y='Value')\ndel temp","0bb53f59":"measure_size = {'Trucks' : 'Mid_Size', 'Rail Containers Full' : 'Mid_Size', 'Trains' : 'Big_Size',\n       'Personal Vehicle Passengers':'Small_Size', 'Bus Passengers':'Small_Size',\n       'Truck Containers Empty':'Mid_Size', 'Rail Containers Empty':'Mid_Size',\n       'Personal Vehicles' : 'Small_Size', 'Buses' : 'Mid_Size', 'Truck Containers Full' : 'Mid_Size',\n       'Pedestrians':'Small_Size', 'Train Passengers':'Small_Size'}\n\ndf['Size'] = df['Measure'].map(measure_size)","efd21eaa":"temp = df.groupby(by=['Size','State'])['Value'].sum()\ntemp.fillna(0,inplace=True)\ntemp = temp.reset_index()\npx.bar(temp, x='State', y='Value', facet_col='Size')","bcd0804e":"temp = df.groupby(by=['Size','State'])['Value'].sum().unstack()\ntemp.fillna(0,inplace=True)\n\nplt.figure(figsize=(15,4))\n\nplt.subplot(131)\ntemp.iloc[0].sort_values().plot(kind='bar')\nplt.xticks(rotation=90)\nplt.title('Big_Size')\n\nplt.subplot(132)\ntemp.iloc[1].sort_values().plot(kind='bar')\nplt.xticks(rotation=90)\nplt.title('Mid_Size')\n\nplt.subplot(133)\ntemp.iloc[2].sort_values().plot(kind='bar')\nplt.xticks(rotation=90)\nplt.title('Small_Size')\n\ndel temp","d3ecb2e5":"plt.figure(figsize=(15,6))\ng = sns.FacetGrid(data=df, col='Size', sharey=False, height=5, aspect=1)\ng.map(sns.lineplot, 'Month', 'Value')","28537fef":"#### Let's see number of crossings by Mesures.","0e8db4da":"#### We have a date column that is in string format we can get better results if we change it to datetime format. Also than we can extract Year and Month from date and see the distribution according to them.","1b3e2789":"#### Below graph represents total number of crossings from borders.","d8ff84dc":"#### Below we have two plots, both showing bar chart showing sum of values of different size of measures by different states.","865fe763":"#### Above graph represents ports and their number of crossings","a5b476c0":"### Also, there are almost duble the locations than the port codes. This can mean that a port useually has 2 locations asociated with it. Let's see this.","b2972f8d":"#### Eastport has two different port codes because there are two differnt ports by the name 'Eastport' in different states.","c3103d54":"### Above graph shows number of crossings by month. July and Aug have highest crossings where Feb has the least number of crossings.","b7b335e4":"## Insights :\n- Mid_Size crossings are least in dec, jan and jul and most in oct, mar and aug.\n- Big_Size crossings are least in feb and most in oct, mar and aug.\n- Small_Size crossings are least in jan and feb and most in aug and july.\n- Crossing rate per month is negetively correlated with size of crossing.","5bc061e8":"### There are 116 Port names but 117 port codes. This could be an enry error or there could be two ports with same port names. Let's see this in detail.","25ac180a":"### Let's see if crossings of different sizes are seasonal or not.","01f1ad3e":"#### measures are likely distributed in both borders. But, One has higher number of crossings than the other. Let's see that.","71d21a00":"### We can group measures by their size.","5007df0b":"#### Most crossings are done by personal vehicle pessengers and personal vehicles. Let's see if it is likely distributed in both the borders of not.","92c224f1":"## Insights :\n- Minnesota has most number of big_size crossings but has averege on the other two categories.\n- Arizona has good number of small size crossings but average on the other two categories.\n- Ohio, Alaska and Montana has least amount of crossings in all the categories.\n- Michigan has 2nd heighest BIg and Mid size crossings but comparitively less small size crossings.\n- Texas has most mid_size and small size crossings and also, 3rd largest big_size crossings.\n- New York also has good number of crossings in all the three states.","e6d75885":"#### Above chart shows number of crossings throughout years.Crossings have been decreasing since year 2000. There is a slight increment in pedestrians crossing over past few yers."}}