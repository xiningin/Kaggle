{"cell_type":{"7b12281f":"code","abdc37c6":"code","a73e268d":"code","da6ca007":"code","297643d0":"code","83ee8cb1":"code","306b4114":"code","f43457a3":"code","bf770e6f":"code","8b3c117d":"code","e19e2794":"code","a38b7688":"code","47ec56d3":"code","8e3ffc43":"code","bc8a5c99":"code","064e6f62":"code","e56c27cd":"code","074477b8":"code","2771a886":"code","c2cf7c7a":"code","7b3d0b1c":"code","c4eab94f":"code","c3ac639a":"code","17d45959":"code","04b17cb0":"code","fc317906":"code","963525ad":"code","a2bbf164":"code","677a6fea":"code","95a5db0c":"code","5a3b548a":"code","3757cbee":"code","462dddb9":"code","fab2c604":"code","add7a6a8":"code","914f582a":"code","44b89dc1":"code","d12cc752":"code","6ba31409":"code","cf3276f2":"code","6cacb88e":"code","41780b0a":"code","f4a53759":"code","2a95bab4":"code","1204608d":"code","71ccf9ff":"code","4a9d7eeb":"code","c687335e":"code","46f2ddd7":"code","83e3c169":"code","ecbca479":"code","6cdbb85f":"code","d2beb62b":"code","999b5e55":"code","23a0efd2":"code","e6da46b6":"code","57a75ce3":"code","affe07d5":"code","0e622e94":"code","aeab843b":"code","9a3e6848":"code","66f8e016":"code","a44f87a6":"code","5299f976":"code","ff672067":"code","0c034051":"code","8210b85a":"code","9a9128c8":"code","d41b1f6e":"code","6572fe18":"code","1443ee14":"code","b3ece98b":"code","6a751d65":"code","aeeaf808":"code","cbe18e62":"code","b2196a56":"code","1100a31b":"code","418a63ba":"code","558be67d":"code","d5df9c22":"code","e013adb4":"code","2e6fbbfc":"code","2c026701":"code","27716740":"code","e7d2fa1b":"code","7810385b":"code","dde37026":"markdown","cfe669f1":"markdown","92cdd8aa":"markdown","dba91f47":"markdown","3711a5b5":"markdown","6af98a52":"markdown","7ed4166f":"markdown","5bfe4cd0":"markdown","5cf2f97d":"markdown","bb72762c":"markdown","29ec3a32":"markdown","c1cedbb7":"markdown","324b3cf8":"markdown","d30481fd":"markdown","1ac2406e":"markdown","6c10e63f":"markdown","c59a9521":"markdown","86797a78":"markdown","cc821e3a":"markdown","6091a5d5":"markdown","b8d64711":"markdown","2d6961b4":"markdown","baf13761":"markdown","86955547":"markdown","042634fe":"markdown","5837b456":"markdown","da7dd19f":"markdown","a7e74e2e":"markdown","bd140246":"markdown","160b3fcd":"markdown","fb3c122e":"markdown","ddfc45ab":"markdown","33e6eca4":"markdown","b8c23275":"markdown","79e55a26":"markdown","c9d177be":"markdown","e9809aae":"markdown","dcde0e07":"markdown","765e6e6d":"markdown","0eeb4ddb":"markdown","cefad39b":"markdown","9fd04dff":"markdown","31e7dbca":"markdown","c4667bd9":"markdown","5ba0947b":"markdown","f6f59075":"markdown","aa26819c":"markdown","025b8a3d":"markdown","776c8f16":"markdown","97eaddd1":"markdown","967f4ae9":"markdown","1dcd9d00":"markdown","efbe2312":"markdown","10c7a073":"markdown","81dec687":"markdown","91a18881":"markdown","d9d7225b":"markdown","c29edba8":"markdown","f6d5c95e":"markdown","e9d85de8":"markdown","0cac80bb":"markdown","b011474b":"markdown","a585931f":"markdown","d8b7ad22":"markdown"},"source":{"7b12281f":"import numpy as np # linear algebra import pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport pandas as pd\nimport os\n# Any results you write to the current directory are saved as output.","abdc37c6":"%matplotlib inline \n\nimport matplotlib\nimport matplotlib.pyplot as plt \nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')","a73e268d":"df= pd.read_csv('..\/input\/novel-corona-virus-2019-dataset\/covid_19_data.csv')\ndf.head()","da6ca007":"df.shape","297643d0":"df.info()","83ee8cb1":"df['ObservationDate'] = pd.to_datetime(df['ObservationDate'])\ndf['Last Update'] = pd.to_datetime(df['Last Update'])\ndf['Confirmed']=df['Confirmed'].astype('int')\ndf['Deaths']=df['Deaths'].astype('int')\ndf['Recovered']=df['Recovered'].astype('int')\n","306b4114":"from datetime import date\nrecent=df[['ObservationDate']][-1:].max()\ndf_update=df.loc[df.ObservationDate==pd.Timestamp(recent['ObservationDate'])]\n#df_update=df.loc[df.ObservationDate<pd.Timestamp(date(2020,4,30))]\ndf_update","f43457a3":"df_update.isnull().sum()","bf770e6f":"df_update['Province\/State']=df_update.apply(lambda x: x['Country\/Region'] if pd.isnull(x['Province\/State']) else x['Province\/State'],axis=1)\ndf['Province\/State']=df.apply(lambda x: x['Country\/Region'] if pd.isnull(x['Province\/State']) else x['Province\/State'],axis=1)","8b3c117d":"df_update['Country\/Region']=df_update.apply(lambda x:'China' if x['Country\/Region']=='Mainland China' else x['Country\/Region'],axis=1)\ndf['Country\/Region']=df.apply(lambda x:'China' if x['Country\/Region']=='Mainland China' else x['Country\/Region'],axis=1)","e19e2794":"from sklearn.preprocessing import LabelEncoder\nle=LabelEncoder()\ndf_update['ProvinceID'] = le.fit_transform(df_update['Province\/State'])\ndf_update['CountryID']=le.fit_transform(df_update['Country\/Region'])\ndf_update.head()","a38b7688":"corr= df_update.corr()\nsns.heatmap(corr,annot=True)","47ec56d3":"print(df['Country\/Region'].unique())\nprint(\"\\nNumber of countries impacted by COVID 2019:\",len(df['Country\/Region'].unique()))","8e3ffc43":"fig = plt.figure(figsize=(10,10))\nconf_per_country = df_update.groupby('Country\/Region')['Confirmed'].sum().sort_values(ascending=False)\nconf_sum=df_update['Confirmed'].sum()\ndef absolute_value(val):\n    a  = val\n    return (np.round(a,2))\nconf_per_country.plot(kind=\"pie\",title='Percentage of confirmed cases per country',autopct=absolute_value)\n\nplt.show ()","bc8a5c99":"group_cases=df_update[['Confirmed','Recovered','Deaths','Country\/Region']].groupby('Country\/Region').sum().sort_values('Confirmed',ascending=False).head()\ngroup_cases=group_cases.reset_index()\ngroup_cases","064e6f62":"group_cases['Recovery Rate']=round(group_cases['Recovered'] \/ group_cases['Confirmed'],2)\ngroup_cases['Death Rate']=round(group_cases['Deaths'] \/ group_cases['Confirmed'],2)\ngroup_cases=group_cases.sort_values(by='Confirmed', ascending= False)\ngroup_cases.style.background_gradient(cmap='Greens')","e56c27cd":"f, ax = plt.subplots(figsize=(15, 10))\nbar1=sns.barplot(x=\"Confirmed\",y=\"Country\/Region\",data=group_cases,\n            label=\"Confirmed\", color=\"b\")\n\n\nbar2=sns.barplot(x=\"Recovered\", y=\"Country\/Region\", data=group_cases,\n            label=\"Recovered\", color=\"g\")\n\n\nbar3=sns.barplot(x=\"Deaths\", y=\"Country\/Region\", data=group_cases,\n            label=\"Deaths\", color=\"r\")\n\nax.legend(loc=4, ncol = 1)\nplt.xlabel(\"Confirmed Cases\")\nplt.show()","074477b8":"group_cases=df_update[['Recovered','Deaths','Country\/Region']].groupby('Country\/Region').sum().sort_values('Deaths',ascending=False).head(4)\ngroup_cases.plot(kind='bar',width=0.5,colormap='plasma',figsize=(20,10))\nplt.show()","2771a886":"china_cases=df_update.loc[df_update['Country\/Region']=='China']","c2cf7c7a":"china_province_cases=china_cases[['Confirmed','Recovered','Deaths','Province\/State']].groupby('Province\/State').sum().sort_values('Confirmed',ascending=False)\nchina_province_cases.plot(kind='bar',width=0.95,colormap='rainbow',figsize=(20,6))\nplt.show()","7b3d0b1c":"china_cases_complete=df.loc[df['Country\/Region']=='China']\nchina_cases_complete['date'] = china_cases_complete['ObservationDate'].dt.date\nchina_cases_complete['date']=pd.to_datetime(china_cases_complete['date'])\nchina_cases_complete = china_cases_complete[china_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = china_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot.plot(figsize=(8,8),title='Per Day statistics for China',colormap='rainbow',marker='o')\nplt.show()","c4eab94f":"num_plot_china=num_plot.reset_index()\nnum_plot_china['Death Case Increase']=0\nnum_plot_china['Confirmed Case Increase']=0\nnum_plot_china['Confirmed Case Increase'][0]=0\nnum_plot_china['Death Case Increase'][0]=0\nfor i in range(1,num_plot_china.shape[0]):\n    num_plot_china['Confirmed Case Increase'][i]=-(num_plot_china.iloc[i-1][1]-num_plot_china.iloc[i][1])\n    num_plot_china['Death Case Increase'][i]=-(num_plot_china.iloc[i-1][3]-num_plot_china.iloc[i][3])\nnum_plot_china.tail()\n    ","c3ac639a":"num_plot_china['Confirmed Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Confirmed Case Increase',colormap='rainbow')\nplt.show()","17d45959":"num_plot_china['Death Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Death Case Increase',colormap='rainbow')\nplt.show()","04b17cb0":"hubei_cases_complete=df.loc[df['Province\/State']=='Hubei']\nhubei_cases_complete['date'] = hubei_cases_complete['ObservationDate'].dt.date\nhubei_cases_complete['date']=pd.to_datetime(hubei_cases_complete['date'])\nhubei_cases_complete = hubei_cases_complete[hubei_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = hubei_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot.plot(figsize=(8,8),title='Per Day statistics for Hubei',colormap='rainbow',marker='o')\nplt.show()","fc317906":"global_cases_complete=df.loc[~(df['Country\/Region']=='China')]\nglobal_cases_complete['date'] = global_cases_complete['ObservationDate'].dt.date\nglobal_cases_complete['date']=pd.to_datetime(global_cases_complete['date'])\nglobal_cases_complete = global_cases_complete[global_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = global_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot.plot(figsize=(8,8),title='Per Day statistics for World',colormap='viridis',marker='o')\nplt.show()","963525ad":"num_plot_global=num_plot.reset_index()\nnum_plot_global['Death Case Increase']=0\nnum_plot_global['Confirmed Case Increase']=0\nnum_plot_global['Confirmed Case Increase'][0]=0\nnum_plot_global['Death Case Increase'][0]=0\nfor i in range(1,num_plot_global.shape[0]):\n    num_plot_global['Confirmed Case Increase'][i]=-(num_plot_global.iloc[i-1][1]-num_plot_global.iloc[i][1])\n    num_plot_global['Death Case Increase'][i]=-(num_plot_global.iloc[i-1][3]-num_plot_global.iloc[i][3])\nnum_plot_global.tail(10)","a2bbf164":"num_plot_global['Confirmed Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Confirmed Case Increase',colormap='viridis')\nplt.show()","677a6fea":"num_plot_global['Death Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Death Case Increase',colormap='viridis')\nplt.show()","95a5db0c":"italy_cases_complete=df.loc[df['Country\/Region']=='Italy']\nitaly_cases_complete['date'] = italy_cases_complete['ObservationDate'].dt.date\nitaly_cases_complete['date']=pd.to_datetime(italy_cases_complete['date'])\nitaly_cases_complete = italy_cases_complete[italy_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = italy_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot.plot(figsize=(8,8),title='Per Day statistics for Italy',marker='o')\nplt.show()","5a3b548a":"num_plot_italy=num_plot.reset_index()\nnum_plot_italy['Death Case Increase']=0\nnum_plot_italy['Confirmed Case Increase']=0\nnum_plot_italy['Confirmed Case Increase'][0]=0\nnum_plot_italy['Death Case Increase'][0]=0\nfor i in range(1,num_plot_italy.shape[0]):\n    num_plot_italy['Confirmed Case Increase'][i]=-(num_plot_italy.iloc[i-1][1]-num_plot_italy.iloc[i][1])\n    num_plot_italy['Death Case Increase'][i]=-(num_plot_italy.iloc[i-1][3]-num_plot_italy.iloc[i][3])\nnum_plot_italy.tail()","3757cbee":"num_plot_italy['Confirmed Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Confirmed Case Increase')\nplt.show()","462dddb9":"num_plot_italy['Death Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),title='Death Case Increase')\nplt.show()","fab2c604":"us_cases_complete=df.loc[df['Country\/Region']=='US']\nus_cases_complete['date'] = us_cases_complete['ObservationDate'].dt.date\nus_cases_complete['date']=pd.to_datetime(us_cases_complete['date'])\nus_cases_complete = us_cases_complete[us_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = us_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot.plot(figsize=(8,8),title='Per Day statistics for US',colormap='cool',marker='o')\nplt.show()","add7a6a8":"num_plot_us=num_plot.reset_index()\nnum_plot_us['Death Case Increase']=0\nnum_plot_us['Confirmed Case Increase']=0\nnum_plot_us['Confirmed Case Increase'][0]=0\nnum_plot_us['Death Case Increase'][0]=0\nfor i in range(1,num_plot_us.shape[0]):\n    num_plot_us['Confirmed Case Increase'][i]=-(num_plot_us.iloc[i-1][1]-num_plot_us.iloc[i][1])\n    num_plot_us['Death Case Increase'][i]=-(num_plot_us.iloc[i-1][3]-num_plot_us.iloc[i][3])\nnum_plot_us.tail()","914f582a":"num_plot_us['Confirmed Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),colormap='cool',title='Confirmed Case Increase')\nplt.show()","44b89dc1":"num_plot_us['Death Case Increase'].plot(kind='bar',width=0.95,figsize=(20,6),colormap='cool',title='Death Case Increase')\nplt.show()","d12cc752":"india_cases_complete=df.loc[df['Country\/Region']=='India']\nindia_cases_complete['date'] = india_cases_complete['ObservationDate'].dt.date\nindia_cases_complete['date']=pd.to_datetime(india_cases_complete['date'])\nindia_cases_complete = india_cases_complete[india_cases_complete['date'] > pd.Timestamp(date(2020,1,21))]\nnum_plot = india_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot['Confirmed'][132]=287154\nnum_plot['Recovered'][132]=140928\nnum_plot['Deaths'][132]=8106\nnum_plot['Confirmed'][134]=309595\nnum_plot['Recovered'][134]=154235\nnum_plot['Deaths'][134]=8888\nnum_plot['Confirmed'][135]=321634\nnum_plot['Recovered'][135]=162327\nnum_plot['Deaths'][135]=9197\nnum_plot['Confirmed'][136]=333039\nnum_plot['Recovered'][136]=169684\nnum_plot['Deaths'][136]=9521\nnum_plot['Confirmed'][137]=343071\nnum_plot['Recovered'][137]=180324\nnum_plot['Deaths'][137]=9917\nnum_plot.plot(figsize=(8,8),colormap='winter',title='Per Day statistics for India',marker='o')\nnum_plot_india=num_plot.reset_index()\n","6ba31409":"num_plot_india['Confirmed Case Increase']=0\nnum_plot_india['Death Case Increase']=0\n#num_plot_india['Confirmed'][132]=287154\n#num_plot_india['Recovered'][132]=140928\n#num_plot_india['Deaths'][132]=8106\n#num_plot_india['Confirmed'][134]=309595\n#num_plot_india['Recovered'][134]=154235\n#num_plot_india['Deaths'][134]=8888\n#num_plot_india['Confirmed'][135]=321634\n#num_plot_india['Recovered'][135]=162327\n#num_plot_india['Deaths'][135]=9197\n#num_plot_india['Confirmed'][136]=333039\n#num_plot_india['Recovered'][136]=153792\n#num_plot_india['Deaths'][136]=9521\n#num_plot_india['Confirmed'][137]=343071\n#num_plot_india['Recovered'][137]=180324\n#num_plot_india['Deaths'][137]=9917\n\nnum_plot_india['Confirmed'][229]=4930236\nnum_plot_india['Recovered'][229]=3859399\nnum_plot_india['Deaths'][229]=80776\n\nfor i in range(1,num_plot_india.shape[0]):\n    num_plot_india['Confirmed Case Increase'][i]=-(num_plot_india.iloc[i-1][1]-num_plot_india.iloc[i][1])\n    num_plot_india['Death Case Increase'][i]=-(num_plot_india.iloc[i-1][3]-num_plot_india.iloc[i][3])\nnum_plot_india.drop(227,axis=0,inplace=True)\nnum_plot_india.tail(20)","cf3276f2":"num_plot_india['Confirmed Case Increase'].plot(kind='bar',width=0.95,colormap='winter',figsize=(20,6),title='Confirmed Case Increase')\nplt.show()","6cacb88e":"num_plot_india['Death Case Increase'].plot(kind='bar',width=0.95,colormap='winter',figsize=(20,6),title='Death Case Increase')\nplt.show()","41780b0a":"from sklearn.preprocessing import LabelEncoder\nfrom plotly.offline import iplot, init_notebook_mode\nimport math\nimport bokeh \nimport matplotlib.pyplot as plt\nimport plotly.express as px\nfrom urllib.request import urlopen\nimport json\nfrom dateutil import parser\nfrom bokeh.layouts import gridplot\nfrom bokeh.plotting import figure, show, output_file\nfrom bokeh.layouts import row, column\nfrom bokeh.resources import INLINE\nfrom bokeh.io import output_notebook\nfrom bokeh.models import Span\nimport warnings\nwarnings.filterwarnings(\"ignore\")\noutput_notebook(resources=INLINE)\nle=LabelEncoder()\n\ndf.rename(columns={'Country\/Region': 'Country', 'ObservationDate': 'Date'}, inplace=True)\ndf = df.fillna('unknown')\ndf['Country'] = df['Country'].str.replace('US','United States')\ndf['Country'] = df['Country'].str.replace('UK','United Kingdom') \ndf['Country'] = df['Country'].str.replace('Mainland China','China')\ndf['Code']=le.fit_transform(df['Country'])\nvirus_data = df\n#print(virus_data.head())\n#print(len(virus_data))\n\ntop_country = virus_data.loc[virus_data['Date'] == virus_data['Date'].iloc[-1]]\ntop_country = top_country.groupby(['Code','Country'])['Confirmed'].sum().reset_index()\ntop_country = top_country.sort_values('Confirmed', ascending=False)\ntop_country = top_country[:100]\ntop_country_codes = top_country['Country']\ntop_country_codes = list(top_country_codes)\n#print(top_country)\n\ncountries = virus_data[virus_data['Country'].isin(top_country_codes)]\ncountries_day = countries.groupby(['Date','Code','Country'])['Confirmed','Deaths','Recovered'].sum().reset_index()\n#print(countries_day)\n\n\nexponential_line_x = []\nexponential_line_y = []\nfor i in range(16):\n    exponential_line_x.append(i)\n    exponential_line_y.append(i)\n\nchina = countries_day.loc[countries_day['Code']==43]\n\nnew_confirmed_cases_china = []\nnew_confirmed_cases_china.append( list(china['Confirmed'])[0] - list(china['Deaths'])[0] \n                           - list(china['Recovered'])[0] )\n\nfor i in range(1,len(china)):\n\n    new_confirmed_cases_china.append( list(china['Confirmed'])[i] - \n                                     list(china['Deaths'])[i] - \n                                     list(china['Recovered'])[i])\n    \n    \nitaly = countries_day.loc[countries_day['Code']==102]\n\nnew_confirmed_cases_ita = []\nnew_confirmed_cases_ita.append( list(italy['Confirmed'])[0] - list(italy['Deaths'])[0] \n                           - list(italy['Recovered'])[0] )\n\nfor i in range(1,len(italy)):\n    \n    new_confirmed_cases_ita.append( list(italy['Confirmed'])[i] - \n                                  list(italy['Deaths'])[i] - \n                                  list(italy['Recovered'])[i])\n    \n    \nskorea = countries_day.loc[countries_day['Code']==186]\n\nnew_confirmed_cases_skorea = []\nnew_confirmed_cases_skorea.append( list(skorea['Confirmed'])[0] - list(skorea['Deaths'])[0] \n                           - list(skorea['Recovered'])[0] )\n\nfor i in range(1,len(skorea)):\n    \n    new_confirmed_cases_skorea.append( list(skorea['Confirmed'])[i] - \n                                     list(skorea['Deaths'])[i] - \n                                    list(skorea['Recovered'])[i])\n    \n    \nindia = countries_day.loc[countries_day['Code']==96]\n\nnew_confirmed_cases_india = []\nnew_confirmed_cases_india.append( list(india['Confirmed'])[0] - list(india['Deaths'])[0] \n                           - list(india['Recovered'])[0] )\n\nfor i in range(1,len(india)):\n    \n    new_confirmed_cases_india.append( list(india['Confirmed'])[i] - \n                                     list(india['Deaths'])[i] - \n                                    list(india['Recovered'])[i])\n    \n\nspain = countries_day.loc[countries_day['Code']==188]\n\nnew_confirmed_cases_spain = []\nnew_confirmed_cases_spain.append( list(spain['Confirmed'])[0] - list(spain['Deaths'])[0] \n                           - list(spain['Recovered'])[0] )\n\nfor i in range(1,len(spain)):\n    \n    new_confirmed_cases_spain.append( list(spain['Confirmed'])[i] - \n                                     list(spain['Deaths'])[i] - \n                                    list(spain['Recovered'])[i])\n    \n\nus = countries_day.loc[countries_day['Code']==211]\n\nnew_confirmed_cases_us = []\nnew_confirmed_cases_us.append( list(us['Confirmed'])[0] - list(us['Deaths'])[0] \n                           - list(us['Recovered'])[0] )\n\nfor i in range(1,len(us)):\n    \n    new_confirmed_cases_us.append( list(us['Confirmed'])[i] - \n                                     list(us['Deaths'])[i] - \n                                    list(us['Recovered'])[i])\n    \n    \ngerman = countries_day.loc[countries_day['Code']==77]\n\nnew_confirmed_cases_german = []\nnew_confirmed_cases_german.append( list(german['Confirmed'])[0] - list(german['Deaths'])[0] \n                           - list(german['Recovered'])[0] )\n\nfor i in range(1,len(german)):\n    \n    new_confirmed_cases_german.append( list(german['Confirmed'])[i] - \n                                     list(german['Deaths'])[i] - \n                                    list(german['Recovered'])[i])\n    \np1=figure(plot_width=800, plot_height=550, title=\"COVID 2019 Trajectories for Countries\")\np1.grid.grid_line_alpha=0.3\np1.xaxis.axis_label = 'Total number of Confirmed Cases (Log scale)'\np1.yaxis.axis_label = 'Total number of active cases (Log scale)'\n\n\np1.line(exponential_line_x, exponential_line_y, line_dash=\"4 4\", line_width=1)\n\np1.line(np.log(list(china['Confirmed'])), np.log(new_confirmed_cases_china), color='red', \n        legend_label='China', line_width=3)\np1.circle(np.log(list(china['Confirmed'])[-1]), np.log(new_confirmed_cases_china[-1]), size=5)\n\np1.line(np.log(list(italy['Confirmed'])), np.log(new_confirmed_cases_ita), color='blue', \n        legend_label='Italy', line_width=3)\np1.circle(np.log(list(italy['Confirmed'])[-1]), np.log(new_confirmed_cases_ita[-1]), size=5)\n\n\n\np1.line(np.log(list(skorea['Confirmed'])), np.log(new_confirmed_cases_skorea), color='violet', \n        legend_label='South Korea', line_width=3)\np1.circle(np.log(list(skorea['Confirmed'])[-1]), np.log(new_confirmed_cases_skorea[-1]), size=5)\n\n\np1.line(np.log(list(india['Confirmed'])), np.log(new_confirmed_cases_india), color='orange', \n        legend_label='India', line_width=3)\np1.circle(np.log(list(india['Confirmed'])[-1]), np.log(new_confirmed_cases_india[-1]), size=5)\n\np1.line(np.log(list(spain['Confirmed'])), np.log(new_confirmed_cases_spain), color='brown', \n        legend_label='Spain', line_width=3)\np1.circle(np.log(list(spain['Confirmed'])[-1]), np.log(new_confirmed_cases_spain[-1]), size=5)\n\np1.line(np.log(list(us['Confirmed'])), np.log(new_confirmed_cases_us), color='green', \n        legend_label='United States', line_width=3)\np1.circle(np.log(list(us['Confirmed'])[-1]), np.log(new_confirmed_cases_us[-1]), size=5)\n\np1.line(np.log(list(german['Confirmed'])), np.log(new_confirmed_cases_german), color='black', \n        legend_label='Germany', line_width=3)\np1.circle(np.log(list(german['Confirmed'])[-1]), np.log(new_confirmed_cases_german[-1]), size=5)\n\np1.legend.location = \"bottom_right\"\n#output_file(\"coronavirus.html\", title=\"COVID2019 Trajectory\")\nshow(p1)\n\n\n","f4a53759":"import requests\nimport io\nage_group = pd.read_csv('..\/input\/covid19-in-india\/AgeGroupDetails.csv')\nindia_covid = pd.read_csv('..\/input\/covid19-in-india\/covid_19_india.csv')\nindia_covid.to_csv('india_cases.csv',date_format='%Y-%m-%d')\nindia_covid_19=pd.read_csv('.\/india_cases.csv')\n#india_covid_19 = pd.read_csv('..\/input\/statewisetestingdetailsindiacsv\/covid_19_india.csv',sep=',')\nhospital_beds = pd.read_csv('..\/input\/covid19-in-india\/HospitalBedsIndia.csv')\nindividual_details = pd.read_csv('..\/input\/covid19-in-india\/IndividualDetails.csv')\n#ICMR_details = pd.read_csv('..\/input\/covid19-in-india\/ICMRTestingDetails.csv')\nICMR_labs = pd.read_csv('..\/input\/covid19-in-india\/ICMRTestingLabs.csv')\nstate_testing = pd.read_csv('..\/input\/statewisetestingdetailsindiacsv\/statewise_tested_numbers_data.csv')\n","2a95bab4":"india_covid_19.tail()","1204608d":"#Removal of 'Unassigned' State\/UnionTerritory\nindia_covid_19.rename(columns={'State\/UnionTerritory': 'State', 'Cured': 'Recovered'}, inplace=True)\nunassigned=india_covid_19[india_covid_19['State']=='Unassigned'].index\nindia_covid_19.drop(unassigned,axis=0,inplace=True)\nunassigned1=india_covid_19[india_covid_19['State']=='Nagaland#'].index\nindia_covid_19.drop(unassigned1,axis=0,inplace=True)\nunassigned2=india_covid_19[india_covid_19['State']=='Jharkhand#'].index\nindia_covid_19.drop(unassigned2,axis=0,inplace=True)\nunassigned3=india_covid_19[india_covid_19['State']=='Madhya Pradesh#'].index\nindia_covid_19.drop(unassigned3,axis=0,inplace=True)\nunassigned4=india_covid_19[india_covid_19['State']=='Cases being reassigned to states'].index\nindia_covid_19.drop(unassigned4,axis=0,inplace=True)\nunassigned5=india_covid_19[india_covid_19['State']=='Telengana***'].index\nindia_covid_19.drop(unassigned5,axis=0,inplace=True)\nunassigned6=india_covid_19[india_covid_19['State']=='Telangana***'].index\nindia_covid_19.drop(unassigned6,axis=0,inplace=True)\nunassigned7=india_covid_19[india_covid_19['State']=='Telangana'].index\nindia_covid_19.drop(unassigned7,axis=0,inplace=True)\nunassigned8=india_covid_19[india_covid_19['State']=='Dadar Nagar Haveli'].index\nindia_covid_19.drop(unassigned8,axis=0,inplace=True)\nunassigned9=india_covid_19[india_covid_19['State']=='Daman & Diu'].index\nindia_covid_19.drop(unassigned9,axis=0,inplace=True)","71ccf9ff":"#india_covid_19['Date'] = pd.to_datetime(india_covid_19['Date'],errors='coerce')\n#statec=india_covid_19.loc[india_covid_19.Date<pd.Timestamp(date(2020,4,30))]\nstatewise_cases = pd.DataFrame(india_covid_19.groupby(['State'])['Confirmed', 'Deaths', 'Recovered'].max().reset_index())\nstatewise_cases[\"Country\"] = \"India\" \nfig = px.treemap(statewise_cases, path=['Country','State'], values='Confirmed',color='Confirmed', hover_data=['State'])\nfig.show()","4a9d7eeb":"labels = ['Male', 'Female']\nsizes = []\nsizes.append(list(individual_details['gender'].value_counts())[0])\nsizes.append(list(individual_details['gender'].value_counts())[1])\nexplode = (0.05, 0)\ncolors = ['#ffcc99','#66b3ff']\nplt.figure(figsize= (8,8))\nplt.pie(sizes, explode=explode, labels=labels,colors=colors, autopct='%1.1f',startangle=90)\nplt.title('Percentage of Gender (Ignoring the Missing Values)',fontsize = 10)\nplt.show ()","c687335e":"fig = plt.figure(figsize=(10,10))\nage_group=age_group.iloc[0:9,:]\nage_dist_india = age_group.groupby('AgeGroup')['Sno'].sum().sort_values(ascending=False)\ndef absolute_value(val):\n    a  = val\n    return (np.round(a,2))\nage_dist_india.plot(kind=\"pie\",title='Case Distribution by Age (Ignoring Missing values)',autopct=absolute_value,colormap='Paired',startangle=90)\n\nplt.show ()","46f2ddd7":"india_covid_19['Deaths']=india_covid_19['Deaths'].replace(['0#','NaN'],0)\nindia_covid_19['Deaths']=india_covid_19['Deaths'].astype('int')","83e3c169":"state_details = pd.pivot_table(india_covid_19, values=['Confirmed','Deaths','Recovered'], index='State', aggfunc='max')\nstate_details['Recovery Rate'] = round(state_details['Recovered'] \/ state_details['Confirmed'],2)\nstate_details['Death Rate'] = round(state_details['Deaths'] \/state_details['Confirmed'], 2)\nstate_details = state_details.sort_values(by='Confirmed', ascending= False)\nstate_details.style.background_gradient(cmap='Purples')","ecbca479":"testing=state_testing.groupby('State')['Total Tested'].max().sort_values(ascending=False).reset_index()\nfig = px.bar(testing, \n             x=\"Total Tested\",\n             y=\"State\", \n             orientation='h',\n             height=800,\n             title='Statewise Testing',\n            color='State')\nfig.show()","6cdbb85f":"state_testing=state_testing.fillna(0)\nstate_test_details = pd.pivot_table(state_testing, values=['Total Tested','Positive','Negative'], index='State', aggfunc='max')\nstate_test_details['Positive Test Rate'] = round(state_test_details['Positive'] \/ state_test_details['Total Tested'],2)\n#state_test_details['Negative Test Rate'] = round(state_test_details['Negative'] \/state_test_details['Total Tested'])\nstate_test_details = state_test_details.sort_values(by='Total Tested', ascending= False)\nstate_test_details.style.background_gradient(cmap='Blues')","d2beb62b":"values = list(ICMR_labs['state'].value_counts())\nstates = list(ICMR_labs['state'].value_counts().index)\nlabs = pd.DataFrame(list(zip(values, states)), \n               columns =['values', 'states'])\nfig = px.bar(labs, \n             x=\"values\",\n             y=\"states\", \n             orientation='h',\n             height=1000,\n             title='Statewise Labs',\n            color='states')\nfig.show()","999b5e55":"from plotly.subplots import make_subplots\nimport plotly.graph_objects as go\nhospital_beds_states =hospital_beds.drop([36])\ncols_object = list(hospital_beds_states.columns[2:8])\nfor cols in cols_object:\n    hospital_beds_states[cols] = hospital_beds_states[cols].astype(int,errors = 'ignore')\ntop_5_primary = hospital_beds_states.nlargest(5,'NumPrimaryHealthCenters_HMIS')\ntop_5_community = hospital_beds_states.nlargest(5,'NumCommunityHealthCenters_HMIS')\ntop_5_district_hospitals = hospital_beds_states.nlargest(5,'NumDistrictHospitals_HMIS')\ntop_5_public_facility = hospital_beds_states.nlargest(5,'TotalPublicHealthFacilities_HMIS')\ntop_5_public_beds = hospital_beds_states.nlargest(5,'NumPublicBeds_HMIS')\ntop_rural_hos = hospital_beds_states.nlargest(5,'NumRuralHospitals_NHP18')\ntop_rural_beds = hospital_beds_states.nlargest(5,'NumRuralBeds_NHP18')\ntop_urban_hos = hospital_beds_states.nlargest(5,'NumUrbanHospitals_NHP18')\ntop_urban_beds = hospital_beds_states.nlargest(5,'NumUrbanBeds_NHP18')\n\nplt.figure(figsize=(30,30))\nplt.suptitle('Health Facilities in Top 5 States',fontsize=30)\nplt.subplot(231)\nplt.title('Primary Health Centers',fontsize=25)\nplt.barh(top_5_primary['State\/UT'],top_5_primary['NumPrimaryHealthCenters_HMIS'],color ='blue');\n\nplt.subplot(232)\nplt.title('Community Health Centers',fontsize=25)\nplt.barh(top_5_community['State\/UT'],top_5_community['NumCommunityHealthCenters_HMIS'],color = 'blue');\n\nplt.subplot(233)\nplt.title('Public Health Facilities',fontsize=25)\nplt.barh(top_5_public_facility['State\/UT'],top_5_public_facility['TotalPublicHealthFacilities_HMIS'],color='blue');\n\nplt.subplot(234)\nplt.title('District Hospitals',fontsize=25)\nplt.barh(top_5_district_hospitals['State\/UT'],top_5_district_hospitals['NumDistrictHospitals_HMIS'],color = 'orange');\n\nplt.subplot(235)\nplt.title('Rural Hospitals',fontsize=25)\nplt.barh(top_rural_hos['State\/UT'],top_rural_hos['NumRuralHospitals_NHP18'],color = 'orange');\nplt.subplot(236)\nplt.title('Urban Hospitals',fontsize=25)\nplt.barh(top_urban_hos['State\/UT'],top_urban_hos['NumUrbanHospitals_NHP18'],color = 'orange');\nplt.tight_layout(rect=[0, 0.03, 1, 0.95])\n\n\n","23a0efd2":"\nplt.figure(figsize=(27,15))\nplt.suptitle('Number of Beds in Top 5 States',fontsize=30);\nplt.subplot(131)\nplt.title('Rural Beds',fontsize=25)\nplt.barh(top_rural_beds['State\/UT'],top_rural_beds['NumRuralBeds_NHP18'],color = 'orange');\n\nplt.subplot(132)\nplt.title('Urban Beds',fontsize=25)\nplt.barh(top_urban_beds['State\/UT'],top_urban_beds['NumUrbanBeds_NHP18'],color = 'blue');\nplt.subplot(133)\nplt.title('Public Beds',fontsize=25)\nplt.barh(top_5_public_beds['State\/UT'],top_5_public_beds['NumPublicBeds_HMIS'],color = 'purple');\nplt.tight_layout(rect=[0, 0.03, 1, 0.95])\n","e6da46b6":"#Current number of confirmed cases\nax = num_plot_india['Confirmed'].plot(title=\"Confirmed Cases in India\",figsize=(8,8));\nax.set(xlabel=\"Date\", ylabel=\"Confirmed Cases\");","57a75ce3":"train = num_plot_india.iloc[:-3,:2]\ntest = num_plot_india.iloc[-3:,:2]\n","affe07d5":"#num_plot_india.iloc[190:]","0e622e94":"train.rename(columns={\"date\":\"ds\",\"Confirmed\":\"y\"},inplace=True)\ntest.rename(columns={\"date\":\"ds\",\"Confirmed\":\"y\"},inplace=True)\ntest = test.set_index(\"ds\")\ntest = test['y']","aeab843b":"from fbprophet import Prophet\npd.plotting.register_matplotlib_converters()\nmodel = Prophet(changepoint_prior_scale=0.4, changepoints=['2020-04-09','2020-04-15','2020-04-24','2020-05-05','2020-05-17','2020-05-31','2020-06-18','2020-07-08','2020-07-28','2020-08-21','2020-09-20'])\nmodel.fit(train)","9a3e6848":"future_dates = model.make_future_dataframe(periods=20)\nforecast =  model.predict(future_dates)\nax = forecast.plot(x='ds',y='yhat',label='Predicted Confirmed Case',legend=True,figsize=(10,10))\ntest.plot(y='y',label='Actual Confirmed Cases',legend=True,ax=ax)","66f8e016":"from fbprophet.diagnostics import performance_metrics\nfrom fbprophet.diagnostics import cross_validation\ndf_cv = cross_validation(model, initial='90 days', period='40 days', horizon = '3 days')\ndf_cv.head()\ndf_p = performance_metrics(df_cv)\ndf_p.head()\n","a44f87a6":"forecast.tail(15)","5299f976":"from fbprophet import Prophet\nmodel_india = Prophet(growth=\"logistic\",changepoint_prior_scale=0.4,changepoints=['2020-04-09','2020-04-15','2020-04-24','2020-05-05','2020-05-17','2020-05-31','2020-06-18','2020-07-08','2020-07-28','2020-08-21','2020-09-20'])\npop = 1380004385 #from worldometers\ntrain['cap'] = pop\nmodel_india.fit(train)\n# Future Prediction\nfuture_dates = model_india.make_future_dataframe(periods=300)\nfuture_dates['cap'] = pop\nforecast =  model_india.predict(future_dates)\n# Plotting\nax = forecast.plot(x='ds',y='yhat',label='Predicted Confirmed Cases',legend=True,figsize=(10,10))\ntest.plot(y='y',label='Actual Confirmed Counts',legend=True,ax=ax)\nax.set(xlabel=\"Date\", ylabel=\"Confirmed Cases\");","ff672067":"forecast.iloc[270:300]","0c034051":"from statsmodels.tsa.arima_model import ARIMA\nimport datetime\narima = ARIMA(train['y'], order=(3, 1, 0))\narima = arima.fit(trend='nc', full_output=True, disp=True)\nforecast = arima.forecast(steps= 30)\npred = list(forecast[0])\nstart_date = train['ds'].max()\nprediction_dates = []\nfor i in range(30):\n    date = start_date + datetime.timedelta(days=1)\n    prediction_dates.append(date)\n    start_date = date\nplt.figure(figsize= (20,10))\nplt.xlabel(\"Dates\",fontsize = 10)\nplt.ylabel('Total cases',fontsize = 10)\nplt.title(\"Predicted Values for the next 25 Days\" , fontsize = 20)\n\nplt.plot_date(y= pred,x= prediction_dates,linestyle ='dashed',color = 'blue',label = 'Predicted')\nplt.plot_date(y=train['y'].tail(15),x=train['ds'].tail(15),linestyle = '-',color = 'orange',label = 'Actual')\n\n","8210b85a":"pred=pd.DataFrame(forecast[0],columns=['Predicted'])\ndates=pd.DataFrame(prediction_dates,columns=['Date'])\narima_df=pd.merge(dates,pred,right_index=True,left_index=True)\narima_df.tail(30)","9a9128c8":"test=test.reset_index()","d41b1f6e":"df1=pd.DataFrame(forecast[0],columns=['yhat'])\ndf2=pd.DataFrame(prediction_dates,columns=['ds'])\ndf3=test['y']\ndf4=pd.merge(df2,df3,right_index=True,left_index=True)\ndf5=pd.merge(df4,df1,right_index=True,left_index=True)","6572fe18":"df5['mse'],df5['rmse'],df5['mae'],df5['mape'],df5['mdape']=[0,0,0,0,0]","1443ee14":"for t in range(len(test)):\n    mape =  np.mean(np.abs(df5['yhat'][t] - df5['y'][t])\/np.abs(df5['y'][t]))\n    df5['mape'][t]=\"{:.5f}\".format(mape)\n    mdape =  np.median(np.abs(df5['yhat'][t] - df5['y'][t])\/np.abs(df5['y'][t]))\n    df5['mdape'][t]=\"{:.5f}\".format(mdape)\n    mae = np.mean(np.abs(df5['yhat'][t] - df5['y'][t]))\n    df5['mae'][t]=mae\n    mse = np.mean((df5['yhat'][t] - df5['y'][t])**2)\n    df5['mse'][t]=mse\n    rmse = np.mean((df5['yhat'][t] - df5['y'][t])**2)**.5\n    df5['rmse'][t]=rmse","b3ece98b":"df5","6a751d65":"\nnum_plot = india_cases_complete.groupby('date')[\"Confirmed\", \"Recovered\", \"Deaths\"].sum()\nnum_plot['Confirmed'][132]=287154\nnum_plot['Recovered'][132]=140928\nnum_plot['Deaths'][132]=8106\nnum_plot['Confirmed'][134]=309595\nnum_plot['Recovered'][134]=154235\nnum_plot['Deaths'][134]=8888\nnum_plot['Confirmed'][135]=321634\nnum_plot['Recovered'][135]=162327\nnum_plot['Deaths'][135]=9197\nnum_plot['Confirmed'][136]=333039\nnum_plot['Recovered'][136]=169684\nnum_plot['Deaths'][136]=9521\nnum_plot['Confirmed'][137]=343071\nnum_plot['Recovered'][137]=180324\nnum_plot['Deaths'][137]=9917\nnum_plot_india=num_plot.reset_index()\nnum_plot_india['Active']=0\nfor i in range(len(num_plot_india)):\n    num_plot_india['Active'][i]=num_plot_india['Confirmed'][i]-num_plot_india['Recovered'][i]-num_plot_india['Deaths'][i]\nnum_plot_india","aeeaf808":"train_bed=pd.DataFrame(columns=['ds','y'])\ntest_bed=pd.DataFrame(columns=['ds','y'])\ntrain_bed_y= num_plot_india.iloc[:-3,-1:]\ntrain_bed_ds = num_plot_india.iloc[:-3,:1]\ntrain_bed=pd.merge(train_bed_ds,train_bed_y,right_index=True,left_index=True)\ntrain_bed.rename(columns={'date': 'ds', 'Active': 'y'}, inplace=True)\ntest_bed_y = num_plot_india.iloc[-3:,-1:]\ntest_bed_ds = num_plot_india.iloc[-3:,:1]\ntest_bed=pd.merge(test_bed_ds,test_bed_y,right_index=True,left_index=True)\ntest_bed.rename(columns={'date': 'ds', 'Active': 'y'}, inplace=True)","cbe18e62":"test_bed = test_bed.set_index(\"ds\")\ntest_bed = test_bed['y']","b2196a56":"num_bed=hospital_beds.iloc[36][7]+hospital_beds.iloc[36][9]+hospital_beds.iloc[36][11]\nmodel_bed = Prophet(growth = \"logistic\",changepoints=['2020-04-09','2020-04-15','2020-04-24','2020-05-05','2020-05-17','2020-05-31','2020-06-18','2020-07-08','2020-07-28','2020-08-21','2020-09-20'])\nbed_cap = num_bed \ntrain_bed['cap'] = bed_cap\nmodel_bed.fit(train_bed)\n# Future Prediction\nfuture_dates = model_bed.make_future_dataframe(periods=200)\nfuture_dates['cap'] = bed_cap\nforecast =  model_bed.predict(future_dates)\n# Plotting\nax = forecast.plot(x='ds',y='yhat',label='Predicted Active Cases',legend=True,figsize=(10,10))\ntest_bed.plot(y='y',label='Actual Active Counts',legend=True,ax=ax)\nax.set(xlabel=\"Date\", ylabel=\"Active Cases\");","1100a31b":"forecast.iloc[230:250]","418a63ba":"hospital_beds_active=hospital_beds\nhospital_beds_active['Total_Beds']=0","558be67d":"for i in range(len(hospital_beds_active)):\n    hospital_beds_active['Total_Beds'][i]=hospital_beds.iloc[i][7]+hospital_beds.iloc[i][9]+hospital_beds.iloc[i][11]","d5df9c22":"india_covid_19['Active'] = india_covid_19['Confirmed'] - india_covid_19['Deaths']- india_covid_19['Recovered']\nindia_state_cases=pd.DataFrame()\nindia_covid_19['Date'] = pd.to_datetime(india_covid_19['Date'],errors='coerce')\nstates =list(india_covid_19['State'].unique())\nfor state in states:\n    mah_cases_complete=india_covid_19.loc[india_covid_19['State']==state]\n    mah_cases_complete['Date'] = mah_cases_complete['Date'].dt.strftime(\"%Y-%m-%d\")\n    mah_cases_complete['Date']=pd.to_datetime(mah_cases_complete['Date'])\n    mah_cases_complete = mah_cases_complete[(pd.Timestamp(datetime.date(2020,3,21)) < mah_cases_complete['Date']) & ( mah_cases_complete['Date']< pd.Timestamp(datetime.date(2020,9,23)))]\n    india_state_cases=india_state_cases.append(mah_cases_complete)\n\nindia_state_cases.sample(10)\n","e013adb4":"\nfor state in states:\n    beds_vs_active=india_state_cases.loc[india_state_cases['State']==state]\n    active=india_state_cases.groupby(['State'])['Active'].max()\n    beds=hospital_beds_active.groupby(['State\/UT'])['Total_Beds'].max()\n    beds_vs_active=pd.merge(active,beds,right_index=True,left_index=True)\nbeds_vs_active=beds_vs_active.reset_index()\nbva=beds_vs_active[['Total_Beds','Active','index']].groupby('index').max().sort_values('Total_Beds',ascending=False).head(10)\nbva.plot(kind='bar',width=0.6,colormap='bwr',figsize=(10,6))\nplt.xlabel('States')\nplt.show()","2e6fbbfc":"num_bed_mah=hospital_beds_active.loc[hospital_beds_active['State\/UT']=='Maharashtra']['Total_Beds']\nnum_bed_mah=num_bed_mah.iloc[0]\nnum_mah=india_state_cases.loc[india_state_cases['State']=='Maharashtra'][['Date','Active']]\ntrain_bed_mah=pd.DataFrame(columns=['ds','y'])\ntest_bed_mah=pd.DataFrame(columns=['ds','y'])\ntrain_bed_mah_y= num_mah.iloc[:-3,-1:]\ntrain_bed_mah_ds = num_mah.iloc[:-3,:1]\ntrain_bed_mah=pd.merge(train_bed_mah_ds,train_bed_mah_y,right_index=True,left_index=True)\ntrain_bed_mah.rename(columns={'Date': 'ds', 'Active': 'y'}, inplace=True)\ntest_bed_mah_y = num_mah.iloc[-3:,-1:]\ntest_bed_mah_ds = num_mah.iloc[-3:,:1]\ntest_bed_mah=pd.merge(test_bed_mah_ds,test_bed_mah_y,right_index=True,left_index=True)\ntest_bed_mah.rename(columns={'Date': 'ds', 'Active': 'y'}, inplace=True)","2c026701":"#num_mah.iloc[120:]","27716740":"test_bed_mah = test_bed_mah.set_index(\"ds\")\ntest_bed_mah = test_bed_mah['y']","e7d2fa1b":"model_bed_mah = Prophet(growth = \"logistic\",changepoints=['2020-04-14','2020-04-21','2020-04-30','2020-05-13','2020-05-27','2020-06-15','2020-07-15','2020-09-05'])\nbed_cap = num_bed_mah+200000\ntrain_bed_mah['cap'] = bed_cap\nmodel_bed_mah.fit(train_bed_mah)\n# Future Prediction\nfuture_dates = model_bed_mah.make_future_dataframe(periods=200)\nfuture_dates['cap'] = bed_cap\nforecast_mah =  model_bed_mah.predict(future_dates)\n# Plotting\nax = forecast_mah.plot(x='ds',y='yhat',label='Predicted Active Cases',legend=True,figsize=(8,8))\ntest_bed_mah.plot(y='y',label='Actual Active Counts',legend=True,ax=ax)\nax.set(xlabel=\"Date\", ylabel=\"Active Cases in Maharashtra\");","7810385b":"forecast_mah.iloc[190:250]","dde37026":"# India","cfe669f1":"**Death cases have also been on the rise globally as seen below. 29th April has seen a drastic increase in the number of deaths in a single day(10485).**","92cdd8aa":"**Observing the cases in India. Confirmed cases are increasing in India each day. There is a need to get a flatter curve for confirmed cases which currently is in upswing with a steep increase since past few days.**","dba91f47":"**US is still not seeing a flattened curve and is still leading the number of cases in the world**","3711a5b5":"**Number of Beds vs Active cases in India (Statewise)**\n<br>We can see Maharashtra and Andhra Pradesh have exceeded the number of public hospital beds","6af98a52":"**From the confirmed cases plot for China we can see that the number of new cases have been declining with a few constant number of cases everyday.17th April shows a sudden increase in the number of confirmed cases. China is again seeing some increase in the number of cases since 13th June**","7ed4166f":"**Hospital Infrastructure in India**","5bfe4cd0":"**From the Death Increase plot for China we can see that deaths have reduced to a great level but on 17th April there were 1290 deaths reported in a single day. China reported this increase as some miscalculation on their end during the initial phase of COVID**","5cf2f97d":"**Laboratories available for testing in Each of the states**","bb72762c":"**Number of Beds Facility-wise**","29ec3a32":"**Considering current number of active cases, between mid May and October we will see a drastic increase in the number of active cases and by end January all the available hospital beds in India will be occupied <br>\nif we donot lower the increase of cases or increase the number of beds**","c1cedbb7":"**Making Predictions for India based on the current scenario**","324b3cf8":"**Global confirmed cases have been on an increasing trend and this has been largely contributed by Brazil and US at this moment as can be seen in the pie-chart. 15th September saw the highest increase in confirmed cases with 3.67L cases in a day.**","d30481fd":"**Since the final count of cases is present on 23rd September 2020 we will create a separate dataframe for the same**","1ac2406e":"**From the below stacked barplot we see that highest number of confirmed cases is in US now<br>**","6c10e63f":"**ARIMA is predicting 63.27L confirmed cases on 30th Sept**","c59a9521":"**11th September has recorded highest number of COVID19 confirmed cases in India in a day (97570). In the last few days the peak in cases have been increasing almost everyday.\nNote: We are not considering the stats on 28th and 29th July because it seems to be incorrect.**","86797a78":"**On 16th July the confirmed case increase reached a peak of 78k in a day. Every 7 days we noticed a peak in the numbers previously however the peak nowadays occurs in 4-5 days.**","cc821e3a":"# US - 3rd Epicentre","6091a5d5":"**Using ARIMA**","b8d64711":"**Among the top 5 countries with maximum confirmed cases Russia is doing better followed by India if we consider both the recovery and the death rate**","2d6961b4":"**Lets look at some of country graphs together and check the trajectory being followed. As seen below all the countries are following the same trajectory. South Korea was able to break the chain quiet early as compared to the other nations however it is seeing a second wave of infections. Same is the case with Germany, Italy, China and Spain. India has made a small downward movement from the initial trajectory.**","baf13761":" **US leads with 21.82% of the confirmed cases all over the world. This scenario is in total contrast to the initial days when China accounted for nearly 99% of the cases. The growth rate for US has again risen in the past few days. The numbers in India has increased drastically placing them in 2nd spot.Brazil moved to 3rd place with respect to the number of confirmed cases.**","86955547":"**Age-wise distribution of the COVID-2019 cases**<br>\nThe cases are more common in elderly population as seen in the graph below","042634fe":"**Statewise Recovery and Death Rate in India**<br>\n1)Maharashtra has the highest number of Confirmed cases in India and is still contributing maximum daily cases among all the states in India<br>\n2)Bihar has highest recovery rate among the top 20 hotspot states in India followed by Tamil Nadu<br>\n3)No Green states (COVID-19-free) now in India<br>\n4)3% is the highest death rate among the Indian states.","5837b456":"**As seen below Uttar Pradesh has many hospitals followed mostly by Maharshtra**","da7dd19f":" **As per logistic growth,Maharashtra was expected to reach the bed capacity in the first week of August, however there has been rapid growth in cases and the bed capacity was reached in last week of July itself. \n<br>We are now checking if 2L beds are added in Maharashtra when will that capacity be reached. By December 2020 end these beds will also be occupied considering the current recovery rate.**","a7e74e2e":"# Italy - 2nd Epicentre","bd140246":"**Accuracy Metrics for ARIMA**","160b3fcd":"# Trajectories for some of the countries","fb3c122e":"**Wherever Province is null, we replace it with the Country name and we group Mainland China and China together in China**","ddfc45ab":"**Out of the 116805 records we are now left with only 743 and many of the records dont have a Province defined.<br>\nThese are mostly provinces that are not part of China**","33e6eca4":"# Representation of confirmed cases per country","b8c23275":"**Similar increase has been seen in the deaths reported by US with highest number of deaths(4591) recorded on 16th April**","79e55a26":"**Lets apply fbprophet model to Indian states to check when individual states will run out of Beds**","c9d177be":"**Accuracy Metrics for Prophet**","e9809aae":"**There is no strong correlation between any of the variables except for Confirmed and Deaths variables (0.82)**","dcde0e07":"# World(excluding China)","765e6e6d":"**There seems to be an issue with an extra death reported on Day 50 due to which on Day 51 we see a downtrend.Highest number of deaths reported in a day is 1986 for India which was on 16th June.**","0eeb4ddb":"# Predictions for India","cefad39b":"**We will convert ObservationDate and Last Update to datetime since they are currently taken as object<br><br>\n The counts for 'Confirmed', 'Deaths' and 'Recovered' will be converted to int**","9fd04dff":"**Since China was the first epicentre we are checking for Provinces within China**","31e7dbca":"**Prediction for Bed capacity in India**","c4667bd9":"**A total of 223 countries have been impacted uptill now.Note: All these countries may not necessarily have active cases now.**","5ba0947b":"**Gender-wise distribution of the COVID-2019 cases**<br>\nThe figure shows the cases are more than double in Males than Females","f6f59075":"**Adding other datasources for further analysis of India on State-level**","aa26819c":"**Since Maharashtra has highest number of cases we are predicting for the bed availability here**","025b8a3d":"**Arima Predictions**","776c8f16":"**Statewise Testing done so far in India till 18th July**<br>\nTamil Nadu has done maximum number of tests with 9% of tested cases being positive<br>\nMaharashtra has the highest positive rate (20%) showing that the virus has spread widely in this area.","97eaddd1":"**Italy is again seeing an increase in the number of confirmed cases post the stable period**","967f4ae9":"**Using Prophet**","1dcd9d00":"# China - 1st Epicentre","efbe2312":"#  Printing the unique Countries and their count","10c7a073":"**Below is the per day statistics of China where the line graph shows flattening of curve for confirmed cases. However on 17th April there was a sudden rise in Death and Confirmed cases.**","81dec687":"**The highest number of deaths in Italy was seen on 27th March with 919 deaths reported**","91a18881":"**The ratio of recovered and death cases are shown below for the top 4 countries that have reported max deaths.US leads in the number of deaths due to COVID19. India has entered the 3rd spot with respect to deaths.**","d9d7225b":"**Italy was the second epicentre for COVID19,hence lets look at these numbers.Italy has more than 1L confirmed cases on 30th March post that we were seeing a downturn in subsequent months but since August we are seeing a second wave here.**","c29edba8":"**We perform encoding of the Country to CountryID and Province to ProvinceID**","f6d5c95e":"**We plot the per day statistics for Hubei since it has the highest rate of confirmed cases in China<br>\nIf we compare the China and Hubei plots, they both are similar. Hence we can say that the China stats are influenced deeply by a single province**","e9d85de8":"**From the below plot we see that Hubei has the highest count of confirmed cases. A few cases were reported in the other provinces, with the least in Tibet**","0cac80bb":"**Statewise Confirmed Cases in India for COVID-2019**","b011474b":"**We can see that by 30th Sept more than 61.59L confirmed cases are predicted as per this model with upper limit of around 61.90L. As more data comes in these values will keep changing**","a585931f":"**Global cases are on an exponential increase and the recovery and death cases do show some divergence which is a good indication**","d8b7ad22":"**Prediction considering till when entire population of India will be impacted**<br>\nIf we consider logistic growth, between Oct to December the daily number of confirmed cases will be rising and by Apr 2021 we will be at the peak with daily increase being constant thereafter."}}