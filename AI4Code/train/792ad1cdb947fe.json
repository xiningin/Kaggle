{"cell_type":{"3bd43c7a":"code","3af6cbc0":"code","3119d856":"code","ec52e9ba":"code","8e0fa95f":"code","dae57d7a":"code","30a64aa0":"code","d96f57a0":"code","32ace279":"code","f0e89356":"code","bb4b152a":"code","6fdf01be":"code","1efd1e78":"code","2e5f2a7a":"code","6e3756e1":"code","08a6daba":"code","32b951ad":"code","0c8a3d3d":"code","dcbedc18":"code","dfc200ba":"code","cbe87046":"code","f5846c8a":"markdown","6d6f2032":"markdown","ac8fe904":"markdown","4365a9e2":"markdown","2eaa855b":"markdown","29b2bc45":"markdown"},"source":{"3bd43c7a":"# DATA ENGINEERING OF TITANIC RAW DATA (TEST DATA)","3af6cbc0":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","3119d856":"## Importing test Data\ntest=pd.read_csv('test_titanic.csv')\ntest.head()","ec52e9ba":"test.shape","8e0fa95f":"# We will start by checking missing values in each of the columns in our test dataset\n# Missing Data\n# We can do this by making use of or creating a simple heatmap to see where we have missing values in the test dataset\nsns.heatmap(test.isnull(),yticklabels= False,cbar=False,cmap='viridis')","dae57d7a":"sns.distplot(test['Age'].dropna(),kde=False,color='darkred',bins=30)","30a64aa0":"test['Age'].hist(bins=30,color='darkred',alpha = 0.7)","d96f57a0":"sns.countplot(x='SibSp',data = test)","32ace279":"test['Fare'].hist(color = 'green', bins = 40, figsize=(8,4))","f0e89356":"plt.figure(figsize=(12,7))\nsns.boxplot(x='Pclass', y='Age',data = test, palette= 'winter')","bb4b152a":"def impute_age(cols):\n    Age = cols[0]\n    Pclass = cols[1]\n\n    if pd.isnull(Age):\n\n      if Pclass == 1:\n          return 42\n\n      elif Pclass == 2:\n          return 26\n\n      else:\n          return 23   \n\n    else:\n       return Age","6fdf01be":"## Once we finish with the above code, we will now make use of the code below to fix those missing ages above\ntest['Age'] = test[['Age','Pclass']].apply(impute_age,axis=1)","1efd1e78":"## To do this, we are going to recall our heatmap code and check if there are still missing age data or not\nsns.heatmap(test.isnull(),yticklabels= False,cbar=False,cmap='viridis')","2e5f2a7a":"## Just for us to justify what we are have in our heatmap above \n## and to see where else we re still having missing data (e.g Embarked)\ntest.isnull().sum()","6e3756e1":"## Now, let's try and fill those only one missing data in Fare column first using \"Mode\"\ntest['Fare'] = test['Fare'].fillna(test['Fare'].mode()[0])","08a6daba":"## Next, is the Cabin column but based on the fact that over 50% of the Cabin data are missing in train dataset above\n## Hence, the most reasonable approach is to remove the entire Cabin Column in order to have the same result like\n## train dataset\n## Thus, to do this we have the following code\ntest.drop(['Cabin'],axis=1,inplace=True)","32b951ad":"## Hence, to confirm that there are no missing values in any of the columns in our test dataset\n## We try and run our heatmap code again\nsns.heatmap(test.isnull(),yticklabels= False,cbar=False,cmap='viridis')","0c8a3d3d":"## Also again to justify what we have in our heatmap above \n## and to see that there are no missing values again in our train dataset\ntest.isnull().sum()","dcbedc18":"test.head()","dfc200ba":"test.shape","cbe87046":"## we will now save the cleaned test dataset as \"formulatedtest.csv\" as follows:\ntest.to_csv('formulatedtest.csv',index=False)","f5846c8a":"Note: From the Boxplot above.\n\n(1) We can see that in Pclass1, the mean or average age is 42yrs, meaning that we have older passengers in pclass1, hence we are going to replace the missing age of those passengers in pclass 1 by 42.\n\n(2) We can see that in Pclass2, the mean or average age is 26yrs, meaning that we have less older passengers in pclass2 compare to pclass1 , hence we are going to replace the missing age of those passengers in pclass2 with 26.\n\n(3) We can see that in Pclass3, the mean or average age is 23yrs, meaning that we very much younger passengers in pclass3 compare to pclass2, hence we are going to replace the missing age of those passengers in pclass3 by 23.","6d6f2032":"Data Cleaning\n\nWe want to fill in missing Age data instead of just dropping the age missing data rows. One way to do this is by filling in the mean age of all passengers(imputation). However, we can be smarter about this and check the average age by passenger class.\n\nFor example:","ac8fe904":"Now, let's have a look at our heatmap if truly all the missing passengers Ages have been replaced accordingly in our test dataset","4365a9e2":"Since we dont have Column \"Survived\" in our test dataset we can only replacing the missing values in column \"Age\".\n\nwe will try and see how the Age is distributed, using histogram.","2eaa855b":"\n**THE DATA**","29b2bc45":"Exporatory Data Analysis (EDA) on test dataset\n\nMISSING DATA"}}