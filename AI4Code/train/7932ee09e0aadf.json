{"cell_type":{"1ea69e0c":"code","dadb6e4a":"code","4c6e4545":"code","d7f291b7":"code","150805a8":"code","2656f71a":"code","44b1be92":"code","81791f7e":"code","ec23f2fa":"code","b65db86c":"code","e0d35aaa":"code","3da3c6c3":"code","7ae1128b":"code","8291574b":"code","5a183ce2":"code","1fc480a4":"code","b24f8940":"code","e87ca064":"code","c77cc26f":"code","f6c63dad":"code","7aa7692a":"code","67c4eb13":"code","ab622977":"code","041bd077":"code","c7206738":"code","7f51dd95":"code","5bc3ddde":"code","08262bc5":"code","1ecec0c8":"code","161f5c3b":"code","d97c8c9b":"code","ca781760":"code","039b32f8":"code","6d140e46":"code","c1d99ffa":"code","c63dbe5c":"code","ca5d3e01":"markdown","51620635":"markdown","e1b9bd1c":"markdown","68d9c570":"markdown","245189b7":"markdown","49ef6225":"markdown","6f91f18d":"markdown","669a7e45":"markdown","07a6f2bb":"markdown","78e565ac":"markdown","b2e98973":"markdown","494c8603":"markdown","fa575b10":"markdown","63b704b2":"markdown","097d83df":"markdown","75488b40":"markdown","9a3e35a8":"markdown","2e2e6aed":"markdown","934e3bbe":"markdown","fbca311c":"markdown","dc87ff39":"markdown","2c1d8684":"markdown","41cbc5c8":"markdown","77089849":"markdown","e35f16aa":"markdown"},"source":{"1ea69e0c":"import os\nfrom os import listdir\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\n#plotly\n!pip install chart_studio\nimport plotly.express as px\nimport chart_studio.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import iplot\nimport cufflinks\ncufflinks.go_offline()\ncufflinks.set_config_file(world_readable=True, theme='pearl')\n\nimport seaborn as sns\nsns.set(style=\"whitegrid\")\n\n\n#pydicom\nimport pydicom\n\n# Beautiful plot scheme\nplt.style.use('fivethirtyeight')\nplt.show()","dadb6e4a":"# List files available\nlist(os.listdir(\"..\/input\/osic-pulmonary-fibrosis-progression\"))","4c6e4545":"IMAGE_PATH = \"..\/input\/osic-pulmonary-fibrosis-progressiont\/\"\n\ntrain_data = pd.read_csv('..\/input\/osic-pulmonary-fibrosis-progression\/train.csv')\ntest_data = pd.read_csv('..\/input\/osic-pulmonary-fibrosis-progression\/test.csv')\n\nprint('Training data shape: ', train_data.shape)\ntrain_data.head(5)","d7f291b7":"train_data['SmokingStatus'].value_counts()","150805a8":"train_data.groupby(['SmokingStatus','Sex']).count()","2656f71a":"# Lets Explore the  data\nprint('Train mets data Set !!')\nprint(train_data.info())\n","44b1be92":"print('Test meta dataSet !!')\nprint(test_data.info())","81791f7e":"# Total number of ecords in the Meta dataset(train+test)\nprint(\"Total Patient in Train data set: \",train_data['Patient'].count())\nprint(\"Total Patient in Test  data set: \",test_data['Patient'].count())","ec23f2fa":"print(\"The total patient ids are : \") \nprint(train_data['Patient'].count())\nprint(\"Total Uniquw unique patients are :\") \nprint(train_data['Patient'].value_counts().shape[0] )","b65db86c":"columns = train_data.keys()\ncolumns = list(columns)\nprint(columns)","e0d35aaa":"train_data['SmokingStatus'].value_counts()","3da3c6c3":"iplot(train_data.SmokingStatus.iplot(asFigure=True, kind='histogram', title='Smoking Distribution Data', dimensions=(1000,400)))","7ae1128b":"train_data['Weeks'].value_counts()","8291574b":"grpdata=train_data.groupby(['Weeks']).count()[\"Patient\"]\ngrpdata","5a183ce2":"pd.options.plotting.backend = \"plotly\"\ntrain_data.groupby(['Weeks']).count()[\"Patient\"].plot()","1fc480a4":"\ngrpval=train_data.groupby(['FVC']).count()[\"Patient\"]\ngrpval","b24f8940":"z=train_data.groupby(['SmokingStatus','Weeks'])['FVC'].count().to_frame().reset_index()\nz.style.background_gradient(cmap='Reds') ","e87ca064":"train_data.groupby(['FVC']).count()[\"Patient\"].plot()","c77cc26f":"train_data.groupby(['FVC']).count()[\"Patient\"].plot()\n\nimport plotly.express as px\nfig = px.line(train_data, x='FVC', y='Percent', color='Sex')\nfig.show()","f6c63dad":"plt.figure(figsize=(16, 6))\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Ex-smoker', 'FVC'], label = 'Ex-smoker',shade=True)\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Never smoked', 'FVC'], label = 'Never smoked',shade=True)\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Currently smokes', 'FVC'], label = 'Currently smokes',shade=True)\n\n# Labeling of plot\nplt.xlabel('FVC'); plt.ylabel('Density'); plt.title('Distribution of Gender');","7aa7692a":"train_data['Percent'].value_counts()","67c4eb13":"train_data['Percent'].iplot(kind='hist',bins=35,color='green',xTitle='Percent distribution',yTitle='No Of Patients')","ab622977":"plt.figure(figsize=(16, 6))\nsns.kdeplot(train_data.loc[train_data['Sex'] == 'Male', 'Percent'], label = 'Male',shade=True)\nsns.kdeplot(train_data.loc[train_data['Sex'] == 'Female', 'Percent'], label = 'Female',shade=True)\n\n# Labeling of plot\nplt.xlabel('Perecent of FVC '); plt.ylabel('Density'); plt.title('Distribution of Gender for FVC');","041bd077":"train_data['Age'].iplot(kind='hist',bins=30,color='red',xTitle='Age distribution',yTitle='Count')","c7206738":"train_data['SmokingStatus'].value_counts()","7f51dd95":"plt.figure(figsize=(16, 6))\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Ex-smoker', 'Age'], label = 'Ex-smoker',shade=True)\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Never smoked', 'Age'], label = 'Never smoked',shade=True)\nsns.kdeplot(train_data.loc[train_data['SmokingStatus'] == 'Currently smokes', 'Age'], label = 'Currently smokes',shade=True)\n\n# Labeling of plot\nplt.xlabel('Age (years)'); plt.ylabel('Density'); plt.title('Distribution of Ages');","5bc3ddde":"plt.figure(figsize=(16, 6))\nsns.kdeplot(train_data.loc[train_data['Sex'] == 'Female', 'Age'], label = 'Female',shade=True)\nsns.kdeplot(train_data.loc[train_data['Sex'] == 'Male', 'Age'], label = 'Male',shade=True)\n\nplt.xlabel('Age (years)'); plt.ylabel('Density'); plt.title('Distribution of Ages');","08262bc5":"train_data['Sex'].value_counts()","1ecec0c8":"iplot(train_data.Sex.iplot(asFigure=True, kind='histogram', title='Sex Distribution Data', dimensions=(1000,400)))","161f5c3b":"plt.figure(figsize=(16, 6))\na = sns.countplot(data=train_data, x='SmokingStatus', hue='Sex')\n\nfor p in a.patches:\n    a.annotate(format(p.get_height(), ','), \n           (p.get_x() + p.get_width() \/ 2., \n            p.get_height()), ha = 'center', va = 'center', \n           xytext = (0, 4), textcoords = 'offset points')\n\nplt.title('Gender split by SmokingStatus', fontsize=16)\nsns.despine(left=True, bottom=True);","d97c8c9b":"print('Train .dcm number of images:', len(list(os.listdir('..\/input\/osic-pulmonary-fibrosis-progression\/train'))), '\\n' +\n      'Test .dcm number of images:', len(list(os.listdir('..\/input\/osic-pulmonary-fibrosis-progression\/test'))), '\\n' +\n      '--------------------------------', '\\n' +\n      'There is the same number of images as in train\/ test .csv datasets')\n\n","ca781760":"filename = \"\/kaggle\/input\/osic-pulmonary-fibrosis-progression\/train\/ID00123637202217151272140\/137.dcm\"\nds = pydicom.dcmread(filename)\nplt.imshow(ds.pixel_array, cmap=plt.cm.bone) ","039b32f8":"# directory for a patient\nimdir = \"\/kaggle\/input\/osic-pulmonary-fibrosis-progression\/train\/ID00007637202177411956430\"\nprint(\"total images for patient ID00007637202177411956430: \", len(os.listdir(imdir)))","6d140e46":"print(\"images for patient ID00007637202177411956430 :\")\nmylist = os.listdir(imdir)\nmylist.sort()\nprint(mylist)","c1d99ffa":"# view first (columns*rows) images in order\nw=10\nh=10\nfig=plt.figure(figsize=(12, 12))\ncolumns = 4\nrows = 5\nimglist = os.listdir(imdir)\nfor i in range(1, columns*rows +1):\n    filename = imdir + \"\/\" + str(i) + \".dcm\"\n    ds = pydicom.dcmread(filename)\n    fig.add_subplot(rows, columns, i)\n    plt.imshow(ds.pixel_array, cmap=plt.cm.bone)\nplt.show()","c63dbe5c":"import glob\ntrain_image_path = '..\/input\/osic-pulmonary-fibrosis-progression\/train'\ntrain_image_files = glob.glob(os.path.join(train_image_path, '*', '*.dcm'))\n\ntrain_image_data = pydicom.read_file(train_image_files[0])\ntrain_image_data","ca5d3e01":"## Males have bad habit of smoking?? \n### Gender vs SmokingStatus","51620635":"### Gender has any relationship with FVC and Smoking habits?","e1b9bd1c":"## pydicom Hidden Information that could be useful\nhttps:\/\/pydicom.github.io\/pydicom\/stable\/old\/getting_started.html. ","68d9c570":"### Smoking has any relationship with Age?","245189b7":"## How are the images?\n###  Visualising DECOM images\n> A DICOM file is an image saved in the Digital Imaging and Communications in Medicine (DICOM) format. It contains an image from a medical scan, such as an ultrasound or MRI. DICOM files may also include identification data for patients so that the image is linked to a specific individual.","49ef6225":"## FVC VS Patients : How many patients are at same stage of disease \n**Lung function is assessed based on output from a spirometer, which measures the forced vital capacity (FVC), i.e. the volume of air exhaled.******","6f91f18d":"# 2. Reading training Meta data","669a7e45":"<img src='https:\/\/www.pulmonaryfibrosis.org\/images\/default-source\/default-album\/normal-and-impaired-gas-exchange.png?sfvrsn=c3b0918d_0'>\n<h1><center>OSIC Pulmonary Fibrosis Progression - EDA<\/center><h1>\n    \n# 1. Let's Understand Whats is this disease? \u25b6\n    \n###  1.1 What is Pulmonary fibrosis?\n* [The word \u201cpulmonary\u201d means lung and the word \u201cfibrosis\u201d means scar tissue\u2014 similar to scars](https:\/\/www.pulmonaryfibrosis.org\/life-with-pf\/about-pf) that you may have on your skin from an old injury or surgery. So, in its simplest sense, pulmonary fibrosis (PF) means scarring in the lungs. Over time, the scar tissue can destroy the normal lung and make it hard for oxygen to get into your blood. Low oxygen levels (and the stiff scar tissue itself) can cause you to feel short of breath, particularly when walking and exercising.\n    \n###  1.2 What has to be done in this competition?\nThe aim of this competition is to predict a patient\u2019s severity of decline in lung function based on a CT scan of their lungs. Lung function is assessed based on output from a spirometer, which measures the forced vital capacity (FVC), i.e. the volume of air exhaled.\n\nIn the dataset, you are provided with a baseline chest CT scan and associated clinical information for a set of patients. A patient has an image acquired at time Week = 0 and has numerous follow up visits over the course of approximately 1-2 years, at which time their FVC is measured.\n\nIn the training set, you are provided with an anonymized, baseline CT scan and the entire history of FVC measurements.\nIn the test set, you are provided with a baseline CT scan and only the initial FVC measurement. You are asked to predict the final three FVC measurements for each patient, as well as a confidence value in your prediction.\n    \n- Files\n\nThis is a synchronous rerun code competition. The provided test set is a small representative set of files (copied from the training set) to demonstrate the format of the private test set. When you submit your notebook, Kaggle will rerun your code on the test set, which contains unseen images.\n\ntrain.csv - the training set, contains full history of clinical information\ntest.csv - the test set, contains only the baseline measurement\ntrain\/ - contains the training patients' baseline CT scan in DICOM format\ntest\/ - contains the test patients' baseline CT scan in DICOM format\nsample_submission.csv - demonstrates the submission format\n    \n- The leaderboard of this competition is calculated with approximately 1% of the test data. The final results will be based on the other 99%, so the final standings may be different.\n    \n- EXTERNAL DATA: Publicly and freely available external data is permitted if it is available for use that includes research or academic purposes","07a6f2bb":"A computed field which approximates the patient's FVC as a percent of the typical FVC for a person of similar characteristics","78e565ac":"## Aged patients are more prone to Pulmonary Fibrosis Progression?\n### Lets Check","b2e98973":"## Gender distribution in train data\n### Males are more affected from Pulmonary Fibrosis Progression??","494c8603":"### Distribution of Age vs gender\n## Is it really Helpful: Check out yourself","fa575b10":"### Weeks vs SmokingStatus","63b704b2":"### Only 176 Images why??\n**Because there are only 176 unique patients in database**","097d83df":"## People Smoke?  Hmm.. Lets Check it out!!","75488b40":"\n\n**In the dataset, you are provided with a baseline chest CT scan and associated clinical information for a set of patients. A patient has an image acquired at time Week = 0 and has numerous follow up visits over the course of approximately 1-2 years, at which time their FVC is measured.**\n\n## Lets Check the Unique Patients in Train and Test data","9a3e35a8":"## FVC distribution at different Percent for different Genders ?","2e2e6aed":"## Does Gender has any relationship with FVC?\n### FVC VS Percentage VS SEX","934e3bbe":"# 3. Feast for the eyes: Visualization","fbca311c":"# 1. Import libraries ","dc87ff39":"### Number of patients count pre\/post the baseline CT: week Wise","2c1d8684":"## Weeks distribution : The relative number of weeks pre\/post the baseline CT (may be negative)","41cbc5c8":" ## Let's see what is in image","77089849":"Ideas taken from https:\/\/www.kaggle.com\/piantic\/osic-pulmonary-fibrosis-progression-basic-eda","e35f16aa":"## How many patients at different level of disease?\n### Percent"}}