{"cell_type":{"b0da71a0":"code","45154057":"code","a2e89a9a":"code","ed2ba250":"code","43be012c":"code","932aaa7c":"code","10faa651":"code","6440010b":"code","46afd9f9":"code","a2fd3d25":"code","bb9f5c2f":"code","f3670729":"code","ddea0fa5":"code","c0d43495":"code","941c53bd":"code","362bc75e":"code","9182ef36":"code","6387e9dc":"code","260577f0":"code","b2f54dd9":"code","30e52fa8":"code","e98ca309":"code","4f25066e":"code","670cf40d":"code","dcad4b63":"code","15ffbfaa":"code","ef35c9af":"code","1564c5ae":"code","bedf9086":"code","bf4461e7":"code","9c07ed02":"code","a85ce993":"code","1ec790c1":"code","be4469fc":"code","26a55677":"code","aca05340":"code","413cf2d1":"code","aa67b501":"code","13d79a4a":"code","d174831f":"code","17fb84fb":"code","52c641ee":"code","7222d0be":"code","72999e52":"code","163235b7":"code","4d0f3e73":"code","81ad5a88":"code","76d7c671":"code","0cab4eae":"code","d0e1b66a":"code","c1150c2e":"code","f850b2e0":"code","f6ebf78e":"code","6c5206b1":"code","0d51a6a8":"code","836cf80c":"code","b4c1533b":"code","d24273e9":"code","6e49f65e":"code","0fb74d85":"code","b67c5780":"code","8c11d14f":"code","0ed45073":"code","a7838447":"code","1ff76823":"code","41841107":"code","ff3670a8":"code","9881581c":"code","018ecd91":"markdown","0d14d34f":"markdown","436425d0":"markdown","203b1156":"markdown","6ac5c988":"markdown","3fded537":"markdown","930ad451":"markdown","3887f4ad":"markdown","25521ab2":"markdown","d1f2017a":"markdown","0ebd1259":"markdown","d779fcab":"markdown","a218ad7f":"markdown","2435d191":"markdown","f97163e0":"markdown","6463d94a":"markdown","2074aeea":"markdown","80d88975":"markdown","2f26d637":"markdown","d51bc793":"markdown","4cbae923":"markdown","109bc505":"markdown","56db8490":"markdown","d938a154":"markdown","c64c7f2b":"markdown","a68f7974":"markdown","791d7072":"markdown","893eae98":"markdown","6e9c061a":"markdown","1b40b3d4":"markdown","f6f02e4c":"markdown"},"source":{"b0da71a0":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom geopy.geocoders import Nominatim\nfrom tqdm import tqdm\nfrom geopy.extra.rate_limiter import RateLimiter\nimport folium\nfrom collections import Counter","45154057":"def draw_pie_graph_for_this_data(data):\n    \"\"\"\n    It is a function which draws the pie graph for a variable.\n    'data' will be a series(not a dataframe) having that particular variable data only.\n    \"\"\"\n    labels = data.value_counts().index\n    values = data.value_counts().values\n    explode = [0.1, 0]\n    fig1, ax1 = plt.subplots()\n    ax1.pie(values, labels=labels, explode=explode,\n            autopct='%1.1f%%', startangle=90)\n    # autopct is used for labelling inside pie wedges, startangle rotates pie counterclockwise\n    ax1.axis('equal')\n    plt.tight_layout()\n    plt.show()\n    \n\n#Lets write a custom function to draw horizonatal bar graph for max values.\ndef draw_bar_graph_for_this_data(data):\n    \"\"\"\n    It is a function which draws the pie graph for a variable.\n    'data' will be a series(not a dataframe) having that particular variable data only.\n    \"\"\"\n    plt.figure(figsize=(10, 7))\n    top_thirty = data.value_counts()[:30]\n    sns.barplot(x=top_thirty,\n            y=top_thirty.index)\n    plt.title(\"Number of restaurants in cities\")\n    plt.xlabel(\"Count\")\n    plt.ylabel(\"Name\")\n    \n    \n#Lets write a custom function to split comma seperated data to a list\ndef split_data(arr):\n    \"\"\"\n    It is a function which accepts the array from of a series(arr) and then split them seperately.\n    It then returns a list of tuples of favourite items and there count. \n    \"\"\"\n    list_of_item = []\n    for item in tqdm(arr):\n        curr_item = item.split(',')\n        curr_item = [var.strip() for var in curr_item]\n        list_of_item.extend(curr_item)\n    count_dict = Counter(list_of_item)\n    list_of_top_fav = count_dict.most_common(5)\n    return list_of_top_fav\n\n\n#Lets write a custom function to split favourite items and there counts\ndef seperate_name_and_count(list_of_top_fav):\n    \"\"\"\n    It is a function which accepts the array from of a series(arr) and then split them seperately.\n    \"\"\"\n    list_of_items = []\n    respective_count_of_items = []\n    for ele in list_of_top_fav:\n        list_of_items.append(ele[0])\n        respective_count_of_items.append(ele[1])\n    return (list_of_items,respective_count_of_items)\n\n#Lets write a custom function which will simply plot bargraph for two variables x and y\ndef direct_bar_graph(respective_count,list_of_item):\n    \"\"\"\n    This function takes x and y two series as input, one of which has to be numeric. And plot graph for it.\n    \"\"\"\n    plt.figure(figsize=(10, 7))\n    sns.barplot(x=respective_count,y=list_of_item)\n    plt.title(\"Number of favourite dishes\")\n    plt.xlabel(\"Count\")\n    plt.ylabel(\"Name\")","a2e89a9a":"# Load the data\nzomato = pd.read_csv(\"..\/input\/zomato-bangalore-restaurants\/zomato.csv\")","ed2ba250":"print(\"The shape of the data is ==>\", zomato.shape)\nprint(\"\\n\")\nprint(\"The columns in data ==>\", zomato.columns)","43be012c":"zomato.head()","932aaa7c":"zomato.describe()","10faa651":"zomato.info()","6440010b":"zomato.isnull().sum()","46afd9f9":"dummy_zomato = zomato\ndummy_zomato = dummy_zomato.dropna()\n(zomato.shape[0]-dummy_zomato.shape[0])\/(zomato.shape[0])*100","a2fd3d25":"online_order = zomato['online_order']","bb9f5c2f":"# Above data is binary, Plot pie chart for above data\ndraw_pie_graph_for_this_data(online_order)","f3670729":"names_of_restaurant = zomato[['name']]","ddea0fa5":"#Lets draw bar graph for maximum number of restaurants top thirty\ndraw_bar_graph_for_this_data(names_of_restaurant[\"name\"])","c0d43495":"# Let's check for the rating of CCD\nzomato_ccd = zomato[zomato['name'] == 'Cafe Coffee Day']","941c53bd":"zomato_ccd = zomato_ccd[zomato_ccd['rate'] != 'New']\nzomato_ccd = zomato_ccd[zomato_ccd['rate'] != '-']\nzomato_ccd = zomato_ccd.dropna()","362bc75e":"zomato_ccd['rate'] = zomato_ccd['rate'].apply(lambda x: float(x.split('\/')[0]))","9182ef36":"zomato_ccd['rate'].describe()['mean']","6387e9dc":"def clean_rate_data(zomato_rate_data):\n    #Using square bracket two times returns a df.\n    zomato_rate_data = zomato_rate_data[zomato_rate_data['rate']!='NEW']\n    zomato_rate_data = zomato_rate_data[zomato_rate_data['rate']!='-']\n    zomato_rate_data = zomato_rate_data.dropna()\n    zomato_rate_data['rate'] = zomato_rate_data['rate'].apply(lambda x : float(x.split('\/')[0])) \n    return zomato_rate_data","260577f0":"# Filter rate data and call cleaning function\nzomato_rate_data = zomato[['rate']]\nzomato_rate_data = clean_rate_data(zomato_rate_data)","b2f54dd9":"zomato_rate_data.head()","30e52fa8":"sns.FacetGrid(zomato_rate_data, height=5, hue=\"rate\").map(\n    sns.distplot, \"rate\").add_legend()\nplt.show()","e98ca309":"book_table_data = zomato[\"book_table\"]","4f25066e":"# It is a binary data\n# Plot pie chart for above data\ndraw_pie_graph_for_this_data(book_table_data)","670cf40d":"votes_data = zomato[['votes']]","dcad4b63":"\"\"\"A thing to note is that votes standalone can't provide any information. \nSince voting is not co-related to any other data. It's better to utilise it with any other data.\nLike at a later stage you can actually visualize  relation between votes and rating.\"\"\"","15ffbfaa":"\"\"\"In particular phone can't provide us any kind of information , hence we will drop it from database\nat a later stage\"\"\"","ef35c9af":"#So what now? . \n#Think what you can extract from locations of restaurant ?\nlocation_data = zomato[['location']]","1564c5ae":"location_data.head()","bedf9086":"#Let's write code to get the latitude and longitude of a particular location\n#This is going to take a lot of time.\n#Since google API only allows you 2500 requests a day.\n# geolocator = Nominatim()\n# geocode = RateLimiter(geolocator.geocode, min_delay_seconds=1)\n# zomato[\"latitude\"]= zomato['location'].apply(geocode, timeout=20).apply(lambda x: (x.latitude))\n# zomato[\"longitude\"]= zomato['location'].apply(geolocator.geocode, timeout=20).apply(lambda x: (x.longitude))\n\n#Problem here is , it is way too difficult to get the coordinates of all the unique cities in bangalore.\n#Will work around it later.","bf4461e7":"#Let's draw bar graph for number of restaurant with respect to cities.\ndraw_bar_graph_for_this_data(location_data[\"location\"])","9c07ed02":"#We can mark top 5 cities with max restaurants in map\ntop_ten_cities = location_data[\"location\"].value_counts()[:10]\ntop_ten_cities = top_ten_cities.index.values","a85ce993":"geolocator = Nominatim()\nlist_of_coordinates = []\nfor city in top_ten_cities:\n    loc = geolocator.geocode(\"Bangalore \"+ city, timeout=20)\n    geo = (loc.latitude, loc.longitude)\n    list_of_coordinates.append(geo)\nprint(list_of_coordinates)","1ec790c1":"map_of_bangalore = folium.Map(location = [12.9716, 77.5946], zoom_start=10)\nmap_of_bangalore","be4469fc":"for index in range(len(list_of_coordinates)):\n    folium.Marker(list_of_coordinates[index], tooltip = top_ten_cities[index]).add_to(map_of_bangalore)\nmap_of_bangalore","26a55677":"rest_type_data = zomato[[\"rest_type\"]]\nrest_type_data.head()","aca05340":"#Let's draw bar graph for top thirty type of restaurants with respect to count.\ndraw_bar_graph_for_this_data(rest_type_data[\"rest_type\"])","413cf2d1":"dish_liked_data = zomato[[\"dish_liked\"]]","aa67b501":"dish_liked_data = dish_liked_data.dropna()","13d79a4a":"dish_liked_data.shape","d174831f":"array_of_dishes = np.array(dish_liked_data[\"dish_liked\"])","17fb84fb":"#Function call\nlist_of_top_fav_dishes = split_data(array_of_dishes)","52c641ee":"#Function call\nlist_of_items,respective_count_of_items = seperate_name_and_count(list_of_top_fav_dishes)","7222d0be":"direct_bar_graph(respective_count_of_items,list_of_items)","72999e52":"list_of_top_fav_dishes","163235b7":"cuisines_data = zomato[[\"cuisines\"]]","4d0f3e73":"cuisines_data = cuisines_data.dropna()","81ad5a88":"array_of_cuisines = np.array(cuisines_data[\"cuisines\"])","76d7c671":"#Function call\nlist_of_top_fav_cuisines = split_data(array_of_cuisines)","0cab4eae":"#Function call\nlist_of_items,respective_count_of_items = seperate_name_and_count(list_of_top_fav_cuisines)","d0e1b66a":"direct_bar_graph(respective_count_of_items,list_of_items)","c1150c2e":"list_of_top_fav_cuisines","f850b2e0":"cost_data = zomato[['approx_cost(for two people)']]","f6ebf78e":"cost_data['approx_cost(for two people)'] = cost_data['approx_cost(for two people)'].apply(lambda x : str(x).replace(\",\", \"\"))","6c5206b1":"plt.figure(figsize=(10, 7))\ntop_thirty = cost_data['approx_cost(for two people)'].value_counts()[:5]\nprint(top_thirty)\nprint(top_thirty.index)\nsns.barplot(x=top_thirty.index,y=top_thirty)\nplt.title(\"Rate analysis\")\nplt.xlabel(\"Price\")\nplt.ylabel(\"Count\")","0d51a6a8":"#Since it involves NLP portion, We will see it later.","836cf80c":"menu_item_data = zomato[['menu_item']]","b4c1533b":"array_of_menus = np.array(menu_item_data[\"menu_item\"])","d24273e9":"menu_list = []\nfor menu in tqdm(array_of_menus):\n    curr = menu.split(',')\n    curr = [item.strip() for item in curr]\n    menu_list.extend(curr)","6e49f65e":"count_menu_dict = Counter(menu_list)","0fb74d85":"list_of_top_five_menus = count_menu_dict.most_common(6)[1:]","b67c5780":"list_of_menus = []\nrespective_count_of_menus = []\nfor ele in list_of_top_five_menus:\n    list_of_menus.append(ele[0])\n    respective_count_of_menus.append(ele[1])","8c11d14f":"plt.figure(figsize=(10, 7))\nsns.barplot(x=respective_count_of_menus,y=list_of_menus)\nplt.title(\"Number of favourite cuisine\")\nplt.xlabel(\"Count\")\nplt.ylabel(\"Name\")","0ed45073":"type_data = zomato[['listed_in(type)']]","a7838447":"type_data[\"listed_in(type)\"].unique()","1ff76823":"direct_bar_graph(type_data[\"listed_in(type)\"].value_counts(),type_data[\"listed_in(type)\"].value_counts().index)","41841107":"city_data = zomato[['listed_in(city)']]","ff3670a8":"city_data['listed_in(city)'].unique()","9881581c":"direct_bar_graph(city_data[\"listed_in(city)\"].value_counts(),city_data[\"listed_in(city)\"].value_counts().index)","018ecd91":"## 'online_order' column","0d14d34f":"<b>Above analysis is informing us that maximum restaurants in town offers food at 300 cost for two people<\/b> ","436425d0":"## 'book_table' column","203b1156":"<b>Maximum restuarants hence are available in central bangalore<\/b>","6ac5c988":"# Custom functions","3fded537":"## 'listed_in(type)' column","930ad451":"# Inferences as of now","3887f4ad":"## 'phone' column","25521ab2":"<ol>\n    <li>Delivery and dine-out stands tall.<\/li>\n    <li>It is strange to believe that pubs and bars culture is not that popular <\/li>\n<\/ol>","d1f2017a":"# Loading the data","0ebd1259":"<ol>\n    <li> Food culture in bangalore prommotes restaurants accepting online orders<\/li>\n    \n    <li> CCD, Onesta, JustBake and others are few top restaurants chains in bangalore according to the count<\/li>\n    \n    <li>Restaurants with rating higher than 4.5 are very rare. Hence one thing is very clear , that it is impossible to win this game statisitically. You have to think of other factors too, (quality and type of chefs for instance) .Otherwise you can play safe and be in a rating of 3.5-4.0 which is safe and decent<\/li>\n    \n    <li>85% restaurants provide the facility of booking the table. Obviously staying in game needs that facility.<\/li>\n    \n    <li>Central bangalore is the prime location to open a restaurant. Although keep in mind that central bangalore is well explored. And regions otherwise are yet there to gain control.<\/li>\n    \n    <li>Quick bites and casual dining is the most popular type of restaurants<\/li>\n    \n    <li>No surprises that the demand of fast food like pasta and burger is top notch.  Hence every new restaurant must either serve top quality of these fast food, or else serve variety. <\/li>\n    \n    <li>Overall in bangalore north indian and chinese is the top favourite type of cuisines.<\/li>\n    \n    <li>300-400 is the best price range offered for two people by restaurants.Cost hence must be a feature taken care of. It may influence the business.<\/li>\n    \n    <li>Make sure rice is in your menu. That too of every type, veg and non veg.<\/li>\n    \n    <li>Delivery and dine outs are the most favourite trend . Pubs and bars dont have that much popularity. One reason might be the busy life of peoples in the city.<\/li>\n    \n    <li>To classify restaurants I believe it should be wise to divide rating in between a scale of 1-5 , then it will be a better scenario of classification<\/li>\n<\/ol>","d779fcab":"## 'dish_liked' column","a218ad7f":"# Inspecting various columns","2435d191":"## 'name' column","f97163e0":"## 'reviews_list' column","6463d94a":"## 'menu_item' column","2074aeea":"## 'votes' column","80d88975":"## 'rate' column","2f26d637":"## 'listed_in(city)' column","d51bc793":"<b>Maximum restaurants have rating higher than 3.5 and upto 4, also restaurants with rating higher than 4.5 are very rare.<\/b>","4cbae923":"## 'rest_type' column","109bc505":"## 'approx_cost(for two people)' column","56db8490":"<ul><li><b>Almost 60% of restaurants accept online orders in the city<\/b><\/li><\/ul>","d938a154":"<b>Clearly quick bites restaurants wins the race.<\/b>\n<b>Hence culture of bangalore promotes quick bites restaurants.<\/b>","c64c7f2b":"<b>More than 85% restaurants provide the facility of booking table<\/b>","a68f7974":"<b> Since the problem with locations is that it is hard to find the geolocation due to limited calls through google api hence it would be better to encode the cities on some priority basis <\/b>","791d7072":"## 'cuisines' column","893eae98":"# Loading the libraries","6e9c061a":"<b>Although CCD has maximum number of outlets in city, yet it's average rating is only 3.3<\/b>","1b40b3d4":"\n<ul>\n    <li><b>There are total 51717 rows and 17 columns in data<\/b><\/li>\n    <li><b>Column votes is the only available column with integer values<\/b><\/li>\n    <li><b>rate,phone,location,rest_type,dish_liked,cuisines,approx_cost these columns in particular have missing values<\/b><\/li>\n    <li><b>More than 50% data in dataframe is missing. You have to use data imputation<\/b><\/li>\n    <li><b>First thing I am going to do is pick up various columns and draw EDA to get different inferences out of them<\/b><\/li>\n<\/ul>","f6f02e4c":"## 'location' column"}}