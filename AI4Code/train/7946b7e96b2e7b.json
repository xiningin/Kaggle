{"cell_type":{"fd08e9f5":"code","0c0baed9":"code","346f2104":"code","909d2c04":"code","6cbc90f2":"code","8d13fc7a":"code","b93dc198":"code","dd390592":"code","425450c3":"code","803603f2":"code","fece24c3":"code","be97fb75":"code","5a030aea":"code","bcb865b4":"code","f06705bd":"code","375718bb":"code","919d65be":"code","27b0c59d":"code","cd4bc627":"code","76b48406":"code","00428b76":"code","21e00226":"code","d623f9d0":"code","03c20fe7":"markdown","c829817e":"markdown","51119e17":"markdown","1a8ec81c":"markdown","33534c96":"markdown","b053da07":"markdown","d971af75":"markdown","ce175b8f":"markdown","1b4d45c8":"markdown","052d233b":"markdown","12ba29e1":"markdown","70165ea9":"markdown","66d7f29b":"markdown","cf4ce593":"markdown","d18acafd":"markdown","07892899":"markdown","ccf4a194":"markdown","a4461976":"markdown","5f628a00":"markdown","939d0ee7":"markdown"},"source":{"fd08e9f5":"run python","0c0baed9":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np\nimport geopandas as gpd\nimport plotly.graph_objects as go\nimport matplotlib.ticker as ticker\n\n\n\nprint ('All Set!')","346f2104":"import folium\n\nprint('Folium installed and imported!')","909d2c04":"df=pd.read_csv('..\/input\/2019-accident-data\/US_Accidents_Dec19.csv')\n\nus_accidents = df","6cbc90f2":"us_accidents.shape","8d13fc7a":"us_accidents.head()","b93dc198":"us_accidents.isnull().sum()","dd390592":"us_accidents.drop(['Astronomical_Twilight','Nautical_Twilight','Civil_Twilight','TMC','End_Lng','End_Lat','Number','Wind_Chill(F)',\n                  'Precipitation(in)'], axis=1,inplace=True)","425450c3":"us_accidents.dropna(subset=[\"Sunrise_Sunset\",\"Description\",\"Zipcode\",\"Timezone\",\n                            \"Airport_Code\",\"Weather_Timestamp\",\"Temperature(F)\",\"Humidity(%)\",\"Pressure(in)\",\"Visibility(mi)\",\n                           \"Wind_Direction\",\"Weather_Condition\"], axis=0, how= 'any',inplace= True)","803603f2":"us_accidents.drop(['Wind_Speed(mph)'], axis=1,inplace=True)","fece24c3":"us_accidents.isnull().sum()","be97fb75":"us_accidents.shape","5a030aea":"world = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))","bcb865b4":"!wget --quiet https:\/\/s3-api.us-geo.objectstorage.softlayer.net\/cf-courses-data\/CognitiveClass\/DV0101EN\/labs\/Data_Files\/world_countries.json -O world_countries.json\n    \nprint('GeoJSON file downloaded!')","f06705bd":"state_count = pd.value_counts(df['State'])\n\nfig = go.Figure(data=go.Choropleth(\n    locations=state_count.index,\n    z = state_count.values.astype(float),  \n    locationmode = 'USA-states',     \n    colorscale = 'plasma',\n    colorbar_title = \"Count\",\n))\n\nfig.update_layout(\n    title_text = 'United States Accidents Visualization (2016-2019)',\n    geo_scope='usa', \n)\n\nfig.show()\n\n","375718bb":"\n\ndf_top = df.groupby('State').size().to_frame('Counts')\ndf_top = df_top.reset_index().sort_values('Counts', ascending = False)[:10]\ndf_top = df_top[::-1]   \n\ncolors = ['cyan', 'gold', 'coral', 'dodgerblue',\n     'palevioletred', 'peru', 'lightblue', 'lightsalmon','crimson', 'lawngreen',]\n\nfig, ax=plt.subplots(figsize=(15,8))\nax.barh(df_top['State'], df_top['Counts'], color = colors)\n\nfor i, (value, name) in enumerate(zip(df_top['Counts'], df_top['State'])):\n        ax.text(value, i,     name,           size=14, weight=600, ha='right', va='bottom')\n        ax.text(value, i-.25,     f'{value:,.0f}',  size=14, ha='left',  va='center')\n        \nax.text(0, 1.06, 'by State', transform=ax.transAxes, size=12, color='#777777')\nax.xaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))\nax.xaxis.set_ticks_position('top')\nax.tick_params(axis='x', colors='#777777', labelsize=12)\nax.set_yticks([])\nax.margins(0, 0.01)\nax.grid(which='major', axis='x', linestyle='-')\nax.set_axisbelow(True)\nax.text(0, 1.12, 'Top 10 States with the Highest Number of Accidents',\n            transform=ax.transAxes, size=24, weight=600, ha='left')\nplt.box(False)\n\n","919d65be":"us_accidents.columns = list(map(str, us_accidents.columns))","27b0c59d":"us_accidents['Sunrise_Sunset'].unique()\n","cd4bc627":"us_accidents.groupby('Sunrise_Sunset').size()\n","76b48406":"\ndf.groupby('Sunrise_Sunset').size().plot(kind = 'barh', \n                                  color= 'lawngreen',\n                                 align = 'center',\n                                edgecolor = 'b',\n                                 linewidth = 0.9,\n                                 width = 0.3,\n                                xerr=np.std(df.groupby('Sunrise_Sunset').size()),\n                                 grid = True,figsize=(10, 6));\n\n\nplt.title('Accidents by Time of Day', fontsize=20)\nplt.xlabel('Accidents (Millions)', fontsize=16)\nplt.ylabel('Time of Day', fontsize=16)\n","00428b76":"df_sev_day= us_accidents[['Severity','Sunrise_Sunset']]","21e00226":"fig, ax = plt.subplots(figsize=(10, 6))\nax.set_title('Accident Severity by Visibility', fontsize=18)\nax.plot(df['Severity'], df['Visibility(mi)'], 'ko');\nplt.xlabel(\"Severity\")\nplt.ylabel('Visibility (mi)')\n","d623f9d0":"sns.boxplot(x='Severity', y='Sunrise_Sunset', data=df_sev_day, linewidth=2.5)\nplt.title('Accident Severity by part of day', fontsize=14)\nplt.xlabel('Severity of Accident', fontsize=12)\nplt.ylabel('Day Part', fontsize=12)","03c20fe7":"https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/","c829817e":"### After dropping the necessary columns and rows, our data no longer has missing values. We'll use the shape() function to ensure that we still have a very large amount of clean data to work with. With that said, the next part of this project.","51119e17":"### First, lets inspect the dataset. By using the shape(), head(), and isnull() functions; we can get a better picture look at our dataset and identify how to best prepare the data for analysis. In the below cell, we discover that 49 columns and just under three million rows make up the shape of our data set.","1a8ec81c":"### Below is where remove the columns from the dataframe.","33534c96":"# Car Accidents in the Contiguous United States and Why Americans should consider driving more at night. \n## A data analysis and visualization by Montel Hardy","b053da07":"### This last visualization just confirms accident severity does not differ by time of day. While the scatter plot has proved a lack of visibility can increase the likelihood of higher severity accidents, this visibility shouldn't be directly attributed to night driving.","d971af75":"### In the above scatter plot, I examine the relationship between Severity and Visibility. The easy takeaway from this distribution and is that most accidents occuring in the dataset have a severity of either two or three. The next takeaway is, more serious accidents are on a decline if there's more than 80 miles of visibility do drivers. So the most actionable insights here are to not speed through curves, uphill roads, downhill rows, or in dense fog. Extreme caution must be used when approaching driving scenarios with less visibility.","ce175b8f":"# Data Cleaning","1b4d45c8":"### The above map shows us that California, Texas, and Florida have the largest amount of car accidents. After those three the totals of the rest of the high-accident states seem to level off a bit.\n\n### To get a better look at states with high car accident numbers, I created a top ten list. I used the groupby function to gather these numbers in a dataframe. I varied the colors to make it look more visually apealling.","052d233b":"## References & Disclaimer\n\n\n  #### Moosavi, Sobhan, Mohammad Hossein Samavatian, Srinivasan Parthasarathy, and Rajiv Ramnath. \u201cA Countrywide Traffic Accident Dataset.\u201d, arXiv preprint arXiv:1906.05409 (2019).\n   \n #### Moosavi, Sobhan, Mohammad Hossein Samavatian, Srinivasan Parthasarathy, Radu Teodorescu, and Rajiv Ramnath. \u201cAccident Risk Prediction based on Heterogeneous Sparse Data: New Dataset and Insights.\u201d In proceedings of the 27th ACM SIGSPATIAL International Conference on Advances in Geographic Information Systems, ACM, 2019.******\n\n\n#### This dataset is being distributed only for Research purposes, under Creative Commons Attribution-Noncommercial-ShareAlike license (https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/).  You may cite the above papers if you use this dataset.*******\n\n#### The dataset can be found here: https:\/\/osu.app.box.com\/v\/us-accidents-dec19","12ba29e1":"### The following is the cleaning, analysis, and visualization of a dataset covering nearly three years of car accident data in the United States. The below dataset features about three million accidents spanning 48 states from February 2016 to December 2019, collected by Bing and Mapquest. Below are some of the insights from the data I've visualized, many are included near their visualizations.\n\n* Three times as many accidents havve occurred during the day than at night.\n* Severe accidents aren't occuring more frequently at night than during the day.\n* For more severe accidents (rating of 3 or 4), there is strong is a correlation between reduced visibility and accident severity.\n* States with large populations don't necessarily have a large number of accidents aside from California. Part of this could be due to the accesibility of public transportation in some states.","70165ea9":"# Data Visualization","66d7f29b":"### The dataframe produced by the modified isnull() function identifies the amount of rows with missing data for each column. First, rows that have no value or have value that is unintelligible will be deleted from the dataset. As you can see below, there are a good number of columns with missing data. \n\n### We'll delete a few columns that we won't be using. This process will gave us a dataset with no missing values, a few less columns and still leave over two million accidents for analysis and visualization.","cf4ce593":"### We can see a preview of the aforementioned rows and columns below. ","d18acafd":"### Next, we explore the relationship betwwen the frequency of accidents by part of day (day or night). I use the groupby() function to gather the data, then I visualize it with a bar chart.","07892899":"# Getting Started","ccf4a194":"# Conclusion\n\n\n### This notebook featured data cleaning, analysis, and visualization of a car accident dataset with well over two million entries. This was a fun, timely datasets with some insights that may be worth sharing with a friend, coworker, or family member. \n\n\n### Thanks for reading and be safe!\n\n### - Montel N. Hardy\n","a4461976":"### These findings are very interesting because they may dispute with conventional beliefs. Due to the potential for less visibility, many people may fear night driving and try to avoid driving after sunset.\n\n### Conversely, one could say a good reason for this data is because generally people drive more during the day. However, the data set we're working with didn't quantify how many drivers were on the road during each day part. Additionally, if we assume that statement to be true, thats would support the decision to drive more at night. The following visualizations deal with other factors surrounding accidents.  \n\n### In the below scatter plot, we shift gears to analyze the impact visibility has on accident severity in the boxplot below.","5f628a00":"###  First, I'll confirm that I'm running Python and import the proper libraries. Next, I will read in the csv file.","939d0ee7":"### For our first visualization we'll use the US map to visualize the accident data across the 48 states. In order to do this, we have to read in a world map file and download a GeoJSON file."}}