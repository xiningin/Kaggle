{"cell_type":{"ca7d987c":"code","cffa38ca":"code","a2fd3ede":"code","0a9a0ed8":"code","c8e4e028":"code","c77ff4e9":"code","994f1783":"code","9056e561":"code","2e1111db":"code","e6967b8a":"code","641f03a2":"code","8f506926":"code","58685df5":"code","ca4e78ba":"code","b16dfdf0":"code","8a4a5dde":"code","9c008160":"markdown","dd9beaeb":"markdown","41d5c15e":"markdown","c9111540":"markdown","2e06dd4d":"markdown","d30308c2":"markdown","d0e93268":"markdown","33741fed":"markdown","75150474":"markdown","accd56ed":"markdown","c562ff69":"markdown"},"source":{"ca7d987c":"import pandas as pd\nimport numpy as np","cffa38ca":"premierLeague = pd.read_csv(\"..\/input\/premier-league-19922017\/premierLeague_tables_1992-2017.csv\")","a2fd3ede":"premierLeague.head()","0a9a0ed8":"premierLeague.shape","c8e4e028":"premierLeague = premierLeague[['season', 'team', 'points']]\npremierLeague.head()","c77ff4e9":"df = premierLeague.pivot_table(values='points', index=['season'], columns='team')","994f1783":"df.fillna(0, inplace=True)\ndf.sort_values(list(df.columns), inplace=True)\n\ndf = df.sort_index()","9056e561":"df.head()","2e1111db":"df.iloc[:, 0: -1] = df.iloc[:, 0: -1].cumsum()","e6967b8a":"df.head()","641f03a2":"top10 = set()\n\nfor index, row in df.iterrows():\n    top10 |= set(row[row > 0].sort_values(ascending=False).head(10).index)\n\ndf = df[top10]","8f506926":"df.head()","58685df5":"df.shape","ca4e78ba":"!pip install bar_chart_race","b16dfdf0":"import bar_chart_race as bcr","8a4a5dde":"bcr.bar_chart_race(df=df, n_bars=10, sort='desc', title=\"Premier League 1992-2017\", filename='PL_clubs.mp4')","9c008160":"By this time, now we can actually generate a bar chart race already. However, we have in total of 49 clubs to visualize. This will lead to an overcrowded visualization that wouldn\u2019t be pleasing to our eyes. To reduce the clutter, we will only visualize the top 10 clubs over time.\n\nDue to this reason, there is no point to keep the information on clubs that will never make a top 10 at any given time. So, it\u2019ll be better to remove them from the dataset completely. The below code will do the job.","dd9beaeb":"Remove unnecessary features","41d5c15e":"Now, we need to aggregate the value by accumulating each club\u2019s points over time.\n\nTo aggregate the data, we can use cumsum method from Pandas.","c9111540":"- df \u2014 The name of our dataframe.\n- n_bars \u2014 The number of bars that should be displayed in the visualization.\n- sort \u2014 The sorting method in the visualization, can be in ascending order or descending order.\n- title \u2014 The title of your bar chart race visualization.\n- filename \u2014 The filename of your visualization if you want to save it into mp4 file.","2e06dd4d":"The bar-chart-race library demands a specific format for the dataset for it to be able to generate a bar chart race animation. To transform our data into the proper format, we can use a pivot table method from Pandas.\n\n- data \u2014 the dataframe that we want to transform.\n- index \u2014 the feature that we want to use as an index. In our case, it should be the date.\n- columns \u2014 the feature that we want to transform where each of the unique value of the feature becomes the column. In our case, this should be the team name.\n- values \u2014 the value that represents each column in each row. In our case, it should be the number of points.","d30308c2":"Note that when you want to save the bar chart animation to mp4 file, you need to have a proper ffmpeg file in your computer as prerequisites. To install ffmpeg, you can go to [this site](https:\/\/ffmpeg.org\/). After the installation process, you need to add the ffmpeg file to your path.","d0e93268":"Let's generate the bar chart race!","33741fed":"Replace NaN values","75150474":"Since we\u2019re using a custom dataset, we need to, obviously, preprocess our data to the correct format. If you take a look at the official documentation of bar-chart-race library, you need to preprocess your data into a specific format before you can generate your own bar chart race animation.\n\nTo be able to generate a bar chart race, you need to convert your data into wide-format where:\n\n- The row represents the time period. Each row represents a single period of time.\n- The column represents the different categories that we want to visualize. Each column holds the value of the categories.\n- Use the time component as the index.","accd56ed":"By replacing the NaN values with 0, we can interpret the data properly. If a club scores 0 point in any given season, it means that the club wasn\u2019t competing in the Premier League.","c562ff69":"## Bar Chart Race - Premier League\n\nDownload the dataset and load the libraries\n\n[https:\/\/www.kaggle.com\/lynuhs\/premier-league-19922017\/version\/1?select=premierLeague_tables_1992-2017.csv]"}}