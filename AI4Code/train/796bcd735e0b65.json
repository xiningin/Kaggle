{"cell_type":{"155989a2":"code","2ab4666d":"code","473c2ae2":"code","e031fbcc":"code","858ab36a":"code","bb248016":"code","87f4f99a":"code","f6e511e1":"code","a0290277":"code","69db3ed4":"code","33883580":"code","b4a74071":"code","b1d88e9e":"code","97fd34ac":"code","4a14697b":"code","6ee136c3":"code","b12140f7":"code","df17bee0":"code","7e70bc8c":"code","49595917":"code","77e221ae":"code","564c475c":"code","b3cdea9c":"code","f02988a4":"code","4fa501e2":"code","dc4b9129":"code","3e051ac3":"code","20bb3fc7":"code","b765447e":"code","fae8ec23":"code","6c622cae":"code","4244ea21":"code","5b27487d":"code","fbc82f41":"code","fadf7805":"code","e07d759b":"code","4d991f14":"code","b75b9f1b":"code","e8388aaf":"code","e0fcf7bc":"code","87cf5a6a":"markdown","299fa8d2":"markdown","e735f21f":"markdown","a4a5f7e8":"markdown","e91dcd40":"markdown","c4fdaaa0":"markdown","45026206":"markdown","132a0e3f":"markdown","8761a74c":"markdown","47868f3c":"markdown","fb4f15d4":"markdown","4bd36595":"markdown","e9c785ba":"markdown","0269f7f1":"markdown","db125993":"markdown","bea9f067":"markdown","20f24772":"markdown","041ca379":"markdown","54679007":"markdown","e80bf0e2":"markdown","4966140d":"markdown","a9123d34":"markdown","c002d6db":"markdown","031428b5":"markdown","21c41f2c":"markdown","2d64fb27":"markdown","8efc21aa":"markdown","1bc13c62":"markdown","06a18607":"markdown","a94a6631":"markdown","9994e5ca":"markdown","908757df":"markdown","0f63303a":"markdown","bfedb957":"markdown","a70d3d48":"markdown","d699d71d":"markdown","86edfd16":"markdown","3beb689c":"markdown","80ae6456":"markdown","6d061b9a":"markdown","018d2da9":"markdown","c57378f3":"markdown","e7d33fa4":"markdown","230feb21":"markdown","cad552e3":"markdown","c88da495":"markdown","1e580719":"markdown","01b1291a":"markdown","5e8da332":"markdown","d3b530ab":"markdown","237397e3":"markdown","f695a60d":"markdown","9c03658a":"markdown","63ef4d90":"markdown","1e7ca9fb":"markdown","79b04d5c":"markdown","fb67f7dd":"markdown","56239223":"markdown","ea843b1d":"markdown","7387dc29":"markdown","186e992e":"markdown","b27742d5":"markdown","ab874ce7":"markdown","e7130176":"markdown","15ff631a":"markdown","dab619af":"markdown","e6185d07":"markdown","9a8a2ba3":"markdown","f422f468":"markdown","6926f733":"markdown","ede3b6c1":"markdown","25e53bb9":"markdown","3c6a819d":"markdown","b4a28286":"markdown","adbe0e0a":"markdown","b7b8db73":"markdown"},"source":{"155989a2":"import pandas as pd\nimport numpy as np\nimport matplotlib as matplot\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport scipy.stats as stats\nimport statsmodels.api as sm\n\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.model_selection import train_test_split, KFold, cross_val_score\nfrom sklearn.metrics import accuracy_score, classification_report, precision_score, recall_score, confusion_matrix, precision_recall_curve\nfrom sklearn.metrics import roc_auc_score, roc_curve\nfrom sklearn.metrics import classification_report, confusion_matrix\nfrom sklearn.preprocessing import RobustScaler\n\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.cluster import KMeans\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.ensemble import ExtraTreesClassifier\nfrom sklearn.ensemble import BaggingClassifier\nfrom sklearn.ensemble import AdaBoostClassifier\nfrom sklearn.ensemble import GradientBoostingClassifier\nfrom sklearn.ensemble import VotingClassifier\nfrom sklearn.ensemble import RandomForestClassifier","2ab4666d":"df = pd.read_csv('..\/input\/hr-analytics\/HR_comma_sep.csv')\ndf.head()","473c2ae2":"# Valores nulos\ndf.isnull().sum()","e031fbcc":"# Renomear alguns colunas para melhor leitura\ndf = df.rename(columns={\n    'Work_accident': 'work_accident',\n    'promotion_last_5years': 'promotion_last_5_years',\n    'Department': 'department'\n})","858ab36a":"# Mover a coluna \"left\" (classe) para a primeira coluna da tabela\nfront = df['left']\ndf.drop(labels=['left'], axis=1, inplace=True)\ndf.insert(0, 'left', front)\ndf.head()","bb248016":"# Dimens\u00f5es\ndf.shape","87f4f99a":"# Tipos\ndf.dtypes","f6e511e1":"# Percentual de demiss\u00f5es\nleft_rate = df.left.value_counts() \/ len(df)\nleft_rate","a0290277":"# Alguns dados sobre as demiss\u00f5es\nleft_summary = df.groupby('left')\nleft_summary.mean()","69db3ed4":"# Descri\u00e7\u00e3o estat\u00edstica dos dados\ndf.describe().T","33883580":"# Matriz de correla\u00e7\u00e3o\ncorr = df.corr()\ncorr = (corr)\n\nplt.figure(figsize=(8, 6))\n\nsns.heatmap(corr, vmin=-1, vmax=1, annot=True, cmap='coolwarm_r')\n\nplt.show()","b4a74071":"# Popula\u00e7ao dos funcion\u00e1rios\nemp_population = df['satisfaction_level'][df['left'] == 0].mean()\n\n# Popula\u00e7\u00e3o dos funcion\u00e1rios demitidos\nemp_left_population = df['satisfaction_level'][df['left'] == 1].mean()\n\nprint('Satisfa\u00e7\u00e3o m\u00e9dia dos funcion\u00e1rios que N\u00c3O FORAM demitidos:',emp_population)\nprint('Satisfa\u00e7\u00e3o m\u00e9dia dos funcion\u00e1rios que FORAM demitidos: ', emp_left_population)","b1d88e9e":"stats.ttest_1samp(a=df[df['left'] == 1]['satisfaction_level'], popmean=emp_population)","97fd34ac":"# Grau de confian\u00e7a\ndegree_freedom = len(df[df['left'] == 1])\n# Quartil esquerdo\nLQ = stats.t.ppf(0.025, degree_freedom)\n# Quartil direito\nRQ = stats.t.ppf(0.975, degree_freedom)\n\nprint('Distrubui\u00e7\u00e3o t LQ: ', LQ)\nprint('Distrubui\u00e7\u00e3o t RQ: ', RQ)","4a14697b":"f, ax = plt.subplots(ncols=3, figsize=(15, 5))\n\n# satisfaction_level\nsns.distplot(df.satisfaction_level, color='g', ax=ax[0]).set_title('Distribui\u00e7\u00e3o do n\u00edvel de satisfa\u00e7\u00e3o')\nax[0].set_ylabel('Quantidade')\n\n# last_evaluation\nsns.distplot(df.last_evaluation, color='r', ax=ax[1]).set_title('Distribui\u00e7\u00e3o da avalia\u00e7\u00e3o')\n\n# average_montly_hours\nsns.distplot(df.average_montly_hours, color='b', ax=ax[2]).set_title('Distribui\u00e7\u00e3o da m\u00e9dia de horas trabalhadas mensalmente')\n\nplt.tight_layout()\nplt.show()","6ee136c3":"plt.figure(figsize=(10, 4))\n\nsns.countplot(y='salary', hue='left', palette=['b', 'r'], data=df)\nplt.title('Sal\u00e1rio vs Demiss\u00e3o')\nplt.grid(axis='x')\n\nplt.show()","b12140f7":"plt.figure(figsize=(12, 6))\n\nsns.countplot(x='department', data=df)\nplt.title('Departamentos')\nplt.xlabel('Departamentos')\nplt.xticks(rotation=-45)\nplt.grid(axis='y')\n\nplt.show()","df17bee0":"plt.figure(figsize=(12, 5))\n\nsns.countplot(y='department', hue='left', palette=['b', 'r'], data=df)\nplt.title('Demiss\u00f5es por departamento')\n\nplt.show()","7e70bc8c":"plt.figure(figsize=(10, 6))\n\nsns.barplot(x='number_project', y='number_project', hue='left', palette=['blue', 'red'], data=df, estimator=lambda x: len(x) \/ len(df) * 100)\nplt.ylabel('Percentual')\n\nplt.show()","49595917":"plt.figure(figsize=(15, 4))\n\nsns.kdeplot(df.loc[(df['left'] == 0), 'last_evaluation'], shade=True, label='N\u00e3o demitido')\nsns.kdeplot(df.loc[(df['left'] == 1), 'last_evaluation'], color='r', shade=True, label='Demitido')\nplt.title('Distribui\u00e7\u00e3o dos funcion\u00e1rios \\nN\u00e3o demitido vs Demitido')\nplt.show()","77e221ae":"plt.figure(figsize=(12, 5))\n\nsns.kdeplot(df.loc[(df['left'] == 0), 'average_montly_hours'], color='b', shade=True, label='N\u00e3o demitido')\nsns.kdeplot(df.loc[(df['left'] == 1), 'average_montly_hours'], color='r', shade=True, label='Demitido')\nplt.xlabel('M\u00e9dia de horas mensais')\nplt.title('Distribui\u00e7\u00e3o de horas mensais trabalhadas \\nN\u00e3o demitido vs Demitido')\n\nplt.show()","564c475c":"plt.figure(figsize=(12, 5))\n\nsns.kdeplot(df.loc[(df['left'] == 0), 'satisfaction_level'], color='b', shade=True, label='N\u00e3o demitido')\nsns.kdeplot(df.loc[(df['left'] == 1), 'satisfaction_level'], color='r', shade=True, label='Demitido')\nplt.xlabel('Satisfa\u00e7\u00e3o')\nplt.title('Distribui\u00e7\u00e3o da satisfa\u00e7\u00e3o \\nN\u00e3o demitido vs Demitido')\n\nplt.show()","b3cdea9c":"plt.figure(figsize=(10, 5))\n\nsns.boxplot(x='number_project', y='average_montly_hours', hue='left', palette=['lightblue','r'], data=df)\n\nplt.show()","f02988a4":"plt.figure(figsize=(10, 5))\n\nsns.boxplot(x='number_project', y='last_evaluation', hue='left', palette=['lightblue','r'], data=df)\n\nplt.show()","4fa501e2":"plt.figure(figsize=(10, 6))\n\nsns.lmplot(x='satisfaction_level', y='last_evaluation', palette=['lightblue','r'], data=df, fit_reg=False, hue='left')\n\nplt.show()","dc4b9129":"plt.figure(figsize=(10, 6))\nsns.barplot(x='time_spend_company', y='time_spend_company', hue='left', palette=['b', 'r'], data=df, estimator=lambda x: len(x) \/ len(df) * 100)\nplt.ylabel('Porcentagem')\n\nplt.show()","3e051ac3":"# Graph and create 3 clusters of Employee Turnover\nkmeans = KMeans(n_clusters=3,random_state=2)\n\nkmeans.fit(df[df.left==1][[\"satisfaction_level\",\"last_evaluation\"]])\n\nkmeans_colors = ['green' if c == 0 else 'blue' if c == 2 else 'red' for c in kmeans.labels_]\n\nfig = plt.figure(figsize=(10, 6))\n\nplt.scatter(x=\"satisfaction_level\",y=\"last_evaluation\", data=df[df.left==1], alpha=0.25,color = kmeans_colors)\nplt.xlabel(\"N\u00edvel de satisfa\u00e7\u00e3o\")\nplt.ylabel(\"Avalia\u00e7\u00e3o\")\nplt.scatter(x=kmeans.cluster_centers_[:,0],y=kmeans.cluster_centers_[:,1],color=\"black\",marker=\"X\",s=100)\nplt.title(\"Clusters dos funcion\u00e1rios demitidos\")\n\nplt.show()","20bb3fc7":"plt.rcParams['figure.figsize'] = (12,6)\n\ndf['department'] = df['department'].astype('category').cat.codes\ndf['salary'] = df['salary'].astype('category').cat.codes\n\nX=df.drop('left', 1)\ny=df['left']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42, stratify=y)\n\ntree = DecisionTreeClassifier(class_weight='balanced', min_weight_fraction_leaf=0.01)\n\nmodel = tree.fit(X_train, y_train)\n\nimportances = model.feature_importances_\nfeat_names = df.drop('left', 1).columns\n\nindices = np.argsort(importances)[::-1]\n\nplt.title('Import\u00e2ncia das \"features\"')\nplt.bar(range(len(indices)), importances[indices], color='blue', align='center')\nplt.step(range(len(indices)), np.cumsum(importances[indices]), where='mid', label='Cumulativo')\nplt.xticks(range(len(indices)), feat_names[indices], rotation='vertical', fontsize=14)\nplt.xlim([-1, len(indices)])\nplt.grid(True)\n\nplt.show()","b765447e":"df['int'] = 1\nindep_var = ['satisfaction_level', 'last_evaluation', 'time_spend_company', 'int', 'left']\ndf = df[indep_var]","fae8ec23":"X = df.drop('left', 1)\ny = df.left\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.15, random_state=42, stratify=y)\n\nprint(X_train.shape)\nprint(X_test.shape)\nprint(y_train.shape)\nprint(y_test.shape)","6c622cae":"iv = ['satisfaction_level', 'last_evaluation', 'time_spend_company', 'int']\n\nlog_reg = sm.Logit(y_train, X_train[iv])\nanswer = log_reg.fit()\n\nanswer.summary()\nanswer.params","4244ea21":"coef = answer.params\n\ndef y(coef, satisfaction_level, last_evaluation, time_spend_company):\n    return coef[3] + coef[0] * satisfaction_level + coef[1] * last_evaluation + coef[2] * time_spend_company\n\ny1 = y(coef, 0.7, 0.8, 3)\np = np.exp(y1) \/ (1 + np.exp(y1))\np","5b27487d":"def base_model(X):\n    y = np.zeros(X.shape[0])\n    \n    return y","fbc82f41":"X = df.drop('left', 1)\ny = df.left\n\nX_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.15, random_state=42, stratify=y)","fadf7805":"y_base = base_model(X_test)\nprint('Acur\u00e1cia base', round(accuracy_score(y_test, y_base), 3))","e07d759b":"model = LogisticRegression(penalty='l2', C=1)\n\nmodel.fit(X_train, y_train)\n\npreds = model.predict(X_test)\nprint('Acur\u00e1cia de Logistic Regression', round(accuracy_score(y_test, preds), 3))","4d991f14":"kfold = KFold(n_splits=10, random_state=42)\n\ncv_model = LogisticRegression(class_weight='balanced')\nresults = cross_val_score(cv_model, X_train, y_train, cv=kfold, scoring='roc_auc')\n\nprint('AUC: {:.3f} ({:.3f})'.format(results.mean(), results.std()))","b75b9f1b":"print('----------- Base --------------')\nbase_roc_auc = roc_auc_score(y_test, base_model(X_test))\nprint('AUC base = {:.2f}'.format(base_roc_auc))\nprint(classification_report(y_test, base_model(X_test)))\n\nlogis = LogisticRegression(class_weight = \"balanced\")\nlogis.fit(X_train, y_train)\nprint (\"\\n\\n ------ Logistic Regression ---------\")\nlogit_roc_auc = roc_auc_score(y_test, logis.predict(X_test))\nprint (\"Logistic AUC = %2.2f\" % logit_roc_auc)\nprint(classification_report(y_test, logis.predict(X_test)))\n\n\n# Decision Tree \ndtree = DecisionTreeClassifier(class_weight=\"balanced\", min_weight_fraction_leaf=0.01)\ndtree = dtree.fit(X_train,y_train)\nprint (\"\\n\\n ------ Decision Tree ------\")\ndt_roc_auc = roc_auc_score(y_test, dtree.predict(X_test))\nprint (\"Decision Tree AUC = %2.2f\" % dt_roc_auc)\nprint(classification_report(y_test, dtree.predict(X_test)))\n\n\n# Random Forest\nrf = RandomForestClassifier(\n    n_estimators=1000, \n    max_depth=None, \n    min_samples_split=10, \n    class_weight=\"balanced\" \n    )\nrf.fit(X_train, y_train)\nprint (\"\\n\\n ------Random Forest ------\")\nrf_roc_auc = roc_auc_score(y_test, rf.predict(X_test))\nprint (\"Random Forest AUC = %2.2f\" % rf_roc_auc)\nprint(classification_report(y_test, rf.predict(X_test)))\n\n\n# Ada Boost\nada = AdaBoostClassifier(n_estimators=400, learning_rate=0.1)\nada.fit(X_train,y_train)\nprint (\"\\n\\n ------- AdaBoost ------\")\nada_roc_auc = roc_auc_score(y_test, ada.predict(X_test))\nprint (\"AdaBoost AUC = %2.2f\" % ada_roc_auc)\nprint(classification_report(y_test, ada.predict(X_test)))","e8388aaf":"plt.figure(figsize=(10, 6))\n\nfpr, tpr, thresholds = roc_curve(y_test, logis.predict_proba(X_test)[:,1])\nrf_fpr, rf_tpr, rf_thresholds = roc_curve(y_test, rf.predict_proba(X_test)[:,1])\ndt_fpr, dt_tpr, dt_thresholds = roc_curve(y_test, dtree.predict_proba(X_test)[:,1])\nada_fpr, ada_tpr, ada_thresholds = roc_curve(y_test, ada.predict_proba(X_test)[:,1])\n\nplt.figure()\n\n# Plot Logistic Regression ROC\nplt.plot(fpr, tpr, label='Logistic Regression (area = %0.2f)' % logit_roc_auc)\n\n# Plot Random Forest ROC\nplt.plot(rf_fpr, rf_tpr, label='Random Forest (area = %0.2f)' % rf_roc_auc)\n\n# Plot Decision Tree ROC\nplt.plot(dt_fpr, dt_tpr, label='Decision Tree (area = %0.2f)' % dt_roc_auc)\n\n# Plot AdaBoost ROC\nplt.plot(ada_fpr, ada_tpr, label='AdaBoost (area = %0.2f)' % ada_roc_auc)\n\n# Plot Base Rate ROC\nplt.plot([0,1], [0,1],label='Base Rate')\n\nplt.xlim([0.0, 1.0])\nplt.ylim([0.0, 1.05])\nplt.xlabel('False Positive Rate')\nplt.ylabel('True Positive Rate')\nplt.title('ROC Graph')\nplt.legend(loc=\"lower right\")\nplt.show()","e0fcf7bc":"preds = logis.predict_proba(X_test)\npd.DataFrame(preds, columns=['Not left', 'Left']).sort_values(by=['Left'], ascending=False).head()","87cf5a6a":"### Demiss\u00e3o vs Avalia\u00e7\u00e3o","299fa8d2":"### K-Means das demiss\u00f5es","e735f21f":"E sobre a correla\u00e7\u00e3o negativa, faz todo o sentido que, **quanto menor o n\u00edvel de satisfa\u00e7\u00e3o de um funcion\u00e1rio, maior a chance dele pedir demiss\u00e3o ou ser demitido.**","a4a5f7e8":"Iremos fazer um T-Test com um **n\u00edvel de confian\u00e7a de 95%** e verificar se devemos rejeitar a hip\u00f3tese nula de que a amostra possui a mesma distribui\u00e7\u00e3o da popula\u00e7\u00e3o de funcion\u00e1rios.","e91dcd40":"Os funcion\u00e1rios que possuem mais chance se sair da empresa (atrav\u00e9s de uma demiss\u00e3o por justa causa ou sa\u00edda volunt\u00e1ria) s\u00e3o aqueles que:\n1. Est\u00e3o com **trabalho insuficiente** (menor que 150h\/m\u00eas ou 6h\/dia)\n2. Est\u00e3o com **trabalho demais** (maior que 250h\/m\u00eas ou 10h\/dia)\n3. Possuem **avalia\u00e7\u00f5es muito baixas ou muito altas**\n4. Recebem **sal\u00e1rios baixos ou m\u00e9dios**\n5. Trabalham em **2, 6 ou 7** projetos\n6. J\u00e1 est\u00e3o na empresa h\u00e1 4 ou 5 anos","c4fdaaa0":"No exemplo acima, utilizamos o modelo **Logistic Regression** e fazendo uma previs\u00e3o com os dados de teste, podemos visualizar quais os 5 funcion\u00e1rios com maior probabilidade de deixar a ampresa.","45026206":"### Quantidade de projetos vs M\u00e9dia de horas mensais ","132a0e3f":"Utilizando o modelo \"Decision tree classifier\", podemos ranquear as \"features\" com maior import\u00e2ncia durante a predi\u00e7\u00e3o, que nesse caso, o top 3 consiste em:\n1. satisfaction_level\n2. time_spend_company\n3. last_evaluation","8761a74c":"### Abordagem","47868f3c":"# Bibliotecas necess\u00e1rias","fb4f15d4":"### Demiss\u00e3o vs N\u00famero de projetos","4bd36595":"Observando os dados acima, podemos notar que:\n- A empresa possui certa de 15.000 funcion\u00e1rios\n- O percentual de demiss\u00f5es \u00e9 de aproximadamente 24 %\n- O n\u00edvel de satisfa\u00e7\u00e3o m\u00e9dio de seus funcion\u00e1rios \u00e9 de aproximadamente 67 % ","e9c785ba":"O fato de que uma grande quantidade de funcion\u00e1rios com apenas 2 projetos sairem da companua pode ter sido ocasionado pelo fato de que, devido a essa quantidade baixa de projetos, eles n\u00e3o receberam a devida **avalia\u00e7\u00e3o** (last_evaluation). E os funcion\u00e1rios com muitos projetos (**5 a 7**) podem ter ficado sobrecarregados.","0269f7f1":"Toda essa an\u00e1lise visar\u00e1 a sugest\u00e3o de um **plano de reten\u00e7\u00e3o de funcion\u00e1rios**, buscando evitar a saida dos mesmos.","db125993":"\u00c9 poss\u00edvel observar **3 grupos distintos**:","bea9f067":"O resultado do teste nos mostra que a estat\u00edstica do T-Test \u00e9 aproximadamente **-51.33**. Esse n\u00famero representa o quando a m\u00e9dia da amostra difere da hip\u00f3tese nula. Se a **estat\u00edstica t** estiver fora dos quartis da distribui\u00e7\u00e3o e do grau de confian\u00e7a correspondente ao nosso n\u00edvel de confian\u00e7a, rejeitamos a hip\u00f3tese nula.","20f24772":"Classificar e ranquear funcion\u00e1rios atrav\u00e9s das probabilidade de sa\u00edda, como visto abaixo:","041ca379":"\u00c9 importante lembrar que a coluna **left** nos informa que o funcion\u00e1rio saiu da empresa, por\u00e9m n\u00e3o especifica se ele foi demitido ou se demitiu.","54679007":"#### Conduzindo o T-Test","e80bf0e2":"### Modelo base","4966140d":"# Import\u00e2ncia das \"features\"","a9123d34":"Teste de hip\u00f3tese:\n- **Hip\u00f3tese nula**: N\u00c3O H\u00c1 DIFEREN\u00c7A no n\u00edvel de satisfa\u00e7\u00e3o (satisfaction_level) entre funcion\u00e1rios que foram demitidos e os que n\u00e3o foram demitidos\n- **Hip\u00f3tese alternativa**: H\u00c1 DIFEREN\u00c7A no n\u00edvel de satisfa\u00e7\u00e3o (satisfaction_level) entre funcion\u00e1rios que foram demitidos e os que n\u00e3o foram demitidos","c002d6db":"### Solu\u00e7\u00f5es em potencial","031428b5":"- Cluster 1 (Azul): funcion\u00e1rios bem avaliados, por\u00e9m tristes\n- Cluster 2 (Verde): funcion\u00e1rios mal avaliados e tristes\n- Cluster 3 (Vermelho): funcion\u00e1rios bem avaliados e felizes","21c41f2c":"### Sal\u00e1rio vs Demiss\u00e3o","2d64fb27":"- **Grupo 1**: Funcion\u00e1rios com avalia\u00e7\u00f5es maiores que 0.75, por\u00e9m com um n\u00edvel de satisfa\u00e7\u00e3o menor que 0.2. Isso pode indicar funcion\u00e1rios que trabalham muito, talvez at\u00e9 sejam sobrecarregados, e s\u00e3o bem avaliados, por\u00e9m est\u00e3o insatisfeitos com algum motivos, como a sobrecarga de trabalho citada anteriormente.\n- **Grupo 2**: Funcion\u00e1rios com avalia\u00e7\u00f5es menores que 0.58 e n\u00edvel de satisfa\u00e7\u00e3o entre 0.35 e 0.45, ou seja, mal avaliados e insatisfeitos.\n- **Grupo 3**: Funcion\u00e1rios com avalia\u00e7\u00f5es maiores que 0.8 e nivel de satisfa\u00e7\u00e3o entre 0.7 e 1.0. Esse \u00e9 o tipo ideal de funcion\u00e1rio, que trabalha muito e feliz. Talvez eles tenham saido por causa de novas oportunidades de emprego.","8efc21aa":"### Correla\u00e7\u00f5es","1bc13c62":"Nenhum das \"features\" possui correla\u00e7\u00e3o positiva forte (igual ou acima de 0.5) ou negativa forte (igual ou abaixo de -0.5), por\u00e9m podemos observar algumas \"features\" com correla\u00e7\u00f5es moderadas:\n- Positiva: **last_evaluation** e **number_project**, **average_montly_hours** e **number_project**, **last_evaluation** e **last_evaluation**\n- Negativa: **satisfaction_level** e **left**","06a18607":"Por\u00e9m, \u00e9 interessante lembrar que podem existir casos de **funcion\u00e1rios com alta probabilidade de deixar a empresa, mas que acabam n\u00e3o saindo depois de um tempo** (falsos positivos), algo que pode gerar um custo desnecess\u00e1rio h\u00e1 empresa, al\u00e9m dos **funcion\u00e1rios com baixa probabilidade de deixarem a empresa, mas que acabam saindo depois de um tempo**(falsos negativos), que, como dito anteriormente, podem acarretar na perda de talentos e de custos maiores para a realiza\u00e7\u00e3o de novas contrata\u00e7\u00f5es.","a94a6631":"# Introdu\u00e7\u00e3o","9994e5ca":"#### Funcion\u00e1rios com baixas avalia\u00e7\u00f5es","908757df":"Os cr\u00e9ditos desse notebook pertencem \u00e0 [**Randy Lao**](https:\/\/www.kaggle.com\/randylaosat) e ao seu trabalho [Predicting Employee Kernelover](https:\/\/www.kaggle.com\/randylaosat\/predicting-employee-kernelover\/notebook), que me serviu como base para estudo e constru\u00e7\u00e3o da conclus\u00e3o.","0f63303a":"\u00c9 poss\u00edvel notar que os funcion\u00e1rios N\u00c3O DEMITIDOS possuem uma m\u00e9dia de horas mensais trabalhadas quase constante, mesmo que o n\u00famero de projetos aumente. J\u00e1 os funcion\u00e1rios DEMITIDOS tendem a ter uma m\u00e9dia de horas mensais trabalhadas que cresce de acordo com o n\u00famero de projetos.","bfedb957":"Podemos concluir que:\n- **N\u00edvel de satisfa\u00e7\u00e3o**: h\u00e1 um grande pico entre funcion\u00e1rios com satisfa\u00e7\u00e3o baixa e satisfa\u00e7\u00e3o alta\n- **Avalia\u00e7\u00e3o**: h\u00e1 uma distribui\u00e7\u00e3o bimodal entre funcion\u00e1rios com baixa avalia\u00e7\u00e3o (0.6) e alta avalia\u00e7\u00e3o (0.8)\n- **M\u00e9dia de horas trabalhadas mensalmente**: outra distribui\u00e7\u00e3o bimodal,  entre funcion\u00e1rios com quantidade baixa e alta da m\u00e9dia de horas trabalhadas mensalmente (abaixo de 150 horas e acima de 250 horas)\n- Os gr\u00e1ficos 2 e 3 possuem distribui\u00e7\u00f5es similares\n- Como dito anteriormente, funcion\u00e1rios com m\u00e9dias menores de horas trabalhadas possuem uma avalia\u00e7\u00e3o menor e vice-versa.","a70d3d48":"# Carregamento dos dados","d699d71d":"# Refer\u00eancias","86edfd16":"Al\u00e9m disso, ficou comprovado que o **n\u00edvel de satisfa\u00e7\u00e3o** \u00e9 o maior indicador quando se trata do funcion\u00e1rio sair da empresa, seguido de **anos na empresa** e **avalia\u00e7\u00e3o**.","3beb689c":"### Gr\u00e1fico ROC","80ae6456":"Por\u00e9m, isso pode n\u00e3o ter uma signific\u00e2ncia pr\u00e1tica, e precisamos conduzir mais experimentos ou coletar mais dados visando conclus\u00f5es mais acuradas.","6d061b9a":"Aqui temos um resultado meio estranho: funcion\u00e1rios com mais projetos e que FORAM DEMITIDOS tendem a possuir uma avalia\u00e7\u00e3o maior, enquanto os funcion\u00e1rios que N\u00c3O FORAM DEMITIDOS possuem uma avalia\u00e7\u00e3o quase constante, mesmo com um n\u00famero de projetos maior. Surjem duas d\u00favidas:\n- Funcion\u00e1rios com avalia\u00e7\u00f5es menores n\u00e3o deveriam FICAR na empresa?\n- Os funcion\u00e1rios com avalia\u00e7\u00f5es menores n\u00e3o deveriam SAIR da empresa?","018d2da9":"Grande parte dos funcion\u00e1rios sai da empresa entre **3 e 5** anos de trabalho, sendo que mais da metade dos funcion\u00e1rios com **4 e 5** anos de trabalho sairam.","c57378f3":"#### Conclus\u00e3o do T-Test","e7d33fa4":"\u00c9 poss\u00edvel observar que funcion\u00e1rios com **2, 6 e 7 projetos** foram os que mais sairam da empresa. A grande maioria dos funcion\u00e1rios com **3, 4 e 6 projetos** n\u00e3o sairam. \u00c9 importante notar que todos os funcion\u00e1rios com **7 projetos** sairam da empresa, e h\u00e1 uma tend\u00eancia crescendo nas demiss\u00f5es \u00e0 medida que a quantidade de projetos aumenta (observando a partir de 3 projetos).","230feb21":"### Departamento vs Demiss\u00e3o","cad552e3":"### Valida\u00e7\u00e3o cruzada","c88da495":"Vimos tamb\u00e9m que \u00e9 comum funcion\u00e1rios com avalia\u00e7\u00f5es mais altas (e at\u00e9 mesmos satisfeitos com seus empregos) deixarem a empresa. Um motivo para isso ocorrer pode ser a **falta de valoriza\u00e7\u00e3o** por parte da empresa, afinal, dificilmente algu\u00e9m gosta de se esfor\u00e7ar no trabalho e alcan\u00e7ar resultados cada vez melhor ser receber algum incentivo por isso. Esse cen\u00e1rio pode trazer diversos preju\u00edzos \u00e0 empresa, j\u00e1 que talentos estaram saindo e podem at\u00e9 acabar trabalhando para concorrente.","1e580719":"### Demiss\u00e3o vs M\u00e9dia de horas mensais","01b1291a":"### Explora\u00e7\u00e3o profunda","5e8da332":"### Satisfa\u00e7\u00e3o vs Avalia\u00e7\u00e3o","d3b530ab":"### Interpreta\u00e7\u00e3o dos dados","237397e3":"**T-Test com uma amostra (mensura do n\u00edvel de satisfa\u00e7\u00e3o)**: esse teste verifica se a m\u00e9dia da amostra difere da m\u00e9dia da popula\u00e7\u00e3o. Como **satisfaction_level** possui a maior correla\u00e7\u00e3o com a classe **left**, vamos tesr se a m\u00e9dia com funcion\u00e1rios que foram demitidos difere da m\u00e9dia dos que n\u00e3o foram demitidos.","f695a60d":"Com os dados das probabilidades em m\u00e3os, o setor respons\u00e1vel (geralmente o RH) poderia tra\u00e7ar planos para abordar esses funcion\u00e1rios e garantir sua perman\u00eancia, como por exemplo:\n- Planos de carreira\n- Incentivos financeiros\n- Palestras motivacionais\n- Dentre outros benef\u00edcios.","9c03658a":"Como visto na an\u00e1lise dos dados, \u00e9 comum funcion\u00e1rios com avalia\u00e7\u00f5es mais baixas sairem da empresa, e isso provavelmente ocorre atrav\u00e9s de demiss\u00f5es por justa causa, por\u00e9m \u00e9 uma boa ideia verificar corretamente os motivos por tr\u00e1s dessas baixas avalia\u00e7\u00f5es, afinal vimos que pode ser que eles recebam poucos projetos, o que dificulta a demonstra\u00e7\u00e3o dos seus pot\u00eanciais, e tamb\u00e9m pode haver uma certa **sobrecarga de trabalho**, o que pode acabar gerando estresse, outro fator que pode prejudicar a qualidade dos projetos e afins. Mas por qu\u00ea investir tempo em funcion\u00e1rios com baixas avalia\u00e7\u00f5es? Muitas vezes, o custo de de fazer um novo processo seletivo e explicar todo o funcionamento da empresa para novos funcion\u00e1rios \u00e9 maior do que investir em um plano para melhorar as avalia\u00e7\u00f5es dos funcion\u00e1rios j\u00e1 existentes. Ent\u00e3o esse assunto e c\u00e1lculos desses custos devem ser discutidos com os respons\u00e1veis (setor de RH, por exemplo).","63ef4d90":"No fim das contas, podemos **rejeitar a hip\u00f3tese nula**, devido \u00e0:\n- O score do T-Test est\u00e1 fora dos quartis\n- O P-value \u00e9 menor que o n\u00edvel de confian\u00e7a (5%)","1e7ca9fb":"H\u00e1 uma distribui\u00e7\u00e3o bimodal entre funcion\u00e1rios demitidos, onde funcion\u00e1rios com uma m\u00e9dia mensal de horas trabalhadas **menor que 150 horas** ou **maiores que 250 horas** possuem uma tend\u00eancia maior em sair da empresa.","79b04d5c":"### Visualiza\u00e7\u00e3o das distribui\u00e7\u00f5es","fb67f7dd":"Os departamentos **sales**, **technical** e **support** possuem as maiores quantidades de  funcion\u00e1rios que pedem demiss\u00e3o, enquanto o departamento **management** possui a menor quantidade.","56239223":"### Teste com v\u00e1rios modelos","ea843b1d":"Como esperado de um conjunto de dados do Kaggle, n\u00e3o h\u00e1 valores nulos","7387dc29":"### Logistic Regression","186e992e":"Entenda as colunas como:\n\n- **satisfaction_level**: n\u00edvel de satisfa\u00e7\u00e3o do funcion\u00e1rio (o quanto ele est\u00e1 feliz com seu emprego)\n- **last_evaluation**: \u00faltima avalia\u00e7\u00e3o que o funcion\u00e1rio recebeu (uma nota entre 0 e 1, onde 1 representa os funcion\u00e1rios bem avaliados)\n- **number_project**: n\u00fameros de projetos que o funcion\u00e1rio trabalha\n- **average_montly_hours**: m\u00e9dia de horas trabalhadas mensalmente por esse funcion\u00e1rio\n- **time_spend_company**: tempo que o funcion\u00e1rio est\u00e1 na empresa (medido em anos)\n- **Work_accident**: se o funcion\u00e1rio j\u00e1 sofreu algum acidente de trabalho ou n\u00e3o\n- **left**: se o funcion\u00e1rio continua trabalhando (0) ou foi demitido (1)\n- **promotion_last_5years**: se o funcion\u00e1rio recebeu alguma promo\u00e7\u00e3o (eleva\u00e7\u00e3o de cargo) nos \u00faltimos 5 anos\n- **Department**: departamento em que o funcion\u00e1rio trabalha\n- **salary**: sal\u00e1rio do funcion\u00e1rio (note que, ao inv\u00e9s de n\u00fameros, temos **alto, m\u00e9dio** ou **baixo**)","b27742d5":"H\u00e1 uma distribui\u00e7\u00e3o bimodal entre os funcion\u00e1rios demitidos, em que funcion\u00e1rios com performance **baixa** tendem a deixar a empresa, e aqueles com performance **alta** tamb\u00e9m tendem a deixar a empresa. Aqueles entre 0.6 a 0.8 tendem a continuar.","ab874ce7":"# Modelagem","e7130176":"Grande parte dos funcion\u00e1rios foram demitidos possuiam sal\u00e1rios **baixos** e **m\u00e9dios**, enquanto aqueles com sal\u00e1rios **altos** quase n\u00e3o foram demitidos. Funcion\u00e1rios com **baixos sal\u00e1rios** s\u00e3o os que mais tendem a sair da empresa.","15ff631a":"### Quantidade de projetos vs Avalia\u00e7\u00e3o","dab619af":"#### Funcion\u00e1rios com baixas avalia\u00e7\u00f5es","e6185d07":"### Objetivo","9a8a2ba3":"Esse notebook ter\u00e1 como meta analisar quais fatores contribuem para que um funcion\u00e1rio de uma empresa seja demitido (ou se demita), al\u00e9m de criar um modelo que possa prever as  demiss\u00f5es.","f422f468":"\u00c9 importante notar que estamos pressupondo que h\u00e1 3 clusters, mas isso n\u00e3o quer dizer que seja a quantidade correta.","6926f733":"### Demiss\u00e3o vs Satisfa\u00e7\u00e3o","ede3b6c1":"### Demiss\u00e3o vs Anos na empresa","25e53bb9":"### Teste estat\u00edstico","3c6a819d":"# An\u00e1lise dos dados","b4a28286":"Baseado na an\u00e1lise estat\u00edstica de uma amostra, podemos ver que h\u00e1 diferen\u00e7a significante entre a m\u00e9dia de satisfa\u00e7\u00e3o dos funcion\u00e1rios que se demitiram e da popula\u00e7\u00e3o de funcion\u00e1rios. O valor extremamente baixo do P-value (0.0) \u00e9 um grande indicator da rejei\u00e7\u00e3o da hip\u00f3tese nula.","adbe0e0a":"Se pararmos para pensar nas correla\u00e7\u00f5es positivas, elas nos dizem que **quando mais um funcion\u00e1rio trabalha mensalmente, mas projetos eles faz (e vice-versa) e melhor a sua avalia\u00e7\u00e3o.**","b7b8db73":"H\u00e1 uma distribui\u00e7\u00e3o trimodal entre funcion\u00e1rios demitidos. Funcion\u00e1rios com **satisfa\u00e7\u00e3o entre 0.2 a 0.5** e com **satisfa\u00e7\u00e3o maior que 0.7** possuem uma tend\u00eancia maior em sair da empresa."}}