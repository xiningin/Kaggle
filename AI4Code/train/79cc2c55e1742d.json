{"cell_type":{"dd68a8f1":"code","e31b1aa2":"code","1f81c9ac":"code","cc9e0f3d":"code","7dc5bd14":"code","16ee5fe1":"code","646159e2":"code","0132cc48":"code","25be2a7e":"code","d565938e":"code","aae28cfb":"code","56576ca3":"code","9005dc80":"code","24334f9e":"code","9e41f3cf":"code","6f01a707":"code","29552513":"code","0859edbb":"code","8a794fc4":"code","e7549cd3":"code","d955b8fc":"code","c129b9d0":"code","854d8d1c":"code","e1b9c0f2":"code","df7ac0b0":"code","9ed70547":"code","a5c6a871":"code","f7770383":"code","ef8ece9c":"code","e72695cc":"code","e0e9be93":"code","d78db108":"code","f590328d":"code","2fc9088c":"code","4d9e86e1":"code","7ff0d017":"code","966f19cb":"code","2ef7ce8b":"markdown","2f5d8a10":"markdown","51ad4120":"markdown","313d0787":"markdown","db937e19":"markdown","7d1a3561":"markdown","b13f7dfc":"markdown","e0ea4dfb":"markdown","a93af79e":"markdown","93bb53fa":"markdown","bb501323":"markdown","0c1eb847":"markdown","59c3b2ea":"markdown","5444fbb5":"markdown","f53ab50a":"markdown","9e31c091":"markdown","e227d986":"markdown","92f1d9ac":"markdown","cddf6d56":"markdown","d50c78b6":"markdown","8b19f9c7":"markdown","a6be96fd":"markdown","ca150ff9":"markdown","c99e8444":"markdown","4fa8b369":"markdown"},"source":{"dd68a8f1":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","e31b1aa2":"teams = pd.read_csv('..\/input\/mlb-player-digital-engagement-forecasting\/teams.csv')\nteams","1f81c9ac":"teams.describe(include='all')","cc9e0f3d":"seasons = pd.read_csv('..\/input\/mlb-player-digital-engagement-forecasting\/seasons.csv')\nseasons","7dc5bd14":"players = pd.read_csv('..\/input\/mlb-player-digital-engagement-forecasting\/players.csv')\nplayers","16ee5fe1":"players.describe(include='all')","646159e2":"players[['primaryPositionCode','primaryPositionName']].groupby('primaryPositionName').count()","0132cc48":"players[['playerForTestSetAndFuturePreds','playerId']].groupby('playerForTestSetAndFuturePreds').count()","25be2a7e":"awards = pd.read_csv('..\/input\/mlb-player-digital-engagement-forecasting\/awards.csv')\nawards","d565938e":"awards.describe(include='all')","aae28cfb":"awards[['awardName','playerId']].groupby('awardName').count().sort_values(['playerId'])","56576ca3":"awards[['awardName','playerId','playerName']].groupby(['playerId','playerName']).count().sort_values(['awardName'])","9005dc80":"\nfrom pandas.io.json import json_normalize\nimport json \ntrain = pd.read_csv('..\/input\/mlb-player-digital-engagement-forecasting\/train.csv',nrows=100)\ntrain","24334f9e":"def unpack_json(json_str):\n    return pd.DataFrame() if pd.isna(json_str) else pd.read_json(json_str)\n\n\ndef unpack_data(data, dfs=None, n_jobs=-1):\n    if dfs is not None:\n        data = data.loc[:, dfs]\n    unnested_dfs = {}\n    for name, column in data.iteritems():\n        daily_dfs = Parallel(n_jobs=n_jobs)(\n            delayed(unpack_json)(item) for date, item in column.iteritems())\n        df = pd.concat(daily_dfs)\n        unnested_dfs[name] = df\n    return unnested_dfs","9e41f3cf":"dfs = [\n    'nextDayPlayerEngagement',  # targets\n    'playerBoxScores',  # features\n    'games',\n    'rosters',\n    'teamBoxScores',\n    'transactions',\n    'standings',\n    'awards',\n    'events',\n    'playerTwitterFollowers',\n    'teamTwitterFollowers',\n]\n\n# Read training data\ntraining = train\n\n# Convert training data date field to datetime type\ntraining['date'] = pd.to_datetime(training['date'], format=\"%Y%m%d\")\ntraining = training.set_index('date').to_period('D')","6f01a707":"training_dfs = unpack_data(training, dfs=dfs)","29552513":"training_dfs['nextDayPlayerEngagement']","0859edbb":"training_dfs['playerBoxScores']","8a794fc4":"training_dfs['playerBoxScores'].describe(include='all')","e7549cd3":"training_dfs['games']","d955b8fc":"training_dfs['games'].describe(include='all')","c129b9d0":"training_dfs['rosters']","854d8d1c":"training_dfs['rosters'].describe(include='all')","e1b9c0f2":"training_dfs['teamBoxScores']","df7ac0b0":"training_dfs['teamBoxScores'].describe(include='all')","9ed70547":"training_dfs['transactions']","a5c6a871":"training_dfs['transactions'].describe(include='all')","f7770383":"training_dfs['standings']","ef8ece9c":"training_dfs['standings'].describe(include='all')","e72695cc":"training_dfs['awards']","e0e9be93":"training_dfs['awards'].describe(include='all')","d78db108":"training_dfs['events']","f590328d":"training_dfs['events'].describe(include='all')","2fc9088c":"training_dfs['playerTwitterFollowers']","4d9e86e1":"training_dfs['playerTwitterFollowers'].describe(include='all')","7ff0d017":"training_dfs['teamTwitterFollowers']","966f19cb":"training_dfs['teamTwitterFollowers'].describe(include='all')","2ef7ce8b":"# train.csv\n- \u65e5\u4ed8\u3092\u30ad\u30fc\u306b\u5404\u8ffd\u52a0\u60c5\u5831\u304cjson\u3067\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b","2f5d8a10":"## players.csv\n- \u9078\u624b\u306e\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\n- DOB\n  - \u8a95\u751f\u65e5\n","51ad4120":"## transactions\n","313d0787":"## teams.csv\n- id\u3067\u4e00\u610f\n- \u30e1\u30b8\u30e3\u30fc\u30ea\u30fc\u30b0\u306b\u306f\u30a2\u30fb\u30ea\u30fc\u30b0,\u30ca\u30fb\u30ea\u30fc\u30b0\u540415\u30c1\u30fc\u30e0\u7cfb30\u30c1\u30fc\u30e0\u304c\u3042\u308a\u307e\u3059\n- locationName Chicago\u306b\u306f\u30b7\u30ab\u30b4\u30fb\u30d6\u30eb\u30ba(\u30ca)\u3068\u30db\u30ef\u30a4\u30c8\u30bd\u30c3\u30af\u30b9(\u30a2)\u304c\u3042\u308b\u305f\u308129\u306b\u306a\u308a\u307e\u3059","db937e19":"## events","7d1a3561":"- award\u306f\u5168\u90e8\u3067455\u7a2e\u985e.\n- award\u306b\u3088\u3063\u3066\u306f\u7247\u65b9\u306e\u30ea\u30fc\u30b0\u306b\u3057\u304b\u306a\u3044\u3082\u306e\u3082\u3042\u308b","b13f7dfc":"## playerBoxScores\n- \u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u6210\u7e3e\n- \u4e00\u756a\u5f71\u97ff\u5ea6\u304c\u9ad8\u305d\u3046\n","e0ea4dfb":"## games","a93af79e":"## What's this\n- \u3053\u306eNotebook\u306f\u672c\u30b3\u30f3\u30da\u306e\u6982\u8981\u3068\u3001\u63d0\u4f9b\u30c7\u30fc\u30bf\u306e\u5404\u30ab\u30e9\u30e0\u306e\u8aac\u660e\u3092\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\n- \u307e\u305fMLB\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306a\u3044\u306e\u3067\u8abf\u3079\u305f\u5185\u5bb9\u306a\u3069\u3092\u8a18\u8f09\u3057\u307e\u3059\n","93bb53fa":"- \u30dd\u30b8\u30b7\u30e7\u30f3\u306e\u96c6\u8a08","bb501323":"## teamBoxScores","0c1eb847":"## teamTwitterFollowers","59c3b2ea":"## seasons.csv\n- 2020\u5e74\u306fCOVID-19\u306e\u305f\u3081\u30aa\u30fc\u30eb\u30b9\u30bf\u30fc\u30b2\u30fc\u30e0\u304c\u884c\u308f\u308c\u307e\u305b\u3093\u3067\u3057\u305f\n- \u307e\u305f\u901a\u5e38\u30b7\u30fc\u30ba\u30f3162\u8a66\u5408\u306b\u5bfe\u3057\u306660\u8a66\u5408\u306e\u307f\u306e\u958b\u50ac\u3068\u306a\u308a\u307e\u3057\u305f","5444fbb5":"- \u53d7\u8cde\u306e\u591a\u3044\u30d7\u30ec\u30a4\u30e4\u30fc","f53ab50a":"# Data\n- teams.csv\n  - \u30c1\u30fc\u30e0\u306e\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\n  - \u30e1\u30b8\u30e3\u30fc\u30ea\u30fc\u30b0\u306b\u306f\u30a2\u30fb\u30ea\u30fc\u30b0,\u30ca\u30fb\u30ea\u30fc\u30b0\u540415\u30c1\u30fc\u30e0\u7cfb30\u30c1\u30fc\u30e0\u304c\u3042\u308a\u307e\u3059\n- seasons.csv\n  - \u30b7\u30fc\u30ba\u30f3\u306e\u60c5\u5831\n  - 2020\u5e74\u306fCOVID-19\u306e\u305f\u3081\u30aa\u30fc\u30eb\u30b9\u30bf\u30fc\u30b2\u30fc\u30e0\u304c\u884c\u308f\u308c\u307e\u305b\u3093\u3067\u3057\u305f\n  - \u307e\u305f\u901a\u5e38\u30b7\u30fc\u30ba\u30f3162\u8a66\u5408\u306b\u5bfe\u3057\u306660\u8a66\u5408\u306e\u307f\u306e\u958b\u50ac\u3068\u306a\u308a\u307e\u3057\u305f\n- players.csv\n  - \u9078\u624b\u306e\u30de\u30b9\u30bf\u30c7\u30fc\u30bf\n- awards.csv\n  - \u53d7\u8cde\u30c7\u30fc\u30bf\n  - \u30aa\u30fc\u30eb\u30b9\u30bf\u30fc\u30b2\u30fc\u30e0\u3078\u306e\u9078\u51fa\u3082\u542b\u307e\u308c\u308b\u306e\u3067\u30b7\u30fc\u30ba\u30f3,\u30a2\u30ef\u30fc\u30c9,\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u4e00\u610f\u306b\u306a\u308b\n- train.csv\n  - \u3053\u3061\u3089\u306btarget\u306e\u5024\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059.\u69cb\u9020\u304c\u7279\u6b8a\u306a\u306e\u3067\u5f8c\u8ff0\n- example_train.csv\n  - train\u306e\u30b5\u30f3\u30d7\u30eb\n- examle_sample_submition.csv\n  - submition\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\n","9e31c091":"## awards.csv","e227d986":"## playerTwitterFollowers","92f1d9ac":"## standings","cddf6d56":"# Evaluation\n- 4\u3064\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u6570\u306eMCMAE\u306b\u306a\u308a\u307e\u3059\n- \u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u6570\u306e\u8a73\u7d30\u306f\u4e0d\u660e\u3067\u3059\n  - \u30e1\u30e2:Google\u4e3b\u50ac\u306a\u306e\u3067\u691c\u7d22\u306a\u3069\u306e\u30a2\u30af\u30bb\u30b9\u91cf\u304c\u30bf\u30fc\u30b2\u30c3\u30c8\u304b\u306a\n  \n## MCMAE(mean column-wise mean absolute error)\n- \u5404\u5217\u306eRMSE\u306e\u5e73\u5747\n$$ \\frac {1}{m} \\sum_{j=1}^{m} \\sqrt{\\frac {1}{n} \\sum_{i=1}^{n}} (y_{ij} - \\hat{y}_{ij})^2 $$","d50c78b6":"## \u5404json\u3092\u5c55\u958b","8b19f9c7":"## awards","a6be96fd":"## nextDayPlayerEngagement\n- \u65e5\u4ed8,\u30d7\u30ec\u30a4\u30e4\u30fcid\u3054\u3068\u306btarget\u5024","ca150ff9":"- playerForTestSetAndFuturePreds\u306e\u96c6\u8a08","c99e8444":"## rosters","4fa8b369":"# MLB Player Digital Engagement Forecasting\n- \u4ee5\u4e0b\u7ffb\u8a33\n- \u3053\u306e\u30b3\u30f3\u30c6\u30b9\u30c8\u3067\u306f\u3001\u30d5\u30a1\u30f3\u304cMLB\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u30c7\u30b8\u30bf\u30eb\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u5c06\u6765\u306e\u65e5\u4ed8\u7bc4\u56f2\u3067\u6bce\u65e5\u3069\u306e\u3088\u3046\u306b\u5229\u7528\u3059\u308b\u304b\u3092\u4e88\u6e2c\u3057\u307e\u3059\u3002\n- \u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c7\u30fc\u30bf\u3001\u30bd\u30fc\u30b7\u30e3\u30eb\u30e1\u30c7\u30a3\u30a2\u30c7\u30fc\u30bf\u3001\u5e02\u5834\u898f\u6a21\u306a\u3069\u306e\u30c1\u30fc\u30e0\u8981\u56e0\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n- \u6210\u529f\u3057\u305f\u30e2\u30c7\u30eb\u306f\u3001\u3069\u306e\u30b7\u30b0\u30ca\u30eb\u304c\u30a8\u30f3\u30b2\u30fc\u30b8\u30e1\u30f3\u30c8\u3068\u6700\u3082\u5f37\u304f\u76f8\u95a2\u3057\u3001\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u304b\u306b\u3064\u3044\u3066\u306e\u65b0\u3057\u3044\u6d1e\u5bdf\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\n- MLB\u30aa\u30fc\u30eb\u30b9\u30bf\u30fc\u30e9\u30a6\u30f3\u30c9\u3092\u30b7\u30fc\u30ba\u30f3\u3092\u901a\u3057\u3066\u4e88\u6e2c\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u3001\u307e\u305f\u306f\u30c1\u30fc\u30e0\u306e25\u4eba\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u305d\u308c\u305e\u308c\u304c\u811a\u5149\u3092\u6d74\u3073\u3066\u3044\u308b\u3068\u304d\u3092\u60f3\u50cf\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n- \u3053\u308c\u3089\u306e\u6d1e\u5bdf\u306f\u3001\u30a2\u30e1\u30ea\u30ab\u306e\u5a2f\u697d\u306e\u30d5\u30a1\u30f3\u30c0\u30e0\u3092\u6df1\u304f\u6398\u308a\u4e0b\u3052\u308b\u3068\u304d\u306b\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n- \u3053\u306e\u7a2e\u306e\u6700\u521d\u306e\u65b9\u6cd5\u306e\u4e00\u90e8\u3068\u3057\u3066\u3001\u30d7\u30ec\u30fc\u30e4\u30fc\u30ec\u30d9\u30eb\u3067\u306e\u30c7\u30b8\u30bf\u30eb\u30a8\u30f3\u30b2\u30fc\u30b8\u30e1\u30f3\u30c8\u3092\u3053\u306e\u304d\u3081\u7d30\u304b\u3044\u65e5\u5e38\u7684\u306a\u65b9\u6cd5\u3067\u7406\u89e3\u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\n- \u540c\u6642\u306b\u3001Google Cloud\u306e\u30c7\u30fc\u30bf\u5206\u6790\u3001Vertex AI\u3001MLOps\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001MLB\u304c\u30a4\u30ce\u30d9\u30fc\u30b7\u30e7\u30f3\u3092\u3088\u308a\u7c21\u5358\u306b\u69cb\u7bc9\u3067\u304d\u308b\u3088\u3046\u306b\u652f\u63f4\u3057\u307e\u3059\u3002 \n- MLB\u30d5\u30a1\u30f3\u3068\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u30a8\u30f3\u30b2\u30fc\u30b8\u30e1\u30f3\u30c8\u306e\u672a\u6765\u3092\u5f62\u4f5c\u308b\u4e0a\u3067\u5f79\u5272\u3092\u679c\u305f\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n  - \u30e1\u30e2:MLB\u30aa\u30fc\u30eb\u30b9\u30bf\u30fc\u306b\u51fa\u5834\u3059\u308b\u9078\u624b\u306f\u30d5\u30a1\u30f3\u6295\u7968\u3084\u76e3\u7763\u63a8\u85a6\u306b\u3088\u3063\u3066\u9078\u3070\u308c\u308b\n\n- \u4eca\u56de\u306f\u30b3\u30fc\u30c9\u30b3\u30f3\u30da\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u305f\u3081 Kaggle Notebook \u306e\u5f62\u3067\u63d0\u51fa\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059"}}