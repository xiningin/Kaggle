{"cell_type":{"266022c1":"code","a8ef512a":"code","55622ee4":"code","97f59d1f":"code","8e82fae6":"code","6fb655cf":"code","814437e5":"code","3c10b5b3":"code","7201d753":"code","801fbe30":"code","71436ca1":"code","9ff59ddb":"code","c0872e96":"code","3c8d8eba":"code","0511cdad":"code","4e72a1e1":"code","8a645d27":"code","c36e5508":"code","8484da3d":"code","450578da":"code","89511530":"code","07629307":"code","1d4726c5":"code","b2313f59":"code","2d997de9":"code","61127e07":"code","1001dbfc":"code","0f8acecc":"code","71784be7":"code","c1cdfc7e":"code","52434909":"code","0524a4ea":"code","0f558eca":"code","8d5aca14":"code","ebf41821":"markdown","9a2b4b03":"markdown","06ebef7d":"markdown","ebb033bc":"markdown","7affb359":"markdown","99b9bfb2":"markdown","2aef77eb":"markdown","2cae83e4":"markdown","5509267d":"markdown","fef84956":"markdown","a34a7a93":"markdown","6d0c5e95":"markdown","c425ca33":"markdown","69b52dd0":"markdown","20e3d9e6":"markdown","4e50c550":"markdown","4b324410":"markdown","17d10bba":"markdown","fd8ff92d":"markdown","9bc3f2b7":"markdown","aaa558b1":"markdown","e39d2d58":"markdown","4267a352":"markdown","a9a885c6":"markdown","0b28f168":"markdown"},"source":{"266022c1":"import numpy as np \nimport pandas as pd\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","a8ef512a":"import numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport seaborn as sns","55622ee4":"dataset = pd.read_csv('\/kaggle\/input\/daily-temperature-of-major-cities\/city_temperature.csv')","97f59d1f":"dataset.describe()","8e82fae6":"dataset.isnull().sum()","6fb655cf":"dataset.head()","814437e5":"dataset = dataset.drop('State', axis=1)","3c10b5b3":"sns.distplot(dataset['AvgTemperature'])","7201d753":"dataset['AvgTemperature']= (dataset.AvgTemperature-32)*5\/9","801fbe30":"sns.distplot(dataset['AvgTemperature'])","71436ca1":"sns.distplot(dataset['Month'])","9ff59ddb":"sns.distplot(dataset['Day'])","c0872e96":"sns.distplot(dataset['Year'])","3c8d8eba":"sns.set(style=\"whitegrid\")\nsns.boxplot(x=dataset['Year'])","0511cdad":"dataset=dataset[dataset['Year']>1990]\nsns.boxplot(x=dataset['Year'])","4e72a1e1":"sns.boxplot(x=dataset['Region'], y=dataset['AvgTemperature'], data=dataset)","8a645d27":"sns.set(style=\"whitegrid\")\n\nchart = sns.barplot(x=dataset['Region'], y=dataset['AvgTemperature'],data=dataset)\nchart.set_xticklabels(labels=chart.get_xticklabels(),rotation=90, horizontalalignment='left')\n","c36e5508":"ax = sns.lineplot(x=dataset['Year'], y=dataset['AvgTemperature'], data=dataset)","8484da3d":"dataset2 = dataset[dataset.Year<2020]","450578da":"ax = sns.lineplot(x=dataset2['Year'], y=dataset2['AvgTemperature'], data=dataset2)","89511530":"fig, ax = plt.subplots(figsize=(10, 8))\nregion = dataset['Region']\nchart = sns.lineplot(x=dataset2['Year'], y=dataset2[\"AvgTemperature\"], hue=region, legend=\"full\",\n                  data=dataset2)\nchart.set_xticklabels(labels=chart.get_xticklabels(),rotation=90, horizontalalignment='left')\nplt.show()","07629307":"dataset['Weather_type']=dataset['AvgTemperature']","1d4726c5":"temp=[dataset]\nfor data in temp:\n    data.loc[dataset['Weather_type']<=12,'Weather_type']=0,\n    data.loc[(dataset['Weather_type']>12) & (dataset['Weather_type']<=18),'Weather_type']=1,\n    data.loc[(dataset['Weather_type']>18) & (dataset['Weather_type']<=26),'Weather_type']=2,\n    data.loc[(dataset['Weather_type']>26) & (dataset['Weather_type']<=35),'Weather_type']=3,\n    data.loc[(dataset['Weather_type']>35),'Weather_type']=4","b2313f59":"sns.distplot(dataset['Weather_type'])","2d997de9":"\nsns.lineplot(x=dataset['Month'], y=dataset['AvgTemperature'], data=dataset)","61127e07":"fig, ax = plt.subplots(figsize=(10, 8))\nsns.lineplot(x=dataset['Month'], y=dataset['AvgTemperature'], hue=dataset['Region'],legend=\"full\", data=dataset)\nplt.show()","1001dbfc":"dataset.drop('Weather_type',axis=1,inplace=True)","0f8acecc":"train = dataset[dataset.Year<2019]\ntest = dataset[dataset.Year>=2019]","71784be7":"#function to create new attribute\ndef attribute(df,col1,col2):\n    index_col1=df.columns.get_loc(col1)\n    index_col2=df.columns.get_loc(col2)\n    for row in range(len(df)):\n        f=df.iat[row,index_col1]\n        df.iat[row,index_col2]=f\n\n#calculating monthly average temperature for each city\ng=train.groupby(['City','Month'])\ndf=g.mean()\ndf['AvgTemperature_City_Monthly']=0.0\nattribute(df,'AvgTemperature','AvgTemperature_City_Monthly')\ndrop=['Year','Day', 'AvgTemperature']\ndf.drop(drop,axis=1,inplace=True)\non=['City','Month']\ntrain=pd.merge(train,df,on=on,how='inner')\ntest=pd.merge(test,df,on=on,how='inner')\n\n\n#calculating monthly average temperature for each country\ng=train.groupby(['Country','Month'])\ndf=g.mean()\ndf['AvgTemperature_Country_Monthly']=0.0\nattribute(df,'AvgTemperature','AvgTemperature_Country_Monthly')\ndrop=['Year','Day', 'AvgTemperature'\n     ,'AvgTemperature_City_Monthly']\ndf.drop(drop,axis=1,inplace=True)\non=['Country','Month']\ntrain=pd.merge(train,df,on=on,how='inner')\ntest=pd.merge(test,df,on=on,how='inner')","c1cdfc7e":"from sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\ndef encode(df):\n    df['City'] = le.fit_transform(df['City'])\n    df['Region'] = le.fit_transform(df['Region'])\n    df['Country'] = le.fit_transform(df['Country'])\n    \nencode(train)\nencode(test)","52434909":"corr = train.corr()\nfig, ax = plt.subplots(figsize=(10, 8))\ncolormap = sns.diverging_palette(220, 10, as_cmap=True)\ndropSelf = np.zeros_like(corr)\ndropSelf[np.triu_indices_from(dropSelf)] = True\ncolormap = sns.diverging_palette(220, 10, as_cmap=True)\nsns.heatmap(corr, cmap=colormap, linewidths=.5, annot=True, fmt=\".2f\", mask=dropSelf)\nplt.title('Temperatures - Features Correlations')\nplt.show()","0524a4ea":"y_train=train['AvgTemperature']\nX_train=train.drop('AvgTemperature',axis=1)\n\ny_test=test['AvgTemperature']\nX_test=test.drop('AvgTemperature',axis=1)","0f558eca":"from sklearn.linear_model import Lasso\nregr = Lasso(alpha=0.01)\nregr.fit(X_train, y_train)\ny_pred=regr.predict(X_test)","8d5aca14":"from sklearn.metrics import mean_squared_error\nmse=np.sqrt(mean_squared_error(y_test,y_pred))\n\nprint('Root Mean Squared Error - {}'.format(mse))","ebf41821":"# Introduction\n\nGlaciers are melting, sea levels are rising, cloud forests are dying, and wildlife is scrambling to keep pace. It has become clear that humans have caused most of the past century's warming by releasing heat-trapping gases as we power our modern lives. Called greenhouse gases, their levels are higher now than at any time in the last 800,000 years.\n\nWe often call the result global warming, but it is causing a set of changes to the Earth's climate, or long-term weather patterns, that varies from place to place. While many people think of global warming and climate change as synonyms, scientists use \u201cclimate change\u201d when describing the complex shifts now affecting our planet\u2019s weather and climate systems\u2014in part because some areas actually get cooler in the short term.\n\nClimate change encompasses not only rising average temperatures but also extreme weather events, shifting wildlife populations and habitats, rising seas, and a range of other impacts. All of those changes are emerging as humans continue to add heat-trapping greenhouse gases to the atmosphere, changing the rhythms of climate that all living things have come to rely on.\n\n# Purpose\nI will be analysing the changes that have been taking place with respect to temperature all around the world. \nMy attempt is to understand the trends and patterns behind the rise in temperature and to eventually build a predictive model which can predict the temperature.\n\n# NOTE\nI have taken attributes like Monthly Average Temperatures on the basis of countries and cities. I have made these attributes out of data till year 2018 and have copied the same in the attributes of test dataset which includes data after 2018, hence it will not depend on the test dataset target variable.\n\n# Tasks\n### 1. Exploratory Data Analysis and Data Pre-processing\n### 2. Model Building and evaluation","9a2b4b03":"Weather type is created for studying temperature distribution globally. It will be dropped before making the final dataset.","06ebef7d":"So the average temperature on global level peaks somewhere between June and August","ebb033bc":"# Model Building and evaluation","7affb359":"Now it looks much better. The sharp decrease of the Global average temperature has been removed.","99b9bfb2":"## Seperating dataset for test train purposes","2aef77eb":"* We have removed the State variable because it was having more than 50% null values. Also the feature wasn't appearing much useful.\n* Now, we will try some visualisations to better understand the data.","2cae83e4":"We have removed the entries with the year 2020 because the data for 2020 was incomplete was affecting the overall trend. It would have affected the performance of our model.","5509267d":"Middle east seems to be having the highest average temperature while Europe is having the lowest","fef84956":"Changing temperature from Farenheit to Celsius","a34a7a93":"## Lasso Regression","6d0c5e95":"Let's study the 'Year' attribute","c425ca33":"We have so many outliers in region feature. We will let our model treat them.","69b52dd0":"# Conclusion\nRight now, I have used just one model without using GridSearchCV and other parameter tuning. With using and comparing more models, I am sure we can get a better functioning model than the current one.\nWe can also focus our work to analyse the average temperatures of some particular city or country. These points are left for future work.","20e3d9e6":"It appears that very less places have temperatures higher than 35 degree Celsius","4e50c550":" Now it looks much better. We have removed outliers from the Year feature but we have to update the dataset.","4b324410":"This shows that we may be having some outliers as the years are heavly left skewed.","17d10bba":"# Exploratory Data Analysis and Data-Preprocessing","fd8ff92d":"So the feature state has a lot of null values. Rest of the features don't seem to have any null values.","9bc3f2b7":"Africa is showing high fluctuations in temperature while North America is having a pretty stable changes over time","aaa558b1":"## Label Encoding","e39d2d58":" This means that all the months have almost equal number of entries.","4267a352":"Trends are showing that Average temperature has sharply decreased roughly after 2017. This is because major land area lies in the Northern Hemisphere and presently only the initial months of the year 2020 have been recorded. It is affecting the overall trend.","a9a885c6":"Average Temperature variable is left skewed.","0b28f168":"## Checking correlation"}}