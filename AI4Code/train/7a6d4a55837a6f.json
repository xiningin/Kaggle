{"cell_type":{"23deba83":"code","83bbfc17":"code","14718441":"code","79dec013":"code","84e77efa":"code","bf80940f":"code","9a98cc56":"code","4fa7aa37":"code","d9f8ff10":"code","b0926e63":"code","d28a6a3e":"code","dc817b28":"code","8b284607":"code","931320cc":"code","d9d90d5c":"code","9a2ca87e":"code","6cc9fbb1":"code","91141aa8":"code","b33bc0ec":"code","2ecad2b1":"code","1fa15649":"code","1253f87c":"markdown","4f34f24e":"markdown","ee39bdf4":"markdown","2bc5e357":"markdown","f21c19ed":"markdown","4665d4f2":"markdown","804e7be8":"markdown","d2246325":"markdown","8e08ffda":"markdown","398c1f2f":"markdown","2aa9551d":"markdown","88e84c75":"markdown","a30589e4":"markdown","9e8e9590":"markdown","73582856":"markdown","0704ea41":"markdown","c3cfea2c":"markdown","001b089c":"markdown","3bfa161b":"markdown","019b3b4e":"markdown","09dc02e4":"markdown","298c9f1b":"markdown","5f166ff8":"markdown","59c7c1c1":"markdown","00080680":"markdown","67528f56":"markdown","3bdae5c4":"markdown","8663abb2":"markdown","c49cb86f":"markdown","6f2100f5":"markdown","3f7d1da7":"markdown"},"source":{"23deba83":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","83bbfc17":"import os\nfrom pathlib import Path\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport missingno as ms\n%matplotlib inline\nplt.rc('font', size = 11)\nsns.set_style('darkgrid')","14718441":"df = pd.read_csv('..\/input\/traffic-violations-dataset\/traffic_violaions.csv')\ndf.head()","79dec013":"df.info()","84e77efa":"ms.matrix(df);","bf80940f":"df1 = df.copy(deep=True)\ndf1.drop(columns = ['country_name','search_type','driver_age_raw'], inplace=True)\ndf1.dropna(subset = ['driver_gender'], inplace = True)","9a98cc56":"df.isna().sum()","4fa7aa37":"df2 = df1.copy(deep=True)\ndf2['driver_age'] = df2['driver_age'].fillna(df.groupby('driver_gender')['driver_age'].transform('median'))\nms.matrix(df);","d9f8ff10":"data = df2.copy(deep=True)\npd.to_datetime(data['stop_time'])\ndata['stop_hour'] = pd.to_datetime(data['stop_time'], format = '%H:%M').dt.hour\n\ndata['stop_duration'].value_counts()\ndata['stop_duration'] = data['stop_duration'].map({'0-15 Min':7.5,'16-30 Min':23,'30+ Min':45})\nstop_duration_based_on_race = data.groupby('driver_race')[['stop_duration']].mean()\n\ndata.search_conducted = data.search_conducted.replace(to_replace=[True, False], value=[1, 0])\ndata.drugs_related_stop = data.drugs_related_stop.replace(to_replace=[True, False], value=[1, 0])\ndata['stop_date'] = pd.to_datetime(data['stop_date'])\ndata['stop_Year'] = pd.DatetimeIndex(data['stop_date']).year\nyearly_data = data.groupby('stop_Year').sum()\nyearly_data.reset_index(inplace = True)\n\nsearch_conducted = len(data[data.search_conducted == True])\narrested_after_search = len(data[(data.search_conducted == True) & (data.is_arrested == True)])\narrested = ((arrested_after_search\/search_conducted)*100)\nnot_arrested = (100-(arrested))","b0926e63":"data.head()","d28a6a3e":"sns.displot(x = 'driver_age', hue = 'driver_gender', kde = True, data = data, \n            multiple = 'stack', alpha = 0.8, palette = \"bright\", height=5, aspect=2)\nplt.title('Age Distribution Based on Gender')\nplt.xlabel(\"Driver's Age\")\nplt.ylabel(\"No of People\");","dc817b28":"fig , ax = plt.subplots(figsize=(12,5))\nax = sns.countplot(x = data.violation, data = data, order = data.violation.value_counts().index, palette = \"bright\")\nfor i in ax.patches:\n    percentage = '{:.1f}%'.format(100*i.get_height()\/len(data.violation))\n    x = i.get_x()+i.get_width()-0.6\n    y = i.get_height()\n    ax.annotate(percentage, (x, y))\nplt.title(\"Distrbution in Violation Type\")\nplt.xlabel(\"Violation Type\")\nplt.ylabel(\"No. of People Involved\");","8b284607":"plt.figure(figsize = (12,5))\nsns.countplot(x = data.stop_hour,data = data,hue = 'driver_gender', palette = \"bright\")\nplt.title('Hours vs. No. of Vehicles Stopped')\nplt.legend(['Male','Female'])\nplt.xlabel(\"Stop Hour\")\nplt.ylabel(\"No. of Vehicles\");","931320cc":"plt.figure(figsize = (12,5))\nsns.countplot(x = data[data.violation == 'Moving violation'].stop_hour,data=data[data.violation == 'Moving violation'], \n              hue = 'driver_gender', palette = \"bright\")\nplt.title('Hours vs No. of Speeding Violation')\nplt.legend(['Male','Female'])\nplt.xlabel(\"Stop Hour\")\nplt.ylabel(\"No. of Violation\");","d9d90d5c":"fig , ax = plt.subplots(figsize = (12,5))\nax = sns.countplot(x=data.driver_race, data=data, order = data.driver_race.value_counts().index,\n                   linewidth = 0, palette = \"bright\")\nfor i in ax.patches:\n    percentage = '{:.1f}%'.format(100*i.get_height()\/len(data.driver_race))\n    x = i.get_x()+i.get_width()-0.6\n    y = i.get_height()\n    ax.annotate(percentage, (x, y))\nplt.title('Traffic Violation Based on Race')\nplt.xlabel(\"Driver's Race\")\nplt.ylabel(\"No. of People\");","9a2ca87e":"sns.displot(x='driver_age',data = data[data['is_arrested']==True],\n            kde = True, hue = 'driver_race', multiple = \"stack\", alpha = 0.8, palette = \"bright\", height=5, aspect=2)\nplt.title('Age groups invoved in drugs')\nplt.xlabel(\"Driver's Age\")\nplt.ylabel(\"No. of People involed in Drugs\");","6cc9fbb1":"plt.figure(figsize = (8,4))\nsns.heatmap(stop_duration_based_on_race.sort_values(by = ['stop_duration'], ascending=False), annot = True, cmap = \"Blues\");\nplt.title(\"Stop Duration Based on Race\")\nplt.xlabel(\"Stop Duration\")\nplt.ylabel(\"Driver's Race\");","91141aa8":"result = data.groupby('violation')[['search_conducted','drugs_related_stop','is_arrested']].sum()\nresult['Not involved in drugs'] = result['search_conducted']-result['drugs_related_stop']\nplt.figure(figsize = (8,4))\nsns.heatmap(result, annot = True, fmt = \".0f\", cmap = \"Blues\");\nplt.ylabel(\"Violation Type\");","b33bc0ec":"fig, ax = plt.subplots(figsize = (8,4))\nsns.barplot(x = yearly_data.stop_Year, y = yearly_data.search_conducted,\n            data = yearly_data,label = \"Total Search Conductes\", color = \"royalblue\")\nsns.barplot(x = yearly_data.stop_Year, y = yearly_data.drugs_related_stop,\n            data = yearly_data,label = \"Drug Related Stop\", color = \"darkorange\")\nfor i in ax.patches:\n    count = '{:,.0f}'.format(i.get_height())\n    x = i.get_x()+i.get_width()-0.55\n    y = i.get_height()\n    ax.annotate(count, (x, y))\nax.set_title(\"Total Search Conductes vs Drug Related Stop\")\nax.set(xlabel = \"Years\", ylabel = \"Count\")\nax.legend(fontsize = '10');","2ecad2b1":"fig, ax = plt.subplots()\nfig.canvas.draw()\ndata.is_arrested.value_counts().plot(kind=\"bar\", width=0.2, figsize=(8, 4), color = [\"royalblue\",\"darkorange\"])\nplt.ylabel(\"Count\", fontsize=12)\nplt.title(\"Arrested vs. Not Arrested before search conduct\")\nfor i in ax.patches:\n    percentage = '{:.1f}%'.format(100 * i.get_height()\/len(data.is_arrested))\n    x = i.get_x() + i.get_width() - 0.15\n    y = i.get_height()\n    ax.annotate(percentage, (x, y))\nax.set_xticklabels([\"Not Arrested\",\"Arrested\"], rotation = 0);","1fa15649":"fig, ax = plt.subplots(figsize = (5,5))\nax.pie([arrested, not_arrested], labels = ('Arrested','Not Arrested'),\n       autopct = '%1.1f%%', colors = [\"darkorange\",\"royalblue\"])\ncentre_circle = plt.Circle((0,0), 0.35, fc = 'white')\nfig = plt.gcf()\nfig.gca().add_artist(centre_circle)\nplt.title('Arrested and Not Arrested people after search conduct');\nax.axis('equal');","1253f87c":"**Undoubtedly, the traffic violations, as per this dataset, occur the most because of speeding issues at a bar of 60.5% of all other reasons for violations.**","4f34f24e":"**It is observable from the plot that for the most frequent reason of violations, i.e. \u2018over- speeding\u2019, most violations occur during 8:00 am and 4:00 pm, while it is being lower for after midnight and late evenings.**","ee39bdf4":"## Data Manipulation:","2bc5e357":"## Data Analysis:\n\n#### let\u2019s begin analysis of traffic violations and get some wonderful insights.","f21c19ed":"**This is Python based Exploratory Data Analysis on traffic dataset to find out different trends in order to reduce traffic violations.**","4665d4f2":"### Total Search Conduct vs. Drug Related Stop","804e7be8":"## Libraries Used:\n* Pandas\n* Matplotlib\n* Seaborn\n* missingno\n","d2246325":" ### Age Distribution","8e08ffda":"**We can observe it that both male and female drivers aged between 20 to 40 are doing maximum violations, while those above 16 are committing them minimally. It is also clear from the plot that the trend of violations and age group for one gender group follows that of other. This implies to the fact that the violations are independent of the gender of a person, obviously considering all other parameters constant.**","398c1f2f":"### Stop Duration Based on Race","2aa9551d":"**This mapping makes it quite obvious that people with Hispanic and\/ or black race background are made to stop the most, for a potential violation case than any other race. Secondly, it is quite surprising that although white people have recorded to be violating traffic rules the most; they aren't stopped comparatively enough.**","88e84c75":"**It is quite obvious that people violate traffic rules for multiple reasons, be it hurry or urgency, inadequate driving skills, etc. So, for a loose analysis, considering only \u2018hurry\u2019 as a reason for violations, we can deduce forth written from this plot. It is also noteworthy that this assumption isn\u2019t entirely irrational, because 60.5% of the violations occur because of over-speeding (refer second plot). Also, this plot is high in contrast to previous bar plot, pointing to the fact that most of the overall violations at almost every hour of a day are due to \u2018over-speeding\u2019. Hence, statistically, we are covering for most of the violators.\nFrom 10:00 pm in the night, until 2:00 am, a high number of violations occur! An explanation for this might be people returning home or travelling to parties, celebrations, etc. Another important observation can be the highest of all (on an average) violations between 8:00 am to 3:00 pm. A possibility for this may be the conventional work hours of public during these hours, and that there may arise several situations in this case for \u2018over- speeding\u2019. One must also note the considerable dip in violations, particularly at 12:00 noon in this interval. Lastly, for all the hours in a day, females always have had far lesser violation cases than males. There can be many possibilities for this, a few of them being, there are lesser female drivers than male drivers, or the possibilities suggested above don\u2019t follow with both genders, OR maybe \u2018females\u2019 are just \u2018better drivers\u2019!**","a30589e4":"## Data Cleaning:","9e8e9590":"### Hours in Which Vehicle Stopped","73582856":"### Correlation Heatmap","0704ea41":"# Come, Let\u2019s Explore Traffic Violation Data","c3cfea2c":"## Data Loading:","001b089c":"**About Dataset:**\nThis dataset contains around 65k+ traffic related violation records.\nAttribute Information:\n1. stop_date - Date of violation\n2. stop_time - Time of violation\n3. driver_gender - Gender of violators (Male-M, Female-F)\n4. driver_age - Age of violators\n5. driver_race - Race of violators\n6. violation - Category of violation :\n- Speeding\n- Moving Violation (Reckless driving, Hit and run, Assaulting another driver, pedestrian, improper turns and lane changes etc)\n- Equipment (Window tint violations, Headlight\/taillights out, Loud exhaust, Cracked windshield, etc.)\n- Registration\/Plates\n- Seat Belt\n- other (Call for Service, Violation of City\/Town Ordinance, Suspicious Person, Motorist Assist\/Courtesy, etc.)\n7. search_conducted - Whether search is conducted in True and False form\n8. stop_outcome - Result of violation\n9. is_arrested - Whether a person was arrested in True and False form\n10. stop_duration - Detained time for violators approx (in minutes)\n11. drugs_related_stop - Whether a person was involved in drugs crime (True, False)","3bfa161b":"**Now our dataset looks perfect for further analysis.**","019b3b4e":"**1. Some missing values are to remain in the driver_age column. We have to fill these missing values using median.**\n\n**2. After cleaning, we again have to check the remaining missing values.**","09dc02e4":"**Segregating the total violations into the race of the violators, it is clear from this plot that the white, black and Hispanic contribute together to almost 97% of the total violations. Among these people with white race background violate the most with a participation of 74.4% of total. A very obvious reason for this may be the population distribution among a distinct race of people, i.e. since there are most white, any dataset is prone to have more observations for violations from this category. Although, it must be kept in mind that there can be multiple other reasons for this trend as well, and this is mere empirical judgement.**","298c9f1b":"**This bar plot also follows a similar trend to that of previous figure, except only the factorisation of total searches committed into time (yearly) in one and into violation type in the other.**","5f166ff8":"### Hours in Which Speed Violated","59c7c1c1":"### Checking Missing Values in Dataset:","00080680":"### Traffic Violation Distribution Based on Race","67528f56":"### Arrested vs. Not Arrested (Before and After Search Conduct)","3bdae5c4":"### Distribution in Violation Type","8663abb2":"**1. As in the above graph, country_name and search_type columns contain almost all NaN values. we have to drop these two columns.**\n\n**2. All other columns have almost similar patterns of missing values, we have to drop rows from these columns.**","c49cb86f":"**People in their 20s, i.e. of age-group 20\u201330 are observed to be involved in drugs a lot more than those of any other age- group. This also explains the high number of violation records of this age group, as in first plot. This also gives weight to the fact that \u2018drugs\u2019 are an important element of the equation, and must be considered for traffic violation predictions.**","6f2100f5":"**This figure represents dependency of \u2018drug- based\u2019 cases with searches conducted for various types of violation types or reasons. As is followed in all the violation types, most of the total searches conducted do not turn out to be of people involved in drugs. Although a small proportion of them fall in \u2018drug- involvement category\u2019. It is interesting to note that this relation is independent of the type of traffic violation committed.**","3f7d1da7":"### Age Group Involve in Drugs"}}