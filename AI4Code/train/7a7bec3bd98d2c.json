{"cell_type":{"13fa18fe":"code","6d9a46d4":"code","65d86c88":"code","4a4aaebd":"code","9d3fcd7b":"code","5a5e5ff8":"code","cbac534e":"code","b63a7938":"code","563a3ecf":"code","ee084c05":"code","923d6d5e":"code","127138fc":"code","188d86a1":"code","67cd9687":"code","f761a9be":"code","1579cfd1":"code","c24c79e5":"code","e89164fc":"code","32ff7989":"code","25ef4429":"code","bb1cc6dc":"code","a59c2c3f":"code","89c12115":"code","1c79c1d6":"code","ae9ce3ff":"code","3f1a4efb":"code","8a9c8c99":"code","1a879c67":"code","ec2cc8b1":"code","db2b214f":"code","da1a913b":"code","dd25d09e":"code","213a7812":"code","cabb0402":"code","cf65f537":"code","0c9b29d7":"code","6bdd5fc7":"code","eb7429e0":"code","94500754":"code","d5b17eb0":"code","420d6aa9":"code","85372be1":"code","9d3ea931":"markdown","2d42150f":"markdown","ec542ce2":"markdown","4b636f58":"markdown","81d98643":"markdown","094d69a2":"markdown","ff2d6566":"markdown","3dd9612c":"markdown","4255e4ad":"markdown","f0f7df0e":"markdown","bd1d576c":"markdown","902ac7cf":"markdown","03975450":"markdown","dd8e0311":"markdown","b8832515":"markdown","b12154f0":"markdown","932d0272":"markdown","db95e287":"markdown","b9059340":"markdown","7f5a29b4":"markdown","baaca4b2":"markdown","4cf87b72":"markdown","08b5b603":"markdown","da6b4392":"markdown","3dcd6bd8":"markdown","90669269":"markdown","ba3c254b":"markdown","8fbb0095":"markdown","d4b4ed1a":"markdown","6db3833a":"markdown","57e54281":"markdown","0f3a9dd9":"markdown","94195687":"markdown","6e4be8b3":"markdown","f43521cf":"markdown","b01bd34d":"markdown","7967be4e":"markdown","37790910":"markdown","1f1ddfc0":"markdown","912428ff":"markdown","6b5364ed":"markdown","1f0cc682":"markdown","50df2509":"markdown","e6f6ed49":"markdown","bf3784af":"markdown","7c29c554":"markdown","5d20d5be":"markdown","bc2c45c4":"markdown","25abc646":"markdown","fc36d5de":"markdown","8e56c558":"markdown","c848878c":"markdown","fa9eb0a7":"markdown","430602a3":"markdown","2b3ea5f2":"markdown","d4e6d7fd":"markdown","34a9570c":"markdown"},"source":{"13fa18fe":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt \nimport seaborn as sns \nimport matplotlib as mpl\n\n\n\nimport plotly \nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly.offline as py\nfrom plotly.offline import iplot\nfrom plotly.subplots import make_subplots\nimport plotly.figure_factory as ff","6d9a46d4":"df_2021 = pd.read_csv(\"..\/input\/world-happiness-report-2021\/world-happiness-report-2021.csv\")\ndf_history = pd.read_csv(\"..\/input\/world-happiness-report-2021\/world-happiness-report.csv\")\npd.set_option('display.max_columns', None)","65d86c88":"df_2021.describe()","4a4aaebd":"df_history.describe()","9d3fcd7b":"df_2021.info()\nprint()\nprint(\"-\"*60)\nprint()\ndf_history.info()","5a5e5ff8":"df_2021 = df_2021.rename(columns={\"Ladder score\": \"Life Ladder\", \"Logged GDP per capita\": \"Log GDP per capita\", \"Healthy life expectancy\":\"Healthy life expectancy at birth\", })\ndf = pd.concat([df_history, df_2021], axis=0, join=\"outer\", ignore_index=True)\ndf = df.drop(columns=['Standard error of ladder score', 'upperwhisker', 'lowerwhisker',\n       'Ladder score in Dystopia', 'Explained by: Log GDP per capita',\n       'Explained by: Social support', 'Explained by: Healthy life expectancy',\n       'Explained by: Freedom to make life choices',\n       'Explained by: Generosity', 'Explained by: Perceptions of corruption',\n       'Dystopia + residual', \"Positive affect\", \"Negative affect\"])","cbac534e":"df.info()","b63a7938":"df.isnull().sum()","563a3ecf":"for i in df[\"Country name\"].unique():\n    filt = (df[\"Country name\"] == i)\n    regional = df.loc[filt, \"Regional indicator\"].unique()[-1]\n    df.loc[filt, \"Regional indicator\"] = regional\ndf","ee084c05":"df.year = df.year.fillna(2021)","923d6d5e":"df.isnull().sum()","127138fc":"def fill_by_country(df):\n    missing = df.drop([\"Country name\", \"Regional indicator\"], axis=1).isnull().sum()\n    missing = missing[missing>0]\n    for i in missing.index:\n        df[i] = df.groupby(\"Country name\")[i].transform(lambda val: val.fillna(val.mean()))\n    return df","188d86a1":"fill_by_country(df)","67cd9687":"df.isnull().sum()","f761a9be":"df[df[\"Log GDP per capita\"].isnull()]","1579cfd1":"df = df[~df[\"Log GDP per capita\"].isnull()]\ndf.isnull().sum()","c24c79e5":"df[df[\"Social support\"].isnull()]","e89164fc":"df = df[~df[\"Social support\"].isnull()]\ndf.isnull().sum()","32ff7989":"df.drop(\"year\",axis=1).corr()","25ef4429":"fig = go.Figure(go.Heatmap(z=df.corr(), x=df.corr().columns.tolist(), y=df.corr().columns.tolist(),\n                          colorscale=\"viridis\"))\nfig.show()","bb1cc6dc":"df.groupby(\"Regional indicator\")[\"Life Ladder\"].describe().sort_values(by=\"std\")","a59c2c3f":"fig = px.box(df, x=\"Life Ladder\", y=\"Regional indicator\", hover_data = df[['Regional indicator','Country name']])\nfig.show()","89c12115":"middle_east = df[df[\"Regional indicator\"] == \"Middle East and North Africa\"]\nmiddle_east","1c79c1d6":"df.drop(\"year\",axis=1).corr()","ae9ce3ff":"middle_east.drop(\"year\",axis=1).corr()","3f1a4efb":"fig = go.Figure(go.Heatmap(z=middle_east.corr(), x=middle_east.corr().columns.tolist(), y=middle_east.corr().columns.tolist(),\n                          colorscale=\"viridis\"))\nfig.show()","8a9c8c99":"middle_east.describe()","1a879c67":"fig = px.box(middle_east, x=\"Life Ladder\", hover_data = middle_east[['Country name']])\nfig.update_traces(quartilemethod=\"inclusive\")\nfig.show()","ec2cc8b1":"middle_east = middle_east.sort_values(by=\"Life Ladder\")","db2b214f":"fig = px.bar(middle_east, x=\"Life Ladder\", y=\"Country name\")\nfig.show()","da1a913b":"fig=go.Figure()\nfig.add_trace(go.Scatter(\n    x=middle_east.groupby(\"Country name\").mean().sort_values(by=\"Life Ladder\").index,\n    y=middle_east.groupby(\"Country name\").mean().sort_values(by=\"Life Ladder\")[\"Life Ladder\"],\n    name='Happines Score',\n    mode='markers+text',\n    marker_color='blue',\n    marker_size=10,\n    textposition='top center',\n    line=dict(color='red',dash='dash'),\n))\nfig.update_layout(\n    title= \"<b>Middle East Happiness Score in 2021<\/b>\",\n    xaxis_title=\"<b>Country<\/b>\",\n    yaxis_title=\"<b>Happiness Score<\/b>\",\n    template='plotly_white',\n    font=dict(\n        size=12,\n        color=\"Black\",\n        family=\"Oswald', sans-serif\"\n        ),\n    xaxis=dict(showgrid=True),\n    yaxis=dict(showgrid=True),\n    yaxis2=dict(showgrid=True,overlaying='y',side='right',title='<b>Happiness Score<\/b>'),\n)\nfig.show()","dd25d09e":"middle_east = middle_east.sort_values([\"Country name\", \"year\"])\n\ncss3_colors = ['#add8e6', '#f08080','#e0ffff','#fafad2','#d3d3d3','#90ee90','#ffb6c1','#ffa07a','#20b2aa','#87cefa','#778899','#b0c4de','#32cd32','#ff00ff','#66cdaa','#ba55d3', '#7b68ee']\ncss3_dict ={}\ni=0\nfor name in middle_east[\"Country name\"].unique():\n    css3_dict[name]=css3_colors[i]\n    i+=1\n    \n\n    \nfig=go.Figure()\nfor name in middle_east['Country name'].unique():\n    fig.add_trace(go.Scatter(\n    x=middle_east[middle_east['Country name']==name]['year'],\n    y=middle_east[middle_east['Country name']==name]['Life Ladder'],\n    name=name,\n    mode='markers+text+lines',\n    marker_color='black',\n    line=dict(color=css3_dict[name]),\n    marker_size=3,\n    yaxis='y1'))\n    \nfig.update_layout(\n    title=\"Happiness Score Trend in Central and Eastern Europe \",\n    xaxis_title=\"Year\",\n    yaxis_title='Happiness Score',\n    template='plotly_white',\n    font=dict(\n        size=14,\n        color=\"Blue\",\n        family=\"Oswald', sans-serif\"\n    ),\n    xaxis=dict(showgrid=True),\n    yaxis=dict(showgrid=True)\n)\nfig.show()","213a7812":"trace = go.Scatter(x=middle_east[middle_east[\"year\"]==2021]['Life Ladder'],y=middle_east[middle_east[\"year\"]==2021]['Log GDP per capita'],text = middle_east['Country name'],mode='markers',marker={'color':'blue', 'size':10})\ndf=[trace]\nlayout = go.Layout(title='Happiness Score & Logged GDP per capita in Middle East',xaxis=dict(title='Ladder Score'),yaxis=dict(title='Log GDP per capita'),hovermode='closest')\nfigure = go.Figure(data=df,layout=layout)\nfigure.update_layout(template='plotly_white',\n                  font=dict(family=\"Oswald', sans-serif\"))\nfigure.show()","cabb0402":"print(f\"Happines score and GDP has {round(middle_east.corr().loc['Life Ladder', 'Log GDP per capita'],2)} correlation score.\")","cf65f537":"trace = go.Scatter(x=middle_east[middle_east[\"year\"]==2021]['Life Ladder'],y=middle_east[middle_east[\"year\"]==2021]['Social support'],text = middle_east['Country name'],mode='markers',marker={'color':'blue', 'size':10})\ndf=[trace]\nlayout = go.Layout(title='Happiness Score & Social support in Middle East',xaxis=dict(title='Ladder Score'),yaxis=dict(title='Social support'),hovermode='closest')\nfigure = go.Figure(data=df,layout=layout)\nfigure.update_layout(template='plotly_white',\n                  font=dict(family=\"Oswald', sans-serif\"))\nfigure.show()","0c9b29d7":"print(f\"Happines score and social support has {round(middle_east.corr().loc['Life Ladder', 'Social support'],2)} correlation score.\")","6bdd5fc7":"trace = go.Scatter(x=middle_east[middle_east[\"year\"]==2021]['Life Ladder'],y=middle_east[middle_east[\"year\"]==2021]['Healthy life expectancy at birth'],text = middle_east['Country name'],mode='markers',marker={'color':'blue', 'size':10})\ndf=[trace]\nlayout = go.Layout(title='Happiness Score & Healthy life expectancy at birth in Middle East',xaxis=dict(title='Ladder Score'),yaxis=dict(title='Healthy life expectancy at birth'),hovermode='closest')\nfigure = go.Figure(data=df,layout=layout)\nfigure.update_layout(template='plotly_white',\n                  font=dict(family=\"Oswald', sans-serif\"))\nfigure.show()","eb7429e0":"print(f\"Happines score and healthy life expectancy at birth has {round(middle_east.corr().loc['Life Ladder', 'Healthy life expectancy at birth'],2)} correlation score.\")","94500754":"trace = go.Scatter(x=middle_east[middle_east[\"year\"]==2021]['Life Ladder'],y=middle_east[middle_east[\"year\"]==2021]['Perceptions of corruption'],text = middle_east['Country name'],mode='markers',marker={'color':'blue', 'size':10})\ndf=[trace]\nlayout = go.Layout(title='Happiness Score & Perceptions of corruption in Middle East',xaxis=dict(title='Ladder Score'),yaxis=dict(title='Perceptions of corruption'),hovermode='closest')\nfigure = go.Figure(data=df,layout=layout)\nfigure.update_layout(template='plotly_white',\n                  font=dict(family=\"Oswald', sans-serif\"))\nfigure.show()","d5b17eb0":"print(f\"Happines score and perceptions of corruption has {round(middle_east.corr().loc['Life Ladder', 'Perceptions of corruption'],2)} correlation score.\")","420d6aa9":"trace = go.Scatter(x=middle_east[middle_east[\"year\"]==2021]['Life Ladder'],y=middle_east[middle_east[\"year\"]==2021]['Freedom to make life choices'],text = middle_east['Country name'],mode='markers',marker={'color':'blue', 'size':10})\ndf=[trace]\nlayout = go.Layout(title='Happiness Score & Freedom to make life choices in Middle East',xaxis=dict(title='Ladder Score'),yaxis=dict(title='Freedom to make life choices'),hovermode='closest')\nfigure = go.Figure(data=df,layout=layout)\nfigure.update_layout(template='plotly_white',\n                  font=dict(family=\"Oswald', sans-serif\"))\nfigure.show()","85372be1":"print(f\"Happines score and freedom to make life choices has {round(middle_east.corr().loc['Life Ladder', 'Freedom to make life choices'],2)} correlation score.\")","9d3ea931":"***\n- Now it is time for *`year`* column.\n***","2d42150f":"***\n- Let's start with boxplot.\n***","ec542ce2":"***\n- Is really the money answer to our happiness? Let's check!\n***","4b636f58":"***\n- Let's see how correlated the variables in Middle East and North Africa.\n***","81d98643":"def trust(corrupt):\n    if corrupt >=  0.8450:\n        return \"Low trust in institutions\"\n    elif corrupt < 0.8450 and corrupt > 0.781:\n        return \"Lower than normal level trust in institutions\"\n    elif corrupt <= 0.781 and corrupt > 0.667:\n        return \"About the normal level trust in institutions\"\n    else:\n        return \"High level trust in institutions\"\ndf3[\"Trust in institutions\"] = df3[\"Perceptions of corruption\"].apply(trust)","094d69a2":"***\n- Great! Our last missing values in the *`Social support`* and *`Perceptions of corruption`* in the same row. Let's drop this row too.\n***","ff2d6566":"### What makes a country happier?\n\nWhat makes a country happy? Or.. An easier question. What makes you, as an individual, happier? Your future expectations or your income or your honest government? According to <a href=\"https:\/\/worldhappiness.report\/faq\/\" target=\"_blank\">happiness report<\/a>.; \"**The variables used reflect what has been broadly found in the research literature to be important in explaining national-level differences in life evaluations.**\". We will be using those datas to understand better what makes a country more happy. Without further ado, let's get started","3dd9612c":"***\n- What about happines at the Regional level?\n***","4255e4ad":"***\n- Based on descriptive information, possible outliers can be seen in the:\n    - Healthy life expectancy at birth\n    - Freedom to make life choices\n    - Perceptions of corruption\n***","f0f7df0e":"## Intro","bd1d576c":"## GDP's Impact on Happiness Score","902ac7cf":"***\n- As expected, perceptions of corruption has strong negative correlation with happiness. If people who are ruling you are not honest, it is hard to stay happy.\n***","03975450":"***\n- Still there are some missing values. What should we do? Filling those values with mean or median values may be one solution. Or we can just drop those values which is not the best option considering there are at least 110 rows with missing values.\n- I will be filling missing values with that country's mean values. That seems like a proper way to me.\n***","dd8e0311":"***\n## What Makes a Country Happier?\n***","b8832515":"***\n- It is important to understand that we are not working with just 2021 data but all data which contains data from 2013 to 2021. This values are mean of all the years.\n- Most of the countries has happines score between 4.5 and 6.5.\n***","b12154f0":"***\n- Let's see correlation in the heatmap.\n***","932d0272":"***\n- Let's start working with other variables' relation with happiness score.\n***","db95e287":"***","b9059340":"***\n- **Israel** has the highest happiness score in Middle East and North Africa.\n- **Yemen** has the least happiness score in Middle East and North Africa.","7f5a29b4":"***\n- Happiness score(Life Ladder) has strong level correlation with GDP, Social Support and Healthy life expectancy at birth.\n- Freedom to make life choices and happiness score have mide level correlation between them.\n- Perception of corruption and happiness score have weak level negative level correlation between them.\n***","baaca4b2":"## Healthy Life Expectancy at Birth's Impact on Happiness Score","4cf87b72":"***\n- South Asia, Latin America and Caribbean, North American and ANZ, Western Europe has several outliers in the minimum side.\n- Sub-Saharan Africa has outlier in the maxiumum side.\n- Middle East and North Africa seems interesting to me since it has long tail in both minimum and maximum side.\n- Let's dive into Middle East and North Africa.","08b5b603":"***\n- We filled most of the missing values but still there are some. Let's check those missing values if the same row has more than one missing values. If that is the case, it may be clever to just drop those rows.\n***","da6b4392":"***\n- What about historic data?\n***","3dcd6bd8":"***\n- Now, let's fill *`Regional indicator`* column by using 2021 data.\n***","90669269":"***\n- First, inspect two dataframes one by one.\n***","ba3c254b":"***\n- Let's check statistical information of 2021 data.\n***","8fbb0095":"## Happiness in the Middle East and North Africa","d4b4ed1a":"***\n- Apart from *`Regional indicator`* column, we have only 2 missing values. Let's look one of them.\n***","6db3833a":"We have come to an end of another great analysis. It was really enjoyable for me. It was a pleasure to work with this dataset for me. I would like to thank dataset contibutor for this data. I hope you enjoyed too. If you liked my EDA on this dataset, feel free to check my other notebooks as well. Looking forward for your feedback. Thanks a lot.\n\nHave a great day.","57e54281":"***\n- First, let's check correlation among the numerical variables in the dataset.\n***","0f3a9dd9":"***\n- We have done it! There is no missing values in the columns other than *`Regional indicator`* column in which it is OK to leave as NaN. This is because 2021 data had no information about those countries that historic data had. It is not a problem though. We can start our analysis now.\n***","94195687":"***\n- Healthy life expectancy at birth has strong correlation score with happiness.\n***","6e4be8b3":"## Freedom to Make Life Choices' Impact on Happiness Score","f43521cf":"***\n- What about social support?\n***","b01bd34d":"***\n- Let's look at heatmap for better understanding.\n***","7967be4e":"***\n- There seems to be some missing values. Let's check missing values.\n***","37790910":"***\n- North America and ANZ\thas the highest level happines mean on the other hand Sub-Saharan Africa has the least level happines mean.\n- Western Europe with the highest level happiness and South Asia least highest levet happiness.\n- North America and ANZ has the least standard deviation and almost the same mediand and mean which means happiness there is a normal distribution acroos countires in North America and ANZ.\n- Middle East and North Africa with the highest standard deviation.\n***","1f1ddfc0":"***\n- In this EDA, I will mostly focus on happines score.\n***","912428ff":"***\n- Let's start with importing required libraries.\n***","6b5364ed":"***\n- *`year`* column has missing values but all those values are actually 2021. Because we know historic data had no missing values in *`year`* column.\n- *`Regional indicator`* colum has 1949 missing values. That is just like *`year`* column. Historic column had no column as *`Regional indicator`*. We will fill those missing values by using 2021 data.\n- I will check the other ones later.\n***","1f0cc682":"***\n- The answer the question I asked before is yes. GDP has really strong correlation with happines score. We can see this from scatterplot.","50df2509":"## Social Support's Impact on Happiness Score","e6f6ed49":"***\n- Also social support has strong correlation score with happiness.\n***","bf3784af":"***\n- Let's see all this better with boxplot.\n***","7c29c554":"***\n- Let's continue with a bar plot.\n***","5d20d5be":"***\n- I will be using two datasets in this analysis. One of them is latest world happines report of 2021 and the other one contains data from previous years.\n***","bc2c45c4":"***\n- Algeria, Jordan, Turkey and United Arab Emirates have downtrend. \n- Bahrain and Iraq's happiness increased over the last years.\n***","25abc646":"***\n- Let's read our data.\n***","fc36d5de":"***\n- Boxplot does not show any possible outliers.\n***","8e56c558":"## Perceptions of Corruption's Impact on Happiness Score","c848878c":"***\n- All *`Log GDP per capita`*, *`Generosity`*  and *`Regional indicator`* columns' missing values in the same 12 rows. Also 4 of them also contains missing values in *`Healthy life expectancy at birth`* column. Let' drop those 12 rows.\n***","fa9eb0a7":"***\n- Now, let's check general information of both dataframes.\n***","430602a3":"***\n- Let's check missing values again.\n***","2b3ea5f2":"***\n- Even though some similarities can be found with the whole dataset correlation, in Middle East and North Africa has some differences in correlation matrix.\n- GDP has more correlation with happiness compared to whole dataset but in a low margin but on the other hand, Generosity has so much more correlation with happines in Middle East and North Africa compared to whole dataset.\n- Social support, Healthy life expectancy at birth and Perception of corruption has much lower correlation with happines than whole dataset.\n- Freedom to make life choices' correlation almost identical in both datasets.\n***","d4e6d7fd":"***\n- Let's see happiness score trends in the past years.\n***","34a9570c":"***\n- 2021 data has no missing values. Great! On the other hand historic data has some missing values. The other thing is some of the column names are different on each dataframe. Although there are 11 and 20 variables in dataframes, my interest will be on\n    - 'Country name'\n    - 'Year'\n    - 'Life Ladder'\n    - 'Log GDP per capita'\n    - 'Social support'\n    - 'Healthy life expectancy at birth'\n    - 'Freedom to make life choices'\n    - 'Generosity'\n    - 'Perceptions of corruption'\n    - 'Regional indicator'\n    \n- Let's prepare our data and concatenate two dataframes into one dataframe.\n***"}}