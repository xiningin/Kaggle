{"cell_type":{"437a6090":"code","df5d67e3":"code","82227834":"code","fc42da7a":"code","61769337":"code","b370f60d":"code","f0e863bb":"code","e9b6e30e":"code","166a8082":"code","d94a02a0":"code","734ac381":"code","e740bf82":"code","7a3aa128":"code","fef0fcce":"code","7c1b8b13":"code","70a5e69a":"code","894ef7c0":"code","91960807":"code","d6c29cc2":"code","56a364e4":"code","05468036":"code","73c158e1":"code","cdb27dcc":"code","76143d7d":"code","d31e1f22":"code","47ca7d54":"code","79e5a617":"code","bf3d42ab":"code","2bf5b199":"code","256a7ffd":"code","ba413575":"code","f3b33b4b":"code","2d63e47d":"code","40a7ec49":"code","66917a35":"code","a74f86ca":"code","235fb485":"code","b9ddd991":"code","93da4b09":"code","d472d117":"code","30a7aef2":"code","724820d8":"code","79f2064d":"code","959f7936":"code","4644a8fc":"code","edfc96f7":"code","1b20a680":"code","1b86a4b1":"code","9f037bd2":"code","b840d1f5":"code","a3203c3b":"code","4bdb48ba":"code","71ca8f6a":"code","b1c1f368":"code","2ebcda62":"code","180b4d66":"code","a26dcf4a":"code","fc6826bf":"code","6df912f6":"code","41e72a9c":"markdown","1e626d2c":"markdown","d8cc32a4":"markdown","f80c1b38":"markdown","8909a372":"markdown","5eae37b8":"markdown","7430a1a5":"markdown","d56e64cd":"markdown","5c86a570":"markdown","8d3ac7a5":"markdown","a0a6b9a2":"markdown","6838dce2":"markdown","9a8bed88":"markdown","b228a261":"markdown","be30c1e6":"markdown","9d7db561":"markdown","931874ad":"markdown","1bf5a591":"markdown","244f4aaa":"markdown","1646b494":"markdown","eba0b28e":"markdown","f9297ff9":"markdown","5aae4d3b":"markdown","8b5e8442":"markdown","4870fe2a":"markdown","8ed5160a":"markdown","4be142ed":"markdown","afc61f9e":"markdown","1e16c4ad":"markdown","5bbb4ebc":"markdown","5103bfa1":"markdown","121c4f84":"markdown","f964dda7":"markdown","f85df84d":"markdown","d06a7ee5":"markdown","3934508c":"markdown","8342491d":"markdown","e30f92b0":"markdown","09de89cc":"markdown","adbedfee":"markdown","987d8808":"markdown","19b6dc85":"markdown","56c203da":"markdown","0205bd8d":"markdown","5164ac45":"markdown","5dd947f5":"markdown","aae01b45":"markdown","c0bac4c6":"markdown","fd1273af":"markdown","abc12ed4":"markdown","8a151744":"markdown","e9dd03e6":"markdown","352026fd":"markdown","89b5dd25":"markdown","606bd663":"markdown","b17ff502":"markdown"},"source":{"437a6090":"# Importing the necessary libraries\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","df5d67e3":"# Now we store the datasets into a dataframe of our own\nreport_df = pd.read_csv(\"\/kaggle\/input\/world-happiness\/2017.csv\") \ncountry_df = pd.read_csv(\"..\/input\/country-data\/country_profile_variables.csv\")","82227834":"display(report_df) \ndisplay(country_df)","fc42da7a":"print(\"The dataset has {} rows and {} columns\".format(report_df.shape[0], report_df.shape[1]))","61769337":"report_df.columns # The metrics in the happiness report","b370f60d":"report_df.columns = report_df.columns.str.replace(\".\",\" \");","f0e863bb":"report_df.info()","e9b6e30e":"report_df.describe()","166a8082":"print(\"This dataset has {} rows and {} columns\".format(country_df.shape[0], country_df.shape[1]))","d94a02a0":"country_df.info()","734ac381":"sel_cols = ['country', 'Region', 'Surface area (km2)',\n            'Population in thousands (2017)', 'Population density (per km2, 2017)',\n       'Sex ratio (m per 100 f, 2017)',\n       'GDP: Gross domestic product (million current US$)',\n      'Unemployment (% of labour force)',\n       'Labour force participation (female\/male pop. %)',\n      'Food production index (2004-2006=100)',\n       'Fertility rate, total (live births per woman)',\n       'Life expectancy at birth (females\/males, years)',\n       'Population age distribution (0-14 \/ 60+ years, %)',\n       'Infant mortality rate (per 1000 live births',\n       'Health: Total expenditure (% of GDP)',\n       'Health: Physicians (per 1000 pop.)',\n       'Education: Government expenditure (% of GDP)',\n       'Seats held by women in national parliaments %',\n       'Pop. using improved drinking water (urban\/rural, %)',\n       'Pop. using improved sanitation facilities (urban\/rural, %)'\n       ]\n\ncountry_df_backup = country_df.copy() # Keeping a backup\ncountry_df = country_df[sel_cols] # Trimming the dataframe","e740bf82":"#This code snippet results in a very long output. So, I'm converting it to a comment. \n#Feel free to remove the # if you want to run the cell\n\n\n#with pd.option_context('display.max_rows', None, 'display.max_columns', None):  # Displayong the entire DataFrame\n #   print(country_df) ","7a3aa128":"# Labour Force\ncountry_df[\"Labour force participation (female %)\"] = country_df[country_df['Labour force participation (female\/male pop. %)'].str.contains(\"\/\")]['Labour force participation (female\/male pop. %)'].apply(lambda x: x.split(\"\/\")[0]);\ncountry_df[\"Labour force participation (male %)\"] = country_df[country_df['Labour force participation (female\/male pop. %)'].str.contains(\"\/\")]['Labour force participation (female\/male pop. %)'].apply(lambda x: x.split(\"\/\")[1]);\n\n# Life Expectancy\ncountry_df[\"Life Expectancy (female %)\"] = country_df[country_df[\"Life expectancy at birth (females\/males, years)\"].str.contains(\"\/\")][\"Life expectancy at birth (females\/males, years)\"].apply(lambda x: x.split(\"\/\")[0]);\ncountry_df[\"Life Expectancy (male %)\"] = country_df[country_df[\"Life expectancy at birth (females\/males, years)\"].str.contains(\"\/\")][\"Life expectancy at birth (females\/males, years)\"].apply(lambda x: x.split(\"\/\")[1]);\n\n# Population age distribution\ncountry_df[\"Population age distribution (0-14 %)\"] = country_df[country_df[\"Population age distribution (0-14 \/ 60+ years, %)\"].str.contains(\"\/\")][\"Population age distribution (0-14 \/ 60+ years, %)\"].apply(lambda x: x.split(\"\/\")[0])\ncountry_df[\"Population age distribution (60+ years %)\"] = country_df[country_df[\"Population age distribution (0-14 \/ 60+ years, %)\"].str.contains(\"\/\")][\"Population age distribution (0-14 \/ 60+ years, %)\"].apply(lambda x: x.split(\"\/\")[1])\n\n# Removing the original columns with grouped data\nremove_cols = [\"Labour force participation (female\/male pop. %)\", \"Life expectancy at birth (females\/males, years)\",  \"Population age distribution (0-14 \/ 60+ years, %)\", \"Pop. using improved drinking water (urban\/rural, %)\"]\ncountry_df.drop(columns=remove_cols, inplace = True)\n","fef0fcce":"# Renaming\ncountry_df.rename(columns={\"country\":\"Country\"},inplace=True)\ncountry_df.rename(columns={ 'Pop. using improved sanitation facilities (urban\/rural, %)':'Pop. using improved sanitation facilities %'}, inplace=True)\n\n# Merging\ncountry_report = report_df.merge(country_df, how = \"left\", on= \"Country\")\ndisplay(country_report)","7c1b8b13":"country_report[\"Region\"].unique()","70a5e69a":"# Defining the groups\nRegions = {\"Asia\" : ['SouthernAsia', 'WesternAsia', 'South-easternAsia', 'CentralAsia', \"EasternAsia\" ],\n\"Oceania\" : ['Polynesia', 'Oceania', 'Melanesia', 'Micronesia'],\n\"Europe\" : ['SouthernEurope',  'WesternEurope', 'EasternEurope', 'NorthernEurope'],\n\"Africa\" : ['NorthernAfrica', 'MiddleAfrica', 'WesternAfrica', 'SouthernAfrica', 'EasternAfrica'],\n\"NorthernAmerica\" : [\"NorthernAmerica\",'CentralAmerica','Caribbean']}\n\n# Running a loop to group them\ncountry_report.set_index(\"Country\", inplace=True) # Setting the country name as index so that it's easier to search\nfor i in Regions.keys():\n    country_report.replace(Regions[i], i, inplace = True)","894ef7c0":"country_report.select_dtypes(include=\"object\").columns","91960807":"cols = list(country_report.select_dtypes(\"object\").columns)\ndel cols[0] # The region column cannot be converted to numeric\n\nfor i in cols:\n  country_report[i] = pd.to_numeric(country_report[i], errors=\"coerce\") # bad values that can't be converted to float will be converted to NaN","d6c29cc2":"country_report.info()","56a364e4":"country_report.replace(\"-99\", np.nan, inplace=True)\ncountry_report.replace(\"-99.0\", np.nan, inplace=True)","05468036":"per_nan = country_report.isna().sum()\/len(country_df)*100 # checking percentage of NaN\n\n# Dropping those columns\nfor i in country_report.columns:\n    if per_nan[i]>=15 :\n        print(\"\\n The column - \" + i + \", with {0:.2f}% of NaN values has been removed\".format(per_nan[i]) )\n        country_report.drop(i, axis = 1, inplace=True)\n","73c158e1":"report_heat = report_df.drop(columns=[\"Whisker high\", \"Whisker low\"], axis = 1)","cdb27dcc":"report_heat.corr(method= \"pearson\") # Using pearson correlation coeffieient","76143d7d":"report_heat.corr(method= \"spearman\") # Using spearman correlation coefficient because the data might not be normally distributed","d31e1f22":"plt.figure(figsize=(10,8))\nplt.title(\"Heatmap to capture the strength of correlation\", fontsize =18, pad=15)\nplt.xticks(fontsize=14)\nplt.yticks(fontsize=14)\nsns.heatmap(report_heat.drop(columns=[\"Dystopia Residual\",\"Happiness Rank\"], axis=1).corr(method=\"spearman\"), cmap=\"YlOrRd\");","47ca7d54":"country_report.sort_values(by=\"Happiness Score\", ascending=False).head(10)","79e5a617":"country_report['Economy  GDP per Capita '].sort_values(ascending=False).head(10)","bf3d42ab":"# Function to check if there is any country that's common in both the \"Top happiest countries\" and the top of a specific metric\ndef top_check(df, parameter, t):\n    tops = []\n    tops_true = {\"Country\": [],\"Region\":[], \"Happiness Score\": [], \"Happiness Rank\":[],parameter:[],\"Parameter Rank\": []} #countries that make it to the top\n    tops_false = {\"Country\": [], \"Region\":[], \"Happiness Score\": [], \"Happiness Rank\":[],parameter:[],\"Parameter Rank\": []}#countries that don't make it to the top\n    most_gen = df[parameter].sort_values(ascending=False).head(t)\n    tops_cons = most_gen.index\n\n    # Creating a list of the top most countries with a given metric\n    for i in tops_cons:\n        tops.append(i)\n\n    # List of happiest countries in the world\n    x = list(df.index)\n    y = x[:t]\n\n    # Creating a dataframe with the common countries\n    for p, j in enumerate(tops):\n        if j in y:\n            tops_true[\"Country\"].append(j)\n            tops_true[\"Region\"].append(df.at[j,\"Region\"])\n            tops_true[\"Happiness Score\"].append(df.at[j,\"Happiness Score\"])\n            tops_true[\"Happiness Rank\"].append(df.at[j,\"Happiness Rank\"])\n            tops_true[parameter].append(df.at[j,parameter])\n            tops_true[\"Parameter Rank\"].append(p+1)\n        else:\n            tops_false[\"Country\"].append(j)\n            tops_false[\"Region\"].append(df.at[j,\"Region\"])\n            tops_false[\"Happiness Score\"].append(df.at[j,\"Happiness Score\"])\n            tops_false[\"Happiness Rank\"].append(df.at[j,\"Happiness Rank\"])\n            tops_false[parameter].append(df.at[j,parameter])\n            tops_false[\"Parameter Rank\"].append(p+1)\n\n    return(pd.DataFrame(tops_true), pd.DataFrame(tops_false))\n        ","2bf5b199":"top_gdp , no_top_gdp = top_check(country_report, 'Economy  GDP per Capita ',20)\nprint(\"These are the among the top 20 countries in which GDP per capita contributes the most to happiness,\\nand that also in the top 20 happiest country country overall\")\ndisplay(top_gdp)\nprint(\"These are the among the top countries where GDP contributes the most to their happiness,\\nbut the country overall doesn't make it to the top 20 happiest countries\")\ndisplay(no_top_gdp)","256a7ffd":"x1 = country_report[\"Economy  GDP per Capita \"].dropna().sort_values(ascending=False).head(20)\ny1= country_report.dropna()[\"Health: Total expenditure (% of GDP)\"]\nplt.figure(figsize=[10,8])\nplt.yticks(fontsize=13)\nplt.xticks(fontsize= 13)\nplt.title(\"Top 30 countries with highest contribution of GDP per capita on happiness\", fontsize = 14, pad=15)\nplt.xlabel(xlabel=\"GDP per capita's contribution in happiness score\", fontsize=17)\nplt.ylabel(ylabel = \"Country\", fontsize=17)\nsns.barplot(y=x1.index, x=x1);\n","ba413575":"happy_gdp = country_report[['Happiness Rank', 'Happiness Score',\"Region\" , 'Economy  GDP per Capita ','GDP: Gross domestic product (million current US$)','Unemployment (% of labour force)', 'Labour force participation (female %)',\n'Labour force participation (male %)']].sort_values(by='Economy  GDP per Capita ',ascending=False).head(20)\ndisplay(happy_gdp)","f3b33b4b":"sns.set_style(\"whitegrid\")\nplt.figure(figsize=(10,8))\nplt.xticks(fontsize=12)\nplt.yticks(fontsize= 12)\nplt.xlabel(xlabel = \"Happiness Score\",fontsize = 15)\nplt.ylabel(ylabel= \"Unemployment (% of labour force)\", fontsize= 15)\nplt.title(\"Unemployment vs Happiness score\", fontsize = 18, pad=10)\nsns.scatterplot(x= 'Happiness Score', y ='Unemployment (% of labour force)', hue=\"Region\", size=\"Happiness Rank\", data=happy_gdp );","2d63e47d":"report_df['Health  Life Expectancy '].corr(report_df[\"Happiness Score\"])","40a7ec49":"#Checking for missing regions\ncountry_report[country_report[\"Region\"].isna()][\"Region\"]","66917a35":"country_report.at[\"United States\", \"Region\"] = \"NorthernAmerica\"\ncountry_report.at[\"Russia\", \"Region\"] = \"Asia\"\ncountry_report.at[\"Hong Kong S.A.R., China\", \"Region\"] = \"Asia\"\ncountry_report.at[\"Palestinian Territories\", \"Region\"] = \"Asia\"\ncountry_report.at[\"Iran\", \"Region\"] = \"Asia\"\ncountry_report.at[\"Syria\", \"Region\"] = \"Asia\"","a74f86ca":"sns.set_style(\"white\")\nplt.figure(figsize=[12,8])\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.xlabel(\"Life Expectancy\", fontsize=15)\nplt.ylabel(\"Happiness Score\", fontsize=15)\nplt.title(\"Life Expectancy's contribution to Happiness Scores across various regions of the world\", fontsize = 15)\nsns.scatterplot(x= 'Health  Life Expectancy ', y = \"Happiness Score\", hue= \"Region\", data=country_report, size=\"Happiness Rank\");","235fb485":"euro_life = country_report[country_report[\"Region\"] == \"Europe\"][[\"Happiness Rank\", \"Happiness Score\", 'Health  Life Expectancy ', \"Infant mortality rate (per 1000 live births\", 'Life Expectancy (female %)','Life Expectancy (male %)',\"Health: Total expenditure (% of GDP)\"]].sort_values(by=\"Infant mortality rate (per 1000 live births\")\ndisplay(euro_life)","b9ddd991":"av_eu_im = country_report[country_report[\"Region\"] == \"Europe\"][\"Infant mortality rate (per 1000 live births\"].sort_values().head(10).mean()\nav_eu_le = (country_report[country_report[\"Region\"] == \"Europe\"]['Life Expectancy (male %)'].sort_values().head(10).mean()+country_report[country_report[\"Region\"] == \"Europe\"]['Life Expectancy (female %)'].sort_values().head(10).mean())\/2\nprint(\"The average infant mortality rate in the top 10 European countries is \" + str(round(av_eu_im)) + (\" babies out of 1000\"))\nprint(\"The average life expectancy in the top 10 European countries is \" + str(av_eu_le) + (\" years\"))","93da4b09":"af_im = country_report[country_report.Region == \"Africa\"][\"Infant mortality rate (per 1000 live births\"].sort_values(ascending=False).head(10).mean()\nprint(\"The average infant mortality rate in the 10 worst performing African countries is {0:.2f} babies out of 1000\".format(af_im))","d472d117":"country_report[country_report.Region == \"Africa\"][[\"Happiness Score\", \"Infant mortality rate (per 1000 live births\", 'Life Expectancy (female %)','Life Expectancy (male %)',\"Health: Total expenditure (% of GDP)\"]].drop([\"Chad\", \"Somalia\"]).sort_values(by=\"Infant mortality rate (per 1000 live births\", ascending=False).head(10)","30a7aef2":"country_report.loc[\"Sierra Leone\"]","724820d8":"# Filtered datasets\nbest_eu = country_report[country_report[\"Region\"] == \"Europe\"][\"Infant mortality rate (per 1000 live births\"].sort_values().head(5)\nworst_af = country_report[country_report.Region == \"Africa\"][\"Infant mortality rate (per 1000 live births\"].sort_values(ascending=False).head(5)\nbest_worst = best_eu.append(worst_af)\n# Seaborn plot\nsns.set_style(\"white\")\nsns.set(font_scale = 1.35)\nplt.figure(figsize=[12,10])\nplt.title(\"Comparison of the 5 best performing European vs worst performing African counries\")\nplt.xticks(rotation = 90)\nsns.barplot(x = best_worst.index, y = best_worst);","79f2064d":"print(\"The average contribution of social support to happiness score is {:.2f}\".format(report_df[\"Family\"].mean()))\nprint(\"While maximum contribution of social support to happiness score is {0:.2f}\".format(report_df[\"Family\"].max()))\nprint(\"And 70% of the values lie above {0:.2f}\".format(report_df[\"Family\"].dropna().quantile(0.3)))","959f7936":"print(country_report[\"Freedom\"].sort_values(ascending=False))","4644a8fc":"print(country_report[\"Trust  Government Corruption \"].sort_values(ascending=False))","edfc96f7":"print(\"The correlation between Freedom and Trust in governmemt is {0:.2f}, which is kind of low.\".format(country_report[\"Freedom\"].corr(country_report[\"Trust  Government Corruption \"], method=\"spearman\")))\nprint(\"Let's try to capture this visually\")","1b20a680":"sns.set_style(\"white\")\nplt.figure(figsize=(12,10))\nplt.title(\"Trust in government vs Freedom\")\nsns.scatterplot(x = country_report[\"Freedom\"], y = country_report[\"Trust  Government Corruption \"], hue = country_report[\"Region\"]);","1b86a4b1":"print(\"The average contibution of 'Trust in government' in happiness score is {0:.2f}\".format(country_report[\"Trust  Government Corruption \"].mean()))","9f037bd2":"av = country_report[\"Trust  Government Corruption \"].mean()\nprint(\"These are the top 15 countries with above average trust in government \")\ndisplay(country_report[country_report[\"Trust  Government Corruption \"] > av][[\"Happiness Rank\", \"Happiness Score\", \"Trust  Government Corruption \", \"Freedom\" ]].sort_values(by = \"Trust  Government Corruption \",ascending=False).head(15))","b840d1f5":"country_report[[\"Region\", \"Generosity\", \"Happiness Score\"]].sort_values(by=\"Generosity\", ascending=False).head(20)","a3203c3b":"gen = country_report[[\"Region\", \"Generosity\", \"Happiness Score\"]].sort_values(by=\"Generosity\", ascending=False).head(20)\ngen_reg = gen.groupby(\"Region\").count()\ndisplay(gen_reg)","4bdb48ba":"happy_gen, n_happy_gen = top_check(country_report,\"Generosity\",20)\nprint(\"These countries make it to the top of both lists\")\ndisplay(happy_gen)\nprint(\"These, however, don't make it to the top of the hapiness list\")\ndisplay(n_happy_gen)","71ca8f6a":"print(happy_gen.groupby(\"Region\").count())\nprint(n_happy_gen.groupby(\"Region\").count())","b1c1f368":"sns.set_style(\"white\")\nplt.figure(figsize=(10,8))\nplt.xticks(fontsize=12)\nplt.yticks(fontsize=12)\nplt.title(\"Best fit line to represent relationship between generosity and happiness score\")\nsns.regplot(x = happy_gen[\"Happiness Score\"], y = happy_gen[\"Generosity\"]);\n\n","2ebcda62":"nordic = [\"Denmark\", \"Finland\", \"Iceland\",\"Norway\",\"Sweden\"]\ncountry_report[country_report.index.isin(nordic)][['Population density (per km2, 2017)',\n'Sex ratio (m per 100 f, 2017)',\n'GDP: Gross domestic product (million current US$)',\n'Unemployment (% of labour force)',\n'Fertility rate, total (live births per woman)',\n'Infant mortality rate (per 1000 live births',\n'Health: Total expenditure (% of GDP)',\n'Labour force participation (male %)', 'Life Expectancy (female %)']]","180b4d66":"comapre = {\"Region\": []}\ncols = report_df.columns\ncols = cols.drop(\"Country\")\nfor i in cols:\n    comapre[i] = []\ncomapre[\"Region\"].append(\"World(including India)\")\nfor i in cols:\n    comapre[i].append(report_df[i].mean())\ncomapre[\"Region\"].append(\"World(exclduing India)\")\nrep_wo_india = report_df[report_df[\"Country\"] != \"India\"]\nfor i in cols:\n    comapre[i].append(rep_wo_india[i].mean())\ncomapre[\"Region\"].append(\"India\")\nind = report_df[report_df[\"Country\"] == \"India\"]\nfor i in cols:\n    comapre[i].append(float(ind[i]))\ncompare_df = pd.DataFrame(comapre)\ncompare_df.drop([\"Happiness Rank\", \"Whisker high\", \"Whisker low\", \"Dystopia Residual\"], axis=1, inplace=True)\ndisplay(compare_df)","a26dcf4a":"#New dataframe structure for the bar graph\ncompare_df = pd.melt(frame = compare_df, id_vars= \"Region\", var_name=\"Metrics\", value_name=\"Values\")\n\n# Visualisation\nsns.set_style(\"white\")\nplt.figure(figsize=(12,10))\nplt.title(\"India with respect to the World\", fontsize=15)\nplt.xticks(fontsize= 14,rotation=90)\nsns.barplot(x= compare_df[\"Metrics\"] , y= compare_df[\"Values\"], hue = compare_df[\"Region\"]);","fc6826bf":"ind_vals = list(report_df.loc[121])\n# Deleting the first 5 columns\ndel ind_vals[0:5]\n# Deleting the last column \nind_vals.pop()\n\n# Creating labels to better understand the chart\nlabels = list(report_df.columns)\ndel labels[0:5]\nlabels.pop()\nexplode = (0.1, 0.1, 0.1, 0.1,0.1,0.1)\n\nplt.figure(figsize=(8,6))\nplt.title(\"Contributing Factors to India's happiness\", fontsize=15)\nplt.pie(x= ind_vals, labels=labels, explode=explode, autopct='%1.0f%%');","6df912f6":"report_final = report_df.drop([\"Happiness Rank\",\"Whisker high\",\"Whisker low\"], axis = 1)\nreport_final.index = report_final.Country\nsns.set_style(\"white\")\nreport_final.plot(kind = \"barh\", stacked=True, figsize=(12, 45))\nplt.legend(title='Merics', bbox_to_anchor=(1.0, 1), loc='upper left')\nplt.show()","41e72a9c":"### 2. Country Variables","1e626d2c":"Finally, we'll try to summarize the contribution of each factor into each of the 155 countries' hapiness using a stacked graph.","d8cc32a4":"India ranks pretty low on the happiness report (121). To understand how we're performing with respect to the rest of the world , we need to create a new dataframe where we'll store the data about India and the rest of the world's average.","f80c1b38":"First, we'll draw a correlation matrix to get an idea about the relationship between the various metrics in the happiness report.","8909a372":"We probably can work with a broader idea of the regions. Therefore, lets clump them up into their respective continents","5eae37b8":"This dataset is very comprehensive, with a total of 50 metrics. We will be working only a handful of them, and it's best if we remove the others. So let's select the ones we need","7430a1a5":"It might be a good idea to look at the entire DataFrame once, just to get an idea about all the types of values present ","d56e64cd":"## Chapter 3: Exploratory Data Analysis","5c86a570":"We have 2 datasets. The first one is the World Happiness Report. The second one is a dataset containing various metrics like the GDP of a country, sex ratio, etc. I hope to describe some of the contributors of happiness with these metrics.","8d3ac7a5":"* The count of each column is same. i.e. 155. That's the number of countries from which data was collected.\n* On an average, *FAMILY (SOCIAL SUPPORT)* seems to contribute the most to happiness, followed closely by GDP per capita","a0a6b9a2":"These are the stats of the top 10 happiest countries in the world. Let's see if the top 10 countries with the highest GDP per capita make it to the happiest countries of the world, since that's what has the most weightage aparently.\n\nFor that, we'll create a function and it can be used in other sections as well.","6838dce2":"These are really great stats. Earlier we saw that the African countries weren't doing so great in this matter. Let's look at those values and try to understand the difference","9a8bed88":"Every country on this list has a very low expenditure on healthcare, with the exceptions of Sierra Leone. Mozambique,  Mali and Burundi have standard percentages dedicated to healhcare, however, looking at their records, it should be more.\n\nSierra Leone is the African country with the highest infant mortality rate, presumably amongst the lowest 5 in the world. From their high expenditure on healthcare, it is evident that thy're trying to battle the infant mortality and maternal mortality rates, as well as their very low life expectancies. in 2010, the Government of Sierra Leone introduced the Free Healthcare Initiative (FHCI), making a package of basic healthcare services available for free to pregnant and lactating mothers and children under five","b228a261":"Most of the countries that are the happiest to donate are from Asia. I'm wondering if the happiest countries in the world derive a major part of their happiness from generosity. \nTo check that, we need to check if the countries on top of the generosity list also top in the overall hapiness list. We're gonna reuse the function that we created earlier to do that","be30c1e6":"## Specific Cases","9d7db561":"#### Happiness Score and Life Expectancy","931874ad":"We'll be merging the DataFrames on the *Country* column, so their cases shoud be same.","1bf5a591":"The ` ~~ ` and `...` have been converted to `NaNs`, but the `-99s` are also bad values, and we need to take care of them","244f4aaa":"Many of the Nordic countries are up there on the list along with some of the countries with the highest GDP per capita. These countries don't have very strignent intervention from their respective governments and enjoy a fair deal of freedom in making choices. So they're not surprising. \n\nHowever, the appearence of Rwanda (the 5th saddest country), and Hong Kong (A special administrative city of China), is surprising.\n* Hong Kong enjoys a great deal of autonomy with it's own judiciary and executive. Although an administrative part of China, they are not subjected to the same kind of \n* I cannot answer why Freedom and trust in Government contribute so highly in Rwanda's happiness. This country regularly ranks low in all metrics like freedom of expression, government suppression of political dissent, etc.","1646b494":"### Handling missing values\n\nOn this dataset, missing values can't really be handled. Because for each country, each metric is different. It can even differ from the neighbouring countries in the same region. If this was a time-series data, then predictions could've been made from the recent trends.\n\nTherefore, our cleaning and preparation is done. ","eba0b28e":"Most of the column names are self explanatory.\nLet's explain the ones that aren't\n* Whisker high and Whisker low - Boxplots are used to visualise data along with the extent of outliers present. The upper whisker of the box plot is the largest dataset number smaller than 1.5IQR above the third quartile and the lower whisker of the box plot is the smallest dataset number larger than 1.5IQR below the first quartile\n* Family (Social support) - is the national average of the binary responses (either 0 or 1) to the GWP question \u201cIf you were in trouble, do you have relatives or friends you can count on to help you whenever you need them, or not?\u201d\n* Freedom - Freedom to make choices\n* Generosity - Respondents were asked if they've donated to a charity in the past month. Generosity is the residual of regressing national average of response to this question.\n* Trust Government corruption - The measure is the national average of the survey responses to two questions in the GWP: \u201cIs corruption widespread throughout the government. The overall perception is just the average of the two 0-or-1 responses.\n* Dystopia Residual - The score of a hypothetical country that has a lower rank than the lowest ranking country on the report, plus the residual value of each country (a number that is left over from the normalization of the variables which cannot be explained).","f9297ff9":"#### GDP per capita and Happiness Score","5aae4d3b":"From a first glance, we see that many numeric values are written as ..., -99, etc. These are bad values and we need to handle them.\n\nNote : The word *Family* is used here instead of the *social suport* metric. For the sake of convinence, we're gonna let ot stay that way","8b5e8442":"#### Happiness and Generosity\nAt the beginning of this project, we saw that generosity had a very low correlation with all the other metrics, even happiness scores. It's time we try to figure out the reason behinf that. Let's begin by looking at some countries where donating makes people happy.","4870fe2a":"#### Happiness Score and Social Support\n\nWe saw earlier that family (Social Support) also had a strong correlation to happiness score. Thats the beauty of statistics. Something as abstract as feelings and emotions can be quantified into numbers to make sense. Social support having the strongest correlation with happiness is beautiful, because if not social animals, then what even are we? \nWhatever weightage any other metric might have, at the end of the day, humans want to share their happiness and sorrows alike, with the poeple they love. ","8ed5160a":"Earlier, we discovered that the countries whose main ontributor to happiness was GDP per capita, their overall ranks were not so great. Now it's time we dig a little deeper into that","4be142ed":"*Parameter Rank refers to the ranks of the country when they're ranked based on the particular parameter, and not their overall happiness*\n\nAs we can see, 12 out of the 20 countries are at the top. Their happiness rank and their paramater rank are both high.\nHowever, the countries that don't make it are the ones that have a high parameter rank. Surprisingly though, their happiness ranks are low. This might indicate that whatever happiness they have, is due to the their high GDP per capita. The other metrics don't contribute much to their happiness.\n\nHowever, with an increasing GDP per capita, one might expect other features, like freedom to make choices and generosity to go up too. \nTo inspect this abnormal behvaiour, we must investigate the other factors in the dataset.","afc61f9e":"India seems to be performing below average in the happiness metrics, except for *Freedom to make choices*. Thats great, considering the fact that we're a democracy and our freedom fighters wanted us to have the freedom to make our own choices.\n\nNobel Laureate Rabindranath Tagore , who composed our National Anthem, in poem *Where the mind is without fear* said that\n\n**<center>Where the mind is led forward by thee**\n\n**<center>Into ever-widening thought and action**\n\n**<center>Into that heaven of freedom, my Father, let my country awake.**","1e16c4ad":"So now we have an idea about the correlation between each metric. Some observations from this heatmap, that I'm gonna explore further are :\n* GDP per capita has the highest correlation with Happiness score and all the other metrics, except generosity\n* Family(Social Support) also plays a vital role in the happiness score\n* Generosity doesn't seem to be strongly correlated to any of the factors\n* Freedom is more strongly correlated to social support and trust in government, than any other factors\n","5bbb4ebc":"We can clearly see the clusters that've formed. The African cluster shows that life expectancy contributes very little to their happiness. Not only that, their overall happiness ranks are low too. European countries, on the other hand, have a very high correlation between the 2 factors. ","5103bfa1":"### Nordic countries\nIn an earlier section, we observed that some countries were common in every list that we formed. They were at the top of every metric of happiness. And these countries were from Europe. These are the Nordic countries and the reason behind their happiness is their ability to provide for their citizens, and by solving their problems. Lets look into some of them to better understand this","121c4f84":"Earlier, we noticed the different datatypes in the dataset, and many of the numerical ones were set to `object` datatype. That might cause problems at the time of performing numerical operations, and so it's best to convert them to `float`","f964dda7":"### 1. Happiness Report","f85df84d":"We could drop the rows with `null` region, but there are some pretty important ones. So, We'll manually assign them their correct values, and drop the rest.","d06a7ee5":"This visualisations enough to give us a clear idea of how terrifyingly huge the gap is between the healthcare systems","3934508c":"#  <center>Analysis of World Happiness Report 2017<\/center>\n# <center>Factors That Keep Citizens Happy<\/center>\n\nThe World Happiness Report is an annual publication from United Nations Sustainable Developemnt Netwirk Solutions. As the title suggests, it ranks the countries of the world in the basis of their happiness. Respondents are asked to rate their own lives on a scaale of 0 to 10, 0 being the lowest and 10 being the highest. There are 6 metrics to capture their happiness, namely\n* GDP per capita\n* Social support\n* Life expectancy\n* Freedom\n* Generosity\n* Trust in Government\nThese metrics are used to estimate how much each of them contribute to the overall happiness in each country.\n\nLet's get to the dataset now.","8342491d":"Each and every value in this dataset is much better than their averages. One metric is correlated to another. For example, with lower uneployment rates, a person has more disposable income. They are able to afford a very healthy lifestyle for themselves and their children. Due to their low fertility and infant mortality rates, both the mother and child are healthy, which leads to higher life expectancies. All of this is done along with administrative policies that are highly beneficial for the citizens. Free healthcare, free education, proper prison laws and all the other policies ensure that crime rates are low and the overall quality of life is very high.","e30f92b0":"As we can see, there's a very little difference between the 2 coefficients. So it's confirmed that there is more or less a linear relationship between the metrics.","09de89cc":"The GDP of this country is very low. On top of that, only 22%  of their population is using improved sanitation facilities. This will inevitably give rise to many more problems. We see that on an average, a woman gives birth to 4.8 babies, which means that hardly all of them will get proper nutrition and healthcare facilities. This is a vicious cycle - parents opting to produce more children so that atleast a few of them can survive, which leads to neither of them getting proper nutrition, which leads to higher infant and maternal mortality rates, all of which comes back to parents placing a safe bet in producing more children","adbedfee":"As we can see, there are lot of columns have too may bad values. Bad values mean those like -99, ... , ~ and null. So first, we'll convert all of them to null, check which columns have more than 20% null values, and then we'll frop those. We'll also be removing the rows with bad values.\nAnother interesting observation was that many of the metrics (like labour force participation for males and females) were put into the same coloumn, despote them being 2 seperate values and not their average. Very often, one of those values was a bad value too. So we need to fix that, by seperating the metric values that have been grouped like that.","987d8808":"## Preparation","19b6dc85":"#### Freedom, Happiness and Trust in government","56c203da":"## Cleaning","0205bd8d":"Now lets understand all the factors that contribute to India's happiness","5164ac45":"This is quite a surprisng revelation. There isn't a very strong correlation even in the only countires that are simultaneously both amongst the happiest countries in the world and the ones that derive pleasure from giving.\n\nWith that, we come to the end of the EDA section.","5dd947f5":"There are no null values in any of the columns. Good dataset (pats on the back)\n\nNow lets try to get a summary of the data","aae01b45":"## Chapter 1: Reading the Dataset","c0bac4c6":"As expected, life expectancy is a big contributor to a country's happiness. As social animals, our loved ones are very important to us and no amount of money or freedom can replace that. Maybe that's the reason even social support is so strongly correlated to happiness.\n\nLife expectancy itslef is tied up to many other factors, like how much of their of their GDP does a country allocate to health, how much of that expenditure is actually useful in curbing infant mortality rate, etc. Our hypothesis is this : *With an increasingg health expenditure, life expectancy increases, and infant mortality rate decreases. All of this contributes to a higher happiness score*. First we'll do a broader, region wise overview and then dive into the specifics","fd1273af":"It's evident that the the European countries alloctate a good part of their budget on healthcare, and that's the reason for their low infant mortality rates and high life expectanicies.","abc12ed4":"There are no visible clusters in this scatterplot. \nHowever, no matter how much freedom you enjoy, trust in government always seems to be on the lower side. Thats undertstandable, because when we elect someone to lead our country, we do it because they're fit to lead us, not because they make us happy. Secondly, government is a body that often operates in secrecy. All this, coupled with corruption, results in a low contibution in happiness score.\n\nHowever, on the top right we can see some exceptional countries. Take note that freedom's contribution in these countries' happiness is very high","8a151744":"# Chapter 2: Data Cleaning and Preparation","e9dd03e6":"Every column must have some `NaN` values. If the percentage is too high though, we need to discard them. More than 15% seems to be reasonable limit for that","352026fd":"Any metric in our dataset won't be able to properly justify these numbers. So we'll leave it here. But one thing is clear, that social support is a strong contributor to happiness, no matter how high or low the country ranks overall.","89b5dd25":"### Comaparison of India VS The World","606bd663":"We can see that the Asian countries, that were amongst the happiest to donate, do not make it to the list of the happiest countries overall. \nThis tells us that these people might not be the happiest or the richest, but they don't shy away from my helping other people. And this is a wonderful quality to have. I don't have anything against the other continents, but being able to hapily put others before yourself is a noble act and that needs to be acknowledged.","b17ff502":"We can see that in those countries, even with a higher unemployement rate, happiness score is on the higher side(on an average).\nHowever, all the 6 Asian countries have lower happiness scores, no matter what their unemployement rate is. Their unemployement rate is lower as compared to the other continents in the top ranks as well. From that, we can conclude that even in the top Asian countries were GDP is a major part of happiness, people are not satisfied with their employment. That might indicate a poor work life.\n\nIn the European countries on the other hand, people are on the happier side even with higher rates of unemployemnt (compared to their Asian counterparts). This indicates that their overall quality of life is better. The bubble sizes show that they rank higher in the overall happiness scale too. These are the **Nordic countires**. We'll revisit them and try to figure out the reason behinf their happiness at the end."}}