{"cell_type":{"6a47e647":"code","8a08a026":"code","7da7daf5":"code","c87084db":"code","56690d61":"code","0a057408":"code","cd18ce69":"code","bc353c3c":"code","3f9a94b6":"code","cb95a784":"code","ff7d2cbf":"code","a872e058":"code","3ffa49da":"code","2d831101":"code","3a645194":"code","41e38efb":"code","a025ccf1":"code","b85c4c7f":"code","da23c71f":"code","bb056eb3":"code","57699daf":"code","b5308a38":"code","6289d4af":"code","f9818ea1":"code","323557f2":"code","9ae4adff":"code","5d59a145":"code","f7ab3320":"code","ecaa5940":"code","800ee8b6":"code","f423ac94":"code","02ef4638":"code","9f4d8cec":"code","35d40f44":"code","3069def4":"code","bdf2d49f":"code","9e2bc6d4":"code","adfd708e":"code","f6878ee5":"code","394fb6ee":"code","75370697":"code","4b9b9b56":"code","5b52cd6c":"markdown"},"source":{"6a47e647":"import numpy as np \nimport pandas as pd \nimport missingno as msno\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline","8a08a026":"rawdata = '\/kaggle\/input\/pesquisa-data-hackers-2019\/datahackers-survey-2019-anonymous-responses.csv'\npd.options.display.float_format = '{:.2f}'.format\nsns.set(style='whitegrid')","7da7daf5":"df = pd.read_csv(rawdata)","c87084db":"df.columns = [cols.replace(\"(\",\"\").replace(\")\",\"\").replace(\",\",\"\").replace(\"'\",\"\").replace(\" \",\"_\") for cols in df.columns]","56690d61":"df.head()","0a057408":"#seta novo index\ndf.set_index('P0_id', inplace=True)","cd18ce69":"#arrumar nome de coluna com erros de ortografia\ncols = df.columns.tolist()\ncols[47] = 'P22_most_used_programming_languages'\ncols[160] = 'P35_data_science_platforms_preference'\ndf.columns = cols","bc353c3c":"#seleciona colunas que possuem valores null\nnull_cols = df.columns[df.isnull().any()].tolist()\ndf_null = df[null_cols]","3f9a94b6":"#valores absolutos e percentuais de valores nulos por coluna\nmsno.bar(df_null,figsize=(20,8), color='darkturquoise',fontsize=14, labels=True);","cb95a784":"#substituir os valores nulos por -1\ndf.loc[df['P1_age'].isnull(), 'P1_age'] = -1\n#altera o datatype\ndf['P1_age'] = df['P1_age'].astype('int8')","ff7d2cbf":"df.loc[df['P2_gender'].isnull(), 'P2_gender'] = 'ausente\/exclu\u00eddo'\ndf['P2_gender'] = df['P2_gender'].astype('category')","a872e058":"df.loc[df['P5_living_state'].isnull(), 'P5_living_state'] = 'ausente\/exclu\u00eddo'\ndf['P5_living_state'] = df['P5_living_state'].astype('category')","3ffa49da":"df.loc[df['P6_born_or_graduated'].isnull(), 'P6_born_or_graduated'] = -1\ndf['P6_born_or_graduated'] = df['P6_born_or_graduated'].astype('int8')","2d831101":"df.loc[df['P12_workers_number'].isnull(), 'P12_workers_number'] = 'ausente\/exclu\u00eddo'\ndf['P12_workers_number'] = df['P12_workers_number'].astype('category')","3a645194":"df.loc[df['P13_manager'].isnull(), 'P13_manager'] = -1\ndf['P13_manager'] = df['P13_manager'].astype('int8')","41e38efb":"df.loc[df['P16_salary_range'].isnull(), 'P16_salary_range'] = 'ausente\/exclu\u00eddo'\ndf['P16_salary_range'] = df['P16_salary_range'].astype('category')","a025ccf1":"df.loc[df['P22_most_used_programming_languages'].isnull(), 'P22_most_used_programming_languages'] = 'ausente\/exclu\u00eddo'\ndf['P22_most_used_programming_languages'] = df['P22_most_used_programming_languages'].astype('category')","b85c4c7f":"df.loc[df['P29_have_data_warehouse'].isnull(), 'P29_have_data_warehouse'] = -1\ndf['P29_have_data_warehouse'] = df['P29_have_data_warehouse'].astype('int8')","da23c71f":"df.loc[df['P35_data_science_platforms_preference'].isnull(), 'P35_data_science_platforms_preference'] = 'ausente\/exclu\u00eddo'\ndf['P35_data_science_platforms_preference'] = df['P35_data_science_platforms_preference'].astype('category')","bb056eb3":"df['P35_other'] = df['P35_other'].str.lower()\ndf['P35_other'] = df['P35_other'].apply(lambda x : x.strip() if type(x) == str else x)","57699daf":"mapping_others = {\n    'data science academy' : 'Data Science Academy',\n    'dsa' : 'Data Science Academy',\n    'datascienceacademy' : 'Data Science Academy',\n    'minerando dados' : 'Minerando Dados',\n    'youtube' : 'YouTube',\n    'linkedin learning' : 'LinkedIn Learning',\n    'pluralsight' : 'Pluralsight',\n    'data science academy' : 'Data Science Academy',\n    'data sciences academy' : 'Data Science Academy', \n    'data science academy' : 'Data Science Academy',\n    'datascience academy' : 'Data Science Academy',\n    'cognitive class.ai' : 'cognitiveclass.ai',\n    'cognitive ai' : 'cognitiveclass.ai',\n    'sigmoidal' : 'sigmoidal.ai',\n    'pluralsights' : 'Pluralsight',\n    'blog minerando dados' : 'Minerando Dados',\n    'dsa academy' : 'Data Science Academy',\n    'data scienceacademy' : 'Data Science Academy',\n    'data academy' : 'Data Science Academy',\n}","b5308a38":"df['P35_other'] = df['P35_other'].map(mapping_others).fillna(df['P35_other'])","6289d4af":"#mantem apenas os top registros, essa coluna possui uma cauda longa. Portanto, faz sentido agrupar os registros com poucas observa\u00e7\u00f5es como \"outros\"\nfor col in df.groupby('P35_other')['P1_age'].count().sort_values(ascending=False)[4:].index.tolist():\n    mapping_others[col] = 'Outros'\nmapping_others['Data Science Academy'] = 'Data Science Academy'\nmapping_others['cognitiveclass.ai'] = 'cognitiveclass.ai'\nmapping_others['Minerando Dados'] = 'Minerando Dados'","f9818ea1":"df['P35_other'] = df['P35_other'].map(mapping_others).fillna('N\u00e3o Preenchido')\ndf['P35_other'] = df['P35_other'].astype('category')","323557f2":"df.loc[df['P36_draw_participation'].isnull(), 'P36_draw_participation'] = -1\ndf['P36_draw_participation'] = df['P36_draw_participation'].astype('int8')","9ae4adff":"df.loc[df['D1_living_macroregion'].isnull(), 'D1_living_macroregion'] = 'ausente\/exclu\u00eddo'\ndf['D1_living_macroregion'] = df['D1_living_macroregion'].astype('category')","5d59a145":"df.loc[df['D2_origin_macroregion'].isnull(), 'D2_origin_macroregion'] = 'ausente\/exclu\u00eddo'\ndf['D2_origin_macroregion'] = df['D2_origin_macroregion'].astype('category')","f7ab3320":"df.loc[df['D3_anonymized_degree_area'].isnull(), 'D3_anonymized_degree_area'] = 'ausente\/exclu\u00eddo'\ndf['D3_anonymized_degree_area'] = df['D3_anonymized_degree_area'].astype('category')","ecaa5940":"df.loc[df['D4_anonymized_market_sector'].isnull(), 'D4_anonymized_market_sector'] = 'ausente\/exclu\u00eddo'\ndf['D4_anonymized_market_sector'] = df['D4_anonymized_market_sector'].astype('category')","800ee8b6":"df.loc[df['D5_anonymized_manager_level'].isnull(), 'D5_anonymized_manager_level'] = 'ausente\/exclu\u00eddo'\ndf['D5_anonymized_manager_level'] = df['D5_anonymized_manager_level'].astype('category')","f423ac94":"df.loc[df['D6_anonymized_role'].isnull(), 'D6_anonymized_role'] = 'ausente\/exclu\u00eddo'\ndf['D6_anonymized_role'] = df['D6_anonymized_role'].astype('category')","02ef4638":"#mapear o data type das colunas\ncontainer_for_types = {}\nfor colname, coltype in zip(df.dtypes.index, df.dtypes.values):\n    col_datatype = coltype.type.__name__\n    if col_datatype not in container_for_types:\n        container_for_types[col_datatype] = []\n    container_for_types[col_datatype].append(colname)","9f4d8cec":"for col in container_for_types['object_']:\n    df[col] = df[col].astype('category')","35d40f44":"for col in container_for_types['int64']:\n    df[col] = df[col].astype('int8')","3069def4":"#mapear o data type das colunas\ncontainer_for_types = {}\nfor colname, coltype in zip(df.dtypes.index, df.dtypes.values):\n    col_datatype = coltype.type.__name__\n    if col_datatype not in container_for_types:\n        container_for_types[col_datatype] = []\n    container_for_types[col_datatype].append(colname)","bdf2d49f":"#salva um csv com os tipos das colunas do dataset\nwith open(\"DH_survey_dtypes.csv\", \"w\") as file_:\n    file_.write(\"col_name,col_dtype\\n\")\n    for dtype, colname in container_for_types.items():\n        if dtype == 'CategoricalDtypeType':\n            dtype = 'category'\n        for col in colname:\n            file_.write(f\"{col},{dtype}\\n\")","9e2bc6d4":"#salva arquivo com dados tratados\ndf.to_csv(\"pesquisa-data-hackers-2019-cleaned.csv\")","adfd708e":"df_dtypes = pd.read_csv(\"DH_survey_dtypes.csv\").set_index('col_name')","f6878ee5":"dtypes_dict = df_dtypes.col_dtype.to_dict()","394fb6ee":"#load a cleaned dataset with correct dtypes\ndf_cleaned = pd.read_csv('pesquisa-data-hackers-2019-cleaned.csv', index_col='P0_id', dtype=dtypes_dict)","75370697":"df_cleaned.dtypes[:15]","4b9b9b56":"df_cleaned.head()","5b52cd6c":"### O dataset foi anonimizado ao remover alguns outliers que poderiam identificar o entrevistado e, portanto, nem todos os dados coletados na pesquisa estar\u00e3o dispon\u00edveis aqui. `Estados com menor incid\u00eancia de resposta`, como aqueles das regi\u00f5es Norte, Nordeste e Centro-Oeste `ter\u00e3o apenas sua regi\u00e3o indicada no dataset`, tamb\u00e9m como consequ\u00eancia do processo de anonimiza\u00e7\u00e3o."}}