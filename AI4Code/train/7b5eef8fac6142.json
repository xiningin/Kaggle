{"cell_type":{"3fbf0cf6":"code","4895d31a":"code","3198fda1":"code","46b95a0b":"code","ed27ef0c":"code","5fd5e738":"code","54307064":"code","45df2d2b":"code","6bfdd756":"code","a9d01950":"code","cf897115":"code","24cfdf20":"code","72219651":"code","7893ab32":"code","4e096102":"code","b9404777":"code","9444b8ea":"code","5b5a516d":"code","88ea7d30":"code","261bdf62":"code","da7a2d8a":"code","52ef04df":"code","beee815a":"code","847c28ef":"code","8b95cd55":"code","5ec478f0":"code","7cf5aefe":"code","147d0162":"code","a29b5275":"code","896e7c81":"code","3b16a1b6":"code","86036df4":"code","65379dc0":"code","a46554ff":"code","31b9b77a":"markdown","9c23aa20":"markdown","49dce58f":"markdown","f5996bf4":"markdown","b0440bac":"markdown","66761eb7":"markdown","8d765a9c":"markdown","40d337f6":"markdown","88ddbc7a":"markdown","15f870be":"markdown","e532818f":"markdown","d6b90b00":"markdown","8c30832f":"markdown","62701af0":"markdown","21946533":"markdown","0b7849ff":"markdown","569a93f9":"markdown","b67f9230":"markdown","3164a9ea":"markdown","e6a4c038":"markdown","06bd9f75":"markdown","63c5ca83":"markdown","b8dc2296":"markdown","fd2afc36":"markdown","90b6f6b4":"markdown","e7a308a9":"markdown","35063d79":"markdown","b0f5cede":"markdown","a507249e":"markdown","027fcc83":"markdown","0b4f9d68":"markdown","1d5fbc70":"markdown","a01770df":"markdown","f1e8d59f":"markdown","22b98123":"markdown","2a9bec25":"markdown","1f26341d":"markdown","a257cd25":"markdown","d2d32abb":"markdown","376cc443":"markdown","e628ff29":"markdown","f331c2f7":"markdown","13646be9":"markdown","89fffcea":"markdown","45777f14":"markdown","882da953":"markdown","20a0db5c":"markdown","f7a37e5d":"markdown"},"source":{"3fbf0cf6":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\nimport seaborn as sns # visualization\nimport matplotlib.pyplot as plt # visualization\nimport missingno as msno # visualizatin for missing values\n\nimport warnings\nwarnings.filterwarnings(\"ignore\") # ignore warnings","4895d31a":"wine = pd.read_csv(\"..\/input\/wine-reviews\/winemag-data_first150k.csv\")\ndf = wine.copy()","3198fda1":"df.head()","46b95a0b":"df.info()","ed27ef0c":"df.columns","5fd5e738":"df.drop(\"Unnamed: 0\", axis = 1, inplace = True)","54307064":"df.columns","45df2d2b":"round(df.describe(),3) ","6bfdd756":"plt.figure(figsize=(12,5))\nsns.heatmap(df.corr(),annot=True,linewidth=2.5,fmt='.3F',linecolor='black');","a9d01950":"sns.pairplot(df);","cf897115":"df.isnull().values.any()","24cfdf20":"df.isnull().sum()","72219651":"msno.bar(df,color = sns.color_palette('viridis'));","7893ab32":"msno.matrix(df, color = (0.2, 0.4, 0.4));","4e096102":"msno.heatmap(df);","b9404777":"# Missing Value Table\ndef missing_value_table(df):\n    missing_value = df.isna().sum().sort_values(ascending=False)\n    missing_value_percent = 100 * df.isna().sum()\/\/len(df)\n    missing_value_table = pd.concat([missing_value, missing_value_percent], axis=1)\n    missing_value_table_return = missing_value_table.rename(columns = {0 : 'Missing Values', 1 : '% Value'})\n    cm = sns.light_palette(\"red\", as_cmap=True)\n    missing_value_table_return = missing_value_table_return.style.background_gradient(cmap=cm)\n    return missing_value_table_return\n  \nmissing_value_table(df)","9444b8ea":"df.drop(\"region_2\", axis = 1, inplace = True)","5b5a516d":"df['price'] = df['price'].fillna(df.groupby(['country','province'])['price'].transform('mean'))","88ea7d30":"df.isnull().sum()","261bdf62":"df = df[~(df.price.isnull())]","da7a2d8a":"df=df.sort_values(by=[\"country\",\"province\",\"region_1\"],ascending=True)\ndf.head()","52ef04df":"df=df.fillna(method=\"ffill\")","beee815a":"plt.subplot(2,1,1)\ndf.points.plot(kind='hist',color='pink',bins=50,figsize=(10,10))\nplt.title(\"Points Variable Histogram Chart\");\n\n\nplt.subplot(2,1,2)\ndf.price.plot(kind='hist',color='pink',bins=50,figsize=(10,10))\nplt.title(\"Price Variable Histogram Chart\");","847c28ef":"sns.boxplot(df.points);","8b95cd55":"sns.boxplot(df.price);","5ec478f0":"Q1 = df.price.quantile(0.25)\nQ3 = df.price.quantile(0.75)\nIQR = Q3 - Q1","7cf5aefe":"print(\"Q1:\",Q1)\nprint(\"Q3:\",Q3)\nprint(\"IQR:\",IQR)","147d0162":"upper_value = Q3 + 1.5*IQR\nlower_value = Q1 - 1.5*IQR","a29b5275":"print(\"upper_value:\",upper_value)\nprint(\"lower_value:\",lower_value)","896e7c81":"outlier_values = (df.price < lower_value) | (df.price > upper_value)","3b16a1b6":"df.price[outlier_values].value_counts().sum() ","86036df4":"upper_outlier = df.price> upper_value\nupper_outlier.sum()","65379dc0":"df.price[upper_outlier] = upper_value","a46554ff":"sns.boxplot(df.price);","31b9b77a":"### Variable Description","9c23aa20":"**Outliers Value Correction**","49dce58f":"<a id=\"5\"><\/a>\n## Operations on Missing Values","f5996bf4":"<a id=\"1\"><\/a>\n# Dataset Description","b0440bac":"* When filling other variables, it will be filled according to the previous value. The data set for this operation is sorted by country, province and region 1 variable.","66761eb7":"* First 5 records in the Dataset","8d765a9c":"* After Correction","40d337f6":"* Looking at the graph, the data at the top shows the missing data in the variables. On the left, it shows the percentages in the dataset. On the right, it shows the number of observations in the dataset. At the bottom of the graph, there are variable names.","88ddbc7a":"* 28 price values that could not be filled with the average were deleted from the dataset.","15f870be":"### Deleting Missing Values","e532818f":"* All outliers are upper outliers.","d6b90b00":"* For Points:\n    The minimum value is 80, the maximum value is 100. This is actually a variable that is between certain values, so it would be unreasonable to study outliers.","8c30832f":"* When the graphic is examined, there are observation information in the data set on the left part, variable names in the upper part and missing observations on the right part.","62701af0":"* With the info() function, we can see the total number of variables in the data set, the types of these variables and the number of observations in the variables.\n* Our Dataset consists of 150930 rows and 11 columns.\n* The most missing value is seen in the region_2 column.\n* Variables and types:\n    - float64(1):price\n    - int64(2):Unnamed: 0, points\n    - object(8):country, description, designation, province, region_1, region_2, variety, winery","21946533":"IQR is the distance between the first quarter Q1 and the third quarter Q3. Using IQR, upper and lower limit values are calculated as follows.","0b7849ff":"### Filling in the Missing Values","569a93f9":"*Used when the values in the dataset are missing.\nMissing values are generally NA.*","b67f9230":"* Although we filled the price variable, the reason for showing 28 missing values \u200b\u200bis that there is no price for the wine in that country and the city.","3164a9ea":"<a id=\"3\"><\/a>\n## Defining and Visualizing Missing Values","e6a4c038":"* Statistical information about the dataset.\n    * You can access information such as means, medians, standard deviations, minimum and maximum values of numerical variables with the describe() function.","06bd9f75":"# Introduction\n\n![](https:\/\/4.bp.blogspot.com\/--VcYZ84eGSM\/UWqKVLEU0SI\/AAAAAAAADNM\/2m6wjEzpjOA\/s1600\/%C5%9EARAP.jpg)\n\n## Context\n\nThis is a wine review data set.\n\nIn this data set, there are information such as country, city, region where the wines are produced, as well as information such as prices and scores of wines.\n\n## Content\n1. [Load and Check Data](#0)\n1. [Dataset Description](#1)\n1. [Missing Value Analysis](#2)\n    * [Defining and Visualizing Missing Values](#3)\n    * [Testing the Randomness of Missing Values](#4)\n    * [Operations on Missing Values](#5)\n1. [Outlier Value Analysis](#6)\n    * [Outlier Value Detection Using Boxplot and Histogram](#7)\n    * [Outlier Value Analysis With IQR](#8) ","63c5ca83":"* Filling with the previous value.","b8dc2296":"* Load file\n","fd2afc36":"* In order to fill the missing values in the price variable, the average of the price variable is calculated according to the country and province variables.","90b6f6b4":"* Total outliers.","e7a308a9":"<a id=\"8\"><\/a>\n## Outlier Value Analysis With IQR","35063d79":"* Check, delete successful. Our new number of variables is 10.","b0f5cede":"* Unnecessary variable deletion.","a507249e":"* Since there is 59% missing value in region_2 variable, it is decided to delete it.","027fcc83":"* Missing value numbers and percentages.","0b4f9d68":"*Observations that go far beyond the general trend in the data or that are quite different from other observations are called contradictory observations.*","1d5fbc70":"**IQR (Interquartile Range)**","a01770df":"<a id=\"0\"><\/a>\n# Load and Check Data","f1e8d59f":"<a id=\"7\"><\/a>\n## Outlier Value Detection Using Boxplot and Histogram","22b98123":"* Is there any missing value in the data set?","2a9bec25":"* The correlation of numerical variables is examined in the dataset. It is determined that there is a moderate relationship between the variables.","1f26341d":"* Heat maps are used to learn the relationships between variables. The values in this graph range from -1 to 1. If the value is 1 there is a correct relationship between the two variables, if the value is -1 there is a inverse relationship between the two variables. If the value is 0, there is no relationship between the two variables.","a257cd25":"* Dataset variable names.","d2d32abb":"# Contributors\n\n[Esma Demir](https:\/\/www.kaggle.com\/esmadmrr)\n\n[Serkan Kocairi](https:\/\/www.kaggle.com\/serkankocairi)","376cc443":"* Points with Boxplot","e628ff29":"* Price with Boxplot","f331c2f7":" 1. **Unnamed: 0**:  A variable with no name and a variable specifying indexes will be deleted below because it is unnecessary.\n 1. **country**:  Variable indicating the countries of wines.\n 1. **description**:  A variable with descriptions about wines.\n 1. **designation**: Wine names.\n 1. **points**:  Scores of wines. (min=80, max=100)\n 1. **price**:  Prices of wines.\n 1. **province**: The variable that indicates the city where the wines are located in the country.\n 1. **region_1**: Region in the province.\n 1. **region_2**: Region in the province.\n 1. **variety**: Grape varieties.\n 1. **winery**: Winery names.","13646be9":"<a id=\"4\"><\/a>\n## Testing the Randomness of Missing Values","89fffcea":"* Using the threshold values, outliers in the data set are detected.","45777f14":"<a id=\"2\"><\/a>\n# Missing Value Analysis","882da953":"<a id=\"6\"><\/a>\n# Outlier Value Analysis","20a0db5c":"* Total missing values in the variables.","f7a37e5d":"* The relationship between numerical variables is examined. It cannot be said that there is a linear relationship between price and point variables when the data are examined."}}