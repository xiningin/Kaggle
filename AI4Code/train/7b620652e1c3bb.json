{"cell_type":{"03726f83":"code","9f529d20":"code","1b026ee4":"code","8e30d103":"code","ef1cc15f":"code","17c589b8":"code","2f02f266":"code","a9284de4":"code","aa69db54":"code","c11c1679":"code","af5a13cb":"code","a9dbc3fa":"code","4c34a54f":"code","713ee1fa":"code","8e3dee8d":"code","1a7d5c59":"code","6646edfc":"code","0938a449":"code","4f5eef5a":"code","2661a91b":"code","7ea15717":"markdown","d4c54068":"markdown","d844ce53":"markdown","58ad731a":"markdown","16ca9f55":"markdown","de6d72d0":"markdown","c135c131":"markdown","7037ca4f":"markdown","7f40c6fd":"markdown","30e5adbc":"markdown","75637db9":"markdown","dd417a95":"markdown","a1a329ce":"markdown","f3c78329":"markdown","da95136c":"markdown","3a49d6ec":"markdown","e3cf98a5":"markdown","664621f8":"markdown"},"source":{"03726f83":"import numpy as np\nimport pandas as pd\nimport pandas_profiling\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nsns.set_theme(palette='Pastel1',color_codes=True)\nsns.palplot(sns.color_palette())","9f529d20":"cardio=pd.read_csv('\/kaggle\/input\/cardio\/cardio_train.csv',index_col='id')\ncardio.head()","1b026ee4":"cardio.info()","8e30d103":"cardio.describe()","ef1cc15f":"cardio_c=cardio.copy(deep=True)\ncardio_c.reset_index(drop=True,inplace=True)\n# TRANSFORM AGE IN DAYS TO IN YEAR\ncardio_c['age']=np.floor(cardio_c['age']\/365).astype('int')\n# TRANSFORM \u2018NUMERIC\u2019 LEVEL TO 'MEANINGFUL' LEVEL\ncardio_c['gender']=np.where(cardio_c['gender']==1,'female','male')\ncardio_c['smoke']=np.where(cardio_c['smoke']==0,'NO','YES')\ncardio_c['alco']=np.where(cardio_c['alco']==0,'NO','YES')\ncardio_c['active']=np.where(cardio_c['active']==0,'PASSIVE','ACTIVE')\ncardio_c['cardio']=np.where(cardio_c['cardio']==0,'NO','YES')\nlevel={1:'normal',2:'above normal',3:'well above normal'}\ncardio_c['cholesterol']=cardio_c['cholesterol'].map(level)\ncardio_c['gluc']=cardio_c['gluc'].map(level)\n# RENAME COLUMNS\ncardio_c.columns=['age','gender','height','weight','ap_hi','ap_lo','cholesterol','glucose','smoke','drink','activity','CVD']\n\n# PULSE PRESSURE\ncardio_c['ap_diff']=cardio_c['ap_hi']-cardio_c['ap_lo']\n# BMI & BMI_level\ncardio_c['BMI']=round(cardio_c['weight']\/((cardio_c['height']\/100)**2),2)\nmin_bmi=min(cardio_c['BMI']);max_bmi=max(cardio_c['BMI'])\ncardio_c['BMI_level']=pd.cut(cardio_c['BMI'],bins=[min_bmi-1,18.5,24,28,max_bmi],labels=['underweight','normal','overweight','fat'])\n\ncardio_c.head(1)","17c589b8":"# DELETE OBVIOUS OUTLIERS\ndrop_index=cardio_c[(cardio_c['ap_hi']>300) | (cardio_c['ap_hi']<=0) | (cardio_c['ap_lo']<=0) | (cardio_c['ap_diff']<=0)].index\ncardio_c.drop(drop_index,inplace=True)\ncardio_c.describe()","2f02f266":"# BLOOD PRESSURE LEVEL\nmax_hi=max(cardio_c['ap_hi']);max_lo=max(cardio_c['ap_lo']);max_diff=max(cardio_c['ap_diff'])\nmin_hi=min(cardio_c['ap_hi']);min_lo=min(cardio_c['ap_lo']);min_diff=min(cardio_c['ap_diff'])\nlabel_ap=['low','normal','high']\ncardio_c['ap_hi_level']=pd.cut(cardio_c['ap_hi'],bins=[min_hi-1,89,140,max_hi],labels=label_ap)\ncardio_c['ap_lo_level']=pd.cut(cardio_c['ap_lo'],bins=[min_lo-1,59,90,max_lo],labels=label_ap)\ncardio_c['ap_diff_level']=pd.cut(cardio_c['ap_diff'],bins=[min_diff-1,19,60,max_diff],labels=label_ap)\ncardio_c.head(1)","a9284de4":"cardio_c.info()","aa69db54":"pandas_profiling.ProfileReport(cardio_c)","c11c1679":"level_r={'normal':1,'above normal':2,'well above normal':3}\ncardio_c['cholesterol_no']=cardio_c['cholesterol'].map(level_r)\ncardio_c['glucose_no']=cardio_c['glucose'].map(level_r)\ncardio_c['gender_no']=np.where(cardio_c['gender']=='female',1,2)\ncardio_c['smoke_no']=np.where(cardio_c['smoke']=='NO',0,1)\ncardio_c['drink_no']=np.where(cardio_c['drink']=='NO',0,1)\ncardio_c['activity_no']=np.where(cardio_c['activity']=='PASSIVE',0,1)\ncardio_c['CVD_no']=np.where(cardio_c['CVD']=='NO',0,1)","af5a13cb":"plt.figure(figsize=(5,5))\ntmp=cardio_c['gender'].value_counts()\nplt.pie(tmp.values,labels=tmp.index,autopct='%.2f%%',pctdistance=0.5,startangle=65)\nplt.title('GENDER',va='top',fontdict={'fontsize':15,'fontweight':'bold'},pad=1)\nplt.show()","a9dbc3fa":"fig,(ax1,ax2)=plt.subplots(1,2,figsize=(20,7),gridspec_kw={'width_ratios':(5,3)})\nsns.histplot(data=cardio_c,x='age',bins=64,kde=True,color='C4',ax=ax1)\nsns.violinplot(data=cardio_c,x='gender',y='age',inner='quartile',order=['female','male'],ax=ax2)\nplt.tight_layout()\nplt.show()","4c34a54f":"sns.pairplot(data=cardio_c,vars=['height','weight','BMI'],height=4,kind='reg',hue='gender',hue_order=['female','male'])\nplt.show()","713ee1fa":"# DRAW BOXPLOT\ndef arrow_text(ax,x_l,x_r,s):\n    ylim_max=ax.get_ylim()[1]\n    ax.arrow(x=(x_l+x_r)*0.5,dx=(x_r-x_l)*0.5,y=-ylim_max*0.9,dy=0,alpha=0.5,color='#E6553A',head_width=ylim_max*0.03, head_length=3,length_includes_head=True)\n    ax.arrow(x=(x_l+x_r)*0.5,dx=(x_l-x_r)*0.5,y=-ylim_max*0.9,dy=0,alpha=0.5,color='#E6553A',head_width=ylim_max*0.03, head_length=3,length_includes_head=True)\n    ax.text(x=(x_l+x_r)*0.5, y=-ylim_max*0.75,s=s,ha='center',va='top',color='#E6553A',size=16,style='italic')\n\nfig,(ax1,ax2)=plt.subplots(2,1,figsize=(20,12))\nsns.boxplot(x=cardio_c['BMI'],color='C4',width=0.5,ax=ax1)\nax1.set_xticks([0,28,50,100,150,200,250,300]);ax1.set_xticklabels([0,28,50,100,150,200,250,300],fontdict={'size':9})\nax1.set_xticks([18.5,24],minor=True);ax1.set_xticklabels([18.5,24],fontdict={'size':11,'color':'#E6553A'},minor=True)\nax1.set_title('BMI',va='bottom',fontdict={'fontsize':20,'fontweight':'bold'},loc='center')\nax1.set_xlabel('')\nax1.grid(True,which='minor',color='#F6AD82')\narrow_text(ax1,18.5,24,'normal')\n\n# DRAW PIE\ntmp=cardio_c['BMI_level'].value_counts()\nax2.pie(tmp.values,labels=tmp.index,autopct='%.2f%%',pctdistance=0.5,textprops={'size':15})\n\nplt.show()","8e3dee8d":"fig,((ax1,ax2),(ax3,ax4),(ax5,ax6))=plt.subplots(3,2,figsize=(12,12),gridspec_kw={'width_ratios':(3,2),'height_ratios':(1,1,1)})\n\n# DRAW BOXPLOT   \ndef plot_plot(ax,column,x_l,x_r,s,title,xlabel):\n    sns.violinplot(x=cardio_c[column],color='#CC99CC',width=0.6,ax=ax)\n    # XTICKS AND GRID\n    xticks=ax.get_xticks().tolist()\n    if x_l in xticks:xticks.remove(x_l)\n    if x_r in xticks:xticks.remove(x_r)\n    ax.set_xticks(xticks);ax.set_xticklabels(xticks,fontdict={'size':8})\n    ax.set_xticks([x_l,x_r],minor=True);ax.set_xticklabels([x_l,x_r],fontdict={'size':11,'color':'#333399'},minor=True)\n    ax.grid(True,which='minor',color='#9999CC')\n    # ARROW AND TEXT\n    ylim_max=ax.get_ylim()[1]\n    ax.arrow(x=(x_l+x_r)*0.5,dx=(x_r-x_l)*0.5,y=ylim_max*0.8,dy=0,alpha=0.5,color='#CC9999',head_width=ylim_max*0.03, head_length=3,length_includes_head=True)\n    ax.arrow(x=(x_l+x_r)*0.5,dx=(x_l-x_r)*0.5,y=ylim_max*0.8,dy=0,alpha=0.5,color='#CC9999',head_width=ylim_max*0.03, head_length=3,length_includes_head=True)\n    ax.text(x=(x_l+x_r)*0.5, y=ylim_max*0.8,s=s,ha='center',va='top',color='#CC9999',size=14,style='italic')\n    # TITLE AND XLABEL\n    ax.set_title(label=title,va='bottom',fontdict={'fontsize':15,'fontweight':'bold'},loc='left')\n    ax.set_xlabel(xlabel)\n\nplot_plot(ax1,'ap_hi',90,140,'normal','Systolic Blood Pressure','')\nplot_plot(ax3,'ap_lo',60,90,'normal','Diastolic Blood Pressure','')\nplot_plot(ax5,'ap_diff',20,60,'normal','Pulse Pressure','')  \n\n# DRAW PIE    \ndef plot_pie(ax,column):\n    tmp=cardio_c[column].value_counts()\n    ax.pie(tmp.values,labels=tmp.index,autopct='%.2f%%',pctdistance=0.5,textprops={'size':11})\n\nplot_pie(ax2,'ap_hi_level');plot_pie(ax4,'ap_lo_level');plot_pie(ax6,'ap_diff_level')\n\nplt.tight_layout(h_pad=2)\nplt.show()","1a7d5c59":"def plot_pie(column,ax,colors):\n    tmp=cardio_c[column].value_counts()\n    patches,texts,autotexts=ax.pie(tmp.values,labels=tmp.index,autopct='%.2f%%',pctdistance=0.5,startangle=0,colors=colors)\n    ax.set_title(column.split('_')[0],va='top',fontdict={'fontsize':15,'fontweight':'bold'})\ndef plot_box(x,y,ax):\n    sns.violinplot(data=cardio_c,x=x,y=y,ax=ax)\n    ax.set_xlabel(x.split('_')[0],fontdict={'size':15})\n    ax.set_ylabel(y.split('_')[0],fontdict={'size':15})\n    ax.set_yticks([1,2,3])\ndef plot_empty(ax):\n    ax.set_axis_off()\ndef plot_empty_withtext(ax):\n    ax.set_axis_off()\n    text='1: normal\\n\\n2: above normal\\n\\n3: well above normal'\n    ax.text(x=0, y=0,s=text,ha='left',va='top',color='black',size=13,style='italic')\n\nfig,((ax1,ax2,ax3),(ax4,ax5,ax6))=plt.subplots(2,3,figsize=(15,10),gridspec_kw={'width_ratios':(2,2,1),'height_ratios':(1,1)})\nplot_pie('cholesterol_no',ax1,['C0','C1','C2']);plot_pie('glucose_no',ax2,['C0','C2','C1'])\nplot_box('cholesterol_no','glucose_no',ax4);plot_box('glucose_no','cholesterol_no',ax5)\nplot_empty_withtext(ax3);plot_empty(ax6)\nplt.show()","6646edfc":"def plot_pie(column):\n    tmp=cardio_c[column].value_counts()\n    plt.pie(tmp.values,labels=tmp.index,autopct='%.2f%%',pctdistance=0.5,startangle=0,)\n    plt.title(column.upper(),va='top',fontdict={'fontsize':15,'fontweight':'bold'})\n    \nplt.figure(figsize=(15,10))\nplt.subplot(2,3,4);plot_pie('smoke')\nplt.subplot(2,3,5);plot_pie('drink')\nplt.subplot(2,3,6);plot_pie('activity')\nplt.tight_layout()\nplt.show()","0938a449":"plt.figure(figsize=(9,9))\n\nplt.subplot(221);ax1=sns.barplot(data=cardio_c,x='gender',y='drink_no',order=['female','male'])\nax1.set_xlabel('');ax1.set_ylabel('drink rates')\nax1.set_title('DRINK \/ SMOKE RATES WITH GENDER',va='bottom',pad=15,fontdict={'fontsize':15,'fontweight':'bold'},loc='left')\nplt.subplot(222);ax2=sns.barplot(data=cardio_c,x='gender',y='smoke_no',order=['female','male'])\nax2.set_xlabel('');ax2.set_ylabel('smoke rates')\n\nplt.subplot(223);ax3=sns.barplot(data=cardio_c,x='smoke',y='drink_no',palette=['C3','C2'])\nax3.set_ylabel('drink rates')\nax3.set_title('CORRELATION BETWEEN DRINK AND SMOKE',va='bottom',pad=15,fontdict={'fontsize':15,'fontweight':'bold'},loc='left')\nplt.subplot(224);ax4=sns.barplot(data=cardio_c,x='drink',y='smoke_no',palette=['C3','C2'])\nax4.set_ylabel('smoke rates')\n\nplt.tight_layout(h_pad=3)","4f5eef5a":"tmp=cardio_c['CVD'].value_counts()\nplt.pie(tmp.values,labels=tmp.index,startangle=90,autopct='%.2f%%',pctdistance=0.5)\nplt.title('CVD RATES',va='bottom',fontdict={'fontsize':15,'fontweight':'bold'},pad=1)\nplt.show()","2661a91b":"def plot_barplot(x,palette=sns.color_palette(),ylim=[0,1]):\n    ax=sns.barplot(data=cardio_c,x=x,y='CVD_no',palette=palette)\n    ax.set_ylim(ylim)\n    ax.set_ylabel('')\ndef plot_empty(ax):\n    ax.set_axis_off()\ndef plot_empty_withtext(ax):\n    ax.set_axis_off()\n    text='1: normal\\n\\n2: above normal\\n\\n3: well above normal'\n    ax.text(x=0, y=0.6,s=text,ha='left',va='top',color='black',size=13,style='italic')\n    \nfig=plt.figure(figsize=(20,15))\nfig.text(0.5,1,'CVD RATES',va='bottom',ha='center',fontsize=20,fontweight='bold')\n\nplt.subplot(3,4,1);plot_barplot('gender')\nplt.subplot(3,4,2);plot_barplot('smoke')\nplt.subplot(3,4,3);plot_barplot('drink')\nplt.subplot(3,4,4);plot_barplot('activity')\n\nax5=plt.subplot(3,4,5);plot_barplot('age',palette='hls')\nax5.set_xticks([ax5.get_xticks()[i] for i in [0,1,2,3,7,9,13,17,21,23,27]])\n\nplt.subplot(3,4,6);plot_barplot('ap_hi_level',palette=['C2','C3','C4'])\nplt.subplot(3,4,7);plot_barplot('ap_lo_level',palette=['C2','C3','C4'])\nplt.subplot(3,4,8);plot_barplot('ap_diff_level',palette=['C2','C3','C4'])\n\nplt.subplot(3,4,9);plot_barplot('BMI_level',palette=['C2','C3','C4','C5'])\nplt.subplot(3,4,10);plot_barplot('cholesterol_no',palette=['C3','C4','C5'])\nplt.subplot(3,4,11);plot_barplot('glucose_no',palette=['C3','C4','C5'])\nax12=plt.subplot(3,4,12);plot_empty_withtext(ax12)\n\nplt.tight_layout(h_pad=2)","7ea15717":"## NUMERIC LEVEL AS A SPARE","d4c54068":"### 3.1.2 SAMPLE CVD RATES","d844ce53":"#### 3.1.1.4 BLOOD PRESSURE","58ad731a":"#### 3.1.1.2 AGE (& GENDER)","16ca9f55":"# 3.ANALYSIS","de6d72d0":"# 1.PREPROCESS","c135c131":"## 3.1 OVERVIEW","7037ca4f":"# 2.ProfileReport","7f40c6fd":"##### BMI","30e5adbc":"##### HEIGHT & WEIGHT & BMI","75637db9":"#### 3.1.1.7 SMOKE & DRINK & GENDER","dd417a95":"## DEAL WITH BLOOD PRESSURE","a1a329ce":"#### 3.1.1.3 HEIGHT & WEIGHT & BMI","f3c78329":"#### ","da95136c":"### 3.1.1 SAMPLE STRUCTURE","3a49d6ec":"#### 3.1.1.5 CHOLESTREOL & GLUCOSE","e3cf98a5":"#### 3.1.1.6 SMOKE \/ DRINK \/ ACTIVITY","664621f8":"#### 3.1.1.1 GENDER"}}