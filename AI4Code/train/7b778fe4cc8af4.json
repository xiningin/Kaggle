{"cell_type":{"4136b1cf":"code","258c5df6":"code","6a586bf9":"code","9949ab6a":"code","e8d560c4":"code","102fcbc7":"code","6fd72612":"code","0c2b6eb7":"code","aa0cd41b":"code","005fe534":"code","e3d9afa9":"code","4ed57b21":"code","09f420da":"code","51e97fc8":"code","6cc0379e":"code","c1265914":"code","5f61de94":"code","a87a4171":"code","1df92e4d":"code","f7b19108":"code","d28fff10":"code","265a2b13":"code","bf188811":"code","463da195":"code","79859a0a":"code","ff4dff18":"code","d1036d31":"code","564ecac2":"code","80117529":"code","34917f60":"code","76fffd86":"code","d36e847c":"code","3bc55dd9":"code","4d377ed5":"code","ec52a7ef":"code","32f2a55d":"code","df667740":"code","1cef1be0":"code","13cf1ae7":"code","a7eff857":"code","ab89c521":"code","3d28d6d8":"code","311cde14":"code","7b9452b5":"code","919f2452":"code","ba65a40a":"code","455566d3":"code","6a626885":"code","150452e2":"code","62d91f20":"code","54e25a0c":"code","af83a434":"code","713f5340":"code","fc92373f":"code","dabbbf57":"code","a7eafc72":"code","a4bd165e":"code","9fc65982":"code","063ce2e9":"code","5978a849":"code","f1bd5f3f":"code","508f1a7a":"code","5bcaf700":"code","709b11fd":"code","c97df0b4":"code","2338b899":"code","83cf244f":"code","6416f5a0":"code","c5df567d":"code","6d8a894c":"code","adc85dda":"code","591eb6b1":"code","eee1f987":"code","0adbabaa":"code","b5882673":"code","a2236f9a":"code","663ae3a0":"markdown","231e0ca4":"markdown","7d08f4f6":"markdown","9db9f928":"markdown","86bf2f26":"markdown","cfb271c2":"markdown","d6d46cba":"markdown","78dba526":"markdown","9ba1c705":"markdown","37f94d43":"markdown","99445635":"markdown","75259e18":"markdown","f016ec59":"markdown","04c90aaf":"markdown","83b1601a":"markdown","17283d52":"markdown","e836fdee":"markdown","86cfec7c":"markdown","ecd5fd3f":"markdown"},"source":{"4136b1cf":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","258c5df6":"data=pd.read_csv(\"..\/input\/housing\/housing2 (1) (1).csv\")","6a586bf9":"data","9949ab6a":"data.info()","e8d560c4":"data.isnull().sum()","102fcbc7":"data.describe()","6fd72612":"data.describe(include=\"object\")","0c2b6eb7":"plt.scatter(data = data , x=\"longitude\" , y=\"latitude\" , c =data[\"median_house_value\"]  )\nplt.colorbar ()\nplt.show()","aa0cd41b":"(data['gender'].value_counts()\/data.shape[0]).plot.pie(autopct='%1.2f%%')","005fe534":"sns.barplot(x=\"ocean_proximity\",y=\"median_house_value\",data=data)","e3d9afa9":"sns.relplot(x=\"median_income\", y=\"median_house_value\", data=data)","4ed57b21":"data.hist(bins=120 , figsize=(16,20))\nplt.show()","09f420da":"data.describe()","51e97fc8":"# replace \"no\" to nan:\ndata['households'].replace(\"no\", np.nan , inplace=True)","6cc0379e":"# \"households\" should be converted into numeric value..\ndata[\"households\"]=data[\"households\"].astype('float64')","c1265914":"sns.relplot(x=\"total_rooms\", y=\"households\", data=data)","5f61de94":"sns.relplot(x=\"total_rooms\", y=\"population\", data=data)","a87a4171":" # check whether there are another value express nan in  \"ocean_proximity\" or \"gender\"..","1df92e4d":"data[\"ocean_proximity\"].value_counts()","f7b19108":"data[\"gender\"].value_counts()","d28fff10":"# there aren't \"no\" value express nan ..","265a2b13":"data.info()","bf188811":"data.info()","463da195":"missing = data.isnull().sum()\nmissing","79859a0a":"missing = missing[missing>0]\nmissing.sort_values(inplace=True)\nplt.figure(figsize=(20,10))\nmissing.plot.bar()","ff4dff18":"data.isnull().sum()","d1036d31":"# Now , the num of null values in [\"total_bedrooms\",\"households\",\"median_income\",\"gender\"] are big so we can't drop it \n# we will work to fill it ..","564ecac2":"fill_list = ['female' , \"male\"]\ndata['gender'] = data['gender'].fillna(pd.Series(np.random.choice(fill_list , size = len(data.index))))","80117529":"# label encoding to \"ocean_proximity\" and \"gender\" features..\nfrom sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\n","34917f60":"data[\"ocean_proximity\"]=le.fit_transform(data[\"ocean_proximity\"])","76fffd86":"data[\"ocean_proximity\"].value_counts()","d36e847c":"data[\"gender\"]=le.fit_transform(data[\"gender\"])","3bc55dd9":"data[\"gender\"].value_counts()","4d377ed5":"data.info()","ec52a7ef":"data.columns","32f2a55d":"data = data.ffill().add(data.bfill()).div(2)","df667740":"data.isnull().sum()","1cef1be0":"#Now, no null value..","13cf1ae7":"data.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,4))\nplt.show()","a7eff857":"plt.figure(figsize=(12,10))\ndata.boxplot(rot=45)","ab89c521":"#Define a function to determine outlier boundaries\n\ndef outlier_limits(col):\n    Q3,Q1=np.nanpercentile(col,[75,25])\n    IQR=Q3-Q1\n    UL=Q3+1.5*IQR\n    LL=Q1-1.5*IQR\n    return UL, LL","3d28d6d8":"for column in data.columns:\n    if data[column].dtype != 'object':\n        UL, LL = outlier_limits(data[column])\n        data[column] = np.where((data[column] > UL) ,UL , np.where((data[column] < LL),LL, data[column]))\n","311cde14":"data.info()","7b9452b5":"data.isnull().sum()","919f2452":"# ultirnative dealing with outliers","ba65a40a":"#data.plot(kind = \"box\" , subplots = True , figsize = (18,15) ,  layout = (3,3))\n#plt.show()","455566d3":"#sns.boxplot(x = data['total_rooms'])","6a626885":"#fig , ax = plt.subplots(figsize=(12,8))\n#ax.scatter(x= data[\"total_rooms\"],y = data[\"median_house_value\"])\n#ax.set_xlabel(\"total_rooms\")\n#ax.set_ylabel(\"median_house_value\")\n#plt.show()","150452e2":"#t_df = data[data['total_rooms']< 12000]\n#fig , ax = plt.subplots(figsize=(12,6))\n#ax.scatter(x= t_df[\"total_rooms\"],y = t_df[\"median_house_value\"])\n#ax.set_xlabel(\"total_rooms\")\n#ax.set_ylabel(\"median_house_value\")\n#plt.show()","62d91f20":"#from pandas.plotting import scatter_matrix\n#attributes=[\"median_house_value\",\"median_income\",\"total_rooms\",\"housing_median_age\"]\n#scatter_matrix(data[attributes],figsize=(12,8))","54e25a0c":"#data.shape","af83a434":"# remove outliers with the help of quantile","713f5340":"#lower_limit=data[\"median_house_value\"].quantile(0.25)\n#lower_limit","fc92373f":"#upper_limit=data[\"median_house_value\"].quantile(0.95)\n#upper_limit","dabbbf57":"#data=data[(data[\"median_house_value\"]<upper_limit) ]","a7eafc72":"#data.shape","a4bd165e":"#from pandas.plotting import scatter_matrix\n#attributes=[\"median_house_value\",\"median_income\",\"total_rooms\",\"housing_median_age\"]\n#scatter_matrix(data[attributes],figsize=(12,8))\n","9fc65982":"plt.figure(figsize=(16,10))\nsns.heatmap(data.corr(), cbar = True , annot=True)","063ce2e9":"#strong corelation between \"households\" , \"population\" , \"total bedrooms\" and \"total rooms\" .\n#strong corelation between \"median_house_value\" , \"median_income\". ","5978a849":"data.drop(\"gender\",axis=1,inplace = True)","f1bd5f3f":"X = data.drop(\"median_house_value\" , axis = 1).values\ny = data['median_house_value'].values","508f1a7a":"from sklearn.model_selection import train_test_split\nX_train,X_test,y_train,y_test = train_test_split(X,y, test_size=0.25 , random_state=42)","5bcaf700":"from sklearn.preprocessing import StandardScaler\nscale = StandardScaler ()\nX_train = scale.fit_transform(X_train)\nX_test = scale.fit_transform(X_test)","709b11fd":"data.isnull().sum()","c97df0b4":"from sklearn.linear_model import LinearRegression\nlr = LinearRegression()\nlr.fit(X_train,y_train)","2338b899":"lr.score(X_train,y_train)","83cf244f":"lr.score(X_test,y_test)","6416f5a0":"from sklearn.linear_model import Ridge\nrid = Ridge()","c5df567d":"rid.fit(X_train,y_train)","6d8a894c":"rid.score(X_train,y_train)","adc85dda":"rid.score(X_test,y_test)","591eb6b1":"y_pred = lr.predict(X_test)","eee1f987":"y_pred2 = rid.predict(X_test)","0adbabaa":"from sklearn.metrics import r2_score\nr2 = r2_score(y_test , y_pred)\nr2","b5882673":"data.columns","a2236f9a":"\"\"\"\"\"\nfigure, ((ax1, ax2), (ax3, ax4), (ax5, ax6), (ax7, ax8), (ax9, ax10)) = plt.subplots(nrows=5, ncols=2)\nfigure.set_size_inches(16,28)\n_ = sns.regplot(data['longitude'], data['median_house_value'], ax=ax1)\n_ = sns.regplot(data['latitude'], data['median_house_value'], ax=ax2)\n_ = sns.regplot(data['housing_median_age'], data['median_house_value'], ax=ax3)\n_ = sns.regplot(data['total_rooms'], data['median_house_value'], ax=ax4)\n_ = sns.regplot(data['total_bedrooms'], data['median_house_value'], ax=ax5)\n_ = sns.regplot(data['population'], data['median_house_value'], ax=ax6)\n_ = sns.regplot(data['households'], data['median_house_value'], ax=ax7)\n_ = sns.regplot(data['median_income'], data['median_house_value'], ax=ax8)\n_ = sns.regplot(data['median_house_value'], data['median_house_value'], ax=ax9)\n_ = sns.regplot(data['ocean_proximity'], data['median_house_value'], ax=ax10)\n\"\"\"\"\"","663ae3a0":"# EDA","231e0ca4":"#### 1-Fill missing values","7d08f4f6":"### 1.Most houses are aged between 18-37 years.\n### 2.Most building blocks has rooms between 1448-3148 room.\n### 3.Most building blocks has bed rooms between 336-977 room.\n### 4.Most building blocks has population between 787-1725 people.\n### 5.Most building blocks has households between 313-538 people.\n### 6.Most people has income between 2138.050- 4583.300 pounds.\n### 7.Most houses cost between 119600-264725 pounds .","9db9f928":"-------------------------","86bf2f26":"-------------------------------","cfb271c2":"# Data Preprocessing","d6d46cba":"###### there are 20640 entries and 11 coloumns ..\n###### there are null values in \"housing_median_age\" , \"total_bedrooms\",\"population\",\"households\",\"median_income\",\"gender\" ","78dba526":"### there are more females than males.","9ba1c705":"## Business insights ","37f94d43":"## Customers with higher income tends to buy more expensive houses.","99445635":"#### In households there are \"no\" value ...>>which should be null value","75259e18":"### Island houses are the most expensive,while Inland houses are the cheapest.\n\n","f016ec59":"-as median income increase median housing value increase.\n\n-The price of the houses next to ocean is too high compare to all other houses.a","04c90aaf":"----------------------","83b1601a":"# Thank You","17283d52":"### 2-Removing outliers","e836fdee":"### as the number of rooms in a building block increase the population and households increase.","86cfec7c":"from histograms:\n- 'housing_median_age' : most of houses is between 10 to 45 years old .. and there are big number of houses above 50 year .\n- 'total_rooms'and 'total_bedrooms' are almost have the same curve..\n- total_rooms' has range between 0 and 10000 rooms in block  with mean= 2500 aproximatly.\n- 'total_bedrooms'has range between 0 and 1000 rooms in block  with mean= 540 aproximatly.\n- 'population', 'households' also have the same curve and the same range as in 'total_rooms'and 'total_bedrooms'.\n- 'median_income' most of people earn between 2.5k and 5k. few people has more than 10K up to 15k , then there are a small increase of income above 15k.\n- 'median_house_value' : its curve looks some how like 'median_income' curve so there are relation between them .\n- 'median_house_value': most of houses values are between 50000 and 350000... there are a huge number of houses values above 500000 .","ecd5fd3f":"The price of the houses next to ocean is too high compare to all other houses."}}