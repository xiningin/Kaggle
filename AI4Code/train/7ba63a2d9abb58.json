{"cell_type":{"fbebe745":"code","2231e33f":"code","ccf1c3c0":"code","caab5961":"code","7d409d6b":"code","a527551f":"code","60e101a4":"code","7f5e943a":"code","b8d5e215":"code","a15a82aa":"code","dd162504":"code","be959417":"code","228ca8d6":"markdown","ad21491e":"markdown","239d3acb":"markdown","c9ed95be":"markdown","f9277904":"markdown","3e61395a":"markdown","5fbf6663":"markdown","218285e0":"markdown","15c4e249":"markdown","af1c0f76":"markdown","1091f432":"markdown","84bef78c":"markdown"},"source":{"fbebe745":"import requests\nimport numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\nimport datetime\nimport plotly.express as px\nimport plotly.graph_objects as go\n%matplotlib inline\npd.set_option(\"display.max_rows\",None)","2231e33f":"req = requests.get(\"https:\/\/api.covid19api.com\/summary\")\nreq.status_code\njs = req.json()\n\n\ncountry_data = pd.DataFrame()\nfor i in range(len(js[\"Countries\"])):\n    js[\"Countries\"][i].pop(\"Premium\")\n    country_data = country_data.append(pd.DataFrame(js[\"Countries\"][i],index=[i])).copy()\n\ncountry_data_main = country_data.copy()\ncountry_data.head()","ccf1c3c0":"as_on = js[\"Countries\"][0][\"Date\"]\nas_on = datetime.datetime.strptime(as_on,\"%Y-%m-%dT%H:%M:%SZ\")\nas_on = datetime.datetime.strftime(as_on,\"%d %b %Y\")\nprint(\"Last updated on: \"+ str(as_on))","caab5961":"iso_2_3 = pd.read_csv(\"https:\/\/gist.githubusercontent.com\/tadast\/8827699\/raw\/3cd639fa34eec5067080a61c69e3ae25e3076abb\/countries_codes_and_coordinates.csv\")\niso_2_3 = iso_2_3[[\"Alpha-2 code\",\"Alpha-3 code\"]].copy()\niso_2_3.columns = [\"CountryCode\",\"iso3\"]\n\niso_2_3[\"CountryCode\"] = iso_2_3[\"CountryCode\"].str.replace('\"',\"\").str.strip()\niso_2_3[\"iso3\"] = iso_2_3[\"iso3\"].str.replace('\"',\"\").str.strip()\n\ncountry_data = country_data.merge(iso_2_3,on=\"CountryCode\",how=\"left\").copy()\npx.choropleth(country_data,locations=\"iso3\",color=\"TotalConfirmed\",hover_name=\"Country\",color_continuous_scale=px.colors.sequential.Reds)\n","7d409d6b":"country_data.drop(columns=\"iso3\",inplace=True)","a527551f":"sns.set_style(\"darkgrid\")\ncountry_data = country_data.sort_values(by=\"TotalConfirmed\",ascending=False)\ncountry_data = country_data.reset_index(drop=True)\n\n\nfig,(ax1,ax2) = plt.subplots(2,1,figsize=(10,20))\ntop_20 = country_data.iloc[:20,:].copy()\ntop_cat_plot_df = top_20.loc[:,[\"Country\",\"TotalConfirmed\",\"TotalDeaths\",\"TotalRecovered\"]].melt(id_vars=\"Country\").copy()\nsns.stripplot(x=\"value\",y=\"Country\",hue=\"variable\",data=top_cat_plot_df,alpha=0.6,sizes=[160,160],ax=ax1,jitter=False)\nax1.set_title(\"Top 20 countries by confirmed cases as on \"+str(as_on))\nax1.set_xlabel(\"Total confirmed cases \/ Total deaths \/ Total recovered\")\n\n\n\nbot_20 = country_data.iloc[-20:,:].copy()\ncat_plot_df = bot_20.loc[:,[\"Country\",\"TotalConfirmed\",\"TotalDeaths\",\"TotalRecovered\"]].melt(id_vars=\"Country\").copy()\nsns.stripplot(x=\"value\",y=\"Country\",hue=\"variable\",data=cat_plot_df,alpha=0.6,sizes=[160,160],ax=ax2,jitter=False)\nax2.set_title(\"Bottom 20 countries by confirmed cases as on \"+str(as_on))\nax2.set_xlabel(\"Total confirmed cases \/ Total deaths \/ Total recovered\")\nax2.set_ylabel(\"\")\nplt.show()","60e101a4":"country_data[\"Mortality_rate\"] = np.round((country_data[\"TotalDeaths\"] \/ country_data[\"TotalConfirmed\"]) * 100,2)\ncountry_data[\"Recovery_rate\"] = np.round((country_data[\"TotalRecovered\"] \/ country_data[\"TotalConfirmed\"]) * 100,2)\ncountry_data = country_data.sort_values(by=\"Mortality_rate\",ascending=False)\ncountry_data = country_data.reset_index(drop=True)\n\n\nfig,(ax1,ax2) = plt.subplots(2,1,figsize=(10,22))\ntop_20 = country_data.iloc[:20,:].copy()\ntop_cat_plot_df = top_20.loc[:,[\"Country\",\"Recovery_rate\",\"Mortality_rate\"]].melt(id_vars=\"Country\").copy()\n#sns.stripplot(x=\"value\",y=\"Country\",hue=\"variable\",data=top_cat_plot_df,sizes=[160,160],ax=ax1)\nsns.barplot(x=\"value\",y=\"Country\",hue=\"variable\",data=top_cat_plot_df,ax=ax1)\nax1.set_title(\"Top 20 countries by mortality rate as on \"+str(as_on))\nax1.set_xlabel(\"Mortality rate \/ Recovery rate\")\n#ax1.legend().remove()\n\n\nbot_20 = country_data.iloc[-20:,:].copy()\ncat_plot_df = bot_20.loc[:,[\"Country\",\"Recovery_rate\",\"Mortality_rate\"]].melt(id_vars=\"Country\").copy()\n#sns.stripplot(x=\"value\",y=\"Country\",hue=\"variable\",data=cat_plot_df,sizes=[160,160],ax=ax2)\nsns.barplot(x=\"value\",y=\"Country\",hue=\"variable\",data=cat_plot_df,ax=ax2)\nax2.set_title(\"Bottom 20 countries by mortality rate as on \"+str(as_on))\nax2.set_xlabel(\"Mortality rate \/ Recovery rate\")\nax2.set_ylabel(\"\")\nplt.show()","7f5e943a":"country_data = country_data.sort_values(by=\"TotalConfirmed\",ascending=False)\ncountry_data = country_data.reset_index(drop=True)\nsns.relplot(x=\"TotalConfirmed\",y=\"TotalDeaths\",data=country_data,s=100,alpha=0.5,height=6,aspect=1.5)\nplt.title(\"Total confirmed cases vs Total deaths as on \"+str(as_on))\nfor i in range(5):\n    plt.text(x=country_data.loc[i,\"TotalConfirmed\"],y=country_data.loc[i,\"TotalDeaths\"],s=country_data.loc[i,\"CountryCode\"])\ncountry_data = country_data.sort_values(by=\"TotalDeaths\",ascending=False)\ncountry_data = country_data.reset_index(drop=True)\nfor i in range(5):\n    plt.text(x=country_data.loc[i,\"TotalConfirmed\"],y=country_data.loc[i,\"TotalDeaths\"],s=country_data.loc[i,\"CountryCode\"])","b8d5e215":"country_data_c = country_data.loc[country_data[\"CountryCode\"].isin([\"IN\",\"US\",\"MX\",\"GB\",\"BR\"])==False,:].copy()\ncountry_data_c = country_data_c.sort_values(by=\"TotalConfirmed\",ascending=False)\ncountry_data_c = country_data_c.reset_index(drop=True)\nsns.relplot(x=\"TotalConfirmed\",y=\"TotalDeaths\",data=country_data_c,s=100,alpha=0.5,height=6,aspect=1.5)\nplt.title(\"Total confirmed cases vs Total deaths (excluding visual outliers) as on \"+str(as_on))\nfor i in range(10):\n    plt.text(x=country_data_c.loc[i,\"TotalConfirmed\"],y=country_data_c.loc[i,\"TotalDeaths\"],s=country_data_c.loc[i,\"CountryCode\"])\ncountry_data_c = country_data_c.sort_values(by=\"TotalDeaths\",ascending=False)\ncountry_data_c = country_data_c.reset_index(drop=True)\nfor i in range(10):\n    plt.text(x=country_data_c.loc[i,\"TotalConfirmed\"],y=country_data_c.loc[i,\"TotalDeaths\"],s=country_data_c.loc[i,\"CountryCode\"])","a15a82aa":"#Cases, deaths and recoveries are all moving together, which is obvious\ncor = country_data.corr()\nmask = np.triu(cor)\nfig = plt.figure(figsize=(10,10))\nsns.heatmap(country_data.corr(),mask=mask,annot=True,fmt=\"0.1f\",cbar=False)\nplt.show()","dd162504":"def to_date(x):\n    x = datetime.datetime.strptime(x,\"%Y-%m-%dT%H:%M:%SZ\")\n    x = datetime.datetime.strftime(x,\"%d %b %Y\")\n    return x\n\n\ndef country_plot(Country):\n    res = requests.get(\"https:\/\/api.covid19api.com\/total\/country\/\" + Country)\n    js = res.json()\n\n    country_wise = pd.DataFrame()\n    for i in range(len(js)):\n        country_wise = country_wise.append(pd.DataFrame(js[i],index=[i]))\n    country_wise[\"Date\"] = country_wise[\"Date\"].map(to_date)\n    country_wise = country_wise.loc[:,[\"Confirmed\",\"Deaths\",\"Recovered\",\"Active\",\"Date\"]].copy()\n    country_wise = country_wise.set_index(country_wise[\"Date\"])\n    country_wise.drop(columns=[\"Date\"],inplace=True)\n    country_wise.plot(figsize=(17,6))\n    plt.title(Country.upper())\n    plt.ylabel(\"Total confirmed \/ Total recovered \/ Total active \/ Total deaths\")\n    plt.show()\n\ncountry_plot(\"united-states\")\ncountry_plot(\"brazil\")\ncountry_plot(\"india\")\ncountry_plot(\"russia\")\ncountry_plot(\"peru\")","be959417":"country_plot(\"yemen\")\ncountry_plot(\"italy\")\ncountry_plot(\"united-kingdom\")\ncountry_plot(\"belgium\")\ncountry_plot(\"mexico\")","228ca8d6":"<h2>Top and bottom 20 countries by mortality rate<\/h2>\n<ol>\n    <li>Mortality rate: deaths\/cases<\/li>\n    <li>Recovery rate: recoveries\/cases<\/li>\n<\/ol>\n\nMortality rate is an important metric to measure the severity of the pandemic. In the below chart we can see the top 3 countries by total cases are not top in mortality rate.","ad21491e":"The scatter plot below shows US, Brazil, and India as clear outliers with high cases and deaths ","239d3acb":"<h2>Heatmap - To quantify and visualize correlation<\/h2>","c9ed95be":"<h1>Realtime Covid-19 Tracker<\/h1>\n","f9277904":"<h2>Total Confirmed Cases by Country","3e61395a":"<h2>Analysis of patterns in cases, deaths, and recoveries of top and bottom 20 countries<\/h2>","5fbf6663":"We can see that Cases, deaths and recoveries are all moving together with high correlation","218285e0":"To clearly view other countries in the scatter plot, we need to remove the three outliers identified above.","15c4e249":"<h2>Covid-19 Trend in top 5 countries by cases<\/h2>","af1c0f76":"This data is retrieved from an API which gives information about total confirmed, deaths and recovered cases by country. The data is updated everyday. \n<p>API Documentation: <a href=\"https:\/\/documenter.getpostman.com\/view\/10808728\/SzS8rjbc?version=latest\">https:\/\/documenter.getpostman.com\/view\/10808728\/SzS8rjbc?version=latest<\/a>","1091f432":"<ul>\n    <li>The data shows that US, Brazil and India are the top 3 countries with most confirmed cases.<\/li>\n    <li>The total deaths are not following the same pattern of total cases.<\/li>\n    <\/ul>","84bef78c":"<h2>Covid-19 Trend in Top 5 Countries By Mortality Rate<\/h2>"}}