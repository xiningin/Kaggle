{"cell_type":{"6fdc6d48":"code","6b7bf5fd":"code","24f1dfa4":"code","d021548f":"code","a1457aec":"code","f544f271":"code","4ed5322e":"code","00911ebe":"code","631b22d1":"code","d07c012a":"code","9ed76264":"code","856f7f5b":"code","f225d9ff":"code","fc3a9d4d":"code","c28766ed":"code","b20249f5":"code","43c35e59":"markdown","5b935aea":"markdown","b992b0e2":"markdown","f7d58b5d":"markdown","b9f68417":"markdown","c9110bdf":"markdown","e6f3fd5f":"markdown","d870d81a":"markdown","84982a2a":"markdown","771cd91d":"markdown","c031e475":"markdown","7f747fbd":"markdown"},"source":{"6fdc6d48":"import pandas as pd\nimport numpy as np\nimport seaborn as sns; sns.set()\nimport matplotlib.pyplot as plt\n!pip install geonamescache\nimport geonamescache\n\nsuicides_data = pd.read_csv('..\/input\/suicide\/suicide.csv')","6b7bf5fd":"data = suicides_data.drop(['HDI for year'], axis = 1)\n\nby_countryYear = data.groupby('country')['year'].nunique().reset_index()\ncountries = list(by_countryYear[by_countryYear['year']>=10]['country'])\ndata = data[data['country'].isin(countries)]\n\ngc = geonamescache.GeonamesCache()\ncountries = gc.get_countries()\nmapping = pd.DataFrame(countries).T.reset_index()[['name','continentcode']]\nmapping.rename(columns = {'name':'country'}, inplace=True)\nmapping['country'] = mapping['country'].replace({'Macao':'Macau',\n                                   'Czechia':'Czech Republic',\n                                   'South Korea':'Republic of Korea',\n                                   'Russia':'Russian Federation',\n                                   'Saint Vincent and the Grenadines':'Saint Vincent and Grenadines'})\n\ndata = pd.merge(data,mapping,on='country', how = 'left')\ndata['continentcode'] = data['continentcode'].replace({'EU':'Europe',\n                                   'AS':'Asia',\n                                   'NA':'North America',\n                                   'SA':'South America',\n                                   'AF':'Africa',\n                                   'OC':'Oceania'})\n\n\ndata['continentcode'] = pd.Categorical(data['continentcode'])\ndata['age'] = pd.Categorical(data['age'])\ndata['age'].cat.reorder_categories(['5-14 years','15-24 years','25-34 years',\n                                    '35-54 years','55-74 years','75+ years'], inplace = True)\ndata['generation'] = pd.Categorical(data['generation'])\ndata['generation'].cat.reorder_categories(['G.I. Generation','Silent','Boomers','Generation X','Millenials','Generation Z'],\n                                          inplace = True)\ndata['country'] = pd.Categorical(data['country'])\ndata['sex'] = pd.Categorical(data['sex'])\ndata.rename(columns = {'continentcode':'continent'},inplace = True)\n\n\n#data.pivot_table(values = 'suicides_no',index = 'country',columns = 'year',aggfunc='sum').isnull().sum()\ndata = data[data['year'] != 2016]","24f1dfa4":"plt.figure(figsize=(9,5))\nby_year = data.groupby(['year'])[['population','suicides_no']].sum().reset_index()\nby_year['suicide_rate'] = by_year['suicides_no']*100000\/by_year['population']\nax = sns.lineplot(x=\"year\", y=\"suicide_rate\",data=by_year)\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Suicide Rate by Year across globe')\nplt.show()","d021548f":"by_continent = data.groupby(['continent','year'])[['population','suicides_no']].sum().reset_index()\nby_continent['suicide_rate'] = by_continent['suicides_no']*100000\/by_continent['population']\nsns.set_style(\"darkgrid\")\nax = sns.relplot(x=\"year\", y=\"suicide_rate\", col=\"continent\",col_wrap=3,\n                 data=by_continent , kind=\"line\", legend=\"full\", marker='o',\n                height=3, aspect=1.5)\nax.set(ylabel='Suicide Rate', xlabel='Year')\nax.fig.suptitle('Suicide Rate by Year by Continents', x=0.5, y=1.05)\nplt.show()","a1457aec":"plt.figure(figsize=(12,5))\nby_year = data.groupby(['year','sex'])[['population','suicides_no']].sum().reset_index()\nby_year['suicide_rate'] = by_year['suicides_no']*100000\/by_year['population']\nax = sns.lineplot(x=\"year\", y=\"suicide_rate\",hue = 'sex',data=by_year,  legend=\"full\")\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Suicide Rate by Gender across globe')\nplt.show()","f544f271":"plt.figure(figsize=(12,7))\nby_year = data.groupby(['year','age'])[['population','suicides_no']].sum().reset_index()\nby_year['suicide_rate'] = by_year['suicides_no']*100000\/by_year['population']\nax = sns.lineplot(x=\"year\", y=\"suicide_rate\",hue = 'age',data=by_year,  legend=\"full\")\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Suicide Rate by age-group across globe')\nplt.show()","4ed5322e":"plt.figure(figsize=(12,7))\nby_year = data.groupby(['year','generation'])[['population','suicides_no']].sum().reset_index()\nby_year['suicide_rate'] = by_year['suicides_no']*100000\/by_year['population']\nax = sns.lineplot(x=\"year\", y=\"suicide_rate\",hue = 'generation',data=by_year,  legend=\"full\")\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Suicide Rate by Generation across globe')\nplt.show()","00911ebe":"by_sex = data.groupby(['year','sex','age'])[['population','suicides_no']].sum().reset_index()\nby_sex['suicide_rate'] = by_sex['suicides_no']*100000\/by_sex['population']\nax = sns.relplot(x=\"year\", y=\"suicide_rate\", hue=\"age\",  col=\"sex\",data=by_sex,  kind=\"line\", legend=\"full\",\n                height=5, aspect=1)\nax.set(ylabel='Suicide Rate', xlabel='Year')\nax.fig.suptitle('Suicide Rate by gender across age group', x=0.5, y=1.05)\nplt.show()\nplt.show()","631b22d1":"by_gen_year = data.groupby(['year','sex','generation'])[['population','suicides_no']].sum().reset_index()\nby_gen_year['suicide_rate'] = by_gen_year['suicides_no']*100000\/by_gen_year['population']\nax = sns.relplot(x=\"year\", y=\"suicide_rate\", hue=\"generation\",  col=\"sex\",data=by_gen_year,  kind=\"line\", legend=\"full\",\n                height=5, aspect=1)\nax.set(ylabel='Suicide Rate', xlabel='Year')\nax.fig.suptitle('Suicide Rate by gender across generations', x=0.5, y=1.05)\nplt.show()","d07c012a":"age_gen_suicideno = data.pivot_table(values = 'suicides_no',index = 'generation',columns = 'age',aggfunc='sum')\nage_gen_population = data.pivot_table(values = 'population',index = 'generation',columns = 'age',aggfunc='sum')\nby_age_gen = age_gen_suicideno*100000\/age_gen_population\nby_age_gen = by_age_gen.stack().reset_index(name='suicide_rate')\nplt.figure(figsize=(12,6))\nsns.set_palette(\"husl\", 6)\nax = sns.barplot(x = 'generation',y = 'suicide_rate', hue='age',data=by_age_gen)\nax.legend(loc =1, title = 'age')\nax.set(ylabel='Suicide Rate', xlabel='Generation', title = 'Suicide Rate across genrations by age-groups')\nplt.show()","9ed76264":"#by_gdpcapita = data.groupby(['gdp_per_capita ($)'])[['population','suicides_no']].sum().reset_index()\n#by_gdpcapita['suicide_rate'] = by_gdpcapita['suicides_no']*100000\/by_gdpcapita['population']\n#plt.figure(figsize=(12,7))\n#sns.scatterplot(x=\"gdp_per_capita ($)\", y=\"suicide_rate\", data=by_gdpcapita)\n#by_gdpcapita[['gdp_per_capita ($)','suicide_rate']].corr()","856f7f5b":"by_gdp_country = data.groupby(['country']).agg({'population':'sum', \n                         'suicides_no':'sum', \n                         'gdp_per_capita ($)':'mean'}).reset_index()\nby_gdp_country['suicide_rate'] = by_gdp_country['suicides_no']*100000\/by_gdp_country['population']\nplt.figure(figsize=(12,7))\nsns.scatterplot(x=\"gdp_per_capita ($)\", y=\"suicide_rate\", data=by_gdp_country)\nby_gdp_country[['gdp_per_capita ($)','suicide_rate']].corr()","f225d9ff":"dm = data.groupby(['country','year'])['suicides_no','population'].sum().reset_index()\ndm['suicide_rate'] = dm['suicides_no']*100000\/dm['population']\ndm = dm[dm['suicides_no'].notnull()]\nfrom sklearn.linear_model import LinearRegression\nb = []\nfor country in dm.country.unique():\n    tempdf = dm[dm['country'] == country]\n    X = np.asarray(tempdf['year']).reshape([-1,1])\n    y = np.asarray(tempdf['suicide_rate']).reshape([-1,1])\n    model = LinearRegression()\n    results = model.fit(X,y).coef_[0][0]\n    b.append([country,results])\n\ndf = pd.DataFrame(b,columns=['country','factor']).sort_values(by='factor')\ndecrease = list(df['country'].head(10))\nincrease = list(df['country'].tail(10))","fc3a9d4d":"plt.figure(figsize=(16,8))\nleg = []\nsns.set_palette(\"husl\", 10)\nfor country in decrease:\n    dm_country = dm[dm['country'] == country]\n    ax = sns.lineplot(x=\"year\", y=\"suicide_rate\",data=dm_country, marker='o')\n    leg.append(country)\n\nplt.legend(title='Country', loc='upper left', labels=leg)\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Top 10 Countries with highest decrease in suicide rates')\nplt.show()","c28766ed":"plt.figure(figsize=(16,8))\nleg = []\nsns.set_palette(\"husl\", 10)\nfor country in increase:\n    dm_country = dm[dm['country'] == country]\n    ax = sns.lineplot(x=\"year\", y=\"suicide_rate\",data=dm_country, marker='o')\n    leg.append(country)\n\nplt.legend(title='Country', loc='best', labels=leg)\nax.set(ylabel='Suicide Rate', xlabel='Year', title = 'Top 10 Countries with hghest increase in suicide rates')\nplt.show()","b20249f5":"\ndata_withHDI = suicides_data.copy()\ndata_withHDI = data_withHDI[data_withHDI['HDI for year'].notnull()]\n\n\ndata_withHDI = data_withHDI[data_withHDI['year'].isin([2010,2011,2012,2013,2014])]\n\n\ncountries = list(data_withHDI.pivot_table(values = 'HDI for year',index = 'country',columns = 'year') \\\n                 .dropna().reset_index()['country'])\ndata_withHDI = data_withHDI[data_withHDI['country'].isin(countries)]\n\nby_hdi = data_withHDI.groupby(['HDI for year'])[['population','suicides_no']].sum().reset_index()\nby_hdi['suicide_rate'] = by_hdi['suicides_no']*100000\/by_hdi['population']\n\nby_hdi['hdi_categories'] = np.where(by_hdi['HDI for year'] >=0.8, \"Very High\",\n                             np.where(by_hdi['HDI for year'].between(0.7,0.799), \"High\",\n                             np.where(by_hdi['HDI for year'].between(0.555,0.699),\"Medium\",\"Low\")))\n\n\nplt.figure(figsize=(12,7))\nplt.style.use('ggplot')\nax = sns.scatterplot(x=\"HDI for year\", y=\"suicide_rate\", hue= 'hdi_categories', data=by_hdi)\nax.set(ylabel='Suicide Rate', xlabel='HDI for year', title = 'Suicide Rate by HDI across countries falling in different HDI categories')\nplt.show()\nby_hdi[['HDI for year','suicide_rate']].corr()","43c35e59":"due to gdp","5b935aea":"By GDP\u00b6\n","b992b0e2":"Suicide Rate by Age Group and Generation\u00b6\n","f7d58b5d":"Suicide Rates By Continent","b9f68417":"Data Cleaning\nHDI for year is dropped, a spearated dataset is created where analysis is done based on HDI\nCountries for which suicide data is available for less than 10 years have been dropped\nContinents were mapped to countries\nData for year 2016 is dropped due to very few observations","c9110bdf":"Suicide Rates by Gender\u00b6\n","e6f3fd5f":"Suicide Rate trend across year by continent, age group, gender and generations\nSuicides Rate Across Globe","d870d81a":"By gender, age and generation\u00b6\n","84982a2a":"By generation and age group\u00b6\n","771cd91d":"Key Data Observations\u00b6\n","c031e475":"By human development index\u00b6\n","7f747fbd":"Countries with increasing\/decreasing trend in suicide rate throughout the time period\u00b6\n"}}