{"cell_type":{"b79230b2":"code","e9377461":"code","9ed92992":"code","f7a62099":"code","43f5f0aa":"code","80653003":"code","58ed5932":"code","ea496404":"code","6bfb8256":"code","b2792569":"code","1686b131":"code","1b6aaddf":"code","5dd95b01":"code","c7c6857f":"code","7070b603":"code","7436b803":"code","ca939333":"code","2e31c82b":"code","9bf4288f":"code","af56f84b":"code","a21de419":"code","3df4b04e":"code","9428a0d9":"code","14e564da":"code","97224d80":"code","f1cf6329":"code","cf14258c":"code","f4069c11":"code","cb9abab5":"code","e13040cd":"code","bc1504ab":"code","83a86059":"code","5f6ef39e":"code","14c95b19":"code","0993c19e":"markdown","4bb54870":"markdown","9c4bf9a0":"markdown","ab4040a9":"markdown","860ae6ee":"markdown","726ce905":"markdown","e2ce628b":"markdown","32764fe0":"markdown","1d7afd2e":"markdown","49237f99":"markdown","b7f5abfe":"markdown","12753d48":"markdown","19b718dc":"markdown"},"source":{"b79230b2":"import datetime as dt\nimport pandas as pd","e9377461":"pd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', None)\npd.set_option('display.float_format', lambda x: '%.5f' % x)","9ed92992":"df_ = pd.read_csv(\"..\/input\/online-retail-ii-uci\/online_retail_II.csv\")","f7a62099":"df = df_.copy()","43f5f0aa":"new_df = (df[\"InvoiceDate\"] >= '2010-12-01') & (df[\"InvoiceDate\"] <= '2011-12-09')","80653003":"df = df.loc[new_df]","58ed5932":"df.info()","ea496404":"df['InvoiceDate']= pd.to_datetime(df['InvoiceDate'])","6bfb8256":"df.info()","b2792569":"df.shape","1686b131":"df.describe().T","1b6aaddf":"#Veri setinde eksik g\u00f6zlem var m\u0131? Varsa hangi de\u011fi\u015fkende ka\u00e7 tane eksik g\u00f6zlem vard\u0131r?\ndf.isnull().sum()","5dd95b01":"#Eksik g\u00f6zlemleri veri setinden \u00e7\u0131kart\u0131n\u0131z. \u00c7\u0131karma i\u015fleminde \u2018inplace=True\u2019 parametresini kullan\u0131n\u0131z.\ndf.dropna(inplace=True)","c7c6857f":"#E\u015fsiz \u00fcr\u00fcn say\u0131s\u0131 ka\u00e7t\u0131r?\ndf[\"Description\"].nunique()","7070b603":"#Hangi \u00fcr\u00fcnden ka\u00e7ar tane vard\u0131r?\ndf[\"Description\"].value_counts().head()","7436b803":"#En \u00c7ok sipari\u015e edilen 5 \u00fcr\u00fcn\u00fc \u00e7oktan aza do\u011fru s\u0131ralay\u0131n\u0131z.\ndf.groupby(\"Description\").agg({\"Quantity\": \"sum\"}).sort_values(\"Quantity\", ascending=False).head(5)","ca939333":"#Faturalardaki \u2018C\u2019 iptal edilen i\u015flemleri g\u00f6stermektedir. \u0130ptal edilen i\u015flemleri veri setinden \u00e7\u0131kart\u0131n\u0131z.\ndf = df[~df[\"Invoice\"].str.contains(\"C\", na=False)]","2e31c82b":"#Fatura ba\u015f\u0131na elde edilen toplam kazanc\u0131 ifade eden \u2018TotalPrice\u2019 ad\u0131nda bir de\u011fi\u015fken olu\u015fturunuz.\ndf[\"TotalPrice\"] = df[\"Quantity\"] * df[\"Price\"]","9bf4288f":"df.head()","af56f84b":"df.shape","a21de419":"today_date = dt.datetime(2011, 12, 11)","3df4b04e":"rfm = df.groupby('Customer ID').agg({'InvoiceDate': lambda InvoiceDate: (today_date - InvoiceDate.max()).days,\n                                     'Invoice': lambda Invoice: Invoice.nunique(),\n                                     'TotalPrice': lambda TotalPrice: TotalPrice.sum()})","9428a0d9":"rfm.head()","14e564da":"rfm.columns = ['recency', 'frequency', 'monetary']","97224d80":"rfm = rfm[(rfm['monetary'] > 0)]","f1cf6329":"rfm[\"recency_score\"] = pd.qcut(rfm['recency'], 5, labels=[5, 4, 3, 2, 1])","cf14258c":"rfm[\"frequency_score\"] = pd.qcut(rfm['frequency'].rank(method=\"first\"), 5, labels=[1, 2, 3, 4, 5])","f4069c11":"rfm['monetary_score'] = pd.qcut(rfm['monetary'], 5, [1, 2, 3, 4, 5])","cb9abab5":"rfm[\"RFM_SCORE\"] = (rfm['recency_score'].astype(str) +\n                    rfm['frequency_score'].astype(str))","e13040cd":"rfm.head()","bc1504ab":"seg_map = {\n    r'[1-2][1-2]': 'hibernating',\n    r'[1-2][3-4]': 'at_Risk',\n    r'[1-2]5': 'cant_loose',\n    r'3[1-2]': 'about_to_sleep',\n    r'33': 'need_attention',\n    r'[3-4][4-5]': 'loyal_customers',\n    r'41': 'promising',\n    r'51': 'new_customers',\n    r'[4-5][2-3]': 'potential_loyalists',\n    r'5[4-5]': 'champions'\n}","83a86059":"rfm['segment'] = rfm['RFM_SCORE'].replace(seg_map, regex=True)","5f6ef39e":"rfm.head()","14c95b19":"rfm[[\"segment\", \"recency\", \"frequency\", \"monetary\"]].groupby(\"segment\").agg([\"mean\", \"count\"])","0993c19e":"**G\u00f6rev 2 - RFM Metriklerinin Hesaplanmas\u0131**","4bb54870":"'Champions' segmentindeki ki\u015filer ile ileti\u015fim kurmak kendilerini de\u011ferli ve takdir edilmi\u015f ki\u015filer olarak hissettirecektir. Bu m\u00fc\u015fteriler muhtemelen toplam gelirlerin orant\u0131s\u0131z olarak y\u00fcksek bir y\u00fczdesini olu\u015fturmaktad\u0131r ve bu nedenle onlar\u0131 mutlu etmeye odaklanmak en b\u00fcy\u00fck \u00f6ncelik olmal\u0131d\u0131r. Bireysel tercihlerini ve yak\u0131nl\u0131klar\u0131n\u0131 daha fazla analiz ederek, daha ki\u015fiselle\u015ftirilmi\u015f mesajla\u015fma i\u00e7in ek f\u0131rsatlar sa\u011flayacakt\u0131r.\n","9c4bf9a0":"**G\u00f6rev 1 - Veriyi anlama ve haz\u0131rlama**","ab4040a9":"**G\u00f6rev 3 - RFM skorlar\u0131n\u0131n olu\u015fturulmas\u0131 ve tek bir de\u011fi\u015fkene \u00e7evrilmesi**","860ae6ee":"\u00d6nemli buldu\u011funuz 3 segmenti se\u00e7iniz. Bu \u00fc\u00e7 segmenti;\n- Hem aksiyon kararlar\u0131 a\u00e7\u0131s\u0131ndan,\n- Hem de segmentlerin yap\u0131s\u0131 a\u00e7\u0131s\u0131ndan (ortalama RFM de\u011ferleri) yorumlay\u0131n\u0131z.\n","726ce905":"Recency, Frequency ve Monetary tan\u0131mlar\u0131n\u0131 yap\u0131n\u0131z.\n* Recency = S\u0131cakl\u0131k (M\u00fc\u015fteri ka\u00e7 g\u00fcn \u00f6nce geldi?)\n* Frequency = Frekans (M\u00fc\u015fteri ka\u00e7 tane al\u0131\u015fveri\u015f yapt\u0131?)\n* Monetary = Parasal (M\u00fc\u015fterinin b\u0131rakt\u0131\u011f\u0131 parasal de\u011fer?)\n\n* M\u00fc\u015fteri \u00f6zelinde Recency, Frequency ve Monetary metriklerini groupby, agg ve lambda ile hesaplay\u0131n\u0131z.\n* Hesaplad\u0131\u011f\u0131n\u0131z metrikleri rfm isimli bir de\u011fi\u015fkene atay\u0131n\u0131z.\n* Olu\u015fturdu\u011funuz metriklerin isimlerini recency, frequency ve monetary olarak de\u011fi\u015ftiriniz.\n* rfm dataframe\u2019ini olu\u015fturduktan sonra veri setini \"monetary>0\" olacak \u015fekilde filtreleyiniz.\n","e2ce628b":"Olu\u015fturulan RFM skorlar\u0131n daha a\u00e7\u0131klanabilir olmas\u0131 i\u00e7in segment tan\u0131mlamalar\u0131 yap\u0131n\u0131z.","32764fe0":"'need attention' segmentinde 187 ki\u015fi bulunmakta, ortalama olarak en son al\u0131\u015fveri\u015fleri 52 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f, al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 2, 897 birim harcamalar\u0131 olmu\u015f. Yeniden etkinle\u015ftirerek al\u0131\u015fveri\u015f yapmalar\u0131n\u0131 sa\u011flamak i\u00e7in s\u0131n\u0131rl\u0131 s\u00fcreli indirimler veya ge\u00e7mi\u015f sat\u0131n almalar\u0131na g\u00f6re \u00f6neriler sunulabilir.","1d7afd2e":"* Recency, Frequency ve Monetary metriklerini qcut yard\u0131m\u0131 ile 1-5 aras\u0131nda skorlara \u00e7eviriniz.\n* Bu skorlar\u0131 recency_score, frequency_score ve monetary_score olarak kaydediniz.\n","49237f99":"Olu\u015fan 2 farkl\u0131 de\u011fi\u015fkenin de\u011ferini tek bir de\u011fi\u015fken olarak ifade ediniz ve RFM_SCORE olarak kaydediniz.\n","b7f5abfe":"**G\u00f6rev 4 - RFM skorlar\u0131n\u0131n segment olarak tan\u0131mlanmas\u0131**","12753d48":"**G\u00f6rev 5 - Aksiyon Zaman\u0131**","19b718dc":"'cant loose' grubu yani uzun s\u00fcredir al\u0131\u015fveri\u015f yapmam\u0131\u015f fakat eskiden s\u0131k\u00e7a al\u0131\u015fveri\u015f ger\u00e7ekle\u015ftirmi\u015f olanlar. Bu segmentte 63 ki\u015fi bulunmakta, ortalama olarak en son al\u0131\u015fveri\u015fleri 132 g\u00fcn \u00f6nce ger\u00e7ekle\u015fmi\u015f, al\u0131\u015fveri\u015f s\u0131kl\u0131klar\u0131 8, 2796 birim harcamalar\u0131 olmu\u015f. Bu segment i\u00e7in yeni \u00fcr\u00fcnleri onlara \u00f6nererek veya bu s\u0131n\u0131fa \u00f6zel promosyonlar, k\u00fc\u00e7\u00fck \u00e7apl\u0131 para puanlar verilerek geri kazanabiliriz."}}