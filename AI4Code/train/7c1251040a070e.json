{"cell_type":{"602e196b":"code","79223373":"code","7b534b6a":"code","eab82912":"code","19b5776a":"code","caa524a8":"code","79261217":"code","d38af954":"code","56818a4c":"code","6079fba6":"code","d80c3df5":"code","e1a8fbbc":"code","9b9c89df":"code","643cd469":"code","13c81884":"code","fe648bb7":"code","231c7692":"code","e48e9b6c":"code","2d18b606":"code","6c2000a0":"code","bd3e2096":"code","ac0208ed":"code","9daf5a7d":"code","3de96c1c":"code","b4e05a99":"code","f7b33381":"code","f844a71b":"code","f860a5bd":"code","03c6a71f":"code","304164e2":"code","b40767f5":"code","fb0ad0e6":"code","0f8965f2":"code","4fd25cac":"code","dbf2ce9f":"code","7408690e":"markdown","e8db9ad7":"markdown","d7368fda":"markdown","2cfc3d82":"markdown","753ae203":"markdown","be2c4045":"markdown","3d130b6b":"markdown","3062a902":"markdown","6c723051":"markdown","19423a01":"markdown","2c9edd16":"markdown","6bcebdd0":"markdown","5e67b0a3":"markdown","da5390a2":"markdown"},"source":{"602e196b":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport missingno as msno\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings(\"ignore\")","79223373":"df = pd.read_excel('..\/input\/covid19\/dataset.xlsx')","7b534b6a":"df['SARS-Cov-2 exam result'].value_counts().plot.barh()\n\ndf.rename(columns = {'SARS-Cov-2 exam result': 'target'}, inplace = True)\n\ndf['target'] = df.target.map({'negative': 0, 'positive': 1})\n\ndf.target.isnull().any()","eab82912":"# checking null values\nmsno.bar(df, figsize=(16, 4))","19b5776a":"df_columns = df.isnull().mean()","caa524a8":"df_columns.sort_values()[:30]","79261217":"interest_columns = df_columns[df_columns == df_columns.sort_values()[8]].index.values\ndf1 = df.loc[:, interest_columns]","d38af954":"np.random.seed(24)","56818a4c":"df1.sample(4)","6079fba6":"(len(df1) - len(df1.dropna()))\/len(df1)","d80c3df5":"interest_columns = df_columns[df_columns == df_columns.sort_values()[10]].index.values\ndf2 = df.loc[:, interest_columns]","e1a8fbbc":"(len(df2) - len(df2.dropna()))\/len(df2)","9b9c89df":"interest_columns = df_columns[df_columns == df_columns.sort_values()[29]].index.values\ndf3 = df.loc[:, interest_columns]","643cd469":"(len(df3) - len(df3.dropna()))\/len(df3)","13c81884":"df2.sample(6)","fe648bb7":"df3.sample(6)","231c7692":"# Block now represents the set of exams that the patient did\ndf['block'] = df.notnull().apply(lambda x: x.astype(int).astype(str).sum()  ,axis = 1)","e48e9b6c":"df.iloc[:4, :]","2d18b606":"df.groupby('block').target.count().sort_values(ascending = False).reset_index()[:20]","6c2000a0":"not_null = df.notnull().values","bd3e2096":"not_made = df3.Platelets.isnull()","ac0208ed":"df.target[not_made].mean()","9daf5a7d":"df.target[~not_made].mean()","3de96c1c":"df3['age'] = df['Patient age quantile']\ndf3['target'] = df['target']","b4e05a99":"df3.dropna(inplace = True)\ndf3.reset_index(inplace = True, drop = True)\ndf3.head()","f7b33381":"from sklearn.preprocessing import StandardScaler","f844a71b":"scaler = StandardScaler()\ndf3.iloc[:, :11] = scaler.fit_transform(df3.iloc[:, :11])","f860a5bd":"df3.iloc[:, :11].head()","03c6a71f":"import scipy.cluster.hierarchy as shc\n\nplt.figure(figsize = (10, 7))\n\ndend = shc.dendrogram(shc.linkage(df3.iloc[:, :11], method = 'ward'))","304164e2":"from sklearn.cluster import AgglomerativeClustering\n\ncluster = AgglomerativeClustering(n_clusters = 5, affinity = 'euclidean', linkage = 'ward')\n","b40767f5":"df3['cluster'] = cluster.fit_predict(df3.iloc[:, :11])","fb0ad0e6":"df3.groupby('cluster').agg({'target': {'media': np.mean, 'n': lambda x: x.count()}})","0f8965f2":"df3.iloc[:, :11] = scaler.inverse_transform(df3.iloc[:, :11])","4fd25cac":"df3.groupby('cluster').mean().sort_values('target')","dbf2ce9f":"Still necessary study the other blocks of exams.","7408690e":"## Using a test classifier","e8db9ad7":"First I am gonna work on the third block of exams, because of its numerical format and the relevance showed on previous notebooks of the leukocytes.","d7368fda":"We can see 5 major classes, let split it.","2cfc3d82":"- We are not gonna use the addmission columns. It should be a function of whether a preliminar diagnosis points to coronavirus or not.\n\n- There is a pattern indicating that there are blocks of exams. Lets check it.","753ae203":"## Description\n\nAdaptation of [previous notebook](https:\/\/www.kaggle.com\/ossamum\/exploratory-data-analysis-and-feature-importance)\n\nThis notebook has three sections: Importings; Processing; Exploiting and Classifying.","be2c4045":"Lets see the columns with the smallest numbers of null values.","3d130b6b":"It seems that there are some columns with all values equal null.","3062a902":"We are gonna study the effectiveness of each block of exams using hierarchical clustering as learning method and information gain as evaluation of effectivess of each block of exams.\n\nThe number of clusters can be choosen using some distance threshold.","6c723051":"### Importings","19423a01":"### Processing","2c9edd16":"Here we can see that people who made the third block of exams are realy more leaning to have the desease.","6bcebdd0":"### Classifying","5e67b0a3":"#### Baskets of Exames Exploiting","da5390a2":"### Exploiting"}}