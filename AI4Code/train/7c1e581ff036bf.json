{"cell_type":{"51af10ca":"code","cf42794c":"code","01850646":"code","a658add8":"code","3af48693":"code","5703500f":"code","36daf0e6":"code","8269f2cf":"code","1efb883d":"code","15a960fe":"code","95124cf1":"code","637a9b42":"code","576c7cda":"code","8ffcc850":"code","4e8aaf48":"code","4ac5eac1":"code","d98f3b7e":"code","17ced0c8":"code","729147e1":"code","ecb7c887":"code","329a7b37":"code","6dc520b4":"code","921e7fb3":"code","2a729ec6":"code","b06cef7d":"code","78b8121d":"code","aef2d929":"code","641295cb":"code","e632e70b":"code","08592e00":"code","e3dcd92f":"code","64f1568e":"code","8c2c4567":"code","03e4c17d":"code","8801ced4":"code","d7f31d32":"code","186d83d1":"code","44363843":"code","20c27804":"code","46789511":"code","39a0c124":"code","6e2ce17d":"code","ef43144e":"code","06f9cbbd":"code","8b5a7d86":"code","b18dcf65":"code","4603fab1":"code","d9ef09e4":"code","3f136da3":"code","823d4e40":"code","bb6f85c6":"code","b93b3c56":"code","eceeec10":"code","c5a8d55c":"code","cab4d66f":"code","0d8c75d5":"code","bec21db9":"code","bf8e5d06":"code","4befdcd5":"code","6ef5e9a7":"code","60064eb4":"code","7a9c1803":"code","9b1fb6a8":"code","61d145f0":"code","ace1ddda":"code","7cf0ae29":"code","cf070510":"code","8fc6561b":"code","3cdfa9f5":"code","e0f4e5a7":"code","542b1f99":"code","50306b7a":"code","cae06171":"code","5f12fce3":"code","2ce50cc8":"code","5d3f3ab4":"code","6a1dc116":"code","ba583444":"code","662bc2b7":"code","a1c9d48a":"code","059db930":"code","fb1060d0":"code","e859a1f6":"code","2f78b5bd":"code","4e391924":"code","151de6c4":"code","79b15a4e":"code","eba27bf4":"code","f91e5ce7":"code","c9279826":"code","b694b234":"code","2c9c839d":"code","2455f1b8":"code","09311867":"code","836f6e8d":"code","addfae92":"code","41de22bc":"markdown","123a88d1":"markdown","46088655":"markdown","484f82bc":"markdown","cd9dbdb5":"markdown","7e0646d8":"markdown","c4cdcb52":"markdown","2850b623":"markdown","14ea0948":"markdown","8fc2eeb5":"markdown","daa8fa93":"markdown","0877832a":"markdown","58c50f51":"markdown","3f9718ef":"markdown","e61fe79d":"markdown","25b7d4ef":"markdown","6b785eff":"markdown","3a03a147":"markdown","d32de8e6":"markdown","fb8f6db5":"markdown","322aaa3b":"markdown","8c1d5afb":"markdown","589199f7":"markdown","2cfcb51e":"markdown","99bedc57":"markdown","f692ecec":"markdown","4efa0f9c":"markdown","10841be6":"markdown","94afd720":"markdown","acd691ed":"markdown","dac6b5dc":"markdown","941cd68c":"markdown","b866572c":"markdown","65fa4776":"markdown","eab7affc":"markdown","79ef6b61":"markdown","77cd8b8b":"markdown","c16603f9":"markdown","f9044bc7":"markdown"},"source":{"51af10ca":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport os","cf42794c":"files=os.listdir(r'..\/input\/uber-data-analysis-for-year-201415\/uber-pickups-in-new-york-city\/')\nfiles","01850646":"files.remove('other-Carmel_B00256.csv')\n","a658add8":"files.remove('Uber-Jan-Feb-FOIL.csv')\n","3af48693":"files.remove('other-American_B01362.csv')\n","5703500f":"files.remove('other-Skyline_B00111.csv')\n","36daf0e6":"files.remove('other-Lyft_B02510.csv')\n","8269f2cf":"files.remove('other-Highclass_B01717.csv')\n","1efb883d":"files.remove('other-Firstclass_B01536.csv')\n","15a960fe":"files.remove('other-Diplo_B01196.csv')\n","95124cf1":"files.remove('other-Dial7_B00887.csv')\n","637a9b42":"files.remove('other-FHV-services_jan-aug-2015.csv')","576c7cda":"files.remove('other-Prestige_B01338.csv')","8ffcc850":"files.remove('other-Federal_02216.csv')","4e8aaf48":"files.remove('uber-raw-data-janjune-15.csv')","4ac5eac1":"files","d98f3b7e":"files","17ced0c8":"path=r'..\/input\/uber-data-analysis-for-year-201415\/uber-pickups-in-new-york-city'\n\n#blank dataframe\nfinal=pd.DataFrame()\n\nfor file in files:\n    df=pd.read_csv(path+\"\/\"+file,encoding='utf-8')\n    final=pd.concat([df,final])","729147e1":"final.shape","ecb7c887":"df=final.copy()","329a7b37":"df.head()","6dc520b4":"df.shape","921e7fb3":"df.dtypes","2a729ec6":"\ndf['Date\/Time'] = pd.to_datetime(df['Date\/Time'], format=\"%m\/%d\/%Y %H:%M:%S\")","b06cef7d":"df.dtypes","78b8121d":"\ndf['weekday']=df['Date\/Time'].dt.day_name()\ndf['day']=df['Date\/Time'].dt.day\ndf['minute']=df['Date\/Time'].dt.minute\ndf['month']=df['Date\/Time'].dt.month\ndf['hour']=df['Date\/Time'].dt.hour","aef2d929":"df.dtypes","641295cb":"df.head()","e632e70b":"df['Base'].unique()","08592e00":"df['day'].unique()","e3dcd92f":"df['weekday'].unique()","64f1568e":"df['weekday'].value_counts().index","8c2c4567":"df['weekday'].value_counts().values","03e4c17d":"import plotly.express as px","8801ced4":"px.bar(x=df['weekday'].value_counts().index,\n      y=df['weekday'].value_counts().values)","d7f31d32":"plt.hist(df['hour'])","186d83d1":"for i,month in enumerate(df['month'].unique()):\n    print(month)","44363843":"\nplt.figure(figsize=(25,25))\nfor i,month in enumerate(df['month'].unique()):\n    plt.subplot(3,2,i+1)\n    df[df['month']==month]['hour'].hist()\n","20c27804":"for i in df['month'].unique():\n    plt.figure(figsize=(5,3))\n    df[df['month']==i]['hour'].hist()\n    ","46789511":"import plotly.graph_objs as go","39a0c124":"!pip install chart_studio","6e2ce17d":"import chart_studio.plotly as py\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot","ef43144e":"trace1 = go.Bar( \n        x = df.groupby('month')['hour'].sum().index,\n        y = df.groupby('month')['hour'].sum(),\n        name= 'Priority')\niplot([trace1])","06f9cbbd":"plt.figure(figsize=(10,8))\nplt.hist(df['day'], bins=30, rwidth=0.8, range=(0.5, 30.5))\nplt.xlabel('date of the month')\nplt.ylabel('Total Journeys')\nplt.title('Journeys by Month Day')","8b5a7d86":"plt.figure(figsize=(20,8))\nfor i,month in enumerate(df['month'].unique(),1):\n    plt.subplot(3,2,i)\n    df_out=df[df['month']==month]\n    plt.hist(df_out['day'])\n    plt.xlabel('days in month'.format(i))\n    plt.ylabel('total rides')","b18dcf65":"sns.set_style(style='whitegrid')\nsns.pointplot(x=\"hour\",y=\"Lat\",data=df)","4603fab1":"ax=sns.pointplot(x=\"hour\",y=\"Lat\", hue=\"weekday\",data=df)\nax.set_title('hoursoffday vs latiitide of passenger')","d9ef09e4":"df.head()","3f136da3":"df['Base'].head()","823d4e40":"df.groupby(['Base','month'])['Date\/Time'].count()","bb6f85c6":"base=df.groupby(['Base','month'])['Date\/Time'].count().reset_index()\nbase","b93b3c56":"plt.figure(figsize=(10,6))\nsns.lineplot(x='month',y='Date\/Time',hue='Base',data=base)","eceeec10":"def count_rows(rows):\n    return len(rows)","c5a8d55c":"by_cross = df.groupby(['weekday','hour']).apply(count_rows)\nby_cross","cab4d66f":"pivot=by_cross.unstack()\npivot","0d8c75d5":"plt.figure(figsize=(10,6))\nsns.heatmap(pivot, annot=False)","bec21db9":"df.head()","bf8e5d06":"def heatmap(col1,col2):\n    by_cross = df.groupby([col1,col2]).apply(lambda x:len(x))\n    pivot=by_cross.unstack()\n    plt.figure(figsize=(10,6))\n    return sns.heatmap(pivot,annot=False)","4befdcd5":"## validating above Analysis through Heatmap\nheatmap('day','hour')","6ef5e9a7":"heatmap('day','month')","60064eb4":"df[df['month']==4]","7a9c1803":"heatmap('weekday','month')","9b1fb6a8":"plt.figure(figsize=(10,6))\n\nplt.plot(df['Lon'], df['Lat'],'r+', ms=0.5)\nplt.xlim(-74.2, -73.7)\nplt.ylim(40.6,41)","61d145f0":"df.head()","ace1ddda":"df_out=df[df['weekday']=='Sunday']\ndf_out.head()","7cf0ae29":"df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()","cf070510":"!pip install folium","8fc6561b":"from folium.plugins import HeatMap","3cdfa9f5":"import folium\nfrom folium.plugins import HeatMap\nbasemap=folium.Map()","e0f4e5a7":"HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\nbasemap","542b1f99":"def plot(df,day):\n    df_out=df[df['weekday']==day]\n    df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()\n    HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\n    return basemap\n","50306b7a":"plot(df,'Sunday')","cae06171":"uber_15 = pd.read_csv(r'..\/input\/uber-data-analysis-for-year-201415\/uber-pickups-in-new-york-city\/uber-raw-data-janjune-15.csv',encoding='utf-8')\nuber_15.head()","5f12fce3":"uber_15.shape","2ce50cc8":"#Checking the minimum date in the uber_15\nuber_15['Pickup_date'].min()","5d3f3ab4":"#Checking the maximum date in the uber_15\nuber_15['Pickup_date'].max()","6a1dc116":"uber_15['Pickup_date'] =  pd.to_datetime(uber_15['Pickup_date'], format='%Y-%m-%d %H:%M:%S')","ba583444":"uber_15['weekday']=uber_15['Pickup_date'].dt.day_name()\nuber_15['day']=uber_15['Pickup_date'].dt.day\nuber_15['minute']=uber_15['Pickup_date'].dt.minute\nuber_15['month']=uber_15['Pickup_date'].dt.month\nuber_15['hour']=uber_15['Pickup_date'].dt.hour","662bc2b7":"uber_15.head()","a1c9d48a":"px.bar(x=uber_15['month'].value_counts().index,\n           y=uber_15['month'].value_counts().values)","059db930":"plt.figure(figsize=(15,5))\nsns.countplot(uber_15['hour'])","fb1060d0":"uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count()","e859a1f6":"uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count().reset_index()","2f78b5bd":"summary=uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count().reset_index()","4e391924":"summary=summary.rename(columns = {'Pickup_date':'Counts'})\nsummary","151de6c4":"plt.figure(figsize=(10,6))\nsns.pointplot(x=\"hour\", y=\"Counts\", hue=\"weekday\", data=summary)","79b15a4e":"uber_foil=pd.read_csv(r'..\/input\/uber-data-analysis-for-year-201415\/uber-pickups-in-new-york-city\/Uber-Jan-Feb-FOIL.csv')","eba27bf4":"uber_foil.head()","f91e5ce7":"uber_foil.shape","c9279826":"uber_foil['dispatching_base_number'].unique()","b694b234":"sns.boxplot(x = 'dispatching_base_number', y = 'active_vehicles', data = uber_foil)","2c9c839d":"sns.boxplot(x = 'dispatching_base_number', y = 'trips', data = uber_foil)","2455f1b8":"# Finding the ratio of trips\/active_vehicles\nuber_foil['trips\/vehicle'] = uber_foil['trips']\/uber_foil['active_vehicles']","09311867":"uber_foil.head()","836f6e8d":"uber_foil.set_index('date')","addfae92":"plt.figure(figsize=(10,6))\nuber_foil.set_index('date').groupby(['dispatching_base_number'])['trips\/vehicle'].plot()\nplt.ylabel('Average trips\/vehicle')\nplt.title('Demand vs Supply chart (Date-wise)')\nplt.legend()","41de22bc":"#### Analysing the results\n#### We observe that the number of trips increases each month, we can say that from April to September 2014, Uber was in a continuous improvement process.","123a88d1":"#### seems to have more number of trips in B02764","46088655":"### perform Spatial Analysis using heatmap to get a clear cut of Rush on Sunday(Weekend)","484f82bc":"#### Analysis of Journey of Each  Day","cd9dbdb5":"##### Loading Uber-Jan-Feb-FOIL.csv","7e0646d8":"##### creating heatmap so that it can be easily visualize","c4cdcb52":"##### adding hue params","2850b623":"#### seems to have highest sales on Thursday","14ea0948":"#### Analysis of Total rides month wise","8fc2eeb5":"#### We can see that the number of Uber pickup has been steadily increasing throughout the first half of 2015 in NYC","daa8fa93":"#### to analyse which base number gets popular by month name","0877832a":"## Heatmap by Hour and Weekday.","58c50f51":"##### The globe is split into an imaginary 360 sections from both top to bottom (north to south) and 180 sections from side to side (west to east). The sections running from top to bottom on a globe are called longitude, and the sections running from side to side on a globe are called latitude.\n\n\n##### Latitude is the measurement of distance north or south of the Equator.\n\n##### Every location on earth has a global address. Because the address is in numbers, people can communicate about location no matter what language they might speak. A global address is given as two numbers called coordinates. The two numbers are a location's latitude number and its longitude number (\"Lat\/Long\").","3f9718ef":"##### how Average trips\/vehicle inc\/decreases with dates with each of base umber","e61fe79d":"#### Analysis of Location data points\u00b6","25b7d4ef":"#### Analysing Rush in New york City","6b785eff":"### Loading Data\u00b6","3a03a147":"PLEASE UPVOTE TO SHOW SUPPORT. I AM JUST A LEARNER.","d32de8e6":"##### Lat : The latitude of the Uber pickup\n\n##### Lon : The longitude of the Uber pickup\n\n##### Base : The TLC base company code affiliated with the Uber pickup","fb8f6db5":"<h1> Analysis of Jan-June uber_15 <\/h1>","322aaa3b":"###  Data Preparation\u00b6","8c1d5afb":"### getting Rush in hour ","589199f7":"##### Uber pickups by the month in NYC","2cfcb51e":"#### seems to have more number of Active Vehicles in B02764","99bedc57":"#### analysis of which month has max rides","f692ecec":"#### Analysis of Rush of each hour in each month","4efa0f9c":"##### group the data by Weekday and hour","10841be6":"#### create pivot_tables","94afd720":"## Data Loading and Preparation\u00b6","acd691ed":"##### Lets create a function for a specific day","dac6b5dc":"#### It peaks during evening time when people are logging off from work","941cd68c":"##### We can see a number of hot spots here. Midtown Manhattan is clearly a huge bright spot.\n##### & these are made from Midtown to Lower Manhattan.\n##### Followed by Upper Manhattan and the Heights of Brooklyn.\n","b866572c":"#### to analyse which base number gets popular by month name","65fa4776":"### Analysing In-Depth Analysis of Rush in New york City Day & hour wise","eab7affc":"#### Analysis of journey by Week-days","79ef6b61":"##### simplest way of creating pivot tables,first of all call groupby on 2 columns so that we will get groups \n##### df.groupby(['weekday','hour']).apply(lambda x: len(x)), now \"weekday\" becomes rows and \"hour\" becomes cols\n##### & then call unstack","77cd8b8b":"##### Interestingly, after the morning rush, the number of Uber pickups doesn't dip much throughout the rest of the morning and early afternoon. There is significantly more demand in the evening than the daytime. Let's investigate to see if there's a difference in hourly pattern for different days of the week.","c16603f9":"#### 2 Cross Analysis\n#### Through our exploration we are going to visualize:\n\n\n#### 1.Heatmap by Hour and Weekday.\n#### 2.Heatmap by Hour and Day.\n#### 3.Heatmap by Month and Day.\n#### 4.Heatmap by Month and Weekday.","f9044bc7":"### Analysis by Hour"}}