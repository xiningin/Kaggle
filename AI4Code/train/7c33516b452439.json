{"cell_type":{"22148302":"code","30151018":"code","05b1d9c5":"code","91d2737e":"code","4a00e15e":"code","31e7879a":"code","735102e5":"code","99615f92":"code","9e95c2ba":"code","aafe5017":"code","9216f471":"code","d20f4337":"code","fd0710d2":"code","1cf26b8f":"code","878b45e0":"code","15f3670b":"code","41d64577":"code","59d50125":"code","026be510":"code","b07aacaf":"code","1688219e":"code","720e34ce":"code","008f8602":"markdown"},"source":{"22148302":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom statsmodels.graphics.regressionplots import influence_plot\nimport statsmodels.formula.api as smf\nimport numpy as np","30151018":"#Read the data\ncars = pd.read_csv(\"ToyotaCorolla.csv\")\ncars.head()","05b1d9c5":"cars1=cars.drop(cars.columns.difference([\"Price\",\"Age_08_04\",\"KM\",\"HP\",\"cc\",\"Quarterly_Tax\"]), axis=1)","91d2737e":"cars1.head()","4a00e15e":"cars1.info()","31e7879a":"cars1.corr()","735102e5":"#Format the plot background and scatter plots for all the variables\nsns.set_style(style='darkgrid')\nsns.pairplot(cars1)","99615f92":"#Build model\nimport statsmodels.formula.api as smf \nmodel = smf.ols('Price~Age_08_04+KM+HP+cc+Quarterly_Tax',data=cars1).fit()","9e95c2ba":"#Coefficients\nmodel.params","aafe5017":"#t and p-Values\nprint(model.tvalues, '\\n', model.pvalues)","9216f471":"#R squared values\n(model.rsquared,model.rsquared_adj,model.aic)","d20f4337":"model_influence = model.get_influence()\n(c, _) = model_influence.cooks_distance","fd0710d2":"#Plot the influencers values using stem plot\nfig = plt.subplots(figsize=(20, 7))\nplt.stem(np.arange(len(cars1)), np.round(c, 3))\nplt.xlabel('Row index')\nplt.ylabel('Cooks Distance')\nplt.show()","1cf26b8f":"(np.argmax(c),np.max(c))","878b45e0":"car2=cars1.drop(cars1.index[[80]],axis=0)","15f3670b":"car3=car2.reset_index()","41d64577":"car4=car3.drop(['index'],axis=1)","59d50125":"import numpy as np\nfinal_ml_V = smf.ols('Price~np.log(Age_08_04)+KM+HP+cc+Quarterly_Tax',data=car4).fit()","026be510":"model_influence_V = final_ml_V.get_influence()\n(c_V, _) = model_influence_V.cooks_distance","b07aacaf":"fig= plt.subplots(figsize=(20,7))\nplt.stem(np.arange(len(car4)),np.round(c_V,3));\nplt.xlabel('Row index')\nplt.ylabel('Cooks Distance');","1688219e":"(np.argmax(c_V),np.max(c_V))","720e34ce":"(final_ml_V.rsquared,final_ml_V.aic)","008f8602":"# Scatterplot between variables along with histograms"}}