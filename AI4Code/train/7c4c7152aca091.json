{"cell_type":{"5e783dc9":"code","a8a00e50":"code","c05b2dee":"code","badd07ce":"code","5f2554d1":"code","f75c0f9c":"code","31db208a":"code","17a16dc8":"code","af37e8d6":"code","641aa3fa":"code","e5c479b4":"code","3bbee7e6":"code","83ab5053":"code","d2f8ed84":"code","f7a54a91":"code","b0c086f7":"code","5897c186":"code","111b5abf":"code","8e6c4351":"code","c00d1a02":"code","7f54bf1a":"code","1a135a65":"code","02a0c983":"code","76ea4512":"code","afdafe2e":"code","ae9ca375":"markdown","344d4c27":"markdown","40b4b976":"markdown","fd8bdeb1":"markdown","e54f6fdd":"markdown","b665e920":"markdown","ba0b89ab":"markdown","9ed90f4e":"markdown","4b8c0152":"markdown","89a6aaf2":"markdown","6846bd8c":"markdown","606028e4":"markdown","1d0cd1d6":"markdown","ba245f4c":"markdown","5e7ab408":"markdown","6b74d692":"markdown","82f65cb3":"markdown","5ee927cc":"markdown","5b882b1e":"markdown","8d16d4c5":"markdown"},"source":{"5e783dc9":"# import all libraries and dependencies for dataframe\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings(\"ignore\")\nfrom datetime import datetime, timedelta\n\n# import all libraries and dependencies for data visualization\npd.options.display.float_format='{:.4f}'.format\nplt.rcParams['figure.figsize'] = [8,8]\npd.set_option('display.max_columns', 500)\npd.set_option('display.max_colwidth', -1) \nsns.set(style='darkgrid')\nimport matplotlib.ticker as ticker\nimport matplotlib.ticker as plticker","a8a00e50":"# Reading the Uber file\n\npath = '..\/input\/uber-supplydemand-gap\/'\nfile = path + 'Uber Request Data.csv'\nuber = pd.read_csv(file)","c05b2dee":"uber.head()","badd07ce":"# Dimensions of df\n\nuber.shape","5f2554d1":"# Data description\n\nuber.describe()","f75c0f9c":"# Data info\n\nuber.info()","31db208a":"# check if any duplicates record exists\n\nsum(uber.duplicated(subset = \"Request id\")) == 0","17a16dc8":"# Calculating the Missing Values % contribution in DF\n\ndf_null = uber.isna().mean().round(4)*100\n\ndf_null.sort_values(ascending=False)","af37e8d6":"# Check datatypes of df\n\nuber.dtypes","641aa3fa":"# Converting the datatype of Request timestamp and Drop timestamp\n\nuber['Request timestamp'] = uber['Request timestamp'].astype(str)\nuber['Request timestamp'] = uber['Request timestamp'].str.replace('\/','-')\nuber['Request timestamp'] = pd.to_datetime(uber['Request timestamp'], dayfirst=True)","e5c479b4":"uber['Drop timestamp'] = uber['Drop timestamp'].astype(str)\nuber['Drop timestamp'] = uber['Drop timestamp'].str.replace('\/','-')\nuber['Drop timestamp'] = pd.to_datetime(uber['Drop timestamp'], dayfirst=True)","3bbee7e6":"# Extract the hour from the request timestamp\n\nreq_hr = uber['Request timestamp'].dt.hour\nreq_hr.value_counts()\nuber['Req hour'] = req_hr","83ab5053":"# Extract the day from request timestamp\n\nreq_day = uber['Request timestamp'].dt.day\nreq_day.value_counts()\nuber['Req day'] = req_day","d2f8ed84":"# Factor plot of hour and day with respect to Status\n\nsns.factorplot(x = 'Req hour', hue = 'Status', row = 'Req day', data = uber, kind = 'count', size=5, aspect=3)","f7a54a91":"# Factor plot of hour and day with respect to Pickup Point\n\nsns.factorplot(x = 'Req hour', hue = 'Pickup point', row = 'Req day', data = uber, kind = 'count', size=5, aspect=3)","b0c086f7":"# Aggregate count plot for all days w.r.t. to Pickup point\n\nsns.factorplot(x = 'Req hour', hue = 'Pickup point', data = uber, kind = 'count', size=5, aspect=3)","5897c186":"# Creating timeslots for various time period of the day\n\ntime_hour = [0,5,10,17,22,24]\ntime_slots =['Early Morning','Morning_Rush','Daytime','Evening_Rush','Late_Night']\nuber['Time_slot'] = pd.cut(uber['Req hour'], bins = time_hour, labels = time_slots)","111b5abf":"# Visualizing the different time slots wrt status\n\nplt.rcParams['figure.figsize'] = [12,8]\nsns.countplot(x = 'Time_slot', hue = 'Status', data = uber)\nplt.xlabel(\"Time Slots\",fontweight = 'bold')\nplt.ylabel(\"Number of occurence \",fontweight = 'bold')","8e6c4351":"# as we can see in the above plot the higest number of cancellations are in the \"Morning Rush\" time slot\nmorning_rush = uber[uber['Time_slot'] == 'Morning_Rush']\nsns.countplot(x = 'Pickup point', hue = 'Status', data = morning_rush)","c00d1a02":"# as we can see in the above plot the higest number of no cars available are in the \"Evening Rush\" time slot\nevening_rush = uber[uber['Time_slot'] == 'Evening_Rush']\nsns.countplot(x = 'Pickup point', hue = 'Status', data = evening_rush)","7f54bf1a":"# Let's create pie charts instead of a count plots\ndef pie_chart(dataframe):\n    \n    labels = dataframe.index.values\n    sizes = dataframe['Status'].values\n        \n    fig1, ax1 = plt.subplots()\n    ax1.pie(sizes, labels=labels, autopct='%1.1f%%', shadow=False, startangle=90)\n    ax1.axis('equal')  # Equal aspect ratio ensures that pie is drawn as a circle.\n    plt.show()","1a135a65":"# percentage breakup of status on the basis of pickup location\n# Status of trips @ Morning Rush where pickup point is City\ncity = uber.loc[(uber[\"Pickup point\"] == \"City\") & (uber.Time_slot == \"Morning_Rush\")]\ncity_count = pd.DataFrame(city.Status.value_counts())\npie_chart(city_count)","02a0c983":"# percentage breakup of status on the basis of pickup location\n# Status of trips @ Evening Rush where pickup point is City\ncity = uber.loc[(uber[\"Pickup point\"] == \"City\") & (uber.Time_slot == \"Evening_Rush\")]\ncity_count = pd.DataFrame(city.Status.value_counts())\npie_chart(city_count)","76ea4512":"# percentage breakup of status on the basis of pickup location\n# Status of trips @ Morning Rush where pickup point is Airport\ncity = uber.loc[(uber[\"Pickup point\"] == \"Airport\") & (uber.Time_slot == \"Morning_Rush\")]\ncity_count = pd.DataFrame(city.Status.value_counts())\npie_chart(city_count)","afdafe2e":"# percentage breakup of status on the basis of pickup location\n# Status of trips @ Evening Rush where pickup point is Airport\ncity = uber.loc[(uber[\"Pickup point\"] == \"Airport\") & (uber.Time_slot == \"Evening_Rush\")]\ncity_count = pd.DataFrame(city.Status.value_counts())\npie_chart(city_count)","ae9ca375":"#### Inference:\n- Cars not available situation arises mostly in evening hours.\n- Most of the Cancellation happens in morning hours.\n","344d4c27":"#### Inference:\n- More than 50% of `Drop time` is null because of Cancelled Trips which makes sense.\n- Around 40% of `Driver Id` is null because of Cancelled Trips which makes sense.","40b4b976":"![](https:\/\/i2-prod.mylondon.news\/article16106961.ece\/ALTERNATES\/s615\/0_Uber-pink-cars.jpg)","fd8bdeb1":"#### Inference:\n- The No cars available situation is a problem for the trip from airport to city in evening hours.","e54f6fdd":"## Business Understanding\n\nWe may have some experience of travelling to and from the airport. Have you ever used Uber or any other cab service for this travel? Did you at any time face the problem of cancellation by the driver or non-availability of cars?\n\n Well, if these are the problems faced by customers, these very issues also impact the business of Uber. If drivers cancel the request of riders or if cars are unavailable, Uber loses out on its revenue.","b665e920":"#### Inference:\n- No Cars available sistuation occurs primarly at evening hours from 5PM to 10 PM.\n- Frequent Cancellations were encountered in morning hours.","ba0b89ab":"![](https:\/\/gazettereview.com\/wp-content\/uploads\/2015\/10\/Uber-Logo.jpg)* ","9ed90f4e":"## Step 2: Data Cleansing and Preparation","4b8c0152":"## Uber Supply Demand Gap","89a6aaf2":"## Step 1: Reading and Understanding the Data","6846bd8c":"#### Inference:\n- The Cancellation situation is a problem for the trip from City to airport in  morning hours.","606028e4":"## Business Objectives\n\nThe aim of analysis is to identify the root cause of the problem (i.e. cancellation and non-availability of cars) and recommend ways to improve the situation. As a result of our analysis, we should be able to present to the client the root cause(s) and possible hypotheses of the problem(s) and recommend ways to improve them","1d0cd1d6":"## Step 3: Data Visualization","ba245f4c":"- We need to change the datatype of `Request timestamp` and `Drop timestamp` to datetime","5e7ab408":"#### Inference:\n- Most of the pickups encountered at daytime is from city suggesting more people travel to the airport in day hours.\n- The pickups from Airport at evening hours are more and it suggests most people land in evening hours. ","6b74d692":"#### We have analyized and drawn various insights of the trips.","82f65cb3":"#### If this Kernel helped you in any way, some <font color=\"red\"><b>UPVOTES<\/b><\/font> would be very much appreciated","5ee927cc":"### If this Kernel helped you in any way, some <font color=\"red\"><b>UPVOTES<\/b><\/font> would be very much appreciated","5b882b1e":"## Data Understanding\nThere are six attributes associated with each request made by a customer:\n\n- Request id: A unique identifier of the request<br>\n- Time of request: The date and time at which the customer made the trip request<br>\n- Drop-off time: The drop-off date and time, in case the trip was completed<br>\n- Pick-up point: The point from which the request was made<br>\n- Driver id: The unique identification number of the driver<br>\n- Status of the request: The final status of the trip, that can be either completed, cancelled by the driver or no cars available<br>\n\n**Note: In the analysis, only the trips to and from the airport are being considered.**","8d16d4c5":"#### This kernel is based on the assignment by IIITB collaborated with upgrad."}}