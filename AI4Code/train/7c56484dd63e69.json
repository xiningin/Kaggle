{"cell_type":{"8d943aa5":"code","e0f42867":"code","ab5647bb":"code","2be366b0":"code","3289c593":"code","99eaba50":"code","df00f918":"code","59cdddba":"code","dad1a940":"code","6d17fa68":"code","e07ad36c":"code","642c3217":"code","b7e83767":"code","8515a2df":"code","e9d4467c":"code","89d2f7d0":"code","79b8330d":"code","63e5f62f":"code","88333096":"code","c3fda58e":"code","9e10aa3e":"code","ff3bd307":"code","ef01e690":"code","3e9cd57c":"code","2056a92b":"code","0e1196e1":"code","001dddd1":"code","02f688d9":"code","55e0b6da":"code","7725572f":"code","a90dafea":"code","ca729fcd":"code","357481ae":"code","98e456e6":"code","1476e58b":"code","53f12ebe":"markdown","a45a0e54":"markdown","47fc9b75":"markdown","05d0150e":"markdown","18c5c2ed":"markdown","eade5e1c":"markdown","ee4be8f0":"markdown","e53f3540":"markdown","0859621f":"markdown","0792927b":"markdown","7d37660f":"markdown","70d7c424":"markdown","0f2b7d9c":"markdown","f9d3b49b":"markdown","a468cd35":"markdown","27fa68a5":"markdown","a00addda":"markdown","19198d7b":"markdown","f1050adc":"markdown","372cb459":"markdown","c34f326b":"markdown","a9bee120":"markdown","7912ea64":"markdown","f3871c4c":"markdown","6091737e":"markdown","ca52c506":"markdown","5a733876":"markdown","99f70e70":"markdown","e16c1bd7":"markdown","a0e88a0f":"markdown"},"source":{"8d943aa5":"import pandas as pd\nimport numpy as np\n \nimport matplotlib.pyplot as plt \nimport seaborn as sns \nfrom plotnine import *\n%matplotlib inline\n\nfrom scipy import stats\nfrom statsmodels import robust","e0f42867":"state = pd.read_csv('\/kaggle\/input\/state.csv')","ab5647bb":"state.shape","2be366b0":"state.head()","3289c593":"# mean\nstate['Population'].mean()","99eaba50":"# trimmed mean\nstats.trim_mean(state['Population'], 0.1)","df00f918":"# median\nstate['Population'].median()","59cdddba":"# weighted average\nnp.average(state[\"Murder.Rate\"], weights=state[\"Population\"])","dad1a940":"# weighted median\nstate.sort_values('Murder.Rate', inplace=True)\ncumsum = state.Population.cumsum()\ncutoff = state.Population.sum() \/ 2.0\nmedian_weight = state['Murder.Rate'][cumsum >= cutoff].iloc[0]\nmedian_weight","6d17fa68":"# standard deviation\nstate['Population'].std()","e07ad36c":"# Interquatile range (IQR)\nq1 = state['Population'].quantile(0.25)\nq3 = state['Population'].quantile(0.75)\niqr = q3-q1\niqr","642c3217":"# MAD\nrobust.mad(state['Population'])","b7e83767":"# homicide rate percentiles\nq_5 = round(state['Murder.Rate'].quantile(0.05),2)\nq_25 = round(state['Murder.Rate'].quantile(0.25),2)\nq_50 = round(state['Murder.Rate'].quantile(0.50),2)\nq_75 = round(state['Murder.Rate'].quantile(0.75),2)\nq_95 = round(state['Murder.Rate'].quantile(0.95),2)\nprint(f'5% {q_5} - 25% {q_25} - 50% {q_50} - 75% {q_75} - 95% {q_95}')","8515a2df":"# population data distribution by boxplot\nplt.figure(figsize=(5,8))\nsns.boxplot(y=state['Population']\/1000000)\nplt.title(\"Boxplot de Popula\u00e7\u00f5es por estado\")\nplt.show()","e9d4467c":"# show outliers\nstate.sort_values(by='Population', ascending=False).head(4)","89d2f7d0":"# histogram\nplt.hist(state['Population'], bins='auto')\nplt.xlabel('Population')\nplt.ylabel('Frequency')\nplt.show()","79b8330d":"sns.distplot(state['Murder.Rate'])\nplt.ylabel('Density')\nplt.show()","63e5f62f":"# loading news datasets for this analysis\nsp500_px = pd.read_csv('\/kaggle\/input\/sp500_data.csv')\nsp500_sym = pd.read_csv('\/kaggle\/input\/sp500_sectors.csv')","88333096":"sp500_px.head()","c3fda58e":"sp500_sym.head()","9e10aa3e":"sp500_px = sp500_px.rename(columns={'Unnamed: 0': 'DATA'})\n\netfs = sp500_px.loc[sp500_px['DATA'] > \"2012-07-01\", \n                    sp500_sym[sp500_sym['sector'] == 'etf']['symbol']]","ff3bd307":"sns.heatmap(etfs.corr(), vmin=-1, vmax=1,\n            cmap=sns.diverging_palette(20, 220, as_cmap=True))\nplt.show()","ef01e690":"#another way to plot using pandas\netfs_2 = etfs.corr()\netfs_2.style.background_gradient(cmap='coolwarm').set_precision(2)","3e9cd57c":"# positively correlated\nplt.xlabel('SPY')\nplt.ylabel('DIA')\nplt.scatter(etfs['SPY'], etfs['DIA'])\nplt.show()","2056a92b":"# negatively correlated\nplt.xlabel('SPY')\nplt.ylabel('VXX')\nplt.scatter(etfs['SPY'], etfs['VXX'])\nplt.show()","0e1196e1":"# no correlation\nplt.xlabel('XLV')\nplt.ylabel('GLD')\nplt.scatter(etfs['XLV'], etfs['GLD'])\nplt.show()","001dddd1":"# loading new dataset for this analysis\nkc_tax = pd.read_csv('\/kaggle\/input\/kc_tax.csv')\nkc_tax.head()","02f688d9":"# Removing very expensive and very small or large residences\nkc_tax0 = kc_tax.loc[(kc_tax.TaxAssessedValue < 750000) & \n                     (kc_tax.SqFtTotLiving > 100) & \n                     (kc_tax.SqFtTotLiving < 3500), :]\nkc_tax0.shape","55e0b6da":"kc_tax0.plot(kind='hexbin', x='SqFtTotLiving', y='TaxAssessedValue', sharex=False, gridsize=25)\nplt.xlabel('Finished Square Feet')\nplt.ylabel('Tax Assessed Value')\nplt.figure(figsize=(22,10))\nplt.show()","7725572f":"kc_tax_zip1 = kc_tax0.loc[(kc_tax0.ZipCode == 98188), :]\nkc_tax_zip2 = kc_tax0.loc[(kc_tax0.ZipCode == 98105), :]\nkc_tax_zip3 = kc_tax0.loc[(kc_tax0.ZipCode == 98108), :]\nkc_tax_zip4 = kc_tax0.loc[(kc_tax0.ZipCode == 98126), :]","a90dafea":"sns.set_style('white')\nsns.set_palette('dark')\nsns.set_context('talk')\n\nfig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, sharex=True, sharey=True, figsize=(12, 10))\nax1.hexbin(kc_tax_zip1.SqFtTotLiving, kc_tax_zip1.TaxAssessedValue, gridsize=20)\nax1.set_xlabel('zipcode = 98188')\n\nax2.hexbin(kc_tax_zip2.SqFtTotLiving, kc_tax_zip2.TaxAssessedValue, gridsize=20)\nax2.set_xlabel('zipcode = 98105')\n\nax3.hexbin(kc_tax_zip3.SqFtTotLiving, kc_tax_zip3.TaxAssessedValue, gridsize=20)\nax3.set_xlabel('zipcode = 98108')\n\nax4.hexbin(kc_tax_zip4.SqFtTotLiving, kc_tax_zip4.TaxAssessedValue, gridsize=20)\nax4.set_xlabel('zipcode = 98126')\n\nplt.show()","ca729fcd":"lc_loans = pd.read_csv('\/kaggle\/input\/lc_loans.csv')\nlc_loans.head()","357481ae":"x_tab = pd.crosstab(lc_loans.grade, lc_loans.status)\nx_tab['Total'] = pd.crosstab(lc_loans.grade, lc_loans.status).apply(lambda r: r.sum(), axis=1)\nx_tab","98e456e6":"airline_stats= pd.read_csv('\/kaggle\/input\/airline_stats.csv')\nairline_stats.sample(5)","1476e58b":"plt.figure(figsize=(12,10))\nsns.boxplot(x = airline_stats.airline, y = airline_stats.pct_carrier_delay)\nplt.ylabel(\"% di\u00e1rio de voos atrasados\")\nplt.show()","53f12ebe":"### Exploring Two or More Variables\n\nEstimators such as mean and variance, examine one variable at a time (univariate analysis).  \nCorrelation analysis is an important method that compares two variables (bivariate analysis).  \nWe will now see estimates and graphs with more than two variables (multivariate analysis).  \n\nHexagonal compartmentalization: Graph of two numerical variables with the records compartmentalized in hexagons.  \nContingency tables: Record counts between two or more categorical variables.","a45a0e54":"### Exploring Data Distribution\n\nEach of the estimates seen summarizes the data in a single number to describe the location and variability of the data.\n\nBoxplot: Graph to quickly visualize the data distribution.  \nFrequency table: Count of numerical values \u200b\u200bof data that fall in a set of intervals.  \nHistogram: Graph of the frequency table with the columns on the x axis and the count on the y axis.  \nDensity graph: Simplification of the histogram. Often used in Kernel density estimates.  ","47fc9b75":"#### A study on the book \"Practical Statistics for Data Scientists - 50 essential concepts\" - O'Reilly (CHAPTER 1) \n\n![image.png](attachment:image.png)","05d0150e":"#### Display population frequencies by state in Histograms**","18c5c2ed":"Columns on the x-axis and data count on the y-axis","eade5e1c":"### Correlation\n\nStudy of the correlation between predictors, and between predictors and a target variable.  \nThe variables X and Y are considered to be positively correlated if the high values \u200b\u200bof X follow the high values \u200b\u200bof Y, and the low values \u200b\u200bof X follow the low values \u200b\u200bof Y.  \nIf the high values \u200b\u200bof X accompany the low values \u200b\u200bof Y, and vice versa, the variables are negatively correlated.\n\nCorrelation coefficient: Metric that measures the level at which numerical variables are associated with each other (ranges from -1 to +1).  \nCorrelation matrix: Table in which variables are shown in both rows and columns, and cell values \u200b\u200bare the correlation between variables.  \nScatter diagram: Graph in which the x axis is the value of one variable and the y axis is the value of another.   Each point on the graph is a record. Standard way of viewing the relationship between two variables.  ","ee4be8f0":"#### Plot the scatterplot to visualize the relationship of two variables","e53f3540":"The median is 4 homicides per 100 thousand people, but there is variability: the 5\u00ba percentile is only 1.6, and the 95\u00ba percentile is 6.51.","0859621f":"#### Hexagonal compartment for tax values versus finished square meter","0792927b":"\nThe SPY and DIA etfs have a high correlation. Similarly QQQ and XLK.","7d37660f":"The lower and upper parts of the box are 75th and 25th percentiles. The median is shown on the horizontal line.  \nThe lines that extend from the top to the bottom indicate the variation of the data mass and are called wiskers (1.5 or 3.0 * IQR).  \nThe unique points outside the wiskers are the outliers.","70d7c424":"#### Calculate the mean, trimmed mean and median for the population","0f2b7d9c":"Alaska stands out for having less delays, while American has most of them.  \nAmerican's lower quartile is larger than Alaska's upper quartile.  \n\nKey ideas:  \nHexagonal compartment is a useful tool that allows the graphical study of two numerical variables at a time,   without being overwhelmed by huge amounts of data.  \nThe contingency table is the most common tool for observing the counts of two categorical variables.  \nBoxplots allow the registration of a numeric variable against a categorical variable.  ","f9d3b49b":"Dispersion charts are good when there is a relatively small amount of data. For data sets with hundreds of thousands, or millions of records, this chart would be very dense. In the hexagonal chart, the records are grouped into hexagonal compartments with a color indicating the number of records in that compartment.","a468cd35":"The graphs can be extended to more variables. The tax amount is higher for some postal codes.","27fa68a5":"#### Boxplots for categorical and numerical data\n\nSimple way to visually compare the distributions of a numeric variable grouped according to a categorical variable.\nFor example, compare how the percentage of flight delays varies between airlines.","a00addda":"Key ideas:  \nThe basic metric for localization is the average, but this can be sensitive to outliers.  \nOther metrics (median, trimmed mean) are more robust.","19198d7b":"Key ideas:  \nVariance and standard deviation are the most widely used variability statistics. Both are sensitive to outliers. \nOther metrics (mean absolute deviation and median median (MAD), and percentiles) are more robust.","f1050adc":"The mean is greater than the trimmed mean, which is greater than the median","372cb459":"Key ideas:  \nThe correlation coefficient is always between +1 (perfectly positive correlation) and -1 (perfectly negative correlation). 0 or close to that indicated no correlation.  \nVariables may have a non-linear association, in which case the correlation coefficient may not be a useful metric.","c34f326b":"#### Calculate the homicide rate percentiles and view the population data distribution by boxplot","a9bee120":"The image shows that the tax amount is higher in postal code 98105 than in 98108, for example.","7912ea64":"#### Calculate the variability estimates for population data (standard deviation, IQR and MAD)","f3871c4c":"#### Contingency tables for two categorical variables\n\nA simple way to summarize two categorical variables is the contingency table.","6091737e":"#### Display the correlation matrix of the daily returns of the largest index funds","ca52c506":"\n#### Calculate the average homicide rate for the country. Necessary to calculate the weighted average or median","5a733876":"This graph is a \u201csmoothed\u201d version of the histogram. The y-axis shows an estimate of the relative frequency of each value.   \nIn probabilistic terms, it is an estimate of the feature's probability density function.\n\nKey ideas:  \nThe frequency histogram records frequency counts on the y axis and values \u200b\u200bof variables on the x axis.  \nThe boxplot gives a quick idea of \u200b\u200bthe distribution of the data. It is usually used in side-by-side displays.","99f70e70":"### Location Estimates\nVariables with measurement or count data can have thousands of different values. A fundamental step in exploring the data is to define a \"typical value\" for each variable: an estimate of where most of the data is located (central trend)\n\nAverage: Sensitive to extreme values \u200b\u200b(outliers). Alternative - trimmed mean.  \nMedian: Robust location estimation, as it is not influenced by outliers who can forward the results.","e16c1bd7":"\n#### Chapter 1 - Exploratory Data Analysis (EDA)\n\n- Location Estimates\n- Variability Estimates\n- Exploring Data Distribution         \n- Percentiles and Boxplots\n- Histograms\n- Density Estimates\n- Binary and Categorical Data\n- Correlation\n- Scatter Plots\n- Exploring Two or More Variables\n","a0e88a0f":"### Variability Estimates\n\nLocation is only one dimension in summarizing a feature.\nA second dimension, variability, also called dispersion, measures whether data values \u200b\u200bare compressed or scattered.\n\nDeviations: Difference between the observed values \u200b\u200band the location estimate.  \nVariance: Sum of squares of deviations from the mean, divided by n-1.  \nStandard deviation: square root of the variance.  \nPercentile \/ Quantil: Value such P percent of values \u200b\u200bassume this value or less, and (100-P) percent assume this value or more.  \nInterquatile range (IQR): Difference between the 75\u00ba percentile and the 25\u00ba percentile.  \n\nVariance and standard deviation are especially sensitive to outliers, as they are based on quadratic deviations.\nAn estimate of rugged variability is the median absolute deviation from the median (MAD). Like the median, MAD is not influenced by extreme values."}}