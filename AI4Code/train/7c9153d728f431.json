{"cell_type":{"0d56708a":"code","ae3c979b":"code","04b6aaa2":"code","a7c6889f":"code","452f98a3":"code","2c8a6ea1":"code","7869d124":"code","c0404e74":"code","552d4ba3":"code","c729c2ca":"code","13a8934d":"code","f3b51553":"code","48c8454c":"code","6a1458e7":"code","eeaa9a4c":"markdown","32f4fc7a":"markdown","0d8301ef":"markdown","e7988c40":"markdown","d7876ff4":"markdown","3b32962f":"markdown","3dcc86a4":"markdown","2528e54a":"markdown","ec5eea7a":"markdown","387f9188":"markdown"},"source":{"0d56708a":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport plotly.graph_objects as go\nimport plotly.express as px\n\nfrom plotly.subplots import make_subplots","ae3c979b":"premier_df = pd.read_csv('\/kaggle\/input\/english-premier-league-transfers-20192020\/english_premier_league.csv')\npremier_df.head()","04b6aaa2":"premier_df.info()","a7c6889f":"premier_df.isnull().sum()","452f98a3":"premier_df.fee_cleaned = premier_df.fee_cleaned.fillna(0.0)","2c8a6ea1":"all_tm = pd.get_dummies(premier_df.transfer_movement).agg(sum)\nfig_movement = go.Figure(data=[\n    go.Pie(labels=all_tm.index, values=all_tm)\n])\nfig_movement.update_layout(height=400)\nfig_movement.show()","7869d124":"max_fee_player = premier_df.groupby('player_name').fee_cleaned.max().sort_values(ascending=True)[-30:]\n\npx.bar(x=max_fee_player.index, y=max_fee_player, color=max_fee_player)","c0404e74":"age_count = premier_df.drop_duplicates('player_name', keep='last').age.value_counts().sort_index()\n\nages_fig = go.Figure(data=[\n    go.Bar(x=age_count.index, y=age_count),\n    go.Scatter(x=age_count.index, y=age_count)\n])\nages_fig.update_layout(xaxis=dict(\n    tickmode='array',\n    tickvals=list(age_count.keys())\n))\nages_fig.show()","552d4ba3":"player_ages = premier_df[['age', 'player_name']].sort_values('age').reset_index(drop=True).drop_duplicates('player_name', keep='last')[-50:]\npx.bar(player_ages, x='player_name', y='age', color='age')","c729c2ca":"transfer_player_df = pd.get_dummies(premier_df[['club_name', 'transfer_movement']].set_index('club_name')).groupby('club_name').agg(sum)\n\nfig_tp = go.Figure(data=[\n    go.Bar(x=transfer_player_df.index, y=transfer_player_df.transfer_movement_in, name='IN'),\n    go.Bar(x=transfer_player_df.index, y=transfer_player_df.transfer_movement_out, name='OUT')\n])\nfig_tp.update_layout(title='Transfer player for each Team', xaxis_title='Club name', yaxis_title='Number')\nfig_tp.show()","13a8934d":"def _pull(values):\n    return [0.1 if v==values.max() else 0 for v in values]","f3b51553":"fee_by_position = premier_df.groupby('position').fee_cleaned.max()\nfig_position_fee = go.Figure(data=[\n    go.Pie(labels=fee_by_position.index, values=fee_by_position, pull=_pull(fee_by_position))\n])\nfig_position_fee.update_layout(height=500, title='Highest cost based on position')\nfig_position_fee.show()","48c8454c":"position_count = premier_df.drop_duplicates('player_name', keep='last').position.value_counts()\n\nposition_count_fig = go.Figure(data=[\n    go.Pie(labels=position_count.index, values=position_count, pull=_pull(position_count))\n])\nposition_count_fig.update_layout(height=500, title='Number of position players transferred')\nposition_count_fig.show()","6a1458e7":"fee_club_in = premier_df[premier_df.transfer_movement == 'in'].groupby('club_name').fee_cleaned.agg(sum)\nfee_club_out = premier_df[premier_df.transfer_movement == 'out'].groupby('club_name').fee_cleaned.agg(sum)\n\nfee_club_fig = go.Figure(data=[\n    go.Bar(x=fee_club_in.index, y=fee_club_in, name='In'),\n    go.Bar(x=fee_club_out.index, y=fee_club_out, name='Out')\n])\nfee_club_fig.update_layout(title='Clubs based on costs', xaxis_title='Club', yaxis_title='fee')\nfee_club_fig.show()","eeaa9a4c":"all transfer movement","32f4fc7a":"Top Player Transfers by Age","0d8301ef":"## Visualize the data","e7988c40":"## Import data","d7876ff4":"Top 30 Player Transfers by cost","3b32962f":"Clubs based on costs","3dcc86a4":"Number of position players transferred","2528e54a":"## Import libraries","ec5eea7a":"Highest cost based on position","387f9188":"Number of players transferred to each team"}}