{"cell_type":{"bc3356e0":"code","fe8d51df":"code","c648fa8e":"code","12e4198a":"code","ce7867be":"code","80f9c737":"code","8a44c14d":"code","1036f945":"code","65f4223f":"code","215ea879":"code","0e4dfdb1":"code","aa8a92cc":"code","1b822325":"code","179f9e0f":"code","97a9553f":"code","1bbe99dc":"code","065542f2":"code","bea17d3d":"code","d4f98322":"code","f8404654":"code","45e89f70":"code","e914530f":"code","cbfd7b23":"code","b66a2904":"code","829ba8d2":"code","b8314d32":"code","e036a81c":"code","6524bc05":"code","152c05cc":"code","43217ec2":"code","f96c0caf":"code","332e62e5":"code","bc8a729c":"code","01e0bee0":"code","5123bc18":"code","53742e72":"code","079a42ae":"code","26b4e549":"code","4219cbc8":"code","626d3f65":"code","ef36b058":"code","9abf5a58":"code","e4ed223f":"code","483d2eb9":"code","8aab7fcd":"code","87c09c84":"code","0fdc9bb7":"code","122bc9dc":"code","672d3c8b":"code","07f77912":"code","9557f891":"code","17caa489":"code","59381b5f":"code","b2f591c3":"code","ca6c6f62":"code","97a99989":"code","9f61b750":"code","62c0783d":"code","eaa31a02":"code","01bb3a17":"markdown","7122aaba":"markdown","933e4514":"markdown","a453ddeb":"markdown","af08880f":"markdown","175b19f2":"markdown","4cc582af":"markdown","7473fac7":"markdown","b289e4a3":"markdown","b8eebdd2":"markdown","76ba7898":"markdown","646e6a60":"markdown","bb3b23a7":"markdown","3b349d02":"markdown","680031a4":"markdown","2f4c5642":"markdown","d367104e":"markdown","d03cfdf1":"markdown","f4e19ae7":"markdown","d9cedb3c":"markdown","f406325a":"markdown","8d7b3771":"markdown","11dbf618":"markdown","f016293a":"markdown","a10ec287":"markdown","52b670d8":"markdown","0e3c42fe":"markdown","baad6720":"markdown","6a0b9bed":"markdown"},"source":{"bc3356e0":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport missingno as msno\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\n\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","fe8d51df":"df = pd.read_csv('..\/input\/memory-test-on-drugged-islanders-data\/Islander_data.csv')\ndf.head()","c648fa8e":"df.dtypes","12e4198a":"df.info()","ce7867be":"# PRINT UNIQUE VALUES FOR EACH COLUMN\n\nfor column in df.columns:\n        print(column)\n        print(df[column].unique())\n        print('')\n    ","80f9c737":"missing_percentage=df.isna().sum()*100\/df.shape[0]\nmissing_percentage","8a44c14d":"# BIN AGE GROUPS and DIFF CATEGORIES\n\ndf['age_cat'] = np.nan \ndf['diff_cat'] = np.nan\n\n\nfor col in [df]:\n    col.loc[(col['age'] >= 18) & (col['age'] <= 35), 'age_cat'] = 'young adult'\n    col.loc[(col['age'] > 35) & (col['age'] <= 55), 'age_cat'] = 'middle age'\n    col.loc[col['age'] > 55, 'age_cat'] = 'senior adult'\n    \n    col.loc[col['Diff'] > 0, 'diff_cat'] = 'increase'\n    col.loc[col['Diff'] < 0, 'diff_cat'] = 'decrease'\n    col.loc[col['Diff'] == 0, 'diff_cat'] = 'no change'\n\n    \n# CREATE FULL NAME COLUMN\n\ndf['full_name']= df['first_name'] + ' ' + df['last_name']\n\n    ","1036f945":"# DROP FIRST_NAME & LAST_NAME COLUMNS \ndf.drop(columns=['first_name', 'last_name'])\n\n# REORDER COLUMNS\ndf = df[['full_name', 'age', 'age_cat', 'Happy_Sad_group', 'Dosage', 'Drug', \n         'Mem_Score_Before', 'Mem_Score_After', 'Diff', 'diff_cat']]","65f4223f":"fig = make_subplots(rows=2, cols=1)\n\nfig.add_trace(go.Histogram(x=df['age'], name='AGE',xbins=dict(start=20, end=90, size=5)), \n              row=1, col=1)\n\nfig.add_trace(go.Histogram(x=df['age_cat'], name='AGE CATEGORES'), row=2, col=1)\n\nfig.update_layout(height=1000, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"AGE AND AGE CATEGORY COUNTS\")\nfig.show()","215ea879":"fig = px.pie(df, values=df.index, names='Happy_Sad_group')\nfig.update_layout(title_text='Happy\/Sad Distribution')\nfig.show()","0e4dfdb1":"fig = px.histogram(df, x=\"Dosage\")\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"DOSAGE DISTRIBUTION\")\n\nfig.show()","aa8a92cc":"fig = px.histogram(df, x=\"Drug\")\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"DRUG DISTRIBUTION\")\n\nfig.show()","1b822325":"y0 = df['Mem_Score_Before']\ny1 = df['Mem_Score_After']\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0, name='Before'))\nfig.add_trace(go.Box(y=y1, name='After'))\n\nfig.show()","179f9e0f":"fig = px.histogram(df, x=\"diff_cat\")\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"DIFFERENCE CATEGORIES\")\n\nfig.show()","97a9553f":"# Use pd.melt to transform our dataframe and make it more usable for creating the following visualizations\n\ndf_melt = pd.melt(df, id_vars=['Happy_Sad_group', 'age', 'age_cat'], value_vars=['Mem_Score_Before', 'Mem_Score_After'])\ndf_melt.rename(columns={'variable':'Mem_Score'}, inplace=True)","1bbe99dc":"fig = px.box(df_melt, x=\"age_cat\", y='value', color='Mem_Score', points=\"all\")\nfig.update_layout(height=500, \n                  width=900, \n                  title_text=\"Mem Score Before vs Age\")\nfig.show()\n\n","065542f2":"x0=df_melt['Happy_Sad_group'].loc[df_melt['Mem_Score'] == 'Mem_Score_Before']\nx1=df_melt['Happy_Sad_group'].loc[df_melt['Mem_Score'] == 'Mem_Score_After']\n\ny0 = df_melt[['value']].loc[df_melt['Mem_Score'] == 'Mem_Score_Before']\ny1 = df_melt[['value']].loc[df_melt['Mem_Score'] == 'Mem_Score_After']\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['value'], x=x0, name='Before', marker_size=3,  boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['value'], x=x1, name='After', marker_size=3, boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=600, \n                  width=1000,\n                  title_text='Mem_Score x Happy\/Sad Group',\n                  yaxis_title='Mem_Score',\n                  boxmode='group',\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=5,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)\n)\n\nfig.show()","bea17d3d":"fig = px.box(df, x=\"Drug\", y=\"Mem_Score_After\", color='Drug', points=\"all\")\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Mem Score After vs Drug\")\nfig.show()","d4f98322":"fig = px.scatter(df, x=\"Mem_Score_Before\", y=\"Mem_Score_After\", \n                 color=\"Drug\", size='Dosage', \n                 template='plotly_dark')\nfig.show()","f8404654":"drug_mem_avg = df.groupby(['Drug'])[['Mem_Score_Before', 'Mem_Score_After']].agg('mean')\ndrug_mem_avg.reset_index(inplace=True)\ndrug_mem_avg = pd.melt(drug_mem_avg, id_vars=['Drug'], value_vars=['Mem_Score_Before', 'Mem_Score_After'])\n\ndrug = ['Drug A', 'Drug T', 'Drug S']\nbefore = drug_mem_avg['value'].loc[drug_mem_avg['variable'] == 'Mem_Score_Before']\nafter = drug_mem_avg['value'].loc[drug_mem_avg['variable'] == 'Mem_Score_After']\n# drugs = drug_mem_avg['value'].loc[drug_mem_avg['Drug'] == 'S']\n\nfig = go.Figure(data=[go.Bar(name='Mem Before', x=drug, y=before, marker_color='mediumvioletred'),\n                      go.Bar(name='Mem After', x=drug, y=after, marker_color='dodgerblue')])\n\n# Change the bar mode\nfig.update_layout(barmode='group', \n                  title_text=\"Mem Score Comparison by Drug Type\")\nfig.show()","45e89f70":"x0=df['Drug'].loc[df['Dosage'] == 1]\nx1=df['Drug'].loc[df['Dosage'] == 2]\nx2=df['Drug'].loc[df['Dosage'] == 3]\n\ny0 = df[['Mem_Score_Before']].loc[df['Dosage'] == 1]\ny1 = df[['Mem_Score_Before']].loc[df['Dosage'] == 2]\ny2 = df[['Mem_Score_Before']].loc[df['Dosage'] == 3]\n\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Mem_Score_Before'], x=x0, name='1 Dose', marker_size=3,  boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Mem_Score_Before'], x=x1, name='2 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Mem_Score_Before'], x=x2, name='3 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=500, \n                  width=1000,\n                  title_text='Mem Score Before x Drug & Dosage',\n                  yaxis_title='Mem Score Before',\n                  boxmode='group',\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=10,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)\n)\n\nfig.show()","e914530f":"x0=df['Drug'].loc[df['Dosage'] == 1]\nx1=df['Drug'].loc[df['Dosage'] == 2]\nx2=df['Drug'].loc[df['Dosage'] == 3]\n\ny0 = df[['Mem_Score_After']].loc[df['Dosage'] == 1]\ny1 = df[['Mem_Score_After']].loc[df['Dosage'] == 2]\ny2 = df[['Mem_Score_After']].loc[df['Dosage'] == 3]\n\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Mem_Score_After'], x=x0, name='1 Dose', marker_size=3,  boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Mem_Score_After'], x=x1, name='2 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Mem_Score_After'], x=x2, name='3 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=500, \n                  width=1000,\n                  title_text='Mem Score After x Drug & Dosage',\n                  yaxis_title='Mem Score After',\n                  boxmode='group',\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=10,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)\n)\n\nfig.show()","cbfd7b23":"# Add histogram data\nx0 = df['Mem_Score_Before'].loc[df['Happy_Sad_group'] == 'H']\nx1 = df['Mem_Score_After'].loc[df['Happy_Sad_group'] == 'H']\n\nfig = make_subplots(rows=1, cols=2)\n\nbinstart = x0.min()\nbinend = x0.max()\n\ntrace0 = go.Histogram(x=x0, ybins=dict(start=20, end=120, size=10), name='Before')\ntrace1 = go.Histogram(x=x1, ybins=dict(start=20, end=120, size=10), name='After')\n\nfig.append_trace(trace0, 1, 1)\nfig.append_trace(trace1, 1, 2)\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Memory Score Before vs After of Happy Group\")\nfig.show()","b66a2904":"# Add histogram data\nx0 = df['Mem_Score_Before'].loc[df['Happy_Sad_group'] == 'S']\nx1 = df['Mem_Score_After'].loc[df['Happy_Sad_group'] == 'S']\n\nfig = make_subplots(rows=1, cols=2)\n\nbinstart = x0.min()\nbinend = x0.max()\n\ntrace0 = go.Histogram(x=x0, ybins=dict(start=20, end=120, size=10), name='Before')\ntrace1 = go.Histogram(x=x1, ybins=dict(start=20, end=120, size=10), name='After')\n\nfig.append_trace(trace0, 1, 1)\nfig.append_trace(trace1, 1, 2)\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Memory Score Before vs After of Sad Group\")\nfig.show()","829ba8d2":"mem_score_avg = df.groupby(['age_cat', 'Drug'])[['Mem_Score_Before', 'Mem_Score_After']].agg('mean')\nmem_score_avg.reset_index(inplace=True)\nmem_score_avg.rename(columns={'Mem_Score_Before':'avg_mem_score_before', \n                              'Mem_Score_After':'avg_mem_score_after'}, inplace=True)\nmem_score_avg = pd.melt(mem_score_avg, id_vars=['Drug', 'age_cat'], value_vars=['avg_mem_score_before', 'avg_mem_score_after'])\n\nmem_score_avg.rename(columns={\"variable\":\"avg_mem_score\"}, inplace=True)\nmem_score_avg.replace({'avg_mem_score_before': 'before', 'avg_mem_score_after':'after'}, inplace=True)\nmem_score_avg","b8314d32":"# Add histogram data\ny0 = df['Mem_Score_Before'].loc[df['Drug'] == 'A']\ny1 = df['Mem_Score_After'].loc[df['Drug'] == 'A']\n\nfig = make_subplots(rows=1, cols=2)\n\nbinstart = y0.min()\nbinend = y0.max()\n\ntrace0 = go.Histogram(y=y0, ybins=dict(start=20, end=binend, size=10), name='Before')\ntrace1 = go.Histogram(y=y1, ybins=dict(start=20, end=binend, size=10), name='After')\n\nfig.append_trace(trace0, 1, 1)\nfig.append_trace(trace1, 1, 2)\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Memory Score Before vs After of Drug A\")\nfig.show()","e036a81c":"# Add histogram data\ny0 = df['Mem_Score_Before'].loc[df['Drug'] == 'S']\ny1 = df['Mem_Score_After'].loc[df['Drug'] == 'S']\n\nfig = make_subplots(rows=1, cols=2)\n\nbinstart = y0.min()\nbinend = y0.max()\n\ntrace0 = go.Histogram(y=y0, ybins=dict(start=20, end=binend, size=10), name='Before')\ntrace1 = go.Histogram(y=y1, ybins=dict(start=20, end=binend, size=10), name='After')\n\nfig.append_trace(trace0, 1, 1)\nfig.append_trace(trace1, 1, 2)\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Memory Score Before vs After of Drug S\")\nfig.show()","6524bc05":"# Add histogram data\ny0 = df['Mem_Score_Before'].loc[df['Drug'] == 'T']\ny1 = df['Mem_Score_After'].loc[df['Drug'] == 'T']\n\nfig = make_subplots(rows=1, cols=2)\n\nbinstart = y0.min()\nbinend = y0.max()\n\ntrace0 = go.Histogram(y=y0, ybins=dict(start=20, end=binend, size=10), name='Before')\ntrace1 = go.Histogram(y=y1, ybins=dict(start=20, end=binend, size=10), name='After')\n\nfig.append_trace(trace0, 1, 1)\nfig.append_trace(trace1, 1, 2)\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1, \n                  title_text=\"Memory Score Before vs After of Drug T\")\nfig.show()","152c05cc":"fig = px.scatter(df, x=\"age\", y=\"Diff\", \n                 color=\"age_cat\", \n                 template='plotly_dark')\nfig.update_layout(title_text=\"Diff vs Age\")\nfig.show()","43217ec2":"y0 = df[['Diff']].loc[df['age_cat'] == 'young adult']\ny1 = df[['Diff']].loc[df['age_cat'] == 'middle age']\ny2 = df[['Diff']].loc[df['age_cat'] == 'senior adult']\n\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Diff'], name='Young Adult', boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Diff'], name='Middle Age', boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Diff'], name='Senior Adult', boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=600,\n                  width=1000,\n                  title_text=\"Diff x Age Category\",\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=5,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)                 \n                 )\n\nfig.show()","f96c0caf":"y0 = df[['Diff']].loc[df['Drug'] == 'A']\ny1 = df[['Diff']].loc[df['Drug'] == 'T']\ny2 = df[['Diff']].loc[df['Drug'] == 'S']\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Diff'], name='A: Alprazolam', boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Diff'], name='T: Triazolam', boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Diff'], name='S: Sugar', boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=600, \n                  width=1000, \n                  title_text=\"Diff x Drug\",\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=5,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2)\n                 )\nfig.show()","332e62e5":"y0 = df[['Diff']].loc[df['Happy_Sad_group'] == 'H']\ny1 = df[['Diff']].loc[df['Happy_Sad_group'] == 'S']\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Diff'], name='Happy', boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Diff'], name='Sad', boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=600, \n                  width=1000, \n                  title_text=\"Diff x Happy\/Sad Group\",\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=5,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2)\n                 )\n\nfig.show()","bc8a729c":"x0=df['Drug'].loc[df['age_cat'] == 'young adult']\nx1=df['Drug'].loc[df['age_cat'] == 'middle age']\nx2=df['Drug'].loc[df['age_cat'] == 'senior adult']\n\ny0 = df[['Diff']].loc[df['age_cat'] == 'young adult']\ny1 = df[['Diff']].loc[df['age_cat'] == 'middle age']\ny2 = df[['Diff']].loc[df['age_cat'] == 'senior adult']\n\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Diff'], x=x0, name='young adult', marker_size=3,  boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Diff'], x=x1, name='middle age', marker_size=3, boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Diff'], x=x2, name='senior adult', marker_size=3, boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=600, \n                  width=1000,\n                  title_text='Diff x Drug & Age Category',\n                  yaxis_title='Diff',\n                  boxmode='group',\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=5,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)\n)\n\nfig.show()","01e0bee0":"x0=df['Drug'].loc[df['Dosage'] == 1]\nx1=df['Drug'].loc[df['Dosage'] == 2]\nx2=df['Drug'].loc[df['Dosage'] == 3]\n\ny0 = df[['Diff']].loc[df['Dosage'] == 1]\ny1 = df[['Diff']].loc[df['Dosage'] == 2]\ny2 = df[['Diff']].loc[df['Dosage'] == 3]\n\n\nfig = go.Figure()\n\nfig.add_trace(go.Box(y=y0['Diff'], x=x0, name='1 Dose', marker_size=3,  boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y1['Diff'], x=x1, name='2 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\nfig.add_trace(go.Box(y=y2['Diff'], x=x2, name='3 Doses', marker_size=3, boxpoints=\"all\", boxmean=True))\n\nfig.update_layout(height=500, \n                  width=1000,\n                  title_text='Diff x Drug & Dosage',\n                  yaxis_title='Diff',\n                  boxmode='group',\n                  yaxis=dict(autorange=True,\n                             showgrid=True,\n                             zeroline=True,\n                             dtick=10,\n                             gridcolor='rgb(255, 255, 255)',\n                             gridwidth=1,\n                             zerolinecolor='rgb(255, 255, 255)',\n                             zerolinewidth=2,)\n)\n\nfig.show()","5123bc18":"# CREATE DATAFRAME CONTAINING HIGHEST 10 VALUES OF 'DIFF' COLUMN\n\ntop_10_diff = df.sort_values('Diff', ascending=False)[:10]\ntop_10_diff.sort_values('Diff', ascending=False, inplace=True)\n# top_10_diff","53742e72":"fig = px.bar(top_10_diff, x='Diff', y='full_name', color=\"Drug\",\n             title='10 Patients with Greatest Mem Score Increase', \n             text='Diff', orientation='h', hover_data=[\"age_cat\", \"Dosage\", 'Happy_Sad_group'])\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1,\n                  yaxis={'categoryorder':'total ascending'}\n                 )\nfig.show()\n","079a42ae":"low_10_diff = df.sort_values('Diff', ascending=True)[:10]\nlow_10_diff.sort_values('Diff', ascending=True, inplace=True)\n# low_10_diff","26b4e549":"fig = px.bar(low_10_diff, x='Diff', y='full_name', color='Drug',\n             title='10 Patients with Greatest Mem Score Decrease', \n             text='Diff', orientation='h',\n             hover_data=[\"age_cat\", \"Dosage\", 'Happy_Sad_group'])\n\nfig.update_layout(height=500, \n                  width=800, \n                  bargap=0.2, \n                  bargroupgap=0.1,\n                  yaxis={'categoryorder':'total ascending'}\n                  )\nfig.show()\n","4219cbc8":"diff_cat_count = df.groupby(['diff_cat', 'Drug'])[['Diff']].agg('count')\ndiff_cat_count.reset_index(inplace=True)\ndiff_cat_count.rename(columns={'Diff':'count'}, inplace=True)\n\nlabels = [\"decrease\", \"increase\", \"no change\"]\npie0 = diff_cat_count['count'].loc[diff_cat_count['Drug'] == 'A']\npie1 = diff_cat_count['count'].loc[diff_cat_count['Drug'] == 'T']\npie2 = diff_cat_count['count'].loc[diff_cat_count['Drug'] == 'S']\n\nfig = make_subplots(rows=1, cols=3, specs=[[{'type':'domain'}, {'type':'domain'}, {'type':'domain'}]], \n                    subplot_titles=['Alprazolam', 'Triazolam', 'Sugar'])\n\nfig.add_trace(go.Pie(labels=labels, values=pie0, name=\"Alprazolam\"),\n              1, 1)\nfig.add_trace(go.Pie(labels=labels, values=pie1, name=\"Triazolam\"),\n              1, 2)\nfig.add_trace(go.Pie(labels=labels, values=pie2, name=\"Sugar\"),\n              1, 3)\n\nfig.update_traces(hoverinfo=\"label+name+value\")\n\nfig.update_layout(title_text=\"Diff Category According to Drug Type\")\n\nfig.show()","626d3f65":"diff_cat_hsg = df.groupby(['diff_cat', 'Happy_Sad_group'])[['Diff']].agg('count')\ndiff_cat_hsg.reset_index(inplace=True)\ndiff_cat_hsg.rename(columns={'Diff':'count'}, inplace=True)\ndiff_cat_hsg\n\nlabels = [\"decrease\", \"increase\", \"no change\"]\npie0 = diff_cat_hsg['count'].loc[diff_cat_hsg['Happy_Sad_group'] == 'H']\npie1 = diff_cat_hsg['count'].loc[diff_cat_hsg['Happy_Sad_group'] == 'S']\n\nfig = make_subplots(rows=1, cols=2, specs=[[{'type':'domain'}, {'type':'domain'}]], \n                    subplot_titles=['Happy', 'Sad'])\n\nfig.add_trace(go.Pie(labels=labels, values=pie0, name=\"Happy\"), 1, 1)\nfig.add_trace(go.Pie(labels=labels, values=pie1, name=\"Sad\"), 1, 2)\n\nfig.update_traces(hoverinfo=\"label+name+value\")\n\nfig.update_layout(title_text=\"Diff Category According to Happy\/Sad Group\")\n\nfig.show()","ef36b058":"diff_cat_dose = df.groupby(['diff_cat', 'Dosage'])[['Diff']].agg('count')\ndiff_cat_dose.reset_index(inplace=True)\ndiff_cat_dose.rename(columns={'Diff':'count'}, inplace=True)\ndiff_cat_dose\n\nlabels = [\"decrease\", \"increase\", \"no change\"]\npie0 = diff_cat_dose['count'].loc[diff_cat_dose['Dosage'] == 1]\npie1 = diff_cat_dose['count'].loc[diff_cat_dose['Dosage'] == 2]\npie2 = diff_cat_dose['count'].loc[diff_cat_dose['Dosage'] == 3]\n\nfig = make_subplots(rows=1, cols=3, specs=[[{'type':'domain'}, {'type':'domain'}, {'type':'domain'}]], \n                    subplot_titles=['1 Dose', '2 Doses', '3 Doses'])\n\nfig.add_trace(go.Pie(labels=labels, values=pie0, name=\"1 Dose\"), 1, 1)\nfig.add_trace(go.Pie(labels=labels, values=pie1, name=\"2 Doses\"), 1, 2)\nfig.add_trace(go.Pie(labels=labels, values=pie2, name=\"3 Doses\"), 1, 3)\n\nfig.update_traces(hoverinfo=\"label+name+value\")\n\nfig.update_layout(title_text=\"Diff Category According to Dosage\")\n\nfig.show()","9abf5a58":"diff_cat_age = df.groupby(['diff_cat', 'age_cat'])[['Diff']].agg('count')\ndiff_cat_age.reset_index(inplace=True)\ndiff_cat_age.rename(columns={'Diff':'count'}, inplace=True)\n\nlabels = [\"decrease\", \"increase\", \"no change\"]\npie0 = diff_cat_age['count'].loc[diff_cat_age['age_cat'] == 'young adult']\npie1 = diff_cat_age['count'].loc[diff_cat_age['age_cat'] == 'middle age']\npie2 = diff_cat_age['count'].loc[diff_cat_age['age_cat'] == 'senior adult']\n\nfig = make_subplots(rows=1, cols=3, specs=[[{'type':'domain'}, {'type':'domain'}, {'type':'domain'}]], \n                    subplot_titles=['Young Adult', 'Middle Age', 'Senior Adult'])\n\nfig.add_trace(go.Pie(labels=labels, values=pie0, name=\"Young Adult\"), 1, 1)\nfig.add_trace(go.Pie(labels=labels, values=pie1, name=\"Middle Adult\"), 1, 2)\nfig.add_trace(go.Pie(labels=labels, values=pie2, name=\"Senior\"), 1, 3)\n\nfig.update_traces(hoverinfo=\"label+name+value\")\n\nfig.update_layout(title_text=\"Diff Category According to Age Category\")\n\nfig.show()","e4ed223f":"diff_cat_age","483d2eb9":"from sklearn.preprocessing import LabelEncoder\n\ndf1 = pd.read_csv('..\/input\/memory-test-on-drugged-islanders-data\/Islander_data.csv')\n\n# Happy Sad group: H = 0, S = 1\nle = LabelEncoder()\nle.fit(df1.Happy_Sad_group.drop_duplicates()) \ndf1.Happy_Sad_group = le.transform(df1.Happy_Sad_group)\n\n# Drug: A=0, S=1, T=2\nle.fit(df1.Drug.drop_duplicates()) \ndf1.Drug = le.transform(df1.Drug)\n","8aab7fcd":"from sklearn.cluster import KMeans \nfrom sklearn.preprocessing import StandardScaler","87c09c84":"X = df1[['age', 'Happy_Sad_group', 'Dosage', 'Drug', 'Mem_Score_Before', 'Mem_Score_After', 'Diff']]","0fdc9bb7":"X_clus = StandardScaler().fit_transform(X)\nX_clus","122bc9dc":"clusterNum = 3\nk_means = KMeans(init = \"k-means++\", n_clusters = clusterNum, n_init = 12)\nk_means.fit(X_clus)\nlabels = k_means.labels_\nprint(labels)","672d3c8b":"df['cluster'] = labels\ndf.head()","07f77912":"cluster_centers = k_means.cluster_centers_\ncluster_centers","9557f891":"cluster0 = df.loc[df['cluster'] == 0]\ncluster1 = df.loc[df['cluster'] == 1]\ncluster2 = df.loc[df['cluster'] == 2]","17caa489":"fig = px.scatter(df, x='Happy_Sad_group', y='Mem_Score_Before', color='cluster')\nfig.update_layout(title='Memory Score Before Distribution by Happy\/Sad Group')\nfig.show()","59381b5f":"from scipy import ndimage \nfrom scipy.cluster import hierarchy \nfrom scipy.spatial import distance_matrix \nfrom matplotlib import pyplot as plt \nfrom sklearn import manifold, datasets \nfrom sklearn.cluster import AgglomerativeClustering \nimport pylab","b2f591c3":"df2 = pd.read_csv('..\/input\/memory-test-on-drugged-islanders-data\/Islander_data.csv')","ca6c6f62":"agglom = AgglomerativeClustering(n_clusters = 3, linkage = 'complete')\nagglom.fit(X_clus)\nagglom.labels_","97a99989":"dist_matrix = distance_matrix(X_clus,X_clus) \nprint(dist_matrix)","9f61b750":"Z = hierarchy.linkage(dist_matrix, 'complete')","62c0783d":"df2['cluster'] = agglom.labels_\ndf2.head()","eaa31a02":"fig = pylab.figure(figsize=(18,50))\ndef llf(id):\n    return '[%s %s %s %s]' % (df2['first_name'][id], df2['last_name'][id], df2['Happy_Sad_group'][id], df2['Mem_Score_Before'][id])\n    \ndendro = hierarchy.dendrogram(Z,  leaf_label_func=llf, leaf_rotation=0, leaf_font_size=12, orientation = 'right')","01bb3a17":"#### **OBSERVATIONS**\n\nWith the exceptions of a few outliers in the Young Adult age category, age doesn't seem to have a significant impact on the difference in memory score","7122aaba":"** OBSERVATIONS **\n\n* The sad group experienced a more significant increase in memory score than the happy group.","933e4514":"<a id=\"clustering\"><\/a>\n\n## CLUSTERING","a453ddeb":"<a id=\"diff\"><\/a>\n\n### DIFFERENCE COMPARISONS\n\nIn this section we'll perform an exploratory analysis of the values in the **Diff** column. We'll correlate them with other variables. Our results should reflect findings from the above analyses, however it will provide a different perspective on the data. ","af08880f":"**OBSERVATIONS**\n\nAlthough patients primed with sad memories do report an increase in memory score at a rate approximately 2% greater than patients primed with Happy memories, there does not appear to be a significant difference in how happy or sad memories affect memory score. ","175b19f2":"<a id=\"memscore\"><\/a>\n\n### MEMORY SCORE COMPARISONS\n\nAside from name, the only patient information that we have to work with is age. While it would be preferable to have another variable such as sex to provide more insight, age may give an indication of how memory score might be impacted in this study. ","4cc582af":"**OBSERVATIONS**\n\nAlprazolam has the most positive impact on memory score with 70.1% of patients gaining an increase in memory score. ","7473fac7":"## MISSING VALUES\n\nTHIS DATASET CONTAINS NO MISSING VALUES","b289e4a3":"### MEMORY SCORE DIFFERENCE BY DRUG & DOSAGE","b8eebdd2":"<h3 class=\"list-group-item list-group-item-action active\" data-toggle=\"list\"  role=\"tab\" aria-controls=\"home\">Table of Contents<\/h3>\n\n1. [Libraries & Packages](#libraries)\n2. [Initial Insights](#insights)\n3. [Data Preprocessing & Feature Engineering](#preprocessing)\n4. [Data Exploration & Visualization](#exploration)  \n    A. [Univariate Exploration](#univariate)  \n    B. [Bi\/Multivariate Exploration](#multivariate)  \n      I. [Memory Score Comparisons](#memscore)  \n      II. [Difference Comparisons](#diff)  \n      III. [Difference Category Analysis](#diffcat)  \n5. [Additional Feature Engineering](#features)  \n6. [Clustering](#clustering)  \n    A. [K-Means Clustering](#kmeans)  \n    B. [Hierarchical Clustering](#hierarchical)  \n    \n<!-- 7. [Algorithm Comparison](#comparison)\n8. [Conclusion](#conclusion)  -->","76ba7898":"<a id=\"insights\"><\/a>\n\n## INITIAL INSIGHTS","646e6a60":"<a id=\"features\"><\/a>\n\n## ADDITIONAL FEATURE ENGINEERING\n\nLet's use Label Encoder to transform some of the categorical variables into numerical values so that we may run our algorithms. ","bb3b23a7":"<a id=\"kmeans\"><\/a>\n\n### K-MEANS CLUSTERING","3b349d02":"<a id=\"univariate\"><\/a>\n\n## UNIVARIATE ANALYSIS\n\nIn this section I look at some prelimenary insights that the data has to offer. Using bar charts, histograms, pie charts, and box plots I observe how each variable is distributed.\n\n**AGE & AGE_CAT**\n\nThe majority of patients fall into the young adult (below 35) and middle age (36-55) categories, with young adults slightly out numbering middle age. Seniors occur far less frequently with only 18 out of the 198 participants falling into that category.\n\n**HAPPY\/SAD GROUP**\n\nThe patients are evenly distributed among the \"happy_sad_group\" variable. In this variable, each patient was primed with happy or sad memories 10 minutes before testing. \n\n**DOSAGE AND DRUG DISTRIBUTION**\n\nThere is a fairly even distrubution of each type of drug and number of doses among the patient population. \n\n**MEMORY SCORES AND DIFFERENCE CATEGORIES**\n\nOverall there is a general increase in memory score as indicated in the box plots of the \"Memory_Score_Before\" and \"Memory_Score_After\" variables and the \"Diff_cat\" variable. The Before scores range from a minimum value of 27.2 to an upper fence value of 100 and maximum outlier value of 110. The After scores range from a minimum value of 27.1 to an upper fence value of 108 and maximum outlier value of 120.\n\n\n\n\n\n","680031a4":"<p  style=\"text-align: center;\"><font size=\"10\"><b>DRUG EFFICACY ON MEMORY<\/b><\/font><\/p>\n<p  style=\"text-align: center;\"><font size=\"4\">EXPLORATORY DATA ANALYSIS & CLUSTERING<\/font><\/p>","2f4c5642":"<a id=\"hierarchical\"><\/a>\n\n### HIERARCHICAL CLUSTERING","d367104e":"#### **OBSERVATIONS**\n\n* There is an overall positive trend in memory score as indicated by the scatter plot. \n* Drug A (Alprasolam) caused the most significant and positive impact on memory score. The higher the dosage, the greater the increase in memory score. \n* This is in contrast to the Drug T (Triazolam) and S (Sugar placebo) which had no discernable impact on memory score. ","d03cfdf1":"<a id=\"preprocessing\"><\/a>\n\n## PREPROCESSING & FEATURE ENGINEERING\n\nFor certain continuous variables I like to bin them into categorical variables to add a different perspective in the exploration. In this instance \"Age\" and \"Diff are two continuous variables that will benefit from being binned into a separate categorical variables. \n\nBelow I created new variables \"age_cat\" and \"diff_cat\". **\"Age_cat\"** will separate each patient into an age group: \"young adult\", \"middle age\", or \"senior adult\".  **\"Diff_cat\"** will categorize the values in the \"Diff\" column as \"increase\", \"decrease\", or \"no change\"\n\nI created a new column with each patient's full name to ensure that each patient is uniquely identifiable in any exploration. ","f4e19ae7":"A more generalized perspective with the bar chart below shows us that Drug A (Alprazolam) does indeed have a more positive impact on memory score as opposed to Drug T (Triazolam) and the Sugar placebo, which both resulted in a decrease in average memory score.","d9cedb3c":"<a id=\"diffcat\"><\/a>\n\n### DIFFERENCE CATEGORY ANALYSIS\n\nEarlier in this notebook the values in the \"Diff\" column were separated into three different categories: **Decrease** for the values that had a negative difference, **Increase** for the values that had a positive difference, **No Change** for the values that remained the same. \n\nIn this section I visualized the number of samples belonging to each of those categories according to their Drug Type, Happy\/Sad group, Dosage amount, and age category","f406325a":"<a id=\"exploration\"><\/a>\n\n# EXPLORATORY DATA ANALYSIS\n\nIn this section we visualize our data and see what insights may be gleaned. ","8d7b3771":"<img src='https:\/\/github.com\/miltonsuggs\/06-memory-test\/blob\/main\/memory%20test.jpg?raw=true' alt='MEMORY TEST'>","11dbf618":"# INTRODUCTION\n\nAn experiment on the effects of anti-anxiety medicine on memory recall when being primed with happy or sad memories. The participants were done on novel Islanders whom mimic real-life humans in response to external factors.\n\nDrugs of interest (known-as) [Dosage 1, 2, 3]:\n\nA - Alprazolam (Xanax, Long-term) [1mg\/3mg\/5mg]\n\nT - Triazolam (Halcion, Short-term) [0.25mg\/0.5mg\/0.75mg]\n\nS- Sugar Tablet (Placebo) [1 tab\/2tabs\/3tabs]\n\n*Dosages follow a 1:1 ratio to ensure validity\n*Happy or Sad memories were primed 10 minutes prior to testing\n*Participants tested every day for 1 week to mimic addiction\n","f016293a":"### HIGHEST MEMORY SCORE DIFFERENCES\n\nIn this section we look at the samples containing both the 10 highest and 10 lowest values in the Diff column to determine which drug is associated with each. \n\nFor the highest values, 9 out of the highest 10 memory score differences were from the drug Alprazolam with one belonging to Triazolam\n\nFor the lowest values there was more of a mixture, with 4 belonging to Sugar, 4 belonging to Triazolam, and 2 belonging to Alprazolam. \n","a10ec287":"**OBSERVATIONS**\n\nOn average, middle age patients responded more favorably to this study with a 5% to 6% higher rate of increased memory score. ","52b670d8":"<a id=\"multivariate\"><\/a>\n\n## BIVARIATE & MULTIVARIATE ANALYSIS\n\nIn this section I take a more in depth look at the variables and observe any correlations between any of the variables. By performing bivariate and multivariate analyses we can determine which variables may be having the most effect on the change in Memory Score. ","0e3c42fe":"**OBSERVATIONS**\n\n* Although there are far less samples in the \"senior adult\" age group, their memory score before values are generally higher than the other two age categories. \n* The value distribution of the young adult and middle age categories are comparable.\n* The young adults saw more of an increase in memory score than the other categories. ","baad6720":"<a id=\"libraries\"><\/a>\n## LIBRARIES & PACKAGES","6a0b9bed":"**OBSERVATIONS**\n\nOn average, the patients who recieved a higher drug dosage reported higher increases in memory score. "}}