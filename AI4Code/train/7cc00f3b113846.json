{"cell_type":{"4848f70a":"code","12f57e8e":"code","84fb1dc8":"code","9a02a426":"code","d793fd19":"markdown","0f75de2e":"markdown","05e1c4bb":"markdown","6d7220aa":"markdown","39d975fe":"markdown","19eb326f":"markdown","82df7b46":"markdown","55aa605a":"markdown"},"source":{"4848f70a":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport os\nfrom IPython.display import display\n\npd.options.display.precision = 2\npd.set_option('display.max_columns', 160)\nsns.set_style(\"darkgrid\")\nsns.set(font_scale = 1.5)\n\nimport warnings\nwarnings.resetwarnings()\n#\u5f8c\u3067\u4fee\u6b63\u3059\u308b\nwarnings.simplefilter('ignore', pd.core.common.SettingWithCopyWarning)\n\ncolorlist={\n    'ARI': '#97233F', 'ATL': '#a71930', 'BAL': '#4e33ff', 'BUF': '#004bcc', \n    'CAR': '#0085CA', 'CHI': '#C83803', 'CIN': '#FB4F14', 'CLE': '#FF3C00', \n    'DAL': '#004d99', 'DEN': '#FB4F14', 'DET': '#0076B6', 'GB': '#3b665b', \n    'HOU': '#1f5a99', 'IND': '#005fcc', 'JAX': '#006778', 'KC': '#E31837', \n    'LA': '#0066cc',  'LAC': '#0080C6', 'LV': '#A5ACAF',  'MIA': '#00becc', \n    'MIN': '#7a3bcc', 'NE': '#1f5c99',  'NO': '#D3BD8C',  'NYG': '#1644cc', \n    'NYJ': '#006649', 'PHI': '#008a99', 'PIT': '#FFB612', 'SEA': '#69BE28', \n    'SF': '#D50A0A',  'TB': '#D50A0A',  'TEN': '#4B92DB', 'WAS': '#992222'}\n\nPFFScoutingData = pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/PFFScoutingData.csv')\nplays = pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/plays.csv')\ngames = pd.read_csv('..\/input\/nfl-big-data-bowl-2022\/games.csv')","12f57e8e":"df_all = PFFScoutingData.merge(plays, on=['gameId','playId'])\ndf_all = df_all.merge(games, on=['gameId'])\n\n# Treat Oakland Raiders as LasVegas Raiders\ndf_all.replace('OAK', 'LV', inplace=True)\n\n# Remove onsidekick\nKickoff = df_all[df_all['specialTeamsPlayType']=='Kickoff']\nKickoff = Kickoff[Kickoff['kickType']!='O']\n# Add ReturnTeam\nKickoff.loc[Kickoff['homeTeamAbbr'] == Kickoff['possessionTeam'] , 'returnTeam'] = Kickoff['visitorTeamAbbr']\nKickoff.loc[Kickoff['homeTeamAbbr'] != Kickoff['possessionTeam'] , 'returnTeam'] = Kickoff['homeTeamAbbr']\n# Add NexOffensePosition\nKickoff['nextOffensePosition'] = abs(Kickoff['kickLength'] + Kickoff['yardlineNumber'] - Kickoff['kickReturnYardage'] -100)\n\nKickoff2018 = Kickoff[Kickoff['season']==2018]\n\nQuartileKickoff2018 = pd.DataFrame()\nQuartileKickoff2018['kickReturnYardageQuartile'] = Kickoff2018.groupby('returnTeam').quantile([0, 0.25, 0.5, 0.75, 1.0])['kickReturnYardage']\nQuartileKickoff2018['nextOffensePositionQuartile'] = Kickoff2018.groupby('returnTeam').quantile([0, 0.25, 0.5, 0.75, 1.0])['nextOffensePosition']\n\nKickoff2018Info = pd.DataFrame()\nKickoff2018Info['kickReturnAttemptCount'] = Kickoff2018.groupby('returnTeam').count()['kickReturnYardage'].round().astype(int)\nKickoff2018Info['kickReturnAverage'] = Kickoff2018.groupby('returnTeam').mean()['kickReturnYardage']\nKickoff2018Info['nextOffensePositionAverage'] = Kickoff2018.groupby('returnTeam').mean()['nextOffensePosition']","84fb1dc8":"f = plt.figure(figsize=(20, 14))\nf.suptitle('Yards Gained by Kick-Off Return Teams 2018')\nsns.boxplot(data = Kickoff2018.sort_values('returnTeam'), x = 'returnTeam', y = 'kickReturnYardage', palette=colorlist)\ndisplay(Kickoff2018Info[['kickReturnAttemptCount','kickReturnAverage']].T)\ndisplay(QuartileKickoff2018[['kickReturnYardageQuartile']].T)\nf.tight_layout()","9a02a426":"f = plt.figure(figsize=(20, 14))\nf.suptitle('Offense Position After Kick-off Return 2018')\nsns.boxplot(data = Kickoff2018.sort_values('returnTeam'), x = 'returnTeam', y = 'nextOffensePosition', palette=colorlist)\ndisplay(Kickoff2018Info[['kickReturnAttemptCount','nextOffensePositionAverage']].T)\ndisplay(QuartileKickoff2018[['nextOffensePositionQuartile']].T)\nf.tight_layout()","d793fd19":"> ### For examples, above figure shows:\n> #### \u30fbARI,CAR,CHI,NE,PHI and SEA start offense under 20 yards in the lowest 25% of Kick Rerturn.\n> #### \u30fbCIN starts offense from 23 to 34 yardage in the middle 50% of the Kick Rerurn. This is the best of all teams.\n> #### \u30fbCHI starts offense from 16.75 to 23.5 yardage in the middle 50% of the Kick Rerurn. This is the worst of all teams.","0f75de2e":"> ### For examples, above figure shows:\n> #### \u30fbTEN gained 21.5-32.5 yardage in the middle 50% of the Kick Rerurn. This is the best of all teams.\n> #### \u30fbGB gained 19.25-23 yardage in the middle 50% of the 30 Kick Rerurns.  \n> #### \u30fbJAX gained 9.75-26.75 yardage in the middle 50% of the 26 Kick Rerurns.  \n> #### \u30fbGB and JAX have similar average, but have different variability of the middle 50%.","05e1c4bb":"> ## 4.2 Offense Position After Kick-off Return.","6d7220aa":"> ## 4-1 Kick-off Return Yardage\n> ### Yards gained by return team if there was a return on a kickoff or punt. ","39d975fe":"# 2. Arrange Data","19eb326f":"# 4. Analyze Kick-off Return 2018\n### Use Seaborn.Boxplot to analyze special Team data. Black dot means Outlier.","82df7b46":"# 3. What's Quartile? (Reference from Wikipedia)\n### Detail (https:\/\/en.wikipedia.org\/wiki\/Quartile)","55aa605a":"# 1. Import and Read CSV"}}