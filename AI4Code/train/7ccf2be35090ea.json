{"cell_type":{"734ac2e8":"code","d56b51c7":"code","3f88357b":"code","0e2d107b":"code","03cd15ba":"code","55ae377c":"code","be9a333c":"code","76f40cd4":"code","b8933afd":"code","3611df58":"code","2ac36bd3":"code","c8bc9074":"code","cbf52633":"code","42a539b8":"code","e80932d1":"code","079302ff":"code","ff7f4a56":"code","26664a70":"code","2a6ff217":"code","742ea9d3":"code","502d7c59":"code","4773202e":"code","ad1fd1cc":"code","4b873ac1":"code","6fcbd69f":"code","40eb3107":"code","d1062537":"code","e072d56d":"code","ef632df0":"code","64a6ca4c":"code","2b3e2207":"code","64bbd404":"code","38f9c576":"code","73285d01":"markdown","43251979":"markdown","576e6900":"markdown","a45ead9f":"markdown","d42839cd":"markdown","f9fbc17a":"markdown","3e62f264":"markdown","535baf65":"markdown","c8b5422c":"markdown","24680fa7":"markdown","c31d0251":"markdown","3d8c63a6":"markdown","25e167b0":"markdown","20848569":"markdown","ac061a4c":"markdown","462626cf":"markdown","250b1fb1":"markdown","93910925":"markdown","fbfbe4f2":"markdown","beaedfc9":"markdown","0f3a8c60":"markdown","89c5d9f9":"markdown","9fcdc216":"markdown"},"source":{"734ac2e8":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","d56b51c7":"rating = pd.read_csv('..\/input\/movielens-latest-small\/ratings.csv')","3f88357b":"rating.head()","0e2d107b":"movies = pd.read_csv('..\/input\/movielens-latest-small\/movies.csv')","03cd15ba":"movies.head()","55ae377c":"# merging both the datasets on 'movieId' column\nmovie_rating = pd.merge(left=rating,right=movies,on='movieId')","be9a333c":"movie_rating.head()","76f40cd4":"movie_rating.columns","b8933afd":"movie_rating = movie_rating[['userId', 'movieId', 'title', 'genres', 'rating', 'timestamp']]","3611df58":"movie_rating.head()","2ac36bd3":"movie_rating.info()","c8bc9074":"movie_rating.isnull().sum()","cbf52633":"movie_rating.head(2)","42a539b8":"# grouping the movies based on average rating\naverage_rating_movies = movie_rating.groupby('title')['rating'].mean().sort_values(ascending=False)","e80932d1":"average_rating_movies.head(10)","079302ff":"average_rating_movies.hist(bins=20)\nplt.show()","ff7f4a56":"# grouping the movies based on count of users who rated the movies\ncount_userid = movie_rating.groupby('title')['userId'].count().sort_values(ascending=False)","26664a70":"count_userid","2a6ff217":"count_userid.hist()\nplt.show()","742ea9d3":"for movie in average_rating_movies[average_rating_movies==5.0].index:\n    print(movie,count_userid[movie])","502d7c59":"# grouping the movie_rating based on count on userId and mean on rating\nuserid_rating = movie_rating.groupby('title')[['userId','rating']].agg({'userId':'count','rating':'mean'}).round(2).sort_values(by='userId',ascending=False)","4773202e":"userid_rating.head()","ad1fd1cc":"# creating pivot table to create item by item collaborative filtering\nmovie_rating_pivot = pd.pivot_table(index='userId',columns='title',values='rating',data=movie_rating)","4b873ac1":"movie_rating_pivot.head()","6fcbd69f":"userid_rating.head(10)","40eb3107":"# assigning ratings of movie 'Jurassic Park (1993)' to a new variable from movie_rating_pivot\njurassic_park = movie_rating_pivot['Jurassic Park (1993)'].head(10)","d1062537":"jurassic_park.head(10)","e072d56d":"correlation_jurassicpark = pd.DataFrame(movie_rating_pivot.corrwith(jurassic_park))","ef632df0":"correlation_jurassicpark.head()","64a6ca4c":"correlation_jurassicpark.columns = ['Correlation']\ncorrelation_jurassicpark.dropna(inplace=True,axis=0)","2b3e2207":"correlation_jurassicpark.sort_values(by='Correlation',ascending=True).head()","64bbd404":"correlation_jurassicpark['Views'] = userid_rating['userId']","38f9c576":"correlation_jurassicpark[correlation_jurassicpark['Views'] > 100].sort_values(by='Correlation',ascending=False).head(20)","73285d01":"Importing the rating data set which contains ratings given by the users to the movies they watched.","43251979":"Let's find which movies to recommend to the users who have watched 'Jurassic Park (1993)'. \nTo do this we have to find correlation of 'Jurassic Park (1993)' with other movies which have been rated in a similar way by the users.","576e6900":"# Import the data set","a45ead9f":"![](http:\/\/miro.medium.com\/max\/1600\/1*dMR3xmufnmKiw4crlisQUA.png)","d42839cd":"Most Rated movies:","f9fbc17a":"# Movie Recommendation System","3e62f264":"Maximum movies have average rating in the range 3 to 4. The movies which have average = 5.0 may be the ones which may have been watched once or twice.","535baf65":"Let's create a dataframe with number of ratings and average rating for each movie\n","c8b5422c":"# Import necessary libraries","24680fa7":"Removing Nan values and naming the column as 'Correlation'","c31d0251":"Getting the columns of the movie_rating dataframe in proper order","3d8c63a6":"There may be movies which might have been watched only once or twice by the users who have watched 'Jurassic Park (1993)' and those movies will show high correlation. We will consider only those movies which have been viewed more than 100 times. Let's add views column in the correlation_jurassicpark data frame","25e167b0":"Let's merge both the dataset so that in ratings dataset we have complete information about the movies apart from the movie id.","20848569":"Maximum movies have been viewed in the range 0 - 40 views","ac061a4c":"Here we will be recommending movies to the users who have watched movie 'Jurassic Park (1993)' using <b> Collaborative Filtering<\/b>","462626cf":"Now filtering out top 20 movies which have views greater than 100","250b1fb1":"# Building Recommendation System","93910925":"# Exploratory Data Analysis","fbfbe4f2":"There will be many Nan values because users have watched only few of the movies and given ratings only to those movies","beaedfc9":"The movies which have average = 5.0 may be the ones which may have been watched once or twice. Let's see number of ratings given to movies which have average rating = 5.0","0f3a8c60":"Find the correlation with other movies from movie_rating_pivot table","89c5d9f9":"Importing the movie dataset which contains the description about all the movies","9fcdc216":"Recommender systems are utilized in a variety of areas, and are most commonly recognized as playlist generators for video and music services like Netflix, YouTube and Spotify, product recommenders for services such as Amazon, or content recommenders for social media platforms such as Facebook and Twitter.\n<br>\nRecommender systems usually make use of either or both <b>Collaborative Filtering<\/b> or <b> Content-Based filtering approach. "}}