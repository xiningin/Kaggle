{"cell_type":{"b4bca5f0":"code","7f926ba7":"code","017e4eed":"code","0c2d4909":"code","142457c2":"code","1cb9837d":"code","20cf1481":"code","5d93d237":"code","feb7726b":"code","25debec9":"code","903cf59f":"code","cbbe2b1e":"code","46151f41":"code","c49d6dfb":"code","6be6db18":"code","8899e2f2":"code","a2f3b2b7":"code","da647b38":"markdown","81c49a56":"markdown","e5c70b54":"markdown","298d24e3":"markdown","3ff3437a":"markdown","db02fab5":"markdown","f6ac8b6e":"markdown","8bf59357":"markdown","b5ea137e":"markdown"},"source":{"b4bca5f0":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\ncolor = sns.color_palette()\npd.set_option('display.max_columns', None)\npd.options.mode.chained_assignment = None","7f926ba7":"column_names = ['fund_name', 'isin', 'morningstar_category', 'morningstar_benchmark', 'dividend_frequency', 'morningstar_rating',\n                'morningstar_analyst_rating', 'morningstar_risk_rating', 'morningstar_performance_rating', 'nav_per_share_currency',\n                'nav_per_share', 'class_size_currency', 'class_size', 'fund_return_ytd', 'fund_return_2018', 'fund_return_2017',\n                'fund_return_2016', 'fund_return_2015', 'fund_return_2014', 'fund_return_2013', 'fund_return_2012', 'fund_return_2011',\n                'fund_return_2010', 'trailing_return_3years', 'trailing_return_5years', 'equity_style', 'equity_style_score',\n                'equity_size', 'equity_size_score', 'roa', 'roe', 'roic', 'bond_interest_rate_sensitivity', 'bond_credit_quality',\n                'average_coupon_rate', 'average_credit_quality', 'modified_duration', 'effective_maturity', 'asset_stock', 'asset_bond',\n                'asset_cash', 'asset_other', 'holdings_number_stock', 'holdings_number_bonds', 'ongoing_cost', 'management_fees',\n                'sustainability_rank', 'esg_score', 'environmental_score', 'social_score', 'governance_score', 'controversy_score',\n                'sustainability_score']\ndf_mutual_funds = pd.read_csv(\"..\/input\/european-funds-dataset-from-morningstar\/Morningstar - European Mutual Funds.csv\",\n                              usecols=column_names)\ndf_etfs = pd.read_csv(\"..\/input\/european-funds-dataset-from-morningstar\/Morningstar - European ETFs.csv\",\n                      usecols=column_names)","017e4eed":"numerical_columns = ['morningstar_rating', 'morningstar_risk_rating', 'morningstar_performance_rating', 'ongoing_cost',\n                     'management_fees', 'fund_return_ytd', 'trailing_return_3years', 'trailing_return_5years',\n                     'sustainability_rank', 'esg_score', 'environmental_score', 'social_score', 'governance_score',\n                     'controversy_score', 'sustainability_score']\ndf_mutual_funds = df_mutual_funds.reset_index().set_index('isin')\ndf_mutual_funds_numerical = df_mutual_funds[numerical_columns]\nprint('N. elements in Mutual Funds original dataframe: ' + str(len(df_mutual_funds_numerical)))\ndf_mutual_funds_numerical = df_mutual_funds_numerical.dropna().apply(pd.to_numeric)\nprint('N. elements in Mutual Funds dataframe after NAs are dropped: ' + str(len(df_mutual_funds_numerical)))\n\ndf_etfs = df_etfs.reset_index().set_index('isin')\ndf_etfs_numerical = df_etfs[numerical_columns]\nprint('N. elements in ETFs original dataframe: ' + str(len(df_etfs_numerical)))\ndf_etfs_numerical = df_etfs_numerical.dropna().apply(pd.to_numeric)\nprint('N. elements in ETFs dataframe after NAs are dropped: ' + str(len(df_etfs_numerical)))\n\n# list of mutual funds\nmutual_funds_list = list(df_mutual_funds_numerical.index.values)\ndf_mutual_funds = df_mutual_funds[df_mutual_funds.index.isin(mutual_funds_list)]\n\n# list of ETFs\netfs_list = list(df_etfs_numerical.index.values)\ndf_etfs = df_etfs[df_etfs.index.isin(etfs_list)]","0c2d4909":"df_mutual_funds.drop('index', axis=1, inplace=True)\ndf_mutual_funds.head()","142457c2":"df_etfs.drop('index', axis=1, inplace=True)\ndf_etfs.head()","1cb9837d":"f, axes = plt.subplots(3, 1, figsize=(20, 20), sharex=False)\nsns.distplot(df_mutual_funds_numerical[(df_mutual_funds_numerical['fund_return_ytd'] >= -30) & (df_mutual_funds_numerical['fund_return_ytd'] <= 30)]['fund_return_ytd'],\n             ax=axes[0]).set_title(\"Mutual Funds - YearToDate return\")\naxes[0].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))\nsns.distplot(df_mutual_funds_numerical[(df_mutual_funds_numerical['trailing_return_3years'] >= -30) & (df_mutual_funds_numerical['trailing_return_3years'] <= 30)]['trailing_return_3years'],\n             ax=axes[1]).set_title(\"Mutual Funds - 3Years return\")\naxes[1].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))\nsns.distplot(df_mutual_funds_numerical[(df_mutual_funds_numerical['trailing_return_5years'] >= -30) & (df_mutual_funds_numerical['trailing_return_5years'] <= 30)]['trailing_return_5years'],\n             ax=axes[2]).set_title(\"Mutual Funds - 5Years return\")\naxes[2].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))","20cf1481":"f, axes = plt.subplots(3, 1, figsize=(20, 20), sharex=False)\nsns.distplot(df_etfs_numerical[(df_etfs_numerical['fund_return_ytd'] >= -30) & (df_etfs_numerical['fund_return_ytd'] <= 30)]['fund_return_ytd'],\n             ax=axes[0]).set_title(\"ETFs - YearToDate return\")\naxes[0].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))\nsns.distplot(df_etfs_numerical[(df_etfs_numerical['trailing_return_3years'] >= -30) & (df_etfs_numerical['trailing_return_3years'] <= 30)]['trailing_return_3years'],\n             ax=axes[1]).set_title(\"ETFs - 3Years return\")\naxes[1].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))\nsns.distplot(df_etfs_numerical[(df_etfs_numerical['trailing_return_5years'] >= -30) & (df_etfs_numerical['trailing_return_5years'] <= 30)]['trailing_return_5years'],\n             ax=axes[2]).set_title(\"ETFs - 5Years return\")\naxes[2].set(xlabel='Return', ylabel='Distribution', xlim=(-30, 30))","5d93d237":"morningstar_mutual_funds_category_df = df_mutual_funds[df_mutual_funds['morningstar_category'].notnull()]\n\nplt.figure(figsize=(15, 8))\nmutual_funds_categories = morningstar_mutual_funds_category_df['morningstar_category'].value_counts()[:10]\nsns.barplot(mutual_funds_categories.values, mutual_funds_categories.index, )\nfor i, v in enumerate(mutual_funds_categories.values):\n    plt.text(0.8,i,v,color='k',fontsize=12)\nplt.xlabel('Count', fontsize=12)\nplt.ylabel('Category name', fontsize=12)\nplt.title(\"Mutual Funds - Distribution of Morningstar categories\", fontsize=16)","feb7726b":"morningstar_etfs_category_df = df_etfs[df_etfs['morningstar_category'].notnull()]\n\nplt.figure(figsize=(15, 8))\netfs_categories = morningstar_etfs_category_df['morningstar_category'].value_counts()[:10]\nsns.barplot(etfs_categories.values, etfs_categories.index, )\nfor i, v in enumerate(etfs_categories.values):\n    plt.text(0.8,i,v,color='k',fontsize=12)\nplt.xlabel('Count', fontsize=12)\nplt.ylabel('Category name', fontsize=12)\nplt.title(\"ETFs - Distribution of Morningstar categories\", fontsize=16)","25debec9":"fund_categories_list = ['Asia ex-Japan Equity', 'China Equity', 'EUR Corporate Bond', 'Eurozone Large-Cap Equity',\n                        'Germany Large-Cap Equity', 'Global Emerging Markets Equity', 'Global Large-Cap Blend Equity',\n                        'Japan Large-Cap Equity', 'Switzerland Large-Cap Equity', 'UK Large-Cap Equity',\n                        'US Large-Cap Blend Equity', 'USD Corporate Bond']\nmutual_funds_category_df = df_mutual_funds.loc[df_mutual_funds['morningstar_category'].isin(fund_categories_list)].sort_values(by='morningstar_category', ascending=True)\nplt.rcParams['figure.figsize'] = (20, 10)\nax = sns.violinplot(x=mutual_funds_category_df['morningstar_category'], y=mutual_funds_category_df['esg_score'], palette='magma')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='ESG score', fontsize=12)\nax.set_title(label='Distribution of ESG score of Mutual Funds from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","903cf59f":"etfs_category_df = df_etfs.loc[df_etfs['morningstar_category'].isin(fund_categories_list)].sort_values(by='morningstar_category', ascending=True)\nplt.rcParams['figure.figsize'] = (20, 10)\nax = sns.violinplot(x=etfs_category_df['morningstar_category'], y=etfs_category_df['esg_score'], palette='inferno')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='ESG score', fontsize=12)\nax.set_title(label='Distribution of ESG score of ETFs from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","cbbe2b1e":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.barplot(x=mutual_funds_category_df['morningstar_category'], y=mutual_funds_category_df['environmental_score'], palette='magma')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Environmental score', fontsize=12)\nax.set_title(label='Distribution of Environmental score of Mutual Funds from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","46151f41":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.barplot(x=etfs_category_df['morningstar_category'], y=etfs_category_df['environmental_score'], palette='inferno')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Environmental score', fontsize=12)\nax.set_title(label='Distribution of Environmental score of ETFs from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","c49d6dfb":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.boxplot(x=mutual_funds_category_df['morningstar_category'], y=mutual_funds_category_df['social_score'], palette='magma')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Social score', fontsize=12)\nax.set_title(label='Distribution of Social score of Mutual Funds from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","6be6db18":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.boxplot(x=etfs_category_df['morningstar_category'], y=etfs_category_df['social_score'], palette='inferno')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Social score', fontsize=12)\nax.set_title(label='Distribution of Social score of ETFs from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","8899e2f2":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.boxenplot(x=mutual_funds_category_df['morningstar_category'], y=mutual_funds_category_df['governance_score'], palette='magma')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Governance score', fontsize=12)\nax.set_title(label='Distribution of Governance score of Mutual Funds from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","a2f3b2b7":"plt.rcParams['figure.figsize'] = (20, 10)\nax = sns.boxenplot(x=etfs_category_df['morningstar_category'], y=etfs_category_df['governance_score'], palette='inferno')\nax.set_xlabel(xlabel='Morningstar categories', fontsize=12)\nax.set_ylabel(ylabel='Governance score', fontsize=12)\nax.set_title(label='Distribution of Governance score of ETFs from different Morningstar categories', fontsize=16)\nplt.xticks(rotation=60)\nplt.show()","da647b38":"Bar chart of mutual funds' and ETFs' Morningstar categories","81c49a56":"Importing libraries","e5c70b54":"Creation of numerical datasets tha remove records with null values","298d24e3":"Histogram of mutual funds' and ETFs' returns - YearToDate, 3Years, and 5Years","3ff3437a":"Box plot of mutual funds and ETFs Social score by categories","db02fab5":"Violin plot of mutual funds and ETFs ESG score by categories","f6ac8b6e":"Bar chart of mutual funds and ETFs Environmental score by categories","8bf59357":"Letter value plot of mutual funds and ETFs Governance score by categories","b5ea137e":"Reading datasets with pandas"}}