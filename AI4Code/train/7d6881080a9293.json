{"cell_type":{"6e4f5c5d":"code","384527cb":"code","f2e4d36d":"code","246dd035":"code","5d158df8":"code","7934a520":"code","0d089da3":"code","08da2bca":"markdown","d89c622d":"markdown","fa3b446f":"markdown","39db3e22":"markdown","e21213c3":"markdown","13eb9f71":"markdown","9d716518":"markdown","0e16f855":"markdown","8790142f":"markdown","f99d8b14":"markdown"},"source":{"6e4f5c5d":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport os\nimport cv2\nimport pytesseract\nfrom pytesseract import Output\nfrom PIL import Image","384527cb":"images_directory = \"..\/input\/menu-images-dataset\/2021_5_data\/test_image\"\nimg_paths = sorted([\n    os.path.join(images_directory, fname) for fname in os.listdir(images_directory) if fname.endswith(\".JPEG\")\n    ])\nprint(len(img_paths))","f2e4d36d":"img = plt.imread(img_paths[20])\nfig, ax = plt.subplots()\nfig.set_figheight(10)\nfig.set_figwidth(10)\nax.imshow(img)\nax.axis('off')\nplt.title('sample image from the data', \n                               fontweight =\"bold\")\nplt.show()","246dd035":"extractedInformation = pytesseract.image_to_string(Image.open(img_paths[20]))\nprint(extractedInformation)","5d158df8":"di = pytesseract.image_to_data(Image.open(img_paths[20]), output_type=Output.DICT)\nprint(di.keys())","7934a520":"img = cv2.imread(img_paths[20])\n\nfor i in range(len(di['text'])):\n    if int(di['conf'][i]) > 60:\n        (x, y, w, h) = (di['left'][i], di['top'][i], di['width'][i], di['height'][i])\n        img = cv2.rectangle(img, (x, y), (x + w, y + h), (0, 255, 0), 2)\n\nfig, ax = plt.subplots()\nfig.set_figheight(10)\nfig.set_figwidth(10)\nax.imshow(np.flip(img,(2)))\nax.axis('off')\nplt.title('bounding box information', \n                               fontweight =\"bold\")\nplt.show()","0d089da3":"for i in range(len(di['text'])):\n    if int(di['conf'][i]) > 20:\n        (x, y, w, h) = (di['left'][i], di['top'][i], di['width'][i], di['height'][i])\n        img = cv2.rectangle(img, (x, y), (x + w, y + h), (0, 255, 0), 2)\n\nfig, ax = plt.subplots()\nfig.set_figheight(10)\nfig.set_figwidth(10)\nax.imshow(np.flip(img,(2)))\nax.axis('off')\nplt.title('bounding box information with low confidence threshold', \n                               fontweight =\"bold\")\nplt.show()","08da2bca":"counting and visulise some sample data","d89c622d":"here, we can find the different possible orientations of extracted text as listed with dict_keys. ","fa3b446f":"Now it seems good compared to previous times as we have reduced the confidence threshold value. we can observe that as a thresold value reduced we can get more informations from the image.\n\nThanks for reading this notebook. ","39db3e22":"**Bounding Box with the text**\n\n\nLet's visualize the location details of the all extracted text from the image using the bounding box. it could be more convient to use this information for post processing.\n\nlet's extract text data in a different way than above we did using image_to_string.","e21213c3":"> *it seems pytesseract doing well with the quality of images we have in the data.*","13eb9f71":"from the above result we can identify the location of each extracted text based on its accuracy threshold. We can also see some false negative results in the image but it could be improved with high threshold values. Let's see how to perform with a higher threshold than above.","9d716518":"**Extracting Text from the images**\n\ntext in images seems clear and digitally typed. it could be easy to recognise from the digital fonts instead of handwritten text.","0e16f855":"**Strategy and Planning**\n\nhere we have covered following section for text reading from the images\n\n1. Analyze the image data\n2. Extract textual information usig OCR\n3. Organising the values\n4. Tablulating the data","8790142f":"Importing some useful python libraries for analysing the data","f99d8b14":"**Introduction**\n\nThis notebook shows how we can apply OCR for extracting the text information from the text image data. We are going to analyze some of the data samples to extract some useful content. Some of the insight can be used for further applications. I have tried to make this notebook as short as possible to explore the text extraction process."}}