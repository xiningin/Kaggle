{"cell_type":{"04e6ca3a":"code","21dc22e5":"code","81e6f6c4":"code","ca7afe66":"code","c378340a":"code","23c20ec7":"code","72656abe":"code","28cc02ee":"code","dab17141":"code","cda14c69":"code","ccf8c934":"code","5586c30f":"code","f38d63f2":"code","07122822":"code","0ffed2f9":"code","2e94b4a4":"markdown","fbfad9ea":"markdown","9511bdf8":"markdown","30bc1f64":"markdown","f30812d8":"markdown","de7bddba":"markdown","82c1cc67":"markdown","da77612b":"markdown"},"source":{"04e6ca3a":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport missingno as msno\nimport matplotlib.pyplot as plt\nimport scipy.stats as st\nimport matplotlib.patches as mpatches\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","21dc22e5":"df_ds = pd.read_csv('\/kaggle\/input\/pesquisa-data-hackers-2019\/datahackers-survey-2019-anonymous-responses.csv')\nprint(df_ds.shape)\ndf_ds.head()","81e6f6c4":"sns.countplot(df_ds[\"('P2', 'gender')\"])\nplt.show()","ca7afe66":"col_search = \"('P8', 'degreee_level')\"\n\ndf_agg = df_ds.groupby([col_search,\"('P2', 'gender')\"]).agg({col_search:'count',})\ndf_agg = df_agg\/df_agg.groupby(level=(1)).sum()\n\ndf_agg.reset_index(level=1, inplace=True)\n\nplt.figure(figsize=(16,6))\n\ncolors = ['orange' if s == 'Feminino' else 'lightblue' for s in df_agg[\"('P2', 'gender')\"]]\nplt.bar(np.arange(len(df_agg.index)),df_agg[col_search],color=colors)\nplt.xticks(np.arange(len(df_agg.index)),df_agg.index,rotation=90)\n\nred_patch = mpatches.Patch(color='orange', label='Feminino')\nblue_patch = mpatches.Patch(color='lightblue', label='Masculino')\n\nplt.legend(handles=[red_patch, blue_patch])\nplt.show()","c378340a":"df_ds[\"('P10', 'job_situation')\"].value_counts()*100\/df_ds.size","23c20ec7":"col_search = \"('P10', 'job_situation')\"\n\ndf_agg = df_ds.groupby([col_search,\"('P2', 'gender')\"]).agg({col_search:'count',})\ndf_agg = df_agg\/df_agg.groupby(level=(1)).sum()\n\ndf_agg.reset_index(level=1, inplace=True)\n\nplt.figure(figsize=(16,6))\n\ncolors = ['orange' if s == 'Feminino' else 'lightblue' for s in df_agg[\"('P2', 'gender')\"]]\nplt.bar(np.arange(len(df_agg.index)),df_agg[col_search],color=colors)\nplt.xticks(np.arange(len(df_agg.index)),df_agg.index,rotation=90)\n\nred_patch = mpatches.Patch(color='orange', label='Feminino')\nblue_patch = mpatches.Patch(color='lightblue', label='Masculino')\n\nplt.legend(handles=[red_patch, blue_patch])\nplt.show()","72656abe":"def transform_string(st):\n    \n    limits = [float(s[:-4].replace('.','')) for s in st.split() if s[-4:]=='\/m\u00eas']\n    if len(limits) == 2:\n        value = np.mean(np.array(limits))\n    elif limits[0]>10000:\n        value = limits[0]\n    else:\n        value = limits[0]\/2\n    return value\n\ndf_ds[\"('P16', 'salary_range')\"].fillna('0.0\/m\u00eas',inplace=True)\n\ndf_ds['salary'] = df_ds.apply(lambda row: transform_string(row[\"('P16', 'salary_range')\"]),axis=1)\n\ndf_ds[[\"('P16', 'salary_range')\",'salary']].head()","28cc02ee":"sns.distplot(df_ds[\"salary\"],bins=20)\nplt.show()","dab17141":"sns.distplot(df_ds.loc[df_ds[\"('P2', 'gender')\"]=='Masculino',[\"salary\"]],bins=20,label='Masculino')\nsns.distplot(df_ds.loc[df_ds[\"('P2', 'gender')\"]=='Feminino',[\"salary\"]],bins=20,label='Feminino')\nplt.legend(loc=0)\nplt.show()","cda14c69":"col_search = \"('P10', 'job_situation')\"\n\nmedianprops = dict(linestyle='-', linewidth=4)\nbp_dict = df_ds.boxplot(column='salary',by=[col_search,\"('P2', 'gender')\"],rot=90,\n                        figsize=(20,8),fontsize=16,grid=True,return_type='both',patch_artist = True,\n                        medianprops=medianprops)\n\ndf_agg = df_ds.groupby([col_search,\"('P2', 'gender')\"]).agg({col_search:'count',})\ndf_agg = df_agg\/df_agg.groupby(level=(1)).sum()\n\ndf_agg.reset_index(level=1, inplace=True)\n\ncolors = ['orange' if s == 'Feminino' else 'lightblue' for s in df_agg[\"('P2', 'gender')\"]]\n\nfor row_key, (ax,row) in bp_dict.iteritems():\n    ax.set_xlabel('')\n    for i,box in enumerate(row['boxes']):\n        box.set_facecolor(colors[i])\n\nred_patch = mpatches.Patch(color='orange', label='Feminino')\nblue_patch = mpatches.Patch(color='lightblue', label='Masculino')\n\nplt.legend(handles=[red_patch, blue_patch])\nplt.title('Diferen\u00e7as de sal\u00e1rio por tipo de trabalho entre homens e mulheres')\nplt.show()","ccf8c934":"df_stats = df_ds.groupby(\"('P2', 'gender')\").agg({'salary':['mean','std','count']})\nmean_fem, std_fem, n_fem = df_stats.loc['Feminino']\nmean_mas, std_mas, n_mas = df_stats.loc['Masculino']\n\nmedia_dif = mean_mas - mean_fem\n\nbeta = 0.975 #Bicaudal\nz_norm = st.norm.ppf(beta)\n\nstd_dif = np.sqrt((std_mas**2)\/n_mas+(std_fem**2)\/n_fem)\nd = z_norm*std_dif\n\nz = media_dif\/std_dif\np_value = 1 - st.norm.cdf(z)\n\ndf_st = pd.DataFrame([['global',n_fem,n_mas,media_dif,std_dif,(media_dif-d),(media_dif+d),z,p_value],],\n                     columns=['job','n feminino','n masculino','mean_dif','std_dif','inter_inf','inter_sup','z','p_value'])\ndf_st","5586c30f":"col_search = \"('P10', 'job_situation')\"\n\nfor job_type in ['Empregado (CTL)', 'Estagi\u00e1rio', 'Freelancer','Empreendedor ou Empregado (CNPJ)',\n                 'Servidor P\u00fablico',]:\n\n\n    df_stats = df_ds.loc[df_ds[col_search]==job_type].groupby(\"('P2', 'gender')\").agg({'salary':['mean','std','count']})\n    mean_fem, std_fem, n_fem = df_stats.loc['Feminino']\n    mean_mas, std_mas, n_mas = df_stats.loc['Masculino']\n\n    media_dif = mean_mas - mean_fem\n\n    std_dif = np.sqrt((std_mas**2)\/n_mas+(std_fem**2)\/n_fem)\n    d = z_norm*std_dif\n\n    z = media_dif\/std_dif\n    p_value = 1 - st.norm.cdf(z)\n\n    df_st = df_st.append(pd.DataFrame([[job_type,n_fem,n_mas,media_dif,std_dif,(media_dif-d),(media_dif+d),z,p_value],],\n                         columns=['job','n feminino','n masculino','mean_dif','std_dif','inter_inf','inter_sup','z','p_value']),\n                         ignore_index=True)\ndf_st","f38d63f2":"col_search = \"('P17', 'time_experience_data_science')\"\n\ndf_agg = df_ds.groupby([col_search,\"('P2', 'gender')\"]).agg({col_search:'count',})\ndf_agg = df_agg\/df_agg.groupby(level=(1)).sum()\n\ndf_agg.reset_index(level=1, inplace=True)\n\nplt.figure(figsize=(16,6))\n\ncolors = ['orange' if s == 'Feminino' else 'lightblue' for s in df_agg[\"('P2', 'gender')\"]]\nplt.bar(np.arange(len(df_agg.index)),df_agg[col_search],color=colors)\nplt.xticks(np.arange(len(df_agg.index)),df_agg.index,rotation=90)\n\nred_patch = mpatches.Patch(color='orange', label='Feminino')\nblue_patch = mpatches.Patch(color='lightblue', label='Masculino')\n\nplt.legend(handles=[red_patch, blue_patch])\nplt.show()","07122822":"medianprops = dict(linestyle='-', linewidth=4)\nbp_dict = df_ds.boxplot(column='salary',by=[col_search,\"('P2', 'gender')\"],rot=90,\n                        figsize=(20,8),fontsize=16,grid=True,return_type='both',patch_artist = True,\n                        medianprops=medianprops)\n\ndf_agg = df_ds.groupby([col_search,\"('P2', 'gender')\"]).agg({col_search:'count',})\ndf_agg = df_agg\/df_agg.groupby(level=(1)).sum()\n\ndf_agg.reset_index(level=1, inplace=True)\n\ncolors = ['orange' if s == 'Feminino' else 'lightblue' for s in df_agg[\"('P2', 'gender')\"]]\n\nfor row_key, (ax,row) in bp_dict.iteritems():\n    ax.set_xlabel('')\n    for i,box in enumerate(row['boxes']):\n        box.set_facecolor(colors[i])\n\nred_patch = mpatches.Patch(color='orange', label='Feminino')\nblue_patch = mpatches.Patch(color='lightblue', label='Masculino')\n\nplt.legend(handles=[red_patch, blue_patch])\nplt.title('Diferen\u00e7as de sal\u00e1rio por tipo de trabalho entre homens e mulheres')\nplt.show()","0ffed2f9":"df_st = pd.DataFrame([], columns=['job','n feminino','n masculino','mean_dif','std_dif','inter_inf','inter_sup','z','p_value'])\n\nfor exp_type in ['N\u00e3o tenho experi\u00eancia na \u00e1rea de dados','Menos de 1 ano','de 1 a 2 anos','de 2 a 3 anos','de 4 a 5 anos','de 6 a 10 anos','Mais de 10 anos',]:\n\n\n    df_stats = df_ds.loc[df_ds[col_search]==exp_type].groupby(\"('P2', 'gender')\").agg({'salary':['mean','std','count']})\n    mean_fem, std_fem, n_fem = df_stats.loc['Feminino']\n    mean_mas, std_mas, n_mas = df_stats.loc['Masculino']\n\n    media_dif = mean_mas - mean_fem\n\n    std_dif = np.sqrt((std_mas**2)\/n_mas+(std_fem**2)\/n_fem)\n    d = z_norm*std_dif\n\n    z = media_dif\/std_dif\n    p_value = 1 - st.norm.cdf(z)\n\n    df_st = df_st.append(pd.DataFrame([[exp_type,n_fem,n_mas,media_dif,std_dif,(media_dif-d),(media_dif+d),z,p_value],],\n                         columns=['job','n feminino','n masculino','mean_dif','std_dif','inter_inf','inter_sup','z','p_value']),\n                         ignore_index=True)\ndf_st","2e94b4a4":"# Signific\u00e2ncia estat\u00edstica das diferen\u00e7as\n<a id = 'significancia'><\/a>","fbfad9ea":"Os gr\u00e1ficos mostram que mulheres ganham, na m\u00e9dia, menos do que os homems em todas as vagas do mercado. Mulheres tamb\u00e9m tem uma ligeira prefer\u00eancia pela academia. \u00c9 sabido que sal\u00e1rios na pesquisa e academia s\u00e3o menores quando comparados com o mercado de trabalho, e isto pode estar relacionado com os dois pontos anteriores. Infelizmente, n\u00e3o temos dados de sal\u00e1rio na parte da \u00e1rea acad\u00eamica e de pesquisa para aprofundar sobre isto. Para verificar a significancia estat\u00edstica destas diferen\u00e7as faremos a an\u00e1lisa por categoria de trabalho usando estat\u00edstica inferencial.","9511bdf8":"# Pres\u00ean\u00e7a em data science (Homens vs Mulheres)\n<a id='presenca'><\/a>","30bc1f64":"## Escolaridade e Tipo de emprego para homens e Mulheres: An\u00e1lise porcentual\n<a id='escol'><\/a>","f30812d8":"An\u00e1lise das diferen\u00e7as de sal\u00e1rios entre homens e mulheres no campo de data science no Brasil. A an\u00e1lise tem componentes gr\u00e1ficos e estat\u00edstico:\n* [Presen\u00e7a em data science (Homens vs Mulheres)](#presenca)\n* [Escolaridade e Tipo de emprego para homens e Mulheres: An\u00e1lise porcentual](#escol)\n* [Quest\u00e3o salarial, homens ganham mais do que as mulheres?](#salario)\n* [Signific\u00e2ncia estat\u00edstica das diferen\u00e7as](#significancia)\n* [Conclus\u00f5es](#conclusao)","de7bddba":"# Quest\u00e3o salarial, homens ganham mais do que as mulheres?\n<a id='salario'><\/a>\n\nDevido a que o sal\u00e1rio est\u00e1 dado por faixa, iremos aproximar o valor de cada faixa usando a m\u00e9dia respectiva.","82c1cc67":"# Discrimina\u00e7\u00e3o por tempo de experi\u00eancia em data science\n","da77612b":"# Conclus\u00e3o\n<a id='conclusao'><\/a>\n\n* Depois de verificar a signific\u00e2ncia estat\u00edstica das diferen\u00e7as de sal\u00e1rio para mulheres e homens por tipo de trabalho, podemos concluir que na m\u00e9dia existe sim uma diferen\u00e7a de sal\u00e1rio no mercado, sendo que mulheres ganham aproximadamente 1200 reais a menos do que os homens para vagas CLT.\n* Essa diferen\u00e7a se extende quando olhamos para as faixas salariais. O teste estat\u00edstico mostra que, tirando tempo de experi\u00eancia de menos de 1 ano e entre 6 a 10 anos onde a diferen\u00e7a \u00e9 pequena, os homens ganham mais do que as mulheres.\n* Ainda que mulheres tenham maior prefer\u00eancia por trabalhar na parte acad\u00eamica e de pesquisa, em compara\u00e7\u00e3o com os homens, n\u00e3o temos como explorar quest\u00e3o de sal\u00e1rios nesta \u00e1rea.\n* Fica a quest\u00e3o do porque da baixa presen\u00e7a de mulheres em data science...\n\n# Limita\u00e7\u00f5es\n\n\nAinda que se apresentou diferen\u00e7a nas outras \u00e1reas do mercado (diferente a CLT) esta n\u00e3o \u00e9 conclusiva dado o baixo n\u00famero de amostras por categoria e a baixa sgnific\u00e2ncia estat\u00edstica. Tamb\u00e9m \u00e9 importante notar que o sal\u00e1rio usado n\u00e3o \u00e9 o valor real, mas sim uma aproxima\u00e7\u00e3o dada a partir da faixa."}}