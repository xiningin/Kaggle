{"cell_type":{"fd552400":"code","b4c35de5":"code","8c7f9576":"code","d59da7bb":"code","558599eb":"code","9c46a4c8":"code","74292829":"code","7e29e5a3":"code","bf4a9543":"code","1739a796":"code","72a6b400":"code","44ffaa01":"code","958b42be":"code","8d8aaf43":"code","5fbc30c5":"code","dc3738a4":"markdown","4d65619a":"markdown"},"source":{"fd552400":"# All libraries we will need\nimport pandas as pd # To store data as a dataframe\nimport requests # to get the data of an url\nfrom bs4 import BeautifulSoup # to parse the html data and find what we want\nimport re # Regular expressions library, it may be useful \nprint('Setup complete!')","b4c35de5":"# We need the url of the page we are gonna scrape \nurl = 'https:\/\/www.nytimes.com\/puzzles\/sudoku\/hard'\nresponse = requests.get(url) # Get content of page","8c7f9576":"response.text","d59da7bb":"# Parse the webpage text as html\npage_html = BeautifulSoup(response.text, 'html.parser') \npage_html","558599eb":"# Get only script tag\nscriptsContainer = page_html.find('script', attrs={'type':'text\/javascript'}) #Script tag, contains all sudokus all difficulties, all hints, all solutions\nscriptsContainer","9c46a4c8":"# Get content of script\nwithNoTag = scriptsContainer.contents[0]\nwithNoTag","74292829":"import json","7e29e5a3":"# Split the 'window.gameData = ' part, and get json string \nhardSudoku = withNoTag.split('.gameData = ')[1]\nhardSudoku\n","bf4a9543":"# Make json object\njsonOjb = json.loads(hardSudoku)\njsonOjb\n","1739a796":"# To access [diffculty] [the data] [the actual puzzle]\nsudokuHard = jsonOjb['hard']['puzzle_data']['puzzle']\nsudokuMedium = jsonOjb['medium']['puzzle_data']['puzzle']\nsudokuEasy = jsonOjb['easy']['puzzle_data']['puzzle']","72a6b400":"sudokuHard","44ffaa01":"# JSON object to string without commas, as is the format the sudoku importer accepts\ndef jsonPuzzleToString(obj):\n    sudokuStr = ''\n    for i in obj:\n        sudokuStr += str(i)\n    return sudokuStr","958b42be":"sudokuHardStr = jsonPuzzleToString(sudokuHard)\nsudokuMediumStr = jsonPuzzleToString(sudokuMedium)\nsudokuEasyStr = jsonPuzzleToString(sudokuEasy)\nsudokuHardStr","8d8aaf43":"sudokuMediumStr","5fbc30c5":"sudokuEasyStr","dc3738a4":"## This sudokus are made with javascript so they are made with json data. We can't access the html data of the sudokus but we can access to the json data, as we will see.","4d65619a":"## We made a web scrapper to extract sudokus data, to import to this page: https:\/\/www.sudokuwiki.org\/sudoku.htm to understand how to solve difficult ones step by step.\n\n## Past tutorial on data mining can be found here: https:\/\/www.kaggle.com\/ajpass\/data-mining-web-scrapping-vol-2-pokedex-pandas\n\nData Mining - Web Scrapping: The saga:\n1. https:\/\/www.kaggle.com\/ajpass\/data-mining-web-scrapper-vol-1-pokedex # Scrapping a pokedex, all pokemon with all stats\n2. https:\/\/www.kaggle.com\/ajpass\/data-mining-web-scrapping-vol-2-pokedex-pandas # Scrapping a pokedex, using a diferent method than number 1, easier but in case a column has multiple values, in some cases you may need to do some cleaning. Result similar as 1, only changes: Type and ID. \n3. https:\/\/www.kaggle.com\/ajpass\/data-mining-web-scrapper-vol-3-sudoku-to-string # Extract sudokus data and transform it to string\n4. https:\/\/www.kaggle.com\/ajpass\/data-mining-web-scrapping-vol-66-kaggle-datasets # It's about scrapping the top 20 kagglers in datasets ranking\n"}}