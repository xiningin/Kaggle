{"cell_type":{"53968c81":"code","781ee7b6":"code","19caff89":"code","aa6fc12f":"code","30bdf4b0":"code","28fad229":"code","6ab0e43c":"code","be7debe4":"code","eb3001ad":"code","67257e89":"code","c02a242e":"code","2a2141e5":"code","d05d0376":"code","ad5863b9":"code","023b2e61":"code","e3f73381":"code","11a5ed93":"code","812aef1e":"code","a434264b":"code","a3f60618":"code","d916fa82":"code","4e6418e8":"code","daaf6714":"markdown","c9eaf57a":"markdown","906bb058":"markdown","e737a1e0":"markdown","c18d37bd":"markdown","a945de51":"markdown","a18338b8":"markdown","b2794980":"markdown","e584bf41":"markdown","4eaa9330":"markdown","b11733b1":"markdown"},"source":{"53968c81":"!pip install pycaret","781ee7b6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport warnings\nfrom pandas_profiling import ProfileReport \nfrom pycaret.regression import *\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","19caff89":"df = pd.read_csv('..\/input\/ai4all-project\/results\/deconvolution\/CIBERSORTx_Results_Krasnow_facs_droplet.csv', encoding='ISO-8859-2')\ndf.head()","aa6fc12f":"df.isna().sum()","30bdf4b0":"def plot_count(feature, title, df, size=1):\n    f, ax = plt.subplots(1,1, figsize=(4*size,4))\n    total = float(len(df))\n    g = sns.countplot(df[feature], order = df[feature].value_counts().index[:20], palette='Set3')\n    g.set_title(\"Number and percentage of {}\".format(title))\n    if(size > 2):\n        plt.xticks(rotation=90, size=8)\n    for p in ax.patches:\n        height = p.get_height()\n        ax.text(p.get_x()+p.get_width()\/2.,\n                height + 3,\n                '{:1.2f}%'.format(100*height\/total),\n                ha=\"center\") \n    plt.show()","28fad229":"plot_count(\"B cell\", \"B cell\", df,4)","6ab0e43c":"report_df = ProfileReport(df)\nreport_df","be7debe4":"# Numerical features\nNumerical_feat = [feature for feature in df.columns if df[feature].dtypes != 'O']\nprint('Total numerical features: ', len(Numerical_feat))\nprint('\\nNumerical Features: ', Numerical_feat)","eb3001ad":"index_int_float = ['Unnamed_0', 'B_cell', 'Basal', 'Basophil\/Mast', 'Ciliated', 'Club', 'Dendritic', 'Goblet', 'Ionocyte', 'Monocytes\/macrophages', 'Neutrophil', 'T_cell', 'sum']      \n\nplt.figure(figsize=[20,12])\ni = 1\nfor col in index_int_float :\n    plt.subplot(5,10,i)\n    sns.violinplot(x=col, data= df, orient='v')\n    sns.despine()\n    i = i+1\nplt.tight_layout()\nplt.show()","67257e89":"# categorical features\ncategorical_feat = [feature for feature in df.columns if df[feature].dtypes=='O']\nprint('Total categorical features: ', len(categorical_feat))\nprint('\\n',categorical_feat)","c02a242e":"index_str = ['czb_id', 'viral_load']\n\nplt.figure(figsize=[30,10])\ni = 1\nfor col in index_str :\n    plt.subplot(4,10,i)\n    sns.scatterplot(x=col, y = 'B_cell' ,data= df)\n    sns.despine()\n    i = i+1\nplt.tight_layout()\nplt.show()","2a2141e5":"df.dtypes","d05d0376":"int_features = ['Unnamed_0']\n        \nfloat_features = ['Unnamed_0', 'Basal', 'Basophil\/Mast', 'Ciliated', 'Club', 'Dendritic', 'Goblet', 'Ionocyte', 'Monocytes\/macrophages', 'Neutrophil', 'T_cell', 'sum']\n\nobj_features = ['czb_id', 'viral_load']\n\nexp_reg = setup(df, #Train Data\n                target = 'B_cell',  #Target\n                categorical_features = obj_features, # Categorical Features\n                numeric_features = int_features + float_features, # Numeric Features\n                normalize = True, # Normalize Dataset\n                remove_outliers = True, # Remove 5% Outliers\n                remove_multicollinearity = True, # Remove Multicollinearity\n                silent = True # Process Automation\n               )","ad5863b9":"compare_models(blacklist = ['tr', 'catboost'], sort = 'RMSLE')","023b2e61":"model_br = create_model('br')\nmodel_lightgbm = create_model('lightgbm')\nmodel_xgboost = create_model('xgboost')\nmodel_ridge = create_model('ridge')","e3f73381":"tuned_br = tune_model('br')\ntuned_lightgbm = tune_model('lightgbm')\ntuned_xgboost = tune_model('xgboost')\ntuned_ridge = tune_model('ridge')","11a5ed93":"plot_model(tuned_br, plot = 'learning')","812aef1e":"plot_model(tuned_lightgbm, plot = 'learning')","a434264b":"plot_model(tuned_xgboost, plot = 'learning')","a3f60618":"plot_model(tuned_ridge, plot = 'learning')","d916fa82":"blender = blend_models(estimator_list = [tuned_br, tuned_lightgbm, tuned_xgboost, tuned_ridge])","4e6418e8":"display(plot_model(blender, plot = 'learning'))","daaf6714":"#Display Learning Curve\n\n#Bayesian Ridge","c9eaf57a":"#Compare Models","906bb058":"#Blend Models","e737a1e0":"#Extreme Gradient Boosting","c18d37bd":"DAs War's Kaggle Notebook Runner: Mar\u00edlia Prata  @mpwolke","a945de51":"#Models Tuning","a18338b8":"#Create and Train Models","b2794980":"#Display Learning Curve for Blending","e584bf41":"#Gradient Boosting Regressor","4eaa9330":"#AI4ALL Program\n\nAI4ALL is a US-based nonprofit dedicated to increasing diversity and inclusion in AI education, research, development, and policy.\n\nThe idea for AI4ALL originated in early 2015. Dr. Olga Russakovsky, a Stanford University PhD student at the time, approached her advisor, renowned AI researcher Dr. Fei-Fei Li, with an idea for how to create more access for underrepresented people in the field of artificial intelligence. Later that year, along with Dr. Rick Sommer\u2013Executive Director of Stanford Pre-Collegiate Studies\u2013the trio founded SAILORS. This program would be the first of its kind: a summer outreach program for high school girls to learn about human-centered AI.\n![](https:\/\/encrypted-tbn0.gstatic.com\/images?q=tbn%3AANd9GcRksc8_YQf_wgAkfbNY-p0VeDFsd0JlaA-oeg&usqp=CAU)cs.illinois.edu","b11733b1":"#Ridge Regression"}}