{"cell_type":{"d910501b":"code","f8e53896":"code","96432e49":"code","3084d7a0":"code","ed854c3f":"code","76b37185":"code","3ed62ae1":"code","51fca5be":"code","6c332058":"code","0fd2b975":"code","ca0e0001":"code","288d1f23":"code","b805cfbf":"code","123cf064":"code","763bb8d5":"code","2ede507c":"code","1dee38eb":"code","ed6d8950":"code","8631b0c2":"code","0d1ba6fb":"code","73abd863":"code","586e271e":"code","157a6f55":"code","bd45c889":"markdown","a399179b":"markdown","c855771d":"markdown","ed55fd3f":"markdown","02048c42":"markdown","5e635745":"markdown","02214325":"markdown","6d593ea7":"markdown","65762e99":"markdown","6722c3c8":"markdown","e824d980":"markdown","a281cc65":"markdown","6035caf1":"markdown","20791416":"markdown","e3ddfcbc":"markdown","d6cddb65":"markdown","8a1ad3c8":"markdown","c243d81d":"markdown","38393d0c":"markdown","95e87cb5":"markdown","10554e58":"markdown","c66e7ca1":"markdown","ee264ea6":"markdown"},"source":{"d910501b":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","f8e53896":"# Read the data into a pandas dataframe\ndata = pd.read_csv('\/kaggle\/input\/churn-modelling\/Churn_Modelling.csv', index_col = 'RowNumber')\n\n# View the first 5 records\ndata.head()","96432e49":"data.info()","3084d7a0":"# Of these 10,000, how many exited?\ndata['Exited'].value_counts()","ed854c3f":"# Use data_continuous as a slice of the data frame containing only the continuous variables\ndata_continuous = data[['Exited','CreditScore','Age','Tenure','Balance','NumOfProducts','EstimatedSalary']]\n\ndata_continuous.describe()","76b37185":"# Group by Exited and view the mean for each continuous variable\ndata_continuous.groupby('Exited').mean()","3ed62ae1":"# Generate overlaid histograms for continuous variables\n# Remained = cornflowerblue\n# Exited = orangered\nfor feature in ['CreditScore','Age', 'Tenure','Balance','NumOfProducts','EstimatedSalary']:\n    remained = list(data[data['Exited'] == 0][feature].dropna())\n    exited = list(data[data['Exited'] == 1][feature].dropna())\n    xmin = min(min(remained), min(exited))\n    xmax = max(max(remained), max(exited))\n    width = (xmax - xmin) \/ 40\n    sns.distplot(remained, color=\"cornflowerblue\", kde=False, bins=np.arange(xmin, xmax, width))\n    sns.distplot(exited, color=\"orangered\", kde=False, bins=np.arange(xmin, xmax, width))\n    plt.legend(['Remained', 'Exited'])\n    plt.title(f'Overlaid histogram for {feature}')\n    plt.show()","51fca5be":"data.head()","6c332058":"data_categorical = data[['Geography','Gender','HasCrCard','IsActiveMember','Exited']]\ndata_categorical.head()","0fd2b975":"data_categorical.info()","ca0e0001":"for i, feature in enumerate(['Geography','Gender','HasCrCard','IsActiveMember']):\n    plt.figure(i)\n    sns.catplot(x=feature, y='Exited', data=data, kind='point', aspect=2, )","288d1f23":"for i, feature in enumerate(['Geography','Gender','HasCrCard','IsActiveMember']):\n    plt.figure(i)\n    sns.catplot(x=feature, y='Exited', data=data, kind='bar', palette='pastel', aspect=2, )","b805cfbf":"data.pivot_table('Exited', index='Gender', columns='Geography', aggfunc='count')","123cf064":"data.pivot_table('Exited', index='Gender', columns='IsActiveMember', aggfunc='count')","763bb8d5":"data.pivot_table('Exited', index='Geography', columns='IsActiveMember', aggfunc='count')","2ede507c":"data.head()","1dee38eb":"data.drop(['CustomerId','Surname'], axis=1, inplace=True)\ndata.head()","ed6d8950":"gender_ind = {'Male': 0, 'Female': 1}\n\ndata['Gender'] = data['Gender'].map(gender_ind)\ndata.head()","8631b0c2":"geo_ind = {'France': 0, 'Spain': 1, 'Germany': 2}\n\ndata['Geography'] = data['Geography'].map(geo_ind)\ndata.head()","0d1ba6fb":"data['Geography'].value_counts()","73abd863":"data.columns","586e271e":"data.to_csv('churn_cleaned.csv')","157a6f55":"import os \nfor dirname, _, filenames in os.walk('\/kaggle\/'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","bd45c889":"### Drop unneeded variables\n- CustomerId\n- Surname","a399179b":"## Data Cleaning","c855771d":"## Explore Target Variable: Exited\n- Exited = 0 --> did not leave our company\n- Exited = 1 --> left the company","ed55fd3f":"## Write to CSV\n\nWill be saved to: **\/working\/** directory\n\nFile named: **churn_cleaned.csv**","02048c42":"## Convert Gender to 0 or 1\n- to prep for machine learning","5e635745":"## Convert Geography to numeric\n- France = 0\n- Spain = 1\n- Germany = 2","02214325":"## Histograms for Continuous Variables\n\nOn seaborn distplot see: https:\/\/seaborn.pydata.org\/generated\/seaborn.distplot.html\n\nTo select colors, see:\nhttps:\/\/python-graph-gallery.com\/100-calling-a-color-with-seaborn\/","6d593ea7":"## Plot Categorical Features","65762e99":"# Explore Categorical Features\n- Geography\n- Gender\n- HasCrCard\n- isActiveMember\n\n- and Target: Exited","6722c3c8":"### Same data with a bar plot this time ...","e824d980":"**Interpretation:** As observed from the mean scores above, there are no huge discepancies between customers who remained vs. exited.","a281cc65":"### Point plots to indicate proportions exited per category","6035caf1":"# Churn Descriptive Analysis\nDescriptive analysis using the [Churn Modelling](https:\/\/www.kaggle.com\/shubh0799\/churn-modelling\/) data set.\n\nIncludes:\n- Exploring and plotting continuous variables\n- Exploring and plotting categorical variables\n- Converting categorical variables to numeric indicators in preparation for machine learning\n- Output a cleaned CSV file","20791416":"### Interpretation\n- **Geography:** German customers are much more likely to exit.\n- **Gender:** Women are more likely to exit than men.\n- **IsActiveMember:** Inactive members are more likely to exit.","e3ddfcbc":"**Observation on above:** There are no huge and obvious differences between the mean scores across these variables for customers who did or did not exit. The widest gaps in means are for Age and Balance, then CreditScore and NumOfProducts. Those who exited are on average older with a larger balance, slightly fewer avg products, and a slightly lower avg CreditScore.","d6cddb65":"## Imports\nIncludes standard code provided by Kaggle when setting up a notebook.","8a1ad3c8":"**NOTE: _No missing data!_** That's an issue we don't have to worry about with this data set.","c243d81d":"### View all file(s)","38393d0c":"## Explore Continuous Features\nWe'll explore these features, which are continuous:\n- CreditScore\n- Age\n- Tenure\n- Balance\n- NumOfProducts\n- Estimated Salary\n\nKeep Exited as the target variable for analysis","95e87cb5":"### Interpretation\n- There are no super strong relationships between these categorical variables.\n- Thus, each looks like it has its own degree of influence.","10554e58":"## Pivot Tables\n\nUse pivot tables to explore relationships between variables","c66e7ca1":"### Interpretation\n- Approx. 20% of our customers exited","ee264ea6":"## Read and Review the Data\nWe'll import the data to a data frame, then review basic info on the data."}}