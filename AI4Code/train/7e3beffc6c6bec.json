{"cell_type":{"b52b7e0f":"code","75d18b74":"code","dee6eef6":"code","b6efc3b4":"code","68af5867":"code","a316062d":"code","feff8a5c":"code","d4490be8":"code","3eea4ef0":"markdown","ca881b70":"markdown","2a0ce8fc":"markdown","f4bfbbfb":"markdown","fd2ed0b4":"markdown"},"source":{"b52b7e0f":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nimport datetime","75d18b74":"\nfp = \"..\/input\/jhu-covid19-deaths-21mar2020\/time_series_19-covid-Deaths.csv\"\ntime_series_deaths = pd.read_csv(fp)\ntime_series_deaths = time_series_deaths.rename(columns = {\"Country\/Region\":\"Country_Region\",\"Province\/State\":\"Province_State\"})\ntime_series_deaths.groupby(\"Country_Region\")\ntime_series_deaths.head()","dee6eef6":"\ntime_series_deaths_US = time_series_deaths.loc[time_series_deaths.Country_Region == 'US']\nprint(\"US deaths\",time_series_deaths_US.iloc[:,-1].sum())\ntime_series_deaths_Italy = time_series_deaths.loc[time_series_deaths.Country_Region == 'Italy']\ntime_series_deaths_Italy = time_series_deaths_Italy.T\nprint(\"Italy Deaths =\",time_series_deaths_Italy.values[-1])","b6efc3b4":"startdate  = datetime.date(2020,1,18)\ntoday = datetime.date(2020,3,21)\nt1 = today - startdate\ndays = str(t1)\ndays = int(days[:2])\n\nUS_deaths = []\nUS_deaths_date = []\nfor d in np.arange(42,days):\n  death = time_series_deaths_US.iloc[:,d+1].sum()\n  US_deaths.append(death)\n  date = time_series_deaths_US.columns[d]\n  US_deaths_date.append(date)\ny_US = US_deaths\nx = US_deaths_date\nfigure = plt.figure(figsize=[5,5])\nplt.xticks(np.arange(0,100,step=4))\nplt.title(\"US Deaths Since First Reported Death\")\nplt.plot(x,y_US)\nplt.show()\n","68af5867":"\ntime_series_deaths_Italy = time_series_deaths.loc[time_series_deaths.Country_Region == 'Italy']\ntime_series_deaths_Italy = time_series_deaths_Italy.T\n\ny_Italy = time_series_deaths_Italy.values[34:]\n\ntime_series_deaths_SK = time_series_deaths.loc[time_series_deaths.Country_Region == 'Korea, South']\ntime_series_deaths_SK = time_series_deaths_SK.T\n\ny_SK = time_series_deaths_SK.values[33:]\n\n\nx1 = np.arange(0,len(time_series_deaths_Italy.values[34:]))\nx = time_series_deaths_Italy.index[34:]\nfigure = plt.figure(figsize=[5,5])\nplt.xticks(np.arange(0,100,step=4))\nplt.title(\"Italy, US, South Korea Deaths Since First Death Report\")\ndays_fd = len(time_series_deaths_Italy.values)-4\nprint(\"Italy Deaths =\",time_series_deaths_Italy.values[-1])\nplt.plot(x1,y_Italy, 'g-',label = \"Italy\")\nplt.plot(y_US, label = \"US\")\nplt.plot(y_SK, label = \"South Korea\")\nplt.legend()\ndays_sinceItalyLD = days - 51 # days since Italy's Lock down\nprint(\"Days since italy's lock down (17 days after first death)= \",days_sinceItalyLD)","a316062d":"d=[0,-1,-2,-3,-4,-5,-6,-7,-8,-9]\nNew_deaths_rate_US=[]\nfor d in d:\n  today = time_series_deaths_US.iloc[:,d-1].sum()\n  yesterday = time_series_deaths_US.iloc[:,d-2].sum()\n  New_deaths_rate_US.append(today\/yesterday)\nNew_deaths_rate_US.reverse()\nNew_deaths_rate_US_v = np.array(New_deaths_rate_US)\n# Observed growth rate based on 6 day average\nRolling_day_average = New_deaths_rate_US_v.sum()\/len(New_deaths_rate_US)\nprint (\"Observed (US) growth rate based on 10 day average = \", Rolling_day_average)\nprint(\"Today's (US) growth rate = \",New_deaths_rate_US[-1])\nfig = plt.figure(figsize=(5,5))\none = [1]*len(New_deaths_rate_US)\nreported_onepointtwo = [1.2]*len(New_deaths_rate_US)\nrolling_average = [Rolling_day_average]*len(New_deaths_rate_US)\nplt.xticks(np.arange(0,len(New_deaths_rate_US_v)))\nplt.title(\"Ten Day Death Growth Rate (US)\")\nplt.plot(New_deaths_rate_US)\nplt.plot(reported_onepointtwo,'r-',label = \"Reported Average Growth Rate = 1.2\")\nplt.plot(one,'g',label = \"Exponential Decline\")\nplt.plot(rolling_average, color='black', linestyle='dashed',label = \"Rolling Average\")\n\nplt.show()\nd=[0,-1,-2,-3,-4,-5,-6,-7,-8,-9]\nNew_deaths_rate_Italy=[]\nfor d in d:\n  today = time_series_deaths_Italy.values[d-1]\n  yesterday = time_series_deaths_Italy.values[d-2]\n  New_deaths_rate_Italy.append(today\/yesterday)\nNew_deaths_rate_Italy.reverse() \nNew_deaths_rate_Italy_v = np.array(New_deaths_rate_Italy)\nNew_deaths_rate_Italy_v\n\n# Observed growth rate based on 10 day average\nRolling_day_average_Italy = New_deaths_rate_Italy_v.sum()\/len(New_deaths_rate_Italy)\nprint (\"Observed growth rate (Italy) based on 10 day average = \", Rolling_day_average_Italy)\nprint(\"Today's growth rate (Italy) = \",New_deaths_rate_Italy[-1])\nfig = plt.figure(figsize=(5,5))\nreported_onepointtwo = [1.2]*len(New_deaths_rate_Italy)\none = [1]*len(New_deaths_rate_Italy)\nrolling_average_Italy = [Rolling_day_average]*len(New_deaths_rate_Italy)\nplt.xticks(np.arange(0,len(New_deaths_rate_Italy_v)))\nplt.title(\"Ten Day Death Growth Rate (Italy)\")\nplt.plot(New_deaths_rate_Italy)\nplt.plot(one,'g-',label = \"Expontial Decline\")\nplt.plot(reported_onepointtwo,'r-',label=\"Reported Average Growth Rate 1.2\")\nplt.plot(rolling_average_Italy, color='black', linestyle='dashed',label = \"Rolling Average\")\nplt.legend()\nplt.show()","feff8a5c":"New_deaths_rate_US","d4490be8":"### Projects the observed rolling day average rate of change a day with the \n### reported rate\nreported_average = 1.2\nprojected_deaths = []\nprojected_death = time_series_deaths_US.iloc[:,-1].sum()*Rolling_day_average\nprojected_deaths_reported_average = []\nprojected_death_reported_average = time_series_deaths_US.iloc[:,-1].sum()*reported_average\n\nd = 14 # days projected\nfor i in np.arange(0,d):\n  projected_deaths.append(projected_death)\n  projected_death = projected_death*Rolling_day_average\n\n  projected_deaths_reported_average.append(projected_death_reported_average)\n  projected_death_reported_average = projected_death_reported_average*reported_average\n\nprint(\"Projected Deaths using observed growth\",projected_deaths[-1])\n\nspacing = d%8\nfig1 = plt.figure(figsize=[5,5])\nplt.xticks(np.arange(0, len(projected_deaths),spacing))\nplt.title(\"Projected US Deaths based on observed growth\")\nplt.plot(projected_deaths)\nplt.show()\n\nprint(\"Projected Deaths using reported growth rate\", projected_deaths_reported_average[-1])\nfig2 = plt.figure(figsize=[5,5])\nplt.xticks(np.arange(0,len(projected_deaths_reported_average),spacing))\nplt.title(\"Projected US Deaths based on reported growth\")\nplt.plot(projected_deaths_reported_average)\nplt.show()","3eea4ef0":" ## Comparing US and Italy's Death Rates ##\n\nConfirmed cases is a poor metric to follow, especially given the small sample size of test results available in the US.  Death reports are more accurate in both determining real growth rate and predicting future deaths.  This report will analyize the death rate trends of Italy and US (possibly more in the future) and project deaths given the current 6-day average death rate increase. \n\n\n\nData source\n\nhttps:\/\/github.com\/CSSEGISandData\/COVID-19","ca881b70":"## Looking two weeks ahead with the assumption that cases are generally resolved in 14 days.\n\nFirst the projected deaths are calculated using the 6-day average new death rate calculated above.  And then the projected deaths based on the reported 1.2 new cases a day.","2a0ce8fc":"# Verification that death total is relatively close to other reports\n","f4bfbbfb":"## Timeseries Data ##","fd2ed0b4":"## New Death Rate (NDR) is compared to the reported new infection rate of 1.2 ##\n\nThe new infection rate is reportably around 1.2.  This compares the NDR with the new infection rate.\n\n**When NDR averages below 1, the death rate will drop exponentially**"}}