{"cell_type":{"d6423313":"code","99e3dc55":"code","5fc5bf88":"code","3d95025d":"code","4340148b":"code","7a5b342f":"code","66b2214d":"code","aac25bbc":"code","258850bd":"code","5e31d032":"code","408e1655":"code","714ed831":"code","8c662d69":"code","ddc40449":"code","ff949bc4":"code","88ac693b":"code","46610d8b":"markdown","9a7f6591":"markdown","92e277f1":"markdown","5de4c18c":"markdown","30946e95":"markdown","da2cd9a1":"markdown"},"source":{"d6423313":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport seaborn as sns\nimport time\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as dates\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots","99e3dc55":"data0=pd.read_csv('..\/input\/earthquake-in-japan\/japan_20190101-20211009_query.csv')\ndata0[0:5]","5fc5bf88":"print(data0.columns.tolist())","3d95025d":"data0=data0.fillna('N')\ndata1=data0[['time','latitude','longitude','depth','mag',]]\ndata1[0:5]","4340148b":"data2=pd.DataFrame(columns=data1.columns.tolist())\nfor i,item in enumerate(data1['time']):\n    if item[0:4]=='2019':\n        data2=pd.concat([data2,data1.loc[i:i]])\ndata2=data2.sort_values(['time']).reset_index(drop=True)        ","7a5b342f":"from datetime import datetime as dt\ndata2a=data2.copy()\ndate=[]\nfor item in data2['time']:\n    date+=[dt.strptime(item[0:10],'%Y-%m-%d')]\n    #date+=[dt.strptime(item[0:-5],'%Y-%m-%dT%H:%M:%S')]\ndata2a['date']=date\ndata2a","66b2214d":"data2a=data2a[data2a['mag']>4.9].reset_index(drop=True)\ndata2a","aac25bbc":"#start=dt.strptime('2021-07-01T00:00:00','%Y-%m-%dT%H:%M:%S')\n#end=dt.strptime('2021-08-01T00:00:00','%Y-%m-%dT%H:%M:%S')","258850bd":"import plotly.express as px\n#fig=px.scatter(x=data2a['date'],y=data2a['mag'])\nfig=px.scatter(data2a, x=\"date\", y=\"mag\")\nfig.update_layout(title='Magnituide of Earthquake in 2019 in Japan')\nfig.show()","5e31d032":"age=pd.read_csv('..\/input\/moon-age\/mooncal2019.csv')\nage","408e1655":"age2a=age.copy()\ndate=[]\nfor item in age2a['Date']:\n    item2='2019\/'+item\n    date+=[dt.strptime(item2,'%Y\/%m\/%d')]\nage2a['date']=date\nage2a","714ed831":"fig=px.scatter(age2a, x=\"date\", y=\"Moon age\")\nfig.update_layout(title='Moon Age in 2019')\nfig.show()","8c662d69":"age2b=age2a.merge(data2a,on='date',how='left')\nage2b","ddc40449":"age2c=age2b[['date','Moon age','mag']]\nage2c['moon value']=age2c['Moon age'].apply(lambda x: 15-abs(15-x))\n# moon value is higher when moon age is near full moon.","ff949bc4":"fig=make_subplots(specs=[[{\"secondary_y\":True}]])\nfig.add_trace(go.Scatter(x=age2c['date'],y=age2c['mag'],name='Magnituide',mode='markers',\n        marker=dict(\n            color=age2c['mag'],\n            colorscale='purples',\n            line_width=1,\n            size=7\n        )),secondary_y=False)\nfig.add_trace(go.Scatter(x=age2c['date'],y=age2c['moon value'],name='Moon Value',mode='lines'),secondary_y=True)\nfig.update_layout(autosize=False,width=900,height=600,title_text=\"Magnituide of Earthquake vs Moon Value\")\nfig.update_xaxes(title_text=\"Date\")\nfig.update_yaxes(title_text=\"Magnitude\",secondary_y=False)\nfig.update_yaxes(title_text=\"Moon Value\",secondary_y=True)\nfig.show()","88ac693b":"fig,ax = plt.subplots(figsize=(8,8))\nax.set_title('Magnituide of Earthquake vs Moon Value',fontsize=20)\nax.set_xlabel('Moon Value',fontsize=12)\nax.set_ylabel('Magniture',fontsize=12)\nax.scatter(age2c['moon value'],age2c['mag'])","46610d8b":"<img src=\"https:\/\/www.sciencealert.com\/images\/2018-01\/processed\/moon-over-mountain-earthquakes-phases_1024.jpg\" width=\"100%\">","9a7f6591":"## Year\n* **year**=2019","92e277f1":"## Magnitude\n* **mag**>4.9","5de4c18c":"# Conclusion\n### Earthquakes NOT more frequently occur when the moon is close.","30946e95":"## **Verification of Relation between Earthquake Frequency and Moon Age**\n* There\u2019s a popular belief that earthquakes are more frequent when the moon is close to full. Here I examined the relationship between earthquake and moon age using data in Japan 2019. \n* cf. https:\/\/www.smithsonianmag.com\/smart-news\/does-moon-cause-earthquakes-study-says-no-1-180967896\/","da2cd9a1":"## Moon value is an original parameter defined as proximity to full moon.\n* moon_value = 15 - abs(15 - moon_age)"}}