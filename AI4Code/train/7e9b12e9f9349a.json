{"cell_type":{"5c62d197":"code","b0a15242":"code","81108fe6":"code","1b79ddb2":"code","00a3a584":"code","23d5882d":"code","9d8516bf":"code","566a8dfa":"code","b3248204":"code","5b884aff":"code","d1c81195":"code","080ae163":"code","2f13a01e":"code","f83fc561":"code","13737b5f":"code","25a812e2":"code","12717f30":"code","6ec46a4d":"code","e796b575":"code","0e7a5a12":"code","19882243":"code","cc361f2f":"code","0505fa17":"code","bbac0714":"code","35dbe900":"code","a7587301":"code","f799dc2b":"code","1297f020":"code","08e45487":"code","0802185c":"code","61269812":"code","0eb2ded7":"markdown","5f892143":"markdown","be8ae953":"markdown","e2097c77":"markdown","3c6070ca":"markdown","88f07260":"markdown","8f604b37":"markdown","324de4f7":"markdown","a84d5247":"markdown","df2db395":"markdown","888e2cd8":"markdown","8550817e":"markdown","1ee55ea2":"markdown","f6653e67":"markdown","6475c55c":"markdown","ebf3a122":"markdown","e0af9416":"markdown","2d95a601":"markdown","7599706e":"markdown","1ce72025":"markdown","308c9348":"markdown","aa82df66":"markdown","4048306a":"markdown","87237630":"markdown"},"source":{"5c62d197":"import pandas as pd\nimport numpy as np\nfrom sklearn.cluster import KMeans\nimport matplotlib.pyplot as plt\nimport plotly.express as px \nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport seaborn as sns; sns.set()\nimport matplotlib.pyplot as plt\nimport plotly.figure_factory as ff\n\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import GradientBoostingClassifier\nimport lightgbm\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import confusion_matrix\nfrom mlxtend.plotting import plot_confusion_matrix\nimport xgboost\n\n","b0a15242":"df= pd.read_csv('..\/input\/heart-failure-clinical-data\/heart_failure_clinical_records_dataset.csv')","81108fe6":"df.describe()","1b79ddb2":"correlation = df.corr()\nplt.figure(figsize=(16,12))\nplt.title('Correlation Heatmap of Death event')\nax = sns.heatmap(correlation, square=True, annot=True, fmt='.2f', linecolor='white')\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nax.set_yticklabels(ax.get_yticklabels(), rotation=30)           \nplt.show()","00a3a584":"fig = px.histogram(x=df['age'], nbins=50, histnorm='density')\nfig.update_layout(title='Age distribution:',\n                 xaxis_title='age', yaxis_title='Count')","23d5882d":"g = sns.catplot(x=\"age\", kind=\"box\",data=df)","9d8516bf":"fig = px.box(df, x='DEATH_EVENT', y='age',color='sex')\nfig.update_layout(\n    title_text=\"Gender wise Age Spread and Death - Male = 1 Female =0\")\nfig.show()","566a8dfa":"ax = sns.barplot(x=df.sex, y= df.age,hue=df.DEATH_EVENT, data=df)\nax.set_title(\"Death age for Females and Males\")\nx_ticks_labels=['Female', 'Male']\nax.set_xticklabels(x_ticks_labels)\nplt.show()","b3248204":"ax = sns.countplot(x=df.sex, hue=df.DEATH_EVENT, data=df)\nax.set_title(\"Death case for Females and Males\")\nx_ticks_labels=['Female', 'Male']\nax.set_xticklabels(x_ticks_labels)\nplt.show()","5b884aff":"gender_smoking= df.groupby('sex')['smoking'].sum().sort_values(ascending=False)\nfig = px.bar(df,gender_smoking.index, gender_smoking)\nfig.update_layout(title='Relationship between gender and smoking - Male = 1 Female =0')\nfig.show()","d1c81195":"gender_smoking= df.groupby('sex')['high_blood_pressure'].sum().sort_values(ascending=False)\nfig = px.bar(df,gender_smoking.index, gender_smoking)\nfig.update_layout(title='high blood_pressure for both gender - Male = 1 Female =0')\nfig.show()","080ae163":"gender_smoking= df.groupby('sex')['diabetes'].sum().sort_values(ascending=False)\nfig = px.bar(df,gender_smoking.index, gender_smoking)\nfig.update_layout(title='diabetes for both gender - Male = 1 Female =0')\nfig.show()","2f13a01e":"gender_smoking= df.groupby('sex')['creatinine_phosphokinase'].sum().sort_values(ascending=False)\nfig = px.bar(df,gender_smoking.index, gender_smoking)\nfig.update_layout(title='high blood pressure for both gender')\nfig.show()","f83fc561":"male = df[df[\"sex\"]==1]\nfemale = df[df[\"sex\"]==0]\n\nmale_survi = male[df[\"DEATH_EVENT\"]==0]\nmale_not = male[df[\"DEATH_EVENT\"]==1]\nfemale_survi = female[df[\"DEATH_EVENT\"]==0]\nfemale_not = female[df[\"DEATH_EVENT\"]==1]\n\nlabels = ['Male - Survived','Male - Not Survived', \"Female -  Survived\", \"Female - Not Survived\"]\nvalues = [len(male[df[\"DEATH_EVENT\"]==0]),len(male[df[\"DEATH_EVENT\"]==1]),\n         len(female[df[\"DEATH_EVENT\"]==0]),len(female[df[\"DEATH_EVENT\"]==1])]\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, hole=.4)])\nfig.update_layout(\n    title_text=\"Analysis on Survival - Gender\")\nfig.show()","13737b5f":"\n\nax = sns.barplot(x=df.sex, y= df.platelets,hue=df.DEATH_EVENT, data=df)\nax.set_title(\"Death age for Females and Males\")\nx_ticks_labels=['Female', 'Male']\nax.set_xticklabels(x_ticks_labels)\nplt.show()","25a812e2":"\n\nfig = px.scatter(df, x=\"creatinine_phosphokinase\", y=\"age\", color=\"DEATH_EVENT\", marginal_y=\"violin\",\n           marginal_x=\"box\", trendline=\"ols\", template=\"simple_white\")\nfig.show()\n","12717f30":"fig = px.box(df, x='DEATH_EVENT', y='creatinine_phosphokinase')\nfig.update_layout(\n    title_text=\"Gender wise Age Spread and Death - Male = 1 Female =0\")\nfig.show()","6ec46a4d":"\n\nax = sns.barplot(x=df.sex, y= df.creatinine_phosphokinase,hue=df.DEATH_EVENT, data=df)\nax.set_title(\"Death age for Females and Males\")\nx_ticks_labels=['Female', 'Male']\nax.set_xticklabels(x_ticks_labels)\nplt.show()","e796b575":"\n\n\n\nfig = px.scatter(df, x=\"serum_creatinine\", y=\"age\", color=\"DEATH_EVENT\", marginal_y=\"violin\",\n           marginal_x=\"box\", trendline=\"ols\", template=\"simple_white\")\nfig.show()\n","0e7a5a12":"\nax = sns.barplot(x=df.sex, y= df.serum_creatinine,hue=df.DEATH_EVENT, data=df)\nax.set_title(\"Death age for Females and Males\")\nx_ticks_labels=['Female', 'Male']\nax.set_xticklabels(x_ticks_labels)\nplt.show()","19882243":"folowUp = df.groupby('time').sum()['DEATH_EVENT']\nfolowUp.plot(figsize=(20,10),title='trends on death times as folow up increased')","cc361f2f":"\nx=df.drop(columns=('DEATH_EVENT'))\ny=df['DEATH_EVENT']\nx_train,x_test,y_train,y_test = train_test_split(x,y, test_size=0.2, random_state=2)","0505fa17":"\nclf = RandomForestClassifier(max_depth=2, random_state=1)\nclf.fit(x_train, y_train)\npred=clf.predict(x_test)\nclf.score(x_test,y_test)","bbac0714":"cm = confusion_matrix(y_test, pred)\nplt.figure()\nplot_confusion_matrix(cm, figsize=(12,8), hide_ticks=True, cmap=plt.cm.Blues)\nplt.title(\"Random Forest Model - Confusion Matrix\")\nplt.xticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.yticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.show()","35dbe900":"gradientboost_clf = GradientBoostingClassifier(max_depth=2, random_state=1)\ngradientboost_clf.fit(x_train,y_train)\ngradientboost_pred = gradientboost_clf.predict(x_test)","a7587301":"gradientboost_clf.score(x_test,y_test)","f799dc2b":"cm = confusion_matrix(y_test, gradientboost_pred)\nplt.figure()\nplot_confusion_matrix(cm, figsize=(12,8), hide_ticks=True, cmap=plt.cm.Blues)\nplt.title(\"Gredient Boosting Model - Confusion Matrix\")\nplt.xticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.yticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.show()","1297f020":"# xgbrf classifier\n\nxgb_clf = xgboost.XGBRFClassifier(max_depth=2, random_state=1)\nxgb_clf.fit(x_train,y_train)\nxgb_pred = xgb_clf.predict(x_test)\nxgb_clf.score(x_test,y_test)","08e45487":"cm = confusion_matrix(y_test, xgb_pred)\nplt.figure()\nplot_confusion_matrix(cm, figsize=(12,8), hide_ticks=True, cmap=plt.cm.Blues)\nplt.title(\"XGBRFClassifier Model - Confusion Matrix\")\nplt.xticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.yticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.show()","0802185c":"lgb_clf = lightgbm.LGBMClassifier(max_depth=2, random_state=1)\nlgb_clf.fit(x_train,y_train)\nlgb_pred = lgb_clf.predict(x_test)\nlgb_clf.score(x_test,y_test)","61269812":"cm = confusion_matrix(y_test, lgb_pred)\nplt.figure()\nplot_confusion_matrix(cm, figsize=(12,8), hide_ticks=True, cmap=plt.cm.Blues)\nplt.title(\"LGBMClassifier Model - Confusion Matrix\")\nplt.xticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.yticks(range(2), [\"Heart Not Failed\",\"Heart Fail\"], fontsize=16)\nplt.show()","0eb2ded7":"The <a href=\"https:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC4877131\/\n\">study<\/a> shows the patient who has a high level of Creatinine phosphokinase it's more likelihood to death if we look to your graph will find same result but our sample is too small to find, also i've found the pation older than 60  more likleyhood to death with high Creatinine phosphokinase, the death case in male have high level of CP.\n# Serum creatinine\n","5f892143":"####Before start let describe the value for the attributes\n#### 0 mean the patient have not disease, 1 mean the patient disease\n* Age: the age for patient.\n* Anaemia: Decrease of red blood cells or hemoglobin,\n* Creatinine_phosphokinase: Level of the CPK enzyme in the blood (mcg\/L)\n* Diabetes: If the patient has diabetes \n* Ejection_fraction: Percentage of blood leaving the heart at each contraction (percentage)\n* High_blood_pressure: If the patient has hypertension (boolean)\n* platelets: Platelets in the blood (kiloplatelets\/mL)\n* Serum_creatinine:  Level of serum creatinine in the blood (mg\/dL)\n* serum_sodium: Level of serum sodium in the blood (mEq\/L)\n* Sex: Woman or man (binary)\n* Smoking: If the patient smokes or not (boolean)\n* Time: Follow-up period (days)\n* DEATH_EVENT: If the patient deceased during the follow-up period \"our Goals\"(boolean)\n","be8ae953":"From the above chart we noted, the mean for age around 60, the common rang for age from 60 to 70, we have extreme value in 94-95 and it's an outlier for the female gender, the average death case for a male is 65 and the average death case for a female is 60, this value it's around the mean for age at all, So here we not have any strong correlation.\n##let care more in gender, maybe will find the reason behind male death more than female.\n##note: the number of male recored more than female, So maybe find differences\n#Gender","e2097c77":"#Age \nwhen happened the death case, we look to age for the patient, So let look inside the age attribute and correlation with another attribute.","3c6070ca":"To know the relationship between Platelets and death, I do research on the internet, I've found, low <a href=\"https:\/\/www.rnceus.com\/cbc\/cbcplate.html\">platelets<\/a> to death case, if we look to the graph we find the female who Survival have high platelets more than female have low platelets, but in male records death case in both Are equal\n#Creatinine phosphokinase\n","88f07260":"# Confusion matrix for Random forest ","8f604b37":"based on above bar chart we noticed the male record more than female, So the analysis will baise to male more than female, but let look in depth for both gender.","324de4f7":"# Confusion matrix for GradientBoostingClassifier","a84d5247":"# LImitations\n* The data size is too small only 299 records.\n* we do not know the main reason for death case, The patient died due to illness or accident.\n* the sample force on male more than female, Do we not know if the female is more likely to die than male.\n* the time attribute not clear it's for day or month or year, or for each dr \nvisit.\n* The data have a high number of an outlier in attribute ","df2db395":"the high death case happened in the first follow up time, the state of patients more likely to be stable with time. ","888e2cd8":"# RandomForestClassifier","8550817e":"# Conclusions\n* Age, creatinine_phosphokinase, serum_creatinine, Time Strong attribute effect on death event.\n* The male has a high death number.\n* The female have high serum creatinine levels have high likely to death.\n* the follow up in long term decrease death case.\n* If we care on the patient who has low anemia, high creatinine phosphokinase, and  serum creatinine, the death percentage will decrease","1ee55ea2":"# Confusion matrix Xgbrf classifier\n","f6653e67":"#EDA","6475c55c":"<a id='intro'><\/a>\n## Introduction\nThis data set exploring the death case recodes and the attrubite for the patint and realted disease, the relationship with the patient who death or not, the data set provided from   <a href=\"https:\/\/www.kaggle.com\/andrewmvd\/heart-failure-clinical-data\">kaggle<\/a>\n\n\n## Question \n* Does the gender of the patient effect on likelihood of death case.\n* Does the age give us single to probiblite to incress death case.\n* Does the disease effect on death case.\n* What disease effect on female more than male.\n* The follow up help patient to survival.","ebf3a122":"\n# Project: heart failure clinical\n\n## Table of Contents\n<ul>\n<li><a href=\"#intro\">Introduction<\/a><\/li>\n<li><a href=\"#wrangling\">Data Wrangling<\/a><\/li>\n<li><a href=\"#eda\">Exploratory Data Analysis<\/a><\/li>\n<li><a href=\"#conclusions\">Conclusions<\/a><\/li>\n<\/ul>","e0af9416":"# GradientBoostingClassifier\n","2d95a601":"# Model Building\n\n","7599706e":"After study the analysis for both gender, I've found the male smoking than female, that give a Signal for the smoking male More likely for the infection in diseases and death more early","1ce72025":"# Data Wrangling","308c9348":"Female patients more likely to die due to high serum creatinine in blood, High levels of SC lead to an increase of death cases with an older patient.\n# Time","aa82df66":"#  Lightgbm \n","4048306a":"# Confusion matrix for Lightgbm","87237630":"# Xgbrf classifier\n"}}