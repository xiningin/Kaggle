{"cell_type":{"7c21a3c5":"code","bb8e850d":"code","da39d045":"code","be66b216":"code","5b22bec3":"code","e426defa":"code","03538cd6":"code","8f2fe1c0":"code","39087a0e":"code","4ccf4aca":"code","a6a580fe":"code","95aff674":"code","701ff119":"code","0c4a8e3d":"code","20672b55":"code","8b33c3ea":"code","7da555c0":"code","551d4c87":"code","fdbc4c0b":"code","d0905d3e":"code","67db1abe":"code","45a5215f":"code","fe6110ba":"code","1479906d":"code","c7b35611":"code","e34cb1d5":"code","f03b436d":"code","360712a9":"code","d45356c0":"code","31e043d8":"markdown","615e2a40":"markdown","60d58ad9":"markdown","d40ceb36":"markdown","474b26e0":"markdown","7ae32959":"markdown","6c2a13b4":"markdown","0dbbbba3":"markdown","087fa903":"markdown","c90fd237":"markdown","cd1a5016":"markdown","bb23ed1a":"markdown","d21bbc08":"markdown","19a54df3":"markdown","360f713f":"markdown","020a038e":"markdown","6fce1dce":"markdown","38741443":"markdown","9e8cbd56":"markdown","e1b47e0c":"markdown","8bffbd55":"markdown","8c46b49a":"markdown","8d9296f8":"markdown","00ebb391":"markdown","b82dff2f":"markdown","fa2fb5d4":"markdown","2119d019":"markdown","d424cb55":"markdown","da5ace3c":"markdown"},"source":{"7c21a3c5":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","bb8e850d":"df = pd.read_csv(\"..\/input\/heart.csv\")","da39d045":"df.sample(3)","be66b216":"\"\"\"\nNormalizing the values and then making it as a DataFrame and then plotting using sns.barplot.\n\"\"\"\ntemp = (df.groupby(['target']))['cp'].value_counts(normalize=True)\\\n.mul(100).reset_index(name = \"percentage\")\nsns.barplot(x = \"target\", y = \"percentage\", hue = \"cp\", data = temp)\\\n.set_title(\"Chest Pain vs Heart Disease\")","5b22bec3":"temp = (df.groupby(['target']))['fbs'].value_counts(normalize=True)\\\n.mul(100).reset_index(name = \"percentage\")\nsns.barplot(x = \"target\", y = \"percentage\", hue = \"fbs\", data = temp).set_title(\"FBS vs Target\")","e426defa":"temp = (df.groupby(['target']))['restecg'].value_counts(normalize=True)\\\n.mul(100).reset_index(name = \"percentage\")\nsns.barplot(x = \"target\", y = \"percentage\", hue = \"restecg\", data = temp)\\\n.set_title(\"resting electrocardiographic results vs Heart Disease\")\n                     ","03538cd6":"temp = (df.groupby(['target']))['ca'].value_counts(normalize=True)\\\n.mul(100).reset_index(name = \"percentage\")\nsns.barplot(x = \"target\", y = \"percentage\", hue = \"ca\", data = temp)\\\n.set_title(\"ca vs Heart Disease\")\n                     ","8f2fe1c0":"temp = (df.groupby(['target']))['thal'].value_counts(normalize=True)\\\n.mul(100).reset_index(name = \"percentage\")\nsns.barplot(x = \"target\", y = \"percentage\", hue = \"thal\", data = temp)\\\n.set_title(\"thal vs Heart Disease\")\n                     ","39087a0e":"df.info()","4ccf4aca":"df.boxplot()\nplt.xticks(rotation = 90)","a6a580fe":"import seaborn as sns\nsns.heatmap(df.corr())","95aff674":"plt.boxplot(df.trestbps)","701ff119":"Q3 = df.trestbps.quantile(.75)\nQ1 = df.trestbps.quantile(.25)\nIQR = Q3 - Q1\ndf = df[~((df.trestbps < Q1 - 1.5*IQR) | (df.trestbps > Q3 + 1.5*IQR))]","0c4a8e3d":"Q3 = df.chol.quantile(.75)\nQ1 = df.chol.quantile(.25)\nIQR = Q3 - Q1\ndf = df[~((df.chol < Q1 - 1.5*IQR) | (df.chol > Q3 + 1.5*IQR))]","20672b55":"df.boxplot()\nplt.xticks(rotation = 90)","8b33c3ea":"sns.countplot(x=\"target\", data=df,hue = 'sex').set_title(\"GENDER - Heart Diseases\")","7da555c0":"df.sample()","551d4c87":"df[(df.target ==  1) & (df.sex == 1)].age.mean()","fdbc4c0b":"df[(df.target ==  1) & (df.sex == 0)].age.mean()","d0905d3e":"df[(df.target ==  1) & (df.sex == 0)].describe()[1:2]","67db1abe":"df[(df.target ==  1) & (df.sex == 1)].describe()[1:2]","45a5215f":"df[(df.target ==  0) & (df.sex == 0)].describe()[1:2]","fe6110ba":"df[(df.target ==  0) & (df.sex == 0)].describe()[1:2]","1479906d":"x = df.age.tolist()\nafter_x = []\nfor i in x:\n    if i < 20:\n        after_x.append(\"teenager\")\n    elif i < 30:\n        after_x.append(\"20 - 30\")\n    elif i < 40:\n        after_x.append(\"30 - 40\")\n    elif i < 50:\n        after_x.append(\"40 - 50\")\n    elif i < 60:\n        after_x.append(\"50 - 60\")\n    else:\n        after_x.append(\"senior citizen\")\ndf[\"age_category\"] = after_x","c7b35611":"df.sample()","e34cb1d5":"for_analyzing = df.groupby([\"age_category\",\"sex\",\"target\"]).\\\nagg({\"age\":\"mean\", \"trestbps\":\"mean\", \"chol\":\"mean\", \"thalach\":\"mean\",\\\n     \"exang\":\"mean\",\"oldpeak\":\"mean\", \"slope\":\"mean\",\"fbs\" : pd.Series.mode,\\\n     \"cp\" : pd.Series.mode, \"restecg\": pd.Series.mode,\"ca\":pd.Series.mode,\"thal\":pd.Series.mode})\nfor_analyzing","f03b436d":"df.sample()","360712a9":"from sklearn.model_selection import train_test_split\ntrain_x,test_x,train_y,test_y = train_test_split(df.iloc[:,:-2],df.iloc[:,-2],)","d45356c0":"from xgboost import XGBClassifier\nfrom sklearn.metrics import accuracy_score\ndpen = []\nfor i in range(5,11):\n    model = XGBClassifier(max_depth = i)\n    model.fit(train_x,train_y)\n    target = model.predict(test_x)\n    dpen.append(accuracy_score(test_y, target))\n    print(\"accuracy : \",dpen[i-5])\nprint(\"Best accuracy: \",max(dpen))","31e043d8":"Let's check how other features are affecting Heart Disease","615e2a40":"1. average age of **MALE** who got stroke","60d58ad9":"Finished of Categorical Data, let's check about other attributes.","d40ceb36":"As we see,\n* **Type - 3** is common in people who are not affected with Heart Disease \n* **Type - 2** is common in Heart Disease victims.","474b26e0":"So, above are the generalized values based on grouping by age-group, Gender, Heart Disease. So. let's draw some insights from it.\n* **Categorical attributes insights**\n* Each and every Age Group has , mode, **\"thal\" - type - 2 for Heart Disease victims** irrespective of GENDER\n* Each and every Age Group has , mode, **\"ca\" - type - 0 for Heart Disease victims** irrespective of GENDER\n* Each and every Age Group has , mode, **\"cp\" - type - 0 for NON - Heart Disease victims** irrespective of GENDER\n*  **Non - categorical attributes insights**\n* **old peak value**,  is always **less for Heart Disease victims** compared to that that of those who doesn't have heart disease. (irrespective of GENDER).\n* Similarly, even** exang value** is also **less for Heart Disease victims**.\n* **thalach value** is **more for Heart Disease victims**.\n\n\n\n","7ae32959":"5. Average values of features that are responsible for not having disease for **female**","6c2a13b4":"As we see,\n* \"restecg\" of **type 1** are more prone to Heart Disease compared to that of other types.","0dbbbba3":"Let's build the model","087fa903":"As said in description,\nLet's understand the data,\n> 1. age \n> 2. sex \n> 3. chest pain type (4 values) \n> 4. resting blood pressure \n> 5. serum cholestoral in mg\/dl \n> 6. fasting blood sugar > 120 mg\/dl\n> 7. resting electrocardiographic results (values 0,1,2)\n> 8. maximum heart rate achieved \n> 9. exercise induced angina \n> 10. oldpeak = ST depression induced by exercise relative to rest \n> 11. the slope of the peak exercise ST segment \n> 12. number of major vessels (0-3) colored by flourosopy \n> 13. thal: 3 = normal; 6 = fixed defect; 7 = reversable defect","c90fd237":"Let's remove outliers.\n* Outliers are those which are in (Q1 - 1.5 * IQR ) and (Q3 + 1.5 * IQR).\n* where IQR is Inter Quartile Range (Q3 - Q1), where Q1 is 25%ile and Q3 is 75percintile","cd1a5016":"So,** \"cp\",\"fbs\", \"restecg\", \"ca\" and \"thal\"** are categorical attributes.","bb23ed1a":"Reading the \"heart.csv\" file","d21bbc08":"Seems like there's no such difference.I guess, We can eliminate this feature while building model","19a54df3":"![](http:\/\/)In this kernel, I am exploring all features, and analyzing both categorical and non-categorical data. So, let's see how these features gonna influence the Heart Disease.","360f713f":"From the above plot we can understand that,\n* ca having of **type 0** are high in Heart Disease patients.","020a038e":"**Let's start  Analyzing the data and find some insights.**","6fce1dce":"* The accuracy can be improved by feature engineering.\n* I would like to know what's the ideal way of seleceting the best features for fitting the model. Is there any way other than correlation for finding the relation?\n* Let me know if there are any suggestions regarding the model building. How to know what model to be used?","38741443":"6. Average values of features that are responsible for not having disease for **male**","9e8cbd56":"let's see few samples of data","e1b47e0c":"***Insights : ***\n* From the above plot, we can understand that,\n* * chest pain of **type - 2** constitutes most of the chest Pain Category for Heart Disease.","8bffbd55":"seems like all the fields are in numeric.","8c46b49a":"But in the above data,\n**we are applying describe() on categorical data too, which is wrong. we Should use \"mode\" on Categorical data. So let's do it.** Before that, let's generalize the Age attribute to Age-group","8d9296f8":"Let's plot these categorical values, based on target","00ebb391":"4. Average values of features that are responsible for disease for **male**","b82dff2f":"Let's plot boxplot and check whether there are any outliers in any columns","fa2fb5d4":"seems like some of the columns have worst outliers. Let's see correlation. How these columns are affecting target column","2119d019":"***PART - I***\n\n***analyzing Categorical Data*** :","d424cb55":"2. average age of **FEMALE** who got stroke","da5ace3c":"3. Average values of features that are responsible for disease for **female**"}}