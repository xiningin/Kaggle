{"cell_type":{"5ddec746":"code","7cffe404":"code","45413b42":"code","e15c0ebf":"code","2a99434f":"code","bdc0d351":"code","dfb3e233":"code","4c9591c0":"code","b5a840c6":"code","7207b876":"code","ae93ab3e":"code","c503eb48":"code","7dde5637":"code","34b9e39a":"code","9d57c957":"code","6ae9ed4d":"markdown","68df7079":"markdown","37b98b61":"markdown","b87f6a36":"markdown","1fcd941c":"markdown","d4a642e3":"markdown","d1b1f845":"markdown","0de66265":"markdown","7cf5e36d":"markdown","efd9baa5":"markdown","bec03e2d":"markdown","9ad6acd9":"markdown","5d2f54d5":"markdown","0a85bee6":"markdown","0914f18f":"markdown","b21c0ce8":"markdown","20d9374c":"markdown","3b0027e8":"markdown"},"source":{"5ddec746":"from altair.vegalite.v4.schema.core import Element\nimport numpy as np\nimport pandas as pd\nfrom sklearn.preprocessing import MinMaxScaler\nimport altair as alt\nimport os\nimport seaborn as sns\nimport warnings\nimport matplotlib.pyplot as plt\nfrom IPython.display import display\n\nwarnings.filterwarnings('ignore')\n\n# import matplotlib.pyplot as plt\n# alt.renderers.enable('kaggle')","7cffe404":"kepler = pd.read_csv('..\/input\/kepler-exoplanet-search-results\/cumulative.csv')\nprint('Train data shape: ', kepler.shape)\nkepler.head()\n","45413b42":"kepler.info()","e15c0ebf":"statuses = ['kepler_name', 'koi_disposition', 'koi_pdisposition']\nfor status in statuses:\n    if status == 'kepler_name':\n        print(status)\n        print(kepler[status].isna().value_counts())\n    else:\n        print(status)\n        print(kepler[status].value_counts())\n","2a99434f":"# kepler['kepler_name_enc'] = pd.isnull(kepler.kepler_name)\n# kepler['kepler_name_enc'] = ord_enc.fit_transform(pd.notnull(kepler.kepler_name).to_frame())\nkepler['kepler_named'] = pd.notnull(kepler.kepler_name)\nkepler.head()","bdc0d351":"kepler.groupby(by=['koi_disposition', 'koi_pdisposition']).size().unstack('koi_pdisposition')","dfb3e233":"alt.data_transformers.disable_max_rows()\nalt.Chart(kepler).mark_bar().encode(x='koi_disposition:O',\n                                              y='count(koi_pdisposition):Q',\n                                              color='koi_disposition:N',\n                                              column='koi_pdisposition:N')","4c9591c0":"kepler.groupby(by=['koi_pdisposition', 'kepler_named']).size().unstack('kepler_named')","b5a840c6":"kepler.groupby(by=['koi_disposition', 'kepler_named']).size().unstack('kepler_named')","7207b876":"for i in range(kepler.shape[0]):\n    if isinstance(kepler['kepler_name'][i],\n                  str) == True and kepler['koi_disposition'][i] != 'CONFIRMED':\n        for col in kepler.columns:\n            print(col + ':', kepler[col][i])","ae93ab3e":"# candidates = kepler[kepler['koi_disposition'] == \"CANDIDATE\"]\n# false_positives = kepler[kepler['koi_disposition'] == \"FALSE POSITIVE\"]\n","c503eb48":"# In this EDA, we also remove columns with err attibutes\ncol_without_err = [\n    col for col in kepler if 'err' not in col\n]\ncol_with_err = [\n    col for col in kepler if 'err' in col\n]\ncol_with_err.append('koi_disposition')\n# And save it to another new variable new_kepler\nnew_kepler = kepler.loc[:, col_without_err]\nkepler_err_properties = kepler.loc[:, col_with_err]","7dde5637":"fig, axes = plt.subplots(12, 2, figsize=(20, 70))\nindex = 0\nfor i, pred in enumerate(new_kepler.select_dtypes(exclude=['object']).columns):\n    row = int(i \/ 2)\n    col = int(i % 2)\n    b = sns.histplot(new_kepler,\n                     x=pred,\n                     hue='koi_disposition',\n                     element=\"step\",\n                     ax=axes[row, col])\n    b.set_xlabel(\"koi_disposition\", fontsize=30)\n    b.set_ylabel(pred, fontsize=30)\nfig.delaxes(axes[11, 1])\nplt.show()\n","34b9e39a":"fig, axes = plt.subplots(12, 2, figsize=(20, 100))\nindex = 0\nfor i, pred in enumerate(new_kepler.select_dtypes(exclude=['object']).columns):\n    row = int(i \/ 2)\n    col = int(i % 2)\n    b = sns.boxplot(x=\"koi_disposition\", y=pred,\n            palette=[\"m\", \"g\", \"y\"],\n            data=new_kepler,\n            ax=axes[row, col],\n            )\n    b.set_xlabel(\"koi_disposition\", fontsize=30)\nfig.delaxes(axes[11, 1])\nplt.show()","9d57c957":"fig, axes = plt.subplots(11, 2, figsize=(20, 100))\n# index = 0\nfor i, pred in enumerate(kepler_err_properties.select_dtypes(exclude=['object']).columns):\n    row = int(i \/ 2)\n    col = int(i % 2)\n    b = sns.boxplot(x=\"koi_disposition\", y=pred,\n            palette=[\"m\", \"g\", \"y\"],\n            data=kepler_err_properties,\n            ax=axes[row, col]\n            )\n    b.set_xlabel(\"koi_disposition\", fontsize=30)\n    b.set_ylabel(pred, fontsize=30)\n    \nplt.show()","6ae9ed4d":"  <!-- rowid:\n  <br> -->\n  * kepid: Unique ID number for every target on the Kepler Input Catalog list. Initially surveyed by ground-based facilities using characteristics of stars such as magnitude and color.\n  <br>\n  * kepoi_name: A number(KNNNNN.DD) used to identify stars which display at least some kind of transit-like sequence behavior and coincide with planetary transit hypothesis. Integer part are associated with host star and decimal part are linked with transiting objects.\n  <br>\n  * kepler_name: Identification for those have been confirmed or validated as planets.\n  <br>\n  * koi_disposition: Category of KOI from Exoplanet Archive taken. Designations are taken from pdisposition.\n  <br>\n  * koi_pdisposition: Disposition using Kepler Data. Ongoing designation of KOI that describe planets with the most probable physical explanation. All data could be changed over time.\n  <br>\n  * koi_score:  Score\tA value between 0 and 1 that indicates the confidence in the KOI disposition. For CANDIDATEs, a higher value indicates more confidence in its disposition, while for FALSE POSITIVEs, a higher value indicates less confidence in that disposition.\n  <br>\n  * koi_fpflag_nt: A KOI whose light curve is not consistent with that of a transiting planet. This includes, but is not limited to, instrumental artifacts, non-eclipsing variable stars, and spurious (very low SNR) detections.\n  <br>\n  * koi_fpflag_ss: A KOI that is observed to have transit-like events is most likely caused by eclipsing binary and other astronomical event.\n  <br>\n  * koi_fpflag_co: The source of signal is from nearby star.\n  <br>\n  * koi_fpflag_ec: The KOI shares the same period and epoch as another object is judged to be the result of flux contamination in the aperture or eletronic crootalk.\n  <br>\n  * koi_period: Orbital period(days), the interval between consecutive planetary transits.\n  <br>\n  * koi_time0bk: Transit epoch, the time corresponding to the center of the first detected transit in Barycentric Julian Day (BJD) minus a constant offset of 2,454,833.0 days. The offset corresponds to 12:00 on Jan 1, 2009 UTC.\n  <br>\n  * koi_impact: \tImpact Parameter, the sky-projected distance between the center of the stellar disc and the center of the planet disc at conjunction, normalized by the stellar radius.\n  <br>\n  * koi_duration: Transit Duration (hours), the duration of the observed transits. Duration is measured from first contact between the planet and star until last contact.\n  <br>\n  * koi_depth: \tTransit Depth (parts per million), the fraction of stellar flux lost at the minimum of the planetary transit.\n  <br>\n  * koi_prad:\tPlanetary Radius (Earth radii), the radius of the planet. Planetary radius is the product of the planet star radius ratio and the stellar radius.\n  <br>\n  * koi_teq:Equilibrium Temperature (Kelvin), approximation for the temperature of the planet.\n  <br>\n  * koi_insol:\tInsolation Flux [Earth flux], insolation flux is another way to give the equilibrium temperature.\n  <br>\n  * koi_model_snr:\tTransit Signal-to-Noise, transit depth normalized by the mean uncertainty in the flux during the transits.\n  <br>\n  * koi_tce_plnt_num: \tTCE Planet Number, TCE Planet Number federated to the KOI.\n  <br>\n  * koi_tce_delivname: \tTCE Delivery Name, \tTCE Delivery Name\n  <br>\n  * koi_steff: Stellar Effective Temperature (Kelvin), The photospheric temperature of the star.\n  <br>\n  * koi_slogg: Stellar Surface Gravity (log10(cm s-2), Stellar Surface Gravity (log10(cm s-2).\n  <br>\n  * koi_srad: \tStellar Radius (solar radii), The photospheric radius of the star.\n  <br>\n  * ra: RA (deg), KIC Right Ascension\t.\n  <br>\n  * dec: Dec (deg), KIC Declination.\n  <br>\n  * koi_kepmag: Kepler-band (mag), Kepler-band (mag).","68df7079":"  ### Data Column Definition","37b98b61":"\nAll confirmed exoplanets are named, but not all named exoplanets are confirmed. And it is called **kepler-469b**. According to one of NASA exoplanet archive websites(https:\/\/exoplanetarchive.ipac.caltech.edu\/docs\/PurposeOfKOITable.html), kepler-469b is vetted by human and became a well-known triply eclipsing star system not an exoplanet.","b87f6a36":"Among these columns, there are three labels that could serve the placement of exoplanet observation response\n* kepler_name\n* koi_disposition\n* koi_pdisposition\n\nHowever, it seems like these three columns are not fully agreed to each other. Below we check how much they differ in terms of their exoplanet placement","1fcd941c":"Comparison of statiscal distribution properties between predictors(removed columns with err information) with boxplot.","d4a642e3":"  ### General characteristics about exoplanets","d1b1f845":"https:\/\/www.kaggle.com\/nasa\/kepler-exoplanet-search-results","0de66265":"  # EDA\n  ","7cf5e36d":"## Which columns indicate the placement of exoplanet within kepler observations","efd9baa5":"The table below illustrate that almost every CONFIRMED exoplanet in koi_disposition column also has been given a name, only one FALSE POSITIVE instance is also given a name.","bec03e2d":"### Visualize data distribution","9ad6acd9":"Below, the table and the chart have shown the relative count proportion of koi_disposition and koi_pdisposition column and how they overlap. ","5d2f54d5":"Let's see the detail of this one named FALSE POSITIVE","0a85bee6":"The table below illustrate that only half of CANDIDATE in koi_pdisposition column has been named, since koi_pdisposition is only a column that temporarily place suspicous exoplanets into CANDIDATE category. Only those CANDIDATE who can make it through other rigorous tests can be given a name. ","0914f18f":"General Charateristics\n- rowid- confirmed exoplanets concentrate at the  **front** part of rows.\n- koi_score- CONFIRMED exoplents and FALSE POSITIVE have almost been both estimated with **high confidence**.\n- Majority of confirmed planets have relatively low value of **koi_fplag_nt**, **koi_fpflag_ss**, **koi_fpflag_co** and **koi_fpflag_ec**.\n- **CONFIRMED** exoplanets also generally have much less measurement error value and less outliers data points than both **FALSE POSITIVE** and **CANDIDATE** counterparts","b21c0ce8":"\n  ### Kepler data at the first glance","20d9374c":"Conclusion: It is safer to use the status **CONFIRMED** in **koi_disposition** column to be the accurate response of exoplanet identification.","3b0027e8":"What relationship could predictors' error information have with exoplanets identification??\nHere, we show their statiscal distribution properties with boxplot."}}