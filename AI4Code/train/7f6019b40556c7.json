{"cell_type":{"974bf998":"code","50a4648e":"code","b04723fb":"code","459c63f5":"code","bf9a983d":"code","d218a134":"code","f7988614":"code","c072cc9a":"code","aa662152":"code","f16d50e8":"code","25365ad8":"code","640f3009":"code","56ab2fc9":"code","705a40d9":"code","6d39b6a2":"code","33c2f8f1":"code","0c74e76a":"code","5d952edc":"code","56da5a0e":"code","a6702368":"code","26899dc6":"code","c965f845":"code","0ad7feb7":"code","74688553":"code","b7e89557":"code","d608b41b":"code","d5cee59a":"code","92998a1e":"code","dda77ad6":"code","036418d4":"code","2a3bebeb":"code","b10e73ef":"code","76d7bd6a":"code","3f9a0bca":"code","b29e06ef":"code","c4502cc8":"code","7401618d":"code","6ab165cb":"code","2c143cc4":"code","508d419b":"code","c4f2aca0":"code","3e9d17af":"code","1720be1c":"code","5cf0bd30":"code","c1df5428":"code","8c306004":"code","336e0568":"code","0dc405cc":"code","1d3ad622":"code","c314c604":"code","7849d3ba":"code","b3ff3fa8":"code","96ad2b0c":"code","6a804612":"code","79c31bdd":"code","5df9b14a":"code","208d2d43":"code","4a43d3a6":"code","c64d49ce":"markdown","726717d2":"markdown","1821450d":"markdown","1778865e":"markdown","d4bcfe6d":"markdown","bd0a1fb8":"markdown","2347f9df":"markdown","45e5090b":"markdown","c19e017e":"markdown","b50b35f9":"markdown","4f528211":"markdown","a5b19679":"markdown","093bbf00":"markdown","40d346e6":"markdown","865467d2":"markdown","18a7129a":"markdown","4b90a826":"markdown","37f7670e":"markdown","e622480f":"markdown","af93006e":"markdown","b7698909":"markdown","bbea5f4a":"markdown","607b22a1":"markdown","7fc1af16":"markdown","65be6da0":"markdown","ec072cf4":"markdown","8bc6044b":"markdown","c6dcc3e6":"markdown","0507908c":"markdown","61d5535f":"markdown","1c006be7":"markdown","b964fc81":"markdown","6b3491b5":"markdown"},"source":{"974bf998":"# Importing libraries\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom scipy import stats\nsns.set()","50a4648e":"# Importing dataset\ndataset = pd.read_csv('..\/input\/finance-accounting-courses-udemy-13k-course\/udemy_output_All_Finance__Accounting_p1_p626.csv')","b04723fb":"# Displaying first 5 rows\ndataset.head()","459c63f5":"# Displaying last 5 rows\ndataset.tail()","bf9a983d":"# Number of rows and columns\ndataset.shape","d218a134":"# Column names\nprint(dataset.columns.values)","f7988614":"# Checking datatypes, valid number of entries for columns\ndataset.info()","c072cc9a":"# Checking if all the ID column values are unique\ndataset['id'].unique().size","aa662152":"# Descriptive statistics\ndataset.describe(include='all')","f16d50e8":"# Removing unnecessary columns \n# We'll also keep backups of the original dataset in case we need it later\noriginal_dataset = dataset.copy()\nall_columns_dataset = dataset.copy()\ndataset = dataset.drop(columns=['id', 'title', 'url', 'is_wishlisted', 'created', 'published_time', 'num_published_practice_tests'])","25365ad8":"# Displaying all column names again\nprint(dataset.columns.values)","640f3009":"# Finding the number of courses where reviews count is greater than subscribers count\nreviews_subscribers = (dataset['num_reviews'] > dataset['num_subscribers'])\nreviews_subscribers.sum()","56ab2fc9":"# Checking the 5 courses\ndataset[reviews_subscribers]","705a40d9":"# Deleting invalid courses\nindex_list = dataset[reviews_subscribers].index\ndataset = dataset.drop(index=index_list)\nall_columns_dataset = all_columns_dataset.drop(index=index_list)","6d39b6a2":"# Resetting the dataframe indices\ndataset = dataset.reset_index(drop=True)\nall_columns_dataset = all_columns_dataset.reset_index(drop=True)","33c2f8f1":"# Shape of the dataset in its current form\ndataset.shape","0c74e76a":"# Cross-verifying deletion changes\nreviews_subscribers = (dataset['num_reviews'] > dataset['num_subscribers'])\nreviews_subscribers.sum()","5d952edc":"# Price related columns\nprice_cols = ['discount_price__amount', 'discount_price__currency',\n              'discount_price__price_string', 'price_detail__amount',\n              'price_detail__currency', 'price_detail__price_string']","56da5a0e":"# Displaying random price rows\ndataset[price_cols].sample(10)","a6702368":"# Deleting 'discount_price__price_string', 'price_detail__price_string',\n# 'discount_price__currency', 'price_detail__currency'columns\ndataset = dataset.drop(columns=['discount_price__price_string', 'price_detail__price_string',\n                                'discount_price__currency', 'price_detail__currency'])","26899dc6":"# Redefining price column names\nprice_cols = ['discount_price__amount', 'price_detail__amount']","c965f845":"# Checking the number of rows where the discount price is not equal to 455 and not NaN\nseries_bool_discount_price = ((dataset['discount_price__amount'] != 455) & (dataset['discount_price__amount'].notna()))\nnot_455_not_na_count = series_bool_discount_price.sum()\nnot_455_not_na_count","0ad7feb7":"# Checking the percentage of discount price rows that are not equal to 455 and not NaN\nnot_455_not_na_percentage = (not_455_not_na_count \/ dataset['discount_price__amount'].size) * 100\nnp.around(not_455_not_na_percentage, 2)","74688553":"# Deleting 'discount_price__amount' columns\ndataset = dataset.drop(columns=['discount_price__amount'])","b7e89557":"# Extracting only 'price_detail__amount' and 'is_paid' columns\ndf_price_is_paid = dataset[['price_detail__amount', 'is_paid']]","d608b41b":"# Checking 5 random rows where the course is free\ndf_price_is_paid[df_price_is_paid['is_paid'] == False].sample(5)","d5cee59a":"# Checking 5 random rows where the course is paid\ndf_price_is_paid[df_price_is_paid['is_paid']].sample(5)","92998a1e":"# Checking if a course is free but has some price to it\n((dataset['is_paid'] == False) & (dataset['price_detail__amount'].notna())).sum()","dda77ad6":"# Checking if a course is paid but has a price of 0\n((dataset['is_paid']) & (dataset['price_detail__amount'].isna())).sum()","036418d4":"# Finding the course which has invalid price entry\nall_columns_dataset[dataset['is_paid'] & dataset['price_detail__amount'].isna()]","2a3bebeb":"# Deleting the course with invalid price entry\ndataset = dataset.drop(index=[13602])\nall_columns_dataset = all_columns_dataset.drop(index=[13602])","b10e73ef":"# Resetting the row indices\ndataset = dataset.reset_index(drop=True)\nall_columns_dataset = all_columns_dataset.reset_index(drop=True)","76d7bd6a":"# Checking the present shape of dataset\ndataset.shape","3f9a0bca":"# Now, we can replace all the NaN's with 0\ndataset['price_detail__amount'] = dataset[ 'price_detail__amount'].fillna(0)","b29e06ef":"# Renaming 'price_detail__amount' to 'price'\ndataset = dataset.rename(columns={'price_detail__amount': 'price'})","c4502cc8":"# Dataset in its present state\ndataset.head()","7401618d":"# Descriptive statistics\ndataset.describe()","6ab165cb":"# Distribution of course prices\nsns.displot(dataset['price'], kde=True)\nplt.show()","2c143cc4":"# Checking for outliers in price column\nsns.boxplot(x=dataset['price'])\nplt.show()","508d419b":"# Distribution of number of subscribers\nsns.displot(dataset['num_subscribers'], kde=True)\nplt.show()","c4f2aca0":"# Distribution of average ratings\nsns.displot(dataset['avg_rating'], kde=True)\nplt.show()","3e9d17af":"# Distribution of Recent Average Ratings\nsns.displot(dataset['avg_rating_recent'], kde=True)\nplt.show()","1720be1c":"# Distribution of ratings\nsns.displot(dataset['rating'], kde=True)\nplt.show()","5cf0bd30":"# Distribution of number of reviews\nsns.displot(dataset['num_reviews'], kde=True)\nplt.show()","c1df5428":"# We can observe heavy right-skewness above. Let's examine the descriptive stats.\ndataset[['num_reviews']].describe()","8c306004":"# Distribution of number of published lectures\nsns.displot(dataset['num_published_lectures'], kde=True)\nplt.show()","336e0568":"# Extracting 10 sample rows\ndataset[['avg_rating', 'avg_rating_recent', 'rating']].sample(10)","0dc405cc":"# Cheking the number of rows in the dataset\ndataset.shape","1d3ad622":"# Verifying if 'avg_rating_recent' and 'rating' columns contain the same values\n(dataset['avg_rating_recent'] == dataset['rating']).sum()","c314c604":"# Deleting 'rating' column\ndataset = dataset.drop(columns=['rating'])","7849d3ba":"# Let's find the correlation coefficient between 'avg_rating' and 'avg_rating_recent' columns\ncorrelation_coefficient = stats.pearsonr(dataset['avg_rating'], dataset['avg_rating_recent'])[0]\nnp.around(correlation_coefficient, 2)","b3ff3fa8":"# Deleting 'avg_rating_recent' column\ndataset = dataset.drop(columns=['avg_rating_recent'])","96ad2b0c":"# Listing all column names\nprint(dataset.columns.values)","6a804612":"# Let's find the correlation between all the numeric variables\ndataset[['num_subscribers', 'avg_rating', 'num_reviews', 'num_published_lectures', 'price']].corr()","79c31bdd":"# Scatter plot between Number of subscribers and Number of Reviews with free\/paid courses color coded\nplt.scatter(dataset['num_subscribers'], dataset['num_reviews'],\n            c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\nplt.xlabel('Number of Subscribers')\nplt.ylabel('Number of Reviews')\nplt.xticks(rotation=45)\nplt.show()","5df9b14a":"# Free courses which have more than 50,000 subscribers\nall_columns_dataset[(dataset['num_subscribers'] >= 50000) & (dataset['price'] == 0)]","208d2d43":"# Most popular free course which has more than 2,50,000 subscribers and more than 20,000 reviews\nall_columns_dataset[(dataset['num_subscribers'] > 250000) & (dataset['price'] == 0)]","4a43d3a6":"# Building scatter plots between all the other numeric variables with free\/paid courses color coded\n(fig, ((p1, p2, p3), (p4, p5, p6), (p7, p8, p9))) = plt.subplots(3, 3, figsize=(15,14))\n\np1.scatter(dataset['num_subscribers'], dataset['avg_rating'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np1.set_title('Subscribers and Ratings')\n\np2.scatter(dataset['num_subscribers'], dataset['num_published_lectures'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np2.set_title('Subscribers and Lectures')\n\np3.scatter(dataset['num_subscribers'], dataset['price'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np3.set_title('Subscribers and Price')\n\np4.scatter(dataset['avg_rating'], dataset['num_reviews'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np4.set_title('Ratings and Reviews')\n\np5.scatter(dataset['avg_rating'], dataset['num_published_lectures'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np5.set_title('Ratings and Lectures')\n\np6.scatter(dataset['avg_rating'], dataset['price'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np6.set_title('Ratings and Price')\n\np7.scatter(dataset['num_reviews'], dataset['num_published_lectures'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np7.set_title('Reviews and Lectures')\n\np8.scatter(dataset['num_reviews'], dataset['price'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np8.set_title('Reviews and Price')\n\np9.scatter(dataset['num_published_lectures'], dataset['price'], c=dataset['is_paid'].astype('category').cat.codes, cmap='Dark2')\np9.set_title('Lectures and Price')\n\nplt.show()","c64d49ce":"There are 5 courses where the number of reviews is grater than number of subscribers.","726717d2":"At 75th percentile tha value is 87 while the max value is 78,006! The number of reviews column data is heavily right skewed. This is again because of the high popularity of a few courses which have many subscribers who leave the feedback for these courses.","1821450d":"#### Examining Ratings related columns","1778865e":"There is one course which is a paid course but its price is not present.","d4bcfe6d":"### Examining Price related Columns","bd0a1fb8":"Observations:\n1. There is a good correlation between Number of subscribers and Number of reviews. This is logical as the number of reviews increases as the number of subscribers increases.\n2. The correlation among all the other combinations of variables is weak.","2347f9df":"## Data Cleaning and Preprocessing","45e5090b":"Again, right skewness is observed.","c19e017e":"#### Examining 'price_detail__amount' column","b50b35f9":"We can delete all the above courses as they are invalid entries with reviews count greater than subscribers count.","4f528211":"Observations:\n1. There are missing values only in price related columns.\n2. There are two boolean columns: 'is_paid', 'is_wished'","a5b19679":"1. All the free courses have less than 50,000 subscribers with 3 exceptions.\n2. The less number of subscribers to the free courses accounts to the less number of reviews present for these courses.\n3. There is one free course which seems to be very popular: Number of subscribers is greater than 2,50,000 and number of reviews is greater than 20,000.","093bbf00":"Observation: All the distributions related to Ratings look very similar to each other.","40d346e6":"Observations:\n1. Since all the values in 'url' column are unique, we can conclude that all the courses are unique (even though we have some repeated titles). The repeated course titles represent multiple parts for the same course, like Part 1 and Part 2.\n2. We can drop the following columns:\n    1. 'id' - This is a categorical variable which provides no useful statistics.\n    2. 'title' - We'll not be analysing the words in the title.\n    3. 'url' - We'll not be analysing the URL strings.\n    4. 'is_wishlisted' - All the values present are boolean False. Hence the column is redundant.\n    5. 'created' - We'll not be doing temporal analysis in this notebook.\n    6. 'published_time' - We'll not be doing temporal analysis in this notebook.\n    7. 'num_published_practice_tests' - The column doesn't seem to be of much interest in our analysis of courses and most of the values present in this column are zeros.","865467d2":"The correlation coefficient between 'avg_rating' and 'avg_rating_recent' is 0.99! This means we can predict 'avg_rating_recent' from 'avg_rating'. Hence we'll delete 'avg_rating_recent' column as it is redundant.","18a7129a":"To check: We can check if the number of reviews for any course is more than the number of subscribers. This should not happen as the number of reviews can be at most equal to the number of subscribers.","4b90a826":"Only 5.84% of values in 'discount_price__amount' column are values other than 455 and not NaN. This is because of the regular discount sales that Udemy offers to take up any course at a standard discounted rate. We'll drop this column as most of the values present in it are 455.","37f7670e":"Observation: The NaN values in 'price_detail__amount' are for the free courses. The values here are missing instead of having a value of 0.","e622480f":"So the invalid courses have been successfully deleted.","af93006e":"We can divide the columns into 3 main categories:\n1. Course info\n2. Course performance info\n3. Course price info\n\nEach of the columns in the dataset fits into one of these 3 categories.\n1. Course info\n    1. id\n    2. title\n    3. url\n    4. is_paid\n    5. num_published_lectures\n    6. num_published_practice_tests\n    7. created\n    8. published_time<br\/><br\/>\n    \n2. Course performance info\n    1. num_subscribers\n    2. avg_rating\n    3. avg_rating_recent\n    4. rating\n    5. num_reviews\n    6. is_wishlisted<br\/><br\/>\n    \n3. Course price info\n    1. discount_price__amount\n    2. discount_price__currency\n    3. discount_price__price_string\n    4. price_detail__amount\n    5. price_detail__currency\n    6. price_detail__price_string","b7698909":"### Bivariate Analysis","bbea5f4a":"1. All the scatter plots containing the price variable are easy to interpret as all the free courses show up at Price = 0.\n2. Free courses have less number of subscribers, reviews and lectures except for 2 to 3 popular courses.","607b22a1":"#### Examining 'discount_price__amount' column","7fc1af16":"Now we don't have any missing values in the price column and hence in the entire dataset! Remember that there were no missing values in the dataset except in price related columns.\n\nFurther we can delete 'is_paid' boolean column as it can be derived from 'price_detail__amount' column. However we'll keep it as it can be used in EDA.","65be6da0":"### Univariate Analysis","ec072cf4":"Number of subscribers data is heavily right skewed. This is because of the extreme popularity of few courses.","8bc6044b":"## In this notebook I'll be covering data cleaning, preprocessing and EDA for Udemy courses dataset.","c6dcc3e6":"## EDA","0507908c":"Since the number of unique IDs is equal to the total number of rows in the dataset we can conclude that there are no duplicate IDs.","61d5535f":"There are no outliers in price column.","1c006be7":"Observations:\n1. We can delete 'discount_price__price_string' and 'price_detail__price_string' as they are the string counterparts of 'discount_price__amount' and 'price_detail__amount' columns respectively.\n2. We can delete 'discount_price__currency' and 'price_detail__currency' as the only currency in the columns is INR.\n3. Most of the values present in 'discount_price__amount' column is 455.","b964fc81":"It looks like 'avg_rating_recent' and 'rating' columns contain the same info. Let's verify it.","6b3491b5":"The above result equals the number of rows present in the dataset. Hence we can conclude that both the columns have the same values. We can drop one of these columns."}}