{"cell_type":{"eeb51de6":"code","27988e91":"code","ff6c48e3":"code","0ae33c66":"code","fb31aa77":"code","12541909":"code","f8f7d4ca":"code","d7bed97c":"code","2885cb33":"code","6f9fb68d":"code","72d41630":"code","e840696c":"code","955fea5e":"code","f6415427":"code","879e257e":"code","d8e3e0ca":"code","7ae263b7":"code","a248fab5":"code","cb7e3643":"code","d0d3672c":"code","596d0dc8":"code","4930e9b7":"code","0e61d0eb":"code","975bb785":"code","58fae803":"code","802025ff":"code","8c80134e":"code","37177574":"code","941c7df4":"code","9fce2dfc":"code","3c089e24":"code","4cb59149":"code","58e10edd":"code","65ee6cbe":"code","132fc44f":"code","2860f639":"code","c0a5a67a":"code","24eb3e27":"code","15d5a0c4":"code","e595610e":"code","560fd9cc":"code","9bc52fce":"code","17d0b023":"code","35b6cb51":"code","3e000860":"code","441eb8c6":"code","35e11791":"code","17aae0f2":"code","05786d80":"code","fbb05199":"code","34631c31":"code","a8ff5617":"code","054eaa77":"code","0edeb4cf":"code","cce319a2":"code","5e3afa41":"code","02868355":"code","3f3239c5":"code","98c46209":"code","228ffdc4":"code","16f08c57":"code","147810a0":"code","a2fb70d1":"code","68080e67":"code","787a1e89":"code","f4e12ec8":"code","b85da9dc":"code","45470d9a":"code","0c18ecad":"code","c624a587":"code","8695cfd6":"code","5807360d":"code","37bdfbc4":"code","bb980e85":"code","b0b88899":"code","827c5d46":"code","5dd21052":"markdown","a91bfc67":"markdown","eeffce2f":"markdown","9df3b885":"markdown","7db3e036":"markdown","e82933e2":"markdown","74cfc616":"markdown","a1a36376":"markdown","c3fb6a27":"markdown","33ad1a33":"markdown","f655c4b4":"markdown","c86d93bd":"markdown","5c399d9a":"markdown","2ffdd80f":"markdown","b8390549":"markdown","d4fd30bd":"markdown","40ec6ade":"markdown","9669fc7e":"markdown","5acc74f5":"markdown","b5b2f896":"markdown","71d0f9e9":"markdown","b6ebc0ff":"markdown","2763fa30":"markdown","6b266d7a":"markdown","e9ce1909":"markdown","9e7d6bf7":"markdown","23723887":"markdown","a33dd217":"markdown","b101fca6":"markdown","48423442":"markdown","2e78503e":"markdown","1d56fcde":"markdown","44af4ec9":"markdown","1c076718":"markdown","6257b3a3":"markdown","c80c7eee":"markdown","17b5f924":"markdown","b4a901ee":"markdown","a4862130":"markdown","0b8acd6d":"markdown","37ee5068":"markdown","698e33b5":"markdown","3fe37533":"markdown","fcfc8b21":"markdown","d9e63b43":"markdown","cfc87101":"markdown","623f215e":"markdown","febfb776":"markdown","2e04a635":"markdown","2b416242":"markdown","697d3bbc":"markdown","9cdc238f":"markdown","ccd19645":"markdown","2578213e":"markdown","3cac9d8b":"markdown","bfc6d700":"markdown","7a8941cc":"markdown","5a4dda4d":"markdown","0802da62":"markdown","fb4d52e1":"markdown"},"source":{"eeb51de6":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom scipy.stats import kurtosis\nfrom scipy.stats import skew\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","27988e91":"data = pd.read_csv('..\/input\/sales-data\/data.csv')\ndata.head()","ff6c48e3":"data.shape","0ae33c66":"data.columns","fb31aa77":"data.info()","12541909":"data.head(2)","f8f7d4ca":"item = 'Cust_Last_Purchase'\ndata[item]= data[item].str.replace('$','').astype(float)\n\nitem = 'Pur_latest'\ndata[item]= data[item].str.replace('$','').astype(float)\n\nitem = 'Pur_3_years_Avg'\ndata[item]= data[item].str.replace('$','').astype(float)\n\nitem = 'Pur_5_years_Avg'\ndata[item]= data[item].str.replace('$','').astype(float)\n\nitem = 'Pur_3_years_Avg_Indirect'\ndata[item]= round(data[item].str.replace('$','').astype(float),2)\n\nitem = 'Cust_Ann_Income'\ndata[item] = data[item].str.replace(',','').str.replace('$','').astype(float)","d7bed97c":"# Is there any duplicate in the data\ndata.duplicated().any()","2885cb33":"# Find the number of duplicates\ndata[data.duplicated()].count()","6f9fb68d":"x = sum(data.duplicated())\nprint(f\"The number of occurence of duplicates are {x}\")","72d41630":"data = data.drop_duplicates()","e840696c":"data.duplicated().any()","955fea5e":"data['C_ID'].head(5)","f6415427":"data = data.drop('C_ID',axis=1)","879e257e":"data.dtypes","d8e3e0ca":"categorical = ['Status_Cust','Gender','Cust_Prop']","7ae263b7":"data[categorical].head(10)","a248fab5":"sns.countplot(x='Gender',data=data,hue='Potential_Customer')","cb7e3643":"sns.countplot(x='Status_Cust',data=data,hue='Potential_Customer')","d0d3672c":"#highlight active and stars - potential customer\nnew_dict = {'A':'A','S':'S','E':'Others','F':'Others','N':'Others','L':'Others'}\ndata['Status_CustN'] = data['Status_Cust'].replace(new_dict)\ndata['Status_CustN'].unique()","596d0dc8":"sns.countplot(x='Status_CustN',data=data,hue='Potential_Customer')","4930e9b7":"data.info()","0e61d0eb":"data.head(5).transpose()","975bb785":"sns.distplot(data['Pur_3_years'],kde=False)","58fae803":"sns.boxplot(data['Pur_3_years'])","802025ff":"data['Pur_3_years'].describe()\n","8c80134e":"data['Pur_3_years'].median()","37177574":"data_median = data['Pur_3_years'].median()\ndata_mean = data['Pur_3_years'].mean()\ndata_skew = skew(data['Pur_3_years'], bias=False)\ndata_kurt = kurtosis(data['Pur_3_years'], bias=False)","941c7df4":"print(f'The mean is {round(data_mean,2)} which is more than the median {round(data_median,2)}. Skew {round(data_skew,2)} is positive skew means that the tail is on the right side.')","9fce2dfc":"print(f'The kurtosis is {round(data_kurt,2)} which is a platy type')","3c089e24":"data.isnull().sum()","4cb59149":"data.isnull().sum().sum()","58e10edd":"round(data.isnull().sum()[1]\/len(data),2)","65ee6cbe":"data.info()","132fc44f":"#before\ndata['Cust_Last_Purchase']","2860f639":"#after replace with mean\nx = round(data['Cust_Last_Purchase'].mean(),2)\ndata['Cust_Last_Purchase'].fillna(x,inplace=True)\ndata['Cust_Last_Purchase']","c0a5a67a":"data.head(2)","24eb3e27":"data = data.drop('Cust_Last_Purchase',axis=1)","15d5a0c4":"item = 'Pur_3_years_Avg_Indirect'\nm = data[item].mean()\ndata[item] = data[item].fillna(m)","e595610e":"#Impute the missing values for Age column\nitem = 'Age'\nm = 0\ndata[item] = data[item].fillna(m)\n","560fd9cc":"#Replace the missing values(values lower than 14) for Age column \ndata.loc[data['Age'] < 14,'Age'] = data['Age'].median()","9bc52fce":"data['Cust_Ann_Income'].median()","17d0b023":"data['Cust_Ann_Income'] = data['Cust_Ann_Income'].replace(0,data['Cust_Ann_Income'].median())","35b6cb51":"data['Gender'].mode()[0]","3e000860":"#Replace the missing values for Gender column\ndata['Gender'] = data['Gender'].replace('U',data['Gender'].mode()[0])","441eb8c6":"data['Gender'].unique()","35e11791":"data.head(2)","17aae0f2":"sns.boxplot(x='Potential_Customer',y='Pur_5_years',data=data)","05786d80":"data.columns","fbb05199":"#SWARM HUE\ntarget = 'Potential_Customer' #target variable\nx = 'Pur_5_years'  #numerical variable\n\nsns.set_style('whitegrid')\nsns.swarmplot(x=target,y=x,data=data,hue='Status_CustN',palette = \"Set2\",split=True)","34631c31":"#BOX AND SWARM\ntarget = 'Potential_Customer' #target variable\nx = 'Pur_5_years'  #numerical variable\n\nsns.set_style('whitegrid')\nsns.boxplot(x=target,y=x,data=data,palette = \"Set2\",whis=np.inf)\nsns.swarmplot(x=target,y=x,data=data,color='black',alpha=0.5)","a8ff5617":"sns.boxplot(x='Potential_Customer',y='Pur_5_years',data=data,hue='Gender')","054eaa77":"sns.distplot(data['Age'])","0edeb4cf":"data.describe()","cce319a2":"data.info()","5e3afa41":"from scipy.stats import norm, skewnorm\nsns.distplot(data['Cust_Ann_Income'],fit=skewnorm,kde=False\n            ).set(xlabel= 'Annual Customer Income ($)',ylabel= 'Density' )","02868355":"sns.countplot(data['Gender']).set(xlabel= 'Gender',ylabel= 'Count' )","3f3239c5":"sns.distplot(data['Ad_Res_1_year'],bins=20,hist_kws={\"alpha\": 0.5})\nsns.distplot(data['Ad_Res_3_Year'],bins=20,hist_kws={\"alpha\": 0.5}\n            ).set(xlabel='Ad_Res_1_year vs Ad_Res_3_Year', ylabel='Count')","98c46209":"y = 'Potential_Customer' #target variable\nx = 'Age'  #numerical variable\n\nplt.title('Distribution of customers based on Age grouped by Potential_Customer')\nsns.violinplot(x=target,y=x,data=data)    \nsns.boxplot(x=target,y=x,data=data,boxprops=dict(alpha=.3))","228ffdc4":"sns.distplot(data['Pur_latest'],)\n\nsns.distplot(data['Pur_5_years'])","16f08c57":"sns.boxplot(x= data['Gender'], y= data['Pur_latest'], data= data).set(ylabel= 'Latest Purchases', xlabel= 'Gender')","147810a0":"latpur = data[['Pur_latest','Gender']]\nround(latpur.groupby(['Gender']).mean(),2)","a2fb70d1":"sns.countplot(x= data[\"Status_CustN\"])","68080e67":"sns.boxplot(x= 'Status_CustN',y='Pur_3_years_Avg',data=data)","787a1e89":"sns.boxplot(x= 'Status_CustN',y='Pur_5_years_Avg',data=data)","f4e12ec8":"sns.countplot(x= data[\"InAct_Last\"])","b85da9dc":"sns.boxplot(x= 'Gender',y='Pur_3_years_Avg',data=data)","45470d9a":"sns.boxplot(x= 'Gender',y='Ad_Res_Ind_5_Year',data=data)","0c18ecad":"sns.boxplot(x= 'Status_CustN',y='Ad_Res_Ind_5_Year',data=data)","c624a587":"sns.boxplot(x= 'Cust_Prop',y='Ad_Res_Ind_5_Year',data=data)","8695cfd6":"data.describe()","5807360d":"#Ads responded total\nnewcol = (data.Ad_Res_1_year + data.Ad_Res_3_Year + data.Ad_Res_5_Year)\ndata['Ad_Res_Total'] = round(newcol,3)\ndata['Ad_Res_Total']\n\n#Ads indirect total\nnewcol = (data.Ad_Res_Ind_1_Year + data.Ad_Res_Ind_3_Year + data.Ad_Res_Ind_5_Year)\ndata['Ad_Res_Ind_Total'] = round(newcol,3)\ndata['Ad_Res_Ind_Total']\n\n#Puchase total\nnewcol = (data.Pur_3_years + data.Pur_5_years + data.Pur_latest)\ndata['Pur_Total'] = round(newcol,3)\ndata['Pur_Total']","37bdfbc4":"data.head(5)","bb980e85":"feature_var = data[['Ad_Res_Total','Pur_Total','Ad_Res_Ind_Total']]\nfeature_var.corr()","b0b88899":"feature_var.corr().style.background_gradient(cmap='coolwarm')","827c5d46":"### Summarize your findings - what have you learned from your insights?","5dd21052":"### How should we handle missing values? (Should we drop the rows? or impute them with values?)\n","a91bfc67":"# <font color=green>Feature Selection<font>\n\n### Check the correlation among the variables","eeffce2f":"#### Handling Missing Value for `Gender` column\n","9df3b885":"### Explore Relationship Between Categorical & Target Variable\n","7db3e036":"### Check the distribution of customers who responded to ads in past 5 years with By Gender","e82933e2":"### Do we need `C_ID` in our analysis?","74cfc616":"Changes for Age is omitted since it is not relevant to change missing value of age to 0.","a1a36376":"# <font color=green>Exploratory Data Analysis (EDA)<font>\nChecking the relationship of variables, summary of data, outliers, filling missing values etc.","c3fb6a27":"### What is the average number of purchase made in the last 5 years among different customer status\n","33ad1a33":"# <font color=green>Data Cleaning<font>\nChecking the existance of missing values, the type of variables, or integrity of data.","f655c4b4":"### What is the average number of purchase made in the last 3 years among different gender\n","c86d93bd":"### What is the distribution of customers' last purchase\n","5c399d9a":"### Explore the Relationship between Numerical Variables & Target Variable","2ffdd80f":"### Load the Data into Pandas Dataframe","b8390549":"## Explore Numerical Variables\n","d4fd30bd":"However there are outliers, same customers that repeat purchase up until 14","40ec6ade":"### Check whether the columns' types are accurate? if not handle them\n","9669fc7e":"### Why columns such as `Cust_Last_Purchase` are `object` while they should be `float64`?\n\n#### Notice Some features have Dollar AND Comma. Remove the dollar sign and comma from these features\n\nCan use `df.col=df.col.str.replace('OldSign', 'NewSign')`","5acc74f5":"### Explore the data by visualizing other features (such as customer annual income, distribution of gender)\n- Start by asking questions that can add value to the business (example: how did my customers behaving lately?)\n- Then continue by identifying which data are needed for the questions to be answered","b5b2f896":"### Create a Heatmap of correlation between the variables","71d0f9e9":"### Insight\n","b6ebc0ff":"since the missing values for Cust_Last_Purchase is 0.52 which is more than 50%. so we drop it","2763fa30":"### Count all NaN in the dataframe (both columns & Rows)\n","6b266d7a":"# <font color=green>Feature Engineering<font>\n    \n### We have too many Features? Do you think you can make some high level features? \n\nFor example: Instead of three variables for number of ads responded by customer? why not create a single variable which shows ads responded in last three years","e9ce1909":"### What columns do we have?","9e7d6bf7":"### How big is the dataset? (number of rows, features and total datapoints)","23723887":"### Check data for duplicate rows","a33dd217":"### What is the type of each column?\n","b101fca6":"#### Handling Missing Value for `Cust_Ann_Income` column ","48423442":"### Summarize your findings - what have you learned from your insights?","2e78503e":"#### Plot By Customer Status","1d56fcde":"### Before handling missing values","44af4ec9":"It might be better to combine E, F, N & L because their values are insignificant","1c076718":"### What's the Purchase amount pattern with regards to Gender","6257b3a3":"# <font color=green>Insights through data visualization<font>\n\n### Create a chart to visualize potential customer breakdown","c80c7eee":"### What is the distribution of the inactive number of months since last purchase?\n","17b5f924":"#### Plot By House Ownership","b4a901ee":"### On average, which group of gender has the higher latest purchase amount?\n","a4862130":"### Combining E, F, N & L\n","0b8acd6d":"No. So let's drop it","37ee5068":"### How is the Age of the customers distributed? Plot your Answer with the appropriate chart","698e33b5":"#### Handling Missing Value for `Pur_3_years_Avg_Indirect` column ","3fe37533":"The missing values are now replaced with mean","fcfc8b21":"The \u201ctarget variable\u201d is the variable whose values are to be modeled and predicted by other variables.\nhttps:\/\/www.dtreg.com\/solution\/classes-and-types-of-variables#:~:text=Target%20variable%20%2D%2D%20The%20%E2%80%9Ctarget,in%20a%20decision%20tree%20analysis.","d9e63b43":"#### Handling Missing Value for `Age` column\n","cfc87101":"Most customers annual incomes are around 50000 $","623f215e":"Pur_Total has a positive correlation with Ad_Res showing that promotion done by the company does indeed led to the increase in sales. We may conclude that the advertising campaign was a success but further research may be required.","febfb776":"### After replacing missing values with mean","2e04a635":"## Check the data for missing values?","2b416242":"## Explore Categorical Variables","697d3bbc":"###  Check the skewness and kurtosis of the variables? Is it normal? Document your process in the notebook of handling skewness and kurtosis\n","9cdc238f":"### Remove duplicate rows","ccd19645":"Ad_Res_Total is heavily correlated with Ad_Res_Ind_Total. This might mean that the advertisements that reached out to the users, were then spread further via the consumer themselves by mouth to mouth, social media and referrals","2578213e":"Customer last purchased NaN value was replaced with mean","3cac9d8b":"### Count all NaN in each column","bfc6d700":"### What is the average number of purchase made in the last 3 years among different customer status\n","7a8941cc":"#### Handling Missing Value for `Cust_Last_Purchase` column","5a4dda4d":"In the last 3 years, most same customers often repeat purchase twice","0802da62":"### What is the distribution of the status of our customers\n","fb4d52e1":"#### Plot By gender"}}