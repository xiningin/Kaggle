{"cell_type":{"7060ee91":"code","fffbaf7f":"code","482fc177":"code","0458fa8b":"code","1d6a4aaf":"code","e44c9c15":"code","b06a279c":"code","8789a84e":"code","47f2ed2e":"code","a90fcdae":"code","416aa7ae":"code","94f42ec4":"code","6078b4ba":"code","29a884cf":"code","e11528cf":"code","01e9cccf":"code","4ec61b3c":"code","a0789f7a":"code","bb2ee29c":"code","bb76f770":"code","9a1b9511":"code","e1a9b24e":"code","d0b1a5c6":"code","3dc20893":"code","a2b414b9":"code","4c5c1030":"code","1c2cb230":"code","cf104f7b":"code","8d655588":"code","3053f678":"code","b2315fe5":"code","285c1cc9":"code","94e51a00":"code","00c17558":"code","0f6fad22":"code","77022a90":"code","2ca7cdf7":"code","587eba2a":"code","6f429796":"code","476a1b2a":"code","ea0ba7ad":"code","be55760f":"code","4eb0c699":"code","847bb204":"code","71756fcc":"code","91b675a2":"markdown","2374dc38":"markdown","dd50c619":"markdown","ab5a2af0":"markdown","5883decb":"markdown","df7a9b5e":"markdown","053a3d7c":"markdown","650b50a2":"markdown","6a0b2990":"markdown","97deff9b":"markdown","d4d8ea99":"markdown","64602ecb":"markdown","7a90f53a":"markdown","91fdfa52":"markdown","2a6cf661":"markdown","d0fe7583":"markdown","53a62202":"markdown","10e37dd1":"markdown","0f9eaa8d":"markdown","38931f34":"markdown","bd736da5":"markdown","00dc8973":"markdown","3c6efb62":"markdown","c3f75a48":"markdown","a9319293":"markdown","a21649a7":"markdown","7c02386b":"markdown","d297e409":"markdown","d70de68f":"markdown","8d1ddfc9":"markdown","5fbd6d5d":"markdown","c46ef03f":"markdown","6799033e":"markdown","5b2e1ce6":"markdown"},"source":{"7060ee91":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport tensorflow as tf\nimport matplotlib.pyplot as plt\nimport matplotlib\nimport seaborn as sns\nimport warnings\nimport plotly.graph_objects as go # To Generate Graphs","fffbaf7f":"dataset = pd.read_csv('..\/input\/heart-failure-clinical-data\/heart_failure_clinical_records_dataset.csv')\n","482fc177":"dataset.head()","0458fa8b":"dataset.tail()","1d6a4aaf":"dataset.shape","e44c9c15":"dataset.describe().T","b06a279c":"dataset.isnull().sum()","8789a84e":"sns.heatmap(dataset.isnull())","47f2ed2e":"dataset.info()","a90fcdae":"sns.set()\ndataset.hist(figsize = (25,25))","416aa7ae":"plt.figure(figsize=(6,4))\nsns.countplot(dataset.DEATH_EVENT,palette=['#be9adf','#b2f7ae'])\nplt.show()","94f42ec4":"(dataset.DEATH_EVENT==1).sum()\/len(dataset)","6078b4ba":"fig_data = ['anaemia' , 'high_blood_pressure' , 'diabetes' ,\n            'sex'  , 'smoking' ]\nq = 1\nplt.figure(figsize=(32,24))\n# Plot a grid with count plots of all categorical variables\nfor j in fig_data:\n    plt.subplot(2,3,q)\n    ax = sns.countplot(dataset[j], hue = dataset.DEATH_EVENT, palette=['#be9adf','#b2f7ae'])\n    plt.xlabel(j)\n    q += 1\nplt.show()","29a884cf":"Erkek = dataset[dataset[\"sex\"]==1]\nKad\u0131n = dataset[dataset[\"sex\"]==0]\n\n\nlabels = ['Ya\u015fayan Erkek','\u00d6len Erkek', \"Ya\u015fayan Kad\u0131n\", \"\u00d6len Kad\u0131n\"]\nvalues = [len(Erkek[dataset[\"DEATH_EVENT\"]==0]),len(Erkek[dataset[\"DEATH_EVENT\"]==1]),\n          len(Kad\u0131n[dataset[\"DEATH_EVENT\"]==0]),len(Kad\u0131n[dataset[\"DEATH_EVENT\"]==1])]\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, hole=.4)])\nfig.update_layout(title_text=\"Cinsiyetlerin Hayatta Kalma Oran\u0131\")\nfig.show()","e11528cf":"Erkek = dataset[\"sex\"]==1\nKad\u0131n = dataset[\"sex\"]==0\n\n\nlabels = ['Toplam Erkek Say\u0131s\u0131','Toplam Kad\u0131n Say\u0131s\u0131']\nvalues = [Erkek.sum() , Kad\u0131n.sum()]\nfig = go.Figure(data=[go.Pie(labels=labels, values=values, hole=.2)])\nfig.update_layout(title_text=\"Verideki cinsiyetlerin oran\u0131\")\nfig.show()","01e9cccf":"fig_data = ['age']\nq = 1\nplt.figure(figsize=(32,24))\n# Plot a grid with count plots of all categorical variables\nfor j in fig_data:\n    plt.subplot(2,1 ,q)\n    ax = sns.countplot(dataset[j], hue = dataset.DEATH_EVENT, palette=['#be9adf','#b2f7ae'])\n    plt.xlabel(j)\n    q += 1\nplt.show()","4ec61b3c":"sns.kdeplot(\n data = dataset ,x=\"platelets\" , hue=\"DEATH_EVENT\")","a0789f7a":"sns.kdeplot(\n data = dataset ,x=\"serum_creatinine\" , hue=\"DEATH_EVENT\")","bb2ee29c":"sns.kdeplot(\n data = dataset ,x=\"serum_sodium\" , hue=\"DEATH_EVENT\")","bb76f770":"sns.kdeplot(\n data = dataset ,x=\"ejection_fraction\" , hue=\"DEATH_EVENT\")","9a1b9511":"sns.kdeplot(\n data = dataset ,x= \"creatinine_phosphokinase\"  , hue=\"DEATH_EVENT\")","e1a9b24e":"sns.kdeplot(\n data = dataset ,x=\"time\" , hue=\"DEATH_EVENT\")","d0b1a5c6":"dataset.corr()","3dc20893":"corr = dataset.corr()\nf,ax=plt.subplots(figsize=(25,15))\nsns.heatmap(corr, annot=True, ax=ax)\nplt.show()","a2b414b9":"de\u011fi\u015fken = [\"age\",\"creatinine_phosphokinase\",\"ejection_fraction\",\"platelets\",\"serum_creatinine\",\"serum_sodium\", \"time\"]\nfor i in de\u011fi\u015fken:\n    plt.figure(figsize=(12,12))\n   # sns.swarmplot(x=data[\"DEATH_EVENT\"], y=data[i])\n    sns.boxenplot(x=dataset[\"DEATH_EVENT\"], y=dataset[i])\n    plt.show()","4c5c1030":"X = dataset.iloc[: ,:13].values\ny = dataset.iloc[:, -1].values","1c2cb230":"X","cf104f7b":"y","8d655588":"X[0]","3053f678":"from sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2 ,random_state = 0)","b2315fe5":"X_train","285c1cc9":"X_test","94e51a00":"# Initializing the ANN\nann = tf.keras.models.Sequential()\n# Add the input layer and first hidden layer\nann.add(tf.keras.layers.Dense(units=12, activation='relu', input_shape=X_train[0].shape))\n# Add the second hidden layer\nann.add(tf.keras.layers.Dense(units=8, activation='relu'))\n# Add the output layer\nann.add(tf.keras.layers.Dense(units=1, activation='sigmoid'))","00c17558":"ann.summary()","0f6fad22":"ann.compile(optimizer = 'adam', loss = 'binary_crossentropy', metrics = ['accuracy'])\nann.fit(X_train, y_train, batch_size = 32, epochs = 20)","77022a90":"y_pred = ann.predict(X_test)\ny_pred = (y_pred > 0.5)\npd.DataFrame(list(zip(y_test, y_pred)), columns=['Actual', 'Predicted'])","2ca7cdf7":"from sklearn.metrics import confusion_matrix, accuracy_score\nprint(confusion_matrix(y_test, y_pred))\nprint(accuracy_score(y_test, y_pred))","587eba2a":"\nfrom sklearn.preprocessing import StandardScaler\nsc = StandardScaler()\nX_train = sc.fit_transform(X_train)\nX_test = sc.transform(X_test)","6f429796":"ann = tf.keras.models.Sequential()\n# Add the input layer and first hidden layer\nann.add(tf.keras.layers.Dense(units=12, activation='relu', input_shape=X_train[0].shape))\n# Add the second hidden layer\nann.add(tf.keras.layers.Dense(units=8, activation='relu'))\n# Add the output layer\nann.add(tf.keras.layers.Dense(units=1, activation='sigmoid'))","476a1b2a":"ann.summary()","ea0ba7ad":"ann.compile(optimizer = 'adam', loss = 'binary_crossentropy', metrics = ['accuracy'])\nann.fit(X_train, y_train, batch_size = 32, epochs = 20)","be55760f":"print(ann.predict(sc.transform([[65, 1, 150, 1, 35, 1, 350000, 1.5, 200, 1, 1, 100,1]])))","4eb0c699":"print(ann.predict(sc.transform([[65, 1, 150, 1, 35, 1, 350000, 1.5, 200, 1, 1, 100,1]])) > 0.5)","847bb204":"y_pred = ann.predict(X_test)\ny_pred = (y_pred > 0.5)\npd.DataFrame(list(zip(y_test, y_pred)), columns=['Actual', 'Predicted'])","71756fcc":"from sklearn.metrics import confusion_matrix, accuracy_score\nprint(confusion_matrix(y_test, y_pred))\nprint(accuracy_score(y_test, y_pred))","91b675a2":"Verimizi e\u011fitmek i\u00e7in test ve e\u011fitim olarak ay\u0131ral\u0131m.Verinin %20'lik k\u0131sm\u0131n\u0131 test olarak ay\u0131r\u0131yoruz.","2374dc38":"Bu grafiklerde alt de\u011fer ve \u00fcst de\u011ferlerin ilerisinde g\u00f6rd\u00fc\u011f\u00fcm\u00fcz noktalar\u0131 anormal de\u011ferler olarak adland\u0131rabiliriz.","dd50c619":"\u015eimdi verimizi g\u00f6rselle\u015ftirelim.","ab5a2af0":"Kandaki kreatinin seviyesi 2 ile 4 aras\u0131ndayken \u00f6l\u00fcm say\u0131s\u0131n\u0131n daha fazla oldu\u011funu g\u00f6rebiliriz.","5883decb":"Verimizde eksik de\u011fer olup olmad\u0131\u011f\u0131n\u0131 kontrol edelim.","df7a9b5e":"Kas\u0131lmada kalpten \u00e7\u0131kan kan y\u00fczdessinin az oldu\u011fu yerlerde \u00f6l\u00fcm olay\u0131n\u0131n fazla oldu\u011funu g\u00f6rebiliriz.","053a3d7c":"\u015eimdide verimizde anomali kontrol\u00fc yapal\u0131m.Anomali kontrol\u00fcn\u00fc ikili de\u011fere sahip olmayan de\u011fi\u015fkenlerimiz \u00fczerinde yapaca\u011f\u0131z.U\u00e7 de\u011fer analizi i\u00e7in boxenplot grafi\u011fini \u00e7izdirelim.","650b50a2":"Korelasyon matrisimizde en g\u00fc\u00e7l\u00fc pozitif ili\u015fkinin cinsiyet ve sigara aras\u0131nda oldu\u011funu g\u00f6r\u00fcyoruz.\n\nYa\u015f ile \u00f6l\u00fcm olay\u0131 aras\u0131ndaki ili\u015fkininde pozitif oldu\u011funu g\u00f6r\u00fcyoruz.Yani ya\u015f artt\u0131k\u00e7a \u00f6l\u00fcm olay\u0131n\u0131n ger\u00e7ekle\u015fimide art\u0131yor.\n\nZaman ile \u00f6l\u00fcm olay\u0131 aras\u0131nda en g\u00fc\u00e7l\u00fc negatif ili\u015fkinin oldu\u011funu g\u00f6r\u00fcyoruz.Tedavi- takip s\u00fcresi artt\u0131k\u00e7a \u00f6l\u00fcm olay\u0131n\u0131n azald\u0131\u011f\u0131n\u0131 s\u00f6yleyebiliriz.\n\nKalbin kas\u0131lmas\u0131nda pompalanan kan ile \u00f6l\u00fcm olay\u0131n\u0131n aras\u0131ndaki ili\u015fkinin negatif oldu\u011funu g\u00f6r\u00fcyoruz.\n\nKandaki kreatinin ile \u00f6l\u00fcm olay\u0131 aras\u0131ndaki ili\u015fkinin pozitif oldu\u011funu g\u00f6r\u00fcyoruz.","6a0b2990":"\u0130lk katman\u0131m\u0131zda 13*12 + 12 =  168 Buradaki 13 input say\u0131m\u0131z\n\n\u0130kinci katmanda 12 * 8 + 8 = 104\n\nSon katmanda 8 * 1 + 1 = 9 \nolacak \u015fekilde parametreleri olu\u015fturur.","97deff9b":"Hedef de\u011fikenimiz ile anemi , hipertansiyon , diabet ,cinsiyet ve sigara gibi 0 ve 1 lerle ifade edebildi\u011fimiz de\u011ferlerin ili\u015fkisini g\u00f6rmek i\u00e7in g\u00f6rselle\u015ftirme yapt\u0131k. ","d4d8ea99":"Bu grafikte g\u00f6rd\u00fc\u011f\u00fcm\u00fcz \u00fczere ya\u015fayan ve \u00f6len erkek oran\u0131 kad\u0131nlar\u0131n oranlar\u0131ndan y\u00fcksek.Bunun nedeni veri seritimizdeki kad\u0131n erkek da\u011f\u0131l\u0131m\u0131 olabilir.","64602ecb":"\u00d6nce verimizi \u00f6l\u00e7eklendirmeden ANN beklentilerimizi yorumlayal\u0131m.","7a90f53a":"Almina Ecem Eskicindil \n\nK\u00fcbra Beste \u00d6zcan","91fdfa52":"'relu' aktivasyonunu kulland\u0131\u011f\u0131m\u0131z iki gizli katman olu\u015fturduk.Bunlardan ilki 12 , ikincisi 8 d\u00fc\u011f\u00fcmden olu\u015fuyor.\n\n\u00c7\u0131k\u0131\u015f katman\u0131 ekliyoruz.\u0130ki giri\u015f katman\u0131m\u0131z oldu\u011fundan \u00e7\u0131k\u0131\u015f katman\u0131m\u0131za tek d\u00fc\u011f\u00fcm ekliyoruz.\n\nOlu\u015fturdu\u011fumuz modeli g\u00f6rselle\u015ftirelim.","2a6cf661":"\u015eimdi korelasyon i\u00e7in korelasyon matrisini ve \u0131s\u0131 haritas\u0131n\u0131 \u00e7izdirelim.","d0fe7583":"Modelimizi adam optimiz\u00f6r\u00fc ile 20 d\u00f6nem boyunca e\u011fittik.Bu s\u0131rada ikili \u00e7apraz entropi kayb\u0131n\u0131 kullan\u0131yoruz.\n\n\u0130kili \u00e7apraz entropi kayb\u0131nda olas\u0131l\u0131k tahmin edilen etiketten uzakla\u015ft\u0131k\u00e7a \u00e7apraz entropi kayb\u0131 artar.\n\n","53a62202":"Verimizi \u00f6l\u00e7eklendirdikten sonra 20 d\u00f6nem boyunca e\u011fittik. \u00d6l\u00e7eklendirmeden \u00f6nce yapt\u0131\u011f\u0131m\u0131z e\u011fitime g\u00f6re daha fazla kesinlik sa\u011flayarak %90'lara ula\u015ft\u0131\u011f\u0131m\u0131z\u0131 g\u00f6r\u00fcyoruz. \u00d6l\u00e7eklendirmeden sonra ikili \u00e7apraz entropi kayb\u0131n\u0131n d\u00fc\u015ft\u00fc\u011f\u00fcn\u00fc g\u00f6zlemliyoruz.Bu g\u00f6zleme g\u00f6re verimizin daha d\u00fczg\u00fcn e\u011fitildi\u011fini s\u00f6yleyebiliriz.","10e37dd1":"Grafi\u011fimizde toplam erkek oran\u0131n\u0131n toplam kad\u0131n oran\u0131ndan fazla oldu\u011funu g\u00f6r\u00fcyoruz.","0f9eaa8d":"Verimizde eksik de\u011fer bulunmuyor.","38931f34":"# ANN","bd736da5":"Karma\u015f\u0131kl\u0131k matrisini \u00e7izdirelim.","00dc8973":"# BASIC EDA","3c6efb62":"DEATH_EVENT de\u011ferini hedef de\u011fi\u015fken olarak se\u00e7elim ve verimizi g\u00f6rselle\u015ftirelim.","c3f75a48":"Verimizdeki de\u011ferlerin anlamlar\u0131 \u015fu \u015fekilde a\u00e7\u0131klanabilir.\n1. age : Hastalar\u0131n ya\u015f\u0131\n2. anaemia : Hastalar\u0131n kan de\u011ferlerinin normalin alt\u0131nda olma durumu\n3. creatinine_phosphokinase : Hastan\u0131n kan\u0131ndaki CPK enziminin de\u011feri\n4. diabetes : Hastan\u0131n \u015feker hastas\u0131 olup olmad\u0131\u011f\u0131\n5. ejection_fraction : Hastan\u0131n kalbinin her kas\u0131lmas\u0131nda kalpten \u00e7\u0131kan kan\u0131n y\u00fczdesi\n6. high_blood_pressure : Hastan\u0131n y\u00fcksek tansiyonunun olup olmad\u0131\u011f\u0131     \n7. platelets : Hastan\u0131n kan\u0131ndaki trombosit miktar\u0131               \n8. serum_creatinine : Hastan\u0131n kan\u0131ndaki kreatinin seviyesi      \n9. serum_sodium : Kandaki sodyum seviyesi            \n10. sex : Hastan\u0131n cinsiyeti 0:Kad\u0131n , 1:Erkek               \n11. smoking : Hastan\u0131n sigara i\u00e7ip i\u00e7meme durumu                 \n12. time : Hastan\u0131n takip edilme s\u00fcresi (g\u00fcnl\u00fck)                      \n13. DEATH_EVENT : Hastan\u0131n takip edildi\u011fi s\u00fcre i\u00e7inde \u00f6l\u00fcp \u00f6lmeme durumu","a9319293":"Veri setimizi ekleyelim.Verimizin ilk 5 ve son 5 de\u011ferini g\u00f6r\u00fcnt\u00fcleyelim.","a21649a7":"* Age : 65 \n* Anaemia : 1\n* Creatinine_phosphokinase : 150\n* Diabetes : 1\n* Ejection_fraction : 35\n* High_blood_pressure : 1\n* Platelets : 350000\n* Serum_creatinie : 1.5\n* Serum_sodium : 200\n* sex : 1\n* Smoking : 1\n* Time: 100\n* DEATH_EVENT : 1","7c02386b":"\u015eimdi verimizi \u00f6l\u00e7eklendirelim.","d297e409":"Takip edilen hastalardaki \u00f6l\u00fcm oran\u0131n\u0131n %50'nin alt\u0131nda oldu\u011funu g\u00f6r\u00fcyoruz.","d70de68f":"Kandaki trombosit oran\u0131 0.0 ile 0.6 aras\u0131ndayken \u00f6l\u00fcm olay\u0131 daha az ya\u015fanm\u0131\u015ft\u0131r.","8d1ddfc9":"60 vakadan 36'sini do\u011fru tahmin etmi\u015f.Ba\u015far\u0131 puan\u0131m\u0131z\u0131n %58 oldu\u011funu g\u00f6r\u00fcyoruz.19 hastan\u0131n yanl\u0131\u015f pozitif , 6 hastan\u0131n yanl\u0131\u015f negatif , 31 hastan\u0131n do\u011fru pozitif ve 4 hastan\u0131n do\u011fru negatif tahmin edildi\u011fini kar\u0131\u015f\u0131kl\u0131k matrisinde g\u00f6r\u00fcyoruz.\n\nVerimizi \u00f6l\u00e7eklendirmeden verilerimizin \ndo\u011fru tahmin edilmesinin  %50'nin \u00fcst\u00fcnde oldu\u011funu ve \u00e7apraz entropi kayb\u0131n\u0131n y\u00fcksek oldu\u011funu g\u00f6r\u00fcyoruz.","5fbd6d5d":"Yukar\u0131daki grafikte \u00f6l\u00fcm de\u011fi\u015fkeni ve ya\u015f de\u011fi\u015fkeni aras\u0131ndaki ili\u015fkiyi g\u00f6r\u00fcyoruz.Ya\u015f artt\u0131k\u00e7a \u00f6l\u00fcm\u00fcn ger\u00e7kele\u015fmesinin de genellikle artt\u0131\u011f\u0131n\u0131 s\u00f6yleyebiliriz.","c46ef03f":"Verimizde 299 sat\u0131r 13 s\u00fctun bulunuyor.","6799033e":"Verimizi \u00f6l\u00e7eklendirdikten %90'lik bir ba\u015far\u0131 sa\u011flad\u0131k.4 veri yanl\u0131\u015f pozitif ,2 veri yanl\u0131\u015f negatif , 35 veri do\u011fru pozitif ve 19 veri do\u011fru negatif tahmin edildi\u011fini karma\u015f\u0131kl\u0131k matrisinde g\u00f6rebiliriz. \n\nSonu\u00e7 olarak verimizi \u00f6l\u00e7eklendirerek verimizde daha b\u00fcy\u00fck bir ba\u015far\u0131 sa\u011flayabiliriz.","5b2e1ce6":"Verimizde kategorik de\u011fi\u015fken olmad\u0131\u011f\u0131n\u0131 g\u00f6r\u00fcyoruz.\u015eimdi verimizdeki de\u011fi\u015fkenlerin veri tiplerini g\u00f6r\u00fcnt\u00fcleyelim."}}