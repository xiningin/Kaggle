{"cell_type":{"a3b656ff":"code","49ee7c54":"code","c6a688a0":"code","08f24014":"code","7cdeca74":"code","7090a1df":"code","4928d113":"code","1395d27a":"code","7222cd83":"code","19ba994a":"code","b08bd357":"code","73fde7c4":"code","f517a164":"markdown","8f14808c":"markdown","40994149":"markdown","ac569dc6":"markdown","a31d2752":"markdown","b6deeb13":"markdown","5b515ba0":"markdown","a150d231":"markdown","294ea124":"markdown"},"source":{"a3b656ff":"import numpy as np\nimport pandas as pd\nimport re\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns","49ee7c54":"\n\ndata = pd.read_csv('..\/input\/list-faskes-bpjs-indonesia\/Data Faskes BPJS 2019.csv', header=0)\n\ndef namaKota(row):\n    str = row.replace('Kode Faskes dan Alamat Rumah Sakit BPJS di ','')\n    return str\n\n\ndef remSpace(row):\n    str = \" \".join(row.split())\n    return str\n\ndef searchLatLong(row):\n    str = re.search('(-?([0-9]{1}|[0-9]0|[1-8]{1,2}).[0-9]{1,6},(-?(1[0-8]{1,2}|9[1-9]{1}).[1-9]{1,6}))', row)\n    if str:\n        return str.group()\n    return np.NaN\n\ndef searchLatLongV2(row):\n    str = row.strip('http:\/\/maps.google.co.id\/?q=').strip('-')\n    if str:\n        return str\n    return np.NaN\n        \ndef valid_latitude(row):\n    if float(row) in range(-90.0, 90.0):\n        return row\n    return np.NaN\n\n\ndef valid_longitude(row):\n    return row","c6a688a0":"data['TelpFaskes'] = data['TelpFaskes'].apply(remSpace)\ndata['NamaFaskes'] = data['NamaFaskes'].apply(remSpace)\ndata['KotaKab'] = data['KotaKab'].apply(remSpace)","08f24014":"data['KotaKab'] = data['KotaKab'].apply(namaKota)","7cdeca74":"data['LatLongFaskes'] = data['LatLongFaskes'].apply(searchLatLongV2)\n\nlat = []\nlon = []\n\nfor row in data['LatLongFaskes']:\n    try:\n        latitude = float(row.split(',')[0])\n        longitude = float(row.split(',')[1])\n        if (-90.0 <= latitude <= 90.0):\n            lat.append(latitude)\n        else:\n            lat.append(np.NaN)\n        \n        if (-180.0 <= longitude <= 180.0):\n            lon.append(longitude)\n        else:\n            lon.append(np.NaN)\n    except:\n        lat.append(np.NaN)\n        lon.append(np.NaN)\n\ndata['Latitude'] = lat\ndata['Longitude'] = lon\ndata = data.drop(\"LatLongFaskes\", axis=1)","7090a1df":"data = data.astype(str)\ndata = data.applymap(lambda x: re.sub(r'^-$', str(np.NaN), x))\ndata.to_csv('Data Faskes BPJS 2019-clean_data.csv')\n","4928d113":"dataBpjsProv = pd.DataFrame(data.groupby(['Provinsi'])['KodeFaskes'].count())","1395d27a":"dataPupulasi = pd.read_csv('..\/input\/pupulasi-indonesia-2010\/indo_12_1.csv', header=0, index_col = 0)\ndataPupulasi = dataPupulasi[['Pupulasi2010']]","7222cd83":"dataPupulasi.head()","19ba994a":"dataBpjsProv['JumlahFaskes'] = dataBpjsProv['KodeFaskes']\ndataBpjsProv = dataBpjsProv.drop(columns=['KodeFaskes'])\ndataBpjsProv.head()","b08bd357":"DataFaskesPupulasi = pd.concat([dataBpjsProv,dataPupulasi], axis = 1,sort=True)\nDataFaskesPupulasi['RatioPendudukFaskes'] = DataFaskesPupulasi['Pupulasi2010']\/DataFaskesPupulasi['JumlahFaskes']","73fde7c4":"DataFaskesPupulasi.sort_values('RatioPendudukFaskes')","f517a164":"------------------------------------------------------------------------------------------------\nCopy and edit from \nhttps:\/\/www.kaggle.com\/anggriyulio\/cleaning-data\n\nMetode extract data latitide dan longitude diubah menjadi\n    \n    str = row.strip('http:\/\/maps.google.co.id\/?q=').strip('-')\n\nKarena jika menggunakan\n\n    str = re.search('(-?([0-9]{1}|[0-9]0|[1-8]{1,2}).[0-9]{1,6},(-?(1[0-8]{1,2}|9[1-9]{1}).[1-9]{1,6}))', row)\n    \ndata latitude\/longitude dengan contoh pola data 98.017183 (angka 0 dibelakang koma) menjadi hilang (NaN)\n\n------------------------------------------------------------------------------------------------","8f14808c":"#### Memisahkan latitude longitude dari url dan menambah kolom khusus","40994149":"#### Mengatasi format data yang tidak konsisten","ac569dc6":"#### Memuat library dan membuat fungsi yang dibutuhkan","a31d2752":"#### Membersihkan nama Kota\/Kab","b6deeb13":"Data Populasi didapat dari website [BPS](https:\/\/www.bps.go.id\/statictable\/2009\/02\/20\/1267\/penduduk-indonesia-menurut-provinsi-1971-1980-1990-1995-2000-dan-2010.html)","5b515ba0":"Cari Ratio Perbandingan Jumlah Penduduk dan Jumlah Faskes, ","a150d231":"####  Menghapus karakter \\t \\n atau spasi yang berlebih","294ea124":"### Masalah\n- Format data tidak konsisten untuk setiap row, seperti penulisan strip (-) untuk data yang kosong.\n- Nama kota perlu di bersihkan kembali\n- Koordinat latitude longitude sebaiknya dipisah untuk mempermudah pengolahan data lebih lanjut"}}