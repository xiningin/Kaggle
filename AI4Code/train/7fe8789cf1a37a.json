{"cell_type":{"4fb95f4b":"code","0b4224af":"code","2b84664d":"code","9e5a6e02":"code","458a9630":"code","0603713c":"code","7e52559c":"code","65752760":"code","b6fc1fd1":"code","c3d541b8":"code","4d421e3e":"code","82613afb":"code","0231fe77":"markdown"},"source":{"4fb95f4b":"import pandas as pd\nimport numpy as np\npd.set_option(\"display.max_columns\", 100)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px","0b4224af":"df_train = pd.read_csv(\"..\/input\/data-science-autumn-2021\/train.csv\")\ndf_test = pd.read_csv(\"..\/input\/data-science-autumn-2021\/test.csv\")","2b84664d":"display(df_train.head(3))\ndisplay(df_train.columns)## 47\u5217\u3042\u308b\u306e\u3067\uff0c\u3072\u3068\u3064\u305a\u3064\u8981\u7d20\u3092\u898b\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\uff0e","9e5a6e02":"def visualize_trafic(df, name_=\"latestPrice\",zoom=9):\n    fig = px.scatter_mapbox(df,\n                            \n                            # Here, plotly gets, (x,y) coordinates\n                            lat=\"latitude\",\n                            lon=\"longitude\",\n                            \n                            #Here, plotly detects color of series\n                            color=name_,\n                            labels=name_,\n                            zoom=zoom,\n                            height=600,\n                            width=800)\n    fig.update_layout(mapbox_style='stamen-terrain')\n    fig.update_layout(margin={\"r\": 0, \"t\": 0, \"l\": 0, \"b\": 0})\n    fig.update_layout(title_text=\"GPS trafic\")\n    fig.show()","458a9630":"visualize_trafic(df_train)#\u9ad8\u3059\u304e\u308b\u7269\u4ef6\u304c\u3042\u308b\u6a21\u69d8","0603713c":"df_train_trim = df_train[df_train.latestPrice <= df_train.latestPrice.quantile(0.95)]","7e52559c":"visualize_trafic(df_train_trim)#\u7d50\u69cb\u7dba\u9e97\u306b\u5730\u57df\u5dee\u304c\u3042\u308a\u307e\u3059\u306d\u301c\u301c\u301c","65752760":"visualize_trafic(df_train_trim,name_ = \"zipcode\")#\u90f5\u4fbf\u756a\u53f7\u306e\u5206\u3051\u65b9","b6fc1fd1":"#\u5730\u57df\u3054\u3068\u306e\u76f8\u5bfe\u5024\u3092\u7b97\u51fa\u3059\u308b\u306e\u304c\u3088\u3055\u305d\u3046\uff0e\uff0e\uff0e\u5bb6\u306e\u5927\u304d\u3055\u304c\u5834\u6240\u306b\u3088\u3063\u3066\u4fa1\u5024\u304c\u9055\u3046\u3088\u3046\u306a","c3d541b8":"mean_ = df_train_trim.groupby(\"zipcode\")[\"lotSizeSqFt\"].describe()\ncol = [ \"lotSizeSqFt\" +\"_\"+ i  for i in (mean_.columns)]\nmean_.columns = col\nmean_ = mean_.reset_index()\nmean_.head(3)","4d421e3e":"df_train_trim = pd.merge(df_train_trim, mean_,how='left')\ndf_train_trim[\"lotSizeSqFt_relative\"] = df_train_trim[\"lotSizeSqFt\"] - df_train_trim[\"lotSizeSqFt_mean\"]","82613afb":"visualize_trafic(df_train_trim,name_ = \"lotSizeSqFt_relative\")","0231fe77":"### \u5730\u56f3\u4e0a\u3067\u307f\u3066\u307f\u307e\u3059"}}