{"cell_type":{"c319724f":"code","50850881":"code","d1acaf8e":"code","2daec654":"code","f0a85caa":"code","a7e32daf":"code","54482bbb":"code","0f66d1a7":"code","c3ded005":"code","17244fe2":"code","dcc12ac0":"code","8ced42dc":"code","4f0aa08f":"code","bdeaafc4":"code","c886b7c4":"code","855c1ac8":"code","6d2a0629":"code","d0da25e9":"code","097a5ad0":"code","f835f1d8":"code","c3606867":"code","50b7c1de":"code","6cd7db6a":"code","d9fb1a21":"code","43513fe5":"code","480fbc4f":"code","41e44539":"code","dff20828":"code","e43b36b3":"code","b05d3be0":"code","a2f49d8f":"code","58663621":"code","9353abe3":"code","64c44db5":"code","39fd6700":"code","7e3e47f8":"code","68dc92ad":"code","5ed928b3":"code","0986c646":"code","119ceccf":"code","05da23a1":"code","466c7d58":"code","17955930":"code","f1b40670":"code","fc5810b1":"code","74c9a00e":"code","f516dcc9":"code","9a5ee663":"code","a9eabcf1":"code","0444bbd7":"code","9e013db6":"code","d27ac8fd":"code","ed5c2940":"code","ca8f0763":"code","29d05290":"code","231657ba":"code","4eb2e01d":"code","a4d3b477":"code","be7d444d":"code","70eea56e":"code","ea9f60f4":"code","fc1dcdb8":"code","b3adfbf0":"code","7d2560d5":"code","3aa2f7a3":"markdown","69e93274":"markdown","b843a35d":"markdown","b7030396":"markdown","2b680c79":"markdown","2b9943f0":"markdown","e90ff285":"markdown","b93d8eed":"markdown","f1e8940a":"markdown","2c1d17de":"markdown","239a1dba":"markdown","037af96e":"markdown","eed19c6a":"markdown","f08c97cf":"markdown","8617a430":"markdown","7e1fe26a":"markdown","2a0703db":"markdown","316d325b":"markdown","3885e5f4":"markdown","34e5a450":"markdown","1bbc8ee4":"markdown","49a73277":"markdown","ec6ae9f0":"markdown","e0d7d856":"markdown","7bf665b5":"markdown","94355822":"markdown","aabdb5d6":"markdown","3b38fa75":"markdown","9bcf27fc":"markdown","2db271bd":"markdown","10b249b9":"markdown","aba7040e":"markdown","5ff0aae5":"markdown","62b4943d":"markdown","384b1c0e":"markdown","8993885f":"markdown","e42f8b01":"markdown","8f71bb33":"markdown","5e79a107":"markdown","f6bd81e6":"markdown","e6935d71":"markdown","3bc97b07":"markdown","14089391":"markdown","485d282c":"markdown"},"source":{"c319724f":"import nbconvert","50850881":"\"\"\"\n!pip install dexplot\nimport dexplot as dxp\n\"\"\"","d1acaf8e":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns\n\n%matplotlib inline\n","2daec654":"df=pd.read_csv('..\/input\/the-movies-dataset\/movies_metadata.csv')\ndf.head()","f0a85caa":"df.shape","a7e32daf":"df.shape","54482bbb":"df.info()","0f66d1a7":"#Keep the 1st genre only, it's the most indicator the movie genre\ndf['genres'][0]","c3ded005":"df['belongs_to_collection'][0]","17244fe2":"df['spoken_languages']","dcc12ac0":"df['original_language'].unique()","8ced42dc":"# adult Values isn't useful at all, I think I will drop all values that is not (False, True)\nprint(df['adult'].unique())","4f0aa08f":"#Status values, ==> 6 values\ndf.status.unique()","bdeaafc4":"#Will drop nan valeus\ndf.video.unique()","c886b7c4":"# needs to be changed to integer.\ndf.popularity.describe()","855c1ac8":"#Extract companies names\ndf.production_companies.unique()","6d2a0629":"#Will Extract countries names\ndf.production_countries.unique()","d0da25e9":"print(df[['id','imdb_id','title','original_title','original_language','spoken_languages']].nunique())","097a5ad0":"# Droping useless columns -> 7 cols \ndf=df.drop(['belongs_to_collection','homepage','overview','title','imdb_id','tagline','poster_path'],axis=1)\nprint(df.shape)\ndf.head()","f835f1d8":"df=df.dropna()\ndf.shape","c3606867":"# production_countries\n# Get production_countries names\ndf['production_countries']=df.loc[df['production_countries'].notna(), 'production_countries'].str.split(\"'name': \").str[1].str.split(\"'\").str[1]\n\n# production_companies\ndf['production_companies']=df.loc[df['production_companies'].notna(), 'production_companies'].str.split(\"'name': \").str[1].str.split(\"'\").str[1]\n\n#spoken_languages\ndf['spoken_languages']=df.loc[df['spoken_languages'].notna(), 'spoken_languages'].str.split(\"'name': \").str[1].str.split(\"'\").str[1]\n\n#genres\ndf['genres']=df.loc[df['genres'].notna(), 'genres'].str.split(\"'name': \").str[1].str.split(\"'\").str[1]\n\ndf.head()","50b7c1de":"# release_date\n# Transfer release_date from object to datetime\ndf['release_date']=pd.to_datetime(df['release_date'])\ndf.head()","6cd7db6a":"#Note that release_data has changed\ndf.info()","d9fb1a21":"# I think it's not necessary to tranfer id from object to int.\ndf['id']=df['id'].astype(str).astype(int)\ndf[['popularity','budget']]=df[['popularity','budget']].astype(str).astype(float)\ndf.info()","43513fe5":"df=df.drop_duplicates('id')","480fbc4f":"df.shape","41e44539":"df.info()","dff20828":"# It has noisy data and un-understandable data\nprint(df.spoken_languages.nunique())\ndf.spoken_languages.unique()","e43b36b3":"# I GUESS I will work with original_language column.\nprint(df.original_language.nunique())\ndf.original_language.unique()","b05d3be0":"# Droping nan after cleaning\ndf=df.dropna()\ndf.head()","a2f49d8f":"df.info()","58663621":"print(df.genres.nunique())\ndf.genres.unique()","9353abe3":"df.corr()","64c44db5":"\"\"\"\nfrom pandas_profiling import ProfileReport\nprofile = ProfileReport(df, title='Pandas Profiling Report', explorative=True)\n\"\"\"","39fd6700":"#profile.to_widgets()\n","7e3e47f8":"plt.figure(figsize=(10,5))\nsns.heatmap(df.corr());\nplt.title(\"Correlatino Between Featuers\");","68dc92ad":"languages=df.original_language.value_counts().iloc[:10]\nlanguages.index","5ed928b3":"# Plotting Movies status, and Movies original languages.\n#fig, ax = plt.subplots(ncols=2, figsize = [15,8])\n\ndefault_color = sns.color_palette()[0]\n#sns.yticks(np.arange(500,10000+500,500))\nstatus_bins=np.arange(df.status.value_counts().min(), df.status.value_counts().max()+50,50)\nplt.title(\"The Most Frequent Movies's Status\",fontsize=13)\nplt.xticks(rotation=60)\nsns.countplot(data = df, x = 'status', color = default_color);\n","0986c646":"plt.figure(figsize=[ 11.69, 8.27])\nplt.title(\"The Most Frequent Movies's Language\",fontsize=13)\nlanguages.plot(kind='barh',color = default_color);","119ceccf":"df.vote_average.describe()","05da23a1":"vote_avg_bins=np.arange(0,10+0.5,0.5)\nplt.hist(data=df, x='vote_average',bins=vote_avg_bins);\nplt.title('Vote_Average Distribution');","466c7d58":"df.popularity.describe()","17955930":"df[df.popularity ==df.popularity.max()]","f1b40670":"popularity_bins=np.arange(0,30+1,1)\nplt.hist(data=df, x='popularity',bins=popularity_bins);\nplt.title('popularity Distribution');","fc5810b1":"popularity_bins=10 ** np.arange(-1,3 +0.1, 0.1)\npopularity_ticks=[0.1,0.3,1,3,10,30,100,300,1000]\nlabels=['{}'.format( v) for v in popularity_ticks]\nplt.hist(data=df, x='popularity', bins=popularity_bins);\nplt.xscale('log')\nplt.xticks(popularity_ticks, labels);\nplt.title('Popularity Distribution.');","74c9a00e":"# Dropping rows with budget and revenue equal to zero. \n#df.drop(df.query(\"budget== budget.min()  and revenue==revenue.min()\").index, inplace = True) \n","f516dcc9":"# Checking\ndf.query(\"budget== budget.min() and revenue==revenue.min()\")","9a5ee663":"df.groupby('production_countries').production_companies.nunique().sort_values(ascending=False).to_frame('count').iloc[:10] .plot(kind='barh');\nplt.xlabel(\"Count\",fontsize=13)\nplt.ylabel(\"Production Countries\",fontsize=13)\nplt.title('TOP 10 countries with production companies.',fontsize=13);\n\nplt.legend().remove();","a9eabcf1":"plt.figure(figsize=[ 11.69, 8.27])\nbase_color = sns.color_palette()[0]\nax=sns.countplot(data=df, y='production_countries', \n              color=base_color,\n              order=df.production_countries.value_counts().iloc[:10].index,\n              #hue=df.genres.value_counts().iloc[:3]\n                );\nplt.xticks(rotation=30);\nplt.title(\"Top 10 Productibe countries for Movies\",fontsize=13);","0444bbd7":"df.vote_average.describe()","9e013db6":"df.release_date.describe()","d27ac8fd":"df['years'] = df['release_date'].apply(lambda x: x.year)\ndf['profit'] = df['revenue'] - df['budget']","ed5c2940":"plt.figure(figsize=(10,6))\ndf[(df['years'] < 2018) & (df['years'] >= 1950)].groupby(by = 'years').mean()['vote_average'].plot();\nplt.ylabel(\"Vote Average\",fontsize=13)\nplt.xlabel(\"Years\",fontsize=13)\n\nplt.title(\"Vote Avgerage | 1950-2018\",fontsize=13);","ca8f0763":"# there's a long tail in the distribution, so let's put it on a log scale instead\n#log_binsize = 0.025\nlog_binsize = 0.09\n\nbudget_bins = 10 ** np.arange(2.4, np.log10(df['budget'].max())+log_binsize, log_binsize)\nrevenue_bins = 10 ** np.arange(2.4, np.log10(df['revenue'].max())+log_binsize, log_binsize)\n\n#plt.figure(figsize=[8, 5])\nplt.figure(figsize=[ 11.69, 8.27])\nplt.hist(data = df, x = 'budget', bins = budget_bins,alpha=0.5)\nplt.hist(data = df, x = 'revenue', bins = revenue_bins,alpha=0.5)\n\nplt.xscale('log')\n#plt.xticks([500, 1e3, 2e3, 5e3, 1e4, 2e4], [500, '1k', '2k', '5k', '10k', '20k'])\n#plt.xticks([500, 10^3, 10^4, 10^5, 10^6, 10^8], [500, '1k', '10k', '1M', '10M', '10B'])\n\nplt.xlabel('Budget ($)',fontsize=13)\nplt.ylabel('Frequency',fontsize=13)\n\nplt.title('Budget & Revenue Distributions',fontsize=13)\nplt.legend(['budget','revenue'])\nplt.show()","29d05290":"sns.regplot(data = df, x = 'budget', y = 'revenue')\nplt.ylabel(\"Revenue $\")\nplt.xlabel(\"Budget $\")\nplt.title(\"Revenue Vs Budget\");","231657ba":"# Plotting budget and revenue among years from 1950 till 2018\n#plt.figure(figsize=(10,6))\nplt.figure(figsize=[ 11.69, 8.27])\ndf[(df['years'] < 2018) & (df['years'] >= 1950)].groupby(by = 'years').mean()['budget'].plot();\ndf[(df['years'] < 2018) & (df['years'] >= 1950)].groupby(by = 'years').mean()['revenue'].plot();\ndf[(df['years'] < 2018) & (df['years'] >= 1950)].groupby(by = 'years').mean()['profit'].plot();\n\nplt.legend() \n#plt.yticks(np.arange(df.budget.min(), df.budget.max()+500000,500000),['0 M','0.5 M','1 M','1.5 M','2 M','2.5 M', '3 M','3.5 M'])\nplt.ylabel(\"Million Dollars $\")\nplt.title(\"Budget $, Revenue $, Profit $ | 1950-2018\");","4eb2e01d":"genres_df= df.query('genres==[\"Drama\",\"Comedy\",\"Action\",\"Horror\"]')\ngenres_df.shape","a4d3b477":"genres_df.status.value_counts()","be7d444d":"#Multivariate Visualization.\n# Plotting status on x-axis and vote_count median on y-axis with genres as colored bars \n#plt.figure(figsize=(10,8))\ndxp.bar(x='status',\n        y='vote_count',\n        data=genres_df,\n        aggfunc='median',\n        split='genres',\n        title=\"Status | Vote count(Median) | Genres\" ,\n        figsize=(15,8))\n#dxp.count(val='status', data=genres_df, split='genres',normalize='status')\n#plt.yticks(np.arange(genres_df.status.value_counts().min(),genres_df.status.value_counts().max()+10 ,10));","70eea56e":"dxp.bar(x='status',\n        y='vote_average',\n        data=genres_df,\n        aggfunc='median',\n        split='genres',\n        title=\"Status | Vote Average(Median) | Genres\" ,\n        figsize=(15,8)\n       )\n#plt.figure(figsize=[ 11.69, 8.27])","ea9f60f4":"f1_year= sns.FacetGrid(data = df, col = 'genres',hue='status',col_wrap = 5)\nf1_year.map(plt.hist, 'vote_average', bins=np.arange(0,10+1,1)).add_legend(); \nplt.legend(fontsize=20);","fc1dcdb8":"arabic_movies=df[df.original_language=='ar'].drop(42802) # Deleting Isralian movie cause there's no such a place. \narabic_movies","b3adfbf0":"arabic_movies.production_countries.value_counts()","7d2560d5":"#plt.figure(figsize=[ 11.69, 8.27]);\nsns.relplot(x=\"vote_average\", y=\"vote_count\", size=\"genres\",hue=\"production_countries\", data=arabic_movies);\nsns.set(rc={'figure.figsize':(15,8.27)});\nplt.title(\"Vote avg |Vote count |Production countries |Genres \");","3aa2f7a3":"# What is the highest vote count and in which status and in which movie genre?\n","69e93274":"**I think popularity needs transformation**","b843a35d":"**since there is a high correlation between budget and revenue, then I have more questions about it**\n","b7030396":"# Dataset Overview\n       Movies Dataset consist of 24 columns and 45466 rows but I worked with 17 column only and I end up working with 31K rows, then I worked with more than 20K rows with genres (Drama, Action, Comedy, Horror), At the end I worked with Arabic movies only for my interest but it's a pretty small subset but it was so exciting to me.","2b680c79":"# Multivariate Visualizations.","2b9943f0":"# What is Popularity Distribution?","e90ff285":"# What is the highest Vote Average and in which status and in which movie genre?\n","b93d8eed":"## Vote_Avetage Distribution.\n**Vote_average is normally distributed but there's approximately 1000 vote_average ==0, It might be sth wrong in the data, or missing values in the original data that replaced with 0**","f1e8940a":"# What is the correlation and between Budget and Revenue?","2c1d17de":"# What are Budget and Revenue distributions?","239a1dba":"## Budget and Revenue Distributions.\n**Both budget and revenue are skewed to the right, Most movies budget and revenue are higher than million dollar**","037af96e":"## Budget, Revenue and Profit in (1950-2018)\n**Remarkable upward trend in budget, revenue and profit among years. \n    revenue and profit are approximately identical in many years, but before 1980 profit started to be a lot less than revenue and that became obvious and increased among years.**","eed19c6a":"# Arabic Movies\n**As an Arabic, Egyptian citizen I'm interested in arabic movies, so I filtered the dataset based on original language (ar), I know most of the Egyptian movies and these are some master pieces in the film making production history in Egypt**\n\n- I got only 26 Arabic movies in the dataset, But I worked with it anyway. ","f08c97cf":"### Top 10 Production Countries for Movies.\n**The highest productive country for movies is United states of America with more than 14k, then United kingdom with more than 2000**\n\n   Japan is the fifth productive country to movies in this dataset but it's in the seventh place in the number of production companies, while Spain is the tenth productive country to movies in this dataset but it's the eighth place in the number production companies.\n   \n   seems like number of production companies in each country is not a big indicator of the country movies production in some cases.","8617a430":"# What is the vote average among years (1950-2018)?","7e1fe26a":"## Correlation Between Budget and Revenue\n**There's high and strong correlation between budget and revenue**","2a0703db":"## TOP 10 countries with production companies.\n**United states of America has the highest number of production companies with more than 4000 companies, United Kingdom came in the second place with more than 1000 companies.**","316d325b":"# What is the most productive country of movies?","3885e5f4":"- Highest vote average are Comedy Movies in Planned status. (make sense to me)\n- No Action Movies in In-production and Post Production statues.\n- No Horror Movies in Planned status.\n- The highest vote average in Released status are Drama Movies, then Comedy, Action and Horror Movies comes at the end of the list.","34e5a450":"## Drama, Comedy, Action, Horror Movies Dataframe\n**Here we subset our dataframe to work with the most common movies genres**\n\n**We got 21405 rows in this new dataframe**","1bbc8ee4":"## Genres, Vote average Distributions and Status.\n**We notice that Drama, Comedy and Action are the most movies with vote_average and most if not all movies are for all Released and tiny percentage are Rumored or in Post Production phase or in production or planned**","49a73277":"\n## Dataset Question:\n- What are the most correlated features?\n- What is the most frequent language?\n- What is the most frequent status of Movies?\n- What are the features distributions?\n- Is there a correlation between revenue and budget and profit?\n- What is the trend of budget, revenue and profit?\n- What is the most productive country to movies?\n- What is the top 10 countries with production companies?\n- What is the genre of movies with the highest median vote average, and in which status?\n\n### Arabic Movies Questions:\n- What is the highest vote average in Arabic movies, What is its genre?\n- What is the highest vote count in Arabic movies, What is its genre?\n","ec6ae9f0":"\n# What is Budget, Revenue and Profit Trend among years(1950-2018)?\n","e0d7d856":"# What is the Top 10 Frequent Languages in Movies?","7bf665b5":"### Data Cleaning\n    1-Extract production_countries name (only 1st name of the countries)\n    2-Extract production_companies name (only 1st name of the companies)\n    3-Extract spoken_languages name (only 1st name of the languages as it's the most important)\n    4-Extract genres name (only 1st name of the genres as it's the best indicator of the movie genre)","94355822":"**After transformation**","aabdb5d6":"### Transfer release_date from object to Datetime","3b38fa75":"# Key insights:\n\n- Most of Movies in the Dataset are Released, We have so much less info about other movies in other phases of production.\n\n- Most common movies genres are Drama, Comedy, Action and Horror, it was surprising to me that Animation movies isn't that popular !\n\n- Comedy movies are highly voted, but in Released phase Drama movies got  the highest vote average.\n\n- US has the biggest numbers of production companies and number of movies produced.\n\n- Having a lot of production companies in one country doesn't mean it has a lot of movies being produced, as we saw with Japan and Spain.\n\n- There is a high correlation in Budget, Revenue, and profit. \"if u spend a lot u will gain a lot\"\n\n- Budget and Revenue and Profit all have an upward trend among years, seems like production companies put a lot of money in Movies industry and it is getting bigger through years\n\n### Arabic Movies insights:\n  - Surprisingly! some Arabic Movies are produced by British companies.\n  - Egypt is the most producing Arabic country for movies in this Dataset. ","9bcf27fc":"# Movies Dataset \n**You find Dataset I used in this [Link](https:\/\/www.kaggle.com\/rounakbanik\/the-movies-dataset?select=movies_metadata.csv), I used Movies meta data file**","2db271bd":"## Vote Average in (1950-2018)\n**Notice the highest vote average was around 1960 and the lowest was before 1970**\n\nin the future we may study why there was a drop in vote average before 1970 ?! ","10b249b9":"# Data Exploration and Cleaning ","aba7040e":"### Egypt ( My country YAY ) is the most productive country in this subset \n\n**Seems like Egypt and Lebanon are the most two productive countries which their movies original language is Arabic **\n\n- Wow! There were some British production companies produced Arabic Movies\n- the highest vote average among Arabic movies goes to a Lebanon movie (Comedy Movie)\n- the highest vote count among Arabic movies goes to Saudi Arabian movie (Drama)","5ff0aae5":"# What is the most productive Arabic country ? (Most frequent country)\n# What is the country of the highest vote count in Arabic countries?\n# What is the country of the highest vote Average in Arabic countries?\n","62b4943d":"### Transfering Data Types \n    1-id (object -> int)\n    2-popularity (object -> float)\n    3-budget (object -> float)","384b1c0e":"**original_language column is a bit organized and I will continue working with it**","8993885f":"# Data Visualization Part ","e42f8b01":"# What is the most frequent Movies Status (Released,Rumored,...)?","8f71bb33":"**I put comments after some graphs (findings), those graphs are in the presentation, otherwise, all findings comments are before it**","5e79a107":"**Droping duplicates in id columns**","f6bd81e6":"### Correlation between Features.\n\n  - budget and revenue =0.76\n\n  - budget and vote_count 0.67\n\n  - popularity and revenue = 0.5\n\n  - popularity and vote_count = 0.55\n\n  - revenue and vote_count =0.8\n   ","e6935d71":"# What is the top 10 countries with the highest count of production companies?","3bc97b07":"- Lowest vote count is in Rumored status except Comdey movies, Comedy Movies vote count is lower in post production status.\n- The highest movies with vote_count are Action Movies in Planned status.\n- Planned status don't have Horror Movies!\n- Action Movies have the highest vote count in Planned and In-Production and Released status among other movies genres.\n","14089391":"**Seems like spoken_languages column is a lil bit messy**","485d282c":"#  What are the most correlated features?"}}