{"cell_type":{"e4a22114":"code","b0c8a5a3":"code","63d418d0":"code","bc1de648":"code","e3fd5b5b":"code","281d545e":"code","8bebecf2":"code","710e61d1":"code","4cc38153":"code","18a253f8":"code","3dcff35e":"code","c6120866":"code","f17c4c12":"code","d5372ce4":"code","157affc0":"code","16e13d84":"code","5fd61d77":"code","e46c6d87":"code","9c066c7b":"code","69dcade6":"code","2c187203":"code","0857144f":"code","4ef89613":"code","a21fea42":"markdown","af090839":"markdown","16b2c283":"markdown","51e4901e":"markdown","ecdc33d2":"markdown","d6df2297":"markdown","a62ce941":"markdown","af33a4dc":"markdown","5ceb31a7":"markdown","3295aa12":"markdown","fc707ea4":"markdown","fbdcd0d7":"markdown","ade487d1":"markdown","f1f82b72":"markdown","d92683fe":"markdown","2093c427":"markdown","6b7e27a3":"markdown","cd7de6ad":"markdown","746bc7bc":"markdown"},"source":{"e4a22114":"import pandas as pd\ndata=pd.read_csv(\"..\/input\/FIFA 2018 Statistics.csv\")","b0c8a5a3":"import numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","63d418d0":"from pandas.plotting import scatter_matrix","bc1de648":"data.head()","e3fd5b5b":"print(list(data.columns))","281d545e":"data['Ball Possession %'].sort_values().head()","8bebecf2":"data.plot.scatter('Ball Possession %', 'Passes')","710e61d1":"data[data['Ball Possession %']>74]","4cc38153":"data.plot.scatter('Ball Possession %', 'Attempts')","18a253f8":"data2=pd.DataFrame(data[['Goal Scored','Ball Possession %','Attempts','On-Target','Off-Target',\n            'Blocked','Offsides','Free Kicks','Saves','Pass Accuracy %',\n            'Passes','Distance Covered (Kms)']])","3dcff35e":"print(list(data2.columns))","c6120866":"plt.figure(figsize=(10,10))\nfor i,col in enumerate(data2.columns):\n    plt.subplot(3,4,i+1)\n    sns.kdeplot(data2[col],legend=True)\n    ","f17c4c12":"data[data['Distance Covered (Kms)']>( data['Distance Covered (Kms)'].mean()+data['Distance Covered (Kms)'].std() ) ][['Distance Covered (Kms)','Team','Opponent']]","d5372ce4":"group_stage=pd.DataFrame(data.iloc[:96])","157affc0":"#creating a new column, then looping and deciding the winner according to goal counts\ngroup_stage['Result']=np.nan\nfor i in range(0,96,2):\n    a_goals=group_stage.iloc[i]['Goal Scored']\n    b_goals=group_stage.iloc[i+1]['Goal Scored']\n    if a_goals>b_goals:\n        group_stage.iloc[i,-1]=1\n        group_stage.iloc[i+1,-1]=-1\n    elif b_goals>a_goals:\n        group_stage.iloc[i,-1]=-1\n        group_stage.iloc[i+1,-1]=1\n    else:\n        group_stage.iloc[i,-1]=0\n        group_stage.iloc[i+1,-1]=0","16e13d84":"group_stage['Result'].value_counts()[1:].plot(kind='pie', figsize=(6,6),labels=['win','draw'])","5fd61d77":"plt.figure()\nplt.title('Ball Possession of different results')\ngroup_stage[group_stage['Result']==1]['Ball Possession %'].plot(kind='kde',legend=True,label='wins')\ngroup_stage[group_stage['Result']==-1]['Ball Possession %'].plot(kind='kde',legend=True,label='losses')\ngroup_stage[group_stage['Result']==0]['Ball Possession %'].plot(kind='kde',legend=True,label='draws')","e46c6d87":"def plot_cols(arr):\n    plt.figure(figsize=(10,10))\n    for i in range(len(arr)):\n        plt.subplot(3,3,i+1)\n        plt.title(arr[i])\n        group_stage[group_stage['Result']==1][arr[i]].plot(kind='kde',legend=True,label='wins')\n        group_stage[group_stage['Result']==-1][arr[i]].plot(kind='kde',legend=True,label='losses')\n        group_stage[group_stage['Result']==0][arr[i]].plot(kind='kde',legend=True,label='draws')","9c066c7b":"plot_cols(['Attempts','Off-Target','Offsides','Off-Target','Passes','Corners','Pass Accuracy %','Distance Covered (Kms)','Saves'])","69dcade6":"team_indexed=group_stage.set_index('Team')","2c187203":"pnts=[]\nfor x in group_stage.set_index('Team').index:\n    pnts.append(list((group_stage.set_index('Team').loc[x]['Distance Covered (Kms)'])))","0857144f":"pnts[:10]","4ef89613":"plt.figure(figsize=(8,8))\nplt.title(\"Distance Covered during 3 matches\")\nfor i in pnts:\n    plt.plot([1,2,3],i)","a21fea42":"The next line displays the matches that the Distance Covered was larger than the mean+ a standard deviation from the mean","af090839":"Something i really wanna look at is how the distance covered of each team behaves as a function of time.\nmy intuition is it should drop significantly for weaker teams, while stays constant for bigger teams.","16b2c283":"Above is the percentage of wins to draws in the group stages","51e4901e":"Now to investiage what makes a team win, so we'll need a new column in the data, we'll restrict our attention to the group stage","ecdc33d2":"that's a nice way to see the relationship of the result and different variables, let's exploit it abit.\nlet's define a function that takes column names, and lays a grid and plots them in that manner","d6df2297":"Okay, I got an idea, lets visually estimate the disribution of all the numeric features, lets put them in another dataframe","a62ce941":"There's alot of interesting alot to explore\/plot, for example the relationship between Ball Possession and Passes, Attempts, Free Kicks, relationship between date and distance covered by teams, Winning teams and man of the match choice. let's start with Ball Possession % exploration first","af33a4dc":"Things observed from the distribution of the variables:\nBall Possession is symmetric, because every value has it's complement for the opponent team.\nThere's a tiny bell curve that shows up, and i assume it's because of playing extra time, in variables like Distance Covered, Passes, On-Target, Saves.\nThe Offsides distribution is bi-modal, i assume it means there's some teams that fall in offisdes too often.","5ceb31a7":"Oh, that's very clean.. seems like there's a linear relationship between posession and passes except for 2 outliers, let's see who these outliers are","3295aa12":"Russia, England, Croatia each appears twice there","fc707ea4":"Damn that's messy(high variance), although the trend is clearly increasing","fbdcd0d7":"Each pair of successive rows are one match, Also something to notice is that there's no won or lost column, it has to be deduced from each side goal count, or PSO (Penalty Shootout) results.","ade487d1":"As expected, the Distance Covered seems to fall sharply for most teams in the 3rd match","f1f82b72":"Clearly the data has alot of attributes, let's print them","d92683fe":"## In this We're going to Perform some EDA on the FIFA Dataset, obtained from kaggle\n# link: https:\/\/www.kaggle.com\/mathan\/fifa-2018-match-statistics","2093c427":"Another thing that might make a good feature, is the difference in Distance covered.","6b7e27a3":"Okay, here's our outlier, Spain vs Russia, where Russia won in penalty shootout, apparently spain was dominating in terms of possession. enough about that match lets continue.","cd7de6ad":"Lets use a kernel density estimation plot, to see the distribution of the Ball Possession Percentage of wins and losses and draws","746bc7bc":"## To be continued for sure!"}}