{"cell_type":{"9dbd2e42":"code","78734299":"code","de74d76b":"code","02a1850e":"code","b4b710bb":"code","42ec9fb7":"code","867baef9":"code","c87e6eed":"code","8ca7d9c4":"code","d84bc1e2":"code","6dc47673":"code","a6222e7b":"code","b536717b":"code","611e1936":"code","6211f9a0":"code","6b8071df":"code","66796c0f":"code","0dd58d76":"code","10b42c9f":"code","400e514f":"markdown","7ceaf323":"markdown","0ac21694":"markdown","e582378b":"markdown","2f255543":"markdown","ca8282fd":"markdown","d2477f45":"markdown","69483dec":"markdown","96a6c3fc":"markdown","ecfc2b22":"markdown","2dbb9eed":"markdown","00614222":"markdown","d0f2d11d":"markdown","03551ff2":"markdown","bb8588fc":"markdown","588918b2":"markdown","26f8765c":"markdown","e87e22e1":"markdown","10a7627d":"markdown","ffd64d59":"markdown","10e526b8":"markdown","e38486ba":"markdown"},"source":{"9dbd2e42":"#Libraries\nimport pandas as pd\nimport numpy as np\nimport scipy.stats as st\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n#Ignoring warnings\nimport warnings\nwarnings.filterwarnings(\"ignore\")","78734299":"#Reading CSV Dataset\ndf_NBA = pd.read_csv(r'..\/input\/NBA_season1718_salary.csv')\ndf_NBA.head()\n","de74d76b":"#DF Key information\ndf_NBA.info()\n","02a1850e":"#Renaming and deleting columns\ndf_NBA.columns = ['cod', 'player', 'team', 'salary']\ndel df_NBA['cod']\ndf_NBA.head()\n","b4b710bb":"team_index = df_NBA['team'].value_counts()\nsns.catplot(data=df_NBA,\n            x='team',\n            order=team_index.index,\n            kind='count',\n            aspect=2.5,\n            palette='GnBu_d')","42ec9fb7":"#Histogram and KDE\nplt.figure(figsize=(8, 4))\nsns.distplot(df_NBA['salary'], bins=40)\n","867baef9":"#Probability Density Function (PDF) Chart\nx = df_NBA['salary']\n\nplt.figure(figsize=(8, 4))\nplt.plot(x, st.norm.pdf(x, x.mean(), x.std()))\nplt.show()\n","c87e6eed":"#Creating a column with the salary log to normalize the distribution\ndf_NBA['salary_log'] = np.log1p(df_NBA['salary'])\nsns.distplot(df_NBA['salary_log'], bins=25)\n","8ca7d9c4":"#Dividing by the mean and standard deviation to standardize the serie in a new column\ndf_NBA['norm_log_salary'] = ((df_NBA['salary_log'] - df_NBA['salary_log'].mean()) \/ df_NBA['salary_log'].std())\nsns.distplot(df_NBA['norm_log_salary'], bins=25)\n","d84bc1e2":"print(f\"\"\"Mean: {df_NBA.norm_log_salary.mean():.4f}\nStandard: {df_NBA.norm_log_salary.std():.4f}\"\"\")\n","6dc47673":"norm_mean = df_NBA.norm_log_salary.mean()\nnorm_std = df_NBA.norm_log_salary.std()\n\np_value = st.norm(norm_mean, norm_std).sf(2*norm_std) * 2 #to sides\np_value\n","a6222e7b":"z_score_inf = st.norm.interval(alpha=0.95, loc=norm_mean, scale=norm_std)[0]\nz_score_sup = st.norm.interval(alpha=0.95, loc=norm_mean, scale=norm_std)[1]\n\nprint(f'{z_score_inf:.4f} <--------> {z_score_sup:.4f}')\n","b536717b":"#Players\ndf_NBA_lower = df_NBA[df_NBA['norm_log_salary'] < z_score_inf]\ndf_NBA_lower\n","611e1936":"#Players by team\nteam_index = df_NBA_lower['team'].value_counts()\nteam_index\n","6211f9a0":"#Plot players by team\nplt.figure(figsize=(12, 5))\nsns.countplot(df_NBA_lower['team'],\n              order=team_index.index,\n              palette='Blues_r')\n","6b8071df":"print(f\"\"\"Players with a lower salary than the average: \nTotal - {df_NBA_lower.shape[0]}\nRate - {df_NBA_lower.shape[0] \/ df_NBA.shape[0] * 100:.2f}%\"\"\")\n","66796c0f":"#Players\ndf_NBA_higher = df_NBA[df_NBA['norm_log_salary'] > z_score_sup]\ndf_NBA_higher\n","0dd58d76":"print(f\"\"\"Players with a higher salary than the average: \nTotal - {df_NBA_higher.shape[0]}\nRate - {df_NBA_higher.shape[0] \/ df_NBA.shape[0] * 100:.2f}%\"\"\")\n","10b42c9f":"#p-value and alpha max to the highest salary\np_value = st.norm(norm_mean, norm_std).sf(df_NBA['norm_log_salary'].max())\nalpha = 1 - p_value\nprint(f'P-value: {p_value:.3f}\\nAlpha Max: {alpha:.3f}\\nWe can confirm that the highest salary is on the distribution!')\n","400e514f":"---","7ceaf323":"Based on that Dataset we can affirm with 95% certainty that currently there are __no__ players earning higher than the average salary. The highest salary is on the average distribution. Therefore: **Reject H0**","0ac21694":"---\n## Visualizing players by team","e582378b":"__With the Alpha limits of 0.95 we can run the inference and find out which players are earning above or below average with a 95% confidence level.__","2f255543":"## Salary Distribution","ca8282fd":"## Author:\n[__Gleisson Bispo__](https:\/\/github.com\/gleissonbispo)\n","d2477f45":"---\n### __1. Lower than the average__\n","69483dec":"## Calculating z-score","96a6c3fc":"## Mean and Standard Deviation","ecfc2b22":"---","2dbb9eed":"## Hypothesis:\nIn the 2017-2018 season did any NBA player have a **higher** or **lower** salary than the average?\n","00614222":"![](https:\/\/sportshub.cbsistatic.com\/i\/r\/2018\/09\/15\/f0e813c2-ad7f-453e-855d-097d9f4feed7\/thumbnail\/770x433\/cdf43928ded227cc4f95dd2b8d702116\/top100-cover.png)\n__<center> Let's go! <\/center>__\n\n---","d0f2d11d":"## Normalizing the salary data","03551ff2":"### __2. Higher than the average__\n","bb8588fc":"_Based on the probability density function plot is possible to identify a normal distibution, however, with a huge bilateral symmetry (right). Using a logarithm function is possible to \"correct\" it._","588918b2":"Based on that Dataset we can affirm with 95% certainty that There are currently __45 players__ earning less than the average salary. This represents a total of __7.85%__.\nTherefore: **Fail to reject H0**\n\n---","26f8765c":"## Dataset:\n__[Kaggle: NBA Player Salary Dataset (2017 - 2018)](https:\/\/www.kaggle.com\/koki25ando\/salary)__","e87e22e1":"## Hypothesis:\nIn the 2017-2018 season did any NBA player have a **higher** or **lower** salary than the average?\n","10a7627d":"# Usage of Inferential Statistics to analyse NBA salaries","ffd64d59":"## Importing Libraries and Reading Data","10e526b8":"## Analysing Results\n","e38486ba":"## P-Value to  2 std"}}