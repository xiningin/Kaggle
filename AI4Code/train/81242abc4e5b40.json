{"cell_type":{"2b7b6b2b":"code","1a0f61e7":"code","f557ba83":"code","139dd8fb":"code","da4380ff":"code","932c1570":"code","a2252847":"code","70a76d81":"code","ada001dd":"code","ce13b8e4":"code","1c0a93ce":"code","d7e16c73":"code","94b5bdbc":"code","ca5bc928":"code","bc0323f2":"code","2093b724":"code","341dc011":"code","680a48e6":"code","c9e50d7c":"code","72acd6a3":"code","b493c835":"code","93a4896a":"code","9b57c2f4":"markdown","ee228f94":"markdown","cc044035":"markdown","4b5b1f4d":"markdown","7559309e":"markdown"},"source":{"2b7b6b2b":"import os\nimport numpy as np\nimport pandas as pd\nimport random\nimport folium\nfrom folium import plugins\nimport seaborn as sns\nimport cv2\nimport matplotlib.pyplot as plt\nimport IPython\nimport time\nimport plotly.express as px","1a0f61e7":"data0=pd.read_csv('..\/input\/earthquake-in-japan\/japan_20190101-20211009_query.csv')\ndata0","f557ba83":"print(data0.columns.tolist())","139dd8fb":"data0=data0.fillna('N')\ndata1=data0[['time','latitude','longitude','depth','mag',]]\ndata1[0:5]","da4380ff":"print(data1['mag'].max())\nprint(data1['mag'].min())","932c1570":"data2=pd.DataFrame(columns=data1.columns.tolist())\nfor i,item in enumerate(data1['time']):\n    data2=pd.concat([data2,data1.loc[i:i]])\ndata2=data2.sort_values(['time']).reset_index(drop=True)        ","a2252847":"from datetime import datetime as dt\ndata2a=data2.copy()\ndate=[]\nfor item in data2['time']:\n    date+=[dt.strptime(item[0:-5],'%Y-%m-%dT%H:%M:%S')]\ndata2a['date']=date\ndata2a","70a76d81":"#!rm *","ada001dd":"#start=dt.strptime('2021-07-01T00:00:00','%Y-%m-%dT%H:%M:%S')\n#end=dt.strptime('2021-08-01T00:00:00','%Y-%m-%dT%H:%M:%S')","ce13b8e4":"data4=data2a[data2a['longitude']>130][data2a['longitude']<137][data2a['latitude']>31][data2a['latitude']<34]\ndata4=data4.reset_index(drop=True)\ndata4","1c0a93ce":"import plotly.express as px\nfig=px.scatter(x=data4['date'],y=data4['mag'])\nfig=px.scatter(data4, x=\"date\", y=\"mag\")\nfig.update_layout(title='Magnituide of earthquake in Nankai region in 2019-2021')\nfig.show()","d7e16c73":"#!rm *","94b5bdbc":"data5=data4[['latitude','longitude',]]\nfor i in range(len(data4)):\n    item=data4.loc[i:i,'time'].tolist()[0][0:-5]\n    eq_map = folium.Map(location=[34,134],tiles='Stamen Terrain',zoom_start=6.0,min_zoom=2.0)\n    eq_map.add_child(plugins.HeatMap(data5.loc[i:i]))\n    eq_map.save(\".\/\"+str(item)+\".html\")","ca5bc928":"N=list(range(len(data4)))","bc0323f2":"eq_map = folium.Map(location=[34,134],tiles='Stamen Terrain',zoom_start=6.0,min_zoom=2.0)\neq_map.add_child(plugins.HeatMap(data5.loc[N]))\neq_map","2093b724":"data4[data4['mag']>4.9]","341dc011":"paths0=[]\nimport os\nfor dirname, _, filenames in os.walk('.\/'):\n    for filename in filenames:\n        if filename[-5:]=='.html':\n            paths0+=[os.path.join(dirname, filename)]","680a48e6":"order=[]\nfor item in paths0:\n    order+=[item[:-5].split('\/')[-1]]\npaths1=pd.DataFrame(paths0)\npaths1[1]=order\npaths1.columns=['path','int']\npaths1=paths1.sort_values('int')\npaths2=paths1['path'].tolist()","c9e50d7c":"htmls=[]\nfor item in paths2:\n    htmls+=[\"<iframe width='600' height='500' src='\" +item+ \"' frameborder='0'><\/iframe>\"]","72acd6a3":"print(data4.iloc[64:65,3:6])\nIPython.display.HTML(htmls[64])","b493c835":"print(data4.iloc[66:67,3:6])\nIPython.display.HTML(htmls[66])","93a4896a":"print(data4.iloc[72:73,3:6])\nIPython.display.HTML(htmls[72])","9b57c2f4":"###  3 earthquakes (mag>4.9) occurred in Nankai area in 2021.","ee228f94":"### Datasource\n* The data was acquired through [the USGS Earthquake Catalog](https:\/\/earthquake.usgs.gov\/earthquakes\/search\/)\n* cf. [\"Notebook of The 2011 Tohoku Earthquake\"](https:\/\/www.kaggle.com\/stpeteishii\/2011-tohoku-earthquake-on-march-11)","cc044035":"## Region\n* 130 < **Longitude** < 137 \n* 31 < **Latitude** < 34","4b5b1f4d":"# **Nankai Megathrust Earthquake in Japan**\n* Nankai megathrust earthquakes are great megathrust earthquakes that occur along the Nankai megathrust \u2013 the fault under the Nankai Trough \u2013 which forms the plate interface between the subducting Philippine Sea Plate and the overriding Amurian Plate, which dips beneath southwestern Honshu, Japan. [(Wikipedia)](https:\/\/en.wikipedia.org\/wiki\/Nankai_megathrust_earthquakes)","7559309e":"<img src=\"https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/d\/d8\/RuptureAreasNankaiMegathrust.png\/1920px-RuptureAreasNankaiMegathrust.png\" width=\"100%\">"}}