{"cell_type":{"9e831778":"code","d0bfe5a3":"code","d5efc70b":"code","10b9e140":"code","740c1028":"markdown","17a00ee3":"markdown","ad85faf2":"markdown"},"source":{"9e831778":"%%time\nimport time\nfor i in range(10):\n    the_sum = sum([j*j for j in range(1000000)])\n    time.sleep(1)","d0bfe5a3":"import time\nstart_time = time.time()\nstart_cpu_time = time.clock()\nfor i in range(10):\n    the_sum = sum([j*j for j in range(1000000)])\n    time.sleep(1)\n\nprint(f'CPU time {time.clock() - start_cpu_time}')\nprint(f'Wall time {time.time() - start_time}')","d5efc70b":"%%time\nimport requests\nimport multiprocessing\nimport time\n\nsession = None\n\n\ndef set_global_session():\n    global session\n    if not session:\n        session = requests.Session()\n\n\ndef download_site(url):\n    with session.get(url) as response:\n        name = multiprocessing.current_process().name\n        print(f\"{name}: Read {len(response.content)} from {url}\")\n\n\ndef download_all_sites(sites):\n    with multiprocessing.Pool(initializer=set_global_session) as pool:\n        pool.map(download_site, sites)\n\n\nif __name__ == '__main__':\n    sites = [\"https:\/\/www.jython.org\", \"http:\/\/olympus.realpython.org\/dice\"]*80\n    start_time = time.time()\n    download_all_sites(sites)\n    duration = time.time() - start_time\n    print(f\"Downloaded {len(sites)} in {duration} seconds\")","10b9e140":"%whois","740c1028":"To demonstrate the time for CPU vs. time for I\/O we use the web downloading example (most of the Wall time is for I\/O - network connection for downloading the website).\n(Credit: This example is from RealPython)","17a00ee3":"Another way to accomplish the same thing is to use time.clock() and time.time().\ntime.time gives the Wall time and time.clock() gives the CPU busy time.","ad85faf2":"# CPU time vs. I\/O time\n*%%time* magic command helps to give CPU times (time that CPU is busy) and Wall time (total time for the script execution). So Wall time - CPU times gives the time that the system is busy elsewhere (time.sleep or time for I\/O)\nThis example we use time.sleep to simulate that the system is busy elsewhere (not for this program)."}}