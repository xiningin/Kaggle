{"cell_type":{"fa5305bb":"code","e7175fc1":"code","15b61d7c":"code","dfc09f5c":"code","4a68999f":"code","fab995b2":"code","9f9b4964":"code","59203c34":"code","2ba6ae47":"code","5d351b82":"code","d2ee4da3":"code","7deea6d5":"code","7dfe7aac":"code","fc57ddb6":"code","cf76ff8f":"code","53c1ca8d":"code","ba716995":"markdown","361609c9":"markdown","9600fe6f":"markdown","4246c582":"markdown","1f794260":"markdown","b666a7b8":"markdown","bcb12dc4":"markdown","be4e74e3":"markdown","f27cb52c":"markdown","c31bf2bc":"markdown","9bbad822":"markdown","789072b1":"markdown","e3a5d5ce":"markdown","1629b3ce":"markdown","24470780":"markdown"},"source":{"fa5305bb":"import numpy as np\nimport pandas as pd\nfrom pandas_datareader import data as wb\nimport matplotlib.pyplot as plt\nget_ipython().run_line_magic('matplotlib', 'inline')\nfrom matplotlib.pyplot import rcParams\nrcParams['figure.figsize'] = 15,6\nfrom statsmodels.tsa.seasonal import seasonal_decompose\nfrom statsmodels.tsa.stattools import acf , pacf\nfrom statsmodels.tsa.arima_model import ARIMA\nfrom statsmodels.graphics.tsaplots import plot_acf, plot_pacf","e7175fc1":"donnees = pd.read_csv('..\/input\/donnees\/donnees.csv')\ndonnees['Date'] = pd.to_datetime(donnees['Date'])\ndonnees = donnees.set_index('Date')\n\nplt.plot(donnees)","15b61d7c":"donnees.head()","dfc09f5c":"donnees.dtypes","4a68999f":"donnees = np.log(donnees)","fab995b2":"moyenne_mobile = donnees.rolling(window = 12).mean()\n\nplt.xlabel('Date')\nplt.title('Valeur')\nValeur = plt.plot(donnees, color = 'blue',label = 'Valeur des donn\u00e9es')\nmoyenne_mobile = plt.plot(moyenne_mobile ,color = 'red',label = 'Moyenne Mobile')\nplt.legend(loc = 'best')\n#plt.show(block = False ) ","9f9b4964":"decomposition = seasonal_decompose(donnees,freq=12)\ntendance = decomposition.trend\nsaisonnalite = decomposition.seasonal\nresidu = decomposition.resid\n\nplt.subplot(411)\nplt.plot(donnees , label = 'donnees')\nplt.legend(loc = 'best')\nplt.subplot(412)\nplt.plot(tendance , label = 'tendance')\nplt.legend(loc = 'best')\nplt.subplot(413)\nplt.plot(saisonnalite , label = 'saisonalit\u00e9')\nplt.legend(loc = 'best')\nplt.subplot(414)\nplt.plot(residu , label = 'residual')\nplt.legend(loc = 'best')\n\n","59203c34":"donnees_diff = donnees - donnees.shift()\ndonnees_diff.dropna(inplace = True)\ndonnees_diff.head()","2ba6ae47":"#from statsmodels.graphics.tsaplots import plot_acf, plot_pacf\nplt.subplot(211)\nplot_acf(donnees_diff,lags = 13, ax=plt.gca())\nplt.subplot(212)\nplot_pacf(donnees_diff,lags = 13, ax=plt.gca())\nplt.show()","5d351b82":"model = ARIMA(donnees , order = (2,1,2))\nresults_ARIMA = model.fit(disp = 1)\n\nplt.plot( donnees_diff )\nplt.plot( results_ARIMA.fittedvalues, color='red')\nplt.title('RSS = %.4F'% sum((results_ARIMA.fittedvalues - donnees_diff['Valeur'])**2))","d2ee4da3":"#results_ARIMA.fittedvalues.head()","7deea6d5":"prediction_ARIMA_diff = pd.Series(results_ARIMA.fittedvalues , copy = True)\n#print(prediction_ARIMA_diff.head())","7dfe7aac":"prediction_ARIMA_diff_cumsum = prediction_ARIMA_diff.cumsum()\n#print(prediction_ARIMA_diff_cumsum.head())","fc57ddb6":"predictions_ARIMA_log = pd.Series(donnees['Valeur'] , index = donnees.index )\npredictions_ARIMA_log = predictions_ARIMA_log.add(prediction_ARIMA_diff_cumsum , fill_value = 0)\n#predictions_ARIMA_log.head()","cf76ff8f":"predictions_ARIMA = np.exp(predictions_ARIMA_log)\ndonnees = np.exp(donnees)\n\nplt.xlabel('Date')\nplt.title('Donn\u00e9es et leur mod\u00e9lisation')\nValeur = plt.plot(donnees, color = 'blue',label = 'Valeur des donn\u00e9es')\nmoyenne_mobile = plt.plot(predictions_ARIMA ,color = 'red',label = 'valeur du mod\u00e9l')\nplt.legend(loc = 'best')","53c1ca8d":"results_ARIMA.plot_predict(1,donnees.size + 24) \nplt.show()","ba716995":"## Caster les valeurs en appliquant la fonction log de numpy ( juste pour la simplification )","361609c9":"## Construir un mod\u00e9le ARIMA \nMunir le mod\u00e9l parsuite par les donn\u00e9es et sp\u00e9cifier les ordres (p,d,q) et calculer la somme des carr\u00e9s\nde l'erreur ( RSS : residual sum of squares ; plus le RSS est minimal plus le mod\u00e9l est bon) de la m\u00e9thode\ndes moindres carr\u00e9s ( OLS : ordinary least squares ) et puis tracer les donn \u0301ees differenci\u00e9es en plus de leur\nmod\u00e9lisation","9600fe6f":"# Introduction \nEn \u00e9conomie et surtout en finance, en m\u00e9decine, en gestion a\u00e9roportuaire comme dans des\ndomaines aussi vari\u00e9s que la m\u00e9t\u00e9orologie, l\u2019astrophysique, un certain nombre de ph\u00e9nom\u00e8nes\nsont l\u2019objet de variations temporelles plus ou moins cycliques. L\u2019analyse des  s\u00e9ries temporelles\n correspondantes rev\u02c6et une importance consid\u00e9rable pour la compr\u00e9hension des ph\u00e9nom\u00e8nes\n\nen cause, et bien s\u00fbr l\u2019\u00e9tude des facteurs qui en d\u00e9terminent les variations. Les s\u00e9ries chronolo-\ngiques, ou s\u00e9ries temporelles, \u00e9tudient des donn\u00e9es ou des observations d\u2019\u00e9v\u00e8nements obtenues \u00e0\n\nun temps t sp\u00e9cifique, ou dans des intervalles de temps au mieux identiques (par exemple, la sur-\nveillance hebdomadaire des valeurs des stocks financiers). L\u2019une des particularit\u00e9s de ces s\u00e9ries\n\nchronologiques est que la valeur de chaque observation d\u00e9pend des valeurs qui la pr\u00e9c\u00e8dent.\nOn parle alors d\u2019auto corr\u00e9lation. L\u2019analyse des s\u00e9ries temporelles nous aide \u00e0 atteindre cet\nobjectif. Elle nous fournit un cadre statistique robuste pour \u00e9valuer le comportement des s\u00e9ries\n\nchronologiques, telles que les prix des actifs, afin de nous aider \u00e0 \u00e9changer contre ce comporte-\nment et par conc\u00e9quent \u00e9laborer une strat\u00e9gie de trading.\n\nDans ce projet notre objectif est d\u2019\u00e9tudier la th\u00e9orie des s\u00e9ries chronologiques, afin d\u2019utili-\nser leurs propri\u00e9t\u00e9s dans la construction d\u2019un mod\u00e8le math\u00e9matique qui peut servir dans la\n\npr\u00e9diction des valeurs futures d\u2019une s\u00e9rie chronologique donn\u00e9e \u00e0 l\u2019aide de outil informatique\n(Python).","4246c582":"## Importer les donn\u00e9es \u00e0 traiter et les indexer par la colonne des dates et les tracer :","1f794260":"## Tracer les fonctions d\u2019autocorr\u00e9lation simple et d\u2019autocorr\u00e9lation partielle \nAfin de d\u00e9terminer les ordes p et q des mod\u00e9les r\u00e9spectivement MA et AR ( d = 1 ; une seule diff\u00e9renciation )","b666a7b8":"## Appliquer une diff\u00e9renciation pour un seul mois et puis filtrer les donn\u00e9es NaN  :","bcb12dc4":"Les valeurs pr\u00e9dites semble suivre la tendance des donn\u00e9es et m\u00eame pr\u00e9sentent quelques courbures similaires \u00e0\nceux du \u2019pass\u00e9\u2019, ce qui prouve leur reconnaissance par le mod\u00e9le, et qui s\u2019amortient de plus qu\u2019on s\u2019\u00e9loigne de\nla d\u00e9rni\u00e8re date donn\u00e9e, avec des nuages qui s\u2019int\u00e9rpr\u00e8te la devinette du mod\u00e9le que les donn\u00e9e future seront\ninclues dans ces intervalles avec un degr\u00e9 d\u2019incertitude de 5%.","be4e74e3":"## D\u00e9composer la s\u00e9rie en ses principaux composantes ; tendance, saisonnalit\u00e9 et r\u00e9sidu\n( en sp\u00e9cifiant la fr\u00e9quence qui est dans notre cas 12 mois )  et puis les tracer :","f27cb52c":"## Eliminer la fonction log initialement appliqu\u00e9e aux donn\u00e9es \nAffecter les valeurs des donn\u00e9es, et les concatener avec ceux pr\u00e9dites, \u00e0 la variable predictions ARIMA log.  \nFaire rentrer la fonction exponnentielle pour compenser l'effet du log ( de m\u00eame pour les donn\u00e9es pr\u00e9dites par le mod\u00e9le ) et puis les tracer :","c31bf2bc":"## Importer des modules et packages n\u00e9cessaire","9bbad822":"## Finalement on visualise les pr\u00e9dictions :","789072b1":"## Caster les donn\u00e9es pr\u00e9dites en type s\u00e9ries de pandas \nLa manipulation n\u00e9cessite que les donn\u00e9es soient des objets de la class Pandas.Series afin d\u2019appliquer la m\u00e9thode\ncumsum()","e3a5d5ce":"## Tracer les valeurs des donn\u00e9es avec celles d\u2019une moyenne mobile d\u2019ordre 12 ( 12 mois )","1629b3ce":"les graphes donnent une id\u00e9e sur les ordres p et q qu\u2019on  \u0301estimera  \u0301egaux \u00e0 2 .","24470780":"Pour plus de simplification et afin de traiter le maximum de propri\u00e9t\u00e9s, j\u2019ai  \u0301essay\u00e9 de cr\u00e9er\nune s\u00e9rie temporelle de fa \u0327con \u00e0 comporter \u00e0 la fois une composante tendancielle, saisonni\u00e8re\net r\u00e9siduelle, a l\u2019aide de l\u2019outil informatique excel et puis convertir en fichier csv"}}