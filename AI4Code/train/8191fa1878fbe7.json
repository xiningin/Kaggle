{"cell_type":{"8ce23bd0":"code","22c3ada1":"code","1f9aa27a":"code","0b3bdfec":"code","bdd0743b":"code","99675186":"code","75b78aff":"code","94bf9acc":"code","4db29e46":"code","4118917b":"code","0b4b5f41":"code","7ce40ae2":"code","80340554":"code","8ae8e68d":"code","867c3a9e":"code","cf748818":"code","7bd23146":"code","4971c108":"code","16a79d9d":"code","1377effb":"code","01847268":"code","1fb2a820":"code","45020df0":"code","4210560b":"code","bb804587":"code","4970a499":"code","d3551f09":"code","9c83cd5e":"code","c2a2b156":"code","599f30b7":"code","0d570c4f":"code","13767427":"code","ad4d46f6":"code","690096b3":"code","c8fdca8c":"code","d0b0d4d7":"code","368a5262":"code","d46ed96c":"code","f94a29b3":"code","7223a281":"code","8dfc499f":"code","134f9427":"code","8a5265b7":"code","a6d5eedc":"code","e2aff096":"code","d6bf3cb8":"code","6c70f1ad":"code","27b9c645":"code","dad45120":"code","e56e3c4c":"code","0e8f307c":"code","76826a05":"code","afa2abd3":"code","282d0fe5":"code","b54455ba":"code","8d114e93":"code","dd1f3d01":"code","1a778c84":"code","c8d8341a":"code","2356f372":"code","1f7df92a":"markdown","ec8904c0":"markdown","49118f8c":"markdown","dc841026":"markdown","a89ab905":"markdown","1a5d4ca6":"markdown","c02fd6ba":"markdown","d57d3c92":"markdown","dda96d36":"markdown","1c7b6c4d":"markdown","a2aee7f7":"markdown","ac221a75":"markdown","1513591c":"markdown","8d78275d":"markdown","d5aba74d":"markdown","d75534f8":"markdown"},"source":{"8ce23bd0":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","22c3ada1":"df=pd.read_csv(\"..\/input\/sydney-house-prices\/SydneyHousePrices.csv\")","1f9aa27a":"df.head()","0b3bdfec":"df.info()","bdd0743b":"df[\"Date\"]=pd.to_datetime(df[\"Date\"])\ndf[\"Year\"]=df[\"Date\"].dt.year\ndf[\"Month\"]=df[\"Date\"].dt.month\ndf[\"Day\"]=df[\"Date\"].dt.day","99675186":"df=df.drop([\"Id\",\"Date\"],axis=1)","75b78aff":"df.head()","94bf9acc":"df.describe().T","4db29e46":"df[\"new_column\"]=df[\"sellPrice\"]\ndf.drop([\"sellPrice\"],axis=1,inplace=True)\ndf.rename(columns={\"new_column\":\"sellPrice\"},inplace=True)","4118917b":"list_name=[]\nlist_type=[]\nlist_total_value=[]\nlist_missing_value=[]\nlist_unique_value=[]\n\nfor i in df.columns:\n    list_name.append(i)\n    list_type.append(str(df[i].dtype))\n    list_total_value.append(df[i].notnull().sum())\n    list_missing_value.append(df[i].isnull().sum())\n    list_unique_value.append(len(df[i].unique()))\n\n    df_info=pd.DataFrame(data={\"Total_Value\":list_total_value,\"Missing_Value\":list_missing_value,\"Unique_Value\":list_unique_value,\"Type\":list_type},index=list_name)","0b4b5f41":"df_info","7ce40ae2":"sns.set_style(\"whitegrid\")","80340554":"plt.figure(figsize=(15,6))\ndf[\"suburb\"].value_counts()[:15].plot.barh()","8ae8e68d":"plt.figure(figsize=(15,6))\ndf[\"propType\"].value_counts().plot.barh()","867c3a9e":"data_num=df.select_dtypes([\"float64\",\"int64\"]).columns","cf748818":"fig,ax=plt.subplots(nrows=4,ncols=2,figsize=(15,15))\ncount=0\nfor i in range(4):\n    for j in range(2):\n        sns.kdeplot(df[data_num[count]],ax=ax[i][j],shade=True,color=\"#008080\")\n        count+=1","7bd23146":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"propType\"],saturation=1,palette=\"pastel\")","4971c108":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"Month\"],palette=\"Set3\")","16a79d9d":"plt.figure(figsize=(15,6))\nsns.countplot(df[\"Year\"],palette=\"hot_r\")","1377effb":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.barplot(data=df,x=\"Year\",y=\"sellPrice\",color=\"#8E44AD\",ax=ax[0])\nsns.barplot(data=df,x=\"Month\",y=\"sellPrice\",color=\"#2ECC71\",ax=ax[1])","01847268":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.pointplot(data=df,x=\"Year\",y=\"sellPrice\",color=\"#8E44AD\",ax=ax[0])\nsns.pointplot(data=df,x=\"Month\",y=\"sellPrice\",color=\"#2ECC71\",ax=ax[1])","1fb2a820":"fig,ax=plt.subplots(nrows=2,ncols=1,figsize=(15,12))\nsns.pointplot(data=df,x=\"Year\",y=\"sellPrice\",hue=\"propType\",ax=ax[0],ci=None)\nsns.pointplot(data=df,x=\"Month\",y=\"sellPrice\",hue=\"propType\",ax=ax[1],ci=None)","45020df0":"heat = pd.pivot_table(data = df,\n                    index = 'Month',\n                    values = 'sellPrice',\n                    columns = 'Year')\nheat.fillna(0, inplace = True)","4210560b":"heat","bb804587":"plt.figure(figsize=(15,10))\nplt.title('Y\u0131llara ve Aylara Ev Fiyat Ortalamalar\u0131 Is\u0131 Haritas\u0131')\nsns.heatmap(heat)","4970a499":"plt.figure(figsize=(15,10))\nsns.heatmap(df.corr(),xticklabels=df.corr().columns,yticklabels=df.corr().columns,annot=True)","d3551f09":"plt.figure(figsize=(15,12))\nsns.pairplot(df,vars=[\"bed\",\"bath\",\"car\",\"sellPrice\"])","9c83cd5e":"list_value_counts=(df.groupby(\"suburb\")[\"sellPrice\"].mean().sort_values())[::-1].astype(\"int\")","c2a2b156":"list_value_counts[:5]","599f30b7":"suburb_grup1=list(list_value_counts[:137].index)\nsuburb_grup2=list(list_value_counts[137:274].index)\nsuburb_grup3=list(list_value_counts[274:411].index)\nsuburb_grup4=list(list_value_counts[411:548].index)\nsuburb_grup5=list(list_value_counts[548:685].index)","0d570c4f":"df.replace(suburb_grup1,\"Group1\",inplace=True)\ndf.replace(suburb_grup2,\"Group2\",inplace=True)\ndf.replace(suburb_grup3,\"Group3\",inplace=True)\ndf.replace(suburb_grup4,\"Group4\",inplace=True)\ndf.replace(suburb_grup5,\"Group5\",inplace=True)","13767427":"df.head()","ad4d46f6":"dff=df.copy()","690096b3":"#propType_data=pd.get_dummies(df[\"propType\"],prefix=\"propType\")\n#suburp_data=pd.get_dummies(df[\"suburb\"],prefix=\"suburb\")\n#df.drop(\"propType\",axis=1,inplace=True)\n#df=pd.concat([df,suburp_data,propType_data],axis=1)\ndf = pd.get_dummies(df,columns= [\"suburb\",\"propType\"], prefix= [\"suburb\",\"propType\"])","c8fdca8c":"df.head()","d0b0d4d7":"data_num=list(df.select_dtypes([\"int64\",\"float64\"]).columns)\ndata_num.remove(\"Year\")\ndata_num.remove(\"Day\")\ndata_num.remove(\"Month\")","368a5262":"fig, ax =plt.subplots(nrows=5,ncols=1,figsize=(18,16))\nfor i in range(5):\n    sns.boxplot(x = df[data_num[i]],ax=ax[i])\n    count = count+1","d46ed96c":"lower_and_upper = {}\n\nfor col in data_num:\n    q1 = df[col].quantile(0.25)\n    q3 = df[col].quantile(0.75)\n    iqr = 1.5*(q3-q1)\n    \n    lower_bound = q1-iqr\n    upper_bound = q3+iqr\n    \n    lower_and_upper[col] = (lower_bound, upper_bound)\n    df.loc[(df.loc[:,col]<lower_bound),col]=lower_bound*0.75\n    df.loc[(df.loc[:,col]>upper_bound),col]=upper_bound*1.25\n    \n    \nlower_and_upper","f94a29b3":"fig, ax =plt.subplots(nrows=5,ncols=1,figsize=(18,16))\nfor i in range(5):\n    sns.boxplot(x = df[data_num[i]],ax=ax[i])\n    count = count+1","7223a281":"df.corr()[\"sellPrice\"]","8dfc499f":"import missingno as msno","134f9427":"msno.bar(df)","8a5265b7":"msno.matrix(df)","a6d5eedc":"msno.heatmap(df)","e2aff096":"from sklearn.impute import KNNImputer\nknn_imputer=KNNImputer()","d6bf3cb8":"df[\"bed\"]=knn_imputer.fit_transform(df[[\"bed\"]])\ndf[\"car\"]=knn_imputer.fit_transform(df[[\"car\"]])","6c70f1ad":"msno.bar(df)","27b9c645":"import statsmodels.api as sm\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.linear_model import LinearRegression","dad45120":"from sklearn.metrics import r2_score","e56e3c4c":"X=df.drop([\"sellPrice\",\"propType_acreage\",\"propType_warehouse\",\"Day\"],axis=1)\nY=df[\"sellPrice\"]\nX=sm.add_constant(X)","0e8f307c":"X_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","76826a05":"stats_model=sm.OLS(Y_train,X_train).fit()\nprint(stats_model.summary())","afa2abd3":"X=df.drop([\"sellPrice\",\"propType_acreage\",\"propType_warehouse\",\"Day\"],axis=1)\nY=df[\"sellPrice\"]\nX_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","282d0fe5":"sklearn_model=LinearRegression().fit(X_train,Y_train)","b54455ba":"cross_val_score(sklearn_model,X_train,Y_train,cv=10,scoring=\"r2\").mean()","8d114e93":"from sklearn.metrics import mean_squared_error","dd1f3d01":"print(\"Train RMSE : \",np.sqrt(mean_squared_error(Y_train,sklearn_model.predict(X_train))))\nprint(\"Test RMSE : \",np.sqrt(mean_squared_error(Y_test,sklearn_model.predict(X_test))))","1a778c84":"from sklearn.preprocessing import MinMaxScaler\n\nscaler = MinMaxScaler(feature_range = (0,1))\narray = list(dff.select_dtypes(include=[\"float64\",\"int64\"]))\ndff.loc[:,array] = scaler.fit_transform(dff.loc[:,array])\n\ndff=pd.get_dummies(dff,columns= [\"suburb\",\"propType\"], prefix= [\"suburb\",\"propType\"])\n\n\ndff[\"bed\"]=knn_imputer.fit_transform(dff[[\"bed\"]])\ndff[\"car\"]=knn_imputer.fit_transform(dff[[\"car\"]])","c8d8341a":"X=dff.drop([\"sellPrice\"],axis=1)\nY=dff[\"sellPrice\"]\nX_train,X_test,Y_train,Y_test=train_test_split(X,Y,test_size=0.2,random_state=42)","2356f372":"sklearn_model=LinearRegression().fit(X,Y)\nprint(\"R2 Score :\",r2_score(Y_train,sklearn_model.predict(X_train)))\nprint(\"Train RMSE : \",np.sqrt(mean_squared_error(Y_train,sklearn_model.predict(X_train))))\nprint(\"Test RMSE: \",np.sqrt(mean_squared_error(Y_test,sklearn_model.predict(X_test))));","1f7df92a":"## Data Classification","ec8904c0":"## Import Module and Data","49118f8c":"## Data Visualization","dc841026":"# Get Dummies","a89ab905":"![](https:\/\/www.realestate.com.au\/blog\/images\/1600x1600-fit,progressive\/2019\/02\/12000152\/capi_a12b3c1c15aa9d9854e9cb4d5c2adf7f_8719970e41bbd1cb34801cc3c96851a8.jpeg)","1a5d4ca6":"## Statsmodel","c02fd6ba":"# MinMaxScaler on Data","d57d3c92":"## Context\n200,000 Sydney property sales from 2000-2019 scarped from realestate.com.au","dda96d36":"# Outlier Data","1c7b6c4d":"# Missing Data Filling","a2aee7f7":"# Sydney House Prices Introduction","ac221a75":"## Data Analysis","1513591c":"## Content\n* Import Module and Data\n* Data Analysis\n* Representation of missing values, unique values, etc.\n* Data Visualization\n* Data Classification\n* Get Dummies\n* Outlier Data\n* Missing Data Filling\n* Building a Model","8d78275d":"## Representation of missing values, unique values, etc.","d5aba74d":"## Sklearnmodel","d75534f8":"# Building a Model"}}