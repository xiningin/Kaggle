{"cell_type":{"96699865":"code","de4d5407":"code","05cc862a":"code","951d5b2d":"code","70d44cc6":"code","3cfd9720":"code","16a23b2c":"code","ccf592d9":"code","6d3274d9":"code","64756c08":"code","b74608af":"code","e9a07342":"code","0c52e75b":"code","7fc91324":"code","09959197":"code","1e66b10b":"code","2eca33ca":"code","15b17777":"code","c3f959c6":"code","46bab4b0":"code","f43e8668":"code","2269fdc3":"code","1bc61dae":"code","34f8754d":"code","04a7b699":"code","7657883a":"code","16e1fa13":"code","3e4e37f4":"code","bc14e4c9":"code","ba674706":"code","b565a660":"code","c73ef386":"code","85592248":"code","e49d543d":"code","6433f936":"markdown","78606b58":"markdown","485e0f4a":"markdown","8a7ab8fe":"markdown","1593a2dd":"markdown","db2fe4b5":"markdown","ce629298":"markdown","9a426438":"markdown","172fa314":"markdown","0cf8a1f8":"markdown","a9cde115":"markdown","62fd7c04":"markdown","fcc4c4ce":"markdown","9b1e1353":"markdown","d759cee3":"markdown","d9d3dcde":"markdown","fd092266":"markdown","0a59f9e5":"markdown","2f58be1e":"markdown","8dc4b27e":"markdown","036a43f2":"markdown","5fee6e81":"markdown","2911cb2e":"markdown","229e27ae":"markdown","5dec3bb8":"markdown","f0fe2ba8":"markdown","41404938":"markdown","978e4b0c":"markdown","b6e710ab":"markdown","556a5f37":"markdown","73ab5d29":"markdown","6cc7c0cf":"markdown","d9e4ae5e":"markdown","7aac2a99":"markdown","4be8cf44":"markdown"},"source":{"96699865":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns \nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.metrics import confusion_matrix","de4d5407":"data=pd.read_csv('..\/input\/WA_Fn-UseC_-HR-Employee-Attrition.csv')","05cc862a":"data.head()","951d5b2d":"data.describe()","70d44cc6":"del data['EmployeeCount']","3cfd9720":"data.isnull().any()","16a23b2c":"data.shape","ccf592d9":"data.groupby('Attrition').size()","6d3274d9":"data['Attrition']=data['Attrition'].apply(lambda x : 1 if x=='Yes' else 0)","64756c08":"sns.boxplot(x='Attrition',y='Age',data=data)","b74608af":"sns.boxplot(x='Attrition',y='DailyRate',data=data)","e9a07342":"sns.boxplot(x='Attrition',y='YearsAtCompany',data=data)","0c52e75b":"num_cat=['Education', 'EnvironmentSatisfaction', 'JobInvolvement', 'JobSatisfaction', 'PerformanceRating', 'RelationshipSatisfaction' , 'WorkLifeBalance']\nfor i in num_cat:\n    data[i]=data[i].astype('category')","7fc91324":"data=pd.get_dummies(data)","09959197":"data.info()","1e66b10b":"data['Age'].describe()","2eca33ca":"del data['Over18_Y']","15b17777":"data.shape","c3f959c6":"X=data[data.columns.difference(['Attrition'])]\ny=data['Attrition']","46bab4b0":"X_train, X_test, y_train, y_test = train_test_split(X,y,test_size =0.2,random_state=42)","f43e8668":"numeric_variables = list(data.select_dtypes(include='int64').columns.values)","2269fdc3":"numeric_variables.remove('Attrition')","1bc61dae":"numeric_variables","34f8754d":"#First is to reset index for X_train and X_test\nX_train.reset_index(drop=True,inplace=True)\nX_test.reset_index(drop=True,inplace=True)\n#Separate into two dataframes for numeric and non-numeric variables \nX_train_num=X_train[numeric_variables]\nX_train_nnum=X_train[X_train.columns.difference(numeric_variables)]\nX_test_num=X_test[numeric_variables]\nX_test_nnum=X_test[X_train.columns.difference(numeric_variables)]\n#Set standard scaler \nscaler=StandardScaler()\n#Fit and transform training set \nX_train_scaled=scaler.fit_transform(X_train_num)\nX_train_scaled=pd.DataFrame(data=X_train_scaled,columns=X_train_num.columns)\nX_train_scaled=pd.concat([X_train_scaled,X_train_nnum],axis=1)\n#Transform training set\nX_test_scaled=scaler.transform(X_test_num)\nX_test_scaled=pd.DataFrame(data=X_test_scaled,columns=X_test_num.columns)\nX_test_scaled=pd.concat([X_test_scaled,X_test_nnum],axis=1)","04a7b699":"knn=KNeighborsClassifier()\nknn.fit(X_train_scaled,y_train)","7657883a":"knn.score(X_test_scaled,y_test)","16e1fa13":"y_predict = knn.predict(X_test_scaled)\nconfusion_matrix(y_test,y_predict)","3e4e37f4":"logis=LogisticRegression()\nlogis.fit(X_train_scaled,y_train)\nlogis.score(X_test_scaled,y_test)","bc14e4c9":"y_predict = logis.predict(X_test_scaled)\nconfusion_matrix(y_test,y_predict)","ba674706":"logis.coef_","b565a660":"print('The most positive influent coefficient is {0}, with value equal to {1}'.format(X_test_scaled.columns[np.argmax(logis.coef_)],logis.coef_.max()))","c73ef386":"print('The most negative influent coefficient is {0}, with value equal to {1}'.format(X_test_scaled.columns[np.argmin(logis.coef_)],logis.coef_.min()))","85592248":"pd.crosstab(data.JobInvolvement_1,data.Attrition)","e49d543d":"pd.crosstab(data.OverTime_No,data.Attrition)","6433f936":"First is about age (Maybe old enough to retire)","78606b58":"There are 1470 records and 35 variables","485e0f4a":"Attrition will be the label column and remaining will be feature","8a7ab8fe":"Over one third of employees choosing JobInvolvement=1 were attrited. This is a very good sign to predict employee leaving ","1593a2dd":"There is less difference for daily rate between attrited and non-attrited employees than age.\n<br>Maybe wage is not as an important factor than expected","db2fe4b5":"Second is to separate training set and test set ","ce629298":"#### 2. LogisticRegression","9a426438":"#### Check if any missing values","172fa314":"There are three text categories, BusinessTravel, Department and EducationField. Moreover, Education, EnvironmentSatisfaction, JobInvolvement, JobSatisfaction, PerformanceRating, RelationshipSatisfaction and WorkLifeBalance are also categorical data. First need to separate into dummy variables","0cf8a1f8":"There are 237 attritions in dataset ","a9cde115":"EmployeeCount can be deleted as its value always equal 1","62fd7c04":"Because attrition is not balanced, by just looking at score will cause bise on performance\n<br>Apparently KNN wrongly predicts attrition=1 as 0 frequently. Only 6 attrition records are correctly predicted. \n<br>A very bad prediction model ","fcc4c4ce":"After transformation, there are 74 variables ","9b1e1353":"#### 1. K Nearest Neighbors\n<br>K Nearest Neighbors is a simple non-parametric method for classification. The label will be determined by neighbors","d759cee3":"Then is to standardize numeric variables. Back to previous finding, attrition is also numeric variable. Therefore need to special handle","d9d3dcde":"In average, attrited employees are younger than non-attrited employees","fd092266":"No overtime can greatly reduce chance of attrition by two third. Another good policy to be enforced for reducing attrition","0a59f9e5":"#### Modelling","2f58be1e":"Apparently if your employees give you 'Low' in Job Satisfcation, this is already a signal that he or she may leave company\n<br>And definitely employees enjoy no overwork, this greatly reduce chance of attrition.","8dc4b27e":"Better than KNN as there are 17 attrited records are correctly predicted. \nAnd score is also higher than KNN","036a43f2":"#### import modules and data input ","5fee6e81":"# IBM_HR_Analytics_Employee_Attrition_Performance ","2911cb2e":"There is no missing value","229e27ae":"### The dataset is about employee attrition. This analysis can discover if any particular factors or patterns that lead to attrition. If so, employers can take certain precausion to prevent attrition which in employer of view, employee attrition is a loss to company, in both monetary and non-monetary. ","5dec3bb8":"There are many extreme cases in both attrited and non-attrited employees. Hard to determine if duration of work is related at this moment","f0fe2ba8":"#### Data exploration","41404938":"#### Data transformation","978e4b0c":"From the last result, apparently there is only one variable for over18. Can double check and if so then it can be deleted","b6e710ab":"Let's change Attrition to binary: 1 is Yes , 0 is No ","556a5f37":"Second is salary (Unsatisfactory in salary??)(DailyRate in data) ","73ab5d29":"Next is duration of work in company (Bored, no further excitment from work?)","6cc7c0cf":"First is to separate feature set and label set","d9e4ae5e":"All employees are over 18. So it can be deleted ","7aac2a99":"K Nearest Neighbors has 87% of accuracy. Let's have a look for confusion for better understanding","4be8cf44":"There are many reasons causing attrition, from personal related (eg age, family) to job related (eg salary, bored in position)\n<br> Before digging in deep, let's have a prelimary finding first"}}