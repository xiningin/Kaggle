{"cell_type":{"3b10ce75":"code","3ab127ba":"code","7f48d847":"code","dd75eafe":"code","49d597d6":"code","32c0e3ca":"code","d1606f36":"code","3ab3d039":"code","ea903d8f":"code","673efda9":"code","38f388e7":"code","1526ba1b":"code","7c1f2195":"code","cae2e4ec":"code","262d4cd3":"code","9374d55a":"code","db11a845":"code","2101f289":"code","afa289c9":"code","b885b63f":"code","20ad158b":"code","a4376128":"code","927d1237":"code","4eb10448":"code","d6d5e1d1":"code","37451a9f":"code","d14138c6":"code","0ebf3240":"code","5835e85f":"code","59c68877":"code","1ee7ac8e":"code","e5679de7":"code","c9c481f8":"code","2edae940":"code","12451530":"code","b5629964":"code","0d211091":"code","45a11aa8":"code","d36fc6a0":"code","2136d00d":"code","e93c239e":"markdown","bfac30da":"markdown","8cf79d59":"markdown","0037fba7":"markdown","11a7fc12":"markdown","9c4da69a":"markdown","2cffb42d":"markdown","3d4e855d":"markdown","2094a30e":"markdown","2a051619":"markdown","cbf5159f":"markdown","fc568cf0":"markdown","f9151296":"markdown","c1ca1782":"markdown","c4d9c6f0":"markdown","674d5b74":"markdown","3df2e22a":"markdown","9ff0c488":"markdown","8e0fa20d":"markdown","3ca664fb":"markdown","e6635f71":"markdown","4b4706af":"markdown","a1734faa":"markdown","c3a1f8f9":"markdown","ed3f67b9":"markdown","f7c7549b":"markdown","ff10bf13":"markdown","ed28290b":"markdown","035823a2":"markdown","d6849d4e":"markdown","46c05a84":"markdown","ef4c10a5":"markdown","5a7ee320":"markdown","a2f18165":"markdown","b97ebb98":"markdown","a1b01df4":"markdown","00d5446a":"markdown","6204beff":"markdown","6633b4ee":"markdown","9811ca5a":"markdown","1a40f868":"markdown","e64b278d":"markdown","3aff65c6":"markdown","7a8740f9":"markdown","dcadfa1f":"markdown"},"source":{"3b10ce75":"import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\n# PreProcessing\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.preprocessing import OneHotEncoder\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.experimental import enable_iterative_imputer\nfrom sklearn.impute import SimpleImputer, IterativeImputer\nfrom sklearn.preprocessing import MinMaxScaler\nfrom category_encoders import BinaryEncoder\n\n# Splitting Data\nfrom sklearn.model_selection import train_test_split, StratifiedKFold, cross_val_score\n\n# Modeling\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.metrics import accuracy_score, recall_score, plot_roc_curve\nfrom sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, GradientBoostingClassifier\nfrom xgboost.sklearn import XGBClassifier\n\n# Tuning\nfrom sklearn.model_selection import GridSearchCV","3ab127ba":"mh = pd.read_csv('..\/input\/mental-health-in-tech-survey\/survey.csv')\nmh","7f48d847":"mh.info()","dd75eafe":"mh.isna().sum()\/len(mh.index)*100","49d597d6":"mh.drop(columns=['Timestamp', 'Country', 'state', 'comments'], inplace = True)","32c0e3ca":"mh.rename({'self_employed' : 'Self_Employed', 'family_history' : 'Family_History', \n           'treatment' : 'Treatment', 'work_interfere' : 'Work_Interfere', \n           'no_employees': 'Employee_Numbers', 'remote_work': 'Remote_Work', 'tech_company': 'Tech_Company', \n           'benefits': 'Benefits', 'care_options': 'Care_Options', 'wellness_program': 'Wellness_Program', \n           'seek_help': 'Seek_Help', 'anonymity': 'Anonymity', 'leave': 'Medical_Leave', \n           'mental_health_consequence': 'Mental_Health_Consequence', \n           'phys_health_consequence': 'Physical_Health_Consequence', 'coworkers': 'Coworkers', \n           'supervisor': 'Supervisor', 'mental_health_interview': 'Mental_Health_Interview', \n           'phys_health_interview': 'Physical_Health_Interview', 'mental_vs_physical': 'Mental_VS_Physical', \n           'obs_consequence': 'Observed_Consequence'} , inplace = True , axis = 1)","d1606f36":"mh['Age'].unique()","3ab3d039":"mh['Age'].replace([mh['Age'][mh['Age'] < 15]], np.nan, inplace = True)\nmh['Age'].replace([mh['Age'][mh['Age'] > 100]], np.nan, inplace = True)\n\nmh['Age'].unique()","ea903d8f":"mh['Gender'].unique()","673efda9":"mh['Gender'].replace(['Male ', 'male', 'M', 'm', 'Male', 'Cis Male',\n                     'Man', 'cis male', 'Mail', 'Male-ish', 'Male (CIS)',\n                      'Cis Man', 'msle', 'Malr', 'Mal', 'maile', 'Make',], 'Male', inplace = True)\n\nmh['Gender'].replace(['Female ', 'female', 'F', 'f', 'Woman', 'Female',\n                     'femail', 'Cis Female', 'cis-female\/femme', 'Femake', 'Female (cis)',\n                     'woman',], 'Female', inplace = True)\n\nmh[\"Gender\"].replace(['Female (trans)', 'queer\/she\/they', 'non-binary',\n                     'fluid', 'queer', 'Androgyne', 'Trans-female', 'male leaning androgynous',\n                      'Agender', 'A little about you', 'Nah', 'All',\n                      'ostensibly male, unsure what that really means',\n                      'Genderqueer', 'Enby', 'p', 'Neuter', 'something kinda male?',\n                      'Guy (-ish) ^_^', 'Trans woman',], 'Queer', inplace = True)","38f388e7":"mh['Gender'].value_counts()","1526ba1b":"mh_eda = mh.copy()","7c1f2195":"sns.set_style(\"whitegrid\")\nplt.figure(figsize = (7,5))\neda_percentage = mh_eda['Treatment'].value_counts(normalize = True).rename_axis('Treatment').reset_index(name = 'Percentage')\nsns.barplot(x = 'Treatment', y = 'Percentage', data = eda_percentage.head(10))\nplt.title('Get Treatment of Survey Respondents')\nplt.show()","cae2e4ec":"plt.figure(figsize = (18,5))\nplt.subplot(1,2,1)\nsns.distplot(mh_eda['Age'], label = 'Skewness : %.2f'%(mh_eda['Age'].skew()))\nplt.legend(loc = 0, fontsize = 10)\nplt.title('Distribution for Age of Survey Respondents')\nplt.subplot(1,2,2)\nsns.boxplot(x = \"Age\", y = \"Treatment\", data = mh_eda)\nplt.title('Boxplot for Age of Survey Respondents')\nage = str(mh_eda['Age'].describe().round(2))\nplt.text(56, 0.85, age)\nplt.show()","262d4cd3":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Gender'].value_counts(normalize = True).rename_axis('Gender').reset_index(name = 'Percentage')\nsns.barplot(x = 'Gender', y = 'Percentage', data = eda_percentage.head(10))\nplt.title('Gender of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Gender'], hue = mh_eda['Treatment'])\nplt.title('Gender of Survey Respondents')\nplt.show()","9374d55a":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Family_History'].value_counts(normalize = True).rename_axis('Family_History').reset_index(name = 'Percentage')\nsns.barplot(x = 'Family_History', y = 'Percentage', data = eda_percentage)\nplt.title('Family History of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Family_History'], hue = mh_eda['Treatment'])\nplt.title('Family History of Survey Respondents')\nplt.show()","db11a845":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Work_Interfere'].value_counts(normalize = True).rename_axis('Work_Interfere').reset_index(name = 'Percentage')\nsns.barplot(x = 'Work_Interfere', y = 'Percentage', data = eda_percentage)\nplt.title('Work Interfere of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Work_Interfere'], hue = mh_eda['Treatment'])\nplt.title('Work Interfere of Survey Respondents')\nplt.show()","2101f289":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Remote_Work'].value_counts(normalize = True).rename_axis('Remote_Work').reset_index(name = 'Percentage')\nsns.barplot(x = 'Remote_Work', y = 'Percentage', data = eda_percentage)\nplt.title('Working Style of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Remote_Work'], hue = mh_eda['Treatment'])\nplt.title('Working Style of Survey Respondents')\nplt.show()","afa289c9":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Tech_Company'].value_counts(normalize = True).rename_axis('Tech_Company').reset_index(name = 'Percentage')\nsns.barplot(x = 'Tech_Company', y = 'Percentage', data = eda_percentage)\nplt.title('Company Type of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Tech_Company'], hue = mh_eda['Treatment'])\nplt.title('Company Type of Survey Respondents')\nplt.show()","b885b63f":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\nsns.countplot(mh_eda['Coworkers'], hue = mh_eda['Treatment'])\nplt.title('Coworkers of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Supervisor'], hue = mh_eda['Treatment'])\nplt.title('Supervisor of Survey Respondents')\nplt.show()","20ad158b":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Observed_Consequence'].value_counts(normalize = True).rename_axis('Observed_Consequence').reset_index(name = 'Percentage')\nsns.barplot(x = 'Observed_Consequence', y = 'Percentage', data = eda_percentage)\nplt.title('Observed Consequence Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Observed_Consequence'], hue = mh_eda['Treatment'])\nplt.title('Observed Consequence of Survey Respondents')\nplt.show()","a4376128":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Benefits'].value_counts(normalize = True).rename_axis('Benefits').reset_index(name = 'Percentage')\nsns.barplot(x = 'Benefits', y = 'Percentage', data = eda_percentage)\nplt.title('Benefits of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Benefits'], hue = mh_eda['Treatment'])\nplt.title('Benefits of Survey Respondents')\nplt.show()","927d1237":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Wellness_Program'].value_counts(normalize = True).rename_axis('Wellness_Program').reset_index(name = 'Percentage')\nsns.barplot(x = 'Wellness_Program', y = 'Percentage', data = eda_percentage)\nplt.title('Wellness Program of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Wellness_Program'], hue = mh_eda['Treatment'])\nplt.title('Wellness Program of Survey Respondents')\nplt.show()","4eb10448":"plt.figure(figsize = (20,5))\nplt.subplot(1,2,1)\neda_percentage = mh_eda['Anonymity'].value_counts(normalize = True).rename_axis('Anonymity').reset_index(name = 'Percentage')\nsns.barplot(x = 'Anonymity', y = 'Percentage', data = eda_percentage)\nplt.title('Anonymity of Survey Respondents')\nplt.subplot(1,2,2)\nsns.countplot(mh_eda['Anonymity'], hue = mh_eda['Treatment'])\nplt.title('Anonymity of Survey Respondents')\nplt.show()","d6d5e1d1":"mode_onehot_pipe = Pipeline([\n    ('encoder', SimpleImputer(strategy = 'most_frequent')),\n    ('one hot encoder', OneHotEncoder(handle_unknown = 'ignore'))])\n\ntransformer = ColumnTransformer([\n    ('one hot', OneHotEncoder(handle_unknown = 'ignore'), ['Gender', 'Family_History', 'Employee_Numbers',\n                                                           'Remote_Work', 'Tech_Company', 'Benefits', 'Care_Options',\n                                                           'Wellness_Program', 'Seek_Help', 'Anonymity',\n                                                           'Medical_Leave', 'Mental_Health_Consequence',\n                                                           'Physical_Health_Consequence', 'Coworkers', 'Supervisor',\n                                                           'Mental_Health_Interview', 'Physical_Health_Interview',\n                                                           'Mental_VS_Physical', 'Observed_Consequence']),\n    ('mode_onehot_pipe', mode_onehot_pipe, ['Self_Employed', 'Work_Interfere']),\n    ('iterative', IterativeImputer(max_iter = 10, random_state = 0), ['Age'])])","37451a9f":"mh['Treatment'].value_counts()\/mh.shape[0]*100","d14138c6":"mh['Treatment'] = np.where(mh['Treatment'] == 'Yes', 1, 0)","0ebf3240":"X = mh.drop('Treatment', axis = 1)\ny = mh['Treatment']","5835e85f":"X.shape","59c68877":"X_train, X_test, y_train, y_test = train_test_split(X,y,\n                                                   stratify = y,\n                                                    test_size = 0.3,\n                                                   random_state = 2222)","1ee7ac8e":"logreg = LogisticRegression()\ntree = DecisionTreeClassifier(random_state = 2222)\nknn = KNeighborsClassifier()\nrf = RandomForestClassifier(random_state = 2222)\nada = AdaBoostClassifier(random_state = 2222)\ngrad = GradientBoostingClassifier(random_state = 2222)\nxgboost = XGBClassifier(random_state = 2222)","e5679de7":"logreg_pipe = Pipeline([('transformer', transformer), ('logreg', logreg)])\ntree_pipe = Pipeline([('transformer', transformer), ('tree', tree)])\nknn_pipe = Pipeline([('transformer', transformer), ('knn', knn)])\nrf_pipe = Pipeline([('transformer', transformer), ('rf', rf)])\nada_pipe = Pipeline([('transformer', transformer), ('ada', ada)])\ngrad_pipe = Pipeline([('transformer', transformer), ('grad', grad)])\nxgb_pipe = Pipeline([('transformer', transformer), ('xgboost', xgboost)])\n\ndef model_evaluation(model, metric):\n    model_cv = cross_val_score(model, X_train, y_train, cv = StratifiedKFold(n_splits = 5), scoring = metric)\n    return model_cv\n\nlogreg_pipe_cv = model_evaluation(logreg_pipe, 'recall')\ntree_pipe_cv = model_evaluation(tree_pipe, 'recall')\nknn_pipe_cv = model_evaluation(knn_pipe, 'recall')\nrf_pipe_cv = model_evaluation(rf_pipe, 'recall')\nada_pipe_cv = model_evaluation(ada_pipe, 'recall')\ngrad_pipe_cv = model_evaluation(grad_pipe, 'recall')\nxgb_pipe_cv = model_evaluation(xgb_pipe, 'recall')\n\nfor model in [logreg_pipe, tree_pipe, knn_pipe, rf_pipe, ada_pipe, grad_pipe, xgb_pipe]:\n    model.fit(X_train, y_train)\n\nscore_cv = [logreg_pipe_cv.round(5), tree_pipe_cv.round(5), knn_pipe_cv.round(5),\n            rf_pipe_cv.round(5), ada_pipe_cv.round(5), grad_pipe_cv.round(5), xgb_pipe_cv.round(5)]\nscore_mean = [logreg_pipe_cv.mean(), tree_pipe_cv.mean(), knn_pipe_cv.mean(), rf_pipe_cv.mean(),\n              ada_pipe_cv.mean(), grad_pipe_cv.mean(), xgb_pipe_cv.mean()]\nscore_std = [logreg_pipe_cv.std(), tree_pipe_cv.std(), knn_pipe_cv.std(), rf_pipe_cv.std(),\n             ada_pipe_cv.std(), grad_pipe_cv.std(), xgb_pipe_cv.std()]\nscore_recall_score = [recall_score(y_test, logreg_pipe.predict(X_test)),\n            recall_score(y_test, tree_pipe.predict(X_test)), \n            recall_score(y_test, knn_pipe.predict(X_test)), \n            recall_score(y_test, rf_pipe.predict(X_test)),\n            recall_score(y_test, ada_pipe.predict(X_test)),\n            recall_score(y_test, grad_pipe.predict(X_test)),\n            recall_score(y_test, xgb_pipe.predict(X_test))]\nmethod_name = ['Logistic Regression', 'Decision Tree Classifier', 'KNN Classifier', 'Random Forest Classifier',\n               'Ada Boost Classifier', 'Gradient Boosting Classifier', 'XGB Classifier']\ncv_summary = pd.DataFrame({\n    'method': method_name,\n    'cv score': score_cv,\n    'mean score': score_mean,\n    'std score': score_std,\n    'recall score': score_recall_score\n})\ncv_summary","c9c481f8":"lr_estimator = Pipeline([\n    ('transformer', transformer),\n    ('model', logreg)])\n\nhyperparam_space = {\n    'model__C': [ 1, 0.5, 0.1, 0.05, 0.01],\n    'model__solver': ['newton-cg', 'lbfgs', 'liblinear'],\n    'model__class_weight': ['balanced', 'dict'],\n    'model__max_iter': [100, 200, 300],\n    'model__multi_class': ['auto', 'ovr', 'multinomial'],\n    'model__random_state': [2222]\n}\n\ngrid_lr = GridSearchCV(\n                lr_estimator,\n                param_grid = hyperparam_space,\n                cv = StratifiedKFold(n_splits = 5),\n                scoring = 'recall',\n                n_jobs = -1)\n\ngrid_lr.fit(X_train, y_train)\n\nprint('best score', grid_lr.best_score_)\nprint('best param', grid_lr.best_params_)","2edae940":"logreg_pipe.fit(X_train, y_train)\nrecall_logreg = (recall_score(y_test, logreg_pipe.predict(X_test)))\n\ngrid_lr.best_estimator_.fit(X_train, y_train)\nrecall_grid = (recall_score(y_test, grid_lr.predict(X_test)))\n\nscore_list = [recall_logreg, recall_grid]\nmethod_name = ['Logistic Regression Before Tuning', 'Logistic Regression After Tuning']\nbest_summary = pd.DataFrame({\n    'method': method_name,\n    'score': score_list\n})\nbest_summary","12451530":"features = list(transformer.transformers_[0][1].get_feature_names())+list(transformer.transformers_[1][1][1].get_feature_names())+['Age']\ncoef_table = pd.DataFrame({'coef': grid_lr.best_estimator_[1].coef_.flatten()}, index = features)\nabs(coef_table).plot(kind = 'barh', figsize = (18,20))","b5629964":"mh_tuning = mh.copy()\nmh_tuning.drop(columns = ['Age', 'Remote_Work', 'Wellness_Program', 'Physical_Health_Consequence'], inplace = True)\nmh_tuning.head()","0d211091":"mode_onehot_pipe_second = Pipeline([\n    ('encoder', SimpleImputer(strategy = 'most_frequent')),\n    ('one hot encoder', OneHotEncoder(handle_unknown = 'ignore'))])\n\ntransformer_second = ColumnTransformer([\n    ('one hot', OneHotEncoder(handle_unknown = 'ignore'), ['Gender', 'Family_History', 'Employee_Numbers',\n                                                           'Tech_Company', 'Benefits', 'Care_Options', \n                                                           'Seek_Help', 'Anonymity', 'Medical_Leave',\n                                                           'Mental_Health_Consequence', 'Coworkers',\n                                                           'Supervisor','Mental_Health_Interview',\n                                                           'Physical_Health_Interview', 'Mental_VS_Physical',\n                                                           'Observed_Consequence',]),\n    ('mode_onehot_pipe', mode_onehot_pipe_second, ['Self_Employed', 'Work_Interfere']),])","45a11aa8":"X_select = mh_tuning.drop('Treatment', axis = 1)\ny_select = mh_tuning['Treatment']","d36fc6a0":"X_select_train, X_select_test, y_select_train, y_select_test = train_test_split(X_select,y_select,\n                                                   stratify = y_select,\n                                                    test_size = 0.3,\n                                                   random_state = 2222)","2136d00d":"logreg_second = LogisticRegression(C = 0.5, class_weight = 'dict', max_iter = 100,\n                                   multi_class = 'auto', random_state = 2222, solver = 'newton-cg')\nlogreg_second_pipe = Pipeline([('transformer', transformer_second), ('model', logreg_second)])\nlogreg_second_pipe.fit(X_select_train, y_select_train)\nprint('After Feature Selection Process, the score is ', recall_score(y_select_test, logreg_second_pipe.predict(X_select_test)))","e93c239e":"# Re-run Using Feature Selection","bfac30da":"* This is the respondents result of question, **'If you have a mental health condition, do you feel that it interferes with your work?'**.\n* About 78% of respondents have experienced interference at work with a ratio of rarely, sometimes, and frequently.\n* Mental health conditions sometimes become an interfere while working about 45%. The plots prove that almost 80% want to get treatment. But **it's surprising to know even mental health never has interfered at work, there is a little group that still want to get treatment before it become a job stress**. It can be triggered by the requirements of the job do not match the capabilities, resources or needs of the worker.","8cf79d59":"* This is the respondents result of question, **'Is your employer primarily a tech company\/organization?'**.\n* Even the main target of the survey is the tech field, there are 18% of companies belong to the non-tech field. But it can be seen from the plot whether the company belongs to the tech field or not, mental health still becomes a big problem. I think the environment affects a lot of employees and some of them can't take it for granted like abuse at the workplace.\n* However, I found that the number of employees in the technology field that want to get treatment is slightly lower than no treatment. But the non-technical field is the opposite. **Maybe the non-tech company give more support for employee to get treatment?**","0037fba7":"*Gender*","11a7fc12":"# Modeling","9c4da69a":"- Drop Timestamp column because it's contains date, month, year and time the respondent took this questionnaire, which is irrelevant.\n- Drop Country column because it's contained with the country where respondents live and 60% of answer in domination in 1 country. This column becomes irrelevant to the prediction model.\n- Drop state column because it's only filled if the respondent lives in the US state, which means other respondents outside the US don't have any state ID and become missing values with 40% of data.\n- Drop comments column because almost 70% of data is missing. It was an optional text box so it's reasonable to expect that many (most) respondents would leave it blank.","2cffb42d":"***Missing Value***","3d4e855d":"*Age*","2094a30e":"* This is the respondents result of question, **'Would you be willing to discuss a mental health issue with your coworkers?'**.\n* From 18% of respondents who say yes to discuss it with coworkers, 60% of them want to get treatment. \n* About 60% of respondents decide to discuss some of them with coworkers. Employees who do that and want to get treatment are half of them. Let's see if the respondent will discuss it with a supervisor or not.\n* This is the respondents result of question, **'Would you be willing to discuss a mental health issue with your direct supervisor(s)?'**.\n* From 40% of respondents who say yes to discuss with supervisor, only 55% of them that want to get treatment. I think maybe talking to someone in a higher position could help the relief. It's the opposite while employees discuss with coworkers.","2a051619":"* This is the respondents result of question, **'Do you have a family history of mental illness?'**.\n* From 40% of respondents who say that they have a family history of mental illness, the plot shows that they significantly want to get treatment rather than without a family history. This is acceptable, remember the fact that people with a family history pay more attention to mental illness. Family history is a significant risk factor for many mental health disorders. The apple does not fall far from the tree, as it is relatively common for families with mental illness symptoms to have one or more relatives with histories of similar difficulties.","cbf5159f":"- The score that used as a reference for predicting is 0.7277, which is similar to the tuning score before.","fc568cf0":"* This is the respondents result of question, **'Do you work remotely (outside of an office) at least 50% of the time?'**.\n* Around 70% of respondents don't work remotely, which means the biggest factor of mental health disorder came up triggered on the workplace. On the other side, it has slightly different between an employee that want to get treatment and don't want to get a treatment. But it's getting interesting when we see a respondent who works 50% of the workday remotely. The employee who want to get treatment is a little bit higher. I have no idea why those employees work remotely to analyze more because the data doesn't provide that information. ","f9151296":"# EDA","c1ca1782":"For full version contains with dashboard for prediction, see on my github: https:\/\/github.com\/aditiani\/Machine-Learning-for-Predict-Mental-Heatlh-in-TechIndustry","c4d9c6f0":"- This is the comparison between before tuning score and after tuning score using Logistic Regression. I choose to use Logistic Regression after tuning score in this section.","674d5b74":"#### Skewness\n- Based on the plot, **the skewness score is 1.01, which means the data are highly skewed and with Positive skewness** where the mode is smaller than mean or median.\n- It's indicated that most of the employees that fill the survey around the end 20s to early 40s. I assume that they on between mid to senior-level positions. **The distribution of ages is right-skewed which is expected as the tech industry tends to have younger employees**. From an article that I read, young (usually white, mostly male) faces of start-up founders like Mark Zuckerberg and other \u201ctech bros\u201d have become the symbol and stereotypical image that tends to represent the tech industry.\n\n#### Boxplot\n- From the boxplot, there is no statistically significant difference of ages between respondents that get treatment and no treatment.","3df2e22a":"# Cross Validation","9ff0c488":"### Profile of Respondents","8e0fa20d":"***Define Model***\n\n- In supervised learning, algorithms learn from labeled data. In this case, I use Classification technique for determining which class is yes and no.\n- I use 3 basic models and 4 ensemble models to predict.\n- Basic models:\n    * Logistic Regression (logreg)\n    * Decision Tree Classifier (tree)\n    * K-Nearest Neighbor (knn)\n- Ensemble models:\n    * Random Forest Classifier (rf)\n    * Ada Boost Classifier (ada)\n    * Gradient Boosting Classifier (grad)\n    * XGB Classifier (xgboost)","3ca664fb":"### Work Environment of Respondents","e6635f71":"###  Conclusion\n\nNearly 86% of employees report improved work performance and lower rates of absenteeism after receiving treatment for depression, according to an April 2018 article in the Journal of Occupational and Environmental Medicine. This means big gains in retention and productivity for employers. By providing employees access to mental health benefits, the company can begin to create a culture of understanding and compassion at the tech company. And having employees who feel cared for and happy isn\u2019t just good, it\u2019s good business.\n\n#### Based on profiling the respondents\n* Companies must know that gender and family history greatly influence the decision to get treatment for employees. So if the company wants to provide more support, the company must make an assessment of the employee's personality because different characters can determine different needs. Age can also be a trigger, considering that most of them are young so there is a high chance that they will be open-minded to get treatment.\n\n#### Based on the work environment of respondents\n* Work interference is the most influential of employees who want to get treatment. This means the company should consider providing facilities to anticipate job stress on employees. Some of the companies decide to make a private room or silent room in case employees suddenly feel stress and need a private moment to relieve.\n\n#### Based on the mental health facilities of respondents\n* The company needs to provide a good benefit for employees so they can maintain their mental health. If the company can don't have resources for it, there are so many third parties who can be hired to maintain a wellness program for the company. Building trust like keep private about whom employee that gets treatment also can also give a trigger for employee want to get treatment.","4b4706af":"***Define Target Data***","a1734faa":"* The data looks normal. It doesn't indicate imbalanced data","c3a1f8f9":"***Feature's Value Checking***\n\n* In this section, I process the value of columns that not suitable to neatly arranged.\n* The ILO (International Labor Organization) has set a minimum age limit, 15 (fifteen) years which applies in all sectors and becomes a boundary for set the Age column.\n* For the Age column, I change the incorrect value into Nan and filled it with Iterative Imputer on ColumnTransformer. Why do I choose to fill it with Iterative Imputer? The Iterative Imputer uses an algorithm by seeing the entire dataset from the available feature column to account for the missing values. \n* For the Gender column has 49 distinct responses. I rename and combine if it's in the same meaning, so it will trim the data and separate it into following categories:\n    * Male, or cis Male, means born as male and decide to be male.\n    * Female, or cis Female, means born as female and decide to be female.\n    * Queer, is a word that describes sexual and gender identities other than straight and cisgender. Lesbian, gay, bisexual, and transgender people may all identify with the word queer.","ed3f67b9":"# Data Cleaning","f7c7549b":"### Mental Health Facilities of Respondents","ff10bf13":"***Splitting Data***","ed28290b":"* *0 = No Treatment*\n* *1 = Get Treatment*\n\n        - TN: Employee's Mental Health predict with No Treatment and the actual is No Treatment\n        - TP: Employee's Mental Health predict with Get Treatment and the actual is Get Treatment\n        - FP: Employee's Mental Health predict with Get Treatment and the actual is No Treatment\n        - FN: Employee's Mental Health predict with No Treatment and the actual is Get Treatment\n\nActions:\n* FN: There is a feeling of excessive stress and anxiety at work. It's not detected in employees do their work performance decreases due to prediction errors.\n* FP: It would be nice if the company provides mental health treatment to them so that employees can maintain mental health at the workplace. \n\n    -> In terms of mental health, the company should know what factors for employee  decide to get treatment. To anticipate error prediction, the metric that I use to determine the predicted score is the recall score (FN).","035823a2":"***Drop Columns***","d6849d4e":"* This is the respondents result of question, **'Has your employer ever discussed mental health as part of an employee wellness program?'**.\n* About 19% of the repondents say yes about become a part of employee wellness program and 60% of employee want to get treatment. After become a part of wellness program, i assume that employee feels a good vibe about it.\n* More than 65% of respondents say that there aren't any wellness programs that provide by their company. But half of the respondents want to get treatment, which means the company need to provide it soon. **Based on my curiosity about company's benefit before, I think it makes sense if it's about company budgeting. I know it will spend a lot of money, moreover, the company has a lot of employees to taking care of. My second thought, it's still about budgeting but for a small company, it's will be a lot of struggle**.","46c05a84":"***Rename Columns***","ef4c10a5":"### Target of Data","5a7ee320":"* Based on selecting features based on coefficient score, I decided to drop 4 features manually who gets a score under 0.05 for all answer choices for every feature. There are Age, x3(Remote_work), x7(Wellness_Program), x12(Physical_Health_Consequence).","a2f18165":"* This is the respondents result of question, **'Does your employer provide mental health benefits?'**.\n* Only 35% of respondents know about mental health benefits that the company provides for them.\n* For employees who know the benefits, almost 60% of the employees want to get treatment. Surprisingly, there is an employee who doesn't know and says that the company doesn't provide still want to get treatment. I assume that maybe the company can't provide it properly because of budgeting or financial struggling.","b97ebb98":"***Preprocessing Scheme***\n\n- OneHotEncoding: Gender, Family History, Employee Numbers, Tech Company, Benefits, Care Options, Seek Help, Anonymity, Medical Leave, Mental Health Consequence, Coworkers, Supervisor, Mental Health Interview, Physical Health Interview, Mental_VS_Physical, Observed_Consequence\n    * Mode: Self Employed, Work Interfere\n- Target: Treatment","a1b01df4":"* This is the respondents result of question, **'Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?'**.\n* About 30% of respondents say yes if their anonymity is protected while taking advantage of mental health or substance abuse treatment resources and almost 65% of employees want to get treatment. The employee feels that the company protected their privacy and it's a good move for the company to build trust with their employees. Because of that, the employee wants to get treatment to be better.","00d5446a":"# PreProcessing","6204beff":"- From the cross validation process, there are 2 models that pop up with high precision scores. The first is Logistic Regression for the basic model and the second is Ada Boost Classifier for the ensemble model. But I decide to continue with Logistic Regression because Ada Boost Classifier is really heavy to process.\n- Let's tune using Logistic Regression model.","6633b4ee":"***Preprocessing Scheme***\n\n- OneHotEncoding: Gender, Family History, Employee Numbers, Remote Work, Tech Company, Benefits, Care Options, Wellness Program, Seek Help, Anonymity, Medical Leave, Mental Health Consequence, Physical Health Consequence, Coworkers, Supervisor, Mental Health Interview, Physical Health Interview, Mental VS Physical, Observed Consequence\n    * Simple Imputer Most Frequent: Self Employed, Work Interfere\n- Iterative Impute: Age\n- Target: Treatment","9811ca5a":"* This is the respondents result of question, **'What is your gender identities?'**.\n* **Almost 79% of respondents are male**, not surprisingly, especially in the tech field. The very large gap between men and women causes higher competitive pressure for women than men. Based on the plot, female that want to get treatment is high around 70%. Maybe some of them get sexual harrassment or racism at work because female are scarce in the tech industry.\n* There is a Queer entry of less than 2%. Although the percentage of queer is very low, it still deserves to dig out some new insights. For example, such a small proportion can show a significant difference in the count of who wants the treatments, indicating that for the queer, mental health problems are serious too. In my opinion, maybe they received hate speech or discrimination in the workplace.","1a40f868":"* This is the respondents result of question, **'Have you get treatment for a mental health condition?'**.\n* The percentage of respondents who want to get treatment is 50%. Workplaces that promote mental health and support people with mental disorders are more likely to reduce absenteeism, increase productivity and benefit from associated economic gains. If employees enjoy good mental health, employees can:\n    * make the most of your potential,\n    * cope with what life throws at you,\n    * play a full part in your relationships, your workplace, and your community.\n* I decided to separate them into 3 aspects to see what factors that company give so employees want to get a treatment:\n    - Employee's profiling\n    - Employee's work environtment\n    - Employee's mental health facilities","e64b278d":"* I use 0.3 as default score for test_size and X.shape for random_state so the data will be devided equally.","3aff65c6":"* This is the respondents result of question, **'Have you heard of or observed negative consequences for coworkers with mental health conditions in your workplace?'**.\n* From 15% of respondents who say yes about knowing the negative consequences for coworkers with mental heatlh condition, almost 70% of them that want to get treatment. After the employee knows about the negative consequences, it becomes a good trigger for someone to get treatment to prevent mental health conditions.","7a8740f9":"# HyperParam Tuning","dcadfa1f":"# Feature Selection using Tuning Result"}}