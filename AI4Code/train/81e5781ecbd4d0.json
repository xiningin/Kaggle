{"cell_type":{"18ce4ed2":"code","da2e971b":"code","024185f7":"code","c8c0da76":"code","1599095a":"code","4e22e334":"code","1a695572":"code","dec5c760":"code","762d3494":"code","456d87a0":"code","f6cd0a03":"code","49d784c7":"code","af0e0ca3":"code","05a440e2":"code","d0f49b29":"code","aa664fa6":"code","e56fd823":"code","6e7949e4":"code","b0b98851":"code","68b35d62":"code","fdade5a1":"code","0b42d2bf":"code","8a72ec92":"code","b437bafd":"code","e71690bb":"code","776cea17":"code","6349dc46":"code","2f88d985":"code","48221a21":"markdown","e1af044b":"markdown","8f5087b5":"markdown","2cc17915":"markdown","6c71b2c9":"markdown","27c039ac":"markdown","51134337":"markdown","b2568c8c":"markdown","32b3d800":"markdown","41659412":"markdown"},"source":{"18ce4ed2":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom tqdm import tqdm\n\npd.options.display.max_colwidth = 200\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames[:2]:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","da2e971b":"!pip install librosa\n!pip install SpeechRecognition\n!pip install googletrans\n!pip install gTTs\n!pip install PyAudio\n\n!pip install googletrans==3.1.0a0\n!pip install googletrans==4.0.0-rc1","024185f7":"import librosa\nimport IPython.display as ipd\nimport speech_recognition as sr\nfrom googletrans import Translator\nfrom gtts import gTTS","c8c0da76":"ipd.Audio('\/kaggle\/input\/nlp-specialization-data\/harvard.wav')","1599095a":"ipd.Audio('\/kaggle\/input\/nlp-specialization-data\/testSpeech.wav')","4e22e334":"ipd.Audio('\/kaggle\/input\/nlp-specialization-data\/singleEnglishWord.wav')","1a695572":"r = sr.Recognizer()","dec5c760":"harvard = sr.AudioFile('\/kaggle\/input\/nlp-specialization-data\/testSpeech.wav')\nwith harvard as source:\n    audio = r.record(source)","762d3494":"type(audio)","456d87a0":"text=r.recognize_google(audio)\ntext","f6cd0a03":"with harvard as source:\n    audio = r.record(source, offset=4)\nr.recognize_google(audio)","49d784c7":"with harvard as source:\n    audio = r.record(source, duration=3)\nr.recognize_google(audio)","af0e0ca3":"with harvard as source:\n    audio = r.record(source, offset=4, duration=5)\nr.recognize_google(audio)","05a440e2":"#!pip install google_trans_new\n\n# from google_trans_new import google_translator  \n# translator = google_translator()  \n# translate_text = translator.translate(\"hello\", lang_src='en',lang_tgt='hi')  \n# print(translate_text)\n# #output: Hello china","d0f49b29":"r = sr.Recognizer()\nharvard = sr.AudioFile('\/kaggle\/input\/nlp-specialization-data\/harvard.wav')\nwith harvard as source:\n    audio = r.record(source)\ntext=r.recognize_google(audio)\ntext","aa664fa6":"text","e56fd823":"translatorInstance=Translator()\n?translatorInstance.translate","6e7949e4":"translatedText = translatorInstance.translate(text=text,dest='hi',src='en')\nprint(translatedText.text.split(' '))","b0b98851":"# mytext = translator.translate(text,dest='la').text\nlanguage = 'hi'\ntranslatedObject= gTTS(text=translatedText.text, lang=language, slow=False)\ntranslatedObject.save('translatedAudio.mp3') ","68b35d62":"import IPython.display as ipd\nipd.Audio('translatedAudio.mp3')","fdade5a1":"translatedText = translatorInstance.translate(text,dest='ur').text.split(' ') \nprint(translatedText)","0b42d2bf":"translatedText = translatorInstance.translate(text,dest='es').text.split(' ') \nprint(translatedText)","8a72ec92":"# !pip install -U pip\n# !pip install -U cython\n!apt-get install portaudio19-dev\n!pip install PyAudio","b437bafd":"def recognize_speech_from_mic(recognizer, microphone):\n    \"\"\"Transcribe speech from recorded from `microphone`.\n    Returns a dictionary with three keys:\n    \"success\": a boolean indicating whether or not the API request was\n               successful\n    \"error\":   `None` if no error occured, otherwise a string containing\n               an error message if the API could not be reached or\n               speech was unrecognizable\n    \"transcription\": `None` if speech could not be transcribed,\n               otherwise a string containing the transcribed text\n    \"\"\"\n    # check that recognizer and microphone arguments are appropriate type\n    if not isinstance(recognizer, sr.Recognizer):\n        raise TypeError(\"`recognizer` must be `Recognizer` instance\")\n\n    if not isinstance(microphone, sr.Microphone):\n        raise TypeError(\"`microphone` must be `Microphone` instance\")\n\n    # adjust the recognizer sensitivity to ambient noise and record audio\n    # from the microphone\n    with microphone as source:\n        recognizer.adjust_for_ambient_noise(source) # #  analyze the audio source for 1 second\n        audio = recognizer.listen(source)\n\n    # set up the response object\n    response = {\n        \"success\": True,\n        \"error\": None,\n        \"transcription\": None\n    }\n\n    # try recognizing the speech in the recording\n    # if a RequestError or UnknownValueError exception is caught,\n    #   update the response object accordingly\n    try:\n        response[\"transcription\"] = recognizer.recognize_google(audio)\n    except sr.RequestError:\n        # API was unreachable or unresponsive\n        response[\"success\"] = False\n        response[\"error\"] = \"API unavailable\/unresponsive\"\n    except sr.UnknownValueError:\n        # speech was unintelligible\n        response[\"error\"] = \"Unable to recognize speech\"\n\n    return response","e71690bb":"if __name__ == \"__main__\":\n    recognizer = sr.Recognizer()\n    mic = sr.Microphone(device_index=1)\n    response = recognize_speech_from_mic(recognizer, mic)\n    print('\\nSuccess : {}\\nError   : {}\\n\\nText from Speech\\n{}\\n\\n{}' \\\n          .format(response['success'],\n                  response['error'],\n                  '-'*17,\n                  response['transcription']))","776cea17":"# Import the silent audio file\nsilent_audio_file = sr.AudioFile(\"silent_audio.wav\")\n# Convert the AudioFile to AudioData\nwith silent_audio_file as source:\n    silent_audio = recognizer.record(source)\n# Recognize the AudioData with show_all turned on\nrecognizer.recognize_google(silent_audio, show_all=True)","6349dc46":"recognizer = sr.Recognizer()\n# Multiple speakers on different files\nspeakers = [sr.AudioFile(\"speaker_0.wav\"), sr.AudioFile(\"speaker_1.wav\"), sr.AudioFile(\"speaker_2.wav\")]\n# Transcribe each speaker individually\nfor i, speaker in enumerate(speakers):\n    with speaker as source:\n    speaker_audio = recognizer.record(source)\nprint(f\"Text from speaker {i}:\")\nprint(recognizer.recognize_google(speaker_audio,language=\"en-US\"))","2f88d985":"# Import audio file with background nosie\nnoisy_audio_file = sr.AudioFile(\"noisy_audio.wav\")\n# Adjust for ambient noise and record\nwith noisy_audio_file as source:\n    recognizer.adjust_for_ambient_noise(source, duration=0.5)\n    noisy_audio_file = recognizer.record(source)\n# Recognize the audio\nrecognizer.recognize_google(noisy_audio_file)","48221a21":"### 1. Speechless Audio","e1af044b":"### 3. Background Noise\nTo handle the background noise, the recognizer class has a built-in function called adjust_for_ambient_noise function, which also takes a parameter of duration. Using this function the recognizer class listens to the audio for the specified duration seconds from the beginning of the audio and then adjusts the energy threshold value so that the whole audio is more recognizable.","8f5087b5":"### 2. Multiple Speakers\nThis process of understanding the different speakers in a single audio file is known as speaker diarization. This is a really cool function to have but unfortunately, it is not available in this library. One solution to do this is to have different audio files for different speakers, go through them using for loop.","2cc17915":"### Try Yourself Now! ","6c71b2c9":"**Note:**\n\n* The __offset__ and __duration__ keyword arguments are useful for segmenting an audio file if you have prior knowledge of the structure of the speech in the file.\n\n* Offset For instance, if you do not want to transcribe the first 4 seconds of the audio, pass 4 as the value for the offset attribute. As an example, the following script skips the first 4 seconds of the audio file","27c039ac":"# <center> Speech to Text ","51134337":"## Speech Recognition Functions\n\nwe will see our recognizer in action but before we get it to work let\u2019s see some cool functions of this instance. Speech Recognition has a built-in function to make it work with many of the APIs out there:\n    \n* recognize_bing()\n* recognize_google()\n* recognize_google_cloud()\n* recognize_wit()\n\nBing Recognizer function uses Microsoft\u2019s cognitive services. <br>\n\nGoogle Recognizer function uses Google\u2019s free web search API. <br>\n\nGoogle Cloud Recognizer function uses Google\u2019s cloud speech API. <br>\n\nWit Recognizer function uses the wit.ai platform. <br>\n\nWe will use the Google Recognizer function, which is __recognize_google()__. It\u2019s free and doesn\u2019t require an API key to use. There is one drawback about this recognizer, it limits you when you want to work with longer audio files. In my experience, I didn\u2019t have any issues when working with audio files under 5 minutes. I don\u2019t recommend using this recognizer with long audio files. There are different techniques to work with longer audio files.","b2568c8c":"# <center> Speech to Speech","32b3d800":"## <center> Bonus","41659412":"## Reference Links \n\n* __The Ultimate Guide To Speech Recognition With Python -__ https:\/\/realpython.com\/python-speech-recognition\/\n\n* __Learn how to Build your own Speech-to-Text Model (using Python) -__ www.analyticsvidhya.com\/blog\/2019\/07\/learn-build-first-speech-to-text-model-python\/"}}