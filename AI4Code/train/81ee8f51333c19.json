{"cell_type":{"017b48b5":"code","16e9442d":"code","e00f1618":"code","dbc1ba25":"code","25f540ec":"code","41b161c7":"code","a8791a59":"code","6dd29303":"code","b0c7ce22":"code","600b6343":"code","8743a77a":"code","9d304cde":"markdown","839bad0a":"markdown","c99c8746":"markdown","2be8a18c":"markdown","547b5374":"markdown","53421de0":"markdown","3c71c4d6":"markdown","f9647a23":"markdown","b4cbfd4b":"markdown","8842d0b3":"markdown","008c61fe":"markdown"},"source":{"017b48b5":"!pip install openpyxl","16e9442d":"import os\nimport json\nimport pandas as pd\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objs as go\nfrom plotly.offline import iplot\nimport matplotlib.pyplot as plt\nfrom urllib.request import urlopen\n\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","e00f1618":"covid = pd.read_excel('\/kaggle\/input\/turkey-covid-19-vaccination-data\/covid19Vaccination.xlsx')\n\ncovid = covid.drop(columns = ['DATE_','SEQID', 'CITY2', 'PREVID',\n                              'DIFF_1DOSE', 'DIFF_2DOSE', 'DIFF_TOTAL'], axis = 1)\n\ncovid.columns = ['id', 'city', '1_dose', '2_dose', 'total', 'population']\ncovid['id'] = [str(i+1) for i in range(covid.shape[0])]\n\nregion_dict = {'Marmara': ['\u0130stanbul', 'Bal\u0131kesir', 'Bursa', 'Tekirda\u011f',\n                           '\u00c7anakkale', 'Yalova', 'Kocaeli', 'K\u0131rklareli',\n                           'Edirne', 'Bilecik', 'Sakarya'],\n               \n              'Aegean': ['\u0130zmir', 'Manisa', 'Ayd\u0131n', 'Denizli', 'U\u015fak',\n                         'Afyonkarahisar', 'K\u00fctahya', 'Mu\u011fla'],\n               \n              'Mediterranean': ['Antalya', 'Adana', 'Mersin', 'Hatay', 'Burdur',\n                                'Osmaniye', 'Kahramanmara\u015f', 'Isparta'],\n               \n              'Central Anatolia': ['Ankara', 'Konya', 'Kayseri', 'Eski\u015fehir',\n                                   'Sivas', 'K\u0131r\u0131kkale', 'Aksaray', 'Karaman',\n                                   'K\u0131r\u015fehir', 'Ni\u011fde', 'Nev\u015fehir', 'Yozgat',\n                                   '\u00c7ank\u0131r\u0131'],\n               \n              'Blacksea': ['Amasya', 'Artvin', 'Bart\u0131n', 'Bayburt', 'Bolu',\n                           '\u00c7orum', 'D\u00fczce', 'G\u00fcm\u00fc\u015fhane', 'Giresun', 'Karab\u00fck',\n                           'Kastamonu', 'Ordu', 'Rize', 'Samsun', 'Sinop',\n                           'Tokat', 'Trabzon', 'Zonguldak'],\n               \n              'Eastern Anatolia': ['A\u011fr\u0131', 'Ardahan', 'Bitlis', 'Bing\u00f6l', 'Elaz\u0131\u011f',\n                                   'Erzincan', 'Erzurum', 'Hakkari', 'I\u011fd\u0131r', 'Kars',\n                                   'Malatya', 'Mu\u015f', 'Tunceli', 'Van'],\n               \n              'Southeastern Anatolia': ['Gaziantep', 'Diyarbak\u0131r', '\u015eanl\u0131urfa',\n                                        'Batman', 'Ad\u0131yaman','Siirt', 'Mardin',\n                                        'Kilis', '\u015e\u0131rnak']}\n\ncovid['region'] = [k[0] for k in [[j for j in region_dict.keys() if i in region_dict[j]] for i in covid['city']]]\n\ncovid['1_dose_perc'] = (covid['1_dose'] \/ covid['population']) * 100\ncovid['2_dose_perc'] = (covid['2_dose'] \/ covid['population']) * 100\n\ncovid.head()","dbc1ba25":"def desc_stats(dataframe):\n    desc = dataframe.describe().T\n    desc_df = pd.DataFrame(index= dataframe.columns, \n                           columns= desc.columns,\n                           data= desc)\n    \n    f,ax = plt.subplots(figsize=(12,\n                                 desc_df.shape[0]*0.72))\n    sns.heatmap(desc_df,\n                annot = True,\n                cmap = 'BuGn',\n                fmt = '.2f',\n                ax = ax,\n                linecolor='#B9ECBE',\n                linewidths = 1.1,\n                cbar = False,\n                annot_kws = {\"size\": 12})\n    \n    plt.xticks(size = 16)\n    plt.yticks(size = 14,\n               rotation = 0)\n    plt.title(\"Descriptive Statistics\", size = 16)\n    plt.show()\n    \ndesc_stats(covid[['population','1_dose','2_dose','1_dose_perc','2_dose_perc']])","25f540ec":"region_1doseperc = covid.groupby('region').agg({'1_dose_perc': 'mean'}). \\\nsort_values('1_dose_perc', ascending = False)\n\nregion_2doseperc = covid.groupby('region').agg({'2_dose_perc': 'mean'}). \\\nsort_values('2_dose_perc', ascending = False)\n\nbar = go.Bar(x = region_1doseperc.index,\n             y = region_1doseperc['1_dose_perc'],\n             text = ['%' + str(i) for i in round(region_1doseperc['1_dose_perc'],2)],\n             textposition= 'auto',\n             textfont_color = 'dimgray',\n             name = '1st Dose',\n             marker = dict(color = '#6CDDAC',\n                           opacity = 0.75))\n\nbar2 = go.Bar(x = region_2doseperc.index,\n              y = region_2doseperc['2_dose_perc'],\n              text = ['%' + str(i) for i in round(region_2doseperc['2_dose_perc'],2)],\n              textposition = 'auto',\n              textfont_color = 'dimgray',\n              name = '2nd Dose',\n              marker = dict(color = '#E0EF46',\n                            opacity = 0.75))\n\nlayout = go.Layout(title={'text': 'Vaccination Rates by Region (26th of June 2021)',\n                          'y':0.9,\n                          'x':0.5,\n                          'xanchor': 'center',\n                          'yanchor': 'top'},\n                   barmode = 'group',\n                   legend=dict(x = 0.05,\n                               y = 1,\n                               bgcolor='rgba(255, 255, 255, 0)',\n                               bordercolor='rgba(255, 255, 255, 0)'),\n                   xaxis = dict(title='Region'),\n                   yaxis =dict(title='Vaccination (%)'),\n                   font=dict(family='Verdana',\n                             size=12,\n                             color='dimgray'),\n                   template = 'plotly_white')\n\nfig=go.Figure(data = [bar, bar2], layout = layout)\nfig.update_yaxes(range=[0,100])\n\niplot(fig)","41b161c7":"fig = go.Figure()\n\nfor region in covid['region'].unique():\n    dummy = covid[covid['region'] == region]\n    fig.add_trace(go.Scatter(x=dummy['1_dose_perc'],\n                             y=dummy['2_dose_perc'],\n                             mode = 'markers',\n                             text = dummy['city'],\n                             marker = dict(size = 14,\n                                           opacity = 0.75),\n                             name = region))\n    \ndropdown_buttons = []\n\nall_dd = {'label': 'All', 'method': 'update', 'args': [\n         {'visible': [True] * len(covid['region'].unique())},\n         {'title': 'All'}]}\ndropdown_buttons.append(all_dd)\n\nfor region in covid['region'].unique():\n    dummy_bool = [False] * len(covid['region'].unique())\n    dummy_bool[list(covid['region'].unique()).index(region)] = True\n    dummy = {'label': region, 'method': 'update', 'args': [\n            {'visible': dummy_bool},\n            {'title': region}]}\n    dropdown_buttons.append(dummy)\n    \nfig.update_layout({'updatemenus': [{'type': 'dropdown',\n                                    'x': 1.3,\n                                    'y': 0.5,\n                                    'showactive': True,\n                                    'active': 0,\n                                    'buttons': dropdown_buttons}]},\n                 title= dict(text = 'Vaccination Rates (26th of June 2021)',\n                              x = 0.5,\n                              y = 0.95,\n                              xanchor = 'center',\n                              yanchor = 'top'),\n                 xaxis = dict(title = '1st Dose Rate'),\n                 yaxis = dict(title = '2nd Dose Rate'),\n                 template = 'plotly_white')\n\niplot(fig)","a8791a59":"fig = go.Figure()\nfig.add_trace(go.Histogram(x= covid['1_dose_perc'],\n                           xbins = dict(start = 0,\n                                        end =100,\n                                        size =5),\n                           name = '1st Dose',\n                           marker = dict(color='#6CDDAC',\n                                         opacity  = 0.75)))\n\nfig.add_trace(go.Histogram(x= covid['2_dose_perc'],\n                           xbins = dict(start = 0,\n                                        end =100,\n                                        size =5),\n                           name = '2nd Dose',\n                           marker=dict(color='#E0EF46',\n                                       opacity = 0.8)))\n\nfig.update_layout(title= dict(text = 'Vaccination Rates Distribution',\n                              x = 0.5,\n                              y = 0.95,\n                              xanchor = 'center',\n                              yanchor = 'top'),\n                  barmode='overlay',\n                  legend=dict(x = 0.05,\n                              y = 0.95,\n                              bgcolor = 'rgba(255, 255, 255, 0)',\n                              bordercolor = 'rgba(255, 255, 255, 0)'),\n                  xaxis = dict(title='Vaccination Rate'),\n                  yaxis =dict(title='Frequency'),\n                  template = 'plotly_white')\n\niplot(fig)","6dd29303":"with urlopen('https:\/\/raw.githubusercontent.com\/cihadturhan\/tr-geojson\/master\/geo\/tr-cities-utf8.json') as response:\n    cities = json.load(response)\n    \nfig = px.choropleth_mapbox(covid,\n                           geojson = cities,\n                           locations = 'id',\n                           color = '1_dose_perc',\n                           color_continuous_scale = 'Plasma',\n                           mapbox_style = 'open-street-map',\n                           zoom = 4.5,\n                           labels = {'1_dose_perc':'Vaccination (%)'},\n                           center = {'lat': 38.9597594,\n                                     'lon': 34.9249653},\n                           range_color = [0, 100],\n                           hover_name = 'city',\n                           opacity = 0.5)\n\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0},\n                 font=dict(family='Verdana',\n                             size=12,\n                             color='dimgray'))\nfig.show()","b0c7ce22":"fig = px.choropleth_mapbox(covid,\n                           geojson = cities,\n                           locations = 'id',\n                           color = '2_dose_perc',\n                           color_continuous_scale = 'Plasma',\n                           mapbox_style = 'open-street-map',\n                           zoom = 4.5,\n                           labels = {'2_dose_perc':'Vaccination (%)'},\n                           center = {'lat': 38.9597594,\n                                     'lon': 34.9249653},\n                           range_color = [0, 100],\n                           hover_name = 'city',\n                           opacity = 0.5)\n\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0},\n                 font=dict(family='Verdana',\n                             size=12,\n                             color='dimgray'))\nfig.show()","600b6343":"fig = px.bar(covid[['city','region','1_dose_perc']]. \\\n             sort_values('1_dose_perc', ascending = False).round(2)[:10],\n             y = 'city',\n             x = '1_dose_perc',\n             text='1_dose_perc',\n             opacity = 0.8,\n             labels={'city':'',\n                     '1_dose_perc': 'Vaccination Rate',\n                     'region': ''},\n             color = 'region')\n\nfig.update_layout(title= dict(text = 'Highest Vaccination Rates (1st Dose)',\n                              x = 0.5,\n                              y = 0.95,\n                              xanchor = 'center',\n                              yanchor = 'top'),\n                  xaxis = dict(title = 'Vaccination Rate (26th of June 2021)'),\n                  yaxis = dict(categoryorder='total ascending'),\n                  legend=dict(x = 0.8,\n                              y = 1,\n                              bgcolor='rgba(255, 255, 255, 0)',\n                              bordercolor='rgba(255, 255, 255, 0)'),\n                  font=dict(family='Verdana',\n                            size=12,\n                            color='dimgray'),\n                  template='plotly_white')\nfig.update_xaxes(range=[0,100])\nfig.show()","8743a77a":"fig = px.bar(covid[['city','region','1_dose_perc']]. \\\n             sort_values('1_dose_perc').round(2)[:10],\n             y = 'city',\n             x = '1_dose_perc',\n             text='1_dose_perc',\n             opacity = 0.8,\n             labels={'city':'',\n                     '1_dose_perc': 'Vaccination Rate',\n                     'region': ''},\n             color = 'region')\n\nfig.update_layout(title= dict(text = 'Lowest Vaccination Rates (1st Dose)',\n                              x = 0.5,\n                              y = 0.95,\n                              xanchor = 'center',\n                              yanchor = 'top'),\n                  xaxis = dict(title = 'Vaccination Rate (26th of June 2021)'),\n                  yaxis = dict(categoryorder='total ascending'),\n                  legend=dict(x = 0.8,\n                              y = 1,\n                              bgcolor = 'rgba(255, 255, 255, 0)',\n                              bordercolor = 'rgba(255, 255, 255, 0)'),\n                  font=dict(family='Verdana',\n                            size=12,\n                            color='dimgray'),\n                  template='plotly_white')\n\nfig.update_xaxes(range=[0,100])\nfig.show()","9d304cde":"<a id = \"1\"><\/a><h1 id=\"Libraries and Utilities\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Libraries and Utilities<\/span><\/h1>","839bad0a":"<img src= \"https:\/\/media.giphy.com\/media\/FO8CZ01HoTCA5ahQQq\/giphy.gif\">","c99c8746":"<a id = \"6\"><\/a><h1 id=\"Vaccination Rates by City (2nd Dose)\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Vaccination Rates by City (2nd Dose)<\/span><\/h1>","2be8a18c":"<a id = \"7\"><\/a><h1 id=\"Highest Vaccination Rates (1st Dose)\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Highest Vaccination Rates (1st Dose)<\/span><\/h1>","547b5374":"<span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:28px; color:#FBFAFC; \">Turkey Covid-19 Vaccination EDA \ud83d\ude37\ud83d\udc89<\/span>\n\n\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Libraries and Utilities<\/span>](#1)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Loading and Preprocessing Data<\/span>](#2)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Descriptive Statistics<\/span>](#3)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Vaccination Rates by Region<\/span>](#4)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Vaccination Rates by City (1st Dose)<\/span>](#5)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Vaccination Rates by City (2nd Dose)<\/span>](#6)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Highest Vaccination Rates (1st Dose)<\/span>](#7)\n- [<span style=\"font-weight: bold; font-family:Verdana; font-size:16px; color:#6CDDAC; \">Lowest Vaccination Rates (1st Dose)<\/span>](#8)","53421de0":"<a id = \"5\"><\/a><h1 id=\"Vaccination Rates by City (1st Dose)\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Vaccination Rates by City (1st Dose)<\/span><\/h1>","3c71c4d6":"<span style=\"color:#6CDDAC;\n             font-size:140%;\n             font-family:Verdana;\">\nIf you liked this notebook, please upvote \ud83d\ude0a\n    \n<span style=\"color:#6CDDAC;\n             font-size:140%;\n             font-family:Verdana;\">\nIf you have any suggestions or questions, feel free to comment!\n    \n<span style=\"color:#6CDDAC;\n             font-size:140%;\n             font-family:Verdana;\">\nBest Wishes!","f9647a23":"<a id = \"2\"><\/a><h1 id=\"Load and Check Data\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Loading and Preprocessing Data<\/span><\/h1>","b4cbfd4b":"<a id = \"3\"><\/a><h1 id=\"Descriptive Statistics\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Descriptive Statistics<\/span><\/h1>","8842d0b3":"<a id = \"8\"><\/a><h1 id=\"Lowest Vaccination Rates (1st Dose)\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Lowest Vaccination Rates (1st Dose)<\/span><\/h1>","008c61fe":"<a id = \"4\"><\/a><h1 id=\"Vaccination Rates by Region\"><span class=\"label label-default\" style=\"background-color:#6CDDAC; border-radius:12px; font-weight: bold; font-family:Verdana; font-size:22px; color:#FBFAFC; \">Vaccination Rates by Region<\/span><\/h1>"}}