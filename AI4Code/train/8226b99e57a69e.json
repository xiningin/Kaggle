{"cell_type":{"cac43df6":"code","8865e192":"code","85284b5c":"code","6a7ca11c":"code","cc2de787":"code","267fe326":"code","6890364f":"code","0ddb7e6e":"code","3b48c649":"code","129daec4":"code","4634455b":"code","b449a957":"code","6d91e741":"code","274cf65a":"code","880f0ad5":"code","08da0e96":"code","10cdbc96":"code","5cbf126b":"code","305e1a53":"code","a7a2c872":"code","3b7885f7":"code","0e487bba":"code","4cc2eb89":"code","f051f729":"code","7d3cb485":"code","1ebfcd71":"code","fe5ffaac":"code","1db9dd40":"code","e69152a1":"markdown","904523da":"markdown","40920e15":"markdown","d2566150":"markdown","7f17ca08":"markdown","719891e4":"markdown","6328aa55":"markdown","785a0e8f":"markdown","b185deba":"markdown","401dda06":"markdown","df1354e7":"markdown","933803ce":"markdown","ab276aa0":"markdown","1a6a8929":"markdown","71ad8c16":"markdown","7a204e4f":"markdown","b718ef83":"markdown","b4a92b6b":"markdown","476c946d":"markdown"},"source":{"cac43df6":"# !pip install pandas\nimport pandas as pd\n\nsf_salaries = pd.read_csv('..\/input\/sf-salaries\/Salaries.csv', low_memory=False)\n","8865e192":"print('Dimension of data: ', sf_salaries.shape)\nsf_salaries.head()","85284b5c":"print('Missing values in all the columns:')\n(sf_salaries.isnull().sum()\/sf_salaries.shape[0]).sort_values(ascending=False)","6a7ca11c":"sf_salaries = sf_salaries.drop(columns=['Notes'])\nsf_salaries.columns","cc2de787":"print('Yearly frequncy of records:')\nsf_salaries['Year'].value_counts(sort=True)","267fe326":"sf_salaries.describe(include='all')","6890364f":"print('Column data types:')\nsf_salaries.dtypes","0ddb7e6e":"# running this code block with throw an error showing which label is causing the problem\n# sf_salaries[['BasePay', 'OvertimePay', 'OtherPay', 'Benefits']] = sf_salaries[['BasePay', 'OvertimePay', 'OtherPay', 'Benefits']].apply(pd.to_numeric)","3b48c649":"print(sf_salaries[sf_salaries['BasePay'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['OvertimePay'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['Benefits'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['EmployeeName'] == 'Not Provided'].shape)","129daec4":"# replacing 'Not Provided' label with blank\nsf_salaries = sf_salaries.replace(to_replace='Not Provided')","4634455b":"print(sf_salaries[sf_salaries['BasePay'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['OvertimePay'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['Benefits'] == 'Not Provided'].shape)\nprint(sf_salaries[sf_salaries['EmployeeName'] == 'Not Provided'].shape)","b449a957":"sf_salaries[['BasePay', 'OvertimePay', 'OtherPay', 'Benefits']] = sf_salaries[['BasePay', 'OvertimePay', 'OtherPay', 'Benefits']].apply(pd.to_numeric)\nsf_salaries.dtypes","6d91e741":"# also changing other column to appropriate types\nsf_salaries = sf_salaries.astype({\"Id\": 'string', \"EmployeeName\": 'string', \"JobTitle\": 'category', \"Agency\": 'category', \"Status\": 'category'})","274cf65a":"sf_salaries.dtypes","880f0ad5":"print('Looking at the numeric columns:')\nsf_salaries.describe(exclude=['category', 'string'])","08da0e96":"print('Looking at the categorical columns:')\nsf_salaries.describe(include=['category', 'string'])","10cdbc96":"category_cols = sf_salaries.select_dtypes(include='number').columns\nprint(category_cols)","5cbf126b":"for col in category_cols:\n    print('Total rows removed for negative values of {} = {}' .format(col, sf_salaries[sf_salaries[col] < 0].shape[0]))\n    sf_salaries = sf_salaries[sf_salaries[col] >= 0]","305e1a53":"# !pip install seaborn\n# !pip install matplotlib\nimport seaborn as sns\nimport matplotlib.pyplot as plt","a7a2c872":"sf_salaries.JobTitle.value_counts()","3b7885f7":"sf_salaries[\"JobTitleUpper\"] = sf_salaries.JobTitle.str.upper()\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"POLICE|SHERIFF|SERGEANT\"), \"JobCategories\"] = 'Police'\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"NURSE|PATIENT\"), \"JobCategories\"] = 'Nurse'\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"CLERK\"), 'JobCategories'] = \"Clerk\"\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"HEALTH WORKER\"), 'JobCategories'] = \"Health Worker\"\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"FIRE\"), 'JobCategories'] = \"Firefighter\"\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"SCHOOL|LIBRA\"), 'JobCategories'] = \"School Employees\"\nsf_salaries.loc[sf_salaries.JobTitleUpper.str.contains(\"ACCOUNTANT\"), 'JobCategories'] = \"Accountant\"\nsf_salaries.loc[sf_salaries.JobCategories.isnull(), \"JobCategories\"] = sf_salaries.JobTitle","0e487bba":"n = 10\nprint('{} most common job categories:'.format(n))\nsf_salaries['JobCategories'].value_counts(normalize=True, ascending=False)[:n]","4cc2eb89":"top_jobs = sf_salaries.JobCategories.value_counts(normalize=True)[:n].index.tolist()\ntop_job_data = sf_salaries[sf_salaries.JobCategories.isin(top_jobs)]","f051f729":"sns.set_theme(style=\"ticks\")\ng = sns.FacetGrid(\n    data=top_job_data, \n    col = 'JobCategories', \n    col_wrap=2,\n    aspect=1.4)\n\ng.map_dataframe(\n    sns.boxplot, \n    y = 'TotalPay', \n    x = 'Year', \n    whis=[0, 100], \n    width=.6, \n    palette=\"vlag\")\n\n# Tweak the visual presentation\nplt.yscale('log')\nsns.despine(trim=True, left=False, bottom=True)\ng.figure.subplots_adjust(wspace=0, hspace=.2, top=.94)\ng.figure.suptitle('Total Pay Change YoY', fontsize=18)","7d3cb485":"sns.set_theme(style=\"ticks\")\n\ng = sns.FacetGrid(\n    data=top_job_data, \n    col = 'JobCategories',  \n    hue = 'Year',\n    col_wrap=2,\n    aspect=1.4)\n\ng.map_dataframe(\n    sns.kdeplot, \n    x = 'TotalPay', \n    fill = True,\n    palette=\"vlag\")\n\n# Tweak the visual presentation\ng.add_legend()\nplt.xscale('log')\nsns.despine(trim=True, left=False, bottom=True)\ng.figure.subplots_adjust(wspace=0, hspace=.2, top=.94)\ng.fig.suptitle('Total Pay Change YoY', fontsize=18)","1ebfcd71":"sns.set_theme(style=\"ticks\")\n\nsns.catplot(\n    data=top_job_data,\n    y='JobCategories',\n    x='BasePay',\n    col='Year',\n    kind='violin',\n#     col_wrap= 1,\n    height=8,\n    aspect=.6,\n    width=1.5 # width of each violine bar\n)\n\nplt.xscale('log')\nsns.despine(trim=True, left=True, bottom=False)\nplt.subplots_adjust(wspace = 0.15, top=0.9)\nplt.suptitle('Base Pay Distribution in Different Jobs', fontsize = 18)","fe5ffaac":"sns.set_theme(style='ticks')\n\nplot=sns.catplot(\n    data=top_job_data,\n    x='OvertimePay',\n    y='JobCategories',\n    col='Year',\n    kind='box',\n#     col_wrap=1,\n    height=7,\n    aspect=.6,\n    width=.6\n)\nplt.xscale('log')\nplot.despine(offset=4, left=True)\nplot.figure.subplots_adjust(top=0.9)\nplot.figure.suptitle('Overtime Pay Distribution in Different Jobs', fontsize = 18)\nplot.set(xlabel = 'log(Over Time Pay)', ylabel='Job Categories')","1db9dd40":"sns.set_theme(style='ticks')\n\nplot=sns.catplot(\n    data=top_job_data,\n    x='Benefits',\n    y='JobCategories',\n    col='Year',\n    kind='box',\n#     col_wrap=1,\n    height=8,\n    aspect=.6,\n    width=.6\n)\nplt.xscale('log')\nplot.despine(left=True, bottom=False)\nplot.figure.subplots_adjust(wspace=.2, top=.9)\nplot.figure.suptitle('Benefits Distribution in Different Jobs', fontsize=18)\nplot.set(xlabel='log(Benefits Pay)')\n","e69152a1":"<div class=\"alert alert-info\">\n    Column <b>Notes<\/b> - Remove this column since it doesn't have any value. \n<\/div>","904523da":"## Data Inspection\n\n[Back to ToC](#Table-of-Content)","40920e15":"# Exploring SF Salary Data\n\nCreated On: 01\/15\/2022 | Last Worked on: 01\/24\/2022\n\nData Source: [Kaggle - SF Salaries](https:\/\/www.kaggle.com\/kaggle\/sf-salaries)","d2566150":"#### Overtime Variation Across Job Groups\n\n[Back to ToC](#Table-of-Content)","7f17ca08":"#### Findings from Intra Job Comparison\n\n[Back to ToC](#Table-of-Content)\n\nFindings for this section:\n* None of the job categories seem to have had a noticable change over the three years.\n* Only Publice Service Aide-Public Works workers seem to have a slightly higher earners in 2014 compared to previous two years. ","719891e4":"### Intra Job Salary Trend\n\n[Back to ToC](#Table-of-Content)\n\nPossible questions to be explored are:\n\n* What are the job categories that employ most people?\n* How have the average TotalPay changed over the years for the most common jobs?","6328aa55":"Starting off with the already stated exploratory ideas in the Kaggle site:\n\n* How have salaries changed over time between different groups of people?\n* How are base pay, overtime pay, and benefits allocated between different groups?","785a0e8f":"### Inter Job Salary Trend\n\n[Back to ToC](#Table-of-Content)\n\nPossible questions to explore: \n\n* How is base pay allocated across different job groups?\n* How is overtime pay allocated across different job groups?\n* How is benefits allocated across different job groups?","b185deba":"<div class=\"alert alert-warning\">\n    Panda's describe() not showing all stats for the numeric columns because data types of the columns are not properly read.\n<\/div>","401dda06":"## Exploratory Data Analysis\n\n[Back to ToC](#Table-of-Content)","df1354e7":"<img src=\"https:\/\/media.istockphoto.com\/photos\/golden-gate-bridge-picture-id1137980721?b=1&k=20&m=1137980721&s=170667a&w=0&h=sPQVZB3aelxiyjYwh-U48jQgiKgNBblrwMo966i4kV0=\" width=950 height=50 \/>","933803ce":"## Table of Content\n\n* [Data Inspection](#Data-Inspection)\n* [Exploratory Data Analysis](#Exploratory-Data-Analysis)\n    + [Intra Job Salary Trend](#Intra-Job-Salary-Trend)\n        + [Most Common Jobs](#Most-Common-Jobs)\n        + [Salary Change Over the Years](#Salary-Change-Over-the-Years)\n        + [Findings](#Findings-from-Intra-Job-Comparison)\n    + [Inter Job Salary Trend](#Inter-Job-Salary-Trend)\n        + [Base Pay Variation Across Job Groups](#Base-Pay-Variation-Across-Job-Groups)\n        + [Overtime Variation Across Job Groups](#Overtime-Variation-Across-Job-Groups)\n        + [Benefits Variation Across Job Groups](#Benefits-Pay-Variation-Across-Job-Groups)\n        + [Findings](#Findings-from-Inter-Job-Salary-Trend)\n","ab276aa0":"#### Base Pay Variation Across Job Groups\n\n[Back to ToC](#Table-of-Content)","1a6a8929":"<div class=\"alert alert-warning\">\n    There are multiple jobs in the same category. For example, there are two different types of nurses in the top five most frequent job titles.\n    \n* Group possible similar jobs under common groups.\n<\/div>","71ad8c16":"<div class = \"alert alert-info\">\n    Drop all records with negative pay.\n<\/div>","7a204e4f":"#### Most Common Jobs\n\n[Back to ToC](#Table-of-Content)","b718ef83":"#### Benefits Pay Variation Across Job Groups\n\n[Back to ToC](#Table-of-Content)","b4a92b6b":"#### Findings from Inter Job Salary Trend\n\n[Back to ToC](#Table-of-Content)\n\nFindings for this section:\n* Among the 10 most common jobs, Police and Firefighters have, on an average, the highest base pay, overtime and benefit payments. \n* Publice Service Trainee, Public Service Aide, and Recreation Leader jobs have the lowerst pay across all these payment verticals.\n* Even though Transit Operators are not the best earner in terms of base pay they earn a quite high overtime which is at per with the Firefighters.\n* Nurses also earn higher overtime payment but the intra job overtime variation is larger than what it is in the top categories i.e. police, firefighters and transit operators.\n* There are higher benefits payment erners in Nurse, School Employees, Transit Operators, Clerks and Custodians along with Police and Firefighters. But their intra job pay variation is larger than these top two earning professionals.","476c946d":"#### Salary Change Over the Years\n\n[Back to ToC](#Table-of-Content)"}}