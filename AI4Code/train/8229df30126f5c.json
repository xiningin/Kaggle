{"cell_type":{"9c1fe1af":"code","1d6fdcf0":"code","6e62f57b":"code","ff231f80":"code","0cb0762a":"code","a4f9fe58":"code","1dc50297":"code","5ee07def":"code","b4084da4":"code","8bee28bb":"code","518e70cb":"code","6ede4ce5":"code","452022f5":"code","679d9c87":"code","c1cc8a67":"code","694ddfb8":"code","30eebdf9":"code","1da9fa5e":"code","0d65d611":"code","eb41fc40":"code","6512c8a2":"code","4aedd791":"code","44312e83":"code","e877ee21":"code","26840663":"code","50fb6cad":"code","1284f9eb":"code","2cb25f03":"code","173cbbc1":"code","2af6e548":"code","2bbf08cb":"code","8b61cddb":"code","01bb5403":"code","de582da5":"code","e3a47bcd":"code","f791ad04":"code","219ca9a8":"code","c731cdeb":"code","bdfe9da4":"code","c78f75d6":"code","822c91e5":"code","a9f123bf":"markdown","95b21502":"markdown","373628f5":"markdown","15cd714a":"markdown","5c9660f4":"markdown","69cf2c24":"markdown","5d51d20a":"markdown","0abe02f8":"markdown","c0a67ade":"markdown","153c4495":"markdown","9dbc4a6c":"markdown","ba736e66":"markdown"},"source":{"9c1fe1af":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import r2_score\nfrom sklearn.metrics import mean_squared_error\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))        \n        \n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1d6fdcf0":"train = pd.read_csv(\"..\/input\/house-prices-advanced-regression-techniques\/train.csv\")\ntest = pd.read_csv(\"..\/input\/house-prices-advanced-regression-techniques\/test.csv\")","6e62f57b":"train.head()","ff231f80":"print('Shape of the taining set') \nprint(train.shape)","0cb0762a":"print('Information about the training set\\n') \ntrain.info()","a4f9fe58":"train.describe()","1dc50297":"# Let's take the statistical summary of \"Object\" data\n\ntrain.describe(include=['O'])","5ee07def":"sns.distplot(train.SalePrice)\n\ntrain.plot(kind = 'scatter',x=\"Id\", y=\"SalePrice\", color = 'r',label = 'Price',\n           linewidth=1,alpha = 0.5,grid = True,linestyle = ':')","b4084da4":"train_inlier = train[train.SalePrice < 400000]\ntrain_inlier.shape","8bee28bb":"train_saleprice= train.SalePrice\ntrain_inlier = train_inlier.drop(labels=[\"SalePrice\", \"Id\"], axis=1)\n\ntest_id = test.Id\ntest = test.drop(labels=[\"Id\"], axis=1)","518e70cb":"df = pd.concat([train_inlier, test])","6ede4ce5":"df.isnull().sum().sort_values(ascending=False).head(15)","452022f5":"df.drop(labels = [\"PoolQC\", \"MiscFeature\", \"Alley\", \"Fence\", \"FireplaceQu\",\n                     \"LotFrontage\"], axis = 1, inplace = True)","679d9c87":"#evin 2. kat\u0131n m2'sini g\u00f6steriyor ama 2. kat\u0131 olmayan evler 0 olarak yaz\u0131lm\u0131\u015f.\n#0 olan de\u011ferlere bak\u0131l\u0131p fazla ise bu kolon silinebilir.\n\nprint(df[\"2ndFlrSF\"].value_counts()) #1658 de\u011fer 0 \u00e7\u0131kt\u0131. Bu yar\u0131s\u0131ndan fazlas\u0131 demektir.","c1cc8a67":"df.drop(\"2ndFlrSF\", axis=1, inplace = True)","694ddfb8":"df.drop(labels = [\"WoodDeckSF\", \"OpenPorchSF\",\"EnclosedPorch\",\"3SsnPorch\",\"PoolArea\",\n                  \"MasVnrArea\",\"BsmtFinSF1\",\"BsmtFinSF2\",\"LowQualFinSF\",\n                  \"ScreenPorch\", \"MiscVal\"], axis = 1, inplace = True)\n\ndf.shape","30eebdf9":"missingValue = SimpleImputer(missing_values = np.nan, strategy = 'most_frequent')\nmissingValue = missingValue.fit(df.iloc[:, 0:61])\ndf.iloc[:, 0:61] = missingValue.transform(df.iloc[:, 0:61])","1da9fa5e":"missingValue = SimpleImputer(missing_values = 0, strategy = 'mean')\nmissingValue = missingValue.fit(df.iloc[:,31:33])\ndf.iloc[:, 31:33] = missingValue.transform(df.iloc[:, 31:33])","0d65d611":"missingValue = SimpleImputer(missing_values = 0, strategy = 'mean')\nmissingValue = missingValue.fit(df.iloc[:,53:54])\ndf.iloc[:, 53:54] = missingValue.transform(df.iloc[:, 53:54])","eb41fc40":"df.isna().sum().sum()","6512c8a2":"df.loc[:,[\"MSSubClass\",\"OverallQual\",\"OverallCond\",\"YearBuilt\",\"YearRemodAdd\",\"BsmtFullBath\",\n             \"BsmtHalfBath\", \"FullBath\", \"HalfBath\", \"BedroomAbvGr\", \"KitchenAbvGr\", \"TotRmsAbvGrd\",\n             \"Fireplaces\", \"GarageCars\", \"GarageYrBlt\", \"MoSold\",\n             \"YrSold\"]] = df.loc[:,[\"MSSubClass\", \"OverallQual\", \"OverallCond\", \"YearBuilt\",\n                                       \"YearRemodAdd\", \"BsmtFullBath\", \"BsmtHalfBath\", \"FullBath\",\n                                       \"HalfBath\", \"BedroomAbvGr\", \"KitchenAbvGr\", \"TotRmsAbvGrd\",\n                                       \"Fireplaces\", \"GarageCars\", \"GarageYrBlt\", \"MoSold\",\n                                       \"YrSold\"]].astype(\"object\")","4aedd791":"df_obj = df.describe(include=[\"O\"])\ndf_obj = df_obj.columns\ndf = pd.get_dummies(df, columns = df_obj, drop_first = True)\n\ndf.shape","44312e83":"train_dumm = df[:1432]\ntest_dumm = df[1432:]","e877ee21":"train_dumm[\"SalePrice\"] = train_saleprice","26840663":"cor = train_dumm.corr().abs()[\"SalePrice\"]\ncor[cor>0.5]","50fb6cad":"train_corr = train_dumm.loc[:,[\"TotalBsmtSF\", \"1stFlrSF\", \"GrLivArea\", \"GarageArea\", \"ExterQual_Gd\",\n                               \"ExterQual_TA\", \"Foundation_PConc\", \"BsmtQual_TA\", \"FullBath_1\",\n                               \"FullBath_2\", \"KitchenQual_TA\", \"GarageFinish_Unf\", \"GarageCars_3.0\",\"SalePrice\"]]\n\nX_test = test_dumm.loc[:,[\"TotalBsmtSF\", \"1stFlrSF\", \"GrLivArea\", \"GarageArea\", \"ExterQual_Gd\",\n                               \"ExterQual_TA\", \"Foundation_PConc\", \"BsmtQual_TA\", \"FullBath_1\",\n                               \"FullBath_2\", \"KitchenQual_TA\", \"GarageFinish_Unf\", \"GarageCars_3.0\"]]","1284f9eb":"X = train_corr.drop(\"SalePrice\", axis=1).values\ny = train_corr.loc[:, \"SalePrice\"].values","2cb25f03":"makine = LinearRegression()\nmakine.fit(X, y)","173cbbc1":"y_pred = makine.predict(X)","2af6e548":"print(\"Root mean square error train = \" + str(np.sqrt(mean_squared_error(y, y_pred))))\nprint(\"R2 score = \" + str(r2_score(y, y_pred)))","2bbf08cb":"y_test = makine.predict(X_test)\n","8b61cddb":"import statsmodels.api as sm","01bb5403":"# Modele sabit terim (b0) i\u00e7in birlerden olu\u015fan bir s\u00fctun ekleyelim\n\nX_bs = np.append(arr = X, values=np.ones((1432, 1)).astype(int), axis=1)\n\nX_bs\nX_bs.shape","de582da5":"X_gds = X_bs[:, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]]\n\nanlamlilik_duzeyi = 0.05","e3a47bcd":"regresyon_gds = sm.OLS(endog=y, exog=X_gds).fit()\nregresyon_gds.summary()","f791ad04":"X_gds = X_bs[:, [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13]]\n\nregresyon_gds = sm.OLS(endog=y, exog=X_gds).fit()\nregresyon_gds.summary()","219ca9a8":"X_gds = X_bs[:, [0, 1, 2, 3, 5, 6, 7, 9, 10, 11, 12, 13]]\n\nregresyon_gds = sm.OLS(endog=y, exog=X_gds).fit()\nregresyon_gds.summary()","c731cdeb":"X_gds = X_bs[:, [0, 1, 2, 3, 5, 6, 7, 10, 11, 12, 13]]\nregresyon_gds = sm.OLS(endog=y, exog=X_gds).fit()\nregresyon_gds.summary()","bdfe9da4":"X_gds = X_bs[:, [0, 1, 2, 5, 6, 7, 10, 11, 12, 13]]\nregresyon_gds = sm.OLS(endog=y, exog=X_gds).fit()\nregresyon_gds.summary()","c78f75d6":"Xr = train_dumm.loc[:,[\"TotalBsmtSF\", \"1stFlrSF\", \"GrLivArea\",\"ExterQual_TA\", \"Foundation_PConc\",\n                       \"BsmtQual_TA\", \"KitchenQual_TA\", \"GarageFinish_Unf\",\n                       \"GarageCars_3.0\"]].values\n\nyr = train_corr.loc[:, \"SalePrice\"].values\n\nXr_test = X_test.loc[:,[\"TotalBsmtSF\", \"1stFlrSF\", \"GrLivArea\",\"ExterQual_TA\", \"Foundation_PConc\",\n                       \"BsmtQual_TA\", \"KitchenQual_TA\", \"GarageFinish_Unf\", \"GarageCars_3.0\"]]\nmakine2 = LinearRegression(normalize=True)\n\nmakine2.fit(Xr, yr)\n\nyr_pred = makine2.predict(Xr)\n\nprint(\"Root mean square error train = \" + str(np.sqrt(mean_squared_error(yr, yr_pred))))\nprint(\"R2 score = \" + str(r2_score(yr, yr_pred)))","822c91e5":"yr_test = makine2.predict(Xr_test)\nsubmission = pd.DataFrame({\"Id\": test_id})\n\nsubmission[\"SalePrice\"] = yr_test\nsubmission.to_csv(\"submission.csv\", index=False)","a9f123bf":"# **Encode Process**","95b21502":"**Bakmam\u0131z gereken ilk nokta:** Prob (F-statistic): 0.00 sonucudur. Bu de\u011fer anlaml\u0131l\u0131k d\u00fczeyimizden k\u00fc\u00e7\u00fck olup olmamas\u0131 modelin a\u00e7\u0131klay\u0131c\u0131l\u0131\u011f\u0131 hakk\u0131nda bilgi veriyor. K\u00fc\u00e7\u00fck olmad\u0131\u011f\u0131nda modelin geli\u015ftirilmesi gerekti\u011fi, de\u011fi\u015fkenler hakk\u0131nda daha fazla bilgi edinip de\u011fi\u015fikliklere gidebilece\u011fimiz sonucuna varabiliriz. K\u00fc\u00e7\u00fck oldu\u011fu durumda anlaml\u0131 bir model olu\u015fturmu\u015fuz demektir.\n\nki bizim sonucumuz **0.00 (Prob) < 0.05 (anlaml\u0131l\u0131k d\u00fczeyi)**\n\n**\u0130kinci olarak yapmam\u0131z gereken** R-squared: 0.739 olarak belirlenmi\u015f. Burada Scikit-Learn'den farkl\u0131 \u00e7\u0131kma sebeplerinden biri b\u00fct\u00fcn veriyi modele dahil etmemiz. Scikit-Learn'de train ve test diye ikiye ay\u0131rm\u0131\u015ft\u0131k.\n\nBurada yapmam\u0131z gereken P>|t| kolonunda 0.05 anlaml\u0131l\u0131k d\u00fczeyine g\u00f6re en b\u00fcy\u00fck de\u011fer tespit edilip listeden \u00e7\u0131kart\u0131l\u0131r. Ve tekrar bir regresyon modeli olu\u015fturulur.\n\nBurada en b\u00fcy\u00fck de\u011fer x9 de\u011feri. Yani X_bs[:, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13] burada 8 de\u011feri \u00e7\u0131kart\u0131lmal\u0131 (0'dan ba\u015flad\u0131\u011f\u0131n\u0131 g\u00f6zden ka\u00e7\u0131rmayal\u0131m)...","373628f5":"\u0130lk ba\u015fta 0.7392 olan regresyon sonucumuz 0.7380 oldu...","15cd714a":"# **Data Loading**","5c9660f4":"sonu\u00e7 olarak $R^2$ 0.738 olarak bulundu\n\nSalePrice i\u00e7in en a\u00e7\u0131klay\u0131c\u0131 de\u011fi\u015fkenler :\nTotalBsmtSF\n1stFlrSF\nGrLivArea\nExterQual_TA\nFoundation_PConc\nBsmtQual_TA\nKitchenQual_TA\nGarageFinish_Unf\nGarageCars_3.0","69cf2c24":"Loading the datasets (train.csv) ","5d51d20a":"# Regression","0abe02f8":"3. de\u011fi\u015fkenin modelden \u00e7\u0131kart\u0131lmas\u0131 F-Statistics'de ve R-squared de\u011ferlerinde de\u011fi\u015fiklik olu\u015fturmad\u0131.\n\nAnlaml\u0131l\u0131k d\u00fczeyinden y\u00fcksek de\u011fi\u015fkenleri \u00e7\u0131kartmaya devam edelim...","c0a67ade":"# A\u00e7\u0131klay\u0131c\u0131l\u0131\u011f\u0131 D\u00fc\u015f\u00fck De\u011fi\u015fkenlerin \u00c7\u0131kar\u0131lmas\u0131\n\u00c7oklu regresyon modellerinde, modele dahil edilen b\u00fct\u00fcn de\u011fi\u015fkenlerin ba\u011f\u0131ml\u0131 de\u011fi\u015fkendeki varyans\u0131 a\u00e7\u0131klad\u0131\u011f\u0131 ve birbirlerinden ba\u011f\u0131ms\u0131z oldu\u011fu varsay\u0131m\u0131 kullan\u0131l\u0131r. Ancak, ba\u011f\u0131ms\u0131z de\u011ferler aras\u0131nda bir ili\u015fki s\u00f6z konusuysa, ilgili ba\u011f\u0131ms\u0131z de\u011fi\u015fkenin modelden \u00e7\u0131kar\u0131lmas\u0131 modelin g\u00fcc\u00fcn\u00fc artt\u0131racakt\u0131r.\n\nBa\u011f\u0131ms\u0131z de\u011fi\u015fkenler aras\u0131 ili\u015fkinin bulunup, modelin g\u00fcc\u00fcn\u00fc olumsuz y\u00f6nde etkileyen de\u011fi\u015fkenlerin bulunmas\u0131 s\u00fcrecine \u00d6znitelik Se\u00e7imi ad\u0131 verilir. Bu y\u00f6ntemlerden baz\u0131lar\u0131 a\u015fa\u011f\u0131da g\u00f6r\u00fclmektedir.\n\n**Geriye Do\u011fru Eliminasyon**\n**\u0130leri Do\u011fru Se\u00e7im**\n**Genetik Algoritma**\n\n## **Geriye Do\u011fru Eliminasyon**\nBu y\u00f6ntemde ilk a\u015famada t\u00fcm de\u011fi\u015fkenler modele kat\u0131l\u0131r. Sonra her biri teker teker \u00e7\u0131kart\u0131larak modelin g\u00fcc\u00fcne veya anlaml\u0131l\u0131\u011f\u0131na bak\u0131l\u0131r. E\u011fer model g\u00fcc\u00fcnde \u00f6nemli bir art\u0131\u015f veya anlaml\u0131l\u0131\u011f\u0131nda \u00f6nemli bir farkl\u0131l\u0131k bulunmazsa, ilgili de\u011fi\u015fken modelden \u00e7\u0131kar\u0131l\u0131p yeniden model kurulur. Bu i\u015flem, model g\u00fcc\u00fcnde art\u0131\u015f olmayana veya de\u011fi\u015fken kalmayana kadar devam ettirilir.\n\n## **\u0130leri Do\u011fru Se\u00e7im**\nBu y\u00f6ntemde ilk a\u015famada modelde hi\u00e7 bir de\u011fi\u015fken yer almaz. Sonra t\u00fcm de\u011fi\u015fkenler teker teker modele dahil edilip, modelin ba\u015far\u0131m\u0131 \u00f6l\u00e7\u00fcl\u00fcr. Model ba\u015far\u0131m\u0131n\u0131 en b\u00fcy\u00fck yapan de\u011fi\u015fken modele dahil edilir ve i\u015flem tekrarlan\u0131r. Bu i\u015flem, model g\u00fcc\u00fcnde art\u0131\u015f olmayana veya de\u011fi\u015fken kalmayana kadar devam ettirilir.\n\n## **Genetik Algoritma**\nBu y\u00f6ntemde, ilk a\u015famada rastgele olarak de\u011fi\u015fkenler se\u00e7ilip model olu\u015fturulur. Sonras\u0131nda, se\u00e7ilen de\u011fi\u015fkenler \u00e7e\u015fitli olas\u0131l\u0131klar ile modele eklenip \u00e7\u0131kar\u0131larak, model g\u00fcc\u00fcn\u00fcn artt\u0131r\u0131lmas\u0131 hedeflenir.","153c4495":"\u015eimdi istatistiksel bir yakla\u015f\u0131mla Scikit-learn'\u00fcn d\u0131\u015f\u0131na \u00e7\u0131k\u0131caz. SalePrice ile ilgili en ili\u015fkili de\u011fi\u015fkenlerin en a\u00e7\u0131klay\u0131c\u0131 olanlar\u0131n\u0131 belirlemeye \u00e7al\u0131\u015fal\u0131m. Bakal\u0131m r2_score daha fazla y\u00fckselecek mi...","9dbc4a6c":"R_2 de\u011ferimiz ayn\u0131. De\u011fi\u015fkenler i\u00e7inde anlaml\u0131l\u0131\u011f\u0131 y\u00fcksek olan bir ba\u015fka de\u011fi\u015fkenimiz daha yok.\n\nEliminasyon yapt\u0131\u011f\u0131m\u0131zda normalde de\u011fi\u015fkenlerin anlaml\u0131\u011f\u0131n\u0131n de\u011fi\u015fmesi beklenirdi ama bizim de\u011fi\u015fkenlerimizde herhangi bir de\u011fi\u015fim g\u00f6r\u00fclmedi. Bu da de\u011fi\u015fkenlerin birbirlerini etkilemdi\u011fini g\u00f6steriyor.","ba736e66":"## Geriye Do\u011fru Eliminasyon"}}