{"cell_type":{"c4d48297":"code","7acb9172":"code","ba721d93":"code","3acc3fe8":"code","34e1027e":"code","5cc95419":"code","810872f2":"code","c604b944":"code","1444a7ca":"code","869783d6":"code","50298762":"code","c7acd6d0":"code","7acb5d37":"code","554098db":"code","7a521271":"code","9f4d7015":"code","98cbbc36":"code","9a84f25a":"code","43f61ada":"code","68a7a560":"code","c6b922ee":"code","772904b4":"code","79825125":"code","40c9361c":"code","a9938185":"code","99015a97":"code","97c93474":"code","99e20940":"code","1fe006f8":"code","b45358f4":"code","aa90d970":"code","19905411":"markdown","2cb10a14":"markdown","653ae62d":"markdown","606d9381":"markdown","5933675b":"markdown","4af28c60":"markdown","78164547":"markdown","2ec17ff8":"markdown","8ad5c74a":"markdown","c485e9b3":"markdown","1a1833b1":"markdown","cfc6b84a":"markdown","7f8a3c86":"markdown","86b8ce78":"markdown","068fb16b":"markdown","90648bb1":"markdown","2cc87cfc":"markdown","544d5fac":"markdown","bba0f615":"markdown","65da3d0b":"markdown","c331ab80":"markdown","142a1f12":"markdown","90c6cc82":"markdown","fe396c1e":"markdown","04fff0ba":"markdown","33d2554b":"markdown","c7b04df7":"markdown","5e224053":"markdown","a9905064":"markdown","8e547461":"markdown","3d8c250c":"markdown","1acd1148":"markdown","acaa3c4e":"markdown","132c65df":"markdown"},"source":{"c4d48297":"#Author Anna Durbanova\n#Theme: Life Expectancy\n#Date 16.08.2020\n\nimport pandas as pd\nimport os\nimport glob\nimport numpy as np\nimport holoviews as hv\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom datetime import datetime\nhv.extension('bokeh')\n%matplotlib inline","7acb9172":"!pip install hvplot\n","ba721d93":"import hvplot\nfrom hvplot import hvPlot\nimport hvplot.pandas","3acc3fe8":"!pip install pingouin\n","34e1027e":"import pingouin as pg\nimport difflib as dfl\nfrom functools import partial\n","5cc95419":"for dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \ndata=pd.read_csv('\/kaggle\/input\/life-expectancy-who\/Life Expectancy Data.csv')\n\ndata.info()","810872f2":"data[\"Income composition of resources\"].replace(0.0, np.nan, inplace=True)\ndata[\"Schooling\"].replace(0.0, np.nan, inplace=True)\ndata.sort_values([\"Country\", \"Year\"], inplace=True)\ndata","c604b944":"data_2015=(data[data.Year==2015]\n    .groupby(\"Country\")\n    [\"Country\", \"Life expectancy \"]\n    .median()\n    .sort_values(by=\"Life expectancy \", ascending=False))\n\ndata_2015.reset_index().hvplot.bar(x=\"Country\", y=\"Life expectancy \", rot=90,width=2000, height=550, title = \"Life Expectancy for ALL Countries for 2015\")","1444a7ca":"mask = data.Year==2015\nplt.rcParams[\"figure.figsize\"]=(20,20)\nsns.heatmap(data[mask].corr(), cmap=\"BuPu\", annot=True).set_title(\"Correlation Table for all columns, 2015\");","869783d6":"pg.corr(data[\"Life expectancy \"], data[\"Income composition of resources\"])","50298762":"plt.rcParams[\"figure.figsize\"]=(12,8)\nsns.regplot(x=\"Income composition of resources\", y=\"Life expectancy \", data=data).set_title(\"The Effect of Income Composition of Resources on Life expectancy for all data\");","c7acd6d0":"plt.rcParams[\"figure.figsize\"]=(12,8)\ng = sns.FacetGrid(data=data, col=\"Year\", col_wrap=3, height=15)\ng.map_dataframe(sns.regplot, x=\"Income composition of resources\", y=\"Life expectancy \");","7acb5d37":"pg.corr(data[\"Life expectancy \"], data[\"Schooling\"])","554098db":"sns.regplot(x=\"Schooling\", y=\"Life expectancy \", data=data).set_title(\"Schooling has an effect on Life Expectancy, 2000-2015\");","7a521271":"sns.FacetGrid(data=data,col=\"Year\",col_wrap=4, height=20)\ng.map_dataframe(sns.regplot,x=\"Schooling\", y=\"Life expectancy \");","9f4d7015":"pg.corr(data[\"under-five deaths \"], data[\"infant deaths\"])","98cbbc36":"sns.regplot(data=data, x=\"infant deaths\", y=\"under-five deaths \").set_title(\"Correlation between Infant Deaths and Under-Five-Deaths, all years\");","9a84f25a":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2010], x=\"Hepatitis B\", y=\"Life expectancy \", ax=ax1).set_title(\"Hepatitis B has an effect on Life Expectancy, 2010\");\nsns.regplot(data=data[data.Year == 2015], x=\"Hepatitis B\", y=\"Life expectancy \", ax=ax2).set_title(\"Hepatitis B has an effect on Life Expectancy, 2015\");","43f61ada":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2000], x=\"Polio\", y=\"Life expectancy \", ax=ax1).set_title(\"Polio has an effect on Life Expectancy, 2000\");\nsns.regplot(data=data[data.Year == 2015], x=\"Polio\", y=\"Life expectancy \", ax=ax2).set_title(\"Polio has an effect on Life Expectancy, 2015\");","68a7a560":"sns.regplot(data=data, x=\"Diphtheria \", y= \"Life expectancy \").set_title(\"Diphtheria has an effect on Life Expectancy, all years\");","c6b922ee":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2000], x=\"Diphtheria \", y=\"Life expectancy \", ax=ax1).set_title(\"Diphtheria has an effect on Life Expectancy, 2000\");\nsns.regplot(data=data[data.Year == 2015], x=\"Diphtheria \", y=\"Life expectancy \", ax=ax2).set_title(\"Diphtheria has an effect on Life Expectancy, 2015\");","772904b4":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2000], x=\"Alcohol\", y=\"Life expectancy \", ax=ax1).set_title(\"Alcohol has an effect on Life Expectancy, 2000\");\nsns.regplot(data=data[data.Year == 2015], x=\"Alcohol\", y=\"Life expectancy \", ax=ax2).set_title(\"Alcohol has an effect on Life Expectancy, 2015\");\n\n#sns.FacetGrid(data=data, col=\"Year\", col_wrap=4, height=15)\n#g.map_dataframe(sns.regplot, x=\"Alcohol\", y=\"Life expectancy \")","79825125":"sns.regplot(data=data[data.Year == 2000], x=\"Total expenditure\", y=\"Life expectancy \").set_title(\"Positive effect of expenditure on healthcare on the life expectancy, 2000\");\n","40c9361c":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2000], x=\"infant deaths\", y=\"Life expectancy \", ax=ax1).set_title(\"Infant Mortality has an effect on Life Expectancy, 2000\");\nsns.regplot(data=data[data.Year == 2015], x=\"infant deaths\", y=\"Life expectancy \", ax=ax2).set_title(\"Infant Mortality has an effect on Life Expectancy, 2015\");","a9938185":"fig, (ax1, ax2)=plt.subplots(ncols=2, figsize=[12,4])\nsns.regplot(data=data[data.Year == 2000], x=\"Adult Mortality\", y=\"Life expectancy \", ax=ax1).set_title(\"Adult Mortality has an effect on Life Expectancy, 2000\");\nsns.regplot(data=data[data.Year == 2015], x=\"Adult Mortality\", y=\"Life expectancy \", ax=ax2).set_title(\"Adult Mortality has an effect on Life Expectancy, 2015\");","99015a97":"top_life_exp_2000=(data[data.Year==2000]\n.groupby(\"Country\")\n [\"Country\", \"Life expectancy \", \"Year\"]\n .median()\n .sort_values(\"Life expectancy \", ascending=False)\n .head(10)\n)\n\ntop_life_exp_2015=(data[data.Year==2015]\n.groupby(\"Country\")\n [\"Country\", \"Life expectancy \", \"Year\"]\n .mean()\n .sort_values(\"Life expectancy \", ascending=False)\n .head(10)\n)\nbottom_life_exp_2000=(\n    data[data.Year==2000]\n    .groupby(\"Country\")\n    [\"Country\", \"Life expectancy \", \"Year\"]\n    .median()\n    .sort_values(\"Life expectancy \", ascending=True)\n    .head(10)\n)\n\nbottom_life_exp_2015=(\n    data[data.Year==2015]\n    .groupby(\"Country\")\n    [\"Country\", \"Life expectancy \", \"Year\"]\n    .mean()\n    .sort_values(\"Life expectancy \", ascending=True)\n    .head(10)\n)\n\nplot_long_2000 = top_life_exp_2000.hvplot.bar(x=\"Country\", y=\"Life expectancy \", stacked=True, rot=45, title=\"Countries with the longest and shortest life expectancy, 2000\")\nplot_long_2015 = top_life_exp_2015.hvplot.bar(x=\"Country\", y=\"Life expectancy \", stacked=True, rot=45, title=\"Countries with the longest and shortest life expectancy, 2015\")\n\nplot_short_2000= bottom_life_exp_2000.hvplot.bar(x=\"Country\", y=\"Life expectancy \", stacked=True, rot=45)\nplot_short_2015= bottom_life_exp_2015.hvplot.bar(x=\"Country\", y=\"Life expectancy \", stacked=True, rot=45)\n\nplot_long_2000*plot_short_2000","97c93474":"plot_long_2015*plot_short_2015\n","99e20940":"status_2000=(data[data.Year==2000]\n.groupby(\"Status\")\n [[\"Country\"]]\n .count()\n)\n\nstatus_2015=(data[data.Year==2015]\n             .groupby(\"Status\")\n             [[\"Country\"]]\n             .count()\n            )\n\n\nf, (ax1, ax2) = plt.subplots(1, 2, sharey=True)\nstatus_2000.plot.pie(y=\"Country\", autopct='%1.0f%%', ax=ax1, figsize=(12,7)).set_title(\"There were 83% of developing countries and 17% of developed countries, 2000 and 2015\");\nstatus_2015.plot.pie(y=\"Country\", autopct='%1.0f%%', ax=ax2, figsize=(12,7));","1fe006f8":"data[\"Compare Status\"]=data.Status == data.groupby(\"Country\").Status.shift()","b45358f4":"data","aa90d970":"mask=(data[\"Compare Status\"]==False) & (data[\"Year\"]!=2000)\ndata[mask]","19905411":"Correlation between Income composition of Resources and Life Expectancy, taking into account all countries for all years. \n\nWe can clearly see that there is a positive correlation and more income composition of resource the country has, much longer the population expect to live","2cb10a14":"# Conclusion\n- In 2015 the country with the longest life expectancy (88 years old) was Slovenia\n- In 2o15 the country with the shortest life expectancy(51 years old) was Sierra Leone\n\n- Various factors affect life expectancy:\n    - Income Composition of Resources\n    - Schooling\n    -  Alcohol \n    - Polio & Diphtheria\n    - Total Expenditure\n    - Infant Mortality\n    - Adult Mortality\n    \n- There are 83% of developing countries and 17% of developed countries both for 2000 and 2015 years\n- There was no shift in the levels of the country. For 15 years, there was no country that shifted from being developing country to being developed\n    ","653ae62d":"Pretty obvious positive correlation: More infant deaths more under-five deaths.","606d9381":"There is a  positive correlation between consumption of Alcohol and Life Expectancy ","5933675b":"## 7. Total Expenditure & Life Expectancy for 2000","4af28c60":"## Correlation between values  - Statistically Significance - with p-value\n\n- Life Expectancy & Income Composition of Resources\n- Life Expectancy & Schooling\n- Under 5 Years & Infant Deaths\n- Alcohol & Hepatitis B\n- Polio & Diphtheria\n- Total Expenditure & Population\n- Schooling & GDP\n","78164547":"## Status","2ec17ff8":"## Description of each column","8ad5c74a":"## What is the long living country?","c485e9b3":"# Life Expectancy Overview for All countries for 2015","1a1833b1":"In 2000, the country with the longest life expectancy was Japan (81), and the shortest life expectancy was in Siera Leone (39)","cfc6b84a":"## 3. Correlation between Infant Deaths and Under-Five Deaths","7f8a3c86":"\n|Field|Description|\n|---:|:---|\n|Country|Country|\n|Year|Year|\n|Status|Developed or Developing status|\n|Life expectancy|Life Expectancy in age|\n|Adult Mortality|Adult Mortality Rates of both sexes (probability of dying between 15 and 60 years per 1000 population)|\n|infant deaths|Number of Infant Deaths per 1000 population|\n|Alcohol|Alcohol, recorded per capita (15+) consumption (in litres of pure alcohol)|\n|percentage expenditure|Expenditure on health as a percene of Gross Domestic Product per capita(%)|\n|Hepatitis B|Hepatitis B (HepB) immunization coverage among 1-year-olds (%)|\n|Measles|Measles - number of reported cases per 1000 population|\n|BMI|Average Body Mass Index of entire population|\n|under-five deaths|Number of under-five deaths per 1000 population|\n|Polio|Polio (Pol3) immunization coverage among 1-year-olds (%)|\n|Total expenditure|General government expenditure on health as a percene of total government expenditure (%)|\n|Diphtheria|Diphtheria tetanus toxoid and pertussis (DTP3) immunization coverage among 1-year-olds (%)|\n|HIV\/AIDS|Deaths per 1 000 live births HIV\/AIDS (0-4 years)|\n|GDP|Gross Domestic Product per capita (in USD)|\n|Population|Population of the country|\n|thinness 1-19 years|Prevalence of thinness among children and adolescents for Age 10 to 19 (%)|\n|thinness 5-9 years|Prevalence of thinness among children for Age 5 to 9(%)|\n|Income composition of resources|Income composition of resources|\n|Schooling|Number of years of Schooling(years)|","86b8ce78":"## 5. Polio & Diphtheria on Life expectancy","068fb16b":"From 2000 - 2015 the correlation between Hepatitis B and Life Expectancy has been changing from flat to positive correlation","90648bb1":" According to the pie chart, the number of developing or developed countries have not changed from 2000 - 2015. There are 83% of Developing countries and 17% of Developed Countries","2cc87cfc":"There is a correlation between Polio and Life expectancy","544d5fac":"In 2015, the country with the longest life expectancy was Slovenia (88), and the shortest life expectancy was in Siera Leone (51)","bba0f615":"Infant Deaths have a  slight correlation, More children die, less life expectancy","65da3d0b":"There is a positive correlation between Diptheria vaccine and Life expectance from 2000-2015 years","c331ab80":"Correlation for Income composition of Resources for 15 years. We can see that it is a positive correlation","142a1f12":"From the scatter plots we can see that schooling indeed has an effect on life expectancy\n\nMore years of schooling the person has, longer does he live","90c6cc82":"# The Effect of different factors on the Life Expectancy","fe396c1e":"### Correlation between Schooling and Life Expectancy","04fff0ba":"## 8. Adult Mortality & Life Expectancy\n","33d2554b":"More people die, less life expectancy","c7b04df7":"# Country-View","5e224053":"# Information about our data","a9905064":"### Life Expectancy & Income Composition of Resources\n","8e547461":"Those Countries are only in 2013.\n\nResult: None of the countries made a change in a status.","3d8c250c":"According to the graphs, more money the country spend for healthcare, they extend the life expectancy","1acd1148":"## 4. Hepatitis B & Life Expectancy","acaa3c4e":"## 8. Infant Mortality & Life Expectancy\n","132c65df":"## 6. Alcohol and Life Expectancy"}}