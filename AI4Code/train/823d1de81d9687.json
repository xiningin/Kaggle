{"cell_type":{"13e93725":"code","20bd4f99":"code","35a6ff3d":"code","9569fad2":"code","fde1b3e6":"code","2f5018df":"code","711ef150":"markdown","9acd43a2":"markdown","6e468285":"markdown","02923c1d":"markdown","298b2083":"markdown","e27fc014":"markdown","6f775867":"markdown","513a245c":"markdown","8b1d7014":"markdown"},"source":{"13e93725":"!pip install praat-textgrids","20bd4f99":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","35a6ff3d":"import textgrids\n\nFRAME_DURATION = 30 # 30 msec\nOVERLAP_RATE = 0.0 # frames don't overlap\n\ndef readFile(path):\n    '''\n    Read the file and return the list of SPEECH\/NONSPEECH labels for each frame\n    '''\n        \n    labeled_list  = []\n    grid = textgrids.TextGrid(path)\n\n    for interval in grid['silences']:\n        label = int(interval.text)\n\n        dur = interval.dur\n        dur_msec = dur * 1000 # sec -> msec\n        num_frames = int(round(dur_msec \/30)) # the audio is divided into 30 msec frames\n        print(dur_msec)\n        for i in range(num_frames):\n            \n            labeled_list.append(label)\n\n    return labeled_list","9569fad2":"from scipy.io import wavfile\n\nroot ='\/Female\/TIMIT\/SA2'\nannotation_path = \"\/kaggle\/input\/speech-activity-detection-datasets\/Data\/Annotation\/Female\/TMIT\/SI2220.TextGrid\"\naudio_path = \"\/kaggle\/input\/speech-activity-detection-datasets\/Data\/Audio\/Female\/TMIT\/SI2220.wav\"\n\n# read annotaion\nlabel_list = readFile(annotation_path)\n\n# read wav file\nfs, data = wavfile.read(audio_path)\ndata = np.array(data, dtype=np.float)","fde1b3e6":"\n# define time axis\nNs = len(data)  # number of sample\nTs = 1 \/ fs  # sampling period\nt = np.arange(Ns) * 1000 * Ts  # time axis\n\n\nshift = 1 - OVERLAP_RATE\nframe_length = int(np.floor(FRAME_DURATION * fs \/ 1000)) # frame length in sample\nframe_shift = round(frame_length * shift)# frame shift in sample\n","2f5018df":"import matplotlib.pyplot as plt\n\nfigure = plt.Figure(figsize=(10, 7), dpi=85)\nplt.plot(t, data)\n\nfor i, frame_labeled in enumerate(label_list):\n    idx = i * frame_shift\n    if (frame_labeled == 1):\n        plt.axvspan(xmin= t[idx], xmax=t[idx + frame_length-1], ymin=-1000, ymax=1000, alpha=0.4, zorder=-100, facecolor='g', label='Speech')\n\nplt.title(\"Ground truth labels\")\nplt.legend(['Signal', 'Speech'])\nplt.show()","711ef150":"The green parts indicates the frames where an human speech is detected.","9acd43a2":"### Preparing the variable","6e468285":"### Define the function extracting the ground truth labels","02923c1d":"It's important for this kind of tasks to perform short time analysis on the signal, so it needs to assign the lables (SPEECH\/NONSPEECH) to very little portions of the signal. I decide to split the data into portion of 30 milliseconds.","298b2083":"## Plot signal","e27fc014":"### Install library","6f775867":"# Example of usage ","513a245c":"## Load a file","8b1d7014":"### Load data from kaggle"}}