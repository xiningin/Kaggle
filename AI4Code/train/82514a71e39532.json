{"cell_type":{"55e72027":"code","4313d2f2":"code","8e7353bf":"code","512bea3e":"code","4f380a20":"code","afc41413":"markdown","099f8865":"markdown","cbbcc8dc":"markdown"},"source":{"55e72027":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pandas.plotting import register_matplotlib_converters\n%matplotlib inline\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","4313d2f2":"# Create DataFrame from national_convention.csv\n# Bring some order into the columns and format date columns to datetime\ncols = ['name', 'start_mandate', 'end_mandate', 'group', 'department', 'date_of_birth','place_of_birth',\\\n        'date_of_death','place_of_death']\ndate_cols = ['start_mandate', 'end_mandate', 'date_of_birth', 'date_of_death']\ndf = pd.read_csv('\/kaggle\/input\/deputies-of-the-french-national-convention\/national_convention.csv')\nfor col in date_cols:\n    df[col] = pd.to_datetime(df[col], format='%Y-%m-%d', errors='ignore')\ndf = df[cols]\ndf.head()","8e7353bf":"# Create histogram showing distribution of deaths over time\nregister_matplotlib_converters()\nx = df['date_of_death'].dropna()\nbins = pd.cut(x, bins=22)\nfig1, ax1 = plt.subplots(1, figsize=(10,8))\n(n, b, patches) = ax1.hist(x, bins=22, facecolor=\"#278fe9\", alpha=.7)\nax1.set_title('Distribution of deaths among members of the National Convention', fontsize=15)\nax1.set_xlabel('Date', fontsize=15)\nax1.set_ylabel('Number of deaths', fontsize=15)\nax1.set_xlim(x.min(),x.max())\nfor spine in ax1.spines:\n    ax1.spines[spine].set_visible(False)\npatches[0].set_color('#276092')\nax1.annotate('105 deputies died during their mandate between Sep 1792 and Oct 1795', xy=(80, 400),\n             xytext=(110, 410), xycoords='figure pixels', clip_on=True,\n             arrowprops=dict(facecolor='black', shrink=0.05), fontsize=10)\nplt.show()","512bea3e":"# create new DataFrame limited to deputies who died during mandate\ndf2 = df[df.loc[:,('date_of_death')] <= pd.Timestamp(1795,10,26)]\n# change datetime to period (Quarters)\ndf2.loc[:,('quarter')] = pd.PeriodIndex(df2.date_of_death, freq='Q')\n# Assign 'unknown' to deputies without explicit group affiliation\ndf2.loc[:,('group')] = df2.loc[:('group')].fillna('unknown')\n# group by 'group' and 'quarter'\ndf2_grouped = df2.groupby(['group', 'quarter']).size()\n# reshape further to create a pivot table\ndf2_grouped = df2_grouped.reset_index()\ndf2_grouped.columns = ['group', 'quarter','number_of_deaths']\ndf2_grouped_pivot = df2_grouped.pivot(index='quarter', columns='group', values='number_of_deaths').fillna(0)\ndf2_grouped_pivot = df2_grouped_pivot[['Montagne','Gauche','Dantonnistes','Girondins','Mod\u00e9r\u00e9s',\\\n                                       'Majorit\u00e9', 'Plaine', 'Centre droit', 'Droite', 'unknown']]","4f380a20":"# Create combined barplot and heatmap\nfig2, (ax2,ax3) = plt.subplots(2,1, sharex=False, figsize=(10,10))\nfig2.subplots_adjust(top=1.5)\n\nax2.set_title('Number of deaths during mandate by political group (barchart) and across time (heatmap)',\n              fontsize=16)\n\n#Create barplot\nsns.barplot(df2_grouped_pivot.columns, df2_grouped_pivot.values.sum(axis=0), color='#e7ba96' ,ci=None,\n            ax=ax2)\nax2.tick_params(axis='x', labelbottom=False, bottom=False)\nax2.tick_params(axis='y', labelsize=15)\nax2.set_ylabel('Total number of deaths by political group', fontsize=12)\nax2.set_xlabel('')\nfor spine in ax2.spines:\n    ax2.spines[spine].set_visible(False)\n\n#Create heatmap\ncmap = sns.cubehelix_palette(light=1, as_cmap=True)\nsns.heatmap(df2_grouped_pivot, vmin=0, vmax=df2_grouped_pivot.values.max(), cmap=cmap, cbar=False,\n            linewidth=.5, annot=True, annot_kws={'size': 15}, center=12, ax=ax3)\nax3.tick_params(axis='x', labeltop=True, labelbottom=False, rotation=90, labelsize=12, bottom=False)\nax3.tick_params(axis='y', rotation=0, labelsize=12, left=False)\nax3.set_ylabel('Year\/Quarter', fontsize=14)\nax3.set_xlabel('')\nplt.show()","afc41413":"**Getting started with the National Convention dataset: the \"Reign of Terror\" and mortality among deputies**\n\nThis is my first attempt at extracting some substance from the dataset on deputies of France's National Convention (1792-1795). As the \"Reign of Terror\" and subsequent backlash against those responsible (such as Robespierre) was a period of extreme political violence, I start with some visualisations about the mortality among members of the National Convention.\n","099f8865":"**Mortality during mandate by political group**\n\nThe figure below shows the combination of a barplot with a heatmap, sharing the categories of the different political groups as x-axis label. I tried to order the political groups *more or less* according to the political Left-Right spectrum (although the order might be a matter of interpretation). The barplot shows the total number of deaths per group for the period of the National Convention. The more revolutionary groups on the left were most affected in terms of mortality. The conflict among \"Montagnards\" and \"Girondins\" caused the most fatalities. The dynamics of political confrontation over time can be seen in the heatmap, with values being the number of deaths per group and quarter. The massive crackdown against the Girondins around the fourth quarter of 1793 is clearly visible, while in-fighting on the Left and eventual backlash against the more extreme crop of revolutionaries led to deaths of deputies on the left side of the heatmap almost throughout the National Convention.","cbbcc8dc":"**The impact of political violence on mortality among deputies over time**\n\nThe histogram below shows the distribution of deaths among members of the National Convention. An initial assumption would be to expect a normal distribution. This is not the case for the National Convention as the first bar does not fit this expectation. The bins are defined in a way that the first bar covers the period of the National Convention (Sept 1792 to Oct 1795). High levels of political violence disrupted the normal distribution and led to this giant first bar in the histogram. According to the dataset, 105 deputies of the National Convention died during their mandate. I have not checked the concrete causes of death for every single person. However, political violence (executions, etc.) may well be the main cause for the deaths represented by the first bar. "}}