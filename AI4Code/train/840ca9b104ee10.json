{"cell_type":{"3134dfd7":"code","46dbe6c7":"code","49e20dc7":"code","464fde01":"code","61f2ee8c":"code","ce2064e6":"code","4243f24f":"code","1c05a245":"code","2120a902":"code","87b17613":"code","530c8b35":"code","249f2ad6":"code","c629ebc1":"code","c0d16052":"code","96253023":"code","74d2af95":"code","7acb07a8":"code","2b1fc129":"code","55e6ffcb":"code","ef2ad746":"code","df573cd2":"code","85fc406f":"code","d501fc08":"code","87e14c8d":"code","da3e996c":"code","7dabb01f":"code","ea760404":"code","0230d8ea":"code","574ab697":"code","ededd900":"code","889ad949":"code","dccb5d96":"code","1761d356":"code","41685adf":"code","392f245a":"code","6cdfd4eb":"code","4190f224":"code","acfbd778":"code","7766a03f":"code","83d442c5":"code","18ca1165":"code","289a85ad":"code","f9870140":"code","e9e16b51":"code","dbeb3b9d":"code","da781cdb":"code","8f393977":"code","0f132501":"code","e779f10f":"code","305f8694":"code","75c44b59":"code","01effe56":"code","2d837afd":"code","00ef08cc":"code","73ad3e4c":"code","b1a5e7d2":"code","d25c657f":"code","25d088c2":"markdown","4ae998e7":"markdown","401c9090":"markdown","76513b59":"markdown","c9ca5950":"markdown","a41acde2":"markdown","60fa52c8":"markdown","8b72001c":"markdown","f76d3202":"markdown","b931226e":"markdown","4c2b6de4":"markdown","16d716f4":"markdown","c7f53cc1":"markdown","dc653fde":"markdown","28807677":"markdown","9e14ffb9":"markdown","4accd40f":"markdown"},"source":{"3134dfd7":"#importing packages\nimport pandas as pd\nimport numpy as np \nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport os","46dbe6c7":"#load data\ndata=pd.read_csv(\"..\/input\/hepatitis-c-virus-hcv-for-egyptian-patients\/HCV-Egy-Data.csv\")","49e20dc7":"data.head()","464fde01":"#Explore Data\ndata.columns","61f2ee8c":"#Rename Columns\ndata.columns=['Age ', 'Gender', 'BMI', 'Fever', 'Nausea\/Vomting','Headache ',\n       'Diarrhea','Fatigue','Jaundice',\n       'Epigastric_pain ', 'WBC','RBC','HGB', 'Plat','AST_1','ALT_1',\n       'ALT_4', 'ALT_12','ALT_24','ALT_36','ALT 48','ALT_after_24w',\n       'RNA_Base','RNA 4','RNA_12', 'RNA_EOT','RNA_EF',\n       'Baseline_histological_Grading','Baselinehistological_staging']","ce2064e6":"#Remove spaces at the ends of column names to avoid any further errors:\ndata.columns = data.columns.str.strip()","4243f24f":"data.info()","1c05a245":"data.describe()","2120a902":"#check for missing values\ndata.isnull().sum().sum()","87b17613":"#Change the classes columns to categorical for better visualization \n\n#categorize columns: Gender,Fever,Nausea\/Vomting,Headache,Diarrhea,Fatigue,Jaundice\ndata_cat=data[['Gender','Fever','Nausea\/Vomting','Headache','Fatigue','Jaundice','Diarrhea','Epigastric_pain',\"Baselinehistological_staging\"]]","530c8b35":"data_cat.head()","249f2ad6":"data_cat=data_cat.astype('category')","c629ebc1":"data_cat.info()","c0d16052":"#Replacing the values to names e.g. 1:Male,2:Female 1:Absent,2:present \ndata_cat['Gender'].replace([1,2],['Male','Female'],inplace=True)\ndata_cat['Gender']","96253023":"#check for the unique values for the other columns(Symptoms):\nSymptoms_cols=data_cat[[\"Fever\",\"Nausea\/Vomting\",\"Headache\",\"Fatigue\",\"Jaundice\",\"Diarrhea\",'Epigastric_pain']]\n\nSymptoms_cols_values = data_cat[[\"Fever\",\"Nausea\/Vomting\",\"Headache\",\"Fatigue\",\"Jaundice\",\"Diarrhea\",'Epigastric_pain']].values\nunique_values =  np.unique(Symptoms_cols_values)\n\nprint(unique_values)","74d2af95":"#Replacing values (1-2) to (Absent,Present) in Symptoms Features:\n\ndata_cat['Fever'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Nausea\/Vomting'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Headache'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Fatigue'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Jaundice'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Diarrhea'].replace([1,2],['Absent','Present'],inplace=True)\ndata_cat['Epigastric_pain'].replace([1,2],['Absent','Present'],inplace=True)","7acb07a8":"#Doing the same for Histological Staging\ndata_cat['Baselinehistological_staging'].unique()","2b1fc129":"data_cat['Baselinehistological_staging'].replace([1,2,3,4],['Portal Fibrosis','Few Septa','Many Septa','Cirrhosis'],inplace=True)","55e6ffcb":"data_cat.head()","ef2ad746":"#Gain insights of the categorical data:\nsns.countplot(data_cat['Gender'],palette=\"Reds_r\")\nplt.show()","df573cd2":"data['Gender'].value_counts()","85fc406f":"#check Histological Grading and Staging across each Gender\n\nsns.countplot(x=data['Baseline_histological_Grading'],hue=data_cat['Gender'],palette=\"Dark2\")\nplt.title(\"Gender Chart for Histological Grading\")\nplt.xlabel(\"Histological Grading\")\nplt.legend(bbox_to_anchor=(1,1))\nplt.show()","d501fc08":"#Histological Stages across each Gender\nsns.countplot(x=data_cat['Baselinehistological_staging'],hue=data_cat['Gender'],palette=\"viridis\")\nplt.legend(bbox_to_anchor=(1,1))\nplt.title(\"Gender Chart for Histological Staging\")\nplt.xlabel(\"Histological Staging\")\nplt.show()","87e14c8d":"data_cat['Histological Stages']=data_cat['Baselinehistological_staging']\ndata_cat['Histological Gradings']=data['Baseline_histological_Grading']","da3e996c":"#parameters\norder=['Present','Absent']\nh_order=['Portal Fibrosis','Few Septa', 'Many Septa', 'Cirrhosis']\nheight=5\nasp=0.7\npalette=['winter','Spectral','coolwarm','gist_gray','plasma','Dark2','Pastel1']\n\n#plots\nFeverPltS = sns.catplot(x=\"Fever\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[1])\n\nNauseaPltS =sns.catplot(x=\"Nausea\/Vomting\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[0])\n\n\nHeadachePltS =sns.catplot(x=\"Headache\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[2])\n\n\nFatiguePltS =sns.catplot(x=\"Fatigue\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[3])\n\n\nJaundicePltS =sns.catplot(x=\"Jaundice\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[4])\n\n\n\nDiarrheaPltS =sns.catplot(x=\"Diarrhea\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[5])\n\n\nEpigastric_painPltS =sns.catplot(x=\"Epigastric_pain\", hue=\"Histological Stages\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                 height=height, aspect=asp,order=order,hue_order=h_order,palette=palette[6])\n\n","7dabb01f":"#parameters\norder=['Present','Absent']\nheight=8\nasp=1\npalette=['winter','Spectral','coolwarm','gist_gray','plasma','Dark2','Pastel1']\n\n#plots\nFeverPltG = sns.catplot(x=\"Fever\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=\"gnuplot\")\n\nNauseaPltG = sns.catplot(x=\"Nausea\/Vomting\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[1])\n\nHeadachePltG = sns.catplot(x=\"Headache\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[2])\n\nFatiguePltG = sns.catplot(x=\"Fatigue\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[3])\n\nJaundicePltG = sns.catplot(x=\"Jaundice\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[4],)\n\nDiarrheaPltG = sns.catplot(x=\"Diarrhea\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[5],)\n\nEpigastric_painPltG = sns.catplot(x=\"Epigastric_pain\", hue=\"Histological Gradings\", col=\"Gender\",\n                data=data_cat, kind=\"count\",\n                height=height, aspect=asp,order=order,palette=palette[6],)\n\n","ea760404":"#Age distrubtion across the dataset\n\nsns.distplot(data.Age,bins=10,label=\"Age\",color=\"green\",rug=True)\nplt.yticks([])\nplt.title(\"Age Distribution\")\nplt.legend()\nplt.show()","0230d8ea":"#Age with Gender\nfig,axis=plt.subplots(2,1,figsize=(5,10))\n\nsns.boxplot(x=data_cat[\"Gender\"],y=data['Age'],ax=axis[0])\nsns.violinplot(x=data_cat[\"Gender\"],y=data['Age'],inner=\"quartile\",bandwidth=0.2, ax=axis[1],palette='twilight')\n\nplt.legend(bbox_to_anchor=(1,1))\nplt.show()","574ab697":"#Aspartate Transminase distribution:\n\nAST=data['AST_1']\n\nsns.distplot(AST,bins=15,label=\"AST\",color=\"green\")\nplt.xlabel(\"Aspartate Transaminase Ratio\")\nplt.yticks([])\nplt.legend()\nplt.show()\nplt.savefig(\"ASTdist.png\")\n\n#AST vs Stages\nplt.figure(figsize=(10,5))\nsns.swarmplot(y=data['AST_1'],x=data_cat['Baselinehistological_staging'],hue=data_cat.Gender,palette=\"coolwarm\")\nplt.legend(bbox_to_anchor=(1,1))\nplt.xlabel(\"Stages\")\nplt.ylabel(\"AST\")\nplt.title(\"The distribution of the AST Enzyme Across each Stage \")\nplt.show()\nplt.savefig(\"ASTstages.png\")","ededd900":"#check the disribution of RBC,WBC and HGB\nsns.set_style('whitegrid')\n\nfig,axis=plt.subplots(3,1,figsize=(5,15))\n\nRBCplt=sns.distplot(data['RBC'], kde = False, color ='red', bins = 20,ax=axis[0],label=\"RBC Distribution\") \nWBCplt=sns.distplot(data['WBC'], kde = True, color ='blue', bins = 30,ax=axis[1],label=\"WBC Distribution\")\nHGBplt=plt.hist(data['HGB'] ,bins=30,label=\"HGB Distribution\",color=\"green\")\n\n\nplt.legend()\nplt.show()","889ad949":"#AST vs RBC & WBC \nsns.set_style(\"darkgrid\")\nfig,axis=plt.subplots(2,1,figsize=(8,15))\n\nRBCASTplt=sns.kdeplot(data['RBC'],data['AST_1'],cmap=\"Reds\",shade=True,shade_lowest=False,ax=axis[0])\nRBCASTpltcontour=sns.kdeplot(data['RBC'],data['AST_1'],cmap=\"autumn\",ax=axis[0])\n\nWBCASTplt=sns.kdeplot(data['WBC'],data['AST_1'],cmap=\"Blues\",shade=True,shade_lowest=False,ax=axis[1])\nWBCASTpltcontour=sns.kdeplot(data['WBC'],data['AST_1'],cmap=\"winter\",ax=axis[1])\n\n\n\nplt.show()\n","dccb5d96":"#AST VS HGB(Blood Hemoglobin level) across Gender:","1761d356":"plt.figure(figsize=(10,5))\n\nsns.swarmplot(y=data['AST_1'],x=data['HGB'],hue=data_cat.Gender,palette=\"ocean\")\n\nplt.legend(bbox_to_anchor=(1,1))\nplt.xlabel(\"HGB Level\")\nplt.ylabel(\"AST\")\nplt.title(\"The distribution of the AST Enzyme Across each HGB Level \")\n\nplt.show()\nplt.savefig('asthgb.png')","41685adf":"#plat distribution \nsns.distplot(data.Plat,bins=8,axlabel=\"Platelets\",rug=True,color='red')\nplt.show()","392f245a":"#AST V PLAT\nsns.set_style('whitegrid')\nWBCASTplt=sns.kdeplot(data['Plat'],data['AST_1'],cmap=\"Reds\",shade=True,shade_lowest=False)\nWBCASTpltcontour=sns.kdeplot(data['Plat'],data['AST_1'],cmap=\"Reds\")\n\nplt.show()","6cdfd4eb":"ALTdata=data[['ALT_1', 'ALT_4', 'ALT_12', 'ALT_24', 'ALT_36','ALT 48', 'ALT_after_24w']]\nALTdata","4190f224":"ALTdata.columns=['ALT WEEK 1','ALT WEEK 4','ALT WEEK 12','ALT WEEK 24','ALT WEEK 36','ALT WEEK 48',\"'ALT after 24 WEEKs '\"]","acfbd778":"#ALT Enzyme distribution across each week\nsns.set_palette(palette=\"inferno\")\n\nfor i, col in enumerate(ALTdata.columns):\n    plt.figure(i)\n    sns.distplot(ALTdata[col],rug=True)\n","7766a03f":"#ALT WEEKS V stages\ndef ALTSwarmPlot(data,x,hue,figsize,palette):\n    for i, col in enumerate(ALTdata.columns):\n        plt.figure(i,figsize=figsize)\n        sns.swarmplot(y=ALTdata[col],x=x,hue=hue,palette=palette)\n        plt.yticks([])\n        plt.legend(bbox_to_anchor=(1,1))\nALTSwarmPlot(data=ALTdata,x=data_cat['Histological Stages'], figsize=((8,5)),hue=data_cat['Gender'],palette=\"hls\")","83d442c5":"#ALT WEEKS V Grades\nALTSwarmPlot(data=ALTdata,x=data_cat['Histological Gradings'],figsize=(10,5),hue=data_cat['Gender'],palette=\"cubehelix\")","18ca1165":"#ALT WEEKS V HGB\nALTSwarmPlot(data=ALTdata,x=data['HGB'],figsize=(10,5),hue=data_cat['Gender'],palette=\"coolwarm\")","289a85ad":"print(\"All numerical columns: \\n\",data.columns,'\\n'*2)#Gender is included for better visualization\nprint(\"ALT weeks columns: \\n\",ALTdata.columns)","f9870140":"#plot ALT WEEKS vs BMI:\ndef ALTHexPlot(data,x,figsize,color):\n    for i, col in enumerate(ALTdata.columns):\n        plt.figure(i,figsize=figsize)\n        sns.jointplot(y=ALTdata[col],x=x,color=color,kind=\"hex\")\n        plt.yticks([])\n        plt.legend(bbox_to_anchor=(1,1))\n        plt.show()\nALTHexPlot(data=ALTdata,x=data['BMI'],figsize=((8,5)),color='magenta')\nplt.savefig(\"ALT Vs BMI\")","e9e16b51":"#ALT WEEKS VS WBCs\nALTHexPlot(data=ALTdata,x=data['WBC'],figsize=((8,5)),color='cyan')\n","dbeb3b9d":"#ALT WEEKS VS WBCs\nALTHexPlot(data=ALTdata,x=data['RBC'],figsize=((8,5)),color='red')\n","da781cdb":"data.columns","8f393977":"#ALT Weeks VS Platelets\nALTHexPlot(data=ALTdata,x=data['Plat'],figsize=((8,5)),color='gray')","0f132501":"RNAdata=data[['RNA_Base','RNA 4','RNA_12','RNA_EOT','RNA_EF']]\nRNAdata.head()","e779f10f":"#Distribution of each RNA \nsns.set_palette(palette=\"Dark2\")\n\nfor i, col in enumerate(RNAdata.columns):\n    plt.figure(i)\n    sns.distplot(RNAdata[col],rug=True)","305f8694":"#RNA at each Stage\/Gradings.\ndef RNASwarmPlot(data,x,hue,figsize,palette):\n    for i, col in enumerate(RNAdata.columns):\n        plt.figure(i,figsize=figsize)\n        sns.swarmplot(y=RNAdata[col],x=x,hue=hue,palette=palette)\n        plt.legend(bbox_to_anchor=(1,1))\ndef RNABoxPlot(data,x,hue,figsize,palette):\n    for i, col in enumerate(RNAdata.columns):\n        plt.figure(i,figsize=figsize)\n        sns.boxplot(y=RNAdata[col],x=x,hue=hue,palette=palette)\n        plt.legend(bbox_to_anchor=(1,1))\n","75c44b59":"#RNA VS STAGES\nRNASwarmPlot(data=data,x=data_cat['Histological Stages'],figsize=(8,5),palette=\"cool\",hue=data_cat['Gender'])","01effe56":"#RNA VS GRADINGS \nRNABoxPlot(data=data,x=data_cat['Histological Gradings'],figsize=(18,8),palette=\"coolwarm\",hue=data_cat['Gender'])","2d837afd":"data.head()","00ef08cc":"\n# Heatmap\nsns.set(style=\"white\")\n# Create a correlation matrix\ncorr = data.corr()\n# Creating a mask the size of our covariance matrix\nmask = np.zeros_like(corr, dtype=bool)\nmask[np.triu_indices_from(mask)] = True\n# Set up the matplotlib figure\nf, ax = plt.subplots(figsize=(11,9))\n\n# Draw the heatmap with the mask and correct aspect ratio\nsns.heatmap(corr,mask=mask,cmap=\"twilight\",square=True, \n            linewidth=.5)\nax.set_title('Multi-Collinearity of Features')\nplt.savefig('correlation.png')\n","73ad3e4c":"#stages\nplt.figure(figsize=(8,12))\n\nHGBStagingPlt=sns.countplot(y=data['HGB'],hue=data_cat['Baselinehistological_staging'],palette=\"twilight\")\n\nplt.legend(bbox_to_anchor=(1,1))\nplt.show()","b1a5e7d2":"#Gradings\nsns.set_style(\"whitegrid\")\nplt.figure(figsize=(8,12))\n\nHGBGradingPlt=sns.countplot(y=data['HGB'],hue=data['Baseline_histological_Grading'],palette=\"twilight\",saturation=6,)\n\nplt.legend(bbox_to_anchor=(1,1))\nplt.show()","d25c657f":"#Dashboard\nsns.set_style(\"darkgrid\")\nfig,axis=plt.subplots(4,2,figsize=(10,20))\nk1=sns.countplot(x=data['Baseline_histological_Grading'],hue=data_cat['Gender'],palette=\"Dark2\",ax=axis[0,0])\nk2=sns.countplot(x=data_cat['Histological Stages'],hue=data_cat['Gender'],palette=\"viridis\",ax=axis[0,1])\nk3=sns.distplot(data['Age'],bins=10,label=\"Age\",color=\"green\",rug=True,ax=axis[1,0])\nk4=sns.swarmplot(y=data['AST_1'],x=data_cat['Histological Stages'],hue=data_cat.Gender,palette=\"coolwarm\",ax=axis[1,1])\nk5=RBCASTplt=sns.kdeplot(data['RBC'],data['AST_1'],cmap=\"Reds\",shade=True,shade_lowest=False,ax=axis[2,0])\nk6=sns.swarmplot(y=data['ALT_after_24w'],x=data['HGB'],hue=data_cat.Gender,palette=\"ocean\",ax=axis[2,1])\nk7=HGBStagingPlt=sns.countplot(data['HGB'],hue=data_cat['Baselinehistological_staging'],palette=\"twilight\",ax=axis[3,0])\nk8=sns.distplot(data['Plat'],bins=8,axlabel=\"Platelets\",rug=True,color='red',ax=axis[3,1])\nplt.show()\nplt.savefig(\"Dashboard.png\")","25d088c2":"## symptoms vs Histological stages across Gender","4ae998e7":"The RBC Disribution across the AST enzyme is quiet concentrated at the values within range (40-100) with about range (40m-48m) RBC\n\nWhile the WBC Distributed at values within range(4k-15k)WBC","401c9090":"# Aspartate Transminase Relation with :\n## -> WBC (White blood cell)\n\n## -> RBC (red blood cells)\n\n## -> HGB (Hemoglobin)\n\n## -> Plat (Platelets)\n","76513b59":"#### the AST enzyme distribution across each Histological Stage shows remmarkable diffrence with Gender ","c9ca5950":"> ### The age of the patients varies between 35-60 with max. denisty in the 40-60. range .with a slight diffrence in the median value(around 45) patients for both genders seems to have the same age distribution ","a41acde2":"# Distribution for ALT (per each week) and [stages,grading,HBG] for both gender\n","60fa52c8":"# Distribution of Age","8b72001c":"# Alanine Transaminase across each week of weeks(1,4,12,36,48)\n","f76d3202":"### Correlation heatmap matrix for numerical data","b931226e":"## Symptoms vs Histological Gradings across Gender\n\n","4c2b6de4":"# Visualization for the Symptoms Features and Histological(Grading&Staging)\n","16d716f4":"# Liver Enzymes:\n## -> Alanine Transaminase across each week of weeks(1,4,12,36,48)\n\n## -> Aspartate Transaminase","c7f53cc1":"# RNAs","dc653fde":"# ALT with Numerical Data","28807677":"##### it seems that most of the cases are in the 15th Grade, also the least are in the 7th Grade\n","9e14ffb9":"\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/","4accd40f":"# HGB level in the Histological Stages & Grading\n"}}