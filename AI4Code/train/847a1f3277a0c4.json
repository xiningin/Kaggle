{"cell_type":{"02f401c1":"code","4c549d90":"code","80f7e36c":"code","b20d99d5":"code","ad4cacd3":"code","85c99c06":"code","286dd28f":"code","6a437679":"code","c7a3d727":"code","db0137b9":"code","2e883ed3":"code","034be12e":"code","3695d7c8":"code","f41694dd":"code","749da6d2":"code","06238e81":"code","d4f32ad8":"code","e9735223":"code","f0ca0c62":"code","2f51132a":"code","65e086c8":"code","f0722403":"code","5f6dc6bd":"code","f4b6fc6a":"code","808c8288":"code","202bb1ca":"code","c7e03e49":"code","b72e2cb7":"code","cd336193":"code","fdc38347":"code","b27a85e8":"code","8da95f7d":"code","6e6d5100":"code","58a1a776":"code","492cb546":"code","ea31ac7c":"code","cb59346c":"code","ab19bdbe":"code","e5112ec0":"code","fa999208":"code","93c954d8":"code","8556a9e4":"code","ff244f40":"code","53bc87b0":"code","679e3dec":"code","9066da61":"code","b86fa2f1":"code","4340cf44":"code","b71f8454":"code","5e73f035":"code","d3b18bee":"code","9df9b5cf":"code","8e86e313":"code","b3019055":"code","4e418491":"code","07be3daa":"code","8646d73f":"code","028352bc":"code","d3447a49":"code","29010cc9":"code","8effcf82":"code","9ea3f809":"code","855c1b90":"code","ec8feff5":"code","9e26bdb4":"code","6d666829":"code","8573c3ca":"code","12f77f46":"code","117e77ac":"code","e1ac3f90":"code","fd70b6c6":"code","172ce6bc":"code","10c1da0e":"code","2232f85f":"code","7a631b6d":"code","90e9e723":"code","2c867a69":"code","8149ddb9":"code","a5a14bd0":"code","ada16d8d":"code","08c1cf4e":"code","94868ede":"code","e0b46ea2":"code","b3b8d081":"code","0c2cd0b4":"code","52bb69c5":"code","bfd94cd7":"code","497dfcab":"code","5537e697":"code","773e75d6":"code","9eb69222":"code","daae49ad":"code","feebb14e":"code","4ffd7da5":"code","3c2ab12c":"code","c841887f":"code","5d88fcab":"code","1887c85d":"code","9e949c9a":"code","c191dfcc":"code","3cf427f2":"code","3bf4a418":"code","fac7cda6":"code","c0d1e389":"code","b6d0b277":"code","4897a3f3":"code","4dc2d381":"code","71783f60":"code","a2cb2af4":"code","dc9ead7f":"markdown","8ac73b0a":"markdown","349022d8":"markdown","251aa3e7":"markdown","10bf83bb":"markdown","4281aaf9":"markdown","7c9d73fa":"markdown","c76ccb5f":"markdown","cb80d553":"markdown","c4649312":"markdown","53f97982":"markdown","e90b6c75":"markdown","8c78526e":"markdown","03966c09":"markdown","d9ed2e38":"markdown","bf670a57":"markdown","177e61bc":"markdown","924e00e9":"markdown","d82f8292":"markdown","2b9843f2":"markdown","8743e834":"markdown","31c4f2a6":"markdown","93b4d7cf":"markdown","06162ec7":"markdown","9dc36f4b":"markdown","04ea89c8":"markdown","37298dce":"markdown","aa2d5f2e":"markdown","08779b8b":"markdown","6d35f45c":"markdown","8629a844":"markdown","6855c485":"markdown","2e362bcf":"markdown","569cc7c4":"markdown","66aa49b7":"markdown","f4981768":"markdown","a4c61324":"markdown","2d73de48":"markdown","46795659":"markdown","450567c2":"markdown","e24f8973":"markdown","69f76cde":"markdown","6ae97a92":"markdown","c50aeb02":"markdown","f1c4dd1f":"markdown","456841e0":"markdown","4af951f0":"markdown","38e5215e":"markdown","9ae925e4":"markdown","78fc54da":"markdown","52f2299b":"markdown","9e60bf71":"markdown","ea3bb118":"markdown","1684f3c9":"markdown","9e124a24":"markdown","ae67a3cd":"markdown","394c5c44":"markdown","fb9fd6f8":"markdown","1b9f5dc6":"markdown","0fe015bf":"markdown","e7e4a255":"markdown","bb8a9bce":"markdown","10af22a9":"markdown","51632401":"markdown","a4c3f25b":"markdown","8d54b2a6":"markdown","4a8b24c7":"markdown","af37f0ce":"markdown","a1faa771":"markdown","0f8c31d1":"markdown","9826e41e":"markdown","65e04297":"markdown","9fdc1cb1":"markdown","27cb0589":"markdown","eabbb685":"markdown","23e4a686":"markdown","c88eb86e":"markdown","b1334b1e":"markdown","4f3adfb0":"markdown","2d3d5366":"markdown","74d67a78":"markdown","38948e2f":"markdown","19e9d202":"markdown","f830fdff":"markdown","02fc795d":"markdown","61e99ac2":"markdown","e527871a":"markdown","2d894662":"markdown"},"source":{"02f401c1":"import sqlite3 as sql\n# import datetime\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport os","4c549d90":"sns.set(rc={'figure.figsize': (10, 6)})\nsns.set_style('whitegrid')\nsns.set_palette('Set2')","80f7e36c":"path = '..\/input\/fitbit\/Fitabase Data 4.12.16-5.12.16'\n## Get the full path of all the csv files.\nfull_path_list = [os.path.join(path,f) for\\\n                 f in os.listdir(path) if os.path.isfile(os.path.join(path,f)) ]","b20d99d5":"len(full_path_list)","ad4cacd3":"full_path_list","85c99c06":"con = sql.connect(\"fitbit.db\")\ncur = con.cursor()","286dd28f":"def get_table_name(full_path_list, i):\n    '''Returns name of csv file with no extension'''\n    return full_path_list[i].split('\/')[-1].split('.')[0]","6a437679":"for i in range(0,18):\n    pd.read_csv(full_path_list[i]).to_sql(get_table_name(full_path_list, i), con, if_exists='append', index=False)","c7a3d727":"# Simple query\ndf = pd.read_sql(f'SELECT * FROM {get_table_name(full_path_list, 0)}', con)","db0137b9":"df.head()","2e883ed3":"# Listing all tables\ncur.execute(\"SELECT name FROM sqlite_master WHERE type='table';\")\ntables = cur.fetchall()\nprint(tables)\nprint(50*'=')\nprint(f'Total of {len(tables)} tables in database.')","034be12e":"dailyActivity_df = pd.read_sql(f'SELECT * FROM dailyActivity_merged', con)\n\ndailyActivity_df.head()","3695d7c8":"dailyIntensities_df = pd.read_sql(f'SELECT * FROM dailyIntensities_merged', con)\n\ndailyIntensities_df.head()","f41694dd":"print(f'dailyActivity_df length: {len(dailyActivity_df)}')\nprint(f'dailyIntensities_df length: {len(dailyIntensities_df)}')","749da6d2":"query = \"\"\"\nSELECT VeryActiveDistance, ModeratelyActiveDistance, LightActiveDistance, SedentaryActiveDistance, VeryActiveMinutes,\n       FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes\nFROM dailyActivity_merged\nEXCEPT\nSELECT VeryActiveDistance, ModeratelyActiveDistance, LightActiveDistance, SedentaryActiveDistance, VeryActiveMinutes,\n       FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes\nFROM dailyIntensities_merged;\n\"\"\"\ncur.execute(query)\nprint(cur.fetchall())","06238e81":"query = \"\"\"\nSELECT TotalSteps from dailyActivity_merged\nEXCEPT\nSELECT StepTotal from dailySteps_merged;\n\"\"\"\ncur.execute(query)\nprint(cur.fetchall())","d4f32ad8":"query = \"\"\"\nSELECT Calories from dailyActivity_merged\nEXCEPT\nSELECT Calories from dailyCalories_merged;\n\"\"\"\ncur.execute(query)\nprint(cur.fetchall())","e9735223":"update_date = \"\"\"\nUPDATE dailyActivity_merged set ActivityDate = \n\tSUBSTR(ActivityDate, -4)\n\t|| \"-\" ||\n\tCASE\n\t\tWHEN LENGTH(\n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tActivityDate, 1, INSTR(ActivityDate, '\/') - 1\n\t\t\t)\n\t\t) > 1 THEN \n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tActivityDate, 1, INSTR(ActivityDate, '\/') - 1\n\t\t\t)\n\t\tELSE '0' ||\n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tActivityDate, 1, INSTR(ActivityDate, '\/') - 1\n\t\t\t)\n\tEND\n\t|| \"-\" || \n\tCASE\n\tWHEN LENGTH(\n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\t) > 1 THEN \n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\tELSE '0' ||\n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(ActivityDate, INSTR(ActivityDate, '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\tEND;\n\"\"\"\ncur.execute(update_date)","f0ca0c62":"con.commit()","2f51132a":"con.close()","65e086c8":"# Connect again to database\ncon = sql.connect(\"fitbit.db\")\ncur = con.cursor()","f0722403":"sleep_query = \"\"\"\nSELECT\n\t*\nFROM\n\tsleepDay_merged;\n\"\"\"\n\nsleep_df = pd.read_sql(sleep_query, con)","5f6dc6bd":"sleep_df.head()","f4b6fc6a":"update_date = \"\"\"\nUPDATE sleepDay_merged set SleepDay = \n\tSUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), -4)\n\t|| \"-\" ||\n\tCASE\n\t\tWHEN LENGTH(\n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tSUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), 1, INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') - 1\n\t\t\t)\n\t\t) > 1 THEN \n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tSUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), 1, INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') - 1\n\t\t\t)\n\t\tELSE '0' ||\n\t\t\tSUBSTR( -- picking month info\n\t\t\t\tSUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), 1, INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') - 1\n\t\t\t)\n\tEND\n\t|| \"-\" || \n\tCASE\n\tWHEN LENGTH(\n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\t) > 1 THEN \n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\tELSE '0' ||\n\t\tSUBSTR( -- picking day info\n\t\t\tSUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), -- pick substring starting after first \/\n\t\t\t1,  -- start new substring at first character of newly selected substring\n\t\t\tINSTR(SUBSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), INSTR(SUBSTR(SleepDay, 1, LENGTH(SleepDay) - 12), '\/') + 1), '\/') - 1 -- go all the way to next \/\n\t\t)\n\tEND;\n\"\"\"\ncur.execute(update_date)","808c8288":"con.commit()","202bb1ca":"con.close()","c7e03e49":"con = sql.connect(\"fitbit.db\")\ncur = con.cursor()","b72e2cb7":"sleep_query = \"\"\"\nSELECT *,\n\tSTRFTIME('%w',SleepDay) dow\nFROM sleepDay_merged;\n\"\"\"\n\nsleep_df = pd.read_sql(sleep_query, con)","cd336193":"sleep_df.head()","fdc38347":"dailyActivity_df = pd.read_sql('SELECT * FROM dailyActivity_merged', con)","b27a85e8":"dailyActivity_df.head()","8da95f7d":"full_info_activity = \"\"\"\nSELECT *,\n\tSTRFTIME('%d',ActivityDate) day,\n\tSTRFTIME('%m',ActivityDate) month,\n\tSTRFTIME('%Y',ActivityDate) year,\n\tSTRFTIME('%w',ActivityDate) dow\nFROM dailyActivity_merged;\n\"\"\"\n\nfull_dailyActivity_df = pd.read_sql(full_info_activity, con)","6e6d5100":"full_dailyActivity_df.head()","58a1a776":"# Different users\ncur.execute(\"SELECT COUNT(DISTINCT Id) FROM dailyActivity_merged;\")\nprint('Different users: ', cur.fetchall()[0][0])","492cb546":"# Average Calories, Steps and Distance by Id and by day of the week\nquery = \"\"\"\nSELECT \n\tId,\n\tSTRFTIME('%w', ActivityDate) dow,\n\tROUND(AVG(Calories),2) AS avg_calories,\n\tROUND(AVG(TotalSteps),2) AS avg_steps,\n\tROUND(AVG(TotalDistance),2) AS avg_distance\nFROM dailyActivity_merged\nGROUP BY Id, STRFTIME('%w', ActivityDate);\n\"\"\"\n\nactivity_dist = pd.read_sql(query, con)","ea31ac7c":"activity_dist.head()","cb59346c":"weekend_query = \"\"\"\nSELECT \n\tId,\n\tActivityDate,\n\tSedentaryMinutes,\n\tVeryActiveMinutes,\n\tFairlyActiveMinutes,\n\tLightlyActiveMinutes,\n\tCalories,\n\tTotalSteps,\n\tTotalDistance,\n\tCASE \n\t\tWHEN STRFTIME('%w',ActivityDate) IN ('0','6')\n\t\t\tTHEN 1\n\t\tELSE 0\n\tEND weekend\nFROM dailyActivity_merged;\n\"\"\"\n\nweekend_check = pd.read_sql(weekend_query, con)\n\nweekend_check.head()","ab19bdbe":"join_query = \"\"\"\nSELECT \n\tA.Id,\n\tA.ActivityDate,\n\tA.SedentaryMinutes,\n\tA.LightlyActiveMinutes,\n\tS.TotalMinutesAsleep\nFROM \n\tdailyActivity_merged A\nINNER JOIN sleepDay_merged S\nON \n\tA.Id = S.Id AND\n    A.ActivityDate = S.SleepDay;\n\"\"\"\nactivity_sleep_df = pd.read_sql(join_query, con)\n\nactivity_sleep_df.head()","e5112ec0":"fig, axes = plt.subplots(1, 4, figsize=(15, 5), sharey=True)\nfig.suptitle('Distance per Minutes given kind of Activity')\n\nsns.regplot(data = dailyActivity_df, x = 'VeryActiveMinutes', y = 'VeryActiveDistance', ax=axes[0])\n\nsns.regplot(data = dailyActivity_df, x = 'FairlyActiveMinutes', y = 'ModeratelyActiveDistance', ax=axes[1])\n\nsns.regplot(data = dailyActivity_df, x = 'LightlyActiveMinutes', y = 'LightActiveDistance', ax=axes[2])\n\nsns.regplot(data = dailyActivity_df, x = 'SedentaryMinutes', y = 'SedentaryActiveDistance', ax=axes[3])","fa999208":"sns.regplot(data = full_dailyActivity_df, x= 'TotalSteps', y ='Calories');","93c954d8":"import numpy as np\nfrom sklearn.linear_model import LinearRegression","8556a9e4":"X = full_dailyActivity_df['TotalSteps'].values.reshape((-1, 1))\ny = full_dailyActivity_df['Calories'].values","ff244f40":"model = LinearRegression()\nmodel.fit(X, y)","53bc87b0":"print('intercept:', model.intercept_)\nprint('slope:', model.coef_)","679e3dec":"def abline(slope, intercept):\n    \"\"\"Plot a line from slope and intercept\"\"\"\n    axes = plt.gca()\n    x_vals = np.array(axes.get_xlim())\n    y_vals = intercept + slope * x_vals\n    plt.plot(x_vals, y_vals, color= 'r', ls = '--')","9066da61":"sns.scatterplot(data = full_dailyActivity_df, x= 'TotalSteps', y ='Calories')\nabline(model.coef_, model.intercept_);","b86fa2f1":"full_dailyActivity_df[full_dailyActivity_df['TotalSteps']==0]['Calories'].describe()","4340cf44":"full_dailyActivity_df[full_dailyActivity_df['Calories']==0]","b71f8454":"query = \"\"\"\nSELECT *,\n\tSTRFTIME('%d',ActivityDate) day,\n\tSTRFTIME('%m',ActivityDate) month,\n\tSTRFTIME('%Y',ActivityDate) year,\n\tSTRFTIME('%w',ActivityDate) dow\nFROM \n\tdailyActivity_merged\nWHERE\n\tCalories = 0;\n\"\"\"\n\noutliers_calories = pd.read_sql(query, con)\n\noutliers_calories","5e73f035":"full_info_activity = \"\"\"\nSELECT *,\n\tSTRFTIME('%d',ActivityDate) day,\n\tSTRFTIME('%m',ActivityDate) month,\n\tSTRFTIME('%Y',ActivityDate) year,\n\tSTRFTIME('%w',ActivityDate) dow\nFROM \n\tdailyActivity_merged\nWHERE\n\tCalories <> 0;\n\"\"\"\n\nfull_dailyActivity_df = pd.read_sql(full_info_activity, con)","d3b18bee":"len(full_dailyActivity_df)","9df9b5cf":"def get_regression(full_dailyActivity_df, x ='TotalSteps', y = 'Calories'):\n    X = full_dailyActivity_df[x].values.reshape((-1, 1))\n    y = full_dailyActivity_df[y].values\n\n    model = LinearRegression()\n    model.fit(X, y)\n\n    print('intercept:', model.intercept_)\n    print('slope:', model.coef_)\n\n    sns.scatterplot(data = full_dailyActivity_df, x= x, y =y)\n    # plt.title('Calories burned by number of steps taken')\n    abline(model.coef_, model.intercept_);\n\n    return (model.intercept_, model.coef_)","8e86e313":"get_regression(full_dailyActivity_df)","b3019055":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution according to activity type')\n\nsns.histplot(data = full_dailyActivity_df, x = 'VeryActiveMinutes', ax = axes[0]);\n\nsns.histplot(data = full_dailyActivity_df, x = 'FairlyActiveMinutes', ax = axes[1]);\n\nsns.histplot(data = full_dailyActivity_df, x = 'LightlyActiveMinutes', ax = axes[2]);","4e418491":"full_day_activity = \"\"\"\nSELECT *,\n\tSTRFTIME('%d',ActivityDate) day,\n\tSTRFTIME('%m',ActivityDate) month,\n\tSTRFTIME('%Y',ActivityDate) year,\n\tSTRFTIME('%w',ActivityDate) dow,\n\tVeryActiveMinutes+FairlyActiveMinutes+LightlyActiveMinutes+SedentaryMinutes AS TotalMinutes\nFROM \n\tdailyActivity_merged\nWHERE\n\tCalories <> 0 AND\n\tTotalMinutes = 1440;\n\"\"\"\n\nlogged_day_df = pd.read_sql(full_day_activity, con)","07be3daa":"logged_day_df.head()","8646d73f":"print(f'There are {len(logged_day_df)} rows where users logged the whole day.')","028352bc":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution according to activity type - Entire day logged')\n\nsns.histplot(data = logged_day_df, x = 'VeryActiveMinutes', ax = axes[0]);\n\nsns.histplot(data = logged_day_df, x = 'FairlyActiveMinutes', ax = axes[1]);\n\nsns.histplot(data = logged_day_df, x = 'LightlyActiveMinutes', ax = axes[2]);","d3447a49":"not_full_day = \"\"\"\nSELECT *,\n\tSTRFTIME('%d',ActivityDate) day,\n\tSTRFTIME('%m',ActivityDate) month,\n\tSTRFTIME('%Y',ActivityDate) year,\n\tSTRFTIME('%w',ActivityDate) dow,\n\tVeryActiveMinutes+FairlyActiveMinutes+LightlyActiveMinutes+SedentaryMinutes AS TotalMinutes\nFROM \n\tdailyActivity_merged\nWHERE\n\tCalories <> 0 AND\n\tTotalMinutes <> 1440;\n\"\"\"\n\nnot_logged_day_df = pd.read_sql(not_full_day, con)","29010cc9":"not_logged_day_df.head()","8effcf82":"print(f'There are {len(not_logged_day_df)} rows where users logged parts of the day.')","9ea3f809":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution according to activity type - Partial day logged')\n\nsns.histplot(data = not_logged_day_df, x = 'VeryActiveMinutes', ax = axes[0]);\n\nsns.histplot(data = not_logged_day_df, x = 'FairlyActiveMinutes', ax = axes[1]);\n\nsns.histplot(data = not_logged_day_df, x = 'LightlyActiveMinutes', ax = axes[2]);","855c1b90":"sns.histplot(data = not_logged_day_df, x = 'TotalMinutes');","ec8feff5":"sns.histplot(data = sleep_df, x = 'TotalMinutesAsleep');","9e26bdb4":"sns.histplot(data = sleep_df, x = 'TotalMinutesAsleep')\nplt.axvline(420, 0, 65, color='red');","6d666829":"sns.boxplot(x=\"dow\", y=\"TotalMinutesAsleep\", data=sleep_df);","8573c3ca":"sns.boxplot(x=\"dow\", y=\"TotalMinutesAsleep\", data=sleep_df,\n            order = ['0','1','2','3','4','5','6']);","12f77f46":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution of average values across days of the week')\n\nsns.boxplot(x=\"dow\", y=\"avg_steps\", data=activity_dist, ax=axes[0]);\n\nsns.boxplot(x=\"dow\", y=\"avg_calories\", data=activity_dist, ax=axes[1]);\n\nsns.boxplot(x=\"dow\", y=\"avg_distance\", data=activity_dist, ax=axes[2]);","117e77ac":"fig, axes = plt.subplots(1, 2, figsize=(22, 5))\nfig.suptitle('Distribution of average values across days of the week')\n\nsns.histplot(data=full_dailyActivity_df, x=\"Calories\", ax = axes[0]);\n\nsns.histplot(data=full_dailyActivity_df, x=\"TotalDistance\", ax = axes[1]);","e1ac3f90":"sns.histplot(data= weekend_check, x = 'SedentaryMinutes');","fd70b6c6":"g = sns.FacetGrid(weekend_check, col=\"weekend\", height=6, aspect=.7)\ng.map(sns.histplot, \"SedentaryMinutes\", kde=True, stat='density');","172ce6bc":"query = \"\"\"\nSELECT\n\tId,\n\tAVG(SedentaryMinutes) AS AvgSedentaryMinutes\nFROM\n\tdailyActivity_merged\nGROUP BY\n\tId\nORDER BY\n\tAvgSedentaryMinutes DESC;\n\"\"\"\navg_sed_minutes = pd.read_sql(query, con)\n\navg_sed_minutes","10c1da0e":"sns.barplot(data = avg_sed_minutes,\n            x = 'Id', y = 'AvgSedentaryMinutes',\n            order=avg_sed_minutes.sort_values('AvgSedentaryMinutes',ascending = True)['Id'])\nplt.xticks(rotation=70);","2232f85f":"cur.execute(\"SELECT\tAVG(SedentaryMinutes) FROM dailyActivity_merged;\")\nsedMinAvg = cur.fetchall()[0][0]\nprint(sedMinAvg)","7a631b6d":"def is_above(user):\n    '''Returns 1 if user has average SedentaryMinutes above the total average and 0 otherwise'''\n    return int(avg_sed_minutes[avg_sed_minutes['Id']==user]['AvgSedentaryMinutes'].values[0] > sedMinAvg)","90e9e723":"weekend_check['UserGroup'] = weekend_check['Id'].apply(is_above)","2c867a69":"# Rows in each group\nprint(f'Rows in group 0 (Less Sedentary group):')\nprint(len(weekend_check[weekend_check['UserGroup']==0]))\nprint(f'Rows in group 1 (More Sedentary group):')\nprint(len(weekend_check[weekend_check['UserGroup']==1]))\n\n#Distinct users in each group\nprint('Distinct users in group 0 (Less Sedentary group)')\nprint(weekend_check[weekend_check['UserGroup']==0]['Id'].nunique())\n\nprint('Distinct users in group 1 (More Sedentary group)')\nprint(weekend_check[weekend_check['UserGroup']==1]['Id'].nunique())","8149ddb9":"sns.countplot(data=weekend_check, x = 'UserGroup');","a5a14bd0":"sns.boxplot(x=\"UserGroup\", y=\"SedentaryMinutes\", data=weekend_check);","ada16d8d":"sns.boxplot(x=\"UserGroup\", y=\"SedentaryMinutes\", hue = 'weekend', data=weekend_check);","08c1cf4e":"g = sns.FacetGrid(weekend_check[weekend_check['UserGroup']==0], col=\"weekend\", height=6, aspect=.7)\ng.map(sns.histplot, \"SedentaryMinutes\", kde=True, stat='density');","94868ede":"# Create temporary table for weekend column\ntemp_query = \"\"\"\nCREATE TEMP TABLE weekendTable\nAS\nSELECT \n\tSedentaryMinutes,\n\tCalories,\n\tTotalSteps,\n\tTotalDistance,\n\tCASE \n\t\tWHEN STRFTIME('%w',ActivityDate) IN ('0','6')\n\t\t\tTHEN 1\n\t\tELSE 0\n\tEND weekend\nFROM dailyActivity_merged\n-- Created temp table to check for weekends on weekend column\n\"\"\"\ncur.execute(temp_query)","e0b46ea2":"# Get averages from SQL GROUP BY statement\navg_query = \"\"\"\nSELECT \n\tweekend,\n\tAVG(SedentaryMinutes),\n\tAVG(Calories),\n\tAVG(TotalSteps),\n\tAVG(TotalDistance)\t\nFROM weekendTable\nGROUP BY weekend;\n\"\"\"\nweekend_avgs = pd.read_sql(avg_query, con)","b3b8d081":"weekend_avgs","0c2cd0b4":"sleep_df['UserGroup'] = sleep_df['Id'].apply(is_above)","52bb69c5":"sns.boxplot(x=\"UserGroup\", y=\"TotalMinutesAsleep\", data=sleep_df);","bfd94cd7":"sns.countplot(data = sleep_df, x = 'UserGroup');","497dfcab":"sleep_df['UserGroup'].value_counts()","5537e697":"print('Distinct users in group 0 (Less Sedentary group)')\nprint(sleep_df[sleep_df['UserGroup']==0]['Id'].nunique())\n\nprint('Distinct users in group 1 (More Sedentary group)')\nprint(sleep_df[sleep_df['UserGroup']==1]['Id'].nunique())","773e75d6":"join_query = \"\"\"\nSELECT \n\tA.Id,\n\tA.ActivityDate,\n\tA.SedentaryMinutes,\n\tS.TotalMinutesAsleep\nFROM \n\tdailyActivity_merged A\nINNER JOIN sleepDay_merged S\nON \n\tA.Id = S.Id AND\n    A.ActivityDate = S.SleepDay;\n\"\"\"\nactivity_sleep_df = pd.read_sql(join_query, con)","9eb69222":"activity_sleep_df.head()","daae49ad":"sns.regplot(data = activity_sleep_df,\n                x = 'TotalMinutesAsleep',\n                y = 'SedentaryMinutes');","feebb14e":"sns.set_palette(\"flare\")\nsns.set_context(\"paper\", font_scale=2)","4ffd7da5":"full_dailyActivity_df.loc[:, full_dailyActivity_df.columns != 'Id'].describe().T","3c2ab12c":"sleep_df.loc[:, sleep_df.columns != 'Id'].describe()","c841887f":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution according to activity type')\n\nsns.histplot(data = full_dailyActivity_df, x = 'VeryActiveMinutes', ax = axes[0]);\n\nsns.histplot(data = full_dailyActivity_df, x = 'FairlyActiveMinutes', ax = axes[1]);\n\nsns.histplot(data = full_dailyActivity_df, x = 'LightlyActiveMinutes', ax = axes[2]);","5d88fcab":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution according to activity type - Partial day logged')\n\nsns.histplot(data = not_logged_day_df, x = 'VeryActiveMinutes', ax = axes[0]);\n\nsns.histplot(data = not_logged_day_df, x = 'FairlyActiveMinutes', ax = axes[1]);\n\nsns.histplot(data = not_logged_day_df, x = 'LightlyActiveMinutes', ax = axes[2]);","1887c85d":"sns.histplot(data = not_logged_day_df, x = 'TotalMinutes')\nplt.title('Logged minutes for partially logged days');\n","9e949c9a":"fig, axes = plt.subplots(1, 2, figsize=(22, 5))\nfig.suptitle('Distribution of Calories Burned daily (left) and daily Distance (right)')\n\nsns.histplot(data=full_dailyActivity_df, x=\"Calories\", ax = axes[0]);\n\nsns.histplot(data=full_dailyActivity_df, x=\"TotalDistance\", ax = axes[1]);","c191dfcc":"sns.histplot(data = sleep_df, x = 'TotalMinutesAsleep')\nplt.title('Daily minutes asleep')\n\nplt.axvline(420, 0, 65, color='black', ls = '--', lw = 3);\n\nplt.annotate('182 records', (100,50))\nplt.annotate('231 records', (650,50))\nplt.annotate('7h of sleep', (380,30), color='red')","3cf427f2":"fig, axes = plt.subplots(1, 3, figsize=(22, 5))\nfig.suptitle('Distribution of average values across days of the week')\n\nsns.boxplot(x=\"dow\", y=\"avg_steps\", data=activity_dist, ax=axes[0]).set_xticklabels(['Sun','Mon','Tue','Wed','Thu','Fri', 'Sat']);\n\nsns.boxplot(x=\"dow\", y=\"avg_calories\", data=activity_dist, ax=axes[1]).set_xticklabels(['Sun','Mon','Tue','Wed','Thu','Fri', 'Sat']);\n\nsns.boxplot(x=\"dow\", y=\"avg_distance\", data=activity_dist, ax=axes[2]).set_xticklabels(['Sun','Mon','Tue','Wed','Thu','Fri', 'Sat']);","3bf4a418":"sns.boxplot(x=\"dow\", y=\"TotalMinutesAsleep\", data=sleep_df,\n            order = ['0','1','2','3','4','5','6']).set_xticklabels(['Sun','Mon','Tue','Wed','Thu','Fri', 'Sat']);","fac7cda6":"get_regression(full_dailyActivity_df)\nplt.ylabel('Calories')\nplt.title('Daily calories burned by number of steps taken');\n","c0d1e389":"full_dailyActivity_df[full_dailyActivity_df['TotalSteps']==0]['Calories'].describe()","b6d0b277":"g = sns.FacetGrid(weekend_check, col=\"weekend\", height=6, aspect=.7)\ng.map(sns.histplot, \"SedentaryMinutes\", kde=True, stat='density')\ng.fig.subplots_adjust(top=0.8)\ng.fig.suptitle('Daily sedentary minutes')\naxes = g.axes.flatten()\naxes[0].set_title(\"Weekdays\")\naxes[1].set_title(\"Weekends\");","4897a3f3":"avg_sed_minutes","4dc2d381":"sns.boxplot(x=\"UserGroup\", y=\"SedentaryMinutes\", hue = 'weekend', data=weekend_check);","71783f60":"weekend_avgs","a2cb2af4":"sns.regplot(data = activity_sleep_df,\n                x = 'TotalMinutesAsleep',\n                y = 'SedentaryMinutes');","dc9ead7f":"Now we define our inputs (`X`) and outputs (`y`) for the regression. This should be arrays so we take the `.values` from our dataframes:","8ac73b0a":"## NOTE: day of week 0-6 with Sunday==0\n\n### Joining activity data with sleep data","349022d8":"### Data on Average Calories, Steps and Distance by Id and by day of the week","251aa3e7":"There is no clear distinction between the days of the week. However we can see that sunday has the largest median for `TotalMinutesAsleep` and saturday appears to be the most spread oout distribution.\n\nWhile we are looking at distributions across days of the week, we can use our `activity_dist` dataframe to inspect the average values of steps, calories and distances:","10bf83bb":"Inside the `fitbit` folder, a folder named `Fitabase Data 4.12.16-5.12.16` stores 18 `csv` files with tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.\n\nTo better read our files let's create a `path` variable to store the folder path containing all `csv` files.","4281aaf9":"### **Calories and Distance**","7c9d73fa":"To easily insert all `csv` files as different tables in our database we can create a helper function to return the name of the `csv` file (without extension) to use as the table name.","c76ccb5f":"The distribution of burned calories is a bit skewed to the low calories while the distance distribtion is highly skewed to lower distances.\n\n### **Sleeping habits**","cb80d553":"Of all 940 original rows in our data, only 462 rows have partially logged their activities in a day. For these records:","c4649312":"<H1 align=\"center\">  Google Data Analytics Certificate <\/H1>\n\n---\n\n# Case Study 2: How Can a Wellness Technology Company Play It Smart?\n\nIn this scenario, we are working on the marketing analyst team at [Bellabeat](https:\/\/bellabeat.com\/), a high-tech manufacturer of health-focused products for women. Ur\u0161ka Sr\u0161en, cofounder and Chief Creative O\ufb03cer of **Bellabeat**, believes that analyzing smart device \ufb01tness data could help unlock new growth opportunities for the company.\n\n## The task\n\nAnalyze smart device data to gain insight into how consumers are using their smart devices. These insights will help guide marketing strategy for the company.\n\n## About the company\n \nUr\u0161ka Sr\u0161en and Sando Mur founded Bellabeat, a high-tech company that manufactures health-focused smart products.\nSr\u0161en used her background as an artist to develop beautifully designed technology that informs and inspires women around\nthe world. Collecting data on activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with\nknowledge about their own health and habits. Since it was founded in 2013, Bellabeat has grown rapidly and quickly\npositioned itself as a tech-driven wellness company for women.\n\nBy 2016, Bellabeat had opened o\ufb03ces around the world and launched multiple products. Bellabeat products became available\nthrough a growing number of online retailers in addition to their own e-commerce channel on their [website](https:\/\/bellabeat.com\/). The company has invested in traditional advertising media, such as radio, out-of-home billboards, print, and television, but focuses on digital marketing extensively. Bellabeat invests year-round in Google Search, maintaining active Facebook and Instagram pages, and consistently engages consumers on Twitter. Additionally, Bellabeat runs video ads on Youtube and display ads on the Google Display Network to support campaigns around key marketing dates.\n\nSr\u0161en knows that an analysis of Bellabeat's available consumer data would reveal more opportunities for growth. She has\nasked the marketing analytics team to focus on a Bellabeat product and analyze smart device usage data in order to gain\ninsight into how people are already using their smart devices. Then, using this information, she would like high-level\nrecommendations for how these trends can inform Bellabeat marketing strategy.\n\n# The report\n\nThe insights will be presented following the data analysis process steps:\n\n* \ud83e\udd14**Ask**: Identify the problem to be solved and how our insights can drive business decisions.\n* \ud83d\udcbb**Prepare**: Gather the relevant data, organize it and store it. Verify data integrity and credibility.\n* \ud83e\uddf0**Process**: Choose tools to handle the data and identify its advantages. Clean our data and ensure it is ready for analysis. Document the cleaning process and save cleaned data.\n* \ud83e\uddd1\ud83c\udffb\u200d\ud83d\udcbb**Analyze**: Organize and format the data to answer our questions. Perform calculations and identify trends and relationships within the data.\n* \ud83d\udcca**Share**: Create visualizations to share most relevant findings. Relate findings to original questions.\n* \ud83c\udfac**Act**: present final conclusions and suggested approach to deal with findings and next steps.\n\n---\n\n# \ud83e\udd14**Ask**:\n\n## The business task\n\nAnalyze smart device usage data in order to gain insight into how people are already using their smart devices. Then, using this information, give high-level recommendations for how these trends can inform Bellabeat marketing strategy.\n\n**How current user trends can guide marketing strategy?**\n\n## The stakeholders\n\n* **Ur\u0161ka Sr\u0161en**: Bellabeat's cofounder and Chief Creative O\ufb03cer\n* **Sando Mur**: Mathematician and Bellabeat's cofounder; key member of the Bellabeat executive team\n* **Bellabeat marketing analytics team**: A team of data analysts responsible for collecting, analyzing, and\nreporting data that helps guide Bellabeat's marketing strategy.\n\n---\n\n# \ud83d\udcbb**Prepare**:\n\n## Getting the data\n\nTo answer our main question (*How current user trends can guide marketing strategy?*), we will use data from **[FitBit Fitness Tracker Data](https:\/\/www.kaggle.com\/arashnic\/fitbit)** (CC0: Public Domain, dataset made available through [Mobius](https:\/\/www.kaggle.com\/arashnic)). This Kaggle data set contains personal \ufb01tness tracker from thirty three \ufb01tbit users. These eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. It includes information about daily activity, steps, and heart rate that can be used to explore users' habits.\n","53f97982":"The average `SedentaryMinutes` is given by:","e90b6c75":"During weekends the distribution of sedentary minutes is a bit more skewed to the lower numbers, so users may be more active during weekends (makes sense since during the week there is probably a lot of sitting down and working...).\n\n### **Do average values change on weekends?**\n\nTo inspect how does sedentary minutes, calories, steps and distance change during the weekend we'll do a trick with temp tables (there is probably a better way, but is the one that worked first for me...).\n\nSteps to our analysis:\n* Create a temp table to include a *weekend* boolean column\n* Get the averages of queried columns in the temp table using a GROUP BY statement.","8c78526e":"## Joinning Ativity data with sleep data","03966c09":"# \ud83e\uddd1\ud83c\udffb\u200d\ud83d\udcbb**Analyze**\n\n## Creating usefull dataframes\n\nTo ease our analyses further down the road, we can use our updated tables to create helper dataframes.\n\nFirst, a sanity check on our daily activity table:","d9ed2e38":"There are 4 rows with all zero values except for the `SedentaryMinutes` column. In this column we see that users spent 1440 minutes of sedentary activity in a single day. That's the whole day (!): 1440minutes divided by 60minutes\/hour = 24h. So, it seems the tracker may have been turned off the entire day our experience some malfunction. We should get rid of these data points in further analysis.\n\nWe redefine our `full_dailyActivity_df` dropping the outliers:","bf670a57":"We can see from these plots that a great number of users (over 400) spend very few minutes as Very or Fairly Active. The distribution of `LightlyActiveMinutes` on the other hand is very symmetrical exluding the very low minutes.\n\nThere is an issue here, however: it is not clear if all users were using the tracker during the entire day in the analysed period. If a user logs the whole day, then the sum `VeryActiveMinutes + FairlyActiveMinutes + LightlyActiveMinutes + SedentaryMinutes` should equal 1440 (the total number of minutes in a day).\n\nLet's use SQL to select only those points where this condition is true:","177e61bc":"Calling group 1 the more sedentary one and group 0 the less sedentary one, we can ask if **this behaviour persist on weekends?**","924e00e9":"All 18 file paths were created to ease our access later on. In the next analysis phase we will start modifying the data as part of the cleaning and organizing process. To keep a copy of our original data, I have manually created a backup folder named `data-backup` to store the unmodified data from Kaggle.\n\n---\n\n# \ud83e\uddf0**Process**\n\nTo clean and transform our data we will create a database using the [sqlite3](https:\/\/docs.python.org\/3\/library\/sqlite3.html) module as an interface for [SQLite](https:\/\/www.sqlite.org\/index.html) in **Python**. By doing this we can use SQL queries to quickly interact with our data.\n\n## Creating the database\n\nFirst of all, we need to create the database. We do this by creating a *connection* and starting a *cursor* in the desired database:","d82f8292":"With the current data, there is no considerable difference between the average Steps Taken, Calories Burned or Distance across different days of the week.\n\n### **Sleep across days of the week**","2b9843f2":"This is an interesting graph: there is a clear tendency of users with more minutes asleep to be less sedentary. So, one conclusion might be that the more you sleep, the more active you are during the day!","8743e834":"Using a boxplot we can clearly see the difference of these groups:","31c4f2a6":"The behaviour here is similar. Let's see what happens to the days when users did not logged the 24h:","93b4d7cf":"Visual on the number of rows in each group:","06162ec7":"As expected, the **VeryActive** distances are *traveled* in shorter times (that is, they have larger speeds represented by steeper regression lines). A somewhat unexpected result here is that *LightlyActiveMinutes* lead to greater speeds than *FairlyActiveMinutes*. **It would be interesting to know how this classification is done to actually understand the difference between \"Light\" activities and \"Moderate\" activities.**\n\n### **How does the number of steps taken in a day affect the amount of calories burned?**","9dc36f4b":"Group 1 is the more sedentary one as it has a higher median for the `SedentaryMinutes` distribution.\n\n#### **Does this behaviour persist on weekends?**","04ea89c8":"We call `.reshape()` on `X` because this array is required to be two-dimensional, or to be more precise, to have one column and as many rows as necessary. That's exactly what the argument (-1, 1) of `.reshape()` specifies.\n\nNext, we instantiate the model and fit it to the data.","37298dce":"### \"Boolean\" column to check if date corresponds to weekend","aa2d5f2e":"## **Do calories burned depend on steps taken?**","08779b8b":"Updating the day to match SQLite format `YYYY-MM-DD` (**execute only once**):","6d35f45c":"Now we can use the `head()` method to show the first 5 rows of data from the first inserted table.","8629a844":"## **Do sleep habits influence sedentary time?**","6855c485":"### **Do average values change on weekends?**","2e362bcf":"Finally, we can list all tables in our data base using a SQL query:","569cc7c4":"Wihtout the outliers, our fit has a slightly higher intercept of ~1689.15 (correspondong to the *BMR*).\n\n### **Distribution according to type of activity**\n\nExcluding `SedentaryMinutes`, all users spend their daily time between three types of activities:\n* `VeryActiveMinutes`\n* `FairlyActiveMinutes`\n* `VeryLightlyActiveMinutes`\n\nWe can use **histograms** to check how are this *minutes* distributed accross users:","66aa49b7":"Number of rows in each group (in the `sleep_df` dataframe):","f4981768":"To commit the changes we use the `commit()` method in our sql cursor.","a4c61324":"The distribution is somewhat symmetric with 231 rows to the right of the line (including the line) and 182 rows to the left.\n\nWe can further inspect the distribution of minutes asleep per week day:","2d73de48":"That looks good! And, from our user data we see that the predicted *BMR* is ~1665.74 (between those predicted for the 35-year-old woman and man). We can further get information on the *BMR* of our users if we filter only the data points with zero steps taken and get the statistics on the Calories distribution. This can be done with the `describe` method from `pandas` along with the mask for only `TotalSteps = 0`.","46795659":"### **Distribution of calories and distance**","450567c2":"The same ideia applies to tables `dailyActivity_merged` and `dailySteps_merged`. Both have columns related to total steps taken by date. In the former table this column is named `TotalSteps` and in the latter, `StepTotal`. Again, we can execute a EXCEPT statement to check if columns are redundant:","e24f8973":"As expected the amount of calories burned in a day grows as the user takes more steps. An inetersting fact is that the intercept of the regression line represents the amount of burned calories in a day with **no steps** taken. This is the amount of calories users are burning in a very sedentary day. According to the [Healthline site](https:\/\/www.healthline.com\/health\/calories-burned-sleeping#Determining-how-many-calories-you-burn), this number corresponds to the *basal metabolic rate*:\n\n> Your basal metabolic rate (BMR), on the other hand, represents the number of calories you individually burn a day at rest, or while you\u2019re sedentary. This includes sleeping and sitting.\n\nTo compare these estimates with our data, we can get the intercept value with a **simple linear regression**. In our data, this value is ~1689.15 Calories. We can get some descriptive statistics for the *BMR*:","69f76cde":"Ok, now we see a difference! The `LightlyActiveMinutes` distribution is very symmetric with no peak at very few minutes of activity. Users who log the entire day may end up registering a lot of `LightlyActiveMinutes` while those who log only a part of the day might be registering only activities with higher demand.\n\nLet's see the distribution of total logged time in this second group.","6ae97a92":"The `if_exists='append'` argument ensures we append the table to the existing database.\n\nWe can do a quick sanity check and use `pandas` again to create a dataframe object from a simple query to the newly populated database.","c50aeb02":"The table `dailyIntensities_merged` seems to hold redundant information already contained in `dailyActivity_merged`.\nThe bellow query should return empty if all 8 columns related to Distance and Minutes of activity are redundant between these tables.","f1c4dd1f":"Again, the dates are now in the proper format.\n\nAs was done in the sleep dataframe, we can use the function `STRFTIME()` from SQLite to extract information on the day, month, year and day of the week (*dow*) from the formated dates:","456841e0":"For the sleep habits data, we can use the `describe()` method on the `sleep_df` dataframe:","4af951f0":"The distribution of burned calories is a bit skewed to the low calories while the distance distribtion is higly skewed to lower distances.\n\n### **How does sedentary minutes change in weekends?**\n\nFirst of all, not considering the day of the week, let's take a look at the distribtuion of `SedentaryMinutes`:","38e5215e":"With these, we would like to draw the regression line in the same figure as the scatter plot for our data and see if the fit is similar to that obtained with seaborn's regplot. To actually draw the line, we define a `abline` function to use matplotlib to draw a line in 2D space from the slope and intercept.","9ae925e4":"Our data frame is now 936 rows long, given we dropped the four outliers. We can now see if these made a difference in the regression parameters. To simplify our flow, let's turn the regression process into a single function:","78fc54da":"## **Distributions**\n\n### **By acivity type**\n\nThree types of activities:\n* Very Active\n* Fairly Active\n* Lightly Active","52f2299b":"We can close our connection to the database and check if tables were updated.","9e60bf71":"### **Sleeping habits and week day distributions**\n\nWe can use **histograms** again to see the distribution of sleeping time for all users.","ea3bb118":"These tables appear to have shared columns. Let's first find out if they have the same number of rows.","1684f3c9":"According to the [CDC](https:\/\/www.cdc.gov\/sleep\/about_sleep\/how_much_sleep.html) an adult should get **7 or more** hours of sleep per day. This corresponds to 420 minutes. We can plot a line at this value to see how the users do against this recommendation.","9e124a24":"## **Day of the week: does it make a difference?**\n\nNow that we had a galnce at our data and its distributions, does the day of the week make a considerable difference in user behavious to justify some marketing or functionality built to target specific days of activity?","ae67a3cd":"## **Heads-up:**\n\nA lot of the *analysis phase* was repeated in the *share phase*. So, if you want to see my whole thought process, I encourage to read the notebook as it is (it might get a bit crazy and non-linear). If you want to see the main insights and visuals, you can probably just skip over to the *share phase* right after the *process phase*.","394c5c44":"This is an interesting graph: there is a clear tendency of **users with more minutes asleep to be less sedentary**. So, one conclusion might be that the more you sleep, the more active you are during the day!\n\n---\n\n# \ud83c\udfac**Act**\n\nUsing only the daily activity from our 33 users we reached some interesting conclusions!\nTop high-level insights:\n* There is **no clear distinction in user activity across different days of the week**;\n* The average number of steps taken daily is around 7670. According to the [CDC](https:\/\/www.cdc.gov\/media\/releases\/2020\/p0324-daily-step-count.html):\n    > ...higher daily step counts were associated with lower mortality risk from all causes.\n\n    If our product can output the number of steps in real time, we can **motivate users to reach a certain number of steps daily**! Once again, the CDC informs us that\n    \n    > ...compared with taking 4,000 steps per day, a number considered to be low for adults, taking 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). Taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps.\n* If the goal is to burn some calories, there is a **linear relation between steps taken and calories burned**. Our step monitor could use user data to fit a model and predict how many steps a user should take to reach a certain amount of calories burned. Further investigation into the *MET* data could be very useful to this.\n* Regarding sleeping habits, there was a clear decrease of sedentary minutes as the number of minutes asleep increased. So, another goal of the product could be to motivate users to keep a consistent and sufficient sleeping schedule. Going back to the [CDC](https:\/\/www.cdc.gov\/media\/releases\/2020\/p0324-daily-step-count.html):\n    > Being physically active has many benefits, including reducing a person\u2019s risk of obesity, heart disease, type 2 diabetes, and some cancers. And on a daily basis, it can help people feel better and sleep better.\n\n---\n\n# **Thank you so much for reading this project!**\n\nIt was a lot of fun and there is surely room for improvement! This is a project I truly intent to get back to when my skills and knowledge of the field are sharper.\n\n**Any feedback would be amazing!**\n\nStay safe everyone!\n","fb9fd6f8":"## **Categorizing users**\n\nNow that we know a bit more about users activities, can we categorize our users in a way that is natural from the data?\n\n### **How much time in a day do users spend being sedentary?**","1b9f5dc6":"There is a huge imbalance here: there are 364 records of daily sleep activity for the less sedentary group while only 49 from the more sedentary group.\n\nThe total number of distinct users from the less sedentary group is 14 while for the more sedentary group there are only 10 (out of 19 possible ones) distinct users.","0fe015bf":"We can, now, see the distributions in these rows:","e7e4a255":"The `LightlyActiveMinutes` distribution is very symmetric with no peak at very few minutes of activity. Users who log the entire day may end up registering a lot of `LightlyActiveMinutes` while those who log only a part of the day might be registering only activities with higher demand.\n\nLet's see the distribution of total logged time in this second group.","bb8a9bce":"### **Sleeping habits for each user group**","10af22a9":"We see that the minimum is 0 (seems like an outlier since 0 calories burned in a day is impossible) and the maximum is 2664. We can also see some quartiles along with mean and standard deviation.\n\nLet's inspect the possible outliers:","51632401":"To get a visual on how this distribution depends on weekends we can use our `weekend_check` dataframe and use a facetplot to see two graphs (for weekend being true or false). Besides this, I'll normalize the distributions so we can compare both graphs (because there a lot fewer weekends than week days - sadly...).","a4c3f25b":"The date now is in the proper `YYYY-MM-DD` format.\n\n* For the activity table:","8d54b2a6":"There is no clear distinction between the days of the week. However we can see that sunday has the largest median for `TotalMinutesAsleep` and saturday appears to be the most spread oout distribution.","4a8b24c7":"Once more, as expected the amount of calories burned in a day grows as the user takes more steps. An inetersting fact is that the intercept of the regression line represents the amount of burned calories in a day with **no steps** taken. This is the amount of calories users are burning in a very sedentary day. According to the [Healthline site](https:\/\/www.healthline.com\/health\/calories-burned-sleeping#Determining-how-many-calories-you-burn), this number corresponds to the *basal metabolic rate*:\n\n> Your basal metabolic rate (BMR), on the other hand, represents the number of calories you individually burn a day at rest, or while you\u2019re sedentary. This includes sleeping and sitting.\n\nThis value can be calculated (again referring to [Healthline](https:\/\/www.healthline.com\/health\/calories-burned-sleeping#Determining-how-many-calories-you-burn)) if we know the user's sex, weight, height and  age. In their own calculations, a 35-year-old man who weighs 175 pounds and is 5 feet 11 inches would have a *BMR* of 1,816 calories and a 35-year-old woman who weighs 135 pounds and is 5 feet, 5 inches would have a *BMR* of 1,383 calories.\n\nTo compare these estimates with our data, we can get the intercept value using the [scikit-learn](https:\/\/scikit-learn.org\/stable\/) package. First of all, we'll do the necessary imports.\n","af37f0ce":"# \ud83d\udcca**Share**\n\n<p><img style=\"float: left; padding-right: 10px\" src=\"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAA8FBMVEX+kHn\/\/\/\/8\/\/\/\/jnf9kHr\/\/v\/\/inH8i3L1z8X8\/Pv40sjyppX4p5f5\/\/\/\/\/v7+kHj\/+\/\/8kXf\/jnv\/j3P0\/\/\/\/\/\/r7kXr\/jnD+j3z\/i3f6\/\/z1jHT\/i3v\/j27\/iXX+jnX8knP5r5788u70s6z03c\/9jYD87Ovxknv3lXX33Nb75eH359zurp73mob3oI35hHTwv6r5m5D3qqHzv7P56u379ur4uqz1lGz1sZn9t7XrlH70zrjssZz3nYry0ML+jmb17t325NH0xL3+4eTriXjqsKPxlnz2x7jtn4T+z8342Mn3npnttbHxmHT\/gXT\/9P\/hDeI8AAAQN0lEQVR4nO2dCVPbOBvHY8mS4iTyGfmMY2MIiXNAIYWybNl2KRRou\/t+\/2\/zylDADiFxINfO6Lc7sztN4uofHc+hR0qlIhAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCATvAEIom6bp8v8hhlGBJIosK9Jk1zQh9MxNN28J2JplxTFpY2KPDho7nOP6wcg+JOEXy7DtTTdvGXhedNipf6j1E0VVwT1Ksj+o7h4ZxIk23br3IsvQIlef9xKFcmG+z8X5\/B8J6UDiOmtDG8NNt\/HttExZc8LgOGVAehW2Vydty+hYsfHfk2pbYTgaJ7TZROhVhQCgj6ddz\/b4grTpBi+M5Y3GJ5Kk64i+3ocSkyT68fRThS+3m27wQpiG4fV29ymiPh+jr3ch70MgKZR+PLuCGp+1m253eQzoHaQIsBmdN6E0vcBR5T80UuPDPxigQC2tEDWTXWKR\/4pCOersNXVJReUV6vz7SM+j\/8JcNAzTchqJBCjj5q+0Ql\/hJnJw0OYukLZpCbOBMLLaZ0lpZXkoPakH1pYPVCPyWvhap+U7LwfQgTL8Ard7QdWslnvKmuXnXw7utHJP7trY7lEqw\/AaSQULqCqMMsaXEu6H9mvVm2q1mnInvMnfpCq+X+hEiRuYnXbkbvGCEznDZHKEAqTrkpL8+fnCNgkHYxJ0L3arCQWUvzLxXpCcyW1j0zpeJzpIJl00FTX9k78awaFn9Gy7xwNC2TA0+CXuNmqsOfFuikDzpNGON63jVeDVR8mfmIQAfBx3XRgbEQeapqZprmvCjhs58VF10utBVEf9rrmlc9E1OnuTI5RJyp8xmfLmew0QB9X7dTc\/soG098Vuydso0gxPJ+agisCgfoi91w1Aq3024LNPLSiUfmGrt42rTXRxMjGtALvrYCu2X1dohGGnypr5JdVHVDkn8bYp1FzDjFOqFBUqu8SpGPaMxmqyawVjhebsC+Dx5N6htW2G3+jEeMfXC30BkiEu81mZDBWAWP6z6Gz7FMqhtU\/1wnxiw2lLzEtkKDf4klv47Nd\/49U2eGGIjT\/wMZqP5pVhyXCPe+t4yEDe+AOwG6+2wQtjWt0EKE8DDfAx91mesYbmgVDTwjFAEnqyGr7+NZCNaJt8G9cZF2wa8u\/iygKBkCHvAfCckwM628UR3CaFpLtfsBS0H5sLCNQ64fk+N5+PEhmg32Qsb5PFIMNC2klnjdCrLNCJMG4PdfVpGDAfsXq711phixeFpOBxEiJVRfTGiBf6vGbDuCblsuOqVMXuYs9YKXCUPK0SKHO2z6G16DNIvbgWD7qthZ+xOsgHoD7OQwSoNCaLpz4h+QHyCtUh3qJ5iPeaSvNJoZTcfll8lZDxQX4uI1AN3VW09Q3ArtPNZ9cYqL7F54Jd\/HfO4qBmv\/VpS1w3aDs7OZcLAL3+po1PDX\/ID1KajMJlN\/WNQM25LNrCN+0FGqZlFxOtx6Uc9zUAYyfNDS+FXr7puzeiuN3PPYdJY7wlo7T1j1b47v16+y0t0ywjGIPnNI8i1bCmbYXjZsYjllvmAY\/Q3\/TdyxquS+Bps0MBfeJY25EgJg0\/p5B+C5yFl3kIIbEIOVefwkTAaHJlkqySYfNjFQ9pXuEdceZ\/BkKTI2ehE8ZR8P1257RaS\/t5twYo6d347DzAuGK6trHBUgYbjwtL6Rhb862FYcRxLybY6t5eX6ZJonBH4cV+DgCAKf3q9XfihBV5c+VFsnOTdyjBKSkxeQxiWe3g9rS2n2WvKKVgyn4VD6dQ9udJbee74zgbW3Vk58+CQ7mDSyiM2259nJ743IsF2b6TqigvFWZ\/zhh\/OGX7Nxe4XNpnBUBcLaSR6niWQFv2NMvR3NMBy4YhVwGmdV9hqKr3HXl3YUStlmysP+LIFOabVJ\/lipgw7hHvYpxQoL+mabpQCk4uO7Fhxb21KXtkIYW2gQ\/Pb7g+4L+mZSpIz+bk1zPX20BMtZBCzYlvkiyvDdTFdooBY2pmQM7x+mOq8go9GH\/a+biQsBco12Fv3c5ceYVxeFWT6GLDcwKAUJWQkpnYZVFaIWzXE5Dt379HIX9AbRRto0I5ioJTBShsarnpb4uh\/p6c2X\/9h3piaaJ2k6moORhl1dXbphA6waX+0jH7LYf\/m6mhTXoPAJTquq4ybi2zeuKJr4MODgwjWp\/EUgrlsFPz+YI\/pRLzobPutSrJfv83gyTJNtzAtOojCga3bbg+N7WUQnhVA00wtVqYUokl\/drl6U79omsH8j227bqdxjhNpnxC53\/WP19jEXwJhT1IUnC\/+\/aUN866M6ttl1j\/7vSgy2Mki2ACI0vjsaIGNcOwbYKD7vFdArJC3Fz3g2zeDr4T2V6T0ZivsBWTS6m4gmbWm3HR6a+jq8B73ZOFITn\/cMKyLGxhACDpR4CN7VGIP08WEinZcsIDhsDizFr8Ywvi7mlCfb+Q8+dO0dgjxnqsxnyF1k9lcr3QAeuffudDM7Jnb8PJsut65PxG8Ys5fx5xHEdrmouzFVp2BXYHoBD9IZ3R5NR2Ilk2ZNN8qGC35RY3AZGVnYeKIOSLjfYgXdNsPjWHA8BjyeeRqmZ7N2vybeYpdJxLvxBAIkpR9cibSP3LfEBijElkOSE0bB4mGTl7YB6e73HTWOzGO7yeTpwzSt3wVm+iosLk1ydiTcR5phG7jYyD0SggDvE8L\/eqbX9xq6xgHXnw31hP2D9boW06NclX8u423W98iQxtYvqZRvsn4yiKkmTmcTjK17ZpkRlbNwWDynSaumtxbGYrdJ1hfg4Cn0n9C9x7OYFcLdzNP4b2J9I9Mvf7eJiInr8sFXxu\/+O9eNLSma3QJLV8HoZR2u9Aa0qz5MgpPAfUyEQH2U6vJjX1\/Bf299Xkm1bBbIXku0JzG58q2D\/A8ZQurBgkGBQU7uIJz1O2wvM+RfmSCHCN4xVK+81shc4H+mwqkESTW6LBaakWm4zygRUCx5MKI9m16idSoQCu31uDXzOnD9PM43r4wiWdgsvwFUdEdk7znY1OuvYUW9DKChmf8dHtGkziTIWwyx3nx5cZaA66oTa9TdBLm\/nnpIE8RaFxmN8K53FUdQ3bGbMV1gF6qgRilA2xZk5XaB3p+U066Y8YTlGo4Xohz8r+1129xNcV8mWuUO+GwOAKTj1lCE07q1h5iq2Y7h\/HUx2WT+0a0J928wCjDUeGK15PZynMzP0TQAd\/tac\/Q4aWPKD64xRTmZ50LWvKgmRa5AIg\/7EfqUKrYWXx8qTFmKEQ8sg39wqQXiuqtWO8g553IRmj1TYxpik0CN579t0QoyfEXHWZ5kyFwbfcK1Q9eGXzFPY6WezwKJEiv4Gn7onCXoQbz52tc9dtVLE2NkoNMz4c5PvQ78TTnxFZu5QHRI8KFTAwpleXakYFdk6eiqeysttTb5FK1rcwQ2GroJDPn6N4+jPw1dfiVtTljKjB\/FEo9awSeXMKzd6\/\/ZxCnTZeWRPIZTNvKQA7mlELYA0Lxx76K9\/in60wt9Lw6XM6PeMPb\/3\/5Z0xfe8wfNVXkcOjwp5qsvL7GGZafPInAo\/WCyCaYm4PJ5ZIm\/R6zeePI5UhOvJmGACvWzgCyM7jja2l2YtnElCfyrepcoutyUNCrU9uP\/955oM0MGflJ4J+QWEjXoGqPLMVjhh9zGAg3va9wJr8woNOIWpSeJB8ELszAlu7UEcn+TurPiQ1O7bw9uljKhEhRfd3LUvTHo6k2xXT5GFhN0WFgAhJf+HQnVHFbuNq\/u8Dn6MVl7zPVhhWC0s7SM6I6T74ppphGFH7oM8KmVAATo5mH+jWyE1B4am14o3v2QpxQ80nyPymvktI9JBni6wwOE2Any8ak\/Tm8Zwc4QuFZKMKTSfNh6wIUfajTsL7s0DeVSNt6mji9pM0mJMj3LI+NMMhyo5gPI1BRafo7tfo6mpUHw8Y0JmU31ViIDnqzTFvWZlZQeGq79OYrRBafG0HLJ8R5mEg8rPUqPSiGoq\/cwidOQ02w78KKaudzSq0rfaQUb94aDs7ia\/rL3eEGQDj2InnpF5kq2AtlM3aQx7QWeTHxGqJuJ\/j+0B9UTSE1L8CCOeNUs3u582LerBRnyazCbB7UrxuiPfdQ\/8VPufrqp8GUUWet0HvdU8KRzntVe+yzd8\/jH8qs27DeuzappSeQ21+AUL7IF91LSXB5BbIspmrUI7\/\/axK8+qEEPLTK1ImSc+NRX6UpmTjCrlv7VyXuLIm7WK5N3\/Ayc7fBTfv0pl1Hn4ZlKjFkCt4qDQBmloylFXTcKOojIk1f4RCzXC6+lNy3OfuwhmZZ17eS7maqOB2ACY2cXPo0tdhy5q6n1FEgx4e5x6CmpJN5pmX91JOoRWe104mb2t5aCRfVpVat231SpRWGLDlJehpC4cB2sdw1VXDJWsTXS0e9u9Lu9HDyLx\/c1bQJqn9eov0YJmLBSPLrfNB\/XywBlw60UazGAUc+7qPssI8HgxnTpuE+MCVkvQsLt1EGHr5HDNSwO0m9y0m0AgOu\/W7\/d99eF92oKc3t+YClwrF+DiX0+HP6QdLETGT8n0od0zHId2fu9W9rPwwrV0OzwMrgm6n9F9mdfbzChkdr+FwQvk+tLLqIBg5DiYBBxLs8PUzMoxy1QbcGTC8y0I5poJuN16psERsDTo7E058uuroN2N9CiPvYp8WQi5WX8fVZ2tTaFjdPvALRdFp6G7TPHwXGuTuWsqt6NNGcbYV\/JOso6J9PQqhR7pp4SQDQ7S2BlNRWZNCGcKjVCo4fQpNvq\/nHNt6+pAcJFQtFABKdEzWUwY9qbBR5oRlaWLZNVrECcZFM8F8QL+RNd0I9qIPl1pMx1eYT05wnPoof2CK+7PNk3PnleKjZaMVFYLhUmuTbdg+PLrj4fNEaInYkIRrOsgO8SXN3\/xxg7P68\/dT0bQoIp493PMpH6F+cYMK3BBorOmOc+jsNnNlBjQ58\/AyIIQEFzuXycsrpVWJglp3fYdmzLhwp4IC9Juder3eeCdnp+NaP7s2m04eGGa63vwWrHrDKUfrU+ekOICAsgRUQJtNgJT7ULmokKrpaJ1n11s9vAfYU4klpaqOHoPct\/NwtpmryTJ0+UU0u5wn\/cdxV12ul8O0nV2J6u86\/FqaTLVfu1rvzTWaSTofi+XXq0OllN284fKUdxF3DGfMpPUo9GkyJNCK16rQcI3I7TdXrxBwX42mB9wZXf89ynJYT5rzm\/hOGKPK5VV7I\/fUyaG1O+1ukqWiApDe4jKbG6ug4\/R+ldhdeh\/7O1\/4DJQ3dCOmXMGfs58DeFl88E6yn8HiRlFXBsP2pn\/74nCUUvpcprckHn7L5WTvNiAbvwqz53T+2AcltrMXggIlSXc7rt0yN\/4zdLIJHfvDXjK\/1aVRk\/30st7NcuNRXOJ+rdWjWW35YmdcrS2B6s34enhhk+36iSQtgqaHnZAsAydj1QcNFgZqkWbb2jJifFc2+KO6G598kxhGBJfKpgUJBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFgpfwfMNJaIMEtC7YAAAAASUVORK5CYII=\" width=\"150\"><\/p>\n\nNow that we have our analysis and found some interesting patterns, let's try to answer our original business question through a story told by our main visuals.\n\nJust as a reminder, we phrased our question as\n> **How current user trends can guide marketing strategy?**\n\n---\n\nBefore we start *telling our story with the data*, let's set the color palette for our graphs to match that of the company logo (as seen to the left). We can easily do this with Seaborn's `set_pallete()` method. To improve readability, we will also increase overall font sizes with the `set_context()` method.\n\nWe'll start our sharing with some basic descriptions. Our dataset has data on **33 different users** who logged their daily activities during the period **between 03.12.2016-05.12.2016**. \n\n## **Describing the data**\n\nThe main data on daily activities is in the `full_dailyActivity_df` and we can get descriptive statistics with the `describe()` method:","a1faa771":"## Checking for redundant information\n\nWe will work with the tables with daily logs of activitys. There are a total of 5 tables with `daily` our `Day` in their names. Let's inspect them for redundant information.\n\nTo take a closer look at the daily data, let's read table `dailyActivity_merged` as a dataframe.","0f8c31d1":"Having this we can use the `pandas` library to insert all files as tables in our **fitbit.db** database. We do this by first reading the file as a pandas dataframe object (using the `read_csv` method) then we insert it into the database using the `to_sql` method with the proper connection to the database.","9826e41e":"## Data reagrding sleeping habbits\n\nBeyond our `dailyActivity_merged` table, there is a separate table holding sleep information. We can do a query to inspect the table.","65e04297":"So, tables `dailyIntensities_merged`, `dailySteps_merged` and `dailyCalories_merged`  will not be used further as all information on them is contained in table `dailyActivity_merged`.","9fdc1cb1":"It seems there are two groups of users based on the distribution of `SedentaryMinutes`.\nWe can see the average `SedentaryMinutes` per user:","27cb0589":"We saved the resulting query in a larger dataframe named `full_dailyActivity_df`. The first 5 rows of this dataframe are as follows.","eabbb685":"A bar plot will be nice to visually see this numbers:","23e4a686":"With the fitted model, we can get the intercept value and the slope as follows.","c88eb86e":"## Updating table to better read date information\n\nWe can update the ActivityDate column in `dailyActivity_merged` table to match the standard **YYY-MM-DD** from SQLite.\n\n* **RUN THIS ONLY ONCE AT IT CHANGES THE DATABASE**","b1334b1e":"We repeat the same process for column `Calories` in `dailyCalories_merged`:","4f3adfb0":"## **Initial exploratory visualizations**\n\n### **How users spend their activity time?**\n\nIn our `dailyActivity_df` there are four measures of how users spend their time:\n* `VeryActiveMinutes` that lead to `VeryActiveDistance`\n* `FairlyActiveMinutes` that lead to `ModeratelyActiveDistance`\n* `VeryLightlyActiveMinutes` that lead to `LightActiveDistance`\n* `SedentaryMinutes` that lead to `SedentaryActiveDistance`\n\nWe can plot each pair in a **scatter plot** (*Distance vs. *Minutes) with a regression line to get estimate of the *speed* of users during these activities.\nTo ease the comparison, we'll plot all four graphs with  shared y-scale.","2d3d5366":"We do the same for the `dailyIntensities_merged` table.","74d67a78":"We can order this plot by the day of the week:","38948e2f":"Checking for integrity of our path list (should contain 18 file paths):","19e9d202":"It seems there are two groups of users based on the distribution of `SedentaryMinutes`.\nWe can do a query to get the average `SedentaryMinutes` per user:","f830fdff":"Now we can check if the updates are correct:\n\n* For the sleep table:","02fc795d":"We can create a column to identify this user group. We'll call group 1 those with `SedentaryMinutes` above average and group 0, those bellow.","61e99ac2":"#### **For the less sedentary group, is there a difference in the shape of the distribution on weekends?**","e527871a":"List of all file paths containing data from Fitbit users:","2d894662":"**In SQL**: we can have this same output using SQL:"}}