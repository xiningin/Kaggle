{"cell_type":{"c655a990":"code","b6e3cf5b":"code","8cc68b94":"code","e02aefa6":"code","6efbe2f9":"code","abf5a4cb":"code","cd925434":"code","fac813e3":"code","2e9b6067":"code","744c7d67":"code","8c5a1486":"code","33bfebf3":"code","1d5216fb":"code","364090b5":"code","8c99a727":"code","e8b5f323":"code","607f5379":"markdown","2d25e12e":"markdown","254223f6":"markdown","b6fcc3b2":"markdown","7884804e":"markdown","0d008318":"markdown","40b72e37":"markdown","a3f35398":"markdown","1155654f":"markdown","2550f4cc":"markdown","d916451d":"markdown","21ff7700":"markdown","e20087f7":"markdown","b2641f6b":"markdown","9bc3bc16":"markdown"},"source":{"c655a990":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.preprocessing import OneHotEncoder\nfrom sklearn.preprocessing import LabelEncoder\nfrom sklearn.impute import SimpleImputer\n\ndt=pd.read_csv('..\/input\/cars4u\/used_cars_data.csv')\ndt.head(10)","b6e3cf5b":"%matplotlib inline","8cc68b94":"dt.info()","e02aefa6":"dt['Mileage'] = dt['Mileage'].map(lambda x: str(x).rstrip(' km\/plkm\/kg'))\ndt['Mileage']=dt['Mileage'].astype(str).astype(float)\ndt['Engine'] = dt['Engine'].map(lambda x: str(x).rstrip('  CC'))\ndt['Engine']=dt['Engine'].astype(str).astype(float)\n\ndt['Power'] = dt['Power'].map(lambda x: str(x).strip('null bhpa'))\ndt.replace(\"\",np.NaN,inplace=True)\ndt['Power']=dt['Power'].astype(str).astype(float)\ndt.drop([\"New_Price\"],axis=1,inplace=True)\n\nOH_encoder = OneHotEncoder(handle_unknown='ignore', sparse=False)\nOH_cols_train = pd.DataFrame(OH_encoder.fit_transform(dt[[\"Location\"]]))\nOH_cols_train.columns=OH_encoder.get_feature_names([\"Location\"])\ndt = dt.drop([\"Location\"], axis=1)\ndt = pd.concat([dt, OH_cols_train], axis=1)\nlabel_encoder=LabelEncoder()\ndt[\"Fuel_Type\"] = label_encoder.fit_transform(dt[\"Fuel_Type\"])\ndt['Transmission']=label_encoder.fit_transform(dt[\"Transmission\"])\ndt[\"Owner_Type\"]=label_encoder.fit_transform(dt[\"Owner_Type\"])\ndt_num = dt.drop(\"Name\", axis=1)\nimputer = SimpleImputer(strategy=\"median\")\nimputer.fit(dt_num)\nX=imputer.transform(dt_num)\ndt = pd.DataFrame(X, columns=dt_num.columns)\n\n\ndt.info()","6efbe2f9":"\ndt[\"Performance_measure\"] = (dt[\"Mileage\"]+dt[\"Engine\"]+dt[\"Power\"])\/3\ndt.drop([\"Mileage\",\"Engine\",\"Power\"],axis=1,inplace=True)\n","abf5a4cb":"\ndt.drop(['S.No.'],axis=1,inplace=True)\ndt.info()","cd925434":"X=dt.drop([\"Price\"],axis=1)\ny=dt[\"Price\"]","fac813e3":"from sklearn.model_selection import train_test_split\nXtrain,Xval,ytrain,yval=train_test_split(X,y,test_size=0.2,random_state=42)","2e9b6067":"plt.hist(Xtrain[\"Location_Mumbai\"],alpha=0.5,label=\"Mumbai\",bins=100)\nplt.hist(Xtrain[\"Location_Pune\"], bins=100, alpha=0.5, label=\"Pune\")\nplt.hist(Xtrain[\"Location_Kolkata\"], bins=100, alpha=0.5, label=\"Kolkata\")\nplt.hist(Xtrain[\"Location_Kochi\"], bins=100, alpha=0.5, label=\"Kochi\")\nplt.hist(Xtrain[\"Location_Jaipur\"], bins=100, alpha=0.5, label=\"Jaipur\")\nplt.hist(Xtrain[\"Location_Hyderabad\"], bins=100, alpha=0.5, label=\"Hyderabad\")\nplt.hist(Xtrain[\"Location_Delhi\"], bins=100, alpha=0.5, label=\"Delhi\")\nplt.hist(Xtrain[\"Location_Coimbatore\"], bins=100, alpha=0.5, label=\"Coimbatore\")\nplt.hist(Xtrain[\"Location_Chennai\"], bins=100, alpha=0.5, label=\"Chennai\")\nplt.hist(Xtrain[\"Location_Bangalore\"], bins=100, alpha=0.5, label=\"Bangalore\")\nplt.hist(Xtrain[\"Location_Ahmedabad\"], bins=100, alpha=0.5, label=\"Ahmedabad\")\nplt.xlabel(\"Location\", size=14)\nplt.ylabel(\"Count\", size=14)\nplt.title(\"Location Histogram\")\nplt.legend(loc=1, prop={\"size\":8})\n","744c7d67":"plt.scatter(Xtrain[\"Location_Mumbai\"],ytrain,alpha=0.5)\nplt.xlabel(\"Location Mumbai\")\nplt.ylabel(\"Price\")","8c5a1486":"plt.scatter(Xtrain[\"Location_Pune\"],ytrain,alpha=0.5)\nplt.xlabel(\"Location Pune\")\nplt.ylabel(\"Price\")","33bfebf3":"plt.scatter(Xtrain[\"Performance_measure\"],Xtrain[\"Year\"],alpha=0.7)\nplt.xlabel(\"Performance_measure\")\nplt.ylabel(\"Year\")\nplt.title(\"Performance_measure V\/s Year\")","1d5216fb":"plt.scatter(Xtrain[\"Year\"],ytrain,alpha=0.5)\nplt.xlabel(\"Year\")\nplt.ylabel(\"Price\")\nplt.title(\"Year V\/s Price\")","364090b5":"plt.scatter(Xtrain[\"Seats\"],ytrain,alpha=0.5)\nplt.xlabel(\"Seats\")\nplt.ylabel(\"Price\")\nplt.title(\"Seats v\/s Price\")","8c99a727":"plt.hist(Xtrain[\"Seats\"],alpha=0.5)\nplt.xlabel(\"# Seats\")\nplt.ylabel(\"Count\")\n(plt.title(\"Histogram of Seats feature\"))","e8b5f323":"from sklearn.ensemble import RandomForestRegressor\nfrom sklearn.metrics import mean_squared_error\nrf_reg=RandomForestRegressor()\nrf_reg.fit(Xtrain,ytrain)\np=rf_reg.predict(Xval)\nlin_mse = mean_squared_error(yval,p)\nlin_rmse = np.sqrt(lin_mse)\nprint(lin_rmse)","607f5379":"# Predictions\n<p1>For Predicting the resale value of a given car we can use the following procedure<\/p1>","2d25e12e":"<p1>Inspecting the graphs Most Cars Are maufactured in Mumbai as shown in the histogram<\/p1><br>\n<p1>One possible reason is The resale value of cars made in mumbai is much higher than the ones made in pune for example<\/p1>\n","254223f6":"<p1> We try and convert the features Mileage Engine Power into a metric called Performance_measure<\/p1><br>\n","b6fcc3b2":"The Data consists of several object types which could be converted to float types to hwlp contribute to the analysis.\nthe Data also consists of several null values which we can process during the data cleaning steps.","7884804e":"1>To clean cells like Mileage engine etc we have to delete the scripts appearing after the numerical values and convert it to float data type.<br>\n2>We have to transform Categorical features using onehotencoder or label encoder to numerical features.<br>\n3>All of the former is done in the cells below:\n","0d008318":"<hr><p1>Here we remove the new price column as it does not contain enough entries<\/p1><br>\n<p1>We encoded location wiith the help of one hot encoder and the rest of the categorical variables with the help of the label encoder<p1><br>","40b72e37":"# Visualisations \n<p1> Here are some analysis points with the help of visualisations<\/p1>","a3f35398":"## Data Cleaning\n","1155654f":"# Splitting The data<br>\n<p1> Here we split the data using scikit-learn's train_test_split Function<\/p1>","2550f4cc":"Therefore the Root_Mean_squared_error is around 5 using a random forest regressor ","d916451d":"To Start with I wll be importing the necessary modules and read the csv file\n","21ff7700":"<p1>The Two Graphs above display certain pecularities ie. They are distinctly similiar<\/p1><br>\n<p1>This provides a link of the concrete relationship between number of seats manufactured and the resale value of cars with a certain number of seats<\/p1><br>\n<p1>The car manufacturers are compelled to make 5 seater or 7 seater vehicles as people prefer those cars as they satisfy the family requirements<\/p1><br>\n<p1>This gives us a slight hint of the process of natural selection occuring during car manufacturing as those cars are selected to be produced which satisfy the family demands of transportion ie 5 seater or 7 vehicles and boost resale value<br>All other vehicles are are produced on a lesser scale as the market dictates that they are not in demand>\/p1> \n","e20087f7":"<p1>As you can see it very clear from the graph above that The year of manufacture has a sustained impact on the resale value of the car<\/p><br>\n<p1>The later the car was manufactured the higher the resale value<\/p1><br>\n<p1>One reason for this could be that The later the car was manufactured the better the performance measure wasduring the time of sale as highlighed by the Perfomance measure V\/s Year Graph<\/p1>\n","b2641f6b":"# Preparing The data<br>\n## Feature Engineering<br>","9bc3bc16":"# Used Cars Dataset Analysis\n"}}