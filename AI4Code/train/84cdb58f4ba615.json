{"cell_type":{"200e696c":"code","00983ec9":"code","23f74e9a":"code","5d4f48a6":"code","cb3f1f7a":"code","35116e0b":"code","7dc280d5":"code","e6a5994f":"code","02d4dccf":"code","c74ca01e":"code","80644e6c":"code","8d17ef5b":"code","54defa8e":"code","a8622dd7":"code","f08aa96c":"code","92e99619":"code","65b6a535":"markdown","2693a98c":"markdown","d2fa0d5a":"markdown","7cdef430":"markdown","8ab47fc8":"markdown","424384b5":"markdown","eeac3ba6":"markdown","2f7c1e79":"markdown","aaa15ca2":"markdown","e116f536":"markdown","590f3e19":"markdown","bb8a79b2":"markdown","716997b2":"markdown","0fca8e7b":"markdown","4f9bd2c8":"markdown","864a01b7":"markdown"},"source":{"200e696c":"#import packages\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set_style('dark')\n\n# import statsmodels.api as sm\n# from shutil import copyfile\n\n# # copy our file into the working directory (make sure it has .py suffix)\n# copyfile(src = \"..\/input\/demandanalysishelperfunctions\/features_preprocessing.py\", \n#          dst = \"..\/working\/features_preprocessing.py\")\n\n# #import features_preprocessing\n# import features_preprocessing\n\n\n#import the dataset\ndata = pd.read_csv('\/kaggle\/input\/energy-consumption-generation-prices-and-weather\/energy_dataset.csv',\n                   index_col=0,\n                   parse_dates=[0])\n\n#set the index to datetime\ndata.index = pd.to_datetime(data.index, utc=True)\n#analyze 2015 to 2018 data inclusive\ndata = data['2015':'2018']\nprint(data.columns)","00983ec9":"load = data['total load actual']\nforecast = data['total load forecast']\nload.head(), forecast.head()","23f74e9a":"df_demand = pd.concat([load, forecast], axis=1)\ndf_demand.columns = ['load', 'forecast']\ndf_demand.describe()","5d4f48a6":"fig, ax = plt.subplots(figsize=(10, 6))\nsns.distplot(df_demand['load'].dropna(), ax=ax, kde=False).set_title('load', fontsize=16)\nsns.distplot(df_demand['forecast'].dropna(), ax=ax, kde=False).set_title('forecast', fontsize=16)\nplt.xlabel('MW Power', fontsize=15)\nplt.legend(['load', 'forecast'])\nax.set_yticks(np.linspace(0, 1500, 9))\nplt.title('Distribution of energy demanded and TSO 1 day forecasts')\nplt.show()","cb3f1f7a":"#group data by year\ngroups = df_demand['load'].groupby(pd.Grouper(freq='A'))\n\n#set figure and axis\nfig, axs = plt.subplots(len(groups), 1, figsize=(15,15))\n\n\nfor ax, (name, group) in zip(axs, groups):\n    \n    #plot the data\n    ax.plot(pd.Series(group.values))\n\n    ax.set_xlabel('Hour of Year')\n    ax.set_ylabel('Total Load')\n    ax.set_title(name.year)\n    plt.subplots_adjust(hspace=0.5)","35116e0b":"group_hours = df_demand['load'].groupby(pd.Grouper(freq='D', how='mean'))\n\nfig, axs = plt.subplots(1,1, figsize=(8,7))\n\nyear_demands = pd.DataFrame()\n    \nfor name, group in group_hours:\n    year_demands[name.year] = pd.Series(group.values)\n    \nyear_demands.plot(ax=axs)\naxs.set_xlabel('Hour of the day')\naxs.set_ylabel('Energy Demanded MWh')\naxs.set_title('Mean yearly energy demand by hour of the day ');","7dc280d5":"#group data by year\ngroups = df_demand['load'].groupby(pd.Grouper(freq='A'))\n\n#set figure and axis\nfig, axs = plt.subplots(1, 1, figsize=(8,5))\n\n\nfor name, group in groups:\n    \n    sorted_load_count = pd.Series(group.values).sort_values(ascending=False).reset_index()\n    sorted_load_count.drop('index', axis=1, inplace=True)\n    #plot the data\n    axs.plot(sorted_load_count)\n    axs.set_xlabel('Cumulative Hours')\n    axs.set_ylabel('Total Load')\n    axs.set_title('Load Duration Curve 2015-2018')\naxs.legend(['2015', '2016', '2017', '2018'])","e6a5994f":"fig, axs = plt.subplots(1, 2, figsize=(15,5))\n\nfor ax, col in zip(axs, df_demand.columns):\n    groups = df_demand[col].groupby(pd.Grouper(freq='A'))\n\n    df = pd.DataFrame()\n\n    for name, group in groups:\n        df[name.year] = pd.Series(group.values)\n\n    df.boxplot(ax=ax)\n    ax.set_xlabel('Year')\n    ax.set_ylabel('Total Load')\n    ax.set_title(col)","02d4dccf":"fig, axs = plt.subplots(1, 1, figsize=(8,5))\n\ndf = pd.DataFrame()\n\ngroups = df_demand['load'].groupby(pd.Grouper(freq='A'))\n\nfor name, group in groups:\n    df[name.year] = pd.Series(group.values)\n\ndf.boxplot(ax=axs)\naxs.set_xlabel('Year')\naxs.set_ylabel('Total Load')\naxs.set_title('load')","c74ca01e":"#group data by year\ngroups = df_demand['load'].groupby(pd.Grouper(freq='M', how='mean'))\n\nfig, axs = plt.subplots(12, 1, figsize=(20,30))\n\nmonths=pd.DataFrame()\n\nfor ax, (name, group) in zip(axs, groups):\n    months[name.month] = pd.Series(group.values)\n    ax.set_title('Month: ' + str(name.month))\n    \nmonths.plot(ax=axs, subplots=True, legend=False)\nplt.subplots_adjust(hspace=0.5)\nplt.show()\n","80644e6c":"#set figure and axis\nfig, axs = plt.subplots(len(groups), 1, figsize=(15,100))\n\n\nfor ax, (name, group) in zip(axs, groups):\n    \n    #plot the data\n    ax.plot(pd.Series(group.values))\n\n    ax.set_xlabel('Hour of Year')\n    ax.set_ylabel('Total Load')\n    ax.set_title(\"Year: \" + str(name.year) + \" Month: \" + str(name.month))\n    plt.subplots_adjust(hspace=0.8)","8d17ef5b":"group_hours = df_demand['load'].groupby(pd.Grouper(freq='D', how='mean'))\n\nfig, axs = plt.subplots(1,1, figsize=(8,7))\n\ndf = pd.DataFrame()\n    \nmonths = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec']    \n\nfor name, group in group_hours:\n    df[name.month] = pd.Series(group.values)\n\n    \ncolors = ['gray', 'lightcoral', 'firebrick', 'chocolate', 'darkorange', 'gold', 'olive', 'palegreen', 'teal', 'skyblue', 'blueviolet', 'purple']\ndf.columns = months\ndf.plot(ax=axs, color=colors)\naxs.set_xlabel('Hour of the day')\naxs.set_ylabel('Energy Demanded MWh')\naxs.set_title('Mean monthly energy demand by hour of the day');","54defa8e":"#group data by year\ngroups = df_demand['load'].groupby(pd.Grouper(freq='M', how='mean'))\n\n#set figure and axis\nfig, axs = plt.subplots(1, 1, figsize=(12,8))\n\nload_curve = pd.DataFrame()\n\nfor name, group in groups:    \n    load_curve[name.month] = pd.Series(sorted(group.values, reverse=True))\n\n#plot the data\naxs.plot(load_curve)\naxs.set_xlabel('Cumulative Hours')\naxs.set_ylabel('Total Load')\naxs.set_title('Average Load Duration Curve Per Month')\naxs.legend(['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'])","a8622dd7":"fig, axs = plt.subplots(1, 1,  figsize=(8,5))\n\ngroups = df_demand['load'].groupby(pd.Grouper(freq='M'))\n\ndf = pd.DataFrame()\n\nfor name, group in groups:\n    df[name.month] = pd.Series(group.values)\n\ndf.boxplot(ax=axs)\naxs.set_xlabel('Month Year')\naxs.set_ylabel('Energy Demanded MWh')\naxs.set_title('Box plot month of year 2015-2018')\nplt.subplots_adjust(hspace=0.5)\n\n\nplt.show()","f08aa96c":"group_hours = df_demand['load'].groupby(pd.Grouper(freq='D', how='mean'))\n\nday_names = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun']\n\nfig, axs = plt.subplots(1,1, figsize=(8,7))\n\ndf = pd.DataFrame()\n    \nfor name, group in group_hours:\n    df[name.dayofweek] = pd.Series(group.values)\ndf = df.reindex(sorted(df.columns), axis=1)\ndf.columns = day_names\ndf.plot(ax=axs)\naxs.set_xlabel('Hour of the day')\naxs.set_ylabel('Energy Demanded MWh')\naxs.set_title('Mean day of the week energy demand profile by hour of the day');","92e99619":"fig, axs = plt.subplots(1, 1, figsize=(15,5))\n\ngroups = df_demand['load'].groupby(pd.Grouper(freq='D'))\n\ndf = pd.DataFrame()\n\nfor name, group in groups:\n    df[name.dayofweek] = pd.Series(group.values)\n\ndf = df.reindex(sorted(df.columns), axis=1)\ndf.columns = ['mon', 'tue', 'wed', 'thu', 'fri','sat', 'sun']\nprint(df.head())\n    \ndf.boxplot(ax=axs)\naxs.set_xlabel('Day of the week')\naxs.set_ylabel('Energy Demanded MWh')\naxs.set_title('Box plot mean energy demand day of the week')\nplt.subplots_adjust(hspace=0.5)\n\nplt.show()","65b6a535":"### Interweak demand by hour of the day","2693a98c":"## Interweak breakdown","d2fa0d5a":"# Energy Demand Analysis\n\nThis notebook is a work in progress EDA of energy demand for the [Hourly Energy Demand, Generation And Weather Dataset](https:\/\/www.kaggle.com\/nicholasjhana\/energy-consumption-generation-prices-and-weather). In its current form it breaks down trends in the demand data at yearly, monthly, and interweek timescales.\n\nQuestions for further development and exploration:\n- are energy consumers (retail & industrial) adjusting consumption based on variable energy price?\n- do weather features such as temperature, humidity, rainfall etc correlate to energy demand?\n    - [Some inspiration in this notebook](https:\/\/www.kaggle.com\/dimitriosroussis\/eda-cleaning-visualizations-ongoing-project\/notebook)\n- is there a relationship between holidays, and vacation periods and consumption?\n- does the data suggest the influence of major industrial consumers is shaping demand?\n    - pulling data on indsutry breakdown and industrial vs retail consumers could help here (if available)\n    \nIn the current version the notebook contains\n1. Inital descrption and Distribution\n2. Yearly Breakdowns\n    1. yearly consumption profiles\n    2. mean load per hour\n    3. load curves 2015-2018\n    4. box plot load and consumption\n3. Monthly Breakdowns\n    1. monthly average consumption profiles\n    2. monthly mean load per hour\n    3. average monthly load curve\n    4. box plot load and consumption\n4. Interweek breakdowns\n    1. Interweek average load by hour\n    2. daily load average box plots","7cdef430":"## Yearly Breakdowns","8ab47fc8":"## Monthly Breakdown","424384b5":"### Load duration curve","eeac3ba6":"### Box plots per year","2f7c1e79":"### Monthly actual consumption\nConsumption of each month for each year of the dataset","aaa15ca2":"### Monthly average consumption 2015-2018","e116f536":"### Inital descprtion\n\nIsolate only the actual demand and the TSO's 1 day advance forecasted demand.","590f3e19":"### Mean load per hour\n\nHave any demand cutting programmes come into effect in the country? I.e. demand response or energy savings insitatives?","bb8a79b2":"### Monthly average Load duration curves\n\nBUG: june and july curves?","716997b2":"### Monthly box plots","0fca8e7b":"### Mean monthly demand by hour of the day","4f9bd2c8":"### Yearly Consumption profiles","864a01b7":"### Day of the week box plots"}}