{"cell_type":{"124c92f3":"code","b27605b8":"code","206713a6":"code","8cc42ad9":"code","c23dbabe":"code","2bdc0cd5":"code","7aa74661":"markdown","26dac87e":"markdown","44a85314":"markdown","7d4d37f7":"markdown","76e2e803":"markdown","e22ae40f":"markdown"},"source":{"124c92f3":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom subprocess import check_output\n\nprint('Data sets imported:')\nprint(check_output([\"ls\", \"..\/input\"]).decode(\"utf8\"))","b27605b8":"attacks = pd.read_csv('..\/input\/gtd\/globalterrorismdb_0617dist.csv',\n                      encoding='ISO-8859-1',\n                      usecols=[0, 1, 2, 3, 7, 8, 13, 14, 98, 101])\nattacks.rename(columns={'eventid':'event_ID',\n                        'iyear':'year',\n                        'imonth':'month',\n                        'iday':'day',\n                        'country':'country_code',\n                        'country_txt':'country',\n                        'nkill':'number_killed',\n                        'nwound':'number_wounded',},inplace=True)\nattacks['number_killed'] = attacks['number_killed'].fillna(0).astype(int)\nattacks['number_wounded'] = attacks['number_wounded'].fillna(0).astype(int)\nattacks.loc[attacks.day==0,'day'] = 1\nattacks.loc[attacks.month==0,'month'] = 1\nattacks['date'] = pd.to_datetime(attacks[['day','month','year']])\nattacks = attacks.drop_duplicates(['date', 'latitude', 'longitude', 'number_killed'])\nattacks.set_index('date', inplace=True) #change the dataframe index to a date\nattacks_usa = attacks[(attacks.country == 'United States')] #reduce to just USA rows\nattacks_usa = attacks_usa[['number_killed','number_wounded']] #reduce the number of columns\nattacks_usa.head(5)","206713a6":"stocks = pd.read_csv('..\/input\/stock-time-series-20050101-to-20171231\/all_stocks_2006-01-01_to_2018-01-01.csv',\n                      encoding='ISO-8859-1')\nstocks.columns = [x.lower() for x in stocks.columns]\nstocks['date'] = pd.to_datetime(stocks['date'])\nstocks.set_index('date', inplace=True) #change the dataframe index to a date\nstocks = stocks.resample('D').mean()\nstocks = stocks[['close']] #reduce the number of columns\nstocks.dropna(axis=0,how='any',inplace=True)\nstocks.head(5)","8cc42ad9":"stocks['close_lagged'] = stocks.close.shift(1)\nstocks['close_diff'] = stocks['close'] - stocks['close_lagged']\nstocks = stocks[['close','close_diff']]\nstocks.dropna(axis=0,how='any',inplace=True)\nstocks.head(5)","c23dbabe":"plt.figure(figsize=(12, 5))\nplt.plot(attacks_usa.number_killed\/attacks_usa.number_killed.max())\nplt.plot(stocks.close\/stocks.close.max())\nplt.plot(stocks.close_diff\/stocks.close_diff.max())\nplt.legend(bbox_to_anchor=(0., 1.02, 1., .102), loc=3,\n           ncol=1, mode=\"expand\", borderaxespad=0.)\nplt.show()","2bdc0cd5":"cols = list(attacks_usa.columns)\nfor col in cols:\n    col_zscore = col + '_zscore'\n    attacks_usa[col_zscore] = (attacks_usa[col] - attacks_usa[col].mean())\/attacks_usa[col].std(ddof=0)\n\ncols = list(stocks.columns)\nfor col in cols:\n    col_zscore = col + '_zscore'\n    stocks[col_zscore] = (stocks[col] - stocks[col].mean())\/stocks[col].std(ddof=0)\n\nplt.figure(figsize=(12, 5))\nplt.plot(attacks_usa['number_killed_zscore'])\nplt.plot(stocks['close_zscore'])\nplt.legend(bbox_to_anchor=(0., 1.02, 1., .102), loc=3,\n           ncol=1, mode=\"expand\", borderaxespad=0.)\nplt.show()","7aa74661":"This notebook is a quick exploration of the Global Terrorism Database in relation to DJIA stock prices. I quickly realized that there isn't enough stock price data in this data set to overlap some of the major US terrorism events that I expected would show correlation to stock price. So I'm publishing this as just the start of a kernel and perhaps come back to it if a more complete set of stock price data is uploaded to Kaggle.","26dac87e":"Next, a similar import and cleanse approach was taken on the DJIA stock data as well.","44a85314":"Calculate the difference in stock by day.","7d4d37f7":"First, the Global Terrorism Database data set is imported and cleaned up.","76e2e803":"The graph below shows the number killed in US terrorist attacks by day compared to the DJIA stock price close by day. I then leveled both data sets to 0 to 1 so the scale would be consistent for visualizing.","e22ae40f":"I had planned to explore ARIMA or Pearson Correlation to compare the two time series data sets but instead I stopped working on this because of the lack of stock price data.\n\nFor fun, I also calculated some z scores on the chart below."}}