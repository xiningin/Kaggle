{"cell_type":{"19f0e93b":"code","11e47025":"code","e5f198dd":"code","c89e4181":"code","f073d692":"code","fb34900e":"code","542a76bf":"markdown","2579ec3d":"markdown","5c1d622c":"markdown","755ecbad":"markdown","af9e1045":"markdown","ccfbe0c5":"markdown","5c1a364d":"markdown","80fbb5d1":"markdown","964a0a6f":"markdown"},"source":{"19f0e93b":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport os\n\n# import module with custom plotting functions for this data\nos.chdir('..\/input\/euroleague-plotting-funcs')\nimport el_plotting_funcs as e\nos.chdir('..\/..\/working')","11e47025":"# read teams advanced stats\nteams_stats = pd.read_csv('..\/input\/euroleague-basketball-advanced-stats\/teams_advanced_stats.csv')\n\n# create a columns for highlighting teams in plots\nteams_stats['isMTA'] = teams_stats['team'].mask(cond=~(teams_stats['team'] == 'MTA'))\n\n# create subsets of team_stats only for relevant seasons\nteams_stats_2019 = teams_stats.loc[teams_stats['season'] == 2019]\nteams_stats_2018_19 = teams_stats.loc[teams_stats['season'].isin([2018, 2019])]","e5f198dd":"# set up subplots figure and axes\nfig, (ax0, ax1) = plt.subplots(1, 2, figsize=(14, 9), gridspec_kw={'width_ratios': [2, 1]})\n\n# plot net rating for teams in 2019\/20\ne.sorted_barplot(df=teams_stats_2019, metric='NETRtg', marked_teams=['MTA'], ax=ax0);\nax0.set_title('2019\/20 ' + ax0.get_title(), fontsize=16);\n\n# compare net rating of teams between 2018\/19 and 2019\/20\ne.plot_parallel_pairs(df=teams_stats_2018_19, metrics=['NETRtg'], marked_iv_values=['MTA'], ax=ax1)\nax1.set_title('Net rating by season', fontsize=16);","c89e4181":"# plot offensive vs defensive rating in 2019\/20\ntitle_suffix = '\\n(Teams above the line have a positive Net Rating)'\nxlabel_suffix = '\\n\\n<-- Worse defense\\t\\t\\t\\tBetter defense -->'.replace('\\t', '    ')\nylabel_prefix = '<-- Worse offense\\t\\t\\t\\tBetter offense -->\\n\\n'.replace('\\t', '    ')\n\nfig, ax = e.plot_bivariate(\n    df=teams_stats_2019, x='DRtg', y='ORtg', hue='isMTA', xyline=True,\n    show_season=False, dont_annotate_hue_na=False, text_size='large',\n    suptitle='Offensive vs Defensive Rating in 2019\/20 season' + title_suffix\n);\nax.set_xlabel(ax.get_xlabel() + xlabel_suffix); \nax.set_ylabel(ylabel_prefix + ax.get_ylabel());\nax.invert_xaxis()","f073d692":"# set up subplots figure and axes\nfig, (ax0, ax1) = plt.subplots(1, 2, figsize=(14, 9), gridspec_kw={'width_ratios': [2, 1]})\n\n# plot defensive ratings for teams in 2019\/20\ne.sorted_barplot(df=teams_stats_2019, metric='DRtg', marked_teams=['MTA'], ax=ax0);\nax0.set_title('2019\/20 ' + ax0.get_title(), fontsize=16);\n\n# compare teams defensive rating between 2018\/19 and 2019\/20\ne.plot_parallel_pairs(df=teams_stats_2018_19, metrics=['DRtg'], marked_iv_values=['MTA'], ax=ax1)\nax1.set_title('Defensive rating by season', fontsize=16);\nax1.invert_yaxis()","fb34900e":"defensive_metrics = ['OP_TS%', 'OP_AST-TOV_R', 'STLR', 'BLKR']\nfig, axes = plt.subplots(nrows=2, ncols=2, figsize=(16, 14))\n\nfor facet_num, metric in enumerate(defensive_metrics):\n    curr_ax = axes.ravel()[facet_num]\n    e.sorted_barplot(\n        df=teams_stats_2019, metric=metric, marked_teams=['MTA'], ax=curr_ax,\n        title_size=14, tick_fontsize=10\n    );\n    curr_ax.set_xlabel('')\n    curr_ax.set_ylabel('')","542a76bf":"# Defensive rating compared to other teams and previous season","2579ec3d":"# Net Rating compared to other teams and previous season","5c1d622c":"# Offensive VS Defensive Rating","755ecbad":"<font size=\"4.5\"><br>\n<li>Assist-Turnover ratio: Maccabi's opponents make only 1.1 assist per turnover, which is the best in the league by far<\/li><br>\n<li>True shooting %: Maccabi's opponents have only 54% true shooting, which is the best in the league<\/li>\n<font size=\"3.5\"><li style=\"margin-left:2em\">True shooting % measures shooting efficiency from 2-point and 3-point field goals and from free throws, with propoer adjustments<\/li><br><\/font>\n<li>Steals rate: Maccabi's defense steal balls on 11% of possessions, highest in the league by far<\/li><br>\n<li>Blocks rate: Maccabi's defense block shots on 7.2% of opponents 2-points attempts, which is slightly above average<\/li><br>\n<\/font>","af9e1045":"<font size=\"4.5\">\n<li>Maccabi has the 2nd best net rating this season<\/li><br>\n<li>Improved by about 10 points since last season, where they had average net rating<\/li>\n<\/font>","ccfbe0c5":"# A deeper look into defensive metrics","5c1a364d":"<font size=\"3.5\">* note that on the right plot, the y axis is reversed so higher means better defense<\/font><br>\n<font size=\"4.5\"><br>\n<li>Maccabi concede less than 103 points per 100 possessions<\/li><br>\n<li>Last season they had a defensive rating of over 109, which was also relatively good<\/li><br>\n<\/font>","80fbb5d1":"<font size=\"3.5\">* note that the x axis is reversed so more to the right means better defense<\/font><br>\n<font size=\"4.5\"><br>\n<li>Maccabi's high net rating comes mainly from defense<\/li><br>\n<li>Maccabi's defensive rating is the best in the league this season<\/li><br>\n<li>Maccabi's offensive rating is slightly above average<\/li><br>\n<\/font>","964a0a6f":"# Get data"}}