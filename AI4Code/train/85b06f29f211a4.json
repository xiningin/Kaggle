{"cell_type":{"25dcf2ba":"code","4bd72575":"code","81955637":"code","899d56bf":"code","c3d5562a":"code","267d6616":"code","689fa05d":"code","4c6bb066":"code","7cf9cc08":"code","b4ecad5e":"code","ea02fe58":"code","16fb8db5":"code","2d3dddca":"code","e1604845":"code","5e2375cd":"code","c3e65459":"code","7b447b20":"code","3cf301c3":"code","3c6b83a5":"code","1e08a6aa":"code","d538ce98":"code","11e1fb55":"code","4562bf0d":"code","884cf457":"code","cc7d0013":"code","79e955e7":"code","e6aa0b99":"markdown","0b628fb9":"markdown","d0209260":"markdown","77e50a68":"markdown","a0e7b042":"markdown","815e31b6":"markdown","ddaf4ea7":"markdown","1ff23513":"markdown","d6b21cde":"markdown","a7097104":"markdown","64725ffc":"markdown","b2d71585":"markdown","7f04d841":"markdown","7f1b2a9a":"markdown","a163b1cd":"markdown"},"source":{"25dcf2ba":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","4bd72575":"animes = pd.read_csv('\/kaggle\/input\/anime-recommendations-database\/anime.csv')\nratings = pd.read_csv('\/kaggle\/input\/anime-recommendations-database\/rating.csv')","81955637":"animes.head()","899d56bf":"dummies = pd.get_dummies(animes['genre'].str.get_dummies(sep=','))","c3d5562a":"import networkx as nx\nmatrix = np.asmatrix(dummies.corr())\nG = nx.from_numpy_matrix(matrix)","267d6616":"\ndef create_corr_network(G, corr_direction, min_correlation):\n    H = G.copy()\n    for stock1, stock2, weight in G.edges(data=True):\n        if corr_direction == \"positive\":\n            if weight[\"weight\"] <0 or weight[\"weight\"] < min_correlation:\n                H.remove_edge(stock1, stock2)\n        else:\n            if weight[\"weight\"] >=0 or weight[\"weight\"] > min_correlation:\n                H.remove_edge(stock1, stock2)\n                \n    edges,weights = zip(*nx.get_edge_attributes(H,'weight').items())\n    weights = tuple([(1+abs(x))**2 for x in weights])\n    d = nx.degree(H)\n    nodelist, node_sizes = zip(*d)\n    positions=nx.circular_layout(H)\n    \n    plt.figure(figsize=(10,10), dpi=72)\n\n    nx.draw_networkx_nodes(H,positions,node_color='#DA70D6',nodelist=nodelist,\n                           node_size=tuple([x**2 for x in node_sizes]),alpha=0.8)\n    \n    nx.draw_networkx_labels(H, positions, font_size=8, \n                            font_family='sans-serif')\n    \n    if corr_direction == \"positive\": edge_colour = plt.cm.GnBu \n    else: edge_colour = plt.cm.PuRd\n        \n    nx.draw_networkx_edges(H, positions, edge_list=edges,style='solid',\n                          width=weights, edge_color = weights, edge_cmap = edge_colour,\n                          edge_vmin = min(weights), edge_vmax=max(weights))\n    plt.axis('off')\n    plt.show()","689fa05d":"import seaborn as sns\nimport matplotlib.pyplot as plt\nfig, ax = plt.subplots(figsize=(80,80)) \n\nsns.set(font_scale=5)\n\nsns.heatmap(dummies.corr(), annot_kws={\"size\": 16}, annot=True, fmt='.1f')\n","4c6bb066":"import matplotlib.pyplot as plt\n\ncorr = dummies.corr()\nstocks = corr.index.values\ncor_matrix = np.asmatrix(corr)\nG = nx.from_numpy_matrix(cor_matrix)\nG = nx.relabel_nodes(G,lambda x: stocks[x])\nG.edges(data=True)\n\ncreate_corr_network(G, 'positive', 0.1)","7cf9cc08":"import seaborn as sns\nsns.set(font_scale=1)\nsns.kdeplot(animes['rating'], shade=True, color=\"r\")","b4ecad5e":"a = animes[animes['episodes']!=\"Unknown\"]\nsns.kdeplot(a['episodes'], shade=True, color=\"r\")","ea02fe58":"sns.boxplot(animes['rating'])","16fb8db5":"import matplotlib.pyplot as plt\nfrom matplotlib import rcParams\nimport seaborn as sns\nsns.set(font_scale=5)\n\nrcParams['figure.figsize'] = 50, 20\nknow_episodes = animes[animes['episodes']!='Unknown']\nknow_episodes['episodes'] = know_episodes['episodes'].astype(int)\n\nsns.scatterplot(x=\"episodes\", y=\"rating\",palette=\"Set2\",data=know_episodes.sort_values('episodes'), s=100)\nax.set_xticklabels(ax.get_xticklabels(), rotation=90)\nplt.show()","2d3dddca":"a.head()","e1604845":"animes[animes['episodes']=='Unknown']","5e2375cd":"animes.isna().sum()","c3e65459":"animes.head()","7b447b20":"def count_genres(df):\n    amount_of_genres = []\n    df['genre'] = df['genre'].astype(str)\n    for genre in df['genre']:\n        if genre != 'NaN':\n            count = len(genre.split(','))\n            amount_of_genres.append(count)\n        else:\n            amount_of_genres.append(-1)\n    return amount_of_genres\n\nanimes['Amount Genres'] = count_genres(animes)","3cf301c3":"sns.kdeplot(animes['Amount Genres']  ,shade=True, color=\"g\")","3c6b83a5":"cmap = sns.cubehelix_palette(dark=.3, light=.8, as_cmap=True)\nax = sns.countplot(x=\"Amount Genres\", data=animes)","1e08a6aa":"animes.head()","d538ce98":"ax = sns.boxplot(x=\"Amount Genres\", y=\"rating\", data=animes)","11e1fb55":"ax = sns.scatterplot(x=\"members\", y=\"rating\", data=animes)","4562bf0d":"ax = sns.countplot(x=\"type\",data=animes)","884cf457":"ax = sns.boxplot(x=\"type\", y=\"rating\", data=animes)","cc7d0013":"merged = pd.concat([animes, dummies], axis=1)\nmerged.head()","79e955e7":"from tqdm import tqdm\nfig, ax = plt.subplots(9, 10, figsize=(130,150))\ni = 0\nj=0\nfor genre in tqdm(dummies.columns):\n    genre_ = merged[merged[genre]==1]\n    sns.kdeplot(list(genre_[\"rating\"]), shade=True, color=\"r\", ax=ax[i][j]).set_title('Genre rating ' +genre)\n    if (j % 9 ==0) and (j!=0):\n        i +=1 \n        j =0\n    j+=1\nfig.tight_layout()\nfig.show()","e6aa0b99":"**Show Correlation of Genres**","0b628fb9":"***Distribution Of Rating***","d0209260":"* Members show how much peoples keep the anime in list, so how much people watch anime it tends to be more rated, animes with low number of members has in general low rated\n","77e50a68":"* Shounen, Sports, shoujos, school, Game are the genres with best ratings","a0e7b042":"* The rating distribuition over dataset is looklike normal distribuition, the most common rating is between 6 and 8","815e31b6":"* This kernel show the principal features that do anime get success\n","ddaf4ea7":"* Based on genre while the number of genres of the anime grows better it is classified","1ff23513":"* When look for genre that are great density of 1 until 7, after that the number of genre deacrese drastically","d6b21cde":"* Animes there are among 0 and 250 episodes, and exist a gap until 1500 and 1750 episodes","a7097104":"* Ona and Movie has the most regular behavior","64725ffc":"# Conclusion\n\n* Based only in metadata to for an anime to succeed need be until 250 episodes\n* need to have up to 7 genres\n* neeb be TV or movie type\n* and need have Shounen, Sports, shoujos, school or Game genre to reach a larger audience\n","b2d71585":"* It's to hard understand this correlation matrix","7f04d841":"* So now we can see better the correlation about genres, the most strong correlation is Adventure and Action","7f1b2a9a":"* So box plot show us that not common the animes receive rating below 4 and above 8.7, this ratings can be interpreted as an anime the not very watched","a163b1cd":"* How that are so much animes with low number and a great variation of rationg"}}