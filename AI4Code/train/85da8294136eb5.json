{"cell_type":{"8b0d6e30":"code","37bdad25":"code","0d062f1e":"code","17e78426":"code","8be838b0":"code","64b59452":"code","dd0fb6ef":"code","b523a117":"code","b9cf9f9e":"code","b653de46":"code","ff60f9a1":"code","3cc1f924":"code","16c94f65":"code","15815100":"code","7c5edaec":"code","bf97503d":"code","de4a2c21":"code","a2cff0a4":"code","a5c1ff9b":"code","7b3d6bc7":"code","2ff86612":"code","3bd0f5c4":"code","6bfcd183":"code","cc3646f8":"code","d815f1f8":"code","b7d29606":"code","85c17684":"code","b6df88df":"markdown","2b5bfcd3":"markdown","6a6d90c1":"markdown","639d551e":"markdown","8e54afb9":"markdown","1a33ab56":"markdown","f22fff2f":"markdown"},"source":{"8b0d6e30":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","37bdad25":"!pwd","0d062f1e":"import matplotlib.pyplot as plt\nimport plotly.graph_objs as go\nfrom plotly.subplots import make_subplots","17e78426":"df = pd.read_csv('\/kaggle\/input\/chennai-water-management\/chennai_reservoir_levels.csv',\n                parse_dates=['Date'], dayfirst=True)\n#df['Date'] = pd.to_datetime(df['Date'], format='%d-%m-%Y')\ndf.head()","8be838b0":"df.dtypes","64b59452":"df.isnull().sum()","dd0fb6ef":"df.Date.dt.year.min(), df.Date.dt.year.max()","b523a117":"fig = make_subplots(rows=2, cols=2,\n                   subplot_titles=['Poondi (in mcft)',\n                                  'Redhills (in mcft)',\n                                  'Chembarambakkam (in mcft)',\n                                  'Cholavaram (in mcft)'])\n\nfig.add_trace(go.Scatter(x=df.Date, y=df.POONDI, name='Poondi'), row=1, col=1)\nfig.add_trace(go.Scatter(x=df.Date, y=df.REDHILLS, name='Redhills'), row=1, col=2)\nfig.add_trace(go.Scatter(x=df.Date, y=df.CHEMBARAMBAKKAM, name='Chembarambakkam'), row=2, col=1)\nfig.add_trace(go.Scatter(x=df.Date, y=df.CHOLAVARAM, name='Cholavaram'), row=2, col=2)\n\nfig.update_layout(title_text = \"Water availability in Chennai's four major reserviours {}-{}\".format(df.Date.dt.year.min(), df.Date.dt.year.max()))\n\nfig.show()","b9cf9f9e":"df_tidy = df.melt(id_vars = ['Date'], var_name='Resoviour', value_name='Water_Level')\ndf_tidy.head()","b653de46":"import plotly.express as px\n\npx.line(df_tidy,\n       x='Date',\n       y='Water_Level',\n        facet_col=\"Resoviour\",\n        facet_col_wrap=2,\n        color='Resoviour',\n       title=\"Water availability in Chennai's four major reserviours {}-{}\".format(df.Date.dt.year.min(), df.Date.dt.year.max()))","ff60f9a1":"fig = px.line(df.melt(id_vars=['Date'],var_name='Resoviour',value_name='Water_Level'), \n              x=\"Date\", \n              y=\"Water_Level\", \n              color=\"Resoviour\",                  \n              facet_col=\"Resoviour\",\n              facet_col_wrap=1,\n              height=1000\n             )\nfig.update_yaxes(matches=None)\nfig.show()","3cc1f924":"df['total'] = df.drop(columns='Date').sum(axis=1)\ndf.head()","16c94f65":"px.line(df,\n       x='Date',\n       y='total',\n       title='Total water availability from all four resoviours in mcft')","15815100":"rain_df = pd.read_csv('\/kaggle\/input\/chennai-water-management\/chennai_reservoir_rainfall.csv',\n                     parse_dates=['Date'], dayfirst=True)\nrain_df.head()","7c5edaec":"rain_df.dtypes","bf97503d":"px.line(rain_df.melt(id_vars=['Date'], var_name='Resoviour', value_name='Rainfall'),\n      x='Date',\n      y='Rainfall',\n      facet_col='Resoviour',\n      facet_col_wrap=2,\n      color='Resoviour')\n","de4a2c21":"rain_df['YearMonth'] = pd.to_datetime(rain_df.Date.dt.year.astype(str)+rain_df.Date.dt.month.astype(str), format='%Y%m')\nrain_df.head()","a2cff0a4":"rain_df.YearMonth.value_counts()","a5c1ff9b":"rain_df['total'] = rain_df.drop(columns=['Date', 'YearMonth']).sum(axis=1)\nrain_df.head()","7b3d6bc7":"rain_df.groupby('YearMonth').total.sum().reset_index()","2ff86612":"px.bar(rain_df.groupby('YearMonth').total.sum().reset_index(),\n       x='YearMonth',\n       y='total',\n      #color='season'\n      )","3bd0f5c4":"rain_df['Year'] = pd.to_datetime(rain_df.Date.dt.year.astype(str), format='%Y')\nrain_df.head()","6bfcd183":"monthly_rain_df = rain_df.groupby('YearMonth').total.sum().reset_index()\nmonthly_rain_df","cc3646f8":"# Creating Season column\nmonth_to_season = {1: 'winter', 2: 'winter', 3: 'summer', 4: 'summer', 5: 'summer', 6: 'monsoon', 7: 'monsoon', 8: 'monsoon', 9: 'monsoon',\n 10: 'post-monsoon', 11: 'post-monsoon', 12: 'post-monsoon'}","d815f1f8":"monthly_rain_df['season'] = monthly_rain_df.YearMonth.dt.month.map(month_to_season) \nmonthly_rain_df","b7d29606":"px.bar(monthly_rain_df,\n      x='YearMonth',\n      y='total',\n      color='season',\n      title='Yearly rainfall in the four major resoviour regions in mm'\n      )","85c17684":"px.bar(df.query(\"Date.dt.month== 3 and Date.dt.day== 1\"),\n       x='Date',\n       y='total',\n       title='Availability of water in total at the beginning of summer')","b6df88df":"## 1. Reading the data","2b5bfcd3":"## 3. Rainfall Levels","6a6d90c1":"## 4. Total Yearly rainfall","639d551e":"## 2. Look at the overall water levels\n","8e54afb9":"**Inference:**\n- We could clearly see that evey year there is a decremental phase and a replenishment phase (mainly during october to december)\n- There was a very bad water scarcity phase seen during 2004.\n- We can also see a bad phase during 2014-15 but there was to water availability in two reservoirs (Redhills and Chembarambakkam) and so it was a savior.\n- Now coming to recent times, the data shows that there is no water availability in any of the four major reservoirs.","1a33ab56":"## 5. Water Shortage estimation","f22fff2f":"## 4. Add a season column and use it as color in the bar plot"}}