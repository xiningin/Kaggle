{"cell_type":{"2d21032d":"code","61ae2726":"code","41b18073":"code","cade57c8":"code","54043d5b":"code","ec5575e8":"code","6f3099e3":"code","f2af72bd":"code","8d1e05cb":"code","5b928674":"code","059f0f1b":"code","85d49c4f":"code","25ff6517":"code","0f021dcc":"code","c3e8dc7c":"code","308567d1":"code","0ee1b767":"code","d7f520f3":"code","f9b7222f":"code","e6191724":"code","8343e65e":"markdown","897e7f87":"markdown","e23bd2c1":"markdown","d2feeb97":"markdown","e0f13ebd":"markdown","91f8bf2f":"markdown","7c005892":"markdown","e400b7b7":"markdown","ff5207fc":"markdown","285dc597":"markdown","9db57ee5":"markdown","286f4d5f":"markdown","136a647e":"markdown","b4747a43":"markdown","a26606f4":"markdown","457d017e":"markdown","7de25924":"markdown","70978def":"markdown","5bac3ae0":"markdown","54a56c88":"markdown"},"source":{"2d21032d":"import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly as py\nimport plotly.express as px\nimport plotly.graph_objs as go\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import init_notebook_mode, iplot, plot\n\nimport warnings \nwarnings.filterwarnings('ignore')\n%matplotlib inline\n\npd.set_option('display.max_columns', None)","61ae2726":"data = pd.read_csv('..\/input\/netflix-shows\/netflix_titles.csv')\ndisplay(data.sample(3))\nprint('Data Shape: ', data.shape)","41b18073":"data.info()","cade57c8":"data.isnull().sum()","54043d5b":"data['date_added'] = data['date_added'].fillna('NaN Data')\ndata['year'] = data['date_added'].apply(lambda x: x[-4: len(x)])\ndata['month'] = data['date_added'].apply(lambda x: x.split(' ')[0])\n\ndisplay(data.sample(3))","ec5575e8":"val = data['type'].value_counts().index\ncnt = data['type'].value_counts().values\n\nfig = go.Figure([go.Bar(x=val, y=cnt, marker_color='darkturquoise')])\nfig.update_layout(title_text='Netflix Sources Distribution', title_x=0.5)\nfig.show()","6f3099e3":"from collections import defaultdict\n\ndict = data.groupby(['type', 'year']).groups\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\nfor key, values in dict.items():\n    val = key[0]+','+key[1]\n    dict2[val] = len(values)\n    \nx = list(np.arange(2008, 2022, 1))\n\ny1, y2= [], []\nfor i in x:\n    y1.append(dict2['Movie,'+str(i)])\n    y2.append(dict2['TV Show,'+str(i)])\n    \nfig = go.Figure(data = [\n    go.Bar(name='Movie', x=x, y=y1, marker_color='mediumpurple'),\n    go.Bar(name='TV Show', x=x, y=y2, marker_color='lightcoral')\n])\nfig.update_layout(title_text='Trend Movies vs TV Shows in recent years', title_x=0.5)\nfig.show()","f2af72bd":"dict = data.groupby(['type', 'month']).groups\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\nfor key, values in dict.items():\n    val = key[0]+','+key[1]\n    dict2[val] = len(values)\n    \nx = ['January', 'February', 'March', 'April', 'May', 'June', 'July',\n     'August', 'September', 'October', 'November', 'December']\n\ny1, y2= [], []\nfor i in x:\n    y1.append(dict2['Movie,'+str(i)])\n    y2.append(dict2['TV Show,'+str(i)])\n    \nfig = go.Figure(data = [\n    go.Bar(name='Movie', x=x, y=y1, marker_color='mediumpurple'),\n    go.Bar(name='TV Show', x=x, y=y2, marker_color='lightcoral')\n])\nfig.update_layout(title_text='Trend Movies vs TV Shows during Months', title_x=0.5)\nfig.show()","8d1e05cb":"data_movie = data[data['type']=='Movie'].groupby('release_year').count()\ndata_tv = data[data['type']=='TV Show'].groupby('release_year').count()\ndata_movie.reset_index(level=0, inplace=True)\ndata_tv.reset_index(level=0, inplace=True)\n\n# fig = px.line(data_movie, x=\"release_year\", y=\"show_id\")\n# fig.show()\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=data_movie['release_year'], y=data_movie['show_id'],\n                    mode='lines',\n                    name='Movies', marker_color='mediumpurple'))\nfig.add_trace(go.Scatter(x=data_tv['release_year'], y=data_tv['show_id'],\n                    mode='lines',\n                    name='TV Shows', marker_color='lightcoral'))\nfig.update_layout(title_text='Trend Movies vs TV Shows in recent years', title_x=0.5)\nfig.show()","5b928674":"import collections\nimport string\n\ndict1 = {}\ndict1 = defaultdict(lambda: 0, dict1)\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\n\ndata['country'] = data['country'].fillna(' ')\n\nfor i in range(len(data)):\n    if data['type'][i] == 'Movie':\n        val = data['country'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict1[x]+=1\n    else:\n        val = data['country'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict2[x]+=1\n            \ndict1 = collections.OrderedDict(sorted(dict1.items(), key=lambda x: x[1], reverse=True))\ndict2 = collections.OrderedDict(sorted(dict2.items(), key=lambda x: x[1], reverse=True))\n\nx1 = list(dict1.keys())[:20]\nx2 = list(dict2.keys())[:20]\ny1 = list(dict1.values())[:20]\ny2 = list(dict2.values())[:20]\n\nfig = go.Figure([go.Bar(x=x1, y=y1, marker_color='mediumpurple')])\nfig.update_layout(title_text='Top Countries where Movies are released', title_x=0.5)\nfig.show()\n\nfig = go.Figure([go.Bar(x=x2, y=y2, marker_color='lightcoral')])\nfig.update_layout(title_text='Top Countries where TV Shows are released', title_x=0.5)\nfig.show()","059f0f1b":"import plotly.offline as py\npy.offline.init_notebook_mode()\nimport pycountry\n\n\ndf1 = pd.DataFrame(dict1.items(), columns=['Country', 'Count'])\ndf2 = pd.DataFrame(dict2.items(), columns=['Country', 'Count'])\n\ntotal = set(list(df1['Country'].append(df2['Country'])))\n\nd_country_code = {}  # To hold the country names and their ISO\nfor country in total:\n    try:\n        country_data = pycountry.countries.search_fuzzy(country)\n        # country_data is a list of objects of class pycountry.db.Country\n        # The first item  ie at index 0 of list is best fit\n        # object of class Country have an alpha_3 attribute\n        country_code = country_data[0].alpha_3\n        d_country_code.update({country: country_code})\n    except:\n        #print('could not add ISO 3 code for ->', country)\n        # If could not find country, make ISO code ' '\n        d_country_code.update({country: ' '})\n        \nfor k, v in d_country_code.items():\n    df1.loc[(df1.Country == k), 'iso_alpha'] = v\n    df2.loc[(df2.Country == k), 'iso_alpha'] = v\n        \nfig = px.scatter_geo(df1, locations=\"iso_alpha\",\n                     hover_name=\"Country\", # column added to hover information\n                     size=\"Count\", # size of markers, \"pop\" is one of the columns of gapminder\n                     )\nfig.update_layout(title_text='Top Countries where Movie are released', title_x=0.5)\nfig.show()\n\nfig = px.scatter_geo(df2, locations=\"iso_alpha\",\n                     hover_name=\"Country\", # column added to hover information\n                     size=\"Count\", # size of markers, \"pop\" is one of the columns of gapminder\n                     )\nfig.update_layout(title_text='Top Countries where TV Shows are released', title_x=0.5)\nfig.show()","85d49c4f":"dict1 = {}\ndict1 = defaultdict(lambda: 0, dict1)\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\n\ndata['cast'] = data['cast'].fillna(' ')\n\nfor i in range(len(data)):\n    if data['type'][i] == 'Movie':\n        val = data['cast'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict1[x]+=1\n    else:\n        val = data['cast'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict2[x]+=1\n            \ndict1 = collections.OrderedDict(sorted(dict1.items(), key=lambda x: x[1], reverse=True))\ndict2 = collections.OrderedDict(sorted(dict2.items(), key=lambda x: x[1], reverse=True))\n\nx1 = list(dict1.keys())[:20]\nx2 = list(dict2.keys())[:20]\ny1 = list(dict1.values())[:20]\ny2 = list(dict2.values())[:20]\n\nfig = go.Figure([go.Bar(x=x1, y=y1, marker_color='mediumpurple')])\nfig.update_layout(title_text='Most appeared Cast Globally in Movies', title_x=0.5)\nfig.show()\n\nfig = go.Figure([go.Bar(x=x2, y=y2, marker_color='lightcoral')])\nfig.update_layout(title_text='Most appeared Cast Globally in TV Shows', title_x=0.5)\nfig.show()","25ff6517":"import nltk\nimport random\nfrom nltk.corpus import names\n\ndef gender_features(word):\n    return {'last_letter': word[-1]}\n\nlabeled_names = ([(name, 'male') for name in names.words('male.txt')] + \n                 [(name, 'female') for name in names.words('female.txt')])\n\nrandom.shuffle(labeled_names)\n\nfeaturesets = [(gender_features(n), gender) for (n, gender) in labeled_names]\n\ntrainset, testset = featuresets[500:], featuresets[:500]\n\nclassifier = nltk.NaiveBayesClassifier.train(trainset)","0f021dcc":"dict1 = {}\ndict1 = defaultdict(lambda: 0, dict1)\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\n\ndf1 = pd.DataFrame(columns = ['Gender', 'Count'])\ndf2 = pd.DataFrame(columns = ['Gender', 'Count'])\n\ndata['cast'] = data['cast'].fillna(' ')\n\nfor i in range(len(data)):\n    if data['type'][i] == 'Movie':\n        val = data['cast'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                if classifier.classify(gender_features(x)) == 'male':\n                    df1.loc[len(df1)] = ['male', 1]\n                else:\n                    df1.loc[len(df1)] = ['female', 1]\n    else:\n        val = data['cast'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                if classifier.classify(gender_features(x)) == 'male':\n                    df2.loc[len(df2)] = ['male', 1]\n                else:\n                    df2.loc[len(df2)] = ['female', 1]\n\nfig = px.pie(df1, values='Count', names='Gender', color='Gender',\n             color_discrete_map={'female':'lightcyan',\n                                 'male':'darkblue'})\nfig.update_layout(title_text='Gender Ratio in Movies', title_x=0.5)\nfig.show()\n\nfig = px.pie(df2, values='Count', names='Gender', color='Gender',\n             color_discrete_map={'female':'lightcyan',\n                                 'male':'darkblue'})\nfig.update_layout(title_text='Gender Ratio in TV Shows', title_x=0.5)\nfig.show()","c3e8dc7c":"dict1 = {}\ndict1 = defaultdict(lambda: 0, dict1)\ndict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\n\ndata['listed_in'] = data['listed_in'].fillna(' ')\n\nfor i in range(len(data)):\n    if data['type'][i] == 'Movie':\n        val = data['listed_in'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict1[x]+=1\n    else:\n        val = data['listed_in'][i].split(',')\n        for j in val:\n            x = j.lower()\n            x = x.strip()\n            if x!='':\n                dict2[x]+=1\n            \ndict1 = collections.OrderedDict(sorted(dict1.items(), key=lambda x: x[1], reverse=True))\ndict2 = collections.OrderedDict(sorted(dict2.items(), key=lambda x: x[1], reverse=True))\n\nx1 = list(dict1.keys())[:20]\nx2 = list(dict2.keys())[:20]\ny1 = list(dict1.values())[:20]\ny2 = list(dict2.values())[:20]\n\nfig = go.Figure([go.Bar(x=x1, y=y1, marker_color='mediumpurple')])\nfig.update_layout(title_text='Highest occurring genres Globally in Movies', title_x=0.5)\nfig.show()\n\nfig = go.Figure([go.Bar(x=x2, y=y2, marker_color='lightcoral')])\nfig.update_layout(title_text='Highest occurring genres Globally in TV Shows', title_x=0.5)\nfig.show()","308567d1":"dict2 = {}\ndict2 = defaultdict(lambda: 0, dict2)\n\ndata2 = data\ndata2['country'] = data2['country'].apply(lambda x: x.lower())\ndata2['listed_in'] = data2['listed_in'].apply(lambda x: x.lower())\n\ndf1 = pd.DataFrame(columns=['Country', 'Genre', 'Count'])\n    \nfor i in range(len(data2)):\n    for j in data2['country'][i].split(','):\n        for k in data2['listed_in'][i].split(','):\n            val = j+','+k\n            dict2[val]+=1\n            \ndict2 = collections.OrderedDict(sorted(dict2.items(), key=lambda x: x[1], reverse=True))\n\na, b, c = 0, 0, 0\nfor k,v in dict2.items():\n    if k.split(',')[0] == 'india' and a<5:\n        df1.loc[len(df1)] = [k.split(',')[0], k.split(',')[1],v]\n        a+=1\n    elif k.split(',')[0] == 'united states' and b<5:\n        df1.loc[len(df1)] = [k.split(',')[0], k.split(',')[1],v]\n        b+=1\n    elif k.split(',')[0] == 'united kingdom' and c<5:\n        df1.loc[len(df1)] = [k.split(',')[0], k.split(',')[1],v]\n        c+=1\n        \ndf1","0ee1b767":"fig = px.sunburst(df1, path = ['Country', 'Genre'], values = 'Count', color = 'Country',\n                 color_discrete_map = {'united states': '#85e0e0', 'india': '#99bbff', 'united kingdom': '#bfff80'})\nfig.update_layout(title_text='Distribution of Genres in India, US, UK', title_x=0.5)                  \nfig.show()","d7f520f3":"data.iloc[67, 8] = 'R' \ndata.iloc[2359, 8] = 'TV-14'\ndata.iloc[3660, 8] = 'TV-PG'\ndata.iloc[3736, 8] = 'R'\ndata.iloc[3737, 8] = 'R'\ndata.iloc[3738, 8] = 'R'\ndata.iloc[4323, 8] = 'PG-13'\n\ndata['age_group'] = data['rating']\nMR_age = {'TV-MA': 'Adults',\n          'R': 'Adults',\n          'PG-13': 'Teens',\n          'TV-14': 'Young Adults',\n          'TV-PG': 'Older Kids',\n          'NR': 'Adults',\n          'TV-G': 'Kids',\n          'TV-Y': 'Kids',\n          'TV-Y7': 'Older Kids',\n          'PG': 'Older Kids',\n          'G': 'Kids',\n          'NC-17': 'Adults',\n          'TV-Y7-FV': 'Older Kids',\n          'UR': 'Adults'}\ndata['age_group'] = data['age_group'].map(MR_age)\n\nval = data['age_group'].value_counts().index\ncnt = data['age_group'].value_counts().values\n\nfig = go.Figure([go.Bar(x=val, y=cnt, marker_color='darkturquoise')])\nfig.update_layout(title_text='Age Group Distribution', title_x=0.5)\nfig.show()","f9b7222f":"data_movie = data[data['type'] == 'Movie']\ndata_tv = data[data['type'] == 'TV Show']\n\n# create trace 1 that is 3d scatter\ntrace1 = go.Scatter3d(\n    x=data_movie.duration,\n    y=data_tv.duration,\n    z=data.release_year,\n    mode='markers',\n    marker_color='darkturquoise'\n)\n\ndata2 = [trace1]\nlayout = go.Layout(\n)\nfig = go.Figure(data=data2, layout=layout)\nfig.update_layout(title_text='Distribution of Duration across Movies and TV Show in the past years', title_x=0.5)\niplot(fig)","e6191724":"data_movie = data[data['type'] == 'Movie']\ndata_tv = data[data['type'] == 'TV Show']\n\ntrace0 = go.Box(\n    y = data_movie.duration,\n    name = \"Duration of Movies\",\n    marker_color='mediumpurple'\n)\n\ntrace1 = go.Box(\n    y = data_tv.duration,\n    name = \"Duration of TV Shows\",\n    marker_color='lightcoral'\n)\n\ndata2 = [trace0,trace1]\niplot(data2)","8343e65e":"Few NaN values are filled manually and mapped to a respective age group for a better analysis.","897e7f87":"## Load Data and Basic Analysis","e23bd2c1":"Now, lets look at the distribution of gender in movies and tv shows released on netflix across all the countries.","d2feeb97":"If you learnt something from the notebook or found it interesting Upvote it\ud83d\udc4d","e0f13ebd":"## Type","91f8bf2f":"## Country","7c005892":"## Genre","e400b7b7":"Here we see the distribution of movies and tv shows across various countries. We will also plot the Counts on a map.","ff5207fc":"Most of the Movies and TV Shows are for adults which is also quite obvious.","285dc597":"## Rating","9db57ee5":"Here, we examine the duration of movies and tv shows for the past years.","286f4d5f":"![netflix.jpg](https:\/\/occ-0-1722-1723.1.nflxso.net\/dnm\/api\/v6\/LmEnxtiAuzezXBjYXPuDgfZ4zZQ\/AAAABc62Uu86O-KyG_QVooZls2_LQXEqPggHKhGNXfvFoTTdtZf0y9YrDXOrlFts44M5PgQY21fus6w4ij1QGGkwiDWn9uX-JpYo06BH.png?r=72a)","136a647e":"Now lets look at the trend using bar plot.","b4747a43":"We can see clearly that the gender ratio is a bit biased towards male category.","a26606f4":"## Import Libraries","457d017e":"In this notebook my focus was mainly on to analyse the data and various factors affecting the trend of Movies and Shows available on Netflix. Data Visualization was a primary aim and was implemented using Plotly. Plotly's Python graphing library makes interactive, publication-quality graphs. Examples of how to make line plots, scatter plots, area charts, bar charts, error bars, box plots, histograms, heatmaps, subplots, multiple-axes, polar charts, and bubble charts. 90% of the features are explored in depth and rest will also explored in the newer versions of the notebook. ","7de25924":"There are only 2 major types in Netflix watch: Movies and TV Show. ","70978def":"Lets look at the trend with the help of a Line Plot.","5bac3ae0":"## Duration","54a56c88":"## Cast"}}