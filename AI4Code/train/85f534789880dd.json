{"cell_type":{"f5941df2":"code","d2669b18":"code","6a29162a":"code","b7d97106":"code","f84ea6bd":"code","82fe4999":"code","3cf035aa":"code","a4f73705":"code","b868af9b":"code","10beceb0":"code","37ed550e":"code","db56024d":"code","ff5a85fb":"code","00a65610":"code","e16af99a":"code","bdc93280":"code","0510c0bb":"code","cd7ef5f2":"markdown","40164755":"markdown","3071d139":"markdown","a6245982":"markdown","1d5271af":"markdown","3deefdbc":"markdown","3e6bf135":"markdown","8804e3a3":"markdown","eaac5775":"markdown","c6acf773":"markdown","bb1fa795":"markdown","406a20bc":"markdown","72d11ad1":"markdown","4cc26e17":"markdown","4ba503c9":"markdown","3ac97840":"markdown","238ba829":"markdown","e52b9f92":"markdown","70b2706c":"markdown","4a522194":"markdown","723d8b83":"markdown"},"source":{"f5941df2":"# Import relevant modules.\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport os\n\n# Load the main dataset.\ndataAll  = pd.read_csv('..\/input\/athlete_events.csv')\ndataAll.head(3)","d2669b18":"# Examine the details of team names.\nprint(dataAll['Team'].nunique())\nteamNames = dataAll['Team'].unique()\nteamNames.sort()\nprint(teamNames[0:3])","6a29162a":"# Load the updated regions dataset.\nnocNames = pd.read_csv('..\/input\/noc_regions.csv')\nnocNames.head(3)","b7d97106":"# Based on NOC name, merged the datasets.\ndataAll = pd.merge(dataAll, nocNames, on='NOC', how='left')\ndataAll.head(3)","f84ea6bd":"# Create new dataframes for just the Summer or Winter Games.\nsummerGames = dataAll[(dataAll.Season == 'Summer')]\nwinterGames = dataAll[(dataAll.Season == 'Winter')]\n\n# Count the number of unique events after grouping by year.\nnumSummerEvents = summerGames.groupby([\"Year\"])[\"Event\"].nunique().reset_index()\nnumWinterEvents = winterGames.groupby([\"Year\"])[\"Event\"].nunique().reset_index()\n\n# Plot the results.\nplt.figure(figsize=(15,8))\nplt.plot(numSummerEvents.Year, numSummerEvents.Event, '-o')\nplt.plot(numWinterEvents.Year, numWinterEvents.Event, '-o')\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Number of Events\", fontsize=22)\nplt.legend([\"Summer\", \"Winter\"])\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","82fe4999":"# Take a look at some of the art-based events.\nearlyEvents = summerGames[(summerGames.Sport == 'Art Competitions')]['Event'].unique()\nprint(earlyEvents[0:11])","3cf035aa":"# Create new dataframes for male and female athletes at the Summer games.\nsummerGamesMale   = summerGames[(summerGames.Sex == 'M')]\nsummerGamesFemale = summerGames[(summerGames.Sex == 'F')]\n\n# First group by year, then based on athlete ID, count the number of individuals.\nnumSummerMale   = summerGamesMale.groupby([\"Year\"])[\"ID\"].nunique().reset_index()\nnumSummerFemale = summerGamesFemale.groupby([\"Year\"])[\"ID\"].nunique().reset_index()\n\n# Plot the results.\nplt.figure(figsize=(15,8))\nplt.plot(numSummerMale.Year, numSummerMale.ID, '-o')\nplt.plot(numSummerFemale.Year, numSummerFemale.ID, '-o')\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Number of Athletes\", fontsize=22)\nplt.legend([\"Male\", \"Female\"])\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","a4f73705":"# Calculate the ratio of male\/female participants.\n# I remove the first year as no women participated.\nmaleRatios   = numSummerMale[1::].ID\/(numSummerMale[1::].ID + numSummerFemale.ID)\nfemaleRatios = numSummerFemale.ID\/(numSummerMale[1::].ID + numSummerFemale.ID)\n\n# Plot the results as a stacked bar chart.\nplt.figure(figsize=(15,8))\nwidth = 2 \np1 = plt.bar(numSummerMale.Year, maleRatios, width)\np2 = plt.bar(numSummerMale.Year, femaleRatios, width, bottom=maleRatios)\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Gender Ratio\", fontsize=22)\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","b868af9b":"# After first grouping by year, count the number of regions competing.\nnumSummerCountries = summerGames.groupby([\"Year\"])[\"region\"].nunique().reset_index()\nnumWinterCountries = winterGames.groupby([\"Year\"])[\"region\"].nunique().reset_index()\n\n# Plot the results.\nplt.figure(figsize=(15,8))\nplt.plot(numSummerCountries.Year, numSummerCountries.region, '-o')\nplt.plot(numWinterCountries.Year, numWinterCountries.region, '-o')\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Number of Participating Regions\", fontsize=22)\nplt.legend([\"Summer\", \"Winter\"])\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","10beceb0":"# Use drop_duplicates to remove multiple entries by the same athlete in a single year.\nmaleAges = summerGamesMale.drop_duplicates(['ID', 'Year'])['Age']\n# Remove NaN entries.\nmaleAges = maleAges[np.isfinite(maleAges)]\n\nfemaleAges = summerGamesFemale.drop_duplicates(['ID', 'Year'])['Age']\nfemaleAges = femaleAges[np.isfinite(femaleAges)]\n\nplt.figure(figsize=(15,8))\n# Calculate and plot histograms.\nn1, bins1, patches1 = plt.hist(maleAges, range(0, 101), alpha=0.75, density='true')\nn2, bins2, patches2 = plt.hist(femaleAges, range(0, 101), alpha=0.75, density='true')\n# Add a step plot overlay to make boundaries clear.\nplt.step(range(0, 100), n1, 'b', where='post')\nplt.step(range(0, 100), n2, 'r', where='post')\nplt.xlabel(\"Age\", fontsize=22)\nplt.ylabel(\"Normalised Count\", fontsize=22)\nplt.legend([\"Male\", \"Female\"])\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","37ed550e":"# Calculate the mean and standard deviation of athlete ages.\nprint('Average Male Athlete:', \n      format(maleAges.mean(), '.1f'), \n      '+\/-', \n      format(maleAges.std(), '.1f'),\n      'years old.')\n\nprint('Average Female Athlete:', \n      format(femaleAges.mean(), '.1f'), \n      '+\/-', \n      format(femaleAges.std(), '.1f'),\n      'years old.')","db56024d":"# Find the details of the youngest athlete.\ndataAll[(dataAll.Age == dataAll['Age'].min())]","ff5a85fb":"# Find the details of the oldest athlete.\ndataAll[(dataAll.Age == dataAll['Age'].max())]","00a65610":"# Choose four high profile sports.\nfemaleSports = ['Athletics',\n                'Equestrianism',\n                'Gymnastics',\n                'Swimming']\n\n# Create a figure and loop over each sport.\nplt.figure(figsize=(15,8))\nfor ii, sportName in enumerate(femaleSports):\n    \n    # Choose only female athletes at the Summer Games for the current sport.\n    currentSport = summerGamesFemale[(summerGamesFemale.Sport == sportName)]\n    # Only consider medal winners.\n    currentSport = currentSport[currentSport.Medal.notnull()]\n    # Remove NaN entries.\n    currentSport = currentSport[(np.isfinite(currentSport.Age))]\n    # After first grouping by year, calculate mean ages.\n    currentSport = currentSport.groupby([\"Year\"])[\"Age\"].mean().reset_index()\n    # Plot results for current sport.\n    plt.plot(currentSport.Year, currentSport.Age, '-o')\n    \n# Tidy up the plot.\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Average Age of Medal Winners\", fontsize=22)\nplt.legend(femaleSports)\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","e16af99a":"# Select only medal winners at Summer Games.\nsummerMedalWinners = summerGames[summerGames.Medal.notnull()]\n# Remove entries for unrecognised 1906 Games.\nsummerMedalWinners = summerMedalWinners[summerMedalWinners.Year != 1906]\n\n# Store the names of all winning regions.\nwinningTeams = summerMedalWinners['region'].unique()\n# Create a list of zeros to store results.\nmedalCount   = [0]*len(winningTeams)\n\n# Loop over each region that has ever won a medal.\nfor ii, teamName in enumerate(winningTeams):\n    \n    # Choose only medal winning athletes for the current team.\n    currentTeam = summerMedalWinners[(summerMedalWinners.region == teamName)]\n    # Need to be careful to remove multiple medals won by teams (like football).\n    currentTeam = currentTeam.drop_duplicates(['Year', 'Event', 'Medal'])\n    # Store the total medal count for the current region.\n    medalCount[ii] = currentTeam[\"ID\"].count()\n    \n# Create a medal table dataframe and view the top 10.\ndata = {'Team':winningTeams, 'Total Medal Count':medalCount}\nmedalTable = pd.DataFrame(data)\nmedalTable = medalTable.sort_values('Total Medal Count', ascending=False).reset_index(drop=True)\nmedalTable.head(10)","bdc93280":"# Choose the eight most recent hosts.\nrecentHostCountries = ['South Korea',\n                       'Spain',\n                       'USA',\n                       'Australia',\n                       'Greece',\n                       'China',\n                       'UK',\n                       'Brazil']\n\n# The years they hosted and a list of zeros to store results.\nhostYears = [1988, 1992, 1996, 2000, 2004, 2008, 2012, 2016]\nhostCount   = np.empty([len(recentHostCountries), len(hostYears)])\n\n# Loop over each year.\nfor ii in range(0, len(hostYears)):\n    \n    # Choose all medal winners from the current year.\n    currentYear = summerMedalWinners[(summerMedalWinners.Year == hostYears[ii])]\n    # Need to be careful to remove multiple medals won by teams.\n    currentYear = currentYear.drop_duplicates(['Year', 'Event', 'Medal'])\n    # Count all the available medals in the current year.\n    totalMedals = currentYear[\"ID\"].count()\n    \n    # Loop over each host country.\n    for jj in range(0, len(recentHostCountries)):\n        \n        # Choose the current host country and calculate the percentage of \n        # total medals they won in the current year.\n        currentTeam = currentYear[(currentYear.region == recentHostCountries[jj])]\n        hostCount[ii,jj] = (currentTeam[\"ID\"].count()\/totalMedals)*100\n\n# Create some empty arrays to store the results.\nmeanResult = np.empty([len(recentHostCountries)])\nbestResult = np.empty([len(recentHostCountries)])\nhostResult = np.empty([len(recentHostCountries)])\n\n# Plot each host nations medal results and store mean, best and host year medal results.\nplt.figure(figsize=(15,8))\nfor nn in range(0, len(recentHostCountries)):\n    \n    plt.plot(hostYears, hostCount[:,nn], '-o')\n    meanResult[nn] = hostCount[:,nn].mean()\n    bestResult[nn] = max(hostCount[:,nn])\n    hostResult[nn] = hostCount[nn,nn]\n    \n# Tidy the figure.\nplt.xlabel(\"Year\", fontsize=22)\nplt.ylabel(\"Percentage of Available Medals Won\", fontsize=22)\nplt.legend(recentHostCountries, bbox_to_anchor=(1.04,1), loc=\"upper left\")\nplt.grid(True)\nplt.rc('xtick', labelsize=16)\nplt.rc('ytick', labelsize=16)","0510c0bb":"# Create a medal table dataframe.\ndata = {'Team':recentHostCountries, 'Hosting Year':hostYears, 'Average (%)':meanResult, 'Best (%)':bestResult, 'Host Year (%)':hostResult}\nhostTable = pd.DataFrame(data)\nhostTable.head(8)","cd7ef5f2":"## Age Trends\nFocusing on a subset of the data, we now look at how the age of successful athletes has varied over the years. Here, we consider only medal winning female athletes in athletics, equestrian, gymnastics and swimming sports. We chose to concentrate on female athletes as the age trends are more pronounced due to events becoming more competitive as opportunities for women have increased and participation rates grown. The four sports were chosen due to their high number of events and relatively long history. Typically, athletics and swimming have just under 100 medallists per Games, gymnastics around 30 and equestrian around 20.","40164755":"# General Observations\n## Number of Events\nAs an initial check of the data, the number of events at each Games are shown below. One can see that the number of events has generally had an upward trend over the years, although the number at the Summer Games has plateaued since 2000. Cross-checking with the known [number of events][1] confirms the numbers are correct, increasing confidence in the dataset and that it has been read correctly.\n\n[1]:https:\/\/en.wikipedia.org\/wiki\/Olympic_sports","3071d139":"In six out of the eight cases a team won their highest percentage of total available medals the year that they hosted the Summer Olympics. Of the other two teams, the UK effectively equalled their best performance and surpassed their average while the USA matched their average.\n\nThere are likely to be several factors that lead to this finding. One is the romantic notion that the support of the home crowd inspires athletes to perform better than they otherwise would have. While there may be some truth in this it does not explain the gradual rise and fall in performance in the Games around a nations host year observed in several cases. Australia, China and Greece are clear examples of this phenomenon.\n\nLikely a more important factor is money. Typically a nation knows many years in advance that they will host the Olympics, which is generally seen as a patriotic event. Extra money can be directed towards scouting and training athletes and the prospect of a home Olympics can act as a carrot for aspiring talent. This tends to bring through a generation of improved athletes, where their careers span several Games and this goes some way to explain the rise and fall phenomenon.","a6245982":"While the USA team's performance over the 28 year period has been fairly consistent (they typically win about 12% of the available medals) the other teams have shown a significant variation in their performances. To try and tease out some meaning, for each team we calculate their average performance, best performance and their performance the year they hosted. The results are shown in the table below.","1d5271af":"## Unifying Team Names\nThe original dataset includes the team that each athlete represented and should normally correspond to their country. However, a simple check indicates many of the entries must be erroneous as the team column contains 1184 unique entries, despite there only being around 195 countries in the [world][1]. To give an example the first 3 entries are '30. Februar', 'A North American Team' and 'Acipactli' which are indicative of the list.\n\n[1]: https:\/\/www.worldatlas.com\/articles\/how-many-countries-are-in-the-world.html","3deefdbc":"There are several observations that can be made. Firstly, since around 1980 (and possibly coinciding with increased female participation) there has been a clear distinction in the age of successful athletes across the four sports. Successful female equestrians tend to be older (over thirty) than in the other sports, followed by athletics (twenty-six) and swimming (twenty-two) with gymnastics favouring younger athletes (under twenty).\n\nIt is interesting to note that in the highly competitive sports of athletics and swimming there has been little change in the average age of winning athletes since 2000, with athletics seemingly favouring a slightly older competitor. Given different human traits (strength, endurance, skill, experience, etc) peak on average at different ages it suggests that these sports test different combinations of said traits. This is particularly surprising for athletics and swimming which superficially require a similar set of physical traits in order to excel. It is also possible that social factors could play a role with perhaps swimming being more accessible to a younger age-group.\n\nFinally, there appears to have been an interesting trend in the age of successful female gymnasts. For several decades medal winning gymnasts were on average in their mid-twenties and similar in age to winners in athletics. However, from the mid-sixties until the early-nineties the average age of successful gymnasts successively fell with the average age stabilising in the late teens. Even the recent increase in their average age is due an age requirement of 16 brought in by the [F\u00e9d\u00e9ration Internationale de Gymnastique in 1997][1]. There has been much debate as to why female gymnastics in particular seems to favour younger athletes, [with many arguments proving unconvincing][2].\n\n[1]: http:\/\/en.wikipedia.org\/wiki\/Age_requirements_in_gymnastics\n[2]: http:\/\/www.thisisinsider.com\/why-are-female-olympic-gymnasts-so-young-2016-8","3e6bf135":"# Introduction\nTaking inspiration from ancient Greek culture and founded by Frenchman Pierre de Coubertin, the first summer Olympics of the modern era was held in Athens in 1896. Since then, World Wars excluded, it has been held every four years with its popularity also spawning a winter-sport based version first held in 1924. Over the subsequent years, thousands of athletes from hundreds of nations have competed at a variety of sporting events. For many athletes, attaining a coveted gold medal at an Olympic Games is the pinnacle of their career and the Olympic Games continues to be one of the largest sporting events in the world. This notebook delves into data from 120 years of Olympic history and seeks to provide an interesting and insightful analysis of this rich dataset.","8804e3a3":"# Age of Participants\nIn this section we examine the age distribution of competing athletes at the Summer Games. Again, care is taken to remove multiple appearances by an athlete at a single games so the results are not skewed. The results are shown below.","eaac5775":"Next, we select a subset of the data for the last eight hosts of the Summer Olympics. This goes back to 1988 when South Korea hosted, the Games had reached relatively high participation and the boycotts that had complicated the prior three Games were over. To account for the varying number of events, the percentage of available medals won by each team was calculated with the results shown below.","c6acf773":"# Conclusions\nA general analysis of 120 years worth of Olympic data has been carried out. We have seen how the number of events at the Olympic Games has increased over the years, with the number of Summer events plateauing at around 300 since the year 2000. Female participation has increased significantly since the 1980s with the ratio of male to female athletes close to reaching parity at the last Games held in Brazil. Incredibly, nearly 12000 individual athletes competed at those Games. The number of countries has also increased over the years with effectively every country in the world taking part in the Summer Olympics since the year 2000.\n\nWe have looked at the age of athletes, finding that historically male athletes have been on average older (26.4 +\/- 6.4 years) than their female counterparts (24.6 +\/- 5.7 years). Looking at trends in age, we have seen there is a clear difference in the average age of successful female athletes in athletics, equestrian, gymnastic and swimming sports. Finally we examined the historical success of teams and observed that a host nation typically improves its performance in it's host year. The consistent success of individual teams raises some interesting questions and one avenue of further study would be to see how a team's performance correlates with factors such as population size and gross domestic product (GDP).","bb1fa795":"We see that the total number of male athletes has increased steadily over the years although it appears to have stabilised around the year 2000 at a remarkable 6000 to 7000 athletes. Meanwhile, female participation has historically lagged behind their male counterparts. Although women first begun to complete in 1900, their relative number showed only modest increases for many years. This appears to have changed around 1980 where relative participation rates began to markedly increase. Despite this, it is only in the last couple of Summer Olympics that gender parity is close to being achieved.","406a20bc":"By some distance the USA team is the most successfully of all time with a combined Russia (Soviet Union\/Russia) and Germany (East\/West) in second and third places respectively. Reassuringly, the medal counts are in [good agreement with other sources][1] though there are small differences. These mainly relate to either medals being rescinded due to doping or esoteric events like alpinism and aeronautics no longer being recognised.\n\n[1]: http:\/\/en.wikipedia.org\/wiki\/All-time_Olympic_Games_medal_table","72d11ad1":"Nonetheless, for simplicity the NOC codes were cross matched and the region data merged with the full dataset used throughout the rest of the report.","4cc26e17":"We see a general trend upwards in the number of participating teams with around twice as many competing at the Summer Games compared to Winter. Interestingly, the Summer Games has effectively had full participation since the 2000 Games and the IOC actually recognises slightly more teams than there are countries including 'Independent Olympic Athletes' and a 'Refugee Olympic Team'.\n\nIt is also worth noting that dips in the upward trend generally denote significant historical events. For example, twenty-nine (mainly African) countries boycotted the 1976 Summer Olympics in response to issues surrounding South African apartheid policies. This was followed by a tit-for-tat boycott of the Games in 1980 and 1984 by Western\/Eastern bloc countries related to the Soviet Union's invasion of Afghanistan in 1979.","4ba503c9":"A close look also reveals some facts to consider in later analysis. Firstly, no Games took place during World War I and II. Secondly, prior to 1992 the Summer and Winter Games took place in the same year but starting in 1994 they have been held 2 years apart. Thirdly, this dataset includes entries for the 1906 'Intercalated Games', which although at the time was considered an Olympic Games is [no longer recognised by the International Olympic Committee][1].\n\nAs an aside, one can list the event names which throws up some unusual examples. For example, some early Summer Games (1912 to 1948) included a variety of artistic based events where there were medals for architecture, literature, music, painting and sculpture. From 1924 to 1936 medals were also awarded for feats of alpinism and aeronautics during the previous four year period. Events such as these and the aforementioned '1906 Intercalated Games' prove to be controversial when compiling all-time medal tables, a topic that shall be returned to later.\n\n[1]:http:\/\/en.wikipedia.org\/wiki\/1906_Intercalated_Games","3ac97840":"# Does Hosting Boost Success?\nFinally, we will examine whether a country hosting the Summer Games wins more medals than it usually does. To start with we calculate the total number of medals won by each region in each year of the Summer Olympics. As mentioned previously, we choose to ignore medals won at the 1906 Games as these are not officially recognised by the IOC. We also take care to only count a single medal for a team event win rather than one for every member of the team. The top ten medal winning teams of all time are shown in the table below.","238ba829":"## Number of Participating Athletes\nNext we look at the number of athletes that have competed at the Summer Olympic Games. Here, care needs to be taken as a single athlete can participate in multiple events at each Games. As such the athletes unique ID is used to tally the number of individuals for each year. The results are shown below.","e52b9f92":"Even for teams that have been named correctly there can be ambiguity, for example with countries that have changed names (Ceylon to Sri Lanka) or been split and reunified (East\/West Germany). To correct for this, a separate list accompanying the Olympic dataset provides historic National Olympic Committee (NOC) codes and the regions they now correspond to. While this solution is straightforward it is arguably too simplistic as historically different nations are given the same team name. A prominent example are athletes that competed for the former Soviet Union (URS) are considered to be from the same region as modern day Russia (RUS), despite the former consisting of [15 separate states][1].\n\n[1]: https:\/\/en.wikipedia.org\/wiki\/Soviet_Union_at_the_Olympics","70b2706c":"We see that both male and female distributions are fairly Gaussian, skewed slightly with older athletes forming a tail. Historically, female athletes appear to be slightly younger than their male counterparts with the average age of a male athlete being 26.4 +\/- 6.4 years while for female athletes it is 24.6 +\/- 5.7 years. \n\nSearching the dataset for extremes we see that the youngest athlete was Dimitrios Loundras who at 10 years of age won a Bronze medal at Gymnastics for the Men's Parallel Bars team event at the 1896 Summer Olympics in Athens. At the other extreme, the oldest Olympic competitor was John Quincy Adams Ward who at the age of 97 took part in the Art Competitions Mixed Sculpturing, Statues event in 1928.","4a522194":"# The Dataset\nThe dataset analysed here spans both summer and winter Olympics held between 1896 and 2016, it contains details of every event held and the athletes who competed. Each athlete has a unique ID number, with some athletes participating at multiple events and across different Olympics. The full dataset consists of 271,116 rows and 15 columns. The columns consist of: Athlete ID, Name, Gender, Age, Height, Weight, Team, National Olympic Committee 3-letter Code, Name of Games, Year Held, Season, Host City, Sport, Event, and Medal Won. Missing data or if an athlete failed to win a medal are stored as NaN.","723d8b83":"## Number of Countries Participating\nNext we look at how the number of participating countries at both the Summer and Winter Olympics has varied with time. The figure below shows the data after the team names had been unified using the NOC dataset."}}