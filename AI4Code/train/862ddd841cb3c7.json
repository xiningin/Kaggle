{"cell_type":{"8bf6dba9":"code","f47ae289":"code","81bc76f7":"code","ba9fd831":"code","15d4da55":"code","37fd8dad":"code","ac98a8bf":"code","9acb2026":"code","7c4c1201":"code","ea2ab636":"code","949e1ead":"code","b80209c1":"code","df677e07":"code","a8b4efcd":"code","fcaf3dd9":"code","dee382f0":"code","ae762a95":"markdown","a9df9ad0":"markdown","d186d928":"markdown","5c82687e":"markdown","8ce41039":"markdown","6ebfb4f1":"markdown","564bb553":"markdown"},"source":{"8bf6dba9":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport squarify\n\n%matplotlib inline","f47ae289":"df = pd.read_csv(\"..\/input\/top-250-football-transfers-from-2000-to-2018\/top250-00-19.csv\")","81bc76f7":"df.info()","ba9fd831":"df.drop('Market_value', axis=1, inplace=True)","15d4da55":"df['Position'].unique()","37fd8dad":"df['Position'] = df['Position'].replace(['Sweeper', 'Defender'], 'Defensive Midfield')\ndf['Position'] = df['Position'].replace(['Forward'], 'Centre Forward')\ndf['Position'] = df['Position'].replace(['Midfielder'], 'Defensive Midfield')\ndf['Position'] = df['Position'].replace(['Centre-Forward'], 'Centre Forward')\ndf['Position'] = df['Position'].replace(['Centre-Back'], 'Centre Back')\ndf['Position'] = df['Position'].replace(['Left-Back'], 'Left Back')\ndf['Position'] = df['Position'].replace(['Right-Back'], 'Right Back')","ac98a8bf":"df['Team_to'] = df['Team_to'].replace(['Spurs'], 'Tottenham')","9acb2026":"position = df['Position'].value_counts().rename_axis('Position').reset_index(name='counts')\n\nsizes = position['counts']\nnames = position['Position']\ncolor = ['b','m','g','y','c','r','w']\nplt.figure(figsize = (12,8), dpi=80)\n\nsquarify.plot(sizes = sizes, label = names, alpha = 0.5, color = color)\nplt.axis('off')\nplt.title('Treemap by Player Positions', fontsize = 16)\nplt.show()","7c4c1201":"df.sort_values('Transfer_fee', ascending = False).head(10)","ea2ab636":"grouped_league_to = df.groupby('League_to')['Transfer_fee'].aggregate([min,np.mean,max,sum]).sort_values('sum', ascending = False).reset_index().head(10)\ngrouped_league_to","949e1ead":"sns.set_style(\"darkgrid\")\n\n\nfig, ax = plt.subplots(figsize = (10,5))\n(grouped_league_to['sum']\/1000000).sort_values(ascending = False).plot(kind = 'bar', color = 'magenta')\nplt.xticks(range(len(grouped_league_to['League_to'])), grouped_league_to['League_to'], rotation = 45)\nplt.ylabel('Million EUR', fontsize = 12)\nplt.title('Total Transfer Fee', fontsize = 14)\n           \nplt.show()","b80209c1":"premier = df['League_to'] == 'Premier League'\ndf_premier = df[premier]\ndf_premier.sort_values('Transfer_fee', ascending = False).head()","df677e07":"grouped_df_premier = df_premier.groupby('Season')['Transfer_fee'].aggregate(['sum']).reset_index()\n\nfig, ax = plt.subplots(figsize = (15,7))\n(grouped_df_premier['sum']\/1000000).plot(color = 'red')\n(grouped_df_premier['sum']\/1000000).plot(kind = 'bar', color = 'yellow', alpha = 0.5)\nplt.xticks(range(len(grouped_df_premier['Season'])),grouped_df_premier['Season'], rotation = 45)\nplt.ylabel('Million EUR', fontsize = 12)\nplt.xlabel('Season', fontsize = 12)\nplt.title('Premier League Market Behavior', fontsize = 14)\n\nplt.show()","a8b4efcd":"top_5_teams = df_premier.groupby('Team_to')['Transfer_fee'].aggregate('sum').sort_values(ascending = False).reset_index().head(5)\ntop_5_teams","fcaf3dd9":"fig, ax = plt.subplots(figsize = (10,7))\n\n(top_5_teams['Transfer_fee']\/10000).plot(kind = 'bar', color = 'purple', alpha = 0.8)\nplt.xticks(range(len(top_5_teams['Team_to'])), top_5_teams['Team_to'], rotation = 'horizontal')\nplt.ylabel('Million EUR', fontsize = 12)\nplt.title('Total transfer over seasons by top five teams in the premier league', fontsize = 14)\n\nplt.show()","dee382f0":"fig, ax = plt.subplots(figsize = (15,7))\n\nfor team in range(len(list(top_5_teams['Team_to']))):\n    top_team = df['Team_to'] == top_5_teams['Team_to'][team]\n    df_top_team = df[top_team]\n    grouped_df_top_team = df_top_team.groupby('Season')['Transfer_fee'].aggregate(['sum']).reset_index()\n    (grouped_df_top_team['sum']\/1000000).plot()\n    plt.legend(list(top_5_teams['Team_to']))\n\nplt.xticks(range(len(grouped_df_premier['Season'])),grouped_df_premier['Season'], rotation = 45)\nplt.ylabel('Million EUR', fontsize = 12)\nplt.xlabel('Season', fontsize = 12)\nplt.title('Top 5 Premier League Buyers over seasons', fontsize = 14)    \n    \nplt.show()","ae762a95":"Now that we know that most wanted players are the Centre Forward, lets see the top 10 transfers and which league spend more money.","a9df9ad0":"I decided to change the 'Spurs' for Tottenham becuase the first one is an alias.","d186d928":"Finally lets take a look to the top 5 teams in the Premier Legue according to the transfer fees in time.","5c82687e":"### Clean data\n\nThis dataset is really clean, there is only on column with null values, the 'Market_value' with more than a thousand null values. I decide to not use this column so I droped it.\n\nI also change some names for the 'Position' values, because there were some values with different names for the same position, and there also were two different formats in the name (using spaces, and using \"-\").","8ce41039":"# Football Transfer Analysis\n\nIn this notebook I did a quick analysis for the top 250 football transfer from the year 2000 to 2018 using pandas and matplotlib.\n\nYou can also find here a visualization in Tableau [here](https:\/\/public.tableau.com\/profile\/mauricio3833#!\/vizhome\/TopFootballTransfers2000-2018\/Historia1). ","6ebfb4f1":"We found that the Premier League spend the most money in all the time from 2000 to 2018, so lets see the behavior in time of this league.","564bb553":"## Visualization\n\nFirst we found which is the most valuable player position with a treemap using [Squarify](https:\/\/github.com\/laserson\/squarify) library."}}