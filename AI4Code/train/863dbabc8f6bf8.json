{"cell_type":{"87eab583":"code","c5be8243":"code","9478f6a3":"code","2b7364da":"code","f2ce256f":"code","e675a6ab":"code","94b747b0":"code","61d2852a":"code","b7043c43":"code","3f6b4cfa":"code","f96317bc":"code","e76119b7":"code","240c3b26":"code","2fdbf6a6":"code","55d24d31":"code","a3a00dce":"code","31fb09a3":"code","13973c48":"code","d64b5e9a":"code","8126f772":"code","b0c432b6":"code","28551633":"code","88567708":"code","819da7f1":"code","6203caeb":"code","2d2b709f":"code","735c9e79":"code","9c26f695":"code","0f8234ba":"code","a9ad1e73":"code","df93dadd":"code","18297fab":"code","7ba874a8":"code","7d2970fa":"code","fa199249":"code","a8725b65":"code","d615e2fe":"code","51f31f29":"code","9a658f12":"code","29c9e858":"code","2dc88009":"code","2d805840":"code","7cc86d29":"code","a3bb5939":"code","42beb574":"code","9ec1eb49":"code","6ee411aa":"code","63def422":"code","640a0227":"code","6086f2ae":"code","cc02f274":"markdown","bb2ec510":"markdown","e62bc65c":"markdown","8684182d":"markdown","bb0af05a":"markdown","a9142e66":"markdown","1fb04d69":"markdown","9eae75cc":"markdown","1c2622a6":"markdown","8af7454d":"markdown","751d5ca5":"markdown","91790f5f":"markdown","abb2b371":"markdown","90cadfc7":"markdown","9c4c086b":"markdown","4752ce8d":"markdown","43ea24a0":"markdown","18421132":"markdown","0c42d02b":"markdown","603c05d3":"markdown","aa262c22":"markdown","f4be2f70":"markdown","48d042c8":"markdown","427f3153":"markdown","69d978e6":"markdown","a6cfc7fc":"markdown","ee7e1e90":"markdown","f87ae6ff":"markdown","f72bb91b":"markdown","2416b0e6":"markdown","a62357f8":"markdown","b0c649cf":"markdown","33685c38":"markdown","f0b09d8f":"markdown","222a02ad":"markdown","6b741386":"markdown","e931c86f":"markdown","004004f3":"markdown","ba1bcb96":"markdown","da37839e":"markdown","4683d311":"markdown","b426400e":"markdown","9b0abfbf":"markdown","b252b93f":"markdown","063f9a97":"markdown","6d038934":"markdown","a8129c5b":"markdown","5e77f309":"markdown","02e5de18":"markdown","97948990":"markdown","c951263a":"markdown","dd11e030":"markdown","e2cf14d0":"markdown","d3ff4db6":"markdown","3e8944a2":"markdown","8f78861b":"markdown","eedf9dc2":"markdown","b1131779":"markdown"},"source":{"87eab583":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib import rcParams\nfrom scipy import stats\n\n#To plot figs on jupyter\n%matplotlib inline\n# figure size in inches\nrcParams['figure.figsize'] = 14,6","c5be8243":"df_loan = pd.read_csv(\"..\/input\/loan.csv\",low_memory=False)","9478f6a3":"def resumetable(df):\n    print(f\"Dataset Shape: {df.shape}\")\n    summary = pd.DataFrame(df.dtypes,columns=['dtypes'])\n    summary = summary.reset_index()\n    summary['Name'] = summary['index']\n    summary = summary[['Name','dtypes']]\n    summary['Missing'] = df.isnull().sum().values    \n    summary['Uniques'] = df.nunique().values\n    summary['First Value'] = df.loc[0].values\n    summary['Second Value'] = df.loc[1].values\n    summary['Third Value'] = df.loc[2].values\n\n    for name in summary['Name'].value_counts().index:\n        summary.loc[summary['Name'] == name, 'Entropy'] = round(stats.entropy(df[name].value_counts(normalize=True), base=2),2) \n\n    return summary","2b7364da":"resumetable(df_loan[:100000])[:60]","f2ce256f":"resumetable(df_loan[:100000])[60:112]","e675a6ab":"resumetable(df_loan[:100000])[112:]","94b747b0":"total = len(df_loan)\n\nplt.figure(figsize = (14,6))\n\ng = sns.countplot(x=\"loan_status\", data=df_loan, \n                  color='blue')\ng.set_xticklabels(g.get_xticklabels(),rotation=45)\ng.set_xlabel(\"Loan Status Categories\", fontsize=12)\ng.set_ylabel(\"Count\", fontsize=15)\ng.set_title(\"Loan Status Types Distribution\", fontsize=20)\nsizes=[]\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=12) \ng.set_ylim(0, max(sizes) * 1.10)\n\nplt.show()","61d2852a":"df_loan = df_loan.loc[df_loan['loan_status'].isin(['Fully Paid', 'Charged Off', 'Default'])]","b7043c43":"\nplt.figure(figsize=(14,6))\n\ng = sns.countplot(x='purpose', data=df_loan, \n                  color='blue')\ng.set_title(\"Client Purposes for Loan Credit\", fontsize=22)\ng.set_xlabel(\"Purpose Titles\", fontsize=18)\ng.set_ylabel('Count', fontsize=18)\n\nsizes=[]\n\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=14) \n    \ng.set_ylim(0, max(sizes) * 1.10)\ng.set_xticklabels(g.get_xticklabels(),\n                  rotation=45)\n\nplt.show()","3f6b4cfa":"df_loan['int_round'] = df_loan['int_rate'].round(0).astype(int)\n\n#I will start looking the loan_amnt column\nplt.figure(figsize=(14,10))\n\n# Loan Amt plot\nplt.subplot(211)\ng = sns.distplot(df_loan[\"loan_amnt\"])\ng.set_xlabel(\"Loan Amount Value\", fontsize=16)\ng.set_ylabel(\"Frequency\", fontsize=16)\ng.set_title(\"Loan Amount Distribuition\", fontsize=20)\n\n## Interest plot\nplt.subplot(212)\ng1 = sns.countplot(x=\"int_round\", data=df_loan, \n                  color='blue')\ng1.set_xlabel(\"Loan Interest Rate\", fontsize=16)\ng1.set_ylabel(\"Count\", fontsize=16)\ng1.set_title(\"Interest Rate Distribuition\", fontsize=20)\nsizes=[] # Get highest values in y\nfor p in g1.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g1.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=12) \ng1.set_ylim(0, max(sizes) * 1.10) # set y limit based on highest heights\n\nplt.subplots_adjust(hspace = 0.4,top = 0.9)\n\nplt.show()","f96317bc":"df_loan.loc[df_loan.loan_status == \\\n            'Does not meet the credit policy. Status:Fully Paid', 'loan_status'] = 'NMCP Fully Paid'\ndf_loan.loc[df_loan.loan_status == \\\n            'Does not meet the credit policy. Status:Charged Off', 'loan_status'] = 'NMCP Charged Off'","e76119b7":"plt.figure(figsize = (12,16))\n\nplt.subplot(311)\ng = sns.countplot(x=\"loan_status\", data=df_loan, \n                  color='blue')\ng.set_xticklabels(g.get_xticklabels(),rotation=45)\ng.set_xlabel(\"Loan Status Categories\", fontsize=12)\ng.set_ylabel(\"Count\", fontsize=15)\ng.set_title(\"Loan Status Types Distribution\", fontsize=20)\nsizes=[]\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=12) \ng.set_ylim(0, max(sizes) * 1.10)\n\nplt.subplot(312)\ng1 = sns.boxplot(x=\"loan_status\", y=\"int_round\", data=df_loan, \n                 color='blue')\ng1.set_xticklabels(g1.get_xticklabels(),rotation=45)\ng1.set_xlabel(\"Loan Status Categories\", fontsize=12)\ng1.set_ylabel(\"Interest Rate Distribution\", fontsize=15)\ng1.set_title(\"Loan Status by Interest Rate\", fontsize=20)\n\nplt.subplot(313)\ng2 = sns.boxplot(x=\"loan_status\", y=\"loan_amnt\", data=df_loan, \n                 color='blue')\ng2.set_xticklabels(g2.get_xticklabels(),rotation=45)\ng2.set_xlabel(\"Loan Status Categories\", fontsize=15)\ng2.set_ylabel(\"Loan Amount Distribution\", fontsize=15)\ng2.set_title(\"Loan Status by Loan Amount\", fontsize=20)\n\nplt.subplots_adjust(hspace = 0.7,top = 0.9)\n\nplt.show()","240c3b26":"df_loan['issue_month'], df_loan['issue_year'] = df_loan['issue_d'].str.split('-', 1).str","2fdbf6a6":"months_order = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \n                \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\ndf_loan['issue_month'] = pd.Categorical(df_loan['issue_month'],\n                                        categories=months_order, \n                                        ordered=True)\n#Issue_d x loan_amount\nplt.figure(figsize = (15,16))\n\nplt.subplot(311)\ng = sns.countplot(x='issue_month', hue='issue_year', \n                  data=df_loan[df_loan['issue_year'].astype(int) >= 2012])\n#g.set_xticklabels(g.get_xticklabels(),rotation=90)\ng.set_xlabel(\"Months of Year\", fontsize=15)\ng.set_ylabel(\"Count Loans\", fontsize=15)\ng.legend(loc='best')\ng.set_title(\"Loan Amount by Months\", fontsize=20)\n\nplt.subplot(312)\n#Looking the count of defaults though the issue_d that is The month which the loan was funded\ng1 = sns.countplot(x='issue_year', hue='term', \n                   data=df_loan)\ng1.set_xticklabels(g1.get_xticklabels(),rotation=90)\ng1.set_xlabel(\"Years\", fontsize=15)\ng1.set_ylabel(\"Count Loans\", fontsize=15)\ng1.set_title(\"Total Loans by Years - With Term requested\", fontsize=20)\nsizes=[]\nfor p in g1.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g1.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=12) \ng1.set_ylim(0, max(sizes) * 1.10)\n\nplt.subplot(313)\n#Looking the count of defaults though the issue_d that is The month which the loan was funded\ng2 = sns.countplot(x='issue_year', data=df_loan.loc[(df_loan['loan_status'] == 'Charged Off') | \n                                                   (df_loan['loan_status'] == 'NMCP Charged Off') |\n                                                   (df_loan['loan_status'] == 'Default')],\n                  hue='term',)\ng2.set_xticklabels(g.get_xticklabels(),rotation=90)\ng2.set_xlabel(\"Dates\", fontsize=15)\ng2.set_ylabel(\"Count\", fontsize=15)\ng2.set_title(\"Analysing Charge Off and Default by Years\", fontsize=20)\nsizes=[]\nfor p in g2.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g2.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=12) \ng2.set_ylim(0, max(sizes) * 1.10)\n\nplt.subplots_adjust(hspace = 0.3,top = 0.9)\n\nplt.show()","55d24d31":"#Exploring the loan_status x purpose\npurp_loan= ['purpose', 'loan_status']\ncm = sns.light_palette(\"green\", as_cmap=True)\n(round(pd.crosstab(df_loan[purp_loan[0]], df_loan[purp_loan[1]], \n                   normalize='columns') * 100,2)).style.background_gradient(cmap = cm)","a3a00dce":"loan_grade = ['loan_status', 'grade']\ncm = sns.light_palette(\"green\", as_cmap=True)\npd.crosstab(df_loan[loan_grade[0]], df_loan[loan_grade[1]]).style.background_gradient(cmap = cm)\n","31fb09a3":"loan_grade = ['loan_status', 'grade']\ncm = sns.light_palette(\"green\", as_cmap=True)\nround(pd.crosstab(df_loan[loan_grade[0]], df_loan[loan_grade[1]], \n            values=df_loan['int_rate'], aggfunc='mean'),2).fillna(0).style.background_gradient(cmap = cm)","13973c48":"plt.figure(figsize = (13,6))\n\ng = sns.countplot(x=\"verification_status\", data=df_loan, \n                  color='blue')\ng.set_xlabel(\"Loan Status Categories\", fontsize=15)\ng.set_ylabel(\"Count\", fontsize=15)\ng.set_title(\"Loan Status Types Distribution\", fontsize=20)\nsizes=[]\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=14) \ng.set_ylim(0, max(sizes) * 1.10)\n\nplt.show()","d64b5e9a":"#Looking the 'verification_status' column that is the Indicates \n#if the co-borrowers' joint income was verified by LC, not verified, or if the income source was verified\nloan_verification = ['loan_status', 'verification_status']\ncm = sns.light_palette(\"green\", as_cmap=True)\npd.crosstab(df_loan[loan_verification[0]], df_loan[loan_verification[1]], \n            normalize='index').style.background_gradient(cmap = cm)","8126f772":"plt.figure(figsize=(12,5))\n\nsns.distplot(df_loan['installment'])\nplt.title(\"Installment Distribution\", fontsize=20)\nplt.xlabel(\"Installment Range\", fontsize=17)\nplt.ylabel(\"Density\", fontsize=17)\n\nplt.show()","b0c432b6":"plt.figure(figsize = (14,12))\n\nplt.subplot(211)\ng = sns.violinplot(x='loan_status', y=\"installment\",\n                   data=df_loan, color='blue')\ng.set_xticklabels(g.get_xticklabels(),rotation=45)\ng.set_xlabel(\"Loan Status\", fontsize=17)\ng.set_ylabel(\"Installment\", fontsize=17)\ng.set_title(\"Installment Distribution by Loan Status\", fontsize=20)\n\nplt.subplot(212)\ng1 = sns.violinplot(x='loan_status', y=\"total_acc\",\n                   data=df_loan, color='blue')\ng1.set_xticklabels(g.get_xticklabels(),rotation=45)\ng1.set_xlabel(\"Loan Status\", fontsize=17)\ng1.set_ylabel(\"Total Account lines\", fontsize=17)\ng1.set_title(\"Total Account Lines Distribution by Loan Status\", fontsize=20)\n\nplt.subplots_adjust(hspace = 0.5,top = 0.9)\n\nplt.show()","28551633":"#Exploring the loan_status x Application_type\nloan_application = ['loan_status', 'application_type']\ncm = sns.light_palette(\"green\", as_cmap=True)\npd.crosstab(df_loan[loan_application[0]], df_loan[loan_application[1]]).style.background_gradient(cmap = cm)","88567708":"plt.figure(figsize = (12,14))\n#The amount and int rate x application_type \nplt.subplot(211)\ng = sns.violinplot(x=\"application_type\", y=\"loan_amnt\",data=df_loan, \n            palette=\"hls\")\ng.set_title(\"Application Type - Loan Amount\", fontsize=20)\ng.set_xlabel(\"\", fontsize=15)\ng.set_ylabel(\"Loan Amount\", fontsize=15)\n\nplt.subplot(212)\ng1 = sns.violinplot(x=\"application_type\", y=\"int_rate\",data=df_loan,\n               palette=\"hls\")\ng1.set_title(\"Application Type - Interest Rate\", fontsize=20)\ng1.set_xlabel(\"\", fontsize=15)\ng1.set_ylabel(\"Int Rate\", fontsize=15)\n\nplt.subplots_adjust(wspace = 0.4, hspace = 0.4,top = 0.9)\n\nplt.show()","819da7f1":"plt.figure(figsize = (14,12))\n\nplt.subplot(211)\ng = sns.violinplot(x=\"home_ownership\",y=\"loan_amnt\",data=df_loan,\n               kind=\"violin\",\n               split=True,palette=\"hls\",\n               hue=\"application_type\")\ng.set_title(\"Homer Ownership - Loan Amount Distribuition\", fontsize=20)\ng.set_xlabel(\"\", fontsize=15)\ng.set_ylabel(\"Loan Amount\", fontsize=15)\n\nplt.subplot(212)\ng1 = sns.violinplot(x=\"home_ownership\",y=\"int_rate\",data=df_loan,\n               kind=\"violin\",\n               split=True,palette=\"hls\",\n               hue=\"application_type\")\ng1.set_title(\"Homer Ownership - Interest Rate Distribuition\", fontsize=20)\ng1.set_xlabel(\"\", fontsize=15)\ng1.set_ylabel(\"Interest Rate\", fontsize=15)\n\nplt.subplots_adjust(hspace = 0.3,top = 0.9)\n\nplt.show()","6203caeb":"loan_home = ['loan_status', 'home_ownership']\ncm = sns.light_palette(\"green\", as_cmap=True)\nround(pd.crosstab(df_loan[loan_home[0]], df_loan[loan_home[1]], \n            normalize='index'),2).fillna(0).style.background_gradient(cmap = cm)","2d2b709f":"# Now will start exploring the Purpose variable\nplt.figure(figsize = (14,13))\n\nplt.subplot(211)\ng = sns.violinplot(x=\"purpose\",y=\"int_rate\",data=df_loan,\n                    hue=\"application_type\", split=True)\ng.set_xticklabels(g.get_xticklabels(),rotation=45)\ng.set_title(\"Purposes - Interest Rate Distribution by Application Type\", fontsize=20)\ng.set_xlabel(\"Purpose Category's\", fontsize=17)\ng.set_ylabel(\"Interest Rate Distribution\", fontsize=17)\n\nplt.subplot(212)\ng1 = sns.violinplot(x=\"purpose\",y=\"loan_amnt\",data=df_loan,\n                    hue=\"application_type\", split=True)\ng1.set_xticklabels(g1.get_xticklabels(),rotation=45)\ng1.set_title(\"Purposes - Loan Amount Distribution by Application Type\", fontsize=20)\ng1.set_xlabel(\"Purpose Category's\", fontsize=17)\ng1.set_ylabel(\"Loan Amount Distribution\", fontsize=17)\n\nplt.subplots_adjust(hspace = 0.5,top = 0.9)\n\nplt.show()","735c9e79":"order_sub = df_loan.groupby(\"sub_grade\")['int_rate'].count().index\n\nplt.figure(figsize=(14,16))\n\nplt.suptitle('Grade and Sub-Grade Distributions \\n# Interest Rate and Loan Amount #', fontsize=22)\n\nplt.subplot(311)\ng = sns.boxplot(x=\"grade\", y=\"loan_amnt\", data=df_loan,\n                palette=\"hls\", hue=\"application_type\", \n                order=[\"A\",'B','C','D','E','F', 'G'])\ng.set_xlabel(\"Grade Values\", fontsize=17)\ng.set_ylabel(\"Loan Amount\", fontsize=17)\ng.set_title(\"Lending Club Loan - Loan Amount Distribution by Grade\", fontsize=20)\ng.legend(loc='upper right')\n\nplt.subplot(312)\ng1 = sns.boxplot(x='grade', y=\"int_rate\",data=df_loan, \n               hue=\"application_type\", palette = \"hls\",  \n               order=[\"A\",'B','C','D','E','F', 'G'])\ng1.set_xlabel(\"Grade Values\", fontsize=17)\ng1.set_ylabel(\"Interest Rate\", fontsize=17)\ng1.set_title(\"Lending Club Loan - Interest Rate Distribution by Grade\", fontsize=20)\n\nplt.subplot(313)\ng2 = sns.boxenplot(x=\"sub_grade\", y=\"int_rate\", data=df_loan, \n                   palette=\"hls\", order=order_sub)\ng2.set_xlabel(\"Sub Grade Values\", fontsize=15)\ng2.set_ylabel(\"Interest Rate\", fontsize=15)\ng2.set_title(\"Lending Club Loan - Interest Rate Distribution by Sub-Grade\", fontsize=20)\n\nplt.subplots_adjust(hspace = 0.4,top = 0.9)\n\nplt.show()","9c26f695":"loan_grade = ['sub_grade', 'grade']\ncm = sns.light_palette(\"green\", as_cmap=True)\nround(pd.crosstab(df_loan[loan_grade[0]], df_loan[loan_grade[1]], \n            values=df_loan['int_rate'], aggfunc='mean'),2).fillna(0).style.background_gradient(cmap = cm)","0f8234ba":"import plotly.offline as py\npy.init_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.tools as tls\nimport warnings\nfrom collections import Counter","a9ad1e73":"#First plot\ntrace0 = go.Bar(\n    x = df_loan.emp_title.value_counts()[:40].index.values,\n    y = df_loan.emp_title.value_counts()[:40].values,\n    marker=dict(\n        color=df_loan.emp_title.value_counts()[:40].values\n    ),\n)\n\ndata = [trace0]\n\nlayout = go.Layout(\n    yaxis=dict(\n        title='Count'\n    ),\n    xaxis=dict(\n        title='Employment name'\n    ),\n    title='TOP 40 Employment Title'\n)\n\nfig = go.Figure(data=data, layout=layout)\n\npy.iplot(fig, filename='emp-title-bar')","df93dadd":"title_mask = df_loan.emp_title.value_counts()[:20].index.values \ncm = sns.light_palette(\"green\", as_cmap=True)\n\nround(pd.crosstab(df_loan[df_loan['emp_title'].isin(title_mask)]['emp_title'], \n                  df_loan[df_loan['emp_title'].isin(title_mask)]['sub_grade'], \n                  normalize='index') * 100,2).style.background_gradient(cmap = cm)","18297fab":"#First plot\ntrace0 = go.Bar(\n    x = df_loan.title.value_counts()[:40].index.values,\n    y = df_loan.title.value_counts()[:40].values,\n    marker=dict(\n        color=df_loan.title.value_counts()[:40].values\n    ),\n)\n\ndata = [trace0]\n\nlayout = go.Layout(\n    yaxis=dict(\n        title='Count'\n    ),\n    xaxis=dict(\n        title='Employment name'\n    ),\n    title='TOP 40 Employment Title'\n)\n\nfig = go.Figure(data=data, layout=layout)\n\npy.iplot(fig, filename='emp-title-bar')","7ba874a8":"# emp_lenght description: \n# Employment length in years. Possible values are between 0 and 10 where 0 means \n# less than one year and 10 means ten or more years. \n\nemp_ord = ['< 1 year', '1 year', '2 years', '3 years',\n           '4 years', '5 years', '6 years', '7 years',\n           '8 years', '9 years', '10+ years']\n\nfig, ax = plt.subplots(2,1, figsize=(14,11))\ng = sns.boxplot(x=\"emp_length\", y=\"int_rate\", data=df_loan,\n                ax=ax[0], color='blue',\n                order=emp_ord)\n\nz = sns.violinplot(x=\"emp_length\", y=\"loan_amnt\",data=df_loan, \n                   ax=ax[1], color='blue',\n                   order=emp_ord)\n               \nplt.legend(loc='upper left')\nplt.show()","7d2970fa":"# Emp Length interest rate mean\ndf_loan.groupby([\"emp_length\"])['int_rate'].mean().reset_index().T","fa199249":"order_sub = df_loan.groupby(\"sub_grade\")['int_rate'].count().index\n\nplt.figure(figsize=(14,18))\n\nplt.suptitle('Term Distributions \\n# Count, Interest Rate and Loan Amount #', fontsize=22)\n\nplt.subplot(311)\ng = sns.countplot(x=\"term\", data=df_loan,color='blue')\ng.set_xlabel(\"Term Values\", fontsize=17)\ng.set_ylabel(\"Count\", fontsize=17)\ng.set_title(\"Lending Club Loan \\nTerm Count Distribution\", fontsize=20)\nsizes=[]\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=14) \ng.set_ylim(0, max(sizes) * 1.10)\n\nplt.subplot(312)\ng1 = sns.violinplot(x='term', y=\"int_rate\",data=df_loan )\ng1.set_xlabel(\"Term Values\", fontsize=17)\ng1.set_ylabel(\"Interest Rate\", fontsize=17)\ng1.set_title(\"Lending Club Loan \\nInterest Rate Distribution by Term Values\", fontsize=20)\n\nplt.subplot(313)\ng2 = sns.violinplot(x=\"term\", y=\"loan_amnt\", data=df_loan)\ng2.set_xlabel(\"Term Values\", fontsize=17)\ng2.set_ylabel(\"Loan Amount\", fontsize=17)\ng2.set_title(\"Lending Club Loan \\nLoan Amount Distribution by Term Values\", fontsize=20)\n\nplt.subplots_adjust(hspace = 0.4, top = 0.9)\n\nplt.show()","a8725b65":"#Exploring the State Adress x Loan Status\nadress_loan = ['addr_state', 'loan_status']\ncm = sns.light_palette(\"green\", as_cmap=True)\nround(pd.crosstab(df_loan[adress_loan[0]], \n                  df_loan[adress_loan[1]], \n                  normalize='all')*100,2).style.background_gradient(cmap = cm)","d615e2fe":"cols = ['loan_amnt', 'funded_amnt', 'funded_amnt_inv', 'term', 'int_rate',\n        'installment', 'grade', 'sub_grade', 'emp_title', 'emp_length',\n        'home_ownership', 'desc', 'purpose', 'total_pymnt', 'total_pymnt_inv',]","51f31f29":"df_loan['settlement_status'].fillna(\"None\", inplace=True)","9a658f12":"plt.figure(figsize=(16,18))\n\nplt.subplot(311)\ng = sns.countplot(x='settlement_status', data=df_loan, color='blue')\ng.set_title('Settlement Status Distribution', fontsize=21)\ng.set_ylabel(\"Count\", fontsize=17)\ng.set_xlabel(\"Settlement Status\", fontsize=17)\n\nsizes=[]\nfor p in g.patches:\n    height = p.get_height()\n    sizes.append(height)\n    g.text(p.get_x()+p.get_width()\/2.,\n            height + 3,\n            '{:1.2f}%'.format(height\/total*100),\n            ha=\"center\", fontsize=14) \ng.set_ylim(0, max(sizes) * 1.10)\n\nplt.subplot(312)\ng1 = sns.violinplot(x='settlement_status', y=\"int_rate\",\n                    data=df_loan, color='blue') \ng1.set_xlabel(\"Settlement Status\", fontsize=17)\ng1.set_ylabel(\"Interest Rate\", fontsize=17)\ng1.set_title(\"Interest Rate Distribution by Settlement Status\", \n             fontsize=20)\n\nplt.subplot(313)\ng2 = sns.violinplot(x=\"settlement_status\", y=\"loan_amnt\", \n                    data=df_loan, color='blue')\ng2.set_xlabel(\"Settlement Status\", fontsize=17)\ng2.set_ylabel(\"Loan Amount\", fontsize=17)\ng2.set_title(\"Loan Amount Distribution by Settlement Status\", \n             fontsize=20)\n\nplt.subplots_adjust(hspace = 0.4, top = 0.9)\n\nplt.show()","29c9e858":"df_loan['loan_value'] = (100 * df_loan.revol_bal) \/ df_loan['revol_util']","2dc88009":"round(pd.crosstab(df_loan['delinq_2yrs'],df_loan['loan_status'],   normalize='columns') * 100,2)[:15]","2d805840":"cm = sns.light_palette(\"green\", as_cmap=True)\n\nround((pd.crosstab(df_loan['loan_status'], df_loan['purpose'],\n            values=df_loan['dti'], aggfunc='mean')).fillna(0),\n      2).style.background_gradient(cmap = cm)","7cc86d29":"cm = sns.light_palette(\"green\", as_cmap=True)\n\nround((pd.crosstab(df_loan['loan_status'], df_loan['purpose'],\n            values=df_loan['revol_util'], aggfunc='mean')).fillna(0),\n      2).style.background_gradient(cmap = cm)","a3bb5939":"resumetable(df_loan.reset_index())[:45]","42beb574":"df_loan.select_dtypes(include=[int, float]).head()","9ec1eb49":"numericals_clusters = ['loan_amnt', 'annual_inc', 'dti', 'total_acc', 'loan_status',\n                       'revol_bal', 'revol_util', 'installment', 'int_rate']","6ee411aa":"resumetable(df_loan[numericals_clusters].reset_index())","63def422":"df_loan[df_loan['dti'].isna()][numericals_clusters].nunique()","640a0227":"df_loan[df_loan['dti'] == -1][numericals_clusters]","6086f2ae":"df_loan['dti'].value_counts()[df_loan['dti'].value_counts() == 312]","cc02f274":"## Crosstab - Home Ownership by Loan Status","bb2ec510":"# Delinq 2 years \n- The number of 30+ days past-due incidences of delinquency in the borrower's credit file for the past 2 years\n","e62bc65c":"### Resuming table. 61th to 120th","8684182d":"<h2> Importing our dataset<\/h2> ","bb0af05a":"<h2>Loan Status Distribuition<\/h2>","a9142e66":"## Emp Length Graphics","1fb04d69":"<h2> Importing the Librarys <\/h2> ","9eae75cc":"# Crosstab - Loan Status by Grade","1c2622a6":"Nice ! <br>\nWe can note that a big part of the loans are values until USD 10,000 ( we will explore the quantiles and outliers too) <br>\nAlso, many part of all loans have interest between 7% and 14%;  <br>\nIn <b>Interest Rate:<\/b> The most common is 14%, followed by 13% and 11%.","8af7454d":"<h2>INSTALLMENT Column <\/h2> <br>\n<i>The monthly payment owed by the borrower if the loan originates.<\/i>","751d5ca5":"# Purpose \n- Purpose - A category provided by the borrower for the loan request.\n- As it a categorical feature that says what's the purpose to the loan, would be interesting to start by Purpose. ","91790f5f":"## Mean interest rate by all grades and sub-grades","abb2b371":"# LOAN AMOUNT and INTEREST RATE Distributions\n<b>Loan Amount<\/b> - <i>The listed amount of the loan applied for by the borrower. If at some point in time, the credit department reduces the loan amount, then it will be reflected in this value.<\/i><br>\n<b>intRate <\/b>- <i>Interest Rate\u00a0on the loan<\/i>\n","90cadfc7":"Cool! The top 3 purposes are:\n- 56.5% of the Loans are to Debt Consolidation \n- 22.87% are to pay Credit Card \n- 6.67% to Home Improvement \n- and many others purposes that sums 13.94%","9c4c086b":"<b>About the dataset<\/b> <br>\nThese files contain complete loan data for all loans issued through the 2007-2015, including the current loan status (Current, Late, Fully Paid, etc.) and latest payment information. The file containing loan data through the \"present\" contains complete loan data for all loans issued through the previous completed calendar quarter. Additional features include credit scores, number of finance inquiries, address including zip codes, and state, and collections among others. The file is a matrix of about 890 thousand observations and 75 variables. A data dictionary is provided in a separate file.","4752ce8d":"Cool! We can note that the peak(60k) of loans was in March 2016; <br>\nThe data is more consistent after 2012 ~ 2013... And it's seem to a linear growth by the years","43ea24a0":"<h2>Distribuition of Application_tye thought the Loan Amount and Interest Rate<\/h2>","18421132":"We can note that it's really a very similar mean by all emp length. ","0c42d02b":"Very interesting!!!! <br>\nWe can clearly see different patterns between Individual and Joint applications.<br>\nIn sub grade we can see a clearly correlation with interest rate.... Altought we can see many loans of \"high\" sub-grades with low interest rate <br>","603c05d3":"## We will start looking all variables and some informations about them\n- I will divide 60 by 60 columns to a clear view of columns","aa262c22":"Interesting! We can see that the years do not influence the interest rate but it have a slightly difference considering the loan_amount patterns","f4be2f70":"Very cool!!! We can see that Director, Engineer, President, Vice President are the category's with highest incidence in Grade A; <br>\nAnalyzing this table we can get some insights about the profile of grades and professionals.","48d042c8":"<h2>ISSUE_D<\/h2>\n\nGoing depth in the default exploration to see the amount and counting though the <b>ISSUE_D <\/b>,<br>\nthat is: <i><b> The month which the loan was funded<\/b><\/i>","427f3153":"# Loan Status\nUnderstanding the default\n","69d978e6":"<h2>Looking the heatmap cross tab of Adress State x Loan Status<h2>","a6cfc7fc":"## Functions \n- To see all functions click in \"code\" button > ","ee7e1e90":"# DTI\n- A ratio calculated using the borrower\u2019s total monthly debt payments on the total debt obligations, excluding mortgage and the requested LC loan, divided by the borrower\u2019s self-reported monthly income.\n","f87ae6ff":"# Questions\nSome questions that I will try to answer:\n- Which type of data we are working?\n- We have missing values? \n- How many unique entries we have?\n- What's the distribution of Loan Status?\n- What's the distribution of Amount of loans?\n- What's the distribution of Interest Rate?\n- What's the % of Defaults in loans?\n- What's the most common grades?\n- What's the most common employer titles?\n- What's the most common Purpose that a client request a loan?\n- What's the different between Terms?\n- And a lot of other questions that will raise through the exploration;","f72bb91b":"### Resuming table. 120th to 148th","2416b0e6":"Cool! \n\n\nWe can see that People that Not meet the credit policy has a lowest values in amount distribution.","a62357f8":"<h2>Looking the Grades <\/h2>\nI will explore some variables.<br>\nthe first variable I will explore is GRADE.<br>\ndescription of grade: <b>LC assigned loan grade<\/b>","b0c649cf":"# Interest Rate by Grade and Loan_status\nIs the ","33685c38":"# Verification Status\n- Indicates if the co-borrowers' joint income was verified by LC, not verified, or if the income source was verified","f0b09d8f":"# Crosstab - Purpose by Loan Status","222a02ad":"# Welcome to Lending Club Loan Dataset\nI will do some explorations through the Loan Club Data. \n\nNOTE: English is not my native language, so sorry about if you see any error","6b741386":"Cool, we can see that the below states have the highest shares of loans:\n- CA\n- FL \n- NY\n- Texas","e931c86f":"Nice. We can see that the peak of our distribution is ~300 USD monthly.\n\nWith this information, we can investigate the difference between emp_title or regions, to find some interesting patterns of values","004004f3":"# Employment Features","ba1bcb96":"Cool! The values of interest are Fully Paid, Charged Off and Default values;\n","da37839e":"# Crosstab - Loan Status by Application Type","4683d311":"Wow! It's very meaningful. \nIt's clear note the differences between the interest in Grades. ","b426400e":"# Installment by Loan Status","9b0abfbf":"Very cool!! Now we can see that the difference of all subgrades of loans","b252b93f":"# Mean of Credit Utilization Rate by Loan Status and Purpose. \n\nrevol_util: Revolving line utilization rate, or the amount of credit the borrower is using relative to all available revolving credit.","063f9a97":"<h2>Emp lenght crossed by some columns<\/h2>","6d038934":"Cool! Only 32.95% of the loans are not verified; <br>\nLet's see the distribution of Verification Status by Loan Status","a8129c5b":"## Verification Status by Loan Status","5e77f309":"### Resuming table. 1st to 60th","02e5de18":"<h2>Looking the Home Ownership by Loan_Amount<\/h2>","97948990":"## Grades by each Employer Title\n- I will consider only the 20 most common Employer Titles to see how the grades are distributed by different professionals","c951263a":"# I'm improving this kernel, so stay Tuned and upvote if you liked =)","dd11e030":"## Our Target would be the Purpose values.\n- Let's understand which type of category values we have\n- We need To select loans that are fully paid and that are not fully paid, removing current loans","e2cf14d0":"<h2>Title<\/h2>","d3ff4db6":"Do you wanna see anothers interesting dataset analysis? <a href=\"https:\/\/www.kaggle.com\/kabure\/kernels\">Click here<\/a> <br>","3e8944a2":"### Let's confirm the mean of int rate of Employment Length","8f78861b":"<h2> Looking the Purpose distribuition  <\/h2>","eedf9dc2":"Cool! We found a interesting pattern. <br>\nLoan Status NMCP(Not Meet Credit Politic) have the most part of loans as \"Not verified\" with a highest mean in comparison with other categorys","b1131779":"<h2>Terms column<\/h2>"}}