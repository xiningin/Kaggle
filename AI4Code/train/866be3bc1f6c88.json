{"cell_type":{"aece0b0a":"code","a918aade":"code","edb40cd3":"code","00de530c":"code","a36ca971":"markdown","e10c27e2":"markdown","c36fbdba":"markdown"},"source":{"aece0b0a":"import pandas as pd\nimport os,json","a918aade":"DATA_DIR = '\/kaggle\/input\/CORD-19-research-challenge'\n\ndf = pd.read_csv(f'{DATA_DIR}\/metadata.csv')\nshas = df.sha.tolist()","edb40cd3":"ref_entries = []\ni = 0\nfor root, dirs, files in os.walk(DATA_DIR):\n    for file in files:\n        sha, ext = os.path.splitext(file)\n        if ext=='.json' and sha in shas:\n            with open(f'{root}\/{file}', 'r') as f:\n                try:\n                    article_json  = json.loads(f.read())\n                except:\n                    continue\n            i+=1\n\n            if i%250==0:\n                print(f'Processed {i} articles. Currently processing {file}')\n\n            \n            for k, v in article_json['ref_entries'].items():\n                ref_entries.append([sha, k, v['text'], v['latex'], v['type']])","00de530c":"print('Building dataframe')\ndf_ref_entries = pd.DataFrame(ref_entries, columns=['sha', 'name', 'text', 'latex', 'type'])\n\nprint('Saving dataframe')\ndf_ref_entries.to_csv(f'ref_entries.csv', index=False)","a36ca971":"## Create a DataFrame from the List and Save to CSV","e10c27e2":"## Load the metadata into a dataframe and create a list of SHAs with full text","c36fbdba":"## Walk through the Data Directory, Load JSON, and Build List of Body Text"}}