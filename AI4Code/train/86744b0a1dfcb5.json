{"cell_type":{"99c6840d":"code","38d6d74d":"code","64ffd2a1":"code","c64dfda8":"code","1a153884":"code","127a96d7":"code","97a57927":"code","7b7fe26e":"code","da735310":"code","d2aa0348":"code","38c27f1c":"code","4b67c7f0":"code","f4fce055":"code","3a88b830":"code","974c868d":"code","7e5d72c3":"code","814134c2":"code","10d2a5ee":"code","ec4ea383":"code","54b55889":"code","cee82bf3":"code","3401a30e":"code","902c1749":"code","9c8e93f8":"code","2b9241f1":"code","39c197ab":"code","563ec7b3":"code","ee904dfa":"code","72e8f48a":"code","7e2355c4":"code","c6928899":"code","685e6d11":"code","ef054e21":"code","68b5e70b":"code","6ae461f8":"code","744c5aba":"code","39fe37ba":"code","f8420a1d":"code","e191b1b5":"code","0e91cb11":"code","0fdda041":"code","652ad544":"code","b154261a":"code","cdb6429b":"code","13d13408":"code","117ee62d":"code","a133682f":"code","5fa19e7c":"code","235afbd2":"code","ec0ac888":"code","cd6f2937":"code","90037f9d":"code","1b0739a5":"code","0f312101":"code","4aa478a6":"code","7e1197bf":"code","6776b2d6":"code","f11942d9":"code","60e11511":"code","885b12e2":"code","f54cdfcb":"code","198c00cc":"code","983d0a5c":"code","78e861cc":"code","776a3859":"code","e987237f":"code","bed39cf8":"code","fa1d4b7a":"code","3b13b109":"code","81dcaa58":"code","a65aed6d":"code","b569d59b":"code","c9864657":"code","cb56ca7b":"code","c7dcb2ad":"code","1b326b35":"code","9ab7987f":"code","0f0498a3":"code","589c9a00":"code","a9bcbf3e":"code","108df30f":"code","beb3d7b9":"markdown","8db040ee":"markdown","8ba492b6":"markdown","24bca707":"markdown","65a11ae7":"markdown","7f33881f":"markdown","6c556515":"markdown","31bd0925":"markdown","36d51f71":"markdown","33c7b77b":"markdown","5c39a0ab":"markdown","8bc91a43":"markdown","56755283":"markdown","726ff580":"markdown","2223d7f9":"markdown","2d9aa8c7":"markdown"},"source":{"99c6840d":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 5GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","38d6d74d":"df=pd.read_csv(\"\/kaggle\/input\/insurance-claim\/insurance_claims.csv\")","64ffd2a1":"df.head(5)","c64dfda8":"df.info()","1a153884":"df.shape","127a96d7":"df.isnull().sum()","97a57927":"df.duplicated().sum()","7b7fe26e":"df.describe().transpose()","da735310":"df.columns","d2aa0348":"df['fraud_reported'].value_counts()","38c27f1c":"fraud=df[df['fraud_reported']=='Y']","4b67c7f0":"fraud['policy_number'].value_counts()[:10]","f4fce055":"import seaborn as sns\nimport matplotlib.pyplot as plt\n\ncol=['months_as_customer','age','policy_deductable','policy_annual_premium','capital-gains', 'capital-loss','total_claim_amount','injury_claim', 'property_claim', 'vehicle_claim']\n\nplt.figure(figsize=(14,12))\nk=1\nfor i in col:\n    plt.subplot(4,4,k)\n    sns.distplot(df[i])\n    k=k+1\nplt.show()\n","3a88b830":"df['umbrella_limit'].value_counts()","974c868d":"a=df[df['umbrella_limit']>0]","7e5d72c3":"sns.distplot(a['umbrella_limit'])","814134c2":"plt.figure(figsize=(8,6))\nsns.scatterplot(x='age',y='months_as_customer',hue='fraud_reported',data=df)\nplt.grid(True)\nplt.show()","10d2a5ee":"plt.figure(figsize=(12,10))\nsns.countplot(x=df['age'],hue='fraud_reported',data=df)\nplt.xticks(rotation=90)\nplt.show()","ec4ea383":"a=df[df['fraud_reported']=='Y']\na[['policy_number','insured_occupation','insured_education_level','total_claim_amount']].sort_values('total_claim_amount',ascending=False)[:20]","54b55889":"a['insured_occupation'].value_counts()","cee82bf3":"a['insured_education_level'].value_counts()","3401a30e":"sns.set(style=\"darkgrid\")\n\nplt.figure(figsize=(20,12))\nplt.subplot(1,2,1)\nplt.title(\"Count plot for Fraud transactions 'Y' wrt Education level\",fontsize=20)\nsns.countplot('insured_education_level',data=a)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.tight_layout()\nplt.subplot(1,2,2)\nplt.title(\"Count plot for Fraud transactions 'Y' wrt Occupation\",fontsize=20)\nsns.countplot('insured_occupation',data=a)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.tight_layout()\nplt.show()","902c1749":"#Looking at below claim_amount:\na_claims=pd.pivot_table(a,values='total_claim_amount',index=['insured_occupation','insured_education_level']).sort_values('total_claim_amount',ascending=False)\n\ncm=sns.light_palette(\"black\", as_cmap=True)\na_claims.style.background_gradient(cmap=cm)","9c8e93f8":"plt.figure(figsize=(16,6))\nplt.title(\"Count plot for Fraud transactionn 'Y' wrt Hobbies\",fontsize=20)\nsns.countplot('insured_hobbies',data=a)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.tight_layout()\nplt.show()","2b9241f1":"plt.figure(figsize=(10,8))\nplt.title(\"Bar plot for Fraud transactions wrt Gender\",fontsize=20)\nsns.barplot(x='insured_sex',y='total_claim_amount',hue='fraud_reported',data=df)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.tight_layout()\nplt.show()\n","39c197ab":"a['insured_relationship'].value_counts()","563ec7b3":"profit=df['capital-gains']-df['capital-loss']\ndf1=df\ndf1['profit']=profit","ee904dfa":"df1.columns","72e8f48a":"df[['policy_number','profit']].sort_values('profit',ascending=False)[0:20]","7e2355c4":"df[['incident_date','incident_type','collision_type','incident_severity','authorities_contacted','incident_state','incident_city',\n   'incident_location','incident_hour_of_the_day','number_of_vehicles_involved']]","c6928899":"pd.pivot_table(a,values=['number_of_vehicles_involved','total_claim_amount','vehicle_claim','incident_hour_of_the_day'],index=['incident_type','collision_type']).sort_values('vehicle_claim',ascending=False)","685e6d11":"df['number_of_vehicles_involved'].value_counts()","ef054e21":"df['incident_type'].value_counts()","68b5e70b":"df['collision_type'].value_counts()","6ae461f8":"#For collision_type there are junk values as '?' that are nan values and has to be replaced\/removed:\n#Let's see what kind of incident we have for the junk (?) values:\ncoll=a[['incident_type','collision_type']]","744c5aba":"res=coll.loc[coll['collision_type']=='?']","39fe37ba":"res['incident_type'].value_counts()","f8420a1d":"coll_df=df[['incident_type','collision_type']]","e191b1b5":"res_df=coll_df.loc[coll_df['collision_type']=='?']","0e91cb11":"res_df['incident_type'].value_counts()","0fdda041":"df['collision_type']=df['collision_type'].replace(\"?\",\"Not Applicable\")","652ad544":"df['collision_type'].value_counts()","b154261a":"a['incident_city'].value_counts()","cdb6429b":"pd.pivot_table(a,values=['total_claim_amount','vehicle_claim'],index=['incident_state','incident_city']).sort_values('total_claim_amount',ascending=False)[:20]","13d13408":"df.columns","117ee62d":"a.loc[(a['property_claim'] == 0.0)&(a['vehicle_claim'] != 0.0)]","a133682f":"plt.figure(figsize=(16,8))\nplt.subplot(2,1,1)\nplt.title(\"Count plot for Auto make\",fontsize=20)\nsns.countplot('auto_make',data=df)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.tight_layout()\nplt.subplot(2,1,2)\nplt.title(\"Count plot for Auto model\",fontsize=20)\nsns.countplot('auto_model',data=df)\nplt.xticks(rotation=90)\nplt.grid(True)\nplt.tight_layout()\nplt.show()","5fa19e7c":"a['auto_make'].value_counts()","235afbd2":"plt.figure(figsize=(12,10))\nsns.countplot('auto_make',data=a)\nplt.title(\"Count of Auto make which have Fraud claim\",fontsize=20)\nplt.xticks(rotation=45)\nplt.grid(True)\nplt.show()","ec0ac888":"pd.pivot_table(a,values=['vehicle_claim'],index=['auto_make','auto_model','policy_number']).sort_values('vehicle_claim',ascending=False)[:20]","cd6f2937":"df.columns","90037f9d":"a['bodily_injuries'].value_counts()","1b0739a5":"a['police_report_available'].value_counts()","0f312101":"df['police_report_available']=df['police_report_available'].replace(\"?\",\"Unknown\")","4aa478a6":"df['police_report_available'].value_counts()","7e1197bf":"df.columns","6776b2d6":"df['umbrella_limit'].value_counts()","f11942d9":"df['umbrella_limit']=df['umbrella_limit'].replace(-1000000 ,0)","60e11511":"df['umbrella_limit'].value_counts()","885b12e2":"df['policy_csl'].value_counts()","f54cdfcb":"df2=df","198c00cc":"df2.columns","983d0a5c":"df2=df2.drop(['policy_number', 'policy_bind_date', 'insured_zip','incident_date','authorities_contacted','profit','auto_make', 'auto_model'],axis=1)","78e861cc":"df2.columns","776a3859":"df2=pd.get_dummies(df2,columns=['policy_state','policy_csl','insured_sex','insured_education_level', 'insured_occupation',\n       'insured_hobbies', 'insured_relationship','incident_type', 'collision_type', 'incident_severity',\n       'incident_state', 'incident_city', 'incident_location','property_damage','police_report_available'],drop_first=True)","e987237f":"df2.shape","bed39cf8":"df2.columns","fa1d4b7a":"x=df2.drop(['fraud_reported'],axis=1)","3b13b109":"y=df2['fraud_reported']","81dcaa58":"from sklearn.preprocessing import StandardScaler\nsc=StandardScaler()","a65aed6d":"x_scale=sc.fit_transform(x)","b569d59b":"from sklearn.decomposition import PCA\npca=PCA(n_components=0.95)\nx_scaled=pca.fit_transform(x_scale)","c9864657":"pca.explained_variance_ratio_","cb56ca7b":"from sklearn.model_selection import train_test_split\nx_train,x_test,y_train,y_test=train_test_split(x_scaled,y,test_size=0.3)","c7dcb2ad":"from sklearn.ensemble import RandomForestClassifier","1b326b35":"rf=RandomForestClassifier(criterion='entropy')","9ab7987f":"rf.fit(x_train,y_train)","0f0498a3":"y_pred=rf.predict(x_test)","589c9a00":"rf.score(x_test,y_test)","a9bcbf3e":"from sklearn.metrics import confusion_matrix,classification_report\ncm=confusion_matrix(y_pred,y_test)\nsns.heatmap(cm,annot=True)","108df30f":"clf=classification_report(y_pred,y_test)\nprint(clf)","beb3d7b9":"There are 20 Policies that have frauds and are listed above and the Policy_Number ='217938' has claimed '$112320' amount.","8db040ee":"Even when the police report is available there policies that have fraud claimed.","8ba492b6":"Riverwood city from the state - SC have claimed maximum number of frauds for auto insurance.","24bca707":"Almost all the data above are normally distributed.","65a11ae7":"Auto make of the company's Mercedes, Ford, Audi are having highest fraud claims.Chevrolet, Dodge, BMW are as wellhave the fraud claims.","7f33881f":"For Auto claims, single vehicle collision have claimed the highesht amount in the current data set.","6c556515":"There is no pattern that justifies if the customers are with the company for more years and are claiming the fraud claims.","31bd0925":"People who have the hobbies of 'chess' and 'cross-fit' are tend to do the fraud claims.","36d51f71":"People from occupation sector as Protective-services and education level as JD have highest fraud claimed amount of 87,890$.","33c7b77b":"People with education level as 'JD' are much involved in fraud transactions.\nPeople with occupation as 'exec-managerial' are much involved in fraud transactions.","5c39a0ab":"Cars that are stolen (Vehicle Theft) and cars that are parked (Parked Cars) are marked as '?', so we shall replace with these values with either NA or No collision","8bc91a43":"Person having Policy number - 217938 on the vehicle - Suburu-Impreza has claimed an amount of $77760 which is identified as fraud.","56755283":"8 Parked Cars and 8 Vehicle Theft cars have fraud claimed.","726ff580":"Both Male and Female are tend to do the fraud claims similarly.","2223d7f9":"People from the city - 'Arlington' have more auto related incidents that are fraud claimed.","2d9aa8c7":"People whose education level is 'JD' and working as 'exec-manegerial' have more fraud claims."}}