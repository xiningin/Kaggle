{"cell_type":{"3bd2999e":"code","cf863b18":"code","b28e3be3":"code","f165c0ef":"code","f908a401":"code","5888988f":"code","d1f830e5":"code","4e8bac5e":"code","51415bb3":"code","1a89c650":"code","c0727913":"code","495c6e29":"code","00dfe83c":"code","085057f0":"code","367ac379":"code","cbbd6c20":"code","5b5e590c":"code","02f5fdfe":"code","316b3685":"code","112b3868":"code","fee60eec":"markdown","609e7450":"markdown"},"source":{"3bd2999e":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport zipfile\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cf863b18":"aisles_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/aisles.csv.zip\").open(\"aisles.csv\"))\ndepartments_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/departments.csv.zip\").open(\"departments.csv\"))\norder_products_prior_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/order_products__prior.csv.zip\").open(\"order_products__prior.csv\"))\norder_products_train_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/order_products__train.csv.zip\").open(\"order_products__train.csv\"))\norders_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/orders.csv.zip\").open(\"orders.csv\"))\nproducts_df = pd.read_csv(zipfile.ZipFile(\"..\/input\/instacart-market-basket-analysis\/products.csv.zip\").open(\"products.csv\"))\n","b28e3be3":"products_df.head()","f165c0ef":"order_products_prior_df.info()","f908a401":"order_products_prior_df.tail()","5888988f":"orders_df.info()","d1f830e5":"orders_df.groupby('eval_set').nunique()","4e8bac5e":"order_products_train_df.info()","51415bb3":"cnt_srs = orders_df.groupby(\"user_id\")[\"order_number\"].aggregate(np.max).reset_index()\ncnt_srs = cnt_srs.order_number.value_counts()\n\nplt.figure(figsize=(12,8))\nsns.barplot(cnt_srs.index, cnt_srs.values, alpha=0.8)\nplt.ylabel('Number of Occurrences', fontsize=12)\nplt.xlabel('Maximum order number', fontsize=12)\nplt.xticks(rotation='vertical')\nplt.show()","1a89c650":"grouped_df = orders_df.groupby([\"order_dow\", \"order_hour_of_day\"])[\"order_number\"].aggregate(\"count\").reset_index()\ngrouped_df = grouped_df.pivot('order_dow', 'order_hour_of_day', 'order_number')\n\nplt.figure(figsize=(12,6))\nsns.heatmap(grouped_df, cmap=\"YlGnBu\",yticklabels=['Sat','Sun', 'Mon','Tue','Wed','Thu','Fri'])\nplt.title(\"T\u1ea7n su\u1ea5t mua h\u00e0ng theo ng\u00e0y trong tu\u1ea7n v\u00e0 gi\u1edd trong ng\u00e0y\")\nplt.ylabel(\"Ng\u00e0y mua h\u00e0ng\")\nplt.xlabel(\"Gi\u1edd mua h\u00e0ng\")\nplt.show()","c0727913":"plt.figure(figsize=(12,8))\nsns.countplot(x=\"days_since_prior_order\", data=orders_df)\nplt.ylabel('Count', fontsize=12)\nplt.xlabel('Days since prior order', fontsize=12)\nplt.xticks(rotation='vertical')\nplt.title(\"Frequency distribution by days since prior order\", fontsize=15)\nplt.show()","495c6e29":"#merge table for deeper analysis\norder_products_prior_df = pd.merge(order_products_prior_df, products_df, on='product_id', how='left')\norder_products_prior_df = pd.merge(order_products_prior_df, aisles_df, on='aisle_id', how='left')\norder_products_prior_df = pd.merge(order_products_prior_df, departments_df, on='department_id', how='left')\norder_products_prior_df = pd.merge(order_products_prior_df, orders_df, on='order_id', how='left')\norder_products_prior_df.head()","00dfe83c":"cnt_srs = order_products_prior_df['department'].value_counts()\nplt.figure(figsize=(12,8))\nsns.barplot(cnt_srs.index, cnt_srs.values)\nplt.ylabel('Number of Occurrences', fontsize=12)\nplt.xlabel('Department', fontsize=12)\nplt.xticks(rotation='vertical')\nplt.show()","085057f0":"plt.figure(figsize=(10,10))\ntemp_series = order_products_prior_df['department'].value_counts()\nlabels = (np.array(temp_series.index))\nsizes = (np.array((temp_series \/ temp_series.sum())*100))\nplt.pie(sizes, labels=labels, \n        autopct='%1.1f%%', startangle=200)\nplt.title(\"Departments distribution\", fontsize=15)\nplt.show()","367ac379":"order_products_prior_df['department'].value_counts().index","cbbd6c20":"for i in order_products_prior_df['department'].value_counts().index:\n    print(i)","5b5e590c":"order_products_prior_df[order_products_prior_df.department=='dairy eggs'].head()","02f5fdfe":"gr_dept_df = order_products_prior_df[order_products_prior_df.department=='dairy eggs'].groupby([\"order_dow\", \"order_hour_of_day\"])[\"order_number\"].aggregate(\"count\").reset_index()","316b3685":"for i in order_products_prior_df['department'].value_counts().index:\n    gr_dept_df = order_products_prior_df[order_products_prior_df.department==i].groupby([\"order_dow\", \"order_hour_of_day\"])[\"order_number\"].aggregate(\"count\").reset_index()\n    gr_dept_df = gr_dept_df.pivot('order_dow', 'order_hour_of_day', 'order_number')\n\n    plt.figure(figsize=(6,3))\n    sns.heatmap(gr_dept_df, cmap=\"YlGnBu\",yticklabels=['Sat','Sun', 'Mon','Tue','Wed','Thu','Fri'])\n    plt.title(\"T\u1ea7n su\u1ea5t mua h\u00e0ng Department: \"+i)\n    plt.ylabel(\"Ng\u00e0y mua h\u00e0ng\")\n    plt.xlabel(\"Gi\u1edd mua h\u00e0ng\")\n    plt.show()","112b3868":"gr_dept_df","fee60eec":"T\u1ea7n su\u1ea5t mua h\u00e0ng theo t\u1eebng ng\u00e0nh h\u00e0ng (department) c\u00f3 m\u1ed9t s\u1ed1 \u0111i\u1ec3m kh\u00e1c bi\u1ec7t so v\u1edbi \u0111\u01a1n h\u00e0ng chung g\u1ed3m:\n- Ng\u00e0nh \u0111\u1ed3 \u0103n v\u1eb7t (snacks), n\u01b0\u1edbc u\u1ed1ng (beverage), \u0111\u1ed3 \u0103n s\u00e1ng (breakfast) cao \u0111i\u1ec3m mua h\u00e0ng v\u00e0o s\u00e1ng ch\u1ee7 nh\u1eadt.\n- Ng\u00e0nh \u0111\u1ed3 u\u1ed1ng c\u00f3 c\u1ed3n (alcohol) cao \u0111i\u1ec3m mua h\u00e0ng v\u00e0o th\u1ee9 4 v\u00e0 th\u1ee9 5.\n- Ng\u00e0nh \u0111\u1ed3 cho v\u1eadt nu\u00f4i (pets) cao \u0111i\u1ec3m mua h\u00e0ng v\u00e0o th\u1ee9 6 v\u00e0 th\u1ee9 7.\n\nNh\u00e0 b\u00e1n l\u1ebb c\u00f3 th\u1ec3 nghi\u00ean c\u1ee9u s\u00e2u h\u01a1n l\u00fd do \u0111\u1ec3 c\u00f3 chi\u1ebfn l\u01b0\u1ee3c ph\u00f9 h\u1ee3p (VD:t\u0103ng hi\u1ec3n th\u1ecb\/ch\u1ea1y khuy\u1ebfn m\u00e3i\/...) t\u1eadn d\u1ee5ng \u0111i\u1ec3m n\u00e0y","609e7450":"Ng\u00e0y cao \u0111i\u1ec3m mua h\u00e0ng v\u00e0o th\u1ee9 7(10-16h) v\u00e0 ch\u1ee7 nh\u1eadt(9-16h).\n\nNg\u00e0y th\u1ea5p \u0111i\u1ec3m mua h\u00e0ng v\u00e0o th\u1ee9 3 v\u00e0 th\u1ee9 4 c\u1ee7a tu\u1ea7n"}}