{"cell_type":{"e51a7bbf":"code","178ac50d":"code","ea23d9eb":"code","c0e39163":"code","d4b1e881":"code","91aa407e":"code","1b6f6cc3":"code","01168c71":"code","a999dd2f":"code","7644bdf0":"code","496a879e":"code","2798c3bf":"code","29e64f5c":"code","e66c827d":"code","429e4680":"code","12d86656":"code","ffc95401":"code","5a94b4ee":"code","060455a0":"code","ba5cf88b":"code","0f7f0ed9":"code","9e546d80":"code","28c2f44e":"code","c47d6fb5":"code","95e0bb38":"code","ed7535f3":"code","03e279a8":"code","fe3e4633":"code","8f910142":"markdown","76c928cf":"markdown","7529db0c":"markdown","feede515":"markdown","79bf2f1f":"markdown","aaebcd56":"markdown","31e5cc52":"markdown","b3c825b7":"markdown","d3c60e55":"markdown","70da4f95":"markdown","15704d41":"markdown","9da74253":"markdown","67cdaf33":"markdown","0b3e1c44":"markdown","2386f14a":"markdown","2ff5a183":"markdown","da79609b":"markdown","427230fa":"markdown","5ac804dd":"markdown","269658bf":"markdown","457d19c3":"markdown","444f3c47":"markdown","19c74b67":"markdown","c3e85a40":"markdown","63e9c328":"markdown"},"source":{"e51a7bbf":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nfrom pandas_profiling import ProfileReport","178ac50d":"data = pd.read_csv('..\/input\/titanic\/train.csv')\ndata.head()","ea23d9eb":"data.columns","c0e39163":"profile = ProfileReport(data, title='EDA Titanic', html={'style':{'full_width':True}})","d4b1e881":"profile","91aa407e":"#Removendo campos PassengerId, Name e Ticket\ndata_clean = data.drop(columns = ['PassengerId', 'Name', 'Ticket'])\ndata_clean.head()","1b6f6cc3":"#Preenchendo os vazios em Age\nfrom sklearn.impute import SimpleImputer\nsimple_imputer = SimpleImputer()\n\ntarget_column = data_clean['Age']\nimputed_column = pd.DataFrame(simple_imputer.fit_transform(pd.DataFrame(target_column)))[0]\nimputed_ages = data_clean.assign(Age = imputed_column)\nimputed_ages","01168c71":"imputed_ages.isna().sum()","a999dd2f":"target_column = imputed_ages['Cabin']\n\n# Preenche a Cabin com U nos valores nulos\nfilled_column = target_column.fillna('U')\n\n# Deixa apenas a primeira letra de cada registro de Cabin\nreduced_cabins = filled_column.apply(lambda x: x[0])\n\n# Atribui essa nova coluna a CabinPlacement e exclui a antiga Cabin\ncabins_updated = imputed_ages.assign(CabinPlacement = reduced_cabins).drop(columns=[\"Cabin\"])\ncabins_updated","7644bdf0":"cabins_updated.isna().sum()","496a879e":"target_column = cabins_updated['Embarked']\n\n# Preenche a Embarked com U nos valores nulos\nfilled_column = target_column.fillna('U')\n\nembarked_updated = cabins_updated.assign(Embarked = filled_column)\nembarked_updated.isna().sum()","2798c3bf":"clean_data = embarked_updated\nclean_data","29e64f5c":"male_passengers = clean_data[clean_data['Sex'] == 'male']\nsurvival_male = male_passengers['Survived'].sum()\/male_passengers['Survived'].count()\n\nfemale_passengers = clean_data[clean_data['Sex'] == 'female']\nsurvival_female = female_passengers['Survived'].sum()\/female_passengers['Survived'].count()\nprint(' Taxa de sobreviv\u00eancia masculina: {:.2%}\\n Taxa de sobreviv\u00eancia feminina: {:.2%}'.format(survival_male, survival_female))","e66c827d":"sns.set_style(\"whitegrid\")\nplt.figure(figsize=(10 ,6))\nplt.title(\"Taxa de sobreviv\u00eancia por sexo\")\nplt.xlabel(\"Sexo\")\nplt.ylim(0, 1)\n\nsns.barplot(x=[\"Masculino\", \"Feminino\"], y=[survival_male, survival_female])","429e4680":"classes = clean_data['Pclass'].unique()\nclasses.sort()\n\nsurvival_list = []\n\nfor item in classes:\n    class_passengers = clean_data[clean_data['Pclass'] == item]\n    survival_class = class_passengers['Survived'].sum()\/class_passengers['Survived'].count()\n    survival_list.append(survival_class)\n    print('Taxa de sobreviv\u00eancia classe {}: {:.2%}'.format(item, survival_class))","12d86656":"plt.figure(figsize=(10 ,6))\nplt.title(\"Taxa de sobreviv\u00eancia por classe\")\nplt.xlabel(\"Classe\")\nplt.ylim(0, 1)\n\nsns.barplot(x=classes, y=survival_list)","ffc95401":"cabins = clean_data['CabinPlacement'].unique()\ncabins.sort()\n\nsurvival_cabins_list = []\n\nfor item in cabins:\n    cabin_passengers = clean_data[clean_data['CabinPlacement'] == item]\n    survival_cabin = cabin_passengers['Survived'].sum()\/cabin_passengers['Survived'].count()\n    survival_cabins_list.append(survival_cabin)\n    print('Taxa de sobreviv\u00eancia para tipo de cabine {}: {:.2%}'.format(item, survival_cabin))","5a94b4ee":"plt.figure(figsize=(10 ,6))\nplt.title(\"Taxa de sobreviv\u00eancia por tipo de cabine\")\nplt.xlabel(\"Tipo de cabine\")\nplt.ylim(0, 1)\nsns.barplot(x=cabins, y=survival_cabins_list)","060455a0":"clean_data['CabinPlacement'].value_counts()","ba5cf88b":"embarkments = clean_data['Embarked'].unique()\n\nsurvival_embarkments_list = []\n\nfor item in embarkments:\n    embarkment_passengers = clean_data[clean_data['Embarked'] == item]\n    survival_embarkment = embarkment_passengers['Survived'].sum()\/embarkment_passengers['Survived'].count()\n    survival_embarkments_list.append(survival_embarkment)\n    print('Taxa de sobreviv\u00eancia para local de embarque {}: {:.2%}'.format(item, survival_embarkment))","0f7f0ed9":"plt.figure(figsize=(10 ,6))\nplt.title(\"Taxa de sobreviv\u00eancia por local de embarque\", fontsize=16)\nplt.xlabel(\"Local de embarque\", fontsize=13)\nplt.ylim(0, 1)\n\nsns.barplot(x=embarkments, y=survival_embarkments_list)","9e546d80":"# Achando o local de embarque mais frequente\nclean_data['Embarked'].value_counts()","28c2f44e":"# Sobreviventes\nsurvived = clean_data.query('Survived == 1')\nsurvived","c47d6fb5":"# N\u00e3o sobreviventes\nnot_survived = clean_data.query('Survived == 0')\nnot_survived","95e0bb38":"plt.figure(figsize=(12, 8))\nsns.violinplot(x=clean_data[\"Survived\"], y=clean_data[\"Fare\"])","ed7535f3":"sns.kdeplot(survived[\"Fare\"], label=\"Sobreviveu\")\nsns.kdeplot(not_survived[\"Fare\"], label=\"N\u00e3o sobreviveu\")","03e279a8":"plt.figure(figsize=(12, 8))\nsns.violinplot(x=clean_data[\"Survived\"], y=clean_data[\"Parch\"])","fe3e4633":"plt.figure(figsize=(12, 8))\nsns.violinplot(x=clean_data[\"Survived\"], y=clean_data[\"SibSp\"])","8f910142":"Os embarques em 'S' (Southampton) s\u00e3o os mais frequentes por uma grande margem","76c928cf":"### Importando as bibliotecas necess\u00e1rias:","7529db0c":"### Campos:\n* `PassengerId`: ID do passageiro\n* `Survived`: Indica se o passageiro sobreviveu ao naufr\u00e1gio (valor num\u00e9rico 0 se n\u00e3o sobreviveu, 1 se sobreviveu)\n* `Pclass`: Classe do bilhete (1 = primeira classe, 2 = segunda classe, 3 = terceira classe), \u00e9 correspondente ao status socio-econ\u00f4mico\n* `Name`: Nome do passageiro\n* `Sex`: Sexo do passageiro\n* `Age`: Idade do passageiro\n* `SibSp`: N\u00famero de irm\u00e3os\/irm\u00e3s ou c\u00f4njuges do passageiro dentro do navio\n* `Parch`: N\u00famero de pais\/filhos do passageiro dentro do navio\n* `Ticket`: N\u00famero do ticket\n* `Fare`: Tarifa paga pelo passageiro\n* `Cabin`: N\u00famero da cabine\n* `Embarked`: Porto onde o passageiro embarcou (C = Cherbourg, Q = Queenstown, S = Southampton, NaN = Desconhecido)","feede515":"### Distribui\u00e7\u00e3o das taxas entre sobreviventes e n\u00e3o sobreviventes","79bf2f1f":"### Distribui\u00e7\u00e3o do campo \"SibSp\" entre sobreviventes e n\u00e3o sobreviventes","aaebcd56":"Com isso, finalizamos o tratamento de valores nulos.","31e5cc52":"### Preenchendo o campo Age:","b3c825b7":"## An\u00e1lise das taxas de sobreviv\u00eancia para diferentes grupos\nCom os dados organizados, \u00e9 poss\u00edvel observar como os valores dos campos influ\u00eanciam na sobreviv\u00eancia dos indiv\u00edduos. Essa an\u00e1lise \u00e9 muito \u00fatil para observar como o modelo usado para predi\u00e7\u00e3o, que ser\u00e1 desenvolvido futuramente, aproveitar\u00e1 essas vari\u00e1veis.","d3c60e55":"# Competi\u00e7\u00e3o interna Titanic - EDA","70da4f95":"### Utilizando pandas_profiling para analisar os dados:","15704d41":"### Distribui\u00e7\u00e3o do campo \"Parch\" entre sobreviventes e n\u00e3o sobreviventes","9da74253":"### Taxa de sobreviv\u00eancia por local de embarque:","67cdaf33":"### Taxa de sobreviv\u00eancia por classe:","0b3e1c44":"**Obs:** Nota-se que os indiv\u00edduos com muitos parentes no navio pertencem aos n\u00e3o sobreviventes.","2386f14a":"### Taxa de sobreviv\u00eancia por tipo de cabine:","2ff5a183":"# An\u00e1lise das rela\u00e7\u00f5es entre campos\nAl\u00e9m dos gr\u00e1ficos fornecidos pelo ProfileReport, \u00e9 interessante plotar novos gr\u00e1ficos, e extrair mais indicadores com os dados limpos para obter novas informa\u00e7\u00f5es.","da79609b":"### Manipulando o campo Cabin","427230fa":"### Carregando os dados, e examinando os campos desse dataset:","5ac804dd":"### Taxa de sobreviv\u00eancia por sexo:","269658bf":"**Obs:** \u00c9 importante ressaltar que o local de embarque 'U' (local desconhecido) possui uma taxa de sobreviv\u00eancia de 100%, mas s\u00f3 existem 2 registros desse tipo. Logo, essa alta taxa de sobreviv\u00eancia pode ser proveniente de ru\u00eddo, e tem a possibilidade de piorar o modelo de predi\u00e7\u00e3o que ser\u00e1 desenvolvido. Portanto, pode ser razo\u00e1vel substituir os embarques 'U' pelo local de embarque mais frequente.","457d19c3":"### Preenchendo Embarked","444f3c47":"## An\u00e1lise das diferen\u00e7as entre os grupos de sobreviventes e n\u00e3o sobreviventes","19c74b67":"### Resultado da an\u00e1lise\n**Tratamento dos campos:**\n1. Nota-se que alguns campos, aparentemente, n\u00e3o s\u00e3o \u00fateis para a an\u00e1lise, estes campos s\u00e3o `PassengerId` e `Name`. Logo, estes campos ser\u00e3o descartados.\n2. `Age` possui quase 20% de valores nulos, logo ser\u00e1 usado um imputer KNN para preencher esses valores e evitar a perda desses dados.\n3. `Ticket` pode possuir alguma utilidade em outra an\u00e1lise, para predizer se pessoas pertencem \u00e0 mesma fam\u00edlia pelo bilhete conjunto. Mas para este caso, essa coluna ser\u00e1 descartada.\n4. `Cabin` possui mais que 70% de campos nulos, mas pode ser \u00fatil para predizer a sobreviv\u00eancia dos passageiros (A letra, que \u00e9 o primeiro caractere do registro indica a posi\u00e7\u00e3o no navio). Portanto, os valores nulos ser\u00e3o substitu\u00eddos pelo caractere 'U' de unknown, e apenas o primeiro caractere do nome da cabine ser\u00e1 mantido (letra). Em seguida, um codificador One-Hot ser\u00e1 aplicado sobre essa coluna.\n5. `Embarked` tamb\u00e9m possui valores nulos, eles ser\u00e3o substitu\u00eddos pelo caractere 'U'. Em seguida ser\u00e1 aplicado um codificador One-Hot sobre essa coluna.","c3e85a40":"**Obs:** As cabines G e T apresentam poucos exemplares no dataset, logo, pode ser mais vi\u00e1vel substituir esses valores pela moda(\"U\").\n\nEssa medida pode evitar um vi\u00e9s gerado por ru\u00eddo.","63e9c328":"Como esperado, o grupo dos n\u00e3o sobreviventes \u00e9 composto majoritariamente por pessoas que pagaram taxas menores. Outra caracter\u00edstica \u00e9 a presen\u00e7a de pessoas que pagaram taxas muito maiores no grupo dos sobreviventes.\n\nEsses dados apontam a influ\u00eancia da situa\u00e7\u00e3o socioecon\u00f4mica do indiv\u00edduo na sobreviv\u00eancia ao naufr\u00e1gio."}}