{"cell_type":{"e9d656c9":"code","a5452d10":"code","4e163d64":"code","67dba0b6":"code","90d81861":"code","179c29ac":"markdown","7a9708f3":"markdown","dfde7954":"markdown","9135e40d":"markdown","262d0c17":"markdown"},"source":{"e9d656c9":"import ast\nimport numpy as np\nimport pandas as pd\nimport cv2\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\ntrain = pd.read_csv('..\/input\/ranzcr-clip-catheter-line-classification\/train.csv')\nann = pd.read_csv('..\/input\/ranzcr-clip-catheter-line-classification\/train_annotations.csv')\nann = ann.loc[ann.label == 'ETT - Abnormal']\nprint(ann.shape)","a5452d10":"def plot_xray(StudyInstanceUID):\n    \"\"\"\n    intubation points as green\n    \"\"\"\n    img = cv2.imread('..\/input\/ranzcr-clip-catheter-line-classification\/train\/'+StudyInstanceUID+'.jpg')\n    intubation = ast.literal_eval(ann.loc[(ann.StudyInstanceUID==StudyInstanceUID),'data'].values[0])\n    for point in intubation:\n        img = cv2.circle(img, tuple(point), 10, (0,255,0), 10)\n    plt.figure(figsize=(8,8))\n    print(f'StudyInstanceUID {StudyInstanceUID}')\n    plt.imshow(img)","4e163d64":"plot_xray(ann.StudyInstanceUID[ann.index[0]])","67dba0b6":"plot_xray(ann.StudyInstanceUID[ann.index[1]])","90d81861":"train.loc[train.StudyInstanceUID=='1.2.826.0.1.3680043.8.498.93345761486297843389996628528592497280', 'ETT - Abnormal'] = 0\ntrain.loc[train.StudyInstanceUID=='1.2.826.0.1.3680043.8.498.93345761486297843389996628528592497280', 'CVC - Abnormal'] = 1\nann.loc[4344, 'label'] = 'CVC - Abnormal'","179c29ac":"## Abnormal ETT - are they labelled correctly?\n\nAs there are only 30 `ETT - Abnormal` cases for which we annotations - let's visualize all and decide if all of them are correctly labelled.\n\nIf there are at least one wrong label, it could have huge impact on AUC scores for `ETT - Abnormal` class","7a9708f3":"However, the very second instance is not ok! it should be labelled as CVC - Abnormal!","dfde7954":"First train instance seems to be ok:","9135e40d":"I looked through the rest of the cases - all other 28 cases seem to be fine.\n\nSo, during loading train data make sure to correct the case above,\n\nthis should do the trick:\n\n","262d0c17":"## To sum up\n\nTo have label errors within a category with low instance count is troublesome. Cleaning the data must be considered.\n\nI guess we could ask organizers to lookup if private dataset's `ETT - Abnormal` class is labelled correctly in all instances."}}