{"cell_type":{"c4d0a78d":"code","c3627e34":"code","21d24c18":"code","6f237283":"code","ebbc4a7a":"code","16ad5540":"code","0a4f9cf6":"code","7bd59631":"code","d93f597c":"code","a8aca59d":"code","6083ad15":"code","c946ec1f":"code","00bcaac9":"code","20a04380":"code","fa79fd5b":"markdown","fe8d6098":"markdown","a79ec673":"markdown","50537ac1":"markdown","1f504236":"markdown","d0e03cc3":"markdown","8669f0c0":"markdown","d4b0a68f":"markdown","5c47bfc8":"markdown","a1826eb2":"markdown","33cdf5a3":"markdown"},"source":{"c4d0a78d":"import numpy as np \nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport seaborn as sns \nimport datetime as dt\n%matplotlib inline\nimport datetime as dt\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nfrom plotly import tools\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\nfrom shapely.geometry import shape, Point, Polygon\nimport folium\nfrom folium.plugins import HeatMap, HeatMapWithTime\ninit_notebook_mode(connected=True)","c3627e34":"county_data_df = pd.read_csv(\"\/kaggle\/input\/covid19-romania-county-level\/ro_covid_19_time_series.csv\")\ncountry_data_df = pd.read_csv(\"\/kaggle\/input\/covid19-romania-county-level\/ro_covid_19_country_data_time_series.csv\")","21d24c18":"county_data_df.shape","6f237283":"county_data_df.head()","ebbc4a7a":"country_data_df.shape","16ad5540":"country_data_df.head()","0a4f9cf6":"country_data_df.tail()","7bd59631":"for feature in ['ati', 'quarantine', 'isolation', 'tests', 'confirmed', 'recovered', 'deaths']:\n    country_data_df.loc[country_data_df.date==\"2020-06-04\",feature] = \\\n    int((country_data_df.loc[country_data_df.date==\"2020-06-05\", feature].values[0] +\\\n         country_data_df.loc[country_data_df.date==\"2020-06-03\", feature].values[0])\/2)","d93f597c":"for feature in ['ati', 'quarantine', 'isolation', 'tests', 'confirmed', 'recovered', 'deaths']:\n    country_data_df.loc[country_data_df.date==\"2020-06-26\",feature] = \\\n    int((country_data_df.loc[country_data_df.date==\"2020-06-25\", feature].values[0] +\\\n         country_data_df.loc[country_data_df.date==\"2020-06-27\", feature].values[0])\/2)","a8aca59d":"for feature in ['ati', 'quarantine', 'isolation', 'tests', 'confirmed', 'recovered', 'deaths']:\n    country_data_df.loc[country_data_df.date==\"2020-06-29\",feature] = \\\n    int((country_data_df.loc[country_data_df.date==\"2020-06-28\", feature].values[0] +\\\n         country_data_df.loc[country_data_df.date==\"2020-06-30\", feature].values[0])\/2)","6083ad15":"country_data_df.tail()","c946ec1f":"country_data_df['date'] = country_data_df['date'].apply(lambda x: dt.datetime.strptime(x, \"%Y-%m-%d\"))","00bcaac9":"def plot_bars_time_variation(d_df, feature, title, color='Red'):\n    \n    hover_text = []\n    for index, row in d_df.iterrows():\n        hover_text.append(('Date: {}<br>'+\n                          'Confirmed cases: {}<br>'+\n                          'Recovered cases: {}<br>'+\n                          'Deaths: {}<br>'+\n                          'Tests: {}').format(row['date'],row['cases'], \n                                                   row['recovered'], row['deaths'], row['tests']))\n    d_df['hover_text'] = hover_text\n\n    d_df['text'] = hover_text\n    trace = go.Bar(\n        x = d_df['date'],y = d_df[feature],\n        name=feature,\n        marker=dict(color=color),\n        text = hover_text\n    )\n\n    data = [trace]\n    layout = dict(title = title,\n              xaxis = dict(title = 'Date', showticklabels=True), \n              yaxis = dict(title = title),\n              hovermode = 'closest'\n             )\n    fig = dict(data=data, layout=layout)\n    iplot(fig, filename='cases-covid19')","20a04380":"d_df = county_data_df.copy()\nd_df = d_df.loc[d_df['Confirmed']>0]\ncounties = list(d_df.County.unique())\n\ndata = []\nfor county in counties:\n    dc_df = d_df.loc[d_df.County==county]\n    traceC = go.Scatter(\n        x = dc_df['Date'],y = dc_df['Confirmed'],\n        name=county,\n        mode = \"markers+lines\",\n        text=dc_df['Confirmed']\n    )\n    data.append(traceC)\n\nlayout = dict(title = 'Confirmed cases per County (log scale)',\n          xaxis = dict(title = 'Date', showticklabels=True), \n          yaxis = dict(title = 'Confirmed cases (log scale)'),\n          yaxis_type=\"log\",\n          hovermode = 'y',\n          height=1000\n         )\n\nfig = dict(data=data, layout=layout)\niplot(fig, filename='covid-cases_7')","fa79fd5b":"Convert the string storing the date to an actual date.","fe8d6098":"Let's fix the issue with *2020-06-04*. The data is missing. We will just fill in the average of the days before and after.","a79ec673":"Let's fix the issue with 2020-06-26. The data is missing. We will just fill in the average of the days before and after.","50537ac1":"Let's calculate the active cases as well.  \n\nThe number of current active cases is very important, because this is the number that tests the capacity of the health system to respond to the crisis. This crisis is not only a medical crisis, it is also a resources crisis: supply and logistic resources, human resources, managmement resources. Limiting the number of current active cases or finding effective measures to distribute the effort, so that the capacity of health system will not be overhealmed, is of first priority.\n","1f504236":"<h1>SARS-nCoV-2 in Romania<\/h1>\n\n\nI added my dataset on daily county-level confirmed cases for Romania.  ","d0e03cc3":"\n# Daily data","8669f0c0":"# Load and process the data\n\nThere is only one file in the dataset, updated daily.\n\n\n## Cumulative data\n\nWe glimpse the data, looking to shape of the data and some samples from the head and tail of the dataset.","d4b0a68f":"## Load packages\n\nWe will use mostly Plotly and Folium for visualization.","5c47bfc8":"## County-level Data - Time Evolution","a1826eb2":"## Daily data\n\nLet's use pandas diff function to calculate the daily data from the cumulative data.","33cdf5a3":"Let's fix the issue for 2020-06-29."}}