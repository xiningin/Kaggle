{"cell_type":{"c009cf87":"code","da4b6de2":"code","f7b08375":"markdown"},"source":{"c009cf87":"import json\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom PIL import Image, ImageDraw\nImage.MAX_IMAGE_PIXELS = None\nfrom skimage import io","da4b6de2":"img_path = \"..\/input\/medical-labeling\/test.tiff\"\njson_path = \"..\/input\/medical-labeling\/test.json\"\nimg = io.imread(img_path, plugin='pil')[:,:,:3]\n\n# Conversion needs the dimension of the image to create\n# a mask with the same size\ny_max = img.shape[0]\nx_max = img.shape[1]\n\n# Open the mask file\nread_file = open(json_path, \"r\") \ndata = json.load(read_file)\n\n# Add each polygon to list\npolys = []\nfor index in range(data.__len__()):\n    geom = np.array(data[index]['geometry']['coordinates'])\n    polys.append(geom)\n\n\n# \"Draw\" the polygons\nmsk = Image.new('L', (x_max, y_max), 0)  # (w, h)\nfor i in range(len(polys)):\n    poly = polys[i]\n    ImageDraw.Draw(msk).polygon(tuple(map(tuple, poly[0])), outline=1, fill=1) \n\nmask = np.array(msk)\n\n# Visualize\nfix, ax = plt.subplots(1,2, figsize=(15,10))\nax[0].imshow(img)\nax[1].imshow(mask)","f7b08375":"# Convert JSON to Mask Image"}}