{"cell_type":{"cf450344":"code","bcbb8922":"code","12cf3b46":"code","0858206d":"code","4713cd46":"code","f83b53be":"code","635f7f8f":"code","14912c4c":"code","7265395b":"code","c270d91f":"code","153961f0":"code","ffbdb3b2":"code","02a3fbe7":"code","2f6526b6":"code","7d918650":"code","3ffb1485":"code","9bda4509":"code","52f7b007":"code","6733cae8":"code","d47f0a7f":"code","a0d32107":"code","7007d0a4":"code","51bdc737":"code","3966364b":"code","f6ec1036":"markdown","017ba7e0":"markdown"},"source":{"cf450344":"import numpy as np\nimport matplotlib.pyplot as plt\nfrom skimage.io import imread, imshow\nfrom skimage.color import rgb2gray, rgb2hsv\nfrom skimage.morphology import area_opening\nfrom skimage.exposure import histogram\nfrom skimage.filters import threshold_otsu\nimport cv2\nimport matplotlib.image as mpimg","bcbb8922":"#Membaca Image\nimg = cv2.imread('..\/input\/comvis\/bitcoin-3125488_960_720.png')\nim = mpimg.imread('..\/input\/comvis\/bitcoin-3125488_960_720.png')\nimshow(img)","12cf3b46":"#Segmentation Using Threshold\nth_values = np.linspace(0, 1, 11)\nfig, axis = plt.subplots(2, 5, figsize=(15,8))\nimg_gray = rgb2gray(img)\nfor th, ax in zip(th_values, axis.flatten()):\n    img_binarized = img_gray < th\n    ax.imshow(img_binarized)\n    ax.set_title('$Threshold = %.2f$' % th)","0858206d":"freq, bins = histogram(img_gray)\nplt.step(bins, freq*1.0\/freq.sum())\nplt.xlabel('Intensity value')\nplt.ylabel('Fraction of pixels');","4713cd46":"#Segmentation Using Otsu Method\ndef masked_image(image, mask):\n    r = image[:,:,0] * mask\n    g = image[:,:,1] * mask\n    b = image[:,:,2] * mask\n    return np.dstack([r,g,b])\nfig, ax = plt.subplots(1, 2, figsize=(12,6))\nthresh = threshold_otsu(img_gray)\nimg_otsu = img_gray < thresh\nax[0].imshow(img_otsu)\nfiltered = masked_image(img, img_otsu)\nax[1].imshow(filtered)","f83b53be":"import matplotlib, cv2\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\n%matplotlib inline","635f7f8f":"#Membaca Image\nimg = cv2.imread('..\/input\/comvis\/bitcoin-3125488_960_720.png')\nim = mpimg.imread('..\/input\/comvis\/bitcoin-3125488_960_720.png')","14912c4c":"plt.subplot(241)\nplt.imshow(img[..., : : -1])\nplt.xticks([]), plt.yticks([])\nplt.title('Citra Asal')","7265395b":"abuAbu = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nambang, citraBiner = cv2.threshold(abuAbu, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)","c270d91f":"plt.subplot (242)\nplt.imshow(citraBiner, cmap = \"gray\", vmin = 0, vmax = 255)\nplt.xticks([]), plt.yticks([])\nplt.title('Citra Biner')","153961f0":"#Hapus Derau\nkernel = np.ones((3, 3), np.uint8)\npembukaan = cv2.morphologyEx(citraBiner, cv2.MORPH_OPEN, kernel, iterations = 2)","ffbdb3b2":"plt.subplot(243)\nplt.imshow(pembukaan, cmap = \"gray\", vmin = 0, vmax = 255)\nplt.xticks([]), plt.yticks([])\nplt.title('Pembukaan')","02a3fbe7":"#Untuk Memastikan Daerah Latar Belakang\nlatarBelakang = cv2.dilate(pembukaan, kernel, iterations = 2)","2f6526b6":"plt.subplot (244)\nplt.imshow(latarBelakang, cmap = \"gray\",vmin = 0, vmax = 255)\nplt.xticks([]), plt.yticks([])\nplt.title('Latar Belakang')","7d918650":"#Untuk Mendapatkan Daerah Latar Depan\ntransformJarak = cv2.distanceTransform(pembukaan, cv2.DIST_L2, cv2.DIST_MASK_5)\nambang, latarDepan = cv2.threshold(transformJarak,0.7 * transformJarak.max(), 255, cv2.THRESH_BINARY)","3ffb1485":"plt.subplot (245)\nplt.imshow(latarDepan, cmap = \"gray\",vmin = 0, vmax = 255)\nplt.xticks([]), plt.yticks([])\nplt.title('Latar Depan')","9bda4509":"#Untuk Mendapatkan Area yang Tidak Dikenal\nlatarDepan = np.uint8(latarDepan)\ndaerahTakBertuan = cv2.subtract(latarBelakang, latarDepan)","52f7b007":"plt.subplot (246)\nplt.imshow(daerahTakBertuan, cmap = \"jet\")\nplt.xticks([]), plt.yticks([])\nplt.title('Tak Bertuan')","6733cae8":"#Pelabelan pada penanda\njumObjek, penanda = cv2.connectedComponents(latarDepan)\nprint(\"Jumlah koin:\", jumObjek - 1)\n#Tambahkan 1 untuk semua penanda\n#supaya label untuk Latar belakang berupa 1\npenanda = penanda + 1","d47f0a7f":"#Ubah penanda pada daerah tak bertuan dengan 0\npenanda[daerahTakBertuan == 255] = 0","a0d32107":"#Penerapan Watershed\npenanda = cv2.watershed(img, penanda)","7007d0a4":"plt. subplot (247)\nplt.imshow(penanda, cmap = \"jet\")\nplt.xticks([]), plt.yticks([])\nplt.title('Penanda')","51bdc737":"#Beri tanda batas pada citra asal\nimg[penanda == -1] = [255, 0, 0]","3966364b":"plt.subplot (248)\nplt.imshow(img[..., : : -1])\nplt.xticks([]), plt.yticks([])\nplt.title('Hasil Akhir')\nplt.show()","f6ec1036":"# Watershed Segmentation","017ba7e0":"# Image Segmentation"}}