{"cell_type":{"a007d07f":"code","b161a5c3":"code","579dcede":"code","1a40b196":"code","b8f610be":"code","9f0144c4":"code","d818b13c":"code","7d9d63e6":"code","5d09a2ff":"code","0f7f78e1":"code","7634adbc":"code","e2c4e028":"code","09882c9f":"code","abe0c935":"code","089b30ba":"code","1422435d":"code","8d4beafc":"code","fab79d1b":"code","96cc76f3":"code","d3d5923c":"code","d31493f4":"code","c3db9473":"code","34782ba7":"code","7f5b8494":"code","c79d313f":"code","5f92082a":"code","1b5befa3":"code","c6d1f50d":"code","6b1d892c":"code","a815618c":"markdown","0c72f675":"markdown","14eb40f6":"markdown","71201db4":"markdown","59607f82":"markdown","658ca392":"markdown","f311877d":"markdown","9f022d46":"markdown","5be373d2":"markdown","d2f8ad3d":"markdown","e4f37a2f":"markdown","52d79010":"markdown","8be768e2":"markdown","0fbb91f6":"markdown","96afc1ca":"markdown","d8b6ef32":"markdown","17446839":"markdown","dfadd5cd":"markdown","c997977f":"markdown","912c5472":"markdown"},"source":{"a007d07f":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","b161a5c3":"import pandas as pd\nimport numpy as np\nimport json","579dcede":"import matplotlib.pyplot as plt","1a40b196":"from statsmodels.tsa.seasonal import seasonal_decompose","b8f610be":"stock = pd.read_csv('\/kaggle\/input\/reliancestockandnewsdata\/reliance_stock_history.csv')\nprint(stock.shape, stock.columns)","9f0144c4":"stock","d818b13c":"#converting Date field to timestamp\nstock['Date'] = stock['Date'].apply(lambda x: pd.to_datetime(x))","7d9d63e6":"fig = plt.figure()\nstock['Date'].plot(kind='line');\nplt.title('time period of record')\nplt.show()","5d09a2ff":"#Resetting the index with the Date timestamp\nstock.set_index(keys=['Date'], inplace=True)","0f7f78e1":"#we shall analyse the pattern in opening and closing prices of the stock\nfig = plt.figure()\nstock[['Open','Close']].plot(kind='line');\nplt.xticks(rotation=90)\nplt.title('stock price with time')\nplt.show()","7634adbc":"#plotting a moving average to show the trend\n#we shall take a moving average of 5 consecutive days\nfig = plt.figure()\nopn = stock['Open'].rolling(window=5, min_periods=3, center=True).mean()\ncls = stock['Close'].rolling(window=5, min_periods=3, center=True).mean()\nopn.plot(kind='line', color='blue')\ncls.plot(kind='line', color='orange')\nplt.legend(['open','close'])\nplt.title('moving average over 5 consecutive days')\nplt.show()","e2c4e028":"def candlestick(data, up_color='green', down_color='red'):\n  diff = data['Close'] - data['Open']\n  up = diff[diff>0]\n  down = diff[diff<=0]\n\n  fig = plt.figure(figsize=(8,6))\n  for i in range(len(data)):\n    if data.iloc[i]['Close']>data.iloc[i]['Open']:\n      col = up_color\n    else:\n      col = down_color\n    plt.vlines(x = i, ymin=data.iloc[i]['Low'], ymax=data.iloc[i]['High'], color=col, linewidth=2)\n    plt.vlines(x = i, ymin=data.iloc[i]['Open'], ymax=data.iloc[i]['Close'], color=col, linewidth=6)\n\n  labels = list(data.index.date)\n  plt.xticks(ticks=np.arange(len(labels)), labels=labels, rotation=90)\n  plt.ylabel('stock price')\n  plt.title('price variation')\n  plt.grid()\n  plt.show()","09882c9f":"# plotting a candlestick\ncandlestick(stock)","abe0c935":"#number of days in the dataset where the stock ended in green\ndiff = stock['Close'] - stock['Open']\nprint('{} out of {} trading days, the stock ended in green'.format((diff>0).sum(), len(diff)))","089b30ba":"#analysing the pattern in volume\nfig = plt.figure()\nstock['Volume'].plot(kind='line');\nplt.xticks(rotation=90);\nplt.title('Daily traded volume')\nplt.show()","1422435d":"volume_ma = stock['Volume'].rolling(window=5, min_periods=3, center=True).mean()\nvolume_ma.plot(kind='line');\nplt.xticks(rotation=90);\nplt.show()","8d4beafc":"result_close = seasonal_decompose(stock['Close'].values, freq=1)\nresult_open = seasonal_decompose(stock['Open'].values, freq=1)","fab79d1b":"print('decomposing closing prices')\nfig = plt.figure()\nresult_close.plot();\n#plt.title('decomposing closing values of share price');\nplt.show()","96cc76f3":"print('decomposing opening prices')\nfig = plt.figure()\nresult_open.plot();\nplt.show()","d3d5923c":"from statsmodels.graphics.tsaplots import plot_acf\nfig = plt.figure();\nplot_acf(stock['Close']);","d31493f4":"fig = plt.figure()\nplot_acf(stock['Open']);","c3db9473":"from statsmodels.tsa.stattools import adfuller\nfrom statsmodels.tsa.stattools import kpss","34782ba7":"res = adfuller(stock['Close'], maxlag=5)\nprint(res)","7f5b8494":"print('adf statistic {}\\np-value {}\\ncritical values {}'.format(res[0], res[1],res[4]))","c79d313f":"res = kpss(stock['Close'], nlags=5)\nprint(res)","5f92082a":"print('kpss statistic {}\\np-value {}\\ncritical values {}'.format(res[0], res[1], res[3]))","1b5befa3":"diff_open = stock['Open'].diff()\ndiff_close = stock['Close'].diff()","c6d1f50d":"#performing kpss test to validate stationarity\nres_open = kpss(diff_open.dropna(), lags=5)\nprint(res_open)","6b1d892c":"res_close = kpss(diff_close.dropna(), lags=5)\nprint(res_close)","a815618c":"**We shall explore the Reliance stock news dataset from kaggle: [dataset](https:\/\/www.kaggle.com\/yashvi\/reliancestockandnewsdata)**\n\n","0c72f675":"a downward trend is visible. However, there is no seasonality","14eb40f6":"[ The notebook is still under active updation to include more sections]","71201db4":"the record contains reliance stock prices from 22nd October 2021 to 22nd of December 2021","59607f82":"### Please show your support by upvoting this notebook and share your feedback. \n***Thank you***","658ca392":"This notebook is divided into 3 sections <\/br>\n<\/br>\n-- the first section is based on exploring the trend, seasonality in time series stock data <\/br>\n-- next section explores the stationarity and using statistical methods to find stationarity <\/br>\n-- 3rd section is based on conversion of non-stationarity time series to stationary time series <\/br>\n\nA bonus section will explore the forecasting methods on the dataset","f311877d":"from kpss test, (p-value < 0.05), we can reject the null hypothesis. However, the null hypothesis in kpss test is contrary to adf (H0: the series is stationary)\n\nTherefore, both from our observations and statistical measures we find that the series is non-stationary","9f022d46":"as the p-value is >0.05 (cutoff threshold) we cannot reject the null hypothesis (H0: the series is stationary)","5be373d2":"> kpss test performs better when we have a smaller time series","d2f8ad3d":"similarly the p-value is 0.1 for the differenced closing prices. we cannot reject the null hypothesis of kpss test (H0: the series is stationary) ","e4f37a2f":"find the days in which the closing price was higher than openining price of stock","52d79010":"there is an apparent downword trend in stock prices over the period","8be768e2":"### analysing the time series","0fbb91f6":"### Converting non-stationary series into stationary","96afc1ca":"there are two primary unit root statistical tests to measure stationarity <\/br>\n- Augmented Dickey-Fuller test (ADF) <\/br>\n- Kwiatkowski-Philips-Schmidt-Shin (KPSS) <\/br>","d8b6ef32":"### Using statistical unit root tests to establish stationarity","17446839":"as per augmented dickey fuller test, we cannot reject (p-value >0.05) the null hypothesis (H0: series is non-stationary)","dfadd5cd":"there is no apparent pattern in daily traded volume","c997977f":"seasonal decompose highlights the trend non-stationarity in opening and closing stock prices. let us perform first order differencing and validate for stationarity","912c5472":"> Please check the [blog link](http:\/\/https:\/\/medium.com\/p\/d93feb1bd97f\/edit) for 3 important concepts in time series "}}