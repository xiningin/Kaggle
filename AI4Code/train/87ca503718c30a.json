{"cell_type":{"2f488f5d":"code","2b5e3bb1":"code","d1a1aca0":"code","8c25d7c7":"code","fc523354":"code","e2ea2e4b":"code","6db0bda5":"code","494ad730":"code","e1fe8811":"code","c0f6cfee":"code","e843fdfb":"code","e947bf7b":"code","36c27692":"code","bbc0ff15":"code","f36a0fc4":"code","12be9535":"code","56217ebd":"code","d704d58e":"code","3755ace1":"code","3a99965d":"code","e3c62c03":"markdown","6b2be138":"markdown","9a9f636e":"markdown","71a2332a":"markdown","33e33c61":"markdown","15bb7e36":"markdown","79421410":"markdown","593bb210":"markdown","85a4dc29":"markdown","c510e808":"markdown","862ab335":"markdown","25a3d7a6":"markdown","c57fc187":"markdown","99382a50":"markdown","415f7606":"markdown","e7db19db":"markdown"},"source":{"2f488f5d":"# pip install squarify","2b5e3bb1":"#Basic exploratory libraries\nimport numpy as np\nimport pandas as pd\n\n#Visualization libraries\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.graph_objects as go\nimport plotly.express as px\nimport squarify as sq\n\n#Word cloud libraries\nfrom os import path\nfrom PIL import Image\nfrom wordcloud import WordCloud, ImageColorGenerator\n\n#Library to supress unnecessary warnings\nimport warnings\nwarnings.filterwarnings('ignore')\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","d1a1aca0":"kiva_loan = pd.read_csv('\/kaggle\/input\/data-science-for-good-kiva-crowdfunding\/kiva_loans.csv')\nkiva_themes = pd.read_csv('\/kaggle\/input\/data-science-for-good-kiva-crowdfunding\/loan_theme_ids.csv')\nkiva_mpi = pd.read_csv('\/kaggle\/input\/data-science-for-good-kiva-crowdfunding\/kiva_mpi_region_locations.csv')\n\nkiva_lt = kiva_loan.merge(kiva_themes, on = 'id')","8c25d7c7":"philippines_loan = kiva_lt[kiva_lt['country'] == 'Philippines']\nphilippines_mpi = kiva_mpi[kiva_mpi['country'] == 'Philippines']\n\nphilippines = philippines_loan.merge(philippines_mpi, on = 'country')\nphilippines.head(1)","fc523354":"philippines.columns","e2ea2e4b":"philippines = philippines[['region_x', 'sector', 'activity', 'Loan Theme Type', 'use', 'date', 'loan_amount',\n                           'funded_amount', 'borrower_genders', 'lender_count', 'term_in_months',\n                           'repayment_interval', 'geo', 'lat', 'lon']]\nphilippines.columns.values[0] = 'region'\nphilippines.columns.values[3] = 'theme'","6db0bda5":"arts = philippines[philippines['sector'] == 'Arts']\narts.head(2)","494ad730":"arts.columns","e1fe8811":"arts.count()","c0f6cfee":"sns.set_context('talk')\nsns.jointplot(x = 'loan_amount', y = 'lender_count', data = arts)","e843fdfb":"plt.figure(figsize = (20,5))\nplt.xticks(rotation = 75)\n\nsns.distplot(arts['lender_count'], bins = 10)","e947bf7b":"plt.figure(figsize = (20,5))\nplt.xticks(rotation = 75)\n\nsns.distplot(arts['loan_amount'], bins = 10)","36c27692":"arts_activity = arts.groupby(['borrower_genders', 'activity'])['loan_amount'].sum().sort_values(ascending = False).reset_index()\narts_activity","bbc0ff15":"sizes = arts_activity['loan_amount']\nlabel = np.array(arts_activity['activity']) + '\\n' + sizes.astype('str')\n\nplt.style.use('ggplot')\nplt.figure(figsize = (20,15))\n\nsq.plot(sizes = sizes, label = label, alpha = 0.6, text_kwargs={'fontsize':10})","f36a0fc4":"male = len(arts[arts['borrower_genders'] == 'male'])\nfemale = len(arts[arts['borrower_genders'] == 'female'])\n\nprint('There are {} females versus {} males who have received loans in the arts in Philippines.\\\n A difference of {}.'.format(female, male, (female - male)))","12be9535":"fig = px.bar(arts_activity, x = 'activity', y = 'loan_amount',\n            hover_data = ['loan_amount', 'borrower_genders'], color = 'loan_amount',\n            labels = {'loan_amount': 'Loan Amount'}, height = 500)\n\nfig.show()","56217ebd":"arts_repayment = arts.groupby(['borrower_genders', 'activity', 'repayment_interval'])['loan_amount'].sum()\\\n.sort_values(ascending = False).reset_index()\narts_repayment","d704d58e":"fig = px.bar(arts_repayment, x = 'repayment_interval', y = 'loan_amount',\n            hover_data = ['loan_amount', 'borrower_genders', 'activity'], color = 'loan_amount',\n            labels = {'loan_amount': 'Loan Amount'}, height = 500)\n\nfig.show()","3755ace1":"mapbox_access_token = 'pk.eyJ1IjoiZ2l0b25nYSIsImEiOiJjazBueDZsN2cwNGE3M21xcnl0bGg0cWUxIn0.9-jwOGyzRkCFbcPfafeoMw'\n\nsize = arts['loan_amount'] \/ 100\n\nfig = go.Figure(go.Scattermapbox(\n    lat = arts['lat'],\n    lon = arts['lon'],\n    mode = 'markers',\n    marker = go.scattermapbox.Marker(\n        size = size,\n        color = 'red',\n            ),\n    text = arts['region'],\n        )\n    )\n\nfig.update_layout(\n    autosize = True,\n    hovermode = 'closest',\n    mapbox = go.layout.Mapbox(\n        accesstoken = mapbox_access_token,\n        bearing = 0,\n        center = go.layout.mapbox.Center(\n            lat = 12.2445, \n            lon = 125.0388,\n            ),\n        pitch = 0,\n        zoom = 4,\n        )\n    )\n\nfig.show()","3a99965d":"text = \" \".join(review for review in arts['use'])\nwordcloud = WordCloud(max_words=1000, background_color=\"white\").generate(text)\n\nplt.figure(figsize=[15,10])\nplt.imshow(wordcloud, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","e3c62c03":"## Conclusion","6b2be138":"Looking at repayment interval shows that majority do so irregularly.","9a9f636e":"Women by far make up the bulk of those lent money in the arts in Philippines. They use the money mainly to buy raw materials and supplies for their businesses.\n\nThe top 2 activities are in weaving and crafts, which tend to belong to functional arts (baskets, furniture, mats). It means that majority of those that borrow make items to sell for functional use.\n\nMost of those that borrow pay back their loans irregularly, which probably points to the unpredictable sales cycles they face for their products.\n\nKiva should, therefore, come up with loans tailor made for women in the arts in Philippines that would best suit their needs and irregular sales cycles.","71a2332a":"Broken down by gender, it shows that women by far outnumber the men that are funded in the arts in Philippines. In the bottom four activities (knitting, embroidery, musical instruments and patchwork), there were no men that received loans.","33e33c61":"## The status of lending from Kiva in the Arts in Philippines","15bb7e36":"#### Read in the required data","79421410":"#### Import the necessary libraries","593bb210":"A word cloud shows that the biggest use of the money is to buy supplies and raw materials for business needs.","85a4dc29":"Looking at the individual distribution plots of both lender_count and loan_amount, it confirms that the lower amounts are the ones that have more people giving to them, and also the ones that are most requested.\n\nIt is, therefore, important to develop lending programmes better suited to those seeking lower amounts of funding.","c510e808":"The following treemap shows that the top three activities funded were weaving, crafts and arts.","862ab335":"#### Doing initial exploration of data in the arts","25a3d7a6":"Higher number of lenders gave towards the smaller amounts of loans. The smaller amounts were also higher in number compared to the higher amounts.","c57fc187":"Once obtained, I combined it all to one data frame that has just the columns I need to analyse lending in the arts in Philippines, then get just that subset of data.","99382a50":"Mapping the distribution of loan amounts in the arts in Philippines.","415f7606":"#### Narrowing it down further to look at gender activity and loan amounts","e7db19db":"#### Get the subset of data for Philippines"}}