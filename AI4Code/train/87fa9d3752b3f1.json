{"cell_type":{"f2c0d7ee":"code","309ec9ba":"code","c0061e59":"code","e2ff6955":"code","04751278":"code","f3dc3ef3":"code","54ef8872":"code","b13049cf":"code","1f7ebb30":"code","a3dd3c30":"code","72e6130c":"code","733295d2":"code","00c7cefc":"code","4578f442":"code","b9e0d3a7":"code","d1558761":"code","d52ec398":"markdown","4275eff4":"markdown","ccaeeb91":"markdown","0f07e73a":"markdown","4ed67de5":"markdown","391dc4ce":"markdown","ecdc2819":"markdown","5dac3c8c":"markdown","8a51ab6e":"markdown","5ad7524a":"markdown","b8cdaefa":"markdown","4e59f0b3":"markdown","40923b8c":"markdown"},"source":{"f2c0d7ee":"import numpy as np\nimport pandas as pd\nimport os\n%matplotlib inline\nimport datetime as dt\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set(style=\"darkgrid\")\nprint(os.listdir(\"..\/input\"))","309ec9ba":"items = pd.read_csv(\"..\/input\/items.csv\")\nitem_categories = pd.read_csv(\"..\/input\/item_categories.csv\")\nsales_train=pd.read_csv(\"..\/input\/sales_train.csv\")\nshops = pd.read_csv(\"..\/input\/shops.csv\")\ntest = pd.read_csv(\"..\/input\/test.csv\")","c0061e59":"df_train = pd.merge(sales_train, items, on=\"item_id\", how=\"inner\")\ndf_train = pd.merge(df_train, item_categories, \n                    on=\"item_category_id\", how=\"inner\")\ndf_train = pd.merge(df_train, shops, on=\"shop_id\", how=\"inner\")\n\ndf_train.head()","e2ff6955":"df_train.drop([\"shop_id\", \"item_id\", \"item_category_id\"],\n              axis=1, inplace=True)\n\ndf_train = df_train.astype({\"date\": \"datetime64\",\n                            \"date_block_num\": \"int64\",\n                            \"item_price\": \"float64\",\n                            \"item_cnt_day\": \"int64\",\n                            \"item_name\": \"object\",\n                            \"item_category_name\": \"object\",\n                            \"shop_name\": \"object\"})\n\ndf_train.head()","04751278":"print(\"Rows: {}, Columns: {}\".format(df_train.shape[0], df_train.shape[1]))","f3dc3ef3":"df_train[\"year\"] = df_train[\"date\"] \\\n    .apply(lambda x:dt.datetime.strftime(x, \"%Y\"))\ndf_train[\"month\"] = df_train[\"date\"] \\\n    .apply(lambda x:dt.datetime.strftime(x, \"%B\"))\ndf_train[\"dow\"] = df_train[\"date\"] \\\n    .apply(lambda x:dt.datetime.strftime(x, \"%A\"))","54ef8872":"df_date = df_train \\\n    .groupby(\"date\", as_index=False) \\\n    .aggregate({\"item_cnt_day\": \"sum\"})","b13049cf":"plt.figure(figsize=(15,3));\nsns.lineplot(x=\"date\", y=\"item_cnt_day\", data=df_date);\nplt.title(\"Items Sold by Date\");\nplt.xlabel(\"Date\");\nplt.ylabel(\"Items Sold\");\nplt.show()","1f7ebb30":"df_dow = df_train \\\n    .groupby(\"dow\", as_index=False) \\\n    .aggregate({\"item_cnt_day\": \"sum\"})","a3dd3c30":"dow_order = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]\n\nplt.figure(figsize=(7,5));\nsns.barplot(x=\"dow\", y=\"item_cnt_day\", data=df_dow, order=dow_order);\nplt.title(\"Items Sold by Day of Week\");\nplt.xlabel(\"Day of Week\");\nplt.ylabel(\"Items Sold\");\nplt.show()","72e6130c":"df_month = df_train \\\n    .groupby(\"month\", as_index=False) \\\n    .aggregate({\"item_cnt_day\": \"sum\"})","733295d2":"month_order = [\"January\", \"February\", \"March\", \"April\", \n               \"May\", \"June\", \"July\", \"August\", \"September\", \n               \"October\", \"November\", \"December\"]\n\nplt.figure(figsize=(10,4));\nsns.barplot(x=\"month\", y=\"item_cnt_day\", data=df_month, order=month_order);\nplt.title(\"Items Sold by Month\");\nplt.xticks(rotation=45)\nplt.xlabel(\"Month\");\nplt.ylabel(\"Items Sold\");\nplt.show()","00c7cefc":"df_item = df_train \\\n    .groupby(\"item_category_name\", as_index=False) \\\n    .aggregate({\"item_cnt_day\": \"sum\"})","4578f442":"plt.figure(figsize=(7,20));\nsns.barplot(x=\"item_cnt_day\", y=\"item_category_name\", data=df_item);\nplt.title(\"Items Sold by Item Name\");\nplt.xlabel(\"Item Sold\");\nplt.ylabel(\"Item Name\");\nplt.show()","b9e0d3a7":"df_store = df_train \\\n    .groupby(\"shop_name\", as_index=False) \\\n    .aggregate({\"item_cnt_day\": \"sum\"})","d1558761":"plt.figure(figsize=(7,20));\nsns.barplot(x=\"item_cnt_day\", y=\"shop_name\", data=df_store)\nplt.title(\"Items Sold by Store Name\");\nplt.xlabel(\"Items Sold\");\nplt.ylabel(\"Store ID\");\nplt.show()","d52ec398":"#### Dimensions","4275eff4":"#### Items sold by month","ccaeeb91":"#### Load modules, list files in ..\/input","0f07e73a":"#### Join data","4ed67de5":"#### Next Steps:  Simple time series analysis","391dc4ce":"#### Items sold by date","ecdc2819":"#### Items sold by item id","5dac3c8c":"#### Read data","8a51ab6e":"# Exploratory Data Analysis","5ad7524a":"#### Drop redundant columns and coerce data types","b8cdaefa":"#### Items sold by Store ID","4e59f0b3":"#### Items sold by day of week","40923b8c":"#### Extract month, day of week, and year features"}}