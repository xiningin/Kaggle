{"cell_type":{"800c5b6a":"code","1975d40a":"code","f99b255c":"code","ec8d6638":"code","c2e1bf14":"code","178c3229":"code","52c50880":"code","3ef7ee1c":"code","31e6f86d":"code","52220f34":"code","6ce747d5":"code","57d16661":"code","883bc03a":"code","debd8756":"code","aee92d59":"code","1fb41653":"code","2777306e":"markdown","39a74835":"markdown","77788bf1":"markdown","d7c62076":"markdown","09c5a6d8":"markdown","731394b7":"markdown","3e9fb62d":"markdown","b591df3a":"markdown","07923eb2":"markdown","04e31ebf":"markdown","63e060e7":"markdown","664bf011":"markdown"},"source":{"800c5b6a":"# Basic library\nimport numpy as np\nimport pandas as pd\n\n# Confime the file\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","1975d40a":"# Visualization libraries\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\nsns.set()\nimport cufflinks as cf\nimport plotly.offline as plyo\nplyo.init_notebook_mode(connected=True)\n\n\n# Time series data preprocessing\nimport datetime, pytz","f99b255c":"raw_data = pd.read_csv(\"..\/input\/bitcoin-historical-data\/coinbaseUSD_1-min_data_2014-12-01_to_2019-01-09.csv\", index_col=0, parse_dates=True)\nraw_data.head()","ec8d6638":"# Data size\nraw_data.shape","c2e1bf14":"# Data info\nraw_data.info()","178c3229":"# Index data\nraw_data.index","52c50880":"# Null data\nraw_data.isnull().sum()","3ef7ee1c":"# Changing to datetime type from timestamp.\ndata_list = []\n\nfor i in raw_data.index:\n    k = pytz.utc.localize(datetime.datetime.fromtimestamp(float(i)))\n    data_list.append(k)\n    \nraw_data[\"datetime\"] = data_list","31e6f86d":"# Fillna by foward data.\nraw_data.fillna(method='ffill', inplace=True)","52220f34":"# Checking the dataframe\nraw_data.head()","6ce747d5":"# Timeseries change to per hour.Making the dataframe.\ndf = pd.DataFrame({})\n\ndf[\"Open\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"H\")]).Open.first())[\"Open\"]\ndf[\"High\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"H\")]).High.max())[\"High\"]\ndf[\"Low\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"H\")]).Low.min())[\"Low\"]\ndf[\"Close\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"H\")]).Close.last())[\"Close\"]\n\ndf.tail(10)","57d16661":"# data preparation\nprice = df\n\n# Plot\nqf = cf.QuantFig(price, title='Bitcoin', name=\"Bitcoin\")\nplyo.iplot(qf.iplot(asFigure=True), image='png', filename='qf_01')","883bc03a":"# data preparation, about open price\n\nprice_diff = price[\"Open\"].diff()\n\n# Plot, around 2018\/Jan\nprice_diff.iloc[20000:-5000].plot(figsize=(20,6))","debd8756":"# data preparation, about open price\n\nprice_change_ratio = price[\"Open\"].pct_change()\n\n# Plot, around 2018\/Jan\nprice_change_ratio.iloc[20000:-5000].plot(figsize=(20,6))","aee92d59":"# Timeseries change to per day.Making the dataframe.\ndf = pd.DataFrame({})\n\ndf[\"Open\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"D\")]).Open.first())[\"Open\"]\ndf[\"High\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"D\")]).High.max())[\"High\"]\ndf[\"Low\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"D\")]).Low.min())[\"Low\"]\ndf[\"Close\"] = pd.DataFrame(data=raw_data.groupby([pd.Grouper(key=\"datetime\", freq=\"D\")]).Close.last())[\"Close\"]\n\ndf.head(10)","1fb41653":"# Set moving average value\ndf[\"sma5\"] = df[\"Open\"].rolling(window=5).mean()\ndf[\"sma25\"] = df[\"Open\"].rolling(window=25).mean()\ndf[\"sma75\"] = df[\"Open\"].rolling(window=75).mean()\n\n# Plot, around 2018\/Jan\ndf.iloc[800:,:][[\"Open\", \"sma5\", \"sma25\", \"sma75\"]].dropna().plot(figsize=(20,6))","2777306e":"Before 2018 in uptrend, it can be seen that it rebounded while touching the long-term movement curve (sma75).<br>\nConversely, after 2018, prices have fallen as the resistance line of the upside has passed the long-term curve.<br>\nAt 2018\/November, the price has dropped sharply after sma25 and sma75 showed a tendency to match.","39a74835":"The volatility level has not changed much throughout.<br>\nHowever, we can see that the strong rise has occurred several times before and after January 2018.","77788bf1":"# Time series analysis of Bitcoin<br>\n\n## Purpose of analysis\n- Try to take a basic analysis of time series data.<br>","d7c62076":"## Data cleaning\n- Change index type, Timestamp \u21d2 datetime\n- Null data, fill the null by foward data.\n- Aggregate the time axis for analysis every hour.","09c5a6d8":"### Ratio of change price.","731394b7":"## Timesiries analysis by visualization","3e9fb62d":"### Time series difference","b591df3a":"## Data loading\n\nI use the coinbase data","07923eb2":"### Rolling statistics","04e31ebf":"The absolute value of price fluctuations is large in 2018.<br>\nNext, check the ratio of fluctuation. ","63e060e7":"## Data checking","664bf011":"### Visualization of price, with plotly."}}