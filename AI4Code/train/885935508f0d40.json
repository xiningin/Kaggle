{"cell_type":{"3ae35fd3":"code","3c90181a":"code","acd3d161":"code","dbcc6762":"code","a13548ca":"code","23cf91ef":"code","2eef4729":"code","db71e59c":"code","34f93271":"code","b4acb424":"code","145ce801":"markdown","474394ea":"markdown"},"source":{"3ae35fd3":"import sys\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n","3c90181a":"pd.set_option(\"use_inf_as_na\", True)\npd.set_option(\"display.max_columns\", 9999)\npd.set_option(\"display.max_rows\", 9999)\npd.set_option('max_colwidth', 1000)\nINPUT = '\/kaggle\/input'\nDATA = f'{INPUT}\/shopee-product-matching'\nsys.path.append(f\"{INPUT}\/symspellpy\/symspellpy-6.7.0\")\nimport pkg_resources\nfrom symspellpy import SymSpell, Verbosity","acd3d161":"sym_spell = SymSpell(max_dictionary_edit_distance=2, prefix_length=7)\ndictionary_path = pkg_resources.resource_filename(\"symspellpy\", \"frequency_dictionary_en_82_765.txt\")\n# term_index is the column of the term and count_index is the\n# column of the term frequency\nsym_spell.load_dictionary(dictionary_path, term_index=0, count_index=1)\n\n# lookup suggestions for single-word input strings\ninput_term = \"memebers\"  # misspelling of \"members\"\n# max edit distance per lookup\n# (max_edit_distance_lookup <= max_dictionary_edit_distance)\nsuggestions = sym_spell.lookup(input_term, Verbosity.CLOSEST,\n                               max_edit_distance=2)\n# display suggestion term, term frequency, and edit distance\nfor suggestion in suggestions:\n    print(suggestion)","dbcc6762":"sym_spell = SymSpell(max_dictionary_edit_distance=2, prefix_length=7)\ndictionary_path = pkg_resources.resource_filename(\n    \"symspellpy\", \"frequency_dictionary_en_82_765.txt\")\nbigram_path = pkg_resources.resource_filename(\n    \"symspellpy\", \"frequency_bigramdictionary_en_243_342.txt\")\n# term_index is the column of the term and count_index is the\n# column of the term frequency\nsym_spell.load_dictionary(dictionary_path, term_index=0, count_index=1)\nsym_spell.load_bigram_dictionary(bigram_path, term_index=0, count_index=2)\n\n# lookup suggestions for multi-word input strings (supports compound\n# splitting & merging)\ninput_term = \"whereis th elove hehad dated forImuch of thepast who couqdn'tread in sixtgrade and ins pired him\"\n# max edit distance per lookup (per single word, not per whole input string)\nsuggestions = sym_spell.lookup_compound(input_term, max_edit_distance=2)\n# display suggestion term, edit distance, and term frequency\nfor suggestion in suggestions:\n    print(suggestion)","a13548ca":"train = pd.read_csv(f\"{DATA}\/train.csv\", engine=\"c\", low_memory=False)\ntrain.info()","23cf91ef":"en_words = set()\nwith open(f\"{INPUT}\/symspellpy\/symspellpy-6.7.0\/symspellpy\/frequency_dictionary_en_82_765.txt\") as lines:\n    for line in lines:\n        tokens = line.split()\n        en_words.add(\" \".join(tokens[:-1]))\nprint(f\"{len(en_words)} en_words={list(en_words)[:100]}\")","2eef4729":"def autocorrect(row):\n    s = row[\"title\"]\n    tokens = s.split()\n    res = []\n    for t in tokens:\n        r = t\n        if t.lower() not in en_words:\n            # TODO regex ignore punctuation\n            suggestions = sym_spell.lookup(t, Verbosity.TOP, max_edit_distance=1, include_unknown=True, ignore_token=r\"[\\d\\&]+\")\n            r = suggestions[0].term\n        res.append(r)\n    return \" \".join(res)\n","db71e59c":"%%time\ntrain[\"title_p\"] = train.apply(autocorrect, axis=1)","34f93271":"cols = [\"title_p\", \"title\"]\ntrain[cols].head(50)","b4acb424":"#\"Double Tape 3M VHB 12 mm x 4,5 m ORIGINAL \/ DOUBLE FOAM TAPE\".split()\nlen(en_words)","145ce801":"Problems\n- `Double tape`: `double rape`\n","474394ea":"# Spelling correction one word at a time"}}