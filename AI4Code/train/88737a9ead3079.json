{"cell_type":{"c2a70e4c":"code","e609cd6f":"code","578ebf4f":"code","e2c383b0":"code","d7c73d08":"code","132871ad":"code","bec0e6d2":"code","2d963776":"code","5c02830b":"code","5566afc8":"code","5eefcc30":"code","afa34e43":"code","36bd7458":"code","f542dc05":"code","01df69d7":"code","2a05fd77":"code","a4fe3b80":"code","1e43e232":"code","6de60897":"code","0cb4a7b6":"code","e2333755":"markdown","d8e18ee6":"markdown","82c99b80":"markdown","ace3a93c":"markdown","78a8bbc7":"markdown","9b371731":"markdown","54cee592":"markdown","56353250":"markdown","80af3e75":"markdown","8b805d4c":"markdown","f915140a":"markdown","2ada40fb":"markdown","750d0869":"markdown","65e33ad9":"markdown","b68500b3":"markdown","5667c8ae":"markdown","78786eea":"markdown","5fc8c6b6":"markdown","ee7def7c":"markdown"},"source":{"c2a70e4c":"#importa\u00e7\u00e3o de pacotes\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n\n#carregamento dos dados\n\ndf = pd.read_csv(\"https:\/\/raw.githubusercontent.com\/andre-marcos-perez\/ebac-course-utils\/develop\/dataset\/credito.csv\", na_values = 'na')\n\n","e609cd6f":"df.head()","578ebf4f":"qtd_total, _ = df.shape\nqtd_adimplentes, _ = df[df['default'] == 0].shape\nqtd_inadimplentes, _ = df[df['default'] == 1].shape","e2c383b0":"print(f\"A proporc\u00e3o clientes adimplentes \u00e9 de {round(100 * qtd_adimplentes \/ qtd_total, 2)}%\")\nprint(f\"A proporc\u00e3o clientes inadimplentes \u00e9 de {round(100 * qtd_inadimplentes \/ qtd_total, 2)}%\")","d7c73d08":"#Analisando algumas informa\u00e7\u00f5es gerais sobre o dataset\ndf.info()","132871ad":"#Verificando quais colunas possuem dados faltantes\ndf.isna().any()","bec0e6d2":"#Analisando as propor\u00e7\u00f5es de inadimpl\u00eancia e adimpl\u00eancia nas colunas para as quais existem dados faltantes\n\ndef stats_dados_faltantes(df: pd.DataFrame) -> None:\n\n  stats_dados_faltantes = []\n  for col in df.columns:\n    if df[col].isna().any():\n      qtd, _ = df[df[col].isna()].shape\n      total, _ = df.shape\n      dict_dados_faltantes = {col: {'quantidade': qtd, \"porcentagem\": round(100 * qtd\/total, 2)}}\n      stats_dados_faltantes.append(dict_dados_faltantes)\n\n  for stat in stats_dados_faltantes:\n    print(stat)","2d963776":"stats_dados_faltantes(df=df)","5c02830b":"stats_dados_faltantes(df=df[df['default']==0])","5566afc8":"stats_dados_faltantes(df=df[df['default']==1])","5eefcc30":"#Fun\u00e7\u00e3o para formata\u00e7\u00e3o adequada de casas decimais\nfn = lambda valor: float(valor.replace(\".\", \"\").replace(\",\", \".\"))\n\ndf['valor_transacoes_12m'] = df['valor_transacoes_12m'].apply(fn)\ndf['limite_credito'] = df['limite_credito'].apply(fn)","afa34e43":"df.drop(['id','default'], axis=1).select_dtypes('number').describe().transpose()","36bd7458":"df.dropna(inplace=True)\nnova_qtd_total,_ = df.shape","f542dc05":"print(f\"Quantidade de linhas retiradas: {qtd_total-nova_qtd_total}.\")","01df69d7":"#Visualiza\u00e7\u00e3o dados categ\u00f3ricos\nsns.set_style(\"whitegrid\")\n\ndf.replace({'default':{1:'inadimplente',0:'adimplente'}}, inplace=True) \n\nf = sns.catplot(x='escolaridade', data=df, hue='default', kind='count')\nf.set(title='Escolaridade: adimplentes x inadimplentes', xlabel='Escolaridade', ylabel='Frequ\u00eancia Absoluta')\nf.set_xticklabels(rotation=45)\n\nf = sns.catplot(x='salario_anual', data=df, hue='default', kind='count')\nf.set(title='Sal\u00e1rio Anual: adimplentes x inadimplentes', xlabel='Sal\u00e1rio Anual', ylabel='Frequ\u00eancia Absoluta')\nf.set_xticklabels(rotation=45)\n\n","2a05fd77":"#Visualiza\u00e7\u00e3o de dados num\u00e9ricos\n\nsns.set_style(\"whitegrid\")\n\ndf_adimplente = df[df['default'] == 'adimplente']\ndf_inadimplente = df[df['default'] == 'inadimplente']\n\ndf.drop(['id', 'default'], axis=1).select_dtypes('number').head()","a4fe3b80":"coluna = 'qtd_transacoes_12m'\ntitulos = ['Qtd. de Transa\u00e7\u00f5es no \u00daltimo Ano', 'Qtd. de Transa\u00e7\u00f5es no \u00daltimo Ano de Adimplentes', 'Qtd. de Transa\u00e7\u00f5es no \u00daltimo Ano de Inadimplentes']\n\neixo = 0\nmax_y = 0\nfigura, eixos = plt.subplots(1,3, figsize=(20, 5), sharex=True)\n\nfor dataframe in [df, df_adimplente, df_inadimplente]:\n\n  f = sns.histplot(x=coluna, data=dataframe, stat='count', ax=eixos[eixo])\n  f.set(title=titulos[eixo], xlabel=coluna.capitalize(), ylabel='Frequ\u00eancia Absoluta')\n\n  _, max_y_f = f.get_ylim()\n  max_y = max_y_f if max_y_f > max_y else max_y\n  f.set(ylim=(0, max_y))\n\n  eixo += 1\n\nfigura.show()","1e43e232":"coluna = 'valor_transacoes_12m'\ntitulos = ['Valor das Transa\u00e7\u00f5es no \u00daltimo Ano', 'Valor das Transa\u00e7\u00f5es no \u00daltimo Ano de Adimplentes', 'Valor das Transa\u00e7\u00f5es no \u00daltimo Ano de Inadimplentes']\n\neixo = 0\nmax_y = 0\nfigura, eixos = plt.subplots(1,3, figsize=(20, 5), sharex=True)\n\nfor dataframe in [df, df_adimplente, df_inadimplente]:\n\n  f = sns.histplot(x=coluna, data=dataframe, stat='count', ax=eixos[eixo])\n  f.set(title=titulos[eixo], xlabel=coluna.capitalize(), ylabel='Frequ\u00eancia Absoluta')\n\n  _, max_y_f = f.get_ylim()\n  max_y = max_y_f if max_y_f > max_y else max_y\n  f.set(ylim=(0, max_y))\n\n  eixo += 1\n\nfigura.show()","6de60897":"f = sns.relplot(x='valor_transacoes_12m', y='qtd_transacoes_12m', data=df, hue='default')\n_ = f.set(\n    title='Rela\u00e7\u00e3o entre Valor e Quantidade de Transa\u00e7\u00f5es no \u00daltimo Ano', \n    xlabel='Valor das Transa\u00e7\u00f5es no \u00daltimo Ano', \n    ylabel='Quantidade das Transa\u00e7\u00f5es no \u00daltimo Ano'\n  )","0cb4a7b6":"#Quantidade de produtos\ncoluna = 'qtd_produtos'\ntitulos = ['Quantidade de Produtos', 'Quantidade de Produtos: Adimplentes', 'Quantidade de Produtos: Inadimplentes']\n\neixo = 0\nmax_y = 0\nfigura, eixos = plt.subplots(1,3, figsize=(20, 5), sharex=True)\n\nfor dataframe in [df, df_adimplente, df_inadimplente]:\n\n  f = sns.histplot(dataframe, x=coluna, stat='count', ax=eixos[eixo])\n  f.set(title=titulos[eixo], xlabel=coluna.capitalize(), ylabel='Frequ\u00eancia Absoluta')\n\n  _, max_y_f = f.get_ylim()\n  max_y = max_y_f if max_y_f > max_y else max_y\n  f.set(ylim=(0, max_y))\n\n  eixo += 1\n\nfigura.show()","e2333755":"# **An\u00e1lise Explorat\u00f3ria: Inadimpl\u00eancia** \n\n","d8e18ee6":"Vemos atrav\u00e9s destes gr\u00e1ficos que o valor das transa\u00e7\u00f5es no \u00faltimo ano tamb\u00e9m parece ser uma caracter\u00edstica relevante na distin\u00e7\u00e3o entre as classes de clientes. Os inadimplentes possuem um pico bem pronunciado para valores cumulativos de transa\u00e7\u00f5es entre aproximadamente 500,00 e 3.000,00. \n\nComo as duas caracter\u00edsticas analisadas acima se mostraram relevantes na indica\u00e7\u00e3o de inadimpl\u00eancia, vamos visualizar a rela\u00e7\u00e3o entre elas em um \u00fanico gr\u00e1fico com intuito de localizar nesse plano onde se localizam os clientes inadimplentes.","82c99b80":"Podemos verificar no gr\u00e1fico acima que h\u00e1 um grupo concentrado de clientes adimplentes para altos valores de transa\u00e7\u00e3o e alta quantidade de transa\u00e7\u00f5es. Para tentar contornar inadimpl\u00eancia, a institui\u00e7\u00e3o deve se concentrar em acompanhar mais de perto clientes concentrados em dois grupos: aquele para o qual o n\u00famero de transa\u00e7\u00f5es do \u00faltimo ano est\u00e1 abaixo de 60 e cuja soma dos valores das transa\u00e7\u00f5es se concentra em torno de 2.500,00 e aquele para o qual o n\u00famero de transa\u00e7\u00f5es do \u00faltimo ano est\u00e1 entre 60 e 80 e cuja soma dos valores das transa\u00e7\u00f5es se concentra entre 7.000,00 e 10.000,00.\n\nVamos analisar abaixo outra caracter\u00edstica num\u00e9rica que se mostrou relevante na distin\u00e7\u00e3o entre inadimpl\u00eancia e adimpl\u00eancia, a quantidade de produtos do cliente.","ace3a93c":"# **4\\. An\u00e1lise e Visualiza\u00e7\u00e3o dos Dados** ","78a8bbc7":"Foi poss\u00edvel observar com esta an\u00e1lise que as quantidades mais significativas para a indica\u00e7\u00e3o de inadimpl\u00eancia s\u00e3o a **quantidade de transa\u00e7\u00f5es do \u00faltimo ano**, o **valor das transa\u00e7\u00f5es do \u00faltimo ano** e a **quantidade de produtos** possu\u00eddos pelo cliente. Sendo assim, \u00e9 sugerido \u00e0 institui\u00e7\u00e3o financeira os seguintes procedimentos:\n\n1. acompanhar mais de perto e oferecer juros e condi\u00e7\u00f5es especiais de pagamentos \u00e0 clientes concentrados em dois grupos: aquele para o qual o n\u00famero de transa\u00e7\u00f5es do \u00faltimo ano est\u00e1 abaixo de 60 e cuja soma do valor das transa\u00e7\u00f5es se concentra em torno de 2.500,00 e aquele para o qual o n\u00famero de transa\u00e7\u00f5es do \u00faltimo ano est\u00e1 entre 60 e 80 e cuja soma do valor das transa\u00e7\u00f5es se concentra entre 7.000,00 e 10.000,00. Para futuros clientes com o mesmo perfil, oferecer um limite de cr\u00e9dito menor;\n\n2. incentivar o cliente a obter diversos produtos, diminuindo seus respectivos custos, com o intuito de engajar mais o cliente com seus servi\u00e7os;\n\n3. clientes com mais de 90 transa\u00e7\u00f5es anuais de valor cumulativo superior \u00e0 12.550,00 n\u00e3o oferecem risco significativo de inadimpl\u00eancia.","9b371731":"Note que as propor\u00e7\u00f5es dessas quantidades faltantes se mant\u00eam aproximadamente iguais tanto no caso de inadimpl\u00eancia ('default'=1) quanto no caso de adimpl\u00eancia ('default'=0). Ou seja, ambas as classes s\u00e3o afetadas aproximadamente da mesma maneira pela aus\u00eancia de dados.","54cee592":"# **1\\. Introdu\u00e7\u00e3o ao problema**\n\nEstamos analisando uma base de dados de uma institui\u00e7\u00e3o financeira e queremos estudar as caracter\u00edsticas de um cliente inadimplente, isto \u00e9, em quais circunt\u00e2ncias este cliente deixa de arcar com suas d\u00edvidas quando comparados a clientes adimplentes. Nossa vari\u00e1vel dependente ser\u00e1, portanto, aquela descrita pela coluna \"Default\" em que adimplentes s\u00e3o rotulados por '0' e inadimplentes por '1'.","56353250":"Note que as colunas **limite_credito** e **valor_transacoes_12m** est\u00e3o sendo interpretadas como contendo valores categ\u00f3ricos (dtype = object) sendo que deveriam ser tratadas como contendo valores do tipo num\u00e9rico. Al\u00e9m disso, j\u00e1 podemos perceber que algumas colunas possuem dados faltantes.","80af3e75":"# **5\\. Conclus\u00f5es e insights**","8b805d4c":"# **2\\. Carregamento e Explora\u00e7\u00e3o dos Dados**","f915140a":"Aqui podemos observar uma distin\u00e7\u00e3o clara entre as duas classes de clientes: os adimplentes tem um pico de transa\u00e7\u00f5es anuais entre 60 e 90, aproximadamente, enquanto os inadimplentes possuem um pico entre 30 e 60. Ou seja, clientes inadimplentes tendem a realizar menos transa\u00e7\u00f5es. Nesse \u00faltimo caso, seria indicado que a institui\u00e7\u00e3o financeira buscasse alcan\u00e7ar este perfil de cliente oferecendo uma possibilidade de negocia\u00e7\u00e3o de juros e condi\u00e7\u00f5es especiais de pagamento al\u00e9m de oferecer um limite de cr\u00e9dito mais baixo a futuros clientes similares.","2ada40fb":"Aqui podemos perceber que clientes inadimplentes tendem a n\u00e3o adquirir mais de 3 produtos, enquanto clientes adimplentes possuem, em sua maioria, 3 ou mais produtos. Seria interessante que a institui\u00e7\u00e3o financeira incentivasse o cliente a obter outros produtos, diminuindo seus respectivos custos, com o intuito de engajar mais o cliente com seus servi\u00e7os.","750d0869":"Vamos agora analisar as caracter\u00edsticas que podem ser indicadoras de inadimpl\u00eancia. Come\u00e7aremos pelas quantidades categ\u00f3ricas e ent\u00e3o analisaremos as quantidades num\u00e9ricas. Note que n\u00e3o usaremos a coluna **sexo** do nosso dataset pois n\u00e3o queremos introduzir um vi\u00e9s de g\u00eanero em nossas an\u00e1lises.","65e33ad9":"# **3\\. Transforma\u00e7\u00e3o e limpeza dos dados**","b68500b3":"Com a explora\u00e7\u00e3o iniciada acima, vemos que o primeiro passo a ser tomado consiste na transforma\u00e7\u00e3o dos dados erroneamente classificados como categ\u00f3ricos em num\u00e9ricos. Para isso, abaixo iremos transformar os valores presentes nessas colunas para o formato onde casas decimais s\u00e3o colocadas depois de um ponto, e n\u00e3o uma v\u00edrgula. ","5667c8ae":"Podemos observar acima que nem o sal\u00e1rio anual e nem a escolaridade parecem ser caracter\u00edsticas relevantes para selecionar clientes inadimplentes, dado que o tamanho das barras varia aproximadamente de maneira igual para ambas as classes. Interessante notar que, intuitivamente, o sal\u00e1rio anual poderia ser considerado decisivo para a distin\u00e7\u00e3o entre adimplentes e inadimplentes e, no entanto, os dados n\u00e3o corroboram essa premissa. ","78786eea":"Vamos verificar agora se as colunas **limite_credito** e **valor_transacoes_12m** foram transformadas corretamente e tamb\u00e9m acessar algumas estat\u00edsticas relevantes das colunas num\u00e9ricas.","5fc8c6b6":"Nesta estapa faremos o carregamento dos dados e uma an\u00e1lise explorat\u00f3ria incial com o intuito de obter mais informa\u00e7\u00f5es a respeito de nosso dataset.","ee7def7c":"Vimos que as colunas foram transformadas corretamente para o tipo num\u00e9rico. Agora, vamos tratar os dados faltantes. Como vimos na se\u00e7\u00e3o anterior, os dados ausentes se mant\u00eam proporcionais para as duas classes de interesse (adimplentes e inadimplentes). Portanto, podemos simplesmente remov\u00ea-los sem que isso introduza um desbalanceamento extra aos dados."}}