{"cell_type":{"a31ec387":"code","6ee2498b":"code","025cc2fb":"code","b54738dd":"code","0b369f66":"code","4305cd97":"code","826d3be6":"markdown"},"source":{"a31ec387":"import pandas as pd\nimport numpy as np\n\nfiles = ['..\/input\/gb-vpp-pulp-fiction-abb651\/median_submission.csv',\n         '..\/input\/dnn-lstm-tpu\/median_submission.csv',\n         '..\/input\/vpp-a-basic-ensembling-technique-with-ridgecv\/submission_pp.csv'\n         ]\n\n\nscores=np.array([.25, .30, .45])\n\nprint(np.sum(scores))\ndictionary=dict(list(zip(files,list(scores))))\n\nsub = pd.read_csv('..\/input\/ventilator-pressure-prediction\/sample_submission.csv')\n\nframes=list()\nfor f,s in zip(files,scores):\n    f=pd.read_csv(f)\n    f['pressure']*=s\n    frames.append(f)\nsub['pressure'] = np.sum(np.concatenate([f['pressure'].values.reshape(-1, 1) for f in frames], axis=1), axis=1)\nsub.to_csv('submission.csv', index=False)\nsub.head(5)\n","6ee2498b":"# print(scores)","025cc2fb":"# df_train = pd.read_csv(\"..\/input\/ventilator-pressure-prediction\/train.csv\")\n# unique_pressures = df_train[\"pressure\"].unique()\n# sorted_pressures = np.sort(unique_pressures)","b54738dd":"# total_pressures_len = len(sorted_pressures)\n\n# def find_nearest(prediction):\n#     insert_idx = np.searchsorted(sorted_pressures, prediction)\n#     if insert_idx == total_pressures_len:\n#         # If the predicted value is bigger than the highest pressure in the train dataset,\n#         # return the max value.\n#         return sorted_pressures[-1]\n#     elif insert_idx == 0:\n#         # Same control but for the lower bound.\n#         return sorted_pressures[0]\n#     lower_val = sorted_pressures[insert_idx - 1]\n#     upper_val = sorted_pressures[insert_idx]\n#     return lower_val if abs(lower_val - prediction) < abs(upper_val - prediction) else upper_val","0b369f66":"# %%time\n# sub[\"pressure\"] = sub[\"pressure\"].apply(find_nearest)","4305cd97":"# sub.to_csv(\"submission.csv\", index=False)","826d3be6":"This notebook referred to the following.\n\nhttps:\/\/www.kaggle.com\/ambrosm\/vent-011-median-wins"}}