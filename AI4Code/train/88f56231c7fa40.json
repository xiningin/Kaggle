{"cell_type":{"646d9e68":"code","d0420bed":"code","420892f3":"code","c0501c04":"code","38c06f8b":"code","e65f5272":"code","f2d81fb9":"code","66dc841e":"code","812db6d8":"code","88385090":"code","531e0369":"code","1d625fa5":"code","4481cf7f":"code","e781dec0":"code","744745fb":"code","d95d0b8a":"code","feff045c":"markdown","69d37ed6":"markdown","c7a36b90":"markdown","9b7a7cd3":"markdown","80df42c3":"markdown","ddf2d5d8":"markdown","c7129264":"markdown","392512ea":"markdown","efb6b03b":"markdown","03cb44df":"markdown","700ea288":"markdown","8a8e2543":"markdown","d905648c":"markdown","94071595":"markdown","cf049e46":"markdown","932de7ed":"markdown","8fa79ad7":"markdown","2619305d":"markdown","ffa5f7f7":"markdown","7ff963fd":"markdown","ab9d7ac2":"markdown","fa5832fd":"markdown","d79ef289":"markdown","ffde2591":"markdown"},"source":{"646d9e68":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt","d0420bed":"df = pd.read_csv(\"..\/input\/top-football-leagues-scorers\/Data.csv\")\ndf.head()","420892f3":"x = df[\"Player Names\"].value_counts() == 5\nplayers_5years = x[x].index\nplayers_5years","c0501c04":"df_topplayers = df[df['Player Names'].isin(players_5years)]\ndf_topplayers.head()","38c06f8b":"df_topplayers[\"Goals_xG_Diff\"] = df_topplayers['Goals'] - df_topplayers['xG']\ndf_topplayers[\"Target_Accuracy_Per_Game\"] = (df_topplayers['On Target Per Avg Match']\/df_topplayers['Shots Per Avg Match'])*100\ndf_topplayers[\"Shots_to_Goal_conversion\"] = (df_topplayers['Goals']\/df_topplayers['OnTarget'])*100\ndf_topplayers.head()","e65f5272":"df_top = df_topplayers.groupby(by = [\"Player Names\"])[\"Matches_Played\",\"Goals\",'Mins','OnTarget'].sum().reset_index()\ndf_top.head()","f2d81fb9":"plt.figure(figsize = (12,8))\ndf_top_by_goals = df_top.sort_values(by=['Goals'], ascending=False)\nax = sns.barplot(x='Goals', y='Player Names', data=df_top_by_goals)\nax.set_xlabel('Goals')","66dc841e":"df_top[\"Mins_per_goal\"] = df_top['Mins']\/df_top['Goals']\ndf_top[\"Mins_per_Target\"] = df_top['Mins']\/df_top['OnTarget']\ndf_top.head()","812db6d8":"df_top_by_mins_shot = df_top.sort_values(by=['Mins_per_Target'], ascending=False)\n\nimport plotly.graph_objects as go\n\nfig = go.Figure(go.Bar(\n            x=df_top_by_mins_shot['Mins_per_Target'],\n            y=df_top_by_mins_shot['Player Names'],\n            orientation='h'))\n\nfig.show()","88385090":"df_mins_per_goal = df_top.sort_values(by=['Mins_per_goal'], ascending=False)\n\nfig = go.Figure(go.Bar(\n            x=df_mins_per_goal['Mins_per_goal'],\n            y=df_mins_per_goal['Player Names'],\n            marker=dict(color = [10*i for i in range(1,len(df_mins_per_goal['Mins_per_goal']))],\n                     colorscale='viridis'),\n            orientation='h'))\n\nfig.show()","531e0369":"fig = go.Figure()\nGoals_diff_sum = {}\nGoals_diff_mean = {}\nfor i in players_5years:\n    df_player = df_topplayers[df_topplayers['Player Names'].isin([i])]\n    Goals_diff_sum[i] = df_player['Goals_xG_Diff'].sum()\n    Goals_diff_mean[i] = df_player['Goals_xG_Diff'].mean()\n    fig.add_trace(go.Scatter(x=df_player['Year'], y=df_player[\"Goals_xG_Diff\"],\n                    mode='lines+markers',\n                    name=i))\nfig.update_layout(\n    autosize=False,\n    width=900,\n    height=600,)\n\nfig.show()","1d625fa5":"df1 = pd.Series(Goals_diff_sum).sort_values(ascending = False).reset_index()\ndf2 = pd.Series(Goals_diff_mean).sort_values(ascending = False).reset_index()\n\ndf_final = pd.merge(df1, df2, on=\"index\")\ndf_final.columns = [\"Player\", \"Sum\",\"Mean\"]\n\ndf_final","4481cf7f":"Average_TA_deviation = {}\nMean_TA = {}\nfig = go.Figure()\n\nfor i in players_5years:\n    df_player = df_topplayers[df_topplayers['Player Names'].isin([i])]\n    Average_TA_deviation[i] = df_player['Target_Accuracy_Per_Game'].pct_change().mean()*100\n    Mean_TA[i] = df_player['Target_Accuracy_Per_Game'].mean()\n    fig.add_trace(go.Scatter(x=df_player['Year'], y=df_player[\"Target_Accuracy_Per_Game\"],\n                    mode='lines+markers',\n                    name=i))\nfig.update_layout(\n    autosize=False,\n    width=900,\n    height=600,)\n\nfig.show()","e781dec0":"df1 = pd.Series(Average_TA_deviation).sort_values(ascending = False).reset_index()\ndf2 = pd.Series(Mean_TA).sort_values(ascending = False).reset_index()\n\n\ndf_final = pd.merge(df1, df2, on=\"index\")\ndf_final.columns = [\"Player\",\"Average Percentage Change\", \"Mean Target Accuracy\"]\ndf_final['Score'] = (df_final[\"Average Percentage Change\"] + df_final[\"Mean Target Accuracy\"])\/2\ndf_final = df_final.sort_values(by = \"Score\", ascending = False)\ndf_final","744745fb":"Shots_efficiency_Avg_PC = {}\nMean_SE = {}\n\nfig = go.Figure()\n\nfor i in players_5years:\n    df_player = df_topplayers[df_topplayers['Player Names'].isin([i])]\n    Shots_efficiency_Avg_PC[i] = df_player['Shots_to_Goal_conversion'].pct_change().mean()*100\n    Mean_SE[i] = df_player['Shots_to_Goal_conversion'].mean()\n    fig.add_trace(go.Scatter(x=df_player['Year'], y=df_player[\"Shots_to_Goal_conversion\"],\n                    mode='lines+markers',\n                    name=i))\n\nfig.update_layout(\n    autosize=False,\n    width=900,\n    height=600,)\n\nfig.show()\n","d95d0b8a":"df1 = pd.Series(Shots_efficiency_Avg_PC).sort_values(ascending = False).reset_index()\ndf2 = pd.Series(Mean_SE).sort_values(ascending = False).reset_index()\n\n\ndf_final = pd.merge(df1, df2, on=\"index\")\ndf_final.columns = [\"Player\",\"Average Percentage Change\", \"Mean Shot Efficiency\"]\ndf_final['Score'] = (df_final[\"Average Percentage Change\"] + df_final[\"Mean Shot Efficiency\"])\/2\ndf_final = df_final.sort_values(by = \"Score\", ascending = False)\ndf_final","feff045c":"## Minutes Per Goal Winner : 1. Lionel Messi (5pts)\n2. Cristiano Ronaldo (4pts)\n3. Robert Lewandowski (3pts)\n4. Ciro Immobile (2pts)\n5. Luis Suarez (1pt)","69d37ed6":"## If you liked this notebook, then do **Upvote** as it will keep me motivated in creating such kernels ahead. **Thanks!!**","c7a36b90":"# Who will be Crowned the Best Player?","9b7a7cd3":" ![](https:\/\/www.fcbarcelona.com\/fcbarcelona\/photo\/2019\/12\/02\/abbdc187-9e69-4cdb-8636-541d6b3a7b59\/mini__R5I4403.JPG)","80df42c3":"### Observations from the graph above:\n1. Immobile and Aspas, who have never featured as a star striker at any of the big clubs have performed beyond expectations over the period.\n2. Robert Lewandowski who has been the best player of 2020, has not been the most consistent in delivering to the expectation levels over this period.","ddf2d5d8":"### Observations from the graph above:\n\n1. Fabio Quagliarella has gradually increased his shot efficiency from 17.14 percent in 2016 to 55.55 percent in 2020. And he is 37 years old, which is said to be twilight years in a football career.\n2. Lionel Messi, who is regarded as a GOAT (Greatest of all Time) of the game, declined in shots to goal conversion, in fact he declined so much that he is in the bottom of the list.\n3. All the so called \"underrated players\" like Quagliarella, Immobile, Kramaric, and Belloti have better shots to goal conversion efficiency than two absolute titans of football world, Ronaldo and Messi.","c7129264":"## Target Accuracy\nThe average number of shots on target per match is an important parameter. Given the insane finishing skills of all the goal scorers, the higher percentage of target accuracy would lead to higher probability in getting a goal. The winner of this category will be decided on the final score which is calculated as the mean of average percentage change in target accuracy and mean target accuracy over the 4 year period.","392512ea":"## Target Accuracy Winner : 1. Andrej Kramaric (5pts)\n2. Iago Aspas (4pts)\n3. Lionel Messi (3pts)\n4. Cristiano Ronaldo (2pts)\n5. Robert Lewandowski (1pt)","efb6b03b":"## 4. Goals-xG Score \n\nThe following graph is basically difference between Goals and Expected Goals plotted in all 5 years. The winner of this category is one who has performed best over the years than what was expected.","03cb44df":"### The top players selected for analysis are those who are featured for all 5 years [2016-2020]. The winner will be decided on six categories:\n1. **Goals**\n2. **Minutes Per On Target Shot**\n3. **Minutes Per Goal**\n4. **Goals -xG**\n5. **Target Accuracy**\n6. **Shots efficiency**\n\n**Disclaimer:** The best player here is determined over the 2016-2020 period and not on the basis of  any individual season and its based on the information provided in the dataset.","700ea288":"## 1.Lionel Messi (22\/30)\n2. Robert Lewandowski (16\/30)\n3. Ciro Immobile (14\/30)\n4. Cristiano Ronaldo (12\/30)\n5. Andrej Kramaric (7\/30)","8a8e2543":"### Observations from the graph above:\n\nSince Lewandowski and Messi have mins per goal stat at 91 and 94 respectively, one can expect them to score a goal every game on an average. A single goal is considered to be very useful if its a tactically defensive game where there is a dearth of goal.","d905648c":"## Shots Efficiency\nThis category equates **the shot conversion to goals** of all the players. The winner of this category will be decided on the final score which is calculated as the mean of average percentage change in shots efficiency and mean shots efficiency over the 4 year period.","94071595":"## 1. Goals\nGoals win you games. So the most basic and obvious parameter to determine the contribution of a player is to determine how many goals he scored over the period.","cf049e46":"## Shots Efficiency Winner :  1. Ciro Immobile (5 pts)\n2. Fabio Quagliarella (4 pts)\n3. Robert Lewandowski (3 pts)\n4. Andrej Kramaric (2 pts)\n5. Andrea Belotti (1 pt)","932de7ed":"### Observations from the graph above:\n1. Cristiano Ronaldo and Iago Aspas may not have the highest shots on target percentage every year but they have been the most consistent over the period.\n2. Old guys in the football career lingua, like Ciro Immobile and Fabio Quagliarella find it difficult to hit the target on a consistent basis, but that could also be because of the sides they play in, which may provide them with less chances due to lack in creativity in the midfield.\n3. Andrej Kramaric edges out as the winner of this category based on highest mean target accuracy over the period and a decent positive percentage deviation over the period.","8fa79ad7":"## 2. Minutes Per On-Target Shot\n\nIf the shot is on target then there is a high probability that ball might find the back of the net, hitting the target frequently is a very much desired skill in the world of football, lets see who comes out on top.","2619305d":"## 3. Minutes Per Goal\nThis parameter is very crucial in determining how frequent the player will find the back of the net. Any value with less than 90 minutes accounts for a goal per game expectancy. But with an average extra time of 4 mins in one match we can take the total time for one game to be around 94 mins.","ffa5f7f7":"# And the Best Award Goes to...","7ff963fd":"## Goal Winner : 1. Lionel Messi (5pts)\n2. Robert Lewandowski (4pts)\n3. Cristiano Ronaldo (3pts)\n4. Ciro Immobile (2pts)\n5. Luis Suarez (1pt)","ab9d7ac2":"![](https:\/\/img.fifa.com\/image\/upload\/t_l4\/trtfnhjhunj6o0tgh1by.jpg)","fa5832fd":"## Goals-xG Winner : 1. Lionel Messi (5pts)\n2. Ciro Immobile (4pts)\n3. Timo Werner (3pts)\n4. Iago Aspas (2pts)\n5. Andrea Belloti (1pt)","d79ef289":"**Aggregation** is not the only way to determine the best of the best because all the top scorers have scored plenty of goals and also one may dominate one year and then will not score as many goals in the next. **Consistency** over the years is also important in determining who has been the best. By using some of the parameters that usually take back seat in front of parameters like goals and goals per game, we would take a more holistic approach. Following graphs will shed some light on those important parameters.","ffde2591":"## Minutes Per Goal Winner : 1. Robert Lewandowski (5pts)\n2. Lionel Messi (4pts)\n3. Cristiano Ronaldo (3pts)\n4. Luis Suarez (2pts)\n5. Ciro Immobile (1pt)"}}