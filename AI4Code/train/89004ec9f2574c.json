{"cell_type":{"cad58533":"code","3e8afeb8":"code","3667a0f6":"code","00af0da8":"code","364efefb":"code","07721e4d":"code","7e1db626":"code","262768a9":"code","efd3cd16":"code","0052e5df":"code","7b54fac2":"code","da3da033":"code","2007a3c2":"code","8ba31d06":"code","939de7bf":"code","7528eb67":"code","949761cf":"code","69c329b9":"code","3a98afe8":"code","c6fd404c":"code","7c167dcb":"code","438579f0":"code","a400f0f8":"code","71058fdb":"code","45c22f14":"code","46e3bbb2":"code","1c827f4a":"code","0d5e9f13":"code","73159236":"code","077f9c0f":"code","06f49c46":"code","ec46e59f":"markdown","54cc8bb9":"markdown","214dabee":"markdown","64b00ce3":"markdown","8ed582bd":"markdown","589fd7ce":"markdown","5e64a86c":"markdown","edf6323a":"markdown","e090551a":"markdown","04a8e27d":"markdown","ff7e2754":"markdown","92775890":"markdown","a94a5fed":"markdown","838bdd45":"markdown","1cf2bccf":"markdown"},"source":{"cad58533":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","3e8afeb8":"import pandas as pd\nimport numpy as np\nimport plotly.express as pl\nimport seaborn as sns\nfrom sklearn.preprocessing import OneHotEncoder","3667a0f6":"data = pd.read_csv('..\/input\/hotel-booking\/hotel_bookings.csv')","00af0da8":"data.head()","364efefb":"data.shape","07721e4d":"data.info()","7e1db626":"data.isnull().sum()","262768a9":"replace = {\"children\" : 0, \"country\" : \"unknown\", \"agent\" : 0, \"company\" : 0}\ndata1 = data.fillna(replace)","efd3cd16":"data1[\"meal\"].replace('Undefined','SC',inplace=True)","0052e5df":"Zero = list(data1.loc[data1['adults']+data1['children']+data1['babies']==0].index)","7b54fac2":"data1.drop(data1.index[Zero], inplace=True)","da3da033":"data1.shape","2007a3c2":"data_country = pd.DataFrame(data1.loc[data1['is_canceled']==0][\"country\"].value_counts())\ndata_country","8ba31d06":"total_guests = data_country['country'].sum()\ntotal_guests","939de7bf":"data_country[\"% of Guests\"] = round(data_country[\"country\"]\/total_guests*100,2)","7528eb67":"data_country.rename(columns={\"country\":\"Guests count\"},inplace = True)\ndata_country[\"country\"] = data_country.index","949761cf":"fig = pl.pie(data_country,\n             values = \"Guests count\",\n             names = \"country\",\n             title = \"Country wise Guest Count\",\n             template = \"seaborn\"\n             )\nfig.update_traces(textposition = \"inside\",textinfo=\"value+percent+label\")\nfig.show()","69c329b9":"Resort_hotel = data1.loc[(data1[\"hotel\"] == \"Resort Hotel\") & data1[\"is_canceled\"]==0]\nCity_hotel = data1.loc[(data1[\"hotel\"] == \"City Hotel\") & data1[\"is_canceled\"]==0]","3a98afe8":"Resort_hotel['adr_pp'] = Resort_hotel['adr']\/(Resort_hotel['adults']+Resort_hotel['children'])\nCity_hotel['adr_pp'] = City_hotel['adr']\/(City_hotel['adults']+City_hotel['children'])","c6fd404c":"data1['adr_pp'] = data1['adr']\/(data1['adults']+data1['children'])","7c167dcb":"market_segment = data1[\"market_segment\"].value_counts()\nmarket_segment","438579f0":"fig = pl.pie(market_segment,\n            names = market_segment.index,\n            values = market_segment.values,\n            title = \"Market Segment Bookings\",\n            template = \"plotly\")\nfig.update_traces(textposition = \"inside\" , textinfo = \"percent+label\" )\nfig.show()","a400f0f8":"Resort_hotel_monthly = Resort_hotel.groupby(\"arrival_date_month\")[\"hotel\"].count()\nCity_hotel_monthly = City_hotel.groupby(\"arrival_date_month\")[\"hotel\"].count()","71058fdb":"Resort_hotel_guest = pd.DataFrame({\"month\":list(Resort_hotel_monthly.index),\n                                  \"hotel\":\"Resort hotel\",\n                                  \"guest\":list(Resort_hotel_monthly.values)})\nCity_hotel_guest = pd.DataFrame({\"month\":list(City_hotel_monthly.index),\n                                  \"hotel\":\"City hotel\",\n                                  \"guest\":list(City_hotel_monthly.values)})","45c22f14":"Total_guest = pd.concat([Resort_hotel_guest, City_hotel_guest], ignore_index = True)","46e3bbb2":"cancelled_correlation = data1.corr()[\"is_canceled\"]\ncancelled_correlation","1c827f4a":"categorical_features = [\"hotel\",\"arrival_date_month\",\"meal\",\"market_segment\",\"distribution_channel\",\"reserved_room_type\",\n                       \"deposit_type\",\"customer_type\"]\nnumerical_features = [\"lead_time\",\"arrival_date_week_number\",\"arrival_date_day_of_month\",\"stays_in_weekend_nights\",\n                      \"stays_in_week_nights\",\"adults\",\"children\",\"babies\",\"is_repeated_guest\",\"previous_cancellations\",\n                     \"previous_bookings_not_canceled\",\"agent\",\"company\",\"required_car_parking_spaces\",\n                      \"total_of_special_requests\",\"adr\"]","0d5e9f13":"Features = categorical_features + numerical_features\nX = data1.drop([\"is_canceled\"],axis = 1)[Features]\ny = data1[\"is_canceled\"]","73159236":"from sklearn.impute import SimpleImputer\nnumerical_transformer = SimpleImputer(strategy = \"constant\")\nfrom sklearn.pipeline import Pipeline\ncategorical_transformer = Pipeline(steps=[(\"imputer\",SimpleImputer(strategy =\"constant\",fill_value=\"Unknown\")),\n                                         (\"onehot\", OneHotEncoder(handle_unknown=\"ignore\"))])","077f9c0f":"from sklearn.compose import ColumnTransformer\npreprocessor = ColumnTransformer(transformers = [(\"num\", numerical_transformer, numerical_features),\n                                               (\"cat\", categorical_transformer, categorical_features)])","06f49c46":"from sklearn.ensemble import RandomForestClassifier\nfrom sklearn.model_selection import cross_val_score, KFold\n\nrf_model = [(\"RF model\", RandomForestClassifier(random_state = 40, n_jobs=1))]\n\nKfolds = 4\nsplit = KFold(n_splits=Kfolds, shuffle=True, random_state=40)\n\nfor name, model in rf_model:\n    model_steps = Pipeline(steps = [(\"preprocessor\", preprocessor),\n                                   (\"model\", model)])\ncv_score = cross_val_score(model_steps, X, y, cv=split,\n                          scoring=\"accuracy\",\n                          n_jobs=1)\nmin_score = round(min(cv_score),4)\nmax_score = round(max(cv_score),4)\nstd_score = round(np.std(cv_score),4)\nmean_score = round(np.mean(cv_score),4)\n\nprint (f\"{name} Cross Validation Accuracy score of Model:{mean_score} +\/- {std_score}(std) min:{min_score} max:{max_score}\")","ec46e59f":"#### Given the required data, we will know whether the Customer will cancel the booking with 86% accuracy using this model","54cc8bb9":"#### Since this is a Classificaiton Problem with regards to the Booking Cancellation, Random Forest method is selected to build a model ","214dabee":"# Predicting Cancellation Based on Hotel Bookings","64b00ce3":"# EDA","8ed582bd":"# Model Building","589fd7ce":"#### Country Wise Guest Count","5e64a86c":"# Cancellation Prediction","edf6323a":"#### The Hotel Industry plays a major role in the Tourism of a country. Cancellation of Bookings can have a major impact in the Hotel Industry.\n#### This project is aimed at Predicting the cancellation of a Booking done in a hotel in Portugal with the given data.\n#### The data is analysed and Visualized followed by developing a model to predict the Cancellaiton of the Booking. \n#### The data set is downloaded from Kaggle and Various other Sources are used a reference for this project. ","e090551a":"#### Defining Feature & Target","04a8e27d":"#### The Accuracy of the Model is 86% ","ff7e2754":"#### Separating Categorical and Numerical Features","92775890":"data.corr()","a94a5fed":"#### Market Segment wise Booking Count","838bdd45":"#### Dropping the Zero Values","1cf2bccf":"#### Data Cleaning"}}