{"cell_type":{"fe5c010c":"code","1ea3a3bf":"code","de5a7cb2":"code","56a01a43":"code","c8df1e99":"code","b8ce2a14":"code","b07d9afe":"code","1665733d":"code","b26fda0e":"code","b7305ca9":"markdown","3c494455":"markdown","44aa7aae":"markdown","06b447a1":"markdown","3ffc0731":"markdown","f2308e1d":"markdown","12811288":"markdown","1ecf8c85":"markdown","fa8157fe":"markdown","0f50ef97":"markdown"},"source":{"fe5c010c":"import pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","1ea3a3bf":"import matplotlib.style as style\nstyle.available","de5a7cb2":"style.use(\"fivethirtyeight\")","56a01a43":"world = pd.read_csv(\"..\/input\/world-happiness-report-2021\/world-happiness-report.csv\")\nworld.head()","c8df1e99":"# get top 5 happiest countries, 2020\ntop5_2020 = world[world[\"year\"]==2020].sort_values(by=\"Life Ladder\", ascending = False).head()[\"Country name\"]\n\n# subset by top 5 happiest and least happy countries, plus the US\nsubset = world[\n    (world[\"Country name\"].isin(top5_2020)) \n    | (world[\"Country name\"]==\"United States\")\n]\nsubset","b8ce2a14":"fig, ax = plt.subplots(figsize = (14,8))\n\nfor country, group in subset.groupby(\"Country name\"):\n    group.plot(\n        ax = ax, \n        x = \"year\", \n        y = \"Life Ladder\", \n        label = country\n    )\n\nplt.show()","b07d9afe":"fig, ax = plt.subplots(figsize = (14,8))\n\nfor country, group in subset.groupby(\"Country name\"):\n    group.plot(\n        ax = ax, \n        x = \"year\", \n        y = \"Life Ladder\", \n        label = country\n    )\n    \n### add the following: ###\n\n# y-tick label size\nax.tick_params(axis=\"both\", which=\"major\", labelsize=18)\n\n# capitalize x-label\nax.set_xlabel(\"Year\")\n\n# bold x-axis\nplt.axhline(6.5, color=\"black\", linewidth=1.5, alpha=0.6)\n\nplt.show()","1665733d":"fig, ax = plt.subplots(figsize = (14,8))\n\nfor country, group in subset.groupby(\"Country name\"):\n    group.plot(\n        ax = ax, \n        x = \"year\", \n        y = \"Life Ladder\", \n        label = country\n    )\n    \nax.tick_params(axis=\"both\", which=\"major\", labelsize=18)\nax.set_xlabel(\"Year\")\nplt.axhline(6.5, color=\"black\", linewidth=1.5, alpha=0.6)\n\n### add the following: ###\n\n# add v-line next to y-tick labels\nax.set_xlim(2004.5,2021)\nplt.axvline(2004.75, color=\"black\", linewidth=1.5, alpha=0.5)\n\n# add signature bar\nax.text(\n    x = 2003.7,\n    y = 6.17,\n    s = \"   twitch.tv\/MitchsWorkshop                                                                                        Source: Gallup World Poll   \",\n    fontsize = 17,\n    color = \"#F0F0F0\",\n    backgroundcolor = \"grey\"\n)\n\n# add title\nax.text(\n    x = 2004,\n    y = 8.3,\n    s = \"The World's Top 5 Happiest Countries, and the United States\",\n    fontsize = 21,\n    fontweight = \"bold\",\n    fontfamily = \"poppins\"\n)\n\n# add subtitle\nax.text(\n    x = 2004,\n    y = 8.141,\n    s = \"Note: the y-axis is not base-0. This is purely a demonstration of improved plot aesthetics.\\nAll scores are out of 10.\",\n    fontsize = 18\n)\n\n# custom colors\ncolors = [\n    \"#3c9dbd\",\n    \"#c2762b\",\n    \"#cc274d\",\n    \"#29802c\",\n    \"#565e5e\",\n    \"#623aa6\"\n]\nleg = ax.get_legend()\nfor i,c in enumerate(colors):\n    plt.gca().get_lines()[i].set_color(c)\n\nplt.show()","b26fda0e":"fig, ax = plt.subplots(figsize = (14,8))\n\nfor country, group in subset.groupby(\"Country name\"):\n    group.plot(\n        ax = ax, \n        x = \"year\", \n        y = \"Life Ladder\", \n        label = country\n    )\n    \nax.tick_params(axis=\"both\", which=\"major\", labelsize=18)\nax.set_xlabel(\"Year\")\nplt.axhline(6.5, color=\"black\", linewidth=1.5, alpha=0.6)\nax.set_xlim(2004.5,2021)\nplt.axvline(2004.75, color=\"black\", linewidth=1.5, alpha=0.5)\n\n# signature bar\nax.text(\n    x = 2003.7,\n    y = 6.17,\n    s = \"   twitch.tv\/MitchsWorkshop                                                                                        Source: Gallup World Poll   \",\n    fontsize = 17,\n    color = \"#F0F0F0\",\n    backgroundcolor = \"grey\"\n)\n\n# title\nax.text(\n    x = 2004,\n    y = 8.3,\n    s = \"The World's Top 5 Happiest Countries, and the United States\",\n    fontsize = 21,\n    fontweight = \"bold\",\n    fontfamily = \"poppins\"\n)\n\n# add subtitle\nax.text(\n    x = 2004,\n    y = 8.141,\n    s = \"Note: the y-axis is not base-0. This is purely a demonstration of improved plot aesthetics.\\nAll scores are out of 10.\",\n    fontsize = 18\n)\n\n# custom colors\ncolors = [\n    \"#3c9dbd\",\n    \"#c2762b\",\n    \"#cc274d\",\n    \"#29802c\",\n    \"#565e5e\",\n    \"#623aa6\"\n]\n\n# change line colors\nfor i,c in enumerate(colors):\n    plt.gca().get_lines()[i].set_color(c)\n    \n### add the following: ###\n\n# Denmark\nplt.text(\n    x = 2005.5,\n    y = 7.88,\n    s = \"Denmark\",\n    rotation = -29,\n    color = colors[0],\n    fontsize = 14,\n    fontweight = \"bold\"\n)\n\n# Finland\nplt.text(\n    x = 2006.2,\n    y = 7.7,\n    s = \"Finland\",\n    rotation = 0,\n    color = colors[1],\n    fontsize = 14,\n    fontweight = \"bold\"\n)\n\n# Iceland\nplt.text(\n    x = 2008,\n    y = 6.95,\n    s = \"Iceland\",\n    rotation = 42,\n    color = colors[2],\n    fontweight = \"bold\"\n)\n\n# Switzerland\nplt.text(\n    x = 2012,\n    y = 7.6,\n    s = \"Switzerland\",\n    rotation = -37,\n    color = colors[4],\n    fontweight = \"bold\"\n)\n\n# United States\nplt.text(\n    x = 2010,\n    y = 6.985,\n    s = \"United States\",\n    rotation = -20,\n    color = colors[5],\n    fontweight = \"bold\"\n)\n\n# Iceland (whom I originally forgot. Sorry, Iceland.)\nplt.text(\n    x = 2013,\n    y = 7.25,\n    s = \"Iceland\",\n    rotation = -25,\n    color = colors[3],\n    fontweight = \"bold\"\n)\n\n# disable legend\nax.get_legend().remove()\n\nplt.savefig(\"after.png\", bbox_inches = \"tight\") # for twitter @MitchsWorkshop\nplt.show()","b7305ca9":"### Get top 5 happiest 2021 to compare to the US over time","3c494455":"### Set style as default 538 style\nWe will edit it later.","44aa7aae":"### Initial plot | Happiness over time","06b447a1":"### Now let's remove the legend","3ffc0731":"### Not bad for a first plot. Let's add some things.","f2308e1d":"Note the style \"fivethirtyeight\" that we will begin with.","12811288":"# Improving Matplotlib Aesthetics to emulate FiveThirtyEight.","1ecf8c85":"### I build things like this live on [Twitch](http:\/\/twitch.tv\/MitchsWorkshop)! Stop by and ask questions or just hang out and talk data!","fa8157fe":"### Import data","0f50ef97":"### Getting better..."}}