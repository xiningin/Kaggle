{"cell_type":{"982b0389":"code","c126fe67":"code","eced7a41":"code","3c6643b5":"code","6f782362":"code","9bab40b2":"code","80729b0b":"code","3c5a54ee":"code","eba38415":"code","405f4bd4":"code","bb398711":"code","2248d5a7":"code","03dc88d3":"code","37694363":"code","b3afb296":"code","2b60f854":"code","2e44e0ca":"code","5a5e4a9a":"code","2e2e7767":"markdown","b88b77e0":"markdown","679c75db":"markdown","1ec1e0b0":"markdown","e3781f7b":"markdown","7264bec7":"markdown","5087c707":"markdown","af22b1fe":"markdown","0cd8f5a9":"markdown","3c3cd28d":"markdown","8d8ecd63":"markdown","6a051b36":"markdown"},"source":{"982b0389":"pip install gif","c126fe67":"import pandas as pd\nimport numpy as np\n\nfrom IPython.display import HTML\n\nimport gif\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nplt.style.use('fivethirtyeight')","eced7a41":"data = pd.read_csv('..\/input\/smart-meters-in-london\/weather_hourly_darksky.csv')","3c6643b5":"data.head()","6f782362":"print('Dataset shape: ', data.shape)","9bab40b2":"data = data.rename(columns={\"time\": \"date\"})","80729b0b":"data['date'] = pd.to_datetime(data['date'])","3c5a54ee":"data.set_index('date',drop=True, inplace=True)","eba38415":"data = data.resample('M').mean()","405f4bd4":"data.head()","bb398711":"#Defining the start and end dates\nEND = data.index[-1]\nSTART = data.index[0]\n\n\n@gif.frame\ndef plot(df, date):\n    df = df.loc[df.index[0]:pd.Timestamp(date)]\n    fig, (ax1) = plt.subplots(1, figsize=(10, 5), dpi=100)\n    ax1.plot(df.temperature, marker='o', linestyle='--', linewidth=3, markersize=10, color='tab:pink')\n    maxi = round(df.temperature.max() + 5)\n    ax1.set_title('Average Monthly Temperature in London over the 2012-2014', fontsize=20)\n    ax1.set_xlim([START, END])\n    ax1.set_ylim([0, maxi])\n    ax1.set_ylabel('Temperature C\u00b0', color='tab:blue', fontsize=17)","2248d5a7":"frames = []\nfor date in pd.date_range(start=data.index[0],\n                          end=data.index[-1], \n                          freq='1M'):\n    frame = plot(data, date)\n    frames.append(frame)","03dc88d3":"#saving the GIF\ngif.save(frames, \"output.gif\", duration=0.5 ,unit = 's')\n\n#visualizing the GIF\nHTML('<img src=\".\/output.gif\" \/>')","37694363":"@gif.frame\ndef plot_split(df, date, split_date):\n    df = df.loc[df.index[0]:pd.Timestamp(date)]\n    fig, (ax1) = plt.subplots(1, figsize=(10, 5), dpi=100)\n\n    #TRAIN\n    if date < pd.Timestamp(split_date):\n        ax1.axvspan(START, date, alpha=0.5, color='#33FF92')\n        ax1.text(pd.Timestamp('2012-01-31'), y=12, s='Train', fontsize=20)  # where the train text goes\n    #TEST\n    if (date > pd.Timestamp(split_date)):\n        ax1.axvspan(pd.Timestamp(split_date), date, alpha=0.5, color='#F933FF')\n        ax1.text(pd.Timestamp('2014-01-31'), y=12, s='Test', fontsize=20)\n    ax1.plot(df.temperature, marker='o', linestyle='--', linewidth=3, markersize=10, color='tab:orange')\n    maxi = round(df.temperature.max() + 5)\n\n    ax1.set_title('Train\/Test-Split', fontsize=20)\n    ax1.set_xlim([START, END])\n    ax1.set_ylim([0, maxi])\n    ax1.set_ylabel('Temperature C\u00b0', color='tab:blue', fontsize=17)","b3afb296":"frames = []\nfor date in pd.date_range(start=data.index[0], end=data.index[-1], freq='1M'):\n    frame = plot_split(data, date, '2013-06-21')\n    frames.append(frame)\n\ngif.save(frames, \"output2.gif\", duration=0.5, unit='s')","2b60f854":"HTML('<img src=\".\/output2.gif\" \/>')","2e44e0ca":"@gif.frame\ndef plot(df, date):\n    df = df.loc[df.index[0]:pd.Timestamp(date)]\n    fig, (ax1, ax2, ax3) = plt.subplots(3, figsize=(10, 5), dpi=100)\n\n    ax1.plot(df.temperature, marker='o', linestyle='--', linewidth=2, markersize=8, color='g')\n    maxi = round(df.temperature.max() + 5)\n    ax1.set_title('SUBPLOTS', fontsize=20)\n    ax1.set_xlim([START, END])\n    ax1.set_ylim([0, maxi])\n    ax1.set_ylabel('Temperature C\u00b0', color='green', fontsize=10)\n\n    ax2.plot(df.visibility, marker='o', linestyle='--', linewidth=2, markersize=8, color='r')\n    maxi = round(df.visibility.max() + 3)\n    ax2.set_xlim([START, END])\n    ax2.set_ylim([0, maxi])\n    ax2.set_ylabel('Visibility', color='red', fontsize=10)\n\n    ax3.plot(df.windSpeed, marker='o', linestyle='--', linewidth=2, markersize=8, color='b')\n    maxi = round(df.windSpeed.max() + 3)\n    ax3.set_xlim([START, END])\n    ax3.set_ylim([0, maxi])\n    ax3.set_ylabel('Windspeed', color='blue', fontsize=10)\n\n\n##### CREATE ANIMATIONS ######\nframes = []\nfor date in pd.date_range(start=data.index[0], end=data.index[-1], freq='1M'):\n    frame = plot(data, date)\n    frames.append(frame)\ngif.save(frames, \"output3.gif\", duration=0.5, unit='s')","5a5e4a9a":"HTML('<img src=\".\/output3.gif\" \/>')","2e2e7767":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        2.3 Indexing the date and droping the column\n    <\/h3>\n<\/div>","b88b77e0":"<h1 id=\"basics\" style=\"font-family:verdana;\"> \n    <center>3. Visualizing by animation<\/center>\n<\/h1>","679c75db":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        1.2 Importing data\n    <\/h3>\n<\/div>\n\n<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    I am using the data from Kaggle: <a href=\"https:\/\/www.kaggle.com\/jeanmidev\/smart-meters-in-london\" target=\"blank_\">source<\/a>.\n<\/div>","1ec1e0b0":"<h1 id=\"basics\" style=\"font-family:verdana;\"> \n    <center>2. Data Preprocessing<\/center>\n<\/h1>","e3781f7b":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        3.3 Subplot Animation\n    <\/h3>\n<\/div>","7264bec7":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        3.2 Adding some colour sections into the Animation\n    <\/h3>\n<\/div>","5087c707":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        2.2 Converting it to the appropriate date format\n    <\/h3>\n<\/div>","af22b1fe":"<h1 id=\"basics\" style=\"font-family:verdana;\"> \n    <center>1. Setup<\/center>\n<\/h1>","0cd8f5a9":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        2.1 Renaming the time coloumn\n    <\/h3>\n<\/div>","3c3cd28d":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        3.1 The average temperature of the city\n    <\/h3>\n<\/div>","8d8ecd63":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        1.1 loading the libraries\n    <\/h3>\n<\/div>","6a051b36":"<div style=\"font-family:verdana; word-spacing:1.5px;\">\n    <h3 id=\"italic\">\n        2.4 Resampling on a monthly bases\n    <\/h3>\n<\/div>"}}