{"cell_type":{"8de5c633":"code","09e0bd13":"code","330fa2ed":"code","323cff1f":"code","b0e32787":"code","07106727":"code","f490519c":"code","bbefdef2":"code","a9c753ff":"code","fbed8477":"code","8b51366c":"code","3d772a86":"code","c8138c6d":"code","849d292d":"code","518053d0":"code","8b5a5c27":"code","b99d2cc7":"code","5ac515e1":"code","60212a68":"code","3075fe2e":"code","1df690a4":"code","55a239d9":"code","433a916a":"code","17cadc4a":"code","052b8a62":"code","1a04c05e":"code","35e9001f":"code","8f770187":"code","b1a18188":"code","a8277102":"code","79d00af5":"code","ba5918e8":"code","2131ca70":"code","e941e8fd":"code","b1483e75":"code","bdf5986b":"code","34074b80":"code","8ad9e92b":"code","13de6f5c":"code","5103644e":"code","ebc5486f":"code","835ebab3":"code","94c997be":"code","6adc079d":"code","6bf92d6b":"code","e8c1c8ea":"code","548e16e9":"code","508efd68":"code","2a77d65c":"code","bf236359":"code","135041aa":"code","12dcce94":"code","efd9e226":"code","0ea3826d":"code","6abdd42e":"code","4f50bc87":"code","788e14d7":"code","0f7ce027":"code","bcbfec32":"code","60e56b69":"code","07a67dbd":"code","bce07de4":"code","60e65233":"code","c69dc91e":"code","57549464":"code","d366df27":"code","d11bb506":"code","b36b6c86":"code","c3a9e4a4":"code","96286ae6":"code","b12edb83":"code","dd8a55f4":"code","ba3f4f79":"code","3ae7c15b":"code","051e7031":"code","285c6947":"code","efb6923f":"code","1d3efcd4":"code","985b4c67":"markdown","9496073d":"markdown","556ba376":"markdown","6b58354f":"markdown","6e083468":"markdown","91dca00d":"markdown","546f46e4":"markdown","e7581ff4":"markdown","ad4f377b":"markdown","2e2ebb25":"markdown","26a3326b":"markdown","5f618f78":"markdown","45e44025":"markdown","65f5b31d":"markdown","1cef296b":"markdown","17600bcb":"markdown","71f9db80":"markdown","7abad195":"markdown","060ce91e":"markdown","d064911f":"markdown","698b3302":"markdown","bc51f5cb":"markdown","b22647a1":"markdown","1b0cbb50":"markdown","36986492":"markdown","a01f14ca":"markdown","2ea0bcd5":"markdown","be8864eb":"markdown","05bb0d4e":"markdown","7d5c90d0":"markdown","46a7833f":"markdown","80017bff":"markdown","e4e64902":"markdown","5237e69f":"markdown","2ace5ba9":"markdown","5b542428":"markdown"},"source":{"8de5c633":"import pandas as pd\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt","09e0bd13":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","330fa2ed":"files =  [filename for filename in os.listdir(r'..\/input\/uber-pickups-in-new-york-city')if filename.startswith(\"uber-\")]\nfiles","323cff1f":"files.remove('uber-raw-data-janjune-15.csv')","b0e32787":"files","07106727":"path= r'..\/input\/uber-pickups-in-new-york-city'\n\n#blank dataframe\nfinal=pd.DataFrame()\n\nfor file in files:\n    df=pd.read_csv(path+\"\/\"+file,encoding='utf-8')\n    final=pd.concat([df,final])","f490519c":"final.shape","bbefdef2":"df=final.copy()","a9c753ff":"df.head()","fbed8477":"df.shape","8b51366c":"df.dtypes","3d772a86":"df['Date\/Time'] = pd.to_datetime(df['Date\/Time'], format=\"%m\/%d\/%Y %H:%M:%S\")","c8138c6d":"df.dtypes","849d292d":"df['weekday']=df['Date\/Time'].dt.day_name()\ndf['day']=df['Date\/Time'].dt.day\ndf['minute']=df['Date\/Time'].dt.minute\ndf['month']=df['Date\/Time'].dt.month\ndf['hour']=df['Date\/Time'].dt.hour","518053d0":"df.dtypes","8b5a5c27":"df.head()","b99d2cc7":"df['Base'].unique()","5ac515e1":"df['day'].unique()","60212a68":"df['weekday'].unique()","3075fe2e":"import plotly.express as px","1df690a4":"px.bar(x=df['weekday'].value_counts().index,\n      y=df['weekday'].value_counts().values\n      )","55a239d9":"plt.hist(df['hour'])","433a916a":"for i,month in enumerate(df['month'].unique()):\n    print(month)","17cadc4a":"\nplt.figure(figsize=(40,20))\nfor i,month in enumerate(df['month'].unique()):\n    plt.subplot(3,2,i+1)\n    df[df['month']==month]['hour'].hist()\n","052b8a62":"for i in df['month'].unique():\n    plt.figure(figsize=(5,3))\n    df[df['month']==i]['hour'].hist()\n    ","1a04c05e":"!pip install chart_studio","35e9001f":"import chart_studio.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot","8f770187":"trace1 = go.Bar( \n        x = df.groupby('month')['hour'].sum().index,\n        y = df.groupby('month')['hour'].sum(),\n        name= 'Priority')\niplot([trace1])","b1a18188":"plt.figure(figsize=(10,6))\nplt.hist(df['day'], bins=30, rwidth=.8, range=(0.5, 30.5))\nplt.xlabel('date of the month')\nplt.ylabel('Total Journeys')\nplt.title('Journeys by Month Day')","a8277102":"plt.figure(figsize=(20,8))\nfor i,month in enumerate(df['month'].unique(),1):\n    plt.subplot(3,2,i)\n    df_out=df[df['month']==month]\n    plt.hist(df_out['day'])\n    plt.xlabel('days in month'.format(i))\n    plt.ylabel('total rides')","79d00af5":"ax=sns.pointplot(x=\"hour\",y=\"Lat\", hue=\"weekday\",data=df)\nax.set_title('hoursoffday vs latiitide of passenger')","ba5918e8":"df.head()","2131ca70":"df['Base'].head()","e941e8fd":"df.groupby(['Base','month'])['Date\/Time'].count()","b1483e75":"base=df.groupby(['Base','month'])['Date\/Time'].count().reset_index()\nbase","bdf5986b":"plt.figure(figsize=(10,6))\nsns.lineplot(x='month',y='Date\/Time',hue='Base',data=base)","34074b80":"def count_rows(rows):\n    return len(rows)","8ad9e92b":"by_cross = df.groupby(['weekday','hour']).apply(count_rows)\nby_cross","13de6f5c":"pivot=by_cross.unstack()\npivot","5103644e":"plt.figure(figsize=(10,6))\nsns.heatmap(pivot, annot=False)","ebc5486f":"df.head()","835ebab3":"def heatmap(col1,col2):\n    by_cross = df.groupby([col1,col2]).apply(lambda x:len(x))\n    pivot=by_cross.unstack()\n    plt.figure(figsize=(10,6))\n    return sns.heatmap(pivot,annot=False)","94c997be":"## validating above Analysis through Heatmap\nheatmap('day','hour')","6adc079d":"heatmap('day','month')","6bf92d6b":"df[df['month']==4]","e8c1c8ea":"heatmap('weekday','month')","548e16e9":"plt.figure(figsize=(10,6))\n\nplt.plot(df['Lon'], df['Lat'],'r+', ms=0.5)\nplt.xlim(-74.2, -73.7)\nplt.ylim(40.6,41)","508efd68":"df.head()","2a77d65c":"df_out=df[df['weekday']=='Sunday']\ndf_out.head()","bf236359":"df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()","135041aa":"from folium.plugins import HeatMap","12dcce94":"import folium\nfrom folium.plugins import HeatMap\nbasemap=folium.Map()","efd9e226":"HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\nbasemap","0ea3826d":"def plot(df,day):\n    df_out=df[df['weekday']==day]\n    df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index()\n    HeatMap(df_out.groupby(['Lat','Lon'])['weekday'].count().reset_index(),zoom=20,radius=15).add_to(basemap)\n    return basemap","6abdd42e":"plot(df,'Sunday')","4f50bc87":"uber_15 = pd.read_csv(r'\/kaggle\/input\/uber-pickups-in-new-york-city\/uber-raw-data-janjune-15.csv',encoding='utf-8')\nuber_15.head()","788e14d7":"uber_15.shape","0f7ce027":"#Checking the minimum date in the uber_15\nuber_15['Pickup_date'].min()","bcbfec32":"#Checking the maximum date in the uber_15\nuber_15['Pickup_date'].max()","60e56b69":"uber_15['Pickup_date'] =  pd.to_datetime(uber_15['Pickup_date'], format='%Y-%m-%d %H:%M:%S')","07a67dbd":"uber_15['weekday']=uber_15['Pickup_date'].dt.day_name()\nuber_15['day']=uber_15['Pickup_date'].dt.day\nuber_15['minute']=uber_15['Pickup_date'].dt.minute\nuber_15['month']=uber_15['Pickup_date'].dt.month\nuber_15['hour']=uber_15['Pickup_date'].dt.hour","bce07de4":"uber_15.head()","60e65233":"px.bar(x=uber_15['month'].value_counts().index,\n           y=uber_15['month'].value_counts().values)","c69dc91e":"#ax=sns.countplot(uber_15['hour'])\n#ax.yaxis.set_major_formatter(tick.FormatStrFormatter('%.0f'))","57549464":"uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count()","d366df27":"uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count().reset_index()","d11bb506":"summary=uber_15.groupby(['weekday', 'hour'])['Pickup_date'].count().reset_index()","b36b6c86":"summary=summary.rename(columns = {'Pickup_date':'Counts'})\nsummary","c3a9e4a4":"plt.figure(figsize=(10,6))\nsns.pointplot(x=\"hour\", y=\"Counts\", hue=\"weekday\", data=summary)","96286ae6":"uber_foil=pd.read_csv(r'\/kaggle\/input\/uber-pickups-in-new-york-city\/Uber-Jan-Feb-FOIL.csv')","b12edb83":"uber_foil.head()","dd8a55f4":"uber_foil['dispatching_base_number'].unique()","ba3f4f79":"sns.boxplot(x = 'dispatching_base_number', y = 'active_vehicles', data = uber_foil)","3ae7c15b":"sns.boxplot(x = 'dispatching_base_number', y = 'trips', data = uber_foil)","051e7031":"# Finding the ratio of trips\/active_vehicles\nuber_foil['trips\/vehicle'] = uber_foil['trips']\/uber_foil['active_vehicles']","285c6947":"uber_foil.head()","efb6923f":"uber_foil.set_index('date')","1d3efcd4":"plt.figure(figsize=(10,6))\nuber_foil.set_index('date').groupby(['dispatching_base_number'])['trips\/vehicle'].plot()\nplt.ylabel('Average trips\/vehicle')\nplt.title('Demand vs Supply chart (Date-wise)')\nplt.legend()","985b4c67":"##### group the data by Weekday and hour","9496073d":"##### Lets create a function for a specific day","556ba376":"#### to analyse which base number gets popular by month name","6b58354f":"##### Lat : The latitude of the Uber pickup\n\n##### Lon : The longitude of the Uber pickup\n\n##### Base : The TLC base company code affiliated with the Uber pickup","6e083468":"#### Analysis of journey by Week-days","91dca00d":"### Analysing In-Depth Analysis of Rush in New york City Day & hour wise","546f46e4":"##### Uber pickups by the month in NYC","e7581ff4":"##### Loading Uber-Jan-Feb-FOIL.csv","ad4f377b":"##### adding hue params","2e2ebb25":"##### simplest way of creating pivot tables,first of all call groupby on 2 columns so that we will get groups \n##### df.groupby(['weekday','hour']).apply(lambda x: len(x)), now \"weekday\" becomes rows and \"hour\" becomes cols\n##### & then call unstack","26a3326b":"### getting Rush in hour ","5f618f78":"### perform Spatial Analysis using heatmap to get a clear cut of Rush on Sunday(Weekend)","45e44025":"#### Analysing Rush in New york City","65f5b31d":"#### It peaks during evening time when people are logging off from work","1cef296b":"#### analysis of which month has max rides","17600bcb":"#### Analysing the results\n#### We observe that the number of trips increases each month, we can say that from April to September 2014, Uber was in a continuous improvement process.","71f9db80":"#### seems to have more number of trips in B02764","7abad195":"## Heatmap by Hour and Weekday.","060ce91e":"##### how Average trips\/vehicle inc\/decreases with dates with each of base umber","d064911f":"## Analysis of Jan-June uber_15","698b3302":"#### to analyse which base number gets popular by month name","bc51f5cb":"#### seems to have highest sales on Thursday","b22647a1":"###  Data Preparation\u00b6","1b0cbb50":"#### Analysis of Journey of Each  Day","36986492":"##### creating heatmap so that it can be easily visualize","a01f14ca":"#### seems to have more number of Active Vehicles in B02764","2ea0bcd5":"#### Analysis of Location data points\u00b6","be8864eb":"#### 2 Cross Analysis\n#### Through our exploration we are going to visualize:\n\n\n#### 1.Heatmap by Hour and Weekday.\n#### 2.Heatmap by Hour and Day.\n#### 3.Heatmap by Month and Day.\n#### 4.Heatmap by Month and Weekday.","05bb0d4e":"### Analysis by Hour","7d5c90d0":"##### We can see a number of hot spots here. Midtown Manhattan is clearly a huge bright spot.\n##### & these are made from Midtown to Lower Manhattan.\n##### Followed by Upper Manhattan and the Heights of Brooklyn.\n","46a7833f":"##### The globe is split into an imaginary 360 sections from both top to bottom (north to south) and 180 sections from side to side (west to east). The sections running from top to bottom on a globe are called longitude, and the sections running from side to side on a globe are called latitude.\n\n\n##### Latitude is the measurement of distance north or south of the Equator.\n\n##### Every location on earth has a global address. Because the address is in numbers, people can communicate about location no matter what language they might speak. A global address is given as two numbers called coordinates. The two numbers are a location's latitude number and its longitude number (\"Lat\/Long\").","80017bff":"##### Interestingly, after the morning rush, the number of Uber pickups doesn't dip much throughout the rest of the morning and early afternoon. There is significantly more demand in the evening than the daytime. Let's investigate to see if there's a difference in hourly pattern for different days of the week.","e4e64902":"#### create pivot_tables","5237e69f":"#### We can see that the number of Uber pickup has been steadily increasing throughout the first half of 2015 in NYC","2ace5ba9":"#### Analysis of Rush of each hour in each month","5b542428":"#### Analysis of Total rides month wise"}}