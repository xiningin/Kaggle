{"cell_type":{"d0895231":"code","26560042":"code","9d16ba02":"code","ebb9b113":"code","d37f651e":"code","bac369ca":"code","658e917b":"code","83c37377":"code","89e6e577":"code","abc2b76a":"code","81f67245":"code","493ee914":"code","08651fdb":"code","b178a2d8":"code","f2976b24":"code","15dc6ad2":"code","9001add6":"code","ddc11f55":"markdown","f6f46125":"markdown","0cc76e72":"markdown","aabda89c":"markdown","b6022013":"markdown","a6a2e580":"markdown","2ec4c4ce":"markdown","ece85497":"markdown","6be4c7ad":"markdown","8239eccd":"markdown","f984af11":"markdown","1d2f8af6":"markdown","c2eb2411":"markdown","664d5d1b":"markdown","65b55a10":"markdown","e0deb9b9":"markdown"},"source":{"d0895231":"# import pandas and seaborn\nimport pandas as pd\nimport seaborn as sns","26560042":"# import linear regression model\nfrom sklearn.linear_model import LinearRegression\n# import linear regression metrics\nfrom sklearn.metrics import r2_score, mean_squared_error\n# import train\/test split function\nfrom sklearn.model_selection import train_test_split","9d16ba02":"#import the data\nwater_data = pd.read_csv('\/kaggle\/input\/water-temperature\/water.csv')\n\n# display the data to check it has imported\nwater_data","ebb9b113":"water_data.info()","d37f651e":"water_data['O2ml_L'].describe()","bac369ca":"water_data[water_data['O2ml_L'] < 0]","658e917b":"# create a copy with only those values >=0\nwater_data = water_data[water_data['O2ml_L'] >= 0].copy()\n\n# use describe to check\nwater_data['O2ml_L'].describe()","83c37377":"# define an array of features and a list for the target\nfeatures = ['T_degC', 'PO4uM', 'SiO3uM', 'NO2uM', 'NO3uM', 'Salnty']\ntarget = 'O2ml_L'\n\n# warning: pairplot can be very slow on a dataset of this size, avoid hue\nsns.pairplot(data=water_data, x_vars=features, y_vars=target);","89e6e577":"sns.relplot(data=water_data, x='NO2uM', y='O2ml_L', aspect=2);","abc2b76a":"water_data[water_data['NO2uM'] > 3]","81f67245":"water_data['Sta_X'] = (water_data['Sta_ID'] == '081.8 046.9').replace({True: 'Yes', False: 'No'})\nwater_data","493ee914":"water_data.groupby('Sta_X')['NO2uM'].describe()","08651fdb":"# stat='density', common_norm=False gives density relative to the group totals\n# compare to\n# sns.displot(data=water_data, x='O2ml_L', col='Sta_X');\nsns.displot(data=water_data, x='O2ml_L', col='Sta_X', stat='density', common_norm=False);","b178a2d8":"# Take a slice but filtering out Sta_X\nclean_data = water_data[water_data['Sta_ID'] != \"081.8 046.9\"].copy()\nclean_data","f2976b24":"clean_data['Zone'].value_counts()","15dc6ad2":"# box plots of O2ml_L grouped by Zone\n","9001add6":"# create a new column Year based on the data feature","ddc11f55":"You could also explore the data based on the year of the sample.","f6f46125":"It doesn't seem possible to have negative values oxygen saturation. Where are they coming from?","0cc76e72":"<a id='preprocessing3'><\/a>\n## Preprocessing and Preparing (3)\nThe values for this station are noticably different from the rest of the data. A new data set can be produced with this station excluded.","aabda89c":"<a id='eda3'><\/a>\n## Exploratory Data Analysis (3)\n\nHow does this station's `NO2uM` readings compare to other stations?","b6022013":"# MEI Data Science Taught Course - Lesson 9 - Putting it all together\n\n## Table of Contents\n\n* [Introduction](#intro)\n - [Importing libraries and data](#import)\n* [Exploratory Data Analysis (1)](#eda1)\n* [Pre-processing and Preparing (1)](#preprocessing1)\n* [Exploratory Data Analysis (2)](#eda2)\n* [Pre-processing and Preparing (2)](#preprocessing2)\n - [Feature engineering](#feature2)\n* [Exploratory Data Analysis (3)](#eda3)\n* [Pre-processing and Preparing (3)](#preprocessing3)\n - [Feature engineering](#feature3)\n* [Exploratory Data Analysis (4)](#eda4)","a6a2e580":"These values look anomalous. The code below takes a slice which ignores rows with negative `O2ml_L`","2ec4c4ce":"<a id='preprocessing1'><\/a>\n## Preprocessing and Preparing (1)","ece85497":"<a id='eda1'><\/a>\n## Exploratory Data Analysis (1)","6be4c7ad":"What about the distribution of `O2ml_L` values?","8239eccd":"There are a few points with high`NO2uM` and very low `O2ml_L`","f984af11":"There are some large values for `NO2M`. You can explore these by taking a closer look at `NO2uM` versus `O2ml_L`.","1d2f8af6":"<a id='intro'><\/a>\n## Introduction\n\nOxygen saturation is a measure of the amount of dissolved oxygen in water. It is important for the sustainability of many aquatic environments to support fish and other aerobic organisms. \n\nThe data in this notebook is taken from CalCOFI (California Cooperative Oceanic Fisheries Investigations). Various features, including oxygen saturation, have been recorded at a number of Pacific ocean sites between 1959 and 2019. \n\n<a id='import'><\/a>\n### Importing libraries and data","c2eb2411":"<a id='feature2'><\/a>\n### Feature engineering","664d5d1b":"<a id='eda4'><\/a>\n## Exploratory Data Analysis (4)\n\nContinue to explore the data, looking at other features using appropriate charts and measures.\n\nYou might like to consider grouping by `Zone`\n","65b55a10":"<a id='eda2'><\/a>\n## Exploratory Data Analysis (2)\nThe aim is to build a model for `O2ml_L`. You can explore all the possible numerical input features with a pairplot. ","e0deb9b9":"<a id='preprocessing2'><\/a>\n## Preprocessing and Preparing (2)\n\nStation `081.8 046.9` seems to be responsible for these unusual values. This is the same station that had some negative `O2ml_L` values. Ideally you would want to find out more about this station and whether there is a reason for these extreme values; however, in the absence of this further exploratory data analysis will be helpful."}}