{"cell_type":{"415051ef":"code","35b11919":"code","b15312eb":"code","9a7cf5f4":"code","66745df2":"code","e79c4c1d":"code","a7b32fc1":"code","fc40c3cd":"code","e1236b6a":"code","ee46b683":"code","ca6c3e59":"code","8d0014ca":"code","761e4a99":"code","e7e7a717":"code","6b46985f":"code","5feefca4":"code","fd0b0005":"code","80d7774c":"code","c77a1fa1":"code","16324783":"code","1ea0803e":"code","b77ee4e8":"code","d0119019":"code","1d58101d":"code","329d8270":"code","09ef8888":"code","65f58d0b":"code","a5c5376f":"code","e3056a76":"code","b4aff53e":"code","d708a61b":"code","63e0c2e5":"code","b3863655":"code","8882e02b":"code","5592a6a0":"code","e169a504":"code","db994f65":"code","5a2566e0":"code","4b38f659":"code","cc622be6":"code","30da150b":"code","80290c98":"code","70e22181":"code","1a6c3ef8":"code","dfad8051":"code","cdb458ab":"code","1c53a2f0":"code","b7fd9d98":"code","a58ce16c":"code","63395ea3":"code","34d1224c":"code","a08d5420":"markdown","45119912":"markdown","e6e2fa46":"markdown","9a9fbee8":"markdown","0bc83fde":"markdown","61cf0176":"markdown","4c349b3c":"markdown","2b01fd67":"markdown","2e3cc3d1":"markdown","0d270d58":"markdown","7a2990e4":"markdown","d8fe008a":"markdown","c893f0cc":"markdown","cb3a2f14":"markdown","ae03f27d":"markdown","97d2ace7":"markdown","3bd8c67f":"markdown","b761bd2a":"markdown","832f8975":"markdown","16865f5a":"markdown","ca97259c":"markdown","5d9913fd":"markdown","49bc652f":"markdown","064a2dec":"markdown","6b0e8ff2":"markdown","1f294edb":"markdown","acfe0fcc":"markdown","6e063390":"markdown","71a9b135":"markdown","d2f20b0b":"markdown","4c93c1bc":"markdown","cb245fe0":"markdown","5e01c109":"markdown","06677d1b":"markdown","4d4b894d":"markdown","7eb67cb9":"markdown","cfa0e0ed":"markdown","0a4127c8":"markdown","abe70613":"markdown","ed738d4b":"markdown","08023c47":"markdown","f2902a28":"markdown","d0342954":"markdown","28696851":"markdown","daa77102":"markdown","5ae926d6":"markdown","6df067ae":"markdown","3ff79c10":"markdown","1d1af03c":"markdown","cb8bc0ce":"markdown","a201fce1":"markdown"},"source":{"415051ef":"! pip install calmap","35b11919":"import pandas as pd\nimport numpy as np\nimport copy\n\n#Data Visualization libraries\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport folium\nimport calmap\nfrom plotly.subplots import make_subplots\nimport plotly.io as pio\npio.templates.default = \"plotly_dark\"\n\n#Some styling\nsns.set_style(\"whitegrid\")\nplt.style.use(\"fivethirtyeight\")\n\n#displaying markdown\nfrom IPython.display import Markdown\ndef bold(string):\n    display(Markdown(string))\n\n#Web scraping tools\n#REQUESTS --> to fetch data from website\nimport requests\nimport json\n\n#BEAUTIFULSOUP  -->parse HTML content \nfrom bs4 import BeautifulSoup  \n\n#Showing full path of datasets\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n        \n# Disable warnings \nimport warnings\nwarnings.filterwarnings('ignore')\n","b15312eb":"#India states co-ordinates\nindia_coord=pd.read_csv(\"\/kaggle\/input\/indian-coordinates\/Indian Coordinates.csv\")\n\n#India states population\npopulation=pd.read_csv(\"\/kaggle\/input\/covid19-in-india\/population_india_census2011.csv\")\n\n#hospital\nhospital_beds_india=pd.read_csv(\"\/kaggle\/input\/covid19-in-india\/HospitalBedsIndia.csv\")\nhospital_beds_gro = pd.read_csv(\"\/kaggle\/input\/hospital-beds-grouped\/hospital_beds_gro.csv\")\n\n#Age groups\nage_group=pd.read_csv(\"\/kaggle\/input\/covid19-in-india\/AgeGroupDetails.csv\")\n\n#ICMR testing labs\nICMRtestinglabs = pd.read_csv(\"\/kaggle\/input\/covid19-in-india\/ICMRTestingLabs.csv\")\nICMRstatetesting = pd.read_csv(\"\/kaggle\/input\/covid19-in-india\/StatewiseTestingDetails.csv\")","9a7cf5f4":"'''\nStatewise Total Of cases\n'''\nimport requests\n\nurl='https:\/\/api.rootnet.in\/covid19-in\/unofficial\/covid19india.org\/statewise'\njson_data=requests.get(url).json()\n\n'''\nNormalizing the dataset\n'''\ndataset = pd.io.json.json_normalize(json_data,record_path=[['data','statewise']])\n\n#No need of creating separate dataset\ndataset=dataset.rename(columns={'state':'State',\n                               'confirmed':'Confirmed','recovered':'Recovered',\n                               'deaths':'Deaths','active':'Active'})\n#making a copy\nimport copy\nindia_total=dataset.copy()\n\n'''\nData cleaning\n'''\nindia_total['State']=india_total[\"State\"].replace(\"Chhattisgarh\",'Chattisgarh')\nindia_total['State']=india_total[\"State\"].replace('Puducherry','Pondicherry')\nindia_total['State']=india_total[\"State\"].replace('Telangana','Telengana')\n\nindia_total['Death Rate(per 100)']=round((india_total['Deaths']\/india_total['Confirmed'])*100,2)\nindia_total['Recovery Rate(per 100)']=round((india_total['Recovered']\/india_total['Confirmed'])*100,2)\n\n#Final\nindia_total.style.background_gradient(cmap='YlOrBr',subset=[\"Confirmed\"])\\\n                        .background_gradient(cmap='Reds',subset=[\"Deaths\"])\\\n                        .background_gradient(cmap='Greens',subset=[\"Recovered\"])\\\n                        .background_gradient(cmap='Blues',subset=[\"Active\"])\\\n                        .background_gradient(cmap='Oranges',subset=['Death Rate(per 100)'])\\\n                        .background_gradient(cmap='Greys',subset=['Recovery Rate(per 100)'])","66745df2":"'''\nCovid19 Cases history\n'''\nimport requests\n\nurl='https:\/\/api.rootnet.in\/covid19-in\/stats\/history'\njson_data=requests.get(url).json()\n\n'''\nNormalizing the dataset\n'''\ndataset = pd.io.json.json_normalize(json_data,record_path=[['data']])\ndataset\n\n'''\nExtracting statewise data from test\n'''\n\nout_lst=[]\nfor i in range(0,len(dataset)):\n    date = dataset.iloc[i]['day']\n    ls = dataset.iloc[i]['regional']\n    for ele in ls: #list of thw row\n        ele.update({'date':date})\n        inn_list=[]\n        inn_list.append(ele.values())\n        for i in ele: #i is each element in that row\n            if i=='date':\n                inn_list.insert(0,ele[i])\n            elif i=='loc':\n                inn_list.insert(1,ele[i])\n            elif i=='confirmedCasesIndian':\n                inn_list.insert(2,ele[i])\n            elif i=='confirmedCasesForeign':\n                inn_list.insert(3,ele[i])\n            elif i=='discharged':\n                inn_list.insert(4,ele[i])\n            elif i=='deaths':\n                inn_list.insert(5,ele[i])\n            elif i=='totalConfirmed':\n                inn_list.insert(6,ele[i])\n        del inn_list[1]\n        out_lst.append(inn_list)\n        \n'''\nCreating new dataframe\n'''\ndf=pd.DataFrame(out_lst,columns=['Date','State','Indian Cases','Foreign Cases','Recovered','Deaths','Confirmed'])\n\n'''\nChanging date to datetime format\n'''\ndf['Date']=df['Date'].apply(pd.to_datetime,dayfirst=True)\n\n#Final\n#Making a copy\nindia=df.copy()\n\n#Adding Active cases column\nindia['Active']=india[\"Confirmed\"]-india['Recovered']-india['Deaths']\n\nindia['Death Rate(per 100)']=round(100*india['Deaths']\/india['Confirmed'],2)\nindia['Recovery Rate(per 100)']=round(100*india['Recovered']\/india['Confirmed'],2)\nindia['Death Rate(per 100)']=india['Death Rate(per 100)'].fillna(0)\nindia['Recovery Rate(per 100)']=india['Recovery Rate(per 100)'].fillna(0)\n\n#there are two similar states Chattisgarh and Chhattisgarh, we'll rename it\nindia['State']=india[\"State\"].replace(\"Chhattisgarh\",'Chattisgarh')\nindia['State']=india[\"State\"].replace('Puducherry','Pondicherry')\n\nindia.head()\n","e79c4c1d":"'''\nStats testing history\n'''\nimport requests\n\nurl='https:\/\/api.rootnet.in\/covid19-in\/stats\/testing\/history'\njson_data=requests.get(url).json()\n#Normalize\ntest_data = pd.io.json.json_normalize(json_data['data'])\n\ntest_data.drop(columns=['source','totalIndividualsTested'],inplace=True)\n#We had to drop the totalIndividualsTested feature as there are many nan values\ntest_data=test_data.rename(columns={\"day\":\"Date\"})\ntest_data['Date']=test_data['Date'].apply(pd.to_datetime , dayfirst = True)\n\ntest_data=test_data.fillna(0)\n\ndisplay(test_data)","a7b32fc1":"#india_coord\nindia_coord=india_coord.rename(columns={\"Name of State \/ UT\":\"State\",\n                                       \"Latitude\":\"Lat\",\"Longitude\":\"Long\"})\n#Population dataset\npopulation=population.drop(columns=[\"Sno\"])\npopulation.rename(columns = {\"State \/ Union Territory\": \"State\"}, inplace = True)\npopulation['Area']=population['Area'].str.replace(',','').str.split(\"km\").str[0].astype(int)\npopulation['Density']=population['Density'].str.replace(',','').str.split(\"\/\").str[0].astype(float)\npopulation['State']=population['State'].replace({'Chhattisgarh':'Chattisgarh',\n                                                 'Puducherry':'Pondicherry'})\n\n","fc40c3cd":"#Merge both the datasets india and india_coord\n\nindia=pd.merge(india,india_coord,on=['State'],how='inner')\nindia=pd.merge(india,population,on=['State'],how='inner')","e1236b6a":"'''\nInfection Rate(per million) per million\n'''\nindia['Infection Rate(per million)'] = india['Confirmed']\/india['Population']\nindia['Infection Rate(per million)'] = round(india['Infection Rate(per million)']*1000000,2)","ee46b683":"'''\nData Cleaning\n'''\n#Drop\nhospital_beds_india=hospital_beds_india[['State\/UT','NumPublicBeds_HMIS',\n                                        'NumUrbanBeds_NHP18']]\n\n#Change column names\nhospital_beds_india=hospital_beds_india.rename(columns={\"State\/UT\":\"State\"})\n\n#Changing names\nhospital_beds_india['State']=hospital_beds_india['State'].replace('Andaman & Nicobar Islands','Andaman and Nicobar Islands')\nhospital_beds_india['State']=hospital_beds_india['State'].replace('Chhattisgarh','Chattisgarh')\nhospital_beds_india['State']=hospital_beds_india['State'].replace('Jammu & Kashmir','Jammu and Kashmir')\nhospital_beds_india['State']=hospital_beds_india['State'].replace('Puducherry','Pondicherry')\nhospital_beds_india['State']=hospital_beds_india['State'].replace('Telangana','Telengana')\n\n#Missing values\n#hospital_beds_india['NumSubDistrictHospitals_HMIS']=hospital_beds_india['NumSubDistrictHospitals_HMIS'].fillna(0)\n\n#By hospital_beds.info() ,  we see that there are few objects\n#The problem arises in pd.to_numeric for All India row\n\nAll_India=hospital_beds_india[hospital_beds_india['State']=='All India']\nhospital_beds_india=hospital_beds_india[hospital_beds_india['State']!='All India']\n\n'''\nChanging objects to numeric\n'''\nfor col in hospital_beds_india.columns:\n    if col!='State':\n        if hospital_beds_india[col].dtype=='O':\n            hospital_beds_india[col]=pd.to_numeric(hospital_beds_india[col])\n\n#Drop NAN\nhospital_beds_india=hospital_beds_india.dropna()\n\n#Reset index\nhospital_beds_india=hospital_beds_india.reset_index(drop=True)\n\n#Converting integer values back to float\n\nfor col in hospital_beds_india.columns:\n    if col!='State':\n        if hospital_beds_india[col].dtype=='int64':\n            hospital_beds_india[col]=hospital_beds_india[col].astype(float)\n\n#hospital grouped data\nhospital_beds_gro.drop(columns=['Unnamed: 0'],axis=1,inplace=True)","ca6c3e59":"'''\nMerging how='left'\n''' \nhospital_beds_india = pd.merge(hospital_beds_india,hospital_beds_gro,on=['State'],how='left')\nhospital_beds_india = hospital_beds_india.fillna(0)","8d0014ca":"#Now our hospital dataset is ready\n#We are ready to merge\n\nindia=pd.merge(india,hospital_beds_india,on=['State'],how='inner')","761e4a99":"india_total['Confirmed'].sum()","e7e7a717":"india_total['Deaths'].sum()","6b46985f":"india_total['Recovered'].sum()","5feefca4":"india_total['Active'].sum()","fd0b0005":"india_latest=india[india['Date'] == max(india['Date'])]\n\n#Creating Empty Map\nm=folium.Map(location=[20.5937, 78.9629], zoom_start=14,max_zoom=4,min_zoom=3,tiles=\"Stamen Toner\",\n            height = 600,width = '70%')\n\n#Fill the latest data in the map\n\nfor i in range(0,len(india_latest)):\n    folium.Circle(location=[india_latest.iloc[i][\"Lat\"],india_latest.iloc[i][\"Long\"]],\n                 color=\"crimson\",\n                  radius=int(india_latest.iloc[i][\"Confirmed\"]*50),\n                  tooltip='<li><bold>State : '+str(india_latest.iloc[i][\"State\"])+\n                          '<li><bold>Confirmed : '+str(india_latest.iloc[i][\"Confirmed\"])+\n                          '<li><bold>Deaths : '+str(india_latest.iloc[i][\"Deaths\"]),\n                  fill=True\n                 ).add_to(m)\n    \nm","80d7774c":"'''\nSpread of coronavirus over time\n'''\nindia_grouped = india.groupby(['Date'])['Confirmed','Deaths','Recovered',\n                                        'Active'].sum().reset_index()\nindia_grouped['Date']=india_grouped['Date'].dt.strftime(\"%m\/%d\/%Y\")\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Confirmed'],\n                    mode='lines+markers',marker_color='purple',name='Confirmed'))\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Recovered'],\n                    mode='lines+markers',marker_color='green',name='Recovered'))\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Deaths'],\n                    mode='lines+markers',marker_color='red',name='Deaths'))\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Active'],\n                    mode='lines+markers',marker_color='blue',name='Active'))\nfig.update_layout(title_text='Trend of cases in india over time')\nfig.show()","c77a1fa1":"india_grouped = india.groupby(['Date'])[['Death Rate(per 100)','Recovery Rate(per 100)',\n                                         'Infection Rate(per million)']].sum().reset_index()\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Death Rate(per 100)'],\n                    mode='lines+markers',marker_color='red',name='Death Rate(per 100)'))\nfig.update_layout(title_text='Death rate in india over time',height=400,width=800)\nfig.show()\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Recovery Rate(per 100)'],\n                    mode='lines+markers',marker_color='green',name='Recovery Rate(per 100)'))\nfig.update_layout(title_text='Recovery rate in india over time',height=400,width=800)\nfig.show()\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Infection Rate(per million)'],\n                    mode='lines+markers',marker_color='purple',name='Infection Rate(per million)'))\nfig.update_layout(title_text='Infection rate in india over time',height=400,width=800)\nfig.show()","16324783":"india_grouped = india.groupby(['Date'])['Confirmed','Deaths','Recovered',\n                                        'Active','Infection Rate(per million)',\n                                       'Recovery Rate(per 100)','Death Rate(per 100)'].sum().reset_index()\nindia_grouped['Date']=india_grouped['Date'].dt.strftime(\"%m\/%d\/%Y\")\n\nfig = go.Figure()\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Recovery Rate(per 100)'],\n                    mode='lines+markers',marker_color='green',name='Recovery Rate(per 100)'))\nfig.add_trace(go.Scatter(x=india_grouped['Date'], y=india_grouped['Death Rate(per 100)'],\n                    mode='lines+markers',marker_color='orange',name='Death Rate(per 100)'))\n\nfig.update_layout(title_text='Rate of cases in india over time')\nfig.show()","1ea0803e":"india_grouped=india.groupby('State')[['Recovery Rate(per 100)','Death Rate(per 100)']].max().reset_index()\n#Recovery Rate(per 100)\nfig = px.bar(india_grouped.sort_values(by='Recovery Rate(per 100)'),x='Recovery Rate(per 100)',\n            y='State',color='Recovery Rate(per 100)',orientation='h',height=800,text='Recovery Rate(per 100)',\n            title = 'Recovery Rate(per 100)')\nfig.update_traces(textposition='outside')\nfig.show()\n#Death Rate(per 100)\nfig = px.bar(india_grouped.sort_values(by='Death Rate(per 100)'),x='Death Rate(per 100)',\n            y='State',color='Death Rate(per 100)',orientation='h',height=800,text='Death Rate(per 100)',\n            title = 'Death Rate(per 100)')\nfig.update_traces(textposition='outside')\nfig.show()","b77ee4e8":"india_grouped=india.groupby(['State'])[['Confirmed','Recovered','Deaths','Active',\n                                        'Infection Rate(per million)','Death Rate(per 100)',\n                                       'Recovery Rate(per 100)']].max().reset_index()\n","d0119019":"import IPython\nIPython.display.HTML('<div class=\"flourish-embed flourish-bar-chart-race\" data-src=\"visualisation\/1977187\" data-url=\"https:\/\/flo.uri.sh\/visualisation\/1977187\/embed\"><script src=\"https:\/\/public.flourish.studio\/resources\/embed.js\"><\/script><\/div>')","1d58101d":"import plotly.express as px\n#Confirmed\nfig=px.bar(india_grouped.sort_values(by='Confirmed'),x='Confirmed',y='State',\n          text='Confirmed',orientation='h',\n          height=800,title='Confirmed cases',color='Confirmed')\nfig.update_traces(textposition='outside')\nfig.show()\n#Deaths\nfig=px.bar(india_grouped.sort_values(by='Deaths'),x='Deaths',y='State',\n          color = 'Deaths',text='Deaths',orientation='h',\n          height=800,title='Deaths')\nfig.update_traces(textposition='outside')\nfig.show()\n#Recovered cases\nfig=px.bar(india_grouped.sort_values(by='Recovered'),x='Recovered',y='State',\n          color = 'Recovered',text='Recovered',orientation='h',\n          height=800,title='Recovered cases')\nfig.update_traces(textposition='outside')\nfig.show()\n#Most Active cases\nfig=px.bar(india_grouped.sort_values(by='Active'),x='Active',y='State',\n          color='Active',text='Active',orientation='h',\n          height=800,title='Active cases')\nfig.update_traces(textposition='outside')\nfig.show()","329d8270":"temp=india_grouped.sort_values(by='Confirmed')\nfig = go.Figure(data=[\ngo.Bar(name='Active', y=temp['State'], x=temp['Active'], \n       orientation='h',marker_color='blue'),\ngo.Bar(name='Recovered', y=temp['State'], x=temp['Recovered'], \n       orientation='h',marker_color='green'),\ngo.Bar(name='Deaths', y=temp['State'], x=temp['Deaths'], \n       orientation='h',marker_color='red')])\nfig.update_layout(barmode='stack',width=1000, height=800)\n\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\n\nfig.update_layout(title_text='Active Cases,Recovered,Deaths in Different States of India',\n                  plot_bgcolor='rgb(275, 270, 273)')\nfig.show()","09ef8888":"date_grouped = india.groupby(['Date','State'])['Confirmed','Deaths','Recovered','Active','Infection Rate(per million)'].sum().reset_index()\ndate_grouped['Date']=date_grouped['Date'].dt.strftime(\"%m\/%d\/%Y\")\n\nfig = px.line(date_grouped,x='Date',y='Confirmed',title='Confirmed cases over time',color='State')\nfig.show()\nfig = px.line(date_grouped,x='Date',y='Deaths',title='Fatality cases over time',color='State')\nfig.show()\nfig = px.line(date_grouped,x='Date',y='Recovered',title='Recovered cases over time',color='State')\nfig.show()\nfig = px.line(date_grouped,x='Date',y='Infection Rate(per million)',title='Infection rate over time',color='State')\nfig.show()","65f58d0b":"india_daily=india[['Date','State','Confirmed','Recovered','Deaths','Active']]\nindia_daily=india_daily.groupby(['Date'])[['Confirmed','Recovered','Deaths','Active']].sum().reset_index()\n\nindia_daily['Daily Confirmed']=india_daily['Confirmed'].sub(india_daily['Confirmed'].shift())\nindia_daily['Daily Confirmed'].iloc[0]=india_daily['Confirmed'].iloc[0]\nindia_daily['Daily Confirmed'] = india_daily['Daily Confirmed'].astype(int)\n\nindia_daily['Daily Recovered']=india_daily['Recovered'].sub(india_daily['Recovered'].shift())\nindia_daily['Daily Recovered'].iloc[0]=india_daily['Recovered'].iloc[0]\nindia_daily['Daily Recovered'] = india_daily['Daily Recovered'].astype(int)\n\nindia_daily['Daily Deceased']=india_daily['Deaths'].sub(india_daily['Deaths'].shift())\nindia_daily['Daily Deceased'].iloc[0]=india_daily['Deaths'].iloc[0]\nindia_daily['Daily Deceased'] = india_daily['Daily Deceased'].astype(int)\n\nindia_daily['Daily Active']=india_daily['Active'].sub(india_daily['Active'].shift())\nindia_daily['Daily Active'].iloc[0]=india_daily['Active'].iloc[0]\nindia_daily['Daily Active'] = india_daily['Daily Active'].astype(int)\n","a5c5376f":"fig = px.bar(india_daily, y='Daily Confirmed', x='Date',hover_data =['Daily Confirmed'], color='Daily Confirmed', height=500)\nfig.update_layout(\n    title='Daily Confirmed Cases in India Datewise')\nfig.show()\n\nfig = px.bar(india_daily, y='Daily Recovered', x='Date',hover_data =['Daily Recovered'], color='Daily Recovered', height=500)\nfig.update_layout(\n    title='Daily Recovered Cases in India Datewise')\nfig.show()\n\nfig = px.bar(india_daily, y='Daily Deceased', x='Date',hover_data =['Daily Deceased'], color='Daily Deceased', height=500)\nfig.update_layout(\n    title='Daily Deceased Cases in India Datewise')\nfig.show()\n\nfig = px.bar(india_daily, y='Daily Active', x='Date',hover_data =['Daily Active'], color='Daily Active', height=500)\nfig.update_layout(\n    title='Daily Active Cases in India Datewise')\nfig.show()","e3056a76":"#Bar Chart\nfig = go.Figure()\nfig.add_trace(go.Bar(x=india_daily['Date'],y=india_daily['Daily Confirmed'],\n                        marker_color='blue',name='Daily Confirmed'))\nfig.add_trace(go.Bar(x=india_daily['Date'],y=india_daily['Daily Deceased'],\n                        marker_color='red',name='Daily Deceased'))\nfig.add_trace(go.Bar(x=india_daily['Date'],y=india_daily['Daily Recovered'],\n                        marker_color='green',name='Daily Recovered'))\nfig.add_trace(go.Bar(x=india_daily['Date'],y=india_daily['Daily Active'],\n                        marker_color='orange',name='Daily Active'))\n\nfig.update_layout(title_text = 'Covid19 INDIA Daily Trend Bar chart')\nfig.show()","b4aff53e":"fig = make_subplots(rows=2,cols=1,specs=[[{\"type\":\"pie\"}],[{\"type\":\"bar\"}]],\n                   subplot_titles=('Pie chart',\"Bar Chart\"))\n\n#Add traces\nfig.add_trace(go.Pie(labels=age_group['AgeGroup'],values=age_group['TotalCases'],hole=0.3),row=1,col=1)\n\nfig.add_trace(go.Bar(x=age_group['AgeGroup'],y=age_group['TotalCases']),row=2,col=1)\n\nfig.update_xaxes(title_text=\"Age Group\", row=2, col=1)\nfig.update_yaxes(title_text=\"Total Cases\", row=1, col=1)\n\n# Update title and height\nfig.update_layout(title_text=\"Age Group Visualizations\", height=700)","d708a61b":"temp=ICMRstatetesting.groupby(['State'])[['TotalSamples','Negative','Positive']].max().reset_index()\n#Total Samples\nfig=px.bar(temp.sort_values(by='TotalSamples'),x='TotalSamples',y='State',\n          text='TotalSamples',orientation='h',\n          height=500,title='States with highest number of samples tested',color='TotalSamples')\nfig.update_traces(textposition='outside')\nfig.show()\n#Negative\nfig=px.bar(temp.sort_values(by='Negative'),x='Negative',y='State',\n          text='Negative',orientation='h',\n          height=500,title='States with highest number of negative sample results',color='Negative')\nfig.update_traces(textposition='outside')\nfig.show()\n#Recovered cases\nfig=px.bar(temp.sort_values(by='Positive'),x='Positive',y='State',\n          text='Positive',orientation='h',\n          height=500,title='States with highest number of positive sample results',color='Positive')\nfig.update_traces(textposition='outside')\nfig.show()","63e0c2e5":"#Total no of samples tested in each state\n\ntemp=ICMRstatetesting.groupby(['State'])[['TotalSamples','Negative','Positive']].max().reset_index()\n\ntemp=temp.sort_values(by='TotalSamples')\nfig = go.Figure(data=[\ngo.Bar(name='TotalSamples', y=temp['State'], x=temp['TotalSamples'], \n       orientation='h',marker_color='blue'),\ngo.Bar(name='Negative', y=temp['State'], x=temp['Negative'], \n       orientation='h',marker_color='green'),\ngo.Bar(name='Positive', y=temp['State'], x=temp['Positive'], \n       orientation='h',marker_color='red')])\nfig.update_layout(barmode='stack',width=1000, height=800)\n\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\n\nfig.update_layout(title_text='Total samples tested vs Positive and Negative',\n                  plot_bgcolor='rgb(275, 270, 273)')\nfig.show()","b3863655":"ICMRtestinglabs.head()","8882e02b":"temp = ICMRtestinglabs.groupby(['state'])[['lab']].count().reset_index()\n\nfig=px.bar(temp.sort_values(by='lab'),x='lab',y='state',\n          color='lab',orientation='h',height=800,text='lab',\n            title = 'No of labs in each state')\nfig.update_traces(textposition='outside')\nfig.show()","5592a6a0":"#Let's look at the most populated states and how they are affected.\n#Is population really a factor in the spread of the virus\n\ntemp = india.groupby(['State'])[['Population','Rural population','Urban population','Confirmed','Recovered',\n                                'Deaths','Active']].max().reset_index()\n\ntemp.head()","e169a504":"#Subplots\n#Population vs Confirmed\nfig_c = px.scatter(temp,x='Population',y='Confirmed',color='Confirmed',size='Population',log_x =True,\n                   hover_data=['State'])\n#Population vs Recovered\nfig_r = px.scatter(temp,x='Population',y='Recovered',color='Recovered',size='Population',log_x =True,\n                  hover_data=['State'])\n#Population vs Deaths\nfig_d = px.scatter(temp,x='Population',y='Deaths',color='Deaths',size='Population',log_x =True,\n                  hover_data=['State'])\n#Population vs Active\nfig_a = px.scatter(temp,x='Population',y='Active',color='Active',size='Population',log_x =True,\n                  hover_data=['State'])\n\nfig = make_subplots(rows=2,cols=2,horizontal_spacing=0.14, vertical_spacing=0.08,\n                   subplot_titles=('Pop vs Confirmed','Pop vs Recovered','Pop vs Deaths','Pop vs Active'))\n\nfig.add_trace(fig_c['data'][0],row=1,col=1)\nfig.add_trace(fig_r['data'][0],row=1,col=2)\nfig.add_trace(fig_d['data'][0],row=2,col=1)\nfig.add_trace(fig_a['data'][0],row=2,col=2)\n\n# Update yaxis properties\nfig.update_yaxes(title_text=\"Confirmed\",row=1,col=1)\nfig.update_yaxes(title_text=\"Recovered\",row=1,col=2)\nfig.update_yaxes(title_text=\"Deaths\",row=2,col=1)\nfig.update_yaxes(title_text=\"Active\",row=2,col=2)\n\n# Update xaxis properties\nfig.update_xaxes(title_text=\"Population\",row=1,col=1)\nfig.update_xaxes(title_text=\"Population\",row=1,col=2)\nfig.update_xaxes(title_text=\"Population\",row=2,col=1)\nfig.update_xaxes(title_text=\"Population\",row=2,col=2)\n\nfig.update_layout(height=1200)","db994f65":"#Create a bar plot of states with highest urban\/rural population and visualize the number of cases\ntemp.head()","5a2566e0":"temp = temp.sort_values(by=['Urban population'])\n\nfig = go.Figure(data=[go.Bar(name='Confirmed',x=temp['Confirmed'],y=temp['State'],orientation='h'),\n                     go.Bar(name='Deaths',x=temp['Deaths'],y=temp['State'],orientation='h')])\nfig.update_layout(barmode='group',title_text='States with highest urban pop vs Cases',height=900)\nfig.show()\n\ntemp = temp.sort_values(by=['Rural population'])\n\nfig = go.Figure(data=[go.Bar(name='Confirmed',x=temp['Confirmed'],y=temp['State'],orientation='h'),\n                     go.Bar(name='Deaths',x=temp['Deaths'],y=temp['State'],orientation='h')])\nfig.update_layout(barmode='group',title_text='States with highest rural pop vs Cases',height=900)\nfig.show()","4b38f659":"temp = india.groupby(['State'],as_index=False)[['Area','Confirmed','Deaths','Recovered','Active']].max().reset_index(drop=True)\n\n#Subplots\n#Area vs Confirmed\nfig_c = px.scatter(temp,x='Area',y='Confirmed',color='Confirmed',size='Area',log_x =True,\n                   hover_data=['State','Area','Confirmed'])\n#Area vs Recovered\nfig_r = px.scatter(temp,x='Area',y='Recovered',color='Recovered',size='Area',log_x =True,\n                  hover_data=['State','Area','Recovered'])\n#Area vs Deaths\nfig_d = px.scatter(temp,x='Area',y='Deaths',color='Deaths',size='Area',log_x =True,\n                  hover_data=['State','Area','Deaths'])\n#Area vs Active\nfig_a = px.scatter(temp,x='Area',y='Active',color='Active',size='Area',log_x =True,\n                  hover_data=['State','Area','Active'])\n\nfig = make_subplots(rows=2,cols=2,horizontal_spacing=0.14, vertical_spacing=0.08,\n                   subplot_titles=('Area vs Confirmed','Area vs Recovered','Area vs Deaths','Area vs Active'))\n\nfig.add_trace(fig_c['data'][0],row=1,col=1)\nfig.add_trace(fig_r['data'][0],row=1,col=2)\nfig.add_trace(fig_d['data'][0],row=2,col=1)\nfig.add_trace(fig_a['data'][0],row=2,col=2)\n\n# Update yaxis properties\nfig.update_yaxes(title_text=\"Confirmed\",row=1,col=1)\nfig.update_yaxes(title_text=\"Recovered\",row=1,col=2)\nfig.update_yaxes(title_text=\"Deaths\",row=2,col=1)\nfig.update_yaxes(title_text=\"Active\",row=2,col=2)\n\n# Update xaxis properties\nfig.update_xaxes(title_text=\"Area\",row=1,col=1)\nfig.update_xaxes(title_text=\"Area\",row=1,col=2)\nfig.update_xaxes(title_text=\"Area\",row=2,col=1)\nfig.update_xaxes(title_text=\"Area\",row=2,col=2)\n\nfig.update_layout(height=1200)\n","cc622be6":"temp = india.groupby(['State'],as_index=False)[['Density','Confirmed','Deaths','Recovered','Active']].max().reset_index(drop=True)\n\n#Subplots\n#Density vs Confirmed\nfig_c = px.scatter(temp,x='Density',y='Confirmed',color='Confirmed',size='Density',log_x =True,\n                   hover_data=['State','Density','Confirmed'])\n#Density vs Recovered\nfig_r = px.scatter(temp,x='Density',y='Recovered',color='Recovered',size='Density',log_x =True,\n                  hover_data=['State','Density','Recovered'])\n#Density vs Deaths\nfig_d = px.scatter(temp,x='Density',y='Deaths',color='Deaths',size='Density',log_x =True,\n                  hover_data=['State','Density','Deaths'])\n#Density vs Active\nfig_a = px.scatter(temp,x='Density',y='Active',color='Active',size='Density',log_x =True,\n                  hover_data=['State','Density','Active'])\n\nfig = make_subplots(rows=2,cols=2,horizontal_spacing=0.14, vertical_spacing=0.08,\n                   subplot_titles=('Density vs Confirmed','Density vs Recovered','Density vs Deaths','Density vs Active'))\n\nfig.add_trace(fig_c['data'][0],row=1,col=1)\nfig.add_trace(fig_r['data'][0],row=1,col=2)\nfig.add_trace(fig_d['data'][0],row=2,col=1)\nfig.add_trace(fig_a['data'][0],row=2,col=2)\n\n# Update yaxis properties\nfig.update_yaxes(title_text=\"Confirmed\",row=1,col=1)\nfig.update_yaxes(title_text=\"Recovered\",row=1,col=2)\nfig.update_yaxes(title_text=\"Deaths\",row=2,col=1)\nfig.update_yaxes(title_text=\"Active\",row=2,col=2)\n\n# Update xaxis properties\nfig.update_xaxes(title_text=\"Density\",row=1,col=1)\nfig.update_xaxes(title_text=\"Density\",row=1,col=2)\nfig.update_xaxes(title_text=\"Density\",row=2,col=1)\nfig.update_xaxes(title_text=\"Density\",row=2,col=2)\n\nfig.update_layout(height=1200)","30da150b":"temp = india.groupby(['State'])[['AdmissionCapacity','HospitalBeds','Confirmed',\n                         'Recovered','Deaths']].max().reset_index()\n#Which state has highest number of hospital beds to treat patients\nfig = px.bar(temp.sort_values(by='HospitalBeds'),x='HospitalBeds',\n            y='State',color='HospitalBeds',orientation='h',height=900,\n             hover_data=['State','Confirmed','Recovered','Deaths'],\n            title = 'HospitalBeds')\nfig.show()\n#Admission Capacity\nfig = px.bar(temp.sort_values(by='AdmissionCapacity'),x='AdmissionCapacity',\n            y='State',color='AdmissionCapacity',orientation='h',height=900,\n             hover_data=['State','Confirmed','Recovered','Deaths'],\n            title = 'AdmissionCapacity')\nfig.show()","80290c98":"URL = 'https:\/\/www.ndtv.com\/india-news\/coronavirus-full-list-of-red-orange-green-districts-in-india-2221473'\npage = requests.get(URL)\nsoup = BeautifulSoup(page.content,\"html.parser\")\n\n'''\nParsing through HTML to extract the table\n'''\n\nid_statewise = soup.find(\"table\",{\"id\":\"stateWise\"})\nid_statewise\n\ntbody = id_statewise.find(\"tbody\") \n\n#Fetching each row\n\ntable_rows = tbody.find_all(\"tr\")\n\nls = []\nfor tr in table_rows:\n    data_list = tr.find_all(\"td\")\n    row = [data.text for data in data_list]\n    ls.append(row)\n    \n#Creating a data frame\nindia_zones = pd.DataFrame(data = ls,columns = [\"State\",\"Red\",\"Orange\",\"Green\",\"Total\"])\n\nfor col in india_zones.columns:\n    if col != 'State':\n        india_zones[col] = pd.to_numeric(india_zones[col])","70e22181":"india_zones.head()","1a6c3ef8":"#Zones distribution in each state\nfig=px.bar(india_zones.sort_values(by='Red'),x='Red',y='State',\n          text='Red',orientation='h',color_discrete_sequence=['red'],\n          height=800,title='States with number of red zones')\nfig.update_traces(textposition='outside')\nfig.show()\n#Negative\nfig=px.bar(india_zones.sort_values(by='Orange'),x='Orange',y='State',\n          text='Orange',orientation='h',\n          height=800,title='States with number of orange zones',color_discrete_sequence=['orange'])\nfig.update_traces(textposition='outside')\nfig.show()\n#Recovered cases\nfig=px.bar(india_zones.sort_values(by='Green'),x='Green',y='State',\n          text='Green',orientation='h',\n          height=800,title='States with number of green zones',color_discrete_sequence=['green'])\nfig.update_traces(textposition='outside')\nfig.show()","dfad8051":"#Zones distribution in India\n\nindia_zones = india_zones[0:-1]\n\nfig = go.Figure(data=[\ngo.Bar(name='Red Zone', y=india_zones['State'], x=india_zones['Red'], \n       orientation='h',marker_color='red'),\ngo.Bar(name='Orange Zone', y=india_zones['State'], x=india_zones['Orange'], \n       orientation='h',marker_color='orange'),\ngo.Bar(name='Green Zone', y=india_zones['State'], x=india_zones['Green'], \n       orientation='h',marker_color='green')])\nfig.update_layout(barmode='stack',width=1000, height=800)\n\nfig.update_layout(uniformtext_minsize=8, uniformtext_mode='hide')\n\nfig.update_layout(title_text='Zones distribution in India',\n                  plot_bgcolor='rgb(275, 270, 273)')\nfig.show()","cdb458ab":"URL = 'https:\/\/www.ndtv.com\/india-news\/coronavirus-full-list-of-red-orange-green-districts-in-india-2221473'\npage = requests.get(URL)\nsoup = BeautifulSoup(page.content,\"html.parser\")\n\n'''\nParsing through HTML to extract the table\n'''\n\nid_districtwise = soup.find(\"table\",{\"id\":\"distWise\"})\nid_districtwise\n\ntbody = id_districtwise.find(\"tbody\")\n\n#Fetching each row\n\ntable_rows = tbody.find_all(\"tr\")\n\nls=[]\n\nfor tr in table_rows:\n    data_list = tr.find_all(\"td\")\n    row = [data.text for data in data_list]\n    ls.append(row)\n    \nindia_dist_zones = pd.DataFrame(data=ls,columns = [\"Sr.No\",\"District\" , \"State\" , \"Classification\"])","1c53a2f0":"india_dist_zones.head()","b7fd9d98":"#India district coordinates\ndist_coor = pd.read_csv(\"\/kaggle\/input\/indian-census-data-with-geospatial-indexing\/district wise centroids.csv\")","a58ce16c":"dist_coor","63395ea3":"india_dist_zones = india_dist_zones[['District','State','Classification']]\ndist_coor = dist_coor[['District','Latitude','Longitude']]\nzones_merged = pd.merge(india_dist_zones,dist_coor,on=['District'],how='inner')","34d1224c":"#px.set_mapbox_access_token(secret_value_1)\nfig = px.scatter_mapbox(zones_merged,\n                        lat=\"Latitude\",\n                        lon=\"Longitude\",\n                        color='Classification',\n                        color_discrete_sequence=['red','orange','green'],\n                        mapbox_style='open-street-map',\n                        hover_name='District',\n                        center={\"lat\": 20.5937, \"lon\": 78.9629},\n                        zoom=3.5,\n                        hover_data=['State','District'],\n                        title= 'Zones Distribution in India')\nfig.update_geos(fitbounds=\"locations\", visible=True)\nfig.update_geos(projection_type=\"orthographic\")\nfig.update_layout(template='plotly_dark',margin=dict(l=20,r=20,t=40,b=20))\nfig.show()","a08d5420":"**Total Recovered Cases**","45119912":"## Overview","e6e2fa46":"**Coronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.**\n\n**Most people infected with the COVID-19 virus will experience mild to moderate respiratory illness and recover without requiring special treatment.  Older people, and those with underlying medical problems like cardiovascular disease, diabetes, chronic respiratory disease, and cancer are more likely to develop serious illness.**\n\n**The best way to prevent and slow down transmission is be well informed about the COVID-19 virus, the disease it causes and how it spreads. Protect yourself and others from infection by washing your hands or using an alcohol based rub frequently and not touching your face.** \n\n**The COVID-19 virus spreads primarily through droplets of saliva or discharge from the nose when an infected person coughs or sneezes, so it\u2019s important that you also practice respiratory etiquette (for example, by coughing into a flexed elbow).**\n\n**At this time, there are no specific vaccines or treatments for COVID-19. However, there are many ongoing clinical trials evaluating potential treatments. WHO will continue to provide updated information as soon as clinical findings become available.**","9a9fbee8":"### IMPORT LIBRARIES","0bc83fde":"#### Statewise testing Labs","61cf0176":"### Daily Cases","4c349b3c":"### India district wise zones distribution","2b01fd67":"**Infection rate vs Death rate vs Recovery rate**","2e3cc3d1":"**How many labs are there in each state which are approved by ICMR**","0d270d58":"**Total Confirmed Cases**","7a2990e4":"#### The important part to notice here is that the number of recovered cases are increasing day by day which is a good sign.\n","d8fe008a":"The government on 1st May announced a two-week extension of the nationwide lockdown to stop the spread of the coronavirus. \n\nAnnounced on March 25, the lockdown will now go on till at least May 18. However, it announced several relaxations especially for districts which have been categorised as Green or Orange zones, indicating no or low number of COVID-19 cases.\n\nOn Friday, the government said the number of coronavirus or COVID-19 \"Red Zones\", across India have dropped by around 23 per cent in 15 days, from 170 on April 15 to 130 on April 30. However, all four major metro cities - Delhi, Kolkata, Chennai and Mumbai - have been classified as Red Zones.\n\nIn the same period, the number of \"green zones\", or districts reporting no new coronavirus cases in the last 21 days, also dropped from 356 to 319, while the number of \"orange zones\" increased - from 207 to 284, according to the Union Health Ministry.","c893f0cc":"##### Stay Home , Stay Safe India","cb3a2f14":"**Total Active Cases**","ae03f27d":"#### Unfortunately we don't have Maharashtra state's data","97d2ace7":"#### Hospitals","3bd8c67f":"#### Rural vs Urban Population","b761bd2a":"#### Let's fight COVID-19 together and","832f8975":"#### I'll keep updating this notebook with more data and more visualizations.","16865f5a":"#### Merging all the datasets","ca97259c":"#### Density","5d9913fd":"### Testing data","49bc652f":"## India :- Statewise cases","064a2dec":"**Download libraries**","6b0e8ff2":"**Total Deaths**","1f294edb":"##### In this notebook , we'll be looking at how india has been affected with this ongoing coronavirus (COVID 19) ","acfe0fcc":"### Visualizations of Zones","6e063390":"Now we compare three plots here.\n1) Infection Rate:- How many people are infected in a million population.\n2) Recovery Rate:- How many cases have been recovered in a 100 confirmed cases.\n3) Death Rate :- How many cases didn't recover in a 100 confirmed cases.\n","71a9b135":"### Trend of cases in india","d2f20b0b":"##### Finally ,we are done","4c93c1bc":"**To prevent infection and to slow transmission of COVID-19, do the following:**\n\n**1) Wash your hands regularly with soap and water, or clean them with alcohol-based hand rub.**\n\n**2) Maintain at least 1 metre distance between you and people coughing or sneezing.**\n\n**3) Avoid touching your face.**\n\n**4) Cover your mouth and nose when coughing or sneezing.**\n\n**5) Stay home if you feel unwell.**\n\n**6) Refrain from smoking and other activities that weaken the lungs.**\n\n**7) Practice physical distancing by avoiding unnecessary travel and staying away from large groups of people.**\n","cb245fe0":"### Data Cleaning","5e01c109":"#### Loading Datasets","06677d1b":"## Prevention","4d4b894d":"### Age","7eb67cb9":"#### Area","cfa0e0ed":"##### With some basic analysis and interesting visualizations","0a4127c8":"##### I will be continuosly updating this notebook with added features and visualizations.","abe70613":"### Covid 19 Dashboard","ed738d4b":"We'll be scraping most of the data to get live updates.\nThanks to following datas sources for making the data available to public.\nData sources:-\nCovid19 India : https:\/\/www.covid19india.org\/\nThe Minsitry of Health & Family Welfare: https:\/\/www.mohfw.gov.in\/\nHospital & bed data: https:\/\/api.steinhq.com\/v1\/storages\/5e732accb88d3d04ae0815ae\/StateWiseHealthCapacity\nICMR testing stats API: https:\/\/api.steinhq.com\/v1\/storages\/5e6e3e9fb88d3d04ae08158c\/ICMRTestData\nMedical colleges data: https:\/\/api.steinhq.com\/v1\/storages\/5e6e3e9fb88d3d04ae08158c\/Hospitals","08023c47":"### Covid19 Cases history","f2902a28":"**The COVID-19 virus affects different people in different ways.  COVID-19 is a respiratory disease and most infected people will develop mild to moderate symptoms and recover without requiring special treatment.  People who have underlying medical conditions and those over 60 years old have a higher risk of developing severe disease and death.**\n\n**Common symptoms include:**\n\n**1) fever**\n\n**2) tiredness**\n\n**3) dry cough.**\n\n**Other symptoms include:**\n\n**1) shortness of breath**\n\n**2) aches and pains**\n\n**3) sore throat**\n\n**and very few people will report diarrhoea, nausea or a runny nose.**","d0342954":"#### Active vs Recovered vs Deaths","28696851":"### India :- Red , Orange, Green Zones","daa77102":"#### Population","5ae926d6":"# Coronavirus (COVID 19)","6df067ae":"**Recovery rate and Death rate of each state**","3ff79c10":"## Symptoms","1d1af03c":"#### Line Charts","cb8bc0ce":"### ICMR Testing dataset","a201fce1":"**Death Rate(per 100),Recovery Rate(per 100),Infection Rate(per million)**"}}