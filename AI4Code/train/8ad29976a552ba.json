{"cell_type":{"ba5d8391":"code","a9a71b3a":"code","0af6e8aa":"code","0ab8697a":"code","486c053f":"code","37d6f7e7":"code","7084c08e":"code","b1bc0893":"code","ac7034a0":"code","721434f0":"code","9e9718fe":"code","6a3f7aa7":"code","76c60752":"code","86bb2d13":"code","b5a97001":"code","4e6887be":"code","d27c02df":"code","ecdcce7d":"code","094b310a":"code","25865105":"code","38cce023":"code","765fef28":"code","0c05f69d":"code","8ee6e371":"code","4f711f49":"code","797d7765":"code","ff06d6b2":"code","dbf273ab":"code","cdc30f33":"code","a3f8725c":"code","93f6e19a":"markdown","03438626":"markdown","6c202cb9":"markdown","15484657":"markdown","13364f17":"markdown","17431606":"markdown","10918261":"markdown","cf52754b":"markdown","0e20e340":"markdown","04d3b3e4":"markdown","b5f7f537":"markdown","23966ad8":"markdown","8f81c93b":"markdown","ec8d1500":"markdown","3fe86c31":"markdown","8ba6108d":"markdown","40f8a98d":"markdown","d8b9699d":"markdown","b9d16e5a":"markdown","90308667":"markdown","e5b6478c":"markdown","b20eca15":"markdown","0b4f4e89":"markdown","4c39825e":"markdown","88f7a668":"markdown","33fd4d25":"markdown","8a84c270":"markdown"},"source":{"ba5d8391":"%matplotlib inline\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport seaborn as sns\nimport nltk\nfrom nltk.corpus import stopwords \nfrom nltk.tokenize import RegexpTokenizer\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neural_network import MLPClassifier\nfrom sklearn.metrics import classification_report,confusion_matrix","a9a71b3a":"df = pd.read_csv(\"..\/input\/olist_classified_public_dataset.csv\")\ndf.head(6)","0af6e8aa":"#Quantidade de linhas e colunas do DataFrame\ndf.shape\n# 3584 linhas e 34 colunas","0ab8697a":"df[\"product_category_name\"].describe()","486c053f":"#Todas as categorias de produtos\nvalueCategoria = df[\"product_category_name\"].value_counts()\nvalueCategoria","37d6f7e7":"print(valueCategoria[0:6])\nprint(\"Somatorio: %s\" % valueCategoria[0:6].sum())","7084c08e":"valueCategoria[0:6].sum()\/valueCategoria.sum()","b1bc0893":"MEAN = df[\"review_score\"].mean()\nprint(\"M\u00e9dia da popula\u00e7\u00e3o %s\" % MEAN)\nstd = df[\"review_score\"].std()\nprint(\"Desvio Padr\u00e3o da popula\u00e7\u00e3o: %s\" % std)","ac7034a0":"df.groupby(['product_category_name'])[\"review_score\"].describe().sort_values(['count'], ascending=False)","721434f0":"dfFiltrado = df[(df.product_category_name == \"cama_mesa_banho\") | \n                (df.product_category_name == \"moveis_decoracao\")|\n                (df.product_category_name == \"beleza_saude\")|\n                (df.product_category_name == \"esporte_lazer\")|\n                (df.product_category_name == \"informatica_acessorios\")|\n                (df.product_category_name == \"utilidades_domesticas\")]\n\n\ndfFiltrado.groupby(['product_category_name'])[\"most_voted_class\"].value_counts(normalize=True)","9e9718fe":"dfInformatica = df[df[\"product_category_name\"] == \"informatica_acessorios\"]\ndfInformatica.head(2)","6a3f7aa7":"## Pegando as categorias problemas_de_entrega e problemas_de_qualidade\n\ndfInformatica[(dfInformatica[\"most_voted_class\"] == \"problemas_de_entrega\") |\n              (dfInformatica[\"most_voted_class\"] == \"problemas_de_qualidade\")][\"most_voted_subclass\"].value_counts()","76c60752":"print(df[df[\"most_voted_class\"]== \"satisfeito_com_pedido\"][\"product_photos_qty\"].describe())\nprint(dfInformatica[(dfInformatica[\"most_voted_class\"] == \"problemas_de_qualidade\") | (dfInformatica[\"most_voted_class\"] == \"diferente_do_anunciado\")][\"product_photos_qty\"].describe())","86bb2d13":"df.corr()","b5a97001":"df[[\"review_score\", \"product_photos_qty\", \"product_description_lenght\", \"order_products_value\", \"order_freight_value\", \"order_items_qty\"]].corr()","4e6887be":"# Classifica\u00e7\u00f5es e suas frequencias\nfreqClass = df[\"most_voted_class\"].value_counts()\nfreqClass","d27c02df":"print(\"%s\" % ((1983 \/ freqClass.sum())* 100))\nprint(\"%s\" % ((950 \/ freqClass.sum())* 100))\nprint(\"%s\" % ((480 \/ freqClass.sum())* 100))","ecdcce7d":"## Plotando as frequencias\nsns.barplot(freqClass.index, freqClass.values)\nplt.show()","094b310a":"# Criando um novo data frame apenas com os problemas de qualidade\ndfQuali = df[df[\"most_voted_class\"] == \"problemas_de_qualidade\"]","25865105":"freqSubClassQual = dfQuali[\"most_voted_subclass\"].value_counts()\nfreqSubClassQual","38cce023":"plt.figure()\nsubcategorias = [\"diferente_do_anunciado\", \"baixa_qualidade\", \"devolucao\", \"outro_pedido\"]\nfor subcategoria in subcategorias:\n    dfGenerico = dfQuali[dfQuali[\"most_voted_subclass\"] == subcategoria]\n    review = (\" \".join(dfGenerico[\"review_comment_message\"])).lower().replace(\"produtoq\", \"produto\")\n    review\n    # Removendo a pontua\u00e7\u00e3o e Tokenizando o texto\n    tokenizer = RegexpTokenizer(r'\\w+')\n    cleanText = tokenizer.tokenize(review)\n\n    # Removendo as StopWords\n    stopWords = stopwords.words('portuguese')\n    stopWords.remove(\"n\u00e3o\")\n    filtered_words = [word for word in cleanText if word not in stopWords]\n\n    # Criando Bigramas\n    filtered_words = nltk.ngrams(filtered_words, 2)\n\n    filtered_words\n\n    freq = nltk.FreqDist(filtered_words)\n    plt.figure(figsize=(10, 5))\n    plt.title(subcategoria)\n    freq.plot(30)","765fef28":"# Criando um novo data frame apenas com os problemas de entrega\ndfEntrega = df[df[\"most_voted_class\"] == \"problemas_de_entrega\"]","0c05f69d":"freqSubClassEntre = dfEntrega[\"most_voted_subclass\"].value_counts()\nfreqSubClassEntre","8ee6e371":"# Frequencia dos estados que mais tiveram problemas com a entrega\nfreqAtraso = dfEntrega[dfEntrega[\"most_voted_subclass\"] == \"atrasado\"][\"customer_state\"].value_counts()\nfreqAtraso","4f711f49":"print((134\/freqAtraso.sum()) * 100)\nprint((108\/freqAtraso.sum()) * 100)\nprint(((134\/freqAtraso.sum()) * 100) + ((108\/freqAtraso.sum()) * 100))","797d7765":"# Cidades de S\u00e3o Paulo com o maior numero de atrasos\ndfEntrega[dfEntrega[\"customer_state\"] == \"SP\"][\"customer_city\"].value_counts()","ff06d6b2":"X = df[[\"order_products_value\", \"order_freight_value\"]]\ny = df[\"review_score\"]\n# Separando a nossa base em valida\u00e7\u00e3o e treinamento\nX_train, X_test, y_train, y_test = train_test_split(X, y)","dbf273ab":"mlp = MLPClassifier(hidden_layer_sizes=(13),max_iter=5000)\nmlp.fit(X_train,y_train)\nMLPClassifier()","cdc30f33":"predictions = mlp.predict(X_test)","a3f8725c":"# Criando a matriz de confus\u00e3o\nprint(confusion_matrix(y_test,predictions))\nprint(classification_report(y_test,predictions))","93f6e19a":"Podemos notar que na nossa base, a classe dominante \u00e9 satisfeito_com_pedido, com 58.10%, seguido de problemas na entrega com 27.83% e por ultimo problemas de qualidade com 14.06%.","03438626":"O estado de S\u00e3o Paulo e Rio de Janeiro somam juntas 55% dos problemas atrasos, 30.87% e 23.88% respectativamente.\nComo demonstrado na tabela abaixo, a cidade de S\u00e3o Paulo possui a maioria dos atrasos. Por se tratar de uma grande cidade, algumas outras medidas podem ser tomadas, alem das j\u00e1 debatidas nesta analise. Como por exemplo, uma parceria com outras empresas de transportes.","6c202cb9":"Como o esperado, a nossa precis\u00e3o foi de apenas, 0.35. Isso ocorreu pois n\u00e3o houve um tratamento das vari\u00e1veis, uma escolha dos melhores par\u00e2metros de teste e uma otimiza\u00e7\u00e3o dos par\u00e2metros da rede neural.\nO objetivo maior era demonstrar que podemos criar um modelo de predi\u00e7\u00e3o baseado na nossa base, que com um pouco de trabalho, pode dar \u00f3timos resultados.","15484657":"O maior problema para a categoria de inform\u00e1tica \u00e9 o atrasado, uma solu\u00e7\u00e3o seria uma melhoria do algoritmo de calculo do prazo de entrega ou a cria\u00e7\u00e3o de alguns indicadores e medidas de preven\u00e7\u00e3o, um exemplo seria um indicador que acompanha o rastreamento do pedido, quando o indicador notar que vai ocorrer um atraso, poderia levantar uma flag para que o operacional possa entrar em contato com o cliente, para explicar os motivos do atraso e contornar o problema da melhor maneira poss\u00edvel. ","13364f17":"Podemos notar que atraso foi a subcategoria que mais causou transtornos. Vamos analisar os estados que mais tiveram problemas com essa subcategoria.","17431606":"## Subclass: problemas_de_qualidade","10918261":"# Most_voted_class\n\nAnalisaremos agora a categoria Most_voted_class, utilizando toda a nossa base de dados.","cf52754b":"Podemos notar um volume muito grande de problemas com o produto diferente do anunciado, algumas medidas podem ser tomadas, como uma melhor descri\u00e7\u00e3o do produto, utiliza\u00e7\u00e3o de videos para demonstrar o produto, entre outras.","0e20e340":"### NLP da categoria Problemas_de_qualidade","04d3b3e4":"Podemos notar que 10% das categorias s\u00e3o responsaveis por 46.24% da nossa base. Sendo elas:\n\n* cama_mesa_banho\n* moveis_decoracao\n* beleza_saude\n* esporte_lazer\n* informatica_acessorios\n* utilidades_domesticas","b5f7f537":"# Analise Explorat\u00f3ria dos dados","23966ad8":"# Carregando os dados","8f81c93b":"Analisando o problema de qualidade e diferente do anunciado, podemos notar que esses produtos tem uma m\u00e9dia de fotos (1.976744) no anunciante abaixo da m\u00e9dia da classe \"satisfeito_com_pedido\"(2.217347), o que poderia ter alguma correla\u00e7\u00e3o, dado que com mais fotos, o cliente tem mais informa\u00e7\u00e3o sobre o produto.","ec8d1500":"## Categoria: informatica_acessorios","3fe86c31":"# Conclus\u00e3o","8ba6108d":"O objetivo desta analise \u00e9 demonstrar algumas possibilidades de trabalhos mais estruturados que podem ser feitos com a utiliza\u00e7\u00e3o desta base, como a utiliza\u00e7\u00e3o de outras abordagens do NLP (Neuro-Linguistic Programming), testes estat\u00edsticos e cria\u00e7\u00e3o de modelos preditivos.","40f8a98d":"## Subclass: problemas_de_entrega","d8b9699d":"Vamos criar uma rede neural para tentar predizer o score do produto baseado no pre\u00e7o do produto e seu frete.","b9d16e5a":"Temos 480 reviews, vamos criar Bigramas para cada subcategoria","90308667":"## Matriz de correla\u00e7\u00e3o","e5b6478c":"# Rede Neural","b20eca15":"A m\u00e9dia de score \u00e9 3.5228 e o desvio padr\u00e3o \u00e9 igual a 1.65, com isso em mente vamos analisar as principais categorias de produtos.","0b4f4e89":"Fazendo algum testes de correla\u00e7\u00e3o, n\u00e3o obtivemos nenhuma correla\u00e7\u00e3o significativa.","4c39825e":"Analisando o gr\u00e1fico de bigramas, podemos notar que na categoria diferente_do_anunciado teve uma grande reclama\u00e7\u00e3o sobre a cor do produto que veio errado. Enquanto na categoria baixa_qualidade temos reclama\u00e7\u00e3o por causa da qualidade, ou afirma\u00e7\u00f5es como \"o produto n\u00e3o \u00e9 oque eu esperava\" ou que \"n\u00e3o vale o pre\u00e7o\". A classe de devolu\u00e7\u00e3o parece ter uma grande reclama\u00e7\u00e3o com a categoria roupas, como por exemplo o tamanho da camisa foi errada.","88f7a668":"Normalizando os nosso dados, podemos notar que proporcionalmente a categoria com o maior numero de clientes satisfeitos \u00e9 beleza_saude, enquanto a categoria com maior propor\u00e7\u00e3o de clientes com problemas na entrega foi informatica_acessorios e a categoria com maior propor\u00e7\u00e3o de problemas de qualidade tambem foi informatica acessorios. Como informatica_acessorios \u00e9 a categoria proporcionalmente com o maior numero de reclama\u00e7\u00e3o, caberia uma medida especifica para a mesma. Principalmente levando em conta que o mercado de inform\u00e1tica tem uma grande volatilidade, ent\u00e3o uma boa experiencia do cliente poderia ocasionar novas compras em um futuro pr\u00f3ximo.","33fd4d25":"Primeiro vamos analisar as categorias dos produtos e retirar algumas estatisticas","8a84c270":"Se analisarmos as seis primeiras categoria, podemos notar que a media de todos os dados (3.5228) n\u00e3o difere tanto da media por categoria, mas o desvio padr\u00e3o esta um valor alto. Como essas categorias representam 46.24% da nossa base. Poderia ser feito um estudo mais aprofundado para tentar elevar a media dos scores e diminuir a vari\u00e2ncia (quadrado do desvio padr\u00e3o). Diminuir essa vari\u00e2ncia seria importante, pois se o cliente n\u00e3o teve uma boa experiencia com compras online, ele pode n\u00e3o voltar a comprar na mesma."}}