{"cell_type":{"3fa97b1f":"code","316f7987":"code","77c856b5":"code","f0edfc05":"code","39fb80bf":"code","92a047ee":"markdown","09a3f4a3":"markdown","98af6faa":"markdown","cb0ed95e":"markdown","35a229e1":"markdown","e0eae543":"markdown","2f1cdbd1":"markdown","66627bdc":"markdown","5b92f72b":"markdown"},"source":{"3fa97b1f":"#importing necessery libraries for future analysis of the dataset\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\n%matplotlib inline\nimport seaborn as sns\nimport json\n\n! cp \/kaggle\/input\/bookingcom-hotel-listings\/marketing_sample_for_booking_com-hotel_booking_com__20200101_20200331.ldjson booking.json\njson_file = 'booking.json'\nwith open(json_file, 'r', encoding='utf-8') as f:  # read in the file\n    list_of_rows = [json.loads(row) for row in f.readlines()]  # use a list comprehesion to convert each row from str to dict\n\n# convert to a dataframe\ndf = pd.json_normalize(list_of_rows)\n# df['pageurl'] = df.pageurl.apply(lambda pu: str(pu).split('\/')[-1])\ndf.info()\n","316f7987":"df['hotel_type'].fillna(df['hotel_type'].mode()[0], inplace=True)\ndf.dropna(subset=['area'], inplace=True)\ndf.isna().sum()","77c856b5":"df.city.value_counts()","f0edfc05":"from wordcloud import WordCloud\nimport os\nfrom PIL import Image\nimport urllib\n\n# Control the font for our wordcloud\nif not os.path.exists('Comfortaa-Regular.ttf'):\n    urllib.request.urlretrieve('http:\/\/git.io\/JTqLk', 'Comfortaa-Regular.ttf')\n\n# Get a simple India map\nif not os.path.exists('india.jpg'):\n    urllib.request.urlretrieve('http:\/\/git.io\/JTqLa', 'india.jpg')\n\n    \ntext = ' '.join(' '.join(t) for t in df.amenities.str.split('|'))\nmask = np.array(Image.open('india.jpg'))\nwc = WordCloud(max_words=200, background_color='white', \n              font_path='.\/Comfortaa-Regular.ttf', mask=mask,\n              width=mask.shape[1], height=mask.shape[0]).generate(text)\n\nplt.figure(figsize=(24,12))\nplt.imshow(wc, interpolation='bilinear')\nplt.axis('off')\nplt.show()","39fb80bf":"plt.figure(figsize=(16, 8))\nfor f in ['average_rating', 'cleanliness', 'facilities', 'location', 'staff', 'wifi', 'comfort']:\n    dfcopy = df.dropna(subset=[f])\n    sns.kdeplot(dfcopy[f], shade=True, alpha=.5)","92a047ee":"# Overview\n\nThis is a kernel in final and I might not be updating it in the future. Please upvote if you like it, or leave below a comment to elaborate why you don't (I promise I will not hold a grudge).\n\n<img src=\"http:\/\/git.io\/JTIjl\" width=\"500px\" alt=\"Booking.com\">\n\nFirst of all, this sample dataset contains only 975 records, not 30K! And the URL link to the claimed full dataset is **an ad for paid downloading page! Be aware!!!** \n\nSimilar datasets by the same uploader (promptcloud) can be found [here](https:\/\/www.kaggle.com\/promptcloud\/hotel-listings-on-bookingcom) and [here](https:\/\/www.kaggle.com\/promptcloud\/listings-on-bookingcom?) (no notebook was ever created for these datasets). For beginners who're serious about learning explanatory data analysis (EDA), a better dataset with around 500 kernels (until 2020-10-10) is [New York City Airbnb 2019 Open Data](https:\/\/www.kaggle.com\/dgomonov\/new-york-city-airbnb-open-data). Refer to this [start-up kernel](https:\/\/www.kaggle.com\/xiu0714\/eda-on-nyc-airbnb) if you're interested. \n\n\nAnyway, we are going to conduct a simple EDA on this dataset. ","09a3f4a3":"Interesting, the word mentioned most frequent in amenities is 'Additional charge'. Of course, hotels are trying to attract guests with 'Free WiFi', 'Parking Free' and 'Room service'.","98af6faa":"Although the data on those indicators are incomplete, from what we have in hand, we can see that:\n1. `average_rating` is not so bad. Acturally, nearly half of scores are larger than 0.8.\n2. For all other indicators, the scores are concentrated on two humps: one locates near zero and the other near 7.5. But we guess the 0-valued score might be some error introduced during the generation of the sample dataset.  ","cb0ed95e":"## `rating`s","35a229e1":"Observations, we can see that:\n- There are 975 entries\n- Some features have missing values, e.g., 'area', 'hotle_type', (we will deal with them later).\n- The last two columns `extra_adult_rate`, `extra_child_rate` seem to lost many values, so we're going to dump them from the dataset.\n\n## Clean data\nIn this step we:\n- remove columns `extra_adult_rate`, `extra_child_rate` since they missed too mach value, \n- remove `area`, \n- fill `hotel_type` with most common value, \n- remove insignificant features, e.g., `uniq_id`, `crawl_timestamp`, `pageurl`\n","e0eae543":"## `amenities`\nWe draw below a wordcloud image generated with words extracted from amenities to find out what hotels cared about their services.","2f1cdbd1":"Now let's find out what information can be extracted from this simple, shallow dataset.\n\n## `city`\n\nGoa and Delhi have the most listings. Tourists must love [Basilica of Bom Jesus](https:\/\/en.wikipedia.org\/wiki\/Basilica_of_Bom_Jesus) and [Red Fort](https:\/\/en.wikipedia.org\/wiki\/Red_Fort) a lot.\n<img src=\"http:\/\/git.io\/JTqcb\" width=\"400px\" alt=\"red fort\"> \n<img src=\"http:\/\/git.io\/JTqCg\" width=\"400px\" alt=\"red fort\">","66627bdc":"# Conclusions\n1. India is a beautiful and attractive country. People in there are nice and friendly, hotels are clean and cozy.\n2. This dataset is a bad dataset.","5b92f72b":"## Loading Data & Import Libraries"}}