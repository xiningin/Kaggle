{"cell_type":{"97745149":"code","5e3ff3f5":"code","799712f8":"code","74e860ae":"code","1edf0133":"code","4dabce32":"code","4bb5b84b":"code","37837cb2":"code","26221002":"code","460c56a2":"code","aa9109c0":"code","801ff97a":"code","28359a3a":"code","1e7cf52b":"code","2a13fd84":"code","6a4dc4fc":"code","bbbe29c3":"code","9be79c07":"code","d924db2a":"code","729c8c58":"code","3e5eea85":"code","177bac1a":"code","a342b302":"code","5aa89507":"code","62ed8b1d":"code","30355048":"code","b5727622":"code","6ee9c39a":"code","8dcc3e88":"code","e89f784e":"code","db2e7f7a":"code","79b99430":"code","236e6121":"code","3f1f857c":"code","c5f65929":"code","3dfcedab":"code","da5186b4":"code","25cc9e6e":"code","2b82dabc":"code","16de0676":"code","7d1f9289":"code","024719e6":"code","0116ab1a":"code","ee0e7c0a":"code","94fbea40":"code","a878f516":"code","233a549e":"code","878ab8b7":"code","a0945278":"code","a3c626aa":"code","1d454494":"code","a06b849a":"code","83f5e74e":"code","df6d1ca5":"code","c845a1b4":"code","e755a2b6":"code","9676f4f7":"code","036a4839":"code","0a905cab":"code","b8d0613b":"code","3de2ba20":"code","0891f493":"code","09248254":"code","7b0eb20c":"code","f5c0e5f7":"code","401f8e1a":"code","cf9a5b35":"code","610c36f0":"code","88b1e156":"code","41081eeb":"code","271c6616":"code","f5262e64":"code","7824c6db":"code","b464bf7b":"code","c5af299b":"code","2be69ab7":"code","caf2b3cf":"code","f041c2ad":"code","fbbb702a":"code","51644661":"code","ea7796c4":"code","fe961135":"code","ad324315":"code","6259cda7":"code","d577913f":"code","d50b8b9e":"code","789006fc":"code","f3944fcb":"code","39de4b5d":"code","e2bb99c3":"code","2b3eb9f2":"code","eb4c9ce9":"code","f3399371":"code","e473c3c2":"code","6133fc4a":"code","bb2e9193":"code","bd3f75bf":"code","049d19c6":"code","5c4b6727":"code","3e86e62a":"code","80dc50ac":"code","33c1c874":"code","f7b364fd":"code","2c3e37ad":"markdown","361952a6":"markdown","0188d6d3":"markdown","29ac49db":"markdown","fb42e5e8":"markdown"},"source":{"97745149":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n\nimport matplotlib.pylab as plt\nplt.style.use('fivethirtyeight')\n%matplotlib inline\nimport seaborn as sns\nsns.set(style=\"ticks\")\nsns.set(rc={'figure.figsize':(15,10)})\n# Any results you write to the current directory are saved as output.\n\n","5e3ff3f5":"wh = pd.read_csv('..\/input\/who-suicide-statistics\/who_suicide_statistics.csv')\n","799712f8":"wh.info()","74e860ae":"wh.dropna(inplace=True)","1edf0133":"wh.info()","4dabce32":"wh.columns","4bb5b84b":"#https:\/\/www.kaggle.com\/kikexclusive\/curiosity-didn-t-kill-the-cat-all-in-one\nfrom IPython.display import display, HTML\ndisplay(wh.describe(include=\"all\").T)","37837cb2":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=wh, x='year', y='suicides_no', x_jitter=0.2, order=4)\nax.set_yscale('log')","26221002":"wh.groupby(['country','age']).suicides_no.sum().nlargest(10).plot(kind='barh')","460c56a2":"#https:\/\/seaborn.pydata.org\/generated\/seaborn.barplot.html\n#https:\/\/www.kaggle.com\/nadintamer\/titanic-survival-predictions-beginner\nfrom numpy import median\nax = sns.catplot(x=\"sex\", y=\"suicides_no\",col='age', data=wh, estimator=median,height=4, aspect=.7,kind='bar')","aa9109c0":"wh['age'] = wh.age.astype(pd.api.types.CategoricalDtype(categories = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']))","801ff97a":"wh.pivot_table(index='age',columns='sex',values='suicides_no', aggfunc='sum').plot(kind='barh')","28359a3a":"wh.groupby(by=['age','sex'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","1e7cf52b":"wh.groupby(by=['age','sex'])['suicides_no'].sum().unstack().reset_index().melt(id_vars='age')","2a13fd84":"from numpy import sum\nsns.catplot('age','suicides_no',hue='sex',col='year',data=wh,kind='bar',col_wrap=3,estimator=sum)","6a4dc4fc":"#wh.groupby(['year','age']).suicides_no.sum().reset_index()","bbbe29c3":"#https:\/\/seaborn.pydata.org\/generated\/seaborn.lineplot.html\nfrom matplotlib.colors import LogNorm\ndf = wh.groupby(['year','age']).suicides_no.sum().reset_index()\ndf['age'] = df.age.astype(pd.api.types.CategoricalDtype(categories = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']))\nsns.set(rc={'figure.figsize':(15,10)})\nsns.lineplot('year','suicides_no',hue='age',style='age',data=df,hue_norm=LogNorm(),palette=\"ch:2.5,.25\",sort=False)","9be79c07":"#wh.groupby(['year']).suicides_no.sum().plot()","d924db2a":"#https:\/\/seaborn.pydata.org\/examples\/faceted_histogram.html\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nsns.set(style=\"darkgrid\")\n\ng = sns.FacetGrid(wh, row=\"sex\", col=\"age\", margin_titles=True)\n\ng.map(plt.scatter, \"suicides_no\",\"population\", edgecolor=\"w\")","729c8c58":"#https:\/\/seaborn.pydata.org\/examples\/faceted_histogram.html\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nsns.set(style=\"darkgrid\")\n\ng = sns.FacetGrid(wh, row=\"year\", col=\"age\",hue='sex',margin_titles=True)\n\n(g.map(plt.scatter, \"suicides_no\",\"population\", edgecolor=\"w\")).add_legend()","3e5eea85":"\ng = sns.FacetGrid(wh.groupby(['country','year']).suicides_no.sum().reset_index(), col=\"country\", col_wrap=3)\ng = g.map(plt.plot, \"year\", \"suicides_no\", marker=\".\")","177bac1a":"p = pd.crosstab(index=wh.country,columns=wh.year,values=wh.suicides_no,aggfunc='sum')\n\nsns.heatmap(p.loc[:,2011:2015].sort_values(2015, ascending=False).dropna().head(5),annot=True)\n\npp = pd.crosstab(index=wh.country,columns=wh.year,values=wh.population,aggfunc='sum')\n\npdivpp = p\/pp*10000\n\n#sns.heatmap(pdivpp.loc[:,2006:2015].sort_values(2015, ascending=False).dropna().head(5),annot=True)\n\n","a342b302":"wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15).plot(x='country',y='suicides_no',kind='barh')","5aa89507":"happiness = pd.read_csv('..\/input\/world-happiness\/2015.csv')","62ed8b1d":"#happiness[['Happiness Score','Region']].groupby('Region')['Happiness Score'].median().reset_index().sort_values('Happiness Score')","30355048":"happiness.columns","b5727622":"#sns.set(rc={'figure.figsize':(15,15)})\n\n#g = sns.FacetGrid(happiness, col=\"Region\",  margin_titles=True, col_wrap=3)\n\n#(g.map(plt.scatter, \"Generosity\",\"Happiness Score\", edgecolor=\"w\")).add_legend()\n#g = sns.lmplot(\"Freedom\",\"Generosity\",aspect=.4,hue='Region',col='Region',col_wrap=2, data=happiness)\n#g.fig.set_size_inches(15,15)\n","6ee9c39a":"happiness[happiness.Country.str.contains(\"Russia\")]\ncountries = ['Russia','United States','Japan','France','Ukraine','Germany','South Korea',\n'Brazil','Poland','United Kingdom','Italy','Hungary','Thailand','Canada','Kazakhstan']\nhappiness_dr = happiness[happiness.Country.isin(countries)].drop('Region',axis=1).set_index('Country')\nsns.set(rc={'figure.figsize':(15,15)})\nhappiness_dr['Happiness Rank'].plot(kind='barh', title='Happiness Rank 2015 for countries listed above')\n\n\n\n#happiness[happiness.Country.str.contains(\"Kazakhstan\")]\n#happiness[happiness.Country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15))]","8dcc3e88":"sns.set(rc={'figure.figsize':(10,10)})\n#g = sns.FacetGrid(happiness, col=\"Region\",  margin_titles=True, col_wrap=3)\n\n#(g.map(plt.scatter, \"Generosity\",\"Happiness Score\", edgecolor=\"w\")).add_legend()\nsns.scatterplot(\"Economy (GDP per Capita)\",\"Happiness Score\",hue='Region', data=happiness)","e89f784e":"# from sklearn import preprocessing\n\n# x = happiness.values\n# min_max_scaler = preprocessing.MinMaxScaler()\n# x_scaled = min_max_scaler.fit_transform(x)\n# happiness_scaled = pd.DataFrame(x_scaled)\n# happiness_scaled.columns = happiness.columns\n# happiness_scaled.index = happiness.index\n# sns.set(rc={'figure.figsize':(15,30)})\n# happiness_scaled[['Family','Health (Life Expectancy)','Freedom','Generosity']].plot(kind='barh',title='Happiness data 2015')","db2e7f7a":"#wh.groupby(by=['year','country'])['suicides_no'].max().reset_index().sort_values(['suicides_no'],ascending=False).head(34)","79b99430":"#wh.pivot_table(index='year',columns='sex',values='suicides_no', aggfunc='sum').plot(kind='barh')\nsns.set(rc={'figure.figsize':(10,7)})\nwh.pivot_table(index='year',columns='sex',values='suicides_no', aggfunc='sum').plot()","236e6121":"wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(15).country","3f1f857c":"wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['sex','country'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","c5f65929":"#wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['age','country'])['suicides_no'].sum().unstack().plot(kind='bar',stacked=True)","3dfcedab":"#https:\/\/stackoverflow.com\/questions\/12096252\/use-a-list-of-values-to-select-rows-from-a-pandas-dataframehttps:\/\/stackoverflow.com\/questions\/12096252\/use-a-list-of-values-to-select-rows-from-a-pandas-dataframe\n#wh[wh.country.isin(wh.groupby(by=['country'])['suicides_no'].sum().reset_index().sort_values(['suicides_no'],ascending=True).tail(5).country)].groupby(by=['year','country'])['suicides_no'].sum().unstack().plot()","da5186b4":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'year', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)","25cc9e6e":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(wh.age.unique())\nfactors = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']\ncolors = [\"deepskyblue\",\"maroon\",\"green\",\"peru\",\"greenyellow\",\"yellow\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'year', size=4, source=source,\n    legend='age', fill_alpha=0.2, color = {\"field\":\"age\",\"transform\":mapper})\n\nshow(p)","2b82dabc":"#wh.plot.scatter(x='population',y='suicides_no')\n#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\n\nTooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"population\",\"@population\")\n        ]\np = figure(plot_width=700, plot_height=700,  tooltips=Tooltips,\n           title=\"Mouse over the dots\" )\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'population', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)","16de0676":"#wh.plot.scatter(x='population',y='suicides_no')\n#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n'''from bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh[wh.suicides_no>0]\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"population\",\"@population\")\n        ]\n    )\n\np = figure(plot_width=700, plot_height=700, tools=[hover],\n           title=\"Mouse over the dots\" ,y_axis_type=\"log\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\np.circle('suicides_no', 'population', size=4, source=source,\n    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)'''","7d1f9289":"#https:\/\/pythonspot.com\/3d-scatterplot\/\n#https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import axes3d\nfrom sklearn.preprocessing import RobustScaler \n#https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\nrob_scaler = RobustScaler()\n\nwh['scaled_population'] = rob_scaler.fit_transform(wh['population'].values.reshape(-1,1))\nwh['scaled_suicides_no'] = rob_scaler.fit_transform(wh['suicides_no'].values.reshape(-1,1))\n \n# Create plot\nfig = plt.figure()\n#ax = fig.add_subplot(1, 1, 1)\n#ax = fig.gca(projection='3d')\nax = fig.add_subplot(111, projection='3d')\n#ax.set_xscale('log')\nwh = wh[wh.suicides_no>0]\nax.scatter(wh[wh.sex=='female'].scaled_population, wh[wh.sex=='female'].year, wh[wh.sex=='female'].scaled_suicides_no, alpha=0.2, c=\"red\", edgecolors='none', s=30, label=\"female\") \nax.scatter(wh[wh.sex=='male'].scaled_population, wh[wh.sex=='male'].year, wh[wh.sex=='male'].scaled_suicides_no, alpha=0.2, c=\"green\", edgecolors='none', s=30, label=\"male\")\n\n\n \nplt.title('Matplot 3d scatter plot')\nplt.legend(loc=2)\nplt.show()","024719e6":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n#https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/interaction\/legends.html#userguide-interaction-legends\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\n\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=800, plot_height=700,  tools=[hover],\n           title=\"Click on Legend to hide an age category\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(wh.age.unique())\nfactors = ['5-14 years','15-24 years','25-34 years','35-54 years','55-74 years','75+ years']\nsource0 = ColumnDataSource(\n        data=wh[wh.age==factors[0]]\n    )\nsource1 = ColumnDataSource(\n        data=wh[wh.age==factors[1]]\n    )\nsource2 = ColumnDataSource(\n        data=wh[wh.age==factors[2]]\n    )\nsource3 = ColumnDataSource(\n        data=wh[wh.age==factors[3]]\n    )\nsource4 = ColumnDataSource(\n        data=wh[wh.age==factors[4]]\n    )\nsource5 = ColumnDataSource(\n        data=wh[wh.age==factors[5]]\n    )\n\ncolors = [\"black\",\"sienna\",\"blue\",\"yellow\",\"darkgreen\",\"lightcoral\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source,\n#    legend='age', fill_alpha=0.2, color = {\"field\":\"age\",\"transform\":mapper})\n\n#p.circle(wh[wh.age==factors[0]].suicides_no, wh[wh.age==factors[0]].year, color=colors[0], alpha=0.8, legend=factors[0])\n#p.circle(wh[wh.age==factors[1]].suicides_no, wh[wh.age==factors[1]].year, color=colors[1], alpha=0.8, legend=factors[1])\n#p.circle(wh[wh.age==factors[2]].suicides_no, wh[wh.age==factors[2]].year, color=colors[2], alpha=0.8, legend=factors[2])\n#p.circle(wh[wh.age==factors[3]].suicides_no, wh[wh.age==factors[3]].year, color=colors[3], alpha=0.8, legend=factors[3])\n#p.circle(wh[wh.age==factors[4]].suicides_no, wh[wh.age==factors[4]].year, color=colors[4], alpha=0.8, legend=factors[4])\n#p.circle(wh[wh.age==factors[5]].suicides_no, wh[wh.age==factors[5]].year, color=colors[5], alpha=0.8, legend=factors[5])\n\n\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source0, color=colors[0], alpha=0.8, legend=factors[0])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source1, color=colors[1], alpha=0.8, legend=factors[1])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source2, color=colors[2], alpha=0.8, legend=factors[2])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source3, color=colors[3], alpha=0.8, legend=factors[3])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source4, color=colors[4], alpha=0.8, legend=factors[4])\n#p.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range), source=source5, color=colors[5], alpha=0.8, legend=factors[5])\n\np.circle(x='suicides_no',y = 'year', source=source0, color=colors[0], alpha=0.8, legend=factors[0])\np.circle(x='suicides_no',y =  'year', source=source1, color=colors[1], alpha=0.8, legend=factors[1])\np.circle(x='suicides_no',y =  'year', source=source2, color=colors[2], alpha=0.8, legend=factors[2])\np.circle(x='suicides_no',y =  'year', source=source3, color=colors[3], alpha=0.8, legend=factors[3])\np.circle(x='suicides_no',y =  'year', source=source4, color=colors[4], alpha=0.8, legend=factors[4])\np.circle(x='suicides_no',y =  'year', source=source5, color=colors[5], alpha=0.8, legend=factors[5])\n\n\np.legend.click_policy=\"hide\"\np.legend.location = \"bottom_center\"\np.xaxis.axis_label = 'Number of Suicides'\np.yaxis.axis_label = 'Year'\nshow(p)","0116ab1a":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper, BoxZoomTool,ResetTool,PanTool,WheelZoomTool\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=wh\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=500, plot_height=500, tools=[hover],\n           title=\"Mouse over the dots\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\n\n\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  source=source, alpha=0.3)\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\np.add_tools(PanTool())\np.add_tools(WheelZoomTool())\np.add_tools(BoxZoomTool())\np.add_tools(ResetTool())\nshow(p)","ee0e7c0a":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n'''from bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsourcef = ColumnDataSource(\n        data=wh[(wh.country=='Japan')&(wh.sex=='female')]\n    )\nsourcem = ColumnDataSource(\n        data=wh[(wh.country=='Japan')&(wh.sex=='male')]\n    )\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"age\", \"@age\"),\n            (\"suicides_no\",\"@suicides_no\")\n        ]\n    )\n\np = figure(plot_width=800, plot_height=700, tools=[hover],\n           title=\"Plot for one country\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\nfactors = list(wh.sex.unique())\ncolors = [\"red\",\"green\"]\nmapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  color= 'red',source=sourcef, alpha=0.3,legend='sex')\np.circle(x='scaled_suicides_no', y=jitter('year', width=0.6, range=p.y_range),  color= 'green',source=sourcem, alpha=0.3,legend='sex')\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\n\nshow(p)'''","94fbea40":"#https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\nsns.set(rc={'figure.figsize':(8,8)})\nsns.distplot( wh.groupby('year')[\"suicides_no\"].max(), bins=20 )\n","a878f516":"#https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\n#sns.set(rc={'figure.figsize':(8,8)})\n#sns.distplot( wh.groupby('year')[\"suicides_no\"].std(), bins=20 )","233a549e":"pd.options.display.max_rows = 200\n#wh.pivot_table(index='country',columns='year',values=['suicides_no'], aggfunc=['sum']).count()\npivot_table=wh.pivot_table(index='country',columns='year',values=['suicides_no'], aggfunc=['sum'])\npivot_table","878ab8b7":"#https:\/\/pandas.pydata.org\/pandas-docs\/stable\/generated\/pandas.Series.pct_change.html\npivot_table_pct_change = pivot_table.pct_change(axis='columns')\npivot_table_pct_change.columns = pivot_table_pct_change.columns.droplevel().droplevel()\npivot_table_pct_change","a0945278":"#https:\/\/python-graph-gallery.com\/92-control-color-in-seaborn-heatmaps\/\n#https:\/\/seaborn.pydata.org\/generated\/seaborn.heatmap.html\n#https:\/\/stackoverflow.com\/questions\/39128856\/python-drop-row-if-two-columns-are-nan\n#https:\/\/stackoverflow.com\/questions\/48264613\/seaborn-heatmap-change-size-of-colorbar?rq=1\n#https:\/\/stackoverflow.com\/questions\/27037241\/changing-the-rotation-of-tick-labels-in-seaborn-heatmap\nsns.set(rc={'figure.figsize':(23,74)})\nsns.heatmap(pivot_table_pct_change.dropna(axis=0,thresh=10), cmap=\"YlGnBu\",robust=True,cbar_kws={\"shrink\": 0.5})\nplt.xticks(rotation=90) \nplt.show()","a3c626aa":"#pivot_table_pct_change.max()","1d454494":"pivot_table_pct_change.T.max().nlargest(5)","a06b849a":"\n#pivot_table.T.count().sort_values(ascending=False)","83f5e74e":"country_data = pivot_table.T.reset_index()\n","df6d1ca5":"\ncountry_data.set_index('year', inplace=True)\n","c845a1b4":"#country_data.columns","e755a2b6":"cols_to_drop_pivot = [0,1]\ncountry_data.drop(country_data.columns[cols_to_drop_pivot], axis=1,inplace=True)","9676f4f7":"sns.set(rc={'figure.figsize':(10,10)})\ncountry_data['Hungary'].plot(title='Year-wise suicide no. for a country')","036a4839":"pivot_table_pop =wh.pivot_table(index='country',columns='year',values=['population'], aggfunc=['sum'])\npivot_table_pop","0a905cab":"population_data = pivot_table_pop.T.reset_index()\npopulation_data.set_index('year', inplace=True)\ncols_to_drop_pivot = [0,1]\npopulation_data.drop(population_data.columns[cols_to_drop_pivot], axis=1,inplace=True)","b8d0613b":"suicide_rate_per_lakh = country_data\/population_data*100000","3de2ba20":"suicide_rate_per_lakh_melt = suicide_rate_per_lakh.reset_index().melt(id_vars='year')\n#suicide_rate_per_lakh_melt","0891f493":"suicide_rate_per_lakh_melt.iloc[suicide_rate_per_lakh_melt.groupby('year').value.idxmax()]","09248254":"suicide_rate_per_lakh_T = suicide_rate_per_lakh.T\n","7b0eb20c":"#suicide_rate_per_lakh_T.describe()","f5c0e5f7":"#suicide_rate_per_lakh_T.max()","401f8e1a":"#suicide_rate_per_lakh_T.iloc[:,-2].idxmax()\n#2015","cf9a5b35":"suicide_socio_economic = pd.read_csv('..\/input\/suicide-rates-overview-1985-to-2016\/master.csv')","610c36f0":"suicide_socio_economic.columns","88b1e156":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=suicide_socio_economic, x='year', y='gdp_per_capita ($)', x_jitter=0.2, order=4)\nax.set_yscale('log')","41081eeb":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=suicide_socio_economic, x='year', y='gdp_per_capita ($)', x_estimator=np.median, x_jitter=0.2, order=4)\nax.set_yscale('log')\n","271c6616":"#suicide_socio_economic.info()","f5262e64":"suicide_socio_economic.year.max()","7824c6db":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\n#ax=sns.regplot(data=suicide_socio_economic, x='gdp_per_capita ($)', y='suicides\/100k pop', x_estimator=np.median, x_jitter=0.2, order=4, x_bins=5)\nax=sns.regplot(data=suicide_socio_economic, x='gdp_per_capita ($)', y='suicides\/100k pop', x_jitter=0.2, order=4, x_bins=8)\n#ax.set_yscale('log')\n#ax.set_xscale('log')","b464bf7b":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\n#g = sns.FacetGrid(suicide_socio_economic, col=\"year\", margin_titles=True,col_wrap=2, aspect=2, height=4)\ng = sns.FacetGrid(suicide_socio_economic, col=\"year\", margin_titles=True,col_wrap=2, aspect=2, sharex=False, sharey=False)\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, order=4, fit_reg=False);\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False).set(yscale='log', xscale='log',xlim=(5, None), ylim=(-3, None))\n#g.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False, x_bins=8).set(yscale='log', xscale='log')\ng.map(sns.regplot, \"gdp_per_capita ($)\", \"suicides\/100k pop\", color=\".3\", x_jitter=.2, fit_reg=False, x_bins=8)\n","c5af299b":"#https:\/\/stackoverflow.com\/questions\/26414913\/normalize-columns-of-pandas-data-frame\nfrom sklearn import preprocessing\nsuicide_socio_economic_mean= suicide_socio_economic.pivot_table(['suicides\/100k pop','gdp_per_capita ($)'],\n               ['year'], aggfunc='mean')\nx = suicide_socio_economic_mean.values\nmin_max_scaler = preprocessing.MinMaxScaler()\nx_scaled = min_max_scaler.fit_transform(x)\nsuicide_socio_economic_mean_scaled = pd.DataFrame(x_scaled)\nsuicide_socio_economic_mean_scaled.columns = suicide_socio_economic_mean.columns\nsuicide_socio_economic_mean_scaled.index = suicide_socio_economic_mean.index","2be69ab7":"suicide_socio_economic_mean_scaled.plot()","caf2b3cf":"suicide_socio_economic['suicides\/100k pop'].corr(suicide_socio_economic['gdp_per_capita ($)'])","f041c2ad":"suicide_socio_economic['gdp_per_capita ($)'].describe()","fbbb702a":"#https:\/\/pythonspot.com\/3d-scatterplot\/\n#https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import axes3d\n#https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\n \n# Create plot\nfig = plt.figure()\n#ax = fig.add_subplot(1, 1, 1)\n#ax = fig.gca(projection='3d')\nax = fig.add_subplot(111, projection='3d')\nax.scatter(suicide_socio_economic['gdp_per_capita ($)'], suicide_socio_economic.year, suicide_socio_economic['suicides\/100k pop'], alpha=0.2, c=\"red\", edgecolors='none', s=30, label=\"female\") \nplt.title('gdp_per_capita ($), year, suicides\/100k pop')\nplt.legend(loc=2)\nplt.show()","51644661":"#https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\nfrom bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool, CategoricalColorMapper, BoxZoomTool,ResetTool,PanTool,WheelZoomTool\nfrom bokeh.io import output_notebook\n\noutput_notebook()\n\nsource = ColumnDataSource(\n        data=suicide_socio_economic\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"year\", \"@year\"),\n            (\"sex\", \"@sex\"),\n            (\"country\", \"@country\"),\n            (\"suicides_no\",\"@suicides_no\"),\n            (\"suicides\/100k pop\",\"@{suicides\/100k pop}\"),\n            (\"gdp_per_capita ($)\",\"@{gdp_per_capita ($)}\")\n        ]\n    )\n\np = figure(plot_width=500, plot_height=500, tools=[hover],\n           title=\"Suicide and economic data\")\n#https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n#https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n#factors = list(suicide_socio_economic.sex.unique())\n#colors = [\"red\",\"green\"]\n#mapper = CategoricalColorMapper(factors = factors,palette = colors)\nfrom bokeh.transform import jitter\n\n\n\n\np.circle(x='suicides_no', y=jitter('year', width=0.6, range=p.y_range),fill_color=\"orange\",  source=source, alpha=0.3)\n\n\np.x_range.range_padding = 0\np.ygrid.grid_line_color = None\n\n\n#p.circle('suicides_no', 'age', size=4, source=source,\n#    legend='sex', fill_alpha=0.2, color = {\"field\":\"sex\",\"transform\":mapper})\np.add_tools(PanTool())\np.add_tools(WheelZoomTool())\np.add_tools(BoxZoomTool())\np.add_tools(ResetTool())\nshow(p)","ea7796c4":"health = pd.read_csv('..\/input\/health-nutrition-and-population-statistics\/data.csv')\nhealth.head()\n#health['Indicator Name'].describe()","fe961135":"#health['Indicator Name'].value_counts()","ad324315":"pd.options.display.max_rows = 200\n#health['Indicator Name'].value_counts()\n#health.info()\n#health.describe().T\n#health.columns\n\nhealth[health['Indicator Name'].isin(['Birth rate, crude (per 1,000 people)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n#health[health['Indicator Name'].isin(['Labor force, female (% of total labor force)'])].dropna(axis=1)\n#health.head()\n#Literacy rate, adult male (% of males ages 15 and above) \n#Literacy rate, adult female (% of females ages 15 and above)","6259cda7":"health[health['Indicator Name'].isin(['Births attended by skilled health staff (% of total)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n#health.groupby('Indicator Name').mean().loc[:, '1985':'2015']\n","d577913f":"health[health['Indicator Name'].isin(['AIDS estimated deaths (UNAIDS estimates)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","d50b8b9e":"health[health['Indicator Name'].isin(['Prevalence of overweight (% of children under 5)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","789006fc":"health[health['Indicator Name'].isin(['Public spending on education, total (% of GDP)'])].groupby('Indicator Name').mean().loc[:, '1985':'2015'].T.plot()\n","f3944fcb":"#health.groupby('Indicator Name').mean().loc[:, '1985':'2015']","39de4b5d":"human = pd.read_csv('..\/input\/the-human-freedom-index\/hfi_cc_2018.csv')\nhuman.head()","e2bb99c3":"human.columns[-20:]","2b3eb9f2":"human[human['year']==2016].iloc[human[human['year']==2016].hf_score.idxmax()]","eb4c9ce9":"wh[wh.country=='New Zealand'].groupby('year').sum()","f3399371":"human[human.countries=='New Zealand'].sort_values('year')[['year','hf_score']]","e473c3c2":"g = sns.FacetGrid(human[['countries','year','hf_score']], col=\"countries\", col_wrap=3)\ng = g.map(plt.plot, \"year\", \"hf_score\", marker=\".\")","6133fc4a":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=human, x='year', y='hf_score', x_jitter=0.2, order=3)\n#ax.set_yscale('log')","bb2e9193":"sns.set(style=\"darkgrid\")\nsns.set(rc={'figure.figsize':(15,10)})\nax=sns.regplot(data=human, x='year', y='hf_score', x_jitter=0.2, order=3, x_estimator=np.median)","bd3f75bf":"mtech = pd.read_csv('..\/input\/mental-health-in-tech-survey\/survey.csv')","049d19c6":"#mtech.columns\n\n# https:\/\/www.kaggle.com\/osmi\/mental-health-in-tech-survey\n\n\n# * family_history - Do you have a family history of mental illness?\n# * treatment - Have you sought treatment for a mental health condition?\n# * work_interfere - If you have a mental health condition, do you feel that it interferes with your work?\n# * remote_work - Do you work remotely (outside of an office) at least 50% of the time?\n# * tech_company - Is your employer primarily a tech company\/organization?\n# * benefits - Does your employer provide mental health benefits?\n# * care_options - Do you know the options for mental health care your employer provides?\n# * wellness_program - Has your employer ever discussed mental health as part of an employee wellness program?\n# * seek_help - Does your employer provide resources to learn more about mental health issues and how to seek help?\n# * anonymity - Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?\n# * leave - How easy is it for you to take medical leave for a mental health condition?\n# * mental_health_consequence - Do you think that discussing a mental health issue with your employer would have negative consequences?\n# * phys_health_consequence - Do you think that discussing a physical health issue with your employer would have negative consequences?\n# * coworkers - Would you be willing to discuss a mental health issue with your coworkers?\n# * supervisor - Would you be willing to discuss a mental health issue with your direct supervisor(s)?\n# * mental_health_interview - Would you bring up a mental health issue with a potential employer in an interview?\n# * phys_health_interview - Would you bring up a physical health issue with a potential employer in an interview?\n# * mental_vs_physical - Do you feel that your employer takes mental health as seriously as physical health?\n# * obs_consequence - Have you heard of or observed negative consequences for coworkers with mental health conditions in your workplace?","5c4b6727":"mtech.describe(include='all')","3e86e62a":"sns.catplot(x='self_employed', hue='remote_work', col='tech_company', kind='count', data=mtech)","80dc50ac":"sns.catplot(x='anonymity', hue='leave', col='supervisor', row='coworkers', kind='count', data=mtech)","33c1c874":"sns.catplot(x='benefits', hue='treatment', col='wellness_program', row='care_options',kind='count', data=mtech)","f7b364fd":"sns.catplot(x='seek_help', hue='mental_health_consequence', col='treatment', row='family_history', kind='count', data=mtech)","2c3e37ad":"* anonymity - Is your anonymity protected if you choose to take advantage of mental health or substance abuse treatment resources?\n* leave - How easy is it for you to take medical leave for a mental health condition?\n* coworkers - Would you be willing to discuss a mental health issue with your coworkers?\n* supervisor - Would you be willing to discuss a mental health issue with your direct supervisor(s)?","361952a6":"* treatment - Have you sought treatment for a mental health condition?\n* benefits - Does your employer provide mental health benefits?\n* care_options - Do you know the options for mental health care your employer provides?\n* wellness_program - Has your employer ever discussed mental health as part of an employee wellness program?\n","0188d6d3":"* self_employed - Are you self-employed?\n* remote_work - Do you work remotely (outside of an office) at least 50% of the time?\n* tech_company - Is your employer primarily a tech company\/organization?","29ac49db":"Referred \n\n* https:\/\/www.kaggle.com\/lahanasm\/un-historical-transitional-justice-analysis\n* https:\/\/www.kaggle.com\/kikexclusive\/curiosity-didn-t-kill-the-cat-all-in-one\n* https:\/\/gist.github.com\/dela3499\/e159b388258b5f1a7a3bac42fc0179fd\n* https:\/\/www.kaggle.com\/kanncaa1\/visualization-bokeh-tutorial-part-1\n* https:\/\/github.com\/bokeh\/bokeh\/issues\/5112\n* https:\/\/pythonspot.com\/3d-scatterplot\/\n* https:\/\/matplotlib.org\/gallery\/mplot3d\/scatter3d.html\n* https:\/\/www.kaggle.com\/janiobachmann\/credit-fraud-dealing-with-imbalanced-datasets\n* https:\/\/python-graph-gallery.com\/20-basic-histogram-seaborn\/\n* https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/interaction\/legends.html#userguide-interaction-legends\n* https:\/\/bokeh.pydata.org\/en\/latest\/docs\/user_guide\/tools.html\n* https:\/\/pandas.pydata.org\/pandas-docs\/stable\/options.html\n* https:\/\/pandas.pydata.org\/pandas-docs\/stable\/generated\/pandas.Series.pct_change.html\n* https:\/\/stackoverflow.com\/questions\/26414913\/normalize-columns-of-pandas-data-frame\n* https:\/\/stackoverflow.com\/questions\/42579908\/use-corr-to-get-the-correlation-between-two-columns\n* https:\/\/www.kaggle.com\/rblcoder\/2018-kaggle-survey-eda-platforms-tools-and-more\n* https:\/\/stackoverflow.com\/questions\/31467655\/python-seaborn-lmplot-regplot-for-y-log-scale-fit","fb42e5e8":"* seek_help - Does your employer provide resources to learn more about mental health issues and how to seek help?\n* mental_health_consequence - Do you think that discussing a mental health issue with your employer would have negative consequences?\n* family_history - Do you have a family history of mental illness?\n* treatment - Have you sought treatment for a mental health condition?\n"}}