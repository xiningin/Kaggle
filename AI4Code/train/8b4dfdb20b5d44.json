{"cell_type":{"5bf1dfe1":"code","3691eb90":"code","14783daf":"code","1c264b25":"code","ac0b78a8":"code","04302077":"code","d94792ec":"code","0d918389":"code","344d23d7":"code","8011b85d":"code","5c015595":"code","cad27108":"code","58958cfd":"code","951d6450":"code","0c092a74":"code","cca969d3":"code","f4dd24f4":"code","299203f9":"code","1981f95b":"code","b73f9e55":"markdown","5d698e33":"markdown","b403c684":"markdown","c4412369":"markdown","74e2e3ab":"markdown","cfdda77d":"markdown","7758fb42":"markdown","9f3c01e7":"markdown","15341333":"markdown","44a84a88":"markdown","6f8f6fc7":"markdown","ea8f99b3":"markdown","9cf172c7":"markdown","c8b4f941":"markdown","3b2ab079":"markdown","fdb61666":"markdown","1d0fb7c2":"markdown","b11e0e34":"markdown","b24b0cdb":"markdown","452df89a":"markdown","451cf44d":"markdown","55863a2e":"markdown","43ec9364":"markdown","1934c9b1":"markdown","91cbe3df":"markdown","857f06a7":"markdown","9054e141":"markdown","7dfaf93f":"markdown","d7e47304":"markdown","d26fa96e":"markdown","8fe46aea":"markdown","8462b4de":"markdown","f818c019":"markdown","f8aae4b2":"markdown","3ba2f402":"markdown","497eb1c9":"markdown"},"source":{"5bf1dfe1":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n!pip install seaborn --upgrade\nimport seaborn as sns\n\nsns.set_style(style='darkgrid')\nsns.set_context(\"talk\")","3691eb90":"# Loading the datasets\nmatches = pd.read_csv('..\/input\/cricipl\/IPL_matches.csv')\ndeliveries_including_superovers = pd.read_csv('..\/input\/cricipl\/IPL_deliveries.csv')\ndeliveries = deliveries_including_superovers[(deliveries_including_superovers['innings'] == '1st innings')\n                                             | (deliveries_including_superovers['innings'] == '2nd innings')]\nmatch_points = pd.read_csv('..\/input\/cricipl\/IPL_matchwise_player_points.csv')","14783daf":"# A peek into matches DataFrame\nmatches.head(2)","1c264b25":"# A peek into deliveries DataFrame\ndeliveries.head(2)","ac0b78a8":"# A peek into match_points DataFrame\nmatch_points.head(2)","04302077":"# Building a dataframe to get individual scores of players\nbatsmanlistofscores = matches.merge(deliveries, how='outer').groupby(['striker', 'match_id', 'season'],\n                                                                     sort=False).agg(np.sum).reset_index()\nbatsmanlistofscores.drop(['win_by_runs', 'win_by_wickets', 'delivery', 'wides', 'legbyes', 'noballs', 'byes', 'penalty',\n                          'non_boundary', 'extra_runs', 'total_runs', 'wicket'], axis=1, inplace=True)\nbatsmanlistofscores.head()","d94792ec":"exploder = [0.1, 0, 0, 0, 0, 0]\nplt.figure(figsize=(7,7))\nplt.pie(deliveries['kind_of_dismissal'].value_counts()[:-3], labels=deliveries['kind_of_dismissal'].value_counts()[:-3]\n        .index, startangle=232, shadow=True, autopct='%1.1f%%', explode=exploder, labeldistance=1.05)\nplt.tight_layout()","0d918389":"# Building a dataframe to get innings total runs and wickets i.e score cards\nmatchscores = deliveries.groupby(['match_id', 'innings', 'batting_team', 'bowling_team']).agg(np.sum)\nmatchscores = matchscores.reset_index().drop(['delivery', 'wides', 'legbyes', 'noballs', 'byes', 'penalty',\n                                              'non_boundary'], axis=1)\nfig = sns.catplot(data=matchscores, x='wicket', kind='count', aspect=2)\nfig.set_axis_labels(x_var=\"Total # of wickets\")\nplt.tight_layout()","344d23d7":"fig = sns.catplot(data=matchscores, x='wicket', kind='count', col='innings')\naxes = fig.axes.flatten()\naxes[0].set_xlabel(\"# of Wickets\")\naxes[1].set_xlabel(\"# of Wickets\")\nplt.tight_layout()","8011b85d":"grid = sns.catplot(data=matchscores[(matchscores[\"batting_team\"] == 'MI') | (matchscores[\"batting_team\"] == 'RCB') |\n                                    (matchscores[\"batting_team\"] == \"SRH\") | (matchscores[\"batting_team\"] == \"CSK\")],\n                   x='wicket', kind='count', col='batting_team', col_wrap=2)\nfor ax in grid.axes:\n    ax.tick_params(labelleft=True, labelbottom=True)\n    ax.set( xlabel='# of Wickets')\nplt.tight_layout()","5c015595":"fig = sns.displot(data=matchscores, x='total_runs', kind='hist', bins=25, aspect=2)\nplt.tight_layout()","cad27108":"fig = sns.displot(data=matches, x='win_by_runs', kind='hist', bins=18, aspect=2)","58958cfd":"overs = ['first', 'second', 'third', 'fourth', 'fifth', 'sixth', 'seventh', 'eighth', 'ninth', 'tenth', 'eleventh',\n         'twelfth', 'thirteenth', 'fourteenth', 'fifteenth', 'sixteenth', 'seventeenth', 'eighteenth', 'nineteenth',\n         'twentieth']\nfig = sns.catplot(data=deliveries.groupby(['match_id', 'innings', 'over']).agg(np.sum).reset_index().groupby('over')\n                .agg(np.mean).reset_index(), x='over', y='total_runs', aspect=2, kind='bar', order=overs, height=6.5)\nfig.set_xticklabels(rotation=30, horizontalalignment='right')\nfig.set(ylabel='Average Run Rate', xlabel='Over')\nplt.tight_layout()","951d6450":"fig3 = sns.catplot(data=deliveries.groupby('over').agg(np.sum).reset_index(), kind='bar', x='over', y='wicket',\n                   aspect=2, order=overs, height=6.5)\nfig3.set_xticklabels(rotation=30, horizontalalignment='right')\nfig3.set(ylabel='Total # of Wickets', xlabel='Over')\nplt.tight_layout()","0c092a74":"ages = match_points.groupby('matchday_player_age').agg(np.sum).reset_index()\nages['matchday_player_age'] = ages['matchday_player_age'].astype(int)\nsns.set_context(\"notebook\")\nfig = sns.catplot(data=ages, x='matchday_player_age',\n                  y='total_points', kind='bar', aspect=2)\nfig.set_xticklabels(rotation=30, horizontalalignment='right')\nplt.tight_layout()","cca969d3":"# preparing batsman wise data and overwise data for analysis with boundaries\n\ndeliveries_boundaries = deliveries[(deliveries['non_boundary'] == 0) & ((deliveries['batsman_runs'] == 4) |\n                                                                        (deliveries['batsman_runs'] == 6))]\ndeliveries_boundaries.drop(['delivery', 'non_striker', 'wides', 'legbyes', 'noballs', 'byes', 'penalty', 'non_boundary',\n                            'extra_runs', 'total_runs', 'wicket', 'player_out', 'kind_of_dismissal', 'fielders'],\n                           axis=1, inplace=True)\ndeliveries_boundaries['fours'] = np.where(deliveries_boundaries['batsman_runs'] == 4, 1, 0)\ndeliveries_boundaries['sixes'] = np.where(deliveries_boundaries['batsman_runs'] == 6, 1, 0)\n\nover_boundaries = deliveries_boundaries.groupby('over').agg(np.sum).reset_index().drop(['match_id'], axis=1)","f4dd24f4":"sns.set_context(\"talk\")\nfig = sns.catplot(data=over_boundaries, kind='bar', x='over', y='fours', order=overs, aspect=2)\nfig.set_xticklabels(rotation=30, horizontalalignment='right')\nplt.tight_layout()","299203f9":"fig = sns.catplot(data=over_boundaries, kind='bar', x='over', y='sixes', order=overs, aspect=2)\nfig.set_xticklabels(rotation=30, horizontalalignment='right')\nplt.tight_layout()","1981f95b":"over_boundaries = deliveries_boundaries.groupby(['match_id', 'innings', 'batting_team', 'bowling_team', 'over', 'striker', 'bowler']).agg(np.sum).reset_index()\nMSD = over_boundaries[over_boundaries['striker'] == 'MS Dhoni'].groupby('over').agg(np.sum).reset_index()\n\nfig = sns.catplot(data=MSD, kind='bar', x='over', y='batsman_runs', order=overs, aspect=2, color='yellow', height=7)\nfig.set_xticklabels(rotation=30, horizontalalignment='right')\nfig.set(ylabel='Total Runs scored by MSD in Boundaries', xlabel='Over')\nplt.tight_layout()","b73f9e55":"What a beautiful near Normal Distribution! IPL has seen peak performance and most contribution from players when aged around 26-27 years.\n\nThe above visualization took a little extra bit of effort on account of having to hunt for player DOBs and matching the names of players in the newly scraped data with the names of players in the existing data being used from another source.","5d698e33":"**Does the above distribution hold true for both the first and second innings individually?**","b403c684":"More often than not, it is the batsmen who get the foremost attention in T20 cricket, but here we shall start off with a few bowling stats.","c4412369":"# Distribution of runs scored in an inning:\n","74e2e3ab":"Just like average Run Rate, the fall of wickets too takes a slight halt right after the end of powerplay overs and then rises steadily as the innings draws to a close with the death overs having seen the fall of lots of wickets.","cfdda77d":"In the following visualizations we shall see how things unravel when the data is seen over-wise.","7758fb42":"This graph shows why MSD is considered to be one of the most dangerous Finishers. The increase in the number of runs he scores in boundaries towards the end of the innings is *almost* exponential!\n\nAs an opponent you just do not want MSD at the crease during the final overs.","9f3c01e7":"# The relation between a Player's age and his contributions:","15341333":"# Over-wise average Run Rate:","44a84a88":"# A brief Visual Journey into the Cricketing World of **IPL**","6f8f6fc7":"As expected, the flow of runs slows down after the end of PowerPlay overs and then again picks up steadily until the end of the innings with the overs 16 through 20 seeing the highest average Run Rates.","ea8f99b3":"Correlation surely does not always imply causation, but looking at the above two graphs of Overwise Average Runs scored and Overwise-Wickets fallen we can claim that Higher Run Rates has been causing higher number of Wickets to fall. Batsmen looking to score faster by taking extra risk create extra chances of wicket falling.","9cf172c7":"# The Importance and Impact of Boundaries:","c8b4f941":"For the sake of keeping the comparison concise, let us consider only Four teams.","3b2ab079":"Sure, the batsmen send a few out of the park in Powerplay overs but the real flurry of Sixes takes place during the death overs of the innings where batsmen want to give a big push to the team total. This is also due to the fact that batsmen wouldn't mind risk losing their wicket by taking the aerial route since the innings is coming to a close anyway. This may explain why we see more Sixes than Fours during death overs.","fdb61666":"# Number of Sixes hit, Over-wise:","1d0fb7c2":"# **Kinds of dismissals:**","b11e0e34":"The following graph plots the total number of runs scored by MS Dhoni in *just* boundaries alone in each over.","b24b0cdb":"# Distribution of the total number of wickets falling in an inning:","452df89a":"# Distribution of the number of wickets falling in an inning (Team-wise):","451cf44d":"Teams chasing often falter within 20 runs from the target score.","55863a2e":"Boundaries seem to be the cynosure of all eyes in the T20 format. Big Hits and Big Hitters are clear crowd favourites. More than 55% of all runs scored in the tournament have come via boundaries. Boundaries move the scoreboard at a faster pace and put real extra pressure on the bowler and on the bowling team causing an upset in their strategies.","43ec9364":"**Moving on now to some stats regarding runs scored,**","1934c9b1":"The histogram of Inning totals is centred around about 160 with the bulk of the totals between 130 to 170.","91cbe3df":"# Number of Fours hit, Over-wise:","857f06a7":"Catches win Matches and catches definitely send a lot of batsmen back to the pavilion. Getting a batsman out caught is by a big margin the most common kind of dismissal.","9054e141":"# Over-wise falling of Wickets:","7dfaf93f":"Powerplay overs are where most of the Fours of the innings have been hit.","d7e47304":"Regarding 1st innings, we may claim that it is likely that a total of 4 to 8 wickets would fall. Regarding 2nd innings, while teams are chasing, a total of just 0 or 1 wicket falling is rare while the distribution is fairly uniform for the remaining counts of total wickets.","d26fa96e":"These graphs may explain why CSK and MI are so successful. They just don't lose too many wickets that often. Their batsmen usually finish the job and don't leave it for the tail-enders.","8fe46aea":"# **It is now time to** *Finish it off in Style* ;)","8462b4de":"**Note:** The data used in above visualization includes player contribution in all aspects i.e. points have been assigned to Runs scored, Wickets taken and other contributions on the Field as per Fantasy Cricket norms.","f818c019":"These graphs also show that chasing teams get all-out more often than the teams setting the target. Could it be the nerves getting to them while chasing targets?","f8aae4b2":"# How many runs do teams usually win by: ","3ba2f402":"If you are one of those people who are into fantasy cricket team building, this graph may tell you that bowlers who bowl at the beginning and then at the death overs have the most chances of bringing you points by getting wickets.","497eb1c9":"An innings ending with just 0 or 1 wicket falling is quite rare."}}