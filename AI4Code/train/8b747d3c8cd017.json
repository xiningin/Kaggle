{"cell_type":{"c5022ac3":"code","cbd62745":"code","444df576":"code","4e409844":"code","e5faa27d":"code","69a25c06":"code","0a1f6177":"code","8a4f7763":"code","82de1528":"code","9def49a0":"code","019021b5":"code","5841fe22":"code","0547596f":"code","bff84f9d":"code","2eaa1a51":"code","23036e73":"code","33d213c5":"code","8642dfe5":"code","38b8ea3b":"code","a6716cc6":"code","bc068094":"code","5be7cfb2":"code","89b218e8":"code","d4472d7d":"code","70d20f68":"code","e27ce080":"markdown","c3fded8e":"markdown","063136fb":"markdown","9d627e6a":"markdown","683abce0":"markdown","4a822a3c":"markdown","30f06db4":"markdown","38291234":"markdown","bd5ad220":"markdown","83bd8b09":"markdown","6d49e528":"markdown","d5400de0":"markdown","384d993d":"markdown","e1b4cb77":"markdown"},"source":{"c5022ac3":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","cbd62745":"import matplotlib.pyplot as plt  \nimport matplotlib.image as mpimg  \n#fig = plt.figure(figsize=(5.5,3),dpi=300)\n\nplt.rcParams['figure.figsize'] = (15, 8)\nmap_pic = mpimg.imread('\/kaggle\/input\/mapreal-estate\/Map-real estate.PNG')\nplt.axis('off')\nplt.title('Map - Chosen 10 Cities')\nplt.imshow(map_pic)\nplt.show()","444df576":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\nimport seaborn as sns\nimport datetime as dt","4e409844":"#df = pd.read_csv('C:\/Users\/Hester\/MACHINE LEARNING\/Real Estate Project\/clean_10cities.csv')\ndf = pd.read_csv('\/kaggle\/input\/clean-10cities\/clean_10cities.csv')\ndf","e5faa27d":"df_Maison = df.loc[df[\"House_Type\"] == \"Maison\"]\ndf_Maison","69a25c06":"jet= plt.get_cmap('jet')\ncolors = iter(jet(np.linspace(0,1,12)))\n \ndef correlation_plot(df,variables, n_rows, n_cols):\n    fig = plt.figure(figsize=(24,27))\n    #fig = plt.figure(figsize=(14,9))\n    for i, var in enumerate(variables):\n        ax = fig.add_subplot(n_rows,n_cols,i+1)\n        asset = df.loc[:,var]\n        ax.scatter(df[\"Price\"], asset, c = next(colors))\n        ax.set_xlabel(\"Price\")\n        ax.set_ylabel(\"{}\".format(var))\n        ax.set_title(var +\" vs Price\")\n    fig.tight_layout() \n    plt.show()\n        \n# Take the name of the last 6 columns of the SPY_data which are the model features\nvariables = df_Maison[['Number_of_Rooms','House_Inside_Area','Population','Population_Density(km2)','Altitude_min(m)',\n                'Avg_Temperature','Number_of_Schools','Number_of_Hospital','Region_Area(km2)','Precipitation',\n                'Avg_Monthly_Salary','Avg_Age']] \n \ncorrelation_plot(df_Maison,variables,4,3)","0a1f6177":"features = df_Maison.columns[-12:]\ndf_Maison.corr(method='pearson')['Price'].loc[features]","8a4f7763":"features = df_Maison.columns[-12:]\ndf.corr(method='kendall')['Price'].loc[features]","82de1528":"from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error, r2_score","9def49a0":"X_NRooms=np.array(df_Maison['Number_of_Rooms']).reshape(-1,1)\nX_InsideArea=np.array(df_Maison['House_Inside_Area']).reshape(-1,1)\nX_PopDensity=np.array(df_Maison['Population_Density(km2)']).reshape(-1,1)\nX_Region_Area=np.array(df_Maison['Region_Area(km2)']).reshape(-1,1)\n#X_AvgSalary=np.array(df_Maison['Avg_Monthly_Salary']).reshape(-1,1)\n#X_AvgAge=np.array(df_Maison['Avg_Age']).reshape(-1,1)\nnew_y=np.array(df_Maison['Price']).reshape(-1,1)\n#new_X=np.concatenate((X_NRooms,X_InsideArea,X_PopDensity, X_Region_Area, X_AvgSalary, X_AvgAge),axis=1)\nnew_X=np.concatenate((X_NRooms,X_InsideArea,X_PopDensity, X_Region_Area),axis=1)\n\n\nX_train_new, X_test_new, y_train_new, y_test_new = train_test_split(new_X, new_y, test_size=0.25, random_state=15)\n\nregr_Price_new = LinearRegression().fit(X_train_new,y_train_new)\n\nregr_Price_pred_new = regr_Price_new.predict(X_test_new)\n\n# The mean squared error\nprint('sqrt(Mean squared error): %.2f'\n      % np.sqrt(mean_squared_error(y_test_new, regr_Price_pred_new)))\n\n# The coefficient of determination: 1 is perfect prediction\nprint('Coefficient of determination: %.2f'\n      % r2_score(y_test_new, regr_Price_pred_new))","019021b5":"test = pd.read_csv('\/kaggle\/input\/testdata-1\/TestData.csv').dropna(axis=0)","5841fe22":"test_Maison = test.loc[test[\"House_Type \"] == \"Maison\"]","0547596f":"X_NRooms=np.array(test_Maison['Number_of_Rooms']).reshape(-1,1)\nX_InsideArea=np.array(test_Maison['House_Inside_Area']).reshape(-1,1)\nX_PopDensity=np.array(test_Maison['Population_Density(km2)']).reshape(-1,1)\nX_Region_Area=np.array(test_Maison['Region_Area(km2)']).reshape(-1,1)\n#X_AvgSalary=np.array(test_Maison['Avg_Monthly_Salary']).reshape(-1,1)\n#X_AvgAge=np.array(test_Maison['Avg_Age']).reshape(-1,1)\ntest_y=np.array(test_Maison['Price']).reshape(-1,1)\ntest_X=np.concatenate((X_NRooms,X_InsideArea,X_PopDensity,X_Region_Area),axis=1)","bff84f9d":"regr_Price_pred_test=regr_Price_new.predict(test_X) ","2eaa1a51":"print('sqrt(Mean squared error): %.2f'\n      % np.sqrt(mean_squared_error(test_y, regr_Price_pred_test)))\nprint('Coefficient of determination: %.2f'\n      % r2_score(test_y, regr_Price_pred_test))","23036e73":"df_Appartement = df.loc[df['House_Type'] =='Appartement']\ndf_Appartement","33d213c5":"jet= plt.get_cmap('jet')\ncolors = iter(jet(np.linspace(0,1,12)))\n \ndef correlation_plot(df,variables, n_rows, n_cols):\n    fig = plt.figure(figsize=(24,27))\n    #fig = plt.figure(figsize=(14,9))\n    for i, var in enumerate(variables):\n        ax = fig.add_subplot(n_rows,n_cols,i+1)\n        asset = df.loc[:,var]\n        ax.scatter(df[\"Price\"], asset, c = next(colors))\n        ax.set_xlabel(\"Price\")\n        ax.set_ylabel(\"{}\".format(var))\n        ax.set_title(var +\" vs Price\")\n    fig.tight_layout() \n    plt.show()\n        \n# Take the name of the last 6 columns of the SPY_data which are the model features\nvariables = df_Appartement[['Number_of_Rooms','House_Inside_Area','Population','Population_Density(km2)','Altitude_min(m)',\n                'Avg_Temperature','Number_of_Schools','Number_of_Hospital','Region_Area(km2)','Precipitation',\n                'Avg_Monthly_Salary','Avg_Age']] \n \ncorrelation_plot(df_Appartement,variables,4,3)","8642dfe5":"features = df_Appartement.columns[-12:]\ndf_Appartement.corr(method='pearson')['Price'].loc[features]","38b8ea3b":"features = df_Appartement.columns[-12:]\ndf_Appartement.corr(method='kendall')['Price'].loc[features]","a6716cc6":"from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error, r2_score","bc068094":"X_NRooms=np.array(df_Appartement['Number_of_Rooms']).reshape(-1,1)\nX_InsideArea=np.array(df_Appartement['House_Inside_Area']).reshape(-1,1)\nX_Pop=np.array(df_Appartement['Population']).reshape(-1,1)\nX_PopDensity=np.array(df_Appartement['Population_Density(km2)']).reshape(-1,1)\nX_NSchools=np.array(df_Appartement['Number_of_Schools']).reshape(-1,1)\nX_NHospital=np.array(df_Appartement['Number_of_Hospital']).reshape(-1,1)\nX_RegionArea=np.array(df_Appartement['Region_Area(km2)']).reshape(-1,1)\n#X_AvgSalary=np.array(df_Appartement['Avg_Monthly_Salary']).reshape(-1,1)\n\nnew_y=np.array(df_Appartement['Price']).reshape(-1,1)\nnew_X=np.concatenate((X_NRooms,X_InsideArea,X_Pop,X_PopDensity,X_NSchools,X_NHospital,X_RegionArea),axis=1)\n\n\n\nX_train_new, X_test_new, y_train_new, y_test_new = train_test_split(new_X, new_y, test_size=0.25, random_state=15)\n\nregr_Price_new = LinearRegression().fit(X_train_new,y_train_new)\n\nregr_Price_pred_new = regr_Price_new.predict(X_test_new)\n\n# The mean squared error\nprint('sqrt(Mean squared error): %.2f'\n      % np.sqrt(mean_squared_error(y_test_new, regr_Price_pred_new)))\n\n# The coefficient of determination: 1 is perfect prediction\nprint('Coefficient of determination: %.2f'\n      % r2_score(y_test_new, regr_Price_pred_new))","5be7cfb2":"test_Apartment = test.loc[test[\"House_Type \"] == \"Appartement\"]","89b218e8":"X_NRooms=np.array(test_Apartment['Number_of_Rooms']).reshape(-1,1)\nX_InsideArea=np.array(test_Apartment['House_Inside_Area']).reshape(-1,1)\nX_Pop=np.array(test_Apartment['Population']).reshape(-1,1)\nX_PopDensity=np.array(test_Apartment['Population_Density(km2)']).reshape(-1,1)\nX_NSchools=np.array(test_Apartment['Number_of_Schools']).reshape(-1,1)\nX_NHospital=np.array(test_Apartment['Number_of_Hospital']).reshape(-1,1)\nX_RegionArea=np.array(test_Apartment['Region_Area(km2)']).reshape(-1,1)\n#X_AvgSalary=np.array(test_Apartment['Avg_Monthly_Salary']).reshape(-1,1)\n\ntest_y=np.array(test_Apartment['Price']).reshape(-1,1)\ntest_X=np.concatenate((X_NRooms,X_InsideArea,X_Pop,X_PopDensity,X_NSchools,X_NHospital,X_RegionArea),axis=1)","d4472d7d":"regr_Price_pred_test = regr_Price_new.predict(test_X) ","70d20f68":"print('sqrt(Mean squared error): %.2f'\n      % np.sqrt(mean_squared_error(test_y, regr_Price_pred_test)))\nprint('Coefficient of determination: %.2f'\n      % r2_score(test_y, regr_Price_pred_test))","e27ce080":"#### Columns:\n`Identifiant`:identification number for each house  \n`City`: city\n`Post_Code`: post code for the city  \n`Address`: specific house address in the city  \n`Sales_Date`: date the house was sold  \n`House_Type`: house type (maison, appartement)  \n`Price`: price of specific house   \n`Number of rooms`: room number inside the house  \n`House Inside Area`:inside area of the house  \n`Population`: population of the city   \n`Population_Density(km2)`:population density of the city  \n`Altitude_min(m)`: minimum altitude of the city  \n`Avg_Temperature`: annual average temperature of the city  \n`Number_of_Schools`: number of schools in the city  \n`Number_of_Hospital`: number of hospitals in the city  \n`Region_Area(km2)`: area of the city  \n`Precipitation`: annual average precipitation of the city  \n`Avg_Monthly_Salary`: monthly average salary in the city  \n`Avg_Age`: average age of the citizens\n\n####  12 Factors for analysis:\n`Number of rooms`,`House Inside Area`, `Population`,`Population_Density(km2)`, `Altitude_min(m)`,`Avg_Temperature`,  \n`Number_of_Schools`, `Number_of_Hospital`,`Region_Area(km2)`, `Precipitation`, `Avg_Monthly_Salary`,`Avg_Age`\n\n#### External sources:\nhttps:\/\/www.journaldesfemmes.fr\/maman\/ecole\/montauban\/ville-82121  \nhttps:\/\/ugeo.urbistat.com\/AdminStat\/en\/fr\/search?q=montauban  \nhttp:\/\/www.journaldunet.com\/business\/salaire\/angers\/ville-49007  \nhttps:\/\/demarchesadministratives.fr\/hopital\/huez-38750  \nhttps:\/\/en.climate-data.org\/search\/?q=Montauban","c3fded8e":"### Result\n\nThe goodness of fit is `between (0.1 to 1)` and our coefficient of determination is `0.46`, this shows that 46% of our dataset fits properly into this regression model.","063136fb":"## Correlation study via Pearson & Kendall Tau Method\n\nFrom the graph above and correlation computation below, most of our factors have a low correlation, this doesn't mean they are bad or useless but it means they are dependant of themselves. However, for our training model, we decided to use factors that have a correlation `>= 0.1` and `<=-0.1`, in other to predict with higher relevancy.","9d627e6a":"## General Steps\nStep1: Split dataset into 2 seperation by House Type\n\n### Sub-dataset 1: df_Maison\nStep2: Correlation study via charts and Pearson & Kendall Tau Method  \nStep3: Multiple-Linear Regression model  \nStep4: Test prediction accuracy \n\n### Sub-dataset 2: df_Appartement  \nStep2: Correlation study via charts and Pearson & Kendall Tau Method  \nStep3: Multiple-Linear Regression model  \nStep4: Test prediction accuracy ","683abce0":"## Multiple-Linear prediction model \nWe use Multiple-Linear model to make the prediction with input of the 8 following relevant features to \"Price\", as respectively `x` and `y` values.\n\n#### x values:\n`Number_of_Rooms`  \n`House_Inside_Area`  \n`Population`  \n`Population_Density(km2)`  \n`Number_of_Schools`   \n`Number_of_Hospital`  \n`Region_Area(km2)`   \n\n#### y values:  \n`Price`","4a822a3c":"## Multiple-Linear prediction model \nWe use Multiple-Linear model to make the prediction with input of the 5 following relevant features to \"Price\", as respectively `x` and `y` values.\n\n#### x values: \n`Number_of_Rooms`  \n`House_Inside_Area`  \n`Population_Density(km2)`  \n`Region_Area(km2)`  \n\n#### y values:  \n`Price`","30f06db4":"### Correlation study via charts\nThe correlation bewteen `Price`of Maison dataset and the `12 features` mentioned above are each analyzed and labeled in diverse color in data visualizaion form with the help of jet map. \n\nAs we can see in from the charts below, the most relevant feature could be `House_Inside_Area`, However, the more accurate judgement are necesary for further prediction. Therefore, the Correlation study methods `Pearson` & `Kendall Tau` are refered to identify the most related features to `Price`.","38291234":"## French Real Estate Price Prediction\n\n#### Team: Huimin, Wuqian, Amy, Tosin\n\nOur project with topic of 'Real Estate in France' is about creating a model that can predict the price of a house or an appartment in any French city by using Multiple-Linear Regression Model. \n\nThe training dataset derived from \"https:\/\/limmo-dvf.com\/prix-immobilier\" provides us with necessary but limited variables for machine learning training model. Hence we refered to some external dataset from other sources as below for sufficient factors analysis.   \nAfter data collection, data cleansing and data integration, the final dataset contains 19 columns across 10 cities, including last 12 features to analyze their relationship with `Price`. Although these 12 features are able to influence French house price, the most relevant ones strongly impacting `Price` are not clear enough. A major step in this model creation is to select the right variables that affects the price of an appartment or a house. \n\n\n#### 10 Cities:\n`Big Cities(more than 100k people)`: Angers, Nancy, Rouen  \n`Medium Cities(10k people)`: Beausoleil, Libourne,Cachan,Montauban  \n`Small Cities(1k people)`: Huez, Avallon, Loches","bd5ad220":"# Test Data\n","83bd8b09":"## Split dataset into 2 seperation by House Type\nIn order to have a better prediction, we decided to split our training dataset into 2 sub-datasets for both houses (Maison) and apartments,they are `df_Maison`, `df_Appartement`.\n\n\n## Sub-dataset 1: df_Maison","6d49e528":"## Correlation study via Pearson & Kendall Tau Method\n\nFrom the graph above and correlation computation below, most of our factors have a low correlation, this doesn't mean they are bad or useless but it means they are dependant of themselves. However, for our training model, we decided to use factors that have a correlation `>= 0.1` and `<=-0.1`, in other to predict with higher relevancy.","d5400de0":"# Test Data","384d993d":"### Conclusion\nThe relevant features influencing price of French house vary from house types, some of them are common, others are unique depending on the each certain house type as below.\n\n#### Features relevant to ` Maison` Price:\n`Number_of_Rooms`, `House_Inside_Area`, `Population_Density(km2)`, `Region_Area(km2)`\n\n#### Features relevant to ` Appartement` Price:\n`Number_of_Rooms`, `House_Inside_Area`, `Population`,` Population_Density(km2)`, `Number_of_Schools`,  \n`Number_of_Hospital`, `Region_Area(km2)`\n\n\nThese models can be applied to predict the price of an appartment or house in France, also because our dataset comprises of big, medium and small cities in france, it's still able to give a balanced prediction when tested on any other dataset.\n\nFurthermore, the final prediction accuracy strongly rely on the data richness, size, segmentation and other factors of data source impacting the model prediction performance, so not all french house price prediction with different data source selection are turn out the same values. This is the fact we need to understand.","e1b4cb77":"\n\n\n## -------------------------------------------------------------------------------------------------------------------------------\n\n## Sub-dataset 1: df_Appartement\n### Correlation study via charts\nThe correlation bewteen `Price`of Maison dataset and the `12 features` mentioned above are each analyzed and labeled in diverse color in data visualizaion form with the help pf jet map. \n\nAs we can see in from the charts below, the most relevant feature could be `House_Inside_Area`, However, the more accurate judgement are necesary for further prediction. Therefore, the Correlation study methods `Pearson` & `Kendall Tau` are refered to identify the most related features to `Price`."}}