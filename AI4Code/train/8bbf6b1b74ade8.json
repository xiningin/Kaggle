{"cell_type":{"da391660":"code","a2b594c5":"code","e65dfd51":"code","c8e76e57":"code","775781e0":"code","4f5aa6b6":"code","21a94813":"code","3cbf135a":"code","8178cd76":"code","b539c2f6":"code","15822094":"code","caba3ce0":"code","90d2d343":"code","2d6d456d":"code","6c071ab6":"markdown","2e5dbf9e":"markdown","5c9e6953":"markdown","897f9726":"markdown","c1ae7257":"markdown","0180fc00":"markdown"},"source":{"da391660":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom wordcloud import WordCloud, STOPWORDS, ImageColorGenerator\n\nplt.rcParams['figure.figsize'] = 16, 6\n\nData = pd.read_csv('..\/input\/groceries-dataset\/Groceries_dataset.csv')\nData","a2b594c5":"Data.nunique()","e65dfd51":"Data['Date'] = pd.to_datetime(Data['Date'])\nData['Year'] = Data['Date'].apply(lambda x : x.year)\nData['Month'] = Data['Date'].apply(lambda x : x.month)\nData['Day'] = Data['Date'].apply(lambda x : x.dayofweek)\nDaysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\nMonthsOfYear = ['January', 'Febraury', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'Octuber', 'November', 'December']","c8e76e57":"\nf, ax = plt.subplots(1,2,figsize=(30, 6))\n\nFrame = pd.DataFrame(DaysOfWeek)\nCompras = []\nfor index, day in enumerate(DaysOfWeek):\n    Filter = Data[Data['Day'] == index]\n    Compras.append(len(Filter))\n\nFrame[1] = Compras\nFrame = Frame.sort_values(by = 1,ascending=False)\n\nPlot = sns.barplot(x = Frame[0], y = Frame[1], palette='cool', ax=ax[0])\nPlot.set_xlabel('Days of week', fontsize=20)\nPlot.set_ylabel('Numero de compras', fontsize=20)\nPlot.set_title('Distribucion de compras en los dias de la semana', fontsize=30)\n\nFrame = pd.DataFrame(MonthsOfYear)\nCompras = []\nfor index, Month in enumerate(MonthsOfYear):\n    Filter = Data[Data['Month'] == index+1]\n    Compras.append(len(Filter))\n\nFrame[1] = Compras\nFrame = Frame.sort_values(by = 1,ascending=False)\n\nPlot2 = sns.barplot(x = Frame[0], y = Frame[1], palette='rocket', ax=ax[1])\nPlot2.set_xlabel('Meses', fontsize=20)\nPlot2.set_ylabel('Numero de compras', fontsize=20)\nPlot2.set_title('Distribucion de compras en los meses de a\u00f1o', fontsize=30)\n","775781e0":"#Comportamiento de compras en los dos a\u00f1os\nFrame = Data[Data['Year'] == 2015].Month.value_counts().sort_index(ascending=True)\nplt.plot(Frame, c='green', ls='--', marker = 'd', ms=7, label='2015')\n\nFrame = Data[Data['Year'] == 2014].Month.value_counts().sort_index(ascending=True)\nplt.plot(Frame, c='orange', ls='-', marker = 'd', ms=7, label='2014')\n\nplt.legend(loc='best', bbox_to_anchor=(1,1))\nplt.xticks(list(range(1,13)), MonthsOfYear)\nplt.title('Comportamiento de compras de los dos a\u00f1os \/ meses', fontsize=30)\nplt.show()","4f5aa6b6":"Frame = Data[Data['Year'] == 2015].Day.value_counts().sort_index(ascending=True)\nplt.plot(Frame, c='blue', ls='-', marker = '*', ms=10, label='2015')\n\nFrame = Data[Data['Year'] == 2014].Day.value_counts().sort_index(ascending=True)\nplt.plot(Frame, c='lightblue', ls='--', marker = 'o', ms=10, label='2014')\n\nplt.legend(loc='best', bbox_to_anchor=(1,1))\nplt.xticks(list(range(0,7)), DaysOfWeek)\nplt.title('Comportamiento de compras de los dos a\u00f1os \/ semana', fontsize=30)\nplt.show()","21a94813":"#Productos destacados y menos populares\nf, ax = plt.subplots(3,2,figsize=(30, 18))\n\ndef BarPlot(x, y, ax, title, palette):\n    Plot = sns.barplot(x = x, y= y, ax=ax, palette=palette)\n    Plot.set_title(title, fontsize=30)\n    Plot.set_xticklabels(Plot.get_xticklabels(), rotation=20, fontsize=15)\n\nFrame = Data['itemDescription'].value_counts().sort_values(ascending = False)[:10]\nBarPlot(Frame.index, Frame.values, ax[0,0], '10 productos mas populares', 'plasma')\n\nFrame = Data['itemDescription'].value_counts().sort_values(ascending = True)[:10]\nBarPlot(Frame.index, Frame.values, ax[0,1], '10 productos menos populares', 'rainbow_r')\n\nFrame = Data[(Data['Day'] == 3)]\nFrame = Frame['itemDescription'].value_counts().sort_values(ascending=False)[:8]\nBarPlot(Frame.index, Frame.values, ax[1,0], 'Productos mas vendidos en jueves', 'Blues')\n\nFrame = Data[(Data['Day'] == 6) | (Data['Day'] == 5) | (Data['Day'] == 4)]\nFrame = Frame['itemDescription'].value_counts().sort_values(ascending=False)[:8]\nBarPlot(Frame.index, Frame.values, ax[1,1], 'Productos mas vendidos los fines de semana', 'Blues_r')\n\nFrame = Data[(Data['Month'] == 8)]\nFrame = Frame['itemDescription'].value_counts().sort_values(ascending=False)[:8]\nBarPlot(Frame.index, Frame.values, ax[2,0], 'Productos destacables de agosto', 'Accent')\n\nFrame = Data[(Data['Month'] == 12)]\nFrame = Frame['itemDescription'].value_counts().sort_values(ascending=False)[:8]\nBarPlot(Frame.index, Frame.values, ax[2,1], 'Productos destacables de diciembre', 'Wistia')\n\nf.tight_layout(pad=3.0)\nf.show()\n","3cbf135a":"## Gtrafico de palbras frecuentes\nText = ''\nfor index, value in enumerate(Data['itemDescription']):\n    Text += ' ' + value.replace(\" \", '')\nWc = WordCloud().generate(Text)\n\nplt.imshow(Wc, interpolation='bilinear')\nplt.axis(\"off\")\nplt.show()","8178cd76":"!pip install apyori\nfrom apyori import apriori\n\nOneHot = pd.get_dummies(Data['itemDescription'])\nAprioriData = pd.DataFrame(Data)\nAprioriData.drop(['itemDescription'], inplace=True, axis=1)\nAprioriData = AprioriData.join(OneHot)\n\nProducts = Data.itemDescription.unique()\nAprioriData = AprioriData.groupby(['Member_number', 'Date'])[Products[:]].sum()\nAprioriData = AprioriData.reset_index()\nAprioriData.head()","b539c2f6":"AprioriData = AprioriData.drop(['Member_number', 'Date'], axis=1)","15822094":"AprioriData.head()","caba3ce0":"def Names(x):\n    for Product in Products:\n        if x[Product] != 0:\n            x[Product] = Product\n    return x\n\nAprioriData = AprioriData.apply(Names, axis=1)\nAprioriData.head()","90d2d343":"AprioriArray = AprioriData.values\nTransactions = []\n\nfor i in range(AprioriArray.shape[0]):\n    x = []\n    for j in range(AprioriArray.shape[1]):\n        if AprioriArray[i,j] != 0:\n            x.append(AprioriArray[i,j])\n    Transactions.append(x)\n\nTransactions[0:10]","2d6d456d":"#Modelo apriori\nRules = apriori(\n    transactions = Transactions,\n    min_support = 0.0003,\n    min_confidence = 0.05,\n    min_lift = 3,\n    min_length = 2,\n)\n\nAssociationRules = list(Rules)\n\nfor item in AssociationRules:\n\n    par = item[0] \n    items = [x for x in par]\n    print(\"Regla:       \" + items[0] + \" -> \" + items[1])\n    print(\"Soporte:     \" + str(item[1]))\n    print(\"Confianza:   \" + str(item[2][0][2]))\n    print(\"Mejora lift: \" + str(item[2][0][3]))\n    print(\"***************************************************\")","6c071ab6":"# An\u00e1lisis de compras: Groceries store\n## Este es un an\u00e1lisis de cesta de compras en una tienda a lo largo de 2 a\u00f1os, primero explorando los datos y encontrando los insights importantes\n## despu\u00e9s aplicando el algoritmo apriori para encontrar reglas de asociaci\u00f3n entre las compras de los productos y dar una respuesta de mercado.\n## Data recuperada de: <a href=\"https:\/\/www.kaggle.com\/heeraldedhia\/groceries-dataset\">Link<\/a>","2e5dbf9e":"# Preparaci\u00f3n de data para el modelo apriori","5c9e6953":"## El algoritmo nos arroja estas reglas, realmente no existe una destacable debido a los bajos valores de soporte.","897f9726":"# Exploraci\u00f3n de datos","c1ae7257":"## Por mucho, el producto m\u00e1s vendido es leche y vegetables, lo b\u00e1sico en alimentos. Existen productos como utensilios de cocina o productos de preservaci\u00f3n. El mercado verdaderamente importante para esta tienda son los productos de canasta b\u00e1sica y frescos: Frutas, vegetales, carnes, leche, entre otros. Lo idea es enfocarse en estos productos e implementar estrategias de venta en estos que la clientela busca.","0180fc00":"## Deduciendo r\u00e1pidamente, nos damos cuenta que la popularidad de la tienda en cuanto a ventas aumento a lo largo de un a\u00f1o, en 2015 el d\u00eda m\u00e1s popular o m\u00e1s frecuente por los clientes es el mi\u00e9rcoles mientras en 2014 es el jueves. claramente nos damos cuenta que los domingos tambi\u00e9n son d\u00edas muy populares, esto debido a que la mayor\u00eda de las personas descansan los fines de semana y aprovechan el tiempo para ir de compras. No tenemos suficiente informaci\u00f3n, pero deducir\u00eda que los mi\u00e9rcoles se colocan m\u00e1s ofertas y eso se refleja en las ventas."}}