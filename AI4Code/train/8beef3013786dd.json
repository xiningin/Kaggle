{"cell_type":{"1f4e5442":"code","40b4c5fd":"code","51c3ffad":"code","88dd6a94":"code","3bf68d06":"code","27b1f363":"code","f9651fd4":"code","547d4d3b":"code","b68c51c2":"code","e721b09a":"code","c1dcbc22":"code","37f6cd1f":"code","b089e512":"code","6eacb33d":"code","d1bfc3e8":"code","144dc11c":"markdown","f3edbbe7":"markdown","53f72a42":"markdown","4822b4ab":"markdown","d5c31e28":"markdown","0fa18fc0":"markdown","d7f0983c":"markdown","2dbfdb4f":"markdown"},"source":{"1f4e5442":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom scipy.stats import norm\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import cross_val_score, train_test_split\nfrom sklearn.linear_model import LinearRegression, RidgeCV, LassoCV, ElasticNetCV\nfrom sklearn.metrics import mean_squared_error, make_scorer\nfrom scipy import stats\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline\n","40b4c5fd":"train_source = pd.read_csv('..\/input\/titanic\/train.csv', index_col='PassengerId')\n\ntest_source = pd.read_csv('..\/input\/titanic\/test.csv', index_col='PassengerId')\n\n\n############################\n# Make new feature 'title' #\n############################\n\n# extract title from name\ntitle_list = train_source.Name.str.extract('([A-Za-z]+)\\.', expand=False)\ntrain_source['title'] = title_list\ntest_source['title'] = title_list\n\n# change some to Miss and Mrs\ntrain_source['title'] = train_source['title'].replace('Mlle','Miss')\ntrain_source['title'] = train_source['title'].replace('Ms','Miss')\ntrain_source['title'] = train_source['title'].replace('Mme','Mrs')\n\ntest_source['title'] = test_source['title'].replace('Mlle','Miss')\ntest_source['title'] = test_source['title'].replace('Ms','Miss')\ntest_source['title'] = test_source['title'].replace('Mme','Mrs')\n\n# combine title with small counts to 'Other'\nsmall_title = train_source.title.value_counts().index[train_source.title.value_counts() < 5]\n\ntrain_source['title'] = train_source['title'].replace(small_title,'Other')\ntest_source['title'] = test_source['title'].replace(small_title,'Other')\n\ntrain_source['title'] = train_source['title'].replace('Dr','Other')\ntest_source['title'] = test_source['title'].replace('Dr','Other')\n\n\ntrain = train_source\ntest = test_source\n\ntrain","51c3ffad":"# survival count\nsns.countplot(train_source.Survived)\nplt.title('Survival Count')\nplt.ylabel('Count')\nplt.show()","88dd6a94":"# count by gender\nsns.countplot(train.Sex)\nplt.title('Gender Count')\nplt.ylabel('Count')\nplt.show()","3bf68d06":"# survival count by gender\nsns.countplot(train.Survived, hue=train.Sex)\nplt.title('Survival count by gender')\nplt.ylabel('Count')\nplt.show()","27b1f363":"# survival count by title\nprint(pd.DataFrame(train_source[['title','Survived']].groupby('title').mean()))\n\nsns.countplot(train_source.Survived, hue = train_source.title)\nplt.show()","f9651fd4":"# survival count by embarked\nsns.countplot(train.Embarked, hue=train.Survived)\nplt.title('Survival count by city embarked')\nplt.ylabel('Count')\nplt.show()","547d4d3b":"# distribution of age\nsns.distplot(train.Age)\nplt.show()","b68c51c2":"# plot age vs survived\naa = sns.FacetGrid(train,col = 'Survived')\naa.map(plt.hist, 'Age', bins = 20)\nplt.show()","e721b09a":"# siblings count\nsns.countplot(train.SibSp)\nplt.title('Siblings Count')\nplt.show()\n#print(train.SibSp.value_counts())\n\n# surviveal by sibling count\nsns.countplot(train.Survived, hue=train.SibSp)\nplt.title('Survival by Sibling')\nplt.legend(loc='upper right')\nplt.show()","c1dcbc22":"# parent\/children count\nsns.countplot(train.Parch)\nplt.title('Par\/Ch Count')\nplt.show()\n#print(train.Parch.value_counts())\n\n# surviveal by parent\/children count\nsns.countplot(train.Survived, hue=train.Parch)\nplt.title('Survival by Par\/Ch')\nplt.legend(loc='upper right')\nplt.show()","37f6cd1f":"# by class\nsns.countplot(train.Pclass)\nplt.title('Count by class')\nplt.show()\n\nsns.countplot(train.Survived, hue = train.Pclass)\nplt.title('Survival Count by class')\nplt.show()","b089e512":"# age by class \/ survived\naa = sns.FacetGrid(train, col = 'Survived', row = 'Pclass')\naa.map(plt.hist, 'Age', bins = 20)\nplt.show()","6eacb33d":"# histogram for fare\nsns.distplot(train.Fare)\nplt.title('Distribution for Fare')\nplt.show()\n\n# scatterplot for fare and class\nsns.swarmplot(x=train.Pclass, y=train.Fare)\nplt.show()","d1bfc3e8":"corr = train.corr()\n\nplt.figure(figsize=(12,8))\nsns.heatmap(corr, annot=True, square=True)\n\nplt.show()","144dc11c":"# Title vs Survivability\n* After cleaning up the names, the titles of passengers were extracted, and their survival rate is calculated\n* 'Other' refer to titles that occured very few times\n* 'Miss' 'Mrs' 'Master' seemed to have a higher survival rate, this could be evidence of 'let women and children go first'\n* 'Rev' refers to 'Reverend', those are Christian clergy and ministers, and all of them gave their life","f3edbbe7":"# Correlation between variables\n* Class and Fare are negative correlated (this is expected)\n* Surviving is somewhat related to family size, fare, class, but not too obvious, further data cleaning is needed","53f72a42":"* Fare is highly skewed\n* Some tickets in class 1 are extremely high (>500)","4822b4ab":"* People embarked from ***Cherbourg*** \"seems\" to be have higher chance surviving","d5c31e28":"## Exploratory Analysis\n* In the training data, 'not survive' is majority\n* There are more male than female. But, out of people survived, there are ***twice more female than male***","0fa18fc0":"# Family size vs Survivability\n* If one has 0 siblings \/ parent\/ children, its ***less likely*** to survive\n* Around 1\/2 of passengers are 3rd class, 1\/4 each for 1st and 2nd class. Death is ***3 times higher for 3rd class, lower for 1st class, about same for 2nd class***.\n","d7f0983c":"* There are significantly more young people in Class 3, and majority of them did not survive\n* Further enchances the fact that surviving is related to class and age","2dbfdb4f":"# Age vs Survivability\n* Age of passengers are somewhat normally distributed (with a lot infants)\n* Survivability does vary with age.\n* There is more chance for ***infants (age = 0)*** to survive\n* Young people (around age 20) tend to not survive\n* A decent number of old people survived"}}