{"cell_type":{"832b5f9b":"code","32c57459":"code","4258469c":"code","71e33701":"code","a7d8e413":"code","acea6516":"code","c093a368":"code","2041245e":"code","6d97f1c2":"code","2059e733":"code","bdcb38b3":"code","e9120c85":"code","5cdda889":"code","67f9a63c":"code","8fccde09":"code","87978ee0":"code","8440c85f":"code","ff7e180f":"code","c194cce0":"code","a149aa4b":"code","15375752":"code","0314f35b":"code","e85b1351":"code","6f02bf9f":"code","a7208f57":"code","0bdae978":"markdown"},"source":{"832b5f9b":"!pip install pycaret","32c57459":"import pandas as pd\nimport numpy as np\nfrom pycaret.regression import *\nimport category_encoders as  ce\nfrom sklearn.preprocessing import normalize","4258469c":"df_train_X = pd.read_csv(\"..\/input\/epidemy\/dengue_features_train.csv\")\ndf_train_Y = pd.read_csv(\"..\/input\/epidemy\/dengue_labels_train.csv\")\ndf_test = pd.read_csv(\"..\/input\/epidemy\/dengue_features_test.csv\")\ndf_test_copy = df_test.copy()","71e33701":"df_train_X","a7d8e413":"df_train_X.isnull().sum()","acea6516":"for column in df_train_X.columns:\n    if df_train_X[column].isnull().sum()!=0:\n        print(df_train_X[column].describe(),\"\\n\\n\")","c093a368":"for column in df_train_X.columns:\n    if df_train_X[column].isnull().sum()!=0:\n        df_train_X[column].fillna(np.mean(df_train_X[column]),inplace=True)\n    else:\n        print(column)","2041245e":"df_train_X.isnull().sum()","6d97f1c2":"df_train = df_train_X.copy()\n","2059e733":"df_train_X","bdcb38b3":"def ordinal_encoding(df,col,mapping):\n    ordinal_encoder = ce.OrdinalEncoder(cols = [col],return_df = True,mapping = [{'col':col,'mapping':mapping}])\n    df_final = ordinal_encoder.fit_transform(df)\n    return df_final\n","e9120c85":"df_train = ordinal_encoding(df_train,\"city\",{\"sj\":0,\"iq\":1})\ndf_test = ordinal_encoding(df_test,\"city\",{\"sj\":0,\"iq\":1})","5cdda889":"df_train[[\"start_year\",\"start_month\",\"start_date\"]] = df_train[\"week_start_date\"].str.split(\"-\",n=3,expand =True)\ndf_train.drop([\"week_start_date\"],axis=1,inplace = True)\n","67f9a63c":"df_train","8fccde09":"for column in df_test.columns:\n    if df_test[column].isnull().sum()!=0:\n        df_test[column].fillna(np.mean(df_test[column]),inplace=True)\n    else:\n        print(column)","87978ee0":"df_test[[\"start_year\",\"start_month\",\"start_date\"]] = df_test[\"week_start_date\"].str.split(\"-\",n=3,expand =True)\ndf_test.drop([\"week_start_date\"],axis=1,inplace = True)","8440c85f":"set(df_train.columns)-set(df_test.columns)","ff7e180f":"\ndf_train_cleaned = normalize(df_train)\ndf_test_cleaned = normalize(df_test)\n\n\ndf_train = pd.DataFrame(df_train_cleaned,columns=df_train.columns)\ndf_train[\"total_cases\"] = df_train_Y[\"total_cases\"]\ndf_test = pd.DataFrame(df_test_cleaned,columns=df_test.columns)","c194cce0":"\nexperiment = setup(data = df_train,target = \"total_cases\")","a149aa4b":"compare_models()","15375752":"lightgbm = create_model(\"lightgbm\")","0314f35b":"y_pred = predict_model(lightgbm,data=df_test)","e85b1351":"def roundVal(val):\n    return abs(round(val))\ny_pred[\"total_cases\"] = y_pred[\"Label\"].apply(roundVal)","6f02bf9f":"y_pred[\"total_cases\"]","a7208f57":"submission = pd.DataFrame()\nsubmission[\"city\"] = df_test_copy[\"city\"]\nsubmission[\"year\"] = df_test_copy[\"year\"]\nsubmission[\"weekofyear\"] = df_test_copy[\"weekofyear\"]\nsubmission[\"total_cases\"] = y_pred[\"total_cases\"]\nsubmission.to_csv(\"submission.csv\",index= False)","0bdae978":"<a style='text-decoration:none;line-height:16px;display:flex;color:#5B5B62;padding:10px;justify-content:end;' href='https:\/\/deepnote.com?utm_source=created-in-deepnote-cell&projectId=4e2bbf11-90e3-4e16-b493-13ac00ad1f38' target=\"_blank\">\n<img alt='Created in deepnote.com' style='display:inline;max-height:16px;margin:0px;margin-right:7.5px;' src='data:image\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Hcm91cCAzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkxhbmRpbmciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMzUuMDAwMDAwLCAtNzkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjM1LjAwMDAwMCwgNzkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yMCIgZmlsbD0iIzAyNjVCNCIgcG9pbnRzPSIyLjM3NjIzNzYyIDgwIDM4LjA0NzY2NjcgODAgNTcuODIxNzgyMiA3My44MDU3NTkyIDU3LjgyMTc4MjIgMzIuNzU5MjczOSAzOS4xNDAyMjc4IDMxLjY4MzE2ODMiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNS4wMDc3MTgsODAgQzQyLjkwNjIwMDcsNzYuNDU0OTM1OCA0Ny41NjQ5MTY3LDcxLjU0MjI2NzEgNDguOTgzODY2LDY1LjI2MTk5MzkgQzUxLjExMjI4OTksNTUuODQxNTg0MiA0MS42NzcxNzk1LDQ5LjIxMjIyODQgMjUuNjIzOTg0Niw0OS4yMTIyMjg0IEMyNS40ODQ5Mjg5LDQ5LjEyNjg0NDggMjkuODI2MTI5Niw0My4yODM4MjQ4IDM4LjY0NzU4NjksMzEuNjgzMTY4MyBMNzIuODcxMjg3MSwzMi41NTQ0MjUgTDY1LjI4MDk3Myw2Ny42NzYzNDIxIEw1MS4xMTIyODk5LDc3LjM3NjE0NCBMMzUuMDA3NzE4LDgwIFoiIGlkPSJQYXRoLTIyIiBmaWxsPSIjMDAyODY4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzNy43MzA0NDA1IEwyNy4xMTQ1MzcsMC4yNTcxMTE0MzYgQzYyLjM3MTUxMjMsLTEuOTkwNzE3MDEgODAsMTAuNTAwMzkyNyA4MCwzNy43MzA0NDA1IEM4MCw2NC45NjA0ODgyIDY0Ljc3NjUwMzgsNzkuMDUwMzQxNCAzNC4zMjk1MTEzLDgwIEM0Ny4wNTUzNDg5LDc3LjU2NzA4MDggNTMuNDE4MjY3Nyw3MC4zMTM2MTAzIDUzLjQxODI2NzcsNTguMjM5NTg4NSBDNTMuNDE4MjY3Nyw0MC4xMjg1NTU3IDM2LjMwMzk1NDQsMzcuNzMwNDQwNSAyNS4yMjc0MTcsMzcuNzMwNDQwNSBDMTcuODQzMDU4NiwzNy43MzA0NDA1IDkuNDMzOTE5NjYsMzcuNzMwNDQwNSAwLDM3LjczMDQ0MDUgWiIgaWQ9IlBhdGgtMTkiIGZpbGw9IiMzNzkzRUYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+' > <\/img>\nCreated in <span style='font-weight:600;margin-left:4px;'>Deepnote<\/span><\/a>"}}