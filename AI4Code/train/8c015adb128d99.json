{"cell_type":{"e0411365":"code","f10280de":"code","e79573ec":"code","49ce5e0c":"code","b3dc8d1e":"code","9228ee01":"code","836ff41a":"code","a3ff3333":"code","754ce294":"code","82411bc1":"code","5040acee":"code","d86a3307":"code","bf465eff":"code","7775b06b":"code","8e9edb5c":"code","f746beec":"code","17c574c4":"code","d14318ce":"code","5d9b16e6":"code","ea201cd4":"code","e073c3aa":"code","c1d433d1":"code","773676d6":"code","6fbb20cc":"code","c3a56f5c":"code","87760e75":"markdown","27dab181":"markdown","e8d967f3":"markdown","a4b0bd51":"markdown","522639cb":"markdown","ad22ec30":"markdown","0571ed99":"markdown","8b40bd90":"markdown","91c55a5d":"markdown","e2e8d4b5":"markdown","be716ff8":"markdown","6ea266a3":"markdown","899ffb90":"markdown","236029f4":"markdown","cc75e398":"markdown","f40bb42a":"markdown","55b77b14":"markdown","ab933442":"markdown","cc1ea81a":"markdown","52151561":"markdown"},"source":{"e0411365":"import pandas as pd\n\nall_profs = pd.read_csv('..\/input\/all_profs.csv')","f10280de":"all_profs['overall_rating'] = all_profs['overall_rating'].apply(lambda x: float(x)) # transform\nall_profs = all_profs[['school', 'name'] + \n                      [col for col in all_profs if col not in ['school', 'name']]] # move things around","e79573ec":"all_profs[all_profs.school == 'Oregon State University']","49ce5e0c":"all_profs[all_profs.school == 'Oregon State University'].shape","b3dc8d1e":"all_profs[all_profs.school == 'Portland State University']","9228ee01":"all_profs[all_profs.school == 'Portland State University'].shape","836ff41a":"import plotly.graph_objects as go\nfig = go.Figure()\nfig.add_trace(go.Box(y = all_profs[all_profs.school == 'Oregon State University'].overall_rating,\n              name = 'Oregon State University'))\nfig.add_trace(go.Box(y = all_profs[all_profs.school == 'Portland State University'].overall_rating,\n              name = 'Portland State University'))\nfig.update_layout(title_text = 'Figure 1: Box Plots of Overall Ratings for Statistics Professors\/Instructors at OSU and PSU',\n                  yaxis_title_text = 'Overall Rating',\n                  showlegend = False)\nfig.show()","a3ff3333":"#histogram\nfig = go.Figure()\nfig.add_trace(go.Histogram(x = all_profs[all_profs.school == 'Oregon State University'].overall_rating,\n              name = 'Oregon State University',\n                           xbins = dict(size = 0.25)))\nfig.add_trace(go.Histogram(x = all_profs[all_profs.school == 'Portland State University'].overall_rating,\n              name = 'Portland State University',\n                           xbins = dict(size = 0.25)))\nfig.update_traces(opacity=0.75)\nfig.update_layout(title_text = 'Figure 2: Histogram of Overall Ratings', # title of plot\n                  xaxis_title_text = 'Overall Rating', # xaxis label\n                  yaxis_title_text = 'Count', # yaxis label\n                  bargap = 0.1, # gap between bars of adjacent location coordinates\n                  bargroupgap = 0.05 # gap between bars of the same location coordinates\n)\nfig.show()","754ce294":"# total number of OSU ratings\nall_profs[all_profs.school == 'Oregon State University'].number_of_ratings.sum()","82411bc1":"# total number of PSU ratings\nall_profs[all_profs.school == 'Portland State University'].number_of_ratings.sum()","5040acee":"#number of ratings plots\n#box plot\nfig = go.Figure()\nfig.add_trace(go.Box(y = all_profs[all_profs.school == 'Oregon State University'].number_of_ratings,\n              name = 'Oregon State University',\n              marker = dict(size = 10)))\nfig.add_trace(go.Box(y = all_profs[all_profs.school == 'Portland State University'].number_of_ratings,\n              name = 'Portland State University',\n              marker = dict(size = 10)))\nfig.update_layout(title_text = 'Figure 3: Box Plots of Number of Ratings',\n                  yaxis_title_text = 'Number of Ratings',\n                  showlegend = False)\nfig.show()","d86a3307":"#histogram\nfig = go.Figure()\nfig.add_trace(go.Histogram(x =  all_profs[all_profs.school == 'Oregon State University'].number_of_ratings,\n              name = 'Oregon State University',\n                           xbins = dict(size = 5)))\nfig.add_trace(go.Histogram(x = all_profs[all_profs.school == 'Portland State University'].number_of_ratings,\n              name = 'Portland State University',\n                           xbins = dict(size = 5)))\nfig.update_traces(opacity=0.75)\nfig.update_layout(title_text = 'Figure 4: Histogram of Number of Ratings', # title of plot\n                  xaxis_title_text = 'Number of Ratings', # xaxis label\n                  yaxis_title_text = 'Count', # yaxis label\n                  #bargap = 1, # gap between bars of adjacent location coordinates\n                  bargroupgap = 0.1 # gap between bars of the same location coordinates\n)\nfig.show()","bf465eff":"# scatter overall\nfig = go.Figure()\nfig.add_trace(go.Scatter(x = all_profs[all_profs.school == 'Oregon State University'].highest_level_rated,\n                         y = all_profs[all_profs.school == 'Oregon State University'].overall_rating,\n                         name = 'Oregon State University',\n                         mode = 'markers',\n                         marker = dict(size = 20),\n                         hovertext = all_profs[all_profs.school == 'Oregon State University'].name))\nfig.add_trace(go.Scatter(x = all_profs[all_profs.school == 'Portland State University'].highest_level_rated,\n                         y = all_profs[all_profs.school == 'Portland State University'].overall_rating,\n                         name = 'Portland State University',\n                         mode = 'markers',\n                         marker = dict(size = 20),\n                         hovertext = all_profs[all_profs.school == 'Portland State University'].name))\nfig.update_traces(opacity=0.75)\nfig.update_layout(title_text = 'Figure 5: Scatter Plot of Overall Ratings by Class Level', # title of plot\n                  yaxis_title_text = 'Overall Rating', # yaxis label\n                  bargroupgap = 0.1, # gap between bars of the same location coordinates\n                  xaxis = go.layout.XAxis(tickvals = [200, 300, 400, 500]),\n                  xaxis_title_text = 'Class Level')\nfig.show()","7775b06b":"# scatter number\nfig = go.Figure()\nfig.add_trace(go.Scatter(x = all_profs[all_profs.school == 'Oregon State University'].highest_level_rated,\n                         y = all_profs[all_profs.school == 'Oregon State University'].number_of_ratings,\n                         name = 'Oregon State University',\n                         mode = 'markers',\n                         marker = dict(size = 20),\n                         hovertext = all_profs[all_profs.school == 'Oregon State University'].name))\nfig.add_trace(go.Scatter(x = all_profs[all_profs.school == 'Portland State University'].highest_level_rated,\n                         y = all_profs[all_profs.school == 'Portland State University'].number_of_ratings,\n                         name = 'Portland State University',\n                         mode = 'markers',\n                         marker = dict(size = 20),\n                         hovertext = all_profs[all_profs.school == 'Portland State University'].name))\nfig.update_traces(opacity=0.75)\nfig.update_layout(title_text = 'Figure 6: Scatter Plot of Number of Ratings by Class Level', # title of plot\n                  yaxis_title_text = 'Number of Ratings', # yaxis label\n                  bargroupgap = 0.1, # gap between bars of the same location coordinates\n                  xaxis = go.layout.XAxis(tickvals = [200, 300, 400, 500]),\n                  xaxis_title_text = 'Class Level')\nfig.show()","8e9edb5c":"all_profs.groupby(['school', 'highest_level_rated']).overall_rating.describe()","f746beec":"from scipy import stats\n# 2\/300 level\nosu_300 = all_profs[(all_profs.school == 'Oregon State University') & (all_profs.highest_level_rated == 300)].overall_rating\npsu_200 = all_profs[(all_profs.school == 'Portland State University') & (all_profs.highest_level_rated == 200)].overall_rating\nstats.mannwhitneyu(osu_300, psu_200, alternative = 'greater')","17c574c4":"# 400 level\nosu_400 = all_profs[(all_profs.school == 'Oregon State University') & (all_profs.highest_level_rated == 400)].overall_rating\npsu_400 = all_profs[(all_profs.school == 'Portland State University') & (all_profs.highest_level_rated == 400)].overall_rating\nstats.mannwhitneyu(osu_400, psu_400, alternative = 'less')","d14318ce":"# 500 level\nosu_500 = all_profs[(all_profs.school == 'Oregon State University') & (all_profs.highest_level_rated == 500)].overall_rating\npsu_500 = all_profs[(all_profs.school == 'Portland State University') & (all_profs.highest_level_rated == 500)].overall_rating\nstats.mannwhitneyu(osu_500, psu_500, alternative = 'less')","5d9b16e6":"all_profs.groupby(['school', 'highest_level_rated']).number_of_ratings.describe()","ea201cd4":"all_ratings = pd.read_csv('..\/input\/all_ratings.csv') # load in individual ratings\nall_ratings.head()","e073c3aa":"all_ratings.shape[0] ==  sum(all_profs.number_of_ratings)","c1d433d1":"all_merged = pd.merge(all_profs, all_ratings, on = 'id')\nall_merged.head()","773676d6":"# 2\/300 level\nstats.ttest_ind(all_merged[(all_merged.school == 'Oregon State University') & (all_merged.highest_level_rated == 300)].ratings,\n                all_merged[(all_merged.school == 'Portland State University') & (all_merged.highest_level_rated == 200)].ratings,\n                equal_var = False)\n","6fbb20cc":"# 400 level\nstats.ttest_ind(all_merged[(all_merged.school == 'Oregon State University') & (all_merged.highest_level_rated == 400)].ratings,\n                all_merged[(all_merged.school == 'Portland State University') & (all_merged.highest_level_rated == 400)].ratings,\n                equal_var = False)\n","c3a56f5c":"# 500 level\nstats.ttest_ind(all_merged[(all_merged.school == 'Oregon State University') & (all_merged.highest_level_rated == 500)].ratings,\n                all_merged[(all_merged.school == 'Portland State University') & (all_merged.highest_level_rated == 500)].ratings,\n                equal_var = False)","87760e75":"Oof, this plot is not looking as good for PSU what with that low median and q1. Let's keep poking around!","27dab181":"It turns out there is sufficient evidence to suggest the means are different at 0.1 significance as p\/2 < 0.1 with t > 0, so we will say ratings for 200\/300-level OSU statistics teachers are higher on average than for PSU statistics teachers.","e8d967f3":"Only count 2 (teachers) * mean 3 (number of ratings) = 6 ratings at the 400-level for OSU is quite small, but that's more than 5 so it looks like we're good to go. Let's prepare the data.","a4b0bd51":"# OSU or PSU: Where should I study statistics (if I go to grad school)?\n## An analysis of educators.\n## Or, scraping web stuff with Python for fun because I am a nerd.\n**Michael Sieviec**\n\n**August 22nd, 2019**\n\nContents:\n1. [Hi](#hi)\n2. [Getting the details](#deets)\n3. [Some visualizations](#viz)\n4. [Some real comparisons](#comp)\n * [Mann-Whitney U tests for overall ratings](#mann)\n * [T-tests for rating population means](#ttest)\n5. [Conclusion](#bye)\n\n\n# Hi <a name = 'hi'><\/a>\n\nI have a simple question: if I indeed decide to go to grad school, should I go to Oregon State or Portland State? I could rely on my gut feelings towards some obvious questions such as: do I want to live in Corvallis? Am I really *that* tired of Portland? How stressful and frustrating was it *really* being an undergrad at PSU?\n\nThese are all valid questions, but perhaps I should ask some more quantifiable ones (or, at the very least, ones that can be answered with some certainty), like: which program has what I want to study? Is a PhD in statistics the same as a PhD in \"Mathematical Sciences\" (what)? Are the teachers at OSU or PSU better? The first is fairly easy to answer&mdash;all it takes is looking in each schools' catalog. The solution to the second is maybe arbitrary, maybe not (why have an MS in statistics and no PhD?).\n\nThe last seemed trickiest, but I found a way, oh yes I did.\n\n# Getting the details <a name = 'deets'><\/a>\nMy answer came initially in the forms of a popular professor rating site and [a script I found on GitHub](https:\/\/github.com\/Rodantny\/Rate-My-Professor-Scraper-and-Search). These laid the groundwork for my, uh, research, I guess. So, let's find out where I should study graduate-level statistics (if I do)!\n\nHere is the part of the project where I scrape a list of all the professors at both schools and somewhat tediously narrow the results. I know not every teacher is listed on this particular site, but it's the only quantified measure of quality I have.\n\nI can't scrape straight from kaggle&mdash;they won't let scripts connect to other sites (rightfully so, I imagine)&mdash;so I had to do it on my computer and upload the cleaned data here. Trust me when I say the whole process involved a lot of troubleshooting and  cleaning, but I'm better off for it because now I know how to use requests, Beautiful Soup, and Selenium to get data from webpages.\n\nWhen compiling the data, I cared about:\n\n* If a teacher was current faculty or adjunct\n* If they had been rated for a statistics class they taught\n* What the highest level of class they had been rated for was\n\nNaturally, these criteria thinned my results, but I ended up with some good stuff.","522639cb":"Wow, PSU dominates the number of ratings in the higher level classes.","ad22ec30":"Perfect, now we merge the sets.","0571ed99":"And the opposite is true for the 400-level. p\/2 < 0.1 and t < 0 so we will say the average rating at PSU is higher than at OSU.","8b40bd90":"And the last few touches of cleaning.","91c55a5d":"Well, the average overall ratings for each school do not appear to be distributed differently at any level, suggesting the teachers may be of the same quality after all.\n\n# T-tests for rating population means\n\nWe're going to test a slightly different thing here: whether or not the individual ratings that are given are distributed differently for each school and class level. I ended up using Selenium and Beautiful Soup to get this data, which was arduous but rewarding.\nFirst, we want to verify we have the numbers to support conducting a t-test.\n","e2e8d4b5":"# Some real comparisons <a name = 'comp'><\/a>\nFirst, let's have a peek at some of the descriptive statistics of the numbers we're looking at.","be716ff8":"That's what it looks like&mdash;13 teachers at OSU and 15 at PSU. Not great, not terrible.\n\n# Some visualizations <a name = 'viz'><\/a>\nInteractive graphs are tight, so here are some.","6ea266a3":"Both are right-skewed, but OSU's numbers are a bit more bottom-heavy. So what do these look like by level?","899ffb90":"Confirming the boxplot, PSU is just dominating that low-mid rating range, but they are putting up a fight in the top-most spots.\n\nThis isn't exactly a fair fight, though. Why?","236029f4":"And on to the tests.","cc75e398":"Portland State teachers have more than twice as many ratings. So what does *that* look like?","f40bb42a":"There isn't much overlap between the class levels that have rated teachers, just a tiny bit in the 400 and 500 levels, which will have to do. I'll just assume the 200 level PSU classes and 300 level OSU classes are roughly equivalent for the sake of comparison.","55b77b14":"Yeah that is measly for OSU: median number of teacher ratings is 6 and q1 ***two***. And their max of 95 is less than 2\/3 of the PSU max of 146. Seems like maybe they haven't had enough ratings for their numbers to come down as much as with PSU.","ab933442":"All that's contained is the id and a rating. We want to check that we did indeed get *all* of the ratings for each teacher  by checking the number rows against total number of ratings.","cc1ea81a":"Finally, the same is true for the 500-level. PSU statistics teachers are rated more highly on average (p\/2 < 0.1 and t < 0).\n\n# Conclusion <a name = 'bye'><\/a>\nIt's important to note the limitations of the data I used when considering the results, such as: \n\n* It doesn't include every teacher\n* The categories that suggested PSU were better were also strangely populated:\n  1. The 400-level had barely any OSU teachers and the 500 barely any PSU teachers\n  2. The number of ratings was highly uneven\n* 200\/300-level classes may not be exactly comparable\n* Common sense also dictates that many people will not go out of their way to talk about an experience unless it was particularly remarkable, in either a good or bad way. As such, we're really only looking at a fraction of opinions on each teacher.\n\nHowever, all other things being equal, I guess I should go to PSU.","52151561":"PSU average overall ratings by level seem to be a little more tightly grouped. Consistency (for better or worse), perhaps?\n\n## Mann-Whitney U tests for overall ratings <a name = 'mann'><\/a>\n\nOur sample sizes are small&mdash;some less than 5&mdash;for the overall ratings in each school\/level grouping, so we're going with the Mann-Whitney U test to compare them at each level. We could do a Friedman test on the mean ratings in the table above with schools as one factor and class levels as the other, but a straight ANOVA-style test seems like it would be missing some important information&mdash;the number of observations (teachers) varies quite a bit between school and level.\n\nIt looks like the OSU mean is less for the 400 and 500 levels but greater for the 200\/300 level. We'll be generous and set our significance level at 0.1 for each test."}}