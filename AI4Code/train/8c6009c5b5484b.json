{"cell_type":{"774f61ca":"code","79d88046":"code","fdcb7499":"code","a4a10485":"code","5f481be2":"code","d232ab5a":"code","daad7bc7":"code","efe99379":"code","659d7387":"code","4fdad47a":"code","c057413a":"code","1b1e11eb":"code","d50ec232":"code","eee22fcc":"code","02bb9215":"code","92891bfe":"code","970c534f":"code","e61d4afc":"code","9c7b1ffe":"code","e08e10eb":"code","c5e9af30":"code","8fe65d99":"code","5128b0b7":"code","2f7c28b8":"code","d77c7347":"code","b05a4318":"code","48173165":"code","d445c44d":"code","ec4b7548":"code","b25d41b4":"code","fdbd1759":"code","dc4cfff3":"code","29707bfe":"code","fe8d1f40":"code","eb5822d5":"code","fb564756":"code","20283691":"code","435fea39":"code","2047d14c":"code","1d475d63":"code","cfed19e9":"code","95585c49":"code","22cde5f7":"code","5802d2e0":"code","926c472e":"code","885644c7":"code","c8ac47ce":"code","3b8e7109":"code","d6a65177":"code","e88e2b1b":"code","1d6f7dff":"code","5d733429":"code","9c6fb254":"code","4ddff9b6":"code","b9539d65":"code","46d531eb":"code","d5921ccf":"code","3b29f37f":"code","96fcefb2":"code","951d41de":"code","7969ce00":"code","2aeac5ac":"code","0d4fc2af":"code","fe94033c":"code","255e866a":"code","d60bcb61":"code","84617f28":"code","728e5620":"code","ccd4c60e":"code","edd78d80":"code","bf306219":"code","dd1e33b3":"code","809f1cad":"code","e19e36ba":"code","8c79f50d":"code","9dc35721":"code","510f2602":"code","b9bc37cd":"code","8df3c215":"markdown","a27ac9d2":"markdown","08c23d5a":"markdown","f26f28bb":"markdown","8c605ab5":"markdown","820eee86":"markdown","79c85d50":"markdown","dd50a426":"markdown","4a847cee":"markdown","c2232ad8":"markdown","f7a9dd67":"markdown","ec60f68d":"markdown","2abf080d":"markdown","f9f7013b":"markdown","5db01814":"markdown","15cee442":"markdown","357bac18":"markdown","d91a1b03":"markdown","4ab4a16b":"markdown","622bfc59":"markdown","6b2f197d":"markdown","feb7320a":"markdown","d65ff250":"markdown","5dc60c2f":"markdown","f000500f":"markdown","08f3c20b":"markdown","17ef076d":"markdown"},"source":{"774f61ca":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\n# settings\nimport warnings\nwarnings.filterwarnings(\"ignore\")","79d88046":"#importing the required library files\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy import stats\nfrom fbprophet import Prophet\nfrom sklearn.metrics import mean_squared_error, mean_absolute_error","fdcb7499":"#loading the data \nchk = pd.read_csv('..\/input\/mobile-usage-dataset-individual-person\/CheckDevice.csv')\nph_usage = pd.read_csv('..\/input\/mobile-usage-dataset-individual-person\/phone_usage.csv')\n","a4a10485":"chk.head()","5f481be2":"ph_usage.head()","d232ab5a":"print(\"info of CHECK COUNT\")\nprint('--'*20)\nchk.info()","daad7bc7":"#renaming the columns name\nchk.rename(columns={'Check phone count': 'check_phn_count', 'Screen on time': 'screen_on_time'}, inplace=True)","efe99379":"#droping the NaN columns\nchk.dropna(axis=0, inplace =True)","659d7387":"chk['duration'] = chk['screen_on_time'].str.split(':').apply(lambda x: int(x[0]) *60 + int(x[1])  )","4fdad47a":"chk.describe()","c057413a":"chk.loc[chk['duration'] > 660, 'duration'] = chk['duration'].median()","1b1e11eb":"chk.describe()","d50ec232":"chk[\"Date\"]= pd.to_datetime(chk[\"Date\"]) \n","eee22fcc":"#Bar plot with respect ot date and the phone check count\nplt.figure(figsize=(20,6))\nsns.barplot(x=\"Date\", y=\"check_phn_count\", data=chk)\nplt.title('Phone check count')\nplt.xticks(rotation=90)\nplt.show()","02bb9215":"#Bar plot with respect to date and the phone usage duration everyday\nplt.figure(figsize=(20,6))\nsns.barplot(x=\"Date\", y=\"duration\", data=chk)\nplt.title('Phone usage each day in minutes')\nplt.xticks(rotation=90)\nplt.show()","92891bfe":"## converting the date column from object to time series\nchk['Date'] = pd.to_datetime(chk['Date'])","970c534f":"chk['day_of_week'] = chk['Date'].dt.dayofweek\nchk","e61d4afc":"chk.groupby('day_of_week').sum().nlargest(20,'duration').reset_index()","9c7b1ffe":"plt.figure(figsize=(15,6))\ndata = chk.groupby('day_of_week').sum().nlargest(20,'duration').reset_index()\nsns.barplot(x='day_of_week',y='duration',data=data)\nplt.title('DAY OF THE WEEK')\nplt.xticks(rotation=90)\nplt.show()","e08e10eb":"plt.figure(figsize=(15,6))\ndata = chk.groupby('day_of_week').sum().nlargest(20,'check_phn_count').reset_index()\nsns.barplot(x='day_of_week',y='check_phn_count',data=data)\nplt.title('DAY OF THE WEEK')\nplt.xticks(rotation=90)\nplt.show()","c5e9af30":"chk['categories'] = chk['day_of_week'].apply(lambda x: 'weekday' if x < 5 else 'weekend')\n\nchk['weekday'] = chk['categories'].apply(lambda x: '0' if x == 'weekday' else '1')\nchk.drop(columns='categories', inplace=True)\nchk","8fe65d99":"chk['month'] = pd.DatetimeIndex(chk['Date']).month\nchk.head()","5128b0b7":"ph_usage.head(10)","2f7c28b8":"#renaming the columns name\nph_usage.rename(columns={'App name': 'App_name'}, inplace=True)","d77c7347":"ph_usage.info()","b05a4318":"ph_usage.describe()","48173165":"ph_usage.shape","d445c44d":"#droping the NaN columns\nph_usage.dropna(axis=0, inplace =True)","ec4b7548":"ph_usage.columns","b25d41b4":"#making a new copy of data frame\nph_usg = ph_usage","fdbd1759":"# Creating a new column of datetime (timestamp)\nph_usg['DateTime']= pd.to_datetime(ph_usg['Date'] +\" \" + ph_usg['Time'],format='%d\/%m\/%Y %H:%M:%S')\nph_usg.head()","dc4cfff3":"# Converting the duration into seconds.\nph_usg['usage_seconds'] = ph_usg['Duration'].str.split(':').apply(lambda x: int(x[0]) *3600 + int(x[1]) * 60 + int(x[2]))\nph_usg","29707bfe":"# to find the number of days\nph_usg['DateTime'].max() - ph_usg['DateTime'].min()","fe8d1f40":"#Filtering the system apps and system usage\nsystem_tracker = ['Screen on (unlocked)','Screen off (locked)','Screen on (locked)', 'Screen off','Permission controller','System UI','Package installer',\n'Device shutdown','Call Management']\nservice_app = ph_usg[ph_usg['App_name'].isin(system_tracker)]\nservice_app","eb5822d5":"#Getting all the user apps.\nall_apps = ph_usg[~ph_usg['App_name'].isin(system_tracker)]\n\nall_apps","fb564756":"#sorting the usage seconds in descending order\ntest = service_app.sort_values(by='usage_seconds',ascending=0)\n","20283691":"sns.scatterplot(x='App_name', y='usage_seconds', data=test[test['usage_seconds'] > 3600])","435fea39":"plt.figure(figsize=(15,6))\nsns.countplot(test['App_name'])\nplt.title('APP name count')\nplt.xticks(rotation=90)\nplt.show()","2047d14c":"sleep = ['Screen off (locked)','Screen on (locked)', 'Screen off']\nsleep_duration = service_app[service_app['App_name'].isin(sleep)]\nsleep_duration","1d475d63":"sns.scatterplot(x='App_name', y='usage_seconds', data=sleep_duration[sleep_duration['usage_seconds'] > 18000])","cfed19e9":"new = sleep_duration[sleep_duration['usage_seconds'] > 18000]\nnew","95585c49":"\nplt.figure(figsize=(15,6))\nsns.scatterplot(x='Date', y='usage_seconds', data=new)\nplt.title('User sleep pattern')\nplt.xticks(rotation=90)\nplt.show()","22cde5f7":"#The user approximately sleeps 6.7 hours everyday.. since the screen off was filtered more than 5 hours. all the time are showing around 10PM to 1AM\nnew.usage_seconds.mean()","5802d2e0":"# Getting the screen on unlocked alone\nwake = ['Screen on (unlocked)']\nwake_up = service_app[service_app['App_name'].isin(wake)]\nwake_up.head()","926c472e":"wake_up.tail()","885644c7":"#Grouping the datetime on the basis of frequency day and getting the minimum time of the day\nwakeup_time= wake_up.set_index('DateTime').groupby(pd.Grouper(freq='D')).min()\nwakeup_time.tail(50)\n","c8ac47ce":"#Filtering the app usage seconds more than 10 seconds. Assuming that user use apps more than 10 seconds. \nall_apps = all_apps[(all_apps.usage_seconds > 10)]\nall_apps","3b8e7109":"#All apps access count\nall_apps['App_name'].value_counts()","d6a65177":"plt.figure(figsize=(15,6))\nsns.countplot(x = 'App_name',\n              data = all_apps,\n              order = all_apps['App_name'].value_counts().index)\n\nplt.title('APP name count')\nplt.xticks(rotation=90)\nplt.show()","e88e2b1b":"plt.figure(figsize=(15,6))\ns = all_apps['App_name'].value_counts().head(25)\nax= s.plot.bar(width=.8) \n\nfor i, v in s.reset_index().iterrows():\n    ax.text(i, v.App_name + 0.2 , v.App_name, color='red')","1d6f7dff":"all_apps['usage_minutes'] = all_apps['usage_seconds']\/\/60\n","5d733429":"plt.figure(figsize=(15,6))\ndata = all_apps.groupby('App_name').sum().nlargest(20,'usage_minutes').reset_index()\nsns.barplot(x='App_name',y='usage_minutes',data=data)\nplt.title('Top 20 apps used')\nplt.xticks(rotation=90)\nplt.show()","9c6fb254":"all_apps.groupby('App_name').sum().nlargest(20,'usage_minutes').reset_index()","4ddff9b6":"def dateFeatures(all_apps):\n    features = ['day','week','dayofweek','month','weekofyear']\n    for col in features:\n        all_apps[col] = getattr(all_apps['DateTime'].dt,col) * 1","b9539d65":"dateFeatures(all_apps)\nall_apps","46d531eb":"plt.figure(figsize=(15,6))\nall_apps.groupby(['weekofyear'])['usage_minutes'].sum().plot(kind='bar')\nplt.xticks(rotation=90)\nplt.show()","d5921ccf":"plt.figure(figsize=(15,6))\nall_apps.groupby(['month','App_name']).sum().nlargest(6,'usage_minutes')['usage_minutes'].plot(kind='bar')\nplt.title('User spends more minutes on the app for each month')\nplt.xticks(rotation=90)\nplt.show()","3b29f37f":"all_apps","96fcefb2":"train = all_apps.copy()","951d41de":"def f(x):\n    if (x > 5) and (x <= 8):\n        return 'Early_Morn'\n    elif (x > 8) and (x <= 12 ):\n        return 'Morn'\n    elif (x > 12) and (x <= 16):\n        return'Noon'\n    elif (x > 16) and (x <= 20) :\n        return 'Eve'\n    elif (x > 20) and (x <= 24):\n        return'Night'\n    elif (x <= 4):\n        return'Late_Night'","7969ce00":"# make a session\ntrain['hour'] = train['DateTime'].dt.hour\ntrain['session'] = train['hour'].apply(f)\ntrain.drop(['weekofyear','usage_seconds'],axis=1, inplace=True)","2aeac5ac":"train","0d4fc2af":"# Grouping based on the session, date and app name, to find out which counts of app on each session each day\ntrain.groupby(['session','Date','App_name']).size().reset_index()\n","fe94033c":"sns.pairplot(train,\n             hue='hour',\n             x_vars=['hour','dayofweek','week','session'],\n             y_vars='usage_minutes',\n             height=5,\n             plot_kws={'alpha':0.15, 'linewidth':0}\n            )\nplt.suptitle('Phone usage minutes, hour, Day of Week, week and session')\nplt.show()","255e866a":"train.set_index('DateTime',inplace=True)","d60bcb61":"train","84617f28":"split_date = '30\/10\/2019'\nf_train = train.loc[train.index <= split_date].copy()\nf_test  = train.loc[train.index > split_date].copy()","728e5620":"f_train","ccd4c60e":"plt.style.use('fivethirtyeight') # For plots\n# Color pallete for plotting\ncolor_pal = [\"#F8766D\", \"#D39200\", \"#93AA00\",\n             \"#00BA38\", \"#00C19F\", \"#00B9E3\",\n             \"#619CFF\", \"#DB72FB\"]\ntrain.plot(style='.', figsize=(20,6), color=color_pal, title='Usage plot')\nplt.show()","edd78d80":"# Format data for prophet model using ds and y\nf_train.reset_index().rename(columns={'DateTime':'ds','usage_minutes':'y'}).head()","bf306219":"# Setup and train model and fit\nmodel = Prophet()\nmodel.fit(f_train.reset_index().rename(columns={'DateTime':'ds','usage_minutes':'y'}))","dd1e33b3":"# Predict on training set with model\nf_test_fcst = model.predict(df=f_test.reset_index().rename(columns={'DateTime':'ds'}))","809f1cad":"f_test_fcst.head()","e19e36ba":"# Plot the forecast\nf, ax = plt.subplots(1)\nf.set_figheight(5)\nf.set_figwidth(15)\nfig = model.plot(f_test_fcst,ax=ax)\nplt.show()","8c79f50d":"# Plot the components of the model\nfig = model.plot_components(f_test_fcst)","9dc35721":"# Plot the forecast with the actuals\nf, ax = plt.subplots(1)\nf.set_figheight(5)\nf.set_figwidth(15)\nax.scatter(f_test.index, f_test['usage_minutes'], color='r')\nfig = model.plot(f_test_fcst, ax=ax)","510f2602":"mean_squared_error(y_true=f_test['usage_minutes'],\n                   y_pred=f_test_fcst['yhat'])","b9bc37cd":"mean_absolute_error(y_true=f_test['usage_minutes'],\n                   y_pred=f_test_fcst['yhat'])","8df3c215":"### This clearly shows that the user wakeup around 6AM to 8AM. On very few days he wakeup between 2AM to 3AM. he had a good sleep.","a27ac9d2":"    Compare to actual forecast","08c23d5a":"consists of phone unlocked count and screen on time per day","f26f28bb":"Converting the screen time on to minutes ","8c605ab5":"#### Loading the next data set","820eee86":"this data set consists of every app usage's duration and the time opened with date ","79c85d50":"### The above plot shows the total usage time for every month with respect most time spent app.\n### the user used instagram every month at higher amount","dd50a426":"# Data","4a847cee":"### The user approximately sleeps 6.7 hours every day.. \n#### since the screen off was filtered more than 5 hours. all the time are showing around 11PM to 1AM\n\n### if the user sleeps around 11PM to 1AM and his sleeping hours approximately 7 hours, then obviously he will wake up by 6AM to 8AM\n","c2232ad8":"### The above plot shows the user's access count of the top 25 apps. \n### Instagram was accessed 5370 times, whatsapp 5323 times. It shows that the user spends most of his time on social media.","f7a9dd67":"Hypothesis I have made here:\n* User does not spend his time more than 11 hours per day.\n* The first and last thing the user does is checking his phone.\n* if the phone screen locked more than 5 hours, then the user is sleeping.","ec60f68d":"### the above plot is the comparison of day of week with the phone unlock. the user uses his phone in same pattern on all day of week. there is slightly high unlock found on tuesday and saturday.","2abf080d":"# Data preprocessing","f9f7013b":"Duration indicated the minutes used every day. here as a cleaning process, assuming the person does not use \nmobile more 11hrs(660minutes) per day. if it exists 11hours then it is replaced with the median of duration","5db01814":"### user spends most of his time in instagram 17079 minutes which is 284 hours (12 days)\n### out of 193 days he spends 12 days in instagram alone.\n#### This seems very huge time, but on average he spends 1.5 hours on social media.\n","15cee442":"Cleaning the data...\n","357bac18":"# Conclusion\n\n### * User unlocks the phone approximately 72 times per day and he uses phone approximately 5.5hrs(336 minutes) per day.\n### * On average user spends 5.5 hours per day, that means out of 193 days he spends 40 days in phone alone. (very shocking)\n### * User uses his phone in the same pattern on all day. there is slightly high usage of his phone on wednesday and saturday.\n### * User unlocks his phone in the same pattern on all day of week. there is slightly high unlock found on tuesday and saturday.\n### * He approximately sleeps 6.7 hours every day.he had a good sleep.\n### * User sleeping time around 11PM to 1AM.\n### * Wake up time around 6AM to 8AM. (On very few day user wakeups between 2AM to 3AM.)\n### * Instagram was accessed 5370 times, whatsapp 5323 times. It shows that the user spends most of his time on  social media. on average user accesssed instagram and whatsapp ~27times\/day. \n### * User accessed instagram and whatsapp on a frequency of every 45 minutes.\n### * He spends most of his time in instagram 17079 minutes which is 284 hours (12 days)\n### * out of 193 days he spends 12 days in instagram alone. (This seems very huge time, but on average he spends 1.5 hours on social media)\n\n","d91a1b03":"### the above plot is the comparison of day of week with the duration. the user uses his phone in same pattern on all day. there is slightly high usage of his phone on wednesday and saturday.","4ab4a16b":"> \u201cIf you have enough data about me and enough computer power and biological knowledge, you can hack my body, my brain, my life,\u201d \n\u201cYou can reach a point where you know me better than I know myself.\u201d\n                                                                    **Yuval Noah Harari.**","622bfc59":"### From the above information, the user unlocks the phone approximately 72 times per day and he uses phone approximately 5.5hrs(336 minutes) per day","6b2f197d":"### The above plot shows the total usage time for every week. week 20 and 48 shows low usage but there is shortage of data on those weeks.","feb7320a":"## Things to do for user to improve his productivity\n\n### * User has to set the time limiter for social media apps. Currently, user spends 1.5 hours every day on social media. if he limits to 1 hour per day. then the user can save 15 hours per month.\n\n### * User opens the social media for every 45 minutes. if the user restricts himself to open only for 2 hours, it saves time.\n\n### * user also uses amazon kindle this shows user is a reader, so better he read hardcopy books to divert himself from the phone. (Manual interpretation: user switches from kindle to youtube, instagram, whatsapp, this show he has distraction for that only recommending user to read hardcopy books)\n\n### * Turning off the mobile data\/wifi during the office\/productive time improves user from distraction.\n\n### the average person spends over 4 hours a day on their device.\n\nFor more details,\n[https:\/\/www.inc.com\/melanie-curtin\/are-you-on-your-phone-too-much-average-person-spends-this-many-hours-on-it-every-day.html](http:\/\/)\n\n","d65ff250":"# Mobile phone usage prediction","5dc60c2f":"#### In this notebook, we will use the data set to find the daily usage apps, time spent on every app, users sleep pattern and productivity.","f000500f":"# Train\/Test Split","08f3c20b":"Thanks for reading! give me some feedback. :)","17ef076d":"### Need to update the model. prediction is very poor\n## need to work with XGBoost"}}