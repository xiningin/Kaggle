{"cell_type":{"5e26118f":"code","c69901f7":"code","f73454c7":"code","5ca07d75":"code","a28c0067":"code","fe2696c9":"code","24bcdada":"code","d3b5aab3":"code","299aff71":"code","c342a545":"code","6a4f2bd5":"code","0fc8e94b":"code","1eb44989":"code","16386e12":"code","311b3501":"code","523c5590":"code","5ce9cf56":"code","e8a27ebe":"code","441e8e25":"code","493d1f04":"code","d5674963":"markdown","4aa1ad05":"markdown","61d121db":"markdown","713417e2":"markdown","ea4186ac":"markdown","a52d38fc":"markdown","0528c71e":"markdown","98844f94":"markdown","8aeb56d4":"markdown","744b72a8":"markdown","31f80ea8":"markdown","f718fa33":"markdown","95d05458":"markdown","9f7a0c6d":"markdown","77c3275c":"markdown","375ce445":"markdown","ea3a8e8b":"markdown"},"source":{"5e26118f":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","c69901f7":"import numpy as np\nimport pandas as pd","f73454c7":"df = pd.read_csv(\"\/kaggle\/input\/collaborative_filtering.csv\")\ndf.head()","5ca07d75":"jumlah_voting = len(df['userId'])\njumlah_user = df['userId'].nunique()\nrata2_rating = jumlah_voting \/ jumlah_user\n\nprint('Jumlah voting = {}'.format(jumlah_voting))\nprint('Jumlah user = {}'.format(jumlah_user))\nprint('rata-rata user melakukan rating = {} \/ {} = {}'.format(jumlah_voting,jumlah_user, rata2_rating))","a28c0067":"from surprise import Reader, Dataset, SVD\nfrom surprise.model_selection import cross_validate","fe2696c9":"data = Dataset.load_from_df(df, Reader())\ntrainset = data.build_full_trainset() ","24bcdada":"model = SVD() \nmodel.fit(trainset)","d3b5aab3":"model.predict(1, \"Bug's Life, A (1998)\")","299aff71":"user_id = 1","c342a545":"all_movies = pd.DataFrame(df['movie'].unique(), columns=['movie']) #jumlah film\nall_movies","6a4f2bd5":"all_movies.nunique()","0fc8e94b":"rated = df[df.userId == 1]\nrated.head()","1eb44989":"print('Film yang sudah dirating oleh user 1 = {}'.format(rated['movie'].nunique()))","16386e12":"rated_list = pd.Series(rated['movie'])\nnot_rated = all_movies['movie'].isin( rated_list)\nnot_rated = all_movies[~not_rated]\nnot_rated.reset_index(inplace=True)\nnot_rated.drop(['index'], axis=1, inplace=True)\nnot_rated.head()","311b3501":"print('Film yang belum dirating oleh user 1 = {}'.format(not_rated['movie'].nunique()))","523c5590":"score = pd.DataFrame([model.predict(user_id, x).est for x in not_rated['movie']], columns=['rating'])\nscore.head()","5ce9cf56":"result = not_rated.join(score['rating']).sort_values(by='rating', ascending=False)\nresult.head(10)","e8a27ebe":"class RecommenderSystem:\n    def __init__(self, data):\n        self.df = pd.read_csv(data)\n        self.all_movies = pd.DataFrame(self.df['movie'].unique(), columns=['movie'])\n        self.model = None\n        self.rated_list = None\n        \n    def fit(self):\n        data = Dataset.load_from_df(self.df, Reader())\n        trainset = data.build_full_trainset()        \n        \n        self.model = SVD()\n        self.model.fit(trainset)\n        \n    def recommend(self, user_id, topk=10):\n        rated = self.df[self.df['userId'] == user_id]\n        self.rated_list = pd.Series(rated['movie'])\n        not_rated = self.all_movies['movie'].isin(rated_list)\n        not_rated = self.all_movies[~not_rated]\n        not_rated.reset_index(inplace=True)\n        not_rated.drop(['index'], axis=1, inplace=True)\n        \n        #[movie for movie in self.all_movies if movie not in watched]\n        score = pd.DataFrame([self.model.predict(user_id, x).est for x in not_rated['movie']], columns=['rating'])\n        #score = [self.model.predict(user_id, movie).est for movie in not_watched]\n        \n        #result = pd.DataFrame({\"movie\": not_rated, \"pred_score\": score}, )\n        #result.sort_values(\"pred_score\", ascending=False, inplace=True)\n        result = not_rated.join(score['rating']).sort_values(by='rating', ascending=False)\n        return result.head(topk)","441e8e25":"recsys = RecommenderSystem(\"\/kaggle\/input\/collaborative_filtering.csv\")\nrecsys.fit()","493d1f04":"recsys.recommend(user_id=1)","d5674963":"### 1. Mencari total jumlah film yang ada di data set","4aa1ad05":"## Rangkum kedalam Class\n\nRangkum code yang sudah kita buat dengan Class Agar lebih rapi dan mudah menggunakannya kembali.","61d121db":"Hitung score dari film yang belum dirating oleh user 1.","713417e2":"### 3. Mencari film apa saja yang belum dirating oleh user 1","ea4186ac":"### 2. Mencari film apa saja yang sudah dirating oleh user 1","a52d38fc":"Kita load data dan buat trainset.","0528c71e":"Code kita berhasil ya hehe.\n\nMungkin itu dulu dari saya, jika ada pertanyaan atau masukan, bisa kalian tulis di kolom komentar atau boleh japri di ig saya: al.fath.terry\n\nDan mohon di upvote jika dirasa bermanfaat.\n\nTerimakasih :)","98844f94":"Kita coba cek jumlah user yang ada dan jumlah rata-rata rating yang dilakukan tiap user.","8aeb56d4":"## Import Packages dan Data","744b72a8":"Lakukan tes prediksi, kita ambil contoh user ke 1 dengan film \"Bug's Life, A (1998)\". Di data realnya user 1 memberikan rating 5 kepada film itu, apakah prediksi ratingnya akan mendekati 5?.","31f80ea8":"## Training\n\nUntuk trainingnya kita akan gunakan library Scikit Surprice, Scikit Surprice adalah library yang biasa digunakan untuk membuat model Recommendation System. \n\nNantinya kita akan memanfaatkan:\n- Reader (digunakan untuk membaca Data).\n- Dataset (digunakan untuk loading data).\n- SVD (Singular Value Decomposition, algoritma yang digunakan untuk dekomposisi).\n- Cross_validate (kita tidak akan melakukan split data, yang akan kita lakukan adalah train keseluruhan dataset dan gunakan predict method untuk prediksi).\n\nUntuk dokumentasi lengkapnya bisa kalian baca di link berikut:\nhttps:\/\/surprise.readthedocs.io\/en\/stable\/dataset.html\n\nPertama kita lakukan import dulu.","f718fa33":"Persiapkan modelnya lalu fit.","95d05458":"# Collaborative Filtering\n\nHalo teman-teman, bagaimana kabar kalian semua? saya harap kalian semua baik-baik saja ya. Dikesempatan kali ini saya ingin mendemonstrasikan cara membuat Sistem Rekomendasi Collaborative Filtering. \n\nCollaborative Filtering adalah teknik rekomendasi sistem yang memanfaatkan preferensi antar user dan juga item similarity sebagai dasar pertimbangan rekomendasinya. Jadi ada dua data yang di manfaatkan, yaitu preferensi similarity antar user dan juga item similarity. Collaborative Filtering ini tidak memerlukan filter apapun, lalu bagaimana cara kerjanya? \n\nBentuk data dari Collaborative Filtering ini berbentuk Sparse data (datanya bolong-bolong), nantinya kita akan memakai teknik Dimentionality Reduction (Dekomposisi Matriks SVD) untuk mengekstrak Sparse Data tadi. Setelah di ekstrak, selanjutnya kita isi data yang bolong dengan prediksi data yang sudah kita ekstrak sebelumnya. Biar lebih jelas, yuk ikuti saja notebook ini sampai selesai.","9f7a0c6d":"Kita satukan dataframenya lalu di sorting berdasarkan nilai rating.\n\nDan berikut adalah hasil akhir dari rekomendasi kita.","77c3275c":"Ternyata score prediksi adalah 4.3, sedangkan real datanya adalah 5. artinya terdapat loss sebesar 0.7. But not bad lah ya.. hehe.\n\nSetelah melakukan tes, sekarang saatnya kita merekomendasikan film yang belum dirating oleh user 1. Namun sebelum melakukan rekomendasi, terdapat beberapa tahapan yang harus kita lakukan:\n\n- 1 Mencari total jumlah film yang ada di data set.\n- 2 Mencari film apa saja yang sudah dirating oleh user 1.\n- 3 Mencari film apa saja yang belum dirating oleh user 1. < film-film inilah yang akan kita prediksi, lalu kita rekomedasikan ke user 1 berdasarkan nilai rating.\n\nDan kita akan gunakan user 1 sebagai contoh.","375ce445":"Setelah mengetahui film yang belum dirating oleh user 1, sekarang kita bisa melakukan prediksi lalu rekomendasi.","ea3a8e8b":"## Prediksi dan Rekomendasikan"}}