{"cell_type":{"e51cd3db":"code","7f424d65":"code","494ce0a2":"code","aef44cdb":"code","146131d7":"code","fcda78b6":"code","c2175c3d":"code","f5b770ea":"code","640035ab":"code","939d5f78":"code","3a25e392":"code","656bb82e":"code","5d0fef2a":"code","8181ca67":"code","0e9d0c13":"code","eeed1ccd":"code","32738e2c":"code","68d1f8df":"code","5d5b9999":"code","983e4df2":"code","90021eb2":"code","871978c4":"code","2edbbc44":"code","d4d0aac8":"code","5e9068e2":"code","80e243fe":"code","967cee19":"code","f10f6bd1":"markdown","e8821e26":"markdown","49e1d974":"markdown","83787c8b":"markdown","d144ff05":"markdown","a110b9df":"markdown","55c468ce":"markdown","5a078b19":"markdown","49ebf26d":"markdown","5ec94f3f":"markdown","b16106fd":"markdown","9f24c68a":"markdown","c2e56e23":"markdown","c62215ea":"markdown","23349ff4":"markdown","89016756":"markdown","c1dc4d29":"markdown","0a0e0944":"markdown","2fdc7e2e":"markdown","17fa275e":"markdown","a3b723c7":"markdown","5942d3e0":"markdown","55a8e44c":"markdown","09c7c078":"markdown","8db403a9":"markdown"},"source":{"e51cd3db":"!pip install seaborn --upgrade","7f424d65":"# Manejo de datos\nimport pandas as pd\n\n# Herramientas matem\u00e1ticas\nimport numpy as np\n\n# Graficaci\u00f3n\nimport seaborn as sns\n\n# prueba Hipotesis\nfrom scipy import stats\nimport statsmodels\n\n# distribuci\u00f3n t - student\nfrom scipy.stats import t","494ce0a2":"datos = pd.read_csv('\/kaggle\/input\/historiaentrexz\/HistoriaXZ - Hoja1.csv')\ndatos.head()","aef44cdb":"datos.info()","146131d7":"for i in [\"Hora pactada\",\"Hora de X\",\"Hora de Z\",\"Fin Cita\"]:\n    datos[i] = pd.to_datetime(datos[i])#.dt.time","fcda78b6":"datos.head()","c2175c3d":"def get_result_test(p_value: float, t_test: float, single_tail = False):\n    p = p_value\/2 if single_tail else p_value\n    if p < 0.05:\n        print(f\"Rechazamos la hip\u00f3tesis nula. P-Value {p_value}. T-test {t_test}\")\n    else:\n        print(f\"no podemos rechazar la hip\u00f3tesis nula. P-Value {p_value}. T-test {t_test}\")","f5b770ea":"TotalGastoX = datos[\"Gasto X\"].sum()\nTotalGastoZ = datos[\"Gasto de Z\"].sum()\nprint(f\"El gasto total de X es de {TotalGastoX}\")\nprint(f\"El gasto total de Z es de {TotalGastoZ}\")\nprint(f\"Diferencia en el gasto total entre Z y X es de {TotalGastoZ-TotalGastoX}\")\n\nAVGGastoX = datos[\"Gasto X\"].mean()\nAVGGastoZ = datos[\"Gasto de Z\"].mean()\nprint(f\"En promedio el gasto total de X es de {AVGGastoX}\")\nprint(f\"En promedio el gasto total de Z es de {AVGGastoZ}\")\nprint(f\"Diferencia en promedio el gasto total entre Z y X es de {AVGGastoZ-AVGGastoX}\")\n\n\ntemp = pd.melt(datos[[\"Salida\",\"Gasto de Z\",\"Gasto X\"]], id_vars=\"Salida\", var_name=\"Gasto\", value_name=\"Total Gasto\")\nsns.catplot(x=\"Gasto\", y=\"Total Gasto\", kind=\"bar\", data=temp)","640035ab":"datos[[\"Salida\",\"Gasto de Z\",\"Gasto X\"]].describe()","939d5f78":"statistic, pvalue = stats.ttest_ind(datos[\"Gasto de Z\"],datos[\"Gasto X\"], equal_var = False)","3a25e392":"get_result_test(pvalue,statistic,True)","656bb82e":"datos[\"Demora X\"] = (datos[\"Hora de X\"] - datos[\"Hora pactada\"]).astype('timedelta64[s]').apply(lambda x: 0 if x < 0 else x)\ndatos[\"Demora Z\"] = (datos[\"Hora de Z\"] - datos[\"Hora pactada\"]).astype('timedelta64[s]').apply(lambda x: 0 if x < 0 else x)\ndatos[\"Duracion Cita\"] = (datos[\"Fin Cita\"] - datos[\"Hora pactada\"]).astype('timedelta64[s]')\ndatos[[\"Hora pactada\", \"Hora de X\",\"Demora X\", \"Demora Z\", \"Duracion Cita\"]]","5d0fef2a":"datos[[\"Salida\",\"Hora pactada\", \"Hora de X\",\"Demora X\", \"Demora Z\", \"Duracion Cita\"]].describe()","8181ca67":"temp = pd.melt(datos[[\"Salida\",\"Demora Z\",\"Demora X\"]], id_vars=\"Salida\", var_name=\"Personaje\", value_name=\"Total Demora\")\nsns.catplot(x=\"Personaje\", y=\"Total Demora\", kind=\"bar\", data=temp)","0e9d0c13":"sns.displot(data=temp, x=\"Total Demora\", hue=\"Personaje\", kind=\"kde\")","eeed1ccd":"statistic, pvalue = stats.ttest_ind(datos[\"Demora Z\"],datos[\"Demora X\"], equal_var = False)\nget_result_test(pvalue,statistic,True)","32738e2c":"datos[\"Total Gasto\"] = datos[\"Gasto X\"] + datos[\"Gasto de Z\"]\ndatos[[\"Total Gasto\",\"Gasto X\",\"Gasto de Z\"]].describe()","68d1f8df":"sns.displot(data=datos, x=\"Total Gasto\")","5d5b9999":"statistic, pvalue = stats.ttest_1samp(datos[\"Total Gasto\"],50000)\nget_result_test(pvalue,statistic,True)","983e4df2":"datos[[\"Bienestar de X\", \"Bienestar de Y\"]].describe()","90021eb2":"bienestar_diff =  datos[[\"Bienestar de X\", \"Bienestar de Y\"]].mean()\nbienestar_diff = bienestar_diff[1] - bienestar_diff[0]\nprint(f\"Diferencia del bienestar promedio es {bienestar_diff}\")","871978c4":"temp = pd.melt(datos[[\"Salida\",\"Bienestar de X\",\"Bienestar de Y\"]], id_vars=\"Salida\", var_name=\"Personaje\", value_name=\"Total Bienestar\")\nsns.catplot(x=\"Personaje\", y=\"Total Bienestar\", kind=\"bar\", data=temp)","2edbbc44":"statistic, pvalue = stats.ttest_ind(datos[\"Bienestar de X\"],datos[\"Bienestar de Y\"], equal_var = False)\nget_result_test(pvalue,statistic,False)","d4d0aac8":"clean = lambda x: 0 if x < 0 else x\ndatos[\"X espera a Z\"] = (datos[\"Hora de Z\"] - datos[\"Hora de X\"]).astype('timedelta64[s]').apply(clean)\ndatos[\"Z espera a X\"] = (datos[\"Hora de X\"] - datos[\"Hora de Z\"]).astype('timedelta64[s]').apply(clean)\n\ndatos[[\"Hora pactada\", \"Hora de Z\", \"Hora de X\", \"Z espera a X\", \"X espera a Z\"]].head()","5e9068e2":"n = datos.shape[0]\nconfianza = 0.95\nmean_ZeX = datos[\"Z espera a X\"].mean()\nmean_XeZ = datos[\"X espera a Z\"].mean()\n\nprint(f\"tiempo promedio que Z espera a X es {mean_ZeX}\")\nprint(f\"tiempo promedio que X espera a Z es {mean_XeZ}\")\n\nS_ZeX = datos[\"Z espera a X\"].std()\nS_XeZ = datos[\"X espera a Z\"].std()\n\nrange_ZeX = t.interval(confianza, n-1, mean_ZeX, S_ZeX)\nrange_XeZ = t.interval(confianza, n-1, mean_XeZ, S_XeZ)\n\nprint(f\"El tiempo m\u00e1ximo que debe esperar Z a X para que llegue con una confianza del {confianza*100}% es {range_ZeX[1]} segundos\")\nprint(f\"El tiempo m\u00e1ximo que debe esperar X a Z para que llegue con una confianza del {confianza*100}% es {range_XeZ[1]} segundos\")","80e243fe":"clean = lambda x: 0 if x < 0 else x\n\ndatos[\"X espera hasta hora pactada\"] = (datos[\"Hora pactada\"] - datos[\"Hora de X\"]).astype('timedelta64[s]').apply(clean)\ndatos[\"Z espera hasta hora pactada\"] = (datos[\"Hora pactada\"] - datos[\"Hora de Z\"]).astype('timedelta64[s]').apply(clean)\n\ndatos[\"X espera a Z sin sesgo\"] = (datos[\"X espera a Z\"] - datos[\"X espera hasta hora pactada\"]).apply(clean)\ndatos[\"Z espera a X sin sesgo\"] = (datos[\"Z espera a X\"] - datos[\"Z espera hasta hora pactada\"]).apply(clean)\n\ndatos[[\n    \"Hora pactada\"\n    , \"Hora de Z\", \"Hora de X\"\n    , \"Z espera a X\", \"X espera a Z\"\n    , \"X espera hasta hora pactada\", \"Z espera hasta hora pactada\"\n    , \"X espera a Z sin sesgo\", \"Z espera a X sin sesgo\"\n]].head()","967cee19":"mean_ZeX = datos[\"Z espera a X sin sesgo\"].mean()\nmean_XeZ = datos[\"X espera a Z sin sesgo\"].mean()\n\nprint(f\"tiempo promedio que Z espera a X es {mean_ZeX}\")\nprint(f\"tiempo promedio que X espera a Z es {mean_XeZ}\")\n\nS_ZeX = datos[\"Z espera a X sin sesgo\"].std()\nS_XeZ = datos[\"X espera a Z sin sesgo\"].std()\n\nrange_ZeX = t.interval(confianza, n-1, mean_ZeX, S_ZeX)\nrange_XeZ = t.interval(confianza, n-1, mean_XeZ, S_XeZ)\n\nprint(f\"El tiempo m\u00e1ximo que debe esperar Z a X para que llegue con una confianza del {confianza*100}% es {range_ZeX[1]} segundos\")\nprint(f\"El tiempo m\u00e1ximo que debe esperar X a Z para que llegue con una confianza del {confianza*100}% es {range_XeZ[1]} segundos\")","f10f6bd1":"la diferencia entre el bienestar percibido entre X y Z es ``0.37458193979933085`` pero es necesario evaluar si no se puede apoyar la idea que esta diferencia es significativa.","e8821e26":"Ahora si tiene sentido segun la prueba de hip\u00f3tesis que validaba que X es m\u00e1s puntal.","49e1d974":"## Fuentes de ayuda\n1. https:\/\/stackoverflow.com\/questions\/15984221\/how-to-perform-two-sample-one-tailed-t-test-with-numpy-scipy\n2. https:\/\/docs.scipy.org\/doc\/scipy\/reference\/generated\/scipy.stats.ttest_1samp.html#scipy.stats.ttest_1samp\n3. https:\/\/fundaciondelcorazon.com\/informacion-para-pacientes\/enfermedades-cardiovasculares\/sindrome-de-tako-tsubo.html\n","83787c8b":"## Z dice que la relaci\u00f3n le sale m\u00e1s cara que a X","d144ff05":"## El bienestar es igual para ambos en una cita (C\u00f3mo X es t\u00f3xico, aparece Y en vez de Z)\n\nSeg\u00fan los datos en promedio, el bienestar de ambos no es tan diferente, pero es necesario evaluar si tal diferencia es estadisticamente significativa o no.\n\n\n$$H_0: \\mu_{Bx} = \\mu_{Bz} $$\n$$H_a: \\mu_{Bx} \\neq \\mu_{Bz}$$\n","a110b9df":"Ambas distribuci\u00f3nes parecen tener sus valores m\u00e1s comunes en torno a cero (No hubo demora), Pero hay mas valores para X.","55c468ce":"En promedio X es m\u00e1s puntual que Z. En promedio X lleg\u00f3 ``61.70`` segundos despu\u00e9s y Z ``119.40`` segundos despu\u00e9s. En este caso se puede realizar una prueba de hip\u00f3tesis de cola sencilla.\n\nDe los datos se podr\u00eda afirmar que X $\\mu_1$ fue m\u00e1s puntual que Z $\\mu_0$ porque tiene una diferencia menor en promedio respecto a la hora pactada. Para evaluar si esta diferencia es estadisticamente significativa.\n\n$$H_0: \\mu_1 \\geq \\mu_0$$\n$$H_a: \\mu_1 < \\mu_0$$\n\n","5a078b19":"Seg\u00fan este resultado es posible afirmar que hay evidencia para rechazar que en promedio Z gast\u00f3 menos o igual que X, apoyando la hip\u00f3tesis alterna de que Z realmente gast\u00f3 m\u00e1s que X. Es importante recordar que al ser un test de una cola,y la funci\u00f3n ``ttest_ind`` funciona para pruebas de doble cola, entonces es necesario dividir el p value entre 2.","49ebf26d":"## Explique es el sindrome de Takotsubo\n\nSeg\u00fan la [fundaci\u00f3n espa\u00f1ola del coraz\u00f3n](https:\/\/fundaciondelcorazon.com\/informacion-para-pacientes\/enfermedades-cardiovasculares\/sindrome-de-tako-tsubo.html) explica que el sindrome de takotsubo, tambi\u00e9n conocido como el \"sindrome del coraz\u00f3n roto\" o \"miocardiopatia de estr\u00e9s\" a una falla cardiaca similar a un paro cardiaco producido generalmente por estr\u00e9s emocional, o f\u00edsico repentino e inesperado, que genera una liberaci\u00f3n excesiva de adrenalina que puede da\u00f1ar el corazon de algunas personas. es importante tener en cuenta que el 85% de los casos reportados son mujeres post-menopausicas.\n\nLo bueno es que el diagnostico es generalmente benigno y solo tiene una mortalidad menor al 5%.","5ec94f3f":"# Historia de X...Z\n\n    AUTOR: NELSON ALIRIO CRUZ \n    Anal\u00edsta: Germ\u00e1n Andr\u00e9s Jej\u00e9n Cort\u00e9s\n\n1. En medio de esa pandemia rara, X est\u00e1 tratando de salvar el a\u00f1o (despu\u00e9s de todo nadie se muere de amor, excepto por el s\u00edndrome de Takotsubo), y en esta situaci\u00f3n T lo llama y salen a cenar. En esta inusual cena, X se da cuenta que puede hablar con el tapabocas puesto.\n2. T presenta X con Z y desde ese momento X sinti\u00f3 mariposas en el estomago con Z. Pero como X est\u00e1 un poco prevenido por los eventos del pasado, decide que debe llevar un registro de los encuentros con Z.\n3. X sale con Z (o Z sale con X?) muchas veces, y el registro de estas salidas esta en la URL https:\/\/raw.githubusercontent.com\/Cruzalirio\/Ucentral\/master\/Bases\/HistoriaXZ.csv","b16106fd":"Para responder esta pregunta se gener\u00f3 la siguiente tabla, con calificaci\u00f3n de 0 para \"indiferente\", 1 para \"benefico\", -1 para \"perjudicial\".\n\nConclusi\u00f3n | X | Y\n-----------|---|----\nX mas puntual|-1|1\nZ tiene mayor bienestar|0|1\nZ gasta m\u00e1s|1|-1\nX esper\u00e1 mas|-1|1\n\nSi sumo los puntajes en total X tiene -1 y Z tiene 2, se puede decir que Z sale mas beneficiado de la relaci\u00f3n que X.","9f24c68a":"## De acuerdo a lo anterior,\u00bfUsted cree que la relaci\u00f3n es igualitaria?\n\n","c2e56e23":"La prueba de hip\u00f3tesis muestra que se rechaza la hip\u00f3tesis nula debido a que hay muy fuerte evidencia de que la diferencia en el promedio de bienestar si es estadisticamente significativa, es decir el bienestar no es el mismo.\n\n## \u00bfCuanto es lo m\u00e1ximo que debe esperar X a Z y viceversa?\n\nPara ver el iempo de espera que cada persona tuvo antes que llegara el otro (si el otro no ha llegado) se crea una columna con esta diferenca de tiempo en segundos, pero no se tienen en cuenta los registros donde la persona de referencia fue la que llego despu\u00e9s.","c62215ea":"Podemos sacar un agregado del gasto de cada persona y comparar el costo total del gasto entre X y Z.","23349ff4":"## En una salida promedio gastan m\u00e1s de 50K","89016756":"hay evidencia estadistica que X es m\u00e1s puntual que Z ya que el p value es menor al 5%.","c1dc4d29":"## Carga de datos","0a0e0944":"No hay valores nulos, pero es necesario convertir los calores de la fecha y hora al formato adecuado.","2fdc7e2e":"## X es m\u00e1s puntual que Z\n\nPara verificar si X es m\u00e1s puntual que Z, es necesario realizar un calculo entre las horas registradas en segundos respecto a la hora pactada. Adem\u00e1s las diferencias negativas (llegadas m\u00e1s temprano) seran convertidas a 0 ya que no hubo demora.","17fa275e":"A pesar que el gasto promedio de la muestra es menor, la hip\u00f3tesis alterna que gastan en promedio mas de 50000 tiene evidencia estadistica de ser verdad con una significacia de ``5%``.","a3b723c7":"Las siguientes afirmaciones se deben aceptar o refutar usando lo aprendido en clase de inferencia\n\u03b1 = 5%\n1. Z dice que la relaci\u00f3n le sale m\u00e1s cara que a X\n2. X es m\u00e1s puntual que Z\n3. En una salida promedio gastan m\u00e1s de 50K\n4. El bienestar es igual para ambos en una cita (C\u00f3mo X es t\u00f3xico, aparece Y en vez de Z)\n5. \u00bfCuanto es lo m\u00e1ximo que debe esperar X a Z y viceversa?\n6. De acuerdo a lo anterior,\u00bfUsted cree que la relaci \u0301on es igualitaria?\n7. Explique es el sindrome de Takotsubo\n\n## Importaci\u00f3n de librerias","5942d3e0":"Pero esta respuesta es contra intuitiva dado que se habia dicho que X es m\u00e1s puntual, si eso es cierto deber\u00eda ser mas la espera de X a Z que al revez como lo muestra este resultado. Es posible que este resultado est\u00e9 sesgado pues se debe tener en cuenta que es posible que en algunas citas Z llegara demasiado temprano, lo c\u00faal no es justo ya que la hora pactada deber\u00eda ser la referencia. Entonces, se tomara el tiempo de espera relativo a la hora pactada.","55a8e44c":"Es importante hallar en intervalo de confianza a una confianza del 95%.","09c7c078":"Se observa que en promedio Z gasta m\u00e1s que X, la diferencia en promedio es de apenas ``4386.963210702339``. El punto es evaluar si es estadisticamente significativa la diferecia, es decir si realmente Z gasta m\u00e1s de X en la relaci\u00f3n.\n\nEn t\u00e9rminos de pruebas de hip\u00f3tesis me gustar\u00eda probar estadisticamente si el promedio del gasto de Z $\\mu_1$ es estadisticamente mayor respecto al gasto promedio de X $\\mu_2$.\n\n$$H_0: \\mu_1 \\leq \\mu_0$$\n$$H_a: \\mu_1 \\gt \\mu_0$$","8db403a9":"En promedio el gasto conjunto es de ``48518.07``, pero para saber si existe evidencia para afirmar que gastaron en promedio m\u00e1s de ``50K`` ya que los datos nos muestran un valor inferior. observando la distribuci\u00f3n de los gastos, el valor m\u00e1s comun est\u00e1 alrededor de ``50K``.\n\n\n$$H_0: \\mu_{gasto} \\leq 50K$$\n$$H_a: \\mu_{gasto} > 50K$$"}}