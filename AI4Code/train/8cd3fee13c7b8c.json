{"cell_type":{"8978eb05":"code","749aade6":"code","85e0522f":"code","f9bf793c":"code","b54cbda7":"code","d05d52c5":"code","24581f0b":"code","8e1c78ef":"code","588907f3":"code","eea5fe84":"code","3e96b4b1":"code","be84fab7":"code","03a92d36":"code","fc9f879a":"code","cb5d7b1e":"code","ce95a31a":"code","d226f786":"code","012218ea":"code","1a2d137e":"code","4929f430":"code","bc5cd552":"code","804dafa8":"code","21dd92db":"code","dd03b6ae":"code","c741be97":"code","4a75f826":"code","bf2efaa0":"code","a6217d6e":"code","e690bf8a":"code","36e0c5c9":"markdown","ba0dc34c":"markdown","c39301d8":"markdown","06053792":"markdown","a85ac90d":"markdown","ad395f14":"markdown","46064734":"markdown","55ca7d0d":"markdown","fce13647":"markdown","162a09d0":"markdown","d7234d92":"markdown","80a9a58d":"markdown","a189c80b":"markdown","a54d3dbb":"markdown","97433f0c":"markdown","c899013b":"markdown","f64779d6":"markdown","ad660081":"markdown","59f86ffb":"markdown","e1a20b9a":"markdown","3ae97070":"markdown","0e9f1068":"markdown","8b236aac":"markdown","3645e592":"markdown","f6499984":"markdown","1e9d2352":"markdown"},"source":{"8978eb05":"import numpy as np \nimport pandas as pd \nimport matplotlib\nimport matplotlib.pyplot as plt\nimport os\nimport seaborn as sns\nimport geopandas\nimport folium\nsns.set(style=\"darkgrid\")","749aade6":"data = pd.read_csv(\"..\/input\/as_seekers_monthly.csv\")\nprint(data.head())\n","85e0522f":"data.drop(columns=['Country'],axis=1,inplace=True)","f9bf793c":"print('Dataset contains null values: ',data.isnull().values.any())","b54cbda7":"print(data.info())","d05d52c5":"data['Origin']=data['Origin'].astype('category')\ndata['Month']=data['Month'].astype('category')\ndata['Origin'].replace({'Iran (Islamic Rep. of)':'Iran','Syrian Arab Rep.':'Syria','Russian Federation':'Russia','Dem. Rep. of the Congo':'Congo Rep. '},inplace=True)\ndata.info()\n","24581f0b":"data.describe(include='all')","8e1c78ef":"print('Number of incoming groups of asylum seekers per month')\nprint('-----------------------------------------------------')\nprint(pd.value_counts(data.Month))","588907f3":"print('Number of distinct countries in the sample : ',len(data.Origin.unique()))","eea5fe84":"print('Total groups of asylum seekers per origin')\nprint('-------------------------------------')\nprint(data['Origin'].value_counts()[:10])\n","3e96b4b1":"print('Total asylum seekers per origin country')\nprint('---------------------------------------')\nprint(data[['Origin','Value']].groupby('Origin').sum().sort_values(by='Value',ascending=False)[1:10])\n","be84fab7":"total_values=data.groupby('Origin').sum().drop('Year',axis=1)\ntotal_values.sort_values(by='Value',inplace=True,ascending=False)\n\nmatplotlib.rcParams.update({'font.size': 20})","03a92d36":"fig, axs = plt.subplots(1, 2, figsize=(25, 10))\nsns.countplot(data['Origin'],order=pd.value_counts(data['Origin']).iloc[:20].index,palette=\"Blues_d\",ax=axs[0])\nsns.barplot(x=total_values[0:20].index,y=total_values['Value'][0:20],palette=\"Blues_d\",ax=axs[1])\naxs[0].set_title('20 countries with highiest count of groups of asylum seekers',fontsize=16 )\naxs[1].set_title('Total asylum seekers, top 10 countries',fontsize=16)\n\nfor ax in fig.axes:\n    plt.sca(ax)\n    plt.xticks(size=14,rotation=45)\n    plt.yticks(size=14,)\nplt.show()","fc9f879a":"fig, axs = plt.subplots(1, 2, figsize=(25, 15))\ndata['Origin'].value_counts()[:10].plot(kind='pie',ax=axs[0])\ndata.Value.groupby(data.Origin).sum().sort_values(ascending=False)[:10].plot(kind='pie',ax=axs[1])\naxs[0].set_title('Count of groups',fontsize=16)\naxs[0].set_ylabel('')\naxs[1].set_title('Total asylum seekers',fontsize=16)\naxs[1].set_ylabel('')\nplt.show()","cb5d7b1e":"world = geopandas.read_file(geopandas.datasets.get_path('naturalearth_lowres'))\nworld['centroid_col']=world.centroid\norigin_counts=data['Origin'].value_counts()\ntop_origin_counts=origin_counts.nlargest(10)\ntop_countries=world[world['name'].isin(list(top_origin_counts.keys()))]\n","ce95a31a":"all_countries=world.loc[world['name'].isin(list(data['Origin']))]\nall_countries.reset_index(drop=True, inplace=True)\nall_countries.set_index('name',inplace=True)\nfor country in all_countries.index:\n    all_countries.loc[country,'sum']=total_values.loc[country].values[0]","d226f786":"fig, ax = plt.subplots(figsize=(25,15))\nplt.title('Total asylum seekers origin countries heatmap ( all countries accounted)',fontsize=16)\nworld.plot(ax=ax, color='white', edgecolor='black')\nall_countries.plot(column='sum',legend='True',ax=ax, edgecolor='black',cmap='Reds')\nplt.show()","012218ea":"top_countries=world[world['name'].isin(list(origin_counts.nlargest(20).keys()))]\n","1a2d137e":"\nmap=folium.Map([37.993670, 23.731474], zoom_start=3)\nfolium.Marker([37.993670, 23.731474], popup='<i>Greece<\/i>',icon=folium.Icon(color='green', icon='home')).add_to(map)\n\nfor index, row in all_countries.iterrows():\n   folium.Circle(\n      location=[row['centroid_col'].y,row['centroid_col'].x],\n      tooltip=row.name,\n      popup=row['sum'],\n      radius=row['sum']*12,\n      color='crimson',\n      fill=True,\n      fill_color='crimson'\n   ).add_to(map)\nmap","4929f430":"plt.figure(figsize=(22,11))\nsns.lineplot(np.arange(2000,2019,1),data.groupby('Year').sum()['Value'])\nplt.grid()\nplt.xticks(np.arange(2000,2019,1),fontsize=14)\nplt.yticks(np.arange(0,70000,5000),fontsize=14)\nplt.title('Total sum of asylum seekers for each year',fontsize=16)\nplt.axvline(x=2014,color='r',linestyle='--')\nplt.text(2013.7,40000,'Beginning of refugee crisis',rotation=90,fontsize=14)\nplt.grid()\nplt.show()","bc5cd552":"plt.figure(figsize=(25,11))\norder=['January','February','March','April','May','June','July','August','September','October','November','December']\nsns.scatterplot(data.Year,data.Value,hue=data.Month,hue_order=order,palette=sns.color_palette(\"hls\", 12))\nplt.xticks(np.arange(2000,2019,1),fontsize=14)\nplt.yticks(np.arange(0,4000,500),fontsize=14)\nplt.title('Asylum seekers 2000-2018 for each year and per month ',fontsize=16)\nplt.show()\n","804dafa8":"top_data=data[data.Origin.isin(total_values[:10].index)]\nplt.figure(figsize=(22,12))\nplt.title('Asylum seekers for each year. Top 10 countries',fontsize=16)\nsns.lineplot(top_data.Year,top_data.Value,hue=top_data.Origin,hue_order=total_values[:10].index)\nplt.xticks(np.arange(2000,2019,1),fontsize=14)\nplt.yticks(np.arange(0,4000,500),fontsize=14)\nplt.xlabel('Year',fontsize=14)\nplt.ylabel('Asylum seekers',fontsize=14)\nplt.axvline(x=2014,color='r',linestyle='--')\nplt.text(2013.7,2000,'Beginning of refugee crisis',rotation=90,fontsize=14)\nplt.show()","21dd92db":"group1=data[data['Origin'].isin(['Afghanistan','Pakistan','Iraq'])]\n","dd03b6ae":"plt.figure(figsize=(22,12))\nplt.title('Total asylum seekers from Pakistan,Iraq and Afghanistan',fontsize=16)\nsns.lineplot(group1.Year,group1.Value,hue=group1.Origin,hue_order=['Pakistan','Iraq','Afghanistan'])\nplt.xlabel('Year',fontsize=14)\nplt.ylabel('Asylum seekers',fontsize=14)\nplt.xticks(np.arange(2000,2019,1),fontsize=14)\nplt.yticks(np.arange(0,4000,500),fontsize=14)\n\nplt.axvline(x=2014,color='r',linestyle='--')\nplt.text(2013.7,1800,'Beginning of refugee crisis',rotation=90,fontsize=14)\nplt.show()","c741be97":"data['period']=data['Year']\ndata.loc[data['Year']<2014,'period']='before'\ndata.loc[data['Year']>=2014,'period']='after'\n\ndata['period']=data['period'].astype('category')\ndata['period'].cat.reorder_categories(['before', 'after'], inplace=True)\nperiod_sums=data.groupby('period')['Value'].sum()","4a75f826":"print('Asylum seekers groups count:')\nprint(data['period'].value_counts())\nprint('------------------------')\nprint('Total asylum seekers:')\nprint(period_sums)\n\nfig, axs = plt.subplots(1, 2, figsize=(21, 13))\nsns.barplot(period_sums.index,period_sums.values,ax=axs[0])\nplt.suptitle('Asylum seekers before and after the refugee crisis of 2014',fontsize=16)\naxs[0].set_title('Total asylum seekers ',fontsize=14)\naxs[0].set_xticklabels(['before 2014','after 2014'],fontsize=14)\norder=['January','February','March','April','May','June','July','August','September','October','November','December']\nsns.countplot(data['period'],ax=axs[1],hue=data['Month'],hue_order=order)\naxs[1].set_title('Number of groups',fontsize=14)\naxs[1].set_xticklabels(['before 2014','after 2014'],fontsize=14)\nplt.show()\n\n","bf2efaa0":"top_data=data[data['Origin'].isin(total_values[:10].index)]\ntop_data.reset_index(drop=True, inplace=True)","a6217d6e":"plt.figure(figsize=(24,12))\nsns.boxplot(x=\"Origin\",y=\"Value\",hue=\"period\",data=top_data)\nplt.title('Boxplots of asylum seekers before and after 2014',fontsize=16)\nplt.xlabel('Origin',fontsize=14)\nplt.yticks(np.arange(0,4000,500),fontsize=14)\nplt.ylabel('Asylum seekers',fontsize=14)\nplt.show()","e690bf8a":"plt.figure(figsize=(22,10))\nsns.boxplot(x=\"Month\",y=\"Value\",hue=\"period\",data=top_data,order=order, linewidth=2.5)\nplt.title('Boxplots of asylum seekers for each month, before and after 2014',fontsize=16)\nplt.xlabel('Months',fontsize=14)\nplt.ylabel('Asylum seekers',fontsize=14)\nplt.yticks(np.arange(0,4000,500),fontsize=14)\n\nplt.show()\n","36e0c5c9":"Also, lets check if there are any null values: ","ba0dc34c":"So even though almost the same number of groups came from certain countries throughout these 19 years, the groups of these countries contained significantly different amount of people.\nFor example Nigeria has almost the same number of groups with Afganistan but also has amost 6 times smaller amount of total people.\nIn general, the number of groups is pretty similar between the top countries but the number of people in each group varies a lot for each country.\n","c39301d8":"* We can clearly see the high rate of increase of Syrian asylum seekers after 2014.\n* Also, there are some indications that groups of countries have similar patterns. For example, from 2015 to 2017 we see that Pakistan,Iraq and Afghanistan have very similar behaviour. So additionaly lets make the same graph only for these three countries to see if it'll support our indications.","06053792":"\n\n**Thanks a lot for your time**","a85ac90d":" <a id=\"Data_Visualization\"><\/a>\n<h2><b>Data Visualization<\/b><\/h2>\n\n","ad395f14":"<h1><center><b>Asylum seekers and the refugee crisis in Greece<\/b><\/center><\/h1>\n<h3><p><cite>Leandros Evangelidakis<\/cite> - July 2019<\/p><\/h3>\n","46064734":"Lets see the same information in pie charts","55ca7d0d":"<a id=\"Data_preprocessing\"><\/a>\n<h2><b>Data preprocessing<\/b><\/h2>\n\nFortunately the data is already in a pretty clean form so there is a little work to do.\nFirst,lets remove the 'Country' column since we don't need it (it's just 'Greece').","fce13647":"To begin with, we will produce two charts. One for the count of groups asylum seekers and another for the total sum of asylum seekers ,for each country.","162a09d0":"* First of all, we see that the total sum of asylum seekers after the crisis has increased by an amount of ~12.6%. \n    We should keep in mind that the class 'before' refers to 14 years and the class 'after' to only 5 years. \n    So in 5 years, Greece became the host of more refugees than the total sum of them for the past 14 years.\n* In the second graph we clearly see the difference of group counts between the two classes. This is expected since we know that after the crisis, the groups of asylum seekers contained lots of people (sometimes thousands).<br>\n   Also, we see that before the crisis of 2014, the monthly count of group arrivals was increasing throughout     the year, having its maximum values at April and June. On the other hand, after the crisis, we see that we have more arrivals in the first season of the year, with maximum values at January     and February and with a decreasing rate.\n","d7234d92":" <a id=\"introduction\"><\/a>\n \n <h2><b>Introduction<\/b><\/h2>\n \n<u>Some important facts:<\/u>\n \n*  In 2014, over three million people fled the Syrian Civil War.<br>\n*  Also, in 2015 there was a huge rise of people from Middle East and South and Central Asia who fled their countries due to several wars or fear of prosecution.<br>\n*  EU was the main recipient of these refugee waves. \n*  Greece, in particular, is one of the two main routes of entry to the EU, called the \u201cSoutheastern Mediterranean Route\u201d <br>\n*  Greek society was still sufferning from the well known economic crisis and had to deal with tens of thousands of people c\u03bfming into the Greek islands from Turkey, to seek asylum.<br>\n*  In 2015, according to the UNHCR, there was an  increase of 850% in asylum seekers arrivals in Greece,compared to 2014.<br>\n\n   This is my first Kaggle project(Data science beginner) and the target is to explore and analyze some of the information we have about the refugee crisis and make a few comments on the results. The data comes from the UNHCR official website and contains information about groups of people coming to Greece to seek for asylum from 2000 to 2018.\n\n<table>\n<tr>\n<th>\n<img src='https:\/\/www.aljazeera.com\/mritems\/imagecache\/mbdxxlarge\/mritems\/Images\/2017\/11\/25\/fd0bbc056f6344f68e0d8a47183f4bea_18.jpg'><\/img>\n<th>\n<img src='http:\/\/i66.tinypic.com\/149pfr.png'><\/img>\n<\/table>","80a9a58d":" <a id=\"Data_exploration\"><\/a>\n \n \n<h2><b> Descriptive Statistics<\/b><\/h2>","a189c80b":"Lets visualize these data in geographical maps for a better perspective.\n","a54d3dbb":"Now lets check how the total sum of asylum seekers changed over the years.\nIn the following graph, the impact of the refugee crisis which started at 2014 is obvious.","97433f0c":"* Now, lets change the type of the 'Origin' and 'Month' to categories instead of objects.\n\n* Also, by looking at the origin names it seems that some countries have pretty long names. \n    For example, Iran is named as: 'Iran (Islamic Rep. of)'. \n    In order to make things a bit easier, we will simplify some of these:","c899013b":"\n* **'Value' column.**\n    So from the results above we see that the mean number of asylum seekers(per group) is 36.77. The standard deviation is 144.6 and the maximum value in the sample is 3565 people(!). Also we see that 75% of the values of the groups are less than 19 people and half of them less than 5 people.\n* **'Year' column.**\n    We see that 50% of the refugee groups came to Greece before 2010 and 75% of them before 2014.\n* **'Month' column**. As we see from the above results, from 2000 to 2018, most groups of asylum seekers came to Greece in spring and the most frequent month is March.    \n* **'Origin' column.**  We see that there are 142 different countries in the dataset.","f64779d6":"<a name=\"more\"><\/a>\nNext, we will split the data into two categories, one for the data **before** the crisis of 2014 and another for the data **after** 2014.\n\n","ad660081":"Lets also see how the monthly number of Asylum seekers was before and after 2014 in splitted groups.","59f86ffb":"Some comments on each column of the data :","e1a20b9a":"Lets see the same data splitted for each month.","3ae97070":"<a id='before'><\/a>\n\n<h3><b>Before and after the refugee crisis<\/b><\/h3>","0e9f1068":"# Table of contents\n1. [Introduction](#introduction)\n2. [Data preprocessing](#Data_preprocessing)\n3. [Descriptive Statistics](#Data_exploration)\n4. [Data Visualization](#Data_Visualization)<br>\n    4.1 [Geographical plots](#spatial)<br>\n    4.1 [Before and After the crisis](#before)\n\n\n","8b236aac":"Now lets see how many asylum seekes where for those two time periods graphicaly ","3645e592":"Lets also see the values of these ten countries before and after 2014.","f6499984":"<a id=\"spatial\"><\/a>\n<h3><b>Geographical plots<\/b><\/h3>","1e9d2352":"These three countries indeed seem to have many similarities. "}}