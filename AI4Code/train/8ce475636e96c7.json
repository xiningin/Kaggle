{"cell_type":{"d44de6ae":"code","5dab99e9":"code","74adec29":"code","21d3a297":"code","f247e547":"code","96ab8418":"code","d9da8102":"code","23d1a2a7":"code","c29316a7":"code","f573a3bc":"code","4782d2a5":"code","e75c661a":"code","a2acc057":"code","e7cb3b57":"code","a1df3947":"code","2f4ed213":"code","6c4425e8":"code","83084830":"code","7da2964e":"markdown","3603abf3":"markdown","d299d23a":"markdown","97def314":"markdown"},"source":{"d44de6ae":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.\n\nfrom subprocess import check_output\nprint(check_output([\"ls\", \"..\/input\"]).decode(\"utf8\"))\nimport warnings\nwarnings.filterwarnings(\"ignore\")","5dab99e9":"#import data\ndata = pd.read_csv('\/kaggle\/input\/biomechanical-features-of-orthopedic-patients\/column_2C_weka.csv')","74adec29":"# Make a first look at the data\ndata.info()","21d3a297":"data.head()\n# This is significant for me to make a decision for making normalization.\n# The values show me that a normalization process will be needed.","f247e547":"data[\"class\"].unique()\n# I have 2 types.","96ab8418":"A = data[data[\"class\"] == \"Abnormal\"]\nN = data[data[\"class\"] == \"Normal\"]","d9da8102":"# int will be much useful for our algorithm. So let's change it.\ndata[\"class\"] = [1 if each == 'Abnormal' else 0 for each in data[\"class\"]]","23d1a2a7":"data[\"class\"].value_counts()","c29316a7":"# I really don't know why but when I tried to visualize the data as 3D, I encountered with some problem that I can't find why these errors occur yet.\n# Because of this problem I made a Scatter Plot and I added 3D plot on my final as an additional visualization.\n# My 2D Scatter Plot includes the other features that I could not give place to my 3D plot.\n\nplt.scatter(A.sacral_slope,A.degree_spondylolisthesis,color='r',label=\"Abnormal\",alpha = 0.3)\nplt.scatter(N.sacral_slope,N.degree_spondylolisthesis,color='g',label=\"Normal\",alpha = 0.3)\nplt.xlabel(\"sacral_slope\")\nplt.ylabel(\"degree_spondylolisthesis\")\nplt.legend()\nplt.show()","f573a3bc":"y = data[\"class\"].values\nx_data = data.drop([\"class\"], axis=1)\n\n# Normalization\nx = (x_data- np.min(x_data)) \/ (np.max(x_data)-np.min(x_data)).values","4782d2a5":"#import train test split\nfrom sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.5,random_state = 1)","e75c661a":"from sklearn.neighbors import KNeighborsClassifier\nknn = KNeighborsClassifier(n_neighbors = 3) # default neighbour = 5\nknn.fit(x_train,y_train) # train the model\nprediction = knn.predict(x_test) # with using this, you can see our machine's predictions","a2acc057":"print(\"{} nn score: {}\".format(3,knn.score(x_test,y_test)))","e7cb3b57":"# k is hyperparameter, whixh means you have to adjust it, or:\n# find k values\nscore_list = []\nbest_score = 0 # for score comparation\nbest_k = 0 # for finding best k value\n\nfor each in range(1,20):\n    knn2 = KNeighborsClassifier(n_neighbors = each)\n    knn2.fit(x_train,y_train) # modeli e\u011fitiyoruz\n    score_list.append(knn2.score(x_test,y_test))\n    if (knn2.score(x_test,y_test) > best_score):\n       best_score = knn2.score(x_test,y_test)\n       best_k = each\n    \nplt.plot(range(1,20), score_list) # x_axis=range(1,100), yaxis=score_list\nplt.xlabel(\"K values\")\nplt.ylabel(\"Accuracy\")\nplt.show()\n\nprint(\"Best score: \", best_score)\nprint(\"Best k values: \", best_k)\n","a1df3947":"# Let's make a final comparation. I will create a dataframe which I can see predictions and test results much easier. \nprediction = knn.predict(x_test)\nlist_prediction = []\nlist_ytest = []\nfor each in range(0,len(prediction)):\n    if prediction[each] == 1: \n       list_prediction.append(\"Abnormal\")\n    else: list_prediction.append(\"Normal\")\nprint(list_prediction) # I wrote both of these to be sure my list is accurate,\nprint(prediction) # it means I want to be sure that 1's are for abnormal and 0's are for normal","2f4ed213":"list_ytest = []\nfor each in range(0,len(y_test)):\n    if y_test[each] == 1: \n       list_ytest.append(\"Abnormal\")\n    else: list_ytest.append(\"Normal\")\nprint(list_ytest) # I wrote both of these to be sure my list is accurate,\nprint(y_test) # it means I want to be sure that 1's are for abnormal and 0's are for normal","6c4425e8":"# Let's make a dataframe includes 2 of these \naccuracy = []\nfor each in range(0,30):\n    if list_prediction[each:each+1] == list_ytest[each:each+1]:\n        accuracy.append(\"Same\")\n    else: accuracy.append(\"Not Same\")\n\nlist_label = [\"Prediction\",\"Test\",\"Accuracy\"]\nlist_col = [list_prediction[:30],list_ytest[:30],accuracy] # Check for first 30 values\nzipped = list(zip(list_label,list_col)) # in order to create a new dataframe, zipped columns and labels\ndata_dict = dict(zipped) \ndf_compare = pd.DataFrame(data_dict)\ndf_compare","83084830":"# Now, let's make a quick look for how abnormality affects other features \n# I will make 3D Scatter Plot in order to show much more features\n# Visualization\nimport plotly.graph_objects as go\nimport plotly.io as pio\n\ntrace1 = go.Scatter3d(\n    x=A.pelvic_incidence,\n    y=A.pelvic_radius,\n    z=A.lumbar_lordosis_angle,\n    name = \"Abnormal\",\n    mode='markers',\n    marker=dict(\n        size=10,\n        color='rgb(255,0,0)',   \n    )\n)\n\ntrace2 = go.Scatter3d(\n    x=N.pelvic_incidence,\n    y=N.pelvic_radius,\n    z=N.lumbar_lordosis_angle,\n    name = \"Normal\",\n    mode='markers',\n    marker=dict(\n        size=10,\n        color='rgb(0,0,255)',\n    )\n)\n\ndata = [trace1,trace2]\nlayout = go.Layout(\n    margin=dict(\n        l=0,\n        r=0,\n        b=0,\n        t=0  \n    ) \n)\nfig = go.Figure(data=data, layout=layout)\npio.show(fig)\n","7da2964e":"It can be seen that all of the prediction is not accurate. Remember, we have max 82% accuracy as you can see above.","3603abf3":"***INTRODUCTION***\n* In this topic, I will try to analyze biomechanical features of orthopedic patients.\n* KNN Algorithm will help me for some predictions.","d299d23a":"I have 2 dataset, but I want to search whether classification is normal, or abnormal, so I need just one of these.","97def314":"Finally, my codes have been completed and I got acceptable results. Like I said, yet, I really have no idea what's wrong with when 3D plot's codes on Scatter Plot's codes but I will find and fix it as soon as possible. \nEventhough this troble, I hope you enjoyed, thank you for reading :)"}}