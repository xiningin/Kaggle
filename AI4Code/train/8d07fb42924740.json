{"cell_type":{"a2daf95e":"code","532dc129":"code","e5176448":"code","cd1f9e51":"code","6f9bcae1":"code","ce4623fe":"code","05326c2f":"code","7903b86a":"code","852f2245":"code","a829c6c6":"code","489370a0":"code","e50bff52":"code","c2671be5":"code","ade2ad34":"code","6e81e26f":"code","394c4240":"code","5b3e8ea5":"code","24d2be3d":"code","2aaf3cf2":"code","8c409328":"code","0a71a34b":"code","d5d7f673":"code","bee136ca":"code","7174d3ee":"code","814c813e":"code","d0cb6e52":"code","737e2805":"code","5550cce3":"code","1a4e847f":"code","94725960":"code","6d707795":"code","dc3ecb0c":"code","e8bd345b":"code","d3228d24":"code","7a7c87a1":"code","c7fe1cdb":"code","1888b38d":"code","33c0f41a":"code","e01ccdf4":"code","1e1fdd07":"code","e5f477cb":"code","49bb435f":"code","1d19d4e5":"code","395f5b92":"code","b36acdbd":"code","b71c2593":"code","7f16c6b3":"code","c8a4bded":"code","e473b1c0":"code","d6a31362":"code","a098f7f7":"code","ff26efce":"code","7929d17c":"code","31415690":"markdown","8c8c20c1":"markdown","41d47f3f":"markdown","91779b86":"markdown","60425114":"markdown","39c94b2c":"markdown","8962e96b":"markdown","7fb134ff":"markdown","20c13507":"markdown","4479a606":"markdown","c2d0377f":"markdown","a1f1588c":"markdown","63ae6c56":"markdown","da632e23":"markdown","4deed1ac":"markdown"},"source":{"a2daf95e":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np","532dc129":"df = pd.read_csv(\"..\/input\/crop-production-in-india\/crop_production.csv\")\ndf[:5]","e5176448":"df.isnull().sum()","cd1f9e51":"# Droping Nan Values\ndata = df.dropna()\nprint(data.shape)\ntest = df[~df[\"Production\"].notna()].drop(\"Production\",axis=1)\nprint(test.shape)","6f9bcae1":"for i in data.columns:\n    print(\"column name :\",i)\n    print(\"No. of column :\",len(data[i].unique()))\n    print(data[i].unique())","ce4623fe":"sum_maxp = data[\"Production\"].sum()\ndata[\"percent_of_production\"] = data[\"Production\"].map(lambda x:(x\/sum_maxp)*100)","05326c2f":"data[:5]","7903b86a":"sns.lineplot(data[\"Crop_Year\"],data[\"Production\"])","852f2245":"plt.figure(figsize=(25,10))\nsns.barplot(data[\"State_Name\"],data[\"Production\"])\nplt.xticks(rotation=90)","a829c6c6":"sns.jointplot(data[\"Area\"],data[\"Production\"],kind='reg')","489370a0":"sns.barplot(data[\"Season\"],data[\"Production\"])","e50bff52":"data.groupby(\"Season\",axis=0).agg({\"Production\":np.sum})","c2671be5":"data[\"Crop\"].value_counts()[:5]","ade2ad34":"top_crop_pro = data.groupby(\"Crop\")[\"Production\"].sum().reset_index().sort_values(by='Production',ascending=False)\ntop_crop_pro[:5]","6e81e26f":"rice_df = data[data[\"Crop\"]==\"Rice\"]\nprint(rice_df.shape)\nrice_df[:3]","394c4240":"sns.barplot(\"Season\",\"Production\",data=rice_df)","5b3e8ea5":"plt.figure(figsize=(13,10))\nsns.barplot(\"State_Name\",\"Production\",data=rice_df)\nplt.xticks(rotation=90)\nplt.show()","24d2be3d":"top_rice_pro_dis = rice_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_rice_pro_dis[:5]\nsum_max = top_rice_pro_dis[\"Production\"].sum()\ntop_rice_pro_dis[\"precent_of_pro\"] = top_rice_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_rice_pro_dis[:5]","2aaf3cf2":"plt.figure(figsize=(18,12))\nsns.barplot(\"District_Name\",\"Production\",data=top_rice_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","8c409328":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=rice_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","0a71a34b":"sns.jointplot(\"Area\",\"Production\",data=rice_df,kind=\"reg\")","d5d7f673":"coc_df = data[data[\"Crop\"]==\"Coconut \"]\nprint(coc_df.shape)\ncoc_df[:3]","bee136ca":"sns.barplot(\"Season\",\"Production\",data=coc_df)","7174d3ee":"plt.figure(figsize=(13,10))\nsns.barplot(\"State_Name\",\"Production\",data=coc_df)\nplt.xticks(rotation=90)\nplt.show()","814c813e":"top_coc_pro_dis = coc_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_coc_pro_dis[:5]\nsum_max = top_coc_pro_dis[\"Production\"].sum()\ntop_coc_pro_dis[\"precent_of_pro\"] = top_coc_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_coc_pro_dis[:5]","d0cb6e52":"plt.figure(figsize=(18,12))\nsns.barplot(\"District_Name\",\"Production\",data=top_coc_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","737e2805":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=coc_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","5550cce3":"sns.jointplot(\"Area\",\"Production\",data=coc_df,kind=\"reg\")","1a4e847f":"sug_df = data[data[\"Crop\"]==\"Sugarcane\"]\nprint(sug_df.shape)\nsug_df[:3]","94725960":"sns.barplot(\"Season\",\"Production\",data=sug_df)","6d707795":"plt.figure(figsize=(13,8))\nsns.barplot(\"State_Name\",\"Production\",data=sug_df)\nplt.xticks(rotation=90)\nplt.show()","dc3ecb0c":"top_sug_pro_dis = sug_df.groupby(\"District_Name\")[\"Production\"].sum().reset_index().sort_values(\n    by='Production',ascending=False)\ntop_sug_pro_dis[:5]\nsum_max = top_sug_pro_dis[\"Production\"].sum()\ntop_sug_pro_dis[\"precent_of_pro\"] = top_sug_pro_dis[\"Production\"].map(lambda x:(x\/sum_max)*100)\ntop_sug_pro_dis[:5]","e8bd345b":"plt.figure(figsize=(18,8))\nsns.barplot(\"District_Name\",\"Production\",data=top_sug_pro_dis)\nplt.xticks(rotation=90)\nplt.show()","d3228d24":"plt.figure(figsize=(15,10))\nsns.barplot(\"Crop_Year\",\"Production\",data=sug_df)\nplt.xticks(rotation=45)\n#plt.legend(rice_df['State_Name'].unique())\nplt.show()","7a7c87a1":"sns.jointplot(\"Area\",\"Production\",data=sug_df,kind=\"reg\")","c7fe1cdb":"data1 = data.drop([\"District_Name\",\"Crop_Year\"],axis=1)","1888b38d":"data_dum = pd.get_dummies(data1)\ndata_dum[:5]","33c0f41a":"x = data_dum.drop(\"Production\",axis=1)\ny = data_dum[[\"Production\"]]\nfrom sklearn.model_selection import train_test_split\nx_train,x_test,y_train,y_test = train_test_split(x,y,test_size=0.33, random_state=42)\nprint(\"x_train :\",x_train.shape)\nprint(\"x_test :\",x_test.shape)\nprint(\"y_train :\",y_train.shape)\nprint(\"y_test :\",y_test.shape)\n","e01ccdf4":"x_train[:5]","1e1fdd07":"from sklearn.ensemble import RandomForestRegressor\nmodel = RandomForestRegressor()\nmodel.fit(x_train,y_train)\npreds = model.predict(x_test)","e5f477cb":"from sklearn.metrics import r2_score\nr = r2_score(y_test,preds)\nprint(\"R2score when we predict using Randomn forest is \",r)","49bb435f":"from sklearn.linear_model import LinearRegression\nmodel = LinearRegression()\nmodel.fit(x_train,y_train)","1d19d4e5":"preds = model.predict(x_test)","395f5b92":"from sklearn.metrics import mean_squared_error, r2_score\nmean_squared_error(y_test,preds)\nr2_score(y_test,preds)","b36acdbd":"tst = test.drop([\"District_Name\",\"Crop_Year\"],axis=1)\ntst_dum = pd.get_dummies(tst)\ntst_dum[:5]","b71c2593":"y_test = tst_dum.copy()\nprint(x_train.shape)\nprint(y_test.shape)","7f16c6b3":"def common_member(x_train,x_test): \n    a_set =  set(x_train.columns.tolist())\n    b_set =  set(x_test.columns.tolist())\n    if (a_set & b_set): \n        return list(a_set & b_set) ","c8a4bded":"com_fea = common_member(x_train,tst_dum)\nlen(com_fea)","e473b1c0":"from sklearn.ensemble import RandomForestRegressor\nmodel = RandomForestRegressor()\nmodel.fit(x_train[com_fea],y_train)\npreds = model.predict(y_test[com_fea])","d6a31362":"preds","a098f7f7":"test[\"production\"] = preds","ff26efce":"test[:10]","7929d17c":"test.to_csv('Prediction.csv')","31415690":"# Prediction\nModel 1: Randomn forest has high r2score when compare to other model","8c8c20c1":"# 3. Sugarcane","41d47f3f":"# Data Exploration","91779b86":"# Feature Selection","60425114":"# Model -2 : Linear Regression","39c94b2c":"# Insights:\nFrom Data Visualization:\nRice production is mostly depends on Season, Area, State(place).","8962e96b":"* cocunut production is directly proportional to area\n* its production is also gradually increasing over a time of period\n* production is highin kerala state\n* it does not depends on season","7fb134ff":"# Insighits:\n* Sugarecane production is directly proportional to area\n* And the production is high in some state only.","20c13507":"# Data Visulization","4479a606":"### 1.Rice","c2d0377f":"# Model -1: Random Forest","a1f1588c":"# Test Train Split","63ae6c56":"# Insight from Cocunut Production","da632e23":"# 2. Coconut","4deed1ac":"## Each type of crops required various area & various season. so, I'm going to pic top crop from this data"}}