{"cell_type":{"4a217e52":"code","0afd8943":"code","6c595119":"code","8d7d36a6":"code","6f769d47":"code","b7a11de2":"code","11241e9e":"code","49069d4a":"code","d6e3a440":"code","eebe00a9":"code","4845d1f9":"code","2ec760fe":"code","cad4bd82":"code","164eac40":"markdown","7833f6bd":"markdown","e44e23ae":"markdown","eb4a6f4a":"markdown","a60d58d5":"markdown","bccb4fb2":"markdown","b4fc3555":"markdown"},"source":{"4a217e52":"\nimport numpy as np \nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n%matplotlib inline\n\nfrom google.cloud import bigquery\nimport bq_helper\nusa_names = bq_helper.BigQueryHelper(active_project=\"bigquery-public-data\", dataset_name=\"usa_names\")\n\nclient = bigquery.Client()","0afd8943":"query = \"\"\"SELECT year, gender, name, sum(number) as number FROM `bigquery-public-data.usa_names.usa_1910_current` GROUP BY year, gender, name\"\"\"\nnames = usa_names.query_to_pandas_safe(query)\nnames.to_csv(\"usa_names.csv\")\n","6c595119":"names.sample(10)\n\n","8d7d36a6":"dataset_ref = client.dataset(\"usa_names\", project=\"bigquery-public-data\")\n\ndataset = client.get_dataset(dataset_ref)","6f769d47":"tables = list(client.list_tables(dataset))\n\nfor table in tables:  \n    print(table.table_id)\n","b7a11de2":"client.list_rows(table, max_results=5).to_dataframe()","11241e9e":"##Now for a more specific query to get the exact info I'm looking for\n\nquery = \"\"\"SELECT year, gender, name, sum(number) as number FROM `bigquery-public-data.usa_names.usa_1910_current`  WHERE name = 'Hunter'  GROUP BY year, gender, name\"\"\"\nhunter = usa_names.query_to_pandas_safe(query)\nhunter.sample(10)","49069d4a":"##Separating the data set into a female and male set\nhunter_f = hunter[hunter.gender.isin(['F'])]\nhunter_m = hunter[hunter.gender.isin(['M'])]\n\n#print(hunter_m.head())\n#print(hunter.isnull)","d6e3a440":"plt.figure(figsize=(24,12))\nplt.title('Frequency of the name Hunter over the years')\n\n\nsns.lineplot(y=hunter_m['number'], x=hunter_m['year'], label=\"Male\")\nsns.lineplot(y=hunter_f['number'], x=hunter_f['year'], label='Female')\n\n\n#plt.xlabel(\"Date\")\n#plt.ylabel(\"Value($)\")\n#sns.set_style(\"white\")","eebe00a9":"safe_config = bigquery.QueryJobConfig(maximum_bytes_billed=10**10)\n\nquery = \"\"\"\n        SELECT year, gender, name, sum(number) as number\n        FROM `bigquery-public-data.usa_names.usa_1910_current`\n        WHERE year >= 1998 and year <=2019\n        GROUP BY year, gender, name\n        ORDER BY year\n\n        \"\"\"\n\nnames_volume = client.query(query, job_config=safe_config)\nnames_volume = names_volume.to_dataframe()\nnames_volume.sample(10)\n##While the .head() function is typically used to check if a data set looks correctly configured i tend to use sample so that the data i'm looking at is always called different","4845d1f9":"mean_data =  names_volume.groupby('year')['number'].mean()\ndisplay(mean_data)\nnames_volume.describe()","2ec760fe":"plt.figure(figsize=(36,12))\n\nsns.kdeplot(data=names_volume[\"number\"], shade=True)","cad4bd82":"plt.figure(figsize=(36,12))\n\nsns.violinplot(x=names_volume[\"number\"], color='green')","164eac40":"This project is mostly for practicing SQL\/BigQuery.\n\nInsperation: How common would it be to name ones offspring 'Hunter'? Could a name such as 'Hunter' be considered unisex?","7833f6bd":"Below is the code to copy the entire database into a dataframe\/CSV file. Since this notebook is for practicing SQL I wont be referencing this other than to double check my work.","e44e23ae":"So between the kde plot and the violin plot we can see that it is fairly common to have a name that is not fairly common.\n\nThe last thing I would like to do is chart how the name 'Hunter' compares to the 25%, mean, and 75% mark for the data set on a simple line graph (should be done in the next couple of days)...\n\n","eb4a6f4a":"Looking at the average population with each name listed per year one could say that anyone with a name of 300 or more would be considered common. However, we have neither checked for, nor adjusted for outliers (which the describe function shows us are common). So lets do a simple kde plot to see (a bar or violin graph would also be a good choice)","a60d58d5":"As you can see above, the name 'Hunter' wasn't common until around the 1980s, and was not present as a female name until a bit later.\nOne could easily copy and substitute this code for other possible names.\n\nNext, to answer the question \"would this name be considered normal?\", I will compare the frequency of this name to the mean name frequency. For the sake of succinctness I will be limiting the data to the last 20 years.","bccb4fb2":"For the cell below I have two commented out print statements, these were originally in so that I could figure out a mistake I made (I had failed to include part of matplotlib) and I chose to leave them in for later reference","b4fc3555":"To begin, I'm copying the Data set to a csv file, which I will put to the side for later use."}}