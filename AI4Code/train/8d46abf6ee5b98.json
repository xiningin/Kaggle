{"cell_type":{"fffdf505":"code","f855c197":"code","0bfd72c5":"code","38a987aa":"code","5207f203":"code","a470b8e1":"code","88ef5f0b":"code","04878bf2":"code","f53717e6":"code","1c75b79d":"code","4eb28820":"code","ca8dfed5":"code","924e1ca8":"code","cd349772":"code","d14a06ed":"code","e9769350":"code","dd10f6b5":"code","34766946":"code","ca483bdc":"code","33a1ffc0":"code","cb5a2801":"code","314e72d9":"code","f96f419e":"code","9c0deeaa":"code","6533596e":"code","fc0dba6d":"code","db2a3f3e":"code","80df2dc5":"code","90ed8933":"code","d062bf43":"markdown","fd6c4ecf":"markdown","fca87a4e":"markdown","3e37dd73":"markdown","9a869736":"markdown","73b09944":"markdown","a8162654":"markdown","caf43d39":"markdown","a2df296c":"markdown","f9b7700b":"markdown","12960971":"markdown","362cca30":"markdown","9b3d7413":"markdown","1cf4e710":"markdown","c2446b76":"markdown","3a76c5c0":"markdown","9c49748e":"markdown","796eafdd":"markdown"},"source":{"fffdf505":"#import Required modles\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\npd.set_option('display.expand_frame_repr', True)\nimport seaborn as sns","f855c197":"#load the data\ndf=pd.read_csv('..\/input\/NYSERDA_DER_Metric_Data.csv')\ndf.head()","0bfd72c5":"#lets have a look at some basic attributes of the dataset we have\n#shape of the dataframe\nprint('The shape of the DataFrame is ', df.shape)\nprint('-'*100)\n#info of the dataframe\nprint(df.info())\nprint('-'*100)\n#columns of the dataframe\nprint('The columns of df are\\n',df.columns.tolist())\nprint('-'*100)\n#finding any missing values\nprint('No of Missing Values per column\\n', df.isnull().sum())\n\nprint('-'*100)\n#looking for unique values per column\nprint('Unique values per columns\\n',df.nunique())","38a987aa":"#lets us now take care of the other missing values\n#lets visualize the missing data distribution\n\nimport missingno as msn\n\nmsn.matrix(df)\n","5207f203":"#dropping Missing Values from the selected columns\ndf1=df.drop(columns=['Address Line 2','Alternate Name(s)','Facility Website (external)','Floor Area (ft\u00b2)', 'No. of Occupancy Units','Gas Utility',  'Located in Flood Plain'])\ndf1.head(5)\nprint(df1.shape)","a470b8e1":"#Filling missing values by its preceding term\ndf1=df1.iloc[1:]\ndf1=df1.fillna(method='ffill')\ndf1.head()","88ef5f0b":"# Checking the updated dataset \nmsn.matrix(df1)","04878bf2":"#just for futrue reference i have downloaded the dataset as an excel to my local\ndf1.to_excel('submissionnineleaps1396.xlsx')","f53717e6":"# If we check in the dataset, we can see their are few NaN values in the subcategory column. Since subcategory column is a categorical column we will use mode to fill in the Nanvalues\ndf1['Subcategory'].head()\ndf1['Subcategory'].transform(lambda x: x.fillna(x.mode()[0])).head()","1c75b79d":"#Lets look at the data set again\ndf1.head()","4eb28820":"#analsing the city with highest electric power generation\nf,ax=plt.subplots(figsize=(16,12))\ndf2=df1.groupby('City')['Total Rated Electric Generation (kW)'].sum().reset_index().set_index('City')\ndf3=df2.sort_values(['Total Rated Electric Generation (kW)'],ascending=False)[:15]\nsns.barplot(x=df3.index,y=df3['Total Rated Electric Generation (kW)'])\nfor p in ax.patches:\n    ax.annotate(format(round(p.get_height(),2)), (p.get_x()+0.05, p.get_height()+3))\n    ax.set_title('Top 15 Cities with highest rated electric Generation',fontsize=25)\n\nplt.xticks(rotation=45)\nplt.show()    \n\n\n","ca8dfed5":"#Cities with lowest power consmption\nf,ax=plt.subplots(figsize=(16,12))\ndf2=df1.groupby('City')['Total Rated Electric Generation (kW)'].sum().reset_index().set_index('City')\ndf3=df2.sort_values(['Total Rated Electric Generation (kW)'],ascending=True)[64:75]\nsns.barplot(x=df3.index,y=df3['Total Rated Electric Generation (kW)'])\nfor p in ax.patches:\n    ax.annotate(format(round(p.get_height(),2)), (p.get_x()+0.05, p.get_height()+3))\n    ax.set_title('Bottom 10 Cities with Lowest rated electric Generation',fontsize=25)\n\nplt.xticks(rotation=45)\nplt.show()    \n","924e1ca8":"#Power consumption by categories and subcategories\ndf3=df1.groupby(['Category','Subcategory'])['Total Rated Electric Generation (kW)'].mean().reset_index().set_index('Category')[:20]\n\ndf3.columns=['Subcategory','Avg Power consumption by categories']\n\n\ndf3","cd349772":"#Total power consption by each categories\ndf4=df1.groupby(['Category'])['Total Rated Electric Generation (kW)'].sum().reset_index().set_index('Category')\ndf4.sort_values('Total Rated Electric Generation (kW)',ascending=True)[:20]\ndf4.columns=['Total power consumption per categories']\ndf4\n","d14a06ed":"#Visualizing the categorical consmption of power\nf,ax=plt.subplots(figsize=(18,12))\nsns.barplot(x=df4.index,y=df4['Total power consumption per categories'])\nfor p in ax.patches:\n    ax.annotate(format(round(p.get_height(),2)), (p.get_x()+0.05, p.get_height()+9))\n    ax.set_title('Categorical wise power consumption',fontsize=25)\n\nplt.xticks(rotation=45)\nplt.show()    \n","e9769350":"#top 10 weather stations\nplt.subplots(figsize=(18,12))\ndf1['Source Weather Station for Ambient Temperature Data'].value_counts()[:10].plot(kind='bar')\nplt.title('Top 10 Weather stations',fontsize=25)","dd10f6b5":"#city wise facility counts\ndf2=df1.groupby('City')['Facility Name'].count().reset_index().set_index('City')\ndf3=df2.sort_values(['Facility Name'],ascending=False)[:20]\ndf3","34766946":"#City wise facility count\n\nplt.subplots(figsize=(18,12))\nsns.barplot(x=df3.index,y=df3['Facility Name'])\nfor p in ax.patches:\n    ax.annotate(format(round(p.get_height(),2)), (p.get_x()+0.05, p.get_height()+9))\n    ax.set_title('No of facilities per City',fontsize=20)\n\nplt.xticks(rotation=45)\nplt.title('City wise facility count',fontsize=20)\nplt.show()    \n","ca483bdc":"df1.head()","33a1ffc0":"df5=df1.groupby('City')[\"Longitude (\u00b0E)\", \"Latitude (\u00b0N)\"].mean()\ndf6=df1.groupby('City')['Total Rated Electric Generation (kW)'].mean()\ndf65=df1['State']\ndf7=pd.concat([df5,df6],axis=1)\ndf8=df7.sort_values(['Total Rated Electric Generation (kW)'],ascending=False)[1:100]\n\ndf8.head()","cb5a2801":"df8['City']=df8.index\ndf8.head(3)\n\n","314e72d9":"\nplt.subplots(figsize=(16,12))\nsns.scatterplot( x=df8[\"Longitude (\u00b0E)\"], y=df8[\"Latitude (\u00b0N)\"],s=df8['Total Rated Electric Generation (kW)'])\nplt.title('Area wise electric power generation in New York',fontsize=25)\nplt.xlabel('Longitude of new york',fontsize=15)\nplt.ylabel('latitude of New york',fontsize=15)\nplt.show()\n","f96f419e":"df1.describe()","9c0deeaa":"df1[df1['Total Rated Heat Generation (MBtu\/h)']==127000]","6533596e":"df1[df1['Total Rated Electrical Discharge Capacity (kW)']==20000]\n","fc0dba6d":"df1[df1['Total Rated Electrical Storage Capacity (kWh)']==40000]","db2a3f3e":"df1[df1['Total Rated Cooling Energy Storage Capacity (ton-hour)']==30000]","80df2dc5":"df77=df1.groupby('City')['Latitude (\u00b0N)','Longitude (\u00b0E)','Total Rated Electric Generation (kW)'].mean().reset_index()\ndf77.head()","90ed8933":"\nimport webbrowser\nimport folium\nfrom IPython.display import display\n\nUSA_COORDINATES = (43.0902 , -76.7129  )\n\n# create map of New York using latitude and longitude values\nmyMap1 = folium.Map(location=USA_COORDINATES, zoom_start=7)\n\nmyMap1 = folium.Map(location=USA_COORDINATES, zoom_start=8)\n\nfor lat, lon, city ,energy in zip(df77['Latitude (\u00b0N)'], df77['Longitude (\u00b0E)'],df77['City'],df77['Total Rated Electric Generation (kW)']):\n    folium.Marker(\n        [lat, lon],\n       \n        popup = ('City: ' + str(city).capitalize()+ '<br>'\n                 'Energy: ' + str(energy)\n                )\n       \n        ).add_to(myMap1)\nmyMap1\n\n\n","d062bf43":"    -  In the state of NY, the highest no of weather stations are KLGA, followed by KJFK and KALB","fd6c4ecf":"    -  On an Average, College or University of education category is the highest consumer of power\n    -  In a broader category, Offsite resource category is the highest consumer of power","fca87a4e":"    -  Hospitals of New York city scores highest in total rated heat generation(MBtu\/h) which equals to a value of 127000, which has facility NYU Langone Medical Center, with KLGA source weather.","3e37dd73":"   -  New york city is the highest prodce of electricity with 41812.67KW, followed by Bronx with 37500KW \n   - Haverstaw and Lewiston is the lowest interms of power generation with only 35KW of power,followed by Adams city which produces 100KW  ","9a869736":"   -  College or university category of Ithaca in NY state has the highest Cooling Energy Storage Capacity (30000ton\/hr).It has facility name Cornell University Weinhold Chilled Water Plant with KITH source weather station.","73b09944":"   -  Long Island Power Authority (PSEG-LI), an offsite resource of East Hampton City of new york has the Highest Electrical Storage Capacity (kWh) with 40000kWh.  It has facility name East Hampton Energy Storage Center with KJFK source weather station.","a8162654":"# Nineleaps Project:\n\n#### EDA of NYSERDA data containing facilities information for distributed power generation for the state of New York, USA. \n\n   ## 1.Introduction: \n   #### In this project ,we are going to use python+ jupyter notebook to do the analysis. The data is in excel format which I have downloaded in my local drive.","caf43d39":"    -  In the city of NY , New york city has highest no of weather stations(91), followed by Brooklyn(73) and Bronx(30)","a2df296c":" -  Now as we have taken care of the missing values, we can further proceed to do the analysis","f9b7700b":"-  Now we have 28 features, as we dropped 7 features which had missing values.\n-  Those columns having fewer missing values are replaced by its preceding value in their respective columns.\n     ","12960971":"   -  After checking the missing value distribution we can see the vast no of values missing in the dataset. Those columns having more than 50% of the values missing are dropped in the next step.","362cca30":"## 3.Analysis:","9b3d7413":"### 1.2 Basic details about the data:","1cf4e710":"## 2. Missing Values:","c2446b76":"    -  New York State Electric and Gas of Utility of Offsite resource in Stephentown city of NY has the Highest Electrical Discharge Capacity with 20000KW. It has facility name Stephentown Spindle with KLGA source weather station.","3a76c5c0":"> ## 4.Geographical distribution of the cities and Total energy generation:","9c49748e":"### 1.1 Load the Data:","796eafdd":"   -  The data we have has 35 features(columns) and 811 observations(rows)\n   -  The data has missing values in various columns(e.g adress line 2,alternate name, floor area, occupant units,located in flood plain etc.\n    -  The dataset has 13 object features,8 interger features,13 float features and 1 datetime features.\n    - The State of New York has \n           -  811 numbers of different facilities\n           -  301 numbers of different cities\n           -  33 different source weather stations\n           -  19 different categories of modules and with 53 subcategories"}}