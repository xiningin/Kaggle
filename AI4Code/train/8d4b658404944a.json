{"cell_type":{"7c127057":"code","f844125d":"code","dce47d04":"code","035e3137":"code","d92d5b07":"code","1456a553":"code","a21635e1":"code","9f7acb21":"code","4d4ff021":"code","ca2bd9fa":"code","55234c5f":"code","85e0b141":"code","bc40d516":"code","a8750daa":"code","08e42f77":"code","7904117c":"code","f07efa39":"code","da2bad76":"markdown","24e981b7":"markdown","636fdd45":"markdown","a5bab131":"markdown","1a446a51":"markdown","60e43867":"markdown","8a010a93":"markdown","c30e7e62":"markdown","b3e417d0":"markdown","ab74ee54":"markdown","67f1e76c":"markdown","3372adf5":"markdown","e37d84ca":"markdown","afdc96f6":"markdown","8808ef53":"markdown","d55254a3":"markdown","ae76135c":"markdown","7c34f7bc":"markdown","92d911fa":"markdown","26b2e132":"markdown","12f9edf6":"markdown","946ac198":"markdown","eb911de0":"markdown","e2b10f0f":"markdown","75fe585a":"markdown"},"source":{"7c127057":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline\nsns.set()","f844125d":"# convert date to python date format right when loading data\ndf = pd.read_csv('\/kaggle\/input\/covid19-czech-republic\/covid19-czech.csv', parse_dates=['date'])","dce47d04":"print('Size of dataset: {}'.format(df.shape))\ndf.head()","035e3137":"df = df.fillna('')","d92d5b07":"# daily\/date data level\ndf_daily = df[df['date'] < '2020-07-02'].groupby(['date']).max()[['daily_tested','daily_infected','daily_cured','daily_deaths','daily_cum_tested','daily_cum_infected','daily_cum_cured','daily_cum_deaths']].reset_index()\n\n# regional data level\ndf_region = df[df['region'] != ''].groupby(['region']).agg(\n    region_accessories_qty=pd.NamedAgg(column='region_accessories_qty', aggfunc='max'), \n    infected=pd.NamedAgg(column='infected', aggfunc='sum'),\n    cured=pd.NamedAgg(column='cured', aggfunc='sum'),\n    death=pd.NamedAgg(column='death', aggfunc='sum')\n).reset_index()\n\n# detail data level\ndf_detail = df[['date','region','sub_region','age','sex','infected','cured','death','infected_abroad','infected_in_country']].reset_index(drop=True)\n","1456a553":"df_daily['daily_active'] = df_daily['daily_infected'] - df_daily['daily_cured'] - df_daily['daily_deaths']\ndf_daily['daily_cum_active'] = df_daily['daily_cum_infected'] - df_daily['daily_cum_cured'] - df_daily['daily_cum_deaths']\n#df_daily = df_daily.groupby(df_daily['date'].dt.to_period('W').dt.start_time).sum().reset_index()","a21635e1":"plt.figure(figsize=(20,5))\nplt.subplot(1,2,1)\nplt.fill_between(df_daily.date, df_daily.daily_tested, color=\"purple\", label='active',alpha=0.5)\nplt.xticks(rotation=45)\nplt.title('Daily tests performed')\n\nplt.subplot(1,2,2)\nplt.fill_between(df_daily.date, df_daily.daily_cum_tested, color=\"purple\", label='active',alpha=0.5)\nplt.xticks(rotation=45)\nplt.title('Daily tests performed- cumulative sum')\n\nplt.show()","9f7acb21":"plt.figure(figsize=(20,8))\nsns.lineplot(df_daily.date, df_daily.daily_cured, color=\"green\", label='cured')\nsns.lineplot(df_daily.date, df_daily.daily_deaths, color=\"red\", label='death')\nsns.lineplot(df_daily.date, df_daily.daily_infected, color=\"blue\", label='infected')\nsns.lineplot(df_daily.date, df_daily.daily_active, color=\"orange\", label='active')\nplt.xticks(rotation=45)\nplt.title('Daily cured \/ death \/ infected \/ active')\nplt.show()","4d4ff021":"plt.figure(figsize=(20,12))\nplt.subplot(4,1,1)\nsns.lineplot(df_daily.date, df_daily.daily_cured, color=\"green\", label='Daily new cured cases')\nplt.xlabel('')\n\nplt.subplot(4,1,2)\nsns.lineplot(df_daily.date, df_daily.daily_deaths, color=\"red\", label='Daily new death cases')\nplt.xlabel('')\n\nplt.subplot(4,1,3)\nsns.lineplot(df_daily.date, df_daily.daily_infected, color=\"blue\", label='Daily new infected cases')\nplt.xlabel('')\n\nplt.subplot(4,1,4)\nsns.lineplot(df_daily.date, df_daily.daily_active, color=\"orange\", label='Daily new active cases')\nplt.xlabel('')\n\nplt.show()","ca2bd9fa":"plt.figure(figsize=(20,8))\n\nplt.subplot(2,2,1)\nplt.fill_between(df_daily.date, df_daily.daily_cured, color=\"green\", label='Daily new cured cases', alpha=0.5)\nplt.legend(loc='best')\nplt.xlabel('')\n\nplt.subplot(2,2,2)\nplt.fill_between(df_daily.date, df_daily.daily_deaths, color=\"red\", label='Daily new death cases',  alpha=0.5)\nplt.legend(loc='best')\nplt.xlabel('')\n\nplt.subplot(2,2,3)\nplt.fill_between(df_daily.date, df_daily.daily_infected, color=\"blue\", label='Daily new infected cases',  alpha=0.5)\nplt.legend(loc='best')\nplt.xlabel('')\n\nplt.subplot(2,2,4)\nplt.fill_between(df_daily.date, df_daily.daily_active, color=\"orange\", label='Daily new active cases',  alpha=0.5)\nplt.legend(loc='best')\nplt.xlabel('')\n\nplt.show()","55234c5f":"plt.figure(figsize=(20,5))\n\nplt.subplot(1,2,1)\nsns.lineplot(df_daily.date, df_daily.daily_cum_cured, color=\"green\", label='cured')\nsns.lineplot(df_daily.date, df_daily.daily_cum_deaths, color=\"red\", label='death')\nsns.lineplot(df_daily.date, df_daily.daily_cum_infected, color=\"blue\", label='infected')\nsns.lineplot(df_daily.date, df_daily.daily_cum_active, color=\"orange\", label='infected')\nplt.legend(loc='best')\n\nplt.subplot(1,2,2)\nplt.fill_between(df_daily.date, df_daily.daily_cum_cured, color=\"green\", label='cured', alpha=0.5)\nplt.fill_between(df_daily.date, df_daily.daily_cum_deaths, color=\"red\", label='death',  alpha=0.5)\nplt.fill_between(df_daily.date, df_daily.daily_cum_infected, color=\"blue\", label='infected',  alpha=0.5)\nplt.fill_between(df_daily.date, df_daily.daily_cum_active, color=\"orange\", label='active',  alpha=0.5)\nplt.legend(loc='best')\n\nplt.show()","85e0b141":"plt.figure(figsize=(20, 15))\nplt.subplot(2,2,1)\nsns.barplot(x=df_region.infected, y=df_region.region)\nplt.title('Number of infected')\nplt.subplot(2,2,2)\nsns.barplot(x=df_region.cured, y=df_region.region)\nplt.title('Number of cured')\nplt.subplot(2,2,3)\nsns.barplot(x=df_region.death, y=df_region.region)\nplt.title('Number of death')\nplt.subplot(2,2,4)\nsns.barplot(x=df_region.region_accessories_qty, y=df_region.region)\nplt.title('Health care accessories delivered')\n\nplt.show()","bc40d516":"# quick fix for sex & age for further analysis\ndf_detail['sex'] = df_detail['sex'].replace('', np.NaN)\ndf_detail = df_detail.dropna()\ndf_detail['age'] = df_detail['age'].astype('int64')","a8750daa":"plt.figure(figsize=(20,5))\nplt.subplot(1,3,1)\nsns.barplot(x=df_detail.sex, y=df_detail.infected, estimator=np.sum)\nplt.title('Infected by Sex')\n\nplt.subplot(1,3,2)\nsns.barplot(x=df_detail.sex, y=df_detail.cured, estimator=np.sum)\nplt.title('Cured by Sex')\n\nplt.subplot(1,3,3)\nsns.barplot(x=df_detail.sex, y=df_detail.death, estimator=np.sum)\nplt.title('Death by Sex')\n\nplt.show()","08e42f77":"plt.figure(figsize=(20,15))\nplt.subplot(3,1,1)\nsns.barplot(x=df_detail.age, y=df_detail.infected, estimator=np.sum)\nplt.title('Infected by age')\nplt.xticks(rotation=90)\n\nplt.subplot(3,1,2)\nsns.barplot(x=df_detail.age, y=df_detail.cured, estimator=np.sum)\nplt.title('Cured by age')\nplt.xticks(rotation=90)\n\nplt.subplot(3,1,3)\nsns.barplot(x=df_detail.age, y=df_detail.death, estimator=np.sum)\nplt.title('Death by age')\nplt.xticks(rotation=90)\n\nplt.show()","7904117c":"plt.figure(figsize=(20, 20))\nplt.subplot(1,3,1)\nsns.barplot(x=df_detail.infected, y=df_detail.sub_region, estimator=np.sum)\nplt.title('Number of infected')\nplt.subplot(1,3,2)\nsns.barplot(x=df_detail.cured, y=df_detail.sub_region, estimator=np.sum)\nplt.title('Number of cured')\nplt.subplot(1,3,3)\nsns.barplot(x=df_detail.death, y=df_detail.sub_region, estimator=np.sum)\nplt.title('Number of death')\n\nplt.show()","f07efa39":"df_import = df_detail[df_detail['infected_abroad'] == 'Y'].groupby(['date', 'infected_abroad','infected_in_country']).sum()[['infected', 'cured', 'death']].reset_index()\n\nplt.figure(figsize=(20,15))\nplt.subplot(3,1,1)\nsns.barplot(x=df_import['infected_in_country'], y=df_import['infected'], estimator=np.sum)\nplt.title('Infected by country of import')\n\nplt.subplot(3,1,2)\nsns.barplot(x=df_import['infected_in_country'], y=df_import['cured'], estimator=np.sum)\nplt.title('Cured by country of import')\n\nplt.subplot(3,1,3)\nsns.barplot(x=df_import['infected_in_country'], y=df_import['death'], estimator=np.sum)\nplt.title('Died by country of import')\n\nplt.show()","da2bad76":"It seems that male & female has pretty much same chance to be infected, but male dies much more likely than female... if I could switch now!","24e981b7":"## Daily test performed\nIt seems maximum number of tests has been done in May and was decreasing from that time, it has stabilized at start of June.","636fdd45":"Another chart to compare all 4 stats","a5bab131":"## Age comparison\nExperts are talking that old people are risky group of people in pandemic... can we prove it?","1a446a51":"## Daily cumulative sum of cured \/ death \/ infected \/ active\nCumulative sums are also nice to see. Do you think 2nd wave of Covid-19 has started in Czech Republic?","60e43867":"# Split data\nNow we create 3 datasets, each will be used in different analyze","8a010a93":"I could see that there is unusually high number of infected cases in Karvina, unusually high number of deaths in Chleb and Ostrava.","c30e7e62":"That's all from my analysis, hope you liked it. Feel free to use dataset and create your own visualizations, let me know then ;)","b3e417d0":"Right it's not as easy to read it, especially to compare deaths as there is much less of them. I am going to separate charts now. Can you see **increase of daily active** cases from April (when hit bottom) up to end of June?","ab74ee54":"## Imported cases from abroad\nIt is known that a lot of Covid-19 cases are imported from abroad. People are coming back to Czech Republic and bringing also unwanted guest with them.","67f1e76c":"### Thanks for checking my notebook, if you liked it, make sure to vote for for this notebook!","3372adf5":"# Covid-19 Analysis in Czech Republic 2020","e37d84ca":"Quick look on first few records in dataset. Dataset contains almost 18k rows and 19 columns.","afdc96f6":"## Daily cured \/ death \/ infected \/ active\nIt may be interesting to compare all these statistics","8808ef53":"What I could find is that **Moravskoslezsky kraj** had a lot of infected people (more than capital Prague), but got very poor health care accessories delivery. On the other hand, Prague got much more accessories, had less infected, but still more deaths... maybe how accessories sums were calculated was not correct.","d55254a3":"## Sub-region statistics\nIs there anything interesting when looking on data from sub-region point of view?","ae76135c":"Right, you will find out that mortality on Covid-19 is starting from 40 years and dramatically increase with age!","7c34f7bc":"# Load dataset\nKeep in mind dataset contains data on 3 different levels of granularity and must be separated into 3 dataset","92d911fa":"# Feature engineering\nWe will create new calculation **daily_active** and **daily_cum_active** that calculates what are active cases. It's pretty good to see how many population is infected at the time and consider if health care can handle it.","26b2e132":"# Exploratory Data Analysis\nNow let's draw several charts to see details about pandemic in Czech Republic. I know there could be much much more, but there are different kernels with tens of different visualizations :)","12f9edf6":"## Regional statistics\nWhat are differences between regions? Are some doing better than the other one? I will also compare accessories delivered to region with other metrics if health care accessories can have impact on evolution of pandemic (it should, or not?)","946ac198":"## Sex comparison\nMale or female has more deaths? What you think, is it better to be male or female at these days? :)","eb911de0":"Today I am going to take a look on Covid-19 pandemic evolution in Czech Republic. Data we are using are provided by Ministry of Czech Republic and are composed of multiple files and merged all together, so we need to load just 1 file at all. Data are from end of January 2020 up to end of June 2020.","e2b10f0f":"Just quickly fill missing values with empty string, as data are on different granularity level, there are going to be few missing values that we can simply impute.","75fe585a":"Most of imports seems to be from Italy (where pandemic has started in Europe), Austria and Ukraine. We know just about 1 person that has died (when Covid-19 was imported) and this one was from Ukraine."}}