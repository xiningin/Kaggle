{"cell_type":{"4e0b30c6":"code","949771d6":"code","e51695b6":"code","ac0a68be":"code","5960f7b0":"code","0841e7e4":"code","261f4eb5":"code","25b68ac2":"code","4db70594":"code","3383cf14":"code","9663ebca":"code","1d902741":"code","84b9d035":"code","3d778ea6":"code","3abc55b3":"code","9d49a298":"code","e08650a7":"code","e90a172d":"code","00d867a7":"code","edf1ac71":"code","ce98d0f7":"code","6219c15a":"code","301fe1d6":"code","f0ee834c":"code","cd7e7dbc":"code","ed27c9ac":"code","2d4ca462":"code","6fea374a":"code","671ba1c7":"code","9badeeda":"code","658688e1":"code","437934aa":"code","01dade15":"code","8559812c":"code","0046beec":"code","ebdb6794":"code","94f6f48c":"code","6aae3c88":"code","d6c1f5d6":"code","8a2ee648":"code","43f5062e":"code","0bf1756e":"code","1f71d1ff":"code","f845402a":"code","770f5bc6":"code","ae5704c1":"code","07a0c7d3":"markdown","2e4516d4":"markdown","1f8b7b4f":"markdown","1fb798eb":"markdown","d69fe5b1":"markdown","aa20cee9":"markdown","1c5ab4f2":"markdown","45c21ab5":"markdown","0c1ed73a":"markdown","6cae0c8e":"markdown","0b243390":"markdown","2a208424":"markdown","bcb598ae":"markdown","ef8b08cc":"markdown","07cfb9a0":"markdown","34f31aa4":"markdown","aec68f4f":"markdown","01dbc030":"markdown","04a4f455":"markdown","5e1481d4":"markdown","ddf0add4":"markdown","4ec07596":"markdown","6a338430":"markdown","20deea7d":"markdown","9d26ba40":"markdown","dd769799":"markdown","9fae3697":"markdown","2e67e150":"markdown","e1bc81af":"markdown","cb3447aa":"markdown","ae52e71b":"markdown","7a5dd04a":"markdown","4509ecbb":"markdown","929ed02d":"markdown","7a511660":"markdown","567696b2":"markdown"},"source":{"4e0b30c6":"import numpy as np\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\nimport seaborn as sns","949771d6":"pd.set_option(\"display.max_rows\", 10)\nsns.set()  # Setting seaborn as default style\n%matplotlib inline","e51695b6":"df = pd.read_csv('..\/input\/bachelor-degree-majors-by-age-sex-and-state\/Bachelor_Degree_Majors.csv')\ndf","ac0a68be":"df.head()","5960f7b0":"df.tail()","0841e7e4":"df.describe()","261f4eb5":"df.info()","25b68ac2":"# Checking for duplicates\r\ndf[df.duplicated()].sum()","4db70594":"# Removing rows that contains '25 and older' as a value in 'Age Group'\r\ndf = df[df[\"Age Group\"] != \"25 and older\"]","3383cf14":"# Removing the 'Total' data value in the 'Sex' Column\r\ndf = df[df[\"Sex\"] != \"Total\"]","9663ebca":"# Converting data type from (Dtype: object) to (Dtype: int)\r\ndef convert(string):\r\n    return int(string.replace(',', ''))\r\n\r\n\r\nfor col in df.iloc[:,3:]:\r\n    df[col] = df[col].apply(convert)","1d902741":"# Merging 'Science and Engineering' & 'Science and Engineering Related Fields' columns together into a new column called 'STEM'\r\ndf['STEM'] = df['Science and Engineering'] + df['Science and Engineering Related Fields']\r\ndf = df.drop(['Science and Engineering', 'Science and Engineering Related Fields'], axis = 1)","84b9d035":"# Some minor adjustments to satisfy the OCD \ud83d\udc7d\r\n\r\n# Reset the index to start from zero\r\ndf.reset_index(drop=True, inplace=True)\r\n\r\n# Rearrange the columns\r\ndf = df[['State', 'Sex', 'Age Group', \"Bachelor's Degree Holders\", 'STEM', 'Business', 'Education', 'Arts, Humanities and Others']]\r\n\r\n# Renaming the column to remove the single quotes\r\ndf.rename(columns={\"Bachelor's Degree Holders\": 'Bachelors Degree Holders'}, inplace=True)","3d778ea6":"# Final form\r\ndf","3abc55b3":"# Group the dataframe by states\r\nd1 = df.groupby(['State']).sum().reset_index()\r\n\r\n# Sorting the number of bachelor's degree holders in descending order\r\nd1.sort_values(by='Bachelors Degree Holders', ascending=False, inplace=True)","9d49a298":"plt.figure(figsize=(18,14))\r\nsns.barplot(x=\"Bachelors Degree Holders\", y=\"State\", data=d1)","e08650a7":"# Another way to the see the result\r\nd1.style.background_gradient(cmap='Blues')","e90a172d":"d2 = df.groupby(['State']).sum().reset_index()","00d867a7":"columns = d2.columns[2:]\r\n\r\ni=1\r\nplt.figure(figsize=(15,22))\r\n\r\nfor col in columns:\r\n\tplt.subplot(2,2,i)\r\n\tsns.barplot(x=col, y='State', data=d2.sort_values(by=col, ascending=False))\r\n\ti+=1\r\n\r\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1, wspace=0.6, hspace=0.2)","edf1ac71":"d3 = df.groupby(['State', 'Sex']).sum().reset_index()","ce98d0f7":"plt.figure(figsize=(18,14))\r\nsns.barplot(x = \"Bachelors Degree Holders\", y = \"State\", hue = \"Sex\", data = d3, palette=\"cool\")","6219c15a":"d4 = df.groupby(['State', 'Sex']).sum().reset_index()","301fe1d6":"columns = d4.columns[3:]\n\ni=1\nplt.figure(figsize=(15,22))\n\nfor col in columns:\n\tplt.subplot(2,2,i)\n\tsns.barplot(x = col, y = \"State\", hue = \"Sex\", data = d4, palette=\"cool\")\n\ti+=1\n\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1, wspace=0.6, hspace=0.2)","f0ee834c":"d5 = df.groupby(['Sex']).sum().reset_index()\r\nd5","cd7e7dbc":"columns = d5.columns[1:]\r\n\r\ni=1\r\nplt.figure(figsize=(20,10))\r\n\r\nfor col in columns:\r\n\tplt.subplot(1,5,i)\r\n\tplt.title(col)\r\n\tplt.pie(d5[col], labels=d5['Sex'], autopct='%.1f%%', colors=['#AA6AEA', '#6AAAEA'], pctdistance=0.5, labeldistance=1.1)\r\n\r\n\t# add a circle at the center to transform it in a donut chart\r\n\tmy_circle=plt.Circle( (0,0), 0.7, color='white')\r\n\tp=plt.gcf()\r\n\tp.gca().add_artist(my_circle)\r\n\ti+=1","ed27c9ac":"d6 = df.groupby(['Sex', 'Age Group']).sum().reset_index()\r\nd6","2d4ca462":"plt.figure(figsize=(7,7))\r\nsns.barplot(x = 'Age Group', y = 'Bachelors Degree Holders', hue = \"Sex\", data = d6, palette=\"cool\")","6fea374a":"d7 = df.groupby(['Sex', 'Age Group']).sum().reset_index()\r\nd7","671ba1c7":"columns = d7.columns[3:]\r\n\r\ni=1\r\nplt.figure(figsize=(10,10))\r\n\r\nfor col in columns:\r\n\tplt.subplot(2,2,i)\r\n\tsns.barplot(x = 'Age Group', y = col, hue = \"Sex\", data = d7, palette=\"cool\")\r\n\ti+=1\r\n\r\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1, wspace=0.4, hspace=0.4)","9badeeda":"# Source: U.S. Census Bureau, Population Division\n# https:\/\/www.census.gov\/newsroom\/press-kits\/2019\/national-state-estimates.html\n\npopulation = pd.read_csv('..\/input\/homeless-in-america-version-2-20102019\/nst-est2019-alldata.csv')\npopulation","658688e1":"# Extracting only \"POPESTIMATE2019\" resident total population estimate for 2019\r\n# Excluding Puerto Rico as well\r\npopulation = population.loc[5:55, ['NAME', 'POPESTIMATE2019']]\r\npopulation.reset_index(drop=True, inplace=True)\r\npopulation","437934aa":"bspop_df = df.groupby(['State']).sum().reset_index()\r\nbspop_df","01dade15":"# Before merging, let\u2019s check if we have the same 'states' values in both DataFrames\r\nall(bspop_df['State'] == population['NAME']) ","8559812c":"# Adding the \"Population\" column to the bspop_df DataFrame\r\nbspop_df.insert(1, \"Population\", population['POPESTIMATE2019'])\r\nbspop_df","0046beec":"# Calculating the percentage of Bachelor holder\u2019s per population\r\nbspop_df.insert(3, \"BS%\", (bspop_df['Bachelors Degree Holders'] \/ bspop_df['Population']) * 100)\r\nbspop_df","ebdb6794":"# Calculating the percentage of Bachelor holder\u2019s in each major\r\nbspop_df.insert(5, \"STEM%\", (bspop_df['STEM'] \/ bspop_df['Bachelors Degree Holders']) * 100)\r\nbspop_df.insert(7, \"Business%\", (bspop_df['Business'] \/ bspop_df['Bachelors Degree Holders']) * 100)\r\nbspop_df.insert(9, \"Education%\", (bspop_df['Education'] \/ bspop_df['Bachelors Degree Holders']) * 100)\r\nbspop_df.insert(11, \"Arts, Humanities and Others%\", (bspop_df['Arts, Humanities and Others'] \/ bspop_df['Bachelors Degree Holders']) * 100)","94f6f48c":"# Final form\r\nbspop_df","6aae3c88":"d8 = bspop_df\r\nd8.sort_values(by='BS%', ascending=False, inplace=True)\r\nd8","d6c1f5d6":"plt.figure(figsize=(18,14))\r\nsns.barplot(x = \"BS%\", y ='State', data = d8)","8a2ee648":"d9 = bspop_df\r\nd9","43f5062e":"columns = d9.columns[5::2]\r\n\r\ni=1\r\nplt.figure(figsize=(15,22))\r\n\r\nfor col in columns:\r\n\tplt.subplot(2,2,i)\r\n\tsns.barplot(x=col, y='State', data=d9.sort_values(by=col, ascending=False))\r\n\ti+=1\r\n\r\n\r\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1, wspace=0.6, hspace=0.2)","0bf1756e":"# Another way to the see the result\r\nd9.sort_values(by='Population', ascending=False, inplace=True)\r\nd9.style.background_gradient(cmap='Blues')","1f71d1ff":"d10 = bspop_df[['State', 'BS%', 'STEM%', 'Business%', 'Education%', 'Arts, Humanities and Others%']]\r\nd10","f845402a":"plt.figure(figsize=(15,15))\r\nd10 = d10.groupby(['State']).sum()\r\nsns.heatmap(d10, annot=True, fmt=\"f\", cmap='Reds')","770f5bc6":"d11 = bspop_df\r\nd11","ae5704c1":"sns.set_theme(style='white')\r\ncolumns = d11.columns[3::2]\r\n\r\ni=1\r\nplt.figure(figsize=(20,20))\r\n\r\nfor col in columns:\r\n\tplt.subplot(5,1,i)\r\n\tsns.lineplot(x='Population', y=col, data=d11)\r\n\ti+=1\r\n\r\n\r\nplt.subplots_adjust(left=0.1, right=0.9, top=0.9, bottom=0.1, wspace=0.2, hspace=0.6)","07a0c7d3":"Insights \u2705\r\n- Number of males is higher than females only in the '65 and older' age group.","2e4516d4":"***","1f8b7b4f":"# Special thanks!","1fb798eb":"Insights \u2705\r\n- Highest percentage of bachelor's degree holders per population are in: District of Columbia, Massachusetts and Colorado.\r\n- Lowest percentage of bachelor's degree holders per population are in: Arkansas, West Virginia and Mississippi.\r\n- This is the beautiful thing about looking at data from different perspective. When we compared based on number of bachelor's degree holders, california was in the first place, but now we can find it in the 17th position.","d69fe5b1":"#### Importing and cleaning the dataset","aa20cee9":"#### Q7: Number of males and females based on age group in each major","1c5ab4f2":"#### Q10: Distribution of bachelor's degree holders across majors (Heatmap)","45c21ab5":"Insights \u2705\r\n- The state of 'Utah' is the only state where  the number of males bachelor's degree holders is bigger than females.","0c1ed73a":"Insights \u2705\r\n- Highest number of bachelor's degree holders are in: California, Texas, New York and Florida.\r\n- Lowest number of bachelor's degree holders are in: Vermont, North Dakota, Alaska and Wyoming.","6cae0c8e":"#### Q3: Number of bachelor's degree holders by states based on sex","0b243390":"Insights \u2705\r\n- In general, number of females is bigger than males. (who run the world background music \ud83d\udc69\ud83c\udffd\u200d\ud83c\udf93)\r\n- Number of males is bigger in STEM and Business.\r\n- Number of females is much higher in Education and Arts, Humanities & Others.\r\n- Biggest difference in numbers can be found in Education.","2a208424":"# Sneak Peek \ud83e\uddd0","bcb598ae":"# Importing Libraries \ud83d\udce5","ef8b08cc":"#### Special thanks to [\"T.J. Kyner\"](https:\/\/www.kaggle.com\/tjkyner) for sharing this Dataset. <br> Feedbacks and comments are highly appreciated. <br> Have a nice day \ud83d\ude42","07cfb9a0":"#### Q8: Comparing the percentage of bachelor's degree holders per population by states","34f31aa4":"Insights \u2705\r\n\r\n- I'm too lazy to analyze the chart \ud83d\ude34. You do it guys and tell me the result in the comments section below.","aec68f4f":"## 3. Analyzing based on populations","01dbc030":"#### Q1: Number of bachelor's degree holders by states","04a4f455":"## 2. Analyzing based on sex and age (regardless of states)","5e1481d4":"#### Q5: Percentage of males and females in each major","ddf0add4":"Insights \u2705\r\n\r\n- \ud83d\ude2e WOW ... based on the heatmap, we can see that STEM is crushing it in every single state.\r\n- Lowest percentage in Nebraska (38.5%) and the highest in district of columbia (53.6%).\r\n- Distribution's order of bachelor's degree holders across majors in descending order are: STEM, Arts and Humanities, Business and Education.","4ec07596":"#### Q2: Number of bachelor's degree holders by states in each major","6a338430":"#### Q4: Number of bachelor's degree holders by states based on sex in each major","20deea7d":"Insights \u2705\r\n- In 'STEM', number of females is higher than males in '25 to 39' age group.\r\n- In 'Business', number of males is higher than females in each and every age groups.\r\n- In 'Education' and 'Arts, Humanities and Others', number of females is higher than males in all age groups.\r\n- Age group 40-64 has highest number of bachelor's degree holders.","9d26ba40":"Insights \u2705\n- California have the highest number of bachelor's degree holders across all majors except in education where Texas take the lead.\n- Wyoming have the lowest number of bachelor's degree holders across all majors except in education where District of Columbia is the lowest.","dd769799":"**Hooray ... Our Dataframe doesn't have any null or missing values \ud83c\udf89 \ud83c\udf89 \ud83c\udf89**","9fae3697":"#### Q9: Comparing the percentage of bachelor's degree holders per population by states in each major","2e67e150":"#### Q11: Relation between population and percentage of bachelor's degree holders across majors","e1bc81af":"#### Creating new DataFrame (bspop_df) by merging the population and Bachelor's Degree Dataframes together","cb3447aa":"# Cleaning Dataset \ud83e\uddf9","ae52e71b":"#### Q6: Number of males and females based on age group","7a5dd04a":"**Issues to fix within the data:**\r\n\r\n**1. Unnecessary data:**\r\n- The data value of ' 25 and older' in the 'Age Group' isn't needed.\r\n- The 'Total' data value in the 'Sex' Column is non essential\r\n\r\n**2. Fixing numerical Dtype and formatting:**\r\n- The dtypes of the numerical values need to be changed from (Dtype: object) to (Dtype: int).\r\n- Removing the ',' within all quantitative values in the dataset. (249,148 --> 249148).\r\n\r\n**3. Formatting:**\r\n- Creating a new column called 'STEM' by merging 'Science and Engineering' and 'Science and Engineering Related Fields' together.\r\n- Some minor adjustments.","4509ecbb":"# Analyzing Dataset \ud83d\udcca","929ed02d":"Insights \u2705\r\n\r\n- Very interesting insights about \u201cDistrict of Columbia\u201d:\r\n    - As we saw before, it have the highest percentage of bachelor's degree holders per population (Q8).\r\n    - Now we can find it with the highest percentage of bachelor's degree holders in STEM and Arts, and the lowest in Education and Business (2nd lowest).\r\n    - These guys are LIT \ud83d\udd25, taking literally the famous quote \u201cThere is no such thing as second place. Either you're first or you're last\" to another level.","7a511660":"Insights \u2705\r\n- In 'STEM', number of males is higher than females in all states, except:\r\n    - Alaska, Delaware, Hawaii, Kentucky, Louisiana, Maine, Mississippi, Nebraska, New York, North Dakota, Rhode Island, Tennessee, West Virginia.\r\n- In 'Business', number of males is higher than females in all states, except:\r\n    - District of Columbia. (We will see later in the EDA, that District of columbia have the highest percentage of BS Holders per population)\r\n- In 'Education', numbers of females is higher than males  in all states.\r\n- In 'Arts, Humanities and Others', numbers of females is higher than males in all states.","567696b2":"## 1. Analyzing based on states and sex (regardless of age)"}}