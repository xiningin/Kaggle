{"cell_type":{"929da6b5":"code","8a43a464":"code","3cb84c1e":"code","7ecbc679":"code","3c722b9d":"code","26fdb25c":"code","7c8d882f":"code","45cbf979":"code","b74d52a6":"code","fde5ba86":"code","5bbe2fc2":"code","806230db":"code","7db0eff0":"code","effebf23":"code","62c197c2":"code","c877f35b":"code","2b7ace96":"code","dae33799":"code","87a7d09b":"code","ba205fec":"code","b0188de0":"code","cf25f424":"code","97417ce4":"code","e4fa9328":"code","e528c397":"code","74b81934":"code","dd44768b":"code","03699637":"code","7d299fa4":"code","2f87ae3c":"code","0ad697a4":"code","3e7e9ef9":"code","152b843f":"code","52dd988f":"markdown","ff924612":"markdown","7026073c":"markdown","946ef9a3":"markdown"},"source":{"929da6b5":"import pandas as pd\nfrom sklearn.preprocessing import LabelEncoder, OneHotEncoder, LabelBinarizer\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nencoder = LabelEncoder()\nOHE = OneHotEncoder(sparse=False)","8a43a464":"dados = pd.read_csv('..\/input\/hotel-booking-demand\/hotel_bookings.csv')\ndados.head()","3cb84c1e":"ax, fig = plt.subplots(figsize=(16,8))\nsns.heatmap(dados.corr(), annot=True)","7ecbc679":"dados.isnull().sum()","3c722b9d":"dados['country'].fillna(dados['country'].mode()[0], inplace = True)\ndados['agent'].fillna(dados['agent'].mode()[0], inplace = True)\ndados['company'].fillna(dados['company'].mode()[0], inplace = True)\ndados['children'].fillna(dados['children'].mode()[0], inplace=True)","26fdb25c":"binarizer = LabelBinarizer()\ndados['hotel'] = binarizer.fit_transform(dados['hotel'])","7c8d882f":"dados['reservation_status_date'] = pd.to_datetime(dados['reservation_status_date'], format = \"%Y-%m-%d\")","45cbf979":"dados['reservation_status_date'] = dados['reservation_status_date'].apply(lambda x: x.strftime(\"%Y-%m\"))","b74d52a6":"dados.set_index(\"reservation_status_date\", inplace=True)","fde5ba86":"dados.head()","5bbe2fc2":"remover1 = ['reserved_room_type','assigned_room_type','reservation_status']\nremover2 = ['arrival_date_month','meal','market_segment','distribution_channel','deposit_type','customer_type']\nremover2 = np.array(remover2)","806230db":"for rem in remover1:\n  dados[rem] = encoder.fit_transform(dados[rem])","7db0eff0":"for rem2 in remover2:\n  dados = pd.get_dummies(dados)","effebf23":"dados.head()","62c197c2":"dados.groupby(dados.index).is_canceled.sum().plot(kind='line', figsize=(12,6), xlabel=\"Per\u00edodo\", ylabel='N\u00famero de Cancelamentos', title='N\u00famero de Cancelamentos de Hospedagem ao M\u00eas', grid=True)","c877f35b":"dados.groupby(dados.index).lead_time.sum().plot(kind='line', figsize=(12,6), xlabel=\"Per\u00edodo\", ylabel='N\u00famero de Cancelamentos', title='N\u00famero de Cancelamentos de Hospedagem ao M\u00eas', grid=True)","2b7ace96":"x = dados.drop(\"is_canceled\", 1)\ny = dados.loc[:,['is_canceled']]","dae33799":"from sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import classification_report, confusion_matrix, accuracy_score","87a7d09b":"x_test, x_train, y_test, y_train = train_test_split(x, y, test_size = 0.2, random_state = 0)","ba205fec":"modelo = RandomForestClassifier()\nmodelo.fit(x_train, y_train)","b0188de0":"predicao = modelo.predict(x_test)","cf25f424":"print(classification_report(y_test, predicao))","97417ce4":"print(confusion_matrix(y_test, predicao))","e4fa9328":"print(accuracy_score(y_test, predicao))","e528c397":"dados2 = pd.read_csv('..\/input\/hotel-booking-demand\/hotel_bookings.csv')\ndados2.head()","74b81934":"dados2.groupby(['is_canceled']).sum()","dd44768b":"dados2.groupby('reservation_status').sum()","03699637":"x2 = dados.drop(['is_canceled', 'reservation_status'], axis = 1)","7d299fa4":"x_test, x_train, y_test, y_train = train_test_split(x2, y, test_size=0.2, random_state=0)","2f87ae3c":"modelo2 = RandomForestClassifier()\nmodelo2.fit(x_train, y_train)","0ad697a4":"predicao = modelo2.predict(x_test)","3e7e9ef9":"print(classification_report(y_test, predicao))","152b843f":"print(confusion_matrix(y_test, predicao))","52dd988f":"## Prepara\u00e7\u00e3o dos dados \/ Preparing and transforming data ##","ff924612":"### Model looks overfitted ###","7026073c":"### Devido ao elevado grau do coeficiente de predi\u00e7\u00e3o, acima de 0.99, pode-se deduzir que o modelo sofre de sobreajustamento, assim sendo, deve-se re-analizar as v\u00e1riaveis utilizadas ###","946ef9a3":"## Criando modelo \/ Creating model ##"}}