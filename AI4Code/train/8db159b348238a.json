{"cell_type":{"260162f1":"code","ed2bc241":"code","4d70f6e7":"code","ba6190c8":"code","364ea50a":"code","3540a77b":"code","302b47da":"code","0bd07a43":"code","30935c06":"code","9de1ea16":"code","7bbef17d":"code","ba8e3528":"code","1a7fab08":"code","074f86a9":"code","2fa5cf9f":"code","4227ea22":"code","4fc37c38":"code","90078d19":"code","75dcbe85":"code","87d61078":"markdown","32d51fff":"markdown","42f2921d":"markdown","e1db01a2":"markdown","97677392":"markdown","bd0a1e7e":"markdown","1e5f1e79":"markdown","2c03b393":"markdown","58996303":"markdown","fd965a7a":"markdown","58b31209":"markdown","f4295592":"markdown","fc722164":"markdown"},"source":{"260162f1":"# Importing Libraries...\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sbn\nimport datetime as dt\n%matplotlib inline","ed2bc241":"data = pd.read_csv('..\/input\/industrial-safety-and-health-analytics-database\/IHMStefanini_industrial_safety_and_health_database_with_accidents_description.csv')","4d70f6e7":"data.head(5)","ba6190c8":"data.info()","364ea50a":"data.isnull().sum()","3540a77b":"del data['Unnamed: 0']   # deleting unnecessary data","302b47da":"df = pd.DataFrame(data)","0bd07a43":"# renaming some column names\n\ndf = df.rename({'Data': 'Date', 'Genre':'Gender','Employee or Third Party':'Employee type'}, axis = 1)","30935c06":"# whenever I work with dataset I create \"id\" for each so i can extract anything with indexing\n# creating ID\n\nid =[]\nfor i in range(len(df)):\n    id.append(i)\ndf['id'] = id\n\n# Extracting Year from the date in dataset\ndf['Date'] = pd.to_datetime(df['Date'])  # converting into python time from string time\ndf['Year'] = 0        \nfor a,b in zip(df['Date'], df['id']):\n    df['Year'][b] = a.year     # extracting year","9de1ea16":"# uniques from countries\n\ncount = []\nk = 0\nfor i in (df['Countries']):\n    if (k == 0):\n        k+=1\n        count.append(i)\n    elif (k > 0):\n        if i in count:\n            k+=1\n        else:\n            count.append(i)\n            k+=1\n\n# unique from Locals\n\nloc = []\nk = 0\nfor i in (df['Local']):\n    if (k == 0):\n        k+=1\n        loc.append(i)\n    elif (k > 0):\n        if i in loc:\n            k+=1\n        else:\n            loc.append(i)\n            k+=1\n            \n# unique from Industry sector\n\nins = []\nk = 0\nfor i in (df['Industry Sector']):\n    if (k == 0):\n        k+=1\n        ins.append(i)\n    elif (k > 0):\n        if i in ins:\n            k+=1\n        else:\n            ins.append(i)\n            k+=1\n\n# unique from potrntial accident level\n#(the values of risk level are already given in problem statement)\n\npal = ['I','II','III','IV','V','VI']\n            \n# unique from gender\n\ngen = []\nk = 0\nfor i in (df['Gender']):\n    if (k == 0):\n        k+=1\n        gen.append(i)\n    elif (k > 0):\n        if i in gen:\n            k+=1\n        else:\n            gen.append(i)\n            k+=1\n            \n# unique from employment type\n\nept = []\nk = 0\nfor i in (df['Employee type']):\n    if (k == 0):\n        k+=1\n        ept.append(i)\n    elif (k > 0):\n        if i in ept:\n            k+=1\n        else:\n            ept.append(i)\n            k+=1\n            \n# getting the unique values from dataset and cross verifying it to check if the algorithm was correct.\n\nprint(\"The accidents in various countries are = {}\".format(count))\nprint(\"The accidents in various locations are = {}\".format(loc))\nprint(\"The accidents occured in these industrial sesctors = {}\".format(ins))\nprint(\"The potential accidents risk levels are = {}\".format(pal))\nprint(\"The accidents happend for = {}\".format(gen))\nprint(\"The accidents happend for these employment type = {}\".format(ept))\n","7bbef17d":"# collecting year in list to work with it.\n\ny_r = df['Date'].dt.year\ny_16 = len(y_r[y_r==2016])   # checking if there is 2016 in list and getting total numbers of it.\ny_17 = len(y_r[y_r==2017])   # checking if there is 2017 in list and getting total numbers of it.\nx_axis = [\"2016\", \"2017\"]\ny_axis = [y_16,  y_17]\nplt.bar(x_axis, y_axis, color = ['green', 'blue'])\nplt.title(\"Accidents in 2016 and 2017\")\nplt.show()","ba8e3528":"# extracting country to check accidents...\n\ncountries = []\nfor x, y in zip(df['Countries'], df['Date']):\n    if(y.year == 2016):\n        countries.append(x)\n        \n# function to calculate number of required countries entries from the dataset \n\ndef sum_ca(n):\n    e = 0\n    for c in countries:\n        if ( c == n):\n            e+=1\n    return e\n\n# calling function to retrieve numbers\n\nsum_country01 = sum_ca(n = 'Country_01')\nsum_country02 = sum_ca(n = 'Country_02')\nsum_country03 = sum_ca(n = 'Country_03')\n\nplt.bar(['Country_01', 'Country_02', 'Country_03'],[sum_country01, sum_country02, sum_country03])\nplt.title('Accidents in 2016 ')\nplt.show()","1a7fab08":"# checking types of jobs in country_01 during 2016\n\njobs = []\nfor p,q,s in zip(df['Industry Sector'], df['Date'], df['Countries']):\n    if ((q.year == 2016) and (s == 'Country_01')):\n        jobs.append(p)\n\njob_MI = 0\njob_MT = 0\njob_OT = 0\nfor r in jobs:\n    if(r == 'Mining'):\n        job_MI+=1\n    elif(r == 'Metals'):\n        job_MT+=1\n    elif(r == 'Others'):\n        job_OT+=1\n\nplt.bar(['Mining', 'Metals', 'Others'], [job_MI, job_MT, job_OT])\nplt.title(\"Country_01 Accident Job report in 2016\")\nplt.show()","074f86a9":"# clear visualization for checking if mining job was riskier than metals job\n\n# mining\np = 0\nq = 0\nr = 0\ns = 0\nt = 0\nu = 0\n\n# metals\nl = 0\nm = 0\nn = 0\no = 0\nw = 0\nx = 0\n\nfor a,b,c in zip(df['Accident Level'], df['Industry Sector'], df['Date'].dt.year):\n    if ((a == 'I') and (b == 'Mining') and (c == 2016)):\n        p+=1\n    elif ((a == 'II') and (b == 'Mining') and (c == 2016)):\n        q+=1\n    elif ((a == 'III') and (b == 'Mining') and (c == 2016)):\n        r+=1\n    elif((a == 'IV') and (b == 'Mining') and (c == 2016)):\n        s+=1\n    elif ((a == 'V') and (b == 'Mining') and (c == 2016)):\n        t+=1\n    elif ((a == 'VI') and (n == 'Mining') and (c == 2016)):\n        u+=1\n    elif ((a == 'I') and (b == 'Metals') and (c == 2016)):\n        l+=1          \n    elif ((a == 'II') and (b == 'Metals') and (c == 2016)):\n        m+=1\n    elif ((a == 'III') and (b == 'Metals') and (c == 2016)):\n        n+=1\n    elif((a == 'IV') and (b == 'Metals') and (c == 2016)):\n        o+=1\n    elif ((a == 'V') and (b == 'Metals') and (c == 2016)):\n        w+=1\n    elif ((a == 'VI') and (n == 'Metals') and (c == 2016)):\n        x+=1\n\n# combining two bars to visulize if mining level of risk was more than metals.\n\nplt.bar(['I','II','III','IV','V','VI'], [p,q,r,s,t,u], color = 'green', label = 'Mining')\nplt.bar(['I','II','III','IV','V','VI'], [l,m,n,o,w,x], color = 'blue', label = 'Metals')\nplt.title('Mining and Metals Levels')\nplt.legend()\nplt.show()\n","2fa5cf9f":"# clear visualization for heighest mining job in each country of 2016\n\n# country1\np = 0\nq = 0\nr = 0\n# country 2\nl = 0\nm = 0\nn = 0\n# country 3\no = 0\ns = 0\nt = 0\nfor a,b,c in zip(df['Countries'], df['Industry Sector'], df['Date'].dt.year):\n    if ((a == 'Country_01') and (b == 'Mining') and (c == 2016)):\n        p+=1\n    elif ((a == 'Country_01') and (b == 'Metals') and (c == 2016)):\n        q+=1\n    elif ((a == 'Country_01') and (b == 'Others') and (c == 2016)):\n        r+=1\n    elif((a == 'Country_02') and (b == 'Mining') and (c == 2016)):\n        l+=1\n    elif ((a == 'Country_02') and (b == 'Metals') and (c == 2016)):\n        m+=1\n    elif ((a == 'Country_02') and (n == 'Others') and (c == 2016)):\n        n+=1\n    elif((a == 'Country_03') and (b == 'Mining') and (c == 2016)):\n        o+=1\n    elif ((a == 'Country_03') and (b == 'Metals') and (c == 2016)):\n        s+=1\n    elif ((a == 'Country_03') and (n == 'Others') and (c == 2016)):\n        t+=1\n\nmining_C1 = p\nmetals_C1 = q\nothers_C1 = r\n\nmining_C2 = l\nmetals_C2 = m\nothers_C2 = n\n\nmining_C3 = o\nmetals_C3 = s\nothers_C3 = t\n\nC1 = [mining_C1, metals_C1, others_C1]\nC2 = [mining_C2, metals_C2, others_C2]\nC3 = [mining_C3, metals_C3, others_C3]\n\n# position\n\nx_width = 0.25\npos1 = np.arange(len(C1))\npos2 = [ax + x_width for ax in pos1]\npos3 = [ax + x_width for ax in pos2]\n\nplt.bar(pos1, C1, color = 'green', width = x_width, label = 'mining')\nplt.bar(pos2, C2, color = 'red', width = x_width, label = 'metals')\nplt.bar(pos3, C3, color = 'blue', width = x_width, label = 'others')\n\nplt.xlabel('countries')\nplt.xticks([pos + x_width for pos in range(len(C1))], ['country_01', 'country_02', 'country_03'])\nplt.legend()\nplt.show()\n","4227ea22":"# Accidents in each country\n\ncountries_17 = []\nfor x, y in zip(df['Countries'], df['Date']):\n    if(y.year == 2017):\n        countries_17.append(x)\ndef sum_ac(n):\n    e = 0\n    for c in countries_17:\n        if ( c == n):\n            e+=1\n    return e\n\nsum_country_2017_01 = sum_ac(n = 'Country_01')\nsum_country_2017_02 = sum_ac(n = 'Country_02')\nsum_country_2017_03 = sum_ac(n = 'Country_03')\n\nplt.bar(['Country_01', 'Country_02', 'Country_03'],[sum_country_2017_01, sum_country_2017_02, sum_country_2017_03])\nplt.title('Accidents in 2017')\nplt.show()","4fc37c38":"# analysing jobs in country_01\n\njobs_17 = []\nfor p,q,s in zip(df['Industry Sector'], df['Date'], df['Countries']):\n    if ((q.year == 2017) and (s == 'Country_01')):\n        jobs_17.append(p)\n\njob_MI = 0\njob_MT = 0\njob_OT = 0\nfor r in jobs_17:\n    if(r == 'Mining'):\n        job_MI+=1\n    elif(r == 'Metals'):\n        job_MT+=1\n    elif(r == 'Others'):\n        job_OT+=1\n\nplt.bar(['Mining', 'Metals', 'Others'], [job_MI, job_MT, job_OT])\nplt.title(\"Country_01 Accident Job report in 2017\")\nplt.show()","90078d19":"# clear visualization for checking if mining is riskier than metals job in 2017\n\n# mining\np = 0\nq = 0\nr = 0\ns = 0\nt = 0\nu = 0\n\n# metals\nl = 0\nm = 0\nn = 0\no = 0\nw = 0\nx = 0\n\nfor a,b,c in zip(df['Accident Level'], df['Industry Sector'], df['Date'].dt.year):\n    if ((a == 'I') and (b == 'Mining') and (c == 2017)):\n        p+=1\n    elif ((a == 'II') and (b == 'Mining') and (c == 2017)):\n        q+=1\n    elif ((a == 'III') and (b == 'Mining') and (c == 2017)):\n        r+=1\n    elif((a == 'IV') and (b == 'Mining') and (c == 2017)):\n        s+=1\n    elif ((a == 'V') and (b == 'Mining') and (c == 2017)):\n        t+=1\n    elif ((a == 'VI') and (n == 'Mining') and (c == 2017)):\n        u+=1\n    elif ((a == 'I') and (b == 'Metals') and (c == 2017)):\n        l+=1          \n    elif ((a == 'II') and (b == 'Metals') and (c == 2017)):\n        m+=1\n    elif ((a == 'III') and (b == 'Metals') and (c == 2017)):\n        n+=1\n    elif((a == 'IV') and (b == 'Metals') and (c == 2017)):\n        o+=1\n    elif ((a == 'V') and (b == 'Metals') and (c == 2017)):\n        w+=1\n    elif ((a == 'VI') and (n == 'Metals') and (c == 2017)):\n        x+=1\n\n\nplt.bar(['I','II','III','IV','V','VI'], [p,q,r,s,t,u], color = 'green', label = 'Mining')\nplt.bar(['I','II','III','IV','V','VI'], [l,m,n,o,w,x], color = 'blue', label = 'Metals')\nplt.title('Mining and Metals Levels of 2017')\nplt.legend()\nplt.show()","75dcbe85":"# total number of mining jobs in 2016 and 2017\n\ny = 0\nz = 0\nfor p,q in zip(df['Industry Sector'], df['Year']):\n    if ((p == 'Mining') and ( q == 2016)):\n        y+=1\n    elif((p == 'Mining') and (q == 2017)):\n        z+=1\n\nmining_16 = y \nmining_17 = z\nx_val = ['2016', '2017']\ny_val = [mining_16, mining_17] \n\nax = sbn.pointplot(x = x_val, y = y_val )","87d61078":"Therefore, it is observed that 2016 has more number of accidents compared to 2017, however it is important to know that why such huge amount of accidents happend in 2016 so, we can overcome in next year.\n\nAnalysing: 2016\n\nAnalysing the country with heighest accident in 2016.","32d51fff":"Therefore, we can clearly say that most of the accidents during 2016 in country_01 was due to Mining, it is because the probablity of mining jobs were heighest in country_01.\n\nHowever, it is not yet clear that if Mining job was more riskier than other.\nso, let's find out that too.\n\nsince, \"other job\" has very less in number let's focus in Mining and Metal job.","42f2921d":"Hence, we can say that total number of mining jobs in 2017 was lesser than the 2016, may be industry had come into notice that mining jobs were the most reason for the accidents in 2016.\n and we can also say that it is because of this, 2017 had lesser accidents compared to 2016 and if company continues in this manner it will also reduce the other accidents level.","e1db01a2":"Therefore, country_01 has more accident than other two.\n\nwhy country_01 has more accident compared to other countries, is it because of same reason \"MINING JOB\"???\n\nLet's find out.","97677392":"Thus, we can confirm that country_01 has more mining jobs in 2016 and earlier it was confirmed that mining job was more riskier than others.","bd0a1e7e":"so, we can say that accident level of mining(green bars) is considerably more than the metals(blue bars), hence mining job is riskier than metals.\n\nLet's check which country has more mining job in 2016.","1e5f1e79":"Hence, we can confirm that in 2017 accident level of mining job was more than metals, and because of this there were more accidents in 2017.\n\nFurthermore, mining jobs are the primary reason for more accidents in both 2016 & 2017.\n\nLet's check if mining job in 2017 was more or less than 2016.","2c03b393":"There you go, it's again Mining job was more in number, and we will again check if mining job in 2017 was more riskier than other.","58996303":"Loading the data","fd965a7a":"It is obsereved that country_01 has more accidents compared to others.\n\nQuestions to analyse:\n\nWhy country_01 had more accidents compared to other two countries? and what type of jobs were done in country_01 to have such huge accidents?\n\nlets find out!!!!","58b31209":"ANALYSING 2017\n\n\nwhy does 2017 had less accidents compared to 2016?","f4295592":"This notebook is based on Industrial labor accident data and I will analyze the accidents levels in each countries of two years(2016 and 2017) and give conclusion for the cause of accidents and I will forecast if accidents will increase or decrease in next coming years. This report will also give conclusions on risk levels of employees jobs.","fc722164":"Once all the required data processing is done, it's time to analyse data.\nHowever, the dataset is concerned with accidents in industry in 2016 and 2017, will check the number of accidents in 2016 and 2017."}}