{"cell_type":{"9f8d5f7f":"code","804fa9d0":"code","67ce0777":"code","1ffe8312":"code","7679f7d6":"code","212494fa":"code","03e53b35":"code","f22bc875":"code","0b74e7d2":"code","6d4f4adb":"code","b3f93f2b":"code","8118090f":"code","76b7931f":"code","fbc0429f":"code","1b3ca909":"code","ffa17ab4":"code","6ee7f529":"code","5ebe5ef4":"code","0fa880f5":"code","695b90c1":"code","c04a656d":"code","6cdd12d6":"code","33a11ee3":"code","123cae55":"code","e48ccb53":"code","118b3311":"code","c4f9bc6b":"code","185da176":"code","39c5db26":"markdown","2d8aac76":"markdown","6e011e27":"markdown","72208e1c":"markdown","5c7dac5f":"markdown","3749c7b5":"markdown","7db87835":"markdown","0eb14966":"markdown","df884db4":"markdown"},"source":{"9f8d5f7f":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport numpy as np\nimport plotly.express as px\nimport folium","804fa9d0":"# load data:\nfile_path = \"..\/input\/hotel-booking-demand\/hotel_bookings.csv\"\ndf = pd.read_csv(file_path)","67ce0777":"df.head()","1ffe8312":"df.shape","7679f7d6":"df.describe()","212494fa":"df.columns","03e53b35":"df['hotel'].unique()","f22bc875":"df.info()","0b74e7d2":"sns.countplot(data=df, x = 'hotel')","6d4f4adb":"sns.countplot(data=df, x = 'hotel', hue='is_canceled')","b3f93f2b":"fig = plt.figure(figsize=(10,5), dpi = 100)\nsns.countplot(data=df, x = 'arrival_date_month')\nplt.xlabel('Month', fontsize=15)\nplt.xticks(rotation=45,fontsize=11);","8118090f":"sns.countplot(data=df, x=df['arrival_date_year'], palette='Set1')","76b7931f":"# check for missing values\ndf.isnull().sum()","fbc0429f":"df=df.drop(['deposit_type','required_car_parking_spaces','total_of_special_requests'],axis=1)","1b3ca909":"df.mean()","ffa17ab4":"df.fillna(df.mean())","6ee7f529":"# Replace missing values:\n# agent: If no agency is given, booking was most likely made without one.\n# company: If none given, it was most likely private.\n# rest schould be self-explanatory.\nnan_replacements = {\"children:\": 0.0,\"country\": \"Unknown\", \"agent\": 0, \"company\": 0}\ndf_clean = df.fillna(nan_replacements)\n\n# \"meal\" contains values \"Undefined\", which is equal to SC.\ndf_clean[\"meal\"].replace(\"Undefined\", \"SC\", inplace=True)\n\n# Some rows contain entreis with 0 adults, 0 children and 0 babies. \n# I'm dropping these entries with no guests.\nzero_guests = list(df_clean.loc[df_clean[\"adults\"]\n                   + df_clean[\"children\"]\n                   + df_clean[\"babies\"]==0].index)\ndf_clean.drop(df_clean.index[zero_guests], inplace=True)","5ebe5ef4":"df_clean.isnull().sum()","0fa880f5":"# normalize price per night (adr):\ndf_clean[\"adr_pp\"] = df_clean[\"adr\"] \/ (df_clean[\"adults\"] + df_clean[\"children\"])\ndf_guests = df_clean.loc[df_clean[\"is_canceled\"] == 0] # only actual gusts\nroom_prices = df_guests[[\"hotel\", \"reserved_room_type\", \"adr_pp\"]].sort_values(\"reserved_room_type\")\n\n# boxplot:\nplt.figure(figsize=(12, 8))\nsns.boxplot(x=\"reserved_room_type\",\n            y=\"adr_pp\",\n            hue=\"hotel\",\n            data=room_prices, \n            hue_order=[\"City Hotel\", \"Resort Hotel\"],\n            fliersize=0)\nplt.title(\"Price of room types per night and person\", fontsize=16)\nplt.xlabel(\"Room type\", fontsize=16)\nplt.ylabel(\"Price [EUR]\", fontsize=16)\nplt.legend(loc=\"upper right\")\nplt.ylim(0, 160)\nplt.show()","695b90c1":"segments=df_clean[\"market_segment\"].value_counts()\n\n# pie plot\nfig = px.pie(segments,\n             values=segments.values,\n             names=segments.index,\n             title=\"Bookings per market segment\",\n             template=\"seaborn\")\nfig.update_traces(rotation=-90, textinfo=\"percent+label\")\nfig.show()","c04a656d":"counts = df['country'].value_counts()\n#counts\nplt.subplots(figsize=(7,5))\nsns.countplot(x='country', hue='hotel',  data=df[df['country'].isin(counts[counts > 2000].index)])\nplt.show()","6cdd12d6":"india_df = df_clean[df_clean[\"country\"] == 'IND']\n\nindia_df.head(10)","33a11ee3":"india_df['reservation_status'].value_counts(normalize=True)","123cae55":"india_checkouts = india_df['reservation_status'].value_counts()\n\n# pie plot\nfig = px.pie(india_checkouts,\n             values=india_checkouts.values,\n             names=india_checkouts.index,\n             title=\"Hotel Checkouts in India\",\n             template=\"seaborn\")\nfig.update_traces(rotation=-90, textinfo=\"percent+label\")\nfig.show()","e48ccb53":"dataResort = df_clean[df_clean['hotel'] == 'Resort Hotel']\ndataCity = df_clean[df_clean['hotel'] == 'City Hotel']\n\ndf_clean = df_clean.reset_index(drop=True)\nplt.figure(figsize=(15, 8))\ncorrelation = sns.heatmap(dataCity.corr(), vmin=-1, vmax=1, annot=True, linewidths=1, linecolor='black')\ncorrelation.set_title('Correlation Graph of the City Hotel', fontdict={'fontsize': 24})","118b3311":"plt.figure(figsize=(15, 8))\ncorrelation = sns.heatmap(dataResort.corr(), vmin=-1, vmax=1, annot=True, linewidths=1, linecolor='black')\ncorrelation.set_title('Correlation Graph of the Resort Hotel', fontdict={'fontsize': 24})","c4f9bc6b":"print(\"Scatter Plots:\")\nsns.set()\ncols = ['is_canceled', 'lead_time', 'arrival_date_year',\n       'arrival_date_month', 'arrival_date_week_number',\n       'country', 'market_segment', \n       'is_repeated_guest', 'previous_cancellations',\n       'previous_bookings_not_canceled', 'reserved_room_type',\n       'company', 'days_in_waiting_list', 'customer_type', 'adr']\nsns.pairplot(df[cols], height =2.5 )\nplt. show ()\n","185da176":"# group data for lead_time:\nlead_cancel_data = df_clean.groupby(\"lead_time\")[\"is_canceled\"].describe()\n# use only lead_times wih more than 10 bookings for graph:\nlead_cancel_data_10 = lead_cancel_data.loc[lead_cancel_data[\"count\"] >= 10]\n\n#show figure:\nplt.figure(figsize=(12, 8))\nsns.regplot(x=lead_cancel_data_10.index, y=lead_cancel_data_10[\"mean\"].values * 100)\nplt.title(\"Effect of lead time on cancelation\", fontsize=16)\nplt.xlabel(\"Lead time\", fontsize=16)\nplt.ylabel(\"Cancelations [%]\", fontsize=16)\n# plt.xlim(0,365)\nplt.show()\n\n","39c5db26":"## Import Dependencies","2d8aac76":"## Scatter Plot","6e011e27":"## Load dataset","72208e1c":"## Pie Chart","5c7dac5f":"Portugal (PRT) has highest no. of city and resort hotels both.","3749c7b5":"## Histogram","7db87835":"## Box Plot","0eb14966":"Bookings made a few days before the arrival date are rarely canceled, whereas bookings made over one year in advance are canceled very often.","df884db4":"## Correlation Matrix"}}