{"cell_type":{"b7640ac4":"code","6fd66eb0":"code","ea72353c":"code","6b705e89":"code","7df43867":"code","7e7b9872":"code","76c6c093":"code","bb5c1f4e":"code","369e09be":"code","75817ea3":"code","e68cfce2":"markdown","31ff43ec":"markdown","8676ec47":"markdown","524d0567":"markdown","10e13c1b":"markdown","e2939ff4":"markdown","dfd00476":"markdown","2a016e4f":"markdown","e57093f2":"markdown","0fdbb1ac":"markdown","05870b05":"markdown","f15e6666":"markdown","e16ad4d0":"markdown","b884702d":"markdown","eaf5d1f7":"markdown"},"source":{"b7640ac4":"#!pip3 install nfts","6fd66eb0":"import os\n#import sqlite3\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n#from scipy.optimize import curve_fit\n#from scipy.special import zeta\n#import nfts.dataset\nfrom matplotlib.pyplot import figure","ea72353c":"transfers_with_mint_time = pd.read_csv(\"..\/input\/fromnfts\/tx_with_mint.csv\")","6b705e89":"figure(figsize=(18,8))\n_, _, _ = plt.hist(transfers_with_mint_time['mint_to_xfer_seconds']\/86400, bins=100,log='False',range=(0,10))\nplt.xlabel('days')\nplt.ylabel('n')\nplt.title('Histogram of mint to xfr times up to 10 days after minting')\nplt.grid(True)\nplt.show()","7df43867":"figure(figsize=(18,8))\n_, _, _ = plt.hist(transfers_with_mint_time['mint_to_xfer_seconds'], bins=100,log='False',range=(1,600))\n# note the range starts at 1 to exclude mint-transfer pairs\nplt.xlabel('seconds')\nplt.ylabel('n')\nplt.title('Histogram of mint to xfr times for first 10 min after minting')\nplt.grid(True)\nplt.show()","7e7b9872":"early_bites = transfers_with_mint_time[transfers_with_mint_time.mint_to_xfer_seconds.between(1,70)]","76c6c093":"early_by_days = early_bites.groupby('hourofweek').ctoken.count()","bb5c1f4e":"plt.plot(early_by_days)\nplt.xlabel('hour of week, starting on Monday')\nplt.ylabel('n xfers')\nplt.title('n transfers vs hour of week')\nplt.grid(True)\nplt.show()","369e09be":"tper_day = transfers_with_mint_time.groupby('day_of_year').ctoken.count()","75817ea3":"plt.plot(tper_day[1:-1])\n# first and last day are probably partial data\nplt.xlabel('day of year')\nplt.ylabel('n transactions ')\nplt.title('transactions per day vs day of year')\nplt.grid(True)\nplt.show()","e68cfce2":"mint_times_df = mints_df[['ctoken','timestamp']].dropna()","31ff43ec":"## who are these guys who buy (or transfer) 60 seconds after the minting?\nthe 'early bites'\nWhat are their favorite hours. That is, when best to mint to catch them?  \nAnswer: roughly Friday and Saturday are good times to mint","8676ec47":"nfts.dataset.explain()","524d0567":"Kaggle has memory limitations, so I prepared a dataset with only the columns I will use  \nThe steps to do that are moved to markdown here","10e13c1b":"transfers_with_mint_time['mint_dts'] = pd.to_datetime(transfers_with_mint_time.timestamp_y - 14400,unit='s')\ntransfers_with_mint_time['xfer_dts'] = pd.to_datetime(transfers_with_mint_time.timestamp_x - 14400,unit='s')\ntransfers_with_mint_time['mint_to_xfer_seconds'] = transfers_with_mint_time.timestamp_x - transfers_with_mint_time.timestamp_y\n\ntransfers_with_mint_time['hour'] = transfers_with_mint_time.mint_dts.dt.hour\ntransfers_with_mint_time['hourofweek'] = transfers_with_mint_time.hour + transfers_with_mint_time.mint_dts.dt.dayofweek * 24","e2939ff4":"ds = nfts.dataset.FromSQLite(\"nfts.sqlite\")","dfd00476":"## save the parts I want\nheader = [\"timestamp_x\",\"ctoken\",\"mint_to_xfer_seconds\",\"hour\",\"hourofweek\",\"day_of_year\"]\ntransfers_with_mint_time.to_csv(\"tx_with_mint.zip\",columns=header)\n## now load them:","2a016e4f":"### When is the best time of day to mint?\nusing data extracted from:  \n https:\/\/www.kaggle.com\/simiotic\/ethereum-nfts\n ","e57093f2":"transfers_df = ds.load_dataframe(\"transfers\")\ntransfers_df['ctoken'] = transfers_df.nft_address+':'+transfers_df.token_id","0fdbb1ac":"## SET UP UNIQUE CONTRACT:TOKEN-ID COLUMNS 'CTOKEN'\nmerge the mint time data with the transfers on ctoken,\nthen make a 'mint_to_xfer_seconds' column","05870b05":"## by the way, how hot is the market in general?\nlooks like it might be slowing down a bit","f15e6666":"mints_df = ds.load_dataframe( \"mints\")\nmints_df['ctoken'] = mints_df.nft_address+':'+mints_df.token_id","e16ad4d0":"That spike on day 35 is from this contract:  \n0xe433E90c5b898819544346e73A501D9E8013DBD8  \nCurrencyPunk contract created 9\/21 ","b884702d":"## EXAMINE THE TRENDS ON WHEN A TRANSFER HAPPENS AFTER MINTING\nfirst, over 10 days,\nthen over first 600 seconds\n","eaf5d1f7":"transfers_with_mint_time = pd.merge(transfers_df,mint_times_df,on='ctoken',how='inner')"}}