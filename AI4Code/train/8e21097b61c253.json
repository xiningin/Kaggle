{"cell_type":{"93b7e82a":"code","a8ec6c2c":"code","5e981931":"code","cce0e494":"code","4e684822":"code","484cc95d":"code","f5d3b2a4":"code","dbeb8c14":"code","4d1bac2a":"code","dec1c07d":"code","b6ed3302":"code","18a2f40f":"code","ed8af581":"code","4b2ca1ca":"code","d5700c47":"code","75148926":"code","55bb0ee4":"code","7db93e8b":"code","e3c45c1e":"code","e2a4eba6":"code","f7db80f8":"code","03f7897b":"code","15eee1d3":"code","2adf6574":"code","a1cedef2":"code","ae666671":"code","e5ea53a0":"code","516f448c":"code","e1955a0c":"code","0f7ac93c":"code","c782f3c2":"code","24308602":"code","d4dc21bd":"code","fe167064":"code","8f00722d":"code","3861e684":"code","0a82a480":"code","90485e86":"code","7bcc83a1":"code","fb0b9e92":"code","571174b7":"code","50a65364":"code","382507dc":"code","1076b8b1":"code","666d96fb":"code","964f0f2e":"code","5b119309":"code","0bdaffb3":"code","90b432ba":"code","c3023e92":"code","9fb93cc2":"code","561b189b":"code","bab5d903":"markdown","02d456dc":"markdown","c06e470c":"markdown","f5064184":"markdown","a6f5e788":"markdown","bec4a58c":"markdown","002e78b5":"markdown","9a9eb3d5":"markdown","b0f533b5":"markdown"},"source":{"93b7e82a":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","a8ec6c2c":"attendance_valuation_elo_df = pd.read_csv(\"..\/input\/nba_2017_att_val_elo.csv\");attendance_valuation_elo_df.head()","5e981931":"salary_df = pd.read_csv(\"..\/input\/nba_2017_salary.csv\");salary_df.head()\n","cce0e494":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\");pie_df.head()","4e684822":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\");plus_minus_df.head()","484cc95d":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\");br_stats_df.head()","f5d3b2a4":"\nplus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","dbeb8c14":"\nnba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', \"PS\/G\": \"POINTS\"}, inplace=True)\nnba_players_df.drop([\"G\", \"GS\", \"TEAM\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","4d1bac2a":"\npie_df_subset = pie_df[[\"PLAYER\", \"PIE\", \"PACE\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","dec1c07d":"salary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)\nsalary_df[\"SALARY_MILLIONS\"] = round(salary_df[\"SALARY\"]\/1000000, 2)\nsalary_df.drop([\"POSITION\",\"TEAM\", \"SALARY\"], inplace=True, axis=1)\nsalary_df.head()","b6ed3302":"diff = list(set(nba_players_df[\"PLAYER\"].values.tolist()) - set(salary_df[\"PLAYER\"].values.tolist()))","18a2f40f":"len(diff)\n","ed8af581":"\nnba_players_with_salary_df = nba_players_df.merge(salary_df); ","4b2ca1ca":"sns.lmplot(x=\"SALARY_MILLIONS\", y=\"WINS_RPM\", data=nba_players_with_salary_df)\n","d5700c47":"results = smf.ols('W ~POINTS', data=nba_players_with_salary_df).fit()\n","75148926":"print(results.summary())\n","55bb0ee4":"results = smf.ols('W ~WINS_RPM', data=nba_players_with_salary_df).fit()\n","7db93e8b":"print(results.summary())\n","e3c45c1e":"results = smf.ols('SALARY_MILLIONS ~POINTS', data=nba_players_with_salary_df).fit()\n","e2a4eba6":"print(results.summary())\n","f7db80f8":"results = smf.ols('SALARY_MILLIONS ~WINS_RPM', data=nba_players_with_salary_df).fit()\n","03f7897b":"print(results.summary())\n","15eee1d3":"wiki_df = pd.read_csv(\"..\/input\/nba_2017_player_wikipedia.csv\");wiki_df.head()\n","2adf6574":"wiki_df.rename(columns={'names': 'PLAYER', \"pageviews\": \"PAGEVIEWS\"}, inplace=True)\n","a1cedef2":"median_wiki_df = wiki_df.groupby(\"PLAYER\").median()\n","ae666671":"\nmedian_wiki_df_small = median_wiki_df[[\"PAGEVIEWS\"]]","e5ea53a0":"median_wiki_df_small = median_wiki_df_small.reset_index()\n","516f448c":"nba_players_with_salary_wiki_df = nba_players_with_salary_df.merge(median_wiki_df_small)\n","e1955a0c":"twitter_df = pd.read_csv(\"..\/input\/nba_2017_twitter_players.csv\");twitter_df.head()\n","0f7ac93c":"nba_players_with_salary_wiki_twitter_df = nba_players_with_salary_wiki_df.merge(twitter_df)\n","c782f3c2":"nba_players_with_salary_wiki_twitter_df.head()","24308602":"plt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY & TWITTER & WIKIPEDIA)\")\ncorr = nba_players_with_salary_wiki_twitter_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","d4dc21bd":"sns.lmplot(x=\"SALARY_MILLIONS\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)","fe167064":"results = smf.ols('SALARY_MILLIONS ~WINS_RPM', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","8f00722d":"sns.residplot(y=\"WINS_RPM\", x=\"SALARY_MILLIONS\", data=nba_players_with_salary_wiki_twitter_df)","3861e684":"import statsmodels\nrmse = statsmodels.tools.eval_measures.rmse(nba_players_with_salary_wiki_twitter_df[\"WINS_RPM\"], nba_players_with_salary_wiki_twitter_df[\"SALARY_MILLIONS\"])\nrmse","0a82a480":"sns.lmplot(x=\"PAGEVIEWS\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)\n","90485e86":"results = smf.ols('PAGEVIEWS ~WINS_RPM', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","7bcc83a1":"sns.residplot(y=\"WINS_RPM\", x=\"PAGEVIEWS\", data=nba_players_with_salary_wiki_twitter_df)","fb0b9e92":"import statsmodels\nrmse = statsmodels.tools.eval_measures.rmse(nba_players_with_salary_wiki_twitter_df[\"WINS_RPM\"], nba_players_with_salary_wiki_twitter_df[\"PAGEVIEWS\"])\nrmse","571174b7":"sns.lmplot(x=\"PAGEVIEWS\", y=\"SALARY_MILLIONS\", data=nba_players_with_salary_wiki_twitter_df)\n","50a65364":"results = smf.ols('PAGEVIEWS ~SALARY_MILLIONS', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","382507dc":"sns.residplot(y=\"SALARY_MILLIONS\", x=\"PAGEVIEWS\", data=nba_players_with_salary_wiki_twitter_df)","1076b8b1":"import statsmodels\nrmse = statsmodels.tools.eval_measures.rmse(nba_players_with_salary_wiki_twitter_df[\"SALARY_MILLIONS\"], nba_players_with_salary_wiki_twitter_df[\"PAGEVIEWS\"])\nrmse","666d96fb":"sns.lmplot(x=\"PAGEVIEWS\", y=\"ORPM\", data=nba_players_with_salary_wiki_twitter_df)","964f0f2e":"results = smf.ols('PAGEVIEWS ~ORPM', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","5b119309":"sns.residplot(y=\"ORPM\", x=\"PAGEVIEWS\", data=nba_players_with_salary_wiki_twitter_df)","0bdaffb3":"import statsmodels\nrmse = statsmodels.tools.eval_measures.rmse(nba_players_with_salary_wiki_twitter_df[\"ORPM\"], nba_players_with_salary_wiki_twitter_df[\"PAGEVIEWS\"])\nrmse","90b432ba":"sns.lmplot(x=\"PAGEVIEWS\", y=\"DRPM\", data=nba_players_with_salary_wiki_twitter_df)","c3023e92":"results = smf.ols('PAGEVIEWS ~DRPM', data=nba_players_with_salary_wiki_twitter_df).fit()\nprint(results.summary())","9fb93cc2":"sns.residplot(y=\"DRPM\", x=\"PAGEVIEWS\", data=nba_players_with_salary_wiki_twitter_df)","561b189b":"import statsmodels\nrmse = statsmodels.tools.eval_measures.rmse(nba_players_with_salary_wiki_twitter_df[\"DRPM\"], nba_players_with_salary_wiki_twitter_df[\"PAGEVIEWS\"])\nrmse","bab5d903":"# Gather all the data, player stats and social media stats","02d456dc":"# Add social media data","c06e470c":"# Load all the packages","f5064184":"# Compare salary, performance (using WINS_RPM, POINTS), team performance (using W)","a6f5e788":"# We see that Wikipedia popularity shows a relationship with overall performance. Let's see if Wikipedia popularity is more influenced by offensive performance or defensive performance using OPRM and DRPM. \n","bec4a58c":"# Plot a correlation heatmap to see if there's anything interesting with social media","002e78b5":"Exploration of How Social Media Can Predict Winning Metrics Better Than Salary","9a9eb3d5":"# Looks like salary and performance is related. Let's compare Wikipedia page views and see if salary, or performance can be used to predict popularity. ","b0f533b5":"# Analysis with social media data"}}