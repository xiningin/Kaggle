{"cell_type":{"573c6614":"code","2493ef79":"code","fee3da48":"code","4e95984e":"code","163f3929":"code","23ad2eb4":"code","e719397d":"code","78c79380":"code","45a8889d":"code","1d721599":"code","69fbfae2":"code","9585287f":"code","803149fe":"code","e4ba64cf":"code","51c411d6":"code","214b4bcc":"code","6c412d13":"code","47bceafe":"code","92664295":"code","a3b87f8d":"code","8decb0ee":"code","ee682325":"code","dc041071":"code","6f90f07d":"code","afdb7178":"code","23f3aa6d":"code","48c2c781":"code","547141ce":"code","fe1108a9":"code","8179b5d9":"code","b692c8cd":"code","f68e8d0f":"code","2d50e4e6":"code","97f7b17e":"code","3897c4ec":"markdown","75f6a2fa":"markdown","e1f13d68":"markdown","38885c96":"markdown","f25df802":"markdown","318992c5":"markdown","3fa4eae0":"markdown","7080235e":"markdown","97a6d4dc":"markdown","a7bb9369":"markdown"},"source":{"573c6614":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","2493ef79":"data = pd.read_csv('..\/input\/merchants.csv')","fee3da48":"print(data.shape)\nprint(data.dtypes)","4e95984e":"data.head()","163f3929":"data['merchant_group_id'] = data['merchant_group_id'].astype(object)\ndata['merchant_category_id'] = data['merchant_category_id'].astype(object)\ndata['subsector_id'] = data['subsector_id'].astype(object)\ndata['city_id'] = data['city_id'].astype(object)\ndata['state_id'] = data['state_id'].astype(object)\ndata['category_2'] = data['category_2'].astype(object)","23ad2eb4":"print(data.dtypes)","e719397d":"data.head()","78c79380":"print(data['numerical_1'].describe())","45a8889d":"print(data['numerical_2'].describe())","1d721599":"f, ax = plt.subplots(figsize=(10, 8))\nsns.distplot(data['numerical_1'])","69fbfae2":"f, ax = plt.subplots(figsize=(8, 6))\nfig = sns.boxplot(data.numerical_1)","9585287f":"f, ax = plt.subplots(figsize=(8, 6))\nfig = sns.boxplot(data.numerical_2)","803149fe":"fig, ax = plt.subplots(1, 5, figsize = (16, 6));\ndata['category_1'].value_counts().sort_index().plot(kind='bar', ax=ax[0], color='teal', title='Anonymized_Category_1')\ndata['most_recent_sales_range'].value_counts().sort_index().plot(kind='bar', ax=ax[1], color='gold', title='most_recent_sales_range')\ndata['most_recent_purchases_range'].value_counts().sort_index().plot(kind='bar', ax=ax[2], color='black', title='most_recent_purchases_range')\ndata['category_4'].value_counts().sort_index().plot(kind='bar', ax=ax[3], color='blue', title='Anonymized_Category_4')\ndata['category_2'].value_counts().sort_index().plot(kind='bar', ax=ax[4], color='red', title='Anonymized_Category_2')","e4ba64cf":"print(data.dtypes)","51c411d6":"data.head()","214b4bcc":"#### 3 month, 6 month, 12 month Analysis\n#1 Sales\nprint(data['avg_sales_lag3'].describe())\nprint(data['avg_sales_lag6'].describe())\nprint(data['avg_sales_lag12'].describe())\n#avg_sales_lag3\n#avg_sales_lag6\n#avg_sales_lag12\n","6c412d13":"data[data.avg_sales_lag3.isnull()==1].head(15)","47bceafe":"fig, ax = plt.subplots(1, 3, figsize = (16, 6));\ndata['avg_sales_lag3'].value_counts().sort_index().plot(kind='hist', ax=ax[0], color='teal', title='3_Month');\ndata['avg_sales_lag6'].value_counts().sort_index().plot(kind='hist', ax=ax[1], color='brown', title='6_Month');\ndata['avg_sales_lag12'].value_counts().sort_index().plot(kind='hist', ax=ax[2], color='blue', title='12_Month');\n","92664295":"print(data[data.avg_sales_lag3>10].shape[0])\nprint(data[data.avg_sales_lag6>10].shape[0])\nprint(data[data.avg_sales_lag12>10].shape[0])\n","a3b87f8d":"# \ucd5c\uadfc\nprint((data[(data.avg_sales_lag3>10)&(data.most_recent_sales_range!=\"E\")].shape)[0])\nprint((data[(data.avg_sales_lag6>10)&(data.most_recent_sales_range!=\"E\")].shape)[0])\nprint((data[(data.avg_sales_lag12>10)&(data.most_recent_sales_range!=\"E\")].shape)[0])\n","8decb0ee":"f, ax = plt.subplots(figsize=(8, 6))\nplt.scatter(x='most_recent_sales_range', y=\"avg_sales_lag3\", data=data)\nplt.xlabel(\"most_recent_sales_range\")\nplt.ylabel(\"avg_sales_lag3\")\nplt.show","ee682325":"f, ax = plt.subplots(figsize=(8, 6))\nplt.scatter(x='most_recent_sales_range', y=\"avg_sales_lag6\", data=data)\nplt.xlabel(\"most_recent_sales_range\")\nplt.ylabel(\"avg_sales_lag3\")\nplt.show","dc041071":"f, ax = plt.subplots(figsize=(8, 6))\nplt.scatter(x='most_recent_sales_range', y=\"avg_sales_lag12\", data=data)\nplt.xlabel(\"most_recent_sales_range\")\nplt.ylabel(\"avg_sales_lag3\")\nplt.show","6f90f07d":"\n#### 3 month, 6 month, 12 month Analysis\n#2 Purchases\nprint(data['avg_purchases_lag3'].describe())\nprint(data['avg_purchases_lag6'].describe())\nprint(data['avg_purchases_lag12'].describe())\n#avg_sales_lag3\n#avg_sales_lag6\n#avg_sales_lag12\n","afdb7178":"data[data==np.inf].count()","23f3aa6d":"data.loc[data['avg_purchases_lag3']==np.inf,].head(15)","48c2c781":"#data2 : not infinite variables in avg_purchases_lag\ndata2 = data.loc[data[\"avg_purchases_lag3\"]!=np.inf,]\nprint(data2['avg_purchases_lag3'].describe())\nprint(data2['avg_purchases_lag6'].describe())\nprint(data2['avg_purchases_lag12'].describe())        ","547141ce":"fig, ax = plt.subplots(1, 3, figsize = (16, 6));\ndata2['avg_purchases_lag3'].value_counts().sort_index().plot(kind='hist', ax=ax[0], color='teal', title='3_Month');\ndata2['avg_purchases_lag6'].value_counts().sort_index().plot(kind='hist', ax=ax[1], color='brown', title='6_Month');\ndata2['avg_purchases_lag12'].value_counts().sort_index().plot(kind='hist', ax=ax[2], color='blue', title='12_Month');\n","fe1108a9":"print(data[data.avg_purchases_lag3>10].shape[0])\nprint(data[data.avg_purchases_lag6>10].shape[0])\nprint(data[data.avg_purchases_lag12>10].shape[0])\n","8179b5d9":"data3 = data2[data2.avg_purchases_lag12>10]\nfig, ax = plt.subplots(1, 3, figsize = (16, 6));\ndata3['avg_purchases_lag3'].value_counts().sort_index().plot(kind='hist', ax=ax[0], color='teal', title='3_Month');\ndata3['avg_purchases_lag6'].value_counts().sort_index().plot(kind='hist', ax=ax[1], color='brown', title='6_Month');\ndata3['avg_purchases_lag12'].value_counts().sort_index().plot(kind='hist', ax=ax[2], color='blue', title='12_Month');\n","b692c8cd":"\n#### 3 month, 6 month, 12 month Analysis\n#3 Purchases\nprint(data['active_months_lag3'].describe())\nprint(data['active_months_lag6'].describe())\nprint(data['active_months_lag12'].describe())\n","f68e8d0f":"fig, ax = plt.subplots(1, 3, figsize = (16, 6));\ndata['active_months_lag3'].value_counts().sort_index().plot(kind='bar', ax=ax[0], color='teal', title='3_Month');\ndata['active_months_lag6'].value_counts().sort_index().plot(kind='bar', ax=ax[1], color='brown', title='6_Month');\ndata['active_months_lag12'].value_counts().sort_index().plot(kind='bar', ax=ax[2], color='blue', title='12_Month');\n","2d50e4e6":"x1 = data.loc[data['active_months_lag3']!=3]\nx2 = data.loc[data['active_months_lag6']!=6]\nx3 = data.loc[data['active_months_lag12']!=12]\n\nfig, ax = plt.subplots(1, 3, figsize = (16, 6));\nx1['active_months_lag6'].value_counts().sort_index().plot(kind='bar', ax=ax[0], color='teal', title='3_Month');\nx2['active_months_lag6'].value_counts().sort_index().plot(kind='bar', ax=ax[1], color='brown', title='6_Month');\nx3['active_months_lag12'].value_counts().sort_index().plot(kind='bar', ax=ax[2], color='blue', title='12_Month');\n","97f7b17e":"data[\"consistency\"] = \"Y\"\ndata.loc[data[\"active_months_lag12\"]!=12,\"consistency\"]= \"N\"\n\ndata.head()","3897c4ec":"N\uac1c\uc6d4\uc744 \uc81c\uc678\ud558\uace0 \ub098\ud0c0\ub0b8 \ubd84\ud3ec. \uac70\uc758 \uc120\ud615\uc801\uc778 \uac1c\ud615\uc744\ubcf4\uc774\uace0 \uc788\ub2e4. ","75f6a2fa":"purchases\uc5d0\uc11c inf \uac12\uc740 \ubd84\ubaa8(\uc9c0\ub09c \uc601\uc5c5\ub2ec\uc758 \uad6c\ub9e4\uac74\uc218)\uac00 0\uc77c \uacbd\uc6b0\uc77c \uac83\uc774\uace0 \uc704\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub4ef\uc774 3, 6, 12 \uac1c\uc6d4 \uacf5\ud1b5\uc801\uc73c\ub85c \ud574\ub2f9\ub418\ub294\uac83\uc73c\ub85c \ubcf4\uc544 \uac00\uc124\uc774 \ub9de\ub2e4\uace0 \ubcfc \uc218 \uc788\ub2e4. \ub530\ub77c\uc11c inf \uac12\uc744 \uae30\ub85d\ud55c 3\uac1c\uc758 \uad00\uce21\uce58\ub97c \uc81c\uc678\ud558\uace0 \"avg_purchases_lag\" \ubcc0\uc218 \ubd84\uc11d\uc744 \uc9c4\ud589\ud574\uc57c\ud55c\ub2e4.","e1f13d68":"\n > \uc704\uc758 \uadf8\ub798\ud504\ub97c \ubcf4\uba74 \uc54c \uc218 \uc788\ub4ef\uc774 \ube44\uc815\uc0c1\uc801\uc73c\ub85c \ub192\uc740 \uc218\uce58\ub97c \uac16\uace0 \uc788\ub294 \"avg_sales_lag\"\ubcc0\uc218\ub4e4\uc740 \uc9c0\ub09c\ub2ec\uc758 \ud310\ub9e4\ub7c9\uc774 \ub0ae\uc740 \ubd84\uc704\uc5d0 \uc18d\ud574\uc788\ub294 \uacbd\uc6b0\uc5d0\ub9cc \ud574\ub2f9\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \uc9c0\ub09c\ub2ec \ud310\ub9e4\uc561\uc774 A,B,C,D \ubd84\uc704\uc5d0 \ud574\ub2f9\ud558\ub294 \uad00\uce21\uac12\uc758 \uacbd\uc6b0\uc5d0\ub294 \ud06c\uac8c \uc624\ubc84\uc288\ud305\ud558\uc9c0 \uc54a\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\n\n*\uc989, \uc774 \ubcc0\uc218\uc758 \uc774\uc0c1\uce58\ub4e4\uc740 '\uacfc\uac70\uc5d0 \ube44\ud574 \ucd5c\uadfc\uc5d0 \uc2e4\uc801\uc774 \ub9e4\uc6b0 \ubd80\uc9c4\ud574\uc9c4 merchant'\ub97c \uc758\ubbf8\ud55c\ub2e4\uace0 \ud560 \uc218 \uc788\ub2e4.\n\n**\uc77c\uc815 \ubd84\uc704\uc218 \uc774\uc0c1\uc758 \uac12\ub4e4\uc5d0  winsorizing \ucc98\ub9ac\ub97c \ud558\ub294 \uac83\uc774 \ud6a8\uacfc\uc801\uc77c \uac83\uc73c\ub85c \ubcf4\uc778\ub2e4.","38885c96":"\uc9c0\ub09c 3, 6 12 \uac1c\uc6d4\uac04\uc758 \ud3c9\uade0 \uc218\uc785\uc744 \uac00\uc7a5 \ucd5c\uadfc \ub2ec\ub85c \ub098\ub208 \uac12\uc774\ub2e4.\n\n*\uc774\uac83\uc740 \uc989 \uacfc\uac70 n \uac1c\uc6d4 \ub300\ube44 \ucd5c\uadfc\uc758 \uc131\uacfc\uac00 \uc5b4\ub5a0\ud55c\uc9c0\ub97c \ub098\ud0c0\ub0b4\ub294 \ubcc0\uc218\ub77c\uace0 \ud560 \uc218 \uc788\ub2e4.\n\uc591\uc218\uc774\uace0, \uac12\uc774 \ub0ae\uc73c\uba74 \ub0ae\uc744 \uc218\ub85d \uacfc\uac70\uc5d0 \ube44\ud574 \ucd5c\uadfc \uc131\uacfc\uac00 \uc88b\uc740 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4.\n\n\uc77c\ubc18\uc801\uc73c\ub85c\ub294 \uc9c0\ub09c \ud3c9\uade0\uae30\uac04 \ub3d9\uc548\uc758 \uc218\uc785\ub4e4\uc758 \ubcc0\ud654\uac00 \ud06c\uc9c0 \uc54a\ub2e4\uba74 1\uc5d0 \uac00\uae4c\uc6b8 \uac83\uc774\ub2e4. \n\n\uc2e4\uc81c\ub85c 3, 6, 12 \uac1c\uc6d4 \ubaa8\ub450 \uc911\uc704\uac12\uc774 1\uc5d0 \uac00\uae4c\uc6b4 \uac83\uc744 \uc704\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \n\ud558\uc9c0\ub9cc \ucd5c\ub300 8000\uc5d0 \ud574\ub2f9\ud558\ub294 \uc544\uc6c3\ub77c\uc774\uc5b4 \uc885\uc885 \uc874\uc7ac\ud558\ub294\ub370 \uc774\ub7ec\ud55c \ubcc0\uc218\ub4e4\uc5d0 \ub300\ud55c \ucc98\ub9ac\uac00 \ud544\uc694\ud574 \ubcf4\uc778\ub2e4.","f25df802":"\ubc94\uc8fc\ud615 \ubcc0\uc218\ub4e4 \uc815\ub9ac\/\n1\ubc88 \uadf8\ub798\ud504\uc758 \uacbd\uc6b0 \ub9e4\uc6b0 \ud3b8\ud5a5\ub41c \ubd84\ud3ec, 4\ubc88 \uadf8\ub798\ud504\uc640 5\ubc88\uadf8\ub798\ud504\ub294 \uadf8\ubcf4\ub2e4\ub294 \ubd84\ud3ec\uac00 \uace0\ub974\ub098 \uc5ed\uc2dc\ubb54\uc9c0\ub294...\n2\ubc88\uc758 \uacbd\uc6b0\ub294 \ucd5c\uadfc \uc601\uc5c5 \ub2ec\uc758 \ud310\ub9e4\uae08\uc561 3\ubc88\uc740 \ud310\ub9e4\ud68c\uc218(\uac70\ub798 \uc218) \ub97c \ubc94\uc8fc\ud654\ud55c\uac83.\nA ~ E\ub85c \uac08\uc218\ub85d \ub0ae\uc544\uc9c0\ub294\uac83\uc744 \uc758\ubbf8.  \uae08\uc561\uacfc \uac70\ub798\uc218\uc774\ubbc0\ub85c \ube44\uc2b7\ud55c \ubd84\ud3ec\ub97c \ubcf4\uc774\uba70, \ud558\uc704 \uadf8\ub8f9\uc774 \ud6e8\uc52c \ub354 \ub9ce\uc740 \ud53c\ub77c\ubbf8\ub4dc\ud615 \ubd84\ud3ec\ub97c \uac00\uc9d0","318992c5":"\ubc15\uc2a4 \ud50c\ub78f\uc73c\ub85c \ubd24\uc744\ub54c\uc5d0\ub3c4 \ub300\ubd80\ubd84\uc758 \uac12\uc774-0.0574 \uc5d0 \uace0\uc815\ub418\uc5b4\uc788\uace0 \uc804\uccb4 \uad00\uce21\uce58\uc758 \uc544\uc8fc \uc801\uc740 \ubd80\ubd84\ub9cc \ub9e4\uc6b0 \ub192\uc740 \uac12\uc744 \uac00\uc9c4\ub2e4.","3fa4eae0":"\uc704\uc758 \ub450 \ubcc0\uc218\ub4e4\uc5d0 \ube44\ud574 \ud2b9\ubcc4\ud55c \uc774\uc0c1\uce58\ub294 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc74c.\n\n\uc9c0\ub09c n\uac1c\uc6d4 \ub3d9\uc548 \ud65c\uc131\ud654 \ub418\uc5b4\uc788\uc5c8\ub358 \uac1c\uc6d4 \uc218\ub97c \ub098\ud0c0\ub0b4\ub294 \uac83\uc774\ubbc0\ub85c \uc911\uc694\ud55c \uac83\uc740 3, 6, 12\uac1c\uc6d4\uc5d0 \ud574\ub2f9\ud558\uc9c0 \uc54a\ub294 merchant\ub4e4.\n\n\uc774 \ubcc0\uc218\ub97c \uc774\uc6a9\ud558\uc5ec merchant\uc758 \uc131\uc2e4\uc131\uc744 \ub300\uc6a9\ud558\ub294 \ubcc0\uc218\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc744 \uac83\uc73c\ub85c \ubcf4\uc778\ub2e4.\nex) 3\uac1c\uc6d4\ub0b4\uc5d0 1\ubc88\uc774\uc0c1, 12\uac1c\uc6d4\uc5d0 3\uac1c\uc6d4 \uc774\uc0c1 \uc601\uc5c5\uc744 \uc26c\uc5c8\ub2e4\uba74(\uc131\uc2e4\ub3c4\uac00 \ub0ae\ub2e4\uba74, categorical \ubcc0\uc218\ub85c \uc801\uc6a9\ud558\ub294 \uac83\uc774 \uc88b\uc9c0 \uc54a\uc744\uae4c?), \uc774\ub294 \ud574\ub2f9 merchant\uc640 \uc8fc\ub85c \uac70\ub798\ud558\ub294 \uace0\uac1d\uc758 \ub85c\uc5f4\ud2f0\uac00 \ub5a8\uc5b4\uc9c8 \uc218 \uc788\ub294 \uc774\uc720\uac00 \ub420 \uac83\uc774\ub2e4.","7080235e":"purchases \ubcc0\uc218\uc5ed\uc2dc sales\uc640 \ube44\uc2b7\ud55c \ud2b9\uc131\uc744 \uac00\uc9c0\uace0 \uc788\ub294 \uac83\uc73c\ub85c \ubcf4\uc774\ub098, \uadf9\ub2e8\uc801\uc778 \uac12\ub4e4\uc774 \ub354 \uc801\uc740\uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\n\ud070\uac12\ub4e4\uc758 \ubd84\ud3ec","97a6d4dc":"Merchant \uc758 \uc131\uc2e4\uc131(active months) \/ \ucd5c\uadfc \uc131\uc7a5\ub3c4(sales\/purchases) \/ \ubcc0\uc218\ub4e4\uc744 \uc0dd\uc131\ud558\uc5ec \uace0\uac1d\uc774 \uc8fc\ub85c \uc774\uc6a9\ud588\ub358 merchant\uac00 \uae0d\uc815\uc801\uc778\uc9c0 \ubd80\uc815\uc801\uc778\uc9c0\ub97c \uc774\uc6a9\ud558\uba74 \uace0\uac1d \ub85c\uc5f4\ud2f0 \uc608\uce21\uc5d0 \ucda9\ubd84\ud788 \uc124\uba85\ub825\uc744 \uac00\uc9c8 \uc218 \uc788\uc744 \uac83\uc73c\ub85c \ubcf4\uc778\ub2e4.","a7bb9369":"\uc0ac\uc2e4\uc0c1 1\uacfc 2\ub294 \ube44\uc2b7\ud55c \uc22b\uc790\ub4e4, \ubd84\ud3ec\uac00 \uc81c\uc815\uc2e0\uc774 \uc544\ub2c8\ub2e4. \uc5b4\ub5a4 \uac83\uc744 \uc758\ubbf8\ud558\ub294\uac70\uc9c0.."}}