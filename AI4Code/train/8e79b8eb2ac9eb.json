{"cell_type":{"075829ec":"code","7a9d1e46":"code","358ee089":"code","2dfddb3f":"code","40d3ff04":"code","0ac6aa0d":"code","f34473c3":"code","117f75f2":"code","1ec1fe2e":"code","e3c94c22":"code","e31fc31b":"code","a4ca520a":"code","b17dab4c":"code","8d8a9727":"code","bb659550":"code","69189c35":"code","e72242f1":"code","3dd6fa16":"code","a90dfe2a":"code","0fc12532":"code","d6a0c0fc":"code","cc6c3d13":"code","7491d1e2":"code","d6fc770f":"code","47c854cb":"code","a1279ef3":"code","c654d8d0":"code","0d5899aa":"code","82b36cb8":"code","6bd68041":"code","645b8f26":"code","48e901dd":"code","3d6ee59e":"code","ac29fee3":"code","7c53ec7b":"code","192d639b":"code","57564f04":"code","7ddfaeb0":"code","490aaf09":"code","195ab5a7":"code","65a498fe":"code","e02ef629":"code","89475178":"code","04672a2a":"code","1b4c0aa5":"code","b4cc3cd7":"code","b5eaa6c9":"code","6cf6c2a3":"code","1ac26599":"code","bbcaa5f6":"code","2105d4f4":"code","b09828e3":"code","cfe90d64":"code","40fe90dd":"code","4586d0cc":"code","c438312e":"code","0bf34c83":"code","9476031c":"code","60053523":"code","2bed4b8b":"code","d4079fb5":"code","966ab92f":"code","a1725f5d":"markdown","472cb2b6":"markdown","2a2c75eb":"markdown","3bb4b300":"markdown","4871b446":"markdown","a030ded8":"markdown","c31a9961":"markdown","d8c7caff":"markdown","671e7c98":"markdown","f1057c11":"markdown","2d7dd59d":"markdown","18abd60e":"markdown","3648c1d6":"markdown","1aeebf67":"markdown","b622d268":"markdown","692d755a":"markdown","5f3471d9":"markdown","2814694a":"markdown","dd8d4d88":"markdown","e70d9332":"markdown","e8cd6297":"markdown","61fca625":"markdown","83674b6c":"markdown","ec0c731d":"markdown","0948d5fc":"markdown","cecb3b1a":"markdown","d16e4d24":"markdown","388884e1":"markdown","a196d730":"markdown","7fd67b1d":"markdown","45878f70":"markdown","913c65d1":"markdown"},"source":{"075829ec":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%matplotlib inline\nsns.set_style(\"whitegrid\")\nplt.style.use(\"fivethirtyeight\")","7a9d1e46":"df = pd.read_csv(\"..\/input\/stanford-open-policing-project\/police_project.csv\")\ndf.head()","358ee089":"df.info()","2dfddb3f":"df.describe()","40d3ff04":"df.shape","0ac6aa0d":"df.isnull().sum()","f34473c3":"df.dropna(axis=1, how='all').shape","117f75f2":"df.drop('county_name', axis=1, inplace=True)","1ec1fe2e":"df.isnull().sum()","e3c94c22":"sns.catplot('driver_gender', data=df, kind=\"count\", height=7)","e31fc31b":"df.driver_gender.value_counts()","a4ca520a":"print(df[df.violation == 'Speeding'].driver_gender.value_counts(normalize=True))\nplt.figure(figsize=(12, 8))\ndf[df.violation == 'Speeding'].driver_gender.value_counts().plot(kind=\"bar\")","b17dab4c":"df.loc[df.violation == \"Speeding\", \"driver_gender\"].value_counts(normalize=True)","8d8a9727":"df[df.driver_gender == \"M\"].violation.value_counts(normalize=True)","bb659550":"df[df.driver_gender == \"F\"].violation.value_counts(normalize=True)","69189c35":"plt.figure(figsize=(12, 18))\n\nplt.subplot(4, 2, 1)\ndf[df.driver_gender == \"F\"].violation.value_counts(normalize=True).plot(kind=\"bar\")\nplt.title(\"Violation of Women\")\n\nplt.subplot(4, 2, 2)\ndf[df.driver_gender == \"M\"].violation.value_counts(normalize=True).plot(kind=\"bar\")\nplt.title(\"Violation of Men\")\n\nplt.subplot(4, 2, 3)\nsns.countplot('violation', data=df, hue='driver_gender')\nplt.xticks(rotation=90)\n\nplt.tight_layout();","e72242f1":"df.search_conducted.value_counts()","3dd6fa16":"df.loc[df.search_conducted, 'driver_gender'].value_counts()","a90dfe2a":"df.groupby(['violation', 'driver_gender']).search_conducted.mean()","0fc12532":"plt.figure(figsize=(12, 12))\n\nplt.subplot(2, 2, 1)\ndf.search_conducted.value_counts().plot(kind=\"bar\")\nplt.title(\"Searched Cases\")\n\nplt.subplot(2, 2, 2)\ndf.loc[df.search_conducted, 'driver_gender'].value_counts().plot(kind=\"bar\")\nplt.title(\"Searched Men and Women\")\n\nplt.subplot(2, 2, 3)\ndf.groupby(['violation', 'driver_gender']).search_conducted.mean().plot(kind=\"bar\")\n\nplt.subplot(2, 2, 4)\nsns.countplot('search_conducted', data=df, hue='driver_gender')","d6a0c0fc":"df.search_type.isnull().sum()","cc6c3d13":"df.search_conducted.value_counts()","7491d1e2":"df[df.search_conducted == False].search_type.value_counts(dropna=False)","d6fc770f":"df.search_type.value_counts()","47c854cb":"plt.figure(figsize=(12, 8))\ndf.search_type.value_counts().plot(kind=\"bar\")","a1279ef3":"df.search_type.value_counts()","c654d8d0":"from collections import Counter\n\nst = df.search_type.dropna()\n\nsearch_count = Counter()\nfor search in st.str.split(','):\n    search_count.update(search)","0d5899aa":"search_count = dict(search_count)\nplt.barh(list(search_count.keys()), list(search_count.values()))","82b36cb8":"df.search_type.str.contains('Protective Frisk').sum()","6bd68041":"df.search_type.str.contains('Protective Frisk').mean()","645b8f26":"df.head()","48e901dd":"print(df.stop_date.dtype)\nprint(df.stop_time.dtype)","3d6ee59e":"df.stop_date","ac29fee3":"df['stop_date'] = pd.to_datetime(df.stop_date, format=\"%Y-%M-%d\")\ndf[\"year\"] = df.stop_date.dt.year","7c53ec7b":"df.dtypes","192d639b":"df.year.value_counts()","57564f04":"plt.figure(figsize=(12, 8))\ndf.year.value_counts().plot(kind=\"bar\")","7ddfaeb0":"df.columns","490aaf09":"df.drugs_related_stop.value_counts()","195ab5a7":"df[\"stop_time\"] = pd.to_datetime(df.stop_time, format=\"%H:%M\").dt.hour\ndf.head()","65a498fe":"df.loc[df.sort_values(by=\"stop_time\").drugs_related_stop, 'stop_time'].value_counts()","e02ef629":"plt.figure(figsize=(12, 12))\n\nplt.subplot(2, 2, 1)\ndf.loc[df.sort_values(by=\"stop_time\").drugs_related_stop, 'stop_time'].value_counts().sort_index().plot(kind=\"bar\")\n\nplt.subplot(2, 2, 2)\ndf.loc[df.sort_values(by=\"stop_time\").drugs_related_stop, 'stop_time'].value_counts().sort_index().plot()","89475178":"df.stop_time.sort_index().value_counts().sort_index()","04672a2a":"plt.figure(figsize=(12, 12))\n\nplt.subplot(2, 2, 1)\ndf.stop_time.sort_index().value_counts().sort_index().plot()\n\nplt.subplot(2, 2, 2)\ndf.stop_time.sort_index().value_counts().sort_index().plot(kind=\"bar\")","1b4c0aa5":"df.stop_duration.isnull().sum()","b4cc3cd7":"df.stop_duration.unique()","b5eaa6c9":"df.stop_duration.value_counts(dropna=False)","6cf6c2a3":"# ri.stop_duration.replace(['1', '2'], value=np.nan, inplace=True)\ndf.loc[(df.stop_duration == '1')| (df.stop_duration == '2'), 'stop_duration'] = np.nan","1ac26599":"df.stop_duration.value_counts(dropna=False)","bbcaa5f6":"df.stop_duration.unique()","2105d4f4":"df.violation_raw.value_counts()","b09828e3":"df.groupby('stop_duration').violation_raw.value_counts()","cfe90d64":"sns.catplot(\"stop_duration\", data=df, hue=\"violation_raw\", kind=\"count\", height=7)","40fe90dd":"plt.figure(figsize=(12, 12))\ndf.groupby('stop_duration').violation_raw.value_counts().plot(kind=\"bar\")","4586d0cc":"mapping = {'0-15 Min':8, '16-30 Min':23, '30+ Min':45}\ndf['stop_minutes'] = df.stop_duration.map(mapping)","c438312e":"df.stop_minutes.value_counts()","0bf34c83":"df.groupby('violation_raw').stop_minutes.mean()","9476031c":"df.groupby('violation_raw').stop_minutes.agg(['mean', 'count'])","60053523":"plt.figure(figsize=(12, 10))\n\nplt.subplot(2, 2, 1)\ndf.groupby('violation_raw').stop_minutes.mean().plot(rot=45)\n\nplt.subplot(2, 2, 2)\ndf.groupby('violation_raw').stop_minutes.mean().plot(kind=\"bar\")","2bed4b8b":"df.groupby(\"violation\").driver_age.describe()","d4079fb5":"plt.figure(figsize=(12, 12))\n\nplt.subplot(2, 2, 1)\ndf.driver_age.hist(bins=10)\n\nplt.subplot(2, 2, 2)\ndf.driver_age.value_counts().sort_index().plot()","966ab92f":"df.hist('driver_age', by='violation', figsize=(12, 12));","a1725f5d":"`8.57%` of the time the driver is frisked.","472cb2b6":"**Lessons:**\n\n- Convert strings to numbers for analysis\n- Approximate when necessary\n- Use count with mean to looking for meaningless means","2a2c75eb":"**Lessons:**\n\n- Pay attention to default arguments\n- Check your work\n- There is more than one way to do everything in pandas","3bb4b300":"`county_name`  All the data is missing, We will `drop` this column.","4871b446":"- **What does NaN mean?**\n\n> In computing, NaN, standing for not a number, is a member of a numeric data type that can be interpreted as a value that is undefined or unrepresentable, especially in floating-point arithmetic. \n\n\n- **Why might a value be missing?**\n\n> There are many causes of missing values, Missing data can occur because of `nonresponse`, `Attrition`, `governments or private entities`, ...\n\n- **Why mark it as NaN? Why not mark it as a 0 or an empty string or a string saying \"Unknown\"?**\n\n> We mark missing values as `NaN` to make them distinguish from the original dtype of the feature.","a030ded8":"From the stopped cases `2725` are `men` and only `471` are women.","c31a9961":"# 9. Find the bad data in the stop_duration column and fix it ","d8c7caff":"## 2. 2. When a women is pulled over, How often is it for speeding?","671e7c98":"**Lessons:**\n\n- Be conscious of sorting when plotting","f1057c11":"**Lessons:**\n\n- Verify your assumptions about your data\n- pandas functions ignore missing values by default","2d7dd59d":"**Lessons:**\n\n- Ambiguous data should be marked as missing\n- NaN is not a string","18abd60e":"# 7. How does drug activity change by time of day?","3648c1d6":"# 8. Do most stops occur at night?","1aeebf67":"`search_type` is missing every time the police don't conduct a search.","b622d268":"# Dataset: Stanford Open Policing Project  \n\n![dataset-thumbnail.jpg](attachment:dataset-thumbnail.jpg)\n\n[Stanford Open Policing Project ](https:\/\/openpolicing.stanford.edu\/)","692d755a":"Does this prove causation?\n\n**Lessons:**\n\n- Causation is difficult to conclude, so focus on relationships\n- Include all relevant factors when studying a relationship","5f3471d9":"**Lessons:**\n\n- Consider removing chunks of data that may be biased\n- Use the datetime data type for dates and times","2814694a":"# 10. What is the mean stop_duration for each violation_raw?","dd8d4d88":"**Lessons:**\n\n- Use histograms to show distributions\n- Be conscious of axes when using grouped plots","e70d9332":"# 3. Does gender affect who gets searched during a stop?","e8cd6297":"# 6. Which year had the least number of stops?","61fca625":"# 4. Why is search_type missing so often?","83674b6c":"# Using pandas for Better (and Worse) Data Science\n\n![1200px-Pandas_logo.svg.png](attachment:1200px-Pandas_logo.svg.png)\n\nGood data analysis project is all about asking questions, in this notebook we are goinig to answer the following questions:\n    1. Do men or women speed more often?\n    2. Does gender affect who gets searched during a stop?\n    3. During a search, how often is the driver frisked?\n    4. Which year had the least number of stops?\n    5. How does drug activity change by time of day?\n    6. Do most stops occur at night?","ec0c731d":"# 11. Compare the age distributions for each violation","0948d5fc":"# 2. Do men or women speed more often?","cecb3b1a":"## 2. 1. When a man is pulled over, How often is it for speeding?","d16e4d24":"**Lessons:**\n\n- Use string methods to find partial matches\n- Use the correct denominator when calculating rates\n- pandas calculations ignore missing values\n- Apply the \"smell test\" to your results","388884e1":"**Lessons:**\n\n- Use plots to help you understand trends\n- Create exploratory plots using pandas one-liners","a196d730":"# 1. Remove the column that only contains missing values","7fd67b1d":"Responding to this question, we must take consideration of the non-equivalent distribution of the data or use fraction.","45878f70":"From all `88545` stoping cases the data only `3196` are searched.","913c65d1":"# 5. During a search, how often is the driver frisked?"}}