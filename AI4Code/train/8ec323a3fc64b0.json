{"cell_type":{"cf1f73a4":"code","703abb38":"code","2083cc3e":"code","e9582344":"code","c01a3b54":"markdown","95aeed71":"markdown","d9ac276e":"markdown","188c07a0":"markdown","1ff19f3e":"markdown","348ef51f":"markdown","b72b3be3":"markdown","6ebd5770":"markdown","598fc799":"markdown","bd422714":"markdown","58b0a21b":"markdown","036dbec8":"markdown"},"source":{"cf1f73a4":"import numpy as np \n#ROC\u306b\u5fc5\u8981\u306a\u30d7\u30ed\u30c3\u30c8\u70b9\u3092\u4f5c\u6210\ndef make_roc_plot_points(L,c):\n    N = sum(c==0) #class 0:negative\n    P = sum(c==1) #class 1:positive\n    R = np.empty((0,2), float) #presurve plot points\n    i = 0\n    FP = 0\n    TP = 0\n    f = -100000\n    while(i <c.shape[0]):\n        if L[i] != f:\n            R = np.append(R, np.array([[FP\/N, TP\/P]]), axis=0)  \n            f = L[i]\n        if c[i] == 1:\n            TP = TP+1\n        else:\n            FP = FP+1\n        i = i + 1\n    return(R)\n","703abb38":"L = np.array([0.9,0.8,0.7,0.6,0.55,0.54,0.53,0.52,0.51,0.505,\n    0.4,0.39,0.38,0.37,0.36,0.35,0.34,0.33,0.30,0.1]) #\u4e88\u6e2c\u3055\u308c\u305f\u30b9\u30b3\u30a2\nc = np.array([1,1,0,1,1,1,0,0,1,0,\n    1,0,1,0,0,0,1,0,1,0]) \nR = make_roc_plot_points(L,c)\nprint(R)","2083cc3e":"import matplotlib.pyplot as plt\nplt.plot(R[:,0],R[:,1],linestyle='solid',color='blue')\nplt.title(\"Receiver Operatorating Characteristic curve\")\nplt.xlabel(\"FPR\")\nplt.ylabel(\"TPR\")\nplt.show()","e9582344":"AUC = 0\nfor i in range(c.shape[0]-1):\n    AUC = AUC + (R[i+1,0]-R[i,0])*R[i,1]\nAUC","c01a3b54":"<a id=\"ROC\"><\/a>\n# 2.ROC\u66f2\u7dda\u30fbAUC","95aeed71":"\u30b0\u30e9\u30d5\u304c\u4f5c\u6210\u3067\u304d\u305f\u306e\u3067\u6b21\u306bAUC\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002","d9ac276e":"\u6df7\u540c\u884c\u5217\u306f\u3042\u308b\u4e88\u6e2c\u3057\u305f\u3044\u5909\u6570$y$\u3092\u542b\u3080\u6559\u5e2b\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3042\u308b\u4e88\u6e2c\u30e2\u30c7\u30eb\u3092\u7528\u3044\u3066$y$\u306e\u4e88\u6e2c\u3092\u884c\u3046\u3068\u304d\u3001\u305d\u306e\u6559\u5e2b\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066(\u4e88\u6e2c\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u304c...)\u306e\u4e88\u6e2c\u3068\u305d\u306e\u30c7\u30fc\u30bf\u306e\u771f\u5024\u3092\u8868\u306b\u3088\u3063\u3066\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002\n\n2\u5024\u30c7\u30fc\u30bf\u3092\u4eee\u5b9a\u3059\u308b\u3068\u3001$2(\u4e88\u6e2c) \u00d7 2(\u771f\u5024)=4$\u306e4\u30d1\u30bf\u30fc\u30f3\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n\u6df7\u540c\u884c\u5217\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n(\u753b\u50cf\u304c\u5927\u304d\u304f\u306a\u308b\u306e\u306f\u3054\u3081\u3093\u306a\u3055\u3044..\n\u81ea\u5206\u3067\u8cbc\u3063\u305f\u753b\u50cf\u3067\u5927\u304d\u3055\u3092\u5909\u3048\u3089\u308c\u308b\u5bfe\u51e6\u306e\u4ed5\u65b9\u6559\u3048\u3066\u6b32\u3057\u3044\u3067\u3059...)","188c07a0":"<a id=\"confusion\"><\/a>\n# 1. \u6df7\u540c\u884c\u5217(confusion matrix)","1ff19f3e":"## \u76ee\u6b21\n#### 1. [\u6df7\u540c\u884c\u5217(confusion matrix)](#confusion)\n#### 2. [ROC\u66f2\u7dda\u30fbAUC](#ROC)\n#### [\u53c2\u8003\u6587\u732e](#reference)","348ef51f":"![\u56f31.png](attachment:02823930-6d1f-4edc-8b16-d6358428420c.png)\n","b72b3be3":"\u307e\u305f\u3001\u69d8\u3005\u306a\u6307\u6a19\u3082\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002\n* $accuracy =\\frac{TP+FN}{TP+FP+FN+TN} = \\frac{\u6b63\u3057\u304f\u4e88\u6e2c\u3067\u304d\u305f\u6570}{\u30c7\u30fc\u30bf\u6570}$\n* $TPR(True Positive Rate) or Recall = \\frac{TP}{TP+FN}$\n* $FPR(False Positive Rate) = \\frac{FP}{FP+TN}$\n* $Precision = \\frac{TP}{TP+FP}$\n* $F-measure = 2\u00d7(\\frac{1}{TPR}+\\frac{1}{Precision})^{-1}$","6ebd5770":"\u3053\u3053\u304b\u3089\u306fROC\u66f2\u7dda\u306b\u3064\u3044\u3066\u3067\u3059\u3002\nROC\u66f2\u7dda\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u306f\u3001\u53c2\u8003\u6587\u732e\u3092\u30e1\u30a4\u30f3\u306b\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002<br>\n\u307e\u305a\u306fROC\u66f2\u7dda\u304c\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u306a\u306e\u304b\u30b0\u30e9\u30d5\u3092\u898b\u3066\u898b\u307e\u3059\u3002(\u5199\u771f\u3067\u3059\u304c\u7d50\u69cb\u524d\u306b\u4f5c\u6210\u3057\u305f\u30b0\u30e9\u30d5\u3067\u3059)\n<img src=\"https:\/\/github.com\/santoHide\/issues\/blob\/main\/kaggle\/2021\/RNSA\/ROC%E6%9B%B2%E7%B7%9A.png?raw=true\" width=\"90%\">\n\n\u3053\u306e\u3088\u3046\u306a\u30b0\u30e9\u30d5\u304cROC\u66f2\u7dda\u3068\u547c\u3070\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\n\u7e26\u8ef8\u306bTPR\u3001\u6a2a\u8ef8\u306bFPR\u3092\u53d6\u3063\u3066\u3053\u306e\u66f2\u7dda\u306e\u4e0b\u5074\u306e\u9762\u7a4d\u304cAUC\u306b\u306a\u308a\u307e\u3059\u3002<br>\n\u5b9f\u969b\u306b\u53c2\u8003\u6587\u732e\u306e\u8ad6\u6587\u306e\u30b3\u30fc\u30c9\u306b\u306a\u305e\u3063\u3066\u30b0\u30e9\u30d5\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002<br>\n\n2021\/8\/4 ROC\u306e\u30d7\u30ed\u30c3\u30c8\u70b9\u3092\u95a2\u6570\u5316\u3057\u307e\u3057\u305f\u3002\u4f7f\u3044\u305f\u3044\u4eba\u306f\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002","598fc799":"AUC=0.58\u3068\u3044\u3046\u5024\u306b\u306a\u308a\u307e\u3057\u305f\u3002<br>\nAUC\u306e\u5024\u306f\u30e9\u30f3\u30c0\u30e0\u306b\u76ee\u7684\u5909\u6570$y$\u3092\u4e88\u6e2c\u3057\u3066\u3044\u308b\u30680.5\u306e\u5024\u306b\u306a\u308a\u30011\u306b\u8fd1\u3044\u307b\u3069\u30e2\u30c7\u30eb\u306e\u6027\u80fd\u306f\u826f\u3044\u3089\u3057\u3044\u3067\u3059\u3002<br>\n\u9ad8\u3044AUC\u306e\u5024\u3092\u76ee\u6307\u305b\u308b\u3088\u3046\u306b\u9811\u5f35\u308a\u307e\u3057\u3087\u3046!!\n","bd422714":"<a id=\"reference\"><\/a>\n# \u53c2\u8003\u6587\u732e\n[1] Tom Fawcett. ROC Graphs: Notes and Practical Considerations for Researchers. *Pattern Recognition Letters*. 2002; **31**(8): 1-38.","58b0a21b":"# ROC_AUC\n\nSanto\u3068\u7533\u3057\u307e\u3059\u3002\n\u65e5\u9803\u3001\u5927\u5b66\u306e\u65b9\u3067\u533b\u7642\u7d71\u8a08\u3067\u7d71\u8a08\u5b66\u3092\u30e1\u30a4\u30f3\u306b\u5b66\u7fd2\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u306eRNSA\u30b3\u30f3\u30da\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u8a55\u4fa1\u6307\u6a19\u306eROC\u66f2\u7dda(Receiver Operatorating Characteristic curve)\u3092\u7528\u3044\u305fAUC(Area Under the Curve)\u306b\u3064\u3044\u3066\u3001\u3053\u306e\u30b3\u30f3\u30da\u4ee5\u5916\u306b\u3082\u5927\u5b66\u306e\u8ab2\u984c\u3067\u8ad6\u6587\u3092\u8aad\u3080\u3068\u304d\u306b\u3082\u4f7f\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5c11\u3057\u3042\u308b\u306e\u3067\u3001\u7c21\u5358\u306b\u307e\u3068\u3081\u3066\u307e\u3057\u305f\u3002\u3082\u3057\u3001\u9593\u9055\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u662f\u975e\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3067\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002","036dbec8":"\u3053\u308c\u3067\u30d7\u30ed\u30c3\u30c8\u70b9\u306f\u5b8c\u6210\u3057\u307e\u3057\u305f<br>\n\u3053\u306e\u30d7\u30ed\u30c3\u30c8\u70b9\u3092\u7528\u3044\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u307e\u3059!"}}