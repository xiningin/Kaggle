{"cell_type":{"45bf3569":"code","5d073e91":"code","36f072ac":"code","07c21c19":"code","0cccd0ef":"code","97063811":"code","f6ed36f3":"code","2d7f9a57":"code","0cc0daa0":"code","4e85c8f7":"code","e6b726ec":"code","cf0f32d7":"code","f0d32377":"code","d596b57f":"code","14121242":"code","d225dddd":"code","e085aa25":"code","8382d62f":"code","55a7ac4d":"code","7dd1b2ae":"code","b91ff2d6":"code","faabf53a":"markdown","4c0f326e":"markdown","1bd41254":"markdown","29d2c76b":"markdown","fd6f878b":"markdown","9afdb811":"markdown","ba787e6e":"markdown","fd9bd6a7":"markdown","bc63471a":"markdown","5c04459d":"markdown","88494da8":"markdown","aac32e56":"markdown","108b80c7":"markdown","f558fec2":"markdown","dc01ac8e":"markdown","5310b429":"markdown","fe27105b":"markdown","796ab5b5":"markdown","3b5606ab":"markdown","1a62aea5":"markdown","ac51e8c4":"markdown","06dd5efa":"markdown","1e25e6de":"markdown","0d08dd54":"markdown","5aa4119b":"markdown"},"source":{"45bf3569":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n#plotly\n!pip install chart_studio\nimport plotly.express as px\nimport chart_studio.plotly as py\nimport plotly.graph_objs as go\nfrom plotly.offline import iplot\nimport cufflinks\ncufflinks.go_offline()\ncufflinks.set_config_file(world_readable=True, theme='pearl')\n\n#datetime\nfrom datetime import datetime\n","5d073e91":"nifty_50 = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY 50.csv',parse_dates=[\"Date\"])\nnifty_50.head()","36f072ac":"nifty_50.info()","07c21c19":"nifty_50.isnull().sum()","0cccd0ef":"nifty_50.fillna(method='ffill',inplace=True)\n","97063811":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n         x=nifty_50['Date'],\n         y=nifty_50['High'],\n         name='High Price',\n    line=dict(color='blue'),\n    opacity=0.8))\n\nfig.add_trace(go.Scatter(\n         x=nifty_50['Date'],\n         y=nifty_50['Low'],\n         name='Low Price',\n    line=dict(color='orange'),\n    opacity=0.8))\n        \n    \nfig.update_layout(title_text='NIFTY 50 High vs Close Trend',plot_bgcolor='rgb(250, 242, 242)',yaxis_title='Value')\n\nfig.show()","f6ed36f3":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n         x=nifty_50['Date'],\n         y=nifty_50['Close'],\n         name='Closing Price',\n    line=dict(color='blue'),\n    opacity=0.8))\n\n    \nfig.update_layout(title_text='NIFTY 50 Closing Price',plot_bgcolor='rgb(250, 242, 242)',yaxis_title='Value')\n\nfig.show()","2d7f9a57":"fig = go.Figure()\nfig.add_trace(go.Scatter(\n         x=nifty_50['Date'],\n         y=nifty_50['P\/E'],\n         name='P\/E Ratio',\n    line=dict(color='green'),\n    opacity=0.8))\n\nfig.add_trace(go.Scatter(\n         x=nifty_50['Date'],\n         y=nifty_50['P\/B'],\n         name='P\/B Ratio',\n    line=dict(color='orange'),\n    opacity=0.8))\n        \n    \nfig.update_layout(title_text='P\/E vs P\/B Ratio',plot_bgcolor='rgb(250, 242, 242)',yaxis_title='Value')\n\nfig.show()","0cc0daa0":"nifty_50_2019 = nifty_50[nifty_50['Date'] >= '2019-01-01']\nnifty_50_2019.head()","4e85c8f7":"df=nifty_50_2019\nfig = go.Figure(data=[go.Candlestick(x=df['Date'],\n                open=df['Open'],\n                high=df['High'],\n                low=df['Low'],\n                close=df['Close'])])\n\nfig.show()","e6b726ec":"fig = px.line(nifty_50_2019, x='Date', y='Close', title='Time Series with Range Slider and Selectors')\n\nfig.update_xaxes(\n    rangeslider_visible=False,\n    rangeselector=dict(\n        buttons=list([\n            dict(count=1, label=\"1m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=6, label=\"6m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=1, label=\"YTD\", step=\"year\", stepmode=\"todate\"),\n            dict(count=1, label=\"1y\", step=\"year\", stepmode=\"backward\"),\n            dict(step=\"all\")\n        ])\n    )\n)\n\nfig.update_layout(plot_bgcolor='rgb(250, 242, 242)',\n    title='NIFTY_50 : Major single day falls -2019 onwards',\n    yaxis_title='NIFTY 50 Stock',\n    shapes = [dict(x0='2020-03-23', x1='2020-03-23', y0=0, y1=1, xref='x', yref='paper', line_width=2,opacity=0.3,line_color='red',editable=False),\n             dict(x0='2019-09-3', x1='2019-09-3', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='red'),\n             dict(x0='2020-02-1', x1='2020-02-1', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='red'),\n             dict(x0='2020-03-12', x1='2020-03-12', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='red')],\n    annotations=[dict(x='2020-03-23', y=0.5, xref='x', yref='paper',\n                    showarrow=False, xanchor='left', text='Lockdown Phase-1 announced'),\n                dict(x='2019-09-3', y=0.05, xref='x', yref='paper',\n                    showarrow=False, xanchor='left', text='Multiple PSU Bank Merger Announcements'),\n                dict(x='2020-02-1', y=0.5, xref='x', yref='paper',\n                    showarrow=False, xanchor='right', text='Union Budget,coronavirus pandemic'),\n                dict(x='2020-03-12', y=0.3, xref='x', yref='paper',\n                    showarrow=False, xanchor='right', text='Coronavirus declared Pandemic by WHO')]\n)\nfig.show()","cf0f32d7":"fig = px.line(nifty_50_2019, x='Date', y='Close', title='Time Series with Range Slider and Selectors')\n\nfig.update_xaxes(\n    rangeslider_visible=False,\n    rangeselector=dict(\n        buttons=list([\n            dict(count=1, label=\"1m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=6, label=\"6m\", step=\"month\", stepmode=\"backward\"),\n            dict(count=1, label=\"YTD\", step=\"year\", stepmode=\"todate\"),\n            dict(count=1, label=\"1y\", step=\"year\", stepmode=\"backward\"),\n            dict(step=\"all\")\n        ])\n    )\n)\n\nfig.update_layout(plot_bgcolor='rgb(250, 242, 242)',\n    title='NIFTY_50 : Major single day gains -2019 onwards',\n    yaxis_title='NIFTY 50 Stock',\n    shapes = [dict(x0='2019-05-20', x1='2019-05-20', y0=0, y1=1, xref='x', yref='paper', line_width=2,opacity=0.3,line_color='green',editable=False),\n             dict(x0='2020-05-23', x1='2020-05-23', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='green'),\n             dict(x0='2019-09-20', x1='2019-09-20', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='green'),\n             dict(x0='2020-04-07', x1='2020-04-07', y0=0, y1=1, xref='x', yref='paper',line_width=3,opacity=0.3,line_color='green')],\n    annotations=[dict(x='2019-05-20', y=0.54, xref='x', yref='paper',\n                    showarrow=False, xanchor='right', text='Exit-Polls predict majority'),\n                 dict(x='2019-05-20', y=0.5, xref='x', yref='paper',\n                    showarrow=False, xanchor='right', text='for BJP government'),\n                dict(x='2019-09-3', y=0.08, xref='x', yref='paper',\n                    showarrow=False, xanchor='left', text='2019 General Elections'),\n                 dict(x='2019-09-3', y=0.05, xref='x', yref='paper',\n                    showarrow=False, xanchor='left', text='results announced'),\n                dict(x='2019-09-20', y=0.54, xref='x', yref='paper',\n                    showarrow=False, xanchor='left', text='cut in the corporate tax rate announced'),\n                dict(x='2020-04-07', y=0.3, xref='x', yref='paper',\n                    showarrow=False, xanchor='right', text='Italy Coronavirus Nos went down')]\n)\nfig.show()","f0d32377":"nifty_auto = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY AUTO.csv',parse_dates=[\"Date\"])\nnifty_bank = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY BANK.csv',parse_dates=[\"Date\"])\nnifty_fmcg = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY FMCG.csv',parse_dates=[\"Date\"])\nnifty_IT = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY IT.csv',parse_dates=[\"Date\"])\nnifty_metal = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY METAL.csv',parse_dates=[\"Date\"])\nnifty_pharma = pd.read_csv('..\/input\/nifty-indices-dataset\/NIFTY PHARMA.csv',parse_dates=[\"Date\"])\n\n\n#Fill in missing values\nnifty_auto.fillna(method='ffill',inplace=True)\nnifty_bank.fillna(method='ffill',inplace=True)\nnifty_fmcg.fillna(method='ffill',inplace=True)\nnifty_IT.fillna(method='ffill',inplace=True)\nnifty_metal.fillna(method='ffill',inplace=True)\nnifty_pharma.fillna(method='ffill',inplace=True)\n","d596b57f":"nifty_auto_2019 = nifty_auto[nifty_auto['Date'] > '2019-12-31']\nnifty_bank_2019 = nifty_bank[nifty_bank['Date'] > '2019-12-31']\nnifty_fmcg_2019 = nifty_fmcg[nifty_fmcg['Date'] > '2019-12-31']\nnifty_IT_2019 = nifty_IT[nifty_IT['Date'] > '2019-12-31']\nnifty_metal_2019 = nifty_metal[nifty_metal['Date'] > '2019-12-31']\nnifty_pharma_2019 = nifty_pharma[nifty_pharma['Date'] > '2019-12-31']\n\nd = {'NIFTY Auto index': nifty_auto_2019['Close'].values, \n     'NIFTY Bank index': nifty_bank_2019['Close'].values,\n     'NIFTY FMCG index': nifty_fmcg_2019['Close'].values,\n     'NIFTY IT index': nifty_IT_2019['Close'].values,\n     'NIFTY Metal index': nifty_metal_2019['Close'].values,\n     'NIFTY Pharma index': nifty_pharma_2019['Close'].values,\n    }\n\n","14121242":"\ndf = pd.DataFrame(data=d)\ndf.index=nifty_auto_2019['Date']\ndf.head()","d225dddd":"df.iplot(kind='box')","e085aa25":"fig = df.iplot(asFigure=True, subplots=True, subplot_titles=True, legend=False)\nfig.show()","8382d62f":"fig = df.iplot(asFigure=True, hline=[2,4], vline=['2020-03-23'])\nfig.show()","55a7ac4d":"fig = df.iplot(asFigure=True,\n               vspan={'x0':'2020-03-23','x1':'2020-04-14',\n                      'color':'rgba(30,30,30,0.3)','color':'teal','fill':True,'opacity':.4})\n\nfig.show()","7dd1b2ae":"fig = df.iplot(asFigure=True,\n               vspan={'x0':'2020-04-15','x1':'2020-05-03',\n                      'color':'rgba(30,30,30,0.3)','color':'red','fill':True,'opacity':.4})\n\nfig.show()","b91ff2d6":"df_a=df['NIFTY Pharma index']\nmax_val=df_a.max()\nmin_val=df_a.min()\nmax_date=df_a[df_a==max_val].index[0].strftime('%Y-%m-%d')\nmin_date=df_a[df_a==min_val].index[0].strftime('%Y-%m-%d')\nshape1=dict(kind='line',x0=max_date,y0=max_val,x1=min_date,y1=min_val,color='blue',width=2)\nshape2=dict(kind='rect',x0=max_date,x1=min_date,fill=True,color='gray',opacity=.3)\n\ndf_a.iplot(shapes=[shape1,shape2])","faabf53a":"## 2.1 NIFTY_50 : Major single day falls -2019 onwards","4c0f326e":"## 1.2 Missing values ","1bd41254":"There is just one missing value in two columns. Let's fill those.","29d2c76b":"Let's quickly understand what each of them represent:\n\n* NIFTy Auto Index\n\nThe Nifty Auto Index is designed to reflect the behavior and performance of the Automobiles sector which includes manufacturers of cars & motorcycles, heavy vehicles, auto ancillaries, tyres, etc. \n\n* NIFTY Bank Index\n\nNifty Bank Index is an index comprised of the most liquid and large capitalised Indian Banking stocks. It provides investors and market intermediaries with a benchmark that captures the capital market performance of Indian Banks\n\n* NIFTY FMCG Index\n\nThe Nifty FMCG Index comprises of maximum of 15 companies who manufacture such FMGC(Fast Moving Consumer Goods) products\n\n* NIFTY IT Index\n\nCompanies in this index are those that have more than 50% of their turnover from IT related activities like IT Infrastructure , IT Education and Software Training , Telecommunication Services and Networking Infrastructure, Software Development, Hardware Manufacturer\u2019s, Vending, Support and Maintenance.\n\n* NIFTY Metal Index\n\nThe Nifty Metal Index is designed to reflect the behavior and performance of the Metals sector including mining. The Nifty Metal Index comprises of maximum of 15 stocks that are listed on the National Stock Exchange.\n\n* NIFTY Pharma Index\n\n\nNifty Pharma Index to capture the performance of the Pharmaceuticals companies in this sector.","fd6f878b":"## 1.1 About the Stock Data\n\nNow that our data has been converted into the desired format, let\u2019s take a look at its various columns for further analysis.\n\n* **The Open and Close columns** indicate the opening and closing price of the stocks on a particular day.\n* **The High and Low columns** provide the highest and the lowest price for the stock on a particular day, respectively.\n* **The Volume column** tells us the total volume of stocks traded on a particular day.\n* **The Turnover column** [refers](https:\/\/bizfluent.com\/info-12155995-turnover-trading.html) to the total value of stocks traded during a specific period of time. The time period may be annually, quarterly, monthly or daily\n* **P\/E** also called as the price-earnings ratio relates a company's share price to its earnings per share.\n* **P\/B** also called as Price-To-Book ratio measures the market's valuation of a company relative to its book value.\n* **Div Yield** or the dividend yield is the amount of money a company pays shareholders (over the course of a year) for owning a share of its stock divided by its current stock price\u2014displayed as a percentage.  \n\n*Source: [Investopedia.com](https:\/\/www.investopedia.com\/)*","9afdb811":"## 4.2 Lockdown Phase 2 (15 April \u2013 3 May)","ba787e6e":"\nThe objective of this notebook is to explore the given NIFTY-50 data and along with the sectoral indices and visualise them to obtain important information.However, if you want to understand the nuances of Time Series data and how to get started with it, there is another notebook which caters to that.\n\n### [Getting started with Time Series using Pandas](https:\/\/www.kaggle.com\/parulpandey\/getting-started-with-time-series-using-pandas)\n<hr>","fd9bd6a7":"Whether PE is better or PB depends on the industry in question. Sometimes you need to take both into account to get an accurate picture of a company\u2019s health and its financial prospects.YOu can read more about it here:[PE versus PB ratio: Which one to use to assess a company\u2019s health](https:\/\/www.livemint.com\/money\/personal-finance\/pe-versus-pb-ratio-which-one-to-use-to-assess-a-company-s-health-1568132592441.html)","bc63471a":"## 1.3 Visualising the NIFTY 50 data","5c04459d":"# 3. Performance of other Nifty Sectoral Indices in 2020\n\nLet us now see the performance of NIFTY's sectoral indices which have been provided in the data. It'll be interesting to see how they have fared in these times of turmoil.","88494da8":"## 1.4 P\/E vs P\/B Ratio : Which one to use?\n\n[P\/E ratio is a popular measure](https:\/\/towardsdatascience.com\/visualizing-the-stock-market-with-tableau-c0a7288e7b4d) of how expensive a company\u2019s stock is. It is simply the company\u2019s market capitalization divided by its net income \u2014 in other words, how much does it cost us to buy $1 of a particular company\u2019s earnings. The higher the P\/E ratio, all other things equal, the more expensive a stock is perceived to be.the P\/E ratio shows what the market is willing to pay today for a stock based on its past or future earnings. A high P\/E could mean that a stock's price is high relative to earnings and possibly overvalued. Conversely, a low P\/E might indicate that the current stock price is low relative to earnings. \n\n![](https:\/\/imgur.com\/mNCjWPD.png)\n\nThe **P\/B ratio** on the other hand measures the market's valuation of a company relative to its book value.P\/B ratio is used by value investors to identify potential investments and P\/B ratios under 1 are typically considered solid investments.\n\n![](https:\/\/imgur.com\/uFGqIRV.png)","aac32e56":"\n\n# 1. A first look at NIFTY 50 data","108b80c7":"# 6 Deep dive into better performing indices in 2020 \n\n## 6.1 Nifty-Pharma Index","f558fec2":"Year 2020 saw a massive fall in the NIFTY 50 index which is prominent in the graph above. The effect can be seen majorly when the first phase of the lockdown started.","dc01ac8e":"# 4 COVID-19 pandemic Lockdown Effect\n\nOn 24 March 2020, the Government of India under Prime Minister Narendra Modi ordered a nationwide lockdown for 21 days, limiting movement of the entire 1.3 billion population of India as a preventive measure against the COVID-19 pandemic in India[[Source]](https:\/\/en.wikipedia.org\/wiki\/COVID-19_pandemic_lockdown_in_India)","5310b429":"## 2.2 NIFTY_50 : Major single day gains -2019 onwards","fe27105b":"# 2. Looking at market performance 2019 onwards","796ab5b5":"Due to reduction in the number of the Coronavirus cases in India, a positive sentiment was generated which translated to gain in the NIFTY index.","3b5606ab":"The pharma sector seems to be recovering after the intital dip around the first lockdown period","1a62aea5":"# References\nhttps:\/\/www.investopedia.com\/articles\/stocks\/09\/indian-stock-market.asp\n\nhttps:\/\/stableinvestor.com\/2019\/09\/explained-nifty-indices-nifty50.html\n\nhttps:\/\/en.wikipedia.org\/wiki\/NIFTY_50#NIFTY_Next_50","ac51e8c4":"# What is NIFTY 50\n\n![](https:\/\/imgur.com\/fEgI9b6.png)\n\n\nThe NIFTY 50 index is [National Stock Exchange of India's](https:\/\/en.wikipedia.org\/wiki\/National_Stock_Exchange_of_India) benchmark broad based stock market index for the Indian equity market. NIFTY 50 stands for National Index Fifty, and represents the weighted average of 50 Indian company stocks in 17 sectors. It is one of the two main stock indices used in India, the other being the [BSE Sensex](https:\/\/en.wikipedia.org\/wiki\/BSE_SENSEX).\n[Source:Wikipedia](https:\/\/en.wikipedia.org\/wiki\/NIFTY_50)\n\n\n# Dataset\n![](https:\/\/i2.wp.com\/stableinvestor.com\/wp-content\/uploads\/2019\/09\/Nifty-Indexes-Broad-Markets.png?w=630&ssl=1)\n*source:https:\/\/stableinvestor.com\/2019\/09\/explained-nifty-indices-nifty50.html*\n\nThe dataset consists of 13 files.Let's quickly understand what those are:\n\n### INDIAVIX \n\nIndia VIX is a volatility index based on the NIFTY Index Option prices.Volatility Index is a measure of market\u2019s expectation of volatility over the near term. Volatility is often described as the \u201crate and magnitude of changes in prices\" and in finance often referred to as risk. Volatility Index is a measure, of the amount by which an underlying Index is expected to fluctuate, in the near term,[Source](https:\/\/www1.nseindia.com\/products\/content\/equities\/indices\/india_vix.htm)\n\n### NIFTY 50, NIFTY 100 and NIFTY 500 \n  * NIFTY 500 - It represents the top 500 companies based on full market capitalisation from the eligible universe\n  * NIFTY 100 - This represents the top 100 companies (i.e. from 1 to 100) from within the NIFTY 500. This index basically tries to track the performance of companies having large market caps.\n  * NIFTY 50 - This represents the first 50 companies from the NIFTY 100.\n\n### NIFTY SMALL CAP & MID CAP\n* NIFTY SMALLCAP - This index measures the performance of small-cap companies.\n* NIFTY MIDCAP - This index tries to measure the performance of mid-cap companies.\n\n### NIFTY NEXT 50\nThis includes the remaining 50 companies from NIFTY 100 after excluding the NIFTY 50 companies. These are also called as NIFTY Junior.\n\n### NIFTY SECTORAL INDICES\nThis includes NIFTY AUTO,NIFTY BANK, NIFTY FMCG, NIFTY IT,NIFTY METAL, NIFTY PHARMA\nThese Indices are designed to reflect the behavior and performance of the segment that they reflect i.e automobiles, bank, pharma etc.\n\n","06dd5efa":"In 2020, all the sectoral indices were affected but as can be seen above, FMCG abd Pharma sector have started to rebound.","1e25e6de":"## 4.1 Lockdown Phase 1 (25 March \u2013 14 April)\n\nThe first phase of Lockdown in India started ","0d08dd54":"The red vertical line shows the day of the first phase of Lockdown in India.","5aa4119b":"## 3.1 Comparing Closing prices of different sectoral indices"}}