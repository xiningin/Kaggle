{"cell_type":{"8cca4330":"code","d0663c55":"code","b05a3d19":"code","2ca78bb9":"code","798ae690":"code","ead19ddc":"code","1dcac77e":"code","3399d5fa":"code","691b5110":"code","295aa563":"code","a8d9729b":"code","c4858204":"code","c9ae052b":"code","48e8bb89":"code","0f49013c":"code","869c2772":"code","915053dd":"code","fc66e835":"code","b1184038":"code","65721ad3":"code","c37f34c5":"code","59117e0c":"code","4c389234":"markdown","96b50ff0":"markdown","eb396439":"markdown","42c2d9f4":"markdown","f44f91a9":"markdown","2941b82b":"markdown","df01ca97":"markdown","22ed0cbe":"markdown","7c99e15a":"markdown","69e33063":"markdown","840fb696":"markdown","ff2753fd":"markdown","1b13dda3":"markdown","803effbc":"markdown","ca2b4220":"markdown","21099c44":"markdown","26aeb59d":"markdown","721c517e":"markdown","f3c16569":"markdown","69587d11":"markdown"},"source":{"8cca4330":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nsns.set_style('darkgrid')","d0663c55":"df = pd.read_csv('..\/input\/marvel-comic-books\/Marvel_Comics.csv')\ndf","b05a3d19":"# create a date and year column\ndf[['date', 'year']] = df['publish_date'].str.split(', ', expand=True)\nnew_df = df.drop(['active_years', 'publish_date'], axis=1)\n\n\n# clean the dates\nmask = (new_df['year'] == '-0001') | (new_df['year'] == '2029')\nnew_df['year'][mask] = df['issue_title'][mask]\nnew_df[['delete', 'year2']] = new_df['year'][mask].str.split('(', expand=True)\nnew_df = new_df.drop(['delete'], axis=1)\nnew_df[['year3', 'delete']] = new_df['year2'][mask].str.split(')', expand=True)\nnew_df['year'][mask] = new_df['year3'][mask]\nnew_df = new_df.drop(['delete', 'year2', 'year3'], axis=1)\n\nmask = (new_df['year'] == 'Hardcover') | (new_df['year'] == None) | (new_df['year'] == 'Digest') | (new_df['year'] == 'Trade Paperback')\nnew_df['year'][mask] = np.nan","2ca78bb9":"new_df['Price'][new_df['Price'] == ' Free'] = ' $Free'\nnew_df['Price'][new_df['Price'] == 'None'] = np.nan\n\nnew_df[['sign', 'price($)']] = new_df['Price'].str.split('$', expand=True)\nnew_df = new_df.drop(['Price', 'sign'], axis=1)\nnew_df","798ae690":"# new_df.to_csv(r'C:\\Users\\HP\\PycharmProjects\\pythonProject\\venv\\Scripts\\AAnalysis' + '\\\\Clean Marvel.csv', index=False)","ead19ddc":"rating = new_df['Rating'].value_counts()\nrating = rating[1:]\nrating = rating.sort_values(ascending=True)","1dcac77e":"rating.plot(figsize=(10,10), kind='barh', xlabel='Rating', title='Most Popular Ratings');","3399d5fa":"mask = new_df['year'].notnull()\nrate = new_df[mask].copy()\nrate['year'] = pd.to_numeric(rate['year'], errors='coerce')","691b5110":"rate = rate.groupby(['year']).count()\nrate = rate.reset_index()","295aa563":"plt.figure(figsize=(15,10))\nplt.bar(x='year', height='issue_title', data=rate)\nplt.title('Rate of Comics Published Per Year')\nplt.ylabel('Total')\nplt.xlabel('Year');","a8d9729b":"mask = (new_df['year'].notnull()) & (new_df['price($)'] != 'Free')\nprice = new_df[mask].copy()\n\nprice['price($)'] = pd.to_numeric(price['price($)'], errors='coerce')\nprice['year'] = pd.to_numeric(price['year'], errors='coerce')\n\nav_price = price.groupby(['year']).mean()\nav_price = av_price.reset_index()","c4858204":"plt.figure(figsize=(15,10))\nplt.bar(x='year', height='price($)', data=av_price, color='crimson')\nplt.title('Average Prices(per year)')\nplt.ylabel('Price')\nplt.xlabel('Year');","c9ae052b":"maximum = price['price($)'] == price['price($)'].max()\nprice[maximum]","48e8bb89":"artist = new_df['cover_artist'].value_counts()\nartist = artist.to_frame().reset_index()\nartist = artist.rename({'index': 'cover artist', 'cover_artist': 'total'}, axis=1)","0f49013c":"plt.figure(figsize=(15,10))\nsns.barplot(x='total', y='cover artist', data=artist[1:30], palette='bright')\nplt.title('Top 30 Cover Artists Who Drew The Most Covers')\nplt.ylabel('Cover Artist')\nplt.xlabel('Total Comics');","869c2772":"# function that parses column values\ndef parse_column(column):\n    column = column.str.split(',')\n\n    series = list()\n    for index, value in column.items():\n        series.append(value)\n\n    words = list()\n    counts = dict()\n    for obj in series:\n        for word in obj:\n            word = str(word).lstrip()\n            words.append(word)\n\n    for word in words:\n        if word not in counts:\n            counts[word] = 1\n        else:\n            counts[word] += 1\n    counts_items = counts.items()\n    data_list = list(counts_items)\n    new_df = pd.DataFrame(data_list)\n    new_df = new_df.rename({0: column.name, 1: 'total'}, axis=1)\n    new_df = new_df.sort_values(by=['total'], ascending=False)\n    new_df = new_df.reset_index(drop=True)\n    return new_df","915053dd":"mask = new_df['penciler'].notnull()\npenciler_df = new_df['penciler'][mask]\npenciler = parse_column(penciler_df)","fc66e835":"plt.figure(figsize=(15,10))\nsns.barplot(x='total', y='penciler', data=penciler[1:30])\nplt.title('Top 30 Pencilers Who Drew The Most Comics')\nplt.ylabel('Penciler')\nplt.xlabel('Total Comics');","b1184038":"mask = new_df['writer'].notnull()\nwriter_df = new_df['writer'][mask]\nwriter = parse_column(writer_df)","65721ad3":"plt.figure(figsize=(15,10))\nsns.barplot(x='total', y='writer', data=writer[1:30], color='violet')\nplt.title('Top 30 Writers Who Wrote The Most Comics')\nplt.ylabel('Writer')\nplt.xlabel('Total Comics');","c37f34c5":"# function that parses column values\ndef parse_column(column):\n    column = column.str.split(' ')\n\n    series = list()\n    for index, value in column.items():\n        series.append(value)\n\n    words = list()\n    counts = dict()\n    for obj in series:\n        for word in obj:\n            word = str(word).lstrip()\n            words.append(word)\n\n    for word in words:\n        if word not in counts:\n            counts[word] = 1\n        else:\n            counts[word] += 1\n    counts_items = counts.items()\n    data_list = list(counts_items)\n    new_df = pd.DataFrame(data_list)\n    new_df = new_df.rename({0: column.name, 1: 'total'}, axis=1)\n    new_df = new_df.sort_values(by=['total'], ascending=False)\n    new_df = new_df.reset_index(drop=True)\n    return new_df","59117e0c":"mask = new_df['comic_name'].notnull()\nname_df = new_df['comic_name'][mask]\nname = parse_column(name_df)\nname[1:41]","4c389234":"Import Libraries and Code that will be used throughout the notebook:","96b50ff0":"It appears that Jack Kirby is the penciler who drew the most covers.","eb396439":"Let us clean the dates we were given.","42c2d9f4":"It is interesting to see that Howard the Duck is the most expensive comic. Personally, I was expecting an avengers comic to be the most expensive.","f44f91a9":"It appears there is a disproportionately high number of comics rated T and T+. This tells us that the majority of marvel comic readers are teenagers.","2941b82b":"It appears that the rate of comic books published per year, has been increasing over the years. The rate of comics published is especially high between 2000 and 2020.","df01ca97":"# Who drew the most covers?","22ed0cbe":"# Who is the audience for marvel comic books?","7c99e15a":"# Which penciler drew the most comics?","69e33063":"# Who wrote the most comics?","840fb696":"It seems that comics were very cheap before 1990. We can see from the bar chart that there were years when comics were bought for less than one dollar. Average prices have sky rocketed since 2000 and it appears that they may still be in the rise.","ff2753fd":"# Data Cleaning:","1b13dda3":"# What is Marvel Comics' rate of publishing?","803effbc":"##### Let us now look at the most expensive comic to date:","ca2b4220":"# What are the common key words used in comic names?","21099c44":"Clean the price column:","26aeb59d":"It appears that Gil Kane drew the most covers by a large margin compared to others.","721c517e":"The most common key word used in comic names is \"Marvel\". It is interesting to see that \"Spider-Man\", \"X-Men\" and \"Avengers\" are among the highest words used in comic titles. This may indicate their overwhelming popularity.","f3c16569":"It seems Stan Lee has written the most comics - nearly a thousand.","69587d11":"# How have the average prices of comics changed over the years?"}}