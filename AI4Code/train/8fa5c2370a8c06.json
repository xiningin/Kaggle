{"cell_type":{"b2e40e33":"code","5fabdb90":"code","51496e42":"code","4604046d":"code","a53c704d":"code","dbf30aa0":"code","86727fad":"code","9afb3a91":"code","200b104f":"code","d5ee89da":"code","6c870e1e":"code","f67fc081":"code","3a6f7cac":"markdown","4cd12826":"markdown","85d220a8":"markdown","993c2067":"markdown","93065e64":"markdown","95ea3e89":"markdown","babcd0ed":"markdown","2eb4bf27":"markdown","6289a6b6":"markdown","b994bc8d":"markdown","5a896d84":"markdown"},"source":{"b2e40e33":"import cv2\nimport numpy as np\n#!pip install pytesseract\nimport pytesseract\n!pip install imutils\nimport imutils\nimport matplotlib.pyplot as plt","5fabdb90":"img=cv2.imread(\"..\/input\/img-car\/Arac.jpg\") #g\u00f6rseli okutma\n\nplt.figure(figsize=(18,15))\nplt.imshow(img)\nplt.show()","51496e42":"gray=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY) #gri tonlara \u00e7evirme\n\nplt.figure(figsize=(18,15))\nplt.imshow(gray)\nplt.show()","4604046d":"filtered=cv2.bilateralFilter(gray,5,250,250) #g\u00f6rselin kenar-k\u00f6\u015felerini yumu\u015fatma\n\nplt.figure(figsize=(18,15))\nplt.imshow(filtered)\nplt.show()","a53c704d":"edged=cv2.Canny(filtered,30,200) #filtrelenmi\u015f g\u00f6r\u00fcnt\u00fcdeki kenarlar\u0131 saptama\n\nplt.figure(figsize=(18,15))\nplt.imshow(edged)\nplt.show()","dbf30aa0":"contours=cv2.findContours(edged,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE) #s\u0131n\u0131r \u00e7izgi tespiti\ncnts=imutils.grab_contours(contours)\ncnts=sorted(cnts,key=cv2.contourArea,reverse=True)[:10] #sorted->s\u0131ralama fonk. contours ile tuttu\u011fum koordinatlar\u0131 alanlar\u0131na g\u00f6re ters \u00e7evirip s\u0131ral\u0131yorum ","86727fad":"screen=None #ger\u00e7ekten kapal\u0131 bir \u015fekil bulabildim mi kontrol eder\n\nfor c in cnts:\n    epsilon=0.018*cv2.arcLength(c,True) #epsilon->do\u011fruluk katsay\u0131s\u0131 #0.018->deneysel bir de\u011fer arcLength->konturlerin yay uzunlu\u011funu bulur, True->e\u011fer tespit edilen kenarlar aras\u0131nda bo\u015fluk yoksa devam et\n    approx=cv2.approxPolyDP(c,epsilon,True)\n    \n    #e\u011fer approxta 4 de\u011fer varsa(yani dikd\u00f6rtgense) screene e\u015fitle    \n    if len(approx)==4:\n        screen=approx \n        break","9afb3a91":"mask = np.zeros(gray.shape,np.uint8) #t\u00fcm resimin \u00fczerine siyah maske geldi\n\nplt.figure(figsize=(18,15))\nplt.imshow(mask)\nplt.show()","200b104f":"new_img=cv2.drawContours(mask,[screen],0,(255,255,255),-1) #sadece plakan\u0131n oldu\u011fu b\u00f6lgeyi beyaz yapal\u0131m\n\nplt.figure(figsize=(18,15))\nplt.imshow(new_img)\nplt.show()","d5ee89da":"new_img=cv2.bitwise_and(img,img,mask=mask) #ba\u015ftaki resimle beyaz olan alan\u0131 kesi\u015ftirir ve siyah plaka, beyaz alan\u0131n \u00fczerine \u00e7\u0131kar\n\nplt.figure(figsize=(18,15))\nplt.imshow(new_img)\nplt.show()","6c870e1e":"(x,y)=np.where(mask==255) #beyaz b\u00f6lgeleri (x,y) i\u00e7erisinde tut\n(topx,topy)=(np.min(x),np.min(y))\n(bottomx,bottomy)=(np.max(x),np.max(y))\ncropped=gray[topx:bottomx+1,topy:bottomy+1]\n\nplt.imshow(cropped)\nplt.show()","f67fc081":"text=pytesseract.image_to_string(cropped,lang='eng')\nprint('detected text:',text)","3a6f7cac":"**Son olarak g\u00f6rseli sadece plakay\u0131 kapsayacak \u015fekilde kesmeliyiz. Beyaz b\u00f6lgeleri tutmak ama\u00e7l\u0131 (x,y) adl\u0131 bir b\u00f6lge tan\u0131mlan\u0131r. \u015eeklimiz d\u00f6rtgen oldu\u011fundan x ve y eksenlerinde iki\u015fer nokta tutulmaktad\u0131r. ->topx,bottomx;topy,bottomy**","4cd12826":"# # Libraries","85d220a8":"# **OPENCV \u0130LE ARA\u00c7 PLAKASI OKUMA**","993c2067":"**G\u00f6rseli okutup gri tonlar\u0131na getirdikten sonra k\u00f6\u015feleri yumu\u015fatmak i\u00e7in filtre uygular\u0131z. Plaka haricinde kalan b\u00f6lge g\u00fcr\u00fclt\u00fc gibi g\u00f6r\u00fcnmeli ve plaka hala net se\u00e7ilebiliyor olmal\u0131.**\n","93065e64":"**cv2.drawContours yard\u0131m\u0131yla screen'e kaydetti\u011fimiz, plakay\u0131 olu\u015fturan contourlar\u0131n oldu\u011fu b\u00f6lge beyaz i\u015faretlenir.**","95ea3e89":"**mask ile g\u00f6rsel boyutunda siyah bir maske o\u015fu\u015fturulur.**","babcd0ed":"**Ard\u0131ndan contour tespiti yap\u0131l\u0131r. Kontur, \u015feklin s\u0131n\u0131rlar\u0131 boyunca izleyen \u00e7izgilerdir. Contours ile tutulan koordinatlar\u0131 alanlar\u0131na g\u00f6re ters \u00e7evirip s\u0131ralama i\u015flemi yap\u0131l\u0131r.**","2eb4bf27":"**screen adl\u0131 bir de\u011fi\u015fken a\u00e7\u0131l\u0131r. Bu de\u011fi\u015fkenin g\u00f6revi cnts ile s\u0131ralad\u0131\u011f\u0131m\u0131z konturleri tutmakt\u0131r. cv2.arcLength() fonksiyonu ile konturlerin yay uzunlu\u011fu bulunur ve yak\u015fal\u0131m yap\u0131l\u0131r. 4 yakla\u015f\u0131m de\u011feri tespit edildiyse (kapal\u0131 bir d\u00f6rtgen olu\u015fuyorsa) yakla\u015f\u0131m(approx), screen'e e\u015fitlenir.**","6289a6b6":"**Plaka bu \u015fekilde tespit edilmi\u015f olur. E\u011fer plakay\u0131 okumak istersek a\u015fa\u011f\u0131daki kodu yazmam\u0131z yeterli olacakt\u0131r.**","b994bc8d":"# # **Code**","5a896d84":"**cv2.bitwise_and fonksiyonu, siyah(0) ve beyaz\u0131(1) \u00fcst \u00fcste bindirir. 0ve1=0 oldu\u011fundan siyah alan(plaka yaz\u0131s\u0131) \u00fcste \u00e7\u0131kar.**"}}