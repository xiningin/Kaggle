{"cell_type":{"ceb4f073":"code","4a1382ba":"code","167aab0d":"code","ef7ba765":"code","3c31ebff":"code","ca3b348c":"code","df643d05":"code","7135e323":"code","f4cda1f1":"markdown","13eb677b":"markdown","9b970729":"markdown","47a7f730":"markdown","b808fe35":"markdown"},"source":{"ceb4f073":"# storing and anaysis\nimport numpy as np\nimport pandas as pd\n\n# visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns","4a1382ba":"conf_df = pd.read_csv('..\/input\/corona-virus-report\/time_series_2019-ncov-Confirmed.csv')\ndeaths_df = pd.read_csv('..\/input\/corona-virus-report\/time_series_2019-ncov-Deaths.csv')\nrecv_df = pd.read_csv('..\/input\/corona-virus-report\/time_series_2019-ncov-Recovered.csv')","167aab0d":"conf_df['Type'] = 'Confirmed'\ndeaths_df['Type'] = 'Deaths'\nrecv_df['Type'] = 'Recoverd'\ndf = pd.concat([conf_df, deaths_df, recv_df])\ndf = pd.melt(df, id_vars = ['Type', 'Province\/State', 'Country\/Region', 'Lat', 'Long'], var_name = 'Date')\ndf.value = pd.to_numeric(df.value, errors = 'coerce')\ndf.Date = pd.to_datetime(df.Date)\ndf = df.rename(columns = { 'Province\/State' : 'State', 'Country\/Region' : 'Country' })\ndf","ef7ba765":"#  Convert Mainland China to just China\ndf.loc[df.Country == 'Mainland China', 'Country'] = 'China'\ndf[df.Country == 'China']","3c31ebff":"df[(df.Country == 'China') & (df.State == 'Hubei') & (df.Type == 'Confirmed')].value","ca3b348c":"from pandas.plotting import register_matplotlib_converters\nregister_matplotlib_converters()\n\nD = df[(df.Country == 'China') & (df.State == 'Hubei')].sort_values(by = ['Date'])\n\nfig, ax = plt.subplots(figsize = (20, 10))\nsns.set_style(\"ticks\")\nsns.lineplot(x = 'Date', y = 'value', hue = 'Type', data = D, ax = ax)\n\nplt.axvline(x = '2020-02-12', color = 'gray')\nplt.axvline(x = '2020-02-13', color = 'gray')\nplt.annotate('Jump in cases due to changes in accounting method', ('2020-02-11', 50000),\n             ha = 'right', size = 'x-large', color = 'red')\nplt.title('Corona Virus Situation in Hubei, China', size = 'xx-large')","df643d05":"# Geo plot utility\n\nfrom mpl_toolkits.basemap import Basemap\nfrom itertools import chain\n\ndef draw_map(m, scale=0.2):\n    # draw a shaded-relief image\n    m.shadedrelief(scale=scale)\n    \n    # lats and longs are returned as a dictionary\n    lats = m.drawparallels(np.linspace(-90, 90, 13))\n    lons = m.drawmeridians(np.linspace(-180, 180, 13))\n\n    # keys contain the plt.Line2D instances\n    lat_lines = chain(*(tup[1][0] for tup in lats.items()))\n    lon_lines = chain(*(tup[1][0] for tup in lons.items()))\n    all_lines = chain(lat_lines, lon_lines)\n    \n    # cycle through these lines and set the desired style\n    for line in all_lines:\n        line.set(linestyle='-', alpha=0.3, color='w')","7135e323":"today = df[(df.Date == '2020-02-18') & (df.Type == 'Confirmed')]\n\nfig = plt.figure(figsize=(20, 10), edgecolor='w')\nm = Basemap(projection='cyl', resolution=None,\n            llcrnrlat=-90, urcrnrlat=90,\n            llcrnrlon=-180, urcrnrlon=180, )\n\nm.scatter(today.Long, today.Lat, latlon=True,\n          c=np.log10(today.value), #s=area,\n          cmap='Reds', #alpha=0.8\n         )\n\nplt.colorbar(label=r'$\\log_{10}({\\rm Confirmed})$')\nplt.clim(1, 6)\nplt.title('Corona Virus Confirmed Cases as of Feb 18, 2020')\n\ndraw_map(m)","f4cda1f1":"This notebook contains some simple analysis and charts regarding the Corona Virus outbreak in 2019-2020.","13eb677b":"# Situation in Hubei Province, China.","9b970729":"# Read Data","47a7f730":"# Plotting\n\nLet's plot some graphs.  The first one shows number of Confirmed, Deaths, and Recovered cases in Hubei, China.","b808fe35":"# Data Wrangling"}}