{"cell_type":{"1f90372e":"code","c89b6d50":"code","53cfdbf6":"code","6b7f935d":"code","b31528bb":"code","821ca15d":"code","57f13db8":"code","c8eef49c":"code","05f3c9cf":"code","bae4853b":"code","67fc7209":"code","97aef26c":"code","105cbd67":"markdown","d3b28fe0":"markdown","4cf71348":"markdown","82cd2616":"markdown","b3322eb6":"markdown","904403b7":"markdown","25f5f8a8":"markdown","b2aef025":"markdown","394424d3":"markdown","7e6b9575":"markdown","1222640f":"markdown","6a36d03a":"markdown","207017a0":"markdown","496f90c7":"markdown","4c52da53":"markdown","e2e12128":"markdown","48c30089":"markdown","4aeb5840":"markdown","37aee288":"markdown","337a9812":"markdown","d4133e5f":"markdown","37198a4d":"markdown","84cbf266":"markdown"},"source":{"1f90372e":"import numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\nimport plotly.io as pio\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\nfrom plotly.validators.scatter.marker import SymbolValidator\n\nimport plotly.offline as pyo\npyo.init_notebook_mode()","c89b6d50":"df2015 = pd.read_csv(\"..\/input\/world-happiness\/2015.csv\")\ndf2015.drop(\"Standard Error\", axis=1,inplace=True)\ndf2015[\"year\"] = 2015\ndf2015.columns = [\"Country\",\"Region\",\"Happines Rank\",\"Happiness Score\",\"Economy\",\"Social support (Family)\",\"Health\",\"Freedom\",\"Trust\",\"Generosity\",\"Dystopia Residual\",\"year\"]\n\ndf2016 = pd.read_csv(\"..\/input\/world-happiness\/2016.csv\")\ndf2016.drop([\"Lower Confidence Interval\", \"Upper Confidence Interval\"],axis=1,inplace=True)\ndf2016[\"year\"] = 2016\ndf2016.columns=[\"Country\", \"Region\", \"Happines Rank\", \"Happiness Score\", \"Economy\", \"Social support (Family)\", \"Health\", \"Freedom\", \"Trust\", \"Generosity\", \"Dystopia Residual\", \"year\"]\n\ndf2017 = pd.read_csv(\"..\/input\/world-happiness\/2017.csv\")\ndf2017.drop([\"Whisker.high\",\"Whisker.low\"],axis=1,inplace=True)\ndf2017[\"year\"]=2017\ndf2017.columns=[\"Country\", \"Happines Rank\", \"Happiness Score\", \"Economy\", \"Social support (Family)\", \"Health\", \"Freedom\",\"Generosity\", \"Trust\", \"Dystopia Residual\", \"year\"]\n\ncountry_region = df2015[[\"Country\",\"Region\"]]\ncountry_region = country_region.to_numpy()\n\ndef make_region(Country):\n    for i in range(len(country_region)):\n        if Country == country_region[i][0]:\n            return country_region[i][1]\n    \n    return \"no_region\"\n\ndf2017[\"Region\"] = df2017[\"Country\"].apply(make_region)\n\ndf2017.loc[32,\"Region\"] = 'Eastern Asia'\ndf2017.loc[49,\"Region\"] = 'Latin America and Caribbean'\ndf2017.loc[70,\"Region\"] = 'Eastern Asia'\ndf2017.loc[92,\"Region\"] = 'Sub-Saharan Africa'\ndf2017.loc[110,\"Region\"] = 'Sub-Saharan Africa'\ndf2017.loc[146,\"Region\"] =  'Sub-Saharan Africa'\n\ndf2018 = pd.read_csv(\"..\/input\/world-happiness\/2018.csv\")\ndf2018[\"year\"] =2018\ndf2018.columns = [ \"Happines Rank\",\"Country\", \"Happiness Score\", \"Economy\", \"Social support (Family)\", \"Health\", \"Freedom\",\"Generosity\", \"Trust\", \"year\"]\ndf2018[\"Dystopia Residual\"] = df2018[\"Happiness Score\"] - df2018[\"Economy\"] - df2018[\"Social support (Family)\"] - df2018[\"Health\"] - df2018[\"Freedom\"] - df2018[\"Generosity\"] - df2018[\"Trust\"]\ndf2018[\"Region\"] = df2018[\"Country\"].apply(make_region)\ndf2018.loc[37,\"Region\"] = 'Latin America and Caribbean'\ndf2018.loc[48,\"Region\"] = 'Latin America and Caribbean'\ndf2018.loc[57,\"Region\"] = 'Central and Eastern Europe'\ndf2018.loc[97,\"Region\"] = 'Sub-Saharan Africa'\ndf2018.loc[118,\"Region\"] = 'Sub-Saharan Africa'\ndf2018.loc[153,\"Region\"] = 'Sub-Saharan Africa'\n\ndf2019 =pd.read_csv(\"..\/input\/world-happiness\/2019.csv\")\ndf2019[\"year\"] = 2019\ndf2019.columns =[ \"Happines Rank\",\"Country\", \"Happiness Score\", \"Economy\", \"Social support (Family)\", \"Health\", \"Freedom\",\"Generosity\", \"Trust\", \"year\"]\ndf2019[\"Dystopia Residual\"] = df2019[\"Happiness Score\"] - df2019[\"Economy\"] - df2019[\"Social support (Family)\"] - df2019[\"Health\"] - df2019[\"Freedom\"] - df2019[\"Generosity\"] - df2019[\"Trust\"]\ndf2019[\"Region\"] = df2019[\"Country\"].apply(make_region)\ndf2019.loc[38,\"Region\"] = 'Latin America and Caribbean'\ndf2019.loc[63,\"Region\"] = 'Central and Eastern Europe'\ndf2019.loc[83,\"Region\"] = 'Central and Eastern Europe'\ndf2019.loc[111,\"Region\"] = 'Sub-Saharan Africa'\ndf2019.loc[112,\"Region\"] = 'Sub-Saharan Africa'\ndf2019.loc[119,\"Region\"] = 'Sub-Saharan Africa'\ndf2019.loc[155,\"Region\"] = 'Sub-Saharan Africa'","53cfdbf6":"df.head()","6b7f935d":"df = pd.concat([df2015.melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n                df2016.melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2017.melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2018.melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2019.melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),],ignore_index=True)\n\nfig = px.bar(df[df[\"Happines Rank\"] <=10].sort_values(by=\"Happiness Score\"), y=\"Country\", x=\"value\", color='variable',animation_frame='year',\n             height=700,title=\"The happiest Country Top 10\",opacity=.5,text=\"value\")\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.update_layout(transition = {'duration': 1000})\nfig.show()","b31528bb":"df_under10 = pd.concat([df2015.tail(10).melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n                df2016.tail(10).melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2017.tail(10).melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2018.tail(10).melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),\n               df2019.tail(10).melt(id_vars=['Country','Region','year','Happiness Score','Happines Rank']),],ignore_index=True)\n\nfig = px.bar(df_under10, y=\"Country\", x=\"value\", color='variable',animation_frame='year',\n             height=700,title=\"Not the happiest Country Top 10\",opacity=.5,text=\"value\")\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.update_layout(transition = {'duration': 1000})\nfig.show()","821ca15d":"fig = make_subplots(rows=1, cols=5, specs=[[{'type':'domain'}, {'type':'domain'}, {'type':'domain'}, {'type':'domain'}, {'type':'domain'}]])\nfig.add_trace(go.Pie(labels=df[df['year']==2015][\"variable\"], values=df[df['year']==2015][\"value\"], name=\"2015\"),\n              1, 1)\nfig.add_trace(go.Pie(labels=df[df['year']==2016][\"variable\"], values=df[df['year']==2015][\"value\"], name=\"2016\"),\n              1, 2)\nfig.add_trace(go.Pie(labels=df[df['year']==2017][\"variable\"], values=df[df['year']==2015][\"value\"], name=\"2017\"),\n              1, 3)\nfig.add_trace(go.Pie(labels=df[df['year']==2018][\"variable\"], values=df[df['year']==2015][\"value\"], name=\"2018\"),\n              1, 4)\nfig.add_trace(go.Pie(labels=df[df['year']==2019][\"variable\"], values=df[df['year']==2015][\"value\"], name=\"2019\"),\n              1, 5)\n\nfig.update_traces(hole=.3, hoverinfo=\"label+percent+name\",textinfo='percent+label')\nfig.update_layout(\n    title_text=\"Change of variables 2015 - 2019\",\n    annotations=[dict(text='2015', x=0.07, y=0.5, font_size=20, showarrow=False),\n                 dict(text='2016', x=0.27, y=0.5, font_size=20, showarrow=False),\n                dict(text='2017', x=0.50, y=0.5, font_size=20, showarrow=False),\n                dict(text='2018', x=0.73, y=0.5, font_size=20, showarrow=False),\n                dict(text='2019', x=0.94, y=0.5, font_size=20, showarrow=False)])\nfig.show()","57f13db8":"df_tmp = df.groupby([\"Region\",\"year\"])[\"Happiness Score\"].mean()\ndf_tmp = pd.DataFrame(df_tmp).unstack()\ndf_tmp = df_tmp.reset_index()\ndf_tmp.columns=[\"Region\", \"2015\",\"2016\",\"2017\",\"2018\",\"2019\"]\ndf_tmp = df_tmp.melt(\"Region\")\nfig = px.bar(df_tmp.sort_values(by=\"value\"), x=\"Region\", y=\"value\",animation_frame='variable',text=\"value\",color=\"Region\",height=600)\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.update_layout(transition = {'duration': 1000})\nfig.show()","c8eef49c":"df_tmp = df.pivot_table(index=[\"Country\",\"year\"],values=\"Happiness Score\")\ndf_tmp = df_tmp.unstack()\ndf_tmp = df_tmp.reset_index()\ndf_tmp.columns = [\"Country\",\"2015\",\"2016\",\"2017\",\"2018\",\"2019\"]\ndf_tmp = df_tmp.dropna()\ndf_tmp = df_tmp.reset_index(drop=True)\nfor i in range(len(df_tmp)):\n    df_tmp.loc[i,\"min\"] = min(df_tmp.loc[i,\"2015\"],df_tmp.loc[i,\"2016\"],df_tmp.loc[i,\"2017\"],df_tmp.loc[i,\"2018\"],df_tmp.loc[i,\"2019\"])\n\nfor i in range(len(df_tmp)):\n    df_tmp.loc[i,\"max\"] = max(df_tmp.loc[i,\"2015\"],df_tmp.loc[i,\"2016\"],df_tmp.loc[i,\"2017\"],df_tmp.loc[i,\"2018\"],df_tmp.loc[i,\"2019\"])\n\nfor i in range(len(df_tmp)):\n    df_tmp.loc[i,\"difference\"] = df_tmp.loc[i,\"max\"] -df_tmp.loc[i,\"min\"]","05f3c9cf":"df_tmp.sort_values(by=\"difference\",ascending=False).head(2)","bae4853b":"df_venezuela = df[df[\"Country\"] ==\"Venezuela\"]\ndf_Benin = df[df[\"Country\"]==\"Benin\"]\n\nfig = px.bar(df_venezuela,x=\"year\",y=\"value\",color=\"variable\",text=\"value\",title=\"Venezuela's Happy value change\")\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.show()","67fc7209":"fig = px.bar(df_Benin,x=\"year\",y=\"value\",color=\"variable\",text=\"value\",title=\"Benin's Happy value change\")\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.show()","97aef26c":"df_tmp = df.groupby(\"year\")[\"Happiness Score\"].mean()\ndf_tmp = pd.DataFrame(df_tmp).unstack()\ndf_tmp = df_tmp.reset_index()\n\ndf_tmp.columns=[\"world's Happiness Score\",\"year\",\"value\"]\nfig = px.bar(df_tmp, x=\"year\", y=\"value\",text=\"value\",height=600,log_y=True,color='year',\n             title=\"The world's Happy value\",color_continuous_scale=px.colors.sequential.Viridis)\nfig.update_traces(texttemplate='%{text:.2f}',textposition='auto')\nfig.show()","105cbd67":"![](https:\/\/contenthub-static.grammarly.com\/blog\/wp-content\/uploads\/2017\/10\/thank-you-760x400.jpg)","d3b28fe0":"### Australia and New Zealand recorded the best happiest Regions, followed North America\n### Sub-saharan Africa and Southern Asia recorded low happy values","4cf71348":"## 1. import and load the datasets","82cd2616":"## Region's happy value Analysis","b3322eb6":"![](https:\/\/www.ivie.es\/wp-content\/uploads\/2019\/04\/20190415_PEIRO_measurement-of-hedonic-and-eudaimonic-orientations-to-happiness-the-spanish-orientations-to-happiness-scale.jpg)","904403b7":"### Venezuela decrease happy'svalue for 5 years. especially Dystopia Residual is decrease about 1.94. ","25f5f8a8":"### After the Data Preprocessing, The datasets remain Happiness Rank, Country, Region, Happiness Score, Economy, Social support(Family), Health, Freedom, Generosity, Trust, year, and Dystopia Residual and then combine five csv files, only one","b2aef025":"## How about not the happiest Country?","394424d3":"### Through the visualization, We can analysis the happiest country top 10 and not the happiest country top 10 each year.","7e6b9575":"## Which index will affect the happy value?","1222640f":"# The World's Happy Value Analysis","6a36d03a":"### On the contrary, Benin increase happy's value for five years. Dystopia Residual increase about 1.42","207017a0":"### Through the DataFrame, we can know that the best decrease country is Venezuela and, increase country is benin. Now Visuallization that data","496f90c7":"## 2. Data Preprocessing","4c52da53":"### Through the bar chart. In 2019 is more happier than other years. That means we happier now...?","e2e12128":"### The datasets have other columns and columns's name. So I will Data Preprocessing\n### I will ignore the Standard Error, Lower Confidence Interval, Upper Confidence Interval","48c30089":"![](https:\/\/bradaronson.com\/wp-content\/uploads\/2013\/10\/happy.jpg)","4aeb5840":"## 3. Visualization\n","37aee288":"### The Dystopia Residual is the best affect value. and then Social support, Economy, Health, Freedom\n### Interestingly, After 2016, Trust records more than Generosity","337a9812":"## Where is the happiest Country?","d4133e5f":"## The world's happy value","37198a4d":"## Where is the Best increase country, and decrease country?","84cbf266":"### Used dateset's data explain\n\nCountry - Name of the country.\n\nRegion - Region the country belongs to.\n\nHappiness Rank - Rank of the country based on the Happiness Score.\n\nHappiness Score - A metric measured in each year by asking the sampled people the question: \"How would you rate your happiness on a\n\nEconomy (GDP per Capita) - The extent to which GDP contributes to the calculation of the Happiness Score.\n\nFamily - The extent to which Family contributes to the calculation of the Happiness Score\n\nHealth (Life Expectancy) - The extent to which Life expectancy contributed to the calculation of the Happiness Score\n\nFreedom - The extent to which Freedom contributed to the calculation of the Happiness Score.\n\nTrust (Government Corruption) or Perceptions of corruption - The extent to which Perception of Corruption contributes to Happiness Score.\n\nGenerosity - The extent to which Generosity contributed to the calculation of the Happiness Score.\n\nSocial support - after 2017, the Faimily is change to Social support\n\nDystopia Residual - The extent to which Dystopia Residual contributed to the calculation of the Happiness Score.\n\nStandard Error - The standard error of the happiness score.\n\nLower Confidence Interval - Lower Confidence Interval of the Happiness Score\n\nUpper Confidence Interval - Upper Confidence Interval of the Happiness Score\n"}}