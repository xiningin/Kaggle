{"cell_type":{"e31a4721":"code","4fe2d9f2":"code","b8fab1e5":"code","fb798fb7":"code","1623d6af":"code","453a7081":"code","c5d91bd8":"code","0536ee54":"code","3f43e306":"code","83bd75c6":"code","f5989485":"code","2f9957b2":"code","46cdf212":"code","3e639a54":"code","98a319b7":"code","06f82630":"code","1f6165e3":"code","f7880243":"code","ff54123a":"code","e396918e":"code","ef78a27e":"code","ae21ee76":"code","449c5786":"code","e397dd60":"code","b273289c":"code","477521ba":"code","a92b8e75":"code","f2cdd927":"markdown","1bc2c6a4":"markdown","40c39536":"markdown","e7939bfd":"markdown","86d8da27":"markdown","cf1b8df7":"markdown","12fe0571":"markdown","6e95c748":"markdown","557051bf":"markdown","a930f944":"markdown","974647f0":"markdown","5c30c9a0":"markdown","6c1e816b":"markdown","a2ba1e7d":"markdown","7c828133":"markdown","2e295612":"markdown","fea5bcbb":"markdown","852a58d3":"markdown","25dfee22":"markdown","4a512d89":"markdown","8c1db298":"markdown","f434452e":"markdown","d0676151":"markdown","55ad1371":"markdown","f2fc4cda":"markdown"},"source":{"e31a4721":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","4fe2d9f2":"import pandas as pd\nimport numpy as np \nfrom pandas import Series,DataFrame\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\nfrom datetime import datetime\n#from __future__ import division","b8fab1e5":"FB=pd.read_csv('..\/input\/FENER_MG.csv',names=[\"Stock\",\"DateTime\",\"Open\",\"High\",\"Low\",\"Close\",\"Volume\",\"0\"])\nGS=pd.read_csv('..\/input\/GSRAY_MG.csv',names=[\"Stock\",\"DateTime\",\"Open\",\"High\",\"Low\",\"Close\",\"Volume\",\"0\"])\nBJK=pd.read_csv('..\/input\/BJKAS_MG.csv',names=[\"Stock\",\"DateTime\",\"Open\",\"High\",\"Low\",\"Close\",\"Volume\",\"0\"])","fb798fb7":"GS=GS.drop(\"0\",axis=1)\nBJK=BJK.drop(\"0\",axis=1)\nFB=FB.drop(\"0\",axis=1)","1623d6af":"FB['DateTime']=pd.to_datetime(FB['DateTime'])\nGS['DateTime']=pd.to_datetime(GS['DateTime'])\nBJK['DateTime']=pd.to_datetime(BJK['DateTime'])\n\nGS['Stock']=GS['Stock'].astype(str).str[6:]\nFB['Stock']=FB['Stock'].astype(str).str[6:]\nBJK['Stock']=BJK['Stock'].astype(str).str[6:]\n","453a7081":"FB.index=FB.DateTime\nGS.index=GS.DateTime\nBJK.index=BJK.DateTime\n\nFB=FB.drop(\"DateTime\",axis=1)\nGS=GS.drop(\"DateTime\",axis=1)\nBJK=BJK.drop(\"DateTime\",axis=1)","c5d91bd8":"BJK.head()","0536ee54":"FB.head()","3f43e306":"GS.head()","83bd75c6":"GS=GS[\"2004-02-20\":]\nBJK=BJK[\"2004-02-20\":]","f5989485":"plt.plot(GS[\"Close\"])\n","2f9957b2":"plt.plot(FB[\"Close\"])","46cdf212":"plt.plot(BJK[\"Close\"])","3e639a54":"plt.plot(BJK[\"Volume\"])\n","98a319b7":"FB['Daily Return']=FB['Close'].pct_change()\n\nFB['Daily Return'].plot(figsize=(15,4),legend=True,linestyle='--',marker='o')\nplt.ioff()\n\n","06f82630":"GS['Daily Return']=GS['Close'].pct_change()\nGS['Daily Return'].plot(figsize=(15,4),legend=True,linestyle='--',marker='o')\nplt.ioff()","1f6165e3":"FB['Daily Return'].hist(bins=50)\nplt.ioff()","f7880243":"df=FB.index.copy()\ndf=pd.DataFrame(df)\ndf.index=df.DateTime\ndf['FB']=FB['Close']\ndf['GS']=GS['Close']\ndf['BJK']=BJK['Close']","ff54123a":"df=df.drop(\"DateTime\",axis=1)","e396918e":"sport_rets=df.pct_change()\nsport_rets=pd.DataFrame(sport_rets)\nsport_rets.shape","ef78a27e":"from scipy import stats\nsns.jointplot('GS','FB',sport_rets,kind='scatter',color='seagreen').annotate(stats.pearsonr)\nplt.ioff()","ae21ee76":"from scipy import stats\nsns.jointplot('FB','BJK',sport_rets,kind='scatter',color='seagreen').annotate(stats.pearsonr)\nplt.ioff()","449c5786":"from scipy import stats\nsns.jointplot('GS','BJK',sport_rets,kind='scatter',color='seagreen').annotate(stats.pearsonr)\nplt.ioff()","e397dd60":"sns.heatmap(sport_rets.corr(),annot=True,cmap='summer',linewidths=1,linecolor='k',square=True,mask=False, vmin=-1, vmax=1,cbar_kws={\"orientation\": \"vertical\"},cbar=True)\nplt.ioff()","b273289c":"rets=sport_rets.dropna()","477521ba":"area=np.pi*5\nplt.scatter(rets.mean(),rets.std(),s=area)\nplt.xlabel('Expected Return')\nplt.ylabel('Risk')\n\nfor label, x,y in zip(rets.columns,rets.mean(),rets.std()):\n    plt.annotate(\n        label,\n        xy=(x,y),xytext=(22,-3),\n        textcoords='offset points',ha='right',va='bottom',\n        arrowprops=dict(arrowstyle='-',connectionstyle='arc,rad=-0.3'))\n\nfor label,x,y in zip(rets.columns,rets.mean(),rets.std()):\n    print(label + \" Expected Return: \" + str(round(x,5)) + \" - Standard Deviation: \" + str(round(y,3)))","a92b8e75":"print(\"If you invest in BJK, 95% of the times the worst daily loss will not exceed \" + str(np.round(rets['BJK'].quantile(0.05),3)) + \"%\")\nprint(\"If you invest in GS, 95% of the times the worst daily loss will not exceed \" + str(np.round(rets['GS'].quantile(0.05),3))+ \"%\")\nprint(\"If you invest in FB, 95% of the times the worst daily loss will not exceed \" + str(np.round(rets['FB'].quantile(0.05),3))+ \"%\")","f2cdd927":"# Correlations\n\n**Checking if the stock prices of sports clubs are correlated**\n\nBefore calculating correlations, if you are unfamiliar with Turkish Super League, there is something you should know. Galatasaray, Fenerbahce and Besiktas are the biggest three football and sport clubs in Turkey. However, Galatasaray has 21, Fenerbahce has 19 and Besiktas has just 15 championships. The derbies between Galatasaray and Fenerbahce is always more intense than other derbies. So we can count GS and FB are best two teams in the league and Besiktas comes after them. So we expect that these two teams' stock prices are more correlated.","1bc2c6a4":"* We can see that p =0.17","40c39536":"**Heatmap Daily Return**","e7939bfd":"**Daily Returns**","86d8da27":"# Thanks for reading!\n\nI hope you enjoyed while reading as much as I enjoyed while I was writing. \n\nI decided to continue this notebook. And Keep Steady!! I will search for the correlation between the results of important matches of these teams and change of their stock prices. I hope we will find something that could be benefitial for investing.\n\nWaiting for your questions, critisims and advices. \n\nBest. \nEge","cf1b8df7":"* We can see that p =0.15\n\nAs we expected, the correlation between FB and GS significantly higher than other correlations. When we look at p-values, we can't reject any correlation so we can say that all assets are correlated with each other.","12fe0571":"As I mentioned right before, there is a huge increase in volume of BJK stock traded in the season 2016-2017. When people heard some speculations from somewhere like friends, commentors or financial analysts, they tend to invest easily. It is the most basic reason why stocks got overvalued so frequently. That's why BJK's stock price value and trading volume increased rapidly, actually they are both peak points, and then they both returned to normalcy. To conclude, we can see the effect of success in football of BJK in both graphs, volume and price. ","6e95c748":"**Importing the Stock Prices**","557051bf":"Now we will look at the graphs of **close prices of GS, FB and BJK **","a930f944":"# Some Comments about Close Prices of Teams\n\nThe first thing that attract my attention is the graphs of FB and GS are resemble each other with slight differences until 2013 and volatility of BJK is higher than other assets. In my opinion, the reason of rapid decrease of prices in 2011 is chicane lawsuit that affects all sports clubs in Turkey and it caused a panic in investments in sports clubs, especially from foreigner investors. Moreover, the reason of the jump in 2016 of the stock price of BJK was they were really succesful both in Champions League and Turkish Super League, they were leader in their Champions League group and their game was near perfect in Turkish Super League. Surely there are other factors that affect stock prices of these assets like country risk and the strategies that these clubs CEO's follow. However, I find these jumps and downs more interesting.","974647f0":"For a more clear demonstration of correlations, we can look at the above table. All companies have positive correlations. In my opinion, the reason is they are in the same country and from same sector and their prices are affected from similar news and announcements ","5c30c9a0":"This is the dataset of daily OHLCV prices of every stock in XU100\n\nFeel free to use it.","6c1e816b":"We have stock price for 15 years starting from 2004 to 2019 ","a2ba1e7d":"Keep in mind that we are looking for lower risk and higher expected return. As expected, when the risk increases expected return increases as well.\n\nDon't forget to tell me which team you would invest, if you were deciding which asset to invest only looking at historical data in **comments**.","7c828133":"What a fragile sector to invest, ha!","2e295612":"Volume traded for BJK Stock","fea5bcbb":"**Risk Analysis**","852a58d3":"When we look at dates of datas we can see that FB's start date is 2 years later than other clubs. For proper analysis, we need all datas start from the same date.  ","25dfee22":"**Import Python Modules **","4a512d89":"**Compare Galatasaray & Fenerbahce first**","8c1db298":"So the stock fluctuation follows a right skewed normal distribution between +20% and -20% for FB !!!","f434452e":"# The Beginning\nWe are going to explore datas of stock prices from same sectors. I love sports so I decided to analyze stocks of Galatasaray, Fenerbahce and Besiktas which are three biggest football clubs in Turkey. Let's begin!","d0676151":"**Average Daily return**","55ad1371":"Now we are even!","f2fc4cda":"* We can see that p =0.31"}}