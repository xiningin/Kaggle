{"cell_type":{"5be0b3be":"code","105b7be0":"code","b0fc8fc4":"code","56320d55":"code","0920401d":"code","cad3e170":"code","c3d0f974":"code","68465645":"code","b6564b55":"code","884f2c85":"code","b5aafdc5":"code","c0c587c1":"code","2a174579":"code","b62199e7":"code","6c7be84d":"code","5aa82c3c":"code","a7d3c625":"code","8eddbc43":"code","3fb8db1a":"code","1a0bea12":"code","bc182274":"code","234ac8c6":"code","f257f4f6":"code","bc94f59c":"code","e88d02ec":"code","3b4ba207":"code","67f2d4b5":"code","9f1ee63f":"code","5a33c3be":"code","bab85ba2":"code","3c458239":"code","929224af":"code","082f1a55":"code","a67069cf":"code","d2407a6a":"code","f28bc966":"code","b525d5b4":"code","6aad68fe":"code","f5788dea":"code","012dc8c4":"code","39b90aaf":"code","a966e04a":"code","a533aafc":"code","71d6e6d2":"code","40ca0cd6":"code","fd77c979":"code","763027f3":"code","0e754f66":"code","42f7abb9":"code","b60a039c":"code","3a80aa26":"code","af3e4827":"code","ecff8093":"code","19b6ea64":"code","c345b655":"code","9bc2e9cb":"code","2af78e0f":"code","8c8767be":"code","4f6c3533":"code","9662ea97":"code","13d30559":"code","9a352871":"code","73c4441f":"code","210b5d0c":"code","ceaa136f":"code","72792f75":"code","b01bcbe1":"code","5ba2fa06":"code","db9f7707":"code","a47191e4":"code","c0494531":"code","d7cf56ef":"code","402790bd":"code","7ef5b609":"code","09b79ece":"code","45c40441":"code","1bfc067a":"code","e30a5dec":"code","9c38ae1b":"code","27f2a8e3":"code","9adb312f":"code","35086b70":"code","a46946d3":"code","2033f239":"code","1ab0a75e":"code","8109b525":"code","dfc9242d":"code","6bc71408":"code","08613540":"code","f9e28022":"code","6004df31":"code","72a9ca22":"code","66433988":"code","5a3af630":"code","8fd1b37f":"code","fde38247":"code","cc7ae936":"code","ca23472b":"code","2b33948a":"code","733ed8af":"code","9b4e03b1":"code","03a825f1":"code","48b97ed6":"code","e5d90603":"code","6bc2f6fd":"code","73a88a5d":"code","dcd313ee":"code","6ef0c3c8":"code","8aa29b3d":"code","9a9ff237":"code","7f9c46db":"code","fcd5e0da":"code","f00c6b28":"code","ad9a22eb":"code","49efbc39":"code","2f286781":"code","a18b4112":"code","c5d234f2":"code","1a8aa36b":"code","18d86ede":"code","6869322b":"code","9f2bc869":"code","1c0f992a":"code","cfd4c42a":"code","832c6a2c":"code","fef10c85":"code","31d6a04a":"code","2db53a7b":"code","ed47c72c":"code","e180837e":"code","eaba7c3a":"code","f6058e8a":"code","a4b715bf":"code","b7e06153":"code","d572c309":"code","39442031":"code","07ad72d2":"code","e5854fa1":"code","473149e5":"code","89769f94":"code","e97ccd2e":"code","1585a8a1":"code","cab8bbcb":"code","488769ef":"code","c36902a6":"code","2d545425":"code","c26ded90":"code","8573d7f3":"code","3144cdab":"code","d69e6c01":"code","56ad7474":"code","e1664dd4":"code","58ff7e54":"code","044bfece":"code","722181f1":"code","a72688ca":"code","547592af":"code","5cb1d9cc":"code","af53826c":"code","b0b02c81":"code","b1824d02":"code","c6cba677":"code","835bdbaf":"code","23cf612e":"code","465a66ec":"code","557ebe55":"code","a3e8d54e":"code","9580ebf8":"code","1a197634":"code","5f15a461":"code","7e2df6e3":"code","3cc10de0":"code","a79330ec":"code","57e78c5e":"code","56f0ac81":"code","9dbb2b5e":"code","fdc4ee14":"code","97188d66":"code","f8a231a6":"code","6eb59dca":"code","c322e344":"code","05013e21":"code","3a3e0e07":"code","964b61f6":"code","5510afa4":"code","e29953d3":"code","b671908e":"code","391cc14e":"code","86f031c4":"code","db8c2a60":"code","16ca0589":"code","26cdae2c":"code","9299ba9e":"code","43da8df9":"code","9528ea5f":"code","ac505db1":"code","49b75b03":"code","0d52b8e2":"code","bebae512":"code","c31fdda2":"code","afe960f4":"code","7343f08e":"code","68028bdd":"code","c6be78ac":"code","b641be7f":"code","0afec7e6":"code","bdda4ed9":"code","d704305a":"code","a6d954e7":"code","fbe37129":"code","dd69ba58":"code","2da4269e":"code","0b880e90":"code","21a5b2c3":"code","2679db5d":"code","ba806f05":"code","891fb598":"code","553aca6c":"code","f42621e7":"code","61e26caf":"code","9cdb58ed":"code","51ae3ad4":"code","8e0f7c66":"code","00c5d935":"code","8a3cad8b":"code","4966b390":"code","7698a1c5":"code","adb3fae7":"code","4b6eaa85":"code","852af83b":"code","d8665c47":"code","5c87de48":"code","f1eae8de":"code","f530f1e5":"code","202629e2":"code","0076aeb9":"code","662eb1d3":"code","3d8421d9":"code","40271624":"code","a7dde97b":"code","1affb474":"code","fe0d603c":"code","e46cb422":"code","e6595bba":"code","0ad9e258":"code","695f91d6":"code","1f7dd571":"code","8c524f4a":"code","9d0779e8":"code","c16738a3":"code","34f80fcd":"code","33de00b4":"code","588f0692":"code","24ac6b93":"code","ea3348be":"code","cf7ab067":"code","bb6dbbd1":"code","c232443b":"code","23b3fe5d":"code","501c543c":"code","0cc7f863":"code","20794013":"code","f654dd0d":"code","fca1c51f":"code","273505ad":"code","38bb0479":"code","a037b287":"code","508523d4":"code","df946df8":"code","d75484bf":"code","4e991b78":"code","7f737c7f":"code","ce346999":"code","b43b4359":"code","a34a8bba":"code","e3650847":"code","5532b198":"code","e3230744":"code","32f59881":"code","acebf799":"code","b949e5c2":"markdown","a0fe54e6":"markdown","32e2b022":"markdown","c70c76d6":"markdown","ba172c35":"markdown","ee6b789d":"markdown","d329a5bf":"markdown","8fb4c11e":"markdown","c3f12998":"markdown","55c22e1b":"markdown","d8c1e980":"markdown","c831ca89":"markdown","0c110ecf":"markdown","3bcc47d1":"markdown","ac74a8e6":"markdown","3a8a3965":"markdown","119656c1":"markdown","cef80f4a":"markdown","eba87262":"markdown","0e7eb817":"markdown","ab377beb":"markdown","e0ed4679":"markdown","ea635a93":"markdown","5d1402d8":"markdown","1c2bd6a4":"markdown","9bc2032c":"markdown","cda8b375":"markdown","8a7adf6b":"markdown","bf358b4f":"markdown","f3e314c8":"markdown","d46686b9":"markdown","767a35e3":"markdown","38990539":"markdown","45c8d750":"markdown","7ce3d163":"markdown","dbf4fdd0":"markdown","9156e47a":"markdown","2544d3be":"markdown","888ef603":"markdown","f278ef2d":"markdown","c47f1594":"markdown","44b8cb09":"markdown","cb7aff20":"markdown","fb951639":"markdown"},"source":{"5be0b3be":"import numpy as np\nimport pandas as pd","105b7be0":"pd.set_option('display.max_rows', 1000)\npd.set_option('display.max_columns', 1000)   \npd.set_option('display.width', 1000)","b0fc8fc4":"train = pd.read_excel('train.xlsx') \ntest = pd.read_excel('test.xlsx')\nresults = pd.read_excel('results.xlsx')","56320d55":"train.head()","0920401d":"test.head()","cad3e170":"data = pd.concat([train,test])","c3d0f974":"data.reset_index(inplace=True)","68465645":"data.drop('index',axis=1,inplace=True)","b6564b55":"data.head()","884f2c85":"data.tail()","b5aafdc5":"data.shape","c0c587c1":"data.columns","2a174579":"data.drop(['ID','DOJ','DOL','Designation','JobCity','CollegeCityID'],axis=1,inplace=True)","b62199e7":"data.shape","6c7be84d":"data.columns","5aa82c3c":"#treating for CBSE\ndata['10board'] = data['10board'].replace({'cbse':'CBSE',\n                                             'central board of secondary education':'CBSE',\n                                             'cbse board':'CBSE',\n                                             'central board of secondary education, new delhi':'CBSE',\n                                             'delhi public school':'CBSE',\n                                             'c b s e':'CBSE',\n                                             'central board of secondary education(cbse)':'CBSE',\n                                             'dav public school,hehal':'CBSE',\n                                             'cbse ':'CBSE',\n                                             'cbse[gulf zone]':'CBSE',\n                                             'cbsc':'CBSE'})","a7d3c625":"#treating for ICSE\ndata['10board'].replace({'icse':'ICSE',\n                          'icse board':'ICSE',\n                          'icse board , new delhi':'ICSE'},inplace=True)","8eddbc43":"#treating for State Board\nstateboards = []\n\nfor i in data['10board']:\n    if i!='CBSE' and i!='ICSE':\n        stateboards.append(i)\n\n#print(stateboards)","3fb8db1a":"#replacing all values with 'State Board'\ndata['10board'].replace(stateboards,'State_Board',inplace=True)  ","1a0bea12":"data['10board'].value_counts()","bc182274":"b = []\nfor i in data['10board']:\n    b.append(i)\ny = np.array(b)\nprint(np.unique(y))","234ac8c6":"#treating for CBSE\ndata['12board'] = data['12board'].replace({'cbse':'CBSE',\n                                             'central board of secondary education':'CBSE',\n                                             'cbse board':'CBSE',\n                                             'central board of secondary education, new delhi':'CBSE',\n                                             'delhi public school':'CBSE',\n                                             'c b s e':'CBSE',\n                                             'central board of school education':'CBSE',\n                                             'central board of secondary education(cbse)':'CBSE',\n                                             'dav public school,hehal':'CBSE',\n                                             'cbse ':'CBSE',\n                                             'cbse[gulf zone]':'CBSE',\n                                             'cbsc':'CBSE'})","f257f4f6":"#treating for ICSE\ndata['12board'].replace({'icse':'ICSE',\n                          'icse board':'ICSE',\n                          'icse board , new delhi':'ICSE'},inplace=True)","bc94f59c":"#treating for State Board\nstateboardss = []\n\nfor i in data['12board']:\n    if i!='CBSE' and i!='ICSE':\n        stateboardss.append(i)\n\n#print(stateboardss)","e88d02ec":"#replacing all values with 'State Board'\ndata['12board'].replace(stateboardss,'State_Board',inplace=True)  ","3b4ba207":"data['12board'].value_counts()","67f2d4b5":"data.head()","9f1ee63f":"data.shape","5a33c3be":"c = []\nfor i in data['12board']:\n    c.append(i)\nz = np.array(c)\nprint(np.unique(z))","bab85ba2":"len(data.loc[data['collegeGPA']>10])","3c458239":"len(data['collegeGPA'])","929224af":"for i in range(5498):\n    if data['collegeGPA'].values[i]>10:\n        data.collegeGPA.values[i] = data.collegeGPA.values[i]\/10","082f1a55":"len(data.loc[data['collegeGPA']>10])","a67069cf":"len(data.loc[data['ElectronicsAndSemicon']==-1])\/len(data['ElectronicsAndSemicon'])*100","d2407a6a":"len(data.loc[data['ComputerScience']==-1])\/len(data['ComputerScience'])*100","f28bc966":"len(data.loc[data['MechanicalEngg']==-1])\/len(data['MechanicalEngg'])*100","b525d5b4":"len(data.loc[data['ElectricalEngg']==-1])\/len(data['ElectricalEngg'])*100","6aad68fe":"len(data.loc[data['TelecomEngg']==-1])\/len(data['TelecomEngg'])*100","f5788dea":"len(data.loc[data['CivilEngg']==-1])\/len(data['CivilEngg'])*100","012dc8c4":"data.drop(['ElectronicsAndSemicon','ComputerScience','MechanicalEngg','ElectricalEngg','TelecomEngg','CivilEngg'],axis=1,inplace=True)","39b90aaf":"data.shape","a966e04a":"len(data.loc[data['ComputerProgramming']==-1])\/len(data['ComputerProgramming'])*100","a533aafc":"data['ComputerProgramming'].corr(data['Salary'])","71d6e6d2":"len(data.loc[data['Domain']==-1])\/len(data['Domain'])*100","40ca0cd6":"data['Domain'].corr(data['Salary'])","fd77c979":"data['ComputerProgramming'] = data['ComputerProgramming'].replace(-1,np.nan)","763027f3":"data['ComputerProgramming'].isnull().sum()","0e754f66":"data['ComputerProgramming'] = data['ComputerProgramming'].replace(np.nan,data['ComputerProgramming'].mean())","42f7abb9":"data['ComputerProgramming'].isnull().sum()","b60a039c":"data['ComputerProgramming'].corr(data['Salary'])","3a80aa26":"data['Domain'] = data['Domain'].replace(-1,np.nan)","af3e4827":"data['Domain'].isnull().sum()","ecff8093":"data['Domain'] = data['Domain'].replace(np.nan,data['Domain'].mean())","19b6ea64":"data['Domain'].isnull().sum()","c345b655":"data['Domain'].corr(data['Salary'])","9bc2e9cb":"data['CollegeTier'] = data['CollegeTier'].replace(2,0)","2af78e0f":"data['CollegeTier'].value_counts()","8c8767be":"data['DOB'] = pd.to_datetime(data['DOB'])","4f6c3533":"data['DOB'] = pd.DatetimeIndex(data['DOB']).year","9662ea97":"data['DOB'] = data['DOB'].astype(int)","13d30559":"data.Specialization = data.Specialization.replace({'construction technology and management':'civil engineering'})","9a352871":"data.Specialization = data.Specialization.replace({'computer application':'computer science and engineering',\n                                                     'electronics and computer engineering':'computer science and engineering',\n                                                  'computer science and technology':'computer science and engineering',\n                                                     'software engineering':'computer science and engineering',\n                                                    'computer science':'computer science and engineering',\n                                                   'computer engineering':'computer science and engineering',\n                                                     'electronics and computer engineering':'computer science and engineering'})","73c4441f":"data.Specialization = data.Specialization.replace({'computer science & engineering':'computer science and engineering'})","210b5d0c":"data.Specialization = data.Specialization.replace({'electronics engineering':'electronics and communication engineering',\n                                                       'communication engineering':'electronics and communication engineering'})","ceaa136f":"data.Specialization = data.Specialization.replace({'electronics':'electronics and communication engineering'})","72792f75":"data.Specialization = data.Specialization.replace({'electronics & instrumentation eng':'electronics and instrumentation engineering',\n                                                    'applied electronics and instrumentation':'electronics and instrumentation engineering',\n                                                    'instrumentation engineering':'electronics and instrumentation engineering'})","b01bcbe1":"data.Specialization = data.Specialization.replace({'telecommunication engineering':'electronics and telecommunication engineering',\n                                                   'electronics and telecommunication':'electronics and telecommunication engineering',\n                                                   'electronics & telecommunications':'electronics and telecommunication engineering'})","5ba2fa06":"data.Specialization = data.Specialization.replace({'information science engineering':'information technology'})","db9f7707":"data.Specialization = data.Specialization.replace({'information science':'information technology'})","a47191e4":"data.Specialization = data.Specialization.replace({'information & communication technology':'information technology'})","c0494531":"data.Specialization = data.Specialization.replace({'vlsi design and cad':'computer aided design',\n                                                     'cad \/ cam':'computer aided design'})","d7cf56ef":"data.Specialization = data.Specialization.replace({'industrial & production engineering':'industrial and production engineering',\n                                                    'industrial engineering and management':'industrial and production engineering'})","402790bd":"data.Specialization = data.Specialization.replace({'biotechnology':'biotechnology engineering'})","7ef5b609":"data.Specialization = data.Specialization.replace({'electronics and telecommunication engineering':'electronics and communication engineering'})","09b79ece":"data.Specialization = data.Specialization.replace({'electronics and instrumentation engineering':'electronics and communication engineering'})","45c40441":"data.Specialization = data.Specialization.replace({'electrical engineering':'electronics and electrical engineering'})","1bfc067a":"data['Specialization'].value_counts()","e30a5dec":"data.drop(data[data.Specialization == 'polymer technology'].index, inplace=True)","9c38ae1b":"data.drop(data[data.Specialization == 'environment science'].index, inplace=True)","27f2a8e3":"data.drop(data[data.Specialization == 'textile engineering'].index, inplace=True)","9adb312f":"data.drop(data[data.Specialization == 'power systems and automation'].index, inplace=True)","35086b70":"data.drop(data[data.Specialization == 'operational research'].index, inplace=True)","a46946d3":"data.drop(data[data.Specialization == 'aerospace engineering'].index, inplace=True)","2033f239":"data.drop(data[data.Specialization == 'embedded systems technology'].index, inplace=True)","1ab0a75e":"data.drop(data[data.Specialization == 'ceramic engineering'].index, inplace=True)","8109b525":"data.drop(data[data.Specialization == 'mechatronics'].index, inplace=True)\ndata.drop(data[data.Specialization == 'computer aided design'].index, inplace=True)\ndata.drop(data[data.Specialization == 'electrical and power engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'automobile\/automotive engineering'].index, inplace=True)","dfc9242d":"data.drop(data[data.Specialization == 'metallurgical engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'chemical engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'biomedical engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'aeronautical engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'automobile engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'mechatronics engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'biotechnology engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'industrial and production engineering'].index, inplace=True)\ndata.drop(data[data.Specialization == 'other'].index, inplace=True)","6bc71408":"data['Specialization'].value_counts()","08613540":"data.head()","f9e28022":"data.shape","6004df31":"data['CollegeCityTier'].value_counts()","72a9ca22":"data['CollegeCityTier'] = data['CollegeCityTier'].replace({0:'A',1:'B'})","66433988":"data['CollegeCityTier'].value_counts()","5a3af630":"data['Degree'].value_counts()","8fd1b37f":"data['Degree'] = data['Degree'].replace({'B.Tech\/B.E.':0,'MCA':1,'M.Sc. (Tech.)':3,'M.Tech.\/M.E.':4})","fde38247":"data['Degree'].value_counts()","cc7ae936":"data.info()","ca23472b":"dummy_data = pd.get_dummies(data,drop_first=True)","2b33948a":"dummy_data.shape","733ed8af":"dummy_data.head()","9b4e03b1":"new_train = dummy_data.loc[:3998]","03a825f1":"new_train.shape","48b97ed6":"new_train.tail()","e5d90603":"new_test = dummy_data.loc[3999:]","6bc2f6fd":"new_test.shape","73a88a5d":"new_test.tail()","dcd313ee":"x = new_train.drop(['Salary'], axis=1)\ny = new_train['Salary']","6ef0c3c8":"from sklearn.model_selection import train_test_split","8aa29b3d":"xtrain,xtest,ytrain,ytest = train_test_split(x,y, test_size = 0.3, random_state = 3)","9a9ff237":"#xtrain = dummy_data.iloc[0:3898,1:]","7f9c46db":"#xtest = dummy_data.iloc[3999:,1:]","fcd5e0da":"#ytrain = dummy_data.iloc[0:3898,0:1]","f00c6b28":"#ytest = dummy_data.iloc[3999:,0:1]","ad9a22eb":"xtrain.shape","49efbc39":"xtest.shape","2f286781":"ytrain.shape","a18b4112":"ytest.shape","c5d234f2":"from sklearn.linear_model import LinearRegression","1a8aa36b":"model = LinearRegression()","18d86ede":"model.fit(xtrain,ytrain)","6869322b":"ypred = model.predict(xtest)","9f2bc869":"from sklearn.metrics import r2_score","1c0f992a":"r_sqrd = r2_score(ytest,ypred)\nr_sqrd","cfd4c42a":"from sklearn.metrics import mean_squared_error","832c6a2c":"np.sqrt(mean_squared_error(ytest,ypred))","fef10c85":"adj_r_sqrd = 1-(1-r_sqrd)*((1179-1)\/(1179-57-1))\nadj_r_sqrd","31d6a04a":"def mean_absolute_percentage_error(y_true, y_pred): \n    y_true, y_pred = np.array(y_true), np.array(y_pred)\n    return np.mean(np.abs((y_true - y_pred) \/ y_true)) * 100","2db53a7b":"mape = mean_absolute_percentage_error(ytest,ypred)\nmape","ed47c72c":"Q1 = data.quantile(0.25)\nQ3 = data.quantile(0.75)\nIQR = Q3 - Q1\nprint(IQR)","e180837e":"data.quantile([0.01,0.05,0.1,0.25,0.5,0.75,0.9,0.95,0.99,1]).T","eaba7c3a":"import matplotlib.pyplot as plt\nimport seaborn as sns\nplt.figure(figsize=(15,3))\nsns.boxplot(x=data['10percentage'])\nplt.show()","f6058e8a":"lower_limit = 72 - 1.5 * 13.6\nlower_limit","a4b715bf":"data['10percentage']=data[\"10percentage\"].map(lambda x:51 if x <51 else x)","b7e06153":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['12percentage'])","d572c309":"lower_limit = 66.4 - 1.5 * 16.4065\nlower_limit","39442031":"np.where(data['12percentage']<41.79)","07ad72d2":"data['12percentage'].min()","e5854fa1":"data['12percentage']=data[\"12percentage\"].map(lambda x:41.79025 if x <41.79025 else x)","473149e5":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['collegeGPA'])","89769f94":"lower_limit = 6.69 - 1.5 * 0.95\nlower_limit","e97ccd2e":"np.where(data['collegeGPA']<5.265)","1585a8a1":"np.where(data['collegeGPA']<5)","cab8bbcb":"upper_limit = 7.64 + 1.5 * 0.95\nupper_limit","488769ef":"data['collegeGPA'].max()","c36902a6":"np.where(data['collegeGPA']>9.065)","2d545425":"data['collegeGPA'].min()","c26ded90":"data['collegeGPA']=data[\"collegeGPA\"].map(lambda x:5 if x <5 else x)","8573d7f3":"#data['collegeGPA']=data[\"collegeGPA\"].map(lambda x:9.99 if x >9.99 else x)","3144cdab":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['English'])","d69e6c01":"lower_limit = 425 - 1.5 * 145\nlower_limit","56ad7474":"np.where(data['English']<207.5)","e1664dd4":"upper_limit = 570 + 1.5 * 145\nupper_limit","58ff7e54":"np.where(data['English']>787.5)","044bfece":"#data['English']=data[\"English\"].map(lambda x:207.5 if x <207.5 else x)","722181f1":"#data['English']=data[\"English\"].map(lambda x:787.5 if x >787.5 else x)","a72688ca":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['Quant'])","547592af":"lower_limit = 430 - 1.5 * 165\nlower_limit","5cb1d9cc":"upper_limit = 595 + 1.5 * 165\nupper_limit","af53826c":"#data['Quant']=data[\"Quant\"].map(lambda x:182.5 if x <182.5 else x)","b0b02c81":"#data['English']=data[\"English\"].map(lambda x:842.5 if x >842.5 else x)","b1824d02":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['Logical'])","c6cba677":"lower_limit = 445 - 1.5 * 120\nlower_limit","835bdbaf":"upper_limit = 565 + 1.5 * 120\nupper_limit","23cf612e":"#data['Logical']=data[\"Logical\"].map(lambda x:265 if x <265 else x)","465a66ec":"#data['Logical']=data[\"Logical\"].map(lambda x:745 if x >745 else x)","557ebe55":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['Domain'])","a3e8d54e":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['conscientiousness'])","9580ebf8":"lower_limit = -0.726400 - 1.5 * 1.4291\nlower_limit","1a197634":"upper_limit = 0.702700 + 1.5 * 1.4291\nupper_limit","5f15a461":"#data['conscientiousness']=data[\"conscientiousness\"].map(lambda x:-2.87005 if x <-2.87005 else x)","7e2df6e3":"#data['conscientiousness']=data[\"conscientiousness\"].map(lambda x:2.84635 if x >2.84635 else x)","3cc10de0":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['agreeableness'])","a79330ec":"lower_limit = -0.287100 - 1.5 * 1.0999\nlower_limit","57e78c5e":"upper_limit = 0.812800 + 1.5 * 1.0999\nupper_limit","56f0ac81":"#data['agreeableness']=data[\"agreeableness\"].map(lambda x:-1.93695 if x <-1.93695 else x)","9dbb2b5e":"#data['agreeableness']=data[\"agreeableness\"].map(lambda x:2.46265 if x <2.46265 else x)","fdc4ee14":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['extraversion'])","97188d66":"lower_limit = -0.7264 - 1.5 * 1.2768\nlower_limit","f8a231a6":"upper_limit = 0.702700 + 1.5 * 1.2768\nupper_limit","6eb59dca":"#data['extraversion']=data[\"extraversion\"].map(lambda x:-2.6416 if x <-2.6416 else x)","c322e344":"#data['extraversion']=data[\"extraversion\"].map(lambda x:2.6179 if x >2.6179 else x)","05013e21":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['nueroticism'])","3a3e0e07":"upper_limit = 0.5262 + 1.5 * 1.3944\nupper_limit","964b61f6":"#data['nueroticism']=data[\"nueroticism\"].map(lambda x:2.6178 if x > 2.6178 else x)","5510afa4":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['openess_to_experience'])","e29953d3":"lower_limit = -0.669200 - 1.5 * 1.1716\nlower_limit","b671908e":"#data['openess_to_experience']=data[\"openess_to_experience\"].map(lambda x:-2.4266 if x < -2.4266 else x)","391cc14e":"plt.figure(figsize=(15,3))\nsns.boxplot(x=data['ComputerProgramming'])","86f031c4":"lower_limit = 405 - 1.5 * 90\nlower_limit","db8c2a60":"upper_limit = 495 + 1.5 * 90\nupper_limit","16ca0589":"#data['ComputerProgramming']=data[\"ComputerProgramming\"].map(lambda x:270 if x < 270 else x)","26cdae2c":"#data['ComputerProgramming']=data[\"ComputerProgramming\"].map(lambda x:630 if x > 630 else x)","9299ba9e":"data.columns","43da8df9":"data['GraduationYear'] = data['GraduationYear'].astype(int)\ndata['DOB'] = data['DOB'].astype(int)\ndata['GraduationAge'] = data['GraduationYear'] - data['DOB']","9528ea5f":"data['GraduationAge'].value_counts()","ac505db1":"data.info()","49b75b03":"data['12_age'] = data['12graduation'] - data['DOB']","0d52b8e2":"data['12graduation'].value_counts()","bebae512":"data.drop(['DOB'],axis=1,inplace = True)","c31fdda2":"new_data = pd.get_dummies(data,drop_first=True) \nnew_data.shape","afe960f4":"n_train = new_data.loc[:3998]","7343f08e":"n_train.tail()","68028bdd":"n_test = new_data.loc[3999:]","c6be78ac":"n_test.head()","b641be7f":"x = n_train.drop(['Salary'],axis=1)\ny = n_train['Salary']","0afec7e6":"xtrain,xtest,ytrain,ytest = train_test_split(x,y,random_state = 3,test_size=0.3)","bdda4ed9":"sns.distplot(n_train['Salary'])","d704305a":"n_train['Salary_log'] = np.log(n_train['Salary'])","a6d954e7":"sns.distplot(n_train['Salary_log'])","fbe37129":"plt.figure(figsize=(15,3))\nsns.boxplot(x=n_train['Salary'])","dd69ba58":"n_train.drop(n_train[n_train['Salary'] > 2000000].index, inplace = True)","2da4269e":"sns.distplot(n_train['Salary'])","0b880e90":"n_train['Salary_log'] = np.log(n_train['Salary'])","21a5b2c3":"sns.distplot(n_train['Salary_log'])","2679db5d":"n_train.info()","ba806f05":"x = n_train.drop(['Salary_log','Salary'],axis=1)\ny = n_train['Salary_log']","891fb598":"xtrain,xtest,ytrain,ytest = train_test_split(x,y,random_state = 3,test_size=0.3)","553aca6c":"from sklearn.linear_model import LinearRegression","f42621e7":"model1 = LinearRegression()\nmodel1.fit(xtrain,ytrain)\nmodel1_pred = model1.predict(xtest)","61e26caf":"r_sqrd = r2_score(ytest,model1_pred)\nr_sqrd","9cdb58ed":"np.sqrt(mean_squared_error(ytest,model1_pred))","51ae3ad4":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","8e0f7c66":"mape = mean_absolute_percentage_error(ytest,model1_pred)\nmape","00c5d935":"from sklearn.ensemble import RandomForestRegressor","8a3cad8b":"model2 = RandomForestRegressor()\nmodel2.fit(xtrain,ytrain)\nmodel2_pred = model2.predict(xtest)","4966b390":"r_sqrd = r2_score(ytest,model2_pred)\nr_sqrd","7698a1c5":"np.sqrt(mean_squared_error(ytest,model2_pred))","adb3fae7":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","4b6eaa85":"mean_absolute_percentage_error(ytest,model2_pred)","852af83b":"from sklearn.ensemble import GradientBoostingRegressor","d8665c47":"model3 = GradientBoostingRegressor()\nmodel3.fit(xtrain,ytrain)\nmodel3_pred = model3.predict(xtest)","5c87de48":"r_sqrd =  r2_score(ytest,model3_pred)\nr_sqrd","f1eae8de":"np.sqrt(mean_squared_error(ytest,model3_pred))","f530f1e5":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","202629e2":"mean_absolute_percentage_error(ytest,model3_pred)","0076aeb9":"model3_pred","662eb1d3":"np.exp(model3_pred)","3d8421d9":"from sklearn.neighbors import KNeighborsRegressor","40271624":"model4 = KNeighborsRegressor()\nmodel4.fit(xtrain,ytrain)\nmodel4_pred = model4.predict(xtest)","a7dde97b":"r_sqrd =  r2_score(ytest,model4_pred)\nr_sqrd","1affb474":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","fe0d603c":"np.sqrt(mean_squared_error(ytest,model4_pred))","e46cb422":"mean_absolute_percentage_error(ytest,model4_pred)","e6595bba":"from sklearn.tree import DecisionTreeRegressor","0ad9e258":"model5 = DecisionTreeRegressor()\nmodel5.fit(xtrain,ytrain)\nmodel5_pred = model5.predict(xtest)","695f91d6":"r_sqrd =  r2_score(ytest,model5_pred)\nr_sqrd","1f7dd571":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","8c524f4a":"np.sqrt(mean_squared_error(ytest,model5_pred))","9d0779e8":"mean_absolute_percentage_error(ytest,model5_pred)","c16738a3":"from sklearn.preprocessing import PolynomialFeatures\npolynomial_features= PolynomialFeatures(degree=2)\nx_poly = polynomial_features.fit_transform(x)","34f80fcd":"x_train,x_test,y_train,y_test = train_test_split(x_poly,y,test_size=0.3,random_state=3)","33de00b4":"model6 = LinearRegression()\nmodel6.fit(x_train, y_train)\nmodel6_pred = model6.predict(x_test)","588f0692":"r_sqrd =  r2_score(y_test,model6_pred)\nr_sqrd","24ac6b93":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","ea3348be":"np.sqrt(mean_squared_error(y_test,model6_pred))","cf7ab067":"mean_absolute_percentage_error(y_test,model6_pred)","bb6dbbd1":"from scipy.stats import zscore","c232443b":"z_data = n_train.copy()","23b3fe5d":"z_data.head()","501c543c":"X = z_data.drop(['Salary','Salary_log'],axis=1)","0cc7f863":"Y = z_data['Salary_log']","20794013":"X[['10percentage', '12percentage', 'collegeGPA', 'English', 'Logical', 'Quant', 'Domain', 'ComputerProgramming', 'conscientiousness', 'agreeableness', 'extraversion','nueroticism', 'openess_to_experience']] = X[['10percentage', '12percentage', 'collegeGPA', 'English', 'Logical', 'Quant', 'Domain', 'ComputerProgramming', 'conscientiousness', 'agreeableness', 'extraversion','nueroticism', 'openess_to_experience']].apply(zscore)","f654dd0d":"X.head()","fca1c51f":"Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,Y,random_state = 3, test_size = 0.3)","273505ad":"Xtrain.head()","38bb0479":"model7 = LinearRegression()\nmodel7.fit(Xtrain,Ytrain)\nmodel7_pred = model7.predict(Xtest)","a037b287":"r_sqrd =  r2_score(Ytest,model7_pred)\nr_sqrd","508523d4":"adj_r_sqrd = 1-(1-r_sqrd)*((1178-1)\/(1178-58-1))\nadj_r_sqrd","df946df8":"np.sqrt(mean_squared_error(Ytest,model7_pred))","d75484bf":"mean_absolute_percentage_error(Ytest,model7_pred)","4e991b78":"def multi_collinearity(X):\n    \n    from statsmodels.stats.outliers_influence import variance_inflation_factor\n    vif=[variance_inflation_factor(X.values, i) for i in range(X.shape[1])]\n    VIF=pd.DataFrame()\n    VIF['columns']=X.columns\n    VIF['vif']=vif\n    return(VIF)","7f737c7f":"v = multi_collinearity(n_train)","ce346999":"v[v['vif']>5]","b43b4359":"GradientBoostingRegressor\nparameters = {\n    'n_estimators': [50,100,150],\n    'max_depth': [5,8,12,16],\n    'min_samples_split' : [50,100,120],\n    'min_samples_leaf': [20,30,50],\n    'max_features' : [6,40,20,60,80,100,104]}\nmodel9=GradientBoostingRegressor()\nclf = GridSearchCV(model9,parameters,cv=10)\nclf.fit(xtrain,ytrain)","a34a8bba":"from statsmodels.stats.outliers_influence import variance_inflation_factor\nfrom statsmodels.tools.tools import add_constant","e3650847":"num_data = data._get_numeric_data()","5532b198":"num_data.head()","e3230744":"X = add_constant(num_data)","32f59881":"vif = pd.DataFrame([variance_inflation_factor(X.values, i) \n               for i in range(X.shape[1])], \n              index=X.columns)","acebf799":"vif","b949e5c2":"##### 12percentage","a0fe54e6":"##### Quant","32e2b022":"### VIF","c70c76d6":"### Feature engineering","ba172c35":"### Specialization","ee6b789d":"## Base-line-model","d329a5bf":"##### ComputerProgramming","8fb4c11e":"#### Degree","c3f12998":"##### Domain","55c22e1b":"### RandomForest","d8c1e980":"#### CollegeCityTier","c831ca89":"### 12board","0c110ecf":"##### nueroticism","3bcc47d1":"###### We can see data is not normally distributed and right skewed","ac74a8e6":"### Linear Regression","3a8a3965":"##### 10percentage","119656c1":"##### collegeGPA","cef80f4a":"Both the columns Domain & ComputerProgramming are continuous value. So we are replacing with mean","eba87262":"### outliers","0e7eb817":"### 10board","ab377beb":"ComputerProgramming has 21.46% missing values","e0ed4679":"### Removing 6 variables more than 70% missing value","ea635a93":"We are replacing this because we have to gime more weightage to tier 1 colleges","5d1402d8":"### KNN","1c2bd6a4":"##### conscientiousness","9bc2032c":"##### ComputerProgramming & Domain","cda8b375":"#### DecisionTreeRegressor","8a7adf6b":"ComputerProgramming has 6.04% missing values","bf358b4f":"### Distribution of Target Variable","f3e314c8":"#### Getting percentile distribution for all numeric variables","d46686b9":"##### openess_to_experience","767a35e3":"#### Extracting year from DOB","38990539":"#### GradientBoostingRegressor","45c8d750":"#### outlier treatment","7ce3d163":"### adjust collegeGPA","dbf4fdd0":"##### English","9156e47a":"#### IQR of all numeric features","2544d3be":"#### PolynomialFeatures","888ef603":"### CollegeTier : replace 2 with 0 : 0 represents CollegeTier 2","f278ef2d":"##### Logical","c47f1594":"##### agreeableness","44b8cb09":"## Data Cleaning & Missing Value Treatment","cb7aff20":"##### extraversion","fb951639":"##### the values of collegeID an CollegecityID are same"}}