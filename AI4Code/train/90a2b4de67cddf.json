{"cell_type":{"d1c06385":"code","b8951666":"code","5fb8d1af":"code","b1ec7195":"code","edda5810":"code","eaaed394":"code","6ada03ec":"code","104f1b28":"code","0e44ca43":"code","91f75a28":"code","c922e332":"code","c9794325":"code","89a5aecd":"code","3bb8cc53":"code","b80cf931":"code","ea94fe68":"code","b39c87fc":"code","2ddd2e6a":"code","95c16ea4":"code","6deab3bf":"code","f7d5adde":"code","f46d8c15":"code","77416eb0":"code","0a3431a4":"code","0eb0e57d":"code","bded70e0":"code","a55b65d1":"code","8808dc73":"code","f882f661":"code","255b0db7":"code","72270aea":"code","f66d0055":"code","6c899c89":"code","4fb5c510":"code","c3cf350d":"code","0e9fe443":"code","783bd212":"code","f30986d8":"code","8f757d0d":"code","272f0e6c":"code","f92c847c":"code","21fffffa":"code","05f3ddc8":"code","ee096549":"markdown","8815f8e3":"markdown","28e4aae3":"markdown","9e4d0b6d":"markdown","5549c19e":"markdown","61814a6d":"markdown","43aaffe1":"markdown","463a565a":"markdown","5bd42f31":"markdown","c5958f6a":"markdown","57db7fb3":"markdown","ec4d479e":"markdown","e760c523":"markdown","f517923f":"markdown","16e182fa":"markdown"},"source":{"d1c06385":"import numpy as np\nimport pandas as pd\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nsns.set_style('whitegrid')\nsns.set_context('notebook')\nmatplotlib.rcParams['figure.figsize'] = (12,8) ","b8951666":"df = pd.read_csv('..\/input\/montcoalert\/911.csv')\ndf.head()","5fb8d1af":"df.info()","b1ec7195":"# Get numeric columns\nnum_cols = df.select_dtypes(include=[np.number]).columns.values\nprint('Numeric cols :',num_cols)","edda5810":"# Get Non-numeric\/categorical columns\ncat_cols = df.select_dtypes(exclude=[np.number]).columns.values\nprint('Categorical cols :',cat_cols)","eaaed394":"df['zip'].value_counts()\n# There are 204 unique Zip codes","6ada03ec":"# 911 calls received from Five most and least townships.\ndf['twp'].value_counts()\n# There are 68 unique townships in our dataset.","104f1b28":"# Countplot of all the calls received from different townships\nplt.figure(figsize=(12,12))\nsns.countplot(y=df['twp'], order=df['twp'].value_counts().loc[:].index)\nplt.tight_layout()\n\n# From graph, it is observed that 9 townships made more than 20000 calls each between 2015-2020.\n# Also, more than half of the townships have not crossed 10000 calls each during this juncture","0e44ca43":"# Title of the 911 calls received.\ndf['title'].value_counts().head(20)","91f75a28":"# Title column have two parts divided by ':'\n# Splitting Title into two columns, namely 'category' and 'purpose' of call.\ndf['category'] = df['title'].apply(lambda x:x.split(':')[0])\ndf['purpose'] = df['title'].apply(lambda x:x.split(':')[1])\ndf.drop('title', axis=1, inplace=True)","c922e332":"df['category'].value_counts()\n# There are three main categories of calls in the dataset, \n# which are Emergency Medical Services(EMS), Traffic and Fire","c9794325":"sns.countplot(df['category'])","89a5aecd":"display(df['purpose'].value_counts())\n# There are 95 different Purposes\/sub-categories of 911 calls as per the data.\n\nprint('\\n ----In percentage---- \\n')\n100*(round(df['purpose'].value_counts()\/len(df['purpose']),2)).head(3)","3bb8cc53":"# There are 95 unique purpose, most purposes are less frequent. \n# Plotting 30 most frequent purpose vs count\nsns.countplot(y=df['purpose'], order=df['purpose'].value_counts().iloc[:30].index)\n\n\n# Based on Data, 'VEHICLE ACCIDENT' is the most common reason, resulting in whopping 22% of the of 911 calls (1.5 million calls) during 5 years span.\n# Second one being 'DISABLED VEHICLE', resulting in 7% of calls (47909 calls).\n# Finally,  ANIMAL COMPLAINT, HIT + RUN, PRISONER IN CUSTODY, and FOOT PATROL being the least reasons.\n","b80cf931":"EMS = df[df['category']=='EMS']['purpose']\nEMS.nunique()\n# There are 81 unique calls under \"EMS\" category","ea94fe68":"# Plotting 30 out of 81 most frequent call purposes under \"EMS\" category vs count\nplt.title(\"EMS\")\nsns.countplot(y=EMS, order=EMS.value_counts().iloc[:30].index)\n\n# From graph, Most common purpose for 911 calls under EMS category are FALL VICTIM, RESPIRATORY and CARDIAC EMERGENCY. \n# Each constituting over 10% off overall calls under EMS respectively.","b39c87fc":"Fire = df[df['category']=='Fire']['purpose']\nFire.nunique()\n\n# There are 60 unique calls under \"Fire\" category","2ddd2e6a":"# Plotting 25 most frequent call purposes under \"Fire\" category vs count\nplt.title(\"Fire\")\nsns.countplot(y=Fire, order=Fire.value_counts().iloc[:25].index)\n\n\n# From graph, Most common purpose for 911 calls under \"Fire\" category is FIRE ALARM, which accounts for 38% of all calls under Fire category\n# Further, VEHICLE ACCIDENT and FIRE INVESTIGATION adds up to around 10% each to total calls.","95c16ea4":"Traffic = df[df['category']=='Traffic']['purpose']\nTraffic.value_counts()\n\n# 7 unique subcategories\/purposes under \"Traffic\" category","6deab3bf":"plt.title(\"Traffic\")\nsns.countplot(y=Traffic, order=Traffic.value_counts().index)\n\n# From graph, again \"VEHICLE ACCIDENT\" is the top purpose of 911 calls accounts for 64% of all calls under Traffic category. \n# Next \"DISABLED VEHICLE\" and \"ROAD OBSTRUCTION\" together combines to 31%.\n# Intrestingly, these three reasons alone constitutes 95% of 911 calls related to Traffic","f7d5adde":"# TimeStamp is of string type\nprint(df['timeStamp'].dtype)\ndf['timeStamp']\n\n# Note:\n# The observation start from Dec-2015 to July-2020 here, hence less datapoints to make inferences on these years. ","f46d8c15":"# Converting timeStamp in to datetime object\ndf['timeStamp'] = pd.to_datetime(df['timeStamp'])\nprint(df['timeStamp'].dtype)","77416eb0":"# Converting Datetime column in to new columns\ndf['date'] = df['timeStamp'].apply(lambda x: x.date())\ndf['year'] = df['timeStamp'].apply(lambda x: x.year)\ndf['month'] = df['timeStamp'].apply(lambda x: x.month)\ndf['day'] = df['timeStamp'].apply(lambda x: x.dayofweek)\ndf['hour'] = df['timeStamp'].apply(lambda x: x.hour)","0a3431a4":"# New columns\ndf[['date', 'year', 'month', 'day', 'hour']]","0eb0e57d":"# Line graph of 911 call count of all categories for each year from 2015 to 2020\nsns.lineplot(data=df.groupby('year').count()['category'])","bded70e0":"# Bar graph of 911 call count per category for each year from 2015 to 2020\nsns.countplot(df['year'], hue=df['category'])","a55b65d1":"df['month'].unique()","8808dc73":"# Mapping Month names to numbers\ndf['month'] = df['month'].map({1:'Jan',2:'Feb',3:'Mar',4:'Apr',5:'May',6:'Jun', 7:'Jul',8:'Aug',9:'Sep',10:'Oct',11:'Nov',12:'Dec'})\ndf['month'].unique()","f882f661":"# Line graph of 911 calls count in individual months (Jan-Dec)\nsns.lineplot(data=df.groupby('month').count()['category'], marker='o')","255b0db7":"# Bar graph of 911 calls count per month, sorted in decreasing order.\nsns.countplot(df['month'], order=df['month'].value_counts().index)\n\n# From Graph, 'January' received the highest number of calls, while least in 'September'. \n# Also, number of calls received on 'March', 'June' and 'July' are almost same. \n# Simillarly, in 'May' and 'December'.","72270aea":"# Bar graph of 911 calls count per month for each category, sorted in decreasing order.\nsns.countplot(df['month'], order=df['month'].value_counts().index, hue=df['category'])\n# This is same as above graph, where the total sum is splitted by categories\n\n# From graph below, Calls received related to 'Fire' in all months are approximately same,\n# On an average of around 8000 calls each month.","f66d0055":"df['day'].unique()","6c899c89":"# Mapping Day of the week to numbers\ndf['day'] = df['day'].map({0:'Mon',1:'Tue',2:'Wed',3:'Thu',4:'Fri',5:'Sat',6:'Sun'})\ndf['day'].unique()","4fb5c510":"# Line graph of overall 911 calls count for each day of the week in Ascending Order.\nsns.lineplot(data=df['day'].value_counts()[::-1], marker='o')\n\n\n# From Graph it is clearly understood that, 911 calls are least received during weekends, specially on Sundays \n# It significantly increases on Monday (mostly Traffic from Bar graph)\n# and gradually increases on other days till it hits the peak on Fridays (~ 1.03 million calls)","c3cf350d":"# Bar graph of overall 911 calls count for each day of the week in Ascending Order.\nsns.countplot(df['day'], order=df['day'].value_counts()[::-1].index, hue=df['category'])","0e9fe443":"df[df['month']=='Apr']['date']","783bd212":"# Month and Year Matrix\n\nyear_month = df.groupby(['month', 'year'], dropna=True).count()['category'].unstack()\ndisplay(year_month)\nsns.heatmap(year_month, cmap='coolwarm', lw=0.25)\n\n\n# As stated before, 2015 and 2020 doesn't have complete data, hence null values.\n# For better visualization Heatmap is used.\n\n# From Heatmap, \n# 'March 2018' recorded the highest 911 calls of 14923 as per our dataset.\n# and 'April 2020' recorded the least calls of 8243 (excluding 2015 as it has only 10th Dec) \n\n","f30986d8":"# Day of the Week and Month Matrix\n\nmonth_day = df.groupby(['day', 'month']).count()['category'].unstack()\ndisplay(month_day)","8f757d0d":"# Heatmap of the above matrix\nsns.heatmap(month_day, cmap='coolwarm', lw=0.25)\n\n# From Heatmap\n# The highest number of calls documented on a 'Friday', in 'March' with 10941 calls\n# The Least number of calls documented on a 'Sunday' in 'November' with 5196 calls  ","272f0e6c":"# Cluster Map for more detailed relationship between months and between days of week.\n# Scaled the values between 0 to 1 for more contrast\n\nsns.clustermap(month_day, cmap='coolwarm', standard_scale=1)","f92c847c":"# Day of the Week and Hour Matrix\nday_hour = df.groupby(['day', 'hour']).count()['category'].unstack()\ndisplay(day_hour)","21fffffa":"# Total calls on given hour per Day of the Week\nday_hour.sum()","05f3ddc8":"sns.heatmap(day_hour, cmap='coolwarm', lw=0.25)\n\n# From heatmap,\n# 911 calls start rising significantly from 7 a.m. (except Weekends), till 8 p.m. (hour 20)\n# Most calls are observed at Hour 17 and Highest recorded at Hour 17, on Friday of 7113 calls\n# Least calls are observed at Hour 4 and lowest recorded at Hour 4, on Wednesday of 1128 calls","ee096549":"## Day","8815f8e3":"# Imports","28e4aae3":"**To summarize,**\n\nA total of 663522 911 calls are observed between *10-Dec-2015* and *29-Jul-2020*.\n\n\n<\/br>\n\n1. **Individual Feature Analysis**\n\n<\/br>\n\n|  | Most Calls Received | Least Calls Received |\n| ---------------: | :---------- | :----------- |\n| **Call Category** | EMS | Fire |\n| **Call Purpose** | Vehicle Accident | - |\n| **Township** | Lower Merion | Lehigh County |\n| **Year** | 2018 | 2017 (excluding partial years)|\n| **Month** | January | September|\n| **Day of Week**| Friday | Sunday  |\n| **Hour of Day** | 17 (5 p.m)| 4 a.m |\n\n<\/br>\n\n2. **Combined Analysis**\n\n| Particular | Highest on | Least on |\n| ---------------: | :---------- | :----------- |\n| **Month in Years** | March 2018 (14923) | April 2020 (8243) |\n| **Day of Week in Months** | Fridays in March (10941) | Sundays in November (5196) |\n| **Hour in Days** | 5 p.m on Fridays (7113)| 4 a.m on Wednesdays (1128) |\n","9e4d0b6d":"## Day of the Week and Hour Matrix","5549c19e":"## Day of Week and Month Matrix","61814a6d":"## Month\n","43aaffe1":"# Exploratory Data Analysis","463a565a":"# Data","5bd42f31":"## Year\n","c5958f6a":"## Month-Year Matrix","57db7fb3":"# Data Insights","ec4d479e":"## Time Stamp","e760c523":"**Note:**\n\nNotice that usually 2020 is excluded when calculating total calls received in a 'Year', as it contains incomplete data of only 7 months (Jan-Jul). \n\nBut in this section, we are comparing monthly calls of every year. As April 2020 contains complete data from 1st to 30th and it is considered.","f517923f":"## Township (twp)","16e182fa":"## Title"}}