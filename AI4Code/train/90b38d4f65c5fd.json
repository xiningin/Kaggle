{"cell_type":{"1a9cb992":"code","6fbe0d77":"code","a34083ce":"code","2f1ca11f":"code","c9898ae8":"code","8c24f7a7":"code","28646e8f":"code","5d5ee8d3":"code","fb676db4":"code","e4f29f50":"code","00b3d1c0":"code","ebfcd3e3":"code","503916cd":"code","2fbc92a0":"code","4028d077":"code","79297a17":"code","a878816c":"markdown","4744b134":"markdown","51620503":"markdown","a3fb7509":"markdown","a8483a33":"markdown","5f77e5f0":"markdown","d4370383":"markdown","fde1a004":"markdown"},"source":{"1a9cb992":"#utilities\nimport numpy as np\nimport pandas as pd\nfrom datetime import datetime\n\n#modeling\nfrom statsmodels.tsa.ar_model import AutoReg\nfrom statsmodels.tsa.arima.model import ARIMA\nfrom pandas.plotting import autocorrelation_plot\n\n#visuals\nimport matplotlib.pyplot as plt\nimport plotly\nimport plotly.express as px\nimport plotly.graph_objects as go","6fbe0d77":"pd.set_option('display.max_columns', None)\npd.set_option('display.max_rows', None)","a34083ce":"# worldometer population statistics\nworldpop = pd.read_csv('..\/input\/covid19-cases-in-africa\/World_population(2020).csv')\n\n# jhu data at US county level and county stats\nus_county = pd.read_csv('..\/input\/covid19-us-county-jhu-data-demographics\/us_county.csv')\nus_covid = pd.read_csv('..\/input\/covid19-us-county-jhu-data-demographics\/covid_us_county.csv')","2f1ca11f":"# John Hopkins University (JHU) data at global level - until 12\/29\/20\njhu_global_meta = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_global_metadata.csv')\njhu_global_confirmed = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_global_confirmed_cases.csv')\njhu_global_deaths = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/CONVENIENT_global_deaths.csv')\n","c9898ae8":"# raw JHU data as it is downloaded from repository\njhu_raw_deaths = pd.read_csv('\/kaggle\/input\/covid19-data-from-john-hopkins-university\/RAW_global_deaths.csv')","8c24f7a7":"#global confirmed cases data\njhu_global_confirmed.head()","28646e8f":"# checking last updated date\njhu_raw_deaths.head().iloc[:,[0,1,2,3,-4,-3,-2,-1]]","5d5ee8d3":"# checking for na values\njhu_raw_deaths[jhu_raw_deaths.drop(columns=['Province\/State','Lat','Long']).isna().any(axis=1)]","fb676db4":"k = 14 #prediction horizon\n\n# skipping first row (header row) and resetting index to begin at 0\ndates = pd.to_datetime(jhu_global_confirmed['Country\/Region'][1:], format=\"%m\/%d\/%y\")\ntempdata = pd.DataFrame(jhu_global_confirmed['US'][1:])\ntempdata.index = dates\ntempdata.index.freq='d' # setting time frequency to be by date\ntempdata = tempdata.rename_axis('Date')\n\n# fit model\nmodel = AutoReg(tempdata, lags=[1,10,30])\nmodel_fit = model.fit()\n# make prediction\nyhat = model_fit.predict(len(tempdata), len(tempdata)+k)\n\n#plotting last recorded data point to show continuity and then forecasted data\npyhat = pd.Series(tempdata.tail(1).squeeze(), index=[tempdata.index[-1]]).append(yhat)\nax = tempdata.plot(figsize=(15,10))\npyhat.plot(marker='o',color='C1', ax=ax);\n# model_fit.plot_predict(0, len(tempdata)+k)\nmodel_fit.summary()","e4f29f50":"model_fit.plot_diagnostics(figsize=(15,10));","00b3d1c0":"# ARIMA\nk = 14 #prediction horizon\n\n# skipping first row (header row) and resetting index to begin at 0\ndates = pd.to_datetime(jhu_global_confirmed['Country\/Region'][1:], format=\"%m\/%d\/%y\")\ntempdata = pd.DataFrame(jhu_global_confirmed['US'][1:])\ntempdata.index = dates\ntempdata.index.freq='d' # setting time frequency to be by date\ntempdata = tempdata.rename_axis('Date')\n\n# fit model\nmodel = ARIMA(tempdata, order=(3, 2, 1))\nmodel_fit = model.fit()\n# make prediction\nyhat = model_fit.predict(len(tempdata), len(tempdata)+k, typ='levels')\n\n","ebfcd3e3":"#plotting last recorded data point to show continuity and then forecasted data\npyhat = pd.Series(tempdata.tail(1).squeeze(), index=[tempdata.index[-1]]).append(yhat)\nax = tempdata.plot(figsize=(15,10))\npyhat.plot(marker='o',color='C1', ax=ax);\n# model_fit.plot_predict(0, len(tempdata)+k)\nmodel_fit.summary()","503916cd":"model_fit.get_prediction(len(tempdata), len(tempdata)+k)","2fbc92a0":"model_fit.plot_diagnostics(figsize=(15,10));","4028d077":"fig = px.line(tempdata.reset_index(),x='Date',y='US')\nfig.show()","79297a17":"autocorrelation_plot(tempdata)","a878816c":"## Autoregressive Moving Average (ARIMA)","4744b134":"The data comes from:\n* COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University (https:\/\/github.com\/CSSEGISandData\/COVID-19)\n* Worldometer (https:\/\/www.worldometers.info\/)\n\nConveniently organized to be used with kaggle from:<br>\nhttps:\/\/www.kaggle.com\/antgoldbloom\/covid19-data-from-john-hopkins-university <br>\nhttps:\/\/www.kaggle.com\/okwirjulius\/covid19-cases-in-africa <br>\nhttps:\/\/www.kaggle.com\/headsortails\/covid19-us-county-jhu-data-demographics","51620503":"# Table of Contents\n- [Introduction](#introduction)\n- [The Data](#the-data)\n- [Analysis](#analysis)\n","a3fb7509":"## Introduction<a class=\"anchor\" id=\"introduction\"><\/a>","a8483a33":"## Analysis<a class=\"anchor\" id=\"analysis\"><\/a>","5f77e5f0":"## The Data<a class=\"anchor\" id=\"the-data\"><\/a>","d4370383":"Data is near normal distribution. Residuals however do not exhibit homoskedacity, suggesting some trend is not captured.","fde1a004":"### Autoregression Model"}}