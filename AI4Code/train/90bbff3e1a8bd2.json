{"cell_type":{"9efbf011":"code","1626334b":"code","659a4159":"code","a4d5cada":"code","f5c2f58f":"code","6f694ba5":"code","cb59f4ea":"code","7729b408":"code","c92dbd85":"code","ebeb9985":"code","61d65475":"code","6fa5c993":"code","e394a6ec":"code","d6c66361":"code","8c41414b":"code","52269935":"code","5ad85cdb":"code","5388a7bf":"code","13c508ba":"code","dee63d74":"code","6475b2c0":"code","87748736":"code","20eceaa2":"code","daaa4a04":"code","38d35bad":"code","7d196d53":"code","3049abbf":"markdown","b2fd5103":"markdown","647f10bf":"markdown","fa8a6bd6":"markdown","915adf17":"markdown","731b89a5":"markdown","4d76faa2":"markdown","85475aff":"markdown","a26a1e46":"markdown","ed28d183":"markdown"},"source":{"9efbf011":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","1626334b":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom pandas_profiling import ProfileReport\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots","659a4159":"df_original=pd.read_csv(\"..\/input\/english-premier-league-20102011\/EPL 2010-2011.csv\")\ndf_original","a4d5cada":"df_original.info()","f5c2f58f":"df_clean=df_original.loc[:,'Date':'AR']\ndf_clean\n#We don't really need columns which are relate to betting content","6f694ba5":"df_clean.dtypes","cb59f4ea":"df_clean.columns","7729b408":"df_clean.isnull().sum()","c92dbd85":"df_clean.describe()","ebeb9985":"hometeam_win=df_clean[df_clean['FTHG']>df_clean['FTAG']].groupby('HomeTeam').HomeTeam.count()\ndf_hometeam_win=pd.DataFrame({'Team':hometeam_win.index,'Number of home wins':hometeam_win.values})\nawayteam_win=df_clean[df_clean['FTHG']<df_clean['FTAG']].groupby('AwayTeam').AwayTeam.count()\ndf_awayteam_win=pd.DataFrame({'Team':awayteam_win.index,'Number of away wins':awayteam_win.values})","61d65475":"fig=px.bar(df_hometeam_win,x='Team',y='Number of home wins',title='HOME WIN EPL 2010-2011',color=hometeam_win.values)\nfig.show()","6fa5c993":"fig=px.bar(df_awayteam_win,x='Team',y='Number of away wins',title='AWAY WIN EPL 2010-2011',color=awayteam_win.values)\nfig.show()","e394a6ec":"winning_team=df_hometeam_win.merge(df_awayteam_win)\nwinning_team['Total']=winning_team['Number of home wins']+winning_team['Number of away wins']\nwinning_team","d6c66361":"fig=go.Figure(data=[\n    go.Bar(name='Home',x=winning_team['Team'],y=winning_team['Number of home wins']),\n    go.Bar(name='Away',x=winning_team['Team'],y=winning_team['Number of away wins'])])\nfig.update_layout(barmode='stack')\nfig.show()             ","8c41414b":"home_team_goals=df_clean.groupby('HomeTeam').FTHG.sum()\naway_team_goals=df_clean.groupby('AwayTeam').FTAG.sum()\ngoals=pd.DataFrame({'Team':home_team_goals.index.tolist(),'Home goals':home_team_goals.values.tolist(),'Away goals':away_team_goals.values.tolist()})\ngoals['Total']=goals['Home goals'] + goals['Away goals']\ngoals","52269935":"fig=go.Figure(data=[\n    go.Bar(name='Home goals',x=goals['Team'],y=goals['Home goals'],marker_color='Teal'),\n    go.Bar(name='Away goals',x=goals['Team'],y=goals['Away goals'],marker_color='Gold')])\nfig.update_layout(barmode='stack',title_text='Goals Information by Team')\nfig.show()","5ad85cdb":"df_referee=pd.DataFrame({'Referee Name':df_clean.groupby('Referee').Referee.count().index.tolist(),\n                         'Number of matches':df_clean.groupby('Referee').Referee.count().values.tolist(),\n                        'Yellow Card':df_clean.groupby('Referee').HY.sum().values+df_clean.groupby('Referee').AY.sum().values,\n                            'Red Card':df_clean.groupby('Referee').HR.sum().values+df_clean.groupby('Referee').AR.sum().values})\ndf_referee['Total Cards']=df_referee['Yellow Card'] + df_referee['Red Card']\ndf_referee['Yellow Card per match']=round(df_referee['Yellow Card']\/df_referee['Number of matches'],2)\ndf_referee['Red Card per match']=round(df_referee['Red Card']\/df_referee['Number of matches'],2)\nfig=px.bar(df_referee,x='Referee Name',y='Number of matches',color='Number of matches')\nfig.show()","5388a7bf":"fig=go.Figure(\n    data=[go.Bar(name='Yellow Card',x=df_referee['Referee Name'],y=df_referee['Yellow Card'],marker_color='Gold'),\n    go.Bar(name='Red Card',x=df_referee['Referee Name'],y=df_referee['Red Card'],marker_color='Darkred')])\n\n\nfig.update_layout(barmode='stack',title_text='Cards Statistic by Referee')\nfig.show()","13c508ba":"fig=go.Figure(\n    data=[go.Bar(name='Yellow Card per match',x=df_referee['Referee Name'],y=df_referee['Yellow Card per match'],marker_color='Gold'),\n    go.Bar(name='Red Card per match',x=df_referee['Referee Name'],y=df_referee['Red Card per match'],marker_color='Darkred')])\n\n\nfig.update_layout(barmode='stack',title_text='Cards Statistic Ratio by Referee')\nfig.show()","dee63d74":"df_team_fairplay = pd.DataFrame({'Team':df_clean.groupby('HomeTeam').HY.sum().index.tolist(),\n                                 'Yellow Card for HomeTeam':df_clean.groupby('HomeTeam').HY.sum().values.tolist(),\n                                'Red Card for HomeTeam':df_clean.groupby('HomeTeam').HR.sum().values.tolist()}).merge(\npd.DataFrame({'Team':df_clean.groupby('AwayTeam').AY.sum().index.tolist(),\n                                 'Yellow Card for AwayTeam':df_clean.groupby('AwayTeam').AY.sum().values.tolist(),\n                                'Red Card for AwayTeam':df_clean.groupby('AwayTeam').AR.sum().values.tolist()}))\ndf_team_fairplay['Yellow Card']=df_team_fairplay['Yellow Card for HomeTeam']+df_team_fairplay['Yellow Card for AwayTeam']\ndf_team_fairplay['Red Card']=df_team_fairplay['Red Card for HomeTeam']+df_team_fairplay['Red Card for AwayTeam']\ndf_team_fairplay=df_team_fairplay[['Team','Yellow Card','Red Card']]\ndf_team_fairplay['Total Card']=df_team_fairplay['Yellow Card']+df_team_fairplay['Red Card']\ndf_team_fairplay","6475b2c0":"fig=go.Figure(\n    data=[go.Bar(name='Yellow Card',x=df_team_fairplay['Team'],y=df_team_fairplay['Yellow Card'],marker_color='Gold'),\n    go.Bar(name='Red Card',x=df_team_fairplay['Team'],y=df_team_fairplay['Red Card'],marker_color='Darkred')])\n\n\nfig.update_layout(barmode='stack',title_text='Cards Statistic by Team')\nfig.show()","87748736":"df_team_shot= pd.DataFrame({'Team':df_clean.groupby('HomeTeam').HS.sum().index.tolist(),\n                                 'HomeTeam Shot':df_clean.groupby('HomeTeam').HS.sum().values.tolist(),\n                                'HomeTeam Shot on Target':df_clean.groupby('HomeTeam').HST.sum().values.tolist()}).merge(\npd.DataFrame({'Team':df_clean.groupby('AwayTeam').AS.sum().index.tolist(),\n                                 'AwayTeam Shot':df_clean.groupby('AwayTeam').AS.sum().values.tolist(),\n                                'AwayTeam Shot on Target':df_clean.groupby('AwayTeam').AST.sum().values.tolist()}))\ndf_team_shot['Shot']=df_team_shot['HomeTeam Shot']+df_team_shot['AwayTeam Shot']\ndf_team_shot['Shot on Target'] = df_team_shot['HomeTeam Shot on Target']+df_team_shot['AwayTeam Shot on Target']\ndf_team_shot=df_team_shot[['Team','Shot','Shot on Target']]\ndf_team_shot['Goals']=goals['Total']\ndf_team_shot['Goals per Shot']=round(df_team_shot['Goals']\/df_team_shot['Shot'],2)\ndf_team_shot['Goals per Shot on Target']=round(df_team_shot['Goals']\/df_team_shot['Shot on Target'],2)\ndf_team_shot['Shot on Target ratio']=round(df_team_shot['Shot on Target']\/df_team_shot['Shot'],2)\ndf_team_shot","20eceaa2":"fig=go.Figure(\n    data=[go.Bar(name='Shot',x=df_team_shot['Team'],y=df_team_shot['Shot'],marker_color='Darkred'),\n    go.Bar(name='Shot on Target',x=df_team_shot['Team'],y=df_team_shot['Shot on Target'],marker_color='Darkgreen'),\n    go.Bar(name='Goals',x=df_team_shot['Team'],y=df_team_shot['Goals'],marker_color='Gold')])\n\nfig.update_layout(width=1050,height=600)\nfig.update_layout(barmode='group',title_text='Shots Statistic by Team')\nfig.show()","daaa4a04":"fig=px.bar(df_team_shot,x='Team',y='Shot on Target ratio',color='Shot on Target ratio')\nfig.show()","38d35bad":"fig=go.Figure(\n    data=[go.Bar(name='Goals per Shot',x=df_team_shot['Team'],y=df_team_shot['Goals per Shot'],marker_color='Darkred'),\n    go.Bar(name='Goals per Shot on Target',x=df_team_shot['Team'],y=df_team_shot['Goals per Shot on Target'],marker_color='Darkgreen')])\n\nfig.update_layout(width=1050,height=600)\nfig.update_layout(barmode='group',title_text='Goals Ratio by Team')\nfig.show()","7d196d53":"fig=px.bar(pd.DataFrame({'Team':df_clean.groupby('HomeTeam').FTAG.sum().index,\n                        'Goals Conceded':df_clean.groupby('HomeTeam').FTAG.sum().values+df_clean.groupby('AwayTeam').FTHG.sum().values}),x='Team',y='Goals Conceded',color='Goals Conceded')\nfig.update_layout(title_text='Goals Conceded by Team')\nfig.show()","3049abbf":"The Shot on Target Ratio of teams were not much differences. Newcastle and Man City were the most accurate finishing teams with ratio = 0.58, slightly lower is Man United with 0.57, while Birmingham players are the most unaccurate shooter with just 0.47 in ratio (they had fewest chance to shoot and their accuration was also poorest!)","b2fd5103":"Key to results data:\n\nDiv = League Division Date = Match Date (dd\/mm\/yy) HomeTeam = Home Team AwayTeam = Away Team FTHG = Full Time Home Team Goals FTAG = Full Time Away Team Goals FTR = Full Time Result (H=Home Win, D=Draw, A=Away Win) HTHG = Half Time Home Team Goals HTAG = Half Time Away Team Goals HTR = Half Time Result (H=Home Win, D=Draw, A=Away Win)\n\nMatch Statistics (where available) Attendance = Crowd Attendance Referee = Match Referee HS = Home Team Shots AS = Away Team Shots HST = Home Team Shots on Target AST = Away Team Shots on Target HHW = Home Team Hit Woodwork AHW = Away Team Hit Woodwork HC = Home Team Corners AC = Away Team Corners HY = Home Team Yellow Cards AY = Away Team Yellow Cards HR = Home Team Red Cards AR = Away Team Red Cards","647f10bf":"Chelsea players were the hardest shooter with 635 shots, they also had the largest number of shoot on target. Arsenal took place at 2nd position in both indicator. Birmingham team seems to have few chances to shoot with just 327 shots and 155 on target.","fa8a6bd6":"P Dowd was the referee who drew most cards at EPL 2010-2011 with 120 cards (111 yellow cards, 9 red cards), while N Swarbrick drew least cards with just 4 cards. M Atkinson drew most red cards with 10 cards.","915adf17":"Blackpool is the most fair-play team with just 49 cards in total (47 yellow cards, 2 red cards). Man City took the first place with 74 yellow cards and 5 red cards (!)","731b89a5":"Man City and Chelsea were the best teams in defending with just 33 goals conceded, while Blackpool suffered from 78 goals conceded, followed by West Brom with 7 fewer goals conceded.","4d76faa2":"Every team but Arsenal score more home goals than away goals. Man United scored the most home goals with 49 home goals and also scored the most goals of the season.","85475aff":"When it comes to draw rate per game, L Mason is the referee with the highest draw rate per game. He is the strictest referee in EPL 2010-2011. N Swarbrick is the referee with highest red card draw rate (0.5 red card per game).","a26a1e46":"Mike Dean and P Dowd held the most games in EPL 2010-2011.","ed28d183":"Manchester United has the best performance when they are home team with 18 wins, while Arsenal and Manchester City are the best away teams with 8 wins."}}