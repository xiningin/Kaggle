{"cell_type":{"45f96c17":"code","caec9957":"code","8be134db":"code","62256010":"code","cf9c3190":"code","7291cae2":"code","fe35b298":"code","95ee9a1f":"code","a11d4ffa":"code","b62dc1a0":"code","3112632f":"code","17602a71":"markdown","c3a811e4":"markdown","e33bb64e":"markdown","94ea1faa":"markdown","b708971c":"markdown"},"source":{"45f96c17":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns","caec9957":"!wget https:\/\/raw.githubusercontent.com\/h4pZ\/h4tils\/master\/h4tils\/plotting\/hibm.mplstyle","8be134db":"# Stuff :)\nplt.style.use(\"hibm.mplstyle\")\ncolors = plt.rcParams['axes.prop_cycle'].by_key()['color']\ndata_path = \"..\/input\/all-space-missions-from-1957\/Space_Corrected.csv\"","62256010":"space = pd.read_csv(data_path)\nspace.head()","cf9c3190":"space.info()","7291cae2":"# Drop the first two columns because they aren't useful.\nspace = space.iloc[:, 2:]\n\n# Fixing dtypes.\nspace[\" Rocket\"] = (space[\" Rocket\"].apply(lambda x: x.replace(\",\", \"\") if isinstance(x, str) else x)\n                                  .astype(\"float\"))\nspace[\"Datum\"] = pd.to_datetime(space[\"Datum\"], utc=True)\n\n# Removing white spaces at the beginning and end of the column names.\nspace.columns = [col.strip() for col in space.columns]\n\n# Adding features.\nspace[\"Year\"] = (space[\"Datum\"].dt\n                               .year\n                               .astype(np.int16))\nspace[\"Loc\"] = space[\"Location\"].apply(lambda x: x.split(\",\")[-1])","fe35b298":"import missingno as msno","95ee9a1f":"msno.bar(space, figsize=(13, 8), color=\"#A573E1\")\nplt.title(\"Feature Completeness\");","a11d4ffa":"top_n = 50\ntop_n_space = (space.sort_values(by=\"Rocket\", ascending=False)\n                    .iloc[:top_n, :])\n\n\nfig, ax = plt.subplots(figsize=(10, top_n \/ 2))\nsns.barplot(x=\"Rocket\", y=\"Detail\", data=top_n_space, palette=\"plasma\")\nax.set_title(f\"Top {top_n} most expensive rockets\")\nax.set_xlabel(\"Cost of the rocket (in $ million)\")\nax.set_ylabel(\"Rocket Name\");","b62dc1a0":"total_spent_companies = (space[[\"Company Name\", \"Rocket\"]].groupby(by=\"Company Name\")\n                                                          .sum()\n                                                          .reset_index()\n                                                          .sort_values(by=\"Rocket\", ascending=False)\n                                                          .transform({\"Company Name\": lambda x: x,\n                                                                      \"Rocket\": np.log10})\n                                                          .replace(to_replace=-np.inf, value=np.nan)\n                                                          .dropna())\n\nn_companies = len(total_spent_companies)\n\nfig, ax = plt.subplots(figsize=(10, n_companies \/ 2))\nsns.barplot(x=\"Rocket\", y=\"Company Name\", data=total_spent_companies, palette=\"plasma\")\nax.set_title(r\"Total Money Spent by Companies\")\nax.set_xlabel(r\"Cost in $log_{10}$(million usd)\");","3112632f":"location_race = (space[[\"Loc\", \"Year\"]].groupby(by=[\"Loc\", \"Year\"])\n                                          .size()\n                                          .reset_index(name=\"counts\"))\\\n\nlocations = location_race[\"Loc\"].unique()\nn_locations = len(locations)\npalette = sns.husl_palette(n_locations, s=1.0)\n\nfig, ax = plt.subplots(figsize=(13, 8))\n\nfor i, location in enumerate(locations):\n    mask = location_race[\"Loc\"] == location\n    location_df = location_race[mask]\n    ax.plot(location_df[\"Year\"], location_df[\"counts\"], label=location, color=palette[i])\n    \nax.set_ylim(0)\nax.axvline(x=1969, linewidth=4, linestyle=\":\", label=\"Apollo 11 Moon Landing\")\nax.legend(loc='center left', bbox_to_anchor=(1, 0.5))\nax.set_title(\"Space Race by Launch Location\")\nax.set_ylabel(\"Number of Missions\")\nax.set_xlabel(\"Year\");","17602a71":"# Top N most expensive rockets","c3a811e4":"# WIP: More to come","e33bb64e":"# Total Money Spent by Companies","94ea1faa":"# Missing values","b708971c":"# Space Race by Launch Location Over Time"}}