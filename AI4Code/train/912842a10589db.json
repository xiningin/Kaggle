{"cell_type":{"548fd5e7":"code","54bb7f7d":"code","d2503110":"code","458ff202":"code","5ee916ea":"code","ae865962":"code","20f12d41":"code","26947ac8":"code","dd43da3a":"code","df39a7be":"code","3e11500b":"code","9c484f72":"code","234cb628":"code","505f4d2a":"code","e34647a3":"code","ad203ca9":"code","7c392505":"code","af630d9e":"code","816b8dc4":"code","5e43e7eb":"code","9c2348fb":"code","eb968a82":"code","bce44a77":"code","747c6827":"code","612d5d2c":"code","b4b7c9aa":"code","d30b404a":"code","06f9e671":"code","ce9da710":"code","eb5fb807":"code","d1de1b5f":"code","685b7cbe":"code","0d13cf43":"markdown","6dcd7d90":"markdown","d21ef2c4":"markdown","5be12297":"markdown","7304d196":"markdown","028c83e7":"markdown","e01dbcc1":"markdown","4370e60d":"markdown","1b485f14":"markdown","f6ec173c":"markdown","1682d08f":"markdown","cfed1514":"markdown","6ef40f1d":"markdown","bf3f36d9":"markdown","c2ae7a77":"markdown","ce5de640":"markdown","8b43cd83":"markdown"},"source":{"548fd5e7":"import pandas as pd\nimport numpy as np\nimport folium\nfrom geopy.geocoders import Nominatim\nimport json\nimport requests # library to handle requests\nfrom pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe\nimport matplotlib.pyplot as plt\nfrom geopy.extra.rate_limiter import RateLimiter","54bb7f7d":"tweets_df=pd.read_csv('..\/input\/covid19-tweets\/covid19_tweets.csv',header=0)","d2503110":"tweets_df.head()","458ff202":"tweets_df.info()","5ee916ea":"tweets_df.describe()","ae865962":"tweets_df.replace('',np.NaN)\ntweets_df.info()","20f12d41":"tweets_df.dropna(inplace=True)\ntweets_df.info()","26947ac8":"tweets_df['user_name'].value_counts()","dd43da3a":"top_users=tweets_df.groupby('user_name')['user_location'].count().reset_index()\ntop_users.columns=['user_name','count']\ntop_users.sort_values('count',ascending=False,inplace=True)\ntop_users[0:10].plot(kind='bar',x='user_name',y='count')\nplt.xlabel('Users')\nplt.ylabel('Tweets')\nplt.title('Top 10 tweeters')\nplt.show()","df39a7be":"locations=tweets_df['user_location'].replace('[^a-zA-Z0-9 ]', '', regex=True)\ntweets_df['user_location']=locations","3e11500b":"tweets_df.reset_index(inplace=True,drop=True)\ntweets_df.head()","9c484f72":"tweets_df.dropna(inplace=True)\ntweets_df.info()","234cb628":"tweets_df['date']=pd.to_datetime(tweets_df['date'])","505f4d2a":"top_july = tweets_df['user_location'][pd.DatetimeIndex(tweets_df['date']).month == 7].value_counts()","e34647a3":"top_august = tweets_df['user_location'][pd.DatetimeIndex(tweets_df['date']).month == 8].value_counts()\ntop_all_the_time = (top_august + top_july).sort_values(ascending = False)","ad203ca9":"fig, ax = plt.subplots(figsize = (13,5))\nplt.xlabel(\"Location\", fontsize = 12)\nplt.ylabel(\"NO. Tweets\", fontsize = 12)\ntop_july[0:10].plot(kind='bar', title = \"Top 10 Countries Posting about Covid-19 in July\" )","7c392505":"fig, ax=plt.subplots(figsize=(13,5))\nplt.xlabel(\"Top Locations\")\nplt.ylabel(\"Tweet Count\")\nplt.title(\"Top 10 Countries Posting about Covid-19 in August\")\ntop_august[0:10].plot(kind='bar')","af630d9e":"a=tweets_df['source'].value_counts()","816b8dc4":"a[0:5].plot(kind='bar')","5e43e7eb":"tags=tweets_df['hashtags'].value_counts()","9c2348fb":"tags[0:10].plot(kind='bar')","eb968a82":"user_status=tweets_df['user_verified'].value_counts()","bce44a77":"user_status.plot(kind='bar')\nplt.xlabel(\"Account verification status\")\nplt.ylabel(\"Number of tweets\")\nplt.title(\"Verified account tweets vs Unverified account tweets\")\nplt.xticks([False,True],['Unverified','Verified'])","747c6827":"tweets_df2=tweets_df.drop_duplicates(subset='user_name')\ntweets_df2=tweets_df2[['user_name','user_location']]\ntweets_df2.set_index('user_name',inplace=True)\ntweets_df2.head()","612d5d2c":"to_plot_list=top_users['user_name']\nto_plot_list=to_plot_list[0:100]\n#to_plot_list.shape","b4b7c9aa":"to_plot_map=tweets_df2.loc[to_plot_list]\n#to_plot_map.columns","d30b404a":"#to_plot_map.shape","06f9e671":"geolocator = Nominatim(user_agent=\"ny_explorer\")\ngeocode = RateLimiter(geolocator.geocode, min_delay_seconds=1)\nlongitude=[]\nlatitude=[]\n\n#address=['chennai','dallas','hsjhgdgh','London, UK']\n\nfor i in to_plot_map['user_location'].astype(str):\n    location = geolocator.geocode(i)\n    if location:\n        latitude.append(location.latitude)\n        longitude.append(location.longitude)\n    else:\n        latitude.append(np.NaN)\n        longitude.append(np.NaN)\n    \n    \nprint(len(latitude)) \n","ce9da710":"world_map = folium.Map(zoom_start=14)\n","eb5fb807":"latitude=list(latitude)\nlongitude=list(longitude)\n\ncleanedlatitude = [x for x in latitude if str(x) != 'nan']\n","d1de1b5f":"cleanedlongitude = [x for x in longitude if str(x) != 'nan']","685b7cbe":"incident_tweets=folium.map.FeatureGroup()\n\nfor i, j in zip(cleanedlatitude, cleanedlongitude):\n    incident_tweets.add_child(\n        folium.CircleMarker(\n            [i, j],\n            radius=5, # define how big you want the circle markers to be\n            color='red',\n            fill=True,\n            fill_color='green',\n            fill_opacity=0.5,\n            \n        \n        )\n    )\n    \nworld_map.add_child(incident_tweets)","0d13cf43":"<p1><b>In this note we would be investigating a set of Twitter tweets that uses the hashtag \"COVID19\" and plotting the location of the tweeters in a map. <\/b><\/p1>","6dcd7d90":"<h2><b>Top hashtags used<\/b><\/h2>","d21ef2c4":"<h2><b>Lets see if there are any null entries in the DataFrame<\/b><\/h2>","5be12297":"<h2><b>Summary statistics<\/b><\/h2>","7304d196":"<h2><b>Top places based on tweets in July<\/b><\/h2>","028c83e7":"<h2><b>Top sources of tweets<\/b><\/h2>","e01dbcc1":"<p1><b>The below cell is commented as its time consuming process to get the latitude and longitude of each location present in this data set. If suppose we can get this, we can then use Folium to plot the tweet density distribution on a world map to make this more interactive<\/b><p1>","4370e60d":"<h2><b>Top places based on tweets in August<\/b><\/h2>","1b485f14":"As same user has posted multiple tweets, there is a lot of duplicate entries with respect to the users who have tweeted in the DataFrame. Hence lets create a new dataframe which does not have any such duplicate values","f6ec173c":"<h2><b>Lets plot the location of the top 100 tweeters in a map<\/b><\/h2>","1682d08f":"**Lets replace all the cells with no entries using np.NaN (if any)**","cfed1514":"**List of tweets by various users**","6ef40f1d":"**Lets drop all NaN entries in the dataframe**","bf3f36d9":"<h1><b>End of my basic analysis. Feel free to share your comments!!!!<\/b><\/h1>","c2ae7a77":"> **Lets plot the top 10 users based on tweet count**","ce5de640":"<h2><b>Removing all non alphanumeric characters from the DataFrame (this would be helpful while plotting user location on a map)<\/b><\/h2>","8b43cd83":"<h1><b>Twitter tweet analysis<\/b><\/h1>"}}