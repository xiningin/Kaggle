{"cell_type":{"bd04e40b":"code","0f26272c":"code","104545f8":"code","8fe2afa4":"code","fd9931c7":"code","4ccbd362":"code","1e2e14dc":"code","38732da8":"code","ef1cae61":"code","96038e4b":"code","fb11a993":"code","a8879400":"code","654aeb04":"code","45640811":"code","7cecc913":"code","1e7caf6e":"code","21148b8a":"code","a18af152":"code","b890da1c":"code","fa5df146":"code","f4131205":"code","2780222c":"code","1718da68":"markdown","a7293e49":"markdown","a30582d8":"markdown","8df0d4e9":"markdown","42adbc42":"markdown","1d30df5a":"markdown","13c7409a":"markdown","814b1943":"markdown","93a09bc2":"markdown","3f7b7b8c":"markdown","5cc8d6ac":"markdown","0e1a0218":"markdown","9bee64bc":"markdown","907c9fc1":"markdown","942e07af":"markdown","6e649b5a":"markdown","022f93ad":"markdown","70bb26cd":"markdown","cc9e23be":"markdown","8134dcc0":"markdown","cb03837c":"markdown","0d50926c":"markdown","8630354f":"markdown"},"source":{"bd04e40b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy.stats import norm\nfrom sklearn.preprocessing import StandardScaler\nfrom scipy import stats\nimport folium\nfrom folium.plugins import HeatMap\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","0f26272c":"#Configura\u00e7\u00f5es do Panda\npd.set_option(\"display.precision\",2)\n#configura\u00e7\u00e3o do matplotlib\nplt.style.use('bmh')","104545f8":"dfCalendar = pd.read_csv('..\/input\/bangkok-airbnb\/calendar.csv')\ndfListings = pd.read_csv('..\/input\/bangkok-airbnb\/listings.csv')\ndfReviews = pd.read_csv('..\/input\/bangkok-airbnb\/reviews.csv')","8fe2afa4":"dfListings.info()\ndfListings.head(3)","fd9931c7":"dfCalendar.info()\ndfCalendar.head(3)","4ccbd362":"dfReviews.info()\ndfReviews.head(3)","1e2e14dc":"\n\n#missing data\ndfListings2 = dfListings[[column for column in dfListings if dfListings[column].count() \/ len(dfListings) <= 0.3]]\ntotal = dfListings2.isnull().sum().sort_values(ascending=False)\npercent = (dfListings2.isnull().sum()\/dfListings2.isnull().count()).sort_values(ascending=False)\nmissing_data = pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])\nmissing_data.head(20)\n\n","38732da8":"# df.count() does not include NaN values\n#print(dfListings.isnull().sum())\n#dfListings2 = dfListings[[column for column in dfListings if dfListings[column].count() \/ len(dfListings) >= 0.3]]\n#del df2['Id']\ndfListings2 = dfListings[[column for column in dfListings if dfListings[column].count() \/ len(dfListings) >= 0.3]]\nprint(\"List of dropped columns:\", end=\" \")\nfor c in dfListings.columns:\n    if c not in dfListings2.columns:\n        print(c, end=\", \")\nprint('\\n')\ndfListings = dfListings2","ef1cae61":"dfListings.info()","96038e4b":"cols = ['price']\ndfListings[cols].head(5)","fb11a993":"dfListings['price'] = dfCalendar['price'].replace('[\\$,]', '', regex=True).astype(float)\ndfListings[cols].head(5)\n","a8879400":"cols = ['price']\ndfListings[cols].head(5)","654aeb04":"dfCalendar['price'] = dfCalendar['price'].replace('[\\$,]', '', regex=True).astype(float)\ndfCalendar['adjusted_price'] = dfCalendar['adjusted_price'].replace('[\\$,]', '', regex=True).astype(float)\ndfCalendar[cols].head(5)","45640811":"\ndfListings_num = dfListings.select_dtypes(include = ['float64', 'int64'])\n\n#cols = ['price', 'review_scores_value', 'review_scores_location', 'review_scores_cleanliness', 'host_response_time', 'bedrooms', 'bathrooms']\n#dfListings_num = dfListings_num.drop(['id','scrape_id','latitude','longitude','host_id'],axis=1)\ndfListings_num.head(3)","7cecc913":"#select = dfListings_num.iloc[:,0:20]\n#select.hist(figsize=(16, 20), bins=50, xlabelsize=8, ylabelsize=8);\ndfListings_num.hist(figsize=(25, 30), bins=100, xlabelsize=8, ylabelsize=8);","1e7caf6e":"\npoint = dfListings[['latitude','longitude']]\npoint = point.iloc[0:1,:]\nprint(point)\nmap_folium = folium.Map(point,zoom_start=10)\n\nHeatMap(dfListings[['latitude','longitude']].dropna(),\n        radius=8,gradient={0.2:'blue',0.4:'purple',0.6:'orange',1.0:'red'}).add_to(map_folium)\n\ndisplay(map_folium)","21148b8a":"plt.figure(figsize = (12, 6))\n\ny = dfListings.groupby('neighbourhood_cleansed')['price'].mean()\nx = dfListings['neighbourhood_cleansed'].unique()\nplt.xlabel('Bairros')\nplt.ylabel('Pre\u00e7o')\nplt.xticks(rotation=90)\npoint = dfListings[['price']].mean()\n#print(point)\n\n#plt.axvline(mean, color='r', linestyle='--')\n#plt.axvline(median, color='g', linestyle='--')\nplt.bar(x,y, label='M\u00e9dia de pre\u00e7o por bairro')\nplt.axhline(point['price'],color='r', linestyle='--' , label='M\u00e9dia de pre\u00e7o')\nplt.legend()\nplt.show()","a18af152":"calendario = dfCalendar[['date', 'price']]\ncalendario = calendario.groupby('date')['price'].mean().reset_index()\ncalendario['date'] = pd.to_datetime(calendario['date'])\n\nplt.figure(figsize=(10, 5))\n\nplt.plot(calendario['date'], calendario['price'])\nplt.title('Pre\u00e7o m\u00e9dio no tempo')\nplt.ylabel('Pre\u00e7o')\nplt.show();\n","b890da1c":"corr = dfListings_num.corr()\nplt.figure(figsize=(12, 10))\n\nsns.heatmap(corr[(corr >= 0.5) | (corr <= -0.4)], \n            cmap='viridis', vmax=1.0, vmin=-1.0, linewidths=0.1,\n            annot=True, annot_kws={\"size\": 8}, square=True);","fa5df146":"#scatterplot\nsns.set()\ncols = ['bedrooms', 'accommodates', 'beds']\nsns.pairplot(dfListings[cols], size = 2.5)\nplt.show();","f4131205":"plt.figure(figsize = (12, 6))\nax = sns.boxplot(x='property_type', y='price', data=dfListings)\nplt.setp(ax.artists, alpha=.5, linewidth=2, edgecolor=\"k\")\nplt.xticks(rotation=90)","2780222c":"plt.figure(figsize = (12, 6))\nax = sns.boxplot(x='room_type', y='price', data=dfListings)\nplt.setp(ax.artists, alpha=.5, linewidth=2, edgecolor=\"k\")\nplt.xticks(rotation=90)","1718da68":"<h2><b>Refer\u00eancias<\/b><\/h2>\n\n<p>https:\/\/www.kaggle.com\/pmarcelino\/comprehensive-data-exploration-with-python<\/p>\n\n<p>https:\/\/www.kaggle.com\/imoore\/intro-to-exploratory-data-analysis-eda-in-python<\/p>\n\n<p>https:\/\/www.kaggle.com\/ekami66\/detailed-exploratory-data-analysis-with-python?scriptVersionId=733050<\/p>\n\n<p>https:\/\/www.kaggle.com\/kashnitsky\/topic-1-exploratory-data-analysis-with-pandas<\/p>\n\n<p>https:\/\/seaborn.pydata.org\/introduction.html<\/p>\n","a7293e49":"<h2><b>Base de Dados<\/h2>\n    \n<h3><p>Os dados forma extraidos diretamente do site http:\/\/insideairbnb.com\/get-the-data.html com data de publica\u00e7\u00e3o de 22 de fevereiro de 2021.<\/p>\n   <p> Links diretos:<\/p>\n   <p> http:\/\/data.insideairbnb.com\/thailand\/central-thailand\/bangkok\/2021-02-22\/data\/listings.csv.gz<\/p>\n   <p> http:\/\/data.insideairbnb.com\/thailand\/central-thailand\/bangkok\/2021-02-22\/data\/calendar.csv.gz<\/p>\n  <p>  http:\/\/data.insideairbnb.com\/thailand\/central-thailand\/bangkok\/2021-02-22\/data\/reviews.csv.gz<\/p>","a30582d8":"<h2><b>Importa\u00e7\u00e3o dos Pacotes ","8df0d4e9":"# **An\u00e1lise Explorat\u00f3ria de Dados (EAD) do Airbnb - Bangkok, Tail\u00e2ndia.**\n\n<h2><b>Introdu\u00e7\u00e3o<\/h2>\n\n<h2><b>Sobre Bangkok<\/h2>\n<table style=\"width:90%;\" align=\"left\">\n  <tr >\n    <th><img src='https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/b\/b4\/Bangkok_montage_3.jpg\/800px-Bangkok_montage_3.jpg'  width=\"600\"><\/th>\n    <th><h3 style=\"text-align:Left;\">\n        \n<p>Banguecoque (portugu\u00eas europeu) ou Bangkok ou Bancoque (portugu\u00eas brasileiro) (em tailand\u00eas: \u0e01\u0e23\u0e38\u0e07\u0e40\u0e17\u0e1e\u0e21\u0e2b\u0e32\u0e19\u0e04\u0e23; romaniz.: Krung Thep Maha Nakhon, Sobre este sompron\u00fancia (ajuda\u00b7info), pronunciado: [kr\u016b\u014b t\u02b0\u00ea\u02d0p mah\u01ce\u02d0 n\u00e1k\u02b0\u0254\u0304\u02d0n], ou apenas Loudspeaker.svg? Krung Thep) \u00e9 a capital e cidade mais populosa da Tail\u00e2ndia, al\u00e9m de principal centro financeiro, corporativo, mercantil, cultural e hist\u00f3rico do pa\u00eds. \u00c9 a d\u00e9cima cidade mais populosa da \u00c1sia e a vig\u00e9sima quarta mais populosa do mundo. Situada na margem esquerda do rio Chao Phraya, nas proximidades do Golfo da Tail\u00e2ndia, a cidade possui cerca de 8 280 925 habitantes (2011),[2] enquanto a Grande Bangkok re\u00fane 14,6 milh\u00f5es de habitantes, sendo que aproximadamente 12,6% da popula\u00e7\u00e3o do pa\u00eds vive na sua \u00e1rea metropolitana, ocupando o posto de 30.\u00aa regi\u00e3o metropolitana mais populosa do mundo. A cidade ocupa 1 568,7 quil\u00f4metros quadrados, no delta do rio Chao Phraya, e est\u00e1 localizada na regi\u00e3o Central da Tail\u00e2ndia.\n\n<p>Historicamente, Bangkok est\u00e1 ligada a um pequeno posto de com\u00e9rcio durante o Reino de Ayutthaya, no s\u00e9culo XV, que eventualmente cresceu em tamanho e se tornou o local de duas capitais: Thonburi em 1768 e Rattanakosin em 1782. Bangkok estava situada no centro do reino de Si\u00e3o (nome adotado pela Tail\u00e2ndia at\u00e9 1939), sofrendo grande moderniza\u00e7\u00e3o durante o s\u00e9culo XIX, quando o pa\u00eds enfrentou press\u00f5es do Ocidente. A cidade foi palco de lutas pol\u00edticas da Tail\u00e2ndia ao longo do s\u00e9culo XX, entre as quais as revoltas em que o pa\u00eds aboliu a monarquia absoluta e sofreu in\u00fameros golpes e revoltas. A cidade cresceu rapidamente durante os anos 1960 at\u00e9 os anos 1980 e agora exerce um impacto significativo entre a pol\u00edtica, economia, educa\u00e7\u00e3o, meios de comunica\u00e7\u00e3o e sociedade moderna da Tail\u00e2ndia e do Sudeste Asi\u00e1tico.\n\n<p>Os altos investimentos econ\u00f4micos recebidos pelos novos tigres asi\u00e1ticos na d\u00e9cadas de 1980 e 1990 resultou em um grande n\u00famero de empresas multinacionais sediadas regionalmente em Bangkok. A cidade \u00e9 hoje uma das principais for\u00e7as regionais em finan\u00e7as e neg\u00f3cios. \u00c9 um centro internacional para o transporte e sa\u00fade, e est\u00e1 emergindo como um centro regional para as artes, moda e entretenimento. Destaca-se pelo seu patrim\u00f4nio arquitet\u00f4nico e cultural, com numerosos templos, pal\u00e1cios, museus, teatros, bibliotecas e universidades. Os principais marcos de Bangkok s\u00e3o sua cultura, bem como seus distritos not\u00f3rios, que deram-lhe um apelo ex\u00f3tico. O hist\u00f3rico Grand Palace e templos budistas, incluindo Wat Arun e Wat Pho, contrastam com outras atra\u00e7\u00f5es tur\u00edsticas, como as cenas da vida noturna de Khaosan Road e Patpong. Bangkok \u00e9 um dos principais destinos tur\u00edsticos do mundo. \u00c9 nomeada a cidade mais visitada na Global Destination Cities Index da MasterCard, e foi nomeada a \"Melhor Cidade do Mundo\" por quatro anos consecutivos pela revista norte-americana Travel + Leisure. Em 2006, foi a segunda cidade com maior n\u00famero de turistas no mundo, com 10,35 milh\u00f5es de turistas no ano, sendo superada apenas por Londres.[3]\n\n<p>O r\u00e1pido crescimento de Bangkok, associado ao pouco planejamento e regula\u00e7\u00e3o do urbanismo, resultou em uma paisagem urbana desordenada e sistemas de infraestrutura inadequados. Estradas limitadas, apesar de uma extensa rede de autoestradas, juntamente com o uso substancial de estacionamento privado, resultaram em congestionamento do tr\u00e1fego e rede vi\u00e1ria ineficiente. Este, por sua vez, causou grave polui\u00e7\u00e3o do ar na d\u00e9cada de 1990. A cidade desde ent\u00e3o virou-se para o transporte p\u00fablico em uma tentativa de resolver este grave problema. Quatro linhas de tr\u00e2nsito r\u00e1pido est\u00e3o agora em opera\u00e7\u00e3o, com mais sistemas em constru\u00e7\u00e3o ou planejados pelo governo nacional e a Administra\u00e7\u00e3o Metropolitana de Bangkok. (Wikipedia,2021)\n\n <\/h3><\/th>\n \n  <\/tr>\n<\/table>\n","42adbc42":"<p><h4>Para o arquivo <b>reviews.csv<\/b> temos o total de <b>6<\/b> colunas e <b>280.341<\/b> Linhas.<\/p>","1d30df5a":"<h3><b>reviews.csv","13c7409a":"<h2><b> Configura\u00e7\u00f5es do Panda","814b1943":"Como esperado a m\u00e9dia de pre\u00e7o aumenta com o tempo!","93a09bc2":"<h2><b> Outliers <\/h2>\n","3f7b7b8c":"<h2><b> Leitura dos dados - dataframes","5cc8d6ac":"<p>Apenas algumas variaveis parecem estar correlacionados umas com as outras. \n <p>*bedrooms\/beds\/accomodates<\/p>\n <p>*availability 30\/60\/90\/365<\/p>\n <p>*review_score_rating\/accuracy\/cleanliness\/checkin\/communication\/value<\/p>\n<p> A correla\u00e7\u00e3o entre review_score_rating\/accuracy\/cleanliness\/checkin\/communication\/value,parece indicar que se um anfitri\u00e3o tem uma boa pontua\u00e7\u00e3o ele tamb\u00e9m tem boas pontua\u00e7\u00f5es relacionadas \u00e0 limpeza do im\u00f3vel, boa comunica\u00e7\u00e3o com o h\u00f3spede e valor, o que a priori faz sentido.<\/p>\n\n<p> O resultado das outras correla\u00e7\u00f5es seguem a mesma l\u00f3gica <\/p> \n\n","0e1a0218":"<h3><b>calendar.csv","9bee64bc":"<h2><b>Distribui\u00e7\u00e3o dos Dados \n    <\/b> <\/h2>\n    \n<h3><b>listings.csv<\/b> <\/h3>","907c9fc1":"<h3><b>Calendar.csv<\/b> <\/h3>\n\n<h4><b> Convertendo dados<\/b> <\/h4>\n    \nAlterando a coluna Price para float","942e07af":"<h2><b>Prepara\u00e7\u00e3o de dados<\/b> <\/h2>\n    \n<h3><b>listings.csv<\/b> <\/h3>\n    \n<h4><b> Removendo colunas com dados faltandes +70%    ","6e649b5a":"Pelo gr\u00e1fico acima \u00e9 poss\u00edvel observar que, apesar dos pre\u00e7os n\u00e3o variarem muito entre os bairros, h\u00e1 uma tendencia de aumento de pre\u00e7o nas regi\u00f5es centrais de Bangkok!\n\n","022f93ad":"\n<h4><b>Distribui\u00e7\u00e3o geogr\u00e1fica<\/b><\/h4>","70bb26cd":"<p><h4>Para o arquivo <b>listings.csv<\/b> temos o total de <b>74<\/b>  colunas e <b>19360<\/b>  Linhas.<\/p>\n\n<p>Em uma an\u00e1lise inicial j\u00e1 \u00e9 poss\u00edvel perceber que algumas colunas precisam ser convertidas, por exemplo a coluna price que precisa ser convertidade de object para float64\n    \n<p>Pode-se observar tamb\u00e9m que algumas colunas apresentam dados faltantes, como por exemplo os campos \"License\" e \"Calendar_Updated\", maiores que 30%","cc9e23be":"<h4><b> Convertendo dados<\/b> <\/h4>\n    \nAlterando a coluna Price para float","8134dcc0":"<h3><b>Calendar.csv<\/b> <\/h3>","cb03837c":"<h2><b>Correla\u00e7\u00e3o \n    <\/b> <\/h2>\n       <h3><b>listings.csv<\/b> <\/h3>","0d50926c":"<p><h4>Para o arquivo <b>calendar.csv<\/b> temos o total de <b>7<\/b> colunas e <b>7.036.780<\/b> Linhas.<\/p>\n\n<p>Em uma an\u00e1lise inicial, assim como no listings.csv, foi poss\u00edvel perceber que as colunas 'price' e 'ajusted_price' precisam ser convertidas do tipo object para  o tipo float64","8630354f":"<h2><b>Analise inicial do dados<\/h2>\n    \n<h3><b>listings.csv"}}