{"cell_type":{"6397514e":"code","52a260c3":"code","3cbdf564":"code","58039885":"code","e711ceb2":"code","40479c8e":"code","56774939":"code","7c50ec30":"code","2eb1c5f2":"code","30494ff9":"code","3c684e94":"code","54415b2e":"code","86ff28cc":"code","1e4f00a7":"code","a59a2ec8":"code","b3890a85":"code","7e5f4067":"code","54712b11":"code","a5526cf6":"code","ef609053":"code","1fb0cb3a":"code","203cfc18":"code","95268b95":"code","a8c6b3e9":"code","d4769a27":"markdown","3799786a":"markdown","0db792ba":"markdown","73fbd022":"markdown","b917c46d":"markdown","3c563469":"markdown"},"source":{"6397514e":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","52a260c3":"#data processing\nimport pandas as pd\n#linear algebra\nimport numpy as np\n#data visualisation\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nplt.style.use(\"dark_background\")","3cbdf564":"#Few important attributes to look at with an objective to optimize business\n#-Average room rates in different cities\n#-Number of hotels in different cities\n#-Cancellation Rate\n#-Number of bookings in a given time period\n#-Discounts offered\n#-Average Number of nights stayed by customers\n#-How many days prior to the stay bookings are made\n#-Revenue","58039885":"#Loading Datsets\ndata_hotel=pd.read_csv('..\/input\/hotel-analysis1\/Hotel Details.csv')\ndata_city=pd.read_csv('..\/input\/hotel-analysis1\/Hotel_City.csv')","e711ceb2":"data_hotel.head(3)","40479c8e":"data_city.head(3)","56774939":"#understanding shape of the data\nprint('Hotels & City datasets have',data_hotel.shape,data_city.shape,'rows and columns respectively')","7c50ec30":"#merging the datasets\ndata= data_hotel.merge(data_city,left_on='hotel_id',right_on='Hotel_id',how='left')\ndata.head()","2eb1c5f2":"data.describe()","30494ff9":"#The booking amount varies from as low as ~INR 900 to as high as ~ INR 1.2Lacs","3c684e94":"#check for nulls\ndata.isnull().sum()","54415b2e":"#check for any other missing data\ndata.isin(['?']).sum()","86ff28cc":"#Distinct number of hotels\nprint('There are', data['hotel_id'].nunique(), 'distinct hotels in the dataset spread across', data['City'].nunique(), 'cities')","1e4f00a7":"hotels_by_cities=pd.DataFrame(data.groupby(['City']).nunique()['hotel_id'])\nhotels_by_cities=hotels_by_cities.reset_index().sort_values(by='hotel_id',ascending=False)\nhotels_by_cities['%Distribution']=(hotels_by_cities['hotel_id']\/(hotels_by_cities['hotel_id'].sum()))*100\nhotels_by_cities['Labels']=hotels_by_cities['%Distribution'].round().astype(str) + '%'\nhotels_by_cities","a59a2ec8":"plt.figure(figsize=(5,5))\nplt.title(\"Distribution of hotels by City\")\ncolors = ['#191970','#001CF0','#0038E2','#0055D4','#0071C6','#008DB8','#00AAAA','#00C69C','#00E28E','#00FF80']\nplt.axis(\"equal\")\ng1=plt.pie(hotels_by_cities['%Distribution'],labels=hotels_by_cities['City'],colors=colors,autopct='%0.0f%%',\n        shadow=True,explode=[0,0, 0, 0,0.1,0.1,0.15,0.175,0.2,0.25])\n\nplt.show()","b3890a85":"#More than half the hotels are concentrated in Delhi, Bangalore & Gurgaon","7e5f4067":"data.columns","54712b11":"status_check=pd.DataFrame(data.groupby(['City','status']).count()['booking_id'])\nstatus_check.reset_index(inplace=True)\nstatus_check['Total']=status_check.groupby('City')['booking_id'].transform('sum')\nstatus_check['Cancellation Rate']=((status_check['booking_id']\/status_check['Total'])*100).round(1)\nstatus_check['Labels']=status_check['Cancellation Rate'].astype(str) + '%'\nstatus_check.head()","a5526cf6":"#Distribution on a bar plot\nplt.figure(figsize=(10,5))\ng2=sns.barplot(data=status_check[status_check['status']=='Cancelled'],x='City',y='Cancellation Rate',palette='GnBu_r')\ng2.set(title='Cancellation Rate By Cities')\n\nfor a in g2.patches:\n    g2.annotate('{:.1f}%'.format(a.get_height()),\n              ((a.get_x()+a.get_width()\/2),a.get_height()),\n               ha=\"center\", va=\"top\",\n               xytext=(0,9),\n               textcoords=\"offset points\")","ef609053":"#Delhi has the highest cancellation rate while Pune has the lowest","1fb0cb3a":"\ndata['Month']=data['check_in'].apply(lambda x:x.split(\"-\")[1])\ndata['Month']=data['Month'].map({'01':'Jan','02':'Feb','03':'Mar'})\ndata.head()\nbookings_by_month=pd.DataFrame(data.groupby(['City','Month']).count()['booking_id']).reset_index()\nbookings_by_month.head()","203cfc18":"plt.figure(figsize=(15,6))\ng3=sns.barplot(data=bookings_by_month,x='City',y='booking_id',palette='crest',hue='Month',dodge=True)\ng3.set(title='Number of Bookings by City and Month')\n\nfor a in g3.patches:\n    g3.annotate('{:.0f}'.format(a.get_height()),\n              ((a.get_x()+a.get_width()\/2),a.get_height()),\n               ha=\"center\", va=\"center\",\n               xytext=(0,9),\n               textcoords=\"offset points\")","95268b95":"\ndata['Total Price']=data['amount']-data['discount']\ndata['Net Revenue']=data[data['status']!='Cancelled'].groupby(['City'])['Total Price'].transform('sum')\ndata['Gross Revenue']=data.groupby(['City'])['amount'].transform('sum')\nRevenue=data[data['status']!='Cancelled'][['City','Net Revenue','Gross Revenue']].drop_duplicates()\nRevenue=pd.melt(Revenue, id_vars=\"City\", var_name=\"Revenue_Type\", value_name=\"Revenue\")","a8c6b3e9":"plt.figure(figsize=(16,5))\ng4=sns.factorplot(data=Revenue,x='City',y='Revenue',palette='crest_r',hue='Revenue_Type',kind='bar',dodge=True)\ng4.set(title='Revenue by City')\nplt.xticks(rotation=90)\nplt.show()","d4769a27":"#4.Revenue Distribution by Cities","3799786a":"# Data wrangling","0db792ba":"#2.Cancellation Rate","73fbd022":"# Importing Libraries","b917c46d":"#3.Booking by Month","3c563469":"#1.Distribution of hotels by cities"}}