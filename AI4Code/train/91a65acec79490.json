{"cell_type":{"9fc2a48c":"code","ab113008":"code","3b5f3fe4":"code","c304a633":"code","a4c67d54":"code","91eba586":"code","bd22a81f":"code","0a9bb93f":"code","1bc031c4":"code","97ff3662":"code","79fdb108":"code","65e3047b":"code","6cac63c4":"code","bfc638d4":"code","c8fcdf4f":"code","93390559":"code","fad201ba":"markdown","198aea09":"markdown","61c07bb3":"markdown","af8de4a7":"markdown","9047b21a":"markdown","6da78c4c":"markdown","ed471f7a":"markdown","9056fad0":"markdown","dcae7725":"markdown","a5288c30":"markdown","bbb9ba80":"markdown","dbae7fd7":"markdown","174fcfb4":"markdown","57adaf86":"markdown","0dbec1f4":"markdown"},"source":{"9fc2a48c":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\nimport seaborn as sns; sns.set()\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","ab113008":"# Read in csv\nimdb = pd.read_csv('..\/input\/movie_metadata_modificado3.csv')","3b5f3fe4":"# Print Head\nprint(imdb.head())\n\n# Print Info\nimdb.info()","c304a633":"# Find the values contained in the \"Star Wars\" group \ndf = pd.DataFrame(imdb, columns = ['movie_title', 'director_name', 'title_year', 'budget', 'gross', 'imdb_score'])\n\nsw = df[imdb['movie_title'].str.contains('Star Wars')]\nsw_sorted = sw.sort_values(by=['title_year'])\nsw_sorted","a4c67d54":"# Drop the titles with missing values\nsw_drop = sw_sorted.dropna()\nsw_drop","91eba586":"# Add 2 new rows: Episode VII and VIII, which were not adequately represented or present in our imdb dataset\nVII_VIII = [pd.Series(['Star Wars: Episode VII - The Force Awakens?', \n                       'J.J. Abrams', 2015.0, 245000000.0, 936662225.0, 8.0], index=sw_drop.columns ),\n            \n            pd.Series(['Star Wars: Episode VIII - The Last Jedi?', \n                       'Rian Johnson', 2017.0, 317000000.0, 620181382.0, 7.1], \n                      index=sw_drop.columns )]\n\nsw_full = sw_drop.append(VII_VIII, ignore_index=True)","bd22a81f":"#reset index\nsw_index = sw_full.reset_index(drop=True)\nsw_index","0a9bb93f":"#remove unwanted ? at the end of the movie titles by creating a new column called movie_title_\nsw_clean2 = sw_index.assign(movie_title_=sw_index['movie_title'].str.replace(r'?', ''))\n\n#drop original movie_title column containing the movie titles with ?\nsw_drop2 = sw_clean2.drop(['movie_title'], axis=1)\nsw_drop2","1bc031c4":"#re-arrange columns so that movie_title_ is first\ncols = sw_drop2.columns.tolist()\ncols = cols[-1:] + cols[:-1]\ncols\n","97ff3662":"#rename cols to sw_arranged and display as a df\nsw_arranged = sw_drop2[cols]\nsw_arranged","79fdb108":"#remove director name and title year to leave only the columns used for analysis\nsw_budget_gross = sw_arranged[['movie_title_','budget','gross', 'imdb_score']]\nsw_budget_gross_plot = sw_budget_gross.sort_index(ascending=False)\nsw_budget_gross_plot","65e3047b":"# Import df for a horizontal bar plot showing the budgets of all 8 Star Wars movies\nax = sw_budget_gross_plot.plot(kind='barh', x='movie_title_', y='budget', color='gold')\n\n# Despine\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['bottom'].set_visible(False)\n\n# Set Title\nax.set_title('Star Wars Movies - Budget (in order of release date)')\n\n# Set x-axis label\nax.set_xlabel(\"Budget (in millions)\", labelpad=20, weight='bold', size=12)\n\n# Set y-axis label\nax.set_ylabel(\"Movie Title\", labelpad=20, weight='bold', size=12)\n\n# Set xticks for budget\nstart, end = ax.get_xlim()\nax.xaxis.set_ticks(np.arange(start, end, 350000000))\nax.set_xticks([0, 50000000, 100000000, 150000000, 200000000, 250000000, 300000000, 350000000])\nax.set_xticklabels(['0', '50M', '100M', '150M', '200M', '250M', '300M', '350M'])\n\n\n# Import df for a horizontal bar plot showing the gross of all 8 Star Wars movies\nsw_gross = sw_budget_gross_plot[['movie_title_','gross']]\nsw_gross_plot = sw_gross.sort_index(ascending=False)\nax= sw_gross_plot.plot(kind='barh', x='movie_title_', y='gross', color='gold')\n\n\n# Set Title\nax.set_title('Star Wars Movies - Gross (in order of release date)')\n\n# Set x-axis label\nax.set_xlabel(\"Gross US & CANADA (in millions)\", labelpad=20, weight='bold', size=12)\n\n# Set y-axis label\nax.set_ylabel(\"Movie Title\", labelpad=20, weight='bold', size=12)\n\n# Set xticks for gross\nstart, end = ax.get_xlim()\nax.xaxis.set_ticks(np.arange(start, end, 1000000000))\nax.set_xticks([0, 100000000, 200000000, 300000000, 400000000, 500000000, 600000000, 700000000, 800000000,\n              900000000, 1000000000])\nax.set_xticklabels(['0', '100M', '200M', '300M', '400M', '500M', '600M', '700M', '800M', '900M', '1B'])\n\nplt.show()","6cac63c4":"import statistics\nmean_budget_originals = [11000000.0, 18000000.0, 32500000.0]\nmean_budget_prequels = [115000000.0, 115000000.0, 113000000.0]\nmean_budget_sequels = [245000000.0, 317000000.0]\n\norg_b = statistics.mean(mean_budget_originals) \npre_b = statistics.mean(mean_budget_prequels)\nseq_b = statistics.mean(mean_budget_sequels) \n\nprint(\"Mean Budget of Episodes IV, V, & VI :\", org_b)\nprint(\"Mean Budget of Episodes I, II, & III :\", pre_b)\nprint(\"Mean Budget of Episodes VII & VIII :\", seq_b)\n\nmean_gross_originals = [460935665.0, 290158751.0, 309125409.0]\nmean_gross_prequels = [474544677.0, 310675583.0, 380262555.0]\nmean_gross_sequels = [936662225.0, 620181382.0]\n\norg_g = statistics.mean(mean_gross_originals) \npre_g = statistics.mean(mean_gross_prequels)\nseq_g = statistics.mean(mean_gross_sequels) \n\nprint(\"Gross mean of Episodes IV, V, & VI :\", org_g)\nprint(\"Gross mean of Episodes I, II, & III :\", pre_g)\nprint(\"Gross mean of Episodes VII & VIII\", seq_g)\n\nnet_org = org_g - org_b\nnet_pre = pre_g - pre_b\nnet_seq = seq_g - seq_b\n\nprint(\"Mean Net Profit of Episodes IV, V, VI :\", net_org)\nprint(\"Mean Net Profit of Episodes I, II, III :\", net_pre)\nprint(\"Mean Net Profit of Episodes VII, VIII :\", net_seq)","bfc638d4":"# Import df for a scatter plot displaying budget vs. gross of all 8 movies\n\nax=sw_budget_gross_plot.plot(kind='scatter', x='budget', y='gross', color='#2E80D0')\nN=8\n\n# Set labels\nax.set_xlabel('Budget (millions)', labelpad=20, weight='bold', size=12)\nax.set_ylabel('Gross US & CANADA (millions)', labelpad=20, weight='bold', size=12)\nax.set_title('Star Wars Movies I-VIII - Budget vs. Gross')\n\n# Set xticks for budget\nax.set_xticks([0, 50000000, 100000000, 150000000, 200000000, 250000000, 300000000, 350000000])\nax.set_xticklabels(['0', '50M', '100M', '150M', '200M', '250M', '300M', '350M'])\n\n# Set yticks for gross\nax.set_yticks([0, 100000000, 200000000, 300000000, 400000000, 500000000, 600000000, 700000000, 800000000,\n              900000000, 1000000000])\nax.set_yticklabels(['0', '100M', '200M', '300M', '400M', '500M', '600M', '700M', '800M', '900M', '1B'])\n\n# Set legend\nax.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0.)\n\nplt.show()","c8fcdf4f":"# Import df for a stacked bar chart displaying discrepancy between budget and gross of all 8 movies\nax=sw_arranged\n\n# Identify the variables\nEpisode=['IV','V','VI','I','II', 'III', 'VII', 'VIII']\nBudget_Gross=['budget','gross']\npos = np.arange(len(Episode))\ny1= ax['budget']\ny2= ax['gross']\n\n# Plot a stacked barchart: bottom columns black for budget, top columns gold for gross\nplt.bar(pos, y1, color='black', label='budget')\nplt.bar(pos, y2, color='gold', bottom =y1, label = 'gross')\n\n# Set xticks for episode number and y ticks for budget\/gross values\nplt.xticks(pos, Episode)\nplt.yticks(np.arange(0, 1300000000, 100000000), ('0', '100M', '200M', '300M', '400M', '500M','600M', '700M', '800M', '900M', '1B', '1.1B', '1.2B', '1.3B'))\n# Set xlabels, ylabels, title labels, and legend\nplt.xlabel('Star Wars Episode', fontsize=16)\nplt.ylabel('Budget & Gross (in millions)', fontsize=14)\nplt.title('Budget vs. Gross of Star Wars Movies',fontsize=18)\nplt.legend(Budget_Gross,loc=2)\n\n\n\n\n\nplt.show()","93390559":"ax = sw_arranged.plot(kind='line', x='movie_title_', y='imdb_score', marker='o', color='#EB214F')\nN=8\n\nax.set_xlabel('Star Wars Episode ', labelpad=20, weight='bold', size=12)\nax.set_ylabel('IMDb Score (0-10)',  labelpad=20, weight='bold', size=12)\nax.set_title('Star Wars Movies IMDb Score')\n\nplt.xticks(pos, Episode)\nplt.yticks(np.arange(6, 10, 0.2), ('6.0', '6.2', '6.4', '6.6', '6.8', '7.0', '7.2', '7.4', '7.6', '7.8','8.0', '8.2', '8.4', '8.6', '8.8', '9.0', '9.2', '9.4', '9.6', '9.8', '10.0'))\n\n\nax = sw_arranged.plot(kind='line', x='movie_title_', y='gross', marker='o', color='#2E80D0')\nN=8\n\nax.set_xlabel('Star Wars Episode ', labelpad=20, weight='bold', size=12)\nax.set_ylabel('Gross US & CANADA (in millions)',  labelpad=20, weight='bold', size=12)\nax.set_title('Star Wars Movies Gross')\n\nplt.xticks(pos, Episode)\nplt.yticks(np.arange(0, 1000000000, 100000000), ('0', '100', '200', '300', '400', '500', '600', '700', '800', '900', '1B'))\n","fad201ba":"Ok perfect.  We are just about ready to start our analysis.  I decided to streamline the columns a little further so that only the columns we will use for analysis are present in the dataframe.  It's not something that is absolutely neccessary, but for simplicity sake we will do so.","198aea09":"Looks perfect, except that all of the movies have a question mark (?) at the end of their title.  It doesn't bother me so much to see it in the dataframe above, but when I tried to make my visualizations with the question marks present, it did not look so great. Thus, we will have to do some more df-manipulation to get it looking right.  The best way I could find to do so was to recreate the movie_title column as (movie_title_) and to rewrite the movie names without the question marks.  We can then drop the original movie_title column and re-arrange the columns so that movie_title_ is now in front.","61c07bb3":"In my love for Star Wars, in addition to my curiosity about the ratings and profit margins of Star Wars movies, I decided to analyze the imdb data for Episodes I-VIII.  Episode IX - The Rise of Skywalker will be the conclusion of a nine part saga consisting of three Star Wars Trilogies. Let us see if we can predict the gross and IMDb rating of Episode IX based on an analysis of the previous 8 movies.\n\nThe components I analyzed below are budget, gross, and imdb score. I wanted to see the individual budgets and gross of all 8 movies, the relationship between budget and gross, and the relationship between gross and IMDb score.  To note, IMDb scores are determined by taking a weighted average from all of the votes, ranging from 500,000 - 1 million votes per movie, cast by registered IMDb users.\n\nAlso to note, I chose to do my analysis based upon the unadjusted gross of each movie.  For example, Episode IV - A NEW HOPE was released in the year 1977 when the average box office ticket price was $2.23.  Whereas, Episode VIII - The Last Jedi was released in 2017 when the average ticket price was 9.11.  Star Wars Episode IV grossed about 461 million in 1977, but if we were to adjust the ticket price to a 2019 ticket price, then the gross for Episode IV would be 1.6 billion dollars, an amount almost 4x the unadjusted gross. The reason that I chose to keep my analysis unadjusted is that it looks better in the analysis to see the progression of gross over time.  Also, just because ticket prices are higher now, does not mean that the same amount of people would have gone to see each movie if it were to come out in 2019.  Given that many Americans have high definition flat screen TVs that stream netflix, hulu and amazon, not as many people value going to movie theatres as they did in the 70s and 80s.  Also, before smart phones people used to have more time on their hands and would do things like go back to see the same movie more than once at a theatre.  The adjusted gross values do not reflect any of these modern day tendencies and, therefore, in my opinion, are not a better assessment of the gross.\n\nTo make the most of this analysis, I recommend keeping the concept of ticket prices in the back of your mind, but enough out of the way to enjoy the simplicity of the unadjusted gross values.\n\nWith that, here is my analysis:","af8de4a7":"We can see how the budgets get progressively larger between each of the three trilogies. I am quite surprised to see that the prequels grossed about the same as the original trilogy, despite the fact that they came out some 16\u201322 years after Episode VI: Return of the Jedi. We would expect that with two generations of Star Wars fans in combination with higher box office ticket prices that the prequels would have grossed much more than the original trilogy.\n\nTo get a more accurate comparison of the gross of the prequels vs. the original trilogy, let's calculate the gross mean of all 3 trilogies along with the mean budget. From there we can assess the mean net profit.\n\nBelow is a print out of the calculated mean values.","9047b21a":"To start the analysis we will import a csv file containing movie metadata from IMDB.com.  The file contains data for over 5,000 movies.","6da78c4c":"The cluster of three on the left are Episodes IV, V, and VI, the original trilogy. The cluster of three in the middle of the plot is Episodes I, II, and III, the prequels. The two points in the top right corner are Episodes VII and VIII, the sequels.\n\nLike we determined in the summary statistics above, Episodes IV-VI appear to have grossed similarly to the prequels, but given their smaller budgets, had a significantly higher net profit than the prequels.\nIn the upper right corner, we have a very interesting distribution. Episode VII grossed nearly 1 billion dollars in the box office, with a 250 million dollar budget. Episode VII had more than twice the budget as the prequels and rightfully grossed more than twice the mean of the prequels. With three generations of Star Wars lovers who went to see Episode VII in the theater, we would have expected at least this much growth. \n\nSomething, however, went wrong with Episode VIII. We would have expected, based on the first two trilogies that Episode VIII would have clustered within a close vicinity of Episode VII. If you look closely, you will see that the budget was around 315 million for Episode VIII, about 65 million more than what was spent on Episode VII. It's quite possible that Disney decided to spend more on Episode VIII based on how well the previous movie did. However, Episode VIII grossed little more than 600 million, significantly less than Episode VII's 936.6 million.\nWe can see the relationships between budget and gross a little differently by a arranging the data in a stacked bar plot. Perhaps the Disney executives could have predicted Episode VIII's less than optimal gross by seeing the pattern set by the other two trilogies.","ed471f7a":"Ok great.  We have most of what we need, except that Episode VII - The Force Awakens is missing values and Episode VIII - The Last Jedi is not in the data set.  In addition, Star Wars - The Clone Wars is listed, which is a 3D animated movie that is not included in the trilogies.  We will thus drop it from our list.  There are two other Star Wars movies, \"Rogue One\", and \"Solo\", which we will not include in our analysis for the same reason that we are not including The Clone Wars.","9056fad0":"After dropping all of the rows that had missing values (Episode VII - The Force Awakens and The Clone Wars), I went to IMDB.com to get updated information for Episode VII and VIII.  We will manually add in those movies as 2 new rows with their respective column attributes.","dcae7725":"Now that we have our complete list of Star Wars movies with all of the necessary data, we need to reset the index to (0-7). Resetting the index makes plotting the movies in this specific order possible.","a5288c30":"The gross mean of the prequels was 388.5 million, only 35.1 million more than the gross mean of the original trilogy of 353.4 million.  That's about 10% growth.  Nonetheless, the mean net profit of the original trilogy, with their much lower budget, ended up greater than the prequels by about 58 million dollars.\n\nThe jump from the prequels to the sequels was substantially more, going from 388.5 million for Episodes I-III to 778.4 million for Episodes VII and VIII.  Thats 103% growth, more than double.\n\nLet us now plot the data in a scatter plot to get a deeper look at the relationship between budget and gross for all 8 movies.","bbb9ba80":"Time to start making some plots.  Let's start by making two horizontal bar plots, one for budget and one for gross. ","dbae7fd7":"We can really see the discrepancy between budget and gross in the stacked bar plot above. Look at Episode IV and how minuscule it's budget is compared to what it grossed.\n\nIn the bar plot we can also start to visualize a trend across all three trilogies that may help us to predict the outcome of Episode IX. It looks like the first episode of each trilogy grossed the most, followed by a dip in the second episode of each trilogy and some recovery in the third.\n\nIf we look at Episode VII and VIII, we also find part of a similar trend. From the trend we can make a prediction that Episode IX will gross somewhere between 600 million and 1 Billion dollars and have a budget somewhere between 250 and 350 million dollars.\n\nLet's now take a look to see if there is any correlation between movie ratings and gross by comparing line plots of these two variables.","174fcfb4":"We can see in the above data set that there are 5043 rows (movies) and 50 columns (movie title, director, release year, etc.).  For our purposes, we will select only Star Wars Movies and only the columns that we will be using for our analysis.  Then we will sort the selection of Star Wars movies by title year so that Episode IV is placed first.","57adaf86":"To get a sense of what our data file looks like, let us first take a peak at the first 5 rows.  Then we will print out information descrbing all of the columns of the data set.","0dbec1f4":"It's an interesting comparison. The points for Episodes IV-VI show an inverse relationship. Episode V, which had higher ratings than Episode IV, grossed less. Meanwhile Episode VI, which had lower ratings than episode V, grossed more. Episode I had the highest gross of all the prequels and had the lowest rating.\nIt's not until Episode II that we see a direct relationship between IMDb score and gross, which is visualized most dramatically between Episode VII and VIII.\n\nMy theory is that the novelty of the first episode of each trilogy generates more ticket sales than the second and third episodes. No matter what the rating of the second episode, it grosses less because the lack of novelty gives people the excuse to wait for the movie to come out on video or Netflix etc. When it comes to the third episode, the end of a trilogy, it generates a hype that is similar to the first episode, but to a lesser degree.\nIn addition to the second episode phenomenon, Episode VIII had lower than Episode VII. Nonetheless, it still followed the trend of the previous two trilogies only with more to lose.\n\nI look forward to the release Episode IX\u200a-\u200aThe Rise of Skywalker, for one to see if my predictions based on this analysis are correct, but more importantly because I love Star Wars and want to complete my own personal saga of viewership. It looks highly probable that the gross and IMDb score of Episode IX will be higher than Episode VIII, but not as high as Episode VII. But who knows, there could be all sorts of Star Wars fans that come out of the woodworks to the theater to prove my prediction wrong.\n\nI hope you have enjoyed. Stay tuned for more\u2026"}}