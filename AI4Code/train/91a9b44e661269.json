{"cell_type":{"7ddd2b27":"code","92ed5057":"code","374167e1":"code","fb5e3c1a":"code","4091c3bd":"code","24747844":"code","21b58dfc":"code","ed76dd40":"code","edd27f6c":"code","9c4fbaf2":"code","e92a7d8c":"code","77ccbd0c":"code","38127505":"code","7a08b88f":"code","f6ed2495":"code","5f4e138a":"code","0b12b053":"markdown","357c05bc":"markdown","50760f5b":"markdown","8e4dea73":"markdown","63882fd8":"markdown","e805989d":"markdown","49314a6a":"markdown","9f0f3121":"markdown","2b46fda2":"markdown","e87c4635":"markdown","fbb2f9d7":"markdown","4d86ddb0":"markdown","3ea7ba70":"markdown","7bb63816":"markdown"},"source":{"7ddd2b27":"## Importing relevante libraties to read structured data and plor graphs\n\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nsns.set()","92ed5057":"## SAving data into a variabl\n\ndf = pd.read_csv(\"..\/input\/honey-production\/honeyproduction.csv\") ## Saving the data into df\ndf.head(20)","374167e1":"df.state.count() ## Checking how many lines are on the dataset","fb5e3c1a":"## grouping data to answer questions\n\nyield_ = df['yieldpercol'].groupby(by=df['year']).sum() \nyield_.head()","4091c3bd":"## Plotting grouped data\n\nplt.figure(figsize=(15,10))\nsns.lineplot(x=yield_.index,y=yield_.values,label='Yield per colony')\nplt.title(\"Yield per colony\", size=20)\nplt.xlabel(\"Year\", size=18)\nplt.ylabel(\"Yield\", size = 18)","24747844":"state = df['totalprod'].groupby(by=df['state'], axis=0, sort=False).sum().sort_values(ascending=False)\nstate.head()","21b58dfc":"plt.figure(figsize=(15,10))\nsns.barplot(x=state.index,y=state.values) ## Barplot is useful, when we have categories, such as state\nplt.title(\"Produced per State\", size=20)\nplt.xlabel(\"State\", size=18)\nplt.ylabel(\"Produced\", size = 18)","ed76dd40":"state1998 = df['totalprod'].groupby(by=df['state'].loc[df['year']==1998], axis=0).sum()\nstate_1998 = pd.DataFrame({'State_1998':state1998.index,'Total_Produced_1998':state1998.values})\n## Grouping the data and creating a dataframe with it!\nstate_1998.tail(10)","edd27f6c":"state2012 = df['totalprod'].groupby(by=df['state'].loc[df['year']==2012], axis=0).sum() \nstate_2012 = pd.DataFrame({'State_2012':state2012.index,'Total_Produced_2012':state2012.values})\n## Grouping the data and creating a dataframe with it!\nstate_2012.tail(10)","9c4fbaf2":"## Checking states in each dataset\nprint(state_1998['State_1998'].unique())\nprint(state_2012['State_2012'].unique())","e92a7d8c":"## Adding the missing states to the 2012 dataset\n\nmissing = pd.DataFrame({'State_2012':['MD','NV', 'OK'], 'Total_Produced_2012':[0,0,0]})\nstate_2012 = state_2012.append(missing, ignore_index=True)\nstate_2012.tail(10)","77ccbd0c":"states = list(state_1998['State_1998']) ## We will iterate over the list of states\nabsolute_difference = [] ## Creating a list to add the absolute difference for \nmost_change = 0 ## We'll need to initialize a variable with the most change, if we don't\n                ## initialize, there will be no initial variable to compare in the if.\nmost_change_index = 0 \n\nfor i in states:\n    index_x = state_1998['Total_Produced_1998'].loc[state_1998['State_1998']==i].index\n    index_y = state_2012['Total_Produced_2012'].loc[state_2012['State_2012']==i].index\n    \n    ## Since the states are not aligned, for example, WY in index 39 in 1998 and index 42 in 2012, we'll first \n    ## extract the index the state, then we'll extract this value below, we'll then calculate the differences.\n    \n    value_1998 = float(state_1998['Total_Produced_1998'][index_x])\n    value_2012 = float(state_2012['Total_Produced_2012'][index_y])\n    difference = value_2012 - value_1998  ## If the farm produced more honey in 2012, than in 1998, this will be positive\n    absolute_difference.append(difference)\n   \n    ## Now that we're calculating the absolutes, we'll create an if to update the most change in honey yield\n    \n    if abs(difference) > abs(most_change):\n        most_change =  difference  ## Every time the absolute difference is bigger than the current absolute most_change,\n                                   ## the current value of the most_change will be updates, easy to perform! \n                                   ## remember that we need to use absolute in both cases, as the values of most change, \n                                   ## may negative as well, after an update\n        most_change_index = index_y\n        \nprint(\"The state with most honey production change is\", state_1998['State_1998'][most_change_index].values,\n      \"with a decrease of\", most_change,\"production\")","38127505":"yield_2006 = df['yieldpercol'].loc[df['year']<2007].groupby(by=df['year']).sum() \nyield_2006.head()","7a08b88f":"plt.figure(figsize=(15,10))\nsns.regplot(x=yield_2006.index,y=yield_2006.values)\nplt.title(\"Yield per colony before 2006\", size=20)\nplt.xlabel(\"Year\", size = 15)\nplt.ylabel(\"Yield\", size = 15)","f6ed2495":"plt.figure(figsize=(15,10))\nplt.plot(df['priceperlb'].groupby(by=df['year']).sum())\nplt.title(\"Price per lb of honey\", size=20)\nplt.xlabel(\"Year\", size = 15)\nplt.ylabel(\"Price\", size = 15)","5f4e138a":"plt.figure(figsize=(15,10))\nplt.plot(df['prodvalue'].groupby(by=df['year']).sum())\nplt.title(\"Produced value of honey\", size=20)\nplt.xlabel(\"Year\", size = 15)\nplt.ylabel(\"Price\", size = 15)","0b12b053":"If you want to see more in depth thoughts on this analysis, please visit my blog: https:\/\/datasciencerecruit.com\/","357c05bc":"We're also going to answer these questions:\n\n- How has honey production yield changed from 1998 to 2012?\n- Over time, which states produce the most honey? Which produce the least? Which have experienced the most change in honey yield?\n- Does the data show any trends in terms of the number of honey producing colonies and yield per colony before 2006, which was when concern over Colony Collapse Disorder spread nationwide?\n- Are there any patterns that can be observed between total honey production and value of production every year? How has value of production, which in some sense could be tied to demand, changed every year?","50760f5b":"We saw that the production is decreasing year by year, if the demand is the same, the price will go up. This can be seen in the above graphic","8e4dea73":" - We see that there are missing states in 2012 dataset, maybed they stopped producing honey. We'll try to add them and sort by state again. We'll add these states with a value of 0.","63882fd8":"- We see that the produced value is tied with the Yield per colony and the price per lb. When there's a decrease in Yield, but a increse in price, the price will adjust. For example, let's look into the years 2001-2003 and 2003-2005.\n\n- From 2001-2003, there was a huge increase in value. We didn't see a significant decrease in Yield, but the price skyrocket!\n\n- From 2003-2005, the price decrease (not to the same level of 2001), as well as the yield, so the produced value decrease a lot.\n\n-  During the next years, we see a continous decrease of yield and a continuous increase in price per lb, but the tendency of the produced value is to always increase.","e805989d":"## Are there any patterns that can be observed between total honey production and value of production every year? How has value of production, which in some sense could be tied to demand, changed every year?","49314a6a":"## Which have experienced the most change in honey yield?","9f0f3121":"- There's a strong tendency of decrease, this can be seen by plotting the data point and fitting a linear regression in it with seaborn regplot.","2b46fda2":"## Over time, which states produce the most honey? Which produce the least? ","e87c4635":"* numcol: Number of honey producing colonies. Honey producing colonies are the maximum number of colonies from which honey was taken during the year. It is possible to take honey from colonies which did not survive the entire year\n* yieldpercol: Honey yield per colony. Unit is pounds\n* totalprod: Total production (numcol x yieldpercol). Unit is pounds\n* stocks: Refers to stocks held by producers. Unit is pounds\n* priceperlb: Refers to average price per pound based on expanded sales. Unit is dollars.\n* prodvalue: Value of production (totalprod x priceperlb). Unit is dollars.\n* Other useful information: Certain states are excluded every year (ex. CT) to avoid disclosing data for individual operations. Due to rounding, total colonies multiplied by total yield may not equal production. Also, summation of states will not equal U.S. level value of production.","fbb2f9d7":"## How has honey production yield changed from 1998 to 2012?","4d86ddb0":"## Does the data show any trends in terms of the number of honey producing colonies and yield per colony before 2006, which was when concern over Colony Collapse Disorder spread nationwide?","3ea7ba70":"- For this, we'll need to plot from 1998 to 2006. That's easy, we group the data for all years before 2007","7bb63816":"- We are missing MD, NV, and OK"}}