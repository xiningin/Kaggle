{"cell_type":{"6a1dec6c":"code","39bb723f":"code","9854605c":"code","95f2a2bd":"code","3d2a5029":"code","25d76a3a":"code","fb87e29f":"code","d1fb1b28":"code","a1c6ce10":"markdown","0b7bfff0":"markdown","8087d854":"markdown","b8f852e1":"markdown","9b564b60":"markdown"},"source":{"6a1dec6c":"import pandas as pd\n\nimport riiideducation","39bb723f":"# You can only call make_env() once, so don't lose it!\nenv = riiideducation.make_env()","9854605c":"train_df = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/train.csv',\n                       low_memory=False,\n                       nrows=10**6,\n                       dtype={'row_id': 'int64',\n                              'timestamp': 'int64',\n                              'user_id': 'int32',\n                              'content_id': 'int16',\n                              'content_type_id': 'int8',\n                              'task_container_id': 'int16',\n                              'user_answer': 'int8',\n                              'answered_correctly': 'int8',\n                              'prior_question_elapsed_time': 'float32',\n                              'prior_question_had_explanation': 'boolean',\n                             }\n                      )","95f2a2bd":"train_df.info()","3d2a5029":"train_df.memory_usage()","25d76a3a":"train_df.memory_usage().plot.barh()","fb87e29f":"train_df = pd.read_csv('\/kaggle\/input\/riiid-test-answer-prediction\/train.csv',\n                       low_memory=False,\n                       nrows=10**6,\n                       usecols=['content_id', 'answered_correctly'],\n                       dtype={'content_id': 'int16', 'answered_correctly': 'int8'}\n                      )","d1fb1b28":"train_df.info()","a1c6ce10":"If you only use specific columns like notebook I published, you can filter columns by `usecols`.\n\nhttps:\/\/www.kaggle.com\/sishihara\/riiid-answered-correctly-benchmark","0b7bfff0":"The momory usage was reduced to 2.9M. This means that you can increase the size of `nrows`.\n\nAnd another options is use proper type in `dtype` which we can see from the results of `memory_usage()`.","8087d854":"At the end of the log, we can see that memory usage is 31.5MB.\n\n>memory usage: 31.5 MB","b8f852e1":"We can see the results for each column by `momory_usage()`. `row_id` and `timestamp` use much more memory than others.","9b564b60":"In this competition, many participants face difficulties in handling large size `train.csv`. We have to use Kaggle Notebook env and its RAM is 16GB.\n\nIn this notebook, I introduce `pandas.DataFrame.memory_usage()` and how to filter columns when loading."}}