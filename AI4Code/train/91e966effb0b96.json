{"cell_type":{"4e4b2d44":"code","9a68dd5b":"code","400db1b9":"code","b2f9145a":"code","9615fbe2":"code","d79f67f2":"code","b0643739":"code","45e6197f":"code","9614b7f2":"code","91cb7b2c":"code","fee7a95c":"code","e2a5bc45":"code","c8881322":"code","df9bd2d4":"code","bba0d1f6":"code","d6b2da1b":"code","844f497e":"code","181d7220":"code","d829f204":"code","f412d089":"code","8a77fef7":"code","2404a2a4":"code","207e5e5f":"code","17b0f84d":"code","455df564":"code","992b552a":"code","e65a3d26":"code","2b5c4ea5":"code","62b1f812":"code","46a14c08":"code","f29f329b":"code","274b038c":"code","020565cd":"code","cb54cdeb":"code","bf71fcbf":"code","1508a68c":"code","a4741e09":"code","de1d35bc":"code","25d8d51d":"code","2c12d527":"code","f56b52f0":"code","a6746003":"code","cc131190":"code","7229b68b":"code","db0365f9":"code","bc20e528":"code","38ae389a":"code","96af9eda":"code","feebcf90":"code","16d40c1e":"code","2e911ea8":"markdown","7c173b3e":"markdown","245bc08a":"markdown","d4f3453b":"markdown","b2de5b35":"markdown","edb41c01":"markdown","ed0e0e44":"markdown","70ded1a3":"markdown","dc8c9da9":"markdown","5c6ee2a4":"markdown","b75dec37":"markdown","f4d21b83":"markdown","787185a7":"markdown","c5929b33":"markdown","1deeb57f":"markdown","260a3f92":"markdown","97c2b771":"markdown","13273a66":"markdown","2f7baf06":"markdown"},"source":{"4e4b2d44":"import pandas as pd\nimport numpy as np\nimport math\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly","9a68dd5b":"sns.set(style='darkgrid')\n\ndef get_label(g):\n  for p in g.patches:\n    height = p.get_height()\n    g.text(p.get_x()+p.get_width()\/2.,\n            height\/2,\n            '{}'.format(round(height)),\n            ha=\"center\", color='white')","400db1b9":"new_york = pd.read_csv('..\/input\/explore-bike-share-data\/new_york_city.csv')\nwashington = pd.read_csv('..\/input\/explore-bike-share-data\/washington.csv')\nchicago = pd.read_csv('..\/input\/explore-bike-share-data\/chicago.csv')","b2f9145a":"new_york.head()","9615fbe2":"#Befere merge, i will creare a new column to identify which citie the dataset belongs \nnew_york['location'] = 'New York'\nwashington['location'] = 'Washington, D.C.'\nchicago['location'] = 'Chicago'","d79f67f2":"df_all = pd.merge(new_york, washington, how='outer')\ndf = pd.merge(chicago, df_all, how='outer')","b0643739":"df.sample(5)","45e6197f":"print('number of rows: {}'. format(df.shape[0])) \nprint('number of cols: {}'. format(df.shape[1]))","9614b7f2":"df['Start_date'] = pd.to_datetime(df['Start Time'])\ndf['End_date'] = pd.to_datetime(df['End Time'])","91cb7b2c":"#Drop irrelevant columns\ndf.drop(['Unnamed: 0', 'Start Time', 'End Time'], axis=1, inplace=True)","fee7a95c":"#Ordering\ndf = df[['location', 'Start_date', 'End_date', 'Trip Duration', 'Start Station', 'End Station', 'User Type', 'Gender','Birth Year']]","e2a5bc45":"cols = ['location', 'Start_date', 'End_date', 'Trip_Duration', 'Start_station', 'End_Station', 'User_Type', 'Gender','Birth_Year']\ndf.columns = map(str.lower, cols)","c8881322":"df.isna().sum()","df9bd2d4":"df.head()","bba0d1f6":"df.dtypes","d6b2da1b":"df['start_date'] = pd.to_datetime(df['start_date'])\ndf['end_date'] = pd.to_datetime(df['end_date'])","844f497e":"df1 = df.copy()","181d7220":"month_map = {1: 'Jan', 2: 'Feb', 3: 'Mar', 4: 'Apr', 5: 'May', 6: 'Jun', 7: 'Jul', 8: 'Aug', 9: 'Sept', 10: 'Oct', 11: 'Nov', 12: 'Dec'}\n\ndf1['month_Trip'] = df1['start_date'].dt.month.map(month_map)\n\nday_week = {0: 'Monday', 1: 'Tuesday', 2: 'Wednesday', 3: 'Thursday', 4: 'Friday', 5: 'Saturday', 6: 'Sunday'}\n\ndf1['day_week'] = df1['start_date'].dt.weekday.map(day_week)\n\n#I will create a new column with the concatenation of Start Station and End Station to compare completed trips\ndf1['full_trip'] = df1[['start_station', 'end_station']].agg(' at '.join, axis=1)","d829f204":"df2 = df1.copy()","f412d089":"df2.sample()","8a77fef7":"plt.figure(figsize=[15,9])\nsns.countplot(x=df2['month_Trip'], hue=df2['location']);","2404a2a4":"plt.figure(figsize=[15,9])\nsns.countplot(x=df2['day_week'], hue=df2['location']);","207e5e5f":"plt.figure(figsize=[20,9])\nsns.countplot(x=df2['start_date'].dt.hour, hue=df2['location']);","17b0f84d":"plt.figure(figsize=[20,9])\nsns.countplot(x=df2['end_date'].dt.hour, hue=df2['location']);","455df564":"df.sample()","992b552a":"mask_df = (df2['location'] != 'Washington, D.C.')\ndf_nychicago = df2.loc[mask_df]","e65a3d26":"plt.figure(figsize=[15,5])\nsns.countplot(x='user_type', hue='location', data=df2);\nplt.xlabel(\"User Type\");\nplt.title('Counts of each user type')","2b5c4ea5":"plt.figure(figsize=[15,5])\ng = sns.countplot(x='gender', hue='location', data=df_nychicago);\nplt.xlabel(\"Gender\");\nplt.title('Counts of each gender');\nget_label(g)","62b1f812":"df_nychicago['birth_year'].min()","46a14c08":"plt.figure(figsize=[15,5])\nsns.boxplot(x='birth_year', data=df_nychicago, hue='location')\nplt.xlabel(\"Birth year\");","f29f329b":"# Filter to each citie\nmask_ny = (df2['location'] == 'New York')\ndf_ny = df2.loc[mask_ny]","274b038c":"df_ny.sample()","020565cd":"#get 10 most frequency to Start Station and End Station\nfreq_start = df_ny.groupby(\"start_station\")['start_station'].count().nlargest(10)\nfreq_end = df_ny.groupby(\"end_station\")['end_station'].count().nlargest(10)\nfreq_full_trip = df_ny.groupby(\"full_trip\")['full_trip'].count().nlargest(10)","cb54cdeb":"g = freq_start.plot(kind='bar',figsize=[15,5])\nplt.title('10 Start Station most common - New York')\nplt.xlabel('Start Station')\nplt.ylabel(\"Trips\")\nget_label(g)","bf71fcbf":"g = freq_end.plot(kind='bar',figsize=[15,5])\nplt.title('10 End Station most common - New York')\nplt.xlabel('End Station')\nplt.ylabel(\"Trips\")\nget_label(g)","1508a68c":"g = freq_full_trip.plot(kind='bar',figsize=[15,5], )\nplt.title('10 full trip most common - New York')\nplt.xlabel('Full Trip')\nplt.ylabel(\"Trips\")\nget_label(g)","a4741e09":"avarege_travel_ny = (df_ny['trip_duration'].sum() \/ len(df_ny)) \/ 60\nprint('Avarege Travel time: {} minutes'.format(round(avarege_travel_ny)))","de1d35bc":"mask_Wdc = (df2['location'] == 'Washington, D.C.')\ndf_wdc = df2.loc[mask_Wdc]","25d8d51d":"df_wdc.sample()","2c12d527":"#get 10 most frequency to Start Station and End Station\nfreq_start_wdc = df_wdc.groupby(\"start_station\")['start_station'].count().nlargest(10)\nfreq_end_wdc = df_wdc.groupby(\"end_station\")['end_station'].count().nlargest(10)\nfreq_full_trip_wdc = df_wdc.groupby(\"full_trip\")['full_trip'].count().nlargest(10)","f56b52f0":"g = freq_start_wdc.plot(kind='bar',figsize=[15,5])\nplt.title('10 Start Station most common - Washington, D.C.')\nplt.xlabel('Start Station')\nplt.ylabel(\"Trips\")\nget_label(g)","a6746003":"g = freq_end_wdc.plot(kind='bar',figsize=[15,5])\nplt.title('10 End Station most common - Washington, D.C.')\nplt.xlabel('Start Station')\nplt.ylabel(\"Trips\")\nget_label(g)","cc131190":"g = freq_full_trip_wdc.plot(kind='bar',figsize=[15,5])\nplt.title('10 full trip most common - Washington, D.C.')\nplt.xlabel('Full Trip')\nplt.ylabel(\"Trips\")\nget_label(g)","7229b68b":"#avarege_travel_wdc = (df_wdc['trip_duration'].sum() \/ len(df_wdc)) \/ 60\navarege_travel_wdc = (df_wdc['trip_duration'].mean()) \/ 60\nprint('Avarege Travel time: {} minutes'.format(round(avarege_travel_wdc)))","db0365f9":"mask_ccg = (df2['location'] == 'Chicago')\ndf_chicago = df2.loc[mask_ccg]","bc20e528":"#get 10 most frequency to Start Station and End Station\nfreq_start_ccg = df_chicago.groupby(\"start_station\")['start_station'].count().nlargest(10)\nfreq_end_ccg = df_chicago.groupby(\"end_station\")['end_station'].count().nlargest(10)\nfreq_full_trip_ccg = df_chicago.groupby(\"full_trip\")['full_trip'].count().nlargest(10)","38ae389a":"g = freq_start_ccg.plot(kind='bar',figsize=[15,5])\nplt.title('10 Start Station most common - Chicago')\nplt.xlabel('Start Station')\nplt.ylabel(\"Trips\")\nget_label(g)","96af9eda":"g = freq_end_ccg.plot(kind='bar',figsize=[15,5])\nplt.title('10 End Station most common - Chicago')\nplt.xlabel('End Station')\nplt.ylabel(\"Trips\")\nget_label(g)","feebcf90":"g = freq_full_trip_ccg.plot(kind='bar',figsize=[15,5])\nplt.title('10 Full Trip most common - Chicago')\nplt.xlabel('Full Trip')\nplt.ylabel(\"Trips\")\nget_label(g)","16d40c1e":"#avarege_travel_wdc = (df_wdc['trip_duration'].sum() \/ len(df_wdc)) \/ 60\navarege_travel_ccg = (df_chicago['trip_duration'].mean()) \/ 60\nprint('Avarege Travel time: {} minutes'.format(round(avarege_travel_ccg)))","2e911ea8":"**The most used time is in the morning (between 6 and 8 am) and in the afternoon (between 4 pm and 6 pm), which is known as the peak time.**","7c173b3e":"## **USER INFO**\n\n1. counts of each user type\n2. counts of each gender (only available for NYC and Chicago)\n3. earliest, most recent, most common year of birth (only available for NYC and Chicago)\n","245bc08a":"# **WASHINGTON, D.C.**","d4f3453b":"# **LOADING DATA**","b2de5b35":"**I'm a beginner, forgive the mistakes.**","edb41c01":"## **Popular stations and trip**\n\n1. most common start station\n2. most common end station\n3. most common trip from start to end (i.e., most frequent combination of start)\n\nstation and end station)","ed0e0e44":"## **DataTypes**","70ded1a3":"# **EXPLORATORY DATA ANALYSIS**","dc8c9da9":"## **Data Dimesion**","5c6ee2a4":"# **DATA DESCRIPTION**","b75dec37":"HAS MANY OUTLIERS IN THE DATA SET","f4d21b83":"# **IMPORTS**","787185a7":"# **NEW YORK**","c5929b33":"## **Rename Columns**","1deeb57f":"# **CHICAGO**","260a3f92":"**I THINK IT DOESN'T MAKE SENSE TO EVALUATE THE TRIPS OF THE 3 CITIES TOGETHER, SO I WILL DO A SEPARATE ANALYSIS FOR EACH CITY**","97c2b771":"# **FEATURE ENGINEERING**","13273a66":"## **Check NA**","2f7baf06":"## **Popular times of travel (i.e., occurs most often in the start time)**\n\n1. most common month\n2. most common day of week\n3. most common hour of day"}}