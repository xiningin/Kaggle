{"cell_type":{"e57c73b2":"code","5f56da0c":"code","47202495":"code","447c320d":"code","908d0cc9":"code","c500550b":"code","5d9974db":"code","cbc5a92f":"code","085c7cf0":"code","a2dab457":"code","bc8ebfcf":"code","0eb55add":"code","232efcd8":"code","f13a8b07":"code","c6191110":"code","dc1bc7d9":"code","7ce4d865":"code","ea62d48c":"code","1c56411c":"code","d1f93c07":"code","d3e398f3":"code","03ad0211":"code","8896f7ab":"code","821ec22e":"code","1ad82f2d":"code","2be6f608":"code","e4bfc598":"code","9e1aeb3f":"code","7aee51d6":"code","55458507":"code","6a23a8d7":"code","6677861a":"code","46e6dec2":"code","6c1b2ae7":"code","05429614":"code","733126b0":"code","a911d699":"code","2e93910f":"code","69dcaf6d":"code","b4b4a808":"markdown","cde06d9e":"markdown","60159dc4":"markdown","ac5a01dd":"markdown","82b98eff":"markdown","fcbc03f3":"markdown","e3a45989":"markdown","7b7ef32a":"markdown","5194aef4":"markdown","24cc7a46":"markdown"},"source":{"e57c73b2":"# ben\u00f6tigte bibliotheken\n\nimport pandas as pd\nimport seaborn as sns\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom wordcloud import WordCloud, ImageColorGenerator\nfrom PIL import Image","5f56da0c":"# Texte aus dem Blog (hier: manuel in eine txt-Datei kopiert). \n# Es kommt ein String raus.\n\npapa_blog_str = open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/papaBlog2020.txt', 'r', encoding=\"utf8\").read()\npapa_blog_str","47202495":"# Texte vom Facebook (hier: manuel in eine txt-Datei kopiert. Besser w\u00e4re es einen Web-Crowler zu schreiben. \n# Folgt n\u00e4chstes Jahr). Es kommt auch als String raus.\n\npapa_fb_str = open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/papaFacebook2020.txt', 'r', encoding=\"utf8\").read()","447c320d":"# Die beiden Strings zusammenf\u00fchren\n\na = \"\"\nmyTuple = (papa_blog_str, papa_fb_str)\npapa_str = a.join(myTuple)\npapa_str","908d0cc9":"# Erstellen einer eifachen Wortwolke\n\npapa_wc = WordCloud(\n    background_color='white',\n    max_words=len(papa_str),   # Anzahl der W\u00f6rter f\u00fcr die Wortwolke entspricht der L\u00e4nge des Strings\n    collocations=False\n).generate(papa_str) ","c500550b":"# Drucken der Wortwolke\n\nplt.imshow(papa_wc, interpolation='bilinear')\nplt.axis('off')\nplt.show()","5d9974db":"# string in list umwandeln\n\nliste = papa_str.split(' ')\nliste[:10]","cbc5a92f":"# Liste nach Wortl\u00e4nge sortieren um die 'zusammengeklebte' W\u00f6rter zu finden \n\ndef myFunc(e):\n  return len(e)\n\nliste.sort(key=myFunc, reverse=True)\nliste[:100]","085c7cf0":"len(liste)","a2dab457":"# Liste der Stopwords mit Sonderzeichen importieren\n\nimport codecs\nfile1= codecs.open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/stopwords-char.txt','r','utf8')\ncontent=file1.read()\nstopwords_char=content.split()\nfor x in stopwords_char:\n    print(x)\nfile1.close()","bc8ebfcf":"# Daten bereinigen 1\n# erstellen eine neue Liste aus W\u00f6rtern ohne Sonderzeichen.\n\npapa_without_stopwords = [word for word in liste if word not in stopwords_char]\nlen(papa_without_stopwords)\n\n# Check: Anzahl der W\u00f6rter ist kleiner geworden","0eb55add":"# Liste der Stopwords f\u00fcr die russische Sprache importieren\n\nimport codecs\nfile1= codecs.open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/stopwords-ru.txt','r','utf8')\ncontent=file1.read()\nstopwords_russian=content.split()\nfor x in stopwords_russian:\n    print(x)\nfile1.close()","232efcd8":"# Daten bereinigen 2\n# erstellen eine neue Liste aus W\u00f6rtern, die nicht in Stopwords enthalten sind.\n\npapa_without_stopwords2 = [word for word in papa_without_stopwords if word not in stopwords_russian]\nlen(papa_without_stopwords2)\n\n# Check: Anzahl der W\u00f6rter ist kleiner geworden","f13a8b07":"# Liste der Stopwords gro\u00df schreiben um W\u00f6rter am Satzanfang, wie \"A\", \"\u0423\", \"\u042f\" rauszunehmen.\n\nstopwords_russian_upper = [x.upper() for x in stopwords_russian]\nstopwords_russian_upper","c6191110":"# Daten bereinigen 3\n# erstellen eine neue Liste aus W\u00f6rtern, die nicht in Stopwords enthalten sind.\n\npapa_without_stopwords3 = [word for word in papa_without_stopwords2 if word not in stopwords_russian_upper]\nlen(papa_without_stopwords3)\n\n# Check: Anzahl der W\u00f6rter ist noch ein Tick kleiner geworden","dc1bc7d9":"papa_without_stopwords3","7ce4d865":"# convert list into string\n\none_string_without_stopwords = ' '.join(papa_without_stopwords3)\none_string_without_stopwords","ea62d48c":"len(one_string_without_stopwords)","1c56411c":"# Daten bereinigen 4\n\none_string_without_stopwords2 = one_string_without_stopwords.replace('\\n', ' ').replace('https:\/\/', ' ')\\\n.replace('\u00ab', ' ').replace('\u00bb', ' ').replace('\"', ' ').replace('(', ' ').replace(')', ' ').replace('_', ' ')\\\n.replace('.', ' ').replace(',', ' ').replace('!', ' ').replace('?', ' ').replace('\\xa0', ' ').replace(':', ' ')\\\n.replace('--', ' ').replace('%', ' ').replace('  ', ' ')\none_string_without_stopwords2","d1f93c07":"len(one_string_without_stopwords2)","d3e398f3":"# Erstellen einer eifachen Wortwolke\n\npapa_wc2 = WordCloud(\n    background_color='white',\n    max_words=len(one_string_without_stopwords2),   # Anzahl der W\u00f6rter f\u00fcr die Wortwolke entspricht der L\u00e4nge des Strings\n    collocations=False\n).generate(one_string_without_stopwords2) \n\n# Drucken die Wortwolke\n\nplt.imshow(papa_wc2, interpolation='bilinear')\nplt.axis('off')\nplt.show()","03ad0211":"# string in list umwandeln\n\nliste = one_string_without_stopwords2.split(' ')\nliste[:10]","8896f7ab":"len(liste)","821ec22e":"# f\u00fcr jedes Wort in der Liste der Stopwords die erste Buchstabe klein und gro\u00df geschrieben\n\nstopwords_russian_up = [x[:1].upper()+x[1:] for x in stopwords_russian]\nstopwords_russian_up","1ad82f2d":"# Daten bereinigen 5\n# erstellen eine neue Liste aus W\u00f6rtern, die nicht in Stopwords enthalten sind.\n\npapa_without_stopwords5 = [word for word in liste if word not in stopwords_russian_up]\nlen(papa_without_stopwords5)\n\n# Check: Anzahl der W\u00f6rter ist noch ein Tick kleiner geworden","2be6f608":"# Daten bereinigen 6\n# noch mal durch die Stopwords jagen, da die vorherige Transaktion neue W\u00f6rter erstellen lie\u00df.\n\npapa_without_stopwords6 = [word for word in papa_without_stopwords5 if word not in stopwords_russian]\nlen(papa_without_stopwords6)\n\n# Check: Anzahl der W\u00f6rter ist kleiner geworden","e4bfc598":"# Liste mit aufbereiteten Daten zur\u00fcck in String umwandeln\n\none_string_without_stopwords3 = ' '.join(papa_without_stopwords6)\none_string_without_stopwords3","9e1aeb3f":"# Visueller Check: Erstellen einer eifachen Wortwolke\n\npapa_wc3 = WordCloud(\n    background_color='white',\n    max_words=len(one_string_without_stopwords3),   # Anzahl der W\u00f6rter f\u00fcr die Wortwolke entspricht der L\u00e4nge des Strings\n    collocations=False\n).generate(one_string_without_stopwords3) \n\n# Drucken die Wortwolke\n\nplt.imshow(papa_wc3, interpolation='bilinear')\nplt.axis('off')\nplt.show()","7aee51d6":"# Daten bereinigen 7\n# W\u00f6rter manuell anpassen\n\none_string_without_stopwords4 = one_string_without_stopwords3.replace('\u0433\u043e\u0434\u0443', '\u0433\u043e\u0434').replace('\u0433\u043e\u0434\u0430', '\u0433\u043e\u0434').replace('\u0433\u043e\u0434\u043e\u043c', '\u0433\u043e\u0434').replace('\u0433\u043e\u0434\u0435', '\u0433\u043e\u0434')\\\n.replace('\u0436\u0438\u0437\u043d\u0438', '\u0436\u0438\u0437\u043d\u044c').replace('\u0436\u0438\u0437\u043d\u044c\u044e', '\u0436\u0438\u0437\u043d\u044c')\\\n.replace('\u041c\u0430\u0440\u043a\u0441\u0430', '\u041c\u0430\u0440\u043a\u0441').replace('\u041c\u0430\u0440\u043a\u0441\u0443', '\u041c\u0430\u0440\u043a\u0441').replace('\u041c\u0430\u0440\u043a\u0441\u043e\u043c', '\u041c\u0430\u0440\u043a\u0441')\\\n.replace('\u043a\u043d\u0438\u0433\u0443', '\u043a\u043d\u0438\u0433\u0430').replace('\u043a\u043d\u0438\u0433\u0435', '\u043a\u043d\u0438\u0433\u0430').replace('\u043a\u043d\u0438\u0433\u0438', '\u043a\u043d\u0438\u0433\u0430').replace('\u043a\u043d\u0438\u0433\u0430\u043c\u0438', '\u043a\u043d\u0438\u0433\u0430').replace('\u043a\u043d\u0438\u0433\u043e\u0439', '\u043a\u043d\u0438\u0433\u0430')\\\n.replace('\u0440\u043e\u043c\u0430\u043d\u0430', '\u0440\u043e\u043c\u0430\u043d').replace('\u0440\u043e\u043c\u0430\u043d\u0443', '\u0440\u043e\u043c\u0430\u043d').replace('\u0440\u043e\u043c\u0430\u043d\u043e\u043c', '\u0440\u043e\u043c\u0430\u043d').replace('\u0440\u043e\u043c\u0430\u043d\u0435', '\u0440\u043e\u043c\u0430\u043d')\\\n.replace('\u0438\u0441\u0442\u043e\u0440\u0438\u0438', '\u0438\u0441\u0442\u043e\u0440\u0438\u044f').replace('\u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439', '\u0438\u0441\u0442\u043e\u0440\u0438\u044f').replace('\u0438\u0441\u0442\u043e\u0440\u0438\u044e', '\u0438\u0441\u0442\u043e\u0440\u0438\u044f').replace('\u0438\u0441\u0442\u043e\u0440\u0438\u0439', '\u0438\u0441\u0442\u043e\u0440\u0438\u044f').replace('\u0438\u0441\u0442\u043e\u0440\u0438\u044f\u043c\u0438', '\u0438\u0441\u0442\u043e\u0440\u0438\u044f')\\\n.replace('\u041f\u0443\u0442\u0438\u043d\u0430', '\u041f\u0443\u0442\u0438\u043d').replace('\u041d\u0430\u0432\u0430\u043b\u044c\u043d\u043e\u0433\u043e', '\u041d\u0430\u0432\u0430\u043b\u044c\u043d\u044b\u0439').replace('\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430', '\u0447\u0435\u043b\u043e\u0432\u0435\u043a').replace('\u0432\u043e\u0439\u043d\u044b', '\u0432\u043e\u0439\u043d\u0430')\\\n.replace('\u043c\u0438\u0440\u0430', '\u043c\u0438\u0440').replace('\u043c\u0438\u0440\u0443', '\u043c\u0438\u0440').replace('\u043c\u0438\u0440\u043e\u043c', '\u043c\u0438\u0440').replace('\u043c\u0438\u0440\u043e\u0432', '\u043c\u0438\u0440')\\\n.replace('\u041c\u043e\u0441\u043a\u0432\u0435', '\u041c\u043e\u0441\u043a\u0432\u0430').replace('\u042d\u043d\u0433\u0435\u043b\u044c\u0441\u0430', '\u042d\u043d\u0433\u0435\u043b\u044c\u0441')","55458507":"# der letzte Schliff\n\none_string_without_stopwords5 = one_string_without_stopwords4.replace('\u041f\u0440\u0438\u0447\u0435\u043c', '')\\\n.replace('\u0447\u0442\u043e', '').replace('-\u0442\u043e', '')","6a23a8d7":"# visuelle Inspektion\n\npapa_wc4 = WordCloud(\n    background_color='white',\n    max_words=len(one_string_without_stopwords5),   # Anzahl der W\u00f6rter f\u00fcr die Wortwolke entspricht der L\u00e4nge des Strings\n    collocations=False\n).generate(one_string_without_stopwords5) \n\n# Drucken die Wortwolke\n\nplt.imshow(papa_wc4, interpolation='bilinear')\nplt.axis('off')\nplt.show()","6677861a":"# Portr\u00e4t laden\n\npapa_mask=np.array(Image.open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/papaFoto.png'))\n","46e6dec2":"# Optional: das Bild sich anschauen\n","6c1b2ae7":"# make the front\nwc = WordCloud(\n    width=3000,\n    height=2000,                # alternativ: scale = float\n    prefer_horizontal = 0.70,   # Prozent der vertikal gesetzten W\u00f6rter\n    mask=papa_mask,\n    contour_width = 3,\n    contour_color = \"yellow\",\n    scale = 12,                # faster than width\/height, but might lead to a coarser fit for the words (2.5 zu grob, 15 zu fein, 20 Rechner st\u00fcrzt ab)\n    min_font_size=10,          # die minimale Schriftgr\u00f6\u00dfe, damit nicht viel Leerplatz entsteht.\n    max_font_size=200,         # die maximale Schriftgr\u00f6\u00dfe, damit die W\u00f6rter die Form besser f\u00fcllen.\n    background_color=\"black\", \n    max_words=len(one_string_without_stopwords5),   # L\u00e4nge des aufbereiteten Datensatzes\n    relative_scaling = 0.5, \n    random_state=4,            # reproducibility of the exact same word cloud   \n    collocations=False\n).generate(one_string_without_stopwords5)\n\n# show\nplt.imshow(wc, interpolation='bilinear')\nplt.axis('off')\nplt.show()","05429614":"# create coloring from image\n\nimage_colors = ImageColorGenerator(papa_mask)\n\n# show\nplt.imshow(wc.recolor(color_func=image_colors), interpolation='bilinear')\nplt.axis('off')\nplt.show()","733126b0":"Das Ergebnis ist nicht sch\u00f6n. Damit es sch\u00f6n wird, soll man ein gro\u00dfes Foto nehmen und man kann den Hintergrund entfernen (geht mit Photoshop oder auch mit Python).","a911d699":"# gr\u00f6\u00dferes Foto nehmen\n# Ich habe das Foto quick&dirty in Photoshop 4x vergr\u00f6\u00dfert und den Hintergrund entfernt. \n# Die entsprechende Code f\u00fcr Python gibt es auch, war mir in dem Projekt aber nicht wichtig. \n\npapa_mask2=np.array(Image.open('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/papaFotoshop.png'))","2e93910f":"# make the front\nwc2 = WordCloud(\n    width=3000,\n    height=2000,                # alternativ: scale = float\n    prefer_horizontal = 0.70,   # Prozent der vertikal gesetzten W\u00f6rter\n    mask=papa_mask2,\n    contour_width = 3,\n    contour_color = \"yellow\",\n    scale = 12,                # faster than width\/height, but might lead to a coarser fit for the words (2.5 zu grob, 15 zu fein, 20 Rechner st\u00fcrzt ab)\n    min_font_size=10,\n    max_font_size=200,\n    background_color=\"black\", \n    max_words=len(one_string_without_stopwords5),   # L\u00e4nge des aufbereiteten Datensatzes\n    relative_scaling = 0.5,    # die Korrelation zwischen der Wortgr\u00f6\u00dfe und deren Frequency \n    random_state=4,            # reproducibility of the exact same word cloud   \n    collocations=False\n).generate(one_string_without_stopwords5)\n\n# create coloring from image\n\nimage_colors = ImageColorGenerator(papa_mask)\n\n# show\nplt.imshow(wc2.recolor(color_func=image_colors), interpolation='bilinear')\nplt.axis('off')\nplt.show()","69dcaf6d":"# store to file\n\nwc2.to_file('..\/input\/wordcloud-projekt-papa-weihnachtsgru\/papa_finish.png')","b4b4a808":"### 8. Das Ergebnis exportieren","cde06d9e":"### 2. Die erste Wortwolke\nerste visuelle Inspektion","60159dc4":"### 4. Erneut eine Wortwolke erstellen \nzweite visuelle Inspektion","ac5a01dd":"#### 5.2. Deklination\n\nDie russische Sprache nutzt Wortendungen f\u00fcr Deklination, so ist \"\u0433\u043e\u0434\u0443\" Dativ f\u00fcr \"\u0433\u043e\u0434\" (vergleiche auf Deutsch: das Jahr - dem Jahr).","82b98eff":"# Erstellen einer Gru\u00dfkarte\nEin Weihnachtsgru\u00df f\u00fcr meinen Vater\n\nAus den Texten, die mein Vater in seinem Blog und auf Facebook im Jahr 2020 ver\u00f6ffentlicht hat, erstelle ich eine Wortwolke und projeziere sie auf das Portr\u00e4t des Autors.\n\n### Der Weg:\n\n1. Daten laden\n2. Eine Wortwolke erstellen -> erste visuelle Inspektion\n3. Daten bereinigen\n4. Erneut eine Wortwolke erstellen -> zweite visuelle Inspektion\n5. Eventuell Daten nachbessern\n6. Finale Wortwolke erstellen - mit allen gew\u00fcnschten Eigenschaften\n7. Die Wortwolke auf das Portr\u00e4t \u00fcbertragen\n8. Das Ergebnis als png-Datei speichern\n","fcbc03f3":"Es ist nicht aussagekr\u00e4ftig geworden.\n\n### 3. Daten bereinigen","e3a45989":"### 6. Finale Wortwolke erstellen - mit allen gew\u00fcnschten Eigenschaften \n### und\n### 7. Die Wortwolke auf das Portr\u00e4t \u00fcbertragen","7b7ef32a":"### 1. Daten laden","5194aef4":"### 5. Daten nachbessern\n\n#### 5.1. Gro\u00df- und Kleinschreibung\nDie Stopwords f\u00fcr die russische Sprache sind alle klein geschrieben. Wir m\u00fcssen die erste Buchstabe in jedem Wort gro\u00df schreiben und Daten damit erneut bereinigen.","24cc7a46":"Das Ergebnis ist trotzdem \"nicht sauber\". Versuchen wir es dann anders zu bereinigen.\n\nDie Sonderzeichen manuell entfernen:\n\n1) Das Zeichen \"-\" darf nicht entfernt werden, weil es viele W\u00f6rter im Russischen kaputt machen w\u00fcrde.\n\n2) Die zwei Leerzeichen \"  \" sollen als letzte entfernt werden, nachdem die anderen Sonderzeichen mit einem Leerzeichen \" \" ersetzt worden sind.\n\n3) Zahlen kann man erstmal drin lassen. Sie kann man beim Erstellen der Wortwolke sp\u00e4ter rausfiltern lassen."}}