{"cell_type":{"25d41fb2":"code","b4348cb6":"code","f398162a":"code","99ca5cf1":"code","beef680f":"code","76900b7a":"code","615c282d":"code","22274ac5":"code","afc569a4":"code","90e57490":"code","8a25113e":"code","b23d2c69":"code","b0965889":"code","2ae19849":"code","f003858a":"code","e2cc298c":"code","92ae5008":"code","1bc70581":"code","db288711":"code","a17ef7ed":"code","88580ea5":"code","36846be1":"code","a8377a30":"code","dcce3585":"code","e57f11a8":"code","d3b3f7c2":"code","5b90c784":"code","bfe6fb17":"code","3fabaedb":"code","84e5017c":"code","888f18d4":"code","fff5818a":"code","63494e2b":"code","9d6bd833":"code","0880f49d":"code","84498dc0":"code","d5595e5e":"code","6fc479e1":"code","bdb0a48f":"code","bedd2d24":"code","6898858a":"code","bf9be28e":"code","49746f6d":"code","170072fd":"code","591b87a8":"code","56956307":"code","065fc549":"code","fff07435":"code","89201ef9":"code","f5849488":"markdown","e8299a83":"markdown","d05ceb9c":"markdown","3c8b54e3":"markdown","276f9432":"markdown","f3983000":"markdown","f4915d22":"markdown","3a471374":"markdown","f78a8a45":"markdown","18c34f1f":"markdown","37e4abd3":"markdown","35cfac2d":"markdown","4f620d95":"markdown","3bd1c92f":"markdown","c38e8bbb":"markdown","62dd954c":"markdown","1e9c6c47":"markdown","9343aa26":"markdown","5387d1bb":"markdown","c8c84fe8":"markdown","591d67a7":"markdown","ca7deb57":"markdown","715dd926":"markdown","c9984163":"markdown","97c28345":"markdown","47710503":"markdown","7f203f5b":"markdown","0f5d61f1":"markdown","2ae8b512":"markdown","8cc40480":"markdown","9bd445fa":"markdown"},"source":{"25d41fb2":"import numpy as np\nimport pandas as pd\nimport matplotlib as plt\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom sklearn .preprocessing import LabelEncoder, StandardScaler\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.linear_model import LogisticRegression","b4348cb6":"# Set path to data \npath = \"..\/input\/top-women-chess-players\/top_women_chess_players_aug_2020.csv\"","f398162a":"#Read data\ndata = pd.read_csv(path)","99ca5cf1":"data.sample(10)","beef680f":"data.describe()","76900b7a":"np.array(data.Inactive_flag != \"wi\").sum()","615c282d":"data = data[data.Inactive_flag != \"wi\"]","22274ac5":"plt.figure(figsize=(13, 6))\ndata.Year_of_birth.hist(bins=20)","afc569a4":"current_age = 2020\nplt.figure(figsize=(13, 6))\ndata[\"Age\"] = current_age - data.Year_of_birth\ndata.Age.plot.box()","90e57490":"print(\"Median of age: \", data.Age.median())","8a25113e":"federation_data = data.groupby(\"Federation\").size().head(20)","b23d2c69":"federation_data = federation_data.sort_values(ascending=False)","b0965889":"plt.figure(figsize=(13, 6))\nplt.title(\"Active players by federation\")\nplt.ylabel(\"Count\")\nfederation_data.plot.bar()","2ae19849":"data.Title.unique()","f003858a":"title_data = data.groupby(\"Title\")","e2cc298c":"plt.figure(figsize=(9, 9))\ntitle_data.size().plot.pie()","92ae5008":"plt.figure(figsize=(13, 6))\nplt.title(\"Standard rating hist\")\nplt.xlabel(\"Rating\")\nplt.ylabel(\"Count\")\ndata.Standard_Rating.hist()","1bc70581":"plt.figure(figsize=(13, 6))\nplt.title(\"Blitz rating hist\")\nplt.xlabel(\"Rating\")\nplt.ylabel(\"Count\")\ndata.Blitz_rating.hist()","db288711":"plt.figure(figsize=(13, 6))\nplt.title(\"Rapid rating hist\")\nplt.xlabel(\"Rating\")\nplt.ylabel(\"Count\")\ndata.Rapid_rating.hist()","a17ef7ed":"srt_by_federation = data.groupby(\"Federation\").Standard_Rating.mean()\nsrt_by_federation = srt_by_federation.sort_values(ascending=False)\nsrt_by_federation = srt_by_federation.head(20)","88580ea5":"plt.figure(figsize=(13, 6))\nplt.title(\"Standard rating mean\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,2000, 2200])\nsrt_by_federation.plot.bar()","36846be1":"brt_by_federation = data.groupby(\"Federation\").Blitz_rating.mean()\nbrt_by_federation = brt_by_federation.sort_values(ascending=False)\nbrt_by_federation = brt_by_federation.head(20)","a8377a30":"plt.figure(figsize=(13, 6))\nplt.title(\"Blitz rating mean\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,1800, 2200])\nbrt_by_federation.plot.bar()","dcce3585":"rrt_by_federation = data.groupby(\"Federation\").Rapid_rating.mean()\nrrt_by_federation = rrt_by_federation.sort_values(ascending=False)\nrrt_by_federation = rrt_by_federation.head(20)","e57f11a8":"plt.figure(figsize=(13, 6))\nplt.title(\"Rapid rating mean\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,1900, 2200])\nrrt_by_federation.plot.bar()","d3b3f7c2":"srt_max_federation = data.groupby(\"Federation\").Standard_Rating.max()\nsrt_max_federation = srt_max_federation.sort_values(ascending=False)\nsrt_max_federation = srt_max_federation.head(20)","5b90c784":"plt.figure(figsize=(13, 6))\nplt.title(\"Standard rating max value\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,2400, 2700])\nsrt_max_federation.plot.bar()","bfe6fb17":"brt_max_federation = data.groupby(\"Federation\").Blitz_rating.max()\nbrt_max_federation = brt_max_federation.sort_values(ascending=False)\nbrt_max_federation = brt_max_federation.head(20)","3fabaedb":"plt.figure(figsize=(13, 6))\nplt.title(\"Blitz rating max value\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,2300, 2700])\nbrt_max_federation.plot.bar()","84e5017c":"rrt_max_federation = data.groupby(\"Federation\").Rapid_rating.max()\nrrt_max_federation = rrt_max_federation.sort_values(ascending=False)\nrrt_max_federation = rrt_max_federation.head(20)","888f18d4":"plt.figure(figsize=(13, 6))\nplt.title(\"Rapid rating max value\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,2300, 2700])\nrrt_max_federation.plot.bar()","fff5818a":"rating_data = data[[\"Standard_Rating\", \"Blitz_rating\", \"Rapid_rating\"]]","63494e2b":"rating_data.plot.scatter(x=\"Blitz_rating\", y=\"Standard_Rating\", figsize=(13,6),title=(\"Standard and blitz rating relation\"))","9d6bd833":"rating_data.plot.scatter(x=\"Rapid_rating\", y=\"Standard_Rating\", figsize=(13,6), title=(\"Standard and rapid rating relation\"))","0880f49d":"rating_data.plot.scatter(x=\"Rapid_rating\", y=\"Blitz_rating\", figsize=(13,6), title=(\"Blitz and rapid rating relation\"))","84498dc0":"fig = plt.figure(figsize=(10,10))\nax = plt.axes(projection='3d')\nax.scatter3D(data.Blitz_rating, data.Rapid_rating, data.Standard_Rating, zdir=\"z\")\nax.set_xlabel('Blitz Rating')\nax.set_ylabel('Rapid Rating')\nax.set_zlabel('Standard Rating');","d5595e5e":"cm= sns.light_palette(\"seagreen\", as_cmap=True)\nsns.heatmap(rating_data.corr(), cmap=cm)","6fc479e1":"plt.figure(figsize=(13, 6))\nplt.title(\"Title standard rating\")\nplt.ylabel(\"Rating\")\nplt.axis([0,0,1900, 2500])\ntitle_data.Standard_Rating.mean().plot.bar()","bdb0a48f":"data = data.sample(frac=1).reset_index(drop=True)","bedd2d24":"data.drop([\"Fide id\", \"Name\", \"Gender\", \"Inactive_flag\", \"Year_of_birth\"], axis=1, inplace=True)\ndata.head()","6898858a":"data.info()","bf9be28e":"data.Blitz_rating.fillna(data.Blitz_rating.mean(), inplace=True)\ndata.Rapid_rating.fillna(data.Rapid_rating.mean(), inplace=True)\ndata.dropna(axis=0, inplace=True)","49746f6d":"data.Title = [ \"Other\" if x != 'GM' and x != 'IM' else x for x in data.Title]","170072fd":"lb = LabelEncoder()\ntitle_map = {\"GM\":2, \"IM\":1, \"Other\":0}\ndata.Title = data.Title.map(title_map)\ndata.Federation = lb.fit_transform(data.Federation)","591b87a8":"data[[\"Federation\", \"Title\", \"Age\"]].corr()","56956307":"data.drop([\"Federation\",\"Age\"],axis=1, inplace=True)","065fc549":"X = data.drop([\"Title\"], axis=1)\ny = data.Title","fff07435":"sc = StandardScaler()\nX = sc.fit_transform(X)","89201ef9":"sgd = LogisticRegression()\ncross_val_score(sgd, X, y, cv=5)","f5849488":"And we can start training our model. I took simple but really strong model which is Logistic Regression. As we don't have a big dataset after cleaning we use cross validatio nscore for scoring","e8299a83":"At first see how much playar is active","d05ceb9c":"And encode categorical data as Title and Federation","3c8b54e3":"## Gender\n","276f9432":"# Title prediction","f3983000":"Now let's take care of Nan values","f4915d22":"Here we can spot that the mean values for each title are smaller than treshold we wrote earlier. Interesting, it's need invastigation later. If you know why is that please share with me in comment :)","3a471374":"At first, let's drop columns we don't need for sure.","f78a8a45":"As we have clean dataset we can now change Title values to only three classes","18c34f1f":"We can spot some outliers in Age distribution","37e4abd3":"Now let's see what is the median of rating for each title.","35cfac2d":"## Loading Data","4f620d95":"At the end let's try to train model to predict player title based on given data. For simplicifcation let's predict only 3 clases: GrandMasters, InternationalMasters and other clases labeled as Other. As we can expect not all values are useful. We can take for sure ratings and drop id, names, activity flag and gender. But what about age and nationality? Let's check that!","3bd1c92f":"## Title","c38e8bbb":"## Federation ","62dd954c":"There are few more techniques to identify future importance, but as we can see in correlation matrix federation and age does not impact on title. As a result we can easily drop it from dataset.","1e9c6c47":"No we are gonna analyse i think the most interesting data which is Ratings. At the begining let's look at standard rating!","9343aa26":"It is time to creat train test and separate labels","5387d1bb":"As we can see the results seems good, that what we want.","c8c84fe8":"Sure there is no need to analyse gender data :)","591d67a7":"## Basic Information","ca7deb57":"Hello and welcome to my notebook :) Here I'm gonna inspect and visualize **Top Women Chess Data**. Please note this notebook will be frequently updating. I hope so you will find an interesting content here. If you like this notebook you can let me know in comment or by upvoting. \nEnjoy!","715dd926":"In chess we have four main classic titles such as:\n#### Grand Master\nThe usual way to obtain the title is to achieve the required title norms over 27 or more games and a FIDE rating of 2500 or more.\n#### International Master\nThe usual way to obtain the title is to achieve the required title norms over 27 or more games and a FIDE rating of 2400 or more.\n#### FIDE Master\nThe usual way for a player to qualify for the FIDE Master title is by achieving an Elo rating of 2300 or more.\n#### Candidate Master\nThe usual way for a player to qualify for the Candidate Master title is by achieving an Elo rating of 2200 or more.","c9984163":"Some scaling","97c28345":"Now let's see how related are ratings","47710503":"## Data Analysing","7f203f5b":"## Ratings!\n","0f5d61f1":"Thanks for spending some time with me and top women chess players. Be ready for some improvements of this notebook soon :)","2ae8b512":"### Year of birth","8cc40480":"Let's analyse only active players","9bd445fa":"So as we can see ratings are strong correlated"}}