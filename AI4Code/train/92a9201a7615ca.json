{"cell_type":{"8785d1d9":"code","c14cc044":"code","c3bf9cbc":"code","9e92ea58":"code","21e3f92b":"code","b97817e9":"code","aae991b6":"code","37705b43":"code","234ce502":"code","f9048607":"code","c3495654":"code","50aafd4c":"code","90d808f4":"code","0b4a9061":"code","443f44e6":"code","1d8f3c01":"code","6f520d3a":"code","48911af6":"code","f866f278":"code","a38c3761":"code","298c1a58":"code","b0e0b23a":"code","6e7b5dfa":"code","d99d768e":"code","823d9ee3":"code","98d52a51":"code","2fc38dbc":"code","d0b3efc8":"code","bf71750c":"code","9df1ab95":"code","7f09ddf6":"code","c0a5e344":"code","ba8038d6":"code","1296b38f":"code","b8fc9bb6":"code","8d3c7b3c":"code","3f88984b":"code","c2ec41a7":"code","04aba9fe":"code","23177575":"code","20cfe2bf":"code","240eedc4":"code","5cfa0f4b":"code","be1cf7c2":"code","b0ddf56f":"code","4027c820":"code","833de55b":"code","e6a84290":"code","cdf6f1ed":"code","7a68741e":"code","f37c193b":"code","03ea5730":"code","bba9bd78":"markdown","55585bd4":"markdown","b71812dd":"markdown","0d245343":"markdown"},"source":{"8785d1d9":"import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ndata=pd.read_excel('..\/input\/overdue.xlsx',sheet_name='Data Fin')\ndata.head()","c14cc044":"#removing garbage column\ndata.drop(['ForMonth'],axis=1,inplace=True)\ndata.head()","c3bf9cbc":"#checking data shape\ndata.shape","9e92ea58":"#checking for null values\ndata.isnull().sum()","21e3f92b":"#checking for duplicate rows\ndata.duplicated().value_counts()","b97817e9":"#checking for duplicate Customer Code\ndata['Code'].duplicated().value_counts()","aae991b6":"#checking data types of columns\ndata.info()","37705b43":"#summary statistics\ndata.describe()","234ce502":"list(data.columns)","f9048607":"#renaming columns \ndata.rename(columns={'OD segment 17':'OD_segment_17','Inst. Size Jan 17':'Inst_Size_Jan_17','Inst. OD No. ':'Inst_OD_No','Inst. OD Jan 18':'Inst_OD_Jan_18','Inst. Outstanding Jan 18':'Inst_Outstanding_Jan_18'},inplace=True)","c3495654":"data.head()","50aafd4c":"data['OD_segment_17'].unique()","90d808f4":"#Status\nod_segment_17=data['OD_segment_17'].value_counts()\nod_segment_17.plot(kind='bar')\nprint(od_segment_17)","0b4a9061":"data.head()","443f44e6":"inst_size_jan_17=data['Inst_Size_Jan_17']\n#inst_size_jan_17.plot(kind='kde')\nplt.figure(figsize=(15,15))\nfig,ax1=plt.subplots()\nsns.distplot(inst_size_jan_17,color='red')\nax1.set_ylabel('Count')\nplt.title('Distribution of Inst_Size_Jan_17')\nplt.show()","1d8f3c01":"plt.figure(figsize=(15,15))\ndata.hist()\nplt.show()","6f520d3a":"#box whisker plot\nplt.figure(figsize=(15,15))\ndata.iloc[:,8:].plot(kind='box')\nplt.title('Box whisker plot')\nplt.show()","48911af6":"#pair plot\nsns.pairplot(data)","f866f278":"data.head()","a38c3761":"data['Inst. OD No.'].plot(kind='hist')\ndata['Inst. OD No.'].describe()\n","298c1a58":"feature=data.iloc[:,7:]\nfeature.head()","b0e0b23a":"feature[data['OD_segment_17']=='Expire'].head()","6e7b5dfa":"feature['OD_segment_17'].replace({\"Expire\":0,\"Running\":1},inplace=True)\nfeature.head()","d99d768e":"feature_matrix=feature.as_matrix()\nfeature_matrix","823d9ee3":"running=feature[feature['OD_segment_17']==1]\nrunning.head()\nprint(running.shape)\n#running_matrix=running_\nrunning_matrix=running.iloc[:,2:4].as_matrix()\nrunning_matrix\nX=running_matrix","98d52a51":"plt.scatter(X[:,0],X[:,1],color='red',marker='*')","2fc38dbc":"X.shape","d0b3efc8":"from sklearn.cluster import AgglomerativeClustering\nclustering = AgglomerativeClustering(n_clusters=3).fit(X)\nprint(\"Clusters:\",np.unique(clustering.labels_))\ns=pd.Series(clustering.labels_)\nprint(s.value_counts())\nprint(len(s))\n#print(\"Cluster label:\",clustering.labels_)","bf71750c":"running.iloc[:,:][clustering.labels_==0]['Inst. OD No.'].describe()","9df1ab95":"running.iloc[:,:][clustering.labels_==0].sample(20)","7f09ddf6":"running.iloc[:,:][clustering.labels_==1]['Inst. OD No.'].describe()","c0a5e344":"running.iloc[:,:][clustering.labels_==1].sample(20)","ba8038d6":"running.iloc[:,:][clustering.labels_==2]['Inst. OD No.'].describe()","1296b38f":"running.iloc[:,:][clustering.labels_==2].sample(20)","b8fc9bb6":"running_customer=running.copy()","8d3c7b3c":"running_customer['Cluster Label']=list(clustering.labels_)","3f88984b":"running_customer","c2ec41a7":"running_customer[running_customer['Cluster Label']==0].describe()","04aba9fe":"data.head()","23177575":"customer_cluster=data[data['OD_segment_17']=='Running'].copy()","20cfe2bf":"customer_cluster.shape","240eedc4":"customer_cluster['Cluster Label']=list(clustering.labels_)","5cfa0f4b":"customer_cluster.head()","be1cf7c2":"customer_cluster[customer_cluster['Cluster Label']==0].describe()","b0ddf56f":"customer_cluster['Cluster Label'].replace({0:\"Very risky\",1:\"Risky\",2:\"Good\"},inplace=True)","4027c820":"customer_cluster.head()","833de55b":"customer_cluster['Cluster Label'].value_counts()","e6a84290":"customer_cluster.to_csv('Customer_Cluster.csv')","cdf6f1ed":"very_risky=customer_cluster[customer_cluster['Cluster Label']=='Very risky']","7a68741e":"very_risky.head()","f37c193b":"very_risky.describe()","03ea5730":"very_risky.to_csv('Very_Risky_Customer.csv')","bba9bd78":"# Cluster Behavior Analysis","55585bd4":"# Cluster 0 : Very Risky Customer","b71812dd":"# Cluster 2: Good Customer","0d245343":"# Cluster 1 : Risky Customer"}}