{"cell_type":{"e3ea5d6f":"code","b2ac4fd6":"code","8ee75c49":"code","07f34415":"code","2eaf6eb9":"code","c8ca7747":"code","a2388f9e":"code","0a5d6a6a":"code","2de1586f":"code","34e66723":"code","0c2c55b0":"code","7dbfb706":"code","bef03cfb":"code","06503da9":"code","aa7c9846":"code","9a2505c2":"code","6092cb20":"code","98d074fa":"code","f270a2d6":"code","d0ef69c4":"code","b8544696":"code","0b264c72":"code","02ea1933":"code","d2500f32":"code","ed6a16f9":"code","771abad7":"code","249d5656":"code","ed23df6e":"code","d4bed5cc":"markdown","a0157800":"markdown","fc85cca4":"markdown","f139bd63":"markdown","9f00e52f":"markdown","061b19c5":"markdown","b095b87e":"markdown","98de6f84":"markdown"},"source":{"e3ea5d6f":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","b2ac4fd6":"#import necessary package\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\n%matplotlib inline","8ee75c49":"districts_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/districts_info.csv')\nproducts_df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/products_info.csv')","07f34415":"districts_df.head()","2eaf6eb9":"districts_df.shape","c8ca7747":"districts_df.info()","a2388f9e":"#fix the percentage columns problem\ncolumns = ['pct_black\/hispanic','pct_free\/reduced']\nranges = [-0.1,0.1,0.3,0.5,0.7,0.9]\ngroup_name = ['0%-20%','20%-40%','40%-60%','60%-80%','80%-100%']\nfor c in columns:\n    districts_df[c] = districts_df[c].str.replace('[','')\n    df = districts_df[c].str.split(',', expand=True)\n    df.columns = ['Min','Max']\n    df = df.astype('float')\n    districts_df[c+'_range'] = pd.cut(df['Min'], bins=ranges, labels=group_name)\ndistricts_df.drop(columns,axis=1,inplace=True)","0a5d6a6a":"districts_df.head()","2de1586f":"#group by state\nplt.figure(figsize=(10,10))\n_ = sns.countplot(y='state', data=districts_df, order=districts_df.state.value_counts().index)\nplt.xlabel('count of number')\nplt.title('The number of Districts group by state',fontsize=20)","34e66723":"#group by locale\ngroup = districts_df.groupby('locale').count()\n_ = sns.barplot(x=group.index, y=group.district_id)\nplt.ylabel('count of number')\nplt.title('The number of Districts group by locale',fontsize=12)","0c2c55b0":"products_df.head()","7dbfb706":"df = products_df['Primary Essential Function'].str.split('-',expand=True)\ndf[0].replace('LC\/CM\/SDO ','Others',inplace=True)\nproducts_df['Category'] = df[0]\nproducts_df['Sub-Category'] = [v[1]+'-'+v[2] if (pd.isnull(v[2])!=True) else v[1] for v in df.values]\nproducts_df.drop('Primary Essential Function',axis=1,inplace=True)","bef03cfb":"products_df.head()","06503da9":"products_df.shape","aa7c9846":"products_df.info()","9a2505c2":"products_df.nunique()","6092cb20":"Engagement_df = pd.DataFrame()\nfor d in districts_df.district_id:\n  df = pd.read_csv('..\/input\/learnplatform-covid19-impact-on-digital-learning\/engagement_data\/'+str(d)+'.csv')\n  df['district_id'] = d    \n  Engagement_df = pd.concat([Engagement_df,df])","98d074fa":"Engagement_df.head()","f270a2d6":"Engagement_df.shape","d0ef69c4":"Engagement_df.info()","b8544696":"#change data type\nEngagement_df['time'] = pd.to_datetime(Engagement_df['time'])\nEngagement_df['month'] = Engagement_df['time'].dt.month\n_ = sns.countplot(x='month', data=Engagement_df)","0b264c72":"#combine three tables together\nEngagement_df.dropna(subset=['lp_id'], inplace=True)\nEngagement_df['lp_id'] = Engagement_df['lp_id'].astype('int')\nfull_data = pd.merge(Engagement_df,districts_df,how='left',on='district_id')\nfull_data = pd.merge(full_data,products_df,how='left',left_on='lp_id',right_on='LP ID')","02ea1933":"full_data.head()","d2500f32":"#datetime plot\ndf = Engagement_df[['month','lp_id']].groupby('month').count()\n_ = sns.lineplot(x=df.index, y=df.lp_id, marker='.', linestyle=None)\nplt.xticks(range(1,13))\nplt.ylabel('count of number(million)')","ed6a16f9":"#group by state\n_ = sns.countplot(y='state', data=full_data, order = full_data['state'].value_counts().index)\nplt.xlabel('count of number (million)')","771abad7":"#group by locale\ndf = full_data[['locale','engagement_index']].groupby('locale').sum().sort_values(by='engagement_index',ascending=False)\ncolors = sns.color_palette('pastel')[0:4]\n_ = plt.pie(df.engagement_index, labels=df.index, colors=colors, autopct='%.0f%%')\nplt.title('percentage of locale',fontsize=15)","249d5656":"#group by Provider\/Company Name\ndf = full_data[['Provider\/Company Name','lp_id']].groupby('Provider\/Company Name').count().sort_values(by='lp_id',ascending=False)\ndf = df.iloc[:10]\n_ = sns.barplot(x=df.lp_id,y=df.index)\nplt.xlabel('count of number(million)')","ed23df6e":"_ = sns.countplot(x='pct_black\/hispanic_range', data=full_data, hue='pct_free\/reduced_range')\nplt.xlabel('Percentage Range')\nplt.ylabel('count of number(million)')\nplt.title('Percentage of Black\/Hispanic')\nplt.legend(loc='upper right',frameon=False)","d4bed5cc":"## What is the picture of digital connectivity and engagement in 2020?","a0157800":"## Engagement data view\n\n|Name|Destricption|\n|:---|:---|\n| time | date in \"YYYY-MM-DD\" | \n| lp_id | The unique identifier of the product |\n| pct_access | Percentage of students in the district have at least one page-load event of a given product and on a given day |\n| engagement_index | Total page-load events per one thousand students of a given product and on a given day |","fc85cca4":"### I want to change the values of the two columns('pct_black\/hispanic' and 'pct_free\/reduced') to make it easier to read ","f139bd63":"## products data view\n\n|Name|Destricption|\n|:--- |:--- |\n| LP ID | The unique identifier of the product |\n|URL | Web Link to the specific product |\n| Product Name | Name of the specific product |\n| Provider\/Company Name | Name of the product provider |\n| Sector(s) | Sector of education where the product is used |\n| Primary Essential Function | The basic function of the product. There are two layers of labels here. Products are first labeled as one of these three categories: LC = Learning & Curriculum, CM = Classroom Management, and SDO = School & District Operations. Each of these categories have multiple sub-categories with which the products were labeled |","9f00e52f":"## Districts data view\n\n| Name | Description |\n| :--- | :---|\n| Districts_id | The unique identifier of the school district|\n| state | The state where the district resides in |\n| locale | NCES locale classification that categorizes U.S. territory into four types of areas: City, Suburban, Town, and Rural |\n| pct_black\/hispanic | Percentage of students in the districts identified as Black or Hispanic based on 2018-19 NCES data |\n| pct_free\/reduced | Percentage of students in the districts eligible for free or reduced-price lunch based on 2018-19 NCES data |\n| county_connections_ratio | ratio (residential fixed high-speed connections over 200 kbps in at least one direction\/households) based on the county level data from FCC From 477 (December 2018 version). See FCC data for more information. |\n| pp_total_raw | Per-pupil total expenditure (sum of local and federal expenditure) from Edunomics Lab's National Education Resource Database on Schools (NERD$) project. The expenditure data are school-by-school, and we use the median value to represent the expenditure of a given school district|","061b19c5":"## EDA in districts data","b095b87e":"### Split 'Primary Essential Function' to 'Category' and 'Sub-Category'","98de6f84":"### How does student engagement with online learning platforms relate to different geography? Demographic context \n### (e.g., race\/ethnicity, ESL, learning disability)? Learning context? Socioeconomic status?"}}