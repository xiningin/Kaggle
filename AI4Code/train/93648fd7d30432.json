{"cell_type":{"25c56cf7":"code","a882b000":"code","677812d6":"code","bccf73ca":"code","44abbaf2":"code","b061a0e1":"code","c6a80a5a":"code","00015629":"code","8aea1c49":"code","794ed672":"code","26179475":"code","c1bfb882":"code","871aff13":"code","955f9e20":"code","2a199945":"code","b9e673a8":"code","3a8f664d":"code","24cc44c6":"code","1a82f2a3":"code","7080fd79":"code","19c37404":"code","55c00bce":"code","89d2b28c":"code","2a5e48f6":"code","c5233ffc":"code","23ed6f39":"code","09421bb4":"code","8522d19c":"code","20109b37":"code","0b6e986a":"code","e72e215f":"code","7474af31":"code","24b863a7":"code","ce2e931f":"code","5e76b991":"code","8cddc5a9":"code","8bbc26f8":"code","f7604154":"code","571f7bb6":"code","d92dacc3":"code","d2594a95":"code","3288f5e2":"code","5c51c763":"code","6de52ec6":"code","c14633fb":"code","b6061323":"code","1148f467":"code","cc958a6f":"code","3121d868":"markdown","25524ec6":"markdown","19c4c3a4":"markdown","bc3d606c":"markdown","602ea69d":"markdown","80e3b118":"markdown","7c71891f":"markdown","265b3f77":"markdown","46c343ea":"markdown","0fab3155":"markdown","789e1531":"markdown","2dc23ad2":"markdown","b3e4eefe":"markdown","0a4cc0c8":"markdown","4a05395e":"markdown","df657fee":"markdown","b5584bc1":"markdown","3d677f56":"markdown","00b30b67":"markdown","e4467a31":"markdown","e3d8f20b":"markdown","e2c6c407":"markdown","42012aa6":"markdown","16b3428b":"markdown","7539ecfb":"markdown","07b8663a":"markdown","89ea8672":"markdown","63d8c5f7":"markdown","2ff95e31":"markdown","0b104d05":"markdown","7bf12192":"markdown"},"source":{"25c56cf7":"#importing necessary libraries\nimport numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\nplt.rcParams[\"figure.figsize\"] = (10,5)\nimport seaborn as sns\nimport plotly\nimport plotly.express as px\nplotly.offline.init_notebook_mode(connected = True)\nfrom imblearn.over_sampling import SMOTE\nfrom sklearn.ensemble import RandomForestClassifier,GradientBoostingClassifier\nfrom xgboost import XGBClassifier\nfrom sklearn.metrics import classification_report\nfrom sklearn.model_selection import train_test_split,GridSearchCV","a882b000":"#data loading\ntravel=pd.read_csv('\/kaggle\/input\/travel-insurance-prediction-data\/TravelInsurancePrediction.csv')\ntravel.head()","677812d6":"#removing unnecessary column\ntravel.drop(columns=['Unnamed: 0'],inplace=True)","bccf73ca":"travel.info()","44abbaf2":"travel.describe()","b061a0e1":"fig=px.histogram(travel,'Age')\nfig.update_layout(bargap=0.2)\nfig.show()","c6a80a5a":"fig=px.histogram(travel,'AnnualIncome')\nfig.update_layout(bargap=0.2)\nfig.show()","00015629":"px.pie(travel,'Employment Type',title='Distribution of Employment type of Individuals')","8aea1c49":"px.pie(travel,'GraduateOrNot',labels={'GraduateOrNot':'Graduated'},title='Distribution of graduated individuals')","794ed672":"fig=px.histogram(travel,'FamilyMembers')\nfig.update_layout(bargap=0.2)\nfig.show()","26179475":"px.pie(travel,'ChronicDiseases',title='Distribution of Chronic Diseases in people')","c1bfb882":"px.pie(travel,'FrequentFlyer',title='Distribution of Frequent Flyers')","871aff13":"px.pie(travel,'EverTravelledAbroad',title='Distribution of people who have travelled Abroad')","955f9e20":"px.pie(travel,'TravelInsurance',title='Distribution of people with travel insurance')","2a199945":"sns.boxplot(y='Age',x='TravelInsurance',data=travel)","b9e673a8":"pd.crosstab(travel['GraduateOrNot'],columns=travel['TravelInsurance'],normalize='all')","3a8f664d":"pd.crosstab(travel['EverTravelledAbroad'],columns=travel['TravelInsurance'],normalize='all')","24cc44c6":"pd.crosstab(travel['FrequentFlyer'],columns=travel['TravelInsurance'],normalize='all')","1a82f2a3":"sns.barplot(x='ChronicDiseases',y='Age',data=travel,ci=None)","7080fd79":"pd.crosstab(travel['Employment Type'],columns=travel['GraduateOrNot'],normalize='all')","19c37404":"sns.barplot(x='Employment Type',y='AnnualIncome',data=travel,ci=None)","55c00bce":"sns.barplot(x='FrequentFlyer',y='AnnualIncome',data=travel,ci=None)","89d2b28c":"sns.barplot(x='TravelInsurance',y='AnnualIncome',data=travel,ci=None)","2a5e48f6":"pd.crosstab(travel['Employment Type'],columns=travel['TravelInsurance'],normalize='all')","c5233ffc":"#lets find out people having salary more than 8 lakhs\nsalary=travel[travel['AnnualIncome']>800000]","23ed6f39":"pd.crosstab(salary['Employment Type'],columns=salary['TravelInsurance'],normalize='all')","09421bb4":"pd.crosstab(salary['Employment Type'],columns=[salary['TravelInsurance'],salary['FrequentFlyer']],\n            normalize='all')","8522d19c":"pd.crosstab(travel['ChronicDiseases'],columns=travel['TravelInsurance'],\n            normalize='all')","20109b37":"sns.barplot(x='Employment Type',y='FamilyMembers',data=travel,ci=None)","0b6e986a":"sns.barplot(x='TravelInsurance',y='FamilyMembers',data=travel,ci=None)","e72e215f":"sns.boxplot(y='AnnualIncome',x='FamilyMembers',data=travel)","7474af31":"sns.boxplot(x='Age',y='FamilyMembers',data=travel)","24b863a7":"sns.boxplot(x='GraduateOrNot',y='FamilyMembers',data=travel)","ce2e931f":"#hard encoding some features\ndef encoding(feature):\n    travel[feature]=travel[feature].replace({'Yes':1,'No':0})","5e76b991":"encoding('GraduateOrNot')\nencoding('FrequentFlyer')\nencoding('EverTravelledAbroad')","8cddc5a9":"travel=pd.get_dummies(travel,columns=['Employment Type'],drop_first=True)","8bbc26f8":"X=travel.drop(columns=['TravelInsurance'])\ny=travel['TravelInsurance']","f7604154":"X_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.2,stratify=y)","571f7bb6":"#using smote to handle class imbalance for minority class\nover = SMOTE()","d92dacc3":"#fitting smote on training set and testing on real unsampled data\nX_bal, y_bal = over.fit_resample(X_train, y_train)","d2594a95":"y_bal.value_counts()","3288f5e2":"#function to fit baseline models\ndef model_fit(model):\n    d=model\n    d.fit(X_bal,y_bal)\n    y_pred=d.predict(X_test)\n    print(classification_report(y_test,y_pred))","5c51c763":"model_fit(RandomForestClassifier())","6de52ec6":"model_fit(GradientBoostingClassifier())","c14633fb":"model_fit(XGBClassifier())","b6061323":"#parameters\nparams1={\n    'n_estimators' : range(100,300,5)\n}\n    \nclf1 = GridSearchCV(estimator = GradientBoostingClassifier(random_state=10), \nparam_grid = params1, scoring='accuracy',n_jobs=-1,cv=5,verbose=3)\nclf1.fit(X_bal,y_bal)","1148f467":"clf1.best_params_,clf1.best_score_","cc958a6f":"best_model=clf1.best_estimator_\nmodel_fit(best_model)","3121d868":"*The dataset has no missing values and all the columns have correct datatype.*","25524ec6":"*54.4% percent of graduates don't take insurance whereas 30.7% of graduates do.*","19c4c3a4":"*17.4% of individuals having chronic disease hasn't taken travel insurance whereas 10.3% of people with such disease has taken travel insurance.*","bc3d606c":"*Family size of 5 prefer travel insurance which tells us that when size of family increases people generally take insurance.*","602ea69d":"**MODEL BUILDING**","80e3b118":"*Approx 59% and 26% of individuals who work in private sector or self-employed and government sector are graduated.*","7c71891f":"*Approx 29% and 7% of the people working in private and government jobs have travel insurance whereas 43% of people in private sector and 22% of people in government sector don't have travel insurance.*","265b3f77":"**HANDLING IMBALANCE**","46c343ea":"*Individuals aged around 30-31 are present in most of the families.*","0fab3155":"*Both government,private and self-employed people have same number of family members.*","789e1531":"**VARIABLE ENCODING**","2dc23ad2":"**HYPERPARAMETER TUNING**","b3e4eefe":"*Maximum family size is around 4 members.*","0a4cc0c8":"*People having annual income more than 8 lakhs fly frequently.*","4a05395e":"*Most of the individuals(more than 140) are having an annual income of around 6-8 lakhs.*","df657fee":"*The level of presence and absence of Chronic Disease in people of all ages is same.*","b5584bc1":"*Gradient Boosting Classifier baseline performed well.*","3d677f56":"* *Approx 12% people who are frequent flyers have travel insurance whereas 9% do not have.*\n* *Majority of customers aren't frequent flyers(79%).*","00b30b67":"* *Approx 15% people who  have travelled abroad has taken insurance and 4% not.*\n* *Also,majority of people are domestic travelers(81%).*","e4467a31":"*People with more annual income have travel insurance.*","e3d8f20b":"*Hence it is seen that 33% approx of employees having annual income more than 8 lakhs aren't frequent flyers that is why they hadn't taken travel insurance.*","e2c6c407":"*People not taking travel insurance are of age between 28-31 and those taking insurance is between 27-33.*","42012aa6":"*Private Sector employees or self-employed people generally have more annual income then government sector employees.*","16b3428b":"*Family sizes of 3,4,5 and 6 have higher annual income between 7-12 lakhs per annum amongst other family sizes.*","7539ecfb":"*Most of the individuals are 28 years of age.*","07b8663a":"* *Family sizes between 4-6 consists of members who are graduated.*\n* *Family sizes between 3-6 consists of members who aren't graduated.*","89ea8672":"*The private employees having annual income more than 8 lakhs 40% don't take travel insurance or 39% take it.Therefore income can't be the reason.*","63d8c5f7":"*The dataset is imbalanced.*","2ff95e31":"**UNIVARIATE ANALYSIS**","0b104d05":"*Private employees instead of having higher annual income aren't taking travel insurance.Let's find out the reason.*","7bf12192":"**BIVARIATE AND MULTIVARIATE ANALYSIS**"}}