{"cell_type":{"64648501":"code","e54843ee":"code","f35430c2":"code","f853c854":"code","2878e773":"code","c43eaaf5":"code","7a557d7e":"code","5f3f1185":"code","d33dcfa8":"code","a6a5cdec":"code","0f53ac62":"code","98591ce0":"code","0243aa2b":"code","7309d040":"code","903c33ee":"code","4dda4a22":"code","c2543144":"code","b98c5395":"code","093912e1":"code","b7058ec7":"code","393f42a2":"code","c478b6e2":"code","cc2af49e":"code","25e114c5":"code","3bf6fcc4":"code","66c22ff9":"code","22574e81":"code","b78d8a20":"code","2f8bccf4":"code","5b6466bf":"code","20b82400":"code","9b78d271":"code","11a24fd8":"code","37e169d9":"code","d10e1d48":"code","4a217b8a":"code","d58a8350":"code","c49f8b88":"code","f0e80cea":"code","05016ac1":"markdown","7069080c":"markdown","8411a384":"markdown","f177b571":"markdown","de1e1ba5":"markdown","3635f4fe":"markdown","7b933091":"markdown"},"source":{"64648501":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport seaborn as sns\nimport matplotlib.pyplot as plt","e54843ee":"df = pd.read_csv('\/kaggle\/input\/data-analyst-jobs\/DataAnalyst.csv')\ndf.head()","f35430c2":"# Drop duplicate column\ndf.drop(['Unnamed: 0'], axis=1,inplace=True)","f853c854":"# Parse salary\ndf = df[df['Salary Estimate'] != '-1']\nsalary = df['Salary Estimate'].apply(lambda x: x.split('(')[0])\nminus_Kd = salary.apply(lambda x: x.replace('K','').replace('$',''))\ndf['min_salary'] = minus_Kd.apply(lambda x: int(x.split('-')[0]))\ndf['max_salary'] = minus_Kd.apply(lambda x: int(x.split('-')[1]))\ndf['avg_salary'] = (df.min_salary+df.max_salary)\/2","2878e773":"# Parse company text\ndf['company_txt'] = df.apply(lambda x: x['Company Name'] if x['Rating'] < 0 else x['Company Name'][:-3].strip(), axis=1)","c43eaaf5":"# Parse location to see what state the companies in\ndf['job_state'] = df['Location'].apply(lambda x: x.split(',')[-1])\ndf['job_state'].value_counts()","7a557d7e":"# Find out the age of the company\ndf['age'] = df.Founded.apply(lambda x: x if x < 1 else 2020 - x)","5f3f1185":"# Parsing job description for some of the most required skills for data analysts\ndf['sql_yn'] = df['Job Description'].apply(lambda x: 1 if 'sql' in x.lower() else 0)\ndf['python_yn'] = df['Job Description'].apply(lambda x: 1 if 'python' in x.lower() else 0)\ndf['R_yn'] = df['Job Description'].apply(lambda x: 1 if 'r studio' in x.lower() or 'r-studio' in x.lower() else 0)\ndf['tableau_yn'] = df['Job Description'].apply(lambda x: 1 if 'tableau' in x.lower() else 0)\ndf['powerbi_yn'] = df['Job Description'].apply(lambda x: 1 if 'power bi' in x.lower() or 'powerbi' in x.lower () else 0)\ndf['excel_yn'] = df['Job Description'].apply(lambda x: 1 if 'excel' in x.lower() else 0)","d33dcfa8":"# Job description length\ndf['desc_len'] = df['Job Description'].apply(lambda x: len(x))\ndf.desc_len","a6a5cdec":"df.columns","0f53ac62":"# Change these columns to numeric\ndf[['Rating','Founded','min_salary','max_salary','avg_salary']] = df[['Rating','Founded','min_salary','max_salary','avg_salary']].apply(pd.to_numeric)\nprint(df.dtypes)","98591ce0":"## Analyzing Continuous Variables","0243aa2b":"df.describe()","7309d040":"# histogram of company ratings - left skewed distribution\ndf.Rating.hist()","903c33ee":"# histogram of mininum salary - right skewed \ndf.min_salary.hist()","4dda4a22":"# histogram of maximum salary - right skewed \ndf.max_salary.hist()","c2543144":"# histogram of average salary - right skewed \ndf.avg_salary.hist()","b98c5395":"# hist of company age - right skewed\ndf.age.hist()","093912e1":"- hist of job description length - right skewed\ndf.desc_len.hist()","b7058ec7":"# a lot of outliers for age and quite a lot for average salary as well\ndf.boxplot(column = ['age','avg_salary','Rating'])","393f42a2":"# looking at rating separately, we see that outliers are below 2.\ndf.boxplot(column = 'Rating')","c478b6e2":"# a lot of outliers.\ndf.boxplot(column = 'desc_len')","cc2af49e":"# age\ndf_age_no_outlier = df[df.age >= 90]\ndf_age_no_outlier.age.hist()","25e114c5":"#average salary\ndf_avg_salary_no_outlier = df[df.avg_salary >= 110]\ndf_avg_salary_no_outlier.avg_salary.hist()","3bf6fcc4":"# Rating\ndf_rating_no_outlier = df[df.Rating <= 2]\ndf_rating_no_outlier.Rating.hist()","66c22ff9":"# Description length\ndf_desc_length_no_outlier = df[df.desc_len >= 7500]\ndf_desc_length_no_outlier.desc_len.hist()","22574e81":"# looking at the correlation of these columns, none of them have any positive correlations between each other.\ndf[['age','avg_salary','Rating','desc_len']].corr()","b78d8a20":"# a heatmap visualization for better representation of the correlation.\ncmap = sns.diverging_palette(220, 10, as_cmap=True)\nsns.heatmap(df[['age','avg_salary','Rating','desc_len']].corr(),vmax=.3, center=0, cmap=cmap,\n            square=True, linewidths=.5, cbar_kws={\"shrink\": .5})","2f8bccf4":"df.columns","5b6466bf":"# dataframe for categorical variables\ndf_cat = df[['Location','Headquarters','Size','Type of ownership','Industry','Sector','Revenue','company_txt','job_state','Easy Apply','sql_yn','python_yn','R_yn','tableau_yn','powerbi_yn','excel_yn']]","20b82400":"for i in df_cat.columns:\n    cat_num = df_cat[i].value_counts()\n    print(\"graph for %s: total = %d\" %(i, len(cat_num)))\n    chart = sns.barplot(x=cat_num.index, y=cat_num)\n    chart.set_xticklabels(chart.get_xticklabels(), rotation=90)\n    plt.show()","9b78d271":"for i in df_cat[['Location','Headquarters','Industry','company_txt']].columns:\n    cat_num = df_cat[i].value_counts()[:20]\n    print(\"graph for %s: total = %d\" % (i, len(cat_num)))\n    chart = sns.barplot(x=cat_num.index, y=cat_num)\n    chart.set_xticklabels(chart.get_xticklabels(), rotation=90)\n    plt.show()","11a24fd8":"# Interesting to see that jobs require Python pays better than R.\npd.pivot_table(df, index=['python_yn','R_yn'],values='avg_salary')","37e169d9":"# This category seems pretty even in terms of average salary for these two skills.\npd.pivot_table(df, index=['sql_yn','excel_yn'],values='avg_salary')","d10e1d48":"# This category compares two of the most required visualization skills for data analysts position.\n# Interesting to see that jobs require tableau pays 10k more than Power Bi.\npd.pivot_table(df, index=['tableau_yn','powerbi_yn'],values='avg_salary')","4a217b8a":"# Looking at each columns vs average salary \ndf_pivots = df[['Rating','Industry','Sector','Revenue','sql_yn','python_yn','R_yn','tableau_yn','powerbi_yn','excel_yn','avg_salary']]","d58a8350":"# Insights:\n# We see that companies with 2.2 rating pays the most average salary at around 95.7k.\n# Drug & Health Stores pays the most out of all industries, followed by education training services and health care products manufacturing.\n# Once again Biotech % pharmaceuticals sectors pays the most, followed by real estate.\n# Companies with one to five millions revenue pays the most in this category.\ntry:\n    for i in df_pivots.columns:\n        print(i)\n        print(pd.pivot_table(df_pivots, index=i, values='avg_salary').sort_values('avg_salary',ascending=False))\nexcept ValueError:\n    pass","c49f8b88":"from wordcloud import WordCloud, ImageColorGenerator, STOPWORDS\nfrom nltk.corpus import stopwords\nfrom nltk.tokenize import word_tokenize","f0e80cea":"words = \" \".join(df['Job Description'])\n\ndef punctuation_stop(text):\n    \"\"\"remove punctuation and stop words\"\"\"\n    filtered = []\n    stop_words = set(stopwords.words('english'))\n    word_tokens = word_tokenize(text)\n    for w in word_tokens:\n        if w not in stop_words and w.isalpha():\n            filtered.append(w.lower())\n    return filtered\n\n\nwords_filtered = punctuation_stop(words)\n\ntext = \" \".join([ele for ele in words_filtered])\n\nwc= WordCloud(background_color=\"white\", random_state=1,stopwords=STOPWORDS, max_words = 2000, width =800, height = 1500)\nwc.generate(text)\n\nplt.figure(figsize=[10,10])\nplt.imshow(wc,interpolation=\"bilinear\")\nplt.axis('off')\nplt.show()","05016ac1":"### Pivot tables","7069080c":"## Data Analysis","8411a384":"# Summary of findings for what's needed to get a good pay for data analysts:\n- Interesting to see that jobs require Python pays better than R.\n- Comparing job descriptions require excel or sql seems pretty even in terms of average salary for these two skills.\n- Comparing two of the most required visualization skills for data analysts position. Interesting to see that jobs require tableau pays 10k more than Power Bi\n- Companies with 2.2 rating pays the most average salary at around 95.7k.\n- Drug & Health Stores pays the most out of all industries, followed by education training services and health care products manufacturing.\n- Once again Biotech % pharmaceuticals sectors pays the most, followed by real estate.\n- Companies with one to five millions revenue pays the most.","f177b571":"Removing outliers and let's look at the distributions again.","de1e1ba5":"### Analyzing categorical variables","3635f4fe":"## Data Cleaning","7b933091":"Reference: \n    - Ken Jee: https:\/\/github.com\/PlayingNumbers\/ds_salary_proj\/blob\/master\/data_eda.ipynb\n    \n    - importdata : https:\/\/github.com\/importdata\/kpop-analysis\/blob\/master\/K_pop_Exploratory_Data_Analysis.ipynb\n    \n"}}