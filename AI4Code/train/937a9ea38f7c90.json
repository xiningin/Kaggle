{"cell_type":{"8c7676fc":"code","97a18ca1":"code","90afd34b":"code","4c2aafdd":"code","d1e10bdf":"code","dedd29f4":"code","7dd8ef57":"code","de12acfe":"code","8f18530f":"code","72a8febd":"code","d6c0e43b":"code","05733409":"code","70ba7c50":"code","1f6d88fe":"code","7af1ddb7":"code","0d9cc733":"code","a39de95d":"code","6e5e0953":"code","fc3422b9":"code","15d94a63":"code","c72dfa37":"code","4c997e80":"code","f1808429":"code","38ac3137":"code","53d32feb":"code","e951c2b0":"code","33dad191":"code","41e5fdf4":"code","4ff79dfb":"code","cc818b2b":"code","dc82b7d5":"code","6c314efe":"code","16689021":"code","7ff333e0":"code","908b52a7":"code","1526381d":"code","cdf86662":"code","1ec7d37a":"markdown","f8bfd26e":"markdown","4ed4f27b":"markdown","7af22574":"markdown","42bc6338":"markdown","514f8ee9":"markdown","ce66b83b":"markdown","5562a421":"markdown","233c061d":"markdown","97045039":"markdown","407806b3":"markdown","50095385":"markdown","7273df26":"markdown","24ee9533":"markdown","109b22dc":"markdown","404e19a5":"markdown","eb56f695":"markdown","c6120f9b":"markdown","ccd40bb7":"markdown","87607d17":"markdown","eb8d9baa":"markdown","668c9f24":"markdown","9390997c":"markdown","69141b7b":"markdown","422232d6":"markdown","6ce8430b":"markdown","9c847150":"markdown","7f7a9184":"markdown","3ff95e68":"markdown","c11620fa":"markdown","02d2ed2e":"markdown","b2bfa30c":"markdown","c6dbf71f":"markdown","d6d44cd2":"markdown","f1c27b66":"markdown","9260b736":"markdown","c44aa1d3":"markdown","704021e7":"markdown"},"source":{"8c7676fc":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport squarify\nimport matplotlib","97a18ca1":"df= pd.read_csv(\"..\/input\/english-premier-league202021\/EPL_20_21.csv\")\ndf.head()","90afd34b":"df.shape","4c2aafdd":"df.isnull().sum()","d1e10bdf":"plt.figure(figsize=(12,8))\nsns.heatmap(df.corr(), annot=True, cmap='Pastel1')","dedd29f4":"df['Position'].unique()","7dd8ef57":"df[df['Age']==df['Age'].min()]","de12acfe":"df[df['Age']==df['Age'].max()]","8f18530f":"plt.figure(figsize=(18,8))\nsns.boxplot(x='Club',y='Age', data=df)\nplt.xticks(rotation=90)","72a8febd":"plt.figure(figsize=(12,8))\nsns.displot(data=df, x=\"Age\", kde=True )","d6c0e43b":"fig = plt.figure(figsize=(18,12))\nsizes=df.groupby('Nationality',)['Name'].count().sort_values(ascending= False).tolist() \nlabel=df.groupby('Nationality',)['Name'].count().sort_values(ascending= False).index.values.tolist()\nfinal_label = [i+\" \"+j for i, j in zip(label, [str(x) for x in sizes])]\n\nsquarify.plot(sizes=sizes, label=final_label, alpha=0.6 )","05733409":"fig = plt.figure(figsize=(18,12))\nsizes=df.groupby('Club',)['Name'].count().sort_values(ascending= False).tolist() \nlabel=df.groupby('Club',)['Name'].count().sort_values(ascending= False).index.values.tolist()\nfinal_label = [i+\" \"+j for i, j in zip(label, [str(x) for x in sizes])]\n\nsquarify.plot(sizes=sizes, label=final_label, alpha=0.6 )\n","70ba7c50":"goal_team = pd.DataFrame(df.groupby('Club', as_index=False)['Goals'].sum() )\nplt.figure(figsize = (18,8))\n\nax =sns.barplot(x='Club', y='Goals', data=goal_team.sort_values(by=\"Goals\"))\nplt.xticks(rotation=45)\n\n","1f6d88fe":"top_scorers= df.sort_values(by=\"Goals\", ascending=False)[:5]\ntop_scorers","7af1ddb7":"ax =sns.barplot(x='Name', y='Goals', data=top_scorers)\nplt.xticks(rotation=45)\n","0d9cc733":"top_assists= df[['Name', 'Club', 'Assists']].sort_values(by=\"Assists\", ascending=False)[:5]\ntop_assists","a39de95d":"ax =sns.barplot(x='Name', y='Assists', data=top_assists)\nplt.xticks(rotation=45)","6e5e0953":"attack_df=df[['Name','Club', 'Mins', 'Goals', 'Assists', 'Penalty_Goals', 'Penalty_Attempted', 'xG', 'xA']]\nattack_df['Goal_involvement'] = attack_df['Goals']+attack_df['Assists']\nattack_df['min_per_goal_inv'] = attack_df['Mins']\/attack_df['Goal_involvement']\nattack_df['expected_goal_inv'] = (attack_df['xG']+df['xA'])*(attack_df['Mins']\/90)\nattack_df['min_per_exp_goal_inv']= df['Mins']\/attack_df['expected_goal_inv']\nattack_df.replace([np.inf, -np.inf], np.nan, inplace=True)\nattack_df.head()","fc3422b9":"name = attack_df[['Name','Club', 'Goals', 'Assists', 'Goal_involvement', 'expected_goal_inv' ]].sort_values(by=\"Goal_involvement\", ascending = False)[:10]\nname.head()","15d94a63":"attack_df[['Name', 'xG', 'xA', 'Goal_involvement', 'expected_goal_inv']].sort_values(by=\"expected_goal_inv\", ascending = False)[:10].head()\n","c72dfa37":"plt.figure(figsize=(15, 8))\nax = sns.barplot(x='Name', y='Goal_involvement', data=name)\nwidth_scale = 0.45\nplt.xticks(rotation=90)\nfor bar in ax.containers[0]:\n    bar.set_width(bar.get_width() * width_scale)\n\nax2 = ax.twinx()\nsns.barplot(x='Name', y='expected_goal_inv', data=name, alpha=0.7, hatch='xx', ax=ax2)\nfor bar in ax2.containers[0]:\n    x = bar.get_x()\n    w = bar.get_width()\n    bar.set_x(x + w * (1- width_scale))\n    bar.set_width(w * width_scale)\n\nplt.show()\n","4c997e80":"name = attack_df[['Name', 'Club', 'Mins', 'min_per_goal_inv', 'min_per_exp_goal_inv']][attack_df['Mins']>1000].sort_values(by=\"min_per_goal_inv\")[:10]\nname","f1808429":"attack_df[['Name', 'Club', 'Mins', 'min_per_goal_inv', 'min_per_exp_goal_inv']][attack_df['Mins']>1000].sort_values(by=\"min_per_exp_goal_inv\")[:10]","38ac3137":"plt.figure(figsize=(15, 10))\nax = sns.barplot(x='Name', y='min_per_goal_inv', data=name)\nwidth_scale = 0.45\nplt.xticks(rotation=90)\nfor bar in ax.containers[0]:\n    bar.set_width(bar.get_width() * width_scale)\nax.set_ylim(0, 250)\n\nax2 = ax.twinx()\nsns.barplot(x='Name', y='min_per_exp_goal_inv', data=name, alpha=0.7, hatch='xx', ax=ax2)\nfor bar in ax2.containers[0]:\n    x = bar.get_x()\n    w = bar.get_width()\n    bar.set_x(x + w * (1- width_scale))\n    bar.set_width(w * width_scale)\nax2.set_ylim(0, 250)\n\nplt.show()","53d32feb":"attack_df.sort_values(by=\"Penalty_Goals\", ascending= False)[:5]","e951c2b0":"attack_df['Penalty_perc']=attack_df['Penalty_Goals']\/attack_df['Penalty_Attempted']\nattack_df[['Name', 'Club', 'Penalty_Goals', 'Penalty_Attempted', 'Penalty_perc']].sort_values(by='Penalty_perc', ascending = False)[:30]\n\n","33dad191":"plt.figure(figsize=(18,8))\nax =sns.barplot(x='Name', y='Penalty_perc', data=attack_df.sort_values(by='Penalty_perc', ascending = False)[:30])\nplt.xticks(rotation=90)","41e5fdf4":"df[['Name', 'Club', 'Position', 'Goals', 'Assists']][df['Position']=='DF'].sort_values(by='Goals', ascending = False)[:10]","4ff79dfb":"plt.figure(figsize=(10,6))\nsns.barplot(x='Name', y='Goals', data=df[df['Position']=='DF'].sort_values(by='Goals', ascending = False)[:10])\nplt.xticks(rotation=90)","cc818b2b":"most_pass_att = df[['Name','Club','Passes_Attempted','Position']].nlargest(10,'Passes_Attempted')\nmost_pass_att","dc82b7d5":"plt.figure(figsize=(10,6))\nax =sns.barplot(x='Name', y='Passes_Attempted', data=most_pass_att)\nplt.xticks(rotation=90)","6c314efe":"pass_acc = df[(df['Position'] != 'GK') & (df['Position'] != 'DF') & (df['Passes_Attempted']>= 1000)]\npass_acc[['Name', 'Club', 'Passes_Attempted', 'Perc_Passes_Completed']].nlargest(10, 'Perc_Passes_Completed')","16689021":"plt.figure(figsize=(10,6))\nax =sns.barplot(x='Name', y='Perc_Passes_Completed', data=pass_acc.nlargest(10, 'Perc_Passes_Completed'))\nplt.xticks(rotation=90)","7ff333e0":"df['Total_Cards'] = df['Yellow_Cards']+df['Red_Cards']\ndf[['Name', 'Club', 'Yellow_Cards', 'Red_Cards', 'Total_Cards']].nlargest(10, 'Total_Cards')","908b52a7":"plt.figure(figsize=(10,6))\nax =sns.barplot(x='Name', y='Total_Cards', data=df.nlargest(10, 'Total_Cards'))\nplt.xticks(rotation=90)","1526381d":"team_cards=df.groupby(by='Club', as_index=False)['Total_Cards'].sum().sort_values(by='Total_Cards',ascending=False)\nteam_cards","cdf86662":"plt.figure(figsize=(10,6))\nax =sns.barplot(x='Club', y='Total_Cards', data=team_cards)\nplt.xticks(rotation=90)","1ec7d37a":"## Goal Involvement Efficiency","f8bfd26e":"- **West Brom** has **largest squad** with 30 players in it, followed by Arsenel and Man United with 29 each.\n  **Leeds United** has the **smallest squad** with 23 players under them.","4ed4f27b":"- Harry Kane, Son Heung-min and Marcus Rashford are the only players who had more Goal Involvement than expected among the top    attacking players. These three players had good efficiency infront of the Goal.","7af22574":"## Minutes Per Goal Involvement Efficiency","42bc6338":"## Importing Dataset","514f8ee9":"- Jesse Lingard has the biggest diference between the minutes per Goal Involvement and expected Goal Involvement. He took the least minutes per Goal Involvement in comparision to the expectation.\n- So Jesse Lingard was most efficient attacking player when looked in terms of minutes taken per Goal Involvement.","ce66b83b":"- Penalty Goals are the easiest goal a player can score just like free throws in basketball.\n- Any player can score penalty awarded to the fouled player unlike basketball.\n- So, Penalty Goals should not symbolize the goal scoring ability of player.","5562a421":"## Penalty Goals","233c061d":"- **Sheffield United** was the **most agressive team** in the league with most cards overall and **Liverpool FC** was the **least agressive** as they recieved the least number of cards in total.","97045039":"- **Above four** are the **youngest players** in English Premier league.","407806b3":"## Top Assist Getter","50095385":" Here We defined new dataframe with attack relevent columns that are following :-\n  \n- Goal_involvement     - Total Goals involvement of player which is sum of 'Goals' and 'Assists'.\n- min_per_goal_inv     - Minutes taken by a player per goal invovement in the league.\n- expected_goal_inv    - expected goal involvement is the sum of expected goal per match(xG) and expected assist per match(xA)                            multiiplied by total full matches played by player which inturn is equal to total minutes played divided by 90.\n- min_per_exp_goal_inv - Minutes taken by a player per expected goal invovement in the league.","7273df26":"- **Mohamed Elneny of Arsenal FC** followed by **Georginio Wjinaldum of Liverpool FC** were the **most efficient passer**s with atleast 1000 passes in the League.","24ee9533":"## Most Passes","109b22dc":"- Crystal Palace and West Ham United has one of the eldest players percentile and Tottenham Hotspur has the youngest player in their squad as well as their eldest player is around 26-27 years old. Machester United's average player age  is also the lowest amongst all the clubs in Premier League.","404e19a5":"## Efficiency of Top Players","eb56f695":"## Correlation Matrix","c6120f9b":"## Defender Goalscorer","ccd40bb7":"- **Bruno Fernandes of Manchester United** Scored the **most Penalty Goals (9)** followed by **Jamie vardy of leicester City (8)**.","87607d17":"## Importing Libraries","eb8d9baa":"- **Willy Cabellero** of Chelsea is the **oldest player** in the English Premier League.","668c9f24":"## Distinct Postions ","9390997c":"## Age Distribution in the league.","69141b7b":"- **Andrew Robertson** followed by **Trent Alexander-Arnold** both of Liverpool FC **attempted most Passes** in the league.","422232d6":"- **Manchester City** scored the **most goals** in the league with 80+ goals and **Sheffield United** scored the **least goals** scoring just under 20.","6ce8430b":"- Density plot above shown that most players in premier league are in there mid 20's which is prime age for a footballer.","9c847150":"## Most Efficient Passers","7f7a9184":"## Player distribution by nationality","3ff95e68":"- **Harry kane** is the **top scorer** of the league with 23 Goals followed by **Mohammed salah** with 22 Goals.","c11620fa":"# ------------English Premier League 2020-21 Analysis------------\n","02d2ed2e":"SUMMARY :\n- **Crystal Palace** and **West Ham United** has one of the eldest players percentile and** Tottenham Hotspur** has the youngest player in their squad\n- **West Brom** has largest squad with 30 players in it. **Leeds United** has the smallest squad with 23 players under them.\n- The most number of Goals scored by a Team : **Manchester City**\n- The most number of Goals scored by a player : **Harry Kane** \n- **Harry Kane, Son Heung-min and Marcus Rashford** are the most efficient players in term of Goal Involvement.\n- **Jesse Lingard** is the most efficient player in terms of minutes per Goal Involvement.\n- The most number of Penalty Goals scored by a Player : **Bruno Fernandes(9)**.\n- The most number of Goals by a Defender : **Lewis Dunk and Kurt Zuma (5)**.\n- The most number of Passes attempted by a player : **Andrew Robertson**.\n- The most Efficient Passer with atleast 1000 passes : **Mohamed Elneny**.\n- The most number of Total Cards recieved by a player: **John Mcginn**.\n- The most number of Total Cards recieved by a Team : **Sheffield United**.","b2bfa30c":"- **Lewis Dunk** and **Kurt Zuma** scored **most Goals (5)** playing as **Defenders**.","c6dbf71f":"## Top Goal Scorer","d6d44cd2":"- **Most players** are from **England(192**) as expected, followed by **France(31)**, **Brazil(27)** and then **Spain (26)**.","f1c27b66":"## Most Agressive Team and Player","9260b736":"- Again **Harry Kane** scored the **most-14 assists** followed by **Kevin De Bruyne's 12 assists**.","c44aa1d3":"## Goals Scored by Clubs","704021e7":"- **John Mcginn of Aston Villa** followed by **Harry Maguire of Man United** got the most number of Cards for aggresive actions."}}