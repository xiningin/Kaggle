{"cell_type":{"dfdf4e9b":"code","49f02b67":"code","19777fbb":"code","64d17492":"code","bde166ef":"code","78356a88":"code","d85a3911":"code","0d9ea452":"code","50376f82":"code","c974fe4a":"code","f15b31cc":"code","456103eb":"code","d9bfd5be":"code","f739f44f":"code","9d70a360":"code","4cac8289":"code","04746c38":"code","9483f6e6":"code","60b093fb":"code","91701498":"code","c828681d":"code","d351010f":"code","6fe047fd":"code","bb336f8a":"code","51a30f73":"code","715ed0d7":"code","24b2123c":"code","c1584a9f":"code","179219fa":"code","38341723":"code","2e971499":"code","440600d6":"code","c9011b90":"code","af14bc19":"code","a2aa19b4":"code","922bd64a":"code","bb7eba72":"code","95e6f4a1":"code","80e97a5b":"code","deeb1270":"code","86217190":"code","6f63d12b":"code","13840ce8":"code","92b6b954":"code","3fe160d9":"code","eb43ba14":"markdown","a4abfc19":"markdown","726591ea":"markdown"},"source":{"dfdf4e9b":"import pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nfrom sklearn.cluster import KMeans\ncolor = sns.color_palette()\nfrom IPython.core.display import display, HTML\ndisplay(HTML(\"<style>.container { width:100% !important; }<\/style>\"))\n%matplotlib inline","49f02b67":"salary_df = pd.read_csv(\"..\/input\/nba_2017_salary.csv\");salary_df.head()\n","19777fbb":"pie_df = pd.read_csv(\"..\/input\/nba_2017_pie.csv\");pie_df.head()","64d17492":"plus_minus_df = pd.read_csv(\"..\/input\/nba_2017_real_plus_minus.csv\");plus_minus_df.head()","bde166ef":"br_stats_df = pd.read_csv(\"..\/input\/nba_2017_br.csv\");br_stats_df.head()","78356a88":"wiki_df = pd.read_csv(\"..\/input\/nba_2017_player_wikipedia.csv\");wiki_df.head()\n","d85a3911":"twitter_df = pd.read_csv(\"..\/input\/nba_2017_twitter_players.csv\");twitter_df.head()","0d9ea452":"## Plus_minus\nplus_minus_df.rename(columns={\"NAME\":\"PLAYER\", \"WINS\": \"WINS_RPM\"}, inplace=True)\nplayers = []\nfor player in plus_minus_df[\"PLAYER\"]:\n    plyr, _ = player.split(\",\")\n    players.append(plyr)\nplus_minus_df.drop([\"PLAYER\"], inplace=True, axis=1)\nplus_minus_df[\"PLAYER\"] = players\nplus_minus_df.head()","50376f82":"## br_stats\nnba_players_df = br_stats_df.copy()\nnba_players_df.rename(columns={'Player': 'PLAYER','Pos':'POSITION', 'Tm': \"TEAM\", 'Age': 'AGE', \"PS\/G\": \"POINTS\"}, inplace=True)\nnba_players_df.drop([\"G\", \"GS\", \"TEAM\"], inplace=True, axis=1)\nnba_players_df = nba_players_df.merge(plus_minus_df, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","c974fe4a":"## Pie\npie_df_subset = pie_df[[\"PLAYER\", \"PIE\", \"PACE\", \"W\"]].copy()\nnba_players_df = nba_players_df.merge(pie_df_subset, how=\"inner\", on=\"PLAYER\")\nnba_players_df.head()","f15b31cc":"## Salary \nsalary_df.rename(columns={'NAME': 'PLAYER'}, inplace=True)\nsalary_df[\"SALARY_MILLIONS\"] = round(salary_df[\"SALARY\"]\/1000000, 2)\nsalary_df.drop([\"POSITION\",\"TEAM\", \"SALARY\"], inplace=True, axis=1)\nsalary_df.head()","456103eb":"diff = list(set(nba_players_df[\"PLAYER\"].values.tolist()) - set(salary_df[\"PLAYER\"].values.tolist()))","d9bfd5be":"len(diff)\n","f739f44f":"nba_players_with_salary_df = nba_players_df.merge(salary_df); ","9d70a360":"## Wiki\nwiki_df.rename(columns={'names': 'PLAYER', \"pageviews\": \"PAGEVIEWS\"}, inplace=True)\nmedian_wiki_df = wiki_df.groupby(\"PLAYER\").median()\nmedian_wiki_df_small = median_wiki_df[[\"PAGEVIEWS\"]]\nmedian_wiki_df_small = median_wiki_df_small.reset_index()\nnba_players_with_salary_wiki_df = nba_players_with_salary_df.merge(median_wiki_df_small)","4cac8289":"## Twitter\nnba_players_with_salary_wiki_twitter_df = nba_players_with_salary_wiki_df.merge(twitter_df)","04746c38":"## Null value\nnba_players_with_salary_wiki_twitter_df = nba_players_with_salary_wiki_twitter_df.dropna(how = 'any')","9483f6e6":"nba_players_with_salary_wiki_twitter_df.head()","60b093fb":"nba_analysis = nba_players_with_salary_wiki_twitter_df.loc[:,[\"PLAYER\", \"RPM\", \"WINS_RPM\", \"PIE\", \"W\", \"SALARY_MILLIONS\", \"PAGEVIEWS\", \"TWITTER_FAVORITE_COUNT\", \"TWITTER_RETWEET_COUNT\"]]\nnba_analysis.head()","91701498":"## Salary \nnba_analysis['SALARY_MILLIONS'].hist(bins=70)","c828681d":"## Pageviews on Wiki\nnba_analysis[\"PAGEVIEWS\"].hist(bins=50)","d351010f":"##TWITTER_FAVORITE_COUNT\nnba_analysis[\"TWITTER_FAVORITE_COUNT\"].hist(bins=50)","6fe047fd":"## TWITTER_RETWEET_COUNT\nnba_analysis[\"TWITTER_RETWEET_COUNT\"].hist(bins=50)","bb336f8a":"## Social Impact\nfig,axes=plt.subplots(1,1)\nsns.distplot(np.log(nba_analysis[\"PAGEVIEWS\"]),hist=False, kde_kws={\"label\":\"PAGEVIEWS\"})\nsns.distplot(np.log(nba_analysis[\"TWITTER_FAVORITE_COUNT\"]),hist=False, kde_kws={\"label\":\"TWITTER_FAVORITE_COUNT\"})\nsns.distplot(np.log(nba_analysis[\"TWITTER_RETWEET_COUNT\"]),hist=False, kde_kws={\"label\":\"TWITTER_RETWEET_COUNT\"})\nplt.xlabel('Social Impact')","51a30f73":"nba_analysis['LOG_PAGEVIEWS'] = np.log(nba_analysis['PAGEVIEWS'])\nnba_analysis['LOG_TWITTER_FAVORITE_COUNT'] = np.log(nba_analysis['TWITTER_FAVORITE_COUNT'])\nnba_analysis['LOG_TWITTER_RETWEET_COUNT'] = np.log(nba_analysis['TWITTER_RETWEET_COUNT'])","715ed0d7":"nba_analysis = nba_analysis.drop(['PAGEVIEWS', 'TWITTER_FAVORITE_COUNT', 'TWITTER_RETWEET_COUNT'], axis = 1)\nnba_analysis = nba_analysis.replace(-np.inf, np.nan)\nnba_analysis = nba_analysis.dropna(how = \"any\")\nnba_analysis.head()","24b2123c":"plt.subplots(figsize=(20,15))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  2016-2017 Season (STATS & SALARY & Social Influence)\")\ncorr = nba_players_with_salary_wiki_twitter_df.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values)","c1584a9f":"plt.subplots(figsize=(10,5))\nax = plt.axes()\nax.set_title(\"NBA Player Correlation Heatmap:  Salary and Social Impact\")\ncorr = nba_analysis.corr()\nsns.heatmap(corr, \n            xticklabels=corr.columns.values,\n            yticklabels=corr.columns.values,\n            annot=True)","179219fa":"!pip install yellowbrick","38341723":"nba_analysis_noplayer = nba_analysis.drop([\"PLAYER\"], axis = 1)","2e971499":"from yellowbrick.features import Rank2D\n\nvisualizer = Rank2D(algorithm=\"pearson\")\nvisualizer.fit_transform(nba_analysis_noplayer)\nvisualizer.poof()","440600d6":"sns.lmplot(x=\"SALARY_MILLIONS\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)","c9011b90":"sns.lmplot(x=\"TWITTER_FAVORITE_COUNT\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)","af14bc19":"sns.lmplot(x=\"TWITTER_RETWEET_COUNT\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)","a2aa19b4":"sns.lmplot(x=\"PIE\", y=\"WINS_RPM\", data=nba_players_with_salary_wiki_twitter_df)","922bd64a":"results_1 = smf.ols('W ~SALARY_MILLIONS', data=nba_analysis).fit()","bb7eba72":"print(results_1.summary())","95e6f4a1":"results_2 = smf.ols('WINS_RPM ~SALARY_MILLIONS', data=nba_analysis).fit()","80e97a5b":"print(results_2.summary())","deeb1270":"results_3 = smf.ols('WINS_RPM ~ LOG_PAGEVIEWS + LOG_TWITTER_FAVORITE_COUNT + LOG_TWITTER_RETWEET_COUNT', data=nba_analysis).fit()","86217190":"print(results_3.summary())","6f63d12b":"results_4 = smf.ols('W ~ LOG_PAGEVIEWS + LOG_TWITTER_FAVORITE_COUNT ', data=nba_analysis).fit()","13840ce8":"print(results_4.summary())","92b6b954":"results_5 = smf.ols('WINS_RPM ~ PIE ', data=nba_analysis).fit()","3fe160d9":"print(results_5.summary())","eb43ba14":"## Exploratory data analysis","a4abfc19":"## Data Cleaning","726591ea":"## Import Data"}}