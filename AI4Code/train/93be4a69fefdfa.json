{"cell_type":{"6be5956d":"code","cc2a1976":"code","31cf16b9":"code","4e920136":"code","9cf0733b":"code","8871cbd0":"code","9edc0238":"code","eebf0a65":"code","40dbe914":"code","715abc72":"code","b4c16dfd":"code","4c9c70c8":"code","43853453":"code","63c66678":"code","b922fb06":"markdown","6d7e5888":"markdown","53189cd2":"markdown","8c5bb85c":"markdown"},"source":{"6be5956d":"import os\nimport re\nimport json\nimport glob\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\n\nos.listdir('\/kaggle\/input\/coleridgeinitiative-show-us-the-data')","cc2a1976":"train = pd.read_csv('..\/input\/coleridgeinitiative-show-us-the-data\/train.csv')\ntrain","31cf16b9":"train.info()","4e920136":"for col in train.columns:\n    print(f\"{col}: {len(train[col].unique())}\")","9cf0733b":"train['dataset_title'].value_counts()","8871cbd0":"from wordcloud import WordCloud, STOPWORDS\n\nwords_in_titles = list(train.pub_title.str.split(expand=True).stack())\n\nwordcloud = WordCloud(stopwords = STOPWORDS,\n                      background_color = \"white\",\n                      width = 3000,\n                      height = 2000\n                     ).generate(' '.join(words_in_titles))\nplt.figure(1, figsize = (18, 12))\nplt.imshow(wordcloud)\nplt.axis('off')\nplt.show()","9edc0238":"from collections import defaultdict\n\nwords_in_titles_by_dataset = defaultdict(list)\n\n# Separating out positive and negative words (i.e., words appearing in negative and positive tweets),\n# in order to visualize each set of words independently\nfor _, row in train.iterrows():\n    words_in_titles_by_dataset[row['dataset_title']].extend(row['pub_title'].split())\n\n# Defining our word cloud drawing function\ndef wordcloud_draw(data, color = 'white'):\n    wordcloud = WordCloud(stopwords = STOPWORDS,\n                          background_color = color,\n                          width = 3000,\n                          height = 2000\n                         ).generate(' '.join(data))\n    plt.figure(1, figsize = (12, 8))\n    plt.imshow(wordcloud)\n    plt.axis('off')\n    plt.show()\n\nfor dataset_title in train['dataset_title'].unique():\n    print(\"Wordcloud for\", dataset_title, \":\")\n    wordcloud_draw(words_in_titles_by_dataset[dataset_title])","eebf0a65":"# Gathering the files paths\ntrain_files = glob.glob(\"..\/input\/coleridgeinitiative-show-us-the-data\/train\/*.json\")\ntest_files = glob.glob(\"..\/input\/coleridgeinitiative-show-us-the-data\/test\/*.json\")","40dbe914":"# Generate the training publications dataframe\ndf_train_publications = pd.DataFrame()\n\nfor train_file in train_files:\n    file_data = pd.read_json(train_file)\n    file_data.insert(0,'pub_id', train_file.split('\/')[-1].split('.')[0])\n    df_train_publications = pd.concat([df_train_publications, file_data])\n\ndf_train_publications.to_csv(\"df_train_publications.csv\",index=False)\n\ndf_train_publications","715abc72":"# Generate the testing publications dataframe\ndf_test_publications = pd.DataFrame()\n\nfor test_file in test_files:\n    file_data = pd.read_json(test_file)\n    file_data.insert(0,'pub_id', test_file.split('\/')[-1].split('.')[0])\n    df_test_publications = pd.concat([df_test_publications, file_data])\n\ndf_test_publications.to_csv(\"df_test_publications.csv\",index=False)\n\ndf_test_publications","b4c16dfd":"def clean_text(txt):\n    return re.sub('[^A-Za-z0-9]+', ' ', str(txt).lower()).strip()","4c9c70c8":"submission_df = pd.read_csv('..\/input\/coleridgeinitiative-show-us-the-data\/sample_submission.csv', index_col=0)","43853453":"submission_df","63c66678":"submission_df = pd.read_csv('..\/input\/coleridgeinitiative-show-us-the-data\/sample_submission.csv', index_col=0)\ndatasets_titles = [x.lower() for x in train['dataset_title'].unique()]\n\nlabels = []\nfor index in submission_df.index:\n    publication_text = df_test_publications[df_test_publications['pub_id'] == index].text.str.cat(sep='\\n').lower()\n    label = []\n    for dataset_title in datasets_titles:\n        if dataset_title in publication_text:\n            label.append(clean_text(dataset_title))\n    labels.append('|'.join(label))\n\nsubmission_df['PredictionString'] = labels\n\nsubmission_df.to_csv('submission.csv')\n\nsubmission_df","b922fb06":"## Loading JSON Contents into a Pandas DataFrame","6d7e5888":"# Wordcloud of the Articles Titles","53189cd2":"## Wordclouds of Article Titles by Dataset","8c5bb85c":"## Na\u00efve Dataset Title Matching Submission"}}