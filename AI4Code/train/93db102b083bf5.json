{"cell_type":{"eeae340e":"code","264a18e4":"code","567ec033":"code","cb52d584":"code","e16810b8":"code","60c8542d":"code","df152dca":"code","b355f60d":"code","432062d3":"code","bdd7bf52":"code","8ea38b62":"code","8a7c18a1":"code","7a2b3412":"code","dacd2e16":"code","b20ef121":"code","493a861a":"code","c77d4e97":"code","e4656718":"code","3f844633":"code","58052474":"code","65b4a772":"code","b20279f1":"code","b8e5e0b7":"code","127ab809":"code","9386a1ba":"code","c819b5ce":"code","b5478450":"code","379e5887":"code","c943f741":"code","4ccbe316":"code","837df041":"code","dbaf424d":"code","54b6df2e":"code","3e28ba4f":"markdown","13d2799d":"markdown","cb150389":"markdown","234fb890":"markdown","6ed52ac4":"markdown","cfaf7d75":"markdown","57d361ec":"markdown","1f7e5c7d":"markdown","afe6f4bd":"markdown","048afc09":"markdown","5ebb8c57":"markdown","90feeaa9":"markdown","39d834c0":"markdown","5cf115bd":"markdown","c5ab454e":"markdown","02439381":"markdown","961b4192":"markdown","c80cad78":"markdown","db9be225":"markdown","baede1ef":"markdown","db4596f7":"markdown"},"source":{"eeae340e":"# Import useful libraries\nimport numpy as np\nimport pandas as pd\nimport sqlite3\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","264a18e4":"con = sqlite3.connect('\/kaggle\/input\/sf-bay-area-bike-share\/database.sqlite')\ncur = con.cursor()","567ec033":"pd.read_sql_query('SELECT name FROM sqlite_master', con)","cb52d584":"pd.read_sql_query('SELECT * FROM station LIMIT 5', con)","e16810b8":"pd.read_sql_query('SELECT * FROM status LIMIT 5', con)","60c8542d":"pd.read_sql_query('SELECT * FROM trip LIMIT 5', con)","df152dca":"pd.read_sql_query('SELECT * FROM weather LIMIT 5', con)","b355f60d":"trip = pd.read_csv('\/kaggle\/input\/sf-bay-area-bike-share\/trip.csv')","432062d3":"trip.head()","bdd7bf52":"trip['date'] = pd.to_datetime(trip['start_date'], dayfirst=True)","8ea38b62":"trip['month'] = trip.date.dt.month","8a7c18a1":"base_color = sns.palettes.color_palette()[0]\n\nmonth = trip.groupby('month').count()['date'].sort_values()\n\nsns.countplot(x='month', data=trip, color=base_color, order=month.index);","7a2b3412":"\nmonth","dacd2e16":"query = \"\"\"\n    SELECT s.city, COUNT(*) as number_of_trips\n    FROM station AS s\n    INNER JOIN trip as t\n        ON s.id = t.start_station_id\n    GROUP BY s.city\n    ORDER BY number_of_trips DESC\n\"\"\"\n\npd.read_sql_query(query, con)","b20ef121":"query = \"\"\"\n    SELECT s.city, COUNT(*) as number_of_trips\n    FROM station AS s\n    INNER JOIN trip as t\n        ON s.id = t.end_station_id\n    GROUP BY s.city\n    ORDER BY number_of_trips DESC\n\"\"\"\n\npd.read_sql_query(query, con)","493a861a":"query = \"\"\"\n    SELECT s.id, s.name, s.dock_count, COUNT(*) AS bikes_run_out\n    FROM station as s\n    INNER JOIN status as st\n        ON s.id = st.station_id\n    WHERE st.bikes_available =0\n    GROUP BY s.name\n    ORDER BY bikes_run_out DESC\n    LIMIT 10\n\"\"\"\n\nrun_out = pd.read_sql_query(query, con)\nrun_out.head(3)","c77d4e97":"plt.barh(run_out['name'], run_out['bikes_run_out']);","e4656718":"trip['duration'].sort_values(ascending=False).head(10)","3f844633":"trip['duration'].sort_values().head(10)","58052474":"trip['duration'].mean()","65b4a772":"weather = pd.read_csv('\/kaggle\/input\/sf-bay-area-bike-share\/weather.csv')\nweather.head(3)","b20279f1":"weather['date'] = pd.to_datetime(weather['date'], dayfirst=True)","b8e5e0b7":"weather.head(3)","127ab809":"wt = trip.join(weather, how='inner', lsuffix='l_')[['id', 'date', 'mean_temperature_f', 'mean_humidity', 'mean_wind_speed_mph', 'cloud_cover']]\nwt.head()","9386a1ba":"plt.figure(figsize=(20,6))\nsns.countplot(wt['mean_temperature_f'].dropna().astype(int), color=base_color);","c819b5ce":"plt.figure(figsize=(20,6))\nsns.countplot(wt['mean_humidity'].dropna().astype(int), color=base_color);","b5478450":"plt.figure(figsize=(20,6))\nsns.countplot(wt['mean_wind_speed_mph'].dropna().astype(int), color=base_color);","379e5887":"plt.figure(figsize=(20,6))\nsns.countplot(y=wt['cloud_cover'].dropna().astype(int), color=base_color);","c943f741":"trip.head()","4ccbe316":"query = \"\"\"\n    SELECT t.start_station_name, t.end_station_name, COUNT(*) AS number_of_trips\n    FROM trip as t\n    GROUP BY t.start_station_name, t.end_station_name\n    ORDER BY number_of_trips DESC\n    LIMIT 15\n\"\"\"\n\npd.read_sql_query(query, con)","837df041":"query = \"\"\"\n    WITH stations AS\n    (\n        SELECT s.id as station_id,\n        CASE\n           -- m\/d\/yyyy\n           WHEN (length(installation_date) = 8 AND substr(installation_date,2,1) = '\/') \n           THEN substr(installation_date,5,4)||'-0'||substr(installation_date,1,1)||'-0'||substr(installation_date,3,1)\n           -- m\/dd\/yyyy\n           WHEN (length(installation_date) = 9 AND substr(installation_date,2,1) = '\/') \n           THEN substr(installation_date,6,4)||'-0'||substr(installation_date,1,1)||'-'||substr(installation_date,3,2)\n           -- mm\/d\/yyyy\n           WHEN (length(installation_date) = 9 AND substr(installation_date,3,1) = '\/') \n           THEN substr(installation_date,6,4)||'-0'||substr(installation_date,1,2)||'-'||substr(installation_date,4,1)\n           -- mm\/dd\/yyyy\n           WHEN (length(installation_date) = 10 AND substr(installation_date,3,1) = '\/') \n           THEN substr(installation_date,7,4)||'-'||substr(installation_date,1,2)||'-'||substr(installation_date,4,2)\n           ELSE installation_date\n           END AS installed_date\n        FROM station AS s\n    ),\n    trips AS\n    (\n        SELECT t.start_station_id, t.id as trip_id\n        FROM trip AS t\n    )\n    SELECT strftime('%Y\/%m', s.installed_date) as installation_date, COUNT(*) AS number_of_trips\n    FROM stations AS s\n    INNER JOIN trips as t\n        ON s.station_id = t.start_station_id\n    GROUP BY installation_date\n    ORDER BY number_of_trips DESC\n    LIMIT 15 \n\"\"\"\n\ndf2 = pd.read_sql_query(query, con)\ndf2","dbaf424d":"f\"maximum trip time is {round(trip['duration'].max()\/360)} hours\"","54b6df2e":"trip.groupby('subscription_type').mean()[['duration']].plot(kind='bar')","3e28ba4f":"## does subscribers rent bikes for longer time than non-subscribers?","13d2799d":"It's obvious that Non-subscribers rent bikes for longer than subscribers.","cb150389":"## what is the average time for a ride?","234fb890":"## AND DONE :D\nif you liked it please upvote.","6ed52ac4":"## Bike Share Investigation\n\nIn this notebook we will invetsigte **SF Bay Area Bike Share** dataset and try to answer some questions about the data using SQL and data visualization.\n\n","cfaf7d75":"## which month has the most number of trips?","57d361ec":"**Note: the CASE used in the code below is taken from `Data Analysis with SQLite (SF Bike Sharing)` by Azim Salikhov**","1f7e5c7d":"## Does the installation date of the station affect the number of rented bikes?","afe6f4bd":"## if \ud83d\udc4d please \u2b06\ufe0f","048afc09":"## which stations often run out of bikes?","5ebb8c57":"## how does the weather affect rate of rental?","90feeaa9":"It does not seem to be any relation between installation time and number od trips.","39d834c0":"**We can see that `August` has the most number of trips, followed by `July`, then `Octabre`.**","5cf115bd":"## Answering the Question","c5ab454e":"**We can see that most trips start from San Francisco**","02439381":"## Questions:-\n- which month has the most number of trips?\n- which cities have the most number of trips?\n- which stations often run out of bikes?\n- what is the average time for a ride?\n- how does the weather affect rate of rental?\n- what are the most common routes?\n- Does the installation date of the station affect the number of rented bikes?\n- what is the longest time for a trip?\n- does subscribers rent bikes for longer time than non-subscribers?","961b4192":"We Can see that low and high tempreture affect the number of rides.","c80cad78":"## what is the longest time for a trip?","db9be225":"## which cities have the most number of trips?","baede1ef":"## what are the most common routes?","db4596f7":"## Data Loading and first look"}}