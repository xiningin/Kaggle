{"cell_type":{"dee81f54":"code","79938593":"code","6586d317":"code","01df4a7b":"code","fa234f5e":"code","0c9dd516":"code","29858083":"code","886bb7dd":"code","b379b78b":"code","a0acbf35":"code","ed514871":"code","b67fc9a8":"code","ca76a5e0":"code","8db98ef3":"code","e268b377":"code","5124e75f":"code","ce4c8f1b":"code","68bbfa3b":"code","ca303d50":"code","6b8449ae":"code","171027ac":"code","f34e312d":"code","40785e2f":"code","0fec848c":"code","b3fafb91":"code","4d113ea2":"code","f3e126a0":"code","11efc495":"code","5c653c5e":"code","de52d0a4":"code","b9c1e9ab":"code","025bda04":"code","08a74ddc":"code","94112427":"code","c59002cb":"code","d0d7546e":"code","fe8dbeaf":"code","fcce0981":"code","78835975":"markdown","a8f559ee":"markdown","9c87db1a":"markdown","81fdd0b2":"markdown","c64d9e0e":"markdown","23b723d0":"markdown","fe80d270":"markdown","7416033c":"markdown","53f0d456":"markdown","a8c4f98e":"markdown","bad76033":"markdown","0a685d83":"markdown","ee95de1b":"markdown","378fe986":"markdown"},"source":{"dee81f54":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n# sns.set(style=\"dark\")\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","79938593":"PlayList = pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/PlayList.csv')\nPlayerTrackData = pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/PlayerTrackData.csv')\nInjuryRecord = pd.read_csv('\/kaggle\/input\/nfl-playing-surface-analytics\/InjuryRecord.csv')","6586d317":"PlayList.head()","01df4a7b":"PlayList.info()","fa234f5e":"PlayList.isna().sum()","0c9dd516":"PlayList.describe(include='all')","29858083":"PlayList.RosterPosition.value_counts()","886bb7dd":"def bar_lables(var, tit, df, size=1):\n    f, ax = plt.subplots(1, 1, figsize=(4*size, 5))\n    total = float(len(df))\n    g = sns.countplot(df[var], order=df[var].value_counts().index, palette='Blues', edgecolor='Navy')\n    g.set_title(f\"Count per {tit}\", fontsize=20)\n    ax.set_xticklabels(ax.get_xticklabels(), rotation=40, ha='right', fontsize=10)\n    for p in ax.patches:\n        height = p.get_height()\n        ax.text(p.get_x() + p.get_width()\/2.,\n                height + 3,\n                '{:1.2f}%'.format(100*height\/total), ha='center', fontsize=10)","b379b78b":"bar_lables('RosterPosition', 'Position', PlayList, size=4)","a0acbf35":"PlayList.StadiumType.value_counts()","ed514871":"List_Sta_typ = PlayList[\"StadiumType\"].astype(str).str.strip().str.lower().unique()\n# print(List_Sta_typ)\n\nList_initials = []\n\nfor i in range(len(List_Sta_typ)):\n    List_initials.append(List_Sta_typ[i][0:3])","b67fc9a8":"List_initials = set(List_initials)\n\nfor j in List_initials:\n    print(f\"Initial: {j}\")\n    print(PlayList[PlayList[\"StadiumType\"].fillna(\"\").str.lower().str.startswith(j)].StadiumType.unique())\n    print()","ca76a5e0":"outdoor = ['Outdoor', 'Outdoors', 'Cloudy', 'Heinz Field', \n              'Outdor', 'Ourdoor', 'Outside', 'Outddors', \n              'Outdoor Retr Roof-Open', 'Oudoor', 'Bowl']\n\nindoor_closed = ['Indoors', 'Indoor', 'Indoor, Roof Closed', 'Indoor, Roof Closed',\n                   'Retractable Roof', 'Retr. Roof-Closed', 'Retr. Roof - Closed', 'Retr. Roof Closed']\n\nindoor_open = ['Indoor, Open Roof', 'Open', 'Retr. Roof-Open', 'Retr. Roof - Open']\n\ndome_closed = ['Dome', 'Domed, closed', 'Closed Dome', 'Domed', 'Dome, closed']\n\ndome_open = ['Domed, Open', 'Domed, open']\n\nList_Types_Stat = [outdoor, indoor_closed, indoor_open, dome_closed, dome_open]","8db98ef3":"conditions_stadium = [PlayList['StadiumType'].isin(outdoor),\n                      PlayList['StadiumType'].isin(indoor_closed),\n                      PlayList['StadiumType'].isin(indoor_open),\n                      PlayList['StadiumType'].isin(dome_closed),\n                      PlayList['StadiumType'].isin(dome_open)]\n\nList_Types_Stat_name = [\"outdoor\", \"indoor_closed\", \"indoor_opened\", \"dome_closed\", \"dome_opened\"]\n\nPlayList['StadiumType_cl'] = np.select(conditions_stadium, List_Types_Stat_name, default='others')","e268b377":"PlayList['StadiumType_cl'].unique() # Cleaned data for Stadium Type","5124e75f":"# plt.figure(figsize=(10,6))\n# ax = sns.countplot(x='StadiumType_cl', order=PlayList.StadiumType_cl.value_counts().index, data=PlayList)\n# ax.set_xticklabels(ax.get_xticklabels(), rotation=40, ha='right')\n# plt.title(\"Qty per Stadium Type\")\n# plt.tight_layout()\n\nbar_lables('StadiumType_cl', 'Statium Type', PlayList, size=4)","ce4c8f1b":"PlayList['FieldType'].value_counts(normalize=True) * 100","68bbfa3b":"# # sns.countplot(x='FieldType', data = PlayList)\n# # plt.title(\"Qty per FieldType\")\n\n# bar_lables('FieldType', 'Field Type', PlayList)\n\ncolors = ['royalblue', 'cornflowerblue']\n\nPlayList.FieldType.str.get_dummies().sum().plot.pie(label='FieldType', \n                                                    autopct='%1.0f%%', \n                                                    colors=colors, startangle=90, fontsize=15)\nplt.axis('equal');","ca303d50":"# plt.figure(figsize=(10,8))\n# sns.countplot(x='FieldType', hue='StadiumType_cl', data = PlayList)\n\ng = sns.catplot(x='StadiumType_cl', col='FieldType', data=PlayList, kind='count',\n                height=6, palette='Blues', aspect=.7)\ng.set_xticklabels(rotation=45)","6b8449ae":"InjuryRecord.head()","171027ac":"InjuryRecord['BodyPart'].value_counts()","f34e312d":"plt.figure(figsize=(10,6))\nax = sns.countplot(x='BodyPart', order=InjuryRecord.BodyPart.value_counts().index, data=InjuryRecord, palette='Blues')\nax.set_xticklabels(ax.get_xticklabels(), rotation=40, ha='right')\nplt.title(\"Qty per Body Part\")\nplt.tight_layout()","40785e2f":"InjuryRecord","0fec848c":"sns.catplot(x='BodyPart', col='Surface', data=InjuryRecord, kind='count',\n                height=6, palette='Blues', aspect=.7)","b3fafb91":"# InjuryRecord.loc.groupby('BodyPart').sum()\nInjuryRecord[['BodyPart','DM_M1','DM_M7','DM_M28','DM_M42']].groupby('BodyPart').sum()","4d113ea2":"Inj_Surf_BodyPart = InjuryRecord.groupby(['Surface','BodyPart'])['DM_M1','DM_M7','DM_M28','DM_M42'].sum().reset_index()\nInj_Surf_BodyPart","f3e126a0":"Inj_Surf_BodyPart_New = pd.melt(Inj_Surf_BodyPart, id_vars=['Surface','BodyPart'], value_vars=['DM_M1','DM_M7','DM_M28','DM_M42'])\n\nsns.catplot(x='BodyPart', y='value', hue='Surface', col='variable',\n            data=Inj_Surf_BodyPart_New, kind='bar', height=4, aspect=.7, palette='Blues')","11efc495":"Relations_table = pd.merge(PlayList, InjuryRecord, how='left', on='PlayerKey')","5c653c5e":"col = ['PlayerKey', 'RosterPosition', 'PlayerDay', 'FieldType', 'Temperature', 'PlayType', 'Position', 'PositionGroup',\n       'StadiumType_cl', 'BodyPart', 'Surface', 'DM_M1', 'DM_M7', 'DM_M28', 'DM_M42']\n\nRelations_table = Relations_table[col].copy()","de52d0a4":"Relations_table.info()","b9c1e9ab":"sns.heatmap(Relations_table.isnull(), cbar=False)","025bda04":"Relations_table.dropna(inplace=True)","08a74ddc":"Relations_table.info()","94112427":"Relations_table","c59002cb":"plt.figure(figsize=(16,8))\ng = sns.countplot(y=\"PlayType\", hue=\"Surface\", \n                  order=Relations_table['PlayType'].value_counts().index, \n                  data=Relations_table, palette='Blues')\nplt.title(\"Compare PlayType per Surface\", fontsize=20)","d0d7546e":"sns.catplot(x=\"Temperature\", y=\"Surface\", row=\"BodyPart\",\n                kind=\"box\", orient=\"h\", height=1.5, aspect=5,\n                data=Relations_table.query(\"Temperature > 0\"), palette='Blues');","fe8dbeaf":"sns.catplot(x=\"Temperature\", y=\"Surface\", row=\"PlayType\",\n                kind=\"box\", orient=\"h\", height=1.5, aspect=5,\n                data=Relations_table.query(\"Temperature > 0\"), palette='Blues');","fcce0981":"plt.figure(figsize=(16,8))\ng = sns.countplot(y=\"Position\", hue=\"Surface\", \n                  order=Relations_table['Position'].value_counts().index, \n                  data=Relations_table, palette='Blues')\nplt.title(\"Injuries: Position per Surface\", fontsize=20)","78835975":"As these columns, \"DM_M\" represent the same information, with varying days, let's change to just one column and visualize.","a8f559ee":"We notice that there are 3 types with variations in opened and closed and some others, so we have to clear this descriptions:\n* Outdoor\n* Indoor\n* Dome","9c87db1a":"Now, we have many missed data. For this analysis we will remove any rows with missing data.","81fdd0b2":"Most missed days are from 1 to 6.","c64d9e0e":"We noticed no difference and are the two with the largest number of injuries, independent of the field type.","23b723d0":"# EDA PlayList","fe80d270":"The temperature is not relevant.","7416033c":"# Will be continued, it is not finished...","53f0d456":"## The Challenge\nYour challenge is to characterize any differences in player movement between the playing surfaces and to identify specific variables (e.g., field surface, weather, position, play type, etc.) that may influence player movement and the risk of injury. ","a8c4f98e":"# EDA Merging the datasets PlayList with InjuryRecord","bad76033":"## Introduction\nThis page describes the datasets and variables provided to examine the effects that playing on synthetic turf versus natural turf can have on player movements and the factors that may contribute to lower extremity injuries. The data provided for analysis are 250 complete player in-game histories from two subsequent NFL regular seasons. Three different files in .csv format are provided, documenting injuries, player-plays, and player movement during plays. This manual describes the specifics of each variable contained within the datasets as well as guidelines on the best approach to processing the information.","0a685d83":"Let's try to automate this process but I believe I will have to manually intervene some.","ee95de1b":"# Can you investigate the relationship between the playing surface and the injury and performance of NFL athletes?","378fe986":"# EDA Data Injury Record"}}