{"cell_type":{"7297e412":"code","7c548b1f":"code","7fe543d6":"code","00d5d1ba":"code","fa21f31b":"code","f9b21a06":"code","c3e48db7":"markdown"},"source":{"7297e412":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n%matplotlib inline\nimport matplotlib.pyplot as plt ","7c548b1f":"def do_plot(moon_info, tag):\n    day = moon_info.loc[:,'days'] - moon_info.loc[:,'days'].iloc[0]\n    az = moon_info.loc[:,'Az']       \n    az_flat = moon_info['Az'].map(lambda x: 50) # trick,  to project eclipse in a line\n    \n    fm = moon_info.loc[:,'Fullmoon']*100\n    nm = moon_info.loc[:,'Newmoon']*100\n    ec = moon_info.loc[:,'Eclipse']*50\n    \n    #rolling_dec_max = moon_info.rolling(120).max()  - 90\n    #rolling_dec_min = moon_info.rolling(120).min()\n\n    #print (tag)\n    plt.figure(figsize=(24,6))\n    plt.scatter(day, az, s=fm**1.3, alpha=0.4, color=\"yellow\", edgecolors=\"silver\", linewidth=2) # fm yellow\n    plt.scatter(day, az, s=nm**1.3, alpha=0.4, color=\"silver\", edgecolors=\"silver\", linewidth=2) # nw gray\n    plt.scatter(day, az, s=ec**1.3, alpha=0.8, color=\"black\", edgecolors=\"black\", linewidth=2)   # eclipse on Az black\n    plt.scatter(day, az_flat, s=ec**1.3, alpha=0.8, color=\"black\", edgecolors=\"black\", linewidth=2) # eclipse on flat line\n    plt.xlabel(\"Years in BCE\", fontsize=14)\n    plt.ylabel(\"azimuth\", fontsize=14)\n\n    nrows, _ = moon_info.shape\n    nstep =  nrows \/\/ 37 # ~(18.6 \/\/ 2)\n    ticks = range(nstep,nrows,nstep)\n    plt.xticks( ticks,  moon_info.index[ticks], rotation='vertical',fontsize=18)\n    plt.grid(color='r', linestyle=':', linewidth=.5)\n    plt.title(\n      (\"\\n%s - starting %s BCE\\n\\nPlot of FullMoon , NewMoon and Eclipse\\n\" % ( tag, moon_info.index[0] ) )\n      + \"FullMoon in yellow -- NewMoon in gray \\n Eclipse in black -- Total in big, Partial medium and Small not visible\",\n        fontsize=20\n    ) \n    plt.show()\n\n    if (True): #all phases -- too dense\n        kmoon_info = moon_info[moon_info.Paksha == 'Krishna']\n        smoon_info = moon_info[moon_info.Paksha == 'Shukla']\n        kph = kmoon_info.loc[:,'Phase']\n        sph = smoon_info.loc[:,'Phase']\n        kaz = kmoon_info.loc[:,'Az']\n        saz= smoon_info.loc[:,'Az']\n        kday = kmoon_info.loc[:,'days'] - kmoon_info.loc[:,'days'].iloc[0]\n        sday = smoon_info.loc[:,'days'] - smoon_info.loc[:,'days'].iloc[0]\n        plt.figure(figsize=(20,8))\n        plt.scatter(kday, kaz, s=kph**1.2, alpha=0.4, color='lightcyan', edgecolors=\"grey\", linewidth=2) \n        plt.scatter(sday, saz, s=sph**1.2, alpha=0.4, color='yellow', edgecolors=\"grey\", linewidth=2)\n        plt.scatter(day, az, s=ec**1.3, alpha=0.8, color=\"black\", edgecolors=\"black\", linewidth=2)   # eclipse on Az black\n        plt.scatter(day, az_flat, s=ec**1.3, alpha=0.8, color=\"black\", edgecolors=\"black\", linewidth=2) # eclipse on flat line\n        plt.xlabel(\"Years in BCE\", fontsize=14)\n        plt.ylabel(\"azimuth\", fontsize=14)\n        plt.xticks( ticks,  moon_info.index[ticks], rotation='vertical', fontsize=18)\n        plt.grid(color='r', linestyle=':', linewidth=.5, which='minor', axis='y')\n        #plt.title(\"All phases\", fontsize=20) \n        plt.title(\n          (\"\\n%s - starting %s BCE\\nwaxing(yellow), waning(gray) and  eclipse(black)\" % ( tag, moon_info.index[0] ) )\n          #+ \"Waxing in yellow -- Waning in gray \\n Eclipse in black -- Total in big, Partial medium and Small not visible\"\n            ,\n            fontsize=20\n        ) \n        plt.show()","7fe543d6":"#Delhi BCE plots\nmoon_info =pd.read_csv(\"..\/input\/Delhi_Az_Eclipse.csv\").set_index('MoonRise') #BCE1900_to_BCE2000\nmoon_info = moon_info.sort_index()\n\n#standstills =  [ \n#    moon_info.iloc[ 365*19*n : 365*19*(n+1), : ]\n#    .loc[:,'Az']\n#    .rolling(30)\n#    .max()\n#    .idxmax() for n in range(5) \n#]\n\nstandstills = ['1904-10-04', '1922-10-22', '1940-10-22', '1958-10-22', '1976-10-22', '1998-10-22']\n\nif (1):\n    do_plot(moon_info.loc[standstills[0] : standstills[1]] , 'Delhi MoonPlot - 18year Span' )\n    do_plot(moon_info.loc[standstills[1] : standstills[2]] , 'Delhi MoonPlot - 18year Span' )\n    do_plot(moon_info.loc[standstills[2] : standstills[3]] , 'Delhi MoonPlot - 18year Span' )\n    do_plot(moon_info.loc[standstills[0] : standstills[2]] , 'Delhi MoonPlot - Two 18year Spans' )\n    do_plot(moon_info.loc[standstills[0] : standstills[3]] , 'Delhi MoonPlot- Three 18year Spans' )\n    ","00d5d1ba":"kuru_moon_info =pd.read_csv(\"..\/input\/Kuru_Az_Eclipse.csv\").set_index('MoonRise')\nstandstills =  [ kuru_moon_info.iloc[ 365*19*n : 365*19*(n+1), : ].loc[:,'Az'].rolling(30).max().idxmax() for n in range(5) ]\n\nif (1):\n    do_plot(kuru_moon_info.loc[standstills[0] : standstills[1]] , 'Kurukshetra - 1st 18year Span' )\n    do_plot(kuru_moon_info.loc[standstills[1] : standstills[2]] , 'Kurukshetra - 2nd 18year Span' )\n    do_plot(kuru_moon_info.loc[standstills[2] : standstills[3]] , 'Kurukshetra - 3rd 18year Span' )\n    do_plot(kuru_moon_info.loc[standstills[0] : standstills[2]] , 'Kurukshetra - Two 18year Spans' )\n    do_plot(kuru_moon_info.loc[standstills[0] : standstills[3]] , 'Kurukshetra - Three 18year Spans' )","fa21f31b":"display( kuru_moon_info.head(), kuru_moon_info[kuru_moon_info.Dec>0.1].describe())","f9b21a06":"import math\nss_max =  (kuru_moon_info.Az.rolling(window=1*365).max()-90)\nss_dec_max =  (kuru_moon_info.Dec.rolling(window=1*365).max()*180\/math.pi)\nax = ss_max.plot(figsize=(25,8) ,label='Az')\nax = ss_dec_max.plot(figsize=(25,8), ax=ax, label='Dec')\nax.grid(color='r', linestyle=':', linewidth=.5, which='major', axis='y')\nax.grid(color='r', linestyle=':', linewidth=.2, which='minor', axis='y')\n#ax.set_ylim(17,30)\n#_ = ax.set_xticks(kuru_moon_info.days)\n#_ = ax.set_xticklabels(kuru_moon_info.days)\nax.legend(loc=\"center\", fontsize=20)\n\n\nnrows, _ = kuru_moon_info.shape\nnstep =  nrows \/\/ 37 # ~(18.6 \/\/ 2)\nticks = range(nstep,nrows,nstep)\nax.set_xticks( ticks)  \nax.set_xticklabels(kuru_moon_info.index[ticks], rotation='vertical',fontsize=18)\n\nax.set_title(\"Annual Rolling Max - Moonrise Azimuth and Declination\", fontsize=30)\nax.set_xlabel(\"\", fontsize=14)\nax.set_ylabel(\"azimuth \/ declination\", fontsize=14)\n#ax.xticks( ticks,  moon_info.index[ticks], rotation='vertical', fontsize=18)\n#ax.grid(color='r', linestyle=':', linewidth=.5, which='minor', axis='y')\n\n#plt.title(\"All phases\", fontsize=20) \n_ = ax.minorticks_on()\nss_max.shape","c3e48db7":"## Exploration of  Moon phases, eclipse and standstill\nData is currently prepped offline joining python ephem library for moonrise, az,  phase, ra and dec info and https:\/\/eclipse.gsfc.nasa.gov\/JLEX\/JLEX-AS.html for eclipse info.  "}}