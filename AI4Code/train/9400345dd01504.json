{"cell_type":{"4e1201c1":"code","23e18289":"code","298b9153":"code","f370ba7d":"code","0f0bd579":"code","e8c14acc":"code","75e47a78":"code","75b8cf0b":"code","66a883d4":"code","5894ef21":"code","83150e1e":"code","c0fbcdd1":"code","8eca1ed3":"code","4e573cbe":"code","055d2c44":"code","7c1b817b":"code","966e1a31":"code","30068118":"code","b19f0b07":"code","bbedf8a6":"code","7e20468e":"code","350be3dd":"code","a61f268e":"code","df89b03d":"code","eb01e1cd":"code","bb783c2d":"code","79f974f9":"code","9b68a7fe":"code","cc51b188":"code","386fb40b":"code","9d48da41":"code","8efd7603":"code","9af8379f":"code","54438fc0":"code","01383875":"code","14fb7522":"code","8353c244":"code","d63479ce":"code","f8124bfa":"code","6c127e07":"code","088a9160":"code","1d7f91ec":"code","3d09d454":"code","1f59cf19":"code","f5761fb0":"code","a4027658":"code","738ea3e4":"code","1b0f161a":"code","d65eceab":"code","8200f037":"code","ab1b7933":"markdown"},"source":{"4e1201c1":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport statsmodels.api as sm\nimport statsmodels.formula.api as s","23e18289":"Age = pd.read_csv('..\/input\/age-and-finish\/Age.csv')\nfinish =pd.read_csv('..\/input\/age-and-finish\/finish.csv')\n","298b9153":"df = pd.concat([Age,finish],axis = 1)\ndf.columns","f370ba7d":"df = df.rename(columns={'time': 'finish','age':'Age'})\n","0f0bd579":"df.columns","e8c14acc":"df.index","75e47a78":"df.shape","75b8cf0b":"df.isna().sum()","66a883d4":"df.describe()","5894ef21":"plt.scatter(df['Age'],df['finish'],c='r',s =10)\n\n# plt.plot(df['Age'],df['finish'],marker = 'o')\nplt.xlabel('Age'); \nplt.ylabel('finish');","83150e1e":"df['Age'].shape","c0fbcdd1":"from sklearn.linear_model import LinearRegression","8eca1ed3":"model = LinearRegression(fit_intercept=True)","4e573cbe":"df['Age'].shape","055d2c44":"x =df['Age']\ny=df['finish']","7c1b817b":"x= np.array(x).reshape(-1,1)\ny =np.array(y).reshape(-1,1)","966e1a31":"model.fit(x,y)","30068118":"model.coef_#bahat1 zarib age","b19f0b07":"model.intercept_#bhat0","bbedf8a6":"model.score(x,y)","7e20468e":"r = s.ols(formula=('finish~Age'),data=Age).fit()\nr.params\nr.resid.shape#y-yhat\/e\n# r.summary()    ","350be3dd":"yhat1 = r.fittedvalues#yhat\nyhat1=np.matrix(yhat1).T\nyhat1.shape","a61f268e":"re = finish-yhat1#y-y^\nsse=np.sum(re*re)#sse\nsigma2=sse\/23908#sse\/n-p\nprint('Residuals Standard Error :{} ',np.sqrt(sigma2))","df89b03d":"yhat2= .719276*x+230.201508\nre1= finish-yhat2\nsse1=np.sum(re1*re1)\nsigma21=sse1\/23908\n\nresiserror=np.sqrt(sigma21)\nprint('residual of error :{}  freedom(n-p) :{}'.format(resiserror,23908),end ='\\n')","eb01e1cd":"print('resiual numbers (y-y^) : {} '.format(r.resid.shape))\nprint('----------Residuals----------')\nplt.hist(r.resid,color ='y');\nplt.axvline(np.mean(r.resid),color ='red');\nplt.axvline(np.median(r.resid),color ='green');","bb783c2d":"r = sm.OLS.from_formula('finish~Age',data=Age).fit()\nresiduals=r.resid\nprint('sigmahat {}'.format(r.resid.shape))\n# r.summary()","79f974f9":"plt.hist(residuals);\nplt.axvline(np.mean(residuals),color ='red')\nplt.axvline(np.median(residuals),color ='green')","9b68a7fe":"nage=np.log(Age)\nlage= pd.DataFrame(data=nage)\ndflog = pd.concat([lage,df],axis=1)\n# dflog","cc51b188":"dflog = dflog.rename(columns={'time': 'finish','Age':'Age','age':'logage'})\n# dflog","386fb40b":"model1 = LinearRegression(fit_intercept=True)\nx1=dflog['logage']\ny1=dflog['finish']","9d48da41":"x1= np.array(x1).reshape(-1,1)\ny1 =np.array(y1).reshape(-1,1)","8efd7603":"model1.fit(x1,y1)","9af8379f":"model1.intercept_","54438fc0":"model1.coef_","01383875":"l = s.ols(formula='finish~+Age+lage',data=lage).fit()","14fb7522":"l.params","8353c244":"l.summary()","d63479ce":"plt.hist(l.resid,color = 'yellow');\nplt.axvline(np.mean(l.resid),color='red')\nplt.axvline(np.median(l.resid),color='b')","f8124bfa":"mage=df.groupby('Age').mean()\n# mage","6c127e07":"fig,ax =plt.subplots()\nax.plot(mage,c ='b')\nax.scatter(x,y,c ='y',alpha= 0.2)\nax.plot(Age,r.fittedvalues,c = 'r')#abarsafhe\nax.plot(Age,l.fittedvalues,c='g')#monhani","088a9160":"##x2 i can not do it","1d7f91ec":"Age2=Age*Age\nAgedata2=pd.DataFrame(data=Age2)\ndf2 = pd.concat([Agedata2,df],axis = 1)\ndf2=df2.rename(columns ={'Age':'Age','finish':'finish','age':'Age2'})\ndf2.columns","3d09d454":"model2 = LinearRegression(fit_intercept=True)\nx2=df2['Age2']\ny2=df2['finish']","1f59cf19":"x2= np.array(x2).reshape(-1,1)\ny2 =np.array(y2).reshape(-1,1)","f5761fb0":"model2.fit(x2,y2)\nmodel2.coef_","a4027658":"import statsmodels.formula.api as st\ndf2.columns","738ea3e4":"ss = st.ols(formula ='finish~Age+Age2+lage',data=lage).fit()\n# type(Agedata2)","1b0f161a":"ss.params","d65eceab":"resi = ss.resid\nplt.hist(resi,color ='y');\nplt.axvline(np.mean(resi),c ='r')\nplt.axvline(np.median(resi),c ='b')","8200f037":"fig,ax =plt.subplots()\nax.plot(mage,c ='r')\nax.scatter(x,y,c ='y',alpha= 0.2)\nax.plot(Age,r.fittedvalues,c = 'b')#abarsafhe\nax.plot(Age,l.fittedvalues,c='g')#monhani\nax.plot(Age,ss.fittedvalues,c= 'black')#it is good","ab1b7933":"# mean  Age"}}