{"cell_type":{"7c11ac44":"code","d3d29ea1":"code","f06cd806":"code","0f39a3e9":"code","beb98166":"code","7a336680":"code","fb35420b":"code","e693f323":"code","3d92c23e":"code","7aa193d9":"code","94758e8f":"code","13aad5a4":"code","c7cb8f39":"code","b83d3312":"code","044d0447":"code","b27e1ef0":"code","f4994d4f":"code","52097613":"code","e52a02b0":"code","8229326a":"code","06b45898":"code","78723e5e":"code","2d55ab5f":"code","f3b06422":"code","fdad8d3c":"code","0155d8aa":"markdown","25dc89bd":"markdown","a95442c9":"markdown","99343b95":"markdown","0e789a27":"markdown","0af91815":"markdown","58ebdd04":"markdown","41af62c3":"markdown","c404fafb":"markdown","a14e9135":"markdown","9caafd2a":"markdown","8d2acd4c":"markdown","a8e63b42":"markdown","e50efd7e":"markdown","b7cd6a8c":"markdown"},"source":{"7c11ac44":"# Importing libraries\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')\nimport numpy as np \nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.style.use('fivethirtyeight') \n# Above is a special style template for matplotlib, highly useful for visualizing time series data\n%matplotlib inline\nfrom pylab import rcParams\nfrom plotly import tools\nimport chart_studio.plotly as py\nfrom plotly.offline import init_notebook_mode, iplot\ninit_notebook_mode(connected=True)\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nimport statsmodels.api as sm\nfrom numpy.random import normal, seed\nfrom scipy.stats import norm\nfrom statsmodels.tsa.arima_model import ARMA\nfrom statsmodels.tsa.stattools import adfuller\nfrom statsmodels.graphics.tsaplots import plot_acf, plot_pacf\nfrom statsmodels.tsa.arima_process import ArmaProcess\nfrom statsmodels.tsa.arima_model import ARIMA\nimport math\nfrom sklearn.metrics import mean_squared_error\nprint(os.listdir(\"..\/input\"))\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","d3d29ea1":"data = pd.read_csv(\"\/kaggle\/input\/property-sales\/raw_sales.csv\")","f06cd806":"data.head()","0f39a3e9":"data.info()","beb98166":"data.isnull().any().any()","7a336680":"print(\"Time period from {} to {}\".format(data.datesold.min(), data.datesold.max()))","fb35420b":"# Monthly number of house sales between 2007 and 2019\npd.to_datetime(data.datesold).dt.month.value_counts().plot('bar')","e693f323":"# Yearly number of house sales between 2007 and 2019\npd.to_datetime(data.datesold).dt.year.value_counts().plot('bar')","3d92c23e":"# We bin the postcode for easier analysis\nbins = pd.IntervalIndex.from_tuples([(2600, 2700), (2701, 2800), (2801, 2915)])\ndata['postcode_bin'] = pd.cut(data['postcode'],bins)","7aa193d9":"sns.countplot(data['postcode_bin'])","94758e8f":"data.propertyType.value_counts()","13aad5a4":"plt.pie(data['propertyType'].value_counts(), labels=['house','unit'], autopct='%1.1f%%', startangle = 150)\nplt.axis('equal')","c7cb8f39":"data['datesold']= pd.to_datetime(data['datesold'])","b83d3312":"from pandas import Interval\n\n# House sales in postcode 2600 - 2700\ndata1 = data[data.postcode_bin == Interval(2600, 2700, closed='right')]\n\n# House sales in postcode 2801-2915\ndata2 = data[data.postcode_bin == Interval(2801, 2915, closed='right')]","044d0447":"# Average sale price of houses for each of the two postcode bins\nrcParams['figure.figsize'] = 20,5 \ndata1.groupby('datesold').price.mean().plot()\ndata2.groupby('datesold').price.mean().plot()\nplt.legend(['2600-2700 postcode', '2801-2915 postcode'])\nplt.xlabel(\"Year\")\nplt.ylabel(\"Average Price\")","b27e1ef0":"sm.tsa.seasonal_decompose(data1.groupby('datesold').price.mean(), freq=365).plot()","f4994d4f":"sm.tsa.seasonal_decompose(data2.groupby('datesold').price.mean(), freq=365).plot()","52097613":"# Auotcorrelation for house sales price for postcodes group 1\nplot_acf(data1[\"price\"], lags=25, title=\"postcodes 2600-2700\")","e52a02b0":"# Auotcorrelation of house sale price for postcodes group 2\n\nplot_acf(data2[\"price\"], lags=25, title=\"postcodes 2801-2915\")","8229326a":"data_house = data[data.propertyType == 'house'] \ndata_unit = data[data.propertyType == 'unit']","06b45898":"# Average Sale price of house property type over years\ndata_house.groupby(['datesold']).price.mean().plot()","78723e5e":"sm.tsa.seasonal_decompose(data_house.groupby('datesold').price.mean(), freq=365).plot()","2d55ab5f":"# Average Sale price of units property type over years\ndata_unit.groupby(['datesold']).price.mean().plot()","f3b06422":"sm.tsa.seasonal_decompose(data_unit.groupby('datesold').price.mean(), freq=365).plot()","fdad8d3c":"data['datesold_year'] = data['datesold'].dt.year\nsns.boxplot(x= 'datesold_year', y = 'price', data=data)","0155d8aa":"## propertyType","25dc89bd":"## Some EDA and Time Series Visualization","a95442c9":"There were a lot of house sales in 2014 - 2017 but all of a sudden dwindled last year (2019). Interesting.","99343b95":"Some unusually high average sale price of houses detected in mid to late 2011 for houses with 2801-2915 postcodes","0e789a27":"### price by different postcodes groups","0af91815":"We saw earlier that the number of houses sold was the highest in the past few years (2016-2019) and we see here that the overall distribution of house sale prices is slightly skewed to the left (with more concentrations on higher prices) with more expensive house sales spotted as outliers (although the distribution of house sale prices looks pretty similar over time with gradual upward movements of boxplots)","58ebdd04":"## Load Data","41af62c3":"No missing data","c404fafb":"### Yearly house sale price variation over time for all house sales","a14e9135":"### prices by property Type","9caafd2a":"### Datesold","8d2acd4c":"Credits for the following references:\n\n- https:\/\/www.kaggle.com\/thebrownviking20\/everything-you-can-do-with-a-time-series\n- https:\/\/machinelearningmastery.com\/time-series-forecasting-methods-in-python-cheat-sheet\/\n\nUsing the following data\n- https:\/\/www.kaggle.com\/deltacrot\/property-sales#ma_lga_12345.csv","a8e63b42":"Interesting to see that there were no house sales for postcodes in between 2700 and 2800. We need more context and knowledge to fully interpret this phenomenon but this could possibly point to the fact that certain regions barely had any house sales while other regions had more active house sales? (discrepancy in house sale numbers across different regions in the U.S.)","e50efd7e":"### postcode","b7cd6a8c":"Houses sold in both postcode groups have overall increasing price trends. While houses sold with 2600-2700 postcodes do not have clear seasonality, houses sold with 2801-2915 postcodes have clear seasonality with spikes every 1.2 ish years."}}