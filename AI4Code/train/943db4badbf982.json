{"cell_type":{"5c71deb1":"code","d81a585c":"code","fa43824f":"code","cce10153":"code","1975312b":"code","78166b13":"code","a94346d3":"code","6b8f898f":"code","d68436d0":"code","6410108f":"code","fc60019e":"code","6bb72c3c":"code","488de38a":"code","11c718f0":"code","8e00356f":"markdown","38dd2751":"markdown","9f82388c":"markdown","f221dd66":"markdown","7f8c5cb8":"markdown","f0a3ccbe":"markdown","5c10a235":"markdown","d7cef530":"markdown","6d0b8b75":"markdown","364450e0":"markdown","7fc31e61":"markdown","cd30ccae":"markdown","ca47ef3b":"markdown","e13efec5":"markdown","30ad4119":"markdown","6b618b2e":"markdown","c1a49c25":"markdown"},"source":{"5c71deb1":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nplt.style.use(\"seaborn\")\nimport dataframeoverview as dfo # user-defined utility script","d81a585c":"df = pd.read_csv('..\/input\/fivethirtyeight-bad-drivers-dataset\/bad-drivers.csv')","fa43824f":"dfo.feature_info(df)","cce10153":"# rename the features for ease\n\nnew_features = [\"state\", \"num_driver_fatal\", \"percent_speeding\", \"percent_alcohol\", \"percent_not_dis\", \"percent_no_prev\", \"insur_prem\", \"loss_per_insur_driver\"]\ndf=df.rename(columns=dict(zip(df.columns,new_features)))","1975312b":"# Function to find categorical and non-categorical features\ndef cat_finder(df):\n    cat = []\n    cont = []\n    cols = list(df.columns)\n    for col in cols:\n        t = df[col].dtype #returns the type of the feature\n        if (t=='O'):\n            cat.append(col)\n        else :\n            cont.append(col)\n      \n    return (cat, cont)\n\n# Using the function above\n\n\ncat, cont = cat_finder(df)\nprint(\"\\nCategorical Features:\", cat)\nprint(\"\\nContinuous Features:\\n\", cont)","78166b13":"# All distributions of the continuous features\n\ndef plot_dist(df, cont_features):\n    for f in cont_features:\n        plt.figure(figsize=(6,3))\n        sns.kdeplot(df[f], legend=False, color=\"red\", shade=True)\n        plt.title(\"Distribution of \"+f)\n        plt.show()\n        \nplot_dist(df, cont)\n        ","a94346d3":"# Correlation between the features\n\ncorr_list = cont\ncorr = df[corr_list].corr()\n\n# Visualize using heatmap\nplt.figure(figsize=(7, 4)) \nplt.title(\"The Correlations of the Features\")\nmask = np.zeros_like(corr)\nmask[np.triu_indices_from(mask)] = True\nwith sns.axes_style(\"white\"):\n    ax = sns.heatmap(corr, annot=True, fmt=\".2f\", linewidths=.5, mask=mask, cmap=\"inferno\")","6b8f898f":"# loss_per_insur_driver vs insur_prem\n\nsns.lmplot(x='loss_per_insur_driver',y='insur_prem',fit_reg=False,scatter_kws={\"color\":\"blue\",\"alpha\":0.5,\"s\":100},data=df)\nplt.xlabel('\\nLosses incurred by insurance companies per insured driver ($)',size=12)\nplt.ylabel('Car insurance premiums ($)',size=12)\nplt.title(\"Relation between Insurance Premiums and Losses to Insurance Companies\\n\", fontsize=17)\nplt.show()","d68436d0":"# Speed kills\n\nplt.figure(figsize=(10,9))\nsns.scatterplot(x=\"percent_speeding\", y=\"state\", data=df, color=\"red\")\nplt.xlabel(\"\\nPercentage of drivers involved in fatal collisions who were speeding\", fontsize=15)\nplt.ylabel(\"State\", fontsize=15)\nplt.title(\"Proportions of collisions due to speeding across states\\n\", fontsize=17)\nplt.show()","6410108f":"# Non-distracted drivers' analysis\nsns.violinplot(df['percent_not_dis'])\nplt.xlabel(\"\\nPercentage of drivers involved in fatal collisions who were not distracted\", fontsize=15)\nplt.title(\"How safe are you even when you follow the rules?\\n\", fontsize=17)\nplt.show()","fc60019e":"# Top 10s of all continuous features\n\ndef top_10(df, features):\n    for f in features:\n        l = df[[\"state\",f]].sort_values(by=f,ascending=False).head(10)\n        plt.figure(figsize=(6,3))\n        sns.barplot(y=\"state\", x=f, data=l)\n        plt.title(\"Top 10 - \"+f)\n        plt.show()\n\ntop_10(df, cont)","6bb72c3c":"from bokeh.io import show, output_notebook\nfrom bokeh.plotting import figure\nfrom bokeh.layouts import widgetbox\nfrom bokeh.models.widgets import Button\nfrom bokeh.models import Panel, Tabs\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.models.tools import HoverTool\nfrom bokeh.palettes import Category10\nfrom bokeh.transform import factor_cmap","488de38a":"source = ColumnDataSource(df)\np = figure()\np.circle(x='insur_prem', y='loss_per_insur_driver', source=source, size='num_driver_fatal', color='red', line_color='black', alpha=0.5)\np.title.text = 'Relation between Insurance Premiums and Losses to Insurance Companies'\np.xaxis.axis_label = 'Insurance Premiums ($)'\np.yaxis.axis_label = 'Losses to Insurance Companies ($)'\nhover = HoverTool()\nhover.tooltips=[\n    ('State', '@state')\n]\np.add_tools(hover)\nshow(p)\noutput_notebook()","11c718f0":"# Top 10 of the 2 main features related to fatal collisions - 'num_driver_fatal', 'percent_speeding', 'percent_alcohol'\n\nl1 = df[[\"state\",'num_driver_fatal']].sort_values(by='num_driver_fatal',ascending=True).tail(10)\nsource = ColumnDataSource(l1)\nstates = source.data['state'].tolist()\np1 = figure(y_range=states)\np1.hbar(y='state', right='num_driver_fatal', source=source, height=0.70, color='red')\np1.title.text = \"Number of drivers involved in fatal collisions per billion miles\"\np1.yaxis.axis_label = 'State'\np1.xaxis.axis_label = 'Number of drivers involved in fatal collisions per billion miles'\nhover = HoverTool()\nhover.tooltips=[\n    ('Value', '@num_driver_fatal')\n]\np1.add_tools(hover)\ntab1 = Panel(child=p1, title=\"Total number of drivers\")\n\nl2 = df[[\"state\",'percent_speeding']].sort_values(by='percent_speeding',ascending=True).tail(10)\nsource = ColumnDataSource(l2)\nstates = source.data['state'].tolist()\np2 = figure(y_range=states)\np2.hbar(y='state', right='percent_speeding', source=source, height=0.70, color='red')\np2.title.text = \"Percentage of drivers who were speeding during fatal collision\"\np2.yaxis.axis_label = 'State'\np2.xaxis.axis_label = 'Proportion of drivers speeding during fatal collision'\nhover = HoverTool()\nhover.tooltips=[\n    ('Value', '@percent_speeding'+'%')\n]\np2.add_tools(hover)\ntab2 = Panel(child=p2, title=\"Speeding\")\n\nl3 = df[[\"state\",'percent_alcohol']].sort_values(by='percent_alcohol',ascending=True).tail(10)\nsource = ColumnDataSource(l3)\nstates = source.data['state'].tolist()\np3 = figure(y_range=states)\np3.hbar(y='state', right='percent_alcohol', source=source, height=0.70, color='red')\np3.title.text = \"Percentage of drivers who were alcohol-impaired during fatal collision\"\np3.yaxis.axis_label = 'State'\np3.xaxis.axis_label = 'Proportion of drivers under influence of alcohol during fatal collision'\nhover = HoverTool()\nhover.tooltips=[\n    ('Value', '@percent_alcohol'+'%')\n]\np3.add_tools(hover)\ntab3 = Panel(child=p3, title=\"Alcohol-Impaired\")\n\ntabs = Tabs(tabs=[ tab1, tab2, tab3 ])\nshow(tabs)\noutput_notebook()","8e00356f":"### Insights\n1. The number of drivers involved in fatal collisions per billion miles is **normally distributed** with a mean of 15.79 collisions per billion miles and **standard deviation** of 4.12.\n2. The proportion of drivers involved in fatal collisions who were not distracted is **left-skewed** and depicts the large proportion of non-distracted drivers involved in fatal colissions.","38dd2751":"Interactive Visualizations help tell the story in a much faster, efficient way. So, I have tried a couple of them here using the Bokeh library.","9f82388c":"Therefore, our data has :\n1. No Missing Values\n2. 1 Categorical feature, 7 continuous features","f221dd66":"## Insights\n1. South Carolina, North Dakota and West Virginia had the most number of fatal collisions per billion miles of travel.\n2. The state with the largest proportion of fatal collisions due to speeding was Hawaii, closely followed by Pennysylvania.\n3. Montana has the highest proportion of inebriated drivers causing fatal colissions.\n4. Texas is present within the top 10 states in all the 3 main features related to collisions (number per billion miles, proportion that was speeding and proportion that was under the influence of alcohol)\n5. The drivers of New Jersey paid the highest amounts of car insurance premiums ($), followed by Louisiana and the District of Columbia. ","7f8c5cb8":"## The Feature Correlations","f0a3ccbe":"### Using the Plot\n1. X-axis : Insurance Premium Amount in USD\n2. Y-axis : Losses to Insurance Companies in USD\n3. Each circle depicts a state and the radius of each circle is proportional to the Number of fata collisions in the state\n4. Hover over each of the points to know the corresponding State","5c10a235":"## Interactive Visualizations using Bokeh","d7cef530":"### Insight\n1. There exists a strong positive correlation between the insurance amount paid by drivers and the losses incurred to compabies due to collisions.","6d0b8b75":"### Insight\n1. The violin plot depicts a large concentration of data after 80%. This shows that even if you are not distracted during driving, you still are not immune to being a part of fatal accidents. \n2. It's evident that mistakes of one person can lead to the loss of several other lives too.","364450e0":"### Insight\n1. Pennysylvania and Hawaii were the only 2 states that had \"Speeding\" cause 50% or more of the fatal accidents they had. \n2. Nebraska had the least proportion of drivers involved in fatal collisions while speeding. \n3. In most of the states, speeding contributes to less than 40% of the total fatal accidents caused. Therefore, \"Speed kills. But it is definitely not the scariest factor for drivers on the road\"!","7fc31e61":"## Speed Kills! But is it the greatest contributor of fatalities?","cd30ccae":"### Insight \n1. Higher the Car insurance premium amounts, greater the losses for the insurance companies when an insured driver is involved in an accident.","ca47ef3b":"### Using the Plot\n1. Navigate between each tab to view the corresponding graph\n2. Hover over each bar for the value","e13efec5":"## How safe are you even if you are not distracted?","30ad4119":"# Analyzing the Worst Drivers in the USA\n\nThe dataset for this kernel was first collected via <a href=\"https:\/\/fivethirtyeight.com\/features\/which-state-has-the-worst-drivers\/\">Five Thirty Eight<\/a>.","6b618b2e":"## That's all for now. Hope you had a good read!","c1a49c25":"## The Top 10s of Everything (Not a good list to top!)"}}