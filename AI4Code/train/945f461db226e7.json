{"cell_type":{"2aefcf1b":"code","f734f725":"code","f8cf32f4":"code","e5efd333":"code","4e1407e9":"code","f864d065":"code","1d74c5e8":"code","c6f2eafd":"code","faf75dc6":"code","188524ed":"code","13f94b91":"code","97e82fbc":"code","9462ea96":"code","9c4a6d9c":"code","fd431571":"code","b6708504":"code","5f0d98f1":"code","6ea0b92b":"code","2115de2e":"code","40f53f6a":"code","62ea75a3":"code","5006e57e":"code","2fcefeb8":"code","4b7e8b32":"code","1514a020":"code","4d9165c0":"code","a9672bcd":"code","df7d4272":"code","40ecaa91":"code","9ebdea6a":"markdown","ff1acd90":"markdown","da3ff179":"markdown","af9e6004":"markdown","32618096":"markdown","c5433c88":"markdown","12b76975":"markdown","fa5c511b":"markdown","5a6ced74":"markdown","7e0f60bb":"markdown","05fe019e":"markdown","f56130ae":"markdown","e17f4fc3":"markdown","b1c17129":"markdown"},"source":{"2aefcf1b":"import pandas as pd\nimport numpy as np\nfrom scipy import stats\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom tqdm import tqdm\nimport helpers\nsns.set()\nnp.random.seed(42)","f734f725":"symbol = 'AAPL'\noutput_size = 'compact'","f8cf32f4":"df_raw = helpers.fetch_data(symbol, output_size)\ndf = df_raw.copy()","e5efd333":"df = df_raw.sort_values(by='timestamp')\ndf.head()","4e1407e9":"return_rate = pd.DataFrame(df['adjusted_close']).pct_change()\nreturn_rate.head()","f864d065":"stdev_return_rate = return_rate.std()\nlast_close_price = df['adjusted_close'].iloc[-1]","1d74c5e8":"simulation = pd.DataFrame()","c6f2eafd":"number_simulation = 100\npredict_days = 30","faf75dc6":"for i in tqdm(range(number_simulation)):\n    price_list = []\n    price_list.append(last_close_price)\n    for day in range(predict_days): \n        price = price_list[day] * (1 + np.random.normal(0, stdev_return_rate))\n        price_list.append(price[0])\n    simulation[i] = price_list","188524ed":"simulation.head()","13f94b91":"plt.style.use(['ggplot'])\nplt.figure(figsize=(15,7))\nplt.plot(simulation)\nplt.title('Simulation', color='black')\nplt.ylabel('Stock Price')\nplt.xlabel('Simulation Days')\nplt.show()","97e82fbc":"simulation_means = np.array([simulation[i].mean() for i in range(100)])","9462ea96":"plt.style.use(['ggplot'])\nplt.figure(figsize=(15,5))\nplt.subplot(1,2,1)\nsns.distplot(df['adjusted_close'],norm_hist=True)\nplt.title('Simulation\\nmean = {:.4f}\\nstdev = {:.4f}\\nskewness = {:.4f}\\nkurtosis = {:.4f}'\n          .format(np.mean(simulation_means), \n              np.std(simulation_means), \n              stats.skew(simulation_means), \n              stats.kurtosis(simulation_means)), color='black')\nplt.xlabel('Close Price')\n\nplt.subplot(1,2,2)\nsns.distplot(simulation_means, norm_hist=True,label='Simulation')\nsns.distplot(df['adjusted_close'],norm_hist=True,label='Sample')\nplt.title('Sample\\nmean = {:.4f}\\nstdev = {:.4f}\\nskewness = {:.4f}\\nkurtosis = {:.4f}'\n          .format(df['adjusted_close'].mean(), \n              df['adjusted_close'].std(), \n              df['adjusted_close'].skew(), \n              df['adjusted_close'].kurtosis()), color='black')\nplt.xlabel('Close Price')\n\nplt.legend()\nplt.show()","9c4a6d9c":"mean_real = df['adjusted_close'].mean()","fd431571":"t_statistic, p_value = helpers.t_test_1sample(alpha=0.05, \n                                              sample_array=simulation_means, \n                                              population_mean=mean_real)","b6708504":"margin_error_real = helpers.moe_t_test_1sample(alpha=0.05, \n                                         sample_size=df['adjusted_close'].shape[0], \n                                         stdev=df['adjusted_close'].std())","5f0d98f1":"lower_bound_real, upper_bound_real = helpers.confidence_interval(mean=df['adjusted_close'].mean(), \n                                                                 margin_of_error=margin_error_real)\nprint('Lower bound for real:', lower_bound_real)\nprint('Upper bound for real:', upper_bound_real)","6ea0b92b":"margin_error_simulation = helpers.moe_t_test_1sample(0.05, \n                                               sample_size=simulation_means.shape[0], \n                                               stdev=simulation_means.std())","2115de2e":"lower_bound_simulation, upper_bound_simulation = helpers.confidence_interval(\n                                                    mean=simulation_means.mean(), \n                                                    margin_of_error=margin_error_simulation)\nprint('Lower bound for simulation:', lower_bound_simulation)\nprint('Upper bound for simulation:', upper_bound_simulation)","40f53f6a":"b_statistic, p_value = helpers.bartlett(0.05, simulation_means, df['adjusted_close'])","62ea75a3":"ks_statistic, p_value = helpers.ks_test_2sample(0.05, simulation_means, df['adjusted_close'])","5006e57e":"helpers.graph_simulation(simulation, 0, 5)","2fcefeb8":"helpers.graph_distribution(df, simulation_means, 0, 5)","4b7e8b32":"helpers.graph_simulation(simulation, 5, 10)","1514a020":"helpers.graph_distribution(df, simulation_means, 5, 10)","4d9165c0":"helpers.graph_simulation(simulation, 10,15)","a9672bcd":"helpers.graph_distribution(df, simulation_means, 10, 15)","df7d4272":"helpers.graph_simulation(simulation, 15, 20)","40ecaa91":"helpers.graph_distribution(df, simulation_means, 15, 20)","9ebdea6a":"## T Test for Mean","ff1acd90":"## Bartlett Test for Variance","da3ff179":"## Data Fetching","af9e6004":"## KS Test for Distribution","32618096":"## Distribution Graph","c5433c88":"## Breakdown of Graphs","12b76975":"### Simulation 0 - 5","fa5c511b":"## Confidence Interval for Mean","5a6ced74":"### Simulation 10 - 15","7e0f60bb":"### Simulation 5 - 10","05fe019e":"## Data Processing","f56130ae":"## Run Simulation","e17f4fc3":"### Simulation 15 - 20","b1c17129":"## Simulation Graph"}}