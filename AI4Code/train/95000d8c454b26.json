{"cell_type":{"08c438a8":"code","d67f9c17":"code","13e883ae":"code","1e6eaaca":"code","e30bea74":"code","022272eb":"code","25bbc120":"code","066c4f58":"code","5f17c238":"code","0c473e11":"code","86ad1885":"code","c0e11199":"code","bdecd2b8":"code","82ff4edf":"code","6b595eb4":"code","4d16739c":"code","4edb2ea2":"code","fa5e78b6":"code","c115487d":"code","a78b348f":"code","731b8daf":"code","69e918e9":"code","40b9fa9f":"code","a3a52a5e":"code","a3a8e387":"markdown","707c5fd6":"markdown","54e5edf0":"markdown","4a904e6b":"markdown","199f5331":"markdown","ac02ed39":"markdown","dcc93cd5":"markdown","2983cda6":"markdown","9ceffa36":"markdown","6839b5ed":"markdown","f046b98a":"markdown","1cb86fd2":"markdown","3c92cb38":"markdown","e2aa3349":"markdown","25e636ae":"markdown","891f9cc5":"markdown","46d11769":"markdown","d95bb191":"markdown","cf8daa3c":"markdown","a3d290a0":"markdown","a2b07f92":"markdown","98749339":"markdown","a653b01e":"markdown","80c4f913":"markdown","c992cbdd":"markdown","46b3be5a":"markdown","7ed9c669":"markdown","456ed96c":"markdown","8264fcc7":"markdown","53727621":"markdown","45a4313b":"markdown","9b0fd172":"markdown"},"source":{"08c438a8":"import pandas_datareader.data as data\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set_style('whitegrid')\n%matplotlib inline\nfrom datetime import datetime","d67f9c17":"start = datetime(2006, 1, 1)\nend = datetime(2016, 1, 1)\n\nBAC = data.DataReader(\"BAC\", \"yahoo\", start, end) # Bank of America\nC = data.DataReader(\"C\", \"yahoo\", start, end) # CitiGroup\nGS = data.DataReader(\"GS\", \"yahoo\", start, end) # Goldman Sachs\nJPM =data.DataReader(\"JPM\", \"yahoo\", start, end) # JPMorgan Chase\nMS = data.DataReader(\"MS\", \"yahoo\", start, end) # Morgan Stanley\nWFC = data.DataReader(\"WFC\", \"yahoo\", start, end) # Wells Fargo\n","13e883ae":"BAC.head()","1e6eaaca":"tickers = ['JPM', 'BAC', 'WFC','GS', 'MS', 'C']\ntickers = sorted(tickers)","e30bea74":"bank_stocks = pd.concat([BAC, C, GS, JPM, MS, WFC], axis=1,keys=tickers)\nbank_stocks.head()","022272eb":"bank_stocks.columns.names = ['Bank Ticker','Stock Info']","25bbc120":"bank_stocks.head()","066c4f58":"bank_stocks.xs('Close', level='Stock Info', axis=1).max()","5f17c238":"returns = pd.DataFrame()","0c473e11":"for tick in tickers:\n    returns[tick + 'Return'] = bank_stocks[tick]['Close'].pct_change()","86ad1885":"returns.head()","c0e11199":"returns['CReturn'].plot()\nplt.title(' Retorno das a\u00e7\u00f5es do Citigroup')","bdecd2b8":"sns.pairplot(returns[1:])","82ff4edf":"returns.idxmax() # pega pelo id","6b595eb4":"returns.idxmin()","4d16739c":"returns.std()","4edb2ea2":"by_date = returns.copy()\nby_date.reset_index(inplace = True)\nby_date['Date'] = pd.to_datetime(by_date['Date'])\nby_date['Year'] = by_date['Date'].apply(lambda time: time.year) # Criando coluna com o ano de cada a\u00e7\u00e3o\nby_date[by_date['Year'] == 2014].std() #Pegando desvio padr\u00e3o","fa5e78b6":"# outra alternativa:\n'''\nreturns[(returns.index.date >= datetime.date(2015,1,1)) & (returns.index.date < datetime.date(2016,1,1))].std()\n'''","c115487d":"sns.distplot(by_date[by_date['Year'] == 2014]['MSReturn'])","a78b348f":"sns.distplot(by_date[by_date['Year'] == 2010]['CReturn'])","731b8daf":"for tick in tickers:\n    bank_stocks[tick]['Close'].plot(figsize=(12,4), label=tick)\n    # ou bank_stocks.xs(key='Close', level='Stock Info', axis=1).plot()\nplt.legend()","69e918e9":"plt.figure(figsize=(12,6))\nC2008 = C['Close'][C.index.year == 2008]\nC2008_mm = C2008.rolling(30).mean().plot(label = 'M\u00e9dia m\u00f3vel de 30 dias')\nC2008.plot(label = 'Fechamento')\nplt.legend()\nplt.title(\"M\u00e9dia movel e fechamento das a\u00e7\u00f5es do CitiGroup no ano de 2008\")","40b9fa9f":"corr = bank_stocks.xs(key='Close', level='Stock Info', axis=1).corr()\nplt.figure(figsize=(10,8))\nsns.heatmap(corr, cmap='coolwarm', annot=True)","a3a52a5e":"sns.clustermap(corr, cmap='coolwarm', annot=True)","a3a8e387":"Gr\u00e1fico de linha mostrando o pre\u00e7o de fechamento para cada banco em rela\u00e7\u00e3o ao tempo.","707c5fd6":"Concatenando os DataFrames do banco juntos em um \u00fanico. Definindo o argumento das chaves igual \u00e0 lista de tickers. Concatenando por coluna e n\u00e3o por linha com o axis=1:","54e5edf0":"Tra\u00e7ando m\u00e9dia m\u00f3vel de 30 dias para o pre\u00e7o das a\u00e7\u00f5es do CitiGroup para o ano de 2008: ","4a904e6b":"Verificando topo do dataframe:","199f5331":"Criando uma lista dos s\u00edmbolos dos tickers (pesquisados no google) e colocando em ordem alfab\u00e9tica:","ac02ed39":"Criando novo dataframe","dcc93cd5":"# Projeto de dados do mercado financeiro\n\nMateus Mendes Ramalho da Silva\n| mateus.mendes.mmr@gmail.com\n| linkedin:https:\/\/www.linkedin.com\/in\/mateus-mendes-a54417143\/\n\nUm projeto desenvolvido durante um curso de Data Science, no qual se d\u00e1 a an\u00e1lise de alguns dados do mercado financeiro.","2983cda6":"Criando um pairplot para verificar comportamento e rela\u00e7\u00e3o entre os dados:","9ceffa36":"**Pergunta: Qual a\u00e7\u00e3o foi a a\u00e7\u00e3o mais arriscada durante todo o per\u00edodo de tempo? **","6839b5ed":"Cabe\u00e7alho do DataFrame formado:","f046b98a":"Para isso, \u00e9 apropriado olhar o desvio padr\u00e3o das a\u00e7\u00f5es.","1cb86fd2":"** Definindo os n\u00edveis dos nomes das colunas **","3c92cb38":"# An\u00e1lise de dados explorat\u00f3ria\n\nPergunta: Qual \u00e9 o pre\u00e7o m\u00e1ximo de fechamento para cada banco durante todo o per\u00edodo? ","e2aa3349":"As a\u00e7\u00f5es do Citigroup com 0.038672","25e636ae":"### Importando as bibliotecas\n\n","891f9cc5":"### Criando novo dataframe com os retornos das a\u00e7\u00f5es de cada banco:","46d11769":"Verificando topo do dataframe correspondente ao Bank of America:","d95bb191":"Coletando os dados:","cf8daa3c":"Pergunta: Em quais datas cada a\u00e7\u00e3o dos bancos teve o melhor dia de retorno? ","a3d290a0":"Nota-se uma queda nas a\u00e7\u00f5es do CitiGroup no per\u00edodo de 2008 a 2009.","a2b07f92":"Nota-se que 4 bancos tiveram o mesmo pior dia de retorno no dia 20\/01\/2009, dia da posse de Barac Obama nos EUA. O que explica a queda.","98749339":"Colocando os valores (em percentual) no dataframe de retornos:","a653b01e":"**Pergunta: Qual a mais arriscada para o ano 2014? **","80c4f913":"Criando um plot de distribui\u00e7\u00e3o dos retornos de 2010 para CitiGroup:","c992cbdd":"Mapa de calor da correla\u00e7\u00e3o entre os pre\u00e7os de fechamento das a\u00e7\u00f5es:","46b3be5a":"Mostrando tamb\u00e9m clustermap para agrupar as correla\u00e7\u00f5es:","7ed9c669":"## Dados\nSer\u00e3o obtidos dados de a\u00e7\u00f5es para os seguintes bancos:\n* Bank of America\n* CitiGroup\n* Goldman Sachs\n* JPMorgan Chase\n* Morgan Stanley\n* Wells Fargo\n\nSer\u00e1 utilizado o intervalo de 01\/01\/2006 a 01\/01\/2016.","456ed96c":"Criando um plot de distribui\u00e7\u00e3o dos retornos de 2014 para Morgan Stanley:","8264fcc7":"Pergunta: Em quais datas cada a\u00e7\u00e3o dos bancos teve o pior dia de retorno? ","53727621":"Criando um plot b\u00e1sico com o retorno das a\u00e7\u00f5es do Citigroup durante os anos:","45a4313b":"A mais arriscada em 2014 foi a Bank of America com 0.013625","9b0fd172":"Nota- se grandes correla\u00e7\u00f5es entre as a\u00e7\u00f5es:\n* CitiGroup e Bank of America\n* Bank of America e Morgan Stanley\n* JPMorgan Chase e Wells Fargo \n* CitiGroup e Morgan Stanley\n\nJ\u00e1 a menor correla\u00e7\u00e3o se d\u00e1 entre:\n* CitiGroup e Wells Fargo"}}