{"cell_type":{"2b9b2e52":"code","ce250285":"code","49645d65":"code","566e140c":"code","8baace0c":"code","04c3cb98":"code","6ed712b8":"code","9d591b7c":"code","26512241":"code","043c2dc0":"code","fcc346ae":"code","1ba4930c":"code","3d83781c":"code","58cbdf03":"code","7e38a9db":"code","f29b79b9":"code","f26427bd":"code","48a871c0":"code","f4bb99b2":"code","e64a1ab7":"code","7abb639e":"code","a60d4ea3":"code","cedbff63":"code","af950a2a":"code","f380efaf":"code","2b85e450":"code","b9da1b48":"code","de39d647":"code","48e0405d":"code","aec53ca4":"code","cd37a47b":"code","8e73fcef":"code","a7089b48":"code","c69eb25a":"code","e9db680a":"code","f460e150":"code","3c581c5b":"code","9bfad928":"code","f0684414":"code","46a1635b":"code","527f2490":"code","3bae0175":"code","6a039720":"code","f30a8911":"code","c30c477d":"code","51de90c1":"code","f9181e66":"code","8f4e0732":"code","bc4c9443":"code","32eeca85":"code","50358917":"code","ca267327":"code","35f5cb66":"code","d6129382":"code","45b8c0c2":"code","90d485fe":"code","382e22fa":"code","63db3605":"code","4f07f4cb":"code","4486774b":"code","2ab2e5cc":"code","10bcb275":"code","0d026eef":"code","ec58d484":"code","a336418d":"code","3400f50e":"markdown","da39b6ae":"markdown","778f6957":"markdown","1d75171c":"markdown","0bae87d8":"markdown","15c3e62b":"markdown","1e4993d3":"markdown","d71f36d2":"markdown","a1e026a2":"markdown","e379cd8d":"markdown","ae0e492f":"markdown","ee92e68c":"markdown","b36295a7":"markdown","16e205e8":"markdown","78a30d58":"markdown","81bcfd25":"markdown","31b0eaf2":"markdown","4ba86e6d":"markdown","787b6e04":"markdown","e009636a":"markdown","b263078b":"markdown","3acea6ab":"markdown","3c1a37b6":"markdown","d1a11141":"markdown","ccf5e663":"markdown","451a62c2":"markdown","2a034600":"markdown","d801737c":"markdown","cb1b043c":"markdown","8d8476a6":"markdown","fefadc40":"markdown","33ba1ca4":"markdown","9c94e449":"markdown","f3f555a7":"markdown","ed46557d":"markdown","a2b35089":"markdown"},"source":{"2b9b2e52":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","ce250285":"## Import the Libraries\n\n## Start Code\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%pylab inline\nimport matplotlib.patches as patches\nfrom glob import glob\nimport seaborn as sns\nimport plotly.express as px\n## End Code","49645d65":"## Read the games.csv file and store it in a pandas dataframe\n\n##Start Code\ngamesData=pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/games.csv')\n##End Code\n\ngamesData","566e140c":"## Check the size of the dataframe\ngamesData.shape","8baace0c":"## Check the size of the dataframe\ngamesData.shape","04c3cb98":"## Check the attributes and their datatypes\ngamesData.info()","6ed712b8":"## Count the null values in each attribute\ngamesData.isnull().sum()","9d591b7c":"## Count unique values in each attribute\ngamesData.nunique()","26512241":"## Combine the gameDate and gameTimeEastern as gameTimeEastern and convert it into pandas dateTime, dropping the gameDate.\n\n## Start Code\ngamesData['gameTimeEastern']=gamesData['gameDate'] + ' ' + gamesData['gameTimeEastern']\ngamesData.gameTimeEastern=pd.to_datetime(gamesData.gameTimeEastern)\ngamesData=gamesData.set_index('gameTimeEastern')\ngamesData=gamesData.tz_localize('EST').tz_convert('EST')\ngamesData=gamesData.reset_index()\ngamesData=gamesData.drop('gameDate',axis=1)\n## End Code\n\ngamesData","043c2dc0":"#### How many games have each time played in their home ground ?\n\n## Start Code\nteams=list(set(list(gamesData.homeTeamAbbr.unique())+list(gamesData.visitorTeamAbbr.unique())))\ngamesAtHome=pd.DataFrame(gamesData.groupby('homeTeamAbbr')['gameId'].count())\ngamesAtHome.reset_index(inplace=True)\nplt.figure(figsize=(20,5))\nplt.bar(gamesAtHome.homeTeamAbbr,gamesAtHome.gameId)\nplt.xlabel('Teams')\nplt.ylabel('Number of Games')\nplt.savefig('Output1.jpg')\nplt.show()\n##End Code","fcc346ae":"## Start Code\ngamesAtHome=pd.DataFrame(gamesData.groupby('visitorTeamAbbr')['gameId'].count())\ngamesAtHome.reset_index(inplace=True)\nplt.figure(figsize=(20,5))\nplt.bar(gamesAtHome.visitorTeamAbbr,gamesAtHome.gameId)\nplt.xlabel('Teams')\nplt.ylabel('Number of Games')\nplt.show()\nplt.savefig('Output2.jpg')\n## End Code","1ba4930c":"## Read the plays.csv file and store it in a pandas dataframe\n\n## Start Code\nplaysData=pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/plays.csv')\n## End Code\n\nplaysData","3d83781c":"## Check the size of the dataframe\nplaysData.shape","58cbdf03":"## Check the attributes and their data types\nplaysData.info()","7e38a9db":"## Count null values in each attribute\nplaysData.isnull().sum()","f29b79b9":"## Fill null values in yardlineSide with 'CENTRE' as the yardlineNumber is 50 for them\n\n## Start Code\nplaysData.loc[playsData.yardlineSide.isnull(),'yardlineSide']='CENTRE'\n## End Code\n\nplaysData.isnull().sum()","f26427bd":"# Fill the null values of offenseFormation from playDescription attribute\n\n## Start Code\nplaysData.offenseFormation=playsData.offenseFormation.replace('EMPTY',np.nan)\nplaysData.offenseFormation.fillna(playsData.playDescription,inplace=True)\nplaysData.offenseFormation=playsData.offenseFormation.str.split(n=1).str[-1]\nplaysData.offenseFormation = playsData.offenseFormation.str.split(')', n = 1, expand = True)\nplaysData.offenseFormation = playsData.offenseFormation.apply(lambda x:x.strip('('))\nplaysData.offenseFormation=playsData.offenseFormation.replace('Shotgun','SHOTGUN')\nplaysData.offenseFormation=playsData.offenseFormation.replace('No Huddle','NO HUDDLE')\nplaysData.offenseFormation=playsData.offenseFormation.replace('No Huddle, Shotgun','NO HUDDLE, SHOTGUN')\ndef clean(x):\n    if x == 'I_FORM' or x == 'SINGLEBACK' or x == 'SHOTGUN' or x == 'PISTOL' or x == 'WILDCAT' or x == 'NO HUDDLE' or x == 'JUMBO' or x == 'NO HUDDLE, SHOTGUN':\n        return x\n    else: \n        return np.nan\nplaysData.offenseFormation = playsData.offenseFormation.apply(clean)\n## End Code","48a871c0":"## Fill the null values of defendersInTheBox,numberOfPassRushers,preSnapVisitorScore,preSnapHomeScore attributes with mean of their respective bins\n\n## Start Code\nplaysData.defendersInTheBox = playsData.defendersInTheBox.fillna(playsData.groupby('playId')['defendersInTheBox'].transform('mean'))\nplaysData.numberOfPassRushers = playsData.numberOfPassRushers.fillna(playsData.groupby('playId')['numberOfPassRushers'].transform('mean'))\nplaysData.preSnapVisitorScore = playsData.preSnapVisitorScore.fillna(playsData.groupby('playId')['preSnapVisitorScore'].transform('mean'))\nplaysData.preSnapHomeScore = playsData.preSnapHomeScore.fillna(playsData.groupby('playId')['preSnapHomeScore'].transform('mean'))\n## End Code","f4bb99b2":"## Extract the missing data in gameClock from playDescription\n\n## Start Code\nplaysData['gameClock']=playsData.playDescription.str.split(')',n=1,expand=True)\nplaysData.gameClock=playsData.gameClock.apply(lambda x:x.replace('(:','00:'))\nplaysData.gameClock=playsData.gameClock.apply(lambda x:x.strip('('))\nplaysData.gameClock=pd.to_datetime(playsData.gameClock)\n## End Code","e64a1ab7":"## Fill the null values of absoluteYardlineNumber attribute with mean of the respective bins\n\n## Start Code\nplaysData.absoluteYardlineNumber = playsData.absoluteYardlineNumber.fillna(playsData.groupby('playId')['absoluteYardlineNumber'].transform('mean'))\n## End Code","7abb639e":"## Drop the unrequired attributes\n\n## Start Code\nplaysData.loc[playsData['penaltyCodes'].isnull(),'penaltyCodes']='None'\nplaysData.loc[playsData['penaltyJerseyNumbers'].isnull(),'penaltyJerseyNumbers']='None'\n## End Code","a60d4ea3":"## Compute the penalty on each team in every play\n\n## Start Code\nplaysData['penaltyOnDefense']=playsData['playResult']-playsData['offensePlayResult']\nplaysData['penaltyOnOffense']=playsData['offensePlayResult']-playsData['playResult']\nplaysData.loc[playsData.penaltyOnDefense<0,'penaltyOnDefense']=0\nplaysData.loc[playsData.penaltyOnOffense<0,'penaltyOnOffense']=0\n## End Code","cedbff63":"## Check the null values in each attribute\nplaysData.isnull().sum()","af950a2a":"## Read the games.csv file and store it in a pandas dataframe\n\n##Start Code\nplayersData=pd.read_csv('..\/input\/nfl-big-data-bowl-2021\/players.csv')\n## End Code\n\nplayersData","f380efaf":"## Count the null values in each attribute\n\nplayersData.isnull().sum()","2b85e450":"## Convert the data type of the height attribute from string to integer\n\n## Start Code\ndef cleanHeight(x):\n    if len(x)==2:\n        return int(x)\n    else:\n        return np.nan\nplayersData.height=playersData.height.apply(cleanHeight)\n## End Code","b9da1b48":"## Check the null values after this conversion\nplayersData.height.isnull().sum()","de39d647":"## Fill the null values of height with mean of their respective bins of weight\n\n## Start Code\nplayersData.height=playersData.height.fillna(playersData.groupby('position')['height'].transform('mean'))\n## End Code\n\nplayersData.height.isnull().sum()","48e0405d":"## Plot a Histogram of height distribution of the players\n\n## Start Code\nbins = np.arange(playersData.height.min(),playersData.height.max() + 1, 1)\nsns.distplot(playersData.height,bins = bins)\nplt.savefig('Output3.jpg')\n## End Code","aec53ca4":"## Check for other null valued attributes\nplayersData.isnull().sum()","cd37a47b":"## Convert birthDate attribute to pandas date and time format\n\n## Start Code\nplayersData.birthDate=pd.to_datetime(playersData.birthDate)\n## End Code\n\nplayersData.info()","8e73fcef":"## Compute the age of the players for analysing it against their performance\n\n## Start Code\ndef compute(x):\n    return 2018-x.year\n\nplayersData['age']=playersData.birthDate.apply(compute)\n## End Code\n\nplayersData","a7089b48":"## Plot top 10 players Height Distribution\n\n## Start Code\nheightCount=pd.DataFrame(playersData.groupby('height')['displayName'].value_counts().sort_values(ascending=False))\nheightCount=heightCount.drop('displayName',axis=1).reset_index()\nfig,ax1=plt.subplots(1,figsize=(10,5))\np=sns.barplot(x=heightCount.height,y=heightCount.displayName[:10],ax=ax1,linewidth=1,alpha=0.7,palette='Blues_r')\nfor i,j in enumerate(heightCount.height[:10]):\n        ax1.text(.7,i+0.08,'{:0.1f}'.format(j),weight=\"bold\",size=15)\np.set_title(\"Top Players Height Distribution\",weight='bold',size=15)\np.set_xlabel('Player Height (Inches)',size=15)\np.set_ylabel('Player\\'s  Distribution',size=15)\nplt.show()\nplt.savefig('Output4.jpg')\n## End Code","c69eb25a":"## Plot top 10 players Age Distribution\n\n## Start Code\nageCount=pd.DataFrame(playersData.groupby('age')['displayName'].value_counts())\nageCount=ageCount.drop('displayName',axis=1).reset_index()\nageCount=ageCount.sort_values('age',ascending=False)\nfig,ax1=plt.subplots(1,figsize=(10,5))\np=sns.barplot(x=ageCount.age,y=ageCount.displayName[:10],ax=ax1,linewidth=1,alpha=0.7,palette='Blues_r')\nfor i,j in enumerate(ageCount.age[:10]):\n        ax1.text(.7,i+0.08,'{:0.1f}'.format(j),weight=\"bold\",size=15)\np.set_title(\"Top Players Age Distribution\",weight='bold',size=15)\np.set_xlabel('Player Age',size=15)\np.set_ylabel('Player\\'s  Distribution',size=15)\nplt.show()\nplt.savefig('Output5.jpg')\n## End Code","e9db680a":"## Start Code\npositionCount=pd.DataFrame(playersData.groupby('position')['nflId'].count())\npositionCount.reset_index(inplace=True)\npositionCount=positionCount.sort_values('nflId',ascending=False)\npositionCount.reset_index(inplace=True)\nplt.figure(figsize=(20,5))\nplt.bar(positionCount.position,positionCount.nflId)\nplt.xlabel('Position')\nplt.ylabel('Number of Players')\nplt.show()\nplt.savefig('Output6.jpg')\n## End code","f460e150":"## Start Code\npositionHW=pd.DataFrame(playersData.groupby('position')[['height','weight']].mean())\npositionHW.reset_index(inplace=True)\nplt.figure(figsize=(10,5))\nplt.scatter(positionHW.weight,positionHW.height)\nplt.xlabel('Weight (in pounds)')\nplt.ylabel('Height (in inches)')\nplt.show()\nplt.savefig('Output7.jpg')\n## End Code","3c581c5b":"## List the names of all the 17 weeks.csv files\n\n## Start Code\nweeks=[\n    '..\/input\/nfl-big-data-bowl-2021\/week1.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week2.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week3.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week4.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week5.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week6.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week7.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week8.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week9.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week10.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week11.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week12.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week13.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week14.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week15.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week16.csv',\n    '..\/input\/nfl-big-data-bowl-2021\/week17.csv'\n]\n## End Code","9bfad928":"## Read all the 17 week files and store them into a list of dataframes\n\n## Start Code\nweeksData=[]\nfor week in weeks:\n    weeksData.append(pd.read_csv(week))\n## End Code\n\nprint(str(len(weeksData))+' weeks Data read')","f0684414":"## Convert the time attribute to pandas dataframe, eliminate tuples with missing player information and set null values of\n## route attribute to 'UNKNOWN' in each week file\n\n## Start Code\ndef preProcess(weekData):\n    weekData.time=pd.to_datetime(weekData.time)\n    weekData=weekData.set_index('time')\n    weekData=weekData.tz_convert('EST')\n    weekData=weekData.reset_index()\n    weekData.drop(weekData[weekData.team=='football'].index,inplace=True)\n    weekData.loc[weekData['route'].isnull(),'route']='UNKNOWN'\n    return weekData\n\nfor i in range(17):\n    weeksData[i]=preProcess(weeksData[i])\n## End Code","46a1635b":"## Keep a list of all the defensive positions to retrieve defensive players only\n\n## Start Code\ndefensivePositions=['CB','SS','MLB','OLB','FS','DE','LB','ILB','DB','S','NT','DT']\n## End Code","527f2490":"## Copy Players Data into another Dataframe to create player profiles of defensive players only\n\n## Start Code\nplayerProfile=playersData.copy()\nplayerProfile=playerProfile[playerProfile['position'].isin(defensivePositions)]\n## End Code","3bae0175":"## Create a class to store the attributes\n\n## Start Code\nplayers=[]\nclass Player:\n    def __init__(self,id):\n        self.nflId=id\n        self.maxSpeed=0\n        self.maxAccl=0\n    def display(self):\n        print(str(self.nflId)+' '+str(self.maxSpeed))\n## End Code","6a039720":"## Compute the maximumSpeed and maximumAcceleration for each player across all the 17 weeks of the NFL season 2018\n\n## Start Code\nmaxSpeeds=[]\nmaxAccls=[]\nfor weekData in weeksData:\n    maxSpeeds.append(weekData.groupby('nflId')['s'].max())\n    maxAccls.append(weekData.groupby('nflId')['a'].max())\n\ndef createObjects(id,pos):\n    if pos in defensivePositions:\n        players.append(Player(id))\n\nplayersData.apply(lambda row : createObjects(row['nflId'],row['position']),axis=1)\nfor ele in players:\n    for i in range(17):\n        try:\n            ele.maxSpeed=max(ele.maxSpeed,maxSpeeds[i][ele.nflId])\n            ele.maxAccl=max(ele.maxAccl,maxAccls[i][ele.nflId])\n        except:\n            ele.maxSpeed=max(ele.maxSpeed,0)\n            ele.maxAccl=max(ele.maxAccl,0)\n## End Code","f30a8911":"## List the events of weekData to detect defensive acts by the players\n\n## Start Code\ndefensiveEvents=[]\nfor weekData in weeksData:\n    defensiveEvents+=list(weekData.event.unique())\ndefensiveEvents=list(set(defensiveEvents))\n## End Code\n\ndefensiveEvents","c30c477d":"## Compute the total number of tackles by each player across all the 17 weeks of the NFL season 2018\n\n## Start Code\ntackles=[]\nfor weekData in weeksData:\n    tackle=weekData.copy()\n    tackle.drop(tackle[tackle.event!='tackle'].index,inplace=True)\n    tackle=tackle[tackle['position'].isin(defensivePositions)]\n    tackles.append(tackle)\ntacklesData=pd.concat(tackles)\nplayerWiseTotalTackles=tacklesData.groupby('nflId')['event'].count()\nfor ele in players:\n    try:\n        ele.tackles=playerWiseTotalTackles[ele.nflId]\n    except KeyError:\n        ele.tackles=0\n## End Code","51de90c1":"## Compute the total number of quarterback sacks by each player across all the 17 weeks of the NFL season 2018\n\n## Start Code\nqbSacks=[]\nfor weekData in weeksData:\n    qbSack=weekData.copy()\n    qbSack.drop(qbSack[qbSack.event!='qb_sack'].index,inplace=True)\n    qbSack=qbSack[qbSack['position'].isin(defensivePositions)]\n    qbSacks.append(qbSack)\nqbSacksData=pd.concat(qbSacks)\nplayerWiseTotalqbSacks=qbSacksData.groupby('nflId')['event'].count()\nfor ele in players:\n    try:\n        ele.qbSacks=playerWiseTotalqbSacks[ele.nflId]\n    except KeyError:\n        ele.qbSacks=0\n## End Code","f9181e66":"## Compute the total number of Pass Interceptions by each player across all the 17 weeks of the NFL season 2018\n\n## Start Code\ninterceptions=[]\nfor weekData in weeksData:\n    interception=weekData.copy()\n    interception.drop(interception[interception.event!='pass_outcome_interception'].index,inplace=True)\n    interception=interception[interception['position'].isin(defensivePositions)]\n    interceptions.append(interception)\ninterceptionsData=pd.concat(interceptions)\nplayerWiseTotalInterceptions=interceptionsData.groupby('nflId')['event'].count()\nfor ele in players:\n    try:\n        ele.interceptions=playerWiseTotalInterceptions[ele.nflId]\n    except KeyError:\n        ele.interceptions=0\n## End Code","8f4e0732":"## Compute the total number of 'Out of Bounds Push' by each player across all the 17 weeks of the NFL season 2018\n\n## Start Code\noutOfBounds=[]\nfor weekData in weeksData:\n    outOfBound=weekData.copy()\n    outOfBound.drop(outOfBound[outOfBound.event!='out_of_bounds'].index,inplace=True)\n    outOfBound=outOfBound[outOfBound['position'].isin(defensivePositions)]\n    outOfBounds.append(outOfBound)\noutOfBoundsData=pd.concat(outOfBounds)\nplayerWiseTotalOutOfBounds=outOfBoundsData.groupby('nflId')['event'].count()\nfor ele in players:\n    try:\n        ele.outOfBounds=playerWiseTotalOutOfBounds[ele.nflId]\n    except KeyError:\n        ele.outOfBounds=0\n## End Code","bc4c9443":"## Append these values to the playerProfile DataFrame to prepare the Player Profiles\n\n## Start Code\ndef setMaxSpeed(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.maxSpeed\n    \ndef setMaxAcclr(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.maxAccl\n    \ndef setTackle(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.tackles\n        \ndef setqbSack(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.qbSacks\n    \ndef setinterceptions(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.interceptions\n\ndef setOutOfBounds(x):\n    for ele in players:\n        if ele.nflId==x:\n            return ele.outOfBounds\n\nplayerProfile['maximumSpeed']=playerProfile.nflId.apply(setMaxSpeed)\nplayerProfile['maximumAcceleration']=playerProfile.nflId.apply(setMaxAcclr)\nplayerProfile['tackles']=playerProfile.nflId.apply(setTackle)\nplayerProfile['quarterbackSacks']=playerProfile.nflId.apply(setqbSack)\nplayerProfile['passInterceptions']=playerProfile.nflId.apply(setinterceptions)\nplayerProfile['outOfBounds']=playerProfile.nflId.apply(setOutOfBounds)\n## End Code","32eeca85":"## Drop the unrequired birthDate attribute from playerProfile Dataframe\n\n## Start Code\nplayerProfile=playerProfile.drop(['birthDate'],axis=1)\n## End Code","50358917":"## Check the Player Profiles\nplayerProfile","ca267327":"## Check the correlation of each pair of attributes in the playerProfile\n\n## Start Code\ncorrelation=playerProfile.corr()\nplt.figure(figsize=(15,10))\nsns.heatmap(correlation,annot=True ,cmap = plt.cm.plasma, linecolor='white', linewidths=2)\nplt.title('Correlation Between Variables')\nplt.show()\nplt.savefig('Output8.jpg')\n## End Code","35f5cb66":"## Extract the top players in Pass Interceptions and sort them by their name\n\n## Start Code\nbestPassInterceptors=playerProfile.sort_values('passInterceptions',ascending=False).head(12)\nbestPassInterceptors=bestPassInterceptors[['nflId','displayName','position','height','weight','age','passInterceptions']]\nbestPassInterceptors=bestPassInterceptors.sort_values('passInterceptions')\n## End Code","d6129382":"## Create a column with a combination of Name and NFL Id to plot it against Pass Interceptions\n\n## Start Code\ndef func(x):\n    return str(x)\nbestPassInterceptors['IdName']=bestPassInterceptors.nflId.apply(func)\nbestPassInterceptors['IdName']=bestPassInterceptors['displayName']+' ('+bestPassInterceptors['IdName']+')'\n## End Code","45b8c0c2":"## Plot the graph\n\n## Start Code\nfig, ax = plt.subplots(figsize=(10,4), dpi= 80)\nax.hlines(y=bestPassInterceptors.IdName,xmin=0,xmax=bestPassInterceptors.passInterceptions,color='firebrick', alpha=0.7, linewidth=2)\nax.scatter(x=bestPassInterceptors.passInterceptions, y=bestPassInterceptors.IdName, s=75, color='firebrick', alpha=0.7)\nax.set_title('Top Players against the Passes', fontdict={'size':16})\nax.set_ylabel('Player Name and NFLId')\nax.set_xlabel('Number of Pass Interceptions')\nax.set_yticks(bestPassInterceptors.IdName)\nax.set_yticklabels(bestPassInterceptors.IdName, fontdict={'horizontalalignment': 'right', 'size':12})\nax.set_xlim(0, 30)\nfor row in bestPassInterceptors[['IdName','passInterceptions','position']].itertuples():\n    ax.text(row.passInterceptions+1,row.IdName, s=str(row.passInterceptions)+' '+row.position, horizontalalignment= 'center', verticalalignment='bottom', fontsize=10)\nplt.show()\nplt.savefig('Output9.jpg')\n## End Code","90d485fe":"## Display the Profiles with attributes and their units\n\n## Start Code\ndf=bestPassInterceptors.copy()\ndf=df.drop(['IdName'],axis=1)\ndf.set_index('nflId',inplace=True)\ndf=df.rename(columns={'height':'height(in inches)','weight':'weight(in pounds)'})\ndf.sort_values('passInterceptions',ascending=False)\n## End Code","382e22fa":"## Extract the top players in Tackles and sort them by their name. Create an extra column\n## with a comobination of Name and NFL ID to plot against the Tackles\n\n## Start Code\nbestTacklers=playerProfile.sort_values('tackles',ascending=False).head(15)\nbestTacklers=bestTacklers[['nflId','displayName','position','height','weight','age','maximumSpeed','maximumAcceleration','tackles']]\nbestTacklers=bestTacklers.sort_values('tackles')\ndef func(x):\n    return str(x)\nbestTacklers['IdName']=bestTacklers.nflId.apply(func)\nbestTacklers['IdName']=bestTacklers['displayName']+' ('+bestTacklers['IdName']+')'\n## End Code","63db3605":"## Plot the graph\n\n## Start Code\nfig, ax = plt.subplots(figsize=(10,5), dpi= 80)\nax.hlines(y=bestTacklers.IdName,xmin=0,xmax=bestTacklers.tackles,color='blue', alpha=0.7, linewidth=2)\nax.scatter(x=bestTacklers.tackles, y=bestTacklers.IdName, s=75, color='blue', alpha=0.7)\nax.set_title('Top Players in Tackling', fontdict={'size':16})\nax.set_ylabel('Player Name and NFLId')\nax.set_xlabel('Number of Tackles')\nax.set_yticks(bestTacklers.IdName)\nax.set_yticklabels(bestTacklers.IdName, fontdict={'horizontalalignment': 'right', 'size':12})\nax.set_xlim(250, 400)\nfor row in bestTacklers[['IdName','tackles','position','maximumSpeed','maximumAcceleration']].itertuples():\n    ax.text(row.tackles+35,row.IdName, s=str(row.tackles)+' '+row.position+' ('+str(row.maximumSpeed)+' yards\/sec,'+str(row.maximumAcceleration)+' yards\/sec sq.)', horizontalalignment= 'center', verticalalignment='bottom', fontsize=10)\nplt.show()\nplt.savefig('Output10.jpg')\n## End Code","4f07f4cb":"## Display the Profiles with attributes and their units\n\n## Start Code\ndf=bestTacklers.copy()\ndf=df.drop(['IdName'],axis=1)\ndf.set_index('nflId',inplace=True)\ndf=df.rename(columns={'height':'height(in inches)','weight':'weight(in pounds)','maximumSpeed':'MaxSpeed(in yards\/sec)','maximumAcceleration':'MaxAcceleration(in yards\/sec sq.)'})\ndf.sort_values('tackles',ascending=False)\n## End Code","4486774b":"## Select players with more than 150 tackles and sort them with respect to tackles.\n## Plot the distribution against the player defensive position\n\n## Start Code\npositionTackles=playerProfile[playerProfile['tackles']>150].sort_values('tackles',ascending=False)\npositionTackles=pd.DataFrame(positionTackles.groupby('position')['tackles'].count())\nfig, ax = plt.subplots(figsize=(12, 7), subplot_kw=dict(aspect=\"equal\"), dpi= 80)\ndata = positionTackles['tackles']\ncategories = positionTackles.index\ndef func(pct, allvals):\n    absolute = int(pct\/100.*np.sum(allvals))\n    return \"{:.1f}% ({:d} )\".format(pct, absolute)\nwedges, texts, autotexts = ax.pie(data, autopct=lambda pct: func(pct, data),textprops=dict(color=\"w\"), colors=plt.cm.Dark2.colors)\nax.legend(wedges, categories, title=\"Defensive Positions\", loc=\"center left\", bbox_to_anchor=(1, 0, 0.5, 1))\nplt.setp(autotexts, size=10, weight=700)\nax.set_title(\"Positional distribution of Tackles\")\nplt.show()\nplt.savefig('Output11.jpg')\n## End Code","2ab2e5cc":"## Select players with more than 150 tackles and sort them with respect to tackles.\n## Plot the distribution against the player age\n\n## Start Code\nageTackles=playerProfile[playerProfile['tackles']>150].sort_values('tackles',ascending=False)\nageTackles=pd.DataFrame(ageTackles.groupby('age')['tackles'].count())\nfig, ax = plt.subplots(figsize=(12, 7), subplot_kw=dict(aspect=\"equal\"), dpi= 80)\ndata = ageTackles['tackles']\ncategories = ageTackles.index\ndef func(pct, allvals):\n    absolute = int(pct\/100.*np.sum(allvals))\n    return \"{:.1f}%\".format(pct, absolute)\nwedges, texts, autotexts = ax.pie(data, autopct=lambda pct: func(pct, data),textprops=dict(color=\"w\"), colors=plt.cm.Dark2.colors)\nax.legend(wedges, categories, title=\"Age\", loc=\"center left\", bbox_to_anchor=(1, 0, 0.5, 1))\nplt.setp(autotexts, size=10, weight=700)\nax.set_title(\"Age distribution of Tackles\")\nplt.show()\nplt.savefig('Output12.jpg')\n## End Code","10bcb275":"## Plot the frequency of number of players against the ages in a bar fashion\n\n## Start Code\nsns.barplot(ageTackles.index,ageTackles['tackles'])\nplt.savefig('Output13.jpg')\n## End Code","0d026eef":"## Box plot the Pass Interceptions distribution among the player positions\n\n## Start Code\nsns.set(\n    rc={'figure.figsize':(10,5)}, \n    style=\"white\"\n)\nsns.boxplot(\n    x='position',\n    y='passInterceptions',\n    data=playerProfile\n)\nsns.despine()\nplt.savefig('Output14.jpg')\n## End Code","ec58d484":"## Plot a bar graph of distribution of Pass Interceptions among the player heights rounded off to nearest integer\n\n## Start Code\ndf=playerProfile.copy()\ndf['height']=round(df['height'])\ndf=df.rename(columns={'height':'height (in inches)'})\nfig = px.bar(df, x=\"height (in inches)\", y=\"passInterceptions\", color=\"position\", barmode = 'stack')\nfig.show()\nplt.savefig('Output15.jpg')\n## End Code","a336418d":"## Tabulate the results of Player Profile in a single Data Frame\n\n## Start Code\ngrpByPos=pd.DataFrame(playerProfile.groupby('position')['tackles','passInterceptions','quarterbackSacks','outOfBounds'].sum())\ngrpByPos1=pd.DataFrame(playerProfile.groupby('position')['maximumSpeed','maximumAcceleration'].max())\ngrpByPos=pd.merge(grpByPos,grpByPos1,on=\"position\")\ngrpByPos=grpByPos.reset_index()\n## End Code\n\ngrpByPos","3400f50e":"#### Almost all teams have played 8 games in their opponent ground","da39b6ae":"#### In place of considering the mean number of pass interceptions done by players in each defensive position, which might be\n\n#### affected by the outliers, we consider the total distribution and compare between the positions. We see that First Safety provides\n\n#### a good distribution of pass interceptions across all the defensive player positions.","778f6957":"#### Tall players can contribute well in intercepting the passes among the offensive team players. But still, the players in the height\n\n#### range 71 to 73 have a good record in pass interceptions","1d75171c":"#### Players are best at tackling in the intermediate years if their career. This is usual too. So, the coach can consider a good\n\n#### composition of players of all the age ranges, in appropriate proportion for a balanced defensive team.","0bae87d8":"#### Who are the NFL's top 10 oldest players ?","15c3e62b":"#### Here we observe a pattern that the new comers, which are generally in the age range 20 to 22 have a low record in tackling. As\n\n#### age increases, in other words, they gain experience, they improve in tackling. Then again at the ending ages of their career\n\n#### i.e. around 35 to 37 years, we again see a downfall in the number. This is best depicted in the below plot.","1e4993d3":"# NFL BIG DATA BOWL 2021\n## Team Name :- Team06_5C_SoCSE_KLETech\n## Team Members :-\n#### Sanath A S - 01FE18BCS188 (368)\n#### Raghavendra Kulkarni - 01FE18BCS162 (341)\n#### Rohan Sirigeri - 01FE18BCS176 (356)\n#### Ruturaj Chitragar - 01FE18BCS180 (380)","d71f36d2":"#### There exists no such strong correlation between the average height and weight of the players in a position.","a1e026a2":"## II. The Potential Player Profile Approach","e379cd8d":"## 2. Read and Pre-Process the plays.csv File","ae0e492f":"#### These are the top 12 players who are the best against the offensive passes. We observe that the defensive position CornerBack\n\n#### is the most occuring position among them. Players at this position contribute more in gaining possession on the ball.","ee92e68c":"## I. Pre-Processing and Exploring the Input csv files","b36295a7":"#### Position of a player does play an important role in the number of tackles made by him. The above plot shows the distribution of\n\n#### number of players with extra ordinary tackling skills among the defensive positions","16e205e8":"#### Almost all teams have played 8 games in their home ground","78a30d58":"#### How many players are there in each player position ?","81bcfd25":"### 1. Read and Pre-Process the games.csv File","31b0eaf2":"### 2. Plot the Results and Compare the Attributes","4ba86e6d":"#### Is there any correlation between the average height and weight of the players in each player position ?","787b6e04":"#### We can observe a strong positive correlation between the values calculated in the Player Profile.\n#### These must be further compared with player characteristics and skills to analyse the relationship","e009636a":"### b. Is there anything about a player which can be used to predict his defensive performance ?","b263078b":"#### Margus Hunt is the tallest among all the NFL Players","3acea6ab":"#### How many games have each team played in opponent's ground ?","3c1a37b6":"# Conclusion\n### This particular player profile approach sums up the need of analysis in the area of defensive analysis by\n### providing complete information of the players through their profiles, along with answering important\n### questions that help analyse and evaluate defensive performances of those players.\n### The Player Profile approach collectively provides every player information that is necessary for the game\n### analysis and that in turn helps the team coach or manager to evaluate, analyze or set up a good defensive\n### strategy.","d1a11141":"#### How is the height of the players distributed ?","ccf5e663":"## 3. Read and Pre-Process the players.csv File","451a62c2":"#### The height is distributed almost normally. Hence the filling of null values has not tampered the distribution.","2a034600":"#### Wide Receivers are the strongest part of any offense team and they must be the min target of any defensive success.","d801737c":"### a. Which players are best against the passing plays ?","cb1b043c":"#### These are the top 12 players who are the best in tackling. We observe that the defensive position CornerBack\n\n#### is again the most occuring position among them. Players at this position contribute more in gaining choking the opponent.","8d8476a6":"#### We consider the events 'tackle' , 'pass_outcome_interception' , 'qb_sack' and 'out_of_bounds', which respectively represent a\n#### tackle, a pass interception, a quarterback sack and a out of bounds push.","fefadc40":"#### Tom Brady is the oldest NFL player aged 41","33ba1ca4":"#### Who are the NFL's top 10 tallest players ?","9c94e449":"# The Data Set\n## The dataset contains the following comma seperated values (.csv) files :-\n### 1. games.csv :- Teams playing in each game and game details. The key variable is gameId.\n### 2. plays.csv :- Play information from each game. The key variables are gameId and playId.\n### 3. players.csv :- Information of the players participating in the NFL Season. The key variable is nflId.\n### 4. week[i].csv :- Player tracking data from all games in week i. The key variables are gameId, playId, \n\n### and nflId. There are 17 weeks to a typical NFL Regular Season, and thus 17 data frames with player tracking \n\n### data are provided.\n\n### The dataset contains a total of 1 + 1 + 1 + (1 x 17) = 20 csv files.","f3f555a7":"### 1. Create Player Profiles","ed46557d":"## 4. Read and Pre-Process the week[i].csv Files, i ranging from [0,17)","a2b35089":"#### Wide Receivers (WB) are most in common whereas, HalfBack (HB) is the least occuring position among the players."}}