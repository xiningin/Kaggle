{"cell_type":{"2f9e4062":"code","c79714ea":"code","b2386fef":"code","c88cdf29":"code","27e16b92":"code","b13bccd8":"code","11b791f8":"code","8519f28d":"code","5476ed60":"code","5459823c":"code","b73a16a6":"code","ffc0f143":"markdown","8c91347d":"markdown","a6630405":"markdown","0812edad":"markdown","f4541e0d":"markdown","27406e20":"markdown","85a06cd3":"markdown","ada738af":"markdown","a62e38bf":"markdown","cddc82cf":"markdown","2ad97bf9":"markdown","2279dc86":"markdown"},"source":{"2f9e4062":"# Import a bunch of machine learning libraries\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nimport matplotlib.pyplot as plt # plotting for the graphs at the end\nfrom sklearn.decomposition import PCA # the principal component analysis\nfrom sklearn.preprocessing import StandardScaler # scaling for the features\n\n# Get the data\n# In this case, I wrote out the feature names, because the first one was empty in the data\nfeatures = ['Drink', 'Calories', 'Fat (g)', 'Carb. (g)', 'Fiber (g)', 'Protein', 'Sodium']\n# I skipped over the first row of the data, which had the features names, because I supplied my own\ndata = pd.read_csv('\/kaggle\/input\/starbucks-menu\/starbucks-menu-nutrition-drinks.csv', names=features, skiprows=1)\n# Display the first couple of drinks\ndata.head()","c79714ea":"# x for the data, aka all the nutritional information\n# y for the label I want to use in the graphs later, which I've chosen to be the drink name\ncutoff_features = features[1:]\nx_raw = data.loc[:, cutoff_features].values\ny_raw = data.loc[:,['Drink']].values\n\n# Let's remove all the rows with no data in them\n# For example, Pink Drink only has '-' in all the features\nx=[]\ny=[]\nfor i, row in enumerate(x_raw):\n    if '-' not in row:\n        x.append(row)\n        y.append(y_raw[i][0])\n\n# df for data frame\nx_df = pd.DataFrame(data = x, columns = cutoff_features)\ny_df = pd.DataFrame(data = y, columns=['Drink'])\nexample_df = pd.concat([y_df, x_df], axis = 1)\n# Show the first 10 drinks that have all the data\nexample_df.head(10)","b2386fef":"# Standardize each feature according to its mean and standard deviation (aka z score or standard score)\nx = StandardScaler().fit_transform(x)\npd.DataFrame(data = x, columns = cutoff_features).head()","c88cdf29":"# Do PCA, reduce down to 2 dimensions\npca = PCA(n_components=2)\nprincipal_components = pca.fit_transform(x)\n\n# Show the principal components for the first 5 drinks\n# comp_df aka the data frame for the principal components\ncomp_df = pd.DataFrame(data = principal_components, columns = ['principal component 1', 'principal component 2'])\nfinal_df = pd.concat([y_df, comp_df], axis = 1)\nfinal_df.head(5)","27e16b92":"print(\"First component explains {0:.0%} of variance\".format(pca.explained_variance_ratio_[0]))\nprint(\"Second component explains {0:.0%} of variance\".format(pca.explained_variance_ratio_[1]))","b13bccd8":"# Graph the first two principal components\nfig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 1', fontsize = 15) # Add x-axis label\nax.set_ylabel('Principal Component 2', fontsize = 15) # Add y-axis label\nax.set_title('Starbucks Drinks - 2 Principal Components', fontsize = 20) # Add overall title\nax.scatter(comp_df['principal component 1'], comp_df['principal component 2'], s = 50) # Add all the data points\nax.grid() # Add gridlines\n\n#Annotate each data point\nfor i, txt in enumerate(y):\n    # Annotate the datapoint (from comp_df) with the associated Drink name (from y)\n    annot = ax.annotate(txt, (comp_df['principal component 1'][i],comp_df['principal component 2'][i]))\n    annot.set_visible(False) # Default to not showing any annotations\n    \n    # Show only some of the annotations\n    # Mainly a hacky way to do that, because there are too many labels and I didn't feel like doing extra work\n    if i % 8 == 0:\n        annot.set_visible(True)\n\n# Show the graph\nplt.show()","11b791f8":"# Do PCA, reduce down to 3 dimensions\nx = StandardScaler().fit_transform(x)\npca = PCA(n_components=3)\nprincipal_components = pca.fit_transform(x)\n\n# Show the principal components for the first 5 drinks\n# comp_df aka the data frame for the principal components\ncomp_df = pd.DataFrame(data = principal_components, columns = ['pc1', 'pc2', 'pc3'])\nfinal_df = pd.concat([y_df, comp_df], axis = 1)\nfinal_df.head(5)","8519f28d":"print(\"First component explains {0:.0%} of variance\".format(pca.explained_variance_ratio_[0]))\nprint(\"Second component explains {0:.0%} of variance\".format(pca.explained_variance_ratio_[1]))\nprint(\"Third component explains {0:.0%} of variance\".format(pca.explained_variance_ratio_[2]))","5476ed60":"# Import the 3d projection so I can plot in 3 dimensions\nfrom mpl_toolkits.mplot3d import Axes3D\nfig = plt.figure(figsize = (8,8))\nax = fig.gca(projection='3d') # 3D graph\nax.set_xlabel('Principal Component 1', fontsize = 15) # Add x-axis label\nax.set_ylabel('Principal Component 2', fontsize = 15) # Add y-axis label\nax.set_zlabel('Principal Component 3', fontsize = 15) # Add z-axis label\nax.set_title('Starbucks Drinks - 3 Principal Components', fontsize = 20) # Add overall title\nax.scatter(comp_df['pc1'], comp_df['pc2'], comp_df['pc3'], s = 50) # Add all the data points\nax.grid() # Add gridlines\n\n#Annotate each data point\nfor i, txt in enumerate(y):\n    # Annotate the datapoint (from comp_df) with the associated Drink name (from y)\n    # this time with three coordinates\n    annot = ax.text(comp_df['pc1'][i],comp_df['pc2'][i], comp_df['pc3'][i], txt)\n    annot.set_visible(False) # Default to not showing any annotations\n    \n    # Show only 'Iced Coffee' because I didn't want to put in the effort to be able to see all the labels\n    if i == 4:\n        annot.set_visible(True)\n        \n# Show the graph of PCs 1, 2, and 3\nplt.show()","5459823c":"# PCs 1 and 3\nfig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 1', fontsize = 15) # Add x-axis label\nax.set_ylabel('Principal Component 3', fontsize = 15) # Add y-axis label\nax.set_title('Starbucks Drinks - 3 Principal Components (1 and 3)', fontsize = 20) # Add overall title\nax.scatter(comp_df['pc1'], comp_df['pc3'], s = 50)\nax.grid() # Add gridlines\n\n#Annotate each data point\nfor i, txt in enumerate(y):\n    # Annotate the datapoint (from comp_df) with the associated Drink name (from y)\n    annot = ax.annotate(txt, (comp_df['pc1'][i],comp_df['pc3'][i]))\n    annot.set_visible(False) # Default to not showing any annotations\n    \n    # Show only some of the annotations\n    # Mainly a hacky way to do that, because there are too many labels and I didn't feel like doing extra work\n    if i % 8 == 0:\n        annot.set_visible(True)\n\n# Show the graph for PCs 1 and 3\nplt.show()","b73a16a6":"# PCs 2 and 3\nfig = plt.figure(figsize = (8,8))\nax = fig.add_subplot(1,1,1) \nax.set_xlabel('Principal Component 2', fontsize = 15) # Add x-axis label\nax.set_ylabel('Principal Component 3', fontsize = 15) # Add y-axis label\nax.set_title('Starbucks Drinks - 3 Principal Components (2 and 3)', fontsize = 20) # Add overall title\nax.scatter(comp_df['pc2'], comp_df['pc3'], s = 50)\nax.grid() # Add gridlines\n\n#Annotate each data point\nfor i, txt in enumerate(y):\n    # Annotate the datapoint (from comp_df) with the associated Drink name (from y)\n    annot = ax.annotate(txt, (comp_df['pc2'][i],comp_df['pc3'][i]))\n    annot.set_visible(False)\n    \n    # Show only some of the annotations\n    # Mainly a hacky way to do that, because there are too many labels and I didn't feel like doing extra work\n    if i % 8 == 0:\n        annot.set_visible(True)\n\n# Show the graph for PCs 2 and 3\nplt.show()","ffc0f143":"# 3 Dimensions\nAfter seeing how the drinks looked like in two dimensions, I was curious how much information we'd gain by using three principal components instead of three. I start off by graphing it in 3d. Then I decided that I can't read 3d graphs and so made a bunch of 2d graphs.","8c91347d":"### Perform Principal Component Analysis (with 3 pcs)","a6630405":"# Introduction to Principal Component Analysis \nI chose Starbucks drinks as my data because I thought, 'everyone loves food.' Also, because it has numerical nutrition data without any particular label, so it's unsupervised learning. A lot of the code is copied from [this python notebook](https:\/\/github.com\/mGalarnyk\/Python_Tutorials\/blob\/master\/Sklearn\/PCA\/PCA_Data_Visualization_Iris_Dataset_Blog.ipynb).","0812edad":"### Graph PCs 2 and 3","f4541e0d":"### Standardize Data\nMake sure to [standardize your data](https:\/\/scikit-learn.org\/stable\/auto_examples\/preprocessing\/plot_scaling_importance.html)","27406e20":"### Import Libraries and Data","85a06cd3":"### Perform Principal Component Analysis","ada738af":"### Clean Up Data","a62e38bf":"### Graph PCs 1 and 3","cddc82cf":"### Graph First 2 Principal Components","2ad97bf9":"### Graph PCs 1, 2, and 3","2279dc86":"# Let's Graph That!\nAfter doing all the math and setup for the principal components, I wanted to visualize how the drinks looked in the new coordinate space of the principal components. \nTo me, it looks like all the teas and coffees are in a line on the left. And then there's a cluster of mochas and machiattos in the bottom right. I find it funny how hot chocolate is all the way to the right. I suspect the difference is because of the presence of milk or fruit."}}