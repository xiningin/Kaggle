{"cell_type":{"ccdee7cb":"code","51188986":"code","6dd25214":"code","22cc8208":"code","58585cbe":"code","c8dedbc7":"code","d9e6e125":"code","67e6d6e2":"code","b097795c":"code","172aaea1":"code","07c9a4df":"markdown","2123152a":"markdown","a23998c1":"markdown"},"source":{"ccdee7cb":"import warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\n%matplotlib inline","51188986":"covid = pd.read_csv('\/kaggle\/input\/omicron-covid19-variant-daily-cases\/covid-variants.csv')\ncovid['variant'] = covid['variant'].apply(lambda x:'B.1 Series' if x.startswith('B.1') else('S:677 Series' if x.startswith('S:677') else x))\n\nworld = pd.read_csv('\/kaggle\/input\/countries-of-the-world\/countries of the world.csv')\nworld['Country'] = world['Country'].apply(lambda x:x.strip())\n\n\ncovid = covid.merge(world[['Country','Region']],left_on='location',right_on='Country')\n\nomicron = covid[covid['variant']==\"Omicron\"]\n\ncovid","6dd25214":"print('From ',covid['date'].min(),' to ',covid['date'].max())","22cc8208":"earliest_date = omicron[omicron['num_sequences']>0]['date'].min()\nprint(\"First record for Omicron: \"+str(earliest_date))","58585cbe":"tmp = omicron[omicron['date']>=earliest_date][['date','num_sequences']].groupby('date').sum().reset_index()\nplt.figure(figsize=(25,5))\nplt.plot(tmp['date'],tmp['num_sequences'])\nplt.title('Trend for Omicron by Date')\nplt.show()","c8dedbc7":"tmp = omicron[['location','num_sequences']].groupby('location').sum().reset_index().sort_values(by='num_sequences',ascending=False)\ntmp = tmp[tmp['num_sequences']>0]\nplt.figure(figsize=(25,5))\nplt.bar(tmp['location'],tmp['num_sequences'])\nplt.xticks(rotation=90)\nplt.title('Distribution of Omicron by countries')\nplt.show()","d9e6e125":"tmp = covid[['location','variant','num_sequences']].groupby(['location','variant']).sum().reset_index()\ntmp_stat = tmp.groupby('location').sum().reset_index()\ntmp = tmp.merge(tmp_stat,on=\"location\")\ntmp['per_sequences'] = tmp['num_sequences_x']\/tmp['num_sequences_y']\n\npd.pivot_table(tmp,index='location',columns='variant',values='per_sequences').plot(kind='bar', figsize=(25,5), stacked=True)\nplt.legend(loc='right')\nplt.title('Perception of variant by countries')\nplt.show()","67e6d6e2":"tmp = omicron[['Region','num_sequences']].groupby('Region').sum().reset_index().sort_values(by='num_sequences',ascending=False)\ntmp = tmp[tmp['num_sequences']>0]\nplt.figure(figsize=(25,5))\nplt.bar(tmp['Region'],tmp['num_sequences'])\nplt.xticks(rotation=90)\nplt.title('Distribution of Omicron by regions')\nplt.show()","b097795c":"tmp = covid[['Region','variant','num_sequences']].groupby(['Region','variant']).sum().reset_index()\ntmp_stat = tmp.groupby('Region').sum().reset_index()\ntmp = tmp.merge(tmp_stat,on=\"Region\")\ntmp['per_sequences'] = tmp['num_sequences_x']\/tmp['num_sequences_y']\n\npd.pivot_table(tmp,index='Region',columns='variant',values='per_sequences').plot(kind='bar', figsize=(25,5), stacked=True)\nplt.legend(loc='right')\nplt.title('Perception of variant by regions')\nplt.show()","172aaea1":"# Define Propagation coefficient = count\/find_days\ntmp = covid[['date','variant','num_sequences']]\ntmp['date'] = pd.to_datetime(tmp['date'])\ntmp = tmp[['variant','num_sequences']].groupby('variant').sum().reset_index()\n\ntmp_earliest = pd.DataFrame({'variant':list(tmp['variant'].unique())})\ntmp_earliest['ed'] = [covid[covid['variant']==variant][covid['num_sequences']>0]['date'].min() for variant in tmp_earliest['variant'].tolist()]\ntmp_earliest['ed'] = pd.to_datetime(tmp_earliest['ed'])\ntmp_earliest['ld'] = \"2021-11-01\"\ntmp_earliest['ld'] = pd.to_datetime(tmp_earliest['ld'])\ntmp_earliest['days'] = tmp_earliest[['ed','ld']].apply(lambda row:(row['ld']-row['ed']).days,axis=1)\ntmp_earliest\n\ntmp = tmp.merge(tmp_earliest,on='variant')\ntmp['Propagation coefficient'] = tmp['num_sequences'] \/ tmp['days']\n\ntmp[['variant','Propagation coefficient']].sort_values('Propagation coefficient',ascending=False).set_index('variant').plot(kind='bar', figsize=(25,5))\nplt.title(\"Propagation coefficient of variant\")\nplt.show()","07c9a4df":"The end.","2123152a":"## View for Omicron","a23998c1":"<h2 style = \"font-size:50px; font-family:Garamond ; font-weight : normal; background-color:#FA4659; color :  #F0FFF3; text-align: center; border-radius: 5px 5px; padding: 5px\">\ud83e\udd16\ud83e\udd16PLEASE UPVOTE!!!\ud83e\udd16\ud83e\udd16<\/h2> "}}