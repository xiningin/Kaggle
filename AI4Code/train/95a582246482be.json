{"cell_type":{"9f44392b":"code","a377de63":"code","7709d685":"code","a280f8dd":"code","96f13994":"code","7b8e0a82":"code","d40d9d56":"code","cf9dee0c":"code","08c6f56c":"code","a11782ab":"code","70f0611e":"code","3b5563fc":"markdown","2ec4b064":"markdown","252a7fb6":"markdown","8b401136":"markdown","aa5725dd":"markdown","1b7e5023":"markdown"},"source":{"9f44392b":"# Import libraries\nimport numpy as np # linear algebra\nimport pandas as pd # data processing\nimport matplotlib.pyplot as plt # graph\nimport seaborn as sns # advanced graph\nimport math","a377de63":"# Import data\nape = pd.read_csv('\/kaggle\/input\/financial-data-of-french-compagnies\/ape_fusion.csv')\ndata = pd.read_csv('\/kaggle\/input\/financial-data-of-french-compagnies\/data_kaggle.csv')\ndata = data.drop('Unnamed: 0', axis=1)","7709d685":"# Missing values\ncol_info = pd.DataFrame(index=data.columns, columns=['type', '% mv']) # information about the columns\nprint('data.shape: ',data.shape) # nombres de lignes et de colonnes\ncol_info['type'] = [str(x) for x in data.dtypes] # type\nprint('\\ndata.dtypes.value_counts():\\n', data.dtypes.value_counts())\n\n# Histogram of the missing values\ncol_info['% mv'] = data.isna().sum(axis=0)\/data.shape[0]\n\nsns.histplot(data=col_info, x='% mv', hue='type',  multiple=\"stack\")\nplt.title('% of missing value per column')\nplt.ylabel('Number of column')\nplt.xlabel('%')\nplt.show()","a280f8dd":"# visualization of the missing values\ndict_colors = {'float64':'blue', 'int64':'orange', 'object': 'green', 'bool':'red'}  # colors of each type\n\nfig = plt.figure(figsize=(25,5), dpi=150)\nax = sns.heatmap(data.sample(100).isna(), cbar=False)\nplt.title('Display of the values present in black', fontsize=20)\n\n# We modify the color of the x-axis\nax.xaxis.set_visible(False)\ntext_kwargs = dict(rotation='vertical', fontsize=14, va='top', ha='center')\noffset = 100\nfor x, col in zip(ax.xaxis.get_ticklocs(), data.columns):\n    type_col = data.dtypes.loc[col].name # get the type of the column\n    ax.text(x, offset, col, **text_kwargs, color=dict_colors.get(type_col))","96f13994":"# Values taken by the qualitative variables\nfor col in data.select_dtypes(include=['object']):\n    print(col, 'nunique=', data[col].nunique(), '\\n',data[col].unique()[:5], '\\n')","7b8e0a82":"data.describe()","d40d9d56":"data.loc[:,'Total des charges d\u2019exploitation'].hist()\nplt.title('Total des charges d\u2019exploitation')","cf9dee0c":"# List of the columns with the selected type (object, float, int, str)\ndata.dtypes[data.dtypes == 'object']","08c6f56c":"# Sorts columns by percentage of missing values \ndata.isna().sum(axis=0).sort_values()","a11782ab":"# we create the following function in order to visualize the data with high scale\ndef obtention_log10(val):\n  \"\"\" Transform a number : 100 000 becomes 5 and -100 becomes -2 \"\"\"\n  if val == np.nan: return np.nan\n  elif (isinstance(val, float)) or (isinstance(val, int)):\n    signe, nb = np.sign(val), np.absolute(val)\n    if nb < 1: return 0\n    else : return math.log10(nb) * signe\n  else: return val\n\n# we apply the function on the right columns\ndata_log10 = pd.concat([data.iloc[:,0],data.iloc[:,1:69].applymap(obtention_log10), data.iloc[:,69:-1]], axis=1)","70f0611e":"#Histogram of continuous variable\ndata_log10.select_dtypes(include=float).hist(bins=30, figsize=(20, 60), layout=(20,5))","3b5563fc":"## Shape Analysis","2ec4b064":"We can observe the wealth of information at our disposal. Log data regularly represent normal distributions. Which is a good sign. We can also observe normal bimodal distributions.","252a7fb6":"The vast majority of columns are numeric columns. The filling rate of the columns is very variable. Some columns are completely empty!","8b401136":"## Exploratory Data Analysis of data\nGoal :\n     Understand our data as well as possible\n     \nShape Analysis:\n*      rows and columns: (100 000, 88)\n*      types of variables: qualitative: 12, quantitative: 76\n*      The amplitudes of the values are very important. We need to use the log fonction for the graph.\n*      Analysis of missing values: Lots of missing values. Some columns are practically empty.\n\nBackground Analysis:\n*      Some family links are present in the columns, it would be necessary to check that these links are correct.","aa5725dd":"## Background Analysis:","1b7e5023":"The histogram of a column isn't interesting, because the amplitude of the data is too important. The histogram of continuous variables gives nothing, because the variables have very large amplitudes."}}