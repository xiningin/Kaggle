{"cell_type":{"ca9b65b5":"code","bc10df23":"code","30808ff7":"code","b670b018":"code","2c8f8a10":"code","0595606f":"code","757bc14e":"code","849f3b7d":"code","eede3d23":"code","634f68e5":"code","801d978d":"code","7fdab1b5":"code","e89d8626":"code","96d2227b":"code","0f5d6a1f":"code","15b73bc0":"code","915fbefd":"code","869e32de":"code","e7461b5c":"code","5ad042e0":"code","f598e887":"markdown","08e7e776":"markdown","7d450f63":"markdown","9728cdca":"markdown","98f3f2c8":"markdown","4e328968":"markdown","afbe9e81":"markdown","45e724ee":"markdown","59ae38fa":"markdown","7c4d2ca4":"markdown","52558718":"markdown","1254ef8d":"markdown","b2b98971":"markdown","ee2a7907":"markdown","dd2cbd43":"markdown","b737488b":"markdown"},"source":{"ca9b65b5":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom pathlib import Path\nimport os\nfrom tqdm import tqdm\nimport random\nimport seaborn as sns\nimport math\nimport warnings\nwarnings.filterwarnings('ignore')","bc10df23":"def transform_csv2pickle(path, usecols, dtype):\n    train = pd.read_csv(path, usecols=usecols, dtype=dtypes)\n    train.to_pickle('..\/input\/ubiquant-market-prediction\/train.pkl')\n    \npath = '..\/input\/ubiquant-market-prediction\/train.csv'\n\nbasecols = ['row_id', 'time_id', 'investment_id', 'target']\nfeatures = [f'f_{i}' for i in range(300)]\n\ndtypes = {'row_id' : 'str',\n         'time_id' : 'uint16',\n         'investment_id' : 'uint16',\n         'target' : 'float32'}\n\nfor col in features:\n    dtypes[col] = 'float32'\n    \n#transform_csv2pickle(path, basecols+features, dtypes)","30808ff7":"%%time\ndf = pd.read_pickle('..\/input\/ump-train-picklefile\/train.pkl')\ndisplay(df.info())\ndisplay(df.head())","b670b018":"df.shape","2c8f8a10":"df.columns","0595606f":"df.describe()","757bc14e":"df['investment_id'].nunique()","849f3b7d":"df['time_id'].nunique()","eede3d23":"df.isnull().sum().sum()","634f68e5":"sns.set_theme()\nfig, ax = plt.subplots(1, 1, figsize=(14,4))\nsns.distplot(df['target']).set_title('Target Distribution')\nfig.show()","801d978d":"sns.set_theme()\nfig, ax = plt.subplots(1, 1, figsize=(14,4))\nsns.distplot(df['time_id']).set_title('Time ID Distribution')\nfig.show()","7fdab1b5":"sns.set_theme()\nfig, ax = plt.subplots(1, 1, figsize=(14,4))\nsns.distplot(df['investment_id']).set_title('Investiment ID Distribution')\nfig.show()","e89d8626":"sample_features = random.sample(range(299), 9)\nfig, ax = plt.subplots(3, 3, figsize=(18, 18))\nfor i, sample in enumerate(sample_features):\n    sns.distplot(df[f'f_{sample}'], ax=ax[math.floor(i\/3), i%3]).set_title(f'f_{sample} Distribution')\nfig.show()","96d2227b":"sns.set_theme()\nfig, ax = plt.subplots(3, 1, figsize=(16, 12))\nsns.lineplot(data=df[df['investment_id']==10]['target'], ax=ax[0]).set_title('Investement 10')\nsns.lineplot(data=df[df['investment_id']==86]['target'], ax=ax[1], color='r').set_title('Investement 86')\nsns.lineplot(data=df[df['investment_id']==1065]['target'], ax=ax[2], color='g').set_title('Investement 1065')\nplt.show()","0f5d6a1f":"investment_0 = df[df['investment_id']==0]\ndf_0 = investment_0.drop(['row_id', 'investment_id'], axis=1)\ndel investment_0\ndf_30 = df_0.iloc[:, :32]\ndel df_0\ncorrMatrix = df_30.corr()\nplt.figure(figsize=(15,8))\nsns.heatmap(corrMatrix.to_numpy(), cmap='YlGnBu')","15b73bc0":"df_corr_0 = pd.DataFrame(columns=['feature', 'corr'])\ndf_0 = df[df['investment_id']==0]\ndf_0 = df_0.drop(['row_id', 'investment_id'], axis=1)\nfor i in range(300):\n    feature = f'f_{i}'\n    corrMatrix = df_0['target'].corr(df_0[feature])\n    data = {'feature':feature, 'corr': corrMatrix*100}\n    df_corr_0 = df_corr_0.append(data, ignore_index=True)\ndf_corr_0","915fbefd":"df_corr_1 = pd.DataFrame(columns=['feature', 'corr'])\ndf_0 = df[df['investment_id']==1]\ndf_0 = df_0.drop(['row_id', 'investment_id'], axis=1)\nfor i in range(300):\n    feature = f'f_{i}'\n    corrMatrix = df_0['target'].corr(df_0[feature])\n    data = {'feature':i, 'corr': corrMatrix*100}\n    df_corr_1 = df_corr_1.append(data, ignore_index=True)\ndf_corr_1","869e32de":"fig, ax = plt.subplots(1, 1, figsize=(16, 6))\nsns.lineplot(data=df_corr_0, x='feature', y='corr')\nsns.lineplot(data=df_corr_1, x='feature', y='corr')\nplt.show()","e7461b5c":"df_corr = pd.DataFrame(columns=['feature', 'corr'])\ndf_0 = df.drop(['row_id', 'investment_id'], axis=1)\nfor i in range(300):\n    feature = f'f_{i}'\n    corrMatrix = df_0['target'].corr(df_0[feature])\n    data = {'feature':i, 'corr': corrMatrix*100}\n    df_corr = df_corr.append(data, ignore_index=True)\ndf_corr","5ad042e0":"fig, ax = plt.subplots(1, 1, figsize=(16, 10))\nsns.lineplot(data=df_corr_0, x='feature', y='corr')\nsns.lineplot(data=df_corr_1, x='feature', y='corr')\nsns.lineplot(data=df_corr, x='feature', y='corr')\nplt.show()","f598e887":"### Number of unique 'investement_id'","08e7e776":"### The distribution of the 'target' values","7d450f63":"# Import Liberaries","9728cdca":"# Load the Dataset","98f3f2c8":"### The distribution of random 9 features","4e328968":"### The distribution of the 'investment_id' values","afbe9e81":"### Number of unique 'time_id'","45e724ee":"### Target distribution of 3 different 'investment_id'","59ae38fa":"### The correlation between the target and the features for all investements","7c4d2ca4":"### The Correlation between the first 30 features for investement 0","52558718":"### The distribution of the 'time_id' values","1254ef8d":"# Convert csv file to pickle file","b2b98971":"# EDA","ee2a7907":"### The correlation between the target and the features for investement 0","dd2cbd43":"### The correlation between the target and the features for investement 1","b737488b":"### Number of missing values"}}