{"cell_type":{"3c8087f7":"code","34f95415":"code","450f7c41":"code","04360f2f":"code","2031a96d":"code","403fc935":"code","1ed2db73":"code","000487f7":"code","40cf500a":"code","0584f853":"code","9e12f952":"code","220cc278":"code","7f000d55":"code","12fc5663":"code","0bc88fff":"code","08da63de":"code","d35a5477":"code","2c21809c":"code","d811a23a":"code","b911ed73":"code","2ffea374":"code","16c2ef61":"code","72231e89":"code","b89edd41":"code","041c4db8":"code","36ed3961":"code","0bdf925d":"code","b673e093":"code","6e304d91":"code","e171de62":"code","d3ef4783":"code","77810e8c":"code","9ffb399f":"markdown","37564562":"markdown","88d4cf45":"markdown","0fc28f38":"markdown","53aa8eeb":"markdown","e183a873":"markdown","e10532ca":"markdown","f64fdb83":"markdown","8bd67259":"markdown","5f545d88":"markdown","4d0e8751":"markdown","e6d6dc0e":"markdown","fa2f7b62":"markdown","f66bae30":"markdown","ae1b966f":"markdown","6ae907c3":"markdown","2d83c2a1":"markdown","138110c3":"markdown","60caf404":"markdown","32522434":"markdown","be05f330":"markdown","17048571":"markdown","21ea5297":"markdown","f924e490":"markdown"},"source":{"3c8087f7":"# Importing the libraries\n\nimport pandas as pd\nimport datetime\n\n# for visualizations\n\nimport folium\nfrom folium import plugins\nfrom folium.plugins import HeatMap\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nplt.rcParams.update({'font.size': 16})","34f95415":"# Importing the dataset. Checking the names of columns.\n\ndf = pd.read_csv('\/kaggle\/input\/crime-in-baltimore\/BPD_Part_1_Victim_Based_Crime_Data.csv')\ndf.info()","450f7c41":"# Renaming long and uninformative \"Description\" to laconical \"Crime\"\n\ndf.rename(columns={'Description':'Crime'}, inplace=True)\ndf['Crime'] = df['Crime'].str.capitalize()","04360f2f":"# How many accidents we have\n\ndf.shape","2031a96d":"# To return median value per day\n\ndf['CrimeDate'].value_counts().median()","403fc935":"# Take a dates with a minimum of crimes\n\ndf['CrimeDate'].value_counts().tail(3)","1ed2db73":"# Take a dates with a maximum of crimes\n\ndf['CrimeDate'].value_counts().head(3)","000487f7":"# Analysing the day of Freddy Gray funeral\n\ndf_fgray = df['CrimeDate'] == '04\/27\/2015'\ndf.loc[df_fgray]['Crime'].value_counts().plot.bar(figsize=(11, 6))","40cf500a":"# Median value again\n\ndf['CrimeDate'].value_counts().median()","0584f853":"# Building a bar plot with full stats of Baltimore crimes\n\ncrime_num = df['Crime'].value_counts().plot.bar(figsize=(11, 6))","9e12f952":"# How many crimes and percentage are in called time period.\n\ncrime_num = df['Crime'].value_counts()\ncrime_pct = df['Crime'].value_counts(1) * 100\npd.DataFrame({'Crimes': crime_num, 'Percent' : crime_pct}).round(2)","220cc278":"# Return pie plot with cuts of crime\n\nplt.rcParams.update({'font.size': 12})\ncrime_num = df['Crime'].value_counts().head(15).plot.pie(radius=4, autopct='%1.1f%%', textprops=dict(color=\"black\"))","7f000d55":"# Taking back the font for the bar plot\n\nplt.rcParams.update({'font.size': 18})\n\n# Date format correction\n\ndf['CrimeDate'] = pd.to_datetime(df['CrimeDate'], format='%m\/%d\/%Y')\n\n# Define day of week and column creation\n\ndf['DayOfWeek'] = df['CrimeDate'].dt.day_name()\n\n# What part of the week is most dangerous?\n\ndf['DayOfWeek'].value_counts().plot.bar(figsize=(11, 6))","12fc5663":"# Creating dataframe with homicides and returning on the bar plot to find out which neighborhoods are most dangerous by statistics of murders\n\nhc = df['Crime'] == 'Homicide'\ndf.loc[hc]['Neighborhood'].value_counts().head(35).plot.bar(figsize=(26, 6))","0bc88fff":"# Creating dataframe with shootings and returning on the bar plot to find out which neighborhoods are most dangerous by statistics of shooting\n\nsh = df['Crime'] == 'Shooting'\ndf.loc[sh]['Neighborhood'].value_counts().head(35).plot.bar(figsize=(26, 6))","08da63de":"# Creating dataframe with aggravated assaults and returning in the bar plot to find out which neighborhoods are most dangerous by statistics of aggravated assaults\n\nass = df['Crime'] == 'Agg. assault'\ndf.loc[ass]['Neighborhood'].value_counts().head(35).plot.bar(figsize=(26, 6))","d35a5477":"hc = df['Crime'] == 'Homicide'\ndf.loc[hc]['CrimeTime'].value_counts()","2c21809c":"hc = df['Crime'] == 'Shooting'\ndf.loc[hc]['CrimeTime'].value_counts().head(8)","d811a23a":"sh = df['Crime'] == 'Homicide'\ndf.loc[sh]['DayOfWeek'].value_counts().head(7)","b911ed73":"sh = df['Crime'] == 'Agg. assault'\ndf.loc[sh]['DayOfWeek'].value_counts().sort_index().plot.bar(figsize=(12, 6))","2ffea374":"# Dropping crimes with NaN numbers of neccessaried data\n\ndf = df[pd.notnull(df['Latitude'])]","16c2ef61":"# Dropping crimes with NaN numbers of neccessaried data\n\ndf = df[pd.notnull(df['Longitude'])]","72231e89":"# Taking a look how many  accidents left. Enough.\n\ndf.shape","b89edd41":"# Limitation of the area which we need\n\nm = folium.Map(location=[39.3121, -76.6198], zoom_start=13)\nm","041c4db8":"# for index, row in df.iterrows():\n#    folium.CircleMarker([row['Latitude'], row['Longitude']],\n#                        radius=15,\n#                        popup=row['Crime'],\n#                        fill_color=\"#3db7e4\", # divvy color\n#                       ).add_to(m)","36ed3961":"# Ensure you're handing it floats\ndf['Latitude'] = df['Latitude'].astype(float)\ndf['Longitude'] = df['Longitude'].astype(float)\n\n# Filter the DF for rows, then columns, then remove NaNs\n# heat_df = df[df['CrimeDate']=='2015-04-27'] # Reducing data size so it runs faster\nheat_df = df[df['Crime']=='Homicide'] # Reducing data size so it runs faster\n# heat_df = df[['Latitude', 'Longitude']]\n# heat_df = heat_df.dropna(axis=0, subset=['Latitude','Longitude'])\n\n# List comprehension to make out list of lists\nheat_data = [[row['Latitude'],row['Longitude']] for index, row in heat_df.iterrows()]\n\n# Plot it on the map\nHeatMap(heat_data).add_to(m)\n\n# Display the map\nm","0bdf925d":"# Ensure you're handing it floats\ndf['Latitude'] = df['Latitude'].astype(float)\ndf['Longitude'] = df['Longitude'].astype(float)\n\n# Filter the DF for rows, then columns, then remove NaNs\n# heat_df = df[df['CrimeDate']=='2015-04-27'] # Reducing data size so it runs faster\nheat_df = df[df['Crime']=='Shooting'] # Reducing data size so it runs faster\n# heat_df = df[['Latitude', 'Longitude']]\n# heat_df = heat_df.dropna(axis=0, subset=['Latitude','Longitude'])\n\n# List comprehension to make out list of lists\nheat_data = [[row['Latitude'],row['Longitude']] for index, row in heat_df.iterrows()]\n\n# Plot it on the map\nHeatMap(heat_data).add_to(m)\n\n# Display the map\nm","b673e093":"# Ensure you're handing it floats\ndf['Latitude'] = df['Latitude'].astype(float)\ndf['Longitude'] = df['Longitude'].astype(float)\n\n# Filter the DF for rows, then columns, then remove NaNs\n# heat_df = df[df['CrimeDate']=='2015-04-27'] # Reducing data size so it runs faster\nheat_df = df[df['Crime']=='Arson'] # Reducing data size so it runs faster\n# heat_df = df[['Latitude', 'Longitude']]\n# heat_df = heat_df.dropna(axis=0, subset=['Latitude','Longitude'])\n\n# List comprehension to make out list of lists\nheat_data = [[row['Latitude'],row['Longitude']] for index, row in heat_df.iterrows()]\n\n# Plot it on the map\nHeatMap(heat_data).add_to(m)\n\n# Display the map\nm","6e304d91":"# df_cr = folium.map.FeatureGroup()\n\n# df_cr = plugins.MarkerCluster().add_to(m)\n\n# loop through the crimes and add each to the incidents feature group\n# for lat, lng, label in zip(df.Latitude, df.Longitude, df.Crime):\n  #  df_cr.add_child(\n   #     folium.CircleMarker(\n    #        [lat, lng],\n     #       radius=5, # define how big you want the circle markers to be\n      #      color='yellow',\n       #     fill=True,\n        #    popup=label,\n         #   fill_color='blue',\n          #  fill_opacity=0.6\n        #)\n    #)\n\n# add incidents to map\n# m.add_child(df_cr)\n# m","e171de62":"df.drop(df[df.CrimeDate > '08-31-2017'].index, inplace=True)","d3ef4783":"df.groupby(\n  pd.Grouper(\n    key='CrimeDate',\n    freq='M'\n  )\n).size().plot.line(figsize=(24, 8), linewidth=3.5)","77810e8c":"df.groupby(\n  pd.Grouper(\n    key='CrimeDate',\n    freq='M'\n  )\n).size().plot.bar(figsize=(25, 5))","9ffb399f":"Discovering what day of max number of crimes.","37564562":"# 3. What day was most filled with the crimes? Why?","88d4cf45":"The best way to survive in Baltimore is to keep away from Sandtown-Winchester, Coldstream Homestead Montebello and Brooklin from 9 PM to 2 AM at Sunday, Monday and Tuesday.","0fc28f38":"![Baltimore](https:\/\/storage.needpix.com\/rsynced_images\/urban-534019_1280.jpg)\n# Baltimore crime analysis.\n\nInspired by \"The Wire\" TV Show, it would be interesting to see real crime image of Baltimore, especially violent crimes.\nSo, we have data about crimes from 01\/01\/2012 to 09\/02\/2017. Yes, this is another time period than \"The Wire\" action, but we'll have imagination about the level of crime probably in most dangerous city of the United States.\nLet's take a look at data and discover answers to questions.\n\nThanks [Sohier Dane](https:\/\/www.kaggle.com\/sohier) for the [data](https:\/\/www.kaggle.com\/sohier\/crime-in-baltimore).","53aa8eeb":"Please add your plots - it's a hundreds of ways how to present this data.","e183a873":"# Links\n[1] https:\/\/www.weather.gov\/lwx\/winter_storm-pr\n\n[2] https:\/\/en.wikipedia.org\/wiki\/2015_Baltimore_protests\n","e10532ca":"# Heatmap with crimes","f64fdb83":"February is the month when bad guys would like to stay home.","8bd67259":"Arson","5f545d88":"* Apr. 27, 2015 - the number of crimes is 61.3% higher than the 2nd top crime day and 1169.7% hihger than most quiet day.\n\nWhat are the reasons? In reallity it's easy to find the answers. Freddy Gray funeral and the following riot took place this day. [2]\n\nWhat crimes happened at the day of Freddy Gray funeral?","4d0e8751":"To understend better where better to avoid - heatmaps:","e6d6dc0e":"homicide","fa2f7b62":"# 6. How to survive in Baltimore?","f66bae30":"* Jan. 23, 2016 - the number of crimes is 39.4% lower than the 2nd least crime day.\n\nWhy?\nTHis date is the second day of the biggest showstorm in the history of Baltimore. [1]","ae1b966f":"# 1. Median number of crimes in Baltimore","6ae907c3":"# 5. What day of the week are most of crimes?","2d83c2a1":"Discovering what day of min number of crimes.","138110c3":"Too much in compartion with median value.","60caf404":"# Questions\n\n1. Median number of crimes in Baltimore\n2. What day was most filled with crimes? Why?\n3. What day was with minimum number of crimes? Why?\n4. What crimes are most often in Baltimore?\n5. What day of the week are most of crimes?\n6. How to survive in Baltimore? Buiding the heatmap.","32522434":"# 2. What day was minimum number of crimes? Why?","be05f330":"Interesting there are almost equal heat zones.","17048571":"To find the answer for this better to calculate factors which making insafety","21ea5297":"shooting","f924e490":"# 4. What crimes are most often in Baltimore?"}}