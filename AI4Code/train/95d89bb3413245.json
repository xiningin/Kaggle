{"cell_type":{"08f0d365":"code","fa55388e":"code","d88796cd":"code","06374078":"code","dc3574e9":"code","ca2fed85":"code","c974b899":"code","076d8254":"code","21fd50e8":"code","be42ddfc":"code","a2979828":"code","fd67b54d":"code","a962653d":"code","0255a10e":"code","f2a9b19a":"code","a8bfcffe":"code","ab6da284":"code","37db3f5b":"code","68896b28":"code","5bbc9d1a":"code","b64d8771":"code","b3f4a491":"code","9442c719":"code","6e9a2d27":"code","56d18035":"code","85132988":"code","927a2e96":"code","6614ad14":"code","cbd535a2":"code","e169b313":"code","255974b8":"code","648cf300":"code","701c52ba":"code","73e63822":"code","a13a891c":"code","e82e48da":"code","5e7ae500":"code","ff6e729a":"code","70d3c127":"code","4dd1dcf8":"code","3168e282":"code","0fc8e3de":"code","915293e1":"code","ec0d1316":"code","f35b82f9":"code","3088def1":"code","929a5f04":"code","a876dd65":"code","b6380a9a":"code","7d10d05b":"code","848a1e55":"code","9f7914b0":"code","63c43064":"code","22dc61bf":"code","f062cdb4":"code","404ffdb3":"code","15dd4726":"code","5ebaa9dc":"code","8266fdc5":"code","f59f1ec9":"code","728ad389":"code","5d4e3415":"code","712a99fb":"code","ba327ea7":"code","9d8e1d98":"code","8c3398ae":"code","0c35e0ab":"code","22651407":"code","059d269e":"code","7e33d20a":"code","53fa7d97":"code","9b187931":"code","f6bb05e4":"markdown","4d5c0683":"markdown","e72e764e":"markdown","9f3f1d8e":"markdown","b3c8bc36":"markdown","742c277a":"markdown","fdaf1cdd":"markdown","0fc54771":"markdown","db91e7ee":"markdown","c1fcdd73":"markdown","c66aa8a8":"markdown","8c883704":"markdown","9a21bfb5":"markdown","fbecdd2d":"markdown","5e6b674c":"markdown","dafdd8e2":"markdown","4ffb45d6":"markdown","2c901980":"markdown","9f887502":"markdown","53174b3d":"markdown","8327da3a":"markdown","909c7fed":"markdown","a2a708a9":"markdown","cbf67d1d":"markdown","0820e430":"markdown","584d5b0d":"markdown","b577bf6c":"markdown","79f708ff":"markdown","d5b90b76":"markdown","6efaab6e":"markdown"},"source":{"08f0d365":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","fa55388e":"transcript = pd.read_csv('\/kaggle\/input\/starbucks-customer-data\/transcript.csv')\nprofile = pd.read_csv('\/kaggle\/input\/starbucks-customer-data\/profile.csv')\npf = pd.read_csv('\/kaggle\/input\/starbucks-customer-data\/portfolio.csv')","d88796cd":"print(f'Transcript data has {transcript.shape[0]} rows and  {transcript.shape[1]} columns')\nprint(f'Profile data has {profile.shape[0]} rows and  {profile.shape[1]} columns')\nprint(f'Portfolio data has {pf.shape[0]} rows and  {pf.shape[1]} columns')","06374078":"transcript.head()","dc3574e9":"transcript.info()","ca2fed85":"profile.head()","c974b899":"profile.info()","076d8254":"pf.head()","21fd50e8":"pf.info()","be42ddfc":"transcript.columns","a2979828":"profile.columns","fd67b54d":"pf.columns","a962653d":"transcript.drop('Unnamed: 0', axis=1, inplace=True)\n\npf.drop('Unnamed: 0', axis=1, inplace=True)","0255a10e":"pf.head()","f2a9b19a":"profile = pd.read_csv('\/kaggle\/input\/starbucks-customer-data\/profile.csv')","a8bfcffe":"profile.head()","ab6da284":"profile.info()","37db3f5b":"import matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly as py\nimport plotly.express as px\nimport plotly.graph_objs as go\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import init_notebook_mode, iplot, plot\n\nimport warnings \nwarnings.filterwarnings('ignore')\n%matplotlib inline","68896b28":"sns.boxplot(data=profile, x='age')","5bbc9d1a":" profile[(profile['age'] < 119) & (profile['age'] > 100)]","b64d8771":"profile.drop(profile.index[(profile['age'] < 119) & (profile['age'] > 100)], inplace = True)","b3f4a491":"profile.shape","9442c719":"(profile.isnull().sum())","6e9a2d27":"#remove columns\nprofile.drop('Unnamed: 0', axis=1, inplace=True)","56d18035":"sns.countplot(data=profile,x='gender')","85132988":"sns.boxplot(data=profile, x='income')","927a2e96":"#correct time format\nprofile['became_member_on'] = pd.to_datetime(profile['became_member_on'].astype(str), format='%Y%m%d')\nprofile['became_member_on'].dtype","6614ad14":"profile['became_member_on'].head()","cbd535a2":"profile['year'] = profile['became_member_on'].dt.year\nprofile['month'] = profile['became_member_on'].dt.month\nprofile['day']=profile['became_member_on'].dt.day_name()\nprofile['member_since_how_manydays'] = (pd.to_datetime('today') - profile['became_member_on']).astype('timedelta64[D]').astype(int)","e169b313":"profile.rename(columns={'id': 'customer_id'}, inplace=True)","255974b8":"profile.shape","648cf300":"profile.head().reset_index()","701c52ba":"profile.age.min()","73e63822":"profile['age_group'] = pd.cut(x=profile['age'], bins=[18, 20, 40, 60, 80, 101],\n                    labels=['Teenage(0-19)', 'young(20-39)', 'Middle-age(40-59)',\n                            'Old(60-79)', 'Very-Old(80-100)'], include_lowest=True)\nprofile['age_group']","a13a891c":"val = profile['gender'].value_counts().index\ncnt = profile['gender'].value_counts().values\n\nfig = go.Figure([go.Bar(x=val, y=cnt, marker_color='lightcoral')])\nfig.update_layout(title_text='Distribution of Gender', title_x=0.7)\nfig.show()","e82e48da":"fig = plt.figure(figsize = (12,7))\nsns.countplot(x='age_group',data=profile)\nplt.xticks(rotation=30)\nplt.title('Age-Group of staff at Starbucks')","5e7ae500":"val = profile['income'].value_counts().index\ncnt = profile['income'].value_counts().values\n\nfig = go.Figure([go.Bar(x=val, y=cnt, marker_color='darkturquoise')])\nfig.update_layout(title_text='Distribution of Income', title_x=0.7)\nfig.show()","ff6e729a":"sns.set(style=\"darkgrid\")\nsns.kdeplot(data=profile['income'], shade=True)\nplt.title('Density distribution of Income')","70d3c127":"sns.kdeplot(\n    data=profile, x=\"age\", y=\"income\", hue=\"gender\", fill=True,\n)","4dd1dcf8":"plt.figure(figsize=(12,10))\nsns.set(style=\"darkgrid\")\nax = sns.countplot(y=\"year\", data=profile, palette=\"Set2\", order=profile['year'].value_counts().index[0:15])\nplt.title('Members joined frequency in years')","3168e282":"plt.figure(figsize=(12,10))\nsns.set(style=\"darkgrid\")\nax = sns.countplot(x=\"month\", data=profile, palette=\"Set2\", order=profile['month'].value_counts().index[0:15])\nplt.title('Members joined frequency by months')","0fc8e3de":"plt.figure(figsize=(12,10))\nsns.set(style=\"darkgrid\")\nax = sns.countplot(x=\"day\", data=profile, palette=\"pastel\", order=profile['day'].value_counts().index[0:15])\nplt.title('Members joined frequency by week-of-day')","915293e1":"profile['gender'].value_counts(normalize=True)","ec0d1316":"profile['age_group'].value_counts(normalize=True)","f35b82f9":"pf.head()","3088def1":"channels_df = pf.groupby(['id','channels']).mean().reset_index()\nchannels_df","929a5f04":"plt.figure(figsize=(15,10))\nsns.set(style=\"darkgrid\")\nax = sns.countplot(x=\"duration\", data=channels_df, palette=\"Set2\", hue='channels')\nplt.ylabel('Number of Offers')\nplt.xlabel('Duration of Offers in days')\nplt.title('offers based on duration and channels through which they are offered')\nplt.show()","a876dd65":"plt.figure(figsize=(15,10))\nsns.set(style=\"darkgrid\")\nax = sns.countplot(x=\"difficulty\", data=channels_df, palette=\"Set3\", hue='channels')\nplt.ylabel('Number of Offers')\nplt.xlabel('Difficulty of Offers in days')\nplt.title('Offers based on difficulty and channels through which they are offered')","b6380a9a":"pie_df = pf.offer_type.value_counts().reset_index().offer_type","7d10d05b":"plt.figure(figsize=(8,8))\nlabels = 'DISCOUNT','BOGO','INFORMATIONAL'\ncolors = ['lightblue','lightsteelblue','silver']\nexplode = (0, 0.1, 0)\nplt.pie(pie_df, labels=labels, autopct='%1.1f%%', startangle=15, shadow = True, colors=colors, explode=explode)\nplt.title('Types of Offers')\nplt.axis('equal')\nplt.show()","848a1e55":"\nsns.histplot(pf, x=\"reward\")\nplt.title('Distribution of Rewards for Offers')\nplt.show()","9f7914b0":"sns.boxplot(data=pf,x='difficulty')","63c43064":"sns.displot(pf, x=\"difficulty\", kind=\"kde\")\nplt.title('Density plot of difficulty')\nplt.show()","22dc61bf":"\nsns.set_theme(style=\"darkgrid\")\nsns.displot(pf, x=\"duration\", kind=\"kde\")\nplt.title('plot of duration of the offers')\nplt.show()","f062cdb4":"pf.head()","404ffdb3":"pf = pd.concat([pf,pd.get_dummies(pf[\"offer_type\"],prefix='offer',drop_first=True)],axis=1)\npf.drop(['offer_type'],axis=1, inplace=True) # drop the column which was one-hot encoded\npf","15dd4726":"df = transcript.copy()\ntranscript.head()","5ebaa9dc":"df.isnull().sum()","8266fdc5":"df.head()","f59f1ec9":"offer_status = df.event.value_counts().reset_index()","728ad389":"offer_status.columns=['Event', 'Number of offers in that event']\noffer_status","5d4e3415":"df.event.value_counts(normalize=True)","712a99fb":"val = offer_status['Event']\ncnt = offer_status['Number of offers in that event']\n\nfig = go.Figure([go.Bar(x=val, y=cnt, marker_color='darkturquoise')])\nfig.update_layout(title_text='Number of offers versus their status', title_x=0.4)\nfig.show()","ba327ea7":"df.time.unique()","9d8e1d98":"df['time_group'] = pd.cut(x=df['time'], bins=[0, 100, 200, 300, 400, 500,600,700,800], include_lowest=True,\n                    labels=['0-100 days', '100-200 days', '200-300 days', '300-400 days', '400-500 days', '500-600 days', '600-700 days', '700-800 days'])","8c3398ae":"fig = plt.figure(figsize = (12,7))\nsns.countplot(x='time_group',data=df)\nplt.xticks(rotation=30)\nplt.title('No. of offers in the Timespan')","0c35e0ab":"df.person.value_counts() ","22651407":"offers_received_df = df[df.event == 'offer received']\noffers_received_df","059d269e":"offers_viewed_df = df[df.event == 'offer viewed']\noffers_viewed_df","7e33d20a":"offers_completed_df = df[df.event == 'offer viewed']\noffers_completed_df","53fa7d97":"offer_completed_people = offers_received_df.isin(list(offers_completed_df['person']))\noffers_received_df[offer_completed_people['person']]","9b187931":"df = pd.concat([df,pd.get_dummies(df[\"event\"],prefix='event',drop_first=True)],axis=1)\ndf.drop(['event'],axis=1, inplace=True) # drop the column which was one-hot encoded\ndf","f6bb05e4":"# Profile data","4d5c0683":"# **There are 2180 columns with age 118 and another thing we can notice is gender value is NaN and also income is NaN for these observations. Let us drop these rows, as more columns have null values for these observations**","e72e764e":"# One hot encoding on portfolio data","9f3f1d8e":"# Binning","b3c8bc36":"# for profile data\n1. People joined as member increased from 2015 and highest in 2017\n2. Highest number of people joined in August month\n3. Ofcourse Sunday and Saturday are the leading days in a week people joined.\n4. Income distribution is not skewed much, and is in the range of 50k-73k\n5. 57% of the staff are Male, 41.3% Female and 1.4% Others\n6. Highest proportion of staff at around 40%  are in the age-group 40-59.","742c277a":"1. People joined as member increased from 2015 and highest in 2017\n2. Highest number of people joined in August month\n3. Ofcourse Sunday and Saturday are the leading days in a week people joined.\n4. Income distribution is not skewed much, and is in the range of 50k-73k\n5. 57% of the staff are Male, 41.3% Female and 1.4% Others\n6. Highest proportion of staff at around 40%  are in the age-group 40-59.\n7. 45% of the offers are still in transaction while only 11% offers are completed. ","fdaf1cdd":"# Transcript data sample","0fc54771":"# Takeawy- 45% of the offers are still in transaction while only 11% offers are completed","db91e7ee":"# No missing values in Transcript data","c1fcdd73":"# Conclusion\n","c66aa8a8":"# Number of offers based on difficulty and channels through which they are offered","8c883704":"# Binning time intervals","9a21bfb5":"# Out of 76277 people who received offer, 75750 completed i.e 99% people completed","fbecdd2d":"# Types of Discounts on Offers","5e6b674c":"# Transcript Data","dafdd8e2":"# Create new features","4ffb45d6":"# Bivariate analysis on Portfolio data","2c901980":"# Starbucks Data \n    1. Profile CSV contains 17000 records and 6 columns where each record has data about each person, their age, salary, id, when they became member on(Date)and gender and unnnamed column.\n\n    2. Portfolio Data has are 10 rows and 7 columns which contains  promotional offers that are possible to receive, and basic information about each one including the promotional type, duration of the promotion, reward, and how the promotion was distributed to customers.\n    \n    3. Transcript Data has  are 306534 rows and  5 columns which contains the different steps of promotional offers that a customer received, channels through which offers are possible, minimum required to spend to complete an offer.\n    4. For each of the csv file, these steps are followed\n        *  Reading the csv files, removing unnecessary columns, Data wrangling and Binning\n        * Feature Engineering\n        * Univariate Analysis\n        * Bivariate Analysis\n    5.ML Models(work in progress)\n    6.Conclusion","9f887502":"# Distribution plot of income","53174b3d":"# Starbucks \n* Starbucks Corporation is an American multinational chain of coffeehouses and roastery reserves headquartered in Seattle, Washington. As the world's largest coffeehouse chain, Starbucks is seen to be the main representation of the United States' second wave of coffee culture.*\nSource: Wikipedia","8327da3a":"![](http:\/\/24.media.tumblr.com\/0b9f1228307c9b306a18b66f8a912150\/tumblr_mhdi8uTpYY1rjv15co1_500.gif)","909c7fed":"# Univariate Analysis - Distribution plot of gender","a2a708a9":"# Drop the unnamed column from all dataframes","cbf67d1d":"1. One offer is most diffuclt with level of 20 and it is offered only through web and email","0820e430":"# One hot encoding","584d5b0d":"# All persons who have received offer may not accept","b577bf6c":"# Work in Progress, your feedback is appreciated to improve this notebook..","79f708ff":"# There are missing values in gender and income columns","d5b90b76":"# Data Wrangling, Binning and Feature Engineering on the profile data","6efaab6e":"# Univariate analysis on Portfolio data"}}