{"cell_type":{"c8dbdbf5":"code","0f45225c":"code","08e4ab94":"code","54c92532":"code","104d18b6":"code","f8873b5c":"code","0db92fee":"code","63f9a294":"markdown","9136e579":"markdown","062916db":"markdown","ba9ed790":"markdown","2b6fc928":"markdown","1dbe4118":"markdown","47b5dc28":"markdown","f5f58608":"markdown","71c8c4e8":"markdown"},"source":{"c8dbdbf5":"import pandas as pd\nimport numpy as np\nfrom mlxtend.preprocessing import TransactionEncoder\nfrom mlxtend.frequent_patterns import apriori, association_rules","0f45225c":"df = pd.read_table('..\/input\/grocery-store-data\/Grocery Store.csv')\ndf.head()","08e4ab94":"lista = []\ndf.columns = ['column']\nfor i in df['column']:\n    lista.append(i.split(sep=','))","54c92532":"te = TransactionEncoder()\nte_array = te.fit(lista).transform(lista)\ndata = pd.DataFrame(te_array, columns = te.columns_)\ndata.head()","104d18b6":"frequent_itemset = apriori(data,min_support= 0.01, use_colnames= True)\nfrequent_itemset","f8873b5c":"rules = association_rules(frequent_itemset,metric = 'confidence', min_threshold= 0.5)\nrules","0db92fee":"rules_ranked = rules.sort_values('lift',ascending=False)\nsorted_rules = rules_ranked.head(5)\nsorted_rules","63f9a294":"# Looking for association rules\nlet's find the 5 strongest association rules on the list and this will be our filter:\n1. keep the confidence level as 50%\n2. rank by lift metric\n3. if the lift is tied with another (0.05 next to another is consider a tie), use the higher conviction value to break the tie\n","9136e579":"# Loading Data","062916db":"# importing libraries","ba9ed790":"# Processing the data...","2b6fc928":"# Creating Encoder for Transactions","1dbe4118":"# Calculating Support of itemset\nThere's a lot of items on itemset (170) what means that our minimum support can't be a high value, cause it spreads through the high volume of transactions, that which led me to use 1% as a value of this support, which despite being low, can bring us good results.","47b5dc28":"4 of 5 strongest association rules has root vegetables as antecedents and other vegetables as consequents, but it doesn't tell us a lot about these other vegetables, so what actually we have as information is that citrus fruit, tropical fruit and root vegetable are very important for sales as a booster for other vegetables and a good suggestion is to promote offer for these 3 items that bring new sales of other vegetables.","f5f58608":"# Rules analysis","71c8c4e8":"# The Business Problem:\nAt first, there's a dataset from a real grocery store and the goal is to find association rules between the data, that are organized as transactions that came from a market basket. let's go! :)"}}