{"cell_type":{"e368f8a1":"code","db0f5766":"code","54545f50":"code","0f270a24":"code","31e36f1a":"code","3d98b33d":"code","378038ab":"code","f1f84030":"code","bda646b8":"code","cae3a3a1":"code","928cc561":"code","bf5ccc09":"code","84e53a99":"code","35555c7b":"code","bdea9cd2":"code","2ab70836":"code","627f2bd8":"code","d7baacaf":"code","132799e9":"code","f0954425":"code","e66f21e3":"code","4728ff42":"code","46e6e877":"code","12347cc8":"code","90d4ed3d":"code","e9b93250":"code","042ef125":"code","46edf5bb":"code","bdf20ebf":"code","139307e4":"code","f8896efb":"markdown","20022447":"markdown","12022989":"markdown","ae9c644e":"markdown","328feb06":"markdown","8790e41a":"markdown","e05c1973":"markdown","1b5af0c5":"markdown","cb9f9b1a":"markdown","056897b7":"markdown","7e6a8ba4":"markdown","ff04987a":"markdown","d0fe504b":"markdown","9ddc11c6":"markdown","36bede1f":"markdown","b3773756":"markdown","d803f746":"markdown","6a6eda2c":"markdown","e4dde688":"markdown","83986bcf":"markdown"},"source":{"e368f8a1":"# !pip install arxivscraper\n\n# import arxivscraper\n# import pandas as pd\n\n# scraper_cond = arxivscraper.Scraper(category='physics:cond-mat', date_from='2012-01-01', date_until='2020-07-01',timeout=10000)\n# output_cond = scraper_cond.scrape()\n# dfcond = pd.DataFrame(output_cond,columns=cols)\n\n# scraper_astro = arxivscraper.Scraper(category='physics:astro-ph', date_from='2012-01-01', date_until='2020-07-01',timeout=10000)\n# output_astro = scraper_astro.scrape()\n# dfastro = pd.DataFrame(output_astro,columns=cols)\n\n# cols = ('categories', 'created', 'authors')\n\n# dfcond = pd.DataFrame(output_cond,columns=cols)\n# dfcond.to_csv('Data\/arxiv_cond_2012_2020.csv',index=False)\n# dfastro = pd.DataFrame(output_astro,columns=cols)\n# dfastro.to_csv('Data\/arxiv_astro_2012_2020.csv',index=False)","db0f5766":"!pip install gender_guesser","54545f50":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport datetime\nimport gender_guesser.detector as gender\n\n%matplotlib inline","0f270a24":"dfcond = pd.read_csv('..\/input\/arxiv-scrape\/arxiv_cond_2012_2020.csv',converters={'authors': eval})\ndfastro = pd.read_csv('..\/input\/arxiv-scrape\/arxiv_astro_2012_2020.csv',converters={'authors': eval})","31e36f1a":"dfcond['first_author']=dfcond['authors'].apply(lambda x:x[0].split(' ')[0])\ndfastro['first_author']=dfastro['authors'].apply(lambda x:x[0].split(' ')[0])","3d98b33d":"# First we split the author list and returning the first name of the first and last authors in a new columns\n# We then drop the authors column for clarity\ndfcond['first_author']=dfcond['authors'].apply(lambda x:x[0].split(' ')[0]) \ndfcond['last_author']=dfcond['authors'].apply(lambda x:x[-1].split(' ')[0])\ndfcond.drop('authors',inplace=True,axis=1)\n\n#Drop all the rows for which the author's name is shorter than 3 characters \n#This is done to include punctuation in the initials since the split of the author list is done using a single space\n#This passage can be improves as it removes from the dataset also authors with a two-letter first name\ndfcond.drop(dfcond[dfcond['first_author'].map(len)<3].index, inplace=True)\n\n#We transform the created columns into a datetime column \n#We also drop all the entries that were created before 2012 but entered the data set because modified after 2012\ndfcond['created'] = pd.to_datetime(dfcond['created'],format='%Y-%m-%d')\ndfcond.drop(dfcond[dfcond['created'].dt.year<2012].index,inplace=True)\n\n#Finally we reset the dataframe index\ndfcond.reset_index(drop=True, inplace=True)","378038ab":"# We capitalize the names as this is required for the gender guesser method to work correctly\ndfcond['first_author'] = dfcond['first_author'].apply(lambda x:x.capitalize())\ndfcond['last_author'] = dfcond['last_author'].apply(lambda x:x.capitalize())\n\n# We instantiate a gender detector object and run it on the first and last author columns separately\ndetect = gender.Detector()\ndfcond['gender_first']=dfcond['first_author'].map(detect.get_gender)\ndfcond['gender_last']=dfcond['last_author'].map(detect.get_gender)\n\n# We then split the dataframe in two to better handle separately the two data sets\n# This is useful to more easily handle cases where the gender of the first author is clearly identifyed \n# but not that of the last author, or viceversa. This approach can likely be improved\n# We also rename the columns for simplicity \n\ndfcondfirst = dfcond.loc[:,['created','first_author','gender_first']]\ndfcondfirst.rename(columns={'created':'date','first_author':'author','gender_first':'gender'},inplace=True)\ndfcondlast = dfcond.loc[:,['created','last_author','gender_last']]\ndfcondlast.rename(columns={'created':'date','last_author':'author','gender_last':'gender'},inplace=True)\n\n# Finally we map the results of the gender guesser so that 'mostly male' and 'mostly female' \n# are transformed to 'male' and 'female' respectively. The gender guesser also return 'andy' when the name\n# has equal likelihood of being male or female and 'uknown' when no record of the name is found\n# We drop all the rows associated to names with these last two tags\n\ndfcondfirst['gender'] = dfcondfirst['gender'].map({'male':'male','mostly_male':'male','mostly_female':'female',\n                                                       'female':'female'})\ndfcondfirst.dropna(inplace=True)\n\ndfcondlast['gender'] = dfcondlast['gender'].map({'male':'male','mostly_male':'male','mostly_female':'female',\n                                                       'female':'female'})\ndfcondlast.dropna(inplace=True)","f1f84030":"dfcondlast.info()","bda646b8":"plt.figure(figsize = (10,6))\n\nsns.countplot(x=dfcondfirst[dfcondfirst['date'].dt.year<2020]['date'].dt.year,\n              data = dfcondfirst[dfcondfirst['date'].dt.year<2020],hue='gender');\n\nplt.xlabel('Year', fontsize=15);\nplt.ylabel('Publication Count', fontsize=15);\nplt.xticks(size=13);\nplt.yticks(size=13);\nplt.legend(fontsize=15);","cae3a3a1":"plt.figure(figsize = (10,6))\n\nsns.countplot(x=dfcondlast[dfcondlast['date'].dt.year<2020]['date'].dt.year,\n              data = dfcondlast[dfcondlast['date'].dt.year<2020],hue='gender');\n\nplt.xlabel('Year', fontsize=15);\nplt.ylabel('Publication Count', fontsize=15);\nplt.xticks(size=13);\nplt.yticks(size=13);\nplt.legend(fontsize=15);","928cc561":"fig, axes = plt.subplots(2,3, figsize=(20,12))\nd = {1:'January',2:'February',3:'March',4:'April',5:'May',6:'June'}\n\nfor key,month in d.items():\n\n        sns.countplot(dfcondfirst[dfcondfirst['date'].dt.month==key]['date'].dt.year,\n              data = dfcondfirst[dfcondfirst['date'].dt.month==key], hue='gender',ax=axes[int(np.floor((key-1)\/3)),\n                                                                                          int((key-1)-np.floor((key-1)\/3)*3)])\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_title('arXiv publication for the month of %s' % month, size = 15);\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_xlabel('Year', size = 13);\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_ylabel('Publications',size=13);","bf5ccc09":"# We create a small function to create a dataframe for the evolution of the gender publication ratio  \n# we sample the data by month\n\ndef GenderRatio(df):\n    \n    ratio = []\n    years = df['date'].dt.year.unique()\n    months = df['date'].dt.month.unique()\n\n    for year in years:\n\n        try:\n            for month in months:\n\n                [a,b] = df[(df['date'].dt.year==year)\n                             & (df['date'].dt.month==month)]['gender'].value_counts()\n                ratio.append(b\/(a+b))\n        except:\n            break\n        \n    time = pd.date_range(start=str(months[0])+'\/'+str(years[0]),end=str(month)+'\/'+str(year),freq='m');\n\n    return pd.DataFrame(ratio,time,columns=['Percentage Female Author'])","84e53a99":"# Use function to create the dataframe\n\nGndRtCondFirst = GenderRatio(dfcondfirst)","35555c7b":"# Visualization of the female\/male first author ratio between 2012 and 2020 \n\nfig = plt.figure(figsize = (10,8))\n\nsns.set_style('darkgrid')\nsns.lineplot(data=GndRtCondFirst,lw=2,legend=False)\n\nplt.title('Gender ratio in first authorship',size=25)\nplt.xlabel('Time',size=18);\nplt.ylabel('Percentage of female first authors',size=18);\nplt.xticks(fontsize=15);\nplt.yticks(fontsize=15);","bdea9cd2":"# We look at some descriptive statistics to better understand the variability of the data\n\nSTD = GndRtCondFirst.groupby(GndRtCondFirst.index.year).std()\nAVE = GndRtCondFirst.groupby(GndRtCondFirst.index.year).mean()\nAVE.rename(columns={'Percentage Female Author':'Mean'},inplace=True)\nSTD.rename(columns={'Percentage Female Author':'Standard Deviation'},inplace=True)\n\nSTAT = pd.concat((AVE,STD),axis=1)\nSTAT","2ab70836":"# We use the function previously created to repeat the analysis for the last author\n\nGndRtCondLast = GenderRatio(dfcondlast)","627f2bd8":"fig = plt.figure(figsize = (10,8))\n\nsns.set_style('darkgrid')\nchart = sns.lineplot(data=GndRtCondLast,lw=2,legend=False)\n\nplt.title('Gender ratio in last authorship',size=25)\nplt.xlabel('Time',size=18);\nplt.ylabel('Percentage of female last authors',size=18);\nplt.xticks(fontsize=15);\nplt.yticks(fontsize=15);","d7baacaf":"# We look at some descriptive statistics to better understand the variability of the data\n\nSTD = GndRtCondLast.groupby(GndRtCondLast.index.year).std()\nAVE = GndRtCondLast.groupby(GndRtCondLast.index.year).mean()\nAVE.rename(columns={'Percentage Female Author':'Mean'},inplace=True)\nSTD.rename(columns={'Percentage Female Author':'Standard Deviation'},inplace=True)\n\nSTAT = pd.concat((AVE,STD),axis=1)\nSTAT","132799e9":"dfastro['first_author']=dfastro['authors'].apply(lambda x:x[0].split(' ')[0]) \ndfastro['last_author']=dfastro['authors'].apply(lambda x:x[-1].split(' ')[0])\ndfastro.drop('authors',inplace=True,axis=1)\n\ndfastro.drop(dfastro[dfastro['first_author'].map(len)<3].index, inplace=True)\n\ndfastro['created'] = pd.to_datetime(dfastro['created'],format='%Y-%m-%d')\ndfastro.drop(dfastro[dfastro['created'].dt.year<2012].index,inplace=True)\n\ndfastro.reset_index(drop=True, inplace=True)","f0954425":"dfastro['first_author'] = dfastro['first_author'].apply(lambda x:x.capitalize())\ndfastro['last_author'] = dfastro['last_author'].apply(lambda x:x.capitalize())\n\ndetect = gender.Detector()\ndfastro['gender_first']=dfastro['first_author'].map(detect.get_gender)\ndfastro['gender_last']=dfastro['last_author'].map(detect.get_gender)\n\ndfastrofirst = dfastro.loc[:,['created','first_author','gender_first']]\ndfastrofirst.rename(columns={'created':'date','first_author':'author','gender_first':'gender'},inplace=True)\ndfastrolast = dfastro.loc[:,['created','last_author','gender_last']]\ndfastrolast.rename(columns={'created':'date','last_author':'author','gender_last':'gender'},inplace=True)\n\ndfastrofirst['gender'] = dfastrofirst['gender'].map({'male':'male','mostly_male':'male','mostly_female':'female',\n                                                       'female':'female'})\ndfastrofirst.dropna(inplace=True)\n\ndfastrolast['gender'] = dfastrolast['gender'].map({'male':'male','mostly_male':'male','mostly_female':'female',\n                                                       'female':'female'})\ndfastrolast.dropna(inplace=True)","e66f21e3":"dfastrolast.info()","4728ff42":"fig = plt.figure(figsize = (10,6))\n\nsns.countplot(x=dfastrofirst[dfastrofirst['date'].dt.year<2020]['date'].dt.year,\n              data = dfastrofirst[dfastrofirst['date'].dt.year<2020],hue='gender');\n\nplt.xlabel('Year', fontsize=15);\nplt.ylabel('Publication Count', fontsize=15);\nplt.xticks(size=13);\nplt.yticks(size=13);\nplt.legend(fontsize=15);","46e6e877":"fig = plt.figure(figsize = (10,6))\n\nsns.countplot(x=dfastrolast[dfastrolast['date'].dt.year<2020]['date'].dt.year,\n              data = dfastrolast[dfastrolast['date'].dt.year<2020],hue='gender');\n\nplt.xlabel('Year', fontsize=15);\nplt.ylabel('Publication Count', fontsize=15);\nplt.xticks(size=13);\nplt.yticks(size=13);\nplt.legend(fontsize=15);","12347cc8":"fig, axes = plt.subplots(2,3, figsize=(20,12),sharey=True)\nd = {1:'January',2:'February',3:'March',4:'April',5:'May',6:'June'}\n\nfor key,month in d.items():\n\n        sns.countplot(dfastrofirst[dfastrofirst['date'].dt.month==key]['date'].dt.year,\n              data = dfastrofirst[dfastrofirst['date'].dt.month==key], \n                      hue='gender',hue_order = ['male','female'], ax=axes[int(np.floor((key-1)\/3)),\n                                                                            int((key-1)-np.floor((key-1)\/3)*3)])\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_title('arXiv publication for the month of %s' % month, size = 15);\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_xlabel('Year', size = 13);\n        axes[int(np.floor((key-1)\/3)),\n             int((key-1)-np.floor((key-1)\/3)*3)].set_ylabel('Publications',size=13);","90d4ed3d":"# Use function to create the dataframe\n\nGndRtAstroFirst = GenderRatio(dfastrofirst)","e9b93250":"# Visualization of the female\/male first author ratio between 2012 and 2020 \n\nfig = plt.figure(figsize = (10,8))\n\nsns.set_style('darkgrid')\nsns.lineplot(data=GndRtAstroFirst,lw=2,legend=False)\n\nplt.title('Gender ratio in first authorship',size=25)\nplt.xlabel('Time',size=18);\nplt.ylabel('Percentage of female first authors',size=18);\nplt.xticks(fontsize=15);\nplt.yticks(fontsize=15);","042ef125":"# We look at some descriptive statistics to better understand the variability of the data\n\nSTD = GndRtAstroFirst.groupby(GndRtAstroFirst.index.year).std()\nAVE = GndRtAstroFirst.groupby(GndRtAstroFirst.index.year).mean()\nAVE.rename(columns={'Percentage Female Author':'Mean'},inplace=True)\nSTD.rename(columns={'Percentage Female Author':'Standard Deviation'},inplace=True)\n\nSTAT = pd.concat((AVE,STD),axis=1)\nSTAT","46edf5bb":"# Last author\n\nGndRtAstroLast = GenderRatio(dfastrolast)","bdf20ebf":"# Visualization of the female\/male Last author ratio between 2012 and 2020 \n\nfig = plt.figure(figsize = (10,8))\n\nsns.set_style('darkgrid')\nsns.lineplot(data=GndRtAstroLast,lw=2,legend=False)\n\nplt.title('Gender ratio in last authorship',size=25)\nplt.xlabel('Time',size=18);\nplt.ylabel('Percentage of female last authors',size=18);\nplt.xticks(fontsize=15);\nplt.yticks(fontsize=15);","139307e4":"# We look at some descriptive statistics to better understand the variability of the data\n\nSTD = GndRtAstroLast.groupby(GndRtAstroLast.index.year).std()\nAVE = GndRtAstroLast.groupby(GndRtAstroLast.index.year).mean()\nAVE.rename(columns={'Percentage Female Author':'Mean'},inplace=True)\nSTD.rename(columns={'Percentage Female Author':'Standard Deviation'},inplace=True)\n\nSTAT = pd.concat((AVE,STD),axis=1)\nSTAT","f8896efb":"We will start by taking a look at the data from the condensed matter category and then we will repeat the analysis for the astrophysics one as a measure of consistency","20022447":"We check what we are left with","12022989":"We now repeat the analysis for the publication data in the astrophysics category\n\n# Analysis of astro data\n\n### Data preparation","ae9c644e":"### Breakdown by month","328feb06":"Simple histogram plot of the total number of submissions by year and by gender of the last author","8790e41a":"# Effect of COVID on publication ouput in Physics\n\nThe goal of this project is to investigate the possibility of a disproportionate impact of COVID on the academic productivity of women physicists","e05c1973":"# Analysis of condensed matter data\n\n## Data preparation\n\nFirst we prepare the dataset for the analysis by dropping some entries that cannot be used.\n\nFor many arXiv submissions the authors only provide initials for their first and middle name. These entries cannot be used to build a statistics concerning the gender of the authors and I therefore proceed with removing them. \n\nTo simplify I only check that the first author has entered a full name assuming that if only initials are used it is likely that that would be the case for all authors. Remember that we are also only concerned with the first and last author in this analysis. ","1b5af0c5":"We then consider the three data sets separately using the same analysis in order to compare the trends within the different topics","cb9f9b1a":"### Gender ratio","056897b7":"# Input files used\n\nI used two datasets containing the information on arXiv submissions between January 1st, 2012 and July 1st, 2020 in the Condensed Matter and Astrophysics categories respectively. arXiv is an open-access repository of electronic preprints where researchers commonly submit the manuscripts concerning their findings while they awais publication on peer-reviewed journals. The fact that arXiv submissions usually appear on the website within 24 hours allows us to take a glimpse on the impact of the lockdown caused by COVID in real time, without the need to wait for the longer time required for official publication. arXiv also provides a convenient centralized location where to get information on a large number of works that were eventually published on a whole spectrum of scientific journals. \nTo scrape the data I used the code in the (commented) cell below","7e6a8ba4":"### Gender ratio \n\nWe now want to extract the ratio of female authors to analyze how this factor has changed in time in the past 8 years","ff04987a":"# Comments\n\nThis is my first repository and Python data science project. I appreciate any comment and suggestion on how to improve it, tips on how to better present the findings in the repository, and particularly inputs on aspects of the analysis where I might have committed mistakes. \nThanks! ","d0fe504b":"We then proceed with detecting the gender of the first and last author of the manuscript using the gender.Detector method of the gender_guesser library. ","9ddc11c6":"### Some simple data visualization\n\nSimple  histogram plot of the total number of submissions by year and by gender of the first author. We limit this to the year for which we have a full dataset","36bede1f":"# Import previously scraped data","b3773756":"# Description of the project\n\nThis project takes inspiration from the [work](https:\/\/github.com\/drfreder\/pandemic-pub-bias) of Megan Frederickson concerning the effect of the pandemic on the academic publication output of scientists. Following an [article](https:\/\/www.nature.com\/articles\/d41586-020-01135-9) in Nature suggesting that the restrictions imposed by the lockdown might disproportionally be affecting the productivity of women in the field, Prof. Frederickson collected information on the preprint submissions to arXiv and bioRxiv in the first few months of 2019 and 2020 to investigate this aspect further. From her analysis it appears that the impact of the pandemic has indeed negatively affected women scientists to a larger extent. \n\nIn order to shed more light on this importan issue, I here carry out a similar analysis on a subset of arXiv submission categories, namely publications in the condensed matter and astrophysics fields, but on a longer time scale (2012-2020). I limit my attention to first and last authors as I believe that they provide the most important information on the impact on publication output.\nI believe that an analysis that considers a longer period of time is important as it provides information on the overall publication trend and establishes the magnitude of the variance in the male\/female publication rates. \n\nThe steps of the analysis are explained throughout the 'Data_analysis' notebook. As mentioned above, the 'Data_scraping' notebook provides the code that I used to scrape arXiv for the authors' information. As the scraping process is rather time consuming, the 'Data_analysis' notebook directly imports the scraped data stored in the 'Data' folder. \n\nIn order to extract the gender of the authors I use the [gender-guesser](https:\/\/pypi.org\/project\/gender-guesser\/) package. As mentioned also by Prof. Frederickson, this type of approach has limitations and will not provide a perfectly accurate gender assignment for each entry in the data set. Nevertheless, they can provide a good aggregate overview of the male\/female split. ","d803f746":"### Data visualization","6a6eda2c":"# Conclusions\n\nFrom this analysis we can conclude that, at least in the subfields considered here, there is not a statistically relevant change in the ratio of female-to-male authorship (both in the case of first and last authors) in the first few months of 2020, when this data is compared to the trend of the past 8 years. \n\nWe should nonetheless consider that the impact on publications could still be delayed by many months and this analysis will have to be regularly repeated to consider this possibility.","e4dde688":"Histogram plots of the total number of submissions separated by month by year and by gender of the first author.\n\nThis allows us to see more in details the effect on the first months of 2020.","83986bcf":"So it looks like we have a decently sized data set that we can work with."}}