{"cell_type":{"467a81cb":"code","5c0557b5":"code","e941c5e6":"code","1e5ce7eb":"code","266e8948":"code","db4cbcaa":"code","596ca3a1":"code","f7831490":"code","f55bca88":"code","3329f75a":"code","e62a1372":"code","c8acafb6":"code","30f3e1c5":"code","2a3eb0fb":"code","c24c0473":"code","cc3cef9a":"code","98e669fb":"code","c0d45a92":"markdown","94b946c8":"markdown"},"source":{"467a81cb":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)","5c0557b5":"#load the data\n!cp -r ..\/input\/sgp-buildings\/* .\/","e941c5e6":"tables=  {'total':{'csv_name':'singapore_building_gfa_energy.csv'},'commercial':{'csv_name':'energy_performance_data_2016.csv'}}\nfor t in tables:\n    tables[t]['tbl'] = pd.read_csv(tables[t]['csv_name'])\n\ncolumn_key = {'buildingtype':'property type','grossfloorarea':'GFA m2','2016energyusintensity':'kWh\/m2\/yr'}\nfields = ['property type','GFA m2','kWh\/m2\/yr']\ntables['commercial']['tbl'].rename(columns=column_key,inplace=True)\ncomm = tables['commercial']['tbl'][fields].copy()\n\nfor f in ['GFA m2','kWh\/m2\/yr']:\n    comm[f] = comm[f].str.replace(',','').astype(float)\n\ncomm['kWh\/yr'] = comm['GFA m2']*comm['kWh\/m2\/yr']","1e5ce7eb":"comm['property type'].unique()","266e8948":"pct_OK = len(comm.dropna())\/len(comm)\npct_OK","db4cbcaa":"comm.dropna(inplace=True)","596ca3a1":"comm.head()","f7831490":"pvt = pd.pivot_table(comm,index='property type',values=['GFA m2','kWh\/yr'],aggfunc='sum')\npvt['kWh\/m2\/yr'] = pvt['kWh\/yr']\/pvt['GFA m2']","f55bca88":"total = tables['total']['tbl'].copy()\ntotal.rename(columns={'kWh\/yr\/m2':'kWh\/m2\/yr'},inplace=True)\ntotal['GWh\/yr'] = total['mil m2']*total['kWh\/m2\/yr']\ncomm_totals = total[total['property type']=='commercial'].iloc[0]\n\npvt_scaled = pvt.copy()\npvt_scaled['mil m2'] = pvt['GFA m2']*comm_totals['mil m2']\/pvt['GFA m2'].sum()\npvt_scaled['GWh\/yr'] = pvt['kWh\/yr']*comm_totals['GWh\/yr']\/pvt['kWh\/yr'].sum()\n\npvt_scaled","3329f75a":"fields = ['mil m2','kWh\/m2\/yr','GWh\/yr']\n\nex_com = total.drop(total[total['property type']=='commercial'].index)\ntotal = pd.concat([ex_com,pvt_scaled[fields].reset_index()],axis=0)\n\ntotal","e62a1372":"pop_mil = 5.6\n\npca = total.copy()\npca['m2\/ca'] = total['mil m2']\/pop_mil\npca['kWh\/ca\/yr'] = total['GWh\/yr']\/pop_mil\n\ndel pca['mil m2'], pca['GWh\/yr']","c8acafb6":"pca.sort_values('kWh\/ca\/yr',ascending=False)","30f3e1c5":"import seaborn as sb\nsb.barplot(x='kWh\/ca\/yr',y='property type',data=pca.sort_values('kWh\/ca\/yr',ascending=False))","2a3eb0fb":"pca['kWh\/ca\/yr'].sum()","c24c0473":"weekly_hrs = 168\nm2_factors = dict(zip(list(pca['property type']),list(pca['m2\/ca'])))\nusage_factors = {\n    'residential':(12*7+4*2)\/weekly_hrs,\n    'Office':0.35*40\/weekly_hrs,\n    'Retail':0.15*40\/weekly_hrs,\n    'Mixed Development':0.05*40\/weekly_hrs,\n    'education':0.25*40*9\/12\/weekly_hrs,\n    'Hotel':0.05*40\/weekly_hrs,\n    'healthcare':0.05*40\/weekly_hrs,\n    'transport':0.02*40\/weekly_hrs,\n    'sports rec':0,\n    'civil \/ community':0,\n}\nout_of_home_hrs = 16\/weekly_hrs #excludes time in transit\nout_of_home = ['Retail','Mixed Development','healthcare','transport',\n          'sports rec','civil \/ community']\nout_of_home_m2 = dict(zip(out_of_home,[m2_factors[x] for x in out_of_home]))\ntotal_ooh_m2 = sum(out_of_home_m2.values())\n\nfor f in out_of_home:\n    usage_factors[f] = usage_factors[f] + out_of_home_hrs*out_of_home_m2[f]\/total_ooh_m2\nusage_factors","cc3cef9a":"hours_per_year = 24*365\nusg = pd.DataFrame({'hrs\/ca':usage_factors})\nusg.index.name = 'property type'\ndf = pd.merge(pca,usg.reset_index(),on='property type')\ndf['W\/ca'] = df['kWh\/ca\/yr']\/(df['hrs\/ca']*hours_per_year)*1000\ndf.sort_values('W\/ca',ascending=False)","98e669fb":"sb.barplot(x='W\/ca',y='property type',\n           data=df.drop(df[df['property type']=='Hotel'].index).sort_values('W\/ca',ascending=False))","c0d45a92":"In context, avg electricity consumption is 9,000 kWh\/ca\/yr of which building energy presented here is only ~ 28% and 500 kWh\/ca\/yr is from transport so the balance 6000 kWh\/ca\/yr is mostly from manufacturing.  The figure of 9,000 kWh\/ca\/yr is electricity only and does not include energy for transport using personal vehicles, taxis and public buses nor does it include holiday travel flights.  As a benchmark comparison from the HDI vs energy usage, typical energy usage for a country with HDI > 0.8 is in the range 2,000 - 4,000 kWh\/ca\/yr inclusive of industrial and transport energy.  \n\nA quick scan of the building energy use highlights that home energy is the highest contributor at 1,000 kWh\/ca\/yr, so for buildings this is a reasonable starting point for efficiency improvement.   \n\nAnother question to consider is to look at the split of where a typical resident's energy usage is coming from, is it while they are at home, work, errands or leisure, considering for some simplifying assumptions about their time usage at each of these locations.","94b946c8":"Based on the weights input provided, after adjusting for the fact that more time is spent in the home other out of home energy uses appear more intense on a time-weighted basis.  The actual distribution between these sectors would require a more detailed validation of the usage weights."}}