{"cell_type":{"0360bf6d":"code","f33d4da1":"code","c600cb41":"code","b17afb06":"code","a2861502":"code","5b4266b5":"code","cfa7059e":"code","9ebb568e":"markdown","031eae0e":"markdown","6e64e1a8":"markdown","adde7b41":"markdown","f17edc81":"markdown"},"source":{"0360bf6d":"import tensorflow as tf\nimport cv2\nimport sys\nfrom matplotlib import pyplot as plt","f33d4da1":"a = cv2.imread('..\/input\/siim-isic-melanoma-classification\/jpeg\/train\/ISIC_0075663.jpg')\na = cv2.resize(a , (224,224), interpolation=cv2.INTER_AREA)","c600cb41":"quals = [100, 98, 95, 90, 80, 70, 60, 50, 40, 30, 20, 10]\nencodes = [cv2.imencode('.jpg', a, (cv2.IMWRITE_JPEG_QUALITY, i))[1].tostring() for i in quals]\ndecodes = [tf.io.decode_jpeg(i) for i in encodes]\nsize_of_origin = sys.getsizeof(encodes[0])\ncompress_rate = [sys.getsizeof(i)\/size_of_origin for i in encodes]","b17afb06":"k_low =110\nk_size=5\nplt.figure(figsize=(16, 6))\nfor i in range(12):\n    plt.subplot(2, 6, i+1)\n    plt.imshow(decodes[i][k_low:k_low+k_size, k_low:k_low+k_size, :])\n    plt.title(f'q:{quals[i]} r:{compress_rate[i]: .3f}')","a2861502":"k_low =110\nk_size=10\nplt.figure(figsize=(16, 6))\nfor i in range(12):\n    plt.subplot(2, 6, i+1)\n    plt.imshow(decodes[i][k_low:k_low+k_size, k_low:k_low+k_size, :])\n    plt.title(f'q:{quals[i]} r:{compress_rate[i]: .3f}')","5b4266b5":"k_low =110\nk_size=20\nplt.figure(figsize=(16, 6))\nfor i in range(12):\n    plt.subplot(2, 6, i+1)\n    plt.imshow(decodes[i][k_low:k_low+k_size, k_low:k_low+k_size, :])\n    plt.title(f'q:{quals[i]} r:{compress_rate[i]: .3f}')","cfa7059e":"k_low =110\nk_size=50\nplt.figure(figsize=(16, 6))\nfor i in range(12):\n    plt.subplot(2, 6, i+1)\n    plt.imshow(decodes[i][k_low:k_low+k_size, k_low:k_low+k_size, :])\n    plt.title(f'q:{quals[i]} r:{compress_rate[i]: .3f}')","9ebb568e":"### compare details in 20x20","031eae0e":"## summary\n1. the details lost obviously when the quality less than 90.\n2. the increase of compressing rate reduced by the decay of quality.\n3. 95 maybe a better choise.","6e64e1a8":"### compare details in 5x5","adde7b41":"### compare details in 10x10","f17edc81":"### compare details in 50x50"}}