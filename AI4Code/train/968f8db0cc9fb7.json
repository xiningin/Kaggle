{"cell_type":{"8b525921":"code","a4305a1c":"code","30ea0543":"code","d7ea9e2f":"code","73c4d1b2":"code","e5eae1d2":"code","93507159":"code","27eac3ca":"code","ac4b4ede":"markdown"},"source":{"8b525921":"import numpy as np\nimport pandas as pd\nfrom pandas.io.json import json_normalize\n\nfrom requests import Request, Session\nfrom requests.exceptions import ConnectionError, Timeout, TooManyRedirects\nimport json\n\nfrom bs4 import BeautifulSoup\nimport requests\n\nfrom tqdm import tqdm_notebook as tqdm\nimport time","a4305a1c":"def get_data(c,start='20130428',end='20190528'):\n    url = 'https:\/\/coinmarketcap.com\/currencies\/'+c+'\/historical-data\/?start='+start+'&end='+end\n    url=url.replace(' ','-')\n    content = requests.get(url).content\n    soup = BeautifulSoup(content,'html.parser')\n\n    #         time.sleep(1)\n\n    table = soup.find('table', {'class': 'table'})\n    data = [[td.text.strip() for td in tr.findChildren('td')] \n            for tr in table.findChildren('tr')]\n    df = pd.DataFrame(data)\n    df.drop(df.index[0], inplace=True) # first row is empty\n    df[0] =  pd.to_datetime(df[0]) # date\n    for i in range(1,7):\n        df[i] = pd.to_numeric(df[i].str.replace(\",\",\"\").str.replace(\"-\",\"\")) # some vol is missing and has -\n    df.columns = ['Date','Open','High','Low','Close','Volume','Market Cap']\n    df['Name']=c\n    return df\n","30ea0543":"df_total=pd.DataFrame() \ndf_list=[]\nfor c in tqdm(['bitcoin-cash','bitcoin','dash','dogecoin','ethereum','iota','litecoin','nem','neo']):\n    print(c)\n    try:\n        df_tmp=get_data(c)\n        df_list.append(df_tmp)\n    except:\n        print('failed to parse for :%s'%(c))\n        \n# df_total=pd.concat(df_list)\n# df_total=df_total.sort_values(by=['Name','Date']).reset_index()\n# df_total\nprint(len(df_list))","d7ea9e2f":"df_total=pd.concat(df_list)\ndf_total=df_total.sort_values(by=['Name','Date']).reset_index(drop=True)\ndf_total.to_csv('crypto_amit_may28.csv', index=False)","73c4d1b2":"df_total[df_total.Name=='bitcoin'].reset_index()['Market Cap'].plot()\ndf_total[df_total.Name=='ethereum'].reset_index()['Market Cap'].plot()","e5eae1d2":"print(df_total[df_total.Name=='bitcoin'].shape)\nprint(df_total[df_total.Name=='ethereum'].shape)","93507159":"!ls ","27eac3ca":"df_total","ac4b4ede":"## the following blocks of codes collect cryptocurrency related data by webscrapping and finally a dataframe is produced."}}