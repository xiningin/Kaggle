{"cell_type":{"c0d0049c":"code","678074f4":"code","eb2e14f6":"code","66f7fd25":"code","83a19116":"code","71b04acd":"code","a5e9580f":"code","f8ac0757":"code","d379e902":"code","2610a6e1":"code","a4b653cb":"code","eb8c432b":"code","6393c816":"code","65018b69":"code","53f57d78":"code","138b4927":"code","e0c73f23":"markdown","95ef2225":"markdown","7a7e91f3":"markdown","c6c40f98":"markdown","a4046cba":"markdown","9425592f":"markdown","fd44cc1e":"markdown","37f245be":"markdown"},"source":{"c0d0049c":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom scipy.stats import mstats # Stats\nfrom sklearn import preprocessing # Preprocessing\nfrom sklearn.model_selection import train_test_split # Split data\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nplt.rcParams[\"figure.figsize\"] = [17, 6]\n\n#Ignore warnings\nimport warnings\nwarnings.filterwarnings('ignore')","678074f4":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n","eb2e14f6":"path = '..\/input\/chest-xrays-multi-and-single-label-with-resampling\/data-chest-x-ray-singlelabel-balanced-resample-gender-proportion.plk'\npath1 = '..\/input\/chest-xray-data-multi14-all\/data-chest-x-ray-multilabel-14-all.plk'","66f7fd25":"data = pd.read_pickle(path)\nprint(data.shape)\ndata1 = pd.read_pickle(path1)\nprint(data1.shape)\ndata.head()","83a19116":"final_data = pd.merge(data, data1[['Patient Age', 'Patient Gender']], left_index=True, right_index=True)\nfinal_data.shape","71b04acd":"data.describe()","a5e9580f":"le_gender = preprocessing.LabelEncoder()\nle_age = preprocessing.LabelEncoder()\nle_gender.fit(final_data['Patient Gender'])\nprint(list(le_gender.classes_))\nfinal_data['Patient Gender'] = le_gender.transform(final_data['Patient Gender']) \n\nfinal_data.head()","f8ac0757":"final_data[['Patient Age', 'Patient Gender']].describe()","d379e902":"final_data['Finding Labels'].unique()","2610a6e1":"\nage_No_Finding = final_data[final_data['Finding Labels']=='No Finding']['Patient Age']\nage_Cardiomegaly = final_data[final_data['Finding Labels']=='Cardiomegaly']['Patient Age']\nage_Hernia = final_data[final_data['Finding Labels']=='Hernia']['Patient Age']\nage_Infiltration = final_data[final_data['Finding Labels']=='Infiltration']['Patient Age']\nage_Nodule = final_data[final_data['Finding Labels']=='Nodule']['Patient Age']\nage_Emphysema = final_data[final_data['Finding Labels']=='Emphysema']['Patient Age']\nage_Effusion = final_data[final_data['Finding Labels']=='Effusion']['Patient Age']\nage_Atelectasis = final_data[final_data['Finding Labels']=='Atelectasis']['Patient Age']\nage_Pleural_Thickening = final_data[final_data['Finding Labels']=='Pleural_Thickening']['Patient Age']\nage_Pneumothorax = final_data[final_data['Finding Labels']=='Pneumothorax']['Patient Age']\nage_Mass = final_data[final_data['Finding Labels']=='Mass']['Patient Age']\nage_Fibrosis = final_data[final_data['Finding Labels']=='Fibrosis']['Patient Age']\nage_Consolidation = final_data[final_data['Finding Labels']=='Consolidation']['Patient Age']\nage_Edema = final_data[final_data['Finding Labels']=='Edema']['Patient Age']\nage_Pneumonia = final_data[final_data['Finding Labels']=='Pneumonia']['Patient Age']\n\n\ngender_No_Finding = final_data[final_data['Finding Labels']=='No Finding']['Patient Gender']\ngender_Cardiomegaly = final_data[final_data['Finding Labels']=='Cardiomegaly']['Patient Gender']\ngender_Hernia = final_data[final_data['Finding Labels']=='Hernia']['Patient Gender']\ngender_Infiltration = final_data[final_data['Finding Labels']=='Infiltration']['Patient Gender']\ngender_Nodule = final_data[final_data['Finding Labels']=='Nodule']['Patient Gender']\ngender_Emphysema = final_data[final_data['Finding Labels']=='Emphysema']['Patient Gender']\ngender_Effusion = final_data[final_data['Finding Labels']=='Effusion']['Patient Gender']\ngender_Atelectasis = final_data[final_data['Finding Labels']=='Atelectasis']['Patient Gender']\ngender_Pleural_Thickening = final_data[final_data['Finding Labels']=='Pleural_Thickening']['Patient Gender']\ngender_Pneumothorax = final_data[final_data['Finding Labels']=='Pneumothorax']['Patient Gender']\ngender_Mass = final_data[final_data['Finding Labels']=='Mass']['Patient Gender']\ngender_Fibrosis = final_data[final_data['Finding Labels']=='Fibrosis']['Patient Gender']\ngender_Consolidation = final_data[final_data['Finding Labels']=='Consolidation']['Patient Gender']\ngender_Edema = final_data[final_data['Finding Labels']=='Edema']['Patient Gender']\ngender_Pneumonia = final_data[final_data['Finding Labels']=='Pneumonia']['Patient Gender']","a4b653cb":"a = 0.05\/15 #Bonferroni Correction ","eb8c432b":"H, pval = mstats.kruskalwallis(\n    list(age_Atelectasis),\n    list(age_Cardiomegaly),\n    list(age_Consolidation),\n    list(age_Edema),\n    list(age_Effusion),\n    list(age_Emphysema),\n    list(age_Fibrosis),\n    list(age_Hernia),\n    list(age_Infiltration),\n    list(age_Mass),\n    list(age_No_Finding),\n    list(age_Nodule),\n    list(age_Pleural_Thickening),\n    list(age_Pneumonia),\n    list(age_Pneumothorax)\n)\n\nprint(\"H-statistic:\\t{}\\nP-value:\\t{}\".format(H, pval))\nif pval < a:\n    print(\"Reject NULL hypothesis - Significant differences exist between groups.\")\nif pval > a:\n    print(\"Accept NULL hypothesis - No significant difference between groups.\")","6393c816":"H, pval = mstats.kruskalwallis(\n    list(gender_Atelectasis),\n    list(gender_Cardiomegaly),\n    list(gender_Consolidation),\n    list(gender_Edema),\n    list(gender_Effusion),\n    list(gender_Emphysema),\n    list(gender_Fibrosis),\n    list(gender_Hernia),\n    list(gender_Infiltration),\n    list(gender_Mass),\n    list(gender_No_Finding),\n    list(gender_Nodule),\n    list(gender_Pleural_Thickening),\n    list(gender_Pneumonia),\n    list(gender_Pneumothorax)\n)\n\nprint(\"H-statistic:\\t{}\\nP-value:\\t{}\".format(H, pval))\nif pval < a:\n    print(\"Reject NULL hypothesis - Significant differences exist between groups.\")\nif pval > a:\n    print(\"Accept NULL hypothesis - No significant difference between groups.\")","65018b69":"fig, ax = plt.subplots(figsize=[15,10])\nfinal_data.groupby(['Finding Labels', pd.cut(final_data['Patient Age'], np.arange(0,100,10))])\\\n       .size()\\\n       .unstack(0)\\\n       .plot.bar(stacked=True, ax=ax)","53f57d78":"sns.FacetGrid(final_data,hue='Finding Labels',size=8).map(sns.distplot,'Patient Age').add_legend()\nplt.show()","138b4927":"fig, ax = plt.subplots(figsize=[15,10])\nfinal_data.groupby(['Patient Gender', 'Finding Labels'])\\\n       .size()\\\n       .unstack(0)\\\n       .plot.bar(stacked=True, ax=ax)\nax.legend([\"Female\", \"Male\"]);","e0c73f23":"## Columnas apiladas de enfermedades por rangos de edad","95ef2225":"## Preprocessing: Label Enconder -> Gender","7a7e91f3":"## Columnas apiladas de enfermedades por genero","c6c40f98":"### Kruskal Test: Patient Age","a4046cba":"### Kruskal Test: Patient Gender","9425592f":"# Test Kruskal Wallis with Age and Gender","fd44cc1e":"## Describe data","37f245be":"## Split data"}}