{"cell_type":{"6df76b62":"code","aad96520":"code","f52d3dca":"code","f9a3c53e":"code","4655aca1":"code","49a998fd":"code","5860d671":"code","ec697e76":"code","06552e8c":"code","e34d0c4a":"code","3a69d7bc":"code","272a13a6":"code","c9232e73":"code","2bcb5edb":"code","baaae31c":"code","fd0478df":"code","b1d27ce1":"code","a60e752a":"code","b291ebf4":"code","d35935b7":"code","405db33d":"code","bc929cef":"markdown","1ce0e6f9":"markdown","63c63dfc":"markdown","5901546a":"markdown","522aceb4":"markdown","04e332f7":"markdown","d167a538":"markdown","c2828d0b":"markdown","cfe1eb78":"markdown","c25c0a50":"markdown","79c9c4bc":"markdown","e8336976":"markdown","cfd6fdf6":"markdown"},"source":{"6df76b62":"import pandas as pd\nimport numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom matplotlib.ticker import FuncFormatter\nimport warnings\nwarnings.filterwarnings('ignore')\n%matplotlib inline","aad96520":"label_color = '#353535'\ncolor_mint = sns.cubehelix_palette(rot=-.4)\ncolor_warm = sns.cubehelix_palette()\ncolor_mix = ['#ef476f','#ffd166','#06d6a0','#118ab2','#073b4c']\n\nmpl.rcParams['axes.spines.right'] = False\nmpl.rcParams['axes.spines.top'] = False\nmpl.rcParams['axes.spines.left'] = False\nmpl.rcParams['axes.labelcolor'] = label_color\n\n\n\nmpl.rcParams[\"font.family\"] = 'monospace'","f52d3dca":"economy_data = pd.read_csv('\/kaggle\/input\/brics-world-bank-indicators\/BRICS Development Indicators\/Economy_Data.csv', sep=';')\neconomy_data.head()","f9a3c53e":"#data cleaning and preparation\neconomy_data.dropna(subset=[\"Value\"], inplace=True)\neconomy_labels = ['Agriculture, forestry, and fishing, value added (% of GDP)', \n                 'Industry (including construction), value added (% of GDP)',\n                 'Services, value added (% of GDP)',\n                 'GDP (constant 2010 US$)',\n                 'GDP growth (annual %)',\n                 'GDP per capita (constant 2010 US$)']\neconomy = economy_data[economy_data['SeriesName'].isin(economy_labels)]\neconomy.loc[:,'Year'] = pd.to_datetime(economy['Year'],format='%Y').dt.year\neconomy = economy.set_index(['Year','SeriesName','CountryName'])['Value'].unstack().unstack()\n# economy.pivot('Year',columns=['SeriesName','CountryName'],values='Value')\neconomy.isnull().sum()","4655aca1":"economy.sort_values(by='Year',ascending=False,inplace=True)\neconomy.fillna(method='ffill',inplace=True)\neconomy.tail(10)","49a998fd":"fig, ax = plt.subplots(1,3,figsize=(8,6),dpi=150)\n#equivalent to this\n# fig = plt.figure(figsize=(6,6),dpi=150)\n# ax = fig.add_subplot(1,1,1)\n\nax[0].pie(economy['China'].loc[1970,economy_labels[:3]],\n        colors=color_mint,\n        autopct='%1.1f%%',\n        wedgeprops=dict(width=0.6),\n        pctdistance= 1.24,\n        textprops={\n           'fontsize': 6,\n           'color': color_mint[-1],\n           'fontweight': 'bold'\n       })\n\nax[1].pie(economy['China'].loc[2000,economy_labels[:3]],\n        colors=color_mint,\n        autopct='%1.1f%%',\n        wedgeprops=dict(width=0.6),\n        pctdistance= 1.2,\n        textprops={\n           'fontsize': 6,\n           'color': color_mint[-1],\n           'fontweight': 'bold'\n       })\n\nax[2].pie(economy['China'].loc[2019,economy_labels[:3]],\n        colors=color_mint,\n        autopct='%1.1f%%',\n        wedgeprops=dict(width=0.6),\n        pctdistance= 1.2,\n        textprops={\n           'fontsize': 6,\n           'color': color_mint[-1],\n           'fontweight': 'bold'\n       })\nax[0].legend(economy_labels[:3], loc='upper center', bbox_to_anchor=(1.8,0), ncol=1, frameon=False, fontsize=6)\n\nax[0].text(0, 0, \"1970\", ha='center', va='center', fontsize = 8, color = color_mint[-1])\nax[1].text(0, 0, \"2000\", ha='center', va='center', fontsize = 8, color = color_mint[-1])\nax[2].text(0, 0, \"2019\", ha='center', va='center', fontsize = 8, color = color_mint[-1])\n\nplt.suptitle('GDP breakdown of China',color=color_mint[-1],fontsize=8, va='center', ha='center', x=0.5, y=0.68)\n\nax[0].set_aspect('equal')\nax[1].set_aspect('equal')\n\nplt.show()","5860d671":"# countries = list(economy.columns)\n# countries = set(list(zip(*countries))[0])\ncountries = list(economy_data['CountryName'].unique())\n\nfig, ax = plt.subplots(5,1,figsize=(8,8),dpi=150,sharex=True)\nfor i in range(5):\n    economy[countries[i]][economy_labels[:3]].sort_values(by='Year').plot(kind='bar', ax=ax[i], stacked=True,legend=False,color=color_warm)\n    ax[i].set_yticks(np.linspace(0,100,3))\n    ax[i].xaxis.set_major_locator(plt.MaxNLocator(4))\n    ax[i].tick_params(axis='both',which='both',length=0,labelsize=6,labelcolor=label_color)\n    ax[i].tick_params(axis='x',which='both',labelrotation=0)\n    for s in ['top','right','left']:\n        ax[i].spines[s].set_visible(False)\n    s = ax[i].spines['bottom']\n    s.set_edgecolor(color_warm[-1])\n    s.set_linewidth(0.6)\n    \n    ax[i].set_title(countries[i],ha='center',va='center',x=0.5,y=0.9,color=color_warm[-1],fontsize=7)\n\nplt.legend(economy_labels[:3],loc='upper center', bbox_to_anchor=(0.5,-0.3), ncol=1, frameon=False, fontsize=5)\nplt.ylabel('% of GDP',x=0,y=3,ha='center',va='center',color=color_warm[-1],fontsize=7)\nplt.xlabel('Year',fontsize=7)\nplt.show()","ec697e76":"def y_update_ticklabel_gdp(x,pos):\n    result = x\/100000000000\n    return '{}kb'.format(int(result))\n\ndf = economy.stack().reset_index()\ndf = df[df['SeriesName'] == 'GDP (constant 2010 US$)'].sort_values(by='Year')\n\nfig, ax = plt.subplots(1,1,figsize=(10,4),dpi=150)\ndf.plot(x='Year',ax=ax,kind='line',color=color_mix,linewidth=1)\n# ax.set_yscale(value='log')\nax.tick_params(axis='y',which='both',length=0)\nax.tick_params(axis='both',color=label_color,labelsize=8)\nax.yaxis.set_major_formatter(FuncFormatter(y_update_ticklabel_gdp))\nax.legend(loc='center left', bbox_to_anchor=(0,0.9), ncol=3,frameon=False, fontsize=8)\nax.set_ylabel('GDP (constant 2010 US$)',color=label_color,fontsize=8)\nax.set_title('GDP variations among five countries',color=label_color,fontsize=10)\nax.grid(axis='y',color='grey', linestyle='--', linewidth=0.2)\nplt.show()","06552e8c":"data = pd.read_csv('\/kaggle\/input\/brics-world-bank-indicators\/BRICS Development Indicators\/EducationAndEnviron_Data.csv', sep=';')\ndata.dropna(subset=[\"Value\"],inplace=True)\n\npopulation_labels = ['Rural population growth (annual %)',\n                    'Rural population',\n                    'Urban population growth (annual %)',\n                    'Urban population',\n                    'Urban population (% of total population)',\n                    'Rural population (% of total population)']\npopulation = data[data['SeriesName'].isin(population_labels)]\npopulation.loc[:,'Year'] = pd.to_datetime(population['Year'],format='%Y').dt.year\n# population_china = population[population['CountryName']=='China']\npopulation.head()","e34d0c4a":"df = population.set_index(['Year','CountryName','SeriesName'])['Value'].unstack().reset_index().set_index('Year')#the order of set_index is important here\ndf.fillna(method='ffill',inplace=True)\ndf.fillna(method='bfill',inplace=True)\n# df.drop('CountryName',axis=1,inplace=True)\ndf.head()\ndf_china = df[df['CountryName']=='China'].reset_index()\ndf_china.head()","3a69d7bc":"def y_update_ticklabel_ax1(x,pos):\n    result = x\/1000000\n    return '{}m'.format(int(result))\n\ndef y_update_ticklabel_ax0(x,pos):\n    result = round(x)\n    return '{}%'.format(result)\n\ndf_china = df[df['CountryName']=='China'].reset_index()# by resetting index i fixed a problem that subplot one didnt show lines, why?\n\n\nfig, ax = plt.subplots(2,1,figsize=(10,6),dpi=150,sharex=True)\n\ndf_china.plot(y=['Rural population growth (annual %)','Urban population growth (annual %)'],kind='line',ax=ax[0],color=[color_mix[1],color_mix[3]])\nax[0].yaxis.set_major_locator(plt.MaxNLocator(4))\nax[0].yaxis.set_major_formatter(FuncFormatter(y_update_ticklabel_ax0))\nax[0].set_yticks(np.linspace(-3,6,5))\nax[0].tick_params(axis='both',which='both',length=0)\nax[0].tick_params(axis='y',which='both',length=0,labelcolor=label_color,labelsize=8)\nax[0].spines['bottom'].set_visible(False)\nax[0].yaxis.set_ticks_position('right')\nax[0].grid(axis='y',which='major',color=label_color, linestyle='--', linewidth=0.1)\nax[0].legend(labels=['Rural population\\ngrowth (annual %)','Urban population\\ngrowth (annual %)'],loc='center left', bbox_to_anchor=(-0.24,0.5), ncol=1,frameon=False, fontsize=8,labelcolor=label_color)\nax[0].set_title('Population Growth rate variations of China',color=label_color,fontsize=10,y=1)\n\ndf_china.plot(x='Year',y=['Rural population','Urban population'],kind='bar',ax=ax[1],rot=0,width=0.8,color=[color_mix[1],color_mix[3]])\n# ax[1].bar(x=df_china.index,height=df_china['Rural population'],alpha=0.6)\n# ax[1].bar(x=df_china.index,height=df_china['Urban population'],alpha=0.6)\nax[1].yaxis.set_major_locator(plt.MaxNLocator(5))\nax[1].yaxis.set_major_formatter(FuncFormatter(y_update_ticklabel_ax1))\nax[1].xaxis.set_major_locator(plt.MaxNLocator(nbins=10))\nax[1].tick_params(axis='both',which='both',length=3,labelcolor=label_color,labelsize=8,color=label_color)\nax[1].tick_params(axis='both',which='minor',length=0)\nax[1].spines['bottom'].set_color(label_color)\nax[1].legend(loc='center left', bbox_to_anchor=(-0.24,0.5), ncol=1,frameon=False, fontsize=8,labelcolor=label_color)\nax[1].set_title('Population variations of China',color=label_color,fontsize=10,y=1)\n\nfig.subplots_adjust(hspace=0.2)\nplt.show()","272a13a6":"environment_labels = ['CO2 emissions (kt)',\n                    'Methane emissions (kt of CO2 equivalent)',\n                    'Nitrous oxide emissions (thousand metric tons of CO2 equivalent)',\n                    'Other greenhouse gas emissions, HFC, PFC and SF6 (thousand metric tons of CO2 equivalent)',\n                     'Forest area (% of land area)']\nenvironment = data[data['SeriesName'].isin(environment_labels)]\nenvironment.loc[:,'Year'] = pd.to_datetime(environment['Year'],format='%Y').dt.year\nenvironment.head()","c9232e73":"df = environment[(environment['SeriesName'].isin(environment_labels[:-1]) & (environment['CountryName'] == 'China'))]\ndf = df.set_index(['Year','SeriesName'])['Value'].unstack().reset_index()\ndf.fillna(method='ffill',inplace=True)\ndf.head()","2bcb5edb":"def y_update_ticklabel_ax(x,pos):\n    result = x\/1000000\n    if x==0:\n        return  '{}'.format(int(result))\n    else:\n        return '{}m'.format(int(result))\n\nfig, ax = plt.subplots(1,1,figsize=(10,4),dpi=150)\nax.stackplot(df['Year'],\n             df[environment_labels[0]],\n             df[environment_labels[1]],\n             df[environment_labels[2]],df[environment_labels[3]],\n            labels = environment_labels[0:4],\n            colors=color_mix,\n            edgecolor='w',\n            linewidth=0.8)\nax.yaxis.set_major_locator(plt.MaxNLocator(5))\nax.spines['left'].set_position(('outward',-20))\nax.spines['bottom'].set_position(('outward',6))\nax.spines['bottom'].set_visible(False)\nax.tick_params(axis='both',length=0,labelcolor=label_color)\nax.grid(axis='both',color=label_color,linestyle='--',linewidth=0.1)\n# ax.set_axisbelow(True)\nax.yaxis.set_major_formatter(FuncFormatter(y_update_ticklabel_ax))\nax.set_xlabel('Year')\nax.set_ylabel('kt of CO2 equivalent')\nax.set_title('Historic greenhouse gas emissions of China')\n\nax.legend(loc='center left', bbox_to_anchor=(0.1,0.8), ncol=1,frameon=False, fontsize=6,labelcolor=label_color)\n\nplt.show()","baaae31c":"data = pd.read_csv('\/kaggle\/input\/brics-world-bank-indicators\/BRICS Development Indicators\/HealthAndPoverty_Data.csv',sep=';')\nhealth_labels = ['Life expectancy at birth, total (years)',\n                'Birth rate, crude (per 1,000 people)',\n                'Death rate, crude (per 1,000 people)',\n                'Fertility rate, total (births per woman)']\nhealth = data[data['SeriesName'].isin(health_labels)]\nhealth.loc[:,'Year'] = pd.to_datetime(health['Year'],format='%Y').dt.year\nhealth = health.set_index(['Year','SeriesName','CountryName'])['Value'].unstack().unstack()\nhealth.fillna(method='ffill',inplace=True)\nhealth = health.stack().stack().reset_index().rename(columns={0:'Value'})\nhealth = health.set_index(['Year','CountryName','SeriesName'])['Value'].unstack().reset_index()\nhealth.head()","fd0478df":"df =health\ncountries = df['CountryName'].unique()\nfig, ax = plt.subplots(1,1,figsize=(10,5),dpi=150)\n\nsns.lineplot(x='Year',\n             y='Life expectancy at birth, total (years)',\n             data=health,\n             hue='CountryName',\n             style='CountryName',\n             ms=7,\n             mec='w',\n             lw=2,\n             palette=color_mix,\n             markers=['o']*5\n            )\nax.legend(loc='center left', bbox_to_anchor=(0.1,0.9), ncol=1,frameon=False, fontsize=8,labelcolor=label_color)\nax.set_ylabel('Life expectancy (years)')\nfor i in range(5):\n    ax.lines[i].set_markevery(every=[-1])\n    \nfor i in range(5):\n    ax.text(df['Year'].iloc[-1]+0.7,\n            df[df['CountryName']==countries[i]]['Life expectancy at birth, total (years)'].iloc[-1],\n            round(df[df['CountryName']==countries[i]]['Life expectancy at birth, total (years)'].iloc[-1],2),\n            va='center',\n           color=label_color,\n           fontsize=8)\nax.grid(axis='both',color=label_color,linestyle='--',linewidth=0.1)\nax.tick_params(axis='both',which='major',labelcolor=label_color,labelsize=8)\nax.set_title('Life expectancy Variations',c=label_color,y=1.1)\nplt.show()","b1d27ce1":"df = health\nfig, ax = plt.subplots(1,1,figsize=(10,5),dpi=150)\n\nsns.lineplot(x='Year',y='Death rate, crude (per 1,000 people)',data=df,color='#073b4c')\nsns.lineplot(x='Year',y='Birth rate, crude (per 1,000 people)',data=df,color='#ef476f')\nax.legend(['Death rate, crude (per 1,000 people)','Birth rate, crude (per 1,000 people)'],loc='center left', bbox_to_anchor=(0.6,0.9), ncol=1,frameon=False, fontsize=8,labelcolor=label_color)\n\nax.annotate('95% confidence interval',xy=(1980,34),xytext=(1985,37),arrowprops=dict(color=label_color,arrowstyle='->',connectionstyle='arc3,rad=-0.1'),fontsize=8)\nax.annotate('mean ',xy=(1980,10),xytext=(1985,15),arrowprops=dict(facecolor=label_color,arrowstyle='->',connectionstyle='arc3,rad=-0.1'),fontsize=8)\n\nax.set_ylabel('per 1000 people')\nax.set_title('Death and Birth rate variations of five countries')\nax.grid(axis='y',color=label_color,linestyle=':',linewidth=0.1)\nax.tick_params(axis='both',which='major',labelcolor=label_color,labelsize=8)\nplt.show()","a60e752a":"data = pd.read_csv('\/kaggle\/input\/brics-world-bank-indicators\/BRICS Development Indicators\/PublicSector_Indicators.csv',sep=';')\npublic_labels=['Labor force participation rate, female (% of female population ages 15+) (modeled ILO estimate)',\n              'Labor force, female (% of total labor force)',\n              'Labor force, total']\n\npublic = data[data['SeriesName'].isin(public_labels)]\npublic.loc[:,'Year'] = pd.to_datetime(public['Year'],format='%Y').dt.year\npublic = public.set_index(['Year','CountryName','SeriesName'])['Value'].unstack().reset_index()\npublic['Labor force, female'] = public['Labor force, total']*public['Labor force, female (% of total labor force)']\/100\npublic.tail(5)","b291ebf4":"health.tail(5)","d35935b7":"df = public[public['Year'].isin([2019,1990])].merge(health[health['Year'].isin([2019,1990])],on=['Year','CountryName'])\ndf.head()","405db33d":"df = public[public['Year'].isin([2019,1990])].merge(health[health['Year'].isin([2019,1990])],on=['Year','CountryName'])\nfig, ax = plt.subplots(1,1,figsize=(8,4),dpi=150)\n\nsns.scatterplot(x='Fertility rate, total (births per woman)',\n               y='Labor force participation rate, female (% of female population ages 15+) (modeled ILO estimate)',\n               size='Labor force, female',\n               data=df,\n               sizes=(100,1000),\n                hue='CountryName',\n               legend=True,\n               palette=color_mix,\n               edgecolor='k')\n\nfor i in range(5):\n    ax.annotate('',xy=(df.iloc[i+5,8],df.iloc[i+5,2]),xytext=(df.iloc[i,8],df.iloc[i,2]),arrowprops=dict(shrinkA=0,shrinkB=0,color='grey',arrowstyle='-|>',connectionstyle='arc3,rad=0'))\n    \nl = ax.legend(loc='center right', bbox_to_anchor=(1,0.9), ncol=1,frameon=False, fontsize=6,labelcolor=label_color,handletextpad=2,labelspacing=0.6)\nl.get_texts()[6].set_text('Labor force\\nfemale population')\nfor i in range(7,12):\n    t = l.get_texts()[i].get_text()\n    l.get_texts()[i].set_text('{}m'.format(round(float(t)*100)))\n    \nax.grid(axis='x',color=label_color,linestyle='--',linewidth=0.1)\nax.tick_params(axis='both',which='major',labelcolor=label_color,labelsize=8)\nax.set_ylim(15,79)\nax.set_ylabel('Labor force participation rate, female(%)',fontsize=8)\nax.set_xlabel('Fertility rate, total (births per woman)',fontsize=8)\nax.set_title('Female labor force participation rate and fertility rate\\nfrom 1970 to 2019',color=label_color,fontsize=10,y=1.18)\nplt.show()","bc929cef":"\ud83d\udcad Not very surprising, leaps and bounds in development come in hand with great energy consumption, in which co2 ranks first, way ahead of the others.","1ce0e6f9":"# Introduction\n\n\nHi~ this is my first notebook for data visualization. In this notebook I will do some basic data analyses and visualization by creating plots using matplotlib and seaborn, the goal of writing this notebook is to familiarize myself with the usage of tools such as pandas,matplotlib.\nI will be very happy if anyone finds this notebook helpful\ud83d\ude09\n\n","63c63dfc":"\ud83d\udcad As a whole, birth rate is declining, perhaps aging population is inevitable?","5901546a":"# Urbanization and CO2 Variation","522aceb4":"#  Employment and Gender\n","04e332f7":"\ud83d\udcad It seems all countries have growing proportion of services in common.","d167a538":"#  Industry and GDP\n\n\n\ud83d\udcad In this section I would like to find out something about a country's GDP, since this index is very important when it comes to the measurement of economic development. Firstly, I am curious about what makes up China's GDP, and to what extent it has changed over the years.","c2828d0b":"\ud83d\udcad Not very surprising again, life expectancies are growing as a whole, but I wonder why South Africa is a little different from the other?","cfe1eb78":"\ud83d\udcad China'GDP is ahead of all so far.","c25c0a50":"\ud83d\udcad One thing in common, fertility rates are all declining from 1970 to 2019, and it corresponds to the decrease of birth rate. I guess some analyses concerning about whether women are seeing fulfilling themselves in their careers more important than being housewives require some other background information.","79c9c4bc":"#  Health","e8336976":"\ud83d\udcad Urban population in China has grown from less than 200m in 1970 to more than 800m in 2019, people are moving from countrysides to big cities.","cfd6fdf6":"\ud83d\udcad So it's easy to see that Agriculture, industry and services are three main parts, and services part is growing bigger and bigger. And what about four other countries?"}}