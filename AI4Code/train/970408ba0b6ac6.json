{"cell_type":{"53faeefd":"code","d1354f42":"code","8b1e367c":"code","a04a9d59":"code","083b58f9":"code","f305f5d0":"code","0e92baeb":"code","7fa23232":"code","cdad64b1":"code","cff9fa34":"code","b30c1b59":"code","f2b20ea1":"code","09023e70":"code","8b5b41dc":"code","e0395d9c":"code","a7d3df2a":"code","229782c1":"code","68857fbb":"code","43cfeefe":"code","724d4a66":"code","75add7a6":"code","a6a7f62f":"code","d2b8c43c":"code","00255977":"code","1b5bf1fd":"code","c9c1f454":"code","157e702c":"code","586a98d7":"code","2c2c9c8e":"code","cb033186":"code","5bd90495":"code","55f0a032":"code","4503890b":"code","cb3eb928":"code","f6274b21":"code","5059db4a":"code","4f938c31":"code","cdde782f":"code","78d11697":"code","6c9b8149":"code","b7aca6b9":"code","eb16a49a":"code","f967052a":"code","12cc8caf":"code","9cbc3253":"code","8cdb01fb":"code","8bf3325d":"code","feeff244":"code","4b072feb":"code","32fe592d":"code","dc1b86e3":"code","0ff3c32c":"code","688553c3":"code","9c2380cf":"code","8566c659":"code","5d365ed3":"markdown","8ccab484":"markdown","984e6d9b":"markdown","ce253fde":"markdown","fb28e4e3":"markdown","440c68bd":"markdown","922645c2":"markdown","cd8b5c79":"markdown","e5c02872":"markdown","f5af7d7d":"markdown","0e0c870b":"markdown"},"source":{"53faeefd":"import os\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport numpy as np","d1354f42":"df = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"unemployment-in-european-union\", \"une_rt_m.tsv\"),delimiter='\\t')\ndf.head()","8b1e367c":"# Splitting the 1st column\n\nall_rows = []\nfor item in df.iloc[:,0:1].values:\n    current_row = str(item[0]).split(\",\")\n    all_rows.append(current_row)\n    \ndf1 = pd.DataFrame(data=all_rows, columns = ['s_adj','age','unit','sex','geo_time'])\n\ndf1.head()","a04a9d59":"# Merging with original Dataframe\n\ndata_df = pd.concat([df1,df.iloc[:,1:]],axis=1)\ndata_df.head()","083b58f9":"# Let us consider 10 years data. So we will select columns till 2010M01\n\ndata_df = data_df.loc[:,'s_adj':'2010M01 ']\n\ndata_df.head()","f305f5d0":"data_df = data_df.rename(columns={'geo_time': \"Country_code\"})\ndata_df.head()","0e92baeb":"# Import Country Codes Dataset","7fa23232":"countries = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"countries-list\", \"countries_list.csv\"))\ncountries.head()","cdad64b1":"# Merge original dataframe with country codes dataframe\n\ndata_df_merged = data_df.merge(countries, on=\"Country_code\")\ndata_df_merged.head()","cff9fa34":"import seaborn as sns","b30c1b59":"data_df_merged = pd.read_csv(os.path.join(\"\/kaggle\", \"input\", \"original-dataset-with-countries\", \"Unemployment_Data.csv\"))\ndata_df_merged.head()","f2b20ea1":"data_tr_df = data_df_merged.melt(id_vars=[\"Country\", \"age\", \"unit\", \"sex\", \"s_adj\", \"Country_code\"], \n        var_name=\"Date\", \n        value_name=\"Value\")\n\ndata_tr_df.head()","09023e70":"data_tr_df.shape","8b5b41dc":"# First let us clean the data. We remove values which have spaces and non-digit values","e0395d9c":"import re\n\nfor i in range(len(data_tr_df['Value'].values)):\n    data_tr_df['Value'].values[i] = re.sub(r\"[a-zA-Z: ]\", \"\", data_tr_df['Value'].values[i])\n    data_tr_df['Value'].values[i] = data_tr_df['Value'].values[i].replace(\" \",\"\")\n    ","a7d3df2a":"# Country-wise\n# Let us visualize for one country first. Let's say Austria\n\ncountry_data = data_tr_df[(data_tr_df['Country']=='Austria') & (data_tr_df['age']=='Y25-74') & (data_tr_df['sex']=='T') & (data_tr_df['s_adj']=='TC') & (data_tr_df['unit']=='PC_ACT')]\ncountry_data = country_data.loc[:,['Date','Value']]\nprint(country_data.shape)\ncountry_data.head()","229782c1":"plt.figure(figsize=(20, 12))\ncountries = data_tr_df['Country'].unique()\nfor country in countries:\n    country_data = data_tr_df[(data_tr_df['Country']==country) & (data_tr_df['age']=='Y25-74') & (data_tr_df['sex']=='T') & (data_tr_df['s_adj']=='TC') & (data_tr_df['unit']=='PC_ACT')]\n    country_data = country_data.loc[:,['Date','Value']]\n    plt.plot(country_data['Date'].values, country_data['Value'].values, label=country)\n\nplt.xticks(rotation=90)\nplt.xlabel('Date')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate for Age Group 25-74 country-wise')\nplt.legend()\nplt.show()","68857fbb":"# It is difficult to get proper insights","43cfeefe":"# Let's split the Date column into Year and Month and then we'll group by Year to get aggregated Unemployment Count","724d4a66":"data_tr_df[['Year','Month']] = data_tr_df['Date'].str.split(\"M\",expand=True)\ndata_tr_df.head()","75add7a6":"data_tr_df.dtypes","a6a7f62f":"# Converting Value to Float Data Type\ndata_tr_df['Value'] = pd.to_numeric(data_tr_df['Value'])","d2b8c43c":"data_tr_df.head()","00255977":"# Group by Year - to get overall unemployment count for all the countries","1b5bf1fd":"data_tr_df_year = data_tr_df.groupby('Year').sum()","c9c1f454":"data_tr_df_year.head()","157e702c":"plt.figure(figsize=(30, 12))\n\nplt.plot(data_tr_df_year.index, data_tr_df_year.values)\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate overall for last 5 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","586a98d7":"# Group by Year and Country - to get overall unemployment count for country-wise","2c2c9c8e":"data_tr_df_country = data_tr_df.groupby(['Country','Year']).sum().reset_index()","cb033186":"data_tr_df_country.head()","5bd90495":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ncountries = data_tr_df_country['Country'].unique()\n\nfor country in countries:\n    df_ = data_tr_df_country[data_tr_df_country['Country']==country]\n    plt.plot(df_['Year'], df_['Value'], label=country)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(country))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate overall for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","55f0a032":"# Group by Year and Gender","4503890b":"data_tr_df_sex = data_tr_df.groupby(['sex','Year']).sum().reset_index()","cb3eb928":"data_tr_df_sex.head()","f6274b21":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ngenders = data_tr_df_sex['sex'].unique()\n\nfor gender in genders:\n    df_ = data_tr_df_sex[data_tr_df_sex['sex']==gender]\n    plt.plot(df_['Year'], df_['Value'], label=gender)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(gender))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Gender-wise for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","5059db4a":"# Group by Age and Year","4f938c31":"data_tr_df_age = data_tr_df.groupby(['age','Year']).sum().reset_index()\ndata_tr_df_age.head()","cdde782f":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\nages = data_tr_df_age['age'].unique()\n\nfor age in ages:\n    df_ = data_tr_df_age[data_tr_df_age['age']==age]\n    plt.plot(df_['Year'], df_['Value'], label=age)\n    ax.text(max(df_['Year']), (df_.loc[df_['Year']==max(df_['Year']), 'Value']), str(age))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Age-wise for last 10 years')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","78d11697":"# Group by Year, Month and Country","6c9b8149":"data_tr_df_year_month_country = data_tr_df.groupby(['Country','Year','Month']).sum().reset_index()\ndata_tr_df_year_month_country.head()","b7aca6b9":"# Now let's plot for 2019 and 2020 only\n\ndata_tr_df_year_month_country_last_two_years = data_tr_df_year_month_country[(data_tr_df_year_month_country['Year']=='2019') | (data_tr_df_year_month_country['Year']=='2020')]\n\ndata_tr_df_year_month_country_last_two_years.head()","eb16a49a":"data_tr_df_year_month_country_last_two_years['Year_Month'] = data_tr_df_year_month_country_last_two_years['Year'] + 'M' + data_tr_df_year_month_country_last_two_years['Month']\ndata_tr_df_year_month_country_last_two_years.head()","f967052a":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\ncountries = data_tr_df_year_month_country_last_two_years['Country'].unique()\n\nfor country in countries:\n    df_ = data_tr_df_year_month_country_last_two_years[data_tr_df_year_month_country_last_two_years['Country']==country]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=country)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(country))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Country-wise for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","12cc8caf":"# Group by Country, Age, Year and Month\ndata_tr_df_year_month_country_age = data_tr_df.groupby(['Country','Year','Month','age']).sum().reset_index()","9cbc3253":"data_tr_df_year_month_country_age","8cdb01fb":"# Let us focus on United States for now\n\ndata_tr_df_year_month_country_age = data_tr_df_year_month_country_age[(data_tr_df_year_month_country_age['Country']=='United States') & ((data_tr_df_year_month_country_age['Year']=='2020') | (data_tr_df_year_month_country_age['Year']=='2019'))]\ndata_tr_df_year_month_country_age","8bf3325d":"data_tr_df_year_month_country_age['Year_Month'] = data_tr_df_year_month_country_age['Year'] + 'M' + data_tr_df_year_month_country_age['Month']","feeff244":"data_tr_df_year_month_country_age = data_tr_df_year_month_country_age.loc[:,['Year_Month','age','Value']]","4b072feb":"data_tr_df_year_month_country_age","32fe592d":"f, ax = plt.subplots(1,1, figsize=(20,12))\n\nages = data_tr_df_year_month_country_age['age'].unique()\n\nfor age in ages:\n    df_ = data_tr_df_year_month_country_age[data_tr_df_year_month_country_age['age']==age]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=age)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(age))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Age-wise for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","dc1b86e3":"#grouping by age and gender for United states and for year 2019-20\ndata_age_gen_year_month = data_tr_df.groupby(['Country','Year','Month','age','sex']).sum().reset_index()\ndata_age_gen_year_month = data_age_gen_year_month[(data_age_gen_year_month['Country']=='United States') & ((data_age_gen_year_month['Year']=='2020') | (data_age_gen_year_month['Year']=='2019'))]\n\ndata_age_gen_year_month","0ff3c32c":"#combining year and month together in a new column\ndata_age_gen_year_month['Year_Month']=data_age_gen_year_month['Year']+'M'+data_age_gen_year_month['Month']\ndata_age_gen_year_month = data_age_gen_year_month.loc[:,[\"Year_Month\", \"age\", \"sex\", \"Value\"]]\nprint(data_age_gen_year_month)","688553c3":"f, ax = plt.subplots(1,1, figsize=(12,10))\n\nsexes = data_age_gen_year_month['sex'].unique()\ndf1= data_age_gen_year_month[data_age_gen_year_month['age']=='TOTAL']\n\nfor sex in sexes:\n    df_ = df1[df1['sex']==sex]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=sex)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(sex))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Gender-wise for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","9c2380cf":"#among age group of less than 25 year olds\nf, ax = plt.subplots(1,1, figsize=(12,10))\n\nsexes = data_age_gen_year_month['sex'].unique()\ndf1= data_age_gen_year_month[data_age_gen_year_month['age']=='Y_LT25']\n\nfor sex in sexes:\n    df_ = df1[df1['sex']==sex]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=sex)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(sex))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Gender-wise among age group of <25yrs for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","8566c659":"#among 25 to 74 year olds\nf, ax = plt.subplots(1,1, figsize=(12,10))\n\nsexes = data_age_gen_year_month['sex'].unique()\ndf1= data_age_gen_year_month[data_age_gen_year_month['age']=='Y25-74']\n\nfor sex in sexes:\n    df_ = df1[df1['sex']==sex]\n    \n    plt.plot(df_['Year_Month'], df_['Value'], label=sex)\n    ax.text(max(df_['Year_Month']), (df_.loc[df_['Year_Month']==max(df_['Year_Month']), 'Value']), str(sex))\n\nplt.xticks(rotation=90)\nplt.xlabel('Year')\nplt.ylabel('Unemployment Count')\nplt.title('Unemployment Rate Gender-wise among age group 25-74 yrs for 2019-2020')\nplt.legend(loc=\"upper left\", bbox_to_anchor=(1,1))\nplt.yscale(\"linear\")\nplt.show()","5d365ed3":"### We can now visualize the last 10 years unemployment rate Country-wise, Age-wise and Gender-wise","8ccab484":"# Import Libraries","984e6d9b":"Among age group of 25 to 74 year olds, it has been observed that:\n\nMarch 2020- rate of increase in unemployment for women was slighty steeper than men such that by the end of March, there were a bit more unemployed women than men\n\nApril 2020 - unemployment rate started to decrease for both men and women. The rate of decrease was more steeper for men than women initially. However in the mid-April rate of decrease became less steep for men while it remained same for women\n\nMay 2020 - The rate of decrease became more steeper for women and remained same for men\n\nJune 2020 - unemplyment count\/month for men was slightly greater than that of men","ce253fde":"United States have shown some rise in Unemployment Count in this year","fb28e4e3":"As oberved above among the age group of less than 25 year olds, it has been observed that:\n\nMarch 2020- rate of increase in unemployment for women was more steeper than men such that by the end of March, there were significantly more unemployed women than men\n\nApril 2020 - unemployment rate started to decrease for women while it was still increasing for men in a much slower rate till the end of month \n\nMay 2020 - unemployment rate started to decrease for men in the same rate as that of women.\n\nJune 2020 - unemplyment count\/month for women still remained greater than that of men","440c68bd":"United States did massive lay-offs in April 2020","922645c2":"# Frequency Distribution","cd8b5c79":"### For month-wise visualization, we first need to convert the dataframe to a pivot dataset for time-series data","e5c02872":"It can be oberved that by the end of March 2020 more number of women lost their jobs than men. Therefore it can be said that women suffered unemployment more than men during March-April period (when COVID-19 pandemic started) ","f5af7d7d":"Most affected age group is 25-74","0e0c870b":"As observed above Unemployment count\/month for men was already higher than that of women till March 2020.\n\nMarch 2020- A huge jump in unemployment rate was observed. Unmployment rate increased more steeply for women than men. By the end of March, unemployment count for women was greater than men. \n\nApril 2020- Unemployment rate decreased for both genders in the same rate till the end of the month.\n\nMay 2020- Unemployment rate decreased even more for women will it remeained same for men.\n\nJune 2020- Unemployment count\/month for women became marginally greater than men"}}