{"cell_type":{"ef62bbb0":"code","00560432":"code","0bbf0414":"code","721e9c5f":"code","b368c286":"code","c8011066":"code","39ee12ed":"code","ddc50fee":"code","9b2c657a":"code","2c8262d0":"code","fca1e9c1":"code","a7904645":"code","155e1c52":"code","5b945cc4":"code","94e7e4e3":"code","a0fa70a9":"code","071d1409":"code","03322b6b":"code","9f8ee253":"code","1274956e":"code","36230902":"code","9a0284a0":"code","90f9a58c":"code","0e39b1ec":"code","eacf3ead":"code","6cba9833":"markdown","4f838708":"markdown","2f083e24":"markdown","cb8c1c41":"markdown","2bc74f39":"markdown","23ec642f":"markdown","7d3a5503":"markdown","bf3c03fa":"markdown","f63c12ae":"markdown","c8ade4ba":"markdown","2ae0f6bf":"markdown","4f9ba73c":"markdown","ae2d4016":"markdown","61f87ab2":"markdown","39ad6d2c":"markdown","d37102f7":"markdown","af4f4e26":"markdown","69137a95":"markdown","c8072817":"markdown","b87f9ab2":"markdown","ab62c2aa":"markdown","3a01f9d1":"markdown","22ce746b":"markdown","7057d587":"markdown","ca3ad8de":"markdown","471ba5c0":"markdown","8a79d64b":"markdown"},"source":{"ef62bbb0":"\nfrom sklearn.preprocessing import LabelEncoder\nimport lightgbm as lgb\nfrom sklearn import metrics\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\ndata = pd.read_csv('..\/input\/kickstarter-projects\/ks-projects-201801.csv',\n                 parse_dates=['deadline', 'launched'])\n#Printing kickstarter data columns\nlist(data.columns)","00560432":"\nlist(data.state.unique())","0bbf0414":"\ndata = data.query('state != \"live\"')\ndata = data.assign(isSuccessful = (data['state']=='successful').astype(int))\nnop = len(data)\nnos = len(data.query('isSuccessful == 1'))\nros = nos\/nop\nprint(\"Number of projects: \", nop, \" number of successful projects: \" ,nos, \" ratio of success: \", ros)\n","721e9c5f":"data = data.assign(lhour=data.launched.dt.hour,\n               lday=data.launched.dt.day,\n               lmonth=data.launched.dt.month,\n               lyear=data.launched.dt.year)","b368c286":"data = data[(data['launched'] >= '2009-04-28')]","c8011066":"data = data.assign(dhour=data.deadline.dt.hour,\n               dday=data.deadline.dt.day,\n               dmonth=data.deadline.dt.month,\n               dyear=data.deadline.dt.year)","39ee12ed":"data = data.assign(total_year= data.dyear-data.lyear)\ndata = data.assign(total_month = data.total_year*12 + (data.dmonth-data.lmonth))\ndata = data.assign(total_day = data.total_month * 30 + (data.dday - data.lday))\ndata = data.assign(total_hour = data.total_day * 24 + (data.dhour - data.lhour))","ddc50fee":"data = data.query('total_hour >= 0')\ndata","9b2c657a":"low = data['goal'].quantile(0.3)\nmid = data['goal'].quantile(0.6)\nhigh = data['goal'].quantile(0.9)\n\nconditions = [(data['goal']<low),((data['goal']>=low) & (data['goal']<mid)),((data['goal']>=mid) & (data['goal']<high)),(data['goal']>=high)]\ntags = ['t0_low', 't1_medium','t2_high','t3_extreme']\n\ndata = data.assign(categorical_goal = np.select(conditions,tags))\n","2c8262d0":"low = data['backers'].quantile(0.3)\nmid = data['backers'].quantile(0.6)\nhigh = data['backers'].quantile(0.9)\n\n\nconditions = [(data['backers']<low),((data['backers']>=low) & (data['backers']<mid)),((data['backers']>=mid) & (data['backers']<high)),(data['backers']>=high)]\ntags = ['t0_low', 't1_medium','t2_high','t3_extreme']\n\ndata = data.assign(categorical_backers = np.select(conditions,tags))\n\ndata.head()","fca1e9c1":"groupableData = data.drop(columns = ['ID', 'name','goal','backers', 'deadline','dyear','lyear','dmonth','lmonth','dday','lday','dhour','lhour','launched','usd_goal_real','pledged','state','usd_pledged_real','usd pledged'])\ngroupableData","a7904645":"mainCategorySuccess = groupableData[['main_category','isSuccessful']]\nmainCategorySuccess = mainCategorySuccess.groupby(['main_category']).mean().sort_values(by=['isSuccessful'], ascending = False)\nmainCategorySuccess","155e1c52":"categorySuccess = groupableData[['category','isSuccessful']]\ncategorySuccess = categorySuccess.groupby(['category']).mean().sort_values(by=['isSuccessful'], ascending = False)\ncategorySuccess","5b945cc4":"currencySuccess = groupableData[['currency','isSuccessful']]\ncurrencySuccess = currencySuccess.groupby(['currency']).mean()\ncurrencySuccess","94e7e4e3":"countrySuccess = groupableData[['country','isSuccessful']]\ncountrySuccess = countrySuccess.groupby(['country']).mean()\ncountrySuccess","a0fa70a9":"goalSuccess = groupableData[['categorical_goal','isSuccessful']]\ngoalSuccess = goalSuccess.groupby(['categorical_goal']).mean()\ngoalSuccess.plot()","071d1409":"backerSuccess = groupableData[['categorical_backers','isSuccessful']]\nbackerSuccess = backerSuccess.groupby(['categorical_backers']).mean()\nbackerSuccess.plot()","03322b6b":"yearSuccess = groupableData[['total_year','isSuccessful']]\nyearSuccess = yearSuccess.groupby(['total_year']).mean()\nyearSuccess.plot()","9f8ee253":"monthSuccess = groupableData[['total_month','isSuccessful']]\nmonthSuccess = monthSuccess.groupby(['total_month']).mean()\nmonthSuccess.plot()","1274956e":"daySuccess = groupableData[['total_day','isSuccessful']]\ndaySuccess = daySuccess.groupby(['total_day']).mean()\ndaySuccess.plot()","36230902":"hourSuccess = groupableData[['total_hour','isSuccessful']]\nhourSuccess = hourSuccess.groupby(['total_hour']).mean()\nhourSuccess.plot()","9a0284a0":"encoder = LabelEncoder()\ndata = groupableData.apply(encoder.fit_transform)\n\ndata","90f9a58c":"frac = 0.1\nsize = int(len(data)*frac)\n\ntrainSet = data[:-2*size]\nvalidationSet = data[-2*size: -size]\ntestSet = data[-size:]","0e39b1ec":"features = trainSet.columns.drop('isSuccessful')\n\ndtrain = lgb.Dataset(trainSet[features], label=trainSet['isSuccessful'])\ndvalid = lgb.Dataset(validationSet[features], label=validationSet['isSuccessful'])\n\nparam = {'num_leaves': 64, 'objective': 'binary'}\nparam['metric'] = 'auc'\nnum_round = 1000\nbst = lgb.train(param, dtrain, num_round, valid_sets=[dvalid], early_stopping_rounds=10, verbose_eval=False)","eacf3ead":"ypred = bst.predict(testSet[features])\nscore = metrics.roc_auc_score(testSet['isSuccessful'], ypred)\n\nprint(f\"Test AUC score: {score}\")","6cba9833":"80% of the total data is selected as \"trainSet\"\n10% of the total data is selected as \"validationSet\"\n10% of the total data is selected as \"testSet\"","4f838708":"### Quantity > Quality\n\nA lot of people giving some money is better than some people giving alot of money. Because people attract more people.","2f083e24":"### Is Currency relevant to success?\n\nSome currencies have higher chances of success but does this mean anything?\n\nCurrencies like Euro and USD are valid in wide regions, which does not tell much, we could go into a little bit more detail without forgetting about currencies","cb8c1c41":"# Make predictions\n","2bc74f39":"# Analyzing the Kickstarter Dataset\nGoal of this notebook is to generate new features using the given ones to find correlation between features and the success rate of the kickstarter projects","23ec642f":"Printing different states for a given project","7d3a5503":"# Splitting data into test, train, validation sets","bf3c03fa":"### Setting up high goals is a good thing?\n\nThere is a obvious negative correlation between amount of cash aimed and success rate. So don't be too _greedy_ when creating a kickstarter project.","f63c12ae":"## Adding another column to turn \"backers\" into categorical data","c8ade4ba":"### Kickstarter is founded in 2009\nThis means any project launched before 28.04.2009(DD\/MM\/YYYY, sorry I don't use weird date formats) will be dropped.","2ae0f6bf":"### Training a model","4f9ba73c":"> # Getting rid of some columns which are not relevant","ae2d4016":"### Checking which main categories are more likely to succeed\n\nAs it can be observed below, projects related to entertaintment have higher chances to succeed.","61f87ab2":"Dropping \"isSuccessful\" column to seperate features (isSuccessful is the result, not a feature)","39ad6d2c":"### Plotting success rate related to total time passed","d37102f7":"# Encoding categorical data","af4f4e26":"### What about countries?\n\nSome countries in EU-Zone have higher tendency to provide\/get support for kickstarter projects than others","69137a95":"- \"Name\" of the project _could_ have a effect on the success of the project but it would need high resources to identify (NLP\/semantic analysis)\n- \"Goal\" will be changed with \"categorical_goal\" so it is dropped.\n- \"Backers\" will be changed with \"categorical_backers\" so it is dropped.\n- Any date info will be changed with lifetime of the project so they are dropped.\n- Total pledged money means success for finished projects but it can be used to make predictions about ongoing projects, which is not our case","c8072817":"Selecting 30th, 60th and 90th percentiles to let us fit our numeric daha into categories.\nAny value which is lower  from 30th percentile of the values will be labeled as \"low\"\nAnd value which is between 30th and 60th percentile of our data will be labeled as \"medium\"\nAnd value which have between 60th and 90th percentile of our data will be labeled as \"high\"\nAnd any value higher than this will be labeled as \"extreme\"","b87f9ab2":"### Changing percentiles and creating more labels could lead to better predictions","ab62c2aa":"### Will I succeed after 40 years?\nNo.","3a01f9d1":"## Adding a new column to turn \"goal\" data into categorical data\nTurning \"goal\" and \"backers\" into categorical data helps us to analyze their effects on the success rate with ease because we will have a more generic opinion about them.\nFor example we could have two projects with just 1 dollar goal difference, this small change could feint our model into making wrong decisions and could lead to some over-fitting problems. Grouping numeric features with high range and non-uniform distribution will lead to clear understanding of their effects on success rate.","22ce746b":"# Manipulating the data to give it more meaning\nThere are 6 different states for projects, we are not interested in \"live\" projects for our analysis (they are yet to be labeled as successful or failed)\n\nGrouping projects into Successful and Unsuccessful projects\n\nDropping live projects to focus on the finished projects","7057d587":"## Calculating the time from launch until deadline\nIdea is to find a correlation between life time of the project and their success rate","ca3ad8de":"# **Loading necessary libraries and the data**","471ba5c0":"## Can you have negative lifespan?\nNo. Then remove it.","8a79d64b":"### Checking which categories are more likely to succeed\n\nData below somewhat contradict our main categories. This could help us to define some feature which we could not define only with our main categories."}}