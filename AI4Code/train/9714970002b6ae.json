{"cell_type":{"ac149db5":"code","c9dcac16":"code","e8e6f275":"code","d7a2bb2b":"code","0760b87b":"code","ce64ccee":"code","61df8b5b":"code","fc48b73d":"code","c0e1757e":"code","9d8112eb":"code","35608692":"code","173961bf":"code","9f6ba1fc":"code","a6a62199":"code","b6819c57":"code","a01d89a6":"code","783978b0":"code","9783285f":"code","3be6ec36":"code","b4b65e4e":"code","f3cfc0aa":"code","8f3bb307":"code","04c54c9f":"code","b3139cf3":"code","718c16ca":"code","28c955fe":"code","135d736d":"code","760681e0":"code","26ff3bd9":"code","a63c6a32":"code","87fb785e":"code","27254385":"code","1cbb2247":"code","8879899a":"markdown","c6c0ef98":"markdown","37ae6214":"markdown","202221a6":"markdown","3503b7de":"markdown","313143f7":"markdown","31e2280c":"markdown","b6410a33":"markdown","63b7a5d6":"markdown","9db18216":"markdown","4063b132":"markdown","b4ff0348":"markdown","097705cc":"markdown","6e18efd5":"markdown","2ca5bccd":"markdown","806fcf8b":"markdown","43d413af":"markdown","fd709599":"markdown","c2674723":"markdown"},"source":{"ac149db5":"%matplotlib inline\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport geopandas as gpd\nplt.style.use('seaborn')\n\n# Importing CSV file\ndf = pd.read_csv('..\/input\/apartment-rental-offers-in-germany\/immo_data.csv')\ndf = df.copy()","c9dcac16":"# Renaming the columns and dropping the columns I won't use\ndf.rename(columns={'regio1': 'Land', 'serviceCharge': 'Nebenkosten',\n                   'heatingType': 'Heizung','telekomTvOffer': 'TV_incl',\n                   'newlyConst': 'New_const', 'balcony':'Balkon',\n                   'pricetrend': 'Preis Entwicklung', 'totalRent': 'Warmmiete',\n                   'yearConstructed' : 'Bau_jahr', 'noParkSpaces': 'Park_spaces_num',\n                   'firingTypes': 'Heizungsart', 'hasKitchen': 'Einbauk\u00fcche',\n                   'cellar': 'Keller', 'baseRent': 'Kaltmiete',\n                   'livingSpace': 'Living_space', 'condition': 'Zustand',\n                   'interiorQual': 'Int_quality', 'petsAllowed': 'Haustiere',\n                   'lift': 'Lift', 'typeOfFlat': 'Wohnungstyp', 'noRooms': 'Zimmer_num',\n                   'thermalChar':'Energieeffizienzklasse', 'floor': 'Stock',\n                   'numberOfFloors': 'St\u00f6cke_num', 'garden': 'Garten', 'regio2': 'Stadt',\n                   'regio3': 'Stadt_Teil', 'description': 'Description',\n                   'facilities': 'Facilities', 'heatingCosts': 'Heizungskosten',\n                   'lastRefurbish': 'Sanierungsjahr'\n                  }, inplace=True)\n\ndf = df.drop(columns=['telekomHybridUploadSpeed', 'picturecount', 'telekomUploadSpeed',\n                      'geo_bln', 'yearConstructedRange', 'houseNumber', 'geo_krs',\n                      'street', 'streetPlain', 'baseRentRange', 'geo_plz','noRoomsRange', \n                      'livingSpaceRange', 'energyEfficiencyClass','electricityBasePrice',\n                      'electricityKwhPrice', 'Sanierungsjahr', 'Park_spaces_num', 'Haustiere',\n                      'TV_incl'])","e8e6f275":"# Selecting NRW\ndf = df[df[\"Land\"] == \"Nordrhein_Westfalen\"]","d7a2bb2b":"# These 3 columns represent the TotalRent, BaseRent and HeatingCosts\ndf_miete = df.loc[:, [\"Warmmiete\", \"Kaltmiete\", \"Heizungskosten\"]]\ndf_miete.info()\n\n# Normally we should use the TotalRent column as Price column but,\n# because we have a lot of missing values in the HeatingCosts column it is impossible to determine the TotalRent\n# without loosing the data.","0760b87b":"# Let's see what we have there\ndf.Kaltmiete.describe()","ce64ccee":"# Filtering the unrealistic values\ndf = df[(df['Kaltmiete'] > 100) & (df['Kaltmiete'] < 6000)]\ndf = df[(df['Living_space'] > 10) & (df['Living_space'] < 460)]","61df8b5b":"df['Price_m2'] = (df['Kaltmiete'] \/ df['Living_space']).round()","fc48b73d":"df.Price_m2","c0e1757e":"df_city = df[df[\"Stadt\"].str.contains(r\"[Kk]reis\") == False]\ndf_pv = df_city.pivot_table(values='Kaltmiete', index='Stadt', aggfunc=(np.mean)).reset_index()\ndf_pv = df_pv.sort_values(by=['Kaltmiete'], ascending=False)\ndf_pv['Kaltmiete'] = df_pv['Kaltmiete'].astype(int)","9d8112eb":"sns.set_style('white')\n\nfig = plt.subplots(figsize=(12, 10))\nax = sns.barplot(x='Kaltmiete',\n                 y='Stadt',\n                 data=df_pv,\n                 orient='h',\n                 palette='pastel')\n\n# Setting the annotation on the top of the barchart\nn = 0\nfor land, value in df_pv.iterrows():\n    ax.text(x=value[1],  # where to put the text on the x coordinates\n            y=n,  # where to put the text on the y coordinates\n            s=value[1],  # value to text\n            fontsize=12,  # fontsize\n            horizontalalignment='left',  # center the text to be more pleasant\n            verticalalignment='center')\n    n += 1\n\nax.tick_params(axis='x', labelsize=10, labelbottom=False)\nax.tick_params(axis='y', labelsize=10, bottom='off')\nax.set_title('Mean price by city in NRW', fontsize=16)\n\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(True)\nax.spines['bottom'].set_visible(False)\n\n\nax.set_ylabel('Cities', fontsize=12)\nax.set_xlabel('Mean rental price, \u20ac', fontsize=12)\nplt.tight_layout()\n\nplt.show()","35608692":"df_pv_m2 = df_city.pivot_table(values='Price_m2', index='Stadt', aggfunc=(np.mean)).reset_index()\ndf_pv_m2 = df_pv_m2.sort_values(by=['Price_m2'], ascending=False)\ndf_pv_m2['Price_m2'] = df_pv_m2['Price_m2'].astype(int)\n\nfig = plt.subplots(figsize=(14, 6))\nax = sns.barplot(x='Stadt', y='Price_m2', data=df_pv_m2.head(10), orient='v')\n\n# Setting the annotation on the top of the barchart\nn = 0\nfor land, value in df_pv_m2.head(10).iterrows():\n    ax.text(y=value[1] + 0.5,  # where to put the text on the x coordinates\n            x=n,  # where to put the text on the y coordinates\n            s=value[1],  # value to text\n            fontsize=12,  # fontsize\n            horizontalalignment='center',  # center the text to be more pleasant\n            verticalalignment='center')\n    n += 1\n\nax.tick_params(axis='x', labelsize=10, labelbottom=True)\nax.tick_params(axis='y', labelsize=10, left=\"off\")\nax.set_xlabel('City')\nax.set_title('Mean price by city in NRW', fontsize=16)\n\nax.tick_params(axis='x', labelsize=10)\nax.set_title('Mean rental price in top 10 NRW cities, \u20ac\/m2 ', fontsize=16)\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['bottom'].set_visible(True)\nax.yaxis.set_visible(False)\n\n\nplt.show()","173961bf":"df_pv.tail()","9f6ba1fc":"sns.set_style('white')\n\nfig = plt.subplots(figsize=(12, 10))\nmy_order = df.groupby(by=['Stadt'])['Kaltmiete'].count().sort_values(ascending=False).index\nax = sns.barplot(x='Kaltmiete',\n                 y='Stadt',\n                 data=df_pv,\n                 orient='h',\n                 palette='pastel')\n\n# Setting the annotation on the top of the barchart\nn = 0\nfor land, value in df_pv.iterrows():\n    ax.text(x=value[1],  # where to put the text on the x coordinates\n            y=n,  # where to put the text on the y coordinates\n            s=value[1],  # value to text\n            fontsize=12,  # fontsize\n            horizontalalignment='left',  # center the text to be more pleasant\n            verticalalignment='center')\n    n += 1\n\n\nax.tick_params(axis='x', labelsize=10, labelbottom=False)\nax.tick_params(axis='y', labelsize=10, bottom='off')\nax.set_title('The number of offers per city in NRW', fontsize=16)\n\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(True)\nax.spines['bottom'].set_visible(False)\n\n\nax.set_ylabel('Cities', fontsize=12)\nax.set_xlabel('Offers', fontsize=12)\nplt.tight_layout()\n\nplt.show()","a6a62199":"# Selecting the values for Cologne\ndf_koeln = df.loc[df.Stadt == \"K\u00f6ln\"].copy()\n\n# Transforming the Kaltmiete column to integer format\ndf_koeln['Kaltmiete'] = df_koeln['Kaltmiete'].astype(int)","b6819c57":"sns.set_style('whitegrid')\nfig = plt.subplots(figsize=(20, 8))\n\nmy_order = df_koeln.groupby(by=['Stadt_Teil'])['Kaltmiete'].median().sort_values(ascending=False).index\nax = sns.boxplot(x='Stadt_Teil',\n                 y='Kaltmiete',\n                 data=df_koeln,\n                 order=my_order,\n                 showfliers=False)\n\nax.tick_params(axis='x', labelrotation=90, labelsize=14)\nax.tick_params(axis='y', labelsize=12)\nax.set_title('Rental price distribution by borough', fontsize=16)\n\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['bottom'].set_visible(True)\n\nax.set_xlabel('Borough', fontsize=12)\nax.set_ylabel('Rental price, \u20ac', fontsize=12)\nplt.show()","a01d89a6":"# GeoJson data from the opensource\nurl = 'https:\/\/geoportal.stadt-koeln.de\/arcgis\/rest\/services\/Stadtgliederung_15\/MapServer\/1\/query?where=objectid+is+not+null&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=pjson'","783978b0":"# Creating a pivot table with the mean rental price and renaming a column\npv_koeln_m = df_koeln.pivot_table(values='Kaltmiete',\n                                  index='Stadt_Teil',\n                                  aggfunc=(np.mean)).reset_index()\npv_koeln_m.rename(columns={'Stadt_Teil': 'NAME'}, inplace=True)","9783285f":"# Reading GeoJson in a DataFrame\npik = gpd.read_file(url)\n\n# Reading the data with the Postal Cod for each K\u00f6ln's borough available on Wikipedia\nplz = pd.read_csv(\"..\/input\/koeln-data-borough\/KOELN_DATA.csv\")\n\n# Fixing some data differences and creating a df with boroughs and the mean price per borough\npv_koeln_m.iloc[0, pv_koeln_m.columns.get_loc('NAME')] = 'Altstadt-S\u00fcd'\npv_koeln_m.iloc[1, pv_koeln_m.columns.get_loc('NAME')] = 'Altstadt-Nord'\npv_koeln_m.iloc[42, pv_koeln_m.columns.get_loc('NAME')] = \"Marienburg (K\u00f6ln)\"\n\nkm1 = pv_koeln_m.iloc[0, pv_koeln_m.columns.get_loc('Kaltmiete')]\nkm2 = pv_koeln_m.iloc[1, pv_koeln_m.columns.get_loc('Kaltmiete')]\n\nnr_1 = pd.DataFrame({'NAME':'Neustadt-S\u00fcd', 'Kaltmiete':km1,}, index =[0])\nnr_2 = pd.DataFrame({'NAME':'Neustadt-Nord', 'Kaltmiete':km2,}, index =[0])\n\nc_new_df = pd.concat([nr_1, pv_koeln_m]).reset_index(drop = True) \nc_new_df = pd.concat([nr_2, pv_koeln_m]).reset_index(drop = True) \n\nc_new_df.head()","3be6ec36":"# Merging data with the borough code with the mean price data\ndf_concat = pd.merge(left=c_new_df, right=plz, on='NAME', how='outer')","b4b65e4e":"# Fixing some data types problems\ndf_concat.NUMMER = df_concat.NUMMER.astype(str)\n\n# Merging data with the borough code and mean price with the geographical data\ncologne_df = pd.merge(right=df_concat, left=pik, on='NUMMER', how='outer')\n\n# Filling the borough without any information with 0 values\ncologne_df.Kaltmiete.fillna(0, inplace=True)","f3cfc0aa":"# Reading and fixing the geodata\ncol_cp = gpd.read_file('..\/input\/geodata\/Stadtbezirk.shp', dtype={'plz': str})\ncol_cp.rename(columns={'STB_NR': 'NR_STADTBEZIRK'}, inplace=True)\ncol_cp","8f3bb307":"# There is a backspace in the columns names and it gives us an error\ndf_concat.columns = df_concat.columns.str.strip()\n\n# Fixing data types\ndf_con_mean = df_concat.groupby('NR_STADTBEZIRK').mean().reset_index()\ndf_con_mean.columns = df_con_mean.columns.str.strip()\ndf_con_mean.NR_STADTBEZIRK = df_con_mean.NR_STADTBEZIRK.astype(str)\ncol_cp.NR_STADTBEZIRK = col_cp.NR_STADTBEZIRK.astype(str)","04c54c9f":"# Merging the geaodata for 9 borough and the mean price\ncol_cp_df = pd.merge(right=df_con_mean,\n                     left=col_cp,\n                     on='NR_STADTBEZIRK',\n                     how='outer')\ncol_cp_df.Kaltmiete = col_cp_df.Kaltmiete.round().astype(int)\n\ncol_cp_df","b3139cf3":"# Setting the borough's names position on the map\ncologne_boroughs = {\n    'Innenstadt': (2355500, 5644800),\n    'Rodenkirchen': (2355000, 5638000),\n    'Lindenthal': (2350000, 5644000),\n    'Ehrenfeld': (2351000, 5648000),\n    'Nippes': (2355000, 5650000),\n    'Chorweiler': (2350000, 5655000),\n    'Porz': (2365000, 5638000),\n    'Kalk': (2361000, 5650000),\n    'M\u00fclheim':(2363000, 5644000)\n}","718c16ca":"# Plotting\nfig, ax = plt.subplots(1, figsize=(12, 12))\n\ncol_cp_df.plot(\n    ax=ax,\n    column='Kaltmiete',\n    categorical=False,\n    legend=True,\n    legend_kwds={'title': 'Price interval, \u20ac', 'loc': 'upper right', 'title_fontsize':'13', 'fontsize':'12'},\n    scheme=\"User_Defined\",\n    classification_kwds={'bins':[800, 900, 1000]},\n    cmap='PuBu',\n    edgecolor='black',\n    alpha=0.8\n)\n\nfor c in cologne_boroughs.keys():\n    ax.text(\n        x=cologne_boroughs[c][0], \n        y=cologne_boroughs[c][1], \n        s=c, \n        fontsize=13, \n    )\n\n\nax.axis('off')\nax.set_title('The mean rental price in the 9 boroughs of K\u00f6ln 2019',\n             fontdict={'fontsize': '20', 'fontweight' : '3'})\n\nax.annotate('Immoscout24, 2019', \n            xy=(0.1, 0.15),\n            xycoords='figure fraction',\n            horizontalalignment='left',\n            verticalalignment='top',\n            fontsize=12,\n            color='#555555')\n\nplt.tight_layout()\nplt.show()","28c955fe":"cologne_boroughs = {\n    'Innenstadt': (6.960278, 50.936667),\n    'Rodenkirchen': (6.971111, 50.871389),\n    'Lindenthal': (6.91, 50.916111),\n    'Ehrenfeld': (6.88, 50.968389),\n    'Nippes': (6.948333, 50.974444),\n    'Chorweiler': (6.895639, 51.043778),\n    'Porz': (7.085278, 50.89000),\n    'Kalk': (7.018611, 50.945833),\n    'M\u00fclheim':(7.024167, 50.982222) \n}\n\n#Plotting the data\nfig, ax = plt.subplots(1, figsize=(12, 12))\n\ncologne_df.plot(\n    ax=ax,\n    column='Kaltmiete', \n    categorical=False, \n    legend=True,\n    legend_kwds={'title': 'Price interval, \u20ac', 'loc': 'upper right'},\n    cmap='autumn_r',\n    scheme=\"User_Defined\",\n    classification_kwds={'bins':[400, 650, 800, 900, 1000]},\n    alpha=0.75\n)\n\nfor c in cologne_boroughs.keys():\n    ax.text(\n        x=cologne_boroughs[c][0], \n        y=cologne_boroughs[c][1], \n        s=c, \n        fontsize=15,\n        ha='center',\n        alpha=0.7\n    )\n    \nax.axis('off')\nax.set_title('The mean rental price in K\u00f6ln 2019', fontdict={'fontsize': '20', 'fontweight' : '3'})\nax.annotate('Immoscout24, 2019', xy=(0.1, 0.15),  xycoords='figure fraction', horizontalalignment='left',\n            verticalalignment='top', fontsize=12, color='#555555')\n\nplt.tight_layout()\nplt.show()","135d736d":"# Pivot table Price vs Room's number\npv_koeln = df_koeln.pivot_table(values='Kaltmiete',\n                                index='Zimmer_num',\n                                aggfunc=(np.mean))\n\npv_koeln = pv_koeln.sort_values(by=['Zimmer_num'], ascending=True).round().reset_index()","760681e0":"# Plotting\nsns.set_style('white')\nfig = plt.subplots(figsize=(15, 6))\nax = sns.barplot(x='Zimmer_num', y='Kaltmiete', data=pv_koeln, palette='muted')\n\n# Setting the annotation on the top of the barchart\nfor zn, value in pv_koeln.iterrows():\n    ax.text(x=zn,  # where to put the text on the x coordinates\n            y=value[1]+20,  # where to put the text on the y coordinates\n            s=int(value[1]),  # value to text\n            fontsize=12,  # fontsize\n            horizontalalignment='center',  # center the text to be more pleasant\n            verticalalignment='baseline')\n\nax.tick_params(axis='x', labelsize=10)\nax.set_title('Mean rental price vs Rooms number', fontsize=16)\nax.spines['right'].set_visible(False)\nax.spines['top'].set_visible(False)\nax.spines['left'].set_visible(False)\nax.spines['bottom'].set_visible(True)\nax.yaxis.set_visible(False)\nax.set_xlabel('Number of rooms', fontsize=12)\n\nplt.tight_layout()\nplt.show()","26ff3bd9":"# Bining the rental column\nbins = [0, 30, 50, 80, 120, np.inf]\nnames = ['<30', '30-50', '50-80', '80-120', '>120']\ndf_koeln['Liv_space_cat'] = pd.cut(df_koeln['Living_space'], bins, labels=names)\n\n# Bining the rental column\nbins = [0, 1900, 1950, 2000, np.inf]\nnames = ['<1900', '1900-1950', '1950-2000', '>2000']\ndf_koeln['Bau_jahr'] = pd.cut(df_koeln['Bau_jahr'], bins, labels=names)","a63c6a32":"ls_pv = df_koeln.pivot_table(values='Kaltmiete',\n                             index='Liv_space_cat',\n                             aggfunc=(np.mean)).astype(int).reset_index()\n\nintq_pv = df_koeln.pivot_table(values='Kaltmiete',\n                               index='Int_quality',\n                               aggfunc=(np.mean)).sort_values(by='Kaltmiete').astype(int).reset_index()\n\nbj_pv = df_koeln.pivot_table(values='Kaltmiete',\n                             index='Bau_jahr',\n                             aggfunc=(np.mean)).sort_values(by='Bau_jahr').astype(int).reset_index()\n\nwt_pv = df_koeln.pivot_table(values='Kaltmiete',\n                             index='Wohnungstyp',\n                             aggfunc=(np.mean)).sort_values(by='Kaltmiete').astype(int).reset_index()","87fb785e":"# Plotting\nfig = plt.figure(figsize=(20, 12))\n\nax1 = fig.add_subplot(2, 2, 1)\nax2 = fig.add_subplot(2, 2, 2)\nax3 = fig.add_subplot(2, 2, 3)\nax4 = fig.add_subplot(2, 2, 4)\n\nax1.bar(ls_pv['Liv_space_cat'], ls_pv['Kaltmiete'], color=sns.color_palette('GnBu', 5))\nax2.bar(intq_pv['Int_quality'], intq_pv['Kaltmiete'], color=sns.color_palette('Accent', 4))\nax3.bar(bj_pv['Bau_jahr'], bj_pv['Kaltmiete'], color=sns.color_palette('OrRd', 4))\nax4.bar(wt_pv['Wohnungstyp'], wt_pv['Kaltmiete'], color=sns.color_palette('Accent', 10))\n\n# Setting the annotation on the top of the barchart\nfor zn, value in ls_pv.iterrows():\n    ax1.text(x=zn,  # where to put the text on the x coordinates\n            y=value[1]+20,  # where to put the text on the y coordinates\n            s=int(value[1]),  # value to text\n            fontsize=12,  # fontsize\n            horizontalalignment='center',  # center the text to be more pleasant\n            verticalalignment='baseline')\n\nfor zn, value in intq_pv.iterrows():\n    ax2.text(x=zn,\n             y=value[1]+20,\n             s=int(value[1]),\n             fontsize=12,\n             horizontalalignment='center',\n             verticalalignment='baseline')\n\nfor zn, value in bj_pv.iterrows():\n    ax3.text(x=zn,\n             y=value[1]+20,\n             s=int(value[1]),\n             fontsize=12,\n             horizontalalignment='center',\n             verticalalignment='baseline')\n\nfor zn, value in wt_pv.iterrows():\n    ax4.text(x=zn,\n             y=value[1]+20,\n             s=int(value[1]),\n             fontsize=12,\n             horizontalalignment='center',\n             verticalalignment='baseline')\n\nax1.set_title('Mean rental price vs Living space', fontsize=12)\nax2.set_title('Mean rental price vs Interior quality', fontsize=12)\nax3.set_title('Mean rental price vs Year built', fontsize=12)\nax4.set_title('Mean rental price vs Appartment type', fontsize=12)\n\nax1.spines['right'].set_visible(False)\nax1.spines['top'].set_visible(False)\nax1.spines['left'].set_visible(False)\nax1.spines['bottom'].set_visible(True)\nax1.yaxis.set_visible(False)\n\nax2.spines['right'].set_visible(False)\nax2.spines['top'].set_visible(False)\nax2.spines['left'].set_visible(False)\nax2.spines['bottom'].set_visible(True)\nax2.yaxis.set_visible(False)\n\nax3.spines['right'].set_visible(False)\nax3.spines['top'].set_visible(False)\nax3.spines['left'].set_visible(False)\nax3.spines['bottom'].set_visible(True)\nax3.yaxis.set_visible(False)\nax3.set_ylim(0,1500)\n\nax4.spines['right'].set_visible(False)\nax4.spines['top'].set_visible(False)\nax4.spines['left'].set_visible(False)\nax4.spines['bottom'].set_visible(True)\nax4.yaxis.set_visible(False)\nax4.tick_params(axis='x', labelrotation=90, labelsize=10)\n\nplt.show()","27254385":"# Factors' pivot tables\nbk_pv = df_koeln.pivot_table(values='Kaltmiete', index='Balkon', aggfunc=(np.mean)).astype(int).reset_index()\nek_pv = df_koeln.pivot_table(values='Kaltmiete', index='Einbauk\u00fcche', aggfunc=(np.mean)).astype(int).reset_index()\nkl_pv = df_koeln.pivot_table(values='Kaltmiete', index='Keller', aggfunc=(np.mean)).astype(int).reset_index()\ngt_pv = df_koeln.pivot_table(values='Kaltmiete', index='Garten', aggfunc=(np.mean)).astype(int).reset_index()","1cbb2247":"# Set up the matplotlib figure and plotting\nsns.set(style='white', palette='muted', color_codes=True)\n\nf, axes = plt.subplots(1, 4, figsize=(20, 5), sharex=False, sharey=False)\nsns.despine(left=True)\n\nax1 = sns.barplot(x='Balkon', y='Kaltmiete', data=bk_pv, ax=axes[0], palette=sns.color_palette('OrRd'))\nax2 = sns.barplot(x='Garten', y='Kaltmiete', data=gt_pv, ax=axes[1], palette=sns.color_palette('GnBu'))\nax3 = sns.barplot(x='Einbauk\u00fcche', y='Kaltmiete', data=ek_pv, ax=axes[2], palette=sns.color_palette('Accent'))\nax4 = sns.barplot(x='Keller', y='Kaltmiete', data=kl_pv, ax=axes[3], palette=sns.color_palette('Pastel1'))\n\n\ndef annotate(df, ax):\n    for index, row in df.iterrows():\n        ax.text(row[0], row[1]+10, row.Kaltmiete, color='black', ha='center')\n\n\nannotate(bk_pv, ax1)\nannotate(gt_pv, ax2)\nannotate(ek_pv, ax3)\nannotate(kl_pv, ax4)\n\nax1.set(yticks=[])\nax2.set(yticks=[])\nax3.set(yticks=[])\nax4.set(yticks=[])\n\nax2.set_ylabel('')\nax3.set_ylabel('')\nax4.set_ylabel('')\n\nplt.show()","8879899a":"<img src=https:\/\/upload.wikimedia.org\/wikipedia\/commons\/f\/f3\/Cologne_subdivisions.svg style='width:600px;height:500px'\/>","c6c0ef98":"<div style=\"text-align: justify\">\nAs far as we can trust the data, the presence of a balcony or a garden will significantly influence the price, it seems that it is a luxury to this kind of facilities. The price changes also if in there is a kitchen or not, the cheapest kitchen that you can buy in Cologne costs 500-1500\u20ac depending on the size, also for a student there is no reason to rent an apartment without furniture, for this reason the demand on furnished flats is higher. Cologne is a relative safe city and the people left their bicycles outside, it may be a reason for the insignificant difference between flats with and without a cellar. <\/div>","37ae6214":"Let's have a look a the map of the Colone city.","202221a6":"### 2. The real estate market analysis in the city of K\u00f6ln","3503b7de":"<div style=\"text-align: justify\"><i>\nIn this project we have analyzed the german real estate rental market with the focus on the local market of the K\u00f6ln city  , based on the information parsed from the website Immoscout24. We have analyzed the rental prices' range, the main factors of that are determining the mean rental price and the influence of the location on the mean rental price. <i><\/div>","313143f7":"Let's have a better look inside each borough.","31e2280c":"<div style=\"text-align: justify\">\nLiving in K\u00f6ln give me the opportunity to know the city and to posses some experience on this market. From here I will focus on the data from K\u00f6ln(Cologne).\n<\/div>","b6410a33":"<div style=\"text-align: justify\">\nAs we can see the most expensive cities are D\u00fcsseldorf(1056\u20ac), K\u00f6ln(979\u20ac), Bonn(926\u20ac) and M\u00fcnster(905\u20ac), which are the biggest and the most developed cities in NRW. Bielefeld, M\u00fclheim an der Rurh and Leverkusen are situated in the neighborhood of K\u00f6ln and D\u00fcsseldorf. The lowest prices we can notice in the cities like Gelsenkirchen(374\u20ac), an ex-mining city, where after the closing of the last charcoal mine the unemployment rate explode and the demand on the real estate market decrease. \n<\/div>","63b7a5d6":"<div style=\"text-align: justify\">\nAs we can see the right part of the city is cheaper than the left one. The most expensive boroughs are the Inenstadt(Center), Rodenkirchen(a city part where live the rich citizen of Cologne) and Lidenthal(the part where is situated the biggest city park) with the mean price 900-1200\u20ac. In the middle are Nippes and Ehrenfeld(parts of the old city with nice old houses and modern offices) with the mean price 800-900\u20ac. The cheapest boroughs are situated on the right part of the Rhein, Porz(an industrial part of the city with plants and pollution), M\u00fclheim and Kalk(populated mostly by migrants and students) and Chorweiler(big houses, mixed population, bad connection with the city center) with the mean price between 700-800\u20ac.\n<\/div>","9db18216":"### 1. The analysis of the Nordrhein Westfalen Region","4063b132":"<div style=\"text-align: justify\">\nWe can see a big number of offer in the cities like D\u00fcsseldorf, Dortmund and Duisburg and it is big because these cities have a big number of suburbs. And we can see also a many offers in the cities like Gelsenkirchen because the real estate offer is bigger than the demand.\n<\/div>","b4ff0348":"* There is a clear relationship between the Leaving space and the mean price, but however these difference seems to be significant for the flats with living spaces bigger than 50 m2.\n* The Interior quality also influence the mean price, there is no big difference in the price between \"simple\" and \"normal\" quality so I think these two types can be combined in one group. The difference between \"normal\", \"sophisticated\" and luxury is significant 300\u20ac and 700\u20ac.\n* The Year built also influence the rental price, the most expensive flats are situated in the old buildings that are more that 120 years old, mostly they are protected from the city as monuments and the look very \"German\" the most of them are situated in the city center. The building that are younger that 20 years are also expensive, these is related with the low maintenance costs in comparison with the buildings with an old infrastructure. ","097705cc":"<div style=\"text-align: justify\">\nAs we can see inside each borough the prices are also different, the most expensive streets are situated in the Rodenkirchen and Innenstadt, with the prices between 1000-1640\u20ac. In the boroughs like Kakl and Porz it is possible to find a flat even for 400-650\u20ac.<\/div>","6e18efd5":"## The Real Estate Market in Germany\n<div style=\"text-align: justify\">\nThe purpose of the given project is the analysis of the market data and the elaboration of an  general overview of the german rental real estate market with the focus on the city of K\u00f6ln. We will analyze parsed data about the rental real estate offers to determine the price range, the factors of influence and the locations that may significantly influence the rental price.<\/div>","2ca5bccd":"Because I live in the NRW region and I am familiar with this region I will focus my analysis on this region.","806fcf8b":"<div style=\"text-align: justify\">\nAs we can see the difference between 1 and 2 rooms is nearly 200\u20ac, between 2 and 3 is nearly 300\u20ac. For each additional room the \"b\u00fcrger\"(citizen) of Cologne are ready to pay additional 200-300\u20ac. <\/div>","43d413af":"<div style=\"text-align: justify\">\nThe city has 9 boroughs: Innenstadt, Rodenkirchen, Lindenthal, Ehrenfeld, Nippes, Chorweiler, Porz, Kalk and M\u00fclheim. The locals called K\u00f6ln just the city parts that are on the left of the river.  Also there are situated all the sights and green areas of the city. The right part of the city is mostly populated from migrants and students. Let's see if there is a price difference between these two parts. \n<\/div>","fd709599":"### 3.  Factors' analysis","c2674723":"<div style=\"text-align: justify\">\nAs we can see the difference between the highest an the lowest median price is nearly 1000\u20ac. It will be better to have a look on the price distribution on the map.\n<\/div>"}}