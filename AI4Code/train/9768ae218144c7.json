{"cell_type":{"adb5c8c2":"code","10428db1":"code","f8c337a7":"code","d8ea7dff":"code","81de5d2c":"code","787ae1d2":"code","756be41e":"code","7d810f29":"code","70846a7a":"code","50abd4b9":"code","4632b9d0":"code","bd5d6ae9":"code","e6c41868":"code","d671f274":"code","8d9bbc91":"code","b53b1aa6":"code","a7b3dd5f":"code","9a7652cb":"code","9c413957":"code","9279d82c":"code","e4f41827":"code","efba7c17":"code","7fd07535":"code","8ad98254":"code","ef2aca5e":"code","5b5e0734":"code","079afe0b":"code","56009e30":"code","f7eab8b9":"code","88b5d87e":"code","8abfdfbe":"code","fac5031a":"code","b4a63f25":"code","f6b2ef5e":"code","1f04bc93":"markdown","0f04ffb8":"markdown","270407e9":"markdown","af95827d":"markdown","d4922198":"markdown","0c78da7c":"markdown","9bed834a":"markdown","b3c3df6a":"markdown","eb5c79fc":"markdown","67e0c1a7":"markdown","22b6c601":"markdown"},"source":{"adb5c8c2":"#import\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt","10428db1":"#pandas\npd.set_option(\"display.max_rows\",500)\npd.set_option(\"display.max_columns\",500)","f8c337a7":"# data\ndata = pd.read_excel('\/kaggle\/input\/covid19\/dataset.xlsx')","d8ea7dff":"# data size\ndata.shape","81de5d2c":"# view data\ndata.head()","787ae1d2":"# understand data\ndata.describe(include=\"all\").T","756be41e":"#tamanho da base\nprint(data.shape)","7d810f29":"# check null\/nan\ndata_null=data.isna().sum()\n(data_null\/data.shape[0]*100).round(2)","70846a7a":"#collect columns with good data\ngood_columns = data_null[data_null==0].reset_index()\ngood_columns","50abd4b9":"#create a new dataframe with good columns\ndata1=data[good_columns['index']]\ndata1.head()","4632b9d0":"# check correlation\ndata1.corr()","bd5d6ae9":"# check correlation with graphcs...\nax = sns.heatmap(data1.corr().round(2), annot=True)\nplt.show()","e6c41868":"# grouping data by result to check balance\ndata.groupby(\"SARS-Cov-2 exam result\").count()","d671f274":"data[['Patient ID','SARS-Cov-2 exam result']].groupby(\"SARS-Cov-2 exam result\").count()","8d9bbc91":"#list datatype of columns\ndata.dtypes","b53b1aa6":"#create a list of columns with datatype == 'object'\nx1=[]\nfor c in data.columns:\n    x=data[c].dtype\n    if x == 'object' and c != 'Patient ID':\n        x1.append(c)\nprint(x1)","a7b3dd5f":"#check unique values on list\nfor a in x1:\n    print('analyzing column: ', a)\n    print(data[a].unique())\n    print()","9a7652cb":"#replace some datas\ndata=data.replace(['positive','negative','not_detected','detected','not_done','absent','N\u00e3o Realizado','present','normal'],\n                  [1,0,0,1,np.nan,0,np.nan,1,0])\ndata['Urine - Leukocytes'].replace('<1000', '999', inplace=True)\ndata['Urine - pH'] = data['Urine - pH'].astype(\"float64\")\ndata['Urine - Leukocytes'] = data['Urine - Leukocytes'].astype(\"float64\")\ndata['Urine - Urobilinogen'] = data['Urine - Urobilinogen'].astype(\"float64\")","9c413957":"#replace nan by 0\ndata = data.fillna(0)","9279d82c":"# Making dummies variable from categorical\n\n#create dataframe with dummies\ndata_dummies=pd.get_dummies(data[data.dtypes[(data.dtypes == \"object\")].drop(\"Patient ID\").index])\ndata_dummies.head()","e4f41827":"#create dataframe without dtypes object\ndata2=pd.concat([data[\"Patient ID\"], data[data.dtypes[(data.dtypes != \"object\")].index]], axis=1)","efba7c17":"#concate dummies with not-dummies and target\ndata=pd.concat([data_dummies,data2], axis=1)","7fd07535":"#check if have columns empty\ndata.describe(include=\"all\").T.round().sort_values('max', ascending=True)","8ad98254":"#remove columns without data\n\n#create a list of columns\nlist_empyt=data[data.sum()[(data.sum() == 0)].index].columns\nprint(list_empyt)","ef2aca5e":"#create a dataframe without empty data\ndata=data.drop(list_empyt,axis=1)\ndata.shape","5b5e0734":"#import\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import  classification_report, confusion_matrix","079afe0b":"# remove some columns\ndata1 = data.drop([\n    \"Patient ID\",\n    'Patient addmited to regular ward (1=yes, 0=no)',\n    'Patient addmited to semi-intensive unit (1=yes, 0=no)',\n    'Patient addmited to intensive care unit (1=yes, 0=no)'\n], axis=1)","56009e30":"# get target\ntarget = data['SARS-Cov-2 exam result']","f7eab8b9":"#get explanatory variable\nexpl = data1.drop(columns='SARS-Cov-2 exam result')","88b5d87e":"#split into training and testing\nX_treino, X_teste, Y_treino, Y_teste = train_test_split(expl, target, test_size=0.3, random_state=30)","8abfdfbe":"#fit model\nmodel_lr = LogisticRegression()\nmodel_lr.fit(X_treino, Y_treino)","fac5031a":"#check score training data\nprint(round(model_lr.score(X_treino, Y_treino)*100,2), '%')","b4a63f25":"#check score test data\nprint(round(model_lr.score(X_teste, Y_teste)*100,2),'%')","f6b2ef5e":"#check confusion matrix\n\nconfusion_matrix(Y_teste, model_lr.predict(X_teste))","1f04bc93":"## Diagnosis of COVID-19 and its clinical spectrum\n\n### AI and Data Science supporting clinical decisions (from 28th Mar to 1st Apr)\nLink: https:\/\/www.kaggle.com\/einsteindata4u\/covid19\n\n-------------------------------\n\n#### Background\n\nThe World Health Organization (WHO) characterized the COVID-19, caused by the SARS-CoV-2, as a pandemic on March 11, while the exponential increase in the number of cases was risking to overwhelm health systems around the world with a demand for ICU beds far above the existing capacity, with regions of Italy being prominent examples.\n\nBrazil recorded the first case of SARS-CoV-2 on February 26, and the virus transmission evolved from imported cases only, to local and finally community transmission very rapidly, with the federal government declaring nationwide community transmission on March 20.\n\nUntil March 27, the state of S\u00e3o Paulo had recorded 1,223 confirmed cases of COVID-19, with 68 related deaths, while the county of S\u00e3o Paulo, with a population of approximately 12 million people and where Hospital Israelita Albert Einstein is located, had 477 confirmed cases and 30 associated death, as of March 23. Both the state and the county of S\u00e3o Paulo decided to establish quarantine and social distancing measures, that will be enforced at least until early April, in an effort to slow the virus spread.\n\nOne of the motivations for this challenge is the fact that in the context of an overwhelmed health system with the possible limitation to perform tests for the detection of SARS-CoV-2, testing every case would be impractical and tests results could be delayed even if only a target subpopulation would be tested.\n\n\n#### Dataset\n\nThis dataset contains anonymized data from patients seen at the Hospital Israelita Albert Einstein, at S\u00e3o Paulo, Brazil, and who had samples collected to perform the SARS-CoV-2 RT-PCR and additional laboratory tests during a visit to the hospital.\n\nAll data were anonymized following the best international practices and recommendations. All clinical data were standardized to have a mean of zero and a unit standard deviation. ","0f04ffb8":"a lot of null\/missing values\n\nthere are features with 100% NULL","270407e9":"## Logistic Regression","af95827d":"# First try...\n\nWe will check the columns that have good datas and view if they have correlations...","d4922198":"## Data Preparation","0c78da7c":"The correlation with these columns is poor","9bed834a":"----------","b3c3df6a":"------------","eb5c79fc":">>> The base is not balanced","67e0c1a7":"# Second try...\n\nWe will check the data of all columns and do some steps:\n- fix it if necessary.\n- remove some columns with there are not relevance.\n- create dummy variable","22b6c601":"# Study Case - Einstein Data4u"}}