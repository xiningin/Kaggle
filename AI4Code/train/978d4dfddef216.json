{"cell_type":{"2ea5fc47":"code","967d499b":"code","2cf9027d":"code","56aab71b":"code","a77249ec":"code","211b0193":"code","cfc02e90":"code","c468a79e":"code","2ea713c0":"code","54c8da9f":"code","2a58468e":"code","d49fa3cc":"code","d45852dd":"code","36ae8e17":"code","48746fea":"code","c36540fb":"code","33883e0d":"code","4046740a":"code","880c5f87":"code","c713e64a":"code","588b2d0c":"code","83e972dd":"code","b608f39b":"code","48d6b94f":"code","c2723f87":"code","ef6f478e":"code","5a352e90":"code","ed24b5b8":"code","542c8f88":"code","ef40519e":"code","355fe92b":"code","c3afd41a":"code","532fc36e":"code","37739480":"code","c6b4cf3b":"code","d10ddf12":"code","67e1c2f8":"code","1822cf46":"code","f196a55c":"code","d4f7d26f":"code","a188cdcc":"code","49b66464":"code","aa641631":"code","2275e7a5":"code","82830449":"code","3c505fcb":"code","91e510a3":"code","13452103":"code","841f2812":"code","10aab3e3":"code","9e137691":"code","9ddf95ee":"code","ffc45c3e":"code","5f6617cd":"code","bad3adce":"code","05ee53a2":"code","dc602976":"code","1ad7e387":"code","9b978e28":"code","59aae393":"code","a9992d38":"code","fed6a8ae":"code","76117478":"code","67eea0fc":"code","da936079":"code","ec658b49":"code","24bb9081":"code","86417b48":"code","5f691e70":"code","0353bb0c":"code","a9a99aa1":"code","5d5878ff":"code","91a99dbf":"code","f3eb3564":"code","a8d1d5e8":"code","06336677":"code","7c82d0e0":"code","a0e9153d":"code","5f5fbae6":"code","bb59e46a":"code","15eecb02":"code","658bf63c":"code","afa96aaa":"code","03d28ed4":"code","e29f6f85":"code","57d76baf":"code","fa82f474":"code","344fbc73":"code","f70c04d6":"code","b3bb5b85":"code","af16067c":"markdown","bb24e474":"markdown","d6c8d295":"markdown","89518d91":"markdown","303fc30c":"markdown","86b8603a":"markdown","fae74c9b":"markdown","d25af776":"markdown","05dd4115":"markdown","e6f04980":"markdown","ccb03f66":"markdown","8bafa3d1":"markdown","b76cf59a":"markdown","1d9d03ff":"markdown","7ec18276":"markdown","73313293":"markdown"},"source":{"2ea5fc47":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","967d499b":"import seaborn as sns\nimport os","2cf9027d":"data = pd.read_csv(\"..\/input\/WA_Fn-UseC_-HR-Employee-Attrition.csv\")","56aab71b":"data.head(15).T","a77249ec":"data.dtypes","211b0193":"data.describe().T","cfc02e90":"data['Attrition'].value_counts()","c468a79e":"data.isnull().sum()","2ea713c0":"cor = data.corr()","54c8da9f":"cor","2a58468e":"data.shape","d49fa3cc":"data['Over18'].value_counts()","d45852dd":"data['StandardHours'].value_counts()","36ae8e17":"data['EmployeeCount'].value_counts()","48746fea":"data = data.drop(['EmployeeCount','StandardHours','Over18'],axis=1)","c36540fb":"data.shape","33883e0d":"plt.boxplot(data['Age'])\nplt.show()","4046740a":"plt.hist(data['Age'])\nplt.show()","880c5f87":"data['Age'].value_counts()","c713e64a":"data['Attrition'].value_counts()","588b2d0c":"data.head()","83e972dd":"data['BusinessTravel'].value_counts()","b608f39b":"plt.bar(data['BusinessTravel'],height= 1500)\nplt.show()","48d6b94f":"plt.boxplot(data['DailyRate'])\nplt.show()","c2723f87":"plt.hist(data['DailyRate'])\nplt.show()","ef6f478e":"plt.hist(data['DailyRate'])\nplt.yscale('log')\nplt.show()","5a352e90":"data['Department'].value_counts()","ed24b5b8":"plt.bar(data['Department'],height=1000)","542c8f88":"data['DistanceFromHome'].value_counts()","ef40519e":"plt.boxplot(data['DistanceFromHome'])\nplt.show()","355fe92b":"plt.hist(data['DistanceFromHome'])\nplt.show()","c3afd41a":"data['Education'].value_counts()","532fc36e":"data['EducationField'].value_counts()","37739480":"data['EmployeeNumber'].value_counts()","c6b4cf3b":"data = data.drop(['EmployeeNumber'],axis=1)","d10ddf12":"data.head().T","67e1c2f8":"plt.boxplot(data['HourlyRate'])\nplt.show()","1822cf46":"plt.figure(1)\nplt.subplot(1,3,1)\nplt.hist(data['HourlyRate'])\n\nplt.subplot(1,3,2)\nplt.hist(data['HourlyRate'])\nplt.yscale('log')\n\n\nplt.subplot(1,3,3)\nplt.hist(np.log(data['HourlyRate']))\nplt.show()","f196a55c":"data['JobRole'].value_counts()","d4f7d26f":"plt.boxplot(data['MonthlyIncome'])\nplt.show()","a188cdcc":"data['MonthlyIncome'].describe()","49b66464":"plt.hist(data['MonthlyIncome'])\nplt.show()","aa641631":"iqr = ((np.percentile(data['MonthlyIncome'],75))- (np.percentile(data['MonthlyIncome'],25)))\nlimit = ((np.percentile(data['MonthlyIncome'],75)) + (1.5*iqr))\ndata.loc[data['MonthlyIncome']>limit,'MonthlyIncome'] = np.median(data['MonthlyIncome'])","2275e7a5":"plt.boxplot(data['MonthlyRate'])\nplt.show()","82830449":"data['NumCompaniesWorked'].value_counts()","3c505fcb":"plt.hist(data['NumCompaniesWorked'])\nplt.show()","91e510a3":"data['OverTime'].value_counts()","13452103":"data['PercentSalaryHike'].value_counts()","841f2812":"plt.boxplot(data['PercentSalaryHike'])\nplt.show()","10aab3e3":"plt.hist(data['PercentSalaryHike'])\nplt.show()","9e137691":"plt.hist(np.log(data['PercentSalaryHike']))\nplt.yscale('log')\nplt.show()","9ddf95ee":"data['PerformanceRating'].value_counts()","ffc45c3e":"data['RelationshipSatisfaction'].value_counts()","5f6617cd":"data['StockOptionLevel'].value_counts()","bad3adce":"plt.hist(data['StockOptionLevel'])\nplt.show()","05ee53a2":"data['TotalWorkingYears'].value_counts()","dc602976":"plt.hist(data['TotalWorkingYears'])\nplt.show()","1ad7e387":"data['TrainingTimesLastYear'].value_counts()","9b978e28":"data['WorkLifeBalance'].value_counts()","59aae393":"data['YearsAtCompany'].value_counts()","a9992d38":"data['YearsInCurrentRole'].value_counts()","fed6a8ae":"plt.hist(data['YearsSinceLastPromotion'])\nplt.show()","76117478":"data['YearsSinceLastPromotion'].value_counts()","67eea0fc":"data['YearsWithCurrManager'].value_counts()","da936079":"data.head().T","ec658b49":"data.dtypes","24bb9081":"data.loc[data['Attrition']=='No','Attrition']=0\ndata.loc[data['Attrition']=='Yes','Attrition']=1","86417b48":"data.loc[data['BusinessTravel']=='Non-Travel','BusinessTravel']=0\ndata.loc[data['BusinessTravel']=='Travel_Rarely','BusinessTravel']=1\ndata.loc[data['BusinessTravel']=='Travel_Frequently','BusinessTravel']=2","5f691e70":"data.loc[data['OverTime']=='No','OverTime']=0\ndata.loc[data['OverTime']=='Yes','OverTime']=1","0353bb0c":"data.dtypes","a9a99aa1":"data = pd.get_dummies(data)","5d5878ff":"data.head(8).T","91a99dbf":"data = data.drop(['Department_Human Resources','EducationField_Life Sciences','Gender_Female','JobRole_Laboratory Technician','MaritalStatus_Divorced'],axis=1)","f3eb3564":"data.dtypes","a8d1d5e8":"data.shape","06336677":"features = list((data.drop(['Attrition'],axis=1)).columns)\ntarget = 'Attrition'\nprint(features)\nprint(target)\nprint(len(features))","7c82d0e0":"from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(data[features],data[target],test_size=0.3,random_state=1)","a0e9153d":"print(\"X_train:\",len(x_train))\nprint(\"X_test:\",len(x_test))\nprint(\"Y_train:\",len(y_train))\nprint(\"Y_test:\",len(y_test))","5f5fbae6":"y_test.value_counts()","bb59e46a":"from sklearn.ensemble import RandomForestClassifier\nrf = RandomForestClassifier(n_estimators=35,criterion=\"entropy\")\nrf.fit(x_train,y_train)","15eecb02":"from sklearn import metrics\nprint(\"Random Forest\")\nprint(\"Accuracy: \",rf.score(x_test,y_test))\ny_pred = rf.predict(x_test)\nprint(\"Precision: \",metrics.precision_score(y_test,y_pred))\nprint(\"Recall: \",metrics.recall_score(y_test,y_pred))\nprint(\"Confusion Matrix: \\n\",metrics.confusion_matrix(y_test,y_pred))","658bf63c":"majority_class = data[data['Attrition']==0]\nminority_class = data[data['Attrition']==1]\nprint(len(majority_class))\nprint(len(minority_class))","afa96aaa":"from sklearn.utils import resample\nminority_class_upsampled = resample(minority_class,replace=True,n_samples=1233,random_state=1)","03d28ed4":"data_balanced = pd.concat([majority_class,minority_class_upsampled])","e29f6f85":"data_balanced['Attrition'].value_counts()","57d76baf":"x_train1,x_test1,y_train1,y_test1 = train_test_split(data_balanced[features],data_balanced[target],test_size=0.3,random_state = 1)","fa82f474":"print('RandomForest')\nrf.fit(x_train1,y_train1)","344fbc73":"y_test1.value_counts()","f70c04d6":"print(\"Random Forest\")\nprint(\"Accuracy: \",rf.score(x_test1,y_test1))\ny_pred1 = rf.predict(x_test1)\nprint(\"Precision: \",metrics.precision_score(y_test1,y_pred1))\nprint(\"Recall: \",metrics.recall_score(y_test1,y_pred1))\nprint(\"Confusion Matrix: \\n\",metrics.confusion_matrix(y_test1,y_pred1))","b3bb5b85":"feature_importances = pd.DataFrame(rf.feature_importances_,\n                                   index = features,\n                                    columns=['importance']).sort_values('importance',ascending=False)\nfeature_importances","af16067c":"Business Travel","bb24e474":"NO Null values Present","d6c8d295":"AGE","89518d91":"Department","303fc30c":"Handle Imbalanced  Classes","86b8603a":"Attrition","fae74c9b":"as Over18 ,StandardHours and EmployeeCount have constant value so we can remove them","d25af776":"MonthlyIncome has some outliers , treating outliers now.","05dd4115":"Daily Rate","e6f04980":"Distance From Home","ccb03f66":"Education","8bafa3d1":"Bivariate Analysis","b76cf59a":"Label Encoding Attrition,BusinessTravel and OverTime","1d9d03ff":"Education Field","7ec18276":"so each employee has one unique EmployeeNumber","73313293":"Employee Number"}}