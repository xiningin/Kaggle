{"cell_type":{"9efc9f17":"code","ab50a0f0":"code","f659acfc":"code","8e9da6dd":"code","c8830b96":"code","094c18ae":"code","223a3bc1":"code","6849e8a7":"code","2df23af4":"code","653080aa":"code","2d03f534":"code","40700750":"code","dee22d6a":"code","e8249b50":"code","98785624":"code","e77bb839":"code","c55dd6d9":"code","9fa7f573":"code","fa0e4145":"code","de558436":"code","c39c59cf":"code","da458363":"code","a5b0a9cd":"code","0f0d6436":"code","690964e2":"markdown"},"source":{"9efc9f17":"!pip3 install calmap\n!pip3 install bar_chart_race\n!pip3 install pywaffle","ab50a0f0":"import pandas as pd \nimport numpy as np \nimport matplotlib.pyplot as plt \nimport calmap\nfrom datetime import datetime\nimport json\nimport requests\nplt.style.use('fivethirtyeight')\n%matplotlib inline\n\n#bar chart race\nimport bar_chart_race as bcr\n\n# Waffle Chart\nfrom pywaffle import Waffle\n\n# plotly\nimport plotly.express as px\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\nfrom plotly.subplots import make_subplots\nfrom plotly.offline import init_notebook_mode, iplot\n\n#geopandas\nimport geopandas as gpd\n\n\n# color pallette\ncnf, dth, rec, act = '#393e46', '#ff2e63', '#21bf73', '#fe9801'\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport os\n\ndef print_files():\n    for dirname, _, filenames in os.walk('\/kaggle\/input'):\n        for filename in filenames:\n            print(os.path.join(dirname, filename))","f659acfc":"print_files()","8e9da6dd":"covid_19_india = pd.read_csv('..\/input\/covid19-in-india\/covid_19_india.csv')","c8830b96":"covid_19_india.head()","094c18ae":"covid_19_india = covid_19_india.drop(['Sno','Time','ConfirmedIndianNational', 'ConfirmedForeignNational'], axis=1)\ncovid_19_india = covid_19_india.rename(columns={'State\/UnionTerritory':'States','Cured':'Recovered'})","223a3bc1":"covid_19_india['Active'] = covid_19_india['Confirmed'] - covid_19_india['Recovered'] - covid_19_india['Deaths']","6849e8a7":"covid_19_india = covid_19_india.sort_values(['Date', 'States']).reset_index(drop=True)\ncovid_19_india['Date'] = pd.to_datetime(covid_19_india['Date'])\n","2df23af4":"covid_19_india","653080aa":"india_wise_cases = covid_19_india[covid_19_india['Date'] == covid_19_india['Date'].max()].copy().fillna(0)\nindia_wise_cases.index = india_wise_cases[\"States\"]\nindia_wise_cases = india_wise_cases.drop(['States', 'Date'], axis=1)","2d03f534":"df = pd.DataFrame(pd.to_numeric(india_wise_cases.sum()),dtype=np.float64).transpose()\ndf.style.background_gradient(cmap='summer_r',axis=1)","40700750":"india_wise_cases.sort_values('Active', ascending= False).style\\\n    .background_gradient(cmap='BrBG_r', subset=['Confirmed'])\\\n    .background_gradient(cmap='YlGn_r', subset=[\"Deaths\"])\\\n    .background_gradient(cmap='YlOrBr',subset=['Recovered'])\\\n    .background_gradient(cmap='BuPu', subset=['Active'])","dee22d6a":"def horizontal_bar_chart(df, x, y, title, x_label, y_label, color):\n    fig = px.bar(df, x=x, y=y, orientation='h', title=title, \n                 labels={x.name: x_label,\n                         y.name: y_label}, color_discrete_sequence=[color])\n    fig.update_layout(yaxis={'categoryorder': 'total ascending'})\n    fig.show()","e8249b50":"top_10_confirmed_states = india_wise_cases.sort_values('Confirmed', ascending=False)[:10]\nhorizontal_bar_chart(top_10_confirmed_states,top_10_confirmed_states.Confirmed, top_10_confirmed_states.index,\n                     'Top 10 States with most confirmed cases', 'Number of Confirmed cases (in Thousands)','State Name',cnf)","98785624":"top_10_death_states = india_wise_cases.sort_values('Deaths',ascending = False)[:10]\nhorizontal_bar_chart(top_10_death_states,top_10_death_states.Deaths, top_10_death_states.index, 'Top 10 States with most deaths','Number of deaths(In Thousands)','State Name',dth)","e77bb839":"last_date = covid_19_india['Date'].max()\nprint(last_date)","c55dd6d9":"df_last_date = covid_19_india[covid_19_india['Date'] == last_date]\nseries_last_date = df_last_date.groupby('States')['Confirmed'].sum().sort_values(ascending=False)\n\nlabels = []\nvalues = []\nstate_count = 5\nother_total = 0\nfor state in series_last_date.index:\n    if state_count > 0:\n        labels.append(state)\n        values.append(series_last_date[state])\n        state_count -= 1\n    else:\n        other_total += series_last_date[state]\nlabels.append(\"Other\")\nvalues.append(other_total)\n\nwedge_dict = {\n    'edgecolor': 'black',\n    'linewidth': 1        \n}\n\nexplode = (0.2, 0, 0, 0, 0, 0)\nfig = plt.figure(figsize=(15,9))\nplt.title(f\"Total Cases on {last_date}\")\nplt.pie(values, labels=labels, explode=explode, autopct='%1.1f%%', wedgeprops=wedge_dict)\nplt.show()","9fa7f573":"fp = '..\/input\/india-2020-gisdata\/Igismap\/Indian_States.shp'\nmap_df = gpd.read_file(fp)\n# change state name to match in both files -- manually checked few\nmap_df['st_nm'].iloc[0]  = 'Andaman and Nicobar Islands'\nmap_df['st_nm'].iloc[12] = 'Jammu and Kashmir'\nmap_df['st_nm'].iloc[6] = 'Dadara and Nagar Havelli'\nmap_df['st_nm'].iloc[23] = 'Delhi'","fa0e4145":"merged = map_df.set_index('st_nm').join(covid_19_india.set_index('States'))\n\n#fill NaN values with Zero\n\nmerged[['Confirmed', 'Recovered', 'Deaths']] = merged[['Confirmed', 'Recovered', 'Deaths']].fillna(0).astype('int')","de558436":"fig, ax = plt.subplots(1, figsize=(23, 19))\nax.axis('on')\nax.set_title('Total COVID-19 cases in India', fontdict={'fontsize': '35', 'fontweight' : '5'})\n\n# plot the figure\nmerged.plot(column='Confirmed', cmap='Oranges', linewidth=0.8, ax=ax, edgecolor='0.8', legend=True)","c39c59cf":"fig, ax = plt.subplots(1, figsize=(23, 19))\nax.axis('on')\nax.set_title('Total Deaths due to COVID-19 in India', fontdict={'fontsize': '35', 'fontweight' : '5'})\n\n# plot the figure\nmerged.plot(column='Deaths', cmap='Blues', linewidth=0.8, ax=ax, edgecolor='0.8', legend=True)","da458363":"bcr_deaths = covid_19_india.pivot_table('Deaths',['Date'], 'States')\nbcr_deaths.sort_values(list(bcr_deaths.columns),inplace=True)\nbcr_deaths = bcr_deaths.sort_index()","a5b0a9cd":"bcr_deaths.head()","0f0d6436":"bcr.bar_chart_race(\n    df=bcr_deaths,\n    filename=None,\n    #filename='Deaths cases Bar Chart Race.mp4',\n    orientation='h',\n    sort='desc',\n    n_bars=10,\n    fixed_order=False,\n    fixed_max=True,\n    steps_per_period=10,\n    interpolate_period=False,\n    label_bars=True,\n    bar_size=.90,\n    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},\n    period_summary_func=lambda v, r: {'x': .99, 'y': .18,\n                                      's': f'Total Deaths Cases: {v.nlargest(10).sum():,.0f}',\n                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},\n    period_length=500,\n    figsize=(6,5),\n    dpi=144,\n    cmap='dark12',\n    title='Deaths due to Corona Virus by State.',\n    title_size='',\n    bar_label_size=7,\n    tick_label_size=5,\n    shared_fontdict={'family' : 'Helvetica','color' : '.1'},\n    scale='linear',\n    writer=None,\n    fig=None,\n    bar_kwargs={'alpha': .7},\n    filter_column_colors=True)","690964e2":"### **Bar chart Race**"}}