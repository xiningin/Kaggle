{"cell_type":{"7b82696e":"code","c0b95d4a":"code","0eb1cc99":"code","7cb54ac8":"code","d33fbeb8":"code","e8b71ed1":"code","8c377c98":"code","b438308a":"code","3d0ad353":"code","2ab441be":"code","94c81bd9":"code","6a9f840b":"code","f357fcaa":"code","47fec9fc":"code","566ad188":"code","3acef9e7":"code","cd407d6d":"code","40e449c8":"code","c81fa1ca":"code","d8b1f5a9":"code","01354317":"code","9b41a5b7":"code","3af4a598":"code","5a41a2ea":"code","d682b42a":"code","a9b503d3":"code","ca77ccc2":"code","6773fe4a":"code","a793c7ae":"code","b53f0028":"code","7d1dde57":"code","e05ed3f7":"code","cbc2b74c":"code","7c242a49":"code","a51d7f26":"code","34bf9875":"code","f302ab17":"code","cdd30e9f":"code","f514d7f6":"code","5f165919":"code","5ad6a641":"code","947a34c2":"code","69ecc625":"code","67ea3653":"code","edc4a64e":"code","b2e95866":"code","18dcbef2":"code","f2cd41d6":"code","849e4ec4":"code","937cf6a0":"code","5cf22584":"code","8e4f1e32":"code","649ecb4b":"code","7af5bd03":"code","0153e729":"code","5e0863d7":"code","e9490d73":"code","7c3c420a":"code","971c09be":"code","4f551c0d":"code","0ea1174e":"code","a9fb914a":"code","80d6ec0a":"markdown","1701d4a0":"markdown","f732f845":"markdown"},"source":{"7b82696e":"import warnings\nwarnings.filterwarnings('ignore')\nimport numpy as np\nimport pandas as pd \nimport seaborn as sns\nimport matplotlib.pyplot as plt","c0b95d4a":"df=pd.read_csv('\/kaggle\/input\/hotel-booking-demand\/hotel_bookings.csv')\ndf.head(10)","0eb1cc99":"df.tail(10)","7cb54ac8":"#df['arriavl_date']=pd.to_datetime(df['arrival_date_year']+df['arrival_date_month']+df['arrival_date_day_of_month'])","d33fbeb8":"print('shape of dataset',df.shape)\nprint('\\n')\nprint('size of dataset',df.size)","e8b71ed1":"df.info()","8c377c98":"df.describe().T","b438308a":"df.describe(include='object').T","3d0ad353":"df.isna().sum()","2ab441be":"cat=df.select_dtypes(include='object').columns\ncat","94c81bd9":"df=df.drop(['agent','company','reservation_status_date'],axis=1)","6a9f840b":"df['country'].mode()","f357fcaa":"df['country']=df['country'].replace(np.nan,'PRT')","47fec9fc":"df.isnull().sum()","566ad188":"sns.countplot(df['hotel'])\nplt.show()","3acef9e7":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['arrival_date_month'])\nplt.show()","cd407d6d":"\nsns.countplot(df['is_canceled'])\nplt.show()","40e449c8":"df.is_canceled.value_counts()","c81fa1ca":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['meal'])\nplt.show()","d8b1f5a9":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['market_segment'])\nplt.show()","01354317":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['distribution_channel'])\nplt.show()","9b41a5b7":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['reserved_room_type'])\nplt.show()","3af4a598":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['assigned_room_type'])\nplt.show()","5a41a2ea":"\nsns.countplot(df['deposit_type'])\nplt.show()","d682b42a":"\nsns.countplot(df['customer_type'])\nplt.show()","a9b503d3":"plt.figure(figsize=(15 ,10 ))\nsns.countplot(df['reservation_status'])\nplt.show()","ca77ccc2":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['reservation_status'],df['arrival_date_year'],)\nplt.show()","6773fe4a":"df.corr()","a793c7ae":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_year'],df['previous_cancellations'])\nplt.show()","b53f0028":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_year'],df['previous_bookings_not_canceled'])\nplt.show()","7d1dde57":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_month'],df['previous_cancellations'])\nplt.show()","e05ed3f7":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_month'],df['previous_bookings_not_canceled'])\nplt.show()","cbc2b74c":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_month'],df['is_canceled'])\nplt.show()","7c242a49":"plt.figure(figsize=(15 ,10 ))\nsns.barplot(df['arrival_date_year'],df['is_canceled'])\nplt.show()","a51d7f26":"cat","34bf9875":"df=pd.get_dummies(df,prefix=['hotel', 'arrival_date_month', 'meal', 'country', 'market_segment',\n       'distribution_channel', 'reserved_room_type', 'assigned_room_type',\n       'deposit_type', 'customer_type', 'reservation_status'])","f302ab17":"df.head()","cdd30e9f":"print('shape of dataset',df.shape)\nprint('\\n')\nprint('size of dataset',df.size)","f514d7f6":"for i in df.columns:\n    if (df[i].isnull().sum())!=0:\n        print(\"{} {}\".format(i, df[i].isnull().sum()))","5f165919":"df.children.mode()","5ad6a641":"df['children']=df['children'].replace(np.nan,'0')","947a34c2":"df['children']=df['children'].astype('int')","69ecc625":"df.corr()","67ea3653":"plt.figure(figsize=(25 ,20 ))\nsns.heatmap(df.corr())","edc4a64e":"from sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression","b2e95866":"X=df.drop('is_canceled',axis=1 )\ny=df['is_canceled']","18dcbef2":"LR=LogisticRegression()","f2cd41d6":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = .3, random_state=2)","849e4ec4":"LR.fit(X_train,y_train)","937cf6a0":"y_pred = LR.predict(X_test)\ny_pred","5cf22584":"from sklearn.metrics import confusion_matrix\nconfusion_matrix = confusion_matrix(y_test, y_pred)\nconfusion_matrix","8e4f1e32":"from sklearn.metrics import accuracy_score\n\naccuracy=accuracy_score(y_test, y_pred)\naccuracy ","649ecb4b":"import statsmodels.api as sm\nX=df.drop('is_canceled',axis=1 )\ny=df['is_canceled']","7af5bd03":"Xc=sm.add_constant(X)\nmodel=sm.OLS(y,X).fit()\nmodel.summary()","0153e729":"cols = X.columns.tolist()\n\nwhile len(cols)>0:\n    \n    x_1 = X[cols]\n    model = sm.OLS(y, x_1).fit()\n    p = pd.Series(model.pvalues.values, index = cols)\n    pmax = max(p)\n    feature_max_p = p.idxmax()\n    \n    if(pmax > 0.05):\n        cols.remove(feature_max_p)\n    else:\n        break","5e0863d7":"print(len(cols))\nprint(cols)","e9490d73":"X=df[cols]","7c3c420a":"X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = .3, random_state=2)","971c09be":"LR.fit(X_train,y_train)","4f551c0d":"y_pred1=LR.predict(X_test)\ny_pred1","0ea1174e":"from sklearn.metrics import confusion_matrix\nconfusion_matrix = confusion_matrix(y_test, y_pred1)\nconfusion_matrix","a9fb914a":"from sklearn.metrics import accuracy_score\n\naccuracy=accuracy_score(y_test, y_pred1)\naccuracy ","80d6ec0a":"### on ols","1701d4a0":"### converting categorical to numerical","f732f845":"### EDA"}}