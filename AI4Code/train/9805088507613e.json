{"cell_type":{"15411933":"code","fa9df2c9":"code","aabc8cf0":"code","bcf4851f":"code","5b95b83e":"code","32d31476":"code","c6409592":"code","3eeeeaf2":"code","a57c1bbd":"code","bfbcf6c1":"code","c6c4f1f8":"code","0706a801":"code","61e1b52c":"code","6303ccbe":"code","dc2bab40":"code","4e0cde7f":"code","22ae5c97":"code","5d273c11":"code","ffcaf472":"code","498b6218":"code","26e796bf":"code","a0f15b1c":"code","4d3ef4cd":"code","ba48a1f2":"code","de012405":"code","d7580bc1":"code","e7084db1":"code","359b77a9":"code","395e541a":"code","6807284d":"code","1d5f103b":"code","86379f21":"code","d8b34ae3":"code","7607eb27":"code","a5033f40":"code","b9589ce0":"code","9d255804":"code","429184cf":"code","e7cff350":"code","5db6d0db":"code","d163df1f":"code","01289f84":"code","78774256":"markdown","874801d8":"markdown","e66a5c0b":"markdown","d24970ad":"markdown","33140e42":"markdown","da2000ee":"markdown","88144922":"markdown","495df93d":"markdown","f6e95521":"markdown","937ebb5d":"markdown","f12ee944":"markdown","ed12299b":"markdown","e666314b":"markdown","7672c9b5":"markdown","80b90705":"markdown","286f4a0a":"markdown","df588b17":"markdown","ff6d79af":"markdown","ff009cc8":"markdown","9e34d7dd":"markdown","746da11f":"markdown","ec87f13c":"markdown","3d7e35c9":"markdown","c82a4248":"markdown","2280ac27":"markdown","ac7bac6a":"markdown","7cc115f6":"markdown","950787ce":"markdown","2115349f":"markdown","45c467e3":"markdown","95f765bc":"markdown","b80e5d0d":"markdown","ae1dd12d":"markdown","40e0df85":"markdown"},"source":{"15411933":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndata = pd.read_csv('..\/input\/Indicators.csv')\ndata.shape","fa9df2c9":"health_gdp_indicator_name = 'Health expenditure, total \\(% of GDP\\)'\nhealth_gdp_indicator_mask = data['IndicatorName'].str.contains(health_gdp_indicator_name)\nhealth_gdp_indicator_df = data[health_gdp_indicator_mask]\nhealth_gdp_indicator_df.head()","aabc8cf0":"print(health_gdp_indicator_df.Year.min(),' to ',health_gdp_indicator_df.Year.max())","bcf4851f":"death_indicator_name = 'Death rate, crude \\(per 1,000 people\\)'\ndeath_indicator_mask = data['IndicatorName'].str.contains(death_indicator_name)\ndeath_indicator_df = data[death_indicator_mask]\ndeath_indicator_df.head()","5b95b83e":"print(death_indicator_df.Year.min(),' to ',death_indicator_df.Year.max())","32d31476":"death_indicator_df_reduced = death_indicator_df[death_indicator_df['Year'] > 1994]","c6409592":"death_indicator_df_reduced.shape","3eeeeaf2":"health_gdp_indicator_df.shape","a57c1bbd":"len(death_indicator_df_reduced['CountryName'].unique().tolist())","bfbcf6c1":"len(health_gdp_indicator_df['CountryName'].unique().tolist())","c6c4f1f8":"countries1 = np.array(death_indicator_df_reduced['CountryName'].unique().tolist())\ncountries2 = np.array(health_gdp_indicator_df['CountryName'].unique().tolist())\nboth_countries = np.intersect1d(countries1, countries2)\n\ndt_country_mask = death_indicator_df_reduced['CountryName'].isin(both_countries)\nhg_country_mask = health_gdp_indicator_df['CountryName'].isin(both_countries)\n\ndeath_indicator_df_cropped = death_indicator_df_reduced[dt_country_mask]\nhealth_gdp_indicator_df_cropped = health_gdp_indicator_df[hg_country_mask]","0706a801":"len(death_indicator_df_cropped['CountryName'].unique().tolist())","61e1b52c":"len(health_gdp_indicator_df_cropped['CountryName'].unique().tolist())","6303ccbe":"death_indicator_df_cropped.shape","dc2bab40":"health_gdp_indicator_df_cropped.shape","4e0cde7f":"dt_year_count = death_indicator_df_cropped.groupby('Year').count()\ndt_year_count[['CountryName','CountryCode']]","22ae5c97":"hg_year_count = health_gdp_indicator_df_cropped.groupby('Year').count()\nhg_year_count[['CountryName','CountryCode']]","5d273c11":"def does_it_has_complete_history(country_name,df):\n    mask1 = df['CountryName'].str.contains(country_name) \n    mask2 = df['Year'].isin(df['Year'].unique().tolist())\n    # apply our mask\n    full = df[mask1 & mask2]\n    if len(full['Year']) == len(df['Year'].unique().tolist()):\n        return True\n    else:\n        return False\n\ndef does_the_country_increasing(country_name,df):\n    values = df[df.CountryName == country_name]['Value']\n    values = values[0::5] # only check the difference in 5 years span\n    if strictly_increasing(values):\n        return True\n    else:\n        return False\n\ndef does_the_country_decreasing(country_name,df):\n    values = df[df.CountryName == country_name]['Value']\n    values = values[0::5] # only check the difference in 5 years span\n    if strictly_decreasing(values):\n        return True\n    else:\n        return False\n\n#referenced from https:\/\/stackoverflow.com\/questions\/4983258\/python-how-to-check-list-monotonicity\ndef strictly_increasing(L):\n    return all(x<y for x, y in zip(L, L[1:]))\n\ndef strictly_decreasing(L):\n    return all(x>y for x, y in zip(L, L[1:]))","ffcaf472":"import warnings\nwarnings.filterwarnings(\"ignore\", 'This pattern has match groups') # need to silence this warning :)\n\ncountry_that_decreasing = []\ncountry_that_increasing = []\ncountry_that_has_history = []\nfor country in both_countries:\n    dt_has_history = does_it_has_complete_history(country,death_indicator_df_cropped)\n    hg_has_history = does_it_has_complete_history(country,health_gdp_indicator_df_cropped)\n    if dt_has_history & hg_has_history: # only country that exists on both dataframe\n        country_that_has_history.append(country)\n        hg_increasing = does_the_country_increasing(country, health_gdp_indicator_df_cropped)\n        if hg_increasing:\n            country_that_increasing.append(country)\n            hg_decreasing = does_the_country_decreasing(country, health_gdp_indicator_df_cropped)\n            if hg_decreasing:\n                country_that_decreasing.append(country)\n        \n    \n\n","498b6218":"len(country_that_increasing)","26e796bf":"len(country_that_decreasing)","a0f15b1c":"len(country_that_has_history)","4d3ef4cd":"mask = health_gdp_indicator_df_cropped['CountryName'].isin(country_that_increasing)\nhealth_gdp_indicator_df_cropped[mask].head(60)","ba48a1f2":"values = health_gdp_indicator_df_cropped[health_gdp_indicator_df_cropped.CountryName == 'Indonesia'][['Year','Value']]\nvalues","de012405":"values = death_indicator_df_cropped[death_indicator_df_cropped.CountryName == 'Indonesia'][['Year','Value']]\nvalues","d7580bc1":"# those that only increasing their health expenditure\ndt_country_mask_2 = death_indicator_df_cropped['CountryName'].isin(country_that_increasing)\nhg_country_mask_2 = health_gdp_indicator_df_cropped['CountryName'].isin(country_that_increasing)\n\ndeath_indicator_clean = death_indicator_df_cropped[dt_country_mask_2]\nhealth_gdp_indicator_clean = health_gdp_indicator_df_cropped[hg_country_mask_2]\n\n# all countries that has complete death rate and health expenditure history from 1995 to 2013\ndt_country_mask_3 = death_indicator_df_cropped['CountryName'].isin(country_that_has_history)\nhg_country_mask_3 = health_gdp_indicator_df_cropped['CountryName'].isin(country_that_has_history)\n\ndeath_indicator_all = death_indicator_df_cropped[dt_country_mask_3]\nhealth_gdp_indicator_all = health_gdp_indicator_df_cropped[hg_country_mask_3]","e7084db1":"death_indicator_clean.shape","359b77a9":"health_gdp_indicator_clean.shape","395e541a":"death_indicator_all.shape","6807284d":"health_gdp_indicator_all.shape","1d5f103b":"death_indicator_clean_years = death_indicator_clean.groupby('Year').count()\ndeath_indicator_clean_years[['CountryName','CountryCode']]","86379f21":"health_gdp_indicator_clean_years2 = health_gdp_indicator_clean.groupby('Year').count()\nhealth_gdp_indicator_clean_years2[['CountryName','CountryCode']]","d8b34ae3":"death_indicator_all_years = death_indicator_all.groupby('Year').count()\ndeath_indicator_all_years[['CountryName','CountryCode']]","7607eb27":"health_gdp_indicator_all_years2 = health_gdp_indicator_all.groupby('Year').count()\nhealth_gdp_indicator_all_years2[['CountryName','CountryCode']]","a5033f40":"health_gdp_indicator_all_mean = health_gdp_indicator_all.groupby('Year' , as_index=False).mean()\nplt.figure(1, figsize=(12, 5))\n# switch to a line plot\nplt.plot(health_gdp_indicator_all_mean['Year'].values, health_gdp_indicator_all_mean['Value'].values)\n# Label the axes\nplt.xlabel('Year')\nplt.ylabel(health_gdp_indicator_all.iloc[0].IndicatorName)\nplt.grid(color='gray', linewidth=0.2, axis='y', linestyle='solid')\n\n#label the figure\nplt.title('World\\'s yearly average of ' + health_gdp_indicator_all.iloc[0].IndicatorName )\n\n# to make more honest, start they y axis at 0\nplt.axis([1995, 2013,0,9])\nplt.show()","b9589ce0":"death_indicator_all_mean = death_indicator_all.groupby('Year' , as_index=False).mean()\nplt.figure(1, figsize=(12, 5))\n# switch to a line plot\nplt.plot(death_indicator_all_mean['Year'].values, death_indicator_all_mean['Value'].values)\n# Label the axes\nplt.xlabel('Year')\nplt.ylabel(death_indicator_all.iloc[0].IndicatorName)\nplt.grid(color='gray', linewidth=0.2, axis='y', linestyle='solid')\n\n#label the figure\nplt.title('World\\'s yearly average of  ' + death_indicator_all.iloc[0].IndicatorName)\n\n# to make more honest, start they y axis at 0\nplt.axis([1995, 2013,0,11])\nplt.show()","9d255804":"fig, axis = plt.subplots()\n# Grid lines, Xticks, Xlabel, Ylabel\n\naxis.yaxis.grid(True)\naxis.xaxis.grid(True)\naxis.set_title('Death rate vs. health expenditure (world yearly average)',fontsize=10)\naxis.set_xlabel('Yearly average of ' + health_gdp_indicator_all.iloc[0].IndicatorName,fontsize=10)\naxis.set_ylabel('Yearly average of ' + death_indicator_all.iloc[0].IndicatorName,fontsize=9)\n\nX = health_gdp_indicator_all_mean['Value']\nY = death_indicator_all_mean['Value']\n\nfig.dpi = 110\nfig.figsize = (10,5)\naxis.scatter(X, Y)\nplt.show()","429184cf":"np.corrcoef(health_gdp_indicator_all_mean['Value'],death_indicator_all_mean['Value'])","e7cff350":"death_indicator_clean_mean = death_indicator_clean.groupby('Year' , as_index=False).mean()\nplt.figure(1, figsize=(12, 5))\n# switch to a line plot\nplt.plot(death_indicator_clean_mean['Year'].values, death_indicator_clean_mean['Value'].values)\n# Label the axes\nplt.xlabel('Year')\nplt.ylabel(death_indicator_clean.iloc[0].IndicatorName)\nplt.grid(color='gray', linewidth=0.2, axis='y', linestyle='solid')\n\n#label the figure\nplt.title('Yearly average of ' + death_indicator_clean.iloc[0].IndicatorName + ' on country that increases its health expenditure')\n\n# to make more honest, start they y axis at 0\nplt.axis([1995, 2013,0,11])\nplt.show()","5db6d0db":"health_gdp_indicator_clean_mean = health_gdp_indicator_clean.groupby('Year' , as_index=False).mean()\nplt.figure(1, figsize=(12, 5))\n# switch to a line plot\nplt.plot(health_gdp_indicator_clean_mean['Year'].values, health_gdp_indicator_clean_mean['Value'].values)\n# Label the axes\nplt.xlabel('Year')\nplt.ylabel(health_gdp_indicator_clean.iloc[0].IndicatorName)\nplt.grid(color='gray', linewidth=0.2, axis='y', linestyle='solid')\n\n#label the figure\nplt.title('Yearly average of ' + health_gdp_indicator_clean.iloc[0].IndicatorName + ' on country that increases its health expenditure')\n\n# to make more honest, start they y axis at 0\nplt.axis([1995, 2013,0,9])\nplt.show()","d163df1f":"fig, axis = plt.subplots()\n# Grid lines, Xticks, Xlabel, Ylabel\n\naxis.yaxis.grid(True)\naxis.xaxis.grid(True)\naxis.set_title('Death rate vs. health expenditure yearly average on 57 countries',fontsize=10)\naxis.set_xlabel('Yearly average of ' + health_gdp_indicator_clean.iloc[0].IndicatorName,fontsize=10)\naxis.set_ylabel('Yearly average of ' + death_indicator_clean.iloc[0].IndicatorName,fontsize=9)\n\nX = health_gdp_indicator_clean_mean['Value']\nY = death_indicator_clean_mean['Value']\n\nfig.dpi = 110\nfig.figsize = (10,5)\naxis.scatter(X, Y)\nplt.show()","01289f84":"np.corrcoef(health_gdp_indicator_clean_mean['Value'],death_indicator_clean_mean['Value'])","78774256":"In the figure above, we see that most countries are increasing their health expenditure.\n\nOK now let's see if this also impacted the death rate on average:\n","874801d8":"**BINGO!!!**, now we have sychronized country indicator data for death rate and health expenditure","e66a5c0b":"On this project I will use World Indicator Datasets","d24970ad":"# Step 4. Report the findings","33140e42":"Positive, it also appears in death rate dataframe\n\nOK let's redo what we did before, but this time we use only countries that exists on both dataframes, and increasing its expenditure per 5 years","da2000ee":"It has a strong negative correlation, now let's see the relationship on those countries that actively increasing their health expenditure. If our main hypotesis is correct, then we should have a stronger negative correlation value.","88144922":"Now let's check which countries that exists on both datasets and the country is **increasing its health expenditure per 5 years**","495df93d":"*The crude death rate is the number of deaths occurring among the population of a given geographical area during a given year, per 1,000 mid-year total population of the given geographical area during the same year.*","f6e95521":"Hmmm.. the number of countries on each year is not always the same!\n\nThis means we have to find out which countries that have complete historical data from 1995 to 2013\n\nLet's define the helper functions first:","937ebb5d":"OK we got 192 countries.\n\nNow let's see which countries are actively increasing their health expenditure:","f12ee944":"# Step 3. Data analyzing & visualization","ed12299b":"OK now that we have the clean data, its time to analyze it","e666314b":"-0.97332126 Is a stronger negative relationship than the world average of -0.95838109","7672c9b5":"Let's find the world average health expenditure over time:","80b90705":"We need to find out the year range of this data:","286f4a0a":"lets see if we have same number of data now:","df588b17":"In the figure above, we can clearly see that on average, the death rate is also decreasing. let's see the correlation on scatter plot:","ff6d79af":"Oh no... we still have different number of rows, let's check if the data covers the whole period between 1995 to 2013 ","ff009cc8":"We need to clean up the data that we use for this research. these are the objectives:\n\n1. Data must be comparable, means that both death rate and health expenditure should have the same amount of data.\n2. We only use those countries that actively increasing their health expenditure. We will analyze if by increasing the health expenditure will also decreasing its death rate \/ mortality rate. We use 5 years span to reduce bias on fluctuating values of health expenditure. Why 5 years? https:\/\/en.wikipedia.org\/wiki\/First_five-year_plan","9e34d7dd":"# Step 2. Data preparation","746da11f":"We have 57 countries that actively increasing their health expenditure per 5 years.\n\nLet's check which countries are decreasing their health expenditure per 5 years:","ec87f13c":"Positive, Indonesia is increasing its health expenditure per 5 years, now lets check if it also appears in death rate data frame","3d7e35c9":"We have 0 countries that actively decreasing their health expenditure per 5 years. \n\nLet's check the number of countries that appear on both datasets. The countries can be a combination of those countries who are increasing, decreasing, or not significantly changing their health expenditure. We need this to calculate the world average health expenditure.","c82a4248":"Let's check which countries are actively increasing their health expenditure per 5 years:","2280ac27":"***1. The higher spending of health expenditure of a country leads to lower death rate on that country.***\n\n***2. Only 57 countries that actively increasing their health expenditure (per 5 years time)***\n\n***3. No country is decreasing their health expenditure (per 5 years time)***\n\n***4. On average, most countries are increasing their health expenditure over time***","ac7bac6a":"OK, we have different number of countries. So we need to find countries that exists in both dataframes, lets pick the countries","7cc115f6":"So we have different number of data between health GDP and the death rate, so we just use death indicator data above year 1994 to conduct this research","950787ce":"\nWe need to find out the year range of this data:\n","2115349f":"Let's draw a scatter plot of both data:","45c467e3":"OK now we have same number of countries in both data, let's call shape again to check number of rows:","95f765bc":"This look like a strong negative relationship. let's see the correlation:","b80e5d0d":"The data is still in different number of rows, lets check the number of countries\n","ae1dd12d":"Nice! My country... **Indonesia** is one of them, so lets do some sanity check here...\n\nLet's check if Indonesia is appear in both data frame, and has increasing value of health expenditure per 5 years:","40e0df85":"# Step 1. Acquiring the data"}}