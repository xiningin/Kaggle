{"cell_type":{"af9fc256":"code","77ac5d8c":"code","035ec6e4":"code","0c4aa4a2":"code","ae0ce2c1":"code","01b804b4":"code","0c7cede1":"markdown","9648294b":"markdown"},"source":{"af9fc256":"import os\nfrom IPython import display\nos.mkdir('..\/tmp')\nos.chdir('..\/tmp')\n\n# Clone repo\n!git clone https:\/\/github.com\/Megvii-BaseDetection\/YOLOX -q\n\n# Install requirments.txt    \n%cd YOLOX\n!pip install -U pip && pip install -r requirements.txt\n!pip install -v -e . \n\n# Download YoloX-S pretreined model\n!wget https:\/\/github.com\/Megvii-BaseDetection\/storage\/releases\/download\/0.0.1\/yolox_l.pth\n\n# Install COCO API    \n!pip install -Uqqq 'git+https:\/\/github.com\/cocodataset\/cocoapi.git#subdirectory=PythonAPI'    \ndisplay.clear_output()","77ac5d8c":"%%writefile cots_config.py\n\nimport os\nfrom yolox.exp import Exp as MyExp\n\nclass Exp(MyExp):\n    def __init__(self):\n        super(Exp, self).__init__()\n        self.depth = 0.33\n        self.width = 0.50\n        self.exp_name = os.path.split(os.path.realpath(__file__))[1].split(\".\")[0]\n        \n        # dirs\n        self.data_dir = '\/kaggle\/input\/cotscocostratifiedk5folds-4919-imgs\/dataset\/images'\n        self.train_ann = '\/kaggle\/input\/cotscocostratifiedk5folds-4919-imgs\/dataset\/images\/annotations\/train.json'\n        self.val_ann = '\/kaggle\/input\/cotscocostratifiedk5folds-4919-imgs\/dataset\/images\/annotations\/valid.json'\n        \n        self.input_size = (960, 960)\n        self.test_size = (960, 960)\n        self.num_classes = 1\n        \n        self.max_epoch = 37\n        self.data_num_workers = 2\n        self.eval_interval = 1\n        \n        # Augmentations\n        self.mosaic_prob = 1.0\n        self.mosaic_scale = (0.5, 1.5)\n        self.mixup_prob = 1.0\n        self.hsv_prob = 1.0\n        self.flip_prob = 0.5\n        self.no_aug_epochs = 2","035ec6e4":"%%writefile datasets\/voc_classes.py\n\nVOC_CLASSES = (\n  \"starfish\",\n)","0c4aa4a2":"%%writefile datasets\/coco_classes.py\n\nCOCO_CLASSES = (\n  \"starfish\",\n)","ae0ce2c1":"!python tools\/train.py \\\n    -f cots_config.py \\\n    -d 1 \\\n    -b 16 \\\n    --fp16 \\\n    -o \\\n    -c yolox_l.pth","01b804b4":"!cp -r YOLOX_outputs \/kaggle\/working","0c7cede1":"##### Clone YoloX Repo and Install Requirements","9648294b":"# Remarks\n\nFor best AP, please use v5 which is trained with \n- e=40,\n- mode = yolo-l\n- inputsize = 960x960\n- Foldings = StratifiedK\n- the result hyperparameters is default"}}