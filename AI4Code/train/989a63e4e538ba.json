{"cell_type":{"e1202583":"code","d036ce2e":"code","64a06d5d":"code","319df071":"code","70e8ef69":"code","33953d18":"code","5e5b25ab":"code","b407e0f5":"code","5779a0bd":"code","bd1127f9":"code","7ed12032":"code","45deda06":"code","dc2de71f":"code","927c9e0c":"code","16172325":"code","30ba4fc9":"code","e152957d":"code","350447c9":"markdown","be28ee29":"markdown","5f6069f0":"markdown","a6a34e23":"markdown","3fb461d3":"markdown","1194a935":"markdown","b14ff2dc":"markdown","aef9848f":"markdown","f3b94cd0":"markdown","200cfd12":"markdown","b24c8f9f":"markdown","858482e7":"markdown","fc6fbf15":"markdown"},"source":{"e1202583":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","d036ce2e":"df = pd.read_csv('\/kaggle\/input\/amazon-top-50-bestselling-books-2009-2019\/bestsellers with categories.csv')","64a06d5d":"df.info()","319df071":"import matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\nplt.figure(figsize=(16,4))\nsns.set_style('whitegrid')\nsns.set_palette('husl', 3)\n\nsns.countplot(x='Year', data=df, hue='Genre')\n\nplt.title('Number of book over Year by Genre')\nplt.show()\n","70e8ef69":"fig = plt.figure(figsize=(16,12))\ngs = fig.add_gridspec(3, 1)\n\nvar_list = ['Price', 'Reviews', 'User Rating']\n\nfor i, var in enumerate(var_list): \n    df_sub = pd.DataFrame(df.groupby(['Year', 'Genre'])[var].mean()).reset_index()\n    ax = fig.add_subplot(gs[i,0])\n    fig.subplots_adjust(hspace = 0.5)\n    sns.barplot(x='Year', y=df_sub[var], hue='Genre', data=df_sub, ax=ax)\n    ax.set_title(str(var)+' over Year by Genre')\n    \nplt.show()","33953d18":"df.set_index('Author', inplace=True)\ndf.drop_duplicates('Name', keep='last', inplace=True)\ndf.index","5e5b25ab":"W_Rating = []\nBook_Count = []\n\nfor author in df.index: \n    total_reviews = df.loc[author]['Reviews'].sum()\n    ps_rating= (df.loc[author]['Reviews']*df.loc[author]['User Rating']).sum()\n    W_Rating.append(ps_rating\/total_reviews)\n    \nlen(W_Rating)","b407e0f5":"df['W_Rating'] = W_Rating\ndf.reset_index()\ndf.head()","5779a0bd":"#Define function to count number of books an author has in best-selling list:\ndef count(list):\n    a = list.value_counts()\n    return len(a)\n\ndf_author = pd.DataFrame(pd.pivot_table(data=df, values=['W_Rating','Reviews', 'Price', 'Name'],index='Author', aggfunc={'W_Rating':np.mean, 'Reviews':np.sum, 'Price': np.mean, 'Name':count}))\ndf_author = df_author.reset_index()\ndf_author['Name']","bd1127f9":"plt.figure(figsize=(16,6))\n\n#Draw scatter plot:\nax = sns.scatterplot(x='W_Rating', y='Name', size='Reviews', sizes = (10, 200), data=df_author)\n\n#Annotate:\nfor line in range(0,df_author.shape[0]):\n     if df_author.Name[line] >= 4:\n            ax.text(df_author.W_Rating[line]+0.002, df_author.Name[line], df_author.Author[line], horizontalalignment='left', size=12, color='black', weight='light', rotation=30)\n    \nplt.xlabel('Weighted Rating')\nplt.ylabel('Number of best-selling books')        \nplt.title('Number of best-selling books and Weighted Rating by Authors')\nplt.show()","7ed12032":"df_author[df_author['Name']>=3].sort_values('Name', ascending=False)","45deda06":"df_author[df_author['Name']>=3].count()","dc2de71f":"df_author['Author'].nunique()","927c9e0c":"fig, axs = plt.subplots(1, 2, figsize=(16,6))\n\naxs[0].hist(x='Price', bins=10, data=df)\naxs[0].set_xlabel('Price')\naxs[0].set_ylabel('Num of books')\naxs[0].set_title('Price distribution')\n\naxs[1].hist(x='Reviews', bins=10, data=df, color='b')\naxs[1].set_xlabel('Reviews')\naxs[1].set_ylabel('Num of books')\naxs[1].set_title('Reviews distribution')\n\nplt.legend()\nplt.show()","16172325":"sns.scatterplot(x='Reviews', y='User Rating', hue='Genre', data=df)\n\nplt.title('Reviews and User Rating')\nplt.show()","30ba4fc9":"sns.scatterplot(x='Price', y='User Rating', hue='Genre', data=df)\n\nplt.title('Price and User Rating')\nplt.show()","e152957d":"fig, (ax1, ax2) = plt.subplots(1,2, figsize=(18, 6))\n\nax1.scatter(x='Reviews', y='W_Rating', color = 'b', data=df_author, label='Review')\nax1.legend()\nax2.scatter(x='Price', y='W_Rating', color = 'r', data=df_author, label='Price')\nax2.legend()\nplt.ylabel('Rating')\nplt.show()","350447c9":"# 5. Exploring Relationships between Variables when grouped by Author","be28ee29":"List of authors with at least 3 best-selling books:","5f6069f0":"**** Explore the relationship between Price and User Rating, compared between Genre:","a6a34e23":"# 4. Exploring Relationships between Variables accross the data set","3fb461d3":"**Conclusion**: \n1. Trends over years between genres\nPrice seems to decrease over year, especially for non-fiction books.\nNon-fiction books are more expensive than fiction books.\n\nFiction books, however, have more reviews than non-fiction. The gap between 2 genres however, has shrunk over year, caused by the increasing annual reviews for non-fiction and decreasing annual reviews for fiction.\n\n2. Author:\nAn author has 12 books being the best-selling accross all years.\nAmong all 248 best-selling authors, only 19 have at least 3 best-selling books.\n\nMost authors got about less than 50000 total reviews.  The author with more reviews tend to have higher user rating. \n\nMost authors's average book price is less than 20 USD. The more expensive the book price, the higher the average rating tend to be.","1194a935":"****Explore the distribution of Price","b14ff2dc":"**1.2 Averaged Price, Reviews and User Rating over Year by Genre**","aef9848f":"Q1: How many books do the best-selling authors have?","f3b94cd0":"****ax1: Explore the relationship between total reviews an author has and the average user rating for that author.\n\n****ax2: Explore the relationship between average price of an author's best-selling books and the average user rating for that author.","200cfd12":"# 1. Explore trend over year for each genre: \n\n**1.1 Number of best-selling books in each genre each year: **","b24c8f9f":"# 3. Variable distributions","858482e7":"****Relationship between Reviews and User Rating, compared between Genre:","fc6fbf15":"# 2. Analyze Variables by Author\n2.1 Construct author table"}}