{"cell_type":{"979f3c6d":"code","f4205105":"code","2f6f64af":"code","6ba05ac9":"code","2f225921":"code","db4dd43f":"code","7fc0bc54":"code","954e278c":"code","a8a2ae2c":"code","dee7ddc7":"code","28b4cc4d":"code","bfc25884":"code","a4523cb1":"code","3914642d":"code","02047fc9":"code","842abfd3":"code","a731c388":"code","ce60c067":"code","546bfd2b":"code","964d0b27":"code","4c7920a2":"code","8d2dc93b":"code","5aa56463":"code","a708d2a0":"code","4ef8b8f2":"code","6d20795c":"code","7a3dcaf4":"code","0733b25c":"code","e5a24094":"code","7f10b70a":"code","7a7d595d":"code","90eded3d":"code","2ec6edf7":"code","a7b35021":"code","650c0269":"code","35aced9d":"code","91176308":"code","81bdc77b":"code","2c2646af":"code","b62c2443":"code","cdeb2a59":"code","94de82a4":"code","aeee4a62":"code","270dcda2":"code","703d585c":"code","da39b27a":"code","3cf7ab2b":"markdown","bbc633d1":"markdown","d2854d0c":"markdown","f0df574c":"markdown","b3a1ab51":"markdown","63837ece":"markdown","d1f6084e":"markdown","497d78fb":"markdown","2b6be9f9":"markdown","2164256b":"markdown","4cd55f30":"markdown","b3130948":"markdown","db624ead":"markdown","a816269c":"markdown","d2ae5f11":"markdown","6bb086a5":"markdown","be6f515e":"markdown","382b63e5":"markdown","987fe080":"markdown","735749e7":"markdown","3656cdf1":"markdown","0fce9660":"markdown","f77b571c":"markdown","7c05c76b":"markdown","91e5c943":"markdown","a4939c5d":"markdown","2a9611be":"markdown","86f2e48f":"markdown","f9980994":"markdown","018566a2":"markdown"},"source":{"979f3c6d":"import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt","f4205105":"DATASET_PATH  = '..\/input\/ashrae-energy-prediction\/'","2f6f64af":"dataset = pd.read_csv('..\/input\/ashrae-energy-prediction\/train.csv')\n","6ba05ac9":"trainData = dataset\ntrainData","2f225921":"dataset.isnull().sum()","db4dd43f":"buildingData = pd.read_csv(DATASET_PATH + 'building_metadata.csv')","7fc0bc54":"buildingData.isnull().sum()","954e278c":"data = dataset.merge(buildingData,on = 'building_id',how = 'left')","a8a2ae2c":"data = data.drop('year_built',axis = 1)\ndata = data.drop('floor_count',axis = 1)","dee7ddc7":"#DATA_PATH = \"D:Study\/Machine Learning\/ML Project\/\"\nweather_train = pd.read_csv(DATASET_PATH + 'weather_train.csv')\nweather_test = weather_df = pd.read_csv(DATASET_PATH + 'weather_test.csv')","28b4cc4d":"import datetime as dt\nframes = [weather_train,weather_test]\nweather_data = pd.concat(frames)\ndata = data.merge(weather_data, on=['site_id', 'timestamp'], how='left')\n","bfc25884":"data[\"timestamp\"] = pd.to_datetime(data[\"timestamp\"])\ndata[\"day\"]       = data[\"timestamp\"].dt.day\ndata[\"hour\"]      = data[\"timestamp\"].dt.hour\ndata[\"week\"]      = data[\"timestamp\"].dt.weekday\ndata[\"month\"]     = data[\"timestamp\"].dt.month\ndata[\"year\"]      = data[\"timestamp\"].dt.year\ndata              = data.drop(\"timestamp\", axis = 1)\ndel weather_data","a4523cb1":"data","3914642d":"data.isnull().sum()","02047fc9":"data.isnull().sum()","842abfd3":"# precip_depth_1_hr\ndata = data.drop('cloud_coverage',axis = 1)\ndata","a731c388":"data = data.drop(['wind_direction','sea_level_pressure'],axis=1)\ndata","ce60c067":"data['air_temperature'] = data['air_temperature'].fillna(data['air_temperature'].mean())\ndata['wind_speed'] = data['wind_speed'].fillna(data['wind_speed'].mean())\ndata['dew_temperature'] = data['dew_temperature'].fillna(data['dew_temperature'].mean())\ndata['precip_depth_1_hr'] = data['precip_depth_1_hr'].fillna(data['precip_depth_1_hr'].mean())","546bfd2b":"del dataset","964d0b27":"data.describe()","4c7920a2":"data['meter_reading'] = [j*0.2931 if i == 0 else j for i,j in zip(data['site_id'],data['meter_reading'])]\ndata","8d2dc93b":"meter_values = data['meter'].unique()\nmeter_values","5aa56463":"electricMeter = data[data['meter']==0]\n","a708d2a0":"plt.scatter(electricMeter['meter_reading'],electricMeter['air_temperature'])\nplt.show()","4ef8b8f2":"chilledWaterMeter = data[data['meter']==1]\nstemMeter = data[data['meter']==2]\nhotWaterMeter = data[data['meter']==3]","6d20795c":"plt.scatter(chilledWaterMeter['meter_reading'],chilledWaterMeter['air_temperature'])\nplt.show()","7a3dcaf4":"plt.scatter(stemMeter['meter_reading'],stemMeter['air_temperature'])\nplt.show()","0733b25c":"plt.scatter(hotWaterMeter['meter_reading'],hotWaterMeter['air_temperature'])\nplt.show()","e5a24094":"mask1 = data[\"meter\"] == 0\nmask2 = data[\"meter_reading\"] > 40000\nmask = np.logical_and(mask1, mask2)\nprint(data.shape)\ndata[mask][\"meter_reading\"] = data[mask1][\"meter_reading\"].mean()","7f10b70a":"mask1 = data[\"meter\"] == 3\nmask2 = data[\"meter_reading\"] > 140000\nmask = np.logical_and(mask1, mask2)\nprint(data.shape)\ndata[mask][\"meter_reading\"] = data[mask1][\"meter_reading\"].mean()\nprint(data.shape)","7a7d595d":"newData = data[data['meter']==0]\nnewData.index = newData['month']\nnewData.drop(columns = 'month')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['month','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","90eded3d":"newData = data[data['meter']==1]\nnewData.index = newData['month']\nnewData.drop(columns = 'month')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['month','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","2ec6edf7":"newData = data[data['meter']==2]\nnewData.index = newData['month']\nnewData.drop(columns = 'month')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['month','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","a7b35021":"newData = data[data['meter']==3]\nnewData.index = newData['month']\nnewData.drop(columns = 'month')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['month','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","650c0269":"newData = data[data['meter']==0]\nnewData.index = newData['hour']\nnewData.drop(columns = 'hour')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['hour','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","35aced9d":"newData = data[data['meter']==1]\nnewData.index = newData['hour']\nnewData.drop(columns = 'hour')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['hour','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","91176308":"newData = data[data['meter']==2]\nnewData.index = newData['hour']\nnewData.drop(columns = 'hour')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['hour','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","81bdc77b":"newData = data[data['meter']==3]\nnewData.index = newData['hour']\nnewData.drop(columns = 'hour')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['hour','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","2c2646af":"newData = data[data['meter']==0]\nnewData.index = newData['primary_use']\nnewData.drop(columns = 'primary_use')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['primary_use','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (15,7))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","b62c2443":"newData = data[data['meter']==1]\nnewData.index = newData['primary_use']\nnewData.drop(columns = 'primary_use')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['primary_use','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (24,11))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","cdeb2a59":"newData = data[data['meter']==2]\nnewData.index = newData['primary_use']\nnewData.drop(columns = 'primary_use')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['primary_use','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (25,17))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","94de82a4":"newData = data[data['meter']==3]\nnewData.index = newData['primary_use']\nnewData.drop(columns = 'primary_use')\nnewData.sort_index(inplace = True)\ndata_to_plot = newData.groupby([newData.index])['primary_use','meter_reading'].mean()\nidx = data_to_plot.index\nmeter = data_to_plot.meter_reading\nplt.style.use('ggplot')\nplt.figure(figsize = (25,17))\nplt.plot(idx,meter,'-bo',label = 'meter_reading')\nplt.show()","aeee4a62":"data.isnull().sum()","270dcda2":"from sklearn.preprocessing import LabelEncoder","703d585c":"le = LabelEncoder()\ndata['primary_use'] = le.fit_transform(data['primary_use'])","da39b27a":"data","3cf7ab2b":"# Removing useless features","bbc633d1":"# Fixing side_id 0 error","d2854d0c":"# Graph shows the correlation between chilled water meter and air temperature","f0df574c":"# Mean of using Stem meter per month ","b3a1ab51":"# Usage of different types of buildings that use Stem meter","63837ece":"# Graph shows the correlation between electricity meter and air temperature","d1f6084e":"# Concatinating weather train and weather test data","497d78fb":"# Filtering buildings by meter","2b6be9f9":"# Mean of using Hot Water meter per month ","2164256b":"# Merging building data with training data","4cd55f30":"# Usage of different types of buildings that use Hot Water meter","b3130948":"***Electricity Meter Outliers***","db624ead":"# Graph shows the correlation between stem meter and air temperature","a816269c":"# Mean of using Hot Water meter per hour","d2ae5f11":"# Mean of using Stem meter per hour ","6bb086a5":"# Graph shows the correlation between hot water meter and air temperature","be6f515e":"# Usage of different types of buildings that use Chilled Water meter","382b63e5":"# Removing features having alot of nulls ","987fe080":"# Removing outliers","735749e7":"# Mean of using Chilled Water meter per month ","3656cdf1":"# Filtering buildings that use electricity meter","0fce9660":"# Filling missing data","f77b571c":"# Mean of using Chilled Water meter per hour","7c05c76b":"# Mean of using electricity meter per month ","91e5c943":"# Usage of different types of buildings that use Electricity meter","a4939c5d":"# Mean of using electricity meter per hour ","2a9611be":"***Hot water Meter Outliers***","86f2e48f":"# Converting primary use to numiric","f9980994":"**there are outliers values  in buildings that use electricity meter and hot water**","018566a2":"# Converting timestamp feature to datetime to extract another features such as day,hour,month,and year"}}