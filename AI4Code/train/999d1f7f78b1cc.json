{"cell_type":{"be8d7fc4":"code","8f06fc54":"code","05a39acb":"code","2eee5bfb":"code","7c039ea8":"code","673ac740":"code","38af60d6":"code","a478b7ca":"code","5634dd01":"code","c04a9480":"code","44030d80":"code","44401e6e":"code","fa583cd3":"code","cb5ecc74":"code","dab958ea":"code","9f7454dc":"code","e0055d6e":"code","34228d16":"code","1265d97e":"code","a225c4aa":"code","144eeda6":"code","3797d822":"code","ef7f9f12":"code","c9d167ac":"code","c7ccb9bc":"code","a835ca99":"code","113f9ea2":"code","bb55d439":"code","2c19ef75":"code","e7651ff8":"code","560135b8":"code","3fc0e540":"code","844549a7":"code","fa45a6c1":"code","9de99f1d":"code","3d0e48c7":"code","8eba52e4":"code","b071e454":"code","dc66e8a6":"code","29ba33d4":"code","006b1cd5":"code","b5fa7aed":"code","21da84d0":"code","b901fb03":"code","c789ecce":"code","405fb88d":"code","a66f6685":"code","5bd1fa6a":"code","a7ae665d":"code","5647678a":"code","44f03fc4":"code","97845479":"code","777714d9":"code","85d629c0":"code","94d1bea6":"code","76603d90":"code","f2721faf":"code","02ca165e":"code","d454c42f":"code","abe33553":"code","ff856bb8":"code","36455175":"code","cb87ce44":"code","75836288":"code","b97192a2":"code","54fd6203":"code","bde360ec":"code","7d85a46d":"code","7ed9a0dc":"code","a5fb33c0":"code","0afcf6c8":"code","cb614330":"code","669bf3b1":"code","95032298":"code","afd57d44":"code","68f8fe93":"code","16712c15":"code","7cbfcf71":"code","1062d8fd":"code","80e3800b":"code","9fefbd3b":"code","6169af8f":"code","a0f18c73":"code","8c40c0cb":"markdown","66ef7d66":"markdown","0da3e59c":"markdown","e1a10905":"markdown","863455bb":"markdown","336d6c3b":"markdown","582fe9b9":"markdown","4225c4a4":"markdown","117f14e7":"markdown","ad0ddf2b":"markdown","bdd9f41e":"markdown","bfd64b16":"markdown","251edfe4":"markdown","e7c70a38":"markdown","339df5fa":"markdown"},"source":{"be8d7fc4":"import pandas as pd\nimport matplotlib.pyplot as plt\n%matplotlib inline","8f06fc54":"import os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))","05a39acb":"UN_data = pd.read_csv(\"\/kaggle\/input\/vaccine-dataset\/country_profile_variables.csv\")","2eee5bfb":"UN_data.head()","7c039ea8":"UN_data['country'].nunique()","673ac740":"UN_data.info()","38af60d6":"country_vaccine = pd.read_csv(\"\/kaggle\/input\/covid19\/country_vaccinations.csv\")\ncountry_vaccine.head()\ncountry_vaccine['date']=pd.to_datetime(country_vaccine['date'])\ncountry_vaccine.info()","a478b7ca":"country_vaccine_1 = country_vaccine.set_index('date')","5634dd01":"import plotly.express as px\nfig_date = px.line(country_vaccine_1, y=\"people_vaccinated\", color='country')\nfig_date.show()","c04a9480":"import plotly.express as px\nfig_date_1 = px.line(country_vaccine_1, y=\"people_vaccinated_per_hundred\", color='country')\nfig_date_1.show()","44030d80":"country_vaccine_date = country_vaccine.groupby(['date']).sum()","44401e6e":"country_vaccine_date.info()","fa583cd3":"country_vaccine_date.tail()","cb5ecc74":"import plotly.express as px\nfig_date = px.line(country_vaccine_date, y=\"people_vaccinated\")\nfig_date.show()","dab958ea":"country_vaccine =country_vaccine.groupby(['country', 'vaccines', 'iso_code']).sum()","9f7454dc":"country_vaccine = country_vaccine.reset_index()","e0055d6e":"CV_UNdata = pd.merge(country_vaccine, UN_data, how = 'left', on = 'country')","34228d16":"CV_UNdata.info()","1265d97e":"CV_UNdata","a225c4aa":"CV_UNdata['people_vaccinated_per_hundred'].max()","144eeda6":"CV_UNdata['people_vaccinated_per_hundred'].isnull().sum()","3797d822":"country_vaccine.info()","ef7f9f12":"unique_vaccines = country_vaccine.vaccines","c9d167ac":"unique_vaccines.unique()","c7ccb9bc":"unique_countries = country_vaccine.country","a835ca99":"unique_countries.unique()","113f9ea2":"import plotly.express as px\ndf = px.data.gapminder()\nfig = px.scatter_geo(CV_UNdata, locations=\"iso_code\", color=\"country\",\n                     hover_name=\"country\",size = \"people_vaccinated\",\n                     projection=\"natural earth\")\nfig.show()","bb55d439":"df_full_vaccinated = px.data.gapminder()\nfig_fully_vaccinated = px.scatter_geo(CV_UNdata, locations=\"iso_code\", color=\"country\",\n                     hover_name=\"country\",size = \"people_fully_vaccinated\",size_max=40,\n                     projection=\"natural earth\")\nfig_fully_vaccinated.show()","2c19ef75":"CV_UNdata.head()","e7651ff8":"CV_UNdata_vaccines = CV_UNdata.groupby(['vaccines']).sum()","560135b8":"CV_UNdata_vaccines.head()","3fc0e540":"CV_UNdata_vaccines.plot.barh(y='people_fully_vaccinated_per_hundred')","844549a7":"import plotly.express as px\ndf_1 = px.data.gapminder()\nfig_1 = px.scatter_geo(CV_UNdata, locations=\"iso_code\", color=\"country\",\n                     hover_name=\"country\",size = \"people_vaccinated_per_hundred\",\n                     projection=\"natural earth\")\nfig_1.show()","fa45a6c1":"df_2 = px.data.gapminder()\nfig_2 = px.scatter_geo(CV_UNdata, locations=\"iso_code\", color=\"country\",\n                     hover_name=\"country\",size = \"people_fully_vaccinated_per_hundred\",\n                     projection=\"natural earth\")\nfig_2.show()","9de99f1d":"CV_UNdata_gdp = px.data.gapminder()\n\nfig = px.scatter(CV_UNdata, x=\"GDP per capita (current US$)\", y=\"country\",\n                 size=\"people_vaccinated_per_hundred\", color=\"country\",\n                 hover_name=\"country\", size_max=80)\nfig.show()","3d0e48c7":"CV_UNdata.info()","8eba52e4":"CV_UNdata['Economy: Agriculture (% of GVA)'] = CV_UNdata['Economy: Agriculture (% of GVA)'].str.replace('~', '')\nCV_UNdata['Economy: Agriculture (% of GVA)']=CV_UNdata['Economy: Agriculture (% of GVA)'].astype(float)","b071e454":"economy = px.scatter(CV_UNdata, x=\"country\", y='Economy: Agriculture (% of GVA)',\n                 size=\"people_vaccinated_per_hundred\", color=\"country\",\n                 hover_name=\"country\", size_max=80)\neconomy.show()","dc66e8a6":"health_exp = px.scatter(CV_UNdata, x=\"country\", y='Health: Total expenditure (% of GDP)',\n                 size=\"people_vaccinated_per_hundred\", color=\"country\",\n                 hover_name=\"country\", size_max=80)\nhealth_exp.show()","29ba33d4":"employment_agri_exp = px.scatter(CV_UNdata, x=\"country\", y='Employment: Agriculture (% of employed)',\n                 size=\"people_vaccinated_per_hundred\", color=\"country\",\n                 hover_name=\"country\", size_max=80)\nemployment_agri_exp.show()","006b1cd5":"unemployment_agri_exp = px.scatter(CV_UNdata, x=\"country\", y='Unemployment (% of labour force)',\n                 size=\"people_vaccinated_per_hundred\", color=\"country\",\n                 hover_name=\"country\", size_max=80)\nunemployment_agri_exp.show()","b5fa7aed":"hygiene_exp = px.scatter(CV_UNdata, x=\"country\", y='Pop. using improved sanitation facilities (urban\/rural, %)',\n                 size=\"people_vaccinated_per_hundred\",color = 'country',\n                 hover_name=\"country\", size_max=80)\nhygiene_exp.show()","21da84d0":"import seaborn as sns","b901fb03":"CV_UNdata[['GDP growth rate (annual %, const. 2005 prices)', 'Economy: Agriculture (% of GVA)',\n'Employment: Agriculture (% of employed)', 'Employment: Industry (% of employed)','Employment: Services (% of employed)',\n'Unemployment (% of labour force)', 'Labour force participation (female\/male pop. %)','International trade: Exports (million US$)',\n'Labour force participation (female\/male pop. %)','International trade: Exports (million US$)','International trade: Imports (million US$)',\n'International trade: Balance (million US$)', 'Balance of payments, current account (million US$)','Population growth rate (average annual %)',\n'Urban population growth rate (average annual %)', 'Fertility rate, total (live births per woman)', 'Life expectancy at birth (females\/males, years)']] = CV_UNdata[['GDP growth rate (annual %, const. 2005 prices)', 'Economy: Agriculture (% of GVA)',\n'Employment: Agriculture (% of employed)', 'Employment: Industry (% of employed)','Employment: Services (% of employed)','Unemployment (% of labour force)', 'Labour force participation (female\/male pop. %)','International trade: Exports (million US$)','Labour force participation (female\/male pop. %)','International trade: Exports (million US$)','International trade: Imports (million US$)',\n'International trade: Balance (million US$)', 'Balance of payments, current account (million US$)','Population growth rate (average annual %)',\n'Urban population growth rate (average annual %)', 'Fertility rate, total (live births per woman)', 'Life expectancy at birth (females\/males, years)']].apply(pd.to_numeric, errors='coerce')","c789ecce":"CV_UNdata[['Population age distribution (0-14 \/ 60+ years, %)', 'International migrant stock (000\/% of total pop.)','Refugees and others of concern to UNHCR (in thousands)',\n          'Infant mortality rate (per 1000 live births', 'Health: Physicians (per 1000 pop.)',\n          'Education: Government expenditure (% of GDP)', 'Education: Primary gross enrol. ratio (f\/m per 100 pop.)',\n          'Education: Secondary gross enrol. ratio (f\/m per 100 pop.)','Education: Tertiary gross enrol. ratio (f\/m per 100 pop.)',\n          'Mobile-cellular subscriptions (per 100 inhabitants)','Mobile-cellular subscriptions (per 100 inhabitants).1',\n          'Threatened species (number)', 'Forested area (% of land area)', 'Energy supply per capita (Gigajoules)',\n          'Pop. using improved drinking water (urban\/rural, %)', 'Pop. using improved sanitation facilities (urban\/rural, %)']] = CV_UNdata[['Population age distribution (0-14 \/ 60+ years, %)', 'International migrant stock (000\/% of total pop.)','Refugees and others of concern to UNHCR (in thousands)',\n          'Infant mortality rate (per 1000 live births', 'Health: Physicians (per 1000 pop.)',\n          'Education: Government expenditure (% of GDP)', 'Education: Primary gross enrol. ratio (f\/m per 100 pop.)',\n          'Education: Secondary gross enrol. ratio (f\/m per 100 pop.)','Education: Tertiary gross enrol. ratio (f\/m per 100 pop.)',\n          'Mobile-cellular subscriptions (per 100 inhabitants)','Mobile-cellular subscriptions (per 100 inhabitants).1',\n          'Threatened species (number)', 'Forested area (% of land area)', 'Energy supply per capita (Gigajoules)',\n          'Pop. using improved drinking water (urban\/rural, %)', 'Pop. using improved sanitation facilities (urban\/rural, %)']].apply(pd.to_numeric,errors = 'coerce' )","405fb88d":"CV_UNdata['Surface area (km2)'] = pd.to_numeric(CV_UNdata['Surface area (km2)'], errors = 'coerce')","a66f6685":"CV_UNdata_1 = CV_UNdata.drop(labels = ['Labour force participation (female\/male pop. %)','Life expectancy at birth (females\/males, years)',\n                                      'Population age distribution (0-14 \/ 60+ years, %)','International migrant stock (000\/% of total pop.)',\n                                      'Education: Primary gross enrol. ratio (f\/m per 100 pop.)', 'Education: Secondary gross enrol. ratio (f\/m per 100 pop.)', \n                                      'Education: Tertiary gross enrol. ratio (f\/m per 100 pop.)', 'Forested area (% of land area)','Energy supply per capita (Gigajoules)',\n                                      'Pop. using improved drinking water (urban\/rural, %)'], axis=1)","5bd1fa6a":"CV_UNdata_1.info()","a7ae665d":"CV_UNdata_heatmap_df = CV_UNdata_1.drop(labels= ['country','vaccines','iso_code','Region'], axis = 1)","5647678a":"CV_UNdata_heatmap_df.info()","44f03fc4":"import seaborn as sns","97845479":"corr = CV_UNdata_heatmap_df.corr()\nplt.subplots(figsize=(30,30))\nsns.heatmap(corr, annot = True)","777714d9":"!pip install pycaret\nfrom pycaret.regression import *","85d629c0":"CV_UNdata_df = CV_UNdata_1.drop(labels= ['country','iso_code','Region'], axis = 1)","94d1bea6":"reg_experiment = setup(CV_UNdata_df, \n                       target = 'people_vaccinated', \n                       session_id=123, \n                       log_experiment=True, \n                       experiment_name='peoplevaccinated', remove_multicollinearity = True,\n                      multicollinearity_threshold = 0.8, numeric_imputation = 'median', ignore_low_variance = True,\n                      feature_selection=True, feature_interaction=True)","76603d90":"get_config('X')","f2721faf":"top3 = compare_models(n_select = 3)","02ca165e":"br = create_model('br', cross_validation=True, fold = 10)","d454c42f":"tuned_br = tune_model(br, fold =5)","abe33553":"plot_model(tuned_br, plot='error')","ff856bb8":"plot_model(tuned_br, plot = 'feature')","36455175":"plot_model(tuned_br, plot='residuals')","cb87ce44":"reg_experiment_1 = setup(CV_UNdata_heatmap_df, \n                       target = 'people_vaccinated', \n                       session_id=123, \n                       log_experiment=True, \n                       experiment_name='peoplevaccinated', remove_multicollinearity = True,\n                      multicollinearity_threshold = 0.8, numeric_imputation = 'median', ignore_low_variance = True,\n                      feature_selection=True, feature_interaction=True)","75836288":"top3_1 = compare_models(n_select = 3)","b97192a2":"huber = create_model('huber', cross_validation=True, fold = 10)","54fd6203":"plot_model(huber, plot='error')","bde360ec":"plot_model(huber, plot='feature')","7d85a46d":"plot_model(huber, plot='residuals')","7ed9a0dc":"The model is slightly overfitted.","a5fb33c0":"reg_experiment_vacc_per_hun = setup(CV_UNdata_df, \n                       target = 'people_vaccinated_per_hundred', \n                       session_id=123, \n                       log_experiment=True, \n                       experiment_name='peoplevaccinated', remove_multicollinearity = True,\n                      multicollinearity_threshold = 0.8, numeric_imputation='median', feature_interaction=True, feature_selection=True)","0afcf6c8":"get_config('X')","cb614330":"top3_2 = compare_models(n_select = 3)","669bf3b1":"omp= create_model('omp', cross_validation=True, fold = 10)","95032298":"plot_model(omp, plot='error')","afd57d44":"plot_model(omp, plot='feature')","68f8fe93":"plot_model(omp, plot='residuals')","16712c15":"reg_experiment_vacc_per_hun = setup(CV_UNdata_heatmap_df, \n                       target = 'people_vaccinated_per_hundred', \n                       session_id=123, \n                       log_experiment=True, \n                       experiment_name='peoplevaccinated', remove_multicollinearity = True,\n                      multicollinearity_threshold = 0.8, numeric_imputation='median', feature_interaction=True, feature_selection=True)","7cbfcf71":"get_config('X')","1062d8fd":"top3_3 = compare_models(n_select = 3)","80e3800b":"OMP = create_model('omp', fold = 10, cross_validation = True)","9fefbd3b":"plot_model(OMP, plot='error')","6169af8f":"plot_model(OMP, plot='feature')","a0f18c73":"plot_model(OMP, plot= 'residuals')","8c40c0cb":"What vaccines are used and in which countries?\nWhat country is vaccinated more people?\nWhat country is vaccinated a larger percent from its population?\nCombine vaccination data with UN Data and try to capture what influences vaccination programmes, and these programmes success.","66ef7d66":"Task 1 - What vaccines are used and in which countries? What country is vaccinated more people?","0da3e59c":"The model is overfitting. Now let's try to find the models when country and vaccines are not included in the dataset","e1a10905":"Task 2- What country is vaccinated a larger percent from its population?","863455bb":"As per OMP model, most important feature is the sex ratio and total vaccination per hundred multiply by the population using sanitation facility is the second feature that might influence the people vaccinated per hundred.\n\nWe have evaluated various models for predicting the people vaccinated and people vaccinated per hundred. Although, all the models are slightly overfitted, however, it seems that the total vaccination multiply by the population using sanitation facility can be one of the important feature along with the sex ratio, total vaccinations multiply by employment services, and threatened species multiply by total vaccinations.","336d6c3b":"From the heat map, it can be observed people vaccinated per hundred have good correlation only with total vaccination per hundred, daily vaccination per million and people fully vaccinated per hundred","582fe9b9":"It can be observed from the plot that even though the GDP per capita of israel is less than that of UAE and UK, the people vaccinated per hundred is highest.\nSimilarly if we compare UAE and UK, the GDP per capita is higher for UK, however people vaccinated per hundred is less than that of UAE.\nGibraltar has GDP per capita in negative, however it is second in number for people vaccinated per hundred.\nFrom this, we can infer that GDP per capita do not influence the data of people vaccinated.","4225c4a4":"Capture what influences vaccination programmes, and these programmes success.","117f14e7":"It is Moderna, Pfizer\/BioNtech vaccine that vaccined maximum percentage of people.","ad0ddf2b":"The number of people vaccinated increases slowly with the time initially and then suddenly shoot up in January with a steep downfall at Feb-01.","bdd9f41e":"It is observed from the plots that there is no relationship between the countries economy, education, hygience factility with the people vaccinated. It is still the Israel that is showing highest people_vaccinated_per_hundred irrespective of its economy, hygiene, education etc.","bfd64b16":"As per BR model, new feature of Threatened species multiply with total vaccinations is the most important feature in predicting the number of people vaccinated. Also,features of total vaccinations multiply by mobile cellular subscription and total vaccinations multiply with the population using sanitation facilities are also contributing for the important features.","251edfe4":"Interpretation_2: Israel seems to have maximum percentage of people partially and fully vaccinated.","e7c70a38":"Interpretation_1 - USA has maximum number of people partially and fully vaccinated. You can hover over the countries to know which vaccines are used in the respective countries.","339df5fa":"As per huber, total vaccinations multiply with employment services is the most important feature in predicting the people vaccinations. Also, urban population multiply by total vaccinations and total vaccinations multiply by population using sanitation facility also the contributing features."}}