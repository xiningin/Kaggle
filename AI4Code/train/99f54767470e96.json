{"cell_type":{"388283bf":"code","fd8f0939":"code","e5b36acd":"code","ec6dff35":"code","ecf23ef6":"code","10c17acf":"code","827f1bb3":"code","fc240d35":"code","471c81f4":"code","46070210":"code","942f136e":"code","6b0458cc":"code","320618ec":"code","c5ce9088":"code","6f8d3ed2":"code","0033f2ac":"code","6f1ce204":"code","abb8d093":"code","ff6b6a52":"code","2508ba68":"code","91f053f9":"code","02989e96":"code","f7afc103":"code","6e3c60cb":"code","2d8c6ef2":"code","3a71954c":"code","b171f4fb":"code","367b7a2d":"code","1b5ef468":"code","561d693a":"code","b97af013":"code","e085ddf2":"code","39ce6136":"code","3aac425e":"code","2ba12c91":"code","c9776baf":"code","123c6199":"code","fe664605":"code","9eb80d22":"code","2c100ff7":"code","4f8c2354":"code","fbb9f1a1":"markdown","746622bf":"markdown","fec3af77":"markdown","3074cbbe":"markdown","6d2e2800":"markdown","fba98f05":"markdown","c2027842":"markdown","25673e0e":"markdown","a09b2756":"markdown","36857302":"markdown","844a4756":"markdown","91067b95":"markdown","cd91a01c":"markdown","46330b36":"markdown","d30eaf4a":"markdown","855aa317":"markdown","31eb554f":"markdown","558d252f":"markdown","9cbc981b":"markdown","8343fdcd":"markdown","7d089682":"markdown","2dc8dc0d":"markdown"},"source":{"388283bf":"import numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\nfrom plotly.offline import init_notebook_mode, iplot\nfrom wordcloud import WordCloud\nimport plotly.graph_objs as go\nimport matplotlib.pyplot as plt\nimport plotly.plotly as py\nfrom plotly import tools\nfrom datetime import date\nimport seaborn as sns\nimport random \nimport warnings\nwarnings.filterwarnings(\"ignore\")\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","fd8f0939":"train_df=pd.read_csv(\"..\/input\/titanic\/train.csv\")\ntrain_df.head()","e5b36acd":"test_df=pd.read_csv(\"..\/input\/titanic\/test.csv\")\ntest_df.head()","ec6dff35":"print('---'*40)\nprint(\"The number of Features in  train dataset :\",train_df.shape[1])\nprint(\"The number of Rows in Train dataset :\",train_df.shape[0])\nprint('---'*40)\nprint('-----Test Dataset------------------------------')\nprint(\"The number of Features in  test dataset :\",test_df.shape[1])\nprint(\"The number of Rows in  Test dataset :\",test_df.shape[0])","ecf23ef6":"def type_features(data):\n    categorical_features = data.select_dtypes(include = [\"object\"]).columns\n    numerical_features = data.select_dtypes(exclude = [\"object\"]).columns\n    print( \"categorical_features :\",categorical_features)\n    print('-----'*40)\n    print(\"numerical_features:\",numerical_features)","10c17acf":"print('Train_dataset')\nprint('````'*40)\ntype_features(train_df)","827f1bb3":"print('Test_dataset')\nprint('````'*40)\ntype_features(test_df)","fc240d35":"def missingdata(data):\n    total = data.isnull().sum().sort_values(ascending = False)\n    percent = (data.isnull().sum()\/data.isnull().count()*100).sort_values(ascending = False)\n    ms=pd.concat([total, percent], axis=1, keys=['Total', 'Percent'])\n    ms= ms[ms[\"Percent\"] > 0]\n    f,ax =plt.subplots(figsize=(8,6))\n    plt.xticks(rotation='90')\n    fig=sns.barplot(ms.index, ms[\"Percent\"],color=\"green\",alpha=0.8)\n    plt.xlabel('Features', fontsize=15)\n    plt.ylabel('Percent of missing values', fontsize=15)\n    plt.title('Percent missing data by feature', fontsize=15)\n    return ms","471c81f4":"missingdata(train_df)","46070210":"print('------------------------------Test_Dataset--------------------------------------------')\nmissingdata(test_df)","942f136e":"f,ax=plt.subplots(1,2,figsize=(8,5))\ntrain_df.Survived.value_counts().plot.pie(explode=[0,0.1],autopct='%1.1f%%',ax=ax[0],shadow=True)\nax[0].set_title('Distribution of target variable')\nsns.countplot('Survived',data=train_df,ax=ax[1])\nax[1].set_title('Count of Survived VS Not Survived Passengers')\nplt.show() ","6b0458cc":"def group_by(df,t1='',t2=''):\n    a1=df.groupby([t1,t2])[t2].count()\n    return a1","320618ec":"def plot_re(df,t1='',t2=''):\n    f,ax=plt.subplots(1,2,figsize=(15,5))\n    df[[t1,t2]].groupby([t1]).count().plot.bar(ax=ax[0])\n    ax[0].set_title('count of passenger Based on  '+ t1)\n    sns.countplot(t1,hue=t2,data=df,ax=ax[1])\n    ax[1].set_title(t1 + ': Survived vs dead')\n    a=plt.show()\n    return a","c5ce9088":"titanic.train.columns","6f8d3ed2":"plot_re(train_df,'Sex','Survived')","0033f2ac":"group_by(train_df,'Sex','Survived')","6f1ce204":"train_df['Age_bin'] = pd.cut(train_df['Age'], bins=[0,12,20,40,120], labels=['Children','Teenage','Adult','Elder'])\ntrain_df['Age_bin'].head()","abb8d093":"group_by(train_df,'Age_bin','Survived')","ff6b6a52":"plot_re(train_df,'Age_bin','Survived')","2508ba68":"facet = sns.FacetGrid(train_df, hue=\"Survived\",aspect=4)\nfacet.map(sns.kdeplot,'Age',shade= True)\nfacet.set(xlim=(0, train_df['Age'].max()))\nfacet.add_legend()","91f053f9":"\ntrain_df['Title'] = train_df.Name.str.extract(' ([A-Za-z]+)\\.', expand=False)","02989e96":"train_df['Title'].value_counts()","f7afc103":"train_df['Title'] = train_df['Title'].replace(['Lady', 'Countess','Capt', 'Col',\n                                             'Don', 'Dr', 'Major', 'Rev', 'Sir', 'Jonkheer', 'Dona'], 'Rare')\n\ntrain_df['Title'] = train_df['Title'].replace('Mlle', 'Miss')\ntrain_df['Title'] = train_df['Title'].replace('Ms', 'Miss')\ntrain_df['Title'] = train_df['Title'].replace('Mme', 'Mrs')","6e3c60cb":"train_df['Title'].value_counts()","2d8c6ef2":"plot_re(train_df,'Title','Survived')","3a71954c":"def or_plot(df,t1='',t2=''):\n    f,ax=plt.subplots(1,2,figsize=(10,6))\n    df[t1].value_counts().plot.bar(ax=ax[0],color='Green')\n    ax[0].set_title('Number Of Passenger By '+t1)\n    ax[0].set_xlabel(\"Score of :\"+t1)\n    ax[0].set_ylabel('Count')\n    sns.countplot(t1,hue=t2,data=train_df,ax=ax[1],palette=\"spring\")\n    ax[1].set_title(t1+':Survived vs Dead')\n    a=plt.show()\n    return a","b171f4fb":"or_plot(train_df,'Pclass','Survived')","367b7a2d":"or_plot(train_df,'Embarked','Survived')","1b5ef468":"or_plot(train_df,'Parch','Survived')","561d693a":"or_plot(train_df,'SibSp','Survived')","b97af013":"# Create new feature FamilySize as a combination of SibSp and Parch\ntrain_df['FamilySize'] = train_df['SibSp'] + train_df['Parch'] + 1","e085ddf2":"train_df['FamilySize'].value_counts()","39ce6136":"or_plot(train_df,'FamilySize','Survived')","3aac425e":"# Create new feature IsAlone from FamilySize\ntrain_df['Alone'] = 0\ntrain_df.loc[train_df['FamilySize'] == 1, 'Alone'] = 1","2ba12c91":"train_df.Alone.value_counts()","c9776baf":"or_plot(train_df,'Alone','Survived')","123c6199":"grid = sns.FacetGrid(train_df, col='Survived', row='Pclass', size=2.2, aspect=1.6)\ngrid.map(plt.hist, 'Age', alpha=.5, bins=20)\ngrid.add_legend()","fe664605":"grid = sns.FacetGrid(train_df, row='Pclass', col='Sex', size=2.2, aspect=1.6)\ngrid.map(plt.hist, 'Age', alpha=.5, bins=20)\ngrid.add_legend()","9eb80d22":"#correlation heatmap of dataset\ndef correlation_heatmap(df):\n    _ , ax = plt.subplots(figsize =(10,10))\n    colormap = sns.diverging_palette(220, 10, as_cmap = True)\n    \n    _ = sns.heatmap(\n        df.corr(), \n        cmap = colormap,\n        square=True, \n        cbar_kws={'shrink':.9 }, \n        ax=ax,\n        annot=True, \n        linewidths=0.1,vmax=1.0, linecolor='white',\n        annot_kws={'fontsize':16}\n    )\n    \n    plt.title('Pearson Correlation of Features', y=1.05, size=15)\n\ncorrelation_heatmap(train_df)","2c100ff7":"# most correlated features\ncorrmat = train_df.corr()\ntop_corr_features = corrmat.index[abs(corrmat[\"Survived\"])>=0.05]\nplt.figure(figsize=(10,10))\ng = sns.heatmap(train_df[top_corr_features].corr(),annot=True,cmap=\"Oranges\")","4f8c2354":"g = sns.pairplot(train_df[[u'Survived', u'Pclass', u'Sex', u'Age', u'Parch', u'Fare', u'Embarked',\n       u'FamilySize', u'Title']], hue='Survived', palette = 'seismic',size=1.2,diag_kind = 'kde',diag_kws=dict(shade=True),plot_kws=dict(s=10) )\ng.set(xticklabels=[])","fbb9f1a1":"## Analysis Name column\nCreating new feature extracting from existing\nWe want to analyze if Name feature can be engineered to extract titles and test correlation between titles and survival, before dropping Name and PassengerId features.\n\nIn the following code we extract Title feature using regular expressions. The RegEx pattern (\\w+\\.) matches the first word which ends with a dot character within Name feature. The expand=False flag returns a DataFrame.\n\nObservations.\n\nWhen we plot Title, Age, and Survived, we note the following observations.\n\nCertain titles mostly survived (Mme, Lady, Sir) or did not (Don, Rev, Jonkheer).\nDecision.\n\nWe decide to retain the new Title feature for model training.\n","746622bf":"### based on above given plot it clear the the Pclass 1 has the high rate of survival and in Embarked c has high rate of survival compare with other.","fec3af77":"### if look at the above given plot its is clear that the pclass 1 has high rate of survived and Pclass 3 has higest rate of dead.","3074cbbe":" ### Number of records and Features in the datasets\n ** Let Examine the  Train  and Test DataSet**","6d2e2800":"### Pairplots\n\nFinally let us generate some pairplots to observe the distribution of data from one feature to the other. Once again we use Seaborn to help us.","fba98f05":"### Now create bin for age so that we can know which age of passenger count has maximum survived rate","c2027842":"###  based on above given plot its clear the passenger  in between 0 to 18 has high count of survival and age between 20 to 40 also has high count of survival rate compare to other. ","25673e0e":"those are few EAD i have done please vote for me which help my movitvation to increase to do a lot of work if there any imporvment can be done means please say in comments\nReferences\nThis notebook has been created based on great work done solving the Titanic competition and other sources.\n\nA journey through Titanic\nGetting Started with Pandas: Kaggle's Titanic Competition\nTitanic Best Working Classifier","a09b2756":"**It is evident that  many Passenger are unable to survived for the accident  i.e Only 38.4% of the total passenger are able to survived.\nWe need to drill down more to get better insights from the data and see which categories of the passenger are  able to survied or not for the accident.**\n\nWe will try to check the survied  and dead rate by using the different features of the dataset. \nSome of the features being sex,age,Pclass,etc. First let us understand the different types of features.","36857302":"## Data Description\n\nPassengerId which is just a running index and the indication whether this passenger survived (1) or not (0) we have the following information for each person:\n\nPclass is the Ticket-class: first (1), second (2), and third (3) class tickets were used. This is an ordinal integer feature.\n\nName is the name of the passenger. The names also contain titles and some persons might share the same surname; indicating family relations. We know that some titles can indicate a certain age group. For instance Master is a boy while Mr is a man. This feature is a character string of variable length but similar format.\n\nSex is an indicator whether the passenger was female or male. This is a categorical text string feature.\n\nAge is the integer age of the passenger. There are NaN values in this column.\n\nSibSp is another ordinal integer feature describing the number of siblings or spouses travelling with each passenger.\n\nParch is another ordinal integer features that gives the number of parents or children travelling with each passenger.\n\nTicket is a character string of variable length that gives the ticket number.\n\nFare is a float feature showing how much each passenger paid for their rather memorable journey.\n\nCabin gives the cabin number of each passenger. There are NaN in this column. This is another string feature.\n\nEmbarked shows the port of embarkation as a categorical character value.","844a4756":"*** by looking above the given plot and group by fuction its clear proof that the female has more count of survived rate compare to male***","91067b95":"#### Ordinal Features:\nAn ordinal variable is similar to categorical values, but the difference between them is that we can have relative ordering or sorting between the values. For eg: If we have a feature like Height with values Tall, Medium, Short, then Height is a ordinal variable. Here we can have a relative sort in the variable.\n\nOrdinal Features in the dataset:Pclass and Embarked","cd91a01c":"## Identifying Numerical and Categorical Features\n###  Function for  find out Numerical and categeical Variables","46330b36":"### We can replace many titles with a more common name or classify them as Rare","d30eaf4a":"## Checking the Imbalance of Target Variable","855aa317":"## now we analysis with base Parch(Parents travel with passenger) SibSp(siblings travel with the passenger)","31eb554f":"#### by look at the above given plot it clear that passenger travel with 1 siblings has high count of survival rate.","558d252f":"Correlating numerical and ordinal features\nWe can combine multiple features for identifying correlations using a single plot. This can be done with numerical and categorical features which have numeric values.","9cbc981b":"## identifying the missing values","8343fdcd":"## Introducation\nThe sinking of the RMS Titanic is one of the most infamous shipwrecks in history.  On April 15, 1912, during her maiden voyage, the Titanic sank after colliding with an iceberg, killing 1502 out of 2224 passengers and crew. This sensational tragedy shocked the international community and led to better safety regulations for ships.\n\nOne of the reasons that the shipwreck led to such loss of life was that there were not enough lifeboats for the passengers and crew. Although there was some element of luck involved in surviving the sinking, some groups of people were more likely to survive than others, such as women, children, and the upper-class.\n\nIn this challenge, we ask you to complete the analysis of what sorts of people were likely to survive. In particular, we ask you to apply the tools of machine learning to predict which passengers survived the tragedy.","7d089682":"## Types Of Features\n\n### Categorical Features:\nA categorical variable is one that has two or more categories and each value in that feature can be categorised by them.For example, \n Sex  is a categorical variable having Two categories. Now we cannot sort or give any ordering to such variables. They are also known as Nominal Variables.\n\nCategorical Features in the dataset: Sex\n\n### Analysing The Features\n***SEX is a Categorical Feature***","2dc8dc0d":"\n### Correlation Between The Features"}}