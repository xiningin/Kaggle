{"cell_type":{"78176126":"code","afc0a1dc":"code","c6d1040f":"code","fd3f217e":"code","6b64171e":"code","621d08b7":"code","aa2f0726":"code","4acd7cc7":"code","2a7a43c2":"code","7ab1b211":"code","5f2d3be7":"code","41ff5696":"code","47b06692":"code","cc363835":"code","06fa4485":"code","4b3521e2":"code","98854061":"code","b7fdc93c":"code","92c46fde":"code","f204cec5":"code","0e4c91c5":"code","ec8783f2":"code","75905f64":"code","f19b4091":"code","77c8c9cc":"code","cb96ab53":"code","1aae80e6":"code","97b7c1bb":"code","3da631b5":"code","2e57fac7":"code","9981c928":"code","9610d48e":"code","7d390d5f":"code","4e3e2d8b":"code","8b6789b9":"code","719afc75":"code","33cb3ed2":"code","d18ccccd":"code","157298db":"code","6bfdf6f6":"code","f8264cd3":"code","72d4d0c6":"code","d2179bf4":"code","855b8466":"code","d1f82d9c":"code","d2704999":"code","e3ee6b0c":"code","e5d80302":"code","af1e2625":"code","8bc3d1e3":"markdown","735c2718":"markdown","c4a4349e":"markdown","c4d507a1":"markdown","32e330b6":"markdown","53121263":"markdown"},"source":{"78176126":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load in \n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list the files in the input directory\n\nimport os\nprint(os.listdir(\"..\/input\"))\n\n# Any results you write to the current directory are saved as output.","afc0a1dc":"df = pd.read_csv(\"..\/input\/Big_Cities_Health_Data_Inventory.csv\")","c6d1040f":"df.head()","fd3f217e":"df.tail()","6b64171e":"df.columns","621d08b7":"df.shape","aa2f0726":"df.describe().T","4acd7cc7":"df[\"Indicator Category\"].value_counts()","2a7a43c2":"ind = df[\"Indicator\"]\nval = []\nn= 0\nfor i in ind:\n    if 'hiv' in i or 'HIV' in i or 'aids' in i or 'AIDS' in i:\n        val.append(i)\n        n+=1\nn","7ab1b211":"df[\"Year\"].value_counts()","5f2d3be7":"df['Gender'].value_counts()","41ff5696":"df['Race\/ Ethnicity'].value_counts()","47b06692":"df['Place'].value_counts()","cc363835":"df['BCHC Requested Methodology'].value_counts()","06fa4485":"df['Source'].value_counts()","4b3521e2":"df['Methods'].value_counts()","98854061":"df['Notes'].value_counts()","b7fdc93c":"df.duplicated().sum()","92c46fde":"df.shape","f204cec5":"df = df.drop_duplicates()","0e4c91c5":"df.shape","ec8783f2":"df.isna().sum()","75905f64":"df['Value'].mean()","f19b4091":"df['Value'].fillna(df['Value'].mean(),inplace=True)","77c8c9cc":"df.isna().sum()","cb96ab53":"df.columns","1aae80e6":"df.drop(columns=['Indicator','BCHC Requested Methodology', 'Source', 'Methods', 'Notes'],inplace=True)","97b7c1bb":"df.columns","3da631b5":"df[\"Year\"].value_counts()","2e57fac7":"for val in df['Year']:\n    if '-' in val:\n        temp = val[5:len(val)]\n        df['Year'].replace(val, temp, inplace=True)","9981c928":"df[\"Year\"].value_counts()","9610d48e":"df.columns","7d390d5f":"cat_cols =  df.select_dtypes(exclude=np.number)","4e3e2d8b":"num_cols = df.select_dtypes(include=np.number)","8b6789b9":"encoded_cat_cols = pd.get_dummies(cat_cols)","719afc75":"preprocessed_df = pd.concat([encoded_cat_cols, num_cols], axis=1)","33cb3ed2":"preprocessed_df.head()","d18ccccd":"x = preprocessed_df.drop(columns='Value')","157298db":"y = preprocessed_df[['Value']]","6bfdf6f6":"from sklearn.model_selection import train_test_split","f8264cd3":"train_x, test_x, train_y, test_y = train_test_split(x,y,test_size=0.3,random_state=12)","72d4d0c6":"from sklearn.linear_model import LinearRegression","d2179bf4":"model = LinearRegression()","855b8466":"model.fit(train_x, train_y)","d1f82d9c":"train_predict = model.predict(train_x)","d2704999":"test_predict = model.predict(test_x)","e3ee6b0c":"from sklearn.metrics import mean_absolute_error, mean_squared_error, r2_score","e5d80302":"MAE_train = mean_absolute_error(train_y,train_predict)\nMAE_test = mean_absolute_error(test_y,test_predict)\n\nMSE_train = mean_squared_error(train_y,train_predict)\nMSE_test = mean_squared_error(test_y,test_predict)\n\nRMSE_train = np.sqrt(MSE_train)\nRMSE_test = np.sqrt(MSE_test)\n\nR2_train = r2_score(train_y, train_predict)\nR2_test = r2_score(test_y, test_predict)","af1e2625":"print(\"MAE of Trained data : \",MAE_train)\nprint(\"MAE of Test data : \", MAE_test)\n\nprint(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\")\n\nprint(\"MSE of Trained Data\", MSE_train)\nprint(\"MSE of Test Data\", MSE_test)\n\nprint(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\")\n\nprint(\"RMSE of Trained Data\", RMSE_train)\nprint(\"RMSE of Test Data\", RMSE_test)\n\nprint('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')\nprint(\"R2 of train: \", R2_train)\nprint(\"R2 of test: \", R2_test)","8bc3d1e3":"**In values column most of the data falls into years 2010...2014  some values are represented with range instead of single year, as these values are very few in count, I'm just taking the last year in that range so that the categories are less and meaningful now **","735c2718":"**Now the model is ready and it's predicted the target values. Now let's evaluate  the results using Error Metrics**","c4a4349e":"**Preprocessing part is done. Now going to build linear regression model with train and test data**","c4d507a1":"**Going to do one-hot encoding as there are categorical colummns**","32e330b6":"**Replacing Null values with mean of value column**","53121263":"**Removing 5 columns as I couldn't find out any patterns out of it.**. TBD"}}