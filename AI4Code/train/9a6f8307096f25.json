{"cell_type":{"26ca49c4":"code","390f9742":"code","508f1c3f":"code","f852afdc":"code","aab95917":"code","e4f5629f":"code","8c6d4d80":"code","11c1365c":"code","8886b8c3":"code","2bf6690d":"code","f05aeb76":"code","baea81cd":"code","63ddb428":"code","d9f63be1":"code","52b21c00":"code","f971d67a":"code","32181729":"code","6ce691ae":"code","d296d4df":"code","91871831":"code","048af0e8":"code","66ba178d":"code","1644fb17":"code","999b6d30":"code","f7eb6966":"code","8958c68e":"code","6a6e0947":"code","9f744150":"code","1adbb55f":"code","d5637498":"code","3e969c68":"code","16871ae3":"code","366c946d":"code","a21a8145":"code","2206355c":"code","d249b6c4":"code","3b42998c":"code","a030e92e":"code","edd5386c":"code","0ac43c3a":"code","79b3ce28":"code","c837a221":"code","d11db2e4":"code","6e623f1f":"code","099003c1":"code","d655571a":"code","710f205f":"code","67f14538":"code","a42b0bc9":"code","793e7307":"code","8a3dbc26":"code","6486fe19":"code","fcebe2e7":"code","f7f1f29d":"code","2531eb35":"code","e5d29c37":"code","60b8d661":"code","c2d4c597":"code","5d5492fb":"markdown","945f1ed3":"markdown","7ec7cf75":"markdown","16f832c5":"markdown","391a5f79":"markdown","8607c709":"markdown","c1e9ae34":"markdown","e24962f5":"markdown","e9e47b45":"markdown","c30e2472":"markdown","0d5686a9":"markdown","4d8d4d31":"markdown","54e81501":"markdown","f15c47b1":"markdown","4e7f95d9":"markdown","14c19db4":"markdown","e3f7aed3":"markdown","183e6197":"markdown","b4cfa81b":"markdown","c2a0db7c":"markdown","3bab424b":"markdown","c7f5696c":"markdown","8ca224fe":"markdown","ede089ea":"markdown","b8bf12d8":"markdown","7f7a689d":"markdown","3c3789b4":"markdown","e018a568":"markdown"},"source":{"26ca49c4":"# \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nimport numpy as np\nimport pandas as pd\nfrom matplotlib import pyplot as plt\nimport seaborn as sns\n%matplotlib inline","390f9742":"# \u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\ntrain=pd.read_csv(\"..\/input\/titanic-train\/titanic_train.csv\")\ntest=pd.read_csv(\"..\/input\/titanictest\/test.csv\")\n\n# train,test\u3092\u4e00\u3064\u306e\u30ea\u30b9\u30c8\u306b\u683c\u7d0d\u3057\u3066\u304a\u304f\n# train\u30c7\u30fc\u30bf\u306b\u9069\u7528\u3057\u305f\u51e6\u7406\u306ftest\u306b\u3082\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u4e8c\u3064\u3092\u30ea\u30b9\u30c8\u306b\u307e\u3068\u3081\u3066\u304a\u3044\u3066\u52b9\u7387\u3088\u304f\u540c\u3058\u51e6\u7406\u3092\u9069\u7528\u3059\u308b\ndata=[train,test]","508f1c3f":"# train\u306e\u6982\u8981\u3092\u53d6\u5f97\ntrain.info()","f852afdc":"# test\u306e\u6982\u8981\u3092\u53d6\u5f97\ntest.info()","aab95917":"# train\u306e\u5148\u982d5\u884c\u3092\u8868\u793a\ntrain.head()","e4f5629f":"# train\u306e\u672b\u5c3e5\u884c\u3092\u8868\u793a\ntrain.tail()","8c6d4d80":"# \u30e9\u30f3\u30c0\u30e0\u306b\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3059\u308b\ntrain.sample(10)","11c1365c":"# train\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u6b20\u640d\u5024\u306e\u78ba\u8a8d\n# train\u306e\u5404\u8981\u7d20\u304c\u6b20\u640d\u5024\u3067\u3042\u308c\u3070True, \u305d\u3046\u3067\u306a\u3051\u308c\u3070False\u3092\u8868\u793a\ntrain.isnull().head()","8886b8c3":"# \u30ab\u30e9\u30e0\u3054\u3068\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u6b20\u640d\u5024\u306e\u6570\u3092\u8868\u793a\ntrain.isnull().sum()","2bf6690d":"# \u30ab\u30e9\u30e0\u3054\u3068\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u6b20\u640d\u5024\u300c\u3067\u306a\u3044\u300d\u6570\u3092\u8868\u793a\ntrain.notnull().sum() ","f05aeb76":"# \u7bb1\u3072\u3052\u56f3\u306b\u3088\u308b\u91cf\u7684\u5909\u6570\"Age\"\u306e\u53ef\u8996\u5316\nsns.boxplot(train[\"Age\"])\nplt.show()","baea81cd":"# # \u7bb1\u3072\u3052\u56f3\u306b\u3088\u308b\u91cf\u7684\u5909\u6570\"Fare\"\u306e\u53ef\u8996\u5316\nsns.boxplot(train[\"Fare\"])\nplt.show()","63ddb428":"# train\u30c7\u30fc\u30bf\u306e\"Age\"\u30b3\u30e9\u30e0\u3092\u300116\u672c\u306e\u68d2\u30b0\u30e9\u30d5\u3067\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u8868\u793a\n# \u73fe\u72b6\u3067\u306f\u6b20\u640d\u5024\u3092\u542b\u3080\u305f\u3081\u3001kde=False\u3068\u3057\u3066\u6ed1\u3089\u304b\u306a\u7dda\u306f\u6c42\u3081\u306a\u3044\nsns.distplot(train[\"Age\"], bins = 16, kde=False)","d9f63be1":"train[\"Age\"].value_counts().tail(15)","52b21c00":"# train\u306e\"Fare\"\u30b3\u30e9\u30e0\u3092\u300110\u672c\u306e\u68d2\u30b0\u30e9\u30d5\u3067\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u8868\u793a\nsns.distplot(train[\"Fare\"], bins = 10)\nplt.show()\ntrain[\"Fare\"].value_counts().tail(15)","f971d67a":"#train.corr()\u306f\u30c7\u30fc\u30bf\u306e\u5404\u8981\u7d20\uff08\u5404\u5217\uff09\u540c\u58eb\u306e\u76f8\u95a2\u4fc2\u6570\u3092\u8868\u5f62\u5f0f\u3067\u8996\u899a\u5316\u3059\u308b\n#\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306f\u81ea\u52d5\u7684\u306b\u5916\u3057\u3066\u304f\u308c\u308b\ntrain.corr().style.background_gradient(cmap=\"autumn_r\")","32181729":"# seaborn\u306eheatmap\u3092\u7528\u3044\u3066\u91cf\u7684\u5909\u6570\u306e\u76f8\u95a2\u3092\u53ef\u8996\u5316\nsns.heatmap(train.corr(), cmap = \"summer\", annot = True)\nplt.show()","6ce691ae":"# \u6027\u5225\u3054\u3068\u306b\u751f\u5b58\u3057\u305f\u4eba\u6570\u3092\u8868\u793a\ntrain.groupby([\"Sex\"])[\"Survived\"].sum()","d296d4df":"# train\u30c7\u30fc\u30bf\u306e\"Survived\"\u5217\u306e\u548c\u3092\u6027\u5225\u6bce\u306b\u6c42\u3081\u3001\u53ef\u8996\u5316\u3059\u308b\nsum_survived = train.groupby([\"Sex\"])[\"Survived\"].sum()\nsns.barplot(sum_survived.keys(), sum_survived.values)\nplt.show()","91871831":"# train\u306e\u30ab\u30e9\u30e0\"Survived\"\u3092\u3001\"Sex\"\u3068Survived\u3067\u96c6\u8a08\n# \u751f\u6b7b\u305d\u308c\u305e\u308c\u304c\u96c6\u8a08\u3055\u308c\u308b\ntrain.groupby([\"Sex\",\"Survived\"])[\"Survived\"].count()","048af0e8":"# train\u306e\u30ab\u30e9\u30e0\"Survived\"\u3092\"Sex\"\u3068Survived\u3067\u96c6\u8a08\u3057\u3001\u68d2\u30b0\u30e9\u30d5\u3067\u8868\u793a\n#data_count = train.groupby([\"Sex\",\"Survived\"])[\"Survived\"].count()\n#sns.barplot(data_count.keys(), data_count.values)\n# plt.show()","66ba178d":"# \u7537\u5973\u306e\u305d\u308c\u305e\u308c\u306e\u751f\u5b58\u7387\u3092\u6c42\u3081\u308b\ntrain.groupby([\"Sex\"])[\"Survived\"].mean()","1644fb17":"# \u4e57\u8239\u3057\u305f\u5834\u6240\u3068\u751f\u5b58\u7387\u3092\u30af\u30ed\u30b9\u96c6\u8a08\ntrain.groupby([\"Embarked\", \"Survived\"])[\"Survived\"].count()","999b6d30":"# \u4e57\u8239\u3057\u305f\u5834\u6240\u3068\u751f\u5b58\u7387\u3092\u30af\u30ed\u30b9\u96c6\u8a08\u3057\u3001\u68d2\u30b0\u30e9\u30d5\u3067\u8868\u793a\n# data_count = train.groupby([\"Embarked\", \"Survived\"])[\"Survived\"].count()\n# sns.barplot(data_count.keys(), data_count.values)\n# plt.show()","f7eb6966":"# \u4e57\u8239\u3057\u305f\u5834\u6240\u3054\u3068\u306e\u751f\u5b58\u7387\u3092\u8a08\u7b97\ntrain.groupby([\"Embarked\"])[\"Survived\"].mean()","8958c68e":"#\u540d\u524d\u306f\u656c\u79f0\u3060\u3051\u629c\u304d\u53d6\u308b\nimport re\ndef get_title(name):\n    title_search = re.search(' ([A-Za-z]+)\\.', name)\n    if title_search:\n        return title_search.group(1)\n    return \"\"\n\n#\"Title\"\u3068\u3044\u3046\u5217\u3092\u4f5c\u308a\u3001\u305d\u306e\u4e2d\u306b\u5168\u54e1\u5206\u306e\u656c\u79f0\u3092\u53ce\u9332\u3059\u308b\nfor df in [train,test]:\n    df['Title'] = df['Name'].apply(get_title)","6a6e0947":"train[\"Title\"].head()","9f744150":"#train\u306eTitle\u5217\u306e\u5404\u8981\u7d20\u306e\u500b\u6570\u3092\u8868\u793a\ntrain[\"Title\"].value_counts()","1adbb55f":"#test\u306eTitle\u5217\u306e\u5404\u8981\u7d20\u306e\u500b\u6570\u3092\u8868\u793a\ntest[\"Title\"].value_counts()","d5637498":"for df in data:\n    \n    # \"Mlle\",\"Ms\",\"Mme\" \u306f Miss \u306b\u7f6e\u304d\u63db\u3048\n    df['Title'] =df['Title'].replace([\"Mlle\",\"Ms\",\"Mme\"],\"Miss\") \n    \n    # \u305d\u308c\u4ee5\u5916\u306fOthers\u3078\n    df['Title'] = df['Title'].replace(['Lady', 'Countess','Capt', 'Col','Don', 'Dr', 'Major', 'Rev', 'Sir', 'Jonkheer', 'Dona'], 'Others')","3e969c68":"train.Title.value_counts()","16871ae3":"test.Title.value_counts()","366c946d":"train.isnull().sum()","a21a8145":"test.isnull().sum()","2206355c":"train.Embarked.value_counts()","d249b6c4":"train.Embarked=train.Embarked.fillna(\"S\")","3b42998c":"train.Embarked.value_counts()","a030e92e":"train.groupby(\"Title\")[\"Age\"].mean()","edd5386c":"for df in data:\n    mean = df.groupby(\"Title\")[\"Age\"].mean()\n    for title in mean.keys():\n        df.loc[(df.Age.isnull())&(df.Title==title),\"Age\"] = mean[title]\n#unique()\u306f\u91cd\u8907\u3057\u306a\u3044\u5024\u3092\u30ea\u30b9\u30c8\u306b\u3057\u3066\u8fd4\u3059pandas\u306e\u95a2\u6570","0ac43c3a":"#\u53c2\u8003\nmean.keys()","79b3ce28":"#test\u306eFare\u3092\u57cb\u3081\u308b\ntest.Fare=test.Fare.fillna(test.Fare.median())","c837a221":"train.isnull().sum()","d11db2e4":"test.isnull().sum()","6e623f1f":"sns.boxplot(train[\"Fare\"])\nplt.show()","099003c1":"for df in data:\n    df['Age_band'] = pd.cut(df[\"Age\"], [0, 22, 30, 37, 59, 100], labels=range(5), right=False)","d655571a":"train['Age_band'].head()","710f205f":"for df in data:\n    df['Fare_band'] = pd.cut(df[\"Fare\"], [0, 8, 15, 31, 66, 520], labels=range(5), right=False)","67f14538":"train['Fare_band'].head()","a42b0bc9":"sns.barplot(train[\"Age_band\"], train[\"Survived\"])\nplt.show()","793e7307":"sns.barplot(train[\"Fare_band\"], train[\"Survived\"])\nplt.show()","8a3dbc26":"sns.barplot(train[\"Title\"], train[\"Survived\"])\nplt.show()","6486fe19":"drop_columns = ['PassengerId', 'Name', 'Ticket', 'Cabin','Age','Fare']\n# \u4e0a\u306e6\u3064\u306ecolumn\u540d\u3092\u30ea\u30b9\u30c8\u306b\u3002","fcebe2e7":"train = train.drop(drop_columns, axis = 1)\ntest  = test.drop(drop_columns, axis = 1)","f7f1f29d":"data=[train,test]#for\u6587\u3067drop\u3057\u305f\u5834\u5408\u306b\u306f\u4e0d\u8981\nfor df in data:\n    # \u6027\u5225\u3092\u6570\u5b57\u3067\u304a\u304d\u304b\u3048\n    df.loc[df['Sex']==\"female\", \"Sex\"]=0\n    df.loc[df['Sex']=='male','Sex']=1\n    \n    # \u656c\u79f0\u3092\u6570\u5b57\u3067\u7f6e\u304d\u63db\u3048\n    df.loc[df['Title']=='Mr', 'Title']=0\n    df.loc[df['Title']=='Miss', 'Title']=1\n    df.loc[df['Title']=='Mrs', 'Title']=2\n    df.loc[df['Title']=='Master', 'Title']=3\n    df.loc[df['Title']=='Others', 'Title']=4\n    \n    # \u4e57\u8239\u3057\u305f\u6e2f\uff13\u7a2e\u985e\u3092\u6570\u5b57\u3067\u304a\u304d\u304b\u3048\n    df.loc[df['Embarked']=='S', 'Embarked']=0\n    df.loc[df['Embarked']=='C', 'Embarked']=1\n    df.loc[df['Embarked']=='Q', 'Embarked']=2","2531eb35":"#train[\"Survived\"]\ntrain.head()","e5d29c37":"# train.Fare_band = train.Fare_band.astype(int)","60b8d661":"train.corr()","c2d4c597":"# Title, Age_band, Fare_band\u3092\u542b\u3080\u5404\u5909\u6570\u306e\u76f8\u95a2\nsns.heatmap(train.corr(), cmap = \"summer\", annot = True)","5d5492fb":"<b>\u4e0d\u8981\u30c7\u30fc\u30bf\u306e\u524a\u9664<\/b><br><br>\n\u30fbPassengerId\u30fb\u30fb\u30fb\u5f62\u5f0f\u304c\u6271\u3044\u306b\u304f\u3044\uff08\u30af\u30e9\u30b9\u5206\u985e\u3057\u306b\u304f\u3044\uff09\u4e0a\u306b\u3001\u3042\u307e\u308a\u751f\u6b7b\u3068\u95a2\u4fc2\u304c\u306a\u3055\u305d\u3046<br>\n\u30fbName\u30fb\u30fb\u30fb\u656c\u79f0\u3092\u96c6\u3081\u305fTitle\u5217\u3092\u4f5c\u3063\u305f\u306e\u3067\u7528\u6e08\u307f<br>\n\u30fbTicket\u30fb\u30fb\u30fb\u898f\u5247\u6027\u304c\u898b\u51fa\u305b\u305a\u6271\u3044\u306b\u56f0\u308b<br>\n\u30fbCabin\u30fb\u30fb\u30fb\u6b20\u640d\u5730\u304c\u591a\u3059\u304e\u305f\u306e\u3067\u4e0d\u63a1\u7528<br>\n\u30fbAge\u30fb\u30fb\u30fbAge_band\u3092\u4f5c\u3063\u305f\u306e\u3067\u7528\u6e08\u307f<br>\n\u30fbFare\u30fb\u30fb\u30fbFare_band\u3092\u4f5c\u3063\u305f\u306e\u3067\u7528\u6e08\u307f","945f1ed3":"**\u6b20\u640d\u5024\u51e6\u7406**","7ec7cf75":"# \u524d\u51e6\u7406\u306e\u5b9f\u65bd","16f832c5":"# \u30c7\u30fc\u30bf\u306e\u524d\u51e6\u7406","391a5f79":"\u6570\u5024\u30c7\u30fc\u30bf\u306e\u30ab\u30c6\u30b4\u30e9\u30a4\u30ba\u5316","8607c709":"\u5168\u3066\u306e\u656c\u79f0\u306b\u5bfe\u3057\u3066\u3001\u3069\u306e\u656c\u79f0\u304c\u3044\u304f\u3064\u305a\u3064\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u304b\u3092\u8abf\u3079\u308b","c1e9ae34":"#### \u6b20\u640d\u5024\u51e6\u7406: Fare","e24962f5":"### \u6e2f\u3068\u751f\u5b58\u7387\u306e\u95a2\u4fc2","e9e47b45":"## \u524d\u51e6\u7406\u306e\u65b9\u91dd\u306e\u6c7a\u5b9a","c30e2472":"test\u306eFare\u304c\uff11\u7b87\u6240\u6b20\u3051\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u57cb\u3081\u3088\u3046\u3002<br>\n\u9ad8\u3005\uff11\u7b87\u6240\u306a\u306e\u3067\u3001test\u306e\u4ed6\u306eFare\u5217\u306e\u4e2d\u592e\u5024\u3092\u5165\u308c\u3066\u3057\u307e\u3048\u3070\u5341\u5206\u3060\u308d\u3046\u3002","0d5686a9":"\u30ab\u30c6\u30b4\u30e9\u30a4\u30ba\u5316\u3057\u305f\u8981\u7d20\u3092\u5207\u308a\u53e3\u3068\u3057\u3066\u30b0\u30e9\u30d5\u5316","4d8d4d31":"#### \u6b20\u640d\u5024\u51e6\u7406: Age","54e81501":"\u6b20\u640d\u5024\u306e\u78ba\u8a8d","f15c47b1":"\u5e74\u9f62\u3068\u751f\u5b58\u7387\u306e\u95a2\u4fc2","4e7f95d9":"### \u4e8b\u524d\u6e96\u5099","14c19db4":"\u3053\u306e\u30ea\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bcolumn\u3092train,test\u304b\u3089\u524a\u9664\u3057\u3088\u3046","e3f7aed3":"## Titanic \u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u53ef\u8996\u5316","183e6197":"<b>\u30c7\u30fc\u30bf\u3092\u5168\u3066\u6570\u5b57\u306b\u7f6e\u304d\u63db\u3048\u3088\u3046<\/b><br>\n\u3044\u307e\u6587\u5b57\u5217\u306e\u5f62\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u306e\u306f<br>\n\u30fbSex\u5217<br>\n\u30fbTitle\u5217<br>\n\u30fbEmbarked\u5217<br>\n\u3067\u3042\u308b\u3002\u3044\u305a\u308c\u3082\u30ab\u30c6\u30b4\u30ea\u3067\u3042\u308b\u306e\u3067\u3001\u30e9\u30d9\u30eb\u3068\u3057\u3066\u6570\u5b57\u3092\u5272\u308a\u5f53\u3066\u3066\u3042\u3052\u308c\u3070\u3088\u3044\u3002<br>\n\uff08\u4f8b)\u3000Mr:0,  Miss:1, Mrs:2\u3000\u30fb\u30fb\u30fb\u306a\u3069","b4cfa81b":"\u6539\u3081\u3066\u3001\u3069\u306e\u656c\u79f0\u304c\u3044\u304f\u3064\u305a\u3064\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u304b\u3092\u8abf\u3079\u308b","c2a0db7c":"## \u5916\u308c\u5024\u306e\u78ba\u8a8d","3bab424b":"### \u6027\u5225\u3068\u751f\u5b58\u7387\u306e\u95a2\u4fc2","c7f5696c":"\"S\"\u304c\u6700\u3082\u591a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u6b20\u640d\u5024\u306b\"S\"\u3092\u4ee3\u5165","8ca224fe":"\u4e0a\u306e\u65b9\u6cd5\u3067\u306f\u3001\u751f\u304d\u6b8b\u3063\u305f\u4eba\u6570\u3057\u304b\u308f\u304b\u3089\u306a\u3044\u305f\u3081\u3001\u4ea1\u304f\u306a\u3063\u305f\u4eba\u6570\u3082\u540c\u6642\u306b\u8abf\u3079\u305f\u3044\u3002<br>\n\u5973\u6027\u3067\u4ea1\u304f\u306a\u3063\u305f\u4eba\u6570\u3001\u751f\u304d\u6b8b\u3063\u305f\u4eba\u6570<br>\n\u7537\u6027\u3067\u4ea1\u304f\u306a\u3063\u305f\u4eba\u6570\u3001\u751f\u304d\u6b8b\u3063\u305f\u4eba\u6570<br>\n\u3092\u53d6\u5f97\u3057\u3088\u3046\u3002","ede089ea":"\u6027\u5225\u3054\u3068\u306b\u751f\u5b58\u7387\u3092\u6c42\u3081\u3066\u307f\u3088\u3046","b8bf12d8":"\u6b20\u640d\u5024\u51e6\u7406: Embarked","7f7a689d":"### \u5404\u8981\u7d20\u3068\u751f\u5b58\u3068\u306e\u95a2\u4fc2\u3092\u53ef\u8996\u5316","3c3789b4":"\u30c7\u30fc\u30bf\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d","e018a568":"\u6539\u3081\u3066train\u3001test\u305d\u308c\u305e\u308c\u306b\u3064\u3044\u3066\u5404\u5217\u306b\u304a\u3051\u308b\u6b20\u640d\u5024\u306e\u500b\u6570\u3092\u78ba\u8a8d"}}