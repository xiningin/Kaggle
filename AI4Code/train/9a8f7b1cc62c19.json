{"cell_type":{"9685adb1":"code","5e1b92d4":"code","8d3fa9a7":"code","236b33f7":"code","159ca607":"code","37a3fa27":"code","05d67d73":"code","80cf92a5":"code","68509d07":"code","69509a03":"markdown","44a8c550":"markdown","4f6e75f8":"markdown","f898b58e":"markdown","0ce5267c":"markdown"},"source":{"9685adb1":"from zipfile import ZipFile\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.image as img\nfrom mpl_toolkits.axes_grid1 import ImageGrid\nfrom PIL import Image\nimport cv2","5e1b92d4":"data = np.load(\"\/kaggle\/input\/ntt-data-global-ai-challenge-06-2020\/NTL-dataset\/npy\/East_China.npy\")","8d3fa9a7":"fig = plt.figure(figsize=(15., 15.))\ngrid = ImageGrid(fig, 111,  # similar to subplot(111)\n                 nrows_ncols=(3, 5),  # creates 2x2 grid of axes\n                 axes_pad=0.1,  # pad between axes in inch.\n                 )\n\nfor ax, im in zip(grid, range(15)):\n    # Iterating over the grid returns the Axes.\n    ax.imshow(data[im].astype(np.uint8))","236b33f7":"data.shape","159ca607":"whiteintensitythreshold = 230\nnumwhitethreshold = 70\ninterestingregions = pd.DataFrame([(i, j, numwhite) for i, j, numwhite in \n           ((i,j, np.sum(data[0, i:(i+30), j:(j+31)]>whiteintensitythreshold)) \n              for i in range(data.shape[1]-30) for j in range(data.shape[2]-31)) if numwhite>numwhitethreshold], \n                                  columns=[\"i\",\"j\", \"numwhite\"])","37a3fa27":"from sklearn.cluster import OPTICS\nclustering = OPTICS(min_samples=50).fit(interestingregions[[\"i\", \"j\"]])\nprint(set(clustering.labels_))\ninterestingregions[\"clusid\"] = clustering.labels_","05d67d73":"interestingregions.loc[interestingregions.groupby([\"clusid\"])[\"numwhite\"].idxmax()]","80cf92a5":"plt.imshow(data[0].astype(np.uint8))","68509d07":"\nfor idx, row in interestingregions.loc[interestingregions.groupby([\"clusid\"])[\"numwhite\"].idxmax()].iterrows():\n    cX = int(row[\"i\"]+20)\n    cY = int(row[\"j\"]+20)\n    radius = 20\n    cv2.circle(data[0], (int(cY), int(cX)), int(radius), (255, 255,  0), 3)\n    \nplt.imshow(data[0].astype(np.uint8))","69509a03":"We are now marking the spots with higher intensity in the map so we can compare with other maps","44a8c550":"We are now using cluster analysis to mark the higher intensity spots in the map","4f6e75f8":"# Analysis of Economic Activity of Night images from Black Marble site(Supplied by NTT DATA)\n\n\nWe have been provided Images from the Black Marble website \nhttps:\/\/ladsweb.modaps.eosdis.nasa.gov\/missions-and-measurements\/science-domain\/nighttime-lights\/\n\nThese are night time images over a period and we are attempting to map the light intensities so we can use the intensities to understand where we have night lights and what is the difference over each day. This can be used to understand Econmic activities","f898b58e":"Here we are just Viewing the Images from a NPY file. We have chosen East China images from the lot shared by NTT team","0ce5267c":"We have set a Threshold and now we are mapping white lights in a data frame"}}