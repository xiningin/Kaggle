{"cell_type":{"89471f99":"code","161c68d1":"code","62c52360":"code","802df1d0":"code","9a4203eb":"code","ce07d037":"code","b2e3e67e":"code","b87e1d96":"code","8f315135":"code","47165dfc":"code","4efa19ac":"code","b427cfb3":"code","66719b67":"code","c0003d56":"code","180bc3dc":"code","d079890d":"code","e47a73d2":"code","6ae097da":"markdown"},"source":{"89471f99":"import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nimport datetime as dt\nfrom sklearn.cluster import DBSCAN\ndf = pd.read_json('..\/input\/contact-tracing\/livedata.json')\ndf.head()","161c68d1":"BBox = (df.longitude.min(),df.longitude.max(),df.latitude.min(), df.latitude.max())\nBBox","62c52360":"banglore_m = plt.imread('..\/input\/bangalore-map\/map.png')\nfig, ax = plt.subplots(figsize = (10,10))\nax.scatter(df.longitude, df.latitude)\nax.set_title('Plotting Spatial Data on Map')\nax.set_xlim(BBox[0],BBox[1])\nax.set_ylim(BBox[2],BBox[3])\nax.imshow(banglore_m, extent = BBox, aspect= 'equal')\nplt.show()","802df1d0":"plt.figure(figsize=(10,10))\nsns.scatterplot(x=\"latitude\",y=\"longitude\",data=df,hue=\"id\")\nplt.legend(bbox_to_anchor= [1, 0.8])\nplt.grid()","9a4203eb":"a=df[df.id=='Ivan']\na.head()","ce07d037":"def generateBaseMap(default_location, default_zoom_start=12):\n    base_map = folium.Map(location=default_location, control_scale=True, zoom_start=default_zoom_start)\n    return base_map\n","b2e3e67e":"df.info()","b87e1d96":"df.duplicated().value_counts()","8f315135":"df=df.drop_duplicates()","47165dfc":"df.isnull().sum()","4efa19ac":"# Converting column to datetime\ndf['timestamp']=pd.to_datetime(df['timestamp'],format='%Y-%m-%d %H:%M:%S')\n# Creating hour column\ndf['hour']=df['timestamp'].apply(lambda x: x.hour+1)\ndf.head()","b427cfb3":"df2=pd.DataFrame(df.groupby(['hour','id'])['timestamp'].max())\ndf2.reset_index(inplace=True)\ndf2.head()","66719b67":"df3=pd.merge(df2,df,left_on=['hour','id','timestamp'],right_on=['hour','id','timestamp'])\ndf3.head()","c0003d56":"lat_long_list = []\nfor i in range(1,25):\n    temp=[]\n    for index, instance in df3[df3['hour'] == i].iterrows():\n        temp.append([instance['latitude'],instance['longitude']])\n    lat_long_list.append(temp)","180bc3dc":"from branca.element import Figure\nfig=Figure(width=550,height=350)","d079890d":"!pip install folium\n","e47a73d2":"import folium\nfrom folium.plugins import HeatMapWithTime\nfig7=Figure(width=850,height=550)\nm7=folium.Map(location=[13.12, 77.8],zoom_start=10)\nHeatMapWithTime(lat_long_list,radius=15,auto_play=True,position='bottomright').add_to(m7)\nm7","6ae097da":"Contact tracing is a process used by public health ministries to help stop the spread of infectious disease, such as COVID-19, within a community. "}}