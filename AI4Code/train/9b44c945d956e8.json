{"cell_type":{"066091dc":"code","aefba763":"code","3be29db3":"code","c28946c4":"code","05dc5af5":"code","ae0c7515":"code","859c0647":"code","c13c2a16":"code","3541d9f7":"code","5d32616b":"code","ad35e0fe":"code","5b9ca188":"code","e476ea52":"code","2828ff5e":"code","a20e7613":"code","b83e226b":"code","c7c876ad":"code","1c1ef068":"code","e495bff6":"code","c9bebf69":"code","52832261":"code","1d3ede88":"code","c813e78a":"code","176484af":"code","b3f1c524":"code","fcb3c53c":"code","a7756f37":"code","e6b5760c":"code","2cbf6b05":"code","a084b2b5":"code","7a3f1901":"code","77ed17b1":"code","fa3f6325":"code","d7577916":"code","f13be1c9":"code","27f49b93":"code","39bdbf36":"code","559325c1":"code","8cfb0734":"code","e0d7b953":"code","05d03d0b":"code","0e69f07d":"code","90c341d1":"code","172f1990":"code","2b7475fc":"code","c7ed1dfa":"code","b04fe1ad":"code","8656b009":"code","76c461c6":"code","620b32d6":"code","ea8852ea":"code","95dfb3f7":"code","f117a23b":"code","3933a910":"code","d31edbd4":"code","40ac2291":"code","34a4caa7":"code","eaf619cb":"code","b36fb182":"code","59bba907":"code","e5f46b50":"code","9a3431f3":"code","9402d4f0":"code","91b648cf":"code","18cda58c":"code","e1560280":"code","39d17474":"code","7088e2ff":"code","d7fccd9a":"code","90445a6e":"code","86e94c85":"code","2e7d1fe1":"code","0682537c":"code","f43272de":"code","dce7d0e4":"code","4295d740":"code","dc6d76af":"code","fef4398f":"markdown","850eb88d":"markdown","21683602":"markdown","63b98968":"markdown","41fb3124":"markdown","6caf640a":"markdown","dc2f5f28":"markdown","93b57e8c":"markdown","8b31b9bb":"markdown","c7ddcabd":"markdown","bfda0e36":"markdown","9441a6c3":"markdown","a2ad7195":"markdown","e2dce7f4":"markdown","c38ae3db":"markdown","f3088ebc":"markdown","d007d9b6":"markdown","a4c0771c":"markdown","4928e404":"markdown","e3893293":"markdown","febe0729":"markdown","db269e8f":"markdown","62f34fa7":"markdown","50667ae4":"markdown","5443a6bc":"markdown","393cf768":"markdown","803fd9e8":"markdown","ed5c5600":"markdown","cc5d624b":"markdown","f9460cc0":"markdown","e54f703f":"markdown"},"source":{"066091dc":"import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nimport warnings\nwarnings.filterwarnings('ignore')","aefba763":"df=pd.read_csv(\"..\/input\/ecommerce-uk-retailer\/Ecommerce.csv\",encoding= 'unicode_escape')","3be29db3":"df","c28946c4":"df[df.isnull().any(axis=\"columns\")]","05dc5af5":"df.info()","ae0c7515":"null_col=df[df.isnull().any(axis=\"columns\")].index","859c0647":"df.drop(null_col,inplace=True)","c13c2a16":"df.info()","3541d9f7":"df[\"InvoiceDate\"]=pd.to_datetime(df[\"InvoiceDate\"])\ndf[\"UnitPrice\"]=df[\"UnitPrice\"].astype('float')\ndf[\"CustomerID\"]=df[\"CustomerID\"].astype('int')\n","5d32616b":"df.info()","ad35e0fe":"neg_quantity=df[df['Quantity']<=0].index","5b9ca188":"df.drop(neg_quantity,inplace=True)","e476ea52":"df","2828ff5e":"fig,ax=plt.subplots(1,2,figsize=(10,5))\nax[0].boxplot(df[\"Quantity\"])\nax[0].set_xticklabels([\"Quantity\"])\nax[0].set_ylabel('Number of Quantities')\nax[1].boxplot(df[\"UnitPrice\"])\nax[1].set_xticklabels([\"UnitPrice\"])\nax[1].set_ylabel(\"Price\")\nplt.show()","a20e7613":"df1=df[df[\"Quantity\"]<10000]\ndf2=df1[df1[\"UnitPrice\"]<3000]","b83e226b":"fig,ax=plt.subplots(1,2,figsize=(10,5))\nax[0].hist(df2[\"Quantity\"],label=\"Quantity\",bins=[500,1000,2000,3000,4000,5000,6000,7000,8000,9000])\nax[0].set_ylabel(\"Frequency\")\nax[0].set_xlabel('Quantity')\nax[0].set_title(\"Quantity Distribution\")\nax[1].hist(df2[\"UnitPrice\"],label=\"Price\",bins=[100,500,1000,2000,3000,4000,5000,6000,7000,8000,9000])\nax[1].set_ylabel(\"Frequency\")\nax[1].set_xlabel('Price')\nax[1].set_title(\"Price Distribution\")\nplt.legend()\nplt.show()","c7c876ad":"df3=df2[df[\"Quantity\"]<2000]\n","1c1ef068":"sns.distplot(df3[\"Quantity\"])\nplt.show()","e495bff6":"sns.distplot(df3[\"UnitPrice\"])\nplt.show()","c9bebf69":"df3.describe()","52832261":"df3.nunique()","1d3ede88":"df3[df3.duplicated()]","c813e78a":"sns.heatmap(df3.corr(),annot=True)\nplt.show()","176484af":"sns.set_style('whitegrid')\nsns.lmplot(x ='Quantity', y ='UnitPrice', data = df3)\nplt.show()","b3f1c524":"df4=df3.groupby(['Country']).agg({'Quantity':\"count\"})","fcb3c53c":"df4","a7756f37":"plt.subplots(figsize=(10,6))\nplt.barh(df4.index,df4['Quantity'])\nplt.xticks(rotation=\"vertical\")\nplt.show()","e6b5760c":"df5=df3.groupby(['Country']).agg({'UnitPrice':\"sum\"})","2cbf6b05":"df5","a084b2b5":"plt.subplots(figsize=(10,6))\nplt.barh(df5.index,df5['UnitPrice'])\nplt.xticks(rotation=\"vertical\")\nplt.show()","7a3f1901":"sns.pairplot(df3 , hue = 'UnitPrice' , palette = 'coolwarm')\nplt.show()","77ed17b1":"plt.plot(df3[\"InvoiceDate\"],df3[\"Quantity\"],linestyle ='solid')\nplt.show()","fa3f6325":"df4=df3[df3[\"Quantity\"]<200]\nsns.distplot(df4[\"Quantity\"],kde=False)\nplt.ylabel(\"Frequency\")\nmedian_price = round(df4[\"Quantity\"].median(), 2)\nmean_price = round(df4[\"Quantity\"].mean(), 2)\nnames = [\"median\", \"mean\"]\ncolors = ['darkmagenta', 'darkorange']\nmeasurements = [median_price, mean_price]\nfor measurement, name, color in zip(measurements, names, colors):\n    plt.axvline(x=measurement, linestyle='--', linewidth=2.5, label='{0} at {1}'.format(name, measurement), c=color)\nplt.legend();\n\nplt.show()","d7577916":"df4=df3[df3[\"UnitPrice\"]<200]\nsns.distplot(df4[\"UnitPrice\"],kde=False)\nplt.ylabel(\"Frequency\")\nmedian_price = round(df4[\"UnitPrice\"].median(), 2)\nmean_price = round(df4[\"UnitPrice\"].mean(), 2)\nnames = [\"median\", \"mean\"]\ncolors = ['darkmagenta', 'darkorange']\nmeasurements = [median_price, mean_price]\nfor measurement, name, color in zip(measurements, names, colors):\n    plt.axvline(x=measurement, linestyle='--', linewidth=2.5, label='{0} at {1}'.format(name, measurement), c=color)\nplt.legend();\n\nplt.show()","f13be1c9":"df_new=pd.read_csv(\"..\/input\/ecommerce-uk-retailer\/Ecommerce.csv\",encoding= 'unicode_escape')","27f49b93":"df_new","39bdbf36":"df_new.info()","559325c1":"df_new.isnull().sum()","8cfb0734":"df_new[\"CustomerID\"]=df_new[\"CustomerID\"].fillna(df_new[\"CustomerID\"].mode()[0])","e0d7b953":"df_new.isnull().sum()","05d03d0b":"df_new[\"Description\"]=df_new[\"Description\"].fillna(df_new[\"Description\"].mode()[0])","0e69f07d":"df_new.isnull().sum()","90c341d1":"sns.boxplot(df_new[\"CustomerID\"])\nplt.show()","172f1990":"df_new.drop_duplicates(inplace=True)","2b7475fc":"df_new[df_new.duplicated()]","c7ed1dfa":"index1=df_new[df_new[\"Quantity\"]<0].index","b04fe1ad":"df_new.drop(index1,inplace=True)","8656b009":"df_new['InvoiceDate'] = df_new['InvoiceDate'].astype('datetime64[ns]')\ndf_new['Year'] = df_new.InvoiceDate.dt.year\ndf_new['Month'] = df_new.InvoiceDate.dt.month\ndf_new['Hour'] = df_new.InvoiceDate.dt.hour","76c461c6":"df_new['day'] = df_new['InvoiceDate'].dt.day_name()","620b32d6":"df_new.drop(['day'],axis=1)","ea8852ea":"df_new['Quantity'].value_counts().sum()","95dfb3f7":"orders=df_new.groupby(by=['CustomerID','Country'],sort=True)['InvoiceNo'].count().head()","f117a23b":"orders","3933a910":"top5=df_new.groupby(by=['CustomerID'],as_index=False)['Quantity'].sum().head()","d31edbd4":"top5","40ac2291":"plt.subplots(figsize=(15,6))\nplt.bar(top5.CustomerID,top5.Quantity)\nplt.xlabel('Customers ID')\nplt.ylabel('Number of Orders')\nplt.title('TOP 5 customers with higher number of orders')\nplt.show()","34a4caa7":"df_new[\"Revenue\"]=df_new[\"Quantity\"]*df_new[\"UnitPrice\"]","eaf619cb":"df_new[\"Revenue\"]","b36fb182":"money_spent = df_new.groupby(by=['CustomerID','Country']).agg({\"Revenue\":sum})","59bba907":"money_spent.head()","e5f46b50":"m =money_spent.sort_values(by='Revenue', ascending=False).head()\nm","9a3431f3":"orders_permonth=df_new.groupby(df_new[\"Month\"]).agg({\"InvoiceNo\":\"count\"})","9402d4f0":"orders_permonth","91b648cf":"plt.subplots(figsize=(10,6))\nplt.bar(orders_permonth.index,orders_permonth.InvoiceNo)\nplt.xlabel('Month of year')\nplt.ylabel('Number of Orders')\nplt.title('No. of Orders per month')\nplt.show()","18cda58c":"orders_perday=df_new.groupby(df_new[\"day\"]).agg({\"InvoiceNo\":\"count\"})","e1560280":"orders_perday=orders_perday.sort_values('InvoiceNo',ascending=False)","39d17474":"plt.subplots(figsize=(10,6))\nplt.bar(orders_perday.index,orders_perday.InvoiceNo)\nplt.xlabel('Day')\nplt.ylabel('Number of Orders')\nplt.title('No. of Orders per day')\nplt.show()","7088e2ff":"df_new['Hour']=df_new['InvoiceDate'].dt.hour\n","d7fccd9a":"df_new['Hour']","90445a6e":"orders_perhour=df_new.groupby(df_new[\"Hour\"]).agg({\"InvoiceNo\":\"count\"})","86e94c85":"orders_perhour","2e7d1fe1":"plt.subplots(figsize=(10,6))\nplt.bar(orders_perhour.index,orders_perhour.InvoiceNo)\nplt.xlabel('Hour')\nplt.ylabel('Number of Orders')\nplt.title('No. of Orders per hor')\nplt.show()","0682537c":"orders_percountry=df_new.groupby(df_new[\"Country\"]).agg({\"InvoiceNo\":\"count\"})","f43272de":"orders_percountry","dce7d0e4":"# trend plot\nfig = plt.figure(figsize=(15, 7))\nx1 = fig.add_subplot(111)\n\nx1.set_xlabel('Month',fontsize=15)\nx1.set_ylabel('Total Amount Spent ($)',fontsize=15)\nx1.set_title('Total Amount Spent for Months',fontsize=15)\n\nx1.bar(df_new.groupby(by=['Month'])['Revenue'].sum().index.tolist()[1:],\n        df_new.groupby(by=['Month'])['Revenue'].sum()[1:],\n        alpha=0.85,#If you want to make the graph plot more transparent, then you can make alpha less than 1, such as 0.5 or 0.25.\n        label='Amount Spent by Month')\n\nx2 = x1.twinx()# tread line\n\nx2.set_ylabel('Percentage Change of Total Amount Spent (%)',fontsize=15)\n\n#pct_change()Percentage change between the current and a prior element.\nx2.plot(df_new.groupby(by=['Month'])['Revenue'].sum().index.tolist()[1:], \n         df_new.groupby(by=['Month'])['Revenue'].sum()[1:].pct_change().fillna(0)*100,\n         label='Percentage change of total amount spent (%)',\n         color='red')\n\nx1.legend(loc='upper left')\nx2.legend(loc='upper right')\n\nfig.tight_layout()\nplt.show()","4295d740":"money_percountry=df_new.groupby(df_new[\"Country\"]).agg({\"Revenue\":\"sum\"})\n","dc6d76af":"money_percountry","fef4398f":"## c. Distribution Plot \u2013 All Numeric Variables","850eb88d":"## 15. How much money spent by each country?","21683602":"## 14. Orders trend across months","63b98968":"## 13. How many orders for each country?","41fb3124":"## 6. How many orders made by the customers?","6caf640a":"## 11. How many orders per day?","dc2f5f28":"### g. Correlation \u2013 Heatmap - All Numeric Variables","93b57e8c":"### h. Regression Plot - All Numeric Variables","8b31b9bb":"As mean is greater than median the Unit prices are positively skewed.","c7ddcabd":"## 5. Add the columns - Month, Day and Hour for the invoice","bfda0e36":"## 2. Check for missing values in all columns and replace them with the appropriate metric\n(Mean\/Median\/Mode)","9441a6c3":"### l. Plot the skewness - All Numeric Variables","a2ad7195":"As mean is greater than median the quantities are positively skewed.","e2dce7f4":"### e. Unique Values across all columns","c38ae3db":"### f. Duplicate values across all columns","f3088ebc":"## Importing Dataset","d007d9b6":"## 4. Remove rows which have negative values in Quantity column","a4c0771c":"### d. Aggregation for all numerical Columns","4928e404":"### k. Line chart to show the trend of data - All Numeric\/Date Variables","e3893293":"## Cleaning unwanted data","febe0729":"## 10. How many orders per month?","db269e8f":"## 8. How much money spent by the customers?","62f34fa7":"## Importing Libraries","50667ae4":"## b. Histogram \u2013 All Numeric Variables","5443a6bc":"### i. Bar Plot \u2013 Every Categorical Variable vs every Numerical Variable","393cf768":"## 7. TOP 5 customers with higher number of orders","803fd9e8":"## 3.Remove duplicate rows","ed5c5600":"## 1. Perform Basic EDA\n\n  ## a. Boxplot \u2013 All Numeric Variables","cc5d624b":"## 12. How many orders per hour?","f9460cc0":"### j. Pair plot - All Numeric Variables","e54f703f":"## 9.Top 5 customer with their country with highest money spent"}}