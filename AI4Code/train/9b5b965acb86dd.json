{"cell_type":{"70a5adbb":"code","337af5a1":"code","45296c4e":"code","5d6071c4":"code","58bbafec":"code","7d61dab9":"code","e837f3b6":"code","9d62538b":"code","84344417":"code","83f8f3b6":"code","5279a1c1":"code","ca595096":"code","26d7451f":"code","542f25d1":"code","b1fcb988":"code","821a5082":"code","eb4c05ea":"code","23b1415c":"code","f653a29e":"code","628a27e2":"code","6ca16e8a":"code","4b46edf8":"markdown","4f3f4b91":"markdown","a0064c82":"markdown","4d27078e":"markdown","ed54f418":"markdown","2cf6b182":"markdown","d84d63bb":"markdown","dfdcde99":"markdown","2437a32d":"markdown","ef06b2c9":"markdown","d8e40c5d":"markdown","f1f40633":"markdown","6b35d25b":"markdown"},"source":{"70a5adbb":"# packages\n\n# standard\nimport numpy as np\nimport pandas as pd\nimport time\n\n# plots\nimport matplotlib.pyplot as plt\nimport plotly.express as px\nimport seaborn as sns","337af5a1":"# import and preview\ndf = pd.read_csv('..\/input\/predicting-animal-behavior-using-gps\/gps\/anon_gps_tracks_with_dive.csv')\ndf = df.drop(columns=['Unnamed: 0'], axis=1)\ndf.head()","45296c4e":"features_num = ['lat','lon','alt','max_depth.m','coverage_ratio']\ndf[features_num].describe()","5d6071c4":"# we have 3 species: Razorbill, Common Guillemot, European Shag\nprint(df.species.value_counts())\n# plot\ndf.species.value_counts().sort_index().plot(kind='bar')\nplt.grid()\nplt.title('Number of records by species')\nplt.show()","58bbafec":"# we have 10 colonies\nprint(df.colony2.value_counts())\n# plot\ndf.colony2.value_counts().sort_index().plot(kind='bar')\nplt.grid()\nplt.title('Number of records by colony')\nplt.show()","7d61dab9":"# we have 108 invidivual birds\ndf.bird.value_counts()","e837f3b6":"# data comprises 4 years\nprint(df.year.value_counts())\n# plot\ndf.year.value_counts().sort_index().plot(kind='bar')\nplt.grid()\nplt.title('Number of records by year')\nplt.show()","9d62538b":"birds_per_colony = df.groupby(['colony2'])['bird'].nunique()\nprint(birds_per_colony)\nbirds_per_colony.plot(kind='bar')\nplt.title('Birds per Colony')\nplt.grid()\nplt.show()","84344417":"df.groupby(['colony2','species'])['bird'].nunique()","83f8f3b6":"birds_per_species = df.groupby(['species'])['bird'].nunique()\nprint(birds_per_species)\nbirds_per_species.plot(kind='bar')\nplt.title('Birds per species')\nplt.grid()\nplt.show()","5279a1c1":"# plot all tracks\nplt.figure(figsize=(8,8))\nplt.scatter(df.lon, df.lat, c=df.bird, s=1)\nplt.title('All tracks in one picture')\nplt.grid()\nplt.show()","ca595096":"# plot all tracks - colored by colony\nplt.figure(figsize=(8,8))\nplt.scatter(df.lon, df.lat, c=df.colony2, s=1)\nplt.title('All tracks - Colored by colony')\nplt.grid()\nplt.show()","26d7451f":"# plot tracks by colony - colored by individual bird\nfor selected_colony in range(1,10+1):\n    df_col = df[df.colony2==selected_colony]\n\n    plt.figure(figsize=(6,6))\n    plt.scatter(df_col.lon, df_col.lat, \n                c=df_col.bird, s=1)\n    plt.title('Tracks of colony ' + str(selected_colony))\n    plt.grid()\n    plt.show()","542f25d1":"selected_bird = 2\n\ndf_ex = df[df.bird==selected_bird].reset_index(drop=True)\ndf_ex","b1fcb988":"# dives?\ndf_ex.is_dive.value_counts()","821a5082":"# plot track (2D)\nplt.figure(figsize=(8,8))\nplt.scatter(df_ex.lon, df_ex.lat, c=df_ex.index)\nplt.grid()\nplt.title('Individual Track 2D (Color ~ Time)')\nplt.show()\n\n# show color encoding\nplt.figure(figsize=(9,2))\nplt.scatter(df_ex.index, np.ones(df_ex.shape[0]), \n            c=df_ex.index, s=150)\nplt.title('Color encoding')\nplt.xticks(rotation=90)\nax = plt.gca()\nax.axes.yaxis.set_visible(False) # hide y-axis\nplt.grid()\nplt.show()","eb4c05ea":"# plot track (2D) - dives only\ndf_ex_dives = df_ex[df_ex.is_dive==True]\nplt.figure(figsize=(8,8))\nplt.scatter(df_ex_dives.lon, df_ex_dives.lat, \n            c=df_ex_dives.index)\nplt.grid()\nplt.title('Individual Track 2D - Dives (Color ~ Time)')\nplt.show()","23b1415c":"# different visualization - highlight dives using color\nplt.figure(figsize=(8,8))\nplt.scatter(df_ex.lon, df_ex.lat, c=df_ex.is_dive)\nplt.grid()\nplt.title('Individual Track 2D (Color ~ Dive [yellow])')\nplt.show()","f653a29e":"plt.figure(figsize=(14,6))\nplt.scatter(df_ex.index, df_ex.alt)\nax.xaxis.set_major_locator(plt.MaxNLocator(20)) # reduce number of x-labels\nplt.xticks(rotation=90)\nplt.xlabel('Index')\nplt.ylabel('Altitude')\nplt.grid()\nplt.title('Individual Track - Altitude Profile')\nplt.show()","628a27e2":"# interactive 3d plot of track\ndf_ex['size']=1\nfig = px.scatter_3d(df_ex, x='lon', y='lat', z='alt',\n                    color=df_ex.index,\n                    size='size',                    \n                    size_max=10,\n                    hover_data=['date_time'],\n                    opacity=1)\nfig.update_layout(title='Individual Track - Color~Time')\nfig.show()","6ca16e8a":"# interactive 3d plot of track\ndf_ex['size']=1\nfig = px.scatter_3d(df_ex, x='lon', y='lat', z='alt',\n                    color=df_ex.alt,\n                    size='size',                    \n                    size_max=10,\n                    hover_data=['date_time'],\n                    opacity=1)\nfig.update_layout(title='Individual Track - Color~Altitude')\nfig.show()","4b46edf8":"#### Birds by species","4f3f4b91":"<a id='3'><\/a>\n# Track individual Birds","a0064c82":"#### Birds by colony:","4d27078e":"### Data description from RTF file:\nlat - latitude, with colony location removed (so colony is at 0)\n\nlon - longitude, with colony location removed (so colony is at 0)\n\nbird - bird ID (1 to N)\n\nspecies - species ID (tRAZO = Razorbill, tCOGU = Common Guillemot, tEUSH = European Shag)\n\nyear - Year of recording\n\ndate_time - Date and time of sample\n\nmax_depth.m - maximum dive depth in a 100 second window\n\ncolony2 - colony ID (1 to N)\n\ncoverage_ratio - the proportion of available fixes recorded in a 10 sample window centred on this sample\n\nis_dive - whether or not this location contains a dive classified as > 3 m (used in main analyses)\n\nis_dive_1m - whether or not this location contains a dive classified as > 1 m ( used in SI)\n\nis_dive_2m - ... a dive classified as > 2 m ( used in SI)\n\nis_dive_4m - ... a dive classified as > 4 m ( used in SI)\n\nis_dive_5m - ... a dive classified as > 5 m ( used in SI)\n\nis_dive_0m - ... a dive classified as > 0 m ( used in SI)","ed54f418":"### Grouped counts","2cf6b182":"# Exploring movement and diving behaviour of seabirds\n\n## Table of contents\n* [General Explorations](#1)\n* [Overview of Tracks](#2)\n* [Track individual Birds](#3)","d84d63bb":"<a id='2'><\/a>\n# Overview of Tracks","dfdcde99":"Colony 8 consists of only 1 bird!","2437a32d":"<a id='1'><\/a>\n# General Explorations","ef06b2c9":"### Categorical Features","d8e40c5d":"### Same plot, but use altitude for coloring:","f1f40633":"#### Further drilldown - split by species:","6b35d25b":"### Numerical Features - Basic Stats"}}