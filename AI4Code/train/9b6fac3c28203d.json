{"cell_type":{"1bf82d78":"code","005bfd00":"code","17b53a3c":"code","76125cc2":"code","82311653":"code","f58a1a91":"code","804e0cd4":"code","2e221f15":"code","38491ef2":"code","64a4c78c":"code","8a451d4d":"code","f6a690d6":"code","eb7c30c5":"markdown","59524ef3":"markdown","ecc46436":"markdown","37d52317":"markdown","267d4b9f":"markdown","d430a6e4":"markdown","eb9db647":"markdown","b3f131ab":"markdown","81b64b17":"markdown","9c80c4b8":"markdown"},"source":{"1bf82d78":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","005bfd00":"# Import data vis tool\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline","17b53a3c":"\ndata = pd.read_csv(\"\/kaggle\/input\/creditcardfraud\/creditcard.csv\")\n\ndata.head()\n","76125cc2":"#examine the index list\ndata.columns","82311653":"# split dataset for further processing\nfraud = data[data['Class']==1]\nnormal = data[data['Class']==0]","f58a1a91":"# See overall ststs\npd.concat([fraud.Time.describe(), normal.Time.describe()], axis=1)\n","804e0cd4":"# plot hist \nplt.figure(figsize=(20, 10))\n\nplt.subplot(2, 1, 1)\nfraud_24time = fraud.copy()\nfraud_24time.Time = fraud_24time.Time % 86400 #(86400s per 24h)\nfraud_24time.Time \/= (86400\/24)\nfraud_24time.Time.hist(bins=50,label=\"Fraudulant Transaction\",weights=np.ones(len(fraud_24time)) \/ len(fraud_24time))\nplt.xlim([0,24])\nplt.ylim([0,0.12])\nplt.legend()\n\nplt.subplot(2, 1, 2)\nnormal_24time = normal.copy()\nnormal_24time.Time  = normal_24time.Time  % 86400 #(86400s per 24h)\nnormal_24time.Time  \/= (86400\/24)\nnormal_24time.Time .hist(bins=50,label=\"Non Fraudulant Transaction\",weights=np.ones(len(normal_24time)) \/ len(normal_24time))\nplt.xlim([0,24])\nplt.ylim([0,0.12])\nplt.legend()","2e221f15":"f , ax = plt.subplots(figsize = (14,12))\nplt.title('Correlation of Numeric Features',y=1,size=16)\nsns.heatmap(data.corr(),square = True,  vmax=0.8)","38491ef2":"cols = data.corr().nlargest(5,'Class')['Class']\nprint(cols)","64a4c78c":"pd.concat([fraud.Amount.describe(), normal.Amount.describe()], axis=1)","8a451d4d":"# plot hist \nplt.figure(figsize=(20, 10))\n\nplt.subplot(2, 1, 1)\nfraud.Amount.hist(bins=50,label=\"Fraudulant Transaction\")\nplt.legend()\n\nplt.subplot(2, 1, 2)\nnormal.Amount.hist(bins=50,label=\"Non Fraudulant Transaction\")\nplt.legend()","f6a690d6":"plt.figure(figsize=(30, 10))\n\nprint()\nplt.subplot(2, 1, 1)\nsubfraud = fraud[fraud.Amount<400]\nsubfraud.Amount.hist(bins=200,weights=np.ones(len(subfraud.Amount)) \/ len(subfraud.Amount))\nplt.title(\"Fraudulant Transaction Amount Distribution\")\nplt.legend()\nplt.xlim([-10,400])\nplt.ylim([0,0.5])\n\nplt.subplot(2, 1, 2)\nsubnormal = normal[normal.Amount<400]\nsubnormal.Amount.hist(bins=200, weights=np.ones(len(subnormal.Amount)) \/ len(subnormal.Amount))\nplt.title(\"Normal Transaction Amount Distribution\")\nplt.legend()\nplt.xlim([-10,400])\nplt.ylim([0,0.5])","eb7c30c5":"# Summary\nGeneral EDA\n* **!!!Concern**: Due to privacy rule, all the data here has been transformed by PCA except three cols, \"Time\", \"Amount\" and \"Class(fraud = 1)\". There are not many manual analyses that can be combined with life experience.\n* There is no null data or empty data.\n\nTime\n* My intuition is frauds more likely happens during certain time frames like maybe midight.\n* We can find two special time frames i.e. 2-3am and 11-12am that a fraud more often happens.\n\nAmount\n* I have a feeling that the amount of fraud is concentrated in two segments. One is a small amount of about 1 dollar, and the other is a larger amount of about 100 dollar.\n\nIt makes sense. Because most scammers will first use a very small amount like $1 to try to see if the fraud can be successful, which is less likely be detected. After successful, they will transfer with a larger amount of money to efficiently steal your money.\n\n* You can find two peaks (bin 1 dollar and bin 100 dollar) in fraud distribution while normal distribution doesnt have this pattern.","59524ef3":"## Time && Class\nMy intuition is frauds more likely happens during certain time frames like maybe midight.","ecc46436":"## Amount && Class","37d52317":"Seems like it's not obvious enough to prove our hypothesis. Let's do some further processing. \n* Use subset of the data (nearly 95% per) to avoid some extreme large data points. Then we have better x-axis resolution.\n* Replace the number of occurrences with the proportion of occurrences. Because the dataset is quite biased. ( Lots of normal with a few fraud)","267d4b9f":"At first, load our dataset.","d430a6e4":"Now its more obvious. You can find two peaks (bin 1 and bin 100) in fraud distribution while normal distribution doesnt have this pattern.","eb9db647":"From this table, I have a feeling that the amount of fraud is concentrated in two segments. One is a small amount of about 1 dollar, and the other is a larger amount of about 100 dollar.\n\nIt makes sense. Because most scammers will first use a very small amount like $1 to try to see if the fraud can be successful, which is less likely be detected. After successful, they will transfer with a larger amount of money to efficiently steal your money.","b3f131ab":"# Let's start to play with our data a little bit","81b64b17":"We can find two special time frames i.e. 2-3am and 11-12am that a fraud more often happens.","9c80c4b8":"Unfortunately, due to privacy rule, all the data here has been transformed by PCA except three cols, \"**Time**\", \"**Amount**\" and \"**Class**(fraud = 1)\".\n\nHence, with only simple visualization tools, most likely we can only manually find some relationships or insights among these three features.\n\nMaybe we need a new dataset. But that's probably what we can do for this one. "}}