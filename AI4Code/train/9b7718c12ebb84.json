{"cell_type":{"17cb5b86":"code","d7a205bb":"code","4a54a3d6":"code","1fe6b3e0":"code","491700d5":"code","66fc964c":"code","5070eca5":"code","5e3440ea":"code","8fc0ee5c":"code","c5fc122d":"code","f27229d2":"code","afe6b806":"code","ecec8c35":"code","438dd888":"code","e110fd06":"markdown","86e4fe1c":"markdown","b74469d8":"markdown","c60fa7c7":"markdown","7c3ba0ff":"markdown","b21f4246":"markdown","d9b3a26e":"markdown","1d128179":"markdown","b672245f":"markdown"},"source":{"17cb5b86":"import numpy as np \nimport pandas as pd \nimport matplotlib.pyplot as plt\n\nused_cars = pd.read_csv('\/kaggle\/input\/used-car-traders-dealers-in-pakistan\/Used Car Trader  Dealers in Pakistan.csv')\npk_cities = pd.read_csv('\/kaggle\/input\/pakistan-cities\/pk.csv')\ndial_codes = pd.read_csv('\/kaggle\/input\/d\/abdulazizniazi\/pakistan-cities-dialcalling-code-source-ptcl\/Pakistan Cities Calling Code.csv')","d7a205bb":"used_cars.describe()","4a54a3d6":"used_cars.head()","1fe6b3e0":"pk_cities","491700d5":"dial_codes","66fc964c":"def remove_city_suffix(row):\n    if \"City\".lower() in row.city.lower():\n        return row.city[:row.city.index(\" City\")]\n    else:\n        return row.city","5070eca5":"pk_cities.city = pk_cities.apply(lambda row:remove_city_suffix(row), axis = 1)\npk_cities","5e3440ea":"used_cars.isnull().sum()","8fc0ee5c":"used_cars.Address.fillna(\"others\")","c5fc122d":"unique_add = used_cars.Address\nunique_add","f27229d2":"def city_names(row):\n    address = row.Address\n    cities = pk_cities.city\n    phone = str(row.Phone)\n    if not isinstance(address,str):\n        address = str(address)\n    for city in cities:\n        if city.lower() in address.lower():\n            return city\n        \n    for i,phone_row in dial_codes.iterrows():\n        if phone.startswith(str(phone_row.area_codes)):\n            for c in cities:\n                if c.lower() in phone_row.city.lower():\n                    return c\n            return phone_row.city\n    return \"others\"","afe6b806":"city_data = used_cars.apply(lambda row: city_names(row), axis = 1)","ecec8c35":"result_data = pd.Series(city_data,name=\"City\").to_frame().drop_duplicates(subset=\"City\")\nresult_data[\"Count\"] = result_data.apply(lambda row: city_data.value_counts().to_frame()[0][row.City], axis = 1)\nresult_data = result_data.sort_values(\"Count\",ascending = False).reset_index(drop=True)\nresult_data","438dd888":"arr = np.array(result_data.Count.tolist())\nplt.pie(arr,labels =  result_data.City,autopct='%1.1f%%')\nplt.rcParams.update({'font.size': 20,'figure.figsize':(26,26)})\nplt.title(\"Cities with most used car dealerships\")\nplt.show() \nplt.savefig('Cities with most used car dealerships.png')","e110fd06":"Removing City suffix in the data we used for cities.","86e4fe1c":"# Filtering Cities\nFinding city names in data in addresses and cross matching phone dial codes for unknown enteries.","b74469d8":"Importing Dial Codes to cross match with addresses that doesn't have city name in address","c60fa7c7":"# Conclusion\n> We can conclude that Karachi has most used cars dealerships followed by Lahore. However, provided data had lacked city names in addresses and\/or dial codes which resulted in \"others\" as biggest part of the data.","7c3ba0ff":"# Exploring\nUnderstanding data and the requirements.","b21f4246":"I can see some addresses are just mobile numbers. We will treat these entries as \"others\".","d9b3a26e":"# Cleaning Data","1d128179":"# Results","b672245f":"> Some addresses are null, we can figure out there city by checking their phone number e.g if phone starts with 021 (21) the dealer is from karachi. However, if the number provided starts with 03XX then that will be a mobile number and we can't be sure about the address.For the above reason we will treat these dealerships as others for now"}}