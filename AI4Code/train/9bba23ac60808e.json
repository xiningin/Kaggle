{"cell_type":{"0fcbdb4e":"code","d360ad83":"code","41ee5cf8":"code","e2577074":"code","baf1670a":"code","a727b502":"code","b7afe7fe":"code","5080d79f":"code","35c8fe6a":"code","86075679":"code","8bc8a0d6":"code","b99f6223":"code","63ca7960":"code","70a02682":"code","8cc81854":"code","6af34c6e":"code","68711816":"code","2acc2dbe":"code","a5f2b5f9":"code","a6e36392":"code","301a8770":"code","822f04ea":"code","f6119007":"code","d281ae2a":"code","ee64a473":"code","78222fda":"code","ac1f3af8":"code","da02ce8d":"code","018c9150":"code","bb4e75ea":"code","1cc55100":"code","c2630acd":"code","04ab967f":"code","13bbe4e0":"code","5fe73b24":"code","66d6899a":"code","a14cd4aa":"markdown","b25938f5":"markdown","e42bf478":"markdown","7360c1c4":"markdown","877ba063":"markdown","24ad26fd":"markdown","5fd85f2b":"markdown","fc09772e":"markdown","0c7cb5f5":"markdown","2bab59c1":"markdown","9b9fc124":"markdown","5ead3f7e":"markdown","9471b8a8":"markdown","f1dfe5d9":"markdown","dcdb91a4":"markdown","0a65a027":"markdown","cb4bc419":"markdown","3cc9b5b3":"markdown","2b6b55a5":"markdown","a6fc8feb":"markdown","32fd4988":"markdown","0d0ab16c":"markdown","082d73b7":"markdown","58227425":"markdown","a107ce97":"markdown","36dbd255":"markdown","e0d1f23b":"markdown","e045a65f":"markdown","ce2a6456":"markdown","9efed23c":"markdown","3ad2b4b6":"markdown","d4bc949f":"markdown","9e548167":"markdown"},"source":{"0fcbdb4e":"import seaborn as sns\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np","d360ad83":"\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the \"..\/input\/\" directory.\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# Any results you write to the current directory are saved as output.","41ee5cf8":"data = pd.read_csv('\/kaggle\/input\/hotel-booking-demand\/hotel_bookings.csv')","e2577074":"def explore(data):\n    summaryDf = pd.DataFrame(data.dtypes, columns=['dtypes'])\n    summaryDf = summaryDf.reset_index()\n    summaryDf['Name'] = summaryDf['index']\n    summaryDf['Missing'] = data.isnull().sum().values\n    summaryDf['Total'] = data.count().values\n    summaryDf['MissPerc'] = (summaryDf['Missing']\/data.shape[0])*100\n    summaryDf['NumUnique'] = data.nunique().values\n    summaryDf['UniqueVals'] = [data[col].unique() for col in data.columns]\n    print(summaryDf.head(30))","baf1670a":"explore(data)","a727b502":"data.dtypes","b7afe7fe":"sns.heatmap(data.corr())","5080d79f":"sns.countplot(data.arrival_date_year)","35c8fe6a":"data_july = data.loc[data.arrival_date_month=='July']\nplt.figure(figsize=(15,6))\nsns.countplot(data_july.arrival_date_day_of_month, hue=data_july.arrival_date_year)\nplt.xticks(rotation=90)","86075679":"pct_change = pd.DataFrame(data_july.groupby(['arrival_date_year'])['hotel'].count())\npct_change['pct_change'] = data_july.groupby(['arrival_date_year'])['hotel'].count().pct_change() * 100\npct_change","8bc8a0d6":"fig = plt.figure(figsize=(20,10))\nplt.pie(data['country'].value_counts(), labels=data['country'].value_counts().index)\nfig.set_facecolor('lightgrey')\nplt.show()","b99f6223":"df_bycountry = data_july.groupby(['country', 'arrival_date_year']).size().reset_index(name='counts')\nplt.figure(figsize=(20,5))\nsns.barplot(data=df_bycountry, x='country', y='counts', hue='arrival_date_year')\nplt.ylabel('Count')\nplt.xlabel('Country Code')\nplt.xticks(rotation=90)","63ca7960":"int_df = data_july.loc[data_july.country.isin(['PRT', 'GBR', 'ESP', 'DEU', 'FRA', 'BEL', 'IRL', 'ITA', 'USA', 'CHE'])]\ndf_by_country_hotel = int_df.groupby(['country', 'arrival_date_year', 'hotel']).size().reset_index(name='counts')","70a02682":"plt.figure(figsize=(20,10))\nplt.subplot(2,1,1)\nax1 = sns.barplot(data=df_by_country_hotel.loc[df_by_country_hotel.hotel=='Resort Hotel'], x='country', y='counts', hue='arrival_date_year')\nax1.set_title('Resort Hotel')\nplt.subplot(2,1,2)\nax2 = sns.barplot(data=df_by_country_hotel.loc[df_by_country_hotel.hotel=='City Hotel'], x='country', y='counts', hue='arrival_date_year')\nax2.set_title('City Hotel')","8cc81854":"plt.figure(figsize=(20,6))\nsns.countplot(data.arrival_date_week_number, hue=data.arrival_date_year)\nplt.xticks(rotation=90)","6af34c6e":"data['lead_time'].describe()","68711816":"sns.distplot(data['lead_time'])","2acc2dbe":"data_time = data[['country', 'lead_time']]","a5f2b5f9":"data_nld = data_time.loc[data_time.country=='NLD']\ndata_usa = data_time.loc[data_time.country=='USA']\nplt.figure(figsize=(15,5))\nplt.subplot(1,2,1)\nax1=sns.distplot(data_nld['lead_time'])\nax1.set_title('lead time distribution - NLD')\nplt.subplot(1,2,2)\nax2=sns.distplot(data_usa['lead_time'])\nax2.set_title('lead time distribution - USA')\nplt.show()","a6e36392":"data_cn = data_time.loc[data_time.country=='CN']\ndata_aut = data_time.loc[data_time.country=='AUT']\nplt.figure(figsize=(15,5))\nplt.subplot(1,2,1)\nax1=sns.distplot(data_cn['lead_time'])\nax1.set_title('lead time distribution - CN')\nplt.subplot(1,2,2)\nax2=sns.distplot(data_usa['lead_time'])\nax2.set_title('lead time distribution - AUT')\nplt.show()","301a8770":"labels = ['Resort Hotel Lead Time', 'City Hotel Lead Time']\nplt.figure()\nsns.kdeplot(data.loc[data.hotel=='Resort Hotel', 'lead_time'], shade=True)\nsns.kdeplot(data.loc[data.hotel=='City Hotel', 'lead_time'], shade=True)\nplt.legend(labels)","822f04ea":"data['total_nights'] = data['stays_in_weekend_nights'] + data['stays_in_week_nights']","f6119007":"data.groupby(['total_nights', 'hotel']).size().reset_index(name='counts')","d281ae2a":"data_tn = data.groupby(['total_nights', 'hotel']).size().reset_index(name='counts')\nplt.figure(figsize=(15,5))\nsns.barplot(x='total_nights', y='counts', hue='hotel', data=data_tn)\nplt.xticks(rotation=90)\nplt.show()","ee64a473":"data_yr = data.loc[data.arrival_date_year==2016]","78222fda":"months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\ndata_yr_grp = data_yr.groupby(['arrival_date_month', 'hotel']).size().reset_index(name='counts')\nplt.figure(figsize=(15,5))\nsns.barplot(x='arrival_date_month', y='counts', hue='hotel', data=data_yr_grp, order=months)","ac1f3af8":"data['kids'] = data.children + data.babies","da02ce8d":"data_kids = data.loc[data.kids>0]\nct1 = pd.crosstab(data_kids.kids, data_kids.hotel).apply(lambda x: x\/x.sum(), axis=0)\ndata_babies = data.loc[data.babies>0]\nct2 = pd.crosstab(data_babies.kids, data_babies.hotel).apply(lambda x: x\/x.sum(), axis=0)\nct1.plot.bar()","018c9150":"ct2.plot.bar()","bb4e75ea":"data.loc[data.meal=='Undefined', 'meal'] = 'SC'","1cc55100":"# taking top 10 seen countries\ndata_meal_tc = data.loc[data.country.isin(['PRT', 'GBR', 'ESP', 'DEU', 'FRA', 'BEL', 'IRL', 'ITA', 'USA', 'CHE'])].groupby(['country', 'meal']).size().reset_index(name='counts')\nplt.figure(figsize=(20,5))\nsns.barplot(data=data_meal_tc, x='country', y='counts', hue='meal')","c2630acd":"perc = data.loc[data.country.isin(['PRT', 'GBR', 'ESP', 'DEU', 'FRA', 'BEL', 'IRL', 'ITA', 'USA', 'CHE'])].groupby(['country', 'meal']).size()\npercbycountry = perc.groupby(level=0).apply(lambda x: 100 * x\/float(x.sum())).reset_index(name='percgp')","04ab967f":"plt.figure(figsize=(20,5))\nsns.barplot(data=percbycountry, x='country', y='percgp', hue='meal')","13bbe4e0":"perc = data.loc[data.country.isin(['PRT', 'GBR', 'ESP', 'DEU', 'FRA', 'BEL', 'IRL', 'ITA', 'USA', 'CHE'])].groupby(['country', 'hotel']).size()\npercbycountry = perc.groupby(level=0).apply(lambda x: 100 * x\/float(x.sum())).reset_index(name='percgp')","5fe73b24":"# looking at percentage from top 10 countries going to which hotel\nplt.figure(figsize=(20,5))\nsns.barplot(data=percbycountry, x='country', y='percgp', hue='hotel')","66d6899a":"countries = ['PRT', 'GBR', 'ESP', 'DEU', 'FRA', 'BEL', 'IRL', 'ITA', 'USA', 'CHE']\nx = 1\nplt.figure(figsize=(20,10))\nfor country in countries:\n    temp_df = data.loc[data.country==country].groupby(['hotel', 'meal']).size()\n    perc = temp_df.groupby(level=0).apply(lambda x: x\/float(x.sum()) * 100).reset_index(name='percgrp')\n    plt.subplot(2, 5, x)\n    ax = sns.barplot(data=perc, x='hotel', y='percgrp', hue='meal')\n    ax.set_title(country)\n    x+=1\nplt.show()","a14cd4aa":"## Grouping by country and hotel type","b25938f5":"From the plot and stats, a customer is more likely to book the resort hotel closer to the holiday date than the city hotel (20 day difference on average). This could be for a number of reasons. The first thing that comes to mind is that if a customer wants to go to a resort, usually (assumption), they will stay within the resort and enjoy the holiday there. On the other hand, a city hotel stay usually involves a greater level of planning due to the customer wanting to see the surrounding area (city).","e42bf478":"## Looking at lead time","7360c1c4":"# Hotel Booking Demand - Basic Starter Analysis","877ba063":"## Taking a full year","24ad26fd":"on average, 104 days pass between the booking and the client checking into the hotel","5fd85f2b":"Checking split of data based on year","fc09772e":"Plotting previous as percentage of group totals","0c7cb5f5":"TBC","2bab59c1":"It seems like having kids with you doesn't lead you to pick one hotel over another.","9b9fc124":"It seems like there is no large difference between the top 10 countries in terms of the type of meal chosen. Not splitting according to the chosen hotel to see if that has an affect.","5ead3f7e":"Meal value definitions:\n* BB - bed & breakfast\n* HB - half board - breakfast and one other meal, usually dinner\n* FB - beakfast, lunch and dinner\n* Undefined\/SC - no meal package","9471b8a8":"Straight away we can see how the majority of clients pick the bed and breakfast option. Interestingly, people originating from Germany staying at the Resort hotel go for the half board option almost as much as bed and breakfast.","f1dfe5d9":"Looks like an overall increase in the number of bookings year on year. Let's group by the year and make sure.","dcdb91a4":"Take 2 countries, 1 being far away from the assumed location of the hotel (USA) with the other being somewhere closeby. In this case NLD was chosen since it has a comparable number of occurrances in the dataset w.r.t. USA.","0a65a027":"Taking the 'class' column, here being hotel, we can see how there's been a steady year on year increase of:","cb4bc419":"No surprises there, Portugal having the largest portion of visitors to the hotel. Interestingly, the decrease in Portugal's visitors can mostly be seen in the visitors that stayed at the city hotel, with the resort hotel's visitors remaining somewhat constant for PRT while increasing steadily elsewhere.","3cc9b5b3":"Hi Guys! I thought I should pop my Kaggle notebook cherry by doing a simple analysis on this hotel booking data. Please fill free to leave any feedback in the comments, I will be adding to this notebook as time goes by. \n\nAlso please do leave suggestions as to how I can make this better and where I should expand on.","2b6b55a5":"# Meal insight","a6fc8feb":"Majority of bookings for the city hotel are short stays, 4-5 nights. The resort hotel also sees a majority of short stays, but more people opt to go for a whole weeks worth of nights. ","32fd4988":"A better view of the split by country","0d0ab16c":"But the majority (~50%) are booked within 69 days from the travel date. Is there a relationship between the country of origin and the amount of lead time. ","082d73b7":"They have comparable distributions. Maybe it's because a direct flight can be booked (and it's easier)(assumption) from the US to the hotel location. Trying the same thing now comparing a country farther away, such as China and another european country, austria (picked due to nearly same number of occurrances).","58227425":"Interestingly, there is an increase in visitors per country across the board. That is, apart from Portugal (PRT), which has seen quite worrying declining numbers. Why?","a107ce97":"Looking at correlations","36dbd255":"Now lets look at the same type of plot but this time for the total number of nights spent on holiday","e0d1f23b":"Let's try doing the same thing, but this time taking into consideration the different hotel types (City Hotel and Resort Hotel).","e045a65f":"## The effect of Families on the hotel choice","ce2a6456":"It seems like no matter the distance, people usually book around 3 months prior to a holiday. That goes to show how easy travel has become nowadays.","9efed23c":"## Market Segment & Distribution Channel","3ad2b4b6":"## Plotting on a week by week basis","d4bc949f":"A percentage increase of 64.7% between 2015 and 2016, with 16.2% seen between 2016 and 2017. Why such a large change? Let's see if we can find out why by looking at the places that people were visiting from.","9e548167":"Extending this to see the common portions. Only month that is common for all 3 years is July."}}