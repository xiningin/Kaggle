{"cell_type":{"06a1ff06":"code","5916e182":"code","90954b8c":"code","1f27120d":"code","e60dfc92":"code","1681d2b4":"code","753c29d9":"code","1ac9db45":"code","fe37f707":"markdown","36ea12a3":"markdown","b7aea8ed":"markdown","a64c7938":"markdown","85a26076":"markdown","d698f929":"markdown","98419604":"markdown","540a8a35":"markdown","49f5ee82":"markdown","72206e0b":"markdown","dfa9f8ad":"markdown","0baacd2b":"markdown"},"source":{"06a1ff06":"import numpy as np\nimport pandas as pd\nimport plotnine as pn #To avoid universal import\ndata = pd.read_csv(\"..\/input\/Pokemon.csv\", index_col=0)\ndata.Generation = data.Generation.astype(\"object\")\ndata.head()","5916e182":"dataHold = data.groupby([\"Generation\"]).mean().reset_index()\n(pn.ggplot(dataHold)\n + pn.aes(x=\"Sp. Atk\", y=\"Sp. Def\", color=\"Generation\", label=\"Generation\")\n + pn.geom_path(size=1)\n + pn.geom_point(color=\"black\")\n + pn.geom_text(color=\"black\",\n                size=10,\n                nudge_y=0.4\n               )\n + pn.scale_x_continuous(limits=(65, 78),\n                         breaks=np.arange(65, 78, 2.5),\n                         expand=(0, 0)\n                        )\n + pn.scale_y_continuous(limits=(67.5, 78),\n                         breaks=np.arange(67.5, 78, 2.5),\n                         expand=(0, 0)\n                        )\n + pn.theme(panel_background=pn.element_rect(fill=\"white\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"black\"\n                                      )\n           )\n + pn.labs(x=\"Base Sp. Attack\",\n           y=\"Base Sp. Defense\",\n           color=\"Gen.\"\n          )\n + pn.ggtitle(\"Relation between Sp. Attack and Sp. Defense over Time\")\n)","90954b8c":"dataHold = data.groupby([\"Generation\"]).mean().reset_index()\ndataHold = data.groupby([\"Generation\"]).mean().reset_index()\n(pn.ggplot(dataHold)\n + pn.aes(x=\"Sp. Atk\", y=\"Sp. Def\", color=\"Generation\", label=\"Generation\")\n + pn.geom_path(size=1)\n + pn.geom_point(color=\"black\")\n + pn.geom_text(data=dataHold.iloc[[0, 1, 3, 5], :],\n                color=\"black\",\n                size=10,\n                nudge_y=0.4\n               )\n  + pn.geom_text(data=dataHold.iloc[[2, 4], :],\n                color=\"black\",\n                size=10,\n                nudge_y=-0.4\n               )\n + pn.scale_x_continuous(limits=(65, 78),\n                         breaks=np.arange(65, 78, 2.5),\n                         expand=(0, 0)\n                        )\n + pn.scale_y_continuous(limits=(67.5, 78),\n                         breaks=np.arange(67.5, 78, 2.5),\n                         expand=(0, 0)\n                        )\n + pn.theme(panel_background=pn.element_rect(fill=\"white\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"black\"\n                                      )\n           )\n + pn.labs(x=\"Base Sp. Attack\",\n           y=\"Base Sp. Defense\",\n           color=\"Gen.\"\n          )\n + pn.ggtitle(\"Relation between Sp. Attack and Sp. Defense over Time\")\n)","1f27120d":"\"\"\"\nData copied from the ggplot2 documentation (https:\/\/ggplot2.tidyverse.org\/reference\/geom_spoke.html)\nThe pokemon data isn't ideal for this, so lets create a dataframe!\n\"\"\"\ndataHold = pd.DataFrame({\"angle\": np.random.uniform(0, 2 * np.pi, 121),\n                         \"speed\": np.random.uniform(0, 0.5, size=121)},\n                        index=pd.MultiIndex.from_product([range(11), range(11)], names=[\"X\", \"Y\"])\n                       ).reset_index()\ndataHold.head()","e60dfc92":"(pn.ggplot(dataHold)\n + pn.aes(x=\"X\", y=\"Y\", angle=\"angle\", radius=\"speed\")\n + pn.geom_point(size=0.5,\n                 color=\"white\"\n                )\n + pn.geom_spoke(pn.aes(color=\"speed\"), \n                 size=1\n                )\n + pn.scale_x_continuous(limits=(0, 10),\n                         breaks=np.arange(0, 11, 2),\n                         expand=(0, 0.5)\n                        )\n + pn.scale_y_continuous(limits=(0, 10),\n                         breaks=np.arange(0, 11, 2),\n                         expand=(0, 0.5)\n                        )\n + pn.theme(panel_background=pn.element_rect(fill=\"black\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"white\"\n                                      ),\n            figure_size=(10, 10)\n           ) \n +pn.labs(color=\"Speed\")\n + pn.scale_color_gradient2(low=\"yellow\", mid=\"orange\", high=\"red\", midpoint=0.25)\n + pn.ggtitle(\"An Arbitrary Vector Space\")\n)","1681d2b4":"(pn.ggplot(data)\n + pn.aes(x=\"Attack\", color=\"Legendary\")\n + pn.geom_density(size=1, \n                   trim=False\n                  )\n + pn.facet_wrap(\"~ Generation\")\n + pn.scale_x_continuous(limits=(0, 201),\n                         breaks=np.arange(0, 201, 50),\n                         expand=(0, 0)\n                        )\n + pn.scale_y_continuous(limits=(0, 0.02),\n                         breaks=np.arange(0, 0.021, 0.005),\n                         expand=(0, 0)\n                        )\n + pn.theme(panel_background=pn.element_rect(fill=\"white\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"black\"\n                                      ),\n            figure_size=(12, 6)\n           )  \n + pn.labs(y=\"Density\")\n + pn.ggtitle(\"Base Attack Stat for Legendary and Non-Legendary\\n Pokemon Across Generations\\n\")\n)","753c29d9":"(pn.ggplot(data)\n + pn.aes(x=\"Attack\")\n + pn.geom_density(size=1, \n                   trim=False,\n                   color=\"darkslateblue\"\n                  )\n + pn.facet_grid(\"Generation ~ Legendary\")\n + pn.scale_x_continuous(limits=(0, 201),\n                         breaks=np.arange(0, 201, 50),\n                         expand=(0, 0)\n                        )\n + pn.scale_y_continuous(limits=(0, 0.02),\n                         breaks=np.arange(0, 0.021, 0.005),\n                         expand=(0, 0)\n                        )\n + pn.theme(panel_background=pn.element_rect(fill=\"white\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"black\"\n                                      ),\n            figure_size=(6, 12)\n           )  \n + pn.labs(y=\"Density\")\n + pn.ggtitle(\"Base Attack Stat for Legendary and Non-Legendary\\n Pokemon Across Generations\\n\")\n)","1ac9db45":"(pn.ggplot(data)\n + pn.aes(x=\"Defense\", y=\"Sp. Def\")\n + pn.geom_jitter(pn.aes(color=\"Type 1\"),\n                  size=1\n                 )\n + pn.geom_smooth(size=0.5,\n                  color=\"white\",\n                  method=\"lm\",\n                  fullrange=False,\n                  se=False\n                 )\n + pn.facet_grid(\"Generation ~ Legendary\")\n + pn.theme(panel_background=pn.element_rect(fill=\"black\"),\n            panel_grid=pn.element_line(size=0.25,\n                                       color=\"white\"\n                                      ),\n            figure_size=(8, 12)\n           )  \n + pn.ggtitle(\"Correlation bettween Defense and Sp. Defense\\n by Generation and LEgendary Status\\n\")\n)","fe37f707":"On this plot, I also added and labelled the points. But some of the labels are on top of lines or other points. One way to fix this is to specify subsets for labelling.","36ea12a3":"This demonstrates another strength of `Plotnine`. While we can specify within `pn.ggplot()` and a single call of `pn.aes()` what data set and variables to use, at any time we call these inside any `pn.geom` to plot a unique set for that data.","b7aea8ed":"Another type of three dimensional plot is known as a spoke plot. If you've studied pysics or engineering, this will look very familiar to you as they are essentially depictions of vector fields! They are good for plotting data where each position is associeated with a direction and magnitude.","a64c7938":"For more information on `Plotnine`, check out their API at https:\/\/plotnine.readthedocs.io\/en\/stable\/api.html\n\nAs it's (essentially) a direct port of `ggplot2`, you can also check out the ggplot2 API at https:\/\/ggplot2.tidyverse.org\/reference\/index.html","85a26076":"Another way to break down relations between data is to facetting. In facetting, rather than having each variable be a different color(eg), you have each variable be a different graph!","d698f929":"Larning about `Plotnine` (a Python 3 implementation of R's `ggplot2`) has been alot of fun! Though there are several good guides, I though I'd put a series of my own together  to walk through the different plot types available. This is section is in 3D plotting and facetting, and it covers path plots, spoke plots, and various methods of facetting.","98419604":"Frequently, 3D plotting involves the relationship between two variables over time. Perhaps the easiest way to do this a `pn.geom_path` plot. This plots a variable on each axis, then connects them based on their order in time, producing a path.","540a8a35":"The `pn.facet_wrap` allows us to create multiple graphs for a single stat. The \"~\" is important. It indicates which stat we are breaking the graphs by and MUST be included. But what if we wanted to break it up further? ","49f5ee82":"In this case, use `pn.facet_grid`. Here, the data to be graphed along the row comes before the \"~\" and the data to be along the columns after. The power is that this type of facetting can be used for any type of plot!","72206e0b":"Another useful plot for 3D plotting is a `pn.geom_contour`, similar to `pn.geom_density_2d` . This uses contour curves (like a map) to illustrate the relations between 3 variables. Unfortunately, `Plotnine` has no plans to support this feature (see https:\/\/github.com\/has2k1\/plotnine\/issues\/110).","dfa9f8ad":"That finish section 3! Stay tuned for section 4, Advanced Plotting, where I try an example to push what is possible with `Plotnine`.","0baacd2b":"This could be considered 4D space as each (x, y) point contains a direction and magnitude; however, it's also equally valid to think of this as each (x, y) point containing a single vector. Either works!"}}