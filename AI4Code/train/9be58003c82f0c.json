{"cell_type":{"e669d930":"code","fc565d2b":"code","5d2b3c9c":"code","c8cd30bf":"code","b84cdc29":"markdown","cecdd435":"markdown","ebb73210":"markdown"},"source":{"e669d930":"import requests\nimport pandas as pd\nfrom IPython.display import display\npd.set_option(\"display.max_rows\",None)","fc565d2b":"def api_extract(country,n=-1):\n    '''\n    Function to extract university information from an API \"http:\/\/universities.hipolabs.com\/search?country=\"\n    param country: Country for which one needs the university data\n    paran n: Number of records to return. -1 returns all the data\n    '''\n    err=0 # initializing an error variable to 0\n    req = requests.get(f\"http:\/\/universities.hipolabs.com\/search?country={country.lower().replace(' ','%20')}\") # API request\n    if req.status_code!= 200: # if status code != 200 error variable is assigned to 1\n        err = 1\n\n    js = req.json() # Getting the request output\n\n    try:    \n        if err==1:\n            raise Exception()\n        df = pd.DataFrame()\n        for i in js[0].keys(): # Structuring the JSON output into a data frame\n            df[i] = [j[i] for j in js]\n    except:\n        return \"No Data Found\" # Returning no data upon an error\n    else:\n        if n!=-1:\n            return df.head(n)\n        else:\n            return df","5d2b3c9c":"# API request for university data in the US\napi_extract(\"United States\",10)","c8cd30bf":"req = requests.get(\"https:\/\/api.covid19api.com\/summary\")\n# req.status_code #Need not check the status code since there is no scope for error unless the API in not functional\njs = req.json()\n\n\ncountry_data = pd.DataFrame()\nfor i in range(len(js[\"Countries\"])):\n    js[\"Countries\"][i].pop(\"Premium\")\n    country_data = country_data.append(pd.DataFrame(js[\"Countries\"][i],index=[i])).copy()\n\ncountry_data_main = country_data.copy()\ndisplay(country_data)","b84cdc29":"<h2>Extracting Covid data from <a href='https:\/\/api.covid19api.com\/summary'>https:\/\/api.covid19api.com\/summary<\/a>","cecdd435":"<h1>Extracting data from an API<\/h1>","ebb73210":"<h2>Extracting University information from <a href='http:\/\/universities.hipolabs.com\/search?country=india'>http:\/\/universities.hipolabs.com\/search?country=india<\/a><\/h2>"}}