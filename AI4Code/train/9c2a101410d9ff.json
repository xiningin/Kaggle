{"cell_type":{"33d3e36b":"code","01a98fc9":"code","ffc749bc":"code","8df25e5e":"code","34ce720b":"code","6d3c07ce":"code","35fb7987":"code","69495087":"code","45eb2900":"code","305c2b85":"code","730c9d91":"code","1fed7fc3":"code","1136bb98":"code","dd740bfa":"code","ab16eb81":"code","9fdbf459":"code","d528424a":"code","f7c82ca0":"code","1b6690f8":"code","67adaa20":"code","6cc86676":"code","67d5cb4f":"code","e7923158":"code","7b6cca6e":"code","ab8a6959":"code","b051881d":"code","ceedcc50":"code","1e1cf6b0":"code","615d55f9":"code","7e5d4093":"code","8e66e93e":"code","f3ef31cd":"code","46669ae2":"code","bfe7143e":"markdown","0ce65102":"markdown","fd7ffbdf":"markdown","3675b034":"markdown","eda04504":"markdown","15d2e3e2":"markdown","aea41675":"markdown","8b1e99ed":"markdown","c48f7fe9":"markdown","51ef2600":"markdown","0f483cbc":"markdown","cc250a45":"markdown","29c17a22":"markdown","814d4409":"markdown","af1e04df":"markdown"},"source":{"33d3e36b":"# This Python 3 environment comes with many helpful analytics libraries installed\n# It is defined by the kaggle\/python Docker image: https:\/\/github.com\/kaggle\/docker-python\n# For example, here's several helpful packages to load\n\nimport numpy as np # linear algebra\nimport pandas as pd # data processing, CSV file I\/O (e.g. pd.read_csv)\n\n# Input data files are available in the read-only \"..\/input\/\" directory\n# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n\nimport os\nfor dirname, _, filenames in os.walk('\/kaggle\/input'):\n    for filename in filenames:\n        print(os.path.join(dirname, filename))\n\n# You can write up to 20GB to the current directory (\/kaggle\/working\/) that gets preserved as output when you create a version using \"Save & Run All\" \n# You can also write temporary files to \/kaggle\/temp\/, but they won't be saved outside of the current session","01a98fc9":"train = pd.read_csv('\/kaggle\/input\/jane-street-market-prediction\/train.csv')\ntrain.head()","ffc749bc":"len(train)","8df25e5e":"feat_cols = [f'feature_{i}' for i in range(130)]","34ce720b":"col_nan_dict = {}\nfor col in feat_cols:\n    nan_num = len(train[train[col].isna()])\n    col_nan_dict[col] = nan_num\n    print(f'{col:11}: {nan_num:7}')","6d3c07ce":"col_nan_df = pd.DataFrame()\ncol_nan_df['col'] = col_nan_dict.keys()\ncol_nan_df['nan'] = col_nan_dict.values()\ncol_nan_df.head()","35fb7987":"same_nan_df = col_nan_df.groupby('nan')['col'].apply(list).reset_index()\nsame_nan_df","69495087":"for _nan, _col in same_nan_df.values:\n    print(f'{_nan:6}:', _col)","45eb2900":"import seaborn as sns\nimport matplotlib.pyplot as plt","305c2b85":"def make_plots(Vs):\n    col = 4\n    row = len(Vs)\/\/4+1\n    plt.figure(figsize=(20,row*5))\n    idx = train[~train[Vs[0]].isna()].index\n    for i,v in enumerate(Vs):\n        plt.subplot(row,col,i+1)\n        n = train[v].nunique()\n        x = np.sum(train.loc[idx,v]!=train.loc[idx,v].astype(int))\n        y = np.round(100*np.sum(train[v].isna())\/len(train),2)\n        t = 'int'\n        if x!=0: t = 'float'\n        plt.title(v+' has '+str(n)+' '+t+' and '+str(y)+'% nan')\n        plt.yticks([])\n        h = plt.hist(train.loc[idx,v],bins=100)\n        if len(h[0])>1: plt.ylim((0,np.sort(h[0])[-2]))\n    plt.show()\nVs = ['feature_0', 'feature_1', 'feature_2', 'feature_5', 'feature_6', 'feature_37', 'feature_38', 'feature_39', 'feature_40', 'feature_41', 'feature_42', 'feature_43', 'feature_46', 'feature_47', 'feature_48', 'feature_49', 'feature_50', 'feature_51', 'feature_52', 'feature_53', 'feature_54', 'feature_57', 'feature_60', 'feature_61', 'feature_62', 'feature_63', 'feature_64', 'feature_65', 'feature_66', 'feature_67', 'feature_68', 'feature_69', 'feature_70', 'feature_71', 'feature_77', 'feature_83', 'feature_89', 'feature_95', 'feature_101', 'feature_107', 'feature_113', 'feature_119']\nmake_plots(Vs)","730c9d91":"def make_corr(Vs,Vtitle=''):\n    cols = Vs\n    plt.figure(figsize=(15,15))\n    sns.heatmap(train[cols].corr(), cmap='RdBu_r', annot=True, center=0.0)\n    if Vtitle!='': plt.title(Vtitle,fontsize=14)\n    else: plt.title(Vs[0]+' - '+Vs[-1],fontsize=14)\n    plt.show()\nVtitle = 'nan0'\nmake_corr(Vs,Vtitle)","1fed7fc3":"Vs = ['feature_37', 'feature_38', 'feature_39', 'feature_40']\nVtitle = 'nan0_slice37-40'\nmake_corr(Vs,Vtitle)","1136bb98":"Vs = ['feature_1', 'feature_2', 'feature_69', 'feature_70', 'feature_71']\nVtitle = 'nan0_slice37-40'\nmake_corr(Vs,Vtitle)","dd740bfa":"Vs = ['feature_41', 'feature_42', 'feature_43', 'feature_46', 'feature_47', 'feature_48', 'feature_49', 'feature_50', 'feature_51', 'feature_52', 'feature_53', 'feature_54']\nVtitle = 'nan0_slice41-54'\nmake_corr(Vs,Vtitle)","ab16eb81":"Vs = ['feature_60', 'feature_61', 'feature_62', 'feature_63', 'feature_64', 'feature_65', 'feature_66', 'feature_67', 'feature_68', 'feature_69', 'feature_70', 'feature_71']\nVtitle = 'nan0_slice60-71'\nmake_corr(Vs,Vtitle)","9fdbf459":"Vs = ['feature_89', 'feature_95', 'feature_101', 'feature_107', 'feature_113', 'feature_119']\nVtitle = 'nan0_slice89-119'\nmake_corr(Vs,Vtitle)","d528424a":"Vs = ['feature_122', 'feature_123']\nVtitle = 'nan223'\nmake_corr(Vs,Vtitle)","f7c82ca0":"Vs = ['feature_3', 'feature_4', 'feature_44', 'feature_45']\nVtitle = 'nan448'\nmake_corr(Vs,Vtitle)","1b6690f8":"Vs = ['feature_9', 'feature_10', 'feature_19', 'feature_20', 'feature_29', 'feature_30', 'feature_73', 'feature_79', 'feature_85', 'feature_91', 'feature_97', 'feature_103', 'feature_109', 'feature_115']\nVtitle = 'nan788'\nmake_corr(Vs,Vtitle)","67adaa20":"Vs = ['feature_128', 'feature_129']\nVtitle = 'nan1921'\nmake_corr(Vs,Vtitle)","6cc86676":"Vs = ['feature_15', 'feature_16', 'feature_25', 'feature_26', 'feature_35', 'feature_36', 'feature_76', 'feature_82', 'feature_88', 'feature_94', 'feature_100', 'feature_106', 'feature_112', 'feature_118']\nVtitle = 'nan6683'\nmake_corr(Vs,Vtitle)","67d5cb4f":"Vs = ['feature_126', 'feature_127']\nVtitle = 'nan8853'\nmake_corr(Vs,Vtitle)","e7923158":"Vs = ['feature_13', 'feature_14', 'feature_23', 'feature_24', 'feature_33', 'feature_34', 'feature_75', 'feature_81', 'feature_87', 'feature_93', 'feature_99', 'feature_105', 'feature_111', 'feature_117']\nVtitle = 'nan15353'\nmake_corr(Vs,Vtitle)","7b6cca6e":"Vs = ['feature_124', 'feature_125']\nVtitle = 'nan16083'\nmake_corr(Vs,Vtitle)","ab8a6959":"Vs = ['feature_74', 'feature_80', 'feature_86', 'feature_92', 'feature_98', 'feature_104', 'feature_110', 'feature_116']\nVtitle = 'nan64088'\nmake_corr(Vs,Vtitle)","b051881d":"Vs = ['feature_120', 'feature_121']\nVtitle = 'nan69854'\nmake_corr(Vs,Vtitle)","ceedcc50":"Vs = ['feature_11', 'feature_12']\nVtitle = 'nan80015'\nmake_corr(Vs,Vtitle)","1e1cf6b0":"Vs = ['feature_21', 'feature_22', 'feature_31', 'feature_32']\nVtitle = 'nan81444'\nmake_corr(Vs,Vtitle)","615d55f9":"Vs = ['feature_72', 'feature_78', 'feature_84', 'feature_90', 'feature_96', 'feature_102', 'feature_108', 'feature_114']\nVtitle = 'nan351426'\nmake_corr(Vs,Vtitle)","7e5d4093":"Vs = ['feature_7', 'feature_8']\nVtitle = 'nan393153'\nmake_corr(Vs,Vtitle)","8e66e93e":"Vs = ['feature_17', 'feature_18', 'feature_27', 'feature_28']\nVtitle = 'nan395535'\nmake_corr(Vs,Vtitle)","f3ef31cd":"lst = [2, 6, 38, 40, 83, 69, 49, 61, 63, 66, 68, 101, 107, 113, 119, 4, 10, 20, 30, 16, 26, 36, 14, 24, 34, 111, 117, 110, 116, 12, 22, 32, 96, 102, 108, 114, 8, 18, 28]","46669ae2":"all_drop_cols = [f'feature_{i}' for i in lst]\nprint(all_drop_cols)","bfe7143e":"drop 69","0ce65102":"drop 12","fd7ffbdf":"drop 61, 63, 66, 68","3675b034":"drop 10, 20, 30","eda04504":"drop 8","15d2e3e2":"drop 14, 24, 34, 111, 117","aea41675":"drop 96, 102, 108, 114","8b1e99ed":"drop 18, 28","c48f7fe9":"drop 101, 107, 113, 119","51ef2600":"drop 22, 32","0f483cbc":"drop 2, 6, 38, 40, 83","cc250a45":"drop 16, 26, 36","29c17a22":"drop 49","814d4409":"drop 4","af1e04df":"drop 110, 116"}}