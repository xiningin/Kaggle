{"cell_type":{"422d8c9e":"code","92ee669c":"code","99c57207":"code","72b71ecc":"code","da38e377":"code","398c1f1d":"code","86dd677c":"code","82e24d2c":"code","4b1a341f":"code","796bfc75":"code","e6b52905":"code","0999b38c":"code","a2392880":"code","ab439ebf":"code","db949037":"code","1fcc7e51":"code","6cea4f07":"code","a85826f2":"code","fc83dad3":"code","ed648280":"code","79a5be6f":"code","2ad7e40c":"code","a971aaab":"code","ab6baac8":"code","4b8f9820":"code","c81b34ae":"code","4ea2a293":"code","e1d12bcf":"code","cbd7e0e6":"code","8c66edf2":"code","733066e3":"code","91352bce":"code","be51528d":"markdown","937a6d82":"markdown","67793715":"markdown","b1d389f3":"markdown","0a1c0b84":"markdown","7a8feb49":"markdown","6f6ee19e":"markdown","d84a2467":"markdown","96efdf9a":"markdown","7a79be40":"markdown","b7eea1c8":"markdown","989c2e3f":"markdown","b23ffb47":"markdown","97040747":"markdown","3c0b8631":"markdown","5d092a19":"markdown","d751c6ad":"markdown","1a3de243":"markdown","aedd4486":"markdown","64578451":"markdown","76c61ab7":"markdown","3f8e7760":"markdown","1c1f44f9":"markdown"},"source":{"422d8c9e":"import numpy as np\nimport pandas as pd\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nsns.set()\n\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nfrom scipy import stats\nfrom scipy.stats import chi2_contingency \n\nimport statsmodels.api as sm\nfrom statsmodels.formula.api import ols","92ee669c":"df=pd.read_csv(\"..\/input\/311-service-requests-nyc\/311_Service_Requests_from_2010_to_Present.csv\")\ndf.head()","99c57207":"df.describe()","72b71ecc":"df.shape","da38e377":"# Converting the data into datetime format\ndf[\"Created Date\"]=pd.to_datetime(df[\"Created Date\"])\ndf[\"Closed Date\"]=pd.to_datetime(df[\"Closed Date\"])","398c1f1d":"#Creating the new column that consist the amount of time taken to resolve the complaint\ndf[\"Request_Closing_Time\"]=(df[\"Closed Date\"]-df[\"Created Date\"])\n\nRequest_Closing_Time=[]\nfor x in (df[\"Closed Date\"]-df[\"Created Date\"]):\n    close=x.total_seconds()\/60\n    Request_Closing_Time.append(close)\n    \ndf[\"Request_Closing_Time\"]=Request_Closing_Time","86dd677c":"df[\"Agency\"].unique()","82e24d2c":"#Univariate Distribution Plot for Request Closing Time\nsns.distplot(df[\"Request_Closing_Time\"])\nplt.show","4b1a341f":"print(\"Total Number of Concerns : \",len(df),\"\\n\")\nprint(\"Percentage of Requests took less than 100 hour to get solved   : \",round((len(df)-(df[\"Request_Closing_Time\"]>100).sum())\/len(df)*100,2),\"%\")\nprint(\"Percentage of Requests took less than 1000 hour to get solved : \",round((len(df)-(df[\"Request_Closing_Time\"]>1000).sum())\/len(df)*100,2),\"%\")","796bfc75":"#Univariate Distribution Plot for Request Closing Time\nsns.distplot(df[\"Request_Closing_Time\"])\nplt.xlim((0,5000))\nplt.ylim((0,0.0003))\nplt.show()","e6b52905":"# Count plot to understand the type of the complaint raised\ndf['Complaint Type'].value_counts()[:10].plot(kind='barh',alpha=0.6,figsize=(15,10))\nplt.show()","0999b38c":"#Categorical Scatter Plot to understand which type of complaints are taking more time to get resolved\ng=sns.catplot(x='Complaint Type', y=\"Request_Closing_Time\",data=df)\ng.fig.set_figwidth(15)\ng.fig.set_figheight(7)\nplt.xticks(rotation=90)\nplt.ylim((0,5000))\nplt.show()","a2392880":"# Count plot to know the status of the requests\ndf['Status'].value_counts().plot(kind='bar',alpha=0.6,figsize=(15,7))\nplt.show()","ab439ebf":"#Count Plot for Coloumn Borough\nplt.figure(figsize=(12,7))\ndf['Borough'].value_counts().plot(kind='bar',alpha=0.7)\nplt.show()","db949037":"#Percentage of cases in each Borough\nfor x in df[\"Borough\"].unique():\n    print(\"Percentage of Request from \",x,\" Division : \",round((df[\"Borough\"]==x).sum()\/len(df)*100,2))","1fcc7e51":"#Unique Location Types\ndf[\"Location Type\"].unique()","6cea4f07":"#Request Closing Time for all location Type sorted in ascending Order\npd.DataFrame(df.groupby(\"Location Type\")[\"Request_Closing_Time\"].mean()).sort_values(\"Request_Closing_Time\")","a85826f2":"#Request Closing Time for all City sorted in ascending Order\npd.DataFrame(df.groupby(\"City\")[\"Request_Closing_Time\"].mean()).sort_values(\"Request_Closing_Time\")","fc83dad3":"#Percentage Of Missing Value\npd.DataFrame((df.isnull().sum()\/df.shape[0]*100)).sort_values(0,ascending=False)[:20]","ed648280":"#Remove the column with very high percentage of missing value\nnew_df=df.loc[:,(df.isnull().sum()\/df.shape[0]*100)<=50]","79a5be6f":"print(\"Old DataFrame Shape :\",df.shape)\nprint(\"New DataFrame Shape : \",new_df.shape)","2ad7e40c":"rem=[]\nfor x in new_df.columns.tolist():\n    if new_df[x].nunique()<=3:\n        print(x+ \" \"*10+\" : \",new_df[x].unique())\n        rem.append(x)","a971aaab":"new_df.drop(rem,axis=1,inplace=True)","ab6baac8":"new_df.shape","4b8f9820":"#Remove columns that are not needed for our analysis\nrem1=[\"Unique Key\",\"Incident Address\",\"Descriptor\",\"Street Name\",\"Cross Street 1\",\"Cross Street 2\",\"Due Date\",\"Resolution Description\",\"Resolution Action Updated Date\",\"Community Board\",\"X Coordinate (State Plane)\",\"Y Coordinate (State Plane)\",\"Park Borough\",\"Latitude\",\"Longitude\",\"Location\"]\n\nnew_df.drop(rem1,axis=1,inplace=True)","c81b34ae":"new_df.head()","4ea2a293":"g=sns.catplot(x=\"Complaint Type\",y=\"Request_Closing_Time\",kind=\"box\",data=new_df)\ng.fig.set_figheight(8)\ng.fig.set_figwidth(15)\nplt.xticks(rotation=90)\nplt.ylim((0,2000))","e1d12bcf":"anova_df=pd.DataFrame()\nanova_df[\"Request_Closing_Time\"]=new_df[\"Request_Closing_Time\"]\nanova_df[\"Complaint\"]=new_df[\"Complaint Type\"]\n\nanova_df.dropna(inplace=True)\nanova_df.head()","cbd7e0e6":"lm=ols(\"Request_Closing_Time~Complaint\",data=anova_df).fit()\ntable=sm.stats.anova_lm(lm)\ntable","8c66edf2":"chi_sq=pd.DataFrame()\nchi_sq[\"Location Type\"]=new_df[\"Location Type\"]\nchi_sq[\"Complaint Type\"]=new_df[\"Complaint Type\"]\n\nchi_sq.dropna(inplace=True)","733066e3":"data_crosstab = pd.crosstab( chi_sq[\"Location Type\"],chi_sq[\"Complaint Type\"])","91352bce":"stat, p, dof, expected = chi2_contingency(data_crosstab) \n\nalpha = 0.05\nif p <= alpha: \n    print('Dependent (reject H0)') \nelse: \n    print('Independent (H0 holds true)') ","be51528d":"<p style=\"color:green\">We see lots of missing value. All the values given in the above does not provides us very clear insights about our data so we can move ahead with Exploratory Data Analysis.","937a6d82":"### Exploratory Data Analysis","67793715":"<p style=\"color:green;\">We see that all the data above have not much details, are Unspecified. So we can remove those columns to ease our analysis","b1d389f3":"<p style=\"color:green\">All of our data belongs to a single agency  NYPD i.e New York City Police Department.","0a1c0b84":"### Feature Creation","7a8feb49":"### Descriptive Analysis","6f6ee19e":"<p style=\"color:green;\">Since p value for the Complaint is less that 0.01 thus we accept alternate hypothesis i.e there is significant difference in the mean response time w.r.t different type of complaint.","d84a2467":"<h2 style=\"color:red;\">Hypothesis Testing<\/h2>","96efdf9a":"<p style=\"color:green;\">We see that all the data related to school columns are empty which must be  because none of the request or complaint are from the school sector. Thus we can go on and remove that column.","7a79be40":"### Importing the Library","b7eea1c8":"<p style=\"color:green;\">Since p value for the chi square test is less than 0.05(LOS) we can conclude that Complaint Type is dependent on Location Type i.e specific type of complaint is raised from specific places,","989c2e3f":"$H_0 : \\text{ there is no significant different in mean of Request_Closing_Time for different Complaint}\\\\\nH_1 : \\text{there is signficant different in mean of Request_Closing_Time for different Complaint}$","b23ffb47":"<h2 style=\"color:red;\">Handling Missing Values","97040747":"<p style=\"color:green\">As we have got above that almost around 85% of the the requests belongs to transport (Blocked driveway,Illegal Parking, Vehicle Noise, Road Traffic etc ). From this plot we can understand that most of these issues have taken more time to get resolved. Government should take measure in incresing awareness and find some measures to reduce traffic problems.","3c0b8631":"<p style=\"color:green\">As of now almost 98% of the cases are closed state.","5d092a19":"<p style=\"color:green\">Almost around 85% of the the requests belongs to transport (Blocked driveway,Illegal Parking, Vehicle Noise, Road Traffic etc ).","d751c6ad":"<h1 style=\"color:red\"><center>Customer Service Requests Analysis<\/h1>","1a3de243":"$H_0 : \\text{Complaint  Type and Location Type are independent}\\\\\nH_1 : \\text{Complaint Type and Location Type  are  related}$","aedd4486":"<h1 style=\"color:tomato;\"><center>Conclusions<\/h1>\n<ul style=\"color:blue;\">\n    <li>Maximum Complaints are raised in road and parking (vehicle) related sectors<\/li>\n    <li>On an average complains are closed in an span of 150 to 300 hours<\/li>\n    <li>Transport and Road related issues are taking more time to get resolved as number of these cases are quite high.<\/li>\n    <li>Number of cases from Borough goes as follows BROOKLYN > QUEENS > MANHATTAN > BRONX > STATEN ISLAND<\/li>\n    <li>Complaint Type are Depentent on Location Type.<\/li>\n    <li>Time taken for solving different complaint type are different<\/li>\n<\/li>","64578451":"### Loading the Data","76c61ab7":"#### Background of Problem Statement :\n\nNYC 311's mission is to provide the public with quick and easy access to all New York City government services and information while offering the best customer service. Each day, NYC311 receives thousands of requests related to several hundred types of non-emergency services, including noise complaints, plumbing issues, and illegally parked cars. These requests are received by NYC311 and forwarded to the relevant agencies such as the police, buildings, or transportation. The agency responds to the request, addresses it, and then closes it.\n\n#### Problem Objective :\n\nPerform a service request data analysis of New York City 311 calls. You will focus on the data wrangling techniques to understand the pattern in the data and also visualize the major complaint types.\n\n#### Domain: \n###### Customer Service\n\n\n#### Tasks Performed:\n\n<ul>\n<li>Import a 311 NYC service request.<\/li>\n<li>Read or convert the columns \u2018Created Date\u2019 and Closed Date\u2019 to datetime datatype and create a new column \u2018Request_Closing_Time\u2019 as the time elapsed between request creation and request closing.<\/li>\n<li>Provide major insights\/patterns that you can offer in a visual format (graphs or tables); at least 4 major conclusions that you can come up with after generic data mining.<\/li>\n<li>Order the complaint types based on the average \u2018Request_Closing_Time\u2019, grouping them for different locations.<\/li>\n    <li>Perform a statistical tests.<\/li>\n<\/ul>\n\nPlease note: For the below statements you need to state the Null and Alternate and then provide a statistical test to accept or reject the Null Hypothesis along with the corresponding \u2018p-value\u2019.\n\n<ul>\n    <li>Whether the average response time across complaint types is similar or not (overall)<\/li>\n<li>Are the type of complaint or service requested and location related?<\/li>\n    <\/ul>\n\nWhether the average response time across complaint types is similar or not (overall)\nAre the type of complaint or service requested and location related?","3f8e7760":"<p style=\"color:green\">From above we can see that the data is heavily skewed. There are lots of outliers. Almost more than 97% of the requests are solved in less than 1000 hours i.e 17 days.","1c1f44f9":"<p style-\"color:red\">We see that maximum(mean) time  to resolve the complaint is taken in Park,Vacant Lot and Commercial areas whereas the cases in the Subway Station and Restaurent are resolved in very less time"}}